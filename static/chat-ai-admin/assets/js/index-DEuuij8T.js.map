{"version":3,"file":"index-DEuuij8T.js","sources":["../../../../front-end/chat-ai-admin-vue/src/views/explore/plugins/components/remotePlugins.vue","../../../../front-end/chat-ai-admin-vue/src/views/explore/plugins/components/feishu-config-box.vue","../../../../front-end/chat-ai-admin-vue/src/views/explore/plugins/components/plugin-config-box.vue","../../../../front-end/chat-ai-admin-vue/src/views/explore/plugins/components/config-box.vue","../../../../front-end/chat-ai-admin-vue/src/assets/official-unlogin.png","../../../../front-end/chat-ai-admin-vue/src/views/explore/plugins/components/official-article-config.vue","../../../../front-end/chat-ai-admin-vue/src/views/explore/plugins/components/installPlugins.vue","../../../../front-end/chat-ai-admin-vue/src/views/explore/plugins/index.vue"],"sourcesContent":["<template>\r\n  <div class=\"_plugin-box\">\r\n    <LoadingBox v-if=\"loading\"/>\r\n    <div v-else-if=\"list.length\" class=\"plugin-list\">\r\n      <div v-for=\"item in list\"\r\n           @click=\"linkDetail(item)\"\r\n           :key=\"item.name\"\r\n           class=\"plugin-item\">\r\n        <div class=\"type-tag\">{{item.filter_type_title}}</div>\r\n        <div class=\"base-info\">\r\n          <img class=\"avatar\" :src=\"item.icon\"/>\r\n          <div class=\"info\">\r\n            <div class=\"head\">\r\n              <span class=\"name zm-line1\">{{ item.title }}</span>\r\n            </div>\r\n            <div class=\"source\">{{ item.author }}</div>\r\n          </div>\r\n        </div>\r\n        <a-tooltip :title=\"getTooltipTitle(item.description, item, 14, 1, 0)\" placement=\"top\">\r\n          <div class=\"desc zm-line1\" :ref=\"el => setDescRef(el, item)\">{{ item.description }}</div>\r\n        </a-tooltip>\r\n        <div class=\"version\">{{ t('label_version') }}v{{ item.latest_version }}</div>\r\n        <div class=\"action-box\">\r\n          <div class=\"left\">\r\n            <svg-icon name=\"download\"/>\r\n            {{ item.installed_count || 0 }}\r\n          </div>\r\n          <div class=\"right\">\r\n            <template v-if=\"item.help_url\">\r\n              <a @click.stop class=\"c595959\" :href=\"item.help_url\" target=\"_blank\">{{ t('link_user_guide') }}</a>\r\n              <a-divider type=\"vertical\"/>\r\n            </template>\r\n            <template v-if=\"item.local\">\r\n              <a v-if=\"item.has_update\" @click.stop=\"install(item)\">{{ t('btn_update') }}</a>\r\n              <span v-else>{{ t('msg_installed') }}</span>\r\n            </template>\r\n            <a v-else @click.stop=\"install(item)\">{{ t('btn_install') }}</a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <EmptyBox v-else :title=\"t('msg_no_available_plugins')\"/>\r\n\r\n    <UpdateModal ref=\"updateRef\" @ok=\"loadData\"/>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport {onMounted, ref, watch} from 'vue';\r\nimport {useRouter} from 'vue-router';\r\nimport EmptyBox from \"@/components/common/empty-box.vue\";\r\nimport {getInstallPlugins, getRemotePlugins} from \"@/api/plugins/index.js\";\r\nimport LoadingBox from \"@/components/common/loading-box.vue\";\r\nimport UpdateModal from \"./update-modal.vue\";\r\nimport { setDescRef, getTooltipTitle } from '@/utils/index'\r\nimport { useI18n } from '@/hooks/web/useI18n';\r\n\r\nconst { t } = useI18n('views.explore.plugins.components.remote-plugins');\r\n\r\nconst emit = defineEmits(['installReport'])\r\nconst props = defineProps({\r\n  filterData: {\r\n    type: Object,\r\n    default: null\r\n  }\r\n})\r\nconst router = useRouter()\r\n\r\nconst updateRef = ref(null)\r\nconst loading = ref(true)\r\nconst list = ref([])\r\nconst localMap = ref({})\r\n\r\nonMounted(() => {\r\n  loadData()\r\n})\r\n\r\n// watch(() => props.filterData, () => {\r\n//   loadData()\r\n// }, {\r\n//   immediate: true,\r\n//   deep: true\r\n// })\r\n\r\nfunction search() {\r\n  list.value = []\r\n  loadData()\r\n}\r\n\r\nasync function loadData() {\r\n  loading.value = true\r\n  await loadInstalls()\r\n  getRemotePlugins(props.filterData).then(res => {\r\n    let _list = res?.data || []\r\n    _list.forEach(item => {\r\n      let {local, has_update} = localMap.value?.[item.name] || {}\r\n      item.local = local\r\n      item.has_update = has_update\r\n    })\r\n    list.value = _list\r\n  }).finally(() => {\r\n    loading.value = false\r\n  })\r\n}\r\n\r\nasync function loadInstalls() {\r\n  await getInstallPlugins().then(res => {\r\n    let _list = res?.data || []\r\n    emit('installReport', _list.length)\r\n    let map = {}\r\n    _list.forEach(item => {\r\n      map[item.local.name] = {\r\n        local: item.local,\r\n        has_update: item.remote.latest_version != item.local.version,\r\n      }\r\n    })\r\n    localMap.value = map\r\n  })\r\n}\r\n\r\nfunction linkDetail(item) {\r\n  router.push({\r\n    path: '/plugins/detail',\r\n    query: {\r\n      name: item.name\r\n    }\r\n  })\r\n}\r\n\r\nfunction install(item) {\r\n  updateRef.value.show(item, item.latest_version_detail, item.local || null)\r\n}\r\n\r\ndefineExpose({\r\n  search,\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n@import \"plugins\";\r\n\r\n.text-center {\r\n  text-align: center;\r\n}\r\n\r\n.mt24 {\r\n  margin-top: 24px;\r\n}\r\n\r\n.c595959 {\r\n  color: #595959;\r\n}\r\n</style>\r\n","<template>\r\n  <div>\r\n    <a-drawer\r\n      v-model:open=\"open\"\r\n      placement=\"right\"\r\n      width=\"400px\"\r\n      :headerStyle=\"{display: 'none'}\"\r\n      :bodyStyle=\"{padding: 0}\"\r\n    >\r\n      <div class=\"head-box\">\r\n        <div class=\"base-info-box\">\r\n          <img class=\"avatar\" :src=\"detail.icon\"/>\r\n          <div class=\"info-box\">\r\n            <div class=\"left\">\r\n              <div class=\"name zm-line1\">{{ detail.title }}</div>\r\n              <div>{{ detail.author }}</div>\r\n            </div>\r\n            <div class=\"right\">\r\n              <CloseOutlined @click=\"open = false\" class=\"icon\"/>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"link\">{{ detail.description }}</div>\r\n        <a-popover v-if=\"configLen > 0\" placement=\"bottom\">\r\n          <template #content>\r\n            <div class=\"tools-box\">\r\n              <div v-for=\"(item, key) in configData\" :key=\"key\" class=\"tool-item\">\r\n                <img class=\"cover\" src=\"@/assets/img/robot/tool-icon.svg\"/>\r\n                <div class=\"info\">\r\n                  <div class=\"tit zm-line1\">{{ item.name }}</div>\r\n                  <div class=\"btns\">\r\n                    <a-tag v-if=\"item.is_default\" color=\"#f50\">{{ t('label_default') }}</a-tag>\r\n                    <a v-else @click=\"setConfigDef(item, key)\">{{ t('btn_set_default') }}</a>\r\n                    <a @click=\"delConfig(item, key)\">{{ t('btn_delete') }}</a>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </template>\r\n          <a-button type=\"primary\" :icon=\"h(PlusOutlined)\" class=\"auth-btn\" @click=\"showAddModal\">\r\n            {{ t('msg_authorized_credentials', {count: configLen}) }}\r\n          </a-button>\r\n        </a-popover>\r\n        <a-button v-else type=\"primary\" class=\"auth-btn\" @click=\"showAddModal\">{{ t('btn_authorize_now') }}</a-button>\r\n      </div>\r\n      <div class=\"body-box\">\r\n        <div v-if=\"!configLen\" class=\"no-auth-box\">\r\n          <img src=\"@/assets/no-permission.png\"/>\r\n          <div class=\"tit\">{{ t('msg_need_authorization') }}</div>\r\n          <div class=\"desc\">{{ t('msg_config_after_auth') }}</div>\r\n          <a class=\"link\" @click=\"showAddModal\">{{ t('btn_authorize_now') }}</a>\r\n        </div>\r\n        <div v-else class=\"action-box\">\r\n          <div v-for=\"(item, i) in actionData\" :key=\"i\" class=\"action-item\">\r\n            <div class=\"tit\">{{ item.title }}</div>\r\n            <div class=\"desc\">{{ item.desc }}</div>\r\n            <div class=\"params\">\r\n              <a-tag\r\n                v-for=\"(field, j) in Object.keys(item.params).slice(0, 3)\"\r\n                :key=\"j\"\r\n                :bordered=\"false\">{{ field }}\r\n              </a-tag>\r\n              <a-popover placement=\"right\">\r\n                <template #content>\r\n                  <div class=\"params-box\">\r\n                    <div v-for=\"(field, key) in item.params\" :key=\"key\" class=\"param-item\">\r\n                      <div class=\"field\">\r\n                        <span class=\"name\">{{ key }}</span>\r\n                        <span class=\"type\">{{ field.type }}</span>\r\n                        <span v-if=\"field.required\" class=\"required\">{{ t('label_required') }}</span>\r\n                      </div>\r\n                      <div class=\"desc\">{{ field.desc }}</div>\r\n                    </div>\r\n                  </div>\r\n                </template>\r\n                <a>{{ t('label_params') }}</a>\r\n              </a-popover>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </a-drawer>\r\n\r\n    <FeishuConfigModal ref=\"configModalRef\" @change=\"loadConfig\"/>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport {ref, reactive, h, computed} from 'vue';\r\nimport {EllipsisOutlined, CloseOutlined, PlusOutlined} from '@ant-design/icons-vue';\r\nimport {message, Modal} from 'ant-design-vue';\r\nimport {authTMcpProvider, getTMcpProviderInfo} from \"@/api/robot/thirdMcp\";\r\nimport {jsonDecode, timeNowGapFormat} from \"@/utils/index.js\";\r\nimport {setShowReqError} from \"@/utils/http/axios/config.js\";\r\nimport {getPluginConfig, runPlugin, setPluginConfig} from \"@/api/plugins/index.js\";\r\nimport FeishuConfigModal from \"@/views/explore/plugins/components/feishu-config-modal.vue\";\r\nimport { useI18n } from '@/hooks/web/useI18n';\r\n\r\nconst { t } = useI18n('views.explore.plugins.components.feishu-config-box')\r\nconst emit = defineEmits(['del', 'edit', 'auth'])\r\n\r\nconst configModalRef = ref(null)\r\nconst open = ref(false)\r\nconst detail = ref({})\r\nconst configData = ref({})\r\nconst actionData = ref({})\r\n\r\nconst configLen = computed(() => {\r\n  return Object.keys(configData.value).length\r\n})\r\n\r\nfunction show(info) {\r\n  detail.value = info\r\n  loadConfig()\r\n  loadAction()\r\n  open.value = true\r\n}\r\n\r\nfunction hide() {\r\n  open.value = false\r\n}\r\n\r\nfunction loadConfig() {\r\n  getPluginConfig({name: detail.value.name}).then(res => {\r\n    configData.value = jsonDecode(res?.data, {})\r\n  })\r\n}\r\n\r\nfunction loadAction() {\r\n  runPlugin({\r\n    name: detail.value.name,\r\n    action: \"default/get-schema\",\r\n    params: {}\r\n  }).then(res => {\r\n    let _data = res?.data || {}\r\n    for (let key in _data) {\r\n      if (_data[key].type != 'node') delete _data[key]\r\n    }\r\n    actionData.value = _data\r\n  })\r\n}\r\n\r\nfunction showAddModal() {\r\n  configModalRef.value.show(configData.value)\r\n}\r\n\r\nfunction setConfigDef(item, key) {\r\n  for (let _key in configData.value) {\r\n    configData.value[_key].is_default = (_key == key)\r\n  }\r\n  setPluginConfig({\r\n    name: detail.value.name,\r\n    data: JSON.stringify(configData.value)\r\n  }).then(res => {\r\n    loadConfig()\r\n  })\r\n}\r\n\r\nfunction delConfig(item, key) {\r\n  Modal.confirm({\r\n    title: t('title_tip'),\r\n    content: t('msg_confirm_delete_config'),\r\n    onOk: () => {\r\n      delete configData.value[key]\r\n      setPluginConfig({\r\n        name: detail.value.name,\r\n        data: JSON.stringify(configData.value)\r\n      }).then(res => {\r\n        loadConfig()\r\n        message.success(t('msg_deleted'))\r\n      })\r\n    }\r\n  })\r\n}\r\n\r\ndefineExpose({\r\n  show,\r\n  hide,\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.head-box {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12px;\r\n  color: #595959;\r\n  font-size: 14px;\r\n  font-weight: 400;\r\n  border-bottom: 1px solid #E4E6EB;\r\n  padding: 24px;\r\n\r\n  .base-info-box {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n\r\n    .avatar {\r\n      width: 62px;\r\n      height: 62px;\r\n      border-radius: 14.59px;\r\n      flex-shrink: 0;\r\n      margin-right: 12px;\r\n    }\r\n\r\n    .info-box {\r\n      flex: 1;\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: flex-start;\r\n\r\n      .left {\r\n        max-width: 70%;\r\n      }\r\n\r\n      .right {\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 12px;\r\n      }\r\n\r\n      .icon {\r\n        cursor: pointer;\r\n      }\r\n\r\n      .name {\r\n        color: #262626;\r\n        font-size: 16px;\r\n        font-weight: 600;\r\n        margin-bottom: 4px;\r\n      }\r\n    }\r\n  }\r\n\r\n  .link {\r\n    word-break: break-all;\r\n  }\r\n\r\n  .auth-btn {\r\n    width: 100%;\r\n  }\r\n}\r\n\r\n.body-box {\r\n  padding: 24px;\r\n\r\n  .main-tit {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    color: #262626;\r\n    font-size: 14px;\r\n    font-weight: 600;\r\n\r\n    .extra-box {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 12px;\r\n    }\r\n\r\n    .update-time {\r\n      color: #8c8c8c;\r\n      font-size: 12px;\r\n      font-weight: 400;\r\n    }\r\n\r\n    .refresh-btn {\r\n      font-weight: 400;\r\n    }\r\n  }\r\n}\r\n\r\n.tools-box {\r\n  width: 330px;\r\n\r\n  .tool-item {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    gap: 12px;\r\n    margin-top: 16px;\r\n\r\n    &:first-child {\r\n      margin-top: 0;\r\n    }\r\n\r\n    .cover {\r\n      width: 32px;\r\n      height: 32px;\r\n      border-radius: 6px;\r\n      flex-shrink: 0;\r\n    }\r\n\r\n    .info {\r\n      flex: 1;\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n\r\n      .tit {\r\n        max-width: 200px;\r\n        color: #000000;\r\n        font-weight: 400;\r\n      }\r\n\r\n      .btns {\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 8px;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.action-box {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 16px;\r\n\r\n  .action-item {\r\n    border-bottom: 1px solid #D9D9D9;\r\n    padding-bottom: 16px;\r\n    .tit {\r\n      color: #262626;\r\n      font-size: 14px;\r\n      font-weight: 600;\r\n    }\r\n\r\n    .desc {\r\n      color: #595959;\r\n      font-size: 14px;\r\n      font-weight: 400;\r\n      margin-top: 8px;\r\n    }\r\n\r\n    .params {\r\n      margin-top: 8px;\r\n    }\r\n  }\r\n}\r\n\r\n.params-box {\r\n  max-height: 80vh;\r\n  overflow-y: auto;\r\n\r\n  .param-item {\r\n    max-width: 500px;\r\n\r\n    &:not(:last-child) {\r\n      margin-bottom: 16px;\r\n    }\r\n\r\n    .field {\r\n      color: #262626;\r\n      font-size: 14px;\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 12px;\r\n\r\n      .name {\r\n        font-weight: 600;\r\n      }\r\n\r\n      .type {\r\n        color: #595959;\r\n      }\r\n\r\n      .required {\r\n        color: #ED744A;\r\n        font-weight: 500;\r\n      }\r\n    }\r\n\r\n    .desc {\r\n      color: #8c8c8c;\r\n      font-size: 14px;\r\n      margin-top: 4px;\r\n    }\r\n  }\r\n}\r\n\r\n.no-auth-box {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n\r\n  img {\r\n    width: 200px;\r\n    height: 200px\r\n  }\r\n\r\n  .tit {\r\n    color: #262626;\r\n    font-size: 16px;\r\n    font-weight: 600;\r\n  }\r\n\r\n  .desc {\r\n    color: #8c8c8c;\r\n    font-size: 14px;\r\n    font-weight: 400;\r\n    margin: 8px 0 12px;\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div>\r\n    <a-drawer\r\n      v-model:open=\"open\"\r\n      placement=\"right\"\r\n      width=\"400px\"\r\n      :headerStyle=\"{display: 'none'}\"\r\n      :bodyStyle=\"{padding: 0}\"\r\n    >\r\n      <div class=\"head-box\">\r\n        <div class=\"base-info-box\">\r\n          <img class=\"avatar\" :src=\"detail.icon\"/>\r\n          <div class=\"info-box\">\r\n            <div class=\"left\">\r\n              <div class=\"name zm-line1\">{{ detail.title }}</div>\r\n              <div>{{ detail.author }}</div>\r\n            </div>\r\n            <div class=\"right\">\r\n              <CloseOutlined @click=\"open = false\" class=\"icon\"/>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"link\">{{ detail.description }}</div>\r\n        <a-popover v-if=\"configLen > 0\" placement=\"bottom\">\r\n          <template #content>\r\n            <div class=\"tools-box\">\r\n              <div v-for=\"(item, key) in configData\" :key=\"key\" class=\"tool-item\">\r\n                <img class=\"cover\" src=\"@/assets/img/robot/tool-icon.svg\"/>\r\n                <div class=\"info\">\r\n                  <div class=\"tit zm-line1\">{{ item.name }}</div>\r\n                  <div class=\"btns\">\r\n                    <a-tag v-if=\"item.is_default\" color=\"#f50\">{{ t('label_default') }}</a-tag>\r\n                    <a v-else @click=\"setConfigDef(item, key)\">{{ t('btn_set_as_default') }}</a>\r\n                    <a @click=\"delConfig(item, key)\">{{ t('btn_delete') }}</a>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </template>\r\n          <a-button type=\"primary\" :icon=\"h(PlusOutlined)\" class=\"auth-btn\" @click=\"onAuth\">{{ t('msg_authorized_credentials', { count: configLen }) }}</a-button>\r\n        </a-popover>\r\n        <a-button v-else type=\"primary\" class=\"auth-btn\" @click=\"onAuth\">{{ t('btn_authorize_now') }}</a-button>\r\n      </div>\r\n      <div class=\"body-box\">\r\n        <div v-if=\"!configLen\" class=\"no-auth-box\">\r\n          <img src=\"@/assets/no-permission.png\"/>\r\n          <div class=\"tit\">{{ t('title_authorization_required') }}</div>\r\n          <div class=\"desc\">{{ t('msg_config_after_auth') }}</div>\r\n          <a class=\"link\" @click=\"onAuth\">{{ t('btn_authorize_now') }}</a>\r\n        </div>\r\n        <div v-else class=\"action-box\">\r\n          <div v-for=\"(item, i) in actionData\" :key=\"i\" class=\"action-item\">\r\n            <div class=\"tit\">{{ item.title }}</div>\r\n            <div class=\"desc\">{{ item.desc }}</div>\r\n            <div class=\"params\">\r\n              <a-tag\r\n                v-for=\"(field, j) in Object.keys(item.params).slice(0, 3)\"\r\n                :key=\"j\"\r\n                :bordered=\"false\">{{ field }}\r\n              </a-tag>\r\n              <a-popover placement=\"right\">\r\n                <template #content>\r\n                  <div class=\"params-box\">\r\n                    <div v-for=\"(field, key) in item.params\" :key=\"key\" class=\"param-item\">\r\n                      <div class=\"field\">\r\n                        <span class=\"name\">{{ key }}</span>\r\n                        <span class=\"type\">{{ field.type }}</span>\r\n                        <span v-if=\"field.required\" class=\"required\">{{ t('label_required') }}</span>\r\n                      </div>\r\n                      <div class=\"desc\">{{ field.desc }}</div>\r\n                    </div>\r\n                  </div>\r\n                </template>\r\n                <a>{{ t('label_parameters') }}</a>\r\n              </a-popover>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </a-drawer>\r\n    <PluginConfigModal ref=\"configModalRef\" @change=\"loadConfig\" />\r\n  </div>\r\n  </template>\r\n  \r\n  <script setup>\r\n  import {ref, h, computed} from 'vue';\r\n  import {CloseOutlined, PlusOutlined} from '@ant-design/icons-vue';\r\n  import {message, Modal} from 'ant-design-vue';\r\n  import {jsonDecode} from \"@/utils/index.js\";\r\n  import {getPluginConfig, setPluginConfig} from \"@/api/plugins/index.js\";\r\n  import PluginConfigModal from \"./plugin-config-modal.vue\";\r\n  import { useI18n } from '@/hooks/web/useI18n';\r\n\r\n  const { t } = useI18n('views.explore.plugins.components.plugin-config-box');\r\n  \r\n  const open = ref(false)\r\n  const detail = ref({})\r\n  const configData = ref({})\r\n  const actionData = ref({})\r\n  const configModalRef = ref(null)\r\n  \r\n  const configLen = computed(() => {\r\n    return Object.keys(configData.value).length\r\n  })\r\n  \r\n  function show(info, schemaData) {\r\n    detail.value = info\r\n    loadConfig()\r\n    setActionBySchema(schemaData)\r\n    open.value = true\r\n  }\r\n  \r\n  function hide() {\r\n    open.value = false\r\n  }\r\n  \r\n  function onAuth() {\r\n    configModalRef.value && configModalRef.value.show(configData.value, detail.value.name, actionData.value)\r\n  }\r\n  \r\n  function loadConfig() {\r\n    getPluginConfig({name: detail.value.name}).then(res => {\r\n      configData.value = jsonDecode(res?.data, {})\r\n    })\r\n  }\r\n  \r\n  function setActionBySchema(schema) {\r\n    let _data = schema || {}\r\n    for (let key in _data) {\r\n      if (_data[key].type != 'node') delete _data[key]\r\n    }\r\n    actionData.value = _data\r\n  }\r\n  \r\n  function setConfigDef(item, key) {\r\n    for (let _key in configData.value) {\r\n      configData.value[_key].is_default = (_key == key)\r\n    }\r\n    setPluginConfig({\r\n      name: detail.value.name,\r\n      data: JSON.stringify(configData.value)\r\n    }).then(() => {\r\n      loadConfig()\r\n    })\r\n  }\r\n  \r\n  function delConfig(item, key) {\r\n    Modal.confirm({\r\n      title: t('title_tip'),\r\n      content: t('msg_confirm_delete_config'),\r\n      onOk: () => {\r\n        delete configData.value[key]\r\n        setPluginConfig({\r\n          name: detail.value.name,\r\n          data: JSON.stringify(configData.value)\r\n        }).then(() => {\r\n          loadConfig()\r\n          message.success(t('msg_deleted'))\r\n        })\r\n      }\r\n    })\r\n  }\r\n  \r\n  defineExpose({\r\n    show,\r\n    hide,\r\n  })\r\n  </script>\r\n  \r\n  <style scoped lang=\"less\">\r\n  .head-box {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 12px;\r\n    color: #595959;\r\n    font-size: 14px;\r\n    font-weight: 400;\r\n    border-bottom: 1px solid #E4E6EB;\r\n    padding: 24px;\r\n  \r\n    .base-info-box {\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: space-between;\r\n  \r\n      .avatar {\r\n        width: 62px;\r\n        height: 62px;\r\n        border-radius: 14.59px;\r\n        flex-shrink: 0;\r\n        margin-right: 12px;\r\n      }\r\n  \r\n      .info-box {\r\n        flex: 1;\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: flex-start;\r\n  \r\n        .left {\r\n          max-width: 70%;\r\n        }\r\n  \r\n        .right {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 12px;\r\n        }\r\n  \r\n        .icon {\r\n          cursor: pointer;\r\n        }\r\n  \r\n        .name {\r\n          color: #262626;\r\n          font-size: 16px;\r\n          font-weight: 600;\r\n          margin-bottom: 4px;\r\n        }\r\n      }\r\n    }\r\n  \r\n    .link {\r\n      word-break: break-all;\r\n    }\r\n  \r\n    .auth-btn {\r\n      width: 100%;\r\n    }\r\n  }\r\n  \r\n  .body-box {\r\n    padding: 24px;\r\n  \r\n    .main-tit {\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: space-between;\r\n      color: #262626;\r\n      font-size: 14px;\r\n      font-weight: 600;\r\n  \r\n      .extra-box {\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 12px;\r\n      }\r\n  \r\n      .update-time {\r\n        color: #8c8c8c;\r\n        font-size: 12px;\r\n        font-weight: 400;\r\n      }\r\n  \r\n      .refresh-btn {\r\n        font-weight: 400;\r\n      }\r\n    }\r\n  }\r\n  \r\n  .tools-box {\r\n    width: 330px;\r\n  \r\n    .tool-item {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      gap: 12px;\r\n      margin-top: 16px;\r\n  \r\n      &:first-child {\r\n        margin-top: 0;\r\n      }\r\n  \r\n      .cover {\r\n        width: 32px;\r\n        height: 32px;\r\n        border-radius: 6px;\r\n        flex-shrink: 0;\r\n      }\r\n  \r\n      .info {\r\n        flex: 1;\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n  \r\n        .tit {\r\n          max-width: 200px;\r\n          color: #000000;\r\n          font-weight: 400;\r\n        }\r\n  \r\n        .btns {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 8px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  \r\n  .action-box {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 16px;\r\n  \r\n    .action-item {\r\n      border-bottom: 1px solid #D9D9D9;\r\n      padding-bottom: 16px;\r\n      .tit {\r\n        color: #262626;\r\n        font-size: 14px;\r\n        font-weight: 600;\r\n      }\r\n  \r\n      .desc {\r\n        color: #595959;\r\n        font-size: 14px;\r\n        font-weight: 400;\r\n        margin-top: 8px;\r\n      }\r\n  \r\n      .params {\r\n        margin-top: 8px;\r\n      }\r\n    }\r\n  }\r\n  \r\n  .params-box {\r\n    max-height: 80vh;\r\n    overflow-y: auto;\r\n  \r\n    .param-item {\r\n      max-width: 500px;\r\n  \r\n      &:not(:last-child) {\r\n        margin-bottom: 16px;\r\n      }\r\n  \r\n      .field {\r\n        color: #262626;\r\n        font-size: 14px;\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 12px;\r\n  \r\n        .name {\r\n          font-weight: 600;\r\n        }\r\n  \r\n        .type {\r\n          color: #595959;\r\n        }\r\n  \r\n        .required {\r\n          color: #ED744A;\r\n          font-weight: 500;\r\n        }\r\n      }\r\n  \r\n      .desc {\r\n        color: #8c8c8c;\r\n        font-size: 14px;\r\n        margin-top: 4px;\r\n      }\r\n    }\r\n  }\r\n  \r\n  .no-auth-box {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n  \r\n    img {\r\n      width: 200px;\r\n      height: 200px\r\n    }\r\n  \r\n    .tit {\r\n      color: #262626;\r\n      font-size: 16px;\r\n      font-weight: 600;\r\n    }\r\n  \r\n    .desc {\r\n      color: #8c8c8c;\r\n      font-size: 14px;\r\n      font-weight: 400;\r\n      margin: 8px 0 12px;\r\n    }\r\n  }\r\n  </style>\r\n","<template>\r\n  <div>\r\n    <a-drawer\r\n      v-model:open=\"open\"\r\n      placement=\"right\"\r\n      width=\"400px\"\r\n      :headerStyle=\"{display: 'none'}\"\r\n      :bodyStyle=\"{padding: 0}\"\r\n    >\r\n      <div class=\"head-box\">\r\n        <div class=\"base-info-box\">\r\n          <img class=\"avatar\" :src=\"detail.icon\"/>\r\n          <div class=\"info-box\">\r\n            <div class=\"left\">\r\n              <div class=\"name zm-line1\">{{ detail.title }}</div>\r\n              <div>{{ detail.author }}</div>\r\n            </div>\r\n            <div class=\"right\">\r\n              <CloseOutlined @click=\"open = false\" class=\"icon\"/>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"link\">{{ detail.description }}</div>\r\n        <slot name=\"head-extra\"></slot>\r\n      </div>\r\n      <div class=\"body-box\">\r\n        <slot name=\"body\">\r\n          <div class=\"action-box\">\r\n          <div v-for=\"(item, i) in actionData\" :key=\"i\" class=\"action-item\">\r\n            <div class=\"tit\">{{ item.title }}</div>\r\n            <div class=\"desc\">{{ item.desc }}</div>\r\n            <div class=\"params\">\r\n              <a-tag\r\n                v-for=\"(field, j) in Object.keys(item.params).slice(0, 3)\"\r\n                :key=\"j\"\r\n                :bordered=\"false\">{{ field }}\r\n              </a-tag>\r\n              <a-popover placement=\"right\">\r\n                <template #content>\r\n                  <div class=\"params-box\">\r\n                    <div v-for=\"(field, key) in item.params\" :key=\"key\" class=\"param-item\">\r\n                      <div class=\"field\">\r\n                        <span class=\"name\">{{ key }}</span>\r\n                        <span class=\"type\">{{ field.type }}</span>\r\n                        <span v-if=\"field.required\" class=\"required\">{{ t('label_required') }}</span>\r\n                      </div>\r\n                      <div class=\"desc\">{{ field.desc }}</div>\r\n                    </div>\r\n                  </div>\r\n                </template>\r\n                <a>{{ t('label_params') }}</a>\r\n              </a-popover>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        </slot>\r\n      </div>\r\n    </a-drawer>\r\n    <PluginConfigBox ref=\"pluginConfigRef\" @auth=\"emit('auth')\" />\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport {ref, reactive, h, computed} from 'vue';\r\nimport {EllipsisOutlined, CloseOutlined, PlusOutlined} from '@ant-design/icons-vue';\r\nimport {message, Modal} from 'ant-design-vue';\r\nimport {jsonDecode, timeNowGapFormat} from \"@/utils/index.js\";\r\nimport {getPluginConfig, runPlugin, setPluginConfig} from \"@/api/plugins/index.js\";\r\nimport PluginConfigBox from \"./plugin-config-box.vue\";\r\nimport { useI18n } from '@/hooks/web/useI18n';\r\n\r\nconst { t } = useI18n('views.explore.plugins.components.config-box')\r\nconst emit = defineEmits(['del', 'edit', 'auth'])\r\n\r\nconst open = ref(false)\r\nconst detail = ref({})\r\nconst actionData = ref({})\r\nconst pluginConfigRef = ref(null)\r\n\r\nfunction show(info) {\r\n  detail.value = info\r\n  loadAction()\r\n}\r\n\r\nfunction hide() {\r\n  open.value = false\r\n}\r\n\r\nfunction loadAction() {\r\n  runPlugin({\r\n    name: detail.value.name,\r\n    action: \"default/get-schema\",\r\n    params: {}\r\n  }).then(res => {\r\n    let _data = res?.data || {}\r\n    const usePluginConfig = Object.values(_data || {}).some(v => v && v.use_plugin_config === true)\r\n    if (usePluginConfig) {\r\n      pluginConfigRef.value && pluginConfigRef.value.show(detail.value, _data)\r\n      open.value = false\r\n      return\r\n    }\r\n    for (let key in _data) {\r\n      if (_data[key].type != 'node') delete _data[key]\r\n    }\r\n    actionData.value = _data\r\n    open.value = true\r\n  })\r\n}\r\n\r\nfunction setConfigDef(item, key) {\r\n  for (let _key in configData.value) {\r\n    configData.value[_key].is_default = (_key == key)\r\n  }\r\n  setPluginConfig({\r\n    name: detail.value.name,\r\n    data: JSON.stringify(configData.value)\r\n  }).then(res => {\r\n    loadConfig()\r\n  })\r\n}\r\n\r\ndefineExpose({\r\n  show,\r\n  hide,\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.head-box {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12px;\r\n  color: #595959;\r\n  font-size: 14px;\r\n  font-weight: 400;\r\n  border-bottom: 1px solid #E4E6EB;\r\n  padding: 24px;\r\n\r\n  .base-info-box {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n\r\n    .avatar {\r\n      width: 62px;\r\n      height: 62px;\r\n      border-radius: 14.59px;\r\n      flex-shrink: 0;\r\n      margin-right: 12px;\r\n    }\r\n\r\n    .info-box {\r\n      flex: 1;\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: flex-start;\r\n\r\n      .left {\r\n        max-width: 70%;\r\n      }\r\n\r\n      .right {\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 12px;\r\n      }\r\n\r\n      .icon {\r\n        cursor: pointer;\r\n      }\r\n\r\n      .name {\r\n        color: #262626;\r\n        font-size: 16px;\r\n        font-weight: 600;\r\n        margin-bottom: 4px;\r\n      }\r\n    }\r\n  }\r\n\r\n  .link {\r\n    word-break: break-all;\r\n  }\r\n\r\n  .auth-btn {\r\n    width: 100%;\r\n  }\r\n}\r\n\r\n.body-box {\r\n  padding: 24px;\r\n\r\n  .main-tit {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    color: #262626;\r\n    font-size: 14px;\r\n    font-weight: 600;\r\n\r\n    .extra-box {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 12px;\r\n    }\r\n\r\n    .update-time {\r\n      color: #8c8c8c;\r\n      font-size: 12px;\r\n      font-weight: 400;\r\n    }\r\n\r\n    .refresh-btn {\r\n      font-weight: 400;\r\n    }\r\n  }\r\n}\r\n\r\n.tools-box {\r\n  width: 330px;\r\n\r\n  .tool-item {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    gap: 12px;\r\n    margin-top: 16px;\r\n\r\n    &:first-child {\r\n      margin-top: 0;\r\n    }\r\n\r\n    .cover {\r\n      width: 32px;\r\n      height: 32px;\r\n      border-radius: 6px;\r\n      flex-shrink: 0;\r\n    }\r\n\r\n    .info {\r\n      flex: 1;\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n\r\n      .tit {\r\n        max-width: 200px;\r\n        color: #000000;\r\n        font-weight: 400;\r\n      }\r\n\r\n      .btns {\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 8px;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.action-box {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 16px;\r\n\r\n  .action-item {\r\n    border-bottom: 1px solid #D9D9D9;\r\n    padding-bottom: 16px;\r\n    .tit {\r\n      color: #262626;\r\n      font-size: 14px;\r\n      font-weight: 600;\r\n    }\r\n\r\n    .desc {\r\n      color: #595959;\r\n      font-size: 14px;\r\n      font-weight: 400;\r\n      margin-top: 8px;\r\n    }\r\n\r\n    .params {\r\n      margin-top: 8px;\r\n    }\r\n  }\r\n}\r\n\r\n.params-box {\r\n  max-height: 80vh;\r\n  overflow-y: auto;\r\n\r\n  .param-item {\r\n    max-width: 500px;\r\n\r\n    &:not(:last-child) {\r\n      margin-bottom: 16px;\r\n    }\r\n\r\n    .field {\r\n      color: #262626;\r\n      font-size: 14px;\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 12px;\r\n\r\n      .name {\r\n        font-weight: 600;\r\n      }\r\n\r\n      .type {\r\n        color: #595959;\r\n      }\r\n\r\n      .required {\r\n        color: #ED744A;\r\n        font-weight: 500;\r\n      }\r\n    }\r\n\r\n    .desc {\r\n      color: #8c8c8c;\r\n      font-size: 14px;\r\n      margin-top: 4px;\r\n    }\r\n  }\r\n}\r\n\r\n.no-auth-box {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n\r\n  img {\r\n    width: 200px;\r\n    height: 200px\r\n  }\r\n\r\n  .tit {\r\n    color: #262626;\r\n    font-size: 16px;\r\n    font-weight: 600;\r\n  }\r\n\r\n  .desc {\r\n    color: #8c8c8c;\r\n    font-size: 14px;\r\n    font-weight: 400;\r\n    margin: 8px 0 12px;\r\n  }\r\n}\r\n\r\n.cFB363F {\r\n  color: #FB363F;\r\n}\r\n\r\n.tip-desc {\r\n  color: #8C8C8C;\r\n  margin-top: 4px;\r\n}\r\n\r\n.mt16 {\r\n  margin-top: 16px;\r\n}\r\n</style>\r\n","export default \"__VITE_ASSET__DftusxVS__\"","<template>\r\n  <ConfigBox ref=\"configRef\">\r\n    <template v-if=\"loginStatus\" #head-extra>\r\n      <div class=\"main-box\">\r\n        <div class=\"login-info-box\">\r\n          <img class=\"avatar\" :src=\"loginInfo?.headimgurl\"/>\r\n          <div class=\"info\">\r\n            <div class=\"name\">{{ loginInfo?.nickname }}</div>\r\n            <div>{{ t('label_recent_login_time') }}{{ dayjs(loginInfo.login_time * 1000).format('YYYY-MM-DD HH:mm') }}</div>\r\n            <div>{{ t('label_login_duration') }}{{ loginInfo.login_duration_text }}</div>\r\n          </div>\r\n        </div>\r\n        <a class=\"main-btn\" :href=\"loginUrl\" target=\"_blank\">{{ t('btn_change_password_settings') }}</a>\r\n      </div>\r\n    </template>\r\n    <template v-else #body>\r\n      <div class=\"no-auth-box\">\r\n        <img src=\"@/assets/official-unlogin.png\"/>\r\n        <div class=\"tit\">{{ t('title_login_required') }}</div>\r\n        <a-button type=\"primary\" class=\"link\" @click=\"goLogin\">{{ t('btn_go_login') }}</a-button>\r\n        <div class=\"desc\">{{ t('msg_already_logged_in') }}<a-button type=\"link\" @click=\"refresh\" :loading=\"loading\">{{ t('btn_click_refresh') }}</a-button></div>\r\n      </div>\r\n    </template>\r\n  </ConfigBox>\r\n</template>\r\n\r\n<script setup>\r\nimport {ref} from 'vue';\r\nimport dayjs from 'dayjs';\r\nimport ConfigBox from \"./config-box.vue\";\r\nimport {useOfficialArticleLogin} from \"@/composables/useOfficialArticleLogin.js\";\r\nimport { useI18n } from '@/hooks/web/useI18n';\r\n\r\nconst { t } = useI18n('views.explore.plugins.components.official-article-config');\r\n\r\nconst {\r\n  loginInfo,\r\n  loginStatus,\r\n  loginUrl,\r\n  loading,\r\n  refresh,\r\n  goLogin,\r\n  init,\r\n} = useOfficialArticleLogin(false)\r\nconst configRef = ref(null)\r\n\r\nfunction show(info) {\r\n  init()\r\n  configRef.value.show(info)\r\n}\r\n\r\n\r\ndefineExpose({\r\n  show,\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.main-box {\r\n  border-radius: 6px;\r\n  background: #F2F4F7;\r\n  padding: 16px;\r\n  text-align: center;\r\n\r\n  .login-info-box {\r\n    display: flex;\r\n    gap: 8px;\r\n    margin-bottom: 16px;\r\n    text-align: left;\r\n\r\n    .avatar {\r\n      flex-shrink: 0;\r\n      width: 48px;\r\n      height: 48px;\r\n      border-radius: 12px;\r\n    }\r\n\r\n    .info {\r\n      color: #7a8699;\r\n      font-size: 14px;\r\n      display: flex;\r\n      flex-direction: column;\r\n      gap: 2px;\r\n\r\n      .name {\r\n        color: #262626;\r\n      }\r\n    }\r\n  }\r\n\r\n  .main-btn {\r\n    width: 100%;\r\n    padding: 5px 16px;\r\n    border-radius: 6px;\r\n    border: 1px solid #D9D9D9;\r\n    background: #FFF;\r\n    color: #595959;\r\n    text-align: center;\r\n  }\r\n}\r\n\r\n.no-auth-box {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n\r\n  .link {\r\n    width: 168px;\r\n    margin-top: 16px;\r\n  }\r\n\r\n  img {\r\n    width: 200px;\r\n    height: 200px\r\n  }\r\n\r\n  .tit {\r\n    color: #262626;\r\n    font-size: 16px;\r\n    font-weight: 600;\r\n  }\r\n\r\n  .desc {\r\n    color: #8c8c8c;\r\n    font-size: 14px;\r\n    font-weight: 400;\r\n    margin: 12px 0;\r\n\r\n    :deep(.ant-btn) {\r\n      padding: 0;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"_plugin-box\">\r\n    <LoadingBox v-if=\"loading\"/>\r\n    <div v-else-if=\"allList.length\" class=\"plugin-list\">\r\n      <div v-for=\"item in allList\"\r\n           @click=\"linkDetail(item)\"\r\n           :key=\"item.name\"\r\n           class=\"plugin-item\"\r\n           :class=\"{'trigger-plugin-item': item.local.type == 'trigger'}\"\r\n           >\r\n        <div class=\"type-tag\">{{item.filter_type_title}}</div>\r\n        <div class=\"base-info\">\r\n          <img class=\"avatar\" :src=\"item.icon\"/>\r\n          <div class=\"info\">\r\n            <div class=\"head\">\r\n              <span class=\"name zm-line1\">{{ item.title }}</span>\r\n            </div>\r\n            <div class=\"source\">{{ item.author }}</div>\r\n          </div>\r\n        </div>\r\n        <a-tooltip :title=\"getTooltipTitle(item.description, item)\" placement=\"top\">\r\n          <div class=\"desc zm-line1\" :ref=\"el => setDescRef(el, item)\">{{ item.description }}</div>\r\n        </a-tooltip>\r\n        <div class=\"version\">{{ t('label_version', {version: item.local.version}) }} <span v-if=\"item.has_update\" class=\"tag\">{{ t('label_has_update') }}</span></div>\r\n        <div class=\"action-box\">\r\n          <div class=\"left\" @click.stop=\"\">\r\n            <a-switch v-model:checked=\"item.local.has_loaded\" @change=\"openChange(item)\"/>\r\n          </div>\r\n          <div class=\"right\">\r\n            <span v-if=\"item.local.type != 'trigger'\" class=\"zm-link-pointer\" @click.stop=\"delPlugin(item)\">{{ t('btn_delete') }}</span>\r\n            <template v-if=\"item.help_url\">\r\n              <a-divider type=\"vertical\"/>\r\n              <a @click.stop class=\"c595959\" :href=\"item.help_url\" target=\"_blank\">{{ t('btn_usage_guide') }}</a>\r\n            </template>\r\n            <template v-if=\"showConfigPlugins.includes(item.name) || item.local.multiNode\">\r\n              <a-divider type=\"vertical\"/>\r\n              <a @click.stop=\"showConfigModal(item)\">{{ t('btn_config') }}</a>\r\n            </template>\r\n            <template v-if=\"item.has_update\">\r\n              <a-divider type=\"vertical\"/>\r\n              <a @click.stop=\"update(item)\">{{ t('btn_update') }}</a>\r\n            </template>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <EmptyBox v-else :title=\"t('title_no_plugins_installed')\">\r\n      <template #desc>\r\n        <div>{{ t('msg_more_features_prefix') }} <a @click=\"emit('tabChange', 3)\">{{ t('title_explore_plugin_marketplace') }}</a>{{ t('msg_more_features_suffix') }}</div>\r\n        <div class=\"text-center mt24\">\r\n          <a-button class=\"btn\" type=\"primary\" @click=\"emit('tabChange', 3)\">{{ t('btn_go_add') }}</a-button>\r\n        </div>\r\n      </template>\r\n    </EmptyBox>\r\n\r\n    <UpdateModal ref=\"updateRef\" @ok=\"loadData\"/>\r\n    <FeishuConfigBox ref=\"feishuRef\"/>\r\n    <OfficialArticleConfig ref=\"officialArtRef\"/>\r\n    <ConfigBox ref=\"configRef\"/>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport {onMounted, ref, watch, h, computed} from 'vue';\r\nimport {useRouter} from 'vue-router';\r\nimport {message, Modal} from 'ant-design-vue';\r\nimport EmptyBox from \"@/components/common/empty-box.vue\";\r\nimport UpdateModal from \"./update-modal.vue\";\r\nimport LoadingBox from \"@/components/common/loading-box.vue\";\r\nimport {closePlugin, getInstallPlugins, getPluginConfig, openPlugin, uninstallPlugin, triggerSwitch, triggerConfigList} from \"@/api/plugins/index.js\";\r\nimport {jsonDecode} from \"@/utils/index.js\";\r\nimport FeishuConfigBox from \"@/views/explore/plugins/components/feishu-config-box.vue\";\r\nimport ConfigBox from \"@/views/explore/plugins/components/config-box.vue\";\r\nimport OfficialArticleConfig from \"@/views/explore/plugins/components/official-article-config.vue\";\r\nimport { useI18n } from '@/hooks/web/useI18n';\r\n\r\nconst { t } = useI18n('views.explore.plugins.components.installPlugins')\r\nconst emit = defineEmits(['installReport', 'tabChange'])\r\nconst props = defineProps({\r\n  filterData: {\r\n    type: Object,\r\n    default: null\r\n  }\r\n})\r\nconst router = useRouter()\r\n\r\nconst updateRef = ref(null)\r\nconst feishuRef = ref(null)\r\nconst officialArtRef = ref(null)\r\nconst configRef = ref(null)\r\nconst loading = ref(true)\r\nconst list = ref([])\r\nconst showConfigPlugins = [\r\n  'feishu_bitable',\r\n  'official_account_profile',\r\n  'official_batch_tag',\r\n  'official_send_template_message',\r\n  'official_send_message',\r\n  'official_intelligent_api',\r\n  'official_account_batch_send',\r\n  'official_account_comment',\r\n  'official_article',\r\n]\r\n\r\nonMounted(() => {\r\n  loadData()\r\n})\r\n\r\n// 获取 tooltip 标题\r\nfunction getTooltipTitle(text, record) {\r\n  if (!text) return null\r\n  const canvas = document.createElement('canvas')\r\n  const context = canvas.getContext('2d')\r\n  context.font = '14px -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif'\r\n  const textWidth = context.measureText(text).width\r\n  const maxWidth = record?.title_width || 120\r\n  return textWidth > maxWidth ? text : null\r\n}\r\n\r\n// watch(() => props.filterData, () => {\r\n//   loadData()\r\n// }, {\r\n//   immediate: true,\r\n//   deep: true\r\n// })\r\n\r\nfunction search() {\r\n  list.value = []\r\n  loadData()\r\n}\r\n\r\nconst triggerList = ref([])\r\n\r\nconst allList = computed(()=>{\r\n  if(props.filterData.filter_type == 0 || props.filterData.filter_type == 5){\r\n    return [...triggerList.value, ...list.value]\r\n  }\r\n\r\n  return list.value\r\n})\r\n\r\n\r\nfunction loadData() {\r\n  triggerConfigList(props.filterData).then(res=>{\r\n    let _list = res?.data || []\r\n    _list = _list.map(item => {\r\n      return {\r\n        ...item.remote,\r\n        local: item.local,\r\n        has_update: item.remote?.latest_version != item.local?.version,\r\n        installing: false\r\n      }\r\n    })\r\n    triggerList.value = _list\r\n  })\r\n  loading.value = true\r\n  getInstallPlugins(props.filterData).then(res => {\r\n    let _list = res?.data || []\r\n    emit('installReport', _list.length)\r\n    _list = _list.map(item => {\r\n      return {\r\n        ...item.remote,\r\n        local: item.local,\r\n        has_update: item.remote?.latest_version != item.local?.version,\r\n        installing: false\r\n      }\r\n    })\r\n    list.value = _list\r\n  }).finally(() => {\r\n    loading.value = false\r\n  })\r\n}\r\n\r\nasync function openChange(item) {\r\n  const cancel = () => item.local.has_loaded = !item.local.has_loaded\r\n  if (!item.local.has_loaded) {\r\n    Modal.confirm({\r\n      title: t('title_confirm_close_plugin'),\r\n      content: t('msg_close_plugin_warning'),\r\n      okText: t('btn_confirm'),\r\n      cancelText: t('btn_cancel'),\r\n      onOk: () => {\r\n        if(item.local.type == 'trigger'){\r\n          triggerSwitch({\r\n            id: item.trigger_config_id,\r\n            switch_status: 0\r\n          }).then(() => {\r\n            message.success(t('msg_closed'))\r\n          }).catch(cancel)\r\n        }else{\r\n          closePlugin({name: item.name}).then(() => {\r\n            message.success(t('msg_closed'))\r\n          }).catch(cancel)\r\n        }\r\n      },\r\n      onCancel(){\r\n        cancel()\r\n      }\r\n    })\r\n  } else {\r\n    if(item.local.type == 'trigger'){\r\n      triggerSwitch({\r\n        id: item.trigger_config_id,\r\n        switch_status: 1\r\n      }).then(()=>{\r\n        message.success(t('msg_opened'))\r\n      })\r\n      return\r\n    }\r\n    if (item.name == 'feishu_bitable') {\r\n      let {data} = await getPluginConfig({name: item.name})\r\n      data = jsonDecode(data, {})\r\n      if (!Object.keys(data).length) {\r\n        cancel()\r\n        return Modal.confirm({\r\n          title: t('title_authorize_feishu'),\r\n          content: h('div', {style:{color:' red'}}, t('msg_complete_config_first')),\r\n          okText: t('btn_confirm'),\r\n          cancelText: t('btn_cancel'),\r\n          onOk: () => {\r\n            showFeishuConfig(item)\r\n          },\r\n        })\r\n      }\r\n    }\r\n    openPlugin({name: item.name}).then(() => {\r\n      message.success(t('msg_opened'))\r\n    }).catch(cancel)\r\n  }\r\n}\r\n\r\nfunction showFeishuConfig(item) {\r\n  feishuRef.value.show(item)\r\n}\r\n\r\nfunction delPlugin(item) {\r\n  Modal.confirm({\r\n    title: t('title_confirm_delete_plugin'),\r\n    content: t('msg_delete_plugin_warning'),\r\n    okText: t('btn_confirm'),\r\n    cancelText: t('btn_cancel'),\r\n    onOk: () => {\r\n      uninstallPlugin({name: item.name}).then(() => {\r\n        message.success(t('msg_deleted'))\r\n        loadData()\r\n      })\r\n    }\r\n  })\r\n}\r\n\r\nfunction linkDetail(item) {\r\n  if(item.local.type == 'trigger'){\r\n    return\r\n  }\r\n  router.push({\r\n    path: '/plugins/detail',\r\n    query: {\r\n      name: item.name\r\n    }\r\n  })\r\n}\r\n\r\nfunction showConfigModal(item) {\r\n  if (item.name === 'feishu_bitable') {\r\n    showFeishuConfig(item)\r\n  } else if(item.name === 'official_article') {\r\n    officialArtRef.value.show(item)\r\n  } else {\r\n    configRef.value.show(item)\r\n  }\r\n}\r\n\r\nfunction update(item) {\r\n  updateRef.value.show(item, item.latest_version_detail, item.local)\r\n}\r\n\r\nfunction setDescRef(el, item) {\r\n  if (el && item) {\r\n    item.title_width = el.offsetWidth\r\n  }\r\n}\r\n\r\ndefineExpose({\r\n  search,\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n@import \"plugins\";\r\n\r\n.tag {\r\n  padding: 1px 8px;\r\n  border-radius: 6px;\r\n  border: 1px solid #FB363F;\r\n  color: #fb363f;\r\n  font-size: 12px;\r\n  font-weight: 400;\r\n}\r\n\r\n.text-center {\r\n  text-align: center;\r\n}\r\n\r\n.mt24 {\r\n  margin-top: 24px;\r\n}\r\n\r\n.c595959 {\r\n  color: #595959;\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"_container\">\r\n    <div class=\"header\">\r\n      <div class=\"main-tab-box\">\r\n        <MainTab ref=\"tabRef\" @change=\"tabChange\"/>\r\n      </div>\r\n    </div>\r\n    <div class=\"content\">\r\n      <div class=\"filter-box\">\r\n        <div class=\"radio-tabs\">\r\n          <div @click=\"filterTypeChange(0)\" :class=\"['radio-tab', {active: filterData.filter_type == 0 }]\">\r\n            <svg-icon name=\"icon-all\"/>\r\n            <span>{{ t('label_all') }}</span>\r\n          </div>\r\n          <div v-for=\"type in types\"\r\n               @click=\"filterTypeChange(type.id)\"\r\n               :key=\"type.id\"\r\n               :class=\"['radio-tab', {active: type.id == filterData.filter_type }]\"\r\n          >\r\n            <img class=\"icon\" :src=\"type.id == filterData.filter_type ? type.icon_active_path : type.icon_path\">\r\n            <span>{{ type.type_title }}</span>\r\n          </div>\r\n        </div>\r\n        <a-input\r\n          v-model:value.trim=\"filterData.title\"\r\n          @change=\"filterDataChange\"\r\n          style=\"width: 360px;\"\r\n          allowClear\r\n          :placeholder=\"t('ph_search_plugin')\">\r\n          <template #suffix>\r\n            <SearchOutlined/>\r\n          </template>\r\n        </a-input>\r\n      </div>\r\n\r\n      <PublicNetworkCheck v-if=\"!isPublicNetwork\"/>\r\n      <RemotePlugins v-else-if=\"active == 3\" @installReport=\"updateTab\" :filterData=\"filterData\" ref=\"pluginRef\"/>\r\n      <InstallPlugins v-else @tabChange=\"showRemote\" @installReport=\"updateTab\" :filterData=\"filterData\" ref=\"pluginRef\"/>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted , ref, reactive} from 'vue';\r\nimport {useRoute} from 'vue-router'\r\nimport {SearchOutlined} from '@ant-design/icons-vue';\r\nimport RemotePlugins from \"./components/remotePlugins.vue\";\r\nimport InstallPlugins from \"./components/installPlugins.vue\";\r\nimport MainTab from \"@/views/explore/components/main-tab.vue\";\r\nimport {getPluginTypes} from \"@/api/plugins/index.js\";\r\nimport {usePublicNetworkCheck} from \"@/composables/usePublicNetworkCheck.js\";\r\nimport PublicNetworkCheck from \"@/components/common/public-network-check.vue\";\r\nimport { useI18n } from '@/hooks/web/useI18n';\r\n\r\nconst { t } = useI18n('views.explore.plugins.index')\r\nconst {isPublicNetwork} = usePublicNetworkCheck()\r\nconst route = useRoute()\r\nconst tabRef = ref(null)\r\nconst pluginRef = ref(null)\r\nconst active = ref(localStorage.getItem('zm:explore:active') || '2')\r\nconst types = ref([])\r\nconst filterData = reactive({\r\n  title: '',\r\n  filter_type: 0\r\n})\r\n\r\nonMounted(() => {\r\n  if (route.query.active > 1) {\r\n    tabRef.value.change(route.query.active)\r\n  }\r\n  loadTypes()\r\n})\r\n\r\nfunction loadTypes() {\r\n  getPluginTypes().then(res => {\r\n    types.value = res?.data || []\r\n  })\r\n}\r\n\r\nfunction filterDataChange() {\r\n  pluginRef.value.search()\r\n}\r\n\r\nfunction filterTypeChange(key) {\r\n  filterData.filter_type = key\r\n  filterDataChange()\r\n}\r\n\r\nfunction tabChange(val){\r\n  if (val > 1) active.value = val\r\n}\r\n\r\nfunction showRemote(val) {\r\n  tabRef.value.change(val)\r\n}\r\n\r\nfunction updateTab() {\r\n  tabRef.value.update()\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n._container {\r\n  height: 100%;\r\n  padding: 16px 24px 0 0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n}\r\n.header {\r\n  .main-tab-box {\r\n    display: flex;\r\n  }\r\n  .tabs-box {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n\r\n    .tab-item {\r\n      padding: 5px 16px;\r\n      border-radius: 6px;\r\n      background: #EDEFF2;\r\n      color: #595959;\r\n      font-size: 14px;\r\n      font-weight: 400;\r\n      cursor: pointer;\r\n\r\n      &.active {\r\n        color: #2475fc;\r\n        background: #D6E6FF;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.content {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n\r\n  .filter-box {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    gap: 16px;\r\n    margin: 10px 0 16px;\r\n\r\n    .radio-tabs {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 8px;\r\n\r\n      .radio-tab {\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 4px;\r\n        font-size: 14px;\r\n        font-weight: 400;\r\n        padding: 4px 16px;\r\n        border-radius: 6px;\r\n        cursor: pointer;\r\n        &.active,\r\n        &:hover {\r\n          color: #2475FC;\r\n          background: #D6E6FF;\r\n        }\r\n\r\n        .icon {\r\n          width: 16px;\r\n          height: 16px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"],"names":["t","useI18n","emit","__emit","props","__props","router","useRouter","updateRef","ref","loading","list","localMap","onMounted","loadData","search","loadInstalls","getRemotePlugins","res","_list","item","local","has_update","_a","getInstallPlugins","map","linkDetail","install","__expose","_openBlock","_createElementBlock","_hoisted_1","_createBlock","LoadingBox","_hoisted_2","_Fragment","_renderList","$event","_createElementVNode","_hoisted_4","_toDisplayString","_hoisted_5","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_createVNode","_component_a_tooltip","_unref","getTooltipTitle","el","_hoisted_11","_hoisted_12","_hoisted_13","_component_svg_icon","_hoisted_14","_hoisted_15","_component_a_divider","_withModifiers","_hoisted_16","_hoisted_18","EmptyBox","UpdateModal","configModalRef","open","detail","configData","actionData","configLen","computed","show","info","loadConfig","loadAction","hide","getPluginConfig","jsonDecode","runPlugin","_data","key","showAddModal","setConfigDef","_key","setPluginConfig","delConfig","Modal","message","_component_a_drawer","_hoisted_6","CloseOutlined","_component_a_popover","_imports_0","_component_a_tag","_component_a_button","h","PlusOutlined","_createTextVNode","_hoisted_19","i","_hoisted_20","_hoisted_21","_hoisted_22","field","j","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_imports_1","_hoisted_17","FeishuConfigModal","schemaData","setActionBySchema","onAuth","schema","PluginConfigModal","pluginConfigRef","v","_renderSlot","_ctx","PluginConfigBox","loginInfo","loginStatus","loginUrl","refresh","goLogin","init","useOfficialArticleLogin","configRef","ConfigBox","dayjs","feishuRef","officialArtRef","showConfigPlugins","text","record","context","textWidth","maxWidth","triggerList","allList","triggerConfigList","_b","openChange","cancel","triggerSwitch","closePlugin","data","showFeishuConfig","openPlugin","delPlugin","uninstallPlugin","showConfigModal","update","setDescRef","_component_a_switch","FeishuConfigBox","OfficialArticleConfig","isPublicNetwork","usePublicNetworkCheck","route","useRoute","tabRef","pluginRef","active","types","filterData","reactive","loadTypes","getPluginTypes","filterDataChange","filterTypeChange","tabChange","val","showRemote","updateTab","_hoisted_3","MainTab","_normalizeClass","type","_component_a_input","_cache","SearchOutlined","RemotePlugins","InstallPlugins","PublicNetworkCheck"],"mappings":"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"}