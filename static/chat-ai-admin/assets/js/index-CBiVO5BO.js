import{_ as v,d as h,bP as q}from"../../index-CB2DywzJ.js";import{aw as k,e as x,f as D,aA as m,ac as b,ad as d,k as l,ar as f,F as w,ax as B,ae as y,u as E,G as $,at as I,l as _,d as A,as as n}from"./vue-chunks-CGLjTDrY.js";import{i as L,h as R,af as K}from"./ui-antd-BHaxN-GS.js";import{u as N}from"./database-D6E_MwAz.js";import{_ as O,A as V}from"./add-data-sheet-DBVwIfVU.js";import"./neo4j-CSfpjqgw.js";import"./utils-pAinW4BS.js";import"./other-BrZCAsTs.js";import"./index-D_MN-GJN.js";const F={class:"left-menu-box"},P={__name:"left-menus",emits:["changeMenu"],setup(e,{emit:s}){const a=s,t=k(),r=t.query,o=x(()=>[t.path.split("/")[3]]),u=D([{key:"field-manage",id:"field-manage",icon:()=>_("span",{},[_(h,{name:"field-menu-icon",class:"menu-icon"})]),label:"字段管理",title:"字段管理",path:"/database/details/field-manage"},{key:"database-manage",id:"database-manage",icon:()=>_("span",{},[_(h,{name:"database-menu-icon",class:"menu-icon"})]),label:"数据管理",title:"数据管理",path:"/database/details/database-manage"}]),p=({item:i})=>{o.value.includes(i.id)||a("changeMenu",i)};return(i,g)=>{const S=L,C=m("router-link"),M=R;return d(),b("div",F,[l(M,{class:"left-menu",selectedKeys:o.value,onClick:p},{default:f(()=>[(d(!0),b(w,null,B(u.value,c=>(d(),y(C,{class:"default-color",to:{path:c.path,query:E(r)},key:c.key},{default:f(()=>[(d(),y(S,{icon:c.icon,path:c.path,key:c.key},{default:f(()=>[$(I(c.label),1)]),_:2},1032,["icon","path"]))]),_:2},1032,["to"]))),128))]),_:1},8,["selectedKeys"])])}}},G=v(P,[["__scopeId","data-v-e3489ea4"]]),T=A({components:{LeftMenus:G,AddDataSheet:V,EditOutlined:K},async beforeRouteEnter(e,s,a){let t=q(e.query.form_id);if(t==0||t==1){a("/no-permission");return}a()},setup(){const e=N(),a=k().query,t=x(()=>e.databaseInfo),r=()=>{e.getDatabaseInfo({id:a.form_id})};r();const o=D(null);return{dataBaseInfo:t,getInfo:r,toEdit:()=>{o.value.show({...e.databaseInfo})},addDataSheetRef:o}}}),j={class:"details-library-page"},z={class:"between-content-box"},H={class:"layout-left"},J={class:"library-name-box"},Q={class:"name"},U={class:"left-menu-box"},W={class:"right-content-box"};function X(e,s,a,t,r,o){const u=h,p=m("LeftMenus"),i=m("router-view"),g=m("AddDataSheet");return d(),b("div",j,[n("div",z,[n("div",H,[n("div",J,[s[0]||(s[0]=n("img",{class:"avatar",src:O,alt:""},null,-1)),n("div",Q,I(e.dataBaseInfo.name),1),l(u,{onClick:e.toEdit,name:"edit"},null,8,["onClick"])]),n("div",U,[l(p)])]),n("div",W,[l(i)])]),l(g,{onOk:e.getInfo,ref:"addDataSheetRef"},null,8,["onOk"])])}const re=v(T,[["render",X],["__scopeId","data-v-5c3af201"]]);export{re as default};
