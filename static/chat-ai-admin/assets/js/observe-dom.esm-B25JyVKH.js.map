{"version":3,"file":"observe-dom.esm-B25JyVKH.js","sources":["../../../../front-end/chat-ai-admin-vue/node_modules/@better-scroll/observe-dom/dist/observe-dom.esm.js"],"sourcesContent":["/*!\n * better-scroll / observe-dom\n * (c) 2016-2023 ustbhuangyi\n * Released under the MIT License.\n */\n// ssr support\r\nvar inBrowser = typeof window !== 'undefined';\r\nvar ua = inBrowser && navigator.userAgent.toLowerCase();\r\n!!(ua && /wechatdevtools/.test(ua));\r\nua && ua.indexOf('android') > 0;\r\n/* istanbul ignore next */\r\n((function () {\r\n    if (typeof ua === 'string') {\r\n        var regex = /os (\\d\\d?_\\d(_\\d)?)/;\r\n        var matches = regex.exec(ua);\r\n        if (!matches)\r\n            return false;\r\n        var parts = matches[1].split('_').map(function (item) {\r\n            return parseInt(item, 10);\r\n        });\r\n        // ios version >= 13.4 issue 982\r\n        return !!(parts[0] === 13 && parts[1] >= 4);\r\n    }\r\n    return false;\r\n}))();\r\n/* istanbul ignore next */\r\nvar supportsPassive = false;\r\n/* istanbul ignore next */\r\nif (inBrowser) {\r\n    var EventName = 'test-passive';\r\n    try {\r\n        var opts = {};\r\n        Object.defineProperty(opts, 'passive', {\r\n            get: function () {\r\n                supportsPassive = true;\r\n            },\r\n        }); // https://github.com/facebook/flow/issues/285\r\n        window.addEventListener(EventName, function () { }, opts);\r\n    }\r\n    catch (e) { }\r\n}\n\nvar elementStyle = (inBrowser &&\r\n    document.createElement('div').style);\r\nvar vendor = (function () {\r\n    /* istanbul ignore if  */\r\n    if (!inBrowser) {\r\n        return false;\r\n    }\r\n    var transformNames = [\r\n        {\r\n            key: 'standard',\r\n            value: 'transform',\r\n        },\r\n        {\r\n            key: 'webkit',\r\n            value: 'webkitTransform',\r\n        },\r\n        {\r\n            key: 'Moz',\r\n            value: 'MozTransform',\r\n        },\r\n        {\r\n            key: 'O',\r\n            value: 'OTransform',\r\n        },\r\n        {\r\n            key: 'ms',\r\n            value: 'msTransform',\r\n        },\r\n    ];\r\n    for (var _i = 0, transformNames_1 = transformNames; _i < transformNames_1.length; _i++) {\r\n        var obj = transformNames_1[_i];\r\n        if (elementStyle[obj.value] !== undefined) {\r\n            return obj.key;\r\n        }\r\n    }\r\n    /* istanbul ignore next  */\r\n    return false;\r\n})();\r\n/* istanbul ignore next  */\r\nfunction prefixStyle(style) {\r\n    if (vendor === false) {\r\n        return style;\r\n    }\r\n    if (vendor === 'standard') {\r\n        if (style === 'transitionEnd') {\r\n            return 'transitionend';\r\n        }\r\n        return style;\r\n    }\r\n    return vendor + style.charAt(0).toUpperCase() + style.substr(1);\r\n}\r\nvendor && vendor !== 'standard' ? '-' + vendor.toLowerCase() + '-' : '';\r\nvar transform = prefixStyle('transform');\r\nvar transition = prefixStyle('transition');\r\ninBrowser && prefixStyle('perspective') in elementStyle;\r\n({\r\n    transform: transform,\r\n    transition: transition,\r\n    transitionTimingFunction: prefixStyle('transitionTimingFunction'),\r\n    transitionDuration: prefixStyle('transitionDuration'),\r\n    transitionDelay: prefixStyle('transitionDelay'),\r\n    transformOrigin: prefixStyle('transformOrigin'),\r\n    transitionEnd: prefixStyle('transitionEnd'),\r\n    transitionProperty: prefixStyle('transitionProperty'),\r\n});\r\nfunction getRect(el) {\r\n    /* istanbul ignore if  */\r\n    if (el instanceof window.SVGElement) {\r\n        var rect = el.getBoundingClientRect();\r\n        return {\r\n            top: rect.top,\r\n            left: rect.left,\r\n            width: rect.width,\r\n            height: rect.height,\r\n        };\r\n    }\r\n    else {\r\n        return {\r\n            top: el.offsetTop,\r\n            left: el.offsetLeft,\r\n            width: el.offsetWidth,\r\n            height: el.offsetHeight,\r\n        };\r\n    }\r\n}\n\nvar ObserveDOM = /** @class */ (function () {\r\n    function ObserveDOM(scroll) {\r\n        this.scroll = scroll;\r\n        this.stopObserver = false;\r\n        this.init();\r\n    }\r\n    ObserveDOM.prototype.init = function () {\r\n        this.handleMutationObserver();\r\n        this.handleHooks();\r\n    };\r\n    ObserveDOM.prototype.handleMutationObserver = function () {\r\n        var _this = this;\r\n        if (typeof MutationObserver !== 'undefined') {\r\n            var timer_1 = 0;\r\n            this.observer = new MutationObserver(function (mutations) {\r\n                _this.mutationObserverHandler(mutations, timer_1);\r\n            });\r\n            this.startObserve(this.observer);\r\n        }\r\n        else {\r\n            this.checkDOMUpdate();\r\n        }\r\n    };\r\n    ObserveDOM.prototype.handleHooks = function () {\r\n        var _this = this;\r\n        this.hooksFn = [];\r\n        this.registerHooks(this.scroll.hooks, this.scroll.hooks.eventTypes.contentChanged, function () {\r\n            _this.stopObserve();\r\n            // launch a new mutationObserver\r\n            _this.handleMutationObserver();\r\n        });\r\n        this.registerHooks(this.scroll.hooks, this.scroll.hooks.eventTypes.enable, function () {\r\n            if (_this.stopObserver) {\r\n                _this.handleMutationObserver();\r\n            }\r\n        });\r\n        this.registerHooks(this.scroll.hooks, this.scroll.hooks.eventTypes.disable, function () {\r\n            _this.stopObserve();\r\n        });\r\n        this.registerHooks(this.scroll.hooks, this.scroll.hooks.eventTypes.destroy, function () {\r\n            _this.destroy();\r\n        });\r\n    };\r\n    ObserveDOM.prototype.mutationObserverHandler = function (mutations, timer) {\r\n        var _this = this;\r\n        if (this.shouldNotRefresh()) {\r\n            return;\r\n        }\r\n        var immediateRefresh = false;\r\n        var deferredRefresh = false;\r\n        for (var i = 0; i < mutations.length; i++) {\r\n            var mutation = mutations[i];\r\n            if (mutation.type !== 'attributes') {\r\n                immediateRefresh = true;\r\n                break;\r\n            }\r\n            else {\r\n                if (mutation.target !== this.scroll.scroller.content) {\r\n                    deferredRefresh = true;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if (immediateRefresh) {\r\n            this.scroll.refresh();\r\n        }\r\n        else if (deferredRefresh) {\r\n            // attributes changes too often\r\n            clearTimeout(timer);\r\n            timer = window.setTimeout(function () {\r\n                if (!_this.shouldNotRefresh()) {\r\n                    _this.scroll.refresh();\r\n                }\r\n            }, 60);\r\n        }\r\n    };\r\n    ObserveDOM.prototype.startObserve = function (observer) {\r\n        var config = {\r\n            attributes: true,\r\n            childList: true,\r\n            subtree: true,\r\n        };\r\n        observer.observe(this.scroll.scroller.content, config);\r\n    };\r\n    ObserveDOM.prototype.shouldNotRefresh = function () {\r\n        var scroller = this.scroll.scroller;\r\n        var scrollBehaviorX = scroller.scrollBehaviorX, scrollBehaviorY = scroller.scrollBehaviorY;\r\n        var outsideBoundaries = scrollBehaviorX.currentPos > scrollBehaviorX.minScrollPos ||\r\n            scrollBehaviorX.currentPos < scrollBehaviorX.maxScrollPos ||\r\n            scrollBehaviorY.currentPos > scrollBehaviorY.minScrollPos ||\r\n            scrollBehaviorY.currentPos < scrollBehaviorY.maxScrollPos;\r\n        return scroller.animater.pending || outsideBoundaries;\r\n    };\r\n    ObserveDOM.prototype.checkDOMUpdate = function () {\r\n        var _this = this;\r\n        var content = this.scroll.scroller.content;\r\n        var contentRect = getRect(content);\r\n        var oldWidth = contentRect.width;\r\n        var oldHeight = contentRect.height;\r\n        var check = function () {\r\n            if (_this.stopObserver) {\r\n                return;\r\n            }\r\n            contentRect = getRect(content);\r\n            var newWidth = contentRect.width;\r\n            var newHeight = contentRect.height;\r\n            if (oldWidth !== newWidth || oldHeight !== newHeight) {\r\n                _this.scroll.refresh();\r\n            }\r\n            oldWidth = newWidth;\r\n            oldHeight = newHeight;\r\n            next();\r\n        };\r\n        var next = function () {\r\n            setTimeout(function () {\r\n                check();\r\n            }, 1000);\r\n        };\r\n        next();\r\n    };\r\n    ObserveDOM.prototype.registerHooks = function (hooks, name, handler) {\r\n        hooks.on(name, handler, this);\r\n        this.hooksFn.push([hooks, name, handler]);\r\n    };\r\n    ObserveDOM.prototype.stopObserve = function () {\r\n        this.stopObserver = true;\r\n        if (this.observer) {\r\n            this.observer.disconnect();\r\n        }\r\n    };\r\n    ObserveDOM.prototype.destroy = function () {\r\n        this.stopObserve();\r\n        this.hooksFn.forEach(function (item) {\r\n            var hooks = item[0];\r\n            var hooksName = item[1];\r\n            var handlerFn = item[2];\r\n            hooks.off(hooksName, handlerFn);\r\n        });\r\n        this.hooksFn.length = 0;\r\n    };\r\n    ObserveDOM.pluginName = 'observeDOM';\r\n    return ObserveDOM;\r\n}());\n\nexport { ObserveDOM as default };\n"],"names":["inBrowser","ua","regex","matches","parts","item","supportsPassive","EventName","opts","elementStyle","vendor","transformNames","_i","transformNames_1","obj","prefixStyle","style","getRect","el","rect","ObserveDOM","scroll","_this","timer_1","mutations","timer","immediateRefresh","deferredRefresh","i","mutation","observer","config","scroller","scrollBehaviorX","scrollBehaviorY","outsideBoundaries","content","contentRect","oldWidth","oldHeight","check","newWidth","newHeight","next","hooks","name","handler","hooksName","handlerFn"],"mappings":"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","x_google_ignoreList":[0]}