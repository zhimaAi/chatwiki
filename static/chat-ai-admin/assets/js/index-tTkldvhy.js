import{u as O,bY as T,aw as L,aY as U}from"../../index-DSFcP5NQ.js";import{c as q,ah as D,r as g,E,j as J,a as R,y as t,p as h,t as s,b as c,e as v,q as k,_ as i,v as n,u as l,a1 as j}from"./vue-chunks-BdaA73Wf.js";import{C as F}from"./config-page-menu-BJkqU_Ap.js";import{M as w}from"./model-select-CMPvMrAQ.js";import{_ as P}from"./emoji-mart-BBMRoEa3.js";import{F as Y,c as $,H as G,q as H,al as N,B as X,M as z,b as A}from"./ui-antd-Dl1wwwCD.js";import"./neo4j-MWxXN7EM.js";import"./editor-cherry-CFIsbKoN.js";import"./lodash-Bm5sK6rN.js";import"./elkjs-BN8GIjVH.js";import"./utils-CvB22N-W.js";import"./other-LrIFyvU9.js";import"./index-MT9fcN3v.js";const K={class:"ai-config-page"},Q={class:"page-container"},W={class:"ai-config-form"},Z={__name:"index",setup(ee){const{t:a}=O("views.public-library.ai.index"),I=T(),S=D(),x=q(()=>S.query.library_id),p=g(),_=g(!1);let u={};const e=E({library_name:"",library_intro:"",ai_summary:"",ai_summary_model:"",access_rights:"",model_config_id:"",use_model:"",use_model_switch:"",statistics_set:"",summary_model_config_id:""}),C=async()=>{try{await p.value.validate(),u.use_model!=e.use_model?z.confirm({title:a("confirm_switch_model",{model:e.use_model}),content:a("switch_model_warning"),okText:a("confirm"),cancelText:a("cancel"),onOk(){f()}}):f()}catch(d){console.error(a("form_validation_failed"),d)}},f=()=>{let d={...j(e)};_.value=!0,U(d).then(()=>{A.success(a("save_success")),_.value=!1,u=JSON.parse(JSON.stringify(d)),I.getLibraryInfo()}).catch(()=>{_.value=!1})},M=()=>{L({id:x.value}).then(d=>{let o=d.data||{};o.use_model=o.use_model||void 0,o.ai_summary_model=o.ai_summary_model||void 0,u=JSON.parse(JSON.stringify(o)),Object.assign(e,o)})};return J(()=>{M()}),(d,o)=>{const y=H,b=G,r=$,V=X,B=Y;return c(),R("div",K,[t(F),h("div",Q,[h("div",W,[t(B,{ref_key:"formRef",ref:p,model:e,"label-col":{span:4},"wrapper-col":{span:8}},{default:s(()=>[t(r,null,{label:s(()=>[i(n(l(a)("embed"))+"  ",1),t(y,null,{title:s(()=>[i(n(l(a)("embed_tooltip")),1)]),default:s(()=>[t(l(N))]),_:1})]),default:s(()=>[t(b,{checked:e.use_model_switch,"onUpdate:checked":o[0]||(o[0]=m=>e.use_model_switch=m),unCheckedValue:"0",checkedValue:"1"},null,8,["checked"])]),_:1}),e.use_model_switch==1?(c(),v(r,{key:0,label:l(a)("embed_model"),name:"use_model",rules:[{required:!0,message:l(a)("select_embed_model")}]},{default:s(()=>[t(w,{modelType:"TEXT EMBEDDING",placeholder:l(a)("select_embed_model"),modeName:e.use_model,"onUpdate:modeName":o[1]||(o[1]=m=>e.use_model=m),modeId:e.model_config_id,"onUpdate:modeId":o[2]||(o[2]=m=>e.model_config_id=m)},null,8,["placeholder","modeName","modeId"])]),_:1},8,["label","rules"])):k("",!0),t(r,null,{label:s(()=>[i(n(l(a)("ai_summary"))+"  ",1),t(y,null,{title:s(()=>[i(n(l(a)("ai_summary_tooltip")),1)]),default:s(()=>[t(l(N))]),_:1})]),default:s(()=>[t(b,{checked:e.ai_summary,"onUpdate:checked":o[3]||(o[3]=m=>e.ai_summary=m),unCheckedValue:"0",checkedValue:"1"},null,8,["checked"])]),_:1}),e.ai_summary==1?(c(),v(r,{key:1,label:l(a)("summary_model"),name:"ai_summary_model",rules:[{required:!0,message:l(a)("select_summary_model")}]},{default:s(()=>[t(w,{modelType:"LLM",modeName:e.ai_summary_model,"onUpdate:modeName":o[4]||(o[4]=m=>e.ai_summary_model=m),modeId:e.summary_model_config_id,"onUpdate:modeId":o[5]||(o[5]=m=>e.summary_model_config_id=m)},null,8,["modeName","modeId"])]),_:1},8,["label","rules"])):k("",!0),t(r,{"wrapper-col":{offset:4,span:8}},{default:s(()=>[t(V,{type:"primary",loading:_.value,onClick:C},{default:s(()=>[i(n(l(a)("save")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])])])}}},pe=P(Z,[["__scopeId","data-v-b9228e7a"]]);export{pe as default};
//# sourceMappingURL=index-tTkldvhy.js.map
