import{e as V,a as P}from"./index-H0fxFesA.js";import{a4 as U,e as _,B as u,M as A,N as D,k as o,S as l,V as f,u as m,a1 as H,a2 as O,W as Z}from"./vue-chunks-DWnFCQSz.js";import{b as q,k as z,M as E}from"../../index-UhR4yadr.js";import{F as h,_ as G}from"./index-DzuDS3Yk.js";import"./index--Qvpscnx.js";import{I as N}from"./Input-D7W5TJDt.js";import{_ as R}from"./TextArea-CpTIlaWe.js";const a0="data:image/svg+xml,%3csvg%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2062%2062'%20class='design-iconfont'%3e%3cpath%20d='M0%2014.5882C0%206.53137%206.53137%200%2014.5882%200H47.4118C55.4686%200%2062%206.53137%2062%2014.5882V47.4118C62%2055.4686%2055.4686%2062%2047.4118%2062H14.5882C6.53137%2062%200%2055.4686%200%2047.4118V14.5882Z'%20fill='%234876FF'/%3e%3cg%20clip-path='url(%23yi8ty4pxs__clip0_7802_38770)'%20filter='url(%23yi8ty4pxs__filter0_d_7802_38770)'%3e%3cpath%20d='M30.4027%2033.1084C30.7927%2032.9941%2031.2073%2032.9941%2031.5973%2033.1084L46.079%2037.35C48.1159%2037.9466%2048.1159%2040.832%2046.079%2041.4286L31.5973%2045.6702C31.2073%2045.7844%2030.7927%2045.7844%2030.4027%2045.6702L15.921%2041.4286C13.8841%2040.832%2013.8841%2037.9466%2015.921%2037.35L30.4027%2033.1084Z'%20fill='%23C2D1FF'/%3e%3cpath%20d='M30.4027%2024.4677C30.7927%2024.3535%2031.2073%2024.3535%2031.5973%2024.4677L46.079%2028.7093C48.1159%2029.3059%2048.1159%2032.1914%2046.079%2032.788L31.5973%2037.0296C31.2073%2037.1438%2030.7927%2037.1438%2030.4027%2037.0296L15.921%2032.788C13.8841%2032.1914%2013.8841%2029.3059%2015.921%2028.7093L30.4027%2024.4677Z'%20fill='%23D6E0FF'/%3e%3cpath%20d='M30.4027%2016.3271C30.7927%2016.2129%2031.2073%2016.2129%2031.5973%2016.3271L46.079%2020.5687C48.1159%2021.1653%2048.1159%2024.0508%2046.079%2024.6474L31.5973%2028.889C31.2073%2029.0032%2030.7927%2029.0032%2030.4027%2028.889L15.921%2024.6474C13.8841%2024.0508%2013.8841%2021.1653%2015.921%2020.5687L30.4027%2016.3271Z'%20fill='%23EBF0FF'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='yi8ty4pxs__clip0_7802_38770'%3e%3cpath%20fill='%23fff'%20transform='translate(14%2014)'%20d='M0%200H34V34H0z'/%3e%3c/clipPath%3e%3cfilter%20id='yi8ty4pxs__filter0_d_7802_38770'%20x='9.75'%20y='14'%20width='42.5'%20height='42.5'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeColorMatrix%20in='SourceAlpha'%20values='0%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%20127%200'%20result='hardAlpha'/%3e%3cfeOffset%20dy='4.25'/%3e%3cfeGaussianBlur%20stdDeviation='2.125'/%3e%3cfeColorMatrix%20values='0%200%200%200%200.0886636%200%200%200%200%200.388241%200%200%200%200%200.413084%200%200%200%200.14%200'/%3e%3cfeBlend%20in2='BackgroundImageFix'%20result='effect1_dropShadow_7802_38770'/%3e%3cfeBlend%20in='SourceGraphic'%20in2='effect1_dropShadow_7802_38770'%20result='shape'/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e",$=i=>(H("data-v-bd2682a1"),i=i(),O(),i),j={class:"add-data-sheet"},T=$(()=>Z("div",{class:"form-tip"},"必须以英文字母开头，只能包含小写字母、数字、下划线",-1)),W={__name:"add-data-sheet",emits:["ok"],setup(i,{expose:v,emit:g}){const x=U(),C=g,r=_(!1),n=_("新建数据表"),e=u({name:"",description:"",id:""}),F=(a={})=>{r.value=!0,w(),e.name=a.name||"",e.description=a.description||"",e.id=a.id||"",n.value=a.id?"编辑数据表":"新建数据表"},y=u({name:[{required:!0,validator:async(a,t)=>/^[a-z][a-z0-9_]*$/.test(t)?Promise.resolve():Promise.reject("必须以英文字母开头，只能包含小写字母、数字、下划线")}],description:[{required:!0,message:"请输入数据表描述"}]}),L=h.useForm,{resetFields:w,validate:B,validateInfos:c}=L(e,y),k=()=>{B().then(a=>{e.id?V(e).then(()=>{d("编辑成功")}):P(e).then(t=>{d("创建成功"),x.push({path:"/database/details/field-manage",query:{form_id:t.data.id}})})})};function d(a){z.success(a),r.value=!1,C("ok")}return v({show:F}),(a,t)=>{const S=N,p=G,M=R,I=h,b=E;return A(),D("div",j,[o(b,{open:r.value,"onUpdate:open":t[2]||(t[2]=s=>r.value=s),title:n.value,onOk:k,width:540},{default:l(()=>[o(I,{layout:"vertical"},{default:l(()=>[o(p,f({label:"数据表名称"},m(c).name),{default:l(()=>[o(S,{maxLength:64,value:e.name,"onUpdate:value":t[0]||(t[0]=s=>e.name=s),placeholder:"请输入数据表名称"},null,8,["value"]),T]),_:1},16),o(p,f({label:"数据表描述"},m(c).description),{default:l(()=>[o(M,{maxLength:500,style:{height:"80px"},value:e.description,"onUpdate:value":t[1]||(t[1]=s=>e.description=s),placeholder:"请输入数据表主要用途，让大模型更加深入理解此表功能"},null,8,["value"])]),_:1},16)]),_:1})]),_:1},8,["open","title"])])}}},o0=q(W,[["__scopeId","data-v-bd2682a1"]]);export{o0 as A,a0 as _};
