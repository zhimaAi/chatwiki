{"version":3,"file":"index-DgVSA-1Y.js","sources":["../../../../front-end/chat-ai-admin-vue/src/views/user/usetoken/components/line-chart.vue","../../../../front-end/chat-ai-admin-vue/src/views/user/usetoken/statics-by-app.vue","../../../../front-end/chat-ai-admin-vue/src/views/user/usetoken/components/date.vue","../../../../front-end/chat-ai-admin-vue/src/views/user/usetoken/use-token.vue","../../../../front-end/chat-ai-admin-vue/src/views/user/usetoken/components/token-quota-modal.vue","../../../../front-end/chat-ai-admin-vue/src/views/user/usetoken/quota-token.vue","../../../../front-end/chat-ai-admin-vue/src/views/user/usetoken/index.vue"],"sourcesContent":["<template>\r\n  <div class=\"container-echart\">\r\n    <div ref=\"chartRef\" class=\"interface-echart\"></div>\r\n  </div>\r\n</template>\r\n<script setup>\r\nimport * as echarts from 'echarts'\r\nimport { ref, onMounted, watch, onBeforeUnmount, nextTick } from 'vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n// import dayjs from 'dayjs'\r\n\r\nconst { t } = useI18n('views.user.usetoken')\r\n\r\nconst props = defineProps({\r\n  options: {\r\n    // 柱形图x轴数据\r\n    type: Object,\r\n    default: () => {\r\n      return {\r\n        xAxis: [],\r\n        series: []\r\n      }\r\n    }\r\n  }\r\n})\r\n\r\nlet myEchart\r\nconst updateChat = () => {\r\n  const option = {\r\n    title: {\r\n      textStyle: {\r\n        color: '#262626',\r\n        textAlign: 'center',\r\n        fontFamily: 'PingFang SC',\r\n        fontSize: '14px',\r\n        fontStyle: 'normal',\r\n        fontWeight: '600'\r\n      }\r\n    },\r\n    legend: {\r\n      //字体对应折线标识\r\n      show: true,\r\n      bottom: '0%',\r\n      textStyle: {\r\n        color: '#262626',\r\n        fontSize: '14px'\r\n      },\r\n      data: [t('input'), t('output'), t('total')],\r\n      itemHeight: 6, //圆心\r\n      itemWidth: 6, //折线\r\n\r\n      //图标信息提示\r\n      type: 'scroll',\r\n      orient: 'horizontal',\r\n      align: 'auto',\r\n      icon: 'circle'\r\n    },\r\n    grid: {\r\n      //图表距离边框的偏离\r\n      right: '1.5%', //图表距离容器右侧距离\r\n      left: '4%',\r\n      top: '5%',\r\n      bottom: '20%'\r\n    },\r\n    tooltip: {\r\n      trigger: 'axis'\r\n    }, // 设置图案和容器的距离\r\n    xAxis: {\r\n      type: 'category',\r\n      axisTick: {\r\n        show: true,\r\n        lineStyle: {\r\n          color: '#D9D9D9' // 修改为你想要的颜色\r\n        }\r\n      },\r\n      boundaryGap: false,\r\n      //   name: '时间',\r\n      nameLocation: 'end',\r\n      data: props.options.xAxis,\r\n      axisLabel: {\r\n        show: true, // 显示坐标轴标签\r\n        fontSize: 10, // 设置标签字体大小\r\n        interval: 'auto', // 设置标签显示的间隔，为0时强制显示所有标签\r\n        rotate: 0, // 设置倾斜角度\r\n        lineHeight: 26\r\n      },\r\n      // 坐标轴轴线\r\n      axisLine: {\r\n        show: false\r\n      }\r\n    },\r\n    yAxis: {\r\n      type: 'value',\r\n      nameLocation: 'end',\r\n      min: 0\r\n    },\r\n    series: [\r\n      {\r\n        name: t('input'),\r\n        type: 'line',\r\n        showSymbol: false,\r\n        data: props.options.series.map((item) => item.prompt_token),\r\n        smooth: true, // 开启平滑过渡\r\n        color: '#2475fc'\r\n      },\r\n      {\r\n        name: t('output'),\r\n        type: 'line',\r\n        showSymbol: false,\r\n        data: props.options.series.map((item) => item.completion_token),\r\n        smooth: true, // 开启平滑过渡\r\n        color: '#646161'\r\n      },\r\n      {\r\n        name: t('total'),\r\n        type: 'line',\r\n        showSymbol: false,\r\n        data: props.options.series.map((item) => item.total_token),\r\n        smooth: true, // 开启平滑过渡\r\n        color: '#4B7900'\r\n      }\r\n    ]\r\n  }\r\n  // { notMerge: true } 解决删除数据时,数据不刷新的问题\r\n  myEchart.setOption(option, { notMerge: true })\r\n}\r\n\r\nwatch(\r\n  //监控数据变化\r\n  () => props.options,\r\n  () => {\r\n    setTimeout(() => {\r\n      updateChat()\r\n    }, 200)\r\n  },\r\n  { deep: true }\r\n)\r\n\r\nconst chatResize = () => {\r\n  myEchart.resize()\r\n}\r\n\r\nconst chartRef = ref(null)\r\n\r\nonMounted(() => {\r\n  nextTick(() => {\r\n    myEchart = echarts.init(chartRef.value)\r\n\r\n    updateChat()\r\n  })\r\n\r\n  // 当窗口发生变化时\r\n  window.addEventListener('resize', chatResize)\r\n})\r\n\r\nonBeforeUnmount(() => {\r\n  window.removeEventListener('resize', chatResize)\r\n})\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.container-echart {\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  overflow: hidden;\r\n  margin-top: 16px;\r\n}\r\n.interface-echart {\r\n  width: 100%;\r\n  height: 450px;\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"statics-content\">\r\n    <div class=\"search-box\">\r\n      <a-range-picker\r\n        v-model:value=\"dates\"\r\n        :allowClear=\"false\"\r\n        @change=\"handleDateChange\"\r\n        style=\"width: 256px\"\r\n        :presets=\"dateRangePresets\"\r\n      />\r\n      <a-cascader\r\n        style=\"width: 256px\"\r\n        changeOnSelect\r\n        @change=\"handleCascaderChange\"\r\n        v-model:value=\"cascaderValue\"\r\n        :options=\"options\"\r\n        :placeholder=\"t('views.user.usetoken.all_apps')\"\r\n      />\r\n    </div>\r\n    <div class=\"list-box\">\r\n      <div class=\"main-title\">{{ t('views.user.usetoken.usage_trend') }}</div>\r\n      <LineChart :options=\"lineChartData\" />\r\n      <div class=\"main-title\">\r\n        {{ t('views.user.usetoken.detail_data') }}\r\n        <div style=\"margin-left: auto\"><a-button @click=\"handleExport\">{{ t('views.user.usetoken.export') }}</a-button></div>\r\n      </div>\r\n      <a-table\r\n        style=\"margin-top: 16px\"\r\n        :data-source=\"tableData\"\r\n        :pagination=\"{\r\n          current: pager.page,\r\n          total: pager.total,\r\n          pageSize: pager.size,\r\n          showQuickJumper: true,\r\n          showSizeChanger: true,\r\n          pageSizeOptions: ['10', '20', '50', '100']\r\n        }\"\r\n        @change=\"onTableChange\"\r\n      >\r\n        <a-table-column :title=\"t('views.user.usetoken.type')\" data-index=\"token_app_type_desc\" :width=\"100\">\r\n          <template #default=\"{ record }\">{{ record.token_app_type_desc }}</template>\r\n        </a-table-column>\r\n        <a-table-column :title=\"t('views.user.usetoken.app_name')\" data-index=\"robot_name\" :width=\"140\"> </a-table-column>\r\n        <a-table-column :title=\"t('views.user.usetoken.total_consumption') + '(k)'\" data-index=\"total_token_desc\" :width=\"140\">\r\n          <template #default=\"{ record }\">{{ record.total_token_desc }}</template>\r\n        </a-table-column>\r\n        <a-table-column :title=\"t('views.user.usetoken.input') + '(k)'\" data-index=\"prompt_token_desc\" :width=\"140\">\r\n          <template #default=\"{ record }\">{{ record.prompt_token_desc }}</template>\r\n        </a-table-column>\r\n        <a-table-column :title=\"t('views.user.usetoken.output') + '(k)'\" data-index=\"completion_token_desc\" :width=\"140\">\r\n          <template #default=\"{ record }\">{{ record.completion_token_desc }}</template>\r\n        </a-table-column>\r\n        <a-table-column :title=\"t('views.user.usetoken.date')\" data-index=\"date\" :width=\"140\">\r\n          <template #default=\"{ record }\">{{ record.date }}</template>\r\n        </a-table-column>\r\n      </a-table>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, onMounted } from 'vue'\r\nimport { useI18n } from 'vue-i18n'\r\nimport dayjs from 'dayjs'\r\nimport { getRobotList } from '@/api/robot/index.js'\r\nimport { tokenApp, tokenAppChart } from '@/api/manage/index.js'\r\nimport LineChart from './components/line-chart.vue'\r\nimport { getDateRangePresets, tableToExcel } from '@/utils/index'\r\n\r\nconst { t } = useI18n()\r\nconst dateRangePresets = getDateRangePresets()\r\n\r\nconst dates = ref([dayjs().subtract(7, 'day'), dayjs()])\r\nconst cascaderValue = ref([])\r\n\r\nconst searchState = reactive({\r\n  start_date: dates.value[0].format('YYYY-MM-DD'),\r\n  end_date: dates.value[1].format('YYYY-MM-DD'),\r\n  token_app_type: '',\r\n  robot_id: ''\r\n})\r\n\r\nconst pager = reactive({\r\n  page: 1,\r\n  size: 20,\r\n  total: 0\r\n})\r\n\r\nconst tableData = ref([])\r\n\r\nconst options = ref([])\r\nconst onSearch = () => {\r\n  pager.page = 1\r\n  getAppCharts()\r\n  getAppList()\r\n}\r\n\r\nconst onTableChange = (pagination) => {\r\n  pager.page = pagination.current\r\n  pager.size = pagination.pageSize\r\n  getAppList()\r\n}\r\n\r\nlet token_app_type_map = {\r\n  chatwiki_robot: t('views.user.usetoken.robot'),\r\n  workflow: t('views.user.usetoken.workflow'),\r\n  other: t('views.user.usetoken.other')\r\n}\r\n\r\nconst getAppList = () => {\r\n  tokenApp({\r\n    ...searchState,\r\n    page: pager.page,\r\n    size: pager.size\r\n  }).then((res) => {\r\n    let lsit = res.data.list || []\r\n\r\n    tableData.value = lsit.map((item) => {\r\n      return {\r\n        ...item,\r\n        token_app_type_desc: token_app_type_map[item.token_app_type],\r\n        completion_token_desc: formatNum(item.completion_token),\r\n        prompt_token_desc: formatNum(item.prompt_token),\r\n        total_token_desc: formatNum(item.total_token)\r\n      }\r\n    })\r\n\r\n    pager.total = +res.data.total\r\n  })\r\n}\r\n\r\nconst handleExport = () => {\r\n  tokenApp({\r\n    ...searchState,\r\n    page: pager.page,\r\n    size: 10000\r\n  }).then((res) => {\r\n    let lsit = res.data.list || []\r\n\r\n    lsit = lsit.map((item) => {\r\n      return {\r\n        ...item,\r\n        robot_name: item.robot_name || '',\r\n        token_app_type_desc: token_app_type_map[item.token_app_type],\r\n        completion_token_desc: formatNum(item.completion_token),\r\n        prompt_token_desc: formatNum(item.prompt_token),\r\n        total_token_desc: formatNum(item.total_token)\r\n      }\r\n    })\r\n\r\n    let headers = `${t('views.user.usetoken.type')},${t('views.user.usetoken.app_name')},${t('views.user.usetoken.total_consumption')}(k),${t('views.user.usetoken.input')}(k),${t('views.user.usetoken.output')}(k),${t('views.user.usetoken.date')}\\n`\r\n    let fieds = [\r\n      'token_app_type_desc',\r\n      'robot_name',\r\n      'total_token_desc',\r\n      'prompt_token_desc',\r\n      'completion_token_desc',\r\n      'date'\r\n    ]\r\n    tableToExcel(headers, lsit, fieds, t('views.user.usetoken.detail_data_prefix') + dayjs().format('YYYY-MM-DD HH:mm:ss'))\r\n  })\r\n}\r\n\r\nconst lineChartData = reactive({\r\n  xAxis: [],\r\n  series: []\r\n})\r\nconst getAppCharts = () => {\r\n  tokenAppChart({\r\n    ...searchState\r\n  }).then((res) => {\r\n    let list = res.data.list\r\n    let xData = []\r\n    let yData = []\r\n    list.forEach((item) => {\r\n      xData.push(dayjs(item.date).format('YY/MM/DD'))\r\n      yData.push({\r\n        completion_token: formatNum(item.completion_token),\r\n        prompt_token: formatNum(item.prompt_token),\r\n        total_token: formatNum(item.total_token)\r\n      })\r\n    })\r\n    Object.assign(lineChartData, {\r\n      xAxis: xData,\r\n      series: yData\r\n    })\r\n  })\r\n}\r\n\r\nfunction formatNum(num) {\r\n  if (num <= 0) {\r\n    return 0\r\n  }\r\n  return (num / 1000).toFixed(2)\r\n}\r\n\r\nconst handleDateChange = () => {\r\n  searchState.start_date = ''\r\n  searchState.end_date = ''\r\n  if (dates.value && dates.value.length > 0) {\r\n    searchState.start_date = dates.value[0].format('YYYY-MM-DD')\r\n    searchState.end_date = dates.value[1].format('YYYY-MM-DD')\r\n  }\r\n  onSearch()\r\n}\r\n\r\nconst handleCascaderChange = () => {\r\n  searchState.token_app_type = ''\r\n  searchState.robot_id = ''\r\n  if (!cascaderValue.value) {\r\n    onSearch()\r\n    return\r\n  }\r\n  searchState.token_app_type = cascaderValue.value[0]\r\n  if (cascaderValue.value.length >= 2) {\r\n    searchState.robot_id = cascaderValue.value[1]\r\n  }\r\n  onSearch()\r\n}\r\n\r\nonMounted(() => {\r\n  getRobotList().then((res) => {\r\n    let robotLists = res.data || []\r\n    let chatRobot = robotLists.filter((item) => item.application_type == 0)\r\n    let workflowRobot = robotLists.filter((item) => item.application_type == 1)\r\n    options.value = [\r\n      {\r\n        label: t('views.user.usetoken.robot'),\r\n        value: 'chatwiki_robot',\r\n        children: chatRobot.map((item) => {\r\n          return {\r\n            label: item.robot_name,\r\n            value: item.id\r\n          }\r\n        })\r\n      },\r\n      {\r\n        label: t('views.user.usetoken.workflow'),\r\n        value: 'workflow',\r\n        children: workflowRobot.map((item) => {\r\n          return {\r\n            label: item.robot_name,\r\n            value: item.id\r\n          }\r\n        })\r\n      },\r\n      {\r\n        label: t('views.user.usetoken.other'),\r\n        value: 'other'\r\n      }\r\n    ]\r\n  })\r\n  onSearch()\r\n})\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.statics-content {\r\n  padding: 0 16px;\r\n  .search-box {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 16px;\r\n  }\r\n}\r\n\r\n.list-box {\r\n  .main-title {\r\n    margin-top: 16px;\r\n    font-size: 16px;\r\n    font-weight: 600;\r\n    display: flex;\r\n    align-items: center;\r\n    &::before {\r\n      content: '';\r\n      display: inline-block;\r\n      width: 4px;\r\n      height: 20px;\r\n      background: #2475fc;\r\n      margin-right: 8px;\r\n      border-radius: 6px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"zm-date\">\r\n    <div class=\"date-btn\">\r\n      <a-radio-group v-model:value=\"create_time_type\" @change=\"handleTagChange\">\r\n        <a-radio-button class=\"date-btn-button\" v-for=\"item in tagDateArr\" :value=\"item.key\" :key=\"item.key\">\r\n          {{item.label}}\r\n        </a-radio-button>\r\n      </a-radio-group>\r\n    </div>\r\n    <div class=\"date-content\">\r\n      <a-range-picker v-model:value=\"range\" @change=\"handleDateChange\" format=\"YYYY-MM-DD\" :disabledDate=disabledDate></a-range-picker>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script setup>\r\nimport dayjs from 'dayjs';\r\nimport { ref, onMounted, reactive } from 'vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.user.usetoken')\r\n\r\nconst props = defineProps({\r\n  dateType: {\r\n    type: Number,\r\n    default: 1\r\n  },\r\n  rangeData: {\r\n    type: Array,\r\n    default: null\r\n  }\r\n})\r\n\r\nconst create_time_type = ref(1)\r\n\r\nconst emit = defineEmits(['dateChange'])\r\n\r\nlet tagDateArr = reactive([\r\n  {\r\n    label: t('date.today'),\r\n    value: false,\r\n    key: 2,\r\n    start_date: dayjs(),\r\n    end_date: dayjs(),\r\n  },\r\n  {\r\n    label: t('date.yesterday'),\r\n    value: false,\r\n    key: 3,\r\n    start_date: dayjs().subtract(1, 'day'),\r\n    end_date: dayjs().subtract(1, 'day'),\r\n  },\r\n  {\r\n    label: t('date.last_seven_days'),\r\n    value: true,\r\n    key: 4,\r\n    start_date: dayjs().subtract(6, 'day'),\r\n    end_date: dayjs().subtract(0, 'day'),\r\n  }\r\n])\r\n\r\nconst start_time = ref(null)\r\nconst end_time = ref(null)\r\nconst range = ref([])\r\n\r\n// 创建一个禁用今天之后日期的函数\r\nconst disabledDate = (current) => {\r\n  // 如果当前日期大于或等于今天，则禁用\r\n  return current >= dayjs().subtract(0, 'day');\r\n};\r\n\r\nconst handleTagChange = () => {\r\n  let key = create_time_type.value\r\n\r\n  let dateItem = null;\r\n  tagDateArr.forEach((item) => {\r\n    if (item.key == key) {\r\n      dateItem = item;\r\n    }\r\n  })\r\n\r\n  range.value = [dateItem.start_date, dateItem.end_date];\r\n  start_time.value = dateItem.start_date.format('YYYY-MM-DD')\r\n  end_time.value = dateItem.end_date.format('YYYY-MM-DD')\r\n  search()\r\n}\r\n\r\n\r\nconst handleDateChange = (dates, dateStrings) => {\r\n  create_time_type.value = 1;\r\n  range.value = dates\r\n  start_time.value = dateStrings[0]\r\n  end_time.value = dateStrings[1]\r\n  search();\r\n}\r\nconst search = () => {\r\n  emit(\"dateChange\", {start_date: start_time.value, end_date: end_time.value})\r\n}\r\n\r\nonMounted(() => {\r\n  create_time_type.value = props.dateType\r\n  range.value = props.rangeData\r\n})\r\n\r\n</script>\r\n<style lang=\"less\">\r\n.zm-date {\r\n  display: flex;\r\n  align-items: center;\r\n\r\n  .date-btn {\r\n    margin-right: 8px;\r\n\r\n    .date-btn-button {\r\n      padding-left: 16px;\r\n      padding-right: 16px;\r\n    }\r\n  }\r\n\r\n  .date-content {\r\n    width: 280px;\r\n  }\r\n}\r\n\r\n\r\n</style>","<template>\r\n  <div class=\"team-members-pages\">\r\n    <a-flex justify=\"flex-end\">\r\n      <div class=\"total\"><div class=\"label total-label\">{{ t('total_label') }}</div><div class=\"total-num\">{{ requestParams.total }}{{ t('count_unit') }}</div></div>\r\n      <div class=\"set-model\">\r\n        <div class=\"label set-model-label\">{{ t('select_model_label') }}</div>\r\n        <div class=\"set-model-body\">\r\n          <a-select\r\n            v-model:value=\"requestParams.use_model\"\r\n            :placeholder=\"t('all_models')\"\r\n            @change=\"handleChangeModel\"\r\n            :style=\"{'width': '200px'}\"\r\n          >\r\n            <a-select-option v-for=\"item in modelList\" :key=\"item\" :value=\"item\">\r\n              <span>{{ item }}</span>\r\n            </a-select-option>\r\n          </a-select>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"set-date\">\r\n        <div class=\"label set-date-label\">\r\n          <span>{{ t('statistics_date_label') }}</span>\r\n        </div>\r\n        <div class=\"set-date-body\">\r\n          <DateSelect\r\n            @dateChange=\"onDateChange\"\r\n            :key=\"datekey\"\r\n          ></DateSelect>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"set-reset\">\r\n        <a-button @click=\"onReset\">{{ t('reset_btn') }}</a-button>\r\n      </div>\r\n    </a-flex>\r\n    <div class=\"list-box\">\r\n      <a-table\r\n        :data-source=\"tableData\"\r\n        :pagination=\"requestParams.total > requestParams.size ? {\r\n          current: requestParams.page,\r\n          total: requestParams.total,\r\n          pageSize: requestParams.size,\r\n          showQuickJumper: true,\r\n          showSizeChanger: true,\r\n          pageSizeOptions: ['10', '20', '50', '100']\r\n        } : false\"\r\n        @change=\"onTableChange\"\r\n      >\r\n        <a-table-column :title=\"t('model_name')\" data-index=\"model\" width=\"300px\">\r\n          <template #default=\"{ record }\">\r\n            <div class=\"user-box\">\r\n              <div class=\"name-info\">\r\n                <div class=\"user-name\">{{ record.corp }}（{{ record.model }}）</div>\r\n              </div>\r\n            </div>\r\n          </template>\r\n        </a-table-column>\r\n        <a-table-column :title=\"t('type')\" data-index=\"IP\" width=\"190px\">\r\n          <template #default=\"{ record }\">{{ record.type }}</template>\r\n        </a-table-column>\r\n        <a-table-column :title=\"t('token_consumption')\" data-index=\"amount\" width=\"190px\">\r\n          <template #default=\"{ record }\">{{ record.amount }}</template>\r\n        </a-table-column>\r\n        <a-table-column :title=\"t('date')\" data-index=\"date\" width=\"190px\">\r\n          <template #default=\"{ record }\">{{ record.date }}</template>\r\n        </a-table-column>\r\n      </a-table>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script setup>\r\nimport { ref, reactive, onMounted  } from 'vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\nimport { getTokenStats } from '@/api/manage/index.js'\r\nimport dayjs from 'dayjs'\r\nimport { getTokenModels } from '@/api/model/index'\r\nimport DateSelect from './components/date.vue'\r\n\r\nconst { t } = useI18n('views.user.usetoken')\r\n\r\nconst datekey = ref(Date.now())\r\n\r\nconst modelList = ref([t('all_models')])\r\nconst requestParams = reactive({\r\n  page: 1,\r\n  size: 10,\r\n  total: 0,\r\n  use_model: t('all_models'),\r\n  start_date: '',\r\n  end_date: ''\r\n})\r\n\r\nconst onDateChange = (date) => {\r\n  requestParams.start_date = date.start_date\r\n  requestParams.end_date = date.end_date\r\n  onSearch()\r\n}\r\n\r\nconst onReset = () => {\r\n  // 重置\r\n  requestParams.use_model = t('all_models')\r\n  requestParams.start_date = ''\r\n  requestParams.end_date = ''\r\n\r\n  // 初始化子组件\r\n  datekey.value = Date.now()\r\n  onSearch()\r\n}\r\n\r\nconst onTableChange = (pagination) => {\r\n  requestParams.page = pagination.current\r\n  requestParams.size = pagination.pageSize\r\n  getData()\r\n}\r\nconst onSearch = () => {\r\n  requestParams.page = 1\r\n  getData()\r\n}\r\nconst tableData = ref([])\r\n\r\nconst formatAmount = (num1, num2) => {\r\n  // 处理计算后的精度问题\r\n  const num1Len = (num1.split('.')[1] ? num1.split('.')[1] : num1.split('.')[0] ).length;\r\n  const num2Len = (num2.split('.')[1] ? num2.split('.')[1] : num2.split('.')[0] ).length;\r\n  const maxLen = Math.pow(10, Math.max(num1Len, num2Len));\r\n  return ((num1 * maxLen) + (num2 * maxLen)) / maxLen / 1000\r\n}\r\n\r\nconst getData = () => {\r\n  // 获取列表\r\n  let parmas = {\r\n    page: requestParams.page,\r\n    size: requestParams.size,\r\n    start_date: requestParams.start_date,\r\n    end_date: requestParams.end_date,\r\n  }\r\n\r\n  // 全部模型不传参数到后端\r\n  if (requestParams.use_model != t('all_models')) {\r\n    parmas.model = requestParams.use_model\r\n  }\r\n\r\n  getTokenStats(parmas).then((res) => {\r\n    let lists = res.data.list\r\n    lists.forEach((item) => {\r\n      item.create_time = item.create_time > 0 ? dayjs(item.create_time * 1000).format('YYYY-MM-DD HH:mm') : '--'\r\n      item.amount = formatAmount(item.prompt_token, item.completion_token)\r\n    })\r\n    tableData.value = lists\r\n    requestParams.total = +res.data.total\r\n  })\r\n}\r\n\r\nconst handleChangeModel = (val) => {\r\n  requestParams.use_model = val\r\n  onSearch()\r\n}\r\n\r\nconst getModelList = () => {\r\n  getTokenModels({}).then((res) => {\r\n    modelList.value = [...[t('all_models')], ...res.data] || [t('all_models')]\r\n  })\r\n}\r\n\r\nonMounted(() => {\r\n    // 获取模型\r\n    getModelList()\r\n    onSearch()\r\n})\r\n\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.team-members-pages {\r\n  position: relative;\r\n  background: #fff;\r\n  padding: 0 24px 24px;\r\n  height: 100%;\r\n  .list-box {\r\n    background: #fff;\r\n    margin-top: 8px;\r\n    .user-box {\r\n      display: flex;\r\n      img {\r\n        width: 40px;\r\n        height: 40px;\r\n        border-radius: 8px;\r\n        margin-right: 8px;\r\n      }\r\n      .name-info {\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: space-between;\r\n        font-size: 14px;\r\n        line-height: 22px;\r\n        font-weight: 400;\r\n        .user-name {\r\n          color: #595959;\r\n        }\r\n        .nick-name {\r\n          color: #8c8c8c;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.total {\r\n  position: absolute;\r\n  left: 24px;\r\n  top: 5px;\r\n  display: flex;\r\n  align-items: center;\r\n\r\n  .total-num {\r\n    color: #595959;\r\n    font-family: \"PingFang SC\";\r\n    font-size: 14px;\r\n    font-style: normal;\r\n    font-weight: 400;\r\n  }\r\n}\r\n\r\n.label {\r\n  color: #262626;\r\n  font-family: \"PingFang SC\";\r\n  font-size: 14px;\r\n  font-style: normal;\r\n  font-weight: 400;\r\n}\r\n\r\n.set-model {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-left: 24px;\r\n\r\n  .set-model-body {\r\n\r\n    .set-model-select {\r\n      display: flex;\r\n      padding: 4px 12px;\r\n      align-items: flex-start;\r\n      align-self: stretch;\r\n      border-radius: 2px;\r\n      border: 1px solid var(--06, #D9D9D9);\r\n      background: var(--Neutral-1, #FFF);\r\n    }\r\n  }\r\n}\r\n\r\n.model-icon {\r\n  height: 18px;\r\n}\r\n\r\n.set-date {\r\n  display: flex;\r\n  align-items: center;\r\n  margin: 0 24px;\r\n}\r\n</style>\r\n","<template>\r\n  <a-modal v-model:open=\"open\" :title=\"modalTitle\" @ok=\"handleOk\" :width=\"540\">\r\n    <a-form layout=\"vertical\" style=\"margin-top: 16px\">\r\n      <a-form-item :label=\"t('token_limit')\" v-bind=\"validateInfos.max_token\">\r\n        <a-input-number\r\n          v-model:value=\"formState.max_token\"\r\n          style=\"width: 60%\"\r\n          :min=\"0.001\"\r\n          :precision=\"3\"\r\n          :placeholder=\"t('please_input')\"\r\n        >\r\n          <template #addonAfter> k </template>\r\n        </a-input-number>\r\n      </a-form-item>\r\n      <a-form-item :label=\"t('remark')\" v-bind=\"validateInfos.description\">\r\n        <a-textarea\r\n          :maxLength=\"500\"\r\n          style=\"height: 80px\"\r\n          v-model:value=\"formState.description\"\r\n          :placeholder=\"t('please_input')\"\r\n        />\r\n      </a-form-item>\r\n    </a-form>\r\n  </a-modal>\r\n</template>\r\n\r\n<script setup>\r\nimport { reactive, ref } from 'vue'\r\nimport { Form, message } from 'ant-design-vue'\r\nimport { tokenLimitCreate } from '@/api/manage/index.js'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.user.usetoken.modal')\r\n\r\nconst emit = defineEmits(['ok'])\r\nconst open = ref(false)\r\nconst modalTitle = ref(t('token_limit'))\r\nconst formState = reactive({\r\n  max_token: '',\r\n  description: '',\r\n  robot_id: '',\r\n  token_app_type: ''\r\n})\r\n\r\nfunction formatNum(num) {\r\n  if (num <= 0 || !num) {\r\n    return ''\r\n  }\r\n  return (num / 1000).toFixed(3)\r\n}\r\n\r\nlet limit_use = ref(0)\r\nconst show = (data = {}) => {\r\n  open.value = true\r\n  resetFields()\r\n  formState.max_token = formatNum(data.max_token)\r\n  formState.description = data.description || ''\r\n  formState.robot_id = data.robot_id || ''\r\n  formState.token_app_type = data.token_app_type || ''\r\n\r\n  limit_use.value = formatNum(data.max_token - data.use_token)\r\n}\r\nconst formRules = reactive({\r\n  max_token: [\r\n    {\r\n      required: true,\r\n      message: t('please_input_token_limit'),\r\n      trigger: 'blur'\r\n    }\r\n  ]\r\n})\r\nconst useForm = Form.useForm\r\nconst { resetFields, validate, validateInfos } = useForm(formState, formRules)\r\nconst handleOk = () => {\r\n  validate().then((res) => {\r\n    tokenLimitCreate({ ...formState, max_token: (formState.max_token * 1000).toFixed(3) }).then(\r\n      (res) => {\r\n        message.success(t('modify_success'))\r\n        open.value = false\r\n        emit('ok')\r\n      }\r\n    )\r\n  })\r\n}\r\ndefineExpose({\r\n  show\r\n})\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.form-tip {\r\n  color: #8c8c8c;\r\n  margin-top: 8px;\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"content-box\">\r\n    <div class=\"search-block\">\r\n      <a-input\r\n        v-model:value=\"searchState.search\"\r\n        :placeholder=\"t('quota.search_placeholder')\"\r\n        style=\"width: 220px\"\r\n        @change=\"onSearch\"\r\n      >\r\n        <template #suffix>\r\n          <SearchOutlined @click=\"onSearch\" />\r\n        </template>\r\n      </a-input>\r\n    </div>\r\n    <div class=\"list-box\">\r\n      <a-table :data-source=\"tableData\" :loading=\"loading\" :pagination=\"false\" sticky>\r\n        <a-table-column :title=\"t('quota.type')\" data-index=\"token_app_type\" :width=\"120\">\r\n          <template #default=\"{ record }\">\r\n            <a-flex :gap=\"4\" align=\"center\">\r\n              <a-avatar\r\n                v-if=\"record.token_app_type == 'chatwiki_robot'\"\r\n                :size=\"24\"\r\n                :src=\"DEFAULT_ROBOT_AVATAR\"\r\n              />\r\n              <a-avatar\r\n                v-if=\"record.token_app_type == 'workflow'\"\r\n                :size=\"24\"\r\n                :src=\"DEFAULT_WORKFLOW_AVATAR\"\r\n              />\r\n              <a-avatar v-if=\"record.token_app_type == 'other'\" :size=\"24\">\r\n                <template #icon><AppstoreOutlined style=\"font-size: 16px\" /></template>\r\n              </a-avatar>\r\n              {{ token_app_type_map[record.token_app_type] }}\r\n            </a-flex>\r\n          </template>\r\n        </a-table-column>\r\n        <a-table-column :title=\"t('quota.app_name')\" data-index=\"robot_name\" :width=\"160\"> </a-table-column>\r\n        <a-table-column :title=\"t('quota.today_consumption')\" data-index=\"today_use_token\" :width=\"130\">\r\n          <template #default=\"{ record }\">{{ formatNum(record.today_use_token) }}</template>\r\n        </a-table-column>\r\n        <a-table-column :title=\"t('quota.token_limit')\" data-index=\"amount\" :width=\"120\">\r\n          <template #default=\"{ record }\">{{\r\n            record.is_config == 1 && record.switch_status == 1 ? formatNum(record.max_token) : '-'\r\n          }}</template>\r\n        </a-table-column>\r\n        <a-table-column :title=\"t('quota.consumed')\" data-index=\"amount2\" :width=\"120\">\r\n          <template #default=\"{ record }\">{{\r\n            record.switch_status == 1 ? formatNum(record.use_token) : '-'\r\n          }}</template>\r\n        </a-table-column>\r\n        <a-table-column :title=\"t('quota.remaining')\" data-index=\"amount3\" :width=\"120\">\r\n          <template #default=\"{ record }\">{{\r\n            record.switch_status == 1 ? formatNum(record.max_token - record.use_token) : '-'\r\n          }}</template>\r\n        </a-table-column>\r\n        <a-table-column :title=\"t('quota.remark')\" data-index=\"description\" :width=\"200\" :ellipsis=\"true\">\r\n          <template #default=\"{ record }\">{{ record.description || '--' }}</template>\r\n        </a-table-column>\r\n        <a-table-column :title=\"t('quota.action')\" data-index=\"action\" :width=\"120\">\r\n          <template #default=\"{ record }\">\r\n            <a-flex align=\"center\" :gap=\"8\">\r\n              <a-switch\r\n                @change=\"handleChangeSwitch(record)\"\r\n                :checked=\"record.switch_status == 1\"\r\n                :checked-children=\"t('quota.switch_on')\"\r\n                :un-checked-children=\"t('quota.switch_off')\"\r\n              />\r\n              <a v-if=\"record.switch_status == 1\" @click=\"handleOpenModal(record, true)\">{{ t('quota.setting') }}</a>\r\n            </a-flex>\r\n          </template>\r\n        </a-table-column>\r\n      </a-table>\r\n    </div>\r\n    <TokenQuotaModal ref=\"tokenQuotaModalRef\" @ok=\"handleSetOk\" />\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, onMounted } from 'vue'\r\nimport { SearchOutlined, AppstoreOutlined } from '@ant-design/icons-vue'\r\nimport { DEFAULT_ROBOT_AVATAR, DEFAULT_WORKFLOW_AVATAR } from '@/constants/index.js'\r\nimport TokenQuotaModal from './components/token-quota-modal.vue'\r\nimport { tokenLimitList, tokenLimitCreate, tokenLimitSwitch } from '@/api/manage/index.js'\r\nimport { message } from 'ant-design-vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.user.usetoken')\r\n\r\nconst searchState = reactive({\r\n  search: ''\r\n})\r\n\r\nconst tableData = ref([])\r\n\r\nconst token_app_type_map = {\r\n  chatwiki_robot: t('robot'),\r\n  workflow: t('workflow'),\r\n  other: t('other')\r\n}\r\n\r\nconst loading = ref(false)\r\nconst onSearch = () => {\r\n  getData()\r\n}\r\n\r\nconst getData = () => {\r\n  loading.value = true\r\n  tokenLimitList({\r\n    ...searchState\r\n  })\r\n    .then((res) => {\r\n      tableData.value = res.data.list || []\r\n    })\r\n    .finally(() => {\r\n      loading.value = false\r\n    })\r\n}\r\n\r\nlet tempRecord = null\r\nconst handleChangeSwitch = (record) => {\r\n  tempRecord = record\r\n  if (tempRecord.switch_status == 1) {\r\n    handleSetSwitch()\r\n    return\r\n  }\r\n  handleOpenModal(record)\r\n}\r\n\r\nconst handleSetOk = () => {\r\n  if (tempRecord == null) {\r\n    getData()\r\n  } else {\r\n    handleSetSwitch()\r\n  }\r\n}\r\nconst handleSetSwitch = () => {\r\n  tokenLimitSwitch({\r\n    robot_id: tempRecord.robot_id,\r\n    token_app_type: tempRecord.token_app_type,\r\n    switch_status: tempRecord.switch_status == 1 ? 0 : 1\r\n  }).then((res) => {\r\n    message.success(`${tempRecord.switch_status == 1 ? t('quota.close_success') : t('quota.open_success')}`)\r\n    getData()\r\n  })\r\n}\r\n\r\nfunction formatNum(num) {\r\n  if (num <= 0 || !num) {\r\n    return 0\r\n  }\r\n  return (num / 1000).toFixed(3)\r\n}\r\n\r\nconst tokenQuotaModalRef = ref(null)\r\nconst handleOpenModal = (record, isRowEdit) => {\r\n  if (isRowEdit) {\r\n    tempRecord = null\r\n  }\r\n  tokenQuotaModalRef.value.show(JSON.parse(JSON.stringify(record)))\r\n}\r\n\r\nonMounted(() => {\r\n  getData()\r\n})\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.content-box {\r\n  padding: 0 16px;\r\n  .search-block {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 16px;\r\n  }\r\n  .list-box {\r\n    margin-top: 16px;\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"user-model-page\">\r\n    <!-- <div class=\"page-title\">Token使用</div> -->\r\n    <div class=\"tabs-box\">\r\n      <a-tabs v-model:activeKey=\"activeKey\">\r\n        <a-tab-pane :key=\"1\" :tab=\"t('views.user.usetoken.tabByApp')\"></a-tab-pane>\r\n        <a-tab-pane :key=\"2\" :tab=\"t('views.user.usetoken.tabByModel')\"></a-tab-pane>\r\n        <a-tab-pane v-if=\"role_type == 1 || role_type == 2\" :key=\"3\" :tab=\"t('views.user.usetoken.tabTokenQuota')\"></a-tab-pane>\r\n      </a-tabs>\r\n    </div>\r\n\r\n    <div class=\"list-wrapper\">\r\n      <StaticsByApp v-if=\"activeKey == 1\" />\r\n      <UseToken v-if=\"activeKey == 2\"></UseToken>\r\n\r\n      <QuotaToken v-if=\"activeKey == 3\"></QuotaToken>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed } from 'vue'\r\nimport { useI18n } from 'vue-i18n'\r\nimport StaticsByApp from './statics-by-app.vue'\r\nimport UseToken from './use-token.vue'\r\nimport QuotaToken from './quota-token.vue'\r\nimport { usePermissionStore } from '@/stores/modules/permission'\r\n\r\nconst { t } = useI18n()\r\nconst permissionStore = usePermissionStore()\r\nconst role_type = computed(() => permissionStore.role_type)\r\n\r\nconst activeKey = ref(1)\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.user-model-page {\r\n  width: 100%;\r\n  height: 100%;\r\n  border-bottom: 1px solid #fff;\r\n  border-right: 1px solid #fff;\r\n  background-color: #f2f4f7;\r\n\r\n  .page-title {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 24px;\r\n    padding: 24px 24px 16px;\r\n    background-color: #fff;\r\n    color: #000000;\r\n    font-family: 'PingFang SC';\r\n    font-size: 16px;\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    line-height: 24px;\r\n  }\r\n\r\n  .tabs-box {\r\n    background: #fff;\r\n    &::v-deep(.ant-tabs-nav-wrap) {\r\n      padding-left: 24px;\r\n    }\r\n  }\r\n\r\n  .list-wrapper {\r\n    background: #fff;\r\n    height: calc(100% - 65px);\r\n    overflow-x: hidden;\r\n    overflow-y: auto;\r\n  }\r\n}\r\n</style>\r\n"],"names":["t","useI18n","props","__props","myEchart","updateChat","option","item","watch","chatResize","chartRef","ref","onMounted","nextTick","echarts.init","onBeforeUnmount","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","dateRangePresets","getDateRangePresets","dates","dayjs","cascaderValue","searchState","reactive","pager","tableData","options","onSearch","getAppCharts","getAppList","onTableChange","pagination","token_app_type_map","tokenApp","res","lsit","formatNum","handleExport","headers","tableToExcel","lineChartData","tokenAppChart","list","xData","yData","num","handleDateChange","handleCascaderChange","getRobotList","robotLists","chatRobot","workflowRobot","_hoisted_2","_createVNode","_component_a_range_picker","$event","_unref","_component_a_cascader","_hoisted_3","_hoisted_4","_toDisplayString","LineChart","_hoisted_5","_createTextVNode","_hoisted_6","_component_a_button","_component_a_table","_component_a_table_column","_withCtx","record","create_time_type","emit","__emit","tagDateArr","start_time","end_time","range","disabledDate","current","handleTagChange","key","dateItem","search","dateStrings","_component_a_radio_group","_Fragment","_renderList","_createBlock","_component_a_radio_button","datekey","modelList","requestParams","onDateChange","date","onReset","getData","formatAmount","num1","num2","num1Len","num2Len","maxLen","parmas","getTokenStats","lists","handleChangeModel","val","getModelList","getTokenModels","_component_a_flex","_hoisted_7","_component_a_select","_cache","_component_a_select_option","_hoisted_8","_hoisted_9","_hoisted_10","DateSelect","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","open","modalTitle","formState","limit_use","show","data","resetFields","formRules","useForm","Form","validate","validateInfos","handleOk","tokenLimitCreate","message","__expose","_component_a_modal","_component_a_form","_component_a_form_item","_mergeProps","_component_a_input_number","_component_a_textarea","loading","tokenLimitList","tempRecord","handleChangeSwitch","handleSetSwitch","handleOpenModal","handleSetOk","tokenLimitSwitch","tokenQuotaModalRef","isRowEdit","_component_a_input","SearchOutlined","_component_a_avatar","DEFAULT_ROBOT_AVATAR","DEFAULT_WORKFLOW_AVATAR","AppstoreOutlined","_component_a_switch","TokenQuotaModal","permissionStore","usePermissionStore","role_type","computed","activeKey","_component_a_tabs","_component_a_tab_pane","StaticsByApp","UseToken","QuotaToken"],"mappings":"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"}