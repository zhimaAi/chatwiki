{"version":3,"file":"index-BGadMPGa.js","sources":["../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-config/basic-config/components/edit-box.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-config/basic-config/components/basic-config.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-config/basic-config/components/ai-create-prompt.vue","../../../../front-end/chat-ai-admin-vue/src/components/import-prompt/upload-prompt.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-config/basic-config/components/at-input/cascade-panel.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-config/basic-config/components/at-input/index.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-config/basic-config/components/system-prompt-words.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-config/basic-config/components/model-settings.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-config/basic-config/components/associated-knowledge-base/recall-settings-alert.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-config/basic-config/components/associated-knowledge-base/no-open-graph-modal.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-config/basic-config/components/associated-knowledge-base/index.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-config/basic-config/components/data-base/library-select-alert.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-config/basic-config/components/data-base/index.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-config/basic-config/components/welcome-words.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-config/basic-config/components/unknown-problem-prompt.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-config/basic-config/components/problem-optimization.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-config/basic-config/components/suggested-issues.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-config/basic-config/components/sensitive-words.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-config/basic-config/components/chat-mode/chat-edit-alert.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-config/basic-config/components/chat-mode/index.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-config/basic-config/components/switch-box.vue","../../../../front-end/chat-ai-admin-vue/src/assets/img/robot/preview/phone-head.png","../../../../front-end/chat-ai-admin-vue/src/assets/img/robot/preview/phone-body.png","../../../../front-end/chat-ai-admin-vue/src/assets/img/robot/preview/phone-footer.png","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-config/basic-config/components/common-problem.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-config/basic-config/components/display-aitations.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-config/basic-config/components/show-like.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-config/basic-config/role-permission.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-config/basic-config/components/skill/index.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-config/basic-config/components/chat-cache.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-config/basic-config/components/variable-setting/add-variable-modal.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-config/basic-config/components/variable-setting/index.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-config/basic-config/components/answer-prompt.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-config/basic-config/index.vue"],"sourcesContent":["<style lang=\"less\" scoped>\r\n.edit-box {\r\n  border-radius: 6px;\r\n  overflow: hidden;\r\n  background-color: #f2f4f7;\r\n\r\n  .edit-box-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 16px;\r\n\r\n    .left-box {\r\n      display: flex;\r\n      align-items: center;\r\n    }\r\n\r\n    .right-box {\r\n      display: flex;\r\n      align-items: center;\r\n    }\r\n\r\n    .edit-box-icon {\r\n      margin-right: 8px;\r\n      font-size: 18px;\r\n      color: #262626;\r\n    }\r\n\r\n    .edit-box-title {\r\n      display: flex;\r\n      gap: 4px;\r\n      line-height: 24px;\r\n      font-size: 16px;\r\n      font-weight: 600;\r\n      color: #262626;\r\n    }\r\n    .title-tip {\r\n      margin-left: 4px;\r\n    }\r\n\r\n    .actions-box {\r\n      display: flex;\r\n      align-items: center;\r\n      line-height: 22px;\r\n      font-size: 14px;\r\n      color: #595959;\r\n\r\n      .action-btn {\r\n        cursor: pointer;\r\n      }\r\n\r\n      .save-btn {\r\n        color: #2475fc;\r\n      }\r\n    }\r\n  }\r\n\r\n  .edit-box-body {\r\n    padding: 0 16px 16px 16px;\r\n  }\r\n}\r\n</style>\r\n\r\n<template>\r\n  <div class=\"edit-box\" :class=\"{ 'is-edit': isEdit }\">\r\n    <div class=\"edit-box-header\">\r\n      <div class=\"left-box\">\r\n        <svg-icon class=\"edit-box-icon\" :name=\"props.iconName\"></svg-icon>\r\n        <span class=\"edit-box-title\">{{ props.title }}\r\n          <span v-if=\"$slots.icon\"><slot name=\"icon\"></slot></span>\r\n        </span>\r\n        <span class=\"title-tip\" v-if=\"$slots.tip\">\r\n          <slot name=\"tip\"></slot>\r\n        </span>\r\n      </div>\r\n      <div class=\"right-box\">\r\n        <div class=\"extra-box\">\r\n          <slot name=\"extra\">\r\n            <div class=\"actions-box\">\r\n              <template v-if=\"props.isEdit\">\r\n                <a-flex :gap=\"8\">\r\n                  <a-button @click=\"handleSave\" size=\"small\" type=\"primary\">{{ t('btn_save') }}</a-button>\r\n                  <a-button @click=\"handleEdit(false)\" size=\"small\">{{ t('btn_cancel') }}</a-button>\r\n                </a-flex>\r\n              </template>\r\n              <template v-else>\r\n                <a-button @click=\"handleEdit(true)\" size=\"small\">{{ t('btn_edit') }}</a-button>\r\n              </template>\r\n            </div>\r\n          </slot>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"edit-box-body\" :style=\"{ ...bodyStyle }\">\r\n      <slot></slot>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script setup>\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst emit = defineEmits(['update:isEdit', 'save', 'edit'])\r\n\r\nconst props = defineProps({\r\n  iconName: {\r\n    type: String,\r\n    default: ''\r\n  },\r\n  title: {\r\n    type: String,\r\n    default: ''\r\n  },\r\n  isEdit: {\r\n    type: Boolean,\r\n    default: false\r\n  },\r\n  bodyStyle: {\r\n    type: Object,\r\n    default: () => {\r\n      return {}\r\n    }\r\n  }\r\n})\r\n\r\nconst { t } = useI18n('views.robot.robot-config.basic-config.components.edit-box')\r\n\r\nconst handleEdit = (val) => {\r\n  emit('edit')\r\n  emit('update:isEdit', val)\r\n}\r\n\r\nconst handleSave = () => {\r\n  emit('save')\r\n}\r\n</script>\r\n","<style lang=\"less\" scoped>\r\n.basic-config {\r\n  .robot-info-box {\r\n    .robot-name-box {\r\n      display: flex;\r\n      align-items: center;\r\n\r\n      .robot-avatar {\r\n        width: 32px;\r\n        height: 32px;\r\n        margin-right: 8px;\r\n        border-radius: 4px;\r\n      }\r\n\r\n      .robot-name {\r\n        line-height: 22px;\r\n        font-size: 14px;\r\n        color: #262626;\r\n      }\r\n    }\r\n\r\n    .robot-intro {\r\n      line-height: 22px;\r\n      margin-top: 8px;\r\n      font-size: 14px;\r\n      color: #595959;\r\n      display: flex;\r\n      align-items: center;\r\n      flex-wrap: wrap;\r\n      gap: 8px;\r\n    }\r\n  }\r\n\r\n  .robot-form-box {\r\n    display: flex;\r\n    gap: 50px;\r\n\r\n    .form-item {\r\n      flex: 1;\r\n    }\r\n\r\n    .form-item-label {\r\n      line-height: 22px;\r\n      margin-bottom: 4px;\r\n      font-size: 14px;\r\n      color: #262626;\r\n    }\r\n\r\n    .robot-name-item {\r\n      display: flex;\r\n      align-items: center;\r\n    }\r\n\r\n    .robot-avetar-upload {\r\n      width: 40px;\r\n      height: 40px;\r\n      margin-right: 8px;\r\n\r\n      .robot-avetar {\r\n        width: 40px;\r\n        height: 40px;\r\n        border-radius: 4px;\r\n      }\r\n    }\r\n\r\n    .robot-name-box {\r\n      flex: 1;\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n<template>\r\n  <edit-box\r\n    class=\"basic-config\"\r\n    :title=\"t('title_basic_config')\"\r\n    icon-name=\"jibenpeizhi\"\r\n    v-model:isEdit=\"isEdit\"\r\n    @save=\"onSave\"\r\n    @edit=\"handleEdit\"\r\n  >\r\n    <div class=\"robot-form-box\" v-show=\"isEdit\">\r\n      <div class=\"form-item\">\r\n        <div class=\"form-item-label\">{{ t('label_robot_name_avatar') }}</div>\r\n        <div class=\"form-item-body robot-name-item\">\r\n          <cu-upload accept=\"image/*\" @change=\"handleChangeAvatar\">\r\n            <div class=\"robot-avetar-upload\">\r\n              <img\r\n                class=\"robot-avetar\"\r\n                :src=\"formState.robot_avatar_url\"\r\n                v-if=\"formState.robot_avatar_url\"\r\n              />\r\n            </div>\r\n          </cu-upload>\r\n\r\n          <div class=\"robot-name-box\">\r\n            <a-input v-model:value=\"formState.robot_name\" :placeholder=\"t('ph_input_robot_name')\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"form-item\">\r\n        <div class=\"form-item-label\">{{ t('label_intro') }}</div>\r\n        <div class=\"form-item-body\">\r\n          <a-textarea\r\n            :rows=\"3\"\r\n            v-model:value=\"formState.robot_intro\"\r\n            :placeholder=\"t('ph_input_robot_intro')\"\r\n            allow-clear\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"robot-info-box\" v-show=\"!isEdit\">\r\n      <div class=\"robot-name-box\">\r\n        <img class=\"robot-avatar\" :src=\"robotInfo.robot_avatar_url\" alt=\"\" />\r\n        <span class=\"robot-name\">{{ robotInfo.robot_name }}</span>\r\n      </div>\r\n      <div class=\"robot-intro\">\r\n        <span>{{ t('label_group') }}{{ groupName }}</span>\r\n        <span>{{ t('label_intro_colon') }}{{ robotInfo.robot_intro || t('msg_no_intro') }}</span>\r\n      </div>\r\n    </div>\r\n  </edit-box>\r\n</template>\r\n<script setup>\r\nimport { getBase64 } from '@/utils/index'\r\nimport { ref, reactive, inject, toRaw, computed } from 'vue'\r\nimport EditBox from './edit-box.vue'\r\nimport CuUpload from '@/components/cu-upload/cu-upload.vue'\r\nimport { useRobotStore } from '@/stores/modules/robot'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.robot.robot-config.basic-config.components.basic-config')\r\nconst robotStore = useRobotStore()\r\nconst isEdit = ref(false)\r\nconst { robotInfo, updateRobotInfo } = inject('robotInfo')\r\n\r\nconst formState = reactive({\r\n  robot_name: '',\r\n  robot_avatar: '',\r\n  robot_avatar_url: '',\r\n  robot_intro: ''\r\n})\r\n\r\nconst robotList = computed(() => {\r\n  return robotStore.robotList || []\r\n})\r\n\r\nconst robotGroupList = computed(() => {\r\n  return robotStore.robotGroupList || []\r\n})\r\n\r\n\r\nconst groupName = computed(() => {\r\n  let group_name = t('msg_ungrouped')\r\n  let currentRobotItem = robotList.value.find((item) => item.id == robotInfo.id) || {}\r\n  if(currentRobotItem.group_id > 0){\r\n    let groupItem = robotGroupList.value.find((item) => item.id == currentRobotItem.group_id)\r\n    if (groupItem) {\r\n      group_name = groupItem.group_name\r\n    }\r\n  }\r\n  return group_name\r\n})\r\n\r\nconst onSave = () => {\r\n  updateRobotInfo({ ...toRaw(formState) })\r\n  isEdit.value = false;\r\n}\r\n\r\nconst handleChangeAvatar = (fileList) => {\r\n  let file = fileList[0]\r\n  formState.robot_avatar = file\r\n\r\n  getBase64(file).then((base64Url) => {\r\n    formState.robot_avatar_url = base64Url\r\n  })\r\n  return false\r\n}\r\n\r\nconst handleEdit = () => {\r\n  formState.robot_name = robotInfo.robot_name\r\n  formState.robot_intro = robotInfo.robot_intro\r\n  formState.robot_avatar = robotInfo.robot_avatar\r\n  formState.robot_avatar_url = robotInfo.robot_avatar_url\r\n}\r\n</script>\r\n","<template>\r\n  <div>\r\n    <a-modal\r\n      v-model:open=\"open\"\r\n      :title=\"t('title_ai_generate_prompt')\"\r\n      wrapClassName=\"no-padding-modal\"\r\n      :bodyStyle=\"{ 'max-height': '600px', 'overflow-y': 'auto' }\"\r\n      :width=\"856\"\r\n    >\r\n      <template #footer>\r\n        <a-button type=\"primary\" :loading=\"confirmLoading\" @click=\"handleOk\">\r\n          {{ t('btn_use_prompt') }}\r\n        </a-button>\r\n      </template>\r\n      <div class=\"ai-create-box\">\r\n        <div class=\"input-box\">\r\n          <a-textarea\r\n            style=\"width: 100%\"\r\n            v-model:value=\"demand\"\r\n            size=\"large\"\r\n            auto-size\r\n            :placeholder=\"t('ph_input_prompt')\"\r\n          ></a-textarea>\r\n          <div class=\"btn-box\" :class=\"{ 'disabed-status': isLoading }\" @click=\"handleCreatePrompt\">\r\n            <LoadingOutlined v-if=\"isLoading\" />\r\n            <svg-icon name=\"ai-mark\" />\r\n            <span v-if=\"isLoading\">{{ t('txt_generating') }}</span>\r\n            <span v-else>{{ t('btn_generate') }}</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"quick-tags-box\">\r\n          <div class=\"quick-label\">{{ t('label_quick_generate') }}</div>\r\n          <a-tag\r\n            v-for=\"item in quickData\"\r\n            :key=\"item.title\"\r\n            @click=\"handleQuickMark(item.title)\"\r\n            color=\"blue\"\r\n            >{{ item.title }}</a-tag\r\n          >\r\n        </div>\r\n        <div class=\"ai-list-box\">\r\n          <template v-if=\"isLoading\">\r\n            <div class=\"loading-box\">\r\n              <a-spin :tip=\"t('tip_generating')\"></a-spin>\r\n            </div>\r\n          </template>\r\n          <template v-else>\r\n            <div class=\"prompt-list-box\" v-if=\"hasData\">\r\n              <div class=\"prompt-list\">\r\n                <div class=\"prompt-header\">\r\n                  <div class=\"prompt-title\">{{ formState.promptStruct.role.subject }}</div>\r\n                </div>\r\n                <div class=\"prompt-content\">\r\n                  {{ formState.promptStruct.role.describe }}\r\n                </div>\r\n              </div>\r\n              <!-- {{ t('label_task') }} -->\r\n              <div class=\"prompt-list\">\r\n                <div class=\"prompt-header\">\r\n                  <div class=\"prompt-title\">{{ formState.promptStruct.task.subject }}</div>\r\n                </div>\r\n                <div class=\"prompt-content\">\r\n                  {{ formState.promptStruct.task.describe }}\r\n                </div>\r\n              </div>\r\n              <!-- {{ t('label_requirements') }} -->\r\n              <div class=\"prompt-list\">\r\n                <div class=\"prompt-header\">\r\n                  <div class=\"prompt-title\">\r\n                    {{ formState.promptStruct.constraints.subject }}\r\n                  </div>\r\n                </div>\r\n                <div class=\"prompt-content\">\r\n                  {{ formState.promptStruct.constraints.describe }}\r\n                </div>\r\n              </div>\r\n              <!-- {{ t('label_output_format') }} -->\r\n              <div class=\"prompt-list\">\r\n                <div class=\"prompt-header\">\r\n                  <div class=\"prompt-title\">{{ formState.promptStruct.output.subject }}</div>\r\n                </div>\r\n                <div class=\"prompt-content\">\r\n                  {{ formState.promptStruct.output.describe }}\r\n                </div>\r\n              </div>\r\n              <!-- {{ t('label_style') }} -->\r\n              <div class=\"prompt-list\">\r\n                <div class=\"prompt-header\">\r\n                  <div class=\"prompt-title\">{{ formState.promptStruct.tone.subject }}</div>\r\n                </div>\r\n                <div class=\"prompt-content\">\r\n                  {{ formState.promptStruct.tone.describe }}\r\n                </div>\r\n              </div>\r\n\r\n              <!-- {{ t('label_custom') }} -->\r\n              <div\r\n                class=\"prompt-list\"\r\n                v-for=\"(item, index) in formState.promptStruct.custom\"\r\n                :key=\"index + item.key ? item.key : ''\"\r\n              >\r\n                <div class=\"prompt-header\">\r\n                  <div class=\"prompt-title\">{{ item.subject }}</div>\r\n                </div>\r\n                <div class=\"prompt-content\">{{ item.describe }}</div>\r\n              </div>\r\n            </div>\r\n            <div class=\"empty-box\" v-else>\r\n              <a-empty :image=\"simpleImage\" :description=\"description\" />\r\n            </div>\r\n          </template>\r\n        </div>\r\n      </div>\r\n    </a-modal>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive } from 'vue'\r\nimport { createPromptByAi } from '@/api/robot/index'\r\nimport { message } from 'ant-design-vue'\r\nimport { LoadingOutlined } from '@ant-design/icons-vue'\r\nimport { useRoute } from 'vue-router'\r\nimport { Empty } from 'ant-design-vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.robot.robot-config.basic-config.components.ai-create-prompt')\r\nconst simpleImage = Empty.PRESENTED_IMAGE_SIMPLE\r\nconst open = ref(false)\r\nconst confirmLoading = ref(false)\r\nconst query = useRoute().query\r\nconst emit = defineEmits(['handleAiSave'])\r\n\r\nconst demand = ref('')\r\n\r\nconst isLoading = ref(false)\r\n\r\nconst quickData = [\r\n  {\r\n    title: t('quick_ecommerce_after_sales')\r\n  },\r\n  {\r\n    title: t('quick_english_education_pre_sales')\r\n  }\r\n]\r\n\r\nconst description = ref(t('msg_input_requirement'))\r\nconst show = () => {\r\n  hasData.value = false\r\n  formState.promptStruct = defaultData\r\n  demand.value = ''\r\n  description.value = t('msg_input_requirement')\r\n  open.value = true\r\n}\r\nconst hasData = ref(false)\r\nconst defaultData = {\r\n  role: {\r\n    subject: '',\r\n    describe: ''\r\n  },\r\n  task: {\r\n    subject: '',\r\n    describe: ''\r\n  },\r\n  constraints: {\r\n    subject: '',\r\n    describe: ''\r\n  },\r\n  output: {\r\n    subject: '',\r\n    describe: ''\r\n  },\r\n  tone: {\r\n    subject: '',\r\n    describe: ''\r\n  },\r\n  custom: []\r\n}\r\nconst formState = reactive({\r\n  promptStruct: defaultData\r\n})\r\nconst handleQuickMark = (title) => {\r\n  demand.value = title\r\n}\r\nconst handleCreatePrompt = () => {\r\n  if (!demand.value) {\r\n    return message.error(t('msg_empty_input'))\r\n  }\r\n  if (isLoading.value) {\r\n    return message.error(t('msg_generating_in_progress'))\r\n  }\r\n  isLoading.value = true\r\n  createPromptByAi({\r\n    id: query.id,\r\n    demand: demand.value\r\n  })\r\n    .then((res) => {\r\n      formState.promptStruct = JSON.parse(res.data.promptStruct)\r\n      hasData.value = true\r\n    })\r\n    .finally(() => {\r\n      isLoading.value = false\r\n    })\r\n    .catch((res) => {\r\n      hasData.value = false\r\n      description.value = res.msg\r\n    })\r\n}\r\nconst handleOk = () => {\r\n  if (!hasData.value) {\r\n    return message.error(t('msg_prompt_not_generated'))\r\n  }\r\n  emit('handleAiSave', formState.promptStruct)\r\n  open.value = false\r\n}\r\n\r\ndefineExpose({\r\n  show\r\n})\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.loading-box {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding-top: 120px;\r\n}\r\n.empty-box {\r\n  padding-top: 80px;\r\n  ::v-deep(.ant-empty-description) {\r\n    color: #262626;\r\n  }\r\n}\r\n.ai-create-box {\r\n  padding-right: 24px;\r\n  .input-box {\r\n    position: relative;\r\n    margin-top: 20px;\r\n    .btn-box {\r\n      cursor: pointer;\r\n      position: absolute;\r\n      right: 16px;\r\n      bottom: 8px;\r\n      display: flex;\r\n      height: 24px;\r\n      align-items: center;\r\n      gap: 4px;\r\n      font-size: 16px;\r\n      line-height: 24px;\r\n      color: #6524fc;\r\n      &.disabed-status {\r\n        cursor: not-allowed;\r\n      }\r\n    }\r\n  }\r\n  .ai-list-box {\r\n    margin-top: 8px;\r\n    border-radius: 12px;\r\n    min-height: 282px;\r\n    padding: 16px 3px 16px 16px;\r\n    border: 1px solid #2475fc;\r\n    background: #f0f5ff;\r\n  }\r\n}\r\n\r\n.prompt-list-box {\r\n  .prompt-list {\r\n    border: 1px solid var(--06, #d9d9d9);\r\n    background: #fff;\r\n    border-radius: 6px;\r\n    margin-bottom: 8px;\r\n    padding: 9px 12px;\r\n  }\r\n  .prompt-header {\r\n    margin-bottom: 8px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    .prompt-title {\r\n      color: #262626;\r\n      font-weight: 600;\r\n      font-size: 14px;\r\n    }\r\n  }\r\n  .prompt-content {\r\n    white-space: pre-wrap;\r\n  }\r\n}\r\n.quick-tags-box {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-top: 12px;\r\n  gap: 4px;\r\n  .quick-label {\r\n    color: #333;\r\n    font-weight: 500;\r\n  }\r\n  .ant-tag {\r\n    cursor: pointer;\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div>\r\n    <a-modal v-model:open=\"open\" :title=\"t('title_save_to_library')\" :width=\"580\" @ok=\"handleOk\" :confirmLoading=\"isLoading\">\r\n      <a-form\r\n        style=\"margin-top: 24px\"\r\n        :label-col=\"{ span: 5 }\"\r\n        :wrapper-col=\"{ span: 18 }\"\r\n        ref=\"formRef\"\r\n        :model=\"formState\"\r\n      >\r\n        <a-form-item\r\n          name=\"title\"\r\n          :label=\"t('label_prompt_title')\"\r\n          :rules=\"[{ required: true, message: t('msg_input_prompt_title') }]\"\r\n        >\r\n          <a-input\r\n            v-model:value=\"formState.title\"\r\n            :placeholder=\"t('ph_input_prompt_title')\"\r\n            :maxLength=\"10\"\r\n          ></a-input>\r\n        </a-form-item>\r\n        <a-form-item name=\"group_id\" :label=\"t('label_group')\">\r\n          <a-select v-model:value=\"formState.group_id\" style=\"width: 100%\">\r\n            <a-select-option v-for=\"item in groupList\" :value=\"item.id\">{{\r\n              item.group_name\r\n            }}</a-select-option>\r\n          </a-select>\r\n        </a-form-item>\r\n      </a-form>\r\n    </a-modal>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, h, reactive } from 'vue'\r\nimport {} from '@ant-design/icons-vue'\r\nimport { message } from 'ant-design-vue'\r\nimport { getPromptLibraryGroup, savePromptLibraryItems } from '@/api/user/index.js'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('components.import-prompt.upload-prompt')\r\n\r\nconst open = ref(false)\r\n\r\nconst formState = reactive({\r\n  title: '',\r\n  group_id: 0,\r\n  prompt_type: 0,\r\n  prompt: '',\r\n  prompt_struct: {}\r\n})\r\n\r\nconst formRef = ref(null)\r\nconst show = (data) => {\r\n  if(data.prompt_type == 0 && !data.prompt){\r\n    return message.error(t('msg_custom_prompt_empty'))\r\n  }\r\n  formRef.value && formRef.value.resetFields()\r\n  let newData = {\r\n    ...data\r\n  }\r\n  formState.title = ''\r\n  formState.group_id = 0\r\n  formState.prompt = ''\r\n  formState.prompt_struct = {}\r\n  formState.prompt_type = newData.prompt_type\r\n  if (newData.prompt_type == 0) {\r\n    formState.prompt = newData.prompt\r\n  } else {\r\n    formState.prompt_struct = JSON.stringify(newData.prompt_struct)\r\n  }\r\n  open.value = true\r\n}\r\n\r\nconst groupList = ref([])\r\nconst getGroupList = () => {\r\n  getPromptLibraryGroup().then((res) => {\r\n    groupList.value = [\r\n      {\r\n        id: 0,\r\n        group_name: t('group_default')\r\n      },\r\n      ...res.data\r\n    ]\r\n  })\r\n}\r\n\r\ngetGroupList()\r\n\r\nconst isLoading = ref(false)\r\n\r\nconst handleOk = () => {\r\n  formRef.value.validate().then(() => {\r\n    let parmas = {\r\n      ...formState\r\n    }\r\n    isLoading.value = true\r\n    savePromptLibraryItems({\r\n      ...parmas\r\n    })\r\n      .then(() => {\r\n        message.success(t('msg_save_success'))\r\n        open.value = false\r\n      })\r\n      .finally(() => {\r\n        isLoading.value = false\r\n      })\r\n  })\r\n}\r\n\r\ndefineExpose({\r\n  show\r\n})\r\n</script>\r\n<style lang=\"less\" scoped>\r\n\r\n</style>\r\n","<template>\r\n  <div class=\"cascade-panel\">\r\n    <div\r\n      class=\"cascade-panel-container\"\r\n      :class=\"[\r\n        `expand-direction-${expandDirection}`\r\n      ]\"\r\n    >\r\n      <!-- 级联面板列表 -->\r\n      <div class=\"cascade-panel-list\" v-for=\"(level, levelIndex) in activePath\" :key=\"levelIndex\">\r\n        <!-- <div class=\"cascade-panel-header\" v-if=\"level.title\">\r\n          {{ level.title }}\r\n        </div> -->\r\n        <div class=\"cascade-panel-body\">\r\n          <div\r\n            class=\"cascade-panel-item\"\r\n            v-for=\"item in level.options\"\r\n            :key=\"item.value\"\r\n            :class=\"{ 'active': isActive(item, levelIndex) }\"\r\n            @click=\"handleSelect(item, levelIndex, $event)\"\r\n          >\r\n            <div class=\"item-content\">\r\n              <span class=\"item-label\">{{ item.label }}</span>\r\n              <span class=\"item-icon\" @click=\"handleRightClick\" v-if=\"hasChildren(item)\">\r\n                <svg viewBox=\"0 0 1024 1024\" width=\"12\" height=\"12\">\r\n                  <path d=\"M765.7 486.8L314.9 134.7c-5.3-4.1-12.9-0.4-12.9 6.3v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1c16.4-12.8 16.4-37.6 0-50.4z\" fill=\"currentColor\"></path>\r\n                </svg>\r\n              </span>\r\n            </div>\r\n          </div>\r\n          <div class=\"cascade-panel-empty\" v-if=\"level.options && level.options.length === 0\">\r\n            暂无数据\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"CascadePanel\",\r\n  props: {\r\n    // 级联选项数据\r\n    options: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    // 默认选中的值\r\n    value: {\r\n      type: [String, Number, Array],\r\n      default: \"\"\r\n    },\r\n    // 是否允许选择任意一级\r\n    checkAnyLevel: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    // 子选项的属性名\r\n    childrenKey: {\r\n      type: String,\r\n      default: \"children\"\r\n    },\r\n    // 值的属性名\r\n    valueKey: {\r\n      type: String,\r\n      default: \"value\"\r\n    },\r\n    // 标签的属性名\r\n    labelKey: {\r\n      type: String,\r\n      default: \"label\"\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      // 当前激活的路径\r\n      activePath: [],\r\n      // 当前选中的值路径\r\n      selectedValuePath: [],\r\n      // 当前选中的选项路径\r\n      selectedPath: [],\r\n      // 子菜单展开方向\r\n      expandDirection: 'right', // 'left' or 'right'\r\n      isClickRight: false,\r\n    };\r\n  },\r\n  watch: {\r\n    options: {\r\n      handler() {\r\n        this.initPanel();\r\n      },\r\n      immediate: true\r\n    },\r\n    value: {\r\n      handler(val) {\r\n        if (val) {\r\n          this.initSelectedPath();\r\n        }\r\n      },\r\n      immediate: true\r\n    }\r\n  },\r\n  methods: {\r\n    // 初始化面板\r\n    initPanel() {\r\n      if (!this.options || this.options.length === 0) {\r\n        this.activePath = [];\r\n        return;\r\n      }\r\n      \r\n      // 初始化第一级\r\n      this.activePath = [{\r\n        title: \"\",\r\n        options: this.options,\r\n        level: 0\r\n      }];\r\n      \r\n      // 如果有默认值，初始化选中路径\r\n      if (this.value) {\r\n        this.initSelectedPath();\r\n      }\r\n    },\r\n    \r\n    // 初始化选中路径\r\n    initSelectedPath() {\r\n      // 如果值是数组，表示已经是完整路径\r\n      if (Array.isArray(this.value)) {\r\n        this.selectedValuePath = [...this.value];\r\n        this.findPathByValues(this.selectedValuePath);\r\n      } else {\r\n        // 如果是单个值，需要查找完整路径\r\n        this.findPathByValue(this.value);\r\n      }\r\n    },\r\n    \r\n    // 根据单个值查找路径\r\n    findPathByValue(value) {\r\n      const path = [];\r\n      const valuePath = [];\r\n      \r\n      // 递归查找路径\r\n      const find = (options, level) => {\r\n        if (!options || options.length === 0) return false;\r\n        \r\n        for (let i = 0; i < options.length; i++) {\r\n          const item = options[i];\r\n          const itemValue = item[this.valueKey];\r\n          \r\n          // 找到匹配项\r\n          if (itemValue === value) {\r\n            path[level] = item;\r\n            valuePath[level] = itemValue;\r\n            return true;\r\n          }\r\n          \r\n          // 递归查找子项\r\n          if (item[this.childrenKey] && item[this.childrenKey].length > 0) {\r\n            path[level] = item;\r\n            valuePath[level] = itemValue;\r\n            \r\n            if (find(item[this.childrenKey], level + 1)) {\r\n              return true;\r\n            }\r\n            \r\n            // 未找到，回溯\r\n            path[level] = null;\r\n            valuePath[level] = null;\r\n          }\r\n        }\r\n        \r\n        return false;\r\n      };\r\n      \r\n      find(this.options, 0);\r\n      \r\n      // 过滤掉空值\r\n      this.selectedPath = path.filter(item => item);\r\n      this.selectedValuePath = valuePath.filter(item => item != null);\r\n      \r\n      // 更新激活路径\r\n      this.updateActivePath();\r\n    },\r\n    \r\n    // 根据值数组查找路径\r\n    findPathByValues(values) {\r\n      if (!values || values.length === 0) return;\r\n      \r\n      const path = [];\r\n      let currentOptions = this.options;\r\n      \r\n      // 遍历值数组，查找对应的选项\r\n      for (let i = 0; i < values.length; i++) {\r\n        const value = values[i];\r\n        const found = currentOptions.find(item => item[this.valueKey] === value);\r\n        \r\n        if (found) {\r\n          path.push(found);\r\n          currentOptions = found[this.childrenKey] || [];\r\n        } else {\r\n          break;\r\n        }\r\n      }\r\n      \r\n      this.selectedPath = path;\r\n      \r\n      // 更新激活路径\r\n      this.updateActivePath();\r\n    },\r\n    \r\n    // 更新激活路径\r\n    updateActivePath() {\r\n      if (!this.selectedPath || this.selectedPath.length === 0) {\r\n        this.activePath = [{\r\n          title: \"\",\r\n          options: this.options,\r\n          level: 0\r\n        }];\r\n        return;\r\n      }\r\n      \r\n      // 重置激活路径\r\n      this.activePath = [];\r\n      \r\n      // 第一级\r\n      this.activePath.push({\r\n        title: \"\",\r\n        options: this.options,\r\n        level: 0\r\n      });\r\n      \r\n      // 根据选中路径构建激活路径\r\n      for (let i = 0; i < this.selectedPath.length; i++) {\r\n        const item = this.selectedPath[i];\r\n        \r\n        // 如果有子选项，添加到激活路径\r\n        if (item[this.childrenKey] && item[this.childrenKey].length > 0) {\r\n          this.activePath.push({\r\n            title: item[this.labelKey],\r\n            options: item[this.childrenKey],\r\n            level: i + 1\r\n          });\r\n        }\r\n      }\r\n    },\r\n    handleRightClick(){\r\n      // 判断当前点击的是不是右边的按钮\r\n      this.isClickRight = true\r\n    },\r\n    \r\n    // 处理选择\r\n    handleSelect(item, levelIndex, e) {\r\n      // 在有子节点的情况下，判断下一次展开的方向\r\n      if (this.hasChildren(item)) {\r\n        this.checkDirection();\r\n      }\r\n\r\n      // 更新选中路径\r\n      this.selectedPath = this.selectedPath.slice(0, levelIndex);\r\n      this.selectedPath.push(item);\r\n      \r\n      // 更新选中值路径\r\n      this.selectedValuePath = this.selectedValuePath.slice(0, levelIndex);\r\n      this.selectedValuePath.push(item[this.valueKey]);\r\n      \r\n      // 更新激活路径\r\n      this.activePath = this.activePath.slice(0, levelIndex + 1);\r\n      \r\n      // 如果有子选项，添加到激活路径\r\n      if (this.hasChildren(item)) {\r\n        this.activePath.push({\r\n          title: item[this.labelKey],\r\n          options: item[this.childrenKey],\r\n          level: levelIndex + 1\r\n        });\r\n      }\r\n      \r\n      // 发送选中事件\r\n      this.$emit('select', item, this.selectedPath, levelIndex);\r\n      console.log(item, this.selectedPath, levelIndex, '==')\r\n      // 如果允许选择任意一级，或者是叶子节点，发送change事件\r\n      if ((this.checkAnyLevel && !this.isClickRight && levelIndex > 0) || !this.hasChildren(item)) {\r\n        this.$emit('change', item[this.valueKey], this.selectedValuePath, this.selectedPath);\r\n        this.$emit('input', this.checkAnyLevel ? this.selectedValuePath : item[this.valueKey]);\r\n      }\r\n      this.isClickRight = false\r\n    },\r\n    \r\n    // 判断是否是激活项\r\n    isActive(item, levelIndex) {\r\n      if (!this.selectedPath || this.selectedPath.length <= levelIndex) {\r\n        return false;\r\n      }\r\n      return item[this.valueKey] === this.selectedPath[levelIndex][this.valueKey];\r\n    },\r\n    \r\n    // 判断是否有子选项\r\n    hasChildren(item) {\r\n      return item[this.childrenKey] && item[this.childrenKey].length > 0;\r\n    },\r\n\r\n    // 检查并设置下一次展开的方向\r\n    checkDirection() {\r\n      this.$nextTick(() => {\r\n        const panelEl = this.$el;\r\n        if (!panelEl) return;\r\n\r\n        const rect = panelEl.getBoundingClientRect();\r\n        const viewportWidth = window.innerWidth;\r\n        \r\n        // 假设每个子面板的平均宽度为 180px (基于 min-width)\r\n        const estimatedNextPanelWidth = 180;\r\n\r\n        // 如果当前面板的右边缘 + 下一个面板的宽度 > 视口宽度\r\n        if (rect.right + estimatedNextPanelWidth > viewportWidth && rect.left > estimatedNextPanelWidth) {\r\n          // 并且左边有足够空间\r\n          if(this.expandDirection !== 'left'){\r\n            this.expandDirection = 'left';\r\n            this.$emit('direction-change', 'left', estimatedNextPanelWidth);\r\n          }\r\n        } else {\r\n          if(this.expandDirection !== 'right'){\r\n            this.expandDirection = 'right';\r\n            this.$emit('direction-change', 'right', estimatedNextPanelWidth);\r\n          }\r\n        }\r\n      });\r\n    },\r\n    \r\n    // 重置组件\r\n    reset() {\r\n      this.selectedPath = [];\r\n      this.selectedValuePath = [];\r\n      this.expandDirection = 'right'; // 重置方向\r\n      this.initPanel();\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.cascade-panel {\r\n  width: 100%;\r\n  background-color: #fff;\r\n  border-radius: 8px;\r\n  box-shadow: 0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 3px 6px -4px rgba(0, 0, 0, 0.12), 0 9px 28px 8px rgba(0, 0, 0, 0.05);\r\n  \r\n  &-container {\r\n    display: flex;\r\n    max-height: 300px;\r\n    overflow: hidden;\r\n\r\n    &.expand-direction-left {\r\n      flex-direction: row-reverse;\r\n\r\n      .cascade-panel-list {\r\n        border-right: none;\r\n        border-left: 1px solid #f0f0f0;\r\n\r\n        &:last-child {\r\n          border-left: none;\r\n        }\r\n\r\n        .item-icon {\r\n          transform: rotate(180deg);\r\n        }\r\n      }\r\n    }\r\n  }\r\n  \r\n  &-list {\r\n    min-width: 180px;\r\n    max-width: 300px;\r\n    border-right: 1px solid #f0f0f0;\r\n    display: flex;\r\n    flex-direction: column;\r\n    \r\n    &:last-child {\r\n      border-right: none;\r\n    }\r\n  }\r\n  \r\n  &-header {\r\n    padding: 8px 12px;\r\n    font-size: 14px;\r\n    color: rgba(0, 0, 0, 0.45);\r\n    border-bottom: 1px solid #f0f0f0;\r\n    background-color: #fafafa;\r\n  }\r\n  \r\n  &-body {\r\n    flex: 1;\r\n    overflow-y: auto;\r\n    max-height: 300px;\r\n    \r\n    &::-webkit-scrollbar {\r\n      width: 6px;\r\n      height: 6px;\r\n    }\r\n    \r\n    &::-webkit-scrollbar-track {\r\n      background-color: #fafafa;\r\n    }\r\n    \r\n    &::-webkit-scrollbar-thumb {\r\n      border-radius: 3px;\r\n      background: #c1c1c1;\r\n    }\r\n  }\r\n  \r\n  &-item {\r\n    padding: 8px 12px;\r\n    cursor: pointer;\r\n    transition: background 0.3s;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    \r\n    &:hover {\r\n      background: rgba(0, 0, 0, 0.04);\r\n    }\r\n    \r\n    &.active {\r\n      background: #e6f7ff;\r\n      color: #1890ff;\r\n      font-weight: 500;\r\n    }\r\n    \r\n    .item-content {\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: space-between;\r\n      width: 100%;\r\n    }\r\n    \r\n    .item-label {\r\n      flex: 1;\r\n      overflow: hidden;\r\n      text-overflow: ellipsis;\r\n      white-space: nowrap;\r\n    }\r\n    \r\n    .item-icon {\r\n      width: 24px;\r\n      color: rgba(0, 0, 0, 0.45);\r\n      text-align: right;\r\n    }\r\n  }\r\n  \r\n  &-empty {\r\n    padding: 16px 12px;\r\n    text-align: center;\r\n    color: rgba(0, 0, 0, 0.45);\r\n    font-size: 14px;\r\n  }\r\n}\r\n</style>","<template>\r\n  <div style=\"width: 100%; position: relative\">\r\n    <div></div>\r\n    <Teleport to=\"body\">\r\n      <div class=\"dropdown-list\" ref=\"dropdownList\" v-if=\"showDropdown\" :style=\"positionStyle\">\r\n        <CascadePanel\r\n          :options=\"showOptions\"\r\n          :checkAnyLevel=\"checkAnyLevel\"\r\n          @change=\"onSelectOption\"\r\n          @direction-change=\"handleDirectionChange\"\r\n        />\r\n      </div>\r\n    </Teleport>\r\n    <div class=\"mention-input-warpper mention-promt-input\" ref=\"JMentionContainer\">\r\n      <div\r\n        ref=\"JMention\"\r\n        :style=\"[inputStyle]\"\r\n        class=\"j-mention\"\r\n        :class=\"[{ 'show-placeholder': localValue.length == 0 }, 'type-' + type]\"\r\n        contenteditable=\"plaintext-only\"\r\n        :placeholder=\"t(placeholder)\"\r\n        @focus=\"onFocus\"\r\n        @input=\"debouncedUpdate\"\r\n        @click=\"clickJMention\"\r\n        @blur=\"handleBlur\"\r\n      ></div>\r\n      <span class=\"placeholder\" v-if=\"localValue.length == 0\">{{ t(placeholder) }}</span>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\nimport CascadePanel from './cascade-panel.vue'\r\n\r\n// 把树状的options抓换成编排的数组\r\nconst getTreeOptions = (options) => {\r\n  let result = []\r\n  options.forEach((opt) => {\r\n    if (opt.children && opt.children.length > 0) {\r\n      result.push(...getTreeOptions(opt.children))\r\n    } else {\r\n      result.push(opt)\r\n    }\r\n  })\r\n  return result\r\n}\r\n\r\nexport default {\r\n  name: 'JMention',\r\n  components: {\r\n    CascadePanel\r\n  },\r\n  inject: [],\r\n  emits: ['input', 'change', 'update:selectedList', 'focus', 'open'],\r\n  props: {\r\n    type: {\r\n      type: String,\r\n      default: 'input', // input, textarea\r\n      validator(value) {\r\n        return ['input', 'textarea'].includes(value)\r\n      }\r\n    },\r\n    placeholder: {\r\n      type: String,\r\n      default: 'ph_input'\r\n    },\r\n    defaultValue: {\r\n      type: [String, Number],\r\n      default: ''\r\n    },\r\n    options: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    defaultSelectedList: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    canRepeat: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    isContain: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    inputStyle: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    checkAnyLevel: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  setup() {\r\n    const { t } = useI18n('views.robot.robot-config.basic-config.components.at-input.index')\r\n    return {\r\n      t\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      timer: null,\r\n      showDropdown: false,\r\n      positionStyle: '',\r\n      selectedList: [],\r\n      selectedIdSet: new Set(),\r\n      showOptions: [],\r\n      atText: '',\r\n      localValue: ''\r\n    }\r\n  },\r\n  watch: {\r\n    defaultValue(val) {\r\n      if (val.trim() != this.localValue.trim()) {\r\n        this.refresh()\r\n      }\r\n    },\r\n    showDropdown(val) {\r\n      this.onOpen(val)\r\n    },\r\n    options() {\r\n      this.initShowOptionList()\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initShowOptionList()\r\n\r\n    document.addEventListener('dragstart', this.handleDragstart)\r\n    document.addEventListener('click', this.handleClick)\r\n    document.addEventListener('scroll', this.onScroll)\r\n\r\n    this.initData()\r\n  },\r\n  beforeUnmount() {\r\n    document.removeEventListener('dragstart', this.handleDragstart)\r\n    document.removeEventListener('click', this.handleClick)\r\n    document.removeEventListener('scroll', this.onScroll)\r\n  },\r\n  methods: {\r\n    handleClick(e) {\r\n      const target = e.target.closest('.dropdown-list')\r\n      if (!target) {\r\n        this.hideDropdownMenus()\r\n      }\r\n    },\r\n    handleDragstart(e) {\r\n      const target = e.target.closest('.dropdown-list')\r\n      if (target) {\r\n        e.preventDefault()\r\n      }\r\n    },\r\n    onScroll() {\r\n      this.hideDropdownMenus()\r\n    },\r\n    hideDropdownMenus() {\r\n      this.showDropdown = false\r\n    },\r\n    onFocus() {\r\n      this.$emit('focus')\r\n    },\r\n    onOpen(val) {\r\n      this.$emit('open', val)\r\n    },\r\n    getText(htmlStr) {\r\n      const div = document.createElement('div')\r\n      div.innerHTML = htmlStr\r\n      let text = ''\r\n      // 遍历子节点\r\n      Array.from(div.childNodes).forEach((node) => {\r\n        let textContent = ''\r\n        if (this.type === 'textarea') {\r\n          // textarea\r\n          if (node.nodeName === 'BR') {\r\n            // 如果是BR节点,直接添加换行\r\n            textContent = '\\n'\r\n          } else {\r\n            if (node.classList && node.classList.contains('j-mention-at')) {\r\n              textContent = node.dataset.value\r\n            } else {\r\n              textContent = node.textContent\r\n            }\r\n          }\r\n        } else {\r\n          // input\r\n          if (node.classList && node.classList.contains('j-mention-at')) {\r\n            textContent = node.dataset.value\r\n          } else if (node.nodeName === 'BR') {\r\n            textContent = ''\r\n          } else {\r\n            textContent = node.textContent.replace(/\\n/g, '')\r\n          }\r\n        }\r\n\r\n        // 去除只有&nbsp;字符的节点\r\n        if (textContent === '&nbsp;' || textContent === ' ') {\r\n          textContent = ''\r\n        }\r\n\r\n        // 拼接文本内容\r\n        text += textContent\r\n      })\r\n\r\n      return text\r\n    },\r\n    onChange() {\r\n      const jMention = this.$refs.JMention\r\n\r\n      if (!jMention) return\r\n\r\n      let htmlStr = jMention.innerHTML\r\n      let text = this.getText(htmlStr)\r\n\r\n      this.localValue = text\r\n\r\n      let selectedListMap = {}\r\n\r\n      this.selectedList.forEach((item) => {\r\n        if (!selectedListMap[item.value] && text.indexOf(item.value) !== -1) {\r\n          selectedListMap[item.value] = item\r\n        }\r\n      })\r\n\r\n      let mySelectedList = Object.values(selectedListMap)\r\n\r\n      this.$emit('change', text.trim(), mySelectedList)\r\n    },\r\n    refresh() {\r\n      this.selectedList = []\r\n      this.selectedIdSet = new Set()\r\n\r\n      this.initShowOptionList()\r\n      this.initData()\r\n    },\r\n    initData() {\r\n      const JMention = this.$refs.JMention\r\n      // let html = this.defaultValue;\r\n      let html = this.defaultValue.toString().replace(/</g, '&lt;').replace(/>/g, '&gt;')\r\n      let defaultSelectedList = this.defaultSelectedList || []\r\n      let treeOptions = getTreeOptions(this.options)\r\n      let selectedList = [...defaultSelectedList, ...treeOptions].filter(\r\n        (item) => item && item.value && item.value != '' && item.typ !== 'node'\r\n      )\r\n\r\n      // 记录已经替换过的的value\r\n      const replacedValues = new Set()\r\n\r\n      selectedList.forEach((opt) => {\r\n        // 使用正则匹配完整的value,避免部分匹配\r\n        const regex = new RegExp(`(${opt.value})`, 'g')\r\n        if (regex.test(this.defaultValue) && !replacedValues.has(opt.value)) {\r\n          // let text = opt.node_name + '.' + opt.text;\r\n\r\n          // text = text.replace(/\\./g, '/')\r\n\r\n          html = html.replace(\r\n            regex,\r\n            `<span class=\"j-mention-at\" data-id=\"${opt.id}\" contentEditable=\"false\" data-value=\"${opt.value}\">${opt.label}</span>`\r\n          )\r\n\r\n          replacedValues.add(opt.value)\r\n\r\n          this.selectOption(opt, true)\r\n        }\r\n      })\r\n\r\n      JMention.innerHTML = html\r\n      this.localValue = this.defaultValue\r\n    },\r\n    initShowOptionList() {\r\n      this.showOptions = this.options.filter((opt) => {\r\n        if (this.atText) {\r\n          return opt.label.startsWith(this.atText)\r\n        }\r\n        if (this.canRepeat) return true\r\n        return !this.selectedIdSet.has(opt.id + '')\r\n      })\r\n    },\r\n    getLastChar(len = 1) {\r\n      const selection = window.getSelection()\r\n      if (selection.rangeCount <= 0) return\r\n      const range = selection.getRangeAt(0)\r\n      const startOffset = range.startOffset\r\n      const startContainer = range.startContainer\r\n      let textBeforeCursor = ''\r\n      if (startContainer.nodeType === Node.TEXT_NODE) {\r\n        textBeforeCursor = startContainer.textContent.slice(0, startOffset)\r\n      } else if (startContainer.nodeType === Node.ELEMENT_NODE) {\r\n        // 若光标在元素节点内，获取其内部文本\r\n        const childNodes = startContainer.childNodes\r\n        for (let i = 0; i < childNodes.length; i++) {\r\n          const node = childNodes[i]\r\n          if (node.nodeType === Node.TEXT_NODE) {\r\n            if (i === childNodes.length - 1) {\r\n              textBeforeCursor += node.textContent.slice(0, startOffset)\r\n            } else {\r\n              textBeforeCursor += node.textContent\r\n            }\r\n          }\r\n        }\r\n      }\r\n      return textBeforeCursor.slice(-len)\r\n    },\r\n    getLastAtText() {\r\n      const selection = window.getSelection()\r\n      if (selection.rangeCount <= 0) return\r\n      const range = selection.getRangeAt(0)\r\n      const startOffset = range.startOffset\r\n      const startContainer = range.startContainer\r\n      let textBeforeCursor = ''\r\n      if (startContainer.nodeType === Node.TEXT_NODE) {\r\n        textBeforeCursor = startContainer.textContent.slice(0, startOffset)\r\n      } else if (startContainer.nodeType === Node.ELEMENT_NODE) {\r\n        // 若光标在元素节点内，获取其内部文本\r\n        const childNodes = startContainer.childNodes\r\n        for (let i = 0; i < childNodes.length; i++) {\r\n          const node = childNodes[i]\r\n          if (node.nodeType === Node.TEXT_NODE) {\r\n            if (i === childNodes.length - 1) {\r\n              textBeforeCursor += node.textContent.slice(0, startOffset)\r\n            } else {\r\n              textBeforeCursor += node.textContent\r\n            }\r\n          }\r\n        }\r\n      }\r\n      const lastAtIndex = textBeforeCursor.lastIndexOf('/')\r\n      if (lastAtIndex === -1) return ''\r\n      return textBeforeCursor.slice(lastAtIndex + 1)\r\n    },\r\n    async getCaretPosition() {\r\n      // const JMention = this.$refs.JMention;\r\n      const selection = window.getSelection()\r\n      if (selection.rangeCount <= 0) return { top: 0, left: 0 }\r\n      const range = selection.getRangeAt(0)\r\n      const rect = range.getBoundingClientRect()\r\n      const dropdownListRect = await this.getDropdownListSize()\r\n      const viewportWidth = window.innerWidth\r\n      const viewportHeight = window.innerHeight\r\n\r\n      let top = rect.bottom\r\n      let left = rect.left\r\n\r\n      // 自动垂直定位：如果下方空间不足，则移动到上方\r\n      if (top + dropdownListRect.height > viewportHeight) {\r\n        top = rect.top - dropdownListRect.height\r\n      }\r\n\r\n      // 自动水平定位：如果右侧空间不足，则向左对齐\r\n      if (left + dropdownListRect.width > viewportWidth) {\r\n        left = rect.right - dropdownListRect.width\r\n      }\r\n\r\n      // 确保不会超出视口顶部和左部\r\n      if (top < 0) {\r\n        top = 0\r\n      }\r\n      if (left < 0) {\r\n        left = 0\r\n      }\r\n\r\n      return {\r\n        top,\r\n        left\r\n      }\r\n    },\r\n    async getDropdownListSize() {\r\n      this.showDropdown = true // 临时显示元素\r\n      await this.$nextTick() // 等待 DOM 更新\r\n      const width = this.$refs.dropdownList.offsetWidth\r\n      const height = this.$refs.dropdownList.offsetHeight\r\n      this.showDropdown = false // 恢复隐藏\r\n      return { width, height }\r\n    },\r\n    updateSelectedList() {\r\n      const JMention = this.$refs.JMention\r\n      const nodeList = JMention.querySelectorAll('.j-mention-at')\r\n      this.selectedList = []\r\n      this.selectedIdSet = new Set()\r\n\r\n      for (const node of nodeList) {\r\n        // const { value } = node.dataset;\r\n        let value = node.dataset.value\r\n        const item = this.options.find((opt) => {\r\n          return opt.value == value\r\n        })\r\n\r\n        this.selectedList.push(item)\r\n        this.selectedIdSet.add(value)\r\n      }\r\n      this.$emit('update:selectedList', this.selectedList)\r\n      if (nodeList.length === this.selectedList.length && !this.atText && !this.showDropdown) {\r\n        return\r\n      }\r\n\r\n      this.initShowOptionList()\r\n    },\r\n    checkStartWith(text) {\r\n      const list = this.options.filter((opt) => {\r\n        return opt.label.startsWith(text)\r\n      })\r\n      return list.length > 0\r\n    },\r\n    updateValue() {\r\n      this.onChange()\r\n    },\r\n    clickJMention() {\r\n      if (this.showDropdown) {\r\n        this.showDropdown = false\r\n      }\r\n    },\r\n    debouncedUpdate(e) {\r\n      // 1. 优先处理下拉菜单的UI逻辑，这需要实时响应\r\n      this.handleDropdownLogic(e)\r\n\r\n      // 2. 将数据更新操作放入防抖函数中\r\n      // 清除上一个计时器\r\n      if (this.timer) {\r\n        clearTimeout(this.timer)\r\n      }\r\n      // 设置一个新的计时器，在用户停止输入200ms后执行 updateValue\r\n      this.timer = setTimeout(() => {\r\n        this.updateValue()\r\n      }, 350)\r\n    },\r\n    handleBlur() {\r\n      // 当输入框失焦时，为了确保数据最终被同步，立即执行一次 updateValue\r\n      // 同时清除可能存在的防抖计时器，避免重复执行\r\n      if (this.timer) {\r\n        clearTimeout(this.timer)\r\n      }\r\n      this.updateValue()\r\n    },\r\n    async handleDropdownLogic(e) {\r\n      // 获取光标前的最后一个字符。此操作依赖于当前的DOM状态，应在任何DOM修改前执行。\r\n      const lastChar = this.getLastChar()\r\n\r\n      // --- 场景1: 用户执行删除操作 ---\r\n      if (e.inputType === 'deleteContentBackward' && !this.atText) {\r\n        if (lastChar != '/') {\r\n          this.showDropdown = false\r\n        }\r\n      } else {\r\n        // --- 场景2: 用户输入'/'，触发提及功能 ---\r\n        if (lastChar === '/') {\r\n          this.showDropdown = true\r\n          this.atText = ''\r\n        } else {\r\n          // --- 场景3: 用户在'/'后输入文本，进行筛选 ---\r\n          const text = this.getLastAtText()\r\n          this.atText = text\r\n          const isExistStartWith = this.checkStartWith(text)\r\n          if (text) {\r\n            this.showDropdown = isExistStartWith\r\n          }\r\n        }\r\n      }\r\n\r\n      // 如果不显示下拉菜单，则提前退出定位逻辑\r\n      if (!this.showDropdown) {\r\n        return\r\n      }\r\n\r\n      // --- 定位并最终显示下拉菜单 ---\r\n      const { top, left } = await this.getCaretPosition()\r\n      this.showDropdown = true\r\n      this.positionStyle = `left:${left}px; top:${top}px;`\r\n    },\r\n    insertAtCaret(text, dataSet) {\r\n      let len = this.atText.length + 1\r\n      const lastChar = this.getLastChar(len)\r\n      if (lastChar !== '/' + this.atText) len = 0\r\n      const selection = window.getSelection()\r\n      if (selection.rangeCount <= 0) return\r\n      const range = selection.getRangeAt(0)\r\n      const startOffset = range.startOffset\r\n      const startContainer = range.startContainer\r\n\r\n      let prevCharOffset = startOffset - len\r\n      let prevCharNode = startContainer\r\n      if (prevCharOffset < 0) {\r\n        // 如果当前节点没有前一个字符，查找前一个兄弟节点\r\n        let prevSibling = startContainer.previousSibling\r\n        while (prevSibling) {\r\n          if (prevSibling.nodeType === Node.TEXT_NODE) {\r\n            prevCharOffset = prevSibling.textContent.length - len\r\n            prevCharNode = prevSibling\r\n            break\r\n          }\r\n          prevSibling = prevSibling.previousSibling\r\n        }\r\n      }\r\n\r\n      if (prevCharNode.nodeType === Node.TEXT_NODE) {\r\n        // 将触发词替换为空字符串，而不是空格，以避免在span后留下多余的空格\r\n        prevCharNode.replaceData(prevCharOffset, len, '')\r\n\r\n        // 创建 span 标签\r\n        const span = document.createElement('span')\r\n        span.contentEditable = 'false'\r\n        span.classList.add('j-mention-at')\r\n        span.style = this.atTextStyle\r\n        span.textContent = `${text}`\r\n\r\n        // const tmp = document.createElement(\"span\");\r\n        // tmp.contentEditable = true;\r\n        // tmp.innerHTML += \"&nbsp;\";\r\n        // tmp.classList.add(\"at-space\");\r\n\r\n        for (const key in dataSet) {\r\n          span.dataset[key] = dataSet[key]\r\n        }\r\n\r\n        // 在原字符位置插入 span 标签\r\n        const newRange = document.createRange()\r\n        newRange.setStart(prevCharNode, prevCharOffset)\r\n        newRange.insertNode(span)\r\n        // newRange.insertNode(tmp);\r\n\r\n        // 将光标移动到 span 元素外部\r\n        // 将光标移动到 span 元素之后\r\n        range.setStartAfter(span)\r\n        range.setEndAfter(span)\r\n\r\n        selection.removeAllRanges()\r\n        selection.addRange(range)\r\n      }\r\n    },\r\n    onSelectOption(value, selectedValuePath, selectedPath) {\r\n      let item = selectedPath[selectedPath.length - 1]\r\n      delete item['children']\r\n      this.selectOption(item)\r\n    },\r\n    selectOption(opt, isInit = false) {\r\n      if (!opt) return\r\n      // 处理用户选择逻辑\r\n      this.showDropdown = false\r\n\r\n      // let text = opt.node_name + '.' + opt.text;\r\n\r\n      let text = opt.label\r\n\r\n      const dataSet = {\r\n        id: opt.id,\r\n        label: opt.label,\r\n        value: opt.value,\r\n        text: opt.text,\r\n        index: this.selectedList.length\r\n      }\r\n\r\n      this.selectedList.push(opt)\r\n      this.selectedIdSet.add(opt.value)\r\n\r\n      if (!isInit) {\r\n        this.insertAtCaret(text, dataSet)\r\n        this.initShowOptionList()\r\n        // 在插入提及内容后，立即更新值以确保数据同步\r\n        this.updateValue()\r\n      }\r\n    },\r\n\r\n    handleDirectionChange(direction, width) {\r\n      const leftMatch = this.positionStyle.match(/left:\\s*(-?\\d+\\.?\\d*)px/)\r\n      const topMatch = this.positionStyle.match(/top:\\s*(-?\\d+\\.?\\d*)px/)\r\n\r\n      if (!leftMatch || !topMatch) return\r\n\r\n      const currentLeft = parseFloat(leftMatch[1])\r\n      const currentTop = parseFloat(topMatch[1])\r\n      let newLeft\r\n\r\n      if (direction === 'left') {\r\n        newLeft = currentLeft - width\r\n      } else {\r\n        newLeft = currentLeft + width\r\n      }\r\n\r\n      this.positionStyle = `left:${newLeft}px; top:${currentTop}px;`\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"less\">\r\n.mention-promt-input .j-mention-at {\r\n  border-radius: 6px;\r\n  padding: 1px 8px;\r\n  border: 1px solid #00000026;\r\n  background: #fff;\r\n  user-select: text;\r\n  -webkit-user-select: text;\r\n  -moz-user-select: text;\r\n  -ms-user-select: text;\r\n  margin-right: 6px;\r\n}\r\n</style>\r\n<style lang=\"less\" scoped>\r\n.mention-input-warpper {\r\n  position: relative;\r\n  overflow: hidden;\r\n  border-radius: 6px;\r\n  padding: 4px 8px;\r\n  border: 1px solid #d9d9d9;\r\n  background: #fff;\r\n\r\n  &:hover {\r\n    border: 1px solid #409eff;\r\n  }\r\n\r\n  &:focus {\r\n    border-color: #4d94ff;\r\n    box-shadow: 0 0 0 2px rgba(5, 138, 255, 0.06);\r\n    border-inline-end-width: 1px;\r\n    outline: 0;\r\n  }\r\n}\r\n.j-mention {\r\n  position: relative;\r\n  overflow: scroll;\r\n  width: 100%;\r\n  line-height: 24px;\r\n  min-height: 24px;\r\n  outline: none;\r\n  background: #fff;\r\n\r\n  &.type-input {\r\n    overflow-y: hidden;\r\n    overflow-x: scroll;\r\n    white-space: nowrap;\r\n  }\r\n\r\n  &.type-textarea {\r\n    white-space: pre-wrap;\r\n    word-wrap: break-word;\r\n    min-height: 64px;\r\n  }\r\n\r\n  &::-webkit-scrollbar {\r\n    width: 0px;\r\n    height: 0px;\r\n  }\r\n\r\n  /*定义滚动条轨道 内阴影+圆角*/\r\n  &::-webkit-scrollbar-track {\r\n    border-radius: 0px;\r\n    background-color: #fafafa;\r\n  }\r\n\r\n  /*定义滑块 内阴影+圆角*/\r\n  &::-webkit-scrollbar-thumb {\r\n    border-radius: 0px;\r\n    background: rgb(191, 191, 191);\r\n  }\r\n}\r\n.placeholder {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  line-height: 24px;\r\n  overflow: hidden;\r\n  padding: 4px 8px;\r\n  color: #bfbfbf;\r\n  pointer-events: none;\r\n  user-select: none;\r\n}\r\n.dropdown-list {\r\n  position: fixed;\r\n  padding: 0;\r\n  margin: 0;\r\n  background-color: #fff;\r\n  z-index: 999999;\r\n  min-width: 180px;\r\n  overflow: hidden;\r\n  user-select: none;\r\n  border-radius: 8px;\r\n  box-shadow:\r\n    0 6px 16px 0 rgba(0, 0, 0, 0.08),\r\n    0 3px 6px -4px rgba(0, 0, 0, 0.12),\r\n    0 9px 28px 8px rgba(0, 0, 0, 0.05);\r\n\r\n  .dropdown-list-nodata {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    height: 100%;\r\n    font-size: 13px;\r\n    padding: 8px;\r\n  }\r\n\r\n  .dropdown-list-item {\r\n    padding: 8px;\r\n    cursor: pointer;\r\n    background: #fff;\r\n\r\n    &:hover {\r\n      background-color: rgba(0, 0, 0, 0.04) !important;\r\n    }\r\n\r\n    &.active {\r\n      background-color: rgba(0, 0, 0, 0.09) !important;\r\n    }\r\n  }\r\n\r\n  &::-webkit-scrollbar {\r\n    width: 0px;\r\n    height: 0px;\r\n  }\r\n\r\n  /*定义滚动条轨道 内阴影+圆角*/\r\n  &::-webkit-scrollbar-track {\r\n    border-radius: 0px;\r\n    background-color: #fafafa;\r\n  }\r\n\r\n  /*定义滑块 内阴影+圆角*/\r\n  &::-webkit-scrollbar-thumb {\r\n    border-radius: 0px;\r\n    background: rgb(191, 191, 191);\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"prompt-box\">\r\n    <div class=\"tab-header\">\r\n      <a-tabs style=\"width: 400px;\" v-model:activeKey=\"prompt_type\">\r\n        <a-tab-pane :key=\"1\" :tab=\"t('tab_structured')\"></a-tab-pane>\r\n        <a-tab-pane :key=\"0\" :tab=\"t('tab_custom')\"></a-tab-pane>\r\n      </a-tabs>\r\n      <div class=\"opt-block\" v-if=\"isEdit\">\r\n        <a-tooltip>\r\n          <template #title>{{ t('tooltip_upload') }}</template>\r\n          <div class=\"hover-btn-box\" style=\"color: #6524fc\" @click=\"onShowUpPromptModal\">\r\n            <ToTopOutlined />{{ t('btn_upload') }}\r\n          </div>\r\n        </a-tooltip>\r\n        <a-tooltip>\r\n          <template #title>{{ t('tooltip_import') }}</template>\r\n          <div class=\"hover-btn-box\" style=\"color: #6524fc\" @click=\"onShowAddPromptModal\">\r\n            <DownloadOutlined />{{ t('btn_import') }}\r\n          </div>\r\n        </a-tooltip>\r\n\r\n        <div class=\"ai-mark-box hover-btn-box\" @click=\"onShowAiCreateModal\">\r\n          <svg-icon name=\"ai-mark\" />\r\n          {{ t('btn_ai_generate') }}\r\n        </div>\r\n\r\n        <a-flex :gap=\"8\">\r\n          <a-button size=\"small\" type=\"primary\" @click=\"onSave\">{{ t('btn_save') }}</a-button>\r\n          <a-button size=\"small\" @click=\"onCancel\">{{ t('btn_cancel') }}</a-button>\r\n        </a-flex>\r\n      </div>\r\n      <div class=\"opt-block\" v-else>\r\n        <span class=\"tip-text\"\r\n          >{{ t('msg_current_type') }}{{ currentPromptType == 1 ? t('msg_structured_prompt') : t('msg_custom_prompt') }}</span\r\n        >\r\n        <a-button size=\"small\" @click=\"handleEdit\">{{ t('btn_edit') }}</a-button>\r\n      </div>\r\n    </div>\r\n    <div class=\"prompt-list-box\" v-if=\"prompt_type == 1\">\r\n      <!-- 角色 -->\r\n      <div class=\"prompt-list\">\r\n        <div class=\"prompt-header\">\r\n          <div class=\"prompt-title\">{{ formState.prompt_struct.role.subject }}</div>\r\n          <div class=\"btn-wrapper-box\" v-if=\"isEdit\">\r\n            <a @click=\"handleReset('role')\">{{ t('btn_reset_default') }}</a>\r\n          </div>\r\n        </div>\r\n        <div class=\"prompt-content\">\r\n          <a-textarea\r\n            :bordered=\"false\"\r\n            :disabled=\"!isEdit\"\r\n            v-model:value=\"formState.prompt_struct.role.describe\"\r\n            :placeholder=\"t('ph_role')\"\r\n          />\r\n        </div>\r\n      </div>\r\n      <!-- 任务 -->\r\n      <div class=\"prompt-list\">\r\n        <div class=\"prompt-header\">\r\n          <div class=\"prompt-title\">{{ formState.prompt_struct.task.subject }}</div>\r\n          <div class=\"btn-wrapper-box\" v-if=\"isEdit\">\r\n            <a @click=\"handleReset('task')\">{{ t('btn_reset_default') }}</a>\r\n          </div>\r\n        </div>\r\n        <div class=\"prompt-content\">\r\n          <a-textarea\r\n            :bordered=\"false\"\r\n            :disabled=\"!isEdit\"\r\n            v-model:value=\"formState.prompt_struct.task.describe\"\r\n            :placeholder=\"t('ph_task')\"\r\n          />\r\n        </div>\r\n      </div>\r\n      <template v-if=\"isHide\">\r\n        <!-- 要求 -->\r\n        <div class=\"prompt-list\">\r\n          <div class=\"prompt-header\">\r\n            <div class=\"prompt-title\">{{ formState.prompt_struct.constraints.subject }}</div>\r\n            <div class=\"btn-wrapper-box\" v-if=\"isEdit\">\r\n              <a @click=\"handleReset('constraints')\">{{ t('btn_reset_default') }}</a>\r\n            </div>\r\n          </div>\r\n          <div class=\"prompt-content\">\r\n            <a-textarea\r\n              :bordered=\"false\"\r\n              :disabled=\"!isEdit\"\r\n              v-model:value=\"formState.prompt_struct.constraints.describe\"\r\n              :placeholder=\"t('ph_constraints')\"\r\n              style=\"min-height: 130px\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <!-- 技能 -->\r\n        <div class=\"prompt-list\">\r\n          <div class=\"prompt-header\">\r\n            <div class=\"prompt-title\">{{ formState.prompt_struct.skill.subject }}</div>\r\n            <div class=\"btn-wrapper-box\" v-if=\"isEdit\">\r\n              <a @click=\"handleImportSkill()\">{{ t('btn_import_skill') }}</a>\r\n            </div>\r\n          </div>\r\n          <div class=\"prompt-content\">\r\n            <a-textarea\r\n              :bordered=\"false\"\r\n              :disabled=\"!isEdit\"\r\n              v-model:value=\"formState.prompt_struct.skill.describe\"\r\n              :placeholder=\"t('ph_skill')\"\r\n              style=\"min-height: 80px\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <!-- 输出格式 -->\r\n        <div class=\"prompt-list\">\r\n          <div class=\"prompt-header\">\r\n            <div class=\"prompt-title\">{{ formState.prompt_struct.output.subject }}</div>\r\n            <div class=\"btn-wrapper-box\" v-if=\"isEdit\">\r\n              <div class=\"swich-item\">\r\n                {{ t('label_output_markdown') }}\r\n                <a-switch\r\n                  @change=\"(val) => handleChangeSwitch(val, 'outSwitch')\"\r\n                  v-model:checked=\"outSwitch\"\r\n                  :checked-children=\"t('switch_on')\"\r\n                  :un-checked-children=\"t('switch_off')\"\r\n                />\r\n              </div>\r\n              <div class=\"swich-item\">\r\n                {{ t('label_reply_image') }}\r\n                <a-switch\r\n                  @change=\"(val) => handleChangeSwitch(val, 'imgSwitch')\"\r\n                  v-model:checked=\"imgSwitch\"\r\n                  :checked-children=\"t('switch_on')\"\r\n                  :un-checked-children=\"t('switch_off')\"\r\n                />\r\n              </div>\r\n              <a @click=\"handleReset('output')\">{{ t('btn_reset_default') }}</a>\r\n            </div>\r\n          </div>\r\n          <div class=\"prompt-content\">\r\n            <a-textarea\r\n              :bordered=\"false\"\r\n              :disabled=\"!isEdit\"\r\n              v-model:value=\"formState.prompt_struct.output.describe\"\r\n              :placeholder=\"t('ph_output')\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <!-- 风格 -->\r\n        <div class=\"prompt-list\">\r\n          <div class=\"prompt-header\">\r\n            <div class=\"prompt-title\">{{ formState.prompt_struct.tone.subject }}</div>\r\n            <div class=\"btn-wrapper-box\" v-if=\"isEdit\">\r\n              <a @click=\"handleReset('tone')\">{{ t('btn_reset_default') }}</a>\r\n            </div>\r\n          </div>\r\n          <div class=\"prompt-content\">\r\n            <a-textarea\r\n              :bordered=\"false\"\r\n              :disabled=\"!isEdit\"\r\n              v-model:value=\"formState.prompt_struct.tone.describe\"\r\n              :placeholder=\"t('ph_tone')\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <!-- 自定义 -->\r\n        <div\r\n          class=\"prompt-list\"\r\n          v-for=\"(item, index) in formState.prompt_struct.custom\"\r\n          :key=\"index + item.key ? item.key : ''\"\r\n        >\r\n          <div class=\"prompt-header\">\r\n            <div class=\"prompt-title\" style=\"flex: 1\">\r\n              <a-input\r\n                :bordered=\"false\"\r\n                :disabled=\"!isEdit\"\r\n                style=\"width: 100%\"\r\n                v-model:value=\"item.subject\"\r\n                :placeholder=\"t('ph_input_subject')\"\r\n              ></a-input>\r\n            </div>\r\n            <div class=\"btn-wrapper-box\" v-if=\"isEdit\">\r\n              <div class=\"hover-btn-box\" @click=\"handleDeleteTheme(index)\">\r\n                <CloseCircleOutlined />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"prompt-content\">\r\n            <a-textarea\r\n              :bordered=\"false\"\r\n              :disabled=\"!isEdit\"\r\n              v-model:value=\"item.describe\"\r\n              :placeholder=\"t('ph_input')\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div class=\"add-theme-block\" v-if=\"isEdit\">\r\n          <a-button @click=\"handleAddTheme\" block :icon=\"h(PlusOutlined)\">{{ t('btn_add_theme') }}</a-button>\r\n        </div>\r\n      </template>\r\n      <div class=\"show-more-block\">\r\n        <div class=\"btn-item\" @click=\"handleShowMore\">\r\n          <template v-if=\"!isHide\">{{ t('btn_expand') }}<DownOutlined /></template>\r\n          <template v-else>{{ t('btn_collapse') }}<UpOutlined /></template>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"diy-prompt-box\" :class=\"{ 'is-disabled': !isEdit }\" v-else>\r\n      <a-flex align=\"center\" justify=\"space-between\" v-if=\"isEdit\" style=\"margin: 8px 0\">\r\n        <div style=\"color: #8c8c8c\">\r\n          {{ t('msg_var_insert_tip') }}\r\n        </div>\r\n        <div class=\"diy-switch-box\">\r\n          <div class=\"swich-item\">\r\n            {{ t('label_output_markdown') }}\r\n            <a-switch\r\n              @change=\"(val) => handleDiyChangeSwitch(val, 'outDiySwitch')\"\r\n              v-model:checked=\"outDiySwitch\"\r\n              :checked-children=\"t('switch_on')\"\r\n              :un-checked-children=\"t('switch_off')\"\r\n            />\r\n          </div>\r\n          <div class=\"swich-item\">\r\n            {{ t('label_reply_image') }}\r\n            <a-switch\r\n              @change=\"(val) => handleDiyChangeSwitch(val, 'imgDiySwitch')\"\r\n              v-model:checked=\"imgDiySwitch\"\r\n              :checked-children=\"t('switch_on')\"\r\n              :un-checked-children=\"t('switch_off')\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </a-flex>\r\n\r\n      <AtInput\r\n        type=\"textarea\"\r\n        inputStyle=\"height: 126px\"\r\n        :defaultValue=\"formState.prompt\"\r\n        :options=\"chatVariables\"\r\n        :disabled=\"true\"\r\n        :checkAnyLevel=\"true\"\r\n        ref=\"atinputRef\"\r\n        @change=\"(text, selectedList) => changeValue(text, selectedList)\"\r\n      >\r\n        <template #option=\"{ label, payload }\">\r\n          <div class=\"field-list-item\">\r\n            <div class=\"field-label\">{{ label }}</div>\r\n            <div class=\"field-type\">{{ payload.typ }}</div>\r\n          </div>\r\n        </template>\r\n      </AtInput>\r\n    </div>\r\n    <AiCreatePrompt @handleAiSave=\"handleAiSave\" ref=\"aiCreatePromptRef\" />\r\n    <ImportPrompt @ok=\"handleSavePrompt\" ref=\"importPromptRef\" />\r\n    <UploadPrompt ref=\"uploadPromptRef\" />\r\n  </div>\r\n</template>\r\n<script setup>\r\nimport { ref, reactive, computed, inject, toRaw, watch, h } from 'vue'\r\nimport {\r\n  PlusOutlined,\r\n  CloseCircleOutlined,\r\n  DownOutlined,\r\n  UpOutlined,\r\n  ToTopOutlined,\r\n  DownloadOutlined\r\n} from '@ant-design/icons-vue'\r\nimport AiCreatePrompt from './ai-create-prompt.vue'\r\nimport ImportPrompt from '@/components/import-prompt/index.vue'\r\nimport UploadPrompt from '@/components/import-prompt/upload-prompt.vue'\r\nimport AtInput from './at-input/index.vue'\r\nimport { useRobotStore } from '@/stores/modules/robot'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.robot.robot-config.basic-config.components.system-prompt-words')\r\nconst robotStore = useRobotStore()\r\nconst isEdit = ref(false)\r\nconst { robotInfo, updateRobotInfo } = inject('robotInfo')\r\nconst props = defineProps({\r\n  robotList: {\r\n    type: Array,\r\n    default: () => []\r\n  }\r\n})\r\n\r\nconst PromptDefaultReplyMarkdown = t('prompt_default_reply_markdown')\r\nconst PromptDefaultAnswerImage = t('prompt_default_answer_image')\r\n\r\nconst prompt_struct_default = ref({})\r\n\r\nconst outSwitch = ref(false)\r\nconst imgSwitch = ref(false)\r\n\r\nconst outDiySwitch = ref(false)\r\nconst imgDiySwitch = ref(false)\r\n\r\nconst atinputRef = ref(null)\r\n\r\nconst chatVariables = computed(() => {\r\n  let list = robotStore.chatVariables\r\n  return list.map((item) => {\r\n    let label = item.variable_key + '（' + item.variable_name + '）'\r\n    let value = `【chat_variable:${item.variable_key}】`\r\n    return {\r\n      ...item,\r\n      label,\r\n      value\r\n    }\r\n  })\r\n})\r\n\r\nwatch(\r\n  () => chatVariables,\r\n  () => {\r\n    setTimeout(() => {\r\n      atinputRef.value && atinputRef.value.refresh()\r\n    }, 500)\r\n  },\r\n  {\r\n    deep: true\r\n  }\r\n)\r\n\r\nconst changeValue = (text, selectedList) => {\r\n  formState.prompt = text\r\n}\r\n\r\nconst formState = reactive({\r\n  prompt: '',\r\n  prompt_struct: {\r\n    role: {\r\n      subject: '',\r\n      describe: ''\r\n    },\r\n    task: {\r\n      subject: '',\r\n      describe: ''\r\n    },\r\n    constraints: {\r\n      subject: '',\r\n      describe: ''\r\n    },\r\n    skill: {\r\n      subject: '',\r\n      describe: ''\r\n    },\r\n    output: {\r\n      subject: '',\r\n      describe: ''\r\n    },\r\n    tone: {\r\n      subject: '',\r\n      describe: ''\r\n    },\r\n    custom: []\r\n  }\r\n})\r\n\r\nconst isHide = ref(localStorage.getItem('system_prompt_words_ishide') == '1')\r\n\r\nconst handleShowMore = () => {\r\n  isHide.value = !isHide.value\r\n  localStorage.setItem('system_prompt_words_ishide', isHide.value ? 1 : 0)\r\n}\r\n\r\nconst checkStringContains = (str, searchStr) => {\r\n  // 使用 includes 方法判断\r\n  return str.includes(searchStr)\r\n}\r\n\r\nconst prompt_type = ref(robotInfo.prompt_type)\r\nconst currentPromptType = computed(() => robotInfo.prompt_type)\r\n\r\nwatch(\r\n  () => robotInfo,\r\n  () => {\r\n    formState.prompt = robotInfo.prompt\r\n    formState.prompt_struct = robotInfo.prompt_struct\r\n    prompt_struct_default.value = robotInfo.prompt_struct_default\r\n    // prompt_type.value = robotInfo.prompt_type\r\n  },\r\n  { immediate: true, deep: true }\r\n)\r\n\r\nwatch(\r\n  () => formState.prompt_struct.output.describe,\r\n  (val) => {\r\n    outSwitch.value = checkStringContains(val, PromptDefaultReplyMarkdown)\r\n    imgSwitch.value = checkStringContains(val, PromptDefaultAnswerImage)\r\n  },\r\n  { immediate: true, deep: true }\r\n)\r\n\r\nwatch(\r\n  () => formState.prompt,\r\n  (val) => {\r\n    outDiySwitch.value = checkStringContains(val, PromptDefaultReplyMarkdown)\r\n    imgDiySwitch.value = checkStringContains(val, PromptDefaultAnswerImage)\r\n  },\r\n  { immediate: true, deep: true }\r\n)\r\n\r\nconst handleChangeSwitch = (val, key) => {\r\n  if (val) {\r\n    if (key == 'outSwitch') {\r\n      if (formState.prompt_struct.output.describe) {\r\n        formState.prompt_struct.output.describe += '\\n' + PromptDefaultReplyMarkdown\r\n      } else {\r\n        formState.prompt_struct.output.describe += PromptDefaultReplyMarkdown\r\n      }\r\n    }\r\n    if (key == 'imgSwitch') {\r\n      if (formState.prompt_struct.output.describe) {\r\n        formState.prompt_struct.output.describe += '\\n' + PromptDefaultAnswerImage\r\n      } else {\r\n        formState.prompt_struct.output.describe += PromptDefaultAnswerImage\r\n      }\r\n    }\r\n  } else {\r\n    if (key == 'outSwitch') {\r\n      formState.prompt_struct.output.describe = formState.prompt_struct.output.describe.replace(\r\n        new RegExp(PromptDefaultReplyMarkdown, 'g'),\r\n        ''\r\n      )\r\n    }\r\n    if (key == 'imgSwitch') {\r\n      formState.prompt_struct.output.describe = formState.prompt_struct.output.describe.replace(\r\n        new RegExp(PromptDefaultAnswerImage, 'g'),\r\n        ''\r\n      )\r\n    }\r\n    formState.prompt_struct.output.describe = formState.prompt_struct.output.describe.trim()\r\n  }\r\n}\r\n\r\nconst handleDiyChangeSwitch = (val, key) => {\r\n  if (val) {\r\n    if (key == 'outDiySwitch') {\r\n      if (formState.prompt) {\r\n        formState.prompt += '\\n' + PromptDefaultReplyMarkdown\r\n      } else {\r\n        formState.prompt += PromptDefaultReplyMarkdown\r\n      }\r\n    }\r\n    if (key == 'imgDiySwitch') {\r\n      if (formState.prompt) {\r\n        formState.prompt += '\\n' + PromptDefaultAnswerImage\r\n      } else {\r\n        formState.prompt += PromptDefaultAnswerImage\r\n      }\r\n    }\r\n  } else {\r\n    if (key == 'outDiySwitch') {\r\n      formState.prompt = formState.prompt.replace(new RegExp(PromptDefaultReplyMarkdown, 'g'), '')\r\n    }\r\n    if (key == 'imgDiySwitch') {\r\n      formState.prompt = formState.prompt.replace(new RegExp(PromptDefaultAnswerImage, 'g'), '')\r\n    }\r\n    formState.prompt = formState.prompt.trim()\r\n  }\r\n}\r\n\r\nconst handleReset = (key) => {\r\n  formState.prompt_struct[key].describe = prompt_struct_default.value[key].describe\r\n}\r\n\r\nconst handleImportSkill = () => {\r\n  // {{ t('comment_import_skill') }}\r\n  let work_flow_ids = robotInfo.work_flow_ids.split(',')\r\n  let selectRobotList = props.robotList.filter((item) => {\r\n    return work_flow_ids.includes(item.id)\r\n  })\r\n  let skill_str = []\r\n  skill_str = selectRobotList\r\n    .map((item) => {\r\n      return `- ${item.robot_name} ${item.robot_intro}`\r\n    })\r\n    .join('\\n')\r\n  formState.prompt_struct['skill'].describe = skill_str\r\n}\r\n\r\nconst handleAddTheme = () => {\r\n  formState.prompt_struct.custom.push({\r\n    subject: '',\r\n    describe: '',\r\n    key: Math.random() * 10000\r\n  })\r\n  prompt_type.value = 1\r\n}\r\n\r\nconst handleDeleteTheme = (index) => {\r\n  formState.prompt_struct.custom.splice(index, 1)\r\n}\r\n\r\nconst onSave = () => {\r\n  updateRobotInfo({\r\n    ...toRaw(formState),\r\n    prompt_type: prompt_type.value\r\n  })\r\n  isEdit.value = false\r\n}\r\n\r\nconst handleAiSave = (prompt_struct) => {\r\n  prompt_type.value = 1\r\n  updateRobotInfo({\r\n    prompt_type: prompt_type.value,\r\n    prompt: formState.prompt,\r\n    prompt_struct\r\n  })\r\n  isEdit.value = false\r\n}\r\n\r\nconst handleEdit = () => {\r\n  // prompt_type.value = robotInfo.prompt_type\r\n  prompt_type.value == 0 && atinputRef.value && atinputRef.value.refresh()\r\n  isEdit.value = true\r\n}\r\n\r\nconst onCancel = () => {\r\n  isEdit.value = false\r\n}\r\n\r\nconst aiCreatePromptRef = ref(null)\r\nconst onShowAiCreateModal = () => {\r\n  aiCreatePromptRef.value.show()\r\n}\r\n\r\nconst importPromptRef = ref(null)\r\n\r\nconst onShowAddPromptModal = () => {\r\n  importPromptRef.value.show()\r\n}\r\n\r\nconst uploadPromptRef = ref(null)\r\nconst onShowUpPromptModal = () => {\r\n  uploadPromptRef.value.show({\r\n    ...formState,\r\n    prompt_type: prompt_type.value\r\n  })\r\n}\r\n\r\nconst handleSavePrompt = (item) => {\r\n  if (item.prompt_type == 1) {\r\n    prompt_type.value = 1\r\n    formState.prompt_struct = item.prompt_struct\r\n  } else {\r\n    prompt_type.value = 0\r\n    formState.prompt = item.prompt\r\n  }\r\n  onSave()\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.prompt-box {\r\n  border-radius: 6px;\r\n  background: var(--09, #f2f4f7);\r\n  padding: 16px;\r\n  .tab-header {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n  }\r\n  .opt-block {\r\n    display: flex;\r\n    gap: 8px;\r\n    .tip-text {\r\n      color: #8c8c8c;\r\n      line-height: 22px;\r\n      font-size: 12px;\r\n    }\r\n    .hover-btn-box {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 4px;\r\n      padding: 0 6px;\r\n      width: fit-content;\r\n      cursor: pointer;\r\n      &:hover {\r\n        background: #e4e6eb;\r\n        border-radius: 6px;\r\n      }\r\n    }\r\n  }\r\n  .ai-mark-box {\r\n    cursor: pointer;\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 4px;\r\n    color: #6524fc;\r\n    font-size: 14px;\r\n    line-height: 22px;\r\n  }\r\n  ::v-deep(.ant-tabs-nav-wrap) {\r\n    padding-left: 0;\r\n  }\r\n  ::v-deep(.ant-tabs-nav) {\r\n    margin: 0;\r\n    .ant-tabs-tab {\r\n      padding-top: 0;\r\n    }\r\n    &::before {\r\n      border: none;\r\n    }\r\n  }\r\n}\r\n\r\n.show-more-block {\r\n  padding-top: 8px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: #595959;\r\n  .btn-item {\r\n    width: fit-content;\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 4px;\r\n    height: 24px;\r\n    padding: 0 8px;\r\n    border-radius: 6px;\r\n    cursor: pointer;\r\n    &:hover {\r\n      background: #e4e6eb;\r\n    }\r\n  }\r\n}\r\n\r\n.prompt-list-box {\r\n  .prompt-list {\r\n    border: 1px solid var(--06, #d9d9d9);\r\n    background: #fff;\r\n    border-radius: 6px;\r\n    margin-bottom: 8px;\r\n    padding: 9px 12px;\r\n    &:focus-within {\r\n      border: 1px solid #2475fc;\r\n      box-shadow: 0 0 0 2px rgba(5, 145, 255, 0.1);\r\n    }\r\n    textarea {\r\n      padding: 0;\r\n    }\r\n    .ant-input {\r\n      padding: 0;\r\n    }\r\n    .ant-input[disabled] {\r\n      cursor: auto;\r\n      color: rgba(0, 0, 0, 0.88);\r\n    }\r\n  }\r\n  .prompt-header {\r\n    margin-bottom: 8px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    .prompt-title {\r\n      color: #262626;\r\n      font-weight: 600;\r\n      font-size: 14px;\r\n      .ant-input {\r\n        font-weight: 600;\r\n      }\r\n    }\r\n    .btn-wrapper-box {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 12px;\r\n      color: #262626;\r\n      .swich-item {\r\n        display: flex;\r\n        align-items: center;\r\n      }\r\n    }\r\n\r\n    .hover-btn-box {\r\n      width: 24px;\r\n      height: 24px;\r\n      border-radius: 6px;\r\n      padding: 4px;\r\n      font-size: 16px;\r\n      display: flex;\r\n      align-items: center;\r\n      color: #595959;\r\n      cursor: pointer;\r\n      transition: all 0.2s cubic-bezier(0.645, 0.045, 0.355, 1);\r\n      &:hover {\r\n        background: #e4e6eb;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.diy-prompt-box {\r\n  position: relative;\r\n  &.is-disabled {\r\n    &::before {\r\n      content: '';\r\n      position: absolute;\r\n      top: 0;\r\n      left: 0;\r\n      right: 0;\r\n      bottom: 0;\r\n      background: rgba(255, 255, 255, 0.25);\r\n      z-index: 1;\r\n    }\r\n  }\r\n  .diy-switch-box {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 16px;\r\n    color: #595959;\r\n    font-size: 14px;\r\n    .swich-item {\r\n      display: flex;\r\n      align-items: center;\r\n    }\r\n  }\r\n  .ant-input {\r\n    padding-top: 24px;\r\n  }\r\n  .ant-input[disabled] {\r\n    padding-top: 4px;\r\n    background-color: #fff;\r\n    color: rgba(0, 0, 0, 0.88);\r\n    cursor: auto;\r\n  }\r\n}\r\n</style>","<template>\r\n  <edit-box class=\"setting-box\" :title=\"t('title_model_settings')\" icon-name=\"moxingshezhi\" v-model:isEdit=\"isEdit\">\r\n    <template #extra>\r\n      <div class=\"actions-box\">\r\n        <a-button @click=\"handleEdit(true)\" size=\"small\">{{ t('btn_modify') }}</a-button>\r\n      </div>\r\n    </template>\r\n    <div class=\"setting-info-block\">\r\n      <div class=\"set-item w-100\">\r\n        {{ t('label_llm_model') }}：\r\n        <span>{{ getModelName }}</span>\r\n      </div>\r\n      <div class=\"set-item\">\r\n        {{ t('label_temperature') }}：\r\n        <span>{{ formState.temperature }}</span>\r\n      </div>\r\n      <div class=\"set-item\">\r\n        {{ t('label_max_token') }}：\r\n        <span>{{ formState.max_token }}</span>\r\n      </div>\r\n      <div class=\"set-item\">\r\n        {{ t('label_context_pair') }}：\r\n        <span>{{ formState.context_pair }}</span>\r\n      </div>\r\n      <div class=\"set-item\">\r\n        {{ t('label_show_reasoning_process') }}：\r\n        <span>{{ formState.think_switch == 1 ? t('state_on') : t('state_off') }}</span>\r\n      </div>\r\n    </div>\r\n    <a-modal\r\n      v-model:open=\"isEdit\"\r\n      :width=\"672\"\r\n      :title=\"t('title_model_settings')\"\r\n      @cancel=\"handleCancel\"\r\n      @ok=\"handleSave\"\r\n    >\r\n      <div class=\"form-box\">\r\n        <a-row :gutter=\"[32, 24]\">\r\n          <a-col v-bind=\"grid\">\r\n            <div class=\"form-item\">\r\n              <div class=\"form-item-label mb12\">\r\n                <span>{{ t('label_llm_model') }}&nbsp;</span>\r\n              </div>\r\n              <div class=\"form-item-body\">\r\n                <!-- 自定义选择器 -->\r\n                <ModelSelect\r\n                  modelType=\"LLM\"\r\n                  v-model:modeName=\"formState.use_model\"\r\n                  v-model:modeId=\"formState.model_config_id\"\r\n                  @change=\"handleModelChange\"\r\n                  @loaded=\"onVectorModelLoaded\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </a-col>\r\n\r\n          <a-col v-bind=\"grid\">\r\n            <div class=\"form-item\" style=\"display: flex; align-items: center\">\r\n              <div class=\"form-item-label mb12\">\r\n                <span>{{ t('label_prompt_role') }}：&nbsp;</span>\r\n              </div>\r\n              <div>\r\n                <a-radio-group v-model:value=\"formState.prompt_role_type\">\r\n                  <a-radio value=\"0\">{{ t('option_system_role') }}</a-radio>\r\n                  <a-radio value=\"1\">{{ t('option_user_role') }}</a-radio>\r\n                </a-radio-group>\r\n              </div>\r\n            </div>\r\n          </a-col>\r\n\r\n          <a-col v-bind=\"grid\">\r\n            <div class=\"form-item\">\r\n              <div class=\"form-item-label\">\r\n                <span>{{ t('label_temperature') }}&nbsp;</span>\r\n                <a-tooltip>\r\n                  <template #title>{{ t('tooltip_temperature') }}</template>\r\n                  <QuestionCircleOutlined class=\"question-icon\" />\r\n                </a-tooltip>\r\n              </div>\r\n              <div class=\"form-item-body\">\r\n                <div class=\"number-box\">\r\n                  <div class=\"number-slider-box\">\r\n                    <a-slider\r\n                      class=\"custom-slider\"\r\n                      v-model:value=\"formState.temperature\"\r\n                      :min=\"0\"\r\n                      :max=\"2\"\r\n                      :step=\"0.1\"\r\n                    />\r\n                  </div>\r\n                  <div class=\"number-input-box\">\r\n                    <a-input-number\r\n                      v-model:value=\"formState.temperature\"\r\n                      :min=\"0\"\r\n                      :max=\"2\"\r\n                      :step=\"0.1\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </a-col>\r\n\r\n          <a-col v-bind=\"grid\">\r\n            <div class=\"form-item\">\r\n              <div class=\"form-item-label\">\r\n                <span>{{ t('label_max_token') }}&nbsp;</span>\r\n                <a-tooltip>\r\n                  <template #title>{{ t('tooltip_max_token') }}</template>\r\n                  <QuestionCircleOutlined class=\"question-icon\" />\r\n                </a-tooltip>\r\n              </div>\r\n              <div class=\"form-item-body\">\r\n                <div class=\"number-box\">\r\n                  <div class=\"number-slider-box\">\r\n                    <a-slider\r\n                      class=\"custom-slider\"\r\n                      v-model:value=\"formState.max_token\"\r\n                      :min=\"0\"\r\n                      :max=\"100 * 1024\"\r\n                    />\r\n                  </div>\r\n                  <div class=\"number-input-box\">\r\n                    <a-input-number\r\n                      v-model:value=\"formState.max_token\"\r\n                      :min=\"0\"\r\n                      :max=\"100 * 1024\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </a-col>\r\n\r\n          <a-col v-bind=\"grid\">\r\n            <div class=\"form-item\">\r\n              <div class=\"form-item-label\">\r\n                <span>{{ t('label_context_pair') }}&nbsp;</span>\r\n                <a-tooltip>\r\n                  <template #title>{{ t('tooltip_context_pair') }}</template>\r\n                  <QuestionCircleOutlined class=\"question-icon\" />\r\n                </a-tooltip>\r\n              </div>\r\n              <div class=\"form-item-body\">\r\n                <div class=\"number-box\">\r\n                  <div class=\"number-slider-box\">\r\n                    <a-slider\r\n                      class=\"custom-slider\"\r\n                      v-model:value=\"formState.context_pair\"\r\n                      :min=\"0\"\r\n                      :max=\"50\"\r\n                    />\r\n                  </div>\r\n                  <div class=\"number-input-box\">\r\n                    <a-input-number v-model:value=\"formState.context_pair\" :min=\"0\" :max=\"50\" />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </a-col>\r\n          \r\n          <a-col v-bind=\"grid\">\r\n            <div class=\"form-item justify-between\">\r\n              <div class=\"form-item-label\">\r\n                <span>{{ t('label_multimodal_input') }}&nbsp;</span>\r\n                <a-tooltip>\r\n                  <template #title>\r\n                    <span>{{ t('tooltip_multimodal_input') }}</span>\r\n                  </template>\r\n                  <QuestionCircleOutlined class=\"question-icon\" />\r\n                </a-tooltip>\r\n              </div>\r\n              <CuTooltip :title=\"t('msg_model_not_support_multimodal')\" :disabled=\"!disableMultimodalInput\">\r\n                <a-switch\r\n                  v-model:checked=\"formState.question_multiple_switch\"\r\n                  :checkedValue=\"1\"\r\n                  :unCheckedValue=\"0\"\r\n                  :disabled=\"disableMultimodalInput\"\r\n                />\r\n              </CuTooltip>\r\n            </div>\r\n          </a-col>\r\n\r\n          <a-col v-bind=\"grid\" v-if=\"show_enable_thinking\">\r\n            <div class=\"form-item justify-between\">\r\n              <div class=\"form-item-label\">\r\n                <span>{{ t('label_deep_thinking') }}&nbsp;</span>\r\n                <a-tooltip>\r\n                  <template #title>\r\n                    <span>{{ t('tooltip_deep_thinking') }}</span>\r\n                  </template>\r\n                  <QuestionCircleOutlined class=\"question-icon\" />\r\n                </a-tooltip>\r\n              </div>\r\n              <a-switch\r\n                v-model:checked=\"formState.enable_thinking\"\r\n                :checkedValue=\"1\"\r\n                :unCheckedValue=\"0\"\r\n              />\r\n            </div>\r\n          </a-col>\r\n\r\n          <a-col v-bind=\"grid\">\r\n            <div class=\"form-item justify-between\">\r\n              <div class=\"form-item-label\">\r\n                <span>{{ t('label_show_reasoning_process') }}&nbsp;</span>\r\n                <a-tooltip>\r\n                  <template #title>\r\n                    <span>{{ t('tooltip_show_reasoning_process') }}</span>\r\n                  </template>\r\n                  <QuestionCircleOutlined class=\"question-icon\" />\r\n                </a-tooltip>\r\n              </div>\r\n              <a-switch\r\n                v-model:checked=\"formState.think_switch\"\r\n                :checkedValue=\"1\"\r\n                :unCheckedValue=\"0\"\r\n              />\r\n            </div>\r\n          </a-col>\r\n        </a-row>\r\n      </div>\r\n    </a-modal>\r\n  </edit-box>\r\n</template>\r\n\r\n<script setup>\r\nimport {\r\n  ref,\r\n  reactive,\r\n  inject,\r\n  toRaw,\r\n  watchEffect,\r\n  computed\r\n} from 'vue'\r\nimport { QuestionCircleOutlined } from '@ant-design/icons-vue'\r\nimport EditBox from './edit-box.vue'\r\nimport ModelSelect from '@/components/model-select/model-select.vue'\r\nimport { getModelNameText } from '@/components/model-select/index.js'\r\nimport CuTooltip from '@/components/cu-tooltip/index.vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.robot.robot-config.basic-config.components.model-settings')\r\n\r\nconst grid = reactive({ sm: 24, md: 24, lg: 12, xl: 24, xxl: 24 })\r\n// 获取LLM模型\r\nconst modelList = ref([])\r\n\r\nconst isEdit = ref(false)\r\nconst { robotInfo, updateRobotInfo, getRobot } = inject('robotInfo')\r\nconst formState = reactive({\r\n  use_model: undefined,\r\n  model_config_id: '',\r\n  temperature: 0,\r\n  max_token: 0,\r\n  context_pair: 0,\r\n  think_switch: 1,\r\n  prompt_role_type: '0',\r\n  enable_thinking: 0,\r\n  question_multiple_switch: 1,\r\n})\r\n\r\nconst disableMultimodalInput = ref(false)\r\n\r\n// 处理选择事件\r\nconst handleModelChange = (val, data) => {\r\n  const attr = data.attrs\r\n\r\n  formState.question_multiple_switch = Number(attr.input_image) || 0;\r\n\r\n  if (attr && attr.input_image == 1) {\r\n    disableMultimodalInput.value = false\r\n  } else {\r\n    disableMultimodalInput.value = true\r\n  }\r\n\r\n  if (formState.use_model && formState.use_model.toLowerCase().includes('deepseek-r1')) {\r\n    formState.prompt_role_type = '1'\r\n  } else {\r\n    formState.prompt_role_type = '0'\r\n  }\r\n}\r\n\r\nconst choosable_thinking = ref({})\r\nconst onVectorModelLoaded = (list, choosable_thinking_map) => {\r\n  choosable_thinking.value = choosable_thinking_map\r\n}\r\n\r\nconst show_enable_thinking = computed(() => {\r\n  if (!formState.model_config_id) {\r\n    return false\r\n  }\r\n  let key = formState.model_config_id + '#' + formState.use_model\r\n  return choosable_thinking.value[key]\r\n})\r\n\r\nconst handleSave = () => {\r\n  let params = { ...toRaw(formState) }\r\n  updateRobotInfo(params)\r\n  isEdit.value = false\r\n}\r\n\r\nconst handleCancel = () => {\r\n  getRobot(robotInfo.id).then((res) => {\r\n    formState.model_config_id = res.data.model_config_id\r\n    formState.use_model = res.data.use_model\r\n  })\r\n}\r\n\r\nconst handleEdit = (val) => {\r\n  formState.use_model = robotInfo.use_model\r\n  formState.model_config_id = robotInfo.model_config_id\r\n  formState.temperature = robotInfo.temperature\r\n  formState.max_token = robotInfo.max_token\r\n  formState.context_pair = robotInfo.context_pair\r\n  formState.think_switch = Number(robotInfo.think_switch)\r\n  formState.prompt_role_type = robotInfo.prompt_role_type\r\n  formState.enable_thinking = robotInfo.enable_thinking\r\n  formState.question_multiple_switch = Number(robotInfo.question_multiple_switch) || 0\r\n  isEdit.value = val\r\n}\r\n\r\nwatchEffect(() => {\r\n  formState.use_model = robotInfo.use_model\r\n  formState.model_config_id = robotInfo.model_config_id\r\n  formState.temperature = robotInfo.temperature\r\n  formState.max_token = robotInfo.max_token\r\n  formState.context_pair = robotInfo.context_pair\r\n  formState.think_switch = Number(robotInfo.think_switch)\r\n  formState.prompt_role_type = robotInfo.prompt_role_type\r\n  formState.enable_thinking = robotInfo.enable_thinking\r\n  formState.question_multiple_switch = Number(robotInfo.question_multiple_switch) || 0\r\n})\r\n\r\nconst getModelName = computed(() => {\r\n  return getModelNameText(formState.model_config_id, formState.use_model)\r\n})\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.setting-box {\r\n  ::v-deep(.edit-box-body) {\r\n    padding: 0;\r\n  }\r\n\r\n  .actions-box {\r\n    display: flex;\r\n    align-items: center;\r\n    line-height: 22px;\r\n    font-size: 14px;\r\n    color: #595959;\r\n\r\n    .action-btn {\r\n      cursor: pointer;\r\n    }\r\n\r\n    .save-btn {\r\n      color: #2475fc;\r\n    }\r\n\r\n    .model-name {\r\n      font-size: 14px;\r\n      line-height: 22px;\r\n      color: #8c8c8c;\r\n    }\r\n  }\r\n}\r\n\r\n.set-item-content {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n}\r\n\r\n.model-icon {\r\n  height: 18px;\r\n  width: 18px;\r\n  object-fit: contain;\r\n  vertical-align: middle;\r\n}\r\n\r\n/* 下拉选项对齐优化 */\r\n.ant-select-item-option-content {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n}\r\n\r\n.setting-info-block {\r\n  padding: 16px;\r\n  padding-top: 0;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 12px 16px;\r\n  color: #595959;\r\n  line-height: 22px;\r\n  .set-item {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n  .w-100 {\r\n    width: 100%;\r\n  }\r\n}\r\n\r\n.form-box {\r\n  padding: 16px 0 16px 0;\r\n\r\n  .justify-between {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n  }\r\n\r\n  .form-item-label {\r\n    line-height: 22px;\r\n    margin-bottom: 4px;\r\n    font-size: 14px;\r\n    color: #262626;\r\n\r\n    .question-icon {\r\n      color: #8c8c8c;\r\n    }\r\n  }\r\n\r\n  .number-box {\r\n    display: flex;\r\n    align-items: center;\r\n\r\n    .number-slider-box {\r\n      flex: 1;\r\n    }\r\n\r\n    .number-input-box {\r\n      margin-left: 20px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<style lang=\"less\" scoped>\r\n.recall-settings-box {\r\n  margin-top: 24px;\r\n  height: 650px;\r\n  overflow-x: auto;\r\n  padding-right: 16px;\r\n\r\n  .form-box {\r\n    .form-item {\r\n      margin-bottom: 24px;\r\n    }\r\n\r\n    .form-item-label {\r\n      line-height: 22px;\r\n      margin-bottom: 4px;\r\n      font-size: 14px;\r\n      color: #262626;\r\n\r\n      .question-icon {\r\n        color: #8c8c8c;\r\n      }\r\n    }\r\n\r\n    .is-required {\r\n      .form-item-label::before {\r\n        content: '*';\r\n        padding-right: 2px;\r\n        font-size: 14px;\r\n        color: #fb363f;\r\n      }\r\n    }\r\n\r\n    .number-box {\r\n      display: flex;\r\n      align-items: center;\r\n      width: 60%;\r\n      .number-slider-box {\r\n        flex: 1;\r\n      }\r\n\r\n      .number-input-box {\r\n        margin-left: 20px;\r\n      }\r\n    }\r\n\r\n    .retrieval-mode-items {\r\n      display: flex;\r\n      flex-wrap: wrap;\r\n      gap: 16px;\r\n      .retrieval-mode-item {\r\n        width: calc(50% - 8px);\r\n        position: relative;\r\n        padding: 16px;\r\n        border-radius: 6px;\r\n        border: 1px solid #d9d9d9;\r\n        cursor: pointer;\r\n      }\r\n\r\n      .retrieval-mode-title {\r\n        display: flex;\r\n        align-items: center;\r\n        line-height: 22px;\r\n        margin-bottom: 4px;\r\n        color: #262626;\r\n\r\n        .title-icon {\r\n          margin-right: 4px;\r\n          font-size: 16px;\r\n        }\r\n\r\n        .title-text {\r\n          font-size: 14px;\r\n          font-weight: 600;\r\n          margin-right: 4px;\r\n        }\r\n      }\r\n\r\n      .retrieval-mode-desc {\r\n        min-height: 44px;\r\n        line-height: 22px;\r\n        font-size: 14px;\r\n        color: #595959;\r\n      }\r\n\r\n      .check-arrow {\r\n        display: none;\r\n      }\r\n    }\r\n\r\n    .retrieval-mode-item.active {\r\n      border: 2px solid #2475fc;\r\n\r\n      .check-arrow {\r\n        position: absolute;\r\n        display: block;\r\n        right: -1px;\r\n        bottom: -1px;\r\n        width: 24px;\r\n        height: 24px;\r\n        font-size: 24px;\r\n        color: #fff;\r\n      }\r\n\r\n      .retrieval-mode-title {\r\n        color: #2475fc;\r\n      }\r\n    }\r\n\r\n    .segment-controls{\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 4px;\r\n      padding-top: 4px;\r\n    }\r\n  }\r\n}\r\n\r\n.model-icon {\r\n  height: 18px;\r\n}\r\n\r\n.meta-box {\r\n  border-radius: 6px;\r\n  background: #F2F4F7;\r\n  padding: 16px;\r\n  margin-top: 8px;\r\n}\r\n</style>\r\n\r\n<template>\r\n  <a-modal width=\"786px\" v-model:open=\"show\" :title=\"t('title_recall_settings')\" @ok=\"handleSave\">\r\n    <div class=\"recall-settings-box\">\r\n      <div class=\"form-box\">\r\n        <div class=\"form-item is-required\">\r\n          <div class=\"form-item-label\">\r\n            <span>{{ t('label_retrieval_mode') }}</span>\r\n          </div>\r\n          <div class=\"form-item-body\">\r\n            <div class=\"retrieval-mode-items\">\r\n              <div\r\n                class=\"retrieval-mode-item\"\r\n                :class=\"{ active: formState.search_type == item.value }\"\r\n                v-for=\"item in retrievalModeList\"\r\n                :key=\"item.value\"\r\n                @click=\"handleSelectRetrievalMode(item.value)\"\r\n              >\r\n                <svg-icon\r\n                  class=\"check-arrow\"\r\n                  name=\"check-arrow-filled\"\r\n                  v-if=\"formState.search_type == item.value\"\r\n                ></svg-icon>\r\n\r\n                <div class=\"retrieval-mode-title\">\r\n                  <svg-icon :name=\"item.iconName\" class=\"title-icon\"></svg-icon>\r\n                  <span class=\"title-text\">{{ t(item.title) }}</span>\r\n                  <img v-if=\"item.isRecommendation\" style=\"width: 32px;\" src=\"@/assets/svg/recommendation.svg\" alt=\"\">\r\n                </div>\r\n\r\n                <div class=\"retrieval-mode-desc\">\r\n                  {{ t(item.desc) }}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"form-item\" v-if=\"formState.search_type == 1\">\r\n          <WeightSelect v-model:rrf_weight=\"formState.rrf_weight\" />\r\n        </div>\r\n\r\n        <div class=\"form-item\">\r\n          <div class=\"form-item-label\">\r\n            <span>{{ t('label_top_k') }}&nbsp;</span>\r\n            <a-tooltip>\r\n              <template #title\r\n                >{{ t('tooltip_top_k') }}</template\r\n              >\r\n              <QuestionCircleOutlined class=\"question-icon\" />\r\n            </a-tooltip>\r\n          </div>\r\n          <div class=\"form-item-body\">\r\n            <div class=\"number-box\">\r\n              <div class=\"number-slider-box\">\r\n                <a-slider\r\n                  class=\"custom-slider\"\r\n                  v-model:value=\"formState.top_k\"\r\n                  :min=\"1\"\r\n                  :max=\"500\"\r\n                />\r\n              </div>\r\n              <div class=\"number-input-box\">\r\n                <a-input-number v-model:value=\"formState.top_k\" :min=\"1\" :max=\"500\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"form-item\" v-if=\"formState.search_type <= 2\">\r\n          <div class=\"form-item-label\">\r\n            <span>{{ t('label_similarity_threshold') }}&nbsp;</span>\r\n            <a-tooltip>\r\n              <template #title>{{ t('tooltip_similarity_threshold') }}</template>\r\n              <QuestionCircleOutlined class=\"question-icon\" />\r\n            </a-tooltip>\r\n          </div>\r\n          <div class=\"form-item-body\">\r\n            <div class=\"number-box\">\r\n              <div class=\"number-slider-box\">\r\n                <a-slider\r\n                  class=\"custom-slider\"\r\n                  v-model:value=\"formState.similarity\"\r\n                  :min=\"0\"\r\n                  :max=\"1\"\r\n                  :step=\"0.01\"\r\n                />\r\n              </div>\r\n              <div class=\"number-input-box\">\r\n                <a-input-number\r\n                  v-model:value=\"formState.similarity\"\r\n                  :min=\"0\"\r\n                  :max=\"1\"\r\n                  :step=\"0.01\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div class=\"form-item\">\r\n          <div class=\"form-item-label\">\r\n            <span class=\"setting-title\">{{ t('label_recall_neighbor_segments') }}&nbsp;</span>\r\n            <a-tooltip :overlayStyle=\"{ maxWidth: '350px' }\">\r\n              <template #title>\r\n                <div style=\"font-size: 13px;\">\r\n                  <p>{{ t('tooltip_recall_neighbor_desc_1') }}</p>\r\n                  <p>{{ t('tooltip_recall_neighbor_desc_2') }}</p>\r\n                  <p>{{ t('tooltip_recall_neighbor_desc_3') }}</p>\r\n                </div>\r\n              </template>\r\n              <QuestionCircleOutlined class=\"question-icon\" />\r\n            </a-tooltip>\r\n            &nbsp;\r\n            <a-switch v-model:checked=\"formState.recall_neighbor_switch\" />\r\n          </div>\r\n          \r\n          <div class=\"form-item-body\">\r\n            <div class=\"segment-controls\">\r\n              <div class=\"segment-input\">\r\n                <span>{{ t('label_concat_before') }}</span>&nbsp;\r\n                <a-select v-model:value=\"formState.recall_neighbor_before_num\" style=\"width: 80px;\">\r\n                  <a-select-option :value=\"i - 1\" v-for=\"i in 6\" :key=\"i\">{{ i - 1 }}</a-select-option>\r\n                </a-select>\r\n              </div>\r\n              \r\n              <div class=\"segment-input\">\r\n                <span>{{ t('label_after') }}</span>&nbsp;\r\n                <a-select v-model:value=\"formState.recall_neighbor_after_num\" style=\"width: 80px;\">\r\n                  <a-select-option :value=\"i - 1\" v-for=\"i in 6\" :key=\"i\">{{ i - 1 }}</a-select-option>\r\n                </a-select>\r\n              </div>\r\n              \r\n              <div class=\"segment-text\">{{ t('label_segments_content') }}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"form-item\">\r\n          <div class=\"form-item-label\">\r\n            <span>{{ t('label_rerank_model') }}</span>\r\n            &nbsp;\r\n            <a-switch\r\n              :checkedValue=\"1\"\r\n              :unCheckedValue=\"0\"\r\n              v-model:checked=\"formState.rerank_status\"\r\n              @change=\"handleRerankStatusChange\"\r\n            />\r\n          </div>\r\n          <div class=\"form-item-body\" v-if=\"formState.rerank_status == 1\">\r\n            <ModelSelect\r\n              modelType=\"RERANK\"\r\n              v-model:modeName=\"formState.rerank_use_model\"\r\n              v-model:modeId=\"formState.rerank_model_config_id\"\r\n              style=\"width: 60%\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"form-item\">\r\n          <div class=\"form-item-label\">\r\n            <a-tooltip :title=\"t('tooltip_metadata_filter')\">\r\n              <span>{{ t('label_metadata_filter') }} <QuestionCircleOutlined/></span>\r\n            </a-tooltip>\r\n            &nbsp;\r\n            <a-switch\r\n              :checkedValue=\"1\"\r\n              :unCheckedValue=\"0\"\r\n              v-model:checked=\"formState.meta_search_switch\"\r\n            />\r\n          </div>\r\n          <div class=\"form-item-body\" v-if=\"formState.meta_search_switch == 1\">\r\n            <MetaFilterBox\r\n              v-model:rule=\"formState.meta_search_condition_list\"\r\n              v-model:type=\"formState.meta_search_type\"\r\n              ref=\"metaFilterRef\"\r\n              class=\"meta-box\"\r\n              :meta-data=\"metaList\"/>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </a-modal>\r\n</template>\r\n\r\n<script setup>\r\nimport { reactive, ref, toRaw } from 'vue'\r\nimport { QuestionCircleOutlined } from '@ant-design/icons-vue'\r\nimport WeightSelect from '@/components/weight-select/index.vue'\r\nimport ModelSelect from '@/components/model-select/model-select.vue'\r\nimport { message } from 'ant-design-vue'\r\nimport {getRobotMetaSchemaList} from \"@/api/library/index.js\";\r\nimport MetaFilterBox from \"@/views/robot/robot-config/basic-config/components/meta-filter-box.vue\";\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.robot.robot-config.basic-config.components.associated-knowledge-base.recall-settings-alert')\r\n\r\nconst emit = defineEmits(['change'])\r\n\r\nconst retrievalModeList = ref([\r\n  {\r\n    iconName: 'mix-icon',\r\n    title: 'title_mixed_retrieval',\r\n    value: 1,\r\n    isRecommendation: true,\r\n    desc: 'desc_mixed_retrieval'\r\n  },\r\n  {\r\n    iconName: 'vector-icon',\r\n    title: 'title_vector_retrieval',\r\n    value: 2,\r\n    desc: 'desc_vector_retrieval'\r\n  },\r\n  {\r\n    iconName: 'graph-icon',\r\n    title: 'title_graph_retrieval',\r\n    value: 4,\r\n    desc: 'desc_graph_retrieval'\r\n  },\r\n  {\r\n    iconName: 'search-check-icon',\r\n    title: 'title_full_text_retrieval',\r\n    value: 3,\r\n    desc: 'desc_full_text_retrieval'\r\n  },\r\n])\r\n\r\nconst formState = reactive({\r\n  rerank_status: 0,\r\n  rerank_use_model: undefined,\r\n  rerank_model_config_id: undefined,\r\n  search_type: 1,\r\n  meta_search_switch: 0,\r\n  meta_search_type: 1,\r\n  meta_search_condition_list: \"\",\r\n  rrf_weight: {},\r\n  recall_neighbor_switch: false,\r\n  recall_neighbor_before_num: 1,\r\n  recall_neighbor_after_num: 1,\r\n})\r\n\r\nconst metaFilterRef = ref(null)\r\nconst show = ref(false)\r\nconst robotInfo = ref({})\r\nconst metaList = ref([])\r\n\r\nconst open = (data, r=null) => {\r\n  robotInfo.value = r\r\n  getMetaList()\r\n  formState.rerank_status = data.rerank_status || 0\r\n  formState.rerank_use_model = data.rerank_use_model || undefined\r\n  formState.rerank_model_config_id = data.rerank_model_config_id > 0 ? data.rerank_model_config_id : ''\r\n  formState.top_k = data.top_k\r\n  formState.similarity = data.similarity\r\n  formState.search_type = data.search_type\r\n  formState.meta_search_switch = Number(data.meta_search_switch)\r\n  formState.meta_search_type = Number(data.meta_search_type)\r\n  formState.meta_search_condition_list = data.meta_search_condition_list\r\n  formState.rrf_weight = data.rrf_weight\r\n  formState.recall_neighbor_switch = data.recall_neighbor_switch\r\n  formState.recall_neighbor_before_num = data.recall_neighbor_before_num\r\n  formState.recall_neighbor_after_num = data.recall_neighbor_after_num\r\n\r\n  show.value = true\r\n}\r\n\r\n\r\nconst getMetaList = () => {\r\n  getRobotMetaSchemaList({id: robotInfo.value.id}).then(res => {\r\n    metaList.value = res?.data || []\r\n  })\r\n}\r\n\r\nconst handleRerankStatusChange = (val) => {\r\n  if(val == 0){\r\n    formState.rerank_model_config_id = ''\r\n    formState.rerank_use_model = '';\r\n  }\r\n}\r\n\r\nconst handleSelectRetrievalMode = (val) => {\r\n  formState.search_type = val\r\n}\r\n\r\nconst checkRerank = () => {\r\n  if (formState.rerank_status == 1 && !formState.rerank_model_config_id) {\r\n    return true\r\n  }\r\n\r\n  return false\r\n}\r\n\r\nconst handleSave = () => {\r\n  if (checkRerank()) {\r\n    return message.error(t('msg_please_select_rerank_model'))\r\n  }\r\n  if (formState.meta_search_switch == 1 && !metaFilterRef.value.verify()) {\r\n    return\r\n  }\r\n\r\n  show.value = false\r\n  triggerChange()\r\n}\r\n\r\nconst triggerChange = () => {\r\n  emit('change', toRaw(formState))\r\n}\r\n\r\n\r\ndefineExpose({\r\n  open\r\n})\r\n</script>\r\n","<template>\r\n  <div>\r\n    <a-modal v-model:open=\"open\" :title=\"t('title_partial_kb_no_graph')\" :footer=\"null\" :width=\"746\">\r\n      <a-alert\r\n        style=\"margin-top: 16px\"\r\n        :message=\"t('msg_graph_not_enabled_warning')\"\r\n      ></a-alert>\r\n      <cu-scroll :scrollbar=\"false\" style=\"height: 400px\">\r\n        <div class=\"list-box\">\r\n          <div\r\n            class=\"list-item\"\r\n            @click=\"toEditPage(item)\"\r\n            v-for=\"item in props.list\"\r\n            :key=\"item.id\"\r\n          >\r\n            <div class=\"avater-box\">\r\n              <img :src=\"item.avatar\" alt=\"\" />\r\n            </div>\r\n            <div class=\"content-box\">\r\n              <div class=\"title-block\">\r\n                <div class=\"tag-icon\">Graph</div>\r\n                <div class=\"title-text\">{{ item.library_name }}</div>\r\n              </div>\r\n              <div class=\"desc-box\">{{ item.library_intro }}</div>\r\n            </div>\r\n            <div class=\"right-icon\">\r\n              <RightOutlined />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </cu-scroll>\r\n    </a-modal>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, onUnmounted, watch } from 'vue'\r\nimport { RightOutlined } from '@ant-design/icons-vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.robot.robot-config.basic-config.components.associated-knowledge-base.no-open-graph-modal')\r\n\r\nconst emit = defineEmits(['refreshList'])\r\nconst props = defineProps({\r\n  list: {\r\n    type: Array,\r\n    default: []\r\n  }\r\n})\r\nconst open = ref(false)\r\n\r\nwatch(\r\n  () => props.list,\r\n  () => {\r\n    if (props.list.length == 0) {\r\n      open.value = false\r\n    }\r\n  },\r\n  {}\r\n)\r\n\r\nconst show = () => {\r\n  open.value = true\r\n}\r\n\r\nconst handleVisibilityChange = () => {\r\n  let isVisible = document.visibilityState === 'visible'\r\n  if (isVisible) {\r\n    emit('refreshList')\r\n  }\r\n}\r\n\r\nonMounted(() => {\r\n  document.addEventListener('visibilitychange', handleVisibilityChange)\r\n})\r\n\r\nonUnmounted(() => {\r\n  document.removeEventListener('visibilitychange', handleVisibilityChange)\r\n})\r\n\r\nconst toEditPage = (item) => {\r\n  window.open(`/#/library/details/knowledge-config?id=${item.id}`)\r\n}\r\n\r\ndefineExpose({\r\n  show\r\n})\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.list-box {\r\n  margin-top: 16px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 16px;\r\n  flex-wrap: wrap;\r\n  .list-item {\r\n    width: calc(50% - 8px);\r\n    cursor: pointer;\r\n    padding: 16px;\r\n    border: 1px solid var(---, #fb363f);\r\n    border-radius: 6px;\r\n    display: flex;\r\n    align-items: center;\r\n    .avater-box {\r\n      width: 40px;\r\n      height: 40px;\r\n      border-radius: 6px;\r\n      margin-right: 8px;\r\n      img {\r\n        width: 100%;\r\n        height: 100%;\r\n      }\r\n    }\r\n    .content-box {\r\n      flex: 1;\r\n      overflow: hidden;\r\n      .title-block {\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 4px;\r\n      }\r\n      .tag-icon {\r\n        width: 42px;\r\n        height: 18px;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        border: 1px solid #00000026;\r\n        background: #0000000a;\r\n        border-radius: 6px;\r\n        font-size: 12px;\r\n        color: #bfbfbf;\r\n      }\r\n      .title-text {\r\n        max-width: 200px;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n        white-space: nowrap;\r\n        font-size: 14px;\r\n        font-weight: 600;\r\n        line-height: 22px;\r\n        color: #262626;\r\n      }\r\n      .desc-box {\r\n        margin-top: 2px;\r\n        max-width: 250px;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n        white-space: nowrap;\r\n        font-size: 12px;\r\n        line-height: 20px;\r\n        color: #8c8c8c;\r\n      }\r\n    }\r\n    .right-icon {\r\n      font-size: 16px;\r\n      color: #8c8c8c;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<style lang=\"less\" scoped>\r\n.setting-box {\r\n  .actions-box {\r\n    display: flex;\r\n    align-items: center;\r\n    line-height: 22px;\r\n    font-size: 14px;\r\n    color: #595959;\r\n\r\n    .action-btn {\r\n      cursor: pointer;\r\n    }\r\n\r\n    .save-btn {\r\n      color: #2475fc;\r\n    }\r\n  }\r\n\r\n  .library-list {\r\n    display: flex;\r\n    flex-flow: row wrap;\r\n    gap: 16px;\r\n    padding: 0 16px 0 16px;\r\n\r\n    .library-item {\r\n      width: 336px;\r\n      padding: 14px 16px;\r\n      border-radius: 6px;\r\n      border: 1px solid #d9d9d9;\r\n      background-color: #fff;\r\n      cursor: pointer;\r\n      display: flex;\r\n      align-items: center;\r\n\r\n      gap: 12px;\r\n      .library-avatar {\r\n        img {\r\n          width: 40px;\r\n          height: 40px;\r\n          border-radius: 12px;\r\n        }\r\n      }\r\n      .info-content-box {\r\n        flex: 1;\r\n        .library-title-block {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 8px;\r\n          .type-tag {\r\n            height: 18px;\r\n            line-height: 16px;\r\n            padding: 0 4px;\r\n            font-size: 12px;\r\n            font-weight: 400;\r\n            border-radius: 6px;\r\n            color: #2475fc;\r\n            border: 1px solid #99bffd;\r\n            &.gray-tag {\r\n              border: 1px solid var(--06, #d9d9d9);\r\n              color: #8c8c8c;\r\n            }\r\n          }\r\n        }\r\n        .title-text {\r\n          max-width: 150px;\r\n          overflow: hidden;\r\n          text-overflow: ellipsis;\r\n          white-space: nowrap;\r\n          font-size: 14px;\r\n          color: #262626;\r\n          font-weight: 600;\r\n          line-height: 22px;\r\n        }\r\n        .desc-info-block {\r\n          color: #8c8c8c;\r\n          margin-top: 2px;\r\n          font-size: 12px;\r\n          line-height: 20px;\r\n          width: 212px;\r\n          overflow: hidden;\r\n          text-overflow: ellipsis;\r\n          white-space: nowrap;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .setting-info-block {\r\n    padding: 16px;\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    gap: 16px;\r\n    color: #595959;\r\n    line-height: 22px;\r\n    .set-item {\r\n      display: flex;\r\n      align-items: center;\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n<template>\r\n  <edit-box\r\n    class=\"setting-box\"\r\n    :title=\"t('title_associated_knowledge_base')\"\r\n    icon-name=\"guanlianzhishiku\"\r\n    v-model:isEdit=\"isEdit\"\r\n    :bodyStyle=\"{ padding: 0 }\"\r\n  >\r\n    <template #extra>\r\n      <div class=\"actions-box\">\r\n        <a-flex :gap=\"8\">\r\n          <a-button size=\"small\" @click=\"handleOpenRecallSettingsAlert\">{{ t('btn_recall_settings') }}</a-button>\r\n          <a-button size=\"small\" @click=\"handleOpenSelectLibraryAlert\">{{ t('btn_associate_knowledge_base') }}</a-button>\r\n        </a-flex>\r\n      </div>\r\n    </template>\r\n    <div class=\"library-list\" v-if=\"selectedLibraryRows.length > 0\">\r\n      <div\r\n        class=\"library-item\"\r\n        v-for=\"item in selectedLibraryRows\"\r\n        :key=\"item.id\"\r\n        @click=\"toLibraryDetail(item)\"\r\n      >\r\n        <div class=\"library-avatar\">\r\n          <img :src=\"item.avatar\" alt=\"\" />\r\n        </div>\r\n        <div class=\"info-content-box\">\r\n          <div class=\"library-title-block\">\r\n            <div class=\"title-text\">{{ item.library_name }}</div>\r\n            <!-- <a-tooltip v-if=\"neo4j_status\">\r\n              <template #title>{{ item.graph_switch == 0 ? '未' : '已' }}开启知识图谱生成</template>\r\n              <div class=\"graph-tag\" :class=\"{ active: item.graph_switch == 1 }\">Graph</div>\r\n            </a-tooltip>\r\n            <span class=\"type-tag\" :class=\"{ 'gray-tag': item.graph_switch == 0 }\">Graph</span> -->\r\n          </div>\r\n          <div class=\"desc-info-block\">{{ item.library_intro }}</div>\r\n        </div>\r\n        <div class=\"close-btn\" v-if=\"item.id != robotInfo.default_library_id\" @click.stop=\"handleRemoveCheckedLibrary(item)\">\r\n          <CloseCircleOutlined />\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"setting-info-block\">\r\n      <div class=\"set-item\">\r\n        {{ t('label_search_mode') }}\r\n        <span v-if=\"formState.search_type == 1\">{{ t('label_hybrid_search') }}</span>\r\n        <span v-if=\"formState.search_type == 2\">{{ t('label_vector_search') }}</span>\r\n        <span v-if=\"formState.search_type == 3\">{{ t('label_fulltext_search') }}</span>\r\n        <span v-if=\"formState.search_type == 4\">{{ t('label_graph_search') }}</span>\r\n      </div>\r\n      <div class=\"set-item\">\r\n        {{ t('label_top_k') }}\r\n        <span>{{ formState.top_k }}</span>\r\n      </div>\r\n      <div class=\"set-item\" v-if=\"formState.search_type <= 2\">\r\n        {{ t('label_similarity_threshold') }}\r\n        <span>{{ formState.similarity }}</span>\r\n      </div>\r\n      <div class=\"set-item\">\r\n        {{ t('label_rerank_model') }}\r\n        <span v-if=\"formState.rerank_status == 0\">{{ t('label_off') }}</span>\r\n        <span v-else>{{ getModelName }}</span>\r\n      </div>\r\n    </div>\r\n    <LibrarySelectAlert\r\n      ref=\"librarySelectAlertRef\"\r\n      @change=\"onChangeLibrarySelected\"\r\n      :showWxType=\"!!wxAppLibary\"\r\n    />\r\n    <RecallSettingsAlert ref=\"recallSettingsAlertRef\" @change=\"onChangeRecallSettings\" />\r\n    <NoOpenGraphModal :list=\"noOpenLibraryList\" @refreshList=\"getList\" ref=\"noOpenGraphModalRef\" />\r\n  </edit-box>\r\n</template>\r\n\r\n<script setup>\r\nimport { useStorage } from '@/hooks/web/useStorage'\r\nimport { getLibraryList } from '@/api/library/index'\r\nimport { ref, reactive, inject, watchEffect, computed, toRaw, onMounted } from 'vue'\r\nimport { CloseCircleOutlined } from '@ant-design/icons-vue'\r\nimport { Modal } from 'ant-design-vue'\r\nimport EditBox from '../edit-box.vue'\r\nimport LibrarySelectAlert from './library-select-alert.vue'\r\nimport RecallSettingsAlert from './recall-settings-alert.vue'\r\nimport NoOpenGraphModal from './no-open-graph-modal.vue'\r\nimport { getModelNameText } from '@/components/model-select/index.js'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.robot.robot-config.basic-config.components.associated-knowledge-base.index')\r\n\r\nconst { getStorage, removeStorage } = useStorage('localStorage')\r\n\r\nimport { useCompanyStore } from '@/stores/modules/company'\r\nimport { getSpecifyAbilityConfig } from '@/api/explore/index.js'\r\nconst companyStore = useCompanyStore()\r\nconst neo4j_status = computed(() => {\r\n  return companyStore.companyInfo?.neo4j_status == 'true'\r\n})\r\n\r\nconst isEdit = ref(false)\r\n\r\nconst { robotInfo, updateRobotInfo } = inject('robotInfo')\r\n\r\nconst formState = reactive({\r\n  library_ids: [],\r\n  rerank_status: 0,\r\n  rerank_use_model: undefined,\r\n  rerank_model_config_id: '',\r\n  top_k: 0,\r\n  similarity: 0,\r\n  search_type: 1,\r\n  meta_search_switch: 0,\r\n  meta_search_type: 1,\r\n  meta_search_condition_list: \"\",\r\n  rrf_weight: {},\r\n  recall_neighbor_switch: false,\r\n  recall_neighbor_before_num: 1,\r\n  recall_neighbor_after_num: 1,\r\n})\r\n\r\n// 知识库\r\nconst libraryList = ref([])\r\nconst librarySelectAlertRef = ref(null)\r\nconst wxAppLibary = ref(null)\r\nconst selectedLibraryRows = computed(() => {\r\n  return libraryList.value.filter((item) => {\r\n    if (!wxAppLibary.value) {\r\n      return formState.library_ids.includes(item.id) && item.type != 3\r\n    } else {\r\n      return formState.library_ids.includes(item.id)\r\n    }\r\n  })\r\n})\r\n\r\nconst noOpenLibraryList = computed(() => {\r\n  return selectedLibraryRows.value.filter((item) => item.graph_switch == 0)\r\n})\r\n\r\n// 移除知识库\r\nconst handleRemoveCheckedLibrary = (item) => {\r\n  let index = formState.library_ids.indexOf(item.id)\r\n\r\n  formState.library_ids.splice(index, 1)\r\n\r\n  onSave()\r\n}\r\n\r\nconst onChangeLibrarySelected = (checkedList) => {\r\n  formState.library_ids = [...checkedList]\r\n\r\n  onSave()\r\n}\r\n\r\nconst handleOpenSelectLibraryAlert = () => {\r\n  librarySelectAlertRef.value.open([...formState.library_ids])\r\n}\r\n\r\n// 召回设置\r\nconst recallSettingsAlertRef = ref(null)\r\n\r\nconst handleOpenRecallSettingsAlert = () => {\r\n  recallSettingsAlertRef.value.open(toRaw(formState), robotInfo)\r\n}\r\n\r\nconst noOpenGraphModalRef = ref(null)\r\n\r\nconst onChangeRecallSettings = (data) => {\r\n  formState.rerank_status = data.rerank_status\r\n  formState.rerank_use_model = data.rerank_use_model\r\n  formState.rerank_model_config_id = data.rerank_model_config_id\r\n  formState.top_k = data.top_k\r\n  formState.similarity = data.similarity\r\n  formState.search_type = data.search_type\r\n  formState.meta_search_switch = data.meta_search_switch\r\n  formState.meta_search_type = data.meta_search_type\r\n  formState.meta_search_condition_list = data.meta_search_condition_list\r\n  formState.rrf_weight = data.rrf_weight\r\n  formState.recall_neighbor_switch = data.recall_neighbor_switch\r\n  formState.recall_neighbor_before_num = data.recall_neighbor_before_num\r\n  formState.recall_neighbor_after_num = data.recall_neighbor_after_num\r\n\r\n  if (data.search_type == 1 || data.search_type == 4) {\r\n    if (noOpenLibraryList.value.length > 0) {\r\n      noOpenGraphModalRef.value.show()\r\n    }\r\n  }\r\n  onSave()\r\n}\r\n\r\nconst onSave = () => {\r\n  let formData = { ...toRaw(formState) }\r\n\r\n  formData.library_ids = formData.library_ids.join(',')\r\n  formData.op_type_relation_library = 1\r\n  formData.rrf_weight = JSON.stringify(formData.rrf_weight)\r\n\r\n  updateRobotInfo({ ...formData })\r\n}\r\n\r\n// 获取知识库\r\nconst getList = async () => {\r\n  const res = await getLibraryList({ type: '', show_open_docs: 1 })\r\n  if (res) {\r\n    libraryList.value = res.data || []\r\n  }\r\n}\r\n\r\nconst loadWxLbStatus = () => {\r\n  // 公众号知识库是否开启\r\n  getSpecifyAbilityConfig({ ability_type: 'library_ability_official_account' }).then((res) => {\r\n    let _data = res?.data || {}\r\n    if (_data?.user_config?.switch_status == 1) {\r\n      wxAppLibary.value = _data\r\n    }\r\n  })\r\n}\r\n\r\n// 显示未关联知识库提示\r\nconst handleShowNoLibraryTip = () => {\r\n  Modal.confirm({\r\n    title: t('modal_title_no_library'),\r\n    content: t('modal_content_no_library'),\r\n    okText: t('modal_btn_associate_now'),\r\n    cancelText: t('modal_btn_associate_later'),\r\n    onOk() {\r\n      handleOpenSelectLibraryAlert()\r\n    }\r\n  })\r\n}\r\n\r\nformState.rerank_use_model = robotInfo.rerank_use_model || undefined\r\n\r\nwatchEffect(() => {\r\n  formState.library_ids = robotInfo.library_ids.split(',')\r\n  formState.rerank_status = robotInfo.rerank_status || 0\r\n  formState.rerank_use_model = robotInfo.rerank_use_model || undefined\r\n  formState.rerank_model_config_id = robotInfo.rerank_model_config_id || ''\r\n  formState.top_k = robotInfo.top_k\r\n  formState.similarity = robotInfo.similarity\r\n  formState.search_type = robotInfo.search_type\r\n  formState.meta_search_switch = robotInfo.meta_search_switch\r\n  formState.meta_search_type = robotInfo.meta_search_type\r\n  formState.meta_search_condition_list = robotInfo.meta_search_condition_list\r\n  formState.rrf_weight = robotInfo.rrf_weight != '' ? JSON.parse(robotInfo.rrf_weight) : {vector: 0, search: 0, graph: 0}\r\n  formState.recall_neighbor_switch = robotInfo.recall_neighbor_switch\r\n  formState.recall_neighbor_before_num = robotInfo.recall_neighbor_before_num\r\n  formState.recall_neighbor_after_num = robotInfo.recall_neighbor_after_num\r\n})\r\n\r\nconst toLibraryDetail = (item) => {\r\n  window.open(`#/library/details/knowledge-document?id=${item.id}`)\r\n}\r\n\r\nconst getModelName = computed(() => {\r\n  return getModelNameText(formState.rerank_model_config_id, formState.rerank_use_model, 'RERANK')\r\n})\r\n\r\nonMounted(() => {\r\n  loadWxLbStatus()\r\n  getList()\r\n})\r\n</script>\r\n","<style lang=\"less\" scoped>\r\n.library-checkbox-box {\r\n  padding-top: 16px;\r\n\r\n  .list-tools {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-top: 16px;\r\n    margin-bottom: 8px;\r\n  }\r\n\r\n  .list-box {\r\n    display: flex;\r\n    flex-flow: row wrap;\r\n    height: 388px;\r\n    width: 100%;\r\n    overflow-y: auto;\r\n    align-content: flex-start;\r\n    margin: 0 -8px;\r\n\r\n    .list-item-wraapper {\r\n      padding: 8px;\r\n      width: 50%;\r\n    }\r\n\r\n    .list-item {\r\n      width: 100%;\r\n      padding: 14px 12px;\r\n      border: 1px solid #f0f0f0;\r\n      border-radius: 2px;\r\n\r\n      &:hover {\r\n        cursor: pointer;\r\n        box-shadow: 0 4px 16px 0 #1b3a6929;\r\n      }\r\n\r\n      .library-name {\r\n        line-height: 22px;\r\n        font-size: 14px;\r\n        font-weight: 600;\r\n        color: #262626;\r\n        overflow: hidden;\r\n        white-space: nowrap;\r\n        text-overflow: ellipsis;\r\n      }\r\n\r\n      .library-desc {\r\n        line-height: 20px;\r\n        margin-top: 2px;\r\n        font-size: 12px;\r\n        font-weight: 400;\r\n        color: #8c8c8c;\r\n        overflow: hidden;\r\n        white-space: nowrap;\r\n        text-overflow: ellipsis;\r\n      }\r\n    }\r\n\r\n    .list-item :deep(span:last-child) {\r\n      flex: 1;\r\n      overflow: hidden;\r\n    }\r\n  }\r\n}\r\n.empty-box {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  flex-direction: column;\r\n  padding-top: 40px;\r\n  padding-bottom: 40px;\r\n  color: #8c8c8c;\r\n  img {\r\n    width: 150px;\r\n  }\r\n}\r\n</style>\r\n\r\n<template>\r\n  <a-modal width=\"746px\" v-model:open=\"show\" :title=\"t('title_link_data_table')\" @ok=\"saveCheckedList\">\r\n    <div class=\"library-checkbox-box\">\r\n      <!-- <a-alert message=\"请选择关联知识库，机器人会根据知识库内上传的文档回复用户的提问。每个机器人最多关联5个知识库\" type=\"info\" /> -->\r\n      <!-- <div class=\"list-tools\">\r\n        <div>\r\n          <a-input style=\"width: 282px\" v-model:value=\"searchKeyword\" placeholder=\"请输入知识库名称搜索\" @change=\"onSearch\">\r\n            <template #suffix>\r\n              <SearchOutlined style=\"color: rgba(0, 0, 0, 0.25)\" />\r\n            </template>\r\n          </a-input>\r\n        </div>\r\n        <div>\r\n          <a-button style=\"margin-right: 8px\" @click=\"onRefresh\">\r\n            <SyncOutlined /> 刷新\r\n          </a-button>\r\n          <a-button type=\"primary\" ghost @click=\"openAddLibrary\">新建知识库</a-button>\r\n        </div>\r\n      </div> -->\r\n      <a-spin :spinning=\"isRefresh\" :delay=\"100\">\r\n        <a-checkbox-group v-model:value=\"state.checkedList\" style=\"width: 100%\">\r\n          <div class=\"list-box\" ref=\"scrollContainer\">\r\n            <div class=\"list-item-wraapper\" v-for=\"item in options\" :key=\"item.id\">\r\n              <a-checkbox class=\"list-item\" :value=\"item.id\">\r\n                <div class=\"library-name\">{{ item.name }}</div>\r\n                <div class=\"library-desc\">{{ item.description }}</div>\r\n              </a-checkbox>\r\n            </div>\r\n          </div>\r\n        </a-checkbox-group>\r\n      </a-spin>\r\n      <div class=\"empty-box\" v-if=\"!isRefresh && !options.length\">\r\n        <img src=\"@/assets/img/library/preview/empty.png\" alt=\"\" />\r\n        <div>\r\n          {{ t('msg_no_data_table_add_first') }}\r\n          <a @click=\"openAddLibrary\"> {{ t('btn_go_add') }}</a>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </a-modal>\r\n</template>\r\n\r\n<script setup>\r\nimport { reactive, ref } from 'vue'\r\nimport { message } from 'ant-design-vue'\r\nimport { SearchOutlined, SyncOutlined } from '@ant-design/icons-vue'\r\nimport { getFormList } from '@/api/database/index'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.robot.robot-config.basic-config.components.data-base.library-select-alert')\r\n\r\nconst emit = defineEmits(['change'])\r\n\r\nconst state = reactive({\r\n  indeterminate: false,\r\n  checkAll: false,\r\n  checkedList: []\r\n})\r\n\r\nconst show = ref(false)\r\n\r\nconst open = (checkedList) => {\r\n  getList()\r\n\r\n  state.checkedList = checkedList\r\n  show.value = true\r\n}\r\n\r\nconst saveCheckedList = () => {\r\n  show.value = false\r\n  triggerChange()\r\n}\r\n\r\nconst searchKeyword = ref('')\r\n\r\nconst onSearch = () => {\r\n  getList()\r\n}\r\n\r\nconst options = ref([])\r\n\r\nconst triggerChange = () => {\r\n  emit('change', [...state.checkedList])\r\n}\r\n\r\nconst getList = async () => {\r\n  const res = await getFormList()\r\n  if (res) {\r\n    let list = res.data || []\r\n    options.value = list\r\n  }\r\n}\r\n\r\nconst isRefresh = ref(false)\r\nconst onRefresh = async () => {\r\n  isRefresh.value = true\r\n\r\n  await getList()\r\n\r\n  isRefresh.value = false\r\n\r\n  message.success(t('msg_refresh_success'))\r\n}\r\n\r\nconst openAddLibrary = () => {\r\n  window.open('/#/database/list')\r\n}\r\n\r\ndefineExpose({\r\n  open\r\n})\r\n</script>\r\n","<style lang=\"less\" scoped>\r\n.setting-box {\r\n  .actions-box {\r\n    display: flex;\r\n    align-items: center;\r\n    line-height: 22px;\r\n    font-size: 14px;\r\n    color: #595959;\r\n\r\n    .action-btn {\r\n      cursor: pointer;\r\n    }\r\n\r\n    .save-btn {\r\n      color: #2475fc;\r\n    }\r\n  }\r\n\r\n  .library-list {\r\n    display: flex;\r\n    flex-flow: row wrap;\r\n    gap: 16px;\r\n    padding: 0 16px 16px 16px;\r\n\r\n    .library-item {\r\n      position: relative;\r\n      width: 336px;\r\n      padding: 14px 16px;\r\n      border-radius: 2px;\r\n      border: 1px solid #d8dde5;\r\n      background-color: #fff;\r\n\r\n      .library-name {\r\n        width: 100%;\r\n        line-height: 22px;\r\n        font-size: 14px;\r\n        font-weight: 600;\r\n        color: #262626;\r\n        overflow: hidden;\r\n        white-space: nowrap;\r\n        text-overflow: ellipsis;\r\n      }\r\n\r\n      .library-intro {\r\n        width: 100%;\r\n        line-height: 20px;\r\n        font-size: 12px;\r\n        color: #8c8c8c;\r\n        overflow: hidden;\r\n        white-space: nowrap;\r\n        text-overflow: ellipsis;\r\n      }\r\n\r\n      .close-btn {\r\n        position: absolute;\r\n        top: 0;\r\n        right: 6px;\r\n        font-size: 16px;\r\n        color: #8c8c8c;\r\n        cursor: pointer;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n<template>\r\n  <edit-box\r\n    class=\"setting-box\"\r\n    :title=\"t('title_database')\"\r\n    icon-name=\"guanlianzhishiku\"\r\n    v-model:isEdit=\"isEdit\"\r\n    :bodyStyle=\"{ padding: 0 }\"\r\n  >\r\n    <template #tip>\r\n      <a-tooltip placement=\"top\">\r\n        <template #title>\r\n          <span>{{ t('tip_database_description') }}</span>\r\n        </template>\r\n        <QuestionCircleOutlined />\r\n      </a-tooltip>\r\n    </template>\r\n    <template #extra>\r\n      <div class=\"actions-box\">\r\n        <a-flex :gap=\"8\">\r\n          <a-button size=\"small\" @click=\"handleOpenSelectLibraryAlert\">{{ t('btn_link_data_table') }}</a-button>\r\n        </a-flex>\r\n      </div>\r\n    </template>\r\n    <div class=\"library-list\" v-if=\"selectedLibraryRows.length > 0\">\r\n      <div class=\"library-item\" v-for=\"item in selectedLibraryRows\" :key=\"item.id\">\r\n        <span class=\"close-btn\" @click=\"handleRemoveCheckedLibrary(item)\">\r\n          <CloseCircleOutlined />\r\n        </span>\r\n        <div class=\"library-name\">{{ item.name }}</div>\r\n        <div class=\"library-intro\">{{ item.description }}</div>\r\n      </div>\r\n    </div>\r\n    <LibrarySelectAlert ref=\"librarySelectAlertRef\" @change=\"onChangeLibrarySelected\" />\r\n  </edit-box>\r\n</template>\r\n\r\n<script setup>\r\nimport { getFormList } from '@/api/database/index'\r\nimport { ref, reactive, inject, watchEffect, computed, toRaw } from 'vue'\r\nimport { CloseCircleOutlined, QuestionCircleOutlined } from '@ant-design/icons-vue'\r\nimport EditBox from '../edit-box.vue'\r\nimport LibrarySelectAlert from './library-select-alert.vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.robot.robot-config.basic-config.components.data-base.index')\r\n\r\nconst isEdit = ref(false)\r\n\r\nconst { robotInfo, updateRobotInfo } = inject('robotInfo')\r\n\r\nconst formState = reactive({\r\n  form_ids: [],\r\n})\r\n\r\n// 知识库\r\nconst libraryList = ref([])\r\nconst librarySelectAlertRef = ref(null)\r\nconst selectedLibraryRows = computed(() => {\r\n  return libraryList.value.filter((item) => {\r\n    return formState.form_ids.includes(item.id)\r\n  })\r\n})\r\n\r\n// 移除知识库\r\nconst handleRemoveCheckedLibrary = (item) => {\r\n  let index = formState.form_ids.indexOf(item.id)\r\n\r\n  formState.form_ids.splice(index, 1)\r\n\r\n  onSave()\r\n}\r\n\r\nconst onChangeLibrarySelected = (checkedList) => {\r\n  formState.form_ids = [...checkedList]\r\n\r\n  onSave()\r\n}\r\n\r\nconst handleOpenSelectLibraryAlert = () => {\r\n  librarySelectAlertRef.value.open([...formState.form_ids])\r\n}\r\n\r\n\r\n\r\nconst onSave = () => {\r\n  let formData = { ...toRaw(formState) }\r\n\r\n  formData.form_ids = formData.form_ids.join(',')\r\n\r\n  updateRobotInfo({ ...formData })\r\n}\r\n\r\n// 获取知识库\r\nconst getList = async () => {\r\n  const res = await getFormList()\r\n  if (res) {\r\n    libraryList.value = res.data || []\r\n  }\r\n}\r\n\r\ngetList()\r\n\r\nwatchEffect(() => {\r\n  formState.form_ids = robotInfo.form_ids.split(',')\r\n})\r\n</script>\r\n","<style lang=\"less\" scoped>\r\n.setting-box {\r\n  .form-box {\r\n    .question-title {\r\n      margin-bottom: 8px;\r\n    }\r\n\r\n    .question-option {\r\n      display: flex;\r\n      align-items: center;\r\n      margin-bottom: 8px;\r\n\r\n      .question-option-content {\r\n        flex: 1;\r\n      }\r\n\r\n      .action-box {\r\n        padding-left: 10px;\r\n      }\r\n\r\n      .del-btn {\r\n        font-size: 14px;\r\n        color: #595959;\r\n      }\r\n\r\n      .drag-btn {\r\n        width: 24px;\r\n        font-size: 16px;\r\n        color: #8c8c8c;\r\n        cursor: pointer;\r\n      }\r\n    }\r\n\r\n    .add-btn {\r\n      height: 32px;\r\n      line-height: 32px;\r\n      padding: 0 12px;\r\n      margin: 0 24px;\r\n      font-size: 14px;\r\n      color: #595959;\r\n      background-color: #fff;\r\n      border: 1px dashed #d9d9d9;\r\n      cursor: pointer;\r\n    }\r\n  }\r\n\r\n  .robot-welcome-content {\r\n    white-space: pre-wrap;\r\n    word-break: break-all;\r\n  }\r\n\r\n  .robot-welcome-question {\r\n    .question-item {\r\n      line-height: 22px;\r\n      padding: 4px 12px;\r\n      margin-top: 8px;\r\n      font-size: 14px;\r\n      border-radius: 2px;\r\n      color: #595959;\r\n      border: 1px solid #d9d9d9;\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n<template>\r\n  <edit-box\r\n    class=\"setting-box\"\r\n    :title=\"t('title_welcome')\"\r\n    icon-name=\"huanyingyu\"\r\n    v-model:isEdit=\"isEdit\"\r\n    @save=\"onSave\"\r\n    @edit=\"handleEdit\"\r\n  >\r\n    <div class=\"form-box\" v-show=\"isEdit\">\r\n      <div class=\"question-title\">\r\n        <a-textarea v-model:value=\"formState.welcomes.content\" :placeholder=\"t('ph_input_welcome')\" />\r\n      </div>\r\n      <div class=\"question-options\">\r\n        <draggable\r\n          v-model=\"formState.welcomes.question\"\r\n          item-key=\"id\"\r\n          handle=\".drag-btn\"\r\n          @start=\"drag = true\"\r\n          @end=\"drag = false\"\r\n        >\r\n          <template #item=\"{ element, index }\">\r\n            <div class=\"question-option\">\r\n              <span class=\"drag-btn\"><svg-icon name=\"drag\" /></span>\r\n              <a-input\r\n                class=\"question-option-content\"\r\n                v-model:value=\"element.content\"\r\n                :placeholder=\"t('ph_input_question')\"\r\n              />\r\n              <div class=\"action-box\">\r\n                <CloseCircleOutlined class=\"del-btn\" @click=\"deleteOption(index)\" />\r\n              </div>\r\n            </div>\r\n          </template>\r\n        </draggable>\r\n\r\n        <div class=\"add-btn\" @click=\"addQuestion\">\r\n          <PlusOutlined class=\"add-btn-icon\" />{{ t('btn_add_guide_question') }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"robot-info-box\" v-show=\"!isEdit\">\r\n      <div class=\"robot-welcome-content\">{{ robotInfo.welcomes.content }}</div>\r\n      <div class=\"robot-welcome-question\">\r\n        <div\r\n          class=\"question-item\"\r\n          v-for=\"(question, index) in robotInfo.welcomes.question\"\r\n          :key=\"index\"\r\n        >\r\n          {{ question.content }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </edit-box>\r\n</template>\r\n<script setup>\r\nimport { ref, reactive, inject, toRaw, nextTick } from 'vue'\r\nimport { message } from 'ant-design-vue'\r\nimport { PlusOutlined, CloseCircleOutlined } from '@ant-design/icons-vue'\r\nimport draggable from 'vuedraggable'\r\nimport EditBox from './edit-box.vue'\r\nimport { getUuid } from '@/utils/index'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.robot.robot-config.basic-config.components.welcome-words')\r\n\r\nconst isEdit = ref(false)\r\nconst drag = ref(false)\r\nconst { robotInfo, updateRobotInfo, scrollBoxToBottom } = inject('robotInfo')\r\n\r\nconst formState = reactive({\r\n  welcomes: {\r\n    content: '',\r\n    question: []\r\n  }\r\n})\r\n\r\nconst checkWelcomeQuestion = () => {\r\n  let isEmity = false\r\n\r\n  if (formState.welcomes.question.length > 0) {\r\n    for (let i = 0; i < formState.welcomes.question.length; i++) {\r\n      if (!formState.welcomes.question[i].content) {\r\n        isEmity = i + 1\r\n        break\r\n      }\r\n    }\r\n  }\r\n\r\n  return isEmity\r\n}\r\n\r\nconst addQuestion = () => {\r\n  formState.welcomes.question.push({ content: '', id: getUuid(8) })\r\n  // nextTick(() => {\r\n  //   scrollBoxToBottom()\r\n  // })\r\n}\r\n\r\nconst deleteOption = (index) => {\r\n  formState.welcomes.question.splice(index, 1)\r\n}\r\n\r\nconst onSave = () => {\r\n  if (!formState.welcomes.content) {\r\n    return message.error(t('msg_welcome_required'))\r\n  }\r\n\r\n  if (checkWelcomeQuestion()) {\r\n    return message.error(t('msg_question_required'))\r\n  }\r\n\r\n  updateRobotInfo({ ...toRaw(formState) })\r\n  isEdit.value = false;\r\n}\r\n\r\nconst handleEdit = () => {\r\n  let data = { ...robotInfo.welcomes }\r\n  let question = []\r\n\r\n  data.question.forEach(({ content, id }) => {\r\n    let item = {\r\n      id,\r\n      content\r\n    }\r\n\r\n    if (!item.id) {\r\n      item.id = getUuid(6)\r\n    }\r\n\r\n    question.push(item)\r\n  })\r\n\r\n  formState.welcomes.content = data.content\r\n  formState.welcomes.question = question\r\n}\r\n</script>","<style lang=\"less\" scoped>\r\n.setting-box {\r\n  .form-box {\r\n    .question-title {\r\n      margin-bottom: 8px;\r\n    }\r\n\r\n    .question-option {\r\n      display: flex;\r\n      align-items: center;\r\n      margin-bottom: 8px;\r\n\r\n      .question-option-content {\r\n        flex: 1;\r\n      }\r\n\r\n      .action-box {\r\n        padding-left: 10px;\r\n      }\r\n\r\n      .del-btn {\r\n        font-size: 14px;\r\n        color: #595959;\r\n      }\r\n\r\n      .drag-btn {\r\n        width: 24px;\r\n        font-size: 16px;\r\n        color: #8c8c8c;\r\n        cursor: pointer;\r\n      }\r\n    }\r\n\r\n    .add-btn {\r\n      height: 32px;\r\n      line-height: 32px;\r\n      padding: 0 12px;\r\n      margin: 0 24px;\r\n      font-size: 14px;\r\n      color: #595959;\r\n      background-color: #fff;\r\n      border: 1px dashed #d9d9d9;\r\n      cursor: pointer;\r\n    }\r\n  }\r\n\r\n  .robot-unknown-content {\r\n    white-space: pre-wrap;\r\n    word-break: break-all;\r\n  }\r\n\r\n  .robot-unknown-question {\r\n    .question-item {\r\n      line-height: 22px;\r\n      padding: 4px 12px;\r\n      margin-top: 8px;\r\n      font-size: 14px;\r\n      border-radius: 2px;\r\n      color: #595959;\r\n      border: 1px solid #d9d9d9;\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n<template>\r\n  <edit-box\r\n    class=\"setting-box\"\r\n    :title=\"t('title_unknown_problem_prompt')\"\r\n    icon-name=\"unknown-prompt\"\r\n    v-model:isEdit=\"isEdit\"\r\n    @save=\"onSave\"\r\n    @edit=\"handleEdit\"\r\n  >\r\n    <template #tip>\r\n      <a-tooltip placement=\"top\" :overlayInnerStyle=\"{ width: '400px' }\">\r\n        <template #title>\r\n          <span>{{ t('tip_knowledge_mode') }}</span>\r\n        </template>\r\n        <QuestionCircleOutlined />\r\n      </a-tooltip>\r\n    </template>\r\n    <div class=\"form-box\" v-show=\"isEdit\">\r\n      <div class=\"question-title\">\r\n        <a-textarea\r\n          v-model:value=\"formState.unknown_question_prompt.content\"\r\n          :placeholder=\"t('ph_input_unknown_prompt')\"\r\n        />\r\n      </div>\r\n      <div class=\"question-options\">\r\n        <draggable\r\n          v-model=\"formState.unknown_question_prompt.question\"\r\n          item-key=\"id\"\r\n          handle=\".drag-btn\"\r\n          @start=\"drag = true\"\r\n          @end=\"drag = false\"\r\n        >\r\n          <template #item=\"{ element, index }\">\r\n            <div class=\"question-option\">\r\n              <span class=\"drag-btn\"><svg-icon name=\"drag\" /></span>\r\n              <a-input\r\n                class=\"question-option-content\"\r\n                v-model:value=\"element.content\"\r\n                :placeholder=\"t('ph_input_question')\"\r\n              />\r\n              <div class=\"action-box\">\r\n                <CloseCircleOutlined class=\"del-btn\" @click=\"deleteOption(index)\" />\r\n              </div>\r\n            </div>\r\n          </template>\r\n        </draggable>\r\n\r\n        <div class=\"add-btn\" @click=\"addQuestion\">\r\n          <PlusOutlined class=\"add-btn-icon\" />{{ t('btn_add_guide_question') }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"robot-info-box\" v-show=\"!isEdit\">\r\n      <div class=\"robot-unknown-content\">{{ robotInfo.unknown_question_prompt.content }}</div>\r\n      <div class=\"robot-unknown-question\">\r\n        <div\r\n          class=\"question-item\"\r\n          v-for=\"(question, index) in robotInfo.unknown_question_prompt.question\"\r\n          :key=\"index\"\r\n        >\r\n          {{ question.content }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </edit-box>\r\n</template>\r\n<script setup>\r\nimport { ref, reactive, inject, toRaw, nextTick, onMounted } from 'vue'\r\nimport { message } from 'ant-design-vue'\r\nimport { PlusOutlined, CloseCircleOutlined } from '@ant-design/icons-vue'\r\nimport draggable from 'vuedraggable'\r\nimport EditBox from './edit-box.vue'\r\nimport { getUuid } from '@/utils/index'\r\nimport { QuestionCircleOutlined } from '@ant-design/icons-vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.robot.robot-config.basic-config.components.unknown-problem-prompt')\r\n\r\nconst isEdit = ref(false)\r\nconst drag = ref(false)\r\nconst { robotInfo, updateRobotInfo, scrollBoxToBottom } = inject('robotInfo')\r\n\r\nconst formState = reactive({\r\n  unknown_question_prompt: {\r\n    content: '',\r\n    question: []\r\n  }\r\n})\r\n\r\nconst checkUnknownQuestion = () => {\r\n  let isEmity = false\r\n\r\n  if (formState.unknown_question_prompt.question.length > 0) {\r\n    for (let i = 0; i < formState.unknown_question_prompt.question.length; i++) {\r\n      if (!formState.unknown_question_prompt.question[i].content) {\r\n        isEmity = i + 1\r\n        break\r\n      }\r\n    }\r\n  }\r\n\r\n  return isEmity\r\n}\r\n\r\nconst addQuestion = () => {\r\n  formState.unknown_question_prompt.question.push({ content: '', id: getUuid(8) })\r\n  nextTick(() => {\r\n    scrollBoxToBottom()\r\n  })\r\n}\r\n\r\nconst deleteOption = (index) => {\r\n  formState.unknown_question_prompt.question.splice(index, 1)\r\n}\r\n\r\nconst onSave = () => {\r\n  // if (!formState.unknown_question_prompt.content) {\r\n  //   return message.error('请输入未知问题提示语')\r\n  // }\r\n\r\n  // if (checkUnknownQuestion()) {\r\n  //   return message.error('引导问题内容不能为空')\r\n  // }\r\n  updateRobotInfo({ ...toRaw(formState) })\r\n  isEdit.value = false;\r\n}\r\n\r\nconst handleEdit = () => {\r\n  let data = { ...robotInfo.unknown_question_prompt }\r\n  let question = []\r\n\r\n  if (data.question) {\r\n    data.question.forEach(({ content, id }) => {\r\n      let item = {\r\n        id,\r\n        content\r\n      }\r\n\r\n      if (!item.id) {\r\n        item.id = getUuid(6)\r\n      }\r\n\r\n      question.push(item)\r\n    })\r\n  }\r\n\r\n  if (data.content) {\r\n    formState.unknown_question_prompt.content = data.content\r\n  }\r\n\r\n  if (question) {\r\n    formState.unknown_question_prompt.question = question\r\n  }\r\n}\r\n\r\nonMounted(() => {})\r\n</script>\r\n","<style lang=\"less\" scoped>\r\n.setting-box {\r\n  position: relative;\r\n  .robot-info-box {\r\n    .robot-prompt {\r\n      line-height: 22px;\r\n      font-size: 14px;\r\n      white-space: pre-wrap;\r\n      word-break: break-all;\r\n      color: #595959;\r\n    }\r\n\r\n    .dialog-bg-set {\r\n      margin-top: 16px;\r\n      cursor: pointer;\r\n      display: inline-flex;\r\n      padding: 5px 16px;\r\n      justify-content: center;\r\n      align-items: center;\r\n      gap: 10px;\r\n      border-radius: 6px;\r\n      border: 1px solid #D9D9D9;\r\n      background: #FFF;\r\n      font-size: 14px;\r\n      font-style: normal;\r\n      font-weight: 400;\r\n      line-height: 22px;\r\n    }\r\n  }\r\n  .switch-item {\r\n    position: absolute;\r\n    right: 16px;\r\n    top: calc(50% - 8px);\r\n  }\r\n\r\n  .modal-item-box {\r\n    padding: 24px 0;\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 24px;\r\n\r\n    .modal-item {\r\n      .label {\r\n        color: #262626;\r\n        font-size: 14px;\r\n        font-style: normal;\r\n        font-weight: 400;\r\n        line-height: 22px;\r\n        margin-bottom: 4px;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n<template>\r\n  <edit-box class=\"setting-box\" :title=\"t('title_problem_optimization')\" icon-name=\"problem-optimization\">\r\n    <template #extra>\r\n      <span></span>\r\n    </template>\r\n    <div class=\"robot-info-box\">\r\n      <div class=\"robot-prompt\">\r\n        {{ t('desc_enable_question_optimize') }}\r\n      </div>\r\n      <a-tooltip>\r\n        <template #title>\r\n          <span>{{ t('tip_dialogue_background_help') }}</span>\r\n        </template>\r\n        <div class=\"dialog-bg-set\" @click=\"isBgSet = true\">\r\n          {{ t('btn_dialogue_background_setting') }}\r\n        </div>\r\n      </a-tooltip>\r\n    </div>\r\n\r\n    <a-switch\r\n      @change=\"handleEdit\"\r\n      class=\"switch-item\"\r\n      checkedValue=\"true\"\r\n      unCheckedValue=\"false\"\r\n      v-model:checked=\"robotInfo.enable_question_optimize\"\r\n      :checked-children=\"t('switch_on')\"\r\n      :un-checked-children=\"t('switch_off')\"\r\n    />\r\n\r\n    <div class=\"modal-box\" ref=\"modalBoxRef\">\r\n      <a-modal :getContainer=\"() => $refs.modalBoxRef\" v-model:open=\"isBgSet\" :width=\"472\" :title=\"t('title_user_question_suggestion_setting')\" @ok=\"handleSave\">\r\n        <div class=\"modal-item-box\">\r\n          <div class=\"modal-item\">\r\n            <div class=\"label\">{{ t('label_model') }}</div>\r\n            <a-radio-group v-model:value=\"modelStatus\" @change=\"handleChangeModel\">\r\n              <a-radio value=\"0\">{{ t('radio_follow_robot') }}</a-radio>\r\n              <a-radio value=\"1\">{{ t('radio_specify_model') }}</a-radio>\r\n            </a-radio-group>\r\n            <ModelSelect\r\n              v-if=\"modelStatus == '1'\"\r\n              modelType=\"LLM\"\r\n              v-model:modeName=\"formState.optimize_question_use_model\"\r\n              v-model:modeId=\"formState.optimize_question_model_config_id\"\r\n              style=\"width: 100%; margin-top: 8px;\"\r\n              @loaded=\"onVectorModelLoaded\"\r\n            />\r\n          </div>\r\n          <div class=\"modal-item\">\r\n            <div class=\"label\">{{ t('label_dialogue_background') }}</div>\r\n            <a-textarea\r\n              style=\"height: 120px\"\r\n              v-model:value=\"robotInfo.optimize_question_dialogue_background\"\r\n              :placeholder=\"t('ph_dialogue_background')\" />\r\n          </div>\r\n        </div>\r\n      </a-modal>\r\n    </div>\r\n  </edit-box>\r\n</template>\r\n<script setup>\r\nimport { ref, reactive, inject, toRaw, nextTick, onMounted } from 'vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\nimport EditBox from './edit-box.vue'\r\nimport ModelSelect from '@/components/model-select/model-select.vue'\r\n\r\nconst { t } = useI18n('views.robot.robot-config.basic-config.components.problem-optimization')\r\n\r\nconst isBgSet = ref(false)\r\nconst isEdit = ref(false)\r\nconst { robotInfo, updateRobotInfo } = inject('robotInfo')\r\n\r\n// optimize_question_model_config_id 接口返回0 modelStatus设置成0，有id modelStatus设置成1\r\nconst modelStatus = ref('0')\r\nconst formState = reactive({\r\n  optimize_question_use_model: '',\r\n  optimize_question_model_config_id: '',\r\n\r\n})\r\n\r\nonMounted(() => {\r\n  modelStatus.value = robotInfo.optimize_question_model_config_id != 0 ? '1' : '0'\r\n  formState.optimize_question_use_model = robotInfo.optimize_question_use_model\r\n  formState.optimize_question_model_config_id = robotInfo.optimize_question_model_config_id\r\n})\r\n\r\nconst onSave = () => {\r\n  updateRobotInfo({ ...toRaw(formState) })\r\n  isEdit.value = false\r\n}\r\n\r\nconst vectorModelList = ref([])\r\nconst onVectorModelLoaded = (list) => {\r\n  vectorModelList.value = list\r\n\r\n  nextTick(() => {\r\n    if (!formState.optimize_question_use_model || !Number(formState.optimize_question_model_config_id)) {\r\n      setDefaultModel()\r\n    }\r\n  })\r\n}\r\nconst setDefaultModel = () => {\r\n  if (vectorModelList.value.length > 0) {\r\n    // 遍历查找chatwiki模型\r\n    let modelConfig = null\r\n    let model = null\r\n\r\n    // 云版默认选中qwen-max\r\n    for (let item of vectorModelList.value) {\r\n      if (item.model_define === 'tongyi') {\r\n        modelConfig = item\r\n        for (let child of modelConfig.children) {\r\n          if (child.name === 'qwen-max') {\r\n            model = child\r\n            break\r\n          }\r\n        }\r\n        break\r\n      }\r\n    }\r\n\r\n    if (!modelConfig) {\r\n      modelConfig = vectorModelList.value[0]\r\n      model = modelConfig.children[0]\r\n    }\r\n\r\n    if (modelConfig && model) {\r\n      formState.optimize_question_use_model = model.name\r\n      formState.optimize_question_model_config_id = model.model_config_id\r\n    }\r\n  }\r\n}\r\nconst handleSave = () => {\r\n  isBgSet.value = false\r\n  updateRobotInfo({ ...toRaw(formState) })\r\n}\r\n\r\nconst handleChangeModel = (val) => {\r\n  if (val != 1) {\r\n    formState.optimize_question_use_model = ''\r\n    formState.optimize_question_model_config_id = 0\r\n  }\r\n}\r\n\r\nconst handleEdit = (val) => {\r\n  updateRobotInfo({});\r\n}\r\n</script>\r\n","<style lang=\"less\" scoped>\r\n.setting-box {\r\n  position: relative;\r\n  .robot-info-box {\r\n    .robot-prompt {\r\n      display: flex;\r\n      align-items: center;\r\n      line-height: 22px;\r\n      font-size: 14px;\r\n      white-space: pre-wrap;\r\n      word-break: break-all;\r\n      color: #595959;\r\n    }\r\n  }\r\n  .switch-item {\r\n    position: absolute;\r\n    right: 16px;\r\n    top: calc(50% - 8px);\r\n  }\r\n}\r\n</style>\r\n\r\n<template>\r\n  <edit-box class=\"setting-box\" :title=\"t('title_suggested_questions')\" icon-name=\"suggested-issues\">\r\n    <template #extra>\r\n      <span></span>\r\n    </template>\r\n    <div class=\"robot-info-box\">\r\n      <div class=\"robot-prompt\">\r\n        {{ t('msg_guide_description', { num: robotInfo.question_guide_num }) }}\r\n        <a-input-number\r\n          v-model:value=\"robotInfo.question_guide_num\"\r\n          style=\"width: 80px\"\r\n          :precision=\"0\"\r\n          :min=\"1\"\r\n          :max=\"10\"\r\n          @blur=\"handleEdit\"\r\n        />\r\n      </div>\r\n    </div>\r\n\r\n    <a-switch\r\n      @change=\"handleEdit\"\r\n      class=\"switch-item\"\r\n      checkedValue=\"true\"\r\n      unCheckedValue=\"false\"\r\n      v-model:checked=\"robotInfo.enable_question_guide\"\r\n      :checked-children=\"t('btn_on')\"\r\n      :un-checked-children=\"t('btn_off')\"\r\n    />\r\n  </edit-box>\r\n</template>\r\n<script setup>\r\nimport { ref, reactive, inject, toRaw } from 'vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\nimport EditBox from './edit-box.vue'\r\n\r\nconst { t } = useI18n('views.robot.robot-config.basic-config.components.suggested-issues')\r\n\r\nconst isEdit = ref(false)\r\nconst { robotInfo, updateRobotInfo } = inject('robotInfo')\r\n\r\nconst handleEdit = (val) => {\r\n  updateRobotInfo({});\r\n}\r\n</script>\r\n","<style lang=\"less\" scoped>\r\n.setting-box {\r\n  position: relative;\r\n  .robot-info-box {\r\n    .robot-prompt {\r\n      line-height: 22px;\r\n      font-size: 14px;\r\n      white-space: pre-wrap;\r\n      word-break: break-all;\r\n      color: #595959;\r\n    }\r\n  }\r\n  .switch-item {\r\n    position: absolute;\r\n    right: 16px;\r\n    top: calc(50% - 8px);\r\n  }\r\n}\r\n</style>\r\n\r\n<template>\r\n  <edit-box class=\"setting-box\" :title=\"t('title_sensitive_words')\" icon-name=\"sensitive-icon\">\r\n    <template #extra>\r\n      <span></span>\r\n    </template>\r\n    <div class=\"robot-info-box\">\r\n      <div class=\"robot-prompt\">\r\n        {{ t('msg_sensitive_words_desc') }}<span\r\n          @click=\"toManagePage\"\r\n          style=\"cursor: pointer\"\r\n          >{{ t('btn_manage_sensitive_words') }}</span\r\n        >\r\n      </div>\r\n    </div>\r\n\r\n    <a-switch\r\n      @change=\"handleEdit\"\r\n      class=\"switch-item\"\r\n      :checkedValue=\"1\"\r\n      :unCheckedValue=\"0\"\r\n      v-model:checked=\"robotInfo.sensitive_words_switch\"\r\n      :checked-children=\"t('switch_on')\"\r\n      :un-checked-children=\"t('switch_off')\"\r\n    />\r\n  </edit-box>\r\n</template>\r\n<script setup>\r\nimport { ref, reactive, inject, toRaw } from 'vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\nimport EditBox from './edit-box.vue'\r\n\r\nconst { t } = useI18n('views.robot.robot-config.basic-config.components.sensitive-words')\r\n\r\nconst isEdit = ref(false)\r\nconst { robotInfo, updateRobotInfo } = inject('robotInfo')\r\n\r\nconst formState = reactive({\r\n  prompt: ''\r\n})\r\n\r\nconst onSave = () => {\r\n  updateRobotInfo({ ...toRaw(formState) })\r\n  isEdit.value = false\r\n}\r\n\r\nconst toManagePage = () => {\r\n  window.open(`/#/user/sensitive-words`)\r\n}\r\n\r\nconst handleEdit = (val) => {\r\n  updateRobotInfo({})\r\n}\r\n</script>\r\n","<style lang=\"less\" scoped>\r\n.direct-box {\r\n    display: flex;\r\n    flex-direction: column;\r\n    padding: 16px;\r\n  }\r\n  .direct-item {\r\n    flex: 1;\r\n    border: 1px solid #d9d9d9;\r\n    padding: 15px;\r\n    border-radius: 6px;\r\n\r\n    .direct-title {\r\n      font-weight: bolder;\r\n    }\r\n\r\n    .direct-desc {\r\n      color: #595959;\r\n    }\r\n\r\n    .qa {\r\n        display: flex;\r\n        flex-direction: column;\r\n        margin-top: 20px;\r\n\r\n        .prompt-form-item-label {\r\n            display: flex;\r\n            align-items: center;\r\n        }\r\n\r\n        .qa-title {\r\n            margin-right: 5px;\r\n        }\r\n\r\n        .direct-switch {\r\n            margin-left: 20px;\r\n        }\r\n    }\r\n\r\n    .similarity {\r\n        display: flex;\r\n        align-items: center;\r\n        margin-top: 20px;\r\n\r\n        .number-input-box {\r\n            margin: 0 5px;\r\n        }\r\n    }\r\n  }\r\n\r\n  .direct-item:nth-child(2) {\r\n    margin: 10px 0px;\r\n  }\r\n\r\n  .direct-item.active {\r\n    border: 1px solid #2475fc;\r\n  }\r\n</style>\r\n\r\n<template>\r\n    <a-modal width=\"746px\" v-model:open=\"show\" :title=\"t('title_chat_mode_settings')\" @ok=\"handleSave\">\r\n        <a-radio-group class=\"direct-box\" v-model:value=\"chat_typeValue\">\r\n            <a-radio\r\n            class=\"direct-item\"\r\n            :class=\"{active: chat_typeValue == item.direct_id}\"\r\n            :value=\"item.direct_id\"\r\n            v-for=\"item in directState\"\r\n            :key=\"item.direct_id\"\r\n            >\r\n            <div class=\"direct-title\">{{ item.direct_title }}</div>\r\n            <div class=\"direct-desc\">{{ item.direct_desc }}</div>\r\n            <div class=\"qa\" v-show=\"item.isQaDirectReply && chat_typeValue == item.direct_id\">\r\n                <div class=\"prompt-form-item-label\">\r\n                    <span class=\"qa-title\">{{ t('label_reply_directly_when_qa_matched') }}</span>\r\n                    <a-tooltip>\r\n                        <template #title v-if=\"item.chat_type == '1'\">{{ t('tooltip_library_mode_qa_direct_reply') }}</template>\r\n                        <template #title v-else-if=\"item.chat_type == '3'\">{{ t('tooltip_mixture_mode_qa_direct_reply') }}</template>\r\n                        <QuestionCircleOutlined class=\"question-icon\" />\r\n                    </a-tooltip>\r\n                    <div class=\"direct-switch\">\r\n                        <a-switch\r\n                            v-if=\"item.chat_type == '1'\"\r\n                            :checkedValue=\"1\"\r\n                            :unCheckedValue=\"0\"\r\n                            v-model:checked=\"item.library_qa_direct_reply_switch\"\r\n                        />\r\n                        <a-switch\r\n                            v-else-if=\"item.chat_type == '3'\"\r\n                            :checkedValue=\"1\"\r\n                            :unCheckedValue=\"0\"\r\n                            v-model:checked=\"item.mixture_qa_direct_reply_switch\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"similarity\" v-show=\"item.isQaDirectReply && chat_typeValue == item.direct_id\">\r\n                <span>{{ t('label_similarity_exceeds') }}</span>\r\n                <div class=\"number-input-box\">\r\n                    <a-input-number\r\n                    v-if=\"item.chat_type == '1'\"\r\n                    v-model:value=\"item.library_qa_direct_reply_score\"\r\n                    :disabled=\"!item.library_qa_direct_reply_switch\"\r\n                    :min=\"0\"\r\n                    :max=\"1\"\r\n                    :step=\"0.01\"\r\n                    />\r\n                    <a-input-number\r\n                    v-else-if=\"item.chat_type == '3'\"\r\n                    v-model:value=\"item.mixture_qa_direct_reply_score\"\r\n                    :disabled=\"!item.mixture_qa_direct_reply_switch\"\r\n                    :min=\"0\"\r\n                    :max=\"1\"\r\n                    :step=\"0.01\"\r\n                    />\r\n                </div>\r\n                <span>{{ t('label_reply_directly_when_exceeds') }}</span>\r\n            </div>\r\n\r\n            </a-radio>\r\n        </a-radio-group>\r\n    </a-modal>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, toRaw, onMounted, watch } from 'vue'\r\nimport { QuestionCircleOutlined } from '@ant-design/icons-vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.robot.robot-config.basic-config.components.chat-mode.chat-edit-alert')\r\n\r\nconst emit = defineEmits(['save'])\r\n\r\nconst chat_typeValue = ref(1)\r\n\r\nconst directStateData = () => ([\r\n  {\r\n    direct_id: 1,\r\n    direct_title: t('title_library_mode'),\r\n    direct_desc:\r\n      t('desc_library_mode'),\r\n    chat_type: '1',\r\n    library_qa_direct_reply_score: '0.900',\r\n    library_qa_direct_reply_switch: 0,\r\n    isQaDirectReply: true\r\n  },\r\n  {\r\n    direct_id: 3,\r\n    direct_title: t('title_mixture_mode'),\r\n    direct_desc: t('desc_mixture_mode'),\r\n    chat_type: '3',\r\n    mixture_qa_direct_reply_score: '0.900',\r\n    mixture_qa_direct_reply_switch: 0,\r\n    isQaDirectReply: true\r\n  },\r\n  {\r\n    direct_id: 2,\r\n    direct_title: t('title_direct_mode'),\r\n    direct_desc: t('desc_direct_mode'),\r\n    chat_type: '2',\r\n    isQaDirectReply: false\r\n  }\r\n])\r\n\r\n// 定义响应式\r\nconst directState = reactive(directStateData())\r\n\r\nconst show = ref(false)\r\n\r\nconst formState = reactive({\r\n  chat_type: '',\r\n  library_qa_direct_reply_score: '',\r\n  library_qa_direct_reply_switch: 'false',\r\n  mixture_qa_direct_reply_score: '',\r\n  mixture_qa_direct_reply_switch: 'false'\r\n})\r\n\r\nconst handleSave = () => {\r\n\r\n    formState.chat_type = chat_typeValue.value.toString()\r\n    directState.forEach((item) => {\r\n    if (item.chat_type == chat_typeValue.value) {\r\n        if (formState.chat_type == '3') {\r\n            formState.mixture_qa_direct_reply_switch = item.mixture_qa_direct_reply_switch == 1 ? 'true' : 'false'\r\n            formState.mixture_qa_direct_reply_score = item.mixture_qa_direct_reply_score.toString()\r\n        } else if (formState.chat_type == '1') {\r\n            formState.library_qa_direct_reply_switch = item.library_qa_direct_reply_switch == 1 ? 'true' : 'false'\r\n            formState.library_qa_direct_reply_score = item.library_qa_direct_reply_score.toString()\r\n        }\r\n    }\r\n    })\r\n\r\n    triggerSave()\r\n    // 初始化\r\n    Object.assign(directState, directStateData())\r\n    show.value = false\r\n}\r\n\r\nconst triggerSave = () => {\r\n    emit('save', toRaw(formState))\r\n}\r\n\r\nonMounted(() => {\r\n})\r\n\r\nconst open = (data) => {\r\n    chat_typeValue.value = parseInt(data.chat_type)\r\n    formState.chat_type = data.chat_type\r\n    formState.library_qa_direct_reply_score = data.library_qa_direct_reply_score\r\n    formState.library_qa_direct_reply_switch = data.library_qa_direct_reply_switch\r\n    formState.mixture_qa_direct_reply_score = data.mixture_qa_direct_reply_score\r\n    formState.mixture_qa_direct_reply_switch = data.mixture_qa_direct_reply_switch\r\n\r\n    directState.forEach((item) => {\r\n        if (item.chat_type == '3') {\r\n            item.mixture_qa_direct_reply_score = data.mixture_qa_direct_reply_score\r\n            item.mixture_qa_direct_reply_switch = data.mixture_qa_direct_reply_switch == 'true' ? 1 : 0\r\n        } else if (item.chat_type == '1') {\r\n            item.library_qa_direct_reply_score = data.library_qa_direct_reply_score\r\n            item.library_qa_direct_reply_switch = data.library_qa_direct_reply_switch == 'true' ? 1 : 0\r\n        }\r\n    })\r\n\r\n    show.value = true\r\n}\r\n\r\nwatch(\r\n    () => show.value,\r\n    (val) => {\r\n        // \r\n        if (val === false) {\r\n            // 初始化\r\n            Object.assign(directState, directStateData())\r\n        }\r\n    }, {\r\n        immediate: true\r\n    }\r\n)\r\n\r\ndefineExpose({\r\n  open\r\n})\r\n</script>\r\n","<style lang=\"less\" scoped>\r\n.actions-box {\r\n  display: flex;\r\n  align-items: center;\r\n  line-height: 22px;\r\n  font-size: 14px;\r\n  color: #595959;\r\n\r\n  .action-btn {\r\n    cursor: pointer;\r\n  }\r\n\r\n  .save-btn {\r\n    color: #2475fc;\r\n  }\r\n\r\n  .model-name {\r\n    font-size: 14px;\r\n    line-height: 22px;\r\n    color: #8c8c8c;\r\n  }\r\n}\r\n\r\n.setting-info-block {\r\n  padding: 16px;\r\n  padding-top: 0;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 12px 16px;\r\n  color: #595959;\r\n  line-height: 22px;\r\n  .set-item {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n}\r\n</style>\r\n\r\n<template>\r\n  <edit-box\r\n    class=\"setting-box\"\r\n    :title=\"t('title_chat_mode')\"\r\n    icon-name=\"chat-mode\"\r\n    v-model:isEdit=\"isEdit\"\r\n    :bodyStyle=\"{ padding: 0 }\"\r\n  >\r\n    <template #tip>\r\n      <a-tooltip placement=\"top\" :overlayInnerStyle=\"{ width: '400px' }\">\r\n        <template #title>\r\n          <span>{{ t('tip_knowledge_base_only') }}</span\r\n          ><br />\r\n          <span>{{ t('tip_direct_mode') }}</span>\r\n        </template>\r\n        <QuestionCircleOutlined />\r\n      </a-tooltip>\r\n    </template>\r\n    <template #extra>\r\n      <div class=\"actions-box\">\r\n        <a-button size=\"small\" @click=\"handleEdit(true)\">{{ t('btn_edit') }}</a-button>\r\n      </div>\r\n    </template>\r\n    <div class=\"setting-info-block\">\r\n      <div class=\"set-item\">\r\n        {{ t('label_chat_mode') }}\r\n        <span v-if=\"robotInfo.chat_type == '1'\">{{ t('chat_mode_knowledge_base_only') }}</span>\r\n        <span v-if=\"robotInfo.chat_type == '2'\">{{ t('chat_mode_direct') }}</span>\r\n        <span v-if=\"robotInfo.chat_type == '3'\">{{ t('chat_mode_mixed') }}</span>\r\n      </div>\r\n      <template v-if=\"robotInfo.chat_type == '1'\">\r\n        <div class=\"set-item\">\r\n          {{ t('label_direct_reply_qa') }}\r\n          <span>{{ robotInfo.library_qa_direct_reply_switch == 'true' ? t('status_on') : t('status_off') }}</span>\r\n        </div>\r\n        <div class=\"set-item\" v-if=\"robotInfo.library_qa_direct_reply_switch == 'true'\">\r\n          {{ t('label_similarity_threshold') }}\r\n          <span>{{ robotInfo.library_qa_direct_reply_score }}</span>\r\n        </div>\r\n      </template>\r\n      <template v-if=\"robotInfo.chat_type == '3'\">\r\n        <div class=\"set-item\">\r\n          {{ t('label_direct_reply_qa') }}\r\n          <span>{{ robotInfo.mixture_qa_direct_reply_switch == 'true' ? t('status_on') : t('status_off') }}</span>\r\n        </div>\r\n        <div class=\"set-item\" v-if=\"robotInfo.mixture_qa_direct_reply_switch == 'true'\">\r\n          {{ t('label_similarity_threshold') }}\r\n          <span>{{ robotInfo.mixture_qa_direct_reply_score }}</span>\r\n        </div>\r\n      </template>\r\n    </div>\r\n    <div class=\"form-box\">\r\n      <ChatEditAlert ref=\"ChatEditAlertRef\" @save=\"onSave\"></ChatEditAlert>\r\n    </div>\r\n  </edit-box>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, inject, toRaw } from 'vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.robot.robot-config.basic-config.components.chat-mode.index')\r\nconst isEdit = ref(false)\r\nimport EditBox from '../edit-box.vue'\r\nimport { QuestionCircleOutlined } from '@ant-design/icons-vue'\r\nimport ChatEditAlert from './chat-edit-alert.vue'\r\nconst ChatEditAlertRef = ref(null)\r\n\r\nconst { robotInfo, updateRobotInfo } = inject('robotInfo')\r\n\r\nconst formState = reactive({\r\n  chat_type: robotInfo.chat_type,\r\n  library_qa_direct_reply_score: robotInfo.library_qa_direct_reply_score,\r\n  library_qa_direct_reply_switch: robotInfo.library_qa_direct_reply_switch,\r\n  mixture_qa_direct_reply_score: robotInfo.mixture_qa_direct_reply_score,\r\n  mixture_qa_direct_reply_switch: robotInfo.mixture_qa_direct_reply_switch\r\n})\r\n\r\nconst onSave = (data) => {\r\n  formState.chat_type = data.chat_type\r\n  formState.library_qa_direct_reply_score = data.library_qa_direct_reply_score\r\n  formState.library_qa_direct_reply_switch = data.library_qa_direct_reply_switch\r\n  formState.mixture_qa_direct_reply_score = data.mixture_qa_direct_reply_score\r\n  formState.mixture_qa_direct_reply_switch = data.mixture_qa_direct_reply_switch\r\n\r\n  handleSave()\r\n}\r\n\r\nconst handleSave = () => {\r\n  updateRobotInfo({ ...toRaw(formState) })\r\n  isEdit.value = false\r\n}\r\n\r\nconst handleEdit = () => {\r\n  ChatEditAlertRef.value.open(toRaw(formState))\r\n  isEdit.value = true\r\n}\r\n</script>\r\n","<style lang=\"less\" scoped>\r\n.switch-box {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 16px;\r\n  border-radius: 6px;\r\n  background-color: #f2f4f7;\r\n  overflow: hidden;\r\n  .switch-box-body {\r\n    flex: 1;\r\n  }\r\n\r\n  .switch-box-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n\r\n    .left-box {\r\n      display: flex;\r\n      align-items: center;\r\n    }\r\n\r\n    .right-box {\r\n      display: flex;\r\n      align-items: center;\r\n    }\r\n\r\n    .switch-box-icon {\r\n      margin-right: 8px;\r\n      font-size: 18px;\r\n      color: #262626;\r\n    }\r\n\r\n    .switch-box-title {\r\n      line-height: 24px;\r\n      font-size: 16px;\r\n      font-weight: 600;\r\n      color: #262626;\r\n    }\r\n    .title-tip {\r\n      margin-left: 4px;\r\n    }\r\n  }\r\n\r\n  .switch-desc {\r\n    line-height: 22px;\r\n    font-size: 14px;\r\n    font-weight: 400;\r\n    color: #595959;\r\n  }\r\n}\r\n</style>\r\n\r\n<template>\r\n  <div class=\"switch-box\">\r\n    <div class=\"switch-box-body\">\r\n      <div class=\"switch-box-header\">\r\n        <div class=\"left-box\">\r\n          <svg-icon class=\"switch-box-icon\" :name=\"props.iconName\"></svg-icon>\r\n          <span class=\"switch-box-title\">{{ props.title }}</span>\r\n          <span class=\"title-tip\" v-if=\"$slots.tip\">\r\n            <slot name=\"tip\"></slot>\r\n          </span>\r\n        </div>\r\n        <div class=\"right-box\">\r\n          <div class=\"extra-box\">\r\n            <slot name=\"extra\">\r\n              <div class=\"extra-box\"></div>\r\n            </slot>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"switch-desc\">\r\n        <slot></slot>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"switch-box-right\">\r\n      <a-switch\r\n        v-model:checked=\"checked\"\r\n        @change=\"handleChange\"\r\n        :checked-children=\"t('btn_switch_on')\"\r\n        :un-checked-children=\"t('btn_switch_off')\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.robot.robot-config.basic-config.components.switch-box')\r\nconst emit = defineEmits(['update:value', 'change'])\r\n\r\nconst props = defineProps({\r\n  iconName: {\r\n    type: String,\r\n    default: ''\r\n  },\r\n  title: {\r\n    type: String,\r\n    default: ''\r\n  },\r\n  value: {\r\n    type: Boolean,\r\n    default: false\r\n  }\r\n})\r\n\r\nconst checked = ref(props.value)\r\n\r\nconst handleChange = (val) => {\r\n  emit('update:value', val)\r\n  emit('change', val)\r\n}\r\n</script>\r\n","export default \"__VITE_ASSET__AwPHovUO__\"","export default \"__VITE_ASSET__i4BXnZOl__\"","export default \"__VITE_ASSET__CZQccSXv__\"","<style lang=\"less\" scoped>\r\n.common-problem-box {\r\n  position: relative;\r\n  .left-content-box {\r\n    width: 640px;\r\n  }\r\n  .preview-box {\r\n    position: absolute;\r\n    left: calc(640px + 48px);\r\n    top: 0;\r\n    width: 345px;\r\n    height: 720px;\r\n    box-shadow: 0 4px 16px 0 #00000033;\r\n    background: #f0f2f5;\r\n    display: flex;\r\n    flex-direction: column;\r\n    overflow: hidden;\r\n    .phone-body {\r\n      padding: 10px;\r\n      flex: 1;\r\n      overflow-x: hidden;\r\n      overflow-y: auto;\r\n      -ms-overflow-style: none;\r\n      scrollbar-width: none;\r\n      &::-webkit-scrollbar {\r\n        display: none;\r\n      }\r\n      .question-box {\r\n        width: 232px;\r\n        border-radius: 3.66px 14.63px 14.63px 14.63px;\r\n        background: #fff;\r\n        padding: 14px 10px;\r\n        margin-left: 48px;\r\n        .name {\r\n          font-size: 12.81px;\r\n          font-weight: 600;\r\n          line-height: 20.12px;\r\n          color: #8c8c8c;\r\n        }\r\n        .list-item {\r\n          cursor: pointer;\r\n          margin-top: 8px;\r\n          padding: 5.49px 10.98px;\r\n          border-radius: 3.66px;\r\n          background: #e5efff;\r\n          color: #164799;\r\n          font-size: 12.81px;\r\n          font-weight: 400;\r\n          line-height: 18.29px;\r\n          word-break: break-all;\r\n        }\r\n      }\r\n    }\r\n    .head-img {\r\n      width: 343px;\r\n    }\r\n    .body-img {\r\n      width: 321px;\r\n    }\r\n    .footer-img {\r\n      width: 343px;\r\n    }\r\n  }\r\n}\r\n.form-box {\r\n  margin-top: 12px;\r\n}\r\n.quess-icon {\r\n  color: #8c8c8c;\r\n  font-size: 16px;\r\n  cursor: pointer;\r\n}\r\n.drag-btn {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-top: 2px;\r\n  margin-right: 8px;\r\n  cursor: grab;\r\n}\r\n.lists-box {\r\n  min-height: 600px;\r\n  margin-top: 16px;\r\n  .list-item {\r\n    position: relative;\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 14px 16px;\r\n    background: #fff;\r\n    border: 1px solid #d9d9d9;\r\n    justify-content: space-between;\r\n    margin-bottom: 8px;\r\n    .title {\r\n      flex: 1;\r\n      overflow: hidden;\r\n      white-space: nowrap;\r\n      text-overflow: ellipsis;\r\n      color: #262626;\r\n      font-size: 14px;\r\n    }\r\n    .opration-box {\r\n      background: #fff;\r\n      padding-left: 8px;\r\n      z-index: 999;\r\n      position: absolute;\r\n      right: 16px;\r\n      opacity: 0;\r\n      margin-left: 8px;\r\n      display: flex;\r\n      gap: 8px;\r\n      cursor: pointer;\r\n      color: #8c8c8c;\r\n      font-size: 16px;\r\n    }\r\n    &:hover {\r\n      .opration-box {\r\n        opacity: 1;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.empty-box {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  padding-bottom: 40px;\r\n  img {\r\n    width: 200px;\r\n    height: 200px;\r\n  }\r\n  .title {\r\n    color: #262626;\r\n    font-size: 16px;\r\n    font-weight: 600;\r\n    line-height: 24px;\r\n  }\r\n  .desc {\r\n    margin-top: 4px;\r\n    margin-bottom: 16px;\r\n    color: #7a8699;\r\n    font-size: 14px;\r\n    line-height: 22px;\r\n  }\r\n}\r\n</style>\r\n\r\n<template>\r\n  <div class=\"common-problem-box\">\r\n    <div class=\"left-content-box\">\r\n      <edit-box class=\"setting-box\" :title=\"t('title_common_problem_settings')\" icon-name=\"common-quession\">\r\n        <template #icon>\r\n          <a-tooltip>\r\n            <template #title>{{ t('tooltip_max_10_items') }}</template>\r\n            <QuestionCircleOutlined class=\"quess-icon\" />\r\n          </a-tooltip>\r\n        </template>\r\n        <template #extra>\r\n          <a-switch\r\n            @change=\"handleChangeStatus\"\r\n            class=\"switch-item\"\r\n            checkedValue=\"true\"\r\n            unCheckedValue=\"false\"\r\n            v-model:checked=\"robotInfo.enable_common_question\"\r\n            :checked-children=\"t('switch_on')\"\r\n            :un-checked-children=\"t('switch_off')\"\r\n          />\r\n          <a-divider type=\"vertical\" />\r\n          <a-button type=\"primary\" size=\"small\" @click=\"open\">{{ t('btn_add') }}</a-button>\r\n        </template>\r\n        <div class=\"empty-box\" v-if=\"common_question_list.length == 0\">\r\n          <img src=\"@/assets/empty.png\" alt=\"\" />\r\n          <div class=\"title\">{{ t('empty_no_data') }}</div>\r\n          <div class=\"desc\">{{ t('empty_desc') }}</div>\r\n          <a-button @click=\"open\" type=\"primary\">{{ t('btn_add_now') }}</a-button>\r\n        </div>\r\n        <div class=\"lists-box\" v-else>\r\n          <draggable\r\n            v-model=\"common_question_list_show\"\r\n            handle=\".drag-btn\"\r\n            item-key=\"index\"\r\n            @end=\"onDragEnd\"\r\n          >\r\n            <template #item=\"{ element, index }\">\r\n              <div class=\"list-item\" :key=\"index\">\r\n                <span class=\"drag-btn\"><svg-icon name=\"drag\" /></span>\r\n                <div class=\"title\">{{ element }}</div>\r\n                <div class=\"opration-box\">\r\n                  <EditOutlined @click=\"edit(element, index)\" />\r\n                  <CloseCircleOutlined @click=\"delQuestion(index)\" />\r\n                </div>\r\n              </div>\r\n            </template>\r\n          </draggable>\r\n        </div>\r\n      </edit-box>\r\n    </div>\r\n    <div class=\"preview-box\">\r\n      <div class=\"phone-head\">\r\n        <img class=\"head-img\" src=\"@/assets/img/robot/preview/phone-head.png\" alt=\"\" />\r\n      </div>\r\n      <div class=\"phone-body\">\r\n        <div><img class=\"body-img\" src=\"@/assets/img/robot/preview/phone-body.png\" alt=\"\" /></div>\r\n        <div\r\n          class=\"question-box\"\r\n          v-if=\"common_question_list.length && robotInfo.enable_common_question == 'true'\"\r\n        >\r\n          <div class=\"name\">{{ t('label_common_problem') }}</div>\r\n          <div class=\"list-item\" v-for=\"item in common_question_list\" :key=\"item\">\r\n            {{ item }}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"phone-footer\">\r\n        <img class=\"footer-img\" src=\"@/assets/img/robot/preview/phone-footer.png\" alt=\"\" />\r\n      </div>\r\n    </div>\r\n    <a-modal v-model:open=\"show\" :title=\"t(modalTitle)\" @ok=\"handleOk\" width=\"476px\">\r\n      <a-form class=\"form-box\" layout=\"vertical\">\r\n        <a-form-item :label=\"t('label_question_name')\" v-bind=\"validateInfos.question\">\r\n          <a-input\r\n            :maxLength=\"100\"\r\n            v-model:value=\"formState.question\"\r\n            :placeholder=\"t('ph_input_question')\"\r\n          ></a-input>\r\n        </a-form-item>\r\n      </a-form>\r\n    </a-modal>\r\n  </div>\r\n</template>\r\n<script setup>\r\nimport { ref, reactive, inject, toRaw, computed, createVNode, watch } from 'vue'\r\nimport { Form, message, Modal } from 'ant-design-vue'\r\nimport draggable from 'vuedraggable'\r\nimport {\r\n  EditOutlined,\r\n  CloseCircleOutlined,\r\n  ExclamationCircleOutlined,\r\n  QuestionCircleOutlined\r\n} from '@ant-design/icons-vue'\r\nimport EditBox from './edit-box.vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.robot.robot-config.basic-config.components.common-problem')\r\nconst isEdit = ref(false)\r\nconst { robotInfo, updateRobotInfo } = inject('robotInfo')\r\nconst common_question_list = computed(() => {\r\n  return robotInfo.common_question_list ? JSON.parse(robotInfo.common_question_list) : []\r\n})\r\nconst common_question_list_show = ref([])\r\ncommon_question_list_show.value = common_question_list.value\r\nwatch(common_question_list, () => {\r\n  common_question_list_show.value = common_question_list.value\r\n})\r\nconst useForm = Form.useForm\r\nconst show = ref(false)\r\nconst modalTitle = ref('modal_title_add')\r\nconst formState = reactive({\r\n  question: '',\r\n  index: -1\r\n})\r\n\r\nconst formRules = reactive({\r\n  question: [\r\n    {\r\n      message: t('msg_input_question_name'),\r\n      required: true\r\n    }\r\n  ]\r\n})\r\n\r\nconst { resetFields, validate, validateInfos } = useForm(formState, formRules)\r\n\r\nconst open = () => {\r\n  if (common_question_list.value.length >= 10) {\r\n    return message.error(t('msg_max_10_questions'))\r\n  }\r\n  show.value = true\r\n  resetFields()\r\n  formState.question = ''\r\n  formState.index = -1\r\n  modalTitle.value = 'modal_title_add'\r\n}\r\nconst edit = (question, index) => {\r\n  show.value = true\r\n  resetFields()\r\n  formState.question = question\r\n  formState.index = index\r\n  modalTitle.value = 'modal_title_edit'\r\n}\r\nconst delQuestion = (index) => {\r\n  let commonQuestionList = []\r\n  commonQuestionList = common_question_list.value.filter((item, i) => index != i)\r\n  Modal.confirm({\r\n    title: t('modal_title_remind'),\r\n    icon: createVNode(ExclamationCircleOutlined),\r\n    content: t('modal_content_confirm_delete'),\r\n    okText: t('btn_confirm'),\r\n    okType: 'danger',\r\n    cancelText: t('btn_cancel'),\r\n    onOk() {\r\n      updateRobotInfo({\r\n        common_question_list: JSON.stringify(commonQuestionList)\r\n      })\r\n    },\r\n    onCancel() {}\r\n  })\r\n}\r\nconst handleOk = () => {\r\n  validate().then(() => {\r\n    let commonQuestionList = []\r\n    if (formState.index >= 0) {\r\n      // 编辑\r\n      commonQuestionList = common_question_list.value.map((item, index) =>\r\n        index === formState.index ? formState.question : item\r\n      )\r\n    } else {\r\n      // 新增\r\n      commonQuestionList = [formState.question, ...common_question_list.value]\r\n    }\r\n    updateRobotInfo({\r\n      common_question_list: JSON.stringify(commonQuestionList)\r\n    })\r\n    show.value = false\r\n  })\r\n}\r\nconst handleChangeStatus = (val) => {\r\n  updateRobotInfo({})\r\n}\r\n\r\nconst onDragEnd = (e) => {\r\n  updateRobotInfo({\r\n    common_question_list: JSON.stringify(common_question_list_show.value)\r\n  })\r\n}\r\n</script>\r\n","<style lang=\"less\" scoped></style>\r\n\r\n<template>\r\n  <SwitchBox\r\n    :title=\"t('title_show_citations')\"\r\n    icon-name=\"jibenpeizhi\"\r\n    v-model:value=\"value\"\r\n    @change=\"onSave\"\r\n  >\r\n    <template #extra>\r\n      <span></span>\r\n    </template>\r\n\r\n    <div>{{ t('desc_show_citations') }}</div>\r\n  </SwitchBox>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, watch, inject } from 'vue'\r\nimport SwitchBox from './switch-box.vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.robot.robot-config.basic-config.components.display-aitations')\r\n\r\nconst { robotInfo, updateRobotInfo } = inject('robotInfo')\r\n\r\nconst value = ref(false)\r\n\r\nwatch(\r\n  () => robotInfo.answer_source_switch,\r\n  (val) => {\r\n    value.value = val == 'true'\r\n  },\r\n  { immediate: true }\r\n)\r\n\r\nconst onSave = () => {\r\n  updateRobotInfo({\r\n    answer_source_switch: value.value ? 'true' : 'false'\r\n  })\r\n}\r\n</script>\r\n","<style lang=\"less\" scoped>\r\n.setting-box {\r\n  position: relative;\r\n  .robot-info-box {\r\n    .robot-prompt {\r\n      line-height: 22px;\r\n      font-size: 14px;\r\n      white-space: pre-wrap;\r\n      word-break: break-all;\r\n      color: #595959;\r\n    }\r\n  }\r\n  .switch-item {\r\n    position: absolute;\r\n    right: 16px;\r\n    top: calc(50% - 8px);\r\n  }\r\n}\r\n</style>\r\n\r\n<template>\r\n  <edit-box class=\"setting-box\" :title=\"t('title_show_like_dislike')\" icon-name=\"like-icon\">\r\n    <template #extra>\r\n      <span></span>\r\n    </template>\r\n    <div class=\"robot-info-box\">\r\n      <div class=\"robot-prompt\">{{ t('msg_show_like_dislike_desc') }}</div>\r\n    </div>\r\n\r\n    <a-switch\r\n      @change=\"handleEdit\"\r\n      class=\"switch-item\"\r\n      :checkedValue=\"1\"\r\n      :unCheckedValue=\"0\"\r\n      v-model:checked=\"robotInfo.feedback_switch\"\r\n      :checked-children=\"t('btn_on')\"\r\n      :un-checked-children=\"t('btn_off')\"\r\n    />\r\n  </edit-box>\r\n</template>\r\n<script setup>\r\nimport { ref, reactive, inject, toRaw } from 'vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\nimport EditBox from './edit-box.vue'\r\n\r\nconst { t } = useI18n('views.robot.robot-config.basic-config.components.show-like')\r\n\r\nconst { robotInfo, updateRobotInfo } = inject('robotInfo')\r\n\r\nconst handleEdit = (val) => {\r\n  updateRobotInfo({})\r\n}\r\n</script>\r\n","<template>\r\n  <cu-scroll>\r\n    <div class=\"content-box\">\r\n      <div class=\"add-btn-block\" v-if=\"currentPermission == 4\">\r\n        <a-button type=\"primary\" @click=\"openAddModal\" :icon=\"h(PlusOutlined)\">{{ t('btn_add_collaborator') }}</a-button>\r\n      </div>\r\n      <div class=\"list-content\">\r\n        <a-table :columns=\"columns\" :data-source=\"tableData\" :pagination=\"false\">\r\n          <!-- @change=\"onTableChange\" -->\r\n\r\n          <template #bodyCell=\"{ column, record }\">\r\n            <template v-if=\"column.key === 'name'\">\r\n              <div class=\"user-block\">\r\n                <a-avatar shape=\"square\" :src=\"record.avatar\" :size=\"40\">\r\n                  <template #icon><UserOutlined v-if=\"!record.avatar\" /></template>\r\n                </a-avatar>\r\n                <div class=\"name-box\">\r\n                  <div class=\"name\">{{ record.user_name }}</div>\r\n                  <div class=\"remark-text\">{{ record.name }}</div>\r\n                </div>\r\n              </div>\r\n            </template>\r\n\r\n            <template v-if=\"column.key === 'operate_rights'\">\r\n              <div class=\"hover-btn-box\" v-if=\"currentPermission == 2 || record.user_name == user_name\">\r\n                <span v-if=\"record.operate_rights == 4\">{{ t('permission_manage') }}</span>\r\n                <span v-if=\"record.operate_rights == 2\">{{ t('permission_edit') }}</span>\r\n                <span v-if=\"record.operate_rights == 1\">{{ t('permission_view') }}</span>\r\n              </div>\r\n              <template v-else-if=\"record.role_type == 1 || record.is_creator == 1\">\r\n                <div class=\"hover-btn-box\">{{ t('permission_manage') }}</div>\r\n              </template>\r\n              <a-popover\r\n                v-else\r\n                placement=\"bottomRight\"\r\n                :title=\"null\"\r\n                :overlayInnerStyle=\"{ padding: '2px' }\"\r\n              >\r\n                <template #content>\r\n                  <div class=\"role-menu-box\">\r\n                    <div class=\"role-menu\" @click=\"handleChangeStatus(record, 4)\">\r\n                      <div class=\"menu-header\">\r\n                        <UserOutlined />\r\n                        <span class=\"title\">{{ t('permission_manage') }}</span>\r\n                      </div>\r\n                      <div class=\"desc\">{{ t('permission_manage_desc') }}</div>\r\n                      <div class=\"check-box\" v-if=\"record.operate_rights == 4\">\r\n                        <CheckOutlined />\r\n                      </div>\r\n                    </div>\r\n                    <div class=\"role-menu\" @click=\"handleChangeStatus(record, 2)\">\r\n                      <div class=\"menu-header\">\r\n                        <EditOutlined />\r\n                        <span class=\"title\">{{ t('permission_edit') }}</span>\r\n                      </div>\r\n                      <div class=\"desc\">{{ t('permission_edit_desc') }}</div>\r\n                      <div class=\"check-box\" v-if=\"record.operate_rights == 2\">\r\n                        <CheckOutlined />\r\n                      </div>\r\n                    </div>\r\n                    <div class=\"role-menu\" @click=\"handleChangeStatus(record, 1)\">\r\n                      <div class=\"menu-header\">\r\n                        <EyeOutlined />\r\n                        <span class=\"title\">{{ t('permission_view') }}</span>\r\n                      </div>\r\n                      <div class=\"desc\">{{ t('permission_view_desc') }}</div>\r\n                      <div class=\"check-box\" v-if=\"record.operate_rights == 1\">\r\n                        <CheckOutlined />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </template>\r\n                <div class=\"hover-btn-box\">\r\n                  <span v-if=\"record.operate_rights == 4\">{{ t('permission_manage') }}</span>\r\n                  <span v-if=\"record.operate_rights == 2\">{{ t('permission_edit') }}</span>\r\n                  <span v-if=\"record.operate_rights == 1\">{{ t('permission_view') }}</span>\r\n                  <DownOutlined />\r\n                </div>\r\n              </a-popover>\r\n            </template>\r\n            <template v-if=\"column.key === 'action'\">\r\n              <template v-if=\"currentPermission == 4 && record.user_name != user_name\">\r\n                <a @click=\"handleDel(record)\" v-if=\"record.role_type != 1 && record.is_creator != 1\"\r\n                  >{{ t('btn_remove') }}</a\r\n                >\r\n              </template>\r\n            </template>\r\n          </template>\r\n        </a-table>\r\n      </div>\r\n    </div>\r\n    <AddCollaborator @ok=\"getData\" ref=\"addCollaboratorRef\" />\r\n  </cu-scroll>\r\n</template>\r\n<script setup>\r\nimport { ref, reactive, h, createVNode, computed } from 'vue'\r\nimport {\r\n  PlusOutlined,\r\n  UserOutlined,\r\n  DownOutlined,\r\n  EditOutlined,\r\n  EyeOutlined,\r\n  CheckOutlined,\r\n  ExclamationCircleOutlined\r\n} from '@ant-design/icons-vue'\r\n\r\nimport {\r\n  savePermissionManage,\r\n  getPartnerManageList,\r\n  deletePermissionManage\r\n} from '@/api/department/index.js'\r\nimport { message, Modal } from 'ant-design-vue'\r\nimport AddCollaborator from '@/components/add-collaborator/add-collaborator.vue'\r\nimport { getRobotPermission } from '@/utils/permission'\r\nimport { useUserStore } from '@/stores/modules/user'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.robot.robot-config.basic-config.role-permission')\r\n\r\nconst userStore = useUserStore()\r\n\r\nconst user_name = computed(() => {\r\n  return userStore.user_name\r\n})\r\n\r\nimport { useRoute } from 'vue-router'\r\nconst query = useRoute().query\r\n\r\nconst currentPermission = ref(getRobotPermission(query.id))\r\n\r\nconst tableData = ref([])\r\nconst queryParams = reactive({\r\n  object_id: query.id,\r\n  object_type: 1\r\n})\r\n\r\n// \"operate_rights\": \"4\",  // 权限 4:可管理  2:可编辑 1:查看\r\nconst getData = () => {\r\n  getPartnerManageList({ ...queryParams }).then((res) => {\r\n    let list = res.data || []\r\n    tableData.value = list\r\n  })\r\n}\r\n\r\ngetData()\r\n\r\nconst addCollaboratorRef = ref(null)\r\n\r\nconst openAddModal = () => {\r\n  addCollaboratorRef.value.show(tableData.value, [\r\n    {\r\n      object_id: +query.id,\r\n      object_type: 1,\r\n      operate_rights: 4\r\n    }\r\n  ])\r\n}\r\n\r\nconst handleChangeStatus = (record, operate_rights) => {\r\n  let right_str = operate_rights == 4 ? t('permission_manage') : operate_rights == 2 ? t('permission_edit') : t('permission_view')\r\n  Modal.confirm({\r\n    title: t('title_tip'),\r\n    icon: createVNode(ExclamationCircleOutlined),\r\n    content: t('msg_confirm_change_permission', { permission: right_str }),\r\n    okText: t('btn_confirm'),\r\n    cancelText: t('btn_cancel'),\r\n    onOk: () => {\r\n      let data = [\r\n        {\r\n          object_id: +record.object_id,\r\n          object_type: +record.object_type,\r\n          operate_rights: +operate_rights\r\n        }\r\n      ]\r\n      savePermissionManage({\r\n        identity_ids: record.identity_id,\r\n        identity_type: record.identity_type,\r\n        object_array: JSON.stringify(data)\r\n      }).then((res) => {\r\n        message.success(t('msg_modify_success'))\r\n        getData()\r\n      })\r\n    },\r\n    onCancel() {}\r\n  })\r\n}\r\n\r\nconst handleDel = (record) => {\r\n  Modal.confirm({\r\n    title: t('title_tip'),\r\n    icon: createVNode(ExclamationCircleOutlined),\r\n    content: t('msg_confirm_delete'),\r\n    okText: t('btn_confirm'),\r\n    okType: 'danger',\r\n    cancelText: t('btn_cancel'),\r\n    onOk: () => {\r\n      deletePermissionManage({\r\n        identity_id: record.identity_id,\r\n        identity_type: record.identity_type,\r\n        object_id: record.object_id,\r\n        object_type: record.object_type\r\n      }).then((res) => {\r\n        message.success(t('msg_delete_success'))\r\n        getData()\r\n      })\r\n    },\r\n    onCancel() {}\r\n  })\r\n}\r\n\r\nconst columns = ref([\r\n  {\r\n    title: t('label_name'),\r\n    dataIndex: 'name',\r\n    key: 'name'\r\n  },\r\n  {\r\n    title: t('label_permission'),\r\n    dataIndex: 'operate_rights',\r\n    key: 'operate_rights'\r\n  },\r\n  {\r\n    title: t('label_action'),\r\n    dataIndex: 'action',\r\n    key: 'action',\r\n    width: 80\r\n  }\r\n])\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.content-box {\r\n  // padding: 24px;\r\n  padding-right: 24px;\r\n  padding-top: 24px;\r\n}\r\n.list-content {\r\n  margin-top: 16px;\r\n}\r\n\r\n.user-block {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  .name-box {\r\n    flex: 1;\r\n    color: #595959;\r\n    line-height: 22px;\r\n    font-size: 14px;\r\n  }\r\n  .remark-text {\r\n    margin-top: 2px;\r\n    font-size: 12px;\r\n    color: #8c8c8c;\r\n    line-height: 20px;\r\n  }\r\n}\r\n\r\n.hover-btn-box {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n  width: fit-content;\r\n  height: 24px;\r\n  font-size: 14px;\r\n  padding: 0 8px;\r\n  border-radius: 6px;\r\n  color: #595959;\r\n  cursor: pointer;\r\n  transition: all 0.2s cubic-bezier(0.645, 0.045, 0.355, 1);\r\n  &:hover {\r\n    background: #e4e6eb;\r\n  }\r\n}\r\n\r\n.role-menu-box {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 2px;\r\n  .role-menu {\r\n    padding: 5px 16px;\r\n    border-radius: 6px;\r\n    color: #262626;\r\n    cursor: pointer;\r\n    position: relative;\r\n    &.active {\r\n      color: #2475fc;\r\n    }\r\n    &:hover {\r\n      background: #f2f4f7;\r\n    }\r\n    .check-box {\r\n      position: absolute;\r\n      top: 16px;\r\n      right: 16px;\r\n      color: #2475fc;\r\n    }\r\n    .menu-header {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 8px;\r\n    }\r\n    .desc {\r\n      color: #8c8c8c;\r\n      margin-top: 4px;\r\n      line-height: 22px;\r\n      padding-left: 24px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<style lang=\"less\" scoped>\r\n.setting-box {\r\n  .actions-box {\r\n    display: flex;\r\n    align-items: center;\r\n    line-height: 22px;\r\n    font-size: 14px;\r\n    color: #595959;\r\n\r\n    .action-btn {\r\n      cursor: pointer;\r\n    }\r\n\r\n    .save-btn {\r\n      color: #2475fc;\r\n    }\r\n  }\r\n\r\n  .library-list {\r\n    display: flex;\r\n    flex-flow: row wrap;\r\n    gap: 16px;\r\n    padding: 0 16px 16px 16px;\r\n\r\n    .library-item {\r\n      position: relative;\r\n      width: 336px;\r\n      padding: 14px 16px;\r\n      border-radius: 2px;\r\n      border: 1px solid #d8dde5;\r\n      background-color: #fff;\r\n\r\n      .library-name {\r\n        width: 100%;\r\n        line-height: 22px;\r\n        font-size: 14px;\r\n        font-weight: 600;\r\n        color: #262626;\r\n        overflow: hidden;\r\n        white-space: nowrap;\r\n        text-overflow: ellipsis;\r\n      }\r\n\r\n      .library-intro {\r\n        width: 100%;\r\n        line-height: 20px;\r\n        font-size: 12px;\r\n        color: #8c8c8c;\r\n        overflow: hidden;\r\n        white-space: nowrap;\r\n        text-overflow: ellipsis;\r\n      }\r\n\r\n      .close-btn {\r\n        position: absolute;\r\n        top: 0;\r\n        right: 6px;\r\n        font-size: 16px;\r\n        color: #8c8c8c;\r\n        cursor: pointer;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n<template>\r\n  <edit-box\r\n    class=\"setting-box\"\r\n    :title=\"t('title_skill')\"\r\n    icon-name=\"skii\"\r\n    v-model:isEdit=\"isEdit\"\r\n    :bodyStyle=\"{ padding: 0 }\"\r\n  >\r\n    <template #tip>\r\n      <a-tooltip placement=\"top\">\r\n        <template #title>\r\n          <span>{{ t('tip_support_workflow') }}</span>\r\n        </template>\r\n        <QuestionCircleOutlined />\r\n      </a-tooltip>\r\n    </template>\r\n    <template #extra>\r\n      <div class=\"actions-box\">\r\n        <a-flex :gap=\"8\">\r\n          <a-button size=\"small\" @click=\"handleOpenSelectLibraryAlert\">{{ t('btn_add_skill') }}</a-button>\r\n        </a-flex>\r\n      </div>\r\n    </template>\r\n    <div class=\"library-list\" v-if=\"selectedLibraryRows.length > 0\">\r\n      <div class=\"library-item\" v-for=\"item in selectedLibraryRows\" :key=\"item.id\">\r\n        <span class=\"close-btn\" @click=\"handleRemoveCheckedLibrary(item)\">\r\n          <CloseCircleOutlined />\r\n        </span>\r\n        <div class=\"library-name\">{{ item.robot_name }}</div>\r\n        <div class=\"library-intro\">{{ item.robot_intro }}</div>\r\n      </div>\r\n    </div>\r\n    <RobotSelectAlert ref=\"robotSelectAlertRef\" @change=\"onChangeLibrarySelected\" />\r\n  </edit-box>\r\n</template>\r\n\r\n<script setup>\r\nimport { relationWorkFlow } from '@/api/robot/index'\r\nimport { ref, reactive, inject, watchEffect, computed, toRaw } from 'vue'\r\nimport { CloseCircleOutlined, QuestionCircleOutlined } from '@ant-design/icons-vue'\r\nimport EditBox from '../edit-box.vue'\r\nimport RobotSelectAlert from './robot-select-alert.vue'\r\nimport { message } from 'ant-design-vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.robot.robot-config.basic-config.components.skill.index')\r\nconst isEdit = ref(false)\r\n\r\nconst { robotInfo, getRobot } = inject('robotInfo')\r\nconst props = defineProps({\r\n  robotList: {\r\n    type: Array,\r\n    default: () => []\r\n  }\r\n})\r\n\r\nconst formState = reactive({\r\n  work_flow_ids: []\r\n})\r\n\r\n// 知识库\r\nconst robotSelectAlertRef = ref(null)\r\nconst selectedLibraryRows = computed(() => {\r\n  return props.robotList.filter((item) => {\r\n    return formState.work_flow_ids.includes(item.id)\r\n  })\r\n})\r\n\r\n// 移除知识库\r\nconst handleRemoveCheckedLibrary = (item) => {\r\n  let index = formState.work_flow_ids.indexOf(item.id)\r\n\r\n  formState.work_flow_ids.splice(index, 1)\r\n\r\n  onSave()\r\n}\r\n\r\nconst onChangeLibrarySelected = (checkedList) => {\r\n  formState.work_flow_ids = [...checkedList]\r\n\r\n  onSave()\r\n}\r\n\r\nconst handleOpenSelectLibraryAlert = () => {\r\n  robotSelectAlertRef.value.open([...formState.work_flow_ids])\r\n}\r\n\r\nconst onSave = () => {\r\n  let formData = { ...toRaw(formState) }\r\n\r\n  formData.work_flow_ids = formData.work_flow_ids.join(',')\r\n\r\n  relationWorkFlow({\r\n    id: robotInfo.id,\r\n    ...formData\r\n  }).then((res) => {\r\n    message.success(t('msg_save_success'))\r\n    getRobot(robotInfo.id)\r\n  })\r\n}\r\n\r\nwatchEffect(() => {\r\n  formState.work_flow_ids = robotInfo.work_flow_ids.split(',')\r\n})\r\n</script>\r\n","<style lang=\"less\" scoped>\r\n.setting-box {\r\n  position: relative;\r\n  .robot-info-box {\r\n    padding-right: 30px;\r\n    display: flex;\r\n    align-items: center;\r\n    flex-wrap: wrap;\r\n    gap: 8px;\r\n    .set-block {\r\n    }\r\n  }\r\n  .switch-item {\r\n    position: absolute;\r\n    right: 16px;\r\n    top: 16px;\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n  }\r\n}\r\n</style>\r\n\r\n<template>\r\n  <edit-box class=\"setting-box\" :title=\"t('title_chat_cache')\" icon-name=\"chat-cache\">\r\n    <template #extra>\r\n      <span></span>\r\n    </template>\r\n    <div class=\"robot-info-box\">\r\n      {{ t('msg_cache_description') }}\r\n      <div class=\"set-block\">\r\n        <a-input-group compact>\r\n          <a-input-number\r\n            v-if=\"state.unix == 'h'\"\r\n            @blur=\"onSave\"\r\n            :precision=\"0\"\r\n            v-model:value=\"state.hValue\"\r\n            :min=\"1\"\r\n            :max=\"72\"\r\n            style=\"width: 70px\"\r\n          />\r\n          <a-input-number\r\n            v-else\r\n            @blur=\"onSave\"\r\n            :precision=\"0\"\r\n            v-model:value=\"state.mValue\"\r\n            :min=\"1\"\r\n            :max=\"4320\"\r\n            style=\"width: 70px\"\r\n          />\r\n          <a-select v-model:value=\"state.unix\" style=\"width: 70px\" @change=\"handleChangeUnix\">\r\n            <a-select-option value=\"h\">{{ t('unit_hour') }}</a-select-option>\r\n            <a-select-option value=\"m\">{{ t('unit_minute') }}</a-select-option>\r\n          </a-select>\r\n        </a-input-group>\r\n      </div>\r\n    </div>\r\n    <div class=\"switch-item\">\r\n      <a-button @click=\"handleCleanCache\" size=\"small\">{{ t('btn_clean_cache') }}</a-button>\r\n      <a-switch\r\n        @change=\"handleEdit\"\r\n        :checkedValue=\"1\"\r\n        :unCheckedValue=\"0\"\r\n        v-model:checked=\"formState.cache_switch\"\r\n        :checked-children=\"t('switch_on')\"\r\n        :un-checked-children=\"t('switch_off')\"\r\n      />\r\n    </div>\r\n  </edit-box>\r\n</template>\r\n<script setup>\r\nimport { ref, reactive, inject, toRaw, watchEffect, watch, createVNode } from 'vue'\r\nimport EditBox from './edit-box.vue'\r\nimport { cleanRobotChatCache } from '@/api/robot/index'\r\nimport { ExclamationCircleOutlined } from '@ant-design/icons-vue'\r\nimport { message, Modal } from 'ant-design-vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.robot.robot-config.basic-config.components.chat-cache')\r\nconst { robotInfo, updateRobotInfo } = inject('robotInfo')\r\n\r\nconst formState = reactive({\r\n  valid_time: '',\r\n  cache_switch: 0\r\n})\r\n\r\nconst state = reactive({\r\n  unix: 'h',\r\n  // 小时数\r\n  hValue: 24,\r\n  mValue: 1440\r\n})\r\n\r\nconst onSave = () => {\r\n  if (state.unix === 'h') {\r\n    formState.valid_time = state.hValue * 3600\r\n  } else {\r\n    formState.valid_time = state.mValue * 60\r\n  }\r\n  updateRobotInfo({\r\n    cache_config: {\r\n      ...formState\r\n    }\r\n  })\r\n}\r\n\r\nconst handleEdit = () => {\r\n  onSave()\r\n}\r\n\r\nconst handleChangeUnix = () => {\r\n  if (state.unix == 'h') {\r\n    state.hValue = parseInt(state.mValue / 60)\r\n  } else {\r\n    state.mValue = parseInt(state.hValue * 60)\r\n  }\r\n  // onSave()\r\n}\r\n\r\nconst handleCleanCache = () => {\r\n  Modal.confirm({\r\n    title: t('msg_confirm_clear_cache'),\r\n    icon: createVNode(ExclamationCircleOutlined),\r\n    content: t('msg_confirm_clear_cache_content'),\r\n    onOk() {\r\n      cleanRobotChatCache({\r\n        id: robotInfo.id,\r\n        robot_key: robotInfo.robot_key\r\n      }).then((res) => {\r\n        message.success(t('msg_clear_success'))\r\n      })\r\n    }\r\n  })\r\n}\r\nwatch(\r\n  () => robotInfo.cache_config,\r\n  () => {\r\n    let cache_config = robotInfo.cache_config || {}\r\n    cache_config = JSON.parse(JSON.stringify(cache_config))\r\n\r\n    formState.cache_switch = cache_config.cache_switch\r\n    formState.valid_time = cache_config.valid_time\r\n    // 判断 cache_config.valid_time 能不能整除24 能的话 state.unix = h 否则 state.unix = m\r\n    if (cache_config.valid_time % 3600 == 0) {\r\n      state.unix = 'h'\r\n      state.hValue = cache_config.valid_time / 3600\r\n    } else {\r\n      state.unix = 'm'\r\n      state.mValue = parseInt(cache_config.valid_time / 60) || 1440\r\n    }\r\n  },\r\n  { immediate: true, deep: true } // immediate: true 表示立即执行一次\r\n)\r\nwatchEffect(() => {})\r\n</script>\r\n","<template>\r\n  <div>\r\n    <a-modal\r\n      v-model:open=\"open\"\r\n      :title=\"t('title_field_detail')\"\r\n      @ok=\"handleOk\"\r\n      :width=\"648\"\r\n      wrapClassName=\"no-padding-modal\"\r\n      :bodyStyle=\"{ 'max-height': '70vh', 'overflow-y': 'auto', 'padding-right': '12px' }\"\r\n    >\r\n      <a-form\r\n        :model=\"form\"\r\n        ref=\"formRef\"\r\n        layout=\"vertical\"\r\n        :label-col=\"{ span: 4 }\"\r\n        :wrapper-col=\"{ span: 24 }\"\r\n      >\r\n        <!-- 字段类型 -->\r\n        <a-form-item :label=\"t('label_field_type')\" name=\"variable_type\">\r\n          <a-select\r\n            @change=\"handleTypChange\"\r\n            v-model:value=\"form.variable_type\"\r\n            :placeholder=\"t('ph_select_field_type')\"\r\n          >\r\n            <a-select-option value=\"input_string\">{{ t('option_text') }}</a-select-option>\r\n            <a-select-option value=\"input_number\">{{ t('option_number') }}</a-select-option>\r\n            <a-select-option value=\"select_one\">{{ t('option_select_one') }}</a-select-option>\r\n            <a-select-option value=\"checkbox_switch\">{{ t('option_checkbox_switch') }}</a-select-option>\r\n          </a-select>\r\n        </a-form-item>\r\n\r\n        <!-- 字段key -->\r\n        <a-form-item\r\n          :label=\"t('label_field_key')\"\r\n          name=\"variable_key\"\r\n          :rules=\"[\r\n            {\r\n              required: true,\r\n              validator: (rule, value) => checkKey(rule, value)\r\n            }\r\n          ]\"\r\n        >\r\n          <a-input v-model:value=\"form.variable_key\" :maxLength=\"10\" :placeholder=\"t('ph_input_field_key')\" />\r\n        </a-form-item>\r\n\r\n        <!-- 字段名 -->\r\n        <a-form-item :label=\"t('label_field_name')\" name=\"variable_name\" :rules=\"[{ required: true }]\">\r\n          <a-input v-model:value=\"form.variable_name\" :maxLength=\"10\" :placeholder=\"t('ph_input_field_name')\" />\r\n        </a-form-item>\r\n\r\n        <!-- 最大长度 -->\r\n        <a-form-item\r\n          :label=\"t('label_max_length')\"\r\n          name=\"max_input_length\"\r\n          v-if=\"['input_string', 'input_number'].includes(form.variable_type)\"\r\n        >\r\n          <a-input-number\r\n            v-model:value=\"form.max_input_length\"\r\n            :placeholder=\"t('ph_input')\"\r\n            :precision=\"0\"\r\n            :min=\"1\"\r\n            :max=\"50\"\r\n          />\r\n        </a-form-item>\r\n\r\n        <!-- 默认值 -->\r\n        <a-form-item :label=\"t('label_default_value')\" name=\"default_value\">\r\n          <div v-if=\"form.variable_type == 'input_string'\">\r\n            <a-input v-model:value=\"form.default_value\" :placeholder=\"t('ph_input_default_value')\" />\r\n          </div>\r\n          <div v-if=\"form.variable_type == 'input_number'\">\r\n            <a-input-number\r\n              :maxLength=\"50\"\r\n              style=\"width: 100%\"\r\n              stringMode\r\n              v-model:value=\"form.default_value\"\r\n              :placeholder=\"t('ph_input_default_value')\"\r\n            />\r\n          </div>\r\n          <div v-if=\"form.variable_type == 'select_one'\" :placeholder=\"t('ph_select_default_value')\">\r\n            <a-select v-model:value=\"form.default_value\" style=\"width: 100%\">\r\n              <a-select-option v-for=\"item in filtersOptions\" :value=\"item.label\">{{\r\n                item.label\r\n              }}</a-select-option>\r\n            </a-select>\r\n          </div>\r\n          <div v-if=\"form.variable_type == 'checkbox_switch'\" :placeholder=\"t('ph_select_default_value')\">\r\n            <a-select v-model:value=\"form.default_value\" style=\"width: 100%\">\r\n              <a-select-option value=\"1\">{{ t('option_selected') }}</a-select-option>\r\n              <a-select-option value=\"2\">{{ t('option_not_selected') }}</a-select-option>\r\n            </a-select>\r\n          </div>\r\n        </a-form-item>\r\n\r\n        <!-- 是否必填 -->\r\n        <a-form-item :label=\"null\" name=\"must_input\" v-if=\"form.variable_type != 'checkbox_switch'\">\r\n          <a-checkbox v-model:checked=\"form.must_input\">{{ t('label_required') }}</a-checkbox>\r\n        </a-form-item>\r\n\r\n        <!-- 下拉选项（仅当类型为 select_one 时显示） -->\r\n        <a-form-item v-if=\"form.variable_type === 'select_one'\" :label=\"t('label_options')\" name=\"options\">\r\n          <a-button type=\"dashed\" @click=\"addOption\">{{ t('btn_add_option') }}</a-button>\r\n          <a-form-item-rest>\r\n            <draggable\r\n              v-model=\"form.options\"\r\n              item-key=\"index\"\r\n              group=\"table-rows\"\r\n              handle=\".drag-btn\"\r\n            >\r\n              <template #item=\"{ element, index }\">\r\n                <div :key=\"index\" class=\"option-item\">\r\n                  <span class=\"drag-btn\"><svg-icon name=\"drag\" /></span>\r\n                  <a-input\r\n                    v-model:value=\"element.label\"\r\n                    :maxLength=\"50\"\r\n                    :placeholder=\"t('ph_input_option_label')\"\r\n                  />\r\n                  <a-button type=\"link\" danger @click=\"removeOption(index)\">{{ t('btn_delete') }}</a-button>\r\n                </div>\r\n              </template>\r\n            </draggable>\r\n          </a-form-item-rest>\r\n        </a-form-item>\r\n      </a-form>\r\n    </a-modal>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, computed } from 'vue'\r\nimport { createChatVariable } from '@/api/robot/index'\r\nimport { useRoute } from 'vue-router'\r\nimport draggable from 'vuedraggable'\r\nimport { message } from 'ant-design-vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.robot.robot-config.basic-config.components.variable-setting.add-variable-modal')\r\n\r\nconst query = useRoute().query\r\nconst open = ref(false)\r\n\r\nconst emit = defineEmits(['ok'])\r\n\r\nconst form = reactive({\r\n  robot_key: query.robot_key,\r\n  id: '',\r\n  variable_type: 'input_string',\r\n  variable_key: '',\r\n  variable_name: '',\r\n  max_input_length: 10,\r\n  default_value: '',\r\n  must_input: false,\r\n  options: [{ label: '' }] // 初始化一个空选项\r\n})\r\n\r\nconst filtersOptions = computed(() => {\r\n  return form.options.filter((item) => item.label)\r\n})\r\n\r\nconst show = (data = {}) => {\r\n  form.id = data.id || ''\r\n  form.variable_type = data.variable_type || 'input_string'\r\n  form.variable_key = data.variable_key || ''\r\n  form.variable_name = data.variable_name || ''\r\n  form.max_input_length = data.max_input_length || 10\r\n  form.default_value = data.default_value || ''\r\n  form.must_input = data.must_input == '1'\r\n  form.options = data.options || [{ label: '' }]\r\n  open.value = true\r\n}\r\n\r\nconst checkKey = (rule, value) => {\r\n  if (!value) {\r\n    return Promise.reject(t('msg_input_key_required'))\r\n  }\r\n  // 校验是否只包含英文字母和下划线\r\n  const regex = /^[a-zA-Z_]+$/\r\n  if (!regex.test(value)) {\r\n    return Promise.reject(t('msg_key_invalid'))\r\n  }\r\n  return Promise.resolve()\r\n}\r\n\r\nconst formRef = ref()\r\nconst handleOk = () => {\r\n  formRef.value.validate().then(() => {\r\n    // 验证成功，可以提交表单\r\n    let options = []\r\n    if (form.variable_type == 'select_one') {\r\n      options = form.options.filter((item) => item.label != '')\r\n      if (options.length == 0) {\r\n        return message.error(t('msg_fill_options'))\r\n      }\r\n    }\r\n    let max_input_length = form.max_input_length\r\n    if (form.variable_type == 'select_one' || form.variable_type == 'checkbox_switch') {\r\n      max_input_length = 1\r\n    }\r\n    createChatVariable({\r\n      ...form,\r\n      max_input_length,\r\n      must_input: form.must_input ? 1 : 0,\r\n      options: JSON.stringify(options)\r\n    }).then((res) => {\r\n      message.success(form.id ? t('msg_update_success') : t('msg_create_success'))\r\n      open.value = false\r\n      emit('ok')\r\n    })\r\n  })\r\n}\r\n\r\nconst addOption = () => {\r\n  form.options.push({ label: '' })\r\n}\r\n\r\nconst removeOption = (index) => {\r\n  if (form.options.length > 1) {\r\n    form.options.splice(index, 1)\r\n  }\r\n}\r\n\r\nconst handleTypChange = () => {\r\n  form.options = [{ label: '' }]\r\n  if (form.variable_type == 'checkbox_switch') {\r\n    form.default_value = '2'\r\n  } else {\r\n    form.default_value = void 0\r\n  }\r\n}\r\n\r\ndefineExpose({\r\n  show\r\n})\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.option-item {\r\n  margin-top: 8px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  .drag-btn {\r\n    cursor: grab;\r\n  }\r\n}\r\n</style>\r\n","<style lang=\"less\" scoped>\r\n.setting-box {\r\n  .variable-list-box {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 12px;\r\n    flex-wrap: wrap;\r\n    .variable-item {\r\n      display: flex;\r\n      align-items: center;\r\n      color: #595959;\r\n      font-size: 14px;\r\n      line-height: 22px;\r\n      gap: 4px;\r\n      .variable-info-block {\r\n        border: 1px solid var(--06, #d9d9d9);\r\n        padding: 4px 8px;\r\n        border-radius: 6px;\r\n        padding-left: 12px;\r\n        display: flex;\r\n        align-items: center;\r\n        background: #fff;\r\n      }\r\n      .type-tags {\r\n        padding: 0px 8px;\r\n        border-radius: 6px;\r\n        border: 1px solid #00000026;\r\n        color: #595959;\r\n        font-size: 12px;\r\n        line-height: 20px;\r\n        height: 22px;\r\n      }\r\n      .btn-box {\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        width: 32px;\r\n        height: 32px;\r\n        border-radius: 6px;\r\n        font-size: 16px;\r\n        cursor: pointer;\r\n        transition: all 0.3s cubic-bezier(0.645, 0.045, 0.355, 1);\r\n        &:hover {\r\n          background: var(--07, #e4e6eb);\r\n        }\r\n      }\r\n      .is-required {\r\n        &::before {\r\n          content: '*';\r\n          color: red;\r\n          font-size: 12px;\r\n          margin-right: 2px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n<template>\r\n  <edit-box class=\"setting-box\" :title=\"t('title')\" icon-name=\"variable-icon\">\r\n    <template #tip>\r\n      <a-tooltip placement=\"top\" :overlayInnerStyle=\"{ width: '400px' }\">\r\n        <template #title>\r\n          <span>{{ t('tip') }}</span>\r\n        </template>\r\n        <QuestionCircleOutlined />\r\n      </a-tooltip>\r\n    </template>\r\n    <template #extra>\r\n      <div class=\"actions-box\">\r\n        <a-flex :gap=\"8\">\r\n          <a-button size=\"small\" @click=\"handleOpenModal\">{{ t('btn_add_variable') }}</a-button>\r\n        </a-flex>\r\n      </div>\r\n    </template>\r\n    <div class=\"form-box\">\r\n      <div class=\"variable-list-box\">\r\n        <div class=\"variable-item\" v-for=\"item in chatVariables\" :key=\"item.id\">\r\n          <div class=\"variable-info-block\">\r\n            <span :class=\"{ 'is-required': item.must_input == 1 }\">{{ item.variable_key }}</span>\r\n            <span>（{{ item.variable_name }}）</span>\r\n            <span class=\"type-tags\">\r\n              {{ typeNameMap[item.variable_type] }}\r\n            </span>\r\n          </div>\r\n          <a-dropdown>\r\n            <div class=\"btn-box\">\r\n              <svg-icon name=\"more-cycle\"></svg-icon>\r\n            </div>\r\n            <template #overlay>\r\n              <a-menu>\r\n                <a-menu-item>\r\n                  <a @click=\"handleEdit(item)\">{{ t('btn_edit') }}</a>\r\n                </a-menu-item>\r\n                <a-menu-item>\r\n                  <a @click=\"handleDelVaribel(item)\">{{ t('btn_delete') }}</a>\r\n                </a-menu-item>\r\n              </a-menu>\r\n            </template>\r\n          </a-dropdown>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <AddVariableModal ref=\"addVariableModalRef\" @ok=\"handleOk\" />\r\n  </edit-box>\r\n</template>\r\n<script setup>\r\nimport { ref, onMounted, computed, createVNode } from 'vue'\r\nimport { EditOutlined, CloseCircleOutlined, ExclamationCircleOutlined } from '@ant-design/icons-vue'\r\nimport EditBox from '../edit-box.vue'\r\nimport { QuestionCircleOutlined } from '@ant-design/icons-vue'\r\nimport { deleteChatVariable } from '@/api/robot/index'\r\nimport AddVariableModal from './add-variable-modal.vue'\r\nimport { message, Modal } from 'ant-design-vue'\r\nimport { useRobotStore } from '@/stores/modules/robot'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.robot.robot-config.basic-config.components.variable-setting.index')\r\nconst robotStore = useRobotStore()\r\n\r\nlet typeNameMap = {\r\n  input_string: 'string',\r\n  input_number: 'number',\r\n  select_one: 'string',\r\n  checkbox_switch: 'boolean'\r\n}\r\n\r\nconst chatVariables = computed(() => {\r\n  return robotStore.chatVariables\r\n})\r\n\r\nconst addVariableModalRef = ref(null)\r\nconst handleOpenModal = () => {\r\n  if(chatVariables.value.length >= 10){\r\n    return message.error(t('msg_max_variables'))\r\n  }\r\n  addVariableModalRef.value.show()\r\n}\r\nconst handleEdit = (item) => {\r\n  addVariableModalRef.value.show(JSON.parse(JSON.stringify(item)))\r\n}\r\n\r\nconst handleOk = () => {\r\n  robotStore.fetchChatVariables()\r\n}\r\n\r\nconst handleDelVaribel = (item) => {\r\n  Modal.confirm({\r\n    title: t('msg_delete_confirm'),\r\n    icon: createVNode(ExclamationCircleOutlined),\r\n    content: t('msg_delete_content', { name: item.variable_name }),\r\n    okType: 'danger',\r\n    onOk() {\r\n      deleteChatVariable({\r\n        robot_key: item.robot_key,\r\n        id: item.id\r\n      }).then((res) => {\r\n        message.success(t('msg_delete_success'))\r\n        handleOk()\r\n      })\r\n    }\r\n  })\r\n}\r\n\r\nonMounted(() => {})\r\n</script>\r\n","<style lang=\"less\" scoped>\r\n.setting-box {\r\n  position: relative;\r\n  .robot-info-box {\r\n    .robot-prompt {\r\n      display: flex;\r\n      align-items: center;\r\n      line-height: 22px;\r\n      font-size: 14px;\r\n      white-space: pre-wrap;\r\n      word-break: break-all;\r\n      color: #595959;\r\n    }\r\n  }\r\n  .switch-item {\r\n    position: absolute;\r\n    right: 16px;\r\n    top: calc(50% - 8px);\r\n  }\r\n}\r\n</style>\r\n\r\n<template>\r\n  <edit-box class=\"setting-box\" :title=\"t('title_answer_generation_prompt')\" icon-name=\"suggested-issues\">\r\n    <template #extra>\r\n      <span></span>\r\n    </template>\r\n    <div class=\"robot-info-box\">\r\n      <div class=\"robot-prompt\">\r\n        {{ t('msg_answer_generation_description') }}\r\n        <a-input\r\n          v-model:value=\"robotInfo.tips_before_answer_content\"\r\n          style=\"width: 280px\"\r\n          :maxLength=\"10\"\r\n          :placeholder=\"t('ph_input')\"\r\n          @blur=\"handleBlur\"\r\n        />\r\n      </div>\r\n    </div>\r\n\r\n    <a-switch\r\n      @change=\"handleEdit\"\r\n      class=\"switch-item\"\r\n      checkedValue=\"true\"\r\n      unCheckedValue=\"false\"\r\n      v-model:checked=\"robotInfo.tips_before_answer_switch\"\r\n      :checked-children=\"t('btn_on')\"\r\n      :un-checked-children=\"t('btn_off')\"\r\n    />\r\n  </edit-box>\r\n</template>\r\n<script setup>\r\nimport { ref, reactive, inject, toRaw } from 'vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\nimport EditBox from './edit-box.vue'\r\n\r\nconst { t } = useI18n('views.robot.robot-config.basic-config.components.answer-prompt')\r\n\r\nconst isEdit = ref(false)\r\nconst { robotInfo, updateRobotInfo } = inject('robotInfo')\r\n\r\nconst handleEdit = (val) => {\r\n  updateRobotInfo({})\r\n}\r\n\r\nconst handleBlur = () => {\r\n  console.log(robotInfo.tips_before_answer_content)\r\n  if (robotInfo.tips_before_answer_content == '') {\r\n    robotInfo.tips_before_answer_content = t('msg_thinking_please_wait')\r\n  }\r\n  handleEdit()\r\n}\r\n</script>\r\n","<template>\r\n  <a-tabs class=\"tab-wrapper\" @change=\"handleTabChange\" v-model:activeKey=\"activeKey\">\r\n    <a-tab-pane :key=\"1\" :tab=\"t('tab_basic_config')\"></a-tab-pane>\r\n    <a-tab-pane v-if=\"false\" :key=\"3\" :tab=\"t('tab_permission_management')\"></a-tab-pane>\r\n    <a-tab-pane :key=\"2\" :tab=\"t('tab_common_questions')\"></a-tab-pane>\r\n  </a-tabs>\r\n  <div class=\"robot-config-page\" v-if=\"activeKey == 1\">\r\n    <div class=\"scroll-box\" ref=\"scrollBox\">\r\n      <div class=\"setting-box\">\r\n        <BasicConfig />\r\n      </div>\r\n      <div class=\"setting-box\">\r\n        <AssociatedKnowledgeBase />\r\n      </div>\r\n      <div class=\"setting-box\">\r\n        <ModelSettings />\r\n      </div>\r\n      <div class=\"setting-box\">\r\n        <ChatMode />\r\n      </div>\r\n      <div class=\"setting-box\">\r\n        <ChatCache />\r\n      </div>\r\n      <div class=\"setting-box\">\r\n        <SystemPromptWords :robotList=\"workFlowRobotList\" />\r\n      </div>\r\n      <div class=\"setting-box\">\r\n        <Skill :robotList=\"workFlowRobotList\" />\r\n      </div>\r\n      <div class=\"setting-box\">\r\n        <DataBase />\r\n      </div>\r\n      <div class=\"setting-box\">\r\n        <WelcomeWords />\r\n      </div>\r\n\r\n      <div class=\"setting-box\">\r\n        <VariableSetting />\r\n      </div>\r\n\r\n      <div class=\"setting-box\">\r\n        <UnknownProblemPrompt />\r\n      </div>\r\n      <div class=\"setting-box\">\r\n        <SensitiveWords />\r\n      </div>\r\n      <!--  \r\n      <div class=\"setting-box\">\r\n        <MarkdownSetting />\r\n      </div>\r\n      -->\r\n      <div class=\"setting-box\">\r\n        <ProblemOptimization />\r\n      </div>\r\n      <div class=\"setting-box\">\r\n        <SuggestedIssues />\r\n      </div>\r\n      <div class=\"setting-box\">\r\n        <DisplayAitations />\r\n      </div>\r\n      <div class=\"setting-box\">\r\n        <AnswerPrompt />\r\n      </div>\r\n      <div class=\"setting-box\">\r\n        <ShowLike />\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"robot-config-page\" v-if=\"activeKey == 2\">\r\n    <CommonProblem />\r\n  </div>\r\n  <div class=\"robot-config-page\" v-if=\"activeKey == 3\">\r\n    <rolePermission />\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { reactive, ref, toRaw, provide, onMounted } from 'vue'\r\nimport { storeToRefs } from 'pinia'\r\nimport { message } from 'ant-design-vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\nimport BasicConfig from './components/basic-config.vue'\r\nimport SystemPromptWords from './components/system-prompt-words.vue'\r\nimport ModelSettings from './components/model-settings.vue'\r\nimport AssociatedKnowledgeBase from './components/associated-knowledge-base/index.vue'\r\nimport DataBase from './components/data-base/index.vue'\r\nimport WelcomeWords from './components/welcome-words.vue'\r\nimport UnknownProblemPrompt from './components/unknown-problem-prompt.vue'\r\nimport ProblemOptimization from './components/problem-optimization.vue'\r\nimport SuggestedIssues from './components/suggested-issues.vue'\r\nimport SensitiveWords from './components/sensitive-words.vue'\r\nimport ChatMode from './components/chat-mode/index.vue'\r\nimport MarkdownSetting from './components/markdown-setting.vue'\r\nimport CommonProblem from './components/common-problem.vue'\r\nimport DisplayAitations from './components/display-aitations.vue'\r\nimport { saveRobot, getRobotList } from '@/api/robot/index'\r\nimport { useRobotStore } from '@/stores/modules/robot'\r\nimport { useModelStore } from '@/stores/modules/model'\r\nimport ShowLike from './components/show-like.vue'\r\nimport rolePermission from './role-permission.vue'\r\nimport Skill from './components/skill/index.vue'\r\nimport ChatCache from './components/chat-cache.vue'\r\nimport VariableSetting from './components/variable-setting/index.vue'\r\nimport AnswerPrompt from './components/answer-prompt.vue'\r\n\r\nconst { t } = useI18n('views.robot.robot-config.basic-config.index')\r\n\r\nconst robotStore = useRobotStore()\r\nconst activeLocalKey = '/robot/config/basic-config/activeKey'\r\n\r\nconst scrollBox = ref(null)\r\n\r\nconst { robotInfo } = storeToRefs(robotStore)\r\nconst { getRobot, fetchChatVariables } = robotStore\r\n\r\nconst modelStore = useModelStore()\r\n\r\nconst scrollBoxToBottom = () => {\r\n  scrollBox.value.scrollTop = scrollBox.value.scrollHeight\r\n}\r\nconst activeKey = ref(+localStorage.getItem(activeLocalKey) || 1)\r\nconst saveLoading = ref(false)\r\n\r\n// 基本配置\r\nconst formState = reactive(robotInfo.value)\r\n\r\nconst updateRobotInfo = (val) => {\r\n  let newState = JSON.parse(JSON.stringify(val))\r\n  // 对机器人头像特殊处理\r\n  if (val.robot_avatar) {\r\n    newState.robot_avatar = new File([val.robot_avatar], val.robot_avatar.name)\r\n  }\r\n  if(!newState.op_type_relation_library && formState.op_type_relation_library){\r\n    delete formState.op_type_relation_library\r\n  }\r\n  Object.assign(formState, newState)\r\n\r\n  saveForm()\r\n}\r\nconst workFlowRobotList = ref([])\r\nconst getWorkFlowRobotList = ()=>{\r\n  getRobotList({ application_type: 1 }).then(res=>{\r\n    workFlowRobotList.value = res.data || []\r\n  })\r\n}\r\n\r\nprovide('robotInfo', {\r\n  robotInfo: formState,\r\n  updateRobotInfo,\r\n  scrollBoxToBottom,\r\n  getRobot,\r\n})\r\n\r\nconst saveForm = () => {\r\n  // 对机器人头像特殊处理\r\n  let robot_avatar\r\n  if (formState.robot_avatar) {\r\n    robot_avatar = new File([formState.robot_avatar], formState.robot_avatar.name)\r\n  }\r\n  let formData = JSON.parse(JSON.stringify(toRaw(formState)))\r\n  // 有机器人头像就赋值\r\n  if (robot_avatar) {\r\n    formData.robot_avatar = robot_avatar\r\n  }\r\n  let welcomes = formData.welcomes\r\n\r\n  welcomes.question = welcomes.question.map((item) => {\r\n    return item.content\r\n  })\r\n\r\n  formData.welcomes = JSON.stringify(welcomes)\r\n  formData.prompt_struct = JSON.stringify(formData.prompt_struct)\r\n\r\n  let unknown_question_prompt = formData.unknown_question_prompt\r\n\r\n  unknown_question_prompt.question = unknown_question_prompt.question.map((item) => {\r\n    return item.content\r\n  })\r\n\r\n  formData.unknown_question_prompt = JSON.stringify(unknown_question_prompt)\r\n\r\n  formData.cache_config = JSON.stringify(formData.cache_config)\r\n\r\n  delete formData.robot_avatar_url\r\n\r\n  saveLoading.value = true\r\n\r\n  saveRobot(formData)\r\n    .then((res) => {\r\n      if (res.res != 0) {\r\n        return message.error(res.msg)\r\n      }\r\n\r\n      saveLoading.value = false\r\n\r\n      message.success(t('msg_save_success'))\r\n\r\n      getRobot(formState.id)\r\n    })\r\n    .catch(() => {\r\n      saveLoading.value = false\r\n    })\r\n}\r\n\r\nconst handleTabChange = () => {\r\n  localStorage.setItem(activeLocalKey, activeKey.value)\r\n}\r\n\r\n\r\nonMounted(()=>{\r\n  getWorkFlowRobotList()\r\n  modelStore.getAllmodelList()\r\n  fetchChatVariables()\r\n})\r\n\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.robot-config-page {\r\n  height: calc(100% - 46px);\r\n  width: 100%;\r\n  padding: 8px 10px 24px 24px;\r\n  padding-bottom: 0;\r\n  overflow: hidden;\r\n  background-color: #fff;\r\n\r\n  .scroll-box {\r\n    height: 100%;\r\n    overflow-y: auto;\r\n  }\r\n\r\n  .setting-box {\r\n    margin-bottom: 16px;\r\n  }\r\n}\r\n::v-deep(.ant-tabs-nav-wrap) {\r\n  padding-left: 24px;\r\n}\r\n.tab-wrapper ::v-deep(.ant-tabs-nav){\r\n  margin-bottom: 0;\r\n}\r\n</style>\r\n"],"names":["emit","__emit","props","__props","t","useI18n","handleEdit","val","handleSave","_createElementBlock","_normalizeClass","_createElementVNode","_hoisted_1","_hoisted_2","_createVNode","_component_svg_icon","_hoisted_3","$slots","_hoisted_4","_renderSlot","_ctx","_openBlock","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_createBlock","_component_a_flex","_component_a_button","_unref","robotStore","useRobotStore","isEdit","ref","robotInfo","updateRobotInfo","inject","formState","reactive","robotList","computed","robotGroupList","groupName","group_name","currentRobotItem","item","groupItem","onSave","toRaw","handleChangeAvatar","fileList","file","getBase64","base64Url","EditBox","$event","_withDirectives","_toDisplayString","CuUpload","_component_a_input","_cache","_hoisted_9","_hoisted_10","_component_a_textarea","_hoisted_11","_hoisted_12","_hoisted_14","_hoisted_15","simpleImage","Empty","open","confirmLoading","query","useRoute","demand","isLoading","quickData","description","show","hasData","defaultData","handleQuickMark","title","handleCreatePrompt","message","createPromptByAi","res","handleOk","__expose","_component_a_modal","LoadingOutlined","_Fragment","_renderList","_component_a_tag","_createTextVNode","_component_a_spin","_hoisted_13","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","index","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_component_a_empty","formRef","data","newData","groupList","getPromptLibraryGroup","parmas","savePromptLibraryItems","_component_a_form","_component_a_form_item","_component_a_select","_component_a_select_option","_sfc_main","value","path","valuePath","find","options","level","itemValue","values","currentOptions","i","found","levelIndex","e","panelEl","rect","viewportWidth","estimatedNextPanelWidth","$data","$options","args","getTreeOptions","result","opt","CascadePanel","htmlStr","div","text","node","textContent","jMention","selectedListMap","mySelectedList","JMention","html","defaultSelectedList","treeOptions","selectedList","replacedValues","regex","len","selection","range","startOffset","startContainer","textBeforeCursor","childNodes","lastAtIndex","dropdownListRect","viewportHeight","top","left","width","height","nodeList","lastChar","isExistStartWith","dataSet","prevCharOffset","prevCharNode","prevSibling","span","key","newRange","selectedValuePath","selectedPath","isInit","direction","leftMatch","topMatch","currentLeft","currentTop","newLeft","_Teleport","_component_CascadePanel","$props","$setup","PromptDefaultReplyMarkdown","PromptDefaultAnswerImage","prompt_struct_default","outSwitch","imgSwitch","outDiySwitch","imgDiySwitch","atinputRef","chatVariables","label","watch","changeValue","isHide","handleShowMore","checkStringContains","str","searchStr","prompt_type","currentPromptType","handleChangeSwitch","handleDiyChangeSwitch","handleReset","handleImportSkill","work_flow_ids","selectRobotList","skill_str","handleAddTheme","handleDeleteTheme","handleAiSave","prompt_struct","onCancel","aiCreatePromptRef","onShowAiCreateModal","importPromptRef","onShowAddPromptModal","uploadPromptRef","onShowUpPromptModal","handleSavePrompt","_component_a_tabs","_component_a_tab_pane","_component_a_tooltip","ToTopOutlined","DownloadOutlined","_component_a_switch","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","CloseCircleOutlined","_hoisted_43","_hoisted_44","h","PlusOutlined","_hoisted_45","UpOutlined","DownOutlined","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","AtInput","_withCtx","payload","_hoisted_50","_hoisted_51","_hoisted_52","AiCreatePrompt","ImportPrompt","UploadPrompt","grid","getRobot","disableMultimodalInput","handleModelChange","attr","choosable_thinking","onVectorModelLoaded","list","choosable_thinking_map","show_enable_thinking","params","handleCancel","watchEffect","getModelName","getModelNameText","_component_a_row","_component_a_col","ModelSelect","_component_a_radio_group","_component_a_radio","QuestionCircleOutlined","_component_a_slider","_component_a_input_number","CuTooltip","retrievalModeList","metaFilterRef","metaList","r","getMetaList","getRobotMetaSchemaList","handleRerankStatusChange","handleSelectRetrievalMode","checkRerank","triggerChange","WeightSelect","MetaFilterBox","handleVisibilityChange","onMounted","onUnmounted","toEditPage","_component_a_alert","_component_cu_scroll","RightOutlined","companyStore","useCompanyStore","_a","libraryList","librarySelectAlertRef","wxAppLibary","selectedLibraryRows","noOpenLibraryList","handleRemoveCheckedLibrary","onChangeLibrarySelected","checkedList","handleOpenSelectLibraryAlert","recallSettingsAlertRef","handleOpenRecallSettingsAlert","noOpenGraphModalRef","onChangeRecallSettings","formData","getList","getLibraryList","loadWxLbStatus","getSpecifyAbilityConfig","_data","toLibraryDetail","_withModifiers","LibrarySelectAlert","RecallSettingsAlert","NoOpenGraphModal","state","saveCheckedList","getFormList","isRefresh","openAddLibrary","_component_a_checkbox_group","_component_a_checkbox","_imports_0","drag","scrollBoxToBottom","checkWelcomeQuestion","isEmity","addQuestion","getUuid","deleteOption","question","content","id","draggable","element","nextTick","isBgSet","modelStatus","vectorModelList","setDefaultModel","modelConfig","model","child","handleChangeModel","$refs","toManagePage","chat_typeValue","directStateData","directState","triggerSave","_createSlots","_vShow","ChatEditAlertRef","ChatEditAlert","checked","handleChange","_imports_1","_imports_2","_imports_3","common_question_list","common_question_list_show","useForm","Form","modalTitle","formRules","resetFields","validate","validateInfos","edit","delQuestion","commonQuestionList","Modal","createVNode","ExclamationCircleOutlined","handleChangeStatus","onDragEnd","_component_a_divider","EditOutlined","_mergeProps","SwitchBox","userStore","useUserStore","user_name","currentPermission","getRobotPermission","tableData","queryParams","getData","getPartnerManageList","addCollaboratorRef","openAddModal","record","operate_rights","right_str","savePermissionManage","handleDel","deletePermissionManage","columns","_component_a_table","column","_component_a_avatar","UserOutlined","_component_a_popover","CheckOutlined","EyeOutlined","AddCollaborator","robotSelectAlertRef","relationWorkFlow","RobotSelectAlert","handleChangeUnix","handleCleanCache","cleanRobotChatCache","cache_config","_component_a_input_group","form","filtersOptions","checkKey","rule","max_input_length","createChatVariable","addOption","removeOption","handleTypChange","_component_a_form_item_rest","typeNameMap","addVariableModalRef","handleOpenModal","handleDelVaribel","deleteChatVariable","_component_a_dropdown","_component_a_menu","_component_a_menu_item","AddVariableModal","handleBlur","activeLocalKey","scrollBox","storeToRefs","fetchChatVariables","modelStore","useModelStore","activeKey","saveLoading","newState","saveForm","workFlowRobotList","getWorkFlowRobotList","getRobotList","provide","robot_avatar","welcomes","unknown_question_prompt","saveRobot","handleTabChange","BasicConfig","AssociatedKnowledgeBase","ModelSettings","ChatMode","ChatCache","SystemPromptWords","Skill","DataBase","WelcomeWords","VariableSetting","UnknownProblemPrompt","SensitiveWords","ProblemOptimization","SuggestedIssues","DisplayAitations","AnswerPrompt","ShowLike","CommonProblem","rolePermission"],"mappings":"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"}