import{_ as O,d as T}from"../../index-CB2DywzJ.js";import{f as r,ae as f,ad as a,ar as h,k as l,o as U,aw as q,ac as p,as as t,u as w,av as z,at as o,az as I,G as i,F as E,n as F,q as G}from"./vue-chunks-CGLjTDrY.js";import{G as $,M as j,d as L,aE as J,B as K,J as P,R as S}from"./ui-antd-BHaxN-GS.js";import{U as A}from"./update-modal-D7romShY.js";import{L as Q}from"./loading-box-CNnW6NDo.js";import{g as W}from"./index-CjfwMgww.js";import"./neo4j-CSfpjqgw.js";import"./utils-pAinW4BS.js";import"./other-BrZCAsTs.js";/* empty css                                                                     */const X={__name:"version-modal",setup(V,{expose:b}){const _=r(!1),u=r([]),c=[{title:"版本",dataIndex:"version",width:100},{title:"更新时间",dataIndex:"update_time_text",width:160},{title:"发布者",dataIndex:"author",width:100}];function y(v=[]){u.value=v,_.value=!0}return b({show:y}),(v,s)=>{const k=$,M=j;return a(),f(M,{title:"版本历史",open:_.value,"onUpdate:open":s[0]||(s[0]=x=>_.value=x),width:"500px",footer:null},{default:h(()=>[l(k,{columns:c,"data-source":u.value},null,8,["data-source"])]),_:1},8,["open"])}}},Z={class:"_container _plugin-detail-cont"},tt={class:"header"},et={key:1,class:"content"},st={class:"base-info"},ot={class:"top"},at=["src"],nt={class:"info"},it={class:"left"},lt={class:"name zm-line1"},dt={class:"source"},rt={class:"right"},_t=["href"],ut={class:"desc"},ct={class:"action-box"},vt={class:"left"},mt={class:"detail-info"},pt={class:"left"},ft={key:0,class:"main-block"},ht={class:"text-cont"},yt={class:"main-block"},kt=["innerHTML"],xt={class:"right"},gt={class:"main-block"},wt={class:"text-cont flex-center"},bt=["src"],Mt={class:"main-block"},Bt={class:"version-info"},Rt={class:"text-cont"},Yt={class:"main-block"},Dt={class:"text-cont"},Ht={__name:"detail",setup(V){const b=z(),_=q(),u=r(!0),c=r(!0),y=r(null),v=r(null),s=r({});U(()=>{var n;y.value=(n=_.query)==null?void 0:n.name,k()});function k(){c.value=!0,W({name:y.value}).then(n=>{var d,g;let e=(n==null?void 0:n.data)||{};s.value=e.remote,s.value.local=e.local,s.value.has_update=((d=e.local)==null?void 0:d.version)!=((g=e.remote)==null?void 0:g.latest_version),s.value.latest_version_history.map(m=>{m.update_time_text=L.unix(m.update_time).format("YYYY-MM-DD HH:mm"),m.author=s.value.author})}).finally(()=>{c.value=!1})}function M(){v.value.show(s.value.latest_version_history||[])}function x(){let{latest_version_detail:n,local:e}=s.value;u.value.show(s.value,n,e)}return(n,e)=>{var B,R,Y,D,H,C;const d=K,g=T,m=P,N=G("viewer");return a(),p("div",Z,[t("div",tt,[l(w(J),{onClick:e[0]||(e[0]=Ct=>w(b).back()),class:"back-icon"}),e[1]||(e[1]=t("span",{class:"title"},"插件详情",-1))]),c.value?(a(),f(Q,{key:0})):(a(),p("div",et,[t("div",st,[t("div",ot,[t("img",{class:"avatar",src:s.value.icon},null,8,at),t("div",nt,[t("div",it,[t("div",lt,o(s.value.title),1),t("div",dt,o(s.value.author),1)]),t("div",rt,[s.value.help_url?(a(),p("a",{key:0,href:s.value.help_url,target:"_blank"},[l(d,{type:"primary",ghost:""},{default:h(()=>[...e[2]||(e[2]=[i("使用说明",-1)])]),_:1})],8,_t)):I("",!0),s.value.local?(a(),p(E,{key:1},[s.value.has_update?(a(),f(d,{key:0,type:"primary",onClick:x},{default:h(()=>[...e[3]||(e[3]=[i("更 新",-1)])]),_:1})):(a(),f(d,{key:1},{default:h(()=>[...e[4]||(e[4]=[i("已安装",-1)])]),_:1}))],64)):(a(),f(d,{key:2,type:"primary",onClick:x},{default:h(()=>[...e[5]||(e[5]=[i("安 装",-1)])]),_:1}))])])]),t("div",ut,o(s.value.description),1),t("div",ct,[t("div",vt,[l(g,{name:"download"}),i(" "+o(s.value.installed_count||0),1)]),e[6]||(e[6]=t("div",{class:"right"},null,-1))])]),t("div",mt,[t("div",pt,[s.value.overview?(a(),p("div",ft,[e[7]||(e[7]=t("div",{class:"main-tit"},"插件概叙",-1)),t("pre",ht,o(s.value.overview),1)])):I("",!0),t("div",yt,[e[8]||(e[8]=t("div",{class:"main-tit"},"使用说明",-1)),F(t("pre",{class:"text-cont",innerHTML:s.value.introduction},null,8,kt),[[N]])])]),t("div",xt,[t("div",gt,[e[9]||(e[9]=t("div",{class:"main-tit"},"类别",-1)),t("div",wt,[t("img",{class:"cate-icon",src:s.value.filter_type_icon},null,8,bt),i(" "+o(s.value.filter_type_title),1)])]),t("div",Mt,[e[11]||(e[11]=t("div",{class:"main-tit"},"版本",-1)),t("div",Bt,[i(" v"+o(s.value.latest_version)+" ",1),l(m,{type:"vertical"}),i(" "+o(s.value.author)+" "+o(w(L).unix((R=(B=s.value)==null?void 0:B.latest_version_detail)==null?void 0:R.update_time).format("YYYY-MM-DD HH:mm")),1)]),t("div",Rt,o((D=(Y=s.value)==null?void 0:Y.latest_version_detail)==null?void 0:D.upgrade_description),1),t("div",null,[t("a",{onClick:M},[e[10]||(e[10]=i("版本历史 ",-1)),l(w(S))])])]),t("div",Yt,[e[12]||(e[12]=t("div",{class:"main-tit"},"权限列表",-1)),t("div",Dt,"最大内存 "+o((C=(H=s.value)==null?void 0:H.latest_version_detail)==null?void 0:C.memory)+"MB",1)])])])])),l(X,{ref_key:"versionRef",ref:v},null,512),l(A,{ref_key:"updateRef",ref:u,onOk:k},null,512)])}}},Ft=O(Ht,[["__scopeId","data-v-bbd6836b"]]);export{Ft as default};
