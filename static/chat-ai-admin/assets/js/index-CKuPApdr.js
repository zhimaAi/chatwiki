import{e as a}from"./cu-scroll-ChtrbNJE.js";import{i as m}from"./is-plan-event-enabled-DS1Agtkw.js";import"./vue-chunks-yZ4gwLzA.js";import"./utils-smNh_pj2.js";import"../../index-CuFGOJXl.js";import"./ui-antd-BKjlZQNA.js";import"./pull-up.esm-DIiTC7VE.js";import"./observe-dom.esm-B25JyVKH.js";function c(r,u){var t,i;if(!r||!Object.keys(r))return{};var o=r.integrations?Object.keys(r.integrations).filter(function(e){return r.integrations[e]===!1}):[],s=[];return((t=u.remotePlugins)!==null&&t!==void 0?t:[]).forEach(function(e){o.forEach(function(n){e.creationName==n&&s.push(e.name)})}),((i=u.remotePlugins)!==null&&i!==void 0?i:[]).reduce(function(e,n){return n.settings.subscriptions&&s.includes(n.name)&&n.settings.subscriptions.forEach(function(f){return e["".concat(n.name," ").concat(f.partnerAction)]=!1}),e},{})}function y(r,u){function t(i){var o=r,s=i.event.event;if(o&&s){var e=o[s];if(m(o,e)){var n=c(e,u);i.updateEvent("integrations",a(a(a({},i.event.integrations),e==null?void 0:e.integrations),n))}else return i.updateEvent("integrations",a(a({},i.event.integrations),{All:!1,"Segment.io":!0})),i}return i}return{name:"Schema Filter",version:"0.1.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},type:"before",page:t,alias:t,track:t,identify:t,group:t}}export{y as schemaFilter};
