{"version":3,"file":"index-CqOsc_yT.js","sources":["../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-config/auto-reply/keywords-reply.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-config/auto-reply/received-reply.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-config/auto-reply/index.vue"],"sourcesContent":["<template>\r\n  <div class=\"user-model-page\">\r\n    <!-- 自动回复 开关 -->\r\n    <div class=\"switch-block\">\r\n      <span class=\"switch-title\">{{ t('auto_reply') }}</span>\r\n      <a-switch\r\n        @change=\"keyWordReplySwitchChange\"\r\n        :checked=\"keywordReplyStatus\"\r\n        :checked-children=\"t('switch_on')\"\r\n        :un-checked-children=\"t('switch_off')\"\r\n      />\r\n      <span class=\"switch-desc\">{{ t('auto_reply_desc') }}</span>\r\n    </div>\r\n    <a-alert show-icon>\r\n      <template #message>\r\n        <p>{{ t('keyword_reply_tip') }}</p>\r\n      </template>\r\n    </a-alert>\r\n    <div class=\"search-block\">\r\n      <div class=\"left-block\">\r\n        <a-button type=\"primary\" @click=\"handleAddRule\">\r\n          <template #icon>\r\n            <PlusOutlined />\r\n          </template>\r\n          {{ t('btn_add_rule') }}\r\n        </a-button>\r\n        <!-- 回复类型：下拉选择 图文  文本  图片  小程序 和链接 -->\r\n        <div class=\"search-item\">\r\n          <a-select\r\n            v-model=\"reply_type\"\r\n            :placeholder=\"t('label_reply_type')\"\r\n            allowClear\r\n            :options=\"replyTypeOptions\"\r\n            style=\"width: 240px;\"\r\n            @change=\"onReplyTypeChange\"\r\n          />\r\n        </div>\r\n\r\n        <div class=\"search-item\">\r\n          <a-input-search\r\n            v-model:value=\"search_keyword\"\r\n            :placeholder=\"t('ph_search_keyword')\"\r\n            allowClear\r\n            style=\"width: 240px;\"\r\n            @search=\"onSearch\"\r\n          >\r\n            <!-- <template #suffix>\r\n              <SearchOutlined />\r\n            </template> -->\r\n          </a-input-search>\r\n        </div>\r\n      </div>\r\n      <div class=\"right-block\">\r\n        <span>{{ t('continue_reply') }}</span>\r\n        <a-tooltip>\r\n          <template #title>{{ t('continue_reply_tip') }}</template>\r\n          <QuestionCircleOutlined />：\r\n        </a-tooltip>\r\n        <a-switch\r\n          @change=\"handleChangeSwitch\"\r\n          :checked=\"keywordReplyAiReplyStatus\"\r\n          :checked-children=\"t('switch_on')\"\r\n          :un-checked-children=\"t('switch_off')\"\r\n        />\r\n      </div>\r\n    </div>\r\n    <div class=\"list-box\">\r\n      <a-table\r\n        :columns=\"columns\"\r\n        :data-source=\"tableData\"\r\n        :loading=\"loading\"\r\n        :pagination=\"{\r\n          current: pager.page,\r\n          total: pager.total,\r\n          pageSize: pager.size,\r\n          showQuickJumper: true,\r\n          showSizeChanger: true,\r\n          pageSizeOptions: ['10', '20', '50', '100']\r\n        }\"\r\n        @change=\"onTableChange\"\r\n      >\r\n        <template #bodyCell=\"{ column, record }\">\r\n          <!-- 模糊匹配  -->\r\n          <template v-if=\"column.key === 'half_keyword'\">\r\n            <div class=\"tags-wra flex\">\r\n              <div\r\n                class=\"tag\"\r\n                v-for=\"(item, index) in record.half_keyword\"\r\n                :key=\"index\"\r\n                v-show=\"index < 3\"\r\n              >\r\n                <a-tag>{{ item }}</a-tag>\r\n              </div>\r\n              <a-popover>\r\n                <template #content>\r\n                  <div class=\"popover-cont flex\">\r\n                    <div\r\n                      class=\"tag\"\r\n                      v-for=\"(item, index) in record.half_keyword\"\r\n                      :key=\"index\"\r\n                      v-show=\"index >= 3\"\r\n                    >\r\n                      <a-tag>{{ item }}</a-tag>\r\n                    </div>\r\n                  </div>\r\n                </template>\r\n                <div class=\"more-tag\" v-if=\"record.half_keyword.length > 3\"\r\n                  >+{{ record.half_keyword.length - 3 }}</div\r\n                >\r\n              </a-popover>\r\n            </div>\r\n          </template>\r\n          <!-- 精准匹配  -->\r\n          <template v-if=\"column.key === 'full_keyword'\">\r\n            <div class=\"tags-wra flex\">\r\n              <div\r\n                class=\"tag\"\r\n                v-for=\"(item, index) in record.full_keyword\"\r\n                :key=\"index\"\r\n                v-show=\"index < 3\"\r\n              >\r\n                <a-tag>{{ item }}</a-tag>\r\n              </div>\r\n              <a-popover>\r\n                <template #content>\r\n                  <div class=\"popover-cont flex\">\r\n                    <div\r\n                      class=\"tag\"\r\n                      v-for=\"(item, index) in record.full_keyword\"\r\n                      :key=\"index\"\r\n                      v-show=\"index >= 3\"\r\n                    >\r\n                      <a-tag>{{ item }}</a-tag>\r\n                    </div>\r\n                  </div>\r\n                </template>\r\n                <div class=\"more-tag\" v-if=\"record.full_keyword.length > 3\"\r\n                  >+{{ record.full_keyword.length - 3 }}</div\r\n                >\r\n              </a-popover>\r\n            </div>\r\n          </template>\r\n          <!-- 回复内容 -->\r\n          <template v-if=\"column.key === 'reply_content'\">\r\n            <span style=\"color:#595959;\">{{ summarizeReplyTypes(record.reply_content) || '--' }}</span>\r\n          </template>\r\n\r\n          <!-- 启用状态 开关-->\r\n          <template v-if=\"column.key === 'switch_status'\">\r\n            <a-switch\r\n              :checked=\"record.switch_status\"\r\n              :checkedValue=\"'1'\"\r\n              :un-checkedValue=\"'0'\"\r\n              :checked-children=\"t('switch_on')\"\r\n              :un-checked-children=\"t('switch_off')\"\r\n              @change=\"handleReplySwitchChange(record, $event)\"\r\n            />\r\n          </template>\r\n\r\n\r\n          <!-- 操作 -->\r\n          <template v-if=\"column.key === 'action'\">\r\n            <a-flex :gap=\"8\">\r\n              <a @click=\"handleEdit(record)\">{{ t('btn_edit') }}</a>\r\n              <a @click=\"handleDelete(record)\">{{ t('btn_delete') }}</a>\r\n              <a @click=\"handleCopy(record)\">{{ t('btn_copy') }}</a>\r\n            </a-flex>\r\n          </template>\r\n        </template>\r\n      </a-table>\r\n    </div>\r\n  </div>\r\n  \r\n</template>\r\n\r\n<script setup>\r\nimport { reactive, ref, computed } from 'vue'\r\nimport { QuestionCircleOutlined, PlusOutlined } from '@ant-design/icons-vue'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport { saveRobotAbilitySwitchStatus, getRobotKeywordReplyList, saveRobotAbilityAiReplyStatus, updateRobotKeywordReplySwitchStatus, deleteRobotKeywordReply } from '@/api/explore/index.js'\r\nimport { REPLY_TYPE_OPTIONS, REPLY_TYPE_LABEL_MAP } from '@/constants/index'\r\nimport { useRobotStore } from '@/stores/modules/robot'\r\nimport { message, Modal } from 'ant-design-vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.robot.robot-config.auto-reply.keywords-reply')\r\nconst robotStore = useRobotStore()\r\n\r\n// 来自左侧菜单的能力开关（关键词回复）\r\nconst keywordReplyStatus = computed(() => robotStore.keywordReplySwitchStatus === '1')\r\nconst keywordReplyAiReplyStatus = computed(() => robotStore.keywordReplyAiReplyStatus === '1')\r\n\r\nconst query = useRoute().query\r\nconst router = useRouter()\r\n\r\nconst columns = ref([\r\n  {\r\n    title: t('col_rule_name'),\r\n    dataIndex: 'name',\r\n    key: 'name',\r\n    width: 120\r\n  },\r\n  {\r\n    title: t('col_fuzzy_match'),\r\n    dataIndex: 'half_keyword',\r\n    key: 'half_keyword',\r\n    width: 220\r\n  },\r\n  {\r\n    title: t('col_exact_match'),\r\n    dataIndex: 'full_keyword',\r\n    key: 'full_keyword',\r\n    width: 220\r\n  },\r\n  {\r\n    title: t('col_reply_content'),\r\n    dataIndex: 'reply_content',\r\n    key: 'reply_content',\r\n    width: 120\r\n  },\r\n  {\r\n    title: t('col_enabled_status'),\r\n    dataIndex: 'switch_status',\r\n    key: 'switch_status',\r\n    width: 120\r\n  },\r\n  {\r\n    title: t('col_action'),\r\n    dataIndex: 'action',\r\n    key: 'action',\r\n    width: 120\r\n  }\r\n])\r\n\r\nconst pager = reactive({\r\n  page: 1,\r\n  size: 10,\r\n  total: 0\r\n})\r\nconst replyTypeOptions = REPLY_TYPE_OPTIONS()\r\nconst tableData = ref([])\r\nconst loading = ref(false)\r\nconst reply_type = ref('')\r\nconst search_keyword = ref('')\r\nconst getTableData = () => {\r\n  console.log('search_keyword.value', search_keyword.value)\r\n  console.log('reply_type.value', reply_type.value)\r\n  const parmas = {\r\n    robot_id: query.id,\r\n    keyword: search_keyword.value || '',\r\n    reply_type: reply_type.value || '',\r\n    page: pager.page,\r\n    size: pager.size\r\n  }\r\n  loading.value = true\r\n  getRobotKeywordReplyList({\r\n    ...parmas\r\n  })\r\n    .then((res) => {\r\n      const data = res?.data || { list: [], total: 0, page: pager.page, size: pager.size }\r\n      tableData.value = (data.list || []).map((item) => ({\r\n        ...item,\r\n        // 确保这些字段存在\r\n        full_keyword: Array.isArray(item.full_keyword) ? item.full_keyword : [],\r\n        half_keyword: Array.isArray(item.half_keyword) ? item.half_keyword : [],\r\n        reply_content: Array.isArray(item.reply_content) ? item.reply_content : [],\r\n        switch_status: String(item.switch_status ?? '0')\r\n      }))\r\n      pager.total = +data.total || 0\r\n    })\r\n    .finally(() => {\r\n      loading.value = false\r\n    })\r\n}\r\ngetTableData()\r\n\r\nconst onTableChange = (pagination) => {\r\n  pager.page = pagination.current\r\n  pager.size = pagination.pageSize\r\n  getTableData()\r\n}\r\n\r\nconst onSearch = () => {\r\n  pager.page = 1\r\n  getTableData()\r\n}\r\n\r\nconst onReplyTypeChange = (val) => {\r\n  reply_type.value = val\r\n  onSearch()\r\n}\r\n\r\nconst handleAddRule = () => {\r\n  router.push({\r\n    path: '/robot/ability/auto-reply/add-rule',\r\n    query: {\r\n      id: query.id,\r\n      robot_key: query.robot_key\r\n    }\r\n  })\r\n}\r\n\r\n  const handleEdit = (record) => {\r\n    router.push({\r\n      path: '/robot/ability/auto-reply/add-rule',\r\n      query: {\r\n        id: query.id,\r\n        robot_key: query.robot_key,\r\n        rule_id: record.id\r\n      }\r\n    })\r\n  }\r\n\r\n  const handleCopy = (record) => {\r\n    router.push({\r\n      path: '/robot/ability/auto-reply/add-rule',\r\n      query: {\r\n        id: query.id,\r\n        robot_key: query.robot_key,\r\n        copy_id: record.id\r\n      }\r\n    })\r\n  }\r\n\r\nconst keyWordReplySwitchChange = (checked) => {\r\n  const switch_status = checked ? '1' : '0'\r\n  if (switch_status === '0') {\r\n    Modal.confirm({\r\n      title: t('title_tip'),\r\n      content: t('msg_close_warning'),\r\n      onOk: () => {\r\n        saveRobotAbilitySwitchStatus({ robot_id: query.id, ability_type: 'robot_auto_reply', switch_status }).then((res) => {\r\n          if (res && res.res == 0) {\r\n            robotStore.setKeywordReplySwitchStatus(switch_status)\r\n            message.success(t('msg_operation_success'))\r\n            window.dispatchEvent(new CustomEvent('robotAbilityUpdated', { detail: { robotId: query.id } }))\r\n          }\r\n        })\r\n      }\r\n    })\r\n    return\r\n  }\r\n  saveRobotAbilitySwitchStatus({ robot_id: query.id, ability_type: 'robot_auto_reply', switch_status }).then((res) => {\r\n    if (res && res.res == 0) {\r\n      robotStore.setKeywordReplySwitchStatus(switch_status)\r\n      message.success(t('msg_operation_success'))\r\n      window.dispatchEvent(new CustomEvent('robotAbilityUpdated', { detail: { robotId: query.id } }))\r\n    }\r\n  })\r\n}\r\n\r\nconst handleReplySwitchChange = (record, checked) => {\r\n  const switch_status = checked\r\n  updateRobotKeywordReplySwitchStatus({ id: record.id, robot_id: query.id, switch_status }).then((res) => {\r\n    if (res && res.res == 0) {\r\n      record.switch_status = switch_status\r\n      message.success(t('msg_operation_success'))\r\n    }\r\n  })\r\n}\r\n\r\nconst handleChangeSwitch = (checked) => {\r\n  const ai_reply_status = checked ? '1' : '0'\r\n  saveRobotAbilityAiReplyStatus({ robot_id: query.id, ability_type: 'robot_auto_reply', ai_reply_status }).then((res) => {\r\n    if (res && res.res == 0) {\r\n      robotStore.setKeywordReplyAiReplyStatus(ai_reply_status)\r\n      message.success(t('msg_operation_success'))\r\n    }\r\n  })\r\n}\r\n\r\nconst handleDelete = (record) => {\r\n  // 确认删除\r\n  Modal.confirm({\r\n    title: t('title_confirm_delete'),\r\n    okText: t('btn_confirm'),\r\n    onOk: () => {\r\n      deleteRobotKeywordReply({ id: record.id, robot_id: query.id }).then((res) => {\r\n        if (res && res.res == 0) {\r\n          message.success(t('msg_delete_success'))\r\n          getTableData()\r\n        }\r\n      })\r\n    }\r\n  })\r\n}\r\n\r\nfunction mapReplyTypeLabel (t) {\r\n  return REPLY_TYPE_LABEL_MAP()[t] || ''\r\n}\r\n\r\nfunction summarizeReplyTypes (list) {\r\n  if (!Array.isArray(list)) return ''\r\n  const labels = list\r\n    .map((rc) => mapReplyTypeLabel(rc?.type))\r\n    .filter((s) => !!s)\r\n  // 去重并使用/连接\r\n  const uniq = [...new Set(labels)]\r\n  return uniq.join('/')\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.user-model-page {\r\n  height: 100%;\r\n  width: 100%;\r\n  .search-block {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    margin-top: 16px;\r\n    .left-block {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 16px;\r\n    }\r\n    .right-block {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 2px;\r\n    }\r\n  }\r\n  .list-box {\r\n    margin-top: 8px;\r\n  }\r\n  ::v-deep(.ant-alert) {\r\n    align-items: baseline;\r\n  }\r\n}\r\n\r\n.switch-block {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 16px;\r\n\r\n  .switch-title {\r\n    margin-right: 12px;\r\n    color: #262626;\r\n    font-size: 16px;\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    line-height: 24px;\r\n  }\r\n}\r\n.switch-desc {\r\n  margin-left: 4px;\r\n  color: #8c8c8c;\r\n  font-size: 14px;\r\n  font-style: normal;\r\n  font-weight: 400;\r\n  line-height: 22px;\r\n}\r\n\r\n.tags-wra {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 4px;\r\n\r\n  .ant-tag {\r\n    margin: 0;\r\n  }\r\n}\r\n\r\n.more-tag {\r\n  color: #595959;\r\n  font-size: 14px;\r\n  font-style: normal;\r\n  font-weight: 400;\r\n  line-height: 22px;\r\n  cursor: pointer;\r\n}\r\n\r\n.flex {\r\n  display: flex;\r\n  align-items: center;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.popover-cont {\r\n  max-width: 560px;\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"user-model-page\">\r\n    <!-- 关键词回复 开关 -->\r\n    <div class=\"switch-block\">\r\n      <span class=\"switch-title\">{{ t('auto_reply') }}</span>\r\n      <a-switch\r\n        @change=\"keyWordReplySwitchChange\"\r\n        :checked=\"keywordReplyStatus\"\r\n        :checked-children=\"t('switch_on')\"\r\n        :un-checked-children=\"t('switch_off')\"\r\n      />\r\n      <span class=\"switch-desc\">{{ t('auto_reply_desc') }}</span>\r\n    </div>\r\n    <a-alert show-icon>\r\n      <template #message>\r\n        <p>{{ t('received_reply_tip') }}</p>\r\n        <p>{{ t('received_reply_tip2') }}</p>\r\n      </template>\r\n    </a-alert>\r\n    <a-tabs v-model:activeKey=\"rule_type\" @change=\"onRuleTypeChange\" style=\"margin-top: 8px;\">\r\n      <a-tab-pane key=\"receive_reply_message_type\" :tab=\"t('tab_default_reply')\" />\r\n      <a-tab-pane key=\"receive_reply_duration\" :tab=\"t('tab_time_reply')\" />\r\n    </a-tabs>\r\n    <div class=\"search-block\">\r\n      <div class=\"left-block\">\r\n        <a-button type=\"primary\" @click=\"handleAddReply\">\r\n          <template #icon>\r\n            <PlusOutlined />\r\n          </template>\r\n          {{ rule_type === 'receive_reply_message_type' ? t('btn_add_reply') : t('btn_add_time_reply') }}\r\n        </a-button>\r\n        <!-- 回复内容：下拉选择 图文  文本  图片  小程序 和链接 -->\r\n        <div class=\"search-item\">\r\n          <a-select\r\n            v-model=\"reply_type\"\r\n            :placeholder=\"t('label_reply_content')\"\r\n            allowClear\r\n            :options=\"replyTypeOptions\"\r\n            style=\"width: 240px;\"\r\n            @change=\"onReplyTypeChange\"\r\n          />\r\n        </div>\r\n\r\n        <!-- <div class=\"search-item\">\r\n          <a-input-search\r\n            v-model:value=\"search_keyword\"\r\n            placeholder=\"请输入关键词名称和规则名称搜索\"\r\n            allowClear\r\n            style=\"width: 240px;\"\r\n            @search=\"onSearch\"\r\n          >\r\n          </a-input-search>\r\n        </div> -->\r\n      </div>\r\n    </div>\r\n      <div class=\"list-box\">\r\n        <a-table\r\n        :columns=\"columns\"\r\n        :data-source=\"tableData\"\r\n        :loading=\"loading\"\r\n        :pagination=\"{\r\n          current: pager.page,\r\n          total: pager.total,\r\n          pageSize: pager.size,\r\n          showQuickJumper: true,\r\n          showSizeChanger: true,\r\n          pageSizeOptions: ['10', '20', '50', '100']\r\n        }\"\r\n        @change=\"onTableChange\"\r\n      >\r\n        <template #headerCell=\"{ column }\">\r\n          <span v-if=\"column.key === 'priority_num'\">\r\n            {{ t('col_priority') }}\r\n            <a-tooltip :title=\"t('col_priority_tip')\">\r\n              <QuestionCircleOutlined />\r\n            </a-tooltip>\r\n          </span>\r\n          <span v-else-if=\"column.key === 'switch_status'\">\r\n            {{ t('col_enabled_status') }}\r\n            <a-tooltip :title=\"rule_type === 'receive_reply_message_type' ? t('col_enabled_tip_default') : t('col_enabled_tip_time')\">\r\n              <QuestionCircleOutlined />\r\n            </a-tooltip>\r\n          </span>\r\n          <span v-else>{{ column.title }}</span>\r\n        </template>\r\n        <template #bodyCell=\"{ column, record }\">\r\n\r\n          <!-- 消息类型 -->\r\n          <template v-if=\"column.key === 'message_type'\">\r\n            <span style=\"color:#595959;\">{{ formatMessageType(record) }}</span>\r\n          </template>\r\n          <!-- 回复内容 -->\r\n          <template v-if=\"column.key === 'reply_content'\">\r\n            <span style=\"color:#595959;\">{{ summarizeReplyTypes(record.reply_content) || '--' }}</span>\r\n          </template>\r\n\r\n          <template v-if=\"column.key === 'reply_num'\">\r\n            {{ record.reply_num == 0 ? t('reply_all') : t('reply_random') }}\r\n          </template>\r\n\r\n          <!-- 创建时间 -->\r\n          <template v-if=\"column.key === 'create_time'\">\r\n            <span style=\"color:#595959;\">{{ formatDateFn(record.create_time) || '--' }}</span>\r\n          </template>\r\n\r\n          <template v-if=\"column.key === 'duration'\">\r\n            <span style=\"color:#595959; white-space: pre-wrap;\">{{ formatDurationLabel(record) }}</span>\r\n          </template>\r\n\r\n          <!-- 优先级可编辑 -->\r\n          <template v-if=\"column.key === 'priority_num'\">\r\n            <a-input-number\r\n              v-model:value=\"record.priority_num\"\r\n              :min=\"1\"\r\n              :max=\"100\"\r\n              :precision=\"0\"\r\n              style=\"width: 96px;\"\r\n              @blur=\"onPriorityChange(record)\"\r\n              @pressEnter=\"onPriorityChange(record)\"\r\n            />\r\n          </template>\r\n\r\n          <!-- 启用状态 开关-->\r\n          <template v-if=\"column.key === 'switch_status'\">\r\n            <a-switch\r\n              :checked=\"record.switch_status\"\r\n              :checkedValue=\"'1'\"\r\n              :un-checkedValue=\"'0'\"\r\n              :checked-children=\"t('switch_on')\"\r\n              :un-checked-children=\"t('switch_off')\"\r\n              @change=\"handleReplySwitchChange(record, $event)\"\r\n            />\r\n          </template>\r\n\r\n\r\n          <!-- 操作 -->\r\n          <template v-if=\"column.key === 'action'\">\r\n            <a-flex :gap=\"8\">\r\n              <a @click=\"handleEdit(record)\">{{ t('btn_edit') }}</a>\r\n              <a @click=\"handleDelete(record)\">{{ t('btn_delete') }}</a>\r\n              <a @click=\"handleCopy(record)\">{{ t('btn_copy') }}</a>\r\n            </a-flex>\r\n          </template>\r\n        </template>\r\n      </a-table>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { reactive, ref, computed } from 'vue'\r\nimport { QuestionCircleOutlined, PlusOutlined } from '@ant-design/icons-vue'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport { saveRobotAbilitySwitchStatus, getRobotReceivedMessageReplyList, updateRobotReceivedMessageReplyPriorityNum, updateRobotReceivedMessageReplySwitchStatus, deleteRobotReceivedMessageReply } from '@/api/explore/index.js'\r\nimport { REPLY_TYPE_OPTIONS, REPLY_TYPE_LABEL_MAP, SUBSCRIBE_REPLY_TYPE_LABEL_MAP } from '@/constants/index'\r\nimport { useRobotStore } from '@/stores/modules/robot'\r\nimport { message, Modal } from 'ant-design-vue'\r\nimport dayjs from 'dayjs'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.robot.robot-config.auto-reply.received-reply')\r\nconst robotStore = useRobotStore()\r\n\r\n// 来自左侧菜单的能力开关（关键词回复）\r\nconst keywordReplyStatus = computed(() => robotStore.keywordReplySwitchStatus === '1')\r\n\r\nconst query = useRoute().query\r\nconst router = useRouter()\r\n\r\nconst rule_type = ref(query.rule_type || 'receive_reply_message_type')\r\n\r\nconst columnsMessageType = [\r\n  { title: t('col_message_type'), dataIndex: 'message_type', key: 'message_type', width: 120 },\r\n  { title: t('col_reply_content'), dataIndex: 'reply_content', key: 'reply_content', width: 120 },\r\n  { title: t('col_reply_method'), dataIndex: 'reply_num', key: 'reply_num', width: 120 },\r\n  { title: t('col_create_time'), dataIndex: 'create_time', key: 'create_time', width: 120 },\r\n  { title: t('col_enabled_status'), dataIndex: 'switch_status', key: 'switch_status', width: 120 },\r\n  { title: t('col_action'), dataIndex: 'action', key: 'action', width: 120 }\r\n]\r\n\r\nconst columnsDuration = [\r\n  { title: t('col_duration'), dataIndex: 'duration', key: 'duration', width: 220 },\r\n  { title: t('col_reply_content'), dataIndex: 'reply_content', key: 'reply_content', width: 120 },\r\n  { title: t('col_reply_method'), dataIndex: 'reply_num', key: 'reply_num', width: 120 },\r\n  { title: t('col_priority'), dataIndex: 'priority_num', key: 'priority_num', width: 120 },\r\n  { title: t('col_create_time'), dataIndex: 'create_time', key: 'create_time', width: 120 },\r\n  { title: t('col_enabled_status'), dataIndex: 'switch_status', key: 'switch_status', width: 120 },\r\n  { title: t('col_action'), dataIndex: 'action', key: 'action', width: 120 }\r\n]\r\n\r\nconst columns = computed(() => rule_type.value === 'receive_reply_duration' ? columnsDuration : columnsMessageType)\r\n\r\nconst pager = reactive({\r\n  page: 1,\r\n  size: 10,\r\n  total: 0\r\n})\r\nconst replyTypeOptions = REPLY_TYPE_OPTIONS()\r\nconst tableData = ref([])\r\nconst loading = ref(false)\r\nconst reply_type = ref('')\r\n// const search_keyword = ref('')\r\nconst getTableData = () => {\r\n  const parmas = {\r\n    robot_id: query.id,\r\n    rule_type: rule_type.value,\r\n    reply_type: reply_type.value || '',\r\n    page: pager.page,\r\n    size: pager.size\r\n  }\r\n  loading.value = true\r\n  getRobotReceivedMessageReplyList({\r\n    ...parmas\r\n  })\r\n    .then((res) => {\r\n      const data = res?.data || { list: [], total: 0, page: pager.page, size: pager.size }\r\n      tableData.value = (data.list || []).map((item) => ({\r\n        ...item,\r\n        reply_content: Array.isArray(item.reply_content) ? item.reply_content : [],\r\n        switch_status: String(item.switch_status ?? '0'),\r\n        duration_type: item.duration_type || '',\r\n        start_duration: item.start_duration || '',\r\n        end_duration: item.end_duration || '',\r\n        priority_num: item.priority_num ?? '',\r\n        message_type: String(item.message_type ?? ''),\r\n        specify_message_type: Array.isArray(item.specify_message_type) ? item.specify_message_type : []\r\n      }))\r\n      pager.total = +data.total || 0\r\n    })\r\n    .finally(() => {\r\n      loading.value = false\r\n    })\r\n}\r\ngetTableData()\r\n\r\nconst onTableChange = (pagination) => {\r\n  pager.page = pagination.current\r\n  pager.size = pagination.pageSize\r\n  getTableData()\r\n}\r\n\r\nconst onSearch = () => {\r\n  pager.page = 1\r\n  getTableData()\r\n}\r\n\r\nconst onReplyTypeChange = (val) => {\r\n  reply_type.value = val\r\n  onSearch()\r\n}\r\n\r\nconst onRuleTypeChange = () => {\r\n  pager.page = 1\r\n  getTableData()\r\n}\r\n\r\nasync function onPriorityChange (record) {\r\n  const val = Number(record.priority_num)\r\n  if (!Number.isInteger(val) || val < 0) {\r\n    message.error(t('msg_priority_invalid'))\r\n    return\r\n  }\r\n  try {\r\n    await updateRobotReceivedMessageReplyPriorityNum({ id: record.id, robot_id: query.id, priority_num: val })\r\n    message.success(t('msg_priority_updated'))\r\n    getTableData()\r\n  } catch (e) {\r\n    // message.error('更新失败，请稍后重试')\r\n  }\r\n}\r\n\r\nconst handleAddReply = () => {\r\n  router.push({\r\n    path: '/robot/ability/auto-reply/add-reply',\r\n    query: {\r\n      id: query.id,\r\n      robot_key: query.robot_key,\r\n      rule_type: rule_type.value\r\n    }\r\n  })\r\n}\r\n\r\n  const handleEdit = (record) => {\r\n    router.push({\r\n      path: '/robot/ability/auto-reply/add-reply',\r\n      query: {\r\n        id: query.id,\r\n        robot_key: query.robot_key,\r\n        rule_id: record.id\r\n      }\r\n    })\r\n  }\r\n\r\n  const handleCopy = (record) => {\r\n    router.push({\r\n      path: '/robot/ability/auto-reply/add-reply',\r\n      query: {\r\n        id: query.id,\r\n        robot_key: query.robot_key,\r\n        copy_id: record.id\r\n      }\r\n    })\r\n  }\r\n\r\nconst keyWordReplySwitchChange = (checked) => {\r\n  const switch_status = checked ? '1' : '0'\r\n  if (switch_status === '0') {\r\n    Modal.confirm({\r\n      title: t('title_tip'),\r\n      content: t('msg_close_warning'),\r\n      onOk: () => {\r\n        saveRobotAbilitySwitchStatus({ robot_id: query.id, ability_type: 'robot_auto_reply', switch_status }).then((res) => {\r\n          if (res && res.res == 0) {\r\n            robotStore.setKeywordReplySwitchStatus(switch_status)\r\n            message.success(t('msg_operation_success'))\r\n            window.dispatchEvent(new CustomEvent('robotAbilityUpdated', { detail: { robotId: query.id } }))\r\n          }\r\n        })\r\n      }\r\n    })\r\n    return\r\n  }\r\n  saveRobotAbilitySwitchStatus({ robot_id: query.id, ability_type: 'robot_auto_reply', switch_status }).then((res) => {\r\n    if (res && res.res == 0) {\r\n      robotStore.setKeywordReplySwitchStatus(switch_status)\r\n      message.success(t('msg_operation_success'))\r\n      window.dispatchEvent(new CustomEvent('robotAbilityUpdated', { detail: { robotId: query.id } }))\r\n    }\r\n  })\r\n}\r\n\r\nconst handleReplySwitchChange = (record, checked) => {\r\n  const switch_status = checked\r\n  updateRobotReceivedMessageReplySwitchStatus({ id: record.id, robot_id: query.id, switch_status }).then((res) => {\r\n    if (res && res.res == 0) {\r\n      record.switch_status = switch_status\r\n      message.success(t('msg_operation_success'))\r\n    }\r\n  })\r\n}\r\n\r\nconst handleDelete = (record) => {\r\n  // 确认删除\r\n  Modal.confirm({\r\n    title: t('title_confirm_delete'),\r\n    okText: t('btn_confirm'),\r\n    onOk: () => {\r\n      deleteRobotReceivedMessageReply({ id: record.id, robot_id: query.id }).then((res) => {\r\n        if (res && res.res == 0) {\r\n          message.success(t('msg_delete_success'))\r\n          getTableData()\r\n        }\r\n      })\r\n    }\r\n  })\r\n}\r\n\r\nfunction mapReplyTypeLabel (t) {\r\n  return REPLY_TYPE_LABEL_MAP()[t] || ''\r\n}\r\n\r\nfunction summarizeReplyTypes (list) {\r\n  if (!Array.isArray(list)) return ''\r\n  const labels = list\r\n    .map((rc) => mapReplyTypeLabel(rc?.type))\r\n    .filter((s) => !!s)\r\n  // 去重并使用/连接\r\n  const uniq = [...new Set(labels)]\r\n  return uniq.join('/')\r\n}\r\n\r\nfunction formatWeek (v) {\r\n  const map = { '1': t('week_monday'), '2': t('week_tuesday'), '3': t('week_wednesday'), '4': t('week_thursday'), '5': t('week_friday'), '6': t('week_saturday'), '7': t('week_sunday') }\r\n  const s = String(v || '')\r\n  return map[s] || s\r\n}\r\n\r\nfunction formatDate (s) {\r\n  const str = String(s || '')\r\n  if (!str) return ''\r\n  if (/^\\d{4}-\\d{2}-\\d{2}/.test(str)) return str.slice(0, 10)\r\n  return str\r\n}\r\n\r\nfunction formatDateFn (date, format = 'YYYY-MM-DD') {\r\n  if (!date) return ''\r\n  return dayjs(date * 1000).format(format)\r\n}\r\n\r\nfunction formatTime (s) {\r\n  const str = String(s || '')\r\n  if (!str) return ''\r\n  if (/^\\d{2}:\\d{2}/.test(str)) return str.slice(0, 5)\r\n  return str\r\n}\r\n\r\nfunction formatDurationLabel (record) {\r\n  const type = record?.duration_type || ''\r\n  const wd = record?.week_duration || ''\r\n  const sd = record?.start_duration || ''\r\n  const ed = record?.end_duration || ''\r\n  if (type === 'week') {\r\n    const weekList = Array.isArray(wd) ? wd.map(v => String(v)) : (wd ? [String(wd)] : [])\r\n    const weekText = weekList.length ? weekList.map(v => formatWeek(v)).join('、') : ''\r\n    const timeText = `${formatTime(sd)} ${t('label_to')} ${formatTime(ed)}`\r\n    return weekText ? `${t('label_every_week')}${weekText}：${timeText}` : `${t('label_every_week')}：${timeText}`\r\n  }\r\n  if (type === 'day') {\r\n    return `${t('label_every_day')}：${formatDate(sd)} ${t('label_to')} ${formatDate(ed)}`\r\n  }\r\n  if (type === 'time_range') {\r\n    const sDay = record?.start_day || ''\r\n    const eDay = record?.end_day || ''\r\n    const startStr = `${formatDate(sDay)} ${formatTime(sd)}`.trim()\r\n    const endStr = `${formatDate(eDay)} ${formatTime(ed)}`.trim()\r\n    return `${t('label_custom_time')}：\\n${startStr} ${t('label_to')} ${endStr}`\r\n  }\r\n  return `${type || ''}：${sd || ''} ${t('label_to')} ${ed || ''}`\r\n}\r\n\r\nfunction mapMsgLabel (t) {\r\n  const m = SUBSCRIBE_REPLY_TYPE_LABEL_MAP()\r\n  return m[String(t)] || String(t)\r\n}\r\n\r\nfunction formatMessageType (record) {\r\n  const mt = String(record?.message_type ?? '')\r\n  if (mt === '0') return t('msg_all_messages')\r\n  const list = Array.isArray(record?.specify_message_type) ? record.specify_message_type : []\r\n  if (!list.length) return '--'\r\n  return list.map(mapMsgLabel).join('/')\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.user-model-page {\r\n  width: 100%;\r\n  .search-block {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    .left-block {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 16px;\r\n    }\r\n    .right-block {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 2px;\r\n    }\r\n  }\r\n  .list-box {\r\n    margin-top: 8px;\r\n  }\r\n  ::v-deep(.ant-alert) {\r\n    align-items: baseline;\r\n  }\r\n}\r\n\r\n.switch-block {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 16px;\r\n\r\n  .switch-title {\r\n    margin-right: 12px;\r\n    color: #262626;\r\n    font-size: 16px;\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    line-height: 24px;\r\n  }\r\n}\r\n.switch-desc {\r\n  margin-left: 4px;\r\n  color: #8c8c8c;\r\n  font-size: 14px;\r\n  font-style: normal;\r\n  font-weight: 400;\r\n  line-height: 22px;\r\n}\r\n\r\n.flex {\r\n  display: flex;\r\n  align-items: center;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.popover-cont {\r\n  max-width: 560px;\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"auto-reply-home\">\r\n    <a-tabs v-model:activeKey=\"activeKey\">\r\n      <a-tab-pane key=\"keywords\" :tab=\"t('tab_keywords')\">\r\n        <KeywordsReply />\r\n      </a-tab-pane>\r\n      <a-tab-pane key=\"received\" :tab=\"t('tab_received')\">\r\n        <ReceivedReply />\r\n      </a-tab-pane>\r\n    </a-tabs>\r\n  </div>\r\n  \r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue'\r\nimport KeywordsReply from './keywords-reply.vue'\r\nimport ReceivedReply from './received-reply.vue'\r\nimport { useRoute } from 'vue-router'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst route = useRoute()\r\nconst { t } = useI18n('views.robot.robot-config.auto-reply.index')\r\nconst activeKey = ref(route.query.active_key || 'keywords')\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.auto-reply-home {\r\n  height: 100%;\r\n  width: 100%;\r\n  padding: 16px 24px;\r\n  overflow-y: auto;\r\n}\r\n</style>"],"names":["t","useI18n","robotStore","useRobotStore","keywordReplyStatus","computed","keywordReplyAiReplyStatus","query","useRoute","router","useRouter","columns","ref","pager","reactive","replyTypeOptions","REPLY_TYPE_OPTIONS","tableData","loading","reply_type","search_keyword","getTableData","parmas","getRobotKeywordReplyList","res","data","item","onTableChange","pagination","onSearch","onReplyTypeChange","val","handleAddRule","handleEdit","record","handleCopy","keyWordReplySwitchChange","checked","switch_status","Modal","saveRobotAbilitySwitchStatus","message","handleReplySwitchChange","updateRobotKeywordReplySwitchStatus","handleChangeSwitch","ai_reply_status","saveRobotAbilityAiReplyStatus","handleDelete","deleteRobotKeywordReply","mapReplyTypeLabel","REPLY_TYPE_LABEL_MAP","summarizeReplyTypes","list","labels","rc","s","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_toDisplayString","_unref","_createVNode","_component_a_switch","_hoisted_4","_component_a_alert","_hoisted_5","_hoisted_6","_component_a_button","PlusOutlined","_createTextVNode","_hoisted_7","_component_a_select","$event","_hoisted_8","_component_a_input_search","_hoisted_9","_component_a_tooltip","QuestionCircleOutlined","_hoisted_10","_component_a_table","_withCtx","column","_hoisted_11","_Fragment","index","_component_a_tag","_component_a_popover","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_createBlock","_component_a_flex","_hoisted_18","_hoisted_19","_hoisted_20","rule_type","columnsMessageType","columnsDuration","getRobotReceivedMessageReplyList","onRuleTypeChange","onPriorityChange","updateRobotReceivedMessageReplyPriorityNum","handleAddReply","updateRobotReceivedMessageReplySwitchStatus","deleteRobotReceivedMessageReply","formatWeek","v","map","formatDate","str","formatDateFn","date","format","dayjs","formatTime","formatDurationLabel","type","wd","sd","ed","weekList","weekText","timeText","sDay","eDay","startStr","endStr","mapMsgLabel","SUBSCRIBE_REPLY_TYPE_LABEL_MAP","formatMessageType","_component_a_tabs","_component_a_tab_pane","_component_a_input_number","route","activeKey","KeywordsReply","ReceivedReply"],"mappings":"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"}