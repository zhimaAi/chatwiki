{"version":3,"file":"index-D_OkogNr.js","sources":["../../../../front-end/chat-ai-admin-vue/src/views/user/manage/components/page-tabs.vue","../../../../front-end/chat-ai-admin-vue/src/views/user/manage/components/avatar-input.vue","../../../../front-end/chat-ai-admin-vue/src/views/user/manage/components/add-team-members.vue","../../../../front-end/chat-ai-admin-vue/src/views/user/manage/components/reset-password.vue","../../../../front-end/chat-ai-admin-vue/src/views/user/manage/components/see-model-alert.vue","../../../../front-end/chat-ai-admin-vue/src/views/user/manage/components/add-department.vue","../../../../front-end/chat-ai-admin-vue/src/views/user/manage/components/del-department.vue","../../../../front-end/chat-ai-admin-vue/src/views/user/manage/components/department-tree.vue","../../../../front-end/chat-ai-admin-vue/src/views/user/manage/components/knowledge-permissions.vue","../../../../front-end/chat-ai-admin-vue/src/views/user/manage/components/batch-edit-department.vue","../../../../front-end/chat-ai-admin-vue/src/views/user/manage/team-members.vue","../../../../front-end/chat-ai-admin-vue/src/views/user/manage/components/add-role.vue","../../../../front-end/chat-ai-admin-vue/src/views/user/manage/role-permissions.vue","../../../../front-end/chat-ai-admin-vue/src/views/user/manage/index.vue"],"sourcesContent":["<style lang=\"less\" scoped>\r\n.page-tabs {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 24px;\r\n  padding: 0 24px;\r\n  font-size: 14px;\r\n  color: #595959;\r\n  background-color: #fff;\r\n  border-bottom: 1px solid #F0F0F0;\r\n  .tab-item {\r\n    position: relative;\r\n    height: 46px;\r\n    line-height: 46px;\r\n    cursor: pointer;\r\n\r\n    &.active {\r\n      font-weight: 600;\r\n      color: #2475fc;\r\n    }\r\n\r\n    &.active::before {\r\n      content: '';\r\n      display: block;\r\n      position: absolute;\r\n      left: 0;\r\n      right: 0;\r\n      bottom: 0;\r\n      height: 2px;\r\n      background-color: #2475fc;\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n<template>\r\n  <div class=\"page-tabs\">\r\n    <div class=\"tab-item\" :class=\"{ active: props.value == tab.value }\" @click=\"handleClickTab(tab.value)\"\r\n      v-for=\"tab in tabs\" :key=\"tab.value\">\r\n      {{ t(tab.langKey) }}\r\n    </div>\r\n  </div>\r\n</template>\r\n<script setup>\r\nimport { ref } from 'vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n()\r\n\r\nconst emit = defineEmits(['update:value', 'change'])\r\n\r\nconst props = defineProps({\r\n  value: {\r\n    type: [Number, String]\r\n  }\r\n})\r\n\r\nconst tabs = ref([\r\n  {\r\n    value: 1,\r\n    title: t('views.user.model.teamMembers'),\r\n    langKey: 'views.user.model.teamMembers'\r\n  },\r\n  // {\r\n  //   value: 0,\r\n  //   title: t('views.user.model.rolePermissions'),\r\n  //   langKey: 'views.user.model.rolePermissions'\r\n  // }\r\n])\r\n\r\nconst handleClickTab = (val) => {\r\n  emit('update:value', val)\r\n  emit('change', val)\r\n}\r\n</script>\r\n","<template>\r\n  <div class=\"avatar-uploader\">\r\n    <a-upload\r\n      v-model:file-list=\"fileList\"\r\n      list-type=\"picture-card\"\r\n      :show-upload-list=\"false\"\r\n      :before-upload=\"beforeUpload\"\r\n      accept=\".jpg,.png,.jpeg\"\r\n      @preview=\"handlePreview\"\r\n    >\r\n      <img class=\"avatar\" v-if=\"imageUrl\" :src=\"imageUrl\" alt=\"avatar\" />\r\n      <div v-else>\r\n        <LoadingOutlined v-if=\"loading\" />\r\n        <PlusOutlined v-else />\r\n        <div class=\"ant-upload-text\">上传照片</div>\r\n      </div>\r\n    </a-upload>\r\n\r\n    <a-modal :open=\"previewVisible\" :title=\"previewTitle\" :footer=\"null\" @cancel=\"handleCancel\">\r\n      <img alt=\"example\" style=\"width: 100%\" :src=\"previewImage\" />\r\n    </a-modal>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, watch } from 'vue'\r\nimport { message, Form } from 'ant-design-vue'\r\nimport { LoadingOutlined, PlusOutlined } from '@ant-design/icons-vue'\r\nfunction getBase64(file) {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader()\r\n    reader.readAsDataURL(file)\r\n    reader.onload = () => resolve(reader.result)\r\n    reader.onerror = (error) => reject(error)\r\n  })\r\n}\r\n\r\nconst emit = defineEmits(['update:value', 'change'])\r\nconst props = defineProps({\r\n  value: {\r\n    type: String,\r\n    default: ''\r\n  }\r\n})\r\n\r\nconst fileList = ref([])\r\nconst loading = ref(false)\r\nconst imageUrl = ref('')\r\n\r\nwatch(\r\n  () => props.value,\r\n  (val) => {\r\n    imageUrl.value = val\r\n  },\r\n  {\r\n    immediate: true\r\n  }\r\n)\r\n\r\nconst formItemContext = Form.useInjectFormItemContext()\r\n\r\nconst triggerChange = () => {\r\n  let data = {\r\n    imageUrl: imageUrl.value,\r\n    file: fileList.value[0].originFileObj\r\n  }\r\n\r\n  emit('change', data)\r\n  emit('update:value', data.imageUrl)\r\n\r\n  formItemContext.onFieldChange()\r\n}\r\n\r\nconst beforeUpload = (file) => {\r\n  const isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png'\r\n\r\n  if (!isJpgOrPng) {\r\n    message.error('机器人头像只支持JPG、PNG格式的图片')\r\n    return false\r\n  }\r\n\r\n  const isLt2M = file.size / 1024 < 1024\r\n\r\n  if (!isLt2M) {\r\n    message.error('成员头像图片大小不能超过1M')\r\n    return false\r\n  }\r\n\r\n  fileList.value = [file]\r\n\r\n  getBase64(file).then((base64Url) => {\r\n    imageUrl.value = base64Url\r\n    loading.value = false\r\n\r\n    triggerChange()\r\n  })\r\n\r\n  return false\r\n}\r\n\r\nconst previewVisible = ref(false)\r\nconst previewImage = ref('')\r\nconst previewTitle = ref('')\r\n\r\nconst handleCancel = () => {\r\n  previewVisible.value = false\r\n  previewTitle.value = ''\r\n}\r\nconst handlePreview = async (file) => {\r\n  if (!file.url && !file.preview) {\r\n    file.preview = await getBase64(file.originFileObj)\r\n  }\r\n  previewImage.value = file.url || file.preview\r\n  previewVisible.value = true\r\n  previewTitle.value = file.name || file.url.substring(file.url.lastIndexOf('/') + 1)\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.avatar-uploader::v-deep(.ant-upload) {\r\n  margin: 0 !important;\r\n  width: 62px !important;\r\n  height: 62px !important;\r\n}\r\n\r\n.ant-upload-select-picture-card i {\r\n  font-size: 32px;\r\n  color: #999;\r\n}\r\n\r\n.ant-upload-select-picture-card .ant-upload-text {\r\n  margin-top: 8px;\r\n  color: #666;\r\n}\r\n\r\n.avatar-uploader .avatar {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n</style>\r\n","<template>\r\n  <div>\r\n    <a-modal v-model:open=\"show\" :title=\"modalTitle\" @ok=\"handleOk\" width=\"746px\">\r\n      <div class=\"form-box\">\r\n        <div class=\"avatar-box\">\r\n          <AvatarInput v-model:value=\"formState.avatar_url\" @change=\"onAvatarChange\" />\r\n          <div class=\"tip\">{{ t('click_to_replace_tip') }}</div>\r\n        </div>\r\n        <a-form layout=\"vertical\" autocomplete=\"off\">\r\n          <div class=\"flex-item-box\">\r\n            <a-form-item :label=\"t('member_nickname')\" v-bind=\"validateInfos.nick_name\">\r\n              <a-input\r\n                :maxlength=\"100\"\r\n                type=\"text\"\r\n                :placeholder=\"t('input_nickname')\"\r\n                v-model:value=\"formState.nick_name\"\r\n              ></a-input>\r\n            </a-form-item>\r\n            <a-form-item :label=\"t('login_account')\" v-bind=\"validateInfos.user_name\">\r\n              <a-input\r\n                :disabled=\"formState.id != ''\"\r\n                type=\"text\"\r\n                :placeholder=\"t('account_format_tip')\"\r\n                v-model:value=\"formState.user_name\"\r\n              ></a-input>\r\n            </a-form-item>\r\n          </div>\r\n          <div class=\"flex-item-box\">\r\n            <a-form-item :label=\"t('member_role')\" v-bind=\"validateInfos.user_roles\">\r\n              <a-select\r\n                v-model:value=\"formState.user_roles\"\r\n                style=\"width: 100%\"\r\n                :placeholder=\"t('select_member_role')\"\r\n              >\r\n                <a-select-option v-for=\"item in roleLists\" :key=\"item.id\" :value=\"item.id\">{{\r\n                  item.name\r\n                }}</a-select-option>\r\n              </a-select>\r\n            </a-form-item>\r\n            <a-form-item\r\n              :label=\"t('select_department')\"\r\n              v-bind=\"validateInfos.department_ids\"\r\n              name=\"department_ids\"\r\n            >\r\n              <a-tree-select\r\n                v-model:value=\"formState.department_ids\"\r\n                show-search\r\n                style=\"width: 100%\"\r\n                :dropdown-style=\"{ maxHeight: '400px', overflow: 'auto' }\"\r\n                :placeholder=\"t('please_select')\"\r\n                allow-clear\r\n                multiple\r\n                tree-default-expand-all\r\n                :tree-data=\"gData\"\r\n                tree-node-filter-prop=\"label\"\r\n              >\r\n                <template #title=\"{ value: val, label }\">\r\n                  <div>{{ label }}</div>\r\n                </template>\r\n              </a-tree-select>\r\n            </a-form-item>\r\n          </div>\r\n          <div class=\"flex-item-box\">\r\n            <a-form-item :label=\"t('login_password')\" v-bind=\"validateInfos.password\" v-if=\"!formState.id\">\r\n              <a-input-password\r\n                v-model:value=\"formState.password\"\r\n                :placeholder=\"t('password_format_tip')\"\r\n              />\r\n            </a-form-item>\r\n            <a-form-item\r\n              :label=\"t('confirm_password')\"\r\n              v-bind=\"validateInfos.check_password\"\r\n              v-if=\"!formState.id\"\r\n            >\r\n              <a-input-password\r\n                v-model:value=\"formState.check_password\"\r\n                :placeholder=\"t('reinput_password')\"\r\n              />\r\n            </a-form-item>\r\n          </div>\r\n          <div class=\"flex-item-box\">\r\n            <a-form-item :label=\"t('expire_time')\" v-bind=\"validateInfos.expire_time\" required>\r\n              <a-radio-group v-model:value=\"formState.expire_time_type\">\r\n                <a-radio :value=\"0\">{{ t('permanent_valid') }}</a-radio>\r\n                <a-radio :value=\"1\">{{ t('specify_time') }}</a-radio>\r\n              </a-radio-group>\r\n              <div style=\"margin-top: 4px\" v-if=\"formState.expire_time_type == 1\">\r\n                <a-date-picker\r\n                  :showNow=\"false\"\r\n                  format=\"YYYY-MM-DD HH:mm\"\r\n                  :disabled-date=\"disabledDate\"\r\n                  v-model:value=\"formState.expire_time\"\r\n                  :show-time=\"{ defaultValue: dayjs('00:00', 'HH:mm') }\"\r\n                />\r\n              </div>\r\n            </a-form-item>\r\n          </div>\r\n        </a-form>\r\n      </div>\r\n    </a-modal>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { validatePassword } from '@/utils/validate.js'\r\nimport { ref, reactive, toRaw } from 'vue'\r\nimport { Form, message } from 'ant-design-vue'\r\nimport AvatarInput from './avatar-input.vue'\r\nimport { saveUser, getRoleList } from '@/api/manage/index.js'\r\nimport defaultAvatar from '@/assets/img/role_avatar.png'\r\nimport { getDepartmentList } from '@/api/department/index.js'\r\nimport { formateDepartmentCascaderData } from '@/utils/index.js'\r\nimport dayjs from 'dayjs'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.user.manage.add-team-members')\r\nconst emit = defineEmits(['ok'])\r\n\r\nconst useForm = Form.useForm\r\nconst show = ref(false)\r\nconst modalTitle = ref(t('add_team_member'))\r\nconst formState = reactive({\r\n  user_name: '',\r\n  nick_name: '',\r\n  avatar: '',\r\n  avatar_url: '',\r\n  user_roles: '3',\r\n  password: '',\r\n  check_password: '',\r\n  department_ids: [],\r\n  expire_time_type: 0,\r\n  expire_time: '',\r\n  id: ''\r\n})\r\n\r\nconst gData = ref([])\r\nconst getLists = () => {\r\n  getDepartmentList({}).then((res) => {\r\n    let treeData = res.data || []\r\n    gData.value = formateDepartmentCascaderData(treeData)\r\n  })\r\n}\r\n\r\nconst onAvatarChange = (data) => {\r\n  formState.avatar = data.file\r\n}\r\nconst roleLists = ref([])\r\ngetRoleList({\r\n  page: 1,\r\n  size: 200,\r\n  search: ''\r\n}).then((res) => {\r\n  let lists = res.data.list || []\r\n  roleLists.value = lists.filter((item) => item.id != '1' && item.role_type != 1)\r\n})\r\nconst formRules = reactive({\r\n  user_name: [\r\n    {\r\n      message: t('please_input_login_account'),\r\n      required: true\r\n    },\r\n    {\r\n      validator: async (rule, value) => {\r\n        if (!/^[a-zA-Z0-9_.-]+$/.test(value) && value) {\r\n          return Promise.reject(t('account_format_tip'))\r\n        }\r\n        return Promise.resolve()\r\n      }\r\n    }\r\n  ],\r\n  nick_name: [\r\n    {\r\n      message: t('input_nickname'),\r\n      required: true\r\n    }\r\n  ],\r\n  avatar_url: [\r\n    {\r\n      message: t('please_upload_avatar'),\r\n      required: true\r\n    }\r\n  ],\r\n  user_roles: [\r\n    {\r\n      message: t('please_select_member_role'),\r\n      required: true\r\n    }\r\n  ],\r\n  password: [\r\n    {\r\n      message: t('please_input_login_password'),\r\n      required: true\r\n    },\r\n    {\r\n      validator: async (rule, value) => {\r\n        if (!validatePassword(value) && value) {\r\n          return Promise.reject(t('password_format_tip'))\r\n        }\r\n        return Promise.resolve()\r\n      }\r\n    }\r\n  ],\r\n  check_password: [\r\n    {\r\n      message: t('please_input_confirm_password'),\r\n      required: true\r\n    },\r\n    {\r\n      validator: async (rule, value) => {\r\n        if (value != formState.password && value) {\r\n          return Promise.reject(t('passwords_not_match'))\r\n        }\r\n        return Promise.resolve()\r\n      }\r\n    }\r\n  ],\r\n  expire_time: [\r\n    {\r\n      validator: async (rule, value) => {\r\n        if (formState.expire_time_type == 1 && !value) {\r\n          return Promise.reject(t('please_select_specify_date'))\r\n        }\r\n        return Promise.resolve()\r\n      }\r\n    }\r\n  ],\r\n  department_ids: [\r\n    {\r\n      message: t('please_select_department'),\r\n      required: true\r\n    }\r\n  ]\r\n})\r\n\r\nconst { resetFields, validate, validateInfos } = useForm(formState, formRules)\r\n\r\nconst add = (department_id) => {\r\n  modalTitle.value = t('add_team_member')\r\n  show.value = true\r\n  resetFields()\r\n  formState.user_name = ''\r\n  formState.nick_name = ''\r\n  formState.avatar = ''\r\n  formState.avatar_url = defaultAvatar\r\n  formState.user_roles = '3'\r\n  formState.password = ''\r\n  formState.check_password = ''\r\n  formState.expire_time_type = 0\r\n  formState.expire_time = ''\r\n  formState.department_ids = department_id ? [department_id] : []\r\n  formState.id = ''\r\n  getLists()\r\n}\r\n\r\nconst edit = (data) => {\r\n  modalTitle.value = t('edit_team_member')\r\n  formState.user_name = data.user_name\r\n  formState.nick_name = data.nick_name\r\n  formState.avatar_url = data.avatar || defaultAvatar\r\n  formState.avatar = ''\r\n  formState.user_roles = data.user_roles\r\n  formState.password = ''\r\n  formState.check_password = ''\r\n  formState.id = data.id\r\n  if (data.expire_time > 0) {\r\n    formState.expire_time_type = 1\r\n    formState.expire_time = dayjs(data.expire_time * 1000)\r\n  } else {\r\n    formState.expire_time_type = 0\r\n    formState.expire_time = ''\r\n  }\r\n\r\n  formState.department_ids = data.departments.map((item) => +item.id)\r\n\r\n  delete formRules.password\r\n  delete formRules.check_password\r\n  show.value = true\r\n  getLists()\r\n}\r\n\r\nfunction setDepartmentIds(data) {\r\n  let list = []\r\n  data.forEach((item) => {\r\n    let filterItem = findNodeByValue(gData.value, item.id)\r\n    if (filterItem && filterItem.path) {\r\n      list.push(filterItem.path)\r\n    }\r\n  })\r\n  return list\r\n}\r\n\r\nfunction findNodeByValue(data, targetValue) {\r\n  for (const node of data) {\r\n    if (node.value == targetValue) {\r\n      return { ...node } // 返回匹配的节点及其子节点\r\n    }\r\n    if (node.children && node.children.length > 0) {\r\n      const foundNode = findNodeByValue(node.children, targetValue)\r\n      if (foundNode) {\r\n        return foundNode\r\n      }\r\n    }\r\n  }\r\n  return null // 如果没有找到匹配的节点，返回 null\r\n}\r\n\r\nconst saveLoading = ref(false)\r\nconst handleOk = () => {\r\n  validate().then(() => {\r\n    let formData = {\r\n      ...toRaw(formState)\r\n    }\r\n\r\n    if (formData.expire_time_type == 1) {\r\n      formData.expire_time = dayjs(formData.expire_time).unix()\r\n    } else {\r\n      formData.expire_time = 0\r\n    }\r\n\r\n    formData.department_ids = formState.department_ids.join(',')\r\n    delete formData.avatar_url\r\n    console.log(formData, formState)\r\n    saveLoading.value = true\r\n    saveUser(formData)\r\n      .then((res) => {\r\n        message.success(`${modalTitle.value}${t('success')}`)\r\n        show.value = false\r\n        emit('ok')\r\n      })\r\n      .finally(() => {\r\n        saveLoading.value = false\r\n      })\r\n  })\r\n}\r\n\r\nconst disabledDate = (current) => {\r\n  return current && current < dayjs().startOf('day')\r\n}\r\n\r\ndefineExpose({\r\n  add,\r\n  edit\r\n})\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.form-box {\r\n  margin-top: 24px;\r\n}\r\n.flex-item-box {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 32px;\r\n  .ant-form-item {\r\n    flex: 1;\r\n  }\r\n}\r\n.avatar-box {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  flex-direction: column;\r\n  gap: 6px;\r\n  margin-bottom: 24px;\r\n  .tip {\r\n    color: #8c8c8c;\r\n    line-height: 22px;\r\n  }\r\n}\r\n</style>","<template>\r\n  <div>\r\n    <a-modal v-model:open=\"show\" :title=\"modalTitle\" @ok=\"handleOk\" width=\"476px\">\r\n      <div class=\"form-box\">\r\n        <a-form layout=\"vertical\">\r\n          <a-form-item :label=\"t('login_password')\" v-bind=\"validateInfos.password\">\r\n            <a-input-password\r\n              v-model:value=\"formState.password\"\r\n              :placeholder=\"t('password_placeholder')\"\r\n            />\r\n          </a-form-item>\r\n          <a-form-item :label=\"t('confirm_password')\" v-bind=\"validateInfos.check_password\">\r\n            <a-input-password\r\n              v-model:value=\"formState.check_password\"\r\n              :placeholder=\"t('re_enter_password')\"\r\n            />\r\n          </a-form-item>\r\n        </a-form>\r\n      </div>\r\n    </a-modal>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { validatePassword } from '@/utils/validate.js'\r\nimport { ref, reactive, toRaw } from 'vue'\r\nimport { Form, message } from 'ant-design-vue'\r\nimport { resetPass } from '@/api/manage/index.js'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\nimport { computed } from 'vue'\r\n\r\nconst emit = defineEmits(['ok'])\r\n\r\nconst useForm = Form.useForm\r\nconst { t } = useI18n('views.user.manage.components.reset-password')\r\nconst show = ref(false)\r\nconst modalTitle = computed(() => t('modal_title'))\r\nconst formState = reactive({\r\n  password: '',\r\n  check_password: '',\r\n  id: ''\r\n})\r\n\r\nconst formRules = reactive({\r\n  password: [\r\n    {\r\n      message: t('enter_login_password'),\r\n      required: true\r\n    },\r\n    {\r\n      validator: async (rule, value) => {\r\n        if (!validatePassword(value) && value) {\r\n          return Promise.reject(t('password_must_contain'))\r\n        }\r\n        return Promise.resolve()\r\n      }\r\n    }\r\n  ],\r\n  check_password: [\r\n    {\r\n      message: t('enter_confirm_password'),\r\n      required: true\r\n    },\r\n    {\r\n      validator: async (rule, value) => {\r\n        if (value != formState.password && value) {\r\n          return Promise.reject(t('passwords_not_match'))\r\n        }\r\n        return Promise.resolve()\r\n      }\r\n    }\r\n  ]\r\n})\r\n\r\nconst { resetFields, validate, validateInfos } = useForm(formState, formRules)\r\n\r\nconst open = (record) => {\r\n  console.log(record.id,'==')\r\n  show.value = true\r\n  resetFields()\r\n  formState.password = ''\r\n  formState.check_password = ''\r\n  formState.id = record.id\r\n  \r\n}\r\n\r\nconst handleOk = () => {\r\n  validate().then(() => {\r\n    resetPass({\r\n      ...toRaw(formState)\r\n    }).then((res) => {\r\n      message.success(t('modification_successful'))\r\n      show.value = false\r\n      emit('ok')\r\n    })\r\n  })\r\n}\r\n\r\ndefineExpose({\r\n  open\r\n})\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.form-box {\r\n  margin-top: 24px;\r\n}\r\n</style>\r\n","<template>\r\n  <a-modal\r\n    class=\"add-model-alert\"\r\n    width=\"800px\"\r\n    v-model:open=\"show\"\r\n    :title=\"currentTitle\"\r\n    @ok=\"handleOk\"\r\n    @cancel=\"handleClose\"\r\n  >\r\n    <div class=\"form-wrapper\" v-if=\"object_type == 1\">\r\n      <div class=\"select\">{{ t('selected_count', { count: checkedList.length }) }}</div>\r\n      <a-table\r\n        :data-source=\"dataList\"\r\n        :pagination=\"false\"\r\n        :scroll=\"{ y: 500 }\"\r\n        row-key=\"id\"\r\n        :row-selection=\"{ selectedRowKeys: checkedList, onChange: onSelectChange }\"\r\n      >\r\n        <a-table-column :title=\"t('robot')\" data-index=\"robot_name\" :width=\"350\">\r\n          <template #default=\"{ record }\">\r\n            <div class=\"tools-wrapper\">\r\n              <img class=\"model-logo\" :src=\"record.robot_avatar\" alt=\"\" />\r\n              <div class=\"item-name\">{{ record.robot_name }}</div>\r\n            </div>\r\n          </template>\r\n        </a-table-column>\r\n        <a-table-column :title=\"t('permission')\" data-index=\"operate_rights\" :width=\"350\">\r\n          <template #default=\"{ record }\">\r\n            <a-radio-group v-model:value=\"record.operate_rights\">\r\n              <a-radio value=\"4\">{{ t('manage') }}</a-radio>\r\n              <a-radio value=\"2\">{{ t('edit') }}</a-radio>\r\n              <a-radio value=\"1\">{{ t('view') }}</a-radio>\r\n            </a-radio-group>\r\n          </template>\r\n        </a-table-column>\r\n      </a-table>\r\n    </div>\r\n    <div class=\"form-wrapper\" v-else-if=\"object_type == 2\">\r\n      <div class=\"main-tabs-box\">\r\n        <a-segmented v-model:value=\"tabs\" :options=\"tabOption\" @change=\"handleChangeTabs\">\r\n          <template #label=\"{ payload }\">\r\n            {{ payload.title }}\r\n          </template>\r\n        </a-segmented>\r\n      </div>\r\n      <template v-if=\"tabs == 1\">\r\n        <div class=\"select\">{{ t('selected_count', { count: checkedList.length }) }}</div>\r\n        <a-table\r\n          :data-source=\"dataList\"\r\n          :pagination=\"false\"\r\n          :scroll=\"{ y: 500 }\"\r\n          row-key=\"id\"\r\n          :row-selection=\"{ selectedRowKeys: checkedList, onChange: onSelectChange }\"\r\n        >\r\n          <a-table-column :title=\"t('knowledge_base')\" data-index=\"library_name\" :width=\"350\">\r\n            <template #default=\"{ record }\">\r\n              <div class=\"tools-wrapper\">\r\n                <div class=\"item-name\">{{ record.library_name }}</div>\r\n              </div>\r\n            </template>\r\n          </a-table-column>\r\n          <a-table-column :title=\"t('permission')\" data-index=\"operate_rights\" :width=\"350\">\r\n            <template #default=\"{ record }\">\r\n              <a-radio-group v-model:value=\"record.operate_rights\">\r\n                <a-radio value=\"4\">{{ t('manage') }}</a-radio>\r\n                <a-radio value=\"2\">{{ t('edit') }}</a-radio>\r\n                <a-radio value=\"1\">{{ t('view') }}</a-radio>\r\n              </a-radio-group>\r\n            </template>\r\n          </a-table-column>\r\n        </a-table>\r\n      </template>\r\n      <template v-else>\r\n        <a-table :data-source=\"departLists\" :pagination=\"false\" :scroll=\"{ y: 500 }\" row-key=\"id\">\r\n          <a-table-column :title=\"t('knowledge_base')\" data-index=\"name\" :width=\"350\">\r\n            <template #default=\"{ record }\">\r\n              <div class=\"tools-wrapper\">\r\n                <div class=\"item-name\">{{ record.name }}</div>\r\n              </div>\r\n            </template>\r\n          </a-table-column>\r\n          <a-table-column :title=\"t('permission')\" data-index=\"operate_rights\" :width=\"350\">\r\n            <template #default=\"{ record }\">\r\n              <a-radio-group v-model:value=\"record.operate_rights\" disabled>\r\n                <a-radio value=\"4\">{{ t('manage') }}</a-radio>\r\n                <a-radio value=\"2\">{{ t('edit') }}</a-radio>\r\n                <a-radio value=\"1\">{{ t('view') }}</a-radio>\r\n              </a-radio-group>\r\n            </template>\r\n          </a-table-column>\r\n        </a-table>\r\n      </template>\r\n    </div>\r\n    <div class=\"form-wrapper\" v-else-if=\"object_type == 3\">\r\n      <div class=\"select\">{{ t('selected_count', { count: checkedList.length }) }}</div>\r\n\r\n      <a-table\r\n        :data-source=\"dataList\"\r\n        :pagination=\"false\"\r\n        :scroll=\"{ y: 500 }\"\r\n        row-key=\"id\"\r\n        :row-selection=\"{ selectedRowKeys: checkedList, onChange: onSelectChange }\"\r\n      >\r\n        <a-table-column :title=\"t('database')\" data-index=\"name\" :width=\"350\">\r\n          <template #default=\"{ record }\">\r\n            <div class=\"tools-wrapper\">\r\n              <div class=\"item-name\">{{ record.name }}</div>\r\n            </div>\r\n          </template>\r\n        </a-table-column>\r\n        <a-table-column :title=\"t('permission')\" data-index=\"operate_rights\" :width=\"350\">\r\n          <template #default=\"{ record }\">\r\n            <a-radio-group v-model:value=\"record.operate_rights\">\r\n              <a-radio value=\"4\">{{ t('manage') }}</a-radio>\r\n              <a-radio value=\"2\">{{ t('edit') }}</a-radio>\r\n              <a-radio value=\"1\">{{ t('view') }}</a-radio>\r\n            </a-radio-group>\r\n          </template>\r\n        </a-table-column>\r\n      </a-table>\r\n    </div>\r\n  </a-modal>\r\n</template>\r\n<script setup>\r\nimport { ref, reactive, computed, watch } from 'vue'\r\nimport { getPermissionManageList, batchSavePermissionManage } from '@/api/department/index.js'\r\nimport { message } from 'ant-design-vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.user.manage.components.see-model-alert')\r\nconst emit = defineEmits(['save', 'ok'])\r\nconst props = defineProps({\r\n  robotList: {\r\n    type: Array,\r\n    default: () => []\r\n  },\r\n  libraryList: {\r\n    type: Array,\r\n    default: () => []\r\n  },\r\n  formList: {\r\n    type: Array,\r\n    default: () => []\r\n  }\r\n})\r\nconst checkedList = ref([])\r\nconst currentTitle = ref('')\r\nconst show = ref(false)\r\nconst dataList = ref([])\r\nconst departLists = ref([])\r\n\r\nconst formatId = (arr) => {\r\n  const newArr = []\r\n  arr.map((item) => {\r\n    newArr.push(item.id)\r\n  })\r\n  return newArr\r\n}\r\n\r\nconst onSelectChange = (selectedRowKeys) => {\r\n  checkedList.value = selectedRowKeys\r\n}\r\n\r\nconst tabs = ref(1)\r\nconst baseOption = computed(() => [\r\n  {\r\n    value: 2,\r\n    payload: {\r\n      title: t('department_knowledge_base')\r\n    }\r\n  },\r\n  {\r\n    value: 1,\r\n    payload: {\r\n      title: t('member_knowledge_base')\r\n    }\r\n  }\r\n])\r\nconst tabOption = ref(baseOption.value)\r\n\r\n// 监听 baseOption 的变化，当语言切换时更新 tabOption\r\nwatch(baseOption, (newVal) => {\r\n  tabOption.value = newVal\r\n}, { immediate: true })\r\n\r\nlet currentRecord = null\r\nconst object_type = ref(1) // 1:机器人 2:知识库 3:数据库\r\nconst identity_type = ref(1) //\t1:用户 2:部门\r\nconst identity_id = ref()\r\n\r\nlet depratmentIds = []\r\nconst open = async (key, status, record) => {\r\n  checkedList.value = []\r\n  object_type.value = key\r\n  depratmentIds = []\r\n  identity_type.value = 1\r\n  tabs.value = 1\r\n  currentRecord = JSON.parse(JSON.stringify(record))\r\n  identity_id.value = currentRecord.id\r\n  record = JSON.parse(JSON.stringify(record))\r\n  tabOption.value = baseOption\r\n  record.managed_robot_list = record.managed_robot_list || []\r\n  record.managed_library_list = record.managed_library_list || []\r\n  record.managed_form_list = record.managed_form_list || []\r\n  let list = []\r\n  if (key == 1) {\r\n    currentTitle.value = t('add_member_robot')\r\n    list = props.robotList\r\n    list.forEach((item) => {\r\n      let filterItem = record.managed_robot_list.filter((it) => it.id == item.id)\r\n      if (filterItem.length) {\r\n        item.operate_rights = filterItem[0].operate_rights\r\n      } else {\r\n        item.operate_rights = '4'\r\n      }\r\n    })\r\n    // 编辑\r\n    if (status && status == 'edit') {\r\n      currentTitle.value = t('edit_member_robot')\r\n      checkedList.value = formatId(record.managed_robot_list)\r\n    }\r\n  } else if (key == 2) {\r\n    console.log(record, '==')\r\n    currentTitle.value = t('add_member_knowledge')\r\n    // if (record.departments && record.departments.length) {\r\n    //   depratmentIds = record.departments.map((item) => item.id)\r\n    //   getDepartmentList()\r\n    // }\r\n    list = props.libraryList\r\n    list.forEach((item) => {\r\n      let filterItem = record.managed_library_list.filter((it) => it.id == item.id)\r\n      if (filterItem.length) {\r\n        item.operate_rights = filterItem[0].operate_rights\r\n      } else {\r\n        item.operate_rights = '4'\r\n      }\r\n    })\r\n    // 编辑\r\n    if (status && status == 'edit') {\r\n      currentTitle.value = t('edit_member_knowledge')\r\n      checkedList.value = formatId(record.managed_library_list)\r\n    }\r\n  } else if (key == 3) {\r\n    currentTitle.value = t('add_member_database')\r\n\r\n    list = props.formList\r\n    list.forEach((item) => {\r\n      let filterItem = record.managed_form_list.filter((it) => it.id == item.id)\r\n      if (filterItem.length) {\r\n        item.operate_rights = filterItem[0].operate_rights\r\n      } else {\r\n        item.operate_rights = '4'\r\n      }\r\n    })\r\n\r\n    // 编辑\r\n    if (status && status == 'edit') {\r\n      currentTitle.value = t('edit_member_database')\r\n      checkedList.value = formatId(record.managed_form_list)\r\n    }\r\n  }\r\n  dataList.value = list\r\n  show.value = true\r\n}\r\n\r\nconst getDepartmentList = () => {\r\n  getPermissionManageList({\r\n    object_type: object_type.value,\r\n    identity_type: identity_type.value,\r\n    identity_id: identity_id.value,\r\n    tab: identity_type.value\r\n  }).then((res) => {\r\n    departLists.value = res.data || []\r\n  })\r\n}\r\n\r\nconst handleChangeTabs = () => {\r\n  if (tabs.value == 2) {\r\n    getDepartmentList()\r\n  }\r\n}\r\n\r\nconst handleBatchOpen = (key, ids) => {\r\n  checkedList.value = []\r\n  depratmentIds = []\r\n  identity_type.value = 1\r\n  tabs.value = 1\r\n  object_type.value = key\r\n  identity_id.value = ids\r\n  let list = []\r\n  if (key == 1) {\r\n    currentTitle.value = t('batch_update_member_robot')\r\n    list = props.robotList\r\n  } else if (key == 2) {\r\n    currentTitle.value = t('batch_update_member_knowledge')\r\n    list = props.libraryList\r\n  } else if (key == 3) {\r\n    currentTitle.value = t('batch_update_member_database')\r\n    list = props.formList\r\n  }\r\n  list.forEach((item) => {\r\n    item.operate_rights = '4'\r\n  })\r\n  dataList.value = list\r\n  show.value = true\r\n}\r\n\r\nconst handleDepartmentOpen = (key, treeParmas, datas) => {\r\n  // 添加部门\r\n  checkedList.value = []\r\n  depratmentIds = []\r\n\r\n  if (treeParmas.is_user) {\r\n    identity_type.value = 1\r\n  } else {\r\n    identity_type.value = 2\r\n  }\r\n\r\n  identity_id.value = treeParmas.id\r\n\r\n  // 创建响应式的 tab 选项\r\n  const dynamicTabOption = computed(() => [\r\n    {\r\n      value: 2,\r\n      payload: {\r\n        title: identity_type.value == 1 ? t('department_knowledge_base') : t('superior_knowledge_base')\r\n      }\r\n    },\r\n    {\r\n      value: 1,\r\n      payload: {\r\n        title: identity_type.value == 1 ? t('member_knowledge_base') : t('department_knowledge_base')\r\n      }\r\n    }\r\n ])\r\n  tabOption.value = dynamicTabOption.value\r\n  \r\n  // 监听动态选项的变化\r\n  watch(dynamicTabOption, (newVal) => {\r\n    tabOption.value = newVal\r\n  }, { immediate: true })\r\n  tabs.value = 1\r\n  object_type.value = key\r\n\r\n  let list = []\r\n  if (key == 1) {\r\n    currentTitle.value = t('add_member_robot')\r\n    list = props.robotList\r\n  } else if (key == 2) {\r\n    currentTitle.value = t('add_member_knowledge')\r\n    list = props.libraryList\r\n  } else if (key == 3) {\r\n    currentTitle.value = t('add_member_database')\r\n    list = props.formList\r\n  }\r\n  list.forEach((item) => {\r\n    let filterItem = datas.filter((it) => it.object_id == item.id)\r\n    if (filterItem.length) {\r\n      item.operate_rights = filterItem[0].operate_rights\r\n    } else {\r\n      item.operate_rights = '4'\r\n    }\r\n  })\r\n  checkedList.value = datas.map((item) => item.object_id)\r\n  dataList.value = list\r\n  show.value = true\r\n}\r\n\r\nconst handleOk = () => {\r\n  let parmas = {\r\n    identity_ids: identity_id.value,\r\n    identity_type: identity_type.value,\r\n    object_type: object_type.value\r\n  }\r\n\r\n  let object_array = []\r\n  dataList.value.forEach((item) => {\r\n    if (checkedList.value.includes(item.id)) {\r\n      object_array.push({\r\n        object_id: +item.id,\r\n        object_type: +object_type.value,\r\n        operate_rights: +item.operate_rights\r\n      })\r\n    }\r\n  })\r\n  parmas.object_array = JSON.stringify(object_array)\r\n  batchSavePermissionManage(parmas).then((res) => {\r\n    show.value = false\r\n    message.success(t('save_success'))\r\n    emit('ok')\r\n  })\r\n}\r\n\r\nconst handleClose = () => {}\r\n\r\n// watch(\r\n//   () => checkedList.value,\r\n//   (val) => {\r\n//   },\r\n// );\r\n\r\ndefineExpose({\r\n  open,\r\n  handleBatchOpen,\r\n  handleDepartmentOpen\r\n})\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.add-model-alert {\r\n  .form-wrapper {\r\n    display: flex;\r\n    flex-direction: column;\r\n    margin-top: 14px;\r\n  }\r\n\r\n  .select {\r\n    padding-bottom: 8px;\r\n  }\r\n\r\n  .model-logo {\r\n    display: block;\r\n    height: 26px;\r\n  }\r\n  .list-item {\r\n    width: 100%;\r\n    border-bottom: 1px solid #d9d9d9;\r\n  }\r\n\r\n  .tools-wrapper {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: flex-start;\r\n    gap: 8px;\r\n  }\r\n}\r\n\r\n.main-tabs-box {\r\n  display: flex;\r\n  margin-bottom: 16px;\r\n  ::v-deep(.ant-segmented .ant-segmented-item-selected) {\r\n    color: #2475fc;\r\n  }\r\n  ::v-deep(.ant-segmented .ant-segmented-item-label) {\r\n    padding: 0 16px;\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div>\r\n    <a-modal v-model:open=\"open\" :title=\"modalTitle\" @ok=\"handleOk\" :width=\"472\">\r\n      <div class=\"form-box\">\r\n        <div class=\"form-item\">\r\n          <div class=\"form-label\">{{ t('department_name') }}</div>\r\n          <div class=\"form-content\">\r\n            <a-input\r\n              :maxLength=\"10\"\r\n              v-model:value=\"formState.department_name\"\r\n              :placeholder=\"t('please_enter_department_name')\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div class=\"form-item\" v-if=\"!formState.id\">\r\n          <div class=\"form-label\">{{ t('parent_department') }}</div>\r\n          <div class=\"form-content\">\r\n            <a-tree-select\r\n              v-model:value=\"formState.pid\"\r\n              show-search\r\n              style=\"width: 100%\"\r\n              :dropdown-style=\"{ maxHeight: '400px', overflow: 'auto' }\"\r\n              :placeholder=\"t('please_select')\"\r\n              allow-clear\r\n              tree-default-expand-all\r\n              :tree-data=\"gData\"\r\n              tree-node-filter-prop=\"label\"\r\n            >\r\n              <template #title=\"{ value: val, label }\">\r\n                <div>{{ label }}</div>\r\n              </template>\r\n            </a-tree-select>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </a-modal>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive } from 'vue'\r\nimport { saveDepartment, getDepartmentList } from '@/api/department/index.js'\r\nimport { formateDepartmentCascaderData } from '@/utils/index.js'\r\nimport { message } from 'ant-design-vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.user.manage.components.add-department')\r\n\r\nconst open = ref(false)\r\nconst emit = defineEmits(['ok'])\r\nconst formState = reactive({\r\n  department_name: '',\r\n  id: '',\r\n  pid: ''\r\n})\r\n\r\nconst modalTitle = ref('')\r\nconst show = (data) => {\r\n  formState.id = ''\r\n  formState.pid = data.id > 0 ? data.id || '' : void 0\r\n  formState.department_name = ''\r\n  modalTitle.value = t('add_department')\r\n  open.value = true\r\n  getLists()\r\n}\r\n\r\nconst rename = (data) => {\r\n  formState.id = data.id || ''\r\n  formState.pid = data.pid || ''\r\n  formState.department_name = data.title || ''\r\n  modalTitle.value = t('rename')\r\n  open.value = true\r\n}\r\nconst gData = ref([])\r\nconst getLists = () => {\r\n  getDepartmentList({}).then((res) => {\r\n    let treeData = res.data || []\r\n    gData.value = formateDepartmentCascaderData(treeData)\r\n  })\r\n}\r\n\r\nconst handleOk = () => {\r\n  if (!formState.department_name) {\r\n    return message.error(t('please_enter_department_name'))\r\n  }\r\n  if (!formState.id && !formState.pid) {\r\n    return message.error(t('please_select_parent_department'))\r\n  }\r\n  saveDepartment({\r\n    ...formState\r\n  }).then((res) => {\r\n    message.success(t('modify_success'))\r\n    open.value = false\r\n    emit('ok')\r\n  })\r\n}\r\n\r\ndefineExpose({\r\n  show,\r\n  rename\r\n})\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.form-box {\r\n  margin-top: 24px;\r\n  .form-item {\r\n    margin-bottom: 24px;\r\n    line-height: 22px;\r\n    font-size: 14px;\r\n    .form-label {\r\n      color: #262626;\r\n      margin-bottom: 4px;\r\n      &::before {\r\n        content: '*';\r\n        color: #ff0000;\r\n        margin-right: 4px;\r\n        font-size: 14px;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div>\r\n    <a-modal v-model:open=\"open\" :title=\"null\" :footer=\"null\" :width=\"480\" :closable=\"false\">\r\n      <div class=\"del-box\">\r\n        <div class=\"icon-box\"><ExclamationCircleFilled /></div>\r\n        <div class=\"top-title\">{{ t('delete_department') }}</div>\r\n        <div class=\"content\">\r\n          {{ t('confirm_delete') }}\r\n        </div>\r\n        <div class=\"footer-btn\">\r\n          <a-button @click=\"open = false\">{{ t('close') }}</a-button>\r\n          <a-button danger @click=\"handleDirectDel\">{{ t('direct_delete') }}</a-button>\r\n          <a-button type=\"primary\" @click=\"handleOpenSetModal\">{{ t('delete_and_set') }}</a-button>\r\n        </div>\r\n      </div>\r\n    </a-modal>\r\n    <a-modal v-model:open=\"setModal\" :title=\"t('set_department')\" :width=\"472\" @ok=\"handleDel\">\r\n      <div class=\"set-box\">\r\n        <div class=\"set-desc\">{{ t('delete_before_notice') }}</div>\r\n        <div class=\"set-item\">\r\n          <div class=\"set-label\">{{ t('belong_department') }}</div>\r\n          <div>\r\n            <a-select\r\n              v-model:value=\"formState.new_department_id\"\r\n              style=\"width: 100%\"\r\n              :placeholder=\"t('please_select')\"\r\n            >\r\n              <a-select-option v-for=\"item in departmentLists\" :key=\"item.id\" :value=\"item.id\">{{\r\n                item.department_name\r\n              }}</a-select-option>\r\n            </a-select>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </a-modal>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { reactive, ref, createVNode } from 'vue'\r\nimport { ExclamationCircleFilled, ExclamationCircleOutlined } from '@ant-design/icons-vue'\r\nimport { getAllDepartment, deleteDepartment } from '@/api/department/index'\r\nimport { message, Modal } from 'ant-design-vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.user.manage.components.del-department')\r\n\r\nconst open = ref(false)\r\nconst setModal = ref(false)\r\n\r\nconst emit = defineEmits(['ok'])\r\nconst formState = reactive({\r\n  id: '',\r\n  new_department_id: void 0\r\n})\r\n\r\nlet filterIds = []\r\nconst show = (data) => {\r\n  // 过滤掉自己 和子辈\r\n  filterIds = []\r\n  filterIds = getSonIds(data)\r\n\r\n  formState.new_department_id = void 0\r\n  formState.id = data.id\r\n  if (data.children.length == 0) {\r\n    Modal.confirm({\r\n      title: t('tip'),\r\n      icon: createVNode(ExclamationCircleOutlined),\r\n      content: t('confirm_delete_department'),\r\n      onOk() {\r\n        handleDel()\r\n      }\r\n    })\r\n    return\r\n  }\r\n  open.value = true\r\n  getAllList()\r\n}\r\n\r\nfunction getSonIds(data) {\r\n  let ids = [data.id]\r\n\r\n  if (data.children && data.children.length > 0) {\r\n    for (const child of data.children) {\r\n      ids = ids.concat(getSonIds(child))\r\n    }\r\n  }\r\n\r\n  return ids\r\n}\r\n\r\nconst handleOpenSetModal = () => {\r\n  setModal.value = true\r\n}\r\n\r\nconst handleDirectDel = () => {\r\n  formState.new_department_id = ''\r\n  handleDel()\r\n}\r\nconst handleDel = () => {\r\n  deleteDepartment({\r\n    ...formState\r\n  }).then((res) => {\r\n    setModal.value = false\r\n    open.value = false\r\n    message.success(t('delete_success'))\r\n    emit('ok', formState.id)\r\n  })\r\n}\r\n\r\nconst departmentLists = ref([])\r\nconst getAllList = () => {\r\n  getAllDepartment().then((res) => {\r\n    let data = res.data || []\r\n    departmentLists.value = data.filter((item) => !filterIds.includes(+item.id))\r\n  })\r\n}\r\n\r\ndefineExpose({\r\n  show\r\n})\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.del-box {\r\n  position: relative;\r\n  padding-left: 38px;\r\n  padding-top: 12px;\r\n}\r\n.icon-box {\r\n  position: absolute;\r\n  top: 7px;\r\n  left: 0;\r\n  font-size: 20px;\r\n  color: #ff9900;\r\n}\r\n.top-title {\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  line-height: 24px;\r\n  color: #262626;\r\n}\r\n\r\n.content {\r\n  color: #595959;\r\n  line-height: 22px;\r\n  font-size: 14px;\r\n  margin-top: 8px;\r\n}\r\n.footer-btn {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 8px;\r\n  margin-top: 24px;\r\n}\r\n\r\n.set-box {\r\n  margin-top: 24px;\r\n  font-size: 14px;\r\n  line-height: 22px;\r\n  color: #595959;\r\n  margin-bottom: 24px;\r\n  .set-item {\r\n    margin-top: 24px;\r\n    .set-label {\r\n      color: #262626;\r\n      margin-bottom: 4px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"department-tree-search\">\r\n    <div class=\"flex-block\">\r\n      <a-input-search v-model:value=\"searchValue\" :placeholder=\"t('search_department')\" style=\"flex: 1\" />\r\n      <div class=\"add-btn-box\" @click=\"openAddModal({})\"><PlusOutlined /></div>\r\n    </div>\r\n    <div class=\"tree-list-box\">\r\n      <a-tree\r\n        :expanded-keys=\"expandedKeys\"\r\n        v-model:selectedKeys=\"selectedKeys\"\r\n        :auto-expand-parent=\"autoExpandParent\"\r\n        @select=\"onSelect\"\r\n        :tree-data=\"gData\"\r\n        blockNode\r\n        @expand=\"onExpand\"\r\n      >\r\n        <template #switcherIcon=\"{ switcherCls }\">\r\n          <div style=\"margin-right: 4px\">\r\n            <span class=\"action-btn toggle-btn\">\r\n              <CaretDownOutlined style=\"font-size: 12px\" :class=\"switcherCls\"\r\n            /></span>\r\n          </div>\r\n        </template>\r\n        <template #title=\"treeNode\">\r\n          <div class=\"doc-item\">\r\n            <span class=\"tree-title\" v-if=\"treeNode.title.indexOf(searchValue) > -1 && searchValue\">\r\n              <template v-if=\"treeNode.title.length > 3 && treeNode.level > 3\">\r\n                <a-tooltip>\r\n                  <template #title>{{ treeNode.title }}</template>\r\n                  {{ treeNode.title.substring(0, treeNode.title.indexOf(searchValue)) }}\r\n                  <span style=\"color: #f50\">{{ searchValue }}</span>\r\n                  {{\r\n                    treeNode.title.substring(\r\n                      treeNode.title.indexOf(searchValue) + searchValue.length\r\n                    )\r\n                  }}\r\n                </a-tooltip>\r\n              </template>\r\n              <template v-else>\r\n                {{ treeNode.title.substring(0, treeNode.title.indexOf(searchValue)) }}\r\n                <span style=\"color: #f50\">{{ searchValue }}</span>\r\n                {{\r\n                  treeNode.title.substring(treeNode.title.indexOf(searchValue) + searchValue.length)\r\n                }}\r\n              </template>\r\n            </span>\r\n            <span class=\"tree-title\" v-else>\r\n              <template v-if=\"treeNode.title.length > 3 && treeNode.level > 3\">\r\n                <a-tooltip>\r\n                  <template #title>{{ treeNode.title }}</template>\r\n                  {{ treeNode.title }}\r\n                </a-tooltip>\r\n              </template>\r\n              <template v-else>{{ treeNode.title }}</template>\r\n            </span>\r\n            <div class=\"use-num\">\r\n              {{ treeNode.children_nums }}\r\n            </div>\r\n            <div class=\"doc-action-box\" v-if=\"!treeNode.is_user\">\r\n              <a-dropdown>\r\n                <template #overlay>\r\n                  <a-menu>\r\n                    <a-menu-item\r\n                      key=\"addDoc\"\r\n                      @click.stop.prevent=\"openAddModal(treeNode)\"\r\n                    >\r\n                      <span class=\"menu-name\">{{ t('add_sub_department') }}</span>\r\n                    </a-menu-item>\r\n                    <a-menu-item key=\"importDoc\" @click.stop.prevent=\"handleRename(treeNode)\">\r\n                      <span class=\"menu-name\">{{ t('rename') }}</span>\r\n                    </a-menu-item>\r\n                    <a-menu-item\r\n                      v-if=\"treeNode.is_default != 1\"\r\n                      key=\"del\"\r\n                      @click.stop.prevent=\"openDel(treeNode)\"\r\n                    >\r\n                      <span class=\"menu-name\" style=\"color: #fb363f\">{{ t('delete') }}</span>\r\n                    </a-menu-item>\r\n                  </a-menu>\r\n                </template>\r\n                <span class=\"action-btn\" @click.stop=\"\"><MoreOutlined /></span>\r\n              </a-dropdown>\r\n            </div>\r\n          </div>\r\n        </template>\r\n      </a-tree>\r\n    </div>\r\n  </div>\r\n  <AddDepartment ref=\"addDepartmentRef\" @ok=\"handleSave\" />\r\n  <DelDepartment ref=\"delDepartmentRef\" @ok=\"handleDelDepartment\" />\r\n</template>\r\n\r\n<script setup>\r\nimport { PlusOutlined, CaretDownOutlined, MoreOutlined } from '@ant-design/icons-vue'\r\nimport { getDepartmentList } from '@/api/department/index.js'\r\nimport AddDepartment from './add-department.vue'\r\nimport { nextTick, ref, watch } from 'vue'\r\nimport { formateDepartmentData } from '@/utils/index.js'\r\nimport DelDepartment from './del-department.vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.user.manage.components.department-tree')\r\n\r\nconst emit = defineEmits(['select', 'save', 'refresh'])\r\n\r\nlet genData = []\r\n\r\nconst dataList = []\r\nconst getParentKey = (key, tree) => {\r\n  let parentKey\r\n  for (let i = 0; i < tree.length; i++) {\r\n    const node = tree[i]\r\n    if (node.children) {\r\n      if (node.children.some((item) => item.key === key)) {\r\n        parentKey = node.key\r\n      } else if (getParentKey(key, node.children)) {\r\n        parentKey = getParentKey(key, node.children)\r\n      }\r\n    }\r\n  }\r\n  return parentKey\r\n}\r\nconst expandedKeys = ref([])\r\nconst selectedKeys = ref([])\r\nconst searchValue = ref('')\r\nconst autoExpandParent = ref(true)\r\nconst gData = ref([])\r\n\r\nlet defaltGroupId = '' // 默认分组的id\r\nlet defaultItem = {}\r\nconst onExpand = (keys) => {\r\n  expandedKeys.value = keys\r\n  autoExpandParent.value = false\r\n}\r\nwatch(searchValue, (value) => {\r\n  const expanded = dataList\r\n    .map((item) => {\r\n      if (item.title.indexOf(value) > -1) {\r\n        return getParentKey(item.key, gData.value)\r\n      }\r\n      return null\r\n    })\r\n    .filter((item, i, self) => item && self.indexOf(item) === i)\r\n  expandedKeys.value = expanded\r\n  searchValue.value = value\r\n  autoExpandParent.value = true\r\n})\r\n\r\nconst generateList = (data) => {\r\n  for (let i = 0; i < data.length; i++) {\r\n    const node = data[i]\r\n    const key = node.key\r\n    dataList.push({\r\n      key,\r\n      title: node.title\r\n    })\r\n    if (node.children) {\r\n      generateList(node.children)\r\n    }\r\n  }\r\n}\r\n\r\nconst getLists = (isInit) => {\r\n  getDepartmentList({}).then((res) => {\r\n    let treeData = res.data || []\r\n\r\n    genData = []\r\n    genData = formateDepartmentData(treeData)\r\n    generateList(genData)\r\n    gData.value = genData\r\n    if (isInit) {\r\n      treeData.forEach((item) => {\r\n        if (item.is_default == 1) {\r\n          defaltGroupId = item.id\r\n          defaultItem = item\r\n        }\r\n      })\r\n      nextTick(() => {\r\n        if (defaltGroupId) {\r\n          selectedKeys.value = [defaltGroupId]\r\n          emit('select', defaultItem)\r\n        }\r\n      })\r\n    }\r\n  })\r\n}\r\ngetLists(true)\r\n\r\nlet treeSelectData = {}\r\n\r\nconst handleDelDepartment = (id) => {\r\n  // 删除部门\r\n  if (selectedKeys.value[0] == id) {\r\n    nextTick(() => {\r\n      if (defaltGroupId) {\r\n        selectedKeys.value = [defaltGroupId]\r\n        emit('select', defaultItem)\r\n      }\r\n    })\r\n  } else {\r\n    emit('refresh')\r\n  }\r\n  getLists()\r\n}\r\n\r\nconst addDepartmentRef = ref()\r\nconst openAddModal = (data) => {\r\n  // console.log(gData.value, genData, '==')\r\n  // console.log(autoExpandParent.value, '===')\r\n  // console.log(selectedKeys.value, '===')\r\n  addDepartmentRef.value.show(data)\r\n}\r\n\r\nconst handleRename = (data) => {\r\n  addDepartmentRef.value.rename(data)\r\n}\r\n\r\nconst onSelect = (_, e) => {\r\n  let data = {\r\n    user_id: '',\r\n    department_id: ''\r\n  }\r\n  if (e.node.is_user) {\r\n    data.user_id = e.node.id\r\n  } else {\r\n    data.department_id = e.node.id\r\n  }\r\n  if (e.selected) {\r\n  } else {\r\n    nextTick(() => {\r\n      selectedKeys.value = [e.node.id]\r\n    })\r\n  }\r\n  treeSelectData = {\r\n    ...e.node\r\n  }\r\n  emit('select', treeSelectData)\r\n}\r\n\r\nconst delDepartmentRef = ref(null)\r\nconst openDel = (treeNode) => {\r\n  delDepartmentRef.value.show(treeNode)\r\n}\r\n\r\nconst handleSave = () => {\r\n  getLists()\r\n  emit('refresh')\r\n}\r\n\r\ndefineExpose({\r\n  getLists\r\n})\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.add-btn-box {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 6px;\r\n  width: 32px;\r\n  height: 32px;\r\n  font-size: 16px;\r\n  cursor: pointer;\r\n  &:hover {\r\n    background: #e4e6eb;\r\n  }\r\n}\r\n.flex-block {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n.department-tree-search {\r\n}\r\n\r\n.tree-list-box {\r\n  margin-top: 16px;\r\n  ::v-deep(.ant-tree) {\r\n    .action-btn {\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      width: 22px;\r\n      height: 24px;\r\n      line-height: 24px;\r\n      border-radius: 6px;\r\n      cursor: pointer;\r\n      transition: all 0.2s;\r\n      font-size: 16px;\r\n      color: #595959;\r\n\r\n      &:hover {\r\n        background-color: #e4e6eb;\r\n      }\r\n    }\r\n    .ant-tree-treenode {\r\n      min-height: 32px;\r\n      &:hover {\r\n        background: #f2f4f7;\r\n        border-radius: 6px;\r\n      }\r\n      &.ant-tree-treenode-selected {\r\n        background: #e5efff;\r\n        color: #2475fc;\r\n        border-radius: 6px;\r\n      }\r\n      .ant-tree-node-content-wrapper.ant-tree-node-selected {\r\n        background: unset;\r\n      }\r\n      .ant-tree-switcher {\r\n        line-height: 32px;\r\n        display: flex;\r\n        align-items: center;\r\n        padding-left: 4px;\r\n      }\r\n      .ant-tree-node-content-wrapper {\r\n        line-height: 32px;\r\n        overflow: hidden;\r\n        &:hover {\r\n          background: unset;\r\n        }\r\n      }\r\n    }\r\n\r\n    .doc-item {\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: space-between;\r\n\r\n      .tree-title {\r\n        display: inline-block;\r\n        white-space: nowrap;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n      }\r\n\r\n      .doc-action-box {\r\n        width: 24px;\r\n        height: 24px;\r\n        display: none;\r\n        transition: all 0.2s cubic-bezier(0.075, 0.82, 0.165, 1);\r\n      }\r\n      &:hover {\r\n        .doc-action-box {\r\n          display: block;\r\n        }\r\n        .use-num {\r\n          display: none;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n.menu-name {\r\n  text-align: center;\r\n  display: block;\r\n  width: 100%;\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"main-content-box\">\r\n    <a-radio-group v-model:value=\"object_type\" @change=\"handleChange\">\r\n      <a-radio-button value=\"2\">{{ t('knowledge_base') }}</a-radio-button>\r\n      <a-radio-button value=\"1\">{{ t('robot') }}</a-radio-button>\r\n      <a-radio-button value=\"3\">{{ t('database') }}</a-radio-button>\r\n    </a-radio-group>\r\n    <div style=\"margin-top: 12px\">\r\n      <a-button type=\"primary\" @click=\"addManage\">\r\n        {{ addButtonText }}\r\n      </a-button>\r\n    </div>\r\n    <div class=\"list-content\">\r\n      <a-table :columns=\"columns\" :data-source=\"tableData\" :pagination=\"false\">\r\n        <template #headerCell=\"{ column }\">\r\n          <template v-if=\"column.key === 'name'\">\r\n            {{ typeName }}\r\n          </template>\r\n        </template>\r\n        <template #bodyCell=\"{ column, record }\">\r\n          <template v-if=\"column.key === 'name'\">\r\n            <div class=\"user-block\">{{ record.name }}</div>\r\n          </template>\r\n\r\n          <template v-if=\"column.key === 'role'\">\r\n            <a-popover\r\n              placement=\"bottomRight\"\r\n              :title=\"null\"\r\n              :overlayInnerStyle=\"{ padding: '2px' }\"\r\n            >\r\n              <template #content>\r\n                <div class=\"role-menu-box\">\r\n                  <div class=\"role-menu\" @click=\"handleChangeStatus(record, 4)\">\r\n                    <div class=\"menu-header\">\r\n                      <UserOutlined />\r\n                      <span class=\"title\">{{ t('manage') }}</span>\r\n                    </div>\r\n                    <div class=\"desc\">{{ t('manage_desc') }}</div>\r\n                    <div class=\"check-box\" v-if=\"record.operate_rights == 4\">\r\n                      <CheckOutlined />\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"role-menu\" @click=\"handleChangeStatus(record, 2)\">\r\n                    <div class=\"menu-header\">\r\n                      <EditOutlined />\r\n                      <span class=\"title\">{{ t('edit') }}</span>\r\n                    </div>\r\n                    <div class=\"desc\">{{ t('edit_desc') }}</div>\r\n                    <div class=\"check-box\" v-if=\"record.operate_rights == 2\">\r\n                      <CheckOutlined />\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"role-menu\" @click=\"handleChangeStatus(record, 1)\">\r\n                    <div class=\"menu-header\">\r\n                      <EyeOutlined />\r\n                      <span class=\"title\">{{ t('view') }}</span>\r\n                    </div>\r\n                    <div class=\"desc\">{{ t('view_desc') }}</div>\r\n                    <div class=\"check-box\" v-if=\"record.operate_rights == 1\">\r\n                      <CheckOutlined />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </template>\r\n              <div class=\"hover-btn-box\">\r\n                {{ t(roleText[record.operate_rights]) }}\r\n                <DownOutlined />\r\n              </div>\r\n            </a-popover>\r\n          </template>\r\n          <template v-if=\"column.key === 'action'\">\r\n            <a @click=\"handleDel(record)\">{{ t('delete') }}</a>\r\n          </template>\r\n        </template>\r\n      </a-table>\r\n    </div>\r\n  </div>\r\n  <!-- 新增弹出，选择数据 -->\r\n  <SeeModelAlert\r\n    ref=\"seeModelAlertRef\"\r\n    :robotList=\"robotList\"\r\n    :libraryList=\"libraryList\"\r\n    :formList=\"formList\"\r\n    @ok=\"getData\"\r\n  />\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, watch, createVNode, computed } from 'vue'\r\nimport {\r\n  PlusOutlined,\r\n  UserOutlined,\r\n  DownOutlined,\r\n  EditOutlined,\r\n  EyeOutlined,\r\n  CheckOutlined,\r\n  ExclamationCircleOutlined\r\n} from '@ant-design/icons-vue'\r\nimport SeeModelAlert from './see-model-alert.vue'\r\nimport { getRobotList } from '@/api/robot/index.js'\r\nimport { getLibraryList } from '@/api/library/index.js'\r\nimport { getFormList } from '@/api/database/index.js'\r\nimport {\r\n  getPermissionManageList,\r\n  savePermissionManage,\r\n  deletePermissionManage\r\n} from '@/api/department/index.js'\r\nimport { message, Modal } from 'ant-design-vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.user.manage.components.knowledge-permissions')\r\n\r\nconst object_type = ref('2')\r\nconst tableData = ref([])\r\n\r\n// 动态类型名称\r\nconst typeName = computed(() => {\r\n  const typeMap = {\r\n    '2': 'knowledge_base',\r\n    '1': 'robot',\r\n    '3': 'database'\r\n  }\r\n  return t(typeMap[object_type.value] || 'knowledge_base')\r\n})\r\n\r\nconst addButtonText = computed(() => {\r\n  const addMap = {\r\n    '2': 'add_knowledge_base_permission',\r\n    '1': 'add_robot_permission',\r\n    '3': 'add_database_permission'\r\n  }\r\n  return t(addMap[object_type.value] || 'add_knowledge_base_permission')\r\n})\r\n\r\nconst roleText = computed(() => {\r\n  const roleMap = {\r\n    '4': 'manage',\r\n    '2': 'edit',\r\n    '1': 'view'\r\n  }\r\n  return roleMap\r\n})\r\n\r\nconst roleDesc = computed(() => {\r\n  const descMap = {\r\n    '4': 'manage_desc',\r\n    '2': 'edit_desc',\r\n    '1': 'view_desc'\r\n  }\r\n  return descMap\r\n})\r\n\r\nconst props = defineProps({\r\n  treeParmas: {\r\n    type: Object,\r\n    default: () => {\r\n      return {}\r\n    }\r\n  }\r\n})\r\n\r\nwatch(\r\n  () => props.treeParmas,\r\n  (value) => {\r\n    getData()\r\n  },\r\n  {\r\n    deep: true\r\n  }\r\n)\r\n\r\nconst getData = () => {\r\n  getPermissionManageList({\r\n    object_type: object_type.value,\r\n    identity_type: props.treeParmas.is_user ? 1 : 2,\r\n    identity_id: props.treeParmas.id\r\n  }).then((res) => {\r\n    let data = res.data || []\r\n    tableData.value = data\r\n  })\r\n}\r\n\r\ngetData()\r\n\r\nconst handleChange = () => {\r\n  getData()\r\n}\r\n\r\nconst handleChangeStatus = (record, operate_rights) => {\r\n  const roleKey = roleText[operate_rights]\r\n  const roleName = t(roleKey)\r\n  Modal.confirm({\r\n    title: t('prompt'),\r\n    icon: createVNode(ExclamationCircleOutlined),\r\n    content: t('confirm_modify_permission', { role: roleName }),\r\n    okText: t('confirm'),\r\n    cancelText: t('cancel'),\r\n    onOk: () => {\r\n      let data = [\r\n        {\r\n          object_id: +record.object_id,\r\n          object_type: +record.object_type,\r\n          operate_rights: +operate_rights\r\n        }\r\n      ]\r\n\r\n      savePermissionManage({\r\n        identity_ids: record.identity_id,\r\n        identity_type: 2,\r\n        object_array: JSON.stringify(data)\r\n      }).then((res) => {\r\n        message.success(t('modify_success'))\r\n        getData()\r\n      })\r\n    },\r\n    onCancel() {}\r\n  })\r\n}\r\n\r\nconst handleDel = (record) => {\r\n  Modal.confirm({\r\n    title: t('prompt'),\r\n    icon: createVNode(ExclamationCircleOutlined),\r\n    content: t('confirm_delete_data'),\r\n    okText: t('confirm'),\r\n    okType: 'danger',\r\n    cancelText: t('cancel'),\r\n    onOk: () => {\r\n      deletePermissionManage({\r\n        identity_id: record.identity_id,\r\n        identity_type: 2,\r\n        object_id: record.object_id,\r\n        object_type: record.object_type\r\n      }).then((res) => {\r\n        message.success(t('delete_success'))\r\n        getData()\r\n      })\r\n    },\r\n    onCancel() {}\r\n  })\r\n}\r\n\r\nconst robotList = ref([])\r\nconst libraryList = ref([])\r\nconst formList = ref([])\r\n\r\n// 获取机器人列表\r\nconst getList = async () => {\r\n  await getRobotList()\r\n    .then((res) => {\r\n      robotList.value = res.data\r\n    })\r\n    .catch(() => {})\r\n}\r\n\r\n// 获取知识库列表\r\nconst getLibrary = async () => {\r\n  await getLibraryList({ type: '' })\r\n    .then((res) => {\r\n      libraryList.value = res.data\r\n    })\r\n    .catch(() => {})\r\n}\r\n\r\n// 获取数据库列表\r\nconst getForm = async () => {\r\n  await getFormList()\r\n    .then((res) => {\r\n      formList.value = res.data\r\n    })\r\n    .catch(() => {})\r\n}\r\nconst seeModelAlertRef = ref(null)\r\nconst addManage = async () => {\r\n  if (!props.treeParmas.id) {\r\n    return message.error(t('select_department_first'))\r\n  }\r\n  let key = object_type.value\r\n  if (key == 1) {\r\n    await getList()\r\n  } else if (key == 2) {\r\n    await getLibrary()\r\n  } else if (key == 3) {\r\n    await getForm()\r\n  }\r\n\r\n  seeModelAlertRef.value.handleDepartmentOpen(key, props.treeParmas, tableData.value)\r\n}\r\n\r\nconst columns = computed(() => [\r\n  {\r\n    dataIndex: 'name',\r\n    key: 'name'\r\n  },\r\n  {\r\n    title: t('permission'),\r\n    dataIndex: 'role',\r\n    key: 'role'\r\n  },\r\n  {\r\n    title: t('action'),\r\n    dataIndex: 'action',\r\n    key: 'action',\r\n    width: 80\r\n  }\r\n])\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.list-content {\r\n  margin-top: 16px;\r\n}\r\n\r\n.user-block {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  .name-box {\r\n    flex: 1;\r\n    color: #595959;\r\n    line-height: 22px;\r\n    font-size: 14px;\r\n  }\r\n  .remark-text {\r\n    margin-top: 2px;\r\n    font-size: 12px;\r\n    color: #8c8c8c;\r\n    line-height: 20px;\r\n  }\r\n}\r\n\r\n.hover-btn-box {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n  width: fit-content;\r\n  height: 24px;\r\n  font-size: 14px;\r\n  padding: 0 8px;\r\n  border-radius: 6px;\r\n  color: #595959;\r\n  cursor: pointer;\r\n  transition: all 0.2s cubic-bezier(0.645, 0.045, 0.355, 1);\r\n  &:hover {\r\n    background: #e4e6eb;\r\n  }\r\n}\r\n\r\n.role-menu-box {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 2px;\r\n  .role-menu {\r\n    padding: 5px 16px;\r\n    border-radius: 6px;\r\n    color: #262626;\r\n    cursor: pointer;\r\n    position: relative;\r\n    &.active {\r\n      color: #2475fc;\r\n    }\r\n    &:hover {\r\n      background: #f2f4f7;\r\n    }\r\n    .check-box {\r\n      position: absolute;\r\n      top: 16px;\r\n      right: 16px;\r\n      color: #2475fc;\r\n    }\r\n    .menu-header {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 8px;\r\n    }\r\n    .desc {\r\n      color: #8c8c8c;\r\n      margin-top: 4px;\r\n      line-height: 22px;\r\n      padding-left: 24px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div>\r\n    <a-modal\r\n      v-model:open=\"open\"\r\n      :title=\"t('batch_edit_department')\"\r\n      @ok=\"handleOk\"\r\n      :confirmLoading=\"saveLoading\"\r\n    >\r\n      <a-form layout=\"vertical\" style=\"margin-top: 24px;\">\r\n        <a-form-item :label=\"t('select_department')\" v-bind=\"validateInfos.department_ids\">\r\n          <a-tree-select\r\n            v-model:value=\"formState.department_ids\"\r\n            show-search\r\n            style=\"width: 100%\"\r\n            :dropdown-style=\"{ maxHeight: '400px', overflow: 'auto' }\"\r\n            :placeholder=\"t('please_select')\"\r\n            allow-clear\r\n            multiple\r\n            tree-default-expand-all\r\n            :tree-data=\"gData\"\r\n            tree-node-filter-prop=\"label\"\r\n          >\r\n            <template #title=\"{ value: val, label }\">\r\n              <div>{{ label }}</div>\r\n            </template>\r\n          </a-tree-select>\r\n        </a-form-item>\r\n      </a-form>\r\n    </a-modal>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive } from 'vue'\r\nimport { Form, message } from 'ant-design-vue'\r\nimport { getDepartmentList, batchUpdateUserDepartment } from '@/api/department/index.js'\r\nimport { formateDepartmentCascaderData } from '@/utils/index.js'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.user.manage.components.batch-edit-department')\r\n\r\nconst open = ref(false)\r\nconst emit = defineEmits(['ok'])\r\n\r\nconst useForm = Form.useForm\r\nconst formState = reactive({\r\n  user_ids: '',\r\n  department_ids: []\r\n})\r\n\r\nconst formRules = reactive({\r\n  department_ids: [\r\n    {\r\n      message: t('please_select_department'),\r\n      required: true\r\n    }\r\n  ]\r\n})\r\n\r\nconst { resetFields, validate, validateInfos } = useForm(formState, formRules)\r\n\r\nconst show = (ids) => {\r\n  formState.user_ids = ids\r\n  formState.department_ids = []\r\n  open.value = true\r\n  getLists()\r\n}\r\n\r\nconst gData = ref([])\r\nconst getLists = () => {\r\n  getDepartmentList({}).then((res) => {\r\n    let treeData = res.data || []\r\n    gData.value = formateDepartmentCascaderData(treeData)\r\n  })\r\n}\r\n\r\nconst saveLoading = ref(false)\r\nconst handleOk = () => {\r\n  validate().then(() => {\r\n    let formData = {\r\n      ...formState\r\n    }\r\n\r\n    formData.department_ids = formState.department_ids.join(',')\r\n    saveLoading.value = true\r\n    batchUpdateUserDepartment(formData)\r\n      .then((res) => {\r\n        message.success(t('batch_edit_department_success'))\r\n        open.value = false\r\n        emit('ok')\r\n      })\r\n      .finally(() => {\r\n        saveLoading.value = false\r\n      })\r\n  })\r\n}\r\n\r\ndefineExpose({\r\n  show\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>","<template>\r\n  <div class=\"flex-content-box\">\r\n    <div class=\"left-department-box\">\r\n      <cu-scroll style=\"padding-right: 24px\">\r\n        <DepartmentTree ref=\"departmentTreeRef\" @select=\"handleSelect\" @refresh=\"getData\" />\r\n      </cu-scroll>\r\n    </div>\r\n    <div class=\"team-members-pages\">\r\n      <cu-scroll style=\"padding-right: 24px\">\r\n        <div class=\"main-tabs-block\">\r\n          <a-segmented v-model:value=\"tabs\" :options=\"tabOption\" @change=\"handleTabsChange\">\r\n            <template #label=\"{ payload }\">\r\n              {{ payload.title }}\r\n            </template>\r\n          </a-segmented>\r\n        </div>\r\n        <template v-if=\"tabs == 1\">\r\n          <a-flex justify=\"space-between\">\r\n            <a-flex :gap=\"8\">\r\n              <a-button type=\"primary\" @click=\"handleAdd\">\r\n                <template #icon>\r\n                  <PlusOutlined />\r\n                </template>\r\n                {{ t('add_team_member') }}\r\n              </a-button>\r\n              <a-dropdown v-if=\"false\">\r\n                <a-button>{{ t('batch_modify_permissions') }}</a-button>\r\n                <template #overlay>\r\n                  <a-menu>\r\n                    <a-menu-item @click=\"handleBatchAdd(1)\"> {{ t('modify_robot') }} </a-menu-item>\r\n                    <a-menu-item @click=\"handleBatchAdd(2)\"> {{ t('modify_knowledge_base') }} </a-menu-item>\r\n                    <a-menu-item @click=\"handleBatchAdd(3)\"> {{ t('modify_database') }} </a-menu-item>\r\n                  </a-menu>\r\n                </template>\r\n              </a-dropdown>\r\n\r\n              <a-button @click=\"handleBatchDepart\">{{ t('batch_modify_department') }}</a-button>\r\n            </a-flex>\r\n\r\n            <a-input-search\r\n              v-model:value=\"requestParams.search\"\r\n              :placeholder=\"t('search_placeholder')\"\r\n              style=\"width: 288px\"\r\n              @search=\"onSearch\"\r\n            />\r\n          </a-flex>\r\n          <div class=\"list-box\">\r\n            <a-table\r\n              :data-source=\"tableData\"\r\n              :scroll=\"{ x: 1100 }\"\r\n              :loading=\"loading\"\r\n              row-key=\"id\"\r\n              :row-selection=\"{\r\n                selectedRowKeys: state.selectedRowKeys,\r\n                onChange: onSelectChange,\r\n                getCheckboxProps: getCheckboxProps\r\n              }\"\r\n              :pagination=\"{\r\n                current: requestParams.page,\r\n                total: requestParams.total,\r\n                pageSize: requestParams.size,\r\n                showQuickJumper: true,\r\n                showSizeChanger: true,\r\n                pageSizeOptions: ['10', '20', '50', '100']\r\n              }\"\r\n              @change=\"onTableChange\"\r\n            >\r\n              <a-table-column :title=\"t('member_name')\" data-index=\"user_name\" width=\"190px\">\r\n                <template #default=\"{ record }\">\r\n                  <div class=\"user-box\">\r\n                    <img :src=\"record.avatar || defaultAvatar\" alt=\"\" />\r\n                    <div class=\"name-info\">\r\n                      <div class=\"user-name\">\r\n                        <a-tooltip\r\n                          :title=\"record.user_name\"\r\n                          v-if=\"record.user_name && record.user_name.length > 7\"\r\n                        >\r\n                          {{ record.user_name }}\r\n                        </a-tooltip>\r\n                        <template v-else>{{ record.user_name }}</template>\r\n                      </div>\r\n                      <div class=\"nick-name\">\r\n                        <a-tooltip\r\n                          :title=\"record.nick_name\"\r\n                          v-if=\"record.nick_name && record.nick_name.length > 7\"\r\n                        >\r\n                          {{ record.nick_name }}\r\n                        </a-tooltip>\r\n                        <template v-else>{{ record.nick_name }}</template>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </template>\r\n              </a-table-column>\r\n              <a-table-column :title=\"t('role')\" data-index=\"role_name\" width=\"100px\">\r\n                <template #default=\"{ record }\">{{ record.role_name }}</template>\r\n              </a-table-column>\r\n\r\n              <a-table-column data-index=\"departments\" width=\"200px\">\r\n                <template #title> {{ t('department') }} </template>\r\n                <template #default=\"{ record }\">\r\n                  <div\r\n                    v-if=\"record.departments && record.departments.length == 0\"\r\n                    class=\"list-content\"\r\n                  >\r\n                    --\r\n                  </div>\r\n                  <div v-else class=\"list-preview list-content\">\r\n                    <a-tooltip>\r\n                      <template #title\r\n                        ><div style=\"display: inline\">\r\n                          {{ formatText(record.departments) }}\r\n                        </div></template\r\n                      >\r\n                      <div class=\"list-item-box\">\r\n                        <div class=\"list-item\">{{ formatText(record.departments) }}</div>\r\n                      </div>\r\n                    </a-tooltip>\r\n                  </div>\r\n                </template>\r\n              </a-table-column>\r\n\r\n              <a-table-column v-if=\"false\" data-index=\"managed_robot_list\" width=\"200px\">\r\n                <template #title>\r\n                  {{ t('managed_robots') }}\r\n                  <a-tooltip>\r\n                    <template #title\r\n                      >{{ t('managed_robots_tooltip') }}</template\r\n                    >\r\n                    <QuestionCircleOutlined />\r\n                  </a-tooltip>\r\n                </template>\r\n                <template #default=\"{ record }\">\r\n                  <div v-if=\"record.role_type == 1\" class=\"list-content\">\r\n                    <div>{{ t('all') }}</div>\r\n                  </div>\r\n                  <div v-else-if=\"!record.managed_robot_list\" class=\"list-content\">\r\n                    <div class=\"list-highlight\" @click=\"addManage(1, record)\">{{ t('add') }}</div>\r\n                  </div>\r\n                  <div v-else class=\"list-preview list-content\">\r\n                    <a-tooltip>\r\n                      <template #title\r\n                        ><div style=\"display: inline\">\r\n                          {{ formatText(record.managed_robot_list) }}\r\n                        </div></template\r\n                      >\r\n                      <div class=\"list-item-box\">\r\n                        <div class=\"list-item\">{{ formatText(record.managed_robot_list) }}</div>\r\n                      </div>\r\n                    </a-tooltip>\r\n                    <div class=\"list-highlight edit\" @click=\"editManage(1, record)\">\r\n                      <svg-icon name=\"edit\"></svg-icon>\r\n                    </div>\r\n                  </div>\r\n                </template>\r\n              </a-table-column>\r\n              <a-table-column v-if=\"false\" data-index=\"managed_library_list\" width=\"200px\">\r\n                <template #title>\r\n                  {{ t('managed_knowledge_bases') }}\r\n                  <a-tooltip>\r\n                    <template #title\r\n                      >{{ t('managed_knowledge_bases_tooltip') }}</template\r\n                    >\r\n                    <QuestionCircleOutlined />\r\n                  </a-tooltip>\r\n                </template>\r\n                <template #default=\"{ record }\">\r\n                  <div v-if=\"record.role_type == 1\" class=\"list-content\">\r\n                    <div>{{ t('all') }}</div>\r\n                  </div>\r\n                  <div v-else-if=\"!record.managed_library_list\" class=\"list-content\">\r\n                    <div class=\"list-highlight\" @click=\"addManage(2, record)\">{{ t('add') }}</div>\r\n                  </div>\r\n                  <div v-else class=\"list-preview list-content\">\r\n                    <a-tooltip>\r\n                      <template #title\r\n                        ><div style=\"display: inline\">\r\n                          {{ formatText(record.managed_library_list) }}\r\n                        </div></template\r\n                      >\r\n                      <div class=\"list-item-box\">\r\n                        <div class=\"list-item\">{{ formatText(record.managed_library_list) }}</div>\r\n                      </div>\r\n                    </a-tooltip>\r\n                    <div class=\"list-highlight edit\" @click=\"editManage(2, record)\">\r\n                      <svg-icon name=\"edit\"></svg-icon>\r\n                    </div>\r\n                  </div>\r\n                </template>\r\n              </a-table-column>\r\n              <a-table-column v-if=\"false\" data-index=\"managed_form_list\" width=\"200px\">\r\n                <template #title>\r\n                  {{ t('managed_databases') }}\r\n                  <a-tooltip>\r\n                    <template #title\r\n                      >{{ t('managed_databases_tooltip') }}</template\r\n                    >\r\n                    <QuestionCircleOutlined />\r\n                  </a-tooltip>\r\n                </template>\r\n                <template #default=\"{ record }\">\r\n                  <div v-if=\"record.role_type == 1\" class=\"list-content\">\r\n                    <div>{{ t('all') }}</div>\r\n                  </div>\r\n                  <div v-else-if=\"!record.managed_form_list\" class=\"list-content\">\r\n                    <div class=\"list-highlight\" @click=\"addManage(3, record)\">{{ t('add') }}</div>\r\n                  </div>\r\n                  <div v-else class=\"list-preview list-content\">\r\n                    <a-tooltip>\r\n                      <template #title\r\n                        ><div style=\"display: inline\">\r\n                          {{ formatText(record.managed_form_list) }}\r\n                        </div></template\r\n                      >\r\n                      <div class=\"list-item-box\">\r\n                        <div class=\"list-item\">{{ formatText(record.managed_form_list) }}</div>\r\n                      </div>\r\n                    </a-tooltip>\r\n                    <div class=\"list-highlight edit\" @click=\"editManage(3, record)\">\r\n                      <svg-icon name=\"edit\"></svg-icon>\r\n                    </div>\r\n                  </div>\r\n                </template>\r\n              </a-table-column>\r\n\r\n              <a-table-column :title=\"t('status')\" data-index=\"expire_status\" width=\"120px\">\r\n                <template #default=\"{ record }\">\r\n                  <div class=\"status-block green\" v-if=\"record.expire_status == 1\">\r\n                    <CheckCircleFilled />{{ t('active') }}\r\n                  </div>\r\n                  <div class=\"status-block yellow\" v-if=\"record.expire_status == 0\">\r\n                    <ExclamationCircleFilled />{{ t('expired') }}\r\n                  </div>\r\n                </template>\r\n              </a-table-column>\r\n              <a-table-column :title=\"t('expiry_time')\" data-index=\"expire_time_desc\" width=\"130px\">\r\n                <template #default=\"{ record }\">{{ record.expire_time_desc }}</template>\r\n              </a-table-column>\r\n\r\n              <a-table-column :title=\"t('login')\" data-index=\"login_switch\" width=\"90px\" fixed=\"right\">\r\n                <template #default=\"{ record }\">\r\n                  <a-switch\r\n                    @change=\"handleSwichLogin(record)\"\r\n                    :checked=\"record.login_switch == '1'\"\r\n                    :disabled=\"record.role_type == '1'\"\r\n                    :checked-children=\"t('on')\"\r\n                    :un-checked-children=\"t('off')\"\r\n                  />\r\n                </template>\r\n              </a-table-column>\r\n\r\n              <a-table-column :title=\"t('actions')\" data-index=\"action\" width=\"240px\" fixed=\"right\">\r\n                <template #default=\"{ record }\">\r\n                  <a-flex :gap=\"16\" v-if=\"record.role_type == '1'\">\r\n                    <span class=\"disabled\">{{ t('edit') }}</span>\r\n                    <span class=\"disabled\">{{ t('reset_password') }}</span>\r\n                    <span class=\"disabled\">{{ t('delete') }}</span>\r\n                  </a-flex>\r\n                  <a-flex :gap=\"16\" v-else>\r\n                    <a @click=\"handleEdit(record)\">{{ t('edit') }}</a>\r\n                    <a @click=\"handleReSetPassword(record)\">{{ t('reset_password') }}</a>\r\n                    <a @click=\"handleDelete(record)\">{{ t('delete') }}</a>\r\n                  </a-flex>\r\n                </template>\r\n              </a-table-column>\r\n            </a-table>\r\n          </div>\r\n        </template>\r\n        <template v-else>\r\n          <KnowledgePermissions :treeParmas=\"treeParmas\" />\r\n        </template>\r\n      </cu-scroll>\r\n\r\n      <AddTeamMembers ref=\"addTeamMembersRef\" @ok=\"refreshTreeAndData\"></AddTeamMembers>\r\n      <ResetPassword ref=\"resetPasswordRef\" @ok=\"getData\"></ResetPassword>\r\n\r\n      <!-- 新增弹出，选择数据 -->\r\n      <SeeModelAlert\r\n        ref=\"seeModelAlertRef\"\r\n        :robotList=\"robotList\"\r\n        :libraryList=\"libraryList\"\r\n        :formList=\"formList\"\r\n        @ok=\"getData\"\r\n      />\r\n      <BatchEditDepartment ref=\"batchEditDepartmentRef\" @ok=\"refreshTreeAndData\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n<script setup>\r\nimport { getRobotList } from '@/api/robot/index.js'\r\nimport { getLibraryList } from '@/api/library/index.js'\r\nimport { getFormList } from '@/api/database/index.js'\r\nimport { ref, reactive, createVNode, computed } from 'vue'\r\nimport {\r\n  PlusOutlined,\r\n  ExclamationCircleOutlined,\r\n  QuestionCircleOutlined,\r\n  CheckCircleFilled,\r\n  ExclamationCircleFilled\r\n} from '@ant-design/icons-vue'\r\nimport { Modal, message } from 'ant-design-vue'\r\nimport AddTeamMembers from './components/add-team-members.vue'\r\nimport ResetPassword from './components/reset-password.vue'\r\nimport SeeModelAlert from './components/see-model-alert.vue'\r\nimport { getUserList, delUser, loginSwitch } from '@/api/manage/index.js'\r\nimport dayjs from 'dayjs'\r\nimport defaultAvatar from '@/assets/img/role_avatar.png'\r\nimport DepartmentTree from './components/department-tree.vue'\r\nimport KnowledgePermissions from './components/knowledge-permissions.vue'\r\nimport BatchEditDepartment from './components/batch-edit-department.vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.user.manage.team-members')\r\n\r\nconst tabs = ref(1)\r\n\r\nconst tabOption = computed(() => [\r\n  {\r\n    value: 1,\r\n    payload: {\r\n      title: t('team_members')\r\n    }\r\n  },\r\n  // {\r\n  //   value: 2,\r\n  //   payload: {\r\n  //     title: t('knowledge_base_permissions')\r\n  //   }\r\n  // }\r\n])\r\n\r\nconst requestParams = reactive({\r\n  page: 1,\r\n  size: 10,\r\n  total: 0,\r\n  search: ''\r\n})\r\nconst robotList = ref([])\r\nconst libraryList = ref([])\r\nconst formList = ref([])\r\n// 查看模型\r\nconst seeModelAlertRef = ref(null)\r\n\r\nconst onTableChange = (pagination) => {\r\n  requestParams.page = pagination.current\r\n  requestParams.size = pagination.pageSize\r\n  getData()\r\n}\r\n\r\n// let treeParmas = {}\r\nconst treeParmas = reactive({\r\n  id: ''\r\n})\r\nconst handleSelect = (data) => {\r\n  Object.assign(treeParmas, { ...data })\r\n  if (tabs.value == 1) {\r\n    onSearch()\r\n  }\r\n}\r\n\r\nconst onSearch = () => {\r\n  requestParams.page = 1\r\n  getData()\r\n}\r\nconst tableData = ref([])\r\n\r\nconst formatText = (arr) => {\r\n  let newArr = []\r\n  arr.map((item) => {\r\n    newArr.push(item.name || item.department_name)\r\n  })\r\n  return newArr.join(', ')\r\n}\r\nconst loading = ref(false)\r\nconst getData = () => {\r\n  // 获取用户列表\r\n  let parmas = {\r\n    page: requestParams.page,\r\n    size: requestParams.size,\r\n    search: requestParams.search\r\n  }\r\n  if (treeParmas.id && treeParmas.is_default != 1) {\r\n    parmas.department_id = treeParmas.id\r\n  }\r\n  loading.value = true\r\n  getUserList(parmas)\r\n    .then((res) => {\r\n      let lists = res.data.list\r\n      lists.forEach((item) => {\r\n        item.create_time = dayjs(item.create_time * 1000).format('YYYY-MM-DD HH:mm')\r\n\r\n        item.expire_time_desc =\r\n          item.expire_time == '0'\r\n            ? t('permanent')\r\n            : dayjs(item.expire_time * 1000).format('YYYY-MM-DD HH:mm')\r\n\r\n        item.expire_status = 0\r\n        if (item.expire_time == '0' || dayjs().unix() < item.expire_time) {\r\n          item.expire_status = 1\r\n        }\r\n\r\n        item.managed_robot_list = item.managed_robot_list ? JSON.parse(item.managed_robot_list) : []\r\n        item.managed_library_list = item.managed_library_list\r\n          ? JSON.parse(item.managed_library_list)\r\n          : []\r\n        item.managed_form_list = item.managed_form_list ? JSON.parse(item.managed_form_list) : []\r\n\r\n        item.departments = item.departments ? JSON.parse(item.departments) : []\r\n      })\r\n      tableData.value = lists\r\n      state.selectedRowKeys = []\r\n      requestParams.total = +res.data.total\r\n    })\r\n    .finally(() => {\r\n      loading.value = false\r\n    })\r\n}\r\n// onSearch()\r\n\r\nconst handleTabsChange = () => {\r\n  if (tabs.value == 1) {\r\n    onSearch()\r\n  }\r\n}\r\n\r\nconst departmentTreeRef = ref(null)\r\nconst refreshTreeAndData = () => {\r\n  getData()\r\n  departmentTreeRef.value.getLists()\r\n}\r\n\r\nconst state = reactive({\r\n  selectedRowKeys: []\r\n})\r\n\r\nconst onSelectChange = (selectedRowKeys) => {\r\n  state.selectedRowKeys = selectedRowKeys\r\n}\r\n\r\nconst getCheckboxProps = (record) => {\r\n  return {\r\n    disabled: record.role_type == 1\r\n  }\r\n}\r\n\r\nconst handleSwichLogin = (record) => {\r\n  loginSwitch({\r\n    user_id: record.id\r\n  }).then((res) => {\r\n    message.success(record.login_switch == 1 ? t('login_disabled_success') : t('login_enabled_success'))\r\n    getData()\r\n  })\r\n}\r\n\r\nconst addTeamMembersRef = ref(null)\r\nconst handleAdd = () => {\r\n  // 添加用户\r\n  addTeamMembersRef.value.add(treeParmas.id)\r\n}\r\nconst handleEdit = (record) => {\r\n  // 编辑用户\r\n  addTeamMembersRef.value.edit(record)\r\n}\r\nconst resetPasswordRef = ref(null)\r\nconst handleReSetPassword = (record) => {\r\n  // 重置密码\r\n  resetPasswordRef.value.open(record)\r\n}\r\nconst handleDelete = (record) => {\r\n  // 删除用户\r\n  Modal.confirm({\r\n    title: t('confirm_delete_title'),\r\n    icon: createVNode(ExclamationCircleOutlined),\r\n    content: t('confirm_delete_content'),\r\n    okText: t('confirm'),\r\n    okType: 'danger',\r\n    cancelText: t('cancel'),\r\n    onOk: () => {\r\n      delUser({ id: record.id }).then((res) => {\r\n        message.success(t('delete_success'))\r\n        getData()\r\n      })\r\n    },\r\n    onCancel() {}\r\n  })\r\n}\r\n\r\n// 获取机器人列表\r\nconst getList = async () => {\r\n  await getRobotList()\r\n    .then((res) => {\r\n      robotList.value = res.data\r\n    })\r\n    .catch(() => {})\r\n}\r\n\r\n// 获取知识库列表\r\nconst getLibrary = async () => {\r\n  await getLibraryList({ type: '' })\r\n    .then((res) => {\r\n      libraryList.value = res.data\r\n    })\r\n    .catch(() => {})\r\n}\r\n\r\n// 获取数据库列表\r\nconst getForm = async () => {\r\n  await getFormList()\r\n    .then((res) => {\r\n      formList.value = res.data\r\n    })\r\n    .catch(() => {})\r\n}\r\n\r\nconst handleBatchAdd = async (key) => {\r\n  let selectList = []\r\n  state.selectedRowKeys.forEach((item) => {\r\n    let findItem = tableData.value.filter((it) => it.id == item)[0]\r\n    if (findItem.role_type == 1) {\r\n      // 管理员\r\n    } else {\r\n      selectList.push(item)\r\n    }\r\n  })\r\n  state.selectedRowKeys = selectList\r\n  if (state.selectedRowKeys.length == 0) {\r\n    return message.error(t('please_select_members'))\r\n  }\r\n  if (key == 1) {\r\n    await getList()\r\n  } else if (key == 2) {\r\n    await getLibrary()\r\n  } else if (key == 3) {\r\n    await getForm()\r\n  }\r\n  seeModelAlertRef.value.handleBatchOpen(key, state.selectedRowKeys.join(','))\r\n}\r\n\r\nconst batchEditDepartmentRef = ref(null)\r\nconst handleBatchDepart = () => {\r\n  if (state.selectedRowKeys.length == 0) {\r\n    return message.error(t('please_select_members'))\r\n  }\r\n  batchEditDepartmentRef.value.show(state.selectedRowKeys.join(','))\r\n}\r\n\r\nconst addManage = async (key, record) => {\r\n  if (key == 1) {\r\n    await getList()\r\n  } else if (key == 2) {\r\n    await getLibrary()\r\n  } else if (key == 3) {\r\n    await getForm()\r\n  }\r\n  seeModelAlertRef.value.open(key, 'add', record)\r\n}\r\n\r\nconst editManage = async (key, record) => {\r\n  if (key == 1) {\r\n    await getList()\r\n  } else if (key == 2) {\r\n    await getLibrary()\r\n  } else if (key == 3) {\r\n    await getForm()\r\n  }\r\n  seeModelAlertRef.value.open(key, 'edit', record)\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.flex-content-box {\r\n  display: flex;\r\n  height: 100%;\r\n  overflow: hidden;\r\n}\r\n.left-department-box {\r\n  width: 280px;\r\n  height: 100%;\r\n  overflow: hidden;\r\n  padding: 24px;\r\n  padding-right: 0;\r\n  border-right: 1px solid var(--07, #f0f0f0);\r\n}\r\n.main-tabs-block {\r\n  margin-bottom: 16px;\r\n  ::v-deep(.ant-segmented .ant-segmented-item-selected) {\r\n    color: #2475fc;\r\n  }\r\n  ::v-deep(.ant-segmented .ant-segmented-item-label) {\r\n    padding: 0 16px;\r\n  }\r\n}\r\n.team-members-pages {\r\n  background: #fff;\r\n  padding: 24px;\r\n  padding-right: 0;\r\n  padding-bottom: 0;\r\n  flex: 1;\r\n  height: 100%;\r\n  overflow: hidden;\r\n  .list-box {\r\n    background: #fff;\r\n    margin-top: 8px;\r\n\r\n    .list-item-box {\r\n      max-width: 200px;\r\n      display: -webkit-box;\r\n      -webkit-line-clamp: 2;\r\n      -webkit-box-orient: vertical;\r\n      overflow: hidden;\r\n      text-overflow: ellipsis;\r\n    }\r\n\r\n    .list-preview {\r\n      .list-item {\r\n        display: inline;\r\n      }\r\n    }\r\n\r\n    .list-content {\r\n      padding-right: 15px;\r\n      position: relative;\r\n\r\n      .list-highlight {\r\n        color: #1677ff;\r\n        cursor: pointer;\r\n\r\n        &:hover {\r\n          opacity: 0.7;\r\n        }\r\n      }\r\n\r\n      .edit {\r\n        display: none;\r\n        position: absolute;\r\n        right: 0;\r\n        top: 50%;\r\n        margin-top: -10px;\r\n      }\r\n\r\n      &:hover .edit {\r\n        display: block;\r\n      }\r\n    }\r\n\r\n    .user-box {\r\n      display: flex;\r\n      img {\r\n        width: 40px;\r\n        height: 40px;\r\n        border-radius: 8px;\r\n        margin-right: 8px;\r\n      }\r\n      .name-info {\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: space-between;\r\n        font-size: 14px;\r\n        line-height: 22px;\r\n        font-weight: 400;\r\n        overflow: hidden;\r\n        .user-name {\r\n          color: #595959;\r\n          text-overflow: ellipsis;\r\n          overflow: hidden;\r\n          white-space: nowrap;\r\n        }\r\n        .nick-name {\r\n          color: #8c8c8c;\r\n          text-overflow: ellipsis;\r\n          overflow: hidden;\r\n          white-space: nowrap;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n.status-block {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 2px;\r\n  border-radius: 6px;\r\n  padding: 0 6px;\r\n  font-weight: 500;\r\n  width: fit-content;\r\n  &.green {\r\n    background: #cafce4;\r\n    color: #21a665;\r\n  }\r\n  &.yellow {\r\n    background: #fae4dc;\r\n    color: #ed744a;\r\n  }\r\n}\r\n.disabled {\r\n  color: rgba(0, 0, 0, 0.25);\r\n}\r\n</style>\r\n","<template>\r\n  <div>\r\n    <a-modal v-model:open=\"show\" :title=\"modalTitle\" @ok=\"handleOk\" width=\"746px\">\r\n      <div class=\"form-box\">\r\n        <a-form layout=\"vertical\">\r\n          <a-form-item :label=\"t('role_name_label')\" v-bind=\"validateInfos.name\">\r\n            <a-input\r\n              type=\"text\"\r\n              :maxlength=\"100\"\r\n              :disabled=\"formState.role_type > 0\"\r\n              :placeholder=\"t('role_name_placeholder')\"\r\n              v-model:value=\"formState.name\"\r\n            ></a-input>\r\n          </a-form-item>\r\n          <a-form-item :label=\"t('role_mark_label')\">\r\n            <a-textarea v-model:value=\"formState.mark\" :placeholder=\"t('role_mark_placeholder')\" />\r\n          </a-form-item>\r\n          <a-form-item :label=\"t('role_permission_label')\">\r\n            <div class=\"role-check-box\" v-for=\"item in menuOptions\" :key=\"item.uni_key\">\r\n              <a-flex class=\"title-boock\" justify=\"space-between\">\r\n                <div class=\"title-row\">{{ item.name }}</div>\r\n                <div class=\"check-num\">\r\n                  {{ robotChecked[item.uni_key].length }}/{{ getChildrenTotal(item.children) }}\r\n                </div>\r\n              </a-flex>\r\n              <a-checkbox-group v-model:value=\"robotChecked[item.uni_key]\" style=\"width: 100%\">\r\n                <a-row :gutter=\"[0, 12]\">\r\n                  <a-col\r\n                    :span=\"sub.children && sub.children.length ? 12 : 6\"\r\n                    v-for=\"sub in item.children\"\r\n                    :key=\"sub.uni_key\"\r\n                  >\r\n                    <a-checkbox\r\n                      @change=\"handleSubChaneg(sub, item.uni_key)\"\r\n                      :disabled=\"formState.role_type > 0\"\r\n                      :value=\"sub.uni_key\"\r\n                      >{{ sub.name }}</a-checkbox\r\n                    >\r\n                    <span v-if=\"sub.children && sub.children.length > 0\"\r\n                      >(\r\n                      <a-checkbox\r\n                        @change=\"handleSonChange(son, sub, item.uni_key)\"\r\n                        v-for=\"son in sub.children\"\r\n                        :key=\"son.uni_key\"\r\n                        :disabled=\"formState.role_type > 0\"\r\n                        :value=\"son.uni_key\"\r\n                        >{{ son.name }}</a-checkbox\r\n                      >\r\n                      )</span\r\n                    >\r\n                  </a-col>\r\n                </a-row>\r\n              </a-checkbox-group>\r\n            </div>\r\n          </a-form-item>\r\n        </a-form>\r\n      </div>\r\n    </a-modal>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, onMounted, nextTick } from 'vue'\r\nimport { Form, message } from 'ant-design-vue'\r\nimport { getRole, getMenu, saveRole } from '@/api/manage/index.js'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.user.manage.components.add-role')\r\n\r\nconst emit = defineEmits(['ok'])\r\nconst useForm = Form.useForm\r\n\r\nconst menuOptions = ref([])\r\nconst robotChecked = ref({})\r\nconst show = ref(false)\r\nconst modalTitle = ref(t('add_role_title'))\r\nconst id = ref('')\r\nconst formState = reactive({\r\n  name: '',\r\n  mark: '',\r\n  role_type: ''\r\n})\r\n\r\nconst formRules = reactive({\r\n  name: [\r\n    {\r\n      message: t('role_name_required'),\r\n      required: true\r\n    }\r\n  ]\r\n})\r\n\r\nconst { resetFields, validate, validateInfos } = useForm(formState, formRules)\r\n\r\nconst getMenuData = async () => {\r\n  await getMenu().then((res) => {\r\n    let data = res.data || []\r\n    // 任何成员 都有账号设置页面\r\n    data.forEach((item) => {\r\n      if (item.uni_key == 'System') {\r\n        item.children = item.children.filter((it) => it.uni_key != 'AccountManage')\r\n      }\r\n    })\r\n    menuOptions.value = data\r\n    for (let i = 0; i < data.length; i++) {\r\n      const item = data[i]\r\n      robotChecked.value[item.uni_key] = []\r\n    }\r\n  })\r\n}\r\n\r\nconst add = async () => {\r\n  await getMenuData()\r\n  modalTitle.value = t('add_role_title')\r\n  id.value = ''\r\n  show.value = true\r\n  formState.name = ''\r\n  formState.mark = ''\r\n  resetFields()\r\n}\r\n\r\nconst edit = (record) => {\r\n  modalTitle.value = t('edit_role_title')\r\n  id.value = record.id\r\n  getRole({ id: record.id }).then((res) => {\r\n    let data = res.data\r\n    let role_permission = data.role_permission || []\r\n    formState.name = data.name\r\n    formState.mark = data.mark\r\n    formState.role_type = data.role_type\r\n    robotChecked.value = formatCheckList(menuOptions.value, role_permission)\r\n    show.value = true\r\n  })\r\n}\r\n\r\nconst formatCheckList = (data, list) => {\r\n  let resultList = {}\r\n  data.forEach((item) => {\r\n    resultList[item.uni_key] = []\r\n    for (let i = 0; i < item.children.length; i++) {\r\n      const sub = item.children[i]\r\n      if (list.includes(sub.uni_key)) {\r\n        resultList[item.uni_key].push(sub.uni_key)\r\n      }\r\n      if (sub.children && sub.children.length > 0) {\r\n        sub.children.forEach((it) => {\r\n          if (list.includes(it.uni_key)) {\r\n            resultList[item.uni_key].push(it.uni_key)\r\n          }\r\n        })\r\n      }\r\n    }\r\n  })\r\n  return resultList\r\n}\r\n\r\nconst deconstruction = (obj) => {\r\n  let newArr = []\r\n  for (let key in obj) {\r\n    const ele = obj[key]\r\n    ele.map((item) => {\r\n      newArr.push(item)\r\n    })\r\n  }\r\n  return newArr\r\n}\r\n\r\nconst handleOk = () => {\r\n  validate().then(() => {\r\n    let uni_keys = deconstruction(robotChecked.value)\r\n    let parmas = {\r\n      id: id.value,\r\n      mark: formState.mark\r\n    }\r\n\r\n    if (formState.role_type == 0) {\r\n      parmas.name = formState.name\r\n      parmas.role_type = formState.role_type\r\n      parmas.uni_keys = uni_keys.join(',')\r\n    }\r\n\r\n    saveRole(parmas).then((res) => {\r\n      show.value = false\r\n      message.success(t('save_success'))\r\n      emit('ok')\r\n    })\r\n  })\r\n}\r\n\r\nconst handleSubChaneg = (sub, uni_key) => {\r\n  if (!sub.children) {\r\n    return\r\n  }\r\n  nextTick(() => {\r\n    if (!robotChecked.value[uni_key].includes(sub.uni_key)) {\r\n      // 父级取消勾选 要把子级取消勾选\r\n      let sonKey = sub.children.map((item) => item.uni_key)\r\n      robotChecked.value[uni_key] = robotChecked.value[uni_key].filter(\r\n        (item) => !sonKey.includes(item)\r\n      )\r\n    }\r\n  })\r\n}\r\nconst handleSonChange = (son, sub, uni_key) => {\r\n  nextTick(() => {\r\n    if (robotChecked.value[uni_key].includes(son.uni_key)) {\r\n      // 孙子勾选  父级 勾选上去\r\n      robotChecked.value[uni_key].push(sub.uni_key)\r\n      // 数组去重\r\n      robotChecked.value[uni_key] = [...new Set(robotChecked.value[uni_key])]\r\n    }\r\n  })\r\n}\r\n\r\nconst getChildrenTotal = (data) => {\r\n  let total = data.length\r\n  data.forEach((item) => {\r\n    if (item.children && item.children.length) {\r\n      total = total + item.children.length\r\n    }\r\n  })\r\n  return total\r\n}\r\n\r\nonMounted(() => {\r\n  getMenuData()\r\n})\r\n\r\ndefineExpose({\r\n  add,\r\n  edit\r\n})\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.form-box {\r\n  margin-top: 24px;\r\n}\r\n.role-check-box {\r\n  background: #f2f4f7;\r\n  border-radius: 6px;\r\n  padding: 8px 16px 16px 12px;\r\n  margin-bottom: 8px;\r\n  .title-boock {\r\n    margin-bottom: 8px;\r\n  }\r\n  .title-row {\r\n    color: #262626;\r\n    font-size: 14px;\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    line-height: 22px;\r\n  }\r\n  .check-num {\r\n    color: #8c8c8c;\r\n    font-size: 14px;\r\n    font-weight: 400;\r\n    line-height: 22px;\r\n  }\r\n  &::v-deep(.ant-checkbox + span) {\r\n    padding-right: 0;\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"team-members-pages\">\r\n    <a-flex justify=\"space-between\">\r\n      <a-button type=\"primary\" @click=\"handleAdd\">\r\n        <template #icon>\r\n          <PlusOutlined />\r\n        </template>\r\n        {{ t('add_role_btn') }}\r\n      </a-button>\r\n      <a-input-search\r\n        v-model:value=\"requestParams.search\"\r\n        :placeholder=\"t('search_placeholder')\"\r\n        style=\"width: 288px\"\r\n        @search=\"onSearch\"\r\n      />\r\n    </a-flex>\r\n    <div class=\"list-box\">\r\n      <a-table\r\n        :data-source=\"tableData\"\r\n        :pagination=\"{\r\n          current: requestParams.page,\r\n          total: requestParams.total,\r\n          pageSize: requestParams.size,\r\n          showQuickJumper: true,\r\n          showSizeChanger: true,\r\n          pageSizeOptions: ['10', '20', '50', '100']\r\n        }\"\r\n        @change=\"onTableChange\"\r\n      >\r\n        <a-table-column :title=\"t('column_role')\" data-index=\"name\" width=\"157px\">\r\n          <template #default=\"{ record }\">{{ record.name }}</template>\r\n        </a-table-column>\r\n        <a-table-column :title=\"t('column_remark')\" data-index=\"mark\" width=\"480px\">\r\n          <template #default=\"{ record }\">{{ record.mark }}</template>\r\n        </a-table-column>\r\n        <a-table-column :title=\"t('column_update_time')\" data-index=\"update_time\" width=\"150px\">\r\n          <template #default=\"{ record }\">{{ record.update_time }}</template>\r\n        </a-table-column>\r\n        <a-table-column :title=\"t('column_operate_name')\" data-index=\"operate_name\" width=\"130px\">\r\n          <template #default=\"{ record }\">{{ record.operate_name }}</template>\r\n        </a-table-column>\r\n        <a-table-column :title=\"t('column_create_name')\" data-index=\"create_name\" width=\"130px\">\r\n          <template #default=\"{ record }\">{{ record.create_name }}</template>\r\n        </a-table-column>\r\n        <a-table-column :title=\"t('column_action')\" data-index=\"action\" width=\"178px\">\r\n          <template #default=\"{ record }\">\r\n            <a-flex :gap=\"16\" class=\"action-box\">\r\n              <a-button type=\"link\" @click=\"handleEdit(record)\">{{ t('btn_edit') }}</a-button>\r\n              <a-button type=\"link\" @click=\"handleDelete(record)\" :disabled=\"record.role_type <= 3 && record.role_type > 0\">{{ t('btn_delete') }}</a-button>\r\n            </a-flex>\r\n          </template>\r\n        </a-table-column>\r\n      </a-table>\r\n    </div>\r\n    <AddRole ref=\"addRoleRef\" @ok=\"getData\"></AddRole>\r\n  </div>\r\n</template>\r\n<script setup>\r\nimport { ref, reactive, createVNode } from 'vue'\r\nimport { PlusOutlined, ExclamationCircleOutlined } from '@ant-design/icons-vue'\r\nimport { Modal, message } from 'ant-design-vue'\r\nimport { getRoleList, delRole } from '@/api/manage/index.js'\r\nimport AddRole from './components/add-role.vue'\r\nimport dayjs from 'dayjs'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.user.manage.role-permissions')\r\nconst keyword = ref('')\r\nconst requestParams = reactive({\r\n  page: 1,\r\n  size: 10,\r\n  total: 0,\r\n  search: ''\r\n})\r\nconst tableData = ref([{}])\r\n\r\nconst onTableChange = (pagination) => {\r\n  requestParams.page = pagination.current\r\n  requestParams.size = pagination.pageSize\r\n  getData()\r\n}\r\nconst onSearch = () => {\r\n  requestParams.page = 1\r\n  getData()\r\n}\r\nconst getData = () => {\r\n  // 获取用户列表\r\n  let parmas = {\r\n    page: requestParams.page,\r\n    size: requestParams.size,\r\n    search: requestParams.search\r\n  }\r\n\r\n  getRoleList(parmas).then((res) => {\r\n    let lists = res.data.list\r\n    lists.forEach((item) => {\r\n      item.update_time = dayjs(item.update_time * 1000).format('YYYY-MM-DD HH:mm')\r\n    })\r\n    tableData.value = lists\r\n    requestParams.total = +res.data.total\r\n  })\r\n}\r\nonSearch()\r\nconst addRoleRef = ref(null)\r\nconst handleAdd = () => {\r\n  addRoleRef.value.add()\r\n}\r\nconst handleEdit = (record) => {\r\n  addRoleRef.value.edit(record)\r\n}\r\nconst handleDelete = (record) => {\r\n  // 删除用户\r\n  Modal.confirm({\r\n    title: t('confirm_title'),\r\n    icon: createVNode(ExclamationCircleOutlined),\r\n    content: t('confirm_content'),\r\n    okText: t('ok_text'),\r\n    okType: 'danger',\r\n    cancelText: t('cancel_text'),\r\n    onOk: () => {\r\n      delRole({ id: record.id }).then((res) => {\r\n        message.success(t('delete_success'))\r\n        getData()\r\n      })\r\n    },\r\n    onCancel() {}\r\n  })\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.team-members-pages {\r\n  background: #fff;\r\n  padding: 24px;\r\n  height: 100%;\r\n  .list-box {\r\n    margin-top: 8px;\r\n  }\r\n}\r\n.action-box .ant-btn-link {\r\n  padding: 0;\r\n}\r\n</style>\r\n","<style lang=\"less\" scoped>\r\n.user-model-page {\r\n  width: 100%;\r\n  height: 100%;\r\n  border-bottom: 1px solid #fff;\r\n  border-right: 1px solid #fff;\r\n  background-color: #f2f4f7;\r\n  .list-wrapper {\r\n    background: #fff;\r\n    height: calc(100% - 47px);\r\n    overflow-x: hidden;\r\n    overflow-y: auto;\r\n  }\r\n}\r\n</style>\r\n\r\n<template>\r\n  <div class=\"user-model-page\">\r\n    <PageTabs v-model:value=\"activeTab\" @change=\"onChangeTab\" />\r\n    <div class=\"list-wrapper\">\r\n      <TeamMembers v-if=\"activeTab == 1\"></TeamMembers>\r\n      <RolePermissions v-else></RolePermissions>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue'\r\nimport { ExclamationCircleOutlined } from '@ant-design/icons-vue'\r\nimport { message, Modal } from 'ant-design-vue'\r\nimport PageTabs from './components/page-tabs.vue'\r\nimport TeamMembers from './team-members.vue'\r\nimport RolePermissions from './role-permissions.vue'\r\n\r\nconst activeTab = ref(1)\r\n\r\nconst onChangeTab = () => {\r\n  // console.log(activeTab.value)\r\n}\r\n</script>\r\n"],"names":["t","useI18n","emit","__emit","props","__props","tabs","ref","handleClickTab","val","_openBlock","_createElementBlock","_hoisted_1","_Fragment","_renderList","tab","_normalizeClass","$event","_unref","_hoisted_2","getBase64","file","resolve","reject","reader","error","fileList","loading","imageUrl","watch","formItemContext","Form","triggerChange","data","beforeUpload","base64Url","message","previewVisible","previewImage","previewTitle","handleCancel","handlePreview","_createVNode","_component_a_upload","_hoisted_3","_createBlock","LoadingOutlined","PlusOutlined","_cache","_createElementVNode","_component_a_modal","useForm","show","modalTitle","formState","reactive","gData","getLists","getDepartmentList","res","treeData","formateDepartmentCascaderData","onAvatarChange","roleLists","getRoleList","lists","item","formRules","rule","value","validatePassword","resetFields","validate","validateInfos","add","department_id","defaultAvatar","edit","dayjs","saveLoading","handleOk","formData","toRaw","saveUser","disabledDate","current","__expose","AvatarInput","_toDisplayString","_component_a_form","_hoisted_4","_component_a_form_item","_mergeProps","_component_a_input","_hoisted_5","_component_a_select","_component_a_select_option","_createTextVNode","_component_a_tree_select","_withCtx","label","_hoisted_6","_component_a_input_password","_hoisted_7","_component_a_radio_group","_component_a_radio","_hoisted_8","_component_a_date_picker","computed","open","record","resetPass","checkedList","currentTitle","dataList","departLists","formatId","arr","newArr","onSelectChange","selectedRowKeys","baseOption","tabOption","newVal","currentRecord","object_type","identity_type","identity_id","key","status","list","filterItem","it","getPermissionManageList","handleChangeTabs","handleBatchOpen","ids","handleDepartmentOpen","treeParmas","datas","dynamicTabOption","parmas","object_array","batchSavePermissionManage","handleClose","_component_a_table","_component_a_table_column","_component_a_segmented","payload","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","rename","saveDepartment","setModal","filterIds","getSonIds","Modal","createVNode","ExclamationCircleOutlined","handleDel","getAllList","child","handleOpenSetModal","handleDirectDel","deleteDepartment","departmentLists","getAllDepartment","ExclamationCircleFilled","_component_a_button","genData","getParentKey","tree","parentKey","i","node","expandedKeys","selectedKeys","searchValue","autoExpandParent","defaltGroupId","defaultItem","onExpand","keys","expanded","self","generateList","isInit","formateDepartmentData","nextTick","treeSelectData","handleDelDepartment","id","addDepartmentRef","openAddModal","handleRename","onSelect","_","e","delDepartmentRef","openDel","treeNode","handleSave","_component_a_input_search","_component_a_tree","switcherCls","CaretDownOutlined","_component_a_tooltip","_component_a_dropdown","_component_a_menu","_component_a_menu_item","_withModifiers","MoreOutlined","AddDepartment","DelDepartment","tableData","typeName","addButtonText","roleText","getData","handleChange","handleChangeStatus","operate_rights","roleKey","roleName","savePermissionManage","deletePermissionManage","robotList","libraryList","formList","getList","getRobotList","getLibrary","getLibraryList","getForm","getFormList","seeModelAlertRef","addManage","columns","_component_a_radio_button","column","_component_a_popover","UserOutlined","CheckOutlined","EditOutlined","_hoisted_17","EyeOutlined","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","DownOutlined","_hoisted_22","SeeModelAlert","batchUpdateUserDepartment","requestParams","onTableChange","pagination","handleSelect","onSearch","formatText","getUserList","state","handleTabsChange","departmentTreeRef","refreshTreeAndData","getCheckboxProps","handleSwichLogin","loginSwitch","addTeamMembersRef","handleAdd","handleEdit","resetPasswordRef","handleReSetPassword","handleDelete","delUser","handleBatchAdd","selectList","batchEditDepartmentRef","handleBatchDepart","editManage","_component_cu_scroll","DepartmentTree","_component_a_flex","_hoisted_40","CheckCircleFilled","_hoisted_41","_component_a_switch","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","KnowledgePermissions","AddTeamMembers","ResetPassword","BatchEditDepartment","menuOptions","robotChecked","getMenuData","getMenu","getRole","role_permission","formatCheckList","resultList","sub","deconstruction","obj","uni_keys","saveRole","handleSubChaneg","uni_key","sonKey","handleSonChange","son","getChildrenTotal","total","onMounted","_component_a_textarea","_component_a_checkbox_group","_component_a_row","_component_a_col","_component_a_checkbox","addRoleRef","delRole","AddRole","activeTab","onChangeTab","PageTabs","TeamMembers","RolePermissions"],"mappings":"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"}