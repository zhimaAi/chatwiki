import{_ as T}from"./cu-scroll-BmUgdtgQ.js";import{Y as h,_ as g,F as S,a9 as $,a5 as s,k as l,a7 as C,G as k,B as M,f as w,o as E,aa as U,w as A,a2 as m}from"./vue-chunks-Ci-XTWEs.js";import{g as F}from"./index-DGyn5jM5.js";import{w as O,x as D}from"./index-DFuA_ofI.js";import{b as N,d as V}from"../../index-OnalErht.js";import{X as z,M as L,ag as Y,B as q,a as R}from"./ui-antd-BgeWxFcI.js";import{_ as G}from"./main-tab-BICC7-0v.js";import"./pull-up.esm-D94Swpvl.js";import"./observe-dom.esm-CyCedSm-.js";import"./utils-ChQO-_r6.js";import"./list-tabs-xpus4ekB.js";import"./index-ekVIF3nC.js";const K={class:"list-box"},W=["onClick"],X={class:"explore-info"},j={class:"explore-info-content"},H={class:"explore-title"},J={class:"item-body"},P={class:"explore-desc"},Q={class:"support-box"},Z={class:"item-footer"},tt={__name:"index",props:{list:{type:Array,default:()=>[]}},emits:["switchChange","clickItem"],setup(I,{emit:v}){const c=v,d=I,u=(_,i)=>c("switchChange",_,i),y=(_,i)=>{try{const a=_==null?void 0:_.target;if(a&&typeof a.closest=="function"&&a.closest(".no-bubble"))return}catch{}c("clickItem",i)};return(_,i)=>{const a=V,x=z;return g(),h("div",K,[(g(!0),h(S,null,$(d.list,n=>{var t,e;return g(),h("div",{class:"list-item-wrapper",key:n.id},[s("div",{class:"list-item",onClick:o=>y(o,n)},[s("div",X,[l(a,{class:"explore-icon",name:n.ability_type,style:{"font-size":"62px",color:"white"}},null,8,["name"]),s("div",j,[s("div",H,C(n.explore_name||n.name),1),i[1]||(i[1]=s("div",{class:"explore-type"},"ChatWiki",-1))])]),s("div",J,[s("div",P,C(n.explore_intro||n.introduction),1),s("span",Q,[(g(!0),h(S,null,$(n.support_channels_list,o=>(g(),h("span",{key:o,class:"support-item"},[l(a,{name:"support",class:"icon"}),k(" "+C(o),1)]))),128))])]),s("div",Z,[l(x,{checked:((t=n.user_config)==null?void 0:t.switch_status)=="1"||((e=n.robot_config)==null?void 0:e.switch_status)=="1","checked-children":"开","un-checked-children":"关",class:"no-bubble",onClick:i[0]||(i[0]=M(()=>{},["stop"])),onChange:o=>u(n,o)},null,8,["checked","onChange"])])],8,W)])}),128))])}}},ot=N(tt,[["__scopeId","data-v-7c688ad6"]]),et={"bg-color":"#f5f9ff",class:"explore-page"},st={class:"explore-page-body"},nt={class:"list-toolbar"},at={class:"toolbar-box"},it={class:"list-group-box"},lt={class:"enable-tip-footer"},ct={class:"footer-actions"},B="explore_enable_tip_suppress_until",rt={__name:"explore-index",setup(I){new URL("@/assets/svg/default-explore.svg",import.meta.url).href;const v=w([]),c=w(!1),d=w(!1),u=U();E(()=>{localStorage.getItem("zm:explore:active")>1?u.push({path:"/plugins/index"}):_()});let y=w([]);const _=()=>{O().then(t=>{const e=((t==null?void 0:t.data)||[]).map(o=>({...o,explore_name:o.name,explore_intro:o.introduction}));v.value=e,y.value=(t==null?void 0:t.data)||[]})},i=(t,e)=>{const o=e?"1":"0";if(o==="0"){L.confirm({title:"提示",content:"关闭后，该功能默认关闭不再支持使用，确认关闭？",onOk:()=>{D({ability_type:t.ability_type,switch_status:o}).then(r=>{r&&r.res==0&&(R.success("操作成功"),t.user_config?t.user_config.switch_status=o:t.robot_config&&(t.robot_config.switch_status=o))})}});return}D({ability_type:t.ability_type,switch_status:o}).then(r=>{if(r&&r.res==0){R.success("操作成功"),t.user_config?t.user_config.switch_status=o:t.robot_config&&(t.robot_config.switch_status=o);const f=Number(localStorage.getItem(B)||0),b=Date.now();f<=b&&(d.value=!1,c.value=!0)}})},a=()=>{if(d.value){const t=Date.now()+2592e5;localStorage.setItem(B,String(t))}},x=()=>{a(),c.value=!1},n=async()=>{a(),c.value=!1;const t=localStorage.getItem("last_local_robot_id");try{const{data:e=[]}=await F();if(!e.length){const p=u.resolve({path:"/robot/list"});window.open(p.href,"_blank");return}let o;t&&(o=e.find(p=>p.id==t)),o=o||e[0];const{id:r,robot_key:f}=o,b=u.resolve({path:"/robot/config/function-center",query:{id:r,robot_key:f}});window.open(b.href,"_blank")}catch{const o=u.resolve({path:"/robot/list"});window.open(o.href,"_blank")}};return A(c,(t,e)=>{e&&!t&&a()}),(t,e)=>{const o=T,r=Y,f=q,b=L;return g(),h("div",et,[s("div",st,[s("div",nt,[s("div",at,[l(G)])]),s("div",it,[l(o,{style:{"padding-right":"16px",flex:"1"}},{default:m(()=>[l(ot,{list:v.value,onSwitchChange:i,onClickItem:n},null,8,["list"])]),_:1})])]),l(b,{open:c.value,"onUpdate:open":e[1]||(e[1]=p=>c.value=p),title:"提示",footer:null},{default:m(()=>[e[5]||(e[5]=s("div",null,"开启该功能后请到机器人>功能中心，配置并使用该功能",-1)),s("div",lt,[l(r,{checked:d.value,"onUpdate:checked":e[0]||(e[0]=p=>d.value=p)},{default:m(()=>e[2]||(e[2]=[k("3天内不再提醒")])),_:1,__:[2]},8,["checked"]),s("div",ct,[l(f,{onClick:x},{default:m(()=>e[3]||(e[3]=[k("取消")])),_:1,__:[3]}),l(f,{type:"primary",onClick:n},{default:m(()=>e[4]||(e[4]=[k("去使用")])),_:1,__:[4]})])])]),_:1,__:[5]},8,["open"])])}}},kt=N(rt,[["__scopeId","data-v-da84266b"]]);export{kt as default};
