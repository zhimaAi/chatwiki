{"version":3,"file":"wiki-dropdown-BkKKYb8k.js","sources":["../../../../front-end/chat-ai-admin-vue/src/views/public-library/components/seo-setting.vue","../../../../front-end/chat-ai-admin-vue/src/assets/img/t.svg","../../../../front-end/chat-ai-admin-vue/src/views/public-library/components/wiki-dropdown.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <a-modal\r\n      v-model:open=\"show\"\r\n      :title=\"t('title')\"\r\n      @ok=\"handleOk\"\r\n      width=\"746px\"\r\n      :confirmLoading=\"confirmLoading\"\r\n    >\r\n      <div class=\"seo-setting\">\r\n        <a-form :model=\"formData\" layout=\"vertical\">\r\n          <a-form-item :label=\"t('label_title')\">\r\n            <a-input v-model:value=\"formData.seo_title\" :placeholder=\"t('placeholder_title')\" />\r\n          </a-form-item>\r\n          <a-form-item :label=\"t('label_desc')\">\r\n            <a-textarea v-model:value=\"formData.seo_desc\" :placeholder=\"t('placeholder_desc')\" />\r\n          </a-form-item>\r\n          <a-form-item :label=\"t('label_keywords')\">\r\n            <a-input\r\n              v-model:value=\"formData.seo_keywords\"\r\n              :placeholder=\"t('placeholder_keywords')\"\r\n            />\r\n          </a-form-item>\r\n        </a-form>\r\n      </div>\r\n    </a-modal>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { saveLibDocSeo } from '@/api/public-library/index'\r\nimport { ref, reactive, toRaw } from 'vue'\r\nimport { message } from 'ant-design-vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.public-library.components.seo-setting')\r\n\r\nconst emit = defineEmits(['ok'])\r\n\r\nconst confirmLoading = ref(false)\r\n// 表单数据\r\nconst formData = reactive({\r\n  library_key: '',\r\n  seo_title: '',\r\n  seo_desc: '',\r\n  seo_keywords: ''\r\n})\r\n\r\nconst show = ref(false)\r\n\r\nconst handleOk = () => {\r\n  confirmLoading.value = true\r\n\r\n  saveLibDocSeo({\r\n    ...toRaw(formData)\r\n  })\r\n    .then(() => {\r\n      confirmLoading.value = false\r\n      show.value = false\r\n      message.success(t('save_success'))\r\n      emit('ok', { ...toRaw(formData) })\r\n    })\r\n    .catch(() => {\r\n      confirmLoading.value = false\r\n    })\r\n}\r\n\r\nconst open = (val) => {\r\n  formData.library_key = val.library_key || ''\r\n  formData.doc_id = val.doc_id || ''\r\n  formData.seo_title = val.seo_title || ''\r\n  formData.seo_desc = val.seo_desc || ''\r\n  formData.seo_keywords = val.seo_keywords || ''\r\n\r\n  show.value = true\r\n}\r\n\r\ndefineExpose({\r\n  open\r\n})\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.seo-setting {\r\n  padding: 20px;\r\n}\r\n</style>\r\n","export default \"data:image/svg+xml,%3csvg%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2062%2062'%20class='design-iconfont'%3e%3crect%20width='62'%20height='62'%20rx='14.5882'%20fill='%2300BDE7'/%3e%3cg%20filter='url(%23o84qievkg__filter0_d_7802_38769)'%3e%3cpath%20d='M19.3334%2019.3333C19.3334%2018.0447%2020.378%2017%2021.6667%2017H35.6667C39.5327%2017%2042.6667%2020.134%2042.6667%2024V42.6667C42.6667%2043.9553%2041.622%2045%2040.3334%2045H26.3334C22.4674%2045%2019.3334%2041.866%2019.3334%2038V19.3333Z'%20fill='%23EBFBFF'/%3e%3cpath%20d='M19.3334%2019.3333C19.3334%2018.0447%2020.378%2017%2021.6667%2017H35.6667C39.5327%2017%2042.6667%2020.134%2042.6667%2024V42.6667C42.6667%2043.9553%2041.622%2045%2040.3334%2045H26.3334C22.4674%2045%2019.3334%2041.866%2019.3334%2038V19.3333Z'%20stroke='%23EBFBFF'%20stroke-width='3.03333'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3cpath%20d='M25.5541%2031H36.443H25.5541Z'%20fill='%23EBFBFF'/%3e%3cpath%20d='M25.5541%2031H36.443'%20stroke='%2300BDE7'%20stroke-width='3.03333'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M25.5541%2024H38.7763H25.5541Z'%20fill='%23EBFBFF'/%3e%3cpath%20d='M25.5541%2024H38.7763'%20stroke='%2300BDE7'%20stroke-width='3.03333'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M25.5541%2038H30.9985H25.5541Z'%20fill='%23EBFBFF'/%3e%3cpath%20d='M25.5541%2038H30.9985'%20stroke='%2300BDE7'%20stroke-width='3.03333'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cdefs%3e%3cfilter%20id='o84qievkg__filter0_d_7802_38769'%20x='13.6917'%20y='15.4844'%20width='34.6167'%20height='39.2812'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeColorMatrix%20in='SourceAlpha'%20values='0%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%20127%200'%20result='hardAlpha'/%3e%3cfeOffset%20dy='4.125'/%3e%3cfeGaussianBlur%20stdDeviation='2.0625'/%3e%3cfeComposite%20in2='hardAlpha'%20operator='out'/%3e%3cfeColorMatrix%20values='0%200%200%200%200.103314%200%200%200%200%200.32111%200%200%200%200%200.367781%200%200%200%200.16%200'/%3e%3cfeBlend%20in2='BackgroundImageFix'%20result='effect1_dropShadow_7802_38769'/%3e%3cfeBlend%20in='SourceGraphic'%20in2='effect1_dropShadow_7802_38769'%20result='shape'/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e\"","<style lang=\"less\" scoped>\r\n.wiki-dropdown {\r\n  position: relative;\r\n  .current-wiki {\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 4px 8px;\r\n    border-radius: 6px;\r\n    transition: all 0.2s;\r\n    cursor: pointer;\r\n\r\n    &:hover {\r\n      background: #e4e6eb;\r\n    }\r\n    .wiki-logo {\r\n      width: 32px;\r\n      height: 32px;\r\n      margin-right: 8px;\r\n      border-radius: 4px;\r\n    }\r\n    .wiki-name {\r\n      flex: 1;\r\n      height: 24px;\r\n      line-height: 24px;\r\n      margin-bottom: 0;\r\n      overflow: hidden;\r\n      text-overflow: ellipsis;\r\n      white-space: nowrap;\r\n      color: #262626;\r\n      font-size: 16px;\r\n      font-weight: 600;\r\n    }\r\n\r\n    .action-down {\r\n      margin-left: 8px ;\r\n      font-size: 14px;\r\n      color: #595959;\r\n    }\r\n  }\r\n\r\n  .wike-dropdown-menu {\r\n    position: absolute;\r\n    top: 40px;\r\n    left: 0;\r\n    width: 324px;\r\n    max-height: 400px;\r\n    padding: 2px;\r\n    border-radius: 12px;\r\n    background: #fff;\r\n    z-index: 100;\r\n    overflow-y: auto;\r\n    box-shadow:\r\n      0 6px 30px 5px rgba(0, 0, 0, 0.05),\r\n      0 16px 24px 2px rgba(0, 0, 0, 0.04),\r\n      0 8px 10px -5px rgba(0, 0, 0, 0.08);\r\n  }\r\n\r\n  .wike-menu-item {\r\n    display: flex;\r\n    align-items: center;\r\n    width: 100%;\r\n    height: 40px;\r\n    padding: 0 8px;\r\n    margin-bottom: 4px;\r\n    border-radius: 6px;\r\n    transition: all 0.2s;\r\n    cursor: pointer;\r\n    &:last-child {\r\n      margin-bottom: 0;\r\n    }\r\n\r\n    &:hover {\r\n      background: #e4e6eb;\r\n    }\r\n\r\n    .wiki-logo {\r\n      width: 32px;\r\n      height: 32px;\r\n      margin-right: 8px;\r\n      border-radius: 4px;\r\n    }\r\n    .wiki-name {\r\n      flex: 1;\r\n      height: 24px;\r\n      line-height: 24px;\r\n      margin-bottom: 0;\r\n      overflow: hidden;\r\n      text-overflow: ellipsis;\r\n      white-space: nowrap;\r\n      color: #262626;\r\n      font-size: 16px;\r\n      font-weight: 600;\r\n    }\r\n    .check-icon {\r\n      display: none;\r\n      margin-left: 8px;\r\n      font-size: 14px;\r\n      color: #2475fc;\r\n    }\r\n  }\r\n  .wike-menu-item.active {\r\n    background: #e6efff;\r\n    .check-icon {\r\n      display: block;\r\n    }\r\n  }\r\n\r\n  .wike-dropdown-wrapper{\r\n    position: fixed;\r\n    top: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    z-index: 99;\r\n  }\r\n}\r\n</style>\r\n\r\n<template>\r\n  <div class=\"wiki-dropdown\">\r\n    <div class=\"current-wiki\" @click=\"toggleDropdown\" ref=\"currentWikiRef\">\r\n      <img class=\"wiki-logo\" :src=\"props.libraryInfo.avatar\" v-if=\"props.libraryInfo.avatar\" />\r\n      <img class=\"wiki-logo\" src=\"@/assets/img/t.svg\" alt=\"\" v-else />\r\n      <h3 class=\"wiki-name\">{{ props.libraryInfo.library_name }}</h3>\r\n      <span class=\"action-down\" v-if=\"props.libraryList.length > 1\">\r\n        <DownOutlined />\r\n      </span>\r\n    </div>\r\n    <div class=\"wike-dropdown-wrapper\" v-if=\"isDropdownOpen\"></div>\r\n    <div class=\"wike-dropdown-menu custom-scrollbar\" v-if=\"isDropdownOpen\" ref=\"dropdownMenuRef\">\r\n      <div\r\n        class=\"wike-menu-item\"\r\n        :class=\"{ active: props.libraryInfo.libraryKey === item.library_key }\"\r\n        v-for=\"item in props.libraryList\"\r\n        :key=\"item.library_key\"\r\n        @click=\"changeLibrary(item)\"\r\n      >\r\n        <img class=\"wiki-logo\" :src=\"item.avatar\" v-if=\"item.avatar\" />\r\n        <img class=\"wiki-logo\" src=\"@/assets/img/t.svg\" alt=\"\" v-else />\r\n        <h3 class=\"wiki-name\">{{ item.library_name }}</h3>\r\n        <span class=\"check-icon\"><CheckOutlined /></span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { DownOutlined, CheckOutlined } from '@ant-design/icons-vue'\r\nimport { ref, onMounted, onUnmounted } from 'vue'\r\n\r\nconst emit = defineEmits(['change'])\r\n\r\nconst props = defineProps({\r\n  libraryList: {\r\n    type: Array,\r\n    default: () => []\r\n  },\r\n  libraryInfo: {\r\n    type: Object,\r\n    default: () => {\r\n      return {\r\n        library_key: '',\r\n        library_name: '',\r\n        library_intro: '',\r\n        avatar: '',\r\n      }\r\n    }\r\n  }\r\n})\r\n\r\n// 控制下拉菜单显示状态\r\nconst isDropdownOpen = ref(false)\r\nconst currentWikiRef = ref(null)\r\nconst dropdownMenuRef = ref(null)\r\n\r\n// 切换下拉菜单显示/隐藏\r\nconst toggleDropdown = (event) => {\r\n  if (props.libraryList.length == 1) {\r\n    return\r\n  }\r\n  // 阻止事件冒泡，避免触发document的click事件\r\n  event.stopPropagation()\r\n  isDropdownOpen.value = !isDropdownOpen.value\r\n}\r\n\r\n// 点击外部区域关闭下拉菜单\r\nconst handleClickOutside = (event) => {\r\n  // 判断点击是否在当前组件之外\r\n  if (\r\n    currentWikiRef.value &&\r\n    !currentWikiRef.value.contains(event.target) &&\r\n    dropdownMenuRef.value &&\r\n    !dropdownMenuRef.value.contains(event.target)\r\n  ) {\r\n    isDropdownOpen.value = false\r\n  }\r\n}\r\n\r\n// 切换选中的知识库\r\nconst changeLibrary = (item) => {\r\n  // 切换后关闭下拉菜单\r\n  isDropdownOpen.value = false\r\n  emit('change', item)\r\n}\r\n\r\n// 组件挂载时添加点击事件监听\r\nonMounted(() => {\r\n  document.addEventListener('click', handleClickOutside)\r\n})\r\n\r\n// 组件卸载时移除点击事件监听\r\nonUnmounted(() => {\r\n  document.removeEventListener('click', handleClickOutside)\r\n})\r\n</script>\r\n"],"names":["t","useI18n","emit","__emit","confirmLoading","ref","formData","reactive","show","handleOk","saveLibDocSeo","toRaw","message","__expose","val","_createElementBlock","_createVNode","_component_a_modal","$event","_unref","_createElementVNode","_hoisted_1","_component_a_form","_component_a_form_item","_component_a_input","_cache","_component_a_textarea","_imports_0","props","__props","isDropdownOpen","currentWikiRef","dropdownMenuRef","toggleDropdown","event","handleClickOutside","changeLibrary","item","onMounted","onUnmounted","_openBlock","_hoisted_3","_hoisted_4","_toDisplayString","_hoisted_5","DownOutlined","_hoisted_6","_Fragment","_renderList","_normalizeClass","_hoisted_9","_hoisted_10","_hoisted_11","CheckOutlined"],"mappings":"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"}