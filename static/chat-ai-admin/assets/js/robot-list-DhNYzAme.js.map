{"version":3,"file":"robot-list-DhNYzAme.js","sources":["../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-list/components/import-csl-alert.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-list/components/edit-group.vue","../../../../front-end/chat-ai-admin-vue/src/hooks/web/useOpenUrlWithToken.js","../../../../front-end/chat-ai-admin-vue/src/api/robot/mcp.js","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-list/components/mcp-store.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-list/components/select-workflow-modal.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-list/components/mcp-box.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-list/components/third-mcp-detail.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-list/components/third-mcp-store.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-list/components/third-mcp-box.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-list/components/mcp-panel.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-list/components/http-tool-avatar-input.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-list/components/http-tool-store.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-list/components/add-authentication-modal.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-list/components/add-http-tool-modal.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-list/components/http-tool-detail.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-list/components/http-tool-box.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-list/components/workflow-export-modal.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-list/robot-list.vue"],"sourcesContent":["<style lang=\"less\" scoped>\r\n.form-box {\r\n  margin-top: 24px;\r\n}\r\n\r\n.tip-box {\r\n  margin-bottom: 16px;\r\n}\r\n\r\n::v-deep(.ant-upload-drag) {\r\n  background: #FAFAFA;\r\n  border: 1px dashed #D9D9D9;\r\n\r\n  .ant-upload-btn {\r\n    padding: 24px 0;\r\n  }\r\n}\r\n\r\n.upload-icon {\r\n  font-size: 48px;\r\n  color: #2475FC;\r\n}\r\n\r\n.upload-text {\r\n  margin-top: 12px;\r\n  font-size: 16px;\r\n  color: #262626;\r\n}\r\n\r\n.upload-hint {\r\n  margin-top: 4px;\r\n  font-size: 14px;\r\n  color: #8C8C8C;\r\n}\r\n</style>\r\n\r\n<template>\r\n  <a-modal width=\"600px\" v-model:open=\"show\" :confirmLoading=\"saveLoading\" :title=\"t('title_import_csl')\" @ok=\"handleSave\"\r\n    @cancel=\"onCancel\">\r\n    <div class=\"form-box\">\r\n      <div class=\"tip-box\">\r\n        <a-alert type=\"info\">\r\n          <template #description>\r\n            {{ t('tip_description') }}\r\n          </template>\r\n        </a-alert>\r\n      </div>\r\n      <a-upload-dragger v-model:fileList=\"fileList\" name=\"file\" :multiple=\"false\" :maxCount=\"1\" accept=\".csl\"\r\n        :before-upload=\"beforeUpload\" @change=\"handleChange\">\r\n        <p class=\"ant-upload-drag-icon\">\r\n          <inbox-outlined class=\"upload-icon\"></inbox-outlined>\r\n        </p>\r\n        <p class=\"upload-text\">{{ t('upload_text') }}</p>\r\n        <p class=\"upload-hint\">{{ t('upload_hint') }}</p>\r\n      </a-upload-dragger>\r\n    </div>\r\n  </a-modal>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue';\r\nimport { InboxOutlined } from '@ant-design/icons-vue';\r\nimport { message, Upload } from 'ant-design-vue';\r\nimport { robotImport } from '@/api/robot/index.js';\r\nimport { useI18n } from '@/hooks/web/useI18n';\r\n\r\nconst { t } = useI18n('views.robot.robot-list.components.import-csl-alert');\r\n\r\nconst emit = defineEmits(['ok']);\r\n\r\nconst show = ref(false);\r\nconst saveLoading = ref(false);\r\nconst fileList = ref([]);\r\n\r\nconst open = () => {\r\n  show.value = true;\r\n};\r\n\r\nconst onCancel = () => {\r\n  show.value = false;\r\n  fileList.value = [];\r\n};\r\n\r\nconst handleSave = () => {\r\n  if (fileList.value.length === 0) {\r\n    message.error(t('msg_upload_csl'));\r\n    return;\r\n  }\r\n\r\n  // 使用robotImport方法处理文件上传\r\n  saveLoading.value = true;\r\n\r\n  robotImport({\r\n    file: fileList.value[0].originFileObj\r\n  }).then((res) => {\r\n    saveLoading.value = false;\r\n    show.value = false;\r\n    message.success(t('msg_import_success'));\r\n    fileList.value = [];\r\n    emit('ok', res.data);\r\n  })\r\n    .catch(() => {\r\n      saveLoading.value = false;\r\n      // message.error('导入失败');\r\n    });\r\n};\r\n\r\nconst beforeUpload = (file) => {\r\n  const isCsl = file.name.endsWith('.csl');\r\n  if (!isCsl) {\r\n    message.error(t('msg_only_csl_format'));\r\n    return Upload.LIST_IGNORE;\r\n  }\r\n  // 验证通过后返回false，阻止自动上传，由手动触发上传\r\n  return false;\r\n};\r\n\r\nconst handleChange = (info) => {\r\n  const { status } = info.file;\r\n  if (status !== 'uploading') {\r\n    console.log(info.file, info.fileList);\r\n  }\r\n};\r\n\r\ndefineExpose({\r\n  open\r\n});\r\n</script>","<template>\r\n  <div>\r\n    <a-modal v-model:open=\"open\" :title=\"t(modalTitle)\" @ok=\"handleOk\">\r\n      <div class=\"form-item\">\r\n        <div class=\"form-label\">{{ t('label_group_name') }}：</div>\r\n        <div class=\"form-content\">\r\n          <a-select v-model:value=\"formState.group_id\" style=\"width: 100%\" :placeholder=\"t('ph_select_group')\">\r\n            <a-select-option v-for=\"item in groupLists\" :value=\"item.id\">{{\r\n              item.group_name\r\n            }}</a-select-option>\r\n          </a-select>\r\n        </div>\r\n      </div>\r\n    </a-modal>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive } from 'vue'\r\nimport { relationRobotGroup, getRobotGroupList } from '@/api/robot'\r\nimport { message } from 'ant-design-vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.robot.robot-list.components.edit-group')\r\n\r\nconst open = ref(false)\r\nconst emit = defineEmits(['ok'])\r\nconst modalTitle = ref('title_edit_group')\r\nconst formState = reactive({\r\n  group_id: '',\r\n  robot_id: ''\r\n})\r\n\r\nconst groupLists = ref([])\r\n\r\nconst show = (data) => {\r\n  formState.group_id = data.group_id || '0'\r\n  formState.robot_id = data.id || ''\r\n  getGroupList()\r\n  open.value = true\r\n}\r\nconst handleOk = () => {\r\n  if (!formState.group_id) {\r\n    return message.error(t('msg_select_group'))\r\n  }\r\n  relationRobotGroup({\r\n    ...formState\r\n  }).then((res) => {\r\n    message.success(t('msg_operation_success', { title: t(modalTitle.value) }))\r\n    open.value = false\r\n    emit('ok')\r\n  })\r\n}\r\nconst getGroupList = () => {\r\n  getRobotGroupList().then((res) => {\r\n    groupLists.value = res.data || []\r\n  })\r\n}\r\n\r\ndefineExpose({\r\n  show\r\n})\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.form-item {\r\n  display: flex;\r\n  align-items: center;\r\n  margin: 24px 0;\r\n  .form-content {\r\n    flex: 1;\r\n  }\r\n}\r\n</style>\r\n","import { useUserStore } from '@/stores/modules/user'\r\n\r\n/**\r\n * 自定义hook，用于打开带token的链接\r\n * @returns {Function} openUrlWithToken函数，接收一个URL参数\r\n */\r\nexport const useOpenUrlWithToken = () => {\r\n  // 获取用户store实例\r\n  const userStore = useUserStore()\r\n  \r\n  /**\r\n   * 打开带token的链接\r\n   * @param {string} url - 需要打开的链接\r\n   */\r\n  const openUrlWithToken = (url) => {\r\n    // 从store中获取token\r\n    const token = userStore.getToken\r\n    \r\n    // 检查token和URL是否存在\r\n    if (!token) {\r\n      console.warn('Token is missing')\r\n      // 可以选择是否在没有token的情况下打开链接\r\n      // window.open(url, '_blank')\r\n      return\r\n    }\r\n    \r\n    if (!url) {\r\n      console.warn('URL is missing')\r\n      return\r\n    }\r\n    \r\n    // 检查URL是否已经包含查询参数\r\n    const separator = url.includes('?') ? '&' : '?'\r\n    \r\n    // 构造带token的完整URL\r\n    const urlWithToken = `${url}${separator}token=${token}`\r\n    \r\n    // 在新窗口中打开链接\r\n    window.open(urlWithToken, '_blank')\r\n  }\r\n  \r\n  return {\r\n    openUrlWithToken\r\n  }\r\n}","import request from \"@/utils/http/axios/index.js\";\r\n\r\nexport function getMcpServers(params = {}) {\r\n  return request.get({url: '/manage/getMcpServerList', params})\r\n}\r\n\r\nexport function saveMcpServer(data = {}) {\r\n  return request.post({\r\n    headers: {\r\n      'Content-Type': 'multipart/form-data'\r\n    },\r\n    url: '/manage/saveMcpServer',\r\n    data\r\n  })\r\n}\r\n\r\nexport function delMcpServer(data = {}) {\r\n  return request.post({url: '/manage/deleteMcpServer', data})\r\n}\r\n\r\nexport function updateMcpSrvStatus(data = {}) {\r\n  return request.post({url: '/manage/updateMcpServerPublishStatus', data})\r\n}\r\n\r\nexport function saveMcpTool(data = {}) {\r\n  return request.post({url: '/manage/saveMcpTool', data})\r\n}\r\n\r\nexport function editMcpTool(data = {}) {\r\n  return request.post({url: '/manage/editMcpTool', data})\r\n}\r\n\r\nexport function delMcpTool(data = {}) {\r\n  return request.post({url: '/manage/deleteMcpTool', data})\r\n}\r\n","<template>\r\n  <a-modal\r\n    v-model:open=\"visible\"\r\n    :title=\"formState.server_id ? t('title_edit_mcp') : t('title_add_mcp')\"\r\n    width=\"472px\"\r\n    :confirm-loading=\"saving\"\r\n    @ok=\"save\">\r\n    <div class=\"avatar-box\">\r\n      <AvatarInput v-model:value=\"formState.avatar\" @change=\"avatarChange\"/>\r\n      <div class=\"tip-info\">{{ t('tip_avatar_replace') }}</div>\r\n    </div>\r\n    <a-form class=\"form-box\" labelAlign=\"left\">\r\n      <a-form-item :label=\"t('label_mcp_plugin_name')\" required :colon=\"false\">\r\n        <a-input v-model:value=\"formState.name\" :placeholder=\"t('ph_mcp_plugin_name')\" :maxlength=\"20\"/>\r\n      </a-form-item>\r\n      <a-form-item :label=\"t('label_description')\" :colon=\"false\">\r\n        <a-textarea\r\n          v-model:value=\"formState.description\"\r\n          :auto-size=\"{ minRows: 2, maxRows: 5 }\"\r\n          :placeholder=\"t('ph_description')\" :maxlength=\"20\"/>\r\n      </a-form-item>\r\n      <template v-if=\"!formState.server_id\">\r\n        <div class=\"tit-box\">{{ t('title_config_info') }} <span class=\"desc\">{{ t('desc_config_auto_generate') }}</span></div>\r\n        <a-form-item :label=\"t('label_plugin_url')\" :colon=\"false\">\r\n          <a-input disabled :placeholder=\"t('ph_plugin_url_default')\"/>\r\n        </a-form-item>\r\n        <a-form-item :label=\"t('label_auth_method')\" :colon=\"false\">\r\n          <a-input disabled :placeholder=\"t('ph_auth_method_default')\"/>\r\n        </a-form-item>\r\n        <a-form-item :label=\"t('label_request_header')\" :colon=\"false\">\r\n          <a-input disabled :placeholder=\"t('ph_request_header_default')\"/>\r\n        </a-form-item>\r\n        <a-form-item :label=\"t('label_api_key')\" :colon=\"false\">\r\n          <a-input disabled :placeholder=\"t('ph_api_key_default')\"/>\r\n        </a-form-item>\r\n      </template>\r\n    </a-form>\r\n  </a-modal>\r\n</template>\r\n\r\n<script setup>\r\nimport {ref, reactive} from 'vue';\r\nimport {message} from 'ant-design-vue';\r\nimport AvatarInput from \"@/views/robot/robot-list/components/avatar-input.vue\";\r\nimport {saveMcpServer} from \"@/api/robot/mcp.js\";\r\nimport {DEFAULT_MCP_AVATAR} from \"@/constants/index.js\";\r\nimport {base64ToFile} from \"@/utils/index.js\";\r\nimport {useI18n} from '@/hooks/web/useI18n';\r\n\r\nconst { t } = useI18n('views.robot.robot-list.components.mcp-store');\r\n\r\nconst emit = defineEmits(['ok'])\r\n\r\nconst visible = ref(false)\r\nconst saving = ref(false)\r\nconst avatarData = ref(null)\r\nconst formStateStruct = {\r\n  avatar: DEFAULT_MCP_AVATAR,\r\n  name: '',\r\n  description: '',\r\n  server_id: '',\r\n}\r\nconst formState = reactive({})\r\n\r\nfunction show(info = null) {\r\n  Object.assign(formState, info || formStateStruct)\r\n  avatarData.value = null\r\n  visible.value = true\r\n}\r\n\r\nfunction avatarChange(data) {\r\n  avatarData.value = data\r\n}\r\n\r\nfunction save() {\r\n  try {\r\n    saving.value = true\r\n    formState.name = formState.name.trim()\r\n    formState.description = formState.description.trim()\r\n    if (!formState.name) throw t('msg_input_mcp_plugin_name')\r\n    if (!formState.description) throw t('msg_input_mcp_plugin_description')\r\n    let data = {...formState}\r\n    if (avatarData.value) data.avatar = avatarData.value?.file\r\n    saveMcpServer(data).then(res => {\r\n      emit('ok', formState)\r\n      message.success(t('msg_saved'))\r\n      visible.value = false\r\n    }).finally(() => {\r\n      saving.value = false\r\n    })\r\n  } catch (e) {\r\n    saving.value = false\r\n    message.error(e)\r\n  }\r\n}\r\n\r\ndefineExpose({\r\n  show,\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.avatar-box {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n\r\n  :deep(.ant-upload-select) {\r\n    width: 62px !important;\r\n    height: 62px !important;\r\n    border: none !important;\r\n    border-radius: 8px !important;\r\n    overflow: hidden;\r\n  }\r\n\r\n  .tip-info {\r\n    color: #8c8c8c;\r\n    font-size: 14px;\r\n    font-weight: 400;\r\n    margin-top: 8px;\r\n  }\r\n}\r\n\r\n.form-box {\r\n  margin-top: 24px;\r\n\r\n  :deep(.ant-form-item) {\r\n    margin-bottom: 12px;\r\n\r\n    .ant-row {\r\n      display: block;\r\n\r\n      .ant-form-item-control-input {\r\n        min-height: unset;\r\n      }\r\n    }\r\n  }\r\n\r\n  .tit-box {\r\n    color: #262626;\r\n    font-size: 14px;\r\n    font-weight: 600;\r\n    margin: 16px 0 8px;\r\n\r\n    .desc {\r\n      color: #595959;\r\n      font-weight: 400;\r\n      margin-left: 12px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <a-modal v-model:open=\"visible\" :title=\"t('title_associate_workflow')\" width=\"669px\" @ok=\"ok\">\r\n    <a-alert class=\"zm-alert-info mt24\" type=\"info\" :message=\"t('msg_workflow_identifier_hint')\" show-icon/>\r\n    <div class=\"data-list\">\r\n      <div\r\n        v-for=\"(item, i) in list\"\r\n        :key=\"i\"\r\n        :class=\"['data-item', {disabled: item.has_published != 1}]\"\r\n        @click=\"item.checked = !item.checked\"\r\n      >\r\n        <img class=\"avatar\" :src=\"item.robot_avatar\"/>\r\n        <div class=\"info\">\r\n          <div>\r\n            <div class=\"tit\">{{ item.robot_name }}</div>\r\n            <div class=\"desc\">{{ item.robot_intro }}</div>\r\n          </div>\r\n          <a-checkbox v-if=\"item.has_published == 1\" v-model:checked=\"item.checked\"/>\r\n          <span v-else class=\"status-tag waiting\"><ExclamationCircleFilled/> {{ t('status_unpublished') }}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </a-modal>\r\n</template>\r\n\r\n<script setup>\r\nimport {ref, reactive} from 'vue';\r\nimport {ExclamationCircleFilled} from '@ant-design/icons-vue';\r\nimport {getRobotList} from \"@/api/robot/index.js\";\r\nimport { useI18n } from '@/hooks/web/useI18n';\r\n\r\nconst { t } = useI18n('views.robot.robot-list.components.select-workflow-modal');\r\n\r\nconst emit = defineEmits(['ok'])\r\n\r\nconst visible = ref(false)\r\nconst list = ref([])\r\nconst selected = ref([])\r\n\r\nfunction show(ids = []) {\r\n  selected.value = ids\r\n  visible.value = true\r\n  loadData()\r\n}\r\n\r\nfunction loadData() {\r\n  getRobotList({application_type: 1}).then(res => {\r\n    list.value = res.data || []\r\n    list.value.forEach(item => {\r\n      item.checked = selected.value.includes(item.id)\r\n    })\r\n  })\r\n}\r\n\r\nfunction ok() {\r\n  visible.value = false\r\n  emit('ok', list.value.filter(i => i.checked).map(i => i.id), list)\r\n}\r\n\r\ndefineExpose({\r\n  show,\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.data-list {\r\n  max-height: 60vh;\r\n  overflow-y: auto;\r\n\r\n  .data-item {\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 24px 12px;\r\n    border-bottom: 1px solid #F0F0F0;\r\n    border-radius: 6px;\r\n    cursor: pointer;\r\n\r\n    &.disabled {\r\n      opacity: 0.4;\r\n      cursor: not-allowed;\r\n    }\r\n\r\n    &:hover {\r\n      background: #F2F4F7;\r\n    }\r\n\r\n    .avatar {\r\n      width: 48px;\r\n      height: 48px;\r\n      border-radius: 12px;\r\n      flex-shrink: 0;\r\n      margin-right: 12px;\r\n    }\r\n\r\n    .info {\r\n      flex: 1;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: space-between;\r\n      font-size: 14px;\r\n\r\n      .tit {\r\n        color: #262626;\r\n        font-weight: 600;\r\n      }\r\n\r\n      .desc {\r\n        color: #8c8c8c;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.mt24 {\r\n  margin-top: 24px;\r\n}\r\n\r\n.status-tag {\r\n  display: inline-block;\r\n  padding: 2px 6px;\r\n  align-items: center;\r\n  gap: 4px;\r\n  border-radius: 6px;\r\n  background: #CAFCE4;\r\n  white-space: nowrap;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n\r\n  &.finished {\r\n    background-color: #CAFCE4;\r\n    color: #21A665;\r\n  }\r\n\r\n  &.waiting {\r\n    background-color: #F0F0F0;\r\n    color: #595959;\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"_mcp-box\">\r\n    <div v-if=\"loading\" class=\"loading-box\">\r\n      <a-spin/>\r\n    </div>\r\n    <template v-else-if=\"appInfo.id > 0\">\r\n      <div class=\"base-info-box\">\r\n        <div class=\"app-info\">\r\n          <img class=\"avatar\" :src=\"appInfo.avatar\"/>\r\n          <div class=\"info-box\">\r\n            <div class=\"left-box\">\r\n              <div class=\"name\">\r\n                {{ appInfo.name }}\r\n                <span v-if=\"appInfo.status_bool\" class=\"status-tag finished\"><CheckCircleFilled/> {{ t('status_published') }}</span>\r\n                <span v-else class=\"status-tag waiting\"><ExclamationCircleFilled/> {{ t('status_unpublished') }}</span>\r\n              </div>\r\n              <div class=\"desc\">{{ appInfo.description }}</div>\r\n            </div>\r\n            <div class=\"right-box\">\r\n              <a-switch\r\n                  v-model:checked=\"appInfo.status_bool\"\r\n                  @change=\"statusChange\"\r\n                  :loading=\"statusLoading\"\r\n                  :checked-children=\"t('switch_on')\"\r\n                  :un-checked-children=\"t('switch_off')\"/>\r\n              <a-button @click=\"showWorkflowModal\" type=\"primary\" ghost :icon=\"h(PlusOutlined)\">{{ t('btn_add_workflow') }}</a-button>\r\n              <a-dropdown>\r\n                <a-button :icon=\"h(EllipsisOutlined)\"/>\r\n                <template #overlay>\r\n                  <a-menu>\r\n                    <a-menu-item @click=\"showMcpModal\">{{ t('btn_edit') }}</a-menu-item>\r\n                    <a-menu-item @click=\"delMcp\"><span class=\"cFB363F\">{{ t('btn_delete') }}</span></a-menu-item>\r\n                  </a-menu>\r\n                </template>\r\n              </a-dropdown>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"app-data\">\r\n          <template v-for=\"(item, i) in appData\" :key=\"i\">\r\n            <div class=\"data-item\">\r\n              <div class=\"title\">{{ t(item.title) }}</div>\r\n              <div class=\"value\">{{ item.value }}</div>\r\n            </div>\r\n            <a-divider type=\"vertical\" style=\"height: 24px;\"/>\r\n          </template>\r\n        </div>\r\n      </div>\r\n      <div class=\"tools-box\">\r\n        <div class=\"head-box\">\r\n          <AppstoreOutlined class=\"icon\"/>\r\n          {{ t('label_tools_list') }}（{{ tools.length || 0 }}）\r\n        </div>\r\n        <div v-if=\"tools.length\" class=\"tools-list\">\r\n          <div v-for=\"(item, i) in tools\" :key=\"i\" class=\"tools-item\">\r\n            <div class=\"left\">\r\n              <div class=\"tit\">{{ item.robot_name }}</div>\r\n              <div class=\"key\">{{ t('label_unique_identifier') }}：{{ item.name }}</div>\r\n              <div class=\"desc\">{{ item.robot_intro }}</div>\r\n              <div class=\"params\">\r\n                <a-tag\r\n                    v-for=\"(field, j) in item.params.slice(0, 5)\"\r\n                    :key=\"j\"\r\n                    :bordered=\"false\">{{ field.key }}\r\n                </a-tag>\r\n                <a-popover placement=\"right\">\r\n                  <template #content>\r\n                    <div class=\"params-box\">\r\n                      <div v-for=\"(field, j) in item.params\" :key=\"j\" class=\"param-item\">\r\n                        <div class=\"field\">\r\n                          <span class=\"name\">{{ field.key }}</span>\r\n                          <span class=\"type\">{{ field.typ }}</span>\r\n                          <span v-if=\"field.required\" class=\"required\">{{ t('label_required') }}</span>\r\n                        </div>\r\n                        <div class=\"desc\">{{ field.desc }}</div>\r\n                      </div>\r\n                    </div>\r\n                  </template>\r\n                  <a>{{ t('label_params') }}</a>\r\n                </a-popover>\r\n              </div>\r\n            </div>\r\n            <a-dropdown>\r\n              <a-button size=\"small\" :icon=\"h(EllipsisOutlined)\"/>\r\n              <template #overlay>\r\n                <a-menu>\r\n                  <a-menu-item @click=\"showIdentModal(item)\">{{ t('btn_edit_identifier') }}</a-menu-item>\r\n                  <a-menu-item @click=\"delTool(item)\"><span class=\"cFB363F\">{{ t('btn_delete') }}</span></a-menu-item>\r\n                </a-menu>\r\n              </template>\r\n            </a-dropdown>\r\n          </div>\r\n        </div>\r\n        <div v-else class=\"empty-box\">\r\n          <img src=\"@/assets/empty.png\"/>\r\n          <div class=\"title\">{{ t('msg_no_workflow_bound') }}</div>\r\n          <a-button @click=\"showWorkflowModal\" class=\"btn\" type=\"primary\">{{ t('btn_bind_now') }}</a-button>\r\n        </div>\r\n      </div>\r\n    </template>\r\n    <div v-else class=\"empty-box\">\r\n      <img src=\"@/assets/empty.png\"/>\r\n      <div class=\"title\">{{ t('msg_no_mcp_added') }}</div>\r\n      <a-button @click=\"showMcpModal\" class=\"btn\" type=\"primary\">{{ t('btn_add_now') }}</a-button>\r\n    </div>\r\n\r\n    <McpStore ref=\"mcpRef\" @ok=\"loadData\"/>\r\n    <SelectWorkflowModal ref=\"workflowRef\" @ok=\"saveTools\"/>\r\n    <a-modal\r\n        v-model:open=\"identVisible\"\r\n        :confirm-loading=\"identSaving\"\r\n        :title=\"t('title_edit_identifier')\"\r\n        @ok=\"saveIdent\">\r\n      <div>{{ t('label_identifier') }}</div>\r\n      <div class=\"mt4\">\r\n        <a-input v-model:value=\"identValue\" @input=\"identInput\" :placeholder=\"t('ph_input_identifier')\" :maxlength=\"32\"/>\r\n      </div>\r\n    </a-modal>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport {h, ref, onMounted} from 'vue';\r\nimport {message, Modal} from 'ant-design-vue'\r\nimport {\r\n  PlusOutlined,\r\n  CheckCircleFilled,\r\n  EllipsisOutlined,\r\n  AppstoreOutlined,\r\n  ExclamationCircleFilled\r\n} from '@ant-design/icons-vue';\r\nimport McpStore from \"@/views/robot/robot-list/components/mcp-store.vue\";\r\nimport SelectWorkflowModal from \"@/views/robot/robot-list/components/select-workflow-modal.vue\";\r\nimport {\r\n  saveMcpTool,\r\n  delMcpTool,\r\n  editMcpTool,\r\n  getMcpServers,\r\n  updateMcpSrvStatus,\r\n  delMcpServer\r\n} from \"@/api/robot/mcp.js\";\r\nimport {jsonDecode} from \"@/utils/index.js\";\r\nimport { useI18n } from '@/hooks/web/useI18n';\r\n\r\nconst { t } = useI18n('views.robot.robot-list.components.mcp-box');\r\n\r\nconst mcpRef = ref(null)\r\nconst workflowRef = ref(null)\r\nconst loading = ref(true)\r\nconst statusLoading = ref(false)\r\nconst appInfo = ref(null)\r\nconst appData = ref([])\r\nconst tools = ref([])\r\nconst identVisible = ref(false)\r\nconst identSaving = ref(false)\r\nconst identValue = ref('')\r\nconst identRecord = ref(null)\r\n\r\nonMounted(() => {\r\n  init()\r\n})\r\n\r\nfunction init() {\r\n  loading.value = true\r\n  loadData()\r\n}\r\n\r\nfunction loadData() {\r\n  getMcpServers().then(res => {\r\n    appInfo.value = res?.data?.info || {}\r\n    tools.value = res?.data?.tool_list || {}\r\n\r\n    appInfo.value.status_bool = (appInfo.value?.publish_status == 1)\r\n    tools.value.forEach(item => {\r\n      item.params = jsonDecode(item.params, [])\r\n    })\r\n    appDataFormat()\r\n  }).finally(() => {\r\n    loading.value = false\r\n  })\r\n}\r\n\r\nfunction statusChange() {\r\n  const cancel = () => {\r\n    appInfo.value.status_bool = !appInfo.value.status_bool\r\n  }\r\n  const ok = () => {\r\n    statusLoading.value = true\r\n    updateMcpSrvStatus({\r\n      server_id: appInfo.value.id,\r\n      publish_status: Number(appInfo.value.status_bool)\r\n    }).then(res => {\r\n      message.success(t('msg_operation_completed'))\r\n    }).finally(() => {\r\n      statusLoading.value = false\r\n    }).catch(() => {\r\n      cancel()\r\n    })\r\n  }\r\n  if (!appInfo.value.status_bool) {\r\n    Modal.confirm({\r\n      title: t('title_confirm_close_mcp'),\r\n      content: t('msg_close_mcp_warning'),\r\n      okText: t('btn_confirm'),\r\n      cancelText: t('btn_cancel'),\r\n      onOk: () => ok(),\r\n      onCancel: () =>  cancel()\r\n    })\r\n  } else {\r\n    ok()\r\n  }\r\n}\r\n\r\nfunction appDataFormat() {\r\n  appData.value = [\r\n    {\r\n      title: 'label_url',\r\n      value: `${window.location.origin}/mcp`\r\n    },\r\n    {\r\n      title: 'label_request_method',\r\n      value: 'POST'\r\n    },\r\n    {\r\n      title: 'label_auth_method',\r\n      value: 'Service token / API key'\r\n    },\r\n    {\r\n      title: 'label_request_param_name',\r\n      value: 'Authorization'\r\n    },\r\n    {\r\n      title: 'label_api_key',\r\n      value: `Bearer ${appInfo.value?.api_key}`\r\n    },\r\n  ]\r\n}\r\n\r\nfunction showMcpModal() {\r\n  let _info = null\r\n  if (appInfo.value?.id > 0) {\r\n    _info = {\r\n      avatar: appInfo.value.avatar,\r\n      name: appInfo.value.name,\r\n      description: appInfo.value.description,\r\n      server_id: appInfo.value.id,\r\n    }\r\n  }\r\n  mcpRef.value.show(_info)\r\n}\r\n\r\nfunction delMcp() {\r\n  Modal.confirm({\r\n    title: t('title_confirm_delete_mcp'),\r\n    content: t('msg_delete_mcp_warning'),\r\n    okText: t('btn_confirm'),\r\n    cancelText: t('btn_cancel'),\r\n    onOk: () => {\r\n      delMcpServer({server_id: appInfo.value.id}).then(() => {\r\n        message.success(t('msg_deleted'))\r\n        loadData()\r\n      })\r\n    }\r\n  })\r\n}\r\n\r\nfunction showWorkflowModal() {\r\n  workflowRef.value.show(tools.value.map(i => i.robot_id))\r\n}\r\n\r\nfunction showIdentModal(item) {\r\n  identRecord.value = item\r\n  identValue.value = item.name\r\n  identVisible.value = true\r\n}\r\n\r\nconst identInput = e => {\r\n  e.target.value = e.target.value.replace(/[^a-zA-Z0-9_]/g, '')\r\n  identValue.value = e.target.value\r\n}\r\n\r\nfunction saveIdent() {\r\n  if (!identValue.value) return message.warning(t('msg_input_identifier_warning'))\r\n  identSaving.value = true\r\n  editMcpTool({\r\n    tool_id: identRecord.value.id,\r\n    name: identValue.value,\r\n  }).then(res => {\r\n    identRecord.value.name = identValue.value\r\n    identVisible.value = false\r\n    message.success(t('msg_saved'))\r\n  }).finally(() => {\r\n    identSaving.value = false\r\n  })\r\n}\r\n\r\nfunction delTool(item) {\r\n  Modal.confirm({\r\n    title: t('title_confirm_delete_tool'),\r\n    okText: t('btn_confirm'),\r\n    cancelText: t('btn_cancel'),\r\n    onOk: () => {\r\n      delMcpTool({tool_id: item.id}).then(() => {\r\n        message.success(t('msg_deleted'))\r\n        loadData()\r\n      })\r\n    }\r\n  })\r\n}\r\n\r\nfunction saveTools(ids) {\r\n  saveMcpTool({\r\n    server_id: appInfo.value.id,\r\n    robot_id: ids.toString()\r\n  }).then(res => {\r\n    loadData()\r\n    message.success(t('msg_saved'))\r\n  })\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n._mcp-box {\r\n  padding-right: 32px;\r\n\r\n  .loading-box {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    padding: 10vh 20vw;\r\n  }\r\n\r\n  .base-info-box {\r\n    padding: 24px;\r\n    border-radius: 6px;\r\n    border: 1px solid transparent; /* 必须透明 */\r\n    background: linear-gradient(#fff, #fff) padding-box, linear-gradient(90deg, #70D9FF, #3C01FF, #ECB3FF) border-box;\r\n\r\n    .app-info {\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: space-between;\r\n\r\n      .avatar {\r\n        width: 62px;\r\n        height: 62px;\r\n        border-radius: 14.59px;\r\n        flex-shrink: 0;\r\n        margin-right: 12px;\r\n      }\r\n\r\n      .info-box {\r\n        flex: 1;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: space-between;\r\n\r\n        .right-box {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 12px;\r\n        }\r\n\r\n        .name {\r\n          color: #262626;\r\n          font-size: 16px;\r\n          font-weight: 600;\r\n        }\r\n\r\n        .desc {\r\n          color: #8c8c8c;\r\n          font-size: 14px;\r\n          font-weight: 400;\r\n          margin-top: 4px;\r\n        }\r\n      }\r\n    }\r\n\r\n    .app-data {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 16px;\r\n      margin-top: 16px;\r\n      color: #595959;\r\n      font-size: 14px;\r\n      font-weight: 400;\r\n\r\n      .title {\r\n        color: #8c8c8c;\r\n        font-size: 12px;\r\n      }\r\n    }\r\n  }\r\n\r\n  .tools-box {\r\n    margin-top: 24px;\r\n\r\n    .head-box {\r\n      color: #262626;\r\n      font-size: 14px;\r\n      font-weight: 600;\r\n    }\r\n\r\n    .tools-list {\r\n      margin-top: 16px;\r\n      display: flex;\r\n      flex-wrap: wrap;\r\n      gap: 16px;\r\n\r\n      .tools-item {\r\n        flex: 0 0 calc((100% - 16px) / 2);\r\n        padding: 24px;\r\n        border-radius: 12px;\r\n        border: 1px solid #E4E6EB;\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: flex-end;\r\n        gap: 8px;\r\n\r\n        .tit {\r\n          color: #262626;\r\n          font-size: 14px;\r\n          font-weight: 600;\r\n        }\r\n\r\n        .key {\r\n          color: #8c8c8c;\r\n          font-size: 12px;\r\n          font-weight: 400;\r\n        }\r\n\r\n        .desc {\r\n          color: #595959;\r\n          font-size: 14px;\r\n          font-weight: 400;\r\n          margin-top: 8px;\r\n        }\r\n\r\n        .params {\r\n          margin-top: 8px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.status-tag {\r\n  display: inline-block;\r\n  padding: 2px 6px;\r\n  align-items: center;\r\n  gap: 4px;\r\n  border-radius: 6px;\r\n  background: #CAFCE4;\r\n  white-space: nowrap;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n\r\n  &.finished {\r\n    background-color: #CAFCE4;\r\n    color: #21A665;\r\n  }\r\n\r\n  &.waiting {\r\n    background-color: #F0F0F0;\r\n    color: #595959;\r\n  }\r\n}\r\n\r\n.params-box {\r\n  max-height: 80vh;\r\n  overflow-y: auto;\r\n\r\n  .param-item {\r\n    max-width: 500px;\r\n\r\n    &:not(:last-child) {\r\n      margin-bottom: 16px;\r\n    }\r\n\r\n    .field {\r\n      color: #262626;\r\n      font-size: 14px;\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 12px;\r\n\r\n      .name {\r\n        font-weight: 600;\r\n      }\r\n\r\n      .type {\r\n        color: #595959;\r\n      }\r\n\r\n      .required {\r\n        color: #ED744A;\r\n        font-weight: 500;\r\n      }\r\n    }\r\n\r\n    .desc {\r\n      color: #8c8c8c;\r\n      font-size: 14px;\r\n      margin-top: 4px;\r\n    }\r\n  }\r\n}\r\n\r\n\r\n.empty-box {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  margin: 40px 0;\r\n\r\n  img {\r\n    width: 200px;\r\n    height: 200px;\r\n  }\r\n\r\n  .title {\r\n    color: #262626;\r\n    font-size: 16px;\r\n    font-weight: 600;\r\n    line-height: 24px;\r\n  }\r\n\r\n  .btn {\r\n    margin-top: 24px;\r\n  }\r\n}\r\n\r\n.cFB363F {\r\n  color: #FB363F;\r\n}\r\n\r\n.mt4 {\r\n  margin-top: 4px;\r\n}\r\n</style>\r\n","<template>\r\n  <a-drawer\r\n    v-model:open=\"open\"\r\n    placement=\"right\"\r\n    width=\"400px\"\r\n    :headerStyle=\"{display: 'none'}\"\r\n    :bodyStyle=\"{padding: 0}\"\r\n  >\r\n    <div v-if=\"checking\" class=\"checking-box\">\r\n      <div class=\"cont\">\r\n        <a-spin/>\r\n        {{ t('msg_checking') }}\r\n      </div>\r\n    </div>\r\n    <div class=\"head-box\">\r\n      <div class=\"base-info-box\">\r\n        <img class=\"avatar\" :src=\"detail.avatar\"/>\r\n        <div class=\"info-box\">\r\n          <div class=\"left\">\r\n            <div class=\"name zm-line1\">{{ detail.name }}</div>\r\n            <div>\r\n              <div v-if=\"detail.has_auth == 1\" class=\"auth-tag\">{{ t('label_authorized') }}</div>\r\n              <div v-else class=\"auth-tag fail\">{{ t('label_unauthorized') }}</div>\r\n            </div>\r\n          </div>\r\n          <div class=\"right\">\r\n            <a-dropdown>\r\n              <EllipsisOutlined class=\"icon\"/>\r\n              <template #overlay>\r\n                <a-menu>\r\n                  <a-menu-item @click.stop=\"editApp\">{{ t('btn_edit') }}</a-menu-item>\r\n                  <a-menu-item @click.stop=\"delApp\"><span class=\"cFB363F\">{{ t('btn_delete') }}</span></a-menu-item>\r\n                </a-menu>\r\n              </template>\r\n            </a-dropdown>\r\n            <CloseOutlined @click=\"open = false\" class=\"icon\"/>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"link\">{{ detail.description }}</div>\r\n      <div class=\"link\">{{ detail.url }}</div>\r\n      <a-button v-if=\"detail.has_auth == 1\" class=\"auth-btn\" @click=\"authConfig(2)\">{{ t('btn_reauthorize') }}</a-button>\r\n      <a-button v-else type=\"primary\" class=\"auth-btn\" @click=\"authConfig(1)\">{{ t('btn_authorize') }}</a-button>\r\n    </div>\r\n    <div class=\"body-box\">\r\n      <div v-if=\"detail.has_auth != 1\" class=\"no-auth-box\">\r\n        <img src=\"@/assets/no-permission.png\"/>\r\n        <div class=\"tit\">{{ t('title_need_auth') }}</div>\r\n        <div class=\"desc\">{{ t('msg_need_auth_desc') }}</div>\r\n        <a class=\"link\" @click=\"authConfig(1)\">{{ t('btn_authorize_now') }}</a>\r\n      </div>\r\n      <template v-else>\r\n        <div class=\"main-tit\">\r\n          <span>{{ t('msg_available_tools', { count: detail.tools.length }) }}</span>\r\n          <div class=\"extra-box\">\r\n            <div class=\"update-time\">{{ t('msg_updated', { time: detail.up_time_text }) }}</div>\r\n            <a class=\"refresh-btn\" @click=\"refresh(true)\">\r\n              <SyncOutlined :spin=\"refreshing\"/> {{ t('btn_refresh') }}\r\n            </a>\r\n          </div>\r\n        </div>\r\n        <div class=\"tools-box\">\r\n          <div v-for=\"(tool, i) in detail.tools\" :key=\"i\" class=\"tool-item\">\r\n            <img class=\"cover\" src=\"@/assets/img/robot/tool-icon.svg\"/>\r\n            <div class=\"info\">\r\n              <div class=\"tit\">{{ tool.name }}</div>\r\n              <div class=\"desc\">{{ tool.description}}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </template>\r\n    </div>\r\n  </a-drawer>\r\n</template>\r\n\r\n<script setup>\r\nimport {ref} from 'vue';\r\nimport {EllipsisOutlined, CloseOutlined, SyncOutlined} from '@ant-design/icons-vue';\r\nimport {message, Modal} from 'ant-design-vue';\r\nimport {authTMcpProvider, getTMcpProviderInfo} from \"@/api/robot/thirdMcp\";\r\nimport {jsonDecode, timeNowGapFormat} from \"@/utils/index.js\";\r\nimport {setShowReqError} from \"@/utils/http/axios/config.js\";\r\nimport {useI18n} from \"@/hooks/web/useI18n\";\r\n\r\nconst {t} = useI18n('views.robot.robot-list.components.third-mcp-detail');\r\n\r\nconst emit = defineEmits(['del', 'edit', 'auth'])\r\n\r\nconst open = ref(false)\r\nconst checking = ref(false)\r\nconst refreshing = ref(false)\r\nconst detail = ref({})\r\n\r\nfunction show(info) {\r\n  detail.value = info\r\n  open.value = true\r\n}\r\n\r\nfunction hide() {\r\n  open.value = false\r\n}\r\n\r\nfunction authConfig(type) {\r\n  const auth = () => {\r\n    checking.value = true\r\n    setShowReqError(false)\r\n    authTMcpProvider({provider_id: detail.value.id}).then(res => {\r\n      setTimeout(() => {\r\n        checking.value = false\r\n        detail.value.has_auth = 1\r\n        refresh()\r\n        message.success(t('msg_verify_success'))\r\n      }, 2000)\r\n    }).catch(err => {\r\n      detail.value.has_auth = 0\r\n      message.warning(t('msg_auth_failed', { error: err.message }))\r\n      checking.value = false\r\n    }).finally(() => {\r\n      emit('auth', detail.value.has_auth)\r\n      setTimeout(() => {\r\n        setShowReqError(true)\r\n      }, 500)\r\n    })\r\n  }\r\n  if (type == 2) {\r\n    Modal.confirm({\r\n      title: t('title_confirm'),\r\n      content: t('msg_reauth_confirm'),\r\n      onOk: () => {\r\n        auth()\r\n      }\r\n    })\r\n  } else {\r\n    auth()\r\n  }\r\n}\r\n\r\nfunction editApp() {\r\n  emit('edit', detail.value)\r\n}\r\n\r\nfunction delApp() {\r\n  emit('del', detail.value)\r\n}\r\n\r\nfunction refresh(needAuth=false) {\r\n  const func = () => {\r\n    getTMcpProviderInfo({provider_id: detail.value.id}).then(res => {\r\n      let info = res?.data || {}\r\n      info.tools = jsonDecode(info.tools, [])\r\n      info.up_time_text = timeNowGapFormat(info.update_time)\r\n      detail.value = info\r\n      needAuth && message.success(t('msg_refresh_complete'))\r\n    }).finally(() => {\r\n      refreshing.value = false\r\n    })\r\n  }\r\n  if (needAuth) {\r\n    if (refreshing.value) return\r\n    Modal.confirm({\r\n      title: t('title_confirm'),\r\n      content: t('msg_refresh_confirm'),\r\n      onOk: () => {\r\n        refreshing.value = true\r\n        setShowReqError(false)\r\n        authTMcpProvider({provider_id: detail.value.id}).then(res => {\r\n          detail.value.has_auth = 1\r\n          func()\r\n        }).catch(err => {\r\n          detail.value.has_auth = 0\r\n          message.warning(t('msg_verify_auth_failed', { error: err.message }))\r\n          refreshing.value = false\r\n        }).finally(() => {\r\n          emit('auth', detail.value.has_auth)\r\n          setShowReqError(true)\r\n        })\r\n      }\r\n    })\r\n  } else {\r\n    func()\r\n  }\r\n}\r\n\r\ndefineExpose({\r\n  show,\r\n  hide,\r\n  refresh,\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.checking-box {\r\n  width: 100%;\r\n  height: 100%;\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 99;\r\n\r\n  .cont {\r\n    padding: 40px 80px;\r\n    border-radius: 6px;\r\n    background: #FFF;\r\n    box-shadow: 0 4px 16px 0 #1b3a6929;\r\n    display: flex;\r\n    gap: 8px;\r\n    font-size: 16px;\r\n    font-weight: 500;\r\n  }\r\n}\r\n\r\n.head-box {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12px;\r\n  color: #595959;\r\n  font-size: 14px;\r\n  font-weight: 400;\r\n  border-bottom: 1px solid #E4E6EB;\r\n  padding: 24px;\r\n\r\n  .base-info-box {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n\r\n    .avatar {\r\n      width: 62px;\r\n      height: 62px;\r\n      border-radius: 14.59px;\r\n      flex-shrink: 0;\r\n      margin-right: 12px;\r\n    }\r\n\r\n    .info-box {\r\n      flex: 1;\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: flex-start;\r\n\r\n      .left {\r\n        max-width: 70%;\r\n      }\r\n\r\n      .right {\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 12px;\r\n      }\r\n\r\n      .icon {\r\n        cursor: pointer;\r\n      }\r\n\r\n      .name {\r\n        color: #262626;\r\n        font-size: 16px;\r\n        font-weight: 600;\r\n        margin-bottom: 4px;\r\n      }\r\n    }\r\n  }\r\n\r\n  .link {\r\n    word-break: break-all;\r\n  }\r\n\r\n  .auth-btn {\r\n    width: 100%;\r\n  }\r\n}\r\n\r\n.body-box {\r\n  padding: 24px;\r\n\r\n  .main-tit {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    color: #262626;\r\n    font-size: 14px;\r\n    font-weight: 600;\r\n\r\n    .extra-box {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 12px;\r\n    }\r\n\r\n    .update-time {\r\n      color: #8c8c8c;\r\n      font-size: 12px;\r\n      font-weight: 400;\r\n    }\r\n\r\n    .refresh-btn {\r\n      font-weight: 400;\r\n    }\r\n  }\r\n\r\n  .tools-box {\r\n    .tool-item {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      gap: 12px;\r\n      margin-top: 16px;\r\n\r\n      .cover {\r\n        width: 32px;\r\n        height: 32px;\r\n        border-radius: 6px;\r\n        flex-shrink: 0;\r\n      }\r\n\r\n      .info {\r\n        flex: 1;\r\n\r\n        .tit {\r\n          color: #000000;\r\n          font-weight: 400;\r\n        }\r\n\r\n        .desc {\r\n          color: #8c8c8c;\r\n          font-size: 12px;\r\n          font-weight: 400;\r\n          margin-top: 4px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.auth-tag {\r\n  display: inline-block;\r\n  padding: 1px 8px;\r\n  border-radius: 6px;\r\n  background: #C4F5DB;\r\n  color: #17814e;\r\n  font-size: 12px;\r\n  font-weight: 400;\r\n\r\n  &.fail {\r\n    color: #ED744A;\r\n    background: #FFECE6;\r\n  }\r\n}\r\n\r\n.no-auth-box {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n\r\n  img {\r\n    width: 200px;\r\n    height: 200px\r\n  }\r\n\r\n  .tit {\r\n    color: #262626;\r\n    font-size: 16px;\r\n    font-weight: 600;\r\n  }\r\n\r\n  .desc {\r\n    color: #8c8c8c;\r\n    font-size: 14px;\r\n    font-weight: 400;\r\n    margin: 8px 0 12px;\r\n  }\r\n}\r\n\r\n.cFB363F {\r\n  color: #FB363F;\r\n}\r\n</style>\r\n","<template>\r\n  <a-modal\r\n    v-model:open=\"visible\"\r\n    :zIndex=\"1002\"\r\n    :title=\"formState.provider_id ? t('title_edit_mcp') : t('title_add_mcp')\"\r\n    width=\"472px\"\r\n    :confirm-loading=\"saving\"\r\n    @ok=\"save\">\r\n    <div v-if=\"checking\" class=\"checking-box\">\r\n      <div class=\"cont\">\r\n        <a-spin/>\r\n        {{ t('msg_checking') }}\r\n      </div>\r\n    </div>\r\n    <div class=\"avatar-box\">\r\n      <AvatarInput v-model:value=\"formState.avatar\" @change=\"avatarChange\"/>\r\n      <div class=\"tip-info\">{{ t('tip_avatar') }}</div>\r\n    </div>\r\n    <a-form class=\"form-box\" labelAlign=\"left\">\r\n      <a-form-item :label=\"t('label_mcp_plugin_name')\" required :colon=\"false\">\r\n        <a-input v-model:value=\"formState.name\" :placeholder=\"t('ph_mcp_plugin_name')\" :maxlength=\"20\"/>\r\n      </a-form-item>\r\n      <a-form-item :label=\"t('label_description')\" :colon=\"false\">\r\n        <a-textarea\r\n          v-model:value=\"formState.description\"\r\n          :auto-size=\"{ minRows: 2, maxRows: 5 }\"\r\n          :placeholder=\"t('ph_description')\"\r\n          :maxlength=\"120\"\r\n        />\r\n      </a-form-item>\r\n      <div class=\"tit-box\">{{ t('title_config_info') }}</div>\r\n      <a-form-item :label=\"t('label_plugin_url')\" :colon=\"false\">\r\n        <a-input v-model:value=\"formState.url\" :placeholder=\"t('ph_plugin_url')\"/>\r\n        <div v-if=\"formState.provider_id\" class=\"cFB363F\">{{ t('msg_url_warning') }}</div>\r\n      </a-form-item>\r\n      <a-form-item :label=\"t('label_timeout')\" :colon=\"false\">\r\n        <a-input-number v-model:value=\"formState.request_timeout\" :precision=\"0\" style=\"width: 100%;\"\r\n                        :placeholder=\"t('ph_timeout')\"/>\r\n      </a-form-item>\r\n      <a-form-item :label=\"t('label_headers')\" :colon=\"false\">\r\n        <div class=\"tip-info\">{{ t('tip_headers') }}</div>\r\n        <div class=\"req-head-box\">\r\n          <div class=\"req-head-item\">\r\n            <div class=\"tit\">{{ t('label_header_name') }}</div>\r\n            <div class=\"tit\">{{ t('label_header_value') }}</div>\r\n          </div>\r\n          <div v-for=\"(item, i) in formState.headers\" :key=\"i\" class=\"req-head-item\">\r\n            <a-input v-model:value=\"item.key\" :placeholder=\"t('ph_input')\"/>\r\n            <a-input v-model:value=\"item.value\" :placeholder=\"t('ph_input')\"/>\r\n            <CloseCircleOutlined @click=\"delHeader(i)\"/>\r\n          </div>\r\n          <a-button class=\"add-btn\" type=\"dashed\" :icon=\"h(PlusOutlined)\" @click=\"addHeader\">{{ t('btn_add_header') }}</a-button>\r\n        </div>\r\n      </a-form-item>\r\n    </a-form>\r\n  </a-modal>\r\n</template>\r\n\r\n<script setup>\r\nimport {ref, reactive, h} from 'vue';\r\nimport {message} from 'ant-design-vue';\r\nimport {CloseCircleOutlined, PlusOutlined} from '@ant-design/icons-vue';\r\nimport AvatarInput from \"@/views/robot/robot-list/components/avatar-input.vue\";\r\nimport {DEFAULT_MCP_AVATAR} from \"@/constants/index.js\";\r\nimport {authTMcpProvider, saveTMcpProvider} from \"@/api/robot/thirdMcp.js\";\r\nimport {setShowReqError} from \"@/utils/http/axios/config.js\";\r\nimport {useI18n} from '@/hooks/web/useI18n';\r\n\r\nconst {t} = useI18n('views.robot.robot-list.components.third-mcp-store');\r\n\r\nconst emit = defineEmits(['ok'])\r\n\r\nconst providerId = ref(0)\r\nconst visible = ref(false)\r\nconst checking = ref(false)\r\nconst saving = ref(false)\r\nconst avatarData = ref(null)\r\nconst authDataBack = ref('')\r\nconst formStateStruct = {\r\n  avatar: DEFAULT_MCP_AVATAR,\r\n  name: '',\r\n  description: '',\r\n  provider_id: '',\r\n  url: '',\r\n  request_timeout: '30',\r\n  headers: []\r\n}\r\nconst formState = reactive({})\r\n\r\nfunction show(info = null) {\r\n  Object.assign(formState, info || formStateStruct)\r\n  avatarData.value = null\r\n  formState.headers = []\r\n  if (info) {\r\n    providerId.value = info.id\r\n    formState.provider_id = info.id\r\n    let headers = JSON.parse(info.headers)\r\n    for (let key in headers) {\r\n      formState.headers.push({key, value: headers[key]})\r\n    }\r\n  }\r\n  authDataBack.value = JSON.stringify({headers: formState.headers, url: formState.url})\r\n  visible.value = true\r\n}\r\n\r\nfunction avatarChange(data) {\r\n  avatarData.value = data\r\n}\r\n\r\nfunction addHeader() {\r\n  formState.headers.push({\r\n    key: '',\r\n    value: ''\r\n  })\r\n}\r\n\r\nfunction delHeader(index) {\r\n  formState.headers.splice(index, 1)\r\n}\r\n\r\nfunction hasAuthDataChange() {\r\n  return authDataBack.value != JSON.stringify({headers: formState.headers, url: formState.url})\r\n}\r\n\r\nfunction authConfig() {\r\n  const hide = message.loading(t('msg_saving_auth'), 0)\r\n  checking.value = true\r\n  setTimeout(() => {\r\n    setShowReqError(false)\r\n    authTMcpProvider({provider_id: providerId.value}).then(res => {\r\n      message.success(t('msg_auth_success'))\r\n    }).catch(err => {\r\n      message.warning(t('msg_auth_failed') + err.message)\r\n    }).finally(() => {\r\n      hide()\r\n      checking.value = false\r\n      visible.value = false\r\n      emit('ok', formState)\r\n      setTimeout(() => {\r\n        setShowReqError(true)\r\n      }, 500)\r\n    })\r\n  }, 1800)\r\n}\r\n\r\nfunction save() {\r\n  try {\r\n    saving.value = true\r\n    formState.name = formState.name.trim()\r\n    formState.description = formState.description.trim()\r\n    if (!formState.name) throw t('err_plugin_name_required')\r\n    if (!formState.description) throw t('err_plugin_desc_required')\r\n    if (!formState.url) throw t('err_url_required')\r\n    if (!formState.request_timeout) throw t('err_timeout_required')\r\n    let data = {...formState}\r\n    if (avatarData.value) data.avatar = avatarData.value?.file\r\n    data.headers = {}\r\n    for (let item of formState.headers) {\r\n      item.key = item.key.trim()\r\n      item.value = item.value.trim()\r\n      if (item.key && item.value) {\r\n        data.headers[item.key] = item.value\r\n      }\r\n    }\r\n    data.headers = JSON.stringify(data.headers)\r\n    delete data.toools\r\n    saveTMcpProvider(data).then(res => {\r\n      let {provider_id} = res?.data || {}\r\n      providerId.value = provider_id\r\n      if (hasAuthDataChange()) {\r\n        authConfig()\r\n      } else {\r\n        emit('ok', formState)\r\n        message.success(t('msg_saved'))\r\n        visible.value = false\r\n      }\r\n    }).finally(() => {\r\n      saving.value = false\r\n    })\r\n  } catch (e) {\r\n    saving.value = false\r\n    message.error(e)\r\n  }\r\n}\r\n\r\ndefineExpose({\r\n  show,\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.checking-box {\r\n  width: 100%;\r\n  height: 100%;\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 99;\r\n\r\n  .cont {\r\n    padding: 40px 80px;\r\n    border-radius: 6px;\r\n    background: #FFF;\r\n    box-shadow: 0 4px 16px 0 #1b3a6929;\r\n    display: flex;\r\n    gap: 8px;\r\n    font-size: 16px;\r\n    font-weight: 500;\r\n  }\r\n}\r\n\r\n.avatar-box {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n\r\n  :deep(.ant-upload-select) {\r\n    width: 62px !important;\r\n    height: 62px !important;\r\n    border: none !important;\r\n    border-radius: 8px !important;\r\n    overflow: hidden;\r\n  }\r\n\r\n  .tip-info {\r\n    color: #8c8c8c;\r\n    font-size: 14px;\r\n    font-weight: 400;\r\n    margin-top: 8px;\r\n  }\r\n}\r\n\r\n.form-box {\r\n  margin-top: 24px;\r\n\r\n  :deep(.ant-form-item) {\r\n    margin-bottom: 12px;\r\n\r\n    .ant-row {\r\n      display: block;\r\n\r\n      .ant-form-item-control-input {\r\n        min-height: unset;\r\n      }\r\n    }\r\n  }\r\n\r\n  .tit-box {\r\n    color: #262626;\r\n    font-size: 14px;\r\n    font-weight: 600;\r\n    margin: 16px 0 8px;\r\n\r\n    .desc {\r\n      color: #595959;\r\n      font-weight: 400;\r\n      margin-left: 12px;\r\n    }\r\n  }\r\n\r\n  .tip-info {\r\n    color: #8c8c8c;\r\n    font-size: 14px;\r\n    font-weight: 400;\r\n  }\r\n\r\n  .req-head-box {\r\n    color: #595959;\r\n    font-size: 14px;\r\n    font-weight: 400;\r\n    margin-top: 8px;\r\n\r\n    .req-head-item {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 8px;\r\n      margin-bottom: 8px;\r\n\r\n      &:first-child {\r\n        margin-top: 4px;\r\n      }\r\n\r\n      .tit {\r\n        width: 198px;\r\n      }\r\n    }\r\n\r\n    .add-btn {\r\n      width: 100%;\r\n    }\r\n  }\r\n}\r\n\r\n.cFB363F {\r\n  color: #FB363F;\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"_mcp-box\">\r\n    <div v-if=\"loading\" class=\"loading-box\">\r\n      <a-spin/>\r\n    </div>\r\n    <div v-else-if=\"list.length\" class=\"list-box\">\r\n      <div\r\n        v-for=\"(item, i) in list\"\r\n        @click=\"showDetail(item)\"\r\n        :key=\"i\"\r\n        class=\"app-item\"\r\n      >\r\n        <div class=\"base-info-box\">\r\n          <img class=\"avatar\" :src=\"item.avatar\"/>\r\n          <div class=\"info-box\">\r\n            <div class=\"name zm-line1\">{{ item.name }}</div>\r\n            <div>\r\n              <div v-if=\"item.has_auth == 1\" class=\"auth-tag\">{{ t('tag_authorized') }}</div>\r\n              <div v-else class=\"auth-tag fail\">{{ t('tag_unauthorized') }}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"zm-line1\">{{ item.url }}</div>\r\n        <div class=\"bottom\">\r\n          <div class=\"extra-box\">\r\n            <div class=\"extra-item\">{{ t('label_available_tools') }}{{ item.tools.length }}</div>\r\n            <div class=\"extra-item\">{{ item.up_time_text }} {{ t('label_updated') }}</div>\r\n          </div>\r\n          <a-dropdown>\r\n            <a-button @click.stop size=\"small\" :icon=\"h(EllipsisOutlined)\"/>\r\n            <template #overlay>\r\n              <a-menu>\r\n                <a-menu-item @click.stop=\"editApp(item)\">{{ t('btn_edit') }}</a-menu-item>\r\n                <a-menu-item @click.stop=\"delApp(item)\"><span class=\"cFB363F\">{{ t('btn_delete') }}</span></a-menu-item>\r\n              </a-menu>\r\n            </template>\r\n          </a-dropdown>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div v-else class=\"empty-box\">\r\n      <img src=\"@/assets/empty.png\"/>\r\n      <div class=\"title\">{{ t('title_no_mcp_added') }}</div>\r\n      <div class=\"desc-box\"><div class=\"link\" @click=\"goMcpSquare\">{{ t('link_more_mcp') }}</div></div>\r\n      <a-button @click=\"showMcpModal\" class=\"btn\" type=\"primary\">{{ t('btn_add_now') }}</a-button>\r\n    </div>\r\n\r\n    <ThirdMcpDetail ref=\"mcpDetailRef\" @del=\"delApp\" @edit=\"editApp\" @auth=\"loadData\"/>\r\n    <ThirdMcpStore ref=\"mcpStoreRef\" @ok=\"update\"/>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport {h, ref, onMounted} from 'vue';\r\nimport {message, Modal} from 'ant-design-vue';\r\nimport {EllipsisOutlined} from '@ant-design/icons-vue';\r\nimport ThirdMcpDetail from \"@/views/robot/robot-list/components/third-mcp-detail.vue\";\r\nimport ThirdMcpStore from \"@/views/robot/robot-list/components/third-mcp-store.vue\";\r\nimport {delTMcpProvider, getTMcpProviders} from \"@/api/robot/thirdMcp.js\";\r\nimport { jsonDecode, timeNowGapFormat } from \"@/utils/index.js\";\r\nimport { useRouter } from \"vue-router\";\r\nimport { useI18n } from '@/hooks/web/useI18n';\r\n\r\nconst { t } = useI18n('views.robot.robot-list.components.third-mcp-box')\r\n\r\nconst router = useRouter()\r\n\r\nconst mcpDetailRef = ref(null)\r\nconst mcpStoreRef = ref(null)\r\nconst loading = ref(true)\r\nconst list = ref([])\r\nconst emit = defineEmits(['listLoaded'])\r\n\r\nonMounted(() => {\r\n  init()\r\n})\r\n\r\nfunction init() {\r\n  loading.value = true\r\n  loadData()\r\n}\r\n\r\nfunction update() {\r\n  loadData()\r\n  mcpDetailRef.value && mcpDetailRef.value.refresh()\r\n}\r\n\r\nfunction loadData() {\r\n  getTMcpProviders().then(res => {\r\n    let _list = res?.data || []\r\n    _list.forEach(item => {\r\n      item.tools = jsonDecode(item.tools, [])\r\n      item.up_time_text = timeNowGapFormat(item.update_time)\r\n    })\r\n    list.value = _list\r\n    emit('listLoaded', list.value.length)\r\n  }).finally(() => {\r\n    loading.value = false\r\n  })\r\n}\r\n\r\nfunction showDetail(item) {\r\n  mcpDetailRef.value.show(item)\r\n}\r\n\r\nfunction showMcpModal() {\r\n  mcpStoreRef.value.show()\r\n}\r\n\r\nfunction editApp(item) {\r\n  mcpStoreRef.value.show(item)\r\n}\r\n\r\nfunction goMcpSquare () {\r\n  const url = router.resolve({\r\n    path: '/mcp/index'\r\n  }).href\r\n  window.open(url, '_blank')\r\n}\r\n\r\nfunction delApp(item) {\r\n  Modal.confirm({\r\n    title: t('modal_confirm_delete_title'),\r\n    content: t('modal_confirm_delete_content'),\r\n    okText: t('btn_confirm'),\r\n    cancelText: t('btn_cancel'),\r\n    onOk: () => {\r\n      delTMcpProvider({provider_id: item.id}).then(() => {\r\n        message.success(t('msg_deleted'))\r\n        loadData()\r\n        mcpDetailRef.value && mcpDetailRef.value.hide()\r\n      })\r\n    }\r\n  })\r\n}\r\n\r\ndefineExpose({\r\n  update,\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n._mcp-box {\r\n  padding-right: 32px;\r\n\r\n  .loading-box {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    padding: 10vh 20vw;\r\n  }\r\n\r\n  .list-box {\r\n    display: flex;\r\n    align-items: center;\r\n    flex-wrap: wrap;\r\n    gap: 16px;\r\n\r\n    .app-item {\r\n      flex-shrink: 0;\r\n      width: calc((100% - 16px * 3) / 4);\r\n      max-width: 600px;\r\n      display: flex;\r\n      flex-direction: column;\r\n      gap: 12px;\r\n      padding: 24px;\r\n      border-radius: 12px;\r\n      border: 1px solid #E4E6EB;\r\n      color: #595959;\r\n      font-size: 14px;\r\n      font-weight: 400;\r\n\r\n      .base-info-box {\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: space-between;\r\n\r\n        .avatar {\r\n          width: 62px;\r\n          height: 62px;\r\n          border-radius: 14.59px;\r\n          flex-shrink: 0;\r\n          margin-right: 12px;\r\n        }\r\n\r\n        .info-box {\r\n          flex: 1;\r\n\r\n          .name {\r\n            color: #262626;\r\n            font-size: 16px;\r\n            font-weight: 600;\r\n            margin-bottom: 4px;\r\n          }\r\n        }\r\n      }\r\n\r\n      .bottom {\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: space-between;\r\n      }\r\n\r\n      .extra-box {\r\n        display: flex;\r\n        align-items: center;\r\n        flex-wrap: wrap;\r\n        gap: 2px 12px;\r\n        color: #8c8c8c;\r\n        font-size: 12px;\r\n        font-weight: 400;\r\n      }\r\n    }\r\n  }\r\n\r\n  .empty-box {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n\r\n    img {\r\n      width: 200px;\r\n      height: 200px;\r\n    }\r\n\r\n    .title {\r\n      color: #262626;\r\n      font-size: 16px;\r\n      font-style: normal;\r\n      font-weight: 600;\r\n      line-height: 24px;\r\n    }\r\n\r\n    .desc-box {\r\n      margin-top: 12px;\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 4px;\r\n      color: #8c8c8c;\r\n      font-size: 14px;\r\n      font-style: normal;\r\n      font-weight: 400;\r\n      line-height: 22px;\r\n\r\n      .link {\r\n        cursor: pointer;\r\n        color: #2475fc;\r\n        font-size: 14px;\r\n        font-style: normal;\r\n        font-weight: 400;\r\n        line-height: 22px;\r\n\r\n        &:hover {\r\n          opacity: 0.8;\r\n        }\r\n      }\r\n    }\r\n\r\n    .btn {\r\n      margin-top: 24px;\r\n    }\r\n  }\r\n}\r\n\r\n.auth-tag {\r\n  display: inline-block;\r\n  padding: 1px 8px;\r\n  border-radius: 6px;\r\n  background: #C4F5DB;\r\n  color: #17814e;\r\n  font-size: 12px;\r\n  font-weight: 400;\r\n\r\n  &.fail {\r\n    color: #ED744A;\r\n    background: #FFECE6;\r\n  }\r\n}\r\n\r\n.cFB363F {\r\n  color: #FB363F;\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"_mcp_container\">\r\n    <div class=\"tabs-box\">\r\n      <div :class=\"['tab-item', {active: active == 1}]\" @click=\"tabChange(1)\">{{ t('tab_workflow_mcp') }}</div>\r\n      <div :class=\"['tab-item', {active: active == 2}]\" @click=\"tabChange(2)\">{{ t('tab_external_mcp') }}</div>\r\n    </div>\r\n    <McpBox v-if=\"active == 1\" ref=\"mcpRef\"/>\r\n    <ThirdMcpBox v-else ref=\"mcpRef\" @listLoaded=\"onThirdListLoaded\"/>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport {onMounted, ref} from 'vue';\r\nimport {useRoute} from 'vue-router'\r\nimport {useI18n} from '@/hooks/web/useI18n'\r\nimport McpBox from \"@/views/robot/robot-list/components/mcp-box.vue\";\r\nimport ThirdMcpBox from \"@/views/robot/robot-list/components/third-mcp-box.vue\";\r\n\r\nconst {t} = useI18n('views.robot.robot-list.components.mcp-panel')\r\n\r\nconst route = useRoute()\r\n\r\nconst mcpRef = ref(null)\r\nconst active = ref(Number(localStorage.getItem('zm:chatwiki:mcp:active') || 1))\r\nconst emit = defineEmits(['thirdMcpListEmpty'])\r\n\r\nonMounted(() => {\r\n  if (route.query.mcp > 0) {\r\n    tabChange(Number(route.query.mcp))\r\n  }\r\n})\r\n\r\nfunction tabChange(key) {\r\n  active.value = key\r\n  localStorage.setItem('zm:chatwiki:mcp:active', key)\r\n}\r\n\r\nfunction update() {\r\n  if (active.value == 2) {\r\n    mcpRef.value.update()\r\n  }\r\n}\r\n\r\nfunction onThirdListLoaded(len) {\r\n  emit('thirdMcpListEmpty', len === 0)\r\n}\r\n\r\ndefineExpose({\r\n  update\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n._mcp_container {\r\n  height: 100%;\r\n  overflow-y: auto;\r\n\r\n  .tabs-box {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n    margin-bottom: 16px;\r\n\r\n    .tab-item {\r\n      padding: 5px 16px;\r\n      border-radius: 6px;\r\n      background: #EDEFF2;\r\n      color: #595959;\r\n      font-size: 14px;\r\n      font-weight: 400;\r\n      cursor: pointer;\r\n\r\n      &.active {\r\n        color: #2475fc;\r\n        background: #D6E6FF;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"avatar-uploader\">\r\n    <img class=\"avatar\" v-if=\"imageUrl\" :src=\"imageUrl\" alt=\"avatar\" />\r\n    <a-upload\r\n      v-model:file-list=\"fileList\"\r\n      list-type=\"picture-card\"\r\n      :show-upload-list=\"false\"\r\n      :before-upload=\"beforeUpload\"\r\n      accept=\".jpg,.png,.jpeg\"\r\n      @preview=\"handlePreview\"\r\n    >\r\n      <div>\r\n        <LoadingOutlined v-if=\"loading\" />\r\n        <PlusOutlined v-else />\r\n        <div class=\"ant-upload-text\">{{ t('label_upload_photo') }}</div>\r\n      </div>\r\n    </a-upload>\r\n    <a-modal :open=\"previewVisible\" :title=\"previewTitle\" :footer=\"null\" @cancel=\"handleCancel\">\r\n      <img alt=\"example\" style=\"width: 100%\" :src=\"previewImage\" />\r\n    </a-modal>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, watch } from 'vue'\r\nimport { message, Form } from 'ant-design-vue'\r\nimport { LoadingOutlined, PlusOutlined } from '@ant-design/icons-vue'\r\nimport { uploadFile } from '@/api/app'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.robot.robot-list.components.http-tool-avatar-input')\r\n\r\nconst emit = defineEmits(['update:value'])\r\nconst props = defineProps({\r\n  value: {\r\n    type: String,\r\n    default: ''\r\n  }\r\n})\r\n\r\nconst fileList = ref([])\r\nconst loading = ref(false)\r\nconst imageUrl = ref('')\r\n\r\nwatch(\r\n  () => props.value,\r\n  (val) => {\r\n    imageUrl.value = val || ''\r\n  },\r\n  { immediate: true }\r\n)\r\n\r\nconst formItemContext = Form.useInjectFormItemContext()\r\n\r\nconst triggerChange = (link) => {\r\n  imageUrl.value = link\r\n  emit('update:value', imageUrl.value)\r\n  formItemContext.onFieldChange()\r\n}\r\n\r\nconst beforeUpload = (file) => {\r\n  const isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png'\r\n  if (!isJpgOrPng) {\r\n    message.error(t('msg_only_jpg_png'))\r\n    return false\r\n  }\r\n  const isLt2M = file.size / 1024 < 1024 * 2\r\n  if (!isLt2M) {\r\n    message.error(t('msg_image_size_limit'))\r\n    return false\r\n  }\r\n  fileList.value = [file]\r\n  loading.value = true\r\n  uploadFile({ file, category: 'http_tool_avatar' }).then((res) => {\r\n    const link = res?.data?.link || ''\r\n    if (!link) {\r\n      message.error(t('msg_upload_failed'))\r\n      loading.value = false\r\n      return\r\n    }\r\n    loading.value = false\r\n    triggerChange(link)\r\n  }).catch(() => {\r\n    loading.value = false\r\n    message.error(t('msg_upload_failed'))\r\n  })\r\n  return false\r\n}\r\n\r\nconst previewVisible = ref(false)\r\nconst previewImage = ref('')\r\nconst previewTitle = ref('')\r\n\r\nconst handleCancel = () => {\r\n  previewVisible.value = false\r\n  previewTitle.value = ''\r\n}\r\nconst handlePreview = async (file) => {\r\n  previewImage.value = file.url || imageUrl.value\r\n  previewVisible.value = true\r\n  previewTitle.value = file.name || (previewImage.value ? previewImage.value.substring(previewImage.value.lastIndexOf('/') + 1) : '')\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.avatar-uploader::v-deep(.ant-upload) {\r\n  margin: 0 !important;\r\n}\r\n.ant-upload-select-picture-card i {\r\n  font-size: 32px;\r\n  color: #999;\r\n}\r\n.ant-upload-select-picture-card .ant-upload-text {\r\n  margin-top: 8px;\r\n  color: #666;\r\n}\r\n\r\n.avatar-uploader {\r\n  display: flex;\r\n}\r\n\r\n.avatar-uploader .avatar {\r\n  margin-right: 5px;\r\n  padding: 9px;\r\n  border: 1px solid #D9D9D9;\r\n  border-radius: 7px;\r\n  width: 102px;\r\n  height: 102px;\r\n}\r\n</style>\r\n\r\n","<template>\r\n  <a-modal\r\n    v-model:open=\"visible\"\r\n    :title=\"formState.id ? t('title_edit_http_tool') : t('title_add_http_tool')\"\r\n    width=\"472px\"\r\n    :confirm-loading=\"saving\"\r\n    @ok=\"save\">\r\n    <a-form class=\"form-box\" labelAlign=\"left\">\r\n      <a-form-item :label=\"t('label_tool_cover')\" :colon=\"false\">\r\n        <HttpToolAvatarInput v-model:value=\"formState.avatar\" />\r\n        <div class=\"form-item-tip\">{{ t('tip_cover_size') }}</div>\r\n      </a-form-item>\r\n    </a-form>\r\n    <a-form class=\"form-box\" labelAlign=\"left\">\r\n      <a-form-item :label=\"t('label_name')\" required :colon=\"false\">\r\n        <a-input v-model:value=\"formState.name\" :placeholder=\"t('ph_input_name')\" :maxlength=\"20\"/>\r\n      </a-form-item>\r\n      <a-form-item :label=\"t('label_description')\" :colon=\"false\">\r\n        <a-textarea\r\n          v-model:value=\"formState.description\"\r\n          :auto-size=\"{ minRows: 2, maxRows: 5 }\"\r\n          :placeholder=\"t('ph_input_desc')\" :maxlength=\"60\"/>\r\n      </a-form-item>\r\n    </a-form>\r\n  </a-modal>\r\n</template>\r\n\r\n<script setup>\r\nimport {ref, reactive} from 'vue';\r\nimport {message} from 'ant-design-vue';\r\nimport { saveHttpTool } from '@/api/robot/http_tool.js';\r\nimport HttpToolAvatarInput from './http-tool-avatar-input.vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.robot.robot-list.components.http-tool-store')\r\n\r\nconst emit = defineEmits(['ok'])\r\n\r\nconst visible = ref(false)\r\nconst saving = ref(false)\r\nconst formStateStruct = {\r\n  id: '',\r\n  avatar: '/upload/default/http-node.png',\r\n  name: '',\r\n  description: ''\r\n}\r\nconst formState = reactive({})\r\n\r\nfunction show(info = null) {\r\n  const base = JSON.parse(JSON.stringify(formStateStruct))\r\n  const source = info || {}\r\n  base.id = source.id || ''\r\n  base.name = source.name || ''\r\n  base.description = source.description || ''\r\n  if (source.avatar) {\r\n    base.avatar = source.avatar\r\n  }\r\n  Object.assign(formState, base)\r\n  visible.value = true\r\n}\r\n\r\nfunction save() {\r\n  try {\r\n    saving.value = true\r\n    formState.name = String(formState.name || '').trim()\r\n    formState.description = String(formState.description || '').trim()\r\n    if (!formState.name) throw t('msg_input_name')\r\n    let data = {...formState}\r\n    const avatarLink = String(formState.avatar || '')\r\n    if (avatarLink) data.avatar = avatarLink\r\n    saveHttpTool(data).then(() => {\r\n      emit('ok', formState)\r\n      message.success(t('msg_saved'))\r\n      visible.value = false\r\n    }).finally(() => {\r\n      saving.value = false\r\n    })\r\n  } catch (e) {\r\n    saving.value = false\r\n    message.error(e)\r\n  }\r\n}\r\n\r\ndefineExpose({\r\n  show\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.form-box {\r\n  margin-top: 24px;\r\n\r\n  :deep(.ant-form-item) {\r\n    margin-bottom: 12px;\r\n\r\n    .ant-row {\r\n      display: block;\r\n\r\n      .ant-form-item-control-input {\r\n        min-height: unset;\r\n      }\r\n    }\r\n  }\r\n\r\n  .tit-box {\r\n    color: #262626;\r\n    font-size: 14px;\r\n    font-weight: 600;\r\n    margin: 16px 0 8px;\r\n\r\n    .desc {\r\n      color: #595959;\r\n      font-weight: 400;\r\n      margin-left: 12px;\r\n    }\r\n  }\r\n}\r\n\r\n.form-item-tip {\r\n  color: #8c8c8c;\r\n  font-size: 12px;\r\n  font-weight: 400;\r\n  line-height: 14px;\r\n  margin: 6px 0 0;\r\n  white-space: nowrap;\r\n}\r\n</style>\r\n","<template>\r\n  <div>\r\n    <a-modal v-model:open=\"open\" :title=\"t('title_auth_parameters')\" :width=\"700\">\r\n      <div class=\"mt24\">\r\n        <a-alert\r\n          class=\"zm-alert-info\"\r\n          :message=\"t('msg_auth_info')\"\r\n          type=\"info\"\r\n        />\r\n      </div>\r\n      <div class=\"add-btn-block\">\r\n        <a-button type=\"primary\" :icon=\"h(PlusOutlined)\" ghost @click=\"handleAddKey\">{{ t('btn_add_parameter') }}</a-button>\r\n      </div>\r\n      <div class=\"list-box\">\r\n        <a-table\r\n          :row-selection=\"{ selectedRowKeys: state.selectedRowKeys, onChange: onSelectChange }\"\r\n          :columns=\"columns\"\r\n          :pagination=\"false\"\r\n          :data-source=\"tableData\"\r\n          row-key=\"uni_key\"\r\n          :scroll=\"{ y: 550 }\"\r\n        >\r\n          <template #bodyCell=\"{ column, record }\">\r\n            <template v-if=\"column.dataIndex === 'auth_key'\">\r\n              <a-input v-model:value=\"record.auth_key\" :placeholder=\"t('ph_input')\" />\r\n            </template>\r\n            <template v-if=\"column.dataIndex === 'auth_value'\">\r\n              <a-input v-model:value=\"record.auth_value\" :placeholder=\"t('ph_input')\" />\r\n            </template>\r\n            <template v-if=\"column.dataIndex === 'auth_value_addto'\">\r\n              <a-select v-model:value=\"record.auth_value_addto\" style=\"width: 100%\">\r\n                <a-select-option value=\"HEADERS\">HEADERS</a-select-option>\r\n                <a-select-option value=\"PARAMS\">PARAMS</a-select-option>\r\n                <a-select-option value=\"BODY\">BODY</a-select-option>\r\n              </a-select>\r\n            </template>\r\n            <template v-if=\"column.dataIndex === 'auth_remark'\">\r\n              <a-input :maxLength=\"10\" v-model:value=\"record.auth_remark\" :placeholder=\"t('ph_input')\" />\r\n            </template>\r\n            <template v-if=\"column.dataIndex === 'action'\">\r\n              <a-popconfirm :title=\"t('msg_confirm_delete')\" :ok-text=\"t('btn_confirm')\" :cancel-text=\"t('btn_cancel')\" @confirm=\"handleDel(record)\">\r\n                <a>{{ t('btn_delete') }}</a>\r\n              </a-popconfirm>\r\n            </template>\r\n          </template>\r\n        </a-table>\r\n      </div>\r\n      <template #footer>\r\n        <a-button @click=\"open = false\">{{ t('btn_cancel') }}</a-button>\r\n        <a-button @click=\"handleSave\">{{ t('btn_save_only') }}</a-button>\r\n        <a-button type=\"primary\" @click=\"handleOk\">{{ t('btn_save_and_add') }}</a-button>\r\n      </template>\r\n    </a-modal>\r\n  </div>\r\n  </template>\r\n  \r\n  <script setup>\r\n  import { getUuid } from '@/utils/index'\r\n  import { ref, h, reactive } from 'vue'\r\n  import { PlusOutlined } from '@ant-design/icons-vue'\r\n  import { getHttpAuthConfig, saveHttpAuthConfig } from '@/api/robot/index'\r\n  import { message } from 'ant-design-vue'\r\n  import { useI18n } from '@/hooks/web/useI18n'\r\n\r\n  const { t } = useI18n('views.robot.robot-list.components.add-authentication-modal')\r\n\r\n  const open = ref(false)\r\n  const initSelected = ref([])\r\n  \r\n  const tableData = ref([])\r\n  \r\n  const emit = defineEmits(['ok'])\r\n  \r\n  const columns = [\r\n    { title: 'Key', dataIndex: 'auth_key' },\r\n    { title: 'Value', dataIndex: 'auth_value' },\r\n    { title: 'Add To', dataIndex: 'auth_value_addto' },\r\n    { title: t('label_remark'), dataIndex: 'auth_remark' },\r\n    { title: t('label_action'), dataIndex: 'action', width: 80 }\r\n  ]\r\n  \r\n  const state = reactive({\r\n    selectedRowKeys: []\r\n  })\r\n  \r\n  const onSelectChange = (selectedRowKeys) => {\r\n    state.selectedRowKeys = selectedRowKeys\r\n  }\r\n\r\n  const show = (selected = []) => {\r\n    open.value = true\r\n    initSelected.value = Array.isArray(selected) ? selected : []\r\n    state.selectedRowKeys = []\r\n    getConfigList()\r\n  }\r\n  \r\n  const handleAddKey = () => {\r\n    if (tableData.value.length >= 100) {\r\n      return message.error(t('msg_max_limit'))\r\n    }\r\n    tableData.value.push({\r\n      auth_key: '',\r\n      auth_value: '',\r\n      auth_value_addto: 'HEADERS',\r\n      auth_remark: '',\r\n      uni_key: getUuid(16)\r\n    })\r\n  }\r\n  \r\n  const handleDel = (record) => {\r\n    tableData.value = tableData.value.filter((item) => item.uni_key !== record.uni_key)\r\n  }\r\n  \r\n  const getConfigList = () => {\r\n  getHttpAuthConfig().then((res) => {\r\n    let list = res.data || []\r\n    tableData.value = list.map((item) => {\r\n      return {\r\n        ...item,\r\n        uni_key: getUuid(16)\r\n      }\r\n    })\r\n    const selKeys = new Set(\r\n      initSelected.value.map(it => `${String(it.key)}::${String(it.add_to || it.addTo || it.auth_value_addto || '')}`)\r\n    )\r\n    state.selectedRowKeys = tableData.value\r\n      .filter(it => selKeys.has(`${String(it.auth_key)}::${String(it.auth_value_addto)}`))\r\n      .map(it => it.uni_key)\r\n  })\r\n}\r\n  function getParmas() {\r\n    let errorIndex = []\r\n    let resultList = []\r\n  \r\n    tableData.value.forEach((item, index) => {\r\n      resultList.push({\r\n        auth_key: item.auth_key,\r\n        auth_value: item.auth_value,\r\n        auth_value_addto: item.auth_value_addto,\r\n        auth_remark: item.auth_remark\r\n      })\r\n      if (item.auth_key == '' || item.auth_value == '') {\r\n        errorIndex.push(index + 1)\r\n      }\r\n    })\r\n  \r\n    if (errorIndex.length > 0) {\r\n      message.error(t('msg_fill_row', { val: errorIndex.join(',') }))\r\n      return false\r\n    }\r\n    if (resultList.length == 0) {\r\n      message.error(t('msg_add_parameter'))\r\n      return false\r\n    }\r\n  \r\n    return resultList\r\n  }\r\n  const handleOk = () => {\r\n    let http_auth_config_list = getParmas()\r\n    if (http_auth_config_list == false) {\r\n      return\r\n    }\r\n    let list = []\r\n    state.selectedRowKeys.forEach((uni_key) => {\r\n      list.push(tableData.value.find((it) => it.uni_key == uni_key))\r\n    })\r\n    emit('ok', list)\r\n    saveHttpAuthConfig({\r\n      http_auth_config_list: JSON.stringify(http_auth_config_list)\r\n    })\r\n      .then(() => {\r\n        message.success(t('msg_save_success'))\r\n      })\r\n      .finally(() => {\r\n        state.selectedRowKeys = []\r\n        open.value = false\r\n      })\r\n  }\r\n  \r\n  const handleSave = () => {\r\n    let http_auth_config_list = getParmas()\r\n    if (http_auth_config_list == false) {\r\n      return\r\n    }\r\n    saveHttpAuthConfig({\r\n      http_auth_config_list: JSON.stringify(http_auth_config_list)\r\n    }).then(() => {\r\n      message.success(t('msg_save_success'))\r\n    })\r\n  }\r\n  \r\n  defineExpose({\r\n    show\r\n  })\r\n  </script>\r\n  \r\n  <style lang=\"less\" scoped>\r\n  .mt24 {\r\n    margin-top: 24px;\r\n  }\r\n  .add-btn-block {\r\n    margin-top: 16px;\r\n    margin-bottom: 8px;\r\n  }\r\n  \r\n  .list-box {\r\n    margin-bottom: 24px;\r\n  }\r\n  </style>\r\n","<template>\r\n  <a-modal\r\n    v-model:open=\"visible\"\r\n    width=\"720px\"\r\n    :confirm-loading=\"saving\"\r\n    :title=\"editingId ? t('title_edit_tool') : t('title_add_tool')\"\r\n    @ok=\"save\">\r\n    <div class=\"gray-block\" style=\"background: #FFF;\">\r\n      <div class=\"gray-block-title-left\" style=\"margin-bottom: 16px;\">\r\n        <svg-icon name=\"jibenpeizhi\" size=\"16\" /> <span>{{ t('label_basic_info') }}</span>\r\n      </div>\r\n      <a-form ref=\"formRef\" :model=\"form\" :rules=\"rules\" layout=\"vertical\">\r\n        <a-form-item name=\"node_name_en\" :label=\"t('label_name')\" required>\r\n          <a-input\r\n            v-model:value=\"form.node_name_en\"\r\n            :placeholder=\"t('ph_input_name')\"\r\n            :maxlength=\"50\"\r\n          />\r\n          <div class=\"form-tips\">{{ t('tip_name_format') }}</div>\r\n        </a-form-item>\r\n        <a-form-item name=\"title\" :label=\"t('label_remark_name')\" required>\r\n          <a-input\r\n            v-model:value=\"form.title\"\r\n            :placeholder=\"t('ph_input_remark')\"\r\n            :maxlength=\"20\"\r\n          />\r\n          <div class=\"form-tips\">{{ t('tip_remark_length') }}</div>\r\n        </a-form-item>\r\n        <a-form-item name=\"description\" :label=\"t('label_description')\" required>\r\n          <a-textarea\r\n            v-model:value=\"form.description\"\r\n            :auto-size=\"{ minRows: 2, maxRows: 4 }\"\r\n            :placeholder=\"t('ph_input_desc')\"\r\n            :maxlength=\"500\"\r\n          />\r\n          <div class=\"form-tips\">{{ t('tip_desc_length', { count: 500 - (form.description ? form.description.length : 0) }) }}</div>\r\n        </a-form-item>\r\n      </a-form>\r\n    </div>\r\n    <div class=\"gray-block\">\r\n      <div class=\"gray-block-title\">\r\n        <div class=\"gray-block-title-left\">\r\n          <svg-icon name=\"input\" size=\"16\"/> <span>{{ t('label_input') }}</span>\r\n        </div>\r\n        <a-button ghost type=\"primary\" size=\"small\" @click=\"showParseModal\">\r\n          <CodeOutlined /> {{ t('btn_import_curl') }}\r\n        </a-button>\r\n      </div>\r\n      <a-form class=\"form-box\" ref=\"inputFormRef\" :model=\"form\" :rules=\"inputRules\" layout=\"vertical\">\r\n        <a-form-item :label=\"t('label_request_url')\" required>\r\n          <div class=\"flex-block-item\">\r\n            <a-select v-model:value=\"form.method\" style=\"width: 120px\">\r\n              <a-select-option value=\"GET\">GET</a-select-option>\r\n              <a-select-option value=\"POST\">POST</a-select-option>\r\n              <a-select-option value=\"PUT\">PUT</a-select-option>\r\n              <a-select-option value=\"DELETE\">DELETE</a-select-option>\r\n              <a-select-option value=\"PATCH\">PATCH</a-select-option>\r\n            </a-select>\r\n            <a-input class=\"flex1\" v-model:value=\"form.url\" :placeholder=\"t('ph_input_url')\"/>\r\n          </div>\r\n        </a-form-item>\r\n        <div class=\"array-form-box\">\r\n          <div class=\"form-item-label\">{{ t('label_headers') }}</div>\r\n          <div class=\"form-item-list\" v-for=\"(item, i) in form.headers\" :key=\"i\">\r\n            <div class=\"flex-block-item\">\r\n              <a-input style=\"width: 120px\" v-model:value=\"item.key\" placeholder=\"Key\"/>\r\n              <a-input class=\"flex1\" v-model:value=\"item.value\" placeholder=\"value\"/>\r\n              <div class=\"btn-hover-wrap\" @click=\"form.headers.splice(i,1)\"><CloseCircleOutlined /></div>\r\n            </div>\r\n          </div>\r\n          <a-button block type=\"dashed\" :icon=\"h(PlusOutlined)\" @click=\"form.headers.push({key:'', value:''})\">{{ t('btn_add_param') }}</a-button>\r\n        </div>\r\n        <div class=\"array-form-box\">\r\n          <div class=\"form-item-label\">{{ t('label_params') }}</div>\r\n          <div class=\"form-item-list\" v-for=\"(item, i) in form.params\" :key=\"i\">\r\n            <div class=\"flex-block-item\">\r\n              <a-input style=\"width: 120px\" v-model:value=\"item.key\" placeholder=\"Key\"/>\r\n              <a-input class=\"flex1\" v-model:value=\"item.value\" placeholder=\"value\"/>\r\n              <div class=\"btn-hover-wrap\" @click=\"form.params.splice(i,1)\"><CloseCircleOutlined /></div>\r\n            </div>\r\n          </div>\r\n          <a-button block type=\"dashed\" :icon=\"h(PlusOutlined)\" @click=\"form.params.push({key:'', value:''})\">{{ t('btn_add_param') }}</a-button>\r\n        </div>\r\n        <div class=\"array-form-box mt12\" v-if=\"['POST','PUT','PATCH'].includes(form.method)\">\r\n          <a-form-item :label=\"t('label_body')\" class=\"body-form-item\">\r\n            <a-radio-group v-model:value=\"form.body_type\">\r\n              <a-radio :value=\"0\">none</a-radio>\r\n              <a-radio :value=\"1\">x-www-form-urlencoded</a-radio>\r\n              <a-radio :value=\"2\">JSON</a-radio>\r\n            </a-radio-group>\r\n          </a-form-item>\r\n          <div v-if=\"form.body_type == 1\">\r\n            <div class=\"form-item-list\" v-for=\"(item, i) in form.body\" :key=\"i\">\r\n              <div class=\"flex-block-item\">\r\n                <a-input style=\"width: 120px\" v-model:value=\"item.key\" placeholder=\"Key\"/>\r\n                <a-input class=\"flex1\" v-model:value=\"item.value\" placeholder=\"value\"/>\r\n                <div class=\"btn-hover-wrap\" @click=\"form.body.splice(i,1)\"><CloseCircleOutlined /></div>\r\n              </div>\r\n            </div>\r\n            <a-button block type=\"dashed\" :icon=\"h(PlusOutlined)\" @click=\"form.body.push({key:'', value:''})\">{{ t('btn_add_param') }}</a-button>\r\n          </div>\r\n          <a-form-item v-if=\"form.body_type == 2\">\r\n            <a-textarea v-model:value=\"form.body_raw\" :auto-size=\"{ minRows: 4, maxRows: 10 }\" placeholder='{ \"foo\": \"bar\" }'/>\r\n          </a-form-item>\r\n        </div>\r\n        <div class=\"array-form-box timeout-form-item\">\r\n          <a-form-item :label=\"t('label_timeout')\">\r\n            <a-input-number v-model:value=\"form.timeout\" :min=\"1\" :max=\"600\" style=\"width: 160px\" />\r\n          </a-form-item>\r\n        </div>\r\n      </a-form>\r\n    </div>\r\n    <div class=\"gray-block\">\r\n      <div class=\"gray-block-title\">\r\n        <div class=\"gray-block-title-left\">\r\n          <span>{{ t('label_auth') }}</span>\r\n          <a-tooltip>\r\n            <template #title>{{ t('tip_auth') }}</template>\r\n            <QuestionCircleOutlined />\r\n          </a-tooltip>\r\n        </div>\r\n      </div>\r\n      <div class=\"output-box\">\r\n        <div class=\"output-block\">\r\n          <div class=\"output-item\" style=\"width: 33%\">Key</div>\r\n          <div class=\"output-item\" style=\"width: 33%\">Value</div>\r\n          <div class=\"output-item\" style=\"width: 33%\">Add To</div>\r\n        </div>\r\n        <div class=\"array-form-box\" @mousedown.stop=\"\">\r\n          <div class=\"form-item-list\" v-for=\"(item, i) in form.auth\" :key=\"i\">\r\n            <div class=\"flex-block-item\" style=\"gap: 12px\">\r\n              <a-input style=\"width: 33%\" v-model:value=\"item.key\" :placeholder=\"t('ph_input_key')\"/>\r\n              <a-input style=\"width: 33%\" v-model:value=\"item.value\" :placeholder=\"t('ph_input_key')\"/>\r\n              <a-select v-model:value=\"item.add_to\" style=\"width: 33%\">\r\n                <a-select-option value=\"HEADERS\">HEADERS</a-select-option>\r\n                <a-select-option value=\"PARAMS\">PARAMS</a-select-option>\r\n                <a-select-option value=\"BODY\">BODY</a-select-option>\r\n              </a-select>\r\n              <div class=\"btn-hover-wrap\" @click=\"handleDelAuthentication(i)\">\r\n                <CloseCircleOutlined />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <a-button @click=\"handleOpenAuthenticationModal\" :icon=\"h(PlusOutlined)\" block type=\"dashed\">{{ t('btn_add_param') }}</a-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"gray-block\">\r\n      <div class=\"gray-block-title\">\r\n        <div class=\"gray-block-title-left\">\r\n          <svg-icon name=\"output\" size=\"16\"/> <span>{{ t('label_output') }}</span>\r\n        </div>\r\n      </div>\r\n      <div class=\"output-box\">\r\n        <div class=\"output-block\">\r\n          <div class=\"output-item\" style=\"width: 33%\">{{ t('label_param_key') }}</div>\r\n          <div class=\"output-item\" style=\"width: 33%\">{{ t('label_type') }}</div>\r\n        </div>\r\n        <div class=\"array-form-box\">\r\n          <div class=\"form-item-list\" v-for=\"(item, i) in form.output\" :key=\"i\">\r\n            <div class=\"flex-block-item\" style=\"gap: 12px\">\r\n              <a-input style=\"width: 214px\" v-model:value=\"item.key\" :placeholder=\"t('ph_input_key')\"/>\r\n              <a-select @change=\"onTypeChange(item)\" v-model:value=\"item.typ\" style=\"width: 214px\" :placeholder=\"t('ph_select_type')\">\r\n                <a-select-option v-for=\"op in typOptions\" :key=\"op.value\" :value=\"op.value\">{{ op.value }}</a-select-option>\r\n              </a-select>\r\n              <div class=\"btn-hover-wrap\" v-if=\"item.typ == 'object'\" @click=\"onAddSubs(i)\">\r\n                <PlusCircleOutlined />\r\n              </div>\r\n              <div class=\"btn-hover-wrap\" @click=\"form.output.splice(i,1)\"><CloseCircleOutlined /></div>\r\n            </div>\r\n            <div class=\"sub-field-box\" v-if=\"item.subs && item.subs.length > 0\">\r\n              <SubKey :data=\"item.subs\" :level=\"2\" :typOptions=\"typOptions\" />\r\n            </div>\r\n          </div>\r\n          <a-button block type=\"dashed\" :icon=\"h(PlusOutlined)\" @click=\"form.output.push({key:'', typ:'string', subs: []})\">{{ t('btn_add_param') }}</a-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <ParseCurlModal ref=\"parseCurlModalRef\" @parse=\"handleParseResult\" />\r\n    <AddAuthenticationModal ref=\"addAuthModalRef\" @ok=\"handleSaveAuthentication\" />\r\n  </a-modal>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, h, nextTick } from 'vue'\r\nimport { CloseCircleOutlined, PlusOutlined, PlusCircleOutlined, CodeOutlined, QuestionCircleOutlined } from '@ant-design/icons-vue'\r\nimport ParseCurlModal from '@/views/workflow/components/node-form-drawer/http-node/parse-curl-modal.vue'\r\nimport { saveHttpToolItem, delHttpToolItem } from '@/api/robot/http_tool.js'\r\nimport AddAuthenticationModal from './add-authentication-modal.vue'\r\nimport SubKey from '@/views/workflow/components/node-form-drawer/http-node/subs-key.vue'\r\nimport { message, Modal } from 'ant-design-vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.robot.robot-list.components.add-http-tool-modal')\r\n\r\nconst emit = defineEmits(['ok'])\r\nconst props = defineProps({\r\n  toolId: {\r\n    type: Number,\r\n    default: 0\r\n  }\r\n})\r\n\r\nconst visible = ref(false)\r\nconst saving = ref(false)\r\nconst parseCurlModalRef = ref(null)\r\nconst addAuthModalRef = ref(null)\r\nconst formRef = ref(null)\r\nconst inputFormRef = ref(null)\r\n\r\nconst form = reactive({\r\n  title: '',\r\n  description: '',\r\n  node_name_en: '',\r\n  method: 'GET',\r\n  url: '',\r\n  auth: [],\r\n  headers: [],\r\n  params: [],\r\n  body_type: 0,\r\n  body: [],\r\n  body_raw: '',\r\n  output: [{key:'', typ:'string', subs: []}],\r\n  timeout: 30\r\n})\r\nconst editingId = ref(0)\r\n\r\nconst typOptions = [\r\n  { lable: 'string', value: 'string' },\r\n  { lable: 'number', value: 'number' },\r\n  { lable: 'boole', value: 'boole' },\r\n  { lable: 'float', value: 'float' },\r\n  { lable: 'object', value: 'object' },\r\n  { lable: 'array<string>', value: 'array<string>' },\r\n  { lable: 'array<number>', value: 'array<number>' },\r\n  { lable: 'array<boole>', value: 'array<boole>' },\r\n  { lable: 'array<float>', value: 'array<float>' },\r\n  { lable: 'array<object>', value: 'array<object>' }\r\n]\r\n\r\nconst rules = {\r\n  node_name_en: [\r\n    { required: true, message: t('msg_input_name') },\r\n    {\r\n      validator: (rule, value) => {\r\n        const reg = /^[a-zA-Z0-9_.-]+$/\r\n        if (!reg.test(value)) return Promise.reject(t('msg_name_format'))\r\n        return Promise.resolve()\r\n      }\r\n    }\r\n  ],\r\n  title: [\r\n    { required: true, message: t('msg_input_remark') }\r\n  ],\r\n  description: [\r\n    { required: true, message: t('msg_input_desc') }\r\n  ]\r\n}\r\nconst inputRules = {\r\n  auth: [\r\n    {\r\n      validator: (_rule, value) => {\r\n        const arr = Array.isArray(value) ? value : []\r\n        if (!arr.length) return Promise.reject(t('msg_add_auth_param'))\r\n        const ok = arr.every(it => String(it.key || '').trim().length > 0)\r\n        if (!ok) return Promise.reject(t('msg_fill_auth_key'))\r\n        return Promise.resolve()\r\n      }\r\n    }\r\n  ]\r\n}\r\n\r\nfunction show(item = null) {\r\n  if (item && item.id) {\r\n    editingId.value = item.id\r\n    // 支持两种结构：旧的http_tool_item结构与节点结构\r\n    if (item.node_params?.curl || item.data_raw) {\r\n      const info = item.http_tool_info || {}\r\n      form.node_name_en = info.http_tool_node_name_en || item.node_name_en || ''\r\n      form.title = info.http_tool_node_name || item.node_name || ''\r\n      form.description = item.node_description || info.http_tool_node_description || ''\r\n      let curl = item.node_params?.curl\r\n      if (!curl && item.data_raw) {\r\n        try {\r\n          const parsed = JSON.parse(item.data_raw || '{}')\r\n          curl = parsed.curl || {}\r\n        } catch {\r\n          curl = {}\r\n        }\r\n      }\r\n      form.method = curl.method || 'GET'\r\n      form.url = String(curl.rawurl || '').replace(/[`\"]/g, '').trim()\r\n      form.headers = Array.isArray(curl.headers) ? JSON.parse(JSON.stringify(curl.headers)) : []\r\n      form.params = Array.isArray(curl.params) ? JSON.parse(JSON.stringify(curl.params)) : []\r\n      form.body_type = curl.type ?? 0\r\n      form.body = Array.isArray(curl.body) ? JSON.parse(JSON.stringify(curl.body)) : []\r\n      form.body_raw = curl.body_raw || ''\r\n      form.output = Array.isArray(curl.output) ? JSON.parse(JSON.stringify(curl.output)) : [{key:'', typ:'string', subs: []}]\r\n      const httpAuth = curl.http_auth || []\r\n      form.auth = Array.isArray(httpAuth) ? httpAuth.map(a => ({ key: a.key, value: a.value, add_to: a.add_to || 'HEADERS' })) : []\r\n      form.timeout = Number(curl.timeout ?? 30)\r\n    } else {\r\n      form.node_name_en = item.node_name_en || ''\r\n      form.title = item.robot_name || item.name || ''\r\n      form.description = item.robot_intro || ''\r\n      const raw = item.raw || {}\r\n      form.method = raw.method || 'GET'\r\n      form.url = raw.url || ''\r\n      form.headers = Array.isArray(raw.headers) ? JSON.parse(JSON.stringify(raw.headers)) : []\r\n      form.params = Array.isArray(raw.params) ? JSON.parse(JSON.stringify(raw.params)) : []\r\n      form.body_type = raw.body_type ?? 0\r\n      form.body = Array.isArray(raw.body) ? JSON.parse(JSON.stringify(raw.body)) : []\r\n      form.body_raw = raw.body_raw || ''\r\n      form.output = Array.isArray(raw.output) ? JSON.parse(JSON.stringify(raw.output)) : [{key:'', typ:'string', subs: []}]\r\n      form.timeout = 30\r\n    }\r\n  } else {\r\n    editingId.value = 0\r\n    Object.assign(form, {\r\n      node_name_en: '',\r\n      title: '',\r\n      description: '',\r\n      method: 'GET',\r\n      url: '',\r\n      headers: [],\r\n      params: [],\r\n      body_type: 0,\r\n      body: [],\r\n      body_raw: '',\r\n      output: [{key:'', typ:'string', subs: []}],\r\n      timeout: 30\r\n    })\r\n  }\r\n  visible.value = true\r\n}\r\nfunction handleParseResult(parsed) {\r\n  const handleValue = (v) => typeof v === 'string' ? v : JSON.stringify(v)\r\n  let isJson = false\r\n  form.method = parsed.method || form.method\r\n  form.url = parsed.url || form.url\r\n  if (parsed.header && typeof parsed.header === 'object') {\r\n    const list = Object.keys(parsed.header).map(k => {\r\n      const val = parsed.header[k]\r\n      if (String(k).toLowerCase() === 'content-type' && String(val).toLowerCase().includes('application/json')) {\r\n        isJson = true\r\n      }\r\n      return { key: k, value: handleValue(val) }\r\n    }).filter(it => String(it.key).toLowerCase() !== 'content-type')\r\n    form.headers = list\r\n  }\r\n  if (parsed.params && typeof parsed.params === 'object') {\r\n    const list = Object.keys(parsed.params).map(k => ({ key: k, value: handleValue(parsed.params[k]) }))\r\n    form.params = list\r\n  }\r\n  if (parsed.data && typeof parsed.data === 'object') {\r\n    const body = Object.keys(parsed.data).map(k => ({ key: k, value: handleValue(parsed.data[k]) }))\r\n    form.body = body\r\n    form.body_raw = JSON.stringify(parsed.data)\r\n  } else {\r\n    form.body = []\r\n    form.body_raw = ''\r\n  }\r\n  if (['POST', 'PUT', 'PATCH'].includes(form.method)) {\r\n    form.body_type = isJson ? 2 : 1\r\n  } else {\r\n    form.body_type = 0\r\n  }\r\n  parseCurlModalRef.value && parseCurlModalRef.value.hide()\r\n}\r\nfunction showParseModal() {\r\n  parseCurlModalRef.value && parseCurlModalRef.value.show()\r\n}\r\n\r\nfunction handleOpenAuthenticationModal() {\r\n  addAuthModalRef.value && addAuthModalRef.value.show(form.auth)\r\n}\r\nfunction handleSaveAuthentication (list) {\r\n  const data = (list || []).map(item => ({\r\n    key: item.auth_key,\r\n    value: item.auth_value,\r\n    add_to: item.auth_value_addto\r\n  }))\r\n  form.auth = data\r\n  nextTick(() => {\r\n    inputFormRef.value?.validate()\r\n  })\r\n}\r\nfunction handleDelAuthentication(index) {\r\n  form.auth.splice(index, 1)\r\n}\r\nfunction onTypeChange(item) {\r\n  item.subs = []\r\n}\r\nfunction onAddSubs(index) {\r\n  const d = form.output[index]\r\n  if (!Array.isArray(d.subs)) d.subs = []\r\n  d.subs.push({ key: '', value: '', subs: [] })\r\n}\r\nasync function save() {\r\n  try {\r\n    await formRef.value?.validate()\r\n    await inputFormRef.value?.validate()\r\n  } catch (e) {\r\n    return\r\n  }\r\n  const headers = Array.isArray(form.headers) ? JSON.parse(JSON.stringify(form.headers)) : []\r\n  const params = Array.isArray(form.params) ? JSON.parse(JSON.stringify(form.params)) : []\r\n  const body = Array.isArray(form.body) ? JSON.parse(JSON.stringify(form.body)) : []\r\n  const bodyRaw = String(form.body_raw || '')\r\n  const httpAuth = (Array.isArray(form.auth) ? form.auth : [])\r\n    .filter(ap => String(ap.key || '').trim())\r\n    .map(ap => ({ key: String(ap.key || ''), value: String(ap.value || ''), add_to: String(ap.add_to || 'HEADERS') }))\r\n  const dataRawObj = {\r\n    curl: {\r\n      method: form.method || 'GET',\r\n      rawurl: String(form.url || '').replace(/[`\"]/g, '').trim(),\r\n      headers,\r\n      params,\r\n      type: form.body_type ?? 0,\r\n      body,\r\n      body_raw: bodyRaw,\r\n      output: Array.isArray(form.output) ? JSON.parse(JSON.stringify(form.output)) : [],\r\n      http_auth: httpAuth,\r\n      timeout: Number(form.timeout || 30)\r\n    }\r\n  }\r\n  const payload = {\r\n    http_tool_id: props.toolId,\r\n    node_name_en: form.node_name_en || '',\r\n    node_name: form.title || '',\r\n    node_description: form.description || '',\r\n    node_remark: '',\r\n    data_raw: JSON.stringify(dataRawObj)\r\n  }\r\n  const doSave = () => {\r\n    saving.value = true\r\n    const req = editingId.value ? saveHttpToolItem({ id: editingId.value, ...payload }) : saveHttpToolItem(payload)\r\n    return req.then(() => {\r\n      message.success(t('msg_operation_success'))\r\n      emit('ok')\r\n      visible.value = false\r\n    }).finally(() => {\r\n      saving.value = false\r\n    })\r\n  }\r\n  if (editingId.value) {\r\n    Modal.confirm({\r\n      title: t('msg_confirm_save'),\r\n      content: t('msg_save_confirm'),\r\n      okText: t('btn_confirm'),\r\n      cancelText: t('btn_cancel'),\r\n      onOk() {\r\n        return doSave()\r\n      }\r\n    })\r\n  } else {\r\n    doSave()\r\n  }\r\n}\r\n\r\nfunction del(item) {\r\n  delHttpToolItem(item.id).then(() => {\r\n    message.success(t('msg_operation_success'))\r\n    emit('ok')\r\n    visible.value = false\r\n  }).finally(() => saving.value = false)\r\n}\r\n\r\ndefineExpose({\r\n  show,\r\n  del\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.gray-block {\r\n  margin-top: 24px;\r\n}\r\n.gray-block-title {\r\n  display: flex;\r\n  gap: 8px;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  font-weight: 600;\r\n  margin-bottom: 16px;\r\n}\r\n.gray-block-title-left {\r\n  display: flex;\r\n  gap: 8px;\r\n  align-items: center;\r\n}\r\n.form-box {\r\n  border-radius: 6px;\r\n  background: #F2F4F7;\r\n  padding: 16px;\r\n}\r\n.output-box {\r\n  border-radius: 6px;\r\n  background: #F2F4F7;\r\n  padding: 16px;\r\n}\r\n.flex-block-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n.array-form-box {\r\n  margin-top: 16px;\r\n}\r\n.ant-form-item {\r\n  margin-bottom: 16px;\r\n}\r\n.timeout-form-item .ant-form-item {\r\n  margin-bottom: 0;\r\n}\r\n.form-item-list {\r\n  margin-bottom: 8px;\r\n}\r\n.btn-hover-wrap {\r\n  cursor: pointer;\r\n}\r\n.flex1 {\r\n  flex: 1;\r\n}\r\n.output-block {\r\n  display: flex;\r\n  gap: 12px;\r\n}\r\n.output-item {\r\n  font-size: 12px;\r\n  color: #8c8c8c;\r\n}\r\n.output-box .flex-block-item .btn-hover-wrap {\r\n  width: 24px;\r\n  height: 24px;\r\n}\r\n.body-form-item {\r\n  margin-bottom: 0;\r\n}\r\n.mt12 {\r\n  margin-top: 12px;\r\n}\r\n.form-tips {\r\n  align-self: stretch;\r\n  color: #8c8c8c;\r\n  font-size: 14px;\r\n  font-style: normal;\r\n  font-weight: 400;\r\n  line-height: 22px;\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"_http_detail_box\">\r\n    <div class=\"base-info-box\">\r\n      <div class=\"app-info\">\r\n        <img class=\"avatar\" :src=\"avatarUrl\"/>\r\n        <div class=\"info-box\">\r\n          <div class=\"left-box\">\r\n            <div class=\"name\">\r\n              {{ tool.name }}\r\n            </div>\r\n            <div class=\"desc\">{{ tool.description }}</div>\r\n          </div>\r\n          <div class=\"right-box\">\r\n            <a-button @click=\"$emit('addTool', tool)\" type=\"primary\" ghost :icon=\"h(PlusOutlined)\">{{ t('btn_add_tool') }}</a-button>\r\n            <a-dropdown>\r\n              <a-button :icon=\"h(EllipsisOutlined)\"/>\r\n              <template #overlay>\r\n                <a-menu>\r\n                  <a-menu-item @click=\"$emit('editBase', tool)\">{{ t('btn_edit') }}</a-menu-item>\r\n                  <a-menu-item @click=\"$emit('deleteBase', tool)\"><span class=\"cFB363F\">{{ t('btn_delete') }}</span></a-menu-item>\r\n                </a-menu>\r\n              </template>\r\n            </a-dropdown>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"app-data\">\r\n        <div class=\"data-item\">\r\n          <div class=\"title\">{{ t('label_create_time') }}</div>\r\n          <div class=\"value\">{{ formatTs(tool.create_time) }}</div>\r\n        </div>\r\n        <a-divider type=\"vertical\" style=\"height: 24px;\"/>\r\n        <div class=\"data-item\">\r\n          <div class=\"title\">{{ t('label_update_time') }}</div>\r\n          <div class=\"value\">{{ formatTs(tool.update_time) }}</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"tools-box\">\r\n      <div class=\"head-box\">\r\n        <AppstoreOutlined class=\"icon\"/>\r\n        {{ t('title_tool_list') }}（{{ nodesList.length || 0 }}）\r\n      </div>\r\n      <div v-if=\"nodesList.length\" class=\"tools-list\">\r\n        <div v-for=\"(item, i) in nodesList\" :key=\"i\" class=\"tools-item\">\r\n          <div class=\"left\">\r\n            <div class=\"tit\">{{ item.displayTitle }}</div>\r\n            <div class=\"key\">{{ t('label_request_url') }}{{ item.rawurl }}</div>\r\n            <a-tooltip :title=\"getTooltipTitle(item.displayDesc, item)\" placement=\"top\">\r\n              <div class=\"desc\" :class=\"`titleRef_${item.id}`\">{{item.displayDesc}}</div>\r\n            </a-tooltip>\r\n            <div class=\"params\">\r\n              <a-tag v-for=\"field in (item.displayParams || []).slice(0, 5)\" :key=\"field.key\" :bordered=\"false\">{{ field.key }}</a-tag>\r\n              <a-popover placement=\"right\">\r\n                <template #content>\r\n                  <div class=\"params-box\">\r\n                    <div v-for=\"field in (item.displayParams || [])\" :key=\"field.key\" class=\"param-item\">\r\n                      <div class=\"field\">\r\n                        <span class=\"name\">{{ field.key }}</span>\r\n                        <span class=\"type\">{{ field.typ }}</span>\r\n                        <span v-if=\"field.required\" class=\"required\">{{ t('label_required') }}</span>\r\n                      </div>\r\n                      <div class=\"desc\">{{ field.desc }}</div>\r\n                    </div>\r\n                  </div>\r\n                </template>\r\n                <a>{{ t('label_params') }}</a>\r\n              </a-popover>\r\n            </div>\r\n          </div>\r\n          <a-dropdown>\r\n            <a-button size=\"small\" :icon=\"h(EllipsisOutlined)\"/>\r\n            <template #overlay>\r\n              <a-menu>\r\n                <a-menu-item @click=\"$emit('editTool', item.originNode)\">{{ t('btn_edit') }}</a-menu-item>\r\n                <a-menu-item @click=\"delItem(item.originNode)\"><span class=\"cFB363F\">{{ t('btn_delete') }}</span></a-menu-item>\r\n              </a-menu>\r\n            </template>\r\n          </a-dropdown>\r\n        </div>\r\n      </div>\r\n      <div v-else class=\"empty-box\">\r\n        <img src=\"@/assets/empty.png\"/>\r\n        <div class=\"title\">{{ t('title_no_tool') }}</div>\r\n        <a-button @click=\"$emit('addTool', tool)\" class=\"btn\" type=\"primary\">{{ t('btn_add_now') }}</a-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, h } from 'vue'\r\nimport { AppstoreOutlined, EllipsisOutlined } from '@ant-design/icons-vue';\r\nimport { PlusOutlined } from '@ant-design/icons-vue';\r\nimport { delHttpToolItem } from '@/api/robot/http_tool.js'\r\nimport { Modal } from 'ant-design-vue'\r\nimport { ExclamationCircleOutlined } from '@ant-design/icons-vue'\r\nimport dayjs from 'dayjs'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.robot.robot-list.components.http-tool-detail')\r\n\r\nconst props = defineProps({\r\n  tool: {\r\n    type: Object,\r\n    default: () => ({})\r\n  }\r\n})\r\n\r\nconst emit = defineEmits(['addTool', 'editTool', 'ok', 'editBase', 'deleteBase'])\r\n\r\nfunction delItem(item) {\r\n  Modal.confirm({\r\n    title: t('btn_delete'),\r\n    icon: h(ExclamationCircleOutlined),\r\n    content: t('msg_delete_confirm'),\r\n    okText: t('btn_confirm_delete'),\r\n    cancelText: t('btn_cancel'),\r\n    onOk() {\r\n      return delHttpToolItem({ id: item.id }).then(() => {\r\n        emit('ok')\r\n      })\r\n    }\r\n  })\r\n}\r\n\r\nconst avatarUrl = computed(() => {\r\n  const s = String(props.tool?.avatar || '').trim().replace(/[`\"']/g, '')\r\n  return s || '/src/assets/img/workflow/node-service.svg'\r\n})\r\nfunction formatTs(ts) {\r\n  const n = Number(ts || 0)\r\n  if (!n) return '—'\r\n  const ms = n > 1e12 ? n : n * 1000\r\n  return dayjs(ms).format('YYYY-MM-DD HH:mm')\r\n}\r\n\r\nconst nodesList = computed(() => {\r\n  const arr = Array.isArray(props.tool?.nodes) ? props.tool.nodes : []\r\n  return arr.map(n => {\r\n    const info = n.http_tool_info || {}\r\n    const np = n.node_params || {}\r\n    const curl = np.curl || {}\r\n    const paramsArr = Array.isArray(curl.params) ? curl.params : []\r\n    const bodyArr = Array.isArray(curl.body) ? curl.body : []\r\n    const prs = [...paramsArr, ...bodyArr].filter(x => String(x?.key || '').trim().length > 0)\r\n    const displayParams = prs.map(x => ({ key: x.key, typ: x.value }))\r\n    return {\r\n      id: Number(n.id || 0),\r\n      displayTitle: info.http_tool_node_name || n.node_name || '',\r\n      displayIdent: n.node_key || info.http_tool_node_key || '',\r\n      displayDesc: n.node_description || info.http_tool_node_description || '',\r\n      rawurl: curl.rawurl || '',\r\n      displayParams,\r\n      originNode: n\r\n    }\r\n  })\r\n})\r\n\r\n// 获取 tooltip 标题\r\nfunction getTooltipTitle(text, record) {\r\n  if (!text) return null\r\n  \r\n  // 创建临时元素来测量文本宽度\r\n  const canvas = document.createElement('canvas')\r\n  const context = canvas.getContext('2d')\r\n  // 14px 根据实际字体大小修改\r\n  context.font = '14px -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif'\r\n  \r\n  const textWidth = context.measureText(text).width\r\n\r\n  const titleRef = document.querySelector(`.titleRef_${record.create_time}`)\r\n  if (titleRef) {\r\n    record.title_width = titleRef.offsetWidth\r\n  }\r\n  const maxWidth = record?.title_width || 1250\r\n  return textWidth > maxWidth ? text : null\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n._http_detail_box {\r\n  padding-right: 32px;\r\n  .base-info-box {\r\n    padding: 24px;\r\n    border-radius: 6px;\r\n    border: 1px solid transparent;\r\n    background: linear-gradient(#fff, #fff) padding-box, linear-gradient(90deg, #70D9FF, #3C01FF, #ECB3FF) border-box;\r\n    .app-info {\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: space-between;\r\n      .avatar {\r\n        width: 62px;\r\n        height: 62px;\r\n        border-radius: 14.59px;\r\n        flex-shrink: 0;\r\n        margin-right: 12px;\r\n      }\r\n      .info-box {\r\n        flex: 1;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: space-between;\r\n        .right-box {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 12px;\r\n        }\r\n        .name {\r\n          color: #262626;\r\n          font-size: 16px;\r\n          font-weight: 600;\r\n        }\r\n        .desc {\r\n          color: #8c8c8c;\r\n          font-size: 14px;\r\n          font-weight: 400;\r\n          margin-top: 4px;\r\n        }\r\n      }\r\n    }\r\n    .app-data {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 16px;\r\n      margin-top: 16px;\r\n      color: #595959;\r\n      font-size: 14px;\r\n      font-weight: 400;\r\n      .title {\r\n        color: #8c8c8c;\r\n        font-size: 12px;\r\n      }\r\n    }\r\n  }\r\n    .tools-box {\r\n      margin-top: 24px;\r\n      .head-box {\r\n        color: #262626;\r\n        font-size: 14px;\r\n        font-weight: 600;\r\n      }\r\n      .tools-list {\r\n        margin-top: 16px;\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n        gap: 16px;\r\n        .tools-item {\r\n          flex: 0 0 calc((100% - 16px) / 2);\r\n          padding: 24px;\r\n          border-radius: 12px;\r\n          border: 1px solid #E4E6EB;\r\n          display: flex;\r\n          justify-content: space-between;\r\n          align-items: flex-end;\r\n          gap: 8px;\r\n          .tit {\r\n            color: #262626;\r\n            font-size: 14px;\r\n            font-weight: 600;\r\n          }\r\n          .key {\r\n            color: #8c8c8c;\r\n            font-size: 12px;\r\n            font-weight: 400;\r\n          }\r\n          .desc {\r\n            max-width: calc((100vw / 2) - 170px);\r\n            color: #595959;\r\n            font-size: 14px;\r\n            margin-top: 8px;\r\n            height: 44px;\r\n            line-height: 22px;\r\n            font-weight: 400;\r\n            word-break: break-all;\r\n            // 超出2行显示省略号\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n            display: -webkit-box;\r\n            -webkit-line-clamp: 2;\r\n            line-clamp: 2;\r\n            -webkit-box-orient: vertical;\r\n          }\r\n          .params {\r\n            margin-top: 8px;\r\n          }\r\n        }\r\n      }\r\n      .bind-list {\r\n        margin-top: 24px;\r\n        .head-box {\r\n          color: #262626;\r\n          font-size: 14px;\r\n          font-weight: 600;\r\n          margin-bottom: 8px;\r\n        }\r\n        .row {\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: space-between;\r\n          padding: 12px 16px;\r\n          border: 1px solid #E4E6EB;\r\n          border-radius: 8px;\r\n          &:not(:last-child) {\r\n            margin-bottom: 8px;\r\n          }\r\n          .info {\r\n            display: flex;\r\n            align-items: center;\r\n            gap: 12px;\r\n            .avatar {\r\n              width: 32px;\r\n              height: 32px;\r\n              border-radius: 8px;\r\n            }\r\n            .name {\r\n              color: #262626;\r\n              font-size: 14px;\r\n              font-weight: 600;\r\n            }\r\n            .desc {\r\n              color: #8c8c8c;\r\n              font-size: 12px;\r\n            }\r\n          }\r\n          .actions {\r\n            display: flex;\r\n            align-items: center;\r\n            gap: 8px;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n.status-tag {\r\n  display: inline-block;\r\n  padding: 2px 6px;\r\n  align-items: center;\r\n  gap: 4px;\r\n  border-radius: 6px;\r\n  background: #CAFCE4;\r\n  white-space: nowrap;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n\r\n  &.finished {\r\n    background-color: #CAFCE4;\r\n    color: #21A665;\r\n  }\r\n\r\n  &.waiting {\r\n    background-color: #F0F0F0;\r\n    color: #595959;\r\n  }\r\n}\r\n.params-box {\r\n  max-height: 80vh;\r\n  overflow-y: auto;\r\n\r\n  .param-item {\r\n    max-width: 500px;\r\n\r\n    &:not(:last-child) {\r\n      margin-bottom: 16px;\r\n    }\r\n\r\n    .field {\r\n      color: #262626;\r\n      font-size: 14px;\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 12px;\r\n\r\n      .name {\r\n        font-weight: 600;\r\n      }\r\n\r\n      .type {\r\n        color: #595959;\r\n      }\r\n\r\n      .required {\r\n        color: #ED744A;\r\n        font-weight: 500;\r\n      }\r\n    }\r\n\r\n    .desc {\r\n      color: #8c8c8c;\r\n      font-size: 14px;\r\n      margin-top: 4px;\r\n    }\r\n  }\r\n}\r\n.empty-box {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  margin: 40px 0;\r\n\r\n  img {\r\n    width: 200px;\r\n    height: 200px;\r\n  }\r\n\r\n  .title {\r\n    color: #262626;\r\n    font-size: 16px;\r\n    font-weight: 600;\r\n    line-height: 24px;\r\n  }\r\n\r\n  .btn {\r\n    margin-top: 24px;\r\n  }\r\n}\r\n.cFB363F {\r\n  color: #FB363F;\r\n}\r\n.mt4 {\r\n  margin-top: 4px;\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"_http_tool_box\">\r\n    <div v-if=\"loading\" class=\"loading-box\">\r\n      <a-spin/>\r\n    </div>\r\n    <template v-else>\r\n      <template v-if=\"!detailTool\">\r\n        <div class=\"list-head\">\r\n          <div class=\"title\">{{ t('title_http_tool') }}</div>\r\n        </div>\r\n        <div v-if=\"tools.length\" class=\"list-box\">\r\n          <div\r\n            v-for=\"(item, i) in tools\"\r\n            :key=\"i\"\r\n            @click=\"openDetail(item)\"\r\n            class=\"app-item\"\r\n          >\r\n            <div class=\"base-info-box\">\r\n              <img class=\"avatar\" :src=\"formatAvatar(item.avatar)\"/>\r\n              <div class=\"info-box\">\r\n                <div class=\"name zm-line1\">{{ item.name }}</div>\r\n                <a-tooltip :title=\"getTooltipTitle(item.description, item, 14, 2, 10)\" placement=\"top\">\r\n                  <div class=\"description\" :ref=\"el => setDescRef(el, item)\">{{ item.description }}</div>\r\n                </a-tooltip>\r\n              </div>\r\n            </div>\r\n            <div class=\"bottom\">\r\n              <div class=\"extra-box\">\r\n                <div class=\"extra-item\" v-if=\"item.node_count > 0\">{{ item.node_count }}{{ t('label_available_tools') }}</div>\r\n                <div class=\"extra-item\" v-else>{{ t('label_no_available_tools') }}</div>\r\n              </div>\r\n              <div class=\"bottom-right\">\r\n                <div class=\"update-time\">{{ item.up_time_text }}{{ t('label_update') }}</div>\r\n                <a-dropdown>\r\n                  <a-button @click.stop size=\"small\" :icon=\"h(EllipsisOutlined)\"/>\r\n                  <template #overlay>\r\n                    <a-menu>\r\n                      <a-menu-item @click.stop=\"editItem(item)\">{{ t('btn_edit') }}</a-menu-item>\r\n                      <a-menu-item @click.stop=\"delItem(item)\"><span class=\"cFB363F\">{{ t('btn_delete') }}</span></a-menu-item>\r\n                    </a-menu>\r\n                  </template>\r\n                </a-dropdown>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div v-else class=\"empty-box\">\r\n          <img src=\"@/assets/empty.png\"/>\r\n          <div class=\"title\">{{ t('title_no_http_tool') }}</div>\r\n          <a-button @click=\"showStore\" class=\"btn\" type=\"primary\">{{ t('btn_add_now') }}</a-button>\r\n        </div>\r\n      </template>\r\n      <template v-else>\r\n        <div class=\"breadcrumb\">\r\n          <a @click=\"backToList\">{{ t('title_http_tool') }}</a> <span>/</span> <span class=\"cur\">{{ detailTool.name }}</span>\r\n        </div>\r\n        <HttpToolDetail\r\n          :tool=\"detailTool\"\r\n          @back=\"backToList\"\r\n          @editTool=\"showEditToolModal\"\r\n          @ok=\"loadData\"\r\n          @addTool=\"showToolModal\"\r\n          @editBase=\"editItem\"\r\n          @deleteBase=\"delItem\"\r\n        />\r\n      </template>\r\n      <HttpToolStore ref=\"storeRef\" @ok=\"loadData\"/>\r\n      <AddHttpToolModal :toolId=\"detailTool?.id || 0\" ref=\"addToolRef\" @ok=\"loadData\" />\r\n    </template>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport {h, ref, onMounted} from 'vue';\r\nimport {message, Modal} from 'ant-design-vue'\r\nimport { EllipsisOutlined } from '@ant-design/icons-vue';\r\nimport HttpToolStore from './http-tool-store.vue'\r\nimport AddHttpToolModal from './add-http-tool-modal.vue'\r\nimport HttpToolDetail from './http-tool-detail.vue'\r\nimport { getHttpTools, delHttpTool } from '@/api/robot/http_tool.js'\r\nimport { setDescRef, getTooltipTitle, timeNowGapFormat } from '@/utils/index'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.robot.robot-list.components.http-tool-box')\r\n\r\nconst storeRef = ref(null)\r\nconst addToolRef = ref(null)\r\nconst loading = ref(true)\r\nconst tools = ref([])\r\nconst detailTool = ref(null)\r\n\r\nonMounted(() => {\r\n  loadData()\r\n})\r\n\r\nfunction loadData() {\r\n  loading.value = true\r\n  const with_nodes = 1\r\n  getHttpTools({ page: 1, size: 9999, with_nodes }).then(res => {\r\n    const list = (res?.data?.list || []).map(it => ({\r\n      ...it,\r\n      up_time_text: timeNowGapFormat(it.update_time),\r\n      avatar: formatAvatar(it.avatar)\r\n    }))\r\n    tools.value = list\r\n    if (detailTool.value) {\r\n      const cur = list.find(i => i.id === detailTool.value.id)\r\n      if (cur) {\r\n        detailTool.value = cur\r\n      }\r\n    }\r\n  }).finally(() => {\r\n    loading.value = false\r\n  })\r\n}\r\n\r\nfunction showStore() {\r\n  storeRef.value.show()\r\n}\r\n\r\nfunction openDetail(item) {\r\n  detailTool.value = item\r\n}\r\nfunction backToList() {\r\n  detailTool.value = null\r\n}\r\n\r\nfunction editItem (item) {\r\n  storeRef.value.show({\r\n    id: item.id,\r\n    name: item.name,\r\n    description: item.description,\r\n    avatar: item.avatar\r\n  })\r\n}\r\n\r\nfunction showToolModal(item) {\r\n  // 改为添加工具\r\n  addToolRef.value && addToolRef.value.show()\r\n}\r\n\r\nfunction showEditToolModal (item) {\r\n  addToolRef.value && addToolRef.value.show(item)\r\n}\r\n\r\nfunction delItem(item) {\r\n  Modal.confirm({\r\n    title: t('btn_delete'),\r\n    content: t('msg_delete_confirm'),\r\n    okText: t('btn_confirm'),\r\n    cancelText: t('btn_cancel'),\r\n    onOk: () => {\r\n      delHttpTool({ id: item.id }).then(() => {\r\n        message.success(t('msg_deleted'))\r\n        if (detailTool.value && detailTool.value.id === item.id) {\r\n          detailTool.value = null\r\n        }\r\n        loadData()\r\n      })\r\n    }\r\n  })\r\n}\r\n\r\nfunction formatAvatar(avatar) {\r\n  const s = String(avatar || '').trim().replace(/[`\"']/g, '')\r\n  return s || '/src/assets/img/workflow/node-service.svg'\r\n}\r\n\r\ndefineExpose({\r\n  showStore\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n._http_tool_box {\r\n  padding-right: 32px;\r\n  height: 100%;\r\n  overflow-y: auto;\r\n\r\n  .loading-box {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    padding: 10vh 20vw;\r\n  }\r\n  .list-head {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    margin-bottom: 16px;\r\n    .title {\r\n      color: #262626;\r\n      font-size: 16px;\r\n      font-weight: 600;\r\n    }\r\n  }\r\n  .list-box {\r\n    display: flex;\r\n    align-items: center;\r\n    flex-wrap: wrap;\r\n    gap: 16px;\r\n    .app-item {\r\n      flex-shrink: 0;\r\n      width: calc((100% - 16px * 3) / 4);\r\n      max-width: 600px;\r\n      display: flex;\r\n      flex-direction: column;\r\n      gap: 12px;\r\n      padding: 24px;\r\n      border-radius: 12px;\r\n      border: 1px solid #E4E6EB;\r\n      color: #595959;\r\n      font-size: 14px;\r\n      font-weight: 400;\r\n      cursor: pointer;\r\n      .base-info-box {\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: space-between;\r\n        .avatar {\r\n          width: 62px;\r\n          height: 62px;\r\n          border-radius: 14.59px;\r\n          flex-shrink: 0;\r\n          margin-right: 12px;\r\n        }\r\n        .info-box {\r\n          flex: 1;\r\n          .name {\r\n            color: #262626;\r\n            font-size: 16px;\r\n            font-weight: 600;\r\n            margin-bottom: 4px;\r\n          }\r\n          .description {\r\n            height: 44px;\r\n            line-height: 22px;\r\n            margin-top: 12px;\r\n            font-size: 14px;\r\n            font-weight: 400;\r\n            color: rgb(89, 89, 89);\r\n            // 超出2行显示省略号\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n            display: -webkit-box;\r\n            -webkit-line-clamp: 2;\r\n            line-clamp: 2;\r\n            -webkit-box-orient: vertical;\r\n          }\r\n        }\r\n      }\r\n      .bottom {\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: space-between;\r\n      }\r\n      .extra-box {\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 12px;\r\n        color: #8c8c8c;\r\n        font-size: 12px;\r\n        font-weight: 400;\r\n      }\r\n\r\n      .bottom-right {\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 12px;\r\n        color: #8c8c8c;\r\n        font-size: 12px;\r\n        font-weight: 400;\r\n      }\r\n    }\r\n  }\r\n}\r\n.empty-box {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  margin: 40px 0;\r\n  img {\r\n    width: 200px;\r\n    height: 200px;\r\n  }\r\n  .title {\r\n    color: #262626;\r\n    font-size: 16px;\r\n    font-weight: 600;\r\n    line-height: 24px;\r\n  }\r\n  .btn {\r\n    margin-top: 24px;\r\n  }\r\n}\r\n.cFB363F {\r\n  color: #FB363F;\r\n}\r\n.breadcrumb {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  padding: 8px 4px 16px;\r\n  color: #595959;\r\n  .cur {\r\n    color: #262626;\r\n    font-weight: 600;\r\n  }\r\n}\r\n.auth-tag {\r\n  display: inline-block;\r\n  padding: 1px 8px;\r\n  border-radius: 6px;\r\n  background: #C4F5DB;\r\n  color: #17814e;\r\n  font-size: 12px;\r\n  font-weight: 400;\r\n  &.fail {\r\n    color: #ED744A;\r\n    background: #FFECE6;\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <a-modal\r\n    v-model:open=\"visible\"\r\n    :title=\"t('title_export_confirm')\"\r\n    width=\"746px\"\r\n    @ok=\"ok\"\r\n  >\r\n    <a-alert class=\"zm-alert-info mt24\" type=\"info\" :message=\"t('msg_export_info')\"/>\r\n    <div class=\"main\">\r\n      <div v-if=\"libraryList.length\" class=\"item\">\r\n        <a-checkbox v-model:checked=\"libraryChecked\">{{ t('label_library_content') }}</a-checkbox>\r\n        <div class=\"list\">\r\n          <a-tag v-for=\"item in libraryList\" :key=\"item.id\">{{ item.library_name }}</a-tag>\r\n        </div>\r\n        <div v-show=\"libraryChecked\" class=\"warning\">{{ t('msg_library_warning') }}</div>\r\n      </div>\r\n      <div v-if=\"dbList.length\" class=\"item\">\r\n        <a-checkbox v-model:checked=\"dbChecked\">{{ t('label_database_content') }}</a-checkbox>\r\n        <div class=\"list\">\r\n          <a-tag v-for=\"item in dbList\" :key=\"item.form_id\">{{ item.form_name }}</a-tag>\r\n        </div>\r\n        <div v-show=\"dbChecked\" class=\"warning\">{{ t('msg_database_warning') }}</div>\r\n      </div>\r\n    </div>\r\n  </a-modal>\r\n</template>\r\n\r\n<script setup>\r\nimport {ref} from 'vue'\r\nimport {useI18n} from '@/hooks/web/useI18n'\r\nimport {robotImportDataInfo} from \"@/api/robot/index.js\";\r\n\r\nconst {t} = useI18n('views.robot.robot-list.components.workflow-export-modal')\r\n\r\nconst emit = defineEmits(['ok'])\r\nconst visible = ref(false)\r\nconst robotInfo = ref({})\r\nconst libraryChecked = ref(false)\r\nconst dbChecked = ref(false)\r\nconst dbList = ref([])\r\nconst libraryList = ref([])\r\n\r\nfunction handle(r = {}) {\r\n  reset()\r\n  robotInfo.value = r\r\n  robotImportDataInfo({id: r?.id}).then(res => {\r\n    let data = res?.data || {}\r\n    dbList.value = data?.databaseList || []\r\n    libraryList.value = data?.library || []\r\n    if (!libraryList.value.length && !dbList.value.length) {\r\n      emit('ok', robotInfo.value)\r\n    } else {\r\n      visible.value = true\r\n    }\r\n  })\r\n}\r\n\r\nfunction reset() {\r\n  libraryList.value = []\r\n  dbList.value = []\r\n  libraryChecked.value = false\r\n  dbChecked.value = false\r\n}\r\n\r\nfunction ok() {\r\n  let data = {}\r\n  if (libraryChecked.value && libraryList.value.length) {\r\n    data.library_id = libraryList.value.map(i => i.id).toString()\r\n  }\r\n  if (dbChecked.value && dbList.value.length) {\r\n    data.form_id = dbList.value.map(i => i.form_id).toString()\r\n  }\r\n  visible.value = false\r\n  emit('ok', robotInfo.value, data)\r\n}\r\n\r\ndefineExpose({\r\n  handle,\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.mt24 {\r\n  margin-top: 24px;\r\n}\r\n\r\n.main {\r\n  .item {\r\n    margin-top: 12px;\r\n    padding: 16px;\r\n    background: #F2F4F7;\r\n\r\n    .list {\r\n      display: flex;\r\n      align-items: center;\r\n      flex-wrap: wrap;\r\n      gap: 8px;\r\n      margin-top: 12px;\r\n\r\n      :deep(.ant-tag) {\r\n        color: #595959;\r\n        font-size: 14px;\r\n        font-weight: 400;\r\n        padding: 5px 16px;\r\n        border-radius: 6px;\r\n        border: 1px solid #D9D9D9;\r\n        background: #F5F5F5;\r\n      }\r\n    }\r\n\r\n    .warning {\r\n      color: #fb363f;\r\n      margin-top: 8px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<style lang=\"less\" scoped>\r\n.robot-page {\r\n  padding-bottom: 8px;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n  .page-title {\r\n    line-height: 28px;\r\n    padding: 16px 0;\r\n    font-size: 20px;\r\n    font-weight: 600;\r\n    color: #000000;\r\n  }\r\n  .list-group-box {\r\n    display: flex;\r\n    gap: 16px;\r\n    flex: 1;\r\n    overflow: hidden;\r\n  }\r\n\r\n  .group-list-box {\r\n    width: 256px;\r\n    height: calc(100% - 8px);\r\n    border: 1px solid #d9d9d9;\r\n    border-radius: 6px;\r\n    margin-top: 8px;\r\n    padding: 16px;\r\n    padding-right: 0;\r\n    position: relative;\r\n    &.hide-group {\r\n      width: 0;\r\n      padding: 0;\r\n      border-left: 0;\r\n      border-top: 0;\r\n      border-bottom: 0;\r\n    }\r\n    .hide-group-box {\r\n      position: absolute;\r\n      right: -8px;\r\n      top: 40%;\r\n      height: 50px;\r\n      width: 13px;\r\n      border-radius: 8px;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      background: #e5e5ea;\r\n      color: #8c8c8c;\r\n      cursor: pointer;\r\n      opacity: 0.78;\r\n      &:hover {\r\n        opacity: 1;\r\n      }\r\n    }\r\n    .head-title {\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: space-between;\r\n      gap: 4px;\r\n      font-size: 16px;\r\n      font-weight: 600;\r\n      color: #262626;\r\n    }\r\n\r\n    .search-box {\r\n      margin-top: 16px;\r\n    }\r\n\r\n    .classify-box {\r\n      flex: 1;\r\n      overflow: hidden;\r\n      font-size: 14px;\r\n      .classify-item {\r\n        height: 32px;\r\n        padding: 0 8px;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: space-between;\r\n        margin-top: 4px;\r\n        cursor: pointer;\r\n        border-radius: 6px;\r\n        color: #595959;\r\n        transition: all 0.3s cubic-bezier(0.645, 0.045, 0.355, 1);\r\n\r\n        .classify-title {\r\n          flex: 1;\r\n          text-overflow: ellipsis;\r\n          overflow: hidden;\r\n          white-space: nowrap;\r\n        }\r\n        .num {\r\n          display: block;\r\n        }\r\n\r\n        .btn-box {\r\n          display: none;\r\n        }\r\n        &:hover {\r\n          background: #f2f4f7;\r\n          .num {\r\n            display: none;\r\n          }\r\n          .num.num-block {\r\n            display: block;\r\n          }\r\n          .btn-box {\r\n            display: block;\r\n          }\r\n        }\r\n        &.active {\r\n          color: #2475fc;\r\n          background: #e6efff;\r\n        }\r\n      }\r\n    }\r\n\r\n    .hover-btn-wrap {\r\n      width: fit-content;\r\n      height: 24px;\r\n      border-radius: 6px;\r\n      padding: 0 4px;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      cursor: pointer;\r\n      transition: all 0.3s cubic-bezier(0.645, 0.045, 0.355, 1);\r\n      &:hover {\r\n        background: #e4e6eb;\r\n      }\r\n    }\r\n  }\r\n\r\n  .robot-item {\r\n    padding: 8px;\r\n    border-bottom: 1px solid #ccc;\r\n  }\r\n\r\n  ::v-deep(.ant-tabs-nav::before) {\r\n    border-bottom: 0;\r\n  }\r\n\r\n  .list-toolbar {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    margin-bottom: 8px;\r\n  }\r\n  .robot-scroll-box{\r\n    flex: 1;\r\n    overflow: hidden;\r\n    height: 100%;\r\n  }\r\n\r\n  .list-box {\r\n    flex: 1;\r\n    width: 100%;\r\n    display: flex;\r\n    flex-flow: row wrap;\r\n    margin: 0 -8px 0 -8px;\r\n    height: fit-content;\r\n  }\r\n\r\n  .list-item-wrapper {\r\n    padding: 8px;\r\n    width: 25%;\r\n  }\r\n\r\n  .list-item {\r\n    position: relative;\r\n    width: 100%;\r\n    padding: 24px;\r\n    border: 1px solid #e4e6eb;\r\n    border-radius: 12px;\r\n    background-color: #fff;\r\n    transition: all 0.25s;\r\n    cursor: pointer;\r\n\r\n    &:hover {\r\n      box-shadow: 0 4px 16px 0 rgba(0, 0, 0, 0.12);\r\n    }\r\n\r\n    .robot-info {\r\n      display: flex;\r\n      // align-items: start;\r\n      align-items: center;\r\n    }\r\n\r\n    .robot-avatar {\r\n      width: 48px;\r\n      height: 48px;\r\n      border-radius: 14px;\r\n      overflow: hidden;\r\n    }\r\n\r\n    .robot-info-content {\r\n      flex: 1;\r\n      padding-left: 12px;\r\n      overflow: hidden;\r\n    }\r\n\r\n    .robot-name {\r\n      height: 24px;\r\n      line-height: 24px;\r\n      margin-bottom: 4px;\r\n      font-size: 16px;\r\n      font-weight: 600;\r\n      color: rgb(38, 38, 38);\r\n      white-space: nowrap;\r\n      overflow: hidden;\r\n      text-overflow: ellipsis;\r\n    }\r\n\r\n    .robot-desc {\r\n      height: 44px;\r\n      line-height: 22px;\r\n      margin-top: 12px;\r\n      font-size: 14px;\r\n      font-weight: 400;\r\n      color: rgb(89, 89, 89);\r\n      // 超出2行显示省略号\r\n      overflow: hidden;\r\n      text-overflow: ellipsis;\r\n      display: -webkit-box;\r\n      -webkit-line-clamp: 2;\r\n      line-clamp: 2;\r\n      -webkit-box-orient: vertical;\r\n    }\r\n\r\n    .robot-type-tag {\r\n      display: inline-block;\r\n      height: 22px;\r\n      line-height: 20px;\r\n      padding: 0 8px;\r\n      font-size: 12px;\r\n      font-weight: 400;\r\n      border-radius: 6px;\r\n      color: rgb(36, 117, 252);\r\n      border: 1px solid #cde0ff;\r\n    }\r\n\r\n    .robot-action {\r\n      margin-top: 12px;\r\n      font-size: 14px;\r\n      height: 24px;\r\n      color: #2475fc;\r\n      display: flex;\r\n      align-items: center;\r\n\r\n      .robot-action-item {\r\n        display: flex;\r\n        align-items: center;\r\n        height: 100%;\r\n        margin-right: 12px;\r\n        padding: 4px;\r\n        border-radius: 6px;\r\n        cursor: pointer;\r\n        color: #595959;\r\n        transition: all 0.2s;\r\n        &.drag-btn {\r\n          cursor: move;\r\n        }\r\n      }\r\n      .robot-action-item:hover {\r\n        background: #e4e6eb;\r\n      }\r\n\r\n      .action-icon {\r\n        font-size: 16px;\r\n      }\r\n    }\r\n  }\r\n\r\n  .add-robot {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    line-height: 22px;\r\n    color: #3a4559;\r\n    cursor: pointer;\r\n\r\n    .add-icon {\r\n      font-size: 16px;\r\n    }\r\n\r\n    .add-text {\r\n      padding-left: 4px;\r\n      font-size: 14px;\r\n    }\r\n  }\r\n}\r\n\r\n.empty-box {\r\n  width: 100%;\r\n  padding-top: 100px;\r\n}\r\n.create-action {\r\n  display: flex;\r\n  align-items: center;\r\n  .icon {\r\n    width: 20px;\r\n    height: 20px;\r\n    margin-right: 8px;\r\n  }\r\n}\r\n.toolbar-box {\r\n  position: relative;\r\n  padding-right: 32px;\r\n}\r\n.mr-16 {\r\n  margin-right: 16px;\r\n}\r\n\r\n// 大于1920px\r\n@media screen and (min-width: 1920px) {\r\n  .robot-page {\r\n    .list-box {\r\n      .list-item-wrapper {\r\n        width: 20%;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.desc-box {\r\n  width: 200px;\r\n  position: absolute;\r\n  bottom: -29px;\r\n  left: -35px;\r\n  margin-top: 12px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n  color: #8c8c8c;\r\n  font-size: 14px;\r\n  font-style: normal;\r\n  font-weight: 400;\r\n  line-height: 22px;\r\n\r\n  .link {\r\n    cursor: pointer;\r\n    color: #2475fc;\r\n    font-size: 14px;\r\n    font-style: normal;\r\n    font-weight: 400;\r\n    line-height: 22px;\r\n\r\n    &:hover {\r\n      opacity: 0.8;\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n<template>\r\n  <div class=\"robot-page\">\r\n<!--    <h3 class=\"page-title\">应用</h3>-->\r\n    <page-alert class=\"mt16\" :title=\"t('title_usage_guide')\">\r\n      <div>\r\n        <p>\r\n          {{ t('usage_guide_content_1') }}\r\n        </p>\r\n        <p>{{ t('usage_guide_content_2') }}</p>\r\n      </div>\r\n    </page-alert>\r\n\r\n    <div class=\"list-toolbar mt16\">\r\n      <div class=\"toolbar-box\">\r\n        <ListTabs :tabs=\"tabs\" @change=\"initData\" v-model:value=\"activeKey\" />\r\n      </div>\r\n      <div class=\"toolbar-box\" style=\"text-align: right;\">\r\n        <a-dropdown v-if=\"robotCreate\">\r\n          <a-button type=\"primary\" @click.prevent=\"\">\r\n            <template #icon>\r\n              <PlusOutlined />\r\n            </template>\r\n            {{ t('btn_create_app') }}\r\n          </a-button>\r\n          <template #overlay>\r\n            <a-menu>\r\n              <a-menu-item @click.prevent=\"toAddRobot(0)\">\r\n                <span class=\"create-action\">\r\n                  <img class=\"icon\" :src=\"DEFAULT_ROBOT_AVATAR\" alt=\"\" />\r\n                  <span>{{ t('label_chat_bot') }}</span>\r\n                </span>\r\n              </a-menu-item>\r\n              <a-menu-item @click.prevent=\"toAddRobot(1)\">\r\n                <span class=\"create-action\">\r\n                  <img class=\"icon\" :src=\"DEFAULT_WORKFLOW_AVATAR\" alt=\"\" />\r\n                  <span>{{ t('label_workflow') }}</span>\r\n                </span>\r\n              </a-menu-item>\r\n              <a-menu-item @click.prevent=\"toAddThirdMcp\">\r\n                <span class=\"create-action\">\r\n                  <img class=\"icon\" :src=\"DEFAULT_MCP_AVATAR\" alt=\"\" />\r\n                  <span>{{ t('label_external_mcp') }}</span>\r\n                </span>\r\n              </a-menu-item>\r\n              <a-menu-item @click.prevent=\"toAddHttpTool\">\r\n                <span class=\"create-action\">\r\n                  <img class=\"icon\" :src=\"DEFAULT_MCP_AVATAR\" alt=\"\" />\r\n                  <span>{{ t('label_http_tool') }}</span>\r\n                </span>\r\n              </a-menu-item>\r\n              <a-menu-item @click=\"toImportCsl\">\r\n                <span class=\"create-action\">\r\n                  <img class=\"icon\" :src=\"DEFAULT_IMPORT_CSL_AVATAR\" alt=\"\">\r\n                  <span>{{ t('label_import_csl_create') }}</span>\r\n                </span>\r\n              </a-menu-item>\r\n            </a-menu>\r\n          </template>\r\n        </a-dropdown>\r\n        <div v-if=\"robotCreate && activeKey == '3'\" class=\"desc-box\"><div class=\"link\" @click=\"goMcpSquare\">{{ t('link_more_mcp_square') }}</div></div>\r\n      </div>\r\n    </div>\r\n\r\n    <McpPanel v-if=\"activeKey == 3\" ref=\"mcpPanelRef\"/>\r\n    <HttpToolBox v-else-if=\"activeKey == 6\" ref=\"httpToolBoxRef\" />\r\n    <div v-else class=\"list-group-box\">\r\n      <div class=\"group-list-box\" :class=\"{ 'hide-group': isHideGroup }\">\r\n        <cu-scroll style=\"padding-right: 16px\">\r\n          <div class=\"group-head-box\" v-if=\"!isHideGroup\">\r\n            <div class=\"head-title\">\r\n              <div>{{ t('title_robot_group') }}</div>\r\n              <a-tooltip :title=\"t('tooltip_new_group')\">\r\n                <div class=\"hover-btn-wrap\" @click=\"openGroupModal({})\"><PlusOutlined /></div>\r\n              </a-tooltip>\r\n            </div>\r\n            <div class=\"search-box\">\r\n              <a-input\r\n                v-model:value=\"groupSearchKey\"\r\n                allowClear\r\n                :placeholder=\"t('ph_search_group')\"\r\n                style=\"width: 100%\"\r\n              >\r\n                <template #suffix>\r\n                  <SearchOutlined @click.stop=\"\" />\r\n                </template>\r\n              </a-input>\r\n            </div>\r\n          </div>\r\n          <div class=\"classify-box\">\r\n            <div\r\n              class=\"classify-item\"\r\n              @click=\"handleChangeGroup(item)\"\r\n              :class=\"{ active: item.id == group_id }\"\r\n              v-for=\"item in filterGroupLists\"\r\n              :key=\"item.id\"\r\n            >\r\n              <div class=\"classify-title\">{{ item.group_name }}</div>\r\n              <div class=\"right-content\">\r\n                <div class=\"num\" :class=\"{ 'num-block': item.id <= 0 }\">{{ item.total }}</div>\r\n                <div class=\"btn-box\" v-if=\"item.id > 0\">\r\n                  <a-dropdown placement=\"bottomRight\">\r\n                    <div class=\"hover-btn-wrap\">\r\n                      <EllipsisOutlined />\r\n                    </div>\r\n                    <template #overlay>\r\n                      <a-menu>\r\n                        <a-menu-item>\r\n                          <div @click.stop=\"openGroupModal(item)\">{{ t('btn_rename') }}</div>\r\n                        </a-menu-item>\r\n                        <a-menu-item>\r\n                          <div @click.stop=\"handleDelGroup(item)\">{{ t('btn_delete') }}</div>\r\n                        </a-menu-item>\r\n                      </a-menu>\r\n                    </template>\r\n                  </a-dropdown>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </cu-scroll>\r\n        <a-tooltip placement=\"right\" :title=\"isHideGroup ? t('tooltip_expand_group') : t('tooltip_collapse_group')\">\r\n          <div class=\"hide-group-box\" @click=\"handleChangeHideGroup\">\r\n            <LeftOutlined v-if=\"!isHideGroup\" />\r\n            <RightOutlined v-else />\r\n          </div>\r\n        </a-tooltip>\r\n      </div>\r\n      <div class=\"robot-scroll-box\">\r\n        <div class=\"empty-box\" v-if=\"filterRobotList.length == 0\">\r\n          <a-empty></a-empty>\r\n        </div>\r\n        <cu-scroll style=\"padding-right: 16px\">\r\n          <draggable\r\n            v-model=\"filterRobotList\"\r\n            handle=\".drag-btn\"\r\n            item-key=\"id\"\r\n            :disabled=\"moving\"\r\n            class=\"list-box\"\r\n            @end=\"onDragEnd\"\r\n          >\r\n            <template #item=\"{ element: item, index }\">\r\n              <div\r\n                class=\"list-item-wrapper\"\r\n                :key=\"item.id\"\r\n                @click=\"toEditRobot(item)\"\r\n              >\r\n                <div class=\"list-item\">\r\n                  <div class=\"robot-info\">\r\n                    <img class=\"robot-avatar\" :src=\"item.robot_avatar\" alt=\"\" />\r\n                    <div class=\"robot-info-content\">\r\n                      <div class=\"robot-name\">{{ item.robot_name }}</div>\r\n                      <div class=\"robot-type-tag\">\r\n                        {{ item.application_type == 0 ? t('label_chat_bot') : t('label_workflow') }}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <a-tooltip :title=\"getTooltipTitle(item.robot_intro, item, 14, 2, 10)\" placement=\"top\">\r\n                    <div class=\"robot-desc\" :ref=\"el => setDescRef(el, item)\">{{ item.robot_intro }}</div>\r\n                  </a-tooltip>\r\n                  <div class=\"robot-action\" @click.stop>\r\n                    <!-- <div class=\"robot-action-item\" @click=\"toEditRobot(item)\"><svg-icon class=\"action-icon\" name=\"jibenpeizhi\" /></div> -->\r\n                    <!-- <div class=\"robot-action-item\" @click=\"toTestPage(item)\"><svg-icon class=\"action-icon\" name=\"cmd\" /></div> -->\r\n                    <a-tooltip :title=\"t('tooltip_drag_sort')\">\r\n                      <div class=\"robot-action-item drag-btn\" @click.stop>\r\n                        <svg-icon class=\"action-icon\" name=\"dragv2\"></svg-icon>\r\n                      </div>\r\n                    </a-tooltip>\r\n                    <a-tooltip :title=\"t('tooltip_chat_test')\">\r\n                      <div class=\"robot-action-item\" @click.stop=\"toTestPage(item)\">\r\n                        <svg-icon class=\"action-icon\" name=\"chat\"></svg-icon>\r\n                      </div>\r\n                    </a-tooltip>\r\n                    <a-tooltip :title=\"t('tooltip_session_record')\">\r\n                      <div class=\"robot-action-item\" @click.stop=\"toSessionRecordPage(item)\">\r\n                        <svg-icon class=\"action-icon\" name=\"session\"></svg-icon>\r\n                      </div>\r\n                    </a-tooltip>\r\n                    <a-tooltip :title=\"t('tooltip_statistics')\">\r\n                      <div class=\"robot-action-item\" @click.stop=\"toAnalysisPage(item)\">\r\n                        <svg-icon class=\"action-icon\" name=\"analysis\"></svg-icon>\r\n                      </div>\r\n                    </a-tooltip>\r\n\r\n                    <a-dropdown>\r\n                      <div class=\"robot-action-item\" @click.stop>\r\n                        <svg-icon class=\"action-icon\" name=\"point-h\"></svg-icon>\r\n                      </div>\r\n                      <template #overlay>\r\n                        <a-menu>\r\n                          <a-menu-item>\r\n                            <a\r\n                              class=\"delete-text-color\"\r\n                              href=\"javascript:;\"\r\n                              @click=\"handleDelete(item)\"\r\n                            >{{ t('btn_delete') }}</a\r\n                            >\r\n                          </a-menu-item>\r\n                          <a-menu-item>\r\n                            <div @click.stop=\"openEditGroupModal(item)\">{{ t('btn_edit_group') }}</div>\r\n                          </a-menu-item>\r\n                          <a-menu-item>\r\n                            <a class=\"copy-text-color\" href=\"javascript:;\" @click=\"handleCopy(item)\"\r\n                            >{{ t('btn_copy') }}</a\r\n                            >\r\n                          </a-menu-item>\r\n                          <a-menu-item @click=\"handleExportCsl(item)\">\r\n                            <span>{{ t('btn_export_csl') }}</span>\r\n                          </a-menu-item>\r\n                        </a-menu>\r\n                      </template>\r\n                    </a-dropdown>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </template>\r\n          </draggable>\r\n        </cu-scroll>\r\n      </div>\r\n    </div>\r\n\r\n    <AddRobotAlert ref=\"addRobotAlertRef\" @ok=\"initData\" />\r\n    <AddGroup ref=\"addGroupRef\" @ok=\"initData\" />\r\n    <EditGroup ref=\"editGroupRef\" @ok=\"initData\" />\r\n    <ImportCslAlert ref=\"importCslAlertRef\" @ok=\"handleImportOk\" />\r\n    <ThirdMcpStore ref=\"thirdMcpRef\" @ok=\"thirdMcpUpdate\"/>\r\n    <WorkflowExportModal ref=\"exportRef\" @ok=\"(r, d) => runExportCsl(r, d)\"/>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { DEFAULT_ROBOT_AVATAR, DEFAULT_WORKFLOW_AVATAR, DEFAULT_IMPORT_CSL_AVATAR, DEFAULT_MCP_AVATAR } from '@/constants/index.js'\r\nimport { usePermissionStore } from '@/stores/modules/permission'\r\nimport draggable from 'vuedraggable'\r\nimport {\r\n  getRobotList,\r\n  deleteRobot,\r\n  robotCopy,\r\n  getRobotGroupList,\r\n  deleteRobotGroup,\r\n  moveRobotSort,\r\n} from '@/api/robot/index.js'\r\nimport { ref, onMounted, createVNode, computed, nextTick } from 'vue'\r\nimport {useRoute} from 'vue-router'\r\nimport {\r\n  ExclamationCircleOutlined,\r\n  PlusOutlined,\r\n  SearchOutlined,\r\n  EllipsisOutlined,\r\n  LeftOutlined,\r\n  RightOutlined\r\n} from '@ant-design/icons-vue'\r\nimport { Modal, message } from 'ant-design-vue'\r\nimport AddRobotAlert from './components/add-robot-alert.vue'\r\nimport ImportCslAlert from './components/import-csl-alert.vue'\r\nimport PageAlert from '@/components/page-alert/page-alert.vue'\r\nimport ListTabs from '@/components/cu-tabs/list-tabs.vue'\r\nimport { getRobotPermission } from '@/utils/permission'\r\nimport AddGroup from '@/views/robot/robot-list/components/add-group.vue'\r\nimport EditGroup from '@/views/robot/robot-list/components/edit-group.vue'\r\nimport { useOpenUrlWithToken } from '@/hooks/web'\r\nimport McpPanel from \"@/views/robot/robot-list/components/mcp-panel.vue\";\r\nimport ThirdMcpStore from \"@/views/robot/robot-list/components/third-mcp-store.vue\";\r\nimport HttpToolBox from \"@/views/robot/robot-list/components/http-tool-box.vue\";\r\nimport { useRouter } from 'vue-router'\r\nimport { setDescRef, getTooltipTitle, objectToQueryString } from '@/utils/index'\r\nimport WorkflowExportModal from \"@/views/robot/robot-list/components/workflow-export-modal.vue\";\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.robot.robot-list.robot-list')\r\n\r\nconst router = useRouter()\r\n\r\nconst route = useRoute()\r\n\r\nconst tabs = ref([\r\n  {\r\n    title: `${t('tab_all')} (0)`,\r\n    value: '2'\r\n  },\r\n  {\r\n    title: `${t('label_chat_bot')} (0)`,\r\n    value: '0'\r\n  },\r\n  {\r\n    title: `${t('label_workflow')} (0)`,\r\n    value: '1'\r\n  },\r\n  {\r\n    title: t('tab_mcp_plugin'),\r\n    value: '3'\r\n  },\r\n  {\r\n    title: t('tab_http_tool'),\r\n    value: '6'\r\n  }\r\n])\r\n\r\nconst permissionStore = usePermissionStore()\r\n\r\nlet { role_permission, role_type } = permissionStore\r\nconst robotCreate = computed(() => role_type == 1 || role_permission.includes('RobotCreate'))\r\n\r\n\r\nconst exportRef = ref(null)\r\nconst mcpPanelRef = ref(null)\r\nconst activeKey = ref('2')\r\nconst httpToolBoxRef = ref(null)\r\n\r\nconst group_id = ref('')\r\n\r\nconst robotList = ref([])\r\nconst filterRobotList = ref([])\r\nconst moving = ref(false)\r\n\r\nlet hideGroupLocalKey = 'robot-list-hide-group-key'\r\n\r\nconst isHideGroup = ref(localStorage.getItem(hideGroupLocalKey) == 1)\r\n\r\nconst handleChangeHideGroup = () => {\r\n  isHideGroup.value = !isHideGroup.value\r\n  localStorage.setItem(hideGroupLocalKey, isHideGroup.value ? 1 : 0)\r\n}\r\n\r\nconst initData = () => {\r\n  getList()\r\n  getGroupList()\r\n}\r\n\r\nconst filterRobotInit = () => {\r\n  let lists = robotList.value\r\n  if (group_id.value != '') {\r\n    lists = lists.filter((item) => item.group_id == group_id.value)\r\n  }\r\n  if (activeKey.value != 2) {\r\n    lists = lists.filter((item) => item.application_type == activeKey.value)\r\n  }\r\n  filterRobotList.value = lists\r\n}\r\n\r\nfunction goMcpSquare () {\r\n  const url = router.resolve({\r\n    path: '/mcp/index'\r\n  }).href\r\n  window.open(url, '_blank')\r\n}\r\n\r\nconst getList = () => {\r\n    getRobotList()\r\n    .then((res) => {\r\n    let allNumber = 0\r\n    let chatNumber = 0\r\n    let workflowNumber = 0\r\n\r\n    res.data.forEach((item) => {\r\n      if (item.application_type == 0) {\r\n        chatNumber++\r\n      } else {\r\n        workflowNumber++\r\n      }\r\n      allNumber++\r\n    })\r\n\r\n    tabs.value = [\r\n      {\r\n        title: `${t('tab_all')} (${allNumber})`,\r\n        value: '2'\r\n      },\r\n      {\r\n        title: `${t('label_chat_bot')} (${chatNumber})`,\r\n        value: '0'\r\n      },\r\n      {\r\n        title: `${t('label_workflow')} (${workflowNumber})`,\r\n        value: '1'\r\n      },\r\n      {\r\n        title: t('tab_mcp_plugin'),\r\n        value: '3'\r\n      },\r\n      {\r\n        title: t('tab_http_tool'),\r\n        value: '6'\r\n      }\r\n    ]\r\n    robotList.value = res.data\r\n    filterRobotInit()\r\n    })\r\n    .catch(() => {})\r\n}\r\n\r\nconst addRobotAlertRef = ref(null)\r\nconst importCslAlertRef = ref(null)\r\nconst thirdMcpRef = ref(null)\r\nconst toAddRobot = (val) => {\r\n  // router.push({ name: 'addRobot' })\r\n  addRobotAlertRef.value.open(val)\r\n  addRobotAlertRef.value.setGroupId(group_id.value)\r\n}\r\n\r\nconst toAddThirdMcp = () => {\r\n  thirdMcpRef.value.show()\r\n}\r\n\r\nconst toImportCsl = () => {\r\n  importCslAlertRef.value.open()\r\n}\r\n\r\nconst handleImportOk = (data) => {\r\n  getList()\r\n toEditRobot(data)\r\n}\r\n\r\nconst toEditRobot = ({ id, robot_key, application_type }) => {\r\n  localStorage.setItem('last_local_robot_id', id)\r\n  if (application_type == 0) {\r\n    // router.push({ path: '/robot/config/basic-config', query: { id: id, robot_key: robot_key  } })\r\n    window.open(\r\n      `/#/robot/config/basic-config?id=${id}&robot_key=${robot_key}`,\r\n      '_blank',\r\n      'noopener'\r\n    ) // 建议添加 noopener 防止安全漏洞\r\n  } else {\r\n    // router.push({ path: '/robot/config/workflow', query: { id: id, robot_key: robot_key  } })\r\n    window.open(`/#/robot/config/workflow?id=${id}&robot_key=${robot_key}`, '_blank', 'noopener') // 建议添加 noopener 防止安全漏洞\r\n  }\r\n}\r\nconst toAddHttpTool = () => {\r\n  activeKey.value = '6'\r\n  nextTick(() => {\r\n    // 直接调用子组件暴露的方法\r\n    const httpComp = (typeof httpToolBoxRef.value !== 'undefined') ? httpToolBoxRef.value : null\r\n    if (httpComp && httpComp.showStore) {\r\n      httpComp.showStore()\r\n    }\r\n  })\r\n}\r\n\r\nconst handleDelete = (data) => {\r\n  let key = getRobotPermission(data.id)\r\n  if (key != 4) {\r\n    return message.error(t('msg_no_delete_permission'))\r\n  }\r\n  let secondsToGo = 3\r\n  let modal = Modal.confirm({\r\n    title: `${t('title_delete_robot')}${data.robot_name}`,\r\n    icon: createVNode(ExclamationCircleOutlined),\r\n    content: t('msg_confirm_delete_robot'),\r\n    okText: secondsToGo + ' ' + t('btn_confirm'),\r\n    okType: 'danger',\r\n    cancelText: t('btn_cancel'),\r\n    okButtonProps: {\r\n      disabled: true\r\n    },\r\n    onOk() {\r\n      onDelete(data)\r\n    },\r\n    onCancel() {}\r\n  })\r\n\r\n  let interval = setInterval(() => {\r\n    if (secondsToGo == 1) {\r\n      modal.update({\r\n        okText: t('btn_confirm'),\r\n        okButtonProps: {\r\n          disabled: false\r\n        }\r\n      })\r\n\r\n      clearInterval(interval)\r\n      interval = undefined\r\n    } else {\r\n      secondsToGo -= 1\r\n\r\n      modal.update({\r\n        okText: secondsToGo + ' ' + t('btn_confirm'),\r\n        okButtonProps: {\r\n          disabled: true\r\n        }\r\n      })\r\n    }\r\n  }, 1000)\r\n}\r\n\r\nconst onDelete = ({ id }) => {\r\n  deleteRobot({ id }).then(() => {\r\n    message.success(t('msg_delete_success'))\r\n    getList()\r\n  })\r\n}\r\n\r\nconst handleCopy = (data) => {\r\n  let secondsToGo = 3\r\n  let modal = Modal.confirm({\r\n    title: `${t('title_copy_robot')}${data.robot_name}`,\r\n    icon: createVNode(ExclamationCircleOutlined),\r\n    content: t('msg_confirm_copy_robot'),\r\n    okText: secondsToGo + ' ' + t('btn_confirm'),\r\n    okType: 'danger',\r\n    cancelText: t('btn_cancel'),\r\n    okButtonProps: {\r\n      disabled: true\r\n    },\r\n    onOk() {\r\n      onCopy(data)\r\n    },\r\n    onCancel() {}\r\n  })\r\n\r\n  let interval = setInterval(() => {\r\n    if (secondsToGo == 1) {\r\n      modal.update({\r\n        okText: t('btn_confirm'),\r\n        okButtonProps: {\r\n          disabled: false\r\n        }\r\n      })\r\n\r\n      clearInterval(interval)\r\n      interval = undefined\r\n    } else {\r\n      secondsToGo -= 1\r\n\r\n      modal.update({\r\n        okText: secondsToGo + ' ' + t('btn_confirm'),\r\n        okButtonProps: {\r\n          disabled: true\r\n        }\r\n      })\r\n    }\r\n  }, 1000)\r\n}\r\n\r\nconst onCopy = ({ id }) => {\r\n  robotCopy({ id }).then(() => {\r\n    message.success(t('msg_copy_success'))\r\n    getList()\r\n  })\r\n}\r\n\r\n// 导出为csl\r\nconst handleExportCsl = (data) => {\r\n  exportRef.value.handle(data)\r\n}\r\n\r\nconst runExportCsl = (data, params=null) => {\r\n  const { openUrlWithToken } = useOpenUrlWithToken()\r\n  params = params || {}\r\n  params.id = data.id\r\n  console.log('---', `/manage/robotExport?${objectToQueryString(params)}`)\r\n  openUrlWithToken(`/manage/robotExport?${objectToQueryString(params)}`)\r\n}\r\n\r\nconst toTestPage = (item) => {\r\n  window.open(`#/robot/test?robot_key=${item.robot_key}&id=${item.id}`)\r\n}\r\n\r\nconst toSessionRecordPage = (item) => {\r\n  window.open(`#/robot/config/session-record?robot_key=${item.robot_key}&id=${item.id}`)\r\n}\r\n\r\nconst toAnalysisPage = (item) => {\r\n  window.open(`#/robot/config/statistical_analysis?robot_key=${item.robot_key}&id=${item.id}`)\r\n}\r\n\r\nconst groupSearchKey = ref('')\r\nconst groupLists = ref([])\r\n\r\nconst filterGroupLists = computed(() => {\r\n  return groupLists.value.filter((item) => item.group_name.includes(groupSearchKey.value))\r\n})\r\n\r\nconst getGroupList = () => {\r\n  getRobotGroupList({\r\n    application_type: activeKey.value == 2 ? null : activeKey.value\r\n  }).then((res) => {\r\n    let lists = res.data || []\r\n    let totalNumber = 0\r\n    // 计算每个分组的机器人数量\r\n    lists.forEach((group) => {\r\n      totalNumber += +group.total\r\n    })\r\n    groupLists.value = [\r\n      {\r\n        group_name: t('tab_all'),\r\n        total: totalNumber,\r\n        id: ''\r\n      },\r\n      ...lists\r\n    ]\r\n  })\r\n}\r\n\r\nconst handleChangeGroup = (item) => {\r\n  group_id.value = item.id\r\n  getList()\r\n}\r\n\r\nconst addGroupRef = ref(null)\r\nconst openGroupModal = (data) => {\r\n  addGroupRef.value.show({\r\n    ...data\r\n  })\r\n}\r\n\r\nconst editGroupRef = ref(null)\r\nconst openEditGroupModal = (item) => {\r\n  editGroupRef.value.show({\r\n    ...item\r\n  })\r\n}\r\n\r\nconst handleDelGroup = (item) => {\r\n  Modal.confirm({\r\n    title: `${t('title_delete_group')}${item.group_name}`,\r\n    icon: createVNode(ExclamationCircleOutlined),\r\n    content: '',\r\n    okText: t('btn_confirm_delete_group'),\r\n    okType: 'danger',\r\n    cancelText: t('btn_cancel'),\r\n    onOk() {\r\n      deleteRobotGroup({\r\n        id: item.id\r\n      }).then(() => {\r\n        message.success(t('msg_delete_success'))\r\n        getGroupList()\r\n        if (group_id.value == item.id) {\r\n          group_id.value = ''\r\n          getList()\r\n        }\r\n      })\r\n    }\r\n  })\r\n}\r\n\r\nconst thirdMcpUpdate = () => {\r\n  if (mcpPanelRef.value) {\r\n    mcpPanelRef.value.update()\r\n  }\r\n}\r\n\r\nconst onDragEnd = (e) => {\r\n  if (e.newIndex === e.oldIndex) return\r\n  moving.value = true\r\n  let params = {\r\n    move_robot_id: filterRobotList.value[e.newIndex].id,\r\n    to_robot_id: 0\r\n  }\r\n  if (e.newIndex > 0) params.to_robot_id = filterRobotList.value[e.newIndex - 1].id\r\n  moveRobotSort(params).then(res => {\r\n    message.success(t('msg_operation_complete'))\r\n  }).finally(() => {\r\n    moving.value = false\r\n  })\r\n}\r\n\r\nonMounted(() => {\r\n  activeKey.value = route.query.active || '2'\r\n  initData()\r\n})\r\n</script>\r\n"],"names":["t","useI18n","emit","__emit","show","ref","saveLoading","fileList","open","onCancel","handleSave","message","robotImport","res","beforeUpload","file","Upload","handleChange","info","status","__expose","_createBlock","_component_a_modal","$event","_unref","_createElementVNode","_hoisted_1","_hoisted_2","_createVNode","_component_a_alert","_component_a_upload_dragger","_hoisted_3","InboxOutlined","_hoisted_4","_toDisplayString","_hoisted_5","modalTitle","formState","reactive","groupLists","data","getGroupList","handleOk","relationRobotGroup","getRobotGroupList","_createElementBlock","_component_a_select","_cache","_Fragment","_renderList","item","_component_a_select_option","_createTextVNode","useOpenUrlWithToken","userStore","useUserStore","url","token","separator","urlWithToken","getMcpServers","params","request","saveMcpServer","delMcpServer","updateMcpSrvStatus","saveMcpTool","editMcpTool","delMcpTool","visible","saving","avatarData","formStateStruct","DEFAULT_MCP_AVATAR","avatarChange","save","_a","e","AvatarInput","_component_a_form","_component_a_form_item","_component_a_input","_component_a_textarea","list","selected","ids","loadData","getRobotList","ok","i","_openBlock","_normalizeClass","_hoisted_6","_component_a_checkbox","_hoisted_7","ExclamationCircleFilled","mcpRef","workflowRef","loading","statusLoading","appInfo","appData","tools","identVisible","identSaving","identValue","identRecord","onMounted","init","_b","_c","jsonDecode","appDataFormat","statusChange","cancel","Modal","showMcpModal","_info","delMcp","showWorkflowModal","showIdentModal","identInput","saveIdent","delTool","saveTools","_component_a_spin","_hoisted_8","_hoisted_9","CheckCircleFilled","_hoisted_10","_hoisted_11","_hoisted_12","_component_a_switch","_component_a_button","h","PlusOutlined","_component_a_dropdown","_component_a_menu","_component_a_menu_item","_hoisted_13","EllipsisOutlined","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_component_a_divider","_hoisted_18","_hoisted_19","AppstoreOutlined","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","field","j","_component_a_tag","_component_a_popover","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_imports_0","_hoisted_34","_hoisted_35","_hoisted_36","McpStore","SelectWorkflowModal","_hoisted_37","checking","refreshing","detail","hide","authConfig","type","auth","setShowReqError","authTMcpProvider","refresh","err","editApp","delApp","needAuth","func","getTMcpProviderInfo","timeNowGapFormat","_component_a_drawer","CloseOutlined","SyncOutlined","tool","_imports_1","providerId","authDataBack","headers","key","addHeader","delHeader","index","hasAuthDataChange","saveTMcpProvider","provider_id","_component_a_input_number","CloseCircleOutlined","router","useRouter","mcpDetailRef","mcpStoreRef","update","getTMcpProviders","_list","showDetail","goMcpSquare","delTMcpProvider","_withModifiers","ThirdMcpDetail","ThirdMcpStore","route","useRoute","active","tabChange","onThirdListLoaded","len","McpBox","ThirdMcpBox","props","__props","imageUrl","watch","val","formItemContext","Form","triggerChange","link","uploadFile","previewVisible","previewImage","previewTitle","handleCancel","handlePreview","_component_a_upload","LoadingOutlined","base","source","avatarLink","saveHttpTool","HttpToolAvatarInput","initSelected","tableData","columns","state","onSelectChange","selectedRowKeys","getConfigList","handleAddKey","getUuid","handleDel","record","getHttpAuthConfig","selKeys","it","getParmas","errorIndex","resultList","http_auth_config_list","uni_key","saveHttpAuthConfig","_component_a_table","_withCtx","column","_component_a_popconfirm","parseCurlModalRef","addAuthModalRef","formRef","inputFormRef","form","editingId","typOptions","rules","rule","value","inputRules","_rule","arr","curl","httpAuth","a","raw","handleParseResult","parsed","handleValue","v","isJson","k","body","showParseModal","handleOpenAuthenticationModal","handleSaveAuthentication","nextTick","handleDelAuthentication","onTypeChange","onAddSubs","d","bodyRaw","ap","dataRawObj","payload","doSave","saveHttpToolItem","del","delHttpToolItem","_component_svg_icon","CodeOutlined","_component_a_radio_group","_component_a_radio","_component_a_tooltip","QuestionCircleOutlined","op","PlusCircleOutlined","_hoisted_40","SubKey","ParseCurlModal","AddAuthenticationModal","delItem","ExclamationCircleOutlined","avatarUrl","computed","formatTs","ts","n","ms","dayjs","nodesList","paramsArr","bodyArr","displayParams","x","getTooltipTitle","text","context","textWidth","titleRef","maxWidth","$emit","storeRef","addToolRef","detailTool","getHttpTools","formatAvatar","cur","showStore","openDetail","backToList","editItem","showToolModal","showEditToolModal","delHttpTool","avatar","HttpToolDetail","el","HttpToolStore","AddHttpToolModal","robotInfo","libraryChecked","dbChecked","dbList","libraryList","handle","r","reset","robotImportDataInfo","_withDirectives","tabs","permissionStore","usePermissionStore","role_permission","role_type","robotCreate","exportRef","mcpPanelRef","activeKey","httpToolBoxRef","group_id","robotList","filterRobotList","moving","hideGroupLocalKey","isHideGroup","handleChangeHideGroup","initData","getList","filterRobotInit","lists","allNumber","chatNumber","workflowNumber","addRobotAlertRef","importCslAlertRef","thirdMcpRef","toAddRobot","toAddThirdMcp","toImportCsl","handleImportOk","toEditRobot","id","robot_key","application_type","toAddHttpTool","httpComp","handleDelete","getRobotPermission","secondsToGo","modal","createVNode","onDelete","interval","deleteRobot","handleCopy","onCopy","robotCopy","handleExportCsl","runExportCsl","openUrlWithToken","objectToQueryString","toTestPage","toSessionRecordPage","toAnalysisPage","groupSearchKey","filterGroupLists","totalNumber","group","handleChangeGroup","addGroupRef","openGroupModal","editGroupRef","openEditGroupModal","handleDelGroup","deleteRobotGroup","thirdMcpUpdate","onDragEnd","moveRobotSort","PageAlert","ListTabs","DEFAULT_ROBOT_AVATAR","DEFAULT_WORKFLOW_AVATAR","DEFAULT_IMPORT_CSL_AVATAR","McpPanel","HttpToolBox","_component_cu_scroll","SearchOutlined","RightOutlined","LeftOutlined","_component_a_empty","draggable","_hoisted_41","_hoisted_42","AddRobotAlert","AddGroup","EditGroup","ImportCslAlert","WorkflowExportModal"],"mappings":"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"}