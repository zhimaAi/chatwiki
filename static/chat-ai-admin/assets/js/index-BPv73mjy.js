import{_ as Y}from"./cu-scroll-BmJNJRCz.js";import{_ as Z,Z as q,a2 as K}from"../../index-C1Xsov4S.js";import{p as F,an as R,B as W,aw as X,ai as tt,D as st,as as et,bn as ot,ak as nt,M as A,Q as rt}from"./ui-antd-D64OvTpt.js";import{f as m,Y as r,_ as e,k as a,a2 as c,a5 as s,F as h,ab as N,ac as lt,a1 as k,ae as i,a7 as n,u as y,G as u,l as ct,L as at,e as G,a3 as V,aj as z,a4 as E}from"./vue-chunks-DCKTEHpB.js";const it={class:"prompt-wrapper"},dt={class:"group-box"},ut={class:"group-list-box"},_t=["onClick"],pt={class:"group-name"},vt={class:"name-text"},mt={class:"content-box"},ht={class:"opration-btn-block"},kt={class:"content-scroll-box"},yt={key:0,class:"loading-box"},bt={class:"prompt-list-box"},gt={class:"prompt-header"},ft={class:"prompt-title"},Ct={key:0,class:"prompt-type diy"},xt={key:1,class:"prompt-type"},Lt={class:"title"},wt={class:"right-btn-box"},jt=["onClick"],Ht=["onClick"],Ot={class:"prompt-content-box"},$t={key:0,class:"prompt-content"},Bt=["onClick"],Nt={key:1,class:"structure-list-box"},St={class:"structure-list"},Dt={class:"structure-title"},It={class:"structure-content"},Pt={class:"structure-list"},At={class:"structure-title"},Gt={class:"structure-content"},Vt=["onClick"],zt={class:"structure-list"},Et={class:"structure-title"},Ft={class:"structure-content"},Mt={key:0,class:"structure-list"},Ut={class:"structure-title"},Jt={class:"structure-content"},Qt={class:"structure-list"},Tt={class:"structure-title"},Yt={class:"structure-content"},Zt={class:"structure-list"},qt={class:"structure-title"},Kt={class:"structure-content"},Rt={class:"structure-title"},Wt={class:"structure-content"},Xt={class:"empty-content"},ts={__name:"index",emits:["ok"],setup(S,{expose:g,emit:L}){const _=m(!1),p=L,b=()=>{_.value=!0,C(),O()},D=l=>{A.confirm({title:"导入确认",icon:ct(rt),content:"确定将该条提示导入",onOk(){p("ok",l),_.value=!1},onCancel(){}})},f=m(-1),w=m([]),C=()=>{q().then(l=>{w.value=[{id:-1,group_name:"全部"},{id:0,group_name:"默认分组"},...l.data]})},M=l=>{f.value=l.id,O()},j=m([]),H=m(!1),x=m(!1),U=()=>{x.value=!0,O(),C()},O=()=>{H.value=!0,K({group_id:f.value,page:1,size:9999}).then(l=>{let o=l.data.list||[];o=o.map(v=>({...v,isHide:!0,prompt_struct:v.prompt_struct?JSON.parse(v.prompt_struct):{}})),j.value=o}).finally(()=>{H.value=!1,x.value=!1})},$=l=>{l.isHide=!l.isHide},I=()=>{window.open("#/user/prompt-library")};return g({show:b}),(l,o)=>{const v=F,P=Y,B=W,J=tt,Q=nt,T=A;return e(),r("div",null,[a(T,{open:_.value,"onUpdate:open":o[0]||(o[0]=t=>_.value=t),title:null,width:950,footer:null,wrapClassName:"add-prommpt-modal"},{default:c(()=>[s("div",it,[s("div",dt,[o[1]||(o[1]=s("div",{class:"main-title"},"导入提示词",-1)),a(P,{style:{height:"480px"}},{default:c(()=>[s("div",ut,[(e(!0),r(h,null,N(w.value,t=>(e(),r("div",{class:lt(["group-list",{active:t.id==f.value}]),onClick:d=>M(t),key:t.id},[s("div",pt,[s("div",vt,n(t.group_name),1),t.group_desc?(e(),k(v,{key:0},{title:c(()=>[u(n(t.group_desc),1)]),default:c(()=>[a(y(R))]),_:2},1024)):i("",!0)])],10,_t))),128))])]),_:1})]),s("div",mt,[s("div",ht,[a(B,{loading:x.value,onClick:U},{default:c(()=>[x.value?i("",!0):(e(),k(y(X),{key:0})),o[2]||(o[2]=u("刷新列表",-1))]),_:1},8,["loading"]),a(B,{onClick:I},{default:c(()=>[...o[3]||(o[3]=[u("管理知识库",-1)])]),_:1})]),s("div",kt,[a(P,{style:{padding:"0 24px"}},{default:c(()=>[H.value?(e(),r("div",yt,[a(J)])):i("",!0),s("div",bt,[(e(!0),r(h,null,N(j.value,t=>(e(),r("div",{class:"prompt-list",key:t.id},[s("div",gt,[s("div",ft,[t.prompt_type==0?(e(),r("div",Ct,"自定义")):i("",!0),t.prompt_type==1?(e(),r("div",xt,"结构化")):i("",!0),s("div",Lt,n(t.title),1)]),s("div",wt,[a(v,{title:t.isHide?"展开":"收起"},{default:c(()=>[s("div",{class:"hover-btn-box",onClick:d=>$(t)},[t.isHide?(e(),k(y(st),{key:0})):(e(),k(y(et),{key:1}))],8,jt)]),_:2},1032,["title"]),s("div",{class:"hover-btn-box primary",onClick:d=>D(t)},[a(y(ot)),o[4]||(o[4]=u("导入 ",-1))],8,Ht)])]),s("div",Ot,[t.prompt_type==0?(e(),r("div",$t,[t.isHide?(e(),r(h,{key:0},[u(n(t.prompt.slice(0,200))+" ",1),t.prompt.length>200?(e(),r("span",{key:0,onClick:d=>$(t),style:{cursor:"pointer"}},"...",8,Bt)):i("",!0)],64)):(e(),r(h,{key:1},[u(n(t.prompt),1)],64))])):(e(),r("div",Nt,[s("div",St,[s("div",Dt,n(t.prompt_struct.role.subject),1),s("div",It,n(t.prompt_struct.role.describe),1)]),s("div",Pt,[s("div",At,n(t.prompt_struct.task.subject),1),s("div",Gt,[u(n(t.prompt_struct.task.describe)+" ",1),t.isHide?(e(),r("span",{key:0,onClick:d=>$(t),style:{cursor:"pointer"}},"...",8,Vt)):i("",!0)])]),t.isHide?i("",!0):(e(),r(h,{key:0},[s("div",zt,[s("div",Et,n(t.prompt_struct.constraints.subject),1),s("div",Ft,n(t.prompt_struct.constraints.describe),1)]),t.prompt_struct.skill?(e(),r("div",Mt,[s("div",Ut,n(t.prompt_struct.skill.subject),1),s("div",Jt,n(t.prompt_struct.skill.describe),1)])):i("",!0),s("div",Qt,[s("div",Tt,n(t.prompt_struct.output.subject),1),s("div",Yt,n(t.prompt_struct.output.describe),1)]),s("div",Zt,[s("div",qt,n(t.prompt_struct.tone.subject),1),s("div",Kt,n(t.prompt_struct.tone.describe),1)]),(e(!0),r(h,null,N(t.prompt_struct.custom,d=>(e(),r("div",{class:"structure-list",key:d.subject},[s("div",Rt,n(d.subject),1),s("div",Wt,n(d.describe),1)]))),128))],64))]))])]))),128))]),j.value.length==0?(e(),k(Q,{key:1,style:{"padding-top":"100px"}},{description:c(()=>[s("div",Xt,[o[6]||(o[6]=s("div",{class:"title"},"你还没有添加任何提示词",-1)),o[7]||(o[7]=s("div",{class:"desc"}," 可以在系统设置-提示词库中维护提示词模板，然后再聊天机器人和工作流中引用 ",-1)),s("div",null,[a(B,{type:"primary",onClick:I},{default:c(()=>[...o[5]||(o[5]=[u("立即添加",-1)])]),_:1})])])]),_:1})):i("",!0)]),_:1})])])])]),_:1},8,["open"])])}}},rs=Z(ts,[["__scopeId","data-v-1a540f46"]]),ls={__name:"index",props:{disabled:{type:Boolean,default:!1}},setup(S){const g=at(),L=G(()=>{const{disabled:p,...b}=g;return b}),_=G(()=>{const{title:p,overlayClassName:b,overlayStyle:D,mouseEnterDelay:f,mouseLeaveDelay:w,...C}=g;return C});return(p,b)=>S.disabled?(e(),r("div",z(E({key:1},_.value)),[V(p.$slots,"default")],16)):(e(),k(y(F),z(E({key:0},L.value)),{default:c(()=>[V(p.$slots,"default")]),_:3},16))}};export{rs as _,ls as a};
