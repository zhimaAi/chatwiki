const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/auto-track-By5Vxvy7.js","assets/js/vue-chunks-BRsu9_To.js","assets/js/crypto-js-ClNpte_9.js","index-Bo1NSLpy.js","assets/js/axios-Dq7h7Pqt.js","assets/js/qs-BrxkIg-9.js","assets/js/dayjs-B6IotFah.js","assets/css/index-CqWBV6JU.css","assets/js/pull-up.esm-D94Swpvl.js","assets/js/observe-dom.esm-CyCedSm-.js","assets/js/index-BhY6JVa1.js","assets/js/index-OfBFkYGp.js","assets/js/is-plan-event-enabled-DS1Agtkw.js","assets/js/index-CB2qcytV.js","assets/js/index-BxcM6-TU.js","assets/js/index-CfDfQJGk.js"])))=>i.map(i=>d[i]);
var HN=Object.defineProperty;var YN=(r,e,t)=>e in r?HN(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Rn=(r,e,t)=>YN(r,typeof e!="symbol"?e+"":e,t);import{B as y0,c as od,g as XN,N as vy,O as py,X as ad,H as $N,_ as xT,I as KN,F as ZN,a1 as QN,b as JN,j as Cb,d as ej,q as tj,x as rj,n as nj,V as ij}from"./vue-chunks-BRsu9_To.js";import{c as oj}from"./crypto-js-ClNpte_9.js";import{a as Ql,b as pS,d as aj}from"../../index-Bo1NSLpy.js";import{B as Bp,M as sj,S as uj,P as lj}from"./pull-up.esm-D94Swpvl.js";import{O as cj}from"./observe-dom.esm-CyCedSm-.js";function zx(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function fj(r){if(Array.isArray(r))return r}function hj(r){if(Array.isArray(r))return zx(r)}function md(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function dj(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,pD(n.key),n)}}function bd(r,e,t){return e&&dj(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function Gs(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=gS(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return a=u.done,u},e:function(u){s=!0,o=u},f:function(){try{a||t.return==null||t.return()}finally{if(s)throw o}}}}function vD(r,e,t){return(e=pD(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function vj(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function pj(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,o,a,s=[],u=!0,l=!1;try{if(o=(t=t.call(r)).next,e===0){if(Object(t)!==t)return;u=!1}else for(;!(u=(n=o.call(t)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function gj(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yj(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lo(r,e){return fj(r)||pj(r,e)||gS(r,e)||gj()}function Jm(r){return hj(r)||vj(r)||gS(r)||yj()}function mj(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function pD(r){var e=mj(r,"string");return typeof e=="symbol"?e:e+""}function Fo(r){"@babel/helpers - typeof";return Fo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fo(r)}function gS(r,e){if(r){if(typeof r=="string")return zx(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?zx(r,e):void 0}}var Mo=typeof window>"u"?null:window,ST=Mo?Mo.navigator:null;Mo&&Mo.document;var bj=Fo(""),gD=Fo({}),_j=Fo(function(){}),wj=typeof HTMLElement>"u"?"undefined":Fo(HTMLElement),Iy=function(e){return e&&e.instanceString&&Wi(e.instanceString)?e.instanceString():null},yr=function(e){return e!=null&&Fo(e)==bj},Wi=function(e){return e!=null&&Fo(e)===_j},di=function(e){return!Ou(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},wn=function(e){return e!=null&&Fo(e)===gD&&!di(e)&&e.constructor===Object},Ej=function(e){return e!=null&&Fo(e)===gD},zt=function(e){return e!=null&&Fo(e)===Fo(1)&&!isNaN(e)},Oj=function(e){return zt(e)&&Math.floor(e)===e},e0=function(e){if(wj!=="undefined")return e!=null&&e instanceof HTMLElement},Ou=function(e){return ky(e)||yD(e)},ky=function(e){return Iy(e)==="collection"&&e._private.single},yD=function(e){return Iy(e)==="collection"&&!e._private.single},yS=function(e){return Iy(e)==="core"},mD=function(e){return Iy(e)==="stylesheet"},xj=function(e){return Iy(e)==="event"},cd=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},Sj=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},Tj=function(e){return wn(e)&&zt(e.x1)&&zt(e.x2)&&zt(e.y1)&&zt(e.y2)},Cj=function(e){return Ej(e)&&Wi(e.then)},Pj=function(){return ST&&ST.userAgent.match(/msie|trident|edge/i)},lg=function(e,t){t||(t=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var o=[],a=0;a<arguments.length;a++)o.push(arguments[a]);return o.join("$")});var n=function(){var o=this,a=arguments,s,u=t.apply(o,a),l=n.cache;return(s=l[u])||(s=l[u]=e.apply(o,a)),s};return n.cache={},n},mS=lg(function(r){return r.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),m0=lg(function(r){return r.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),bD=lg(function(r,e){return r+e[0].toUpperCase()+e.substring(1)},function(r,e){return r+"$"+e}),TT=function(e){return cd(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},No="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",Aj="rgb[a]?\\(("+No+"[%]?)\\s*,\\s*("+No+"[%]?)\\s*,\\s*("+No+"[%]?)(?:\\s*,\\s*("+No+"))?\\)",Rj="rgb[a]?\\((?:"+No+"[%]?)\\s*,\\s*(?:"+No+"[%]?)\\s*,\\s*(?:"+No+"[%]?)(?:\\s*,\\s*(?:"+No+"))?\\)",Ij="hsl[a]?\\(("+No+")\\s*,\\s*("+No+"[%])\\s*,\\s*("+No+"[%])(?:\\s*,\\s*("+No+"))?\\)",kj="hsl[a]?\\((?:"+No+")\\s*,\\s*(?:"+No+"[%])\\s*,\\s*(?:"+No+"[%])(?:\\s*,\\s*(?:"+No+"))?\\)",Dj="\\#[0-9a-fA-F]{3}",Mj="\\#[0-9a-fA-F]{6}",_D=function(e,t){return e<t?-1:e>t?1:0},Lj=function(e,t){return-1*_D(e,t)},xr=Object.assign!=null?Object.assign.bind(Object):function(r){for(var e=arguments,t=1;t<e.length;t++){var n=e[t];if(n!=null)for(var i=Object.keys(n),o=0;o<i.length;o++){var a=i[o];r[a]=n[a]}}return r},Nj=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var t=e.length===4,n,i,o,a=16;return t?(n=parseInt(e[1]+e[1],a),i=parseInt(e[2]+e[2],a),o=parseInt(e[3]+e[3],a)):(n=parseInt(e[1]+e[2],a),i=parseInt(e[3]+e[4],a),o=parseInt(e[5]+e[6],a)),[n,i,o]}},jj=function(e){var t,n,i,o,a,s,u,l;function c(v,g,_){return _<0&&(_+=1),_>1&&(_-=1),_<1/6?v+(g-v)*6*_:_<1/2?g:_<2/3?v+(g-v)*(2/3-_)*6:v}var f=new RegExp("^"+Ij+"$").exec(e);if(f){if(n=parseInt(f[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,i=parseFloat(f[2]),i<0||i>100||(i=i/100,o=parseFloat(f[3]),o<0||o>100)||(o=o/100,a=f[4],a!==void 0&&(a=parseFloat(a),a<0||a>1)))return;if(i===0)s=u=l=Math.round(o*255);else{var h=o<.5?o*(1+i):o+i-o*i,d=2*o-h;s=Math.round(255*c(d,h,n+1/3)),u=Math.round(255*c(d,h,n)),l=Math.round(255*c(d,h,n-1/3))}t=[s,u,l,a]}return t},Fj=function(e){var t,n=new RegExp("^"+Aj+"$").exec(e);if(n){t=[];for(var i=[],o=1;o<=3;o++){var a=n[o];if(a[a.length-1]==="%"&&(i[o]=!0),a=parseFloat(a),i[o]&&(a=a/100*255),a<0||a>255)return;t.push(Math.floor(a))}var s=i[1]||i[2]||i[3],u=i[1]&&i[2]&&i[3];if(s&&!u)return;var l=n[4];if(l!==void 0){if(l=parseFloat(l),l<0||l>1)return;t.push(l)}}return t},Bj=function(e){return Uj[e.toLowerCase()]},wD=function(e){return(di(e)?e:null)||Bj(e)||Nj(e)||Fj(e)||jj(e)},Uj={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},ED=function(e){for(var t=e.map,n=e.keys,i=n.length,o=0;o<i;o++){var a=n[o];if(wn(a))throw Error("Tried to set map with object key");o<n.length-1?(t[a]==null&&(t[a]={}),t=t[a]):t[a]=e.value}},OD=function(e){for(var t=e.map,n=e.keys,i=n.length,o=0;o<i;o++){var a=n[o];if(wn(a))throw Error("Tried to get map with object key");if(t=t[a],t==null)return t}return t},fm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dy(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Pb,CT;function My(){if(CT)return Pb;CT=1;function r(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return Pb=r,Pb}var Ab,PT;function qj(){if(PT)return Ab;PT=1;var r=typeof fm=="object"&&fm&&fm.Object===Object&&fm;return Ab=r,Ab}var Rb,AT;function b0(){if(AT)return Rb;AT=1;var r=qj(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=r||e||Function("return this")();return Rb=t,Rb}var Ib,RT;function zj(){if(RT)return Ib;RT=1;var r=b0(),e=function(){return r.Date.now()};return Ib=e,Ib}var kb,IT;function Gj(){if(IT)return kb;IT=1;var r=/\s/;function e(t){for(var n=t.length;n--&&r.test(t.charAt(n)););return n}return kb=e,kb}var Db,kT;function Vj(){if(kT)return Db;kT=1;var r=Gj(),e=/^\s+/;function t(n){return n&&n.slice(0,r(n)+1).replace(e,"")}return Db=t,Db}var Mb,DT;function bS(){if(DT)return Mb;DT=1;var r=b0(),e=r.Symbol;return Mb=e,Mb}var Lb,MT;function Wj(){if(MT)return Lb;MT=1;var r=bS(),e=Object.prototype,t=e.hasOwnProperty,n=e.toString,i=r?r.toStringTag:void 0;function o(a){var s=t.call(a,i),u=a[i];try{a[i]=void 0;var l=!0}catch{}var c=n.call(a);return l&&(s?a[i]=u:delete a[i]),c}return Lb=o,Lb}var Nb,LT;function Hj(){if(LT)return Nb;LT=1;var r=Object.prototype,e=r.toString;function t(n){return e.call(n)}return Nb=t,Nb}var jb,NT;function xD(){if(NT)return jb;NT=1;var r=bS(),e=Wj(),t=Hj(),n="[object Null]",i="[object Undefined]",o=r?r.toStringTag:void 0;function a(s){return s==null?s===void 0?i:n:o&&o in Object(s)?e(s):t(s)}return jb=a,jb}var Fb,jT;function Yj(){if(jT)return Fb;jT=1;function r(e){return e!=null&&typeof e=="object"}return Fb=r,Fb}var Bb,FT;function Ly(){if(FT)return Bb;FT=1;var r=xD(),e=Yj(),t="[object Symbol]";function n(i){return typeof i=="symbol"||e(i)&&r(i)==t}return Bb=n,Bb}var Ub,BT;function Xj(){if(BT)return Ub;BT=1;var r=Vj(),e=My(),t=Ly(),n=NaN,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt;function u(l){if(typeof l=="number")return l;if(t(l))return n;if(e(l)){var c=typeof l.valueOf=="function"?l.valueOf():l;l=e(c)?c+"":c}if(typeof l!="string")return l===0?l:+l;l=r(l);var f=o.test(l);return f||a.test(l)?s(l.slice(2),f?2:8):i.test(l)?n:+l}return Ub=u,Ub}var qb,UT;function $j(){if(UT)return qb;UT=1;var r=My(),e=zj(),t=Xj(),n="Expected a function",i=Math.max,o=Math.min;function a(s,u,l){var c,f,h,d,v,g,_=0,y=!1,p=!1,m=!0;if(typeof s!="function")throw new TypeError(n);u=t(u)||0,r(l)&&(y=!!l.leading,p="maxWait"in l,h=p?i(t(l.maxWait)||0,u):h,m="trailing"in l?!!l.trailing:m);function E(q){var W=c,Z=f;return c=f=void 0,_=q,d=s.apply(Z,W),d}function C(q){return _=q,v=setTimeout(R,u),y?E(q):d}function P(q){var W=q-g,Z=q-_,Q=u-W;return p?o(Q,h-Z):Q}function T(q){var W=q-g,Z=q-_;return g===void 0||W>=u||W<0||p&&Z>=h}function R(){var q=e();if(T(q))return D(q);v=setTimeout(R,P(q))}function D(q){return v=void 0,m&&c?E(q):(c=f=void 0,d)}function L(){v!==void 0&&clearTimeout(v),_=0,c=g=f=v=void 0}function j(){return v===void 0?d:D(e())}function F(){var q=e(),W=T(q);if(c=arguments,f=this,g=q,W){if(v===void 0)return C(g);if(p)return clearTimeout(v),v=setTimeout(R,u),E(g)}return v===void 0&&(v=setTimeout(R,u)),d}return F.cancel=L,F.flush=j,F}return qb=a,qb}var Kj=$j(),Ny=Dy(Kj),zb=Mo?Mo.performance:null,SD=zb&&zb.now?function(){return zb.now()}:function(){return Date.now()},Zj=function(){if(Mo){if(Mo.requestAnimationFrame)return function(r){Mo.requestAnimationFrame(r)};if(Mo.mozRequestAnimationFrame)return function(r){Mo.mozRequestAnimationFrame(r)};if(Mo.webkitRequestAnimationFrame)return function(r){Mo.webkitRequestAnimationFrame(r)};if(Mo.msRequestAnimationFrame)return function(r){Mo.msRequestAnimationFrame(r)}}return function(r){r&&setTimeout(function(){r(SD())},1e3/60)}}(),t0=function(e){return Zj(e)},ih=SD,Lv=9261,TD=65599,Qp=5381,CD=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Lv,n=t,i;i=e.next(),!i.done;)n=n*TD+i.value|0;return n},_y=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Lv;return t*TD+e|0},wy=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qp;return(t<<5)+t+e|0},Qj=function(e,t){return e*2097152+t},rd=function(e){return e[0]*2097152+e[1]},hm=function(e,t){return[_y(e[0],t[0]),wy(e[1],t[1])]},qT=function(e,t){var n={value:0,done:!1},i=0,o=e.length,a={next:function(){return i<o?n.value=e[i++]:n.done=!0,n}};return CD(a,t)},Uv=function(e,t){var n={value:0,done:!1},i=0,o=e.length,a={next:function(){return i<o?n.value=e.charCodeAt(i++):n.done=!0,n}};return CD(a,t)},PD=function(){return Jj(arguments)},Jj=function(e){for(var t,n=0;n<e.length;n++){var i=e[n];n===0?t=Uv(i):t=Uv(i,t)}return t},zT=!0,e5=console.warn!=null,t5=console.trace!=null,_S=Number.MAX_SAFE_INTEGER||9007199254740991,AD=function(){return!0},r0=function(){return!1},GT=function(){return 0},wS=function(){},Vi=function(e){throw new Error(e)},RD=function(e){if(e!==void 0)zT=!!e;else return zT},Bn=function(e){RD()&&(e5?console.warn(e):t5&&console.trace())},r5=function(e){return xr({},e)},$c=function(e){return e==null?e:di(e)?e.slice():wn(e)?r5(e):e},n5=function(e){return e.slice()},ID=function(e,t){for(t=e="";e++<36;t+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return t},i5={},kD=function(){return i5},Sa=function(e){var t=Object.keys(e);return function(n){for(var i={},o=0;o<t.length;o++){var a=t[o],s=n==null?void 0:n[a];i[a]=s===void 0?e[a]:s}return i}},fd=function(e,t,n){for(var i=e.length-1;i>=0;i--)e[i]===t&&e.splice(i,1)},ES=function(e){e.splice(0,e.length)},o5=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];e.push(i)}},Us=function(e,t,n){return n&&(t=bD(n,t)),e[t]},Jf=function(e,t,n,i){n&&(t=bD(n,t)),e[t]=i},a5=function(){function r(){md(this,r),this._obj={}}return bd(r,[{key:"set",value:function(t,n){return this._obj[t]=n,this}},{key:"delete",value:function(t){return this._obj[t]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(t){return this._obj[t]!==void 0}},{key:"get",value:function(t){return this._obj[t]}}])}(),rh=typeof Map<"u"?Map:a5,s5="undefined",u5=function(){function r(e){if(md(this,r),this._obj=Object.create(null),this.size=0,e!=null){var t;e.instanceString!=null&&e.instanceString()===this.instanceString()?t=e.toArray():t=e;for(var n=0;n<t.length;n++)this.add(t[n])}}return bd(r,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(t){var n=this._obj;n[t]!==1&&(n[t]=1,this.size++)}},{key:"delete",value:function(t){var n=this._obj;n[t]===1&&(n[t]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(t){return this._obj[t]===1}},{key:"toArray",value:function(){var t=this;return Object.keys(this._obj).filter(function(n){return t.has(n)})}},{key:"forEach",value:function(t,n){return this.toArray().forEach(t,n)}}])}(),vg=(typeof Set>"u"?"undefined":Fo(Set))!==s5?Set:u5,_0=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||t===void 0||!yS(e)){Vi("An element must have a core reference and parameters set");return}var i=t.group;if(i==null&&(t.data&&t.data.source!=null&&t.data.target!=null?i="edges":i="nodes"),i!=="nodes"&&i!=="edges"){Vi("An element must be of type `nodes` or `edges`; you specified `"+i+"`");return}this.length=1,this[0]=this;var o=this._private={cy:e,single:!0,data:t.data||{},position:t.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:i,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!t.selected,selectable:t.selectable===void 0?!0:!!t.selectable,locked:!!t.locked,grabbed:!1,grabbable:t.grabbable===void 0?!0:!!t.grabbable,pannable:t.pannable===void 0?i==="edges":!!t.pannable,active:!1,classes:new vg,animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[],parent:t.parent&&t.parent.isNode()?t.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(o.position.x==null&&(o.position.x=0),o.position.y==null&&(o.position.y=0),t.renderedPosition){var a=t.renderedPosition,s=e.pan(),u=e.zoom();o.position={x:(a.x-s.x)/u,y:(a.y-s.y)/u}}var l=[];di(t.classes)?l=t.classes:yr(t.classes)&&(l=t.classes.split(/\s+/));for(var c=0,f=l.length;c<f;c++){var h=l[c];!h||h===""||o.classes.add(h)}this.createEmitter(),(n===void 0||n)&&this.restore();var d=t.style||t.css;d&&(Bn("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(d))},VT=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(n,i,o){var a;wn(n)&&!Ou(n)&&(a=n,n=a.roots||a.root,i=a.visit,o=a.directed),o=arguments.length===2&&!Wi(i)?i:o,i=Wi(i)?i:function(){};for(var s=this._private.cy,u=n=yr(n)?this.filter(n):n,l=[],c=[],f={},h={},d={},v=0,g,_=this.byGroup(),y=_.nodes,p=_.edges,m=0;m<u.length;m++){var E=u[m],C=E.id();E.isNode()&&(l.unshift(E),e.bfs&&(d[C]=!0,c.push(E)),h[C]=0)}for(var P=function(){var q=e.bfs?l.shift():l.pop(),W=q.id();if(e.dfs){if(d[W])return 0;d[W]=!0,c.push(q)}var Z=h[W],Q=f[W],re=Q!=null?Q.source():null,ee=Q!=null?Q.target():null,ue=Q==null?void 0:q.same(re)?ee[0]:re[0],de;if(de=i(q,Q,ue,v++,Z),de===!0)return g=q,1;if(de===!1)return 1;for(var se=q.connectedEdges().filter(function(Ee){return(!o||Ee.source().same(q))&&p.has(Ee)}),be=0;be<se.length;be++){var Le=se[be],fe=Le.connectedNodes().filter(function(Ee){return!Ee.same(q)&&y.has(Ee)}),ce=fe.id();fe.length!==0&&!d[ce]&&(fe=fe[0],l.push(fe),e.bfs&&(d[ce]=!0,c.push(fe)),f[ce]=Le,h[ce]=h[W]+1)}},T;l.length!==0&&(T=P(),!(T!==0&&T===1)););for(var R=s.collection(),D=0;D<c.length;D++){var L=c[D],j=f[L.id()];j!=null&&R.push(j),R.push(L)}return{path:s.collection(R),found:s.collection(g)}}},Ey={breadthFirstSearch:VT({bfs:!0}),depthFirstSearch:VT({dfs:!0})};Ey.bfs=Ey.breadthFirstSearch;Ey.dfs=Ey.depthFirstSearch;var Nm={exports:{}},l5=Nm.exports,WT;function c5(){return WT||(WT=1,function(r,e){(function(){var t,n,i,o,a,s,u,l,c,f,h,d,v,g,_;i=Math.floor,f=Math.min,n=function(y,p){return y<p?-1:y>p?1:0},c=function(y,p,m,E,C){var P;if(m==null&&(m=0),C==null&&(C=n),m<0)throw new Error("lo must be non-negative");for(E==null&&(E=y.length);m<E;)P=i((m+E)/2),C(p,y[P])<0?E=P:m=P+1;return[].splice.apply(y,[m,m-m].concat(p)),p},s=function(y,p,m){return m==null&&(m=n),y.push(p),g(y,0,y.length-1,m)},a=function(y,p){var m,E;return p==null&&(p=n),m=y.pop(),y.length?(E=y[0],y[0]=m,_(y,0,p)):E=m,E},l=function(y,p,m){var E;return m==null&&(m=n),E=y[0],y[0]=p,_(y,0,m),E},u=function(y,p,m){var E;return m==null&&(m=n),y.length&&m(y[0],p)<0&&(E=[y[0],p],p=E[0],y[0]=E[1],_(y,0,m)),p},o=function(y,p){var m,E,C,P,T,R;for(p==null&&(p=n),P=(function(){R=[];for(var D=0,L=i(y.length/2);0<=L?D<L:D>L;0<=L?D++:D--)R.push(D);return R}).apply(this).reverse(),T=[],E=0,C=P.length;E<C;E++)m=P[E],T.push(_(y,m,p));return T},v=function(y,p,m){var E;if(m==null&&(m=n),E=y.indexOf(p),E!==-1)return g(y,0,E,m),_(y,E,m)},h=function(y,p,m){var E,C,P,T,R;if(m==null&&(m=n),C=y.slice(0,p),!C.length)return C;for(o(C,m),R=y.slice(p),P=0,T=R.length;P<T;P++)E=R[P],u(C,E,m);return C.sort(m).reverse()},d=function(y,p,m){var E,C,P,T,R,D,L,j,F;if(m==null&&(m=n),p*10<=y.length){if(P=y.slice(0,p).sort(m),!P.length)return P;for(C=P[P.length-1],L=y.slice(p),T=0,D=L.length;T<D;T++)E=L[T],m(E,C)<0&&(c(P,E,0,null,m),P.pop(),C=P[P.length-1]);return P}for(o(y,m),F=[],R=0,j=f(p,y.length);0<=j?R<j:R>j;0<=j?++R:--R)F.push(a(y,m));return F},g=function(y,p,m,E){var C,P,T;for(E==null&&(E=n),C=y[m];m>p;){if(T=m-1>>1,P=y[T],E(C,P)<0){y[m]=P,m=T;continue}break}return y[m]=C},_=function(y,p,m){var E,C,P,T,R;for(m==null&&(m=n),C=y.length,R=p,P=y[p],E=2*p+1;E<C;)T=E+1,T<C&&!(m(y[E],y[T])<0)&&(E=T),y[p]=y[E],p=E,E=2*p+1;return y[p]=P,g(y,R,p,m)},t=function(){y.push=s,y.pop=a,y.replace=l,y.pushpop=u,y.heapify=o,y.updateItem=v,y.nlargest=h,y.nsmallest=d;function y(p){this.cmp=p??n,this.nodes=[]}return y.prototype.push=function(p){return s(this.nodes,p,this.cmp)},y.prototype.pop=function(){return a(this.nodes,this.cmp)},y.prototype.peek=function(){return this.nodes[0]},y.prototype.contains=function(p){return this.nodes.indexOf(p)!==-1},y.prototype.replace=function(p){return l(this.nodes,p,this.cmp)},y.prototype.pushpop=function(p){return u(this.nodes,p,this.cmp)},y.prototype.heapify=function(){return o(this.nodes,this.cmp)},y.prototype.updateItem=function(p){return v(this.nodes,p,this.cmp)},y.prototype.clear=function(){return this.nodes=[]},y.prototype.empty=function(){return this.nodes.length===0},y.prototype.size=function(){return this.nodes.length},y.prototype.clone=function(){var p;return p=new y,p.nodes=this.nodes.slice(0),p},y.prototype.toArray=function(){return this.nodes.slice(0)},y.prototype.insert=y.prototype.push,y.prototype.top=y.prototype.peek,y.prototype.front=y.prototype.peek,y.prototype.has=y.prototype.contains,y.prototype.copy=y.prototype.clone,y}(),function(y,p){return r.exports=p()}(this,function(){return t})}).call(l5)}(Nm)),Nm.exports}var Gb,HT;function f5(){return HT||(HT=1,Gb=c5()),Gb}var h5=f5(),jy=Dy(h5),d5=Sa({root:null,weight:function(e){return 1},directed:!1}),v5={dijkstra:function(e){if(!wn(e)){var t=arguments;e={root:t[0],weight:t[1],directed:t[2]}}var n=d5(e),i=n.root,o=n.weight,a=n.directed,s=this,u=o,l=yr(i)?this.filter(i)[0]:i[0],c={},f={},h={},d=this.byGroup(),v=d.nodes,g=d.edges;g.unmergeBy(function(Z){return Z.isLoop()});for(var _=function(Q){return c[Q.id()]},y=function(Q,re){c[Q.id()]=re,p.updateItem(Q)},p=new jy(function(Z,Q){return _(Z)-_(Q)}),m=0;m<v.length;m++){var E=v[m];c[E.id()]=E.same(l)?0:1/0,p.push(E)}for(var C=function(Q,re){for(var ee=(a?Q.edgesTo(re):Q.edgesWith(re)).intersect(g),ue=1/0,de,se=0;se<ee.length;se++){var be=ee[se],Le=u(be);(Le<ue||!de)&&(ue=Le,de=be)}return{edge:de,dist:ue}};p.size()>0;){var P=p.pop(),T=_(P),R=P.id();if(h[R]=T,T!==1/0)for(var D=P.neighborhood().intersect(v),L=0;L<D.length;L++){var j=D[L],F=j.id(),q=C(P,j),W=T+q.dist;W<_(j)&&(y(j,W),f[F]={node:P,edge:q.edge})}}return{distanceTo:function(Q){var re=yr(Q)?v.filter(Q)[0]:Q[0];return h[re.id()]},pathTo:function(Q){var re=yr(Q)?v.filter(Q)[0]:Q[0],ee=[],ue=re,de=ue.id();if(re.length>0)for(ee.unshift(re);f[de];){var se=f[de];ee.unshift(se.edge),ee.unshift(se.node),ue=se.node,de=ue.id()}return s.spawn(ee)}}}},p5={kruskal:function(e){e=e||function(m){return 1};for(var t=this.byGroup(),n=t.nodes,i=t.edges,o=n.length,a=new Array(o),s=n,u=function(E){for(var C=0;C<a.length;C++){var P=a[C];if(P.has(E))return C}},l=0;l<o;l++)a[l]=this.spawn(n[l]);for(var c=i.sort(function(m,E){return e(m)-e(E)}),f=0;f<c.length;f++){var h=c[f],d=h.source()[0],v=h.target()[0],g=u(d),_=u(v),y=a[g],p=a[_];g!==_&&(s.merge(h),y.merge(p),a.splice(_,1))}return s}},g5=Sa({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),y5={aStar:function(e){var t=this.cy(),n=g5(e),i=n.root,o=n.goal,a=n.heuristic,s=n.directed,u=n.weight;i=t.collection(i)[0],o=t.collection(o)[0];var l=i.id(),c=o.id(),f={},h={},d={},v=new jy(function(de,se){return h[de.id()]-h[se.id()]}),g=new vg,_={},y={},p=function(se,be){v.push(se),g.add(be)},m,E,C=function(){m=v.pop(),E=m.id(),g.delete(E)},P=function(se){return g.has(se)};p(i,l),f[l]=0,h[l]=a(i);for(var T=0;v.size()>0;){if(C(),T++,E===c){for(var R=[],D=o,L=c,j=y[L];R.unshift(D),j!=null&&R.unshift(j),D=_[L],D!=null;)L=D.id(),j=y[L];return{found:!0,distance:f[E],path:this.spawn(R),steps:T}}d[E]=!0;for(var F=m._private.edges,q=0;q<F.length;q++){var W=F[q];if(this.hasElementWithId(W.id())&&!(s&&W.data("source")!==E)){var Z=W.source(),Q=W.target(),re=Z.id()!==E?Z:Q,ee=re.id();if(this.hasElementWithId(ee)&&!d[ee]){var ue=f[E]+u(W);if(!P(ee)){f[ee]=ue,h[ee]=ue+a(re),p(re,ee),_[ee]=m,y[ee]=W;continue}ue<f[ee]&&(f[ee]=ue,h[ee]=ue+a(re),_[ee]=m,y[ee]=W)}}}}return{found:!1,distance:void 0,path:void 0,steps:T}}},m5=Sa({weight:function(e){return 1},directed:!1}),b5={floydWarshall:function(e){for(var t=this.cy(),n=m5(e),i=n.weight,o=n.directed,a=i,s=this.byGroup(),u=s.nodes,l=s.edges,c=u.length,f=c*c,h=function(Le){return u.indexOf(Le)},d=function(Le){return u[Le]},v=new Array(f),g=0;g<f;g++){var _=g%c,y=(g-_)/c;y===_?v[g]=0:v[g]=1/0}for(var p=new Array(f),m=new Array(f),E=0;E<l.length;E++){var C=l[E],P=C.source()[0],T=C.target()[0];if(P!==T){var R=h(P),D=h(T),L=R*c+D,j=a(C);if(v[L]>j&&(v[L]=j,p[L]=D,m[L]=C),!o){var F=D*c+R;!o&&v[F]>j&&(v[F]=j,p[F]=R,m[F]=C)}}}for(var q=0;q<c;q++)for(var W=0;W<c;W++)for(var Z=W*c+q,Q=0;Q<c;Q++){var re=W*c+Q,ee=q*c+Q;v[Z]+v[ee]<v[re]&&(v[re]=v[Z]+v[ee],p[re]=p[Z])}var ue=function(Le){return(yr(Le)?t.filter(Le):Le)[0]},de=function(Le){return h(ue(Le))},se={distance:function(Le,fe){var ce=de(Le),Ee=de(fe);return v[ce*c+Ee]},path:function(Le,fe){var ce=de(Le),Ee=de(fe),Ce=d(ce);if(ce===Ee)return Ce.collection();if(p[ce*c+Ee]==null)return t.collection();var ke=t.collection(),Ie=ce,ve;for(ke.merge(Ce);ce!==Ee;)Ie=ce,ce=p[ce*c+Ee],ve=m[Ie*c+ce],ke.merge(ve),ke.merge(d(ce));return ke}};return se}},_5=Sa({weight:function(e){return 1},directed:!1,root:null}),w5={bellmanFord:function(e){var t=this,n=_5(e),i=n.weight,o=n.directed,a=n.root,s=i,u=this,l=this.cy(),c=this.byGroup(),f=c.edges,h=c.nodes,d=h.length,v=new rh,g=!1,_=[];a=l.collection(a)[0],f.unmergeBy(function(it){return it.isLoop()});for(var y=f.length,p=function(H){var $=v.get(H.id());return $||($={},v.set(H.id(),$)),$},m=function(H){return(yr(H)?l.$(H):H)[0]},E=function(H){return p(m(H)).dist},C=function(H){for(var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a,ne=m(H),Re=[],De=ne;;){if(De==null)return t.spawn();var Be=p(De),Je=Be.edge,Tt=Be.pred;if(Re.unshift(De[0]),De.same($)&&Re.length>0)break;Je!=null&&Re.unshift(Je),De=Tt}return u.spawn(Re)},P=0;P<d;P++){var T=h[P],R=p(T);T.same(a)?R.dist=0:R.dist=1/0,R.pred=null,R.edge=null}for(var D=!1,L=function(H,$,ne,Re,De,Be){var Je=Re.dist+Be;Je<De.dist&&!ne.same(Re.edge)&&(De.dist=Je,De.pred=H,De.edge=ne,D=!0)},j=1;j<d;j++){D=!1;for(var F=0;F<y;F++){var q=f[F],W=q.source(),Z=q.target(),Q=s(q),re=p(W),ee=p(Z);L(W,Z,q,re,ee,Q),o||L(Z,W,q,ee,re,Q)}if(!D)break}if(D)for(var ue=[],de=0;de<y;de++){var se=f[de],be=se.source(),Le=se.target(),fe=s(se),ce=p(be).dist,Ee=p(Le).dist;if(ce+fe<Ee||!o&&Ee+fe<ce)if(g||(Bn("Graph contains a negative weight cycle for Bellman-Ford"),g=!0),e.findNegativeWeightCycles!==!1){var Ce=[];ce+fe<Ee&&Ce.push(be),!o&&Ee+fe<ce&&Ce.push(Le);for(var ke=Ce.length,Ie=0;Ie<ke;Ie++){var ve=Ce[Ie],we=[ve];we.push(p(ve).edge);for(var xe=p(ve).pred;we.indexOf(xe)===-1;)we.push(xe),we.push(p(xe).edge),xe=p(xe).pred;we=we.slice(we.indexOf(xe));for(var Fe=we[0].id(),He=0,at=2;at<we.length;at+=2)we[at].id()<Fe&&(Fe=we[at].id(),He=at);we=we.slice(He).concat(we.slice(0,He)),we.push(we[0]);var wt=we.map(function(it){return it.id()}).join(",");ue.indexOf(wt)===-1&&(_.push(u.spawn(we)),ue.push(wt))}}else break}return{distanceTo:E,pathTo:C,hasNegativeWeightCycle:g,negativeWeightCycles:_}}},E5=Math.sqrt(2),O5=function(e,t,n){n.length===0&&Vi("Karger-Stein must be run on a connected (sub)graph");for(var i=n[e],o=i[1],a=i[2],s=t[o],u=t[a],l=n,c=l.length-1;c>=0;c--){var f=l[c],h=f[1],d=f[2];(t[h]===s&&t[d]===u||t[h]===u&&t[d]===s)&&l.splice(c,1)}for(var v=0;v<l.length;v++){var g=l[v];g[1]===u?(l[v]=g.slice(),l[v][1]=s):g[2]===u&&(l[v]=g.slice(),l[v][2]=s)}for(var _=0;_<t.length;_++)t[_]===u&&(t[_]=s);return l},Vb=function(e,t,n,i){for(;n>i;){var o=Math.floor(Math.random()*t.length);t=O5(o,e,t),n--}return t},x5={kargerStein:function(){var e=this,t=this.byGroup(),n=t.nodes,i=t.edges;i.unmergeBy(function(ee){return ee.isLoop()});var o=n.length,a=i.length,s=Math.ceil(Math.pow(Math.log(o)/Math.LN2,2)),u=Math.floor(o/E5);if(o<2){Vi("At least 2 nodes are required for Karger-Stein algorithm");return}for(var l=[],c=0;c<a;c++){var f=i[c];l.push([c,n.indexOf(f.source()),n.indexOf(f.target())])}for(var h=1/0,d=[],v=new Array(o),g=new Array(o),_=new Array(o),y=function(ue,de){for(var se=0;se<o;se++)de[se]=ue[se]},p=0;p<=s;p++){for(var m=0;m<o;m++)g[m]=m;var E=Vb(g,l.slice(),o,u),C=E.slice();y(g,_);var P=Vb(g,E,u,2),T=Vb(_,C,u,2);P.length<=T.length&&P.length<h?(h=P.length,d=P,y(g,v)):T.length<=P.length&&T.length<h&&(h=T.length,d=T,y(_,v))}for(var R=this.spawn(d.map(function(ee){return i[ee[0]]})),D=this.spawn(),L=this.spawn(),j=v[0],F=0;F<v.length;F++){var q=v[F],W=n[F];q===j?D.merge(W):L.merge(W)}var Z=function(ue){var de=e.spawn();return ue.forEach(function(se){de.merge(se),se.connectedEdges().forEach(function(be){e.contains(be)&&!R.contains(be)&&de.merge(be)})}),de},Q=[Z(D),Z(L)],re={cut:R,components:Q,partition1:D,partition2:L};return re}},S5=function(e){return{x:e.x,y:e.y}},w0=function(e,t,n){return{x:e.x*t+n.x,y:e.y*t+n.y}},DD=function(e,t,n){return{x:(e.x-n.x)/t,y:(e.y-n.y)/t}},Jp=function(e){return{x:e[0],y:e[1]}},T5=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=1/0,o=t;o<n;o++){var a=e[o];isFinite(a)&&(i=Math.min(a,i))}return i},C5=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=-1/0,o=t;o<n;o++){var a=e[o];isFinite(a)&&(i=Math.max(a,i))}return i},P5=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=0,o=0,a=t;a<n;a++){var s=e[a];isFinite(s)&&(i+=s,o++)}return i/o},A5=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;i?e=e.slice(t,n):(n<e.length&&e.splice(n,e.length-n),t>0&&e.splice(0,t));for(var s=0,u=e.length-1;u>=0;u--){var l=e[u];a?isFinite(l)||(e[u]=-1/0,s++):e.splice(u,1)}o&&e.sort(function(h,d){return h-d});var c=e.length,f=Math.floor(c/2);return c%2!==0?e[f+1+s]:(e[f-1+s]+e[f+s])/2},R5=function(e){return Math.PI*e/180},dm=function(e,t){return Math.atan2(t,e)-Math.PI/2},OS=Math.log2||function(r){return Math.log(r)/Math.log(2)},xS=function(e){return e>0?1:e<0?-1:0},qv=function(e,t){return Math.sqrt(kv(e,t))},kv=function(e,t){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i},I5=function(e){for(var t=e.length,n=0,i=0;i<t;i++)n+=e[i];for(var o=0;o<t;o++)e[o]=e[o]/n;return e},ea=function(e,t,n,i){return(1-i)*(1-i)*e+2*(1-i)*i*t+i*i*n},ng=function(e,t,n,i){return{x:ea(e.x,t.x,n.x,i),y:ea(e.y,t.y,n.y,i)}},k5=function(e,t,n,i){var o={x:t.x-e.x,y:t.y-e.y},a=qv(e,t),s={x:o.x/a,y:o.y/a};return n=n??0,i=i??n*a,{x:e.x+s.x*i,y:e.y+s.y*i}},Oy=function(e,t,n){return Math.max(e,Math.min(n,t))},Ws=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},D5=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},M5=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},L5=function(e,t,n){return{x1:e.x1+t,x2:e.x2+t,y1:e.y1+n,y2:e.y2+n,w:e.w,h:e.h}},MD=function(e,t){e.x1=Math.min(e.x1,t.x1),e.x2=Math.max(e.x2,t.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,t.y1),e.y2=Math.max(e.y2,t.y2),e.h=e.y2-e.y1},N5=function(e,t,n){e.x1=Math.min(e.x1,t),e.x2=Math.max(e.x2,t),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},jm=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=t,e.x2+=t,e.y1-=t,e.y2+=t,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Fm=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,i,o,a;if(t.length===1)n=i=o=a=t[0];else if(t.length===2)n=o=t[0],a=i=t[1];else if(t.length===4){var s=Lo(t,4);n=s[0],i=s[1],o=s[2],a=s[3]}return e.x1-=a,e.x2+=i,e.y1-=n,e.y2+=o,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},YT=function(e,t){e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},SS=function(e,t){return!(e.x1>t.x2||t.x1>e.x2||e.x2<t.x1||t.x2<e.x1||e.y2<t.y1||t.y2<e.y1||e.y1>t.y2||t.y1>e.y2)},cg=function(e,t,n){return e.x1<=t&&t<=e.x2&&e.y1<=n&&n<=e.y2},j5=function(e,t){return cg(e,t.x,t.y)},F5=function(e,t){return cg(e,t.x1,t.y1)&&cg(e,t.x2,t.y2)},LD=function(e,t,n,i,o,a,s){var u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",l=u==="auto"?hd(o,a):u,c=o/2,f=a/2;l=Math.min(l,c,f);var h=l!==c,d=l!==f,v;if(h){var g=n-c+l-s,_=i-f-s,y=n+c-l+s,p=_;if(v=sd(e,t,n,i,g,_,y,p,!1),v.length>0)return v}if(d){var m=n+c+s,E=i-f+l-s,C=m,P=i+f-l+s;if(v=sd(e,t,n,i,m,E,C,P,!1),v.length>0)return v}if(h){var T=n-c+l-s,R=i+f+s,D=n+c-l+s,L=R;if(v=sd(e,t,n,i,T,R,D,L,!1),v.length>0)return v}if(d){var j=n-c-s,F=i-f+l-s,q=j,W=i+f-l+s;if(v=sd(e,t,n,i,j,F,q,W,!1),v.length>0)return v}var Z;{var Q=n-c+l,re=i-f+l;if(Z=ay(e,t,n,i,Q,re,l+s),Z.length>0&&Z[0]<=Q&&Z[1]<=re)return[Z[0],Z[1]]}{var ee=n+c-l,ue=i-f+l;if(Z=ay(e,t,n,i,ee,ue,l+s),Z.length>0&&Z[0]>=ee&&Z[1]<=ue)return[Z[0],Z[1]]}{var de=n+c-l,se=i+f-l;if(Z=ay(e,t,n,i,de,se,l+s),Z.length>0&&Z[0]>=de&&Z[1]>=se)return[Z[0],Z[1]]}{var be=n-c+l,Le=i+f-l;if(Z=ay(e,t,n,i,be,Le,l+s),Z.length>0&&Z[0]<=be&&Z[1]>=Le)return[Z[0],Z[1]]}return[]},B5=function(e,t,n,i,o,a,s){var u=s,l=Math.min(n,o),c=Math.max(n,o),f=Math.min(i,a),h=Math.max(i,a);return l-u<=e&&e<=c+u&&f-u<=t&&t<=h+u},U5=function(e,t,n,i,o,a,s,u,l){var c={x1:Math.min(n,s,o)-l,x2:Math.max(n,s,o)+l,y1:Math.min(i,u,a)-l,y2:Math.max(i,u,a)+l};return!(e<c.x1||e>c.x2||t<c.y1||t>c.y2)},q5=function(e,t,n,i){n-=i;var o=t*t-4*e*n;if(o<0)return[];var a=Math.sqrt(o),s=2*e,u=(-t+a)/s,l=(-t-a)/s;return[u,l]},z5=function(e,t,n,i,o){var a=1e-5;e===0&&(e=a),t/=e,n/=e,i/=e;var s,u,l,c,f,h,d,v;if(u=(3*n-t*t)/9,l=-(27*i)+t*(9*n-2*(t*t)),l/=54,s=u*u*u+l*l,o[1]=0,d=t/3,s>0){f=l+Math.sqrt(s),f=f<0?-Math.pow(-f,1/3):Math.pow(f,1/3),h=l-Math.sqrt(s),h=h<0?-Math.pow(-h,1/3):Math.pow(h,1/3),o[0]=-d+f+h,d+=(f+h)/2,o[4]=o[2]=-d,d=Math.sqrt(3)*(-h+f)/2,o[3]=d,o[5]=-d;return}if(o[5]=o[3]=0,s===0){v=l<0?-Math.pow(-l,1/3):Math.pow(l,1/3),o[0]=-d+2*v,o[4]=o[2]=-(v+d);return}u=-u,c=u*u*u,c=Math.acos(l/Math.sqrt(c)),v=2*Math.sqrt(u),o[0]=-d+v*Math.cos(c/3),o[2]=-d+v*Math.cos((c+2*Math.PI)/3),o[4]=-d+v*Math.cos((c+4*Math.PI)/3)},G5=function(e,t,n,i,o,a,s,u){var l=1*n*n-4*n*o+2*n*s+4*o*o-4*o*s+s*s+i*i-4*i*a+2*i*u+4*a*a-4*a*u+u*u,c=1*9*n*o-3*n*n-3*n*s-6*o*o+3*o*s+9*i*a-3*i*i-3*i*u-6*a*a+3*a*u,f=1*3*n*n-6*n*o+n*s-n*e+2*o*o+2*o*e-s*e+3*i*i-6*i*a+i*u-i*t+2*a*a+2*a*t-u*t,h=1*n*o-n*n+n*e-o*e+i*a-i*i+i*t-a*t,d=[];z5(l,c,f,h,d);for(var v=1e-7,g=[],_=0;_<6;_+=2)Math.abs(d[_+1])<v&&d[_]>=0&&d[_]<=1&&g.push(d[_]);g.push(1),g.push(0);for(var y=-1,p,m,E,C=0;C<g.length;C++)p=Math.pow(1-g[C],2)*n+2*(1-g[C])*g[C]*o+g[C]*g[C]*s,m=Math.pow(1-g[C],2)*i+2*(1-g[C])*g[C]*a+g[C]*g[C]*u,E=Math.pow(p-e,2)+Math.pow(m-t,2),y>=0?E<y&&(y=E):y=E;return y},V5=function(e,t,n,i,o,a){var s=[e-n,t-i],u=[o-n,a-i],l=u[0]*u[0]+u[1]*u[1],c=s[0]*s[0]+s[1]*s[1],f=s[0]*u[0]+s[1]*u[1],h=f*f/l;return f<0?c:h>l?(e-o)*(e-o)+(t-a)*(t-a):c-h},qs=function(e,t,n){for(var i,o,a,s,u,l=0,c=0;c<n.length/2;c++)if(i=n[c*2],o=n[c*2+1],c+1<n.length/2?(a=n[(c+1)*2],s=n[(c+1)*2+1]):(a=n[(c+1-n.length/2)*2],s=n[(c+1-n.length/2)*2+1]),!(i==e&&a==e))if(i>=e&&e>=a||i<=e&&e<=a)u=(e-i)/(a-i)*(s-o)+o,u>t&&l++;else continue;return l%2!==0},oh=function(e,t,n,i,o,a,s,u,l){var c=new Array(n.length),f;u[0]!=null?(f=Math.atan(u[1]/u[0]),u[0]<0?f=f+Math.PI/2:f=-f-Math.PI/2):f=u;for(var h=Math.cos(-f),d=Math.sin(-f),v=0;v<c.length/2;v++)c[v*2]=a/2*(n[v*2]*h-n[v*2+1]*d),c[v*2+1]=s/2*(n[v*2+1]*h+n[v*2]*d),c[v*2]+=i,c[v*2+1]+=o;var g;if(l>0){var _=i0(c,-l);g=n0(_)}else g=c;return qs(e,t,g)},W5=function(e,t,n,i,o,a,s,u){for(var l=new Array(n.length*2),c=0;c<u.length;c++){var f=u[c];l[c*4+0]=f.startX,l[c*4+1]=f.startY,l[c*4+2]=f.stopX,l[c*4+3]=f.stopY;var h=Math.pow(f.cx-e,2)+Math.pow(f.cy-t,2);if(h<=Math.pow(f.radius,2))return!0}return qs(e,t,l)},n0=function(e){for(var t=new Array(e.length/2),n,i,o,a,s,u,l,c,f=0;f<e.length/4;f++){n=e[f*4],i=e[f*4+1],o=e[f*4+2],a=e[f*4+3],f<e.length/4-1?(s=e[(f+1)*4],u=e[(f+1)*4+1],l=e[(f+1)*4+2],c=e[(f+1)*4+3]):(s=e[0],u=e[1],l=e[2],c=e[3]);var h=sd(n,i,o,a,s,u,l,c,!0);t[f*2]=h[0],t[f*2+1]=h[1]}return t},i0=function(e,t){for(var n=new Array(e.length*2),i,o,a,s,u=0;u<e.length/2;u++){i=e[u*2],o=e[u*2+1],u<e.length/2-1?(a=e[(u+1)*2],s=e[(u+1)*2+1]):(a=e[0],s=e[1]);var l=s-o,c=-(a-i),f=Math.sqrt(l*l+c*c),h=l/f,d=c/f;n[u*4]=i+h*t,n[u*4+1]=o+d*t,n[u*4+2]=a+h*t,n[u*4+3]=s+d*t}return n},H5=function(e,t,n,i,o,a){var s=n-e,u=i-t;s/=o,u/=a;var l=Math.sqrt(s*s+u*u),c=l-1;if(c<0)return[];var f=c/l;return[(n-e)*f+e,(i-t)*f+t]},jv=function(e,t,n,i,o,a,s){return e-=o,t-=a,e/=n/2+s,t/=i/2+s,e*e+t*t<=1},ay=function(e,t,n,i,o,a,s){var u=[n-e,i-t],l=[e-o,t-a],c=u[0]*u[0]+u[1]*u[1],f=2*(l[0]*u[0]+l[1]*u[1]),h=l[0]*l[0]+l[1]*l[1]-s*s,d=f*f-4*c*h;if(d<0)return[];var v=(-f+Math.sqrt(d))/(2*c),g=(-f-Math.sqrt(d))/(2*c),_=Math.min(v,g),y=Math.max(v,g),p=[];if(_>=0&&_<=1&&p.push(_),y>=0&&y<=1&&p.push(y),p.length===0)return[];var m=p[0]*u[0]+e,E=p[0]*u[1]+t;if(p.length>1){if(p[0]==p[1])return[m,E];var C=p[1]*u[0]+e,P=p[1]*u[1]+t;return[m,E,C,P]}else return[m,E]},Wb=function(e,t,n){return t<=e&&e<=n||n<=e&&e<=t?e:e<=t&&t<=n||n<=t&&t<=e?t:n},sd=function(e,t,n,i,o,a,s,u,l){var c=e-o,f=n-e,h=s-o,d=t-a,v=i-t,g=u-a,_=h*d-g*c,y=f*d-v*c,p=g*f-h*v;if(p!==0){var m=_/p,E=y/p,C=.001,P=0-C,T=1+C;return P<=m&&m<=T&&P<=E&&E<=T?[e+m*f,t+m*v]:l?[e+m*f,t+m*v]:[]}else return _===0||y===0?Wb(e,n,s)===s?[s,u]:Wb(e,n,o)===o?[o,a]:Wb(o,s,n)===n?[n,i]:[]:[]},xy=function(e,t,n,i,o,a,s,u){var l=[],c,f=new Array(n.length),h=!0;a==null&&(h=!1);var d;if(h){for(var v=0;v<f.length/2;v++)f[v*2]=n[v*2]*a+i,f[v*2+1]=n[v*2+1]*s+o;if(u>0){var g=i0(f,-u);d=n0(g)}else d=f}else d=n;for(var _,y,p,m,E=0;E<d.length/2;E++)_=d[E*2],y=d[E*2+1],E<d.length/2-1?(p=d[(E+1)*2],m=d[(E+1)*2+1]):(p=d[0],m=d[1]),c=sd(e,t,i,o,_,y,p,m),c.length!==0&&l.push(c[0],c[1]);return l},Y5=function(e,t,n,i,o,a,s,u,l){var c=[],f,h=new Array(n.length*2);l.forEach(function(p,m){m===0?(h[h.length-2]=p.startX,h[h.length-1]=p.startY):(h[m*4-2]=p.startX,h[m*4-1]=p.startY),h[m*4]=p.stopX,h[m*4+1]=p.stopY,f=ay(e,t,i,o,p.cx,p.cy,p.radius),f.length!==0&&c.push(f[0],f[1])});for(var d=0;d<h.length/4;d++)f=sd(e,t,i,o,h[d*4],h[d*4+1],h[d*4+2],h[d*4+3],!1),f.length!==0&&c.push(f[0],f[1]);if(c.length>2){for(var v=[c[0],c[1]],g=Math.pow(v[0]-e,2)+Math.pow(v[1]-t,2),_=1;_<c.length/2;_++){var y=Math.pow(c[_*2]-e,2)+Math.pow(c[_*2+1]-t,2);y<=g&&(v[0]=c[_*2],v[1]=c[_*2+1],g=y)}return v}return c},vm=function(e,t,n){var i=[e[0]-t[0],e[1]-t[1]],o=Math.sqrt(i[0]*i[0]+i[1]*i[1]),a=(o-n)/o;return a<0&&(a=1e-5),[t[0]+a*i[0],t[1]+a*i[1]]},bs=function(e,t){var n=Gx(e,t);return n=ND(n),n},ND=function(e){for(var t,n,i=e.length/2,o=1/0,a=1/0,s=-1/0,u=-1/0,l=0;l<i;l++)t=e[2*l],n=e[2*l+1],o=Math.min(o,t),s=Math.max(s,t),a=Math.min(a,n),u=Math.max(u,n);for(var c=2/(s-o),f=2/(u-a),h=0;h<i;h++)t=e[2*h]=e[2*h]*c,n=e[2*h+1]=e[2*h+1]*f,o=Math.min(o,t),s=Math.max(s,t),a=Math.min(a,n),u=Math.max(u,n);if(a<-1)for(var d=0;d<i;d++)n=e[2*d+1]=e[2*d+1]+(-1-a);return e},Gx=function(e,t){var n=1/e*2*Math.PI,i=e%2===0?Math.PI/2+n/2:Math.PI/2;i+=t;for(var o=new Array(e*2),a,s=0;s<e;s++)a=s*n+i,o[2*s]=Math.cos(a),o[2*s+1]=Math.sin(-a);return o},hd=function(e,t){return Math.min(e/4,t/4,8)},jD=function(e,t){return Math.min(e/10,t/10,8)},TS=function(){return 8},X5=function(e,t,n){return[e-2*t+n,2*(t-e),e]},Vx=function(e,t){return{heightOffset:Math.min(15,.05*t),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}};function $5(r,e){function t(f){for(var h=[],d=0;d<f.length;d++){var v=f[d],g=f[(d+1)%f.length],_={x:g.x-v.x,y:g.y-v.y},y={x:-_.y,y:_.x},p=Math.sqrt(y.x*y.x+y.y*y.y);h.push({x:y.x/p,y:y.y/p})}return h}function n(f,h){var d=1/0,v=-1/0,g=Gs(f),_;try{for(g.s();!(_=g.n()).done;){var y=_.value,p=y.x*h.x+y.y*h.y;d=Math.min(d,p),v=Math.max(v,p)}}catch(m){g.e(m)}finally{g.f()}return{min:d,max:v}}function i(f,h){return!(f.max<h.min||h.max<f.min)}var o=[].concat(Jm(t(r)),Jm(t(e))),a=Gs(o),s;try{for(a.s();!(s=a.n()).done;){var u=s.value,l=n(r,u),c=n(e,u);if(!i(l,c))return!1}}catch(f){a.e(f)}finally{a.f()}return!0}var K5=Sa({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),Z5={pageRank:function(e){for(var t=K5(e),n=t.dampingFactor,i=t.precision,o=t.iterations,a=t.weight,s=this._private.cy,u=this.byGroup(),l=u.nodes,c=u.edges,f=l.length,h=f*f,d=c.length,v=new Array(h),g=new Array(f),_=(1-n)/f,y=0;y<f;y++){for(var p=0;p<f;p++){var m=y*f+p;v[m]=0}g[y]=0}for(var E=0;E<d;E++){var C=c[E],P=C.data("source"),T=C.data("target");if(P!==T){var R=l.indexOfId(P),D=l.indexOfId(T),L=a(C),j=D*f+R;v[j]+=L,g[R]+=L}}for(var F=1/f+_,q=0;q<f;q++)if(g[q]===0)for(var W=0;W<f;W++){var Z=W*f+q;v[Z]=F}else for(var Q=0;Q<f;Q++){var re=Q*f+q;v[re]=v[re]/g[q]+_}for(var ee=new Array(f),ue=new Array(f),de,se=0;se<f;se++)ee[se]=1;for(var be=0;be<o;be++){for(var Le=0;Le<f;Le++)ue[Le]=0;for(var fe=0;fe<f;fe++)for(var ce=0;ce<f;ce++){var Ee=fe*f+ce;ue[fe]+=v[Ee]*ee[ce]}I5(ue),de=ee,ee=ue,ue=de;for(var Ce=0,ke=0;ke<f;ke++){var Ie=de[ke]-ee[ke];Ce+=Ie*Ie}if(Ce<i)break}var ve={rank:function(xe){return xe=s.collection(xe)[0],ee[l.indexOf(xe)]}};return ve}},XT=Sa({root:null,weight:function(e){return 1},directed:!1,alpha:0}),ig={degreeCentralityNormalized:function(e){e=XT(e);var t=this.cy(),n=this.nodes(),i=n.length;if(e.directed){for(var c={},f={},h=0,d=0,v=0;v<i;v++){var g=n[v],_=g.id();e.root=g;var y=this.degreeCentrality(e);h<y.indegree&&(h=y.indegree),d<y.outdegree&&(d=y.outdegree),c[_]=y.indegree,f[_]=y.outdegree}return{indegree:function(m){return h==0?0:(yr(m)&&(m=t.filter(m)),c[m.id()]/h)},outdegree:function(m){return d===0?0:(yr(m)&&(m=t.filter(m)),f[m.id()]/d)}}}else{for(var o={},a=0,s=0;s<i;s++){var u=n[s];e.root=u;var l=this.degreeCentrality(e);a<l.degree&&(a=l.degree),o[u.id()]=l.degree}return{degree:function(m){return a===0?0:(yr(m)&&(m=t.filter(m)),o[m.id()]/a)}}}},degreeCentrality:function(e){e=XT(e);var t=this.cy(),n=this,i=e,o=i.root,a=i.weight,s=i.directed,u=i.alpha;if(o=t.collection(o)[0],s){for(var d=o.connectedEdges(),v=d.filter(function(P){return P.target().same(o)&&n.has(P)}),g=d.filter(function(P){return P.source().same(o)&&n.has(P)}),_=v.length,y=g.length,p=0,m=0,E=0;E<v.length;E++)p+=a(v[E]);for(var C=0;C<g.length;C++)m+=a(g[C]);return{indegree:Math.pow(_,1-u)*Math.pow(p,u),outdegree:Math.pow(y,1-u)*Math.pow(m,u)}}else{for(var l=o.connectedEdges().intersection(n),c=l.length,f=0,h=0;h<l.length;h++)f+=a(l[h]);return{degree:Math.pow(c,1-u)*Math.pow(f,u)}}}};ig.dc=ig.degreeCentrality;ig.dcn=ig.degreeCentralityNormalised=ig.degreeCentralityNormalized;var $T=Sa({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),og={closenessCentralityNormalized:function(e){for(var t=$T(e),n=t.harmonic,i=t.weight,o=t.directed,a=this.cy(),s={},u=0,l=this.nodes(),c=this.floydWarshall({weight:i,directed:o}),f=0;f<l.length;f++){for(var h=0,d=l[f],v=0;v<l.length;v++)if(f!==v){var g=c.distance(d,l[v]);n?h+=1/g:h+=g}n||(h=1/h),u<h&&(u=h),s[d.id()]=h}return{closeness:function(y){return u==0?0:(yr(y)?y=a.filter(y)[0].id():y=y.id(),s[y]/u)}}},closenessCentrality:function(e){var t=$T(e),n=t.root,i=t.weight,o=t.directed,a=t.harmonic;n=this.filter(n)[0];for(var s=this.dijkstra({root:n,weight:i,directed:o}),u=0,l=this.nodes(),c=0;c<l.length;c++){var f=l[c];if(!f.same(n)){var h=s.distanceTo(f);a?u+=1/h:u+=h}}return a?u:1/u}};og.cc=og.closenessCentrality;og.ccn=og.closenessCentralityNormalised=og.closenessCentralityNormalized;var Q5=Sa({weight:null,directed:!1}),Wx={betweennessCentrality:function(e){for(var t=Q5(e),n=t.directed,i=t.weight,o=i!=null,a=this.cy(),s=this.nodes(),u={},l={},c=0,f={set:function(m,E){l[m]=E,E>c&&(c=E)},get:function(m){return l[m]}},h=0;h<s.length;h++){var d=s[h],v=d.id();n?u[v]=d.outgoers().nodes():u[v]=d.openNeighborhood().nodes(),f.set(v,0)}for(var g=function(){for(var m=s[_].id(),E=[],C={},P={},T={},R=new jy(function(fe,ce){return T[fe]-T[ce]}),D=0;D<s.length;D++){var L=s[D].id();C[L]=[],P[L]=0,T[L]=1/0}for(P[m]=1,T[m]=0,R.push(m);!R.empty();){var j=R.pop();if(E.push(j),o)for(var F=0;F<u[j].length;F++){var q=u[j][F],W=a.getElementById(j),Z=void 0;W.edgesTo(q).length>0?Z=W.edgesTo(q)[0]:Z=q.edgesTo(W)[0];var Q=i(Z);q=q.id(),T[q]>T[j]+Q&&(T[q]=T[j]+Q,R.nodes.indexOf(q)<0?R.push(q):R.updateItem(q),P[q]=0,C[q]=[]),T[q]==T[j]+Q&&(P[q]=P[q]+P[j],C[q].push(j))}else for(var re=0;re<u[j].length;re++){var ee=u[j][re].id();T[ee]==1/0&&(R.push(ee),T[ee]=T[j]+1),T[ee]==T[j]+1&&(P[ee]=P[ee]+P[j],C[ee].push(j))}}for(var ue={},de=0;de<s.length;de++)ue[s[de].id()]=0;for(;E.length>0;){for(var se=E.pop(),be=0;be<C[se].length;be++){var Le=C[se][be];ue[Le]=ue[Le]+P[Le]/P[se]*(1+ue[se])}se!=s[_].id()&&f.set(se,f.get(se)+ue[se])}},_=0;_<s.length;_++)g();var y={betweenness:function(m){var E=a.collection(m).id();return f.get(E)},betweennessNormalized:function(m){if(c==0)return 0;var E=a.collection(m).id();return f.get(E)/c}};return y.betweennessNormalised=y.betweennessNormalized,y}};Wx.bc=Wx.betweennessCentrality;var J5=Sa({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(r){return 1}]}),e3=function(e){return J5(e)},t3=function(e,t){for(var n=0,i=0;i<t.length;i++)n+=t[i](e);return n},r3=function(e,t,n){for(var i=0;i<t;i++)e[i*t+i]=n},FD=function(e,t){for(var n,i=0;i<t;i++){n=0;for(var o=0;o<t;o++)n+=e[o*t+i];for(var a=0;a<t;a++)e[a*t+i]=e[a*t+i]/n}},n3=function(e,t,n){for(var i=new Array(n*n),o=0;o<n;o++){for(var a=0;a<n;a++)i[o*n+a]=0;for(var s=0;s<n;s++)for(var u=0;u<n;u++)i[o*n+u]+=e[o*n+s]*t[s*n+u]}return i},i3=function(e,t,n){for(var i=e.slice(0),o=1;o<n;o++)e=n3(e,i,t);return e},o3=function(e,t,n){for(var i=new Array(t*t),o=0;o<t*t;o++)i[o]=Math.pow(e[o],n);return FD(i,t),i},a3=function(e,t,n,i){for(var o=0;o<n;o++){var a=Math.round(e[o]*Math.pow(10,i))/Math.pow(10,i),s=Math.round(t[o]*Math.pow(10,i))/Math.pow(10,i);if(a!==s)return!1}return!0},s3=function(e,t,n,i){for(var o=[],a=0;a<t;a++){for(var s=[],u=0;u<t;u++)Math.round(e[a*t+u]*1e3)/1e3>0&&s.push(n[u]);s.length!==0&&o.push(i.collection(s))}return o},u3=function(e,t){for(var n=0;n<e.length;n++)if(!t[n]||e[n].id()!==t[n].id())return!1;return!0},l3=function(e){for(var t=0;t<e.length;t++)for(var n=0;n<e.length;n++)t!=n&&u3(e[t],e[n])&&e.splice(n,1);return e},KT=function(e){for(var t=this.nodes(),n=this.edges(),i=this.cy(),o=e3(e),a={},s=0;s<t.length;s++)a[t[s].id()]=s;for(var u=t.length,l=u*u,c=new Array(l),f,h=0;h<l;h++)c[h]=0;for(var d=0;d<n.length;d++){var v=n[d],g=a[v.source().id()],_=a[v.target().id()],y=t3(v,o.attributes);c[g*u+_]+=y,c[_*u+g]+=y}r3(c,u,o.multFactor),FD(c,u);for(var p=!0,m=0;p&&m<o.maxIterations;)p=!1,f=i3(c,u,o.expandFactor),c=o3(f,u,o.inflateFactor),a3(c,f,l,4)||(p=!0),m++;var E=s3(c,u,t,i);return E=l3(E),E},c3={markovClustering:KT,mcl:KT},f3=function(e){return e},BD=function(e,t){return Math.abs(t-e)},ZT=function(e,t,n){return e+BD(t,n)},QT=function(e,t,n){return e+Math.pow(n-t,2)},h3=function(e){return Math.sqrt(e)},d3=function(e,t,n){return Math.max(e,BD(t,n))},$g=function(e,t,n,i,o){for(var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:f3,s=i,u,l,c=0;c<e;c++)u=t(c),l=n(c),s=o(s,u,l);return a(s)},fg={euclidean:function(e,t,n){return e>=2?$g(e,t,n,0,QT,h3):$g(e,t,n,0,ZT)},squaredEuclidean:function(e,t,n){return $g(e,t,n,0,QT)},manhattan:function(e,t,n){return $g(e,t,n,0,ZT)},max:function(e,t,n){return $g(e,t,n,-1/0,d3)}};fg["squared-euclidean"]=fg.squaredEuclidean;fg.squaredeuclidean=fg.squaredEuclidean;function E0(r,e,t,n,i,o){var a;return Wi(r)?a=r:a=fg[r]||fg.euclidean,e===0&&Wi(r)?a(i,o):a(e,t,n,i,o)}var v3=Sa({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),CS=function(e){return v3(e)},o0=function(e,t,n,i,o){var a=o!=="kMedoids",s=a?function(f){return n[f]}:function(f){return i[f](n)},u=function(h){return i[h](t)},l=n,c=t;return E0(e,i.length,s,u,l,c)},Hb=function(e,t,n){for(var i=n.length,o=new Array(i),a=new Array(i),s=new Array(t),u=null,l=0;l<i;l++)o[l]=e.min(n[l]).value,a[l]=e.max(n[l]).value;for(var c=0;c<t;c++){u=[];for(var f=0;f<i;f++)u[f]=Math.random()*(a[f]-o[f])+o[f];s[c]=u}return s},UD=function(e,t,n,i,o){for(var a=1/0,s=0,u=0;u<t.length;u++){var l=o0(n,e,t[u],i,o);l<a&&(a=l,s=u)}return s},qD=function(e,t,n){for(var i=[],o=null,a=0;a<t.length;a++)o=t[a],n[o.id()]===e&&i.push(o);return i},p3=function(e,t,n){return Math.abs(t-e)<=n},g3=function(e,t,n){for(var i=0;i<e.length;i++)for(var o=0;o<e[i].length;o++){var a=Math.abs(e[i][o]-t[i][o]);if(a>n)return!1}return!0},y3=function(e,t,n){for(var i=0;i<n;i++)if(e===t[i])return!0;return!1},JT=function(e,t){var n=new Array(t);if(e.length<50)for(var i=0;i<t;i++){for(var o=e[Math.floor(Math.random()*e.length)];y3(o,n,i);)o=e[Math.floor(Math.random()*e.length)];n[i]=o}else for(var a=0;a<t;a++)n[a]=e[Math.floor(Math.random()*e.length)];return n},eC=function(e,t,n){for(var i=0,o=0;o<t.length;o++)i+=o0("manhattan",t[o],e,n,"kMedoids");return i},m3=function(e){var t=this.cy(),n=this.nodes(),i=null,o=CS(e),a=new Array(o.k),s={},u;o.testMode?typeof o.testCentroids=="number"?(o.testCentroids,u=Hb(n,o.k,o.attributes)):Fo(o.testCentroids)==="object"?u=o.testCentroids:u=Hb(n,o.k,o.attributes):u=Hb(n,o.k,o.attributes);for(var l=!0,c=0;l&&c<o.maxIterations;){for(var f=0;f<n.length;f++)i=n[f],s[i.id()]=UD(i,u,o.distance,o.attributes,"kMeans");l=!1;for(var h=0;h<o.k;h++){var d=qD(h,n,s);if(d.length!==0){for(var v=o.attributes.length,g=u[h],_=new Array(v),y=new Array(v),p=0;p<v;p++){y[p]=0;for(var m=0;m<d.length;m++)i=d[m],y[p]+=o.attributes[p](i);_[p]=y[p]/d.length,p3(_[p],g[p],o.sensitivityThreshold)||(l=!0)}u[h]=_,a[h]=t.collection(d)}}c++}return a},b3=function(e){var t=this.cy(),n=this.nodes(),i=null,o=CS(e),a=new Array(o.k),s,u={},l,c=new Array(o.k);o.testMode?typeof o.testCentroids=="number"||(Fo(o.testCentroids)==="object"?s=o.testCentroids:s=JT(n,o.k)):s=JT(n,o.k);for(var f=!0,h=0;f&&h<o.maxIterations;){for(var d=0;d<n.length;d++)i=n[d],u[i.id()]=UD(i,s,o.distance,o.attributes,"kMedoids");f=!1;for(var v=0;v<s.length;v++){var g=qD(v,n,u);if(g.length!==0){c[v]=eC(s[v],g,o.attributes);for(var _=0;_<g.length;_++)l=eC(g[_],g,o.attributes),l<c[v]&&(c[v]=l,s[v]=g[_],f=!0);a[v]=t.collection(g)}}h++}return a},_3=function(e,t,n,i,o){for(var a,s,u=0;u<t.length;u++)for(var l=0;l<e.length;l++)i[u][l]=Math.pow(n[u][l],o.m);for(var c=0;c<e.length;c++)for(var f=0;f<o.attributes.length;f++){a=0,s=0;for(var h=0;h<t.length;h++)a+=i[h][c]*o.attributes[f](t[h]),s+=i[h][c];e[c][f]=a/s}},w3=function(e,t,n,i,o){for(var a=0;a<e.length;a++)t[a]=e[a].slice();for(var s,u,l,c=2/(o.m-1),f=0;f<n.length;f++)for(var h=0;h<i.length;h++){s=0;for(var d=0;d<n.length;d++)u=o0(o.distance,i[h],n[f],o.attributes,"cmeans"),l=o0(o.distance,i[h],n[d],o.attributes,"cmeans"),s+=Math.pow(u/l,c);e[h][f]=1/s}},E3=function(e,t,n,i){for(var o=new Array(n.k),a=0;a<o.length;a++)o[a]=[];for(var s,u,l=0;l<t.length;l++){s=-1/0,u=-1;for(var c=0;c<t[0].length;c++)t[l][c]>s&&(s=t[l][c],u=c);o[u].push(e[l])}for(var f=0;f<o.length;f++)o[f]=i.collection(o[f]);return o},tC=function(e){var t=this.cy(),n=this.nodes(),i=CS(e),o,a,s,u,l;u=new Array(n.length);for(var c=0;c<n.length;c++)u[c]=new Array(i.k);s=new Array(n.length);for(var f=0;f<n.length;f++)s[f]=new Array(i.k);for(var h=0;h<n.length;h++){for(var d=0,v=0;v<i.k;v++)s[h][v]=Math.random(),d+=s[h][v];for(var g=0;g<i.k;g++)s[h][g]=s[h][g]/d}a=new Array(i.k);for(var _=0;_<i.k;_++)a[_]=new Array(i.attributes.length);l=new Array(n.length);for(var y=0;y<n.length;y++)l[y]=new Array(i.k);for(var p=!0,m=0;p&&m<i.maxIterations;)p=!1,_3(a,n,s,l,i),w3(s,u,a,n,i),g3(s,u,i.sensitivityThreshold)||(p=!0),m++;return o=E3(n,s,i,t),{clusters:o,degreeOfMembership:s}},O3={kMeans:m3,kMedoids:b3,fuzzyCMeans:tC,fcm:tC},x3=Sa({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),S3={single:"min",complete:"max"},T3=function(e){var t=x3(e),n=S3[t.linkage];return n!=null&&(t.linkage=n),t},rC=function(e,t,n,i,o){for(var a=0,s=1/0,u,l=o.attributes,c=function(D,L){return E0(o.distance,l.length,function(j){return l[j](D)},function(j){return l[j](L)},D,L)},f=0;f<e.length;f++){var h=e[f].key,d=n[h][i[h]];d<s&&(a=h,s=d)}if(o.mode==="threshold"&&s>=o.threshold||o.mode==="dendrogram"&&e.length===1)return!1;var v=t[a],g=t[i[a]],_;o.mode==="dendrogram"?_={left:v,right:g,key:v.key}:_={value:v.value.concat(g.value),key:v.key},e[v.index]=_,e.splice(g.index,1),t[v.key]=_;for(var y=0;y<e.length;y++){var p=e[y];v.key===p.key?u=1/0:o.linkage==="min"?(u=n[v.key][p.key],n[v.key][p.key]>n[g.key][p.key]&&(u=n[g.key][p.key])):o.linkage==="max"?(u=n[v.key][p.key],n[v.key][p.key]<n[g.key][p.key]&&(u=n[g.key][p.key])):o.linkage==="mean"?u=(n[v.key][p.key]*v.size+n[g.key][p.key]*g.size)/(v.size+g.size):o.mode==="dendrogram"?u=c(p.value,v.value):u=c(p.value[0],v.value[0]),n[v.key][p.key]=n[p.key][v.key]=u}for(var m=0;m<e.length;m++){var E=e[m].key;if(i[E]===v.key||i[E]===g.key){for(var C=E,P=0;P<e.length;P++){var T=e[P].key;n[E][T]<n[E][C]&&(C=T)}i[E]=C}e[m].index=m}return v.key=g.key=v.index=g.index=null,!0},eg=function(e,t,n){e&&(e.value?t.push(e.value):(e.left&&eg(e.left,t),e.right&&eg(e.right,t)))},Hx=function(e,t){if(!e)return"";if(e.left&&e.right){var n=Hx(e.left,t),i=Hx(e.right,t),o=t.add({group:"nodes",data:{id:n+","+i}});return t.add({group:"edges",data:{source:n,target:o.id()}}),t.add({group:"edges",data:{source:i,target:o.id()}}),o.id()}else if(e.value)return e.value.id()},Yx=function(e,t,n){if(!e)return[];var i=[],o=[],a=[];return t===0?(e.left&&eg(e.left,i),e.right&&eg(e.right,o),a=i.concat(o),[n.collection(a)]):t===1?e.value?[n.collection(e.value)]:(e.left&&eg(e.left,i),e.right&&eg(e.right,o),[n.collection(i),n.collection(o)]):e.value?[n.collection(e.value)]:(e.left&&(i=Yx(e.left,t-1,n)),e.right&&(o=Yx(e.right,t-1,n)),i.concat(o))},nC=function(e){for(var t=this.cy(),n=this.nodes(),i=T3(e),o=i.attributes,a=function(m,E){return E0(i.distance,o.length,function(C){return o[C](m)},function(C){return o[C](E)},m,E)},s=[],u=[],l=[],c=[],f=0;f<n.length;f++){var h={value:i.mode==="dendrogram"?n[f]:[n[f]],key:f,index:f};s[f]=h,c[f]=h,u[f]=[],l[f]=0}for(var d=0;d<s.length;d++)for(var v=0;v<=d;v++){var g=void 0;i.mode==="dendrogram"?g=d===v?1/0:a(s[d].value,s[v].value):g=d===v?1/0:a(s[d].value[0],s[v].value[0]),u[d][v]=g,u[v][d]=g,g<u[d][l[d]]&&(l[d]=v)}for(var _=rC(s,c,u,l,i);_;)_=rC(s,c,u,l,i);var y;return i.mode==="dendrogram"?(y=Yx(s[0],i.dendrogramDepth,t),i.addDendrogram&&Hx(s[0],t)):(y=new Array(s.length),s.forEach(function(p,m){p.key=p.index=null,y[m]=t.collection(p.value)})),y},C3={hierarchicalClustering:nC,hca:nC},P3=Sa({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),A3=function(e){var t=e.damping,n=e.preference;.5<=t&&t<1||Vi("Damping must range on [0.5, 1).  Got: ".concat(t));var i=["median","mean","min","max"];return i.some(function(o){return o===n})||zt(n)||Vi("Preference must be one of [".concat(i.map(function(o){return"'".concat(o,"'")}).join(", "),"] or a number.  Got: ").concat(n)),P3(e)},R3=function(e,t,n,i){var o=function(s,u){return i[u](s)};return-E0(e,i.length,function(a){return o(t,a)},function(a){return o(n,a)},t,n)},I3=function(e,t){var n=null;return t==="median"?n=A5(e):t==="mean"?n=P5(e):t==="min"?n=T5(e):t==="max"?n=C5(e):n=t,n},k3=function(e,t,n){for(var i=[],o=0;o<e;o++)t[o*e+o]+n[o*e+o]>0&&i.push(o);return i},iC=function(e,t,n){for(var i=[],o=0;o<e;o++){for(var a=-1,s=-1/0,u=0;u<n.length;u++){var l=n[u];t[o*e+l]>s&&(a=l,s=t[o*e+l])}a>0&&i.push(a)}for(var c=0;c<n.length;c++)i[n[c]]=n[c];return i},D3=function(e,t,n){for(var i=iC(e,t,n),o=0;o<n.length;o++){for(var a=[],s=0;s<i.length;s++)i[s]===n[o]&&a.push(s);for(var u=-1,l=-1/0,c=0;c<a.length;c++){for(var f=0,h=0;h<a.length;h++)f+=t[a[h]*e+a[c]];f>l&&(u=c,l=f)}n[o]=a[u]}return i=iC(e,t,n),i},oC=function(e){for(var t=this.cy(),n=this.nodes(),i=A3(e),o={},a=0;a<n.length;a++)o[n[a].id()]=a;var s,u,l,c,f,h;s=n.length,u=s*s,l=new Array(u);for(var d=0;d<u;d++)l[d]=-1/0;for(var v=0;v<s;v++)for(var g=0;g<s;g++)v!==g&&(l[v*s+g]=R3(i.distance,n[v],n[g],i.attributes));c=I3(l,i.preference);for(var _=0;_<s;_++)l[_*s+_]=c;f=new Array(u);for(var y=0;y<u;y++)f[y]=0;h=new Array(u);for(var p=0;p<u;p++)h[p]=0;for(var m=new Array(s),E=new Array(s),C=new Array(s),P=0;P<s;P++)m[P]=0,E[P]=0,C[P]=0;for(var T=new Array(s*i.minIterations),R=0;R<T.length;R++)T[R]=0;var D;for(D=0;D<i.maxIterations;D++){for(var L=0;L<s;L++){for(var j=-1/0,F=-1/0,q=-1,W=0,Z=0;Z<s;Z++)m[Z]=f[L*s+Z],W=h[L*s+Z]+l[L*s+Z],W>=j?(F=j,j=W,q=Z):W>F&&(F=W);for(var Q=0;Q<s;Q++)f[L*s+Q]=(1-i.damping)*(l[L*s+Q]-j)+i.damping*m[Q];f[L*s+q]=(1-i.damping)*(l[L*s+q]-F)+i.damping*m[q]}for(var re=0;re<s;re++){for(var ee=0,ue=0;ue<s;ue++)m[ue]=h[ue*s+re],E[ue]=Math.max(0,f[ue*s+re]),ee+=E[ue];ee-=E[re],E[re]=f[re*s+re],ee+=E[re];for(var de=0;de<s;de++)h[de*s+re]=(1-i.damping)*Math.min(0,ee-E[de])+i.damping*m[de];h[re*s+re]=(1-i.damping)*(ee-E[re])+i.damping*m[re]}for(var se=0,be=0;be<s;be++){var Le=h[be*s+be]+f[be*s+be]>0?1:0;T[D%i.minIterations*s+be]=Le,se+=Le}if(se>0&&(D>=i.minIterations-1||D==i.maxIterations-1)){for(var fe=0,ce=0;ce<s;ce++){C[ce]=0;for(var Ee=0;Ee<i.minIterations;Ee++)C[ce]+=T[Ee*s+ce];(C[ce]===0||C[ce]===i.minIterations)&&fe++}if(fe===s)break}}for(var Ce=k3(s,f,h),ke=D3(s,l,Ce),Ie={},ve=0;ve<Ce.length;ve++)Ie[Ce[ve]]=[];for(var we=0;we<n.length;we++){var xe=o[n[we].id()],Fe=ke[xe];Fe!=null&&Ie[Fe].push(n[we])}for(var He=new Array(Ce.length),at=0;at<Ce.length;at++)He[at]=t.collection(Ie[Ce[at]]);return He},M3={affinityPropagation:oC,ap:oC},L3=Sa({root:void 0,directed:!1}),N3={hierholzer:function(e){if(!wn(e)){var t=arguments;e={root:t[0],directed:t[1]}}var n=L3(e),i=n.root,o=n.directed,a=this,s=!1,u,l,c;i&&(c=yr(i)?this.filter(i)[0].id():i[0].id());var f={},h={};o?a.forEach(function(p){var m=p.id();if(p.isNode()){var E=p.indegree(!0),C=p.outdegree(!0),P=E-C,T=C-E;P==1?u?s=!0:u=m:T==1?l?s=!0:l=m:(T>1||P>1)&&(s=!0),f[m]=[],p.outgoers().forEach(function(R){R.isEdge()&&f[m].push(R.id())})}else h[m]=[void 0,p.target().id()]}):a.forEach(function(p){var m=p.id();if(p.isNode()){var E=p.degree(!0);E%2&&(u?l?s=!0:l=m:u=m),f[m]=[],p.connectedEdges().forEach(function(C){return f[m].push(C.id())})}else h[m]=[p.source().id(),p.target().id()]});var d={found:!1,trail:void 0};if(s)return d;if(l&&u)if(o){if(c&&l!=c)return d;c=l}else{if(c&&l!=c&&u!=c)return d;c||(c=l)}else c||(c=a[0].id());var v=function(m){for(var E=m,C=[m],P,T,R;f[E].length;)P=f[E].shift(),T=h[P][0],R=h[P][1],E!=R?(f[R]=f[R].filter(function(D){return D!=P}),E=R):!o&&E!=T&&(f[T]=f[T].filter(function(D){return D!=P}),E=T),C.unshift(P),C.unshift(E);return C},g=[],_=[];for(_=v(c);_.length!=1;)f[_[0]].length==0?(g.unshift(a.getElementById(_.shift())),g.unshift(a.getElementById(_.shift()))):_=v(_.shift()).concat(_);g.unshift(a.getElementById(_.shift()));for(var y in f)if(f[y].length)return d;return d.found=!0,d.trail=this.spawn(g,!0),d}},pm=function(){var e=this,t={},n=0,i=0,o=[],a=[],s={},u=function(h,d){for(var v=a.length-1,g=[],_=e.spawn();a[v].x!=h||a[v].y!=d;)g.push(a.pop().edge),v--;g.push(a.pop().edge),g.forEach(function(y){var p=y.connectedNodes().intersection(e);_.merge(y),p.forEach(function(m){var E=m.id(),C=m.connectedEdges().intersection(e);_.merge(m),t[E].cutVertex?_.merge(C.filter(function(P){return P.isLoop()})):_.merge(C)})}),o.push(_)},l=function(h,d,v){h===v&&(i+=1),t[d]={id:n,low:n++,cutVertex:!1};var g=e.getElementById(d).connectedEdges().intersection(e);if(g.size()===0)o.push(e.spawn(e.getElementById(d)));else{var _,y,p,m;g.forEach(function(E){_=E.source().id(),y=E.target().id(),p=_===d?y:_,p!==v&&(m=E.id(),s[m]||(s[m]=!0,a.push({x:d,y:p,edge:E})),p in t?t[d].low=Math.min(t[d].low,t[p].id):(l(h,p,d),t[d].low=Math.min(t[d].low,t[p].low),t[d].id<=t[p].low&&(t[d].cutVertex=!0,u(d,p))))})}};e.forEach(function(f){if(f.isNode()){var h=f.id();h in t||(i=0,l(h,h),t[h].cutVertex=i>1)}});var c=Object.keys(t).filter(function(f){return t[f].cutVertex}).map(function(f){return e.getElementById(f)});return{cut:e.spawn(c),components:o}},j3={hopcroftTarjanBiconnected:pm,htbc:pm,htb:pm,hopcroftTarjanBiconnectedComponents:pm},gm=function(){var e=this,t={},n=0,i=[],o=[],a=e.spawn(e),s=function(l){o.push(l),t[l]={index:n,low:n++,explored:!1};var c=e.getElementById(l).connectedEdges().intersection(e);if(c.forEach(function(g){var _=g.target().id();_!==l&&(_ in t||s(_),t[_].explored||(t[l].low=Math.min(t[l].low,t[_].low)))}),t[l].index===t[l].low){for(var f=e.spawn();;){var h=o.pop();if(f.merge(e.getElementById(h)),t[h].low=t[l].index,t[h].explored=!0,h===l)break}var d=f.edgesWith(f),v=f.merge(d);i.push(v),a=a.difference(v)}};return e.forEach(function(u){if(u.isNode()){var l=u.id();l in t||s(l)}}),{cut:a,components:i}},F3={tarjanStronglyConnected:gm,tsc:gm,tscc:gm,tarjanStronglyConnectedComponents:gm},zD={};[Ey,v5,p5,y5,b5,w5,x5,Z5,ig,og,Wx,c3,O3,C3,M3,N3,j3,F3].forEach(function(r){xr(zD,r)});/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var GD=0,VD=1,WD=2,tc=function(e){if(!(this instanceof tc))return new tc(e);this.id="Thenable/1.0.7",this.state=GD,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};tc.prototype={fulfill:function(e){return aC(this,VD,"fulfillValue",e)},reject:function(e){return aC(this,WD,"rejectReason",e)},then:function(e,t){var n=this,i=new tc;return n.onFulfilled.push(uC(e,i,"fulfill")),n.onRejected.push(uC(t,i,"reject")),HD(n),i.proxy}};var aC=function(e,t,n,i){return e.state===GD&&(e.state=t,e[n]=i,HD(e)),e},HD=function(e){e.state===VD?sC(e,"onFulfilled",e.fulfillValue):e.state===WD&&sC(e,"onRejected",e.rejectReason)},sC=function(e,t,n){if(e[t].length!==0){var i=e[t];e[t]=[];var o=function(){for(var s=0;s<i.length;s++)i[s](n)};typeof setImmediate=="function"?setImmediate(o):setTimeout(o,0)}},uC=function(e,t,n){return function(i){if(typeof e!="function")t[n].call(t,i);else{var o;try{o=e(i)}catch(a){t.reject(a);return}YD(t,o)}}},YD=function(e,t){if(e===t||e.proxy===t){e.reject(new TypeError("cannot resolve promise with itself"));return}var n;if(Fo(t)==="object"&&t!==null||typeof t=="function")try{n=t.then}catch(o){e.reject(o);return}if(typeof n=="function"){var i=!1;try{n.call(t,function(o){i||(i=!0,o===t?e.reject(new TypeError("circular thenable chain")):YD(e,o))},function(o){i||(i=!0,e.reject(o))})}catch(o){i||e.reject(o)}return}e.fulfill(t)};tc.all=function(r){return new tc(function(e,t){for(var n=new Array(r.length),i=0,o=function(u,l){n[u]=l,i++,i===r.length&&e(n)},a=0;a<r.length;a++)(function(s){var u=r[s],l=u!=null&&u.then!=null;if(l)u.then(function(f){o(s,f)},function(f){t(f)});else{var c=u;o(s,c)}})(a)})};tc.resolve=function(r){return new tc(function(e,t){e(r)})};tc.reject=function(r){return new tc(function(e,t){t(r)})};var pg=typeof Promise<"u"?Promise:tc,Xx=function(e,t,n){var i=yS(e),o=!i,a=this._private=xr({duration:1e3},t,n);if(a.target=e,a.style=a.style||a.css,a.started=!1,a.playing=!1,a.hooked=!1,a.applying=!1,a.progress=0,a.completes=[],a.frames=[],a.complete&&Wi(a.complete)&&a.completes.push(a.complete),o){var s=e.position();a.startPosition=a.startPosition||{x:s.x,y:s.y},a.startStyle=a.startStyle||e.cy().style().getAnimationStartStyle(e,a.style)}if(i){var u=e.pan();a.startPan={x:u.x,y:u.y},a.startZoom=e.zoom()}this.length=1,this[0]=this},zv=Xx.prototype;xr(zv,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var t,n=e.target._private.animation;e.queue?t=n.queue:t=n.current,t.push(this),Ou(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var t=this._private;return e===void 0?t.progress*t.duration:this.progress(e/t.duration)},progress:function(e){var t=this._private,n=t.playing;return e===void 0?t.progress:(n&&this.pause(),t.progress=e,t.started=!1,n&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,t=e.playing;t&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(l,c){var f=e[l];f!=null&&(e[l]=e[c],e[c]=f)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var i=0;i<e.style.length;i++){var o=e.style[i],a=o.name,s=e.startStyle[a];e.startStyle[a]=o,e.style[i]=s}return t&&this.play(),this},promise:function(e){var t=this._private,n;switch(e){case"frame":n=t.frames;break;default:case"complete":case"completed":n=t.completes}return new pg(function(i,o){n.push(function(){i()})})}});zv.complete=zv.completed;zv.run=zv.play;zv.running=zv.playing;var B3={animated:function(){return function(){var t=this,n=t.length!==void 0,i=n?t:[t],o=this._private.cy||this;if(!o.styleEnabled())return!1;var a=i[0];if(a)return a._private.animation.current.length>0}},clearQueue:function(){return function(){var t=this,n=t.length!==void 0,i=n?t:[t],o=this._private.cy||this;if(!o.styleEnabled())return this;for(var a=0;a<i.length;a++){var s=i[a];s._private.animation.queue=[]}return this}},delay:function(){return function(t,n){var i=this._private.cy||this;return i.styleEnabled()?this.animate({delay:t,duration:t,complete:n}):this}},delayAnimation:function(){return function(t,n){var i=this._private.cy||this;return i.styleEnabled()?this.animation({delay:t,duration:t,complete:n}):this}},animation:function(){return function(t,n){var i=this,o=i.length!==void 0,a=o?i:[i],s=this._private.cy||this,u=!o,l=!u;if(!s.styleEnabled())return this;var c=s.style();t=xr({},t,n);var f=Object.keys(t).length===0;if(f)return new Xx(a[0],t);switch(t.duration===void 0&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200;break}if(l&&(t.style=c.getPropsList(t.style||t.css),t.css=void 0),l&&t.renderedPosition!=null){var h=t.renderedPosition,d=s.pan(),v=s.zoom();t.position=DD(h,v,d)}if(u&&t.panBy!=null){var g=t.panBy,_=s.pan();t.pan={x:_.x+g.x,y:_.y+g.y}}var y=t.center||t.centre;if(u&&y!=null){var p=s.getCenterPan(y.eles,t.zoom);p!=null&&(t.pan=p)}if(u&&t.fit!=null){var m=t.fit,E=s.getFitViewport(m.eles||m.boundingBox,m.padding);E!=null&&(t.pan=E.pan,t.zoom=E.zoom)}if(u&&wn(t.zoom)){var C=s.getZoomedViewport(t.zoom);C!=null?(C.zoomed&&(t.zoom=C.zoom),C.panned&&(t.pan=C.pan)):t.zoom=null}return new Xx(a[0],t)}},animate:function(){return function(t,n){var i=this,o=i.length!==void 0,a=o?i:[i],s=this._private.cy||this;if(!s.styleEnabled())return this;n&&(t=xr({},t,n));for(var u=0;u<a.length;u++){var l=a[u],c=l.animated()&&(t.queue===void 0||t.queue),f=l.animation(t,c?{queue:!0}:void 0);f.play()}return this}},stop:function(){return function(t,n){var i=this,o=i.length!==void 0,a=o?i:[i],s=this._private.cy||this;if(!s.styleEnabled())return this;for(var u=0;u<a.length;u++){for(var l=a[u],c=l._private,f=c.animation.current,h=0;h<f.length;h++){var d=f[h],v=d._private;n&&(v.duration=0)}t&&(c.animation.queue=[]),n||(c.animation.current=[])}return s.notify("draw"),this}}},Yb,lC;function O0(){if(lC)return Yb;lC=1;var r=Array.isArray;return Yb=r,Yb}var Xb,cC;function U3(){if(cC)return Xb;cC=1;var r=O0(),e=Ly(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(o,a){if(r(o))return!1;var s=typeof o;return s=="number"||s=="symbol"||s=="boolean"||o==null||e(o)?!0:n.test(o)||!t.test(o)||a!=null&&o in Object(a)}return Xb=i,Xb}var $b,fC;function q3(){if(fC)return $b;fC=1;var r=xD(),e=My(),t="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",o="[object Proxy]";function a(s){if(!e(s))return!1;var u=r(s);return u==n||u==i||u==t||u==o}return $b=a,$b}var Kb,hC;function z3(){if(hC)return Kb;hC=1;var r=b0(),e=r["__core-js_shared__"];return Kb=e,Kb}var Zb,dC;function G3(){if(dC)return Zb;dC=1;var r=z3(),e=function(){var n=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function t(n){return!!e&&e in n}return Zb=t,Zb}var Qb,vC;function V3(){if(vC)return Qb;vC=1;var r=Function.prototype,e=r.toString;function t(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return Qb=t,Qb}var Jb,pC;function W3(){if(pC)return Jb;pC=1;var r=q3(),e=G3(),t=My(),n=V3(),i=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,a=Function.prototype,s=Object.prototype,u=a.toString,l=s.hasOwnProperty,c=RegExp("^"+u.call(l).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(h){if(!t(h)||e(h))return!1;var d=r(h)?c:o;return d.test(n(h))}return Jb=f,Jb}var e_,gC;function H3(){if(gC)return e_;gC=1;function r(e,t){return e==null?void 0:e[t]}return e_=r,e_}var t_,yC;function PS(){if(yC)return t_;yC=1;var r=W3(),e=H3();function t(n,i){var o=e(n,i);return r(o)?o:void 0}return t_=t,t_}var r_,mC;function x0(){if(mC)return r_;mC=1;var r=PS(),e=r(Object,"create");return r_=e,r_}var n_,bC;function Y3(){if(bC)return n_;bC=1;var r=x0();function e(){this.__data__=r?r(null):{},this.size=0}return n_=e,n_}var i_,_C;function X3(){if(_C)return i_;_C=1;function r(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return i_=r,i_}var o_,wC;function $3(){if(wC)return o_;wC=1;var r=x0(),e="__lodash_hash_undefined__",t=Object.prototype,n=t.hasOwnProperty;function i(o){var a=this.__data__;if(r){var s=a[o];return s===e?void 0:s}return n.call(a,o)?a[o]:void 0}return o_=i,o_}var a_,EC;function K3(){if(EC)return a_;EC=1;var r=x0(),e=Object.prototype,t=e.hasOwnProperty;function n(i){var o=this.__data__;return r?o[i]!==void 0:t.call(o,i)}return a_=n,a_}var s_,OC;function Z3(){if(OC)return s_;OC=1;var r=x0(),e="__lodash_hash_undefined__";function t(n,i){var o=this.__data__;return this.size+=this.has(n)?0:1,o[n]=r&&i===void 0?e:i,this}return s_=t,s_}var u_,xC;function Q3(){if(xC)return u_;xC=1;var r=Y3(),e=X3(),t=$3(),n=K3(),i=Z3();function o(a){var s=-1,u=a==null?0:a.length;for(this.clear();++s<u;){var l=a[s];this.set(l[0],l[1])}}return o.prototype.clear=r,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=n,o.prototype.set=i,u_=o,u_}var l_,SC;function J3(){if(SC)return l_;SC=1;function r(){this.__data__=[],this.size=0}return l_=r,l_}var c_,TC;function XD(){if(TC)return c_;TC=1;function r(e,t){return e===t||e!==e&&t!==t}return c_=r,c_}var f_,CC;function S0(){if(CC)return f_;CC=1;var r=XD();function e(t,n){for(var i=t.length;i--;)if(r(t[i][0],n))return i;return-1}return f_=e,f_}var h_,PC;function e4(){if(PC)return h_;PC=1;var r=S0(),e=Array.prototype,t=e.splice;function n(i){var o=this.__data__,a=r(o,i);if(a<0)return!1;var s=o.length-1;return a==s?o.pop():t.call(o,a,1),--this.size,!0}return h_=n,h_}var d_,AC;function t4(){if(AC)return d_;AC=1;var r=S0();function e(t){var n=this.__data__,i=r(n,t);return i<0?void 0:n[i][1]}return d_=e,d_}var v_,RC;function r4(){if(RC)return v_;RC=1;var r=S0();function e(t){return r(this.__data__,t)>-1}return v_=e,v_}var p_,IC;function n4(){if(IC)return p_;IC=1;var r=S0();function e(t,n){var i=this.__data__,o=r(i,t);return o<0?(++this.size,i.push([t,n])):i[o][1]=n,this}return p_=e,p_}var g_,kC;function i4(){if(kC)return g_;kC=1;var r=J3(),e=e4(),t=t4(),n=r4(),i=n4();function o(a){var s=-1,u=a==null?0:a.length;for(this.clear();++s<u;){var l=a[s];this.set(l[0],l[1])}}return o.prototype.clear=r,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=n,o.prototype.set=i,g_=o,g_}var y_,DC;function o4(){if(DC)return y_;DC=1;var r=PS(),e=b0(),t=r(e,"Map");return y_=t,y_}var m_,MC;function a4(){if(MC)return m_;MC=1;var r=Q3(),e=i4(),t=o4();function n(){this.size=0,this.__data__={hash:new r,map:new(t||e),string:new r}}return m_=n,m_}var b_,LC;function s4(){if(LC)return b_;LC=1;function r(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return b_=r,b_}var __,NC;function T0(){if(NC)return __;NC=1;var r=s4();function e(t,n){var i=t.__data__;return r(n)?i[typeof n=="string"?"string":"hash"]:i.map}return __=e,__}var w_,jC;function u4(){if(jC)return w_;jC=1;var r=T0();function e(t){var n=r(this,t).delete(t);return this.size-=n?1:0,n}return w_=e,w_}var E_,FC;function l4(){if(FC)return E_;FC=1;var r=T0();function e(t){return r(this,t).get(t)}return E_=e,E_}var O_,BC;function c4(){if(BC)return O_;BC=1;var r=T0();function e(t){return r(this,t).has(t)}return O_=e,O_}var x_,UC;function f4(){if(UC)return x_;UC=1;var r=T0();function e(t,n){var i=r(this,t),o=i.size;return i.set(t,n),this.size+=i.size==o?0:1,this}return x_=e,x_}var S_,qC;function h4(){if(qC)return S_;qC=1;var r=a4(),e=u4(),t=l4(),n=c4(),i=f4();function o(a){var s=-1,u=a==null?0:a.length;for(this.clear();++s<u;){var l=a[s];this.set(l[0],l[1])}}return o.prototype.clear=r,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=n,o.prototype.set=i,S_=o,S_}var T_,zC;function d4(){if(zC)return T_;zC=1;var r=h4(),e="Expected a function";function t(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var o=function(){var a=arguments,s=i?i.apply(this,a):a[0],u=o.cache;if(u.has(s))return u.get(s);var l=n.apply(this,a);return o.cache=u.set(s,l)||u,l};return o.cache=new(t.Cache||r),o}return t.Cache=r,T_=t,T_}var C_,GC;function v4(){if(GC)return C_;GC=1;var r=d4(),e=500;function t(n){var i=r(n,function(a){return o.size===e&&o.clear(),a}),o=i.cache;return i}return C_=t,C_}var P_,VC;function $D(){if(VC)return P_;VC=1;var r=v4(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,n=r(function(i){var o=[];return i.charCodeAt(0)===46&&o.push(""),i.replace(e,function(a,s,u,l){o.push(u?l.replace(t,"$1"):s||a)}),o});return P_=n,P_}var A_,WC;function KD(){if(WC)return A_;WC=1;function r(e,t){for(var n=-1,i=e==null?0:e.length,o=Array(i);++n<i;)o[n]=t(e[n],n,e);return o}return A_=r,A_}var R_,HC;function p4(){if(HC)return R_;HC=1;var r=bS(),e=KD(),t=O0(),n=Ly(),i=r?r.prototype:void 0,o=i?i.toString:void 0;function a(s){if(typeof s=="string")return s;if(t(s))return e(s,a)+"";if(n(s))return o?o.call(s):"";var u=s+"";return u=="0"&&1/s==-1/0?"-0":u}return R_=a,R_}var I_,YC;function ZD(){if(YC)return I_;YC=1;var r=p4();function e(t){return t==null?"":r(t)}return I_=e,I_}var k_,XC;function QD(){if(XC)return k_;XC=1;var r=O0(),e=U3(),t=$D(),n=ZD();function i(o,a){return r(o)?o:e(o,a)?[o]:t(n(o))}return k_=i,k_}var D_,$C;function AS(){if($C)return D_;$C=1;var r=Ly();function e(t){if(typeof t=="string"||r(t))return t;var n=t+"";return n=="0"&&1/t==-1/0?"-0":n}return D_=e,D_}var M_,KC;function g4(){if(KC)return M_;KC=1;var r=QD(),e=AS();function t(n,i){i=r(i,n);for(var o=0,a=i.length;n!=null&&o<a;)n=n[e(i[o++])];return o&&o==a?n:void 0}return M_=t,M_}var L_,ZC;function y4(){if(ZC)return L_;ZC=1;var r=g4();function e(t,n,i){var o=t==null?void 0:r(t,n);return o===void 0?i:o}return L_=e,L_}var m4=y4(),b4=Dy(m4),N_,QC;function _4(){if(QC)return N_;QC=1;var r=PS(),e=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch{}}();return N_=e,N_}var j_,JC;function w4(){if(JC)return j_;JC=1;var r=_4();function e(t,n,i){n=="__proto__"&&r?r(t,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[n]=i}return j_=e,j_}var F_,e2;function E4(){if(e2)return F_;e2=1;var r=w4(),e=XD(),t=Object.prototype,n=t.hasOwnProperty;function i(o,a,s){var u=o[a];(!(n.call(o,a)&&e(u,s))||s===void 0&&!(a in o))&&r(o,a,s)}return F_=i,F_}var B_,t2;function O4(){if(t2)return B_;t2=1;var r=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(n,i){var o=typeof n;return i=i??r,!!i&&(o=="number"||o!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<i}return B_=t,B_}var U_,r2;function x4(){if(r2)return U_;r2=1;var r=E4(),e=QD(),t=O4(),n=My(),i=AS();function o(a,s,u,l){if(!n(a))return a;s=e(s,a);for(var c=-1,f=s.length,h=f-1,d=a;d!=null&&++c<f;){var v=i(s[c]),g=u;if(v==="__proto__"||v==="constructor"||v==="prototype")return a;if(c!=h){var _=d[v];g=l?l(_,v,d):void 0,g===void 0&&(g=n(_)?_:t(s[c+1])?[]:{})}r(d,v,g),d=d[v]}return a}return U_=o,U_}var q_,n2;function S4(){if(n2)return q_;n2=1;var r=x4();function e(t,n,i){return t==null?t:r(t,n,i)}return q_=e,q_}var T4=S4(),C4=Dy(T4),z_,i2;function P4(){if(i2)return z_;i2=1;function r(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}return z_=r,z_}var G_,o2;function A4(){if(o2)return G_;o2=1;var r=KD(),e=P4(),t=O0(),n=Ly(),i=$D(),o=AS(),a=ZD();function s(u){return t(u)?r(u,o):n(u)?[u]:e(i(a(u)))}return G_=s,G_}var R4=A4(),I4=Dy(R4),k4={data:function(e){var t={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(i){},beforeSet:function(i,o){},onSet:function(i){},canSet:function(i){return!0}};return e=xr({},t,e),function(i,o){var a=e,s=this,u=s.length!==void 0,l=u?s:[s],c=u?s[0]:s;if(yr(i)){var f=i.indexOf(".")!==-1,h=f&&I4(i);if(a.allowGetting&&o===void 0){var d;return c&&(a.beforeGet(c),h&&c._private[a.field][i]===void 0?d=b4(c._private[a.field],h):d=c._private[a.field][i]),d}else if(a.allowSetting&&o!==void 0){var v=!a.immutableKeys[i];if(v){var g=vD({},i,o);a.beforeSet(s,g);for(var _=0,y=l.length;_<y;_++){var p=l[_];a.canSet(p)&&(h&&c._private[a.field][i]===void 0?C4(p._private[a.field],h,o):p._private[a.field][i]=o)}a.updateStyle&&s.updateStyle(),a.onSet(s),a.settingTriggersEvent&&s[a.triggerFnName](a.settingEvent)}}}else if(a.allowSetting&&wn(i)){var m=i,E,C,P=Object.keys(m);a.beforeSet(s,m);for(var T=0;T<P.length;T++){E=P[T],C=m[E];var R=!a.immutableKeys[E];if(R)for(var D=0;D<l.length;D++){var L=l[D];a.canSet(L)&&(L._private[a.field][E]=C)}}a.updateStyle&&s.updateStyle(),a.onSet(s),a.settingTriggersEvent&&s[a.triggerFnName](a.settingEvent)}else if(a.allowBinding&&Wi(i)){var j=i;s.on(a.bindingEvent,j)}else if(a.allowGetting&&i===void 0){var F;return c&&(a.beforeGet(c),F=c._private[a.field]),F}return s}},removeData:function(e){var t={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=xr({},t,e),function(i){var o=e,a=this,s=a.length!==void 0,u=s?a:[a];if(yr(i)){for(var l=i.split(/\s+/),c=l.length,f=0;f<c;f++){var h=l[f];if(!cd(h)){var d=!o.immutableKeys[h];if(d)for(var v=0,g=u.length;v<g;v++)u[v]._private[o.field][h]=void 0}}o.triggerEvent&&a[o.triggerFnName](o.event)}else if(i===void 0){for(var _=0,y=u.length;_<y;_++)for(var p=u[_]._private[o.field],m=Object.keys(p),E=0;E<m.length;E++){var C=m[E],P=!o.immutableKeys[C];P&&(p[C]=void 0)}o.triggerEvent&&a[o.triggerFnName](o.event)}return a}}},D4={eventAliasesOn:function(e){var t=e;t.addListener=t.listen=t.bind=t.on,t.unlisten=t.unbind=t.off=t.removeListener,t.trigger=t.emit,t.pon=t.promiseOn=function(n,i){var o=this,a=Array.prototype.slice.call(arguments,0);return new pg(function(s,u){var l=function(d){o.off.apply(o,f),s(d)},c=a.concat([l]),f=c.concat([]);o.on.apply(o,c)})}}},Fn={};[B3,k4,D4].forEach(function(r){xr(Fn,r)});var M4={animate:Fn.animate(),animation:Fn.animation(),animated:Fn.animated(),clearQueue:Fn.clearQueue(),delay:Fn.delay(),delayAnimation:Fn.delayAnimation(),stop:Fn.stop()},Bm={classes:function(e){var t=this;if(e===void 0){var n=[];return t[0]._private.classes.forEach(function(v){return n.push(v)}),n}else di(e)||(e=(e||"").match(/\S+/g)||[]);for(var i=[],o=new vg(e),a=0;a<t.length;a++){for(var s=t[a],u=s._private,l=u.classes,c=!1,f=0;f<e.length;f++){var h=e[f],d=l.has(h);if(!d){c=!0;break}}c||(c=l.size!==e.length),c&&(u.classes=o,i.push(s))}return i.length>0&&this.spawn(i).updateStyle().emit("class"),t},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var t=this[0];return t!=null&&t._private.classes.has(e)},toggleClass:function(e,t){di(e)||(e=e.match(/\S+/g)||[]);for(var n=this,i=t===void 0,o=[],a=0,s=n.length;a<s;a++)for(var u=n[a],l=u._private.classes,c=!1,f=0;f<e.length;f++){var h=e[f],d=l.has(h),v=!1;t||i&&!d?(l.add(h),v=!0):(!t||i&&d)&&(l.delete(h),v=!0),!c&&v&&(o.push(u),c=!0)}return o.length>0&&this.spawn(o).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,t){var n=this;if(t==null)t=250;else if(t===0)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},t),n}};Bm.className=Bm.classNames=Bm.classes;var _n={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:No,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};_n.variable="(?:[\\w-.]|(?:\\\\"+_n.metaChar+"))+";_n.className="(?:[\\w-]|(?:\\\\"+_n.metaChar+"))+";_n.value=_n.string+"|"+_n.number;_n.id=_n.variable;(function(){var r,e,t;for(r=_n.comparatorOp.split("|"),t=0;t<r.length;t++)e=r[t],_n.comparatorOp+="|@"+e;for(r=_n.comparatorOp.split("|"),t=0;t<r.length;t++)e=r[t],!(e.indexOf("!")>=0)&&e!=="="&&(_n.comparatorOp+="|\\!"+e)})();var si=function(){return{checks:[]}},er={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},$x=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(r,e){return Lj(r.selector,e.selector)}),L4=function(){for(var r={},e,t=0;t<$x.length;t++)e=$x[t],r[e.selector]=e.matches;return r}(),N4=function(e,t){return L4[e](t)},j4="("+$x.map(function(r){return r.selector}).join("|")+")",Up=function(e){return e.replace(new RegExp("\\\\("+_n.metaChar+")","g"),function(t,n){return n})},nd=function(e,t,n){e[e.length-1]=n},Kx=[{name:"group",query:!0,regex:"("+_n.group+")",populate:function(e,t,n){var i=Lo(n,1),o=i[0];t.checks.push({type:er.GROUP,value:o==="*"?o:o+"s"})}},{name:"state",query:!0,regex:j4,populate:function(e,t,n){var i=Lo(n,1),o=i[0];t.checks.push({type:er.STATE,value:o})}},{name:"id",query:!0,regex:"\\#("+_n.id+")",populate:function(e,t,n){var i=Lo(n,1),o=i[0];t.checks.push({type:er.ID,value:Up(o)})}},{name:"className",query:!0,regex:"\\.("+_n.className+")",populate:function(e,t,n){var i=Lo(n,1),o=i[0];t.checks.push({type:er.CLASS,value:Up(o)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+_n.variable+")\\s*\\]",populate:function(e,t,n){var i=Lo(n,1),o=i[0];t.checks.push({type:er.DATA_EXIST,field:Up(o)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+_n.variable+")\\s*("+_n.comparatorOp+")\\s*("+_n.value+")\\s*\\]",populate:function(e,t,n){var i=Lo(n,3),o=i[0],a=i[1],s=i[2],u=new RegExp("^"+_n.string+"$").exec(s)!=null;u?s=s.substring(1,s.length-1):s=parseFloat(s),t.checks.push({type:er.DATA_COMPARE,field:Up(o),operator:a,value:s})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+_n.boolOp+")\\s*("+_n.variable+")\\s*\\]",populate:function(e,t,n){var i=Lo(n,2),o=i[0],a=i[1];t.checks.push({type:er.DATA_BOOL,field:Up(a),operator:o})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+_n.meta+")\\s*("+_n.comparatorOp+")\\s*("+_n.number+")\\s*\\]\\]",populate:function(e,t,n){var i=Lo(n,3),o=i[0],a=i[1],s=i[2];t.checks.push({type:er.META_COMPARE,field:Up(o),operator:a,value:parseFloat(s)})}},{name:"nextQuery",separator:!0,regex:_n.separator,populate:function(e,t){var n=e.currentSubject,i=e.edgeCount,o=e.compoundCount,a=e[e.length-1];n!=null&&(a.subject=n,e.currentSubject=null),a.edgeCount=i,a.compoundCount=o,e.edgeCount=0,e.compoundCount=0;var s=e[e.length++]=si();return s}},{name:"directedEdge",separator:!0,regex:_n.directedEdge,populate:function(e,t){if(e.currentSubject==null){var n=si(),i=t,o=si();return n.checks.push({type:er.DIRECTED_EDGE,source:i,target:o}),nd(e,t,n),e.edgeCount++,o}else{var a=si(),s=t,u=si();return a.checks.push({type:er.NODE_SOURCE,source:s,target:u}),nd(e,t,a),e.edgeCount++,u}}},{name:"undirectedEdge",separator:!0,regex:_n.undirectedEdge,populate:function(e,t){if(e.currentSubject==null){var n=si(),i=t,o=si();return n.checks.push({type:er.UNDIRECTED_EDGE,nodes:[i,o]}),nd(e,t,n),e.edgeCount++,o}else{var a=si(),s=t,u=si();return a.checks.push({type:er.NODE_NEIGHBOR,node:s,neighbor:u}),nd(e,t,a),u}}},{name:"child",separator:!0,regex:_n.child,populate:function(e,t){if(e.currentSubject==null){var n=si(),i=si(),o=e[e.length-1];return n.checks.push({type:er.CHILD,parent:o,child:i}),nd(e,t,n),e.compoundCount++,i}else if(e.currentSubject===t){var a=si(),s=e[e.length-1],u=si(),l=si(),c=si(),f=si();return a.checks.push({type:er.COMPOUND_SPLIT,left:s,right:u,subject:l}),l.checks=t.checks,t.checks=[{type:er.TRUE}],f.checks.push({type:er.TRUE}),u.checks.push({type:er.PARENT,parent:f,child:c}),nd(e,s,a),e.currentSubject=l,e.compoundCount++,c}else{var h=si(),d=si(),v=[{type:er.PARENT,parent:h,child:d}];return h.checks=t.checks,t.checks=v,e.compoundCount++,d}}},{name:"descendant",separator:!0,regex:_n.descendant,populate:function(e,t){if(e.currentSubject==null){var n=si(),i=si(),o=e[e.length-1];return n.checks.push({type:er.DESCENDANT,ancestor:o,descendant:i}),nd(e,t,n),e.compoundCount++,i}else if(e.currentSubject===t){var a=si(),s=e[e.length-1],u=si(),l=si(),c=si(),f=si();return a.checks.push({type:er.COMPOUND_SPLIT,left:s,right:u,subject:l}),l.checks=t.checks,t.checks=[{type:er.TRUE}],f.checks.push({type:er.TRUE}),u.checks.push({type:er.ANCESTOR,ancestor:f,descendant:c}),nd(e,s,a),e.currentSubject=l,e.compoundCount++,c}else{var h=si(),d=si(),v=[{type:er.ANCESTOR,ancestor:h,descendant:d}];return h.checks=t.checks,t.checks=v,e.compoundCount++,d}}},{name:"subject",modifier:!0,regex:_n.subject,populate:function(e,t){if(e.currentSubject!=null&&e.currentSubject!==t)return Bn("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=t;var n=e[e.length-1],i=n.checks[0],o=i==null?null:i.type;o===er.DIRECTED_EDGE?i.type=er.NODE_TARGET:o===er.UNDIRECTED_EDGE&&(i.type=er.NODE_NEIGHBOR,i.node=i.nodes[1],i.neighbor=i.nodes[0],i.nodes=null)}}];Kx.forEach(function(r){return r.regexObj=new RegExp("^"+r.regex)});var F4=function(e){for(var t,n,i,o=0;o<Kx.length;o++){var a=Kx[o],s=a.name,u=e.match(a.regexObj);if(u!=null){n=u,t=a,i=s;var l=u[0];e=e.substring(l.length);break}}return{expr:t,match:n,name:i,remaining:e}},B4=function(e){var t=e.match(/^\s+/);if(t){var n=t[0];e=e.substring(n.length)}return e},U4=function(e){var t=this,n=t.inputText=e,i=t[0]=si();for(t.length=1,n=B4(n);;){var o=F4(n);if(o.expr==null)return Bn("The selector `"+e+"`is invalid"),!1;var a=o.match.slice(1),s=o.expr.populate(t,i,a);if(s===!1)return!1;if(s!=null&&(i=s),n=o.remaining,n.match(/^\s*$/))break}var u=t[t.length-1];t.currentSubject!=null&&(u.subject=t.currentSubject),u.edgeCount=t.edgeCount,u.compoundCount=t.compoundCount;for(var l=0;l<t.length;l++){var c=t[l];if(c.compoundCount>0&&c.edgeCount>0)return Bn("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(c.edgeCount>1)return Bn("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;c.edgeCount===1&&Bn("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},q4=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(c){return c??""},t=function(c){return yr(c)?'"'+c+'"':e(c)},n=function(c){return" "+c+" "},i=function(c,f){var h=c.type,d=c.value;switch(h){case er.GROUP:{var v=e(d);return v.substring(0,v.length-1)}case er.DATA_COMPARE:{var g=c.field,_=c.operator;return"["+g+n(e(_))+t(d)+"]"}case er.DATA_BOOL:{var y=c.operator,p=c.field;return"["+e(y)+p+"]"}case er.DATA_EXIST:{var m=c.field;return"["+m+"]"}case er.META_COMPARE:{var E=c.operator,C=c.field;return"[["+C+n(e(E))+t(d)+"]]"}case er.STATE:return d;case er.ID:return"#"+d;case er.CLASS:return"."+d;case er.PARENT:case er.CHILD:return o(c.parent,f)+n(">")+o(c.child,f);case er.ANCESTOR:case er.DESCENDANT:return o(c.ancestor,f)+" "+o(c.descendant,f);case er.COMPOUND_SPLIT:{var P=o(c.left,f),T=o(c.subject,f),R=o(c.right,f);return P+(P.length>0?" ":"")+T+R}case er.TRUE:return""}},o=function(c,f){return c.checks.reduce(function(h,d,v){return h+(f===c&&v===0?"$":"")+i(d,f)},"")},a="",s=0;s<this.length;s++){var u=this[s];a+=o(u,u.subject),this.length>1&&s<this.length-1&&(a+=", ")}return this.toStringCache=a,a},z4={parse:U4,toString:q4},JD=function(e,t,n){var i,o=yr(e),a=zt(e),s=yr(n),u,l,c=!1,f=!1,h=!1;switch(t.indexOf("!")>=0&&(t=t.replace("!",""),f=!0),t.indexOf("@")>=0&&(t=t.replace("@",""),c=!0),(o||s||c)&&(u=!o&&!a?"":""+e,l=""+n),c&&(e=u=u.toLowerCase(),n=l=l.toLowerCase()),t){case"*=":i=u.indexOf(l)>=0;break;case"$=":i=u.indexOf(l,u.length-l.length)>=0;break;case"^=":i=u.indexOf(l)===0;break;case"=":i=e===n;break;case">":h=!0,i=e>n;break;case">=":h=!0,i=e>=n;break;case"<":h=!0,i=e<n;break;case"<=":h=!0,i=e<=n;break;default:i=!1;break}return f&&(e!=null||!h)&&(i=!i),i},G4=function(e,t){switch(t){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},V4=function(e){return e!==void 0},RS=function(e,t){return e.data(t)},W4=function(e,t){return e[t]()},Ji=[],Ti=function(e,t){return e.checks.every(function(n){return Ji[n.type](n,t)})};Ji[er.GROUP]=function(r,e){var t=r.value;return t==="*"||t===e.group()};Ji[er.STATE]=function(r,e){var t=r.value;return N4(t,e)};Ji[er.ID]=function(r,e){var t=r.value;return e.id()===t};Ji[er.CLASS]=function(r,e){var t=r.value;return e.hasClass(t)};Ji[er.META_COMPARE]=function(r,e){var t=r.field,n=r.operator,i=r.value;return JD(W4(e,t),n,i)};Ji[er.DATA_COMPARE]=function(r,e){var t=r.field,n=r.operator,i=r.value;return JD(RS(e,t),n,i)};Ji[er.DATA_BOOL]=function(r,e){var t=r.field,n=r.operator;return G4(RS(e,t),n)};Ji[er.DATA_EXIST]=function(r,e){var t=r.field;return r.operator,V4(RS(e,t))};Ji[er.UNDIRECTED_EDGE]=function(r,e){var t=r.nodes[0],n=r.nodes[1],i=e.source(),o=e.target();return Ti(t,i)&&Ti(n,o)||Ti(n,i)&&Ti(t,o)};Ji[er.NODE_NEIGHBOR]=function(r,e){return Ti(r.node,e)&&e.neighborhood().some(function(t){return t.isNode()&&Ti(r.neighbor,t)})};Ji[er.DIRECTED_EDGE]=function(r,e){return Ti(r.source,e.source())&&Ti(r.target,e.target())};Ji[er.NODE_SOURCE]=function(r,e){return Ti(r.source,e)&&e.outgoers().some(function(t){return t.isNode()&&Ti(r.target,t)})};Ji[er.NODE_TARGET]=function(r,e){return Ti(r.target,e)&&e.incomers().some(function(t){return t.isNode()&&Ti(r.source,t)})};Ji[er.CHILD]=function(r,e){return Ti(r.child,e)&&Ti(r.parent,e.parent())};Ji[er.PARENT]=function(r,e){return Ti(r.parent,e)&&e.children().some(function(t){return Ti(r.child,t)})};Ji[er.DESCENDANT]=function(r,e){return Ti(r.descendant,e)&&e.ancestors().some(function(t){return Ti(r.ancestor,t)})};Ji[er.ANCESTOR]=function(r,e){return Ti(r.ancestor,e)&&e.descendants().some(function(t){return Ti(r.descendant,t)})};Ji[er.COMPOUND_SPLIT]=function(r,e){return Ti(r.subject,e)&&Ti(r.left,e)&&Ti(r.right,e)};Ji[er.TRUE]=function(){return!0};Ji[er.COLLECTION]=function(r,e){var t=r.value;return t.has(e)};Ji[er.FILTER]=function(r,e){var t=r.value;return t(e)};var H4=function(e){var t=this;if(t.length===1&&t[0].checks.length===1&&t[0].checks[0].type===er.ID)return e.getElementById(t[0].checks[0].value).collection();var n=function(o){for(var a=0;a<t.length;a++){var s=t[a];if(Ti(s,o))return!0}return!1};return t.text()==null&&(n=function(){return!0}),e.filter(n)},Y4=function(e){for(var t=this,n=0;n<t.length;n++){var i=t[n];if(Ti(i,e))return!0}return!1},X4={matches:Y4,filter:H4},dd=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||yr(e)&&e.match(/^\s*$/)||(Ou(e)?this.addQuery({checks:[{type:er.COLLECTION,value:e.collection()}]}):Wi(e)?this.addQuery({checks:[{type:er.FILTER,value:e}]}):yr(e)?this.parse(e)||(this.invalid=!0):Vi("A selector must be created from a string; found "))},vd=dd.prototype;[z4,X4].forEach(function(r){return xr(vd,r)});vd.text=function(){return this.inputText};vd.size=function(){return this.length};vd.eq=function(r){return this[r]};vd.sameText=function(r){return!this.invalid&&!r.invalid&&this.text()===r.text()};vd.addQuery=function(r){this[this.length++]=r};vd.selector=vd.toString;var ud={allAre:function(e){var t=new dd(e);return this.every(function(n){return t.matches(n)})},is:function(e){var t=new dd(e);return this.some(function(n){return t.matches(n)})},some:function(e,t){for(var n=0;n<this.length;n++){var i=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(i)return!0}return!1},every:function(e,t){for(var n=0;n<this.length;n++){var i=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(!i)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var t=this.length,n=e.length;return t!==n?!1:t===1?this[0]===e[0]:this.every(function(i){return e.hasElementWithId(i.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(t){return e.hasElementWithId(t.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var t=this.neighborhood();return e.every(function(n){return t.hasElementWithId(n.id())})},contains:function(e){e=this.cy().collection(e);var t=this;return e.every(function(n){return t.hasElementWithId(n.id())})}};ud.allAreNeighbours=ud.allAreNeighbors;ud.has=ud.contains;ud.equal=ud.equals=ud.same;var tl=function(e,t){return function(i,o,a,s){var u=i,l=this,c;if(u==null?c="":Ou(u)&&u.length===1&&(c=u.id()),l.length===1&&c){var f=l[0]._private,h=f.traversalCache=f.traversalCache||{},d=h[t]=h[t]||[],v=Uv(c),g=d[v];return g||(d[v]=e.call(l,i,o,a,s))}else return e.call(l,i,o,a,s)}},hg={parent:function(e){var t=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var i=0;i<this.length;i++){var o=this[i],a=o._private.parent;a&&t.push(a)}return this.spawn(t,!0).filter(e)},parents:function(e){for(var t=[],n=this.parent();n.nonempty();){for(var i=0;i<n.length;i++){var o=n[i];t.push(o)}n=n.parent()}return this.spawn(t,!0).filter(e)},commonAncestors:function(e){for(var t,n=0;n<this.length;n++){var i=this[n],o=i.parents();t=t||o,t=t.intersect(o)}return t.filter(e)},orphans:function(e){return this.stdFilter(function(t){return t.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(t){return t.isChild()}).filter(e)},children:tl(function(r){for(var e=[],t=0;t<this.length;t++)for(var n=this[t],i=n._private.children,o=0;o<i.length;o++)e.push(i[o]);return this.spawn(e,!0).filter(r)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var t=[];function n(i){for(var o=0;o<i.length;o++){var a=i[o];t.push(a),a.children().nonempty()&&n(a.children())}}return n(this.children()),this.spawn(t,!0).filter(e)}};function IS(r,e,t,n){for(var i=[],o=new vg,a=r.cy(),s=a.hasCompoundNodes(),u=0;u<r.length;u++){var l=r[u];t?i.push(l):s&&n(i,o,l)}for(;i.length>0;){var c=i.shift();e(c),o.add(c.id()),s&&n(i,o,c)}return r}function eM(r,e,t){if(t.isParent())for(var n=t._private.children,i=0;i<n.length;i++){var o=n[i];e.has(o.id())||r.push(o)}}hg.forEachDown=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return IS(this,r,e,eM)};function tM(r,e,t){if(t.isChild()){var n=t._private.parent;e.has(n.id())||r.push(n)}}hg.forEachUp=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return IS(this,r,e,tM)};function $4(r,e,t){tM(r,e,t),eM(r,e,t)}hg.forEachUpAndDown=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return IS(this,r,e,$4)};hg.ancestors=hg.parents;var Sy,rM;Sy=rM={data:Fn.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:Fn.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:Fn.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Fn.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:Fn.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:Fn.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};Sy.attr=Sy.data;Sy.removeAttr=Sy.removeData;var K4=rM,C0={};function V_(r){return function(e){var t=this;if(e===void 0&&(e=!0),t.length!==0)if(t.isNode()&&!t.removed()){for(var n=0,i=t[0],o=i._private.edges,a=0;a<o.length;a++){var s=o[a];!e&&s.isLoop()||(n+=r(i,s))}return n}else return}}xr(C0,{degree:V_(function(r,e){return e.source().same(e.target())?2:1}),indegree:V_(function(r,e){return e.target().same(r)?1:0}),outdegree:V_(function(r,e){return e.source().same(r)?1:0})});function qp(r,e){return function(t){for(var n,i=this.nodes(),o=0;o<i.length;o++){var a=i[o],s=a[r](t);s!==void 0&&(n===void 0||e(s,n))&&(n=s)}return n}}xr(C0,{minDegree:qp("degree",function(r,e){return r<e}),maxDegree:qp("degree",function(r,e){return r>e}),minIndegree:qp("indegree",function(r,e){return r<e}),maxIndegree:qp("indegree",function(r,e){return r>e}),minOutdegree:qp("outdegree",function(r,e){return r<e}),maxOutdegree:qp("outdegree",function(r,e){return r>e})});xr(C0,{totalDegree:function(e){for(var t=0,n=this.nodes(),i=0;i<n.length;i++)t+=n[i].degree(e);return t}});var ec,nM,iM=function(e,t,n){for(var i=0;i<e.length;i++){var o=e[i];if(!o.locked()){var a=o._private.position,s={x:t.x!=null?t.x-a.x:0,y:t.y!=null?t.y-a.y:0};o.isParent()&&!(s.x===0&&s.y===0)&&o.children().shift(s,n),o.dirtyBoundingBoxCache()}}},a2={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,t){iM(e,t,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};ec=nM={position:Fn.data(a2),silentPosition:Fn.data(xr({},a2,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,t){iM(e,t,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,t){if(wn(e))t?this.silentPosition(e):this.position(e);else if(Wi(e)){var n=e,i=this.cy();i.startBatch();for(var o=0;o<this.length;o++){var a=this[o],s=void 0;(s=n(a,o))&&(t?a.silentPosition(s):a.position(s))}i.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,t,n){var i;if(wn(e)?(i={x:zt(e.x)?e.x:0,y:zt(e.y)?e.y:0},n=t):yr(e)&&zt(t)&&(i={x:0,y:0},i[e]=t),i!=null){var o=this.cy();o.startBatch();for(var a=0;a<this.length;a++){var s=this[a];if(!(o.hasCompoundNodes()&&s.isChild()&&s.ancestors().anySame(this))){var u=s.position(),l={x:u.x+i.x,y:u.y+i.y};n?s.silentPosition(l):s.position(l)}}o.endBatch()}return this},silentShift:function(e,t){return wn(e)?this.shift(e,!0):yr(e)&&zt(t)&&this.shift(e,t,!0),this},renderedPosition:function(e,t){var n=this[0],i=this.cy(),o=i.zoom(),a=i.pan(),s=wn(e)?e:void 0,u=s!==void 0||t!==void 0&&yr(e);if(n&&n.isNode())if(u)for(var l=0;l<this.length;l++){var c=this[l];t!==void 0?c.position(e,(t-a[e])/o):s!==void 0&&c.position(DD(s,o,a))}else{var f=n.position();return s=w0(f,o,a),e===void 0?s:s[e]}else if(!u)return;return this},relativePosition:function(e,t){var n=this[0],i=this.cy(),o=wn(e)?e:void 0,a=o!==void 0||t!==void 0&&yr(e),s=i.hasCompoundNodes();if(n&&n.isNode())if(a)for(var u=0;u<this.length;u++){var l=this[u],c=s?l.parent():null,f=c&&c.length>0,h=f;f&&(c=c[0]);var d=h?c.position():{x:0,y:0};t!==void 0?l.position(e,t+d[e]):o!==void 0&&l.position({x:o.x+d.x,y:o.y+d.y})}else{var v=n.position(),g=s?n.parent():null,_=g&&g.length>0,y=_;_&&(g=g[0]);var p=y?g.position():{x:0,y:0};return o={x:v.x-p.x,y:v.y-p.y},e===void 0?o:o[e]}else if(!a)return;return this}};ec.modelPosition=ec.point=ec.position;ec.modelPositions=ec.points=ec.positions;ec.renderedPoint=ec.renderedPosition;ec.relativePoint=ec.relativePosition;var Z4=nM,ag,_d;ag=_d={};_d.renderedBoundingBox=function(r){var e=this.boundingBox(r),t=this.cy(),n=t.zoom(),i=t.pan(),o=e.x1*n+i.x,a=e.x2*n+i.x,s=e.y1*n+i.y,u=e.y2*n+i.y;return{x1:o,x2:a,y1:s,y2:u,w:a-o,h:u-s}};_d.dirtyCompoundBoundsCache=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(t){if(t.isParent()){var n=t._private;n.compoundBoundsClean=!1,n.bbCache=null,r||t.emitAndNotify("bounds")}}),this)};_d.updateCompoundBounds=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!r&&e.batching())return this;function t(a){if(!a.isParent())return;var s=a._private,u=a.children(),l=a.pstyle("compound-sizing-wrt-labels").value==="include",c={width:{val:a.pstyle("min-width").pfValue,left:a.pstyle("min-width-bias-left"),right:a.pstyle("min-width-bias-right")},height:{val:a.pstyle("min-height").pfValue,top:a.pstyle("min-height-bias-top"),bottom:a.pstyle("min-height-bias-bottom")}},f=u.boundingBox({includeLabels:l,includeOverlays:!1,useCache:!1}),h=s.position;(f.w===0||f.h===0)&&(f={w:a.pstyle("width").pfValue,h:a.pstyle("height").pfValue},f.x1=h.x-f.w/2,f.x2=h.x+f.w/2,f.y1=h.y-f.h/2,f.y2=h.y+f.h/2);function d(D,L,j){var F=0,q=0,W=L+j;return D>0&&W>0&&(F=L/W*D,q=j/W*D),{biasDiff:F,biasComplementDiff:q}}function v(D,L,j,F){if(j.units==="%")switch(F){case"width":return D>0?j.pfValue*D:0;case"height":return L>0?j.pfValue*L:0;case"average":return D>0&&L>0?j.pfValue*(D+L)/2:0;case"min":return D>0&&L>0?D>L?j.pfValue*L:j.pfValue*D:0;case"max":return D>0&&L>0?D>L?j.pfValue*D:j.pfValue*L:0;default:return 0}else return j.units==="px"?j.pfValue:0}var g=c.width.left.value;c.width.left.units==="px"&&c.width.val>0&&(g=g*100/c.width.val);var _=c.width.right.value;c.width.right.units==="px"&&c.width.val>0&&(_=_*100/c.width.val);var y=c.height.top.value;c.height.top.units==="px"&&c.height.val>0&&(y=y*100/c.height.val);var p=c.height.bottom.value;c.height.bottom.units==="px"&&c.height.val>0&&(p=p*100/c.height.val);var m=d(c.width.val-f.w,g,_),E=m.biasDiff,C=m.biasComplementDiff,P=d(c.height.val-f.h,y,p),T=P.biasDiff,R=P.biasComplementDiff;s.autoPadding=v(f.w,f.h,a.pstyle("padding"),a.pstyle("padding-relative-to").value),s.autoWidth=Math.max(f.w,c.width.val),h.x=(-E+f.x1+f.x2+C)/2,s.autoHeight=Math.max(f.h,c.height.val),h.y=(-T+f.y1+f.y2+R)/2}for(var n=0;n<this.length;n++){var i=this[n],o=i._private;(!o.compoundBoundsClean||r)&&(t(i),e.batching()||(o.compoundBoundsClean=!0))}return this};var el=function(e){return e===1/0||e===-1/0?0:e},Zl=function(e,t,n,i,o){i-t===0||o-n===0||t==null||n==null||i==null||o==null||(e.x1=t<e.x1?t:e.x1,e.x2=i>e.x2?i:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=o>e.y2?o:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},Dv=function(e,t){return t==null?e:Zl(e,t.x1,t.y1,t.x2,t.y2)},Kg=function(e,t,n){return Us(e,t,n)},ym=function(e,t,n){if(!t.cy().headless()){var i=t._private,o=i.rstyle,a=o.arrowWidth/2,s=t.pstyle(n+"-arrow-shape").value,u,l;if(s!=="none"){n==="source"?(u=o.srcX,l=o.srcY):n==="target"?(u=o.tgtX,l=o.tgtY):(u=o.midX,l=o.midY);var c=i.arrowBounds=i.arrowBounds||{},f=c[n]=c[n]||{};f.x1=u-a,f.y1=l-a,f.x2=u+a,f.y2=l+a,f.w=f.x2-f.x1,f.h=f.y2-f.y1,jm(f,1),Zl(e,f.x1,f.y1,f.x2,f.y2)}}},W_=function(e,t,n){if(!t.cy().headless()){var i;n?i=n+"-":i="";var o=t._private,a=o.rstyle,s=t.pstyle(i+"label").strValue;if(s){var u=t.pstyle("text-halign"),l=t.pstyle("text-valign"),c=Kg(a,"labelWidth",n),f=Kg(a,"labelHeight",n),h=Kg(a,"labelX",n),d=Kg(a,"labelY",n),v=t.pstyle(i+"text-margin-x").pfValue,g=t.pstyle(i+"text-margin-y").pfValue,_=t.isEdge(),y=t.pstyle(i+"text-rotation"),p=t.pstyle("text-outline-width").pfValue,m=t.pstyle("text-border-width").pfValue,E=m/2,C=t.pstyle("text-background-padding").pfValue,P=2,T=f,R=c,D=R/2,L=T/2,j,F,q,W;if(_)j=h-D,F=h+D,q=d-L,W=d+L;else{switch(u.value){case"left":j=h-R,F=h;break;case"center":j=h-D,F=h+D;break;case"right":j=h,F=h+R;break}switch(l.value){case"top":q=d-T,W=d;break;case"center":q=d-L,W=d+L;break;case"bottom":q=d,W=d+T;break}}var Z=v-Math.max(p,E)-C-P,Q=v+Math.max(p,E)+C+P,re=g-Math.max(p,E)-C-P,ee=g+Math.max(p,E)+C+P;j+=Z,F+=Q,q+=re,W+=ee;var ue=n||"main",de=o.labelBounds,se=de[ue]=de[ue]||{};se.x1=j,se.y1=q,se.x2=F,se.y2=W,se.w=F-j,se.h=W-q,se.leftPad=Z,se.rightPad=Q,se.topPad=re,se.botPad=ee;var be=_&&y.strValue==="autorotate",Le=y.pfValue!=null&&y.pfValue!==0;if(be||Le){var fe=be?Kg(o.rstyle,"labelAngle",n):y.pfValue,ce=Math.cos(fe),Ee=Math.sin(fe),Ce=(j+F)/2,ke=(q+W)/2;if(!_){switch(u.value){case"left":Ce=F;break;case"right":Ce=j;break}switch(l.value){case"top":ke=W;break;case"bottom":ke=q;break}}var Ie=function(it,H){return it=it-Ce,H=H-ke,{x:it*ce-H*Ee+Ce,y:it*Ee+H*ce+ke}},ve=Ie(j,q),we=Ie(j,W),xe=Ie(F,q),Fe=Ie(F,W);j=Math.min(ve.x,we.x,xe.x,Fe.x),F=Math.max(ve.x,we.x,xe.x,Fe.x),q=Math.min(ve.y,we.y,xe.y,Fe.y),W=Math.max(ve.y,we.y,xe.y,Fe.y)}var He=ue+"Rot",at=de[He]=de[He]||{};at.x1=j,at.y1=q,at.x2=F,at.y2=W,at.w=F-j,at.h=W-q,Zl(e,j,q,F,W),Zl(o.labelBounds.all,j,q,F,W)}return e}},Q4=function(e,t){if(!t.cy().headless()){var n=t.pstyle("outline-opacity").value,i=t.pstyle("outline-width").value;if(n>0&&i>0){var o=t.pstyle("outline-offset").value,a=t.pstyle("shape").value,s=i+o,u=(e.w+s*2)/e.w,l=(e.h+s*2)/e.h,c=0,f=0;["diamond","pentagon","round-triangle"].includes(a)?(u=(e.w+s*2.4)/e.w,f=-s/3.6):["concave-hexagon","rhomboid","right-rhomboid"].includes(a)?u=(e.w+s*2.4)/e.w:a==="star"?(u=(e.w+s*2.8)/e.w,l=(e.h+s*2.6)/e.h,f=-s/3.8):a==="triangle"?(u=(e.w+s*2.8)/e.w,l=(e.h+s*2.4)/e.h,f=-s/1.4):a==="vee"&&(u=(e.w+s*4.4)/e.w,l=(e.h+s*3.8)/e.h,f=-s*.5);var h=e.h*l-e.h,d=e.w*u-e.w;if(Fm(e,[Math.ceil(h/2),Math.ceil(d/2)]),c!=0||f!==0){var v=L5(e,c,f);MD(e,v)}}}},J4=function(e,t){var n=e._private.cy,i=n.styleEnabled(),o=n.headless(),a=Ws(),s=e._private,u=e.isNode(),l=e.isEdge(),c,f,h,d,v,g,_=s.rstyle,y=u&&i?e.pstyle("bounds-expansion").pfValue:[0],p=function(wt){return wt.pstyle("display").value!=="none"},m=!i||p(e)&&(!l||p(e.source())&&p(e.target()));if(m){var E=0,C=0;i&&t.includeOverlays&&(E=e.pstyle("overlay-opacity").value,E!==0&&(C=e.pstyle("overlay-padding").value));var P=0,T=0;i&&t.includeUnderlays&&(P=e.pstyle("underlay-opacity").value,P!==0&&(T=e.pstyle("underlay-padding").value));var R=Math.max(C,T),D=0,L=0;if(i&&(D=e.pstyle("width").pfValue,L=D/2),u&&t.includeNodes){var j=e.position();v=j.x,g=j.y;var F=e.outerWidth(),q=F/2,W=e.outerHeight(),Z=W/2;c=v-q,f=v+q,h=g-Z,d=g+Z,Zl(a,c,h,f,d),i&&t.includeOutlines&&Q4(a,e)}else if(l&&t.includeEdges)if(i&&!o){var Q=e.pstyle("curve-style").strValue;if(c=Math.min(_.srcX,_.midX,_.tgtX),f=Math.max(_.srcX,_.midX,_.tgtX),h=Math.min(_.srcY,_.midY,_.tgtY),d=Math.max(_.srcY,_.midY,_.tgtY),c-=L,f+=L,h-=L,d+=L,Zl(a,c,h,f,d),Q==="haystack"){var re=_.haystackPts;if(re&&re.length===2){if(c=re[0].x,h=re[0].y,f=re[1].x,d=re[1].y,c>f){var ee=c;c=f,f=ee}if(h>d){var ue=h;h=d,d=ue}Zl(a,c-L,h-L,f+L,d+L)}}else if(Q==="bezier"||Q==="unbundled-bezier"||Q.endsWith("segments")||Q.endsWith("taxi")){var de;switch(Q){case"bezier":case"unbundled-bezier":de=_.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":de=_.linePts;break}if(de!=null)for(var se=0;se<de.length;se++){var be=de[se];c=be.x-L,f=be.x+L,h=be.y-L,d=be.y+L,Zl(a,c,h,f,d)}}}else{var Le=e.source(),fe=Le.position(),ce=e.target(),Ee=ce.position();if(c=fe.x,f=Ee.x,h=fe.y,d=Ee.y,c>f){var Ce=c;c=f,f=Ce}if(h>d){var ke=h;h=d,d=ke}c-=L,f+=L,h-=L,d+=L,Zl(a,c,h,f,d)}if(i&&t.includeEdges&&l&&(ym(a,e,"mid-source"),ym(a,e,"mid-target"),ym(a,e,"source"),ym(a,e,"target")),i){var Ie=e.pstyle("ghost").value==="yes";if(Ie){var ve=e.pstyle("ghost-offset-x").pfValue,we=e.pstyle("ghost-offset-y").pfValue;Zl(a,a.x1+ve,a.y1+we,a.x2+ve,a.y2+we)}}var xe=s.bodyBounds=s.bodyBounds||{};YT(xe,a),Fm(xe,y),jm(xe,1),i&&(c=a.x1,f=a.x2,h=a.y1,d=a.y2,Zl(a,c-R,h-R,f+R,d+R));var Fe=s.overlayBounds=s.overlayBounds||{};YT(Fe,a),Fm(Fe,y),jm(Fe,1);var He=s.labelBounds=s.labelBounds||{};He.all!=null?M5(He.all):He.all=Ws(),i&&t.includeLabels&&(t.includeMainLabels&&W_(a,e,null),l&&(t.includeSourceLabels&&W_(a,e,"source"),t.includeTargetLabels&&W_(a,e,"target")))}return a.x1=el(a.x1),a.y1=el(a.y1),a.x2=el(a.x2),a.y2=el(a.y2),a.w=el(a.x2-a.x1),a.h=el(a.y2-a.y1),a.w>0&&a.h>0&&m&&(Fm(a,y),jm(a,1)),a},oM=function(e){var t=0,n=function(a){return(a?1:0)<<t++},i=0;return i+=n(e.incudeNodes),i+=n(e.includeEdges),i+=n(e.includeLabels),i+=n(e.includeMainLabels),i+=n(e.includeSourceLabels),i+=n(e.includeTargetLabels),i+=n(e.includeOverlays),i+=n(e.includeOutlines),i},aM=function(e){var t=function(s){return Math.round(s)};if(e.isEdge()){var n=e.source().position(),i=e.target().position();return qT([t(n.x),t(n.y),t(i.x),t(i.y)])}else{var o=e.position();return qT([t(o.x),t(o.y)])}},s2=function(e,t){var n=e._private,i,o=e.isEdge(),a=t==null?u2:oM(t),s=a===u2;if(n.bbCache==null?(i=J4(e,Ty),n.bbCache=i,n.bbCachePosKey=aM(e)):i=n.bbCache,!s){var u=e.isNode();i=Ws(),(t.includeNodes&&u||t.includeEdges&&!u)&&(t.includeOverlays?Dv(i,n.overlayBounds):Dv(i,n.bodyBounds)),t.includeLabels&&(t.includeMainLabels&&(!o||t.includeSourceLabels&&t.includeTargetLabels)?Dv(i,n.labelBounds.all):(t.includeMainLabels&&Dv(i,n.labelBounds.mainRot),t.includeSourceLabels&&Dv(i,n.labelBounds.sourceRot),t.includeTargetLabels&&Dv(i,n.labelBounds.targetRot))),i.w=i.x2-i.x1,i.h=i.y2-i.y1}return i},Ty={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},u2=oM(Ty),l2=Sa(Ty);_d.boundingBox=function(r){var e,t=r===void 0||r.useCache===void 0||r.useCache===!0,n=lg(function(c){var f=c._private;return f.bbCache==null||f.styleDirty||f.bbCachePosKey!==aM(c)},function(c){return c.id()});if(t&&this.length===1&&!n(this[0]))r===void 0?r=Ty:r=l2(r),e=s2(this[0],r);else{e=Ws(),r=r||Ty;var i=l2(r),o=this,a=o.cy(),s=a.styleEnabled();this.edges().forEach(n),this.nodes().forEach(n),s&&this.recalculateRenderedStyle(t),this.updateCompoundBounds(!t);for(var u=0;u<o.length;u++){var l=o[u];n(l)&&l.dirtyBoundingBoxCache(),Dv(e,s2(l,i))}}return e.x1=el(e.x1),e.y1=el(e.y1),e.x2=el(e.x2),e.y2=el(e.y2),e.w=el(e.x2-e.x1),e.h=el(e.y2-e.y1),e};_d.dirtyBoundingBoxCache=function(){for(var r=0;r<this.length;r++){var e=this[r]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};_d.boundingBoxAt=function(r){var e=this.nodes(),t=this.cy(),n=t.hasCompoundNodes(),i=t.collection();if(n&&(i=e.filter(function(l){return l.isParent()}),e=e.not(i)),wn(r)){var o=r;r=function(){return o}}var a=function(c,f){return c._private.bbAtOldPos=r(c,f)},s=function(c){return c._private.bbAtOldPos};t.startBatch(),e.forEach(a).silentPositions(r),n&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0));var u=D5(this.boundingBox({useCache:!1}));return e.silentPositions(s),n&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0)),t.endBatch(),u};ag.boundingbox=ag.bb=ag.boundingBox;ag.renderedBoundingbox=ag.renderedBoundingBox;var eF=_d,sy,Fy;sy=Fy={};var sM=function(e){e.uppercaseName=TT(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=TT(e.outerName),sy[e.name]=function(){var n=this[0],i=n._private,o=i.cy,a=o._private.styleEnabled;if(n)if(a){if(n.isParent())return n.updateCompoundBounds(),i[e.autoName]||0;var s=n.pstyle(e.name);switch(s.strValue){case"label":return n.recalculateRenderedStyle(),i.rstyle[e.labelName]||0;default:return s.pfValue}}else return 1},sy["outer"+e.uppercaseName]=function(){var n=this[0],i=n._private,o=i.cy,a=o._private.styleEnabled;if(n)if(a){var s=n[e.name](),u=n.pstyle("border-position").value,l;u==="center"?l=n.pstyle("border-width").pfValue:u==="outside"?l=2*n.pstyle("border-width").pfValue:l=0;var c=2*n.padding();return s+l+c}else return 1},sy["rendered"+e.uppercaseName]=function(){var n=this[0];if(n){var i=n[e.name]();return i*this.cy().zoom()}},sy["rendered"+e.uppercaseOuterName]=function(){var n=this[0];if(n){var i=n[e.outerName]();return i*this.cy().zoom()}}};sM({name:"width"});sM({name:"height"});Fy.padding=function(){var r=this[0],e=r._private;return r.isParent()?(r.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:r.pstyle("padding").pfValue):r.pstyle("padding").pfValue};Fy.paddedHeight=function(){var r=this[0];return r.height()+2*r.padding()};Fy.paddedWidth=function(){var r=this[0];return r.width()+2*r.padding()};var tF=Fy,rF=function(e,t){if(e.isEdge()&&e.takesUpSpace())return t(e)},nF=function(e,t){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy();return w0(t(e),n.zoom(),n.pan())}},iF=function(e,t){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy(),i=n.pan(),o=n.zoom();return t(e).map(function(a){return w0(a,o,i)})}},oF=function(e){return e.renderer().getControlPoints(e)},aF=function(e){return e.renderer().getSegmentPoints(e)},sF=function(e){return e.renderer().getSourceEndpoint(e)},uF=function(e){return e.renderer().getTargetEndpoint(e)},lF=function(e){return e.renderer().getEdgeMidpoint(e)},c2={controlPoints:{get:oF,mult:!0},segmentPoints:{get:aF,mult:!0},sourceEndpoint:{get:sF},targetEndpoint:{get:uF},midpoint:{get:lF}},cF=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},fF=Object.keys(c2).reduce(function(r,e){var t=c2[e],n=cF(e);return r[e]=function(){return rF(this,t.get)},t.mult?r[n]=function(){return iF(this,t.get)}:r[n]=function(){return nF(this,t.get)},r},{}),hF=xr({},Z4,eF,tF,fF);/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var uM=function(e,t){this.recycle(e,t)};function Zg(){return!1}function mm(){return!0}uM.prototype={instanceString:function(){return"event"},recycle:function(e,t){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Zg,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?mm:Zg):e!=null&&e.type?t=e:this.type=e,t!=null&&(this.originalEvent=t.originalEvent,this.type=t.type!=null?t.type:this.type,this.cy=t.cy,this.target=t.target,this.position=t.position,this.renderedPosition=t.renderedPosition,this.namespace=t.namespace,this.layout=t.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,i=this.cy.zoom(),o=this.cy.pan();this.renderedPosition={x:n.x*i+o.x,y:n.y*i+o.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=mm;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=mm;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=mm,this.stopPropagation()},isDefaultPrevented:Zg,isPropagationStopped:Zg,isImmediatePropagationStopped:Zg};var lM=/^([^.]+)(\.(?:[^.]+))?$/,dF=".*",cM={qualifierCompare:function(e,t){return e===t},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},f2=Object.keys(cM),vF={};function P0(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:vF,e=arguments.length>1?arguments[1]:void 0,t=0;t<f2.length;t++){var n=f2[t];this[n]=r[n]||cM[n]}this.context=e||this.context,this.listeners=[],this.emitting=0}var pd=P0.prototype,fM=function(e,t,n,i,o,a,s){Wi(i)&&(o=i,i=null),s&&(a==null?a=s:a=xr({},a,s));for(var u=di(n)?n:n.split(/\s+/),l=0;l<u.length;l++){var c=u[l];if(!cd(c)){var f=c.match(lM);if(f){var h=f[1],d=f[2]?f[2]:null,v=t(e,c,h,d,i,o,a);if(v===!1)break}}}},h2=function(e,t){return e.addEventFields(e.context,t),new uM(t.type,t)},pF=function(e,t,n){if(xj(n)){t(e,n);return}else if(wn(n)){t(e,h2(e,n));return}for(var i=di(n)?n:n.split(/\s+/),o=0;o<i.length;o++){var a=i[o];if(!cd(a)){var s=a.match(lM);if(s){var u=s[1],l=s[2]?s[2]:null,c=h2(e,{type:u,namespace:l,target:e.context});t(e,c)}}}};pd.on=pd.addListener=function(r,e,t,n,i){return fM(this,function(o,a,s,u,l,c,f){Wi(c)&&o.listeners.push({event:a,callback:c,type:s,namespace:u,qualifier:l,conf:f})},r,e,t,n,i),this};pd.one=function(r,e,t,n){return this.on(r,e,t,n,{one:!0})};pd.removeListener=pd.off=function(r,e,t,n){var i=this;this.emitting!==0&&(this.listeners=n5(this.listeners));for(var o=this.listeners,a=function(l){var c=o[l];fM(i,function(f,h,d,v,g,_){if((c.type===d||r==="*")&&(!v&&c.namespace!==".*"||c.namespace===v)&&(!g||f.qualifierCompare(c.qualifier,g))&&(!_||c.callback===_))return o.splice(l,1),!1},r,e,t,n)},s=o.length-1;s>=0;s--)a(s);return this};pd.removeAllListeners=function(){return this.removeListener("*")};pd.emit=pd.trigger=function(r,e,t){var n=this.listeners,i=n.length;return this.emitting++,di(e)||(e=[e]),pF(this,function(o,a){t!=null&&(n=[{event:a.event,type:a.type,namespace:a.namespace,callback:t}],i=n.length);for(var s=function(){var c=n[u];if(c.type===a.type&&(!c.namespace||c.namespace===a.namespace||c.namespace===dF)&&o.eventMatches(o.context,c,a)){var f=[a];e!=null&&o5(f,e),o.beforeEmit(o.context,c,a),c.conf&&c.conf.one&&(o.listeners=o.listeners.filter(function(v){return v!==c}));var h=o.callbackContext(o.context,c,a),d=c.callback.apply(h,f);o.afterEmit(o.context,c,a),d===!1&&(a.stopPropagation(),a.preventDefault())}},u=0;u<i;u++)s();o.bubble(o.context)&&!a.isPropagationStopped()&&o.parent(o.context).emit(a,e)},r),this.emitting--,this};var gF={qualifierCompare:function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},eventMatches:function(e,t,n){var i=t.qualifier;return i!=null?e!==n.target&&ky(n.target)&&i.matches(n.target):!0},addEventFields:function(e,t){t.cy=e.cy(),t.target=e},callbackContext:function(e,t,n){return t.qualifier!=null?n.target:e},beforeEmit:function(e,t){t.conf&&t.conf.once&&t.conf.onceCollection.removeListener(t.event,t.qualifier,t.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},bm=function(e){return yr(e)?new dd(e):e},hM={createEmitter:function(){for(var e=0;e<this.length;e++){var t=this[e],n=t._private;n.emitter||(n.emitter=new P0(gF,t))}return this},emitter:function(){return this._private.emitter},on:function(e,t,n){for(var i=bm(t),o=0;o<this.length;o++){var a=this[o];a.emitter().on(e,i,n)}return this},removeListener:function(e,t,n){for(var i=bm(t),o=0;o<this.length;o++){var a=this[o];a.emitter().removeListener(e,i,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var t=this[e];t.emitter().removeAllListeners()}return this},one:function(e,t,n){for(var i=bm(t),o=0;o<this.length;o++){var a=this[o];a.emitter().one(e,i,n)}return this},once:function(e,t,n){for(var i=bm(t),o=0;o<this.length;o++){var a=this[o];a.emitter().on(e,i,n,{once:!0,onceCollection:this})}},emit:function(e,t){for(var n=0;n<this.length;n++){var i=this[n];i.emitter().emit(e,t)}return this},emitAndNotify:function(e,t){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,t),this}};Fn.eventAliasesOn(hM);var dM={nodes:function(e){return this.filter(function(t){return t.isNode()}).filter(e)},edges:function(e){return this.filter(function(t){return t.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),t=this.spawn(),n=0;n<this.length;n++){var i=this[n];i.isNode()?e.push(i):t.push(i)}return{nodes:e,edges:t}},filter:function(e,t){if(e===void 0)return this;if(yr(e)||Ou(e))return new dd(e).filter(this);if(Wi(e)){for(var n=this.spawn(),i=this,o=0;o<i.length;o++){var a=i[o],s=t?e.apply(t,[a,o,i]):e(a,o,i);s&&n.push(a)}return n}return this.spawn()},not:function(e){if(e){yr(e)&&(e=this.filter(e));for(var t=this.spawn(),n=0;n<this.length;n++){var i=this[n],o=e.has(i);o||t.push(i)}return t}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(yr(e)){var t=e;return this.filter(t)}for(var n=this.spawn(),i=this,o=e,a=this.length<e.length,s=a?i:o,u=a?o:i,l=0;l<s.length;l++){var c=s[l];u.has(c)&&n.push(c)}return n},xor:function(e){var t=this._private.cy;yr(e)&&(e=t.$(e));var n=this.spawn(),i=this,o=e,a=function(u,l){for(var c=0;c<u.length;c++){var f=u[c],h=f._private.data.id,d=l.hasElementWithId(h);d||n.push(f)}};return a(i,o),a(o,i),n},diff:function(e){var t=this._private.cy;yr(e)&&(e=t.$(e));var n=this.spawn(),i=this.spawn(),o=this.spawn(),a=this,s=e,u=function(c,f,h){for(var d=0;d<c.length;d++){var v=c[d],g=v._private.data.id,_=f.hasElementWithId(g);_?o.merge(v):h.push(v)}};return u(a,s,n),u(s,a,i),{left:n,right:i,both:o}},add:function(e){var t=this._private.cy;if(!e)return this;if(yr(e)){var n=e;e=t.mutableElements().filter(n)}for(var i=this.spawnSelf(),o=0;o<e.length;o++){var a=e[o],s=!this.has(a);s&&i.push(a)}return i},merge:function(e){var t=this._private,n=t.cy;if(!e)return this;if(e&&yr(e)){var i=e;e=n.mutableElements().filter(i)}for(var o=t.map,a=0;a<e.length;a++){var s=e[a],u=s._private.data.id,l=!o.has(u);if(l){var c=this.length++;this[c]=s,o.set(u,{ele:s,index:c})}}return this},unmergeAt:function(e){var t=this[e],n=t.id(),i=this._private,o=i.map;this[e]=void 0,o.delete(n);var a=e===this.length-1;if(this.length>1&&!a){var s=this.length-1,u=this[s],l=u._private.data.id;this[s]=void 0,this[e]=u,o.set(l,{ele:u,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var t=this._private,n=e._private.data.id,i=t.map,o=i.get(n);if(!o)return this;var a=o.index;return this.unmergeAt(a),this},unmerge:function(e){var t=this._private.cy;if(!e)return this;if(e&&yr(e)){var n=e;e=t.mutableElements().filter(n)}for(var i=0;i<e.length;i++)this.unmergeOne(e[i]);return this},unmergeBy:function(e){for(var t=this.length-1;t>=0;t--){var n=this[t];e(n)&&this.unmergeAt(t)}return this},map:function(e,t){for(var n=[],i=this,o=0;o<i.length;o++){var a=i[o],s=t?e.apply(t,[a,o,i]):e(a,o,i);n.push(s)}return n},reduce:function(e,t){for(var n=t,i=this,o=0;o<i.length;o++)n=e(n,i[o],o,i);return n},max:function(e,t){for(var n=-1/0,i,o=this,a=0;a<o.length;a++){var s=o[a],u=t?e.apply(t,[s,a,o]):e(s,a,o);u>n&&(n=u,i=s)}return{value:n,ele:i}},min:function(e,t){for(var n=1/0,i,o=this,a=0;a<o.length;a++){var s=o[a],u=t?e.apply(t,[s,a,o]):e(s,a,o);u<n&&(n=u,i=s)}return{value:n,ele:i}}},Sn=dM;Sn.u=Sn["|"]=Sn["+"]=Sn.union=Sn.or=Sn.add;Sn["\\"]=Sn["!"]=Sn["-"]=Sn.difference=Sn.relativeComplement=Sn.subtract=Sn.not;Sn.n=Sn["&"]=Sn["."]=Sn.and=Sn.intersection=Sn.intersect;Sn["^"]=Sn["(+)"]=Sn["(-)"]=Sn.symmetricDifference=Sn.symdiff=Sn.xor;Sn.fnFilter=Sn.filterFn=Sn.stdFilter=Sn.filter;Sn.complement=Sn.abscomp=Sn.absoluteComplement;var yF={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},vM=function(e,t){var n=e.cy(),i=n.hasCompoundNodes();function o(c){var f=c.pstyle("z-compound-depth");return f.value==="auto"?i?c.zDepth():0:f.value==="bottom"?-1:f.value==="top"?_S:0}var a=o(e)-o(t);if(a!==0)return a;function s(c){var f=c.pstyle("z-index-compare");return f.value==="auto"&&c.isNode()?1:0}var u=s(e)-s(t);if(u!==0)return u;var l=e.pstyle("z-index").value-t.pstyle("z-index").value;return l!==0?l:e.poolIndex()-t.poolIndex()},a0={forEach:function(e,t){if(Wi(e))for(var n=this.length,i=0;i<n;i++){var o=this[i],a=t?e.apply(t,[o,i,this]):e(o,i,this);if(a===!1)break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(e,t){var n=[],i=this.length;t==null&&(t=i),e==null&&(e=0),e<0&&(e=i+e),t<0&&(t=i+t);for(var o=e;o>=0&&o<t&&o<i;o++)n.push(this[o]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!Wi(e))return this;var t=this.toArray().sort(e);return this.spawn(t)},sortByZIndex:function(){return this.sort(vM)},zDepth:function(){var e=this[0];if(e){var t=e._private,n=t.group;if(n==="nodes"){var i=t.data.parent?e.parents().size():0;return e.isParent()?i:_S-1}else{var o=t.source,a=t.target,s=o.zDepth(),u=a.zDepth();return Math.max(s,u,0)}}}};a0.each=a0.forEach;var mF=function(){var e="undefined",t=(typeof Symbol>"u"?"undefined":Fo(Symbol))!=e&&Fo(Symbol.iterator)!=e;t&&(a0[Symbol.iterator]=function(){var n=this,i={value:void 0,done:!1},o=0,a=this.length;return vD({next:function(){return o<a?i.value=n[o++]:(i.value=void 0,i.done=!0),i}},Symbol.iterator,function(){return this})})};mF();var bF=Sa({nodeDimensionsIncludeLabels:!1}),Um={layoutDimensions:function(e){e=bF(e);var t;if(!this.takesUpSpace())t={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();t={w:n.w,h:n.h}}else t={w:this.outerWidth(),h:this.outerHeight()};return(t.w===0||t.h===0)&&(t.w=t.h=1),t},layoutPositions:function(e,t,n){var i=this.nodes().filter(function(C){return!C.isParent()}),o=this.cy(),a=t.eles,s=function(P){return P.id()},u=lg(n,s);e.emit({type:"layoutstart",layout:e}),e.animations=[];var l=function(P,T,R){var D={x:T.x1+T.w/2,y:T.y1+T.h/2},L={x:(R.x-D.x)*P,y:(R.y-D.y)*P};return{x:D.x+L.x,y:D.y+L.y}},c=t.spacingFactor&&t.spacingFactor!==1,f=function(){if(!c)return null;for(var P=Ws(),T=0;T<i.length;T++){var R=i[T],D=u(R,T);N5(P,D.x,D.y)}return P},h=f(),d=lg(function(C,P){var T=u(C,P);if(c){var R=Math.abs(t.spacingFactor);T=l(R,h,T)}return t.transform!=null&&(T=t.transform(C,T)),T},s);if(t.animate){for(var v=0;v<i.length;v++){var g=i[v],_=d(g,v),y=t.animateFilter==null||t.animateFilter(g,v);if(y){var p=g.animation({position:_,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(p)}else g.position(_)}if(t.fit){var m=o.animation({fit:{boundingBox:a.boundingBoxAt(d),padding:t.padding},duration:t.animationDuration,easing:t.animationEasing});e.animations.push(m)}else if(t.zoom!==void 0&&t.pan!==void 0){var E=o.animation({zoom:t.zoom,pan:t.pan,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(E)}e.animations.forEach(function(C){return C.play()}),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),pg.all(e.animations.map(function(C){return C.promise()})).then(function(){e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e})})}else i.positions(d),t.fit&&o.fit(t.eles,t.padding),t.zoom!=null&&o.zoom(t.zoom),t.pan&&o.pan(t.pan),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var t=this.cy();return t.makeLayout(xr({},e,{eles:this}))}};Um.createLayout=Um.makeLayout=Um.layout;function pM(r,e,t){var n=t._private,i=n.styleCache=n.styleCache||[],o;return(o=i[r])!=null||(o=i[r]=e(t)),o}function A0(r,e){return r=Uv(r),function(n){return pM(r,e,n)}}function R0(r,e){r=Uv(r);var t=function(i){return e.call(i)};return function(){var i=this[0];if(i)return pM(r,t,i)}}var Oa={recalculateRenderedStyle:function(e){var t=this.cy(),n=t.renderer(),i=t.styleEnabled();return n&&i&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),t=function(o){return o._private.styleCache=null};if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(t)}else this.forEach(function(i){t(i),i.connectedEdges().forEach(t)});return this},updateStyle:function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t.batching()){var n=t._private.batchStyleEles;return n.merge(this),this}var i=t.hasCompoundNodes(),o=this;e=!!(e||e===void 0),i&&(o=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var a=o;return e?a.emitAndNotify("style"):a.emit("style"),o.forEach(function(s){return s._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var t=0;t<this.length;t++){var n=this[t];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],i=n.cy();if(i.styleEnabled()&&n){n._private.styleDirty&&(n._private.styleDirty=!1,i.style().apply(n));var o=n._private.style[e];return o??(t?i.style().getDefaultProperty(e):null)}},numericStyle:function(e){var t=this[0];if(t.cy().styleEnabled()&&t){var n=t.pstyle(e);return n.pfValue!==void 0?n.pfValue:n.value}},numericStyleUnits:function(e){var t=this[0];if(t.cy().styleEnabled()&&t)return t.pstyle(e).units},renderedStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=this[0];if(n)return t.style().getRenderedStyle(n,e)},style:function(e,t){var n=this.cy();if(!n.styleEnabled())return this;var i=!1,o=n.style();if(wn(e)){var a=e;o.applyBypass(this,a,i),this.emitAndNotify("style")}else if(yr(e))if(t===void 0){var s=this[0];return s?o.getStylePropertyValue(s,e):void 0}else o.applyBypass(this,e,t,i),this.emitAndNotify("style");else if(e===void 0){var u=this[0];return u?o.getRawStyle(u):void 0}return this},removeStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=!1,i=t.style(),o=this;if(e===void 0)for(var a=0;a<o.length;a++){var s=o[a];i.removeAllBypasses(s,n)}else{e=e.split(/\s+/);for(var u=0;u<o.length;u++){var l=o[u];i.removeBypasses(l,e,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),n=this[0];if(n){var i=n._private,o=n.pstyle("opacity").value;if(!t)return o;var a=i.data.parent?n.parents():null;if(a)for(var s=0;s<a.length;s++){var u=a[s],l=u.pstyle("opacity").value;o=l*o}return o}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0],n=t.cy().hasCompoundNodes();if(t)return n?t.effectiveOpacity()===0:t.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0];return!!t._private.backgrounding}};function H_(r,e){var t=r._private,n=t.data.parent?r.parents():null;if(n)for(var i=0;i<n.length;i++){var o=n[i];if(!e(o))return!1}return!0}function kS(r){var e=r.ok,t=r.edgeOkViaNode||r.ok,n=r.parentOk||r.ok;return function(){var i=this.cy();if(!i.styleEnabled())return!0;var o=this[0],a=i.hasCompoundNodes();if(o){var s=o._private;if(!e(o))return!1;if(o.isNode())return!a||H_(o,n);var u=s.source,l=s.target;return t(u)&&(!a||H_(u,t))&&(u===l||t(l)&&(!a||H_(l,t)))}}}var gg=A0("eleTakesUpSpace",function(r){return r.pstyle("display").value==="element"&&r.width()!==0&&(r.isNode()?r.height()!==0:!0)});Oa.takesUpSpace=R0("takesUpSpace",kS({ok:gg}));var _F=A0("eleInteractive",function(r){return r.pstyle("events").value==="yes"&&r.pstyle("visibility").value==="visible"&&gg(r)}),wF=A0("parentInteractive",function(r){return r.pstyle("visibility").value==="visible"&&gg(r)});Oa.interactive=R0("interactive",kS({ok:_F,parentOk:wF,edgeOkViaNode:gg}));Oa.noninteractive=function(){var r=this[0];if(r)return!r.interactive()};var EF=A0("eleVisible",function(r){return r.pstyle("visibility").value==="visible"&&r.pstyle("opacity").pfValue!==0&&gg(r)}),OF=gg;Oa.visible=R0("visible",kS({ok:EF,edgeOkViaNode:OF}));Oa.hidden=function(){var r=this[0];if(r)return!r.visible()};Oa.isBundledBezier=R0("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});Oa.bypass=Oa.css=Oa.style;Oa.renderedCss=Oa.renderedStyle;Oa.removeBypass=Oa.removeCss=Oa.removeStyle;Oa.pstyle=Oa.parsedStyle;var ld={};function d2(r){return function(){var e=arguments,t=[];if(e.length===2){var n=e[0],i=e[1];this.on(r.event,n,i)}else if(e.length===1&&Wi(e[0])){var o=e[0];this.on(r.event,o)}else if(e.length===0||e.length===1&&di(e[0])){for(var a=e.length===1?e[0]:null,s=0;s<this.length;s++){var u=this[s],l=!r.ableField||u._private[r.ableField],c=u._private[r.field]!=r.value;if(r.overrideAble){var f=r.overrideAble(u);if(f!==void 0&&(l=f,!f))return this}l&&(u._private[r.field]=r.value,c&&t.push(u))}var h=this.spawn(t);h.updateStyle(),h.emit(r.event),a&&h.emit(a)}return this}}function yg(r){ld[r.field]=function(){var e=this[0];if(e){if(r.overrideField){var t=r.overrideField(e);if(t!==void 0)return t}return e._private[r.field]}},ld[r.on]=d2({event:r.on,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:!0}),ld[r.off]=d2({event:r.off,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:!1})}yg({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});yg({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});yg({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});yg({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});ld.deselect=ld.unselect;ld.grabbed=function(){var r=this[0];if(r)return r._private.grabbed};yg({field:"active",on:"activate",off:"unactivate"});yg({field:"pannable",on:"panify",off:"unpanify"});ld.inactive=function(){var r=this[0];if(r)return!r._private.active};var Ga={},v2=function(e){return function(n){for(var i=this,o=[],a=0;a<i.length;a++){var s=i[a];if(s.isNode()){for(var u=!1,l=s.connectedEdges(),c=0;c<l.length;c++){var f=l[c],h=f.source(),d=f.target();if(e.noIncomingEdges&&d===s&&h!==s||e.noOutgoingEdges&&h===s&&d!==s){u=!0;break}}u||o.push(s)}}return this.spawn(o,!0).filter(n)}},p2=function(e){return function(t){for(var n=this,i=[],o=0;o<n.length;o++){var a=n[o];if(a.isNode())for(var s=a.connectedEdges(),u=0;u<s.length;u++){var l=s[u],c=l.source(),f=l.target();e.outgoing&&c===a?(i.push(l),i.push(f)):e.incoming&&f===a&&(i.push(l),i.push(c))}}return this.spawn(i,!0).filter(t)}},g2=function(e){return function(t){for(var n=this,i=[],o={};;){var a=e.outgoing?n.outgoers():n.incomers();if(a.length===0)break;for(var s=!1,u=0;u<a.length;u++){var l=a[u],c=l.id();o[c]||(o[c]=!0,i.push(l),s=!0)}if(!s)break;n=a}return this.spawn(i,!0).filter(t)}};Ga.clearTraversalCache=function(){for(var r=0;r<this.length;r++)this[r]._private.traversalCache=null};xr(Ga,{roots:v2({noIncomingEdges:!0}),leaves:v2({noOutgoingEdges:!0}),outgoers:tl(p2({outgoing:!0}),"outgoers"),successors:g2({outgoing:!0}),incomers:tl(p2({incoming:!0}),"incomers"),predecessors:g2({})});xr(Ga,{neighborhood:tl(function(r){for(var e=[],t=this.nodes(),n=0;n<t.length;n++)for(var i=t[n],o=i.connectedEdges(),a=0;a<o.length;a++){var s=o[a],u=s.source(),l=s.target(),c=i===u?l:u;c.length>0&&e.push(c[0]),e.push(s[0])}return this.spawn(e,!0).filter(r)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});Ga.neighbourhood=Ga.neighborhood;Ga.closedNeighbourhood=Ga.closedNeighborhood;Ga.openNeighbourhood=Ga.openNeighborhood;xr(Ga,{source:tl(function(e){var t=this[0],n;return t&&(n=t._private.source||t.cy().collection()),n&&e?n.filter(e):n},"source"),target:tl(function(e){var t=this[0],n;return t&&(n=t._private.target||t.cy().collection()),n&&e?n.filter(e):n},"target"),sources:y2({attr:"source"}),targets:y2({attr:"target"})});function y2(r){return function(t){for(var n=[],i=0;i<this.length;i++){var o=this[i],a=o._private[r.attr];a&&n.push(a)}return this.spawn(n,!0).filter(t)}}xr(Ga,{edgesWith:tl(m2(),"edgesWith"),edgesTo:tl(m2({thisIsSrc:!0}),"edgesTo")});function m2(r){return function(t){var n=[],i=this._private.cy,o=r||{};yr(t)&&(t=i.$(t));for(var a=0;a<t.length;a++)for(var s=t[a]._private.edges,u=0;u<s.length;u++){var l=s[u],c=l._private.data,f=this.hasElementWithId(c.source)&&t.hasElementWithId(c.target),h=t.hasElementWithId(c.source)&&this.hasElementWithId(c.target),d=f||h;d&&((o.thisIsSrc||o.thisIsTgt)&&(o.thisIsSrc&&!f||o.thisIsTgt&&!h)||n.push(l))}return this.spawn(n,!0)}}xr(Ga,{connectedEdges:tl(function(r){for(var e=[],t=this,n=0;n<t.length;n++){var i=t[n];if(i.isNode())for(var o=i._private.edges,a=0;a<o.length;a++){var s=o[a];e.push(s)}}return this.spawn(e,!0).filter(r)},"connectedEdges"),connectedNodes:tl(function(r){for(var e=[],t=this,n=0;n<t.length;n++){var i=t[n];i.isEdge()&&(e.push(i.source()[0]),e.push(i.target()[0]))}return this.spawn(e,!0).filter(r)},"connectedNodes"),parallelEdges:tl(b2(),"parallelEdges"),codirectedEdges:tl(b2({codirected:!0}),"codirectedEdges")});function b2(r){var e={codirected:!1};return r=xr({},e,r),function(n){for(var i=[],o=this.edges(),a=r,s=0;s<o.length;s++)for(var u=o[s],l=u._private,c=l.source,f=c._private.data.id,h=l.data.target,d=c._private.edges,v=0;v<d.length;v++){var g=d[v],_=g._private.data,y=_.target,p=_.source,m=y===h&&p===f,E=f===y&&h===p;(a.codirected&&m||!a.codirected&&(m||E))&&i.push(g)}return this.spawn(i,!0).filter(n)}}xr(Ga,{components:function(e){var t=this,n=t.cy(),i=n.collection(),o=e==null?t.nodes():e.nodes(),a=[];e!=null&&o.empty()&&(o=e.sources());var s=function(c,f){i.merge(c),o.unmerge(c),f.merge(c)};if(o.empty())return t.spawn();var u=function(){var c=n.collection();a.push(c);var f=o[0];s(f,c),t.bfs({directed:!1,roots:f,visit:function(d){return s(d,c)}}),c.forEach(function(h){h.connectedEdges().forEach(function(d){t.has(d)&&c.has(d.source())&&c.has(d.target())&&c.merge(d)})})};do u();while(o.length>0);return a},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});Ga.componentsOf=Ga.components;var xa=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){Vi("A collection must have a reference to the core");return}var o=new rh,a=!1;if(!t)t=[];else if(t.length>0&&wn(t[0])&&!ky(t[0])){a=!0;for(var s=[],u=new vg,l=0,c=t.length;l<c;l++){var f=t[l];f.data==null&&(f.data={});var h=f.data;if(h.id==null)h.id=ID();else if(e.hasElementWithId(h.id)||u.has(h.id))continue;var d=new _0(e,f,!1);s.push(d),u.add(h.id)}t=s}this.length=0;for(var v=0,g=t.length;v<g;v++){var _=t[v][0];if(_!=null){var y=_._private.data.id;(!n||!o.has(y))&&(n&&o.set(y,{index:this.length,ele:_}),this[this.length]=_,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(p){this.lazyMap=p},rebuildMap:function(){for(var m=this.lazyMap=new rh,E=this.eles,C=0;C<E.length;C++){var P=E[C];m.set(P.id(),{index:C,ele:P})}}},n&&(this._private.map=o),a&&!i&&this.restore()},wi=_0.prototype=xa.prototype=Object.create(Array.prototype);wi.instanceString=function(){return"collection"};wi.spawn=function(r,e){return new xa(this.cy(),r,e)};wi.spawnSelf=function(){return this.spawn(this)};wi.cy=function(){return this._private.cy};wi.renderer=function(){return this._private.cy.renderer()};wi.element=function(){return this[0]};wi.collection=function(){return yD(this)?this:new xa(this._private.cy,[this])};wi.unique=function(){return new xa(this._private.cy,this,!0)};wi.hasElementWithId=function(r){return r=""+r,this._private.map.has(r)};wi.getElementById=function(r){r=""+r;var e=this._private.cy,t=this._private.map.get(r);return t?t.ele:new xa(e)};wi.$id=wi.getElementById;wi.poolIndex=function(){var r=this._private.cy,e=r._private.elements,t=this[0]._private.data.id;return e._private.map.get(t).index};wi.indexOf=function(r){var e=r[0]._private.data.id;return this._private.map.get(e).index};wi.indexOfId=function(r){return r=""+r,this._private.map.get(r).index};wi.json=function(r){var e=this.element(),t=this.cy();if(e==null&&r)return this;if(e!=null){var n=e._private;if(wn(r)){if(t.startBatch(),r.data){e.data(r.data);var i=n.data;if(e.isEdge()){var o=!1,a={},s=r.data.source,u=r.data.target;s!=null&&s!=i.source&&(a.source=""+s,o=!0),u!=null&&u!=i.target&&(a.target=""+u,o=!0),o&&(e=e.move(a))}else{var l="parent"in r.data,c=r.data.parent;l&&(c!=null||i.parent!=null)&&c!=i.parent&&(c===void 0&&(c=null),c!=null&&(c=""+c),e=e.move({parent:c}))}}r.position&&e.position(r.position);var f=function(g,_,y){var p=r[g];p!=null&&p!==n[g]&&(p?e[_]():e[y]())};return f("removed","remove","restore"),f("selected","select","unselect"),f("selectable","selectify","unselectify"),f("locked","lock","unlock"),f("grabbable","grabify","ungrabify"),f("pannable","panify","unpanify"),r.classes!=null&&e.classes(r.classes),t.endBatch(),this}else if(r===void 0){var h={data:$c(n.data),position:$c(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};h.classes="";var d=0;return n.classes.forEach(function(v){return h.classes+=d++===0?v:" "+v}),h}}};wi.jsons=function(){for(var r=[],e=0;e<this.length;e++){var t=this[e],n=t.json();r.push(n)}return r};wi.clone=function(){for(var r=this.cy(),e=[],t=0;t<this.length;t++){var n=this[t],i=n.json(),o=new _0(r,i,!1);e.push(o)}return new xa(r,e)};wi.copy=wi.clone;wi.restore=function(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this,n=t.cy(),i=n._private,o=[],a=[],s,u=0,l=t.length;u<l;u++){var c=t[u];e&&!c.removed()||(c.isNode()?o.push(c):a.push(c))}s=o.concat(a);var f,h=function(){s.splice(f,1),f--};for(f=0;f<s.length;f++){var d=s[f],v=d._private,g=v.data;if(d.clearTraversalCache(),!(!e&&!v.removed)){if(g.id===void 0)g.id=ID();else if(zt(g.id))g.id=""+g.id;else if(cd(g.id)||!yr(g.id)){Vi("Can not create element with invalid string ID `"+g.id+"`"),h();continue}else if(n.hasElementWithId(g.id)){Vi("Can not create second element with ID `"+g.id+"`"),h();continue}}var _=g.id;if(d.isNode()){var y=v.position;y.x==null&&(y.x=0),y.y==null&&(y.y=0)}if(d.isEdge()){for(var p=d,m=["source","target"],E=m.length,C=!1,P=0;P<E;P++){var T=m[P],R=g[T];zt(R)&&(R=g[T]=""+g[T]),R==null||R===""?(Vi("Can not create edge `"+_+"` with unspecified "+T),C=!0):n.hasElementWithId(R)||(Vi("Can not create edge `"+_+"` with nonexistant "+T+" `"+R+"`"),C=!0)}if(C){h();continue}var D=n.getElementById(g.source),L=n.getElementById(g.target);D.same(L)?D._private.edges.push(p):(D._private.edges.push(p),L._private.edges.push(p)),p._private.source=D,p._private.target=L}v.map=new rh,v.map.set(_,{ele:d,index:0}),v.removed=!1,e&&n.addToPool(d)}for(var j=0;j<o.length;j++){var F=o[j],q=F._private.data;zt(q.parent)&&(q.parent=""+q.parent);var W=q.parent,Z=W!=null;if(Z||F._private.parent){var Q=F._private.parent?n.collection().merge(F._private.parent):n.getElementById(W);if(Q.empty())q.parent=void 0;else if(Q[0].removed())Bn("Node added with missing parent, reference to parent removed"),q.parent=void 0,F._private.parent=null;else{for(var re=!1,ee=Q;!ee.empty();){if(F.same(ee)){re=!0,q.parent=void 0;break}ee=ee.parent()}re||(Q[0]._private.children.push(F),F._private.parent=Q[0],i.hasCompoundNodes=!0)}}}if(s.length>0){for(var ue=s.length===t.length?t:new xa(n,s),de=0;de<ue.length;de++){var se=ue[de];se.isNode()||(se.parallelEdges().clearTraversalCache(),se.source().clearTraversalCache(),se.target().clearTraversalCache())}var be;i.hasCompoundNodes?be=n.collection().merge(ue).merge(ue.connectedNodes()).merge(ue.parent()):be=ue,be.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(r),r?ue.emitAndNotify("add"):e&&ue.emit("add")}return t};wi.removed=function(){var r=this[0];return r&&r._private.removed};wi.inside=function(){var r=this[0];return r&&!r._private.removed};wi.remove=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this,n=[],i={},o=t._private.cy;function a(W){for(var Z=W._private.edges,Q=0;Q<Z.length;Q++)u(Z[Q])}function s(W){for(var Z=W._private.children,Q=0;Q<Z.length;Q++)u(Z[Q])}function u(W){var Z=i[W.id()];e&&W.removed()||Z||(i[W.id()]=!0,W.isNode()?(n.push(W),a(W),s(W)):n.unshift(W))}for(var l=0,c=t.length;l<c;l++){var f=t[l];u(f)}function h(W,Z){var Q=W._private.edges;fd(Q,Z),W.clearTraversalCache()}function d(W){W.clearTraversalCache()}var v=[];v.ids={};function g(W,Z){Z=Z[0],W=W[0];var Q=W._private.children,re=W.id();fd(Q,Z),Z._private.parent=null,v.ids[re]||(v.ids[re]=!0,v.push(W))}t.dirtyCompoundBoundsCache(),e&&o.removeFromPool(n);for(var _=0;_<n.length;_++){var y=n[_];if(y.isEdge()){var p=y.source()[0],m=y.target()[0];h(p,y),h(m,y);for(var E=y.parallelEdges(),C=0;C<E.length;C++){var P=E[C];d(P),P.isBundledBezier()&&P.dirtyBoundingBoxCache()}}else{var T=y.parent();T.length!==0&&g(T,y)}e&&(y._private.removed=!0)}var R=o._private.elements;o._private.hasCompoundNodes=!1;for(var D=0;D<R.length;D++){var L=R[D];if(L.isParent()){o._private.hasCompoundNodes=!0;break}}var j=new xa(this.cy(),n);j.size()>0&&(r?j.emitAndNotify("remove"):e&&j.emit("remove"));for(var F=0;F<v.length;F++){var q=v[F];(!e||!q.removed())&&q.updateStyle()}return j};wi.move=function(r){var e=this._private.cy,t=this,n=!1,i=!1,o=function(v){return v==null?v:""+v};if(r.source!==void 0||r.target!==void 0){var a=o(r.source),s=o(r.target),u=a!=null&&e.hasElementWithId(a),l=s!=null&&e.hasElementWithId(s);(u||l)&&(e.batch(function(){t.remove(n,i),t.emitAndNotify("moveout");for(var d=0;d<t.length;d++){var v=t[d],g=v._private.data;v.isEdge()&&(u&&(g.source=a),l&&(g.target=s))}t.restore(n,i)}),t.emitAndNotify("move"))}else if(r.parent!==void 0){var c=o(r.parent),f=c===null||e.hasElementWithId(c);if(f){var h=c===null?void 0:c;e.batch(function(){var d=t.remove(n,i);d.emitAndNotify("moveout");for(var v=0;v<t.length;v++){var g=t[v],_=g._private.data;g.isNode()&&(_.parent=h)}d.restore(n,i)}),t.emitAndNotify("move")}}return this};[zD,M4,Bm,ud,hg,K4,C0,hF,hM,dM,yF,a0,Um,Oa,ld,Ga].forEach(function(r){xr(wi,r)});var xF={add:function(e){var t,n=this;if(Ou(e)){var i=e;if(i._private.cy===n)t=i.restore();else{for(var o=[],a=0;a<i.length;a++){var s=i[a];o.push(s.json())}t=new xa(n,o)}}else if(di(e)){var u=e;t=new xa(n,u)}else if(wn(e)&&(di(e.nodes)||di(e.edges))){for(var l=e,c=[],f=["nodes","edges"],h=0,d=f.length;h<d;h++){var v=f[h],g=l[v];if(di(g))for(var _=0,y=g.length;_<y;_++){var p=xr({group:v},g[_]);c.push(p)}}t=new xa(n,c)}else{var m=e;t=new _0(n,m).collection()}return t},remove:function(e){if(!Ou(e)){if(yr(e)){var t=e;e=this.$(t)}}return e.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function SF(r,e,t,n){var i=4,o=.001,a=1e-7,s=10,u=11,l=1/(u-1),c=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var f=0;f<4;++f)if(typeof arguments[f]!="number"||isNaN(arguments[f])||!isFinite(arguments[f]))return!1;r=Math.min(r,1),t=Math.min(t,1),r=Math.max(r,0),t=Math.max(t,0);var h=c?new Float32Array(u):new Array(u);function d(L,j){return 1-3*j+3*L}function v(L,j){return 3*j-6*L}function g(L){return 3*L}function _(L,j,F){return((d(j,F)*L+v(j,F))*L+g(j))*L}function y(L,j,F){return 3*d(j,F)*L*L+2*v(j,F)*L+g(j)}function p(L,j){for(var F=0;F<i;++F){var q=y(j,r,t);if(q===0)return j;var W=_(j,r,t)-L;j-=W/q}return j}function m(){for(var L=0;L<u;++L)h[L]=_(L*l,r,t)}function E(L,j,F){var q,W,Z=0;do W=j+(F-j)/2,q=_(W,r,t)-L,q>0?F=W:j=W;while(Math.abs(q)>a&&++Z<s);return W}function C(L){for(var j=0,F=1,q=u-1;F!==q&&h[F]<=L;++F)j+=l;--F;var W=(L-h[F])/(h[F+1]-h[F]),Z=j+W*l,Q=y(Z,r,t);return Q>=o?p(L,Z):Q===0?Z:E(L,j,j+l)}var P=!1;function T(){P=!0,(r!==e||t!==n)&&m()}var R=function(j){return P||T(),r===e&&t===n?j:j===0?0:j===1?1:_(C(j),e,n)};R.getControlPoints=function(){return[{x:r,y:e},{x:t,y:n}]};var D="generateBezier("+[r,e,t,n]+")";return R.toString=function(){return D},R}/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var TF=function(){function r(n){return-n.tension*n.x-n.friction*n.v}function e(n,i,o){var a={x:n.x+o.dx*i,v:n.v+o.dv*i,tension:n.tension,friction:n.friction};return{dx:a.v,dv:r(a)}}function t(n,i){var o={dx:n.v,dv:r(n)},a=e(n,i*.5,o),s=e(n,i*.5,a),u=e(n,i,s),l=1/6*(o.dx+2*(a.dx+s.dx)+u.dx),c=1/6*(o.dv+2*(a.dv+s.dv)+u.dv);return n.x=n.x+l*i,n.v=n.v+c*i,n}return function n(i,o,a){var s={x:-1,v:0,tension:null,friction:null},u=[0],l=0,c=1/1e4,f=16/1e3,h,d,v;for(i=parseFloat(i)||500,o=parseFloat(o)||20,a=a||null,s.tension=i,s.friction=o,h=a!==null,h?(l=n(i,o),d=l/a*f):d=f;v=t(v||s,d),u.push(1+v.x),l+=16,Math.abs(v.x)>c&&Math.abs(v.v)>c;);return h?function(g){return u[g*(u.length-1)|0]}:l}}(),_i=function(e,t,n,i){var o=SF(e,t,n,i);return function(a,s,u){return a+(s-a)*o(u)}},qm={linear:function(e,t,n){return e+(t-e)*n},ease:_i(.25,.1,.25,1),"ease-in":_i(.42,0,1,1),"ease-out":_i(0,0,.58,1),"ease-in-out":_i(.42,0,.58,1),"ease-in-sine":_i(.47,0,.745,.715),"ease-out-sine":_i(.39,.575,.565,1),"ease-in-out-sine":_i(.445,.05,.55,.95),"ease-in-quad":_i(.55,.085,.68,.53),"ease-out-quad":_i(.25,.46,.45,.94),"ease-in-out-quad":_i(.455,.03,.515,.955),"ease-in-cubic":_i(.55,.055,.675,.19),"ease-out-cubic":_i(.215,.61,.355,1),"ease-in-out-cubic":_i(.645,.045,.355,1),"ease-in-quart":_i(.895,.03,.685,.22),"ease-out-quart":_i(.165,.84,.44,1),"ease-in-out-quart":_i(.77,0,.175,1),"ease-in-quint":_i(.755,.05,.855,.06),"ease-out-quint":_i(.23,1,.32,1),"ease-in-out-quint":_i(.86,0,.07,1),"ease-in-expo":_i(.95,.05,.795,.035),"ease-out-expo":_i(.19,1,.22,1),"ease-in-out-expo":_i(1,0,0,1),"ease-in-circ":_i(.6,.04,.98,.335),"ease-out-circ":_i(.075,.82,.165,1),"ease-in-out-circ":_i(.785,.135,.15,.86),spring:function(e,t,n){if(n===0)return qm.linear;var i=TF(e,t,n);return function(o,a,s){return o+(a-o)*i(s)}},"cubic-bezier":_i};function _2(r,e,t,n,i){if(n===1||e===t)return t;var o=i(e,t,n);return r==null||((r.roundValue||r.color)&&(o=Math.round(o)),r.min!==void 0&&(o=Math.max(o,r.min)),r.max!==void 0&&(o=Math.min(o,r.max))),o}function w2(r,e){return r.pfValue!=null||r.value!=null?r.pfValue!=null&&(e==null||e.type.units!=="%")?r.pfValue:r.value:r}function zp(r,e,t,n,i){var o=i!=null?i.type:null;t<0?t=0:t>1&&(t=1);var a=w2(r,i),s=w2(e,i);if(zt(a)&&zt(s))return _2(o,a,s,t,n);if(di(a)&&di(s)){for(var u=[],l=0;l<s.length;l++){var c=a[l],f=s[l];if(c!=null&&f!=null){var h=_2(o,c,f,t,n);u.push(h)}else u.push(f)}return u}}function CF(r,e,t,n){var i=!n,o=r._private,a=e._private,s=a.easing,u=a.startTime,l=n?r:r.cy(),c=l.style();if(!a.easingImpl)if(s==null)a.easingImpl=qm.linear;else{var f;if(yr(s)){var h=c.parse("transition-timing-function",s);f=h.value}else f=s;var d,v;yr(f)?(d=f,v=[]):(d=f[1],v=f.slice(2).map(function(ue){return+ue})),v.length>0?(d==="spring"&&v.push(a.duration),a.easingImpl=qm[d].apply(null,v)):a.easingImpl=qm[d]}var g=a.easingImpl,_;if(a.duration===0?_=1:_=(t-u)/a.duration,a.applying&&(_=a.progress),_<0?_=0:_>1&&(_=1),a.delay==null){var y=a.startPosition,p=a.position;if(p&&i&&!r.locked()){var m={};Qg(y.x,p.x)&&(m.x=zp(y.x,p.x,_,g)),Qg(y.y,p.y)&&(m.y=zp(y.y,p.y,_,g)),r.position(m)}var E=a.startPan,C=a.pan,P=o.pan,T=C!=null&&n;T&&(Qg(E.x,C.x)&&(P.x=zp(E.x,C.x,_,g)),Qg(E.y,C.y)&&(P.y=zp(E.y,C.y,_,g)),r.emit("pan"));var R=a.startZoom,D=a.zoom,L=D!=null&&n;L&&(Qg(R,D)&&(o.zoom=Oy(o.minZoom,zp(R,D,_,g),o.maxZoom)),r.emit("zoom")),(T||L)&&r.emit("viewport");var j=a.style;if(j&&j.length>0&&i){for(var F=0;F<j.length;F++){var q=j[F],W=q.name,Z=q,Q=a.startStyle[W],re=c.properties[Q.name],ee=zp(Q,Z,_,g,re);c.overrideBypass(r,W,ee)}r.emit("style")}}return a.progress=_,_}function Qg(r,e){return r==null||e==null?!1:zt(r)&&zt(e)?!0:!!(r&&e)}function PF(r,e,t,n){var i=e._private;i.started=!0,i.startTime=t-i.progress*i.duration}function E2(r,e){var t=e._private.aniEles,n=[];function i(c,f){var h=c._private,d=h.animation.current,v=h.animation.queue,g=!1;if(d.length===0){var _=v.shift();_&&d.push(_)}for(var y=function(P){for(var T=P.length-1;T>=0;T--){var R=P[T];R()}P.splice(0,P.length)},p=d.length-1;p>=0;p--){var m=d[p],E=m._private;if(E.stopped){d.splice(p,1),E.hooked=!1,E.playing=!1,E.started=!1,y(E.frames);continue}!E.playing&&!E.applying||(E.playing&&E.applying&&(E.applying=!1),E.started||PF(c,m,r),CF(c,m,r,f),E.applying&&(E.applying=!1),y(E.frames),E.step!=null&&E.step(r),m.completed()&&(d.splice(p,1),E.hooked=!1,E.playing=!1,E.started=!1,y(E.completes)),g=!0)}return!f&&d.length===0&&v.length===0&&n.push(c),g}for(var o=!1,a=0;a<t.length;a++){var s=t[a],u=i(s);o=o||u}var l=i(e,!0);(o||l)&&(t.length>0?e.notify("draw",t):e.notify("draw")),t.unmerge(n),e.emit("step")}var AF={animate:Fn.animate(),animation:Fn.animation(),animated:Fn.animated(),clearQueue:Fn.clearQueue(),delay:Fn.delay(),delayAnimation:Fn.delayAnimation(),stop:Fn.stop(),addToAnimationPool:function(e){var t=this;t.styleEnabled()&&t._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function t(){e._private.animationsRunning&&t0(function(o){E2(o,e),t()})}var n=e.renderer();n&&n.beforeRender?n.beforeRender(function(o,a){E2(a,e)},n.beforeRenderPriorities.animations):t()}},RF={qualifierCompare:function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},eventMatches:function(e,t,n){var i=t.qualifier;return i!=null?e!==n.target&&ky(n.target)&&i.matches(n.target):!0},addEventFields:function(e,t){t.cy=e,t.target=e},callbackContext:function(e,t,n){return t.qualifier!=null?n.target:e}},_m=function(e){return yr(e)?new dd(e):e},gM={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new P0(RF,this)),this},emitter:function(){return this._private.emitter},on:function(e,t,n){return this.emitter().on(e,_m(t),n),this},removeListener:function(e,t,n){return this.emitter().removeListener(e,_m(t),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,t,n){return this.emitter().one(e,_m(t),n),this},once:function(e,t,n){return this.emitter().one(e,_m(t),n),this},emit:function(e,t){return this.emitter().emit(e,t),this},emitAndNotify:function(e,t){return this.emit(e),this.notify(e,t),this}};Fn.eventAliasesOn(gM);var Zx={png:function(e){var t=this._private.renderer;return e=e||{},t.png(e)},jpg:function(e){var t=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",t.jpg(e)}};Zx.jpeg=Zx.jpg;var zm={layout:function(e){var t=this;if(e==null){Vi("Layout options must be specified to make a layout");return}if(e.name==null){Vi("A `name` must be specified to make a layout");return}var n=e.name,i=t.extension("layout",n);if(i==null){Vi("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var o;yr(e.eles)?o=t.$(e.eles):o=e.eles!=null?e.eles:t.$();var a=new i(xr({},e,{cy:t,eles:o}));return a}};zm.createLayout=zm.makeLayout=zm.layout;var IF={notify:function(e,t){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var i=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();t!=null&&i.merge(t);return}if(n.notificationsEnabled){var o=this.renderer();this.destroyed()||!o||o.notify(e,t)}},notifications:function(e){var t=this._private;return e===void 0?t.notificationsEnabled:(t.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var t=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var i=e.batchNotifications[n];i.empty()?t.notify(n):t.notify(n,i)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var t=this;return this.batch(function(){for(var n=Object.keys(e),i=0;i<n.length;i++){var o=n[i],a=e[o],s=t.getElementById(o);s.data(a)}})}},kF=Sa({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),Qx={renderTo:function(e,t,n,i){var o=this._private.renderer;return o.renderTo(e,t,n,i),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var t=this,n=t.extension("renderer",e.name);if(n==null){Vi("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&Bn("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var i=kF(e);i.cy=t,t._private.renderer=new n(i),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var t=e.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var i=n._private;i.rscratch={},i.rstyle={},i.animation.current=[],i.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};Qx.invalidateDimensions=Qx.resize;var Gm={collection:function(e,t){return yr(e)?this.$(e):Ou(e)?e.collection():di(e)?(t||(t={}),new xa(this,e,t.unique,t.removed)):new xa(this)},nodes:function(e){var t=this.$(function(n){return n.isNode()});return e?t.filter(e):t},edges:function(e){var t=this.$(function(n){return n.isEdge()});return e?t.filter(e):t},$:function(e){var t=this._private.elements;return e?t.filter(e):t.spawnSelf()},mutableElements:function(){return this._private.elements}};Gm.elements=Gm.filter=Gm.$;var ra={},gy="t",DF="f";ra.apply=function(r){for(var e=this,t=e._private,n=t.cy,i=n.collection(),o=0;o<r.length;o++){var a=r[o],s=e.getContextMeta(a);if(!s.empty){var u=e.getContextStyle(s),l=e.applyContextStyle(s,u,a);a._private.appliedInitStyle?e.updateTransitions(a,l.diffProps):a._private.appliedInitStyle=!0;var c=e.updateStyleHints(a);c&&i.push(a)}}return i};ra.getPropertiesDiff=function(r,e){var t=this,n=t._private.propDiffs=t._private.propDiffs||{},i=r+"-"+e,o=n[i];if(o)return o;for(var a=[],s={},u=0;u<t.length;u++){var l=t[u],c=r[u]===gy,f=e[u]===gy,h=c!==f,d=l.mappedProperties.length>0;if(h||f&&d){var v=void 0;h&&d||h?v=l.properties:d&&(v=l.mappedProperties);for(var g=0;g<v.length;g++){for(var _=v[g],y=_.name,p=!1,m=u+1;m<t.length;m++){var E=t[m],C=e[m]===gy;if(C&&(p=E.properties[_.name]!=null,p))break}!s[y]&&!p&&(s[y]=!0,a.push(y))}}}return n[i]=a,a};ra.getContextMeta=function(r){for(var e=this,t="",n,i=r._private.styleCxtKey||"",o=0;o<e.length;o++){var a=e[o],s=a.selector&&a.selector.matches(r);s?t+=gy:t+=DF}return n=e.getPropertiesDiff(i,t),r._private.styleCxtKey=t,{key:t,diffPropNames:n,empty:n.length===0}};ra.getContextStyle=function(r){var e=r.key,t=this,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var i={_private:{key:e}},o=0;o<t.length;o++){var a=t[o],s=e[o]===gy;if(s)for(var u=0;u<a.properties.length;u++){var l=a.properties[u];i[l.name]=l}}return n[e]=i,i};ra.applyContextStyle=function(r,e,t){for(var n=this,i=r.diffPropNames,o={},a=n.types,s=0;s<i.length;s++){var u=i[s],l=e[u],c=t.pstyle(u);if(!l)if(c)c.bypass?l={name:u,deleteBypassed:!0}:l={name:u,delete:!0};else continue;if(c!==l){if(l.mapped===a.fn&&c!=null&&c.mapping!=null&&c.mapping.value===l.value){var f=c.mapping,h=f.fnValue=l.value(t);if(h===f.prevFnValue)continue}var d=o[u]={prev:c};n.applyParsedProperty(t,l),d.next=t.pstyle(u),d.next&&d.next.bypass&&(d.next=d.next.bypassed)}}return{diffProps:o}};ra.updateStyleHints=function(r){var e=r._private,t=this,n=t.propertyGroupNames,i=t.propertyGroupKeys,o=function(xe,Fe,He){return t.getPropertiesHash(xe,Fe,He)},a=e.styleKey;if(r.removed())return!1;var s=e.group==="nodes",u=r._private.style;n=Object.keys(u);for(var l=0;l<i.length;l++){var c=i[l];e.styleKeys[c]=[Lv,Qp]}for(var f=function(xe,Fe){return e.styleKeys[Fe][0]=_y(xe,e.styleKeys[Fe][0])},h=function(xe,Fe){return e.styleKeys[Fe][1]=wy(xe,e.styleKeys[Fe][1])},d=function(xe,Fe){f(xe,Fe),h(xe,Fe)},v=function(xe,Fe){for(var He=0;He<xe.length;He++){var at=xe.charCodeAt(He);f(at,Fe),h(at,Fe)}},g=2e9,_=function(xe){return-128<xe&&xe<128&&Math.floor(xe)!==xe?g-(xe*1024|0):xe},y=0;y<n.length;y++){var p=n[y],m=u[p];if(m!=null){var E=this.properties[p],C=E.type,P=E.groupKey,T=void 0;E.hashOverride!=null?T=E.hashOverride(r,m):m.pfValue!=null&&(T=m.pfValue);var R=E.enums==null?m.value:null,D=T!=null,L=R!=null,j=D||L,F=m.units;if(C.number&&j&&!C.multiple){var q=D?T:R;d(_(q),P),!D&&F!=null&&v(F,P)}else v(m.strValue,P)}}for(var W=[Lv,Qp],Z=0;Z<i.length;Z++){var Q=i[Z],re=e.styleKeys[Q];W[0]=_y(re[0],W[0]),W[1]=wy(re[1],W[1])}e.styleKey=Qj(W[0],W[1]);var ee=e.styleKeys;e.labelDimsKey=rd(ee.labelDimensions);var ue=o(r,["label"],ee.labelDimensions);if(e.labelKey=rd(ue),e.labelStyleKey=rd(hm(ee.commonLabel,ue)),!s){var de=o(r,["source-label"],ee.labelDimensions);e.sourceLabelKey=rd(de),e.sourceLabelStyleKey=rd(hm(ee.commonLabel,de));var se=o(r,["target-label"],ee.labelDimensions);e.targetLabelKey=rd(se),e.targetLabelStyleKey=rd(hm(ee.commonLabel,se))}if(s){var be=e.styleKeys,Le=be.nodeBody,fe=be.nodeBorder,ce=be.nodeOutline,Ee=be.backgroundImage,Ce=be.compound,ke=be.pie,Ie=be.stripe,ve=[Le,fe,ce,Ee,Ce,ke,Ie].filter(function(we){return we!=null}).reduce(hm,[Lv,Qp]);e.nodeKey=rd(ve),e.hasPie=ke!=null&&ke[0]!==Lv&&ke[1]!==Qp,e.hasStripe=Ie!=null&&Ie[0]!==Lv&&Ie[1]!==Qp}return a!==e.styleKey};ra.clearStyleHints=function(r){var e=r._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null,e.hasStripe=null};ra.applyParsedProperty=function(r,e){var t=this,n=e,i=r._private.style,o,a=t.types,s=t.properties[n.name].type,u=n.bypass,l=i[n.name],c=l&&l.bypass,f=r._private,h="mapping",d=function(Le){return Le==null?null:Le.pfValue!=null?Le.pfValue:Le.value},v=function(){var Le=d(l),fe=d(n);t.checkTriggers(r,n.name,Le,fe)};if(e.name==="curve-style"&&r.isEdge()&&(e.value!=="bezier"&&r.isLoop()||e.value==="haystack"&&(r.source().isParent()||r.target().isParent()))&&(n=e=this.parse(e.name,"bezier",u)),n.delete)return i[n.name]=void 0,v(),!0;if(n.deleteBypassed)return l?l.bypass?(l.bypassed=void 0,v(),!0):!1:(v(),!0);if(n.deleteBypass)return l?l.bypass?(i[n.name]=l.bypassed,v(),!0):!1:(v(),!0);var g=function(){Bn("Do not assign mappings to elements without corresponding data (i.e. ele `"+r.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case a.mapData:{for(var _=n.field.split("."),y=f.data,p=0;p<_.length&&y;p++){var m=_[p];y=y[m]}if(y==null)return g(),!1;var E;if(zt(y)){var C=n.fieldMax-n.fieldMin;C===0?E=0:E=(y-n.fieldMin)/C}else return Bn("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+y+"` for `"+r.id()+"` is non-numeric)"),!1;if(E<0?E=0:E>1&&(E=1),s.color){var P=n.valueMin[0],T=n.valueMax[0],R=n.valueMin[1],D=n.valueMax[1],L=n.valueMin[2],j=n.valueMax[2],F=n.valueMin[3]==null?1:n.valueMin[3],q=n.valueMax[3]==null?1:n.valueMax[3],W=[Math.round(P+(T-P)*E),Math.round(R+(D-R)*E),Math.round(L+(j-L)*E),Math.round(F+(q-F)*E)];o={bypass:n.bypass,name:n.name,value:W,strValue:"rgb("+W[0]+", "+W[1]+", "+W[2]+")"}}else if(s.number){var Z=n.valueMin+(n.valueMax-n.valueMin)*E;o=this.parse(n.name,Z,n.bypass,h)}else return!1;if(!o)return g(),!1;o.mapping=n,n=o;break}case a.data:{for(var Q=n.field.split("."),re=f.data,ee=0;ee<Q.length&&re;ee++){var ue=Q[ee];re=re[ue]}if(re!=null&&(o=this.parse(n.name,re,n.bypass,h)),!o)return g(),!1;o.mapping=n,n=o;break}case a.fn:{var de=n.value,se=n.fnValue!=null?n.fnValue:de(r);if(n.prevFnValue=se,se==null)return Bn("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+r.id()+"` is null)"),!1;if(o=this.parse(n.name,se,n.bypass,h),!o)return Bn("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+r.id()+"` is invalid)"),!1;o.mapping=$c(n),n=o;break}case void 0:break;default:return!1}return u?(c?n.bypassed=l.bypassed:n.bypassed=l,i[n.name]=n):c?l.bypassed=n:i[n.name]=n,v(),!0};ra.cleanElements=function(r,e){for(var t=0;t<r.length;t++){var n=r[t];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),!e)n._private.style={};else for(var i=n._private.style,o=Object.keys(i),a=0;a<o.length;a++){var s=o[a],u=i[s];u!=null&&(u.bypass?u.bypassed=null:i[s]=null)}}};ra.update=function(){var r=this._private.cy,e=r.mutableElements();e.updateStyle()};ra.updateTransitions=function(r,e){var t=this,n=r._private,i=r.pstyle("transition-property").value,o=r.pstyle("transition-duration").pfValue,a=r.pstyle("transition-delay").pfValue;if(i.length>0&&o>0){for(var s={},u=!1,l=0;l<i.length;l++){var c=i[l],f=r.pstyle(c),h=e[c];if(h){var d=h.prev,v=d,g=h.next!=null?h.next:f,_=!1,y=void 0,p=1e-6;v&&(zt(v.pfValue)&&zt(g.pfValue)?(_=g.pfValue-v.pfValue,y=v.pfValue+p*_):zt(v.value)&&zt(g.value)?(_=g.value-v.value,y=v.value+p*_):di(v.value)&&di(g.value)&&(_=v.value[0]!==g.value[0]||v.value[1]!==g.value[1]||v.value[2]!==g.value[2],y=v.strValue),_&&(s[c]=g.strValue,this.applyBypass(r,c,y),u=!0))}}if(!u)return;n.transitioning=!0,new pg(function(m){a>0?r.delayAnimation(a).play().promise().then(m):m()}).then(function(){return r.animation({style:s,duration:o,easing:r.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){t.removeBypasses(r,i),r.emitAndNotify("style"),n.transitioning=!1})}else n.transitioning&&(this.removeBypasses(r,i),r.emitAndNotify("style"),n.transitioning=!1)};ra.checkTrigger=function(r,e,t,n,i,o){var a=this.properties[e],s=i(a);r.removed()||s!=null&&s(t,n,r)&&o(a)};ra.checkZOrderTrigger=function(r,e,t,n){var i=this;this.checkTrigger(r,e,t,n,function(o){return o.triggersZOrder},function(){i._private.cy.notify("zorder",r)})};ra.checkBoundsTrigger=function(r,e,t,n){this.checkTrigger(r,e,t,n,function(i){return i.triggersBounds},function(i){r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache()})};ra.checkConnectedEdgesBoundsTrigger=function(r,e,t,n){this.checkTrigger(r,e,t,n,function(i){return i.triggersBoundsOfConnectedEdges},function(i){r.connectedEdges().forEach(function(o){o.dirtyBoundingBoxCache()})})};ra.checkParallelEdgesBoundsTrigger=function(r,e,t,n){this.checkTrigger(r,e,t,n,function(i){return i.triggersBoundsOfParallelEdges},function(i){r.parallelEdges().forEach(function(o){o.dirtyBoundingBoxCache()})})};ra.checkTriggers=function(r,e,t,n){r.dirtyStyleCache(),this.checkZOrderTrigger(r,e,t,n),this.checkBoundsTrigger(r,e,t,n),this.checkConnectedEdgesBoundsTrigger(r,e,t,n),this.checkParallelEdgesBoundsTrigger(r,e,t,n)};var By={};By.applyBypass=function(r,e,t,n){var i=this,o=[],a=!0;if(e==="*"||e==="**"){if(t!==void 0)for(var s=0;s<i.properties.length;s++){var u=i.properties[s],l=u.name,c=this.parse(l,t,!0);c&&o.push(c)}}else if(yr(e)){var f=this.parse(e,t,!0);f&&o.push(f)}else if(wn(e)){var h=e;n=t;for(var d=Object.keys(h),v=0;v<d.length;v++){var g=d[v],_=h[g];if(_===void 0&&(_=h[m0(g)]),_!==void 0){var y=this.parse(g,_,!0);y&&o.push(y)}}}else return!1;if(o.length===0)return!1;for(var p=!1,m=0;m<r.length;m++){for(var E=r[m],C={},P=void 0,T=0;T<o.length;T++){var R=o[T];if(n){var D=E.pstyle(R.name);P=C[R.name]={prev:D}}p=this.applyParsedProperty(E,$c(R))||p,n&&(P.next=E.pstyle(R.name))}p&&this.updateStyleHints(E),n&&this.updateTransitions(E,C,a)}return p};By.overrideBypass=function(r,e,t){e=mS(e);for(var n=0;n<r.length;n++){var i=r[n],o=i._private.style[e],a=this.properties[e].type,s=a.color,u=a.mutiple,l=o?o.pfValue!=null?o.pfValue:o.value:null;!o||!o.bypass?this.applyBypass(i,e,t):(o.value=t,o.pfValue!=null&&(o.pfValue=t),s?o.strValue="rgb("+t.join(",")+")":u?o.strValue=t.join(" "):o.strValue=""+t,this.updateStyleHints(i)),this.checkTriggers(i,e,l,t)}};By.removeAllBypasses=function(r,e){return this.removeBypasses(r,this.propertyNames,e)};By.removeBypasses=function(r,e,t){for(var n=!0,i=0;i<r.length;i++){for(var o=r[i],a={},s=0;s<e.length;s++){var u=e[s],l=this.properties[u],c=o.pstyle(l.name);if(!(!c||!c.bypass)){var f="",h=this.parse(u,f,!0),d=a[l.name]={prev:c};this.applyParsedProperty(o,h),d.next=o.pstyle(l.name)}}this.updateStyleHints(o),t&&this.updateTransitions(o,a,n)}};var DS={};DS.getEmSizeInPixels=function(){var r=this.containerCss("font-size");return r!=null?parseFloat(r):1};DS.containerCss=function(r){var e=this._private.cy,t=e.container(),n=e.window();if(n&&t&&n.getComputedStyle)return n.getComputedStyle(t).getPropertyValue(r)};var Zc={};Zc.getRenderedStyle=function(r,e){return e?this.getStylePropertyValue(r,e,!0):this.getRawStyle(r,!0)};Zc.getRawStyle=function(r,e){var t=this;if(r=r[0],r){for(var n={},i=0;i<t.properties.length;i++){var o=t.properties[i],a=t.getStylePropertyValue(r,o.name,e);a!=null&&(n[o.name]=a,n[m0(o.name)]=a)}return n}};Zc.getIndexedStyle=function(r,e,t,n){var i=r.pstyle(e)[t][n];return i??r.cy().style().getDefaultProperty(e)[t][0]};Zc.getStylePropertyValue=function(r,e,t){var n=this;if(r=r[0],r){var i=n.properties[e];i.alias&&(i=i.pointsTo);var o=i.type,a=r.pstyle(i.name);if(a){var s=a.value,u=a.units,l=a.strValue;if(t&&o.number&&s!=null&&zt(s)){var c=r.cy().zoom(),f=function(_){return _*c},h=function(_,y){return f(_)+y},d=di(s),v=d?u.every(function(g){return g!=null}):u!=null;return v?d?s.map(function(g,_){return h(g,u[_])}).join(" "):h(s,u):d?s.map(function(g){return yr(g)?g:""+f(g)}).join(" "):""+f(s)}else if(l!=null)return l}return null}};Zc.getAnimationStartStyle=function(r,e){for(var t={},n=0;n<e.length;n++){var i=e[n],o=i.name,a=r.pstyle(o);a!==void 0&&(wn(a)?a=this.parse(o,a.strValue):a=this.parse(o,a)),a&&(t[o]=a)}return t};Zc.getPropsList=function(r){var e=this,t=[],n=r,i=e.properties;if(n)for(var o=Object.keys(n),a=0;a<o.length;a++){var s=o[a],u=n[s],l=i[s]||i[mS(s)],c=this.parse(l.name,u);c&&t.push(c)}return t};Zc.getNonDefaultPropertiesHash=function(r,e,t){var n=t.slice(),i,o,a,s,u,l;for(u=0;u<e.length;u++)if(i=e[u],o=r.pstyle(i,!1),o!=null)if(o.pfValue!=null)n[0]=_y(s,n[0]),n[1]=wy(s,n[1]);else for(a=o.strValue,l=0;l<a.length;l++)s=a.charCodeAt(l),n[0]=_y(s,n[0]),n[1]=wy(s,n[1]);return n};Zc.getPropertiesHash=Zc.getNonDefaultPropertiesHash;var I0={};I0.appendFromJson=function(r){for(var e=this,t=0;t<r.length;t++){var n=r[t],i=n.selector,o=n.style||n.css,a=Object.keys(o);e.selector(i);for(var s=0;s<a.length;s++){var u=a[s],l=o[u];e.css(u,l)}}return e};I0.fromJson=function(r){var e=this;return e.resetToDefault(),e.appendFromJson(r),e};I0.json=function(){for(var r=[],e=this.defaultLength;e<this.length;e++){for(var t=this[e],n=t.selector,i=t.properties,o={},a=0;a<i.length;a++){var s=i[a];o[s.name]=s.strValue}r.push({selector:n?n.toString():"core",style:o})}return r};var MS={};MS.appendFromString=function(r){var e=this,t=this,n=""+r,i,o,a;n=n.replace(/[/][*](\s|.)+?[*][/]/g,"");function s(){n.length>i.length?n=n.substr(i.length):n=""}function u(){o.length>a.length?o=o.substr(a.length):o=""}for(;;){var l=n.match(/^\s*$/);if(l)break;var c=n.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){Bn("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+n);break}i=c[0];var f=c[1];if(f!=="core"){var h=new dd(f);if(h.invalid){Bn("Skipping parsing of block: Invalid selector found in string stylesheet: "+f),s();continue}}var d=c[2],v=!1;o=d;for(var g=[];;){var _=o.match(/^\s*$/);if(_)break;var y=o.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!y){Bn("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+d),v=!0;break}a=y[0];var p=y[1],m=y[2],E=e.properties[p];if(!E){Bn("Skipping property: Invalid property name in: "+a),u();continue}var C=t.parse(p,m);if(!C){Bn("Skipping property: Invalid property definition in: "+a),u();continue}g.push({name:p,val:m}),u()}if(v){s();break}t.selector(f);for(var P=0;P<g.length;P++){var T=g[P];t.css(T.name,T.val)}s()}return t};MS.fromString=function(r){var e=this;return e.resetToDefault(),e.appendFromString(r),e};var bo={};(function(){var r=No,e=Rj,t=kj,n=Dj,i=Mj,o=function(we){return"^"+we+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},a=function(we){var xe=r+"|\\w+|"+e+"|"+t+"|"+n+"|"+i;return"^"+we+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+r+")\\s*\\,\\s*("+r+")\\s*,\\s*("+xe+")\\s*\\,\\s*("+xe+")\\)$"},s=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];bo.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},axisDirectionExplicit:{enums:["leftward","rightward","upward","downward"]},axisDirectionPrimary:{enums:["horizontal","vertical"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:o("data")},layoutData:{mapping:!0,regex:o("layoutData")},scratch:{mapping:!0,regex:o("scratch")},mapData:{mapping:!0,regex:a("mapData")},mapLayoutData:{mapping:!0,regex:a("mapLayoutData")},mapScratch:{mapping:!0,regex:a("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:s,singleRegexMatchValue:!0},urls:{regexes:s,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(we,xe){switch(we.length){case 2:return xe[0]!=="deg"&&xe[0]!=="rad"&&xe[1]!=="deg"&&xe[1]!=="rad";case 1:return yr(we[0])||xe[0]==="deg"||xe[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+r+")\\s*,\\s*("+r+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+r+")\\s*,\\s*("+r+")\\s*,\\s*("+r+")\\s*,\\s*("+r+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(we){var xe=we.length;return xe===1||xe===2||xe===4}}};var u={zeroNonZero:function(we,xe){return(we==null||xe==null)&&we!==xe||we==0&&xe!=0?!0:we!=0&&xe==0},any:function(we,xe){return we!=xe},emptyNonEmpty:function(we,xe){var Fe=cd(we),He=cd(xe);return Fe&&!He||!Fe&&He}},l=bo.types,c=[{name:"label",type:l.text,triggersBounds:u.any,triggersZOrder:u.emptyNonEmpty},{name:"text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any}],f=[{name:"source-label",type:l.text,triggersBounds:u.any},{name:"source-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"source-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-offset",type:l.size,triggersBounds:u.any}],h=[{name:"target-label",type:l.text,triggersBounds:u.any},{name:"target-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"target-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-offset",type:l.size,triggersBounds:u.any}],d=[{name:"font-family",type:l.fontFamily,triggersBounds:u.any},{name:"font-style",type:l.fontStyle,triggersBounds:u.any},{name:"font-weight",type:l.fontWeight,triggersBounds:u.any},{name:"font-size",type:l.size,triggersBounds:u.any},{name:"text-transform",type:l.textTransform,triggersBounds:u.any},{name:"text-wrap",type:l.textWrap,triggersBounds:u.any},{name:"text-overflow-wrap",type:l.textOverflowWrap,triggersBounds:u.any},{name:"text-max-width",type:l.size,triggersBounds:u.any},{name:"text-outline-width",type:l.size,triggersBounds:u.any},{name:"line-height",type:l.positiveNumber,triggersBounds:u.any}],v=[{name:"text-valign",type:l.valign,triggersBounds:u.any},{name:"text-halign",type:l.halign,triggersBounds:u.any},{name:"color",type:l.color},{name:"text-outline-color",type:l.color},{name:"text-outline-opacity",type:l.zeroOneNumber},{name:"text-background-color",type:l.color},{name:"text-background-opacity",type:l.zeroOneNumber},{name:"text-background-padding",type:l.size,triggersBounds:u.any},{name:"text-border-opacity",type:l.zeroOneNumber},{name:"text-border-color",type:l.color},{name:"text-border-width",type:l.size,triggersBounds:u.any},{name:"text-border-style",type:l.borderStyle,triggersBounds:u.any},{name:"text-background-shape",type:l.textBackgroundShape,triggersBounds:u.any},{name:"text-justification",type:l.justification},{name:"box-select-labels",type:l.bool,triggersBounds:u.any}],g=[{name:"events",type:l.bool,triggersZOrder:u.any},{name:"text-events",type:l.bool,triggersZOrder:u.any}],_=[{name:"display",type:l.display,triggersZOrder:u.any,triggersBounds:u.any,triggersBoundsOfConnectedEdges:u.any,triggersBoundsOfParallelEdges:function(we,xe,Fe){return we===xe?!1:Fe.pstyle("curve-style").value==="bezier"}},{name:"visibility",type:l.visibility,triggersZOrder:u.any},{name:"opacity",type:l.zeroOneNumber,triggersZOrder:u.zeroNonZero},{name:"text-opacity",type:l.zeroOneNumber},{name:"min-zoomed-font-size",type:l.size},{name:"z-compound-depth",type:l.zCompoundDepth,triggersZOrder:u.any},{name:"z-index-compare",type:l.zIndexCompare,triggersZOrder:u.any},{name:"z-index",type:l.number,triggersZOrder:u.any}],y=[{name:"overlay-padding",type:l.size,triggersBounds:u.any},{name:"overlay-color",type:l.color},{name:"overlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"overlay-shape",type:l.overlayShape,triggersBounds:u.any},{name:"overlay-corner-radius",type:l.cornerRadius}],p=[{name:"underlay-padding",type:l.size,triggersBounds:u.any},{name:"underlay-color",type:l.color},{name:"underlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"underlay-shape",type:l.overlayShape,triggersBounds:u.any},{name:"underlay-corner-radius",type:l.cornerRadius}],m=[{name:"transition-property",type:l.propList},{name:"transition-duration",type:l.time},{name:"transition-delay",type:l.time},{name:"transition-timing-function",type:l.easing}],E=function(we,xe){return xe.value==="label"?-we.poolIndex():xe.pfValue},C=[{name:"height",type:l.nodeSize,triggersBounds:u.any,hashOverride:E},{name:"width",type:l.nodeSize,triggersBounds:u.any,hashOverride:E},{name:"shape",type:l.nodeShape,triggersBounds:u.any},{name:"shape-polygon-points",type:l.polygonPointList,triggersBounds:u.any},{name:"corner-radius",type:l.cornerRadius},{name:"background-color",type:l.color},{name:"background-fill",type:l.fill},{name:"background-opacity",type:l.zeroOneNumber},{name:"background-blacken",type:l.nOneOneNumber},{name:"background-gradient-stop-colors",type:l.colors},{name:"background-gradient-stop-positions",type:l.percentages},{name:"background-gradient-direction",type:l.gradientDirection},{name:"padding",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"padding-relative-to",type:l.paddingRelativeTo,triggersBounds:u.any},{name:"bounds-expansion",type:l.boundsExpansion,triggersBounds:u.any}],P=[{name:"border-color",type:l.color},{name:"border-opacity",type:l.zeroOneNumber},{name:"border-width",type:l.size,triggersBounds:u.any},{name:"border-style",type:l.borderStyle},{name:"border-cap",type:l.lineCap},{name:"border-join",type:l.lineJoin},{name:"border-dash-pattern",type:l.numbers},{name:"border-dash-offset",type:l.number},{name:"border-position",type:l.linePosition}],T=[{name:"outline-color",type:l.color},{name:"outline-opacity",type:l.zeroOneNumber},{name:"outline-width",type:l.size,triggersBounds:u.any},{name:"outline-style",type:l.borderStyle},{name:"outline-offset",type:l.size,triggersBounds:u.any}],R=[{name:"background-image",type:l.urls},{name:"background-image-crossorigin",type:l.bgCrossOrigin},{name:"background-image-opacity",type:l.zeroOneNumbers},{name:"background-image-containment",type:l.bgContainment},{name:"background-image-smoothing",type:l.bools},{name:"background-position-x",type:l.bgPos},{name:"background-position-y",type:l.bgPos},{name:"background-width-relative-to",type:l.bgRelativeTo},{name:"background-height-relative-to",type:l.bgRelativeTo},{name:"background-repeat",type:l.bgRepeat},{name:"background-fit",type:l.bgFit},{name:"background-clip",type:l.bgClip},{name:"background-width",type:l.bgWH},{name:"background-height",type:l.bgWH},{name:"background-offset-x",type:l.bgPos},{name:"background-offset-y",type:l.bgPos}],D=[{name:"position",type:l.position,triggersBounds:u.any},{name:"compound-sizing-wrt-labels",type:l.compoundIncludeLabels,triggersBounds:u.any},{name:"min-width",type:l.size,triggersBounds:u.any},{name:"min-width-bias-left",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-width-bias-right",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height",type:l.size,triggersBounds:u.any},{name:"min-height-bias-top",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height-bias-bottom",type:l.sizeMaybePercent,triggersBounds:u.any}],L=[{name:"line-style",type:l.lineStyle},{name:"line-color",type:l.color},{name:"line-fill",type:l.fill},{name:"line-cap",type:l.lineCap},{name:"line-opacity",type:l.zeroOneNumber},{name:"line-dash-pattern",type:l.numbers},{name:"line-dash-offset",type:l.number},{name:"line-outline-width",type:l.size},{name:"line-outline-color",type:l.color},{name:"line-gradient-stop-colors",type:l.colors},{name:"line-gradient-stop-positions",type:l.percentages},{name:"curve-style",type:l.curveStyle,triggersBounds:u.any,triggersBoundsOfParallelEdges:function(we,xe){return we===xe?!1:we==="bezier"||xe==="bezier"}},{name:"haystack-radius",type:l.zeroOneNumber,triggersBounds:u.any},{name:"source-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"target-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"control-point-step-size",type:l.size,triggersBounds:u.any},{name:"control-point-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"control-point-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"segment-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-radii",type:l.numbers,triggersBounds:u.any},{name:"radius-type",type:l.radiusType,triggersBounds:u.any},{name:"taxi-turn",type:l.bidirectionalSizeMaybePercent,triggersBounds:u.any},{name:"taxi-turn-min-distance",type:l.size,triggersBounds:u.any},{name:"taxi-direction",type:l.axisDirection,triggersBounds:u.any},{name:"taxi-radius",type:l.number,triggersBounds:u.any},{name:"edge-distances",type:l.edgeDistances,triggersBounds:u.any},{name:"arrow-scale",type:l.positiveNumber,triggersBounds:u.any},{name:"loop-direction",type:l.angle,triggersBounds:u.any},{name:"loop-sweep",type:l.angle,triggersBounds:u.any},{name:"source-distance-from-node",type:l.size,triggersBounds:u.any},{name:"target-distance-from-node",type:l.size,triggersBounds:u.any}],j=[{name:"ghost",type:l.bool,triggersBounds:u.any},{name:"ghost-offset-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-offset-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-opacity",type:l.zeroOneNumber}],F=[{name:"selection-box-color",type:l.color},{name:"selection-box-opacity",type:l.zeroOneNumber},{name:"selection-box-border-color",type:l.color},{name:"selection-box-border-width",type:l.size},{name:"active-bg-color",type:l.color},{name:"active-bg-opacity",type:l.zeroOneNumber},{name:"active-bg-size",type:l.size},{name:"outside-texture-bg-color",type:l.color},{name:"outside-texture-bg-opacity",type:l.zeroOneNumber}],q=[];bo.pieBackgroundN=16,q.push({name:"pie-size",type:l.sizeMaybePercent}),q.push({name:"pie-hole",type:l.sizeMaybePercent}),q.push({name:"pie-start-angle",type:l.angle});for(var W=1;W<=bo.pieBackgroundN;W++)q.push({name:"pie-"+W+"-background-color",type:l.color}),q.push({name:"pie-"+W+"-background-size",type:l.percent}),q.push({name:"pie-"+W+"-background-opacity",type:l.zeroOneNumber});var Z=[];bo.stripeBackgroundN=16,Z.push({name:"stripe-size",type:l.sizeMaybePercent}),Z.push({name:"stripe-direction",type:l.axisDirectionPrimary});for(var Q=1;Q<=bo.stripeBackgroundN;Q++)Z.push({name:"stripe-"+Q+"-background-color",type:l.color}),Z.push({name:"stripe-"+Q+"-background-size",type:l.percent}),Z.push({name:"stripe-"+Q+"-background-opacity",type:l.zeroOneNumber});var re=[],ee=bo.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:l.arrowShape,triggersBounds:u.any},{name:"arrow-color",type:l.color},{name:"arrow-fill",type:l.arrowFill},{name:"arrow-width",type:l.arrowWidth}].forEach(function(ve){ee.forEach(function(we){var xe=we+"-"+ve.name,Fe=ve.type,He=ve.triggersBounds;re.push({name:xe,type:Fe,triggersBounds:He})})},{});var ue=bo.properties=[].concat(g,m,_,y,p,j,v,d,c,f,h,C,P,T,R,q,Z,D,L,re,F),de=bo.propertyGroups={behavior:g,transition:m,visibility:_,overlay:y,underlay:p,ghost:j,commonLabel:v,labelDimensions:d,mainLabel:c,sourceLabel:f,targetLabel:h,nodeBody:C,nodeBorder:P,nodeOutline:T,backgroundImage:R,pie:q,stripe:Z,compound:D,edgeLine:L,edgeArrow:re,core:F},se=bo.propertyGroupNames={},be=bo.propertyGroupKeys=Object.keys(de);be.forEach(function(ve){se[ve]=de[ve].map(function(we){return we.name}),de[ve].forEach(function(we){return we.groupKey=ve})});var Le=bo.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];bo.propertyNames=ue.map(function(ve){return ve.name});for(var fe=0;fe<ue.length;fe++){var ce=ue[fe];ue[ce.name]=ce}for(var Ee=0;Ee<Le.length;Ee++){var Ce=Le[Ee],ke=ue[Ce.pointsTo],Ie={name:Ce.name,alias:!0,pointsTo:ke};ue.push(Ie),ue[Ce.name]=Ie}})();bo.getDefaultProperty=function(r){return this.getDefaultProperties()[r]};bo.getDefaultProperties=function(){var r=this._private;if(r.defaultProperties!=null)return r.defaultProperties;for(var e=xr({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","box-select-labels":"no","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%","pie-hole":0,"pie-start-angle":"0deg"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(u,l){for(var c=1;c<=bo.pieBackgroundN;c++){var f=l.name.replace("{{i}}",c),h=l.value;u[f]=h}return u},{}),{"stripe-size":"100%","stripe-direction":"horizontal"},[{name:"stripe-{{i}}-background-color",value:"black"},{name:"stripe-{{i}}-background-size",value:"0%"},{name:"stripe-{{i}}-background-opacity",value:1}].reduce(function(u,l){for(var c=1;c<=bo.stripeBackgroundN;c++){var f=l.name.replace("{{i}}",c),h=l.value;u[f]=h}return u},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(u,l){return bo.arrowPrefixes.forEach(function(c){var f=c+"-"+l.name,h=l.value;u[f]=h}),u},{})),t={},n=0;n<this.properties.length;n++){var i=this.properties[n];if(!i.pointsTo){var o=i.name,a=e[o],s=this.parse(o,a);t[o]=s}}return r.defaultProperties=t,r.defaultProperties};bo.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var k0={};k0.parse=function(r,e,t,n){var i=this;if(Wi(e))return i.parseImplWarn(r,e,t,n);var o=n==="mapping"||n===!0||n===!1||n==null?"dontcare":n,a=t?"t":"f",s=""+e,u=PD(r,s,a,o),l=i.propCache=i.propCache||[],c;return(c=l[u])||(c=l[u]=i.parseImplWarn(r,e,t,n)),(t||n==="mapping")&&(c=$c(c),c&&(c.value=$c(c.value))),c};k0.parseImplWarn=function(r,e,t,n){var i=this.parseImpl(r,e,t,n);return!i&&e!=null&&Bn("The style property `".concat(r,": ").concat(e,"` is invalid")),i&&(i.name==="width"||i.name==="height")&&e==="label"&&Bn("The style value of `label` is deprecated for `"+i.name+"`"),i};k0.parseImpl=function(r,e,t,n){var i=this;r=mS(r);var o=i.properties[r],a=e,s=i.types;if(!o||e===void 0)return null;o.alias&&(o=o.pointsTo,r=o.name);var u=yr(e);u&&(e=e.trim());var l=o.type;if(!l)return null;if(t&&(e===""||e===null))return{name:r,value:e,bypass:!0,deleteBypass:!0};if(Wi(e))return{name:r,value:e,strValue:"fn",mapped:s.fn,bypass:t};var c,f;if(!(!u||n||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(c=new RegExp(s.data.regex).exec(e))){if(t)return!1;var h=s.data;return{name:r,value:c,strValue:""+e,mapped:h,field:c[1],bypass:t}}else if(e.length>=10&&e[0]==="m"&&(f=new RegExp(s.mapData.regex).exec(e))){if(t||l.multiple)return!1;var d=s.mapData;if(!(l.color||l.number))return!1;var v=this.parse(r,f[4]);if(!v||v.mapped)return!1;var g=this.parse(r,f[5]);if(!g||g.mapped)return!1;if(v.pfValue===g.pfValue||v.strValue===g.strValue)return Bn("`"+r+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+r+": "+v.strValue+"`"),this.parse(r,v.strValue);if(l.color){var _=v.value,y=g.value,p=_[0]===y[0]&&_[1]===y[1]&&_[2]===y[2]&&(_[3]===y[3]||(_[3]==null||_[3]===1)&&(y[3]==null||y[3]===1));if(p)return!1}return{name:r,value:f,strValue:""+e,mapped:d,field:f[1],fieldMin:parseFloat(f[2]),fieldMax:parseFloat(f[3]),valueMin:v.value,valueMax:g.value,bypass:t}}}if(l.multiple&&n!=="multiple"){var m;if(u?m=e.split(/\s+/):di(e)?m=e:m=[e],l.evenMultiple&&m.length%2!==0)return null;for(var E=[],C=[],P=[],T="",R=!1,D=0;D<m.length;D++){var L=i.parse(r,m[D],t,"multiple");R=R||yr(L.value),E.push(L.value),P.push(L.pfValue!=null?L.pfValue:L.value),C.push(L.units),T+=(D>0?" ":"")+L.strValue}return l.validate&&!l.validate(E,C)?null:l.singleEnum&&R?E.length===1&&yr(E[0])?{name:r,value:E[0],strValue:E[0],bypass:t}:null:{name:r,value:E,pfValue:P,strValue:T,bypass:t,units:C}}var j=function(){for(var Ie=0;Ie<l.enums.length;Ie++){var ve=l.enums[Ie];if(ve===e)return{name:r,value:e,strValue:""+e,bypass:t}}return null};if(l.number){var F,q="px";if(l.units&&(F=l.units),l.implicitUnits&&(q=l.implicitUnits),!l.unitless)if(u){var W="px|em"+(l.allowPercent?"|\\%":"");F&&(W=F);var Z=e.match("^("+No+")("+W+")?$");Z&&(e=Z[1],F=Z[2]||q)}else(!F||l.implicitUnits)&&(F=q);if(e=parseFloat(e),isNaN(e)&&l.enums===void 0)return null;if(isNaN(e)&&l.enums!==void 0)return e=a,j();if(l.integer&&!Oj(e)||l.min!==void 0&&(e<l.min||l.strictMin&&e===l.min)||l.max!==void 0&&(e>l.max||l.strictMax&&e===l.max))return null;var Q={name:r,value:e,strValue:""+e+(F||""),units:F,bypass:t};return l.unitless||F!=="px"&&F!=="em"?Q.pfValue=e:Q.pfValue=F==="px"||!F?e:this.getEmSizeInPixels()*e,(F==="ms"||F==="s")&&(Q.pfValue=F==="ms"?e:1e3*e),(F==="deg"||F==="rad")&&(Q.pfValue=F==="rad"?e:R5(e)),F==="%"&&(Q.pfValue=e/100),Q}else if(l.propList){var re=[],ee=""+e;if(ee!=="none"){for(var ue=ee.split(/\s*,\s*|\s+/),de=0;de<ue.length;de++){var se=ue[de].trim();i.properties[se]?re.push(se):Bn("`"+se+"` is not a valid property name")}if(re.length===0)return null}return{name:r,value:re,strValue:re.length===0?"none":re.join(" "),bypass:t}}else if(l.color){var be=wD(e);return be?{name:r,value:be,pfValue:be,strValue:"rgb("+be[0]+","+be[1]+","+be[2]+")",bypass:t}:null}else if(l.regex||l.regexes){if(l.enums){var Le=j();if(Le)return Le}for(var fe=l.regexes?l.regexes:[l.regex],ce=0;ce<fe.length;ce++){var Ee=new RegExp(fe[ce]),Ce=Ee.exec(e);if(Ce)return{name:r,value:l.singleRegexMatchValue?Ce[1]:Ce,strValue:""+e,bypass:t}}return null}else return l.string?{name:r,value:""+e,strValue:""+e,bypass:t}:l.enums?j():null};var ta=function(e){if(!(this instanceof ta))return new ta(e);if(!yS(e)){Vi("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},Va=ta.prototype;Va.instanceString=function(){return"style"};Va.clear=function(){for(var r=this._private,e=r.cy,t=e.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,r.contextStyles={},r.propDiffs={},this.cleanElements(t,!0),t.forEach(function(i){var o=i[0]._private;o.styleDirty=!0,o.appliedInitStyle=!1}),this};Va.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};Va.core=function(r){return this._private.coreStyle[r]||this.getDefaultProperty(r)};Va.selector=function(r){var e=r==="core"?null:new dd(r),t=this.length++;return this[t]={selector:e,properties:[],mappedProperties:[],index:t},this};Va.css=function(){var r=this,e=arguments;if(e.length===1)for(var t=e[0],n=0;n<r.properties.length;n++){var i=r.properties[n],o=t[i.name];o===void 0&&(o=t[m0(i.name)]),o!==void 0&&this.cssRule(i.name,o)}else e.length===2&&this.cssRule(e[0],e[1]);return this};Va.style=Va.css;Va.cssRule=function(r,e){var t=this.parse(r,e);if(t){var n=this.length-1;this[n].properties.push(t),this[n].properties[t.name]=t,t.name.match(/pie-(\d+)-background-size/)&&t.value&&(this._private.hasPie=!0),t.name.match(/stripe-(\d+)-background-size/)&&t.value&&(this._private.hasStripe=!0),t.mapped&&this[n].mappedProperties.push(t);var i=!this[n].selector;i&&(this._private.coreStyle[t.name]=t)}return this};Va.append=function(r){return mD(r)?r.appendToStyle(this):di(r)?this.appendFromJson(r):yr(r)&&this.appendFromString(r),this};ta.fromJson=function(r,e){var t=new ta(r);return t.fromJson(e),t};ta.fromString=function(r,e){return new ta(r).fromString(e)};[ra,By,DS,Zc,I0,MS,bo,k0].forEach(function(r){xr(Va,r)});ta.types=Va.types;ta.properties=Va.properties;ta.propertyGroups=Va.propertyGroups;ta.propertyGroupNames=Va.propertyGroupNames;ta.propertyGroupKeys=Va.propertyGroupKeys;var MF={style:function(e){if(e){var t=this.setStyle(e);t.update()}return this._private.style},setStyle:function(e){var t=this._private;return mD(e)?t.style=e.generateStyle(this):di(e)?t.style=ta.fromJson(this,e):yr(e)?t.style=ta.fromString(this,e):t.style=ta(this),t.style},updateStyle:function(){this.mutableElements().updateStyle()}},LF="single",Gv={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var t=this._private;if(t.selectionType==null&&(t.selectionType=LF),e!==void 0)(e==="additive"||e==="single")&&(t.selectionType=e);else return t.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,t=this._private.pan,n,i,o,a,s;switch(e.length){case 0:return t;case 1:if(yr(e[0]))return n=e[0],t[n];if(wn(e[0])){if(!this._private.panningEnabled)return this;o=e[0],a=o.x,s=o.y,zt(a)&&(t.x=a),zt(s)&&(t.y=s),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],i=e[1],(n==="x"||n==="y")&&zt(i)&&(t[n]=i),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,t){var n=arguments,i=this._private.pan,o,a,s,u,l;if(!this._private.panningEnabled)return this;switch(n.length){case 1:wn(e)&&(s=n[0],u=s.x,l=s.y,zt(u)&&(i.x+=u),zt(l)&&(i.y+=l),this.emit("pan viewport"));break;case 2:o=e,a=t,(o==="x"||o==="y")&&zt(a)&&(i[o]+=a),this.emit("pan viewport");break}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(e,t){var n=this.getFitViewport(e,t);if(n){var i=this._private;i.zoom=n.zoom,i.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,t){if(zt(e)&&t===void 0&&(t=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(yr(e)){var i=e;e=this.$(i)}else if(Tj(e)){var o=e;n={x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else Ou(e)||(e=this.mutableElements());if(!(Ou(e)&&e.empty())){n=n||e.boundingBox();var a=this.width(),s=this.height(),u;if(t=zt(t)?t:0,!isNaN(a)&&!isNaN(s)&&a>0&&s>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){u=Math.min((a-2*t)/n.w,(s-2*t)/n.h),u=u>this._private.maxZoom?this._private.maxZoom:u,u=u<this._private.minZoom?this._private.minZoom:u;var l={x:(a-u*(n.x1+n.x2))/2,y:(s-u*(n.y1+n.y2))/2};return{zoom:u,pan:l}}}}},zoomRange:function(e,t){var n=this._private;if(t==null){var i=e;e=i.min,t=i.max}return zt(e)&&zt(t)&&e<=t?(n.minZoom=e,n.maxZoom=t):zt(e)&&t===void 0&&e<=n.maxZoom?n.minZoom=e:zt(t)&&e===void 0&&t>=n.minZoom&&(n.maxZoom=t),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var t=this._private,n=t.pan,i=t.zoom,o,a,s=!1;if(t.zoomingEnabled||(s=!0),zt(e)?a=e:wn(e)&&(a=e.level,e.position!=null?o=w0(e.position,i,n):e.renderedPosition!=null&&(o=e.renderedPosition),o!=null&&!t.panningEnabled&&(s=!0)),a=a>t.maxZoom?t.maxZoom:a,a=a<t.minZoom?t.minZoom:a,s||!zt(a)||a===i||o!=null&&(!zt(o.x)||!zt(o.y)))return null;if(o!=null){var u=n,l=i,c=a,f={x:-c/l*(o.x-u.x)+o.x,y:-c/l*(o.y-u.y)+o.y};return{zoomed:!0,panned:!0,zoom:c,pan:f}}else return{zoomed:!0,panned:!1,zoom:a,pan:n}},zoom:function(e){if(e===void 0)return this._private.zoom;var t=this.getZoomedViewport(e),n=this._private;return t==null||!t.zoomed?this:(n.zoom=t.zoom,t.panned&&(n.pan.x=t.pan.x,n.pan.y=t.pan.y),this.emit("zoom"+(t.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var t=this._private,n=!0,i=!0,o=[],a=!1,s=!1;if(!e)return this;if(zt(e.zoom)||(n=!1),wn(e.pan)||(i=!1),!n&&!i)return this;if(n){var u=e.zoom;u<t.minZoom||u>t.maxZoom||!t.zoomingEnabled?a=!0:(t.zoom=u,o.push("zoom"))}if(i&&(!a||!e.cancelOnFailedZoom)&&t.panningEnabled){var l=e.pan;zt(l.x)&&(t.pan.x=l.x,s=!1),zt(l.y)&&(t.pan.y=l.y,s=!1),s||o.push("pan")}return o.length>0&&(o.push("viewport"),this.emit(o.join(" ")),this.notify("viewport")),this},center:function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,t){if(this._private.panningEnabled){if(yr(e)){var n=e;e=this.mutableElements().filter(n)}else Ou(e)||(e=this.mutableElements());if(e.length!==0){var i=e.boundingBox(),o=this.width(),a=this.height();t=t===void 0?this._private.zoom:t;var s={x:(o-t*(i.x1+i.x2))/2,y:(a-t*(i.y1+i.y2))/2};return s}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,t=e.container,n=this;return e.sizeCache=e.sizeCache||(t?function(){var i=n.window().getComputedStyle(t),o=function(s){return parseFloat(i.getPropertyValue(s))};return{width:t.clientWidth-o("padding-left")-o("padding-right"),height:t.clientHeight-o("padding-top")-o("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,t=this._private.zoom,n=this.renderedExtent(),i={x1:(n.x1-e.x)/t,x2:(n.x2-e.x)/t,y1:(n.y1-e.y)/t,y2:(n.y2-e.y)/t};return i.w=i.x2-i.x1,i.h=i.y2-i.y1,i},renderedExtent:function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};Gv.centre=Gv.center;Gv.autolockNodes=Gv.autolock;Gv.autoungrabifyNodes=Gv.autoungrabify;var Cy={data:Fn.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:Fn.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:Fn.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Fn.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};Cy.attr=Cy.data;Cy.removeAttr=Cy.removeData;var Py=function(e){var t=this;e=xr({},e);var n=e.container;n&&!e0(n)&&e0(n[0])&&(n=n[0]);var i=n?n._cyreg:null;i=i||{},i&&i.cy&&(i.cy.destroy(),i={});var o=i.readies=i.readies||[];n&&(n._cyreg=i),i.cy=t;var a=Mo!==void 0&&n!==void 0&&!e.headless,s=e;s.layout=xr({name:a?"grid":"null"},s.layout),s.renderer=xr({name:a?"canvas":"null"},s.renderer);var u=function(v,g,_){return g!==void 0?g:_!==void 0?_:v},l=this._private={container:n,ready:!1,options:s,elements:new xa(this),listeners:[],aniEles:new xa(this),data:s.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:u(!0,s.zoomingEnabled),userZoomingEnabled:u(!0,s.userZoomingEnabled),panningEnabled:u(!0,s.panningEnabled),userPanningEnabled:u(!0,s.userPanningEnabled),boxSelectionEnabled:u(!0,s.boxSelectionEnabled),autolock:u(!1,s.autolock,s.autolockNodes),autoungrabify:u(!1,s.autoungrabify,s.autoungrabifyNodes),autounselectify:u(!1,s.autounselectify),styleEnabled:s.styleEnabled===void 0?a:s.styleEnabled,zoom:zt(s.zoom)?s.zoom:1,pan:{x:wn(s.pan)&&zt(s.pan.x)?s.pan.x:0,y:wn(s.pan)&&zt(s.pan.y)?s.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:u(250,s.multiClickDebounceTime)};this.createEmitter(),this.selectionType(s.selectionType),this.zoomRange({min:s.minZoom,max:s.maxZoom});var c=function(v,g){var _=v.some(Cj);if(_)return pg.all(v).then(g);g(v)};l.styleEnabled&&t.setStyle([]);var f=xr({},s,s.renderer);t.initRenderer(f);var h=function(v,g,_){t.notifications(!1);var y=t.mutableElements();y.length>0&&y.remove(),v!=null&&(wn(v)||di(v))&&t.add(v),t.one("layoutready",function(m){t.notifications(!0),t.emit(m),t.one("load",g),t.emitAndNotify("load")}).one("layoutstop",function(){t.one("done",_),t.emit("done")});var p=xr({},t._private.options.layout);p.eles=t.elements(),t.layout(p).run()};c([s.style,s.elements],function(d){var v=d[0],g=d[1];l.styleEnabled&&t.style().append(v),h(g,function(){t.startAnimationLoop(),l.ready=!0,Wi(s.ready)&&t.on("ready",s.ready);for(var _=0;_<o.length;_++){var y=o[_];t.on("ready",y)}i&&(i.readies=[]),t.emit("ready")},s.done)})},s0=Py.prototype;xr(s0,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){var e=this._private.container;if(e==null)return Mo;var t=this._private.container.ownerDocument;return t===void 0||t==null?Mo:t.defaultView||Mo},mount:function(e){if(e!=null){var t=this,n=t._private,i=n.options;return!e0(e)&&e0(e[0])&&(e=e[0]),t.stopAnimationLoop(),t.destroyRenderer(),n.container=e,n.styleEnabled=!0,t.invalidateSize(),t.initRenderer(xr({},i,i.renderer,{name:i.renderer.name==="null"?"canvas":i.renderer.name})),t.startAnimationLoop(),t.style(i.style),t.emit("mount"),t}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return $c(this._private.options)},json:function(e){var t=this,n=t._private,i=t.mutableElements(),o=function(E){return t.getElementById(E.id())};if(wn(e)){if(t.startBatch(),e.elements){var a={},s=function(E,C){for(var P=[],T=[],R=0;R<E.length;R++){var D=E[R];if(!D.data.id){Bn("cy.json() cannot handle elements without an ID attribute");continue}var L=""+D.data.id,j=t.getElementById(L);a[L]=!0,j.length!==0?T.push({ele:j,json:D}):(C&&(D.group=C),P.push(D))}t.add(P);for(var F=0;F<T.length;F++){var q=T[F],W=q.ele,Z=q.json;W.json(Z)}};if(di(e.elements))s(e.elements);else for(var u=["nodes","edges"],l=0;l<u.length;l++){var c=u[l],f=e.elements[c];di(f)&&s(f,c)}var h=t.collection();i.filter(function(m){return!a[m.id()]}).forEach(function(m){m.isParent()?h.merge(m):m.remove()}),h.forEach(function(m){return m.children().move({parent:null})}),h.forEach(function(m){return o(m).remove()})}e.style&&t.style(e.style),e.zoom!=null&&e.zoom!==n.zoom&&t.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&t.pan(e.pan),e.data&&t.data(e.data);for(var d=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],v=0;v<d.length;v++){var g=d[v];e[g]!=null&&t[g](e[g])}return t.endBatch(),this}else{var _=!!e,y={};_?y.elements=this.elements().map(function(m){return m.json()}):(y.elements={},i.forEach(function(m){var E=m.group();y.elements[E]||(y.elements[E]=[]),y.elements[E].push(m.json())})),this._private.styleEnabled&&(y.style=t.style().json()),y.data=$c(t.data());var p=n.options;return y.zoomingEnabled=n.zoomingEnabled,y.userZoomingEnabled=n.userZoomingEnabled,y.zoom=n.zoom,y.minZoom=n.minZoom,y.maxZoom=n.maxZoom,y.panningEnabled=n.panningEnabled,y.userPanningEnabled=n.userPanningEnabled,y.pan=$c(n.pan),y.boxSelectionEnabled=n.boxSelectionEnabled,y.renderer=$c(p.renderer),y.hideEdgesOnViewport=p.hideEdgesOnViewport,y.textureOnViewport=p.textureOnViewport,y.wheelSensitivity=p.wheelSensitivity,y.motionBlur=p.motionBlur,y.multiClickDebounceTime=p.multiClickDebounceTime,y}}});s0.$id=s0.getElementById;[xF,AF,gM,Zx,zm,IF,Qx,Gm,MF,Gv,Cy].forEach(function(r){xr(s0,r)});var NF={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}},jF={maximal:!1,acyclic:!1},Gp=function(e){return e.scratch("breadthfirst")},O2=function(e,t){return e.scratch("breadthfirst",t)};function yM(r){this.options=xr({},NF,jF,r)}yM.prototype.run=function(){var r=this.options,e=r.cy,t=r.eles,n=t.nodes().filter(function(H){return H.isChildless()}),i=t,o=r.directed,a=r.acyclic||r.maximal||r.maximalAdjustments>0,s=!!r.boundingBox,u=e.extent(),l=Ws(s?r.boundingBox:{x1:u.x1,y1:u.y1,w:u.w,h:u.h}),c;if(Ou(r.roots))c=r.roots;else if(di(r.roots)){for(var f=[],h=0;h<r.roots.length;h++){var d=r.roots[h],v=e.getElementById(d);f.push(v)}c=e.collection(f)}else if(yr(r.roots))c=e.$(r.roots);else if(o)c=n.roots();else{var g=t.components();c=e.collection();for(var _=function(){var $=g[y],ne=$.maxDegree(!1),Re=$.filter(function(De){return De.degree(!1)===ne});c=c.add(Re)},y=0;y<g.length;y++)_()}var p=[],m={},E=function($,ne){p[ne]==null&&(p[ne]=[]);var Re=p[ne].length;p[ne].push($),O2($,{index:Re,depth:ne})},C=function($,ne){var Re=Gp($),De=Re.depth,Be=Re.index;p[De][Be]=null,$.isChildless()&&E($,ne)};i.bfs({roots:c,directed:r.directed,visit:function($,ne,Re,De,Be){var Je=$[0],Tt=Je.id();Je.isChildless()&&E(Je,Be),m[Tt]=!0}});for(var P=[],T=0;T<n.length;T++){var R=n[T];m[R.id()]||P.push(R)}var D=function($){for(var ne=p[$],Re=0;Re<ne.length;Re++){var De=ne[Re];if(De==null){ne.splice(Re,1),Re--;continue}O2(De,{depth:$,index:Re})}},L=function($,ne){for(var Re=Gp($),De=$.incomers().filter(function(Jt){return Jt.isNode()&&t.has(Jt)}),Be=-1,Je=$.id(),Tt=0;Tt<De.length;Tt++){var Lt=De[Tt],Vt=Gp(Lt);Be=Math.max(Be,Vt.depth)}if(Re.depth<=Be){if(!r.acyclic&&ne[Je])return null;var Nt=Be+1;return C($,Nt),ne[Je]=Nt,!0}return!1};if(o&&a){var j=[],F={},q=function($){return j.push($)},W=function(){return j.shift()};for(n.forEach(function(H){return j.push(H)});j.length>0;){var Z=W(),Q=L(Z,F);if(Q)Z.outgoers().filter(function(H){return H.isNode()&&t.has(H)}).forEach(q);else if(Q===null){Bn("Detected double maximal shift for node `"+Z.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var re=0;if(r.avoidOverlap)for(var ee=0;ee<n.length;ee++){var ue=n[ee],de=ue.layoutDimensions(r),se=de.w,be=de.h;re=Math.max(re,se,be)}var Le={},fe=function($){if(Le[$.id()])return Le[$.id()];for(var ne=Gp($).depth,Re=$.neighborhood(),De=0,Be=0,Je=0;Je<Re.length;Je++){var Tt=Re[Je];if(!(Tt.isEdge()||Tt.isParent()||!n.has(Tt))){var Lt=Gp(Tt);if(Lt!=null){var Vt=Lt.index,Nt=Lt.depth;if(!(Vt==null||Nt==null)){var Jt=p[Nt].length;Nt<ne&&(De+=Vt/Jt,Be++)}}}}return Be=Math.max(1,Be),De=De/Be,Be===0&&(De=0),Le[$.id()]=De,De},ce=function($,ne){var Re=fe($),De=fe(ne),Be=Re-De;return Be===0?_D($.id(),ne.id()):Be};r.depthSort!==void 0&&(ce=r.depthSort);for(var Ee=p.length,Ce=0;Ce<Ee;Ce++)p[Ce].sort(ce),D(Ce);for(var ke=[],Ie=0;Ie<P.length;Ie++)ke.push(P[Ie]);var ve=function(){for(var $=0;$<Ee;$++)D($)};ke.length&&(p.unshift(ke),Ee=p.length,ve());for(var we=0,xe=0;xe<Ee;xe++)we=Math.max(p[xe].length,we);var Fe={x:l.x1+l.w/2,y:l.y1+l.h/2},He=n.reduce(function(H,$){return function(ne){return{w:H.w===-1?ne.w:(H.w+ne.w)/2,h:H.h===-1?ne.h:(H.h+ne.h)/2}}($.boundingBox({includeLabels:r.nodeDimensionsIncludeLabels}))},{w:-1,h:-1}),at=Math.max(Ee===1?0:s?(l.h-r.padding*2-He.h)/(Ee-1):(l.h-r.padding*2-He.h)/(Ee+1),re),wt=p.reduce(function(H,$){return Math.max(H,$.length)},0),it=function($){var ne=Gp($),Re=ne.depth,De=ne.index;if(r.circle){var Be=Math.min(l.w/2/Ee,l.h/2/Ee);Be=Math.max(Be,re);var Je=Be*Re+Be-(Ee>0&&p[0].length<=3?Be/2:0),Tt=2*Math.PI/p[Re].length*De;return Re===0&&p[0].length===1&&(Je=1),{x:Fe.x+Je*Math.cos(Tt),y:Fe.y+Je*Math.sin(Tt)}}else{var Lt=p[Re].length,Vt=Math.max(Lt===1?0:s?(l.w-r.padding*2-He.w)/((r.grid?wt:Lt)-1):(l.w-r.padding*2-He.w)/((r.grid?wt:Lt)+1),re),Nt={x:Fe.x+(De+1-(Lt+1)/2)*Vt,y:Fe.y+(Re+1-(Ee+1)/2)*at};return Nt}};return t.nodes().layoutPositions(this,r,it),this};var FF={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function mM(r){this.options=xr({},FF,r)}mM.prototype.run=function(){var r=this.options,e=r,t=r.cy,n=e.eles,i=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,o=n.nodes().not(":parent");e.sort&&(o=o.sort(e.sort));for(var a=Ws(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),s={x:a.x1+a.w/2,y:a.y1+a.h/2},u=e.sweep===void 0?2*Math.PI-2*Math.PI/o.length:e.sweep,l=u/Math.max(1,o.length-1),c,f=0,h=0;h<o.length;h++){var d=o[h],v=d.layoutDimensions(e),g=v.w,_=v.h;f=Math.max(f,g,_)}if(zt(e.radius)?c=e.radius:o.length<=1?c=0:c=Math.min(a.h,a.w)/2-f,o.length>1&&e.avoidOverlap){f*=1.75;var y=Math.cos(l)-Math.cos(0),p=Math.sin(l)-Math.sin(0),m=Math.sqrt(f*f/(y*y+p*p));c=Math.max(m,c)}var E=function(P,T){var R=e.startAngle+T*l*(i?1:-1),D=c*Math.cos(R),L=c*Math.sin(R),j={x:s.x+D,y:s.y+L};return j};return n.nodes().layoutPositions(this,e,E),this};var BF={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function bM(r){this.options=xr({},BF,r)}bM.prototype.run=function(){for(var r=this.options,e=r,t=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,n=r.cy,i=e.eles,o=i.nodes().not(":parent"),a=Ws(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),s={x:a.x1+a.w/2,y:a.y1+a.h/2},u=[],l=0,c=0;c<o.length;c++){var f=o[c],h=void 0;h=e.concentric(f),u.push({value:h,node:f}),f._private.scratch.concentric=h}o.updateStyle();for(var d=0;d<o.length;d++){var v=o[d],g=v.layoutDimensions(e);l=Math.max(l,g.w,g.h)}u.sort(function(He,at){return at.value-He.value});for(var _=e.levelWidth(o),y=[[]],p=y[0],m=0;m<u.length;m++){var E=u[m];if(p.length>0){var C=Math.abs(p[0].value-E.value);C>=_&&(p=[],y.push(p))}p.push(E)}var P=l+e.minNodeSpacing;if(!e.avoidOverlap){var T=y.length>0&&y[0].length>1,R=Math.min(a.w,a.h)/2-P,D=R/(y.length+T?1:0);P=Math.min(P,D)}for(var L=0,j=0;j<y.length;j++){var F=y[j],q=e.sweep===void 0?2*Math.PI-2*Math.PI/F.length:e.sweep,W=F.dTheta=q/Math.max(1,F.length-1);if(F.length>1&&e.avoidOverlap){var Z=Math.cos(W)-Math.cos(0),Q=Math.sin(W)-Math.sin(0),re=Math.sqrt(P*P/(Z*Z+Q*Q));L=Math.max(re,L)}F.r=L,L+=P}if(e.equidistant){for(var ee=0,ue=0,de=0;de<y.length;de++){var se=y[de],be=se.r-ue;ee=Math.max(ee,be)}ue=0;for(var Le=0;Le<y.length;Le++){var fe=y[Le];Le===0&&(ue=fe.r),fe.r=ue,ue+=ee}}for(var ce={},Ee=0;Ee<y.length;Ee++)for(var Ce=y[Ee],ke=Ce.dTheta,Ie=Ce.r,ve=0;ve<Ce.length;ve++){var we=Ce[ve],xe=e.startAngle+(t?1:-1)*ke*ve,Fe={x:s.x+Ie*Math.cos(xe),y:s.y+Ie*Math.sin(xe)};ce[we.node.id()]=Fe}return i.nodes().layoutPositions(this,e,function(He){var at=He.id();return ce[at]}),this};var Y_,UF={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,t){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function D0(r){this.options=xr({},UF,r),this.options.layout=this;var e=this.options.eles.nodes(),t=this.options.eles.edges(),n=t.filter(function(i){var o=i.source().data("id"),a=i.target().data("id"),s=e.some(function(l){return l.data("id")===o}),u=e.some(function(l){return l.data("id")===a});return!s||!u});this.options.eles=this.options.eles.not(n)}D0.prototype.run=function(){var r=this.options,e=r.cy,t=this;t.stopped=!1,(r.animate===!0||r.animate===!1)&&t.emit({type:"layoutstart",layout:t}),r.debug===!0?Y_=!0:Y_=!1;var n=qF(e,t,r);Y_&&GF(n),r.randomize&&VF(n);var i=ih(),o=function(){WF(n,e,r),r.fit===!0&&e.fit(r.padding)},a=function(h){return!(t.stopped||h>=r.numIter||(HF(n,r),n.temperature=n.temperature*r.coolingFactor,n.temperature<r.minTemp))},s=function(){if(r.animate===!0||r.animate===!1)o(),t.one("layoutstop",r.stop),t.emit({type:"layoutstop",layout:t});else{var h=r.eles.nodes(),d=wM(n,r,h);h.layoutPositions(t,r,d)}},u=0,l=!0;if(r.animate===!0){var c=function(){for(var h=0;l&&h<r.refresh;)l=a(u),u++,h++;if(!l)S2(n,r),s();else{var d=ih();d-i>=r.animationThreshold&&o(),t0(c)}};c()}else{for(;l;)l=a(u),u++;S2(n,r),s()}return this};D0.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};D0.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var qF=function(e,t,n){for(var i=n.eles.edges(),o=n.eles.nodes(),a=Ws(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),s={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:o.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:i.size(),temperature:n.initialTemp,clientWidth:a.w,clientHeight:a.h,boundingBox:a},u=n.eles.components(),l={},c=0;c<u.length;c++)for(var f=u[c],h=0;h<f.length;h++){var d=f[h];l[d.id()]=c}for(var c=0;c<s.nodeSize;c++){var v=o[c],g=v.layoutDimensions(n),_={};_.isLocked=v.locked(),_.id=v.data("id"),_.parentId=v.data("parent"),_.cmptId=l[v.id()],_.children=[],_.positionX=v.position("x"),_.positionY=v.position("y"),_.offsetX=0,_.offsetY=0,_.height=g.w,_.width=g.h,_.maxX=_.positionX+_.width/2,_.minX=_.positionX-_.width/2,_.maxY=_.positionY+_.height/2,_.minY=_.positionY-_.height/2,_.padLeft=parseFloat(v.style("padding")),_.padRight=parseFloat(v.style("padding")),_.padTop=parseFloat(v.style("padding")),_.padBottom=parseFloat(v.style("padding")),_.nodeRepulsion=Wi(n.nodeRepulsion)?n.nodeRepulsion(v):n.nodeRepulsion,s.layoutNodes.push(_),s.idToIndex[_.id]=c}for(var y=[],p=0,m=-1,E=[],c=0;c<s.nodeSize;c++){var v=s.layoutNodes[c],C=v.parentId;C!=null?s.layoutNodes[s.idToIndex[C]].children.push(v.id):(y[++m]=v.id,E.push(v.id))}for(s.graphSet.push(E);p<=m;){var P=y[p++],T=s.idToIndex[P],d=s.layoutNodes[T],R=d.children;if(R.length>0){s.graphSet.push(R);for(var c=0;c<R.length;c++)y[++m]=R[c]}}for(var c=0;c<s.graphSet.length;c++)for(var D=s.graphSet[c],h=0;h<D.length;h++){var L=s.idToIndex[D[h]];s.indexToGraph[L]=c}for(var c=0;c<s.edgeSize;c++){var j=i[c],F={};F.id=j.data("id"),F.sourceId=j.data("source"),F.targetId=j.data("target");var q=Wi(n.idealEdgeLength)?n.idealEdgeLength(j):n.idealEdgeLength,W=Wi(n.edgeElasticity)?n.edgeElasticity(j):n.edgeElasticity,Z=s.idToIndex[F.sourceId],Q=s.idToIndex[F.targetId],re=s.indexToGraph[Z],ee=s.indexToGraph[Q];if(re!=ee){for(var ue=zF(F.sourceId,F.targetId,s),de=s.graphSet[ue],se=0,_=s.layoutNodes[Z];de.indexOf(_.id)===-1;)_=s.layoutNodes[s.idToIndex[_.parentId]],se++;for(_=s.layoutNodes[Q];de.indexOf(_.id)===-1;)_=s.layoutNodes[s.idToIndex[_.parentId]],se++;q*=se*n.nestingFactor}F.idealLength=q,F.elasticity=W,s.layoutEdges.push(F)}return s},zF=function(e,t,n){var i=_M(e,t,0,n);return 2>i.count?0:i.graph},_M=function(e,t,n,i){var o=i.graphSet[n];if(-1<o.indexOf(e)&&-1<o.indexOf(t))return{count:2,graph:n};for(var a=0,s=0;s<o.length;s++){var u=o[s],l=i.idToIndex[u],c=i.layoutNodes[l].children;if(c.length!==0){var f=i.indexToGraph[i.idToIndex[c[0]]],h=_M(e,t,f,i);if(h.count!==0)if(h.count===1){if(a++,a===2)break}else return h}}return{count:a,graph:n}},GF,VF=function(e,t){for(var n=e.clientWidth,i=e.clientHeight,o=0;o<e.nodeSize;o++){var a=e.layoutNodes[o];a.children.length===0&&!a.isLocked&&(a.positionX=Math.random()*n,a.positionY=Math.random()*i)}},wM=function(e,t,n){var i=e.boundingBox,o={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return t.boundingBox&&(n.forEach(function(a){var s=e.layoutNodes[e.idToIndex[a.data("id")]];o.x1=Math.min(o.x1,s.positionX),o.x2=Math.max(o.x2,s.positionX),o.y1=Math.min(o.y1,s.positionY),o.y2=Math.max(o.y2,s.positionY)}),o.w=o.x2-o.x1,o.h=o.y2-o.y1),function(a,s){var u=e.layoutNodes[e.idToIndex[a.data("id")]];if(t.boundingBox){var l=(u.positionX-o.x1)/o.w,c=(u.positionY-o.y1)/o.h;return{x:i.x1+l*i.w,y:i.y1+c*i.h}}else return{x:u.positionX,y:u.positionY}}},WF=function(e,t,n){var i=n.layout,o=n.eles.nodes(),a=wM(e,n,o);o.positions(a),e.ready!==!0&&(e.ready=!0,i.one("layoutready",n.ready),i.emit({type:"layoutready",layout:this}))},HF=function(e,t,n){YF(e,t),KF(e),ZF(e,t),QF(e),JF(e)},YF=function(e,t){for(var n=0;n<e.graphSet.length;n++)for(var i=e.graphSet[n],o=i.length,a=0;a<o;a++)for(var s=e.layoutNodes[e.idToIndex[i[a]]],u=a+1;u<o;u++){var l=e.layoutNodes[e.idToIndex[i[u]]];XF(s,l,e,t)}},x2=function(e){return-1+2*e*Math.random()},XF=function(e,t,n,i){var o=e.cmptId,a=t.cmptId;if(!(o!==a&&!n.isCompound)){var s=t.positionX-e.positionX,u=t.positionY-e.positionY,l=1;s===0&&u===0&&(s=x2(l),u=x2(l));var c=$F(e,t,s,u);if(c>0)var f=i.nodeOverlap*c,h=Math.sqrt(s*s+u*u),d=f*s/h,v=f*u/h;else var g=u0(e,s,u),_=u0(t,-1*s,-1*u),y=_.x-g.x,p=_.y-g.y,m=y*y+p*p,h=Math.sqrt(m),f=(e.nodeRepulsion+t.nodeRepulsion)/m,d=f*y/h,v=f*p/h;e.isLocked||(e.offsetX-=d,e.offsetY-=v),t.isLocked||(t.offsetX+=d,t.offsetY+=v)}},$F=function(e,t,n,i){if(n>0)var o=e.maxX-t.minX;else var o=t.maxX-e.minX;if(i>0)var a=e.maxY-t.minY;else var a=t.maxY-e.minY;return o>=0&&a>=0?Math.sqrt(o*o+a*a):0},u0=function(e,t,n){var i=e.positionX,o=e.positionY,a=e.height||1,s=e.width||1,u=n/t,l=a/s,c={};return t===0&&0<n||t===0&&0>n?(c.x=i,c.y=o+a/2,c):0<t&&-1*l<=u&&u<=l?(c.x=i+s/2,c.y=o+s*n/2/t,c):0>t&&-1*l<=u&&u<=l?(c.x=i-s/2,c.y=o-s*n/2/t,c):0<n&&(u<=-1*l||u>=l)?(c.x=i+a*t/2/n,c.y=o+a/2,c):(0>n&&(u<=-1*l||u>=l)&&(c.x=i-a*t/2/n,c.y=o-a/2),c)},KF=function(e,t){for(var n=0;n<e.edgeSize;n++){var i=e.layoutEdges[n],o=e.idToIndex[i.sourceId],a=e.layoutNodes[o],s=e.idToIndex[i.targetId],u=e.layoutNodes[s],l=u.positionX-a.positionX,c=u.positionY-a.positionY;if(!(l===0&&c===0)){var f=u0(a,l,c),h=u0(u,-1*l,-1*c),d=h.x-f.x,v=h.y-f.y,g=Math.sqrt(d*d+v*v),_=Math.pow(i.idealLength-g,2)/i.elasticity;if(g!==0)var y=_*d/g,p=_*v/g;else var y=0,p=0;a.isLocked||(a.offsetX+=y,a.offsetY+=p),u.isLocked||(u.offsetX-=y,u.offsetY-=p)}}},ZF=function(e,t){if(t.gravity!==0)for(var n=1,i=0;i<e.graphSet.length;i++){var o=e.graphSet[i],a=o.length;if(i===0)var s=e.clientHeight/2,u=e.clientWidth/2;else var l=e.layoutNodes[e.idToIndex[o[0]]],c=e.layoutNodes[e.idToIndex[l.parentId]],s=c.positionX,u=c.positionY;for(var f=0;f<a;f++){var h=e.layoutNodes[e.idToIndex[o[f]]];if(!h.isLocked){var d=s-h.positionX,v=u-h.positionY,g=Math.sqrt(d*d+v*v);if(g>n){var _=t.gravity*d/g,y=t.gravity*v/g;h.offsetX+=_,h.offsetY+=y}}}}},QF=function(e,t){var n=[],i=0,o=-1;for(n.push.apply(n,e.graphSet[0]),o+=e.graphSet[0].length;i<=o;){var a=n[i++],s=e.idToIndex[a],u=e.layoutNodes[s],l=u.children;if(0<l.length&&!u.isLocked){for(var c=u.offsetX,f=u.offsetY,h=0;h<l.length;h++){var d=e.layoutNodes[e.idToIndex[l[h]]];d.offsetX+=c,d.offsetY+=f,n[++o]=l[h]}u.offsetX=0,u.offsetY=0}}},JF=function(e,t){for(var n=0;n<e.nodeSize;n++){var i=e.layoutNodes[n];0<i.children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var i=e.layoutNodes[n];if(!(0<i.children.length||i.isLocked)){var o=eB(i.offsetX,i.offsetY,e.temperature);i.positionX+=o.x,i.positionY+=o.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,EM(i,e)}}for(var n=0;n<e.nodeSize;n++){var i=e.layoutNodes[n];0<i.children.length&&!i.isLocked&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}},eB=function(e,t,n){var i=Math.sqrt(e*e+t*t);if(i>n)var o={x:n*e/i,y:n*t/i};else var o={x:e,y:t};return o},EM=function(e,t){var n=e.parentId;if(n!=null){var i=t.layoutNodes[t.idToIndex[n]],o=!1;if((i.maxX==null||e.maxX+i.padRight>i.maxX)&&(i.maxX=e.maxX+i.padRight,o=!0),(i.minX==null||e.minX-i.padLeft<i.minX)&&(i.minX=e.minX-i.padLeft,o=!0),(i.maxY==null||e.maxY+i.padBottom>i.maxY)&&(i.maxY=e.maxY+i.padBottom,o=!0),(i.minY==null||e.minY-i.padTop<i.minY)&&(i.minY=e.minY-i.padTop,o=!0),o)return EM(i,t)}},S2=function(e,t){for(var n=e.layoutNodes,i=[],o=0;o<n.length;o++){var a=n[o],s=a.cmptId,u=i[s]=i[s]||[];u.push(a)}for(var l=0,o=0;o<i.length;o++){var c=i[o];if(c){c.x1=1/0,c.x2=-1/0,c.y1=1/0,c.y2=-1/0;for(var f=0;f<c.length;f++){var h=c[f];c.x1=Math.min(c.x1,h.positionX-h.width/2),c.x2=Math.max(c.x2,h.positionX+h.width/2),c.y1=Math.min(c.y1,h.positionY-h.height/2),c.y2=Math.max(c.y2,h.positionY+h.height/2)}c.w=c.x2-c.x1,c.h=c.y2-c.y1,l+=c.w*c.h}}i.sort(function(p,m){return m.w*m.h-p.w*p.h});for(var d=0,v=0,g=0,_=0,y=Math.sqrt(l)*e.clientWidth/e.clientHeight,o=0;o<i.length;o++){var c=i[o];if(c){for(var f=0;f<c.length;f++){var h=c[f];h.isLocked||(h.positionX+=d-c.x1,h.positionY+=v-c.y1)}d+=c.w+t.componentSpacing,g+=c.w+t.componentSpacing,_=Math.max(_,c.h),g>y&&(v+=_+t.componentSpacing,d=0,g=0,_=0)}}},tB={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function OM(r){this.options=xr({},tB,r)}OM.prototype.run=function(){var r=this.options,e=r,t=r.cy,n=e.eles,i=n.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));var o=Ws(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()});if(o.h===0||o.w===0)n.nodes().layoutPositions(this,e,function(Le){return{x:o.x1,y:o.y1}});else{var a=i.size(),s=Math.sqrt(a*o.h/o.w),u=Math.round(s),l=Math.round(o.w/o.h*s),c=function(fe){if(fe==null)return Math.min(u,l);var ce=Math.min(u,l);ce==u?u=fe:l=fe},f=function(fe){if(fe==null)return Math.max(u,l);var ce=Math.max(u,l);ce==u?u=fe:l=fe},h=e.rows,d=e.cols!=null?e.cols:e.columns;if(h!=null&&d!=null)u=h,l=d;else if(h!=null&&d==null)u=h,l=Math.ceil(a/u);else if(h==null&&d!=null)l=d,u=Math.ceil(a/l);else if(l*u>a){var v=c(),g=f();(v-1)*g>=a?c(v-1):(g-1)*v>=a&&f(g-1)}else for(;l*u<a;){var _=c(),y=f();(y+1)*_>=a?f(y+1):c(_+1)}var p=o.w/l,m=o.h/u;if(e.condense&&(p=0,m=0),e.avoidOverlap)for(var E=0;E<i.length;E++){var C=i[E],P=C._private.position;(P.x==null||P.y==null)&&(P.x=0,P.y=0);var T=C.layoutDimensions(e),R=e.avoidOverlapPadding,D=T.w+R,L=T.h+R;p=Math.max(p,D),m=Math.max(m,L)}for(var j={},F=function(fe,ce){return!!j["c-"+fe+"-"+ce]},q=function(fe,ce){j["c-"+fe+"-"+ce]=!0},W=0,Z=0,Q=function(){Z++,Z>=l&&(Z=0,W++)},re={},ee=0;ee<i.length;ee++){var ue=i[ee],de=e.position(ue);if(de&&(de.row!==void 0||de.col!==void 0)){var se={row:de.row,col:de.col};if(se.col===void 0)for(se.col=0;F(se.row,se.col);)se.col++;else if(se.row===void 0)for(se.row=0;F(se.row,se.col);)se.row++;re[ue.id()]=se,q(se.row,se.col)}}var be=function(fe,ce){var Ee,Ce;if(fe.locked()||fe.isParent())return!1;var ke=re[fe.id()];if(ke)Ee=ke.col*p+p/2+o.x1,Ce=ke.row*m+m/2+o.y1;else{for(;F(W,Z);)Q();Ee=Z*p+p/2+o.x1,Ce=W*m+m/2+o.y1,q(W,Z),Q()}return{x:Ee,y:Ce}};i.layoutPositions(this,e,be)}return this};var rB={ready:function(){},stop:function(){}};function LS(r){this.options=xr({},rB,r)}LS.prototype.run=function(){var r=this.options,e=r.eles,t=this;return r.cy,t.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),t.one("layoutready",r.ready),t.emit("layoutready"),t.one("layoutstop",r.stop),t.emit("layoutstop"),this};LS.prototype.stop=function(){return this};var nB={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function xM(r){this.options=xr({},nB,r)}xM.prototype.run=function(){var r=this.options,e=r.eles,t=e.nodes(),n=Wi(r.positions);function i(o){if(r.positions==null)return S5(o.position());if(n)return r.positions(o);var a=r.positions[o._private.data.id];return a??null}return t.layoutPositions(this,r,function(o,a){var s=i(o);return o.locked()||s==null?!1:s}),this};var iB={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function SM(r){this.options=xr({},iB,r)}SM.prototype.run=function(){var r=this.options,e=r.cy,t=r.eles,n=Ws(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),i=function(a,s){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}};return t.nodes().layoutPositions(this,r,i),this};var oB=[{name:"breadthfirst",impl:yM},{name:"circle",impl:mM},{name:"concentric",impl:bM},{name:"cose",impl:D0},{name:"grid",impl:OM},{name:"null",impl:LS},{name:"preset",impl:xM},{name:"random",impl:SM}];function TM(r){this.options=r,this.notifications=0}var T2=function(){},C2=function(){throw new Error("A headless instance can not render images")};TM.prototype={recalculateRenderedStyle:T2,notify:function(){this.notifications++},init:T2,isHeadless:function(){return!0},png:C2,jpg:C2};var NS={};NS.arrowShapeWidth=.3;NS.registerArrowShapes=function(){var r=this.arrowShapes={},e=this,t=function(l,c,f,h,d,v,g){var _=d.x-f/2-g,y=d.x+f/2+g,p=d.y-f/2-g,m=d.y+f/2+g,E=_<=l&&l<=y&&p<=c&&c<=m;return E},n=function(l,c,f,h,d){var v=l*Math.cos(h)-c*Math.sin(h),g=l*Math.sin(h)+c*Math.cos(h),_=v*f,y=g*f,p=_+d.x,m=y+d.y;return{x:p,y:m}},i=function(l,c,f,h){for(var d=[],v=0;v<l.length;v+=2){var g=l[v],_=l[v+1];d.push(n(g,_,c,f,h))}return d},o=function(l){for(var c=[],f=0;f<l.length;f++){var h=l[f];c.push(h.x,h.y)}return c},a=function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").pfValue*2},s=function(l,c){yr(c)&&(c=r[c]),r[l]=xr({name:l,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(h,d,v,g,_,y){var p=o(i(this.points,v+2*y,g,_)),m=qs(h,d,p);return m},roughCollide:t,draw:function(h,d,v,g){var _=i(this.points,d,v,g);e.arrowShapeImpl("polygon")(h,_)},spacing:function(h){return 0},gap:a},c)};s("none",{collide:r0,roughCollide:r0,draw:wS,spacing:GT,gap:GT}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:r.triangle.points,controlPoint:[0,-.15],roughCollide:t,draw:function(l,c,f,h,d){var v=i(this.points,c,f,h),g=this.controlPoint,_=n(g[0],g[1],c,f,h);e.arrowShapeImpl(this.name)(l,v,_)},gap:function(l){return a(l)*.8}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(l,c,f,h,d,v,g){var _=o(i(this.points,f+2*g,h,d)),y=o(i(this.pointsTee,f+2*g,h,d)),p=qs(l,c,_)||qs(l,c,y);return p},draw:function(l,c,f,h,d){var v=i(this.points,c,f,h),g=i(this.pointsTee,c,f,h);e.arrowShapeImpl(this.name)(l,v,g)}}),s("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(l,c,f,h,d,v,g){var _=d,y=Math.pow(_.x-l,2)+Math.pow(_.y-c,2)<=Math.pow((f+2*g)*this.radius,2),p=o(i(this.points,f+2*g,h,d));return qs(l,c,p)||y},draw:function(l,c,f,h,d){var v=i(this.pointsTr,c,f,h);e.arrowShapeImpl(this.name)(l,v,h.x,h.y,this.radius*c)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(l,c){var f=this.baseCrossLinePts.slice(),h=c/l,d=3,v=5;return f[d]=f[d]-h,f[v]=f[v]-h,f},collide:function(l,c,f,h,d,v,g){var _=o(i(this.points,f+2*g,h,d)),y=o(i(this.crossLinePts(f,v),f+2*g,h,d)),p=qs(l,c,_)||qs(l,c,y);return p},draw:function(l,c,f,h,d){var v=i(this.points,c,f,h),g=i(this.crossLinePts(c,d),c,f,h);e.arrowShapeImpl(this.name)(l,v,g)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(l){return a(l)*.525}}),s("circle",{radius:.15,collide:function(l,c,f,h,d,v,g){var _=d,y=Math.pow(_.x-l,2)+Math.pow(_.y-c,2)<=Math.pow((f+2*g)*this.radius,2);return y},draw:function(l,c,f,h,d){e.arrowShapeImpl(this.name)(l,h.x,h.y,this.radius*c)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(l){return 1},gap:function(l){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(l){return .95*l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}})};var Hv={};Hv.projectIntoViewport=function(r,e){var t=this.cy,n=this.findContainerClientCoords(),i=n[0],o=n[1],a=n[4],s=t.pan(),u=t.zoom(),l=((r-i)/a-s.x)/u,c=((e-o)/a-s.y)/u;return[l,c]};Hv.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var r=this.container,e=r.getBoundingClientRect(),t=this.cy.window().getComputedStyle(r),n=function(y){return parseFloat(t.getPropertyValue(y))},i={left:n("padding-left"),right:n("padding-right"),top:n("padding-top"),bottom:n("padding-bottom")},o={left:n("border-left-width"),right:n("border-right-width"),top:n("border-top-width"),bottom:n("border-bottom-width")},a=r.clientWidth,s=r.clientHeight,u=i.left+i.right,l=i.top+i.bottom,c=o.left+o.right,f=e.width/(a+c),h=a-u,d=s-l,v=e.left+i.left+o.left,g=e.top+i.top+o.top;return this.containerBB=[v,g,h,d,f]};Hv.invalidateContainerClientCoordsCache=function(){this.containerBB=null};Hv.findNearestElement=function(r,e,t,n){return this.findNearestElements(r,e,t,n)[0]};Hv.findNearestElements=function(r,e,t,n){var i=this,o=this,a=o.getCachedZSortedEles(),s=[],u=o.cy.zoom(),l=o.cy.hasCompoundNodes(),c=(n?24:8)/u,f=(n?8:2)/u,h=(n?8:2)/u,d=1/0,v,g;t&&(a=a.interactive);function _(T,R){if(T.isNode()){if(g)return;g=T,s.push(T)}if(T.isEdge()&&(R==null||R<d))if(v){if(v.pstyle("z-compound-depth").value===T.pstyle("z-compound-depth").value&&v.pstyle("z-compound-depth").value===T.pstyle("z-compound-depth").value){for(var D=0;D<s.length;D++)if(s[D].isEdge()){s[D]=T,v=T,d=R??d;break}}}else s.push(T),v=T,d=R??d}function y(T){var R=T.outerWidth()+2*f,D=T.outerHeight()+2*f,L=R/2,j=D/2,F=T.position(),q=T.pstyle("corner-radius").value==="auto"?"auto":T.pstyle("corner-radius").pfValue,W=T._private.rscratch;if(F.x-L<=r&&r<=F.x+L&&F.y-j<=e&&e<=F.y+j){var Z=o.nodeShapes[i.getNodeShape(T)];if(Z.checkPoint(r,e,0,R,D,F.x,F.y,q,W))return _(T,0),!0}}function p(T){var R=T._private,D=R.rscratch,L=T.pstyle("width").pfValue,j=T.pstyle("arrow-scale").value,F=L/2+c,q=F*F,W=F*2,ee=R.source,ue=R.target,Z;if(D.edgeType==="segments"||D.edgeType==="straight"||D.edgeType==="haystack"){for(var Q=D.allpts,re=0;re+3<Q.length;re+=2)if(B5(r,e,Q[re],Q[re+1],Q[re+2],Q[re+3],W)&&q>(Z=V5(r,e,Q[re],Q[re+1],Q[re+2],Q[re+3])))return _(T,Z),!0}else if(D.edgeType==="bezier"||D.edgeType==="multibezier"||D.edgeType==="self"||D.edgeType==="compound"){for(var Q=D.allpts,re=0;re+5<D.allpts.length;re+=4)if(U5(r,e,Q[re],Q[re+1],Q[re+2],Q[re+3],Q[re+4],Q[re+5],W)&&q>(Z=G5(r,e,Q[re],Q[re+1],Q[re+2],Q[re+3],Q[re+4],Q[re+5])))return _(T,Z),!0}for(var ee=ee||R.source,ue=ue||R.target,de=i.getArrowWidth(L,j),se=[{name:"source",x:D.arrowStartX,y:D.arrowStartY,angle:D.srcArrowAngle},{name:"target",x:D.arrowEndX,y:D.arrowEndY,angle:D.tgtArrowAngle},{name:"mid-source",x:D.midX,y:D.midY,angle:D.midsrcArrowAngle},{name:"mid-target",x:D.midX,y:D.midY,angle:D.midtgtArrowAngle}],re=0;re<se.length;re++){var be=se[re],Le=o.arrowShapes[T.pstyle(be.name+"-arrow-shape").value],fe=T.pstyle("width").pfValue;if(Le.roughCollide(r,e,de,be.angle,{x:be.x,y:be.y},fe,c)&&Le.collide(r,e,de,be.angle,{x:be.x,y:be.y},fe,c))return _(T),!0}l&&s.length>0&&(y(ee),y(ue))}function m(T,R,D){return Us(T,R,D)}function E(T,R){var D=T._private,L=h,j;R?j=R+"-":j="",T.boundingBox();var F=D.labelBounds[R||"main"],q=T.pstyle(j+"label").value,W=T.pstyle("text-events").strValue==="yes";if(!(!W||!q)){var Z=m(D.rscratch,"labelX",R),Q=m(D.rscratch,"labelY",R),re=m(D.rscratch,"labelAngle",R),ee=T.pstyle(j+"text-margin-x").pfValue,ue=T.pstyle(j+"text-margin-y").pfValue,de=F.x1-L-ee,se=F.x2+L-ee,be=F.y1-L-ue,Le=F.y2+L-ue;if(re){var fe=Math.cos(re),ce=Math.sin(re),Ee=function(Fe,He){return Fe=Fe-Z,He=He-Q,{x:Fe*fe-He*ce+Z,y:Fe*ce+He*fe+Q}},Ce=Ee(de,be),ke=Ee(de,Le),Ie=Ee(se,be),ve=Ee(se,Le),we=[Ce.x+ee,Ce.y+ue,Ie.x+ee,Ie.y+ue,ve.x+ee,ve.y+ue,ke.x+ee,ke.y+ue];if(qs(r,e,we))return _(T),!0}else if(cg(F,r,e))return _(T),!0}}for(var C=a.length-1;C>=0;C--){var P=a[C];P.isNode()?y(P)||E(P):p(P)||E(P)||E(P,"source")||E(P,"target")}return s};Hv.getAllInBox=function(r,e,t,n){var i=this.getCachedZSortedEles().interactive,o=this.cy.zoom(),a=2/o,s=[],u=Math.min(r,t),l=Math.max(r,t),c=Math.min(e,n),f=Math.max(e,n);r=u,t=l,e=c,n=f;var h=Ws({x1:r,y1:e,x2:t,y2:n});function d(q,W,Z){return Us(q,W,Z)}function v(q,W){var Z=q._private,Q=a,re="";q.boundingBox();var ee=Z.labelBounds.main,ue=d(Z.rscratch,"labelX",W),de=d(Z.rscratch,"labelY",W),se=d(Z.rscratch,"labelAngle",W),be=q.pstyle(re+"text-margin-x").pfValue,Le=q.pstyle(re+"text-margin-y").pfValue,fe=ee.x1-Q-be,ce=ee.x2+Q-be,Ee=ee.y1-Q-Le,Ce=ee.y2+Q-Le;if(se){var ke=Math.cos(se),Ie=Math.sin(se),ve=function(xe,Fe){return xe=xe-ue,Fe=Fe-de,{x:xe*ke-Fe*Ie+ue,y:xe*Ie+Fe*ke+de}};return[ve(fe,Ee),ve(ce,Ee),ve(ce,Ce),ve(fe,Ce)]}else return[{x:fe,y:Ee},{x:ce,y:Ee},{x:ce,y:Ce},{x:fe,y:Ce}]}for(var g=0;g<i.length;g++){var _=i[g];if(_.isNode()){var y=_,p=y.pstyle("text-events").strValue==="yes",m=y.pstyle("box-select-labels").strValue==="yes",E=y.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:m&&p});if(SS(h,E)){var C=v(y),P=[{x:h.x1,y:h.y1},{x:h.x2,y:h.y1},{x:h.x2,y:h.y2},{x:h.x1,y:h.y2}];$5(C,P)&&s.push(y)}}else{var T=_,R=T._private,D=R.rscratch;if(D.startX!=null&&D.startY!=null&&!cg(h,D.startX,D.startY)||D.endX!=null&&D.endY!=null&&!cg(h,D.endX,D.endY))continue;if(D.edgeType==="bezier"||D.edgeType==="multibezier"||D.edgeType==="self"||D.edgeType==="compound"||D.edgeType==="segments"||D.edgeType==="haystack"){for(var L=R.rstyle.bezierPts||R.rstyle.linePts||R.rstyle.haystackPts,j=!0,F=0;F<L.length;F++)if(!j5(h,L[F])){j=!1;break}j&&s.push(T)}else(D.edgeType==="haystack"||D.edgeType==="straight")&&s.push(T)}}return s};var l0={};l0.calculateArrowAngles=function(r){var e=r._private.rscratch,t=e.edgeType==="haystack",n=e.edgeType==="bezier",i=e.edgeType==="multibezier",o=e.edgeType==="segments",a=e.edgeType==="compound",s=e.edgeType==="self",u,l,c,f,h,d,y,p;if(t?(c=e.haystackPts[0],f=e.haystackPts[1],h=e.haystackPts[2],d=e.haystackPts[3]):(c=e.arrowStartX,f=e.arrowStartY,h=e.arrowEndX,d=e.arrowEndY),y=e.midX,p=e.midY,o)u=c-e.segpts[0],l=f-e.segpts[1];else if(i||a||s||n){var v=e.allpts,g=ea(v[0],v[2],v[4],.1),_=ea(v[1],v[3],v[5],.1);u=c-g,l=f-_}else u=c-y,l=f-p;e.srcArrowAngle=dm(u,l);var y=e.midX,p=e.midY;if(t&&(y=(c+h)/2,p=(f+d)/2),u=h-c,l=d-f,o){var v=e.allpts;if(v.length/2%2===0){var m=v.length/2,E=m-2;u=v[m]-v[E],l=v[m+1]-v[E+1]}else if(e.isRound)u=e.midVector[1],l=-e.midVector[0];else{var m=v.length/2-1,E=m-2;u=v[m]-v[E],l=v[m+1]-v[E+1]}}else if(i||a||s){var v=e.allpts,C=e.ctrlpts,P,T,R,D;if(C.length/2%2===0){var L=v.length/2-1,j=L+2,F=j+2;P=ea(v[L],v[j],v[F],0),T=ea(v[L+1],v[j+1],v[F+1],0),R=ea(v[L],v[j],v[F],1e-4),D=ea(v[L+1],v[j+1],v[F+1],1e-4)}else{var j=v.length/2-1,L=j-2,F=j+2;P=ea(v[L],v[j],v[F],.4999),T=ea(v[L+1],v[j+1],v[F+1],.4999),R=ea(v[L],v[j],v[F],.5),D=ea(v[L+1],v[j+1],v[F+1],.5)}u=R-P,l=D-T}if(e.midtgtArrowAngle=dm(u,l),e.midDispX=u,e.midDispY=l,u*=-1,l*=-1,o){var v=e.allpts;if(v.length/2%2!==0){if(!e.isRound){var m=v.length/2-1,q=m+2;u=-(v[q]-v[m]),l=-(v[q+1]-v[m+1])}}}if(e.midsrcArrowAngle=dm(u,l),o)u=h-e.segpts[e.segpts.length-2],l=d-e.segpts[e.segpts.length-1];else if(i||a||s||n){var v=e.allpts,W=v.length,g=ea(v[W-6],v[W-4],v[W-2],.9),_=ea(v[W-5],v[W-3],v[W-1],.9);u=h-g,l=d-_}else u=h-y,l=d-p;e.tgtArrowAngle=dm(u,l)};l0.getArrowWidth=l0.getArrowHeight=function(r,e){var t=this.arrowWidthCache=this.arrowWidthCache||{},n=t[r+", "+e];return n||(n=Math.max(Math.pow(r*13.37,.9),29)*e,t[r+", "+e]=n,n)};var Jx,eS,Xc={},Ju={},P2,A2,Nv,Vm,Zf,_v,Mv,Wc,Vp,wm,CM,PM,tS,rS,R2,I2=function(e,t,n){n.x=t.x-e.x,n.y=t.y-e.y,n.len=Math.sqrt(n.x*n.x+n.y*n.y),n.nx=n.x/n.len,n.ny=n.y/n.len,n.ang=Math.atan2(n.ny,n.nx)},aB=function(e,t){t.x=e.x*-1,t.y=e.y*-1,t.nx=e.nx*-1,t.ny=e.ny*-1,t.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang},sB=function(e,t,n,i,o){if(e!==R2?I2(t,e,Xc):aB(Ju,Xc),I2(t,n,Ju),P2=Xc.nx*Ju.ny-Xc.ny*Ju.nx,A2=Xc.nx*Ju.nx-Xc.ny*-Ju.ny,Zf=Math.asin(Math.max(-1,Math.min(1,P2))),Math.abs(Zf)<1e-6){Jx=t.x,eS=t.y,Mv=Vp=0;return}Nv=1,Vm=!1,A2<0?Zf<0?Zf=Math.PI+Zf:(Zf=Math.PI-Zf,Nv=-1,Vm=!0):Zf>0&&(Nv=-1,Vm=!0),t.radius!==void 0?Vp=t.radius:Vp=i,_v=Zf/2,wm=Math.min(Xc.len/2,Ju.len/2),o?(Wc=Math.abs(Math.cos(_v)*Vp/Math.sin(_v)),Wc>wm?(Wc=wm,Mv=Math.abs(Wc*Math.sin(_v)/Math.cos(_v))):Mv=Vp):(Wc=Math.min(wm,Vp),Mv=Math.abs(Wc*Math.sin(_v)/Math.cos(_v))),tS=t.x+Ju.nx*Wc,rS=t.y+Ju.ny*Wc,Jx=tS-Ju.ny*Mv*Nv,eS=rS+Ju.nx*Mv*Nv,CM=t.x+Xc.nx*Wc,PM=t.y+Xc.ny*Wc,R2=t};function AM(r,e){e.radius===0?r.lineTo(e.cx,e.cy):r.arc(e.cx,e.cy,e.radius,e.startAngle,e.endAngle,e.counterClockwise)}function jS(r,e,t,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return n===0||e.radius===0?{cx:e.x,cy:e.y,radius:0,startX:e.x,startY:e.y,stopX:e.x,stopY:e.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(sB(r,e,t,n,i),{cx:Jx,cy:eS,radius:Mv,startX:CM,startY:PM,stopX:tS,stopY:rS,startAngle:Xc.ang+Math.PI/2*Nv,endAngle:Ju.ang-Math.PI/2*Nv,counterClockwise:Vm})}var Ay=.01,uB=Math.sqrt(2*Ay),Wa={};Wa.findMidptPtsEtc=function(r,e){var t=e.posPts,n=e.intersectionPts,i=e.vectorNormInverse,o,a=r.pstyle("source-endpoint"),s=r.pstyle("target-endpoint"),u=a.units!=null&&s.units!=null,l=function(C,P,T,R){var D=R-P,L=T-C,j=Math.sqrt(L*L+D*D);return{x:-D/j,y:L/j}},c=r.pstyle("edge-distances").value;switch(c){case"node-position":o=t;break;case"intersection":o=n;break;case"endpoints":{if(u){var f=this.manualEndptToPx(r.source()[0],a),h=Lo(f,2),d=h[0],v=h[1],g=this.manualEndptToPx(r.target()[0],s),_=Lo(g,2),y=_[0],p=_[1],m={x1:d,y1:v,x2:y,y2:p};i=l(d,v,y,p),o=m}else Bn("Edge ".concat(r.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),o=n;break}}return{midptPts:o,vectorNormInverse:i}};Wa.findHaystackPoints=function(r){for(var e=0;e<r.length;e++){var t=r[e],n=t._private,i=n.rscratch;if(!i.haystack){var o=Math.random()*2*Math.PI;i.source={x:Math.cos(o),y:Math.sin(o)},o=Math.random()*2*Math.PI,i.target={x:Math.cos(o),y:Math.sin(o)}}var a=n.source,s=n.target,u=a.position(),l=s.position(),c=a.width(),f=s.width(),h=a.height(),d=s.height(),v=t.pstyle("haystack-radius").value,g=v/2;i.haystackPts=i.allpts=[i.source.x*c*g+u.x,i.source.y*h*g+u.y,i.target.x*f*g+l.x,i.target.y*d*g+l.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType="haystack",i.haystack=!0,this.storeEdgeProjections(t),this.calculateArrowAngles(t),this.recalculateEdgeLabelProjections(t),this.calculateLabelAngles(t)}};Wa.findSegmentsPoints=function(r,e){var t=r._private.rscratch,n=r.pstyle("segment-weights"),i=r.pstyle("segment-distances"),o=r.pstyle("segment-radii"),a=r.pstyle("radius-type"),s=Math.min(n.pfValue.length,i.pfValue.length),u=o.pfValue[o.pfValue.length-1],l=a.pfValue[a.pfValue.length-1];t.edgeType="segments",t.segpts=[],t.radii=[],t.isArcRadius=[];for(var c=0;c<s;c++){var f=n.pfValue[c],h=i.pfValue[c],d=1-f,v=f,g=this.findMidptPtsEtc(r,e),_=g.midptPts,y=g.vectorNormInverse,p={x:_.x1*d+_.x2*v,y:_.y1*d+_.y2*v};t.segpts.push(p.x+y.x*h,p.y+y.y*h),t.radii.push(o.pfValue[c]!==void 0?o.pfValue[c]:u),t.isArcRadius.push((a.pfValue[c]!==void 0?a.pfValue[c]:l)==="arc-radius")}};Wa.findLoopPoints=function(r,e,t,n){var i=r._private.rscratch,o=e.dirCounts,a=e.srcPos,s=r.pstyle("control-point-distances"),u=s?s.pfValue[0]:void 0,l=r.pstyle("loop-direction").pfValue,c=r.pstyle("loop-sweep").pfValue,f=r.pstyle("control-point-step-size").pfValue;i.edgeType="self";var h=t,d=f;n&&(h=0,d=u);var v=l-Math.PI/2,g=v-c/2,_=v+c/2,y=l+"_"+c;h=o[y]===void 0?o[y]=0:++o[y],i.ctrlpts=[a.x+Math.cos(g)*1.4*d*(h/3+1),a.y+Math.sin(g)*1.4*d*(h/3+1),a.x+Math.cos(_)*1.4*d*(h/3+1),a.y+Math.sin(_)*1.4*d*(h/3+1)]};Wa.findCompoundLoopPoints=function(r,e,t,n){var i=r._private.rscratch;i.edgeType="compound";var o=e.srcPos,a=e.tgtPos,s=e.srcW,u=e.srcH,l=e.tgtW,c=e.tgtH,f=r.pstyle("control-point-step-size").pfValue,h=r.pstyle("control-point-distances"),d=h?h.pfValue[0]:void 0,v=t,g=f;n&&(v=0,g=d);var _=50,y={x:o.x-s/2,y:o.y-u/2},p={x:a.x-l/2,y:a.y-c/2},m={x:Math.min(y.x,p.x),y:Math.min(y.y,p.y)},E=.5,C=Math.max(E,Math.log(s*Ay)),P=Math.max(E,Math.log(l*Ay));i.ctrlpts=[m.x,m.y-(1+Math.pow(_,1.12)/100)*g*(v/3+1)*C,m.x-(1+Math.pow(_,1.12)/100)*g*(v/3+1)*P,m.y]};Wa.findStraightEdgePoints=function(r){r._private.rscratch.edgeType="straight"};Wa.findBezierPoints=function(r,e,t,n,i){var o=r._private.rscratch,a=r.pstyle("control-point-step-size").pfValue,s=r.pstyle("control-point-distances"),u=r.pstyle("control-point-weights"),l=s&&u?Math.min(s.value.length,u.value.length):1,c=s?s.pfValue[0]:void 0,f=u.value[0],h=n;o.edgeType=h?"multibezier":"bezier",o.ctrlpts=[];for(var d=0;d<l;d++){var v=(.5-e.eles.length/2+t)*a*(i?-1:1),g=void 0,_=xS(v);h&&(c=s?s.pfValue[d]:a,f=u.value[d]),n?g=c:g=c!==void 0?_*c:void 0;var y=g!==void 0?g:v,p=1-f,m=f,E=this.findMidptPtsEtc(r,e),C=E.midptPts,P=E.vectorNormInverse,T={x:C.x1*p+C.x2*m,y:C.y1*p+C.y2*m};o.ctrlpts.push(T.x+P.x*y,T.y+P.y*y)}};Wa.findTaxiPoints=function(r,e){var t=r._private.rscratch;t.edgeType="segments";var n="vertical",i="horizontal",o="leftward",a="rightward",s="downward",u="upward",l="auto",c=e.posPts,f=e.srcW,h=e.srcH,d=e.tgtW,v=e.tgtH,g=r.pstyle("edge-distances").value,_=g!=="node-position",y=r.pstyle("taxi-direction").value,p=y,m=r.pstyle("taxi-turn"),E=m.units==="%",C=m.pfValue,P=C<0,T=r.pstyle("taxi-turn-min-distance").pfValue,R=_?(f+d)/2:0,D=_?(h+v)/2:0,L=c.x2-c.x1,j=c.y2-c.y1,F=function(me,nt){return me>0?Math.max(me-nt,0):Math.min(me+nt,0)},q=F(L,R),W=F(j,D),Z=!1;p===l?y=Math.abs(q)>Math.abs(W)?i:n:p===u||p===s?(y=n,Z=!0):(p===o||p===a)&&(y=i,Z=!0);var Q=y===n,re=Q?W:q,ee=Q?j:L,ue=xS(ee),de=!1;!(Z&&(E||P))&&(p===s&&ee<0||p===u&&ee>0||p===o&&ee>0||p===a&&ee<0)&&(ue*=-1,re=ue*Math.abs(re),de=!0);var se;if(E){var be=C<0?1+C:C;se=be*re}else{var Le=C<0?re:0;se=Le+C*ue}var fe=function(me){return Math.abs(me)<T||Math.abs(me)>=Math.abs(re)},ce=fe(se),Ee=fe(Math.abs(re)-Math.abs(se)),Ce=ce||Ee;if(Ce&&!de)if(Q){var ke=Math.abs(ee)<=h/2,Ie=Math.abs(L)<=d/2;if(ke){var ve=(c.x1+c.x2)/2,we=c.y1,xe=c.y2;t.segpts=[ve,we,ve,xe]}else if(Ie){var Fe=(c.y1+c.y2)/2,He=c.x1,at=c.x2;t.segpts=[He,Fe,at,Fe]}else t.segpts=[c.x1,c.y2]}else{var wt=Math.abs(ee)<=f/2,it=Math.abs(j)<=v/2;if(wt){var H=(c.y1+c.y2)/2,$=c.x1,ne=c.x2;t.segpts=[$,H,ne,H]}else if(it){var Re=(c.x1+c.x2)/2,De=c.y1,Be=c.y2;t.segpts=[Re,De,Re,Be]}else t.segpts=[c.x2,c.y1]}else if(Q){var Je=c.y1+se+(_?h/2*ue:0),Tt=c.x1,Lt=c.x2;t.segpts=[Tt,Je,Lt,Je]}else{var Vt=c.x1+se+(_?f/2*ue:0),Nt=c.y1,Jt=c.y2;t.segpts=[Vt,Nt,Vt,Jt]}if(t.isRound){var Er=r.pstyle("taxi-radius").value,Yt=r.pstyle("radius-type").value[0]==="arc-radius";t.radii=new Array(t.segpts.length/2).fill(Er),t.isArcRadius=new Array(t.segpts.length/2).fill(Yt)}};Wa.tryToCorrectInvalidPoints=function(r,e){var t=r._private.rscratch;if(t.edgeType==="bezier"){var n=e.srcPos,i=e.tgtPos,o=e.srcW,a=e.srcH,s=e.tgtW,u=e.tgtH,l=e.srcShape,c=e.tgtShape,f=e.srcCornerRadius,h=e.tgtCornerRadius,d=e.srcRs,v=e.tgtRs,g=!zt(t.startX)||!zt(t.startY),_=!zt(t.arrowStartX)||!zt(t.arrowStartY),y=!zt(t.endX)||!zt(t.endY),p=!zt(t.arrowEndX)||!zt(t.arrowEndY),m=3,E=this.getArrowWidth(r.pstyle("width").pfValue,r.pstyle("arrow-scale").value)*this.arrowShapeWidth,C=m*E,P=qv({x:t.ctrlpts[0],y:t.ctrlpts[1]},{x:t.startX,y:t.startY}),T=P<C,R=qv({x:t.ctrlpts[0],y:t.ctrlpts[1]},{x:t.endX,y:t.endY}),D=R<C,L=!1;if(g||_||T){L=!0;var j={x:t.ctrlpts[0]-n.x,y:t.ctrlpts[1]-n.y},F=Math.sqrt(j.x*j.x+j.y*j.y),q={x:j.x/F,y:j.y/F},W=Math.max(o,a),Z={x:t.ctrlpts[0]+q.x*2*W,y:t.ctrlpts[1]+q.y*2*W},Q=l.intersectLine(n.x,n.y,o,a,Z.x,Z.y,0,f,d);T?(t.ctrlpts[0]=t.ctrlpts[0]+q.x*(C-P),t.ctrlpts[1]=t.ctrlpts[1]+q.y*(C-P)):(t.ctrlpts[0]=Q[0]+q.x*C,t.ctrlpts[1]=Q[1]+q.y*C)}if(y||p||D){L=!0;var re={x:t.ctrlpts[0]-i.x,y:t.ctrlpts[1]-i.y},ee=Math.sqrt(re.x*re.x+re.y*re.y),ue={x:re.x/ee,y:re.y/ee},de=Math.max(o,a),se={x:t.ctrlpts[0]+ue.x*2*de,y:t.ctrlpts[1]+ue.y*2*de},be=c.intersectLine(i.x,i.y,s,u,se.x,se.y,0,h,v);D?(t.ctrlpts[0]=t.ctrlpts[0]+ue.x*(C-R),t.ctrlpts[1]=t.ctrlpts[1]+ue.y*(C-R)):(t.ctrlpts[0]=be[0]+ue.x*C,t.ctrlpts[1]=be[1]+ue.y*C)}L&&this.findEndpoints(r)}};Wa.storeAllpts=function(r){var e=r._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var t=0;t+1<e.ctrlpts.length;t+=2)e.allpts.push(e.ctrlpts[t],e.ctrlpts[t+1]),t+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[t]+e.ctrlpts[t+2])/2,(e.ctrlpts[t+1]+e.ctrlpts[t+3])/2);e.allpts.push(e.endX,e.endY);var n,i;e.ctrlpts.length/2%2===0?(n=e.allpts.length/2-1,e.midX=e.allpts[n],e.midY=e.allpts[n+1]):(n=e.allpts.length/2-3,i=.5,e.midX=ea(e.allpts[n],e.allpts[n+2],e.allpts[n+4],i),e.midY=ea(e.allpts[n+1],e.allpts[n+3],e.allpts[n+5],i))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments"){if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.isRound){e.roundCorners=[];for(var o=2;o+3<e.allpts.length;o+=2){var a=e.radii[o/2-1],s=e.isArcRadius[o/2-1];e.roundCorners.push(jS({x:e.allpts[o-2],y:e.allpts[o-1]},{x:e.allpts[o],y:e.allpts[o+1],radius:a},{x:e.allpts[o+2],y:e.allpts[o+3]},a,s))}}if(e.segpts.length%4===0){var u=e.segpts.length/2,l=u-2;e.midX=(e.segpts[l]+e.segpts[u])/2,e.midY=(e.segpts[l+1]+e.segpts[u+1])/2}else{var c=e.segpts.length/2-1;if(!e.isRound)e.midX=e.segpts[c],e.midY=e.segpts[c+1];else{var f={x:e.segpts[c],y:e.segpts[c+1]},h=e.roundCorners[c/2];if(h.radius===0){var d={x:e.segpts[c+2],y:e.segpts[c+3]};e.midX=f.x,e.midY=f.y,e.midVector=[f.y-d.y,d.x-f.x]}else{var v=[f.x-h.cx,f.y-h.cy],g=h.radius/Math.sqrt(Math.pow(v[0],2)+Math.pow(v[1],2));v=v.map(function(_){return _*g}),e.midX=h.cx+v[0],e.midY=h.cy+v[1],e.midVector=v}}}}};Wa.checkForInvalidEdgeWarning=function(r){var e=r[0]._private.rscratch;e.nodesOverlap||zt(e.startX)&&zt(e.startY)&&zt(e.endX)&&zt(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,Bn("Edge `"+r.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};Wa.findEdgeControlPoints=function(r){var e=this;if(!(!r||r.length===0)){for(var t=this,n=t.cy,i=n.hasCompoundNodes(),o=new rh,a=function(D,L){return[].concat(Jm(D),[L?1:0]).join("-")},s=[],u=[],l=0;l<r.length;l++){var c=r[l],f=c._private,h=c.pstyle("curve-style").value;if(!(c.removed()||!c.takesUpSpace())){if(h==="haystack"){u.push(c);continue}var d=h==="unbundled-bezier"||h.endsWith("segments")||h==="straight"||h==="straight-triangle"||h.endsWith("taxi"),v=h==="unbundled-bezier"||h==="bezier",g=f.source,_=f.target,y=g.poolIndex(),p=_.poolIndex(),m=[y,p].sort(),E=a(m,d),C=o.get(E);C==null&&(C={eles:[]},s.push({pairId:m,edgeIsUnbundled:d}),o.set(E,C)),C.eles.push(c),d&&(C.hasUnbundled=!0),v&&(C.hasBezier=!0)}}for(var P=function(){var D=s[T],L=D.pairId,j=D.edgeIsUnbundled,F=a(L,j),q=o.get(F),W;if(!q.hasUnbundled){var Z=q.eles[0].parallelEdges().filter(function(Yt){return Yt.isBundledBezier()});ES(q.eles),Z.forEach(function(Yt){return q.eles.push(Yt)}),q.eles.sort(function(Yt,dt){return Yt.poolIndex()-dt.poolIndex()})}var Q=q.eles[0],re=Q.source(),ee=Q.target();if(re.poolIndex()>ee.poolIndex()){var ue=re;re=ee,ee=ue}var de=q.srcPos=re.position(),se=q.tgtPos=ee.position(),be=q.srcW=re.outerWidth(),Le=q.srcH=re.outerHeight(),fe=q.tgtW=ee.outerWidth(),ce=q.tgtH=ee.outerHeight(),Ee=q.srcShape=t.nodeShapes[e.getNodeShape(re)],Ce=q.tgtShape=t.nodeShapes[e.getNodeShape(ee)],ke=q.srcCornerRadius=re.pstyle("corner-radius").value==="auto"?"auto":re.pstyle("corner-radius").pfValue,Ie=q.tgtCornerRadius=ee.pstyle("corner-radius").value==="auto"?"auto":ee.pstyle("corner-radius").pfValue,ve=q.tgtRs=ee._private.rscratch,we=q.srcRs=re._private.rscratch;q.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var xe=0;xe<q.eles.length;xe++){var Fe=q.eles[xe],He=Fe[0]._private.rscratch,at=Fe.pstyle("curve-style").value,wt=at==="unbundled-bezier"||at.endsWith("segments")||at.endsWith("taxi"),it=!re.same(Fe.source());if(!q.calculatedIntersection&&re!==ee&&(q.hasBezier||q.hasUnbundled)){q.calculatedIntersection=!0;var H=Ee.intersectLine(de.x,de.y,be,Le,se.x,se.y,0,ke,we),$=q.srcIntn=H,ne=Ce.intersectLine(se.x,se.y,fe,ce,de.x,de.y,0,Ie,ve),Re=q.tgtIntn=ne,De=q.intersectionPts={x1:H[0],x2:ne[0],y1:H[1],y2:ne[1]},Be=q.posPts={x1:de.x,x2:se.x,y1:de.y,y2:se.y},Je=ne[1]-H[1],Tt=ne[0]-H[0],Lt=Math.sqrt(Tt*Tt+Je*Je);zt(Lt)&&Lt>=uB||(Lt=Math.sqrt(Math.max(Tt*Tt,Ay)+Math.max(Je*Je,Ay)));var Vt=q.vector={x:Tt,y:Je},Nt=q.vectorNorm={x:Vt.x/Lt,y:Vt.y/Lt},Jt={x:-Nt.y,y:Nt.x};q.nodesOverlap=!zt(Lt)||Ce.checkPoint(H[0],H[1],0,fe,ce,se.x,se.y,Ie,ve)||Ee.checkPoint(ne[0],ne[1],0,be,Le,de.x,de.y,ke,we),q.vectorNormInverse=Jt,W={nodesOverlap:q.nodesOverlap,dirCounts:q.dirCounts,calculatedIntersection:!0,hasBezier:q.hasBezier,hasUnbundled:q.hasUnbundled,eles:q.eles,srcPos:se,srcRs:ve,tgtPos:de,tgtRs:we,srcW:fe,srcH:ce,tgtW:be,tgtH:Le,srcIntn:Re,tgtIntn:$,srcShape:Ce,tgtShape:Ee,posPts:{x1:Be.x2,y1:Be.y2,x2:Be.x1,y2:Be.y1},intersectionPts:{x1:De.x2,y1:De.y2,x2:De.x1,y2:De.y1},vector:{x:-Vt.x,y:-Vt.y},vectorNorm:{x:-Nt.x,y:-Nt.y},vectorNormInverse:{x:-Jt.x,y:-Jt.y}}}var Er=it?W:q;He.nodesOverlap=Er.nodesOverlap,He.srcIntn=Er.srcIntn,He.tgtIntn=Er.tgtIntn,He.isRound=at.startsWith("round"),i&&(re.isParent()||re.isChild()||ee.isParent()||ee.isChild())&&(re.parents().anySame(ee)||ee.parents().anySame(re)||re.same(ee)&&re.isParent())?e.findCompoundLoopPoints(Fe,Er,xe,wt):re===ee?e.findLoopPoints(Fe,Er,xe,wt):at.endsWith("segments")?e.findSegmentsPoints(Fe,Er):at.endsWith("taxi")?e.findTaxiPoints(Fe,Er):at==="straight"||!wt&&q.eles.length%2===1&&xe===Math.floor(q.eles.length/2)?e.findStraightEdgePoints(Fe):e.findBezierPoints(Fe,Er,xe,wt,it),e.findEndpoints(Fe),e.tryToCorrectInvalidPoints(Fe,Er),e.checkForInvalidEdgeWarning(Fe),e.storeAllpts(Fe),e.storeEdgeProjections(Fe),e.calculateArrowAngles(Fe),e.recalculateEdgeLabelProjections(Fe),e.calculateLabelAngles(Fe)}},T=0;T<s.length;T++)P();this.findHaystackPoints(u)}};function RM(r){var e=[];if(r!=null){for(var t=0;t<r.length;t+=2){var n=r[t],i=r[t+1];e.push({x:n,y:i})}return e}}Wa.getSegmentPoints=function(r){var e=r[0]._private.rscratch;this.recalculateRenderedStyle(r);var t=e.edgeType;if(t==="segments")return RM(e.segpts)};Wa.getControlPoints=function(r){var e=r[0]._private.rscratch;this.recalculateRenderedStyle(r);var t=e.edgeType;if(t==="bezier"||t==="multibezier"||t==="self"||t==="compound")return RM(e.ctrlpts)};Wa.getEdgeMidpoint=function(r){var e=r[0]._private.rscratch;return this.recalculateRenderedStyle(r),{x:e.midX,y:e.midY}};var Uy={};Uy.manualEndptToPx=function(r,e){var t=this,n=r.position(),i=r.outerWidth(),o=r.outerHeight(),a=r._private.rscratch;if(e.value.length===2){var s=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(s[0]=s[0]*i),e.units[1]==="%"&&(s[1]=s[1]*o),s[0]+=n.x,s[1]+=n.y,s}else{var u=e.pfValue[0];u=-Math.PI/2+u;var l=2*Math.max(i,o),c=[n.x+Math.cos(u)*l,n.y+Math.sin(u)*l];return t.nodeShapes[this.getNodeShape(r)].intersectLine(n.x,n.y,i,o,c[0],c[1],0,r.pstyle("corner-radius").value==="auto"?"auto":r.pstyle("corner-radius").pfValue,a)}};Uy.findEndpoints=function(r){var e=this,t,n=r.source()[0],i=r.target()[0],o=n.position(),a=i.position(),s=r.pstyle("target-arrow-shape").value,u=r.pstyle("source-arrow-shape").value,l=r.pstyle("target-distance-from-node").pfValue,c=r.pstyle("source-distance-from-node").pfValue,f=n._private.rscratch,h=i._private.rscratch,d=r.pstyle("curve-style").value,v=r._private.rscratch,g=v.edgeType,_=d==="taxi",y=g==="self"||g==="compound",p=g==="bezier"||g==="multibezier"||y,m=g!=="bezier",E=g==="straight"||g==="segments",C=g==="segments",P=p||m||E,T=y||_,R=r.pstyle("source-endpoint"),D=T?"outside-to-node":R.value,L=n.pstyle("corner-radius").value==="auto"?"auto":n.pstyle("corner-radius").pfValue,j=r.pstyle("target-endpoint"),F=T?"outside-to-node":j.value,q=i.pstyle("corner-radius").value==="auto"?"auto":i.pstyle("corner-radius").pfValue;v.srcManEndpt=R,v.tgtManEndpt=j;var W,Z,Q,re;if(p){var ee=[v.ctrlpts[0],v.ctrlpts[1]],ue=m?[v.ctrlpts[v.ctrlpts.length-2],v.ctrlpts[v.ctrlpts.length-1]]:ee;W=ue,Z=ee}else if(E){var de=C?v.segpts.slice(0,2):[a.x,a.y],se=C?v.segpts.slice(v.segpts.length-2):[o.x,o.y];W=se,Z=de}if(F==="inside-to-node")t=[a.x,a.y];else if(j.units)t=this.manualEndptToPx(i,j);else if(F==="outside-to-line")t=v.tgtIntn;else if(F==="outside-to-node"||F==="outside-to-node-or-label"?Q=W:(F==="outside-to-line"||F==="outside-to-line-or-label")&&(Q=[o.x,o.y]),t=e.nodeShapes[this.getNodeShape(i)].intersectLine(a.x,a.y,i.outerWidth(),i.outerHeight(),Q[0],Q[1],0,q,h),F==="outside-to-node-or-label"||F==="outside-to-line-or-label"){var be=i._private.rscratch,Le=be.labelWidth,fe=be.labelHeight,ce=be.labelX,Ee=be.labelY,Ce=Le/2,ke=fe/2,Ie=i.pstyle("text-valign").value;Ie==="top"?Ee-=ke:Ie==="bottom"&&(Ee+=ke);var ve=i.pstyle("text-halign").value;ve==="left"?ce-=Ce:ve==="right"&&(ce+=Ce);var we=xy(Q[0],Q[1],[ce-Ce,Ee-ke,ce+Ce,Ee-ke,ce+Ce,Ee+ke,ce-Ce,Ee+ke],a.x,a.y);if(we.length>0){var xe=o,Fe=kv(xe,Jp(t)),He=kv(xe,Jp(we)),at=Fe;if(He<Fe&&(t=we,at=He),we.length>2){var wt=kv(xe,{x:we[2],y:we[3]});wt<at&&(t=[we[2],we[3]])}}}var it=vm(t,W,e.arrowShapes[s].spacing(r)+l),H=vm(t,W,e.arrowShapes[s].gap(r)+l);if(v.endX=H[0],v.endY=H[1],v.arrowEndX=it[0],v.arrowEndY=it[1],D==="inside-to-node")t=[o.x,o.y];else if(R.units)t=this.manualEndptToPx(n,R);else if(D==="outside-to-line")t=v.srcIntn;else if(D==="outside-to-node"||D==="outside-to-node-or-label"?re=Z:(D==="outside-to-line"||D==="outside-to-line-or-label")&&(re=[a.x,a.y]),t=e.nodeShapes[this.getNodeShape(n)].intersectLine(o.x,o.y,n.outerWidth(),n.outerHeight(),re[0],re[1],0,L,f),D==="outside-to-node-or-label"||D==="outside-to-line-or-label"){var $=n._private.rscratch,ne=$.labelWidth,Re=$.labelHeight,De=$.labelX,Be=$.labelY,Je=ne/2,Tt=Re/2,Lt=n.pstyle("text-valign").value;Lt==="top"?Be-=Tt:Lt==="bottom"&&(Be+=Tt);var Vt=n.pstyle("text-halign").value;Vt==="left"?De-=Je:Vt==="right"&&(De+=Je);var Nt=xy(re[0],re[1],[De-Je,Be-Tt,De+Je,Be-Tt,De+Je,Be+Tt,De-Je,Be+Tt],o.x,o.y);if(Nt.length>0){var Jt=a,Er=kv(Jt,Jp(t)),Yt=kv(Jt,Jp(Nt)),dt=Er;if(Yt<Er&&(t=[Nt[0],Nt[1]],dt=Yt),Nt.length>2){var me=kv(Jt,{x:Nt[2],y:Nt[3]});me<dt&&(t=[Nt[2],Nt[3]])}}}var nt=vm(t,Z,e.arrowShapes[u].spacing(r)+c),lt=vm(t,Z,e.arrowShapes[u].gap(r)+c);v.startX=lt[0],v.startY=lt[1],v.arrowStartX=nt[0],v.arrowStartY=nt[1],P&&(!zt(v.startX)||!zt(v.startY)||!zt(v.endX)||!zt(v.endY)?v.badLine=!0:v.badLine=!1)};Uy.getSourceEndpoint=function(r){var e=r[0]._private.rscratch;switch(this.recalculateRenderedStyle(r),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}};Uy.getTargetEndpoint=function(r){var e=r[0]._private.rscratch;switch(this.recalculateRenderedStyle(r),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var FS={};function lB(r,e,t){for(var n=function(l,c,f,h){return ea(l,c,f,h)},i=e._private,o=i.rstyle.bezierPts,a=0;a<r.bezierProjPcts.length;a++){var s=r.bezierProjPcts[a];o.push({x:n(t[0],t[2],t[4],s),y:n(t[1],t[3],t[5],s)})}}FS.storeEdgeProjections=function(r){var e=r._private,t=e.rscratch,n=t.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,n==="multibezier"||n==="bezier"||n==="self"||n==="compound"){e.rstyle.bezierPts=[];for(var i=0;i+5<t.allpts.length;i+=4)lB(this,r,t.allpts.slice(i,i+6))}else if(n==="segments")for(var o=e.rstyle.linePts=[],i=0;i+1<t.allpts.length;i+=2)o.push({x:t.allpts[i],y:t.allpts[i+1]});else if(n==="haystack"){var a=t.haystackPts;e.rstyle.haystackPts=[{x:a[0],y:a[1]},{x:a[2],y:a[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(r.pstyle("width").pfValue,r.pstyle("arrow-scale").value)*this.arrowShapeWidth};FS.recalculateEdgeProjections=function(r){this.findEdgeControlPoints(r)};var Qc={};Qc.recalculateNodeLabelProjection=function(r){var e=r.pstyle("label").strValue;if(!cd(e)){var t,n,i=r._private,o=r.width(),a=r.height(),s=r.padding(),u=r.position(),l=r.pstyle("text-halign").strValue,c=r.pstyle("text-valign").strValue,f=i.rscratch,h=i.rstyle;switch(l){case"left":t=u.x-o/2-s;break;case"right":t=u.x+o/2+s;break;default:t=u.x}switch(c){case"top":n=u.y-a/2-s;break;case"bottom":n=u.y+a/2+s;break;default:n=u.y}f.labelX=t,f.labelY=n,h.labelX=t,h.labelY=n,this.calculateLabelAngles(r),this.applyLabelDimensions(r)}};var IM=function(e,t){var n=Math.atan(t/e);return e===0&&n<0&&(n=n*-1),n},kM=function(e,t){var n=t.x-e.x,i=t.y-e.y;return IM(n,i)},cB=function(e,t,n,i){var o=Oy(0,i-.001,1),a=Oy(0,i+.001,1),s=ng(e,t,n,o),u=ng(e,t,n,a);return kM(s,u)};Qc.recalculateEdgeLabelProjections=function(r){var e,t=r._private,n=t.rscratch,i=this,o={mid:r.pstyle("label").strValue,source:r.pstyle("source-label").strValue,target:r.pstyle("target-label").strValue};if(o.mid||o.source||o.target){e={x:n.midX,y:n.midY};var a=function(f,h,d){Jf(t.rscratch,f,h,d),Jf(t.rstyle,f,h,d)};a("labelX",null,e.x),a("labelY",null,e.y);var s=IM(n.midDispX,n.midDispY);a("labelAutoAngle",null,s);var u=function(){if(u.cache)return u.cache;for(var f=[],h=0;h+5<n.allpts.length;h+=4){var d={x:n.allpts[h],y:n.allpts[h+1]},v={x:n.allpts[h+2],y:n.allpts[h+3]},g={x:n.allpts[h+4],y:n.allpts[h+5]};f.push({p0:d,p1:v,p2:g,startDist:0,length:0,segments:[]})}var _=t.rstyle.bezierPts,y=i.bezierProjPcts.length;function p(T,R,D,L,j){var F=qv(R,D),q=T.segments[T.segments.length-1],W={p0:R,p1:D,t0:L,t1:j,startDist:q?q.startDist+q.length:0,length:F};T.segments.push(W),T.length+=F}for(var m=0;m<f.length;m++){var E=f[m],C=f[m-1];C&&(E.startDist=C.startDist+C.length),p(E,E.p0,_[m*y],0,i.bezierProjPcts[0]);for(var P=0;P<y-1;P++)p(E,_[m*y+P],_[m*y+P+1],i.bezierProjPcts[P],i.bezierProjPcts[P+1]);p(E,_[m*y+y-1],E.p2,i.bezierProjPcts[y-1],1)}return u.cache=f},l=function(f){var h,d=f==="source";if(o[f]){var v=r.pstyle(f+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var g=u(),_,y=0,p=0,m=0;m<g.length;m++){for(var E=g[d?m:g.length-1-m],C=0;C<E.segments.length;C++){var P=E.segments[d?C:E.segments.length-1-C],T=m===g.length-1&&C===E.segments.length-1;if(y=p,p+=P.length,p>=v||T){_={cp:E,segment:P};break}}if(_)break}var R=_.cp,D=_.segment,L=(v-y)/D.length,j=D.t1-D.t0,F=d?D.t0+j*L:D.t1-j*L;F=Oy(0,F,1),e=ng(R.p0,R.p1,R.p2,F),h=cB(R.p0,R.p1,R.p2,F);break}case"straight":case"segments":case"haystack":{for(var q=0,W,Z,Q,re,ee=n.allpts.length,ue=0;ue+3<ee&&(d?(Q={x:n.allpts[ue],y:n.allpts[ue+1]},re={x:n.allpts[ue+2],y:n.allpts[ue+3]}):(Q={x:n.allpts[ee-2-ue],y:n.allpts[ee-1-ue]},re={x:n.allpts[ee-4-ue],y:n.allpts[ee-3-ue]}),W=qv(Q,re),Z=q,q+=W,!(q>=v));ue+=2);var de=v-Z,se=de/W;se=Oy(0,se,1),e=k5(Q,re,se),h=kM(Q,re);break}}a("labelX",f,e.x),a("labelY",f,e.y),a("labelAutoAngle",f,h)}};l("source"),l("target"),this.applyLabelDimensions(r)}};Qc.applyLabelDimensions=function(r){this.applyPrefixedLabelDimensions(r),r.isEdge()&&(this.applyPrefixedLabelDimensions(r,"source"),this.applyPrefixedLabelDimensions(r,"target"))};Qc.applyPrefixedLabelDimensions=function(r,e){var t=r._private,n=this.getLabelText(r,e),i=Uv(n,r._private.labelDimsKey);if(Us(t.rscratch,"prefixedLabelDimsKey",e)!==i){Jf(t.rscratch,"prefixedLabelDimsKey",e,i);var o=this.calculateLabelDimensions(r,n),a=r.pstyle("line-height").pfValue,s=r.pstyle("text-wrap").strValue,u=Us(t.rscratch,"labelWrapCachedLines",e)||[],l=s!=="wrap"?1:Math.max(u.length,1),c=o.height/l,f=c*a,h=o.width,d=o.height+(l-1)*(a-1)*c;Jf(t.rstyle,"labelWidth",e,h),Jf(t.rscratch,"labelWidth",e,h),Jf(t.rstyle,"labelHeight",e,d),Jf(t.rscratch,"labelHeight",e,d),Jf(t.rscratch,"labelLineHeight",e,f)}};Qc.getLabelText=function(r,e){var t=r._private,n=e?e+"-":"",i=r.pstyle(n+"label").strValue,o=r.pstyle("text-transform").value,a=function(Le,fe){return fe?(Jf(t.rscratch,Le,e,fe),fe):Us(t.rscratch,Le,e)};if(!i)return"";o=="none"||(o=="uppercase"?i=i.toUpperCase():o=="lowercase"&&(i=i.toLowerCase()));var s=r.pstyle("text-wrap").value;if(s==="wrap"){var u=a("labelKey");if(u!=null&&a("labelWrapKey")===u)return a("labelWrapCachedText");for(var l="​",c=i.split(`
`),f=r.pstyle("text-max-width").pfValue,h=r.pstyle("text-overflow-wrap").value,d=h==="anywhere",v=[],g=/[\s\u200b]+|$/g,_=0;_<c.length;_++){var y=c[_],p=this.calculateLabelDimensions(r,y),m=p.width;if(d){var E=y.split("").join(l);y=E}if(m>f){var C=y.matchAll(g),P="",T=0,R=Gs(C),D;try{for(R.s();!(D=R.n()).done;){var L=D.value,j=L[0],F=y.substring(T,L.index);T=L.index+j.length;var q=P.length===0?F:P+F+j,W=this.calculateLabelDimensions(r,q),Z=W.width;Z<=f?P+=F+j:(P&&v.push(P),P=F+j)}}catch(be){R.e(be)}finally{R.f()}P.match(/^[\s\u200b]+$/)||v.push(P)}else v.push(y)}a("labelWrapCachedLines",v),i=a("labelWrapCachedText",v.join(`
`)),a("labelWrapKey",u)}else if(s==="ellipsis"){var Q=r.pstyle("text-max-width").pfValue,re="",ee="…",ue=!1;if(this.calculateLabelDimensions(r,i).width<Q)return i;for(var de=0;de<i.length;de++){var se=this.calculateLabelDimensions(r,re+i[de]+ee).width;if(se>Q)break;re+=i[de],de===i.length-1&&(ue=!0)}return ue||(re+=ee),re}return i};Qc.getLabelJustification=function(r){var e=r.pstyle("text-justification").strValue,t=r.pstyle("text-halign").strValue;if(e==="auto")if(r.isNode())switch(t){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};Qc.calculateLabelDimensions=function(r,e){var t=this,n=t.cy.window(),i=n.document,o=0,a=r.pstyle("font-style").strValue,s=r.pstyle("font-size").pfValue,u=r.pstyle("font-family").strValue,l=r.pstyle("font-weight").strValue,c=this.labelCalcCanvas,f=this.labelCalcCanvasContext;if(!c){c=this.labelCalcCanvas=i.createElement("canvas"),f=this.labelCalcCanvasContext=c.getContext("2d");var h=c.style;h.position="absolute",h.left="-9999px",h.top="-9999px",h.zIndex="-1",h.visibility="hidden",h.pointerEvents="none"}f.font="".concat(a," ").concat(l," ").concat(s,"px ").concat(u);for(var d=0,v=0,g=e.split(`
`),_=0;_<g.length;_++){var y=g[_],p=f.measureText(y),m=Math.ceil(p.width),E=s;d=Math.max(m,d),v+=E}return d+=o,v+=o,{width:d,height:v}};Qc.calculateLabelAngle=function(r,e){var t=r._private,n=t.rscratch,i=r.isEdge(),o=e?e+"-":"",a=r.pstyle(o+"text-rotation"),s=a.strValue;return s==="none"?0:i&&s==="autorotate"?n.labelAutoAngle:s==="autorotate"?0:a.pfValue};Qc.calculateLabelAngles=function(r){var e=this,t=r.isEdge(),n=r._private,i=n.rscratch;i.labelAngle=e.calculateLabelAngle(r),t&&(i.sourceLabelAngle=e.calculateLabelAngle(r,"source"),i.targetLabelAngle=e.calculateLabelAngle(r,"target"))};var DM={},k2=28,D2=!1;DM.getNodeShape=function(r){var e=this,t=r.pstyle("shape").value;if(t==="cutrectangle"&&(r.width()<k2||r.height()<k2))return D2||(Bn("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),D2=!0),"rectangle";if(r.isParent())return t==="rectangle"||t==="roundrectangle"||t==="round-rectangle"||t==="cutrectangle"||t==="cut-rectangle"||t==="barrel"?t:"rectangle";if(t==="polygon"){var n=r.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(n).name}return t};var M0={};M0.registerCalculationListeners=function(){var r=this.cy,e=r.collection(),t=this,n=function(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(a),s)for(var u=0;u<a.length;u++){var l=a[u],c=l._private,f=c.rstyle;f.clean=!1,f.cleanConnected=!1}};t.binder(r).on("bounds.* dirty.*",function(a){var s=a.target;n(s)}).on("style.* background.*",function(a){var s=a.target;n(s,!1)});var i=function(a){if(a){var s=t.onUpdateEleCalcsFns;e.cleanStyle();for(var u=0;u<e.length;u++){var l=e[u],c=l._private.rstyle;l.isNode()&&!c.cleanConnected&&(n(l.connectedEdges()),c.cleanConnected=!0)}if(s)for(var f=0;f<s.length;f++){var h=s[f];h(a,e)}t.recalculateRenderedStyle(e),e=r.collection()}};t.flushRenderedStyleQueue=function(){i(!0)},t.beforeRender(i,t.beforeRenderPriorities.eleCalcs)};M0.onUpdateEleCalcs=function(r){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(r)};M0.recalculateRenderedStyle=function(r,e){var t=function(E){return E._private.rstyle.cleanConnected};if(r.length!==0){var n=[],i=[];if(!this.destroyed){e===void 0&&(e=!0);for(var o=0;o<r.length;o++){var a=r[o],s=a._private,u=s.rstyle;a.isEdge()&&(!t(a.source())||!t(a.target()))&&(u.clean=!1),a.isEdge()&&a.isBundledBezier()&&a.parallelEdges().some(function(m){return!m._private.rstyle.clean&&m.isBundledBezier()})&&(u.clean=!1),!(e&&u.clean||a.removed())&&a.pstyle("display").value!=="none"&&(s.group==="nodes"?i.push(a):n.push(a),u.clean=!0)}for(var l=0;l<i.length;l++){var c=i[l],f=c._private,h=f.rstyle,d=c.position();this.recalculateNodeLabelProjection(c),h.nodeX=d.x,h.nodeY=d.y,h.nodeW=c.pstyle("width").pfValue,h.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var v=0;v<n.length;v++){var g=n[v],_=g._private,y=_.rstyle,p=_.rscratch;y.srcX=p.arrowStartX,y.srcY=p.arrowStartY,y.tgtX=p.arrowEndX,y.tgtY=p.arrowEndY,y.midX=p.midX,y.midY=p.midY,y.labelAngle=p.labelAngle,y.sourceLabelAngle=p.sourceLabelAngle,y.targetLabelAngle=p.targetLabelAngle}}}};var L0={};L0.updateCachedGrabbedEles=function(){var r=this.cachedZSortedEles;if(r){r.drag=[],r.nondrag=[];for(var e=[],t=0;t<r.length;t++){var n=r[t],i=n._private.rscratch;n.grabbed()&&!n.isParent()?e.push(n):i.inDragLayer?r.drag.push(n):r.nondrag.push(n)}for(var t=0;t<e.length;t++){var n=e[t];r.drag.push(n)}}};L0.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};L0.getCachedZSortedEles=function(r){if(r||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(vM),e.interactive=e.filter(function(t){return t.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var MM={};[Hv,l0,Wa,Uy,FS,Qc,DM,M0,L0].forEach(function(r){xr(MM,r)});var LM={};LM.getCachedImage=function(r,e,t){var n=this,i=n.imageCache=n.imageCache||{},o=i[r];if(o)return o.image.complete||o.image.addEventListener("load",t),o.image;o=i[r]=i[r]||{};var a=o.image=new Image;a.addEventListener("load",t),a.addEventListener("error",function(){a.error=!0});var s="data:",u=r.substring(0,s.length).toLowerCase()===s;return u||(e=e==="null"?null:e,a.crossOrigin=e),a.src=r,a};var mg={};mg.registerBinding=function(r,e,t,n){var i=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(r)){for(var o=[],a=0;a<r.length;a++){var s=r[a];if(s!==void 0){var u=this.binder(s);o.push(u.on.apply(u,i))}}return o}var u=this.binder(r);return u.on.apply(u,i)};mg.binder=function(r){var e=this,t=e.cy.window(),n=r===t||r===t.document||r===t.document.body||Sj(r);if(e.supportsPassiveEvents==null){var i=!1;try{var o=Object.defineProperty({},"passive",{get:function(){return i=!0,!0}});t.addEventListener("test",null,o)}catch{}e.supportsPassiveEvents=i}var a=function(u,l,c){var f=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(f[2]={capture:c??!1,passive:!1,once:!1}),e.bindings.push({target:r,args:f}),(r.addEventListener||r.on).apply(r,f),this};return{on:a,addEventListener:a,addListener:a,bind:a}};mg.nodeIsDraggable=function(r){return r&&r.isNode()&&!r.locked()&&r.grabbable()};mg.nodeIsGrabbable=function(r){return this.nodeIsDraggable(r)&&r.interactive()};mg.load=function(){var r=this,e=r.cy.window(),t=function(me){return me.selected()},n=function(me){var nt=me.getRootNode();if(nt&&nt.nodeType===11&&nt.host!==void 0)return nt},i=function(me,nt,lt,ct){me==null&&(me=r.cy);for(var ft=0;ft<nt.length;ft++){var Xt=nt[ft];me.emit({originalEvent:lt,type:Xt,position:ct})}},o=function(me){return me.shiftKey||me.metaKey||me.ctrlKey},a=function(me,nt){var lt=!0;if(r.cy.hasCompoundNodes()&&me&&me.pannable())for(var ct=0;nt&&ct<nt.length;ct++){var me=nt[ct];if(me.isNode()&&me.isParent()&&!me.pannable()){lt=!1;break}}else lt=!0;return lt},s=function(me){me[0]._private.grabbed=!0},u=function(me){me[0]._private.grabbed=!1},l=function(me){me[0]._private.rscratch.inDragLayer=!0},c=function(me){me[0]._private.rscratch.inDragLayer=!1},f=function(me){me[0]._private.rscratch.isGrabTarget=!0},h=function(me){me[0]._private.rscratch.isGrabTarget=!1},d=function(me,nt){var lt=nt.addToList,ct=lt.has(me);!ct&&me.grabbable()&&!me.locked()&&(lt.merge(me),s(me))},v=function(me,nt){if(me.cy().hasCompoundNodes()&&!(nt.inDragLayer==null&&nt.addToList==null)){var lt=me.descendants();nt.inDragLayer&&(lt.forEach(l),lt.connectedEdges().forEach(l)),nt.addToList&&d(lt,nt)}},g=function(me,nt){nt=nt||{};var lt=me.cy().hasCompoundNodes();nt.inDragLayer&&(me.forEach(l),me.neighborhood().stdFilter(function(ct){return!lt||ct.isEdge()}).forEach(l)),nt.addToList&&me.forEach(function(ct){d(ct,nt)}),v(me,nt),p(me,{inDragLayer:nt.inDragLayer}),r.updateCachedGrabbedEles()},_=g,y=function(me){me&&(r.getCachedZSortedEles().forEach(function(nt){u(nt),c(nt),h(nt)}),r.updateCachedGrabbedEles())},p=function(me,nt){if(!(nt.inDragLayer==null&&nt.addToList==null)&&me.cy().hasCompoundNodes()){var lt=me.ancestors().orphans();if(!lt.same(me)){var ct=lt.descendants().spawnSelf().merge(lt).unmerge(me).unmerge(me.descendants()),ft=ct.connectedEdges();nt.inDragLayer&&(ft.forEach(l),ct.forEach(l)),nt.addToList&&ct.forEach(function(Xt){d(Xt,nt)})}}},m=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},E=typeof MutationObserver<"u",C=typeof ResizeObserver<"u";E?(r.removeObserver=new MutationObserver(function(dt){for(var me=0;me<dt.length;me++){var nt=dt[me],lt=nt.removedNodes;if(lt)for(var ct=0;ct<lt.length;ct++){var ft=lt[ct];if(ft===r.container){r.destroy();break}}}}),r.container.parentNode&&r.removeObserver.observe(r.container.parentNode,{childList:!0})):r.registerBinding(r.container,"DOMNodeRemoved",function(dt){r.destroy()});var P=Ny(function(){r.cy.resize()},100);E&&(r.styleObserver=new MutationObserver(P),r.styleObserver.observe(r.container,{attributes:!0})),r.registerBinding(e,"resize",P),C&&(r.resizeObserver=new ResizeObserver(P),r.resizeObserver.observe(r.container));var T=function(me,nt){for(;me!=null;)nt(me),me=me.parentNode},R=function(){r.invalidateContainerClientCoordsCache()};T(r.container,function(dt){r.registerBinding(dt,"transitionend",R),r.registerBinding(dt,"animationend",R),r.registerBinding(dt,"scroll",R)}),r.registerBinding(r.container,"contextmenu",function(dt){dt.preventDefault()});var D=function(){return r.selection[4]!==0},L=function(me){for(var nt=r.findContainerClientCoords(),lt=nt[0],ct=nt[1],ft=nt[2],Xt=nt[3],pt=me.touches?me.touches:[me],Qt=!1,mr=0;mr<pt.length;mr++){var Rr=pt[mr];if(lt<=Rr.clientX&&Rr.clientX<=lt+ft&&ct<=Rr.clientY&&Rr.clientY<=ct+Xt){Qt=!0;break}}if(!Qt)return!1;for(var ar=r.container,nr=me.target,tr=nr.parentNode,lr=!1;tr;){if(tr===ar){lr=!0;break}tr=tr.parentNode}return!!lr};r.registerBinding(r.container,"mousedown",function(me){if(L(me)&&!(r.hoverData.which===1&&me.which!==1)){me.preventDefault(),m(),r.hoverData.capture=!0,r.hoverData.which=me.which;var nt=r.cy,lt=[me.clientX,me.clientY],ct=r.projectIntoViewport(lt[0],lt[1]),ft=r.selection,Xt=r.findNearestElements(ct[0],ct[1],!0,!1),pt=Xt[0],Qt=r.dragData.possibleDragElements;r.hoverData.mdownPos=ct,r.hoverData.mdownGPos=lt;var mr=function(){r.hoverData.tapholdCancelled=!1,clearTimeout(r.hoverData.tapholdTimeout),r.hoverData.tapholdTimeout=setTimeout(function(){if(!r.hoverData.tapholdCancelled){var Gr=r.hoverData.down;Gr?Gr.emit({originalEvent:me,type:"taphold",position:{x:ct[0],y:ct[1]}}):nt.emit({originalEvent:me,type:"taphold",position:{x:ct[0],y:ct[1]}})}},r.tapholdDuration)};if(me.which==3){r.hoverData.cxtStarted=!0;var Rr={originalEvent:me,type:"cxttapstart",position:{x:ct[0],y:ct[1]}};pt?(pt.activate(),pt.emit(Rr),r.hoverData.down=pt):nt.emit(Rr),r.hoverData.downTime=new Date().getTime(),r.hoverData.cxtDragged=!1}else if(me.which==1){pt&&pt.activate();{if(pt!=null&&r.nodeIsGrabbable(pt)){var ar=function(Gr){return{originalEvent:me,type:Gr,position:{x:ct[0],y:ct[1]}}},nr=function(Gr){Gr.emit(ar("grab"))};if(f(pt),!pt.selected())Qt=r.dragData.possibleDragElements=nt.collection(),_(pt,{addToList:Qt}),pt.emit(ar("grabon")).emit(ar("grab"));else{Qt=r.dragData.possibleDragElements=nt.collection();var tr=nt.$(function(lr){return lr.isNode()&&lr.selected()&&r.nodeIsGrabbable(lr)});g(tr,{addToList:Qt}),pt.emit(ar("grabon")),tr.forEach(nr)}r.redrawHint("eles",!0),r.redrawHint("drag",!0)}r.hoverData.down=pt,r.hoverData.downs=Xt,r.hoverData.downTime=new Date().getTime()}i(pt,["mousedown","tapstart","vmousedown"],me,{x:ct[0],y:ct[1]}),pt==null?(ft[4]=1,r.data.bgActivePosistion={x:ct[0],y:ct[1]},r.redrawHint("select",!0),r.redraw()):pt.pannable()&&(ft[4]=1),mr()}ft[0]=ft[2]=ct[0],ft[1]=ft[3]=ct[1]}},!1);var j=n(r.container);r.registerBinding([e,j],"mousemove",function(me){var nt=r.hoverData.capture;if(!(!nt&&!L(me))){var lt=!1,ct=r.cy,ft=ct.zoom(),Xt=[me.clientX,me.clientY],pt=r.projectIntoViewport(Xt[0],Xt[1]),Qt=r.hoverData.mdownPos,mr=r.hoverData.mdownGPos,Rr=r.selection,ar=null;!r.hoverData.draggingEles&&!r.hoverData.dragging&&!r.hoverData.selecting&&(ar=r.findNearestElement(pt[0],pt[1],!0,!1));var nr=r.hoverData.last,tr=r.hoverData.down,lr=[pt[0]-Rr[2],pt[1]-Rr[3]],Gr=r.dragData.possibleDragElements,fn;if(mr){var In=Xt[0]-mr[0],Un=In*In,hn=Xt[1]-mr[1],$n=hn*hn,vn=Un+$n;r.hoverData.isOverThresholdDrag=fn=vn>=r.desktopTapThreshold2}var Ei=o(me);fn&&(r.hoverData.tapholdCancelled=!0);var Li=function(){var pi=r.hoverData.dragDelta=r.hoverData.dragDelta||[];pi.length===0?(pi.push(lr[0]),pi.push(lr[1])):(pi[0]+=lr[0],pi[1]+=lr[1])};lt=!0,i(ar,["mousemove","vmousemove","tapdrag"],me,{x:pt[0],y:pt[1]});var Fr=function(){r.data.bgActivePosistion=void 0,r.hoverData.selecting||ct.emit({originalEvent:me,type:"boxstart",position:{x:pt[0],y:pt[1]}}),Rr[4]=1,r.hoverData.selecting=!0,r.redrawHint("select",!0),r.redraw()};if(r.hoverData.which===3){if(fn){var Tn={originalEvent:me,type:"cxtdrag",position:{x:pt[0],y:pt[1]}};tr?tr.emit(Tn):ct.emit(Tn),r.hoverData.cxtDragged=!0,(!r.hoverData.cxtOver||ar!==r.hoverData.cxtOver)&&(r.hoverData.cxtOver&&r.hoverData.cxtOver.emit({originalEvent:me,type:"cxtdragout",position:{x:pt[0],y:pt[1]}}),r.hoverData.cxtOver=ar,ar&&ar.emit({originalEvent:me,type:"cxtdragover",position:{x:pt[0],y:pt[1]}}))}}else if(r.hoverData.dragging){if(lt=!0,ct.panningEnabled()&&ct.userPanningEnabled()){var Ni;if(r.hoverData.justStartedPan){var _o=r.hoverData.mdownPos;Ni={x:(pt[0]-_o[0])*ft,y:(pt[1]-_o[1])*ft},r.hoverData.justStartedPan=!1}else Ni={x:lr[0]*ft,y:lr[1]*ft};ct.panBy(Ni),ct.emit("dragpan"),r.hoverData.dragged=!0}pt=r.projectIntoViewport(me.clientX,me.clientY)}else if(Rr[4]==1&&(tr==null||tr.pannable())){if(fn){if(!r.hoverData.dragging&&ct.boxSelectionEnabled()&&(Ei||!ct.panningEnabled()||!ct.userPanningEnabled()))Fr();else if(!r.hoverData.selecting&&ct.panningEnabled()&&ct.userPanningEnabled()){var Pi=a(tr,r.hoverData.downs);Pi&&(r.hoverData.dragging=!0,r.hoverData.justStartedPan=!0,Rr[4]=0,r.data.bgActivePosistion=Jp(Qt),r.redrawHint("select",!0),r.redraw())}tr&&tr.pannable()&&tr.active()&&tr.unactivate()}}else{if(tr&&tr.pannable()&&tr.active()&&tr.unactivate(),(!tr||!tr.grabbed())&&ar!=nr&&(nr&&i(nr,["mouseout","tapdragout"],me,{x:pt[0],y:pt[1]}),ar&&i(ar,["mouseover","tapdragover"],me,{x:pt[0],y:pt[1]}),r.hoverData.last=ar),tr)if(fn){if(ct.boxSelectionEnabled()&&Ei)tr&&tr.grabbed()&&(y(Gr),tr.emit("freeon"),Gr.emit("free"),r.dragData.didDrag&&(tr.emit("dragfreeon"),Gr.emit("dragfree"))),Fr();else if(tr&&tr.grabbed()&&r.nodeIsDraggable(tr)){var vi=!r.dragData.didDrag;vi&&r.redrawHint("eles",!0),r.dragData.didDrag=!0,r.hoverData.draggingEles||g(Gr,{inDragLayer:!0});var un={x:0,y:0};if(zt(lr[0])&&zt(lr[1])&&(un.x+=lr[0],un.y+=lr[1],vi)){var qn=r.hoverData.dragDelta;qn&&zt(qn[0])&&zt(qn[1])&&(un.x+=qn[0],un.y+=qn[1])}r.hoverData.draggingEles=!0,Gr.silentShift(un).emit("position drag"),r.redrawHint("drag",!0),r.redraw()}}else Li();lt=!0}if(Rr[2]=pt[0],Rr[3]=pt[1],lt)return me.stopPropagation&&me.stopPropagation(),me.preventDefault&&me.preventDefault(),!1}},!1);var F,q,W;r.registerBinding(e,"mouseup",function(me){if(!(r.hoverData.which===1&&me.which!==1&&r.hoverData.capture)){var nt=r.hoverData.capture;if(nt){r.hoverData.capture=!1;var lt=r.cy,ct=r.projectIntoViewport(me.clientX,me.clientY),ft=r.selection,Xt=r.findNearestElement(ct[0],ct[1],!0,!1),pt=r.dragData.possibleDragElements,Qt=r.hoverData.down,mr=o(me);if(r.data.bgActivePosistion&&(r.redrawHint("select",!0),r.redraw()),r.hoverData.tapholdCancelled=!0,r.data.bgActivePosistion=void 0,Qt&&Qt.unactivate(),r.hoverData.which===3){var Rr={originalEvent:me,type:"cxttapend",position:{x:ct[0],y:ct[1]}};if(Qt?Qt.emit(Rr):lt.emit(Rr),!r.hoverData.cxtDragged){var ar={originalEvent:me,type:"cxttap",position:{x:ct[0],y:ct[1]}};Qt?Qt.emit(ar):lt.emit(ar)}r.hoverData.cxtDragged=!1,r.hoverData.which=null}else if(r.hoverData.which===1){if(i(Xt,["mouseup","tapend","vmouseup"],me,{x:ct[0],y:ct[1]}),!r.dragData.didDrag&&!r.hoverData.dragged&&!r.hoverData.selecting&&!r.hoverData.isOverThresholdDrag&&(i(Qt,["click","tap","vclick"],me,{x:ct[0],y:ct[1]}),q=!1,me.timeStamp-W<=lt.multiClickDebounceTime()?(F&&clearTimeout(F),q=!0,W=null,i(Qt,["dblclick","dbltap","vdblclick"],me,{x:ct[0],y:ct[1]})):(F=setTimeout(function(){q||i(Qt,["oneclick","onetap","voneclick"],me,{x:ct[0],y:ct[1]})},lt.multiClickDebounceTime()),W=me.timeStamp)),Qt==null&&!r.dragData.didDrag&&!r.hoverData.selecting&&!r.hoverData.dragged&&!o(me)&&(lt.$(t).unselect(["tapunselect"]),pt.length>0&&r.redrawHint("eles",!0),r.dragData.possibleDragElements=pt=lt.collection()),Xt==Qt&&!r.dragData.didDrag&&!r.hoverData.selecting&&Xt!=null&&Xt._private.selectable&&(r.hoverData.dragging||(lt.selectionType()==="additive"||mr?Xt.selected()?Xt.unselect(["tapunselect"]):Xt.select(["tapselect"]):mr||(lt.$(t).unmerge(Xt).unselect(["tapunselect"]),Xt.select(["tapselect"]))),r.redrawHint("eles",!0)),r.hoverData.selecting){var nr=lt.collection(r.getAllInBox(ft[0],ft[1],ft[2],ft[3]));r.redrawHint("select",!0),nr.length>0&&r.redrawHint("eles",!0),lt.emit({type:"boxend",originalEvent:me,position:{x:ct[0],y:ct[1]}});var tr=function(fn){return fn.selectable()&&!fn.selected()};lt.selectionType()==="additive"||mr||lt.$(t).unmerge(nr).unselect(),nr.emit("box").stdFilter(tr).select().emit("boxselect"),r.redraw()}if(r.hoverData.dragging&&(r.hoverData.dragging=!1,r.redrawHint("select",!0),r.redrawHint("eles",!0),r.redraw()),!ft[4]){r.redrawHint("drag",!0),r.redrawHint("eles",!0);var lr=Qt&&Qt.grabbed();y(pt),lr&&(Qt.emit("freeon"),pt.emit("free"),r.dragData.didDrag&&(Qt.emit("dragfreeon"),pt.emit("dragfree")))}}ft[4]=0,r.hoverData.down=null,r.hoverData.cxtStarted=!1,r.hoverData.draggingEles=!1,r.hoverData.selecting=!1,r.hoverData.isOverThresholdDrag=!1,r.dragData.didDrag=!1,r.hoverData.dragged=!1,r.hoverData.dragDelta=[],r.hoverData.mdownPos=null,r.hoverData.mdownGPos=null,r.hoverData.which=null}}},!1);var Z=[],Q=4,re,ee=1e5,ue=function(me,nt){for(var lt=0;lt<me.length;lt++)if(me[lt]%nt!==0)return!1;return!0},de=function(me){for(var nt=Math.abs(me[0]),lt=1;lt<me.length;lt++)if(Math.abs(me[lt])!==nt)return!1;return!0},se=function(me){var nt=!1,lt=me.deltaY;if(lt==null&&(me.wheelDeltaY!=null?lt=me.wheelDeltaY/4:me.wheelDelta!=null&&(lt=me.wheelDelta/4)),re==null)if(Z.length>=Q){var ct=Z;if(re=ue(ct,5),!re){var ft=Math.abs(ct[0]);re=de(ct)&&ft>5}if(re)for(var Xt=0;Xt<ct.length;Xt++)ee=Math.min(Math.abs(ct[Xt]),ee)}else Z.push(lt),nt=!0;else re&&(ee=Math.min(Math.abs(lt),ee));if(!r.scrollingPage){var pt=r.cy,Qt=pt.zoom(),mr=pt.pan(),Rr=r.projectIntoViewport(me.clientX,me.clientY),ar=[Rr[0]*Qt+mr.x,Rr[1]*Qt+mr.y];if(r.hoverData.draggingEles||r.hoverData.dragging||r.hoverData.cxtStarted||D()){me.preventDefault();return}if(pt.panningEnabled()&&pt.userPanningEnabled()&&pt.zoomingEnabled()&&pt.userZoomingEnabled()){me.preventDefault(),r.data.wheelZooming=!0,clearTimeout(r.data.wheelTimeout),r.data.wheelTimeout=setTimeout(function(){r.data.wheelZooming=!1,r.redrawHint("eles",!0),r.redraw()},150);var nr;nt&&Math.abs(lt)>5&&(lt=xS(lt)*5),nr=lt/-250,re&&(nr/=ee,nr*=3),nr=nr*r.wheelSensitivity;var tr=me.deltaMode===1;tr&&(nr*=33);var lr=pt.zoom()*Math.pow(10,nr);me.type==="gesturechange"&&(lr=r.gestureStartZoom*me.scale),pt.zoom({level:lr,renderedPosition:{x:ar[0],y:ar[1]}}),pt.emit(me.type==="gesturechange"?"pinchzoom":"scrollzoom")}}};r.registerBinding(r.container,"wheel",se,!0),r.registerBinding(e,"scroll",function(me){r.scrollingPage=!0,clearTimeout(r.scrollingPageTimeout),r.scrollingPageTimeout=setTimeout(function(){r.scrollingPage=!1},250)},!0),r.registerBinding(r.container,"gesturestart",function(me){r.gestureStartZoom=r.cy.zoom(),r.hasTouchStarted||me.preventDefault()},!0),r.registerBinding(r.container,"gesturechange",function(dt){r.hasTouchStarted||se(dt)},!0),r.registerBinding(r.container,"mouseout",function(me){var nt=r.projectIntoViewport(me.clientX,me.clientY);r.cy.emit({originalEvent:me,type:"mouseout",position:{x:nt[0],y:nt[1]}})},!1),r.registerBinding(r.container,"mouseover",function(me){var nt=r.projectIntoViewport(me.clientX,me.clientY);r.cy.emit({originalEvent:me,type:"mouseover",position:{x:nt[0],y:nt[1]}})},!1);var be,Le,fe,ce,Ee,Ce,ke,Ie,ve,we,xe,Fe,He,at=function(me,nt,lt,ct){return Math.sqrt((lt-me)*(lt-me)+(ct-nt)*(ct-nt))},wt=function(me,nt,lt,ct){return(lt-me)*(lt-me)+(ct-nt)*(ct-nt)},it;r.registerBinding(r.container,"touchstart",it=function(me){if(r.hasTouchStarted=!0,!!L(me)){m(),r.touchData.capture=!0,r.data.bgActivePosistion=void 0;var nt=r.cy,lt=r.touchData.now,ct=r.touchData.earlier;if(me.touches[0]){var ft=r.projectIntoViewport(me.touches[0].clientX,me.touches[0].clientY);lt[0]=ft[0],lt[1]=ft[1]}if(me.touches[1]){var ft=r.projectIntoViewport(me.touches[1].clientX,me.touches[1].clientY);lt[2]=ft[0],lt[3]=ft[1]}if(me.touches[2]){var ft=r.projectIntoViewport(me.touches[2].clientX,me.touches[2].clientY);lt[4]=ft[0],lt[5]=ft[1]}if(me.touches[1]){r.touchData.singleTouchMoved=!0,y(r.dragData.touchDragEles);var Xt=r.findContainerClientCoords();ve=Xt[0],we=Xt[1],xe=Xt[2],Fe=Xt[3],be=me.touches[0].clientX-ve,Le=me.touches[0].clientY-we,fe=me.touches[1].clientX-ve,ce=me.touches[1].clientY-we,He=0<=be&&be<=xe&&0<=fe&&fe<=xe&&0<=Le&&Le<=Fe&&0<=ce&&ce<=Fe;var pt=nt.pan(),Qt=nt.zoom();Ee=at(be,Le,fe,ce),Ce=wt(be,Le,fe,ce),ke=[(be+fe)/2,(Le+ce)/2],Ie=[(ke[0]-pt.x)/Qt,(ke[1]-pt.y)/Qt];var mr=200,Rr=mr*mr;if(Ce<Rr&&!me.touches[2]){var ar=r.findNearestElement(lt[0],lt[1],!0,!0),nr=r.findNearestElement(lt[2],lt[3],!0,!0);ar&&ar.isNode()?(ar.activate().emit({originalEvent:me,type:"cxttapstart",position:{x:lt[0],y:lt[1]}}),r.touchData.start=ar):nr&&nr.isNode()?(nr.activate().emit({originalEvent:me,type:"cxttapstart",position:{x:lt[0],y:lt[1]}}),r.touchData.start=nr):nt.emit({originalEvent:me,type:"cxttapstart",position:{x:lt[0],y:lt[1]}}),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!0,r.touchData.cxtDragged=!1,r.data.bgActivePosistion=void 0,r.redraw();return}}if(me.touches[2])nt.boxSelectionEnabled()&&me.preventDefault();else if(!me.touches[1]){if(me.touches[0]){var tr=r.findNearestElements(lt[0],lt[1],!0,!0),lr=tr[0];if(lr!=null&&(lr.activate(),r.touchData.start=lr,r.touchData.starts=tr,r.nodeIsGrabbable(lr))){var Gr=r.dragData.touchDragEles=nt.collection(),fn=null;r.redrawHint("eles",!0),r.redrawHint("drag",!0),lr.selected()?(fn=nt.$(function(vn){return vn.selected()&&r.nodeIsGrabbable(vn)}),g(fn,{addToList:Gr})):_(lr,{addToList:Gr}),f(lr);var In=function(Ei){return{originalEvent:me,type:Ei,position:{x:lt[0],y:lt[1]}}};lr.emit(In("grabon")),fn?fn.forEach(function(vn){vn.emit(In("grab"))}):lr.emit(In("grab"))}i(lr,["touchstart","tapstart","vmousedown"],me,{x:lt[0],y:lt[1]}),lr==null&&(r.data.bgActivePosistion={x:ft[0],y:ft[1]},r.redrawHint("select",!0),r.redraw()),r.touchData.singleTouchMoved=!1,r.touchData.singleTouchStartTime=+new Date,clearTimeout(r.touchData.tapholdTimeout),r.touchData.tapholdTimeout=setTimeout(function(){r.touchData.singleTouchMoved===!1&&!r.pinching&&!r.touchData.selecting&&i(r.touchData.start,["taphold"],me,{x:lt[0],y:lt[1]})},r.tapholdDuration)}}if(me.touches.length>=1){for(var Un=r.touchData.startPosition=[null,null,null,null,null,null],hn=0;hn<lt.length;hn++)Un[hn]=ct[hn]=lt[hn];var $n=me.touches[0];r.touchData.startGPosition=[$n.clientX,$n.clientY]}}},!1);var H;r.registerBinding(e,"touchmove",H=function(me){var nt=r.touchData.capture;if(!(!nt&&!L(me))){var lt=r.selection,ct=r.cy,ft=r.touchData.now,Xt=r.touchData.earlier,pt=ct.zoom();if(me.touches[0]){var Qt=r.projectIntoViewport(me.touches[0].clientX,me.touches[0].clientY);ft[0]=Qt[0],ft[1]=Qt[1]}if(me.touches[1]){var Qt=r.projectIntoViewport(me.touches[1].clientX,me.touches[1].clientY);ft[2]=Qt[0],ft[3]=Qt[1]}if(me.touches[2]){var Qt=r.projectIntoViewport(me.touches[2].clientX,me.touches[2].clientY);ft[4]=Qt[0],ft[5]=Qt[1]}var mr=r.touchData.startGPosition,Rr;if(nt&&me.touches[0]&&mr){for(var ar=[],nr=0;nr<ft.length;nr++)ar[nr]=ft[nr]-Xt[nr];var tr=me.touches[0].clientX-mr[0],lr=tr*tr,Gr=me.touches[0].clientY-mr[1],fn=Gr*Gr,In=lr+fn;Rr=In>=r.touchTapThreshold2}if(nt&&r.touchData.cxt){me.preventDefault();var Un=me.touches[0].clientX-ve,hn=me.touches[0].clientY-we,$n=me.touches[1].clientX-ve,vn=me.touches[1].clientY-we,Ei=wt(Un,hn,$n,vn),Li=Ei/Ce,Fr=150,Tn=Fr*Fr,Ni=1.5,_o=Ni*Ni;if(Li>=_o||Ei>=Tn){r.touchData.cxt=!1,r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var Pi={originalEvent:me,type:"cxttapend",position:{x:ft[0],y:ft[1]}};r.touchData.start?(r.touchData.start.unactivate().emit(Pi),r.touchData.start=null):ct.emit(Pi)}}if(nt&&r.touchData.cxt){var Pi={originalEvent:me,type:"cxtdrag",position:{x:ft[0],y:ft[1]}};r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),r.touchData.start?r.touchData.start.emit(Pi):ct.emit(Pi),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxtDragged=!0;var vi=r.findNearestElement(ft[0],ft[1],!0,!0);(!r.touchData.cxtOver||vi!==r.touchData.cxtOver)&&(r.touchData.cxtOver&&r.touchData.cxtOver.emit({originalEvent:me,type:"cxtdragout",position:{x:ft[0],y:ft[1]}}),r.touchData.cxtOver=vi,vi&&vi.emit({originalEvent:me,type:"cxtdragover",position:{x:ft[0],y:ft[1]}}))}else if(nt&&me.touches[2]&&ct.boxSelectionEnabled())me.preventDefault(),r.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,r.touchData.selecting||ct.emit({originalEvent:me,type:"boxstart",position:{x:ft[0],y:ft[1]}}),r.touchData.selecting=!0,r.touchData.didSelect=!0,lt[4]=1,!lt||lt.length===0||lt[0]===void 0?(lt[0]=(ft[0]+ft[2]+ft[4])/3,lt[1]=(ft[1]+ft[3]+ft[5])/3,lt[2]=(ft[0]+ft[2]+ft[4])/3+1,lt[3]=(ft[1]+ft[3]+ft[5])/3+1):(lt[2]=(ft[0]+ft[2]+ft[4])/3,lt[3]=(ft[1]+ft[3]+ft[5])/3),r.redrawHint("select",!0),r.redraw();else if(nt&&me.touches[1]&&!r.touchData.didSelect&&ct.zoomingEnabled()&&ct.panningEnabled()&&ct.userZoomingEnabled()&&ct.userPanningEnabled()){me.preventDefault(),r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var un=r.dragData.touchDragEles;if(un){r.redrawHint("drag",!0);for(var qn=0;qn<un.length;qn++){var Ca=un[qn]._private;Ca.grabbed=!1,Ca.rscratch.inDragLayer=!1}}var pi=r.touchData.start,Un=me.touches[0].clientX-ve,hn=me.touches[0].clientY-we,$n=me.touches[1].clientX-ve,vn=me.touches[1].clientY-we,Su=at(Un,hn,$n,vn),Pa=Su/Ee;if(He){var Hi=Un-be,Ha=hn-Le,ia=$n-fe,kn=vn-ce,ui=(Hi+ia)/2,pr=(Ha+kn)/2,Aa=ct.zoom(),lo=Aa*Pa,Vr=ct.pan(),$r=Ie[0]*Aa+Vr.x,Ya=Ie[1]*Aa+Vr.y,Ys={x:-lo/Aa*($r-Vr.x-ui)+$r,y:-lo/Aa*(Ya-Vr.y-pr)+Ya};if(pi&&pi.active()){var un=r.dragData.touchDragEles;y(un),r.redrawHint("drag",!0),r.redrawHint("eles",!0),pi.unactivate().emit("freeon"),un.emit("free"),r.dragData.didDrag&&(pi.emit("dragfreeon"),un.emit("dragfree"))}ct.viewport({zoom:lo,pan:Ys,cancelOnFailedZoom:!0}),ct.emit("pinchzoom"),Ee=Su,be=Un,Le=hn,fe=$n,ce=vn,r.pinching=!0}if(me.touches[0]){var Qt=r.projectIntoViewport(me.touches[0].clientX,me.touches[0].clientY);ft[0]=Qt[0],ft[1]=Qt[1]}if(me.touches[1]){var Qt=r.projectIntoViewport(me.touches[1].clientX,me.touches[1].clientY);ft[2]=Qt[0],ft[3]=Qt[1]}if(me.touches[2]){var Qt=r.projectIntoViewport(me.touches[2].clientX,me.touches[2].clientY);ft[4]=Qt[0],ft[5]=Qt[1]}}else if(me.touches[0]&&!r.touchData.didSelect){var eo=r.touchData.start,oa=r.touchData.last,vi;if(!r.hoverData.draggingEles&&!r.swipePanning&&(vi=r.findNearestElement(ft[0],ft[1],!0,!0)),nt&&eo!=null&&me.preventDefault(),nt&&eo!=null&&r.nodeIsDraggable(eo))if(Rr){var un=r.dragData.touchDragEles,Tu=!r.dragData.didDrag;Tu&&g(un,{inDragLayer:!0}),r.dragData.didDrag=!0;var Dn={x:0,y:0};if(zt(ar[0])&&zt(ar[1])&&(Dn.x+=ar[0],Dn.y+=ar[1],Tu)){r.redrawHint("eles",!0);var Ai=r.touchData.dragDelta;Ai&&zt(Ai[0])&&zt(Ai[1])&&(Dn.x+=Ai[0],Dn.y+=Ai[1])}r.hoverData.draggingEles=!0,un.silentShift(Dn).emit("position drag"),r.redrawHint("drag",!0),r.touchData.startPosition[0]==Xt[0]&&r.touchData.startPosition[1]==Xt[1]&&r.redrawHint("eles",!0),r.redraw()}else{var Ai=r.touchData.dragDelta=r.touchData.dragDelta||[];Ai.length===0?(Ai.push(ar[0]),Ai.push(ar[1])):(Ai[0]+=ar[0],Ai[1]+=ar[1])}if(i(eo||vi,["touchmove","tapdrag","vmousemove"],me,{x:ft[0],y:ft[1]}),(!eo||!eo.grabbed())&&vi!=oa&&(oa&&oa.emit({originalEvent:me,type:"tapdragout",position:{x:ft[0],y:ft[1]}}),vi&&vi.emit({originalEvent:me,type:"tapdragover",position:{x:ft[0],y:ft[1]}})),r.touchData.last=vi,nt)for(var qn=0;qn<ft.length;qn++)ft[qn]&&r.touchData.startPosition[qn]&&Rr&&(r.touchData.singleTouchMoved=!0);if(nt&&(eo==null||eo.pannable())&&ct.panningEnabled()&&ct.userPanningEnabled()){var Yi=a(eo,r.touchData.starts);Yi&&(me.preventDefault(),r.data.bgActivePosistion||(r.data.bgActivePosistion=Jp(r.touchData.startPosition)),r.swipePanning?(ct.panBy({x:ar[0]*pt,y:ar[1]*pt}),ct.emit("dragpan")):Rr&&(r.swipePanning=!0,ct.panBy({x:tr*pt,y:Gr*pt}),ct.emit("dragpan"),eo&&(eo.unactivate(),r.redrawHint("select",!0),r.touchData.start=null)));var Qt=r.projectIntoViewport(me.touches[0].clientX,me.touches[0].clientY);ft[0]=Qt[0],ft[1]=Qt[1]}}for(var nr=0;nr<ft.length;nr++)Xt[nr]=ft[nr];nt&&me.touches.length>0&&!r.hoverData.draggingEles&&!r.swipePanning&&r.data.bgActivePosistion!=null&&(r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),r.redraw())}},!1);var $;r.registerBinding(e,"touchcancel",$=function(me){var nt=r.touchData.start;r.touchData.capture=!1,nt&&nt.unactivate()});var ne,Re,De,Be;if(r.registerBinding(e,"touchend",ne=function(me){var nt=r.touchData.start,lt=r.touchData.capture;if(lt)me.touches.length===0&&(r.touchData.capture=!1),me.preventDefault();else return;var ct=r.selection;r.swipePanning=!1,r.hoverData.draggingEles=!1;var ft=r.cy,Xt=ft.zoom(),pt=r.touchData.now,Qt=r.touchData.earlier;if(me.touches[0]){var mr=r.projectIntoViewport(me.touches[0].clientX,me.touches[0].clientY);pt[0]=mr[0],pt[1]=mr[1]}if(me.touches[1]){var mr=r.projectIntoViewport(me.touches[1].clientX,me.touches[1].clientY);pt[2]=mr[0],pt[3]=mr[1]}if(me.touches[2]){var mr=r.projectIntoViewport(me.touches[2].clientX,me.touches[2].clientY);pt[4]=mr[0],pt[5]=mr[1]}nt&&nt.unactivate();var Rr;if(r.touchData.cxt){if(Rr={originalEvent:me,type:"cxttapend",position:{x:pt[0],y:pt[1]}},nt?nt.emit(Rr):ft.emit(Rr),!r.touchData.cxtDragged){var ar={originalEvent:me,type:"cxttap",position:{x:pt[0],y:pt[1]}};nt?nt.emit(ar):ft.emit(ar)}r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!1,r.touchData.start=null,r.redraw();return}if(!me.touches[2]&&ft.boxSelectionEnabled()&&r.touchData.selecting){r.touchData.selecting=!1;var nr=ft.collection(r.getAllInBox(ct[0],ct[1],ct[2],ct[3]));ct[0]=void 0,ct[1]=void 0,ct[2]=void 0,ct[3]=void 0,ct[4]=0,r.redrawHint("select",!0),ft.emit({type:"boxend",originalEvent:me,position:{x:pt[0],y:pt[1]}});var tr=function(Tn){return Tn.selectable()&&!Tn.selected()};nr.emit("box").stdFilter(tr).select().emit("boxselect"),nr.nonempty()&&r.redrawHint("eles",!0),r.redraw()}if(nt!=null&&nt.unactivate(),me.touches[2])r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);else if(!me.touches[1]){if(!me.touches[0]){if(!me.touches[0]){r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var lr=r.dragData.touchDragEles;if(nt!=null){var Gr=nt._private.grabbed;y(lr),r.redrawHint("drag",!0),r.redrawHint("eles",!0),Gr&&(nt.emit("freeon"),lr.emit("free"),r.dragData.didDrag&&(nt.emit("dragfreeon"),lr.emit("dragfree"))),i(nt,["touchend","tapend","vmouseup","tapdragout"],me,{x:pt[0],y:pt[1]}),nt.unactivate(),r.touchData.start=null}else{var fn=r.findNearestElement(pt[0],pt[1],!0,!0);i(fn,["touchend","tapend","vmouseup","tapdragout"],me,{x:pt[0],y:pt[1]})}var In=r.touchData.startPosition[0]-pt[0],Un=In*In,hn=r.touchData.startPosition[1]-pt[1],$n=hn*hn,vn=Un+$n,Ei=vn*Xt*Xt;r.touchData.singleTouchMoved||(nt||ft.$(":selected").unselect(["tapunselect"]),i(nt,["tap","vclick"],me,{x:pt[0],y:pt[1]}),Re=!1,me.timeStamp-Be<=ft.multiClickDebounceTime()?(De&&clearTimeout(De),Re=!0,Be=null,i(nt,["dbltap","vdblclick"],me,{x:pt[0],y:pt[1]})):(De=setTimeout(function(){Re||i(nt,["onetap","voneclick"],me,{x:pt[0],y:pt[1]})},ft.multiClickDebounceTime()),Be=me.timeStamp)),nt!=null&&!r.dragData.didDrag&&nt._private.selectable&&Ei<r.touchTapThreshold2&&!r.pinching&&(ft.selectionType()==="single"?(ft.$(t).unmerge(nt).unselect(["tapunselect"]),nt.select(["tapselect"])):nt.selected()?nt.unselect(["tapunselect"]):nt.select(["tapselect"]),r.redrawHint("eles",!0)),r.touchData.singleTouchMoved=!0}}}for(var Li=0;Li<pt.length;Li++)Qt[Li]=pt[Li];r.dragData.didDrag=!1,me.touches.length===0&&(r.touchData.dragDelta=[],r.touchData.startPosition=[null,null,null,null,null,null],r.touchData.startGPosition=null,r.touchData.didSelect=!1),me.touches.length<2&&(me.touches.length===1&&(r.touchData.startGPosition=[me.touches[0].clientX,me.touches[0].clientY]),r.pinching=!1,r.redrawHint("eles",!0),r.redraw())},!1),typeof TouchEvent>"u"){var Je=[],Tt=function(me){return{clientX:me.clientX,clientY:me.clientY,force:1,identifier:me.pointerId,pageX:me.pageX,pageY:me.pageY,radiusX:me.width/2,radiusY:me.height/2,screenX:me.screenX,screenY:me.screenY,target:me.target}},Lt=function(me){return{event:me,touch:Tt(me)}},Vt=function(me){Je.push(Lt(me))},Nt=function(me){for(var nt=0;nt<Je.length;nt++){var lt=Je[nt];if(lt.event.pointerId===me.pointerId){Je.splice(nt,1);return}}},Jt=function(me){var nt=Je.filter(function(lt){return lt.event.pointerId===me.pointerId})[0];nt.event=me,nt.touch=Tt(me)},Er=function(me){me.touches=Je.map(function(nt){return nt.touch})},Yt=function(me){return me.pointerType==="mouse"||me.pointerType===4};r.registerBinding(r.container,"pointerdown",function(dt){Yt(dt)||(dt.preventDefault(),Vt(dt),Er(dt),it(dt))}),r.registerBinding(r.container,"pointerup",function(dt){Yt(dt)||(Nt(dt),Er(dt),ne(dt))}),r.registerBinding(r.container,"pointercancel",function(dt){Yt(dt)||(Nt(dt),Er(dt),$(dt))}),r.registerBinding(r.container,"pointermove",function(dt){Yt(dt)||(dt.preventDefault(),Jt(dt),Er(dt),H(dt))})}};var ah={};ah.generatePolygon=function(r,e){return this.nodeShapes[r]={renderer:this,name:r,points:e,draw:function(n,i,o,a,s,u){this.renderer.nodeShapeImpl("polygon",n,i,o,a,s,this.points)},intersectLine:function(n,i,o,a,s,u,l,c){return xy(s,u,this.points,n,i,o/2,a/2,l)},checkPoint:function(n,i,o,a,s,u,l,c){return oh(n,i,this.points,u,l,a,s,[0,-1],o)}}};ah.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,t,n,i,o,a){this.renderer.nodeShapeImpl(this.name,e,t,n,i,o)},intersectLine:function(e,t,n,i,o,a,s,u){return H5(o,a,e,t,n/2+s,i/2+s)},checkPoint:function(e,t,n,i,o,a,s,u){return jv(e,t,i,o,a,s,n)}}};ah.generateRoundPolygon=function(r,e){return this.nodeShapes[r]={renderer:this,name:r,points:e,getOrCreateCorners:function(n,i,o,a,s,u,l){if(u[l]!==void 0&&u[l+"-cx"]===n&&u[l+"-cy"]===i)return u[l];u[l]=new Array(e.length/2),u[l+"-cx"]=n,u[l+"-cy"]=i;var c=o/2,f=a/2;s=s==="auto"?jD(o,a):s;for(var h=new Array(e.length/2),d=0;d<e.length/2;d++)h[d]={x:n+c*e[d*2],y:i+f*e[d*2+1]};var v,g,_,y,p=h.length;for(g=h[p-1],v=0;v<p;v++)_=h[v%p],y=h[(v+1)%p],u[l][v]=jS(g,_,y,s),g=_,_=y;return u[l]},draw:function(n,i,o,a,s,u,l){this.renderer.nodeShapeImpl("round-polygon",n,i,o,a,s,this.points,this.getOrCreateCorners(i,o,a,s,u,l,"drawCorners"))},intersectLine:function(n,i,o,a,s,u,l,c,f){return Y5(s,u,this.points,n,i,o,a,l,this.getOrCreateCorners(n,i,o,a,c,f,"corners"))},checkPoint:function(n,i,o,a,s,u,l,c,f){return W5(n,i,this.points,u,l,a,s,this.getOrCreateCorners(u,l,a,s,c,f,"corners"))}}};ah.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:bs(4,0),draw:function(e,t,n,i,o,a){this.renderer.nodeShapeImpl(this.name,e,t,n,i,o,this.points,a)},intersectLine:function(e,t,n,i,o,a,s,u){return LD(o,a,e,t,n,i,s,u)},checkPoint:function(e,t,n,i,o,a,s,u){var l=i/2,c=o/2;u=u==="auto"?hd(i,o):u,u=Math.min(l,c,u);var f=u*2;return!!(oh(e,t,this.points,a,s,i,o-f,[0,-1],n)||oh(e,t,this.points,a,s,i-f,o,[0,-1],n)||jv(e,t,f,f,a-l+u,s-c+u,n)||jv(e,t,f,f,a+l-u,s-c+u,n)||jv(e,t,f,f,a+l-u,s+c-u,n)||jv(e,t,f,f,a-l+u,s+c-u,n))}}};ah.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:TS(),points:bs(4,0),draw:function(e,t,n,i,o,a){this.renderer.nodeShapeImpl(this.name,e,t,n,i,o,null,a)},generateCutTrianglePts:function(e,t,n,i,o){var a=o==="auto"?this.cornerLength:o,s=t/2,u=e/2,l=n-u,c=n+u,f=i-s,h=i+s;return{topLeft:[l,f+a,l+a,f,l+a,f+a],topRight:[c-a,f,c,f+a,c-a,f+a],bottomRight:[c,h-a,c-a,h,c-a,h-a],bottomLeft:[l+a,h,l,h-a,l+a,h-a]}},intersectLine:function(e,t,n,i,o,a,s,u){var l=this.generateCutTrianglePts(n+2*s,i+2*s,e,t,u),c=[].concat.apply([],[l.topLeft.splice(0,4),l.topRight.splice(0,4),l.bottomRight.splice(0,4),l.bottomLeft.splice(0,4)]);return xy(o,a,c,e,t)},checkPoint:function(e,t,n,i,o,a,s,u){var l=u==="auto"?this.cornerLength:u;if(oh(e,t,this.points,a,s,i,o-2*l,[0,-1],n)||oh(e,t,this.points,a,s,i-2*l,o,[0,-1],n))return!0;var c=this.generateCutTrianglePts(i,o,a,s);return qs(e,t,c.topLeft)||qs(e,t,c.topRight)||qs(e,t,c.bottomRight)||qs(e,t,c.bottomLeft)}}};ah.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:bs(4,0),draw:function(e,t,n,i,o,a){this.renderer.nodeShapeImpl(this.name,e,t,n,i,o)},intersectLine:function(e,t,n,i,o,a,s,u){var l=.15,c=.5,f=.85,h=this.generateBarrelBezierPts(n+2*s,i+2*s,e,t),d=function(_){var y=ng({x:_[0],y:_[1]},{x:_[2],y:_[3]},{x:_[4],y:_[5]},l),p=ng({x:_[0],y:_[1]},{x:_[2],y:_[3]},{x:_[4],y:_[5]},c),m=ng({x:_[0],y:_[1]},{x:_[2],y:_[3]},{x:_[4],y:_[5]},f);return[_[0],_[1],y.x,y.y,p.x,p.y,m.x,m.y,_[4],_[5]]},v=[].concat(d(h.topLeft),d(h.topRight),d(h.bottomRight),d(h.bottomLeft));return xy(o,a,v,e,t)},generateBarrelBezierPts:function(e,t,n,i){var o=t/2,a=e/2,s=n-a,u=n+a,l=i-o,c=i+o,f=Vx(e,t),h=f.heightOffset,d=f.widthOffset,v=f.ctrlPtOffsetPct*e,g={topLeft:[s,l+h,s+v,l,s+d,l],topRight:[u-d,l,u-v,l,u,l+h],bottomRight:[u,c-h,u-v,c,u-d,c],bottomLeft:[s+d,c,s+v,c,s,c-h]};return g.topLeft.isTop=!0,g.topRight.isTop=!0,g.bottomLeft.isBottom=!0,g.bottomRight.isBottom=!0,g},checkPoint:function(e,t,n,i,o,a,s,u){var l=Vx(i,o),c=l.heightOffset,f=l.widthOffset;if(oh(e,t,this.points,a,s,i,o-2*c,[0,-1],n)||oh(e,t,this.points,a,s,i-2*f,o,[0,-1],n))return!0;for(var h=this.generateBarrelBezierPts(i,o,a,s),d=function(R,D,L){var j=L[4],F=L[2],q=L[0],W=L[5],Z=L[1],Q=Math.min(j,q),re=Math.max(j,q),ee=Math.min(W,Z),ue=Math.max(W,Z);if(Q<=R&&R<=re&&ee<=D&&D<=ue){var de=X5(j,F,q),se=q5(de[0],de[1],de[2],R),be=se.filter(function(Le){return 0<=Le&&Le<=1});if(be.length>0)return be[0]}return null},v=Object.keys(h),g=0;g<v.length;g++){var _=v[g],y=h[_],p=d(e,t,y);if(p!=null){var m=y[5],E=y[3],C=y[1],P=ea(m,E,C,p);if(y.isTop&&P<=t||y.isBottom&&t<=P)return!0}}return!1}}};ah.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:bs(4,0),draw:function(e,t,n,i,o,a){this.renderer.nodeShapeImpl(this.name,e,t,n,i,o,this.points,a)},intersectLine:function(e,t,n,i,o,a,s,u){var l=e-(n/2+s),c=t-(i/2+s),f=c,h=e+(n/2+s),d=sd(o,a,e,t,l,c,h,f,!1);return d.length>0?d:LD(o,a,e,t,n,i,s,u)},checkPoint:function(e,t,n,i,o,a,s,u){u=u==="auto"?hd(i,o):u;var l=2*u;if(oh(e,t,this.points,a,s,i,o-l,[0,-1],n)||oh(e,t,this.points,a,s,i-l,o,[0,-1],n))return!0;var c=i/2+2*n,f=o/2+2*n,h=[a-c,s-f,a-c,s,a+c,s,a+c,s-f];return!!(qs(e,t,h)||jv(e,t,l,l,a+i/2-u,s+o/2-u,n)||jv(e,t,l,l,a-i/2+u,s+o/2-u,n))}}};ah.registerNodeShapes=function(){var r=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",bs(3,0)),this.generateRoundPolygon("round-triangle",bs(3,0)),this.generatePolygon("rectangle",bs(4,0)),r.square=r.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var t=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",t),this.generateRoundPolygon("round-diamond",t)}this.generatePolygon("pentagon",bs(5,0)),this.generateRoundPolygon("round-pentagon",bs(5,0)),this.generatePolygon("hexagon",bs(6,0)),this.generateRoundPolygon("round-hexagon",bs(6,0)),this.generatePolygon("heptagon",bs(7,0)),this.generateRoundPolygon("round-heptagon",bs(7,0)),this.generatePolygon("octagon",bs(8,0)),this.generateRoundPolygon("round-octagon",bs(8,0));var n=new Array(20);{var i=Gx(5,0),o=Gx(5,Math.PI/5),a=.5*(3-Math.sqrt(5));a*=1.57;for(var s=0;s<o.length/2;s++)o[s*2]*=a,o[s*2+1]*=a;for(var s=0;s<20/4;s++)n[s*4]=i[s*2],n[s*4+1]=i[s*2+1],n[s*4+2]=o[s*2],n[s*4+3]=o[s*2+1]}n=ND(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var u=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",u),this.generateRoundPolygon("round-tag",u)}r.makePolygon=function(l){var c=l.join("$"),f="polygon-"+c,h;return(h=this[f])?h:e.generatePolygon(f,l)}};var qy={};qy.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};qy.redraw=function(r){r=r||kD();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=r};qy.beforeRender=function(r,e){if(!this.destroyed){e==null&&Vi("Priority is not optional for beforeRender");var t=this.beforeRenderCallbacks;t.push({fn:r,priority:e}),t.sort(function(n,i){return i.priority-n.priority})}};var M2=function(e,t,n){for(var i=e.beforeRenderCallbacks,o=0;o<i.length;o++)i[o].fn(t,n)};qy.startRenderLoop=function(){var r=this,e=r.cy;if(!r.renderLoopStarted){r.renderLoopStarted=!0;var t=function(i){if(!r.destroyed){if(!e.batching())if(r.requestedFrame&&!r.skipFrame){M2(r,!0,i);var o=ih();r.render(r.renderOptions);var a=r.lastDrawTime=ih();r.averageRedrawTime===void 0&&(r.averageRedrawTime=a-o),r.redrawCount===void 0&&(r.redrawCount=0),r.redrawCount++,r.redrawTotalTime===void 0&&(r.redrawTotalTime=0);var s=a-o;r.redrawTotalTime+=s,r.lastRedrawTime=s,r.averageRedrawTime=r.averageRedrawTime/2+s/2,r.requestedFrame=!1}else M2(r,!1,i);r.skipFrame=!1,t0(t)}};t0(t)}};var fB=function(e){this.init(e)},NM=fB,bg=NM.prototype;bg.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];bg.init=function(r){var e=this;e.options=r,e.cy=r.cy;var t=e.container=r.cy.container(),n=e.cy.window();if(n){var i=n.document,o=i.head,a="__________cytoscape_stylesheet",s="__________cytoscape_container",u=i.getElementById(a)!=null;if(t.className.indexOf(s)<0&&(t.className=(t.className||"")+" "+s),!u){var l=i.createElement("style");l.id=a,l.textContent="."+s+" { position: relative; }",o.insertBefore(l,o.children[0])}var c=n.getComputedStyle(t),f=c.getPropertyValue("position");f==="static"&&Bn("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=r.showFps,e.debug=r.debug,e.webgl=r.webgl,e.hideEdgesOnViewport=r.hideEdgesOnViewport,e.textureOnViewport=r.textureOnViewport,e.wheelSensitivity=r.wheelSensitivity,e.motionBlurEnabled=r.motionBlur,e.forcedPixelRatio=zt(r.pixelRatio)?r.pixelRatio:null,e.motionBlur=r.motionBlur,e.motionBlurOpacity=r.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=r.desktopTapThreshold,e.desktopTapThreshold2=r.desktopTapThreshold*r.desktopTapThreshold,e.touchTapThreshold=r.touchTapThreshold,e.touchTapThreshold2=r.touchTapThreshold*r.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};bg.notify=function(r,e){var t=this,n=t.cy;if(!this.destroyed){if(r==="init"){t.load();return}if(r==="destroy"){t.destroy();return}(r==="add"||r==="remove"||r==="move"&&n.hasCompoundNodes()||r==="load"||r==="zorder"||r==="mount")&&t.invalidateCachedZSortedEles(),r==="viewport"&&t.redrawHint("select",!0),r==="gc"&&t.redrawHint("gc",!0),(r==="load"||r==="resize"||r==="mount")&&(t.invalidateContainerClientCoordsCache(),t.matchCanvasSize(t.container)),t.redrawHint("eles",!0),t.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};bg.destroy=function(){var r=this;r.destroyed=!0,r.cy.stopAnimationLoop();for(var e=0;e<r.bindings.length;e++){var t=r.bindings[e],n=t,i=n.target;(i.off||i.removeEventListener).apply(i,n.args)}if(r.bindings=[],r.beforeRenderCallbacks=[],r.onUpdateEleCalcsFns=[],r.removeObserver&&r.removeObserver.disconnect(),r.styleObserver&&r.styleObserver.disconnect(),r.resizeObserver&&r.resizeObserver.disconnect(),r.labelCalcDiv)try{document.body.removeChild(r.labelCalcDiv)}catch{}};bg.isHeadless=function(){return!1};[NS,MM,LM,mg,ah,qy].forEach(function(r){xr(bg,r)});var X_=1e3/60,jM={setupDequeueing:function(e){return function(){var n=this,i=this.renderer;if(!n.dequeueingSetup){n.dequeueingSetup=!0;var o=Ny(function(){i.redrawHint("eles",!0),i.redrawHint("drag",!0),i.redraw()},e.deqRedrawThreshold),a=function(l,c){var f=ih(),h=i.averageRedrawTime,d=i.lastRedrawTime,v=[],g=i.cy.extent(),_=i.getPixelRatio();for(l||i.flushRenderedStyleQueue();;){var y=ih(),p=y-f,m=y-c;if(d<X_){var E=X_-(l?h:0);if(m>=e.deqFastCost*E)break}else if(l){if(p>=e.deqCost*d||p>=e.deqAvgCost*h)break}else if(m>=e.deqNoDrawCost*X_)break;var C=e.deq(n,_,g);if(C.length>0)for(var P=0;P<C.length;P++)v.push(C[P]);else break}v.length>0&&(e.onDeqd(n,v),!l&&e.shouldRedraw(n,v,_,g)&&o())},s=e.priority||wS;i.beforeRender(a,s(n))}}}},hB=function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:r0;md(this,r),this.idsByKey=new rh,this.keyForId=new rh,this.cachesByLvl=new rh,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=t}return bd(r,[{key:"getIdsFor",value:function(t){t==null&&Vi("Can not get id list for null key");var n=this.idsByKey,i=this.idsByKey.get(t);return i||(i=new vg,n.set(t,i)),i}},{key:"addIdForKey",value:function(t,n){t!=null&&this.getIdsFor(t).add(n)}},{key:"deleteIdForKey",value:function(t,n){t!=null&&this.getIdsFor(t).delete(n)}},{key:"getNumberOfIdsForKey",value:function(t){return t==null?0:this.getIdsFor(t).size}},{key:"updateKeyMappingFor",value:function(t){var n=t.id(),i=this.keyForId.get(n),o=this.getKey(t);this.deleteIdForKey(i,n),this.addIdForKey(o,n),this.keyForId.set(n,o)}},{key:"deleteKeyMappingFor",value:function(t){var n=t.id(),i=this.keyForId.get(n);this.deleteIdForKey(i,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(t){var n=t.id(),i=this.keyForId.get(n),o=this.getKey(t);return i!==o}},{key:"isInvalid",value:function(t){return this.keyHasChangedFor(t)||this.doesEleInvalidateKey(t)}},{key:"getCachesAt",value:function(t){var n=this.cachesByLvl,i=this.lvls,o=n.get(t);return o||(o=new rh,n.set(t,o),i.push(t)),o}},{key:"getCache",value:function(t,n){return this.getCachesAt(n).get(t)}},{key:"get",value:function(t,n){var i=this.getKey(t),o=this.getCache(i,n);return o!=null&&this.updateKeyMappingFor(t),o}},{key:"getForCachedKey",value:function(t,n){var i=this.keyForId.get(t.id()),o=this.getCache(i,n);return o}},{key:"hasCache",value:function(t,n){return this.getCachesAt(n).has(t)}},{key:"has",value:function(t,n){var i=this.getKey(t);return this.hasCache(i,n)}},{key:"setCache",value:function(t,n,i){i.key=t,this.getCachesAt(n).set(t,i)}},{key:"set",value:function(t,n,i){var o=this.getKey(t);this.setCache(o,n,i),this.updateKeyMappingFor(t)}},{key:"deleteCache",value:function(t,n){this.getCachesAt(n).delete(t)}},{key:"delete",value:function(t,n){var i=this.getKey(t);this.deleteCache(i,n)}},{key:"invalidateKey",value:function(t){var n=this;this.lvls.forEach(function(i){return n.deleteCache(t,i)})}},{key:"invalidate",value:function(t){var n=t.id(),i=this.keyForId.get(n);this.deleteKeyMappingFor(t);var o=this.doesEleInvalidateKey(t);return o&&this.invalidateKey(i),o||this.getNumberOfIdsForKey(i)===0}}])}(),L2=25,Em=50,Wm=-4,nS=3,FM=7.99,dB=8,vB=1024,pB=1024,gB=1024,yB=.2,mB=.8,bB=10,_B=.15,wB=.1,EB=.9,OB=.9,xB=100,SB=1,tg={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},TB=Sa({getKey:null,doesEleInvalidateKey:r0,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:AD,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),uy=function(e,t){var n=this;n.renderer=e,n.onDequeues=[];var i=TB(t);xr(n,i),n.lookup=new hB(i.getKey,i.doesEleInvalidateKey),n.setupDequeueing()},Bo=uy.prototype;Bo.reasons=tg;Bo.getTextureQueue=function(r){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[r]=e.eleImgCaches[r]||[]};Bo.getRetiredTextureQueue=function(r){var e=this,t=e.eleImgCaches.retired=e.eleImgCaches.retired||{},n=t[r]=t[r]||[];return n};Bo.getElementQueue=function(){var r=this,e=r.eleCacheQueue=r.eleCacheQueue||new jy(function(t,n){return n.reqs-t.reqs});return e};Bo.getElementKeyToQueue=function(){var r=this,e=r.eleKeyToCacheQueue=r.eleKeyToCacheQueue||{};return e};Bo.getElement=function(r,e,t,n,i){var o=this,a=this.renderer,s=a.cy.zoom(),u=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!r.visible()||r.removed()||!o.allowEdgeTxrCaching&&r.isEdge()||!o.allowParentTxrCaching&&r.isParent())return null;if(n==null&&(n=Math.ceil(OS(s*t))),n<Wm)n=Wm;else if(s>=FM||n>nS)return null;var l=Math.pow(2,n),c=e.h*l,f=e.w*l,h=a.eleTextBiggerThanMin(r,l);if(!this.isVisible(r,h))return null;var d=u.get(r,n);if(d&&d.invalidated&&(d.invalidated=!1,d.texture.invalidatedWidth-=d.width),d)return d;var v;if(c<=L2?v=L2:c<=Em?v=Em:v=Math.ceil(c/Em)*Em,c>gB||f>pB)return null;var g=o.getTextureQueue(v),_=g[g.length-2],y=function(){return o.recycleTexture(v,f)||o.addTexture(v,f)};_||(_=g[g.length-1]),_||(_=y()),_.width-_.usedWidth<f&&(_=y());for(var p=function(Q){return Q&&Q.scaledLabelShown===h},m=i&&i===tg.dequeue,E=i&&i===tg.highQuality,C=i&&i===tg.downscale,P,T=n+1;T<=nS;T++){var R=u.get(r,T);if(R){P=R;break}}var D=P&&P.level===n+1?P:null,L=function(){_.context.drawImage(D.texture.canvas,D.x,0,D.width,D.height,_.usedWidth,0,f,c)};if(_.context.setTransform(1,0,0,1,0,0),_.context.clearRect(_.usedWidth,0,f,v),p(D))L();else if(p(P))if(E){for(var j=P.level;j>n;j--)D=o.getElement(r,e,t,j,tg.downscale);L()}else return o.queueElement(r,P.level-1),P;else{var F;if(!m&&!E&&!C)for(var q=n-1;q>=Wm;q--){var W=u.get(r,q);if(W){F=W;break}}if(p(F))return o.queueElement(r,n),F;_.context.translate(_.usedWidth,0),_.context.scale(l,l),this.drawElement(_.context,r,e,h,!1),_.context.scale(1/l,1/l),_.context.translate(-_.usedWidth,0)}return d={x:_.usedWidth,texture:_,level:n,scale:l,width:f,height:c,scaledLabelShown:h},_.usedWidth+=Math.ceil(f+dB),_.eleCaches.push(d),u.set(r,n,d),o.checkTextureFullness(_),d};Bo.invalidateElements=function(r){for(var e=0;e<r.length;e++)this.invalidateElement(r[e])};Bo.invalidateElement=function(r){var e=this,t=e.lookup,n=[],i=t.isInvalid(r);if(i){for(var o=Wm;o<=nS;o++){var a=t.getForCachedKey(r,o);a&&n.push(a)}var s=t.invalidate(r);if(s)for(var u=0;u<n.length;u++){var l=n[u],c=l.texture;c.invalidatedWidth+=l.width,l.invalidated=!0,e.checkTextureUtility(c)}e.removeFromQueue(r)}};Bo.checkTextureUtility=function(r){r.invalidatedWidth>=yB*r.width&&this.retireTexture(r)};Bo.checkTextureFullness=function(r){var e=this,t=e.getTextureQueue(r.height);r.usedWidth/r.width>mB&&r.fullnessChecks>=bB?fd(t,r):r.fullnessChecks++};Bo.retireTexture=function(r){var e=this,t=r.height,n=e.getTextureQueue(t),i=this.lookup;fd(n,r),r.retired=!0;for(var o=r.eleCaches,a=0;a<o.length;a++){var s=o[a];i.deleteCache(s.key,s.level)}ES(o);var u=e.getRetiredTextureQueue(t);u.push(r)};Bo.addTexture=function(r,e){var t=this,n=t.getTextureQueue(r),i={};return n.push(i),i.eleCaches=[],i.height=r,i.width=Math.max(vB,e),i.usedWidth=0,i.invalidatedWidth=0,i.fullnessChecks=0,i.canvas=t.renderer.makeOffscreenCanvas(i.width,i.height),i.context=i.canvas.getContext("2d"),i};Bo.recycleTexture=function(r,e){for(var t=this,n=t.getTextureQueue(r),i=t.getRetiredTextureQueue(r),o=0;o<i.length;o++){var a=i[o];if(a.width>=e)return a.retired=!1,a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,ES(a.eleCaches),a.context.setTransform(1,0,0,1,0,0),a.context.clearRect(0,0,a.width,a.height),fd(i,a),n.push(a),a}};Bo.queueElement=function(r,e){var t=this,n=t.getElementQueue(),i=t.getElementKeyToQueue(),o=this.getKey(r),a=i[o];if(a)a.level=Math.max(a.level,e),a.eles.merge(r),a.reqs++,n.updateItem(a);else{var s={eles:r.spawn().merge(r),level:e,reqs:1,key:o};n.push(s),i[o]=s}};Bo.dequeue=function(r){for(var e=this,t=e.getElementQueue(),n=e.getElementKeyToQueue(),i=[],o=e.lookup,a=0;a<SB&&t.size()>0;a++){var s=t.pop(),u=s.key,l=s.eles[0],c=o.hasCache(l,s.level);if(n[u]=null,c)continue;i.push(s);var f=e.getBoundingBox(l);e.getElement(l,f,r,s.level,tg.dequeue)}return i};Bo.removeFromQueue=function(r){var e=this,t=e.getElementQueue(),n=e.getElementKeyToQueue(),i=this.getKey(r),o=n[i];o!=null&&(o.eles.length===1?(o.reqs=_S,t.updateItem(o),t.pop(),n[i]=null):o.eles.unmerge(r))};Bo.onDequeue=function(r){this.onDequeues.push(r)};Bo.offDequeue=function(r){fd(this.onDequeues,r)};Bo.setupDequeueing=jM.setupDequeueing({deqRedrawThreshold:xB,deqCost:_B,deqAvgCost:wB,deqNoDrawCost:EB,deqFastCost:OB,deq:function(e,t,n){return e.dequeue(t,n)},onDeqd:function(e,t){for(var n=0;n<e.onDequeues.length;n++){var i=e.onDequeues[n];i(t)}},shouldRedraw:function(e,t,n,i){for(var o=0;o<t.length;o++)for(var a=t[o].eles,s=0;s<a.length;s++){var u=a[s].boundingBox();if(SS(u,i))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var CB=1,yy=-4,c0=2,PB=3.99,AB=50,RB=50,IB=.15,kB=.1,DB=.9,MB=.9,LB=1,N2=250,NB=4e3*4e3,j2=32767,jB=!0,BM=function(e){var t=this,n=t.renderer=e,i=n.cy;t.layersByLevel={},t.firstGet=!0,t.lastInvalidationTime=ih()-2*N2,t.skipping=!1,t.eleTxrDeqs=i.collection(),t.scheduleElementRefinement=Ny(function(){t.refineElementTextures(t.eleTxrDeqs),t.eleTxrDeqs.unmerge(t.eleTxrDeqs)},RB),n.beforeRender(function(a,s){s-t.lastInvalidationTime<=N2?t.skipping=!0:t.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var o=function(s,u){return u.reqs-s.reqs};t.layersQueue=new jy(o),t.setupDequeueing()},Ta=BM.prototype,F2=0,FB=Math.pow(2,53)-1;Ta.makeLayer=function(r,e){var t=Math.pow(2,e),n=Math.ceil(r.w*t),i=Math.ceil(r.h*t),o=this.renderer.makeOffscreenCanvas(n,i),a={id:F2=++F2%FB,bb:r,level:e,width:n,height:i,canvas:o,context:o.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=a.context,u=-a.bb.x1,l=-a.bb.y1;return s.scale(t,t),s.translate(u,l),a};Ta.getLayers=function(r,e,t){var n=this,i=n.renderer,o=i.cy,a=o.zoom(),s=n.firstGet;if(n.firstGet=!1,t==null){if(t=Math.ceil(OS(a*e)),t<yy)t=yy;else if(a>=PB||t>c0)return null}n.validateLayersElesOrdering(t,r);var u=n.layersByLevel,l=Math.pow(2,t),c=u[t]=u[t]||[],f,h=n.levelIsComplete(t,r),d,v=function(){var L=function(Z){if(n.validateLayersElesOrdering(Z,r),n.levelIsComplete(Z,r))return d=u[Z],!0},j=function(Z){if(!d)for(var Q=t+Z;yy<=Q&&Q<=c0&&!L(Q);Q+=Z);};j(1),j(-1);for(var F=c.length-1;F>=0;F--){var q=c[F];q.invalid&&fd(c,q)}};if(!h)v();else return c;var g=function(){if(!f){f=Ws();for(var L=0;L<r.length;L++)MD(f,r[L].boundingBox())}return f},_=function(L){L=L||{};var j=L.after;g();var F=Math.ceil(f.w*l),q=Math.ceil(f.h*l);if(F>j2||q>j2)return null;var W=F*q;if(W>NB)return null;var Z=n.makeLayer(f,t);if(j!=null){var Q=c.indexOf(j)+1;c.splice(Q,0,Z)}else(L.insert===void 0||L.insert)&&c.unshift(Z);return Z};if(n.skipping&&!s)return null;for(var y=null,p=r.length/CB,m=!s,E=0;E<r.length;E++){var C=r[E],P=C._private.rscratch,T=P.imgLayerCaches=P.imgLayerCaches||{},R=T[t];if(R){y=R;continue}if((!y||y.eles.length>=p||!F5(y.bb,C.boundingBox()))&&(y=_({insert:!0,after:y}),!y))return null;d||m?n.queueLayer(y,C):n.drawEleInLayer(y,C,t,e),y.eles.push(C),T[t]=y}return d||(m?null:c)};Ta.getEleLevelForLayerLevel=function(r,e){return r};Ta.drawEleInLayer=function(r,e,t,n){var i=this,o=this.renderer,a=r.context,s=e.boundingBox();s.w===0||s.h===0||!e.visible()||(t=i.getEleLevelForLayerLevel(t,n),o.setImgSmoothing(a,!1),o.drawCachedElement(a,e,null,null,t,jB),o.setImgSmoothing(a,!0))};Ta.levelIsComplete=function(r,e){var t=this,n=t.layersByLevel[r];if(!n||n.length===0)return!1;for(var i=0,o=0;o<n.length;o++){var a=n[o];if(a.reqs>0||a.invalid)return!1;i+=a.eles.length}return i===e.length};Ta.validateLayersElesOrdering=function(r,e){var t=this.layersByLevel[r];if(t)for(var n=0;n<t.length;n++){for(var i=t[n],o=-1,a=0;a<e.length;a++)if(i.eles[0]===e[a]){o=a;break}if(o<0){this.invalidateLayer(i);continue}for(var s=o,a=0;a<i.eles.length;a++)if(i.eles[a]!==e[s+a]){this.invalidateLayer(i);break}}};Ta.updateElementsInLayers=function(r,e){for(var t=this,n=ky(r[0]),i=0;i<r.length;i++)for(var o=n?null:r[i],a=n?r[i]:r[i].ele,s=a._private.rscratch,u=s.imgLayerCaches=s.imgLayerCaches||{},l=yy;l<=c0;l++){var c=u[l];c&&(o&&t.getEleLevelForLayerLevel(c.level)!==o.level||e(c,a,o))}};Ta.haveLayers=function(){for(var r=this,e=!1,t=yy;t<=c0;t++){var n=r.layersByLevel[t];if(n&&n.length>0){e=!0;break}}return e};Ta.invalidateElements=function(r){var e=this;r.length!==0&&(e.lastInvalidationTime=ih(),!(r.length===0||!e.haveLayers())&&e.updateElementsInLayers(r,function(n,i,o){e.invalidateLayer(n)}))};Ta.invalidateLayer=function(r){if(this.lastInvalidationTime=ih(),!r.invalid){var e=r.level,t=r.eles,n=this.layersByLevel[e];fd(n,r),r.elesQueue=[],r.invalid=!0,r.replacement&&(r.replacement.invalid=!0);for(var i=0;i<t.length;i++){var o=t[i]._private.rscratch.imgLayerCaches;o&&(o[e]=null)}}};Ta.refineElementTextures=function(r){var e=this;e.updateElementsInLayers(r,function(n,i,o){var a=n.replacement;if(a||(a=n.replacement=e.makeLayer(n.bb,n.level),a.replaces=n,a.eles=n.eles),!a.reqs)for(var s=0;s<a.eles.length;s++)e.queueLayer(a,a.eles[s])})};Ta.enqueueElementRefinement=function(r){this.eleTxrDeqs.merge(r),this.scheduleElementRefinement()};Ta.queueLayer=function(r,e){var t=this,n=t.layersQueue,i=r.elesQueue,o=i.hasId=i.hasId||{};if(!r.replacement){if(e){if(o[e.id()])return;i.push(e),o[e.id()]=!0}r.reqs?(r.reqs++,n.updateItem(r)):(r.reqs=1,n.push(r))}};Ta.dequeue=function(r){for(var e=this,t=e.layersQueue,n=[],i=0;i<LB&&t.size()!==0;){var o=t.peek();if(o.replacement){t.pop();continue}if(o.replaces&&o!==o.replaces.replacement){t.pop();continue}if(o.invalid){t.pop();continue}var a=o.elesQueue.shift();a&&(e.drawEleInLayer(o,a,o.level,r),i++),n.length===0&&n.push(!0),o.elesQueue.length===0&&(t.pop(),o.reqs=0,o.replaces&&e.applyLayerReplacement(o),e.requestRedraw())}return n};Ta.applyLayerReplacement=function(r){var e=this,t=e.layersByLevel[r.level],n=r.replaces,i=t.indexOf(n);if(!(i<0||n.invalid)){t[i]=r;for(var o=0;o<r.eles.length;o++){var a=r.eles[o]._private,s=a.imgLayerCaches=a.imgLayerCaches||{};s&&(s[r.level]=r)}e.requestRedraw()}};Ta.requestRedraw=Ny(function(){var r=this.renderer;r.redrawHint("eles",!0),r.redrawHint("drag",!0),r.redraw()},100);Ta.setupDequeueing=jM.setupDequeueing({deqRedrawThreshold:AB,deqCost:IB,deqAvgCost:kB,deqNoDrawCost:DB,deqFastCost:MB,deq:function(e,t){return e.dequeue(t)},onDeqd:wS,shouldRedraw:AD,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var UM={},B2;function BB(r,e){for(var t=0;t<e.length;t++){var n=e[t];r.lineTo(n.x,n.y)}}function UB(r,e,t){for(var n,i=0;i<e.length;i++){var o=e[i];i===0&&(n=o),r.lineTo(o.x,o.y)}r.quadraticCurveTo(t.x,t.y,n.x,n.y)}function U2(r,e,t){r.beginPath&&r.beginPath();for(var n=e,i=0;i<n.length;i++){var o=n[i];r.lineTo(o.x,o.y)}var a=t,s=t[0];r.moveTo(s.x,s.y);for(var i=1;i<a.length;i++){var o=a[i];r.lineTo(o.x,o.y)}r.closePath&&r.closePath()}function qB(r,e,t,n,i){r.beginPath&&r.beginPath(),r.arc(t,n,i,0,Math.PI*2,!1);var o=e,a=o[0];r.moveTo(a.x,a.y);for(var s=0;s<o.length;s++){var u=o[s];r.lineTo(u.x,u.y)}r.closePath&&r.closePath()}function zB(r,e,t,n){r.arc(e,t,n,0,Math.PI*2,!1)}UM.arrowShapeImpl=function(r){return(B2||(B2={polygon:BB,"triangle-backcurve":UB,"triangle-tee":U2,"circle-triangle":qB,"triangle-cross":U2,circle:zB}))[r]};var Jc={};Jc.drawElement=function(r,e,t,n,i,o){var a=this;e.isNode()?a.drawNode(r,e,t,n,i,o):a.drawEdge(r,e,t,n,i,o)};Jc.drawElementOverlay=function(r,e){var t=this;e.isNode()?t.drawNodeOverlay(r,e):t.drawEdgeOverlay(r,e)};Jc.drawElementUnderlay=function(r,e){var t=this;e.isNode()?t.drawNodeUnderlay(r,e):t.drawEdgeUnderlay(r,e)};Jc.drawCachedElementPortion=function(r,e,t,n,i,o,a,s){var u=this,l=t.getBoundingBox(e);if(!(l.w===0||l.h===0)){var c=t.getElement(e,l,n,i,o);if(c!=null){var f=s(u,e);if(f===0)return;var h=a(u,e),d=l.x1,v=l.y1,g=l.w,_=l.h,y,p,m,E,C;if(h!==0){var P=t.getRotationPoint(e);m=P.x,E=P.y,r.translate(m,E),r.rotate(h),C=u.getImgSmoothing(r),C||u.setImgSmoothing(r,!0);var T=t.getRotationOffset(e);y=T.x,p=T.y}else y=d,p=v;var R;f!==1&&(R=r.globalAlpha,r.globalAlpha=R*f),r.drawImage(c.texture.canvas,c.x,0,c.width,c.height,y,p,g,_),f!==1&&(r.globalAlpha=R),h!==0&&(r.rotate(-h),r.translate(-m,-E),C||u.setImgSmoothing(r,!1))}else t.drawElement(r,e)}};var GB=function(){return 0},VB=function(e,t){return e.getTextAngle(t,null)},WB=function(e,t){return e.getTextAngle(t,"source")},HB=function(e,t){return e.getTextAngle(t,"target")},YB=function(e,t){return t.effectiveOpacity()},$_=function(e,t){return t.pstyle("text-opacity").pfValue*t.effectiveOpacity()};Jc.drawCachedElement=function(r,e,t,n,i,o){var a=this,s=a.data,u=s.eleTxrCache,l=s.lblTxrCache,c=s.slbTxrCache,f=s.tlbTxrCache,h=e.boundingBox(),d=o===!0?u.reasons.highQuality:null;if(!(h.w===0||h.h===0||!e.visible())&&(!n||SS(h,n))){var v=e.isEdge(),g=e.element()._private.rscratch.badLine;a.drawElementUnderlay(r,e),a.drawCachedElementPortion(r,e,u,t,i,d,GB,YB),(!v||!g)&&a.drawCachedElementPortion(r,e,l,t,i,d,VB,$_),v&&!g&&(a.drawCachedElementPortion(r,e,c,t,i,d,WB,$_),a.drawCachedElementPortion(r,e,f,t,i,d,HB,$_)),a.drawElementOverlay(r,e)}};Jc.drawElements=function(r,e){for(var t=this,n=0;n<e.length;n++){var i=e[n];t.drawElement(r,i)}};Jc.drawCachedElements=function(r,e,t,n){for(var i=this,o=0;o<e.length;o++){var a=e[o];i.drawCachedElement(r,a,t,n)}};Jc.drawCachedNodes=function(r,e,t,n){for(var i=this,o=0;o<e.length;o++){var a=e[o];a.isNode()&&i.drawCachedElement(r,a,t,n)}};Jc.drawLayeredElements=function(r,e,t,n){var i=this,o=i.data.lyrTxrCache.getLayers(e,t);if(o)for(var a=0;a<o.length;a++){var s=o[a],u=s.bb;u.w===0||u.h===0||r.drawImage(s.canvas,u.x1,u.y1,u.w,u.h)}else i.drawCachedElements(r,e,t,n)};var sh={};sh.drawEdge=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,a=this,s=e._private.rscratch;if(!(o&&!e.visible())&&!(s.badLine||s.allpts==null||isNaN(s.allpts[0]))){var u;t&&(u=t,r.translate(-u.x1,-u.y1));var l=o?e.pstyle("opacity").value:1,c=o?e.pstyle("line-opacity").value:1,f=e.pstyle("curve-style").value,h=e.pstyle("line-style").value,d=e.pstyle("width").pfValue,v=e.pstyle("line-cap").value,g=e.pstyle("line-outline-width").value,_=e.pstyle("line-outline-color").value,y=l*c,p=l*c,m=function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y;f==="straight-triangle"?(a.eleStrokeStyle(r,e,Z),a.drawEdgeTrianglePath(e,r,s.allpts)):(r.lineWidth=d,r.lineCap=v,a.eleStrokeStyle(r,e,Z),a.drawEdgePath(e,r,s.allpts,h),r.lineCap="butt")},E=function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y;if(r.lineWidth=d+g,r.lineCap=v,g>0)a.colorStrokeStyle(r,_[0],_[1],_[2],Z);else{r.lineCap="butt";return}f==="straight-triangle"?a.drawEdgeTrianglePath(e,r,s.allpts):(a.drawEdgePath(e,r,s.allpts,h),r.lineCap="butt")},C=function(){i&&a.drawEdgeOverlay(r,e)},P=function(){i&&a.drawEdgeUnderlay(r,e)},T=function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p;a.drawArrowheads(r,e,Z)},R=function(){a.drawElementText(r,e,null,n)};r.lineJoin="round";var D=e.pstyle("ghost").value==="yes";if(D){var L=e.pstyle("ghost-offset-x").pfValue,j=e.pstyle("ghost-offset-y").pfValue,F=e.pstyle("ghost-opacity").value,q=y*F;r.translate(L,j),m(q),T(q),r.translate(-L,-j)}else E();P(),m(),T(),C(),R(),t&&r.translate(u.x1,u.y1)}};var qM=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n){if(n.visible()){var i=n.pstyle("".concat(e,"-opacity")).value;if(i!==0){var o=this,a=o.usePaths(),s=n._private.rscratch,u=n.pstyle("".concat(e,"-padding")).pfValue,l=2*u,c=n.pstyle("".concat(e,"-color")).value;t.lineWidth=l,s.edgeType==="self"&&!a?t.lineCap="butt":t.lineCap="round",o.colorStrokeStyle(t,c[0],c[1],c[2],i),o.drawEdgePath(n,t,s.allpts,"solid")}}}};sh.drawEdgeOverlay=qM("overlay");sh.drawEdgeUnderlay=qM("underlay");sh.drawEdgePath=function(r,e,t,n){var i=r._private.rscratch,o=e,a,s=!1,u=this.usePaths(),l=r.pstyle("line-dash-pattern").pfValue,c=r.pstyle("line-dash-offset").pfValue;if(u){var f=t.join("$"),h=i.pathCacheKey&&i.pathCacheKey===f;h?(a=e=i.pathCache,s=!0):(a=e=new Path2D,i.pathCacheKey=f,i.pathCache=a)}if(o.setLineDash)switch(n){case"dotted":o.setLineDash([1,1]);break;case"dashed":o.setLineDash(l),o.lineDashOffset=c;break;case"solid":o.setLineDash([]);break}if(!s&&!i.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(t[0],t[1]),i.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var d=2;d+3<t.length;d+=4)e.quadraticCurveTo(t[d],t[d+1],t[d+2],t[d+3]);break;case"straight":case"haystack":for(var v=2;v+1<t.length;v+=2)e.lineTo(t[v],t[v+1]);break;case"segments":if(i.isRound){var g=Gs(i.roundCorners),_;try{for(g.s();!(_=g.n()).done;){var y=_.value;AM(e,y)}}catch(m){g.e(m)}finally{g.f()}e.lineTo(t[t.length-2],t[t.length-1])}else for(var p=2;p+1<t.length;p+=2)e.lineTo(t[p],t[p+1]);break}e=o,u?e.stroke(a):e.stroke(),e.setLineDash&&e.setLineDash([])};sh.drawEdgeTrianglePath=function(r,e,t){e.fillStyle=e.strokeStyle;for(var n=r.pstyle("width").pfValue,i=0;i+1<t.length;i+=2){var o=[t[i+2]-t[i],t[i+3]-t[i+1]],a=Math.sqrt(o[0]*o[0]+o[1]*o[1]),s=[o[1]/a,-o[0]/a],u=[s[0]*n/2,s[1]*n/2];e.beginPath(),e.moveTo(t[i]-u[0],t[i+1]-u[1]),e.lineTo(t[i]+u[0],t[i+1]+u[1]),e.lineTo(t[i+2],t[i+3]),e.closePath(),e.fill()}};sh.drawArrowheads=function(r,e,t){var n=e._private.rscratch,i=n.edgeType==="haystack";i||this.drawArrowhead(r,e,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,t),this.drawArrowhead(r,e,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,t),this.drawArrowhead(r,e,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,t),i||this.drawArrowhead(r,e,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,t)};sh.drawArrowhead=function(r,e,t,n,i,o,a){if(!(isNaN(n)||n==null||isNaN(i)||i==null||isNaN(o)||o==null)){var s=this,u=e.pstyle(t+"-arrow-shape").value;if(u!=="none"){var l=e.pstyle(t+"-arrow-fill").value==="hollow"?"both":"filled",c=e.pstyle(t+"-arrow-fill").value,f=e.pstyle("width").pfValue,h=e.pstyle(t+"-arrow-width"),d=h.value==="match-line"?f:h.pfValue;h.units==="%"&&(d*=f);var v=e.pstyle("opacity").value;a===void 0&&(a=v);var g=r.globalCompositeOperation;(a!==1||c==="hollow")&&(r.globalCompositeOperation="destination-out",s.colorFillStyle(r,255,255,255,1),s.colorStrokeStyle(r,255,255,255,1),s.drawArrowShape(e,r,l,f,u,d,n,i,o),r.globalCompositeOperation=g);var _=e.pstyle(t+"-arrow-color").value;s.colorFillStyle(r,_[0],_[1],_[2],a),s.colorStrokeStyle(r,_[0],_[1],_[2],a),s.drawArrowShape(e,r,c,f,u,d,n,i,o)}}};sh.drawArrowShape=function(r,e,t,n,i,o,a,s,u){var l=this,c=this.usePaths()&&i!=="triangle-cross",f=!1,h,d=e,v={x:a,y:s},g=r.pstyle("arrow-scale").value,_=this.getArrowWidth(n,g),y=l.arrowShapes[i];if(c){var p=l.arrowPathCache=l.arrowPathCache||[],m=Uv(i),E=p[m];E!=null?(h=e=E,f=!0):(h=e=new Path2D,p[m]=h)}f||(e.beginPath&&e.beginPath(),c?y.draw(e,1,0,{x:0,y:0},1):y.draw(e,_,u,v,n),e.closePath&&e.closePath()),e=d,c&&(e.translate(a,s),e.rotate(u),e.scale(_,_)),(t==="filled"||t==="both")&&(c?e.fill(h):e.fill()),(t==="hollow"||t==="both")&&(e.lineWidth=o/(c?_:1),e.lineJoin="miter",c?e.stroke(h):e.stroke()),c&&(e.scale(1/_,1/_),e.rotate(-u),e.translate(-a,-s))};var BS={};BS.safeDrawImage=function(r,e,t,n,i,o,a,s,u,l){if(!(i<=0||o<=0||u<=0||l<=0))try{r.drawImage(e,t,n,i,o,a,s,u,l)}catch(c){Bn(c)}};BS.drawInscribedImage=function(r,e,t,n,i){var o=this,a=t.position(),s=a.x,u=a.y,l=t.cy().style(),c=l.getIndexedStyle.bind(l),f=c(t,"background-fit","value",n),h=c(t,"background-repeat","value",n),d=t.width(),v=t.height(),g=t.padding()*2,_=d+(c(t,"background-width-relative-to","value",n)==="inner"?0:g),y=v+(c(t,"background-height-relative-to","value",n)==="inner"?0:g),p=t._private.rscratch,m=c(t,"background-clip","value",n),E=m==="node",C=c(t,"background-image-opacity","value",n)*i,P=c(t,"background-image-smoothing","value",n),T=t.pstyle("corner-radius").value;T!=="auto"&&(T=t.pstyle("corner-radius").pfValue);var R=e.width||e.cachedW,D=e.height||e.cachedH;(R==null||D==null)&&(document.body.appendChild(e),R=e.cachedW=e.width||e.offsetWidth,D=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var L=R,j=D;if(c(t,"background-width","value",n)!=="auto"&&(c(t,"background-width","units",n)==="%"?L=c(t,"background-width","pfValue",n)*_:L=c(t,"background-width","pfValue",n)),c(t,"background-height","value",n)!=="auto"&&(c(t,"background-height","units",n)==="%"?j=c(t,"background-height","pfValue",n)*y:j=c(t,"background-height","pfValue",n)),!(L===0||j===0)){if(f==="contain"){var F=Math.min(_/L,y/j);L*=F,j*=F}else if(f==="cover"){var F=Math.max(_/L,y/j);L*=F,j*=F}var q=s-_/2,W=c(t,"background-position-x","units",n),Z=c(t,"background-position-x","pfValue",n);W==="%"?q+=(_-L)*Z:q+=Z;var Q=c(t,"background-offset-x","units",n),re=c(t,"background-offset-x","pfValue",n);Q==="%"?q+=(_-L)*re:q+=re;var ee=u-y/2,ue=c(t,"background-position-y","units",n),de=c(t,"background-position-y","pfValue",n);ue==="%"?ee+=(y-j)*de:ee+=de;var se=c(t,"background-offset-y","units",n),be=c(t,"background-offset-y","pfValue",n);se==="%"?ee+=(y-j)*be:ee+=be,p.pathCache&&(q-=s,ee-=u,s=0,u=0);var Le=r.globalAlpha;r.globalAlpha=C;var fe=o.getImgSmoothing(r),ce=!1;if(P==="no"&&fe?(o.setImgSmoothing(r,!1),ce=!0):P==="yes"&&!fe&&(o.setImgSmoothing(r,!0),ce=!0),h==="no-repeat")E&&(r.save(),p.pathCache?r.clip(p.pathCache):(o.nodeShapes[o.getNodeShape(t)].draw(r,s,u,_,y,T,p),r.clip())),o.safeDrawImage(r,e,0,0,R,D,q,ee,L,j),E&&r.restore();else{var Ee=r.createPattern(e,h);r.fillStyle=Ee,o.nodeShapes[o.getNodeShape(t)].draw(r,s,u,_,y,T,p),r.translate(q,ee),r.fill(),r.translate(-q,-ee)}r.globalAlpha=Le,ce&&o.setImgSmoothing(r,fe)}};var Yv={};Yv.eleTextBiggerThanMin=function(r,e){if(!e){var t=r.cy().zoom(),n=this.getPixelRatio(),i=Math.ceil(OS(t*n));e=Math.pow(2,i)}var o=r.pstyle("font-size").pfValue*e,a=r.pstyle("min-zoomed-font-size").pfValue;return!(o<a)};Yv.drawElementText=function(r,e,t,n,i){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,a=this;if(n==null){if(o&&!a.eleTextBiggerThanMin(e))return}else if(n===!1)return;if(e.isNode()){var s=e.pstyle("label");if(!s||!s.value)return;var u=a.getLabelJustification(e);r.textAlign=u,r.textBaseline="bottom"}else{var l=e.element()._private.rscratch.badLine,c=e.pstyle("label"),f=e.pstyle("source-label"),h=e.pstyle("target-label");if(l||(!c||!c.value)&&(!f||!f.value)&&(!h||!h.value))return;r.textAlign="center",r.textBaseline="bottom"}var d=!t,v;t&&(v=t,r.translate(-v.x1,-v.y1)),i==null?(a.drawText(r,e,null,d,o),e.isEdge()&&(a.drawText(r,e,"source",d,o),a.drawText(r,e,"target",d,o))):a.drawText(r,e,i,d,o),t&&r.translate(v.x1,v.y1)};Yv.getFontCache=function(r){var e;this.fontCaches=this.fontCaches||[];for(var t=0;t<this.fontCaches.length;t++)if(e=this.fontCaches[t],e.context===r)return e;return e={context:r},this.fontCaches.push(e),e};Yv.setupTextStyle=function(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=e.pstyle("font-style").strValue,i=e.pstyle("font-size").pfValue+"px",o=e.pstyle("font-family").strValue,a=e.pstyle("font-weight").strValue,s=t?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,u=e.pstyle("text-outline-opacity").value*s,l=e.pstyle("color").value,c=e.pstyle("text-outline-color").value;r.font=n+" "+a+" "+i+" "+o,r.lineJoin="round",this.colorFillStyle(r,l[0],l[1],l[2],s),this.colorStrokeStyle(r,c[0],c[1],c[2],u)};function K_(r,e,t,n,i){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,a=arguments.length>6?arguments[6]:void 0;r.beginPath(),r.moveTo(e+o,t),r.lineTo(e+n-o,t),r.quadraticCurveTo(e+n,t,e+n,t+o),r.lineTo(e+n,t+i-o),r.quadraticCurveTo(e+n,t+i,e+n-o,t+i),r.lineTo(e+o,t+i),r.quadraticCurveTo(e,t+i,e,t+i-o),r.lineTo(e,t+o),r.quadraticCurveTo(e,t,e+o,t),r.closePath(),a?r.stroke():r.fill()}Yv.getTextAngle=function(r,e){var t,n=r._private,i=n.rscratch,o=e?e+"-":"",a=r.pstyle(o+"text-rotation");if(a.strValue==="autorotate"){var s=Us(i,"labelAngle",e);t=r.isEdge()?s:0}else a.strValue==="none"?t=0:t=a.pfValue;return t};Yv.drawText=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=e._private,a=o.rscratch,s=i?e.effectiveOpacity():1;if(!(i&&(s===0||e.pstyle("text-opacity").value===0))){t==="main"&&(t=null);var u=Us(a,"labelX",t),l=Us(a,"labelY",t),c,f,h=this.getLabelText(e,t);if(h!=null&&h!==""&&!isNaN(u)&&!isNaN(l)){this.setupTextStyle(r,e,i);var d=t?t+"-":"",v=Us(a,"labelWidth",t),g=Us(a,"labelHeight",t),_=e.pstyle(d+"text-margin-x").pfValue,y=e.pstyle(d+"text-margin-y").pfValue,p=e.isEdge(),m=e.pstyle("text-halign").value,E=e.pstyle("text-valign").value;p&&(m="center",E="center"),u+=_,l+=y;var C;switch(n?C=this.getTextAngle(e,t):C=0,C!==0&&(c=u,f=l,r.translate(c,f),r.rotate(C),u=0,l=0),E){case"top":break;case"center":l+=g/2;break;case"bottom":l+=g;break}var P=e.pstyle("text-background-opacity").value,T=e.pstyle("text-border-opacity").value,R=e.pstyle("text-border-width").pfValue,D=e.pstyle("text-background-padding").pfValue,L=e.pstyle("text-background-shape").strValue,j=L.indexOf("round")===0,F=2;if(P>0||R>0&&T>0){var q=u-D;switch(m){case"left":q-=v;break;case"center":q-=v/2;break}var W=l-g-D,Z=v+2*D,Q=g+2*D;if(P>0){var re=r.fillStyle,ee=e.pstyle("text-background-color").value;r.fillStyle="rgba("+ee[0]+","+ee[1]+","+ee[2]+","+P*s+")",j?K_(r,q,W,Z,Q,F):r.fillRect(q,W,Z,Q),r.fillStyle=re}if(R>0&&T>0){var ue=r.strokeStyle,de=r.lineWidth,se=e.pstyle("text-border-color").value,be=e.pstyle("text-border-style").value;if(r.strokeStyle="rgba("+se[0]+","+se[1]+","+se[2]+","+T*s+")",r.lineWidth=R,r.setLineDash)switch(be){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash([4,2]);break;case"double":r.lineWidth=R/4,r.setLineDash([]);break;case"solid":r.setLineDash([]);break}if(j?K_(r,q,W,Z,Q,F,"stroke"):r.strokeRect(q,W,Z,Q),be==="double"){var Le=R/2;j?K_(r,q+Le,W+Le,Z-Le*2,Q-Le*2,F,"stroke"):r.strokeRect(q+Le,W+Le,Z-Le*2,Q-Le*2)}r.setLineDash&&r.setLineDash([]),r.lineWidth=de,r.strokeStyle=ue}}var fe=2*e.pstyle("text-outline-width").pfValue;if(fe>0&&(r.lineWidth=fe),e.pstyle("text-wrap").value==="wrap"){var ce=Us(a,"labelWrapCachedLines",t),Ee=Us(a,"labelLineHeight",t),Ce=v/2,ke=this.getLabelJustification(e);switch(ke==="auto"||(m==="left"?ke==="left"?u+=-v:ke==="center"&&(u+=-Ce):m==="center"?ke==="left"?u+=-Ce:ke==="right"&&(u+=Ce):m==="right"&&(ke==="center"?u+=Ce:ke==="right"&&(u+=v))),E){case"top":l-=(ce.length-1)*Ee;break;case"center":case"bottom":l-=(ce.length-1)*Ee;break}for(var Ie=0;Ie<ce.length;Ie++)fe>0&&r.strokeText(ce[Ie],u,l),r.fillText(ce[Ie],u,l),l+=Ee}else fe>0&&r.strokeText(h,u,l),r.fillText(h,u,l);C!==0&&(r.rotate(-C),r.translate(-c,-f))}}};var wd={};wd.drawNode=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,a=this,s,u,l=e._private,c=l.rscratch,f=e.position();if(!(!zt(f.x)||!zt(f.y))&&!(o&&!e.visible())){var h=o?e.effectiveOpacity():1,d=a.usePaths(),v,g=!1,_=e.padding();s=e.width()+2*_,u=e.height()+2*_;var y;t&&(y=t,r.translate(-y.x1,-y.y1));for(var p=e.pstyle("background-image"),m=p.value,E=new Array(m.length),C=new Array(m.length),P=0,T=0;T<m.length;T++){var R=m[T],D=E[T]=R!=null&&R!=="none";if(D){var L=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",T);P++,C[T]=a.getCachedImage(R,L,function(){l.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var j=e.pstyle("background-blacken").value,F=e.pstyle("border-width").pfValue,q=e.pstyle("background-opacity").value*h,W=e.pstyle("border-color").value,Z=e.pstyle("border-style").value,Q=e.pstyle("border-join").value,re=e.pstyle("border-cap").value,ee=e.pstyle("border-position").value,ue=e.pstyle("border-dash-pattern").pfValue,de=e.pstyle("border-dash-offset").pfValue,se=e.pstyle("border-opacity").value*h,be=e.pstyle("outline-width").pfValue,Le=e.pstyle("outline-color").value,fe=e.pstyle("outline-style").value,ce=e.pstyle("outline-opacity").value*h,Ee=e.pstyle("outline-offset").value,Ce=e.pstyle("corner-radius").value;Ce!=="auto"&&(Ce=e.pstyle("corner-radius").pfValue);var ke=function(){var Yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:q;a.eleFillStyle(r,e,Yt)},Ie=function(){var Yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:se;a.colorStrokeStyle(r,W[0],W[1],W[2],Yt)},ve=function(){var Yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ce;a.colorStrokeStyle(r,Le[0],Le[1],Le[2],Yt)},we=function(Yt,dt,me,nt){var lt=a.nodePathCache=a.nodePathCache||[],ct=PD(me==="polygon"?me+","+nt.join(","):me,""+dt,""+Yt,""+Ce),ft=lt[ct],Xt,pt=!1;return ft!=null?(Xt=ft,pt=!0,c.pathCache=Xt):(Xt=new Path2D,lt[ct]=c.pathCache=Xt),{path:Xt,cacheHit:pt}},xe=e.pstyle("shape").strValue,Fe=e.pstyle("shape-polygon-points").pfValue;if(d){r.translate(f.x,f.y);var He=we(s,u,xe,Fe);v=He.path,g=He.cacheHit}var at=function(){if(!g){var Yt=f;d&&(Yt={x:0,y:0}),a.nodeShapes[a.getNodeShape(e)].draw(v||r,Yt.x,Yt.y,s,u,Ce,c)}d?r.fill(v):r.fill()},wt=function(){for(var Yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h,dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,me=l.backgrounding,nt=0,lt=0;lt<C.length;lt++){var ct=e.cy().style().getIndexedStyle(e,"background-image-containment","value",lt);if(dt&&ct==="over"||!dt&&ct==="inside"){nt++;continue}E[lt]&&C[lt].complete&&!C[lt].error&&(nt++,a.drawInscribedImage(r,C[lt],e,lt,Yt))}l.backgrounding=nt!==P,me!==l.backgrounding&&e.updateStyle(!1)},it=function(){var Yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h;a.hasPie(e)&&(a.drawPie(r,e,dt),Yt&&(d||a.nodeShapes[a.getNodeShape(e)].draw(r,f.x,f.y,s,u,Ce,c)))},H=function(){var Yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h;a.hasStripe(e)&&(r.save(),d?r.clip(c.pathCache):(a.nodeShapes[a.getNodeShape(e)].draw(r,f.x,f.y,s,u,Ce,c),r.clip()),a.drawStripe(r,e,dt),r.restore(),Yt&&(d||a.nodeShapes[a.getNodeShape(e)].draw(r,f.x,f.y,s,u,Ce,c)))},$=function(){var Yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h,dt=(j>0?j:-j)*Yt,me=j>0?0:255;j!==0&&(a.colorFillStyle(r,me,me,me,dt),d?r.fill(v):r.fill())},ne=function(){if(F>0){if(r.lineWidth=F,r.lineCap=re,r.lineJoin=Q,r.setLineDash)switch(Z){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash(ue),r.lineDashOffset=de;break;case"solid":case"double":r.setLineDash([]);break}if(ee!=="center"){if(r.save(),r.lineWidth*=2,ee==="inside")d?r.clip(v):r.clip();else{var Yt=new Path2D;Yt.rect(-s/2-F,-u/2-F,s+2*F,u+2*F),Yt.addPath(v),r.clip(Yt,"evenodd")}d?r.stroke(v):r.stroke(),r.restore()}else d?r.stroke(v):r.stroke();if(Z==="double"){r.lineWidth=F/3;var dt=r.globalCompositeOperation;r.globalCompositeOperation="destination-out",d?r.stroke(v):r.stroke(),r.globalCompositeOperation=dt}r.setLineDash&&r.setLineDash([])}},Re=function(){if(be>0){if(r.lineWidth=be,r.lineCap="butt",r.setLineDash)switch(fe){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash([4,2]);break;case"solid":case"double":r.setLineDash([]);break}var Yt=f;d&&(Yt={x:0,y:0});var dt=a.getNodeShape(e),me=F;ee==="inside"&&(me=0),ee==="outside"&&(me*=2);var nt=(s+me+(be+Ee))/s,lt=(u+me+(be+Ee))/u,ct=s*nt,ft=u*lt,Xt=a.nodeShapes[dt].points,pt;if(d){var Qt=we(ct,ft,dt,Xt);pt=Qt.path}if(dt==="ellipse")a.drawEllipsePath(pt||r,Yt.x,Yt.y,ct,ft);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(dt)){var mr=0,Rr=0,ar=0;dt==="round-diamond"?mr=(me+Ee+be)*1.4:dt==="round-heptagon"?(mr=(me+Ee+be)*1.075,ar=-(me/2+Ee+be)/35):dt==="round-hexagon"?mr=(me+Ee+be)*1.12:dt==="round-pentagon"?(mr=(me+Ee+be)*1.13,ar=-(me/2+Ee+be)/15):dt==="round-tag"?(mr=(me+Ee+be)*1.12,Rr=(me/2+be+Ee)*.07):dt==="round-triangle"&&(mr=(me+Ee+be)*(Math.PI/2),ar=-(me+Ee/2+be)/Math.PI),mr!==0&&(nt=(s+mr)/s,ct=s*nt,["round-hexagon","round-tag"].includes(dt)||(lt=(u+mr)/u,ft=u*lt)),Ce=Ce==="auto"?jD(ct,ft):Ce;for(var nr=ct/2,tr=ft/2,lr=Ce+(me+be+Ee)/2,Gr=new Array(Xt.length/2),fn=new Array(Xt.length/2),In=0;In<Xt.length/2;In++)Gr[In]={x:Yt.x+Rr+nr*Xt[In*2],y:Yt.y+ar+tr*Xt[In*2+1]};var Un,hn,$n,vn,Ei=Gr.length;for(hn=Gr[Ei-1],Un=0;Un<Ei;Un++)$n=Gr[Un%Ei],vn=Gr[(Un+1)%Ei],fn[Un]=jS(hn,$n,vn,lr),hn=$n,$n=vn;a.drawRoundPolygonPath(pt||r,Yt.x+Rr,Yt.y+ar,s*nt,u*lt,Xt,fn)}else if(["roundrectangle","round-rectangle"].includes(dt))Ce=Ce==="auto"?hd(ct,ft):Ce,a.drawRoundRectanglePath(pt||r,Yt.x,Yt.y,ct,ft,Ce+(me+be+Ee)/2);else if(["cutrectangle","cut-rectangle"].includes(dt))Ce=Ce==="auto"?TS():Ce,a.drawCutRectanglePath(pt||r,Yt.x,Yt.y,ct,ft,null,Ce+(me+be+Ee)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(dt))Ce=Ce==="auto"?hd(ct,ft):Ce,a.drawBottomRoundRectanglePath(pt||r,Yt.x,Yt.y,ct,ft,Ce+(me+be+Ee)/2);else if(dt==="barrel")a.drawBarrelPath(pt||r,Yt.x,Yt.y,ct,ft);else if(dt.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(dt)){var Li=(me+be+Ee)/s;Xt=n0(i0(Xt,Li)),a.drawPolygonPath(pt||r,Yt.x,Yt.y,s,u,Xt)}else{var Fr=(me+be+Ee)/s;Xt=n0(i0(Xt,-Fr)),a.drawPolygonPath(pt||r,Yt.x,Yt.y,s,u,Xt)}if(d?r.stroke(pt):r.stroke(),fe==="double"){r.lineWidth=me/3;var Tn=r.globalCompositeOperation;r.globalCompositeOperation="destination-out",d?r.stroke(pt):r.stroke(),r.globalCompositeOperation=Tn}r.setLineDash&&r.setLineDash([])}},De=function(){i&&a.drawNodeOverlay(r,e,f,s,u)},Be=function(){i&&a.drawNodeUnderlay(r,e,f,s,u)},Je=function(){a.drawElementText(r,e,null,n)},Tt=e.pstyle("ghost").value==="yes";if(Tt){var Lt=e.pstyle("ghost-offset-x").pfValue,Vt=e.pstyle("ghost-offset-y").pfValue,Nt=e.pstyle("ghost-opacity").value,Jt=Nt*h;r.translate(Lt,Vt),ve(),Re(),ke(Nt*q),at(),wt(Jt,!0),Ie(Nt*se),ne(),it(j!==0||F!==0),H(j!==0||F!==0),wt(Jt,!1),$(Jt),r.translate(-Lt,-Vt)}d&&r.translate(-f.x,-f.y),Be(),d&&r.translate(f.x,f.y),ve(),Re(),ke(),at(),wt(h,!0),Ie(),ne(),it(j!==0||F!==0),H(j!==0||F!==0),wt(h,!1),$(),d&&r.translate(-f.x,-f.y),Je(),De(),t&&r.translate(y.x1,y.y1)}};var zM=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n,i,o,a){var s=this;if(n.visible()){var u=n.pstyle("".concat(e,"-padding")).pfValue,l=n.pstyle("".concat(e,"-opacity")).value,c=n.pstyle("".concat(e,"-color")).value,f=n.pstyle("".concat(e,"-shape")).value,h=n.pstyle("".concat(e,"-corner-radius")).value;if(l>0){if(i=i||n.position(),o==null||a==null){var d=n.padding();o=n.width()+2*d,a=n.height()+2*d}s.colorFillStyle(t,c[0],c[1],c[2],l),s.nodeShapes[f].draw(t,i.x,i.y,o+u*2,a+u*2,h),t.fill()}}}};wd.drawNodeOverlay=zM("overlay");wd.drawNodeUnderlay=zM("underlay");wd.hasPie=function(r){return r=r[0],r._private.hasPie};wd.hasStripe=function(r){return r=r[0],r._private.hasStripe};wd.drawPie=function(r,e,t,n){e=e[0],n=n||e.position();var i=e.cy().style(),o=e.pstyle("pie-size"),a=e.pstyle("pie-hole"),s=e.pstyle("pie-start-angle").pfValue,u=n.x,l=n.y,c=e.width(),f=e.height(),h=Math.min(c,f)/2,d,v=0,g=this.usePaths();if(g&&(u=0,l=0),o.units==="%"?h=h*o.pfValue:o.pfValue!==void 0&&(h=o.pfValue/2),a.units==="%"?d=h*a.pfValue:a.pfValue!==void 0&&(d=a.pfValue/2),!(d>=h))for(var _=1;_<=i.pieBackgroundN;_++){var y=e.pstyle("pie-"+_+"-background-size").value,p=e.pstyle("pie-"+_+"-background-color").value,m=e.pstyle("pie-"+_+"-background-opacity").value*t,E=y/100;E+v>1&&(E=1-v);var C=1.5*Math.PI+2*Math.PI*v;C+=s;var P=2*Math.PI*E,T=C+P;y===0||v>=1||v+E>1||(d===0?(r.beginPath(),r.moveTo(u,l),r.arc(u,l,h,C,T),r.closePath()):(r.beginPath(),r.arc(u,l,h,C,T),r.arc(u,l,d,T,C,!0),r.closePath()),this.colorFillStyle(r,p[0],p[1],p[2],m),r.fill(),v+=E)}};wd.drawStripe=function(r,e,t,n){e=e[0],n=n||e.position();var i=e.cy().style(),o=n.x,a=n.y,s=e.width(),u=e.height(),l=0,c=this.usePaths();r.save();var f=e.pstyle("stripe-direction").value,h=e.pstyle("stripe-size");switch(f){case"vertical":break;case"righward":r.rotate(-Math.PI/2);break}var d=s,v=u;h.units==="%"?(d=d*h.pfValue,v=v*h.pfValue):h.pfValue!==void 0&&(d=h.pfValue,v=h.pfValue),c&&(o=0,a=0),a-=d/2,o-=v/2;for(var g=1;g<=i.stripeBackgroundN;g++){var _=e.pstyle("stripe-"+g+"-background-size").value,y=e.pstyle("stripe-"+g+"-background-color").value,p=e.pstyle("stripe-"+g+"-background-opacity").value*t,m=_/100;m+l>1&&(m=1-l),!(_===0||l>=1||l+m>1)&&(r.beginPath(),r.rect(o,a+v*l,d,v*m),r.closePath(),this.colorFillStyle(r,y[0],y[1],y[2],p),r.fill(),l+=m)}r.restore()};var _s={},XB=100;_s.getPixelRatio=function(){var r=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=this.cy.window(),t=r.backingStorePixelRatio||r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1;return(e.devicePixelRatio||1)/t};_s.paintCache=function(r){for(var e=this.paintCaches=this.paintCaches||[],t=!0,n,i=0;i<e.length;i++)if(n=e[i],n.context===r){t=!1;break}return t&&(n={context:r},e.push(n)),n};_s.createGradientStyleFor=function(r,e,t,n,i){var o,a=this.usePaths(),s=t.pstyle(e+"-gradient-stop-colors").value,u=t.pstyle(e+"-gradient-stop-positions").pfValue;if(n==="radial-gradient")if(t.isEdge()){var l=t.sourceEndpoint(),c=t.targetEndpoint(),f=t.midpoint(),h=qv(l,f),d=qv(c,f);o=r.createRadialGradient(f.x,f.y,0,f.x,f.y,Math.max(h,d))}else{var v=a?{x:0,y:0}:t.position(),g=t.paddedWidth(),_=t.paddedHeight();o=r.createRadialGradient(v.x,v.y,0,v.x,v.y,Math.max(g,_))}else if(t.isEdge()){var y=t.sourceEndpoint(),p=t.targetEndpoint();o=r.createLinearGradient(y.x,y.y,p.x,p.y)}else{var m=a?{x:0,y:0}:t.position(),E=t.paddedWidth(),C=t.paddedHeight(),P=E/2,T=C/2,R=t.pstyle("background-gradient-direction").value;switch(R){case"to-bottom":o=r.createLinearGradient(m.x,m.y-T,m.x,m.y+T);break;case"to-top":o=r.createLinearGradient(m.x,m.y+T,m.x,m.y-T);break;case"to-left":o=r.createLinearGradient(m.x+P,m.y,m.x-P,m.y);break;case"to-right":o=r.createLinearGradient(m.x-P,m.y,m.x+P,m.y);break;case"to-bottom-right":case"to-right-bottom":o=r.createLinearGradient(m.x-P,m.y-T,m.x+P,m.y+T);break;case"to-top-right":case"to-right-top":o=r.createLinearGradient(m.x-P,m.y+T,m.x+P,m.y-T);break;case"to-bottom-left":case"to-left-bottom":o=r.createLinearGradient(m.x+P,m.y-T,m.x-P,m.y+T);break;case"to-top-left":case"to-left-top":o=r.createLinearGradient(m.x+P,m.y+T,m.x-P,m.y-T);break}}if(!o)return null;for(var D=u.length===s.length,L=s.length,j=0;j<L;j++)o.addColorStop(D?u[j]:j/(L-1),"rgba("+s[j][0]+","+s[j][1]+","+s[j][2]+","+i+")");return o};_s.gradientFillStyle=function(r,e,t,n){var i=this.createGradientStyleFor(r,"background",e,t,n);if(!i)return null;r.fillStyle=i};_s.colorFillStyle=function(r,e,t,n,i){r.fillStyle="rgba("+e+","+t+","+n+","+i+")"};_s.eleFillStyle=function(r,e,t){var n=e.pstyle("background-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientFillStyle(r,e,n,t);else{var i=e.pstyle("background-color").value;this.colorFillStyle(r,i[0],i[1],i[2],t)}};_s.gradientStrokeStyle=function(r,e,t,n){var i=this.createGradientStyleFor(r,"line",e,t,n);if(!i)return null;r.strokeStyle=i};_s.colorStrokeStyle=function(r,e,t,n,i){r.strokeStyle="rgba("+e+","+t+","+n+","+i+")"};_s.eleStrokeStyle=function(r,e,t){var n=e.pstyle("line-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientStrokeStyle(r,e,n,t);else{var i=e.pstyle("line-color").value;this.colorStrokeStyle(r,i[0],i[1],i[2],t)}};_s.matchCanvasSize=function(r){var e=this,t=e.data,n=e.findContainerClientCoords(),i=n[2],o=n[3],a=e.getPixelRatio(),s=e.motionBlurPxRatio;(r===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||r===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(a=s);var u=i*a,l=o*a,c;if(!(u===e.canvasWidth&&l===e.canvasHeight)){e.fontCaches=null;var f=t.canvasContainer;f.style.width=i+"px",f.style.height=o+"px";for(var h=0;h<e.CANVAS_LAYERS;h++)c=t.canvases[h],c.width=u,c.height=l,c.style.width=i+"px",c.style.height=o+"px";for(var h=0;h<e.BUFFER_COUNT;h++)c=t.bufferCanvases[h],c.width=u,c.height=l,c.style.width=i+"px",c.style.height=o+"px";e.textureMult=1,a<=1&&(c=t.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,c.width=u*e.textureMult,c.height=l*e.textureMult),e.canvasWidth=u,e.canvasHeight=l,e.pixelRatio=a}};_s.renderTo=function(r,e,t,n){this.render({forcedContext:r,forcedZoom:e,forcedPan:t,drawAllLayers:!0,forcedPxRatio:n})};_s.clearCanvas=function(){var r=this,e=r.data;function t(n){n.clearRect(0,0,r.canvasWidth,r.canvasHeight)}t(e.contexts[r.NODE]),t(e.contexts[r.DRAG])};_s.render=function(r){var e=this;r=r||kD();var t=e.cy,n=r.forcedContext,i=r.drawAllLayers,o=r.drawOnlyNodeLayer,a=r.forcedZoom,s=r.forcedPan,u=r.forcedPxRatio===void 0?this.getPixelRatio():r.forcedPxRatio,l=e.data,c=l.canvasNeedsRedraw,f=e.textureOnViewport&&!n&&(e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming),h=r.motionBlur!==void 0?r.motionBlur:e.motionBlur,d=e.motionBlurPxRatio,v=t.hasCompoundNodes(),g=e.hoverData.draggingEles,_=!!(e.hoverData.selecting||e.touchData.selecting);h=h&&!n&&e.motionBlurEnabled&&!_;var y=h;n||(e.prevPxRatio!==u&&(e.invalidateContainerClientCoordsCache(),e.matchCanvasSize(e.container),e.redrawHint("eles",!0),e.redrawHint("drag",!0)),e.prevPxRatio=u),!n&&e.motionBlurTimeout&&clearTimeout(e.motionBlurTimeout),h&&(e.mbFrames==null&&(e.mbFrames=0),e.mbFrames++,e.mbFrames<3&&(y=!1),e.mbFrames>e.minMbLowQualFrames&&(e.motionBlurPxRatio=e.mbPxRBlurry)),e.clearingMotionBlur&&(e.motionBlurPxRatio=1),e.textureDrawLastFrame&&!f&&(c[e.NODE]=!0,c[e.SELECT_BOX]=!0);var p=t.style(),m=t.zoom(),E=a!==void 0?a:m,C=t.pan(),P={x:C.x,y:C.y},T={zoom:m,pan:{x:C.x,y:C.y}},R=e.prevViewport,D=R===void 0||T.zoom!==R.zoom||T.pan.x!==R.pan.x||T.pan.y!==R.pan.y;!D&&!(g&&!v)&&(e.motionBlurPxRatio=1),s&&(P=s),E*=u,P.x*=u,P.y*=u;var L=e.getCachedZSortedEles();function j(Ie,ve,we,xe,Fe){var He=Ie.globalCompositeOperation;Ie.globalCompositeOperation="destination-out",e.colorFillStyle(Ie,255,255,255,e.motionBlurTransparency),Ie.fillRect(ve,we,xe,Fe),Ie.globalCompositeOperation=He}function F(Ie,ve){var we,xe,Fe,He;!e.clearingMotionBlur&&(Ie===l.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]||Ie===l.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG])?(we={x:C.x*d,y:C.y*d},xe=m*d,Fe=e.canvasWidth*d,He=e.canvasHeight*d):(we=P,xe=E,Fe=e.canvasWidth,He=e.canvasHeight),Ie.setTransform(1,0,0,1,0,0),ve==="motionBlur"?j(Ie,0,0,Fe,He):!n&&(ve===void 0||ve)&&Ie.clearRect(0,0,Fe,He),i||(Ie.translate(we.x,we.y),Ie.scale(xe,xe)),s&&Ie.translate(s.x,s.y),a&&Ie.scale(a,a)}if(f||(e.textureDrawLastFrame=!1),f){if(e.textureDrawLastFrame=!0,!e.textureCache){e.textureCache={},e.textureCache.bb=t.mutableElements().boundingBox(),e.textureCache.texture=e.data.bufferCanvases[e.TEXTURE_BUFFER];var q=e.data.bufferContexts[e.TEXTURE_BUFFER];q.setTransform(1,0,0,1,0,0),q.clearRect(0,0,e.canvasWidth*e.textureMult,e.canvasHeight*e.textureMult),e.render({forcedContext:q,drawOnlyNodeLayer:!0,forcedPxRatio:u*e.textureMult});var T=e.textureCache.viewport={zoom:t.zoom(),pan:t.pan(),width:e.canvasWidth,height:e.canvasHeight};T.mpan={x:(0-T.pan.x)/T.zoom,y:(0-T.pan.y)/T.zoom}}c[e.DRAG]=!1,c[e.NODE]=!1;var W=l.contexts[e.NODE],Z=e.textureCache.texture,T=e.textureCache.viewport;W.setTransform(1,0,0,1,0,0),h?j(W,0,0,T.width,T.height):W.clearRect(0,0,T.width,T.height);var Q=p.core("outside-texture-bg-color").value,re=p.core("outside-texture-bg-opacity").value;e.colorFillStyle(W,Q[0],Q[1],Q[2],re),W.fillRect(0,0,T.width,T.height);var m=t.zoom();F(W,!1),W.clearRect(T.mpan.x,T.mpan.y,T.width/T.zoom/u,T.height/T.zoom/u),W.drawImage(Z,T.mpan.x,T.mpan.y,T.width/T.zoom/u,T.height/T.zoom/u)}else e.textureOnViewport&&!n&&(e.textureCache=null);var ee=t.extent(),ue=e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming||e.hoverData.draggingEles||e.cy.animated(),de=e.hideEdgesOnViewport&&ue,se=[];if(se[e.NODE]=!c[e.NODE]&&h&&!e.clearedForMotionBlur[e.NODE]||e.clearingMotionBlur,se[e.NODE]&&(e.clearedForMotionBlur[e.NODE]=!0),se[e.DRAG]=!c[e.DRAG]&&h&&!e.clearedForMotionBlur[e.DRAG]||e.clearingMotionBlur,se[e.DRAG]&&(e.clearedForMotionBlur[e.DRAG]=!0),c[e.NODE]||i||o||se[e.NODE]){var be=h&&!se[e.NODE]&&d!==1,W=n||(be?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]:l.contexts[e.NODE]),Le=h&&!be?"motionBlur":void 0;F(W,Le),de?e.drawCachedNodes(W,L.nondrag,u,ee):e.drawLayeredElements(W,L.nondrag,u,ee),e.debug&&e.drawDebugPoints(W,L.nondrag),!i&&!h&&(c[e.NODE]=!1)}if(!o&&(c[e.DRAG]||i||se[e.DRAG])){var be=h&&!se[e.DRAG]&&d!==1,W=n||(be?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG]:l.contexts[e.DRAG]);F(W,h&&!be?"motionBlur":void 0),de?e.drawCachedNodes(W,L.drag,u,ee):e.drawCachedElements(W,L.drag,u,ee),e.debug&&e.drawDebugPoints(W,L.drag),!i&&!h&&(c[e.DRAG]=!1)}if(this.drawSelectionRectangle(r,F),h&&d!==1){var fe=l.contexts[e.NODE],ce=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE],Ee=l.contexts[e.DRAG],Ce=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG],ke=function(ve,we,xe){ve.setTransform(1,0,0,1,0,0),xe||!y?ve.clearRect(0,0,e.canvasWidth,e.canvasHeight):j(ve,0,0,e.canvasWidth,e.canvasHeight);var Fe=d;ve.drawImage(we,0,0,e.canvasWidth*Fe,e.canvasHeight*Fe,0,0,e.canvasWidth,e.canvasHeight)};(c[e.NODE]||se[e.NODE])&&(ke(fe,ce,se[e.NODE]),c[e.NODE]=!1),(c[e.DRAG]||se[e.DRAG])&&(ke(Ee,Ce,se[e.DRAG]),c[e.DRAG]=!1)}e.prevViewport=T,e.clearingMotionBlur&&(e.clearingMotionBlur=!1,e.motionBlurCleared=!0,e.motionBlur=!0),h&&(e.motionBlurTimeout=setTimeout(function(){e.motionBlurTimeout=null,e.clearedForMotionBlur[e.NODE]=!1,e.clearedForMotionBlur[e.DRAG]=!1,e.motionBlur=!1,e.clearingMotionBlur=!f,e.mbFrames=0,c[e.NODE]=!0,c[e.DRAG]=!0,e.redraw()},XB)),n||t.emit("render")};var Jg;_s.drawSelectionRectangle=function(r,e){var t=this,n=t.cy,i=t.data,o=n.style(),a=r.drawOnlyNodeLayer,s=r.drawAllLayers,u=i.canvasNeedsRedraw,l=r.forcedContext;if(t.showFps||!a&&u[t.SELECT_BOX]&&!s){var c=l||i.contexts[t.SELECT_BOX];if(e(c),t.selection[4]==1&&(t.hoverData.selecting||t.touchData.selecting)){var f=t.cy.zoom(),h=o.core("selection-box-border-width").value/f;c.lineWidth=h,c.fillStyle="rgba("+o.core("selection-box-color").value[0]+","+o.core("selection-box-color").value[1]+","+o.core("selection-box-color").value[2]+","+o.core("selection-box-opacity").value+")",c.fillRect(t.selection[0],t.selection[1],t.selection[2]-t.selection[0],t.selection[3]-t.selection[1]),h>0&&(c.strokeStyle="rgba("+o.core("selection-box-border-color").value[0]+","+o.core("selection-box-border-color").value[1]+","+o.core("selection-box-border-color").value[2]+","+o.core("selection-box-opacity").value+")",c.strokeRect(t.selection[0],t.selection[1],t.selection[2]-t.selection[0],t.selection[3]-t.selection[1]))}if(i.bgActivePosistion&&!t.hoverData.selecting){var f=t.cy.zoom(),d=i.bgActivePosistion;c.fillStyle="rgba("+o.core("active-bg-color").value[0]+","+o.core("active-bg-color").value[1]+","+o.core("active-bg-color").value[2]+","+o.core("active-bg-opacity").value+")",c.beginPath(),c.arc(d.x,d.y,o.core("active-bg-size").pfValue/f,0,2*Math.PI),c.fill()}var v=t.lastRedrawTime;if(t.showFps&&v){v=Math.round(v);var g=Math.round(1e3/v),_="1 frame = "+v+" ms = "+g+" fps";if(c.setTransform(1,0,0,1,0,0),c.fillStyle="rgba(255, 0, 0, 0.75)",c.strokeStyle="rgba(255, 0, 0, 0.75)",c.font="30px Arial",!Jg){var y=c.measureText(_);Jg=y.actualBoundingBoxAscent}c.fillText(_,0,Jg);var p=60;c.strokeRect(0,Jg+10,250,20),c.fillRect(0,Jg+10,250*Math.min(g/p,1),20)}s||(u[t.SELECT_BOX]=!1)}};function q2(r,e,t){var n=r.createShader(e);if(r.shaderSource(n,t),r.compileShader(n),!r.getShaderParameter(n,r.COMPILE_STATUS))throw new Error(r.getShaderInfoLog(n));return n}function $B(r,e,t){var n=q2(r,r.VERTEX_SHADER,e),i=q2(r,r.FRAGMENT_SHADER,t),o=r.createProgram();if(r.attachShader(o,n),r.attachShader(o,i),r.linkProgram(o),!r.getProgramParameter(o,r.LINK_STATUS))throw new Error("Could not initialize shaders");return o}function KB(r,e,t){t===void 0&&(t=e);var n=r.makeOffscreenCanvas(e,t),i=n.context=n.getContext("2d");return n.clear=function(){return i.clearRect(0,0,n.width,n.height)},n.clear(),n}function US(r){var e=r.pixelRatio,t=r.cy.zoom(),n=r.cy.pan();return{zoom:t*e,pan:{x:n.x*e,y:n.y*e}}}function ZB(r){var e=r.pixelRatio,t=r.cy.zoom();return t*e}function QB(r,e,t,n,i){var o=n*t+e.x,a=i*t+e.y;return a=Math.round(r.canvasHeight-a),[o,a]}function JB(r){return r.pstyle("background-fill").value!=="solid"||r.pstyle("background-image").strValue!=="none"?!1:r.pstyle("border-width").value===0||r.pstyle("border-opacity").value===0?!0:r.pstyle("border-style").value==="solid"}function eU(r,e){if(r.length!==e.length)return!1;for(var t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}function wv(r,e,t){var n=r[0]/255,i=r[1]/255,o=r[2]/255,a=e,s=t||new Array(4);return s[0]=n*a,s[1]=i*a,s[2]=o*a,s[3]=a,s}function Wp(r,e){var t=e||new Array(4);return t[0]=(r>>0&255)/255,t[1]=(r>>8&255)/255,t[2]=(r>>16&255)/255,t[3]=(r>>24&255)/255,t}function tU(r){return r[0]+(r[1]<<8)+(r[2]<<16)+(r[3]<<24)}function rU(r,e){var t=r.createTexture();return t.buffer=function(n){r.bindTexture(r.TEXTURE_2D,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR_MIPMAP_NEAREST),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,n),r.generateMipmap(r.TEXTURE_2D),r.bindTexture(r.TEXTURE_2D,null)},t.deleteTexture=function(){r.deleteTexture(t)},t}function GM(r,e){switch(e){case"float":return[1,r.FLOAT,4];case"vec2":return[2,r.FLOAT,4];case"vec3":return[3,r.FLOAT,4];case"vec4":return[4,r.FLOAT,4];case"int":return[1,r.INT,4];case"ivec2":return[2,r.INT,4]}}function VM(r,e,t){switch(e){case r.FLOAT:return new Float32Array(t);case r.INT:return new Int32Array(t)}}function nU(r,e,t,n,i,o){switch(e){case r.FLOAT:return new Float32Array(t.buffer,o*n,i);case r.INT:return new Int32Array(t.buffer,o*n,i)}}function iU(r,e,t,n){var i=GM(r,e),o=Lo(i,2),a=o[0],s=o[1],u=VM(r,s,n),l=r.createBuffer();return r.bindBuffer(r.ARRAY_BUFFER,l),r.bufferData(r.ARRAY_BUFFER,u,r.STATIC_DRAW),s===r.FLOAT?r.vertexAttribPointer(t,a,s,!1,0,0):s===r.INT&&r.vertexAttribIPointer(t,a,s,0,0),r.enableVertexAttribArray(t),r.bindBuffer(r.ARRAY_BUFFER,null),l}function Hc(r,e,t,n){var i=GM(r,t),o=Lo(i,3),a=o[0],s=o[1],u=o[2],l=VM(r,s,e*a),c=a*u,f=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,f),r.bufferData(r.ARRAY_BUFFER,e*c,r.DYNAMIC_DRAW),r.enableVertexAttribArray(n),s===r.FLOAT?r.vertexAttribPointer(n,a,s,!1,c,0):s===r.INT&&r.vertexAttribIPointer(n,a,s,c,0),r.vertexAttribDivisor(n,1),r.bindBuffer(r.ARRAY_BUFFER,null);for(var h=new Array(e),d=0;d<e;d++)h[d]=nU(r,s,l,c,a,d);return f.dataArray=l,f.stride=c,f.size=a,f.getView=function(v){return h[v]},f.setPoint=function(v,g,_){var y=h[v];y[0]=g,y[1]=_},f.bufferSubData=function(v){r.bindBuffer(r.ARRAY_BUFFER,f),v?r.bufferSubData(r.ARRAY_BUFFER,0,l,0,v*a):r.bufferSubData(r.ARRAY_BUFFER,0,l)},f}function oU(r,e,t){for(var n=9,i=new Float32Array(e*n),o=new Array(e),a=0;a<e;a++){var s=a*n*4;o[a]=new Float32Array(i.buffer,s,n)}var u=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,u),r.bufferData(r.ARRAY_BUFFER,i.byteLength,r.DYNAMIC_DRAW);for(var l=0;l<3;l++){var c=t+l;r.enableVertexAttribArray(c),r.vertexAttribPointer(c,3,r.FLOAT,!1,3*12,l*12),r.vertexAttribDivisor(c,1)}return r.bindBuffer(r.ARRAY_BUFFER,null),u.getMatrixView=function(f){return o[f]},u.setData=function(f,h){o[h].set(f,0)},u.bufferSubData=function(){r.bindBuffer(r.ARRAY_BUFFER,u),r.bufferSubData(r.ARRAY_BUFFER,0,i)},u}function aU(r){var e=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,e);var t=r.createTexture();return r.bindTexture(r.TEXTURE_2D,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0),r.bindFramebuffer(r.FRAMEBUFFER,null),e.setFramebufferAttachmentSizes=function(n,i){r.bindTexture(r.TEXTURE_2D,t),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,n,i,0,r.RGBA,r.UNSIGNED_BYTE,null)},e}var z2=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var r=0,e=arguments.length;e--;)r+=arguments[e]*arguments[e];return Math.sqrt(r)});function Z_(){var r=new z2(9);return z2!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function G2(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function sU(r,e,t){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=t[0],d=t[1],v=t[2],g=t[3],_=t[4],y=t[5],p=t[6],m=t[7],E=t[8];return r[0]=h*n+d*a+v*l,r[1]=h*i+d*s+v*c,r[2]=h*o+d*u+v*f,r[3]=g*n+_*a+y*l,r[4]=g*i+_*s+y*c,r[5]=g*o+_*u+y*f,r[6]=p*n+m*a+E*l,r[7]=p*i+m*s+E*c,r[8]=p*o+m*u+E*f,r}function Hm(r,e,t){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=t[0],d=t[1];return r[0]=n,r[1]=i,r[2]=o,r[3]=a,r[4]=s,r[5]=u,r[6]=h*n+d*a+l,r[7]=h*i+d*s+c,r[8]=h*o+d*u+f,r}function V2(r,e,t){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=Math.sin(t),d=Math.cos(t);return r[0]=d*n+h*a,r[1]=d*i+h*s,r[2]=d*o+h*u,r[3]=d*a-h*n,r[4]=d*s-h*i,r[5]=d*u-h*o,r[6]=l,r[7]=c,r[8]=f,r}function iS(r,e,t){var n=t[0],i=t[1];return r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=i*e[3],r[4]=i*e[4],r[5]=i*e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r}function uU(r,e,t){return r[0]=2/e,r[1]=0,r[2]=0,r[3]=0,r[4]=-2/t,r[5]=0,r[6]=-1,r[7]=1,r[8]=1,r}var lU=function(){function r(e,t,n,i){md(this,r),this.debugID=Math.floor(Math.random()*1e4),this.r=e,this.texSize=t,this.texRows=n,this.texHeight=Math.floor(t/n),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=i(e,t,t),this.scratch=i(e,t,this.texHeight,"scratch")}return bd(r,[{key:"lock",value:function(){this.locked=!0}},{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(t){var n=t.w,i=t.h,o=this.texHeight,a=this.texSize,s=o/i,u=n*s,l=i*s;return u>a&&(s=a/n,u=n*s,l=i*s),{scale:s,texW:u,texH:l}}},{key:"draw",value:function(t,n,i){var o=this;if(this.locked)throw new Error("can't draw, atlas is locked");var a=this.texSize,s=this.texRows,u=this.texHeight,l=this.getScale(n),c=l.scale,f=l.texW,h=l.texH,d=function(m,E){if(i&&E){var C=E.context,P=m.x,T=m.row,R=P,D=u*T;C.save(),C.translate(R,D),C.scale(c,c),i(C,n),C.restore()}},v=[null,null],g=function(){d(o.freePointer,o.canvas),v[0]={x:o.freePointer.x,y:o.freePointer.row*u,w:f,h},v[1]={x:o.freePointer.x+f,y:o.freePointer.row*u,w:0,h},o.freePointer.x+=f,o.freePointer.x==a&&(o.freePointer.x=0,o.freePointer.row++)},_=function(){var m=o.scratch,E=o.canvas;m.clear(),d({x:0,row:0},m);var C=a-o.freePointer.x,P=f-C,T=u;{var R=o.freePointer.x,D=o.freePointer.row*u,L=C;E.context.drawImage(m,0,0,L,T,R,D,L,T),v[0]={x:R,y:D,w:L,h}}{var j=C,F=(o.freePointer.row+1)*u,q=P;E&&E.context.drawImage(m,j,0,q,T,0,F,q,T),v[1]={x:0,y:F,w:q,h}}o.freePointer.x=P,o.freePointer.row++},y=function(){o.freePointer.x=0,o.freePointer.row++};if(this.freePointer.x+f<=a)g();else{if(this.freePointer.row>=s-1)return!1;this.freePointer.x===a?(y(),g()):this.enableWrapping?_():(y(),g())}return this.keyToLocation.set(t,v),this.needsBuffer=!0,v}},{key:"getOffsets",value:function(t){return this.keyToLocation.get(t)}},{key:"isEmpty",value:function(){return this.freePointer.x===0&&this.freePointer.row===0}},{key:"canFit",value:function(t){if(this.locked)return!1;var n=this.texSize,i=this.texRows,o=this.getScale(t),a=o.texW;return this.freePointer.x+a>n?this.freePointer.row<i-1:!0}},{key:"bufferIfNeeded",value:function(t){this.texture||(this.texture=rU(t,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0}}])}(),cU=function(){function r(e,t,n,i){md(this,r),this.r=e,this.texSize=t,this.texRows=n,this.createTextureCanvas=i,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set}return bd(r,[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function(){var t=this.r,n=this.texSize,i=this.texRows,o=this.createTextureCanvas;return new lU(t,n,i,o)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var t=this.r,n=this.texSize,i=this.texRows,o=this.createTextureCanvas,a=Math.floor(n/i);this.scratch=o(t,n,a,"scratch")}return this.scratch}},{key:"draw",value:function(t,n,i){var o=this.styleKeyToAtlas.get(t);return o||(o=this.atlases[this.atlases.length-1],(!o||!o.canFit(n))&&(o&&o.lock(),o=this._createAtlas(),this.atlases.push(o)),o.draw(t,n,i),this.styleKeyToAtlas.set(t,o)),o}},{key:"getAtlas",value:function(t){return this.styleKeyToAtlas.get(t)}},{key:"hasAtlas",value:function(t){return this.styleKeyToAtlas.has(t)}},{key:"markKeyForGC",value:function(t){this.markedKeys.add(t)}},{key:"gc",value:function(){var t=this,n=this.markedKeys;if(n.size!==0){var i=[],o=new Map,a=null,s=Gs(this.atlases),u;try{var l=function(){var f=u.value,h=f.getKeys(),d=fU(n,h);if(d.size===0)return i.push(f),h.forEach(function(C){return o.set(C,f)}),1;a||(a=t._createAtlas(),i.push(a));var v=Gs(h),g;try{for(v.s();!(g=v.n()).done;){var _=g.value;if(!d.has(_)){var y=f.getOffsets(_),p=Lo(y,2),m=p[0],E=p[1];a.canFit({w:m.w+E.w,h:m.h})||(a.lock(),a=t._createAtlas(),i.push(a)),f.canvas&&(t._copyTextureToNewAtlas(_,f,a),o.set(_,a))}}}catch(C){v.e(C)}finally{v.f()}f.dispose()};for(s.s();!(u=s.n()).done;)l()}catch(c){s.e(c)}finally{s.f()}this.atlases=i,this.styleKeyToAtlas=o,this.markedKeys=new Set}}},{key:"_copyTextureToNewAtlas",value:function(t,n,i){var o=n.getOffsets(t),a=Lo(o,2),s=a[0],u=a[1];if(u.w===0)i.draw(t,s,function(h){h.drawImage(n.canvas,s.x,s.y,s.w,s.h,0,0,s.w,s.h)});else{var l=this._getScratchCanvas();l.clear(),l.context.drawImage(n.canvas,s.x,s.y,s.w,s.h,0,0,s.w,s.h),l.context.drawImage(n.canvas,u.x,u.y,u.w,u.h,s.w,0,u.w,u.h);var c=s.w+u.w,f=s.h;i.draw(t,{w:c,h:f},function(h){h.drawImage(l,0,0,c,f,0,0,c,f)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}])}();function fU(r,e){return r.intersection?r.intersection(e):new Set(Jm(r).filter(function(t){return e.has(t)}))}var hU=function(){function r(e,t){md(this,r),this.r=e,this.globalOptions=t,this.atlasSize=t.webglTexSize,this.maxAtlasesPerBatch=t.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map}return bd(r,[{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"addAtlasCollection",value:function(t,n){var i=this.globalOptions,o=i.webglTexSize,a=i.createTextureCanvas,s=n.texRows,u=this._cacheScratchCanvas(a),l=new cU(this.r,o,s,u);this.collections.set(t,l)}},{key:"addRenderType",value:function(t,n){var i=n.collection;if(!this.collections.has(i))throw new Error("invalid atlas collection name '".concat(i,"'"));var o=this.collections.get(i),a=xr({type:t,atlasCollection:o},n);this.renderTypes.set(t,a)}},{key:"getRenderTypeOpts",value:function(t){return this.renderTypes.get(t)}},{key:"getAtlasCollection",value:function(t){return this.collections.get(t)}},{key:"_cacheScratchCanvas",value:function(t){var n=-1,i=-1,o=null;return function(a,s,u,l){return l?((!o||s!=n||u!=i)&&(n=s,i=u,o=t(a,s,u)),o):t(a,s,u)}}},{key:"_key",value:function(t,n){return"".concat(t,"-").concat(n)}},{key:"invalidate",value:function(t){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.forceRedraw,a=o===void 0?!1:o,s=i.filterEle,u=s===void 0?function(){return!0}:s,l=i.filterType,c=l===void 0?function(){return!0}:l,f=!1,h=!1,d=Gs(t),v;try{for(d.s();!(v=d.n()).done;){var g=v.value;if(u(g)){var _=Gs(this.renderTypes.values()),y;try{var p=function(){var E=y.value,C=E.type;if(c(C)){var P=n.collections.get(E.collection),T=E.getKey(g),R=Array.isArray(T)?T:[T];if(a)R.forEach(function(F){return P.markKeyForGC(F)}),h=!0;else{var D=E.getID?E.getID(g):g.id(),L=n._key(C,D),j=n.typeAndIdToKey.get(L);j!==void 0&&!eU(R,j)&&(f=!0,n.typeAndIdToKey.delete(L),j.forEach(function(F){return P.markKeyForGC(F)}))}}};for(_.s();!(y=_.n()).done;)p()}catch(m){_.e(m)}finally{_.f()}}}}catch(m){d.e(m)}finally{d.f()}return h&&(this.gc(),f=!1),f}},{key:"gc",value:function(){var t=Gs(this.collections.values()),n;try{for(t.s();!(n=t.n()).done;){var i=n.value;i.gc()}}catch(o){t.e(o)}finally{t.f()}}},{key:"getOrCreateAtlas",value:function(t,n,i,o){var a=this.renderTypes.get(n),s=this.collections.get(a.collection),u=!1,l=s.draw(o,i,function(h){a.drawClipped?(h.save(),h.beginPath(),h.rect(0,0,i.w,i.h),h.clip(),a.drawElement(h,t,i,!0,!0),h.restore()):a.drawElement(h,t,i,!0,!0),u=!0});if(u){var c=a.getID?a.getID(t):t.id(),f=this._key(n,c);this.typeAndIdToKey.has(f)?this.typeAndIdToKey.get(f).push(o):this.typeAndIdToKey.set(f,[o])}return l}},{key:"getAtlasInfo",value:function(t,n){var i=this,o=this.renderTypes.get(n),a=o.getKey(t),s=Array.isArray(a)?a:[a];return s.map(function(u){var l=o.getBoundingBox(t,u),c=i.getOrCreateAtlas(t,n,l,u),f=c.getOffsets(u),h=Lo(f,2),d=h[0],v=h[1];return{atlas:c,tex:d,tex1:d,tex2:v,bb:l}})}},{key:"getDebugInfo",value:function(){var t=[],n=Gs(this.collections),i;try{for(n.s();!(i=n.n()).done;){var o=Lo(i.value,2),a=o[0],s=o[1],u=s.getCounts(),l=u.keyCount,c=u.atlasCount;t.push({type:a,keyCount:l,atlasCount:c})}}catch(f){n.e(f)}finally{n.f()}return t}}])}(),dU=function(){function r(e){md(this,r),this.globalOptions=e,this.atlasSize=e.webglTexSize,this.maxAtlasesPerBatch=e.webglTexPerBatch,this.batchAtlases=[]}return bd(r,[{key:"getMaxAtlasesPerBatch",value:function(){return this.maxAtlasesPerBatch}},{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlasesPerBatch},function(t,n){return n})}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function(t){return this.batchAtlases.length===this.maxAtlasesPerBatch?this.batchAtlases.includes(t):!0}},{key:"getAtlasIndexForBatch",value:function(t){var n=this.batchAtlases.indexOf(t);if(n<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)throw new Error("cannot add more atlases to batch");this.batchAtlases.push(t),n=this.batchAtlases.length-1}return n}}])}(),vU=`
  float circleSD(vec2 p, float r) {
    return distance(vec2(0), p) - r; // signed distance
  }
`,pU=`
  float rectangleSD(vec2 p, vec2 b) {
    vec2 d = abs(p)-b;
    return distance(vec2(0),max(d,0.0)) + min(max(d.x,d.y),0.0);
  }
`,gU=`
  float roundRectangleSD(vec2 p, vec2 b, vec4 cr) {
    cr.xy = (p.x > 0.0) ? cr.xy : cr.zw;
    cr.x  = (p.y > 0.0) ? cr.x  : cr.y;
    vec2 q = abs(p) - b + cr.x;
    return min(max(q.x, q.y), 0.0) + distance(vec2(0), max(q, 0.0)) - cr.x;
  }
`,yU=`
  float ellipseSD(vec2 p, vec2 ab) {
    p = abs( p ); // symmetry

    // find root with Newton solver
    vec2 q = ab*(p-ab);
    float w = (q.x<q.y)? 1.570796327 : 0.0;
    for( int i=0; i<5; i++ ) {
      vec2 cs = vec2(cos(w),sin(w));
      vec2 u = ab*vec2( cs.x,cs.y);
      vec2 v = ab*vec2(-cs.y,cs.x);
      w = w + dot(p-u,v)/(dot(p-u,u)+dot(v,v));
    }
    
    // compute final point and distance
    float d = length(p-ab*vec2(cos(w),sin(w)));
    
    // return signed distance
    return (dot(p/ab,p/ab)>1.0) ? d : -d;
  }
`,my={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},f0={IGNORE:1,USE_BB:2},Q_=0,W2=1,H2=2,J_=3,Hp=4,Om=5,ey=6,ty=7,mU=function(){function r(e,t,n){md(this,r),this.r=e,this.gl=t,this.maxInstances=n.webglBatchSize,this.atlasSize=n.webglTexSize,this.bgColor=n.bgColor,this.debug=n.webglDebug,this.batchDebugInfo=[],n.enableWrapping=!0,n.createTextureCanvas=KB,this.atlasManager=new hU(e,n),this.batchManager=new dU(n),this.simpleShapeOptions=new Map,this.program=this._createShaderProgram(my.SCREEN),this.pickingProgram=this._createShaderProgram(my.PICKING),this.vao=this._createVAO()}return bd(r,[{key:"addAtlasCollection",value:function(t,n){this.atlasManager.addAtlasCollection(t,n)}},{key:"addTextureAtlasRenderType",value:function(t,n){this.atlasManager.addRenderType(t,n)}},{key:"addSimpleShapeRenderType",value:function(t,n){this.simpleShapeOptions.set(t,n)}},{key:"invalidate",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.type,o=this.atlasManager;return i?o.invalidate(t,{filterType:function(s){return s===i},forceRedraw:!0}):o.invalidate(t)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"_createShaderProgram",value:function(t){var n=this.gl,i=`#version 300 es
      precision highp float;

      uniform mat3 uPanZoomMatrix;
      uniform int  uAtlasSize;
      
      // instanced
      in vec2 aPosition; // a vertex from the unit square
      
      in mat3 aTransform; // used to transform verticies, eg into a bounding box
      in int aVertType; // the type of thing we are rendering

      // the z-index that is output when using picking mode
      in vec4 aIndex;
      
      // For textures
      in int aAtlasId; // which shader unit/atlas to use
      in vec4 aTex; // x/y/w/h of texture in atlas

      // for edges
      in vec4 aPointAPointB;
      in vec4 aPointCPointD;
      in vec2 aLineWidth; // also used for node border width

      // simple shapes
      in vec4 aCornerRadius; // for round-rectangle [top-right, bottom-right, top-left, bottom-left]
      in vec4 aColor; // also used for edges
      in vec4 aBorderColor; // aLineWidth is used for border width

      // output values passed to the fragment shader
      out vec2 vTexCoord;
      out vec4 vColor;
      out vec2 vPosition;
      // flat values are not interpolated
      flat out int vAtlasId; 
      flat out int vVertType;
      flat out vec2 vTopRight;
      flat out vec2 vBotLeft;
      flat out vec4 vCornerRadius;
      flat out vec4 vBorderColor;
      flat out vec2 vBorderWidth;
      flat out vec4 vIndex;
      
      void main(void) {
        int vid = gl_VertexID;
        vec2 position = aPosition; // TODO make this a vec3, simplifies some code below

        if(aVertType == `.concat(Q_,`) {
          float texX = aTex.x; // texture coordinates
          float texY = aTex.y;
          float texW = aTex.z;
          float texH = aTex.w;

          if(vid == 1 || vid == 2 || vid == 4) {
            texX += texW;
          }
          if(vid == 2 || vid == 4 || vid == 5) {
            texY += texH;
          }

          float d = float(uAtlasSize);
          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(Hp," || aVertType == ").concat(ty,` 
             || aVertType == `).concat(Om," || aVertType == ").concat(ey,`) { // simple shapes

          // the bounding box is needed by the fragment shader
          vBotLeft  = (aTransform * vec3(0, 0, 1)).xy; // flat
          vTopRight = (aTransform * vec3(1, 1, 1)).xy; // flat
          vPosition = (aTransform * vec3(position, 1)).xy; // will be interpolated

          // calculations are done in the fragment shader, just pass these along
          vColor = aColor;
          vCornerRadius = aCornerRadius;
          vBorderColor = aBorderColor;
          vBorderWidth = aLineWidth;

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(W2,`) {
          vec2 source = aPointAPointB.xy;
          vec2 target = aPointAPointB.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          // stretch the unit square into a long skinny rectangle
          vec2 xBasis = target - source;
          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));
          vec2 point = source + xBasis * position.x + yBasis * aLineWidth[0] * position.y;

          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);
          vColor = aColor;
        } 
        else if(aVertType == `).concat(H2,`) {
          vec2 pointA = aPointAPointB.xy;
          vec2 pointB = aPointAPointB.zw;
          vec2 pointC = aPointCPointD.xy;
          vec2 pointD = aPointCPointD.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 p0, p1, p2, pos;
          if(position.x == 0.0) { // The left side of the unit square
            p0 = pointA;
            p1 = pointB;
            p2 = pointC;
            pos = position;
          } else { // The right side of the unit square, use same approach but flip the geometry upside down
            p0 = pointD;
            p1 = pointC;
            p2 = pointB;
            pos = vec2(0.0, -position.y);
          }

          vec2 p01 = p1 - p0;
          vec2 p12 = p2 - p1;
          vec2 p21 = p1 - p2;

          // Find the normal vector.
          vec2 tangent = normalize(normalize(p12) + normalize(p01));
          vec2 normal = vec2(-tangent.y, tangent.x);

          // Find the vector perpendicular to p0 -> p1.
          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));

          // Determine the bend direction.
          float sigma = sign(dot(p01 + p21, normal));
          float width = aLineWidth[0];

          if(sign(pos.y) == -sigma) {
            // This is an intersecting vertex. Adjust the position so that there's no overlap.
            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          } else {
            // This is a non-intersecting vertex. Treat it like a mitre join.
            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          }

          vColor = aColor;
        } 
        else if(aVertType == `).concat(J_,` && vid < 3) {
          // massage the first triangle into an edge arrow
          if(vid == 0)
            position = vec2(-0.15, -0.3);
          if(vid == 1)
            position = vec2(  0.0,  0.0);
          if(vid == 2)
            position = vec2( 0.15, -0.3);

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
          vColor = aColor;
        }
        else {
          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space
        }

        vAtlasId = aAtlasId;
        vVertType = aVertType;
        vIndex = aIndex;
      }
    `),o=this.batchManager.getIndexArray(),a=`#version 300 es
      precision highp float;

      // declare texture unit for each texture atlas in the batch
      `.concat(o.map(function(l){return"uniform sampler2D uTexture".concat(l,";")}).join(`
	`),`

      uniform vec4 uBGColor;
      uniform float uZoom;

      in vec2 vTexCoord;
      in vec4 vColor;
      in vec2 vPosition; // model coordinates

      flat in int vAtlasId;
      flat in vec4 vIndex;
      flat in int vVertType;
      flat in vec2 vTopRight;
      flat in vec2 vBotLeft;
      flat in vec4 vCornerRadius;
      flat in vec4 vBorderColor;
      flat in vec2 vBorderWidth;

      out vec4 outColor;

      `).concat(vU,`
      `).concat(pU,`
      `).concat(gU,`
      `).concat(yU,`

      vec4 blend(vec4 top, vec4 bot) { // blend colors with premultiplied alpha
        return vec4( 
          top.rgb + (bot.rgb * (1.0 - top.a)),
          top.a   + (bot.a   * (1.0 - top.a)) 
        );
      }

      vec4 distInterp(vec4 cA, vec4 cB, float d) { // interpolate color using Signed Distance
        // scale to the zoom level so that borders don't look blurry when zoomed in
        // note 1.5 is an aribitrary value chosen because it looks good
        return mix(cA, cB, 1.0 - smoothstep(0.0, 1.5 / uZoom, abs(d))); 
      }

      void main(void) {
        if(vVertType == `).concat(Q_,`) {
          // look up the texel from the texture unit
          `).concat(o.map(function(l){return"if(vAtlasId == ".concat(l,") outColor = texture(uTexture").concat(l,", vTexCoord);")}).join(`
	else `),`
        } 
        else if(vVertType == `).concat(J_,`) {
          // mimics how canvas renderer uses context.globalCompositeOperation = 'destination-out';
          outColor = blend(vColor, uBGColor);
          outColor.a = 1.0; // make opaque, masks out line under arrow
        }
        else if(vVertType == `).concat(Hp,` && vBorderWidth == vec2(0.0)) { // simple rectangle with no border
          outColor = vColor; // unit square is already transformed to the rectangle, nothing else needs to be done
        }
        else if(vVertType == `).concat(Hp," || vVertType == ").concat(ty,` 
          || vVertType == `).concat(Om," || vVertType == ").concat(ey,`) { // use SDF

          float outerBorder = vBorderWidth[0];
          float innerBorder = vBorderWidth[1];
          float borderPadding = outerBorder * 2.0;
          float w = vTopRight.x - vBotLeft.x - borderPadding;
          float h = vTopRight.y - vBotLeft.y - borderPadding;
          vec2 b = vec2(w/2.0, h/2.0); // half width, half height
          vec2 p = vPosition - vec2(vTopRight.x - b[0] - outerBorder, vTopRight.y - b[1] - outerBorder); // translate to center

          float d; // signed distance
          if(vVertType == `).concat(Hp,`) {
            d = rectangleSD(p, b);
          } else if(vVertType == `).concat(ty,` && w == h) {
            d = circleSD(p, b.x); // faster than ellipse
          } else if(vVertType == `).concat(ty,`) {
            d = ellipseSD(p, b);
          } else {
            d = roundRectangleSD(p, b, vCornerRadius.wzyx);
          }

          // use the distance to interpolate a color to smooth the edges of the shape, doesn't need multisampling
          // we must smooth colors inwards, because we can't change pixels outside the shape's bounding box
          if(d > 0.0) {
            if(d > outerBorder) {
              discard;
            } else {
              outColor = distInterp(vBorderColor, vec4(0), d - outerBorder);
            }
          } else {
            if(d > innerBorder) {
              vec4 outerColor = outerBorder == 0.0 ? vec4(0) : vBorderColor;
              vec4 innerBorderColor = blend(vBorderColor, vColor);
              outColor = distInterp(innerBorderColor, outerColor, d);
            } 
            else {
              vec4 outerColor;
              if(innerBorder == 0.0 && outerBorder == 0.0) {
                outerColor = vec4(0);
              } else if(innerBorder == 0.0) {
                outerColor = vBorderColor;
              } else {
                outerColor = blend(vBorderColor, vColor);
              }
              outColor = distInterp(vColor, outerColor, d - innerBorder);
            }
          }
        }
        else {
          outColor = vColor;
        }

        `).concat(t.picking?`if(outColor.a == 0.0) discard;
             else outColor = vIndex;`:"",`
      }
    `),s=$B(n,i,a);s.aPosition=n.getAttribLocation(s,"aPosition"),s.aIndex=n.getAttribLocation(s,"aIndex"),s.aVertType=n.getAttribLocation(s,"aVertType"),s.aTransform=n.getAttribLocation(s,"aTransform"),s.aAtlasId=n.getAttribLocation(s,"aAtlasId"),s.aTex=n.getAttribLocation(s,"aTex"),s.aPointAPointB=n.getAttribLocation(s,"aPointAPointB"),s.aPointCPointD=n.getAttribLocation(s,"aPointCPointD"),s.aLineWidth=n.getAttribLocation(s,"aLineWidth"),s.aColor=n.getAttribLocation(s,"aColor"),s.aCornerRadius=n.getAttribLocation(s,"aCornerRadius"),s.aBorderColor=n.getAttribLocation(s,"aBorderColor"),s.uPanZoomMatrix=n.getUniformLocation(s,"uPanZoomMatrix"),s.uAtlasSize=n.getUniformLocation(s,"uAtlasSize"),s.uBGColor=n.getUniformLocation(s,"uBGColor"),s.uZoom=n.getUniformLocation(s,"uZoom"),s.uTextures=[];for(var u=0;u<this.batchManager.getMaxAtlasesPerBatch();u++)s.uTextures.push(n.getUniformLocation(s,"uTexture".concat(u)));return s}},{key:"_createVAO",value:function(){var t=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=t.length/2;var n=this.maxInstances,i=this.gl,o=this.program,a=i.createVertexArray();return i.bindVertexArray(a),iU(i,"vec2",o.aPosition,t),this.transformBuffer=oU(i,n,o.aTransform),this.indexBuffer=Hc(i,n,"vec4",o.aIndex),this.vertTypeBuffer=Hc(i,n,"int",o.aVertType),this.atlasIdBuffer=Hc(i,n,"int",o.aAtlasId),this.texBuffer=Hc(i,n,"vec4",o.aTex),this.pointAPointBBuffer=Hc(i,n,"vec4",o.aPointAPointB),this.pointCPointDBuffer=Hc(i,n,"vec4",o.aPointCPointD),this.lineWidthBuffer=Hc(i,n,"vec2",o.aLineWidth),this.colorBuffer=Hc(i,n,"vec4",o.aColor),this.cornerRadiusBuffer=Hc(i,n,"vec4",o.aCornerRadius),this.borderColorBuffer=Hc(i,n,"vec4",o.aBorderColor),i.bindVertexArray(null),a}},{key:"buffers",get:function(){var t=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(n){return n.endsWith("Buffer")}).map(function(n){return t[n]})),this._buffers}},{key:"startFrame",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:my.SCREEN;this.panZoomMatrix=t,this.renderTarget=n,this.batchDebugInfo=[],this.wrappedCount=0,this.simpleCount=0,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.batchManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"_isVisible",value:function(t,n){return t.visible()?n&&n.isVisible?n.isVisible(t):!0:!1}},{key:"drawTexture",value:function(t,n,i){var o=this.atlasManager,a=this.batchManager,s=o.getRenderTypeOpts(i);if(this._isVisible(t,s)){if(this.renderTarget.picking&&s.getTexPickingMode){var u=s.getTexPickingMode(t);if(u===f0.IGNORE)return;if(u==f0.USE_BB){this.drawPickingRectangle(t,n,i);return}}var l=o.getAtlasInfo(t,i),c=Gs(l),f;try{for(c.s();!(f=c.n()).done;){var h=f.value,d=h.atlas,v=h.tex1,g=h.tex2;a.canAddToCurrentBatch(d)||this.endBatch();for(var _=a.getAtlasIndexForBatch(d),y=0,p=[[v,!0],[g,!1]];y<p.length;y++){var m=Lo(p[y],2),E=m[0],C=m[1];if(E.w!=0){var P=this.instanceCount;this.vertTypeBuffer.getView(P)[0]=Q_;var T=this.indexBuffer.getView(P);Wp(n,T);var R=this.atlasIdBuffer.getView(P);R[0]=_;var D=this.texBuffer.getView(P);D[0]=E.x,D[1]=E.y,D[2]=E.w,D[3]=E.h;var L=this.transformBuffer.getMatrixView(P);this.setTransformMatrix(t,L,s,h,C),this.instanceCount++,C||this.wrappedCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}catch(j){c.e(j)}finally{c.f()}}}},{key:"setTransformMatrix",value:function(t,n,i,o){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=0;if(i.shapeProps&&i.shapeProps.padding&&(s=t.pstyle(i.shapeProps.padding).pfValue),o){var u=o.bb,l=o.tex1,c=o.tex2,f=l.w/(l.w+c.w);a||(f=1-f);var h=this._getAdjustedBB(u,s,a,f);this._applyTransformMatrix(n,h,i,t)}else{var d=i.getBoundingBox(t),v=this._getAdjustedBB(d,s,!0,1);this._applyTransformMatrix(n,v,i,t)}}},{key:"_applyTransformMatrix",value:function(t,n,i,o){var a,s;G2(t);var u=i.getRotation?i.getRotation(o):0;if(u!==0){var l=i.getRotationPoint(o),c=l.x,f=l.y;Hm(t,t,[c,f]),V2(t,t,u);var h=i.getRotationOffset(o);a=h.x+(n.xOffset||0),s=h.y+(n.yOffset||0)}else a=n.x1,s=n.y1;Hm(t,t,[a,s]),iS(t,t,[n.w,n.h])}},{key:"_getAdjustedBB",value:function(t,n,i,o){var a=t.x1,s=t.y1,u=t.w,l=t.h,c=t.yOffset;n&&(a-=n,s-=n,u+=2*n,l+=2*n);var f=0,h=u*o;return i&&o<1?u=h:!i&&o<1&&(f=u-h,a+=f,u=h),{x1:a,y1:s,w:u,h:l,xOffset:f,yOffset:c}}},{key:"drawPickingRectangle",value:function(t,n,i){var o=this.atlasManager.getRenderTypeOpts(i),a=this.instanceCount;this.vertTypeBuffer.getView(a)[0]=Hp;var s=this.indexBuffer.getView(a);Wp(n,s);var u=this.colorBuffer.getView(a);wv([0,0,0],1,u);var l=this.transformBuffer.getMatrixView(a);this.setTransformMatrix(t,l,o),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}},{key:"drawNode",value:function(t,n,i){var o=this.simpleShapeOptions.get(i);if(this._isVisible(t,o)){var a=o.shapeProps,s=this._getVertTypeForShape(t,a.shape);if(s===void 0||o.isSimple&&!o.isSimple(t)){this.drawTexture(t,n,i);return}var u=this.instanceCount;if(this.vertTypeBuffer.getView(u)[0]=s,s===Om||s===ey){var l=o.getBoundingBox(t),c=this._getCornerRadius(t,a.radius,l),f=this.cornerRadiusBuffer.getView(u);f[0]=c,f[1]=c,f[2]=c,f[3]=c,s===ey&&(f[0]=0,f[2]=0)}var h=this.indexBuffer.getView(u);Wp(n,h);var d=t.pstyle(a.color).value,v=t.pstyle(a.opacity).value,g=this.colorBuffer.getView(u);wv(d,v,g);var _=this.lineWidthBuffer.getView(u);if(_[0]=0,_[1]=0,a.border){var y=t.pstyle("border-width").value;if(y>0){var p=t.pstyle("border-color").value,m=t.pstyle("border-opacity").value,E=this.borderColorBuffer.getView(u);wv(p,m,E);var C=t.pstyle("border-position").value;if(C==="inside")_[0]=0,_[1]=-y;else if(C==="outside")_[0]=y,_[1]=0;else{var P=y/2;_[0]=P,_[1]=-P}}}var T=this.transformBuffer.getMatrixView(u);this.setTransformMatrix(t,T,o),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"_getVertTypeForShape",value:function(t,n){var i=t.pstyle(n).value;switch(i){case"rectangle":return Hp;case"ellipse":return ty;case"roundrectangle":case"round-rectangle":return Om;case"bottom-round-rectangle":return ey;default:return}}},{key:"_getCornerRadius",value:function(t,n,i){var o=i.w,a=i.h;if(t.pstyle(n).value==="auto")return hd(o,a);var s=t.pstyle(n).pfValue,u=o/2,l=a/2;return Math.min(s,l,u)}},{key:"drawEdgeArrow",value:function(t,n,i){if(t.visible()){var o=t._private.rscratch,a,s,u;if(i==="source"?(a=o.arrowStartX,s=o.arrowStartY,u=o.srcArrowAngle):(a=o.arrowEndX,s=o.arrowEndY,u=o.tgtArrowAngle),!(isNaN(a)||a==null||isNaN(s)||s==null||isNaN(u)||u==null)){var l=t.pstyle(i+"-arrow-shape").value;if(l!=="none"){var c=t.pstyle(i+"-arrow-color").value,f=t.pstyle("opacity").value,h=t.pstyle("line-opacity").value,d=f*h,v=t.pstyle("width").pfValue,g=t.pstyle("arrow-scale").value,_=this.r.getArrowWidth(v,g),y=this.instanceCount,p=this.transformBuffer.getMatrixView(y);G2(p),Hm(p,p,[a,s]),iS(p,p,[_,_]),V2(p,p,u),this.vertTypeBuffer.getView(y)[0]=J_;var m=this.indexBuffer.getView(y);Wp(n,m);var E=this.colorBuffer.getView(y);wv(c,d,E),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"drawEdgeLine",value:function(t,n){if(t.visible()){var i=this._getEdgePoints(t);if(i){var o=t.pstyle("opacity").value,a=t.pstyle("line-opacity").value,s=t.pstyle("width").pfValue,u=t.pstyle("line-color").value,l=o*a;if(i.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),i.length==4){var c=this.instanceCount;this.vertTypeBuffer.getView(c)[0]=W2;var f=this.indexBuffer.getView(c);Wp(n,f);var h=this.colorBuffer.getView(c);wv(u,l,h);var d=this.lineWidthBuffer.getView(c);d[0]=s;var v=this.pointAPointBBuffer.getView(c);v[0]=i[0],v[1]=i[1],v[2]=i[2],v[3]=i[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var g=0;g<i.length-2;g+=2){var _=this.instanceCount;this.vertTypeBuffer.getView(_)[0]=H2;var y=this.indexBuffer.getView(_);Wp(n,y);var p=this.colorBuffer.getView(_);wv(u,l,p);var m=this.lineWidthBuffer.getView(_);m[0]=s;var E=i[g-2],C=i[g-1],P=i[g],T=i[g+1],R=i[g+2],D=i[g+3],L=i[g+4],j=i[g+5];g==0&&(E=2*P-R+.001,C=2*T-D+.001),g==i.length-4&&(L=2*R-P+.001,j=2*D-T+.001);var F=this.pointAPointBBuffer.getView(_);F[0]=E,F[1]=C,F[2]=P,F[3]=T;var q=this.pointCPointDBuffer.getView(_);q[0]=R,q[1]=D,q[2]=L,q[3]=j,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"_getEdgePoints",value:function(t){var n=t._private.rscratch;if(!(n.badLine||n.allpts==null||isNaN(n.allpts[0]))){var i=n.allpts;if(i.length==4)return i;var o=this._getNumSegments(t);return this._getCurveSegmentPoints(i,o)}}},{key:"_getNumSegments",value:function(t){var n=15;return Math.min(Math.max(n,5),this.maxInstances)}},{key:"_getCurveSegmentPoints",value:function(t,n){if(t.length==4)return t;for(var i=Array((n+1)*2),o=0;o<=n;o++)if(o==0)i[0]=t[0],i[1]=t[1];else if(o==n)i[o*2]=t[t.length-2],i[o*2+1]=t[t.length-1];else{var a=o/n;this._setCurvePoint(t,a,i,o*2)}return i}},{key:"_setCurvePoint",value:function(t,n,i,o){if(t.length<=2)i[o]=t[0],i[o+1]=t[1];else{for(var a=Array(t.length-2),s=0;s<a.length;s+=2){var u=(1-n)*t[s]+n*t[s+2],l=(1-n)*t[s+1]+n*t[s+3];a[s]=u,a[s+1]=l}return this._setCurvePoint(a,n,i,o)}}},{key:"endBatch",value:function(){var t=this.gl,n=this.vao,i=this.vertexCount,o=this.instanceCount;if(o!==0){var a=this.renderTarget.picking?this.pickingProgram:this.program;t.useProgram(a),t.bindVertexArray(n);var s=Gs(this.buffers),u;try{for(s.s();!(u=s.n()).done;){var l=u.value;l.bufferSubData(o)}}catch(v){s.e(v)}finally{s.f()}for(var c=this.batchManager.getAtlases(),f=0;f<c.length;f++)c[f].bufferIfNeeded(t);for(var h=0;h<c.length;h++)t.activeTexture(t.TEXTURE0+h),t.bindTexture(t.TEXTURE_2D,c[h].texture),t.uniform1i(a.uTextures[h],h);t.uniform1f(a.uZoom,ZB(this.r)),t.uniformMatrix3fv(a.uPanZoomMatrix,!1,this.panZoomMatrix),t.uniform1i(a.uAtlasSize,this.batchManager.getAtlasSize());var d=wv(this.bgColor,1);t.uniform4fv(a.uBGColor,d),t.drawArraysInstanced(t.TRIANGLES,0,i,o),t.bindVertexArray(null),t.bindTexture(t.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:o,atlasCount:c.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){var t=this.atlasManager.getDebugInfo(),n=t.reduce(function(a,s){return a+s.atlasCount},0),i=this.batchDebugInfo,o=i.reduce(function(a,s){return a+s.count},0);return{atlasInfo:t,totalAtlases:n,wrappedCount:this.wrappedCount,simpleCount:this.simpleCount,batchCount:i.length,batchInfo:i,totalInstances:o}}}])}(),WM={};WM.initWebgl=function(r,e){var t=this,n=t.data.contexts[t.WEBGL];r.bgColor=bU(t),r.webglTexSize=Math.min(r.webglTexSize,n.getParameter(n.MAX_TEXTURE_SIZE)),r.webglTexRows=Math.min(r.webglTexRows,54),r.webglTexRowsNodes=Math.min(r.webglTexRowsNodes,54),r.webglBatchSize=Math.min(r.webglBatchSize,16384),r.webglTexPerBatch=Math.min(r.webglTexPerBatch,n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)),t.webglDebug=r.webglDebug,t.webglDebugShowAtlases=r.webglDebugShowAtlases,t.pickingFrameBuffer=aU(n),t.pickingFrameBuffer.needsDraw=!0,t.drawing=new mU(t,n,r);var i=function(f){return function(h){return t.getTextAngle(h,f)}},o=function(f){return function(h){var d=h.pstyle(f);return d&&d.value}},a=function(f){return function(h){return h.pstyle("".concat(f,"-opacity")).value>0}},s=function(f){var h=f.pstyle("text-events").strValue==="yes";return h?f0.USE_BB:f0.IGNORE},u=function(f){var h=f.position(),d=h.x,v=h.y,g=f.outerWidth(),_=f.outerHeight();return{w:g,h:_,x1:d-g/2,y1:v-_/2}};t.drawing.addAtlasCollection("node",{texRows:r.webglTexRowsNodes}),t.drawing.addAtlasCollection("label",{texRows:r.webglTexRows}),t.drawing.addTextureAtlasRenderType("node-body",{collection:"node",getKey:e.getStyleKey,getBoundingBox:e.getElementBox,drawElement:e.drawElement}),t.drawing.addSimpleShapeRenderType("node-body",{getBoundingBox:u,isSimple:JB,shapeProps:{shape:"shape",color:"background-color",opacity:"background-opacity",radius:"corner-radius",border:!0}}),t.drawing.addSimpleShapeRenderType("node-overlay",{getBoundingBox:u,isVisible:a("overlay"),shapeProps:{shape:"overlay-shape",color:"overlay-color",opacity:"overlay-opacity",padding:"overlay-padding",radius:"overlay-corner-radius"}}),t.drawing.addSimpleShapeRenderType("node-underlay",{getBoundingBox:u,isVisible:a("underlay"),shapeProps:{shape:"underlay-shape",color:"underlay-color",opacity:"underlay-opacity",padding:"underlay-padding",radius:"underlay-corner-radius"}}),t.drawing.addTextureAtlasRenderType("label",{collection:"label",getTexPickingMode:s,getKey:ew(e.getLabelKey,null),getBoundingBox:tw(e.getLabelBox,null),drawClipped:!0,drawElement:e.drawLabel,getRotation:i(null),getRotationPoint:e.getLabelRotationPoint,getRotationOffset:e.getLabelRotationOffset,isVisible:o("label")}),t.drawing.addTextureAtlasRenderType("edge-source-label",{collection:"label",getTexPickingMode:s,getKey:ew(e.getSourceLabelKey,"source"),getBoundingBox:tw(e.getSourceLabelBox,"source"),drawClipped:!0,drawElement:e.drawSourceLabel,getRotation:i("source"),getRotationPoint:e.getSourceLabelRotationPoint,getRotationOffset:e.getSourceLabelRotationOffset,isVisible:o("source-label")}),t.drawing.addTextureAtlasRenderType("edge-target-label",{collection:"label",getTexPickingMode:s,getKey:ew(e.getTargetLabelKey,"target"),getBoundingBox:tw(e.getTargetLabelBox,"target"),drawClipped:!0,drawElement:e.drawTargetLabel,getRotation:i("target"),getRotationPoint:e.getTargetLabelRotationPoint,getRotationOffset:e.getTargetLabelRotationOffset,isVisible:o("target-label")});var l=Ny(function(){t.data.gc=!0},1e4);t.onUpdateEleCalcs(function(c,f){var h=!1;f&&f.length>0&&(h|=t.drawing.invalidate(f)),h&&l()}),_U(t)};function bU(r){var e=r.cy.container(),t=e&&e.style&&e.style.backgroundColor||"white";return wD(t)}function HM(r,e){var t=r._private.rscratch;return Us(t,"labelWrapCachedLines",e)||[]}var ew=function(e,t){return function(n){var i=e(n),o=HM(n,t);return o.length>1?o.map(function(a,s){return"".concat(i,"_").concat(s)}):i}},tw=function(e,t){return function(n,i){var o=e(n);if(typeof i=="string"){var a=i.indexOf("_");if(a>0){var s=Number(i.substring(a+1)),u=HM(n,t),l=o.h/u.length,c=l*s,f=o.y1+c;return{x1:o.x1,w:o.w,y1:f,h:l,yOffset:c}}}return o}};function _U(r){{var e=r.render;r.render=function(o){o=o||{};var a=r.cy;r.webgl&&(a.zoom()>FM?(wU(r),e.call(r,o)):(EU(r),XM(r,o,my.SCREEN)))}}{var t=r.matchCanvasSize;r.matchCanvasSize=function(o){t.call(r,o),r.pickingFrameBuffer.setFramebufferAttachmentSizes(r.canvasWidth,r.canvasHeight),r.pickingFrameBuffer.needsDraw=!0}}r.findNearestElements=function(o,a,s,u){return PU(r,o,a)};{var n=r.invalidateCachedZSortedEles;r.invalidateCachedZSortedEles=function(){n.call(r),r.pickingFrameBuffer.needsDraw=!0}}{var i=r.notify;r.notify=function(o,a){i.call(r,o,a),o==="viewport"||o==="bounds"?r.pickingFrameBuffer.needsDraw=!0:o==="background"&&r.drawing.invalidate(a,{type:"node-body"})}}}function wU(r){var e=r.data.contexts[r.WEBGL];e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}function EU(r){var e=function(n){n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,r.canvasWidth,r.canvasHeight),n.restore()};e(r.data.contexts[r.NODE]),e(r.data.contexts[r.DRAG])}function OU(r){var e=r.canvasWidth,t=r.canvasHeight,n=US(r),i=n.pan,o=n.zoom,a=Z_();Hm(a,a,[i.x,i.y]),iS(a,a,[o,o]);var s=Z_();uU(s,e,t);var u=Z_();return sU(u,s,a),u}function YM(r,e){var t=r.canvasWidth,n=r.canvasHeight,i=US(r),o=i.pan,a=i.zoom;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t,n),e.translate(o.x,o.y),e.scale(a,a)}function xU(r,e){r.drawSelectionRectangle(e,function(t){return YM(r,t)})}function SU(r){var e=r.data.contexts[r.NODE];e.save(),YM(r,e),e.strokeStyle="rgba(0, 0, 0, 0.3)",e.beginPath(),e.moveTo(-1e3,0),e.lineTo(1e3,0),e.stroke(),e.beginPath(),e.moveTo(0,-1e3),e.lineTo(0,1e3),e.stroke(),e.restore()}function TU(r){var e=function(i,o,a){for(var s=i.atlasManager.getAtlasCollection(o),u=r.data.contexts[r.NODE],l=s.atlases,c=0;c<l.length;c++){var f=l[c],h=f.canvas;if(h){var d=h.width,v=h.height,g=d*c,_=h.height*a,y=.4;u.save(),u.scale(y,y),u.drawImage(h,g,_),u.strokeStyle="black",u.rect(g,_,d,v),u.stroke(),u.restore()}}},t=0;e(r.drawing,"node",t++),e(r.drawing,"label",t++)}function CU(r,e,t,n,i){var o,a,s,u,l=US(r),c=l.pan,f=l.zoom;{var h=QB(r,c,f,e,t),d=Lo(h,2),v=d[0],g=d[1],_=6;o=v-_/2,a=g-_/2,s=_,u=_}if(s===0||u===0)return[];var y=r.data.contexts[r.WEBGL];y.bindFramebuffer(y.FRAMEBUFFER,r.pickingFrameBuffer),r.pickingFrameBuffer.needsDraw&&(y.viewport(0,0,y.canvas.width,y.canvas.height),XM(r,null,my.PICKING),r.pickingFrameBuffer.needsDraw=!1);var p=s*u,m=new Uint8Array(p*4);y.readPixels(o,a,s,u,y.RGBA,y.UNSIGNED_BYTE,m),y.bindFramebuffer(y.FRAMEBUFFER,null);for(var E=new Set,C=0;C<p;C++){var P=m.slice(C*4,C*4+4),T=tU(P)-1;T>=0&&E.add(T)}return E}function PU(r,e,t){var n=CU(r,e,t),i=r.getCachedZSortedEles(),o,a,s=Gs(n),u;try{for(s.s();!(u=s.n()).done;){var l=u.value,c=i[l];if(!o&&c.isNode()&&(o=c),!a&&c.isEdge()&&(a=c),o&&a)break}}catch(f){s.e(f)}finally{s.f()}return[o,a].filter(Boolean)}function rw(r,e,t){var n=r.drawing;e+=1,t.isNode()?(n.drawNode(t,e,"node-underlay"),n.drawNode(t,e,"node-body"),n.drawTexture(t,e,"label"),n.drawNode(t,e,"node-overlay")):(n.drawEdgeLine(t,e),n.drawEdgeArrow(t,e,"source"),n.drawEdgeArrow(t,e,"target"),n.drawTexture(t,e,"label"),n.drawTexture(t,e,"edge-source-label"),n.drawTexture(t,e,"edge-target-label"))}function XM(r,e,t){var n;r.webglDebug&&(n=performance.now());var i=r.drawing,o=0;if(t.screen&&r.data.canvasNeedsRedraw[r.SELECT_BOX]&&xU(r,e),r.data.canvasNeedsRedraw[r.NODE]||t.picking){var a=r.data.contexts[r.WEBGL];t.screen?(a.clearColor(0,0,0,0),a.enable(a.BLEND),a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA)):a.disable(a.BLEND),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),a.viewport(0,0,a.canvas.width,a.canvas.height);var s=OU(r),u=r.getCachedZSortedEles();if(o=u.length,i.startFrame(s,t),t.screen){for(var l=0;l<u.nondrag.length;l++)rw(r,l,u.nondrag[l]);for(var c=0;c<u.drag.length;c++)rw(r,c,u.drag[c])}else if(t.picking)for(var f=0;f<u.length;f++)rw(r,f,u[f]);i.endFrame(),t.screen&&r.webglDebugShowAtlases&&(SU(r),TU(r)),r.data.canvasNeedsRedraw[r.NODE]=!1,r.data.canvasNeedsRedraw[r.DRAG]=!1}if(r.webglDebug){var h=performance.now(),d=!1,v=Math.ceil(h-n),g=i.getDebugInfo(),_=["".concat(o," elements"),"".concat(g.totalInstances," instances"),"".concat(g.batchCount," batches"),"".concat(g.totalAtlases," atlases"),"".concat(g.wrappedCount," wrapped textures"),"".concat(g.simpleCount," simple shapes")].join(", ");if(d)"WebGL (".concat(t.name,") - time ").concat(v,"ms, ").concat(_);else{"WebGL (".concat(t.name,") - frame time ").concat(v,"ms"),"  ".concat(_);var y=g.atlasInfo,p=Gs(y),m;try{for(p.s();!(m=p.n()).done;){var E=m.value;"  ".concat(E.type,": ").concat(E.keyCount," keys, ").concat(E.atlasCount," atlases")}}catch(C){p.e(C)}finally{p.f()}}}r.data.gc&&(r.data.gc=!1,i.gc())}var Ed={};Ed.drawPolygonPath=function(r,e,t,n,i,o){var a=n/2,s=i/2;r.beginPath&&r.beginPath(),r.moveTo(e+a*o[0],t+s*o[1]);for(var u=1;u<o.length/2;u++)r.lineTo(e+a*o[u*2],t+s*o[u*2+1]);r.closePath()};Ed.drawRoundPolygonPath=function(r,e,t,n,i,o,a){a.forEach(function(s){return AM(r,s)}),r.closePath()};Ed.drawRoundRectanglePath=function(r,e,t,n,i,o){var a=n/2,s=i/2,u=o==="auto"?hd(n,i):Math.min(o,s,a);r.beginPath&&r.beginPath(),r.moveTo(e,t-s),r.arcTo(e+a,t-s,e+a,t,u),r.arcTo(e+a,t+s,e,t+s,u),r.arcTo(e-a,t+s,e-a,t,u),r.arcTo(e-a,t-s,e,t-s,u),r.lineTo(e,t-s),r.closePath()};Ed.drawBottomRoundRectanglePath=function(r,e,t,n,i,o){var a=n/2,s=i/2,u=o==="auto"?hd(n,i):o;r.beginPath&&r.beginPath(),r.moveTo(e,t-s),r.lineTo(e+a,t-s),r.lineTo(e+a,t),r.arcTo(e+a,t+s,e,t+s,u),r.arcTo(e-a,t+s,e-a,t,u),r.lineTo(e-a,t-s),r.lineTo(e,t-s),r.closePath()};Ed.drawCutRectanglePath=function(r,e,t,n,i,o,a){var s=n/2,u=i/2,l=a==="auto"?TS():a;r.beginPath&&r.beginPath(),r.moveTo(e-s+l,t-u),r.lineTo(e+s-l,t-u),r.lineTo(e+s,t-u+l),r.lineTo(e+s,t+u-l),r.lineTo(e+s-l,t+u),r.lineTo(e-s+l,t+u),r.lineTo(e-s,t+u-l),r.lineTo(e-s,t-u+l),r.closePath()};Ed.drawBarrelPath=function(r,e,t,n,i){var o=n/2,a=i/2,s=e-o,u=e+o,l=t-a,c=t+a,f=Vx(n,i),h=f.widthOffset,d=f.heightOffset,v=f.ctrlPtOffsetPct*h;r.beginPath&&r.beginPath(),r.moveTo(s,l+d),r.lineTo(s,c-d),r.quadraticCurveTo(s+v,c,s+h,c),r.lineTo(u-h,c),r.quadraticCurveTo(u-v,c,u,c-d),r.lineTo(u,l+d),r.quadraticCurveTo(u-v,l,u-h,l),r.lineTo(s+h,l),r.quadraticCurveTo(s+v,l,s,l+d),r.closePath()};var Y2=Math.sin(0),X2=Math.cos(0),oS={},aS={},$M=Math.PI/40;for(var Yp=0*Math.PI;Yp<2*Math.PI;Yp+=$M)oS[Yp]=Math.sin(Yp),aS[Yp]=Math.cos(Yp);Ed.drawEllipsePath=function(r,e,t,n,i){if(r.beginPath&&r.beginPath(),r.ellipse)r.ellipse(e,t,n/2,i/2,0,0,2*Math.PI);else for(var o,a,s=n/2,u=i/2,l=0*Math.PI;l<2*Math.PI;l+=$M)o=e-s*oS[l]*Y2+s*aS[l]*X2,a=t+u*aS[l]*Y2+u*oS[l]*X2,l===0?r.moveTo(o,a):r.lineTo(o,a);r.closePath()};var zy={};zy.createBuffer=function(r,e){var t=document.createElement("canvas");return t.width=r,t.height=e,[t,t.getContext("2d")]};zy.bufferCanvasImage=function(r){var e=this.cy,t=e.mutableElements(),n=t.boundingBox(),i=this.findContainerClientCoords(),o=r.full?Math.ceil(n.w):i[2],a=r.full?Math.ceil(n.h):i[3],s=zt(r.maxWidth)||zt(r.maxHeight),u=this.getPixelRatio(),l=1;if(r.scale!==void 0)o*=r.scale,a*=r.scale,l=r.scale;else if(s){var c=1/0,f=1/0;zt(r.maxWidth)&&(c=l*r.maxWidth/o),zt(r.maxHeight)&&(f=l*r.maxHeight/a),l=Math.min(c,f),o*=l,a*=l}s||(o*=u,a*=u,l*=u);var h=document.createElement("canvas");h.width=o,h.height=a,h.style.width=o+"px",h.style.height=a+"px";var d=h.getContext("2d");if(o>0&&a>0){d.clearRect(0,0,o,a),d.globalCompositeOperation="source-over";var v=this.getCachedZSortedEles();if(r.full)d.translate(-n.x1*l,-n.y1*l),d.scale(l,l),this.drawElements(d,v),d.scale(1/l,1/l),d.translate(n.x1*l,n.y1*l);else{var g=e.pan(),_={x:g.x*l,y:g.y*l};l*=e.zoom(),d.translate(_.x,_.y),d.scale(l,l),this.drawElements(d,v),d.scale(1/l,1/l),d.translate(-_.x,-_.y)}r.bg&&(d.globalCompositeOperation="destination-over",d.fillStyle=r.bg,d.rect(0,0,o,a),d.fill())}return h};function AU(r,e){for(var t=atob(r),n=new ArrayBuffer(t.length),i=new Uint8Array(n),o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return new Blob([n],{type:e})}function $2(r){var e=r.indexOf(",");return r.substr(e+1)}function KM(r,e,t){var n=function(){return e.toDataURL(t,r.quality)};switch(r.output){case"blob-promise":return new pg(function(i,o){try{e.toBlob(function(a){a!=null?i(a):o(new Error("`canvas.toBlob()` sent a null value in its callback"))},t,r.quality)}catch(a){o(a)}});case"blob":return AU($2(n()),t);case"base64":return $2(n());case"base64uri":default:return n()}}zy.png=function(r){return KM(r,this.bufferCanvasImage(r),"image/png")};zy.jpg=function(r){return KM(r,this.bufferCanvasImage(r),"image/jpeg")};var ZM={};ZM.nodeShapeImpl=function(r,e,t,n,i,o,a,s){switch(r){case"ellipse":return this.drawEllipsePath(e,t,n,i,o);case"polygon":return this.drawPolygonPath(e,t,n,i,o,a);case"round-polygon":return this.drawRoundPolygonPath(e,t,n,i,o,a,s);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,t,n,i,o,s);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,t,n,i,o,a,s);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,t,n,i,o,s);case"barrel":return this.drawBarrelPath(e,t,n,i,o)}};var RU=QM,Qr=QM.prototype;Qr.CANVAS_LAYERS=3;Qr.SELECT_BOX=0;Qr.DRAG=1;Qr.NODE=2;Qr.WEBGL=3;Qr.CANVAS_TYPES=["2d","2d","2d","webgl2"];Qr.BUFFER_COUNT=3;Qr.TEXTURE_BUFFER=0;Qr.MOTIONBLUR_BUFFER_NODE=1;Qr.MOTIONBLUR_BUFFER_DRAG=2;function QM(r){var e=this,t=e.cy.window(),n=t.document;r.webgl&&(Qr.CANVAS_LAYERS=e.CANVAS_LAYERS=4),e.data={canvases:new Array(Qr.CANVAS_LAYERS),contexts:new Array(Qr.CANVAS_LAYERS),canvasNeedsRedraw:new Array(Qr.CANVAS_LAYERS),bufferCanvases:new Array(Qr.BUFFER_COUNT),bufferContexts:new Array(Qr.CANVAS_LAYERS)};var i="-webkit-tap-highlight-color",o="rgba(0,0,0,0)";e.data.canvasContainer=n.createElement("div");var a=e.data.canvasContainer.style;e.data.canvasContainer.style[i]=o,a.position="relative",a.zIndex="0",a.overflow="hidden";var s=r.cy.container();s.appendChild(e.data.canvasContainer),s.style[i]=o;var u={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};Pj()&&(u["-ms-touch-action"]="none",u["touch-action"]="none");for(var l=0;l<Qr.CANVAS_LAYERS;l++){var c=e.data.canvases[l]=n.createElement("canvas"),f=Qr.CANVAS_TYPES[l];e.data.contexts[l]=c.getContext(f),e.data.contexts[l]||Vi("Could not create canvas of type "+f),Object.keys(u).forEach(function(Ie){c.style[Ie]=u[Ie]}),c.style.position="absolute",c.setAttribute("data-id","layer"+l),c.style.zIndex=String(Qr.CANVAS_LAYERS-l),e.data.canvasContainer.appendChild(c),e.data.canvasNeedsRedraw[l]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[Qr.NODE].setAttribute("data-id","layer"+Qr.NODE+"-node"),e.data.canvases[Qr.SELECT_BOX].setAttribute("data-id","layer"+Qr.SELECT_BOX+"-selectbox"),e.data.canvases[Qr.DRAG].setAttribute("data-id","layer"+Qr.DRAG+"-drag"),e.data.canvases[Qr.WEBGL]&&e.data.canvases[Qr.WEBGL].setAttribute("data-id","layer"+Qr.WEBGL+"-webgl");for(var l=0;l<Qr.BUFFER_COUNT;l++)e.data.bufferCanvases[l]=n.createElement("canvas"),e.data.bufferContexts[l]=e.data.bufferCanvases[l].getContext("2d"),e.data.bufferCanvases[l].style.position="absolute",e.data.bufferCanvases[l].setAttribute("data-id","buffer"+l),e.data.bufferCanvases[l].style.zIndex=String(-l-1),e.data.bufferCanvases[l].style.visibility="hidden";e.pathsEnabled=!0;var h=Ws(),d=function(ve){return{x:(ve.x1+ve.x2)/2,y:(ve.y1+ve.y2)/2}},v=function(ve){return{x:-ve.w/2,y:-ve.h/2}},g=function(ve){var we=ve[0]._private,xe=we.oldBackgroundTimestamp===we.backgroundTimestamp;return!xe},_=function(ve){return ve[0]._private.nodeKey},y=function(ve){return ve[0]._private.labelStyleKey},p=function(ve){return ve[0]._private.sourceLabelStyleKey},m=function(ve){return ve[0]._private.targetLabelStyleKey},E=function(ve,we,xe,Fe,He){return e.drawElement(ve,we,xe,!1,!1,He)},C=function(ve,we,xe,Fe,He){return e.drawElementText(ve,we,xe,Fe,"main",He)},P=function(ve,we,xe,Fe,He){return e.drawElementText(ve,we,xe,Fe,"source",He)},T=function(ve,we,xe,Fe,He){return e.drawElementText(ve,we,xe,Fe,"target",He)},R=function(ve){return ve.boundingBox(),ve[0]._private.bodyBounds},D=function(ve){return ve.boundingBox(),ve[0]._private.labelBounds.main||h},L=function(ve){return ve.boundingBox(),ve[0]._private.labelBounds.source||h},j=function(ve){return ve.boundingBox(),ve[0]._private.labelBounds.target||h},F=function(ve,we){return we},q=function(ve){return d(R(ve))},W=function(ve,we,xe){var Fe=ve?ve+"-":"";return{x:we.x+xe.pstyle(Fe+"text-margin-x").pfValue,y:we.y+xe.pstyle(Fe+"text-margin-y").pfValue}},Z=function(ve,we,xe){var Fe=ve[0]._private.rscratch;return{x:Fe[we],y:Fe[xe]}},Q=function(ve){return W("",Z(ve,"labelX","labelY"),ve)},re=function(ve){return W("source",Z(ve,"sourceLabelX","sourceLabelY"),ve)},ee=function(ve){return W("target",Z(ve,"targetLabelX","targetLabelY"),ve)},ue=function(ve){return v(R(ve))},de=function(ve){return v(L(ve))},se=function(ve){return v(j(ve))},be=function(ve){var we=D(ve),xe=v(D(ve));if(ve.isNode()){switch(ve.pstyle("text-halign").value){case"left":xe.x=-we.w-(we.leftPad||0);break;case"right":xe.x=-(we.rightPad||0);break}switch(ve.pstyle("text-valign").value){case"top":xe.y=-we.h-(we.topPad||0);break;case"bottom":xe.y=-(we.botPad||0);break}}return xe},Le=e.data.eleTxrCache=new uy(e,{getKey:_,doesEleInvalidateKey:g,drawElement:E,getBoundingBox:R,getRotationPoint:q,getRotationOffset:ue,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),fe=e.data.lblTxrCache=new uy(e,{getKey:y,drawElement:C,getBoundingBox:D,getRotationPoint:Q,getRotationOffset:be,isVisible:F}),ce=e.data.slbTxrCache=new uy(e,{getKey:p,drawElement:P,getBoundingBox:L,getRotationPoint:re,getRotationOffset:de,isVisible:F}),Ee=e.data.tlbTxrCache=new uy(e,{getKey:m,drawElement:T,getBoundingBox:j,getRotationPoint:ee,getRotationOffset:se,isVisible:F}),Ce=e.data.lyrTxrCache=new BM(e);e.onUpdateEleCalcs(function(ve,we){Le.invalidateElements(we),fe.invalidateElements(we),ce.invalidateElements(we),Ee.invalidateElements(we),Ce.invalidateElements(we);for(var xe=0;xe<we.length;xe++){var Fe=we[xe]._private;Fe.oldBackgroundTimestamp=Fe.backgroundTimestamp}});var ke=function(ve){for(var we=0;we<ve.length;we++)Ce.enqueueElementRefinement(ve[we].ele)};Le.onDequeue(ke),fe.onDequeue(ke),ce.onDequeue(ke),Ee.onDequeue(ke),r.webgl&&e.initWebgl(r,{getStyleKey:_,getLabelKey:y,getSourceLabelKey:p,getTargetLabelKey:m,drawElement:E,drawLabel:C,drawSourceLabel:P,drawTargetLabel:T,getElementBox:R,getLabelBox:D,getSourceLabelBox:L,getTargetLabelBox:j,getElementRotationPoint:q,getElementRotationOffset:ue,getLabelRotationPoint:Q,getSourceLabelRotationPoint:re,getTargetLabelRotationPoint:ee,getLabelRotationOffset:be,getSourceLabelRotationOffset:de,getTargetLabelRotationOffset:se})}Qr.redrawHint=function(r,e){var t=this;switch(r){case"eles":t.data.canvasNeedsRedraw[Qr.NODE]=e;break;case"drag":t.data.canvasNeedsRedraw[Qr.DRAG]=e;break;case"select":t.data.canvasNeedsRedraw[Qr.SELECT_BOX]=e;break;case"gc":t.data.gc=!0;break}};var IU=typeof Path2D<"u";Qr.path2dEnabled=function(r){if(r===void 0)return this.pathsEnabled;this.pathsEnabled=!!r};Qr.usePaths=function(){return IU&&this.pathsEnabled};Qr.setImgSmoothing=function(r,e){r.imageSmoothingEnabled!=null?r.imageSmoothingEnabled=e:(r.webkitImageSmoothingEnabled=e,r.mozImageSmoothingEnabled=e,r.msImageSmoothingEnabled=e)};Qr.getImgSmoothing=function(r){return r.imageSmoothingEnabled!=null?r.imageSmoothingEnabled:r.webkitImageSmoothingEnabled||r.mozImageSmoothingEnabled||r.msImageSmoothingEnabled};Qr.makeOffscreenCanvas=function(r,e){var t;if((typeof OffscreenCanvas>"u"?"undefined":Fo(OffscreenCanvas))!=="undefined")t=new OffscreenCanvas(r,e);else{var n=this.cy.window(),i=n.document;t=i.createElement("canvas"),t.width=r,t.height=e}return t};[UM,Jc,sh,BS,Yv,wd,_s,WM,Ed,zy,ZM].forEach(function(r){xr(Qr,r)});var kU=[{name:"null",impl:TM},{name:"base",impl:NM},{name:"canvas",impl:RU}],DU=[{type:"layout",extensions:oB},{type:"renderer",extensions:kU}],JM={},eL={};function tL(r,e,t){var n=t,i=function(R){Bn("Can not register `"+e+"` for `"+r+"` since `"+R+"` already exists in the prototype and can not be overridden")};if(r==="core"){if(Py.prototype[e])return i(e);Py.prototype[e]=t}else if(r==="collection"){if(xa.prototype[e])return i(e);xa.prototype[e]=t}else if(r==="layout"){for(var o=function(R){this.options=R,t.call(this,R),wn(this._private)||(this._private={}),this._private.cy=R.cy,this._private.listeners=[],this.createEmitter()},a=o.prototype=Object.create(t.prototype),s=[],u=0;u<s.length;u++){var l=s[u];a[l]=a[l]||function(){return this}}a.start&&!a.run?a.run=function(){return this.start(),this}:!a.start&&a.run&&(a.start=function(){return this.run(),this});var c=t.prototype.stop;a.stop=function(){var T=this.options;if(T&&T.animate){var R=this.animations;if(R)for(var D=0;D<R.length;D++)R[D].stop()}return c?c.call(this):this.emit("layoutstop"),this},a.destroy||(a.destroy=function(){return this}),a.cy=function(){return this._private.cy};var f=function(R){return R._private.cy},h={addEventFields:function(R,D){D.layout=R,D.cy=f(R),D.target=R},bubble:function(){return!0},parent:function(R){return f(R)}};xr(a,{createEmitter:function(){return this._private.emitter=new P0(h,this),this},emitter:function(){return this._private.emitter},on:function(R,D){return this.emitter().on(R,D),this},one:function(R,D){return this.emitter().one(R,D),this},once:function(R,D){return this.emitter().one(R,D),this},removeListener:function(R,D){return this.emitter().removeListener(R,D),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(R,D){return this.emitter().emit(R,D),this}}),Fn.eventAliasesOn(a),n=o}else if(r==="renderer"&&e!=="null"&&e!=="base"){var d=rL("renderer","base"),v=d.prototype,g=t,_=t.prototype,y=function(){d.apply(this,arguments),g.apply(this,arguments)},p=y.prototype;for(var m in v){var E=v[m],C=_[m]!=null;if(C)return i(m);p[m]=E}for(var P in _)p[P]=_[P];v.clientFunctions.forEach(function(T){p[T]=p[T]||function(){Vi("Renderer does not implement `renderer."+T+"()` on its prototype")}}),n=y}else if(r==="__proto__"||r==="constructor"||r==="prototype")return Vi(r+" is an illegal type to be registered, possibly lead to prototype pollutions");return ED({map:JM,keys:[r,e],value:n})}function rL(r,e){return OD({map:JM,keys:[r,e]})}function MU(r,e,t,n,i){return ED({map:eL,keys:[r,e,t,n],value:i})}function LU(r,e,t,n){return OD({map:eL,keys:[r,e,t,n]})}var sS=function(){if(arguments.length===2)return rL.apply(null,arguments);if(arguments.length===3)return tL.apply(null,arguments);if(arguments.length===4)return LU.apply(null,arguments);if(arguments.length===5)return MU.apply(null,arguments);Vi("Invalid extension access syntax")};Py.prototype.extension=sS;DU.forEach(function(r){r.extensions.forEach(function(e){tL(r.type,e.name,e.impl)})});var h0=function(){if(!(this instanceof h0))return new h0;this.length=0},Vv=h0.prototype;Vv.instanceString=function(){return"stylesheet"};Vv.selector=function(r){var e=this.length++;return this[e]={selector:r,properties:[]},this};Vv.css=function(r,e){var t=this.length-1;if(yr(r))this[t].properties.push({name:r,value:e});else if(wn(r))for(var n=r,i=Object.keys(n),o=0;o<i.length;o++){var a=i[o],s=n[a];if(s!=null){var u=ta.properties[a]||ta.properties[m0(a)];if(u!=null){var l=u.name,c=s;this[t].properties.push({name:l,value:c})}}}return this};Vv.style=Vv.css;Vv.generateStyle=function(r){var e=new ta(r);return this.appendToStyle(e)};Vv.appendToStyle=function(r){for(var e=0;e<this.length;e++){var t=this[e],n=t.selector,i=t.properties;r.selector(n);for(var o=0;o<i.length;o++){var a=i[o];r.css(a.name,a.value)}}return r};var NU="3.32.0",gd=function(e){if(e===void 0&&(e={}),wn(e))return new Py(e);if(yr(e))return sS.apply(sS,arguments)};gd.use=function(r){var e=Array.prototype.slice.call(arguments,1);return e.unshift(gd),r.apply(null,e),this};gd.warnings=function(r){return RD(r)};gd.version=NU;gd.stylesheet=gd.Stylesheet=h0;var Ym={exports:{}},Xm={exports:{}},$m={exports:{}},jU=$m.exports,K2;function FU(){return K2||(K2=1,function(r,e){(function(n,i){r.exports=i()})(jU,function(){return function(t){var n={};function i(o){if(n[o])return n[o].exports;var a=n[o]={i:o,l:!1,exports:{}};return t[o].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=t,i.c=n,i.i=function(o){return o},i.d=function(o,a,s){i.o(o,a)||Object.defineProperty(o,a,{configurable:!1,enumerable:!0,get:s})},i.n=function(o){var a=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(a,"a",a),a},i.o=function(o,a){return Object.prototype.hasOwnProperty.call(o,a)},i.p="",i(i.s=26)}([function(t,n,i){function o(){}o.QUALITY=1,o.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,o.DEFAULT_INCREMENTAL=!1,o.DEFAULT_ANIMATION_ON_LAYOUT=!0,o.DEFAULT_ANIMATION_DURING_LAYOUT=!1,o.DEFAULT_ANIMATION_PERIOD=50,o.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,o.DEFAULT_GRAPH_MARGIN=15,o.NODE_DIMENSIONS_INCLUDE_LABELS=!1,o.SIMPLE_NODE_SIZE=40,o.SIMPLE_NODE_HALF_SIZE=o.SIMPLE_NODE_SIZE/2,o.EMPTY_COMPOUND_NODE_SIZE=40,o.MIN_EDGE_LENGTH=1,o.WORLD_BOUNDARY=1e6,o.INITIAL_WORLD_BOUNDARY=o.WORLD_BOUNDARY/1e3,o.WORLD_CENTER_X=1200,o.WORLD_CENTER_Y=900,t.exports=o},function(t,n,i){var o=i(2),a=i(8),s=i(9);function u(c,f,h){o.call(this,h),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=h,this.bendpoints=[],this.source=c,this.target=f}u.prototype=Object.create(o.prototype);for(var l in o)u[l]=o[l];u.prototype.getSource=function(){return this.source},u.prototype.getTarget=function(){return this.target},u.prototype.isInterGraph=function(){return this.isInterGraph},u.prototype.getLength=function(){return this.length},u.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},u.prototype.getBendpoints=function(){return this.bendpoints},u.prototype.getLca=function(){return this.lca},u.prototype.getSourceInLca=function(){return this.sourceInLca},u.prototype.getTargetInLca=function(){return this.targetInLca},u.prototype.getOtherEnd=function(c){if(this.source===c)return this.target;if(this.target===c)return this.source;throw"Node is not incident with this edge"},u.prototype.getOtherEndInGraph=function(c,f){for(var h=this.getOtherEnd(c),d=f.getGraphManager().getRoot();;){if(h.getOwner()==f)return h;if(h.getOwner()==d)break;h=h.getOwner().getParent()}return null},u.prototype.updateLength=function(){var c=new Array(4);this.isOverlapingSourceAndTarget=a.getIntersection(this.target.getRect(),this.source.getRect(),c),this.isOverlapingSourceAndTarget||(this.lengthX=c[0]-c[2],this.lengthY=c[1]-c[3],Math.abs(this.lengthX)<1&&(this.lengthX=s.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=s.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},u.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=s.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=s.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},t.exports=u},function(t,n,i){function o(a){this.vGraphObject=a}t.exports=o},function(t,n,i){var o=i(2),a=i(10),s=i(13),u=i(0),l=i(16),c=i(4);function f(d,v,g,_){g==null&&_==null&&(_=v),o.call(this,_),d.graphManager!=null&&(d=d.graphManager),this.estimatedSize=a.MIN_VALUE,this.inclusionTreeDepth=a.MAX_VALUE,this.vGraphObject=_,this.edges=[],this.graphManager=d,g!=null&&v!=null?this.rect=new s(v.x,v.y,g.width,g.height):this.rect=new s}f.prototype=Object.create(o.prototype);for(var h in o)f[h]=o[h];f.prototype.getEdges=function(){return this.edges},f.prototype.getChild=function(){return this.child},f.prototype.getOwner=function(){return this.owner},f.prototype.getWidth=function(){return this.rect.width},f.prototype.setWidth=function(d){this.rect.width=d},f.prototype.getHeight=function(){return this.rect.height},f.prototype.setHeight=function(d){this.rect.height=d},f.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},f.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},f.prototype.getCenter=function(){return new c(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},f.prototype.getLocation=function(){return new c(this.rect.x,this.rect.y)},f.prototype.getRect=function(){return this.rect},f.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},f.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},f.prototype.setRect=function(d,v){this.rect.x=d.x,this.rect.y=d.y,this.rect.width=v.width,this.rect.height=v.height},f.prototype.setCenter=function(d,v){this.rect.x=d-this.rect.width/2,this.rect.y=v-this.rect.height/2},f.prototype.setLocation=function(d,v){this.rect.x=d,this.rect.y=v},f.prototype.moveBy=function(d,v){this.rect.x+=d,this.rect.y+=v},f.prototype.getEdgeListToNode=function(d){var v=[],g=this;return g.edges.forEach(function(_){if(_.target==d){if(_.source!=g)throw"Incorrect edge source!";v.push(_)}}),v},f.prototype.getEdgesBetween=function(d){var v=[],g=this;return g.edges.forEach(function(_){if(!(_.source==g||_.target==g))throw"Incorrect edge source and/or target";(_.target==d||_.source==d)&&v.push(_)}),v},f.prototype.getNeighborsList=function(){var d=new Set,v=this;return v.edges.forEach(function(g){if(g.source==v)d.add(g.target);else{if(g.target!=v)throw"Incorrect incidency!";d.add(g.source)}}),d},f.prototype.withChildren=function(){var d=new Set,v,g;if(d.add(this),this.child!=null)for(var _=this.child.getNodes(),y=0;y<_.length;y++)v=_[y],g=v.withChildren(),g.forEach(function(p){d.add(p)});return d},f.prototype.getNoOfChildren=function(){var d=0,v;if(this.child==null)d=1;else for(var g=this.child.getNodes(),_=0;_<g.length;_++)v=g[_],d+=v.getNoOfChildren();return d==0&&(d=1),d},f.prototype.getEstimatedSize=function(){if(this.estimatedSize==a.MIN_VALUE)throw"assert failed";return this.estimatedSize},f.prototype.calcEstimatedSize=function(){return this.child==null?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},f.prototype.scatter=function(){var d,v,g=-u.INITIAL_WORLD_BOUNDARY,_=u.INITIAL_WORLD_BOUNDARY;d=u.WORLD_CENTER_X+l.nextDouble()*(_-g)+g;var y=-u.INITIAL_WORLD_BOUNDARY,p=u.INITIAL_WORLD_BOUNDARY;v=u.WORLD_CENTER_Y+l.nextDouble()*(p-y)+y,this.rect.x=d,this.rect.y=v},f.prototype.updateBounds=function(){if(this.getChild()==null)throw"assert failed";if(this.getChild().getNodes().length!=0){var d=this.getChild();if(d.updateBounds(!0),this.rect.x=d.getLeft(),this.rect.y=d.getTop(),this.setWidth(d.getRight()-d.getLeft()),this.setHeight(d.getBottom()-d.getTop()),u.NODE_DIMENSIONS_INCLUDE_LABELS){var v=d.getRight()-d.getLeft(),g=d.getBottom()-d.getTop();this.labelWidth>v&&(this.rect.x-=(this.labelWidth-v)/2,this.setWidth(this.labelWidth)),this.labelHeight>g&&(this.labelPos=="center"?this.rect.y-=(this.labelHeight-g)/2:this.labelPos=="top"&&(this.rect.y-=this.labelHeight-g),this.setHeight(this.labelHeight))}}},f.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==a.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},f.prototype.transform=function(d){var v=this.rect.x;v>u.WORLD_BOUNDARY?v=u.WORLD_BOUNDARY:v<-u.WORLD_BOUNDARY&&(v=-u.WORLD_BOUNDARY);var g=this.rect.y;g>u.WORLD_BOUNDARY?g=u.WORLD_BOUNDARY:g<-u.WORLD_BOUNDARY&&(g=-u.WORLD_BOUNDARY);var _=new c(v,g),y=d.inverseTransformPoint(_);this.setLocation(y.x,y.y)},f.prototype.getLeft=function(){return this.rect.x},f.prototype.getRight=function(){return this.rect.x+this.rect.width},f.prototype.getTop=function(){return this.rect.y},f.prototype.getBottom=function(){return this.rect.y+this.rect.height},f.prototype.getParent=function(){return this.owner==null?null:this.owner.getParent()},t.exports=f},function(t,n,i){function o(a,s){a==null&&s==null?(this.x=0,this.y=0):(this.x=a,this.y=s)}o.prototype.getX=function(){return this.x},o.prototype.getY=function(){return this.y},o.prototype.setX=function(a){this.x=a},o.prototype.setY=function(a){this.y=a},o.prototype.getDifference=function(a){return new DimensionD(this.x-a.x,this.y-a.y)},o.prototype.getCopy=function(){return new o(this.x,this.y)},o.prototype.translate=function(a){return this.x+=a.width,this.y+=a.height,this},t.exports=o},function(t,n,i){var o=i(2),a=i(10),s=i(0),u=i(6),l=i(3),c=i(1),f=i(13),h=i(12),d=i(11);function v(_,y,p){o.call(this,p),this.estimatedSize=a.MIN_VALUE,this.margin=s.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=_,y!=null&&y instanceof u?this.graphManager=y:y!=null&&y instanceof Layout&&(this.graphManager=y.graphManager)}v.prototype=Object.create(o.prototype);for(var g in o)v[g]=o[g];v.prototype.getNodes=function(){return this.nodes},v.prototype.getEdges=function(){return this.edges},v.prototype.getGraphManager=function(){return this.graphManager},v.prototype.getParent=function(){return this.parent},v.prototype.getLeft=function(){return this.left},v.prototype.getRight=function(){return this.right},v.prototype.getTop=function(){return this.top},v.prototype.getBottom=function(){return this.bottom},v.prototype.isConnected=function(){return this.isConnected},v.prototype.add=function(_,y,p){if(y==null&&p==null){var m=_;if(this.graphManager==null)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(m)>-1)throw"Node already in graph!";return m.owner=this,this.getNodes().push(m),m}else{var E=_;if(!(this.getNodes().indexOf(y)>-1&&this.getNodes().indexOf(p)>-1))throw"Source or target not in graph!";if(!(y.owner==p.owner&&y.owner==this))throw"Both owners must be this graph!";return y.owner!=p.owner?null:(E.source=y,E.target=p,E.isInterGraph=!1,this.getEdges().push(E),y.edges.push(E),p!=y&&p.edges.push(E),E)}},v.prototype.remove=function(_){var y=_;if(_ instanceof l){if(y==null)throw"Node is null!";if(!(y.owner!=null&&y.owner==this))throw"Owner graph is invalid!";if(this.graphManager==null)throw"Owner graph manager is invalid!";for(var p=y.edges.slice(),m,E=p.length,C=0;C<E;C++)m=p[C],m.isInterGraph?this.graphManager.remove(m):m.source.owner.remove(m);var P=this.nodes.indexOf(y);if(P==-1)throw"Node not in owner node list!";this.nodes.splice(P,1)}else if(_ instanceof c){var m=_;if(m==null)throw"Edge is null!";if(!(m.source!=null&&m.target!=null))throw"Source and/or target is null!";if(!(m.source.owner!=null&&m.target.owner!=null&&m.source.owner==this&&m.target.owner==this))throw"Source and/or target owner is invalid!";var T=m.source.edges.indexOf(m),R=m.target.edges.indexOf(m);if(!(T>-1&&R>-1))throw"Source and/or target doesn't know this edge!";m.source.edges.splice(T,1),m.target!=m.source&&m.target.edges.splice(R,1);var P=m.source.owner.getEdges().indexOf(m);if(P==-1)throw"Not in owner's edge list!";m.source.owner.getEdges().splice(P,1)}},v.prototype.updateLeftTop=function(){for(var _=a.MAX_VALUE,y=a.MAX_VALUE,p,m,E,C=this.getNodes(),P=C.length,T=0;T<P;T++){var R=C[T];p=R.getTop(),m=R.getLeft(),_>p&&(_=p),y>m&&(y=m)}return _==a.MAX_VALUE?null:(C[0].getParent().paddingLeft!=null?E=C[0].getParent().paddingLeft:E=this.margin,this.left=y-E,this.top=_-E,new h(this.left,this.top))},v.prototype.updateBounds=function(_){for(var y=a.MAX_VALUE,p=-a.MAX_VALUE,m=a.MAX_VALUE,E=-a.MAX_VALUE,C,P,T,R,D,L=this.nodes,j=L.length,F=0;F<j;F++){var q=L[F];_&&q.child!=null&&q.updateBounds(),C=q.getLeft(),P=q.getRight(),T=q.getTop(),R=q.getBottom(),y>C&&(y=C),p<P&&(p=P),m>T&&(m=T),E<R&&(E=R)}var W=new f(y,m,p-y,E-m);y==a.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),L[0].getParent().paddingLeft!=null?D=L[0].getParent().paddingLeft:D=this.margin,this.left=W.x-D,this.right=W.x+W.width+D,this.top=W.y-D,this.bottom=W.y+W.height+D},v.calculateBounds=function(_){for(var y=a.MAX_VALUE,p=-a.MAX_VALUE,m=a.MAX_VALUE,E=-a.MAX_VALUE,C,P,T,R,D=_.length,L=0;L<D;L++){var j=_[L];C=j.getLeft(),P=j.getRight(),T=j.getTop(),R=j.getBottom(),y>C&&(y=C),p<P&&(p=P),m>T&&(m=T),E<R&&(E=R)}var F=new f(y,m,p-y,E-m);return F},v.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},v.prototype.getEstimatedSize=function(){if(this.estimatedSize==a.MIN_VALUE)throw"assert failed";return this.estimatedSize},v.prototype.calcEstimatedSize=function(){for(var _=0,y=this.nodes,p=y.length,m=0;m<p;m++){var E=y[m];_+=E.calcEstimatedSize()}return _==0?this.estimatedSize=s.EMPTY_COMPOUND_NODE_SIZE:this.estimatedSize=_/Math.sqrt(this.nodes.length),this.estimatedSize},v.prototype.updateConnected=function(){var _=this;if(this.nodes.length==0){this.isConnected=!0;return}var y=new d,p=new Set,m=this.nodes[0],E,C,P=m.withChildren();for(P.forEach(function(F){y.push(F),p.add(F)});y.length!==0;){m=y.shift(),E=m.getEdges();for(var T=E.length,R=0;R<T;R++){var D=E[R];if(C=D.getOtherEndInGraph(m,this),C!=null&&!p.has(C)){var L=C.withChildren();L.forEach(function(F){y.push(F),p.add(F)})}}}if(this.isConnected=!1,p.size>=this.nodes.length){var j=0;p.forEach(function(F){F.owner==_&&j++}),j==this.nodes.length&&(this.isConnected=!0)}},t.exports=v},function(t,n,i){var o,a=i(1);function s(u){o=i(5),this.layout=u,this.graphs=[],this.edges=[]}s.prototype.addRoot=function(){var u=this.layout.newGraph(),l=this.layout.newNode(null),c=this.add(u,l);return this.setRootGraph(c),this.rootGraph},s.prototype.add=function(u,l,c,f,h){if(c==null&&f==null&&h==null){if(u==null)throw"Graph is null!";if(l==null)throw"Parent node is null!";if(this.graphs.indexOf(u)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(u),u.parent!=null)throw"Already has a parent!";if(l.child!=null)throw"Already has a child!";return u.parent=l,l.child=u,u}else{h=c,f=l,c=u;var d=f.getOwner(),v=h.getOwner();if(!(d!=null&&d.getGraphManager()==this))throw"Source not in this graph mgr!";if(!(v!=null&&v.getGraphManager()==this))throw"Target not in this graph mgr!";if(d==v)return c.isInterGraph=!1,d.add(c,f,h);if(c.isInterGraph=!0,c.source=f,c.target=h,this.edges.indexOf(c)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(c),!(c.source!=null&&c.target!=null))throw"Edge source and/or target is null!";if(!(c.source.edges.indexOf(c)==-1&&c.target.edges.indexOf(c)==-1))throw"Edge already in source and/or target incidency list!";return c.source.edges.push(c),c.target.edges.push(c),c}},s.prototype.remove=function(u){if(u instanceof o){var l=u;if(l.getGraphManager()!=this)throw"Graph not in this graph mgr";if(!(l==this.rootGraph||l.parent!=null&&l.parent.graphManager==this))throw"Invalid parent node!";var c=[];c=c.concat(l.getEdges());for(var f,h=c.length,d=0;d<h;d++)f=c[d],l.remove(f);var v=[];v=v.concat(l.getNodes());var g;h=v.length;for(var d=0;d<h;d++)g=v[d],l.remove(g);l==this.rootGraph&&this.setRootGraph(null);var _=this.graphs.indexOf(l);this.graphs.splice(_,1),l.parent=null}else if(u instanceof a){if(f=u,f==null)throw"Edge is null!";if(!f.isInterGraph)throw"Not an inter-graph edge!";if(!(f.source!=null&&f.target!=null))throw"Source and/or target is null!";if(!(f.source.edges.indexOf(f)!=-1&&f.target.edges.indexOf(f)!=-1))throw"Source and/or target doesn't know this edge!";var _=f.source.edges.indexOf(f);if(f.source.edges.splice(_,1),_=f.target.edges.indexOf(f),f.target.edges.splice(_,1),!(f.source.owner!=null&&f.source.owner.getGraphManager()!=null))throw"Edge owner graph or owner graph manager is null!";if(f.source.owner.getGraphManager().edges.indexOf(f)==-1)throw"Not in owner graph manager's edge list!";var _=f.source.owner.getGraphManager().edges.indexOf(f);f.source.owner.getGraphManager().edges.splice(_,1)}},s.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},s.prototype.getGraphs=function(){return this.graphs},s.prototype.getAllNodes=function(){if(this.allNodes==null){for(var u=[],l=this.getGraphs(),c=l.length,f=0;f<c;f++)u=u.concat(l[f].getNodes());this.allNodes=u}return this.allNodes},s.prototype.resetAllNodes=function(){this.allNodes=null},s.prototype.resetAllEdges=function(){this.allEdges=null},s.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},s.prototype.getAllEdges=function(){if(this.allEdges==null){var u=[],l=this.getGraphs();l.length;for(var c=0;c<l.length;c++)u=u.concat(l[c].getEdges());u=u.concat(this.edges),this.allEdges=u}return this.allEdges},s.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},s.prototype.setAllNodesToApplyGravitation=function(u){if(this.allNodesToApplyGravitation!=null)throw"assert failed";this.allNodesToApplyGravitation=u},s.prototype.getRoot=function(){return this.rootGraph},s.prototype.setRootGraph=function(u){if(u.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=u,u.parent==null&&(u.parent=this.layout.newNode("Root node"))},s.prototype.getLayout=function(){return this.layout},s.prototype.isOneAncestorOfOther=function(u,l){if(!(u!=null&&l!=null))throw"assert failed";if(u==l)return!0;var c=u.getOwner(),f;do{if(f=c.getParent(),f==null)break;if(f==l)return!0;if(c=f.getOwner(),c==null)break}while(!0);c=l.getOwner();do{if(f=c.getParent(),f==null)break;if(f==u)return!0;if(c=f.getOwner(),c==null)break}while(!0);return!1},s.prototype.calcLowestCommonAncestors=function(){for(var u,l,c,f,h,d=this.getAllEdges(),v=d.length,g=0;g<v;g++){if(u=d[g],l=u.source,c=u.target,u.lca=null,u.sourceInLca=l,u.targetInLca=c,l==c){u.lca=l.getOwner();continue}for(f=l.getOwner();u.lca==null;){for(u.targetInLca=c,h=c.getOwner();u.lca==null;){if(h==f){u.lca=h;break}if(h==this.rootGraph)break;if(u.lca!=null)throw"assert failed";u.targetInLca=h.getParent(),h=u.targetInLca.getOwner()}if(f==this.rootGraph)break;u.lca==null&&(u.sourceInLca=f.getParent(),f=u.sourceInLca.getOwner())}if(u.lca==null)throw"assert failed"}},s.prototype.calcLowestCommonAncestor=function(u,l){if(u==l)return u.getOwner();var c=u.getOwner();do{if(c==null)break;var f=l.getOwner();do{if(f==null)break;if(f==c)return f;f=f.getParent().getOwner()}while(!0);c=c.getParent().getOwner()}while(!0);return c},s.prototype.calcInclusionTreeDepths=function(u,l){u==null&&l==null&&(u=this.rootGraph,l=1);for(var c,f=u.getNodes(),h=f.length,d=0;d<h;d++)c=f[d],c.inclusionTreeDepth=l,c.child!=null&&this.calcInclusionTreeDepths(c.child,l+1)},s.prototype.includesInvalidEdge=function(){for(var u,l=this.edges.length,c=0;c<l;c++)if(u=this.edges[c],this.isOneAncestorOfOther(u.source,u.target))return!0;return!1},t.exports=s},function(t,n,i){var o=i(0);function a(){}for(var s in o)a[s]=o[s];a.MAX_ITERATIONS=2500,a.DEFAULT_EDGE_LENGTH=50,a.DEFAULT_SPRING_STRENGTH=.45,a.DEFAULT_REPULSION_STRENGTH=4500,a.DEFAULT_GRAVITY_STRENGTH=.4,a.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,a.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,a.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,a.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,a.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,a.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,a.COOLING_ADAPTATION_FACTOR=.33,a.ADAPTATION_LOWER_NODE_LIMIT=1e3,a.ADAPTATION_UPPER_NODE_LIMIT=5e3,a.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,a.MAX_NODE_DISPLACEMENT=a.MAX_NODE_DISPLACEMENT_INCREMENTAL*3,a.MIN_REPULSION_DIST=a.DEFAULT_EDGE_LENGTH/10,a.CONVERGENCE_CHECK_PERIOD=100,a.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,a.MIN_EDGE_LENGTH=1,a.GRID_CALCULATION_CHECK_PERIOD=10,t.exports=a},function(t,n,i){var o=i(12);function a(){}a.calcSeparationAmount=function(s,u,l,c){if(!s.intersects(u))throw"assert failed";var f=new Array(2);this.decideDirectionsForOverlappingNodes(s,u,f),l[0]=Math.min(s.getRight(),u.getRight())-Math.max(s.x,u.x),l[1]=Math.min(s.getBottom(),u.getBottom())-Math.max(s.y,u.y),s.getX()<=u.getX()&&s.getRight()>=u.getRight()?l[0]+=Math.min(u.getX()-s.getX(),s.getRight()-u.getRight()):u.getX()<=s.getX()&&u.getRight()>=s.getRight()&&(l[0]+=Math.min(s.getX()-u.getX(),u.getRight()-s.getRight())),s.getY()<=u.getY()&&s.getBottom()>=u.getBottom()?l[1]+=Math.min(u.getY()-s.getY(),s.getBottom()-u.getBottom()):u.getY()<=s.getY()&&u.getBottom()>=s.getBottom()&&(l[1]+=Math.min(s.getY()-u.getY(),u.getBottom()-s.getBottom()));var h=Math.abs((u.getCenterY()-s.getCenterY())/(u.getCenterX()-s.getCenterX()));u.getCenterY()===s.getCenterY()&&u.getCenterX()===s.getCenterX()&&(h=1);var d=h*l[0],v=l[1]/h;l[0]<v?v=l[0]:d=l[1],l[0]=-1*f[0]*(v/2+c),l[1]=-1*f[1]*(d/2+c)},a.decideDirectionsForOverlappingNodes=function(s,u,l){s.getCenterX()<u.getCenterX()?l[0]=-1:l[0]=1,s.getCenterY()<u.getCenterY()?l[1]=-1:l[1]=1},a.getIntersection2=function(s,u,l){var c=s.getCenterX(),f=s.getCenterY(),h=u.getCenterX(),d=u.getCenterY();if(s.intersects(u))return l[0]=c,l[1]=f,l[2]=h,l[3]=d,!0;var v=s.getX(),g=s.getY(),_=s.getRight(),y=s.getX(),p=s.getBottom(),m=s.getRight(),E=s.getWidthHalf(),C=s.getHeightHalf(),P=u.getX(),T=u.getY(),R=u.getRight(),D=u.getX(),L=u.getBottom(),j=u.getRight(),F=u.getWidthHalf(),q=u.getHeightHalf(),W=!1,Z=!1;if(c===h){if(f>d)return l[0]=c,l[1]=g,l[2]=h,l[3]=L,!1;if(f<d)return l[0]=c,l[1]=p,l[2]=h,l[3]=T,!1}else if(f===d){if(c>h)return l[0]=v,l[1]=f,l[2]=R,l[3]=d,!1;if(c<h)return l[0]=_,l[1]=f,l[2]=P,l[3]=d,!1}else{var Q=s.height/s.width,re=u.height/u.width,ee=(d-f)/(h-c),ue=void 0,de=void 0,se=void 0,be=void 0,Le=void 0,fe=void 0;if(-Q===ee?c>h?(l[0]=y,l[1]=p,W=!0):(l[0]=_,l[1]=g,W=!0):Q===ee&&(c>h?(l[0]=v,l[1]=g,W=!0):(l[0]=m,l[1]=p,W=!0)),-re===ee?h>c?(l[2]=D,l[3]=L,Z=!0):(l[2]=R,l[3]=T,Z=!0):re===ee&&(h>c?(l[2]=P,l[3]=T,Z=!0):(l[2]=j,l[3]=L,Z=!0)),W&&Z)return!1;if(c>h?f>d?(ue=this.getCardinalDirection(Q,ee,4),de=this.getCardinalDirection(re,ee,2)):(ue=this.getCardinalDirection(-Q,ee,3),de=this.getCardinalDirection(-re,ee,1)):f>d?(ue=this.getCardinalDirection(-Q,ee,1),de=this.getCardinalDirection(-re,ee,3)):(ue=this.getCardinalDirection(Q,ee,2),de=this.getCardinalDirection(re,ee,4)),!W)switch(ue){case 1:be=g,se=c+-C/ee,l[0]=se,l[1]=be;break;case 2:se=m,be=f+E*ee,l[0]=se,l[1]=be;break;case 3:be=p,se=c+C/ee,l[0]=se,l[1]=be;break;case 4:se=y,be=f+-E*ee,l[0]=se,l[1]=be;break}if(!Z)switch(de){case 1:fe=T,Le=h+-q/ee,l[2]=Le,l[3]=fe;break;case 2:Le=j,fe=d+F*ee,l[2]=Le,l[3]=fe;break;case 3:fe=L,Le=h+q/ee,l[2]=Le,l[3]=fe;break;case 4:Le=D,fe=d+-F*ee,l[2]=Le,l[3]=fe;break}}return!1},a.getCardinalDirection=function(s,u,l){return s>u?l:1+l%4},a.getIntersection=function(s,u,l,c){if(c==null)return this.getIntersection2(s,u,l);var f=s.x,h=s.y,d=u.x,v=u.y,g=l.x,_=l.y,y=c.x,p=c.y,m=void 0,E=void 0,C=void 0,P=void 0,T=void 0,R=void 0,D=void 0,L=void 0,j=void 0;return C=v-h,T=f-d,D=d*h-f*v,P=p-_,R=g-y,L=y*_-g*p,j=C*R-P*T,j===0?null:(m=(T*L-R*D)/j,E=(P*D-C*L)/j,new o(m,E))},a.angleOfVector=function(s,u,l,c){var f=void 0;return s!==l?(f=Math.atan((c-u)/(l-s)),l<s?f+=Math.PI:c<u&&(f+=this.TWO_PI)):c<u?f=this.ONE_AND_HALF_PI:f=this.HALF_PI,f},a.doIntersect=function(s,u,l,c){var f=s.x,h=s.y,d=u.x,v=u.y,g=l.x,_=l.y,y=c.x,p=c.y,m=(d-f)*(p-_)-(y-g)*(v-h);if(m===0)return!1;var E=((p-_)*(y-f)+(g-y)*(p-h))/m,C=((h-v)*(y-f)+(d-f)*(p-h))/m;return 0<E&&E<1&&0<C&&C<1},a.HALF_PI=.5*Math.PI,a.ONE_AND_HALF_PI=1.5*Math.PI,a.TWO_PI=2*Math.PI,a.THREE_PI=3*Math.PI,t.exports=a},function(t,n,i){function o(){}o.sign=function(a){return a>0?1:a<0?-1:0},o.floor=function(a){return a<0?Math.ceil(a):Math.floor(a)},o.ceil=function(a){return a<0?Math.floor(a):Math.ceil(a)},t.exports=o},function(t,n,i){function o(){}o.MAX_VALUE=2147483647,o.MIN_VALUE=-2147483648,t.exports=o},function(t,n,i){var o=function(){function f(h,d){for(var v=0;v<d.length;v++){var g=d[v];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(h,g.key,g)}}return function(h,d,v){return d&&f(h.prototype,d),v&&f(h,v),h}}();function a(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}var s=function(h){return{value:h,next:null,prev:null}},u=function(h,d,v,g){return h!==null?h.next=d:g.head=d,v!==null?v.prev=d:g.tail=d,d.prev=h,d.next=v,g.length++,d},l=function(h,d){var v=h.prev,g=h.next;return v!==null?v.next=g:d.head=g,g!==null?g.prev=v:d.tail=v,h.prev=h.next=null,d.length--,h},c=function(){function f(h){var d=this;a(this,f),this.length=0,this.head=null,this.tail=null,h!=null&&h.forEach(function(v){return d.push(v)})}return o(f,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(d,v){return u(v.prev,s(d),v,this)}},{key:"insertAfter",value:function(d,v){return u(v,s(d),v.next,this)}},{key:"insertNodeBefore",value:function(d,v){return u(v.prev,d,v,this)}},{key:"insertNodeAfter",value:function(d,v){return u(v,d,v.next,this)}},{key:"push",value:function(d){return u(this.tail,s(d),null,this)}},{key:"unshift",value:function(d){return u(null,s(d),this.head,this)}},{key:"remove",value:function(d){return l(d,this)}},{key:"pop",value:function(){return l(this.tail,this).value}},{key:"popNode",value:function(){return l(this.tail,this)}},{key:"shift",value:function(){return l(this.head,this).value}},{key:"shiftNode",value:function(){return l(this.head,this)}},{key:"get_object_at",value:function(d){if(d<=this.length()){for(var v=1,g=this.head;v<d;)g=g.next,v++;return g.value}}},{key:"set_object_at",value:function(d,v){if(d<=this.length()){for(var g=1,_=this.head;g<d;)_=_.next,g++;_.value=v}}}]),f}();t.exports=c},function(t,n,i){function o(a,s,u){this.x=null,this.y=null,a==null&&s==null&&u==null?(this.x=0,this.y=0):typeof a=="number"&&typeof s=="number"&&u==null?(this.x=a,this.y=s):a.constructor.name=="Point"&&s==null&&u==null&&(u=a,this.x=u.x,this.y=u.y)}o.prototype.getX=function(){return this.x},o.prototype.getY=function(){return this.y},o.prototype.getLocation=function(){return new o(this.x,this.y)},o.prototype.setLocation=function(a,s,u){a.constructor.name=="Point"&&s==null&&u==null?(u=a,this.setLocation(u.x,u.y)):typeof a=="number"&&typeof s=="number"&&u==null&&(parseInt(a)==a&&parseInt(s)==s?this.move(a,s):(this.x=Math.floor(a+.5),this.y=Math.floor(s+.5)))},o.prototype.move=function(a,s){this.x=a,this.y=s},o.prototype.translate=function(a,s){this.x+=a,this.y+=s},o.prototype.equals=function(a){if(a.constructor.name=="Point"){var s=a;return this.x==s.x&&this.y==s.y}return this==a},o.prototype.toString=function(){return new o().constructor.name+"[x="+this.x+",y="+this.y+"]"},t.exports=o},function(t,n,i){function o(a,s,u,l){this.x=0,this.y=0,this.width=0,this.height=0,a!=null&&s!=null&&u!=null&&l!=null&&(this.x=a,this.y=s,this.width=u,this.height=l)}o.prototype.getX=function(){return this.x},o.prototype.setX=function(a){this.x=a},o.prototype.getY=function(){return this.y},o.prototype.setY=function(a){this.y=a},o.prototype.getWidth=function(){return this.width},o.prototype.setWidth=function(a){this.width=a},o.prototype.getHeight=function(){return this.height},o.prototype.setHeight=function(a){this.height=a},o.prototype.getRight=function(){return this.x+this.width},o.prototype.getBottom=function(){return this.y+this.height},o.prototype.intersects=function(a){return!(this.getRight()<a.x||this.getBottom()<a.y||a.getRight()<this.x||a.getBottom()<this.y)},o.prototype.getCenterX=function(){return this.x+this.width/2},o.prototype.getMinX=function(){return this.getX()},o.prototype.getMaxX=function(){return this.getX()+this.width},o.prototype.getCenterY=function(){return this.y+this.height/2},o.prototype.getMinY=function(){return this.getY()},o.prototype.getMaxY=function(){return this.getY()+this.height},o.prototype.getWidthHalf=function(){return this.width/2},o.prototype.getHeightHalf=function(){return this.height/2},t.exports=o},function(t,n,i){var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s};function a(){}a.lastID=0,a.createID=function(s){return a.isPrimitive(s)?s:(s.uniqueID!=null||(s.uniqueID=a.getString(),a.lastID++),s.uniqueID)},a.getString=function(s){return s==null&&(s=a.lastID),"Object#"+s},a.isPrimitive=function(s){var u=typeof s>"u"?"undefined":o(s);return s==null||u!="object"&&u!="function"},t.exports=a},function(t,n,i){function o(g){if(Array.isArray(g)){for(var _=0,y=Array(g.length);_<g.length;_++)y[_]=g[_];return y}else return Array.from(g)}var a=i(0),s=i(6),u=i(3),l=i(1),c=i(5),f=i(4),h=i(17),d=i(27);function v(g){d.call(this),this.layoutQuality=a.QUALITY,this.createBendsAsNeeded=a.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=a.DEFAULT_INCREMENTAL,this.animationOnLayout=a.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=a.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=a.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=a.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new s(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,g!=null&&(this.isRemoteUse=g)}v.RANDOM_SEED=1,v.prototype=Object.create(d.prototype),v.prototype.getGraphManager=function(){return this.graphManager},v.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},v.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},v.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},v.prototype.newGraphManager=function(){var g=new s(this);return this.graphManager=g,g},v.prototype.newGraph=function(g){return new c(null,this.graphManager,g)},v.prototype.newNode=function(g){return new u(this.graphManager,g)},v.prototype.newEdge=function(g){return new l(null,null,g)},v.prototype.checkLayoutSuccess=function(){return this.graphManager.getRoot()==null||this.graphManager.getRoot().getNodes().length==0||this.graphManager.includesInvalidEdge()},v.prototype.runLayout=function(){this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters();var g;return this.checkLayoutSuccess()?g=!1:g=this.layout(),a.ANIMATE==="during"?!1:(g&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,g)},v.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},v.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var g=this.graphManager.getAllEdges(),_=0;_<g.length;_++)g[_];for(var y=this.graphManager.getRoot().getNodes(),_=0;_<y.length;_++)y[_];this.update(this.graphManager.getRoot())}},v.prototype.update=function(g){if(g==null)this.update2();else if(g instanceof u){var _=g;if(_.getChild()!=null)for(var y=_.getChild().getNodes(),p=0;p<y.length;p++)update(y[p]);if(_.vGraphObject!=null){var m=_.vGraphObject;m.update(_)}}else if(g instanceof l){var E=g;if(E.vGraphObject!=null){var C=E.vGraphObject;C.update(E)}}else if(g instanceof c){var P=g;if(P.vGraphObject!=null){var T=P.vGraphObject;T.update(P)}}},v.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=a.QUALITY,this.animationDuringLayout=a.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=a.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=a.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=a.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=a.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=a.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},v.prototype.transform=function(g){if(g==null)this.transform(new f(0,0));else{var _=new h,y=this.graphManager.getRoot().updateLeftTop();if(y!=null){_.setWorldOrgX(g.x),_.setWorldOrgY(g.y),_.setDeviceOrgX(y.x),_.setDeviceOrgY(y.y);for(var p=this.getAllNodes(),m,E=0;E<p.length;E++)m=p[E],m.transform(_)}}},v.prototype.positionNodesRandomly=function(g){if(g==null)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var _,y,p=g.getNodes(),m=0;m<p.length;m++)_=p[m],y=_.getChild(),y==null||y.getNodes().length==0?_.scatter():(this.positionNodesRandomly(y),_.updateBounds())},v.prototype.getFlatForest=function(){for(var g=[],_=!0,y=this.graphManager.getRoot().getNodes(),p=!0,m=0;m<y.length;m++)y[m].getChild()!=null&&(p=!1);if(!p)return g;var E=new Set,C=[],P=new Map,T=[];for(T=T.concat(y);T.length>0&&_;){for(C.push(T[0]);C.length>0&&_;){var R=C[0];C.splice(0,1),E.add(R);for(var D=R.getEdges(),m=0;m<D.length;m++){var L=D[m].getOtherEnd(R);if(P.get(R)!=L)if(!E.has(L))C.push(L),P.set(L,R);else{_=!1;break}}}if(!_)g=[];else{var j=[].concat(o(E));g.push(j);for(var m=0;m<j.length;m++){var F=j[m],q=T.indexOf(F);q>-1&&T.splice(q,1)}E=new Set,P=new Map}}return g},v.prototype.createDummyNodesForBendpoints=function(g){for(var _=[],y=g.source,p=this.graphManager.calcLowestCommonAncestor(g.source,g.target),m=0;m<g.bendpoints.length;m++){var E=this.newNode(null);E.setRect(new Point(0,0),new Dimension(1,1)),p.add(E);var C=this.newEdge(null);this.graphManager.add(C,y,E),_.add(E),y=E}var C=this.newEdge(null);return this.graphManager.add(C,y,g.target),this.edgeToDummyNodes.set(g,_),g.isInterGraph()?this.graphManager.remove(g):p.remove(g),_},v.prototype.createBendpointsFromDummyNodes=function(){var g=[];g=g.concat(this.graphManager.getAllEdges()),g=[].concat(o(this.edgeToDummyNodes.keys())).concat(g);for(var _=0;_<g.length;_++){var y=g[_];if(y.bendpoints.length>0){for(var p=this.edgeToDummyNodes.get(y),m=0;m<p.length;m++){var E=p[m],C=new f(E.getCenterX(),E.getCenterY()),P=y.bendpoints.get(m);P.x=C.x,P.y=C.y,E.getOwner().remove(E)}this.graphManager.add(y,y.source,y.target)}}},v.transform=function(g,_,y,p){if(y!=null&&p!=null){var m=_;if(g<=50){var E=_/y;m-=(_-E)/50*(50-g)}else{var C=_*p;m+=(C-_)/50*(g-50)}return m}else{var P,T;return g<=50?(P=9*_/500,T=_/10):(P=9*_/50,T=-8*_),P*g+T}},v.findCenterOfTree=function(g){var _=[];_=_.concat(g);var y=[],p=new Map,m=!1,E=null;(_.length==1||_.length==2)&&(m=!0,E=_[0]);for(var C=0;C<_.length;C++){var P=_[C],T=P.getNeighborsList().size;p.set(P,P.getNeighborsList().size),T==1&&y.push(P)}var R=[];for(R=R.concat(y);!m;){var D=[];D=D.concat(R),R=[];for(var C=0;C<_.length;C++){var P=_[C],L=_.indexOf(P);L>=0&&_.splice(L,1);var j=P.getNeighborsList();j.forEach(function(W){if(y.indexOf(W)<0){var Z=p.get(W),Q=Z-1;Q==1&&R.push(W),p.set(W,Q)}})}y=y.concat(R),(_.length==1||_.length==2)&&(m=!0,E=_[0])}return E},v.prototype.setGraphManager=function(g){this.graphManager=g},t.exports=v},function(t,n,i){function o(){}o.seed=1,o.x=0,o.nextDouble=function(){return o.x=Math.sin(o.seed++)*1e4,o.x-Math.floor(o.x)},t.exports=o},function(t,n,i){var o=i(4);function a(s,u){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}a.prototype.getWorldOrgX=function(){return this.lworldOrgX},a.prototype.setWorldOrgX=function(s){this.lworldOrgX=s},a.prototype.getWorldOrgY=function(){return this.lworldOrgY},a.prototype.setWorldOrgY=function(s){this.lworldOrgY=s},a.prototype.getWorldExtX=function(){return this.lworldExtX},a.prototype.setWorldExtX=function(s){this.lworldExtX=s},a.prototype.getWorldExtY=function(){return this.lworldExtY},a.prototype.setWorldExtY=function(s){this.lworldExtY=s},a.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},a.prototype.setDeviceOrgX=function(s){this.ldeviceOrgX=s},a.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},a.prototype.setDeviceOrgY=function(s){this.ldeviceOrgY=s},a.prototype.getDeviceExtX=function(){return this.ldeviceExtX},a.prototype.setDeviceExtX=function(s){this.ldeviceExtX=s},a.prototype.getDeviceExtY=function(){return this.ldeviceExtY},a.prototype.setDeviceExtY=function(s){this.ldeviceExtY=s},a.prototype.transformX=function(s){var u=0,l=this.lworldExtX;return l!=0&&(u=this.ldeviceOrgX+(s-this.lworldOrgX)*this.ldeviceExtX/l),u},a.prototype.transformY=function(s){var u=0,l=this.lworldExtY;return l!=0&&(u=this.ldeviceOrgY+(s-this.lworldOrgY)*this.ldeviceExtY/l),u},a.prototype.inverseTransformX=function(s){var u=0,l=this.ldeviceExtX;return l!=0&&(u=this.lworldOrgX+(s-this.ldeviceOrgX)*this.lworldExtX/l),u},a.prototype.inverseTransformY=function(s){var u=0,l=this.ldeviceExtY;return l!=0&&(u=this.lworldOrgY+(s-this.ldeviceOrgY)*this.lworldExtY/l),u},a.prototype.inverseTransformPoint=function(s){var u=new o(this.inverseTransformX(s.x),this.inverseTransformY(s.y));return u},t.exports=a},function(t,n,i){function o(d){if(Array.isArray(d)){for(var v=0,g=Array(d.length);v<d.length;v++)g[v]=d[v];return g}else return Array.from(d)}var a=i(15),s=i(7),u=i(0),l=i(8),c=i(9);function f(){a.call(this),this.useSmartIdealEdgeLengthCalculation=s.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.idealEdgeLength=s.DEFAULT_EDGE_LENGTH,this.springConstant=s.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=s.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=s.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=s.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=s.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=s.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*s.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=s.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=s.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=s.MAX_ITERATIONS}f.prototype=Object.create(a.prototype);for(var h in a)f[h]=a[h];f.prototype.initParameters=function(){a.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=s.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},f.prototype.calcIdealEdgeLengths=function(){for(var d,v,g,_,y,p,m=this.getGraphManager().getAllEdges(),E=0;E<m.length;E++)d=m[E],d.idealLength=this.idealEdgeLength,d.isInterGraph&&(g=d.getSource(),_=d.getTarget(),y=d.getSourceInLca().getEstimatedSize(),p=d.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(d.idealLength+=y+p-2*u.SIMPLE_NODE_SIZE),v=d.getLca().getInclusionTreeDepth(),d.idealLength+=s.DEFAULT_EDGE_LENGTH*s.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(g.getInclusionTreeDepth()+_.getInclusionTreeDepth()-2*v))},f.prototype.initSpringEmbedder=function(){var d=this.getAllNodes().length;this.incremental?(d>s.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*s.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(d-s.ADAPTATION_LOWER_NODE_LIMIT)/(s.ADAPTATION_UPPER_NODE_LIMIT-s.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-s.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=s.MAX_NODE_DISPLACEMENT_INCREMENTAL):(d>s.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(s.COOLING_ADAPTATION_FACTOR,1-(d-s.ADAPTATION_LOWER_NODE_LIMIT)/(s.ADAPTATION_UPPER_NODE_LIMIT-s.ADAPTATION_LOWER_NODE_LIMIT)*(1-s.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=s.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(this.getAllNodes().length*5,this.maxIterations),this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},f.prototype.calcSpringForces=function(){for(var d=this.getAllEdges(),v,g=0;g<d.length;g++)v=d[g],this.calcSpringForce(v,v.idealLength)},f.prototype.calcRepulsionForces=function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,g,_,y,p,m=this.getAllNodes(),E;if(this.useFRGridVariant)for(this.totalIterations%s.GRID_CALCULATION_CHECK_PERIOD==1&&d&&this.updateGrid(),E=new Set,g=0;g<m.length;g++)y=m[g],this.calculateRepulsionForceOfANode(y,E,d,v),E.add(y);else for(g=0;g<m.length;g++)for(y=m[g],_=g+1;_<m.length;_++)p=m[_],y.getOwner()==p.getOwner()&&this.calcRepulsionForce(y,p)},f.prototype.calcGravitationalForces=function(){for(var d,v=this.getAllNodesToApplyGravitation(),g=0;g<v.length;g++)d=v[g],this.calcGravitationalForce(d)},f.prototype.moveNodes=function(){for(var d=this.getAllNodes(),v,g=0;g<d.length;g++)v=d[g],v.move()},f.prototype.calcSpringForce=function(d,v){var g=d.getSource(),_=d.getTarget(),y,p,m,E;if(this.uniformLeafNodeSizes&&g.getChild()==null&&_.getChild()==null)d.updateLengthSimple();else if(d.updateLength(),d.isOverlapingSourceAndTarget)return;y=d.getLength(),y!=0&&(p=this.springConstant*(y-v),m=p*(d.lengthX/y),E=p*(d.lengthY/y),g.springForceX+=m,g.springForceY+=E,_.springForceX-=m,_.springForceY-=E)},f.prototype.calcRepulsionForce=function(d,v){var g=d.getRect(),_=v.getRect(),y=new Array(2),p=new Array(4),m,E,C,P,T,R,D;if(g.intersects(_)){l.calcSeparationAmount(g,_,y,s.DEFAULT_EDGE_LENGTH/2),R=2*y[0],D=2*y[1];var L=d.noOfChildren*v.noOfChildren/(d.noOfChildren+v.noOfChildren);d.repulsionForceX-=L*R,d.repulsionForceY-=L*D,v.repulsionForceX+=L*R,v.repulsionForceY+=L*D}else this.uniformLeafNodeSizes&&d.getChild()==null&&v.getChild()==null?(m=_.getCenterX()-g.getCenterX(),E=_.getCenterY()-g.getCenterY()):(l.getIntersection(g,_,p),m=p[2]-p[0],E=p[3]-p[1]),Math.abs(m)<s.MIN_REPULSION_DIST&&(m=c.sign(m)*s.MIN_REPULSION_DIST),Math.abs(E)<s.MIN_REPULSION_DIST&&(E=c.sign(E)*s.MIN_REPULSION_DIST),C=m*m+E*E,P=Math.sqrt(C),T=this.repulsionConstant*d.noOfChildren*v.noOfChildren/C,R=T*m/P,D=T*E/P,d.repulsionForceX-=R,d.repulsionForceY-=D,v.repulsionForceX+=R,v.repulsionForceY+=D},f.prototype.calcGravitationalForce=function(d){var v,g,_,y,p,m,E,C;v=d.getOwner(),g=(v.getRight()+v.getLeft())/2,_=(v.getTop()+v.getBottom())/2,y=d.getCenterX()-g,p=d.getCenterY()-_,m=Math.abs(y)+d.getWidth()/2,E=Math.abs(p)+d.getHeight()/2,d.getOwner()==this.graphManager.getRoot()?(C=v.getEstimatedSize()*this.gravityRangeFactor,(m>C||E>C)&&(d.gravitationForceX=-this.gravityConstant*y,d.gravitationForceY=-this.gravityConstant*p)):(C=v.getEstimatedSize()*this.compoundGravityRangeFactor,(m>C||E>C)&&(d.gravitationForceX=-this.gravityConstant*y*this.compoundGravityConstant,d.gravitationForceY=-this.gravityConstant*p*this.compoundGravityConstant))},f.prototype.isConverged=function(){var d,v=!1;return this.totalIterations>this.maxIterations/3&&(v=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),d=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,d||v},f.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},f.prototype.calcNoOfChildrenForAllNodes=function(){for(var d,v=this.graphManager.getAllNodes(),g=0;g<v.length;g++)d=v[g],d.noOfChildren=d.getNoOfChildren()},f.prototype.calcGrid=function(d){var v=0,g=0;v=parseInt(Math.ceil((d.getRight()-d.getLeft())/this.repulsionRange)),g=parseInt(Math.ceil((d.getBottom()-d.getTop())/this.repulsionRange));for(var _=new Array(v),y=0;y<v;y++)_[y]=new Array(g);for(var y=0;y<v;y++)for(var p=0;p<g;p++)_[y][p]=new Array;return _},f.prototype.addNodeToGrid=function(d,v,g){var _=0,y=0,p=0,m=0;_=parseInt(Math.floor((d.getRect().x-v)/this.repulsionRange)),y=parseInt(Math.floor((d.getRect().width+d.getRect().x-v)/this.repulsionRange)),p=parseInt(Math.floor((d.getRect().y-g)/this.repulsionRange)),m=parseInt(Math.floor((d.getRect().height+d.getRect().y-g)/this.repulsionRange));for(var E=_;E<=y;E++)for(var C=p;C<=m;C++)this.grid[E][C].push(d),d.setGridCoordinates(_,y,p,m)},f.prototype.updateGrid=function(){var d,v,g=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),d=0;d<g.length;d++)v=g[d],this.addNodeToGrid(v,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},f.prototype.calculateRepulsionForceOfANode=function(d,v,g,_){if(this.totalIterations%s.GRID_CALCULATION_CHECK_PERIOD==1&&g||_){var y=new Set;d.surrounding=new Array;for(var p,m=this.grid,E=d.startX-1;E<d.finishX+2;E++)for(var C=d.startY-1;C<d.finishY+2;C++)if(!(E<0||C<0||E>=m.length||C>=m[0].length)){for(var P=0;P<m[E][C].length;P++)if(p=m[E][C][P],!(d.getOwner()!=p.getOwner()||d==p)&&!v.has(p)&&!y.has(p)){var T=Math.abs(d.getCenterX()-p.getCenterX())-(d.getWidth()/2+p.getWidth()/2),R=Math.abs(d.getCenterY()-p.getCenterY())-(d.getHeight()/2+p.getHeight()/2);T<=this.repulsionRange&&R<=this.repulsionRange&&y.add(p)}}d.surrounding=[].concat(o(y))}for(E=0;E<d.surrounding.length;E++)this.calcRepulsionForce(d,d.surrounding[E])},f.prototype.calcRepulsionRange=function(){return 0},t.exports=f},function(t,n,i){var o=i(1),a=i(7);function s(l,c,f){o.call(this,l,c,f),this.idealLength=a.DEFAULT_EDGE_LENGTH}s.prototype=Object.create(o.prototype);for(var u in o)s[u]=o[u];t.exports=s},function(t,n,i){var o=i(3);function a(u,l,c,f){o.call(this,u,l,c,f),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}a.prototype=Object.create(o.prototype);for(var s in o)a[s]=o[s];a.prototype.setGridCoordinates=function(u,l,c,f){this.startX=u,this.finishX=l,this.startY=c,this.finishY=f},t.exports=a},function(t,n,i){function o(a,s){this.width=0,this.height=0,a!==null&&s!==null&&(this.height=s,this.width=a)}o.prototype.getWidth=function(){return this.width},o.prototype.setWidth=function(a){this.width=a},o.prototype.getHeight=function(){return this.height},o.prototype.setHeight=function(a){this.height=a},t.exports=o},function(t,n,i){var o=i(14);function a(){this.map={},this.keys=[]}a.prototype.put=function(s,u){var l=o.createID(s);this.contains(l)||(this.map[l]=u,this.keys.push(s))},a.prototype.contains=function(s){return o.createID(s),this.map[s]!=null},a.prototype.get=function(s){var u=o.createID(s);return this.map[u]},a.prototype.keySet=function(){return this.keys},t.exports=a},function(t,n,i){var o=i(14);function a(){this.set={}}a.prototype.add=function(s){var u=o.createID(s);this.contains(u)||(this.set[u]=s)},a.prototype.remove=function(s){delete this.set[o.createID(s)]},a.prototype.clear=function(){this.set={}},a.prototype.contains=function(s){return this.set[o.createID(s)]==s},a.prototype.isEmpty=function(){return this.size()===0},a.prototype.size=function(){return Object.keys(this.set).length},a.prototype.addAllTo=function(s){for(var u=Object.keys(this.set),l=u.length,c=0;c<l;c++)s.push(this.set[u[c]])},a.prototype.size=function(){return Object.keys(this.set).length},a.prototype.addAll=function(s){for(var u=s.length,l=0;l<u;l++){var c=s[l];this.add(c)}},t.exports=a},function(t,n,i){var o=function(){function l(c,f){for(var h=0;h<f.length;h++){var d=f[h];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(c,d.key,d)}}return function(c,f,h){return f&&l(c.prototype,f),h&&l(c,h),c}}();function a(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}var s=i(11),u=function(){function l(c,f){a(this,l),(f!==null||f!==void 0)&&(this.compareFunction=this._defaultCompareFunction);var h=void 0;c instanceof s?h=c.size():h=c.length,this._quicksort(c,0,h-1)}return o(l,[{key:"_quicksort",value:function(f,h,d){if(h<d){var v=this._partition(f,h,d);this._quicksort(f,h,v),this._quicksort(f,v+1,d)}}},{key:"_partition",value:function(f,h,d){for(var v=this._get(f,h),g=h,_=d;;){for(;this.compareFunction(v,this._get(f,_));)_--;for(;this.compareFunction(this._get(f,g),v);)g++;if(g<_)this._swap(f,g,_),g++,_--;else return _}}},{key:"_get",value:function(f,h){return f instanceof s?f.get_object_at(h):f[h]}},{key:"_set",value:function(f,h,d){f instanceof s?f.set_object_at(h,d):f[h]=d}},{key:"_swap",value:function(f,h,d){var v=this._get(f,h);this._set(f,h,this._get(f,d)),this._set(f,d,v)}},{key:"_defaultCompareFunction",value:function(f,h){return h>f}}]),l}();t.exports=u},function(t,n,i){var o=function(){function u(l,c){for(var f=0;f<c.length;f++){var h=c[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(l,h.key,h)}}return function(l,c,f){return c&&u(l.prototype,c),f&&u(l,f),l}}();function a(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}var s=function(){function u(l,c){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1;a(this,u),this.sequence1=l,this.sequence2=c,this.match_score=f,this.mismatch_penalty=h,this.gap_penalty=d,this.iMax=l.length+1,this.jMax=c.length+1,this.grid=new Array(this.iMax);for(var v=0;v<this.iMax;v++){this.grid[v]=new Array(this.jMax);for(var g=0;g<this.jMax;g++)this.grid[v][g]=0}this.tracebackGrid=new Array(this.iMax);for(var _=0;_<this.iMax;_++){this.tracebackGrid[_]=new Array(this.jMax);for(var y=0;y<this.jMax;y++)this.tracebackGrid[_][y]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return o(u,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var c=1;c<this.jMax;c++)this.grid[0][c]=this.grid[0][c-1]+this.gap_penalty,this.tracebackGrid[0][c]=[!1,!1,!0];for(var f=1;f<this.iMax;f++)this.grid[f][0]=this.grid[f-1][0]+this.gap_penalty,this.tracebackGrid[f][0]=[!1,!0,!1];for(var h=1;h<this.iMax;h++)for(var d=1;d<this.jMax;d++){var v=void 0;this.sequence1[h-1]===this.sequence2[d-1]?v=this.grid[h-1][d-1]+this.match_score:v=this.grid[h-1][d-1]+this.mismatch_penalty;var g=this.grid[h-1][d]+this.gap_penalty,_=this.grid[h][d-1]+this.gap_penalty,y=[v,g,_],p=this.arrayAllMaxIndexes(y);this.grid[h][d]=y[p[0]],this.tracebackGrid[h][d]=[p.includes(0),p.includes(1),p.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var c=[];for(c.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});c[0];){var f=c[0],h=this.tracebackGrid[f.pos[0]][f.pos[1]];h[0]&&c.push({pos:[f.pos[0]-1,f.pos[1]-1],seq1:this.sequence1[f.pos[0]-1]+f.seq1,seq2:this.sequence2[f.pos[1]-1]+f.seq2}),h[1]&&c.push({pos:[f.pos[0]-1,f.pos[1]],seq1:this.sequence1[f.pos[0]-1]+f.seq1,seq2:"-"+f.seq2}),h[2]&&c.push({pos:[f.pos[0],f.pos[1]-1],seq1:"-"+f.seq1,seq2:this.sequence2[f.pos[1]-1]+f.seq2}),f.pos[0]===0&&f.pos[1]===0&&this.alignments.push({sequence1:f.seq1,sequence2:f.seq2}),c.shift()}return this.alignments}},{key:"getAllIndexes",value:function(c,f){for(var h=[],d=-1;(d=c.indexOf(f,d+1))!==-1;)h.push(d);return h}},{key:"arrayAllMaxIndexes",value:function(c){return this.getAllIndexes(c,Math.max.apply(null,c))}}]),u}();t.exports=s},function(t,n,i){var o=function(){};o.FDLayout=i(18),o.FDLayoutConstants=i(7),o.FDLayoutEdge=i(19),o.FDLayoutNode=i(20),o.DimensionD=i(21),o.HashMap=i(22),o.HashSet=i(23),o.IGeometry=i(8),o.IMath=i(9),o.Integer=i(10),o.Point=i(12),o.PointD=i(4),o.RandomSeed=i(16),o.RectangleD=i(13),o.Transform=i(17),o.UniqueIDGeneretor=i(14),o.Quicksort=i(24),o.LinkedList=i(11),o.LGraphObject=i(2),o.LGraph=i(5),o.LEdge=i(1),o.LGraphManager=i(6),o.LNode=i(3),o.Layout=i(15),o.LayoutConstants=i(0),o.NeedlemanWunsch=i(25),t.exports=o},function(t,n,i){function o(){this.listeners=[]}var a=o.prototype;a.addListener=function(s,u){this.listeners.push({event:s,callback:u})},a.removeListener=function(s,u){for(var l=this.listeners.length;l>=0;l--){var c=this.listeners[l];c.event===s&&c.callback===u&&this.listeners.splice(l,1)}},a.emit=function(s,u){for(var l=0;l<this.listeners.length;l++){var c=this.listeners[l];s===c.event&&c.callback(u)}},t.exports=o}])})}($m)),$m.exports}var BU=Xm.exports,Z2;function UU(){return Z2||(Z2=1,function(r,e){(function(n,i){r.exports=i(FU())})(BU,function(t){return function(n){var i={};function o(a){if(i[a])return i[a].exports;var s=i[a]={i:a,l:!1,exports:{}};return n[a].call(s.exports,s,s.exports,o),s.l=!0,s.exports}return o.m=n,o.c=i,o.i=function(a){return a},o.d=function(a,s,u){o.o(a,s)||Object.defineProperty(a,s,{configurable:!1,enumerable:!0,get:u})},o.n=function(a){var s=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(s,"a",s),s},o.o=function(a,s){return Object.prototype.hasOwnProperty.call(a,s)},o.p="",o(o.s=7)}([function(n,i){n.exports=t},function(n,i,o){var a=o(0).FDLayoutConstants;function s(){}for(var u in a)s[u]=a[u];s.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,s.DEFAULT_RADIAL_SEPARATION=a.DEFAULT_EDGE_LENGTH,s.DEFAULT_COMPONENT_SEPERATION=60,s.TILE=!0,s.TILING_PADDING_VERTICAL=10,s.TILING_PADDING_HORIZONTAL=10,s.TREE_REDUCTION_ON_INCREMENTAL=!1,n.exports=s},function(n,i,o){var a=o(0).FDLayoutEdge;function s(l,c,f){a.call(this,l,c,f)}s.prototype=Object.create(a.prototype);for(var u in a)s[u]=a[u];n.exports=s},function(n,i,o){var a=o(0).LGraph;function s(l,c,f){a.call(this,l,c,f)}s.prototype=Object.create(a.prototype);for(var u in a)s[u]=a[u];n.exports=s},function(n,i,o){var a=o(0).LGraphManager;function s(l){a.call(this,l)}s.prototype=Object.create(a.prototype);for(var u in a)s[u]=a[u];n.exports=s},function(n,i,o){var a=o(0).FDLayoutNode,s=o(0).IMath;function u(c,f,h,d){a.call(this,c,f,h,d)}u.prototype=Object.create(a.prototype);for(var l in a)u[l]=a[l];u.prototype.move=function(){var c=this.graphManager.getLayout();this.displacementX=c.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY=c.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren,Math.abs(this.displacementX)>c.coolingFactor*c.maxNodeDisplacement&&(this.displacementX=c.coolingFactor*c.maxNodeDisplacement*s.sign(this.displacementX)),Math.abs(this.displacementY)>c.coolingFactor*c.maxNodeDisplacement&&(this.displacementY=c.coolingFactor*c.maxNodeDisplacement*s.sign(this.displacementY)),this.child==null?this.moveBy(this.displacementX,this.displacementY):this.child.getNodes().length==0?this.moveBy(this.displacementX,this.displacementY):this.propogateDisplacementToChildren(this.displacementX,this.displacementY),c.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},u.prototype.propogateDisplacementToChildren=function(c,f){for(var h=this.getChild().getNodes(),d,v=0;v<h.length;v++)d=h[v],d.getChild()==null?(d.moveBy(c,f),d.displacementX+=c,d.displacementY+=f):d.propogateDisplacementToChildren(c,f)},u.prototype.setPred1=function(c){this.pred1=c},u.prototype.getPred1=function(){return pred1},u.prototype.getPred2=function(){return pred2},u.prototype.setNext=function(c){this.next=c},u.prototype.getNext=function(){return next},u.prototype.setProcessed=function(c){this.processed=c},u.prototype.isProcessed=function(){return processed},n.exports=u},function(n,i,o){var a=o(0).FDLayout,s=o(4),u=o(3),l=o(5),c=o(2),f=o(1),h=o(0).FDLayoutConstants,d=o(0).LayoutConstants,v=o(0).Point,g=o(0).PointD,_=o(0).Layout,y=o(0).Integer,p=o(0).IGeometry,m=o(0).LGraph,E=o(0).Transform;function C(){a.call(this),this.toBeTiled={}}C.prototype=Object.create(a.prototype);for(var P in a)C[P]=a[P];C.prototype.newGraphManager=function(){var T=new s(this);return this.graphManager=T,T},C.prototype.newGraph=function(T){return new u(null,this.graphManager,T)},C.prototype.newNode=function(T){return new l(this.graphManager,T)},C.prototype.newEdge=function(T){return new c(null,null,T)},C.prototype.initParameters=function(){a.prototype.initParameters.call(this,arguments),this.isSubLayout||(f.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=f.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=f.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.springConstant=h.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=h.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=h.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=h.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=h.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=h.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1,this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/h.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=h.CONVERGENCE_CHECK_PERIOD/this.maxIterations,this.coolingAdjuster=1)},C.prototype.layout=function(){var T=d.DEFAULT_CREATE_BENDS_AS_NEEDED;return T&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},C.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(f.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var R=new Set(this.getAllNodes()),D=this.nodesWithGravity.filter(function(F){return R.has(F)});this.graphManager.setAllNodesToApplyGravitation(D)}}else{var T=this.getFlatForest();if(T.length>0)this.positionNodesRadially(T);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var R=new Set(this.getAllNodes()),D=this.nodesWithGravity.filter(function(L){return R.has(L)});this.graphManager.setAllNodesToApplyGravitation(D),this.positionNodesRandomly()}}return this.initSpringEmbedder(),this.runSpringEmbedder(),!0},C.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished)if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;if(this.totalIterations%h.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged())if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;this.coolingCycle++,this.layoutQuality==0?this.coolingAdjuster=this.coolingCycle:this.layoutQuality==1&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var T=new Set(this.getAllNodes()),R=this.nodesWithGravity.filter(function(j){return T.has(j)});this.graphManager.setAllNodesToApplyGravitation(R),this.graphManager.updateBounds(),this.updateGrid(),this.coolingFactor=h.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),this.coolingFactor=h.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var D=!this.isTreeGrowing&&!this.isGrowthFinished,L=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(D,L),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},C.prototype.getPositionsData=function(){for(var T=this.graphManager.getAllNodes(),R={},D=0;D<T.length;D++){var L=T[D].rect,j=T[D].id;R[j]={id:j,x:L.getCenterX(),y:L.getCenterY(),w:L.width,h:L.height}}return R},C.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var T=!1;if(h.ANIMATE==="during")this.emit("layoutstarted");else{for(;!T;)T=this.tick();this.graphManager.updateBounds()}},C.prototype.calculateNodesToApplyGravitationTo=function(){var T=[],R,D=this.graphManager.getGraphs(),L=D.length,j;for(j=0;j<L;j++)R=D[j],R.updateConnected(),R.isConnected||(T=T.concat(R.getNodes()));return T},C.prototype.createBendpoints=function(){var T=[];T=T.concat(this.graphManager.getAllEdges());var R=new Set,D;for(D=0;D<T.length;D++){var L=T[D];if(!R.has(L)){var j=L.getSource(),F=L.getTarget();if(j==F)L.getBendpoints().push(new g),L.getBendpoints().push(new g),this.createDummyNodesForBendpoints(L),R.add(L);else{var q=[];if(q=q.concat(j.getEdgeListToNode(F)),q=q.concat(F.getEdgeListToNode(j)),!R.has(q[0])){if(q.length>1){var W;for(W=0;W<q.length;W++){var Z=q[W];Z.getBendpoints().push(new g),this.createDummyNodesForBendpoints(Z)}}q.forEach(function(Q){R.add(Q)})}}}if(R.size==T.length)break}},C.prototype.positionNodesRadially=function(T){for(var R=new v(0,0),D=Math.ceil(Math.sqrt(T.length)),L=0,j=0,F=0,q=new g(0,0),W=0;W<T.length;W++){W%D==0&&(F=0,j=L,W!=0&&(j+=f.DEFAULT_COMPONENT_SEPERATION),L=0);var Z=T[W],Q=_.findCenterOfTree(Z);R.x=F,R.y=j,q=C.radialLayout(Z,Q,R),q.y>L&&(L=Math.floor(q.y)),F=Math.floor(q.x+f.DEFAULT_COMPONENT_SEPERATION)}this.transform(new g(d.WORLD_CENTER_X-q.x/2,d.WORLD_CENTER_Y-q.y/2))},C.radialLayout=function(T,R,D){var L=Math.max(this.maxDiagonalInTree(T),f.DEFAULT_RADIAL_SEPARATION);C.branchRadialLayout(R,null,0,359,0,L);var j=m.calculateBounds(T),F=new E;F.setDeviceOrgX(j.getMinX()),F.setDeviceOrgY(j.getMinY()),F.setWorldOrgX(D.x),F.setWorldOrgY(D.y);for(var q=0;q<T.length;q++){var W=T[q];W.transform(F)}var Z=new g(j.getMaxX(),j.getMaxY());return F.inverseTransformPoint(Z)},C.branchRadialLayout=function(T,R,D,L,j,F){var q=(L-D+1)/2;q<0&&(q+=180);var W=(q+D)%360,Z=W*p.TWO_PI/360,Q=j*Math.cos(Z),re=j*Math.sin(Z);T.setCenter(Q,re);var ee=[];ee=ee.concat(T.getEdges());var ue=ee.length;R!=null&&ue--;for(var de=0,se=ee.length,be,Le=T.getEdgesBetween(R);Le.length>1;){var fe=Le[0];Le.splice(0,1);var ce=ee.indexOf(fe);ce>=0&&ee.splice(ce,1),se--,ue--}R!=null?be=(ee.indexOf(Le[0])+1)%se:be=0;for(var Ee=Math.abs(L-D)/ue,Ce=be;de!=ue;Ce=++Ce%se){var ke=ee[Ce].getOtherEnd(T);if(ke!=R){var Ie=(D+de*Ee)%360,ve=(Ie+Ee)%360;C.branchRadialLayout(ke,T,Ie,ve,j+F,F),de++}}},C.maxDiagonalInTree=function(T){for(var R=y.MIN_VALUE,D=0;D<T.length;D++){var L=T[D],j=L.getDiagonal();j>R&&(R=j)}return R},C.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},C.prototype.groupZeroDegreeMembers=function(){var T=this,R={};this.memberGroups={},this.idToDummyNode={};for(var D=[],L=this.graphManager.getAllNodes(),j=0;j<L.length;j++){var F=L[j],q=F.getParent();this.getNodeDegreeWithChildren(F)===0&&(q.id==null||!this.getToBeTiled(q))&&D.push(F)}for(var j=0;j<D.length;j++){var F=D[j],W=F.getParent().id;typeof R[W]>"u"&&(R[W]=[]),R[W]=R[W].concat(F)}Object.keys(R).forEach(function(Z){if(R[Z].length>1){var Q="DummyCompound_"+Z;T.memberGroups[Q]=R[Z];var re=R[Z][0].getParent(),ee=new l(T.graphManager);ee.id=Q,ee.paddingLeft=re.paddingLeft||0,ee.paddingRight=re.paddingRight||0,ee.paddingBottom=re.paddingBottom||0,ee.paddingTop=re.paddingTop||0,T.idToDummyNode[Q]=ee;var ue=T.getGraphManager().add(T.newGraph(),ee),de=re.getChild();de.add(ee);for(var se=0;se<R[Z].length;se++){var be=R[Z][se];de.remove(be),ue.add(be)}}})},C.prototype.clearCompounds=function(){var T={},R={};this.performDFSOnCompounds();for(var D=0;D<this.compoundOrder.length;D++)R[this.compoundOrder[D].id]=this.compoundOrder[D],T[this.compoundOrder[D].id]=[].concat(this.compoundOrder[D].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[D].getChild()),this.compoundOrder[D].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(T,R)},C.prototype.clearZeroDegreeMembers=function(){var T=this,R=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(D){var L=T.idToDummyNode[D];R[D]=T.tileNodes(T.memberGroups[D],L.paddingLeft+L.paddingRight),L.rect.width=R[D].width,L.rect.height=R[D].height})},C.prototype.repopulateCompounds=function(){for(var T=this.compoundOrder.length-1;T>=0;T--){var R=this.compoundOrder[T],D=R.id,L=R.paddingLeft,j=R.paddingTop;this.adjustLocations(this.tiledMemberPack[D],R.rect.x,R.rect.y,L,j)}},C.prototype.repopulateZeroDegreeMembers=function(){var T=this,R=this.tiledZeroDegreePack;Object.keys(R).forEach(function(D){var L=T.idToDummyNode[D],j=L.paddingLeft,F=L.paddingTop;T.adjustLocations(R[D],L.rect.x,L.rect.y,j,F)})},C.prototype.getToBeTiled=function(T){var R=T.id;if(this.toBeTiled[R]!=null)return this.toBeTiled[R];var D=T.getChild();if(D==null)return this.toBeTiled[R]=!1,!1;for(var L=D.getNodes(),j=0;j<L.length;j++){var F=L[j];if(this.getNodeDegree(F)>0)return this.toBeTiled[R]=!1,!1;if(F.getChild()==null){this.toBeTiled[F.id]=!1;continue}if(!this.getToBeTiled(F))return this.toBeTiled[R]=!1,!1}return this.toBeTiled[R]=!0,!0},C.prototype.getNodeDegree=function(T){T.id;for(var R=T.getEdges(),D=0,L=0;L<R.length;L++){var j=R[L];j.getSource().id!==j.getTarget().id&&(D=D+1)}return D},C.prototype.getNodeDegreeWithChildren=function(T){var R=this.getNodeDegree(T);if(T.getChild()==null)return R;for(var D=T.getChild().getNodes(),L=0;L<D.length;L++){var j=D[L];R+=this.getNodeDegreeWithChildren(j)}return R},C.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},C.prototype.fillCompexOrderByDFS=function(T){for(var R=0;R<T.length;R++){var D=T[R];D.getChild()!=null&&this.fillCompexOrderByDFS(D.getChild().getNodes()),this.getToBeTiled(D)&&this.compoundOrder.push(D)}},C.prototype.adjustLocations=function(T,R,D,L,j){R+=L,D+=j;for(var F=R,q=0;q<T.rows.length;q++){var W=T.rows[q];R=F;for(var Z=0,Q=0;Q<W.length;Q++){var re=W[Q];re.rect.x=R,re.rect.y=D,R+=re.rect.width+T.horizontalPadding,re.rect.height>Z&&(Z=re.rect.height)}D+=Z+T.verticalPadding}},C.prototype.tileCompoundMembers=function(T,R){var D=this;this.tiledMemberPack=[],Object.keys(T).forEach(function(L){var j=R[L];D.tiledMemberPack[L]=D.tileNodes(T[L],j.paddingLeft+j.paddingRight),j.rect.width=D.tiledMemberPack[L].width,j.rect.height=D.tiledMemberPack[L].height})},C.prototype.tileNodes=function(T,R){var D=f.TILING_PADDING_VERTICAL,L=f.TILING_PADDING_HORIZONTAL,j={rows:[],rowWidth:[],rowHeight:[],width:0,height:R,verticalPadding:D,horizontalPadding:L};T.sort(function(W,Z){return W.rect.width*W.rect.height>Z.rect.width*Z.rect.height?-1:W.rect.width*W.rect.height<Z.rect.width*Z.rect.height?1:0});for(var F=0;F<T.length;F++){var q=T[F];j.rows.length==0?this.insertNodeToRow(j,q,0,R):this.canAddHorizontal(j,q.rect.width,q.rect.height)?this.insertNodeToRow(j,q,this.getShortestRowIndex(j),R):this.insertNodeToRow(j,q,j.rows.length,R),this.shiftToLastRow(j)}return j},C.prototype.insertNodeToRow=function(T,R,D,L){var j=L;if(D==T.rows.length){var F=[];T.rows.push(F),T.rowWidth.push(j),T.rowHeight.push(0)}var q=T.rowWidth[D]+R.rect.width;T.rows[D].length>0&&(q+=T.horizontalPadding),T.rowWidth[D]=q,T.width<q&&(T.width=q);var W=R.rect.height;D>0&&(W+=T.verticalPadding);var Z=0;W>T.rowHeight[D]&&(Z=T.rowHeight[D],T.rowHeight[D]=W,Z=T.rowHeight[D]-Z),T.height+=Z,T.rows[D].push(R)},C.prototype.getShortestRowIndex=function(T){for(var R=-1,D=Number.MAX_VALUE,L=0;L<T.rows.length;L++)T.rowWidth[L]<D&&(R=L,D=T.rowWidth[L]);return R},C.prototype.getLongestRowIndex=function(T){for(var R=-1,D=Number.MIN_VALUE,L=0;L<T.rows.length;L++)T.rowWidth[L]>D&&(R=L,D=T.rowWidth[L]);return R},C.prototype.canAddHorizontal=function(T,R,D){var L=this.getShortestRowIndex(T);if(L<0)return!0;var j=T.rowWidth[L];if(j+T.horizontalPadding+R<=T.width)return!0;var F=0;T.rowHeight[L]<D&&L>0&&(F=D+T.verticalPadding-T.rowHeight[L]);var q;T.width-j>=R+T.horizontalPadding?q=(T.height+F)/(j+R+T.horizontalPadding):q=(T.height+F)/T.width,F=D+T.verticalPadding;var W;return T.width<R?W=(T.height+F)/R:W=(T.height+F)/T.width,W<1&&(W=1/W),q<1&&(q=1/q),q<W},C.prototype.shiftToLastRow=function(T){var R=this.getLongestRowIndex(T),D=T.rowWidth.length-1,L=T.rows[R],j=L[L.length-1],F=j.width+T.horizontalPadding;if(T.width-T.rowWidth[D]>F&&R!=D){L.splice(-1,1),T.rows[D].push(j),T.rowWidth[R]=T.rowWidth[R]-F,T.rowWidth[D]=T.rowWidth[D]+F,T.width=T.rowWidth[instance.getLongestRowIndex(T)];for(var q=Number.MIN_VALUE,W=0;W<L.length;W++)L[W].height>q&&(q=L[W].height);R>0&&(q+=T.verticalPadding);var Z=T.rowHeight[R]+T.rowHeight[D];T.rowHeight[R]=q,T.rowHeight[D]<j.height+T.verticalPadding&&(T.rowHeight[D]=j.height+T.verticalPadding);var Q=T.rowHeight[R]+T.rowHeight[D];T.height+=Q-Z,this.shiftToLastRow(T)}},C.prototype.tilingPreLayout=function(){f.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},C.prototype.tilingPostLayout=function(){f.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},C.prototype.reduceTrees=function(){for(var T=[],R=!0,D;R;){var L=this.graphManager.getAllNodes(),j=[];R=!1;for(var F=0;F<L.length;F++)D=L[F],D.getEdges().length==1&&!D.getEdges()[0].isInterGraph&&D.getChild()==null&&(j.push([D,D.getEdges()[0],D.getOwner()]),R=!0);if(R==!0){for(var q=[],W=0;W<j.length;W++)j[W][0].getEdges().length==1&&(q.push(j[W]),j[W][0].getOwner().remove(j[W][0]));T.push(q),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=T},C.prototype.growTree=function(T){for(var R=T.length,D=T[R-1],L,j=0;j<D.length;j++)L=D[j],this.findPlaceforPrunedNode(L),L[2].add(L[0]),L[2].add(L[1],L[1].source,L[1].target);T.splice(T.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},C.prototype.findPlaceforPrunedNode=function(T){var R,D,L=T[0];L==T[1].source?D=T[1].target:D=T[1].source;var j=D.startX,F=D.finishX,q=D.startY,W=D.finishY,Z=0,Q=0,re=0,ee=0,ue=[Z,re,Q,ee];if(q>0)for(var de=j;de<=F;de++)ue[0]+=this.grid[de][q-1].length+this.grid[de][q].length-1;if(F<this.grid.length-1)for(var de=q;de<=W;de++)ue[1]+=this.grid[F+1][de].length+this.grid[F][de].length-1;if(W<this.grid[0].length-1)for(var de=j;de<=F;de++)ue[2]+=this.grid[de][W+1].length+this.grid[de][W].length-1;if(j>0)for(var de=q;de<=W;de++)ue[3]+=this.grid[j-1][de].length+this.grid[j][de].length-1;for(var se=y.MAX_VALUE,be,Le,fe=0;fe<ue.length;fe++)ue[fe]<se?(se=ue[fe],be=1,Le=fe):ue[fe]==se&&be++;if(be==3&&se==0)ue[0]==0&&ue[1]==0&&ue[2]==0?R=1:ue[0]==0&&ue[1]==0&&ue[3]==0?R=0:ue[0]==0&&ue[2]==0&&ue[3]==0?R=3:ue[1]==0&&ue[2]==0&&ue[3]==0&&(R=2);else if(be==2&&se==0){var ce=Math.floor(Math.random()*2);ue[0]==0&&ue[1]==0?ce==0?R=0:R=1:ue[0]==0&&ue[2]==0?ce==0?R=0:R=2:ue[0]==0&&ue[3]==0?ce==0?R=0:R=3:ue[1]==0&&ue[2]==0?ce==0?R=1:R=2:ue[1]==0&&ue[3]==0?ce==0?R=1:R=3:ce==0?R=2:R=3}else if(be==4&&se==0){var ce=Math.floor(Math.random()*4);R=ce}else R=Le;R==0?L.setCenter(D.getCenterX(),D.getCenterY()-D.getHeight()/2-h.DEFAULT_EDGE_LENGTH-L.getHeight()/2):R==1?L.setCenter(D.getCenterX()+D.getWidth()/2+h.DEFAULT_EDGE_LENGTH+L.getWidth()/2,D.getCenterY()):R==2?L.setCenter(D.getCenterX(),D.getCenterY()+D.getHeight()/2+h.DEFAULT_EDGE_LENGTH+L.getHeight()/2):L.setCenter(D.getCenterX()-D.getWidth()/2-h.DEFAULT_EDGE_LENGTH-L.getWidth()/2,D.getCenterY())},n.exports=C},function(n,i,o){var a={};a.layoutBase=o(0),a.CoSEConstants=o(1),a.CoSEEdge=o(2),a.CoSEGraph=o(3),a.CoSEGraphManager=o(4),a.CoSELayout=o(6),a.CoSENode=o(5),n.exports=a}])})}(Xm)),Xm.exports}var qU=Ym.exports,Q2;function zU(){return Q2||(Q2=1,function(r,e){(function(n,i){r.exports=i(UU())})(qU,function(t){return function(n){var i={};function o(a){if(i[a])return i[a].exports;var s=i[a]={i:a,l:!1,exports:{}};return n[a].call(s.exports,s,s.exports,o),s.l=!0,s.exports}return o.m=n,o.c=i,o.i=function(a){return a},o.d=function(a,s,u){o.o(a,s)||Object.defineProperty(a,s,{configurable:!1,enumerable:!0,get:u})},o.n=function(a){var s=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(s,"a",s),s},o.o=function(a,s){return Object.prototype.hasOwnProperty.call(a,s)},o.p="",o(o.s=1)}([function(n,i){n.exports=t},function(n,i,o){var a=o(0).layoutBase.LayoutConstants,s=o(0).layoutBase.FDLayoutConstants,u=o(0).CoSEConstants,l=o(0).CoSELayout,c=o(0).CoSENode,f=o(0).layoutBase.PointD,h=o(0).layoutBase.DimensionD,d={ready:function(){},stop:function(){},quality:"default",nodeDimensionsIncludeLabels:!1,refresh:30,fit:!0,padding:10,randomize:!0,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",animationDuration:500,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.5};function v(p,m){var E={};for(var C in p)E[C]=p[C];for(var C in m)E[C]=m[C];return E}function g(p){this.options=v(d,p),_(this.options)}var _=function(m){m.nodeRepulsion!=null&&(u.DEFAULT_REPULSION_STRENGTH=s.DEFAULT_REPULSION_STRENGTH=m.nodeRepulsion),m.idealEdgeLength!=null&&(u.DEFAULT_EDGE_LENGTH=s.DEFAULT_EDGE_LENGTH=m.idealEdgeLength),m.edgeElasticity!=null&&(u.DEFAULT_SPRING_STRENGTH=s.DEFAULT_SPRING_STRENGTH=m.edgeElasticity),m.nestingFactor!=null&&(u.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=s.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=m.nestingFactor),m.gravity!=null&&(u.DEFAULT_GRAVITY_STRENGTH=s.DEFAULT_GRAVITY_STRENGTH=m.gravity),m.numIter!=null&&(u.MAX_ITERATIONS=s.MAX_ITERATIONS=m.numIter),m.gravityRange!=null&&(u.DEFAULT_GRAVITY_RANGE_FACTOR=s.DEFAULT_GRAVITY_RANGE_FACTOR=m.gravityRange),m.gravityCompound!=null&&(u.DEFAULT_COMPOUND_GRAVITY_STRENGTH=s.DEFAULT_COMPOUND_GRAVITY_STRENGTH=m.gravityCompound),m.gravityRangeCompound!=null&&(u.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=s.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=m.gravityRangeCompound),m.initialEnergyOnIncremental!=null&&(u.DEFAULT_COOLING_FACTOR_INCREMENTAL=s.DEFAULT_COOLING_FACTOR_INCREMENTAL=m.initialEnergyOnIncremental),m.quality=="draft"?a.QUALITY=0:m.quality=="proof"?a.QUALITY=2:a.QUALITY=1,u.NODE_DIMENSIONS_INCLUDE_LABELS=s.NODE_DIMENSIONS_INCLUDE_LABELS=a.NODE_DIMENSIONS_INCLUDE_LABELS=m.nodeDimensionsIncludeLabels,u.DEFAULT_INCREMENTAL=s.DEFAULT_INCREMENTAL=a.DEFAULT_INCREMENTAL=!m.randomize,u.ANIMATE=s.ANIMATE=a.ANIMATE=m.animate,u.TILE=m.tile,u.TILING_PADDING_VERTICAL=typeof m.tilingPaddingVertical=="function"?m.tilingPaddingVertical.call():m.tilingPaddingVertical,u.TILING_PADDING_HORIZONTAL=typeof m.tilingPaddingHorizontal=="function"?m.tilingPaddingHorizontal.call():m.tilingPaddingHorizontal};g.prototype.run=function(){var p,m,E=this.options;this.idToLNode={};var C=this.layout=new l,P=this;P.stopped=!1,this.cy=this.options.cy,this.cy.trigger({type:"layoutstart",layout:this});var T=C.newGraphManager();this.gm=T;var R=this.options.eles.nodes(),D=this.options.eles.edges();this.root=T.addRoot(),this.processChildrenList(this.root,this.getTopMostNodes(R),C);for(var L=0;L<D.length;L++){var j=D[L],F=this.idToLNode[j.data("source")],q=this.idToLNode[j.data("target")];if(F!==q&&F.getEdgesBetween(q).length==0){var W=T.add(C.newEdge(),F,q);W.id=j.id()}}var Z=function(ee,ue){typeof ee=="number"&&(ee=ue);var de=ee.data("id"),se=P.idToLNode[de];return{x:se.getRect().getCenterX(),y:se.getRect().getCenterY()}},Q=function re(){for(var ee=function(){E.fit&&E.cy.fit(E.eles,E.padding),p||(p=!0,P.cy.one("layoutready",E.ready),P.cy.trigger({type:"layoutready",layout:P}))},ue=P.options.refresh,de,se=0;se<ue&&!de;se++)de=P.stopped||P.layout.tick();if(de){C.checkLayoutSuccess()&&!C.isSubLayout&&C.doPostLayout(),C.tilingPostLayout&&C.tilingPostLayout(),C.isLayoutFinished=!0,P.options.eles.nodes().positions(Z),ee(),P.cy.one("layoutstop",P.options.stop),P.cy.trigger({type:"layoutstop",layout:P}),m&&cancelAnimationFrame(m),p=!1;return}var be=P.layout.getPositionsData();E.eles.nodes().positions(function(Le,fe){if(typeof Le=="number"&&(Le=fe),!Le.isParent()){for(var ce=Le.id(),Ee=be[ce],Ce=Le;Ee==null&&(Ee=be[Ce.data("parent")]||be["DummyCompound_"+Ce.data("parent")],be[ce]=Ee,Ce=Ce.parent()[0],Ce!=null););return Ee!=null?{x:Ee.x,y:Ee.y}:{x:Le.position("x"),y:Le.position("y")}}}),ee(),m=requestAnimationFrame(re)};return C.addListener("layoutstarted",function(){P.options.animate==="during"&&(m=requestAnimationFrame(Q))}),C.runLayout(),this.options.animate!=="during"&&(P.options.eles.nodes().not(":parent").layoutPositions(P,P.options,Z),p=!1),this},g.prototype.getTopMostNodes=function(p){for(var m={},E=0;E<p.length;E++)m[p[E].id()]=!0;var C=p.filter(function(P,T){typeof P=="number"&&(P=T);for(var R=P.parent()[0];R!=null;){if(m[R.id()])return!1;R=R.parent()[0]}return!0});return C},g.prototype.processChildrenList=function(p,m,E){for(var C=m.length,P=0;P<C;P++){var T=m[P],R=T.children(),D,L=T.layoutDimensions({nodeDimensionsIncludeLabels:this.options.nodeDimensionsIncludeLabels});if(T.outerWidth()!=null&&T.outerHeight()!=null?D=p.add(new c(E.graphManager,new f(T.position("x")-L.w/2,T.position("y")-L.h/2),new h(parseFloat(L.w),parseFloat(L.h)))):D=p.add(new c(this.graphManager)),D.id=T.data("id"),D.paddingLeft=parseInt(T.css("padding")),D.paddingTop=parseInt(T.css("padding")),D.paddingRight=parseInt(T.css("padding")),D.paddingBottom=parseInt(T.css("padding")),this.options.nodeDimensionsIncludeLabels&&T.isParent()){var j=T.boundingBox({includeLabels:!0,includeNodes:!1}).w,F=T.boundingBox({includeLabels:!0,includeNodes:!1}).h,q=T.css("text-halign");D.labelWidth=j,D.labelHeight=F,D.labelPos=q}if(this.idToLNode[T.data("id")]=D,isNaN(D.rect.x)&&(D.rect.x=0),isNaN(D.rect.y)&&(D.rect.y=0),R!=null&&R.length>0){var W;W=E.getGraphManager().add(E.newGraph(),D),this.processChildrenList(W,R,E)}}},g.prototype.stop=function(){return this.stopped=!0,this};var y=function(m){m("layout","cose-bilkent",g)};typeof cytoscape<"u"&&y(cytoscape),n.exports=y}])})}(Ym)),Ym.exports}var GU=zU();const VU=y0(GU);gd.use(VU);const WU="cose-bilkent",HU=(r,e)=>{const t=gd({headless:!0,styleEnabled:!1});t.add(r);const n={};return t.layout({name:WU,animate:!1,spacingFactor:e,quality:"default",tile:!1,randomize:!0,stop:()=>{t.nodes().forEach(o=>{n[o.id()]={...o.position()}})}}).run(),{positions:n}};class YU{start(){}postMessage(e){const{elements:t,spacingFactor:n}=e,i=HU(t,n);this.onmessage({data:i})}onmessage(){}close(){}}const XU={port:new YU},$U=()=>new SharedWorker(new URL("/assets/CoseBilkentLayout.worker-DU73nTwu.js",import.meta.url),{type:"module",name:"CoseBilkentLayout"});var nw,J2;function KU(){if(J2)return nw;J2=1;function r(){this.__data__=[],this.size=0}return nw=r,nw}var iw,eP;function qS(){if(eP)return iw;eP=1;function r(e,t){return e===t||e!==e&&t!==t}return iw=r,iw}var ow,tP;function N0(){if(tP)return ow;tP=1;var r=qS();function e(t,n){for(var i=t.length;i--;)if(r(t[i][0],n))return i;return-1}return ow=e,ow}var aw,rP;function ZU(){if(rP)return aw;rP=1;var r=N0(),e=Array.prototype,t=e.splice;function n(i){var o=this.__data__,a=r(o,i);if(a<0)return!1;var s=o.length-1;return a==s?o.pop():t.call(o,a,1),--this.size,!0}return aw=n,aw}var sw,nP;function QU(){if(nP)return sw;nP=1;var r=N0();function e(t){var n=this.__data__,i=r(n,t);return i<0?void 0:n[i][1]}return sw=e,sw}var uw,iP;function JU(){if(iP)return uw;iP=1;var r=N0();function e(t){return r(this.__data__,t)>-1}return uw=e,uw}var lw,oP;function e6(){if(oP)return lw;oP=1;var r=N0();function e(t,n){var i=this.__data__,o=r(i,t);return o<0?(++this.size,i.push([t,n])):i[o][1]=n,this}return lw=e,lw}var cw,aP;function j0(){if(aP)return cw;aP=1;var r=KU(),e=ZU(),t=QU(),n=JU(),i=e6();function o(a){var s=-1,u=a==null?0:a.length;for(this.clear();++s<u;){var l=a[s];this.set(l[0],l[1])}}return o.prototype.clear=r,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=n,o.prototype.set=i,cw=o,cw}var fw,sP;function t6(){if(sP)return fw;sP=1;var r=j0();function e(){this.__data__=new r,this.size=0}return fw=e,fw}var hw,uP;function r6(){if(uP)return hw;uP=1;function r(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}return hw=r,hw}var dw,lP;function n6(){if(lP)return dw;lP=1;function r(e){return this.__data__.get(e)}return dw=r,dw}var vw,cP;function i6(){if(cP)return vw;cP=1;function r(e){return this.__data__.has(e)}return vw=r,vw}var pw,fP;function nL(){if(fP)return pw;fP=1;var r=typeof od=="object"&&od&&od.Object===Object&&od;return pw=r,pw}var gw,hP;function ef(){if(hP)return gw;hP=1;var r=nL(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=r||e||Function("return this")();return gw=t,gw}var yw,dP;function _g(){if(dP)return yw;dP=1;var r=ef(),e=r.Symbol;return yw=e,yw}var mw,vP;function o6(){if(vP)return mw;vP=1;var r=_g(),e=Object.prototype,t=e.hasOwnProperty,n=e.toString,i=r?r.toStringTag:void 0;function o(a){var s=t.call(a,i),u=a[i];try{a[i]=void 0;var l=!0}catch{}var c=n.call(a);return l&&(s?a[i]=u:delete a[i]),c}return mw=o,mw}var bw,pP;function a6(){if(pP)return bw;pP=1;var r=Object.prototype,e=r.toString;function t(n){return e.call(n)}return bw=t,bw}var _w,gP;function wg(){if(gP)return _w;gP=1;var r=_g(),e=o6(),t=a6(),n="[object Null]",i="[object Undefined]",o=r?r.toStringTag:void 0;function a(s){return s==null?s===void 0?i:n:o&&o in Object(s)?e(s):t(s)}return _w=a,_w}var ww,yP;function Xv(){if(yP)return ww;yP=1;function r(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return ww=r,ww}var Ew,mP;function F0(){if(mP)return Ew;mP=1;var r=wg(),e=Xv(),t="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",o="[object Proxy]";function a(s){if(!e(s))return!1;var u=r(s);return u==n||u==i||u==t||u==o}return Ew=a,Ew}var Ow,bP;function s6(){if(bP)return Ow;bP=1;var r=ef(),e=r["__core-js_shared__"];return Ow=e,Ow}var xw,_P;function u6(){if(_P)return xw;_P=1;var r=s6(),e=function(){var n=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function t(n){return!!e&&e in n}return xw=t,xw}var Sw,wP;function iL(){if(wP)return Sw;wP=1;var r=Function.prototype,e=r.toString;function t(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return Sw=t,Sw}var Tw,EP;function l6(){if(EP)return Tw;EP=1;var r=F0(),e=u6(),t=Xv(),n=iL(),i=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,a=Function.prototype,s=Object.prototype,u=a.toString,l=s.hasOwnProperty,c=RegExp("^"+u.call(l).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(h){if(!t(h)||e(h))return!1;var d=r(h)?c:o;return d.test(n(h))}return Tw=f,Tw}var Cw,OP;function c6(){if(OP)return Cw;OP=1;function r(e,t){return e==null?void 0:e[t]}return Cw=r,Cw}var Pw,xP;function $v(){if(xP)return Pw;xP=1;var r=l6(),e=c6();function t(n,i){var o=e(n,i);return r(o)?o:void 0}return Pw=t,Pw}var Aw,SP;function zS(){if(SP)return Aw;SP=1;var r=$v(),e=ef(),t=r(e,"Map");return Aw=t,Aw}var Rw,TP;function B0(){if(TP)return Rw;TP=1;var r=$v(),e=r(Object,"create");return Rw=e,Rw}var Iw,CP;function f6(){if(CP)return Iw;CP=1;var r=B0();function e(){this.__data__=r?r(null):{},this.size=0}return Iw=e,Iw}var kw,PP;function h6(){if(PP)return kw;PP=1;function r(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return kw=r,kw}var Dw,AP;function d6(){if(AP)return Dw;AP=1;var r=B0(),e="__lodash_hash_undefined__",t=Object.prototype,n=t.hasOwnProperty;function i(o){var a=this.__data__;if(r){var s=a[o];return s===e?void 0:s}return n.call(a,o)?a[o]:void 0}return Dw=i,Dw}var Mw,RP;function v6(){if(RP)return Mw;RP=1;var r=B0(),e=Object.prototype,t=e.hasOwnProperty;function n(i){var o=this.__data__;return r?o[i]!==void 0:t.call(o,i)}return Mw=n,Mw}var Lw,IP;function p6(){if(IP)return Lw;IP=1;var r=B0(),e="__lodash_hash_undefined__";function t(n,i){var o=this.__data__;return this.size+=this.has(n)?0:1,o[n]=r&&i===void 0?e:i,this}return Lw=t,Lw}var Nw,kP;function g6(){if(kP)return Nw;kP=1;var r=f6(),e=h6(),t=d6(),n=v6(),i=p6();function o(a){var s=-1,u=a==null?0:a.length;for(this.clear();++s<u;){var l=a[s];this.set(l[0],l[1])}}return o.prototype.clear=r,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=n,o.prototype.set=i,Nw=o,Nw}var jw,DP;function y6(){if(DP)return jw;DP=1;var r=g6(),e=j0(),t=zS();function n(){this.size=0,this.__data__={hash:new r,map:new(t||e),string:new r}}return jw=n,jw}var Fw,MP;function m6(){if(MP)return Fw;MP=1;function r(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return Fw=r,Fw}var Bw,LP;function U0(){if(LP)return Bw;LP=1;var r=m6();function e(t,n){var i=t.__data__;return r(n)?i[typeof n=="string"?"string":"hash"]:i.map}return Bw=e,Bw}var Uw,NP;function b6(){if(NP)return Uw;NP=1;var r=U0();function e(t){var n=r(this,t).delete(t);return this.size-=n?1:0,n}return Uw=e,Uw}var qw,jP;function _6(){if(jP)return qw;jP=1;var r=U0();function e(t){return r(this,t).get(t)}return qw=e,qw}var zw,FP;function w6(){if(FP)return zw;FP=1;var r=U0();function e(t){return r(this,t).has(t)}return zw=e,zw}var Gw,BP;function E6(){if(BP)return Gw;BP=1;var r=U0();function e(t,n){var i=r(this,t),o=i.size;return i.set(t,n),this.size+=i.size==o?0:1,this}return Gw=e,Gw}var Vw,UP;function GS(){if(UP)return Vw;UP=1;var r=y6(),e=b6(),t=_6(),n=w6(),i=E6();function o(a){var s=-1,u=a==null?0:a.length;for(this.clear();++s<u;){var l=a[s];this.set(l[0],l[1])}}return o.prototype.clear=r,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=n,o.prototype.set=i,Vw=o,Vw}var Ww,qP;function O6(){if(qP)return Ww;qP=1;var r=j0(),e=zS(),t=GS(),n=200;function i(o,a){var s=this.__data__;if(s instanceof r){var u=s.__data__;if(!e||u.length<n-1)return u.push([o,a]),this.size=++s.size,this;s=this.__data__=new t(u)}return s.set(o,a),this.size=s.size,this}return Ww=i,Ww}var Hw,zP;function VS(){if(zP)return Hw;zP=1;var r=j0(),e=t6(),t=r6(),n=n6(),i=i6(),o=O6();function a(s){var u=this.__data__=new r(s);this.size=u.size}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=i,a.prototype.set=o,Hw=a,Hw}var Yw,GP;function WS(){if(GP)return Yw;GP=1;function r(e,t){for(var n=-1,i=e==null?0:e.length;++n<i&&t(e[n],n,e)!==!1;);return e}return Yw=r,Yw}var Xw,VP;function oL(){if(VP)return Xw;VP=1;var r=$v(),e=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch{}}();return Xw=e,Xw}var $w,WP;function aL(){if(WP)return $w;WP=1;var r=oL();function e(t,n,i){n=="__proto__"&&r?r(t,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[n]=i}return $w=e,$w}var Kw,HP;function sL(){if(HP)return Kw;HP=1;var r=aL(),e=qS(),t=Object.prototype,n=t.hasOwnProperty;function i(o,a,s){var u=o[a];(!(n.call(o,a)&&e(u,s))||s===void 0&&!(a in o))&&r(o,a,s)}return Kw=i,Kw}var Zw,YP;function q0(){if(YP)return Zw;YP=1;var r=sL(),e=aL();function t(n,i,o,a){var s=!o;o||(o={});for(var u=-1,l=i.length;++u<l;){var c=i[u],f=a?a(o[c],n[c],c,o,n):void 0;f===void 0&&(f=n[c]),s?e(o,c,f):r(o,c,f)}return o}return Zw=t,Zw}var Qw,XP;function x6(){if(XP)return Qw;XP=1;function r(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}return Qw=r,Qw}var Jw,$P;function uh(){if($P)return Jw;$P=1;function r(e){return e!=null&&typeof e=="object"}return Jw=r,Jw}var e1,KP;function S6(){if(KP)return e1;KP=1;var r=wg(),e=uh(),t="[object Arguments]";function n(i){return e(i)&&r(i)==t}return e1=n,e1}var t1,ZP;function z0(){if(ZP)return t1;ZP=1;var r=S6(),e=uh(),t=Object.prototype,n=t.hasOwnProperty,i=t.propertyIsEnumerable,o=r(function(){return arguments}())?r:function(a){return e(a)&&n.call(a,"callee")&&!i.call(a,"callee")};return t1=o,t1}var r1,QP;function na(){if(QP)return r1;QP=1;var r=Array.isArray;return r1=r,r1}var ly={exports:{}},n1,JP;function T6(){if(JP)return n1;JP=1;function r(){return!1}return n1=r,n1}ly.exports;var eA;function Gy(){return eA||(eA=1,function(r,e){var t=ef(),n=T6(),i=e&&!e.nodeType&&e,o=i&&!0&&r&&!r.nodeType&&r,a=o&&o.exports===i,s=a?t.Buffer:void 0,u=s?s.isBuffer:void 0,l=u||n;r.exports=l}(ly,ly.exports)),ly.exports}var i1,tA;function uL(){if(tA)return i1;tA=1;var r=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(n,i){var o=typeof n;return i=i??r,!!i&&(o=="number"||o!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<i}return i1=t,i1}var o1,rA;function HS(){if(rA)return o1;rA=1;var r=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=r}return o1=e,o1}var a1,nA;function C6(){if(nA)return a1;nA=1;var r=wg(),e=HS(),t=uh(),n="[object Arguments]",i="[object Array]",o="[object Boolean]",a="[object Date]",s="[object Error]",u="[object Function]",l="[object Map]",c="[object Number]",f="[object Object]",h="[object RegExp]",d="[object Set]",v="[object String]",g="[object WeakMap]",_="[object ArrayBuffer]",y="[object DataView]",p="[object Float32Array]",m="[object Float64Array]",E="[object Int8Array]",C="[object Int16Array]",P="[object Int32Array]",T="[object Uint8Array]",R="[object Uint8ClampedArray]",D="[object Uint16Array]",L="[object Uint32Array]",j={};j[p]=j[m]=j[E]=j[C]=j[P]=j[T]=j[R]=j[D]=j[L]=!0,j[n]=j[i]=j[_]=j[o]=j[y]=j[a]=j[s]=j[u]=j[l]=j[c]=j[f]=j[h]=j[d]=j[v]=j[g]=!1;function F(q){return t(q)&&e(q.length)&&!!j[r(q)]}return a1=F,a1}var s1,iA;function YS(){if(iA)return s1;iA=1;function r(e){return function(t){return e(t)}}return s1=r,s1}var cy={exports:{}};cy.exports;var oA;function XS(){return oA||(oA=1,function(r,e){var t=nL(),n=e&&!e.nodeType&&e,i=n&&!0&&r&&!r.nodeType&&r,o=i&&i.exports===n,a=o&&t.process,s=function(){try{var u=i&&i.require&&i.require("util").types;return u||a&&a.binding&&a.binding("util")}catch{}}();r.exports=s}(cy,cy.exports)),cy.exports}var u1,aA;function G0(){if(aA)return u1;aA=1;var r=C6(),e=YS(),t=XS(),n=t&&t.isTypedArray,i=n?e(n):r;return u1=i,u1}var l1,sA;function lL(){if(sA)return l1;sA=1;var r=x6(),e=z0(),t=na(),n=Gy(),i=uL(),o=G0(),a=Object.prototype,s=a.hasOwnProperty;function u(l,c){var f=t(l),h=!f&&e(l),d=!f&&!h&&n(l),v=!f&&!h&&!d&&o(l),g=f||h||d||v,_=g?r(l.length,String):[],y=_.length;for(var p in l)(c||s.call(l,p))&&!(g&&(p=="length"||d&&(p=="offset"||p=="parent")||v&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||i(p,y)))&&_.push(p);return _}return l1=u,l1}var c1,uA;function V0(){if(uA)return c1;uA=1;var r=Object.prototype;function e(t){var n=t&&t.constructor,i=typeof n=="function"&&n.prototype||r;return t===i}return c1=e,c1}var f1,lA;function cL(){if(lA)return f1;lA=1;function r(e,t){return function(n){return e(t(n))}}return f1=r,f1}var h1,cA;function P6(){if(cA)return h1;cA=1;var r=cL(),e=r(Object.keys,Object);return h1=e,h1}var d1,fA;function $S(){if(fA)return d1;fA=1;var r=V0(),e=P6(),t=Object.prototype,n=t.hasOwnProperty;function i(o){if(!r(o))return e(o);var a=[];for(var s in Object(o))n.call(o,s)&&s!="constructor"&&a.push(s);return a}return d1=i,d1}var v1,hA;function Kv(){if(hA)return v1;hA=1;var r=F0(),e=HS();function t(n){return n!=null&&e(n.length)&&!r(n)}return v1=t,v1}var p1,dA;function Zv(){if(dA)return p1;dA=1;var r=lL(),e=$S(),t=Kv();function n(i){return t(i)?r(i):e(i)}return p1=n,p1}var g1,vA;function A6(){if(vA)return g1;vA=1;var r=q0(),e=Zv();function t(n,i){return n&&r(i,e(i),n)}return g1=t,g1}var y1,pA;function R6(){if(pA)return y1;pA=1;function r(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}return y1=r,y1}var m1,gA;function I6(){if(gA)return m1;gA=1;var r=Xv(),e=V0(),t=R6(),n=Object.prototype,i=n.hasOwnProperty;function o(a){if(!r(a))return t(a);var s=e(a),u=[];for(var l in a)l=="constructor"&&(s||!i.call(a,l))||u.push(l);return u}return m1=o,m1}var b1,yA;function KS(){if(yA)return b1;yA=1;var r=lL(),e=I6(),t=Kv();function n(i){return t(i)?r(i,!0):e(i)}return b1=n,b1}var _1,mA;function k6(){if(mA)return _1;mA=1;var r=q0(),e=KS();function t(n,i){return n&&r(i,e(i),n)}return _1=t,_1}var fy={exports:{}};fy.exports;var bA;function D6(){return bA||(bA=1,function(r,e){var t=ef(),n=e&&!e.nodeType&&e,i=n&&!0&&r&&!r.nodeType&&r,o=i&&i.exports===n,a=o?t.Buffer:void 0,s=a?a.allocUnsafe:void 0;function u(l,c){if(c)return l.slice();var f=l.length,h=s?s(f):new l.constructor(f);return l.copy(h),h}r.exports=u}(fy,fy.exports)),fy.exports}var w1,_A;function M6(){if(_A)return w1;_A=1;function r(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}return w1=r,w1}var E1,wA;function fL(){if(wA)return E1;wA=1;function r(e,t){for(var n=-1,i=e==null?0:e.length,o=0,a=[];++n<i;){var s=e[n];t(s,n,e)&&(a[o++]=s)}return a}return E1=r,E1}var O1,EA;function hL(){if(EA)return O1;EA=1;function r(){return[]}return O1=r,O1}var x1,OA;function ZS(){if(OA)return x1;OA=1;var r=fL(),e=hL(),t=Object.prototype,n=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,o=i?function(a){return a==null?[]:(a=Object(a),r(i(a),function(s){return n.call(a,s)}))}:e;return x1=o,x1}var S1,xA;function L6(){if(xA)return S1;xA=1;var r=q0(),e=ZS();function t(n,i){return r(n,e(n),i)}return S1=t,S1}var T1,SA;function QS(){if(SA)return T1;SA=1;function r(e,t){for(var n=-1,i=t.length,o=e.length;++n<i;)e[o+n]=t[n];return e}return T1=r,T1}var C1,TA;function JS(){if(TA)return C1;TA=1;var r=cL(),e=r(Object.getPrototypeOf,Object);return C1=e,C1}var P1,CA;function dL(){if(CA)return P1;CA=1;var r=QS(),e=JS(),t=ZS(),n=hL(),i=Object.getOwnPropertySymbols,o=i?function(a){for(var s=[];a;)r(s,t(a)),a=e(a);return s}:n;return P1=o,P1}var A1,PA;function N6(){if(PA)return A1;PA=1;var r=q0(),e=dL();function t(n,i){return r(n,e(n),i)}return A1=t,A1}var R1,AA;function vL(){if(AA)return R1;AA=1;var r=QS(),e=na();function t(n,i,o){var a=i(n);return e(n)?a:r(a,o(n))}return R1=t,R1}var I1,RA;function pL(){if(RA)return I1;RA=1;var r=vL(),e=ZS(),t=Zv();function n(i){return r(i,t,e)}return I1=n,I1}var k1,IA;function j6(){if(IA)return k1;IA=1;var r=vL(),e=dL(),t=KS();function n(i){return r(i,t,e)}return k1=n,k1}var D1,kA;function F6(){if(kA)return D1;kA=1;var r=$v(),e=ef(),t=r(e,"DataView");return D1=t,D1}var M1,DA;function B6(){if(DA)return M1;DA=1;var r=$v(),e=ef(),t=r(e,"Promise");return M1=t,M1}var L1,MA;function gL(){if(MA)return L1;MA=1;var r=$v(),e=ef(),t=r(e,"Set");return L1=t,L1}var N1,LA;function U6(){if(LA)return N1;LA=1;var r=$v(),e=ef(),t=r(e,"WeakMap");return N1=t,N1}var j1,NA;function Eg(){if(NA)return j1;NA=1;var r=F6(),e=zS(),t=B6(),n=gL(),i=U6(),o=wg(),a=iL(),s="[object Map]",u="[object Object]",l="[object Promise]",c="[object Set]",f="[object WeakMap]",h="[object DataView]",d=a(r),v=a(e),g=a(t),_=a(n),y=a(i),p=o;return(r&&p(new r(new ArrayBuffer(1)))!=h||e&&p(new e)!=s||t&&p(t.resolve())!=l||n&&p(new n)!=c||i&&p(new i)!=f)&&(p=function(m){var E=o(m),C=E==u?m.constructor:void 0,P=C?a(C):"";if(P)switch(P){case d:return h;case v:return s;case g:return l;case _:return c;case y:return f}return E}),j1=p,j1}var F1,jA;function q6(){if(jA)return F1;jA=1;var r=Object.prototype,e=r.hasOwnProperty;function t(n){var i=n.length,o=new n.constructor(i);return i&&typeof n[0]=="string"&&e.call(n,"index")&&(o.index=n.index,o.input=n.input),o}return F1=t,F1}var B1,FA;function yL(){if(FA)return B1;FA=1;var r=ef(),e=r.Uint8Array;return B1=e,B1}var U1,BA;function eT(){if(BA)return U1;BA=1;var r=yL();function e(t){var n=new t.constructor(t.byteLength);return new r(n).set(new r(t)),n}return U1=e,U1}var q1,UA;function z6(){if(UA)return q1;UA=1;var r=eT();function e(t,n){var i=n?r(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}return q1=e,q1}var z1,qA;function G6(){if(qA)return z1;qA=1;var r=/\w*$/;function e(t){var n=new t.constructor(t.source,r.exec(t));return n.lastIndex=t.lastIndex,n}return z1=e,z1}var G1,zA;function V6(){if(zA)return G1;zA=1;var r=_g(),e=r?r.prototype:void 0,t=e?e.valueOf:void 0;function n(i){return t?Object(t.call(i)):{}}return G1=n,G1}var V1,GA;function W6(){if(GA)return V1;GA=1;var r=eT();function e(t,n){var i=n?r(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}return V1=e,V1}var W1,VA;function H6(){if(VA)return W1;VA=1;var r=eT(),e=z6(),t=G6(),n=V6(),i=W6(),o="[object Boolean]",a="[object Date]",s="[object Map]",u="[object Number]",l="[object RegExp]",c="[object Set]",f="[object String]",h="[object Symbol]",d="[object ArrayBuffer]",v="[object DataView]",g="[object Float32Array]",_="[object Float64Array]",y="[object Int8Array]",p="[object Int16Array]",m="[object Int32Array]",E="[object Uint8Array]",C="[object Uint8ClampedArray]",P="[object Uint16Array]",T="[object Uint32Array]";function R(D,L,j){var F=D.constructor;switch(L){case d:return r(D);case o:case a:return new F(+D);case v:return e(D,j);case g:case _:case y:case p:case m:case E:case C:case P:case T:return i(D,j);case s:return new F;case u:case f:return new F(D);case l:return t(D);case c:return new F;case h:return n(D)}}return W1=R,W1}var H1,WA;function mL(){if(WA)return H1;WA=1;var r=Xv(),e=Object.create,t=function(){function n(){}return function(i){if(!r(i))return{};if(e)return e(i);n.prototype=i;var o=new n;return n.prototype=void 0,o}}();return H1=t,H1}var Y1,HA;function Y6(){if(HA)return Y1;HA=1;var r=mL(),e=JS(),t=V0();function n(i){return typeof i.constructor=="function"&&!t(i)?r(e(i)):{}}return Y1=n,Y1}var X1,YA;function X6(){if(YA)return X1;YA=1;var r=Eg(),e=uh(),t="[object Map]";function n(i){return e(i)&&r(i)==t}return X1=n,X1}var $1,XA;function $6(){if(XA)return $1;XA=1;var r=X6(),e=YS(),t=XS(),n=t&&t.isMap,i=n?e(n):r;return $1=i,$1}var K1,$A;function K6(){if($A)return K1;$A=1;var r=Eg(),e=uh(),t="[object Set]";function n(i){return e(i)&&r(i)==t}return K1=n,K1}var Z1,KA;function Z6(){if(KA)return Z1;KA=1;var r=K6(),e=YS(),t=XS(),n=t&&t.isSet,i=n?e(n):r;return Z1=i,Z1}var Q1,ZA;function Q6(){if(ZA)return Q1;ZA=1;var r=VS(),e=WS(),t=sL(),n=A6(),i=k6(),o=D6(),a=M6(),s=L6(),u=N6(),l=pL(),c=j6(),f=Eg(),h=q6(),d=H6(),v=Y6(),g=na(),_=Gy(),y=$6(),p=Xv(),m=Z6(),E=Zv(),C=KS(),P=1,T=2,R=4,D="[object Arguments]",L="[object Array]",j="[object Boolean]",F="[object Date]",q="[object Error]",W="[object Function]",Z="[object GeneratorFunction]",Q="[object Map]",re="[object Number]",ee="[object Object]",ue="[object RegExp]",de="[object Set]",se="[object String]",be="[object Symbol]",Le="[object WeakMap]",fe="[object ArrayBuffer]",ce="[object DataView]",Ee="[object Float32Array]",Ce="[object Float64Array]",ke="[object Int8Array]",Ie="[object Int16Array]",ve="[object Int32Array]",we="[object Uint8Array]",xe="[object Uint8ClampedArray]",Fe="[object Uint16Array]",He="[object Uint32Array]",at={};at[D]=at[L]=at[fe]=at[ce]=at[j]=at[F]=at[Ee]=at[Ce]=at[ke]=at[Ie]=at[ve]=at[Q]=at[re]=at[ee]=at[ue]=at[de]=at[se]=at[be]=at[we]=at[xe]=at[Fe]=at[He]=!0,at[q]=at[W]=at[Le]=!1;function wt(it,H,$,ne,Re,De){var Be,Je=H&P,Tt=H&T,Lt=H&R;if($&&(Be=Re?$(it,ne,Re,De):$(it)),Be!==void 0)return Be;if(!p(it))return it;var Vt=g(it);if(Vt){if(Be=h(it),!Je)return a(it,Be)}else{var Nt=f(it),Jt=Nt==W||Nt==Z;if(_(it))return o(it,Je);if(Nt==ee||Nt==D||Jt&&!Re){if(Be=Tt||Jt?{}:v(it),!Je)return Tt?u(it,i(Be,it)):s(it,n(Be,it))}else{if(!at[Nt])return Re?it:{};Be=d(it,Nt,Je)}}De||(De=new r);var Er=De.get(it);if(Er)return Er;De.set(it,Be),m(it)?it.forEach(function(me){Be.add(wt(me,H,$,me,it,De))}):y(it)&&it.forEach(function(me,nt){Be.set(nt,wt(me,H,$,nt,it,De))});var Yt=Lt?Tt?c:l:Tt?C:E,dt=Vt?void 0:Yt(it);return e(dt||it,function(me,nt){dt&&(nt=me,me=it[nt]),t(Be,nt,wt(me,H,$,nt,it,De))}),Be}return Q1=wt,Q1}var J1,QA;function J6(){if(QA)return J1;QA=1;var r=Q6(),e=4;function t(n){return r(n,e)}return J1=t,J1}var eE,JA;function bL(){if(JA)return eE;JA=1;function r(e){return function(){return e}}return eE=r,eE}var tE,eR;function e8(){if(eR)return tE;eR=1;function r(e){return function(t,n,i){for(var o=-1,a=Object(t),s=i(t),u=s.length;u--;){var l=s[e?u:++o];if(n(a[l],l,a)===!1)break}return t}}return tE=r,tE}var rE,tR;function t8(){if(tR)return rE;tR=1;var r=e8(),e=r();return rE=e,rE}var nE,rR;function _L(){if(rR)return nE;rR=1;var r=t8(),e=Zv();function t(n,i){return n&&r(n,i,e)}return nE=t,nE}var iE,nR;function r8(){if(nR)return iE;nR=1;var r=Kv();function e(t,n){return function(i,o){if(i==null)return i;if(!r(i))return t(i,o);for(var a=i.length,s=n?a:-1,u=Object(i);(n?s--:++s<a)&&o(u[s],s,u)!==!1;);return i}}return iE=e,iE}var oE,iR;function W0(){if(iR)return oE;iR=1;var r=_L(),e=r8(),t=e(r);return oE=t,oE}var aE,oR;function H0(){if(oR)return aE;oR=1;function r(e){return e}return aE=r,aE}var sE,aR;function n8(){if(aR)return sE;aR=1;var r=H0();function e(t){return typeof t=="function"?t:r}return sE=e,sE}var uE,sR;function i8(){if(sR)return uE;sR=1;var r=WS(),e=W0(),t=n8(),n=na();function i(o,a){var s=n(o)?r:e;return s(o,t(a))}return uE=i,uE}var lE,uR;function o8(){return uR||(uR=1,lE=i8()),lE}var cE,lR;function a8(){if(lR)return cE;lR=1;var r=W0();function e(t,n){var i=[];return r(t,function(o,a,s){n(o,a,s)&&i.push(o)}),i}return cE=e,cE}var fE,cR;function s8(){if(cR)return fE;cR=1;var r="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,r),this}return fE=e,fE}var hE,fR;function u8(){if(fR)return hE;fR=1;function r(e){return this.__data__.has(e)}return hE=r,hE}var dE,hR;function wL(){if(hR)return dE;hR=1;var r=GS(),e=s8(),t=u8();function n(i){var o=-1,a=i==null?0:i.length;for(this.__data__=new r;++o<a;)this.add(i[o])}return n.prototype.add=n.prototype.push=e,n.prototype.has=t,dE=n,dE}var vE,dR;function l8(){if(dR)return vE;dR=1;function r(e,t){for(var n=-1,i=e==null?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}return vE=r,vE}var pE,vR;function EL(){if(vR)return pE;vR=1;function r(e,t){return e.has(t)}return pE=r,pE}var gE,pR;function OL(){if(pR)return gE;pR=1;var r=wL(),e=l8(),t=EL(),n=1,i=2;function o(a,s,u,l,c,f){var h=u&n,d=a.length,v=s.length;if(d!=v&&!(h&&v>d))return!1;var g=f.get(a),_=f.get(s);if(g&&_)return g==s&&_==a;var y=-1,p=!0,m=u&i?new r:void 0;for(f.set(a,s),f.set(s,a);++y<d;){var E=a[y],C=s[y];if(l)var P=h?l(C,E,y,s,a,f):l(E,C,y,a,s,f);if(P!==void 0){if(P)continue;p=!1;break}if(m){if(!e(s,function(T,R){if(!t(m,R)&&(E===T||c(E,T,u,l,f)))return m.push(R)})){p=!1;break}}else if(!(E===C||c(E,C,u,l,f))){p=!1;break}}return f.delete(a),f.delete(s),p}return gE=o,gE}var yE,gR;function c8(){if(gR)return yE;gR=1;function r(e){var t=-1,n=Array(e.size);return e.forEach(function(i,o){n[++t]=[o,i]}),n}return yE=r,yE}var mE,yR;function tT(){if(yR)return mE;yR=1;function r(e){var t=-1,n=Array(e.size);return e.forEach(function(i){n[++t]=i}),n}return mE=r,mE}var bE,mR;function f8(){if(mR)return bE;mR=1;var r=_g(),e=yL(),t=qS(),n=OL(),i=c8(),o=tT(),a=1,s=2,u="[object Boolean]",l="[object Date]",c="[object Error]",f="[object Map]",h="[object Number]",d="[object RegExp]",v="[object Set]",g="[object String]",_="[object Symbol]",y="[object ArrayBuffer]",p="[object DataView]",m=r?r.prototype:void 0,E=m?m.valueOf:void 0;function C(P,T,R,D,L,j,F){switch(R){case p:if(P.byteLength!=T.byteLength||P.byteOffset!=T.byteOffset)return!1;P=P.buffer,T=T.buffer;case y:return!(P.byteLength!=T.byteLength||!j(new e(P),new e(T)));case u:case l:case h:return t(+P,+T);case c:return P.name==T.name&&P.message==T.message;case d:case g:return P==T+"";case f:var q=i;case v:var W=D&a;if(q||(q=o),P.size!=T.size&&!W)return!1;var Z=F.get(P);if(Z)return Z==T;D|=s,F.set(P,T);var Q=n(q(P),q(T),D,L,j,F);return F.delete(P),Q;case _:if(E)return E.call(P)==E.call(T)}return!1}return bE=C,bE}var _E,bR;function h8(){if(bR)return _E;bR=1;var r=pL(),e=1,t=Object.prototype,n=t.hasOwnProperty;function i(o,a,s,u,l,c){var f=s&e,h=r(o),d=h.length,v=r(a),g=v.length;if(d!=g&&!f)return!1;for(var _=d;_--;){var y=h[_];if(!(f?y in a:n.call(a,y)))return!1}var p=c.get(o),m=c.get(a);if(p&&m)return p==a&&m==o;var E=!0;c.set(o,a),c.set(a,o);for(var C=f;++_<d;){y=h[_];var P=o[y],T=a[y];if(u)var R=f?u(T,P,y,a,o,c):u(P,T,y,o,a,c);if(!(R===void 0?P===T||l(P,T,s,u,c):R)){E=!1;break}C||(C=y=="constructor")}if(E&&!C){var D=o.constructor,L=a.constructor;D!=L&&"constructor"in o&&"constructor"in a&&!(typeof D=="function"&&D instanceof D&&typeof L=="function"&&L instanceof L)&&(E=!1)}return c.delete(o),c.delete(a),E}return _E=i,_E}var wE,_R;function d8(){if(_R)return wE;_R=1;var r=VS(),e=OL(),t=f8(),n=h8(),i=Eg(),o=na(),a=Gy(),s=G0(),u=1,l="[object Arguments]",c="[object Array]",f="[object Object]",h=Object.prototype,d=h.hasOwnProperty;function v(g,_,y,p,m,E){var C=o(g),P=o(_),T=C?c:i(g),R=P?c:i(_);T=T==l?f:T,R=R==l?f:R;var D=T==f,L=R==f,j=T==R;if(j&&a(g)){if(!a(_))return!1;C=!0,D=!1}if(j&&!D)return E||(E=new r),C||s(g)?e(g,_,y,p,m,E):t(g,_,T,y,p,m,E);if(!(y&u)){var F=D&&d.call(g,"__wrapped__"),q=L&&d.call(_,"__wrapped__");if(F||q){var W=F?g.value():g,Z=q?_.value():_;return E||(E=new r),m(W,Z,y,p,E)}}return j?(E||(E=new r),n(g,_,y,p,m,E)):!1}return wE=v,wE}var EE,wR;function xL(){if(wR)return EE;wR=1;var r=d8(),e=uh();function t(n,i,o,a,s){return n===i?!0:n==null||i==null||!e(n)&&!e(i)?n!==n&&i!==i:r(n,i,o,a,t,s)}return EE=t,EE}var OE,ER;function v8(){if(ER)return OE;ER=1;var r=VS(),e=xL(),t=1,n=2;function i(o,a,s,u){var l=s.length,c=l,f=!u;if(o==null)return!c;for(o=Object(o);l--;){var h=s[l];if(f&&h[2]?h[1]!==o[h[0]]:!(h[0]in o))return!1}for(;++l<c;){h=s[l];var d=h[0],v=o[d],g=h[1];if(f&&h[2]){if(v===void 0&&!(d in o))return!1}else{var _=new r;if(u)var y=u(v,g,d,o,a,_);if(!(y===void 0?e(g,v,t|n,u,_):y))return!1}}return!0}return OE=i,OE}var xE,OR;function SL(){if(OR)return xE;OR=1;var r=Xv();function e(t){return t===t&&!r(t)}return xE=e,xE}var SE,xR;function p8(){if(xR)return SE;xR=1;var r=SL(),e=Zv();function t(n){for(var i=e(n),o=i.length;o--;){var a=i[o],s=n[a];i[o]=[a,s,r(s)]}return i}return SE=t,SE}var TE,SR;function TL(){if(SR)return TE;SR=1;function r(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}return TE=r,TE}var CE,TR;function g8(){if(TR)return CE;TR=1;var r=v8(),e=p8(),t=TL();function n(i){var o=e(i);return o.length==1&&o[0][2]?t(o[0][0],o[0][1]):function(a){return a===i||r(a,i,o)}}return CE=n,CE}var PE,CR;function rT(){if(CR)return PE;CR=1;var r=wg(),e=uh(),t="[object Symbol]";function n(i){return typeof i=="symbol"||e(i)&&r(i)==t}return PE=n,PE}var AE,PR;function nT(){if(PR)return AE;PR=1;var r=na(),e=rT(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(o,a){if(r(o))return!1;var s=typeof o;return s=="number"||s=="symbol"||s=="boolean"||o==null||e(o)?!0:n.test(o)||!t.test(o)||a!=null&&o in Object(a)}return AE=i,AE}var RE,AR;function y8(){if(AR)return RE;AR=1;var r=GS(),e="Expected a function";function t(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var o=function(){var a=arguments,s=i?i.apply(this,a):a[0],u=o.cache;if(u.has(s))return u.get(s);var l=n.apply(this,a);return o.cache=u.set(s,l)||u,l};return o.cache=new(t.Cache||r),o}return t.Cache=r,RE=t,RE}var IE,RR;function m8(){if(RR)return IE;RR=1;var r=y8(),e=500;function t(n){var i=r(n,function(a){return o.size===e&&o.clear(),a}),o=i.cache;return i}return IE=t,IE}var kE,IR;function b8(){if(IR)return kE;IR=1;var r=m8(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,n=r(function(i){var o=[];return i.charCodeAt(0)===46&&o.push(""),i.replace(e,function(a,s,u,l){o.push(u?l.replace(t,"$1"):s||a)}),o});return kE=n,kE}var DE,kR;function iT(){if(kR)return DE;kR=1;function r(e,t){for(var n=-1,i=e==null?0:e.length,o=Array(i);++n<i;)o[n]=t(e[n],n,e);return o}return DE=r,DE}var ME,DR;function _8(){if(DR)return ME;DR=1;var r=_g(),e=iT(),t=na(),n=rT(),i=r?r.prototype:void 0,o=i?i.toString:void 0;function a(s){if(typeof s=="string")return s;if(t(s))return e(s,a)+"";if(n(s))return o?o.call(s):"";var u=s+"";return u=="0"&&1/s==-1/0?"-0":u}return ME=a,ME}var LE,MR;function w8(){if(MR)return LE;MR=1;var r=_8();function e(t){return t==null?"":r(t)}return LE=e,LE}var NE,LR;function CL(){if(LR)return NE;LR=1;var r=na(),e=nT(),t=b8(),n=w8();function i(o,a){return r(o)?o:e(o,a)?[o]:t(n(o))}return NE=i,NE}var jE,NR;function Y0(){if(NR)return jE;NR=1;var r=rT();function e(t){if(typeof t=="string"||r(t))return t;var n=t+"";return n=="0"&&1/t==-1/0?"-0":n}return jE=e,jE}var FE,jR;function PL(){if(jR)return FE;jR=1;var r=CL(),e=Y0();function t(n,i){i=r(i,n);for(var o=0,a=i.length;n!=null&&o<a;)n=n[e(i[o++])];return o&&o==a?n:void 0}return FE=t,FE}var BE,FR;function E8(){if(FR)return BE;FR=1;var r=PL();function e(t,n,i){var o=t==null?void 0:r(t,n);return o===void 0?i:o}return BE=e,BE}var UE,BR;function O8(){if(BR)return UE;BR=1;function r(e,t){return e!=null&&t in Object(e)}return UE=r,UE}var qE,UR;function AL(){if(UR)return qE;UR=1;var r=CL(),e=z0(),t=na(),n=uL(),i=HS(),o=Y0();function a(s,u,l){u=r(u,s);for(var c=-1,f=u.length,h=!1;++c<f;){var d=o(u[c]);if(!(h=s!=null&&l(s,d)))break;s=s[d]}return h||++c!=f?h:(f=s==null?0:s.length,!!f&&i(f)&&n(d,f)&&(t(s)||e(s)))}return qE=a,qE}var zE,qR;function x8(){if(qR)return zE;qR=1;var r=O8(),e=AL();function t(n,i){return n!=null&&e(n,i,r)}return zE=t,zE}var GE,zR;function S8(){if(zR)return GE;zR=1;var r=xL(),e=E8(),t=x8(),n=nT(),i=SL(),o=TL(),a=Y0(),s=1,u=2;function l(c,f){return n(c)&&i(f)?o(a(c),f):function(h){var d=e(h,c);return d===void 0&&d===f?t(h,c):r(f,d,s|u)}}return GE=l,GE}var VE,GR;function RL(){if(GR)return VE;GR=1;function r(e){return function(t){return t==null?void 0:t[e]}}return VE=r,VE}var WE,VR;function T8(){if(VR)return WE;VR=1;var r=PL();function e(t){return function(n){return r(n,t)}}return WE=e,WE}var HE,WR;function C8(){if(WR)return HE;WR=1;var r=RL(),e=T8(),t=nT(),n=Y0();function i(o){return t(o)?r(n(o)):e(o)}return HE=i,HE}var YE,HR;function X0(){if(HR)return YE;HR=1;var r=g8(),e=S8(),t=H0(),n=na(),i=C8();function o(a){return typeof a=="function"?a:a==null?t:typeof a=="object"?n(a)?e(a[0],a[1]):r(a):i(a)}return YE=o,YE}var XE,YR;function P8(){if(YR)return XE;YR=1;var r=fL(),e=a8(),t=X0(),n=na();function i(o,a){var s=n(o)?r:e;return s(o,t(a,3))}return XE=i,XE}var $E,XR;function A8(){if(XR)return $E;XR=1;var r=Object.prototype,e=r.hasOwnProperty;function t(n,i){return n!=null&&e.call(n,i)}return $E=t,$E}var KE,$R;function R8(){if($R)return KE;$R=1;var r=A8(),e=AL();function t(n,i){return n!=null&&e(n,i,r)}return KE=t,KE}var ZE,KR;function I8(){if(KR)return ZE;KR=1;var r=$S(),e=Eg(),t=z0(),n=na(),i=Kv(),o=Gy(),a=V0(),s=G0(),u="[object Map]",l="[object Set]",c=Object.prototype,f=c.hasOwnProperty;function h(d){if(d==null)return!0;if(i(d)&&(n(d)||typeof d=="string"||typeof d.splice=="function"||o(d)||s(d)||t(d)))return!d.length;var v=e(d);if(v==u||v==l)return!d.size;if(a(d))return!r(d).length;for(var g in d)if(f.call(d,g))return!1;return!0}return ZE=h,ZE}var QE,ZR;function k8(){if(ZR)return QE;ZR=1;function r(e){return e===void 0}return QE=r,QE}var JE,QR;function D8(){if(QR)return JE;QR=1;var r=W0(),e=Kv();function t(n,i){var o=-1,a=e(n)?Array(n.length):[];return r(n,function(s,u,l){a[++o]=i(s,u,l)}),a}return JE=t,JE}var eO,JR;function M8(){if(JR)return eO;JR=1;var r=iT(),e=X0(),t=D8(),n=na();function i(o,a){var s=n(o)?r:t;return s(o,e(a,3))}return eO=i,eO}var tO,eI;function L8(){if(eI)return tO;eI=1;function r(e,t,n,i){var o=-1,a=e==null?0:e.length;for(i&&a&&(n=e[++o]);++o<a;)n=t(n,e[o],o,e);return n}return tO=r,tO}var rO,tI;function N8(){if(tI)return rO;tI=1;function r(e,t,n,i,o){return o(e,function(a,s,u){n=i?(i=!1,a):t(n,a,s,u)}),n}return rO=r,rO}var nO,rI;function j8(){if(rI)return nO;rI=1;var r=L8(),e=W0(),t=X0(),n=N8(),i=na();function o(a,s,u){var l=i(a)?r:n,c=arguments.length<3;return l(a,t(s,4),u,c,e)}return nO=o,nO}var iO,nI;function F8(){if(nI)return iO;nI=1;var r=wg(),e=na(),t=uh(),n="[object String]";function i(o){return typeof o=="string"||!e(o)&&t(o)&&r(o)==n}return iO=i,iO}var oO,iI;function B8(){if(iI)return oO;iI=1;var r=RL(),e=r("length");return oO=e,oO}var aO,oI;function U8(){if(oI)return aO;oI=1;var r="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=e+t+n,o="\\ufe0e\\ufe0f",a="\\u200d",s=RegExp("["+a+r+i+o+"]");function u(l){return s.test(l)}return aO=u,aO}var sO,aI;function q8(){if(aI)return sO;aI=1;var r="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=e+t+n,o="\\ufe0e\\ufe0f",a="["+r+"]",s="["+i+"]",u="\\ud83c[\\udffb-\\udfff]",l="(?:"+s+"|"+u+")",c="[^"+r+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",d="\\u200d",v=l+"?",g="["+o+"]?",_="(?:"+d+"(?:"+[c,f,h].join("|")+")"+g+v+")*",y=g+v+_,p="(?:"+[c+s+"?",s,f,h,a].join("|")+")",m=RegExp(u+"(?="+u+")|"+p+y,"g");function E(C){for(var P=m.lastIndex=0;m.test(C);)++P;return P}return sO=E,sO}var uO,sI;function z8(){if(sI)return uO;sI=1;var r=B8(),e=U8(),t=q8();function n(i){return e(i)?t(i):r(i)}return uO=n,uO}var lO,uI;function G8(){if(uI)return lO;uI=1;var r=$S(),e=Eg(),t=Kv(),n=F8(),i=z8(),o="[object Map]",a="[object Set]";function s(u){if(u==null)return 0;if(t(u))return n(u)?i(u):u.length;var l=e(u);return l==o||l==a?u.size:r(u).length}return lO=s,lO}var cO,lI;function V8(){if(lI)return cO;lI=1;var r=WS(),e=mL(),t=_L(),n=X0(),i=JS(),o=na(),a=Gy(),s=F0(),u=Xv(),l=G0();function c(f,h,d){var v=o(f),g=v||a(f)||l(f);if(h=n(h,4),d==null){var _=f&&f.constructor;g?d=v?new _:[]:u(f)?d=s(_)?e(i(f)):{}:d={}}return(g?r:t)(f,function(y,p,m){return h(d,y,p,m)}),d}return cO=c,cO}var fO,cI;function W8(){if(cI)return fO;cI=1;var r=_g(),e=z0(),t=na(),n=r?r.isConcatSpreadable:void 0;function i(o){return t(o)||e(o)||!!(n&&o&&o[n])}return fO=i,fO}var hO,fI;function H8(){if(fI)return hO;fI=1;var r=QS(),e=W8();function t(n,i,o,a,s){var u=-1,l=n.length;for(o||(o=e),s||(s=[]);++u<l;){var c=n[u];i>0&&o(c)?i>1?t(c,i-1,o,a,s):r(s,c):a||(s[s.length]=c)}return s}return hO=t,hO}var dO,hI;function Y8(){if(hI)return dO;hI=1;function r(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}return dO=r,dO}var vO,dI;function X8(){if(dI)return vO;dI=1;var r=Y8(),e=Math.max;function t(n,i,o){return i=e(i===void 0?n.length-1:i,0),function(){for(var a=arguments,s=-1,u=e(a.length-i,0),l=Array(u);++s<u;)l[s]=a[i+s];s=-1;for(var c=Array(i+1);++s<i;)c[s]=a[s];return c[i]=o(l),r(n,this,c)}}return vO=t,vO}var pO,vI;function $8(){if(vI)return pO;vI=1;var r=bL(),e=oL(),t=H0(),n=e?function(i,o){return e(i,"toString",{configurable:!0,enumerable:!1,value:r(o),writable:!0})}:t;return pO=n,pO}var gO,pI;function K8(){if(pI)return gO;pI=1;var r=800,e=16,t=Date.now;function n(i){var o=0,a=0;return function(){var s=t(),u=e-(s-a);if(a=s,u>0){if(++o>=r)return arguments[0]}else o=0;return i.apply(void 0,arguments)}}return gO=n,gO}var yO,gI;function Z8(){if(gI)return yO;gI=1;var r=$8(),e=K8(),t=e(r);return yO=t,yO}var mO,yI;function Q8(){if(yI)return mO;yI=1;var r=H0(),e=X8(),t=Z8();function n(i,o){return t(e(i,o,r),i+"")}return mO=n,mO}var bO,mI;function J8(){if(mI)return bO;mI=1;function r(e,t,n,i){for(var o=e.length,a=n+(i?1:-1);i?a--:++a<o;)if(t(e[a],a,e))return a;return-1}return bO=r,bO}var _O,bI;function eq(){if(bI)return _O;bI=1;function r(e){return e!==e}return _O=r,_O}var wO,_I;function tq(){if(_I)return wO;_I=1;function r(e,t,n){for(var i=n-1,o=e.length;++i<o;)if(e[i]===t)return i;return-1}return wO=r,wO}var EO,wI;function rq(){if(wI)return EO;wI=1;var r=J8(),e=eq(),t=tq();function n(i,o,a){return o===o?t(i,o,a):r(i,e,a)}return EO=n,EO}var OO,EI;function nq(){if(EI)return OO;EI=1;var r=rq();function e(t,n){var i=t==null?0:t.length;return!!i&&r(t,n,0)>-1}return OO=e,OO}var xO,OI;function iq(){if(OI)return xO;OI=1;function r(e,t,n){for(var i=-1,o=e==null?0:e.length;++i<o;)if(n(t,e[i]))return!0;return!1}return xO=r,xO}var SO,xI;function oq(){if(xI)return SO;xI=1;function r(){}return SO=r,SO}var TO,SI;function aq(){if(SI)return TO;SI=1;var r=gL(),e=oq(),t=tT(),n=1/0,i=r&&1/t(new r([,-0]))[1]==n?function(o){return new r(o)}:e;return TO=i,TO}var CO,TI;function sq(){if(TI)return CO;TI=1;var r=wL(),e=nq(),t=iq(),n=EL(),i=aq(),o=tT(),a=200;function s(u,l,c){var f=-1,h=e,d=u.length,v=!0,g=[],_=g;if(c)v=!1,h=t;else if(d>=a){var y=l?null:i(u);if(y)return o(y);v=!1,h=n,_=new r}else _=l?[]:g;e:for(;++f<d;){var p=u[f],m=l?l(p):p;if(p=c||p!==0?p:0,v&&m===m){for(var E=_.length;E--;)if(_[E]===m)continue e;l&&_.push(m),g.push(p)}else h(_,m,c)||(_!==g&&_.push(m),g.push(p))}return g}return CO=s,CO}var PO,CI;function uq(){if(CI)return PO;CI=1;var r=Kv(),e=uh();function t(n){return e(n)&&r(n)}return PO=t,PO}var AO,PI;function lq(){if(PI)return AO;PI=1;var r=H8(),e=Q8(),t=sq(),n=uq(),i=e(function(o){return t(r(o,1,n,!0))});return AO=i,AO}var RO,AI;function cq(){if(AI)return RO;AI=1;var r=iT();function e(t,n){return r(n,function(i){return t[i]})}return RO=e,RO}var IO,RI;function fq(){if(RI)return IO;RI=1;var r=cq(),e=Zv();function t(n){return n==null?[]:r(n,e(n))}return IO=t,IO}var kO,II;function nl(){if(II)return kO;II=1;var r;if(typeof oj=="function")try{r={clone:J6(),constant:bL(),each:o8(),filter:P8(),has:R8(),isArray:na(),isEmpty:I8(),isFunction:F0(),isUndefined:k8(),keys:Zv(),map:M8(),reduce:j8(),size:G8(),transform:V8(),union:lq(),values:fq()}}catch{}return r||(r=window._),kO=r,kO}var DO,kI;function oT(){if(kI)return DO;kI=1;var r=nl();DO=i;var e="\0",t="\0",n="";function i(c){this._isDirected=r.has(c,"directed")?c.directed:!0,this._isMultigraph=r.has(c,"multigraph")?c.multigraph:!1,this._isCompound=r.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=r.constant(void 0),this._defaultEdgeLabelFn=r.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[t]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(c){return this._label=c,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(c){return r.isFunction(c)||(c=r.constant(c)),this._defaultNodeLabelFn=c,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return r.keys(this._nodes)},i.prototype.sources=function(){var c=this;return r.filter(this.nodes(),function(f){return r.isEmpty(c._in[f])})},i.prototype.sinks=function(){var c=this;return r.filter(this.nodes(),function(f){return r.isEmpty(c._out[f])})},i.prototype.setNodes=function(c,f){var h=arguments,d=this;return r.each(c,function(v){h.length>1?d.setNode(v,f):d.setNode(v)}),this},i.prototype.setNode=function(c,f){return r.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=f),this):(this._nodes[c]=arguments.length>1?f:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=t,this._children[c]={},this._children[t][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},i.prototype.node=function(c){return this._nodes[c]},i.prototype.hasNode=function(c){return r.has(this._nodes,c)},i.prototype.removeNode=function(c){var f=this;if(r.has(this._nodes,c)){var h=function(d){f.removeEdge(f._edgeObjs[d])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],r.each(this.children(c),function(d){f.setParent(d)}),delete this._children[c]),r.each(r.keys(this._in[c]),h),delete this._in[c],delete this._preds[c],r.each(r.keys(this._out[c]),h),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},i.prototype.setParent=function(c,f){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(r.isUndefined(f))f=t;else{f+="";for(var h=f;!r.isUndefined(h);h=this.parent(h))if(h===c)throw new Error("Setting "+f+" as parent of "+c+" would create a cycle");this.setNode(f)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=f,this._children[f][c]=!0,this},i.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},i.prototype.parent=function(c){if(this._isCompound){var f=this._parent[c];if(f!==t)return f}},i.prototype.children=function(c){if(r.isUndefined(c)&&(c=t),this._isCompound){var f=this._children[c];if(f)return r.keys(f)}else{if(c===t)return this.nodes();if(this.hasNode(c))return[]}},i.prototype.predecessors=function(c){var f=this._preds[c];if(f)return r.keys(f)},i.prototype.successors=function(c){var f=this._sucs[c];if(f)return r.keys(f)},i.prototype.neighbors=function(c){var f=this.predecessors(c);if(f)return r.union(f,this.successors(c))},i.prototype.isLeaf=function(c){var f;return this.isDirected()?f=this.successors(c):f=this.neighbors(c),f.length===0},i.prototype.filterNodes=function(c){var f=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});f.setGraph(this.graph());var h=this;r.each(this._nodes,function(g,_){c(_)&&f.setNode(_,g)}),r.each(this._edgeObjs,function(g){f.hasNode(g.v)&&f.hasNode(g.w)&&f.setEdge(g,h.edge(g))});var d={};function v(g){var _=h.parent(g);return _===void 0||f.hasNode(_)?(d[g]=_,_):_ in d?d[_]:v(_)}return this._isCompound&&r.each(f.nodes(),function(g){f.setParent(g,v(g))}),f},i.prototype.setDefaultEdgeLabel=function(c){return r.isFunction(c)||(c=r.constant(c)),this._defaultEdgeLabelFn=c,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return r.values(this._edgeObjs)},i.prototype.setPath=function(c,f){var h=this,d=arguments;return r.reduce(c,function(v,g){return d.length>1?h.setEdge(v,g,f):h.setEdge(v,g),g}),this},i.prototype.setEdge=function(){var c,f,h,d,v=!1,g=arguments[0];typeof g=="object"&&g!==null&&"v"in g?(c=g.v,f=g.w,h=g.name,arguments.length===2&&(d=arguments[1],v=!0)):(c=g,f=arguments[1],h=arguments[3],arguments.length>2&&(d=arguments[2],v=!0)),c=""+c,f=""+f,r.isUndefined(h)||(h=""+h);var _=s(this._isDirected,c,f,h);if(r.has(this._edgeLabels,_))return v&&(this._edgeLabels[_]=d),this;if(!r.isUndefined(h)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(f),this._edgeLabels[_]=v?d:this._defaultEdgeLabelFn(c,f,h);var y=u(this._isDirected,c,f,h);return c=y.v,f=y.w,Object.freeze(y),this._edgeObjs[_]=y,o(this._preds[f],c),o(this._sucs[c],f),this._in[f][_]=y,this._out[c][_]=y,this._edgeCount++,this},i.prototype.edge=function(c,f,h){var d=arguments.length===1?l(this._isDirected,arguments[0]):s(this._isDirected,c,f,h);return this._edgeLabels[d]},i.prototype.hasEdge=function(c,f,h){var d=arguments.length===1?l(this._isDirected,arguments[0]):s(this._isDirected,c,f,h);return r.has(this._edgeLabels,d)},i.prototype.removeEdge=function(c,f,h){var d=arguments.length===1?l(this._isDirected,arguments[0]):s(this._isDirected,c,f,h),v=this._edgeObjs[d];return v&&(c=v.v,f=v.w,delete this._edgeLabels[d],delete this._edgeObjs[d],a(this._preds[f],c),a(this._sucs[c],f),delete this._in[f][d],delete this._out[c][d],this._edgeCount--),this},i.prototype.inEdges=function(c,f){var h=this._in[c];if(h){var d=r.values(h);return f?r.filter(d,function(v){return v.v===f}):d}},i.prototype.outEdges=function(c,f){var h=this._out[c];if(h){var d=r.values(h);return f?r.filter(d,function(v){return v.w===f}):d}},i.prototype.nodeEdges=function(c,f){var h=this.inEdges(c,f);if(h)return h.concat(this.outEdges(c,f))};function o(c,f){c[f]?c[f]++:c[f]=1}function a(c,f){--c[f]||delete c[f]}function s(c,f,h,d){var v=""+f,g=""+h;if(!c&&v>g){var _=v;v=g,g=_}return v+n+g+n+(r.isUndefined(d)?e:d)}function u(c,f,h,d){var v=""+f,g=""+h;if(!c&&v>g){var _=v;v=g,g=_}var y={v,w:g};return d&&(y.name=d),y}function l(c,f){return s(c,f.v,f.w,f.name)}return DO}var MO,DI;function hq(){return DI||(DI=1,MO="2.1.8"),MO}var LO,MI;function dq(){return MI||(MI=1,LO={Graph:oT(),version:hq()}),LO}var NO,LI;function vq(){if(LI)return NO;LI=1;var r=nl(),e=oT();NO={write:t,read:o};function t(a){var s={options:{directed:a.isDirected(),multigraph:a.isMultigraph(),compound:a.isCompound()},nodes:n(a),edges:i(a)};return r.isUndefined(a.graph())||(s.value=r.clone(a.graph())),s}function n(a){return r.map(a.nodes(),function(s){var u=a.node(s),l=a.parent(s),c={v:s};return r.isUndefined(u)||(c.value=u),r.isUndefined(l)||(c.parent=l),c})}function i(a){return r.map(a.edges(),function(s){var u=a.edge(s),l={v:s.v,w:s.w};return r.isUndefined(s.name)||(l.name=s.name),r.isUndefined(u)||(l.value=u),l})}function o(a){var s=new e(a.options).setGraph(a.value);return r.each(a.nodes,function(u){s.setNode(u.v,u.value),u.parent&&s.setParent(u.v,u.parent)}),r.each(a.edges,function(u){s.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),s}return NO}var jO,NI;function pq(){if(NI)return jO;NI=1;var r=nl();jO=e;function e(t){var n={},i=[],o;function a(s){r.has(n,s)||(n[s]=!0,o.push(s),r.each(t.successors(s),a),r.each(t.predecessors(s),a))}return r.each(t.nodes(),function(s){o=[],a(s),o.length&&i.push(o)}),i}return jO}var FO,jI;function IL(){if(jI)return FO;jI=1;var r=nl();FO=e;function e(){this._arr=[],this._keyIndices={}}return e.prototype.size=function(){return this._arr.length},e.prototype.keys=function(){return this._arr.map(function(t){return t.key})},e.prototype.has=function(t){return r.has(this._keyIndices,t)},e.prototype.priority=function(t){var n=this._keyIndices[t];if(n!==void 0)return this._arr[n].priority},e.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},e.prototype.add=function(t,n){var i=this._keyIndices;if(t=String(t),!r.has(i,t)){var o=this._arr,a=o.length;return i[t]=a,o.push({key:t,priority:n}),this._decrease(a),!0}return!1},e.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},e.prototype.decrease=function(t,n){var i=this._keyIndices[t];if(n>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[i].priority+" New: "+n);this._arr[i].priority=n,this._decrease(i)},e.prototype._heapify=function(t){var n=this._arr,i=2*t,o=i+1,a=t;i<n.length&&(a=n[i].priority<n[a].priority?i:a,o<n.length&&(a=n[o].priority<n[a].priority?o:a),a!==t&&(this._swap(t,a),this._heapify(a)))},e.prototype._decrease=function(t){for(var n=this._arr,i=n[t].priority,o;t!==0&&(o=t>>1,!(n[o].priority<i));)this._swap(t,o),t=o},e.prototype._swap=function(t,n){var i=this._arr,o=this._keyIndices,a=i[t],s=i[n];i[t]=s,i[n]=a,o[s.key]=t,o[a.key]=n},FO}var BO,FI;function kL(){if(FI)return BO;FI=1;var r=nl(),e=IL();BO=n;var t=r.constant(1);function n(o,a,s,u){return i(o,String(a),s||t,u||function(l){return o.outEdges(l)})}function i(o,a,s,u){var l={},c=new e,f,h,d=function(v){var g=v.v!==f?v.v:v.w,_=l[g],y=s(v),p=h.distance+y;if(y<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+v+" Weight: "+y);p<_.distance&&(_.distance=p,_.predecessor=f,c.decrease(g,p))};for(o.nodes().forEach(function(v){var g=v===a?0:Number.POSITIVE_INFINITY;l[v]={distance:g},c.add(v,g)});c.size()>0&&(f=c.removeMin(),h=l[f],h.distance!==Number.POSITIVE_INFINITY);)u(f).forEach(d);return l}return BO}var UO,BI;function gq(){if(BI)return UO;BI=1;var r=kL(),e=nl();UO=t;function t(n,i,o){return e.transform(n.nodes(),function(a,s){a[s]=r(n,s,i,o)},{})}return UO}var qO,UI;function DL(){if(UI)return qO;UI=1;var r=nl();qO=e;function e(t){var n=0,i=[],o={},a=[];function s(u){var l=o[u]={onStack:!0,lowlink:n,index:n++};if(i.push(u),t.successors(u).forEach(function(h){r.has(o,h)?o[h].onStack&&(l.lowlink=Math.min(l.lowlink,o[h].index)):(s(h),l.lowlink=Math.min(l.lowlink,o[h].lowlink))}),l.lowlink===l.index){var c=[],f;do f=i.pop(),o[f].onStack=!1,c.push(f);while(u!==f);a.push(c)}}return t.nodes().forEach(function(u){r.has(o,u)||s(u)}),a}return qO}var zO,qI;function yq(){if(qI)return zO;qI=1;var r=nl(),e=DL();zO=t;function t(n){return r.filter(e(n),function(i){return i.length>1||i.length===1&&n.hasEdge(i[0],i[0])})}return zO}var GO,zI;function mq(){if(zI)return GO;zI=1;var r=nl();GO=t;var e=r.constant(1);function t(i,o,a){return n(i,o||e,a||function(s){return i.outEdges(s)})}function n(i,o,a){var s={},u=i.nodes();return u.forEach(function(l){s[l]={},s[l][l]={distance:0},u.forEach(function(c){l!==c&&(s[l][c]={distance:Number.POSITIVE_INFINITY})}),a(l).forEach(function(c){var f=c.v===l?c.w:c.v,h=o(c);s[l][f]={distance:h,predecessor:l}})}),u.forEach(function(l){var c=s[l];u.forEach(function(f){var h=s[f];u.forEach(function(d){var v=h[l],g=c[d],_=h[d],y=v.distance+g.distance;y<_.distance&&(_.distance=y,_.predecessor=g.predecessor)})})}),s}return GO}var VO,GI;function ML(){if(GI)return VO;GI=1;var r=nl();VO=e,e.CycleException=t;function e(n){var i={},o={},a=[];function s(u){if(r.has(o,u))throw new t;r.has(i,u)||(o[u]=!0,i[u]=!0,r.each(n.predecessors(u),s),delete o[u],a.push(u))}if(r.each(n.sinks(),s),r.size(i)!==n.nodeCount())throw new t;return a}function t(){}return t.prototype=new Error,VO}var WO,VI;function bq(){if(VI)return WO;VI=1;var r=ML();WO=e;function e(t){try{r(t)}catch(n){if(n instanceof r.CycleException)return!1;throw n}return!0}return WO}var HO,WI;function LL(){if(WI)return HO;WI=1;var r=nl();HO=e;function e(n,i,o){r.isArray(i)||(i=[i]);var a=(n.isDirected()?n.successors:n.neighbors).bind(n),s=[],u={};return r.each(i,function(l){if(!n.hasNode(l))throw new Error("Graph does not have node: "+l);t(n,l,o==="post",u,a,s)}),s}function t(n,i,o,a,s,u){r.has(a,i)||(a[i]=!0,o||u.push(i),r.each(s(i),function(l){t(n,l,o,a,s,u)}),o&&u.push(i))}return HO}var YO,HI;function _q(){if(HI)return YO;HI=1;var r=LL();YO=e;function e(t,n){return r(t,n,"post")}return YO}var XO,YI;function wq(){if(YI)return XO;YI=1;var r=LL();XO=e;function e(t,n){return r(t,n,"pre")}return XO}var $O,XI;function Eq(){if(XI)return $O;XI=1;var r=nl(),e=oT(),t=IL();$O=n;function n(i,o){var a=new e,s={},u=new t,l;function c(h){var d=h.v===l?h.w:h.v,v=u.priority(d);if(v!==void 0){var g=o(h);g<v&&(s[d]=l,u.decrease(d,g))}}if(i.nodeCount()===0)return a;r.each(i.nodes(),function(h){u.add(h,Number.POSITIVE_INFINITY),a.setNode(h)}),u.decrease(i.nodes()[0],0);for(var f=!1;u.size()>0;){if(l=u.removeMin(),r.has(s,l))a.setEdge(l,s[l]);else{if(f)throw new Error("Input graph is not connected: "+i);f=!0}i.nodeEdges(l).forEach(c)}return a}return $O}var KO,$I;function Oq(){return $I||($I=1,KO={components:pq(),dijkstra:kL(),dijkstraAll:gq(),findCycles:yq(),floydWarshall:mq(),isAcyclic:bq(),postorder:_q(),preorder:wq(),prim:Eq(),tarjan:DL(),topsort:ML()}),KO}var ZO,KI;function rl(){if(KI)return ZO;KI=1;var r=dq();return ZO={Graph:r.Graph,json:vq(),alg:Oq(),version:r.version},ZO}var hy={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var xq=hy.exports,ZI;function Ci(){return ZI||(ZI=1,function(r,e){(function(){var t,n="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",s="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",l=500,c="__lodash_placeholder__",f=1,h=2,d=4,v=1,g=2,_=1,y=2,p=4,m=8,E=16,C=32,P=64,T=128,R=256,D=512,L=30,j="...",F=800,q=16,W=1,Z=2,Q=3,re=1/0,ee=9007199254740991,ue=17976931348623157e292,de=NaN,se=4294967295,be=se-1,Le=se>>>1,fe=[["ary",T],["bind",_],["bindKey",y],["curry",m],["curryRight",E],["flip",D],["partial",C],["partialRight",P],["rearg",R]],ce="[object Arguments]",Ee="[object Array]",Ce="[object AsyncFunction]",ke="[object Boolean]",Ie="[object Date]",ve="[object DOMException]",we="[object Error]",xe="[object Function]",Fe="[object GeneratorFunction]",He="[object Map]",at="[object Number]",wt="[object Null]",it="[object Object]",H="[object Promise]",$="[object Proxy]",ne="[object RegExp]",Re="[object Set]",De="[object String]",Be="[object Symbol]",Je="[object Undefined]",Tt="[object WeakMap]",Lt="[object WeakSet]",Vt="[object ArrayBuffer]",Nt="[object DataView]",Jt="[object Float32Array]",Er="[object Float64Array]",Yt="[object Int8Array]",dt="[object Int16Array]",me="[object Int32Array]",nt="[object Uint8Array]",lt="[object Uint8ClampedArray]",ct="[object Uint16Array]",ft="[object Uint32Array]",Xt=/\b__p \+= '';/g,pt=/\b(__p \+=) '' \+/g,Qt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,mr=/&(?:amp|lt|gt|quot|#39);/g,Rr=/[&<>"']/g,ar=RegExp(mr.source),nr=RegExp(Rr.source),tr=/<%-([\s\S]+?)%>/g,lr=/<%([\s\S]+?)%>/g,Gr=/<%=([\s\S]+?)%>/g,fn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,In=/^\w*$/,Un=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,hn=/[\\^$.*+?()[\]{}|]/g,$n=RegExp(hn.source),vn=/^\s+/,Ei=/\s/,Li=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Fr=/\{\n\/\* \[wrapped with (.+)\] \*/,Tn=/,? & /,Ni=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,_o=/[()=,{}\[\]\/\s]/,Pi=/\\(\\)?/g,vi=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,un=/\w*$/,qn=/^[-+]0x[0-9a-f]+$/i,Ca=/^0b[01]+$/i,pi=/^\[object .+?Constructor\]$/,Su=/^0o[0-7]+$/i,Pa=/^(?:0|[1-9]\d*)$/,Hi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ha=/($^)/,ia=/['\n\r\u2028\u2029\\]/g,kn="\\ud800-\\udfff",ui="\\u0300-\\u036f",pr="\\ufe20-\\ufe2f",Aa="\\u20d0-\\u20ff",lo=ui+pr+Aa,Vr="\\u2700-\\u27bf",$r="a-z\\xdf-\\xf6\\xf8-\\xff",Ya="\\xac\\xb1\\xd7\\xf7",Ys="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",eo="\\u2000-\\u206f",oa=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Tu="A-Z\\xc0-\\xd6\\xd8-\\xde",Dn="\\ufe0e\\ufe0f",Ai=Ya+Ys+eo+oa,Yi="['’]",Cu="["+kn+"]",il="["+Ai+"]",ji="["+lo+"]",Xa="\\d+",Xs="["+Vr+"]",rc="["+$r+"]",nc="[^"+kn+Ai+Xa+Vr+$r+Tu+"]",qr="\\ud83c[\\udffb-\\udfff]",Uo="(?:"+ji+"|"+qr+")",co="[^"+kn+"]",ic="(?:\\ud83c[\\udde6-\\uddff]){2}",Wt="[\\ud800-\\udbff][\\udc00-\\udfff]",$s="["+Tu+"]",oc="\\u200d",Ra="(?:"+rc+"|"+nc+")",Pu="(?:"+$s+"|"+nc+")",wo="(?:"+Yi+"(?:d|ll|m|re|s|t|ve))?",Kr="(?:"+Yi+"(?:D|LL|M|RE|S|T|VE))?",aa=Uo+"?",ol="["+Dn+"]?",lh="(?:"+oc+"(?:"+[co,ic,Wt].join("|")+")"+ol+aa+")*",ac="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ch="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",tf=ol+aa+lh,al="(?:"+[Xs,ic,Wt].join("|")+")"+tf,Ks="(?:"+[co+ji+"?",ji,ic,Wt,Cu].join("|")+")",ws=RegExp(Yi,"g"),$a=RegExp(ji,"g"),sl=RegExp(qr+"(?="+qr+")|"+Ks+tf,"g"),sc=RegExp([$s+"?"+rc+"+"+wo+"(?="+[il,$s,"$"].join("|")+")",Pu+"+"+Kr+"(?="+[il,$s+Ra,"$"].join("|")+")",$s+"?"+Ra+"+"+wo,$s+"+"+Kr,ch,ac,Xa,al].join("|"),"g"),uc=RegExp("["+oc+kn+lo+Dn+"]"),ul=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Zs=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ll=-1,pn={};pn[Jt]=pn[Er]=pn[Yt]=pn[dt]=pn[me]=pn[nt]=pn[lt]=pn[ct]=pn[ft]=!0,pn[ce]=pn[Ee]=pn[Vt]=pn[ke]=pn[Nt]=pn[Ie]=pn[we]=pn[xe]=pn[He]=pn[at]=pn[it]=pn[ne]=pn[Re]=pn[De]=pn[Tt]=!1;var Dr={};Dr[ce]=Dr[Ee]=Dr[Vt]=Dr[Nt]=Dr[ke]=Dr[Ie]=Dr[Jt]=Dr[Er]=Dr[Yt]=Dr[dt]=Dr[me]=Dr[He]=Dr[at]=Dr[it]=Dr[ne]=Dr[Re]=Dr[De]=Dr[Be]=Dr[nt]=Dr[lt]=Dr[ct]=Dr[ft]=!0,Dr[we]=Dr[xe]=Dr[Tt]=!1;var lc={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Qs={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},rf={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Es={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ka=parseFloat,fh=parseInt,Od=typeof od=="object"&&od&&od.Object===Object&&od,Js=typeof self=="object"&&self&&self.Object===Object&&self,zn=Od||Js||Function("return this")(),cc=e&&!e.nodeType&&e,to=cc&&!0&&r&&!r.nodeType&&r,eu=to&&to.exports===cc,fc=eu&&Od.process,Fi=function(){try{var Qe=to&&to.require&&to.require("util").types;return Qe||fc&&fc.binding&&fc.binding("util")}catch{}}(),Kn=Fi&&Fi.isArrayBuffer,Ia=Fi&&Fi.isDate,ka=Fi&&Fi.isMap,sa=Fi&&Fi.isRegExp,ut=Fi&&Fi.isSet,gt=Fi&&Fi.isTypedArray;function yt(Qe,vt,rt){switch(rt.length){case 0:return Qe.call(vt);case 1:return Qe.call(vt,rt[0]);case 2:return Qe.call(vt,rt[0],rt[1]);case 3:return Qe.call(vt,rt[0],rt[1],rt[2])}return Qe.apply(vt,rt)}function Gt(Qe,vt,rt,$t){for(var br=-1,Yr=Qe==null?0:Qe.length;++br<Yr;){var yi=Qe[br];vt($t,yi,rt(yi),Qe)}return $t}function ir(Qe,vt){for(var rt=-1,$t=Qe==null?0:Qe.length;++rt<$t&&vt(Qe[rt],rt,Qe)!==!1;);return Qe}function Jr(Qe,vt){for(var rt=Qe==null?0:Qe.length;rt--&&vt(Qe[rt],rt,Qe)!==!1;);return Qe}function Ri(Qe,vt){for(var rt=-1,$t=Qe==null?0:Qe.length;++rt<$t;)if(!vt(Qe[rt],rt,Qe))return!1;return!0}function ro(Qe,vt){for(var rt=-1,$t=Qe==null?0:Qe.length,br=0,Yr=[];++rt<$t;){var yi=Qe[rt];vt(yi,rt,Qe)&&(Yr[br++]=yi)}return Yr}function gn(Qe,vt){var rt=Qe==null?0:Qe.length;return!!rt&&Os(Qe,vt,0)>-1}function nf(Qe,vt,rt){for(var $t=-1,br=Qe==null?0:Qe.length;++$t<br;)if(rt(vt,Qe[$t]))return!0;return!1}function Gn(Qe,vt){for(var rt=-1,$t=Qe==null?0:Qe.length,br=Array($t);++rt<$t;)br[rt]=vt(Qe[rt],rt,Qe);return br}function gi(Qe,vt){for(var rt=-1,$t=vt.length,br=Qe.length;++rt<$t;)Qe[br+rt]=vt[rt];return Qe}function hc(Qe,vt,rt,$t){var br=-1,Yr=Qe==null?0:Qe.length;for($t&&Yr&&(rt=Qe[++br]);++br<Yr;)rt=vt(rt,Qe[br],br,Qe);return rt}function ep(Qe,vt,rt,$t){var br=Qe==null?0:Qe.length;for($t&&br&&(rt=Qe[--br]);br--;)rt=vt(rt,Qe[br],br,Qe);return rt}function Au(Qe,vt){for(var rt=-1,$t=Qe==null?0:Qe.length;++rt<$t;)if(vt(Qe[rt],rt,Qe))return!0;return!1}var cl=xs("length");function Ru(Qe){return Qe.split("")}function en(Qe){return Qe.match(Ni)||[]}function dc(Qe,vt,rt){var $t;return rt(Qe,function(br,Yr,yi){if(vt(br,Yr,yi))return $t=Yr,!1}),$t}function tu(Qe,vt,rt,$t){for(var br=Qe.length,Yr=rt+($t?1:-1);$t?Yr--:++Yr<br;)if(vt(Qe[Yr],Yr,Qe))return Yr;return-1}function Os(Qe,vt,rt){return vt===vt?ip(Qe,vt,rt):tu(Qe,Iu,rt)}function hh(Qe,vt,rt,$t){for(var br=rt-1,Yr=Qe.length;++br<Yr;)if($t(Qe[br],vt))return br;return-1}function Iu(Qe){return Qe!==Qe}function of(Qe,vt){var rt=Qe==null?0:Qe.length;return rt?ku(Qe,vt)/rt:de}function xs(Qe){return function(vt){return vt==null?t:vt[Qe]}}function Za(Qe){return function(vt){return Qe==null?t:Qe[vt]}}function vc(Qe,vt,rt,$t,br){return br(Qe,function(Yr,yi,pe){rt=$t?($t=!1,Yr):vt(rt,Yr,yi,pe)}),rt}function tp(Qe,vt){var rt=Qe.length;for(Qe.sort(vt);rt--;)Qe[rt]=Qe[rt].value;return Qe}function ku(Qe,vt){for(var rt,$t=-1,br=Qe.length;++$t<br;){var Yr=vt(Qe[$t]);Yr!==t&&(rt=rt===t?Yr:rt+Yr)}return rt}function af(Qe,vt){for(var rt=-1,$t=Array(Qe);++rt<Qe;)$t[rt]=vt(rt);return $t}function xd(Qe,vt){return Gn(vt,function(rt){return[rt,Qe[rt]]})}function sf(Qe){return Qe&&Qe.slice(0,Zn(Qe)+1).replace(vn,"")}function fo(Qe){return function(vt){return Qe(vt)}}function Du(Qe,vt){return Gn(vt,function(rt){return Qe[rt]})}function Qa(Qe,vt){return Qe.has(vt)}function uf(Qe,vt){for(var rt=-1,$t=Qe.length;++rt<$t&&Os(vt,Qe[rt],0)>-1;);return rt}function rp(Qe,vt){for(var rt=Qe.length;rt--&&Os(vt,Qe[rt],0)>-1;);return rt}function np(Qe,vt){for(var rt=Qe.length,$t=0;rt--;)Qe[rt]===vt&&++$t;return $t}var Eo=Za(lc),dh=Za(Qs);function vh(Qe){return"\\"+Es[Qe]}function lf(Qe,vt){return Qe==null?t:Qe[vt]}function Mu(Qe){return uc.test(Qe)}function Sd(Qe){return ul.test(Qe)}function Oo(Qe){for(var vt,rt=[];!(vt=Qe.next()).done;)rt.push(vt.value);return rt}function no(Qe){var vt=-1,rt=Array(Qe.size);return Qe.forEach(function($t,br){rt[++vt]=[br,$t]}),rt}function Cn(Qe,vt){return function(rt){return Qe(vt(rt))}}function Vn(Qe,vt){for(var rt=-1,$t=Qe.length,br=0,Yr=[];++rt<$t;){var yi=Qe[rt];(yi===vt||yi===c)&&(Qe[rt]=c,Yr[br++]=rt)}return Yr}function ph(Qe){var vt=-1,rt=Array(Qe.size);return Qe.forEach(function($t){rt[++vt]=$t}),rt}function Og(Qe){var vt=-1,rt=Array(Qe.size);return Qe.forEach(function($t){rt[++vt]=[$t,$t]}),rt}function ip(Qe,vt,rt){for(var $t=rt-1,br=Qe.length;++$t<br;)if(Qe[$t]===vt)return $t;return-1}function op(Qe,vt,rt){for(var $t=rt+1;$t--;)if(Qe[$t]===vt)return $t;return $t}function rr(Qe){return Mu(Qe)?pc(Qe):cl(Qe)}function io(Qe){return Mu(Qe)?gc(Qe):Ru(Qe)}function Zn(Qe){for(var vt=Qe.length;vt--&&Ei.test(Qe.charAt(vt)););return vt}var fl=Za(rf);function pc(Qe){for(var vt=sl.lastIndex=0;sl.test(Qe);)++vt;return vt}function gc(Qe){return Qe.match(sl)||[]}function cf(Qe){return Qe.match(sc)||[]}var hl=function Qe(vt){vt=vt==null?zn:dl.defaults(zn.Object(),vt,dl.pick(zn,Zs));var rt=vt.Array,$t=vt.Date,br=vt.Error,Yr=vt.Function,yi=vt.Math,pe=vt.Object,Ss=vt.RegExp,gh=vt.String,Qn=vt.TypeError,Br=rt.prototype,ru=Yr.prototype,qo=pe.prototype,Xi=vt["__core-js_shared__"],Ja=ru.toString,Nr=qo.hasOwnProperty,ap=0,yh=function(){var S=/[^.]+$/.exec(Xi&&Xi.keys&&Xi.keys.IE_PROTO||"");return S?"Symbol(src)_1."+S:""}(),ua=qo.toString,Td=Ja.call(pe),Cd=zn._,ff=Ss("^"+Ja.call(Nr).replace(hn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Lu=eu?vt.Buffer:t,zr=vt.Symbol,vl=vt.Uint8Array,Ts=Lu?Lu.allocUnsafe:t,pl=Cn(pe.getPrototypeOf,pe),Da=pe.create,zo=qo.propertyIsEnumerable,gl=Br.splice,hf=zr?zr.isConcatSpreadable:t,Cs=zr?zr.iterator:t,Go=zr?zr.toStringTag:t,xo=function(){try{var S=pu(pe,"defineProperty");return S({},"",{}),S}catch{}}(),sp=vt.clearTimeout!==zn.clearTimeout&&vt.clearTimeout,df=$t&&$t.now!==zn.Date.now&&$t.now,Pd=vt.setTimeout!==zn.setTimeout&&vt.setTimeout,Wn=yi.ceil,yl=yi.floor,mh=pe.getOwnPropertySymbols,Ps=Lu?Lu.isBuffer:t,vf=vt.isFinite,pf=Br.join,nu=Cn(pe.keys,pe),Ii=yi.max,dn=yi.min,bh=$t.now,ml=vt.parseInt,_h=yi.random,Nu=Br.reverse,iu=pu(vt,"DataView"),Ma=pu(vt,"Map"),ju=pu(vt,"Promise"),ou=pu(vt,"Set"),yc=pu(vt,"WeakMap"),bl=pu(pe,"create"),au=yc&&new yc,As={},up=ci(iu),Ad=ci(Ma),mc=ci(ju),wh=ci(ou),bc=ci(yc),_c=zr?zr.prototype:t,la=_c?_c.valueOf:t,su=_c?_c.toString:t;function _e(S){if(Si(S)&&!Lr(S)&&!(S instanceof jr)){if(S instanceof gr)return S;if(Nr.call(S,"__wrapped__"))return Jd(S)}return new gr(S)}var Fu=function(){function S(){}return function(k){if(!Nn(k))return{};if(Da)return Da(k);S.prototype=k;var U=new S;return S.prototype=t,U}}();function Bu(){}function gr(S,k){this.__wrapped__=S,this.__actions__=[],this.__chain__=!!k,this.__index__=0,this.__values__=t}_e.templateSettings={escape:tr,evaluate:lr,interpolate:Gr,variable:"",imports:{_:_e}},_e.prototype=Bu.prototype,_e.prototype.constructor=_e,gr.prototype=Fu(Bu.prototype),gr.prototype.constructor=gr;function jr(S){this.__wrapped__=S,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=se,this.__views__=[]}function gf(){var S=new jr(this.__wrapped__);return S.__actions__=Ui(this.__actions__),S.__dir__=this.__dir__,S.__filtered__=this.__filtered__,S.__iteratees__=Ui(this.__iteratees__),S.__takeCount__=this.__takeCount__,S.__views__=Ui(this.__views__),S}function _l(){if(this.__filtered__){var S=new jr(this);S.__dir__=-1,S.__filtered__=!0}else S=this.clone(),S.__dir__*=-1;return S}function yf(){var S=this.__wrapped__.value(),k=this.__dir__,U=Lr(S),K=k<0,oe=U?S.length:0,Oe=wp(0,oe,this.__views__),qe=Oe.start,We=Oe.end,et=We-qe,Ot=K?We:qe-1,St=this.__iteratees__,At=St.length,Ht=0,ur=dn(et,this.__takeCount__);if(!U||!K&&oe==et&&ur==et)return Vu(S,this.__actions__);var Pr=[];e:for(;et--&&Ht<ur;){Ot+=k;for(var Xr=-1,Ar=S[Ot];++Xr<At;){var on=St[Xr],cn=on.iteratee,wu=on.type,ms=cn(Ar);if(wu==Z)Ar=ms;else if(!ms){if(wu==W)continue e;break e}}Pr[Ht++]=Ar}return Pr}jr.prototype=Fu(Bu.prototype),jr.prototype.constructor=jr;function es(S){var k=-1,U=S==null?0:S.length;for(this.clear();++k<U;){var K=S[k];this.set(K[0],K[1])}}function xg(){this.__data__=bl?bl(null):{},this.size=0}function La(S){var k=this.has(S)&&delete this.__data__[S];return this.size-=k?1:0,k}function lp(S){var k=this.__data__;if(bl){var U=k[S];return U===u?t:U}return Nr.call(k,S)?k[S]:t}function mf(S){var k=this.__data__;return bl?k[S]!==t:Nr.call(k,S)}function wl(S,k){var U=this.__data__;return this.size+=this.has(S)?0:1,U[S]=bl&&k===t?u:k,this}es.prototype.clear=xg,es.prototype.delete=La,es.prototype.get=lp,es.prototype.has=mf,es.prototype.set=wl;function Na(S){var k=-1,U=S==null?0:S.length;for(this.clear();++k<U;){var K=S[k];this.set(K[0],K[1])}}function Rd(){this.__data__=[],this.size=0}function ca(S){var k=this.__data__,U=xc(k,S);if(U<0)return!1;var K=k.length-1;return U==K?k.pop():gl.call(k,U,1),--this.size,!0}function or(S){var k=this.__data__,U=xc(k,S);return U<0?t:k[U][1]}function Eh(S){return xc(this.__data__,S)>-1}function ho(S,k){var U=this.__data__,K=xc(U,S);return K<0?(++this.size,U.push([S,k])):U[K][1]=k,this}Na.prototype.clear=Rd,Na.prototype.delete=ca,Na.prototype.get=or,Na.prototype.has=Eh,Na.prototype.set=ho;function vo(S){var k=-1,U=S==null?0:S.length;for(this.clear();++k<U;){var K=S[k];this.set(K[0],K[1])}}function fa(){this.size=0,this.__data__={hash:new es,map:new(Ma||Na),string:new es}}function bf(S){var k=ya(this,S).delete(S);return this.size-=k?1:0,k}function cp(S){return ya(this,S).get(S)}function El(S){return ya(this,S).has(S)}function wc(S,k){var U=ya(this,S),K=U.size;return U.set(S,k),this.size+=U.size==K?0:1,this}vo.prototype.clear=fa,vo.prototype.delete=bf,vo.prototype.get=cp,vo.prototype.has=El,vo.prototype.set=wc;function po(S){var k=-1,U=S==null?0:S.length;for(this.__data__=new vo;++k<U;)this.add(S[k])}function Sg(S){return this.__data__.set(S,u),this}function ha(S){return this.__data__.has(S)}po.prototype.add=po.prototype.push=Sg,po.prototype.has=ha;function da(S){var k=this.__data__=new Na(S);this.size=k.size}function Ol(){this.__data__=new Na,this.size=0}function Ec(S){var k=this.__data__,U=k.delete(S);return this.size=k.size,U}function _f(S){return this.__data__.get(S)}function fp(S){return this.__data__.has(S)}function Oc(S,k){var U=this.__data__;if(U instanceof Na){var K=U.__data__;if(!Ma||K.length<i-1)return K.push([S,k]),this.size=++U.size,this;U=this.__data__=new vo(K)}return U.set(S,k),this.size=U.size,this}da.prototype.clear=Ol,da.prototype.delete=Ec,da.prototype.get=_f,da.prototype.has=fp,da.prototype.set=Oc;function Oh(S,k){var U=Lr(S),K=!U&&Ul(S),oe=!U&&!K&&ql(S),Oe=!U&&!K&&!oe&&Wf(S),qe=U||K||oe||Oe,We=qe?af(S.length,gh):[],et=We.length;for(var Ot in S)(k||Nr.call(S,Ot))&&!(qe&&(Ot=="length"||oe&&(Ot=="offset"||Ot=="parent")||Oe&&(Ot=="buffer"||Ot=="byteLength"||Ot=="byteOffset")||gu(Ot,et)))&&We.push(Ot);return We}function So(S){var k=S.length;return k?S[Il(0,k-1)]:t}function ts(S,k){return Ff(Ui(S),is(k,0,S.length))}function wf(S){return Ff(Ui(S))}function Uu(S,k,U){(U!==t&&!gs(S[k],U)||U===t&&!(k in S))&&ns(S,k,U)}function Rs(S,k,U){var K=S[k];(!(Nr.call(S,k)&&gs(K,U))||U===t&&!(k in S))&&ns(S,k,U)}function xc(S,k){for(var U=S.length;U--;)if(gs(S[U][0],k))return U;return-1}function rs(S,k,U,K){return os(S,function(oe,Oe,qe){k(K,oe,U(oe),qe)}),K}function xl(S,k){return S&&Fa(k,Ct(k),S)}function uu(S,k){return S&&Fa(k,Pe(k),S)}function ns(S,k,U){k=="__proto__"&&xo?xo(S,k,{configurable:!0,enumerable:!0,value:U,writable:!0}):S[k]=U}function Ef(S,k){for(var U=-1,K=k.length,oe=rt(K),Oe=S==null;++U<K;)oe[U]=Oe?t:Ve(S,k[U]);return oe}function is(S,k,U){return S===S&&(U!==t&&(S=S<=U?S:U),k!==t&&(S=S>=k?S:k)),S}function Vo(S,k,U,K,oe,Oe){var qe,We=k&f,et=k&h,Ot=k&d;if(U&&(qe=oe?U(S,K,oe,Oe):U(S)),qe!==t)return qe;if(!Nn(S))return S;var St=Lr(S);if(St){if(qe=Cg(S),!We)return Ui(S,qe)}else{var At=yo(S),Ht=At==xe||At==Fe;if(ql(S))return Ud(S,We);if(At==it||At==ce||Ht&&!oe){if(qe=et||Ht?{}:Op(S),!We)return et?kf(S,uu(qe,S)):Vd(S,xl(qe,S))}else{if(!Dr[At])return oe?S:{};qe=xp(S,At,We)}}Oe||(Oe=new da);var ur=Oe.get(S);if(ur)return ur;Oe.set(S,qe),Wg(S)?S.forEach(function(Ar){qe.add(Vo(Ar,k,U,Ar,S,Oe))}):Bt(S)&&S.forEach(function(Ar,on){qe.set(on,Vo(Ar,k,U,on,S,Oe))});var Pr=Ot?et?Co:Mc:et?Pe:Ct,Xr=St?t:Pr(S);return ir(Xr||S,function(Ar,on){Xr&&(on=Ar,Ar=S[on]),Rs(qe,on,Vo(Ar,k,U,on,S,Oe))}),qe}function xh(S){var k=Ct(S);return function(U){return Of(U,S,k)}}function Of(S,k,U){var K=U.length;if(S==null)return!K;for(S=pe(S);K--;){var oe=U[K],Oe=k[oe],qe=S[oe];if(qe===t&&!(oe in S)||!Oe(qe))return!1}return!0}function Wo(S,k,U){if(typeof S!="function")throw new Qn(a);return Yu(function(){S.apply(t,U)},k)}function Sc(S,k,U,K){var oe=-1,Oe=gn,qe=!0,We=S.length,et=[],Ot=k.length;if(!We)return et;U&&(k=Gn(k,fo(U))),K?(Oe=nf,qe=!1):k.length>=i&&(Oe=Qa,qe=!1,k=new po(k));e:for(;++oe<We;){var St=S[oe],At=U==null?St:U(St);if(St=K||St!==0?St:0,qe&&At===At){for(var Ht=Ot;Ht--;)if(k[Ht]===At)continue e;et.push(St)}else Oe(k,At,K)||et.push(St)}return et}var os=_p(Ho),Sh=_p(va,!0);function Sl(S,k){var U=!0;return os(S,function(K,oe,Oe){return U=!!k(K,oe,Oe),U}),U}function xf(S,k,U){for(var K=-1,oe=S.length;++K<oe;){var Oe=S[K],qe=k(Oe);if(qe!=null&&(We===t?qe===qe&&!ys(qe):U(qe,We)))var We=qe,et=Oe}return et}function Id(S,k,U,K){var oe=S.length;for(U=O(U),U<0&&(U=-U>oe?0:oe+U),K=K===t||K>oe?oe:O(K),K<0&&(K+=oe),K=U>K?0:M(K);U<K;)S[U++]=k;return S}function as(S,k){var U=[];return os(S,function(K,oe,Oe){k(K,oe,Oe)&&U.push(K)}),U}function ki(S,k,U,K,oe){var Oe=-1,qe=S.length;for(U||(U=Xd),oe||(oe=[]);++Oe<qe;){var We=S[Oe];k>0&&U(We)?k>1?ki(We,k-1,U,K,oe):gi(oe,We):K||(oe[oe.length]=We)}return oe}var Tc=Wu(),Cc=Wu(!0);function Ho(S,k){return S&&Tc(S,k,Ct)}function va(S,k){return S&&Cc(S,k,Ct)}function Pc(S,k){return ro(k,function(U){return ei(S[U])})}function ss(S,k){k=ls(k,S);for(var U=0,K=k.length;S!=null&&U<K;)S=S[ds(k[U++])];return U&&U==K?S:t}function Th(S,k,U){var K=k(S);return Lr(S)?K:gi(K,U(S))}function $i(S){return S==null?S===t?Je:wt:Go&&Go in pe(S)?ma(S):Hh(S)}function qu(S,k){return S>k}function _r(S,k){return S!=null&&Nr.call(S,k)}function lu(S,k){return S!=null&&k in pe(S)}function Sf(S,k,U){return S>=dn(k,U)&&S<Ii(k,U)}function cu(S,k,U){for(var K=U?nf:gn,oe=S[0].length,Oe=S.length,qe=Oe,We=rt(Oe),et=1/0,Ot=[];qe--;){var St=S[qe];qe&&k&&(St=Gn(St,fo(k))),et=dn(St.length,et),We[qe]=!U&&(k||oe>=120&&St.length>=120)?new po(qe&&St):t}St=S[0];var At=-1,Ht=We[0];e:for(;++At<oe&&Ot.length<et;){var ur=St[At],Pr=k?k(ur):ur;if(ur=U||ur!==0?ur:0,!(Ht?Qa(Ht,Pr):K(Ot,Pr,U))){for(qe=Oe;--qe;){var Xr=We[qe];if(!(Xr?Qa(Xr,Pr):K(S[qe],Pr,U)))continue e}Ht&&Ht.push(Pr),Ot.push(ur)}}return Ot}function kd(S,k,U,K){return Ho(S,function(oe,Oe,qe){k(K,U(oe),Oe,qe)}),K}function Tl(S,k,U){k=ls(k,S),S=hs(S,k);var K=S==null?S:S[ds(G(k))];return K==null?t:yt(K,S,U)}function Pn(S){return Si(S)&&$i(S)==ce}function Ch(S){return Si(S)&&$i(S)==Vt}function Cl(S){return Si(S)&&$i(S)==Ie}function Pl(S,k,U,K,oe){return S===k?!0:S==null||k==null||!Si(S)&&!Si(k)?S!==S&&k!==k:Ki(S,k,U,K,Pl,oe)}function Ki(S,k,U,K,oe,Oe){var qe=Lr(S),We=Lr(k),et=qe?Ee:yo(S),Ot=We?Ee:yo(k);et=et==ce?it:et,Ot=Ot==ce?it:Ot;var St=et==it,At=Ot==it,Ht=et==Ot;if(Ht&&ql(S)){if(!ql(k))return!1;qe=!0,St=!1}if(Ht&&!St)return Oe||(Oe=new da),qe||Wf(S)?Uh(S,k,U,K,oe,Oe):Dc(S,k,et,U,K,oe,Oe);if(!(U&v)){var ur=St&&Nr.call(S,"__wrapped__"),Pr=At&&Nr.call(k,"__wrapped__");if(ur||Pr){var Xr=ur?S.value():S,Ar=Pr?k.value():k;return Oe||(Oe=new da),oe(Xr,Ar,U,K,Oe)}}return Ht?(Oe||(Oe=new da),Nf(S,k,U,K,oe,Oe)):!1}function go(S){return Si(S)&&yo(S)==He}function Bi(S,k,U,K){var oe=U.length,Oe=oe,qe=!K;if(S==null)return!Oe;for(S=pe(S);oe--;){var We=U[oe];if(qe&&We[2]?We[1]!==S[We[0]]:!(We[0]in S))return!1}for(;++oe<Oe;){We=U[oe];var et=We[0],Ot=S[et],St=We[1];if(qe&&We[2]){if(Ot===t&&!(et in S))return!1}else{var At=new da;if(K)var Ht=K(Ot,St,et,S,k,At);if(!(Ht===t?Pl(St,Ot,v|g,K,At):Ht))return!1}}return!0}function Al(S){if(!Nn(S)||Vh(S))return!1;var k=ei(S)?ff:pi;return k.test(ci(S))}function Tg(S){return Si(S)&&$i(S)==ne}function fu(S){return Si(S)&&yo(S)==Re}function hp(S){return Si(S)&&yv(S.length)&&!!pn[$i(S)]}function ja(S){return typeof S=="function"?S:S==null?ai:typeof S=="object"?Lr(S)?Ah(S[0],S[1]):Rl(S):ET(S)}function Tf(S){if(!Po(S))return nu(S);var k=[];for(var U in pe(S))Nr.call(S,U)&&U!="constructor"&&k.push(U);return k}function dp(S){if(!Nn(S))return mu(S);var k=Po(S),U=[];for(var K in S)K=="constructor"&&(k||!Nr.call(S,K))||U.push(K);return U}function hu(S,k){return S<k}function Ph(S,k){var U=-1,K=wa(S)?rt(S.length):[];return os(S,function(oe,Oe,qe){K[++U]=k(oe,Oe,qe)}),K}function Rl(S){var k=kr(S);return k.length==1&&k[0][2]?Wh(k[0][0],k[0][1]):function(U){return U===S||Bi(U,S,k)}}function Ah(S,k){return $d(S)&&Nc(k)?Wh(ds(S),k):function(U){var K=Ve(U,S);return K===t&&K===k?mt(U,S):Pl(k,K,v|g)}}function us(S,k,U,K,oe){S!==k&&Tc(k,function(Oe,qe){if(oe||(oe=new da),Nn(Oe))Dd(S,k,qe,U,us,K,oe);else{var We=K?K(Fl(S,qe),Oe,qe+"",S,k,oe):t;We===t&&(We=Oe),Uu(S,qe,We)}},Pe)}function Dd(S,k,U,K,oe,Oe,qe){var We=Fl(S,U),et=Fl(k,U),Ot=qe.get(et);if(Ot){Uu(S,U,Ot);return}var St=Oe?Oe(We,et,U+"",S,k,qe):t,At=St===t;if(At){var Ht=Lr(et),ur=!Ht&&ql(et),Pr=!Ht&&!ur&&Wf(et);St=et,Ht||ur||Pr?Lr(We)?St=We:Di(We)?St=Ui(We):ur?(At=!1,St=Ud(et,!0)):Pr?(At=!1,St=zd(et,!0)):St=[]:zl(et)||Ul(et)?(St=We,Ul(We)?St=B(We):(!Nn(We)||ei(We))&&(St=Op(et))):At=!1}At&&(qe.set(et,St),oe(St,et,K,Oe,qe),qe.delete(et)),Uu(S,U,St)}function Cf(S,k){var U=S.length;if(U)return k+=k<0?U:0,gu(k,U)?S[k]:t}function zu(S,k,U){k.length?k=Gn(k,function(Oe){return Lr(Oe)?function(qe){return ss(qe,Oe.length===1?Oe[0]:Oe)}:Oe}):k=[ai];var K=-1;k=Gn(k,fo(Pt()));var oe=Ph(S,function(Oe,qe,We){var et=Gn(k,function(Ot){return Ot(Oe)});return{criteria:et,index:++K,value:Oe}});return tp(oe,function(Oe,qe){return Ml(Oe,qe,U)})}function Md(S,k){return Rh(S,k,function(U,K){return mt(S,K)})}function Rh(S,k,U){for(var K=-1,oe=k.length,Oe={};++K<oe;){var qe=k[K],We=ss(S,qe);U(We,qe)&&kl(Oe,ls(qe,S),We)}return Oe}function Oi(S){return function(k){return ss(k,S)}}function du(S,k,U,K){var oe=K?hh:Os,Oe=-1,qe=k.length,We=S;for(S===k&&(k=Ui(k)),U&&(We=Gn(S,fo(U)));++Oe<qe;)for(var et=0,Ot=k[Oe],St=U?U(Ot):Ot;(et=oe(We,St,et,K))>-1;)We!==S&&gl.call(We,et,1),gl.call(S,et,1);return S}function Ld(S,k){for(var U=S?k.length:0,K=U-1;U--;){var oe=k[U];if(U==K||oe!==Oe){var Oe=oe;gu(oe)?gl.call(S,oe,1):vu(S,oe)}}return S}function Il(S,k){return S+yl(_h()*(k-S+1))}function Nd(S,k,U,K){for(var oe=-1,Oe=Ii(Wn((k-S)/(U||1)),0),qe=rt(Oe);Oe--;)qe[K?Oe:++oe]=S,S+=U;return qe}function jd(S,k){var U="";if(!S||k<1||k>ee)return U;do k%2&&(U+=S),k=yl(k/2),k&&(S+=S);while(k);return U}function Sr(S,k){return Zd(ba(S,k,ai),S+"")}function Fd(S){return So(mn(S))}function vp(S,k){var U=mn(S);return Ff(U,is(k,0,U.length))}function kl(S,k,U,K){if(!Nn(S))return S;k=ls(k,S);for(var oe=-1,Oe=k.length,qe=Oe-1,We=S;We!=null&&++oe<Oe;){var et=ds(k[oe]),Ot=U;if(et==="__proto__"||et==="constructor"||et==="prototype")return S;if(oe!=qe){var St=We[et];Ot=K?K(St,et,We):t,Ot===t&&(Ot=Nn(St)?St:gu(k[oe+1])?[]:{})}Rs(We,et,Ot),We=We[et]}return S}var Bd=au?function(S,k){return au.set(S,k),S}:ai,pp=xo?function(S,k){return xo(S,"toString",{configurable:!0,enumerable:!1,value:bi(k),writable:!0})}:ai;function Pf(S){return Ff(mn(S))}function li(S,k,U){var K=-1,oe=S.length;k<0&&(k=-k>oe?0:oe+k),U=U>oe?oe:U,U<0&&(U+=oe),oe=k>U?0:U-k>>>0,k>>>=0;for(var Oe=rt(oe);++K<oe;)Oe[K]=S[K+k];return Oe}function gp(S,k){var U;return os(S,function(K,oe,Oe){return U=k(K,oe,Oe),!U}),!!U}function Af(S,k,U){var K=0,oe=S==null?K:S.length;if(typeof k=="number"&&k===k&&oe<=Le){for(;K<oe;){var Oe=K+oe>>>1,qe=S[Oe];qe!==null&&!ys(qe)&&(U?qe<=k:qe<k)?K=Oe+1:oe=Oe}return oe}return Ih(S,k,ai,U)}function Ih(S,k,U,K){var oe=0,Oe=S==null?0:S.length;if(Oe===0)return 0;k=U(k);for(var qe=k!==k,We=k===null,et=ys(k),Ot=k===t;oe<Oe;){var St=yl((oe+Oe)/2),At=U(S[St]),Ht=At!==t,ur=At===null,Pr=At===At,Xr=ys(At);if(qe)var Ar=K||Pr;else Ot?Ar=Pr&&(K||Ht):We?Ar=Pr&&Ht&&(K||!ur):et?Ar=Pr&&Ht&&!ur&&(K||!Xr):ur||Xr?Ar=!1:Ar=K?At<=k:At<k;Ar?oe=St+1:Oe=St}return dn(Oe,be)}function Rf(S,k){for(var U=-1,K=S.length,oe=0,Oe=[];++U<K;){var qe=S[U],We=k?k(qe):qe;if(!U||!gs(We,et)){var et=We;Oe[oe++]=qe===0?0:qe}}return Oe}function yp(S){return typeof S=="number"?S:ys(S)?de:+S}function pa(S){if(typeof S=="string")return S;if(Lr(S))return Gn(S,pa)+"";if(ys(S))return su?su.call(S):"";var k=S+"";return k=="0"&&1/S==-re?"-0":k}function Gu(S,k,U){var K=-1,oe=gn,Oe=S.length,qe=!0,We=[],et=We;if(U)qe=!1,oe=nf;else if(Oe>=i){var Ot=k?null:Ba(S);if(Ot)return ph(Ot);qe=!1,oe=Qa,et=new po}else et=k?[]:We;e:for(;++K<Oe;){var St=S[K],At=k?k(St):St;if(St=U||St!==0?St:0,qe&&At===At){for(var Ht=et.length;Ht--;)if(et[Ht]===At)continue e;k&&et.push(At),We.push(St)}else oe(et,At,U)||(et!==We&&et.push(At),We.push(St))}return We}function vu(S,k){return k=ls(k,S),S=hs(S,k),S==null||delete S[ds(G(k))]}function kh(S,k,U,K){return kl(S,k,U(ss(S,k)),K)}function Dh(S,k,U,K){for(var oe=S.length,Oe=K?oe:-1;(K?Oe--:++Oe<oe)&&k(S[Oe],Oe,S););return U?li(S,K?0:Oe,K?Oe+1:oe):li(S,K?Oe+1:0,K?oe:Oe)}function Vu(S,k){var U=S;return U instanceof jr&&(U=U.value()),hc(k,function(K,oe){return oe.func.apply(oe.thisArg,gi([K],oe.args))},U)}function Mh(S,k,U){var K=S.length;if(K<2)return K?Gu(S[0]):[];for(var oe=-1,Oe=rt(K);++oe<K;)for(var qe=S[oe],We=-1;++We<K;)We!=oe&&(Oe[oe]=Sc(Oe[oe]||qe,S[We],k,U));return Gu(ki(Oe,1),k,U)}function If(S,k,U){for(var K=-1,oe=S.length,Oe=k.length,qe={};++K<oe;){var We=K<Oe?k[K]:t;U(qe,S[K],We)}return qe}function Ac(S){return Di(S)?S:[]}function Zi(S){return typeof S=="function"?S:ai}function ls(S,k){return Lr(S)?S:$d(S,k)?[S]:Bl(z(S))}var Lh=Sr;function Is(S,k,U){var K=S.length;return U=U===t?K:U,!k&&U>=K?S:li(S,k,U)}var mp=sp||function(S){return zn.clearTimeout(S)};function Ud(S,k){if(k)return S.slice();var U=S.length,K=Ts?Ts(U):new S.constructor(U);return S.copy(K),K}function Dl(S){var k=new S.constructor(S.byteLength);return new vl(k).set(new vl(S)),k}function Rc(S,k){var U=k?Dl(S.buffer):S.buffer;return new S.constructor(U,S.byteOffset,S.byteLength)}function qd(S){var k=new S.constructor(S.source,un.exec(S));return k.lastIndex=S.lastIndex,k}function Nh(S){return la?pe(la.call(S)):{}}function zd(S,k){var U=k?Dl(S.buffer):S.buffer;return new S.constructor(U,S.byteOffset,S.length)}function jh(S,k){if(S!==k){var U=S!==t,K=S===null,oe=S===S,Oe=ys(S),qe=k!==t,We=k===null,et=k===k,Ot=ys(k);if(!We&&!Ot&&!Oe&&S>k||Oe&&qe&&et&&!We&&!Ot||K&&qe&&et||!U&&et||!oe)return 1;if(!K&&!Oe&&!Ot&&S<k||Ot&&U&&oe&&!K&&!Oe||We&&U&&oe||!qe&&oe||!et)return-1}return 0}function Ml(S,k,U){for(var K=-1,oe=S.criteria,Oe=k.criteria,qe=oe.length,We=U.length;++K<qe;){var et=jh(oe[K],Oe[K]);if(et){if(K>=We)return et;var Ot=U[K];return et*(Ot=="desc"?-1:1)}}return S.index-k.index}function Gd(S,k,U,K){for(var oe=-1,Oe=S.length,qe=U.length,We=-1,et=k.length,Ot=Ii(Oe-qe,0),St=rt(et+Ot),At=!K;++We<et;)St[We]=k[We];for(;++oe<qe;)(At||oe<Oe)&&(St[U[oe]]=S[oe]);for(;Ot--;)St[We++]=S[oe++];return St}function bp(S,k,U,K){for(var oe=-1,Oe=S.length,qe=-1,We=U.length,et=-1,Ot=k.length,St=Ii(Oe-We,0),At=rt(St+Ot),Ht=!K;++oe<St;)At[oe]=S[oe];for(var ur=oe;++et<Ot;)At[ur+et]=k[et];for(;++qe<We;)(Ht||oe<Oe)&&(At[ur+U[qe]]=S[oe++]);return At}function Ui(S,k){var U=-1,K=S.length;for(k||(k=rt(K));++U<K;)k[U]=S[U];return k}function Fa(S,k,U,K){var oe=!U;U||(U={});for(var Oe=-1,qe=k.length;++Oe<qe;){var We=k[Oe],et=K?K(U[We],S[We],We,U,S):t;et===t&&(et=S[We]),oe?ns(U,We,et):Rs(U,We,et)}return U}function Vd(S,k){return Fa(S,zh(S),k)}function kf(S,k){return Fa(S,ln(S),k)}function Df(S,k){return function(U,K){var oe=Lr(U)?Gt:rs,Oe=k?k():{};return oe(U,S,Pt(K,2),Oe)}}function ks(S){return Sr(function(k,U){var K=-1,oe=U.length,Oe=oe>1?U[oe-1]:t,qe=oe>2?U[2]:t;for(Oe=S.length>3&&typeof Oe=="function"?(oe--,Oe):t,qe&&ao(U[0],U[1],qe)&&(Oe=oe<3?t:Oe,oe=1),k=pe(k);++K<oe;){var We=U[K];We&&S(k,We,K,Oe)}return k})}function _p(S,k){return function(U,K){if(U==null)return U;if(!wa(U))return S(U,K);for(var oe=U.length,Oe=k?oe:-1,qe=pe(U);(k?Oe--:++Oe<oe)&&K(qe[Oe],Oe,qe)!==!1;);return U}}function Wu(S){return function(k,U,K){for(var oe=-1,Oe=pe(k),qe=K(k),We=qe.length;We--;){var et=qe[S?We:++oe];if(U(Oe[et],et,Oe)===!1)break}return k}}function cs(S,k,U){var K=k&_,oe=Hu(S);function Oe(){var qe=this&&this!==zn&&this instanceof Oe?oe:S;return qe.apply(K?U:this,arguments)}return Oe}function Ic(S){return function(k){k=z(k);var U=Mu(k)?io(k):t,K=U?U[0]:k.charAt(0),oe=U?Is(U,1).join(""):k.slice(1);return K[S]()+oe}}function Ll(S){return function(k){return hc(Xf(nn(k).replace(ws,"")),S,"")}}function Hu(S){return function(){var k=arguments;switch(k.length){case 0:return new S;case 1:return new S(k[0]);case 2:return new S(k[0],k[1]);case 3:return new S(k[0],k[1],k[2]);case 4:return new S(k[0],k[1],k[2],k[3]);case 5:return new S(k[0],k[1],k[2],k[3],k[4]);case 6:return new S(k[0],k[1],k[2],k[3],k[4],k[5]);case 7:return new S(k[0],k[1],k[2],k[3],k[4],k[5],k[6])}var U=Fu(S.prototype),K=S.apply(U,k);return Nn(K)?K:U}}function Fh(S,k,U){var K=Hu(S);function oe(){for(var Oe=arguments.length,qe=rt(Oe),We=Oe,et=Lc(oe);We--;)qe[We]=arguments[We];var Ot=Oe<3&&qe[0]!==et&&qe[Oe-1]!==et?[]:Vn(qe,et);if(Oe-=Ot.length,Oe<U)return Hd(S,k,Mf,oe.placeholder,t,qe,Ot,t,t,U-Oe);var St=this&&this!==zn&&this instanceof oe?K:S;return yt(St,this,qe)}return oe}function Wd(S){return function(k,U,K){var oe=pe(k);if(!wa(k)){var Oe=Pt(U,3);k=Ct(k),U=function(We){return Oe(oe[We],We,oe)}}var qe=S(k,U,K);return qe>-1?oe[Oe?k[qe]:qe]:t}}function oo(S){return ga(function(k){var U=k.length,K=U,oe=gr.prototype.thru;for(S&&k.reverse();K--;){var Oe=k[K];if(typeof Oe!="function")throw new Qn(a);if(oe&&!qe&&qh(Oe)=="wrapper")var qe=new gr([],!0)}for(K=qe?K:U;++K<U;){Oe=k[K];var We=qh(Oe),et=We=="wrapper"?fs(Oe):t;et&&Ur(et[0])&&et[1]==(T|m|C|R)&&!et[4].length&&et[9]==1?qe=qe[qh(et[0])].apply(qe,et[3]):qe=Oe.length==1&&Ur(Oe)?qe[We]():qe.thru(Oe)}return function(){var Ot=arguments,St=Ot[0];if(qe&&Ot.length==1&&Lr(St))return qe.plant(St).value();for(var At=0,Ht=U?k[At].apply(this,Ot):St;++At<U;)Ht=k[At].call(this,Ht);return Ht}})}function Mf(S,k,U,K,oe,Oe,qe,We,et,Ot){var St=k&T,At=k&_,Ht=k&y,ur=k&(m|E),Pr=k&D,Xr=Ht?t:Hu(S);function Ar(){for(var on=arguments.length,cn=rt(on),wu=on;wu--;)cn[wu]=arguments[wu];if(ur)var ms=Lc(Ar),Eu=np(cn,ms);if(K&&(cn=Gd(cn,K,oe,ur)),Oe&&(cn=bp(cn,Oe,qe,ur)),on-=Eu,ur&&on<Ot){var uo=Vn(cn,ms);return Hd(S,k,Mf,Ar.placeholder,U,cn,uo,We,et,Ot-on)}var Kl=At?U:this,Kf=Ht?Kl[S]:S;return on=cn.length,We?cn=Sp(cn,We):Pr&&on>1&&cn.reverse(),St&&et<on&&(cn.length=et),this&&this!==zn&&this instanceof Ar&&(Kf=Xr||Hu(Kf)),Kf.apply(Kl,cn)}return Ar}function Nl(S,k){return function(U,K){return kd(U,S,k(K),{})}}function Yo(S,k){return function(U,K){var oe;if(U===t&&K===t)return k;if(U!==t&&(oe=U),K!==t){if(oe===t)return K;typeof U=="string"||typeof K=="string"?(U=pa(U),K=pa(K)):(U=yp(U),K=yp(K)),oe=S(U,K)}return oe}}function Cr(S){return ga(function(k){return k=Gn(k,fo(Pt())),Sr(function(U){var K=this;return S(k,function(oe){return yt(oe,K,U)})})})}function Lf(S,k){k=k===t?" ":pa(k);var U=k.length;if(U<2)return U?jd(k,S):k;var K=jd(k,Wn(S/rr(k)));return Mu(k)?Is(io(K),0,S).join(""):K.slice(0,S)}function To(S,k,U,K){var oe=k&_,Oe=Hu(S);function qe(){for(var We=-1,et=arguments.length,Ot=-1,St=K.length,At=rt(St+et),Ht=this&&this!==zn&&this instanceof qe?Oe:S;++Ot<St;)At[Ot]=K[Ot];for(;et--;)At[Ot++]=arguments[++We];return yt(Ht,oe?U:this,At)}return qe}function Hn(S){return function(k,U,K){return K&&typeof K!="number"&&ao(k,U,K)&&(U=K=t),k=x(k),U===t?(U=k,k=0):U=x(U),K=K===t?k<U?1:-1:x(K),Nd(k,U,K,S)}}function Qi(S){return function(k,U){return typeof k=="string"&&typeof U=="string"||(k=I(k),U=I(U)),S(k,U)}}function Hd(S,k,U,K,oe,Oe,qe,We,et,Ot){var St=k&m,At=St?qe:t,Ht=St?t:qe,ur=St?Oe:t,Pr=St?t:Oe;k|=St?C:P,k&=~(St?P:C),k&p||(k&=-4);var Xr=[S,k,oe,ur,At,Pr,Ht,We,et,Ot],Ar=U.apply(t,Xr);return Ur(S)&&jf(Ar,Xr),Ar.placeholder=K,Qd(Ar,S,k)}function jl(S){var k=yi[S];return function(U,K){if(U=I(U),K=K==null?0:dn(O(K),292),K&&vf(U)){var oe=(z(U)+"e").split("e"),Oe=k(oe[0]+"e"+(+oe[1]+K));return oe=(z(Oe)+"e").split("e"),+(oe[0]+"e"+(+oe[1]-K))}return k(U)}}var Ba=ou&&1/ph(new ou([,-0]))[1]==re?function(S){return new ou(S)}:Xg;function kc(S){return function(k){var U=yo(k);return U==He?no(k):U==Re?Og(k):xd(k,S(k))}}function Xo(S,k,U,K,oe,Oe,qe,We){var et=k&y;if(!et&&typeof S!="function")throw new Qn(a);var Ot=K?K.length:0;if(Ot||(k&=-97,K=oe=t),qe=qe===t?qe:Ii(O(qe),0),We=We===t?We:O(We),Ot-=oe?oe.length:0,k&P){var St=K,At=oe;K=oe=t}var Ht=et?t:fs(S),ur=[S,k,U,K,oe,St,At,Oe,qe,We];if(Ht&&yu(ur,Ht),S=ur[0],k=ur[1],U=ur[2],K=ur[3],oe=ur[4],We=ur[9]=ur[9]===t?et?0:S.length:Ii(ur[9]-Ot,0),!We&&k&(m|E)&&(k&=-25),!k||k==_)var Pr=cs(S,k,U);else k==m||k==E?Pr=Fh(S,k,We):(k==C||k==(_|C))&&!oe.length?Pr=To(S,k,U,K):Pr=Mf.apply(t,ur);var Xr=Ht?Bd:jf;return Qd(Xr(Pr,ur),S,k)}function Yn(S,k,U,K){return S===t||gs(S,qo[U])&&!Nr.call(K,U)?k:S}function Mn(S,k,U,K,oe,Oe){return Nn(S)&&Nn(k)&&(Oe.set(k,S),us(S,k,t,Mn,Oe),Oe.delete(k)),S}function Bh(S){return zl(S)?t:S}function Uh(S,k,U,K,oe,Oe){var qe=U&v,We=S.length,et=k.length;if(We!=et&&!(qe&&et>We))return!1;var Ot=Oe.get(S),St=Oe.get(k);if(Ot&&St)return Ot==k&&St==S;var At=-1,Ht=!0,ur=U&g?new po:t;for(Oe.set(S,k),Oe.set(k,S);++At<We;){var Pr=S[At],Xr=k[At];if(K)var Ar=qe?K(Xr,Pr,At,k,S,Oe):K(Pr,Xr,At,S,k,Oe);if(Ar!==t){if(Ar)continue;Ht=!1;break}if(ur){if(!Au(k,function(on,cn){if(!Qa(ur,cn)&&(Pr===on||oe(Pr,on,U,K,Oe)))return ur.push(cn)})){Ht=!1;break}}else if(!(Pr===Xr||oe(Pr,Xr,U,K,Oe))){Ht=!1;break}}return Oe.delete(S),Oe.delete(k),Ht}function Dc(S,k,U,K,oe,Oe,qe){switch(U){case Nt:if(S.byteLength!=k.byteLength||S.byteOffset!=k.byteOffset)return!1;S=S.buffer,k=k.buffer;case Vt:return!(S.byteLength!=k.byteLength||!Oe(new vl(S),new vl(k)));case ke:case Ie:case at:return gs(+S,+k);case we:return S.name==k.name&&S.message==k.message;case ne:case De:return S==k+"";case He:var We=no;case Re:var et=K&v;if(We||(We=ph),S.size!=k.size&&!et)return!1;var Ot=qe.get(S);if(Ot)return Ot==k;K|=g,qe.set(S,k);var St=Uh(We(S),We(k),K,oe,Oe,qe);return qe.delete(S),St;case Be:if(la)return la.call(S)==la.call(k)}return!1}function Nf(S,k,U,K,oe,Oe){var qe=U&v,We=Mc(S),et=We.length,Ot=Mc(k),St=Ot.length;if(et!=St&&!qe)return!1;for(var At=et;At--;){var Ht=We[At];if(!(qe?Ht in k:Nr.call(k,Ht)))return!1}var ur=Oe.get(S),Pr=Oe.get(k);if(ur&&Pr)return ur==k&&Pr==S;var Xr=!0;Oe.set(S,k),Oe.set(k,S);for(var Ar=qe;++At<et;){Ht=We[At];var on=S[Ht],cn=k[Ht];if(K)var wu=qe?K(cn,on,Ht,k,S,Oe):K(on,cn,Ht,S,k,Oe);if(!(wu===t?on===cn||oe(on,cn,U,K,Oe):wu)){Xr=!1;break}Ar||(Ar=Ht=="constructor")}if(Xr&&!Ar){var ms=S.constructor,Eu=k.constructor;ms!=Eu&&"constructor"in S&&"constructor"in k&&!(typeof ms=="function"&&ms instanceof ms&&typeof Eu=="function"&&Eu instanceof Eu)&&(Xr=!1)}return Oe.delete(S),Oe.delete(k),Xr}function ga(S){return Zd(ba(S,t,$h),S+"")}function Mc(S){return Th(S,Ct,zh)}function Co(S){return Th(S,Pe,ln)}var fs=au?function(S){return au.get(S)}:Xg;function qh(S){for(var k=S.name+"",U=As[k],K=Nr.call(As,k)?U.length:0;K--;){var oe=U[K],Oe=oe.func;if(Oe==null||Oe==S)return oe.name}return k}function Lc(S){var k=Nr.call(_e,"placeholder")?_e:S;return k.placeholder}function Pt(){var S=_e.iteratee||bu;return S=S===bu?ja:S,arguments.length?S(arguments[0],arguments[1]):S}function ya(S,k){var U=S.__data__;return qi(k)?U[typeof k=="string"?"string":"hash"]:U.map}function kr(S){for(var k=Ct(S),U=k.length;U--;){var K=k[U],oe=S[K];k[U]=[K,oe,Nc(oe)]}return k}function pu(S,k){var U=lf(S,k);return Al(U)?U:t}function ma(S){var k=Nr.call(S,Go),U=S[Go];try{S[Go]=t;var K=!0}catch{}var oe=ua.call(S);return K&&(k?S[Go]=U:delete S[Go]),oe}var zh=mh?function(S){return S==null?[]:(S=pe(S),ro(mh(S),function(k){return zo.call(S,k)}))}:Sb,ln=mh?function(S){for(var k=[];S;)gi(k,zh(S)),S=pl(S);return k}:Sb,yo=$i;(iu&&yo(new iu(new ArrayBuffer(1)))!=Nt||Ma&&yo(new Ma)!=He||ju&&yo(ju.resolve())!=H||ou&&yo(new ou)!=Re||yc&&yo(new yc)!=Tt)&&(yo=function(S){var k=$i(S),U=k==it?S.constructor:t,K=U?ci(U):"";if(K)switch(K){case up:return Nt;case Ad:return He;case mc:return H;case wh:return Re;case bc:return Tt}return k});function wp(S,k,U){for(var K=-1,oe=U.length;++K<oe;){var Oe=U[K],qe=Oe.size;switch(Oe.type){case"drop":S+=qe;break;case"dropRight":k-=qe;break;case"take":k=dn(k,S+qe);break;case"takeRight":S=Ii(S,k-qe);break}}return{start:S,end:k}}function Gh(S){var k=S.match(Fr);return k?k[1].split(Tn):[]}function Ep(S,k,U){k=ls(k,S);for(var K=-1,oe=k.length,Oe=!1;++K<oe;){var qe=ds(k[K]);if(!(Oe=S!=null&&U(S,qe)))break;S=S[qe]}return Oe||++K!=oe?Oe:(oe=S==null?0:S.length,!!oe&&yv(oe)&&gu(qe,oe)&&(Lr(S)||Ul(S)))}function Cg(S){var k=S.length,U=new S.constructor(k);return k&&typeof S[0]=="string"&&Nr.call(S,"index")&&(U.index=S.index,U.input=S.input),U}function Op(S){return typeof S.constructor=="function"&&!Po(S)?Fu(pl(S)):{}}function xp(S,k,U){var K=S.constructor;switch(k){case Vt:return Dl(S);case ke:case Ie:return new K(+S);case Nt:return Rc(S,U);case Jt:case Er:case Yt:case dt:case me:case nt:case lt:case ct:case ft:return zd(S,U);case He:return new K;case at:case De:return new K(S);case ne:return qd(S);case Re:return new K;case Be:return Nh(S)}}function Yd(S,k){var U=k.length;if(!U)return S;var K=U-1;return k[K]=(U>1?"& ":"")+k[K],k=k.join(U>2?", ":" "),S.replace(Li,`{
/* [wrapped with `+k+`] */
`)}function Xd(S){return Lr(S)||Ul(S)||!!(hf&&S&&S[hf])}function gu(S,k){var U=typeof S;return k=k??ee,!!k&&(U=="number"||U!="symbol"&&Pa.test(S))&&S>-1&&S%1==0&&S<k}function ao(S,k,U){if(!Nn(U))return!1;var K=typeof k;return(K=="number"?wa(U)&&gu(k,U.length):K=="string"&&k in U)?gs(U[k],S):!1}function $d(S,k){if(Lr(S))return!1;var U=typeof S;return U=="number"||U=="symbol"||U=="boolean"||S==null||ys(S)?!0:In.test(S)||!fn.test(S)||k!=null&&S in pe(k)}function qi(S){var k=typeof S;return k=="string"||k=="number"||k=="symbol"||k=="boolean"?S!=="__proto__":S===null}function Ur(S){var k=qh(S),U=_e[k];if(typeof U!="function"||!(k in jr.prototype))return!1;if(S===U)return!0;var K=fs(U);return!!K&&S===K[0]}function Vh(S){return!!yh&&yh in S}var $o=Xi?ei:Tb;function Po(S){var k=S&&S.constructor,U=typeof k=="function"&&k.prototype||qo;return S===U}function Nc(S){return S===S&&!Nn(S)}function Wh(S,k){return function(U){return U==null?!1:U[S]===k&&(k!==t||S in pe(U))}}function Kd(S){var k=dv(S,function(K){return U.size===l&&U.clear(),K}),U=k.cache;return k}function yu(S,k){var U=S[1],K=k[1],oe=U|K,Oe=oe<(_|y|T),qe=K==T&&U==m||K==T&&U==R&&S[7].length<=k[8]||K==(T|R)&&k[7].length<=k[8]&&U==m;if(!(Oe||qe))return S;K&_&&(S[2]=k[2],oe|=U&_?0:p);var We=k[3];if(We){var et=S[3];S[3]=et?Gd(et,We,k[4]):We,S[4]=et?Vn(S[3],c):k[4]}return We=k[5],We&&(et=S[5],S[5]=et?bp(et,We,k[6]):We,S[6]=et?Vn(S[5],c):k[6]),We=k[7],We&&(S[7]=We),K&T&&(S[8]=S[8]==null?k[8]:dn(S[8],k[8])),S[9]==null&&(S[9]=k[9]),S[0]=k[0],S[1]=oe,S}function mu(S){var k=[];if(S!=null)for(var U in pe(S))k.push(U);return k}function Hh(S){return ua.call(S)}function ba(S,k,U){return k=Ii(k===t?S.length-1:k,0),function(){for(var K=arguments,oe=-1,Oe=Ii(K.length-k,0),qe=rt(Oe);++oe<Oe;)qe[oe]=K[k+oe];oe=-1;for(var We=rt(k+1);++oe<k;)We[oe]=K[oe];return We[k]=U(qe),yt(S,this,We)}}function hs(S,k){return k.length<2?S:ss(S,li(k,0,-1))}function Sp(S,k){for(var U=S.length,K=dn(k.length,U),oe=Ui(S);K--;){var Oe=k[K];S[K]=gu(Oe,U)?oe[Oe]:t}return S}function Fl(S,k){if(!(k==="constructor"&&typeof S[k]=="function")&&k!="__proto__")return S[k]}var jf=Yh(Bd),Yu=Pd||function(S,k){return zn.setTimeout(S,k)},Zd=Yh(pp);function Qd(S,k,U){var K=k+"";return Zd(S,Yd(K,jc(Gh(K),U)))}function Yh(S){var k=0,U=0;return function(){var K=bh(),oe=q-(K-U);if(U=K,oe>0){if(++k>=F)return arguments[0]}else k=0;return S.apply(t,arguments)}}function Ff(S,k){var U=-1,K=S.length,oe=K-1;for(k=k===t?K:k;++U<k;){var Oe=Il(U,oe),qe=S[Oe];S[Oe]=S[U],S[U]=qe}return S.length=k,S}var Bl=Kd(function(S){var k=[];return S.charCodeAt(0)===46&&k.push(""),S.replace(Un,function(U,K,oe,Oe){k.push(oe?Oe.replace(Pi,"$1"):K||U)}),k});function ds(S){if(typeof S=="string"||ys(S))return S;var k=S+"";return k=="0"&&1/S==-re?"-0":k}function ci(S){if(S!=null){try{return Ja.call(S)}catch{}try{return S+""}catch{}}return""}function jc(S,k){return ir(fe,function(U){var K="_."+U[0];k&U[1]&&!gn(S,K)&&S.push(K)}),S.sort()}function Jd(S){if(S instanceof jr)return S.clone();var k=new gr(S.__wrapped__,S.__chain__);return k.__actions__=Ui(S.__actions__),k.__index__=S.__index__,k.__values__=S.__values__,k}function Ko(S,k,U){(U?ao(S,k,U):k===t)?k=1:k=Ii(O(k),0);var K=S==null?0:S.length;if(!K||k<1)return[];for(var oe=0,Oe=0,qe=rt(Wn(K/k));oe<K;)qe[Oe++]=li(S,oe,oe+=k);return qe}function so(S){for(var k=-1,U=S==null?0:S.length,K=0,oe=[];++k<U;){var Oe=S[k];Oe&&(oe[K++]=Oe)}return oe}function Tp(){var S=arguments.length;if(!S)return[];for(var k=rt(S-1),U=arguments[0],K=S;K--;)k[K-1]=arguments[K];return gi(Lr(U)?Ui(U):[U],ki(k,1))}var Xu=Sr(function(S,k){return Di(S)?Sc(S,ki(k,1,Di,!0)):[]}),ev=Sr(function(S,k){var U=G(k);return Di(U)&&(U=t),Di(S)?Sc(S,ki(k,1,Di,!0),Pt(U,2)):[]}),Xh=Sr(function(S,k){var U=G(k);return Di(U)&&(U=t),Di(S)?Sc(S,ki(k,1,Di,!0),t,U):[]});function Bf(S,k,U){var K=S==null?0:S.length;return K?(k=U||k===t?1:O(k),li(S,k<0?0:k,K)):[]}function Cp(S,k,U){var K=S==null?0:S.length;return K?(k=U||k===t?1:O(k),k=K-k,li(S,0,k<0?0:k)):[]}function Pg(S,k){return S&&S.length?Dh(S,Pt(k,3),!0,!0):[]}function tv(S,k){return S&&S.length?Dh(S,Pt(k,3),!0):[]}function Ua(S,k,U,K){var oe=S==null?0:S.length;return oe?(U&&typeof U!="number"&&ao(S,k,U)&&(U=0,K=oe),Id(S,k,U,K)):[]}function rv(S,k,U){var K=S==null?0:S.length;if(!K)return-1;var oe=U==null?0:O(U);return oe<0&&(oe=Ii(K+oe,0)),tu(S,Pt(k,3),oe)}function Ao(S,k,U){var K=S==null?0:S.length;if(!K)return-1;var oe=K-1;return U!==t&&(oe=O(U),oe=U<0?Ii(K+oe,0):dn(oe,K-1)),tu(S,Pt(k,3),oe,!0)}function $h(S){var k=S==null?0:S.length;return k?ki(S,1):[]}function nv(S){var k=S==null?0:S.length;return k?ki(S,re):[]}function Uf(S,k){var U=S==null?0:S.length;return U?(k=k===t?1:O(k),ki(S,k)):[]}function iv(S){for(var k=-1,U=S==null?0:S.length,K={};++k<U;){var oe=S[k];K[oe[0]]=oe[1]}return K}function ov(S){return S&&S.length?S[0]:t}function Ag(S,k,U){var K=S==null?0:S.length;if(!K)return-1;var oe=U==null?0:O(U);return oe<0&&(oe=Ii(K+oe,0)),Os(S,k,oe)}function Jn(S){var k=S==null?0:S.length;return k?li(S,0,-1):[]}var Pp=Sr(function(S){var k=Gn(S,Ac);return k.length&&k[0]===S[0]?cu(k):[]}),av=Sr(function(S){var k=G(S),U=Gn(S,Ac);return k===G(U)?k=t:U.pop(),U.length&&U[0]===S[0]?cu(U,Pt(k,2)):[]}),A=Sr(function(S){var k=G(S),U=Gn(S,Ac);return k=typeof k=="function"?k:t,k&&U.pop(),U.length&&U[0]===S[0]?cu(U,t,k):[]});function N(S,k){return S==null?"":pf.call(S,k)}function G(S){var k=S==null?0:S.length;return k?S[k-1]:t}function te(S,k,U){var K=S==null?0:S.length;if(!K)return-1;var oe=K;return U!==t&&(oe=O(U),oe=oe<0?Ii(K+oe,0):dn(oe,K-1)),k===k?op(S,k,oe):tu(S,Iu,oe,!0)}function ae(S,k){return S&&S.length?Cf(S,O(k)):t}var Se=Sr(ze);function ze(S,k){return S&&S.length&&k&&k.length?du(S,k):S}function Ye(S,k,U){return S&&S.length&&k&&k.length?du(S,k,Pt(U,2)):S}function st(S,k,U){return S&&S.length&&k&&k.length?du(S,k,t,U):S}var Et=ga(function(S,k){var U=S==null?0:S.length,K=Ef(S,k);return Ld(S,Gn(k,function(oe){return gu(oe,U)?+oe:oe}).sort(jh)),K});function _t(S,k){var U=[];if(!(S&&S.length))return U;var K=-1,oe=[],Oe=S.length;for(k=Pt(k,3);++K<Oe;){var qe=S[K];k(qe,K,S)&&(U.push(qe),oe.push(K))}return Ld(S,oe),U}function Rt(S){return S==null?S:Nu.call(S)}function Kt(S,k,U){var K=S==null?0:S.length;return K?(U&&typeof U!="number"&&ao(S,k,U)?(k=0,U=K):(k=k==null?0:O(k),U=U===t?K:O(U)),li(S,k,U)):[]}function Zt(S,k){return Af(S,k)}function cr(S,k,U){return Ih(S,k,Pt(U,2))}function xt(S,k){var U=S==null?0:S.length;if(U){var K=Af(S,k);if(K<U&&gs(S[K],k))return K}return-1}function Dt(S,k){return Af(S,k,!0)}function vr(S,k,U){return Ih(S,k,Pt(U,2),!0)}function Ft(S,k){var U=S==null?0:S.length;if(U){var K=Af(S,k,!0)-1;if(gs(S[K],k))return K}return-1}function Or(S){return S&&S.length?Rf(S):[]}function wr(S,k){return S&&S.length?Rf(S,Pt(k,2)):[]}function tn(S){var k=S==null?0:S.length;return k?li(S,1,k):[]}function sr(S,k,U){return S&&S.length?(k=U||k===t?1:O(k),li(S,0,k<0?0:k)):[]}function dr(S,k,U){var K=S==null?0:S.length;return K?(k=U||k===t?1:O(k),k=K-k,li(S,k<0?0:k,K)):[]}function xi(S,k){return S&&S.length?Dh(S,Pt(k,3),!1,!0):[]}function Xn(S,k){return S&&S.length?Dh(S,Pt(k,3)):[]}var Ro=Sr(function(S){return Gu(ki(S,1,Di,!0))}),Ln=Sr(function(S){var k=G(S);return Di(k)&&(k=t),Gu(ki(S,1,Di,!0),Pt(k,2))}),mo=Sr(function(S){var k=G(S);return k=typeof k=="function"?k:t,Gu(ki(S,1,Di,!0),t,k)});function Ds(S){return S&&S.length?Gu(S):[]}function Ms(S,k){return S&&S.length?Gu(S,Pt(k,2)):[]}function vs(S,k){return k=typeof k=="function"?k:t,S&&S.length?Gu(S,t,k):[]}function ps(S){if(!(S&&S.length))return[];var k=0;return S=ro(S,function(U){if(Di(U))return k=Ii(U.length,k),!0}),af(k,function(U){return Gn(S,xs(U))})}function Ls(S,k){if(!(S&&S.length))return[];var U=ps(S);return k==null?U:Gn(U,function(K){return yt(k,t,K)})}var sv=Sr(function(S,k){return Di(S)?Sc(S,k):[]}),qf=Sr(function(S){return Mh(ro(S,Di))}),uv=Sr(function(S){var k=G(S);return Di(k)&&(k=t),Mh(ro(S,Di),Pt(k,2))}),Ns=Sr(function(S){var k=G(S);return k=typeof k=="function"?k:t,Mh(ro(S,Di),t,k)}),Fc=Sr(ps);function lv(S,k){return If(S||[],k||[],Rs)}function zf(S,k){return If(S||[],k||[],kl)}var Gf=Sr(function(S){var k=S.length,U=k>1?S[k-1]:t;return U=typeof U=="function"?(S.pop(),U):t,Ls(S,U)});function _a(S){var k=_e(S);return k.__chain__=!0,k}function tb(S,k){return k(S),S}function Mr(S,k){return k(S)}var Wy=ga(function(S){var k=S.length,U=k?S[0]:0,K=this.__wrapped__,oe=function(Oe){return Ef(Oe,S)};return k>1||this.__actions__.length||!(K instanceof jr)||!gu(U)?this.thru(oe):(K=K.slice(U,+U+(k?1:0)),K.__actions__.push({func:Mr,args:[oe],thisArg:t}),new gr(K,this.__chain__).thru(function(Oe){return k&&!Oe.length&&Oe.push(t),Oe}))});function Ap(){return _a(this)}function Rg(){return new gr(this.value(),this.__chain__)}function Kh(){this.__values__===t&&(this.__values__=w(this.value()));var S=this.__index__>=this.__values__.length,k=S?t:this.__values__[this.__index__++];return{done:S,value:k}}function Hy(){return this}function Yy(S){for(var k,U=this;U instanceof Bu;){var K=Jd(U);K.__index__=0,K.__values__=t,k?oe.__wrapped__=K:k=K;var oe=K;U=U.__wrapped__}return oe.__wrapped__=S,k}function Rp(){var S=this.__wrapped__;if(S instanceof jr){var k=S;return this.__actions__.length&&(k=new jr(this)),k=k.reverse(),k.__actions__.push({func:Mr,args:[Rt],thisArg:t}),new gr(k,this.__chain__)}return this.thru(Rt)}function cv(){return Vu(this.__wrapped__,this.__actions__)}var rb=Df(function(S,k,U){Nr.call(S,U)?++S[U]:ns(S,U,1)});function fv(S,k,U){var K=Lr(S)?Ri:Sl;return U&&ao(S,k,U)&&(k=t),K(S,Pt(k,3))}function Ip(S,k){var U=Lr(S)?ro:as;return U(S,Pt(k,3))}var nb=Wd(rv),kp=Wd(Ao);function ib(S,k){return ki(Mp(S,k),1)}function Ig(S,k){return ki(Mp(S,k),re)}function Xy(S,k,U){return U=U===t?1:O(U),ki(Mp(S,k),U)}function $y(S,k){var U=Lr(S)?ir:os;return U(S,Pt(k,3))}function Ky(S,k){var U=Lr(S)?Jr:Sh;return U(S,Pt(k,3))}var Dp=Df(function(S,k,U){Nr.call(S,U)?S[U].push(k):ns(S,U,[k])});function Zy(S,k,U,K){S=wa(S)?S:mn(S),U=U&&!K?O(U):0;var oe=S.length;return U<0&&(U=Ii(oe+U,0)),Fp(S)?U<=oe&&S.indexOf(k,U)>-1:!!oe&&Os(S,k,U)>-1}var ob=Sr(function(S,k,U){var K=-1,oe=typeof k=="function",Oe=wa(S)?rt(S.length):[];return os(S,function(qe){Oe[++K]=oe?yt(k,qe,U):Tl(qe,k,U)}),Oe}),ab=Df(function(S,k,U){ns(S,U,k)});function Mp(S,k){var U=Lr(S)?Gn:Ph;return U(S,Pt(k,3))}function Qy(S,k,U,K){return S==null?[]:(Lr(k)||(k=k==null?[]:[k]),U=K?t:U,Lr(U)||(U=U==null?[]:[U]),zu(S,k,U))}var sb=Df(function(S,k,U){S[U?0:1].push(k)},function(){return[[],[]]});function ub(S,k,U){var K=Lr(S)?hc:vc,oe=arguments.length<3;return K(S,Pt(k,4),U,oe,os)}function lb(S,k,U){var K=Lr(S)?ep:vc,oe=arguments.length<3;return K(S,Pt(k,4),U,oe,Sh)}function cb(S,k){var U=Lr(S)?ro:as;return U(S,vv(Pt(k,3)))}function fb(S){var k=Lr(S)?So:Fd;return k(S)}function Jy(S,k,U){(U?ao(S,k,U):k===t)?k=1:k=O(k);var K=Lr(S)?ts:vp;return K(S,k)}function em(S){var k=Lr(S)?wf:Pf;return k(S)}function tm(S){if(S==null)return 0;if(wa(S))return Fp(S)?rr(S):S.length;var k=yo(S);return k==He||k==Re?S.size:Tf(S).length}function kg(S,k,U){var K=Lr(S)?Au:gp;return U&&ao(S,k,U)&&(k=t),K(S,Pt(k,3))}var Dg=Sr(function(S,k){if(S==null)return[];var U=k.length;return U>1&&ao(S,k[0],k[1])?k=[]:U>2&&ao(k[0],k[1],k[2])&&(k=[k[0]]),zu(S,ki(k,1),[])}),Bc=df||function(){return zn.Date.now()};function Mg(S,k){if(typeof k!="function")throw new Qn(a);return S=O(S),function(){if(--S<1)return k.apply(this,arguments)}}function Lg(S,k,U){return k=U?t:k,k=S&&k==null?S.length:k,Xo(S,T,t,t,t,t,k)}function Lp(S,k){var U;if(typeof k!="function")throw new Qn(a);return S=O(S),function(){return--S>0&&(U=k.apply(this,arguments)),S<=1&&(k=t),U}}var $u=Sr(function(S,k,U){var K=_;if(U.length){var oe=Vn(U,Lc($u));K|=C}return Xo(S,K,k,U,oe)}),Zh=Sr(function(S,k,U){var K=_|y;if(U.length){var oe=Vn(U,Lc(Zh));K|=C}return Xo(k,K,S,U,oe)});function Ng(S,k,U){k=U?t:k;var K=Xo(S,m,t,t,t,t,t,k);return K.placeholder=Ng.placeholder,K}function jg(S,k,U){k=U?t:k;var K=Xo(S,E,t,t,t,t,t,k);return K.placeholder=jg.placeholder,K}function rm(S,k,U){var K,oe,Oe,qe,We,et,Ot=0,St=!1,At=!1,Ht=!0;if(typeof S!="function")throw new Qn(a);k=I(k)||0,Nn(U)&&(St=!!U.leading,At="maxWait"in U,Oe=At?Ii(I(U.maxWait)||0,k):Oe,Ht="trailing"in U?!!U.trailing:Ht);function ur(uo){var Kl=K,Kf=oe;return K=oe=t,Ot=uo,qe=S.apply(Kf,Kl),qe}function Pr(uo){return Ot=uo,We=Yu(on,k),St?ur(uo):qe}function Xr(uo){var Kl=uo-et,Kf=uo-Ot,OT=k-Kl;return At?dn(OT,Oe-Kf):OT}function Ar(uo){var Kl=uo-et,Kf=uo-Ot;return et===t||Kl>=k||Kl<0||At&&Kf>=Oe}function on(){var uo=Bc();if(Ar(uo))return cn(uo);We=Yu(on,Xr(uo))}function cn(uo){return We=t,Ht&&K?ur(uo):(K=oe=t,qe)}function wu(){We!==t&&mp(We),Ot=0,K=et=oe=We=t}function ms(){return We===t?qe:cn(Bc())}function Eu(){var uo=Bc(),Kl=Ar(uo);if(K=arguments,oe=this,et=uo,Kl){if(We===t)return Pr(et);if(At)return mp(We),We=Yu(on,k),ur(et)}return We===t&&(We=Yu(on,k)),qe}return Eu.cancel=wu,Eu.flush=ms,Eu}var hb=Sr(function(S,k){return Wo(S,1,k)}),Np=Sr(function(S,k,U){return Wo(S,I(k)||0,U)});function hv(S){return Xo(S,D)}function dv(S,k){if(typeof S!="function"||k!=null&&typeof k!="function")throw new Qn(a);var U=function(){var K=arguments,oe=k?k.apply(this,K):K[0],Oe=U.cache;if(Oe.has(oe))return Oe.get(oe);var qe=S.apply(this,K);return U.cache=Oe.set(oe,qe)||Oe,qe};return U.cache=new(dv.Cache||vo),U}dv.Cache=vo;function vv(S){if(typeof S!="function")throw new Qn(a);return function(){var k=arguments;switch(k.length){case 0:return!S.call(this);case 1:return!S.call(this,k[0]);case 2:return!S.call(this,k[0],k[1]);case 3:return!S.call(this,k[0],k[1],k[2])}return!S.apply(this,k)}}function nm(S){return Lp(2,S)}var Fg=Lh(function(S,k){k=k.length==1&&Lr(k[0])?Gn(k[0],fo(Pt())):Gn(ki(k,1),fo(Pt()));var U=k.length;return Sr(function(K){for(var oe=-1,Oe=dn(K.length,U);++oe<Oe;)K[oe]=k[oe].call(this,K[oe]);return yt(S,this,K)})}),pv=Sr(function(S,k){var U=Vn(k,Lc(pv));return Xo(S,C,t,k,U)}),Bg=Sr(function(S,k){var U=Vn(k,Lc(Bg));return Xo(S,P,t,k,U)}),db=ga(function(S,k){return Xo(S,R,t,t,t,k)});function vb(S,k){if(typeof S!="function")throw new Qn(a);return k=k===t?k:O(k),Sr(S,k)}function Ug(S,k){if(typeof S!="function")throw new Qn(a);return k=k==null?0:Ii(O(k),0),Sr(function(U){var K=U[k],oe=Is(U,0,k);return K&&gi(oe,K),yt(S,this,oe)})}function pb(S,k,U){var K=!0,oe=!0;if(typeof S!="function")throw new Qn(a);return Nn(U)&&(K="leading"in U?!!U.leading:K,oe="trailing"in U?!!U.trailing:oe),rm(S,k,{leading:K,maxWait:k,trailing:oe})}function gb(S){return Lg(S,1)}function yb(S,k){return pv(Zi(k),S)}function Io(){if(!arguments.length)return[];var S=arguments[0];return Lr(S)?S:[S]}function qg(S){return Vo(S,d)}function mb(S,k){return k=typeof k=="function"?k:t,Vo(S,d,k)}function im(S){return Vo(S,f|d)}function zg(S,k){return k=typeof k=="function"?k:t,Vo(S,f|d,k)}function Gg(S,k){return k==null||Of(S,k,Ct(k))}function gs(S,k){return S===k||S!==S&&k!==k}var bb=Qi(qu),Vf=Qi(function(S,k){return S>=k}),Ul=Pn(function(){return arguments}())?Pn:function(S){return Si(S)&&Nr.call(S,"callee")&&!zo.call(S,"callee")},Lr=rt.isArray,_b=Kn?fo(Kn):Ch;function wa(S){return S!=null&&yv(S.length)&&!ei(S)}function Di(S){return Si(S)&&wa(S)}function om(S){return S===!0||S===!1||Si(S)&&$i(S)==ke}var ql=Ps||Tb,wb=Ia?fo(Ia):Cl;function gv(S){return Si(S)&&S.nodeType===1&&!zl(S)}function Eb(S){if(S==null)return!0;if(wa(S)&&(Lr(S)||typeof S=="string"||typeof S.splice=="function"||ql(S)||Wf(S)||Ul(S)))return!S.length;var k=yo(S);if(k==He||k==Re)return!S.size;if(Po(S))return!Tf(S).length;for(var U in S)if(Nr.call(S,U))return!1;return!0}function Vg(S,k){return Pl(S,k)}function am(S,k,U){U=typeof U=="function"?U:t;var K=U?U(S,k):t;return K===t?Pl(S,k,t,U):!!K}function jp(S){if(!Si(S))return!1;var k=$i(S);return k==we||k==ve||typeof S.message=="string"&&typeof S.name=="string"&&!zl(S)}function sm(S){return typeof S=="number"&&vf(S)}function ei(S){if(!Nn(S))return!1;var k=$i(S);return k==xe||k==Fe||k==Ce||k==$}function um(S){return typeof S=="number"&&S==O(S)}function yv(S){return typeof S=="number"&&S>-1&&S%1==0&&S<=ee}function Nn(S){var k=typeof S;return S!=null&&(k=="object"||k=="function")}function Si(S){return S!=null&&typeof S=="object"}var Bt=ka?fo(ka):go;function Qh(S,k){return S===k||Bi(S,k,kr(k))}function qa(S,k,U){return U=typeof U=="function"?U:t,Bi(S,k,kr(k),U)}function mv(S){return Zo(S)&&S!=+S}function lm(S){if($o(S))throw new br(o);return Al(S)}function an(S){return S===null}function En(S){return S==null}function Zo(S){return typeof S=="number"||Si(S)&&$i(S)==at}function zl(S){if(!Si(S)||$i(S)!=it)return!1;var k=pl(S);if(k===null)return!0;var U=Nr.call(k,"constructor")&&k.constructor;return typeof U=="function"&&U instanceof U&&Ja.call(U)==Td}var Ea=sa?fo(sa):Tg;function cm(S){return um(S)&&S>=-ee&&S<=ee}var Wg=ut?fo(ut):fu;function Fp(S){return typeof S=="string"||!Lr(S)&&Si(S)&&$i(S)==De}function ys(S){return typeof S=="symbol"||Si(S)&&$i(S)==Be}var Wf=gt?fo(gt):hp;function Hg(S){return S===t}function Yg(S){return Si(S)&&yo(S)==Tt}function Ob(S){return Si(S)&&$i(S)==Lt}var xb=Qi(hu),b=Qi(function(S,k){return S<=k});function w(S){if(!S)return[];if(wa(S))return Fp(S)?io(S):Ui(S);if(Cs&&S[Cs])return Oo(S[Cs]());var k=yo(S),U=k==He?no:k==Re?ph:mn;return U(S)}function x(S){if(!S)return S===0?S:0;if(S=I(S),S===re||S===-re){var k=S<0?-1:1;return k*ue}return S===S?S:0}function O(S){var k=x(S),U=k%1;return k===k?U?k-U:k:0}function M(S){return S?is(O(S),0,se):0}function I(S){if(typeof S=="number")return S;if(ys(S))return de;if(Nn(S)){var k=typeof S.valueOf=="function"?S.valueOf():S;S=Nn(k)?k+"":k}if(typeof S!="string")return S===0?S:+S;S=sf(S);var U=Ca.test(S);return U||Su.test(S)?fh(S.slice(2),U?2:8):qn.test(S)?de:+S}function B(S){return Fa(S,Pe(S))}function V(S){return S?is(O(S),-ee,ee):S===0?S:0}function z(S){return S==null?"":pa(S)}var Y=ks(function(S,k){if(Po(k)||wa(k)){Fa(k,Ct(k),S);return}for(var U in k)Nr.call(k,U)&&Rs(S,U,k[U])}),X=ks(function(S,k){Fa(k,Pe(k),S)}),J=ks(function(S,k,U,K){Fa(k,Pe(k),S,K)}),ie=ks(function(S,k,U,K){Fa(k,Ct(k),S,K)}),he=ga(Ef);function ge(S,k){var U=Fu(S);return k==null?U:xl(U,k)}var le=Sr(function(S,k){S=pe(S);var U=-1,K=k.length,oe=K>2?k[2]:t;for(oe&&ao(k[0],k[1],oe)&&(K=1);++U<K;)for(var Oe=k[U],qe=Pe(Oe),We=-1,et=qe.length;++We<et;){var Ot=qe[We],St=S[Ot];(St===t||gs(St,qo[Ot])&&!Nr.call(S,Ot))&&(S[Ot]=Oe[Ot])}return S}),ye=Sr(function(S){return S.push(t,Mn),yt(Ze,t,S)});function Me(S,k){return dc(S,Pt(k,3),Ho)}function Ne(S,k){return dc(S,Pt(k,3),va)}function Ue(S,k){return S==null?S:Tc(S,Pt(k,3),Pe)}function je(S,k){return S==null?S:Cc(S,Pt(k,3),Pe)}function Xe(S,k){return S&&Ho(S,Pt(k,3))}function Ge(S,k){return S&&va(S,Pt(k,3))}function Ke(S){return S==null?[]:Pc(S,Ct(S))}function $e(S){return S==null?[]:Pc(S,Pe(S))}function Ve(S,k,U){var K=S==null?t:ss(S,k);return K===t?U:K}function tt(S,k){return S!=null&&Ep(S,k,_r)}function mt(S,k){return S!=null&&Ep(S,k,lu)}var It=Nl(function(S,k,U){k!=null&&typeof k.toString!="function"&&(k=ua.call(k)),S[k]=U},bi(ai)),bt=Nl(function(S,k,U){k!=null&&typeof k.toString!="function"&&(k=ua.call(k)),Nr.call(S,k)?S[k].push(U):S[k]=[U]},Pt),jt=Sr(Tl);function Ct(S){return wa(S)?Oh(S):Tf(S)}function Pe(S){return wa(S)?Oh(S,!0):dp(S)}function Te(S,k){var U={};return k=Pt(k,3),Ho(S,function(K,oe,Oe){ns(U,k(K,oe,Oe),K)}),U}function Ae(S,k){var U={};return k=Pt(k,3),Ho(S,function(K,oe,Oe){ns(U,oe,k(K,oe,Oe))}),U}var ot=ks(function(S,k,U){us(S,k,U)}),Ze=ks(function(S,k,U,K){us(S,k,U,K)}),ht=ga(function(S,k){var U={};if(S==null)return U;var K=!1;k=Gn(k,function(Oe){return Oe=ls(Oe,S),K||(K=Oe.length>1),Oe}),Fa(S,Co(S),U),K&&(U=Vo(U,f|h|d,Bh));for(var oe=k.length;oe--;)vu(U,k[oe]);return U});function kt(S,k){return qt(S,vv(Pt(k)))}var Ut=ga(function(S,k){return S==null?{}:Md(S,k)});function qt(S,k){if(S==null)return{};var U=Gn(Co(S),function(K){return[K]});return k=Pt(k),Rh(S,U,function(K,oe){return k(K,oe[0])})}function Tr(S,k,U){k=ls(k,S);var K=-1,oe=k.length;for(oe||(oe=1,S=t);++K<oe;){var Oe=S==null?t:S[ds(k[K])];Oe===t&&(K=oe,Oe=U),S=ei(Oe)?Oe.call(S):Oe}return S}function Ir(S,k,U){return S==null?S:kl(S,k,U)}function Wr(S,k,U,K){return K=typeof K=="function"?K:t,S==null?S:kl(S,k,U,K)}var On=kc(Ct),jn=kc(Pe);function yn(S,k,U){var K=Lr(S),oe=K||ql(S)||Wf(S);if(k=Pt(k,4),U==null){var Oe=S&&S.constructor;oe?U=K?new Oe:[]:Nn(S)?U=ei(Oe)?Fu(pl(S)):{}:U={}}return(oe?ir:Ho)(S,function(qe,We,et){return k(U,qe,We,et)}),U}function Zr(S,k){return S==null?!0:vu(S,k)}function Hr(S,k,U){return S==null?S:kh(S,k,Zi(U))}function sn(S,k,U,K){return K=typeof K=="function"?K:t,S==null?S:kh(S,k,Zi(U),K)}function mn(S){return S==null?[]:Du(S,Ct(S))}function ti(S){return S==null?[]:Du(S,Pe(S))}function rn(S,k,U){return U===t&&(U=k,k=t),U!==t&&(U=I(U),U=U===U?U:0),k!==t&&(k=I(k),k=k===k?k:0),is(I(S),k,U)}function An(S,k,U){return k=x(k),U===t?(U=k,k=0):U=x(U),S=I(S),Sf(S,k,U)}function ri(S,k,U){if(U&&typeof U!="boolean"&&ao(S,k,U)&&(k=U=t),U===t&&(typeof k=="boolean"?(U=k,k=t):typeof S=="boolean"&&(U=S,S=t)),S===t&&k===t?(S=0,k=1):(S=x(S),k===t?(k=S,S=0):k=x(k)),S>k){var K=S;S=k,k=K}if(U||S%1||k%1){var oe=_h();return dn(S+oe*(k-S+Ka("1e-"+((oe+"").length-1))),k)}return Il(S,k)}var ni=Ll(function(S,k,U){return k=k.toLowerCase(),S+(U?fi(k):k)});function fi(S){return Hl(z(S).toLowerCase())}function nn(S){return S=z(S),S&&S.replace(Hi,Eo).replace($a,"")}function mi(S,k,U){S=z(S),k=pa(k);var K=S.length;U=U===t?K:is(O(U),0,K);var oe=U;return U-=k.length,U>=0&&S.slice(U,oe)==k}function bn(S){return S=z(S),S&&nr.test(S)?S.replace(Rr,dh):S}function ko(S){return S=z(S),S&&$n.test(S)?S.replace(hn,"\\$&"):S}var Qo=Ll(function(S,k,U){return S+(U?"-":"")+k.toLowerCase()}),Ku=Ll(function(S,k,U){return S+(U?" ":"")+k.toLowerCase()}),Gl=Ic("toLowerCase");function Zu(S,k,U){S=z(S),k=O(k);var K=k?rr(S):0;if(!k||K>=k)return S;var oe=(k-K)/2;return Lf(yl(oe),U)+S+Lf(Wn(oe),U)}function za(S,k,U){S=z(S),k=O(k);var K=k?rr(S):0;return k&&K<k?S+Lf(k-K,U):S}function ii(S,k,U){S=z(S),k=O(k);var K=k?rr(S):0;return k&&K<k?Lf(k-K,U)+S:S}function xn(S,k,U){return U||k==null?k=0:k&&(k=+k),ml(z(S).replace(vn,""),k||0)}function zi(S,k,U){return(U?ao(S,k,U):k===t)?k=1:k=O(k),jd(z(S),k)}function Jo(){var S=arguments,k=z(S[0]);return S.length<3?k:k.replace(S[1],S[2])}var Do=Ll(function(S,k,U){return S+(U?"_":"")+k.toLowerCase()});function js(S,k,U){return U&&typeof U!="number"&&ao(S,k,U)&&(k=U=t),U=U===t?se:U>>>0,U?(S=z(S),S&&(typeof k=="string"||k!=null&&!Ea(k))&&(k=pa(k),!k&&Mu(S))?Is(io(S),0,U):S.split(k,U)):[]}var hi=Ll(function(S,k,U){return S+(U?" ":"")+Hl(k)});function Uc(S,k,U){return S=z(S),U=U==null?0:is(O(U),0,S.length),k=pa(k),S.slice(U,U+k.length)==k}function Hf(S,k,U){var K=_e.templateSettings;U&&ao(S,k,U)&&(k=t),S=z(S),k=J({},k,K,Yn);var oe=J({},k.imports,K.imports,Yn),Oe=Ct(oe),qe=Du(oe,Oe),We,et,Ot=0,St=k.interpolate||Ha,At="__p += '",Ht=Ss((k.escape||Ha).source+"|"+St.source+"|"+(St===Gr?vi:Ha).source+"|"+(k.evaluate||Ha).source+"|$","g"),ur="//# sourceURL="+(Nr.call(k,"sourceURL")?(k.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ll+"]")+`
`;S.replace(Ht,function(Ar,on,cn,wu,ms,Eu){return cn||(cn=wu),At+=S.slice(Ot,Eu).replace(ia,vh),on&&(We=!0,At+=`' +
__e(`+on+`) +
'`),ms&&(et=!0,At+=`';
`+ms+`;
__p += '`),cn&&(At+=`' +
((__t = (`+cn+`)) == null ? '' : __t) +
'`),Ot=Eu+Ar.length,Ar}),At+=`';
`;var Pr=Nr.call(k,"variable")&&k.variable;if(!Pr)At=`with (obj) {
`+At+`
}
`;else if(_o.test(Pr))throw new br(s);At=(et?At.replace(Xt,""):At).replace(pt,"$1").replace(Qt,"$1;"),At="function("+(Pr||"obj")+`) {
`+(Pr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(We?", __e = _.escape":"")+(et?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+At+`return __p
}`;var Xr=Gc(function(){return Yr(Oe,ur+"return "+At).apply(t,qe)});if(Xr.source=At,jp(Xr))throw Xr;return Xr}function Vl(S){return z(S).toLowerCase()}function bv(S){return z(S).toUpperCase()}function qc(S,k,U){if(S=z(S),S&&(U||k===t))return sf(S);if(!S||!(k=pa(k)))return S;var K=io(S),oe=io(k),Oe=uf(K,oe),qe=rp(K,oe)+1;return Is(K,Oe,qe).join("")}function Wl(S,k,U){if(S=z(S),S&&(U||k===t))return S.slice(0,Zn(S)+1);if(!S||!(k=pa(k)))return S;var K=io(S),oe=rp(K,io(k))+1;return Is(K,0,oe).join("")}function zc(S,k,U){if(S=z(S),S&&(U||k===t))return S.replace(vn,"");if(!S||!(k=pa(k)))return S;var K=io(S),oe=uf(K,io(k));return Is(K,oe).join("")}function Fs(S,k){var U=L,K=j;if(Nn(k)){var oe="separator"in k?k.separator:oe;U="length"in k?O(k.length):U,K="omission"in k?pa(k.omission):K}S=z(S);var Oe=S.length;if(Mu(S)){var qe=io(S);Oe=qe.length}if(U>=Oe)return S;var We=U-rr(K);if(We<1)return K;var et=qe?Is(qe,0,We).join(""):S.slice(0,We);if(oe===t)return et+K;if(qe&&(We+=et.length-We),Ea(oe)){if(S.slice(We).search(oe)){var Ot,St=et;for(oe.global||(oe=Ss(oe.source,z(un.exec(oe))+"g")),oe.lastIndex=0;Ot=oe.exec(St);)var At=Ot.index;et=et.slice(0,At===t?We:At)}}else if(S.indexOf(pa(oe),We)!=We){var Ht=et.lastIndexOf(oe);Ht>-1&&(et=et.slice(0,Ht))}return et+K}function Bs(S){return S=z(S),S&&ar.test(S)?S.replace(mr,fl):S}var Yf=Ll(function(S,k,U){return S+(U?" ":"")+k.toUpperCase()}),Hl=Ic("toUpperCase");function Xf(S,k,U){return S=z(S),k=U?t:k,k===t?Sd(S)?cf(S):en(S):S.match(k)||[]}var Gc=Sr(function(S,k){try{return yt(S,t,k)}catch(U){return jp(U)?U:new br(U)}}),Jh=ga(function(S,k){return ir(k,function(U){U=ds(U),ns(S,U,$u(S[U],S))}),S});function $f(S){var k=S==null?0:S.length,U=Pt();return S=k?Gn(S,function(K){if(typeof K[1]!="function")throw new Qn(a);return[U(K[0]),K[1]]}):[],Sr(function(K){for(var oe=-1;++oe<k;){var Oe=S[oe];if(yt(Oe[0],this,K))return yt(Oe[1],this,K)}})}function oi(S){return xh(Vo(S,f))}function bi(S){return function(){return S}}function ed(S,k){return S==null||S!==S?k:S}var Yl=oo(),Gi=oo(!0);function ai(S){return S}function bu(S){return ja(typeof S=="function"?S:Vo(S,f))}function Qu(S){return Rl(Vo(S,f))}function Xl(S,k){return Ah(S,Vo(k,f))}var td=Sr(function(S,k){return function(U){return Tl(U,S,k)}}),$l=Sr(function(S,k){return function(U){return Tl(S,U,k)}});function Vc(S,k,U){var K=Ct(k),oe=Pc(k,K);U==null&&!(Nn(k)&&(oe.length||!K.length))&&(U=k,k=S,S=this,oe=Pc(k,Ct(k)));var Oe=!(Nn(U)&&"chain"in U)||!!U.chain,qe=ei(S);return ir(oe,function(We){var et=k[We];S[We]=et,qe&&(S.prototype[We]=function(){var Ot=this.__chain__;if(Oe||Ot){var St=S(this.__wrapped__),At=St.__actions__=Ui(this.__actions__);return At.push({func:et,args:arguments,thisArg:S}),St.__chain__=Ot,St}return et.apply(S,gi([this.value()],arguments))})}),S}function _u(){return zn._===this&&(zn._=Cd),this}function Xg(){}function mN(S){return S=O(S),Sr(function(k){return Cf(k,S)})}var bN=Cr(Gn),_N=Cr(Ri),wN=Cr(Au);function ET(S){return $d(S)?xs(ds(S)):Oi(S)}function EN(S){return function(k){return S==null?t:ss(S,k)}}var ON=Hn(),xN=Hn(!0);function Sb(){return[]}function Tb(){return!1}function SN(){return{}}function TN(){return""}function CN(){return!0}function PN(S,k){if(S=O(S),S<1||S>ee)return[];var U=se,K=dn(S,se);k=Pt(k),S-=se;for(var oe=af(K,k);++U<S;)k(U);return oe}function AN(S){return Lr(S)?Gn(S,ds):ys(S)?[S]:Ui(Bl(z(S)))}function RN(S){var k=++ap;return z(S)+k}var IN=Yo(function(S,k){return S+k},0),kN=jl("ceil"),DN=Yo(function(S,k){return S/k},1),MN=jl("floor");function LN(S){return S&&S.length?xf(S,ai,qu):t}function NN(S,k){return S&&S.length?xf(S,Pt(k,2),qu):t}function jN(S){return of(S,ai)}function FN(S,k){return of(S,Pt(k,2))}function BN(S){return S&&S.length?xf(S,ai,hu):t}function UN(S,k){return S&&S.length?xf(S,Pt(k,2),hu):t}var qN=Yo(function(S,k){return S*k},1),zN=jl("round"),GN=Yo(function(S,k){return S-k},0);function VN(S){return S&&S.length?ku(S,ai):0}function WN(S,k){return S&&S.length?ku(S,Pt(k,2)):0}return _e.after=Mg,_e.ary=Lg,_e.assign=Y,_e.assignIn=X,_e.assignInWith=J,_e.assignWith=ie,_e.at=he,_e.before=Lp,_e.bind=$u,_e.bindAll=Jh,_e.bindKey=Zh,_e.castArray=Io,_e.chain=_a,_e.chunk=Ko,_e.compact=so,_e.concat=Tp,_e.cond=$f,_e.conforms=oi,_e.constant=bi,_e.countBy=rb,_e.create=ge,_e.curry=Ng,_e.curryRight=jg,_e.debounce=rm,_e.defaults=le,_e.defaultsDeep=ye,_e.defer=hb,_e.delay=Np,_e.difference=Xu,_e.differenceBy=ev,_e.differenceWith=Xh,_e.drop=Bf,_e.dropRight=Cp,_e.dropRightWhile=Pg,_e.dropWhile=tv,_e.fill=Ua,_e.filter=Ip,_e.flatMap=ib,_e.flatMapDeep=Ig,_e.flatMapDepth=Xy,_e.flatten=$h,_e.flattenDeep=nv,_e.flattenDepth=Uf,_e.flip=hv,_e.flow=Yl,_e.flowRight=Gi,_e.fromPairs=iv,_e.functions=Ke,_e.functionsIn=$e,_e.groupBy=Dp,_e.initial=Jn,_e.intersection=Pp,_e.intersectionBy=av,_e.intersectionWith=A,_e.invert=It,_e.invertBy=bt,_e.invokeMap=ob,_e.iteratee=bu,_e.keyBy=ab,_e.keys=Ct,_e.keysIn=Pe,_e.map=Mp,_e.mapKeys=Te,_e.mapValues=Ae,_e.matches=Qu,_e.matchesProperty=Xl,_e.memoize=dv,_e.merge=ot,_e.mergeWith=Ze,_e.method=td,_e.methodOf=$l,_e.mixin=Vc,_e.negate=vv,_e.nthArg=mN,_e.omit=ht,_e.omitBy=kt,_e.once=nm,_e.orderBy=Qy,_e.over=bN,_e.overArgs=Fg,_e.overEvery=_N,_e.overSome=wN,_e.partial=pv,_e.partialRight=Bg,_e.partition=sb,_e.pick=Ut,_e.pickBy=qt,_e.property=ET,_e.propertyOf=EN,_e.pull=Se,_e.pullAll=ze,_e.pullAllBy=Ye,_e.pullAllWith=st,_e.pullAt=Et,_e.range=ON,_e.rangeRight=xN,_e.rearg=db,_e.reject=cb,_e.remove=_t,_e.rest=vb,_e.reverse=Rt,_e.sampleSize=Jy,_e.set=Ir,_e.setWith=Wr,_e.shuffle=em,_e.slice=Kt,_e.sortBy=Dg,_e.sortedUniq=Or,_e.sortedUniqBy=wr,_e.split=js,_e.spread=Ug,_e.tail=tn,_e.take=sr,_e.takeRight=dr,_e.takeRightWhile=xi,_e.takeWhile=Xn,_e.tap=tb,_e.throttle=pb,_e.thru=Mr,_e.toArray=w,_e.toPairs=On,_e.toPairsIn=jn,_e.toPath=AN,_e.toPlainObject=B,_e.transform=yn,_e.unary=gb,_e.union=Ro,_e.unionBy=Ln,_e.unionWith=mo,_e.uniq=Ds,_e.uniqBy=Ms,_e.uniqWith=vs,_e.unset=Zr,_e.unzip=ps,_e.unzipWith=Ls,_e.update=Hr,_e.updateWith=sn,_e.values=mn,_e.valuesIn=ti,_e.without=sv,_e.words=Xf,_e.wrap=yb,_e.xor=qf,_e.xorBy=uv,_e.xorWith=Ns,_e.zip=Fc,_e.zipObject=lv,_e.zipObjectDeep=zf,_e.zipWith=Gf,_e.entries=On,_e.entriesIn=jn,_e.extend=X,_e.extendWith=J,Vc(_e,_e),_e.add=IN,_e.attempt=Gc,_e.camelCase=ni,_e.capitalize=fi,_e.ceil=kN,_e.clamp=rn,_e.clone=qg,_e.cloneDeep=im,_e.cloneDeepWith=zg,_e.cloneWith=mb,_e.conformsTo=Gg,_e.deburr=nn,_e.defaultTo=ed,_e.divide=DN,_e.endsWith=mi,_e.eq=gs,_e.escape=bn,_e.escapeRegExp=ko,_e.every=fv,_e.find=nb,_e.findIndex=rv,_e.findKey=Me,_e.findLast=kp,_e.findLastIndex=Ao,_e.findLastKey=Ne,_e.floor=MN,_e.forEach=$y,_e.forEachRight=Ky,_e.forIn=Ue,_e.forInRight=je,_e.forOwn=Xe,_e.forOwnRight=Ge,_e.get=Ve,_e.gt=bb,_e.gte=Vf,_e.has=tt,_e.hasIn=mt,_e.head=ov,_e.identity=ai,_e.includes=Zy,_e.indexOf=Ag,_e.inRange=An,_e.invoke=jt,_e.isArguments=Ul,_e.isArray=Lr,_e.isArrayBuffer=_b,_e.isArrayLike=wa,_e.isArrayLikeObject=Di,_e.isBoolean=om,_e.isBuffer=ql,_e.isDate=wb,_e.isElement=gv,_e.isEmpty=Eb,_e.isEqual=Vg,_e.isEqualWith=am,_e.isError=jp,_e.isFinite=sm,_e.isFunction=ei,_e.isInteger=um,_e.isLength=yv,_e.isMap=Bt,_e.isMatch=Qh,_e.isMatchWith=qa,_e.isNaN=mv,_e.isNative=lm,_e.isNil=En,_e.isNull=an,_e.isNumber=Zo,_e.isObject=Nn,_e.isObjectLike=Si,_e.isPlainObject=zl,_e.isRegExp=Ea,_e.isSafeInteger=cm,_e.isSet=Wg,_e.isString=Fp,_e.isSymbol=ys,_e.isTypedArray=Wf,_e.isUndefined=Hg,_e.isWeakMap=Yg,_e.isWeakSet=Ob,_e.join=N,_e.kebabCase=Qo,_e.last=G,_e.lastIndexOf=te,_e.lowerCase=Ku,_e.lowerFirst=Gl,_e.lt=xb,_e.lte=b,_e.max=LN,_e.maxBy=NN,_e.mean=jN,_e.meanBy=FN,_e.min=BN,_e.minBy=UN,_e.stubArray=Sb,_e.stubFalse=Tb,_e.stubObject=SN,_e.stubString=TN,_e.stubTrue=CN,_e.multiply=qN,_e.nth=ae,_e.noConflict=_u,_e.noop=Xg,_e.now=Bc,_e.pad=Zu,_e.padEnd=za,_e.padStart=ii,_e.parseInt=xn,_e.random=ri,_e.reduce=ub,_e.reduceRight=lb,_e.repeat=zi,_e.replace=Jo,_e.result=Tr,_e.round=zN,_e.runInContext=Qe,_e.sample=fb,_e.size=tm,_e.snakeCase=Do,_e.some=kg,_e.sortedIndex=Zt,_e.sortedIndexBy=cr,_e.sortedIndexOf=xt,_e.sortedLastIndex=Dt,_e.sortedLastIndexBy=vr,_e.sortedLastIndexOf=Ft,_e.startCase=hi,_e.startsWith=Uc,_e.subtract=GN,_e.sum=VN,_e.sumBy=WN,_e.template=Hf,_e.times=PN,_e.toFinite=x,_e.toInteger=O,_e.toLength=M,_e.toLower=Vl,_e.toNumber=I,_e.toSafeInteger=V,_e.toString=z,_e.toUpper=bv,_e.trim=qc,_e.trimEnd=Wl,_e.trimStart=zc,_e.truncate=Fs,_e.unescape=Bs,_e.uniqueId=RN,_e.upperCase=Yf,_e.upperFirst=Hl,_e.each=$y,_e.eachRight=Ky,_e.first=ov,Vc(_e,function(){var S={};return Ho(_e,function(k,U){Nr.call(_e.prototype,U)||(S[U]=k)}),S}(),{chain:!1}),_e.VERSION=n,ir(["bind","bindKey","curry","curryRight","partial","partialRight"],function(S){_e[S].placeholder=_e}),ir(["drop","take"],function(S,k){jr.prototype[S]=function(U){U=U===t?1:Ii(O(U),0);var K=this.__filtered__&&!k?new jr(this):this.clone();return K.__filtered__?K.__takeCount__=dn(U,K.__takeCount__):K.__views__.push({size:dn(U,se),type:S+(K.__dir__<0?"Right":"")}),K},jr.prototype[S+"Right"]=function(U){return this.reverse()[S](U).reverse()}}),ir(["filter","map","takeWhile"],function(S,k){var U=k+1,K=U==W||U==Q;jr.prototype[S]=function(oe){var Oe=this.clone();return Oe.__iteratees__.push({iteratee:Pt(oe,3),type:U}),Oe.__filtered__=Oe.__filtered__||K,Oe}}),ir(["head","last"],function(S,k){var U="take"+(k?"Right":"");jr.prototype[S]=function(){return this[U](1).value()[0]}}),ir(["initial","tail"],function(S,k){var U="drop"+(k?"":"Right");jr.prototype[S]=function(){return this.__filtered__?new jr(this):this[U](1)}}),jr.prototype.compact=function(){return this.filter(ai)},jr.prototype.find=function(S){return this.filter(S).head()},jr.prototype.findLast=function(S){return this.reverse().find(S)},jr.prototype.invokeMap=Sr(function(S,k){return typeof S=="function"?new jr(this):this.map(function(U){return Tl(U,S,k)})}),jr.prototype.reject=function(S){return this.filter(vv(Pt(S)))},jr.prototype.slice=function(S,k){S=O(S);var U=this;return U.__filtered__&&(S>0||k<0)?new jr(U):(S<0?U=U.takeRight(-S):S&&(U=U.drop(S)),k!==t&&(k=O(k),U=k<0?U.dropRight(-k):U.take(k-S)),U)},jr.prototype.takeRightWhile=function(S){return this.reverse().takeWhile(S).reverse()},jr.prototype.toArray=function(){return this.take(se)},Ho(jr.prototype,function(S,k){var U=/^(?:filter|find|map|reject)|While$/.test(k),K=/^(?:head|last)$/.test(k),oe=_e[K?"take"+(k=="last"?"Right":""):k],Oe=K||/^find/.test(k);oe&&(_e.prototype[k]=function(){var qe=this.__wrapped__,We=K?[1]:arguments,et=qe instanceof jr,Ot=We[0],St=et||Lr(qe),At=function(on){var cn=oe.apply(_e,gi([on],We));return K&&Ht?cn[0]:cn};St&&U&&typeof Ot=="function"&&Ot.length!=1&&(et=St=!1);var Ht=this.__chain__,ur=!!this.__actions__.length,Pr=Oe&&!Ht,Xr=et&&!ur;if(!Oe&&St){qe=Xr?qe:new jr(this);var Ar=S.apply(qe,We);return Ar.__actions__.push({func:Mr,args:[At],thisArg:t}),new gr(Ar,Ht)}return Pr&&Xr?S.apply(this,We):(Ar=this.thru(At),Pr?K?Ar.value()[0]:Ar.value():Ar)})}),ir(["pop","push","shift","sort","splice","unshift"],function(S){var k=Br[S],U=/^(?:push|sort|unshift)$/.test(S)?"tap":"thru",K=/^(?:pop|shift)$/.test(S);_e.prototype[S]=function(){var oe=arguments;if(K&&!this.__chain__){var Oe=this.value();return k.apply(Lr(Oe)?Oe:[],oe)}return this[U](function(qe){return k.apply(Lr(qe)?qe:[],oe)})}}),Ho(jr.prototype,function(S,k){var U=_e[k];if(U){var K=U.name+"";Nr.call(As,K)||(As[K]=[]),As[K].push({name:k,func:U})}}),As[Mf(t,y).name]=[{name:"wrapper",func:t}],jr.prototype.clone=gf,jr.prototype.reverse=_l,jr.prototype.value=yf,_e.prototype.at=Wy,_e.prototype.chain=Ap,_e.prototype.commit=Rg,_e.prototype.next=Kh,_e.prototype.plant=Yy,_e.prototype.reverse=Rp,_e.prototype.toJSON=_e.prototype.valueOf=_e.prototype.value=cv,_e.prototype.first=_e.prototype.head,Cs&&(_e.prototype[Cs]=Hy),_e},dl=hl();to?((to.exports=dl)._=dl,cc._=dl):zn._=dl}).call(xq)}(hy,hy.exports)),hy.exports}var QO,QI;function Sq(){if(QI)return QO;QI=1,QO=r;function r(){var n={};n._next=n._prev=n,this._sentinel=n}r.prototype.dequeue=function(){var n=this._sentinel,i=n._prev;if(i!==n)return e(i),i},r.prototype.enqueue=function(n){var i=this._sentinel;n._prev&&n._next&&e(n),n._next=i._next,i._next._prev=n,i._next=n,n._prev=i},r.prototype.toString=function(){for(var n=[],i=this._sentinel,o=i._prev;o!==i;)n.push(JSON.stringify(o,t)),o=o._prev;return"["+n.join(", ")+"]"};function e(n){n._prev._next=n._next,n._next._prev=n._prev,delete n._next,delete n._prev}function t(n,i){if(n!=="_next"&&n!=="_prev")return i}return QO}var JO,JI;function Tq(){if(JI)return JO;JI=1;var r=Ci(),e=rl().Graph,t=Sq();JO=i;var n=r.constant(1);function i(l,c){if(l.nodeCount()<=1)return[];var f=s(l,c||n),h=o(f.graph,f.buckets,f.zeroIdx);return r.flatten(r.map(h,function(d){return l.outEdges(d.v,d.w)}),!0)}function o(l,c,f){for(var h=[],d=c[c.length-1],v=c[0],g;l.nodeCount();){for(;g=v.dequeue();)a(l,c,f,g);for(;g=d.dequeue();)a(l,c,f,g);if(l.nodeCount()){for(var _=c.length-2;_>0;--_)if(g=c[_].dequeue(),g){h=h.concat(a(l,c,f,g,!0));break}}}return h}function a(l,c,f,h,d){var v=d?[]:void 0;return r.forEach(l.inEdges(h.v),function(g){var _=l.edge(g),y=l.node(g.v);d&&v.push({v:g.v,w:g.w}),y.out-=_,u(c,f,y)}),r.forEach(l.outEdges(h.v),function(g){var _=l.edge(g),y=g.w,p=l.node(y);p.in-=_,u(c,f,p)}),l.removeNode(h.v),v}function s(l,c){var f=new e,h=0,d=0;r.forEach(l.nodes(),function(_){f.setNode(_,{v:_,in:0,out:0})}),r.forEach(l.edges(),function(_){var y=f.edge(_.v,_.w)||0,p=c(_),m=y+p;f.setEdge(_.v,_.w,m),d=Math.max(d,f.node(_.v).out+=p),h=Math.max(h,f.node(_.w).in+=p)});var v=r.range(d+h+3).map(function(){return new t}),g=h+1;return r.forEach(f.nodes(),function(_){u(v,g,f.node(_))}),{graph:f,buckets:v,zeroIdx:g}}function u(l,c,f){f.out?f.in?l[f.out-f.in+c].enqueue(f):l[l.length-1].enqueue(f):l[0].enqueue(f)}return JO}var ex,ek;function Cq(){if(ek)return ex;ek=1;var r=Ci(),e=Tq();ex={run:t,undo:i};function t(o){var a=o.graph().acyclicer==="greedy"?e(o,s(o)):n(o);r.forEach(a,function(u){var l=o.edge(u);o.removeEdge(u),l.forwardName=u.name,l.reversed=!0,o.setEdge(u.w,u.v,l,r.uniqueId("rev"))});function s(u){return function(l){return u.edge(l).weight}}}function n(o){var a=[],s={},u={};function l(c){r.has(u,c)||(u[c]=!0,s[c]=!0,r.forEach(o.outEdges(c),function(f){r.has(s,f.w)?a.push(f):l(f.w)}),delete s[c])}return r.forEach(o.nodes(),l),a}function i(o){r.forEach(o.edges(),function(a){var s=o.edge(a);if(s.reversed){o.removeEdge(a);var u=s.forwardName;delete s.reversed,delete s.forwardName,o.setEdge(a.w,a.v,s,u)}})}return ex}var tx,tk;function Vs(){if(tk)return tx;tk=1;var r=Ci(),e=rl().Graph;tx={addDummyNode:t,simplify:n,asNonCompoundGraph:i,successorWeights:o,predecessorWeights:a,intersectRect:s,buildLayerMatrix:u,normalizeRanks:l,removeEmptyRanks:c,addBorderNode:f,maxRank:h,partition:d,time:v,notime:g};function t(_,y,p,m){var E;do E=r.uniqueId(m);while(_.hasNode(E));return p.dummy=y,_.setNode(E,p),E}function n(_){var y=new e().setGraph(_.graph());return r.forEach(_.nodes(),function(p){y.setNode(p,_.node(p))}),r.forEach(_.edges(),function(p){var m=y.edge(p.v,p.w)||{weight:0,minlen:1},E=_.edge(p);y.setEdge(p.v,p.w,{weight:m.weight+E.weight,minlen:Math.max(m.minlen,E.minlen)})}),y}function i(_){var y=new e({multigraph:_.isMultigraph()}).setGraph(_.graph());return r.forEach(_.nodes(),function(p){_.children(p).length||y.setNode(p,_.node(p))}),r.forEach(_.edges(),function(p){y.setEdge(p,_.edge(p))}),y}function o(_){var y=r.map(_.nodes(),function(p){var m={};return r.forEach(_.outEdges(p),function(E){m[E.w]=(m[E.w]||0)+_.edge(E).weight}),m});return r.zipObject(_.nodes(),y)}function a(_){var y=r.map(_.nodes(),function(p){var m={};return r.forEach(_.inEdges(p),function(E){m[E.v]=(m[E.v]||0)+_.edge(E).weight}),m});return r.zipObject(_.nodes(),y)}function s(_,y){var p=_.x,m=_.y,E=y.x-p,C=y.y-m,P=_.width/2,T=_.height/2;if(!E&&!C)throw new Error("Not possible to find intersection inside of the rectangle");var R,D;return Math.abs(C)*P>Math.abs(E)*T?(C<0&&(T=-T),R=T*E/C,D=T):(E<0&&(P=-P),R=P,D=P*C/E),{x:p+R,y:m+D}}function u(_){var y=r.map(r.range(h(_)+1),function(){return[]});return r.forEach(_.nodes(),function(p){var m=_.node(p),E=m.rank;r.isUndefined(E)||(y[E][m.order]=p)}),y}function l(_){var y=r.min(r.map(_.nodes(),function(p){return _.node(p).rank}));r.forEach(_.nodes(),function(p){var m=_.node(p);r.has(m,"rank")&&(m.rank-=y)})}function c(_){var y=r.min(r.map(_.nodes(),function(C){return _.node(C).rank})),p=[];r.forEach(_.nodes(),function(C){var P=_.node(C).rank-y;p[P]||(p[P]=[]),p[P].push(C)});var m=0,E=_.graph().nodeRankFactor;r.forEach(p,function(C,P){r.isUndefined(C)&&P%E!==0?--m:m&&r.forEach(C,function(T){_.node(T).rank+=m})})}function f(_,y,p,m){var E={width:0,height:0};return arguments.length>=4&&(E.rank=p,E.order=m),t(_,"border",E,y)}function h(_){return r.max(r.map(_.nodes(),function(y){var p=_.node(y).rank;if(!r.isUndefined(p))return p}))}function d(_,y){var p={lhs:[],rhs:[]};return r.forEach(_,function(m){y(m)?p.lhs.push(m):p.rhs.push(m)}),p}function v(_,y){var p=r.now();try{return y()}finally{_+""+(r.now()-p)}}function g(_,y){return y()}return tx}var rx,rk;function Pq(){if(rk)return rx;rk=1;var r=Ci(),e=Vs();rx={run:t,undo:i};function t(o){o.graph().dummyChains=[],r.forEach(o.edges(),function(a){n(o,a)})}function n(o,a){var s=a.v,u=o.node(s).rank,l=a.w,c=o.node(l).rank,f=a.name,h=o.edge(a),d=h.labelRank;if(c!==u+1){o.removeEdge(a);var v,g,_;for(_=0,++u;u<c;++_,++u)h.points=[],g={width:0,height:0,edgeLabel:h,edgeObj:a,rank:u},v=e.addDummyNode(o,"edge",g,"_d"),u===d&&(g.width=h.width,g.height=h.height,g.dummy="edge-label",g.labelpos=h.labelpos),o.setEdge(s,v,{weight:h.weight},f),_===0&&o.graph().dummyChains.push(v),s=v;o.setEdge(s,l,{weight:h.weight},f)}}function i(o){r.forEach(o.graph().dummyChains,function(a){var s=o.node(a),u=s.edgeLabel,l;for(o.setEdge(s.edgeObj,u);s.dummy;)l=o.successors(a)[0],o.removeNode(a),u.points.push({x:s.x,y:s.y}),s.dummy==="edge-label"&&(u.x=s.x,u.y=s.y,u.width=s.width,u.height=s.height),a=l,s=o.node(a)})}return rx}var nx,nk;function d0(){if(nk)return nx;nk=1;var r=Ci();nx={longestPath:e,slack:t};function e(n){var i={};function o(a){var s=n.node(a);if(r.has(i,a))return s.rank;i[a]=!0;var u=r.min(r.map(n.outEdges(a),function(l){return o(l.w)-n.edge(l).minlen}));return(u===Number.POSITIVE_INFINITY||u===void 0||u===null)&&(u=0),s.rank=u}r.forEach(n.sources(),o)}function t(n,i){return n.node(i.w).rank-n.node(i.v).rank-n.edge(i).minlen}return nx}var ix,ik;function NL(){if(ik)return ix;ik=1;var r=Ci(),e=rl().Graph,t=d0().slack;ix=n;function n(s){var u=new e({directed:!1}),l=s.nodes()[0],c=s.nodeCount();u.setNode(l,{});for(var f,h;i(u,s)<c;)f=o(u,s),h=u.hasNode(f.v)?t(s,f):-t(s,f),a(u,s,h);return u}function i(s,u){function l(c){r.forEach(u.nodeEdges(c),function(f){var h=f.v,d=c===h?f.w:h;!s.hasNode(d)&&!t(u,f)&&(s.setNode(d,{}),s.setEdge(c,d,{}),l(d))})}return r.forEach(s.nodes(),l),s.nodeCount()}function o(s,u){return r.minBy(u.edges(),function(l){if(s.hasNode(l.v)!==s.hasNode(l.w))return t(u,l)})}function a(s,u,l){r.forEach(s.nodes(),function(c){u.node(c).rank+=l})}return ix}var ox,ok;function Aq(){if(ok)return ox;ok=1;var r=Ci(),e=NL(),t=d0().slack,n=d0().longestPath,i=rl().alg.preorder,o=rl().alg.postorder,a=Vs().simplify;ox=s,s.initLowLimValues=f,s.initCutValues=u,s.calcCutValue=c,s.leaveEdge=d,s.enterEdge=v,s.exchangeEdges=g;function s(m){m=a(m),n(m);var E=e(m);f(E),u(E,m);for(var C,P;C=d(E);)P=v(E,m,C),g(E,m,C,P)}function u(m,E){var C=o(m,m.nodes());C=C.slice(0,C.length-1),r.forEach(C,function(P){l(m,E,P)})}function l(m,E,C){var P=m.node(C),T=P.parent;m.edge(C,T).cutvalue=c(m,E,C)}function c(m,E,C){var P=m.node(C),T=P.parent,R=!0,D=E.edge(C,T),L=0;return D||(R=!1,D=E.edge(T,C)),L=D.weight,r.forEach(E.nodeEdges(C),function(j){var F=j.v===C,q=F?j.w:j.v;if(q!==T){var W=F===R,Z=E.edge(j).weight;if(L+=W?Z:-Z,y(m,C,q)){var Q=m.edge(C,q).cutvalue;L+=W?-Q:Q}}}),L}function f(m,E){arguments.length<2&&(E=m.nodes()[0]),h(m,{},1,E)}function h(m,E,C,P,T){var R=C,D=m.node(P);return E[P]=!0,r.forEach(m.neighbors(P),function(L){r.has(E,L)||(C=h(m,E,C,L,P))}),D.low=R,D.lim=C++,T?D.parent=T:delete D.parent,C}function d(m){return r.find(m.edges(),function(E){return m.edge(E).cutvalue<0})}function v(m,E,C){var P=C.v,T=C.w;E.hasEdge(P,T)||(P=C.w,T=C.v);var R=m.node(P),D=m.node(T),L=R,j=!1;R.lim>D.lim&&(L=D,j=!0);var F=r.filter(E.edges(),function(q){return j===p(m,m.node(q.v),L)&&j!==p(m,m.node(q.w),L)});return r.minBy(F,function(q){return t(E,q)})}function g(m,E,C,P){var T=C.v,R=C.w;m.removeEdge(T,R),m.setEdge(P.v,P.w,{}),f(m),u(m,E),_(m,E)}function _(m,E){var C=r.find(m.nodes(),function(T){return!E.node(T).parent}),P=i(m,C);P=P.slice(1),r.forEach(P,function(T){var R=m.node(T).parent,D=E.edge(T,R),L=!1;D||(D=E.edge(R,T),L=!0),E.node(T).rank=E.node(R).rank+(L?D.minlen:-D.minlen)})}function y(m,E,C){return m.hasEdge(E,C)}function p(m,E,C){return C.low<=E.lim&&E.lim<=C.lim}return ox}var ax,ak;function Rq(){if(ak)return ax;ak=1;var r=d0(),e=r.longestPath,t=NL(),n=Aq();ax=i;function i(u){switch(u.graph().ranker){case"network-simplex":s(u);break;case"tight-tree":a(u);break;case"longest-path":o(u);break;default:s(u)}}var o=e;function a(u){e(u),t(u)}function s(u){n(u)}return ax}var sx,sk;function Iq(){if(sk)return sx;sk=1;var r=Ci();sx=e;function e(i){var o=n(i);r.forEach(i.graph().dummyChains,function(a){for(var s=i.node(a),u=s.edgeObj,l=t(i,o,u.v,u.w),c=l.path,f=l.lca,h=0,d=c[h],v=!0;a!==u.w;){if(s=i.node(a),v){for(;(d=c[h])!==f&&i.node(d).maxRank<s.rank;)h++;d===f&&(v=!1)}if(!v){for(;h<c.length-1&&i.node(d=c[h+1]).minRank<=s.rank;)h++;d=c[h]}i.setParent(a,d),a=i.successors(a)[0]}})}function t(i,o,a,s){var u=[],l=[],c=Math.min(o[a].low,o[s].low),f=Math.max(o[a].lim,o[s].lim),h,d;h=a;do h=i.parent(h),u.push(h);while(h&&(o[h].low>c||f>o[h].lim));for(d=h,h=s;(h=i.parent(h))!==d;)l.push(h);return{path:u.concat(l.reverse()),lca:d}}function n(i){var o={},a=0;function s(u){var l=a;r.forEach(i.children(u),s),o[u]={low:l,lim:a++}}return r.forEach(i.children(),s),o}return sx}var ux,uk;function kq(){if(uk)return ux;uk=1;var r=Ci(),e=Vs();ux={run:t,cleanup:a};function t(s){var u=e.addDummyNode(s,"root",{},"_root"),l=i(s),c=r.max(r.values(l))-1,f=2*c+1;s.graph().nestingRoot=u,r.forEach(s.edges(),function(d){s.edge(d).minlen*=f});var h=o(s)+1;r.forEach(s.children(),function(d){n(s,u,f,h,c,l,d)}),s.graph().nodeRankFactor=f}function n(s,u,l,c,f,h,d){var v=s.children(d);if(!v.length){d!==u&&s.setEdge(u,d,{weight:0,minlen:l});return}var g=e.addBorderNode(s,"_bt"),_=e.addBorderNode(s,"_bb"),y=s.node(d);s.setParent(g,d),y.borderTop=g,s.setParent(_,d),y.borderBottom=_,r.forEach(v,function(p){n(s,u,l,c,f,h,p);var m=s.node(p),E=m.borderTop?m.borderTop:p,C=m.borderBottom?m.borderBottom:p,P=m.borderTop?c:2*c,T=E!==C?1:f-h[d]+1;s.setEdge(g,E,{weight:P,minlen:T,nestingEdge:!0}),s.setEdge(C,_,{weight:P,minlen:T,nestingEdge:!0})}),s.parent(d)||s.setEdge(u,g,{weight:0,minlen:f+h[d]})}function i(s){var u={};function l(c,f){var h=s.children(c);h&&h.length&&r.forEach(h,function(d){l(d,f+1)}),u[c]=f}return r.forEach(s.children(),function(c){l(c,1)}),u}function o(s){return r.reduce(s.edges(),function(u,l){return u+s.edge(l).weight},0)}function a(s){var u=s.graph();s.removeNode(u.nestingRoot),delete u.nestingRoot,r.forEach(s.edges(),function(l){var c=s.edge(l);c.nestingEdge&&s.removeEdge(l)})}return ux}var lx,lk;function Dq(){if(lk)return lx;lk=1;var r=Ci(),e=Vs();lx=t;function t(i){function o(a){var s=i.children(a),u=i.node(a);if(s.length&&r.forEach(s,o),r.has(u,"minRank")){u.borderLeft=[],u.borderRight=[];for(var l=u.minRank,c=u.maxRank+1;l<c;++l)n(i,"borderLeft","_bl",a,u,l),n(i,"borderRight","_br",a,u,l)}}r.forEach(i.children(),o)}function n(i,o,a,s,u,l){var c={width:0,height:0,rank:l,borderType:o},f=u[o][l-1],h=e.addDummyNode(i,"border",c,a);u[o][l]=h,i.setParent(h,s),f&&i.setEdge(f,h,{weight:1})}return lx}var cx,ck;function Mq(){if(ck)return cx;ck=1;var r=Ci();cx={adjust:e,undo:t};function e(l){var c=l.graph().rankdir.toLowerCase();(c==="lr"||c==="rl")&&n(l)}function t(l){var c=l.graph().rankdir.toLowerCase();(c==="bt"||c==="rl")&&o(l),(c==="lr"||c==="rl")&&(s(l),n(l))}function n(l){r.forEach(l.nodes(),function(c){i(l.node(c))}),r.forEach(l.edges(),function(c){i(l.edge(c))})}function i(l){var c=l.width;l.width=l.height,l.height=c}function o(l){r.forEach(l.nodes(),function(c){a(l.node(c))}),r.forEach(l.edges(),function(c){var f=l.edge(c);r.forEach(f.points,a),r.has(f,"y")&&a(f)})}function a(l){l.y=-l.y}function s(l){r.forEach(l.nodes(),function(c){u(l.node(c))}),r.forEach(l.edges(),function(c){var f=l.edge(c);r.forEach(f.points,u),r.has(f,"x")&&u(f)})}function u(l){var c=l.x;l.x=l.y,l.y=c}return cx}var fx,fk;function Lq(){if(fk)return fx;fk=1;var r=Ci();fx=e;function e(t){var n={},i=r.filter(t.nodes(),function(l){return!t.children(l).length}),o=r.max(r.map(i,function(l){return t.node(l).rank})),a=r.map(r.range(o+1),function(){return[]});function s(l){if(!r.has(n,l)){n[l]=!0;var c=t.node(l);a[c.rank].push(l),r.forEach(t.successors(l),s)}}var u=r.sortBy(i,function(l){return t.node(l).rank});return r.forEach(u,s),a}return fx}var hx,hk;function Nq(){if(hk)return hx;hk=1;var r=Ci();hx=e;function e(n,i){for(var o=0,a=1;a<i.length;++a)o+=t(n,i[a-1],i[a]);return o}function t(n,i,o){for(var a=r.zipObject(o,r.map(o,function(h,d){return d})),s=r.flatten(r.map(i,function(h){return r.sortBy(r.map(n.outEdges(h),function(d){return{pos:a[d.w],weight:n.edge(d).weight}}),"pos")}),!0),u=1;u<o.length;)u<<=1;var l=2*u-1;u-=1;var c=r.map(new Array(l),function(){return 0}),f=0;return r.forEach(s.forEach(function(h){var d=h.pos+u;c[d]+=h.weight;for(var v=0;d>0;)d%2&&(v+=c[d+1]),d=d-1>>1,c[d]+=h.weight;f+=h.weight*v})),f}return hx}var dx,dk;function jq(){if(dk)return dx;dk=1;var r=Ci();dx=e;function e(t,n){return r.map(n,function(i){var o=t.inEdges(i);if(o.length){var a=r.reduce(o,function(s,u){var l=t.edge(u),c=t.node(u.v);return{sum:s.sum+l.weight*c.order,weight:s.weight+l.weight}},{sum:0,weight:0});return{v:i,barycenter:a.sum/a.weight,weight:a.weight}}else return{v:i}})}return dx}var vx,vk;function Fq(){if(vk)return vx;vk=1;var r=Ci();vx=e;function e(i,o){var a={};r.forEach(i,function(u,l){var c=a[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:l};r.isUndefined(u.barycenter)||(c.barycenter=u.barycenter,c.weight=u.weight)}),r.forEach(o.edges(),function(u){var l=a[u.v],c=a[u.w];!r.isUndefined(l)&&!r.isUndefined(c)&&(c.indegree++,l.out.push(a[u.w]))});var s=r.filter(a,function(u){return!u.indegree});return t(s)}function t(i){var o=[];function a(l){return function(c){c.merged||(r.isUndefined(c.barycenter)||r.isUndefined(l.barycenter)||c.barycenter>=l.barycenter)&&n(l,c)}}function s(l){return function(c){c.in.push(l),--c.indegree===0&&i.push(c)}}for(;i.length;){var u=i.pop();o.push(u),r.forEach(u.in.reverse(),a(u)),r.forEach(u.out,s(u))}return r.map(r.filter(o,function(l){return!l.merged}),function(l){return r.pick(l,["vs","i","barycenter","weight"])})}function n(i,o){var a=0,s=0;i.weight&&(a+=i.barycenter*i.weight,s+=i.weight),o.weight&&(a+=o.barycenter*o.weight,s+=o.weight),i.vs=o.vs.concat(i.vs),i.barycenter=a/s,i.weight=s,i.i=Math.min(o.i,i.i),o.merged=!0}return vx}var px,pk;function Bq(){if(pk)return px;pk=1;var r=Ci(),e=Vs();px=t;function t(o,a){var s=e.partition(o,function(g){return r.has(g,"barycenter")}),u=s.lhs,l=r.sortBy(s.rhs,function(g){return-g.i}),c=[],f=0,h=0,d=0;u.sort(i(!!a)),d=n(c,l,d),r.forEach(u,function(g){d+=g.vs.length,c.push(g.vs),f+=g.barycenter*g.weight,h+=g.weight,d=n(c,l,d)});var v={vs:r.flatten(c,!0)};return h&&(v.barycenter=f/h,v.weight=h),v}function n(o,a,s){for(var u;a.length&&(u=r.last(a)).i<=s;)a.pop(),o.push(u.vs),s++;return s}function i(o){return function(a,s){return a.barycenter<s.barycenter?-1:a.barycenter>s.barycenter?1:o?s.i-a.i:a.i-s.i}}return px}var gx,gk;function Uq(){if(gk)return gx;gk=1;var r=Ci(),e=jq(),t=Fq(),n=Bq();gx=i;function i(s,u,l,c){var f=s.children(u),h=s.node(u),d=h?h.borderLeft:void 0,v=h?h.borderRight:void 0,g={};d&&(f=r.filter(f,function(C){return C!==d&&C!==v}));var _=e(s,f);r.forEach(_,function(C){if(s.children(C.v).length){var P=i(s,C.v,l,c);g[C.v]=P,r.has(P,"barycenter")&&a(C,P)}});var y=t(_,l);o(y,g);var p=n(y,c);if(d&&(p.vs=r.flatten([d,p.vs,v],!0),s.predecessors(d).length)){var m=s.node(s.predecessors(d)[0]),E=s.node(s.predecessors(v)[0]);r.has(p,"barycenter")||(p.barycenter=0,p.weight=0),p.barycenter=(p.barycenter*p.weight+m.order+E.order)/(p.weight+2),p.weight+=2}return p}function o(s,u){r.forEach(s,function(l){l.vs=r.flatten(l.vs.map(function(c){return u[c]?u[c].vs:c}),!0)})}function a(s,u){r.isUndefined(s.barycenter)?(s.barycenter=u.barycenter,s.weight=u.weight):(s.barycenter=(s.barycenter*s.weight+u.barycenter*u.weight)/(s.weight+u.weight),s.weight+=u.weight)}return gx}var yx,yk;function qq(){if(yk)return yx;yk=1;var r=Ci(),e=rl().Graph;yx=t;function t(i,o,a){var s=n(i),u=new e({compound:!0}).setGraph({root:s}).setDefaultNodeLabel(function(l){return i.node(l)});return r.forEach(i.nodes(),function(l){var c=i.node(l),f=i.parent(l);(c.rank===o||c.minRank<=o&&o<=c.maxRank)&&(u.setNode(l),u.setParent(l,f||s),r.forEach(i[a](l),function(h){var d=h.v===l?h.w:h.v,v=u.edge(d,l),g=r.isUndefined(v)?0:v.weight;u.setEdge(d,l,{weight:i.edge(h).weight+g})}),r.has(c,"minRank")&&u.setNode(l,{borderLeft:c.borderLeft[o],borderRight:c.borderRight[o]}))}),u}function n(i){for(var o;i.hasNode(o=r.uniqueId("_root")););return o}return yx}var mx,mk;function zq(){if(mk)return mx;mk=1;var r=Ci();mx=e;function e(t,n,i){var o={},a;r.forEach(i,function(s){for(var u=t.parent(s),l,c;u;){if(l=t.parent(u),l?(c=o[l],o[l]=u):(c=a,a=u),c&&c!==u){n.setEdge(c,u);return}u=l}})}return mx}var bx,bk;function Gq(){if(bk)return bx;bk=1;var r=Ci(),e=Lq(),t=Nq(),n=Uq(),i=qq(),o=zq(),a=rl().Graph,s=Vs();bx=u;function u(h){var d=s.maxRank(h),v=l(h,r.range(1,d+1),"inEdges"),g=l(h,r.range(d-1,-1,-1),"outEdges"),_=e(h);f(h,_);for(var y=Number.POSITIVE_INFINITY,p,m=0,E=0;E<4;++m,++E){c(m%2?v:g,m%4>=2),_=s.buildLayerMatrix(h);var C=t(h,_);C<y&&(E=0,p=r.cloneDeep(_),y=C)}f(h,p)}function l(h,d,v){return r.map(d,function(g){return i(h,g,v)})}function c(h,d){var v=new a;r.forEach(h,function(g){var _=g.graph().root,y=n(g,_,v,d);r.forEach(y.vs,function(p,m){g.node(p).order=m}),o(g,v,y.vs)})}function f(h,d){r.forEach(d,function(v){r.forEach(v,function(g,_){h.node(g).order=_})})}return bx}var _x,_k;function Vq(){if(_k)return _x;_k=1;var r=Ci(),e=rl().Graph,t=Vs();_x={positionX:v,findType1Conflicts:n,findType2Conflicts:i,addConflict:a,hasConflict:s,verticalAlignment:u,horizontalCompaction:l,alignCoordinates:h,findSmallestWidthAlignment:f,balance:d};function n(y,p){var m={};function E(C,P){var T=0,R=0,D=C.length,L=r.last(P);return r.forEach(P,function(j,F){var q=o(y,j),W=q?y.node(q).order:D;(q||j===L)&&(r.forEach(P.slice(R,F+1),function(Z){r.forEach(y.predecessors(Z),function(Q){var re=y.node(Q),ee=re.order;(ee<T||W<ee)&&!(re.dummy&&y.node(Z).dummy)&&a(m,Q,Z)})}),R=F+1,T=W)}),P}return r.reduce(p,E),m}function i(y,p){var m={};if(y.nodeCount()>1e3)return m;function E(P,T,R,D,L){var j;r.forEach(r.range(T,R),function(F){j=P[F],y.node(j).dummy&&r.forEach(y.predecessors(j),function(q){var W=y.node(q);W.dummy&&(W.order<D||W.order>L)&&a(m,q,j)})})}function C(P,T){var R=-1,D,L=0;return r.forEach(T,function(j,F){if(y.node(j).dummy==="border"){var q=y.predecessors(j);q.length&&(D=y.node(q[0]).order,E(T,L,F,R,D),L=F,R=D)}E(T,L,T.length,D,P.length)}),T}return r.reduce(p,C),m}function o(y,p){if(y.node(p).dummy)return r.find(y.predecessors(p),function(m){return y.node(m).dummy})}function a(y,p,m){if(p>m){var E=p;p=m,m=E}var C=y[p];C||(y[p]=C={}),C[m]=!0}function s(y,p,m){if(p>m){var E=p;p=m,m=E}return r.has(y[p],m)}function u(y,p,m,E){var C={},P={},T={};return r.forEach(p,function(R){r.forEach(R,function(D,L){C[D]=D,P[D]=D,T[D]=L})}),r.forEach(p,function(R){var D=-1;r.forEach(R,function(L){var j=E(L);if(j.length){j=r.sortBy(j,function(Q){return T[Q]});for(var F=(j.length-1)/2,q=Math.floor(F),W=Math.ceil(F);q<=W;++q){var Z=j[q];P[L]===L&&D<T[Z]&&!s(m,L,Z)&&(P[Z]=L,P[L]=C[L]=C[Z],D=T[Z])}}})}),{root:C,align:P}}function l(y,p,m,E,C){var P={},T=c(y,p,m,C),R=C?"borderLeft":"borderRight";function D(F,q){for(var W=T.nodes(),Z=W.pop(),Q={};Z;)Q[Z]?F(Z):(Q[Z]=!0,W.push(Z),W=W.concat(q(Z))),Z=W.pop()}function L(F){P[F]=T.inEdges(F).reduce(function(q,W){return Math.max(q,P[W.v]+T.edge(W))},0)}function j(F){var q=T.outEdges(F).reduce(function(Z,Q){return Math.min(Z,P[Q.w]-T.edge(Q))},Number.POSITIVE_INFINITY),W=y.node(F);q!==Number.POSITIVE_INFINITY&&W.borderType!==R&&(P[F]=Math.max(P[F],q))}return D(L,T.predecessors.bind(T)),D(j,T.successors.bind(T)),r.forEach(E,function(F){P[F]=P[m[F]]}),P}function c(y,p,m,E){var C=new e,P=y.graph(),T=g(P.nodesep,P.edgesep,E);return r.forEach(p,function(R){var D;r.forEach(R,function(L){var j=m[L];if(C.setNode(j),D){var F=m[D],q=C.edge(F,j);C.setEdge(F,j,Math.max(T(y,L,D),q||0))}D=L})}),C}function f(y,p){return r.minBy(r.values(p),function(m){var E=Number.NEGATIVE_INFINITY,C=Number.POSITIVE_INFINITY;return r.forIn(m,function(P,T){var R=_(y,T)/2;E=Math.max(P+R,E),C=Math.min(P-R,C)}),E-C})}function h(y,p){var m=r.values(p),E=r.min(m),C=r.max(m);r.forEach(["u","d"],function(P){r.forEach(["l","r"],function(T){var R=P+T,D=y[R],L;if(D!==p){var j=r.values(D);L=T==="l"?E-r.min(j):C-r.max(j),L&&(y[R]=r.mapValues(D,function(F){return F+L}))}})})}function d(y,p){return r.mapValues(y.ul,function(m,E){if(p)return y[p.toLowerCase()][E];var C=r.sortBy(r.map(y,E));return(C[1]+C[2])/2})}function v(y){var p=t.buildLayerMatrix(y),m=r.merge(n(y,p),i(y,p)),E={},C;r.forEach(["u","d"],function(T){C=T==="u"?p:r.values(p).reverse(),r.forEach(["l","r"],function(R){R==="r"&&(C=r.map(C,function(F){return r.values(F).reverse()}));var D=(T==="u"?y.predecessors:y.successors).bind(y),L=u(y,C,m,D),j=l(y,C,L.root,L.align,R==="r");R==="r"&&(j=r.mapValues(j,function(F){return-F})),E[T+R]=j})});var P=f(y,E);return h(E,P),d(E,y.graph().align)}function g(y,p,m){return function(E,C,P){var T=E.node(C),R=E.node(P),D=0,L;if(D+=T.width/2,r.has(T,"labelpos"))switch(T.labelpos.toLowerCase()){case"l":L=-T.width/2;break;case"r":L=T.width/2;break}if(L&&(D+=m?L:-L),L=0,D+=(T.dummy?p:y)/2,D+=(R.dummy?p:y)/2,D+=R.width/2,r.has(R,"labelpos"))switch(R.labelpos.toLowerCase()){case"l":L=R.width/2;break;case"r":L=-R.width/2;break}return L&&(D+=m?L:-L),L=0,D}}function _(y,p){return y.node(p).width}return _x}var wx,wk;function Wq(){if(wk)return wx;wk=1;var r=Ci(),e=Vs(),t=Vq().positionX;wx=n;function n(o){o=e.asNonCompoundGraph(o),i(o),r.forEach(t(o),function(a,s){o.node(s).x=a})}function i(o){var a=e.buildLayerMatrix(o),s=o.graph().ranksep,u=0;r.forEach(a,function(l){var c=r.max(r.map(l,function(f){return o.node(f).height}));r.forEach(l,function(f){o.node(f).y=u+c/2}),u+=c+s})}return wx}var Ex,Ek;function Hq(){if(Ek)return Ex;Ek=1;var r=Ci(),e=Cq(),t=Pq(),n=Rq(),i=Vs().normalizeRanks,o=Iq(),a=Vs().removeEmptyRanks,s=kq(),u=Dq(),l=Mq(),c=Gq(),f=Wq(),h=Vs(),d=rl().Graph;Ex=v;function v(fe,ce){var Ee=ce&&ce.debugTiming?h.time:h.notime,Ce=Ee("layout",function(){return Ce=Ee("  buildLayoutGraph",function(){return D(fe)}),Ee("  runLayout",function(){g(Ce,Ee)}),Ee("  updateInputGraph",function(){_(fe,Ce)}),Ce});return Ce}function g(fe,ce){ce("    makeSpaceForEdgeLabels",function(){L(fe)}),ce("    removeSelfEdges",function(){ue(fe)}),ce("    acyclic",function(){e.run(fe)}),ce("    nestingGraph.run",function(){s.run(fe)}),ce("    rank",function(){n(h.asNonCompoundGraph(fe))}),ce("    injectEdgeLabelProxies",function(){j(fe)}),ce("    removeEmptyRanks",function(){a(fe)}),ce("    nestingGraph.cleanup",function(){s.cleanup(fe)}),ce("    normalizeRanks",function(){i(fe)}),ce("    assignRankMinMax",function(){F(fe)}),ce("    removeEdgeLabelProxies",function(){q(fe)}),ce("    normalize.run",function(){t.run(fe)}),ce("    parentDummyChains",function(){o(fe)}),ce("    addBorderSegments",function(){u(fe)}),ce("    order",function(){c(fe)}),ce("    insertSelfEdges",function(){de(fe)}),ce("    adjustCoordinateSystem",function(){l.adjust(fe)}),ce("    position",function(){f(fe)}),ce("    positionSelfEdges",function(){se(fe)}),ce("    removeBorderNodes",function(){ee(fe)}),ce("    normalize.undo",function(){t.undo(fe)}),ce("    fixupEdgeLabelCoords",function(){Q(fe)}),ce("    undoCoordinateSystem",function(){l.undo(fe)}),ce("    translateGraph",function(){W(fe)}),ce("    assignNodeIntersects",function(){Z(fe)}),ce("    reversePoints",function(){re(fe)}),ce("    acyclic.undo",function(){e.undo(fe)})}function _(fe,ce){r.forEach(fe.nodes(),function(Ee){var Ce=fe.node(Ee),ke=ce.node(Ee);Ce&&(Ce.x=ke.x,Ce.y=ke.y,ce.children(Ee).length&&(Ce.width=ke.width,Ce.height=ke.height))}),r.forEach(fe.edges(),function(Ee){var Ce=fe.edge(Ee),ke=ce.edge(Ee);Ce.points=ke.points,r.has(ke,"x")&&(Ce.x=ke.x,Ce.y=ke.y)}),fe.graph().width=ce.graph().width,fe.graph().height=ce.graph().height}var y=["nodesep","edgesep","ranksep","marginx","marginy"],p={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},m=["acyclicer","ranker","rankdir","align"],E=["width","height"],C={width:0,height:0},P=["minlen","weight","width","height","labeloffset"],T={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},R=["labelpos"];function D(fe){var ce=new d({multigraph:!0,compound:!0}),Ee=Le(fe.graph());return ce.setGraph(r.merge({},p,be(Ee,y),r.pick(Ee,m))),r.forEach(fe.nodes(),function(Ce){var ke=Le(fe.node(Ce));ce.setNode(Ce,r.defaults(be(ke,E),C)),ce.setParent(Ce,fe.parent(Ce))}),r.forEach(fe.edges(),function(Ce){var ke=Le(fe.edge(Ce));ce.setEdge(Ce,r.merge({},T,be(ke,P),r.pick(ke,R)))}),ce}function L(fe){var ce=fe.graph();ce.ranksep/=2,r.forEach(fe.edges(),function(Ee){var Ce=fe.edge(Ee);Ce.minlen*=2,Ce.labelpos.toLowerCase()!=="c"&&(ce.rankdir==="TB"||ce.rankdir==="BT"?Ce.width+=Ce.labeloffset:Ce.height+=Ce.labeloffset)})}function j(fe){r.forEach(fe.edges(),function(ce){var Ee=fe.edge(ce);if(Ee.width&&Ee.height){var Ce=fe.node(ce.v),ke=fe.node(ce.w),Ie={rank:(ke.rank-Ce.rank)/2+Ce.rank,e:ce};h.addDummyNode(fe,"edge-proxy",Ie,"_ep")}})}function F(fe){var ce=0;r.forEach(fe.nodes(),function(Ee){var Ce=fe.node(Ee);Ce.borderTop&&(Ce.minRank=fe.node(Ce.borderTop).rank,Ce.maxRank=fe.node(Ce.borderBottom).rank,ce=r.max(ce,Ce.maxRank))}),fe.graph().maxRank=ce}function q(fe){r.forEach(fe.nodes(),function(ce){var Ee=fe.node(ce);Ee.dummy==="edge-proxy"&&(fe.edge(Ee.e).labelRank=Ee.rank,fe.removeNode(ce))})}function W(fe){var ce=Number.POSITIVE_INFINITY,Ee=0,Ce=Number.POSITIVE_INFINITY,ke=0,Ie=fe.graph(),ve=Ie.marginx||0,we=Ie.marginy||0;function xe(Fe){var He=Fe.x,at=Fe.y,wt=Fe.width,it=Fe.height;ce=Math.min(ce,He-wt/2),Ee=Math.max(Ee,He+wt/2),Ce=Math.min(Ce,at-it/2),ke=Math.max(ke,at+it/2)}r.forEach(fe.nodes(),function(Fe){xe(fe.node(Fe))}),r.forEach(fe.edges(),function(Fe){var He=fe.edge(Fe);r.has(He,"x")&&xe(He)}),ce-=ve,Ce-=we,r.forEach(fe.nodes(),function(Fe){var He=fe.node(Fe);He.x-=ce,He.y-=Ce}),r.forEach(fe.edges(),function(Fe){var He=fe.edge(Fe);r.forEach(He.points,function(at){at.x-=ce,at.y-=Ce}),r.has(He,"x")&&(He.x-=ce),r.has(He,"y")&&(He.y-=Ce)}),Ie.width=Ee-ce+ve,Ie.height=ke-Ce+we}function Z(fe){r.forEach(fe.edges(),function(ce){var Ee=fe.edge(ce),Ce=fe.node(ce.v),ke=fe.node(ce.w),Ie,ve;Ee.points?(Ie=Ee.points[0],ve=Ee.points[Ee.points.length-1]):(Ee.points=[],Ie=ke,ve=Ce),Ee.points.unshift(h.intersectRect(Ce,Ie)),Ee.points.push(h.intersectRect(ke,ve))})}function Q(fe){r.forEach(fe.edges(),function(ce){var Ee=fe.edge(ce);if(r.has(Ee,"x"))switch((Ee.labelpos==="l"||Ee.labelpos==="r")&&(Ee.width-=Ee.labeloffset),Ee.labelpos){case"l":Ee.x-=Ee.width/2+Ee.labeloffset;break;case"r":Ee.x+=Ee.width/2+Ee.labeloffset;break}})}function re(fe){r.forEach(fe.edges(),function(ce){var Ee=fe.edge(ce);Ee.reversed&&Ee.points.reverse()})}function ee(fe){r.forEach(fe.nodes(),function(ce){if(fe.children(ce).length){var Ee=fe.node(ce),Ce=fe.node(Ee.borderTop),ke=fe.node(Ee.borderBottom),Ie=fe.node(r.last(Ee.borderLeft)),ve=fe.node(r.last(Ee.borderRight));Ee.width=Math.abs(ve.x-Ie.x),Ee.height=Math.abs(ke.y-Ce.y),Ee.x=Ie.x+Ee.width/2,Ee.y=Ce.y+Ee.height/2}}),r.forEach(fe.nodes(),function(ce){fe.node(ce).dummy==="border"&&fe.removeNode(ce)})}function ue(fe){r.forEach(fe.edges(),function(ce){if(ce.v===ce.w){var Ee=fe.node(ce.v);Ee.selfEdges||(Ee.selfEdges=[]),Ee.selfEdges.push({e:ce,label:fe.edge(ce)}),fe.removeEdge(ce)}})}function de(fe){var ce=h.buildLayerMatrix(fe);r.forEach(ce,function(Ee){var Ce=0;r.forEach(Ee,function(ke,Ie){var ve=fe.node(ke);ve.order=Ie+Ce,r.forEach(ve.selfEdges,function(we){h.addDummyNode(fe,"selfedge",{width:we.label.width,height:we.label.height,rank:ve.rank,order:Ie+ ++Ce,e:we.e,label:we.label},"_se")}),delete ve.selfEdges})})}function se(fe){r.forEach(fe.nodes(),function(ce){var Ee=fe.node(ce);if(Ee.dummy==="selfedge"){var Ce=fe.node(Ee.e.v),ke=Ce.x+Ce.width/2,Ie=Ce.y,ve=Ee.x-ke,we=Ce.height/2;fe.setEdge(Ee.e,Ee.label),fe.removeNode(ce),Ee.label.points=[{x:ke+2*ve/3,y:Ie-we},{x:ke+5*ve/6,y:Ie-we},{x:ke+ve,y:Ie},{x:ke+5*ve/6,y:Ie+we},{x:ke+2*ve/3,y:Ie+we}],Ee.label.x=Ee.x,Ee.label.y=Ee.y}})}function be(fe,ce){return r.mapValues(r.pick(fe,ce),Number)}function Le(fe){var ce={};return r.forEach(fe,function(Ee,Ce){ce[Ce.toLowerCase()]=Ee}),ce}return Ex}var Ox,Ok;function Yq(){if(Ok)return Ox;Ok=1;var r=Ci(),e=Vs(),t=rl().Graph;Ox={debugOrdering:n};function n(i){var o=e.buildLayerMatrix(i),a=new t({compound:!0,multigraph:!0}).setGraph({});return r.forEach(i.nodes(),function(s){a.setNode(s,{label:s}),a.setParent(s,"layer"+i.node(s).rank)}),r.forEach(i.edges(),function(s){a.setEdge(s.v,s.w,{},s.name)}),r.forEach(o,function(s,u){var l="layer"+u;a.setNode(l,{rank:"same"}),r.reduce(s,function(c,f){return a.setEdge(c,f,{style:"invis"}),f})}),a}return Ox}var xx,xk;function Xq(){return xk||(xk=1,xx="0.8.14"),xx}var Sx,Sk;function $q(){return Sk||(Sk=1,Sx={graphlib:rl(),layout:Hq(),debug:Yq(),util:{time:Vs().time,notime:Vs().notime},version:Xq()}),Sx}var Kq=$q();const jL=y0(Kq);var Tx,Tk;function Zq(){if(Tk)return Tx;Tk=1;var r=function(){};return r.prototype={fit:function(e){var t,n,i,o=e.length,a,s=o>0?e[0].width:0,u=o>0?e[0].height:0;for(this.root={x:0,y:0,width:s,height:u},t=0;t<o;t++)i=e[t],(n=this.findNode(this.root,i.width,i.height))?(a=this.splitNode(n,i.width,i.height),i.x=a.x,i.y=a.y):(a=this.growNode(i.width,i.height),i.x=a.x,i.y=a.y)},findNode:function(e,t,n){return e.used?this.findNode(e.right,t,n)||this.findNode(e.down,t,n):t<=e.width&&n<=e.height?e:null},splitNode:function(e,t,n){return e.used=!0,e.down={x:e.x,y:e.y+n,width:e.width,height:e.height-n},e.right={x:e.x+t,y:e.y,width:e.width-t,height:n},e},growNode:function(e,t){var n=e<=this.root.width,i=t<=this.root.height,o=i&&this.root.height>=this.root.width+e,a=n&&this.root.width>=this.root.height+t;return o?this.growRight(e,t):a?this.growDown(e,t):i?this.growRight(e,t):n?this.growDown(e,t):null},growRight:function(e,t){this.root={used:!0,x:0,y:0,width:this.root.width+e,height:this.root.height,down:this.root,right:{x:this.root.width,y:0,width:e,height:this.root.height}};var n;return(n=this.findNode(this.root,e,t))?this.splitNode(n,e,t):null},growDown:function(e,t){this.root={used:!0,x:0,y:0,width:this.root.width,height:this.root.height+t,down:{x:0,y:this.root.height,width:this.root.width,height:t},right:this.root};var n;return(n=this.findNode(this.root,e,t))?this.splitNode(n,e,t):null}},Tx=r,Tx}var Cx,Ck;function Qq(){if(Ck)return Cx;Ck=1;var r=Zq();return Cx=function(e,t){t=t||{};var n=new r,i=t.inPlace||!1,o=e.map(function(l){return i?l:{width:l.width,height:l.height,item:l}});o=o.sort(function(l,c){return c.width*c.height-l.width*l.height}),n.fit(o);var a=o.reduce(function(l,c){return Math.max(l,c.x+c.width)},0),s=o.reduce(function(l,c){return Math.max(l,c.y+c.height)},0),u={width:a,height:s};return i||(u.items=o),u},Cx}var Jq=Qq();const ez=y0(Jq);var tz=rl();const rz=y0(tz),nz="tight-tree",Qf=100,FL="up",aT="down",iz="left",BL="right",oz={[FL]:"BT",[aT]:"TB",[iz]:"RL",[BL]:"LR"},az="bin",sz=25,uz=1/.38,lz=r=>r===FL||r===aT,cz=r=>r===aT||r===BL,Px=r=>{let e=null,t=null,n=null,i=null,o=null,a=null,s=null,u=null;for(const l of r.nodes()){const c=r.node(l);(o===null||c.x<o)&&(o=c.x),(a===null||c.y<a)&&(a=c.y),(s===null||c.x>s)&&(s=c.x),(u===null||c.y>u)&&(u=c.y);const f=Math.ceil(c.width/2);(e===null||c.x-f<e)&&(e=c.x-f),(t===null||c.y-f<t)&&(t=c.y-f),(n===null||c.x+f>n)&&(n=c.x+f),(i===null||c.y+f>i)&&(i=c.y+f)}return{minX:e,minY:t,maxX:n,maxY:i,minCenterX:o,minCenterY:a,maxCenterX:s,maxCenterY:u,width:n-e,height:i-t,xOffset:o-e,yOffset:a-t}},UL=r=>{const e=new jL.graphlib.Graph;return e.setGraph({}),e.setDefaultEdgeLabel(()=>({})),e.graph().nodesep=75*r,e.graph().ranksep=75*r,e},Pk=(r,e,t)=>{const{rank:n}=t.node(r);let i=null,o=null;for(const a of e){const{rank:s}=t.node(a);if(!(a===r||s>=n))if(s===n-1){i=s,o=a;break}else(i===null&&o===null||s>i)&&(i=s,o=a)}return o},fz=(r,e)=>{let t=Pk(r,e.predecessors(r),e);return t===null&&(t=Pk(r,e.successors(r),e)),t},hz=(r,e)=>{const t=[],n=rz.alg.components(r);if(n.length>1)for(const i of n){const o=UL(e);for(const a of i){const s=r.node(a);o.setNode(a,{width:s.width,height:s.height});const u=r.outEdges(a);if(u)for(const l of u)o.setEdge(l.v,l.w)}t.push(o)}else t.push(r);return t},Ak=(r,e,t)=>{r.graph().ranker=nz,r.graph().rankdir=oz[e];const n=jL.layout(r);for(const i of n.nodes()){const o=fz(i,n);o!==null&&(t[i]=o)}},Ax=(r,e)=>Math.sqrt((r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y)),dz=r=>{const e=[r[0]];let t={p1:r[0],p2:r[1]},n=Ax(t.p1,t.p2);for(let i=2;i<r.length;i++){let o={p1:r[i-1],p2:r[i]},a=Ax(o.p1,o.p2);const s={p1:t.p1,p2:o.p2},u=Ax(s.p1,s.p2);a+n-u<.1&&(e.pop(),o=s,a=u),e.push(o.p1),t=o,n=a}return e.push(r[r.length-1]),e},vz=(r,e,t,n,i,o,a=1)=>{const s=UL(a),u={},l={x:0,y:0},c=r.length;for(const m of r){const E=t[m.id];l.x+=(E==null?void 0:E.x)||0,l.y+=(E==null?void 0:E.y)||0;const C=(m.size||sz)*uz*a;s.setNode(m.id,{width:C,height:C})}const f=c?[l.x/c,l.y/c]:[0,0],h={};for(const m of n)if(e[m.from]&&e[m.to]&&m.from!==m.to){const E=m.from<m.to?`${m.from}-${m.to}`:`${m.to}-${m.from}`;h[E]||(h[E]=1,s.setEdge(m.from,m.to))}const d=hz(s,a);if(d.length>1){d.forEach(T=>Ak(T,i,u));const m=lz(i),E=cz(i),C=d.filter(T=>T.nodeCount()===1),P=d.filter(T=>T.nodeCount()!==1);if(o===az){P.sort((re,ee)=>ee.nodeCount()-re.nodeCount());const D=m?({width:re,height:ee,...ue})=>({...ue,width:re+Qf,height:ee+Qf}):({width:re,height:ee,...ue})=>({...ue,width:ee+Qf,height:re+Qf}),L=P.map(Px).map(D),j=C.map(Px).map(D),F=L.concat(j);ez(F,{inPlace:!0});const q=Math.floor(Qf/2),W=m?"x":"y",Z=m?"y":"x";if(!E){const re=m?"y":"x",ee=m?"height":"width",ue=F.reduce((se,be)=>se===null?be[re]:Math.min(be[re],se[ee]||0),null),de=F.reduce((se,be)=>se===null?be[re]+be[ee]:Math.max(be[re]+be[ee],se[ee]||0),null);F.forEach(se=>{se[re]=ue+(de-(se[re]+se[ee]))})}const Q=(re,ee)=>{for(const ue of re.nodes()){const de=re.node(ue),se=s.node(ue);se.x=de.x-ee.xOffset+ee[W]+q,se.y=de.y-ee.yOffset+ee[Z]+q}};for(let re=0;re<P.length;re++){const ee=P[re],ue=L[re];Q(ee,ue)}for(let re=0;re<C.length;re++){const ee=C[re],ue=j[re];Q(ee,ue)}}else{P.sort(E?(ee,ue)=>ue.nodeCount()-ee.nodeCount():(ee,ue)=>ee.nodeCount()-ue.nodeCount());const T=P.map(Px),R=C.reduce((ee,ue)=>ee+s.node(ue.nodes()[0]).width,0),D=C.reduce((ee,ue)=>Math.max(ee,s.node(ue.nodes()[0]).width),0),L=C.length>0?R+(C.length-1)*Qf:0,j=T.reduce((ee,{width:ue})=>Math.max(ee,ue),0),F=Math.max(j,L),q=T.reduce((ee,{height:ue})=>Math.max(ee,ue),0),W=Math.max(q,L);let Z=0;const Q=()=>{for(let ee=0;ee<P.length;ee++){const ue=P[ee],de=T[ee],se=Math.floor(m?(F-de.width)/2:(W-de.height)/2);for(const be of ue.nodes()){const Le=ue.node(be),fe=s.node(be);m?(fe.x=Le.x-de.minX+se,fe.y=Le.y-de.minY+Z):(fe.x=Le.x-de.minX+Z,fe.y=Le.y-de.minY+se)}for(const be of ue.edges()){const Le=ue.edge(be),fe=s.edge(be);Le.points&&Le.points.length>3&&(fe.points=Le.points.map(({x:ce,y:Ee})=>({x:ce-de.minX+(m?se:Z),y:Ee-de.minY+(m?Z:se)})))}Z+=(m?de.height:de.width)+Qf}},re=()=>{const ee=Math.floor(((m?F:W)-L)/2);Z+=Math.floor(D/2);let ue=ee;for(const de of C){const se=de.nodes()[0],be=s.node(se);m?(be.x=ue+Math.floor(be.width/2),be.y=Z):(be.x=Z,be.y=ue+Math.floor(be.width/2)),ue+=Qf+be.width}Z=D+Qf};E?(Q(),re()):(re(),Q())}}else Ak(s,i,u);l.x=0,l.y=0;const v={};for(const m of s.nodes()){const E=s.node(m);l.x+=E.x||0,l.y+=E.y||0,v[m]={x:E.x,y:E.y}}const g=c?[l.x/c,l.y/c]:[0,0],_=f[0]-g[0],y=f[1]-g[1];for(const m in v)v[m].x+=_,v[m].y+=y;const p={};for(const m of s.edges()){const E=s.edge(m);if(E.points&&E.points.length>3){const C=dz(E.points);for(const P of C)P.x+=_,P.y+=y;p[`${m.v}-${m.w}`]={points:[...C],from:{x:v[m.v].x,y:v[m.v].y},to:{x:v[m.w].x,y:v[m.w].y}},p[`${m.w}-${m.v}`]={points:C.reverse(),from:{x:v[m.w].x,y:v[m.w].y},to:{x:v[m.v].x,y:v[m.v].y}}}}return{positions:v,parents:u,waypoints:p}};class pz{start(){}postMessage(e){const{nodes:t,nodeIds:n,idToPosition:i,rels:o,direction:a,packing:s,pixelRatio:u,forcedDelay:l=0}=e,c=vz(t,n,i,o,a,s,u);l?setTimeout(()=>{this.onmessage({data:c})},l):this.onmessage({data:c})}onmessage(){}close(){}}const gz={port:new pz},yz=()=>new SharedWorker(new URL("/assets/HierarchicalLayout.worker-BNdYu4o-.js",import.meta.url),{type:"module",name:"HierarchicalLayout"}),mz=Object.freeze(Object.defineProperty({__proto__:null,coseBilkentLayoutFallbackWorker:XU,createCoseBilkentLayoutWorker:$U,createHierarchicalLayoutWorker:yz,hierarchicalLayoutFallbackWorker:gz},Symbol.toStringTag,{value:"Module"}));var uS=function(r,e){return uS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},uS(r,e)};function Hs(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");uS(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Mt=function(){return Mt=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Mt.apply(this,arguments)};function qL(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function fr(r,e,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(c){try{l(n.next(c))}catch(f){a(f)}}function u(c){try{l(n.throw(c))}catch(f){a(f)}}function l(c){c.done?o(c.value):i(c.value).then(s,u)}l((n=n.apply(r,e||[])).next())})}function hr(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(c){return u([l,c])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(t=0)),t;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(l[0]===6&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(c){l=[6,c],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function jo(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))}function lS(r,e,t){e.split&&(e=e.split("."));for(var n=0,i=e.length,o=r,a,s;n<i&&(s=""+e[n++],!(s==="__proto__"||s==="constructor"||s==="prototype"));)o=o[s]=n===i?t:typeof(a=o[s])==typeof e?a:e[n]*0!==0||~(""+e[n]).indexOf(".")?{}:[]}var bz=function(r,e){return Object.keys(r).filter(function(t){return e(t,r[t])}).reduce(function(t,n){return t[n]=r[n],t},{})},Wv=function(r){Hs(e,r);function e(t,n){var i=r.call(this,"".concat(t," ").concat(n))||this;return i.field=t,i}return e}(Error);function yd(r){return typeof r=="string"}function cS(r){return typeof r=="number"}function sg(r){return typeof r=="function"}function _z(r){return r!=null}function Jl(r){return Object.prototype.toString.call(r).slice(8,-1).toLowerCase()==="object"}var sT="is not a string",uT="is not an object",wz="is nil";function Ez(r){if(!_z(r))throw new Wv("Event",wz);if(typeof r!="object")throw new Wv("Event",uT)}function Oz(r){if(!yd(r.type))throw new Wv(".type",sT)}function xz(r){if(!yd(r.event))throw new Wv(".event",sT)}function Sz(r){if(!Jl(r.properties))throw new Wv(".properties",uT)}function Tz(r){if(!Jl(r.traits))throw new Wv(".traits",uT)}function Cz(r){if(!yd(r.messageId))throw new Wv(".messageId",sT)}function Pz(r){Ez(r),Oz(r),Cz(r),r.type==="track"&&(xz(r),Sz(r)),["group","identify"].includes(r.type)&&Tz(r)}var Az=function(){function r(e){var t,n;this.settings=e,this.createMessageId=e.createMessageId,this.onEventMethodCall=(t=e.onEventMethodCall)!==null&&t!==void 0?t:function(){},this.onFinishedEvent=(n=e.onFinishedEvent)!==null&&n!==void 0?n:function(){}}return r}(),Rz=function(){function r(e){this.settings=new Az(e)}return r.prototype.track=function(e,t,n,i){return this.settings.onEventMethodCall({type:"track",options:n}),this.normalize(Mt(Mt({},this.baseEvent()),{event:e,type:"track",properties:t??{},options:Mt({},n),integrations:Mt({},i)}))},r.prototype.page=function(e,t,n,i,o){var a;this.settings.onEventMethodCall({type:"page",options:i});var s={type:"page",properties:Mt({},n),options:Mt({},i),integrations:Mt({},o)};return e!==null&&(s.category=e,s.properties=(a=s.properties)!==null&&a!==void 0?a:{},s.properties.category=e),t!==null&&(s.name=t),this.normalize(Mt(Mt({},this.baseEvent()),s))},r.prototype.screen=function(e,t,n,i,o){this.settings.onEventMethodCall({type:"screen",options:i});var a={type:"screen",properties:Mt({},n),options:Mt({},i),integrations:Mt({},o)};return e!==null&&(a.category=e),t!==null&&(a.name=t),this.normalize(Mt(Mt({},this.baseEvent()),a))},r.prototype.identify=function(e,t,n,i){return this.settings.onEventMethodCall({type:"identify",options:n}),this.normalize(Mt(Mt({},this.baseEvent()),{type:"identify",userId:e,traits:t??{},options:Mt({},n),integrations:i}))},r.prototype.group=function(e,t,n,i){return this.settings.onEventMethodCall({type:"group",options:n}),this.normalize(Mt(Mt({},this.baseEvent()),{type:"group",traits:t??{},options:Mt({},n),integrations:Mt({},i),groupId:e}))},r.prototype.alias=function(e,t,n,i){this.settings.onEventMethodCall({type:"alias",options:n});var o={userId:e,type:"alias",options:Mt({},n),integrations:Mt({},i)};return t!==null&&(o.previousId=t),e===void 0?this.normalize(Mt(Mt({},o),this.baseEvent())):this.normalize(Mt(Mt({},this.baseEvent()),o))},r.prototype.baseEvent=function(){return{integrations:{},options:{}}},r.prototype.context=function(e){var t,n=["userId","anonymousId","timestamp","messageId"];delete e.integrations;var i=Object.keys(e),o=(t=e.context)!==null&&t!==void 0?t:{},a={};return i.forEach(function(s){s!=="context"&&(n.includes(s)?lS(a,s,e[s]):lS(o,s,e[s]))}),[o,a]},r.prototype.normalize=function(e){var t,n,i=Object.keys((t=e.integrations)!==null&&t!==void 0?t:{}).reduce(function(h,d){var v,g;return Mt(Mt({},h),(v={},v[d]=!!(!((g=e.integrations)===null||g===void 0)&&g[d]),v))},{});e.options=bz(e.options||{},function(h,d){return d!==void 0});var o=Mt(Mt({},i),(n=e.options)===null||n===void 0?void 0:n.integrations),a=e.options?this.context(e.options):[],s=a[0],u=a[1],l=e.options,c=qL(e,["options"]),f=Mt(Mt(Mt(Mt({timestamp:new Date},c),{context:s,integrations:o}),u),{messageId:l.messageId||this.settings.createMessageId()});return this.settings.onFinishedEvent(f),Pz(f),f},r}();function Iz(r,e){return new Promise(function(t,n){var i=setTimeout(function(){n(Error("Promise timed out"))},e);r.then(function(o){return clearTimeout(i),t(o)}).catch(n)})}function kz(r){return new Promise(function(e){return setTimeout(e,r)})}function Dz(r,e,t){var n=function(){try{return Promise.resolve(e(r))}catch(i){return Promise.reject(i)}};return kz(t).then(function(){return Iz(n(),1e3)}).catch(function(i){r==null||r.log("warn","Callback Error",{error:i}),r==null||r.stats.increment("callback_error")}).then(function(){return r})}var zL=function(){var r,e,t=!1,n=new Promise(function(i,o){r=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];t=!0,i.apply(void 0,a)},e=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];t=!0,o.apply(void 0,a)}});return{resolve:r,reject:e,promise:n,isSettled:function(){return t}}},lT=function(){function r(e){var t;this.callbacks={},this.warned=!1,this.maxListeners=(t=e==null?void 0:e.maxListeners)!==null&&t!==void 0?t:10}return r.prototype.warnIfPossibleMemoryLeak=function(e){this.warned||this.maxListeners&&this.callbacks[e].length>this.maxListeners&&(console.warn("Event Emitter: Possible memory leak detected; ".concat(String(e)," has exceeded ").concat(this.maxListeners," listeners.")),this.warned=!0)},r.prototype.on=function(e,t){return this.callbacks[e]?(this.callbacks[e].push(t),this.warnIfPossibleMemoryLeak(e)):this.callbacks[e]=[t],this},r.prototype.once=function(e,t){var n=this,i=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];n.off(e,i),t.apply(n,o)};return this.on(e,i),this},r.prototype.off=function(e,t){var n,i=(n=this.callbacks[e])!==null&&n!==void 0?n:[],o=i.filter(function(a){return a!==t});return this.callbacks[e]=o,this},r.prototype.emit=function(e){for(var t=this,n,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];var a=(n=this.callbacks[e])!==null&&n!==void 0?n:[];return a.forEach(function(s){s.apply(t,i)}),this},r}();function Mz(r){var e=Math.random()+1,t=r.minTimeout,n=t===void 0?500:t,i=r.factor,o=i===void 0?2:i,a=r.attempt,s=r.maxTimeout,u=s===void 0?1/0:s;return Math.min(e*n*Math.pow(o,a),u)}var GL="onRemoveFromFuture",cT=function(r){Hs(e,r);function e(t,n,i){var o=r.call(this)||this;return o.future=[],o.maxAttempts=t,o.queue=n,o.seen=i??{},o}return e.prototype.push=function(){for(var t=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=n.map(function(a){var s=t.updateAttempts(a);return s>t.maxAttempts||t.includes(a)?!1:(t.queue.push(a),!0)});return this.queue=this.queue.sort(function(a,s){return t.getAttempts(a)-t.getAttempts(s)}),o},e.prototype.pushWithBackoff=function(t,n){var i=this;if(n===void 0&&(n=0),n==0&&this.getAttempts(t)===0)return this.push(t)[0];var o=this.updateAttempts(t);if(o>this.maxAttempts||this.includes(t))return!1;var a=Mz({attempt:o-1});return n>0&&a<n&&(a=n),setTimeout(function(){i.queue.push(t),i.future=i.future.filter(function(s){return s.id!==t.id}),i.emit(GL)},a),this.future.push(t),!0},e.prototype.getAttempts=function(t){var n;return(n=this.seen[t.id])!==null&&n!==void 0?n:0},e.prototype.updateAttempts=function(t){return this.seen[t.id]=this.getAttempts(t)+1,this.getAttempts(t)},e.prototype.includes=function(t){return this.queue.includes(t)||this.future.includes(t)||!!this.queue.find(function(n){return n.id===t.id})||!!this.future.find(function(n){return n.id===t.id})},e.prototype.pop=function(){return this.queue.shift()},Object.defineProperty(e.prototype,"length",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"todo",{get:function(){return this.queue.length+this.future.length},enumerable:!1,configurable:!0}),e}(lT),Fv=256,Km=[],xm;for(;Fv--;)Km[Fv]=(Fv+256).toString(16).substring(1);function fT(){var r=0,e,t="";if(!xm||Fv+16>256){for(xm=Array(r=256);r--;)xm[r]=256*Math.random()|0;r=Fv=0}for(;r<16;r++)e=xm[Fv+r],r==6?t+=Km[e&15|64]:r==8?t+=Km[e&63|128]:t+=Km[e],r&1&&r>1&&r<11&&(t+="-");return Fv++,t}var Lz=function(){function r(){this._logs=[]}return r.prototype.log=function(e,t,n){var i=new Date;this._logs.push({level:e,message:t,time:i,extras:n})},Object.defineProperty(r.prototype,"logs",{get:function(){return this._logs},enumerable:!1,configurable:!0}),r.prototype.flush=function(){if(this.logs.length>1){var e=this._logs.reduce(function(t,n){var i,o,a,s=Mt(Mt({},n),{json:JSON.stringify(n.extras,null," "),extras:n.extras});delete s.time;var u=(a=(o=n.time)===null||o===void 0?void 0:o.toISOString())!==null&&a!==void 0?a:"";return t[u]&&(u="".concat(u,"-").concat(Math.random())),Mt(Mt({},t),(i={},i[u]=s,i))},{});console.table&&console.table(e)}else this.logs.forEach(function(t){var n=t.level,i=t.message,o=t.extras;n==="info"||n==="debug"||console[n](i,o??"")});this._logs=[]},r}(),Nz=function(r){var e={gauge:"g",counter:"c"};return e[r]},VL=function(){function r(){this.metrics=[]}return r.prototype.increment=function(e,t,n){t===void 0&&(t=1),this.metrics.push({metric:e,value:t,tags:n??[],type:"counter",timestamp:Date.now()})},r.prototype.gauge=function(e,t,n){this.metrics.push({metric:e,value:t,tags:n??[],type:"gauge",timestamp:Date.now()})},r.prototype.flush=function(){var e=this.metrics.map(function(t){return Mt(Mt({},t),{tags:t.tags.join(",")})});console.table&&console.table(e),this.metrics=[]},r.prototype.serialize=function(){return this.metrics.map(function(e){return{m:e.metric,v:e.value,t:e.tags,k:Nz(e.type),e:e.timestamp}})},r}(),jz=function(r){Hs(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.gauge=function(){},e.prototype.increment=function(){},e.prototype.flush=function(){},e.prototype.serialize=function(){return[]},e}(VL),dg=function(){function r(e){var t,n,i;this.retry=(t=e.retry)!==null&&t!==void 0?t:!0,this.type=(n=e.type)!==null&&n!==void 0?n:"plugin Error",this.reason=(i=e.reason)!==null&&i!==void 0?i:""}return r}(),v0=function(){function r(e,t,n,i){t===void 0&&(t=fT()),n===void 0&&(n=new jz),i===void 0&&(i=new Lz),this.attempts=0,this.event=e,this._id=t,this.logger=i,this.stats=n}return r.system=function(){},r.prototype.isSame=function(e){return e.id===this.id},r.prototype.cancel=function(e){throw e||new dg({reason:"Context Cancel"})},r.prototype.log=function(e,t,n){this.logger.log(e,t,n)},Object.defineProperty(r.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),r.prototype.updateEvent=function(e,t){var n;if(e.split(".")[0]==="integrations"){var i=e.split(".")[1];if(((n=this.event.integrations)===null||n===void 0?void 0:n[i])===!1)return this.event}return lS(this.event,e,t),this.event},r.prototype.failedDelivery=function(){return this._failedDelivery},r.prototype.setFailedDelivery=function(e){this._failedDelivery=e},r.prototype.logs=function(){return this.logger.logs},r.prototype.flush=function(){this.logger.flush(),this.stats.flush()},r.prototype.toJSON=function(){return{id:this._id,event:this.event,logs:this.logger.logs,metrics:this.stats.metrics}},r}();function Fz(r,e){var t={};return r.forEach(function(n){var i,o=void 0;{var a=n[e];o=typeof a!="string"?JSON.stringify(a):a}o!==void 0&&(t[o]=jo(jo([],(i=t[o])!==null&&i!==void 0?i:[],!0),[n],!1))}),t}var Bz=function(r){return typeof r=="object"&&r!==null&&"then"in r&&typeof r.then=="function"},Uz=function(){var r,e,t=0;return{done:function(){return r},run:function(n){var i=n();return Bz(i)&&(++t===1&&(r=new Promise(function(o){return e=o})),i.finally(function(){return--t===0&&e()})),i}}};function qz(r){return fr(this,void 0,void 0,function(){var e;return hr(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,r()];case 1:return[2,t.sent()];case 2:return e=t.sent(),[2,Promise.reject(e)];case 3:return[2]}})})}function by(r,e){r.log("debug","plugin",{plugin:e.name});var t=new Date().getTime(),n=e[r.event.type];if(n===void 0)return Promise.resolve(r);var i=qz(function(){return n.apply(e,[r])}).then(function(o){var a=new Date().getTime()-t;return o.stats.gauge("plugin_time",a,["plugin:".concat(e.name)]),o}).catch(function(o){if(o instanceof dg&&o.type==="middleware_cancellation")throw o;return o instanceof dg?(r.log("warn",o.type,{plugin:e.name,error:o}),o):(r.log("error","plugin Error",{plugin:e.name,error:o}),r.stats.increment("plugin_error",1,["plugin:".concat(e.name)]),o)});return i}function zz(r,e){return by(r,e).then(function(t){if(t instanceof v0)return t;r.log("debug","Context canceled"),r.stats.increment("context_canceled"),r.cancel(t)})}var Gz=function(r){Hs(e,r);function e(t){var n=r.call(this)||this;return n.criticalTasks=Uz(),n.plugins=[],n.failedInitializations=[],n.flushing=!1,n.queue=t,n.queue.on(GL,function(){n.scheduleFlush(0)}),n}return e.prototype.register=function(t,n,i){return fr(this,void 0,void 0,function(){var o,a,s=this;return hr(this,function(u){switch(u.label){case 0:return this.plugins.push(n),o=function(l){s.failedInitializations.push(n.name),s.emit("initialization_failure",n),console.warn(n.name,l),t.log("warn","Failed to load destination",{plugin:n.name,error:l}),s.plugins=s.plugins.filter(function(c){return c!==n})},n.type==="destination"&&n.name!=="Segment.io"?(n.load(t,i).catch(o),[3,4]):[3,1];case 1:return u.trys.push([1,3,,4]),[4,n.load(t,i)];case 2:return u.sent(),[3,4];case 3:return a=u.sent(),o(a),[3,4];case 4:return[2]}})})},e.prototype.deregister=function(t,n,i){return fr(this,void 0,void 0,function(){var o;return hr(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),n.unload?[4,Promise.resolve(n.unload(t,i))]:[3,2];case 1:a.sent(),a.label=2;case 2:return this.plugins=this.plugins.filter(function(s){return s.name!==n.name}),[3,4];case 3:return o=a.sent(),t.log("warn","Failed to unload destination",{plugin:n.name,error:o}),[3,4];case 4:return[2]}})})},e.prototype.dispatch=function(t){return fr(this,void 0,void 0,function(){var n;return hr(this,function(i){return t.log("debug","Dispatching"),t.stats.increment("message_dispatched"),this.queue.push(t),n=this.subscribeToDelivery(t),this.scheduleFlush(0),[2,n]})})},e.prototype.subscribeToDelivery=function(t){return fr(this,void 0,void 0,function(){var n=this;return hr(this,function(i){return[2,new Promise(function(o){var a=function(s,u){s.isSame(t)&&(n.off("flush",a),o(s))};n.on("flush",a)})]})})},e.prototype.dispatchSingle=function(t){return fr(this,void 0,void 0,function(){var n=this;return hr(this,function(i){return t.log("debug","Dispatching"),t.stats.increment("message_dispatched"),this.queue.updateAttempts(t),t.attempts=1,[2,this.deliver(t).catch(function(o){var a=n.enqueuRetry(o,t);return a?n.subscribeToDelivery(t):(t.setFailedDelivery({reason:o}),t)})]})})},e.prototype.isEmpty=function(){return this.queue.length===0},e.prototype.scheduleFlush=function(t){var n=this;t===void 0&&(t=500),!this.flushing&&(this.flushing=!0,setTimeout(function(){n.flush().then(function(){setTimeout(function(){n.flushing=!1,n.queue.length&&n.scheduleFlush(0)},0)})},t))},e.prototype.deliver=function(t){return fr(this,void 0,void 0,function(){var n,i,o,a;return hr(this,function(s){switch(s.label){case 0:return[4,this.criticalTasks.done()];case 1:s.sent(),n=Date.now(),s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this.flushOne(t)];case 3:return t=s.sent(),i=Date.now()-n,this.emit("delivery_success",t),t.stats.gauge("delivered",i),t.log("debug","Delivered",t.event),[2,t];case 4:throw o=s.sent(),a=o,t.log("error","Failed to deliver",a),this.emit("delivery_failure",t,a),t.stats.increment("delivery_failed"),o;case 5:return[2]}})})},e.prototype.enqueuRetry=function(t,n){var i=!(t instanceof dg)||t.retry;return i?this.queue.pushWithBackoff(n):!1},e.prototype.flush=function(){return fr(this,void 0,void 0,function(){var t,n,i;return hr(this,function(o){switch(o.label){case 0:if(this.queue.length===0)return[2,[]];if(t=this.queue.pop(),!t)return[2,[]];t.attempts=this.queue.getAttempts(t),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.deliver(t)];case 2:return t=o.sent(),this.emit("flush",t,!0),[3,4];case 3:return n=o.sent(),i=this.enqueuRetry(n,t),i||(t.setFailedDelivery({reason:n}),this.emit("flush",t,!1)),[2,[]];case 4:return[2,[t]]}})})},e.prototype.isReady=function(){return!0},e.prototype.availableExtensions=function(t){var n=this.plugins.filter(function(d){var v,g,_;if(d.type!=="destination"&&d.name!=="Segment.io")return!0;var y=void 0;return(v=d.alternativeNames)===null||v===void 0||v.forEach(function(p){t[p]!==void 0&&(y=t[p])}),(_=(g=t[d.name])!==null&&g!==void 0?g:y)!==null&&_!==void 0?_:(d.name==="Segment.io"?!0:t.All)!==!1}),i=Fz(n,"type"),o=i.before,a=o===void 0?[]:o,s=i.enrichment,u=s===void 0?[]:s,l=i.destination,c=l===void 0?[]:l,f=i.after,h=f===void 0?[]:f;return{before:a,enrichment:u,destinations:c,after:h}},e.prototype.flushOne=function(t){var n,i;return fr(this,void 0,void 0,function(){var o,a,s,u,l,c,v,f,h,d,v,g,_,y,p;return hr(this,function(m){switch(m.label){case 0:if(!this.isReady())throw new Error("Not ready");t.attempts>1&&this.emit("delivery_retry",t),o=this.availableExtensions((n=t.event.integrations)!==null&&n!==void 0?n:{}),a=o.before,s=o.enrichment,u=0,l=a,m.label=1;case 1:return u<l.length?(c=l[u],[4,zz(t,c)]):[3,4];case 2:v=m.sent(),v instanceof v0&&(t=v),this.emit("message_enriched",t,c),m.label=3;case 3:return u++,[3,1];case 4:f=0,h=s,m.label=5;case 5:return f<h.length?(d=h[f],[4,by(t,d)]):[3,8];case 6:v=m.sent(),v instanceof v0&&(t=v),this.emit("message_enriched",t,d),m.label=7;case 7:return f++,[3,5];case 8:return g=this.availableExtensions((i=t.event.integrations)!==null&&i!==void 0?i:{}),_=g.destinations,y=g.after,[4,new Promise(function(E,C){setTimeout(function(){var P=_.map(function(T){return by(t,T)});Promise.all(P).then(E).catch(C)},0)})];case 9:return m.sent(),t.stats.increment("message_delivered"),this.emit("message_delivered",t),p=y.map(function(E){return by(t,E)}),[4,Promise.all(p)];case 10:return m.sent(),[2,t]}})})},e}(lT),Vz=function(r,e){var t=Date.now()-r;return Math.max((e??300)-t,0)};function Wz(r,e,t,n){return fr(this,void 0,void 0,function(){var i,o;return hr(this,function(a){switch(a.label){case 0:return t.emit("dispatch_start",r),i=Date.now(),e.isEmpty()?[4,e.dispatchSingle(r)]:[3,2];case 1:return o=a.sent(),[3,4];case 2:return[4,e.dispatch(r)];case 3:o=a.sent(),a.label=4;case 4:return n!=null&&n.callback?[4,Dz(o,n.callback,Vz(i,n.timeout))]:[3,6];case 5:o=a.sent(),a.label=6;case 6:return n!=null&&n.debug&&o.flush(),[2,o]}})})}function Hz(r,e,t,n){var i,o=[r,e,t,n],a=Jl(r)?r.event:r;if(!a||!yd(a))throw new Error("Event missing");var s=Jl(r)?(i=r.properties)!==null&&i!==void 0?i:{}:Jl(e)?e:{},u={};sg(t)||(u=t??{}),Jl(r)&&!sg(e)&&(u=e??{});var l=o.find(sg);return[a,s,u,l]}function Rk(r,e,t,n,i){var o,a,s=null,u=null,l=[r,e,t,n,i],c=l.filter(yd);c.length===1?yd(l[1])?(u=l[1],s=null):(u=c[0],s=null):c.length===2&&(typeof l[0]=="string"&&(s=l[0]),typeof l[1]=="string"&&(u=l[1]));var f=l.find(sg),h=l.filter(Jl);return h.length===1?Jl(l[2])?(a={},o=l[2]):Jl(l[3])?(o={},a=l[3]):(o=h[0],a={}):h.length===2&&(o=h[0],a=h[1]),[s,u,o??(o={}),a??(a={}),f]}var Ik=function(r){return function(){for(var e,t,n,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];for(var a={},s=["callback","options","traits","id"],u=0,l=i;u<l.length;u++){var c=l[u],f=s.pop();if(f==="id"){if(yd(c)||cS(c)){a.id=c.toString();continue}if(c==null)continue;f=s.pop()}if((f==="traits"||f==="options")&&(c==null||Jl(c))&&(a[f]=c),sg(c)){a.callback=c;break}}return[(e=a.id)!==null&&e!==void 0?e:r.id(),(t=a.traits)!==null&&t!==void 0?t:{},(n=a.options)!==null&&n!==void 0?n:{},a.callback]}};function Yz(r,e,t,n){cS(r)&&(r=r.toString()),cS(e)&&(e=e.toString());var i=[r,e,t,n],o=i.filter(yd),a=o[0],s=a===void 0?r:a,u=o[1],l=u===void 0?null:u,c=i.filter(Jl)[0],f=c===void 0?{}:c,h=i.find(sg);return[s,l,f,h]}function hT(){return typeof window<"u"}function I7(){return!hT()}function Xz(){return hT()?window.navigator.onLine:!0}function Ry(){return!Xz()}function $z(r,e){return e=e||{},new Promise(function(t,n){var i=new XMLHttpRequest,o=[],a=[],s={},u=function(){return{ok:(i.status/100|0)==2,statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:u,headers:{keys:function(){return o},entries:function(){return a},get:function(c){return s[c.toLowerCase()]},has:function(c){return c.toLowerCase()in s}}}};for(var l in i.open(e.method||"get",r,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(c,f,h){o.push(f=f.toLowerCase()),a.push([f,h]),s[f]=s[f]?s[f]+","+h:h}),t(u())},i.onerror=n,i.withCredentials=e.credentials=="include",e.headers)i.setRequestHeader(l,e.headers[l]);i.send(e.body||null)})}var dT=function(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:null},$0=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=dT();return(t&&t.fetch||$z).apply(void 0,r)},K0="1.81.0",WL="api.segment.io/v1",Kz=function(r,e,t){var n=e.reduce(function(i,o){var a=o.split(":"),s=a[0],u=a[1];return i[s]=u,i},{});return{type:"Counter",metric:r,value:1,tags:Mt(Mt({},n),{library:"analytics.js",library_version:"npm:next-".concat(K0)})}};function Rx(r){console.error("Error sending segment performance metrics",r)}var Zz=function(){function r(e){var t=this,n,i,o,a,s;if(this.host=(n=e==null?void 0:e.host)!==null&&n!==void 0?n:WL,this.sampleRate=(i=e==null?void 0:e.sampleRate)!==null&&i!==void 0?i:1,this.flushTimer=(o=e==null?void 0:e.flushTimer)!==null&&o!==void 0?o:30*1e3,this.maxQueueSize=(a=e==null?void 0:e.maxQueueSize)!==null&&a!==void 0?a:20,this.protocol=(s=e==null?void 0:e.protocol)!==null&&s!==void 0?s:"https",this.queue=[],this.sampleRate>0){var u=!1,l=function(){u||(u=!0,t.flush().catch(Rx),u=!1,setTimeout(l,t.flushTimer))};l()}}return r.prototype.increment=function(e,t){if(e.includes("analytics_js.")&&t.length!==0&&!(Math.random()>this.sampleRate)&&!(this.queue.length>=this.maxQueueSize)){var n=Kz(e,t);this.queue.push(n),e.includes("error")&&this.flush().catch(Rx)}},r.prototype.flush=function(){return fr(this,void 0,void 0,function(){var e=this;return hr(this,function(t){switch(t.label){case 0:return this.queue.length<=0?[2]:[4,this.send().catch(function(n){Rx(n),e.sampleRate=0})];case 1:return t.sent(),[2]}})})},r.prototype.send=function(){return fr(this,void 0,void 0,function(){var e,t,n;return hr(this,function(i){return e={series:this.queue},this.queue=[],t={"Content-Type":"text/plain"},n="".concat(this.protocol,"://").concat(this.host,"/m"),[2,$0(n,{headers:t,body:JSON.stringify(e),method:"POST"})]})})},r}(),Sm,HL=function(r){Hs(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.initRemoteMetrics=function(t){Sm=new Zz(t)},e.prototype.increment=function(t,n,i){r.prototype.increment.call(this,t,n,i),Sm==null||Sm.increment(t,i??[])},e}(VL),nh=function(r){Hs(e,r);function e(t,n){return r.call(this,t,n,new HL)||this}return e.system=function(){return new this({type:"track",event:"system"})},e}(v0);function Qz(r){return Object.prototype.toString.call(r).slice(8,-1).toLowerCase()==="object"}var YL="bpc",XL=function(r,e,t,n,i,o){return{__t:YL,c:e,p:n,u:r,s:t,t:i,r:o}},Jz=Object.keys(XL("","","","","",""));function e9(r){if(!Qz(r)||r.__t!==YL)return!1;for(var e in r)if(!Jz.includes(e))return!1;return!0}var t9=function(r,e){return r.indexOf("?")>-1?r:r+e},r9=function(r){var e=r.indexOf("#");return e===-1?r:r.slice(0,e)},n9=function(r){try{return new URL(r).pathname}catch{return r[0]==="/"?r:"/"+r}},$L=function(r){var e=r.c,t=r.p,n=r.s,i=r.u,o=r.r,a=r.t,s=e?n9(e):t,u=e?t9(e,n):r9(i);return{path:s,referrer:o,search:n,title:a,url:u}},KL=function(){var r=document.querySelector("link[rel='canonical']");return XL(location.href,r&&r.getAttribute("href")||void 0,location.search,location.pathname,document.title,document.referrer)},i9=function(){return $L(KL())};function o9(r,e){return Object.assign.apply(Object,jo([{}],e.map(function(t){var n;if(r&&Object.prototype.hasOwnProperty.call(r,t))return n={},n[t]=r[t],n}),!1))}var Xp=function(r,e){e===void 0&&(e=i9());var t=r.context,n;r.type==="page"&&(n=r.properties&&o9(r.properties,Object.keys(e)),r.properties=Mt(Mt(Mt({},e),r.properties),r.name?{name:r.name}:{})),t.page=Mt(Mt(Mt({},e),n),t.page)},a9=function(r){Hs(e,r);function e(t){var n=r.call(this,{createMessageId:function(){return"ajs-next-".concat(Date.now(),"-").concat(fT())},onEventMethodCall:function(i){var o=i.options;n.maybeUpdateAnonId(o)},onFinishedEvent:function(i){return n.addIdentity(i),i}})||this;return n.user=t,n}return e.prototype.maybeUpdateAnonId=function(t){t!=null&&t.anonymousId&&this.user.anonymousId(t.anonymousId)},e.prototype.addIdentity=function(t){this.user.id()&&(t.userId=this.user.id()),this.user.anonymousId()&&(t.anonymousId=this.user.anonymousId())},e.prototype.track=function(t,n,i,o,a){var s=r.prototype.track.call(this,t,n,i,o);return Xp(s,a),s},e.prototype.page=function(t,n,i,o,a,s){var u=r.prototype.page.call(this,t,n,i,o,a);return Xp(u,s),u},e.prototype.screen=function(t,n,i,o,a,s){var u=r.prototype.screen.call(this,t,n,i,o,a);return Xp(u,s),u},e.prototype.identify=function(t,n,i,o,a){var s=r.prototype.identify.call(this,t,n,i,o);return Xp(s,a),s},e.prototype.group=function(t,n,i,o,a){var s=r.prototype.group.call(this,t,n,i,o);return Xp(s,a),s},e.prototype.alias=function(t,n,i,o,a){var s=r.prototype.alias.call(this,t,n,i,o);return Xp(s,a),s},e}(Rz),s9=function(r){return"addMiddleware"in r&&r.type==="destination"},Kc={getItem:function(){},setItem:function(){},removeItem:function(){}};try{Kc=hT()&&window.localStorage?window.localStorage:Kc}catch(r){console.warn("Unable to access localStorage",r)}function ZL(r){var e=Kc.getItem(r);return(e?JSON.parse(e):[]).map(function(t){return new nh(t.event,t.id)})}function u9(r,e){var t=ZL(r),n=jo(jo([],e,!0),t,!0),i=n.reduce(function(o,a){var s;return Mt(Mt({},o),(s={},s[a.id]=a,s))},{});Kc.setItem(r,JSON.stringify(Object.values(i)))}function QL(r){var e=Kc.getItem(r);return e?JSON.parse(e):{}}function l9(r,e){var t=QL(r);Kc.setItem(r,JSON.stringify(Mt(Mt({},t),e)))}function kk(r){Kc.removeItem(r)}var c9=function(){return new Date().getTime()};function fS(r,e,t){t===void 0&&(t=0);var n=50,i="persisted-queue:v1:".concat(r,":lock"),o=function(l){return new Date().getTime()>l},a=Kc.getItem(i),s=a?JSON.parse(a):null,u=s===null||o(s);if(u){Kc.setItem(i,JSON.stringify(c9()+n)),e(),Kc.removeItem(i);return}!u&&t<3?setTimeout(function(){fS(r,e,t+1)},n):console.error("Unable to retrieve lock")}var vT=function(r){Hs(e,r);function e(t,n){var i=r.call(this,t,[])||this,o="persisted-queue:v1:".concat(n,":items"),a="persisted-queue:v1:".concat(n,":seen"),s=[],u={};return fS(n,function(){try{s=ZL(o),u=QL(a),kk(o),kk(a),i.queue=jo(jo([],s,!0),i.queue,!0),i.seen=Mt(Mt({},u),i.seen)}catch(l){console.error(l)}}),window.addEventListener("pagehide",function(){if(i.todo>0){var l=jo(jo([],i.queue,!0),i.future,!0);try{fS(n,function(){u9(o,l),l9(a,i.seen)})}catch(c){console.error(c)}}}),i}return e}(cT),f9=function(r){Hs(e,r);function e(t){return r.call(this,typeof t=="string"?new vT(4,t):t)||this}return e.prototype.flush=function(){return fr(this,void 0,void 0,function(){return hr(this,function(t){return Ry()?[2,[]]:[2,r.prototype.flush.call(this)]})})},e}(Gz);function pT(r){for(var e=r.constructor.prototype,t=0,n=Object.getOwnPropertyNames(e);t<n.length;t++){var i=n[t];if(i!=="constructor"){var o=Object.getOwnPropertyDescriptor(r.constructor.prototype,i);o&&typeof o.value=="function"&&(r[i]=r[i].bind(r))}}return r}/*! js-cookie v3.0.1 | MIT */function Tm(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)r[n]=t[n]}return r}var h9={read:function(r){return r[0]==='"'&&(r=r.slice(1,-1)),r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(r){return encodeURIComponent(r).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function hS(r,e){function t(i,o,a){if(!(typeof document>"u")){a=Tm({},e,a),typeof a.expires=="number"&&(a.expires=new Date(Date.now()+a.expires*864e5)),a.expires&&(a.expires=a.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var u in a)a[u]&&(s+="; "+u,a[u]!==!0&&(s+="="+a[u].split(";")[0]));return document.cookie=i+"="+r.write(o,i)+s}}function n(i){if(!(typeof document>"u"||arguments.length&&!i)){for(var o=document.cookie?document.cookie.split("; "):[],a={},s=0;s<o.length;s++){var u=o[s].split("="),l=u.slice(1).join("=");try{var c=decodeURIComponent(u[0]);if(a[c]=r.read(l,c),i===c)break}catch{}}return i?a[i]:a}}return Object.create({set:t,get:n,remove:function(i,o){t(i,"",Tm({},o,{expires:-1}))},withAttributes:function(i){return hS(this.converter,Tm({},this.attributes,i))},withConverter:function(i){return hS(Tm({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(r)}})}var th=hS(h9,{path:"/"});function d9(r){var e=r.hostname,t=e.split("."),n=t[t.length-1],i=[];if(t.length===4&&parseInt(n,10)>0||t.length<=1)return i;for(var o=t.length-2;o>=0;--o)i.push(t.slice(o).join("."));return i}function v9(r){try{return new URL(r)}catch{return}}function JL(r){var e=v9(r);if(e)for(var t=d9(e),n=0;n<t.length;++n){var i="__tld__",o=t[n],a={domain:"."+o};try{if(th.set(i,"1",a),th.get(i))return th.remove(i,a),o}catch{return}}}var p9=365,eN=function(){function r(e){e===void 0&&(e=r.defaults),this.options=Mt(Mt({},r.defaults),e)}return Object.defineProperty(r,"defaults",{get:function(){return{maxage:p9,domain:JL(window.location.href),path:"/",sameSite:"Lax"}},enumerable:!1,configurable:!0}),r.prototype.opts=function(){return{sameSite:this.options.sameSite,expires:this.options.maxage,domain:this.options.domain,path:this.options.path,secure:this.options.secure}},r.prototype.get=function(e){var t;try{var n=th.get(e);if(n==null)return null;try{return(t=JSON.parse(n))!==null&&t!==void 0?t:null}catch{return n??null}}catch{return null}},r.prototype.set=function(e,t){typeof t=="string"?th.set(e,t,this.opts()):t===null?th.remove(e,this.opts()):th.set(e,JSON.stringify(t),this.opts())},r.prototype.remove=function(e){return th.remove(e,this.opts())},r}(),g9=function(){function r(){}return r.prototype.localStorageWarning=function(e,t){console.warn("Unable to access ".concat(e,", localStorage may be ").concat(t))},r.prototype.get=function(e){var t;try{var n=localStorage.getItem(e);if(n===null)return null;try{return(t=JSON.parse(n))!==null&&t!==void 0?t:null}catch{return n??null}}catch{return this.localStorageWarning(e,"unavailable"),null}},r.prototype.set=function(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch{this.localStorageWarning(e,"full")}},r.prototype.remove=function(e){try{return localStorage.removeItem(e)}catch{this.localStorageWarning(e,"unavailable")}},r}(),gT=function(){function r(){this.cache={}}return r.prototype.get=function(e){var t;return(t=this.cache[e])!==null&&t!==void 0?t:null},r.prototype.set=function(e,t){this.cache[e]=t},r.prototype.remove=function(e){delete this.cache[e]},r}(),zs={Cookie:"cookie",LocalStorage:"localStorage",Memory:"memory"};function tN(r){return r&&r.stores&&Array.isArray(r.stores)&&r.stores.every(function(e){return Object.values(zs).includes(e)})}function y9(r){return typeof r=="object"&&r.name!==void 0}var Ix=function(r,e,t,n){console.warn("".concat(r.constructor.name,": Can't ").concat(e,' key "').concat(t,'" | Err: ').concat(n))},Bv=function(){function r(e){this.stores=e}return r.prototype.get=function(e){for(var t=null,n=0,i=this.stores;n<i.length;n++){var o=i[n];try{if(t=o.get(e),t!=null)return t}catch(a){Ix(o,"get",e,a)}}return null},r.prototype.set=function(e,t){this.stores.forEach(function(n){try{n.set(e,t)}catch(i){Ix(n,"set",e,i)}})},r.prototype.clear=function(e){this.stores.forEach(function(t){try{t.remove(e)}catch(n){Ix(t,"remove",e,n)}})},r.prototype.getAndSync=function(e){var t=this.get(e),n=typeof t=="number"?t.toString():t;return this.set(e,n),n},r}();function dS(r){var e=r.map(function(t){var n,i;switch(y9(t)?(n=t.name,i=t.settings):n=t,n){case zs.Cookie:return new eN(i);case zs.LocalStorage:return new g9;case zs.Memory:return new gT;default:throw new Error("Unknown Store Type: ".concat(t))}});return e}function rN(r,e){return r.map(function(t){return e&&t===zs.Cookie?{name:t,settings:e}:t})}var Ev={persist:!0,cookie:{key:"ajs_user_id",oldKey:"ajs_user"},localStorage:{key:"ajs_user_traits"}},nN=function(){function r(e,t){e===void 0&&(e=Ev);var n=this,i,o,a,s;this.options={},this.id=function(l){if(n.options.disable)return null;var c=n.identityStore.getAndSync(n.idKey);if(l!==void 0){n.identityStore.set(n.idKey,l);var f=l!==c&&c!==null&&l!==null;f&&n.anonymousId(null)}var h=n.identityStore.getAndSync(n.idKey);if(h)return h;var d=n.legacyUserStore.get(Ev.cookie.oldKey);return d?typeof d=="object"?d.id:d:null},this.anonymousId=function(l){var c,f;if(n.options.disable)return null;if(l===void 0){var h=(c=n.identityStore.getAndSync(n.anonKey))!==null&&c!==void 0?c:(f=n.legacySIO())===null||f===void 0?void 0:f[0];if(h)return h}return l===null?(n.identityStore.set(n.anonKey,null),n.identityStore.getAndSync(n.anonKey)):(n.identityStore.set(n.anonKey,l??fT()),n.identityStore.getAndSync(n.anonKey))},this.traits=function(l){var c;if(!n.options.disable)return l===null&&(l={}),l&&n.traitsStore.set(n.traitsKey,l??{}),(c=n.traitsStore.get(n.traitsKey))!==null&&c!==void 0?c:{}},this.options=Mt(Mt({},Ev),e),this.cookieOptions=t,this.idKey=(o=(i=e.cookie)===null||i===void 0?void 0:i.key)!==null&&o!==void 0?o:Ev.cookie.key,this.traitsKey=(s=(a=e.localStorage)===null||a===void 0?void 0:a.key)!==null&&s!==void 0?s:Ev.localStorage.key,this.anonKey="ajs_anonymous_id",this.identityStore=this.createStorage(this.options,t),this.legacyUserStore=this.createStorage(this.options,t,function(l){return l===zs.Cookie}),this.traitsStore=this.createStorage(this.options,t,function(l){return l!==zs.Cookie});var u=this.legacyUserStore.get(Ev.cookie.oldKey);u&&typeof u=="object"&&(u.id&&this.id(u.id),u.traits&&this.traits(u.traits)),pT(this)}return r.prototype.legacySIO=function(){var e=this.legacyUserStore.get("_sio");if(!e)return null;var t=e.split("----"),n=t[0],i=t[1];return[n,i]},r.prototype.identify=function(e,t){if(!this.options.disable){t=t??{};var n=this.id();(n===null||n===e)&&(t=Mt(Mt({},this.traits()),t)),e&&this.id(e),this.traits(t)}},r.prototype.logout=function(){this.anonymousId(null),this.id(null),this.traits({})},r.prototype.reset=function(){this.logout(),this.identityStore.clear(this.idKey),this.identityStore.clear(this.anonKey),this.traitsStore.clear(this.traitsKey)},r.prototype.load=function(){return new r(this.options,this.cookieOptions)},r.prototype.save=function(){return!0},r.prototype.createStorage=function(e,t,n){var i=[zs.LocalStorage,zs.Cookie,zs.Memory];return e.disable?new Bv([]):e.persist?(e.storage!==void 0&&e.storage!==null&&tN(e.storage)&&(i=e.storage.stores),e.localStorageFallbackDisabled&&(i=i.filter(function(o){return o!==zs.LocalStorage})),n&&(i=i.filter(n)),new Bv(dS(rN(i,t)))):new Bv([new gT])},r.defaults=Ev,r}(),Dk={persist:!0,cookie:{key:"ajs_group_id"},localStorage:{key:"ajs_group_properties"}},m9=function(r){Hs(e,r);function e(t,n){t===void 0&&(t=Dk);var i=r.call(this,Mt(Mt({},Dk),t),n)||this;return i.anonymousId=function(o){},pT(i),i}return e}(nN),yT="analytics";function iN(){return window[yT]}function b9(r){yT=r}function _9(r){window[yT]=r}var w9=function(r){return typeof r=="object"&&r!==null&&"then"in r&&typeof r.then=="function"},oN=function(r,e,t){t.getAndRemove(r).forEach(function(n){Z0(e,n).catch(console.error)})},E9=function(r,e){return fr(void 0,void 0,void 0,function(){var t,n,i;return hr(this,function(o){switch(o.label){case 0:t=0,n=e.getAndRemove("addSourceMiddleware"),o.label=1;case 1:return t<n.length?(i=n[t],[4,Z0(r,i).catch(console.error)]):[3,4];case 2:o.sent(),o.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},O9=function(r,e){return fr(void 0,void 0,void 0,function(){var t,n,i;return hr(this,function(o){switch(o.label){case 0:t=0,n=e.getAndRemove("register"),o.label=1;case 1:return t<n.length?(i=n[t],[4,Z0(r,i).catch(console.error)]):[3,4];case 2:o.sent(),o.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},x9=oN.bind(void 0,"on"),S9=oN.bind(void 0,"setAnonymousId"),T9=function(r,e){Object.keys(e.calls).forEach(function(t){e.getAndRemove(t).forEach(function(n){setTimeout(function(){Z0(r,n).catch(console.error)},0)})})},$p=function(r){if(aN(r)){var e=r.pop();return $L(e)}},aN=function(r){var e=r[r.length-1];return e9(e)},vS=function(){function r(e,t,n,i){n===void 0&&(n=function(){}),i===void 0&&(i=console.error),this.method=e,this.resolve=n,this.reject=i,this.called=!1,this.args=t}return r}(),C9=function(){function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._callMap={},this.add.apply(this,e)}return Object.defineProperty(r.prototype,"calls",{get:function(){return this._pushSnippetWindowBuffer(),this._callMap},set:function(e){this._callMap=e},enumerable:!1,configurable:!0}),r.prototype.get=function(e){var t;return(t=this.calls[e])!==null&&t!==void 0?t:[]},r.prototype.getAndRemove=function(e){var t=this.get(e);return this.calls[e]=[],t},r.prototype.add=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.forEach(function(i){var o=["track","screen","alias","group","page","identify"];o.includes(i.method)&&!aN(i.args)&&(i.args=jo(jo([],i.args,!0),[KL()],!1)),e.calls[i.method]?e.calls[i.method].push(i):e.calls[i.method]=[i]})},r.prototype.clear=function(){this._pushSnippetWindowBuffer(),this.calls={}},r.prototype.toArray=function(){var e;return(e=[]).concat.apply(e,Object.values(this.calls))},r.prototype._pushSnippetWindowBuffer=function(){},r}();function Z0(r,e){return fr(this,void 0,void 0,function(){var t,n;return hr(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),e.called?[2,void 0]:(e.called=!0,t=r[e.method].apply(r,e.args),w9(t)?[4,t]:[3,2]);case 1:i.sent(),i.label=2;case 2:return e.resolve(t),[3,4];case 3:return n=i.sent(),e.reject(n),[3,4];case 4:return[2]}})})}var P9=function(){function r(e){var t=this;this.trackSubmit=this._createMethod("trackSubmit"),this.trackClick=this._createMethod("trackClick"),this.trackLink=this._createMethod("trackLink"),this.pageView=this._createMethod("pageview"),this.identify=this._createMethod("identify"),this.reset=this._createMethod("reset"),this.group=this._createMethod("group"),this.track=this._createMethod("track"),this.ready=this._createMethod("ready"),this.alias=this._createMethod("alias"),this.debug=this._createChainableMethod("debug"),this.page=this._createMethod("page"),this.once=this._createChainableMethod("once"),this.off=this._createChainableMethod("off"),this.on=this._createChainableMethod("on"),this.addSourceMiddleware=this._createMethod("addSourceMiddleware"),this.setAnonymousId=this._createMethod("setAnonymousId"),this.addDestinationMiddleware=this._createMethod("addDestinationMiddleware"),this.screen=this._createMethod("screen"),this.register=this._createMethod("register"),this.deregister=this._createMethod("deregister"),this.user=this._createMethod("user"),this.VERSION=K0,this._preInitBuffer=new C9,this._promise=e(this._preInitBuffer),this._promise.then(function(n){var i=n[0],o=n[1];t.instance=i,t.ctx=o}).catch(function(){})}return r.prototype.then=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._promise).then.apply(e,t)},r.prototype.catch=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._promise).catch.apply(e,t)},r.prototype.finally=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._promise).finally.apply(e,t)},r.prototype._createMethod=function(e){var t=this;return function(){for(var n,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(t.instance){var a=(n=t.instance)[e].apply(n,i);return Promise.resolve(a)}return new Promise(function(s,u){t._preInitBuffer.add(new vS(e,i,s,u))})}},r.prototype._createChainableMethod=function(e){var t=this;return function(){for(var n,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return t.instance?((n=t.instance)[e].apply(n,i),t):(t._preInitBuffer.add(new vS(e,i)),t)}},r}(),ry={},Ov={},Kp={},kx={exports:{}},Mk;function Q0(){return Mk||(Mk=1,function(r){r.exports=e(t),r.exports.find=r.exports,r.exports.replace=function(s,u,l,c){return e(i).call(this,s,u,l,c),s},r.exports.del=function(s,u,l){return e(n).call(this,s,u,null,l),s};function e(s){return function(u,l,c,f){var h=f&&a(f.normalizer)?f.normalizer:o;l=h(l);for(var d,v=!1;!v;)g();function g(){for(d in u){var _=h(d);if(l.indexOf(_)===0){var y=l.substr(_.length);if(y.charAt(0)==="."||y.length===0){l=y.substr(1);var p=u[d];if(p==null){v=!0;return}if(!l.length){v=!0;return}u=p;return}}}d=void 0,v=!0}if(d)return u==null?u:s(u,d,c)}}function t(s,u){if(s.hasOwnProperty(u))return s[u]}function n(s,u){return s.hasOwnProperty(u)&&delete s[u],s}function i(s,u,l){return s.hasOwnProperty(u)&&(s[u]=l),s}function o(s){return s.replace(/[^a-zA-Z0-9\.]+/g,"").toLowerCase()}function a(s){return typeof s=="function"}}(kx)),kx.exports}var Lk;function A9(){if(Lk)return Kp;Lk=1;var r=Kp&&Kp.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Kp,"__esModule",{value:!0});var e=r(Q0());function t(i,o){return function(){var a=this.traits(),s=this.properties?this.properties():{};return e.default(a,"address."+i)||e.default(a,i)||(o?e.default(a,"address."+o):null)||(o?e.default(a,o):null)||e.default(s,"address."+i)||e.default(s,i)||(o?e.default(s,"address."+o):null)||(o?e.default(s,o):null)}}function n(i){i.zip=t("postalCode","zip"),i.country=t("country"),i.street=t("street"),i.state=t("state"),i.city=t("city"),i.region=t("region")}return Kp.default=n,Kp}var ny={},Nk;function R9(){if(Nk)return ny;Nk=1,Object.defineProperty(ny,"__esModule",{value:!0}),ny.clone=void 0;function r(e){if(typeof e!="object")return e;if(Object.prototype.toString.call(e)==="[object Object]"){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=r(e[n]));return t}else return Array.isArray(e)?e.map(r):e}return ny.clone=r,ny}var Cm={},jk;function I9(){if(jk)return Cm;jk=1,Object.defineProperty(Cm,"__esModule",{value:!0});var r={Salesforce:!0};function e(t){return!r[t]}return Cm.default=e,Cm}var Pm={},Fk;function sN(){if(Fk)return Pm;Fk=1;var r=/^(\d{4})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:([ T])(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;return Pm.parse=function(e){var t=[1,5,6,7,11,12],n=r.exec(e),i=0;if(!n)return new Date(e);for(var o=0,a;a=t[o];o++)n[a]=parseInt(n[a],10)||0;n[2]=parseInt(n[2],10)||1,n[3]=parseInt(n[3],10)||1,n[2]--,n[8]=n[8]?(n[8]+"00").substring(0,3):0,n[4]===" "?i=new Date().getTimezoneOffset():n[9]!=="Z"&&n[10]&&(i=n[11]*60+n[12],n[10]==="+"&&(i=0-i));var s=Date.UTC(n[1],n[2],n[3],n[5],n[6]+i,n[7],n[8]);return new Date(s)},Pm.is=function(e,t){return typeof e!="string"||t&&/^\d{4}-\d{2}-\d{2}/.test(e)===!1?!1:r.test(e)},Pm}var Am={},Bk;function k9(){if(Bk)return Am;Bk=1;var r=/\d{13}/;return Am.is=function(e){return r.test(e)},Am.parse=function(e){return e=parseInt(e,10),new Date(e)},Am}var Rm={},Uk;function D9(){if(Uk)return Rm;Uk=1;var r=/\d{10}/;return Rm.is=function(e){return r.test(e)},Rm.parse=function(e){var t=parseInt(e,10)*1e3;return new Date(t)},Rm}var Dx,qk;function mT(){if(qk)return Dx;qk=1;var r=sN(),e=k9(),t=D9(),n=Object.prototype,i=n.toString;function o(u){return i.call(u)==="[object Date]"}function a(u){return i.call(u)==="[object Number]"}Dx=function(l){return o(l)?l:a(l)?new Date(s(l)):r.is(l)?r.parse(l):e.is(l)?e.parse(l):t.is(l)?t.parse(l):new Date(l)};function s(u){return u<315576e5?u*1e3:u}return Dx}var Mx,zk;function M9(){if(zk)return Mx;zk=1;var r=sN();Mx=e;function e(i,o){return o===void 0&&(o=!0),i&&typeof i=="object"?t(i,o):Array.isArray(i)?n(i,o):r.is(i,o)?r.parse(i):i}function t(i,o){return Object.keys(i).forEach(function(a){i[a]=e(i[a],o)}),i}function n(i,o){return i.forEach(function(a,s){i[s]=e(a,o)}),i}return Mx}var Gk;function Qv(){if(Gk)return Ov;Gk=1;var r=Ov&&Ov.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(Ov,"__esModule",{value:!0}),Ov.Facade=void 0;var e=r(A9()),t=R9(),n=r(I9()),i=r(mT()),o=r(Q0()),a=r(M9());function s(c,f){f=f||{},this.raw=t.clone(c),"clone"in f||(f.clone=!0),f.clone&&(c=t.clone(c)),"traverse"in f||(f.traverse=!0),"timestamp"in c?c.timestamp=i.default(c.timestamp):c.timestamp=new Date,f.traverse&&a.default(c),this.opts=f,this.obj=c}Ov.Facade=s;var u=s.prototype;u.proxy=function(c){var f=c.split(".");c=f.shift();var h=this[c]||this.obj[c];return h&&(typeof h=="function"&&(h=h.call(this)||{}),f.length===0?this.opts.clone?l(h):h:(h=o.default(h,f.join(".")),this.opts.clone?l(h):h))},u.field=function(c){var f=this.obj[c];return this.opts.clone?l(f):f},s.proxy=function(c){return function(){return this.proxy(c)}},s.field=function(c){return function(){return this.field(c)}},s.multi=function(c){return function(){var f=this.proxy(c+"s");if(Array.isArray(f))return f;var h=this.proxy(c);return h&&(h=[this.opts.clone?t.clone(h):h]),h||[]}},s.one=function(c){return function(){var f=this.proxy(c);if(f)return f;var h=this.proxy(c+"s");if(Array.isArray(h))return h[0]}},u.json=function(){var c=this.opts.clone?t.clone(this.obj):this.obj;return this.type&&(c.type=this.type()),c},u.rawEvent=function(){return this.raw},u.options=function(c){var f=this.obj.options||this.obj.context||{},h=this.opts.clone?t.clone(f):f;if(!c)return h;if(this.enabled(c)){var d=this.integrations(),v=d[c]||o.default(d,c);return typeof v!="object"&&(v=o.default(this.options(),c)),typeof v=="object"?v:{}}},u.context=u.options,u.enabled=function(c){var f=this.proxy("options.providers.all");typeof f!="boolean"&&(f=this.proxy("options.all")),typeof f!="boolean"&&(f=this.proxy("integrations.all")),typeof f!="boolean"&&(f=!0);var h=f&&n.default(c),d=this.integrations();if(d.providers&&d.providers.hasOwnProperty(c)&&(h=d.providers[c]),d.hasOwnProperty(c)){var v=d[c];typeof v=="boolean"?h=v:h=!0}return!!h},u.integrations=function(){return this.obj.integrations||this.proxy("options.providers")||this.options()},u.active=function(){var c=this.proxy("options.active");return c==null&&(c=!0),c},u.anonymousId=function(){return this.field("anonymousId")||this.field("sessionId")},u.sessionId=u.anonymousId,u.groupId=s.proxy("options.groupId"),u.traits=function(c){var f=this.proxy("options.traits")||{},h=this.userId();c=c||{},h&&(f.id=h);for(var d in c)if(Object.prototype.hasOwnProperty.call(c,d)){var v=this[d]==null?this.proxy("options.traits."+d):this[d]();if(v==null)continue;f[c[d]]=v,delete f[d]}return f},u.library=function(){var c=this.proxy("options.library");return c?typeof c=="string"?{name:c,version:null}:c:{name:"unknown",version:null}},u.device=function(){var c=this.proxy("context.device");(typeof c!="object"||c===null)&&(c={});var f=this.library().name;return c.type||(f.indexOf("ios")>-1&&(c.type="ios"),f.indexOf("android")>-1&&(c.type="android")),c},u.userAgent=s.proxy("context.userAgent"),u.timezone=s.proxy("context.timezone"),u.timestamp=s.field("timestamp"),u.channel=s.field("channel"),u.ip=s.proxy("context.ip"),u.userId=s.field("userId"),e.default(u);function l(c){return t.clone(c)}return Ov}var xv={},Im={exports:{}},Vk;function Jv(){return Vk||(Vk=1,typeof Object.create=="function"?Im.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Im.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}),Im.exports}var Wk;function L9(){if(Wk)return xv;Wk=1;var r=xv&&xv.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(xv,"__esModule",{value:!0}),xv.Alias=void 0;var e=r(Jv()),t=Qv();function n(i,o){t.Facade.call(this,i,o)}return xv.Alias=n,e.default(n,t.Facade),n.prototype.action=function(){return"alias"},n.prototype.type=n.prototype.action,n.prototype.previousId=function(){return this.field("previousId")||this.field("from")},n.prototype.from=n.prototype.previousId,n.prototype.userId=function(){return this.field("userId")||this.field("to")},n.prototype.to=n.prototype.userId,xv}var Sv={},km={},Hk;function J0(){if(Hk)return km;Hk=1,Object.defineProperty(km,"__esModule",{value:!0});var r=/.+\@.+\..+/;function e(t){return r.test(t)}return km.default=e,km}var Yk;function N9(){if(Yk)return Sv;Yk=1;var r=Sv&&Sv.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Sv,"__esModule",{value:!0}),Sv.Group=void 0;var e=r(Jv()),t=r(J0()),n=r(mT()),i=Qv();function o(s,u){i.Facade.call(this,s,u)}Sv.Group=o,e.default(o,i.Facade);var a=o.prototype;return a.action=function(){return"group"},a.type=a.action,a.groupId=i.Facade.field("groupId"),a.created=function(){var s=this.proxy("traits.createdAt")||this.proxy("traits.created")||this.proxy("properties.createdAt")||this.proxy("properties.created");if(s)return n.default(s)},a.email=function(){var s=this.proxy("traits.email");if(s)return s;var u=this.groupId();if(t.default(u))return u},a.traits=function(s){var u=this.properties(),l=this.groupId();s=s||{},l&&(u.id=l);for(var c in s)if(Object.prototype.hasOwnProperty.call(s,c)){var f=this[c]==null?this.proxy("traits."+c):this[c]();if(f==null)continue;u[s[c]]=f,delete u[c]}return u},a.name=i.Facade.proxy("traits.name"),a.industry=i.Facade.proxy("traits.industry"),a.employees=i.Facade.proxy("traits.employees"),a.properties=function(){return this.field("traits")||this.field("properties")||{}},Sv}var Tv={},Xk;function uN(){if(Xk)return Tv;Xk=1;var r=Tv&&Tv.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Tv,"__esModule",{value:!0}),Tv.Identify=void 0;var e=Qv(),t=r(Q0()),n=r(Jv()),i=r(J0()),o=r(mT()),a=function(l){return l.trim()};function s(l,c){e.Facade.call(this,l,c)}Tv.Identify=s,n.default(s,e.Facade);var u=s.prototype;return u.action=function(){return"identify"},u.type=u.action,u.traits=function(l){var c=this.field("traits")||{},f=this.userId();l=l||{},f&&(c.id=f);for(var h in l){var d=this[h]==null?this.proxy("traits."+h):this[h]();d!=null&&(c[l[h]]=d,h!==l[h]&&delete c[h])}return c},u.email=function(){var l=this.proxy("traits.email");if(l)return l;var c=this.userId();if(i.default(c))return c},u.created=function(){var l=this.proxy("traits.created")||this.proxy("traits.createdAt");if(l)return o.default(l)},u.companyCreated=function(){var l=this.proxy("traits.company.created")||this.proxy("traits.company.createdAt");if(l)return o.default(l)},u.companyName=function(){return this.proxy("traits.company.name")},u.name=function(){var l=this.proxy("traits.name");if(typeof l=="string")return a(l);var c=this.firstName(),f=this.lastName();if(c&&f)return a(c+" "+f)},u.firstName=function(){var l=this.proxy("traits.firstName");if(typeof l=="string")return a(l);var c=this.proxy("traits.name");if(typeof c=="string")return a(c).split(" ")[0]},u.lastName=function(){var l=this.proxy("traits.lastName");if(typeof l=="string")return a(l);var c=this.proxy("traits.name");if(typeof c=="string"){var f=a(c).indexOf(" ");if(f!==-1)return a(c.substr(f+1))}},u.uid=function(){return this.userId()||this.username()||this.email()},u.description=function(){return this.proxy("traits.description")||this.proxy("traits.background")},u.age=function(){var l=this.birthday(),c=t.default(this.traits(),"age");if(c!=null)return c;if(l instanceof Date){var f=new Date;return f.getFullYear()-l.getFullYear()}},u.avatar=function(){var l=this.traits();return t.default(l,"avatar")||t.default(l,"photoUrl")||t.default(l,"avatarUrl")},u.position=function(){var l=this.traits();return t.default(l,"position")||t.default(l,"jobTitle")},u.username=e.Facade.proxy("traits.username"),u.website=e.Facade.one("traits.website"),u.websites=e.Facade.multi("traits.website"),u.phone=e.Facade.one("traits.phone"),u.phones=e.Facade.multi("traits.phone"),u.address=e.Facade.proxy("traits.address"),u.gender=e.Facade.proxy("traits.gender"),u.birthday=e.Facade.proxy("traits.birthday"),Tv}var Cv={},$k;function bT(){if($k)return Cv;$k=1;var r=Cv&&Cv.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Cv,"__esModule",{value:!0}),Cv.Track=void 0;var e=r(Jv()),t=Qv(),n=uN(),i=r(J0()),o=r(Q0());function a(l,c){t.Facade.call(this,l,c)}Cv.Track=a,e.default(a,t.Facade);var s=a.prototype;s.action=function(){return"track"},s.type=s.action,s.event=t.Facade.field("event"),s.value=t.Facade.proxy("properties.value"),s.category=t.Facade.proxy("properties.category"),s.id=t.Facade.proxy("properties.id"),s.productId=function(){return this.proxy("properties.product_id")||this.proxy("properties.productId")},s.promotionId=function(){return this.proxy("properties.promotion_id")||this.proxy("properties.promotionId")},s.cartId=function(){return this.proxy("properties.cart_id")||this.proxy("properties.cartId")},s.checkoutId=function(){return this.proxy("properties.checkout_id")||this.proxy("properties.checkoutId")},s.paymentId=function(){return this.proxy("properties.payment_id")||this.proxy("properties.paymentId")},s.couponId=function(){return this.proxy("properties.coupon_id")||this.proxy("properties.couponId")},s.wishlistId=function(){return this.proxy("properties.wishlist_id")||this.proxy("properties.wishlistId")},s.reviewId=function(){return this.proxy("properties.review_id")||this.proxy("properties.reviewId")},s.orderId=function(){return this.proxy("properties.id")||this.proxy("properties.order_id")||this.proxy("properties.orderId")},s.sku=t.Facade.proxy("properties.sku"),s.tax=t.Facade.proxy("properties.tax"),s.name=t.Facade.proxy("properties.name"),s.price=t.Facade.proxy("properties.price"),s.total=t.Facade.proxy("properties.total"),s.repeat=t.Facade.proxy("properties.repeat"),s.coupon=t.Facade.proxy("properties.coupon"),s.shipping=t.Facade.proxy("properties.shipping"),s.discount=t.Facade.proxy("properties.discount"),s.shippingMethod=function(){return this.proxy("properties.shipping_method")||this.proxy("properties.shippingMethod")},s.paymentMethod=function(){return this.proxy("properties.payment_method")||this.proxy("properties.paymentMethod")},s.description=t.Facade.proxy("properties.description"),s.plan=t.Facade.proxy("properties.plan"),s.subtotal=function(){var l=o.default(this.properties(),"subtotal"),c=this.total()||this.revenue();if(l)return l;if(!c)return 0;if(this.total()){var f=this.tax();f&&(c-=f),f=this.shipping(),f&&(c-=f),f=this.discount(),f&&(c+=f)}return c},s.products=function(){var l=this.properties(),c=o.default(l,"products");return Array.isArray(c)?c.filter(function(f){return f!==null}):[]},s.quantity=function(){var l=this.obj.properties||{};return l.quantity||1},s.currency=function(){var l=this.obj.properties||{};return l.currency||"USD"},s.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")},s.query=t.Facade.proxy("options.query"),s.properties=function(l){var c=this.field("properties")||{};l=l||{};for(var f in l)if(Object.prototype.hasOwnProperty.call(l,f)){var h=this[f]==null?this.proxy("properties."+f):this[f]();if(h==null)continue;c[l[f]]=h,delete c[f]}return c},s.username=function(){return this.proxy("traits.username")||this.proxy("properties.username")||this.userId()||this.sessionId()},s.email=function(){var l=this.proxy("traits.email")||this.proxy("properties.email")||this.proxy("options.traits.email");if(l)return l;var c=this.userId();if(i.default(c))return c},s.revenue=function(){var l=this.proxy("properties.revenue"),c=this.event(),f=/^[ _]?completed[ _]?order[ _]?|^[ _]?order[ _]?completed[ _]?$/i;return!l&&c&&c.match(f)&&(l=this.proxy("properties.total")),u(l)},s.cents=function(){var l=this.revenue();return typeof l!="number"?this.value()||0:l*100},s.identify=function(){var l=this.json();return l.traits=this.traits(),new n.Identify(l,this.opts)};function u(l){if(l){if(typeof l=="number")return l;if(typeof l=="string"&&(l=l.replace(/\$/g,""),l=parseFloat(l),!isNaN(l)))return l}}return Cv}var Pv={},Kk;function lN(){if(Kk)return Pv;Kk=1;var r=Pv&&Pv.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Pv,"__esModule",{value:!0}),Pv.Page=void 0;var e=r(Jv()),t=Qv(),n=bT(),i=r(J0());function o(s,u){t.Facade.call(this,s,u)}Pv.Page=o,e.default(o,t.Facade);var a=o.prototype;return a.action=function(){return"page"},a.type=a.action,a.category=t.Facade.field("category"),a.name=t.Facade.field("name"),a.title=t.Facade.proxy("properties.title"),a.path=t.Facade.proxy("properties.path"),a.url=t.Facade.proxy("properties.url"),a.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")},a.properties=function(s){var u=this.field("properties")||{},l=this.category(),c=this.name();s=s||{},l&&(u.category=l),c&&(u.name=c);for(var f in s)if(Object.prototype.hasOwnProperty.call(s,f)){var h=this[f]==null?this.proxy("properties."+f):this[f]();if(h==null)continue;u[s[f]]=h,f!==s[f]&&delete u[f]}return u},a.email=function(){var s=this.proxy("context.traits.email")||this.proxy("properties.email");if(s)return s;var u=this.userId();if(i.default(u))return u},a.fullName=function(){var s=this.category(),u=this.name();return u&&s?s+" "+u:u},a.event=function(s){return s?"Viewed "+s+" Page":"Loaded a Page"},a.track=function(s){var u=this.json();return u.event=this.event(s),u.timestamp=this.timestamp(),u.properties=this.properties(),new n.Track(u,this.opts)},Pv}var Av={},Zk;function j9(){if(Zk)return Av;Zk=1;var r=Av&&Av.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Av,"__esModule",{value:!0}),Av.Screen=void 0;var e=r(Jv()),t=lN(),n=bT();function i(o,a){t.Page.call(this,o,a)}return Av.Screen=i,e.default(i,t.Page),i.prototype.action=function(){return"screen"},i.prototype.type=i.prototype.action,i.prototype.event=function(o){return o?"Viewed "+o+" Screen":"Loaded a Screen"},i.prototype.track=function(o){var a=this.json();return a.event=this.event(o),a.timestamp=this.timestamp(),a.properties=this.properties(),new n.Track(a,this.opts)},Av}var Rv={},Qk;function F9(){if(Qk)return Rv;Qk=1;var r=Rv&&Rv.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Rv,"__esModule",{value:!0}),Rv.Delete=void 0;var e=r(Jv()),t=Qv();function n(i,o){t.Facade.call(this,i,o)}return Rv.Delete=n,e.default(n,t.Facade),n.prototype.type=function(){return"delete"},Rv}var Jk;function B9(){return Jk||(Jk=1,function(r){var e=ry&&ry.__assign||function(){return e=Object.assign||function(c){for(var f,h=1,d=arguments.length;h<d;h++){f=arguments[h];for(var v in f)Object.prototype.hasOwnProperty.call(f,v)&&(c[v]=f[v])}return c},e.apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0}),r.Delete=r.Screen=r.Page=r.Track=r.Identify=r.Group=r.Alias=r.Facade=void 0;var t=Qv();Object.defineProperty(r,"Facade",{enumerable:!0,get:function(){return t.Facade}});var n=L9();Object.defineProperty(r,"Alias",{enumerable:!0,get:function(){return n.Alias}});var i=N9();Object.defineProperty(r,"Group",{enumerable:!0,get:function(){return i.Group}});var o=uN();Object.defineProperty(r,"Identify",{enumerable:!0,get:function(){return o.Identify}});var a=bT();Object.defineProperty(r,"Track",{enumerable:!0,get:function(){return a.Track}});var s=lN();Object.defineProperty(r,"Page",{enumerable:!0,get:function(){return s.Page}});var u=j9();Object.defineProperty(r,"Screen",{enumerable:!0,get:function(){return u.Screen}});var l=F9();Object.defineProperty(r,"Delete",{enumerable:!0,get:function(){return l.Delete}}),r.default=e(e({},t.Facade),{Alias:n.Alias,Group:i.Group,Identify:o.Identify,Track:a.Track,Page:s.Page,Screen:u.Screen,Delete:l.Delete})}(ry)),ry}var Iv=B9();function p0(r,e){var t=new Iv.Facade(r,e);return r.type==="track"&&(t=new Iv.Track(r,e)),r.type==="identify"&&(t=new Iv.Identify(r,e)),r.type==="page"&&(t=new Iv.Page(r,e)),r.type==="alias"&&(t=new Iv.Alias(r,e)),r.type==="group"&&(t=new Iv.Group(r,e)),r.type==="screen"&&(t=new Iv.Screen(r,e)),Object.defineProperty(t,"obj",{value:r,writable:!0}),t}var U9=function(r){var e=!1;window.addEventListener("pagehide",function(){e||(e=!0,r(e))}),document.addEventListener("visibilitychange",function(){if(document.visibilityState=="hidden"){if(e)return;e=!0}else e=!1;r(e)})},cN=function(r){Hs(e,r);function e(t,n){var i=r.call(this,t)||this;return i.retryTimeout=n,i.name="RateLimitError",i}return e}(Error),fN=function(r){return Mt({"Content-Type":"text/plain"},typeof r=="function"?r():r)},q9=500,z9=64;function _T(r){var e=encodeURI(JSON.stringify(r)).split(/%..|./).length-1;return e/1024}function G9(r){return _T(r)>=q9-50}function V9(r){return _T(r)>=z9-10}function W9(r){var e=[],t=0;return r.forEach(function(n){var i=_T(e[t]);i>=64&&t++,e[t]?e[t].push(n):e[t]=[n]}),e}function H9(r,e){var t,n,i=[],o=!1,a=(t=e==null?void 0:e.size)!==null&&t!==void 0?t:10,s=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:5e3,u=0;function l(v){var g;if(v.length!==0){var _=(g=v[0])===null||g===void 0?void 0:g.writeKey,y=v.map(function(p){var m=p;m.sentAt;var E=qL(m,["sentAt"]);return E});return $0("https://".concat(r,"/b"),{credentials:e==null?void 0:e.credentials,keepalive:(e==null?void 0:e.keepalive)||o,headers:fN(e==null?void 0:e.headers),method:"post",body:JSON.stringify({writeKey:_,batch:y,sentAt:new Date().toISOString()}),priority:e==null?void 0:e.priority}).then(function(p){var m;if(p.status>=500)throw new Error("Bad response from server: ".concat(p.status));if(p.status===429){var E=(m=p.headers)===null||m===void 0?void 0:m.get("x-ratelimit-reset"),C=typeof E=="string"?parseInt(E)*1e3:s;throw new cN("Rate limit exceeded: ".concat(p.status),C)}})}}function c(v){var g;return v===void 0&&(v=1),fr(this,void 0,void 0,function(){var _;return hr(this,function(y){return i.length?(_=i,i=[],[2,(g=l(_))===null||g===void 0?void 0:g.catch(function(p){var m,E=nh.system();E.log("error","Error sending batch",p),v<=((m=e==null?void 0:e.maxRetries)!==null&&m!==void 0?m:10)&&(p.name==="RateLimitError"&&(u=p.retryTimeout),i.push.apply(i,_),i.map(function(C){if("_metadata"in C){var P=C;P._metadata=Mt(Mt({},P._metadata),{retryCount:v})}}),h(v+1))})]):[2]})})}var f;function h(v){v===void 0&&(v=1),!f&&(f=setTimeout(function(){f=void 0,c(v).catch(console.error)},u||s),u=0)}U9(function(v){if(o=v,o&&i.length){var g=W9(i).map(l);Promise.all(g).catch(console.error)}});function d(v,g){return fr(this,void 0,void 0,function(){var _;return hr(this,function(y){return i.push(g),_=i.length>=a||G9(i)||(e==null?void 0:e.keepalive)&&V9(i),[2,_||o?c():h()]})})}return{dispatch:d}}function Y9(r){function e(t,n){return $0(t,{credentials:r==null?void 0:r.credentials,keepalive:r==null?void 0:r.keepalive,headers:fN(r==null?void 0:r.headers),method:"post",body:JSON.stringify(n),priority:r==null?void 0:r.priority}).then(function(i){var o;if(i.status>=500)throw new Error("Bad response from server: ".concat(i.status));if(i.status===429){var a=(o=i.headers)===null||o===void 0?void 0:o.get("x-ratelimit-reset"),s=a?parseInt(a)*1e3:5e3;throw new cN("Rate limit exceeded: ".concat(i.status),s)}})}return{dispatch:e}}function X9(r,e,t,n,i){var o,a=r.user();delete e.options,e.writeKey=t==null?void 0:t.apiKey,e.userId=e.userId||a.id(),e.anonymousId=e.anonymousId||a.anonymousId(),e.sentAt=new Date;var s=r.queue.failedInitializations||[];s.length>0&&(e._metadata={failedInitializations:s}),i!=null&&(i.attempts>1&&(e._metadata=Mt(Mt({},e._metadata),{retryCount:i.attempts})),i.attempts++);var u=[],l=[];for(var c in n){var f=n[c];c==="Segment.io"&&u.push(c),f.bundlingStatus==="bundled"&&u.push(c),f.bundlingStatus==="unbundled"&&l.push(c)}for(var h=0,d=(t==null?void 0:t.unbundledIntegrations)||[];h<d.length;h++){var v=d[h];l.includes(v)||l.push(v)}var g=(o=t==null?void 0:t.maybeBundledConfigIds)!==null&&o!==void 0?o:{},_=[];return u.sort().forEach(function(y){var p;((p=g[y])!==null&&p!==void 0?p:[]).forEach(function(m){_.push(m)})}),(t==null?void 0:t.addBundledMetadata)!==!1&&(e._metadata=Mt(Mt({},e._metadata),{bundled:u.sort(),unbundled:l.sort(),bundledIds:_})),e}var $9=function(r,e){return fr(void 0,void 0,void 0,function(){var t;return hr(this,function(n){return t=function(i){return fr(void 0,void 0,void 0,function(){var o;return hr(this,function(a){switch(a.label){case 0:return r(i)?(o=t,[4,e()]):[3,2];case 1:return[2,o.apply(void 0,[a.sent()])];case 2:return[2]}})})},[2,t(void 0)]})})};function K9(r,e){return fr(this,void 0,void 0,function(){var t,n=this;return hr(this,function(i){switch(i.label){case 0:return t=[],Ry()?[2,e]:[4,$9(function(){return e.length>0&&!Ry()},function(){return fr(n,void 0,void 0,function(){var o,a,s;return hr(this,function(u){switch(u.label){case 0:return o=e.pop(),o?[4,by(o,r)]:[2];case 1:return a=u.sent(),s=a instanceof nh,s||t.push(o),[2]}})})})];case 1:return i.sent(),t.map(function(o){return e.pushWithBackoff(o)}),[2,e]}})})}function Zp(r,e,t,n){var i=this;r||setTimeout(function(){return fr(i,void 0,void 0,function(){var o,a;return hr(this,function(s){switch(s.label){case 0:return o=!0,[4,K9(t,e)];case 1:return a=s.sent(),o=!1,e.todo>0&&n(o,a,t,n),[2]}})})},Math.random()*5e3)}function Z9(r,e){var t,n,i,o,a=r.user();return e.previousId=(i=(n=(t=e.previousId)!==null&&t!==void 0?t:e.from)!==null&&n!==void 0?n:a.id())!==null&&i!==void 0?i:a.anonymousId(),e.userId=(o=e.userId)!==null&&o!==void 0?o:e.to,delete e.from,delete e.to,e}var Q9=function(r){return r.name==="Segment.io"};function J9(r,e,t){var n,i,o;window.addEventListener("pagehide",function(){s.push.apply(s,Array.from(u)),u.clear()});var a=(n=e==null?void 0:e.apiKey)!==null&&n!==void 0?n:"",s=r.options.disableClientPersistence?new cT(r.queue.queue.maxAttempts,[]):new vT(r.queue.queue.maxAttempts,"".concat(a,":dest-Segment.io")),u=new Set,l=!1,c=(i=e==null?void 0:e.apiHost)!==null&&i!==void 0?i:WL,f=(o=e==null?void 0:e.protocol)!==null&&o!==void 0?o:"https",h="".concat(f,"://").concat(c),d=e==null?void 0:e.deliveryStrategy,v=d&&"strategy"in d&&d.strategy==="batching"?H9(c,d.config):Y9(d==null?void 0:d.config);function g(y){return fr(this,void 0,void 0,function(){var p,m;return hr(this,function(E){return Ry()?(s.push(y),Zp(l,s,_,Zp),[2,y]):(u.add(y),p=y.event.type.charAt(0),m=p0(y.event).json(),y.event.type==="track"&&delete m.traits,y.event.type==="alias"&&(m=Z9(r,m)),s.getAttempts(y)>=s.maxAttempts?(u.delete(y),[2,y]):[2,v.dispatch("".concat(h,"/").concat(p),X9(r,m,e,t,y)).then(function(){return y}).catch(function(C){if(y.log("error","Error sending event",C),C.name==="RateLimitError"){var P=C.retryTimeout;s.pushWithBackoff(y,P)}else s.pushWithBackoff(y);return Zp(l,s,_,Zp),y}).finally(function(){u.delete(y)})])})})}var _={metadata:{writeKey:a,apiHost:c,protocol:f},name:"Segment.io",type:"destination",version:"0.1.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:g,identify:g,page:g,alias:g,group:g,screen:g};return s.todo&&Zp(l,s,_,Zp),_}var id="This is being deprecated and will be not be available in future releases of Analytics JS",Lx=dT(),Nx=Lx==null?void 0:Lx.analytics;function eG(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var n=e?10:1,i=t?new cT(n,[]):new vT(n,r);return new f9(i)}var tG=function(){function r(e,t){var n;this.timeout=300,this._getSegmentPluginMetadata=function(){var o;return(o=t.plugins.find(Q9))===null||o===void 0?void 0:o.metadata},this.writeKey=e.writeKey;var i={integrations:{"Segment.io":{apiKey:""}}};this.cdnSettings=(n=e.cdnSettings)!==null&&n!==void 0?n:i,this.cdnURL=e.cdnURL}return Object.defineProperty(r.prototype,"apiHost",{get:function(){var e,t;return(t=(e=this._getSegmentPluginMetadata)===null||e===void 0?void 0:e.call(this))===null||t===void 0?void 0:t.apiHost},enumerable:!1,configurable:!0}),r}();function Yc(){console.warn(id)}var hN=function(r){Hs(e,r);function e(t,n,i,o,a){var s=this,u,l;s=r.call(this)||this,s._debug=!1,s.initialized=!1,s.user=function(){return s._user},s.init=s.initialize.bind(s),s.log=Yc,s.addIntegrationMiddleware=Yc,s.listeners=Yc,s.addEventListener=Yc,s.removeAllListeners=Yc,s.removeListener=Yc,s.removeEventListener=Yc,s.hasListeners=Yc,s.add=Yc,s.addIntegration=Yc;var c=n==null?void 0:n.cookie,f=(u=n==null?void 0:n.disableClientPersistence)!==null&&u!==void 0?u:!1;s.queue=i??eG("".concat(t.writeKey,":event-queue"),n==null?void 0:n.retryQueue,f),s.settings=new tG(t,s.queue);var h=n==null?void 0:n.storage;return s._universalStorage=s.createStore(f,h,c),s._user=o??new nN(Mt({persist:!f,storage:n==null?void 0:n.storage},n==null?void 0:n.user),c).load(),s._group=a??new m9(Mt({persist:!f,storage:n==null?void 0:n.storage},n==null?void 0:n.group),c).load(),s.eventFactory=new a9(s._user),s.integrations=(l=n==null?void 0:n.integrations)!==null&&l!==void 0?l:{},s.options=n??{},pT(s),s}return e.prototype.createStore=function(t,n,i){return t?new Bv([new gT]):n&&tN(n)?new Bv(dS(rN(n.stores,i))):new Bv(dS([zs.LocalStorage,{name:zs.Cookie,settings:i},zs.Memory]))},Object.defineProperty(e.prototype,"storage",{get:function(){return this._universalStorage},enumerable:!1,configurable:!0}),e.prototype.track=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return fr(this,void 0,void 0,function(){var i,o,a,s,u,l,c,f=this;return hr(this,function(h){return i=$p(t),o=Hz.apply(void 0,t),a=o[0],s=o[1],u=o[2],l=o[3],c=this.eventFactory.track(a,s,u,this.integrations,i),[2,this._dispatch(c,l).then(function(d){return f.emit("track",a,d.event.properties,d.event.options),d})]})})},e.prototype.page=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return fr(this,void 0,void 0,function(){var i,o,a,s,u,l,c,f,h=this;return hr(this,function(d){return i=$p(t),o=Rk.apply(void 0,t),a=o[0],s=o[1],u=o[2],l=o[3],c=o[4],f=this.eventFactory.page(a,s,u,l,this.integrations,i),[2,this._dispatch(f,c).then(function(v){return h.emit("page",a,s,v.event.properties,v.event.options),v})]})})},e.prototype.identify=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return fr(this,void 0,void 0,function(){var i,o,a,s,u,l,c,f=this;return hr(this,function(h){return i=$p(t),o=Ik(this._user).apply(void 0,t),a=o[0],s=o[1],u=o[2],l=o[3],this._user.identify(a,s),c=this.eventFactory.identify(this._user.id(),this._user.traits(),u,this.integrations,i),[2,this._dispatch(c,l).then(function(d){return f.emit("identify",d.event.userId,d.event.traits,d.event.options),d})]})})},e.prototype.group=function(){for(var t=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=$p(n);if(n.length===0)return this._group;var a=Ik(this._group).apply(void 0,n),s=a[0],u=a[1],l=a[2],c=a[3];this._group.identify(s,u);var f=this._group.id(),h=this._group.traits(),d=this.eventFactory.group(f,h,l,this.integrations,o);return this._dispatch(d,c).then(function(v){return t.emit("group",v.event.groupId,v.event.traits,v.event.options),v})},e.prototype.alias=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return fr(this,void 0,void 0,function(){var i,o,a,s,u,l,c,f=this;return hr(this,function(h){return i=$p(t),o=Yz.apply(void 0,t),a=o[0],s=o[1],u=o[2],l=o[3],c=this.eventFactory.alias(a,s,u,this.integrations,i),[2,this._dispatch(c,l).then(function(d){return f.emit("alias",a,s,d.event.options),d})]})})},e.prototype.screen=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return fr(this,void 0,void 0,function(){var i,o,a,s,u,l,c,f,h=this;return hr(this,function(d){return i=$p(t),o=Rk.apply(void 0,t),a=o[0],s=o[1],u=o[2],l=o[3],c=o[4],f=this.eventFactory.screen(a,s,u,l,this.integrations,i),[2,this._dispatch(f,c).then(function(v){return h.emit("screen",a,s,v.event.properties,v.event.options),v})]})})},e.prototype.trackClick=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return fr(this,void 0,void 0,function(){var i,o;return hr(this,function(a){switch(a.label){case 0:return[4,Ql(()=>import("./auto-track-By5Vxvy7.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))];case 1:return i=a.sent(),[2,(o=i.link).call.apply(o,jo([this],t,!1))]}})})},e.prototype.trackLink=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return fr(this,void 0,void 0,function(){var i,o;return hr(this,function(a){switch(a.label){case 0:return[4,Ql(()=>import("./auto-track-By5Vxvy7.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))];case 1:return i=a.sent(),[2,(o=i.link).call.apply(o,jo([this],t,!1))]}})})},e.prototype.trackSubmit=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return fr(this,void 0,void 0,function(){var i,o;return hr(this,function(a){switch(a.label){case 0:return[4,Ql(()=>import("./auto-track-By5Vxvy7.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))];case 1:return i=a.sent(),[2,(o=i.form).call.apply(o,jo([this],t,!1))]}})})},e.prototype.trackForm=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return fr(this,void 0,void 0,function(){var i,o;return hr(this,function(a){switch(a.label){case 0:return[4,Ql(()=>import("./auto-track-By5Vxvy7.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))];case 1:return i=a.sent(),[2,(o=i.form).call.apply(o,jo([this],t,!1))]}})})},e.prototype.register=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return fr(this,void 0,void 0,function(){var i,o,a=this;return hr(this,function(s){switch(s.label){case 0:return i=nh.system(),o=t.map(function(u){return a.queue.register(i,u,a)}),[4,Promise.all(o)];case 1:return s.sent(),[2,i]}})})},e.prototype.deregister=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return fr(this,void 0,void 0,function(){var i,o,a=this;return hr(this,function(s){switch(s.label){case 0:return i=nh.system(),o=t.map(function(u){var l=a.queue.plugins.find(function(c){return c.name===u});if(l)return a.queue.deregister(i,l,a);i.log("warn","plugin ".concat(u," not found"))}),[4,Promise.all(o)];case 1:return s.sent(),[2,i]}})})},e.prototype.debug=function(t){return t===!1&&localStorage.getItem("debug")&&localStorage.removeItem("debug"),this._debug=t,this},e.prototype.reset=function(){this._user.reset(),this._group.reset(),this.emit("reset")},e.prototype.timeout=function(t){this.settings.timeout=t},e.prototype._dispatch=function(t,n){return fr(this,void 0,void 0,function(){var i;return hr(this,function(o){return i=new nh(t),i.stats.increment("analytics_js.invoke",1,[t.type]),Ry()&&!this.options.retryQueue?[2,i]:[2,Wz(i,this.queue,this,{callback:n,debug:this._debug,timeout:this.settings.timeout})]})})},e.prototype.addSourceMiddleware=function(t){return fr(this,void 0,void 0,function(){var n=this;return hr(this,function(i){switch(i.label){case 0:return[4,this.queue.criticalTasks.run(function(){return fr(n,void 0,void 0,function(){var o,a,s;return hr(this,function(u){switch(u.label){case 0:return[4,Ql(()=>Promise.resolve().then(()=>mG),void 0)];case 1:return o=u.sent().sourceMiddlewarePlugin,a={},this.queue.plugins.forEach(function(l){if(l.type==="destination")return a[l.name]=!0}),s=o(t,a),[4,this.register(s)];case 2:return u.sent(),[2]}})})})];case 1:return i.sent(),[2,this]}})})},e.prototype.addDestinationMiddleware=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return this.queue.plugins.filter(s9).forEach(function(o){(t==="*"||o.name.toLowerCase()===t.toLowerCase())&&o.addMiddleware.apply(o,n)}),Promise.resolve(this)},e.prototype.setAnonymousId=function(t){return this._user.anonymousId(t)},e.prototype.queryString=function(t){return fr(this,void 0,void 0,function(){var n;return hr(this,function(i){switch(i.label){case 0:return this.options.useQueryString===!1?[2,[]]:[4,Ql(()=>import("./index-BhY6JVa1.js"),__vite__mapDeps([10,1,2,3,4,5,6,7,8,9]))];case 1:return n=i.sent().queryString,[2,n(this,t)]}})})},e.prototype.use=function(t){return t(this),this},e.prototype.ready=function(t){return t===void 0&&(t=function(n){return n}),fr(this,void 0,void 0,function(){return hr(this,function(n){return[2,Promise.all(this.queue.plugins.map(function(i){return i.ready?i.ready():Promise.resolve()})).then(function(i){return t(i),i})]})})},e.prototype.noConflict=function(){return console.warn(id),_9(Nx??this),this},e.prototype.normalize=function(t){return console.warn(id),this.eventFactory.normalize(t)},Object.defineProperty(e.prototype,"failedInitializations",{get:function(){return console.warn(id),this.queue.failedInitializations},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"VERSION",{get:function(){return K0},enumerable:!1,configurable:!0}),e.prototype.initialize=function(t,n){return fr(this,void 0,void 0,function(){return hr(this,function(i){return console.warn(id),[2,Promise.resolve(this)]})})},e.prototype.pageview=function(t){return fr(this,void 0,void 0,function(){return hr(this,function(n){switch(n.label){case 0:return console.warn(id),[4,this.page({path:t})];case 1:return n.sent(),[2,this]}})})},Object.defineProperty(e.prototype,"plugins",{get:function(){var t;return console.warn(id),(t=this._plugins)!==null&&t!==void 0?t:{}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Integrations",{get:function(){console.warn(id);var t=this.queue.plugins.filter(function(n){return n.type==="destination"}).reduce(function(n,i){var o="".concat(i.name.toLowerCase().replace(".","").split(" ").join("-"),"Integration"),a=window[o];if(!a)return n;var s=a.Integration;return s?(n[i.name]=s,n):(n[i.name]=a,n)},{});return t},enumerable:!1,configurable:!0}),e.prototype.push=function(t){var n=this,i=t.shift();i&&!n[i]||n[i].apply(this,t)},e}(lT),eD=function(r){Hs(e,r);function e(){var t=r.call(this,{writeKey:""},{disableClientPersistence:!0})||this;return t.initialized=!0,t}return e}(hN),tD={};function dN(){return typeof process>"u"||!tD?{}:tD}var rG=/(https:\/\/.*)\/analytics\.js\/v1\/(?:.*?)\/(?:platform|analytics.*)?/,nG=function(){var r,e=Array.prototype.slice.call(document.querySelectorAll("script"));return e.forEach(function(t){var n,i=(n=t.getAttribute("src"))!==null&&n!==void 0?n:"",o=rG.exec(i);o&&o[1]&&(r=o[1])}),r},Zm,iG=function(){var r,e=Zm??((r=iN())===null||r===void 0?void 0:r._cdn);return e},oG=function(r){var e=iN();e&&(e._cdn=r),Zm=r},wT=function(){var r=iG();if(r)return r;var e=nG();return e||"https://cdn.segment.com"},k7=function(){var r=wT();return"".concat(r,"/next-integrations")};function aG(r,e){var t,n=Object.entries((t=e.integrations)!==null&&t!==void 0?t:{}).reduce(function(i,o){var a,s,u=o[0],l=o[1];return typeof l=="object"?Mt(Mt({},i),(a={},a[u]=l,a)):Mt(Mt({},i),(s={},s[u]={},s))},{});return Object.entries(r.integrations).reduce(function(i,o){var a,s=o[0],u=o[1];return Mt(Mt({},i),(a={},a[s]=Mt(Mt({},u),n[s]),a))},{})}function sG(r){try{return decodeURIComponent(r.replace(/\+/g," "))}catch{return r}}function uG(r){return fr(this,void 0,void 0,function(){var e;return hr(this,function(t){return e=navigator.userAgentData,e?r?[2,e.getHighEntropyValues(r).catch(function(){return e.toJSON()})]:[2,e.toJSON()]:[2,void 0]})})}var iy;function lG(){if(iy)return iy;var r=JL(window.location.href);return iy={expires:31536e6,secure:!1,path:"/"},r&&(iy.domain=r),iy}function cG(r){var e={btid:"dataxu",urid:"millennial-media"};r.startsWith("?")&&(r=r.substring(1)),r=r.replace(/\?/g,"&");for(var t=r.split("&"),n=0,i=t;n<i.length;n++){var o=i[n],a=o.split("="),s=a[0],u=a[1];if(e[s])return{id:u,type:e[s]}}}function fG(r){return r.startsWith("?")&&(r=r.substring(1)),r=r.replace(/\?/g,"&"),r.split("&").reduce(function(e,t){var n=t.split("="),i=n[0],o=n[1],a=o===void 0?"":o;if(i.includes("utm_")&&i.length>4){var s=i.slice(4);s==="campaign"&&(s="name"),e[s]=sG(a)}return e},{})}function hG(){var r=th.get("_ga");if(r&&r.startsWith("amp"))return r}function dG(r,e,t){var n,i=new Bv(t?[]:[new eN(lG())]),o=i.get("s:context.referrer"),a=(n=cG(r))!==null&&n!==void 0?n:o;a&&(e&&(e.referrer=Mt(Mt({},e.referrer),a)),i.set("s:context.referrer",a))}var vG=function(r){try{var e=new URLSearchParams;return Object.entries(r).forEach(function(t){var n=t[0],i=t[1];Array.isArray(i)?i.forEach(function(o){return e.append(n,o)}):e.append(n,i)}),e.toString()}catch{return""}},pG=function(){function r(){var e=this;this.name="Page Enrichment",this.type="before",this.version="0.1.0",this.isLoaded=function(){return!0},this.load=function(t,n){return fr(e,void 0,void 0,function(){var i;return hr(this,function(o){switch(o.label){case 0:this.instance=n,o.label=1;case 1:return o.trys.push([1,3,,4]),i=this,[4,uG(this.instance.options.highEntropyValuesClientHints)];case 2:return i.userAgentData=o.sent(),[3,4];case 3:return o.sent(),[3,4];case 4:return[2,Promise.resolve()]}})})},this.enrich=function(t){var n,i,o=t.event.context,a=o.page.search||"",s=typeof a=="object"?vG(a):a;o.userAgent=navigator.userAgent,o.userAgentData=e.userAgentData;var u=navigator.userLanguage||navigator.language;typeof o.locale>"u"&&typeof u<"u"&&(o.locale=u),(n=o.library)!==null&&n!==void 0||(o.library={name:"analytics.js",version:"".concat("npm:next","-").concat(K0)}),s&&!o.campaign&&(o.campaign=fG(s));var l=hG();l&&(o.amp={id:l}),dG(s,o,(i=e.instance.options.disableClientPersistence)!==null&&i!==void 0?i:!1);try{o.timezone=Intl.DateTimeFormat().resolvedOptions().timeZone}catch{}return t},this.track=this.enrich,this.identify=this.enrich,this.page=this.enrich,this.group=this.enrich,this.alias=this.enrich,this.screen=this.enrich}return r}(),gG=new pG;function vN(r){var e=Array.prototype.slice.call(window.document.querySelectorAll("script"));return e.find(function(t){return t.src===r})}function jx(r,e){var t=vN(r);if(t!==void 0){var n=t==null?void 0:t.getAttribute("status");if(n==="loaded")return Promise.resolve(t);if(n==="loading")return new Promise(function(i,o){t.addEventListener("load",function(){return i(t)}),t.addEventListener("error",function(a){return o(a)})})}return new Promise(function(i,o){var a,s=window.document.createElement("script");s.type="text/javascript",s.src=r,s.async=!0,s.setAttribute("status","loading");for(var u=0,l=Object.entries({});u<l.length;u++){var c=l[u],f=c[0],h=c[1];s.setAttribute(f,h)}s.onload=function(){s.onerror=s.onload=null,s.setAttribute("status","loaded"),i(s)},s.onerror=function(){s.onerror=s.onload=null,s.setAttribute("status","error"),o(new Error("Failed to load ".concat(r)))};var d=window.document.querySelector("script");d?(a=d.parentElement)===null||a===void 0||a.insertBefore(s,d):window.document.head.appendChild(s)})}function D7(r){var e=vN(r);return e!==void 0&&e.remove(),Promise.resolve()}function pN(r,e,t){return fr(this,void 0,void 0,function(){function n(l,c){return fr(this,void 0,void 0,function(){var f,h,d;return hr(this,function(v){switch(v.label){case 0:return f=!1,h=null,[4,c({payload:p0(l,{clone:!0,traverse:!1}),integration:r,next:function(g){f=!0,g===null&&(h=null),g&&(h=g.obj)}})];case 1:return v.sent(),!f&&h!==null&&(h=h,h.integrations=Mt(Mt({},l.integrations),(d={},d[r]=!1,d))),[2,h]}})})}var i,o,a,s,u;return hr(this,function(l){switch(l.label){case 0:i=p0(e,{clone:!0,traverse:!1}).rawEvent(),o=0,a=t,l.label=1;case 1:return o<a.length?(s=a[o],[4,n(i,s)]):[3,4];case 2:if(u=l.sent(),u===null)return[2,null];i=u,l.label=3;case 3:return o++,[3,1];case 4:return[2,i]}})})}function yG(r,e){function t(n){return fr(this,void 0,void 0,function(){var i;return hr(this,function(o){switch(o.label){case 0:return i=!1,[4,r({payload:p0(n.event,{clone:!0,traverse:!1}),integrations:e??{},next:function(a){i=!0,a&&(n.event=a.obj)}})];case 1:if(o.sent(),!i)throw new dg({retry:!1,type:"middleware_cancellation",reason:"Middleware `next` function skipped"});return[2,n]}})})}return{name:"Source Middleware ".concat(r.name),type:"before",version:"0.1.0",isLoaded:function(){return!0},load:function(n){return Promise.resolve(n)},track:t,page:t,screen:t,identify:t,alias:t,group:t}}const mG=Object.freeze(Object.defineProperty({__proto__:null,applyDestinationMiddleware:pN,sourceMiddlewarePlugin:yG},Symbol.toStringTag,{value:"Module"}));function Dm(r,e){var t=e.methodName,n=e.integrationName,i=e.type,o=e.didError,a=o===void 0?!1:o;r.stats.increment("analytics_js.integration.invoke".concat(a?".error":""),1,["method:".concat(t),"integration_name:".concat(n),"type:".concat(i)])}var bG=function(){function r(e,t){this.version="1.0.0",this.alternativeNames=[],this.loadPromise=zL(),this.middleware=[],this.alias=this._createMethod("alias"),this.group=this._createMethod("group"),this.identify=this._createMethod("identify"),this.page=this._createMethod("page"),this.screen=this._createMethod("screen"),this.track=this._createMethod("track"),this.action=t,this.name=e,this.type=t.type,this.alternativeNames.push(t.name)}return r.prototype.addMiddleware=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.type==="destination"&&(e=this.middleware).push.apply(e,t)},r.prototype.transform=function(e){return fr(this,void 0,void 0,function(){var t;return hr(this,function(n){switch(n.label){case 0:return[4,pN(this.name,e.event,this.middleware)];case 1:return t=n.sent(),t===null&&e.cancel(new dg({retry:!1,reason:"dropped by destination middleware"})),[2,new nh(t)]}})})},r.prototype._createMethod=function(e){var t=this;return function(n){return fr(t,void 0,void 0,function(){var i,o;return hr(this,function(a){switch(a.label){case 0:return this.action[e]?(i=n,this.type!=="destination"?[3,2]:[4,this.transform(n)]):[2,n];case 1:i=a.sent(),a.label=2;case 2:return a.trys.push([2,5,,6]),[4,this.ready()];case 3:if(!a.sent())throw new Error("Something prevented the destination from getting ready");return Dm(n,{integrationName:this.action.name,methodName:e,type:"action"}),[4,this.action[e](i)];case 4:return a.sent(),[3,6];case 5:throw o=a.sent(),Dm(n,{integrationName:this.action.name,methodName:e,type:"action",didError:!0}),o;case 6:return[2,n]}})})}},r.prototype.isLoaded=function(){return this.action.isLoaded()},r.prototype.ready=function(){return fr(this,void 0,void 0,function(){return hr(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.loadPromise.promise];case 1:return e.sent(),[2,!0];case 2:return e.sent(),[2,!1];case 3:return[2]}})})},r.prototype.load=function(e,t){return fr(this,void 0,void 0,function(){var n,i,o,a;return hr(this,function(s){switch(s.label){case 0:if(this.loadPromise.isSettled())return[2,this.loadPromise.promise];s.label=1;case 1:return s.trys.push([1,3,,4]),Dm(e,{integrationName:this.action.name,methodName:"load",type:"action"}),n=this.action.load(e,t),o=(i=this.loadPromise).resolve,[4,n];case 2:return o.apply(i,[s.sent()]),[2,n];case 3:throw a=s.sent(),Dm(e,{integrationName:this.action.name,methodName:"load",type:"action",didError:!0}),this.loadPromise.reject(a),a;case 4:return[2]}})})},r.prototype.unload=function(e,t){var n,i;return(i=(n=this.action).unload)===null||i===void 0?void 0:i.call(n,e,t)},r}();function _G(r){if(!Array.isArray(r))throw new Error("Not a valid list of plugins");var e=["load","isLoaded","name","version","type"];return r.forEach(function(t){e.forEach(function(n){var i;if(t[n]===void 0)throw new Error("Plugin: ".concat((i=t.name)!==null&&i!==void 0?i:"unknown"," missing required function ").concat(n))})}),!0}function wG(r,e){var t=r[e.creationName],n=r[e.name];return r.All===!1&&!t&&!n||t===!1||n===!1}function EG(r,e){return fr(this,void 0,void 0,function(){var t,n,i,o,a,s;return hr(this,function(u){switch(u.label){case 0:if(u.trys.push([0,9,,10]),t=new RegExp("https://cdn.segment.(com|build)"),n=wT(),!e)return[3,6];i=r.url.split("/"),o=i[i.length-2],a=r.url.replace(o,btoa(o).replace(/=/g,"")),u.label=1;case 1:return u.trys.push([1,3,,5]),[4,jx(a.replace(t,n))];case 2:return u.sent(),[3,5];case 3:return u.sent(),[4,jx(r.url.replace(t,n))];case 4:return u.sent(),[3,5];case 5:return[3,8];case 6:return[4,jx(r.url.replace(t,n))];case 7:u.sent(),u.label=8;case 8:return typeof window[r.libraryName]=="function"?[2,window[r.libraryName]]:[3,10];case 9:throw s=u.sent(),console.error("Failed to create PluginFactory",r),s;case 10:return[2]}})})}function OG(r,e,t,n,i,o){var a,s,u;return fr(this,void 0,void 0,function(){var l,c,f,h=this;return hr(this,function(d){switch(d.label){case 0:return l=[],c=(s=(a=r.middlewareSettings)===null||a===void 0?void 0:a.routingRules)!==null&&s!==void 0?s:[],f=((u=r.remotePlugins)!==null&&u!==void 0?u:[]).map(function(v){return fr(h,void 0,void 0,function(){var g,_,y,p,m,E,C;return hr(this,function(P){switch(P.label){case 0:if(wG(e,v))return[2];P.label=1;case 1:return P.trys.push([1,6,,7]),_=o==null?void 0:o.find(function(T){var R=T.pluginName;return R===v.name}),_?[3,3]:[4,EG(v,n==null?void 0:n.obfuscate)];case 2:_=P.sent(),P.label=3;case 3:return g=_,g?(y=t[v.name],[4,g(Mt(Mt({},v.settings),y))]):[3,5];case 4:p=P.sent(),m=Array.isArray(p)?p:[p],_G(m),E=c.filter(function(T){return T.destinationName===v.creationName}),m.forEach(function(T){var R=new bG(v.creationName,T);E.length&&i&&R.addMiddleware(i),l.push(R)}),P.label=5;case 5:return[3,7];case 6:return C=P.sent(),console.warn("Failed to load Remote Plugin",C),[3,7];case 7:return[2]}})})}),[4,Promise.all(f)];case 1:return d.sent(),[2,l.filter(Boolean)]}})})}var Fx,rD,xG=dT(),nD=(Fx=(rD=xG).__SEGMENT_INSPECTOR__)!==null&&Fx!==void 0?Fx:rD.__SEGMENT_INSPECTOR__={},SG=function(r){var e;return(e=nD.attach)===null||e===void 0?void 0:e.call(nD,r)};function TG(r,e){return $0("".concat(e,"/v1/projects/").concat(r,"/settings")).then(function(t){return t.ok?t.json():t.text().then(function(n){throw new Error(n)})}).catch(function(t){throw console.error(t.message),t})}function CG(r){return dN().NODE_ENV!=="test"&&Object.keys(r.integrations).length>1}function PG(r){var e,t,n;return dN().NODE_ENV!=="test"&&((n=(t=(e=r.middlewareSettings)===null||e===void 0?void 0:e.routingRules)===null||t===void 0?void 0:t.length)!==null&&n!==void 0?n:0)>0}function AG(r,e){S9(r,e),x9(r,e)}function RG(r,e,t){return fr(this,void 0,void 0,function(){return hr(this,function(n){switch(n.label){case 0:return[4,kG(r,e)];case 1:return n.sent(),T9(r,t),[2]}})})}var IG=function(){var r,e,t=(r=window.location.hash)!==null&&r!==void 0?r:"",n=(e=window.location.search)!==null&&e!==void 0?e:"",i=n.length?n:t.replace(/(?=#).*(?=\?)/,"");return i},kG=function(r,e){return fr(void 0,void 0,void 0,function(){return hr(this,function(t){switch(t.label){case 0:return e.includes("ajs_")?[4,r.queryString(e).catch(console.error)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})};function DG(r,e,t,n,i,o,a){var s,u,l;return i===void 0&&(i=[]),fr(this,void 0,void 0,function(){var c,f,h,d,v,g,_,y,p,m,E,C,P,T,R,D=this;return hr(this,function(L){switch(L.label){case 0:return AG(t,a),c=i==null?void 0:i.filter(function(j){return typeof j=="object"}),f=i==null?void 0:i.filter(function(j){return typeof j=="function"&&typeof j.pluginName=="string"}),PG(e)?[4,Ql(()=>import("./index-7O0TZzl3.js"),[]).then(function(j){return j.tsubMiddleware(e.middlewareSettings.routingRules)})]:[3,2];case 1:return d=L.sent(),[3,3];case 2:d=void 0,L.label=3;case 3:return h=d,CG(e)||o.length>0?[4,Ql(()=>import("./index-OfBFkYGp.js"),__vite__mapDeps([11,12,1,2,3,4,5,6,7,8,9])).then(function(j){return j.ajsDestinations(r,e,t.integrations,n,h,o)})]:[3,5];case 4:return g=L.sent(),[3,6];case 5:g=[],L.label=6;case 6:return v=g,e.legacyVideoPluginsEnabled?[4,Ql(()=>import("./index-CB2qcytV.js"),__vite__mapDeps([13,3,1,4,5,2,6,7,8,9])).then(function(j){return j.loadLegacyVideoPlugins(t)})]:[3,8];case 7:L.sent(),L.label=8;case 8:return!((s=n.plan)===null||s===void 0)&&s.track?[4,Ql(()=>import("./index-BxcM6-TU.js"),__vite__mapDeps([14,12,1,2,3,4,5,6,7,8,9])).then(function(j){var F;return j.schemaFilter((F=n.plan)===null||F===void 0?void 0:F.track,e)})]:[3,10];case 9:return y=L.sent(),[3,11];case 10:y=void 0,L.label=11;case 11:return _=y,p=aG(e,n),[4,OG(e,t.integrations,p,n,h,f).catch(function(){return[]})];case 12:return m=L.sent(),E=jo(jo([gG],v,!0),m,!0),_&&E.push(_),C=((u=n.integrations)===null||u===void 0?void 0:u.All)===!1&&!n.integrations["Segment.io"]||n.integrations&&n.integrations["Segment.io"]===!1,C?[3,14]:(T=(P=E).push,[4,J9(t,p["Segment.io"],e.integrations)]);case 13:T.apply(P,[L.sent()]),L.label=14;case 14:return[4,t.register.apply(t,jo(jo([],E,!1),c,!1))];case 15:return R=L.sent(),[4,O9(t,a)];case 16:return L.sent(),Object.entries((l=e.enabledMiddleware)!==null&&l!==void 0?l:{}).some(function(j){var F=j[1];return F})?[4,Ql(()=>import("./index-CfDfQJGk.js"),__vite__mapDeps([15,1,2,3,4,5,6,7,8,9])).then(function(j){var F=j.remoteMiddlewares;return fr(D,void 0,void 0,function(){var q,W;return hr(this,function(Z){switch(Z.label){case 0:return[4,F(R,e,n.obfuscate)];case 1:return q=Z.sent(),W=q.map(function(Q){return t.addSourceMiddleware(Q)}),[2,Promise.all(W)]}})})})]:[3,18];case 17:L.sent(),L.label=18;case 18:return[4,E9(t,a)];case 19:return L.sent(),[2,R]}})})}function MG(r,e,t){var n,i,o,a,s,u,l,c,f;return e===void 0&&(e={}),fr(this,void 0,void 0,function(){var h,d,v,g,_,y,p,m,E,C,P;return hr(this,function(T){switch(T.label){case 0:return e.disable===!0?[2,[new eD,nh.system()]]:(e.globalAnalyticsKey&&b9(e.globalAnalyticsKey),r.cdnURL&&oG(r.cdnURL),e.initialPageview&&t.add(new vS("page",[])),h=IG(),d=(n=r.cdnURL)!==null&&n!==void 0?n:wT(),(i=r.cdnSettings)!==null&&i!==void 0?(g=i,[3,3]):[3,1]);case 1:return[4,TG(r.writeKey,d)];case 2:g=T.sent(),T.label=3;case 3:return v=g,e.updateCDNSettings&&(v=e.updateCDNSettings(v)),typeof e.disable!="function"?[3,5]:[4,e.disable(v)];case 4:if(_=T.sent(),_)return[2,[new eD,nh.system()]];T.label=5;case 5:return y=(a=(o=v.integrations["Segment.io"])===null||o===void 0?void 0:o.retryQueue)!==null&&a!==void 0?a:!0,e=Mt({retryQueue:y},e),p=new hN(Mt(Mt({},r),{cdnSettings:v,cdnURL:d}),e),SG(p),m=(s=r.plugins)!==null&&s!==void 0?s:[],E=(u=r.classicIntegrations)!==null&&u!==void 0?u:[],C=(l=e.integrations)===null||l===void 0?void 0:l["Segment.io"],HL.initRemoteMetrics(Mt(Mt({},v.metrics),{host:(c=C==null?void 0:C.apiHost)!==null&&c!==void 0?c:(f=v.metrics)===null||f===void 0?void 0:f.host,protocol:C==null?void 0:C.protocol})),[4,DG(r.writeKey,v,p,e,m,E,t)];case 6:return P=T.sent(),p.initialized=!0,p.emit("initialize",r,e),[4,RG(p,h,t)];case 7:return T.sent(),[2,[p,P]]}})})}var LG=function(r){Hs(e,r);function e(){var t=this,n=zL(),i=n.promise,o=n.resolve;return t=r.call(this,function(a){return i.then(function(s){var u=s[0],l=s[1];return MG(u,l,a)})})||this,t._resolveLoadStart=function(a,s){return o([a,s])},t}return e.prototype.load=function(t,n){return n===void 0&&(n={}),this._resolveLoadStart(t,n),this},e.load=function(t,n){return n===void 0&&(n={}),new e().load(t,n)},e.standalone=function(t,n){return e.load({writeKey:t},n).then(function(i){return i[0]})},e}(P9);/*! For license information please see base.mjs.LICENSE.txt */var NG={7991:(r,e)=>{e.byteLength=function(l){var c=s(l),f=c[0],h=c[1];return 3*(f+h)/4-h},e.toByteArray=function(l){var c,f,h=s(l),d=h[0],v=h[1],g=new i(function(p,m,E){return 3*(m+E)/4-E}(0,d,v)),_=0,y=v>0?d-4:d;for(f=0;f<y;f+=4)c=n[l.charCodeAt(f)]<<18|n[l.charCodeAt(f+1)]<<12|n[l.charCodeAt(f+2)]<<6|n[l.charCodeAt(f+3)],g[_++]=c>>16&255,g[_++]=c>>8&255,g[_++]=255&c;return v===2&&(c=n[l.charCodeAt(f)]<<2|n[l.charCodeAt(f+1)]>>4,g[_++]=255&c),v===1&&(c=n[l.charCodeAt(f)]<<10|n[l.charCodeAt(f+1)]<<4|n[l.charCodeAt(f+2)]>>2,g[_++]=c>>8&255,g[_++]=255&c),g},e.fromByteArray=function(l){for(var c,f=l.length,h=f%3,d=[],v=16383,g=0,_=f-h;g<_;g+=v)d.push(u(l,g,g+v>_?_:g+v));return h===1?(c=l[f-1],d.push(t[c>>2]+t[c<<4&63]+"==")):h===2&&(c=(l[f-2]<<8)+l[f-1],d.push(t[c>>10]+t[c>>4&63]+t[c<<2&63]+"=")),d.join("")};for(var t=[],n=[],i=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)t[a]=o[a],n[o.charCodeAt(a)]=a;function s(l){var c=l.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var f=l.indexOf("=");return f===-1&&(f=c),[f,f===c?0:4-f%4]}function u(l,c,f){for(var h,d,v=[],g=c;g<f;g+=3)h=(l[g]<<16&16711680)+(l[g+1]<<8&65280)+(255&l[g+2]),v.push(t[(d=h)>>18&63]+t[d>>12&63]+t[d>>6&63]+t[63&d]);return v.join("")}n[45]=62,n[95]=63},1048:(r,e,t)=>{const n=t(7991),i=t(9318),o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=function(H){return+H!=H&&(H=0),u.alloc(+H)},e.INSPECT_MAX_BYTES=50;const a=2147483647;function s(H){if(H>a)throw new RangeError('The value "'+H+'" is invalid for option "size"');const $=new Uint8Array(H);return Object.setPrototypeOf($,u.prototype),$}function u(H,$,ne){if(typeof H=="number"){if(typeof $=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(H)}return l(H,$,ne)}function l(H,$,ne){if(typeof H=="string")return function(Be,Je){if(typeof Je=="string"&&Je!==""||(Je="utf8"),!u.isEncoding(Je))throw new TypeError("Unknown encoding: "+Je);const Tt=0|g(Be,Je);let Lt=s(Tt);const Vt=Lt.write(Be,Je);return Vt!==Tt&&(Lt=Lt.slice(0,Vt)),Lt}(H,$);if(ArrayBuffer.isView(H))return function(Be){if(Fe(Be,Uint8Array)){const Je=new Uint8Array(Be);return d(Je.buffer,Je.byteOffset,Je.byteLength)}return h(Be)}(H);if(H==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof H);if(Fe(H,ArrayBuffer)||H&&Fe(H.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Fe(H,SharedArrayBuffer)||H&&Fe(H.buffer,SharedArrayBuffer)))return d(H,$,ne);if(typeof H=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Re=H.valueOf&&H.valueOf();if(Re!=null&&Re!==H)return u.from(Re,$,ne);const De=function(Be){if(u.isBuffer(Be)){const Je=0|v(Be.length),Tt=s(Je);return Tt.length===0||Be.copy(Tt,0,0,Je),Tt}return Be.length!==void 0?typeof Be.length!="number"||He(Be.length)?s(0):h(Be):Be.type==="Buffer"&&Array.isArray(Be.data)?h(Be.data):void 0}(H);if(De)return De;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof H[Symbol.toPrimitive]=="function")return u.from(H[Symbol.toPrimitive]("string"),$,ne);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof H)}function c(H){if(typeof H!="number")throw new TypeError('"size" argument must be of type number');if(H<0)throw new RangeError('The value "'+H+'" is invalid for option "size"')}function f(H){return c(H),s(H<0?0:0|v(H))}function h(H){const $=H.length<0?0:0|v(H.length),ne=s($);for(let Re=0;Re<$;Re+=1)ne[Re]=255&H[Re];return ne}function d(H,$,ne){if($<0||H.byteLength<$)throw new RangeError('"offset" is outside of buffer bounds');if(H.byteLength<$+(ne||0))throw new RangeError('"length" is outside of buffer bounds');let Re;return Re=$===void 0&&ne===void 0?new Uint8Array(H):ne===void 0?new Uint8Array(H,$):new Uint8Array(H,$,ne),Object.setPrototypeOf(Re,u.prototype),Re}function v(H){if(H>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|H}function g(H,$){if(u.isBuffer(H))return H.length;if(ArrayBuffer.isView(H)||Fe(H,ArrayBuffer))return H.byteLength;if(typeof H!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof H);const ne=H.length,Re=arguments.length>2&&arguments[2]===!0;if(!Re&&ne===0)return 0;let De=!1;for(;;)switch($){case"ascii":case"latin1":case"binary":return ne;case"utf8":case"utf-8":return ve(H).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*ne;case"hex":return ne>>>1;case"base64":return we(H).length;default:if(De)return Re?-1:ve(H).length;$=(""+$).toLowerCase(),De=!0}}function _(H,$,ne){let Re=!1;if(($===void 0||$<0)&&($=0),$>this.length||((ne===void 0||ne>this.length)&&(ne=this.length),ne<=0)||(ne>>>=0)<=($>>>=0))return"";for(H||(H="utf8");;)switch(H){case"hex":return W(this,$,ne);case"utf8":case"utf-8":return L(this,$,ne);case"ascii":return F(this,$,ne);case"latin1":case"binary":return q(this,$,ne);case"base64":return D(this,$,ne);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z(this,$,ne);default:if(Re)throw new TypeError("Unknown encoding: "+H);H=(H+"").toLowerCase(),Re=!0}}function y(H,$,ne){const Re=H[$];H[$]=H[ne],H[ne]=Re}function p(H,$,ne,Re,De){if(H.length===0)return-1;if(typeof ne=="string"?(Re=ne,ne=0):ne>2147483647?ne=2147483647:ne<-2147483648&&(ne=-2147483648),He(ne=+ne)&&(ne=De?0:H.length-1),ne<0&&(ne=H.length+ne),ne>=H.length){if(De)return-1;ne=H.length-1}else if(ne<0){if(!De)return-1;ne=0}if(typeof $=="string"&&($=u.from($,Re)),u.isBuffer($))return $.length===0?-1:m(H,$,ne,Re,De);if(typeof $=="number")return $&=255,typeof Uint8Array.prototype.indexOf=="function"?De?Uint8Array.prototype.indexOf.call(H,$,ne):Uint8Array.prototype.lastIndexOf.call(H,$,ne):m(H,[$],ne,Re,De);throw new TypeError("val must be string, number or Buffer")}function m(H,$,ne,Re,De){let Be,Je=1,Tt=H.length,Lt=$.length;if(Re!==void 0&&((Re=String(Re).toLowerCase())==="ucs2"||Re==="ucs-2"||Re==="utf16le"||Re==="utf-16le")){if(H.length<2||$.length<2)return-1;Je=2,Tt/=2,Lt/=2,ne/=2}function Vt(Nt,Jt){return Je===1?Nt[Jt]:Nt.readUInt16BE(Jt*Je)}if(De){let Nt=-1;for(Be=ne;Be<Tt;Be++)if(Vt(H,Be)===Vt($,Nt===-1?0:Be-Nt)){if(Nt===-1&&(Nt=Be),Be-Nt+1===Lt)return Nt*Je}else Nt!==-1&&(Be-=Be-Nt),Nt=-1}else for(ne+Lt>Tt&&(ne=Tt-Lt),Be=ne;Be>=0;Be--){let Nt=!0;for(let Jt=0;Jt<Lt;Jt++)if(Vt(H,Be+Jt)!==Vt($,Jt)){Nt=!1;break}if(Nt)return Be}return-1}function E(H,$,ne,Re){ne=Number(ne)||0;const De=H.length-ne;Re?(Re=Number(Re))>De&&(Re=De):Re=De;const Be=$.length;let Je;for(Re>Be/2&&(Re=Be/2),Je=0;Je<Re;++Je){const Tt=parseInt($.substr(2*Je,2),16);if(He(Tt))return Je;H[ne+Je]=Tt}return Je}function C(H,$,ne,Re){return xe(ve($,H.length-ne),H,ne,Re)}function P(H,$,ne,Re){return xe(function(De){const Be=[];for(let Je=0;Je<De.length;++Je)Be.push(255&De.charCodeAt(Je));return Be}($),H,ne,Re)}function T(H,$,ne,Re){return xe(we($),H,ne,Re)}function R(H,$,ne,Re){return xe(function(De,Be){let Je,Tt,Lt;const Vt=[];for(let Nt=0;Nt<De.length&&!((Be-=2)<0);++Nt)Je=De.charCodeAt(Nt),Tt=Je>>8,Lt=Je%256,Vt.push(Lt),Vt.push(Tt);return Vt}($,H.length-ne),H,ne,Re)}function D(H,$,ne){return $===0&&ne===H.length?n.fromByteArray(H):n.fromByteArray(H.slice($,ne))}function L(H,$,ne){ne=Math.min(H.length,ne);const Re=[];let De=$;for(;De<ne;){const Be=H[De];let Je=null,Tt=Be>239?4:Be>223?3:Be>191?2:1;if(De+Tt<=ne){let Lt,Vt,Nt,Jt;switch(Tt){case 1:Be<128&&(Je=Be);break;case 2:Lt=H[De+1],(192&Lt)==128&&(Jt=(31&Be)<<6|63&Lt,Jt>127&&(Je=Jt));break;case 3:Lt=H[De+1],Vt=H[De+2],(192&Lt)==128&&(192&Vt)==128&&(Jt=(15&Be)<<12|(63&Lt)<<6|63&Vt,Jt>2047&&(Jt<55296||Jt>57343)&&(Je=Jt));break;case 4:Lt=H[De+1],Vt=H[De+2],Nt=H[De+3],(192&Lt)==128&&(192&Vt)==128&&(192&Nt)==128&&(Jt=(15&Be)<<18|(63&Lt)<<12|(63&Vt)<<6|63&Nt,Jt>65535&&Jt<1114112&&(Je=Jt))}}Je===null?(Je=65533,Tt=1):Je>65535&&(Je-=65536,Re.push(Je>>>10&1023|55296),Je=56320|1023&Je),Re.push(Je),De+=Tt}return function(Be){const Je=Be.length;if(Je<=j)return String.fromCharCode.apply(String,Be);let Tt="",Lt=0;for(;Lt<Je;)Tt+=String.fromCharCode.apply(String,Be.slice(Lt,Lt+=j));return Tt}(Re)}e.kMaxLength=a,u.TYPED_ARRAY_SUPPORT=function(){try{const H=new Uint8Array(1),$={foo:function(){return 42}};return Object.setPrototypeOf($,Uint8Array.prototype),Object.setPrototypeOf(H,$),H.foo()===42}catch{return!1}}(),u.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(H,$,ne){return l(H,$,ne)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(H,$,ne){return function(Re,De,Be){return c(Re),Re<=0?s(Re):De!==void 0?typeof Be=="string"?s(Re).fill(De,Be):s(Re).fill(De):s(Re)}(H,$,ne)},u.allocUnsafe=function(H){return f(H)},u.allocUnsafeSlow=function(H){return f(H)},u.isBuffer=function(H){return H!=null&&H._isBuffer===!0&&H!==u.prototype},u.compare=function(H,$){if(Fe(H,Uint8Array)&&(H=u.from(H,H.offset,H.byteLength)),Fe($,Uint8Array)&&($=u.from($,$.offset,$.byteLength)),!u.isBuffer(H)||!u.isBuffer($))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(H===$)return 0;let ne=H.length,Re=$.length;for(let De=0,Be=Math.min(ne,Re);De<Be;++De)if(H[De]!==$[De]){ne=H[De],Re=$[De];break}return ne<Re?-1:Re<ne?1:0},u.isEncoding=function(H){switch(String(H).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(H,$){if(!Array.isArray(H))throw new TypeError('"list" argument must be an Array of Buffers');if(H.length===0)return u.alloc(0);let ne;if($===void 0)for($=0,ne=0;ne<H.length;++ne)$+=H[ne].length;const Re=u.allocUnsafe($);let De=0;for(ne=0;ne<H.length;++ne){let Be=H[ne];if(Fe(Be,Uint8Array))De+Be.length>Re.length?(u.isBuffer(Be)||(Be=u.from(Be)),Be.copy(Re,De)):Uint8Array.prototype.set.call(Re,Be,De);else{if(!u.isBuffer(Be))throw new TypeError('"list" argument must be an Array of Buffers');Be.copy(Re,De)}De+=Be.length}return Re},u.byteLength=g,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const H=this.length;if(H%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let $=0;$<H;$+=2)y(this,$,$+1);return this},u.prototype.swap32=function(){const H=this.length;if(H%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let $=0;$<H;$+=4)y(this,$,$+3),y(this,$+1,$+2);return this},u.prototype.swap64=function(){const H=this.length;if(H%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let $=0;$<H;$+=8)y(this,$,$+7),y(this,$+1,$+6),y(this,$+2,$+5),y(this,$+3,$+4);return this},u.prototype.toString=function(){const H=this.length;return H===0?"":arguments.length===0?L(this,0,H):_.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(H){if(!u.isBuffer(H))throw new TypeError("Argument must be a Buffer");return this===H||u.compare(this,H)===0},u.prototype.inspect=function(){let H="";const $=e.INSPECT_MAX_BYTES;return H=this.toString("hex",0,$).replace(/(.{2})/g,"$1 ").trim(),this.length>$&&(H+=" ... "),"<Buffer "+H+">"},o&&(u.prototype[o]=u.prototype.inspect),u.prototype.compare=function(H,$,ne,Re,De){if(Fe(H,Uint8Array)&&(H=u.from(H,H.offset,H.byteLength)),!u.isBuffer(H))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof H);if($===void 0&&($=0),ne===void 0&&(ne=H?H.length:0),Re===void 0&&(Re=0),De===void 0&&(De=this.length),$<0||ne>H.length||Re<0||De>this.length)throw new RangeError("out of range index");if(Re>=De&&$>=ne)return 0;if(Re>=De)return-1;if($>=ne)return 1;if(this===H)return 0;let Be=(De>>>=0)-(Re>>>=0),Je=(ne>>>=0)-($>>>=0);const Tt=Math.min(Be,Je),Lt=this.slice(Re,De),Vt=H.slice($,ne);for(let Nt=0;Nt<Tt;++Nt)if(Lt[Nt]!==Vt[Nt]){Be=Lt[Nt],Je=Vt[Nt];break}return Be<Je?-1:Je<Be?1:0},u.prototype.includes=function(H,$,ne){return this.indexOf(H,$,ne)!==-1},u.prototype.indexOf=function(H,$,ne){return p(this,H,$,ne,!0)},u.prototype.lastIndexOf=function(H,$,ne){return p(this,H,$,ne,!1)},u.prototype.write=function(H,$,ne,Re){if($===void 0)Re="utf8",ne=this.length,$=0;else if(ne===void 0&&typeof $=="string")Re=$,ne=this.length,$=0;else{if(!isFinite($))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");$>>>=0,isFinite(ne)?(ne>>>=0,Re===void 0&&(Re="utf8")):(Re=ne,ne=void 0)}const De=this.length-$;if((ne===void 0||ne>De)&&(ne=De),H.length>0&&(ne<0||$<0)||$>this.length)throw new RangeError("Attempt to write outside buffer bounds");Re||(Re="utf8");let Be=!1;for(;;)switch(Re){case"hex":return E(this,H,$,ne);case"utf8":case"utf-8":return C(this,H,$,ne);case"ascii":case"latin1":case"binary":return P(this,H,$,ne);case"base64":return T(this,H,$,ne);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,H,$,ne);default:if(Be)throw new TypeError("Unknown encoding: "+Re);Re=(""+Re).toLowerCase(),Be=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const j=4096;function F(H,$,ne){let Re="";ne=Math.min(H.length,ne);for(let De=$;De<ne;++De)Re+=String.fromCharCode(127&H[De]);return Re}function q(H,$,ne){let Re="";ne=Math.min(H.length,ne);for(let De=$;De<ne;++De)Re+=String.fromCharCode(H[De]);return Re}function W(H,$,ne){const Re=H.length;(!$||$<0)&&($=0),(!ne||ne<0||ne>Re)&&(ne=Re);let De="";for(let Be=$;Be<ne;++Be)De+=at[H[Be]];return De}function Z(H,$,ne){const Re=H.slice($,ne);let De="";for(let Be=0;Be<Re.length-1;Be+=2)De+=String.fromCharCode(Re[Be]+256*Re[Be+1]);return De}function Q(H,$,ne){if(H%1!=0||H<0)throw new RangeError("offset is not uint");if(H+$>ne)throw new RangeError("Trying to access beyond buffer length")}function re(H,$,ne,Re,De,Be){if(!u.isBuffer(H))throw new TypeError('"buffer" argument must be a Buffer instance');if($>De||$<Be)throw new RangeError('"value" argument is out of bounds');if(ne+Re>H.length)throw new RangeError("Index out of range")}function ee(H,$,ne,Re,De){Ee($,Re,De,H,ne,7);let Be=Number($&BigInt(4294967295));H[ne++]=Be,Be>>=8,H[ne++]=Be,Be>>=8,H[ne++]=Be,Be>>=8,H[ne++]=Be;let Je=Number($>>BigInt(32)&BigInt(4294967295));return H[ne++]=Je,Je>>=8,H[ne++]=Je,Je>>=8,H[ne++]=Je,Je>>=8,H[ne++]=Je,ne}function ue(H,$,ne,Re,De){Ee($,Re,De,H,ne,7);let Be=Number($&BigInt(4294967295));H[ne+7]=Be,Be>>=8,H[ne+6]=Be,Be>>=8,H[ne+5]=Be,Be>>=8,H[ne+4]=Be;let Je=Number($>>BigInt(32)&BigInt(4294967295));return H[ne+3]=Je,Je>>=8,H[ne+2]=Je,Je>>=8,H[ne+1]=Je,Je>>=8,H[ne]=Je,ne+8}function de(H,$,ne,Re,De,Be){if(ne+Re>H.length)throw new RangeError("Index out of range");if(ne<0)throw new RangeError("Index out of range")}function se(H,$,ne,Re,De){return $=+$,ne>>>=0,De||de(H,0,ne,4),i.write(H,$,ne,Re,23,4),ne+4}function be(H,$,ne,Re,De){return $=+$,ne>>>=0,De||de(H,0,ne,8),i.write(H,$,ne,Re,52,8),ne+8}u.prototype.slice=function(H,$){const ne=this.length;(H=~~H)<0?(H+=ne)<0&&(H=0):H>ne&&(H=ne),($=$===void 0?ne:~~$)<0?($+=ne)<0&&($=0):$>ne&&($=ne),$<H&&($=H);const Re=this.subarray(H,$);return Object.setPrototypeOf(Re,u.prototype),Re},u.prototype.readUintLE=u.prototype.readUIntLE=function(H,$,ne){H>>>=0,$>>>=0,ne||Q(H,$,this.length);let Re=this[H],De=1,Be=0;for(;++Be<$&&(De*=256);)Re+=this[H+Be]*De;return Re},u.prototype.readUintBE=u.prototype.readUIntBE=function(H,$,ne){H>>>=0,$>>>=0,ne||Q(H,$,this.length);let Re=this[H+--$],De=1;for(;$>0&&(De*=256);)Re+=this[H+--$]*De;return Re},u.prototype.readUint8=u.prototype.readUInt8=function(H,$){return H>>>=0,$||Q(H,1,this.length),this[H]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(H,$){return H>>>=0,$||Q(H,2,this.length),this[H]|this[H+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(H,$){return H>>>=0,$||Q(H,2,this.length),this[H]<<8|this[H+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(H,$){return H>>>=0,$||Q(H,4,this.length),(this[H]|this[H+1]<<8|this[H+2]<<16)+16777216*this[H+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(H,$){return H>>>=0,$||Q(H,4,this.length),16777216*this[H]+(this[H+1]<<16|this[H+2]<<8|this[H+3])},u.prototype.readBigUInt64LE=wt(function(H){Ce(H>>>=0,"offset");const $=this[H],ne=this[H+7];$!==void 0&&ne!==void 0||ke(H,this.length-8);const Re=$+256*this[++H]+65536*this[++H]+this[++H]*2**24,De=this[++H]+256*this[++H]+65536*this[++H]+ne*2**24;return BigInt(Re)+(BigInt(De)<<BigInt(32))}),u.prototype.readBigUInt64BE=wt(function(H){Ce(H>>>=0,"offset");const $=this[H],ne=this[H+7];$!==void 0&&ne!==void 0||ke(H,this.length-8);const Re=$*2**24+65536*this[++H]+256*this[++H]+this[++H],De=this[++H]*2**24+65536*this[++H]+256*this[++H]+ne;return(BigInt(Re)<<BigInt(32))+BigInt(De)}),u.prototype.readIntLE=function(H,$,ne){H>>>=0,$>>>=0,ne||Q(H,$,this.length);let Re=this[H],De=1,Be=0;for(;++Be<$&&(De*=256);)Re+=this[H+Be]*De;return De*=128,Re>=De&&(Re-=Math.pow(2,8*$)),Re},u.prototype.readIntBE=function(H,$,ne){H>>>=0,$>>>=0,ne||Q(H,$,this.length);let Re=$,De=1,Be=this[H+--Re];for(;Re>0&&(De*=256);)Be+=this[H+--Re]*De;return De*=128,Be>=De&&(Be-=Math.pow(2,8*$)),Be},u.prototype.readInt8=function(H,$){return H>>>=0,$||Q(H,1,this.length),128&this[H]?-1*(255-this[H]+1):this[H]},u.prototype.readInt16LE=function(H,$){H>>>=0,$||Q(H,2,this.length);const ne=this[H]|this[H+1]<<8;return 32768&ne?4294901760|ne:ne},u.prototype.readInt16BE=function(H,$){H>>>=0,$||Q(H,2,this.length);const ne=this[H+1]|this[H]<<8;return 32768&ne?4294901760|ne:ne},u.prototype.readInt32LE=function(H,$){return H>>>=0,$||Q(H,4,this.length),this[H]|this[H+1]<<8|this[H+2]<<16|this[H+3]<<24},u.prototype.readInt32BE=function(H,$){return H>>>=0,$||Q(H,4,this.length),this[H]<<24|this[H+1]<<16|this[H+2]<<8|this[H+3]},u.prototype.readBigInt64LE=wt(function(H){Ce(H>>>=0,"offset");const $=this[H],ne=this[H+7];$!==void 0&&ne!==void 0||ke(H,this.length-8);const Re=this[H+4]+256*this[H+5]+65536*this[H+6]+(ne<<24);return(BigInt(Re)<<BigInt(32))+BigInt($+256*this[++H]+65536*this[++H]+this[++H]*2**24)}),u.prototype.readBigInt64BE=wt(function(H){Ce(H>>>=0,"offset");const $=this[H],ne=this[H+7];$!==void 0&&ne!==void 0||ke(H,this.length-8);const Re=($<<24)+65536*this[++H]+256*this[++H]+this[++H];return(BigInt(Re)<<BigInt(32))+BigInt(this[++H]*2**24+65536*this[++H]+256*this[++H]+ne)}),u.prototype.readFloatLE=function(H,$){return H>>>=0,$||Q(H,4,this.length),i.read(this,H,!0,23,4)},u.prototype.readFloatBE=function(H,$){return H>>>=0,$||Q(H,4,this.length),i.read(this,H,!1,23,4)},u.prototype.readDoubleLE=function(H,$){return H>>>=0,$||Q(H,8,this.length),i.read(this,H,!0,52,8)},u.prototype.readDoubleBE=function(H,$){return H>>>=0,$||Q(H,8,this.length),i.read(this,H,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(H,$,ne,Re){H=+H,$>>>=0,ne>>>=0,Re||re(this,H,$,ne,Math.pow(2,8*ne)-1,0);let De=1,Be=0;for(this[$]=255&H;++Be<ne&&(De*=256);)this[$+Be]=H/De&255;return $+ne},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(H,$,ne,Re){H=+H,$>>>=0,ne>>>=0,Re||re(this,H,$,ne,Math.pow(2,8*ne)-1,0);let De=ne-1,Be=1;for(this[$+De]=255&H;--De>=0&&(Be*=256);)this[$+De]=H/Be&255;return $+ne},u.prototype.writeUint8=u.prototype.writeUInt8=function(H,$,ne){return H=+H,$>>>=0,ne||re(this,H,$,1,255,0),this[$]=255&H,$+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(H,$,ne){return H=+H,$>>>=0,ne||re(this,H,$,2,65535,0),this[$]=255&H,this[$+1]=H>>>8,$+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(H,$,ne){return H=+H,$>>>=0,ne||re(this,H,$,2,65535,0),this[$]=H>>>8,this[$+1]=255&H,$+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(H,$,ne){return H=+H,$>>>=0,ne||re(this,H,$,4,4294967295,0),this[$+3]=H>>>24,this[$+2]=H>>>16,this[$+1]=H>>>8,this[$]=255&H,$+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(H,$,ne){return H=+H,$>>>=0,ne||re(this,H,$,4,4294967295,0),this[$]=H>>>24,this[$+1]=H>>>16,this[$+2]=H>>>8,this[$+3]=255&H,$+4},u.prototype.writeBigUInt64LE=wt(function(H,$=0){return ee(this,H,$,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=wt(function(H,$=0){return ue(this,H,$,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(H,$,ne,Re){if(H=+H,$>>>=0,!Re){const Tt=Math.pow(2,8*ne-1);re(this,H,$,ne,Tt-1,-Tt)}let De=0,Be=1,Je=0;for(this[$]=255&H;++De<ne&&(Be*=256);)H<0&&Je===0&&this[$+De-1]!==0&&(Je=1),this[$+De]=(H/Be>>0)-Je&255;return $+ne},u.prototype.writeIntBE=function(H,$,ne,Re){if(H=+H,$>>>=0,!Re){const Tt=Math.pow(2,8*ne-1);re(this,H,$,ne,Tt-1,-Tt)}let De=ne-1,Be=1,Je=0;for(this[$+De]=255&H;--De>=0&&(Be*=256);)H<0&&Je===0&&this[$+De+1]!==0&&(Je=1),this[$+De]=(H/Be>>0)-Je&255;return $+ne},u.prototype.writeInt8=function(H,$,ne){return H=+H,$>>>=0,ne||re(this,H,$,1,127,-128),H<0&&(H=255+H+1),this[$]=255&H,$+1},u.prototype.writeInt16LE=function(H,$,ne){return H=+H,$>>>=0,ne||re(this,H,$,2,32767,-32768),this[$]=255&H,this[$+1]=H>>>8,$+2},u.prototype.writeInt16BE=function(H,$,ne){return H=+H,$>>>=0,ne||re(this,H,$,2,32767,-32768),this[$]=H>>>8,this[$+1]=255&H,$+2},u.prototype.writeInt32LE=function(H,$,ne){return H=+H,$>>>=0,ne||re(this,H,$,4,2147483647,-2147483648),this[$]=255&H,this[$+1]=H>>>8,this[$+2]=H>>>16,this[$+3]=H>>>24,$+4},u.prototype.writeInt32BE=function(H,$,ne){return H=+H,$>>>=0,ne||re(this,H,$,4,2147483647,-2147483648),H<0&&(H=4294967295+H+1),this[$]=H>>>24,this[$+1]=H>>>16,this[$+2]=H>>>8,this[$+3]=255&H,$+4},u.prototype.writeBigInt64LE=wt(function(H,$=0){return ee(this,H,$,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=wt(function(H,$=0){return ue(this,H,$,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeFloatLE=function(H,$,ne){return se(this,H,$,!0,ne)},u.prototype.writeFloatBE=function(H,$,ne){return se(this,H,$,!1,ne)},u.prototype.writeDoubleLE=function(H,$,ne){return be(this,H,$,!0,ne)},u.prototype.writeDoubleBE=function(H,$,ne){return be(this,H,$,!1,ne)},u.prototype.copy=function(H,$,ne,Re){if(!u.isBuffer(H))throw new TypeError("argument should be a Buffer");if(ne||(ne=0),Re||Re===0||(Re=this.length),$>=H.length&&($=H.length),$||($=0),Re>0&&Re<ne&&(Re=ne),Re===ne||H.length===0||this.length===0)return 0;if($<0)throw new RangeError("targetStart out of bounds");if(ne<0||ne>=this.length)throw new RangeError("Index out of range");if(Re<0)throw new RangeError("sourceEnd out of bounds");Re>this.length&&(Re=this.length),H.length-$<Re-ne&&(Re=H.length-$+ne);const De=Re-ne;return this===H&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin($,ne,Re):Uint8Array.prototype.set.call(H,this.subarray(ne,Re),$),De},u.prototype.fill=function(H,$,ne,Re){if(typeof H=="string"){if(typeof $=="string"?(Re=$,$=0,ne=this.length):typeof ne=="string"&&(Re=ne,ne=this.length),Re!==void 0&&typeof Re!="string")throw new TypeError("encoding must be a string");if(typeof Re=="string"&&!u.isEncoding(Re))throw new TypeError("Unknown encoding: "+Re);if(H.length===1){const Be=H.charCodeAt(0);(Re==="utf8"&&Be<128||Re==="latin1")&&(H=Be)}}else typeof H=="number"?H&=255:typeof H=="boolean"&&(H=Number(H));if($<0||this.length<$||this.length<ne)throw new RangeError("Out of range index");if(ne<=$)return this;let De;if($>>>=0,ne=ne===void 0?this.length:ne>>>0,H||(H=0),typeof H=="number")for(De=$;De<ne;++De)this[De]=H;else{const Be=u.isBuffer(H)?H:u.from(H,Re),Je=Be.length;if(Je===0)throw new TypeError('The value "'+H+'" is invalid for argument "value"');for(De=0;De<ne-$;++De)this[De+$]=Be[De%Je]}return this};const Le={};function fe(H,$,ne){Le[H]=class extends ne{constructor(){super(),Object.defineProperty(this,"message",{value:$.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${H}]`,this.stack,delete this.name}get code(){return H}set code(Re){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Re,writable:!0})}toString(){return`${this.name} [${H}]: ${this.message}`}}}function ce(H){let $="",ne=H.length;const Re=H[0]==="-"?1:0;for(;ne>=Re+4;ne-=3)$=`_${H.slice(ne-3,ne)}${$}`;return`${H.slice(0,ne)}${$}`}function Ee(H,$,ne,Re,De,Be){if(H>ne||H<$){const Je=typeof $=="bigint"?"n":"";let Tt;throw Tt=$===0||$===BigInt(0)?`>= 0${Je} and < 2${Je} ** ${8*(Be+1)}${Je}`:`>= -(2${Je} ** ${8*(Be+1)-1}${Je}) and < 2 ** ${8*(Be+1)-1}${Je}`,new Le.ERR_OUT_OF_RANGE("value",Tt,H)}(function(Je,Tt,Lt){Ce(Tt,"offset"),Je[Tt]!==void 0&&Je[Tt+Lt]!==void 0||ke(Tt,Je.length-(Lt+1))})(Re,De,Be)}function Ce(H,$){if(typeof H!="number")throw new Le.ERR_INVALID_ARG_TYPE($,"number",H)}function ke(H,$,ne){throw Math.floor(H)!==H?(Ce(H,ne),new Le.ERR_OUT_OF_RANGE("offset","an integer",H)):$<0?new Le.ERR_BUFFER_OUT_OF_BOUNDS:new Le.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${$}`,H)}fe("ERR_BUFFER_OUT_OF_BOUNDS",function(H){return H?`${H} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),fe("ERR_INVALID_ARG_TYPE",function(H,$){return`The "${H}" argument must be of type number. Received type ${typeof $}`},TypeError),fe("ERR_OUT_OF_RANGE",function(H,$,ne){let Re=`The value of "${H}" is out of range.`,De=ne;return Number.isInteger(ne)&&Math.abs(ne)>2**32?De=ce(String(ne)):typeof ne=="bigint"&&(De=String(ne),(ne>BigInt(2)**BigInt(32)||ne<-(BigInt(2)**BigInt(32)))&&(De=ce(De)),De+="n"),Re+=` It must be ${$}. Received ${De}`,Re},RangeError);const Ie=/[^+/0-9A-Za-z-_]/g;function ve(H,$){let ne;$=$||1/0;const Re=H.length;let De=null;const Be=[];for(let Je=0;Je<Re;++Je){if(ne=H.charCodeAt(Je),ne>55295&&ne<57344){if(!De){if(ne>56319){($-=3)>-1&&Be.push(239,191,189);continue}if(Je+1===Re){($-=3)>-1&&Be.push(239,191,189);continue}De=ne;continue}if(ne<56320){($-=3)>-1&&Be.push(239,191,189),De=ne;continue}ne=65536+(De-55296<<10|ne-56320)}else De&&($-=3)>-1&&Be.push(239,191,189);if(De=null,ne<128){if(($-=1)<0)break;Be.push(ne)}else if(ne<2048){if(($-=2)<0)break;Be.push(ne>>6|192,63&ne|128)}else if(ne<65536){if(($-=3)<0)break;Be.push(ne>>12|224,ne>>6&63|128,63&ne|128)}else{if(!(ne<1114112))throw new Error("Invalid code point");if(($-=4)<0)break;Be.push(ne>>18|240,ne>>12&63|128,ne>>6&63|128,63&ne|128)}}return Be}function we(H){return n.toByteArray(function($){if(($=($=$.split("=")[0]).trim().replace(Ie,"")).length<2)return"";for(;$.length%4!=0;)$+="=";return $}(H))}function xe(H,$,ne,Re){let De;for(De=0;De<Re&&!(De+ne>=$.length||De>=H.length);++De)$[De+ne]=H[De];return De}function Fe(H,$){return H instanceof $||H!=null&&H.constructor!=null&&H.constructor.name!=null&&H.constructor.name===$.name}function He(H){return H!=H}const at=function(){const H="0123456789abcdef",$=new Array(256);for(let ne=0;ne<16;++ne){const Re=16*ne;for(let De=0;De<16;++De)$[Re+De]=H[ne]+H[De]}return $}();function wt(H){return typeof BigInt>"u"?it:H}function it(){throw new Error("BigInt not supported")}},6931:r=>{r.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},3269:(r,e,t)=>{var n=t(6931),i=t(9975),o=Object.hasOwnProperty,a=Object.create(null);for(var s in n)o.call(n,s)&&(a[n[s]]=s);var u=r.exports={to:{},get:{}};function l(f,h,d){return Math.min(Math.max(h,f),d)}function c(f){var h=Math.round(f).toString(16).toUpperCase();return h.length<2?"0"+h:h}u.get=function(f){var h,d;switch(f.substring(0,3).toLowerCase()){case"hsl":h=u.get.hsl(f),d="hsl";break;case"hwb":h=u.get.hwb(f),d="hwb";break;default:h=u.get.rgb(f),d="rgb"}return h?{model:d,value:h}:null},u.get.rgb=function(f){if(!f)return null;var h,d,v,g=[0,0,0,1];if(h=f.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(v=h[2],h=h[1],d=0;d<3;d++){var _=2*d;g[d]=parseInt(h.slice(_,_+2),16)}v&&(g[3]=parseInt(v,16)/255)}else if(h=f.match(/^#([a-f0-9]{3,4})$/i)){for(v=(h=h[1])[3],d=0;d<3;d++)g[d]=parseInt(h[d]+h[d],16);v&&(g[3]=parseInt(v+v,16)/255)}else if(h=f.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)){for(d=0;d<3;d++)g[d]=parseInt(h[d+1],0);h[4]&&(h[5]?g[3]=.01*parseFloat(h[4]):g[3]=parseFloat(h[4]))}else{if(!(h=f.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(h=f.match(/^(\w+)$/))?h[1]==="transparent"?[0,0,0,0]:o.call(n,h[1])?((g=n[h[1]])[3]=1,g):null:null;for(d=0;d<3;d++)g[d]=Math.round(2.55*parseFloat(h[d+1]));h[4]&&(h[5]?g[3]=.01*parseFloat(h[4]):g[3]=parseFloat(h[4]))}for(d=0;d<3;d++)g[d]=l(g[d],0,255);return g[3]=l(g[3],0,1),g},u.get.hsl=function(f){if(!f)return null;var h=f.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(h){var d=parseFloat(h[4]);return[(parseFloat(h[1])%360+360)%360,l(parseFloat(h[2]),0,100),l(parseFloat(h[3]),0,100),l(isNaN(d)?1:d,0,1)]}return null},u.get.hwb=function(f){if(!f)return null;var h=f.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(h){var d=parseFloat(h[4]);return[(parseFloat(h[1])%360+360)%360,l(parseFloat(h[2]),0,100),l(parseFloat(h[3]),0,100),l(isNaN(d)?1:d,0,1)]}return null},u.to.hex=function(){var f=i(arguments);return"#"+c(f[0])+c(f[1])+c(f[2])+(f[3]<1?c(Math.round(255*f[3])):"")},u.to.rgb=function(){var f=i(arguments);return f.length<4||f[3]===1?"rgb("+Math.round(f[0])+", "+Math.round(f[1])+", "+Math.round(f[2])+")":"rgba("+Math.round(f[0])+", "+Math.round(f[1])+", "+Math.round(f[2])+", "+f[3]+")"},u.to.rgb.percent=function(){var f=i(arguments),h=Math.round(f[0]/255*100),d=Math.round(f[1]/255*100),v=Math.round(f[2]/255*100);return f.length<4||f[3]===1?"rgb("+h+"%, "+d+"%, "+v+"%)":"rgba("+h+"%, "+d+"%, "+v+"%, "+f[3]+")"},u.to.hsl=function(){var f=i(arguments);return f.length<4||f[3]===1?"hsl("+f[0]+", "+f[1]+"%, "+f[2]+"%)":"hsla("+f[0]+", "+f[1]+"%, "+f[2]+"%, "+f[3]+")"},u.to.hwb=function(){var f=i(arguments),h="";return f.length>=4&&f[3]!==1&&(h=", "+f[3]),"hwb("+f[0]+", "+f[1]+"%, "+f[2]+"%"+h+")"},u.to.keyword=function(f){return a[f.slice(0,3)]}},9792:(r,e,t)=>{var n=t(7045),i=t(4360),o=t(6804);r.exports=function(a,s){if(!s)return a;var u=Object.keys(s);if(u.length===0)return a;for(var l=n(a),c=u.length-1;c>=0;c--){var f=u[c],h=String(s[f]);h&&(h=" "+h),o(l,{type:"preprocessor",data:"#define "+f+h})}return i(l)}},6804:r=>{r.exports=function(i,o){Array.isArray(o)||(o=[o]);var a=function(l){for(var c=-1,f=0;f<l.length;f++){var h=l[f];if(h.type==="preprocessor")/^#(extension|version)/.test(h.data)&&(c=Math.max(c,f));else if(h.type==="keyword"&&h.data==="precision"){var d=n(l,f);if(d===-1)throw new Error("precision statement not followed by any semicolons!");c=Math.max(c,d)}}return c+1}(i),s=a>0?i[a-1]:null;s&&t.test(s.data)&&i.splice(a++,0,e),i.splice.apply(i,[a,0].concat(o));var u=a+o.length;return i[u]&&/[^\r\n]$/.test(i[u].data)&&i.splice(u,0,e),i};var e={data:`
`,type:"whitespace"},t=/[^\r\n]$/;function n(i,o){for(var a=o;a<i.length;a++)if(i[a].type==="operator"&&i[a].data===";")return a;return-1}},4360:r=>{r.exports=function(e){for(var t=[],n=0;n<e.length;n++)e[n].type!=="eof"&&t.push(e[n].data);return t.join("")}},3206:(r,e,t)=>{r.exports=function(T){var R,D,L,j=0,F=0,q=u,W=[],Z=[],Q=1,re=0,ee=0,ue=!1,de=!1,se="",be=o,Le=n;(T=T||{}).version==="300 es"&&(be=s,Le=a);var fe={},ce={};for(j=0;j<be.length;j++)fe[be[j]]=!0;for(j=0;j<Le.length;j++)ce[Le[j]]=!0;return function(it){return Z=[],it!==null?function(H){var $;for(j=0,H.toString&&(H=H.toString()),se+=H.replace(/\r\n/g,`
`),L=se.length;R=se[j],j<L;){switch($=j,q){case c:j=ve();break;case f:case h:j=Ie();break;case d:j=we();break;case v:j=He();break;case C:j=Fe();break;case g:j=at();break;case l:j=wt();break;case m:j=ke();break;case u:j=Ce()}$!==j&&(se[$]===`
`?(re=0,++Q):++re)}return F+=j,se=se.slice(j),Z}(it):(W.length&&Ee(W.join("")),q=E,Ee("(eof)"),Z)};function Ee(it){it.length&&Z.push({type:P[q],data:it,position:ee,line:Q,column:re})}function Ce(){return W=W.length?[]:W,D==="/"&&R==="*"?(ee=F+j-1,q=c,D=R,j+1):D==="/"&&R==="/"?(ee=F+j-1,q=f,D=R,j+1):R==="#"?(q=h,ee=F+j,j):/\s/.test(R)?(q=m,ee=F+j,j):(ue=/\d/.test(R),de=/[^\w_]/.test(R),ee=F+j,q=ue?v:de?d:l,j)}function ke(){return/[^\s]/g.test(R)?(Ee(W.join("")),q=u,j):(W.push(R),D=R,j+1)}function Ie(){return R!=="\r"&&R!==`
`||D==="\\"?(W.push(R),D=R,j+1):(Ee(W.join("")),q=u,j)}function ve(){return R==="/"&&D==="*"?(W.push(R),Ee(W.join("")),q=u,j+1):(W.push(R),D=R,j+1)}function we(){if(D==="."&&/\d/.test(R))return q=g,j;if(D==="/"&&R==="*")return q=c,j;if(D==="/"&&R==="/")return q=f,j;if(R==="."&&W.length){for(;xe(W););return q=g,j}if(R===";"||R===")"||R==="("){if(W.length)for(;xe(W););return Ee(R),q=u,j+1}var it=W.length===2&&R!=="=";if(/[\w_\d\s]/.test(R)||it){for(;xe(W););return q=u,j}return W.push(R),D=R,j+1}function xe(it){for(var H,$,ne=0;;){if(H=i.indexOf(it.slice(0,it.length+ne).join("")),$=i[H],H===-1){if(ne--+it.length>0)continue;$=it.slice(0,1).join("")}return Ee($),ee+=$.length,(W=W.slice($.length)).length}}function Fe(){return/[^a-fA-F0-9]/.test(R)?(Ee(W.join("")),q=u,j):(W.push(R),D=R,j+1)}function He(){return R==="."||/[eE]/.test(R)?(W.push(R),q=g,D=R,j+1):R==="x"&&W.length===1&&W[0]==="0"?(q=C,W.push(R),D=R,j+1):/[^\d]/.test(R)?(Ee(W.join("")),q=u,j):(W.push(R),D=R,j+1)}function at(){return R==="f"&&(W.push(R),D=R,j+=1),/[eE]/.test(R)?(W.push(R),D=R,j+1):(R!=="-"&&R!=="+"||!/[eE]/.test(D))&&/[^\d]/.test(R)?(Ee(W.join("")),q=u,j):(W.push(R),D=R,j+1)}function wt(){if(/[^\d\w_]/.test(R)){var it=W.join("");return q=ce[it]?p:fe[it]?y:_,Ee(W.join("")),q=u,j}return W.push(R),D=R,j+1}};var n=t(4704),i=t(2063),o=t(7192),a=t(8784),s=t(5592),u=999,l=9999,c=0,f=1,h=2,d=3,v=4,g=5,_=6,y=7,p=8,m=9,E=10,C=11,P=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},5592:(r,e,t)=>{var n=t(7192);n=n.slice().filter(function(i){return!/^(gl\_|texture)/.test(i)}),r.exports=n.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},7192:r=>{r.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},8784:(r,e,t)=>{var n=t(4704);r.exports=n.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},4704:r=>{r.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},2063:r=>{r.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},7045:(r,e,t)=>{var n=t(3206);r.exports=function(i,o){var a=n(o),s=[];return(s=s.concat(a(i))).concat(a(null))}},9318:(r,e)=>{e.read=function(t,n,i,o,a){var s,u,l=8*a-o-1,c=(1<<l)-1,f=c>>1,h=-7,d=i?a-1:0,v=i?-1:1,g=t[n+d];for(d+=v,s=g&(1<<-h)-1,g>>=-h,h+=l;h>0;s=256*s+t[n+d],d+=v,h-=8);for(u=s&(1<<-h)-1,s>>=-h,h+=o;h>0;u=256*u+t[n+d],d+=v,h-=8);if(s===0)s=1-f;else{if(s===c)return u?NaN:1/0*(g?-1:1);u+=Math.pow(2,o),s-=f}return(g?-1:1)*u*Math.pow(2,s-o)},e.write=function(t,n,i,o,a,s){var u,l,c,f=8*s-a-1,h=(1<<f)-1,d=h>>1,v=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=o?0:s-1,_=o?1:-1,y=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(l=isNaN(n)?1:0,u=h):(u=Math.floor(Math.log(n)/Math.LN2),n*(c=Math.pow(2,-u))<1&&(u--,c*=2),(n+=u+d>=1?v/c:v*Math.pow(2,1-d))*c>=2&&(u++,c/=2),u+d>=h?(l=0,u=h):u+d>=1?(l=(n*c-1)*Math.pow(2,a),u+=d):(l=n*Math.pow(2,d-1)*Math.pow(2,a),u=0));a>=8;t[i+g]=255&l,g+=_,l/=256,a-=8);for(u=u<<a|l,f+=a;f>0;t[i+g]=255&u,g+=_,u/=256,f-=8);t[i+g-_]|=128*y}},5250:function(r,e,t){var n;r=t.nmd(r),(function(){var i,o="Expected a function",a="__lodash_hash_undefined__",s="__lodash_placeholder__",u=32,l=128,c=1/0,f=9007199254740991,h=NaN,d=4294967295,v=[["ary",l],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",u],["partialRight",64],["rearg",256]],g="[object Arguments]",_="[object Array]",y="[object Boolean]",p="[object Date]",m="[object Error]",E="[object Function]",C="[object GeneratorFunction]",P="[object Map]",T="[object Number]",R="[object Object]",D="[object Promise]",L="[object RegExp]",j="[object Set]",F="[object String]",q="[object Symbol]",W="[object WeakMap]",Z="[object ArrayBuffer]",Q="[object DataView]",re="[object Float32Array]",ee="[object Float64Array]",ue="[object Int8Array]",de="[object Int16Array]",se="[object Int32Array]",be="[object Uint8Array]",Le="[object Uint8ClampedArray]",fe="[object Uint16Array]",ce="[object Uint32Array]",Ee=/\b__p \+= '';/g,Ce=/\b(__p \+=) '' \+/g,ke=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ie=/&(?:amp|lt|gt|quot|#39);/g,ve=/[&<>"']/g,we=RegExp(Ie.source),xe=RegExp(ve.source),Fe=/<%-([\s\S]+?)%>/g,He=/<%([\s\S]+?)%>/g,at=/<%=([\s\S]+?)%>/g,wt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,it=/^\w*$/,H=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$=/[\\^$.*+?()[\]{}|]/g,ne=RegExp($.source),Re=/^\s+/,De=/\s/,Be=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Je=/\{\n\/\* \[wrapped with (.+)\] \*/,Tt=/,? & /,Lt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Vt=/[()=,{}\[\]\/\s]/,Nt=/\\(\\)?/g,Jt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Er=/\w*$/,Yt=/^[-+]0x[0-9a-f]+$/i,dt=/^0b[01]+$/i,me=/^\[object .+?Constructor\]$/,nt=/^0o[0-7]+$/i,lt=/^(?:0|[1-9]\d*)$/,ct=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ft=/($^)/,Xt=/['\n\r\u2028\u2029\\]/g,pt="\\ud800-\\udfff",Qt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",mr="\\u2700-\\u27bf",Rr="a-z\\xdf-\\xf6\\xf8-\\xff",ar="A-Z\\xc0-\\xd6\\xd8-\\xde",nr="\\ufe0e\\ufe0f",tr="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",lr="["+pt+"]",Gr="["+tr+"]",fn="["+Qt+"]",In="\\d+",Un="["+mr+"]",hn="["+Rr+"]",$n="[^"+pt+tr+In+mr+Rr+ar+"]",vn="\\ud83c[\\udffb-\\udfff]",Ei="[^"+pt+"]",Li="(?:\\ud83c[\\udde6-\\uddff]){2}",Fr="[\\ud800-\\udbff][\\udc00-\\udfff]",Tn="["+ar+"]",Ni="\\u200d",_o="(?:"+hn+"|"+$n+")",Pi="(?:"+Tn+"|"+$n+")",vi="(?:['’](?:d|ll|m|re|s|t|ve))?",un="(?:['’](?:D|LL|M|RE|S|T|VE))?",qn="(?:"+fn+"|"+vn+")?",Ca="["+nr+"]?",pi=Ca+qn+"(?:"+Ni+"(?:"+[Ei,Li,Fr].join("|")+")"+Ca+qn+")*",Su="(?:"+[Un,Li,Fr].join("|")+")"+pi,Pa="(?:"+[Ei+fn+"?",fn,Li,Fr,lr].join("|")+")",Hi=RegExp("['’]","g"),Ha=RegExp(fn,"g"),ia=RegExp(vn+"(?="+vn+")|"+Pa+pi,"g"),kn=RegExp([Tn+"?"+hn+"+"+vi+"(?="+[Gr,Tn,"$"].join("|")+")",Pi+"+"+un+"(?="+[Gr,Tn+_o,"$"].join("|")+")",Tn+"?"+_o+"+"+vi,Tn+"+"+un,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",In,Su].join("|"),"g"),ui=RegExp("["+Ni+pt+Qt+nr+"]"),pr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Aa=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],lo=-1,Vr={};Vr[re]=Vr[ee]=Vr[ue]=Vr[de]=Vr[se]=Vr[be]=Vr[Le]=Vr[fe]=Vr[ce]=!0,Vr[g]=Vr[_]=Vr[Z]=Vr[y]=Vr[Q]=Vr[p]=Vr[m]=Vr[E]=Vr[P]=Vr[T]=Vr[R]=Vr[L]=Vr[j]=Vr[F]=Vr[W]=!1;var $r={};$r[g]=$r[_]=$r[Z]=$r[Q]=$r[y]=$r[p]=$r[re]=$r[ee]=$r[ue]=$r[de]=$r[se]=$r[P]=$r[T]=$r[R]=$r[L]=$r[j]=$r[F]=$r[q]=$r[be]=$r[Le]=$r[fe]=$r[ce]=!0,$r[m]=$r[E]=$r[W]=!1;var Ya={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ys=parseFloat,eo=parseInt,oa=typeof t.g=="object"&&t.g&&t.g.Object===Object&&t.g,Tu=typeof self=="object"&&self&&self.Object===Object&&self,Dn=oa||Tu||Function("return this")(),Ai=e&&!e.nodeType&&e,Yi=Ai&&r&&!r.nodeType&&r,Cu=Yi&&Yi.exports===Ai,il=Cu&&oa.process,ji=function(){try{return Yi&&Yi.require&&Yi.require("util").types||il&&il.binding&&il.binding("util")}catch{}}(),Xa=ji&&ji.isArrayBuffer,Xs=ji&&ji.isDate,rc=ji&&ji.isMap,nc=ji&&ji.isRegExp,qr=ji&&ji.isSet,Uo=ji&&ji.isTypedArray;function co(ut,gt,yt){switch(yt.length){case 0:return ut.call(gt);case 1:return ut.call(gt,yt[0]);case 2:return ut.call(gt,yt[0],yt[1]);case 3:return ut.call(gt,yt[0],yt[1],yt[2])}return ut.apply(gt,yt)}function ic(ut,gt,yt,Gt){for(var ir=-1,Jr=ut==null?0:ut.length;++ir<Jr;){var Ri=ut[ir];gt(Gt,Ri,yt(Ri),ut)}return Gt}function Wt(ut,gt){for(var yt=-1,Gt=ut==null?0:ut.length;++yt<Gt&&gt(ut[yt],yt,ut)!==!1;);return ut}function $s(ut,gt){for(var yt=ut==null?0:ut.length;yt--&&gt(ut[yt],yt,ut)!==!1;);return ut}function oc(ut,gt){for(var yt=-1,Gt=ut==null?0:ut.length;++yt<Gt;)if(!gt(ut[yt],yt,ut))return!1;return!0}function Ra(ut,gt){for(var yt=-1,Gt=ut==null?0:ut.length,ir=0,Jr=[];++yt<Gt;){var Ri=ut[yt];gt(Ri,yt,ut)&&(Jr[ir++]=Ri)}return Jr}function Pu(ut,gt){return!(ut==null||!ut.length)&&Ks(ut,gt,0)>-1}function wo(ut,gt,yt){for(var Gt=-1,ir=ut==null?0:ut.length;++Gt<ir;)if(yt(gt,ut[Gt]))return!0;return!1}function Kr(ut,gt){for(var yt=-1,Gt=ut==null?0:ut.length,ir=Array(Gt);++yt<Gt;)ir[yt]=gt(ut[yt],yt,ut);return ir}function aa(ut,gt){for(var yt=-1,Gt=gt.length,ir=ut.length;++yt<Gt;)ut[ir+yt]=gt[yt];return ut}function ol(ut,gt,yt,Gt){var ir=-1,Jr=ut==null?0:ut.length;for(Gt&&Jr&&(yt=ut[++ir]);++ir<Jr;)yt=gt(yt,ut[ir],ir,ut);return yt}function lh(ut,gt,yt,Gt){var ir=ut==null?0:ut.length;for(Gt&&ir&&(yt=ut[--ir]);ir--;)yt=gt(yt,ut[ir],ir,ut);return yt}function ac(ut,gt){for(var yt=-1,Gt=ut==null?0:ut.length;++yt<Gt;)if(gt(ut[yt],yt,ut))return!0;return!1}var ch=sc("length");function tf(ut,gt,yt){var Gt;return yt(ut,function(ir,Jr,Ri){if(gt(ir,Jr,Ri))return Gt=Jr,!1}),Gt}function al(ut,gt,yt,Gt){for(var ir=ut.length,Jr=yt+(Gt?1:-1);Gt?Jr--:++Jr<ir;)if(gt(ut[Jr],Jr,ut))return Jr;return-1}function Ks(ut,gt,yt){return gt==gt?function(Gt,ir,Jr){for(var Ri=Jr-1,ro=Gt.length;++Ri<ro;)if(Gt[Ri]===ir)return Ri;return-1}(ut,gt,yt):al(ut,$a,yt)}function ws(ut,gt,yt,Gt){for(var ir=yt-1,Jr=ut.length;++ir<Jr;)if(Gt(ut[ir],gt))return ir;return-1}function $a(ut){return ut!=ut}function sl(ut,gt){var yt=ut==null?0:ut.length;return yt?Zs(ut,gt)/yt:h}function sc(ut){return function(gt){return gt==null?i:gt[ut]}}function uc(ut){return function(gt){return ut==null?i:ut[gt]}}function ul(ut,gt,yt,Gt,ir){return ir(ut,function(Jr,Ri,ro){yt=Gt?(Gt=!1,Jr):gt(yt,Jr,Ri,ro)}),yt}function Zs(ut,gt){for(var yt,Gt=-1,ir=ut.length;++Gt<ir;){var Jr=gt(ut[Gt]);Jr!==i&&(yt=yt===i?Jr:yt+Jr)}return yt}function ll(ut,gt){for(var yt=-1,Gt=Array(ut);++yt<ut;)Gt[yt]=gt(yt);return Gt}function pn(ut){return ut&&ut.slice(0,Ia(ut)+1).replace(Re,"")}function Dr(ut){return function(gt){return ut(gt)}}function lc(ut,gt){return Kr(gt,function(yt){return ut[yt]})}function Qs(ut,gt){return ut.has(gt)}function rf(ut,gt){for(var yt=-1,Gt=ut.length;++yt<Gt&&Ks(gt,ut[yt],0)>-1;);return yt}function Es(ut,gt){for(var yt=ut.length;yt--&&Ks(gt,ut[yt],0)>-1;);return yt}var Ka=uc({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),fh=uc({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Od(ut){return"\\"+Ya[ut]}function Js(ut){return ui.test(ut)}function zn(ut){var gt=-1,yt=Array(ut.size);return ut.forEach(function(Gt,ir){yt[++gt]=[ir,Gt]}),yt}function cc(ut,gt){return function(yt){return ut(gt(yt))}}function to(ut,gt){for(var yt=-1,Gt=ut.length,ir=0,Jr=[];++yt<Gt;){var Ri=ut[yt];Ri!==gt&&Ri!==s||(ut[yt]=s,Jr[ir++]=yt)}return Jr}function eu(ut){var gt=-1,yt=Array(ut.size);return ut.forEach(function(Gt){yt[++gt]=Gt}),yt}function fc(ut){var gt=-1,yt=Array(ut.size);return ut.forEach(function(Gt){yt[++gt]=[Gt,Gt]}),yt}function Fi(ut){return Js(ut)?function(gt){for(var yt=ia.lastIndex=0;ia.test(gt);)++yt;return yt}(ut):ch(ut)}function Kn(ut){return Js(ut)?function(gt){return gt.match(ia)||[]}(ut):function(gt){return gt.split("")}(ut)}function Ia(ut){for(var gt=ut.length;gt--&&De.test(ut.charAt(gt)););return gt}var ka=uc({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),sa=function ut(gt){var yt,Gt=(gt=gt==null?Dn:sa.defaults(Dn.Object(),gt,sa.pick(Dn,Aa))).Array,ir=gt.Date,Jr=gt.Error,Ri=gt.Function,ro=gt.Math,gn=gt.Object,nf=gt.RegExp,Gn=gt.String,gi=gt.TypeError,hc=Gt.prototype,ep=Ri.prototype,Au=gn.prototype,cl=gt["__core-js_shared__"],Ru=ep.toString,en=Au.hasOwnProperty,dc=0,tu=(yt=/[^.]+$/.exec(cl&&cl.keys&&cl.keys.IE_PROTO||""))?"Symbol(src)_1."+yt:"",Os=Au.toString,hh=Ru.call(gn),Iu=Dn._,of=nf("^"+Ru.call(en).replace($,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xs=Cu?gt.Buffer:i,Za=gt.Symbol,vc=gt.Uint8Array,tp=xs?xs.allocUnsafe:i,ku=cc(gn.getPrototypeOf,gn),af=gn.create,xd=Au.propertyIsEnumerable,sf=hc.splice,fo=Za?Za.isConcatSpreadable:i,Du=Za?Za.iterator:i,Qa=Za?Za.toStringTag:i,uf=function(){try{var A=cu(gn,"defineProperty");return A({},"",{}),A}catch{}}(),rp=gt.clearTimeout!==Dn.clearTimeout&&gt.clearTimeout,np=ir&&ir.now!==Dn.Date.now&&ir.now,Eo=gt.setTimeout!==Dn.setTimeout&&gt.setTimeout,dh=ro.ceil,vh=ro.floor,lf=gn.getOwnPropertySymbols,Mu=xs?xs.isBuffer:i,Sd=gt.isFinite,Oo=hc.join,no=cc(gn.keys,gn),Cn=ro.max,Vn=ro.min,ph=ir.now,Og=gt.parseInt,ip=ro.random,op=hc.reverse,rr=cu(gt,"DataView"),io=cu(gt,"Map"),Zn=cu(gt,"Promise"),fl=cu(gt,"Set"),pc=cu(gt,"WeakMap"),gc=cu(gn,"create"),cf=pc&&new pc,hl={},dl=du(rr),Qe=du(io),vt=du(Zn),rt=du(fl),$t=du(pc),br=Za?Za.prototype:i,Yr=br?br.valueOf:i,yi=br?br.toString:i;function pe(A){if(Mn(A)&&!Cr(A)&&!(A instanceof Br)){if(A instanceof Qn)return A;if(en.call(A,"__wrapped__"))return Ld(A)}return new Qn(A)}var Ss=function(){function A(){}return function(N){if(!Yn(N))return{};if(af)return af(N);A.prototype=N;var G=new A;return A.prototype=i,G}}();function gh(){}function Qn(A,N){this.__wrapped__=A,this.__actions__=[],this.__chain__=!!N,this.__index__=0,this.__values__=i}function Br(A){this.__wrapped__=A,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=d,this.__views__=[]}function ru(A){var N=-1,G=A==null?0:A.length;for(this.clear();++N<G;){var te=A[N];this.set(te[0],te[1])}}function qo(A){var N=-1,G=A==null?0:A.length;for(this.clear();++N<G;){var te=A[N];this.set(te[0],te[1])}}function Xi(A){var N=-1,G=A==null?0:A.length;for(this.clear();++N<G;){var te=A[N];this.set(te[0],te[1])}}function Ja(A){var N=-1,G=A==null?0:A.length;for(this.__data__=new Xi;++N<G;)this.add(A[N])}function Nr(A){var N=this.__data__=new qo(A);this.size=N.size}function ap(A,N){var G=Cr(A),te=!G&&Yo(A),ae=!G&&!te&&Qi(A),Se=!G&&!te&&!ae&&fs(A),ze=G||te||ae||Se,Ye=ze?ll(A.length,Gn):[],st=Ye.length;for(var Et in A)!N&&!en.call(A,Et)||ze&&(Et=="length"||ae&&(Et=="offset"||Et=="parent")||Se&&(Et=="buffer"||Et=="byteLength"||Et=="byteOffset")||Ki(Et,st))||Ye.push(Et);return Ye}function yh(A){var N=A.length;return N?A[Fu(0,N-1)]:i}function ua(A,N){return Cf(So(A),Da(N,0,A.length))}function Td(A){return Cf(So(A))}function Cd(A,N,G){(G!==i&&!oo(A[N],G)||G===i&&!(N in A))&&Ts(A,N,G)}function ff(A,N,G){var te=A[N];en.call(A,N)&&oo(te,G)&&(G!==i||N in A)||Ts(A,N,G)}function Lu(A,N){for(var G=A.length;G--;)if(oo(A[G][0],N))return G;return-1}function zr(A,N,G,te){return Go(A,function(ae,Se,ze){N(te,ae,G(ae),ze)}),te}function vl(A,N){return A&&ts(N,qi(N),A)}function Ts(A,N,G){N=="__proto__"&&uf?uf(A,N,{configurable:!0,enumerable:!0,value:G,writable:!0}):A[N]=G}function pl(A,N){for(var G=-1,te=N.length,ae=Gt(te),Se=A==null;++G<te;)ae[G]=Se?i:Yd(A,N[G]);return ae}function Da(A,N,G){return A==A&&(G!==i&&(A=A<=G?A:G),N!==i&&(A=A>=N?A:N)),A}function zo(A,N,G,te,ae,Se){var ze,Ye=1&N,st=2&N,Et=4&N;if(G&&(ze=ae?G(A,te,ae,Se):G(A)),ze!==i)return ze;if(!Yn(A))return A;var _t=Cr(A);if(_t){if(ze=function(xt){var Dt=xt.length,vr=new xt.constructor(Dt);return Dt&&typeof xt[0]=="string"&&en.call(xt,"index")&&(vr.index=xt.index,vr.input=xt.input),vr}(A),!Ye)return So(A,ze)}else{var Rt=Pn(A),Kt=Rt==E||Rt==C;if(Qi(A))return Ol(A,Ye);if(Rt==R||Rt==g||Kt&&!ae){if(ze=st||Kt?{}:Cl(A),!Ye)return st?function(xt,Dt){return ts(xt,Tl(xt),Dt)}(A,function(xt,Dt){return xt&&ts(Dt,Ur(Dt),xt)}(ze,A)):function(xt,Dt){return ts(xt,kd(xt),Dt)}(A,vl(ze,A))}else{if(!$r[Rt])return ae?A:{};ze=function(xt,Dt,vr){var Ft,Or=xt.constructor;switch(Dt){case Z:return Ec(xt);case y:case p:return new Or(+xt);case Q:return function(wr,tn){var sr=tn?Ec(wr.buffer):wr.buffer;return new wr.constructor(sr,wr.byteOffset,wr.byteLength)}(xt,vr);case re:case ee:case ue:case de:case se:case be:case Le:case fe:case ce:return _f(xt,vr);case P:return new Or;case T:case F:return new Or(xt);case L:return function(wr){var tn=new wr.constructor(wr.source,Er.exec(wr));return tn.lastIndex=wr.lastIndex,tn}(xt);case j:return new Or;case q:return Ft=xt,Yr?gn(Yr.call(Ft)):{}}}(A,Rt,Ye)}}Se||(Se=new Nr);var Zt=Se.get(A);if(Zt)return Zt;Se.set(A,ze),ga(A)?A.forEach(function(xt){ze.add(zo(xt,N,G,xt,A,Se))}):Bh(A)&&A.forEach(function(xt,Dt){ze.set(Dt,zo(xt,N,G,Dt,A,Se))});var cr=_t?i:(Et?st?ss:Pc:st?Ur:qi)(A);return Wt(cr||A,function(xt,Dt){cr&&(xt=A[Dt=xt]),ff(ze,Dt,zo(xt,N,G,Dt,A,Se))}),ze}function gl(A,N,G){var te=G.length;if(A==null)return!te;for(A=gn(A);te--;){var ae=G[te],Se=N[ae],ze=A[ae];if(ze===i&&!(ae in A)||!Se(ze))return!1}return!0}function hf(A,N,G){if(typeof A!="function")throw new gi(o);return Rl(function(){A.apply(i,G)},N)}function Cs(A,N,G,te){var ae=-1,Se=Pu,ze=!0,Ye=A.length,st=[],Et=N.length;if(!Ye)return st;G&&(N=Kr(N,Dr(G))),te?(Se=wo,ze=!1):N.length>=200&&(Se=Qs,ze=!1,N=new Ja(N));e:for(;++ae<Ye;){var _t=A[ae],Rt=G==null?_t:G(_t);if(_t=te||_t!==0?_t:0,ze&&Rt==Rt){for(var Kt=Et;Kt--;)if(N[Kt]===Rt)continue e;st.push(_t)}else Se(N,Rt,te)||st.push(_t)}return st}pe.templateSettings={escape:Fe,evaluate:He,interpolate:at,variable:"",imports:{_:pe}},pe.prototype=gh.prototype,pe.prototype.constructor=pe,Qn.prototype=Ss(gh.prototype),Qn.prototype.constructor=Qn,Br.prototype=Ss(gh.prototype),Br.prototype.constructor=Br,ru.prototype.clear=function(){this.__data__=gc?gc(null):{},this.size=0},ru.prototype.delete=function(A){var N=this.has(A)&&delete this.__data__[A];return this.size-=N?1:0,N},ru.prototype.get=function(A){var N=this.__data__;if(gc){var G=N[A];return G===a?i:G}return en.call(N,A)?N[A]:i},ru.prototype.has=function(A){var N=this.__data__;return gc?N[A]!==i:en.call(N,A)},ru.prototype.set=function(A,N){var G=this.__data__;return this.size+=this.has(A)?0:1,G[A]=gc&&N===i?a:N,this},qo.prototype.clear=function(){this.__data__=[],this.size=0},qo.prototype.delete=function(A){var N=this.__data__,G=Lu(N,A);return!(G<0||(G==N.length-1?N.pop():sf.call(N,G,1),--this.size,0))},qo.prototype.get=function(A){var N=this.__data__,G=Lu(N,A);return G<0?i:N[G][1]},qo.prototype.has=function(A){return Lu(this.__data__,A)>-1},qo.prototype.set=function(A,N){var G=this.__data__,te=Lu(G,A);return te<0?(++this.size,G.push([A,N])):G[te][1]=N,this},Xi.prototype.clear=function(){this.size=0,this.__data__={hash:new ru,map:new(io||qo),string:new ru}},Xi.prototype.delete=function(A){var N=lu(this,A).delete(A);return this.size-=N?1:0,N},Xi.prototype.get=function(A){return lu(this,A).get(A)},Xi.prototype.has=function(A){return lu(this,A).has(A)},Xi.prototype.set=function(A,N){var G=lu(this,A),te=G.size;return G.set(A,N),this.size+=G.size==te?0:1,this},Ja.prototype.add=Ja.prototype.push=function(A){return this.__data__.set(A,a),this},Ja.prototype.has=function(A){return this.__data__.has(A)},Nr.prototype.clear=function(){this.__data__=new qo,this.size=0},Nr.prototype.delete=function(A){var N=this.__data__,G=N.delete(A);return this.size=N.size,G},Nr.prototype.get=function(A){return this.__data__.get(A)},Nr.prototype.has=function(A){return this.__data__.has(A)},Nr.prototype.set=function(A,N){var G=this.__data__;if(G instanceof qo){var te=G.__data__;if(!io||te.length<199)return te.push([A,N]),this.size=++G.size,this;G=this.__data__=new Xi(te)}return G.set(A,N),this.size=G.size,this};var Go=Rs(Ps),xo=Rs(vf,!0);function sp(A,N){var G=!0;return Go(A,function(te,ae,Se){return G=!!N(te,ae,Se)}),G}function df(A,N,G){for(var te=-1,ae=A.length;++te<ae;){var Se=A[te],ze=N(Se);if(ze!=null&&(Ye===i?ze==ze&&!Co(ze):G(ze,Ye)))var Ye=ze,st=Se}return st}function Pd(A,N){var G=[];return Go(A,function(te,ae,Se){N(te,ae,Se)&&G.push(te)}),G}function Wn(A,N,G,te,ae){var Se=-1,ze=A.length;for(G||(G=Pl),ae||(ae=[]);++Se<ze;){var Ye=A[Se];N>0&&G(Ye)?N>1?Wn(Ye,N-1,G,te,ae):aa(ae,Ye):te||(ae[ae.length]=Ye)}return ae}var yl=xc(),mh=xc(!0);function Ps(A,N){return A&&yl(A,N,qi)}function vf(A,N){return A&&mh(A,N,qi)}function pf(A,N){return Ra(N,function(G){return Ba(A[G])})}function nu(A,N){for(var G=0,te=(N=po(N,A)).length;A!=null&&G<te;)A=A[Oi(N[G++])];return G&&G==te?A:i}function Ii(A,N,G){var te=N(A);return Cr(A)?te:aa(te,G(A))}function dn(A){return A==null?A===i?"[object Undefined]":"[object Null]":Qa&&Qa in gn(A)?function(N){var G=en.call(N,Qa),te=N[Qa];try{N[Qa]=i;var ae=!0}catch{}var Se=Os.call(N);return ae&&(G?N[Qa]=te:delete N[Qa]),Se}(A):function(N){return Os.call(N)}(A)}function bh(A,N){return A>N}function ml(A,N){return A!=null&&en.call(A,N)}function _h(A,N){return A!=null&&N in gn(A)}function Nu(A,N,G){for(var te=G?wo:Pu,ae=A[0].length,Se=A.length,ze=Se,Ye=Gt(Se),st=1/0,Et=[];ze--;){var _t=A[ze];ze&&N&&(_t=Kr(_t,Dr(N))),st=Vn(_t.length,st),Ye[ze]=!G&&(N||ae>=120&&_t.length>=120)?new Ja(ze&&_t):i}_t=A[0];var Rt=-1,Kt=Ye[0];e:for(;++Rt<ae&&Et.length<st;){var Zt=_t[Rt],cr=N?N(Zt):Zt;if(Zt=G||Zt!==0?Zt:0,!(Kt?Qs(Kt,cr):te(Et,cr,G))){for(ze=Se;--ze;){var xt=Ye[ze];if(!(xt?Qs(xt,cr):te(A[ze],cr,G)))continue e}Kt&&Kt.push(cr),Et.push(Zt)}}return Et}function iu(A,N,G){var te=(A=dp(A,N=po(N,A)))==null?A:A[Oi(li(N))];return te==null?i:co(te,A,G)}function Ma(A){return Mn(A)&&dn(A)==g}function ju(A,N,G,te,ae){return A===N||(A==null||N==null||!Mn(A)&&!Mn(N)?A!=A&&N!=N:function(Se,ze,Ye,st,Et,_t){var Rt=Cr(Se),Kt=Cr(ze),Zt=Rt?_:Pn(Se),cr=Kt?_:Pn(ze),xt=(Zt=Zt==g?R:Zt)==R,Dt=(cr=cr==g?R:cr)==R,vr=Zt==cr;if(vr&&Qi(Se)){if(!Qi(ze))return!1;Rt=!0,xt=!1}if(vr&&!xt)return _t||(_t=new Nr),Rt||fs(Se)?Ho(Se,ze,Ye,st,Et,_t):function(sr,dr,xi,Xn,Ro,Ln,mo){switch(xi){case Q:if(sr.byteLength!=dr.byteLength||sr.byteOffset!=dr.byteOffset)return!1;sr=sr.buffer,dr=dr.buffer;case Z:return!(sr.byteLength!=dr.byteLength||!Ln(new vc(sr),new vc(dr)));case y:case p:case T:return oo(+sr,+dr);case m:return sr.name==dr.name&&sr.message==dr.message;case L:case F:return sr==dr+"";case P:var Ds=zn;case j:var Ms=1&Xn;if(Ds||(Ds=eu),sr.size!=dr.size&&!Ms)return!1;var vs=mo.get(sr);if(vs)return vs==dr;Xn|=2,mo.set(sr,dr);var ps=Ho(Ds(sr),Ds(dr),Xn,Ro,Ln,mo);return mo.delete(sr),ps;case q:if(Yr)return Yr.call(sr)==Yr.call(dr)}return!1}(Se,ze,Zt,Ye,st,Et,_t);if(!(1&Ye)){var Ft=xt&&en.call(Se,"__wrapped__"),Or=Dt&&en.call(ze,"__wrapped__");if(Ft||Or){var wr=Ft?Se.value():Se,tn=Or?ze.value():ze;return _t||(_t=new Nr),Et(wr,tn,Ye,st,_t)}}return!!vr&&(_t||(_t=new Nr),function(sr,dr,xi,Xn,Ro,Ln){var mo=1&xi,Ds=Pc(sr),Ms=Ds.length;if(Ms!=Pc(dr).length&&!mo)return!1;for(var vs=Ms;vs--;){var ps=Ds[vs];if(!(mo?ps in dr:en.call(dr,ps)))return!1}var Ls=Ln.get(sr),sv=Ln.get(dr);if(Ls&&sv)return Ls==dr&&sv==sr;var qf=!0;Ln.set(sr,dr),Ln.set(dr,sr);for(var uv=mo;++vs<Ms;){var Ns=sr[ps=Ds[vs]],Fc=dr[ps];if(Xn)var lv=mo?Xn(Fc,Ns,ps,dr,sr,Ln):Xn(Ns,Fc,ps,sr,dr,Ln);if(!(lv===i?Ns===Fc||Ro(Ns,Fc,xi,Xn,Ln):lv)){qf=!1;break}uv||(uv=ps=="constructor")}if(qf&&!uv){var zf=sr.constructor,Gf=dr.constructor;zf==Gf||!("constructor"in sr)||!("constructor"in dr)||typeof zf=="function"&&zf instanceof zf&&typeof Gf=="function"&&Gf instanceof Gf||(qf=!1)}return Ln.delete(sr),Ln.delete(dr),qf}(Se,ze,Ye,st,Et,_t))}(A,N,G,te,ju,ae))}function ou(A,N,G,te){var ae=G.length,Se=ae,ze=!te;if(A==null)return!Se;for(A=gn(A);ae--;){var Ye=G[ae];if(ze&&Ye[2]?Ye[1]!==A[Ye[0]]:!(Ye[0]in A))return!1}for(;++ae<Se;){var st=(Ye=G[ae])[0],Et=A[st],_t=Ye[1];if(ze&&Ye[2]){if(Et===i&&!(st in A))return!1}else{var Rt=new Nr;if(te)var Kt=te(Et,_t,st,A,N,Rt);if(!(Kt===i?ju(_t,Et,3,te,Rt):Kt))return!1}}return!0}function yc(A){return!(!Yn(A)||(N=A,tu&&tu in N))&&(Ba(A)?of:me).test(du(A));var N}function bl(A){return typeof A=="function"?A:A==null?Ko:typeof A=="object"?Cr(A)?mc(A[0],A[1]):Ad(A):tv(A)}function au(A){if(!fu(A))return no(A);var N=[];for(var G in gn(A))en.call(A,G)&&G!="constructor"&&N.push(G);return N}function As(A,N){return A<N}function up(A,N){var G=-1,te=To(A)?Gt(A.length):[];return Go(A,function(ae,Se,ze){te[++G]=N(ae,Se,ze)}),te}function Ad(A){var N=Sf(A);return N.length==1&&N[0][2]?ja(N[0][0],N[0][1]):function(G){return G===A||ou(G,A,N)}}function mc(A,N){return Bi(A)&&hp(N)?ja(Oi(A),N):function(G){var te=Yd(G,A);return te===i&&te===N?Xd(G,A):ju(N,te,3)}}function wh(A,N,G,te,ae){A!==N&&yl(N,function(Se,ze){if(ae||(ae=new Nr),Yn(Se))(function(st,Et,_t,Rt,Kt,Zt,cr){var xt=hu(st,_t),Dt=hu(Et,_t),vr=cr.get(Dt);if(vr)Cd(st,_t,vr);else{var Ft=Zt?Zt(xt,Dt,_t+"",st,Et,cr):i,Or=Ft===i;if(Or){var wr=Cr(Dt),tn=!wr&&Qi(Dt),sr=!wr&&!tn&&fs(Dt);Ft=Dt,wr||tn||sr?Cr(xt)?Ft=xt:Hn(xt)?Ft=So(xt):tn?(Or=!1,Ft=Ol(Dt,!0)):sr?(Or=!1,Ft=_f(Dt,!0)):Ft=[]:Dc(Dt)||Yo(Dt)?(Ft=xt,Yo(xt)?Ft=zh(xt):Yn(xt)&&!Ba(xt)||(Ft=Cl(Dt))):Or=!1}Or&&(cr.set(Dt,Ft),Kt(Ft,Dt,Rt,Zt,cr),cr.delete(Dt)),Cd(st,_t,Ft)}})(A,N,ze,G,wh,te,ae);else{var Ye=te?te(hu(A,ze),Se,ze+"",A,N,ae):i;Ye===i&&(Ye=Se),Cd(A,ze,Ye)}},Ur)}function bc(A,N){var G=A.length;if(G)return Ki(N+=N<0?G:0,G)?A[N]:i}function _c(A,N,G){N=N.length?Kr(N,function(Se){return Cr(Se)?function(ze){return nu(ze,Se.length===1?Se[0]:Se)}:Se}):[Ko];var te=-1;N=Kr(N,Dr(_r()));var ae=up(A,function(Se,ze,Ye){var st=Kr(N,function(Et){return Et(Se)});return{criteria:st,index:++te,value:Se}});return function(Se,ze){var Ye=Se.length;for(Se.sort(function(st,Et){return function(_t,Rt,Kt){for(var Zt=-1,cr=_t.criteria,xt=Rt.criteria,Dt=cr.length,vr=Kt.length;++Zt<Dt;){var Ft=fp(cr[Zt],xt[Zt]);if(Ft)return Zt>=vr?Ft:Ft*(Kt[Zt]=="desc"?-1:1)}return _t.index-Rt.index}(st,Et,G)});Ye--;)Se[Ye]=Se[Ye].value;return Se}(ae)}function la(A,N,G){for(var te=-1,ae=N.length,Se={};++te<ae;){var ze=N[te],Ye=nu(A,ze);G(Ye,ze)&&_l(Se,po(ze,A),Ye)}return Se}function su(A,N,G,te){var ae=te?ws:Ks,Se=-1,ze=N.length,Ye=A;for(A===N&&(N=So(N)),G&&(Ye=Kr(A,Dr(G)));++Se<ze;)for(var st=0,Et=N[Se],_t=G?G(Et):Et;(st=ae(Ye,_t,st,te))>-1;)Ye!==A&&sf.call(Ye,st,1),sf.call(A,st,1);return A}function _e(A,N){for(var G=A?N.length:0,te=G-1;G--;){var ae=N[G];if(G==te||ae!==Se){var Se=ae;Ki(ae)?sf.call(A,ae,1):Eh(A,ae)}}return A}function Fu(A,N){return A+vh(ip()*(N-A+1))}function Bu(A,N){var G="";if(!A||N<1||N>f)return G;do N%2&&(G+=A),(N=vh(N/2))&&(A+=A);while(N);return G}function gr(A,N){return Ah(Tf(A,N,Ko),A+"")}function jr(A){return yh(mu(A))}function gf(A,N){var G=mu(A);return Cf(G,Da(N,0,G.length))}function _l(A,N,G,te){if(!Yn(A))return A;for(var ae=-1,Se=(N=po(N,A)).length,ze=Se-1,Ye=A;Ye!=null&&++ae<Se;){var st=Oi(N[ae]),Et=G;if(st==="__proto__"||st==="constructor"||st==="prototype")return A;if(ae!=ze){var _t=Ye[st];(Et=te?te(_t,st,Ye):i)===i&&(Et=Yn(_t)?_t:Ki(N[ae+1])?[]:{})}ff(Ye,st,Et),Ye=Ye[st]}return A}var yf=cf?function(A,N){return cf.set(A,N),A}:Ko,es=uf?function(A,N){return uf(A,"toString",{configurable:!0,enumerable:!1,value:ci(N),writable:!0})}:Ko;function xg(A){return Cf(mu(A))}function La(A,N,G){var te=-1,ae=A.length;N<0&&(N=-N>ae?0:ae+N),(G=G>ae?ae:G)<0&&(G+=ae),ae=N>G?0:G-N>>>0,N>>>=0;for(var Se=Gt(ae);++te<ae;)Se[te]=A[te+N];return Se}function lp(A,N){var G;return Go(A,function(te,ae,Se){return!(G=N(te,ae,Se))}),!!G}function mf(A,N,G){var te=0,ae=A==null?te:A.length;if(typeof N=="number"&&N==N&&ae<=2147483647){for(;te<ae;){var Se=te+ae>>>1,ze=A[Se];ze!==null&&!Co(ze)&&(G?ze<=N:ze<N)?te=Se+1:ae=Se}return ae}return wl(A,N,Ko,G)}function wl(A,N,G,te){var ae=0,Se=A==null?0:A.length;if(Se===0)return 0;for(var ze=(N=G(N))!=N,Ye=N===null,st=Co(N),Et=N===i;ae<Se;){var _t=vh((ae+Se)/2),Rt=G(A[_t]),Kt=Rt!==i,Zt=Rt===null,cr=Rt==Rt,xt=Co(Rt);if(ze)var Dt=te||cr;else Dt=Et?cr&&(te||Kt):Ye?cr&&Kt&&(te||!Zt):st?cr&&Kt&&!Zt&&(te||!xt):!Zt&&!xt&&(te?Rt<=N:Rt<N);Dt?ae=_t+1:Se=_t}return Vn(Se,4294967294)}function Na(A,N){for(var G=-1,te=A.length,ae=0,Se=[];++G<te;){var ze=A[G],Ye=N?N(ze):ze;if(!G||!oo(Ye,st)){var st=Ye;Se[ae++]=ze===0?0:ze}}return Se}function Rd(A){return typeof A=="number"?A:Co(A)?h:+A}function ca(A){if(typeof A=="string")return A;if(Cr(A))return Kr(A,ca)+"";if(Co(A))return yi?yi.call(A):"";var N=A+"";return N=="0"&&1/A==-1/0?"-0":N}function or(A,N,G){var te=-1,ae=Pu,Se=A.length,ze=!0,Ye=[],st=Ye;if(G)ze=!1,ae=wo;else if(Se>=200){var Et=N?null:xf(A);if(Et)return eu(Et);ze=!1,ae=Qs,st=new Ja}else st=N?[]:Ye;e:for(;++te<Se;){var _t=A[te],Rt=N?N(_t):_t;if(_t=G||_t!==0?_t:0,ze&&Rt==Rt){for(var Kt=st.length;Kt--;)if(st[Kt]===Rt)continue e;N&&st.push(Rt),Ye.push(_t)}else ae(st,Rt,G)||(st!==Ye&&st.push(Rt),Ye.push(_t))}return Ye}function Eh(A,N){return(A=dp(A,N=po(N,A)))==null||delete A[Oi(li(N))]}function ho(A,N,G,te){return _l(A,N,G(nu(A,N)),te)}function vo(A,N,G,te){for(var ae=A.length,Se=te?ae:-1;(te?Se--:++Se<ae)&&N(A[Se],Se,A););return G?La(A,te?0:Se,te?Se+1:ae):La(A,te?Se+1:0,te?ae:Se)}function fa(A,N){var G=A;return G instanceof Br&&(G=G.value()),ol(N,function(te,ae){return ae.func.apply(ae.thisArg,aa([te],ae.args))},G)}function bf(A,N,G){var te=A.length;if(te<2)return te?or(A[0]):[];for(var ae=-1,Se=Gt(te);++ae<te;)for(var ze=A[ae],Ye=-1;++Ye<te;)Ye!=ae&&(Se[ae]=Cs(Se[ae]||ze,A[Ye],N,G));return or(Wn(Se,1),N,G)}function cp(A,N,G){for(var te=-1,ae=A.length,Se=N.length,ze={};++te<ae;){var Ye=te<Se?N[te]:i;G(ze,A[te],Ye)}return ze}function El(A){return Hn(A)?A:[]}function wc(A){return typeof A=="function"?A:Ko}function po(A,N){return Cr(A)?A:Bi(A,N)?[A]:Rh(ln(A))}var Sg=gr;function ha(A,N,G){var te=A.length;return G=G===i?te:G,!N&&G>=te?A:La(A,N,G)}var da=rp||function(A){return Dn.clearTimeout(A)};function Ol(A,N){if(N)return A.slice();var G=A.length,te=tp?tp(G):new A.constructor(G);return A.copy(te),te}function Ec(A){var N=new A.constructor(A.byteLength);return new vc(N).set(new vc(A)),N}function _f(A,N){var G=N?Ec(A.buffer):A.buffer;return new A.constructor(G,A.byteOffset,A.length)}function fp(A,N){if(A!==N){var G=A!==i,te=A===null,ae=A==A,Se=Co(A),ze=N!==i,Ye=N===null,st=N==N,Et=Co(N);if(!Ye&&!Et&&!Se&&A>N||Se&&ze&&st&&!Ye&&!Et||te&&ze&&st||!G&&st||!ae)return 1;if(!te&&!Se&&!Et&&A<N||Et&&G&&ae&&!te&&!Se||Ye&&G&&ae||!ze&&ae||!st)return-1}return 0}function Oc(A,N,G,te){for(var ae=-1,Se=A.length,ze=G.length,Ye=-1,st=N.length,Et=Cn(Se-ze,0),_t=Gt(st+Et),Rt=!te;++Ye<st;)_t[Ye]=N[Ye];for(;++ae<ze;)(Rt||ae<Se)&&(_t[G[ae]]=A[ae]);for(;Et--;)_t[Ye++]=A[ae++];return _t}function Oh(A,N,G,te){for(var ae=-1,Se=A.length,ze=-1,Ye=G.length,st=-1,Et=N.length,_t=Cn(Se-Ye,0),Rt=Gt(_t+Et),Kt=!te;++ae<_t;)Rt[ae]=A[ae];for(var Zt=ae;++st<Et;)Rt[Zt+st]=N[st];for(;++ze<Ye;)(Kt||ae<Se)&&(Rt[Zt+G[ze]]=A[ae++]);return Rt}function So(A,N){var G=-1,te=A.length;for(N||(N=Gt(te));++G<te;)N[G]=A[G];return N}function ts(A,N,G,te){var ae=!G;G||(G={});for(var Se=-1,ze=N.length;++Se<ze;){var Ye=N[Se],st=te?te(G[Ye],A[Ye],Ye,G,A):i;st===i&&(st=A[Ye]),ae?Ts(G,Ye,st):ff(G,Ye,st)}return G}function wf(A,N){return function(G,te){var ae=Cr(G)?ic:zr,Se=N?N():{};return ae(G,A,_r(te,2),Se)}}function Uu(A){return gr(function(N,G){var te=-1,ae=G.length,Se=ae>1?G[ae-1]:i,ze=ae>2?G[2]:i;for(Se=A.length>3&&typeof Se=="function"?(ae--,Se):i,ze&&go(G[0],G[1],ze)&&(Se=ae<3?i:Se,ae=1),N=gn(N);++te<ae;){var Ye=G[te];Ye&&A(N,Ye,te,Se)}return N})}function Rs(A,N){return function(G,te){if(G==null)return G;if(!To(G))return A(G,te);for(var ae=G.length,Se=N?ae:-1,ze=gn(G);(N?Se--:++Se<ae)&&te(ze[Se],Se,ze)!==!1;);return G}}function xc(A){return function(N,G,te){for(var ae=-1,Se=gn(N),ze=te(N),Ye=ze.length;Ye--;){var st=ze[A?Ye:++ae];if(G(Se[st],st,Se)===!1)break}return N}}function rs(A){return function(N){var G=Js(N=ln(N))?Kn(N):i,te=G?G[0]:N.charAt(0),ae=G?ha(G,1).join(""):N.slice(1);return te[A]()+ae}}function xl(A){return function(N){return ol(Ff(hs(N).replace(Hi,"")),A,"")}}function uu(A){return function(){var N=arguments;switch(N.length){case 0:return new A;case 1:return new A(N[0]);case 2:return new A(N[0],N[1]);case 3:return new A(N[0],N[1],N[2]);case 4:return new A(N[0],N[1],N[2],N[3]);case 5:return new A(N[0],N[1],N[2],N[3],N[4]);case 6:return new A(N[0],N[1],N[2],N[3],N[4],N[5]);case 7:return new A(N[0],N[1],N[2],N[3],N[4],N[5],N[6])}var G=Ss(A.prototype),te=A.apply(G,N);return Yn(te)?te:G}}function ns(A){return function(N,G,te){var ae=gn(N);if(!To(N)){var Se=_r(G,3);N=qi(N),G=function(Ye){return Se(ae[Ye],Ye,ae)}}var ze=A(N,G,te);return ze>-1?ae[Se?N[ze]:ze]:i}}function Ef(A){return va(function(N){var G=N.length,te=G,ae=Qn.prototype.thru;for(A&&N.reverse();te--;){var Se=N[te];if(typeof Se!="function")throw new gi(o);if(ae&&!ze&&$i(Se)=="wrapper")var ze=new Qn([],!0)}for(te=ze?te:G;++te<G;){var Ye=$i(Se=N[te]),st=Ye=="wrapper"?Th(Se):i;ze=st&&Al(st[0])&&st[1]==424&&!st[4].length&&st[9]==1?ze[$i(st[0])].apply(ze,st[3]):Se.length==1&&Al(Se)?ze[Ye]():ze.thru(Se)}return function(){var Et=arguments,_t=Et[0];if(ze&&Et.length==1&&Cr(_t))return ze.plant(_t).value();for(var Rt=0,Kt=G?N[Rt].apply(this,Et):_t;++Rt<G;)Kt=N[Rt].call(this,Kt);return Kt}})}function is(A,N,G,te,ae,Se,ze,Ye,st,Et){var _t=N&l,Rt=1&N,Kt=2&N,Zt=24&N,cr=512&N,xt=Kt?i:uu(A);return function Dt(){for(var vr=arguments.length,Ft=Gt(vr),Or=vr;Or--;)Ft[Or]=arguments[Or];if(Zt)var wr=qu(Dt),tn=function(Xn,Ro){for(var Ln=Xn.length,mo=0;Ln--;)Xn[Ln]===Ro&&++mo;return mo}(Ft,wr);if(te&&(Ft=Oc(Ft,te,ae,Zt)),Se&&(Ft=Oh(Ft,Se,ze,Zt)),vr-=tn,Zt&&vr<Et){var sr=to(Ft,wr);return Sh(A,N,is,Dt.placeholder,G,Ft,sr,Ye,st,Et-vr)}var dr=Rt?G:this,xi=Kt?dr[A]:A;return vr=Ft.length,Ye?Ft=function(Xn,Ro){for(var Ln=Xn.length,mo=Vn(Ro.length,Ln),Ds=So(Xn);mo--;){var Ms=Ro[mo];Xn[mo]=Ki(Ms,Ln)?Ds[Ms]:i}return Xn}(Ft,Ye):cr&&vr>1&&Ft.reverse(),_t&&st<vr&&(Ft.length=st),this&&this!==Dn&&this instanceof Dt&&(xi=xt||uu(xi)),xi.apply(dr,Ft)}}function Vo(A,N){return function(G,te){return function(ae,Se,ze,Ye){return Ps(ae,function(st,Et,_t){Se(Ye,ze(st),Et,_t)}),Ye}(G,A,N(te),{})}}function xh(A,N){return function(G,te){var ae;if(G===i&&te===i)return N;if(G!==i&&(ae=G),te!==i){if(ae===i)return te;typeof G=="string"||typeof te=="string"?(G=ca(G),te=ca(te)):(G=Rd(G),te=Rd(te)),ae=A(G,te)}return ae}}function Of(A){return va(function(N){return N=Kr(N,Dr(_r())),gr(function(G){var te=this;return A(N,function(ae){return co(ae,te,G)})})})}function Wo(A,N){var G=(N=N===i?" ":ca(N)).length;if(G<2)return G?Bu(N,A):N;var te=Bu(N,dh(A/Fi(N)));return Js(N)?ha(Kn(te),0,A).join(""):te.slice(0,A)}function Sc(A){return function(N,G,te){return te&&typeof te!="number"&&go(N,G,te)&&(G=te=i),N=ya(N),G===i?(G=N,N=0):G=ya(G),function(ae,Se,ze,Ye){for(var st=-1,Et=Cn(dh((Se-ae)/(ze||1)),0),_t=Gt(Et);Et--;)_t[Ye?Et:++st]=ae,ae+=ze;return _t}(N,G,te=te===i?N<G?1:-1:ya(te),A)}}function os(A){return function(N,G){return typeof N=="string"&&typeof G=="string"||(N=ma(N),G=ma(G)),A(N,G)}}function Sh(A,N,G,te,ae,Se,ze,Ye,st,Et){var _t=8&N;N|=_t?u:64,4&(N&=~(_t?64:u))||(N&=-4);var Rt=[A,N,ae,_t?Se:i,_t?ze:i,_t?i:Se,_t?i:ze,Ye,st,Et],Kt=G.apply(i,Rt);return Al(A)&&Ph(Kt,Rt),Kt.placeholder=te,us(Kt,A,N)}function Sl(A){var N=ro[A];return function(G,te){if(G=ma(G),(te=te==null?0:Vn(kr(te),292))&&Sd(G)){var ae=(ln(G)+"e").split("e");return+((ae=(ln(N(ae[0]+"e"+(+ae[1]+te)))+"e").split("e"))[0]+"e"+(+ae[1]-te))}return N(G)}}var xf=fl&&1/eu(new fl([,-0]))[1]==c?function(A){return new fl(A)}:Xh;function Id(A){return function(N){var G=Pn(N);return G==P?zn(N):G==j?fc(N):function(te,ae){return Kr(ae,function(Se){return[Se,te[Se]]})}(N,A(N))}}function as(A,N,G,te,ae,Se,ze,Ye){var st=2&N;if(!st&&typeof A!="function")throw new gi(o);var Et=te?te.length:0;if(Et||(N&=-97,te=ae=i),ze=ze===i?ze:Cn(kr(ze),0),Ye=Ye===i?Ye:kr(Ye),Et-=ae?ae.length:0,64&N){var _t=te,Rt=ae;te=ae=i}var Kt=st?i:Th(A),Zt=[A,N,G,te,ae,_t,Rt,Se,ze,Ye];if(Kt&&function(xt,Dt){var vr=xt[1],Ft=Dt[1],Or=vr|Ft,wr=Or<131,tn=Ft==l&&vr==8||Ft==l&&vr==256&&xt[7].length<=Dt[8]||Ft==384&&Dt[7].length<=Dt[8]&&vr==8;if(!wr&&!tn)return xt;1&Ft&&(xt[2]=Dt[2],Or|=1&vr?0:4);var sr=Dt[3];if(sr){var dr=xt[3];xt[3]=dr?Oc(dr,sr,Dt[4]):sr,xt[4]=dr?to(xt[3],s):Dt[4]}(sr=Dt[5])&&(dr=xt[5],xt[5]=dr?Oh(dr,sr,Dt[6]):sr,xt[6]=dr?to(xt[5],s):Dt[6]),(sr=Dt[7])&&(xt[7]=sr),Ft&l&&(xt[8]=xt[8]==null?Dt[8]:Vn(xt[8],Dt[8])),xt[9]==null&&(xt[9]=Dt[9]),xt[0]=Dt[0],xt[1]=Or}(Zt,Kt),A=Zt[0],N=Zt[1],G=Zt[2],te=Zt[3],ae=Zt[4],!(Ye=Zt[9]=Zt[9]===i?st?0:A.length:Cn(Zt[9]-Et,0))&&24&N&&(N&=-25),N&&N!=1)cr=N==8||N==16?function(xt,Dt,vr){var Ft=uu(xt);return function Or(){for(var wr=arguments.length,tn=Gt(wr),sr=wr,dr=qu(Or);sr--;)tn[sr]=arguments[sr];var xi=wr<3&&tn[0]!==dr&&tn[wr-1]!==dr?[]:to(tn,dr);return(wr-=xi.length)<vr?Sh(xt,Dt,is,Or.placeholder,i,tn,xi,i,i,vr-wr):co(this&&this!==Dn&&this instanceof Or?Ft:xt,this,tn)}}(A,N,Ye):N!=u&&N!=33||ae.length?is.apply(i,Zt):function(xt,Dt,vr,Ft){var Or=1&Dt,wr=uu(xt);return function tn(){for(var sr=-1,dr=arguments.length,xi=-1,Xn=Ft.length,Ro=Gt(Xn+dr),Ln=this&&this!==Dn&&this instanceof tn?wr:xt;++xi<Xn;)Ro[xi]=Ft[xi];for(;dr--;)Ro[xi++]=arguments[++sr];return co(Ln,Or?vr:this,Ro)}}(A,N,G,te);else var cr=function(xt,Dt,vr){var Ft=1&Dt,Or=uu(xt);return function wr(){return(this&&this!==Dn&&this instanceof wr?Or:xt).apply(Ft?vr:this,arguments)}}(A,N,G);return us((Kt?yf:Ph)(cr,Zt),A,N)}function ki(A,N,G,te){return A===i||oo(A,Au[G])&&!en.call(te,G)?N:A}function Tc(A,N,G,te,ae,Se){return Yn(A)&&Yn(N)&&(Se.set(N,A),wh(A,N,i,Tc,Se),Se.delete(N)),A}function Cc(A){return Dc(A)?i:A}function Ho(A,N,G,te,ae,Se){var ze=1&G,Ye=A.length,st=N.length;if(Ye!=st&&!(ze&&st>Ye))return!1;var Et=Se.get(A),_t=Se.get(N);if(Et&&_t)return Et==N&&_t==A;var Rt=-1,Kt=!0,Zt=2&G?new Ja:i;for(Se.set(A,N),Se.set(N,A);++Rt<Ye;){var cr=A[Rt],xt=N[Rt];if(te)var Dt=ze?te(xt,cr,Rt,N,A,Se):te(cr,xt,Rt,A,N,Se);if(Dt!==i){if(Dt)continue;Kt=!1;break}if(Zt){if(!ac(N,function(vr,Ft){if(!Qs(Zt,Ft)&&(cr===vr||ae(cr,vr,G,te,Se)))return Zt.push(Ft)})){Kt=!1;break}}else if(cr!==xt&&!ae(cr,xt,G,te,Se)){Kt=!1;break}}return Se.delete(A),Se.delete(N),Kt}function va(A){return Ah(Tf(A,i,vp),A+"")}function Pc(A){return Ii(A,qi,kd)}function ss(A){return Ii(A,Ur,Tl)}var Th=cf?function(A){return cf.get(A)}:Xh;function $i(A){for(var N=A.name+"",G=hl[N],te=en.call(hl,N)?G.length:0;te--;){var ae=G[te],Se=ae.func;if(Se==null||Se==A)return ae.name}return N}function qu(A){return(en.call(pe,"placeholder")?pe:A).placeholder}function _r(){var A=pe.iteratee||so;return A=A===so?bl:A,arguments.length?A(arguments[0],arguments[1]):A}function lu(A,N){var G,te,ae=A.__data__;return((te=typeof(G=N))=="string"||te=="number"||te=="symbol"||te=="boolean"?G!=="__proto__":G===null)?ae[typeof N=="string"?"string":"hash"]:ae.map}function Sf(A){for(var N=qi(A),G=N.length;G--;){var te=N[G],ae=A[te];N[G]=[te,ae,hp(ae)]}return N}function cu(A,N){var G=function(te,ae){return te==null?i:te[ae]}(A,N);return yc(G)?G:i}var kd=lf?function(A){return A==null?[]:(A=gn(A),Ra(lf(A),function(N){return xd.call(A,N)}))}:Ao,Tl=lf?function(A){for(var N=[];A;)aa(N,kd(A)),A=ku(A);return N}:Ao,Pn=dn;function Ch(A,N,G){for(var te=-1,ae=(N=po(N,A)).length,Se=!1;++te<ae;){var ze=Oi(N[te]);if(!(Se=A!=null&&G(A,ze)))break;A=A[ze]}return Se||++te!=ae?Se:!!(ae=A==null?0:A.length)&&Xo(ae)&&Ki(ze,ae)&&(Cr(A)||Yo(A))}function Cl(A){return typeof A.constructor!="function"||fu(A)?{}:Ss(ku(A))}function Pl(A){return Cr(A)||Yo(A)||!!(fo&&A&&A[fo])}function Ki(A,N){var G=typeof A;return!!(N=N??f)&&(G=="number"||G!="symbol"&&lt.test(A))&&A>-1&&A%1==0&&A<N}function go(A,N,G){if(!Yn(G))return!1;var te=typeof N;return!!(te=="number"?To(G)&&Ki(N,G.length):te=="string"&&N in G)&&oo(G[N],A)}function Bi(A,N){if(Cr(A))return!1;var G=typeof A;return!(G!="number"&&G!="symbol"&&G!="boolean"&&A!=null&&!Co(A))||it.test(A)||!wt.test(A)||N!=null&&A in gn(N)}function Al(A){var N=$i(A),G=pe[N];if(typeof G!="function"||!(N in Br.prototype))return!1;if(A===G)return!0;var te=Th(G);return!!te&&A===te[0]}(rr&&Pn(new rr(new ArrayBuffer(1)))!=Q||io&&Pn(new io)!=P||Zn&&Pn(Zn.resolve())!=D||fl&&Pn(new fl)!=j||pc&&Pn(new pc)!=W)&&(Pn=function(A){var N=dn(A),G=N==R?A.constructor:i,te=G?du(G):"";if(te)switch(te){case dl:return Q;case Qe:return P;case vt:return D;case rt:return j;case $t:return W}return N});var Tg=cl?Ba:$h;function fu(A){var N=A&&A.constructor;return A===(typeof N=="function"&&N.prototype||Au)}function hp(A){return A==A&&!Yn(A)}function ja(A,N){return function(G){return G!=null&&G[A]===N&&(N!==i||A in gn(G))}}function Tf(A,N,G){return N=Cn(N===i?A.length-1:N,0),function(){for(var te=arguments,ae=-1,Se=Cn(te.length-N,0),ze=Gt(Se);++ae<Se;)ze[ae]=te[N+ae];ae=-1;for(var Ye=Gt(N+1);++ae<N;)Ye[ae]=te[ae];return Ye[N]=G(ze),co(A,this,Ye)}}function dp(A,N){return N.length<2?A:nu(A,La(N,0,-1))}function hu(A,N){if((N!=="constructor"||typeof A[N]!="function")&&N!="__proto__")return A[N]}var Ph=Dd(yf),Rl=Eo||function(A,N){return Dn.setTimeout(A,N)},Ah=Dd(es);function us(A,N,G){var te=N+"";return Ah(A,function(ae,Se){var ze=Se.length;if(!ze)return ae;var Ye=ze-1;return Se[Ye]=(ze>1?"& ":"")+Se[Ye],Se=Se.join(ze>2?", ":" "),ae.replace(Be,`{
/* [wrapped with `+Se+`] */
`)}(te,function(ae,Se){return Wt(v,function(ze){var Ye="_."+ze[0];Se&ze[1]&&!Pu(ae,Ye)&&ae.push(Ye)}),ae.sort()}(function(ae){var Se=ae.match(Je);return Se?Se[1].split(Tt):[]}(te),G)))}function Dd(A){var N=0,G=0;return function(){var te=ph(),ae=16-(te-G);if(G=te,ae>0){if(++N>=800)return arguments[0]}else N=0;return A.apply(i,arguments)}}function Cf(A,N){var G=-1,te=A.length,ae=te-1;for(N=N===i?te:N;++G<N;){var Se=Fu(G,ae),ze=A[Se];A[Se]=A[G],A[G]=ze}return A.length=N,A}var zu,Md,Rh=(zu=cs(function(A){var N=[];return A.charCodeAt(0)===46&&N.push(""),A.replace(H,function(G,te,ae,Se){N.push(ae?Se.replace(Nt,"$1"):te||G)}),N},function(A){return Md.size===500&&Md.clear(),A}),Md=zu.cache,zu);function Oi(A){if(typeof A=="string"||Co(A))return A;var N=A+"";return N=="0"&&1/A==-1/0?"-0":N}function du(A){if(A!=null){try{return Ru.call(A)}catch{}try{return A+""}catch{}}return""}function Ld(A){if(A instanceof Br)return A.clone();var N=new Qn(A.__wrapped__,A.__chain__);return N.__actions__=So(A.__actions__),N.__index__=A.__index__,N.__values__=A.__values__,N}var Il=gr(function(A,N){return Hn(A)?Cs(A,Wn(N,1,Hn,!0)):[]}),Nd=gr(function(A,N){var G=li(N);return Hn(G)&&(G=i),Hn(A)?Cs(A,Wn(N,1,Hn,!0),_r(G,2)):[]}),jd=gr(function(A,N){var G=li(N);return Hn(G)&&(G=i),Hn(A)?Cs(A,Wn(N,1,Hn,!0),i,G):[]});function Sr(A,N,G){var te=A==null?0:A.length;if(!te)return-1;var ae=G==null?0:kr(G);return ae<0&&(ae=Cn(te+ae,0)),al(A,_r(N,3),ae)}function Fd(A,N,G){var te=A==null?0:A.length;if(!te)return-1;var ae=te-1;return G!==i&&(ae=kr(G),ae=G<0?Cn(te+ae,0):Vn(ae,te-1)),al(A,_r(N,3),ae,!0)}function vp(A){return A!=null&&A.length?Wn(A,1):[]}function kl(A){return A&&A.length?A[0]:i}var Bd=gr(function(A){var N=Kr(A,El);return N.length&&N[0]===A[0]?Nu(N):[]}),pp=gr(function(A){var N=li(A),G=Kr(A,El);return N===li(G)?N=i:G.pop(),G.length&&G[0]===A[0]?Nu(G,_r(N,2)):[]}),Pf=gr(function(A){var N=li(A),G=Kr(A,El);return(N=typeof N=="function"?N:i)&&G.pop(),G.length&&G[0]===A[0]?Nu(G,i,N):[]});function li(A){var N=A==null?0:A.length;return N?A[N-1]:i}var gp=gr(Af);function Af(A,N){return A&&A.length&&N&&N.length?su(A,N):A}var Ih=va(function(A,N){var G=A==null?0:A.length,te=pl(A,N);return _e(A,Kr(N,function(ae){return Ki(ae,G)?+ae:ae}).sort(fp)),te});function Rf(A){return A==null?A:op.call(A)}var yp=gr(function(A){return or(Wn(A,1,Hn,!0))}),pa=gr(function(A){var N=li(A);return Hn(N)&&(N=i),or(Wn(A,1,Hn,!0),_r(N,2))}),Gu=gr(function(A){var N=li(A);return N=typeof N=="function"?N:i,or(Wn(A,1,Hn,!0),i,N)});function vu(A){if(!A||!A.length)return[];var N=0;return A=Ra(A,function(G){if(Hn(G))return N=Cn(G.length,N),!0}),ll(N,function(G){return Kr(A,sc(G))})}function kh(A,N){if(!A||!A.length)return[];var G=vu(A);return N==null?G:Kr(G,function(te){return co(N,i,te)})}var Dh=gr(function(A,N){return Hn(A)?Cs(A,N):[]}),Vu=gr(function(A){return bf(Ra(A,Hn))}),Mh=gr(function(A){var N=li(A);return Hn(N)&&(N=i),bf(Ra(A,Hn),_r(N,2))}),If=gr(function(A){var N=li(A);return N=typeof N=="function"?N:i,bf(Ra(A,Hn),i,N)}),Ac=gr(vu),Zi=gr(function(A){var N=A.length,G=N>1?A[N-1]:i;return G=typeof G=="function"?(A.pop(),G):i,kh(A,G)});function ls(A){var N=pe(A);return N.__chain__=!0,N}function Lh(A,N){return N(A)}var Is=va(function(A){var N=A.length,G=N?A[0]:0,te=this.__wrapped__,ae=function(Se){return pl(Se,A)};return!(N>1||this.__actions__.length)&&te instanceof Br&&Ki(G)?((te=te.slice(G,+G+(N?1:0))).__actions__.push({func:Lh,args:[ae],thisArg:i}),new Qn(te,this.__chain__).thru(function(Se){return N&&!Se.length&&Se.push(i),Se})):this.thru(ae)}),mp=wf(function(A,N,G){en.call(A,G)?++A[G]:Ts(A,G,1)}),Ud=ns(Sr),Dl=ns(Fd);function Rc(A,N){return(Cr(A)?Wt:Go)(A,_r(N,3))}function qd(A,N){return(Cr(A)?$s:xo)(A,_r(N,3))}var Nh=wf(function(A,N,G){en.call(A,G)?A[G].push(N):Ts(A,G,[N])}),zd=gr(function(A,N,G){var te=-1,ae=typeof N=="function",Se=To(A)?Gt(A.length):[];return Go(A,function(ze){Se[++te]=ae?co(N,ze,G):iu(ze,N,G)}),Se}),jh=wf(function(A,N,G){Ts(A,G,N)});function Ml(A,N){return(Cr(A)?Kr:up)(A,_r(N,3))}var Gd=wf(function(A,N,G){A[G?0:1].push(N)},function(){return[[],[]]}),bp=gr(function(A,N){if(A==null)return[];var G=N.length;return G>1&&go(A,N[0],N[1])?N=[]:G>2&&go(N[0],N[1],N[2])&&(N=[N[0]]),_c(A,Wn(N,1),[])}),Ui=np||function(){return Dn.Date.now()};function Fa(A,N,G){return N=G?i:N,N=A&&N==null?A.length:N,as(A,l,i,i,i,i,N)}function Vd(A,N){var G;if(typeof N!="function")throw new gi(o);return A=kr(A),function(){return--A>0&&(G=N.apply(this,arguments)),A<=1&&(N=i),G}}var kf=gr(function(A,N,G){var te=1;if(G.length){var ae=to(G,qu(kf));te|=u}return as(A,te,N,G,ae)}),Df=gr(function(A,N,G){var te=3;if(G.length){var ae=to(G,qu(Df));te|=u}return as(N,te,A,G,ae)});function ks(A,N,G){var te,ae,Se,ze,Ye,st,Et=0,_t=!1,Rt=!1,Kt=!0;if(typeof A!="function")throw new gi(o);function Zt(Ft){var Or=te,wr=ae;return te=ae=i,Et=Ft,ze=A.apply(wr,Or)}function cr(Ft){var Or=Ft-st;return st===i||Or>=N||Or<0||Rt&&Ft-Et>=Se}function xt(){var Ft=Ui();if(cr(Ft))return Dt(Ft);Ye=Rl(xt,function(Or){var wr=N-(Or-st);return Rt?Vn(wr,Se-(Or-Et)):wr}(Ft))}function Dt(Ft){return Ye=i,Kt&&te?Zt(Ft):(te=ae=i,ze)}function vr(){var Ft=Ui(),Or=cr(Ft);if(te=arguments,ae=this,st=Ft,Or){if(Ye===i)return function(wr){return Et=wr,Ye=Rl(xt,N),_t?Zt(wr):ze}(st);if(Rt)return da(Ye),Ye=Rl(xt,N),Zt(st)}return Ye===i&&(Ye=Rl(xt,N)),ze}return N=ma(N)||0,Yn(G)&&(_t=!!G.leading,Se=(Rt="maxWait"in G)?Cn(ma(G.maxWait)||0,N):Se,Kt="trailing"in G?!!G.trailing:Kt),vr.cancel=function(){Ye!==i&&da(Ye),Et=0,te=st=ae=Ye=i},vr.flush=function(){return Ye===i?ze:Dt(Ui())},vr}var _p=gr(function(A,N){return hf(A,1,N)}),Wu=gr(function(A,N,G){return hf(A,ma(N)||0,G)});function cs(A,N){if(typeof A!="function"||N!=null&&typeof N!="function")throw new gi(o);var G=function(){var te=arguments,ae=N?N.apply(this,te):te[0],Se=G.cache;if(Se.has(ae))return Se.get(ae);var ze=A.apply(this,te);return G.cache=Se.set(ae,ze)||Se,ze};return G.cache=new(cs.Cache||Xi),G}function Ic(A){if(typeof A!="function")throw new gi(o);return function(){var N=arguments;switch(N.length){case 0:return!A.call(this);case 1:return!A.call(this,N[0]);case 2:return!A.call(this,N[0],N[1]);case 3:return!A.call(this,N[0],N[1],N[2])}return!A.apply(this,N)}}cs.Cache=Xi;var Ll=Sg(function(A,N){var G=(N=N.length==1&&Cr(N[0])?Kr(N[0],Dr(_r())):Kr(Wn(N,1),Dr(_r()))).length;return gr(function(te){for(var ae=-1,Se=Vn(te.length,G);++ae<Se;)te[ae]=N[ae].call(this,te[ae]);return co(A,this,te)})}),Hu=gr(function(A,N){var G=to(N,qu(Hu));return as(A,u,i,N,G)}),Fh=gr(function(A,N){var G=to(N,qu(Fh));return as(A,64,i,N,G)}),Wd=va(function(A,N){return as(A,256,i,i,i,N)});function oo(A,N){return A===N||A!=A&&N!=N}var Mf=os(bh),Nl=os(function(A,N){return A>=N}),Yo=Ma(function(){return arguments}())?Ma:function(A){return Mn(A)&&en.call(A,"callee")&&!xd.call(A,"callee")},Cr=Gt.isArray,Lf=Xa?Dr(Xa):function(A){return Mn(A)&&dn(A)==Z};function To(A){return A!=null&&Xo(A.length)&&!Ba(A)}function Hn(A){return Mn(A)&&To(A)}var Qi=Mu||$h,Hd=Xs?Dr(Xs):function(A){return Mn(A)&&dn(A)==p};function jl(A){if(!Mn(A))return!1;var N=dn(A);return N==m||N=="[object DOMException]"||typeof A.message=="string"&&typeof A.name=="string"&&!Dc(A)}function Ba(A){if(!Yn(A))return!1;var N=dn(A);return N==E||N==C||N=="[object AsyncFunction]"||N=="[object Proxy]"}function kc(A){return typeof A=="number"&&A==kr(A)}function Xo(A){return typeof A=="number"&&A>-1&&A%1==0&&A<=f}function Yn(A){var N=typeof A;return A!=null&&(N=="object"||N=="function")}function Mn(A){return A!=null&&typeof A=="object"}var Bh=rc?Dr(rc):function(A){return Mn(A)&&Pn(A)==P};function Uh(A){return typeof A=="number"||Mn(A)&&dn(A)==T}function Dc(A){if(!Mn(A)||dn(A)!=R)return!1;var N=ku(A);if(N===null)return!0;var G=en.call(N,"constructor")&&N.constructor;return typeof G=="function"&&G instanceof G&&Ru.call(G)==hh}var Nf=nc?Dr(nc):function(A){return Mn(A)&&dn(A)==L},ga=qr?Dr(qr):function(A){return Mn(A)&&Pn(A)==j};function Mc(A){return typeof A=="string"||!Cr(A)&&Mn(A)&&dn(A)==F}function Co(A){return typeof A=="symbol"||Mn(A)&&dn(A)==q}var fs=Uo?Dr(Uo):function(A){return Mn(A)&&Xo(A.length)&&!!Vr[dn(A)]},qh=os(As),Lc=os(function(A,N){return A<=N});function Pt(A){if(!A)return[];if(To(A))return Mc(A)?Kn(A):So(A);if(Du&&A[Du])return function(G){for(var te,ae=[];!(te=G.next()).done;)ae.push(te.value);return ae}(A[Du]());var N=Pn(A);return(N==P?zn:N==j?eu:mu)(A)}function ya(A){return A?(A=ma(A))===c||A===-1/0?17976931348623157e292*(A<0?-1:1):A==A?A:0:A===0?A:0}function kr(A){var N=ya(A),G=N%1;return N==N?G?N-G:N:0}function pu(A){return A?Da(kr(A),0,d):0}function ma(A){if(typeof A=="number")return A;if(Co(A))return h;if(Yn(A)){var N=typeof A.valueOf=="function"?A.valueOf():A;A=Yn(N)?N+"":N}if(typeof A!="string")return A===0?A:+A;A=pn(A);var G=dt.test(A);return G||nt.test(A)?eo(A.slice(2),G?2:8):Yt.test(A)?h:+A}function zh(A){return ts(A,Ur(A))}function ln(A){return A==null?"":ca(A)}var yo=Uu(function(A,N){if(fu(N)||To(N))ts(N,qi(N),A);else for(var G in N)en.call(N,G)&&ff(A,G,N[G])}),wp=Uu(function(A,N){ts(N,Ur(N),A)}),Gh=Uu(function(A,N,G,te){ts(N,Ur(N),A,te)}),Ep=Uu(function(A,N,G,te){ts(N,qi(N),A,te)}),Cg=va(pl),Op=gr(function(A,N){A=gn(A);var G=-1,te=N.length,ae=te>2?N[2]:i;for(ae&&go(N[0],N[1],ae)&&(te=1);++G<te;)for(var Se=N[G],ze=Ur(Se),Ye=-1,st=ze.length;++Ye<st;){var Et=ze[Ye],_t=A[Et];(_t===i||oo(_t,Au[Et])&&!en.call(A,Et))&&(A[Et]=Se[Et])}return A}),xp=gr(function(A){return A.push(i,Tc),co($o,i,A)});function Yd(A,N,G){var te=A==null?i:nu(A,N);return te===i?G:te}function Xd(A,N){return A!=null&&Ch(A,N,_h)}var gu=Vo(function(A,N,G){N!=null&&typeof N.toString!="function"&&(N=Os.call(N)),A[N]=G},ci(Ko)),ao=Vo(function(A,N,G){N!=null&&typeof N.toString!="function"&&(N=Os.call(N)),en.call(A,N)?A[N].push(G):A[N]=[G]},_r),$d=gr(iu);function qi(A){return To(A)?ap(A):au(A)}function Ur(A){return To(A)?ap(A,!0):function(N){if(!Yn(N))return function(Se){var ze=[];if(Se!=null)for(var Ye in gn(Se))ze.push(Ye);return ze}(N);var G=fu(N),te=[];for(var ae in N)(ae!="constructor"||!G&&en.call(N,ae))&&te.push(ae);return te}(A)}var Vh=Uu(function(A,N,G){wh(A,N,G)}),$o=Uu(function(A,N,G,te){wh(A,N,G,te)}),Po=va(function(A,N){var G={};if(A==null)return G;var te=!1;N=Kr(N,function(Se){return Se=po(Se,A),te||(te=Se.length>1),Se}),ts(A,ss(A),G),te&&(G=zo(G,7,Cc));for(var ae=N.length;ae--;)Eh(G,N[ae]);return G}),Nc=va(function(A,N){return A==null?{}:function(G,te){return la(G,te,function(ae,Se){return Xd(G,Se)})}(A,N)});function Wh(A,N){if(A==null)return{};var G=Kr(ss(A),function(te){return[te]});return N=_r(N),la(A,G,function(te,ae){return N(te,ae[0])})}var Kd=Id(qi),yu=Id(Ur);function mu(A){return A==null?[]:lc(A,qi(A))}var Hh=xl(function(A,N,G){return N=N.toLowerCase(),A+(G?ba(N):N)});function ba(A){return Yh(ln(A).toLowerCase())}function hs(A){return(A=ln(A))&&A.replace(ct,Ka).replace(Ha,"")}var Sp=xl(function(A,N,G){return A+(G?"-":"")+N.toLowerCase()}),Fl=xl(function(A,N,G){return A+(G?" ":"")+N.toLowerCase()}),jf=rs("toLowerCase"),Yu=xl(function(A,N,G){return A+(G?"_":"")+N.toLowerCase()}),Zd=xl(function(A,N,G){return A+(G?" ":"")+Yh(N)}),Qd=xl(function(A,N,G){return A+(G?" ":"")+N.toUpperCase()}),Yh=rs("toUpperCase");function Ff(A,N,G){return A=ln(A),(N=G?i:N)===i?function(te){return pr.test(te)}(A)?function(te){return te.match(kn)||[]}(A):function(te){return te.match(Lt)||[]}(A):A.match(N)||[]}var Bl=gr(function(A,N){try{return co(A,i,N)}catch(G){return jl(G)?G:new Jr(G)}}),ds=va(function(A,N){return Wt(N,function(G){G=Oi(G),Ts(A,G,kf(A[G],A))}),A});function ci(A){return function(){return A}}var jc=Ef(),Jd=Ef(!0);function Ko(A){return A}function so(A){return bl(typeof A=="function"?A:zo(A,1))}var Tp=gr(function(A,N){return function(G){return iu(G,A,N)}}),Xu=gr(function(A,N){return function(G){return iu(A,G,N)}});function ev(A,N,G){var te=qi(N),ae=pf(N,te);G!=null||Yn(N)&&(ae.length||!te.length)||(G=N,N=A,A=this,ae=pf(N,qi(N)));var Se=!(Yn(G)&&"chain"in G&&!G.chain),ze=Ba(A);return Wt(ae,function(Ye){var st=N[Ye];A[Ye]=st,ze&&(A.prototype[Ye]=function(){var Et=this.__chain__;if(Se||Et){var _t=A(this.__wrapped__);return(_t.__actions__=So(this.__actions__)).push({func:st,args:arguments,thisArg:A}),_t.__chain__=Et,_t}return st.apply(A,aa([this.value()],arguments))})}),A}function Xh(){}var Bf=Of(Kr),Cp=Of(oc),Pg=Of(ac);function tv(A){return Bi(A)?sc(Oi(A)):function(N){return function(G){return nu(G,N)}}(A)}var Ua=Sc(),rv=Sc(!0);function Ao(){return[]}function $h(){return!1}var nv,Uf=xh(function(A,N){return A+N},0),iv=Sl("ceil"),ov=xh(function(A,N){return A/N},1),Ag=Sl("floor"),Jn=xh(function(A,N){return A*N},1),Pp=Sl("round"),av=xh(function(A,N){return A-N},0);return pe.after=function(A,N){if(typeof N!="function")throw new gi(o);return A=kr(A),function(){if(--A<1)return N.apply(this,arguments)}},pe.ary=Fa,pe.assign=yo,pe.assignIn=wp,pe.assignInWith=Gh,pe.assignWith=Ep,pe.at=Cg,pe.before=Vd,pe.bind=kf,pe.bindAll=ds,pe.bindKey=Df,pe.castArray=function(){if(!arguments.length)return[];var A=arguments[0];return Cr(A)?A:[A]},pe.chain=ls,pe.chunk=function(A,N,G){N=(G?go(A,N,G):N===i)?1:Cn(kr(N),0);var te=A==null?0:A.length;if(!te||N<1)return[];for(var ae=0,Se=0,ze=Gt(dh(te/N));ae<te;)ze[Se++]=La(A,ae,ae+=N);return ze},pe.compact=function(A){for(var N=-1,G=A==null?0:A.length,te=0,ae=[];++N<G;){var Se=A[N];Se&&(ae[te++]=Se)}return ae},pe.concat=function(){var A=arguments.length;if(!A)return[];for(var N=Gt(A-1),G=arguments[0],te=A;te--;)N[te-1]=arguments[te];return aa(Cr(G)?So(G):[G],Wn(N,1))},pe.cond=function(A){var N=A==null?0:A.length,G=_r();return A=N?Kr(A,function(te){if(typeof te[1]!="function")throw new gi(o);return[G(te[0]),te[1]]}):[],gr(function(te){for(var ae=-1;++ae<N;){var Se=A[ae];if(co(Se[0],this,te))return co(Se[1],this,te)}})},pe.conforms=function(A){return function(N){var G=qi(N);return function(te){return gl(te,N,G)}}(zo(A,1))},pe.constant=ci,pe.countBy=mp,pe.create=function(A,N){var G=Ss(A);return N==null?G:vl(G,N)},pe.curry=function A(N,G,te){var ae=as(N,8,i,i,i,i,i,G=te?i:G);return ae.placeholder=A.placeholder,ae},pe.curryRight=function A(N,G,te){var ae=as(N,16,i,i,i,i,i,G=te?i:G);return ae.placeholder=A.placeholder,ae},pe.debounce=ks,pe.defaults=Op,pe.defaultsDeep=xp,pe.defer=_p,pe.delay=Wu,pe.difference=Il,pe.differenceBy=Nd,pe.differenceWith=jd,pe.drop=function(A,N,G){var te=A==null?0:A.length;return te?La(A,(N=G||N===i?1:kr(N))<0?0:N,te):[]},pe.dropRight=function(A,N,G){var te=A==null?0:A.length;return te?La(A,0,(N=te-(N=G||N===i?1:kr(N)))<0?0:N):[]},pe.dropRightWhile=function(A,N){return A&&A.length?vo(A,_r(N,3),!0,!0):[]},pe.dropWhile=function(A,N){return A&&A.length?vo(A,_r(N,3),!0):[]},pe.fill=function(A,N,G,te){var ae=A==null?0:A.length;return ae?(G&&typeof G!="number"&&go(A,N,G)&&(G=0,te=ae),function(Se,ze,Ye,st){var Et=Se.length;for((Ye=kr(Ye))<0&&(Ye=-Ye>Et?0:Et+Ye),(st=st===i||st>Et?Et:kr(st))<0&&(st+=Et),st=Ye>st?0:pu(st);Ye<st;)Se[Ye++]=ze;return Se}(A,N,G,te)):[]},pe.filter=function(A,N){return(Cr(A)?Ra:Pd)(A,_r(N,3))},pe.flatMap=function(A,N){return Wn(Ml(A,N),1)},pe.flatMapDeep=function(A,N){return Wn(Ml(A,N),c)},pe.flatMapDepth=function(A,N,G){return G=G===i?1:kr(G),Wn(Ml(A,N),G)},pe.flatten=vp,pe.flattenDeep=function(A){return A!=null&&A.length?Wn(A,c):[]},pe.flattenDepth=function(A,N){return A!=null&&A.length?Wn(A,N=N===i?1:kr(N)):[]},pe.flip=function(A){return as(A,512)},pe.flow=jc,pe.flowRight=Jd,pe.fromPairs=function(A){for(var N=-1,G=A==null?0:A.length,te={};++N<G;){var ae=A[N];te[ae[0]]=ae[1]}return te},pe.functions=function(A){return A==null?[]:pf(A,qi(A))},pe.functionsIn=function(A){return A==null?[]:pf(A,Ur(A))},pe.groupBy=Nh,pe.initial=function(A){return A!=null&&A.length?La(A,0,-1):[]},pe.intersection=Bd,pe.intersectionBy=pp,pe.intersectionWith=Pf,pe.invert=gu,pe.invertBy=ao,pe.invokeMap=zd,pe.iteratee=so,pe.keyBy=jh,pe.keys=qi,pe.keysIn=Ur,pe.map=Ml,pe.mapKeys=function(A,N){var G={};return N=_r(N,3),Ps(A,function(te,ae,Se){Ts(G,N(te,ae,Se),te)}),G},pe.mapValues=function(A,N){var G={};return N=_r(N,3),Ps(A,function(te,ae,Se){Ts(G,ae,N(te,ae,Se))}),G},pe.matches=function(A){return Ad(zo(A,1))},pe.matchesProperty=function(A,N){return mc(A,zo(N,1))},pe.memoize=cs,pe.merge=Vh,pe.mergeWith=$o,pe.method=Tp,pe.methodOf=Xu,pe.mixin=ev,pe.negate=Ic,pe.nthArg=function(A){return A=kr(A),gr(function(N){return bc(N,A)})},pe.omit=Po,pe.omitBy=function(A,N){return Wh(A,Ic(_r(N)))},pe.once=function(A){return Vd(2,A)},pe.orderBy=function(A,N,G,te){return A==null?[]:(Cr(N)||(N=N==null?[]:[N]),Cr(G=te?i:G)||(G=G==null?[]:[G]),_c(A,N,G))},pe.over=Bf,pe.overArgs=Ll,pe.overEvery=Cp,pe.overSome=Pg,pe.partial=Hu,pe.partialRight=Fh,pe.partition=Gd,pe.pick=Nc,pe.pickBy=Wh,pe.property=tv,pe.propertyOf=function(A){return function(N){return A==null?i:nu(A,N)}},pe.pull=gp,pe.pullAll=Af,pe.pullAllBy=function(A,N,G){return A&&A.length&&N&&N.length?su(A,N,_r(G,2)):A},pe.pullAllWith=function(A,N,G){return A&&A.length&&N&&N.length?su(A,N,i,G):A},pe.pullAt=Ih,pe.range=Ua,pe.rangeRight=rv,pe.rearg=Wd,pe.reject=function(A,N){return(Cr(A)?Ra:Pd)(A,Ic(_r(N,3)))},pe.remove=function(A,N){var G=[];if(!A||!A.length)return G;var te=-1,ae=[],Se=A.length;for(N=_r(N,3);++te<Se;){var ze=A[te];N(ze,te,A)&&(G.push(ze),ae.push(te))}return _e(A,ae),G},pe.rest=function(A,N){if(typeof A!="function")throw new gi(o);return gr(A,N=N===i?N:kr(N))},pe.reverse=Rf,pe.sampleSize=function(A,N,G){return N=(G?go(A,N,G):N===i)?1:kr(N),(Cr(A)?ua:gf)(A,N)},pe.set=function(A,N,G){return A==null?A:_l(A,N,G)},pe.setWith=function(A,N,G,te){return te=typeof te=="function"?te:i,A==null?A:_l(A,N,G,te)},pe.shuffle=function(A){return(Cr(A)?Td:xg)(A)},pe.slice=function(A,N,G){var te=A==null?0:A.length;return te?(G&&typeof G!="number"&&go(A,N,G)?(N=0,G=te):(N=N==null?0:kr(N),G=G===i?te:kr(G)),La(A,N,G)):[]},pe.sortBy=bp,pe.sortedUniq=function(A){return A&&A.length?Na(A):[]},pe.sortedUniqBy=function(A,N){return A&&A.length?Na(A,_r(N,2)):[]},pe.split=function(A,N,G){return G&&typeof G!="number"&&go(A,N,G)&&(N=G=i),(G=G===i?d:G>>>0)?(A=ln(A))&&(typeof N=="string"||N!=null&&!Nf(N))&&!(N=ca(N))&&Js(A)?ha(Kn(A),0,G):A.split(N,G):[]},pe.spread=function(A,N){if(typeof A!="function")throw new gi(o);return N=N==null?0:Cn(kr(N),0),gr(function(G){var te=G[N],ae=ha(G,0,N);return te&&aa(ae,te),co(A,this,ae)})},pe.tail=function(A){var N=A==null?0:A.length;return N?La(A,1,N):[]},pe.take=function(A,N,G){return A&&A.length?La(A,0,(N=G||N===i?1:kr(N))<0?0:N):[]},pe.takeRight=function(A,N,G){var te=A==null?0:A.length;return te?La(A,(N=te-(N=G||N===i?1:kr(N)))<0?0:N,te):[]},pe.takeRightWhile=function(A,N){return A&&A.length?vo(A,_r(N,3),!1,!0):[]},pe.takeWhile=function(A,N){return A&&A.length?vo(A,_r(N,3)):[]},pe.tap=function(A,N){return N(A),A},pe.throttle=function(A,N,G){var te=!0,ae=!0;if(typeof A!="function")throw new gi(o);return Yn(G)&&(te="leading"in G?!!G.leading:te,ae="trailing"in G?!!G.trailing:ae),ks(A,N,{leading:te,maxWait:N,trailing:ae})},pe.thru=Lh,pe.toArray=Pt,pe.toPairs=Kd,pe.toPairsIn=yu,pe.toPath=function(A){return Cr(A)?Kr(A,Oi):Co(A)?[A]:So(Rh(ln(A)))},pe.toPlainObject=zh,pe.transform=function(A,N,G){var te=Cr(A),ae=te||Qi(A)||fs(A);if(N=_r(N,4),G==null){var Se=A&&A.constructor;G=ae?te?new Se:[]:Yn(A)&&Ba(Se)?Ss(ku(A)):{}}return(ae?Wt:Ps)(A,function(ze,Ye,st){return N(G,ze,Ye,st)}),G},pe.unary=function(A){return Fa(A,1)},pe.union=yp,pe.unionBy=pa,pe.unionWith=Gu,pe.uniq=function(A){return A&&A.length?or(A):[]},pe.uniqBy=function(A,N){return A&&A.length?or(A,_r(N,2)):[]},pe.uniqWith=function(A,N){return N=typeof N=="function"?N:i,A&&A.length?or(A,i,N):[]},pe.unset=function(A,N){return A==null||Eh(A,N)},pe.unzip=vu,pe.unzipWith=kh,pe.update=function(A,N,G){return A==null?A:ho(A,N,wc(G))},pe.updateWith=function(A,N,G,te){return te=typeof te=="function"?te:i,A==null?A:ho(A,N,wc(G),te)},pe.values=mu,pe.valuesIn=function(A){return A==null?[]:lc(A,Ur(A))},pe.without=Dh,pe.words=Ff,pe.wrap=function(A,N){return Hu(wc(N),A)},pe.xor=Vu,pe.xorBy=Mh,pe.xorWith=If,pe.zip=Ac,pe.zipObject=function(A,N){return cp(A||[],N||[],ff)},pe.zipObjectDeep=function(A,N){return cp(A||[],N||[],_l)},pe.zipWith=Zi,pe.entries=Kd,pe.entriesIn=yu,pe.extend=wp,pe.extendWith=Gh,ev(pe,pe),pe.add=Uf,pe.attempt=Bl,pe.camelCase=Hh,pe.capitalize=ba,pe.ceil=iv,pe.clamp=function(A,N,G){return G===i&&(G=N,N=i),G!==i&&(G=(G=ma(G))==G?G:0),N!==i&&(N=(N=ma(N))==N?N:0),Da(ma(A),N,G)},pe.clone=function(A){return zo(A,4)},pe.cloneDeep=function(A){return zo(A,5)},pe.cloneDeepWith=function(A,N){return zo(A,5,N=typeof N=="function"?N:i)},pe.cloneWith=function(A,N){return zo(A,4,N=typeof N=="function"?N:i)},pe.conformsTo=function(A,N){return N==null||gl(A,N,qi(N))},pe.deburr=hs,pe.defaultTo=function(A,N){return A==null||A!=A?N:A},pe.divide=ov,pe.endsWith=function(A,N,G){A=ln(A),N=ca(N);var te=A.length,ae=G=G===i?te:Da(kr(G),0,te);return(G-=N.length)>=0&&A.slice(G,ae)==N},pe.eq=oo,pe.escape=function(A){return(A=ln(A))&&xe.test(A)?A.replace(ve,fh):A},pe.escapeRegExp=function(A){return(A=ln(A))&&ne.test(A)?A.replace($,"\\$&"):A},pe.every=function(A,N,G){var te=Cr(A)?oc:sp;return G&&go(A,N,G)&&(N=i),te(A,_r(N,3))},pe.find=Ud,pe.findIndex=Sr,pe.findKey=function(A,N){return tf(A,_r(N,3),Ps)},pe.findLast=Dl,pe.findLastIndex=Fd,pe.findLastKey=function(A,N){return tf(A,_r(N,3),vf)},pe.floor=Ag,pe.forEach=Rc,pe.forEachRight=qd,pe.forIn=function(A,N){return A==null?A:yl(A,_r(N,3),Ur)},pe.forInRight=function(A,N){return A==null?A:mh(A,_r(N,3),Ur)},pe.forOwn=function(A,N){return A&&Ps(A,_r(N,3))},pe.forOwnRight=function(A,N){return A&&vf(A,_r(N,3))},pe.get=Yd,pe.gt=Mf,pe.gte=Nl,pe.has=function(A,N){return A!=null&&Ch(A,N,ml)},pe.hasIn=Xd,pe.head=kl,pe.identity=Ko,pe.includes=function(A,N,G,te){A=To(A)?A:mu(A),G=G&&!te?kr(G):0;var ae=A.length;return G<0&&(G=Cn(ae+G,0)),Mc(A)?G<=ae&&A.indexOf(N,G)>-1:!!ae&&Ks(A,N,G)>-1},pe.indexOf=function(A,N,G){var te=A==null?0:A.length;if(!te)return-1;var ae=G==null?0:kr(G);return ae<0&&(ae=Cn(te+ae,0)),Ks(A,N,ae)},pe.inRange=function(A,N,G){return N=ya(N),G===i?(G=N,N=0):G=ya(G),function(te,ae,Se){return te>=Vn(ae,Se)&&te<Cn(ae,Se)}(A=ma(A),N,G)},pe.invoke=$d,pe.isArguments=Yo,pe.isArray=Cr,pe.isArrayBuffer=Lf,pe.isArrayLike=To,pe.isArrayLikeObject=Hn,pe.isBoolean=function(A){return A===!0||A===!1||Mn(A)&&dn(A)==y},pe.isBuffer=Qi,pe.isDate=Hd,pe.isElement=function(A){return Mn(A)&&A.nodeType===1&&!Dc(A)},pe.isEmpty=function(A){if(A==null)return!0;if(To(A)&&(Cr(A)||typeof A=="string"||typeof A.splice=="function"||Qi(A)||fs(A)||Yo(A)))return!A.length;var N=Pn(A);if(N==P||N==j)return!A.size;if(fu(A))return!au(A).length;for(var G in A)if(en.call(A,G))return!1;return!0},pe.isEqual=function(A,N){return ju(A,N)},pe.isEqualWith=function(A,N,G){var te=(G=typeof G=="function"?G:i)?G(A,N):i;return te===i?ju(A,N,i,G):!!te},pe.isError=jl,pe.isFinite=function(A){return typeof A=="number"&&Sd(A)},pe.isFunction=Ba,pe.isInteger=kc,pe.isLength=Xo,pe.isMap=Bh,pe.isMatch=function(A,N){return A===N||ou(A,N,Sf(N))},pe.isMatchWith=function(A,N,G){return G=typeof G=="function"?G:i,ou(A,N,Sf(N),G)},pe.isNaN=function(A){return Uh(A)&&A!=+A},pe.isNative=function(A){if(Tg(A))throw new Jr("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return yc(A)},pe.isNil=function(A){return A==null},pe.isNull=function(A){return A===null},pe.isNumber=Uh,pe.isObject=Yn,pe.isObjectLike=Mn,pe.isPlainObject=Dc,pe.isRegExp=Nf,pe.isSafeInteger=function(A){return kc(A)&&A>=-9007199254740991&&A<=f},pe.isSet=ga,pe.isString=Mc,pe.isSymbol=Co,pe.isTypedArray=fs,pe.isUndefined=function(A){return A===i},pe.isWeakMap=function(A){return Mn(A)&&Pn(A)==W},pe.isWeakSet=function(A){return Mn(A)&&dn(A)=="[object WeakSet]"},pe.join=function(A,N){return A==null?"":Oo.call(A,N)},pe.kebabCase=Sp,pe.last=li,pe.lastIndexOf=function(A,N,G){var te=A==null?0:A.length;if(!te)return-1;var ae=te;return G!==i&&(ae=(ae=kr(G))<0?Cn(te+ae,0):Vn(ae,te-1)),N==N?function(Se,ze,Ye){for(var st=Ye+1;st--;)if(Se[st]===ze)return st;return st}(A,N,ae):al(A,$a,ae,!0)},pe.lowerCase=Fl,pe.lowerFirst=jf,pe.lt=qh,pe.lte=Lc,pe.max=function(A){return A&&A.length?df(A,Ko,bh):i},pe.maxBy=function(A,N){return A&&A.length?df(A,_r(N,2),bh):i},pe.mean=function(A){return sl(A,Ko)},pe.meanBy=function(A,N){return sl(A,_r(N,2))},pe.min=function(A){return A&&A.length?df(A,Ko,As):i},pe.minBy=function(A,N){return A&&A.length?df(A,_r(N,2),As):i},pe.stubArray=Ao,pe.stubFalse=$h,pe.stubObject=function(){return{}},pe.stubString=function(){return""},pe.stubTrue=function(){return!0},pe.multiply=Jn,pe.nth=function(A,N){return A&&A.length?bc(A,kr(N)):i},pe.noConflict=function(){return Dn._===this&&(Dn._=Iu),this},pe.noop=Xh,pe.now=Ui,pe.pad=function(A,N,G){A=ln(A);var te=(N=kr(N))?Fi(A):0;if(!N||te>=N)return A;var ae=(N-te)/2;return Wo(vh(ae),G)+A+Wo(dh(ae),G)},pe.padEnd=function(A,N,G){A=ln(A);var te=(N=kr(N))?Fi(A):0;return N&&te<N?A+Wo(N-te,G):A},pe.padStart=function(A,N,G){A=ln(A);var te=(N=kr(N))?Fi(A):0;return N&&te<N?Wo(N-te,G)+A:A},pe.parseInt=function(A,N,G){return G||N==null?N=0:N&&(N=+N),Og(ln(A).replace(Re,""),N||0)},pe.random=function(A,N,G){if(G&&typeof G!="boolean"&&go(A,N,G)&&(N=G=i),G===i&&(typeof N=="boolean"?(G=N,N=i):typeof A=="boolean"&&(G=A,A=i)),A===i&&N===i?(A=0,N=1):(A=ya(A),N===i?(N=A,A=0):N=ya(N)),A>N){var te=A;A=N,N=te}if(G||A%1||N%1){var ae=ip();return Vn(A+ae*(N-A+Ys("1e-"+((ae+"").length-1))),N)}return Fu(A,N)},pe.reduce=function(A,N,G){var te=Cr(A)?ol:ul,ae=arguments.length<3;return te(A,_r(N,4),G,ae,Go)},pe.reduceRight=function(A,N,G){var te=Cr(A)?lh:ul,ae=arguments.length<3;return te(A,_r(N,4),G,ae,xo)},pe.repeat=function(A,N,G){return N=(G?go(A,N,G):N===i)?1:kr(N),Bu(ln(A),N)},pe.replace=function(){var A=arguments,N=ln(A[0]);return A.length<3?N:N.replace(A[1],A[2])},pe.result=function(A,N,G){var te=-1,ae=(N=po(N,A)).length;for(ae||(ae=1,A=i);++te<ae;){var Se=A==null?i:A[Oi(N[te])];Se===i&&(te=ae,Se=G),A=Ba(Se)?Se.call(A):Se}return A},pe.round=Pp,pe.runInContext=ut,pe.sample=function(A){return(Cr(A)?yh:jr)(A)},pe.size=function(A){if(A==null)return 0;if(To(A))return Mc(A)?Fi(A):A.length;var N=Pn(A);return N==P||N==j?A.size:au(A).length},pe.snakeCase=Yu,pe.some=function(A,N,G){var te=Cr(A)?ac:lp;return G&&go(A,N,G)&&(N=i),te(A,_r(N,3))},pe.sortedIndex=function(A,N){return mf(A,N)},pe.sortedIndexBy=function(A,N,G){return wl(A,N,_r(G,2))},pe.sortedIndexOf=function(A,N){var G=A==null?0:A.length;if(G){var te=mf(A,N);if(te<G&&oo(A[te],N))return te}return-1},pe.sortedLastIndex=function(A,N){return mf(A,N,!0)},pe.sortedLastIndexBy=function(A,N,G){return wl(A,N,_r(G,2),!0)},pe.sortedLastIndexOf=function(A,N){if(A!=null&&A.length){var G=mf(A,N,!0)-1;if(oo(A[G],N))return G}return-1},pe.startCase=Zd,pe.startsWith=function(A,N,G){return A=ln(A),G=G==null?0:Da(kr(G),0,A.length),N=ca(N),A.slice(G,G+N.length)==N},pe.subtract=av,pe.sum=function(A){return A&&A.length?Zs(A,Ko):0},pe.sumBy=function(A,N){return A&&A.length?Zs(A,_r(N,2)):0},pe.template=function(A,N,G){var te=pe.templateSettings;G&&go(A,N,G)&&(N=i),A=ln(A),N=Gh({},N,te,ki);var ae,Se,ze=Gh({},N.imports,te.imports,ki),Ye=qi(ze),st=lc(ze,Ye),Et=0,_t=N.interpolate||ft,Rt="__p += '",Kt=nf((N.escape||ft).source+"|"+_t.source+"|"+(_t===at?Jt:ft).source+"|"+(N.evaluate||ft).source+"|$","g"),Zt="//# sourceURL="+(en.call(N,"sourceURL")?(N.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++lo+"]")+`
`;A.replace(Kt,function(Dt,vr,Ft,Or,wr,tn){return Ft||(Ft=Or),Rt+=A.slice(Et,tn).replace(Xt,Od),vr&&(ae=!0,Rt+=`' +
__e(`+vr+`) +
'`),wr&&(Se=!0,Rt+=`';
`+wr+`;
__p += '`),Ft&&(Rt+=`' +
((__t = (`+Ft+`)) == null ? '' : __t) +
'`),Et=tn+Dt.length,Dt}),Rt+=`';
`;var cr=en.call(N,"variable")&&N.variable;if(cr){if(Vt.test(cr))throw new Jr("Invalid `variable` option passed into `_.template`")}else Rt=`with (obj) {
`+Rt+`
}
`;Rt=(Se?Rt.replace(Ee,""):Rt).replace(Ce,"$1").replace(ke,"$1;"),Rt="function("+(cr||"obj")+`) {
`+(cr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ae?", __e = _.escape":"")+(Se?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Rt+`return __p
}`;var xt=Bl(function(){return Ri(Ye,Zt+"return "+Rt).apply(i,st)});if(xt.source=Rt,jl(xt))throw xt;return xt},pe.times=function(A,N){if((A=kr(A))<1||A>f)return[];var G=d,te=Vn(A,d);N=_r(N),A-=d;for(var ae=ll(te,N);++G<A;)N(G);return ae},pe.toFinite=ya,pe.toInteger=kr,pe.toLength=pu,pe.toLower=function(A){return ln(A).toLowerCase()},pe.toNumber=ma,pe.toSafeInteger=function(A){return A?Da(kr(A),-9007199254740991,f):A===0?A:0},pe.toString=ln,pe.toUpper=function(A){return ln(A).toUpperCase()},pe.trim=function(A,N,G){if((A=ln(A))&&(G||N===i))return pn(A);if(!A||!(N=ca(N)))return A;var te=Kn(A),ae=Kn(N);return ha(te,rf(te,ae),Es(te,ae)+1).join("")},pe.trimEnd=function(A,N,G){if((A=ln(A))&&(G||N===i))return A.slice(0,Ia(A)+1);if(!A||!(N=ca(N)))return A;var te=Kn(A);return ha(te,0,Es(te,Kn(N))+1).join("")},pe.trimStart=function(A,N,G){if((A=ln(A))&&(G||N===i))return A.replace(Re,"");if(!A||!(N=ca(N)))return A;var te=Kn(A);return ha(te,rf(te,Kn(N))).join("")},pe.truncate=function(A,N){var G=30,te="...";if(Yn(N)){var ae="separator"in N?N.separator:ae;G="length"in N?kr(N.length):G,te="omission"in N?ca(N.omission):te}var Se=(A=ln(A)).length;if(Js(A)){var ze=Kn(A);Se=ze.length}if(G>=Se)return A;var Ye=G-Fi(te);if(Ye<1)return te;var st=ze?ha(ze,0,Ye).join(""):A.slice(0,Ye);if(ae===i)return st+te;if(ze&&(Ye+=st.length-Ye),Nf(ae)){if(A.slice(Ye).search(ae)){var Et,_t=st;for(ae.global||(ae=nf(ae.source,ln(Er.exec(ae))+"g")),ae.lastIndex=0;Et=ae.exec(_t);)var Rt=Et.index;st=st.slice(0,Rt===i?Ye:Rt)}}else if(A.indexOf(ca(ae),Ye)!=Ye){var Kt=st.lastIndexOf(ae);Kt>-1&&(st=st.slice(0,Kt))}return st+te},pe.unescape=function(A){return(A=ln(A))&&we.test(A)?A.replace(Ie,ka):A},pe.uniqueId=function(A){var N=++dc;return ln(A)+N},pe.upperCase=Qd,pe.upperFirst=Yh,pe.each=Rc,pe.eachRight=qd,pe.first=kl,ev(pe,(nv={},Ps(pe,function(A,N){en.call(pe.prototype,N)||(nv[N]=A)}),nv),{chain:!1}),pe.VERSION="4.17.21",Wt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(A){pe[A].placeholder=pe}),Wt(["drop","take"],function(A,N){Br.prototype[A]=function(G){G=G===i?1:Cn(kr(G),0);var te=this.__filtered__&&!N?new Br(this):this.clone();return te.__filtered__?te.__takeCount__=Vn(G,te.__takeCount__):te.__views__.push({size:Vn(G,d),type:A+(te.__dir__<0?"Right":"")}),te},Br.prototype[A+"Right"]=function(G){return this.reverse()[A](G).reverse()}}),Wt(["filter","map","takeWhile"],function(A,N){var G=N+1,te=G==1||G==3;Br.prototype[A]=function(ae){var Se=this.clone();return Se.__iteratees__.push({iteratee:_r(ae,3),type:G}),Se.__filtered__=Se.__filtered__||te,Se}}),Wt(["head","last"],function(A,N){var G="take"+(N?"Right":"");Br.prototype[A]=function(){return this[G](1).value()[0]}}),Wt(["initial","tail"],function(A,N){var G="drop"+(N?"":"Right");Br.prototype[A]=function(){return this.__filtered__?new Br(this):this[G](1)}}),Br.prototype.compact=function(){return this.filter(Ko)},Br.prototype.find=function(A){return this.filter(A).head()},Br.prototype.findLast=function(A){return this.reverse().find(A)},Br.prototype.invokeMap=gr(function(A,N){return typeof A=="function"?new Br(this):this.map(function(G){return iu(G,A,N)})}),Br.prototype.reject=function(A){return this.filter(Ic(_r(A)))},Br.prototype.slice=function(A,N){A=kr(A);var G=this;return G.__filtered__&&(A>0||N<0)?new Br(G):(A<0?G=G.takeRight(-A):A&&(G=G.drop(A)),N!==i&&(G=(N=kr(N))<0?G.dropRight(-N):G.take(N-A)),G)},Br.prototype.takeRightWhile=function(A){return this.reverse().takeWhile(A).reverse()},Br.prototype.toArray=function(){return this.take(d)},Ps(Br.prototype,function(A,N){var G=/^(?:filter|find|map|reject)|While$/.test(N),te=/^(?:head|last)$/.test(N),ae=pe[te?"take"+(N=="last"?"Right":""):N],Se=te||/^find/.test(N);ae&&(pe.prototype[N]=function(){var ze=this.__wrapped__,Ye=te?[1]:arguments,st=ze instanceof Br,Et=Ye[0],_t=st||Cr(ze),Rt=function(vr){var Ft=ae.apply(pe,aa([vr],Ye));return te&&Kt?Ft[0]:Ft};_t&&G&&typeof Et=="function"&&Et.length!=1&&(st=_t=!1);var Kt=this.__chain__,Zt=!!this.__actions__.length,cr=Se&&!Kt,xt=st&&!Zt;if(!Se&&_t){ze=xt?ze:new Br(this);var Dt=A.apply(ze,Ye);return Dt.__actions__.push({func:Lh,args:[Rt],thisArg:i}),new Qn(Dt,Kt)}return cr&&xt?A.apply(this,Ye):(Dt=this.thru(Rt),cr?te?Dt.value()[0]:Dt.value():Dt)})}),Wt(["pop","push","shift","sort","splice","unshift"],function(A){var N=hc[A],G=/^(?:push|sort|unshift)$/.test(A)?"tap":"thru",te=/^(?:pop|shift)$/.test(A);pe.prototype[A]=function(){var ae=arguments;if(te&&!this.__chain__){var Se=this.value();return N.apply(Cr(Se)?Se:[],ae)}return this[G](function(ze){return N.apply(Cr(ze)?ze:[],ae)})}}),Ps(Br.prototype,function(A,N){var G=pe[N];if(G){var te=G.name+"";en.call(hl,te)||(hl[te]=[]),hl[te].push({name:N,func:G})}}),hl[is(i,2).name]=[{name:"wrapper",func:i}],Br.prototype.clone=function(){var A=new Br(this.__wrapped__);return A.__actions__=So(this.__actions__),A.__dir__=this.__dir__,A.__filtered__=this.__filtered__,A.__iteratees__=So(this.__iteratees__),A.__takeCount__=this.__takeCount__,A.__views__=So(this.__views__),A},Br.prototype.reverse=function(){if(this.__filtered__){var A=new Br(this);A.__dir__=-1,A.__filtered__=!0}else(A=this.clone()).__dir__*=-1;return A},Br.prototype.value=function(){var A=this.__wrapped__.value(),N=this.__dir__,G=Cr(A),te=N<0,ae=G?A.length:0,Se=function(tn,sr,dr){for(var xi=-1,Xn=dr.length;++xi<Xn;){var Ro=dr[xi],Ln=Ro.size;switch(Ro.type){case"drop":tn+=Ln;break;case"dropRight":sr-=Ln;break;case"take":sr=Vn(sr,tn+Ln);break;case"takeRight":tn=Cn(tn,sr-Ln)}}return{start:tn,end:sr}}(0,ae,this.__views__),ze=Se.start,Ye=Se.end,st=Ye-ze,Et=te?Ye:ze-1,_t=this.__iteratees__,Rt=_t.length,Kt=0,Zt=Vn(st,this.__takeCount__);if(!G||!te&&ae==st&&Zt==st)return fa(A,this.__actions__);var cr=[];e:for(;st--&&Kt<Zt;){for(var xt=-1,Dt=A[Et+=N];++xt<Rt;){var vr=_t[xt],Ft=vr.iteratee,Or=vr.type,wr=Ft(Dt);if(Or==2)Dt=wr;else if(!wr){if(Or==1)continue e;break e}}cr[Kt++]=Dt}return cr},pe.prototype.at=Is,pe.prototype.chain=function(){return ls(this)},pe.prototype.commit=function(){return new Qn(this.value(),this.__chain__)},pe.prototype.next=function(){this.__values__===i&&(this.__values__=Pt(this.value()));var A=this.__index__>=this.__values__.length;return{done:A,value:A?i:this.__values__[this.__index__++]}},pe.prototype.plant=function(A){for(var N,G=this;G instanceof gh;){var te=Ld(G);te.__index__=0,te.__values__=i,N?ae.__wrapped__=te:N=te;var ae=te;G=G.__wrapped__}return ae.__wrapped__=A,N},pe.prototype.reverse=function(){var A=this.__wrapped__;if(A instanceof Br){var N=A;return this.__actions__.length&&(N=new Br(this)),(N=N.reverse()).__actions__.push({func:Lh,args:[Rf],thisArg:i}),new Qn(N,this.__chain__)}return this.thru(Rf)},pe.prototype.toJSON=pe.prototype.valueOf=pe.prototype.value=function(){return fa(this.__wrapped__,this.__actions__)},pe.prototype.first=pe.prototype.head,Du&&(pe.prototype[Du]=function(){return this}),pe}();Dn._=sa,(n=(function(){return sa}).call(e,t,e,r))===i||(r.exports=n)}).call(this)},5880:function(r,e,t){var n,i;n=function(){var o=function(){},a="undefined",s=typeof window!==a&&typeof window.navigator!==a&&/Trident\/|MSIE /.test(window.navigator.userAgent),u=["trace","debug","info","warn","error"],l={},c=null;function f(p,m){var E=p[m];if(typeof E.bind=="function")return E.bind(p);try{return Function.prototype.bind.call(E,p)}catch{return function(){return Function.prototype.apply.apply(E,[p,arguments])}}}function h(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function d(){for(var p=this.getLevel(),m=0;m<u.length;m++){var E=u[m];this[E]=m<p?o:this.methodFactory(E,p,this.name)}if(this.log=this.debug,typeof console===a&&p<this.levels.SILENT)return"No console available for logging"}function v(p){return function(){typeof console!==a&&(d.call(this),this[p].apply(this,arguments))}}function g(p,m,E){return function(C){return C==="debug"&&(C="log"),typeof console!==a&&(C==="trace"&&s?h:console[C]!==void 0?f(console,C):console.log!==void 0?f(console,"log"):o)}(p)||v.apply(this,arguments)}function _(p,m){var E,C,P,T=this,R="loglevel";function D(){var F;if(typeof window!==a&&R){try{F=window.localStorage[R]}catch{}if(typeof F===a)try{var q=window.document.cookie,W=encodeURIComponent(R),Z=q.indexOf(W+"=");Z!==-1&&(F=/^([^;]+)/.exec(q.slice(Z+W.length+1))[1])}catch{}return T.levels[F]===void 0&&(F=void 0),F}}function L(F){var q=F;if(typeof q=="string"&&T.levels[q.toUpperCase()]!==void 0&&(q=T.levels[q.toUpperCase()]),typeof q=="number"&&q>=0&&q<=T.levels.SILENT)return q;throw new TypeError("log.setLevel() called with invalid level: "+F)}typeof p=="string"?R+=":"+p:typeof p=="symbol"&&(R=void 0),T.name=p,T.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},T.methodFactory=m||g,T.getLevel=function(){return P??C??E},T.setLevel=function(F,q){return P=L(F),q!==!1&&function(W){var Z=(u[W]||"silent").toUpperCase();if(typeof window!==a&&R){try{return void(window.localStorage[R]=Z)}catch{}try{window.document.cookie=encodeURIComponent(R)+"="+Z+";"}catch{}}}(P),d.call(T)},T.setDefaultLevel=function(F){C=L(F),D()||T.setLevel(F,!1)},T.resetLevel=function(){P=null,function(){if(typeof window!==a&&R){try{window.localStorage.removeItem(R)}catch{}try{window.document.cookie=encodeURIComponent(R)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}(),d.call(T)},T.enableAll=function(F){T.setLevel(T.levels.TRACE,F)},T.disableAll=function(F){T.setLevel(T.levels.SILENT,F)},T.rebuild=function(){if(c!==T&&(E=L(c.getLevel())),d.call(T),c===T)for(var F in l)l[F].rebuild()},E=L(c?c.getLevel():"WARN");var j=D();j!=null&&(P=L(j)),d.call(T)}(c=new _).getLogger=function(p){if(typeof p!="symbol"&&typeof p!="string"||p==="")throw new TypeError("You must supply a name when creating a logger.");var m=l[p];return m||(m=l[p]=new _(p,c.methodFactory)),m};var y=typeof window!==a?window.log:void 0;return c.noConflict=function(){return typeof window!==a&&window.log===c&&(window.log=y),c},c.getLoggers=function(){return l},c.default=c,c},(i=n.call(e,t,e,r))===void 0||(r.exports=i)},397:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.assertNotificationFilterIsEmpty=e.assertImpersonatedUserIsEmpty=e.assertTxConfigIsEmpty=e.assertDatabaseIsEmpty=void 0;var n=t(9305);t(9014),e.assertTxConfigIsEmpty=function(i,o,a){if(o===void 0&&(o=function(){}),i&&!i.isEmpty()){var s=(0,n.newError)("Driver is connected to the database that does not support transaction configuration. Please upgrade to neo4j 3.5.0 or later in order to use this functionality");throw o(s.message),a.onError(s),s}},e.assertDatabaseIsEmpty=function(i,o,a){if(o===void 0&&(o=function(){}),i){var s=(0,n.newError)("Driver is connected to the database that does not support multiple databases. Please upgrade to neo4j 4.0.0 or later in order to use this functionality");throw o(s.message),a.onError(s),s}},e.assertImpersonatedUserIsEmpty=function(i,o,a){if(o===void 0&&(o=function(){}),i){var s=(0,n.newError)("Driver is connected to the database that does not support user impersonation. Please upgrade to neo4j 4.4.0 or later in order to use this functionality. "+"Trying to impersonate ".concat(i,"."));throw o(s.message),a.onError(s),s}},e.assertNotificationFilterIsEmpty=function(i,o,a){if(o===void 0&&(o=function(){}),i!==void 0){var s=(0,n.newError)("Driver is connected to a database that does not support user notification filters. Please upgrade to Neo4j 5.7.0 or later in order to use this functionality. "+"Trying to set notifications to ".concat(n.json.stringify(i),"."));throw o(s.message),a.onError(s),s}}},8320:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(P){for(var T,R=1,D=arguments.length;R<D;R++)for(var L in T=arguments[R])Object.prototype.hasOwnProperty.call(T,L)&&(P[L]=T[L]);return P},n.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(P,T,R,D){D===void 0&&(D=R);var L=Object.getOwnPropertyDescriptor(T,R);L&&!("get"in L?!T.__esModule:L.writable||L.configurable)||(L={enumerable:!0,get:function(){return T[R]}}),Object.defineProperty(P,D,L)}:function(P,T,R,D){D===void 0&&(D=R),P[D]=T[R]}),o=this&&this.__setModuleDefault||(Object.create?function(P,T){Object.defineProperty(P,"default",{enumerable:!0,value:T})}:function(P,T){P.default=T}),a=this&&this.__importStar||function(P){if(P&&P.__esModule)return P;var T={};if(P!=null)for(var R in P)R!=="default"&&Object.prototype.hasOwnProperty.call(P,R)&&i(T,P,R);return o(T,P),T},s=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(e,"__esModule",{value:!0});var u=t(397),l=(t(7452),t(7168)),c=a(t(7021)),f=t(9014),h=t(9305),d=s(t(6661)),v=s(t(3321)),g=h.internal.bookmarks.Bookmarks,_=h.internal.constants,y=_.ACCESS_MODE_WRITE,p=_.BOLT_PROTOCOL_V1,m=(h.internal.logger.Logger,h.internal.txConfig.TxConfig),E=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),C=function(){function P(T,R,D,L,j,F){var q=D===void 0?{}:D,W=q.disableLosslessIntegers,Z=q.useBigInt;L===void 0&&(L=function(){return null}),this._server=T||{},this._chunker=R,this._packer=this._createPacker(R),this._unpacker=this._createUnpacker(W,Z),this._responseHandler=L(this),this._log=j,this._onProtocolError=F,this._fatalError=null,this._lastMessageSignature=null,this._config={disableLosslessIntegers:W,useBigInt:Z}}return Object.defineProperty(P.prototype,"transformer",{get:function(){var T=this;return this._transformer===void 0&&(this._transformer=new v.default(Object.values(d.default).map(function(R){return R(T._config,T._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"version",{get:function(){return p},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"supportsReAuth",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"initialized",{get:function(){return!!this._initialized},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"authToken",{get:function(){return this._authToken},enumerable:!1,configurable:!0}),P.prototype.packer=function(){return this._packer},P.prototype.packable=function(T){return this._packer.packable(T,this.transformer.toStructure)},P.prototype.unpacker=function(){return this._unpacker},P.prototype.unpack=function(T){return this._unpacker.unpack(T,this.transformer.fromStructure)},P.prototype.transformMetadata=function(T){return T},P.prototype.enrichErrorMetadata=function(T){return n(n({},T),{diagnostic_record:T.diagnostic_record!==null?n(n({},E),T.diagnostic_record):null})},P.prototype.initialize=function(T){var R=this,D=T===void 0?{}:T,L=D.userAgent,j=(D.boltAgent,D.authToken),F=D.notificationFilter,q=D.onError,W=D.onComplete,Z=new f.LoginObserver({onError:function(Q){return R._onLoginError(Q,q)},onCompleted:function(Q){return R._onLoginCompleted(Q,W)}});return(0,u.assertNotificationFilterIsEmpty)(F,this._onProtocolError,Z),this.write(c.default.init(L,j),Z,!0),Z},P.prototype.logoff=function(T){var R=T===void 0?{}:T,D=R.onComplete,L=R.onError,j=(R.flush,new f.LogoffObserver({onCompleted:D,onError:L})),F=(0,h.newError)("Driver is connected to a database that does not support logoff. Please upgrade to Neo4j 5.5.0 or later in order to use this functionality.");throw this._onProtocolError(F.message),j.onError(F),F},P.prototype.logon=function(T){var R=this,D=T===void 0?{}:T,L=D.authToken,j=D.onComplete,F=D.onError,q=(D.flush,new f.LoginObserver({onCompleted:function(){return R._onLoginCompleted({},L,j)},onError:function(Z){return R._onLoginError(Z,F)}})),W=(0,h.newError)("Driver is connected to a database that does not support logon. Please upgrade to Neo4j 5.5.0 or later in order to use this functionality.");throw this._onProtocolError(W.message),q.onError(W),W},P.prototype.prepareToClose=function(){},P.prototype.beginTransaction=function(T){var R=T===void 0?{}:T,D=R.bookmarks,L=R.txConfig,j=R.database,F=R.mode,q=R.impersonatedUser,W=R.notificationFilter,Z=R.beforeError,Q=R.afterError,re=R.beforeComplete,ee=R.afterComplete;return this.run("BEGIN",D?D.asBeginTransactionParameters():{},{bookmarks:D,txConfig:L,database:j,mode:F,impersonatedUser:q,notificationFilter:W,beforeError:Z,afterError:Q,beforeComplete:re,afterComplete:ee,flush:!1})},P.prototype.commitTransaction=function(T){var R=T===void 0?{}:T,D=R.beforeError,L=R.afterError,j=R.beforeComplete,F=R.afterComplete;return this.run("COMMIT",{},{bookmarks:g.empty(),txConfig:m.empty(),mode:y,beforeError:D,afterError:L,beforeComplete:j,afterComplete:F})},P.prototype.rollbackTransaction=function(T){var R=T===void 0?{}:T,D=R.beforeError,L=R.afterError,j=R.beforeComplete,F=R.afterComplete;return this.run("ROLLBACK",{},{bookmarks:g.empty(),txConfig:m.empty(),mode:y,beforeError:D,afterError:L,beforeComplete:j,afterComplete:F})},P.prototype.run=function(T,R,D){var L=D===void 0?{}:D,j=(L.bookmarks,L.txConfig),F=L.database,q=(L.mode,L.impersonatedUser),W=L.notificationFilter,Z=L.beforeKeys,Q=L.afterKeys,re=L.beforeError,ee=L.afterError,ue=L.beforeComplete,de=L.afterComplete,se=L.flush,be=se===void 0||se,Le=L.highRecordWatermark,fe=Le===void 0?Number.MAX_VALUE:Le,ce=L.lowRecordWatermark,Ee=ce===void 0?Number.MAX_VALUE:ce,Ce=new f.ResultStreamObserver({server:this._server,beforeKeys:Z,afterKeys:Q,beforeError:re,afterError:ee,beforeComplete:ue,afterComplete:de,highRecordWatermark:fe,lowRecordWatermark:Ee});return(0,u.assertTxConfigIsEmpty)(j,this._onProtocolError,Ce),(0,u.assertDatabaseIsEmpty)(F,this._onProtocolError,Ce),(0,u.assertImpersonatedUserIsEmpty)(q,this._onProtocolError,Ce),(0,u.assertNotificationFilterIsEmpty)(W,this._onProtocolError,Ce),this.write(c.default.run(T,R),Ce,!1),this.write(c.default.pullAll(),Ce,be),Ce},Object.defineProperty(P.prototype,"currentFailure",{get:function(){return this._responseHandler.currentFailure},enumerable:!1,configurable:!0}),P.prototype.reset=function(T){var R=T===void 0?{}:T,D=R.onError,L=R.onComplete,j=new f.ResetObserver({onProtocolError:this._onProtocolError,onError:D,onComplete:L});return this.write(c.default.reset(),j,!0),j},P.prototype.telemetry=function(T,R){T.api;var D=R===void 0?{}:R,L=(D.onError,D.onCompleted),j=new f.CompletedObserver;return L&&L(),j},P.prototype._createPacker=function(T){return new l.v1.Packer(T)},P.prototype._createUnpacker=function(T,R){return new l.v1.Unpacker(T,R)},P.prototype.write=function(T,R,D){if(this.queueObserverIfProtocolIsNotBroken(R)){this._log.isDebugEnabled()&&this._log.debug("C: ".concat(T)),this._lastMessageSignature=T.signature;var L=new l.structure.Structure(T.signature,T.fields);this.packable(L)(),this._chunker.messageBoundary(),D&&this._chunker.flush()}},P.prototype.isLastMessageLogon=function(){return this._lastMessageSignature===c.SIGNATURES.HELLO||this._lastMessageSignature===c.SIGNATURES.LOGON},P.prototype.isLastMessageReset=function(){return this._lastMessageSignature===c.SIGNATURES.RESET},P.prototype.notifyFatalError=function(T){return this._fatalError=T,this._responseHandler._notifyErrorToObservers(T)},P.prototype.updateCurrentObserver=function(){return this._responseHandler._updateCurrentObserver()},P.prototype.hasOngoingObservableRequests=function(){return this._responseHandler.hasOngoingObservableRequests()},P.prototype.queueObserverIfProtocolIsNotBroken=function(T){return this.isBroken()?(this.notifyFatalErrorToObserver(T),!1):this._responseHandler._queueObserver(T)},P.prototype.isBroken=function(){return!!this._fatalError},P.prototype.notifyFatalErrorToObserver=function(T){T&&T.onError&&T.onError(this._fatalError)},P.prototype.resetFailure=function(){this._responseHandler._resetFailure()},P.prototype._onLoginCompleted=function(T,R,D){if(this._initialized=!0,this._authToken=R,T){var L=T.server;this._server.version||(this._server.version=L)}D&&D(T)},P.prototype._onLoginError=function(T,R){this._onProtocolError(T.message),R&&R(T)},P}();e.default=C},6661:function(r,e,t){var n=this&&this.__read||function(u,l){var c=typeof Symbol=="function"&&u[Symbol.iterator];if(!c)return u;var f,h,d=c.call(u),v=[];try{for(;(l===void 0||l-- >0)&&!(f=d.next()).done;)v.push(f.value)}catch(g){h={error:g}}finally{try{f&&!f.done&&(c=d.return)&&c.call(d)}finally{if(h)throw h.error}}return v};Object.defineProperty(e,"__esModule",{value:!0});var i=t(9305),o=t(7168),a=t(3321),s=i.error.PROTOCOL_ERROR;e.default={createNodeTransformer:function(){return new a.TypeTransformer({signature:78,isTypeInstance:function(u){return u instanceof i.Node},toStructure:function(u){throw(0,i.newError)("It is not allowed to pass nodes in query parameters, given: ".concat(u),s)},fromStructure:function(u){o.structure.verifyStructSize("Node",3,u.size);var l=n(u.fields,3),c=l[0],f=l[1],h=l[2];return new i.Node(c,f,h)}})},createRelationshipTransformer:function(){return new a.TypeTransformer({signature:82,isTypeInstance:function(u){return u instanceof i.Relationship},toStructure:function(u){throw(0,i.newError)("It is not allowed to pass relationships in query parameters, given: ".concat(u),s)},fromStructure:function(u){o.structure.verifyStructSize("Relationship",5,u.size);var l=n(u.fields,5),c=l[0],f=l[1],h=l[2],d=l[3],v=l[4];return new i.Relationship(c,f,h,d,v)}})},createUnboundRelationshipTransformer:function(){return new a.TypeTransformer({signature:114,isTypeInstance:function(u){return u instanceof i.UnboundRelationship},toStructure:function(u){throw(0,i.newError)("It is not allowed to pass unbound relationships in query parameters, given: ".concat(u),s)},fromStructure:function(u){o.structure.verifyStructSize("UnboundRelationship",3,u.size);var l=n(u.fields,3),c=l[0],f=l[1],h=l[2];return new i.UnboundRelationship(c,f,h)}})},createPathTransformer:function(){return new a.TypeTransformer({signature:80,isTypeInstance:function(u){return u instanceof i.Path},toStructure:function(u){throw(0,i.newError)("It is not allowed to pass paths in query parameters, given: ".concat(u),s)},fromStructure:function(u){o.structure.verifyStructSize("Path",3,u.size);for(var l=n(u.fields,3),c=l[0],f=l[1],h=l[2],d=[],v=c[0],g=0;g<h.length;g+=2){var _=c[h[g+1]],y=(0,i.toNumber)(h[g]),p=void 0;y>0?(p=f[y-1])instanceof i.UnboundRelationship&&(f[y-1]=p=p.bindTo(v,_)):(p=f[-y-1])instanceof i.UnboundRelationship&&(f[-y-1]=p=p.bindTo(_,v)),d.push(new i.PathSegment(v,p,_)),v=_}return new i.Path(c[0],c[c.length-1],d)}})}}},2857:function(r,e,t){var n,i=this&&this.__extends||(n=function(d,v){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,_){g.__proto__=_}||function(g,_){for(var y in _)Object.prototype.hasOwnProperty.call(_,y)&&(g[y]=_[y])},n(d,v)},function(d,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function g(){this.constructor=d}n(d,v),d.prototype=v===null?Object.create(v):(g.prototype=v.prototype,new g)}),o=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(t(8320)),s=o(t(7168)),u=t(9305),l=o(t(3448)),c=o(t(3321)),f=u.internal.constants.BOLT_PROTOCOL_V2,h=function(d){function v(){return d!==null&&d.apply(this,arguments)||this}return i(v,d),v.prototype._createPacker=function(g){return new s.default.Packer(g)},v.prototype._createUnpacker=function(g,_){return new s.default.Unpacker(g,_)},Object.defineProperty(v.prototype,"transformer",{get:function(){var g=this;return this._transformer===void 0&&(this._transformer=new c.default(Object.values(l.default).map(function(_){return _(g._config,g._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"version",{get:function(){return f},enumerable:!1,configurable:!0}),v}(a.default);e.default=h},3448:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(_){for(var y,p=1,m=arguments.length;p<m;p++)for(var E in y=arguments[p])Object.prototype.hasOwnProperty.call(y,E)&&(_[E]=y[E]);return _},n.apply(this,arguments)},i=this&&this.__read||function(_,y){var p=typeof Symbol=="function"&&_[Symbol.iterator];if(!p)return _;var m,E,C=p.call(_),P=[];try{for(;(y===void 0||y-- >0)&&!(m=C.next()).done;)P.push(m.value)}catch(T){E={error:T}}finally{try{m&&!m.done&&(p=C.return)&&p.call(C)}finally{if(E)throw E.error}}return P},o=this&&this.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(e,"__esModule",{value:!0});var a=t(9305),s=t(7168),u=t(3321),l=t(5973),c=o(t(6661)),f=a.internal.temporalUtil,h=f.dateToEpochDay,d=f.localDateTimeToEpochSecond,v=f.localTimeToNanoOfDay;function g(_,y,p){if(!y&&!p)return _;var m=function(T){return p?T.toBigInt():T.toNumberOrInfinity()},E=Object.create(Object.getPrototypeOf(_));for(var C in _)if(Object.prototype.hasOwnProperty.call(_,C)===!0){var P=_[C];E[C]=(0,a.isInt)(P)?m(P):P}return Object.freeze(E),E}e.default=n(n({},c.default),{createPoint2DTransformer:function(){return new u.TypeTransformer({signature:88,isTypeInstance:function(_){return(0,a.isPoint)(_)&&(_.z===null||_.z===void 0)},toStructure:function(_){return new s.structure.Structure(88,[(0,a.int)(_.srid),_.x,_.y])},fromStructure:function(_){s.structure.verifyStructSize("Point2D",3,_.size);var y=i(_.fields,3),p=y[0],m=y[1],E=y[2];return new a.Point(p,m,E,void 0)}})},createPoint3DTransformer:function(){return new u.TypeTransformer({signature:89,isTypeInstance:function(_){return(0,a.isPoint)(_)&&_.z!==null&&_.z!==void 0},toStructure:function(_){return new s.structure.Structure(89,[(0,a.int)(_.srid),_.x,_.y,_.z])},fromStructure:function(_){s.structure.verifyStructSize("Point3D",4,_.size);var y=i(_.fields,4),p=y[0],m=y[1],E=y[2],C=y[3];return new a.Point(p,m,E,C)}})},createDurationTransformer:function(){return new u.TypeTransformer({signature:69,isTypeInstance:a.isDuration,toStructure:function(_){var y=(0,a.int)(_.months),p=(0,a.int)(_.days),m=(0,a.int)(_.seconds),E=(0,a.int)(_.nanoseconds);return new s.structure.Structure(69,[y,p,m,E])},fromStructure:function(_){s.structure.verifyStructSize("Duration",4,_.size);var y=i(_.fields,4),p=y[0],m=y[1],E=y[2],C=y[3];return new a.Duration(p,m,E,C)}})},createLocalTimeTransformer:function(_){var y=_.disableLosslessIntegers,p=_.useBigInt;return new u.TypeTransformer({signature:116,isTypeInstance:a.isLocalTime,toStructure:function(m){var E=v(m.hour,m.minute,m.second,m.nanosecond);return new s.structure.Structure(116,[E])},fromStructure:function(m){s.structure.verifyStructSize("LocalTime",1,m.size);var E=i(m.fields,1)[0];return g((0,l.nanoOfDayToLocalTime)(E),y,p)}})},createTimeTransformer:function(_){var y=_.disableLosslessIntegers,p=_.useBigInt;return new u.TypeTransformer({signature:84,isTypeInstance:a.isTime,toStructure:function(m){var E=v(m.hour,m.minute,m.second,m.nanosecond),C=(0,a.int)(m.timeZoneOffsetSeconds);return new s.structure.Structure(84,[E,C])},fromStructure:function(m){s.structure.verifyStructSize("Time",2,m.size);var E=i(m.fields,2),C=E[0],P=E[1],T=(0,l.nanoOfDayToLocalTime)(C);return g(new a.Time(T.hour,T.minute,T.second,T.nanosecond,P),y,p)}})},createDateTransformer:function(_){var y=_.disableLosslessIntegers,p=_.useBigInt;return new u.TypeTransformer({signature:68,isTypeInstance:a.isDate,toStructure:function(m){var E=h(m.year,m.month,m.day);return new s.structure.Structure(68,[E])},fromStructure:function(m){s.structure.verifyStructSize("Date",1,m.size);var E=i(m.fields,1)[0];return g((0,l.epochDayToDate)(E),y,p)}})},createLocalDateTimeTransformer:function(_){var y=_.disableLosslessIntegers,p=_.useBigInt;return new u.TypeTransformer({signature:100,isTypeInstance:a.isLocalDateTime,toStructure:function(m){var E=d(m.year,m.month,m.day,m.hour,m.minute,m.second,m.nanosecond),C=(0,a.int)(m.nanosecond);return new s.structure.Structure(100,[E,C])},fromStructure:function(m){s.structure.verifyStructSize("LocalDateTime",2,m.size);var E=i(m.fields,2),C=E[0],P=E[1];return g((0,l.epochSecondAndNanoToLocalDateTime)(C,P),y,p)}})},createDateTimeWithZoneIdTransformer:function(_){var y=_.disableLosslessIntegers,p=_.useBigInt;return new u.TypeTransformer({signature:102,isTypeInstance:function(m){return(0,a.isDateTime)(m)&&m.timeZoneId!=null},toStructure:function(m){var E=d(m.year,m.month,m.day,m.hour,m.minute,m.second,m.nanosecond),C=(0,a.int)(m.nanosecond),P=m.timeZoneId;return new s.structure.Structure(102,[E,C,P])},fromStructure:function(m){s.structure.verifyStructSize("DateTimeWithZoneId",3,m.size);var E=i(m.fields,3),C=E[0],P=E[1],T=E[2],R=(0,l.epochSecondAndNanoToLocalDateTime)(C,P);return g(new a.DateTime(R.year,R.month,R.day,R.hour,R.minute,R.second,R.nanosecond,null,T),y,p)}})},createDateTimeWithOffsetTransformer:function(_){var y=_.disableLosslessIntegers,p=_.useBigInt;return new u.TypeTransformer({signature:70,isTypeInstance:function(m){return(0,a.isDateTime)(m)&&m.timeZoneId==null},toStructure:function(m){var E=d(m.year,m.month,m.day,m.hour,m.minute,m.second,m.nanosecond),C=(0,a.int)(m.nanosecond),P=(0,a.int)(m.timeZoneOffsetSeconds);return new s.structure.Structure(70,[E,C,P])},fromStructure:function(m){s.structure.verifyStructSize("DateTimeWithZoneOffset",3,m.size);var E=i(m.fields,3),C=E[0],P=E[1],T=E[2],R=(0,l.epochSecondAndNanoToLocalDateTime)(C,P);return g(new a.DateTime(R.year,R.month,R.day,R.hour,R.minute,R.second,R.nanosecond,T,null),y,p)}})}})},5642:function(r,e,t){var n,i=this&&this.__extends||(n=function(E,C){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,T){P.__proto__=T}||function(P,T){for(var R in T)Object.prototype.hasOwnProperty.call(T,R)&&(P[R]=T[R])},n(E,C)},function(E,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function P(){this.constructor=E}n(E,C),E.prototype=C===null?Object.create(C):(P.prototype=C.prototype,new P)}),o=this&&this.__assign||function(){return o=Object.assign||function(E){for(var C,P=1,T=arguments.length;P<T;P++)for(var R in C=arguments[P])Object.prototype.hasOwnProperty.call(C,R)&&(E[R]=C[R]);return E},o.apply(this,arguments)},a=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(e,"__esModule",{value:!0});var s=a(t(2857)),u=a(t(7021)),l=t(397),c=t(9014),f=a(t(1175)),h=a(t(3321)),d=t(9305),v=(d.internal.bookmarks.Bookmarks,d.internal.constants.BOLT_PROTOCOL_V3),g=d.internal.txConfig.TxConfig,_="context",y="CALL dbms.cluster.routing.getRoutingTable($".concat(_,")"),p=new c.StreamObserver,m=function(E){function C(){return E!==null&&E.apply(this,arguments)||this}return i(C,E),Object.defineProperty(C.prototype,"version",{get:function(){return v},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"transformer",{get:function(){var P=this;return this._transformer===void 0&&(this._transformer=new h.default(Object.values(f.default).map(function(T){return T(P._config,P._log)}))),this._transformer},enumerable:!1,configurable:!0}),C.prototype.transformMetadata=function(P){return"t_first"in P&&(P.result_available_after=P.t_first,delete P.t_first),"t_last"in P&&(P.result_consumed_after=P.t_last,delete P.t_last),P},C.prototype.initialize=function(P){var T=this,R=P===void 0?{}:P,D=R.userAgent,L=(R.boltAgent,R.authToken),j=R.notificationFilter,F=R.onError,q=R.onComplete,W=new c.LoginObserver({onError:function(Z){return T._onLoginError(Z,F)},onCompleted:function(Z){return T._onLoginCompleted(Z,L,q)}});return(0,l.assertNotificationFilterIsEmpty)(j,this._onProtocolError,W),this.write(u.default.hello(D,L),W,!0),W},C.prototype.prepareToClose=function(){this.write(u.default.goodbye(),p,!0)},C.prototype.beginTransaction=function(P){var T=P===void 0?{}:P,R=T.bookmarks,D=T.txConfig,L=T.database,j=T.impersonatedUser,F=T.notificationFilter,q=T.mode,W=T.beforeError,Z=T.afterError,Q=T.beforeComplete,re=T.afterComplete,ee=new c.ResultStreamObserver({server:this._server,beforeError:W,afterError:Z,beforeComplete:Q,afterComplete:re});return ee.prepareToHandleSingleResponse(),(0,l.assertDatabaseIsEmpty)(L,this._onProtocolError,ee),(0,l.assertImpersonatedUserIsEmpty)(j,this._onProtocolError,ee),(0,l.assertNotificationFilterIsEmpty)(F,this._onProtocolError,ee),this.write(u.default.begin({bookmarks:R,txConfig:D,mode:q}),ee,!0),ee},C.prototype.commitTransaction=function(P){var T=P===void 0?{}:P,R=T.beforeError,D=T.afterError,L=T.beforeComplete,j=T.afterComplete,F=new c.ResultStreamObserver({server:this._server,beforeError:R,afterError:D,beforeComplete:L,afterComplete:j});return F.prepareToHandleSingleResponse(),this.write(u.default.commit(),F,!0),F},C.prototype.rollbackTransaction=function(P){var T=P===void 0?{}:P,R=T.beforeError,D=T.afterError,L=T.beforeComplete,j=T.afterComplete,F=new c.ResultStreamObserver({server:this._server,beforeError:R,afterError:D,beforeComplete:L,afterComplete:j});return F.prepareToHandleSingleResponse(),this.write(u.default.rollback(),F,!0),F},C.prototype.run=function(P,T,R){var D=R===void 0?{}:R,L=D.bookmarks,j=D.txConfig,F=D.database,q=D.impersonatedUser,W=D.notificationFilter,Z=D.mode,Q=D.beforeKeys,re=D.afterKeys,ee=D.beforeError,ue=D.afterError,de=D.beforeComplete,se=D.afterComplete,be=D.flush,Le=be===void 0||be,fe=D.highRecordWatermark,ce=fe===void 0?Number.MAX_VALUE:fe,Ee=D.lowRecordWatermark,Ce=Ee===void 0?Number.MAX_VALUE:Ee,ke=new c.ResultStreamObserver({server:this._server,beforeKeys:Q,afterKeys:re,beforeError:ee,afterError:ue,beforeComplete:de,afterComplete:se,highRecordWatermark:ce,lowRecordWatermark:Ce});return(0,l.assertDatabaseIsEmpty)(F,this._onProtocolError,ke),(0,l.assertImpersonatedUserIsEmpty)(q,this._onProtocolError,ke),(0,l.assertNotificationFilterIsEmpty)(W,this._onProtocolError,ke),this.write(u.default.runWithMetadata(P,T,{bookmarks:L,txConfig:j,mode:Z}),ke,!1),this.write(u.default.pullAll(),ke,Le),ke},C.prototype.requestRoutingInformation=function(P){var T,R=P.routingContext,D=R===void 0?{}:R,L=P.sessionContext,j=L===void 0?{}:L,F=P.onError,q=P.onCompleted,W=this.run(y,((T={})[_]=D,T),o(o({},j),{txConfig:g.empty()}));return new c.ProcedureRouteObserver({resultObserver:W,onProtocolError:this._onProtocolError,onError:F,onCompleted:q})},C}(s.default);e.default=m},1175:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(3448));e.default=n({},o.default)},2539:function(r,e,t){var n,i=this&&this.__extends||(n=function(P,T){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,D){R.__proto__=D}||function(R,D){for(var L in D)Object.prototype.hasOwnProperty.call(D,L)&&(R[L]=D[L])},n(P,T)},function(P,T){if(typeof T!="function"&&T!==null)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");function R(){this.constructor=P}n(P,T),P.prototype=T===null?Object.create(T):(R.prototype=T.prototype,new R)}),o=this&&this.__assign||function(){return o=Object.assign||function(P){for(var T,R=1,D=arguments.length;R<D;R++)for(var L in T=arguments[R])Object.prototype.hasOwnProperty.call(T,L)&&(P[L]=T[L]);return P},o.apply(this,arguments)},a=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(e,"__esModule",{value:!0});var s=a(t(5642)),u=a(t(7021)),l=t(397),c=t(9014),f=a(t(2066)),h=a(t(3321)),d=t(9305),v=(d.internal.bookmarks.Bookmarks,d.internal.constants),g=v.BOLT_PROTOCOL_V4_0,_=v.FETCH_ALL,y=d.internal.txConfig.TxConfig,p="context",m="database",E="CALL dbms.routing.getRoutingTable($".concat(p,", $").concat(m,")"),C=function(P){function T(){return P!==null&&P.apply(this,arguments)||this}return i(T,P),Object.defineProperty(T.prototype,"version",{get:function(){return g},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"transformer",{get:function(){var R=this;return this._transformer===void 0&&(this._transformer=new h.default(Object.values(f.default).map(function(D){return D(R._config,R._log)}))),this._transformer},enumerable:!1,configurable:!0}),T.prototype.beginTransaction=function(R){var D=R===void 0?{}:R,L=D.bookmarks,j=D.txConfig,F=D.database,q=D.impersonatedUser,W=D.notificationFilter,Z=D.mode,Q=D.beforeError,re=D.afterError,ee=D.beforeComplete,ue=D.afterComplete,de=new c.ResultStreamObserver({server:this._server,beforeError:Q,afterError:re,beforeComplete:ee,afterComplete:ue});return de.prepareToHandleSingleResponse(),(0,l.assertImpersonatedUserIsEmpty)(q,this._onProtocolError,de),(0,l.assertNotificationFilterIsEmpty)(W,this._onProtocolError,de),this.write(u.default.begin({bookmarks:L,txConfig:j,database:F,mode:Z}),de,!0),de},T.prototype.run=function(R,D,L){var j=L===void 0?{}:L,F=j.bookmarks,q=j.txConfig,W=j.database,Z=j.impersonatedUser,Q=j.notificationFilter,re=j.mode,ee=j.beforeKeys,ue=j.afterKeys,de=j.beforeError,se=j.afterError,be=j.beforeComplete,Le=j.afterComplete,fe=j.flush,ce=fe===void 0||fe,Ee=j.reactive,Ce=Ee!==void 0&&Ee,ke=j.fetchSize,Ie=ke===void 0?_:ke,ve=j.highRecordWatermark,we=ve===void 0?Number.MAX_VALUE:ve,xe=j.lowRecordWatermark,Fe=xe===void 0?Number.MAX_VALUE:xe,He=new c.ResultStreamObserver({server:this._server,reactive:Ce,fetchSize:Ie,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:ee,afterKeys:ue,beforeError:de,afterError:se,beforeComplete:be,afterComplete:Le,highRecordWatermark:we,lowRecordWatermark:Fe});(0,l.assertImpersonatedUserIsEmpty)(Z,this._onProtocolError,He),(0,l.assertNotificationFilterIsEmpty)(Q,this._onProtocolError,He);var at=Ce;return this.write(u.default.runWithMetadata(R,D,{bookmarks:F,txConfig:q,database:W,mode:re}),He,at&&ce),Ce||this.write(u.default.pull({n:Ie}),He,ce),He},T.prototype._requestMore=function(R,D,L){this.write(u.default.pull({stmtId:R,n:D}),L,!0)},T.prototype._requestDiscard=function(R,D){this.write(u.default.discard({stmtId:R}),D,!0)},T.prototype._noOp=function(){},T.prototype.requestRoutingInformation=function(R){var D,L=R.routingContext,j=L===void 0?{}:L,F=R.databaseName,q=F===void 0?null:F,W=R.sessionContext,Z=W===void 0?{}:W,Q=R.onError,re=R.onCompleted,ee=this.run(E,((D={})[p]=j,D[m]=q,D),o(o({},Z),{txConfig:y.empty()}));return new c.ProcedureRouteObserver({resultObserver:ee,onProtocolError:this._onProtocolError,onError:Q,onCompleted:re})},T}(s.default);e.default=C},2066:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(1175));e.default=n({},o.default)},4596:function(r,e,t){var n,i=this&&this.__extends||(n=function(g,_){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,p){y.__proto__=p}||function(y,p){for(var m in p)Object.prototype.hasOwnProperty.call(p,m)&&(y[m]=p[m])},n(g,_)},function(g,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function y(){this.constructor=g}n(g,_),g.prototype=_===null?Object.create(_):(y.prototype=_.prototype,new y)}),o=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(t(2539)),s=o(t(7021)),u=t(9014),l=t(9305),c=t(397),f=o(t(7521)),h=o(t(3321)),d=l.internal.constants.BOLT_PROTOCOL_V4_1,v=function(g){function _(y,p,m,E,C,P,T){E===void 0&&(E=function(){return null});var R=g.call(this,y,p,m,E,C,P)||this;return R._serversideRouting=T,R}return i(_,g),Object.defineProperty(_.prototype,"version",{get:function(){return d},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"transformer",{get:function(){var y=this;return this._transformer===void 0&&(this._transformer=new h.default(Object.values(f.default).map(function(p){return p(y._config,y._log)}))),this._transformer},enumerable:!1,configurable:!0}),_.prototype.initialize=function(y){var p=this,m=y===void 0?{}:y,E=m.userAgent,C=(m.boltAgent,m.authToken),P=m.notificationFilter,T=m.onError,R=m.onComplete,D=new u.LoginObserver({onError:function(L){return p._onLoginError(L,T)},onCompleted:function(L){return p._onLoginCompleted(L,C,R)}});return(0,c.assertNotificationFilterIsEmpty)(P,this._onProtocolError,D),this.write(s.default.hello(E,C,this._serversideRouting),D,!0),D},_}(a.default);e.default=v},7521:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(2066));e.default=n({},o.default)},6445:function(r,e,t){var n,i=this&&this.__extends||(n=function(h,d){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,g){v.__proto__=g}||function(v,g){for(var _ in g)Object.prototype.hasOwnProperty.call(g,_)&&(v[_]=g[_])},n(h,d)},function(h,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function v(){this.constructor=h}n(h,d),h.prototype=d===null?Object.create(d):(v.prototype=d.prototype,new v)}),o=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(t(4596)),s=t(9305),u=o(t(5348)),l=o(t(3321)),c=s.internal.constants.BOLT_PROTOCOL_V4_2,f=function(h){function d(){return h!==null&&h.apply(this,arguments)||this}return i(d,h),Object.defineProperty(d.prototype,"version",{get:function(){return c},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"transformer",{get:function(){var v=this;return this._transformer===void 0&&(this._transformer=new l.default(Object.values(u.default).map(function(g){return g(v._config,v._log)}))),this._transformer},enumerable:!1,configurable:!0}),d}(a.default);e.default=f},5348:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(7521));e.default=n({},o.default)},9054:function(r,e,t){var n,i=this&&this.__extends||(n=function(p,m){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,C){E.__proto__=C}||function(E,C){for(var P in C)Object.prototype.hasOwnProperty.call(C,P)&&(E[P]=C[P])},n(p,m)},function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function E(){this.constructor=p}n(p,m),p.prototype=m===null?Object.create(m):(E.prototype=m.prototype,new E)}),o=this&&this.__assign||function(){return o=Object.assign||function(p){for(var m,E=1,C=arguments.length;E<C;E++)for(var P in m=arguments[E])Object.prototype.hasOwnProperty.call(m,P)&&(p[P]=m[P]);return p},o.apply(this,arguments)},a=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(e,"__esModule",{value:!0});var s=a(t(6445)),u=a(t(7021)),l=t(9014),c=t(397),f=a(t(7331)),h=a(t(5045)),d=a(t(3321)),v=t(9305),g=v.internal.bookmarks.Bookmarks,_=v.internal.constants.BOLT_PROTOCOL_V4_3,y=function(p){function m(){return p!==null&&p.apply(this,arguments)||this}return i(m,p),Object.defineProperty(m.prototype,"version",{get:function(){return _},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"transformer",{get:function(){var E=this;return this._transformer===void 0&&(this._transformer=new d.default(Object.values(f.default).map(function(C){return C(E._config,E._log)}))),this._transformer},enumerable:!1,configurable:!0}),m.prototype.requestRoutingInformation=function(E){var C=E.routingContext,P=C===void 0?{}:C,T=E.databaseName,R=T===void 0?null:T,D=E.sessionContext,L=D===void 0?{}:D,j=E.onError,F=E.onCompleted,q=new l.RouteObserver({onProtocolError:this._onProtocolError,onError:j,onCompleted:F}),W=L.bookmarks||g.empty();return this.write(u.default.route(P,W.values(),R),q,!0),q},m.prototype.initialize=function(E){var C=this,P=E===void 0?{}:E,T=P.userAgent,R=(P.boltAgent,P.authToken),D=P.notificationFilter,L=P.onError,j=P.onComplete,F=new l.LoginObserver({onError:function(q){return C._onLoginError(q,L)},onCompleted:function(q){return q.patch_bolt!==void 0&&C._applyPatches(q.patch_bolt),C._onLoginCompleted(q,R,j)}});return(0,c.assertNotificationFilterIsEmpty)(D,this._onProtocolError,F),this.write(u.default.hello(T,R,this._serversideRouting,["utc"]),F,!0),F},m.prototype._applyPatches=function(E){E.includes("utc")&&this._applyUtcPatch()},m.prototype._applyUtcPatch=function(){var E=this;this._transformer=new d.default(Object.values(o(o({},f.default),h.default)).map(function(C){return C(E._config,E._log)}))},m}(s.default);e.default=y},7331:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(5348));e.default=n({},o.default)},1711:function(r,e,t){var n,i=this&&this.__extends||(n=function(E,C){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,T){P.__proto__=T}||function(P,T){for(var R in T)Object.prototype.hasOwnProperty.call(T,R)&&(P[R]=T[R])},n(E,C)},function(E,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function P(){this.constructor=E}n(E,C),E.prototype=C===null?Object.create(C):(P.prototype=C.prototype,new P)}),o=this&&this.__assign||function(){return o=Object.assign||function(E){for(var C,P=1,T=arguments.length;P<T;P++)for(var R in C=arguments[P])Object.prototype.hasOwnProperty.call(C,R)&&(E[R]=C[R]);return E},o.apply(this,arguments)},a=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(e,"__esModule",{value:!0});var s=a(t(9054)),u=t(9305),l=a(t(7021)),c=t(9014),f=t(397),h=a(t(7518)),d=a(t(5045)),v=a(t(3321)),g=u.internal.constants,_=g.BOLT_PROTOCOL_V4_4,y=g.FETCH_ALL,p=u.internal.bookmarks.Bookmarks,m=function(E){function C(){return E!==null&&E.apply(this,arguments)||this}return i(C,E),Object.defineProperty(C.prototype,"version",{get:function(){return _},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"transformer",{get:function(){var P=this;return this._transformer===void 0&&(this._transformer=new v.default(Object.values(h.default).map(function(T){return T(P._config,P._log)}))),this._transformer},enumerable:!1,configurable:!0}),C.prototype.requestRoutingInformation=function(P){var T=P.routingContext,R=T===void 0?{}:T,D=P.databaseName,L=D===void 0?null:D,j=P.impersonatedUser,F=j===void 0?null:j,q=P.sessionContext,W=q===void 0?{}:q,Z=P.onError,Q=P.onCompleted,re=new c.RouteObserver({onProtocolError:this._onProtocolError,onError:Z,onCompleted:Q}),ee=W.bookmarks||p.empty();return this.write(l.default.routeV4x4(R,ee.values(),{databaseName:L,impersonatedUser:F}),re,!0),re},C.prototype.run=function(P,T,R){var D=R===void 0?{}:R,L=D.bookmarks,j=D.txConfig,F=D.database,q=D.mode,W=D.impersonatedUser,Z=D.notificationFilter,Q=D.beforeKeys,re=D.afterKeys,ee=D.beforeError,ue=D.afterError,de=D.beforeComplete,se=D.afterComplete,be=D.flush,Le=be===void 0||be,fe=D.reactive,ce=fe!==void 0&&fe,Ee=D.fetchSize,Ce=Ee===void 0?y:Ee,ke=D.highRecordWatermark,Ie=ke===void 0?Number.MAX_VALUE:ke,ve=D.lowRecordWatermark,we=ve===void 0?Number.MAX_VALUE:ve,xe=new c.ResultStreamObserver({server:this._server,reactive:ce,fetchSize:Ce,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:Q,afterKeys:re,beforeError:ee,afterError:ue,beforeComplete:de,afterComplete:se,highRecordWatermark:Ie,lowRecordWatermark:we});(0,f.assertNotificationFilterIsEmpty)(Z,this._onProtocolError,xe);var Fe=ce;return this.write(l.default.runWithMetadata(P,T,{bookmarks:L,txConfig:j,database:F,mode:q,impersonatedUser:W}),xe,Fe&&Le),ce||this.write(l.default.pull({n:Ce}),xe,Le),xe},C.prototype.beginTransaction=function(P){var T=P===void 0?{}:P,R=T.bookmarks,D=T.txConfig,L=T.database,j=T.mode,F=T.impersonatedUser,q=T.notificationFilter,W=T.beforeError,Z=T.afterError,Q=T.beforeComplete,re=T.afterComplete,ee=new c.ResultStreamObserver({server:this._server,beforeError:W,afterError:Z,beforeComplete:Q,afterComplete:re});return ee.prepareToHandleSingleResponse(),(0,f.assertNotificationFilterIsEmpty)(q,this._onProtocolError,ee),this.write(l.default.begin({bookmarks:R,txConfig:D,database:L,mode:j,impersonatedUser:F}),ee,!0),ee},C.prototype._applyUtcPatch=function(){var P=this;this._transformer=new v.default(Object.values(o(o({},h.default),d.default)).map(function(T){return T(P._config,P._log)}))},C}(s.default);e.default=m},7518:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(7331));e.default=n({},o.default)},844:function(r,e,t){var n,i=this&&this.__extends||(n=function(v,g){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,y){_.__proto__=y}||function(_,y){for(var p in y)Object.prototype.hasOwnProperty.call(y,p)&&(_[p]=y[p])},n(v,g)},function(v,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function _(){this.constructor=v}n(v,g),v.prototype=g===null?Object.create(g):(_.prototype=g.prototype,new _)}),o=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(t(1711)),s=t(397),u=o(t(7449)),l=o(t(3321)),c=o(t(7021)),f=t(9014),h=t(9305).internal.constants.BOLT_PROTOCOL_V5_0,d=function(v){function g(){return v!==null&&v.apply(this,arguments)||this}return i(g,v),Object.defineProperty(g.prototype,"version",{get:function(){return h},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"transformer",{get:function(){var _=this;return this._transformer===void 0&&(this._transformer=new l.default(Object.values(u.default).map(function(y){return y(_._config,_._log)}))),this._transformer},enumerable:!1,configurable:!0}),g.prototype.initialize=function(_){var y=this,p=_===void 0?{}:_,m=p.userAgent,E=(p.boltAgent,p.authToken),C=p.notificationFilter,P=p.onError,T=p.onComplete,R=new f.LoginObserver({onError:function(D){return y._onLoginError(D,P)},onCompleted:function(D){return y._onLoginCompleted(D,E,T)}});return(0,s.assertNotificationFilterIsEmpty)(C,this._onProtocolError,R),this.write(c.default.hello(m,E,this._serversideRouting),R,!0),R},g}(a.default);e.default=d},7449:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(c){for(var f,h=1,d=arguments.length;h<d;h++)for(var v in f=arguments[h])Object.prototype.hasOwnProperty.call(f,v)&&(c[v]=f[v]);return c},n.apply(this,arguments)},i=this&&this.__read||function(c,f){var h=typeof Symbol=="function"&&c[Symbol.iterator];if(!h)return c;var d,v,g=h.call(c),_=[];try{for(;(f===void 0||f-- >0)&&!(d=g.next()).done;)_.push(d.value)}catch(y){v={error:y}}finally{try{d&&!d.done&&(h=g.return)&&h.call(g)}finally{if(v)throw v.error}}return _},o=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0});var a=t(7168),s=t(9305),u=o(t(7518)),l=o(t(5045));e.default=n(n(n({},u.default),l.default),{createNodeTransformer:function(c){return u.default.createNodeTransformer(c).extendsWith({fromStructure:function(f){a.structure.verifyStructSize("Node",4,f.size);var h=i(f.fields,4),d=h[0],v=h[1],g=h[2],_=h[3];return new s.Node(d,v,g,_)}})},createRelationshipTransformer:function(c){return u.default.createRelationshipTransformer(c).extendsWith({fromStructure:function(f){a.structure.verifyStructSize("Relationship",8,f.size);var h=i(f.fields,8),d=h[0],v=h[1],g=h[2],_=h[3],y=h[4],p=h[5],m=h[6],E=h[7];return new s.Relationship(d,v,g,_,y,p,m,E)}})},createUnboundRelationshipTransformer:function(c){return u.default.createUnboundRelationshipTransformer(c).extendsWith({fromStructure:function(f){a.structure.verifyStructSize("UnboundRelationship",4,f.size);var h=i(f.fields,4),d=h[0],v=h[1],g=h[2],_=h[3];return new s.UnboundRelationship(d,v,g,_)}})}})},5045:function(r,e,t){var n=this&&this.__read||function(v,g){var _=typeof Symbol=="function"&&v[Symbol.iterator];if(!_)return v;var y,p,m=_.call(v),E=[];try{for(;(g===void 0||g-- >0)&&!(y=m.next()).done;)E.push(y.value)}catch(C){p={error:C}}finally{try{y&&!y.done&&(_=m.return)&&_.call(m)}finally{if(p)throw p.error}}return E},i=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(e,"__esModule",{value:!0});var o=t(7168),a=t(9305),s=i(t(7518)),u=t(5973),l=t(6492),c=a.internal.temporalUtil.localDateTimeToEpochSecond,f=new Map;function h(v,g,_){var y=function(C){if(!f.has(C)){var P=new Intl.DateTimeFormat("en-US",{timeZone:C,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1,era:"narrow"});f.set(C,P)}return f.get(C)}(v),p=(0,a.int)(g).multiply(1e3).add((0,a.int)(_).div(1e6)).toNumber(),m=y.formatToParts(p).reduce(function(C,P){return P.type==="era"?C.adjustEra=P.value.toUpperCase()==="B"?function(T){return T.subtract(1).negate()}:l.identity:P.type==="hour"?C.hour=(0,a.int)(P.value).modulo(24):P.type!=="literal"&&(C[P.type]=(0,a.int)(P.value)),C},{});m.year=m.adjustEra(m.year);var E=c(m.year,m.month,m.day,m.hour,m.minute,m.second,m.nanosecond);return m.timeZoneOffsetSeconds=E.subtract(g),m.hour=m.hour.modulo(24),m}function d(v,g,_){if(!g&&!_)return v;var y=function(C){return _?C.toBigInt():C.toNumberOrInfinity()},p=Object.create(Object.getPrototypeOf(v));for(var m in v)if(Object.prototype.hasOwnProperty.call(v,m)===!0){var E=v[m];p[m]=(0,a.isInt)(E)?y(E):E}return Object.freeze(p),p}e.default={createDateTimeWithZoneIdTransformer:function(v,g){var _=v.disableLosslessIntegers,y=v.useBigInt;return s.default.createDateTimeWithZoneIdTransformer(v).extendsWith({signature:105,fromStructure:function(p){o.structure.verifyStructSize("DateTimeWithZoneId",3,p.size);var m=n(p.fields,3),E=m[0],C=m[1],P=m[2],T=h(P,E,C);return d(new a.DateTime(T.year,T.month,T.day,T.hour,T.minute,T.second,(0,a.int)(C),T.timeZoneOffsetSeconds,P),_,y)},toStructure:function(p){var m=c(p.year,p.month,p.day,p.hour,p.minute,p.second,p.nanosecond),E=p.timeZoneOffsetSeconds!=null?p.timeZoneOffsetSeconds:function(R,D,L){var j=h(R,D,L),F=c(j.year,j.month,j.day,j.hour,j.minute,j.second,L).subtract(D),q=D.subtract(F),W=h(R,q,L);return c(W.year,W.month,W.day,W.hour,W.minute,W.second,L).subtract(q)}(p.timeZoneId,m,p.nanosecond);p.timeZoneOffsetSeconds==null&&g.warn('DateTime objects without "timeZoneOffsetSeconds" property are prune to bugs related to ambiguous times. For instance, 2022-10-30T2:30:00[Europe/Berlin] could be GMT+1 or GMT+2.');var C=m.subtract(E),P=(0,a.int)(p.nanosecond),T=p.timeZoneId;return new o.structure.Structure(105,[C,P,T])}})},createDateTimeWithOffsetTransformer:function(v){var g=v.disableLosslessIntegers,_=v.useBigInt;return s.default.createDateTimeWithOffsetTransformer(v).extendsWith({signature:73,toStructure:function(y){var p=c(y.year,y.month,y.day,y.hour,y.minute,y.second,y.nanosecond),m=(0,a.int)(y.nanosecond),E=(0,a.int)(y.timeZoneOffsetSeconds),C=p.subtract(E);return new o.structure.Structure(73,[C,m,E])},fromStructure:function(y){o.structure.verifyStructSize("DateTimeWithZoneOffset",3,y.size);var p=n(y.fields,3),m=p[0],E=p[1],C=p[2],P=(0,a.int)(m).add(C),T=(0,u.epochSecondAndNanoToLocalDateTime)(P,E);return d(new a.DateTime(T.year,T.month,T.day,T.hour,T.minute,T.second,T.nanosecond,C,null),g,_)}})}}},6345:function(r,e,t){var n,i=this&&this.__extends||(n=function(g,_){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,p){y.__proto__=p}||function(y,p){for(var m in p)Object.prototype.hasOwnProperty.call(p,m)&&(y[m]=p[m])},n(g,_)},function(g,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function y(){this.constructor=g}n(g,_),g.prototype=_===null?Object.create(_):(y.prototype=_.prototype,new y)}),o=this&&this.__assign||function(){return o=Object.assign||function(g){for(var _,y=1,p=arguments.length;y<p;y++)for(var m in _=arguments[y])Object.prototype.hasOwnProperty.call(_,m)&&(g[m]=_[m]);return g},o.apply(this,arguments)},a=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(e,"__esModule",{value:!0});var s=a(t(844)),u=t(397),l=a(t(9994)),c=a(t(3321)),f=a(t(7021)),h=t(9014),d=t(9305).internal.constants.BOLT_PROTOCOL_V5_1,v=function(g){function _(){return g!==null&&g.apply(this,arguments)||this}return i(_,g),Object.defineProperty(_.prototype,"version",{get:function(){return d},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"transformer",{get:function(){var y=this;return this._transformer===void 0&&(this._transformer=new c.default(Object.values(l.default).map(function(p){return p(y._config,y._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"supportsReAuth",{get:function(){return!0},enumerable:!1,configurable:!0}),_.prototype.initialize=function(y){var p=this,m=y===void 0?{}:y,E=m.userAgent,C=(m.boltAgent,m.authToken),P=m.notificationFilter,T=m.onError,R=m.onComplete,D={},L=new h.LoginObserver({onError:function(j){return p._onLoginError(j,T)},onCompleted:function(j){return D.metadata=j,p._onLoginCompleted(j)}});return(0,u.assertNotificationFilterIsEmpty)(P,this._onProtocolError,L),this.write(f.default.hello5x1(E,this._serversideRouting),L,!1),this.logon({authToken:C,onComplete:function(j){return R(o(o({},j),D.metadata))},onError:T,flush:!0})},_.prototype.logon=function(y){var p=this,m=y===void 0?{}:y,E=m.authToken,C=m.onComplete,P=m.onError,T=m.flush,R=new h.LoginObserver({onCompleted:function(){return p._onLoginCompleted(null,E,C)},onError:function(D){return p._onLoginError(D,P)}});return this.write(f.default.logon(E),R,T),R},_.prototype.logoff=function(y){var p=y===void 0?{}:y,m=p.onComplete,E=p.onError,C=p.flush,P=new h.LogoffObserver({onCompleted:m,onError:E});return this.write(f.default.logoff(),P,C),P},_}(s.default);e.default=v},9994:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(7449));e.default=n({},o.default)},934:function(r,e,t){var n,i=this&&this.__extends||(n=function(_,y){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var E in m)Object.prototype.hasOwnProperty.call(m,E)&&(p[E]=m[E])},n(_,y)},function(_,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function p(){this.constructor=_}n(_,y),_.prototype=y===null?Object.create(y):(p.prototype=y.prototype,new p)}),o=this&&this.__assign||function(){return o=Object.assign||function(_){for(var y,p=1,m=arguments.length;p<m;p++)for(var E in y=arguments[p])Object.prototype.hasOwnProperty.call(y,E)&&(_[E]=y[E]);return _},o.apply(this,arguments)},a=this&&this.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(e,"__esModule",{value:!0});var s=a(t(6345)),u=a(t(3019)),l=a(t(3321)),c=a(t(7021)),f=t(9014),h=t(9305).internal.constants,d=h.BOLT_PROTOCOL_V5_2,v=h.FETCH_ALL,g=function(_){function y(){return _!==null&&_.apply(this,arguments)||this}return i(y,_),Object.defineProperty(y.prototype,"version",{get:function(){return d},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"transformer",{get:function(){var p=this;return this._transformer===void 0&&(this._transformer=new l.default(Object.values(u.default).map(function(m){return m(p._config,p._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"supportsReAuth",{get:function(){return!0},enumerable:!1,configurable:!0}),y.prototype.initialize=function(p){var m=this,E=p===void 0?{}:p,C=E.userAgent,P=(E.boltAgent,E.authToken),T=E.notificationFilter,R=E.onError,D=E.onComplete,L={},j=new f.LoginObserver({onError:function(F){return m._onLoginError(F,R)},onCompleted:function(F){return L.metadata=F,m._onLoginCompleted(F)}});return this.write(c.default.hello5x2(C,T,this._serversideRouting),j,!1),this.logon({authToken:P,onComplete:function(F){return D(o(o({},F),L.metadata))},onError:R,flush:!0})},y.prototype.beginTransaction=function(p){var m=p===void 0?{}:p,E=m.bookmarks,C=m.txConfig,P=m.database,T=m.mode,R=m.impersonatedUser,D=m.notificationFilter,L=m.beforeError,j=m.afterError,F=m.beforeComplete,q=m.afterComplete,W=new f.ResultStreamObserver({server:this._server,beforeError:L,afterError:j,beforeComplete:F,afterComplete:q});return W.prepareToHandleSingleResponse(),this.write(c.default.begin({bookmarks:E,txConfig:C,database:P,mode:T,impersonatedUser:R,notificationFilter:D}),W,!0),W},y.prototype.run=function(p,m,E){var C=E===void 0?{}:E,P=C.bookmarks,T=C.txConfig,R=C.database,D=C.mode,L=C.impersonatedUser,j=C.notificationFilter,F=C.beforeKeys,q=C.afterKeys,W=C.beforeError,Z=C.afterError,Q=C.beforeComplete,re=C.afterComplete,ee=C.flush,ue=ee===void 0||ee,de=C.reactive,se=de!==void 0&&de,be=C.fetchSize,Le=be===void 0?v:be,fe=C.highRecordWatermark,ce=fe===void 0?Number.MAX_VALUE:fe,Ee=C.lowRecordWatermark,Ce=Ee===void 0?Number.MAX_VALUE:Ee,ke=new f.ResultStreamObserver({server:this._server,reactive:se,fetchSize:Le,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:F,afterKeys:q,beforeError:W,afterError:Z,beforeComplete:Q,afterComplete:re,highRecordWatermark:ce,lowRecordWatermark:Ce}),Ie=se;return this.write(c.default.runWithMetadata(p,m,{bookmarks:P,txConfig:T,database:R,mode:D,impersonatedUser:L,notificationFilter:j}),ke,Ie&&ue),se||this.write(c.default.pull({n:Le}),ke,ue),ke},y}(s.default);e.default=g},3019:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(9994));e.default=n({},o.default)},9125:function(r,e,t){var n,i=this&&this.__extends||(n=function(v,g){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,y){_.__proto__=y}||function(_,y){for(var p in y)Object.prototype.hasOwnProperty.call(y,p)&&(_[p]=y[p])},n(v,g)},function(v,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function _(){this.constructor=v}n(v,g),v.prototype=g===null?Object.create(g):(_.prototype=g.prototype,new _)}),o=this&&this.__assign||function(){return o=Object.assign||function(v){for(var g,_=1,y=arguments.length;_<y;_++)for(var p in g=arguments[_])Object.prototype.hasOwnProperty.call(g,p)&&(v[p]=g[p]);return v},o.apply(this,arguments)},a=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(e,"__esModule",{value:!0});var s=a(t(934)),u=a(t(2204)),l=a(t(3321)),c=a(t(7021)),f=t(9014),h=t(9305).internal.constants.BOLT_PROTOCOL_V5_3,d=function(v){function g(){return v!==null&&v.apply(this,arguments)||this}return i(g,v),Object.defineProperty(g.prototype,"version",{get:function(){return h},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"transformer",{get:function(){var _=this;return this._transformer===void 0&&(this._transformer=new l.default(Object.values(u.default).map(function(y){return y(_._config,_._log)}))),this._transformer},enumerable:!1,configurable:!0}),g.prototype.initialize=function(_){var y=this,p=_===void 0?{}:_,m=p.userAgent,E=p.boltAgent,C=p.authToken,P=p.notificationFilter,T=p.onError,R=p.onComplete,D={},L=new f.LoginObserver({onError:function(j){return y._onLoginError(j,T)},onCompleted:function(j){return D.metadata=j,y._onLoginCompleted(j)}});return this.write(c.default.hello5x3(m,E,P,this._serversideRouting),L,!1),this.logon({authToken:C,onComplete:function(j){return R(o(o({},j),D.metadata))},onError:T,flush:!0})},g}(s.default);e.default=d},2204:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(3019));e.default=n({},o.default)},9744:function(r,e,t){var n,i=this&&this.__extends||(n=function(d,v){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,_){g.__proto__=_}||function(g,_){for(var y in _)Object.prototype.hasOwnProperty.call(_,y)&&(g[y]=_[y])},n(d,v)},function(d,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function g(){this.constructor=d}n(d,v),d.prototype=v===null?Object.create(v):(g.prototype=v.prototype,new g)}),o=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(t(9125)),s=o(t(4325)),u=o(t(7021)),l=t(9014),c=o(t(3321)),f=t(9305).internal.constants.BOLT_PROTOCOL_V5_4,h=function(d){function v(){return d!==null&&d.apply(this,arguments)||this}return i(v,d),Object.defineProperty(v.prototype,"version",{get:function(){return f},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"transformer",{get:function(){var g=this;return this._transformer===void 0&&(this._transformer=new c.default(Object.values(s.default).map(function(_){return _(g._config,g._log)}))),this._transformer},enumerable:!1,configurable:!0}),v.prototype.telemetry=function(g,_){var y=g.api,p=_===void 0?{}:_,m=p.onError,E=p.onCompleted,C=new l.TelemetryObserver({onCompleted:E,onError:m});return this.write(u.default.telemetry({api:y}),C,!1),C},v}(a.default);e.default=h},4325:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(2204));e.default=n({},o.default)},5815:function(r,e,t){var n,i=this&&this.__extends||(n=function(y,p){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,E){m.__proto__=E}||function(m,E){for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(m[C]=E[C])},n(y,p)},function(y,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");function m(){this.constructor=y}n(y,p),y.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}),o=this&&this.__assign||function(){return o=Object.assign||function(y){for(var p,m=1,E=arguments.length;m<E;m++)for(var C in p=arguments[m])Object.prototype.hasOwnProperty.call(p,C)&&(y[C]=p[C]);return y},o.apply(this,arguments)},a=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(e,"__esModule",{value:!0});var s=a(t(9744)),u=a(t(9238)),l=a(t(3321)),c=a(t(7021)),f=t(9014),h=t(9305).internal.constants,d=h.BOLT_PROTOCOL_V5_5,v=h.FETCH_ALL,g=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),_=function(y){function p(){return y!==null&&y.apply(this,arguments)||this}return i(p,y),Object.defineProperty(p.prototype,"version",{get:function(){return d},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"transformer",{get:function(){var m=this;return this._transformer===void 0&&(this._transformer=new l.default(Object.values(u.default).map(function(E){return E(m._config,m._log)}))),this._transformer},enumerable:!1,configurable:!0}),p.prototype.initialize=function(m){var E=this,C=m===void 0?{}:m,P=C.userAgent,T=C.boltAgent,R=C.authToken,D=C.notificationFilter,L=C.onError,j=C.onComplete,F={},q=new f.LoginObserver({onError:function(W){return E._onLoginError(W,L)},onCompleted:function(W){return F.metadata=W,E._onLoginCompleted(W)}});return this.write(c.default.hello5x5(P,T,D,this._serversideRouting),q,!1),this.logon({authToken:R,onComplete:function(W){return j(o(o({},W),F.metadata))},onError:L,flush:!0})},p.prototype.beginTransaction=function(m){var E=m===void 0?{}:m,C=E.bookmarks,P=E.txConfig,T=E.database,R=E.mode,D=E.impersonatedUser,L=E.notificationFilter,j=E.beforeError,F=E.afterError,q=E.beforeComplete,W=E.afterComplete,Z=new f.ResultStreamObserver({server:this._server,beforeError:j,afterError:F,beforeComplete:q,afterComplete:W});return Z.prepareToHandleSingleResponse(),this.write(c.default.begin5x5({bookmarks:C,txConfig:P,database:T,mode:R,impersonatedUser:D,notificationFilter:L}),Z,!0),Z},p.prototype.run=function(m,E,C){var P=C===void 0?{}:C,T=P.bookmarks,R=P.txConfig,D=P.database,L=P.mode,j=P.impersonatedUser,F=P.notificationFilter,q=P.beforeKeys,W=P.afterKeys,Z=P.beforeError,Q=P.afterError,re=P.beforeComplete,ee=P.afterComplete,ue=P.flush,de=ue===void 0||ue,se=P.reactive,be=se!==void 0&&se,Le=P.fetchSize,fe=Le===void 0?v:Le,ce=P.highRecordWatermark,Ee=ce===void 0?Number.MAX_VALUE:ce,Ce=P.lowRecordWatermark,ke=Ce===void 0?Number.MAX_VALUE:Ce,Ie=new f.ResultStreamObserver({server:this._server,reactive:be,fetchSize:fe,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:q,afterKeys:W,beforeError:Z,afterError:Q,beforeComplete:re,afterComplete:ee,highRecordWatermark:Ee,lowRecordWatermark:ke,enrichMetadata:this._enrichMetadata}),ve=be;return this.write(c.default.runWithMetadata5x5(m,E,{bookmarks:T,txConfig:R,database:D,mode:L,impersonatedUser:j,notificationFilter:F}),Ie,ve&&de),be||this.write(c.default.pull({n:fe}),Ie,de),Ie},p.prototype._enrichMetadata=function(m){return Array.isArray(m.statuses)&&(m.statuses=m.statuses.map(function(E){return o(o({},E),{description:E.neo4j_code!=null?E.status_description:E.description,diagnostic_record:E.diagnostic_record!==null?o(o({},g),E.diagnostic_record):null})})),m},p}(s.default);e.default=_},9238:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(4325));e.default=n({},o.default)},6890:function(r,e,t){var n,i=this&&this.__extends||(n=function(d,v){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,_){g.__proto__=_}||function(g,_){for(var y in _)Object.prototype.hasOwnProperty.call(_,y)&&(g[y]=_[y])},n(d,v)},function(d,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function g(){this.constructor=d}n(d,v),d.prototype=v===null?Object.create(v):(g.prototype=v.prototype,new g)}),o=this&&this.__assign||function(){return o=Object.assign||function(d){for(var v,g=1,_=arguments.length;g<_;g++)for(var y in v=arguments[g])Object.prototype.hasOwnProperty.call(v,y)&&(d[y]=v[y]);return d},o.apply(this,arguments)},a=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0});var s=a(t(5815)),u=a(t(9238)),l=a(t(3321)),c=t(9305).internal.constants.BOLT_PROTOCOL_V5_6,f=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),h=function(d){function v(){return d!==null&&d.apply(this,arguments)||this}return i(v,d),Object.defineProperty(v.prototype,"version",{get:function(){return c},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"transformer",{get:function(){var g=this;return this._transformer===void 0&&(this._transformer=new l.default(Object.values(u.default).map(function(_){return _(g._config,g._log)}))),this._transformer},enumerable:!1,configurable:!0}),v.prototype._enrichMetadata=function(g){return Array.isArray(g.statuses)&&(g.statuses=g.statuses.map(function(_){return o(o({},_),{diagnostic_record:_.diagnostic_record!==null?o(o({},f),_.diagnostic_record):null})})),g},v}(s.default);e.default=h},6377:function(r,e,t){var n,i=this&&this.__extends||(n=function(d,v){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,_){g.__proto__=_}||function(g,_){for(var y in _)Object.prototype.hasOwnProperty.call(_,y)&&(g[y]=_[y])},n(d,v)},function(d,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function g(){this.constructor=d}n(d,v),d.prototype=v===null?Object.create(v):(g.prototype=v.prototype,new g)}),o=this&&this.__assign||function(){return o=Object.assign||function(d){for(var v,g=1,_=arguments.length;g<_;g++)for(var y in v=arguments[g])Object.prototype.hasOwnProperty.call(v,y)&&(d[y]=v[y]);return d},o.apply(this,arguments)},a=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0});var s=a(t(6890)),u=a(t(9238)),l=a(t(3321)),c=t(9305).internal.constants.BOLT_PROTOCOL_V5_7,f=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),h=function(d){function v(){return d!==null&&d.apply(this,arguments)||this}return i(v,d),Object.defineProperty(v.prototype,"version",{get:function(){return c},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"transformer",{get:function(){var g=this;return this._transformer===void 0&&(this._transformer=new l.default(Object.values(u.default).map(function(_){return _(g._config,g._log)}))),this._transformer},enumerable:!1,configurable:!0}),v.prototype.enrichErrorMetadata=function(g){return o(o({},g),{cause:g.cause!==null&&g.cause!==void 0?this.enrichErrorMetadata(g.cause):null,code:g.neo4j_code,diagnostic_record:g.diagnostic_record!==null?o(o({},f),g.diagnostic_record):null})},v}(s.default);e.default=h},6544:function(r,e,t){var n=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(e,"__esModule",{value:!0});var i=t(9305),o=n(t(8320)),a=n(t(2857)),s=n(t(5642)),u=n(t(2539)),l=n(t(4596)),c=n(t(6445)),f=n(t(9054)),h=n(t(1711)),d=n(t(844)),v=n(t(6345)),g=n(t(934)),_=n(t(9125)),y=n(t(9744)),p=n(t(5815)),m=n(t(6890)),E=n(t(6377)),C=(t(7452),n(t(2578)));e.default=function(P){var T=P===void 0?{}:P,R=T.version,D=T.chunker,L=T.dechunker,j=T.channel,F=T.disableLosslessIntegers,q=T.useBigInt,W=T.serversideRouting,Z=T.server,Q=T.log,re=T.observer;return function(ee,ue,de,se,be,Le,fe,ce){switch(ee){case 1:return new o.default(ue,de,se,Le,ce,fe);case 2:return new a.default(ue,de,se,Le,ce,fe);case 3:return new s.default(ue,de,se,Le,ce,fe);case 4:return new u.default(ue,de,se,Le,ce,fe);case 4.1:return new l.default(ue,de,se,Le,ce,fe,be);case 4.2:return new c.default(ue,de,se,Le,ce,fe,be);case 4.3:return new f.default(ue,de,se,Le,ce,fe,be);case 4.4:return new h.default(ue,de,se,Le,ce,fe,be);case 5:return new d.default(ue,de,se,Le,ce,fe,be);case 5.1:return new v.default(ue,de,se,Le,ce,fe,be);case 5.2:return new g.default(ue,de,se,Le,ce,fe,be);case 5.3:return new _.default(ue,de,se,Le,ce,fe,be);case 5.4:return new y.default(ue,de,se,Le,ce,fe,be);case 5.5:return new p.default(ue,de,se,Le,ce,fe,be);case 5.6:return new m.default(ue,de,se,Le,ce,fe,be);case 5.7:return new E.default(ue,de,se,Le,ce,fe,be);default:throw(0,i.newError)("Unknown Bolt protocol version: "+ee)}}(R,Z,D,{disableLosslessIntegers:F,useBigInt:q},W,function(ee){var ue=new C.default({transformMetadata:ee.transformMetadata.bind(ee),enrichErrorMetadata:ee.enrichErrorMetadata.bind(ee),log:Q,observer:re});return j.onerror=re.onError.bind(re),j.onmessage=function(de){return L.write(de)},L.onmessage=function(de){try{ue.handleResponse(ee.unpack(de))}catch(se){return re.onError(se)}},ue},re.onProtocolError.bind(re),Q)}},8731:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=t(7452),i=t(9305);function o(a,s){return{major:a,minor:s}}e.default=function(a,s){var u=this;return new Promise(function(l,c){var f=function(h){c(h)};a.onerror=f.bind(u),a._error&&f(a._error),a.onmessage=function(h){try{var d=function(v,g){var _=[v.readUInt8(),v.readUInt8(),v.readUInt8(),v.readUInt8()];if(_[0]===72&&_[1]===84&&_[2]===84&&_[3]===80)throw g.error("Handshake failed since server responded with HTTP."),(0,i.newError)("Server responded HTTP. Make sure you are not trying to connect to the http endpoint (HTTP defaults to port 7474 whereas BOLT defaults to port 7687)");return+(_[3]+"."+_[2])}(h,s);l({protocolVersion:d,consumeRemainingBuffer:function(v){h.hasRemaining()&&v(h.readSlice(h.remaining()))}})}catch(v){c(v)}},a.write(function(h){if(h.length>4)throw(0,i.newError)("It should not have more than 4 versions of the protocol");var d=(0,n.alloc)(20);return d.writeInt32(1616949271),h.forEach(function(v){if(v instanceof Array){var g=v[0],_=g.major,y=(p=g.minor)-v[1].minor;d.writeInt32(y<<16|p<<8|_)}else{_=v.major;var p=v.minor;d.writeInt32(p<<8|_)}}),d.reset(),d}([[o(5,7),o(5,0)],[o(4,4),o(4,2)],o(4,1),o(3,0)]))})}},7666:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(c,f,h,d){d===void 0&&(d=h);var v=Object.getOwnPropertyDescriptor(f,h);v&&!("get"in v?!f.__esModule:v.writable||v.configurable)||(v={enumerable:!0,get:function(){return f[h]}}),Object.defineProperty(c,d,v)}:function(c,f,h,d){d===void 0&&(d=h),c[d]=f[h]}),i=this&&this.__exportStar||function(c,f){for(var h in c)h==="default"||Object.prototype.hasOwnProperty.call(f,h)||n(f,c,h)},o=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0}),e.RawRoutingTable=e.BoltProtocol=void 0;var a=o(t(8731)),s=o(t(6544)),u=o(t(9054)),l=o(t(7790));i(t(9014),e),e.BoltProtocol=u.default,e.RawRoutingTable=l.default,e.default={handshake:a.default,create:s.default}},7021:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SIGNATURES=void 0;var n=t(9305),i=n.internal.constants,o=i.ACCESS_MODE_READ,a=i.FETCH_ALL,s=n.internal.util.assertString,u=Object.freeze({INIT:1,RESET:15,RUN:16,PULL_ALL:63,HELLO:1,GOODBYE:2,BEGIN:17,COMMIT:18,ROLLBACK:19,TELEMETRY:84,ROUTE:102,LOGON:106,LOGOFF:107,DISCARD:47,PULL:63});e.SIGNATURES=u;var l=function(){function m(E,C,P){this.signature=E,this.fields=C,this.toString=P}return m.init=function(E,C){return new m(1,[E,C],function(){return"INIT ".concat(E," {...}")})},m.run=function(E,C){return new m(16,[E,C],function(){return"RUN ".concat(E," ").concat(n.json.stringify(C))})},m.pullAll=function(){return v},m.reset=function(){return g},m.hello=function(E,C,P,T){P===void 0&&(P=null),T===void 0&&(T=null);var R=Object.assign({user_agent:E},C);return P&&(R.routing=P),T&&(R.patch_bolt=T),new m(1,[R],function(){return"HELLO {user_agent: '".concat(E,"', ...}")})},m.hello5x1=function(E,C){C===void 0&&(C=null);var P={user_agent:E};return C&&(P.routing=C),new m(1,[P],function(){return"HELLO {user_agent: '".concat(E,"', ...}")})},m.hello5x2=function(E,C,P){C===void 0&&(C=null),P===void 0&&(P=null);var T={user_agent:E};return h(T,C),P&&(T.routing=P),new m(1,[T],function(){return"HELLO ".concat(n.json.stringify(T))})},m.hello5x3=function(E,C,P,T){P===void 0&&(P=null),T===void 0&&(T=null);var R={};return E&&(R.user_agent=E),C&&(R.bolt_agent={product:C.product,platform:C.platform,language:C.language,language_details:C.languageDetails}),h(R,P),T&&(R.routing=T),new m(1,[R],function(){return"HELLO ".concat(n.json.stringify(R))})},m.hello5x5=function(E,C,P,T){P===void 0&&(P=null),T===void 0&&(T=null);var R={};return E&&(R.user_agent=E),C&&(R.bolt_agent={product:C.product,platform:C.platform,language:C.language,language_details:C.languageDetails}),d(R,P),T&&(R.routing=T),new m(1,[R],function(){return"HELLO ".concat(n.json.stringify(R))})},m.logon=function(E){return new m(106,[E],function(){return"LOGON { ... }"})},m.logoff=function(){return new m(107,[],function(){return"LOGOFF"})},m.begin=function(E){var C=E===void 0?{}:E,P=c(C.bookmarks,C.txConfig,C.database,C.mode,C.impersonatedUser,C.notificationFilter);return new m(17,[P],function(){return"BEGIN ".concat(n.json.stringify(P))})},m.begin5x5=function(E){var C=E===void 0?{}:E,P=c(C.bookmarks,C.txConfig,C.database,C.mode,C.impersonatedUser,C.notificationFilter,{appendNotificationFilter:d});return new m(17,[P],function(){return"BEGIN ".concat(n.json.stringify(P))})},m.commit=function(){return _},m.rollback=function(){return y},m.runWithMetadata=function(E,C,P){var T=P===void 0?{}:P,R=c(T.bookmarks,T.txConfig,T.database,T.mode,T.impersonatedUser,T.notificationFilter);return new m(16,[E,C,R],function(){return"RUN ".concat(E," ").concat(n.json.stringify(C)," ").concat(n.json.stringify(R))})},m.runWithMetadata5x5=function(E,C,P){var T=P===void 0?{}:P,R=c(T.bookmarks,T.txConfig,T.database,T.mode,T.impersonatedUser,T.notificationFilter,{appendNotificationFilter:d});return new m(16,[E,C,R],function(){return"RUN ".concat(E," ").concat(n.json.stringify(C)," ").concat(n.json.stringify(R))})},m.goodbye=function(){return p},m.pull=function(E){var C=E===void 0?{}:E,P=C.stmtId,T=P===void 0?-1:P,R=C.n,D=f(T??-1,(R===void 0?a:R)||a);return new m(63,[D],function(){return"PULL ".concat(n.json.stringify(D))})},m.discard=function(E){var C=E===void 0?{}:E,P=C.stmtId,T=P===void 0?-1:P,R=C.n,D=f(T??-1,(R===void 0?a:R)||a);return new m(47,[D],function(){return"DISCARD ".concat(n.json.stringify(D))})},m.telemetry=function(E){var C=E.api,P=(0,n.int)(C);return new m(84,[P],function(){return"TELEMETRY ".concat(P.toString())})},m.route=function(E,C,P){return E===void 0&&(E={}),C===void 0&&(C=[]),P===void 0&&(P=null),new m(102,[E,C,P],function(){return"ROUTE ".concat(n.json.stringify(E)," ").concat(n.json.stringify(C)," ").concat(P)})},m.routeV4x4=function(E,C,P){E===void 0&&(E={}),C===void 0&&(C=[]),P===void 0&&(P={});var T={};return P.databaseName&&(T.db=P.databaseName),P.impersonatedUser&&(T.imp_user=P.impersonatedUser),new m(102,[E,C,T],function(){return"ROUTE ".concat(n.json.stringify(E)," ").concat(n.json.stringify(C)," ").concat(n.json.stringify(T))})},m}();function c(m,E,C,P,T,R,D){var L;D===void 0&&(D={});var j={};return m.isEmpty()||(j.bookmarks=m.values()),E.timeout!==null&&(j.tx_timeout=E.timeout),E.metadata&&(j.tx_metadata=E.metadata),C&&(j.db=s(C,"database")),T&&(j.imp_user=s(T,"impersonatedUser")),P===o&&(j.mode="r"),((L=D.appendNotificationFilter)!==null&&L!==void 0?L:h)(j,R),j}function f(m,E){var C={n:(0,n.int)(E)};return m!==-1&&(C.qid=(0,n.int)(m)),C}function h(m,E){E&&(E.minimumSeverityLevel&&(m.notifications_minimum_severity=E.minimumSeverityLevel),E.disabledCategories&&(m.notifications_disabled_categories=E.disabledCategories),E.disabledClassifications&&(m.notifications_disabled_categories=E.disabledClassifications))}function d(m,E){E&&(E.minimumSeverityLevel&&(m.notifications_minimum_severity=E.minimumSeverityLevel),E.disabledCategories&&(m.notifications_disabled_classifications=E.disabledCategories),E.disabledClassifications&&(m.notifications_disabled_classifications=E.disabledClassifications))}e.default=l;var v=new l(63,[],function(){return"PULL_ALL"}),g=new l(15,[],function(){return"RESET"}),_=new l(18,[],function(){return"COMMIT"}),y=new l(19,[],function(){return"ROLLBACK"}),p=new l(2,[],function(){return"GOODBYE"})},2578:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=t(9305);function i(){}function o(u){return u}var a={onNext:i,onCompleted:i,onError:i},s=function(){function u(l){var c=l===void 0?{}:l,f=c.transformMetadata,h=c.enrichErrorMetadata,d=c.log,v=c.observer;this._pendingObservers=[],this._log=d,this._transformMetadata=f||o,this._enrichErrorMetadata=h||o,this._observer=Object.assign({onObserversCountChange:i,onError:i,onFailure:i,onErrorApplyTransformation:o},v)}return Object.defineProperty(u.prototype,"currentFailure",{get:function(){return this._currentFailure},enumerable:!1,configurable:!0}),u.prototype.handleResponse=function(l){var c=l.fields[0];switch(l.signature){case 113:this._log.isDebugEnabled()&&this._log.debug("S: RECORD ".concat(n.json.stringify(l))),this._currentObserver.onNext(c);break;case 112:this._log.isDebugEnabled()&&this._log.debug("S: SUCCESS ".concat(n.json.stringify(l)));try{var f=this._transformMetadata(c);this._currentObserver.onCompleted(f)}finally{this._updateCurrentObserver()}break;case 127:this._log.isDebugEnabled()&&this._log.debug("S: FAILURE ".concat(n.json.stringify(l)));try{this._currentFailure=this._handleErrorPayload(this._enrichErrorMetadata(c)),this._currentObserver.onError(this._currentFailure)}finally{this._updateCurrentObserver(),this._observer.onFailure(this._currentFailure)}break;case 126:this._log.isDebugEnabled()&&this._log.debug("S: IGNORED ".concat(n.json.stringify(l)));try{this._currentFailure&&this._currentObserver.onError?this._currentObserver.onError(this._currentFailure):this._currentObserver.onError&&this._currentObserver.onError((0,n.newError)("Ignored either because of an error or RESET"))}finally{this._updateCurrentObserver()}break;default:this._observer.onError((0,n.newError)("Unknown Bolt protocol message: "+l))}},u.prototype._updateCurrentObserver=function(){this._currentObserver=this._pendingObservers.shift(),this._observer.onObserversCountChange(this._observersCount)},Object.defineProperty(u.prototype,"_observersCount",{get:function(){return this._currentObserver==null?this._pendingObservers.length:this._pendingObservers.length+1},enumerable:!1,configurable:!0}),u.prototype._queueObserver=function(l){return(l=l||a).onCompleted=l.onCompleted||i,l.onError=l.onError||i,l.onNext=l.onNext||i,this._currentObserver===void 0?this._currentObserver=l:this._pendingObservers.push(l),this._observer.onObserversCountChange(this._observersCount),!0},u.prototype._notifyErrorToObservers=function(l){for(this._currentObserver&&this._currentObserver.onError&&this._currentObserver.onError(l);this._pendingObservers.length>0;){var c=this._pendingObservers.shift();c&&c.onError&&c.onError(l)}},u.prototype.hasOngoingObservableRequests=function(){return this._currentObserver!=null||this._pendingObservers.length>0},u.prototype._resetFailure=function(){this._currentFailure=null},u.prototype._handleErrorPayload=function(l){var c,f=(c=l.code)==="Neo.TransientError.Transaction.Terminated"?"Neo.ClientError.Transaction.Terminated":c==="Neo.TransientError.Transaction.LockClientStopped"?"Neo.ClientError.Transaction.LockClientStopped":c,h=l.cause!=null?this._handleErrorCause(l.cause):void 0,d=(0,n.newError)(l.message,f,h,l.gql_status,l.description,l.diagnostic_record);return this._observer.onErrorApplyTransformation(d)},u.prototype._handleErrorCause=function(l){var c=l.cause!=null?this._handleErrorCause(l.cause):void 0,f=(0,n.newGQLError)(l.message,c,l.gql_status,l.description,l.diagnostic_record);return this._observer.onErrorApplyTransformation(f)},u}();e.default=s},7790:function(r,e,t){var n,i=this&&this.__extends||(n=function(c,f){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var v in d)Object.prototype.hasOwnProperty.call(d,v)&&(h[v]=d[v])},n(c,f)},function(c,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function h(){this.constructor=c}n(c,f),c.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)}),o=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0}),o(t(9305));var a=function(){function c(){}return c.ofRecord=function(f){return f===null?c.ofNull():new l(f)},c.ofMessageResponse=function(f){return f===null?c.ofNull():new s(f)},c.ofNull=function(){return new u},Object.defineProperty(c.prototype,"ttl",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"db",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"servers",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"isNull",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),c}();e.default=a;var s=function(c){function f(h){var d=c.call(this)||this;return d._response=h,d}return i(f,c),Object.defineProperty(f.prototype,"ttl",{get:function(){return this._response.rt.ttl},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"servers",{get:function(){return this._response.rt.servers},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"db",{get:function(){return this._response.rt.db},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"isNull",{get:function(){return this._response===null},enumerable:!1,configurable:!0}),f}(a),u=function(c){function f(){return c!==null&&c.apply(this,arguments)||this}return i(f,c),Object.defineProperty(f.prototype,"isNull",{get:function(){return!0},enumerable:!1,configurable:!0}),f}(a),l=function(c){function f(h){var d=c.call(this)||this;return d._record=h,d}return i(f,c),Object.defineProperty(f.prototype,"ttl",{get:function(){return this._record.get("ttl")},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"servers",{get:function(){return this._record.get("servers")},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"db",{get:function(){return this._record.has("db")?this._record.get("db"):null},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"isNull",{get:function(){return this._record===null},enumerable:!1,configurable:!0}),f}(a)},9014:function(r,e,t){var n,i=this&&this.__extends||(n=function(P,T){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,D){R.__proto__=D}||function(R,D){for(var L in D)Object.prototype.hasOwnProperty.call(D,L)&&(R[L]=D[L])},n(P,T)},function(P,T){if(typeof T!="function"&&T!==null)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");function R(){this.constructor=P}n(P,T),P.prototype=T===null?Object.create(T):(R.prototype=T.prototype,new R)}),o=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetryObserver=e.ProcedureRouteObserver=e.RouteObserver=e.CompletedObserver=e.FailedObserver=e.ResetObserver=e.LogoffObserver=e.LoginObserver=e.ResultStreamObserver=e.StreamObserver=void 0;var a=t(9305),s=o(t(7790)),u=t(6781),l=a.internal.constants.FETCH_ALL,c=a.error.PROTOCOL_ERROR,f=function(){function P(){}return P.prototype.onNext=function(T){},P.prototype.onError=function(T){},P.prototype.onCompleted=function(T){},P}();e.StreamObserver=f;var h=function(P){function T(R){var D=R===void 0?{}:R,L=D.reactive,j=L!==void 0&&L,F=D.moreFunction,q=D.discardFunction,W=D.fetchSize,Z=W===void 0?l:W,Q=D.beforeError,re=D.afterError,ee=D.beforeKeys,ue=D.afterKeys,de=D.beforeComplete,se=D.afterComplete,be=D.server,Le=D.highRecordWatermark,fe=Le===void 0?Number.MAX_VALUE:Le,ce=D.lowRecordWatermark,Ee=ce===void 0?Number.MAX_VALUE:ce,Ce=D.enrichMetadata,ke=P.call(this)||this;return ke._fieldKeys=null,ke._fieldLookup=null,ke._head=null,ke._queuedRecords=[],ke._tail=null,ke._error=null,ke._observers=[],ke._meta={},ke._server=be,ke._beforeError=Q,ke._afterError=re,ke._beforeKeys=ee,ke._afterKeys=ue,ke._beforeComplete=de,ke._afterComplete=se,ke._enrichMetadata=Ce||u.functional.identity,ke._queryId=null,ke._moreFunction=F,ke._discardFunction=q,ke._discard=!1,ke._fetchSize=Z,ke._lowRecordWatermark=Ee,ke._highRecordWatermark=fe,ke._setState(j?C.READY:C.READY_STREAMING),ke._setupAutoPull(),ke._paused=!1,ke._pulled=!j,ke._haveRecordStreamed=!1,ke}return i(T,P),T.prototype.pause=function(){this._paused=!0},T.prototype.resume=function(){this._paused=!1,this._setupAutoPull(!0),this._state.pull(this)},T.prototype.onNext=function(R){this._haveRecordStreamed=!0;var D=new a.Record(this._fieldKeys,R,this._fieldLookup);this._observers.some(function(L){return L.onNext})?this._observers.forEach(function(L){L.onNext&&L.onNext(D)}):(this._queuedRecords.push(D),this._queuedRecords.length>this._highRecordWatermark&&(this._autoPull=!1))},T.prototype.onCompleted=function(R){this._state.onSuccess(this,R)},T.prototype.onError=function(R){this._state.onError(this,R)},T.prototype.cancel=function(){this._discard=!0},T.prototype.prepareToHandleSingleResponse=function(){this._head=[],this._fieldKeys=[],this._setState(C.STREAMING)},T.prototype.markCompleted=function(){this._head=[],this._fieldKeys=[],this._tail={},this._setState(C.SUCCEEDED)},T.prototype.subscribe=function(R){if(this._head&&R.onKeys&&R.onKeys(this._head),this._queuedRecords.length>0&&R.onNext)for(var D=0;D<this._queuedRecords.length;D++)R.onNext(this._queuedRecords[D]),this._queuedRecords.length-D-1<=this._lowRecordWatermark&&(this._autoPull=!0,this._state===C.READY&&this._handleStreaming());this._tail&&R.onCompleted&&R.onCompleted(this._tail),this._error&&R.onError(this._error),this._observers.push(R),this._state===C.READY&&this._handleStreaming()},T.prototype._handleHasMore=function(R){this._setState(C.READY),this._handleStreaming(),delete R.has_more},T.prototype._handlePullSuccess=function(R){var D=this,L=this._enrichMetadata(Object.assign(this._server?{server:this._server}:{},this._meta,{stream_summary:{have_records_streamed:this._haveRecordStreamed,pulled:this._pulled,has_keys:this._fieldKeys.length>0}},R));if([void 0,null,"r","w","rw","s"].includes(L.type)){this._setState(C.SUCCEEDED);var j=null;this._beforeComplete&&(j=this._beforeComplete(L));var F=function(){D._tail=L,D._observers.some(function(q){return q.onCompleted})&&D._observers.forEach(function(q){q.onCompleted&&q.onCompleted(L)}),D._afterComplete&&D._afterComplete(L)};j?Promise.resolve(j).then(function(){return F()}):F()}else this.onError((0,a.newError)(`Server returned invalid query type. Expected one of [undefined, null, "r", "w", "rw", "s"] but got '`.concat(L.type,"'"),c))},T.prototype._handleRunSuccess=function(R,D){var L=this;if(this._fieldKeys===null){if(this._fieldKeys=[],this._fieldLookup={},R.fields&&R.fields.length>0){this._fieldKeys=R.fields;for(var j=0;j<R.fields.length;j++)this._fieldLookup[R.fields[j]]=j}R.fields!=null&&delete R.fields,R.qid!==null&&R.qid!==void 0&&(this._queryId=R.qid,delete R.qid),this._storeMetadataForCompletion(R);var F=null;this._beforeKeys&&(F=this._beforeKeys(this._fieldKeys));var q=function(){L._head=L._fieldKeys,L._observers.some(function(W){return W.onKeys})&&L._observers.forEach(function(W){W.onKeys&&W.onKeys(L._fieldKeys)}),L._afterKeys&&L._afterKeys(L._fieldKeys),D()};F?Promise.resolve(F).then(function(){return q()}):q()}},T.prototype._handleError=function(R){var D=this;this._setState(C.FAILED),this._error=R;var L=null;this._beforeError&&(L=this._beforeError(R));var j=function(){D._observers.some(function(F){return F.onError})&&D._observers.forEach(function(F){F.onError&&F.onError(R)}),D._afterError&&D._afterError(R)};L?Promise.resolve(L).then(function(){return j()}):j()},T.prototype._handleStreaming=function(){this._head&&this._observers.some(function(R){return R.onNext||R.onCompleted})&&(this._paused||!this._discard&&!this._autoPull||this._more())},T.prototype._more=function(){this._discard?this._discardFunction(this._queryId,this):(this._pulled=!0,this._moreFunction(this._queryId,this._fetchSize,this)),this._setState(C.STREAMING)},T.prototype._storeMetadataForCompletion=function(R){for(var D=Object.keys(R),L=D.length,j="";L--;)j=D[L],this._meta[j]=R[j]},T.prototype._setState=function(R){this._state=R},T.prototype._setupAutoPull=function(){this._autoPull=!0},T}(f);e.ResultStreamObserver=h;var d=function(P){function T(R){var D=R===void 0?{}:R,L=D.onError,j=D.onCompleted,F=P.call(this)||this;return F._onError=L,F._onCompleted=j,F}return i(T,P),T.prototype.onNext=function(R){this.onError((0,a.newError)("Received RECORD when initializing "+a.json.stringify(R)))},T.prototype.onError=function(R){this._onError&&this._onError(R)},T.prototype.onCompleted=function(R){this._onCompleted&&this._onCompleted(R)},T}(f);e.LoginObserver=d;var v=function(P){function T(R){var D=R===void 0?{}:R,L=D.onError,j=D.onCompleted,F=P.call(this)||this;return F._onError=L,F._onCompleted=j,F}return i(T,P),T.prototype.onNext=function(R){this.onError((0,a.newError)("Received RECORD when logging off "+a.json.stringify(R)))},T.prototype.onError=function(R){this._onError&&this._onError(R)},T.prototype.onCompleted=function(R){this._onCompleted&&this._onCompleted(R)},T}(f);e.LogoffObserver=v;var g=function(P){function T(R){var D=R===void 0?{}:R,L=D.onProtocolError,j=D.onError,F=D.onComplete,q=P.call(this)||this;return q._onProtocolError=L,q._onError=j,q._onComplete=F,q}return i(T,P),T.prototype.onNext=function(R){this.onError((0,a.newError)("Received RECORD when resetting: received record is: "+a.json.stringify(R),c))},T.prototype.onError=function(R){R.code===c&&this._onProtocolError&&this._onProtocolError(R.message),this._onError&&this._onError(R)},T.prototype.onCompleted=function(R){this._onComplete&&this._onComplete(R)},T}(f);e.ResetObserver=g;var _=function(P){function T(R){var D=R===void 0?{}:R,L=D.onError,j=D.onCompleted,F=P.call(this)||this;return F._onError=L,F._onCompleted=j,F}return i(T,P),T.prototype.onNext=function(R){this.onError((0,a.newError)("Received RECORD when sending telemetry "+a.json.stringify(R),c))},T.prototype.onError=function(R){this._onError&&this._onError(R)},T.prototype.onCompleted=function(R){this._onCompleted&&this._onCompleted(R)},T}(h);e.TelemetryObserver=_;var y=function(P){function T(R){var D=R.error,L=R.onError,j=P.call(this,{beforeError:L})||this;return j.onError(D),j}return i(T,P),T}(h);e.FailedObserver=y;var p=function(P){function T(){var R=P.call(this)||this;return P.prototype.markCompleted.call(R),R}return i(T,P),T}(h);e.CompletedObserver=p;var m=function(P){function T(R){var D=R.resultObserver,L=R.onProtocolError,j=R.onError,F=R.onCompleted,q=P.call(this)||this;return q._resultObserver=D,q._onError=j,q._onCompleted=F,q._records=[],q._onProtocolError=L,D.subscribe(q),q}return i(T,P),T.prototype.onNext=function(R){this._records.push(R)},T.prototype.onError=function(R){R.code===c&&this._onProtocolError&&this._onProtocolError(R.message),this._onError&&this._onError(R)},T.prototype.onCompleted=function(){this._records===null||this._records.length===1?this._onCompleted&&this._onCompleted(s.default.ofRecord(this._records[0])):this.onError((0,a.newError)("Illegal response from router. Received "+this._records.length+` records but expected only one.
`+a.json.stringify(this._records),c))},T}(f);e.ProcedureRouteObserver=m;var E=function(P){function T(R){var D=R===void 0?{}:R,L=D.onProtocolError,j=D.onError,F=D.onCompleted,q=P.call(this)||this;return q._onProtocolError=L,q._onError=j,q._onCompleted=F,q}return i(T,P),T.prototype.onNext=function(R){this.onError((0,a.newError)("Received RECORD when resetting: received record is: "+a.json.stringify(R),c))},T.prototype.onError=function(R){R.code===c&&this._onProtocolError&&this._onProtocolError(R.message),this._onError&&this._onError(R)},T.prototype.onCompleted=function(R){this._onCompleted&&this._onCompleted(s.default.ofMessageResponse(R))},T}(f);e.RouteObserver=E;var C={READY_STREAMING:{onSuccess:function(P,T){P._handleRunSuccess(T,function(){P._setState(C.STREAMING)})},onError:function(P,T){P._handleError(T)},name:function(){return"READY_STREAMING"},pull:function(){}},READY:{onSuccess:function(P,T){P._handleRunSuccess(T,function(){return P._handleStreaming()})},onError:function(P,T){P._handleError(T)},name:function(){return"READY"},pull:function(P){return P._more()}},STREAMING:{onSuccess:function(P,T){T.has_more?P._handleHasMore(T):P._handlePullSuccess(T)},onError:function(P,T){P._handleError(T)},name:function(){return"STREAMING"},pull:function(){}},FAILED:{onError:function(P){},name:function(){return"FAILED"},pull:function(){}},SUCCEEDED:{name:function(){return"SUCCEEDED"},pull:function(){}}}},5973:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.epochSecondAndNanoToLocalDateTime=e.nanoOfDayToLocalTime=e.epochDayToDate=void 0;var n=t(9305),i=n.internal.temporalUtil,o=i.DAYS_0000_TO_1970,a=i.DAYS_PER_400_YEAR_CYCLE,s=i.NANOS_PER_HOUR,u=i.NANOS_PER_MINUTE,l=i.NANOS_PER_SECOND,c=i.SECONDS_PER_DAY,f=i.floorDiv,h=i.floorMod;function d(g){var _=(g=(0,n.int)(g)).add(o).subtract(60),y=(0,n.int)(0);if(_.lessThan(0)){var p=_.add(1).div(a).subtract(1);y=p.multiply(400),_=_.add(p.multiply(-a))}var m=_.multiply(400).add(591).div(a),E=_.subtract(m.multiply(365).add(m.div(4)).subtract(m.div(100)).add(m.div(400)));E.lessThan(0)&&(m=m.subtract(1),E=_.subtract(m.multiply(365).add(m.div(4)).subtract(m.div(100)).add(m.div(400)))),m=m.add(y);var C=E,P=C.multiply(5).add(2).div(153),T=P.add(2).modulo(12).add(1),R=C.subtract(P.multiply(306).add(5).div(10)).add(1);return m=m.add(P.div(10)),new n.Date(m,T,R)}function v(g){var _=(g=(0,n.int)(g)).div(s),y=(g=g.subtract(_.multiply(s))).div(u),p=(g=g.subtract(y.multiply(u))).div(l),m=g.subtract(p.multiply(l));return new n.LocalTime(_,y,p,m)}e.epochDayToDate=d,e.nanoOfDayToLocalTime=v,e.epochSecondAndNanoToLocalDateTime=function(g,_){var y=f(g,c),p=h(g,c).multiply(l).add(_),m=d(y),E=v(p);return new n.LocalDateTime(m.year,m.month,m.day,E.hour,E.minute,E.second,E.nanosecond)}},3321:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TypeTransformer=void 0;var n=t(7168),i=t(9305).internal.objectUtil,o=function(){function s(u){this._transformers=u,this._transformersPerSignature=new Map(u.map(function(l){return[l.signature,l]})),this.fromStructure=this.fromStructure.bind(this),this.toStructure=this.toStructure.bind(this),Object.freeze(this)}return s.prototype.fromStructure=function(u){try{return u instanceof n.structure.Structure&&this._transformersPerSignature.has(u.signature)?(0,this._transformersPerSignature.get(u.signature).fromStructure)(u):u}catch(l){return i.createBrokenObject(l)}},s.prototype.toStructure=function(u){var l=this._transformers.find(function(c){return(0,c.isTypeInstance)(u)});return l!==void 0?l.toStructure(u):u},s}();e.default=o;var a=function(){function s(u){var l=u.signature,c=u.fromStructure,f=u.toStructure,h=u.isTypeInstance;this.signature=l,this.isTypeInstance=h,this.fromStructure=c,this.toStructure=f,Object.freeze(this)}return s.prototype.extendsWith=function(u){var l=u.signature,c=u.fromStructure,f=u.toStructure,h=u.isTypeInstance;return new s({signature:l||this.signature,fromStructure:c||this.fromStructure,toStructure:f||this.toStructure,isTypeInstance:h||this.isTypeInstance})},s}();e.TypeTransformer=a},45:function(r,e){var t,n=this&&this.__extends||(t=function(a,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},t(a,s)},function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}t(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function a(s){this.position=0,this.length=s}return a.prototype.getUInt8=function(s){throw new Error("Not implemented")},a.prototype.getInt8=function(s){throw new Error("Not implemented")},a.prototype.getFloat64=function(s){throw new Error("Not implemented")},a.prototype.putUInt8=function(s,u){throw new Error("Not implemented")},a.prototype.putInt8=function(s,u){throw new Error("Not implemented")},a.prototype.putFloat64=function(s,u){throw new Error("Not implemented")},a.prototype.getInt16=function(s){return this.getInt8(s)<<8|this.getUInt8(s+1)},a.prototype.getUInt16=function(s){return this.getUInt8(s)<<8|this.getUInt8(s+1)},a.prototype.getInt32=function(s){return this.getInt8(s)<<24|this.getUInt8(s+1)<<16|this.getUInt8(s+2)<<8|this.getUInt8(s+3)},a.prototype.getUInt32=function(s){return this.getUInt8(s)<<24|this.getUInt8(s+1)<<16|this.getUInt8(s+2)<<8|this.getUInt8(s+3)},a.prototype.getInt64=function(s){return this.getInt8(s)<<56|this.getUInt8(s+1)<<48|this.getUInt8(s+2)<<40|this.getUInt8(s+3)<<32|this.getUInt8(s+4)<<24|this.getUInt8(s+5)<<16|this.getUInt8(s+6)<<8|this.getUInt8(s+7)},a.prototype.getSlice=function(s,u){return new o(s,u,this)},a.prototype.putInt16=function(s,u){this.putInt8(s,u>>8),this.putUInt8(s+1,255&u)},a.prototype.putUInt16=function(s,u){this.putUInt8(s,u>>8&255),this.putUInt8(s+1,255&u)},a.prototype.putInt32=function(s,u){this.putInt8(s,u>>24),this.putUInt8(s+1,u>>16&255),this.putUInt8(s+2,u>>8&255),this.putUInt8(s+3,255&u)},a.prototype.putUInt32=function(s,u){this.putUInt8(s,u>>24&255),this.putUInt8(s+1,u>>16&255),this.putUInt8(s+2,u>>8&255),this.putUInt8(s+3,255&u)},a.prototype.putInt64=function(s,u){this.putInt8(s,u>>48),this.putUInt8(s+1,u>>42&255),this.putUInt8(s+2,u>>36&255),this.putUInt8(s+3,u>>30&255),this.putUInt8(s+4,u>>24&255),this.putUInt8(s+5,u>>16&255),this.putUInt8(s+6,u>>8&255),this.putUInt8(s+7,255&u)},a.prototype.putBytes=function(s,u){for(var l=0,c=u.remaining();l<c;l++)this.putUInt8(s+l,u.readUInt8())},a.prototype.readUInt8=function(){return this.getUInt8(this._updatePos(1))},a.prototype.readInt8=function(){return this.getInt8(this._updatePos(1))},a.prototype.readUInt16=function(){return this.getUInt16(this._updatePos(2))},a.prototype.readUInt32=function(){return this.getUInt32(this._updatePos(4))},a.prototype.readInt16=function(){return this.getInt16(this._updatePos(2))},a.prototype.readInt32=function(){return this.getInt32(this._updatePos(4))},a.prototype.readInt64=function(){return this.getInt32(this._updatePos(8))},a.prototype.readFloat64=function(){return this.getFloat64(this._updatePos(8))},a.prototype.writeUInt8=function(s){this.putUInt8(this._updatePos(1),s)},a.prototype.writeInt8=function(s){this.putInt8(this._updatePos(1),s)},a.prototype.writeInt16=function(s){this.putInt16(this._updatePos(2),s)},a.prototype.writeInt32=function(s){this.putInt32(this._updatePos(4),s)},a.prototype.writeUInt32=function(s){this.putUInt32(this._updatePos(4),s)},a.prototype.writeInt64=function(s){this.putInt64(this._updatePos(8),s)},a.prototype.writeFloat64=function(s){this.putFloat64(this._updatePos(8),s)},a.prototype.writeBytes=function(s){this.putBytes(this._updatePos(s.remaining()),s)},a.prototype.readSlice=function(s){return this.getSlice(this._updatePos(s),s)},a.prototype._updatePos=function(s){var u=this.position;return this.position+=s,u},a.prototype.remaining=function(){return this.length-this.position},a.prototype.hasRemaining=function(){return this.remaining()>0},a.prototype.reset=function(){this.position=0},a.prototype.toString=function(){return this.constructor.name+"( position="+this.position+` )
  `+this.toHex()},a.prototype.toHex=function(){for(var s="",u=0;u<this.length;u++){var l=this.getUInt8(u).toString(16);l.length===1&&(l="0"+l),s+=l,u!==this.length-1&&(s+=" ")}return s},a}();e.default=i;var o=function(a){function s(u,l,c){var f=a.call(this,l)||this;return f._start=u,f._inner=c,f}return n(s,a),s.prototype.putUInt8=function(u,l){this._inner.putUInt8(this._start+u,l)},s.prototype.getUInt8=function(u){return this._inner.getUInt8(this._start+u)},s.prototype.putInt8=function(u,l){this._inner.putInt8(this._start+u,l)},s.prototype.putFloat64=function(u,l){this._inner.putFloat64(this._start+u,l)},s.prototype.getInt8=function(u){return this._inner.getInt8(this._start+u)},s.prototype.getFloat64=function(u){return this._inner.getFloat64(this._start+u)},s}(i)},7174:function(r,e,t){var n=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0}),e.BaseBuffer=void 0;var i=n(t(45));e.BaseBuffer=i.default,e.default=i.default},6245:function(r,e,t){var n=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(t(5319)),o=t(9305),a=o.internal.util,s=a.ENCRYPTION_OFF,u=a.ENCRYPTION_ON,l=function(){function f(h,d,v){d===void 0&&(d=c),v===void 0&&(v=function(E){return new WebSocket(E)});var g=this;this._open=!0,this._pending=[],this._error=null,this._handleConnectionError=this._handleConnectionError.bind(this),this._config=h,this._receiveTimeout=null,this._receiveTimeoutStarted=!1,this._receiveTimeoutId=null,this._closingPromise=null;var _=function(E,C){var P=function(L){return L.encrypted===!0||L.encrypted===u}(E),T=function(L){return L.encrypted===!1||L.encrypted===s}(E),R=E.trust,D=function(L){var j=typeof L=="function"?L():"";return j&&j.toLowerCase().indexOf("https")>=0}(C);return function(L,j,F){F===null||(L&&!F?console.warn("Neo4j driver is configured to use secure WebSocket on a HTTP web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to not use encryption."):j&&F&&console.warn("Neo4j driver is configured to use insecure WebSocket on a HTTPS web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to use encryption."))}(P,T,D),T?{scheme:"ws",error:null}:D?{scheme:"wss",error:null}:P?R&&R!=="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"?{scheme:null,error:(0,o.newError)("The browser version of this driver only supports one trust strategy, 'TRUST_SYSTEM_CA_SIGNED_CERTIFICATES'. "+R+' is not supported. Please either use TRUST_SYSTEM_CA_SIGNED_CERTIFICATES or disable encryption by setting `encrypted:"'+s+'"` in the driver configuration.')}:{scheme:"wss",error:null}:{scheme:"ws",error:null}}(h,d),y=_.scheme,p=_.error;if(p)this._error=p;else{this._ws=function(E,C,P){var T=E+"://"+C.asHostPort();try{return P(T)}catch(D){if(function(L,j){return L.name==="SyntaxError"&&(F=j.asHostPort()).charAt(0)==="["&&F.indexOf("]")!==-1;var F}(D,C)){var R=function(L,j){var F=j.host().replace(/:/g,"-").replace("%","s")+".ipv6-literal.net";return"".concat(L,"://").concat(F,":").concat(j.port())}(E,C);return P(R)}throw D}}(y,h.address,v),this._ws.binaryType="arraybuffer";var m=this;this._ws.onclose=function(E){E&&!E.wasClean&&m._handleConnectionError(),m._open=!1},this._ws.onopen=function(){m._clearConnectionTimeout();var E=m._pending;m._pending=null;for(var C=0;C<E.length;C++)m.write(E[C])},this._ws.onmessage=function(E){if(g._resetTimeout(),m.onmessage){var C=new i.default(E.data);m.onmessage(C)}},this._ws.onerror=this._handleConnectionError,this._connectionTimeoutFired=!1,this._connectionTimeoutId=this._setupConnectionTimeout()}}return f.prototype._handleConnectionError=function(){if(this._connectionTimeoutFired)return this._error=(0,o.newError)("Failed to establish connection in ".concat(this._config.connectionTimeout,"ms"),this._config.connectionErrorCode),void(this.onerror&&this.onerror(this._error));this._open&&!this._timedout&&(this._error=(0,o.newError)("WebSocket connection failure. Due to security constraints in your web browser, the reason for the failure is not available to this Neo4j Driver. Please use your browsers development console to determine the root cause of the failure. Common reasons include the database being unavailable, using the wrong connection URL or temporary network problems. If you have enabled encryption, ensure your browser is configured to trust the certificate Neo4j is configured to use. WebSocket `readyState` is: "+this._ws.readyState,this._config.connectionErrorCode),this.onerror&&this.onerror(this._error))},f.prototype.write=function(h){if(this._pending!==null)this._pending.push(h);else{if(!(h instanceof i.default))throw(0,o.newError)("Don't know how to send buffer: "+h);try{this._ws.send(h._buffer)}catch(d){if(this._ws.readyState===1)throw d;this._handleConnectionError()}}},f.prototype.close=function(){var h=this;return this._closingPromise===null&&(this._closingPromise=new Promise(function(d,v){h._clearConnectionTimeout(),h._ws&&h._ws.readyState!==3?(h._open=!1,h.stopReceiveTimeout(),h._ws.onclose=function(){d()},h._ws.close()):d()})),this._closingPromise},f.prototype.setupReceiveTimeout=function(h){this._receiveTimeout=h},f.prototype.stopReceiveTimeout=function(){this._receiveTimeout!==null&&this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!1,this._receiveTimeoutId!=null&&clearTimeout(this._receiveTimeoutId),this._receiveTimeoutId=null)},f.prototype.startReceiveTimeout=function(){this._open&&this._receiveTimeout!==null&&!this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!0,this._resetTimeout())},f.prototype._resetTimeout=function(){var h=this;this._receiveTimeoutStarted&&(this._receiveTimeoutId!==null&&clearTimeout(this._receiveTimeoutId),this._receiveTimeoutId=setTimeout(function(){h._receiveTimeoutId=null,h._timedout=!0,h.stopReceiveTimeout(),h._error=(0,o.newError)("Connection lost. Server didn't respond in ".concat(h._receiveTimeout,"ms"),h._config.connectionErrorCode),h.close(),h.onerror&&h.onerror(h._error)},this._receiveTimeout))},f.prototype._setupConnectionTimeout=function(){var h=this,d=this._config.connectionTimeout;if(d){var v=this._ws;return setTimeout(function(){v.readyState!==1&&(h._connectionTimeoutFired=!0,v.close())},d)}return null},f.prototype._clearConnectionTimeout=function(){var h=this._connectionTimeoutId;(h||h===0)&&(this._connectionTimeoutFired=!1,this._connectionTimeoutId=null,clearTimeout(h))},f}();function c(){return typeof window<"u"&&window.location?window.location.protocol:null}e.default=l},614:function(r,e){var t=this&&this.__awaiter||function(i,o,a,s){return new(a||(a=Promise))(function(u,l){function c(d){try{h(s.next(d))}catch(v){l(v)}}function f(d){try{h(s.throw(d))}catch(v){l(v)}}function h(d){var v;d.done?u(d.value):(v=d.value,v instanceof a?v:new a(function(g){g(v)})).then(c,f)}h((s=s.apply(i,o||[])).next())})},n=this&&this.__generator||function(i,o){var a,s,u,l,c={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(h){return function(d){return function(v){if(a)throw new TypeError("Generator is already executing.");for(;l&&(l=0,v[0]&&(c=0)),c;)try{if(a=1,s&&(u=2&v[0]?s.return:v[0]?s.throw||((u=s.return)&&u.call(s),0):s.next)&&!(u=u.call(s,v[1])).done)return u;switch(s=0,u&&(v=[2&v[0],u.value]),v[0]){case 0:case 1:u=v;break;case 4:return c.label++,{value:v[1],done:!1};case 5:c.label++,s=v[1],v=[0];continue;case 7:v=c.ops.pop(),c.trys.pop();continue;default:if(!((u=(u=c.trys).length>0&&u[u.length-1])||v[0]!==6&&v[0]!==2)){c=0;continue}if(v[0]===3&&(!u||v[1]>u[0]&&v[1]<u[3])){c.label=v[1];break}if(v[0]===6&&c.label<u[1]){c.label=u[1],u=v;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(v);break}u[2]&&c.ops.pop(),c.trys.pop();continue}v=o.call(i,c)}catch(g){v=[6,g],s=0}finally{a=u=0}if(5&v[0])throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}([h,d])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.default={load:function(i){return t(this,void 0,void 0,function(){return n(this,function(o){return[2,i]})})}}},2199:function(r,e,t){var n,i=this&&this.__extends||(n=function(a,s){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},n(a,s)},function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}n(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(a){function s(){return a!==null&&a.apply(this,arguments)||this}return i(s,a),s.prototype.resolve=function(u){return this._resolveToItself(u)},s}(t(9305).internal.resolver.BaseHostNameResolver);e.default=o},3951:function(r,e,t){var n=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0}),e.ClientCertificatesLoader=e.HostNameResolver=e.Channel=void 0;var i=n(t(6245)),o=n(t(2199)),a=n(t(614));e.Channel=i.default,e.HostNameResolver=o.default,e.ClientCertificatesLoader=a.default},5319:function(r,e,t){var n,i=this&&this.__extends||(n=function(u,l){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(c[h]=f[h])},n(u,l)},function(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function c(){this.constructor=u}n(u,l),u.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)}),o=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.alloc=void 0;var a=o(t(1048)),s=function(u){function l(c){var f=this,h=function(d){return d instanceof a.default.Buffer?d:typeof d=="number"&&typeof a.default.Buffer.alloc=="function"?a.default.Buffer.alloc(d):new a.default.Buffer(d)}(c);return(f=u.call(this,h.length)||this)._buffer=h,f}return i(l,u),l.prototype.getUInt8=function(c){return this._buffer.readUInt8(c)},l.prototype.getInt8=function(c){return this._buffer.readInt8(c)},l.prototype.getFloat64=function(c){return this._buffer.readDoubleBE(c)},l.prototype.putUInt8=function(c,f){this._buffer.writeUInt8(f,c)},l.prototype.putInt8=function(c,f){this._buffer.writeInt8(f,c)},l.prototype.putFloat64=function(c,f){this._buffer.writeDoubleBE(f,c)},l.prototype.putBytes=function(c,f){if(f instanceof l){var h=Math.min(f.length-f.position,this.length-c);f._buffer.copy(this._buffer,c,f.position,f.position+h),f.position+=h}else u.prototype.putBytes.call(this,c,f)},l.prototype.getSlice=function(c,f){return new l(this._buffer.slice(c,c+f))},l}(o(t(7174)).default);e.default=s,e.alloc=function(u){return new s(u)}},2481:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=t(9305),i=n.internal.util,o=i.ENCRYPTION_OFF,a=i.ENCRYPTION_ON,s=n.error.SERVICE_UNAVAILABLE,u=[null,void 0,!0,!1,a,o],l=[null,void 0,"TRUST_ALL_CERTIFICATES","TRUST_CUSTOM_CA_SIGNED_CERTIFICATES","TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"];e.default=function(c,f,h,d){this.address=c,this.encrypted=function(v){var g=v.encrypted;if(u.indexOf(g)===-1)throw(0,n.newError)("Illegal value of the encrypted setting ".concat(g,". Expected one of ").concat(u));return g}(f),this.trust=function(v){var g=v.trust;if(l.indexOf(g)===-1)throw(0,n.newError)("Illegal value of the trust setting ".concat(g,". Expected one of ").concat(l));return g}(f),this.trustedCertificates=function(v){return v.trustedCertificates||[]}(f),this.knownHostsPath=function(v){return v.knownHosts||null}(f),this.connectionErrorCode=h||s,this.connectionTimeout=f.connectionTimeout,this.clientCertificate=d}},373:function(r,e,t){var n,i=this&&this.__extends||(n=function(f,h){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,v){d.__proto__=v}||function(d,v){for(var g in v)Object.prototype.hasOwnProperty.call(v,g)&&(d[g]=v[g])},n(f,h)},function(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function d(){this.constructor=f}n(f,h),f.prototype=h===null?Object.create(h):(d.prototype=h.prototype,new d)}),o=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(e,"__esModule",{value:!0}),e.Dechunker=e.Chunker=void 0;var a=o(t(45)),s=t(5319),u=o(t(5553)),l=function(f){function h(d,v){var g=f.call(this,0)||this;return g._bufferSize=v||1400,g._ch=d,g._buffer=(0,s.alloc)(g._bufferSize),g._currentChunkStart=0,g._chunkOpen=!1,g}return i(h,f),h.prototype.putUInt8=function(d,v){this._ensure(1),this._buffer.writeUInt8(v)},h.prototype.putInt8=function(d,v){this._ensure(1),this._buffer.writeInt8(v)},h.prototype.putFloat64=function(d,v){this._ensure(8),this._buffer.writeFloat64(v)},h.prototype.putBytes=function(d,v){for(;v.remaining()>0;)this._ensure(1),this._buffer.remaining()>v.remaining()?this._buffer.writeBytes(v):this._buffer.writeBytes(v.readSlice(this._buffer.remaining()));return this},h.prototype.flush=function(){if(this._buffer.position>0){this._closeChunkIfOpen();var d=this._buffer;this._buffer=null,this._ch.write(d.getSlice(0,d.position)),this._buffer=(0,s.alloc)(this._bufferSize),this._chunkOpen=!1}return this},h.prototype.messageBoundary=function(){this._closeChunkIfOpen(),this._buffer.remaining()<2&&this.flush(),this._buffer.writeInt16(0)},h.prototype._ensure=function(d){var v=this._chunkOpen?d:d+2;this._buffer.remaining()<v&&this.flush(),this._chunkOpen||(this._currentChunkStart=this._buffer.position,this._buffer.position=this._buffer.position+2,this._chunkOpen=!0)},h.prototype._closeChunkIfOpen=function(){if(this._chunkOpen){var d=this._buffer.position-(this._currentChunkStart+2);this._buffer.putUInt16(this._currentChunkStart,d),this._chunkOpen=!1}},h}(a.default);e.Chunker=l;var c=function(){function f(){this._currentMessage=[],this._partialChunkHeader=0,this._state=this.AWAITING_CHUNK}return f.prototype.AWAITING_CHUNK=function(h){return h.remaining()>=2?this._onHeader(h.readUInt16()):(this._partialChunkHeader=h.readUInt8()<<8,this.IN_HEADER)},f.prototype.IN_HEADER=function(h){return this._onHeader(65535&(this._partialChunkHeader|h.readUInt8()))},f.prototype.IN_CHUNK=function(h){return this._chunkSize<=h.remaining()?(this._currentMessage.push(h.readSlice(this._chunkSize)),this.AWAITING_CHUNK):(this._chunkSize-=h.remaining(),this._currentMessage.push(h.readSlice(h.remaining())),this.IN_CHUNK)},f.prototype.CLOSED=function(h){},f.prototype._onHeader=function(h){if(h===0){var d=void 0;switch(this._currentMessage.length){case 0:return this.AWAITING_CHUNK;case 1:d=this._currentMessage[0];break;default:d=new u.default(this._currentMessage)}return this._currentMessage=[],this.onmessage(d),this.AWAITING_CHUNK}return this._chunkSize=h,this.IN_CHUNK},f.prototype.write=function(h){for(;h.hasRemaining();)this._state=this._state(h)},f}();e.Dechunker=c},5553:function(r,e,t){var n,i=this&&this.__extends||(n=function(u,l){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(c[h]=f[h])},n(u,l)},function(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function c(){this.constructor=u}n(u,l),u.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)});Object.defineProperty(e,"__esModule",{value:!0});var o=t(7174),a=t(5319),s=function(u){function l(c){for(var f=this,h=0,d=0;d<c.length;d++)h+=c[d].length;return(f=u.call(this,h)||this)._buffers=c,f}return i(l,u),l.prototype.getUInt8=function(c){for(var f=0;f<this._buffers.length;f++){var h=this._buffers[f];if(!(c>=h.length))return h.getUInt8(c);c-=h.length}},l.prototype.getInt8=function(c){for(var f=0;f<this._buffers.length;f++){var h=this._buffers[f];if(!(c>=h.length))return h.getInt8(c);c-=h.length}},l.prototype.getFloat64=function(c){for(var f=(0,a.alloc)(8),h=0;h<8;h++)f.putUInt8(h,this.getUInt8(c+h));return f.getFloat64(0)},l}(o.BaseBuffer);e.default=s},7452:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(l,c,f,h){h===void 0&&(h=f);var d=Object.getOwnPropertyDescriptor(c,f);d&&!("get"in d?!c.__esModule:d.writable||d.configurable)||(d={enumerable:!0,get:function(){return c[f]}}),Object.defineProperty(l,h,d)}:function(l,c,f,h){h===void 0&&(h=f),l[h]=c[f]}),i=this&&this.__exportStar||function(l,c){for(var f in l)f==="default"||Object.prototype.hasOwnProperty.call(c,f)||n(c,l,f)},o=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0}),e.utf8=e.alloc=e.ChannelConfig=void 0,i(t(3951),e),i(t(373),e);var a=t(2481);Object.defineProperty(e,"ChannelConfig",{enumerable:!0,get:function(){return o(a).default}});var s=t(5319);Object.defineProperty(e,"alloc",{enumerable:!0,get:function(){return s.alloc}});var u=t(3473);Object.defineProperty(e,"utf8",{enumerable:!0,get:function(){return o(u).default}})},3473:function(r,e,t){var n=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(t(5319)),o=t(9305),a=n(t(1048)),s=new(t(8888)).StringDecoder("utf8");e.default={encode:function(u){return new i.default(function(l){return typeof a.default.Buffer.from=="function"?a.default.Buffer.from(l,"utf8"):new a.default.Buffer(l,"utf8")}(u))},decode:function(u,l){if(Object.prototype.hasOwnProperty.call(u,"_buffer"))return function(c,f){var h=c.position,d=h+f;return c.position=Math.min(d,c.length),c._buffer.toString("utf8",h,d)}(u,l);if(Object.prototype.hasOwnProperty.call(u,"_buffers"))return function(c,f){return function(h,d,v,g){var _=d,y=h.position;return h._updatePos(Math.min(d,h.length-y)),h._buffers.reduce(function(p,m){if(_<=0)return p;if(y>=m.length)return y-=m.length,"";m._updatePos(y-m.position);var E=Math.min(m.length-y,_),C=m.readSlice(E);return m._updatePos(E),_=Math.max(_-C.length,0),y=0,p+function(P){return s.write(P._buffer)}(C)},"")+s.end()}(c,f)}(u,l);throw(0,o.newError)("Don't know how to decode strings from '".concat(u,"'"))}}},1839:function(r,e,t){var n=this&&this.__awaiter||function(u,l,c,f){return new(c||(c=Promise))(function(h,d){function v(y){try{_(f.next(y))}catch(p){d(p)}}function g(y){try{_(f.throw(y))}catch(p){d(p)}}function _(y){var p;y.done?h(y.value):(p=y.value,p instanceof c?p:new c(function(m){m(p)})).then(v,g)}_((f=f.apply(u,l||[])).next())})},i=this&&this.__generator||function(u,l){var c,f,h,d,v={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return d={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function g(_){return function(y){return function(p){if(c)throw new TypeError("Generator is already executing.");for(;d&&(d=0,p[0]&&(v=0)),v;)try{if(c=1,f&&(h=2&p[0]?f.return:p[0]?f.throw||((h=f.return)&&h.call(f),0):f.next)&&!(h=h.call(f,p[1])).done)return h;switch(f=0,h&&(p=[2&p[0],h.value]),p[0]){case 0:case 1:h=p;break;case 4:return v.label++,{value:p[1],done:!1};case 5:v.label++,f=p[1],p=[0];continue;case 7:p=v.ops.pop(),v.trys.pop();continue;default:if(!((h=(h=v.trys).length>0&&h[h.length-1])||p[0]!==6&&p[0]!==2)){v=0;continue}if(p[0]===3&&(!h||p[1]>h[0]&&p[1]<h[3])){v.label=p[1];break}if(p[0]===6&&v.label<h[1]){v.label=h[1],h=p;break}if(h&&v.label<h[2]){v.label=h[2],v.ops.push(p);break}h[2]&&v.ops.pop(),v.trys.pop();continue}p=l.call(u,v)}catch(m){p=[6,m],f=0}finally{c=h=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}([_,y])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=t(9305),a=t(6781),s=function(){function u(l){var c=l.authTokenManager,f=l.userAgent,h=l.boltAgent;this._authTokenManager=c||(0,o.staticAuthTokenManager)({}),this._userAgent=f,this._boltAgent=h}return u.prototype.authenticate=function(l){var c=l.connection,f=l.auth,h=l.skipReAuth,d=l.waitReAuth,v=l.forceReAuth;return n(this,void 0,void 0,function(){var g,_;return i(this,function(y){switch(y.label){case 0:return f==null?[3,3]:(g=c.supportsReAuth===!0&&(!a.object.equals(c.authToken,f)&&h!==!0||v===!0),c.authToken==null||g?[4,c.connect(this._userAgent,this._boltAgent,f,d||!1)]:[3,2]);case 1:case 5:return[2,y.sent()];case 2:case 6:return[2,c];case 3:return[4,this._authTokenManager.getToken()];case 4:return _=y.sent(),a.object.equals(_,c.authToken)?[3,6]:[4,c.connect(this._userAgent,this._boltAgent,_,!1)]}})})},u.prototype.handleError=function(l){var c=l.connection,f=l.code;return!(!c||!f.startsWith("Neo.ClientError.Security."))&&this._authTokenManager.handleSecurityException(c.authToken,f)},u}();e.default=s},4271:function(r,e,t){var n=this&&this.__awaiter||function(s,u,l,c){return new(l||(l=Promise))(function(f,h){function d(_){try{g(c.next(_))}catch(y){h(y)}}function v(_){try{g(c.throw(_))}catch(y){h(y)}}function g(_){var y;_.done?f(_.value):(y=_.value,y instanceof l?y:new l(function(p){p(y)})).then(d,v)}g((c=c.apply(s,u||[])).next())})},i=this&&this.__generator||function(s,u){var l,c,f,h,d={label:0,sent:function(){if(1&f[0])throw f[1];return f[1]},trys:[],ops:[]};return h={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function v(g){return function(_){return function(y){if(l)throw new TypeError("Generator is already executing.");for(;h&&(h=0,y[0]&&(d=0)),d;)try{if(l=1,c&&(f=2&y[0]?c.return:y[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,y[1])).done)return f;switch(c=0,f&&(y=[2&y[0],f.value]),y[0]){case 0:case 1:f=y;break;case 4:return d.label++,{value:y[1],done:!1};case 5:d.label++,c=y[1],y=[0];continue;case 7:y=d.ops.pop(),d.trys.pop();continue;default:if(!((f=(f=d.trys).length>0&&f[f.length-1])||y[0]!==6&&y[0]!==2)){d=0;continue}if(y[0]===3&&(!f||y[1]>f[0]&&y[1]<f[3])){d.label=y[1];break}if(y[0]===6&&d.label<f[1]){d.label=f[1],f=y;break}if(f&&d.label<f[2]){d.label=f[2],d.ops.push(y);break}f[2]&&d.ops.pop(),d.trys.pop();continue}y=u.call(s,d)}catch(p){y=[6,p],c=0}finally{l=f=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([g,_])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=t(7452),a=function(){function s(u){var l=u.clientCertificateProvider,c=u.loader;this._clientCertificateProvider=l,this._loader=c||o.ClientCertificatesLoader,this._clientCertificate=null}return s.prototype.getClientCertificate=function(){return n(this,void 0,void 0,function(){var u,l,c=this;return i(this,function(f){switch(f.label){case 0:return(u=this._clientCertificateProvider!=null)?(l=this._clientCertificate==null)?[3,2]:[4,this._clientCertificateProvider.hasUpdate()]:[3,3];case 1:l=f.sent(),f.label=2;case 2:u=l,f.label=3;case 3:return u&&(this._clientCertificate=Promise.resolve(this._clientCertificateProvider.getClientCertificate()).then(this._loader.load).then(function(h){return c._clientCertificate=h,c._clientCertificate}).catch(function(h){throw c._clientCertificate=null,h})),[2,this._clientCertificate]}})})},s}();e.default=a},3545:function(r,e,t){var n,i=this&&this.__extends||(n=function(p,m){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,C){E.__proto__=C}||function(E,C){for(var P in C)Object.prototype.hasOwnProperty.call(C,P)&&(E[P]=C[P])},n(p,m)},function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function E(){this.constructor=p}n(p,m),p.prototype=m===null?Object.create(m):(E.prototype=m.prototype,new E)}),o=this&&this.__awaiter||function(p,m,E,C){return new(E||(E=Promise))(function(P,T){function R(j){try{L(C.next(j))}catch(F){T(F)}}function D(j){try{L(C.throw(j))}catch(F){T(F)}}function L(j){var F;j.done?P(j.value):(F=j.value,F instanceof E?F:new E(function(q){q(F)})).then(R,D)}L((C=C.apply(p,m||[])).next())})},a=this&&this.__generator||function(p,m){var E,C,P,T,R={label:0,sent:function(){if(1&P[0])throw P[1];return P[1]},trys:[],ops:[]};return T={next:D(0),throw:D(1),return:D(2)},typeof Symbol=="function"&&(T[Symbol.iterator]=function(){return this}),T;function D(L){return function(j){return function(F){if(E)throw new TypeError("Generator is already executing.");for(;T&&(T=0,F[0]&&(R=0)),R;)try{if(E=1,C&&(P=2&F[0]?C.return:F[0]?C.throw||((P=C.return)&&P.call(C),0):C.next)&&!(P=P.call(C,F[1])).done)return P;switch(C=0,P&&(F=[2&F[0],P.value]),F[0]){case 0:case 1:P=F;break;case 4:return R.label++,{value:F[1],done:!1};case 5:R.label++,C=F[1],F=[0];continue;case 7:F=R.ops.pop(),R.trys.pop();continue;default:if(!((P=(P=R.trys).length>0&&P[P.length-1])||F[0]!==6&&F[0]!==2)){R=0;continue}if(F[0]===3&&(!P||F[1]>P[0]&&F[1]<P[3])){R.label=F[1];break}if(F[0]===6&&R.label<P[1]){R.label=P[1],P=F;break}if(P&&R.label<P[2]){R.label=P[2],R.ops.push(F);break}P[2]&&R.ops.pop(),R.trys.pop();continue}F=m.call(p,R)}catch(q){F=[6,q],C=0}finally{E=P=0}if(5&F[0])throw F[1];return{value:F[0]?F[1]:void 0,done:!0}}([L,j])}}},s=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(e,"__esModule",{value:!0});var u=s(t(8987)),l=t(7721),c=t(9305),f=c.internal.constants,h=f.BOLT_PROTOCOL_V3,d=f.BOLT_PROTOCOL_V4_0,v=f.BOLT_PROTOCOL_V4_4,g=f.BOLT_PROTOCOL_V5_1,_=c.error.SERVICE_UNAVAILABLE,y=function(p){function m(E){var C=E.id,P=E.config,T=E.log,R=E.address,D=E.userAgent,L=E.boltAgent,j=E.authTokenManager,F=E.newPool,q=p.call(this,{id:C,config:P,log:T,userAgent:D,boltAgent:L,authTokenManager:j,newPool:F})||this;return q._address=R,q}return i(m,p),m.prototype.acquireConnection=function(E){var C=E===void 0?{}:E,P=(C.accessMode,C.database),T=(C.bookmarks,C.auth),R=C.forceReAuth;return o(this,void 0,void 0,function(){var D,L,j=this;return a(this,function(F){switch(F.label){case 0:return D=l.ConnectionErrorHandler.create({errorCode:_,handleSecurityError:function(q,W,Z){return j._handleSecurityError(q,W,Z,P)}}),[4,this._connectionPool.acquire({auth:T,forceReAuth:R},this._address)];case 1:return L=F.sent(),T?[4,this._verifyStickyConnection({auth:T,connection:L,address:this._address})]:[3,3];case 2:return F.sent(),[2,L];case 3:return[2,new l.DelegateConnection(L,D)]}})})},m.prototype._handleSecurityError=function(E,C,P,T){return this._log.warn("Direct driver ".concat(this._id," will close connection to ").concat(C," for database '").concat(T,"' because of an error ").concat(E.code," '").concat(E.message,"'")),p.prototype._handleSecurityError.call(this,E,C,P)},m.prototype._hasProtocolVersion=function(E){return o(this,void 0,void 0,function(){var C,P;return a(this,function(T){switch(T.label){case 0:return[4,this._createChannelConnection(this._address)];case 1:return C=T.sent(),P=C.protocol()?C.protocol().version:null,[4,C.close()];case 2:return T.sent(),P?[2,E(P)]:[2,!1]}})})},m.prototype.supportsMultiDb=function(){return o(this,void 0,void 0,function(){return a(this,function(E){switch(E.label){case 0:return[4,this._hasProtocolVersion(function(C){return C>=d})];case 1:return[2,E.sent()]}})})},m.prototype.getNegotiatedProtocolVersion=function(){var E=this;return new Promise(function(C,P){E._hasProtocolVersion(C).catch(P)})},m.prototype.supportsTransactionConfig=function(){return o(this,void 0,void 0,function(){return a(this,function(E){switch(E.label){case 0:return[4,this._hasProtocolVersion(function(C){return C>=h})];case 1:return[2,E.sent()]}})})},m.prototype.supportsUserImpersonation=function(){return o(this,void 0,void 0,function(){return a(this,function(E){switch(E.label){case 0:return[4,this._hasProtocolVersion(function(C){return C>=v})];case 1:return[2,E.sent()]}})})},m.prototype.supportsSessionAuth=function(){return o(this,void 0,void 0,function(){return a(this,function(E){switch(E.label){case 0:return[4,this._hasProtocolVersion(function(C){return C>=g})];case 1:return[2,E.sent()]}})})},m.prototype.verifyAuthentication=function(E){var C=E.auth;return o(this,void 0,void 0,function(){var P=this;return a(this,function(T){return[2,this._verifyAuthentication({auth:C,getAddress:function(){return P._address}})]})})},m.prototype.verifyConnectivityAndGetServerInfo=function(){return o(this,void 0,void 0,function(){return a(this,function(E){switch(E.label){case 0:return[4,this._verifyConnectivityAndGetServerVersion({address:this._address})];case 1:return[2,E.sent()]}})})},m}(u.default);e.default=y},8987:function(r,e,t){var n,i=this&&this.__extends||(n=function(P,T){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,D){R.__proto__=D}||function(R,D){for(var L in D)Object.prototype.hasOwnProperty.call(D,L)&&(R[L]=D[L])},n(P,T)},function(P,T){if(typeof T!="function"&&T!==null)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");function R(){this.constructor=P}n(P,T),P.prototype=T===null?Object.create(T):(R.prototype=T.prototype,new R)}),o=this&&this.__awaiter||function(P,T,R,D){return new(R||(R=Promise))(function(L,j){function F(Z){try{W(D.next(Z))}catch(Q){j(Q)}}function q(Z){try{W(D.throw(Z))}catch(Q){j(Q)}}function W(Z){var Q;Z.done?L(Z.value):(Q=Z.value,Q instanceof R?Q:new R(function(re){re(Q)})).then(F,q)}W((D=D.apply(P,T||[])).next())})},a=this&&this.__generator||function(P,T){var R,D,L,j,F={label:0,sent:function(){if(1&L[0])throw L[1];return L[1]},trys:[],ops:[]};return j={next:q(0),throw:q(1),return:q(2)},typeof Symbol=="function"&&(j[Symbol.iterator]=function(){return this}),j;function q(W){return function(Z){return function(Q){if(R)throw new TypeError("Generator is already executing.");for(;j&&(j=0,Q[0]&&(F=0)),F;)try{if(R=1,D&&(L=2&Q[0]?D.return:Q[0]?D.throw||((L=D.return)&&L.call(D),0):D.next)&&!(L=L.call(D,Q[1])).done)return L;switch(D=0,L&&(Q=[2&Q[0],L.value]),Q[0]){case 0:case 1:L=Q;break;case 4:return F.label++,{value:Q[1],done:!1};case 5:F.label++,D=Q[1],Q=[0];continue;case 7:Q=F.ops.pop(),F.trys.pop();continue;default:if(!((L=(L=F.trys).length>0&&L[L.length-1])||Q[0]!==6&&Q[0]!==2)){F=0;continue}if(Q[0]===3&&(!L||Q[1]>L[0]&&Q[1]<L[3])){F.label=Q[1];break}if(Q[0]===6&&F.label<L[1]){F.label=L[1],L=Q;break}if(L&&F.label<L[2]){F.label=L[2],F.ops.push(Q);break}L[2]&&F.ops.pop(),F.trys.pop();continue}Q=T.call(P,F)}catch(re){Q=[6,re],D=0}finally{R=L=0}if(5&Q[0])throw Q[1];return{value:Q[0]?Q[1]:void 0,done:!0}}([W,Z])}}},s=this&&this.__read||function(P,T){var R=typeof Symbol=="function"&&P[Symbol.iterator];if(!R)return P;var D,L,j=R.call(P),F=[];try{for(;(T===void 0||T-- >0)&&!(D=j.next()).done;)F.push(D.value)}catch(q){L={error:q}}finally{try{D&&!D.done&&(R=j.return)&&R.call(j)}finally{if(L)throw L.error}}return F},u=this&&this.__spreadArray||function(P,T,R){if(R||arguments.length===2)for(var D,L=0,j=T.length;L<j;L++)!D&&L in T||(D||(D=Array.prototype.slice.call(T,0,L)),D[L]=T[L]);return P.concat(D||Array.prototype.slice.call(T))},l=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(e,"__esModule",{value:!0});var c=t(7721),f=t(9305),h=l(t(1839)),d=t(6781),v=l(t(4531)),g=l(t(4271)),_=f.error.SERVICE_UNAVAILABLE,y=["Neo.ClientError.Security.CredentialsExpired","Neo.ClientError.Security.Forbidden","Neo.ClientError.Security.TokenExpired","Neo.ClientError.Security.Unauthorized"],p=f.internal.pool,m=p.Pool,E=p.PoolConfig,C=function(P){function T(R,D){var L=R.id,j=R.config,F=R.log,q=R.userAgent,W=R.boltAgent,Z=R.authTokenManager,Q=R.newPool,re=Q===void 0?function(){for(var ue=[],de=0;de<arguments.length;de++)ue[de]=arguments[de];return new(m.bind.apply(m,u([void 0],s(ue),!1)))}:Q;D===void 0&&(D=null);var ee=P.call(this)||this;return ee._id=L,ee._config=j,ee._log=F,ee._clientCertificateHolder=new g.default({clientCertificateProvider:ee._config.clientCertificate}),ee._authenticationProvider=new h.default({authTokenManager:Z,userAgent:q,boltAgent:W}),ee._livenessCheckProvider=new v.default({connectionLivenessCheckTimeout:j.connectionLivenessCheckTimeout}),ee._userAgent=q,ee._boltAgent=W,ee._createChannelConnection=D||function(ue){return o(ee,void 0,void 0,function(){var de,se;return a(this,function(be){switch(be.label){case 0:return de=c.createChannelConnection,se=[ue,this._config,this._createConnectionErrorHandler(),this._log],[4,this._clientCertificateHolder.getClientCertificate()];case 1:return[2,de.apply(void 0,se.concat([be.sent()]))]}})})},ee._connectionPool=re({create:ee._createConnection.bind(ee),destroy:ee._destroyConnection.bind(ee),validateOnAcquire:ee._validateConnectionOnAcquire.bind(ee),validateOnRelease:ee._validateConnectionOnRelease.bind(ee),installIdleObserver:T._installIdleObserverOnConnection.bind(ee),removeIdleObserver:T._removeIdleObserverOnConnection.bind(ee),config:E.fromDriverConfig(j),log:ee._log}),ee._openConnections={},ee}return i(T,P),T.prototype._createConnectionErrorHandler=function(){return new c.ConnectionErrorHandler(_)},T.prototype._getClientCertificate=function(){return o(this,void 0,void 0,function(){return a(this,function(R){return[2,this._config.clientCertificate.getClientCertificate()]})})},T.prototype._createConnection=function(R,D,L){var j=this,F=R.auth;return this._createChannelConnection(D).then(function(q){return q.release=function(){return q.idleTimestamp=Date.now(),L(D,q)},j._openConnections[q.id]=q,j._authenticationProvider.authenticate({connection:q,auth:F}).catch(function(W){throw j._destroyConnection(q),W})})},T.prototype._validateConnectionOnAcquire=function(R,D){var L=R.auth,j=R.skipReAuth;return o(this,void 0,void 0,function(){var F,q;return a(this,function(W){switch(W.label){case 0:if(!this._validateConnection(D))return[2,!1];W.label=1;case 1:return W.trys.push([1,3,,4]),[4,this._livenessCheckProvider.check(D)];case 2:return W.sent(),[3,4];case 3:return F=W.sent(),this._log.debug("The connection ".concat(D.id," is not alive because of an error ").concat(F.code," '").concat(F.message,"'")),[2,!1];case 4:return W.trys.push([4,6,,7]),[4,this._authenticationProvider.authenticate({connection:D,auth:L,skipReAuth:j})];case 5:return W.sent(),[2,!0];case 6:return q=W.sent(),this._log.debug("The connection ".concat(D.id," is not valid because of an error ").concat(q.code," '").concat(q.message,"'")),[2,!1];case 7:return[2]}})})},T.prototype._validateConnectionOnRelease=function(R){return R._sticky!==!0&&this._validateConnection(R)},T.prototype._validateConnection=function(R){if(!R.isOpen())return!1;var D=this._config.maxConnectionLifetime;return!(Date.now()-R.creationTimestamp>D)},T.prototype._destroyConnection=function(R){return delete this._openConnections[R.id],R.close()},T.prototype._verifyConnectivityAndGetServerVersion=function(R){var D=R.address;return o(this,void 0,void 0,function(){var L,j;return a(this,function(F){switch(F.label){case 0:return[4,this._connectionPool.acquire({},D)];case 1:L=F.sent(),j=new f.ServerInfo(L.server,L.protocol().version),F.label=2;case 2:return F.trys.push([2,,5,7]),L.protocol().isLastMessageLogon()?[3,4]:[4,L.resetAndFlush()];case 3:F.sent(),F.label=4;case 4:return[3,7];case 5:return[4,L.release()];case 6:return F.sent(),[7];case 7:return[2,j]}})})},T.prototype._verifyAuthentication=function(R){var D=R.getAddress,L=R.auth;return o(this,void 0,void 0,function(){var j,F,q,W,Z,Q;return a(this,function(re){switch(re.label){case 0:j=[],re.label=1;case 1:return re.trys.push([1,8,9,11]),[4,D()];case 2:return F=re.sent(),[4,this._connectionPool.acquire({auth:L,skipReAuth:!0},F)];case 3:if(q=re.sent(),j.push(q),W=!q.protocol().isLastMessageLogon(),!q.supportsReAuth)throw(0,f.newError)("Driver is connected to a database that does not support user switch.");return W&&q.supportsReAuth?[4,this._authenticationProvider.authenticate({connection:q,auth:L,waitReAuth:!0,forceReAuth:!0})]:[3,5];case 4:return re.sent(),[3,7];case 5:return!W||q.supportsReAuth?[3,7]:[4,this._connectionPool.acquire({auth:L},F,{requireNew:!0})];case 6:(Z=re.sent())._sticky=!0,j.push(Z),re.label=7;case 7:return[2,!0];case 8:if(Q=re.sent(),y.includes(Q.code))return[2,!1];throw Q;case 9:return[4,Promise.all(j.map(function(ee){return ee.release()}))];case 10:return re.sent(),[7];case 11:return[2]}})})},T.prototype._verifyStickyConnection=function(R){var D=R.auth,L=R.connection;return R.address,o(this,void 0,void 0,function(){var j,F;return a(this,function(q){switch(q.label){case 0:return j=d.object.equals(D,L.authToken),F=!j,L._sticky=j&&!L.supportsReAuth,F||L._sticky?[4,L.release()]:[3,2];case 1:throw q.sent(),(0,f.newError)("Driver is connected to a database that does not support user switch.");case 2:return[2]}})})},T.prototype.close=function(){return o(this,void 0,void 0,function(){return a(this,function(R){switch(R.label){case 0:return[4,this._connectionPool.close()];case 1:return R.sent(),[4,Promise.all(Object.values(this._openConnections).map(function(D){return D.close()}))];case 2:return R.sent(),[2]}})})},T._installIdleObserverOnConnection=function(R,D){R._setIdle(D)},T._removeIdleObserverOnConnection=function(R){R._unsetIdle()},T.prototype._handleSecurityError=function(R,D,L){return this._authenticationProvider.handleError({connection:L,code:R.code})&&(R.retriable=!0),R.code==="Neo.ClientError.Security.AuthorizationExpired"&&this._connectionPool.apply(D,function(j){j.authToken=null}),L&&L.close().catch(function(){}),R},T}(f.ConnectionProvider);e.default=C},7428:function(r,e,t){var n,i=this&&this.__extends||(n=function(ke,Ie){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ve,we){ve.__proto__=we}||function(ve,we){for(var xe in we)Object.prototype.hasOwnProperty.call(we,xe)&&(ve[xe]=we[xe])},n(ke,Ie)},function(ke,Ie){if(typeof Ie!="function"&&Ie!==null)throw new TypeError("Class extends value "+String(Ie)+" is not a constructor or null");function ve(){this.constructor=ke}n(ke,Ie),ke.prototype=Ie===null?Object.create(Ie):(ve.prototype=Ie.prototype,new ve)}),o=this&&this.__assign||function(){return o=Object.assign||function(ke){for(var Ie,ve=1,we=arguments.length;ve<we;ve++)for(var xe in Ie=arguments[ve])Object.prototype.hasOwnProperty.call(Ie,xe)&&(ke[xe]=Ie[xe]);return ke},o.apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(ke,Ie,ve,we){we===void 0&&(we=ve);var xe=Object.getOwnPropertyDescriptor(Ie,ve);xe&&!("get"in xe?!Ie.__esModule:xe.writable||xe.configurable)||(xe={enumerable:!0,get:function(){return Ie[ve]}}),Object.defineProperty(ke,we,xe)}:function(ke,Ie,ve,we){we===void 0&&(we=ve),ke[we]=Ie[ve]}),s=this&&this.__setModuleDefault||(Object.create?function(ke,Ie){Object.defineProperty(ke,"default",{enumerable:!0,value:Ie})}:function(ke,Ie){ke.default=Ie}),u=this&&this.__importStar||function(ke){if(ke&&ke.__esModule)return ke;var Ie={};if(ke!=null)for(var ve in ke)ve!=="default"&&Object.prototype.hasOwnProperty.call(ke,ve)&&a(Ie,ke,ve);return s(Ie,ke),Ie},l=this&&this.__awaiter||function(ke,Ie,ve,we){return new(ve||(ve=Promise))(function(xe,Fe){function He(it){try{wt(we.next(it))}catch(H){Fe(H)}}function at(it){try{wt(we.throw(it))}catch(H){Fe(H)}}function wt(it){var H;it.done?xe(it.value):(H=it.value,H instanceof ve?H:new ve(function($){$(H)})).then(He,at)}wt((we=we.apply(ke,Ie||[])).next())})},c=this&&this.__generator||function(ke,Ie){var ve,we,xe,Fe,He={label:0,sent:function(){if(1&xe[0])throw xe[1];return xe[1]},trys:[],ops:[]};return Fe={next:at(0),throw:at(1),return:at(2)},typeof Symbol=="function"&&(Fe[Symbol.iterator]=function(){return this}),Fe;function at(wt){return function(it){return function(H){if(ve)throw new TypeError("Generator is already executing.");for(;Fe&&(Fe=0,H[0]&&(He=0)),He;)try{if(ve=1,we&&(xe=2&H[0]?we.return:H[0]?we.throw||((xe=we.return)&&xe.call(we),0):we.next)&&!(xe=xe.call(we,H[1])).done)return xe;switch(we=0,xe&&(H=[2&H[0],xe.value]),H[0]){case 0:case 1:xe=H;break;case 4:return He.label++,{value:H[1],done:!1};case 5:He.label++,we=H[1],H=[0];continue;case 7:H=He.ops.pop(),He.trys.pop();continue;default:if(!((xe=(xe=He.trys).length>0&&xe[xe.length-1])||H[0]!==6&&H[0]!==2)){He=0;continue}if(H[0]===3&&(!xe||H[1]>xe[0]&&H[1]<xe[3])){He.label=H[1];break}if(H[0]===6&&He.label<xe[1]){He.label=xe[1],xe=H;break}if(xe&&He.label<xe[2]){He.label=xe[2],He.ops.push(H);break}xe[2]&&He.ops.pop(),He.trys.pop();continue}H=Ie.call(ke,He)}catch($){H=[6,$],we=0}finally{ve=xe=0}if(5&H[0])throw H[1];return{value:H[0]?H[1]:void 0,done:!0}}([wt,it])}}},f=this&&this.__values||function(ke){var Ie=typeof Symbol=="function"&&Symbol.iterator,ve=Ie&&ke[Ie],we=0;if(ve)return ve.call(ke);if(ke&&typeof ke.length=="number")return{next:function(){return ke&&we>=ke.length&&(ke=void 0),{value:ke&&ke[we++],done:!ke}}};throw new TypeError(Ie?"Object is not iterable.":"Symbol.iterator is not defined.")},h=this&&this.__read||function(ke,Ie){var ve=typeof Symbol=="function"&&ke[Symbol.iterator];if(!ve)return ke;var we,xe,Fe=ve.call(ke),He=[];try{for(;(Ie===void 0||Ie-- >0)&&!(we=Fe.next()).done;)He.push(we.value)}catch(at){xe={error:at}}finally{try{we&&!we.done&&(ve=Fe.return)&&ve.call(Fe)}finally{if(xe)throw xe.error}}return He},d=this&&this.__importDefault||function(ke){return ke&&ke.__esModule?ke:{default:ke}};Object.defineProperty(e,"__esModule",{value:!0});var v=t(9305),g=u(t(206)),_=t(7452),y=d(t(4132)),p=d(t(8987)),m=t(4455),E=t(7721),C=t(6781),P=v.error.SERVICE_UNAVAILABLE,T=v.error.SESSION_EXPIRED,R=v.internal.bookmarks.Bookmarks,D=v.internal.constants,L=D.ACCESS_MODE_READ,j=D.ACCESS_MODE_WRITE,F=D.BOLT_PROTOCOL_V3,q=D.BOLT_PROTOCOL_V4_0,W=D.BOLT_PROTOCOL_V4_4,Z=D.BOLT_PROTOCOL_V5_1,Q="Neo.ClientError.Database.DatabaseNotFound",re="Neo.ClientError.Transaction.InvalidBookmark",ee="Neo.ClientError.Transaction.InvalidBookmarkMixture",ue="Neo.ClientError.Security.AuthorizationExpired",de="Neo.ClientError.Statement.ArgumentError",se="Neo.ClientError.Request.Invalid",be="Neo.ClientError.Statement.TypeError",Le="N/A",fe=null,ce=(0,v.int)(3e4),Ee=function(ke){function Ie(ve){var we=ve.id,xe=ve.address,Fe=ve.routingContext,He=ve.hostNameResolver,at=ve.config,wt=ve.log,it=ve.userAgent,H=ve.boltAgent,$=ve.authTokenManager,ne=ve.routingTablePurgeDelay,Re=ve.newPool,De=ke.call(this,{id:we,config:at,log:wt,userAgent:it,boltAgent:H,authTokenManager:$,newPool:Re},function(Be){return l(De,void 0,void 0,function(){var Je,Tt;return c(this,function(Lt){switch(Lt.label){case 0:return Je=E.createChannelConnection,Tt=[Be,this._config,this._createConnectionErrorHandler(),this._log],[4,this._clientCertificateHolder.getClientCertificate()];case 1:return[2,Je.apply(void 0,Tt.concat([Lt.sent(),this._routingContext]))]}})})})||this;return De._routingContext=o(o({},Fe),{address:xe.toString()}),De._seedRouter=xe,De._rediscovery=new g.default(De._routingContext),De._loadBalancingStrategy=new m.LeastConnectedLoadBalancingStrategy(De._connectionPool),De._hostNameResolver=He,De._dnsResolver=new _.HostNameResolver,De._log=wt,De._useSeedRouter=!0,De._routingTableRegistry=new Ce(ne?(0,v.int)(ne):ce),De._refreshRoutingTable=C.functional.reuseOngoingRequest(De._refreshRoutingTable,De),De}return i(Ie,ke),Ie.prototype._createConnectionErrorHandler=function(){return new E.ConnectionErrorHandler(T)},Ie.prototype._handleUnavailability=function(ve,we,xe){return this._log.warn("Routing driver ".concat(this._id," will forget ").concat(we," for database '").concat(xe,"' because of an error ").concat(ve.code," '").concat(ve.message,"'")),this.forget(we,xe||fe),ve},Ie.prototype._handleSecurityError=function(ve,we,xe,Fe){return this._log.warn("Routing driver ".concat(this._id," will close connections to ").concat(we," for database '").concat(Fe,"' because of an error ").concat(ve.code," '").concat(ve.message,"'")),ke.prototype._handleSecurityError.call(this,ve,we,xe,Fe)},Ie.prototype._handleWriteFailure=function(ve,we,xe){return this._log.warn("Routing driver ".concat(this._id," will forget writer ").concat(we," for database '").concat(xe,"' because of an error ").concat(ve.code," '").concat(ve.message,"'")),this.forgetWriter(we,xe||fe),(0,v.newError)("No longer possible to write to server at "+we,T,ve)},Ie.prototype.acquireConnection=function(ve){var we=ve===void 0?{}:ve,xe=we.accessMode,Fe=we.database,He=we.bookmarks,at=we.impersonatedUser,wt=we.onDatabaseNameResolved,it=we.auth;return l(this,void 0,void 0,function(){var H,$,ne,Re,De,Be,Je,Tt=this;return c(this,function(Lt){switch(Lt.label){case 0:return ne={database:Fe||fe},Re=new E.ConnectionErrorHandler(T,function(Vt,Nt){return Tt._handleUnavailability(Vt,Nt,ne.database)},function(Vt,Nt){return Tt._handleWriteFailure(Vt,Nt,ne.database)},function(Vt,Nt,Jt){return Tt._handleSecurityError(Vt,Nt,Jt,ne.database)}),[4,this._freshRoutingTable({accessMode:xe,database:ne.database,bookmarks:He,impersonatedUser:at,auth:it,onDatabaseNameResolved:function(Vt){ne.database=ne.database||Vt,wt&&wt(Vt)}})];case 1:if(De=Lt.sent(),xe===L)$=this._loadBalancingStrategy.selectReader(De.readers),H="read";else{if(xe!==j)throw(0,v.newError)("Illegal mode "+xe);$=this._loadBalancingStrategy.selectWriter(De.writers),H="write"}if(!$)throw(0,v.newError)("Failed to obtain connection towards ".concat(H," server. Known routing table is: ").concat(De),T);Lt.label=2;case 2:return Lt.trys.push([2,6,,7]),[4,this._connectionPool.acquire({auth:it},$)];case 3:return Be=Lt.sent(),it?[4,this._verifyStickyConnection({auth:it,connection:Be,address:$})]:[3,5];case 4:return Lt.sent(),[2,Be];case 5:return[2,new E.DelegateConnection(Be,Re)];case 6:throw Je=Lt.sent(),Re.handleAndTransformError(Je,$);case 7:return[2]}})})},Ie.prototype._hasProtocolVersion=function(ve){return l(this,void 0,void 0,function(){var we,xe,Fe,He,at,wt;return c(this,function(it){switch(it.label){case 0:return[4,this._resolveSeedRouter(this._seedRouter)];case 1:we=it.sent(),Fe=0,it.label=2;case 2:if(!(Fe<we.length))return[3,8];it.label=3;case 3:return it.trys.push([3,6,,7]),[4,this._createChannelConnection(we[Fe])];case 4:return He=it.sent(),at=He.protocol()?He.protocol().version:null,[4,He.close()];case 5:return it.sent(),at?[2,ve(at)]:[2,!1];case 6:return wt=it.sent(),xe=wt,[3,7];case 7:return Fe++,[3,2];case 8:if(xe)throw xe;return[2,!1]}})})},Ie.prototype.supportsMultiDb=function(){return l(this,void 0,void 0,function(){return c(this,function(ve){switch(ve.label){case 0:return[4,this._hasProtocolVersion(function(we){return we>=q})];case 1:return[2,ve.sent()]}})})},Ie.prototype.supportsTransactionConfig=function(){return l(this,void 0,void 0,function(){return c(this,function(ve){switch(ve.label){case 0:return[4,this._hasProtocolVersion(function(we){return we>=F})];case 1:return[2,ve.sent()]}})})},Ie.prototype.supportsUserImpersonation=function(){return l(this,void 0,void 0,function(){return c(this,function(ve){switch(ve.label){case 0:return[4,this._hasProtocolVersion(function(we){return we>=W})];case 1:return[2,ve.sent()]}})})},Ie.prototype.supportsSessionAuth=function(){return l(this,void 0,void 0,function(){return c(this,function(ve){switch(ve.label){case 0:return[4,this._hasProtocolVersion(function(we){return we>=Z})];case 1:return[2,ve.sent()]}})})},Ie.prototype.getNegotiatedProtocolVersion=function(){var ve=this;return new Promise(function(we,xe){ve._hasProtocolVersion(we).catch(xe)})},Ie.prototype.verifyAuthentication=function(ve){var we=ve.database,xe=ve.accessMode,Fe=ve.auth;return l(this,void 0,void 0,function(){var He=this;return c(this,function(at){return[2,this._verifyAuthentication({auth:Fe,getAddress:function(){return l(He,void 0,void 0,function(){var wt,it,H;return c(this,function($){switch($.label){case 0:return wt={database:we||fe},[4,this._freshRoutingTable({accessMode:xe,database:wt.database,auth:Fe,onDatabaseNameResolved:function(ne){wt.database=wt.database||ne}})];case 1:if(it=$.sent(),(H=xe===j?it.writers:it.readers).length===0)throw(0,v.newError)("No servers available for database '".concat(wt.database,"' with access mode '").concat(xe,"'"),P);return[2,H[0]]}})})}})]})})},Ie.prototype.verifyConnectivityAndGetServerInfo=function(ve){var we=ve.database,xe=ve.accessMode;return l(this,void 0,void 0,function(){var Fe,He,at,wt,it,H,$,ne,Re,De,Be;return c(this,function(Je){switch(Je.label){case 0:return Fe={database:we||fe},[4,this._freshRoutingTable({accessMode:xe,database:Fe.database,onDatabaseNameResolved:function(Tt){Fe.database=Fe.database||Tt}})];case 1:He=Je.sent(),at=xe===j?He.writers:He.readers,wt=(0,v.newError)("No servers available for database '".concat(Fe.database,"' with access mode '").concat(xe,"'"),P),Je.label=2;case 2:Je.trys.push([2,9,10,11]),it=f(at),H=it.next(),Je.label=3;case 3:if(H.done)return[3,8];$=H.value,Je.label=4;case 4:return Je.trys.push([4,6,,7]),[4,this._verifyConnectivityAndGetServerVersion({address:$})];case 5:return[2,Je.sent()];case 6:return ne=Je.sent(),wt=ne,[3,7];case 7:return H=it.next(),[3,3];case 8:return[3,11];case 9:return Re=Je.sent(),De={error:Re},[3,11];case 10:try{H&&!H.done&&(Be=it.return)&&Be.call(it)}finally{if(De)throw De.error}return[7];case 11:throw wt}})})},Ie.prototype.forget=function(ve,we){this._routingTableRegistry.apply(we,{applyWhenExists:function(xe){return xe.forget(ve)}}),this._connectionPool.purge(ve).catch(function(){})},Ie.prototype.forgetWriter=function(ve,we){this._routingTableRegistry.apply(we,{applyWhenExists:function(xe){return xe.forgetWriter(ve)}})},Ie.prototype._freshRoutingTable=function(ve){var we=ve===void 0?{}:ve,xe=we.accessMode,Fe=we.database,He=we.bookmarks,at=we.impersonatedUser,wt=we.onDatabaseNameResolved,it=we.auth,H=this._routingTableRegistry.get(Fe,function(){return new g.RoutingTable({database:Fe})});return H.isStaleFor(xe)?(this._log.info('Routing table is stale for database: "'.concat(Fe,'" and access mode: "').concat(xe,'": ').concat(H)),this._refreshRoutingTable(H,He,at,it).then(function($){return wt($.database),$})):H},Ie.prototype._refreshRoutingTable=function(ve,we,xe,Fe){var He=ve.routers;return this._useSeedRouter?this._fetchRoutingTableFromSeedRouterFallbackToKnownRouters(He,ve,we,xe,Fe):this._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter(He,ve,we,xe,Fe)},Ie.prototype._fetchRoutingTableFromSeedRouterFallbackToKnownRouters=function(ve,we,xe,Fe,He){return l(this,void 0,void 0,function(){var at,wt,it,H,$,ne,Re;return c(this,function(De){switch(De.label){case 0:return at=[],[4,this._fetchRoutingTableUsingSeedRouter(at,this._seedRouter,we,xe,Fe,He)];case 1:return wt=h.apply(void 0,[De.sent(),2]),it=wt[0],H=wt[1],it?(this._useSeedRouter=!1,[3,4]):[3,2];case 2:return[4,this._fetchRoutingTableUsingKnownRouters(ve,we,xe,Fe,He)];case 3:$=h.apply(void 0,[De.sent(),2]),ne=$[0],Re=$[1],it=ne,H=Re||H,De.label=4;case 4:return[4,this._applyRoutingTableIfPossible(we,it,H)];case 5:return[2,De.sent()]}})})},Ie.prototype._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter=function(ve,we,xe,Fe,He){return l(this,void 0,void 0,function(){var at,wt,it,H;return c(this,function($){switch($.label){case 0:return[4,this._fetchRoutingTableUsingKnownRouters(ve,we,xe,Fe,He)];case 1:return at=h.apply(void 0,[$.sent(),2]),wt=at[0],it=at[1],wt?[3,3]:[4,this._fetchRoutingTableUsingSeedRouter(ve,this._seedRouter,we,xe,Fe,He)];case 2:H=h.apply(void 0,[$.sent(),2]),wt=H[0],it=H[1],$.label=3;case 3:return[4,this._applyRoutingTableIfPossible(we,wt,it)];case 4:return[2,$.sent()]}})})},Ie.prototype._fetchRoutingTableUsingKnownRouters=function(ve,we,xe,Fe,He){return l(this,void 0,void 0,function(){var at,wt,it,H;return c(this,function($){switch($.label){case 0:return[4,this._fetchRoutingTable(ve,we,xe,Fe,He)];case 1:return at=h.apply(void 0,[$.sent(),2]),wt=at[0],it=at[1],wt?[2,[wt,null]]:(H=ve.length-1,Ie._forgetRouter(we,ve,H),[2,[null,it]])}})})},Ie.prototype._fetchRoutingTableUsingSeedRouter=function(ve,we,xe,Fe,He,at){return l(this,void 0,void 0,function(){var wt,it;return c(this,function(H){switch(H.label){case 0:return[4,this._resolveSeedRouter(we)];case 1:return wt=H.sent(),it=wt.filter(function($){return ve.indexOf($)<0}),[4,this._fetchRoutingTable(it,xe,Fe,He,at)];case 2:return[2,H.sent()]}})})},Ie.prototype._resolveSeedRouter=function(ve){return l(this,void 0,void 0,function(){var we,xe,Fe=this;return c(this,function(He){switch(He.label){case 0:return[4,this._hostNameResolver.resolve(ve)];case 1:return we=He.sent(),[4,Promise.all(we.map(function(at){return Fe._dnsResolver.resolve(at)}))];case 2:return xe=He.sent(),[2,[].concat.apply([],xe)]}})})},Ie.prototype._fetchRoutingTable=function(ve,we,xe,Fe,He){return l(this,void 0,void 0,function(){var at=this;return c(this,function(wt){return[2,ve.reduce(function(it,H,$){return l(at,void 0,void 0,function(){var ne,Re,De,Be,Je,Tt,Lt;return c(this,function(Vt){switch(Vt.label){case 0:return[4,it];case 1:return ne=h.apply(void 0,[Vt.sent(),1]),(Re=ne[0])?[2,[Re,null]]:(De=$-1,Ie._forgetRouter(we,ve,De),[4,this._createSessionForRediscovery(H,xe,Fe,He)]);case 2:if(Be=h.apply(void 0,[Vt.sent(),2]),Je=Be[0],Tt=Be[1],!Je)return[3,8];Vt.label=3;case 3:return Vt.trys.push([3,5,6,7]),[4,this._rediscovery.lookupRoutingTableOnRouter(Je,we.database,H,Fe)];case 4:return[2,[Vt.sent(),null]];case 5:return Lt=Vt.sent(),[2,this._handleRediscoveryError(Lt,H)];case 6:return Je.close(),[7];case 7:return[3,9];case 8:return[2,[null,Tt]];case 9:return[2]}})})},Promise.resolve([null,null]))]})})},Ie.prototype._createSessionForRediscovery=function(ve,we,xe,Fe){return l(this,void 0,void 0,function(){var He,at,wt,it,H,$=this;return c(this,function(ne){switch(ne.label){case 0:return ne.trys.push([0,4,,5]),[4,this._connectionPool.acquire({auth:Fe},ve)];case 1:return He=ne.sent(),Fe?[4,this._verifyStickyConnection({auth:Fe,connection:He,address:ve})]:[3,3];case 2:ne.sent(),ne.label=3;case 3:return at=E.ConnectionErrorHandler.create({errorCode:T,handleSecurityError:function(Re,De,Be){return $._handleSecurityError(Re,De,Be)}}),wt=He._sticky?new E.DelegateConnection(He):new E.DelegateConnection(He,at),it=new y.default(wt),He.protocol().version<4?[2,[new v.Session({mode:j,bookmarks:R.empty(),connectionProvider:it}),null]]:[2,[new v.Session({mode:L,database:"system",bookmarks:we,connectionProvider:it,impersonatedUser:xe}),null]];case 4:return H=ne.sent(),[2,this._handleRediscoveryError(H,ve)];case 5:return[2]}})})},Ie.prototype._handleRediscoveryError=function(ve,we){if(function(xe){return[Q,re,ee,de,se,be,Le].includes(xe.code)}(ve)||function(xe){return xe.code.startsWith("Neo.ClientError.Security.")&&![ue].includes(xe.code)}(ve))throw ve;if(ve.code==="Neo.ClientError.Procedure.ProcedureNotFound")throw(0,v.newError)("Server at ".concat(we.asHostPort()," can't perform routing. Make sure you are connecting to a causal cluster"),P,ve);return this._log.warn("unable to fetch routing table because of an error ".concat(ve)),[null,ve]},Ie.prototype._applyRoutingTableIfPossible=function(ve,we,xe){return l(this,void 0,void 0,function(){return c(this,function(Fe){switch(Fe.label){case 0:if(!we)throw(0,v.newError)("Could not perform discovery. No routing servers available. Known routing table: ".concat(ve),P,xe);return we.writers.length===0&&(this._useSeedRouter=!0),[4,this._updateRoutingTable(we)];case 1:return Fe.sent(),[2,we]}})})},Ie.prototype._updateRoutingTable=function(ve){return l(this,void 0,void 0,function(){return c(this,function(we){switch(we.label){case 0:return[4,this._connectionPool.keepAll(ve.allServers())];case 1:return we.sent(),this._routingTableRegistry.removeExpired(),this._routingTableRegistry.register(ve),this._log.info("Updated routing table ".concat(ve)),[2]}})})},Ie._forgetRouter=function(ve,we,xe){var Fe=we[xe];ve&&Fe&&ve.forgetRouter(Fe)},Ie}(p.default);e.default=Ee;var Ce=function(){function ke(Ie){this._tables=new Map,this._routingTablePurgeDelay=Ie}return ke.prototype.register=function(Ie){return this._tables.set(Ie.database,Ie),this},ke.prototype.apply=function(Ie,ve){var we=ve===void 0?{}:ve,xe=we.applyWhenExists,Fe=we.applyWhenDontExists,He=Fe===void 0?function(){}:Fe;return this._tables.has(Ie)?xe(this._tables.get(Ie)):typeof Ie=="string"||Ie===null?He():this._forEach(xe),this},ke.prototype.get=function(Ie,ve){return this._tables.has(Ie)?this._tables.get(Ie):typeof ve=="function"?ve():ve},ke.prototype.removeExpired=function(){var Ie=this;return this._removeIf(function(ve){return ve.isExpiredFor(Ie._routingTablePurgeDelay)})},ke.prototype._forEach=function(Ie){var ve,we;try{for(var xe=f(this._tables),Fe=xe.next();!Fe.done;Fe=xe.next())Ie(h(Fe.value,2)[1])}catch(He){ve={error:He}}finally{try{Fe&&!Fe.done&&(we=xe.return)&&we.call(xe)}finally{if(ve)throw ve.error}}return this},ke.prototype._remove=function(Ie){return this._tables.delete(Ie),this},ke.prototype._removeIf=function(Ie){var ve,we;try{for(var xe=f(this._tables),Fe=xe.next();!Fe.done;Fe=xe.next()){var He=h(Fe.value,2),at=He[0];Ie(He[1])&&this._remove(at)}}catch(wt){ve={error:wt}}finally{try{Fe&&!Fe.done&&(we=xe.return)&&we.call(xe)}finally{if(ve)throw ve.error}}return this},ke}()},4132:function(r,e,t){var n,i=this&&this.__extends||(n=function(a,s){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},n(a,s)},function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}n(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(a){function s(u){var l=a.call(this)||this;return l._connection=u,l}return i(s,a),s.prototype.acquireConnection=function(u){var l=u===void 0?{}:u,c=(l.accessMode,l.database,l.bookmarks,this._connection);return this._connection=null,Promise.resolve(c)},s}(t(9305).ConnectionProvider);e.default=o},9689:function(r,e,t){var n=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.RoutingConnectionProvider=e.DirectConnectionProvider=e.PooledConnectionProvider=e.SingleConnectionProvider=void 0;var i=t(4132);Object.defineProperty(e,"SingleConnectionProvider",{enumerable:!0,get:function(){return n(i).default}});var o=t(8987);Object.defineProperty(e,"PooledConnectionProvider",{enumerable:!0,get:function(){return n(o).default}});var a=t(3545);Object.defineProperty(e,"DirectConnectionProvider",{enumerable:!0,get:function(){return n(a).default}});var s=t(7428);Object.defineProperty(e,"RoutingConnectionProvider",{enumerable:!0,get:function(){return n(s).default}})},4531:function(r,e){var t=this&&this.__awaiter||function(o,a,s,u){return new(s||(s=Promise))(function(l,c){function f(v){try{d(u.next(v))}catch(g){c(g)}}function h(v){try{d(u.throw(v))}catch(g){c(g)}}function d(v){var g;v.done?l(v.value):(g=v.value,g instanceof s?g:new s(function(_){_(g)})).then(f,h)}d((u=u.apply(o,a||[])).next())})},n=this&&this.__generator||function(o,a){var s,u,l,c,f={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(d){return function(v){return function(g){if(s)throw new TypeError("Generator is already executing.");for(;c&&(c=0,g[0]&&(f=0)),f;)try{if(s=1,u&&(l=2&g[0]?u.return:g[0]?u.throw||((l=u.return)&&l.call(u),0):u.next)&&!(l=l.call(u,g[1])).done)return l;switch(u=0,l&&(g=[2&g[0],l.value]),g[0]){case 0:case 1:l=g;break;case 4:return f.label++,{value:g[1],done:!1};case 5:f.label++,u=g[1],g=[0];continue;case 7:g=f.ops.pop(),f.trys.pop();continue;default:if(!((l=(l=f.trys).length>0&&l[l.length-1])||g[0]!==6&&g[0]!==2)){f=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){f.label=g[1];break}if(g[0]===6&&f.label<l[1]){f.label=l[1],l=g;break}if(l&&f.label<l[2]){f.label=l[2],f.ops.push(g);break}l[2]&&f.ops.pop(),f.trys.pop();continue}g=a.call(o,f)}catch(_){g=[6,_],u=0}finally{s=l=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([d,v])}}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function o(a){var s=a.connectionLivenessCheckTimeout;this._connectionLivenessCheckTimeout=s}return o.prototype.check=function(a){return t(this,void 0,void 0,function(){var s;return n(this,function(u){switch(u.label){case 0:return this._isCheckDisabled||this._isNewlyCreatedConnection(a)?[2,!0]:(s=Date.now()-a.idleTimestamp,this._connectionLivenessCheckTimeout===0||s>this._connectionLivenessCheckTimeout?[4,a.resetAndFlush().then(function(){return!0})]:[3,2]);case 1:return[2,u.sent()];case 2:return[2,!0]}})})},Object.defineProperty(o.prototype,"_isCheckDisabled",{get:function(){return this._connectionLivenessCheckTimeout==null||this._connectionLivenessCheckTimeout<0},enumerable:!1,configurable:!0}),o.prototype._isNewlyCreatedConnection=function(a){return a.authToken==null},o}();e.default=i},8031:function(r,e,t){var n,i=this&&this.__extends||(n=function(_,y){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var E in m)Object.prototype.hasOwnProperty.call(m,E)&&(p[E]=m[E])},n(_,y)},function(_,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function p(){this.constructor=_}n(_,y),_.prototype=y===null?Object.create(y):(p.prototype=y.prototype,new p)}),o=this&&this.__awaiter||function(_,y,p,m){return new(p||(p=Promise))(function(E,C){function P(D){try{R(m.next(D))}catch(L){C(L)}}function T(D){try{R(m.throw(D))}catch(L){C(L)}}function R(D){var L;D.done?E(D.value):(L=D.value,L instanceof p?L:new p(function(j){j(L)})).then(P,T)}R((m=m.apply(_,y||[])).next())})},a=this&&this.__generator||function(_,y){var p,m,E,C,P={label:0,sent:function(){if(1&E[0])throw E[1];return E[1]},trys:[],ops:[]};return C={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function T(R){return function(D){return function(L){if(p)throw new TypeError("Generator is already executing.");for(;C&&(C=0,L[0]&&(P=0)),P;)try{if(p=1,m&&(E=2&L[0]?m.return:L[0]?m.throw||((E=m.return)&&E.call(m),0):m.next)&&!(E=E.call(m,L[1])).done)return E;switch(m=0,E&&(L=[2&L[0],E.value]),L[0]){case 0:case 1:E=L;break;case 4:return P.label++,{value:L[1],done:!1};case 5:P.label++,m=L[1],L=[0];continue;case 7:L=P.ops.pop(),P.trys.pop();continue;default:if(!((E=(E=P.trys).length>0&&E[E.length-1])||L[0]!==6&&L[0]!==2)){P=0;continue}if(L[0]===3&&(!E||L[1]>E[0]&&L[1]<E[3])){P.label=L[1];break}if(L[0]===6&&P.label<E[1]){P.label=E[1],E=L;break}if(E&&P.label<E[2]){P.label=E[2],P.ops.push(L);break}E[2]&&P.ops.pop(),P.trys.pop();continue}L=y.call(_,P)}catch(j){L=[6,j],m=0}finally{p=E=0}if(5&L[0])throw L[1];return{value:L[0]?L[1]:void 0,done:!0}}([R,D])}}},s=this&&this.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(e,"__esModule",{value:!0}),e.createChannelConnection=void 0;var u=t(7452),l=t(9305),c=s(t(6385)),f=s(t(7666)),h=l.error.PROTOCOL_ERROR,d=l.internal.logger.Logger,v=0;e.createChannelConnection=function(_,y,p,m,E,C,P){C===void 0&&(C=null),P===void 0&&(P=function(R){return new u.Channel(R)});var T=P(new u.ChannelConfig(_,y,p.errorCode(),E));return f.default.handshake(T,m).then(function(R){var D=R.protocolVersion,L=R.consumeRemainingBuffer,j=new u.Chunker(T),F=new u.Dechunker,q=new g(T,p,_,m,y.disableLosslessIntegers,C,j,y.notificationFilter,function(W){return f.default.create({version:D,channel:T,chunker:j,dechunker:F,disableLosslessIntegers:y.disableLosslessIntegers,useBigInt:y.useBigInt,serversideRouting:C,server:W.server,log:W.logger,observer:{onObserversCountChange:W._handleOngoingRequestsNumberChange.bind(W),onError:W._handleFatalError.bind(W),onFailure:W._resetOnFailure.bind(W),onProtocolError:W._handleProtocolError.bind(W),onErrorApplyTransformation:function(Z){return W.handleAndTransformError(Z,W._address)}}})},y.telemetryDisabled);return L(function(W){return F.write(W)}),q}).catch(function(R){return T.close().then(function(){throw R})})};var g=function(_){function y(p,m,E,C,P,T,R,D,L,j){P===void 0&&(P=!1),T===void 0&&(T=null);var F,q,W=_.call(this,m)||this;return W._authToken=null,W._idle=!1,W._reseting=!1,W._resetObservers=[],W._id=v++,W._address=E,W._server={address:E.asHostPort()},W._creationTimestamp=Date.now(),W._disableLosslessIntegers=P,W._ch=p,W._chunker=R,W._log=(F=W,new d((q=C)._level,function(Z,Q){return q._loggerFunction(Z,"".concat(F," ").concat(Q))})),W._serversideRouting=T,W._notificationFilter=D,W._telemetryDisabledDriverConfig=j===!0,W._telemetryDisabledConnection=!0,W._dbConnectionId=null,W._protocol=L(W),W._isBroken=!1,W._log.isDebugEnabled()&&W._log.debug("created towards ".concat(E)),W}return i(y,_),y.prototype.beginTransaction=function(p){return this._sendTelemetryIfEnabled(p),this._protocol.beginTransaction(p)},y.prototype.run=function(p,m,E){return this._sendTelemetryIfEnabled(E),this._protocol.run(p,m,E)},y.prototype._sendTelemetryIfEnabled=function(p){this._telemetryDisabledConnection||this._telemetryDisabledDriverConfig||p==null||p.apiTelemetryConfig==null||this._protocol.telemetry({api:p.apiTelemetryConfig.api},{onCompleted:p.apiTelemetryConfig.onTelemetrySuccess,onError:p.beforeError})},y.prototype.commitTransaction=function(p){return this._protocol.commitTransaction(p)},y.prototype.rollbackTransaction=function(p){return this._protocol.rollbackTransaction(p)},y.prototype.getProtocolVersion=function(){return this._protocol.version},Object.defineProperty(y.prototype,"authToken",{get:function(){return this._authToken},set:function(p){this._authToken=p},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"supportsReAuth",{get:function(){return this._protocol.supportsReAuth},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"databaseId",{get:function(){return this._dbConnectionId},set:function(p){this._dbConnectionId=p},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"idleTimestamp",{get:function(){return this._idleTimestamp},set:function(p){this._idleTimestamp=p},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"creationTimestamp",{get:function(){return this._creationTimestamp},enumerable:!1,configurable:!0}),y.prototype.connect=function(p,m,E,C){return o(this,void 0,void 0,function(){var P=this;return a(this,function(T){switch(T.label){case 0:if(this._protocol.initialized&&!this._protocol.supportsReAuth)throw(0,l.newError)("Connection does not support re-auth");return this._authToken=E,this._protocol.initialized?[3,2]:[4,this._initialize(p,m,E)];case 1:case 3:return[2,T.sent()];case 2:return C?[4,new Promise(function(R,D){P._protocol.logoff({onError:D}),P._protocol.logon({authToken:E,onError:D,onComplete:function(){return R(P)},flush:!0})})]:[3,4];case 4:return this._protocol.logoff(),this._protocol.logon({authToken:E,flush:!0}),[2,this]}})})},y.prototype._initialize=function(p,m,E){var C=this,P=this;return new Promise(function(T,R){C._protocol.initialize({userAgent:p,boltAgent:m,authToken:E,notificationFilter:C._notificationFilter,onError:function(D){return R(D)},onComplete:function(D){if(D){var L=D.server;C.version&&!L||(C.version=L);var j=D.connection_id;if(C.databaseId||(C.databaseId=j),D.hints){var F=D.hints["connection.recv_timeout_seconds"];if(F!=null){var q=(0,l.toNumber)(F);Number.isInteger(q)&&q>0?C._ch.setupReceiveTimeout(1e3*q):C._log.info("Server located at ".concat(C._address," supplied an invalid connection receive timeout value (").concat(q,"). ")+"Please, verify the server configuration and status because this can be the symptom of a bigger issue.")}D.hints["telemetry.enabled"]===!0&&(C._telemetryDisabledConnection=!1)}}T(P)}})})},y.prototype.protocol=function(){return this._protocol},Object.defineProperty(y.prototype,"address",{get:function(){return this._address},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"version",{get:function(){return this._server.version},set:function(p){this._server.version=p},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"server",{get:function(){return this._server},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"logger",{get:function(){return this._log},enumerable:!1,configurable:!0}),y.prototype._handleFatalError=function(p){this._isBroken=!0,this._error=this.handleAndTransformError(this._protocol.currentFailure||p,this._address),this._log.isErrorEnabled()&&this._log.error("experienced a fatal error caused by ".concat(this._error," (").concat(l.json.stringify(this._error),")")),this._protocol.notifyFatalError(this._error)},y.prototype._setIdle=function(p){this._idle=!0,this._ch.stopReceiveTimeout(),this._protocol.queueObserverIfProtocolIsNotBroken(p)},y.prototype._unsetIdle=function(){this._idle=!1,this._updateCurrentObserver()},y.prototype._queueObserver=function(p){return this._protocol.queueObserverIfProtocolIsNotBroken(p)},y.prototype.hasOngoingObservableRequests=function(){return!this._idle&&this._protocol.hasOngoingObservableRequests()},y.prototype.resetAndFlush=function(){var p=this;return new Promise(function(m,E){p._reset({onError:function(C){if(p._isBroken)E(C);else{var P=p._handleProtocolError("Received FAILURE as a response for RESET: ".concat(C));E(P)}},onComplete:function(){m()}})})},y.prototype._resetOnFailure=function(){var p=this;this.isOpen()&&this._reset({onError:function(){p._protocol.resetFailure()},onComplete:function(){p._protocol.resetFailure()}})},y.prototype._reset=function(p){var m=this;if(this._reseting)this._protocol.isLastMessageReset()?this._resetObservers.push(p):this._protocol.reset({onError:function(C){p.onError(C)},onComplete:function(){p.onComplete()}});else{this._resetObservers.push(p),this._reseting=!0;var E=function(C){m._reseting=!1;var P=m._resetObservers;m._resetObservers=[],P.forEach(C)};this._protocol.reset({onError:function(C){E(function(P){return P.onError(C)})},onComplete:function(){E(function(C){return C.onComplete()})}})}},y.prototype._updateCurrentObserver=function(){this._protocol.updateCurrentObserver()},y.prototype.isOpen=function(){return!this._isBroken&&this._ch._open},y.prototype._handleOngoingRequestsNumberChange=function(p){this._idle||(p===0?this._ch.stopReceiveTimeout():this._ch.startReceiveTimeout())},y.prototype.close=function(){return o(this,void 0,void 0,function(){return a(this,function(p){switch(p.label){case 0:return this._log.isDebugEnabled()&&this._log.debug("closing"),this._protocol&&this.isOpen()&&this._protocol.prepareToClose(),[4,this._ch.close()];case 1:return p.sent(),this._log.isDebugEnabled()&&this._log.debug("closed"),[2]}})})},y.prototype.toString=function(){return"Connection [".concat(this.id,"][").concat(this.databaseId||"","]")},y.prototype._handleProtocolError=function(p){this._protocol.resetFailure(),this._updateCurrentObserver();var m=(0,l.newError)(p,h);return this._handleFatalError(m),m},y}(c.default);e.default=g},9857:function(r,e,t){var n,i=this&&this.__extends||(n=function(s,u){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(l[f]=c[f])},n(s,u)},function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function l(){this.constructor=s}n(s,u),s.prototype=u===null?Object.create(u):(l.prototype=u.prototype,new l)}),o=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(s){function u(l,c){var f=s.call(this,c)||this;return c&&(f._originalErrorHandler=l._errorHandler,l._errorHandler=f._errorHandler),f._delegate=l,f}return i(u,s),u.prototype.beginTransaction=function(l){return this._delegate.beginTransaction(l)},u.prototype.run=function(l,c,f){return this._delegate.run(l,c,f)},u.prototype.commitTransaction=function(l){return this._delegate.commitTransaction(l)},u.prototype.rollbackTransaction=function(l){return this._delegate.rollbackTransaction(l)},u.prototype.getProtocolVersion=function(){return this._delegate.getProtocolVersion()},Object.defineProperty(u.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"databaseId",{get:function(){return this._delegate.databaseId},set:function(l){this._delegate.databaseId=l},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"server",{get:function(){return this._delegate.server},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"authToken",{get:function(){return this._delegate.authToken},set:function(l){this._delegate.authToken=l},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"supportsReAuth",{get:function(){return this._delegate.supportsReAuth},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"address",{get:function(){return this._delegate.address},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"version",{get:function(){return this._delegate.version},set:function(l){this._delegate.version=l},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"creationTimestamp",{get:function(){return this._delegate.creationTimestamp},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"idleTimestamp",{get:function(){return this._delegate.idleTimestamp},set:function(l){this._delegate.idleTimestamp=l},enumerable:!1,configurable:!0}),u.prototype.isOpen=function(){return this._delegate.isOpen()},u.prototype.protocol=function(){return this._delegate.protocol()},u.prototype.connect=function(l,c,f,h){return this._delegate.connect(l,c,f,h)},u.prototype.write=function(l,c,f){return this._delegate.write(l,c,f)},u.prototype.resetAndFlush=function(){return this._delegate.resetAndFlush()},u.prototype.hasOngoingObservableRequests=function(){return this._delegate.hasOngoingObservableRequests()},u.prototype.close=function(){return this._delegate.close()},u.prototype.release=function(){return this._originalErrorHandler&&(this._delegate._errorHandler=this._originalErrorHandler),this._delegate.release()},u}(o(t(6385)).default);e.default=a},2363:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=t(9305),i=n.error.SERVICE_UNAVAILABLE,o=n.error.SESSION_EXPIRED,a=function(){function u(l,c,f,h){this._errorCode=l,this._handleUnavailability=c||s,this._handleWriteFailure=f||s,this._handleSecurityError=h||s}return u.create=function(l){return new u(l.errorCode,l.handleUnavailability,l.handleWriteFailure,l.handleSecurityError)},u.prototype.errorCode=function(){return this._errorCode},u.prototype.handleAndTransformError=function(l,c,f){return function(h){return h!=null&&h.code!=null&&h.code.startsWith("Neo.ClientError.Security.")}(l)?this._handleSecurityError(l,c,f):function(h){return!!h&&(h.code===o||h.code===i||h.code==="Neo.TransientError.General.DatabaseUnavailable")}(l)?this._handleUnavailability(l,c,f):function(h){return!!h&&(h.code==="Neo.ClientError.Cluster.NotALeader"||h.code==="Neo.ClientError.General.ForbiddenOnReadOnlyDatabase")}(l)?this._handleWriteFailure(l,c,f):l},u}();function s(u){return u}e.default=a},6385:function(r,e,t){var n,i=this&&this.__extends||(n=function(a,s){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},n(a,s)},function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}n(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)});Object.defineProperty(e,"__esModule",{value:!0}),t(7666);var o=function(a){function s(u){var l=a.call(this)||this;return l._errorHandler=u,l}return i(s,a),Object.defineProperty(s.prototype,"id",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"databaseId",{get:function(){throw new Error("not implemented")},set:function(u){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"authToken",{get:function(){throw new Error("not implemented")},set:function(u){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"supportsReAuth",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"creationTimestamp",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"idleTimestamp",{get:function(){throw new Error("not implemented")},set:function(u){throw new Error("not implemented")},enumerable:!1,configurable:!0}),s.prototype.protocol=function(){throw new Error("not implemented")},Object.defineProperty(s.prototype,"address",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"version",{get:function(){throw new Error("not implemented")},set:function(u){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"server",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),s.prototype.connect=function(u,l,c,f){throw new Error("not implemented")},s.prototype.write=function(u,l,c){throw new Error("not implemented")},s.prototype.close=function(){throw new Error("not implemented")},s.prototype.handleAndTransformError=function(u,l){return this._errorHandler?this._errorHandler.handleAndTransformError(u,l,this):u},s}(t(9305).Connection);e.default=o},7721:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(f,h,d,v){v===void 0&&(v=d);var g=Object.getOwnPropertyDescriptor(h,d);g&&!("get"in g?!h.__esModule:g.writable||g.configurable)||(g={enumerable:!0,get:function(){return h[d]}}),Object.defineProperty(f,v,g)}:function(f,h,d,v){v===void 0&&(v=d),f[v]=h[d]}),i=this&&this.__setModuleDefault||(Object.create?function(f,h){Object.defineProperty(f,"default",{enumerable:!0,value:h})}:function(f,h){f.default=h}),o=this&&this.__importStar||function(f){if(f&&f.__esModule)return f;var h={};if(f!=null)for(var d in f)d!=="default"&&Object.prototype.hasOwnProperty.call(f,d)&&n(h,f,d);return i(h,f),h},a=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(e,"__esModule",{value:!0}),e.createChannelConnection=e.ConnectionErrorHandler=e.DelegateConnection=e.ChannelConnection=e.Connection=void 0;var s=a(t(6385));e.Connection=s.default;var u=o(t(8031));e.ChannelConnection=u.default,Object.defineProperty(e,"createChannelConnection",{enumerable:!0,get:function(){return u.createChannelConnection}});var l=a(t(9857));e.DelegateConnection=l.default;var c=a(t(2363));e.ConnectionErrorHandler=c.default,e.default=s.default},6672:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(s,u,l,c){c===void 0&&(c=l);var f=Object.getOwnPropertyDescriptor(u,l);f&&!("get"in f?!u.__esModule:f.writable||f.configurable)||(f={enumerable:!0,get:function(){return u[l]}}),Object.defineProperty(s,c,f)}:function(s,u,l,c){c===void 0&&(c=l),s[c]=u[l]}),i=this&&this.__setModuleDefault||(Object.create?function(s,u){Object.defineProperty(s,"default",{enumerable:!0,value:u})}:function(s,u){s.default=u}),o=this&&this.__importStar||function(s){if(s&&s.__esModule)return s;var u={};if(s!=null)for(var l in s)l!=="default"&&Object.prototype.hasOwnProperty.call(s,l)&&n(u,s,l);return i(u,s),u},a=this&&this.__exportStar||function(s,u){for(var l in s)l==="default"||Object.prototype.hasOwnProperty.call(u,l)||n(u,s,l)};Object.defineProperty(e,"__esModule",{value:!0}),e.packstream=e.channel=e.buf=e.bolt=e.loadBalancing=void 0,e.loadBalancing=o(t(4455)),e.bolt=o(t(7666)),e.buf=o(t(7174)),e.channel=o(t(7452)),e.packstream=o(t(7168)),a(t(9689),e)},6492:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reuseOngoingRequest=e.identity=void 0;var n=t(9305);e.identity=function(i){return i},e.reuseOngoingRequest=function(i,o){o===void 0&&(o=null);var a=new Map;return function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];var l=n.json.stringify(s);if(a.has(l))return a.get(l);var c=i.apply(o,s);return a.set(l,c),c.finally(function(){a.delete(l)})}}},6781:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(a,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);c&&!("get"in c?!s.__esModule:c.writable||c.configurable)||(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(a,l,c)}:function(a,s,u,l){l===void 0&&(l=u),a[l]=s[u]}),i=this&&this.__setModuleDefault||(Object.create?function(a,s){Object.defineProperty(a,"default",{enumerable:!0,value:s})}:function(a,s){a.default=s}),o=this&&this.__importStar||function(a){if(a&&a.__esModule)return a;var s={};if(a!=null)for(var u in a)u!=="default"&&Object.prototype.hasOwnProperty.call(a,u)&&n(s,a,u);return i(s,a),s};Object.defineProperty(e,"__esModule",{value:!0}),e.object=e.functional=void 0,e.functional=o(t(6492)),e.object=o(t(6702))},6702:function(r,e){var t=this&&this.__values||function(n){var i=typeof Symbol=="function"&&Symbol.iterator,o=i&&n[i],a=0;if(o)return o.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&a>=n.length&&(n=void 0),{value:n&&n[a++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.equals=void 0,e.equals=function(n,i){var o,a;if(n===i)return!0;if(n===null||i===null)return!1;if(typeof n=="object"&&typeof i=="object"){var s=Object.keys(n),u=Object.keys(i);if(s.length!==u.length)return!1;try{for(var l=t(s),c=l.next();!c.done;c=l.next()){var f=c.value;if(n[f]!==i[f])return!1}}catch(h){o={error:h}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(o)throw o.error}}return!0}return!1}},4455:function(r,e,t){var n=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.LeastConnectedLoadBalancingStrategy=e.LoadBalancingStrategy=void 0;var i=n(t(4311));e.LoadBalancingStrategy=i.default;var o=n(t(2533));e.LeastConnectedLoadBalancingStrategy=o.default,e.default=o.default},2533:function(r,e,t){var n,i=this&&this.__extends||(n=function(u,l){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(c[h]=f[h])},n(u,l)},function(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function c(){this.constructor=u}n(u,l),u.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)}),o=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(t(715)),s=function(u){function l(c){var f=u.call(this)||this;return f._readersIndex=new a.default,f._writersIndex=new a.default,f._connectionPool=c,f}return i(l,u),l.prototype.selectReader=function(c){return this._select(c,this._readersIndex)},l.prototype.selectWriter=function(c){return this._select(c,this._writersIndex)},l.prototype._select=function(c,f){var h=c.length;if(h===0)return null;var d=f.next(h),v=d,g=null,_=Number.MAX_SAFE_INTEGER;do{var y=c[v],p=this._connectionPool.activeResourceCount(y);p<_&&(g=y,_=p),v===h-1?v=0:v++}while(v!==d);return g},l}(o(t(4311)).default);e.default=s},4311:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function n(){}return n.prototype.selectReader=function(i){throw new Error("Abstract function")},n.prototype.selectWriter=function(i){throw new Error("Abstract function")},n}();e.default=t},715:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function n(i){this._offset=i||0}return n.prototype.next=function(i){if(i===0)return-1;var o=this._offset;return this._offset+=1,this._offset===Number.MAX_SAFE_INTEGER&&(this._offset=0),o%i},n}();e.default=t},7168:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(l,c,f,h){h===void 0&&(h=f);var d=Object.getOwnPropertyDescriptor(c,f);d&&!("get"in d?!c.__esModule:d.writable||d.configurable)||(d={enumerable:!0,get:function(){return c[f]}}),Object.defineProperty(l,h,d)}:function(l,c,f,h){h===void 0&&(h=f),l[h]=c[f]}),i=this&&this.__setModuleDefault||(Object.create?function(l,c){Object.defineProperty(l,"default",{enumerable:!0,value:c})}:function(l,c){l.default=c}),o=this&&this.__importStar||function(l){if(l&&l.__esModule)return l;var c={};if(l!=null)for(var f in l)f!=="default"&&Object.prototype.hasOwnProperty.call(l,f)&&n(c,l,f);return i(c,l),c};Object.defineProperty(e,"__esModule",{value:!0}),e.structure=e.v2=e.v1=void 0;var a=o(t(5361));e.v1=a;var s=o(t(2072));e.v2=s;var u=o(t(7665));e.structure=u,e.default=s},5361:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Unpacker=e.Packer=void 0;var n=t(7452),i=t(6781),o=t(7665),a=t(9305),s=a.error.PROTOCOL_ERROR,u=function(){function c(f){this._ch=f,this._byteArraysSupported=!0}return c.prototype.packable=function(f,h){var d,v=this;h===void 0&&(h=i.functional.identity);try{f=h(f)}catch(y){return function(){throw y}}if(f===null)return function(){return v._ch.writeUInt8(192)};if(f===!0)return function(){return v._ch.writeUInt8(195)};if(f===!1)return function(){return v._ch.writeUInt8(194)};if(typeof f=="number")return function(){return v.packFloat(f)};if(typeof f=="string")return function(){return v.packString(f)};if(typeof f=="bigint")return function(){return v.packInteger((0,a.int)(f))};if((0,a.isInt)(f))return function(){return v.packInteger(f)};if(f instanceof Int8Array)return function(){return v.packBytes(f)};if(f instanceof Array)return function(){v.packListHeader(f.length);for(var y=0;y<f.length;y++)v.packable(f[y]===void 0?null:f[y],h)()};if((d=f)!=null&&typeof d[Symbol.iterator]=="function")return this.packableIterable(f,h);if(f instanceof o.Structure){for(var g=[],_=0;_<f.fields.length;_++)g[_]=this.packable(f.fields[_],h);return function(){return v.packStruct(f.signature,g)}}return typeof f=="object"?function(){for(var y=Object.keys(f),p=0,m=0;m<y.length;m++)f[y[m]]!==void 0&&p++;for(v.packMapHeader(p),m=0;m<y.length;m++){var E=y[m];f[E]!==void 0&&(v.packString(E),v.packable(f[E],h)())}}:this._nonPackableValue("Unable to pack the given value: ".concat(f))},c.prototype.packableIterable=function(f,h){try{var d=Array.from(f);return this.packable(d,h)}catch(v){throw(0,a.newError)("Cannot pack given iterable, ".concat(v.message,": ").concat(f))}},c.prototype.packStruct=function(f,h){h=h||[],this.packStructHeader(h.length,f);for(var d=0;d<h.length;d++)h[d]()},c.prototype.packInteger=function(f){var h=f.high,d=f.low;f.greaterThanOrEqual(-16)&&f.lessThan(128)?this._ch.writeInt8(d):f.greaterThanOrEqual(-128)&&f.lessThan(-16)?(this._ch.writeUInt8(200),this._ch.writeInt8(d)):f.greaterThanOrEqual(-32768)&&f.lessThan(32768)?(this._ch.writeUInt8(201),this._ch.writeInt16(d)):f.greaterThanOrEqual(-2147483648)&&f.lessThan(2147483648)?(this._ch.writeUInt8(202),this._ch.writeInt32(d)):(this._ch.writeUInt8(203),this._ch.writeInt32(h),this._ch.writeInt32(d))},c.prototype.packFloat=function(f){this._ch.writeUInt8(193),this._ch.writeFloat64(f)},c.prototype.packString=function(f){var h=n.utf8.encode(f),d=h.length;if(d<16)this._ch.writeUInt8(128|d),this._ch.writeBytes(h);else if(d<256)this._ch.writeUInt8(208),this._ch.writeUInt8(d),this._ch.writeBytes(h);else if(d<65536)this._ch.writeUInt8(209),this._ch.writeUInt8(d/256>>0),this._ch.writeUInt8(d%256),this._ch.writeBytes(h);else{if(!(d<4294967296))throw(0,a.newError)("UTF-8 strings of size "+d+" are not supported");this._ch.writeUInt8(210),this._ch.writeUInt8((d/16777216>>0)%256),this._ch.writeUInt8((d/65536>>0)%256),this._ch.writeUInt8((d/256>>0)%256),this._ch.writeUInt8(d%256),this._ch.writeBytes(h)}},c.prototype.packListHeader=function(f){if(f<16)this._ch.writeUInt8(144|f);else if(f<256)this._ch.writeUInt8(212),this._ch.writeUInt8(f);else if(f<65536)this._ch.writeUInt8(213),this._ch.writeUInt8((f/256>>0)%256),this._ch.writeUInt8(f%256);else{if(!(f<4294967296))throw(0,a.newError)("Lists of size "+f+" are not supported");this._ch.writeUInt8(214),this._ch.writeUInt8((f/16777216>>0)%256),this._ch.writeUInt8((f/65536>>0)%256),this._ch.writeUInt8((f/256>>0)%256),this._ch.writeUInt8(f%256)}},c.prototype.packBytes=function(f){if(!this._byteArraysSupported)throw(0,a.newError)("Byte arrays are not supported by the database this driver is connected to");this.packBytesHeader(f.length);for(var h=0;h<f.length;h++)this._ch.writeInt8(f[h])},c.prototype.packBytesHeader=function(f){if(f<256)this._ch.writeUInt8(204),this._ch.writeUInt8(f);else if(f<65536)this._ch.writeUInt8(205),this._ch.writeUInt8((f/256>>0)%256),this._ch.writeUInt8(f%256);else{if(!(f<4294967296))throw(0,a.newError)("Byte arrays of size "+f+" are not supported");this._ch.writeUInt8(206),this._ch.writeUInt8((f/16777216>>0)%256),this._ch.writeUInt8((f/65536>>0)%256),this._ch.writeUInt8((f/256>>0)%256),this._ch.writeUInt8(f%256)}},c.prototype.packMapHeader=function(f){if(f<16)this._ch.writeUInt8(160|f);else if(f<256)this._ch.writeUInt8(216),this._ch.writeUInt8(f);else if(f<65536)this._ch.writeUInt8(217),this._ch.writeUInt8(f/256>>0),this._ch.writeUInt8(f%256);else{if(!(f<4294967296))throw(0,a.newError)("Maps of size "+f+" are not supported");this._ch.writeUInt8(218),this._ch.writeUInt8((f/16777216>>0)%256),this._ch.writeUInt8((f/65536>>0)%256),this._ch.writeUInt8((f/256>>0)%256),this._ch.writeUInt8(f%256)}},c.prototype.packStructHeader=function(f,h){if(f<16)this._ch.writeUInt8(176|f),this._ch.writeUInt8(h);else if(f<256)this._ch.writeUInt8(220),this._ch.writeUInt8(f),this._ch.writeUInt8(h);else{if(!(f<65536))throw(0,a.newError)("Structures of size "+f+" are not supported");this._ch.writeUInt8(221),this._ch.writeUInt8(f/256>>0),this._ch.writeUInt8(f%256)}},c.prototype.disableByteArrays=function(){this._byteArraysSupported=!1},c.prototype._nonPackableValue=function(f){return function(){throw(0,a.newError)(f,s)}},c}();e.Packer=u;var l=function(){function c(f,h){f===void 0&&(f=!1),h===void 0&&(h=!1),this._disableLosslessIntegers=f,this._useBigInt=h}return c.prototype.unpack=function(f,h){h===void 0&&(h=i.functional.identity);var d=f.readUInt8(),v=240&d,g=15&d;if(d===192)return null;var _=this._unpackBoolean(d);if(_!==null)return _;var y=this._unpackNumberOrInteger(d,f);if(y!==null){if((0,a.isInt)(y)){if(this._useBigInt)return y.toBigInt();if(this._disableLosslessIntegers)return y.toNumberOrInfinity()}return y}var p=this._unpackString(d,v,g,f);if(p!==null)return p;var m=this._unpackList(d,v,g,f,h);if(m!==null)return m;var E=this._unpackByteArray(d,f);if(E!==null)return E;var C=this._unpackMap(d,v,g,f,h);if(C!==null)return C;var P=this._unpackStruct(d,v,g,f,h);if(P!==null)return P;throw(0,a.newError)("Unknown packed value with marker "+d.toString(16))},c.prototype.unpackInteger=function(f){var h=f.readUInt8(),d=this._unpackInteger(h,f);if(d==null)throw(0,a.newError)("Unable to unpack integer value with marker "+h.toString(16));return d},c.prototype._unpackBoolean=function(f){return f===195||f!==194&&null},c.prototype._unpackNumberOrInteger=function(f,h){return f===193?h.readFloat64():this._unpackInteger(f,h)},c.prototype._unpackInteger=function(f,h){if(f>=0&&f<128)return(0,a.int)(f);if(f>=240&&f<256)return(0,a.int)(f-256);if(f===200)return(0,a.int)(h.readInt8());if(f===201)return(0,a.int)(h.readInt16());if(f===202){var d=h.readInt32();return(0,a.int)(d)}if(f===203){var v=h.readInt32(),g=h.readInt32();return new a.Integer(g,v)}return null},c.prototype._unpackString=function(f,h,d,v){return h===128?n.utf8.decode(v,d):f===208?n.utf8.decode(v,v.readUInt8()):f===209?n.utf8.decode(v,v.readUInt16()):f===210?n.utf8.decode(v,v.readUInt32()):null},c.prototype._unpackList=function(f,h,d,v,g){return h===144?this._unpackListWithSize(d,v,g):f===212?this._unpackListWithSize(v.readUInt8(),v,g):f===213?this._unpackListWithSize(v.readUInt16(),v,g):f===214?this._unpackListWithSize(v.readUInt32(),v,g):null},c.prototype._unpackListWithSize=function(f,h,d){for(var v=[],g=0;g<f;g++)v.push(this.unpack(h,d));return v},c.prototype._unpackByteArray=function(f,h){return f===204?this._unpackByteArrayWithSize(h.readUInt8(),h):f===205?this._unpackByteArrayWithSize(h.readUInt16(),h):f===206?this._unpackByteArrayWithSize(h.readUInt32(),h):null},c.prototype._unpackByteArrayWithSize=function(f,h){for(var d=new Int8Array(f),v=0;v<f;v++)d[v]=h.readInt8();return d},c.prototype._unpackMap=function(f,h,d,v,g){return h===160?this._unpackMapWithSize(d,v,g):f===216?this._unpackMapWithSize(v.readUInt8(),v,g):f===217?this._unpackMapWithSize(v.readUInt16(),v,g):f===218?this._unpackMapWithSize(v.readUInt32(),v,g):null},c.prototype._unpackMapWithSize=function(f,h,d){for(var v={},g=0;g<f;g++)v[this.unpack(h,d)]=this.unpack(h,d);return v},c.prototype._unpackStruct=function(f,h,d,v,g){return h===176?this._unpackStructWithSize(d,v,g):f===220?this._unpackStructWithSize(v.readUInt8(),v,g):f===221?this._unpackStructWithSize(v.readUInt16(),v,g):null},c.prototype._unpackStructWithSize=function(f,h,d){for(var v=h.readUInt8(),g=new o.Structure(v,[]),_=0;_<f;_++)g.fields.push(this.unpack(h,d));return d(g)},c}();e.Unpacker=l},2072:function(r,e,t){var n,i=this&&this.__extends||(n=function(f,h){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,v){d.__proto__=v}||function(d,v){for(var g in v)Object.prototype.hasOwnProperty.call(v,g)&&(d[g]=v[g])},n(f,h)},function(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function d(){this.constructor=f}n(f,h),f.prototype=h===null?Object.create(h):(d.prototype=h.prototype,new d)}),o=this&&this.__createBinding||(Object.create?function(f,h,d,v){v===void 0&&(v=d);var g=Object.getOwnPropertyDescriptor(h,d);g&&!("get"in g?!h.__esModule:g.writable||g.configurable)||(g={enumerable:!0,get:function(){return h[d]}}),Object.defineProperty(f,v,g)}:function(f,h,d,v){v===void 0&&(v=d),f[v]=h[d]}),a=this&&this.__setModuleDefault||(Object.create?function(f,h){Object.defineProperty(f,"default",{enumerable:!0,value:h})}:function(f,h){f.default=h}),s=this&&this.__importStar||function(f){if(f&&f.__esModule)return f;var h={};if(f!=null)for(var d in f)d!=="default"&&Object.prototype.hasOwnProperty.call(f,d)&&o(h,f,d);return a(h,f),h};Object.defineProperty(e,"__esModule",{value:!0}),e.Unpacker=e.Packer=void 0;var u=s(t(5361)),l=function(f){function h(){return f!==null&&f.apply(this,arguments)||this}return i(h,f),h.prototype.disableByteArrays=function(){throw new Error("Bolt V2 should always support byte arrays")},h}(u.Packer);e.Packer=l;var c=function(f){function h(d,v){return d===void 0&&(d=!1),v===void 0&&(v=!1),f.call(this,d,v)||this}return i(h,f),h}(u.Unpacker);e.Unpacker=c},7665:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.verifyStructSize=e.Structure=void 0;var n=t(9305),i=n.error.PROTOCOL_ERROR,o=function(){function a(s,u){this.signature=s,this.fields=u}return Object.defineProperty(a.prototype,"size",{get:function(){return this.fields.length},enumerable:!1,configurable:!0}),a.prototype.toString=function(){for(var s="",u=0;u<this.fields.length;u++)u>0&&(s+=", "),s+=this.fields[u];return"Structure("+this.signature+", ["+s+"])"},a}();e.Structure=o,e.verifyStructSize=function(a,s,u){if(s!==u)throw(0,n.newError)("Wrong struct size for ".concat(a,", expected ").concat(s," but was ").concat(u),i)},e.default=o},206:function(r,e,t){var n=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.RoutingTable=e.Rediscovery=void 0;var i=n(t(4151));e.Rediscovery=i.default;var o=n(t(9018));e.RoutingTable=o.default,e.default=i.default},4151:function(r,e,t){var n=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(t(9018)),o=(t(9305),function(){function a(s){this._routingContext=s}return a.prototype.lookupRoutingTableOnRouter=function(s,u,l,c){var f=this;return s._acquireConnection(function(h){return f._requestRawRoutingTable(h,s,u,l,c).then(function(d){return d.isNull?null:i.default.fromRawRoutingTable(u,l,d)})})},a.prototype._requestRawRoutingTable=function(s,u,l,c,f){var h=this;return new Promise(function(d,v){s.protocol().requestRoutingInformation({routingContext:h._routingContext,databaseName:l,impersonatedUser:f,sessionContext:{bookmarks:u._lastBookmarks,mode:u._mode,database:u._database,afterComplete:u._onComplete},onCompleted:d,onError:v})})},a}());e.default=o},9018:function(r,e,t){var n=this&&this.__read||function(_,y){var p=typeof Symbol=="function"&&_[Symbol.iterator];if(!p)return _;var m,E,C=p.call(_),P=[];try{for(;(y===void 0||y-- >0)&&!(m=C.next()).done;)P.push(m.value)}catch(T){E={error:T}}finally{try{m&&!m.done&&(p=C.return)&&p.call(C)}finally{if(E)throw E.error}}return P},i=this&&this.__spreadArray||function(_,y,p){if(p||arguments.length===2)for(var m,E=0,C=y.length;E<C;E++)!m&&E in y||(m||(m=Array.prototype.slice.call(y,0,E)),m[E]=y[E]);return _.concat(m||Array.prototype.slice.call(y))};Object.defineProperty(e,"__esModule",{value:!0}),e.createValidRoutingTable=void 0;var o=t(9305),a=o.internal.constants,s=a.ACCESS_MODE_WRITE,u=a.ACCESS_MODE_READ,l=o.internal.serverAddress.ServerAddress,c=o.error.PROTOCOL_ERROR,f=function(){function _(y){var p=y===void 0?{}:y,m=p.database,E=p.routers,C=p.readers,P=p.writers,T=p.expirationTime,R=p.ttl;this.database=m||null,this.databaseName=m||"default database",this.routers=E||[],this.readers=C||[],this.writers=P||[],this.expirationTime=T||(0,o.int)(0),this.ttl=R}return _.fromRawRoutingTable=function(y,p,m){return d(y,p,m)},_.prototype.forget=function(y){this.readers=h(this.readers,y),this.writers=h(this.writers,y)},_.prototype.forgetRouter=function(y){this.routers=h(this.routers,y)},_.prototype.forgetWriter=function(y){this.writers=h(this.writers,y)},_.prototype.isStaleFor=function(y){return this.expirationTime.lessThan(Date.now())||this.routers.length<1||y===u&&this.readers.length===0||y===s&&this.writers.length===0},_.prototype.isExpiredFor=function(y){return this.expirationTime.add(y).lessThan(Date.now())},_.prototype.allServers=function(){return i(i(i([],n(this.routers),!1),n(this.readers),!1),n(this.writers),!1)},_.prototype.toString=function(){return"RoutingTable["+"database=".concat(this.databaseName,", ")+"expirationTime=".concat(this.expirationTime,", ")+"currentTime=".concat(Date.now(),", ")+"routers=[".concat(this.routers,"], ")+"readers=[".concat(this.readers,"], ")+"writers=[".concat(this.writers,"]]")},_}();function h(_,y){return _.filter(function(p){return p.asKey()!==y.asKey()})}function d(_,y,p){var m=p.ttl,E=function(D,L){try{var j=(0,o.int)(Date.now()),F=(0,o.int)(D.ttl).multiply(1e3).add(j);return F.lessThan(j)?o.Integer.MAX_VALUE:F}catch(q){throw(0,o.newError)("Unable to parse TTL entry from router ".concat(L,` from raw routing table:
`).concat(o.json.stringify(D),`
Error message: `).concat(q.message),c)}}(p,y),C=function(D,L){try{var j=[],F=[],q=[];return D.servers.forEach(function(W){var Z=W.role,Q=W.addresses;Z==="ROUTE"?j=g(Q).map(function(re){return l.fromUrl(re)}):Z==="WRITE"?q=g(Q).map(function(re){return l.fromUrl(re)}):Z==="READ"&&(F=g(Q).map(function(re){return l.fromUrl(re)}))}),{routers:j,readers:F,writers:q}}catch(W){throw(0,o.newError)("Unable to parse servers entry from router ".concat(L,` from addresses:
`).concat(o.json.stringify(D.servers),`
Error message: `).concat(W.message),c)}}(p,y),P=C.routers,T=C.readers,R=C.writers;return v(P,"routers",y),v(T,"readers",y),new f({database:_||p.db,routers:P,readers:T,writers:R,expirationTime:E,ttl:m})}function v(_,y,p){if(_.length===0)throw(0,o.newError)("Received no "+y+" from router "+p,c)}function g(_){if(!Array.isArray(_))throw new TypeError("Array expected but got: "+_);return Array.from(_)}e.default=f,e.createValidRoutingTable=d},2069:function(r,e,t){var n=this&&this.__awaiter||function(d,v,g,_){return new(g||(g=Promise))(function(y,p){function m(P){try{C(_.next(P))}catch(T){p(T)}}function E(P){try{C(_.throw(P))}catch(T){p(T)}}function C(P){var T;P.done?y(P.value):(T=P.value,T instanceof g?T:new g(function(R){R(T)})).then(m,E)}C((_=_.apply(d,v||[])).next())})},i=this&&this.__generator||function(d,v){var g,_,y,p,m={label:0,sent:function(){if(1&y[0])throw y[1];return y[1]},trys:[],ops:[]};return p={next:E(0),throw:E(1),return:E(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function E(C){return function(P){return function(T){if(g)throw new TypeError("Generator is already executing.");for(;p&&(p=0,T[0]&&(m=0)),m;)try{if(g=1,_&&(y=2&T[0]?_.return:T[0]?_.throw||((y=_.return)&&y.call(_),0):_.next)&&!(y=y.call(_,T[1])).done)return y;switch(_=0,y&&(T=[2&T[0],y.value]),T[0]){case 0:case 1:y=T;break;case 4:return m.label++,{value:T[1],done:!1};case 5:m.label++,_=T[1],T=[0];continue;case 7:T=m.ops.pop(),m.trys.pop();continue;default:if(!((y=(y=m.trys).length>0&&y[y.length-1])||T[0]!==6&&T[0]!==2)){m=0;continue}if(T[0]===3&&(!y||T[1]>y[0]&&T[1]<y[3])){m.label=T[1];break}if(T[0]===6&&m.label<y[1]){m.label=y[1],y=T;break}if(y&&m.label<y[2]){m.label=y[2],m.ops.push(T);break}y[2]&&m.ops.pop(),m.trys.pop();continue}T=v.call(d,m)}catch(R){T=[6,R],_=0}finally{g=y=0}if(5&T[0])throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}([C,P])}}},o=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0}),e.staticAuthTokenManager=e.authTokenManagers=e.AuthTokenAndExpiration=void 0;var a=o(t(1967)),s=t(6995),u=function(){function d(){}return d.prototype.getToken=function(){throw new Error("Not Implemented")},d.prototype.handleSecurityException=function(v,g){throw new Error("Not implemented")},d}();e.default=u,e.AuthTokenAndExpiration=function(){this.token=a.default.none(),this.expiration=void 0};var l=new(function(){function d(){}return d.prototype.bearer=function(v){var g=v.tokenProvider;if(typeof g!="function")throw new TypeError("tokenProvider should be function, but got: ".concat(typeof g));return new f(g,["Neo.ClientError.Security.Unauthorized","Neo.ClientError.Security.TokenExpired"])},d.prototype.basic=function(v){var g=this,_=v.tokenProvider;if(typeof _!="function")throw new TypeError("tokenProvider should be function, but got: ".concat(typeof _));return new f(function(){return n(g,void 0,void 0,function(){var y;return i(this,function(p){switch(p.label){case 0:return y={},[4,_()];case 1:return[2,(y.token=p.sent(),y)]}})})},["Neo.ClientError.Security.Unauthorized"])},d}());e.authTokenManagers=l,Object.freeze(l),e.staticAuthTokenManager=function(d){var v=d.authToken;return new h(v)};var c=function(){function d(v){v===void 0&&(v=[]),this._subscribers=v}return d.prototype.subscribe=function(v){this._subscribers.push(v)},d.prototype.onCompleted=function(v){this._subscribers.forEach(function(g){return g.onCompleted(v)})},d.prototype.onError=function(v){this._subscribers.forEach(function(g){return g.onError(v)})},d}(),f=function(){function d(v,g,_,y){this._tokenProvider=v,this._handledSecurityCodes=g,this._currentAuthData=_,this._refreshObservable=y}return d.prototype.getToken=function(){var v;return n(this,void 0,void 0,function(){return i(this,function(g){switch(g.label){case 0:return this._currentAuthData===void 0||this._currentAuthData.expiration!==void 0&&this._currentAuthData.expiration<new Date?[4,this._refreshAuthToken()]:[3,2];case 1:g.sent(),g.label=2;case 2:return[2,(v=this._currentAuthData)===null||v===void 0?void 0:v.token]}})})},d.prototype.handleSecurityException=function(v,g){var _;return!!this._handledSecurityCodes.includes(g)&&(s.util.equals(v,(_=this._currentAuthData)===null||_===void 0?void 0:_.token)&&this._scheduleRefreshAuthToken(),!0)},d.prototype._scheduleRefreshAuthToken=function(v){var g=this;this._refreshObservable===void 0&&(this._currentAuthData=void 0,this._refreshObservable=new c,Promise.resolve(this._tokenProvider()).then(function(_){var y;g._currentAuthData=_,(y=g._refreshObservable)===null||y===void 0||y.onCompleted(_)}).catch(function(_){var y;(y=g._refreshObservable)===null||y===void 0||y.onError(_)}).finally(function(){g._refreshObservable=void 0})),v!==void 0&&this._refreshObservable.subscribe(v)},d.prototype._refreshAuthToken=function(){return n(this,void 0,void 0,function(){var v=this;return i(this,function(g){switch(g.label){case 0:return[4,new Promise(function(_,y){v._scheduleRefreshAuthToken({onCompleted:_,onError:y})})];case 1:return[2,g.sent()]}})})},d}(),h=function(){function d(v){this._authToken=v}return d.prototype.getToken=function(){return this._authToken},d.prototype.handleSecurityException=function(v,g){return!1},d}()},1967:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var t={basic:function(i,o,a){return a!=null?{scheme:"basic",principal:i,credentials:o,realm:a}:{scheme:"basic",principal:i,credentials:o}},kerberos:function(i){return{scheme:"kerberos",principal:"",credentials:i}},bearer:function(i){return{scheme:"bearer",credentials:i}},none:function(){return{scheme:"none"}},custom:function(i,o,a,s,u){var l={scheme:s,principal:i};return n(o)&&(l.credentials=o),n(a)&&(l.realm=a),n(u)&&(l.parameters=u),l}};function n(i){return!(i==null||i===""||Object.getPrototypeOf(i)===Object.prototype&&Object.keys(i).length===0)}e.default=t},6755:function(r,e){var t=this&&this.__awaiter||function(l,c,f,h){return new(f||(f=Promise))(function(d,v){function g(p){try{y(h.next(p))}catch(m){v(m)}}function _(p){try{y(h.throw(p))}catch(m){v(m)}}function y(p){var m;p.done?d(p.value):(m=p.value,m instanceof f?m:new f(function(E){E(m)})).then(g,_)}y((h=h.apply(l,c||[])).next())})},n=this&&this.__generator||function(l,c){var f,h,d,v,g={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return v={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function _(y){return function(p){return function(m){if(f)throw new TypeError("Generator is already executing.");for(;v&&(v=0,m[0]&&(g=0)),g;)try{if(f=1,h&&(d=2&m[0]?h.return:m[0]?h.throw||((d=h.return)&&d.call(h),0):h.next)&&!(d=d.call(h,m[1])).done)return d;switch(h=0,d&&(m=[2&m[0],d.value]),m[0]){case 0:case 1:d=m;break;case 4:return g.label++,{value:m[1],done:!1};case 5:g.label++,h=m[1],m=[0];continue;case 7:m=g.ops.pop(),g.trys.pop();continue;default:if(!((d=(d=g.trys).length>0&&d[d.length-1])||m[0]!==6&&m[0]!==2)){g=0;continue}if(m[0]===3&&(!d||m[1]>d[0]&&m[1]<d[3])){g.label=m[1];break}if(m[0]===6&&g.label<d[1]){g.label=d[1],d=m;break}if(d&&g.label<d[2]){g.label=d[2],g.ops.push(m);break}d[2]&&g.ops.pop(),g.trys.pop();continue}m=c.call(l,g)}catch(E){m=[6,E],h=0}finally{f=d=0}if(5&m[0])throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}([y,p])}}},i=this&&this.__values||function(l){var c=typeof Symbol=="function"&&Symbol.iterator,f=c&&l[c],h=0;if(f)return f.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&h>=l.length&&(l=void 0),{value:l&&l[h++],done:!l}}};throw new TypeError(c?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(l,c){var f=typeof Symbol=="function"&&l[Symbol.iterator];if(!f)return l;var h,d,v=f.call(l),g=[];try{for(;(c===void 0||c-- >0)&&!(h=v.next()).done;)g.push(h.value)}catch(_){d={error:_}}finally{try{h&&!h.done&&(f=v.return)&&f.call(v)}finally{if(d)throw d.error}}return g},a=this&&this.__spreadArray||function(l,c,f){if(f||arguments.length===2)for(var h,d=0,v=c.length;d<v;d++)!h&&d in c||(h||(h=Array.prototype.slice.call(c,0,d)),h[d]=c[d]);return l.concat(h||Array.prototype.slice.call(c))};Object.defineProperty(e,"__esModule",{value:!0}),e.bookmarkManager=void 0;var s=function(){function l(){throw new Error("Not implemented")}return l.prototype.updateBookmarks=function(c,f){return t(this,void 0,void 0,function(){return n(this,function(h){throw new Error("Not implemented")})})},l.prototype.getBookmarks=function(){return t(this,void 0,void 0,function(){return n(this,function(c){throw new Error("Not implemented")})})},l}();e.default=s,e.bookmarkManager=function(l){l===void 0&&(l={});var c=new Set(l.initialBookmarks);return new u(c,l.bookmarksSupplier,l.bookmarksConsumer)};var u=function(){function l(c,f,h){this._bookmarks=c,this._bookmarksSupplier=f,this._bookmarksConsumer=h}return l.prototype.updateBookmarks=function(c,f){return t(this,void 0,void 0,function(){var h,d,v,g,_,y,p,m,E,C;return n(this,function(P){switch(P.label){case 0:h=this._bookmarks;try{for(d=i(c),v=d.next();!v.done;v=d.next())y=v.value,h.delete(y)}catch(T){p={error:T}}finally{try{v&&!v.done&&(m=d.return)&&m.call(d)}finally{if(p)throw p.error}}try{for(g=i(f),_=g.next();!_.done;_=g.next())y=_.value,h.add(y)}catch(T){E={error:T}}finally{try{_&&!_.done&&(C=g.return)&&C.call(g)}finally{if(E)throw E.error}}return typeof this._bookmarksConsumer!="function"?[3,2]:[4,this._bookmarksConsumer(a([],o(h),!1))];case 1:P.sent(),P.label=2;case 2:return[2]}})})},l.prototype.getBookmarks=function(){var c;return t(this,void 0,void 0,function(){var f,h,d,v,g,_,y;return n(this,function(p){switch(p.label){case 0:return f=new Set(this._bookmarks),typeof this._bookmarksSupplier!="function"?[3,2]:[4,this._bookmarksSupplier()];case 1:h=(c=p.sent())!==null&&c!==void 0?c:[];try{for(d=i(h),v=d.next();!v.done;v=d.next())g=v.value,f.add(g)}catch(m){_={error:m}}finally{try{v&&!v.done&&(y=d.return)&&y.call(d)}finally{if(_)throw _.error}}p.label=2;case 2:return[2,a([],o(f),!1)]}})})},l}()},8264:function(r,e,t){var n,i=this&&this.__extends||(n=function(p,m){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,C){E.__proto__=C}||function(E,C){for(var P in C)Object.prototype.hasOwnProperty.call(C,P)&&(E[P]=C[P])},n(p,m)},function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function E(){this.constructor=p}n(p,m),p.prototype=m===null?Object.create(m):(E.prototype=m.prototype,new E)}),o=this&&this.__assign||function(){return o=Object.assign||function(p){for(var m,E=1,C=arguments.length;E<C;E++)for(var P in m=arguments[E])Object.prototype.hasOwnProperty.call(m,P)&&(p[P]=m[P]);return p},o.apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(p,m,E,C){C===void 0&&(C=E);var P=Object.getOwnPropertyDescriptor(m,E);P&&!("get"in P?!m.__esModule:P.writable||P.configurable)||(P={enumerable:!0,get:function(){return m[E]}}),Object.defineProperty(p,C,P)}:function(p,m,E,C){C===void 0&&(C=E),p[C]=m[E]}),s=this&&this.__setModuleDefault||(Object.create?function(p,m){Object.defineProperty(p,"default",{enumerable:!0,value:m})}:function(p,m){p.default=m}),u=this&&this.__importStar||function(p){if(p&&p.__esModule)return p;var m={};if(p!=null)for(var E in p)E!=="default"&&Object.prototype.hasOwnProperty.call(p,E)&&a(m,p,E);return s(m,p),m};Object.defineProperty(e,"__esModule",{value:!0}),e.resolveCertificateProvider=e.clientCertificateProviders=e.RotatingClientCertificateProvider=e.ClientCertificateProvider=void 0;var l=u(t(4027));e.default=function(){this.certfile="",this.keyfile="",this.password=void 0};var c=function(){function p(){}return p.prototype.hasUpdate=function(){throw new Error("Not Implemented")},p.prototype.getClientCertificate=function(){throw new Error("Not Implemented")},p}();e.ClientCertificateProvider=c;var f=function(p){function m(){return p!==null&&p.apply(this,arguments)||this}return i(m,p),m.prototype.updateCertificate=function(E){throw new Error("Not implemented")},m}(c);e.RotatingClientCertificateProvider=f;var h=new(function(){function p(){}return p.prototype.rotating=function(m){var E=m.initialCertificate;if(E==null||!d(E))throw new TypeError("initialCertificate should be ClientCertificate, but got ".concat(l.stringify(E)));var C=o({},E);return new y(C)},p}());function d(p){return p!=null&&typeof p=="object"&&"certfile"in p&&(v(m=p.certfile)||g(m,v))&&"keyfile"in p&&function(E){function C(P){return typeof P=="string"||P!=null&&typeof P=="object"&&"path"in P&&typeof P.path=="string"&&_("password",P)}return C(E)||g(E,C)}(p.keyfile)&&_("password",p);var m}function v(p){return typeof p=="string"}function g(p,m,E){return E===void 0&&(E=!1),Array.isArray(p)&&(E||p.length>0)&&p.filter(m).length===p.length}function _(p,m){return!(p in m)||m[p]==null||typeof m[p]=="string"}e.clientCertificateProviders=h,Object.freeze(h),e.resolveCertificateProvider=function(p){if(p!=null){if(typeof p=="object"&&"hasUpdate"in p&&"getClientCertificate"in p&&typeof p.getClientCertificate=="function"&&typeof p.hasUpdate=="function")return p;if(d(p)){var m=o({},p);return{getClientCertificate:function(){return m},hasUpdate:function(){return!1}}}throw new TypeError("clientCertificate should be configured with ClientCertificate or ClientCertificateProvider, but got ".concat(l.stringify(p)))}};var y=function(){function p(m,E){E===void 0&&(E=!1),this._certificate=m,this._updated=E}return p.prototype.hasUpdate=function(){try{return this._updated}finally{this._updated=!1}},p.prototype.getClientCertificate=function(){return this._certificate},p.prototype.updateCertificate=function(m){if(!d(m))throw new TypeError("certificate should be ClientCertificate, but got ".concat(l.stringify(m)));this._certificate=o({},m),this._updated=!0},p}()},2007:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Releasable=void 0;var t=function(){function i(){}return i.prototype.release=function(){throw new Error("Not implemented")},i}();e.Releasable=t;var n=function(){function i(){}return i.prototype.acquireConnection=function(o){throw Error("Not implemented")},i.prototype.supportsMultiDb=function(){throw Error("Not implemented")},i.prototype.supportsTransactionConfig=function(){throw Error("Not implemented")},i.prototype.supportsUserImpersonation=function(){throw Error("Not implemented")},i.prototype.supportsSessionAuth=function(){throw Error("Not implemented")},i.prototype.verifyConnectivityAndGetServerInfo=function(o){throw Error("Not implemented")},i.prototype.verifyAuthentication=function(o){throw Error("Not implemented")},i.prototype.getNegotiatedProtocolVersion=function(){throw Error("Not Implemented")},i.prototype.close=function(){throw Error("Not implemented")},i}();e.default=n},1409:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function n(){}return n.prototype.beginTransaction=function(i){throw new Error("Not implemented")},n.prototype.run=function(i,o,a){throw new Error("Not implemented")},n.prototype.commitTransaction=function(i){throw new Error("Not implemented")},n.prototype.rollbackTransaction=function(i){throw new Error("Not implemented")},n.prototype.resetAndFlush=function(){throw new Error("Not implemented")},n.prototype.isOpen=function(){throw new Error("Not implemented")},n.prototype.getProtocolVersion=function(){throw new Error("Not implemented")},n.prototype.hasOngoingObservableRequests=function(){throw new Error("Not implemented")},n}();e.default=t},7264:function(r,e,t){var n=this&&this.__awaiter||function(T,R,D,L){return new(D||(D=Promise))(function(j,F){function q(Q){try{Z(L.next(Q))}catch(re){F(re)}}function W(Q){try{Z(L.throw(Q))}catch(re){F(re)}}function Z(Q){var re;Q.done?j(Q.value):(re=Q.value,re instanceof D?re:new D(function(ee){ee(re)})).then(q,W)}Z((L=L.apply(T,R||[])).next())})},i=this&&this.__generator||function(T,R){var D,L,j,F,q={label:0,sent:function(){if(1&j[0])throw j[1];return j[1]},trys:[],ops:[]};return F={next:W(0),throw:W(1),return:W(2)},typeof Symbol=="function"&&(F[Symbol.iterator]=function(){return this}),F;function W(Z){return function(Q){return function(re){if(D)throw new TypeError("Generator is already executing.");for(;F&&(F=0,re[0]&&(q=0)),q;)try{if(D=1,L&&(j=2&re[0]?L.return:re[0]?L.throw||((j=L.return)&&j.call(L),0):L.next)&&!(j=j.call(L,re[1])).done)return j;switch(L=0,j&&(re=[2&re[0],j.value]),re[0]){case 0:case 1:j=re;break;case 4:return q.label++,{value:re[1],done:!1};case 5:q.label++,L=re[1],re=[0];continue;case 7:re=q.ops.pop(),q.trys.pop();continue;default:if(!((j=(j=q.trys).length>0&&j[j.length-1])||re[0]!==6&&re[0]!==2)){q=0;continue}if(re[0]===3&&(!j||re[1]>j[0]&&re[1]<j[3])){q.label=re[1];break}if(re[0]===6&&q.label<j[1]){q.label=j[1],j=re;break}if(j&&q.label<j[2]){q.label=j[2],q.ops.push(re);break}j[2]&&q.ops.pop(),q.trys.pop();continue}re=R.call(T,q)}catch(ee){re=[6,ee],L=0}finally{D=j=0}if(5&re[0])throw re[1];return{value:re[0]?re[1]:void 0,done:!0}}([Z,Q])}}},o=this&&this.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(e,"__esModule",{value:!0}),e.QueryConfig=e.SessionConfig=e.routing=e.WRITE=e.READ=e.Driver=void 0;var a=t(9730),s=o(t(8341)),u=t(326),l=t(4883),c=o(t(5481)),f=t(6587),h=t(6755),d=o(t(1573)),v=o(t(7041)),g=t(9691),_=u.ACCESS_MODE_READ;e.READ=_;var y=u.ACCESS_MODE_WRITE;e.WRITE=y;var p=0;e.SessionConfig=function(){this.defaultAccessMode=y,this.bookmarks=[],this.database="",this.impersonatedUser=void 0,this.auth=void 0,this.fetchSize=void 0,this.bookmarkManager=void 0,this.notificationFilter=void 0};var m={WRITE:"WRITE",READ:"READ"};e.routing=m,Object.freeze(m),e.QueryConfig=function(){this.routing=m.WRITE,this.resultTransformer=void 0,this.database="",this.impersonatedUser=void 0,this.bookmarkManager=void 0,this.transactionConfig=void 0,this.auth=void 0,this.signal=void 0};var E=function(){function T(R,D,L,j,F){D===void 0&&(D={}),j===void 0&&(j=function(W){return new c.default(W)}),F===void 0&&(F=function(W){return new v.default(W)}),function(W){W.maxConnectionLifetime=C(W.maxConnectionLifetime,36e5),W.maxConnectionPoolSize=C(W.maxConnectionPoolSize,u.DEFAULT_POOL_MAX_SIZE),W.connectionAcquisitionTimeout=C(W.connectionAcquisitionTimeout,u.DEFAULT_POOL_ACQUISITION_TIMEOUT),W.fetchSize=P(W.fetchSize,1e3),W.connectionTimeout=function(Z){var Q=parseInt(Z.connectionTimeout,10);return Q===0||!isNaN(Q)&&Q<0?null:isNaN(Q)?u.DEFAULT_CONNECTION_TIMEOUT_MILLIS:Q}(W),W.connectionLivenessCheckTimeout=function(Z){if(Z!=null){var Q=parseInt(Z,10);if(Q<0||Number.isNaN(Q))throw new Error("The connectionLivenessCheckTimeout can only be a positive value or 0 for always. However connectionLivenessCheckTimeout = ".concat(Q));return Q}}(W.connectionLivenessCheckTimeout)}(D);var q=l.Logger.create(D);(function(W,Z){var Q,re,ee=W.resolver;if(ee!=null&&typeof ee!="function")throw new TypeError("Configured resolver should be a function. Got: ".concat(typeof ee));if(W.connectionAcquisitionTimeout<W.connectionTimeout&&Z.warn('Configuration for "connectionAcquisitionTimeout" should be greater than or equal to "connectionTimeout". Otherwise, the connection acquisition timeout will take precedence for over the connection timeout in scenarios where a new connection is created while it is acquired'),((Q=W.notificationFilter)===null||Q===void 0?void 0:Q.disabledCategories)!=null&&((re=W.notificationFilter)===null||re===void 0?void 0:re.disabledClassifications)!=null)throw new Error(`The notificationFilter can't have both "disabledCategories" and  "disabledClassifications" configured at the same time.`)})(D,q),this._id=p++,this._meta=R,this._config=D,this._log=q,this._createConnectionProvider=L,this._createSession=j,this._defaultExecuteQueryBookmarkManager=(0,h.bookmarkManager)(),this._queryExecutor=F(this.session.bind(this)),this._connectionProvider=null,this._afterConstruction()}return Object.defineProperty(T.prototype,"executeQueryBookmarkManager",{get:function(){return this._defaultExecuteQueryBookmarkManager},enumerable:!1,configurable:!0}),T.prototype.executeQuery=function(R,D,L){var j,F,q;return L===void 0&&(L={}),n(this,void 0,void 0,function(){var W,Z,Q;return i(this,function(re){switch(re.label){case 0:if(W=L.bookmarkManager===null?void 0:(j=L.bookmarkManager)!==null&&j!==void 0?j:this.executeQueryBookmarkManager,Z=(F=L.resultTransformer)!==null&&F!==void 0?F:d.default.eagerResultTransformer(),(Q=(q=L.routing)!==null&&q!==void 0?q:m.WRITE)!==m.READ&&Q!==m.WRITE)throw(0,g.newError)('Illegal query routing config: "'.concat(Q,'"'));return[4,this._queryExecutor.execute({resultTransformer:Z,bookmarkManager:W,routing:Q,database:L.database,impersonatedUser:L.impersonatedUser,transactionConfig:L.transactionConfig,auth:L.auth,signal:L.signal},R,D)];case 1:return[2,re.sent()]}})})},T.prototype.verifyConnectivity=function(R){var D=(R===void 0?{}:R).database,L=D===void 0?"":D;return this._getOrCreateConnectionProvider().verifyConnectivityAndGetServerInfo({database:L,accessMode:_})},T.prototype.verifyAuthentication=function(R){var D=R===void 0?{}:R,L=D.database,j=D.auth;return n(this,void 0,void 0,function(){return i(this,function(F){switch(F.label){case 0:return[4,this._getOrCreateConnectionProvider().verifyAuthentication({database:L??"system",auth:j,accessMode:_})];case 1:return[2,F.sent()]}})})},T.prototype.getServerInfo=function(R){var D=(R===void 0?{}:R).database,L=D===void 0?"":D;return this._getOrCreateConnectionProvider().verifyConnectivityAndGetServerInfo({database:L,accessMode:_})},T.prototype.supportsMultiDb=function(){return this._getOrCreateConnectionProvider().supportsMultiDb()},T.prototype.supportsTransactionConfig=function(){return this._getOrCreateConnectionProvider().supportsTransactionConfig()},T.prototype.supportsUserImpersonation=function(){return this._getOrCreateConnectionProvider().supportsUserImpersonation()},T.prototype.supportsSessionAuth=function(){return this._getOrCreateConnectionProvider().supportsSessionAuth()},T.prototype.getNegotiatedProtocolVersion=function(){return this._getOrCreateConnectionProvider().getNegotiatedProtocolVersion()},T.prototype.isEncrypted=function(){return this._isEncrypted()},T.prototype._supportsRouting=function(){return this._meta.routing},T.prototype._isEncrypted=function(){return this._config.encrypted===f.ENCRYPTION_ON||this._config.encrypted===!0},T.prototype._getTrust=function(){return this._config.trust},T.prototype.session=function(R){var D=R===void 0?{}:R,L=D.defaultAccessMode,j=L===void 0?y:L,F=D.bookmarks,q=D.database,W=q===void 0?"":q,Z=D.impersonatedUser,Q=D.fetchSize,re=D.bookmarkManager,ee=D.notificationFilter,ue=D.auth;return this._newSession({defaultAccessMode:j,bookmarkOrBookmarks:F,database:W,reactive:!1,impersonatedUser:Z,fetchSize:P(Q,this._config.fetchSize),bookmarkManager:re,notificationFilter:ee,auth:ue})},T.prototype.close=function(){return this._log.info("Driver ".concat(this._id," closing")),this._connectionProvider!=null?this._connectionProvider.close():Promise.resolve()},T.prototype[Symbol.asyncDispose]=function(){return this.close()},T.prototype._afterConstruction=function(){this._log.info("".concat(this._meta.typename," driver ").concat(this._id," created for server address ").concat(this._meta.address.toString()))},T.prototype._newSession=function(R){var D=R.defaultAccessMode,L=R.bookmarkOrBookmarks,j=R.database,F=R.reactive,q=R.impersonatedUser,W=R.fetchSize,Z=R.bookmarkManager,Q=R.notificationFilter,re=R.auth,ee=c.default._validateSessionMode(D),ue=this._getOrCreateConnectionProvider(),de=L!=null?new a.Bookmarks(L):a.Bookmarks.empty();return this._createSession({mode:ee,database:j??"",connectionProvider:ue,bookmarks:de,config:this._config,reactive:F,impersonatedUser:q,fetchSize:W,bookmarkManager:Z,notificationFilter:Q,auth:re,log:this._log})},T.prototype._getOrCreateConnectionProvider=function(){var R;return this._connectionProvider==null&&(this._connectionProvider=this._createConnectionProvider(this._id,this._config,this._log,(R=this._config,new s.default(R.resolver)))),this._connectionProvider},T}();function C(T,R){var D=parseInt(T,10);return D>0||D===0?D:D<0?Number.MAX_SAFE_INTEGER:R}function P(T,R){var D=parseInt(T,10);if(D>0||D===u.FETCH_ALL)return D;if(D===0||D<0)throw new Error("The fetch size can only be a positive value or ".concat(u.FETCH_ALL," for ALL. However fetchSize = ").concat(D));return R}e.Driver=E,e.default=E},9691:function(r,e,t){var n,i=this&&this.__extends||(n=function(y,p){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,E){m.__proto__=E}||function(m,E){for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&(m[C]=E[C])},n(y,p)},function(y,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");function m(){this.constructor=y}n(y,p),y.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}),o=this&&this.__createBinding||(Object.create?function(y,p,m,E){E===void 0&&(E=m);var C=Object.getOwnPropertyDescriptor(p,m);C&&!("get"in C?!p.__esModule:C.writable||C.configurable)||(C={enumerable:!0,get:function(){return p[m]}}),Object.defineProperty(y,E,C)}:function(y,p,m,E){E===void 0&&(E=m),y[E]=p[m]}),a=this&&this.__setModuleDefault||(Object.create?function(y,p){Object.defineProperty(y,"default",{enumerable:!0,value:p})}:function(y,p){y.default=p}),s=this&&this.__importStar||function(y){if(y&&y.__esModule)return y;var p={};if(y!=null)for(var m in y)m!=="default"&&Object.prototype.hasOwnProperty.call(y,m)&&o(p,y,m);return a(p,y),p};Object.defineProperty(e,"__esModule",{value:!0}),e.PROTOCOL_ERROR=e.SESSION_EXPIRED=e.SERVICE_UNAVAILABLE=e.GQLError=e.Neo4jError=e.isRetriableError=e.newGQLError=e.newError=void 0;var u=s(t(4027)),l=t(1053),c={DATABASE_ERROR:"DATABASE_ERROR",CLIENT_ERROR:"CLIENT_ERROR",TRANSIENT_ERROR:"TRANSIENT_ERROR",UNKNOWN:"UNKNOWN"};Object.freeze(c);var f=Object.values(c),h="ServiceUnavailable";e.SERVICE_UNAVAILABLE=h;var d="SessionExpired";e.SESSION_EXPIRED=d,e.PROTOCOL_ERROR="ProtocolError";var v=function(y){function p(m,E,C,P,T){var R,D=this;return(D=y.call(this,m,T!=null?{cause:T}:void 0)||this).constructor=p,D.__proto__=p.prototype,D.cause=T??void 0,D.gqlStatus=E,D.gqlStatusDescription=C,D.diagnosticRecord=P,D.classification=function(L){return L===void 0||L._classification===void 0?"UNKNOWN":f.includes(L._classification)?L==null?void 0:L._classification:"UNKNOWN"}(D.diagnosticRecord),D.rawClassification=(R=P==null?void 0:P._classification)!==null&&R!==void 0?R:void 0,D.name="GQLError",D}return i(p,y),Object.defineProperty(p.prototype,"diagnosticRecordAsJsonString",{get:function(){return u.stringify(this.diagnosticRecord,{useCustomToString:!0})},enumerable:!1,configurable:!0}),p}(Error);e.GQLError=v;var g=function(y){function p(m,E,C,P,T,R){var D=y.call(this,m,C,P,T,R)||this;return D.constructor=p,D.__proto__=p.prototype,D.code=E,D.name="Neo4jError",D.retriable=function(L){return L===h||L===d||function(j){return j==="Neo.ClientError.Security.AuthorizationExpired"}(L)||function(j){return(j==null?void 0:j.includes("TransientError"))===!0}(L)}(E),D}return i(p,y),p.isRetriable=function(m){return m!=null&&m instanceof p&&m.retriable},p}(v);e.Neo4jError=g,e.newError=function(y,p,m,E,C,P){return new g(y,p??"N/A",E??"50N42",C??"error: general processing exception - unexpected error. "+y,P??l.rawPolyfilledDiagnosticRecord,m)},e.newGQLError=function(y,p,m,E,C){return new v(y,m??"50N42",E??"error: general processing exception - unexpected error. "+y,C??l.rawPolyfilledDiagnosticRecord,p)};var _=g.isRetriable;e.isRetriableError=_},1053:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.rawPolyfilledDiagnosticRecord=void 0,e.rawPolyfilledDiagnosticRecord={OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"},Object.freeze(e.rawPolyfilledDiagnosticRecord)},1517:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isPathSegment=e.PathSegment=e.isPath=e.Path=e.isUnboundRelationship=e.UnboundRelationship=e.isRelationship=e.Relationship=e.isNode=e.Node=void 0;var n=t(4027),i={value:!0,enumerable:!1,configurable:!1,writable:!1},o="__isNode__",a="__isRelationship__",s="__isUnboundRelationship__",u="__isPath__",l="__isPathSegment__";function c(y,p){return y!=null&&y[p]===!0}var f=function(){function y(p,m,E,C){this.identity=p,this.labels=m,this.properties=E,this.elementId=_(C,function(){return p.toString()})}return y.prototype.toString=function(){for(var p="("+this.elementId,m=0;m<this.labels.length;m++)p+=":"+this.labels[m];var E=Object.keys(this.properties);if(E.length>0){for(p+=" {",m=0;m<E.length;m++)m>0&&(p+=","),p+=E[m]+":"+(0,n.stringify)(this.properties[E[m]]);p+="}"}return p+")"},y}();e.Node=f,Object.defineProperty(f.prototype,o,i),e.isNode=function(y){return c(y,o)};var h=function(){function y(p,m,E,C,P,T,R,D){this.identity=p,this.start=m,this.end=E,this.type=C,this.properties=P,this.elementId=_(T,function(){return p.toString()}),this.startNodeElementId=_(R,function(){return m.toString()}),this.endNodeElementId=_(D,function(){return E.toString()})}return y.prototype.toString=function(){var p="("+this.startNodeElementId+")-[:"+this.type,m=Object.keys(this.properties);if(m.length>0){p+=" {";for(var E=0;E<m.length;E++)E>0&&(p+=","),p+=m[E]+":"+(0,n.stringify)(this.properties[m[E]]);p+="}"}return p+"]->("+this.endNodeElementId+")"},y}();e.Relationship=h,Object.defineProperty(h.prototype,a,i),e.isRelationship=function(y){return c(y,a)};var d=function(){function y(p,m,E,C){this.identity=p,this.type=m,this.properties=E,this.elementId=_(C,function(){return p.toString()})}return y.prototype.bind=function(p,m){return new h(this.identity,p,m,this.type,this.properties,this.elementId)},y.prototype.bindTo=function(p,m){return new h(this.identity,p.identity,m.identity,this.type,this.properties,this.elementId,p.elementId,m.elementId)},y.prototype.toString=function(){var p="-[:"+this.type,m=Object.keys(this.properties);if(m.length>0){p+=" {";for(var E=0;E<m.length;E++)E>0&&(p+=","),p+=m[E]+":"+(0,n.stringify)(this.properties[m[E]]);p+="}"}return p+"]->"},y}();e.UnboundRelationship=d,Object.defineProperty(d.prototype,s,i),e.isUnboundRelationship=function(y){return c(y,s)};var v=function(y,p,m){this.start=y,this.relationship=p,this.end=m};e.PathSegment=v,Object.defineProperty(v.prototype,l,i),e.isPathSegment=function(y){return c(y,l)};var g=function(y,p,m){this.start=y,this.end=p,this.segments=m,this.length=m.length};function _(y,p){return y??p()}e.Path=g,Object.defineProperty(g.prototype,u,i),e.isPath=function(y){return c(y,u)}},9305:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(se,be,Le,fe){fe===void 0&&(fe=Le);var ce=Object.getOwnPropertyDescriptor(be,Le);ce&&!("get"in ce?!be.__esModule:ce.writable||ce.configurable)||(ce={enumerable:!0,get:function(){return be[Le]}}),Object.defineProperty(se,fe,ce)}:function(se,be,Le,fe){fe===void 0&&(fe=Le),se[fe]=be[Le]}),i=this&&this.__setModuleDefault||(Object.create?function(se,be){Object.defineProperty(se,"default",{enumerable:!0,value:be})}:function(se,be){se.default=be}),o=this&&this.__importStar||function(se){if(se&&se.__esModule)return se;var be={};if(se!=null)for(var Le in se)Le!=="default"&&Object.prototype.hasOwnProperty.call(se,Le)&&n(be,se,Le);return i(be,se),be},a=this&&this.__importDefault||function(se){return se&&se.__esModule?se:{default:se}};Object.defineProperty(e,"__esModule",{value:!0}),e.EagerResult=e.Result=e.Stats=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.GqlStatusObject=e.Notification=e.ServerInfo=e.queryType=e.ResultSummary=e.Record=e.isPathSegment=e.PathSegment=e.isPath=e.Path=e.isUnboundRelationship=e.UnboundRelationship=e.isRelationship=e.Relationship=e.isNode=e.Node=e.Time=e.LocalTime=e.LocalDateTime=e.isTime=e.isLocalTime=e.isLocalDateTime=e.isDuration=e.isDateTime=e.isDate=e.Duration=e.DateTime=e.Date=e.Point=e.isPoint=e.internal=e.toString=e.toNumber=e.inSafeRange=e.isInt=e.int=e.Integer=e.error=e.isRetriableError=e.GQLError=e.newGQLError=e.Neo4jError=e.newError=e.authTokenManagers=void 0,e.resolveCertificateProvider=e.clientCertificateProviders=e.notificationFilterMinimumSeverityLevel=e.notificationFilterDisabledClassification=e.notificationFilterDisabledCategory=e.notificationSeverityLevel=e.notificationClassification=e.notificationCategory=e.resultTransformers=e.routing=e.staticAuthTokenManager=e.bookmarkManager=e.auth=e.json=e.driver=e.types=e.Driver=e.Session=e.TransactionPromise=e.ManagedTransaction=e.Transaction=e.Connection=e.Releasable=e.ConnectionProvider=void 0;var s=t(9691);Object.defineProperty(e,"newError",{enumerable:!0,get:function(){return s.newError}}),Object.defineProperty(e,"Neo4jError",{enumerable:!0,get:function(){return s.Neo4jError}}),Object.defineProperty(e,"newGQLError",{enumerable:!0,get:function(){return s.newGQLError}}),Object.defineProperty(e,"GQLError",{enumerable:!0,get:function(){return s.GQLError}}),Object.defineProperty(e,"isRetriableError",{enumerable:!0,get:function(){return s.isRetriableError}});var u=o(t(3371));e.Integer=u.default,Object.defineProperty(e,"int",{enumerable:!0,get:function(){return u.int}}),Object.defineProperty(e,"isInt",{enumerable:!0,get:function(){return u.isInt}}),Object.defineProperty(e,"inSafeRange",{enumerable:!0,get:function(){return u.inSafeRange}}),Object.defineProperty(e,"toNumber",{enumerable:!0,get:function(){return u.toNumber}}),Object.defineProperty(e,"toString",{enumerable:!0,get:function(){return u.toString}});var l=t(5459);Object.defineProperty(e,"Date",{enumerable:!0,get:function(){return l.Date}}),Object.defineProperty(e,"DateTime",{enumerable:!0,get:function(){return l.DateTime}}),Object.defineProperty(e,"Duration",{enumerable:!0,get:function(){return l.Duration}}),Object.defineProperty(e,"isDate",{enumerable:!0,get:function(){return l.isDate}}),Object.defineProperty(e,"isDateTime",{enumerable:!0,get:function(){return l.isDateTime}}),Object.defineProperty(e,"isDuration",{enumerable:!0,get:function(){return l.isDuration}}),Object.defineProperty(e,"isLocalDateTime",{enumerable:!0,get:function(){return l.isLocalDateTime}}),Object.defineProperty(e,"isLocalTime",{enumerable:!0,get:function(){return l.isLocalTime}}),Object.defineProperty(e,"isTime",{enumerable:!0,get:function(){return l.isTime}}),Object.defineProperty(e,"LocalDateTime",{enumerable:!0,get:function(){return l.LocalDateTime}}),Object.defineProperty(e,"LocalTime",{enumerable:!0,get:function(){return l.LocalTime}}),Object.defineProperty(e,"Time",{enumerable:!0,get:function(){return l.Time}});var c=t(1517);Object.defineProperty(e,"Node",{enumerable:!0,get:function(){return c.Node}}),Object.defineProperty(e,"isNode",{enumerable:!0,get:function(){return c.isNode}}),Object.defineProperty(e,"Relationship",{enumerable:!0,get:function(){return c.Relationship}}),Object.defineProperty(e,"isRelationship",{enumerable:!0,get:function(){return c.isRelationship}}),Object.defineProperty(e,"UnboundRelationship",{enumerable:!0,get:function(){return c.UnboundRelationship}}),Object.defineProperty(e,"isUnboundRelationship",{enumerable:!0,get:function(){return c.isUnboundRelationship}}),Object.defineProperty(e,"Path",{enumerable:!0,get:function(){return c.Path}}),Object.defineProperty(e,"isPath",{enumerable:!0,get:function(){return c.isPath}}),Object.defineProperty(e,"PathSegment",{enumerable:!0,get:function(){return c.PathSegment}}),Object.defineProperty(e,"isPathSegment",{enumerable:!0,get:function(){return c.isPathSegment}});var f=a(t(4820));e.Record=f.default;var h=t(7093);Object.defineProperty(e,"isPoint",{enumerable:!0,get:function(){return h.isPoint}}),Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return h.Point}});var d=o(t(6033));e.ResultSummary=d.default,Object.defineProperty(e,"queryType",{enumerable:!0,get:function(){return d.queryType}}),Object.defineProperty(e,"ServerInfo",{enumerable:!0,get:function(){return d.ServerInfo}}),Object.defineProperty(e,"Plan",{enumerable:!0,get:function(){return d.Plan}}),Object.defineProperty(e,"ProfiledPlan",{enumerable:!0,get:function(){return d.ProfiledPlan}}),Object.defineProperty(e,"QueryStatistics",{enumerable:!0,get:function(){return d.QueryStatistics}}),Object.defineProperty(e,"Stats",{enumerable:!0,get:function(){return d.Stats}});var v=o(t(1866));e.Notification=v.default,Object.defineProperty(e,"GqlStatusObject",{enumerable:!0,get:function(){return v.GqlStatusObject}}),Object.defineProperty(e,"notificationCategory",{enumerable:!0,get:function(){return v.notificationCategory}}),Object.defineProperty(e,"notificationClassification",{enumerable:!0,get:function(){return v.notificationClassification}}),Object.defineProperty(e,"notificationSeverityLevel",{enumerable:!0,get:function(){return v.notificationSeverityLevel}});var g=t(1985);Object.defineProperty(e,"notificationFilterDisabledCategory",{enumerable:!0,get:function(){return g.notificationFilterDisabledCategory}}),Object.defineProperty(e,"notificationFilterDisabledClassification",{enumerable:!0,get:function(){return g.notificationFilterDisabledClassification}}),Object.defineProperty(e,"notificationFilterMinimumSeverityLevel",{enumerable:!0,get:function(){return g.notificationFilterMinimumSeverityLevel}});var _=a(t(9512));e.Result=_.default;var y=a(t(8917));e.EagerResult=y.default;var p=o(t(2007));e.ConnectionProvider=p.default,Object.defineProperty(e,"Releasable",{enumerable:!0,get:function(){return p.Releasable}});var m=a(t(1409));e.Connection=m.default;var E=a(t(9473));e.Transaction=E.default;var C=a(t(5909));e.ManagedTransaction=C.default;var P=a(t(4569));e.TransactionPromise=P.default;var T=a(t(5481));e.Session=T.default;var R=o(t(7264)),D=R;e.Driver=R.default,e.driver=D;var L=a(t(1967));e.auth=L.default;var j=t(6755);Object.defineProperty(e,"bookmarkManager",{enumerable:!0,get:function(){return j.bookmarkManager}});var F=t(2069);Object.defineProperty(e,"authTokenManagers",{enumerable:!0,get:function(){return F.authTokenManagers}}),Object.defineProperty(e,"staticAuthTokenManager",{enumerable:!0,get:function(){return F.staticAuthTokenManager}});var q=t(7264);Object.defineProperty(e,"routing",{enumerable:!0,get:function(){return q.routing}});var W=o(t(6872));e.types=W;var Z=o(t(4027));e.json=Z;var Q=a(t(1573));e.resultTransformers=Q.default;var re=t(8264);Object.defineProperty(e,"clientCertificateProviders",{enumerable:!0,get:function(){return re.clientCertificateProviders}}),Object.defineProperty(e,"resolveCertificateProvider",{enumerable:!0,get:function(){return re.resolveCertificateProvider}});var ee=o(t(6995));e.internal=ee;var ue={SERVICE_UNAVAILABLE:s.SERVICE_UNAVAILABLE,SESSION_EXPIRED:s.SESSION_EXPIRED,PROTOCOL_ERROR:s.PROTOCOL_ERROR};e.error=ue;var de={authTokenManagers:F.authTokenManagers,newError:s.newError,Neo4jError:s.Neo4jError,newGQLError:s.newGQLError,GQLError:s.GQLError,isRetriableError:s.isRetriableError,error:ue,Integer:u.default,int:u.int,isInt:u.isInt,inSafeRange:u.inSafeRange,toNumber:u.toNumber,toString:u.toString,internal:ee,isPoint:h.isPoint,Point:h.Point,Date:l.Date,DateTime:l.DateTime,Duration:l.Duration,isDate:l.isDate,isDateTime:l.isDateTime,isDuration:l.isDuration,isLocalDateTime:l.isLocalDateTime,isLocalTime:l.isLocalTime,isTime:l.isTime,LocalDateTime:l.LocalDateTime,LocalTime:l.LocalTime,Time:l.Time,Node:c.Node,isNode:c.isNode,Relationship:c.Relationship,isRelationship:c.isRelationship,UnboundRelationship:c.UnboundRelationship,isUnboundRelationship:c.isUnboundRelationship,Path:c.Path,isPath:c.isPath,PathSegment:c.PathSegment,isPathSegment:c.isPathSegment,Record:f.default,ResultSummary:d.default,queryType:d.queryType,ServerInfo:d.ServerInfo,Notification:v.default,GqlStatusObject:v.GqlStatusObject,Plan:d.Plan,ProfiledPlan:d.ProfiledPlan,QueryStatistics:d.QueryStatistics,Stats:d.Stats,Result:_.default,EagerResult:y.default,Transaction:E.default,ManagedTransaction:C.default,TransactionPromise:P.default,Session:T.default,Driver:R.default,Connection:m.default,Releasable:p.Releasable,types:W,driver:D,json:Z,auth:L.default,bookmarkManager:j.bookmarkManager,routing:q.routing,resultTransformers:Q.default,notificationCategory:v.notificationCategory,notificationClassification:v.notificationClassification,notificationSeverityLevel:v.notificationSeverityLevel,notificationFilterDisabledCategory:g.notificationFilterDisabledCategory,notificationFilterDisabledClassification:g.notificationFilterDisabledClassification,notificationFilterMinimumSeverityLevel:g.notificationFilterMinimumSeverityLevel,clientCertificateProviders:re.clientCertificateProviders,resolveCertificateProvider:re.resolveCertificateProvider};e.default=de},3371:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.toString=e.toNumber=e.inSafeRange=e.isInt=e.int=void 0;var n=t(9691),i=new Map,o=function(){function g(_,y){this.low=_??0,this.high=y??0}return g.prototype.inSafeRange=function(){return this.greaterThanOrEqual(g.MIN_SAFE_VALUE)&&this.lessThanOrEqual(g.MAX_SAFE_VALUE)},g.prototype.toInt=function(){return this.low},g.prototype.toNumber=function(){return this.high*s+(this.low>>>0)},g.prototype.toBigInt=function(){if(this.isZero())return BigInt(0);if(this.isPositive())return BigInt(this.high>>>0)*BigInt(s)+BigInt(this.low>>>0);var _=this.negate();return BigInt(-1)*(BigInt(_.high>>>0)*BigInt(s)+BigInt(_.low>>>0))},g.prototype.toNumberOrInfinity=function(){return this.lessThan(g.MIN_SAFE_VALUE)?Number.NEGATIVE_INFINITY:this.greaterThan(g.MAX_SAFE_VALUE)?Number.POSITIVE_INFINITY:this.toNumber()},g.prototype.toString=function(_){if((_=_??10)<2||_>36)throw RangeError("radix out of range: "+_.toString());if(this.isZero())return"0";var y;if(this.isNegative()){if(this.equals(g.MIN_VALUE)){var p=g.fromNumber(_),m=this.div(p);return y=m.multiply(p).subtract(this),m.toString(_)+y.toInt().toString(_)}return"-"+this.negate().toString(_)}var E=g.fromNumber(Math.pow(_,6));y=this;for(var C="";;){var P=y.div(E),T=(y.subtract(P.multiply(E)).toInt()>>>0).toString(_);if((y=P).isZero())return T+C;for(;T.length<6;)T="0"+T;C=""+T+C}},g.prototype.valueOf=function(){return this.toBigInt()},g.prototype.getHighBits=function(){return this.high},g.prototype.getLowBits=function(){return this.low},g.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(g.MIN_VALUE)?64:this.negate().getNumBitsAbs();var _=this.high!==0?this.high:this.low,y=0;for(y=31;y>0&&(_&1<<y)==0;y--);return this.high!==0?y+33:y+1},g.prototype.isZero=function(){return this.high===0&&this.low===0},g.prototype.isNegative=function(){return this.high<0},g.prototype.isPositive=function(){return this.high>=0},g.prototype.isOdd=function(){return(1&this.low)==1},g.prototype.isEven=function(){return(1&this.low)==0},g.prototype.equals=function(_){var y=g.fromValue(_);return this.high===y.high&&this.low===y.low},g.prototype.notEquals=function(_){return!this.equals(_)},g.prototype.lessThan=function(_){return this.compare(_)<0},g.prototype.lessThanOrEqual=function(_){return this.compare(_)<=0},g.prototype.greaterThan=function(_){return this.compare(_)>0},g.prototype.greaterThanOrEqual=function(_){return this.compare(_)>=0},g.prototype.compare=function(_){var y=g.fromValue(_);if(this.equals(y))return 0;var p=this.isNegative(),m=y.isNegative();return p&&!m?-1:!p&&m?1:this.subtract(y).isNegative()?-1:1},g.prototype.negate=function(){return this.equals(g.MIN_VALUE)?g.MIN_VALUE:this.not().add(g.ONE)},g.prototype.add=function(_){var y=g.fromValue(_),p=this.high>>>16,m=65535&this.high,E=this.low>>>16,C=65535&this.low,P=y.high>>>16,T=65535&y.high,R=y.low>>>16,D=0,L=0,j=0,F=0;return j+=(F+=C+(65535&y.low))>>>16,F&=65535,L+=(j+=E+R)>>>16,j&=65535,D+=(L+=m+T)>>>16,L&=65535,D+=p+P,D&=65535,g.fromBits(j<<16|F,D<<16|L)},g.prototype.subtract=function(_){var y=g.fromValue(_);return this.add(y.negate())},g.prototype.multiply=function(_){if(this.isZero())return g.ZERO;var y=g.fromValue(_);if(y.isZero())return g.ZERO;if(this.equals(g.MIN_VALUE))return y.isOdd()?g.MIN_VALUE:g.ZERO;if(y.equals(g.MIN_VALUE))return this.isOdd()?g.MIN_VALUE:g.ZERO;if(this.isNegative())return y.isNegative()?this.negate().multiply(y.negate()):this.negate().multiply(y).negate();if(y.isNegative())return this.multiply(y.negate()).negate();if(this.lessThan(l)&&y.lessThan(l))return g.fromNumber(this.toNumber()*y.toNumber());var p=this.high>>>16,m=65535&this.high,E=this.low>>>16,C=65535&this.low,P=y.high>>>16,T=65535&y.high,R=y.low>>>16,D=65535&y.low,L=0,j=0,F=0,q=0;return F+=(q+=C*D)>>>16,q&=65535,j+=(F+=E*D)>>>16,F&=65535,j+=(F+=C*R)>>>16,F&=65535,L+=(j+=m*D)>>>16,j&=65535,L+=(j+=E*R)>>>16,j&=65535,L+=(j+=C*T)>>>16,j&=65535,L+=p*D+m*R+E*T+C*P,L&=65535,g.fromBits(F<<16|q,L<<16|j)},g.prototype.div=function(_){var y,p,m,E=g.fromValue(_);if(E.isZero())throw(0,n.newError)("division by zero");if(this.isZero())return g.ZERO;if(this.equals(g.MIN_VALUE))return E.equals(g.ONE)||E.equals(g.NEG_ONE)?g.MIN_VALUE:E.equals(g.MIN_VALUE)?g.ONE:(y=this.shiftRight(1).div(E).shiftLeft(1)).equals(g.ZERO)?E.isNegative()?g.ONE:g.NEG_ONE:(p=this.subtract(E.multiply(y)),m=y.add(p.div(E)));if(E.equals(g.MIN_VALUE))return g.ZERO;if(this.isNegative())return E.isNegative()?this.negate().div(E.negate()):this.negate().div(E).negate();if(E.isNegative())return this.div(E.negate()).negate();for(m=g.ZERO,p=this;p.greaterThanOrEqual(E);){y=Math.max(1,Math.floor(p.toNumber()/E.toNumber()));for(var C=Math.ceil(Math.log(y)/Math.LN2),P=C<=48?1:Math.pow(2,C-48),T=g.fromNumber(y),R=T.multiply(E);R.isNegative()||R.greaterThan(p);)y-=P,R=(T=g.fromNumber(y)).multiply(E);T.isZero()&&(T=g.ONE),m=m.add(T),p=p.subtract(R)}return m},g.prototype.modulo=function(_){var y=g.fromValue(_);return this.subtract(this.div(y).multiply(y))},g.prototype.not=function(){return g.fromBits(~this.low,~this.high)},g.prototype.and=function(_){var y=g.fromValue(_);return g.fromBits(this.low&y.low,this.high&y.high)},g.prototype.or=function(_){var y=g.fromValue(_);return g.fromBits(this.low|y.low,this.high|y.high)},g.prototype.xor=function(_){var y=g.fromValue(_);return g.fromBits(this.low^y.low,this.high^y.high)},g.prototype.shiftLeft=function(_){var y=g.toNumber(_);return(y&=63)==0?g.ZERO:y<32?g.fromBits(this.low<<y,this.high<<y|this.low>>>32-y):g.fromBits(0,this.low<<y-32)},g.prototype.shiftRight=function(_){var y=g.toNumber(_),p=g.toNumber(_);return(y&=63)==0?g.ZERO:p<32?g.fromBits(this.low>>>y|this.high<<32-y,this.high>>y):g.fromBits(this.high>>y-32,this.high>=0?0:-1)},g.isInteger=function(_){return(_==null?void 0:_.__isInteger__)===!0},g.fromInt=function(_){var y;if((_|=0)>=-128&&_<128&&(y=i.get(_))!=null)return y;var p=new g(_,_<0?-1:0);return _>=-128&&_<128&&i.set(_,p),p},g.fromBits=function(_,y){return new g(_,y)},g.fromNumber=function(_){return isNaN(_)||!isFinite(_)?g.ZERO:_<=-u?g.MIN_VALUE:_+1>=u?g.MAX_VALUE:_<0?g.fromNumber(-_).negate():new g(_%s|0,_/s|0)},g.fromString=function(_,y,p){var m,E=(p===void 0?{}:p).strictStringValidation;if(_.length===0)throw(0,n.newError)("number format error: empty string");if(_==="NaN"||_==="Infinity"||_==="+Infinity"||_==="-Infinity")return g.ZERO;if((y=y??10)<2||y>36)throw(0,n.newError)("radix out of range: "+y.toString());if((m=_.indexOf("-"))>0)throw(0,n.newError)('number format error: interior "-" character: '+_);if(m===0)return g.fromString(_.substring(1),y).negate();for(var C=g.fromNumber(Math.pow(y,8)),P=g.ZERO,T=0;T<_.length;T+=8){var R=Math.min(8,_.length-T),D=_.substring(T,T+R),L=parseInt(D,y);if(E===!0&&!a(D,L,y))throw(0,n.newError)('number format error: "'.concat(D,'" is NaN in radix ').concat(y,": ").concat(_));if(R<8){var j=g.fromNumber(Math.pow(y,R));P=P.multiply(j).add(g.fromNumber(L))}else P=(P=P.multiply(C)).add(g.fromNumber(L))}return P},g.fromValue=function(_,y){return y===void 0&&(y={}),_ instanceof g?_:typeof _=="number"?(y.ceilFloat===!0&&(_=Math.ceil(_)),g.fromNumber(_)):typeof _=="string"?g.fromString(_,void 0,y):typeof _=="bigint"?g.fromString(_.toString()):new g(_.low,_.high)},g.toNumber=function(_){switch(typeof _){case"number":return _;case"bigint":return Number(_);default:return g.fromValue(_).toNumber()}},g.toString=function(_,y){return g.fromValue(_).toString(y)},g.inSafeRange=function(_){return g.fromValue(_).inSafeRange()},g.ZERO=g.fromInt(0),g.ONE=g.fromInt(1),g.NEG_ONE=g.fromInt(-1),g.MAX_VALUE=g.fromBits(-1,2147483647),g.MIN_VALUE=g.fromBits(0,-2147483648),g.MIN_SAFE_VALUE=g.fromBits(1,-2097152),g.MAX_SAFE_VALUE=g.fromBits(-1,2097151),g.__isInteger__=!0,g}();function a(g,_,y){return!Number.isNaN(g)&&!Number.isNaN(_)&&function(p,m,E){var C=p.toString(m),P=Math.max(E-C.length,0),T="0".repeat(P);return"".concat(T).concat(C)}(_,y,g.length)===g.toLowerCase()}Object.defineProperty(o.prototype,"__isInteger__",{value:!0,enumerable:!1,configurable:!1});var s=4294967296,u=s*s/2,l=o.fromInt(1<<24),c=o.fromValue;e.int=c;var f=o.isInteger;e.isInt=f;var h=o.inSafeRange;e.inSafeRange=h;var d=o.toNumber;e.toNumber=d;var v=o.toString;e.toString=v,e.default=o},5837:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fromVersion=void 0,e.fromVersion=function(t,n){n===void 0&&(n=function(){return{get userAgent(){}}});var i=n(),o=i.userAgent!=null?i.userAgent.split("(")[1].split(")")[0]:void 0,a=i.userAgent||void 0;return{product:"neo4j-javascript/".concat(t),platform:o,languageDetails:a}}},3488:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(o,a,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(a,s);l&&!("get"in l?!a.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(o,u,l)}:function(o,a,s,u){u===void 0&&(u=s),o[u]=a[s]}),i=this&&this.__exportStar||function(o,a){for(var s in o)s==="default"||Object.prototype.hasOwnProperty.call(a,s)||n(a,o,s)};Object.defineProperty(e,"__esModule",{value:!0}),i(t(5837),e)},9730:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(h,d,v,g){g===void 0&&(g=v);var _=Object.getOwnPropertyDescriptor(d,v);_&&!("get"in _?!d.__esModule:_.writable||_.configurable)||(_={enumerable:!0,get:function(){return d[v]}}),Object.defineProperty(h,g,_)}:function(h,d,v,g){g===void 0&&(g=v),h[g]=d[v]}),i=this&&this.__setModuleDefault||(Object.create?function(h,d){Object.defineProperty(h,"default",{enumerable:!0,value:d})}:function(h,d){h.default=d}),o=this&&this.__importStar||function(h){if(h&&h.__esModule)return h;var d={};if(h!=null)for(var v in h)v!=="default"&&Object.prototype.hasOwnProperty.call(h,v)&&n(d,h,v);return i(d,h),d},a=this&&this.__read||function(h,d){var v=typeof Symbol=="function"&&h[Symbol.iterator];if(!v)return h;var g,_,y=v.call(h),p=[];try{for(;(d===void 0||d-- >0)&&!(g=y.next()).done;)p.push(g.value)}catch(m){_={error:m}}finally{try{g&&!g.done&&(v=y.return)&&v.call(y)}finally{if(_)throw _.error}}return p},s=this&&this.__spreadArray||function(h,d,v){if(v||arguments.length===2)for(var g,_=0,y=d.length;_<y;_++)!g&&_ in d||(g||(g=Array.prototype.slice.call(d,0,_)),g[_]=d[_]);return h.concat(g||Array.prototype.slice.call(d))};Object.defineProperty(e,"__esModule",{value:!0}),e.Bookmarks=void 0;var u=o(t(6587)),l=function(){function h(d){this._values=function(v){if(v==null||v==="")return[];if(u.isString(v))return[v];if(Array.isArray(v)){for(var g=new Set,_=f(v),y=0;y<_.length;y++){var p=_[y];if(p!=null){if(!u.isString(p))throw new TypeError("Bookmark value should be a string, given: '".concat(p,"'"));g.add(p)}}return s([],a(g),!1)}throw new TypeError("Bookmarks should either be a string or a string array, given: '".concat(v,"'"))}(d)}return h.empty=function(){return c},h.prototype.isEmpty=function(){return this._values.length===0},h.prototype.values=function(){return this._values},h.prototype[Symbol.iterator]=function(){return this._values[Symbol.iterator]()},h.prototype.asBeginTransactionParameters=function(){var d;return this.isEmpty()?{}:((d={}).bookmarks=this._values,d)},h}();e.Bookmarks=l;var c=new l(null);function f(h){return h.reduce(function(d,v){return Array.isArray(v)?d.concat(f(v)):d.concat(v)},[])}},3618:function(r,e,t){var n,i=this&&this.__extends||(n=function(_,y){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var E in m)Object.prototype.hasOwnProperty.call(m,E)&&(p[E]=m[E])},n(_,y)},function(_,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function p(){this.constructor=_}n(_,y),_.prototype=y===null?Object.create(y):(p.prototype=y.prototype,new p)}),o=this&&this.__awaiter||function(_,y,p,m){return new(p||(p=Promise))(function(E,C){function P(D){try{R(m.next(D))}catch(L){C(L)}}function T(D){try{R(m.throw(D))}catch(L){C(L)}}function R(D){var L;D.done?E(D.value):(L=D.value,L instanceof p?L:new p(function(j){j(L)})).then(P,T)}R((m=m.apply(_,y||[])).next())})},a=this&&this.__generator||function(_,y){var p,m,E,C,P={label:0,sent:function(){if(1&E[0])throw E[1];return E[1]},trys:[],ops:[]};return C={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function T(R){return function(D){return function(L){if(p)throw new TypeError("Generator is already executing.");for(;C&&(C=0,L[0]&&(P=0)),P;)try{if(p=1,m&&(E=2&L[0]?m.return:L[0]?m.throw||((E=m.return)&&E.call(m),0):m.next)&&!(E=E.call(m,L[1])).done)return E;switch(m=0,E&&(L=[2&L[0],E.value]),L[0]){case 0:case 1:E=L;break;case 4:return P.label++,{value:L[1],done:!1};case 5:P.label++,m=L[1],L=[0];continue;case 7:L=P.ops.pop(),P.trys.pop();continue;default:if(!((E=(E=P.trys).length>0&&E[E.length-1])||L[0]!==6&&L[0]!==2)){P=0;continue}if(L[0]===3&&(!E||L[1]>E[0]&&L[1]<E[3])){P.label=L[1];break}if(L[0]===6&&P.label<E[1]){P.label=E[1],E=L;break}if(E&&P.label<E[2]){P.label=E[2],P.ops.push(L);break}E[2]&&P.ops.pop(),P.trys.pop();continue}L=y.call(_,P)}catch(j){L=[6,j],m=0}finally{p=E=0}if(5&L[0])throw L[1];return{value:L[0]?L[1]:void 0,done:!0}}([R,D])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.EMPTY_CONNECTION_HOLDER=e.ReadOnlyConnectionHolder=e.ConnectionHolder=void 0;var s=t(9691),u=t(6587),l=t(326),c=t(9730),f=t(4883),h=function(){function _(y){var p=y.mode,m=y.database,E=m===void 0?"":m,C=y.bookmarks,P=y.connectionProvider,T=y.impersonatedUser,R=y.onDatabaseNameResolved,D=y.getConnectionAcquistionBookmarks,L=y.auth,j=y.log;this._mode=p??l.ACCESS_MODE_WRITE,this._closed=!1,this._database=E!=null?(0,u.assertString)(E,"database"):"",this._bookmarks=C??c.Bookmarks.empty(),this._connectionProvider=P,this._impersonatedUser=T,this._referenceCount=0,this._connectionPromise=Promise.resolve(null),this._onDatabaseNameResolved=R,this._auth=L,this._log=j,this._logError=this._logError.bind(this),this._getConnectionAcquistionBookmarks=D??function(){return Promise.resolve(c.Bookmarks.empty())}}return _.prototype.mode=function(){return this._mode},_.prototype.database=function(){return this._database},_.prototype.setDatabase=function(y){this._database=y},_.prototype.bookmarks=function(){return this._bookmarks},_.prototype.connectionProvider=function(){return this._connectionProvider},_.prototype.referenceCount=function(){return this._referenceCount},_.prototype.initializeConnection=function(){return this._referenceCount!==0||this._connectionProvider==null?(this._referenceCount++,!1):(this._connectionPromise=this._createConnectionPromise(this._connectionProvider),this._referenceCount++,!0)},_.prototype._createConnectionPromise=function(y){return o(this,void 0,void 0,function(){var p,m,E;return a(this,function(C){switch(C.label){case 0:return m=(p=y).acquireConnection,E={accessMode:this._mode,database:this._database},[4,this._getBookmarks()];case 1:return[4,m.apply(p,[(E.bookmarks=C.sent(),E.impersonatedUser=this._impersonatedUser,E.onDatabaseNameResolved=this._onDatabaseNameResolved,E.auth=this._auth,E)])];case 2:return[2,C.sent()]}})})},_.prototype._getBookmarks=function(){return o(this,void 0,void 0,function(){return a(this,function(y){switch(y.label){case 0:return[4,this._getConnectionAcquistionBookmarks()];case 1:return[2,y.sent()]}})})},_.prototype.getConnection=function(){return this._connectionPromise},_.prototype.releaseConnection=function(){return this._referenceCount===0?this._connectionPromise:(this._referenceCount--,this._referenceCount===0?this._releaseConnection():this._connectionPromise)},_.prototype.close=function(y){return this._closed=!0,this._referenceCount===0?this._connectionPromise:(this._referenceCount=0,this._releaseConnection(y))},_.prototype.log=function(){return this._log},_.prototype._releaseConnection=function(y){return this._connectionPromise=this._connectionPromise.then(function(p){return p!=null?p.isOpen()&&(p.hasOngoingObservableRequests()||y===!0)?p.resetAndFlush().catch(g).then(function(){return p.release().then(function(){return null})}):p.release().then(function(){return null}):Promise.resolve(null)}).catch(this._logError),this._connectionPromise},_.prototype._logError=function(y){return this._log.isWarnEnabled()&&this._log.warn("ConnectionHolder got an error while releasing the connection. Error ".concat(y,". Stacktrace: ").concat(y.stack)),null},_}();e.ConnectionHolder=h;var d=function(_){function y(p){var m=_.call(this,{mode:p.mode(),database:p.database(),bookmarks:p.bookmarks(),getConnectionAcquistionBookmarks:p._getConnectionAcquistionBookmarks,connectionProvider:p.connectionProvider(),log:p.log()})||this;return m._connectionHolder=p,m}return i(y,_),y.prototype.initializeConnection=function(){return this._connectionHolder.referenceCount()!==0},y.prototype.getConnection=function(){return this._connectionHolder.getConnection()},y.prototype.releaseConnection=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve(null)})},y.prototype.close=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve(null)})},y}(h);e.ReadOnlyConnectionHolder=d,e.default=d;var v=new(function(_){function y(){return _.call(this,{log:f.Logger.create({})})||this}return i(y,_),y.prototype.mode=function(){},y.prototype.database=function(){},y.prototype.initializeConnection=function(){return!0},y.prototype.getConnection=function(){return o(this,void 0,void 0,function(){return a(this,function(p){switch(p.label){case 0:return[4,Promise.reject((0,s.newError)("This connection holder does not serve connections"))];case 1:return[2,p.sent()]}})})},y.prototype.releaseConnection=function(){return o(this,void 0,void 0,function(){return a(this,function(p){switch(p.label){case 0:return[4,Promise.resolve(null)];case 1:return[2,p.sent()]}})})},y.prototype.close=function(){return o(this,void 0,void 0,function(){return a(this,function(p){switch(p.label){case 0:return[4,Promise.resolve(null)];case 1:return[2,p.sent()]}})})},y}(h));function g(_){return null}e.EMPTY_CONNECTION_HOLDER=v},326:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TELEMETRY_APIS=e.BOLT_PROTOCOL_V5_7=e.BOLT_PROTOCOL_V5_6=e.BOLT_PROTOCOL_V5_5=e.BOLT_PROTOCOL_V5_4=e.BOLT_PROTOCOL_V5_3=e.BOLT_PROTOCOL_V5_2=e.BOLT_PROTOCOL_V5_1=e.BOLT_PROTOCOL_V5_0=e.BOLT_PROTOCOL_V4_4=e.BOLT_PROTOCOL_V4_3=e.BOLT_PROTOCOL_V4_2=e.BOLT_PROTOCOL_V4_1=e.BOLT_PROTOCOL_V4_0=e.BOLT_PROTOCOL_V3=e.BOLT_PROTOCOL_V2=e.BOLT_PROTOCOL_V1=e.DEFAULT_POOL_MAX_SIZE=e.DEFAULT_POOL_ACQUISITION_TIMEOUT=e.DEFAULT_CONNECTION_TIMEOUT_MILLIS=e.ACCESS_MODE_WRITE=e.ACCESS_MODE_READ=e.FETCH_ALL=void 0,e.FETCH_ALL=-1,e.DEFAULT_POOL_ACQUISITION_TIMEOUT=6e4,e.DEFAULT_POOL_MAX_SIZE=100,e.DEFAULT_CONNECTION_TIMEOUT_MILLIS=3e4,e.ACCESS_MODE_READ="READ",e.ACCESS_MODE_WRITE="WRITE",e.BOLT_PROTOCOL_V1=1,e.BOLT_PROTOCOL_V2=2,e.BOLT_PROTOCOL_V3=3,e.BOLT_PROTOCOL_V4_0=4,e.BOLT_PROTOCOL_V4_1=4.1,e.BOLT_PROTOCOL_V4_2=4.2,e.BOLT_PROTOCOL_V4_3=4.3,e.BOLT_PROTOCOL_V4_4=4.4,e.BOLT_PROTOCOL_V5_0=5,e.BOLT_PROTOCOL_V5_1=5.1,e.BOLT_PROTOCOL_V5_2=5.2,e.BOLT_PROTOCOL_V5_3=5.3,e.BOLT_PROTOCOL_V5_4=5.4,e.BOLT_PROTOCOL_V5_5=5.5,e.BOLT_PROTOCOL_V5_6=5.6,e.BOLT_PROTOCOL_V5_7=5.7,e.TELEMETRY_APIS={MANAGED_TRANSACTION:0,UNMANAGED_TRANSACTION:1,AUTO_COMMIT_TRANSACTION:2,EXECUTE_QUERY:3}},6995:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(C,P,T,R){R===void 0&&(R=T);var D=Object.getOwnPropertyDescriptor(P,T);D&&!("get"in D?!P.__esModule:D.writable||D.configurable)||(D={enumerable:!0,get:function(){return P[T]}}),Object.defineProperty(C,R,D)}:function(C,P,T,R){R===void 0&&(R=T),C[R]=P[T]}),i=this&&this.__setModuleDefault||(Object.create?function(C,P){Object.defineProperty(C,"default",{enumerable:!0,value:P})}:function(C,P){C.default=P}),o=this&&this.__importStar||function(C){if(C&&C.__esModule)return C;var P={};if(C!=null)for(var T in C)T!=="default"&&Object.prototype.hasOwnProperty.call(C,T)&&n(P,C,T);return i(P,C),P};Object.defineProperty(e,"__esModule",{value:!0}),e.pool=e.boltAgent=e.objectUtil=e.resolver=e.serverAddress=e.urlUtil=e.logger=e.transactionExecutor=e.txConfig=e.connectionHolder=e.constants=e.bookmarks=e.observer=e.temporalUtil=e.util=void 0;var a=o(t(6587));e.util=a;var s=o(t(5022));e.temporalUtil=s;var u=o(t(2696));e.observer=u;var l=o(t(9730));e.bookmarks=l;var c=o(t(326));e.constants=c;var f=o(t(3618));e.connectionHolder=f;var h=o(t(754));e.txConfig=h;var d=o(t(6189));e.transactionExecutor=d;var v=o(t(4883));e.logger=v;var g=o(t(407));e.urlUtil=g;var _=o(t(7509));e.serverAddress=_;var y=o(t(9470));e.resolver=y;var p=o(t(93));e.objectUtil=p;var m=o(t(3488));e.boltAgent=m;var E=o(t(2906));e.pool=E},4883:function(r,e,t){var n,i,o=this&&this.__extends||(n=function(_,y){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var E in m)Object.prototype.hasOwnProperty.call(m,E)&&(p[E]=m[E])},n(_,y)},function(_,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function p(){this.constructor=_}n(_,y),_.prototype=y===null?Object.create(y):(p.prototype=y.prototype,new p)});Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=void 0;var a=t(9691),s="error",u="warn",l="info",c="debug",f=l,h=((i={})[s]=0,i[u]=1,i[l]=2,i[c]=3,i),d=function(){function _(y,p){this._level=y,this._loggerFunction=p}return _.create=function(y){if((y==null?void 0:y.logging)!=null){var p=y.logging,m=function(C){if((C==null?void 0:C.level)!=null){var P=C.level,T=h[P];if(T==null&&T!==0)throw(0,a.newError)("Illegal logging level: ".concat(P,". Supported levels are: ").concat(Object.keys(h).toString()));return P}return f}(p),E=function(C){var P,T;if((C==null?void 0:C.logger)!=null){var R=C.logger;if(R!=null&&typeof R=="function")return R}throw(0,a.newError)("Illegal logger function: ".concat((T=(P=C==null?void 0:C.logger)===null||P===void 0?void 0:P.toString())!==null&&T!==void 0?T:"undefined"))}(p);return new _(m,E)}return this.noOp()},_.noOp=function(){return v},_.prototype.isErrorEnabled=function(){return g(this._level,s)},_.prototype.error=function(y){this.isErrorEnabled()&&this._loggerFunction(s,y)},_.prototype.isWarnEnabled=function(){return g(this._level,u)},_.prototype.warn=function(y){this.isWarnEnabled()&&this._loggerFunction(u,y)},_.prototype.isInfoEnabled=function(){return g(this._level,l)},_.prototype.info=function(y){this.isInfoEnabled()&&this._loggerFunction(l,y)},_.prototype.isDebugEnabled=function(){return g(this._level,c)},_.prototype.debug=function(y){this.isDebugEnabled()&&this._loggerFunction(c,y)},_}();e.Logger=d;var v=new(function(_){function y(){return _.call(this,l,function(p,m){})||this}return o(y,_),y.prototype.isErrorEnabled=function(){return!1},y.prototype.error=function(p){},y.prototype.isWarnEnabled=function(){return!1},y.prototype.warn=function(p){},y.prototype.isInfoEnabled=function(){return!1},y.prototype.info=function(p){},y.prototype.isDebugEnabled=function(){return!1},y.prototype.debug=function(p){},y}(d));function g(_,y){return h[_]>=h[y]}},93:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getBrokenObjectReason=e.isBrokenObject=e.createBrokenObject=void 0;var t="__isBrokenObject__",n="__reason__";e.createBrokenObject=function(i,o){o===void 0&&(o={});var a=function(){throw i};return new Proxy(o,{get:function(s,u){return u===t||(u===n?i:void(u!=="toJSON"&&a()))},set:a,apply:a,construct:a,defineProperty:a,deleteProperty:a,getOwnPropertyDescriptor:a,getPrototypeOf:a,has:a,isExtensible:a,ownKeys:a,preventExtensions:a,setPrototypeOf:a})},e.isBrokenObject=function(i){return i!==null&&typeof i=="object"&&i[t]===!0},e.getBrokenObjectReason=function(i){return i[n]}},2696:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FailedObserver=e.CompletedObserver=void 0;var t=function(){function o(){}return o.prototype.subscribe=function(a){i(a,a.onKeys,[]),i(a,a.onCompleted,{})},o.prototype.cancel=function(){},o.prototype.pause=function(){},o.prototype.resume=function(){},o.prototype.prepareToHandleSingleResponse=function(){},o.prototype.markCompleted=function(){},o.prototype.onError=function(a){throw new Error("CompletedObserver not supposed to call onError",{cause:a})},o}();e.CompletedObserver=t;var n=function(){function o(a){var s=a.error,u=a.onError;this._error=s,this._beforeError=u,this._observers=[],this.onError(s)}return o.prototype.subscribe=function(a){i(a,a.onError,this._error),this._observers.push(a)},o.prototype.onError=function(a){i(this,this._beforeError,a),this._observers.forEach(function(s){return i(s,s.onError,a)})},o.prototype.cancel=function(){},o.prototype.pause=function(){},o.prototype.resume=function(){},o.prototype.markCompleted=function(){},o.prototype.prepareToHandleSingleResponse=function(){},o}();function i(o,a,s){a!=null&&a.bind(o)(s)}e.FailedObserver=n},2906:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(l,c,f,h){h===void 0&&(h=f);var d=Object.getOwnPropertyDescriptor(c,f);d&&!("get"in d?!c.__esModule:d.writable||d.configurable)||(d={enumerable:!0,get:function(){return c[f]}}),Object.defineProperty(l,h,d)}:function(l,c,f,h){h===void 0&&(h=f),l[h]=c[f]}),i=this&&this.__setModuleDefault||(Object.create?function(l,c){Object.defineProperty(l,"default",{enumerable:!0,value:c})}:function(l,c){l.default=c}),o=this&&this.__importStar||function(l){if(l&&l.__esModule)return l;var c={};if(l!=null)for(var f in l)f!=="default"&&Object.prototype.hasOwnProperty.call(l,f)&&n(c,l,f);return i(c,l),c},a=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_MAX_SIZE=e.DEFAULT_ACQUISITION_TIMEOUT=e.PoolConfig=e.Pool=void 0;var s=o(t(7589));e.PoolConfig=s.default,Object.defineProperty(e,"DEFAULT_ACQUISITION_TIMEOUT",{enumerable:!0,get:function(){return s.DEFAULT_ACQUISITION_TIMEOUT}}),Object.defineProperty(e,"DEFAULT_MAX_SIZE",{enumerable:!0,get:function(){return s.DEFAULT_MAX_SIZE}});var u=a(t(6842));e.Pool=u.default,e.default=u.default},7589:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_ACQUISITION_TIMEOUT=e.DEFAULT_MAX_SIZE=void 0;var t=100;e.DEFAULT_MAX_SIZE=t;var n=6e4;e.DEFAULT_ACQUISITION_TIMEOUT=n;var i=function(){function s(u,l){this.maxSize=o(u,t),this.acquisitionTimeout=o(l,n)}return s.defaultConfig=function(){return new s(t,n)},s.fromDriverConfig=function(u){return new s(a(u.maxConnectionPoolSize)?u.maxConnectionPoolSize:t,a(u.connectionAcquisitionTimeout)?u.connectionAcquisitionTimeout:n)},s}();function o(s,u){return a(s)?s:u}function a(s){return s===0||s!=null}e.default=i},6842:function(r,e,t){var n=this&&this.__awaiter||function(v,g,_,y){return new(_||(_=Promise))(function(p,m){function E(T){try{P(y.next(T))}catch(R){m(R)}}function C(T){try{P(y.throw(T))}catch(R){m(R)}}function P(T){var R;T.done?p(T.value):(R=T.value,R instanceof _?R:new _(function(D){D(R)})).then(E,C)}P((y=y.apply(v,g||[])).next())})},i=this&&this.__generator||function(v,g){var _,y,p,m,E={label:0,sent:function(){if(1&p[0])throw p[1];return p[1]},trys:[],ops:[]};return m={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function C(P){return function(T){return function(R){if(_)throw new TypeError("Generator is already executing.");for(;m&&(m=0,R[0]&&(E=0)),E;)try{if(_=1,y&&(p=2&R[0]?y.return:R[0]?y.throw||((p=y.return)&&p.call(y),0):y.next)&&!(p=p.call(y,R[1])).done)return p;switch(y=0,p&&(R=[2&R[0],p.value]),R[0]){case 0:case 1:p=R;break;case 4:return E.label++,{value:R[1],done:!1};case 5:E.label++,y=R[1],R=[0];continue;case 7:R=E.ops.pop(),E.trys.pop();continue;default:if(!((p=(p=E.trys).length>0&&p[p.length-1])||R[0]!==6&&R[0]!==2)){E=0;continue}if(R[0]===3&&(!p||R[1]>p[0]&&R[1]<p[3])){E.label=R[1];break}if(R[0]===6&&E.label<p[1]){E.label=p[1],p=R;break}if(p&&E.label<p[2]){E.label=p[2],E.ops.push(R);break}p[2]&&E.ops.pop(),E.trys.pop();continue}R=g.call(v,E)}catch(D){R=[6,D],y=0}finally{_=p=0}if(5&R[0])throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}([P,T])}}},o=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(t(7589)),s=t(9691),u=t(4883),l=function(){function v(g){var _=g.create,y=_===void 0?function(re,ee,ue){return n(Q,void 0,void 0,function(){return i(this,function(de){switch(de.label){case 0:return[4,Promise.reject(new Error("Not implemented"))];case 1:return[2,de.sent()]}})})}:_,p=g.destroy,m=p===void 0?function(re){return n(Q,void 0,void 0,function(){return i(this,function(ee){switch(ee.label){case 0:return[4,Promise.resolve()];case 1:return[2,ee.sent()]}})})}:p,E=g.validateOnAcquire,C=E===void 0?function(re,ee){return!0}:E,P=g.validateOnRelease,T=P===void 0?function(re){return!0}:P,R=g.installIdleObserver,D=R===void 0?function(re,ee){}:R,L=g.removeIdleObserver,j=L===void 0?function(re){}:L,F=g.config,q=F===void 0?a.default.defaultConfig():F,W=g.log,Z=W===void 0?u.Logger.noOp():W,Q=this;this._create=y,this._destroy=m,this._validateOnAcquire=C,this._validateOnRelease=T,this._installIdleObserver=D,this._removeIdleObserver=j,this._maxSize=q.maxSize,this._acquisitionTimeout=q.acquisitionTimeout,this._pools={},this._pendingCreates={},this._acquireRequests={},this._activeResourceCounts={},this._release=this._release.bind(this),this._log=Z,this._closed=!1}return v.prototype.acquire=function(g,_,y){return n(this,void 0,void 0,function(){var p,m,E=this;return i(this,function(C){switch(C.label){case 0:return p=_.asKey(),(m=this._acquireRequests)[p]==null&&(m[p]=[]),[4,new Promise(function(P,T){var R=setTimeout(function(){var L=m[p];if(L!=null&&(m[p]=L.filter(function(q){return q!==D})),!D.isCompleted()){var j=E.activeResourceCount(_),F=E.has(_)?E._pools[p].length:0;D.reject((0,s.newError)("Connection acquisition timed out in ".concat(E._acquisitionTimeout," ms. Pool status: Active conn count = ").concat(j,", Idle conn count = ").concat(F,".")))}},E._acquisitionTimeout);typeof R=="object"&&R.unref();var D=new h(p,g,y,P,T,R,E._log);m[p].push(D),E._processPendingAcquireRequests(_)})];case 1:return[2,C.sent()]}})})},v.prototype.purge=function(g){return n(this,void 0,void 0,function(){return i(this,function(_){switch(_.label){case 0:return[4,this._purgeKey(g.asKey())];case 1:return[2,_.sent()]}})})},v.prototype.apply=function(g,_){var y=g.asKey();y in this._pools&&this._pools[y].apply(_)},v.prototype.close=function(){return n(this,void 0,void 0,function(){var g=this;return i(this,function(_){switch(_.label){case 0:return this._closed=!0,[4,Promise.all(Object.keys(this._pools).map(function(y){return n(g,void 0,void 0,function(){return i(this,function(p){switch(p.label){case 0:return[4,this._purgeKey(y)];case 1:return[2,p.sent()]}})})})).then()];case 1:return[2,_.sent()]}})})},v.prototype.keepAll=function(g){return n(this,void 0,void 0,function(){var _,y,p,m=this;return i(this,function(E){switch(E.label){case 0:return _=g.map(function(C){return C.asKey()}),y=Object.keys(this._pools),p=y.filter(function(C){return!_.includes(C)}),[4,Promise.all(p.map(function(C){return n(m,void 0,void 0,function(){return i(this,function(P){switch(P.label){case 0:return[4,this._purgeKey(C)];case 1:return[2,P.sent()]}})})})).then()];case 1:return[2,E.sent()]}})})},v.prototype.has=function(g){return g.asKey()in this._pools},v.prototype.activeResourceCount=function(g){var _;return(_=this._activeResourceCounts[g.asKey()])!==null&&_!==void 0?_:0},v.prototype._getOrInitializePoolFor=function(g){var _=this._pools[g];return _==null&&(_=new d,this._pools[g]=_,this._pendingCreates[g]=0),_},v.prototype._acquire=function(g,_,y){return n(this,void 0,void 0,function(){var p,m,E,C,P,T,R,D=this;return i(this,function(L){switch(L.label){case 0:if(this._closed)throw(0,s.newError)("Pool is closed, it is no more able to serve requests.");if(p=_.asKey(),m=this._getOrInitializePoolFor(p),y)return[3,10];L.label=1;case 1:if(!(m.length>0))return[3,10];if((E=m.pop())==null)return[3,1];c(p,this._activeResourceCounts),this._removeIdleObserver!=null&&this._removeIdleObserver(E),C=!1,L.label=2;case 2:return L.trys.push([2,4,,6]),[4,this._validateOnAcquire(g,E)];case 3:return C=L.sent(),[3,6];case 4:return P=L.sent(),f(p,this._activeResourceCounts),m.removeInUse(E),[4,this._destroy(E)];case 5:throw L.sent(),P;case 6:return C?(this._log.isDebugEnabled()&&this._log.debug("".concat(E," acquired from the pool ").concat(p)),[2,{resource:E,pool:m}]):[3,7];case 7:return f(p,this._activeResourceCounts),m.removeInUse(E),[4,this._destroy(E)];case 8:L.sent(),L.label=9;case 9:return[3,1];case 10:if(this._maxSize>0&&this.activeResourceCount(_)+this._pendingCreates[p]>=this._maxSize)return[2,{resource:null,pool:m}];this._pendingCreates[p]=this._pendingCreates[p]+1,L.label=11;case 11:return L.trys.push([11,,15,16]),this.activeResourceCount(_)+m.length>=this._maxSize&&y?(R=m.pop())==null?[3,13]:(this._removeIdleObserver!=null&&this._removeIdleObserver(R),m.removeInUse(R),[4,this._destroy(R)]):[3,13];case 12:L.sent(),L.label=13;case 13:return[4,this._create(g,_,function(j,F){return n(D,void 0,void 0,function(){return i(this,function(q){switch(q.label){case 0:return[4,this._release(j,F,m)];case 1:return[2,q.sent()]}})})})];case 14:return T=L.sent(),m.pushInUse(T),c(p,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug("".concat(T," created for the pool ").concat(p)),[3,16];case 15:return this._pendingCreates[p]=this._pendingCreates[p]-1,[7];case 16:return[2,{resource:T,pool:m}]}})})},v.prototype._release=function(g,_,y){return n(this,void 0,void 0,function(){var p,m=this;return i(this,function(E){switch(E.label){case 0:p=g.asKey(),E.label=1;case 1:return E.trys.push([1,,9,10]),y.isActive()?[4,this._validateOnRelease(_)]:[3,6];case 2:return E.sent()?[3,4]:(this._log.isDebugEnabled()&&this._log.debug("".concat(_," destroyed and can't be released to the pool ").concat(p," because it is not functional")),y.removeInUse(_),[4,this._destroy(_)]);case 3:return E.sent(),[3,5];case 4:this._installIdleObserver!=null&&this._installIdleObserver(_,{onError:function(C){m._log.debug("Idle connection ".concat(_," destroyed because of error: ").concat(C));var P=m._pools[p];P!=null&&(m._pools[p]=P.filter(function(T){return T!==_}),P.removeInUse(_)),m._destroy(_).catch(function(){})}}),y.push(_),this._log.isDebugEnabled()&&this._log.debug("".concat(_," released to the pool ").concat(p)),E.label=5;case 5:return[3,8];case 6:return this._log.isDebugEnabled()&&this._log.debug("".concat(_," destroyed and can't be released to the pool ").concat(p," because pool has been purged")),y.removeInUse(_),[4,this._destroy(_)];case 7:E.sent(),E.label=8;case 8:return[3,10];case 9:return f(p,this._activeResourceCounts),this._processPendingAcquireRequests(g),[7];case 10:return[2]}})})},v.prototype._purgeKey=function(g){return n(this,void 0,void 0,function(){var _,y,p;return i(this,function(m){switch(m.label){case 0:if(_=this._pools[g],y=[],_==null)return[3,2];for(;_.length>0;)(p=_.pop())!=null&&(this._removeIdleObserver!=null&&this._removeIdleObserver(p),y.push(this._destroy(p)));return _.close(),delete this._pools[g],[4,Promise.all(y)];case 1:m.sent(),m.label=2;case 2:return[2]}})})},v.prototype._processPendingAcquireRequests=function(g){var _=this,y=g.asKey(),p=this._acquireRequests[y];if(p!=null){var m=p.shift();m!=null?this._acquire(m.context,g,m.requireNew).catch(function(E){return m.reject(E),{resource:null,pool:null}}).then(function(E){var C=E.resource,P=E.pool;C!=null&&P!=null?m.isCompleted()?_._release(g,C,P).catch(function(T){_._log.isDebugEnabled()&&_._log.debug("".concat(C," could not be release back to the pool. Cause: ").concat(T))}):m.resolve(C):m.isCompleted()||(_._acquireRequests[y]==null&&(_._acquireRequests[y]=[]),_._acquireRequests[y].unshift(m))}).catch(function(E){return m.reject(E)}):delete this._acquireRequests[y]}},v}();function c(v,g){var _,y=(_=g[v])!==null&&_!==void 0?_:0;g[v]=y+1}function f(v,g){var _,y=((_=g[v])!==null&&_!==void 0?_:0)-1;y>0?g[v]=y:delete g[v]}var h=function(){function v(g,_,y,p,m,E,C){this._key=g,this._context=_,this._resolve=p,this._reject=m,this._timeoutId=E,this._log=C,this._completed=!1,this._config=y??{}}return Object.defineProperty(v.prototype,"context",{get:function(){return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"requireNew",{get:function(){var g;return(g=this._config.requireNew)!==null&&g!==void 0&&g},enumerable:!1,configurable:!0}),v.prototype.isCompleted=function(){return this._completed},v.prototype.resolve=function(g){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._log.isDebugEnabled()&&this._log.debug("".concat(g," acquired from the pool ").concat(this._key)),this._resolve(g))},v.prototype.reject=function(g){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._reject(g))},v}(),d=function(){function v(){this._active=!0,this._elements=[],this._elementsInUse=new Set}return v.prototype.isActive=function(){return this._active},v.prototype.close=function(){this._active=!1,this._elements=[],this._elementsInUse=new Set},v.prototype.filter=function(g){return this._elements=this._elements.filter(g),this},v.prototype.apply=function(g){this._elements.forEach(g),this._elementsInUse.forEach(g)},Object.defineProperty(v.prototype,"length",{get:function(){return this._elements.length},enumerable:!1,configurable:!0}),v.prototype.pop=function(){var g=this._elements.pop();return g!=null&&this._elementsInUse.add(g),g},v.prototype.push=function(g){return this._elementsInUse.delete(g),this._elements.push(g)},v.prototype.pushInUse=function(g){this._elementsInUse.add(g)},v.prototype.removeInUse=function(g){this._elementsInUse.delete(g)},v}();e.default=l},7041:function(r,e,t){var n=this&&this.__awaiter||function(s,u,l,c){return new(l||(l=Promise))(function(f,h){function d(_){try{g(c.next(_))}catch(y){h(y)}}function v(_){try{g(c.throw(_))}catch(y){h(y)}}function g(_){var y;_.done?f(_.value):(y=_.value,y instanceof l?y:new l(function(p){p(y)})).then(d,v)}g((c=c.apply(s,u||[])).next())})},i=this&&this.__generator||function(s,u){var l,c,f,h,d={label:0,sent:function(){if(1&f[0])throw f[1];return f[1]},trys:[],ops:[]};return h={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function v(g){return function(_){return function(y){if(l)throw new TypeError("Generator is already executing.");for(;h&&(h=0,y[0]&&(d=0)),d;)try{if(l=1,c&&(f=2&y[0]?c.return:y[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,y[1])).done)return f;switch(c=0,f&&(y=[2&y[0],f.value]),y[0]){case 0:case 1:f=y;break;case 4:return d.label++,{value:y[1],done:!1};case 5:d.label++,c=y[1],y=[0];continue;case 7:y=d.ops.pop(),d.trys.pop();continue;default:if(!((f=(f=d.trys).length>0&&f[f.length-1])||y[0]!==6&&y[0]!==2)){d=0;continue}if(y[0]===3&&(!f||y[1]>f[0]&&y[1]<f[3])){d.label=y[1];break}if(y[0]===6&&d.label<f[1]){d.label=f[1],f=y;break}if(f&&d.label<f[2]){d.label=f[2],d.ops.push(y);break}f[2]&&d.ops.pop(),d.trys.pop();continue}y=u.call(s,d)}catch(p){y=[6,p],c=0}finally{l=f=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([g,_])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=t(326),a=function(){function s(u){this._createSession=u}return s.prototype.execute=function(u,l,c){return n(this,void 0,void 0,function(){var f,h,d=this;return i(this,function(v){switch(v.label){case 0:f=this._createSession({database:u.database,bookmarkManager:u.bookmarkManager,impersonatedUser:u.impersonatedUser,auth:u.auth}),g=u.signal,_="abort",y=function(){return n(d,void 0,void 0,function(){return i(this,function(p){switch(p.label){case 0:return[4,f.close()];case 1:return[2,p.sent()]}})})},typeof(g==null?void 0:g.addEventListener)=="function"&&g.addEventListener(_,y),h={uninstall:function(){typeof(g==null?void 0:g.removeEventListener)=="function"&&g.removeEventListener(_,y)}},f._configureTransactionExecutor(!0,o.TELEMETRY_APIS.EXECUTE_QUERY),v.label=1;case 1:return v.trys.push([1,,3,5]),[4,(u.routing==="READ"?f.executeRead.bind(f):f.executeWrite.bind(f))(function(p){return n(d,void 0,void 0,function(){var m;return i(this,function(E){switch(E.label){case 0:return m=p.run(l,c),[4,u.resultTransformer(m)];case 1:return[2,E.sent()]}})})},u.transactionConfig)];case 2:return[2,v.sent()];case 3:return h.uninstall(),[4,f.close()];case 4:return v.sent(),[7];case 5:return[2]}var g,_,y})})},s}();e.default=a},3389:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function n(){}return n.prototype.resolve=function(){throw new Error("Abstract function")},n.prototype._resolveToItself=function(i){return Promise.resolve([i])},n}();e.default=t},8341:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=t(7509);function i(a){return Promise.resolve([a])}var o=function(){function a(s){this._resolverFunction=s??i}return a.prototype.resolve=function(s){var u=this;return new Promise(function(l){return l(u._resolverFunction(s.asHostPort()))}).then(function(l){if(!Array.isArray(l))throw new TypeError("Configured resolver function should either return an array of addresses or a Promise resolved with an array of addresses."+"Each address is '<host>:<port>'. Got: ".concat(l));return l.map(function(c){return n.ServerAddress.fromUrl(c)})})},a}();e.default=o},9470:function(r,e,t){var n=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.ConfiguredCustomResolver=e.BaseHostNameResolver=void 0;var i=n(t(3389));e.BaseHostNameResolver=i.default;var o=n(t(8341));e.ConfiguredCustomResolver=o.default},7509:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(l,c,f,h){h===void 0&&(h=f);var d=Object.getOwnPropertyDescriptor(c,f);d&&!("get"in d?!c.__esModule:d.writable||d.configurable)||(d={enumerable:!0,get:function(){return c[f]}}),Object.defineProperty(l,h,d)}:function(l,c,f,h){h===void 0&&(h=f),l[h]=c[f]}),i=this&&this.__setModuleDefault||(Object.create?function(l,c){Object.defineProperty(l,"default",{enumerable:!0,value:c})}:function(l,c){l.default=c}),o=this&&this.__importStar||function(l){if(l&&l.__esModule)return l;var c={};if(l!=null)for(var f in l)f!=="default"&&Object.prototype.hasOwnProperty.call(l,f)&&n(c,l,f);return i(c,l),c};Object.defineProperty(e,"__esModule",{value:!0}),e.ServerAddress=void 0;var a=t(6587),s=o(t(407)),u=function(){function l(c,f,h,d){this._host=(0,a.assertString)(c,"host"),this._resolved=f!=null?(0,a.assertString)(f,"resolved"):null,this._port=(0,a.assertNumber)(h,"port"),this._hostPort=d,this._stringValue=f!=null?"".concat(d,"(").concat(f,")"):"".concat(d)}return l.prototype.host=function(){return this._host},l.prototype.resolvedHost=function(){return this._resolved!=null?this._resolved:this._host},l.prototype.port=function(){return this._port},l.prototype.resolveWith=function(c){return new l(this._host,c,this._port,this._hostPort)},l.prototype.asHostPort=function(){return this._hostPort},l.prototype.asKey=function(){return this._hostPort},l.prototype.toString=function(){return this._stringValue},l.fromUrl=function(c){var f=s.parseDatabaseUrl(c);return new l(f.host,null,f.port,f.hostAndPort)},l}();e.ServerAddress=u},5022:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(p,m,E,C){C===void 0&&(C=E);var P=Object.getOwnPropertyDescriptor(m,E);P&&!("get"in P?!m.__esModule:P.writable||P.configurable)||(P={enumerable:!0,get:function(){return m[E]}}),Object.defineProperty(p,C,P)}:function(p,m,E,C){C===void 0&&(C=E),p[C]=m[E]}),i=this&&this.__setModuleDefault||(Object.create?function(p,m){Object.defineProperty(p,"default",{enumerable:!0,value:m})}:function(p,m){p.default=m}),o=this&&this.__importStar||function(p){if(p&&p.__esModule)return p;var m={};if(p!=null)for(var E in p)E!=="default"&&Object.prototype.hasOwnProperty.call(p,E)&&n(m,p,E);return i(m,p),m};Object.defineProperty(e,"__esModule",{value:!0}),e.floorMod=e.floorDiv=e.assertValidZoneId=e.assertValidNanosecond=e.assertValidSecond=e.assertValidMinute=e.assertValidHour=e.assertValidDay=e.assertValidMonth=e.assertValidYear=e.timeZoneOffsetInSeconds=e.totalNanoseconds=e.newDate=e.toStandardDate=e.isoStringToStandardDate=e.dateToIsoString=e.timeZoneOffsetToIsoString=e.timeToIsoString=e.durationToIsoString=e.dateToEpochDay=e.localDateTimeToEpochSecond=e.localTimeToNanoOfDay=e.normalizeNanosecondsForDuration=e.normalizeSecondsForDuration=e.SECONDS_PER_DAY=e.DAYS_PER_400_YEAR_CYCLE=e.DAYS_0000_TO_1970=e.NANOS_PER_HOUR=e.NANOS_PER_MINUTE=e.NANOS_PER_MILLISECOND=e.NANOS_PER_SECOND=e.SECONDS_PER_HOUR=e.SECONDS_PER_MINUTE=e.MINUTES_PER_HOUR=e.NANOSECOND_OF_SECOND_RANGE=e.SECOND_OF_MINUTE_RANGE=e.MINUTE_OF_HOUR_RANGE=e.HOUR_OF_DAY_RANGE=e.DAY_OF_MONTH_RANGE=e.MONTH_OF_YEAR_RANGE=e.YEAR_RANGE=void 0;var a=o(t(3371)),s=t(9691),u=t(6587),l=function(){function p(m,E){this._minNumber=m,this._maxNumber=E,this._minInteger=(0,a.int)(m),this._maxInteger=(0,a.int)(E)}return p.prototype.contains=function(m){if((0,a.isInt)(m)&&m instanceof a.default)return m.greaterThanOrEqual(this._minInteger)&&m.lessThanOrEqual(this._maxInteger);if(typeof m=="bigint"){var E=(0,a.int)(m);return E.greaterThanOrEqual(this._minInteger)&&E.lessThanOrEqual(this._maxInteger)}return m>=this._minNumber&&m<=this._maxNumber},p.prototype.toString=function(){return"[".concat(this._minNumber,", ").concat(this._maxNumber,"]")},p}();function c(p,m,E){p=(0,a.int)(p),m=(0,a.int)(m),E=(0,a.int)(E);var C=p.multiply(365);return C=(C=(C=p.greaterThanOrEqual(0)?C.add(p.add(3).div(4).subtract(p.add(99).div(100)).add(p.add(399).div(400))):C.subtract(p.div(-4).subtract(p.div(-100)).add(p.div(-400)))).add(m.multiply(367).subtract(362).div(12))).add(E.subtract(1)),m.greaterThan(2)&&(C=C.subtract(1),function(P){return!(!(P=(0,a.int)(P)).modulo(4).equals(0)||P.modulo(100).equals(0)&&!P.modulo(400).equals(0))}(p)||(C=C.subtract(1))),C.subtract(e.DAYS_0000_TO_1970)}e.YEAR_RANGE=new l(-999999999,999999999),e.MONTH_OF_YEAR_RANGE=new l(1,12),e.DAY_OF_MONTH_RANGE=new l(1,31),e.HOUR_OF_DAY_RANGE=new l(0,23),e.MINUTE_OF_HOUR_RANGE=new l(0,59),e.SECOND_OF_MINUTE_RANGE=new l(0,59),e.NANOSECOND_OF_SECOND_RANGE=new l(0,999999999),e.MINUTES_PER_HOUR=60,e.SECONDS_PER_MINUTE=60,e.SECONDS_PER_HOUR=e.SECONDS_PER_MINUTE*e.MINUTES_PER_HOUR,e.NANOS_PER_SECOND=1e9,e.NANOS_PER_MILLISECOND=1e6,e.NANOS_PER_MINUTE=e.NANOS_PER_SECOND*e.SECONDS_PER_MINUTE,e.NANOS_PER_HOUR=e.NANOS_PER_MINUTE*e.MINUTES_PER_HOUR,e.DAYS_0000_TO_1970=719528,e.DAYS_PER_400_YEAR_CYCLE=146097,e.SECONDS_PER_DAY=86400,e.normalizeSecondsForDuration=function(p,m){return(0,a.int)(p).add(v(m,e.NANOS_PER_SECOND))},e.normalizeNanosecondsForDuration=function(p){return g(p,e.NANOS_PER_SECOND)},e.localTimeToNanoOfDay=function(p,m,E,C){p=(0,a.int)(p),m=(0,a.int)(m),E=(0,a.int)(E),C=(0,a.int)(C);var P=p.multiply(e.NANOS_PER_HOUR);return(P=(P=P.add(m.multiply(e.NANOS_PER_MINUTE))).add(E.multiply(e.NANOS_PER_SECOND))).add(C)},e.localDateTimeToEpochSecond=function(p,m,E,C,P,T,R){var D=c(p,m,E),L=function(j,F,q){j=(0,a.int)(j),F=(0,a.int)(F),q=(0,a.int)(q);var W=j.multiply(e.SECONDS_PER_HOUR);return(W=W.add(F.multiply(e.SECONDS_PER_MINUTE))).add(q)}(C,P,T);return D.multiply(e.SECONDS_PER_DAY).add(L)},e.dateToEpochDay=c,e.durationToIsoString=function(p,m,E,C){var P=y(p),T=y(m),R=function(D,L){var j,F;D=(0,a.int)(D),L=(0,a.int)(L);var q=D.isNegative(),W=L.greaterThan(0);return j=q&&W?D.equals(-1)?"-0":D.add(1).toString():D.toString(),W&&(F=_(q?L.negate().add(2*e.NANOS_PER_SECOND).modulo(e.NANOS_PER_SECOND):L.add(e.NANOS_PER_SECOND).modulo(e.NANOS_PER_SECOND))),F!=null?j+F:j}(E,C);return"P".concat(P,"M").concat(T,"DT").concat(R,"S")},e.timeToIsoString=function(p,m,E,C){var P=y(p,2),T=y(m,2),R=y(E,2),D=_(C);return"".concat(P,":").concat(T,":").concat(R).concat(D)},e.timeZoneOffsetToIsoString=function(p){if((p=(0,a.int)(p)).equals(0))return"Z";var m=p.isNegative();m&&(p=p.multiply(-1));var E=m?"-":"+",C=y(p.div(e.SECONDS_PER_HOUR),2),P=y(p.div(e.SECONDS_PER_MINUTE).modulo(e.MINUTES_PER_HOUR),2),T=p.modulo(e.SECONDS_PER_MINUTE),R=T.equals(0)?null:y(T,2);return R!=null?"".concat(E).concat(C,":").concat(P,":").concat(R):"".concat(E).concat(C,":").concat(P)},e.dateToIsoString=function(p,m,E){var C=function(R){var D=(0,a.int)(R);return D.isNegative()||D.greaterThan(9999)?y(D,6,{usePositiveSign:!0}):y(D,4)}(p),P=y(m,2),T=y(E,2);return"".concat(C,"-").concat(P,"-").concat(T)},e.isoStringToStandardDate=function(p){return new Date(p)},e.toStandardDate=function(p){return new Date(p)},e.newDate=function(p){return new Date(p)},e.totalNanoseconds=function(p,m){return E=m=m??0,C=p.getMilliseconds()*e.NANOS_PER_MILLISECOND,E instanceof a.default?E.add(C):typeof E=="bigint"?E+BigInt(C):E+C;var E,C},e.timeZoneOffsetInSeconds=function(p){var m=p.getSeconds()>=p.getUTCSeconds()?p.getSeconds()-p.getUTCSeconds():p.getSeconds()-p.getUTCSeconds()+60,E=p.getTimezoneOffset();return E===0?0+m:-1*E*e.SECONDS_PER_MINUTE+m},e.assertValidYear=function(p){return d(p,e.YEAR_RANGE,"Year")},e.assertValidMonth=function(p){return d(p,e.MONTH_OF_YEAR_RANGE,"Month")},e.assertValidDay=function(p){return d(p,e.DAY_OF_MONTH_RANGE,"Day")},e.assertValidHour=function(p){return d(p,e.HOUR_OF_DAY_RANGE,"Hour")},e.assertValidMinute=function(p){return d(p,e.MINUTE_OF_HOUR_RANGE,"Minute")},e.assertValidSecond=function(p){return d(p,e.SECOND_OF_MINUTE_RANGE,"Second")},e.assertValidNanosecond=function(p){return d(p,e.NANOSECOND_OF_SECOND_RANGE,"Nanosecond")};var f=new Map,h=function(p,m){return(0,s.newError)("".concat(m,' is expected to be a valid ZoneId but was: "').concat(p,'"'))};function d(p,m,E){if((0,u.assertNumberOrInteger)(p,E),!m.contains(p))throw(0,s.newError)("".concat(E," is expected to be in range ").concat(m.toString()," but was: ").concat(p.toString()));return p}function v(p,m){p=(0,a.int)(p),m=(0,a.int)(m);var E=p.div(m);return p.isPositive()!==m.isPositive()&&E.multiply(m).notEquals(p)&&(E=E.subtract(1)),E}function g(p,m){return p=(0,a.int)(p),m=(0,a.int)(m),p.subtract(v(p,m).multiply(m))}function _(p){return(p=(0,a.int)(p)).equals(0)?"":"."+y(p,9)}function y(p,m,E){var C=(p=(0,a.int)(p)).isNegative();C&&(p=p.negate());var P=p.toString();if(m!=null)for(;P.length<m;)P="0"+P;return C?"-"+P:(E==null?void 0:E.usePositiveSign)===!0?"+"+P:P}e.assertValidZoneId=function(p,m){var E=f.get(m);if(E!==!0){if(E===!1)throw h(m,p);try{Intl.DateTimeFormat(void 0,{timeZone:m}),f.set(m,!0)}catch{throw f.set(m,!1),h(m,p)}}},e.floorDiv=v,e.floorMod=g},6189:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(v){for(var g,_=1,y=arguments.length;_<y;_++)for(var p in g=arguments[_])Object.prototype.hasOwnProperty.call(g,p)&&(v[p]=g[p]);return v},n.apply(this,arguments)},i=this&&this.__awaiter||function(v,g,_,y){return new(_||(_=Promise))(function(p,m){function E(T){try{P(y.next(T))}catch(R){m(R)}}function C(T){try{P(y.throw(T))}catch(R){m(R)}}function P(T){var R;T.done?p(T.value):(R=T.value,R instanceof _?R:new _(function(D){D(R)})).then(E,C)}P((y=y.apply(v,g||[])).next())})},o=this&&this.__generator||function(v,g){var _,y,p,m,E={label:0,sent:function(){if(1&p[0])throw p[1];return p[1]},trys:[],ops:[]};return m={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function C(P){return function(T){return function(R){if(_)throw new TypeError("Generator is already executing.");for(;m&&(m=0,R[0]&&(E=0)),E;)try{if(_=1,y&&(p=2&R[0]?y.return:R[0]?y.throw||((p=y.return)&&p.call(y),0):y.next)&&!(p=p.call(y,R[1])).done)return p;switch(y=0,p&&(R=[2&R[0],p.value]),R[0]){case 0:case 1:p=R;break;case 4:return E.label++,{value:R[1],done:!1};case 5:E.label++,y=R[1],R=[0];continue;case 7:R=E.ops.pop(),E.trys.pop();continue;default:if(!((p=(p=E.trys).length>0&&p[p.length-1])||R[0]!==6&&R[0]!==2)){E=0;continue}if(R[0]===3&&(!p||R[1]>p[0]&&R[1]<p[3])){E.label=R[1];break}if(R[0]===6&&E.label<p[1]){E.label=p[1],p=R;break}if(p&&E.label<p[2]){E.label=p[2],E.ops.push(R);break}p[2]&&E.ops.pop(),E.trys.pop();continue}R=g.call(v,E)}catch(D){R=[6,D],y=0}finally{_=p=0}if(5&R[0])throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}([P,T])}}},a=this&&this.__read||function(v,g){var _=typeof Symbol=="function"&&v[Symbol.iterator];if(!_)return v;var y,p,m=_.call(v),E=[];try{for(;(g===void 0||g-- >0)&&!(y=m.next()).done;)E.push(y.value)}catch(C){p={error:C}}finally{try{y&&!y.done&&(_=m.return)&&_.call(m)}finally{if(p)throw p.error}}return E},s=this&&this.__spreadArray||function(v,g,_){if(_||arguments.length===2)for(var y,p=0,m=g.length;p<m;p++)!y&&p in g||(y||(y=Array.prototype.slice.call(g,0,p)),y[p]=g[p]);return v.concat(y||Array.prototype.slice.call(g))};Object.defineProperty(e,"__esModule",{value:!0}),e.TransactionExecutor=void 0;var u=t(9691),l=t(326);function c(v,g){for(var _=[],y=2;y<arguments.length;y++)_[y-2]=arguments[y];return setTimeout.apply(void 0,s([v,g],a(_),!1))}function f(v){return clearTimeout(v)}var h=function(){function v(g,_,y,p,m){m===void 0&&(m={setTimeout:c,clearTimeout:f}),this._maxRetryTimeMs=d(g,3e4),this._initialRetryDelayMs=d(_,1e3),this._multiplier=d(y,2),this._jitterFactor=d(p,.2),this._setTimeout=m.setTimeout,this._clearTimeout=m.clearTimeout,this._inFlightTimeoutIds=[],this.pipelineBegin=!1,this.telemetryApi=l.TELEMETRY_APIS.MANAGED_TRANSACTION,this._verifyAfterConstruction()}return v.prototype.execute=function(g,_,y){var p=this,m={apiTransactionConfig:{api:this.telemetryApi,onTelemetrySuccess:function(){m.apiTransactionConfig=void 0}}};return new Promise(function(E,C){p._executeTransactionInsidePromise(g,_,E,C,y,m).catch(C)}).catch(function(E){var C=Date.now(),P=p._initialRetryDelayMs;return p._retryTransactionPromise(g,_,E,C,P,y,m)})},v.prototype.close=function(){var g=this;this._inFlightTimeoutIds.forEach(function(_){return g._clearTimeout(_)}),this._inFlightTimeoutIds=[]},v.prototype._retryTransactionPromise=function(g,_,y,p,m,E,C){var P=this;return Date.now()-p>this._maxRetryTimeMs||!(0,u.isRetriableError)(y)?Promise.reject(y):new Promise(function(T,R){var D=P._computeDelayWithJitter(m),L=P._setTimeout(function(){P._inFlightTimeoutIds=P._inFlightTimeoutIds.filter(function(j){return j!==L}),P._executeTransactionInsidePromise(g,_,T,R,E,C).catch(R)},D);P._inFlightTimeoutIds.push(L)}).catch(function(T){var R=m*P._multiplier;return P._retryTransactionPromise(g,_,T,p,R,E,C)})},v.prototype._executeTransactionInsidePromise=function(g,_,y,p,m,E){return i(this,void 0,void 0,function(){var C,P,T,R,D,L,j=this;return o(this,function(F){switch(F.label){case 0:return F.trys.push([0,4,,5]),P=g((E==null?void 0:E.apiTransactionConfig)!=null?n({},E==null?void 0:E.apiTransactionConfig):void 0),this.pipelineBegin?(T=P,[3,3]):[3,1];case 1:return[4,P];case 2:T=F.sent(),F.label=3;case 3:return C=T,[3,5];case 4:return R=F.sent(),p(R),[2];case 5:return D=m??function(q){return q},L=D(C),this._safeExecuteTransactionWork(L,_).then(function(q){return j._handleTransactionWorkSuccess(q,C,y,p)}).catch(function(q){return j._handleTransactionWorkFailure(q,C,p)}),[2]}})})},v.prototype._safeExecuteTransactionWork=function(g,_){try{var y=_(g);return Promise.resolve(y)}catch(p){return Promise.reject(p)}},v.prototype._handleTransactionWorkSuccess=function(g,_,y,p){_.isOpen()?_.commit().then(function(){y(g)}).catch(function(m){p(m)}):y(g)},v.prototype._handleTransactionWorkFailure=function(g,_,y){_.isOpen()?_.rollback().catch(function(p){}).then(function(){return y(g)}).catch(y):y(g)},v.prototype._computeDelayWithJitter=function(g){var _=g*this._jitterFactor,y=g-_,p=g+_;return Math.random()*(p-y)+y},v.prototype._verifyAfterConstruction=function(){if(this._maxRetryTimeMs<0)throw(0,u.newError)("Max retry time should be >= 0: "+this._maxRetryTimeMs.toString());if(this._initialRetryDelayMs<0)throw(0,u.newError)("Initial retry delay should >= 0: "+this._initialRetryDelayMs.toString());if(this._multiplier<1)throw(0,u.newError)("Multiplier should be >= 1.0: "+this._multiplier.toString());if(this._jitterFactor<0||this._jitterFactor>1)throw(0,u.newError)("Jitter factor should be in [0.0, 1.0]: "+this._jitterFactor.toFixed())},v}();function d(v,g){return v??g}e.TransactionExecutor=h},754:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(f,h,d,v){v===void 0&&(v=d);var g=Object.getOwnPropertyDescriptor(h,d);g&&!("get"in g?!h.__esModule:g.writable||g.configurable)||(g={enumerable:!0,get:function(){return h[d]}}),Object.defineProperty(f,v,g)}:function(f,h,d,v){v===void 0&&(v=d),f[v]=h[d]}),i=this&&this.__setModuleDefault||(Object.create?function(f,h){Object.defineProperty(f,"default",{enumerable:!0,value:h})}:function(f,h){f.default=h}),o=this&&this.__importStar||function(f){if(f&&f.__esModule)return f;var h={};if(f!=null)for(var d in f)d!=="default"&&Object.prototype.hasOwnProperty.call(f,d)&&n(h,f,d);return i(h,f),h};Object.defineProperty(e,"__esModule",{value:!0}),e.TxConfig=void 0;var a=o(t(6587)),s=t(9691),u=t(3371),l=function(){function f(h,d){(function(v){v!=null&&a.assertObject(v,"Transaction config")})(h),this.timeout=function(v,g){if(a.isObject(v)&&v.timeout!=null){a.assertNumberOrInteger(v.timeout,"Transaction timeout"),function(y){return typeof y.timeout=="number"&&!Number.isInteger(y.timeout)}(v)&&(g==null?void 0:g.isInfoEnabled())===!0&&(g==null||g.info("Transaction timeout expected to be an integer, got: ".concat(v.timeout,". The value will be rounded up.")));var _=(0,u.int)(v.timeout,{ceilFloat:!0});if(_.isNegative())throw(0,s.newError)("Transaction timeout should not be negative");return _}return null}(h,d),this.metadata=function(v){if(a.isObject(v)&&v.metadata!=null){var g=v.metadata;if(a.assertObject(g,"config.metadata"),Object.keys(g).length!==0)return g}return null}(h)}return f.empty=function(){return c},f.prototype.isEmpty=function(){return Object.values(this).every(function(h){return h==null})},f}();e.TxConfig=l;var c=new l({})},407:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(c){for(var f,h=1,d=arguments.length;h<d;h++)for(var v in f=arguments[h])Object.prototype.hasOwnProperty.call(f,v)&&(c[v]=f[v]);return c},n.apply(this,arguments)},i=this&&this.__read||function(c,f){var h=typeof Symbol=="function"&&c[Symbol.iterator];if(!h)return c;var d,v,g=h.call(c),_=[];try{for(;(f===void 0||f-- >0)&&!(d=g.next()).done;)_.push(d.value)}catch(y){v={error:y}}finally{try{d&&!d.done&&(h=g.return)&&h.call(g)}finally{if(v)throw v.error}}return _};Object.defineProperty(e,"__esModule",{value:!0}),e.Url=e.formatIPv6Address=e.formatIPv4Address=e.defaultPortForScheme=e.parseDatabaseUrl=void 0;var o=t(6587),a=function(c,f,h,d,v){this.scheme=c,this.host=f,this.port=h,this.hostAndPort=d,this.query=v};function s(c,f,h){if((c=(c??"").trim())==="")throw new Error("Illegal empty ".concat(f," in URL query '").concat(h,"'"));return c}function u(c){var f=c.charAt(0)==="[",h=c.charAt(c.length-1)==="]";if(f||h){if(f&&h)return c;throw new Error("Illegal IPv6 address ".concat(c))}return"[".concat(c,"]")}function l(c){return c==="http"?7474:c==="https"?7473:7687}e.Url=a,e.parseDatabaseUrl=function(c){var f;(0,o.assertString)(c,"URL");var h,d=function(C){return(C=C.trim()).includes("://")?{schemeMissing:!1,url:C}:{schemeMissing:!0,url:"none://".concat(C)}}(c),v=function(C){function P(D,L){var j=D.indexOf(L);return j>=0?[D.substring(0,j),D[j],D.substring(j+1)]:[D,"",""]}var T,R={};return(T=P(C,":"))[1]===":"&&(R.scheme=decodeURIComponent(T[0]),C=T[2]),(T=P(C,"#"))[1]==="#"&&(R.fragment=decodeURIComponent(T[2]),C=T[0]),(T=P(C,"?"))[1]==="?"&&(R.query=T[2],C=T[0]),C.startsWith("//")?(T=P(C.substr(2),"/"),(R=n(n({},R),function(D){var L,j,F,q,W={};(j=D,F="@",q=j.lastIndexOf(F),L=q>=0?[j.substring(0,q),j[q],j.substring(q+1)]:["","",j])[1]==="@"&&(W.userInfo=decodeURIComponent(L[0]),D=L[2]);var Z=i(function(ee,ue,de){var se=P(ee,ue),be=P(se[2],de);return[be[0],be[2]]}(D,"[","]"),2),Q=Z[0],re=Z[1];return Q!==""?(W.host=Q,L=P(re,":")):(L=P(D,":"),W.host=L[0]),L[1]===":"&&(W.port=L[2]),W}(T[0]))).path=T[1]+T[2]):R.path=C,R}(d.url),g=d.schemeMissing?null:function(C){return C!=null?((C=C.trim()).charAt(C.length-1)===":"&&(C=C.substring(0,C.length-1)),C):null}(v.scheme),_=function(C,P){if(C==null)throw new Error("Unable to extract host from null or undefined URL");return C.trim()}(v.host),y=function(C){if(C===""||C==null)throw new Error("Illegal host ".concat(C));return C.includes(":")?u(C):C}(_),p=function(C,P){var T=typeof C=="string"?parseInt(C,10):C;return T==null||isNaN(T)?l(P):T}(v.port,g),m="".concat(y,":").concat(p),E=function(C,P){var T=C!=null?function(D){return((D=(D??"").trim())==null?void 0:D.charAt(0))==="?"&&(D=D.substring(1,D.length)),D}(C):null,R={};return T!=null&&T.split("&").forEach(function(D){var L=D.split("=");if(L.length!==2)throw new Error("Invalid parameters: '".concat(L.toString(),"' in URL '").concat(P,"'."));var j=s(L[0],"key",P),F=s(L[1],"value",P);if(R[j]!==void 0)throw new Error("Duplicated query parameters with key '".concat(j,"' in URL '").concat(P,"'"));R[j]=F}),R}((f=v.query)!==null&&f!==void 0?f:typeof(h=v.resourceName)!="string"?null:i(h.split("?"),2)[1],c);return new a(g,_,p,m,E)},e.formatIPv4Address=function(c,f){return"".concat(c,":").concat(f)},e.formatIPv6Address=function(c,f){var h=u(c);return"".concat(h,":").concat(f)},e.defaultPortForScheme=l},6587:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(h,d,v,g){g===void 0&&(g=v);var _=Object.getOwnPropertyDescriptor(d,v);_&&!("get"in _?!d.__esModule:_.writable||_.configurable)||(_={enumerable:!0,get:function(){return d[v]}}),Object.defineProperty(h,g,_)}:function(h,d,v,g){g===void 0&&(g=v),h[g]=d[v]}),i=this&&this.__setModuleDefault||(Object.create?function(h,d){Object.defineProperty(h,"default",{enumerable:!0,value:d})}:function(h,d){h.default=d}),o=this&&this.__importStar||function(h){if(h&&h.__esModule)return h;var d={};if(h!=null)for(var v in h)v!=="default"&&Object.prototype.hasOwnProperty.call(h,v)&&n(d,h,v);return i(d,h),d},a=this&&this.__values||function(h){var d=typeof Symbol=="function"&&Symbol.iterator,v=d&&h[d],g=0;if(v)return v.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&g>=h.length&&(h=void 0),{value:h&&h[g++],done:!h}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.ENCRYPTION_OFF=e.ENCRYPTION_ON=e.equals=e.validateQueryAndParameters=e.toNumber=e.assertValidDate=e.assertNumberOrInteger=e.assertNumber=e.assertString=e.assertObject=e.isString=e.isObject=e.isEmptyObjectOrNull=void 0;var s=o(t(3371)),u=t(4027);function l(h){return typeof h=="object"&&!Array.isArray(h)&&h!==null}function c(h,d){if(!f(h))throw new TypeError((0,u.stringify)(d)+" expected to be string but was: "+(0,u.stringify)(h));return h}function f(h){return Object.prototype.toString.call(h)==="[object String]"}e.ENCRYPTION_ON="ENCRYPTION_ON",e.ENCRYPTION_OFF="ENCRYPTION_OFF",e.isEmptyObjectOrNull=function(h){if(h===null)return!0;if(!l(h))return!1;for(var d in h)if(h[d]!==void 0)return!1;return!0},e.isObject=l,e.validateQueryAndParameters=function(h,d,v){var g,_,y="",p=d??{},m=(g=v==null?void 0:v.skipAsserts)!==null&&g!==void 0&&g;return typeof h=="string"?y=h:h instanceof String?y=h.toString():typeof h=="object"&&h.text!=null&&(y=h.text,p=(_=h.parameters)!==null&&_!==void 0?_:{}),m||(function(E){if(c(E,"Cypher query"),E.trim().length===0)throw new TypeError("Cypher query is expected to be a non-empty string.")}(y),function(E){if(!l(E)){var C=E.constructor!=null?" "+E.constructor.name:"";throw new TypeError("Query parameters are expected to either be undefined/null or an object, given:".concat(C," ").concat(JSON.stringify(E)))}}(p)),{validatedQuery:y,params:p}},e.assertObject=function(h,d){if(!l(h))throw new TypeError(d+" expected to be an object but was: "+(0,u.stringify)(h));return h},e.assertString=c,e.assertNumber=function(h,d){if(typeof h!="number")throw new TypeError(d+" expected to be a number but was: "+(0,u.stringify)(h));return h},e.assertNumberOrInteger=function(h,d){if(typeof h!="number"&&typeof h!="bigint"&&!(0,s.isInt)(h))throw new TypeError(d+" expected to be either a number or an Integer object but was: "+(0,u.stringify)(h));return h},e.assertValidDate=function(h,d){if(Object.prototype.toString.call(h)!=="[object Date]")throw new TypeError(d+" expected to be a standard JavaScript Date but was: "+(0,u.stringify)(h));if(Number.isNaN(h.getTime()))throw new TypeError(d+" expected to be valid JavaScript Date but its time was NaN: "+(0,u.stringify)(h));return h},e.isString=f,e.equals=function h(d,v){var g,_;if(d===v)return!0;if(d===null||v===null)return!1;if(typeof d=="object"&&typeof v=="object"){var y=Object.keys(d),p=Object.keys(v);if(y.length!==p.length)return!1;try{for(var m=a(y),E=m.next();!E.done;E=m.next()){var C=E.value;if(!h(d[C],v[C]))return!1}}catch(P){g={error:P}}finally{try{E&&!E.done&&(_=m.return)&&_.call(m)}finally{if(g)throw g.error}}return!0}return!1},e.toNumber=function(h){return h instanceof s.default?h.toNumber():typeof h=="bigint"?(0,s.int)(h).toNumber():h}},4027:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.stringify=void 0;var n=t(93);e.stringify=function(i,o){return JSON.stringify(i,function(a,s){return(0,n.isBrokenObject)(s)?{__isBrokenObject__:!0,__reason__:(0,n.getBrokenObjectReason)(s)}:typeof s=="bigint"?"".concat(s,"n"):(o==null?void 0:o.useCustomToString)!==!0||typeof s!="object"||Array.isArray(s)||typeof s.toString!="function"||s.toString===Object.prototype.toString?s:s==null?void 0:s.toString()})}},1985:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.notificationFilterDisabledClassification=e.notificationFilterDisabledCategory=e.notificationFilterMinimumSeverityLevel=void 0;var t={OFF:"OFF",WARNING:"WARNING",INFORMATION:"INFORMATION"};e.notificationFilterMinimumSeverityLevel=t,Object.freeze(t);var n={HINT:"HINT",UNRECOGNIZED:"UNRECOGNIZED",UNSUPPORTED:"UNSUPPORTED",PERFORMANCE:"PERFORMANCE",TOPOLOGY:"TOPOLOGY",SECURITY:"SECURITY",DEPRECATION:"DEPRECATION",GENERIC:"GENERIC",SCHEMA:"SCHEMA"};e.notificationFilterDisabledCategory=n,Object.freeze(n);var i=n;e.notificationFilterDisabledClassification=i,e.default=function(){throw this.minimumSeverityLevel=void 0,this.disabledCategories=void 0,this.disabledClassifications=void 0,new Error("Not implemented")}},1866:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(F){for(var q,W=1,Z=arguments.length;W<Z;W++)for(var Q in q=arguments[W])Object.prototype.hasOwnProperty.call(q,Q)&&(F[Q]=q[Q]);return F},n.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(F,q,W,Z){Z===void 0&&(Z=W);var Q=Object.getOwnPropertyDescriptor(q,W);Q&&!("get"in Q?!q.__esModule:Q.writable||Q.configurable)||(Q={enumerable:!0,get:function(){return q[W]}}),Object.defineProperty(F,Z,Q)}:function(F,q,W,Z){Z===void 0&&(Z=W),F[Z]=q[W]}),o=this&&this.__setModuleDefault||(Object.create?function(F,q){Object.defineProperty(F,"default",{enumerable:!0,value:q})}:function(F,q){F.default=q}),a=this&&this.__importStar||function(F){if(F&&F.__esModule)return F;var q={};if(F!=null)for(var W in F)W!=="default"&&Object.prototype.hasOwnProperty.call(F,W)&&i(q,F,W);return o(q,F),q},s=this&&this.__read||function(F,q){var W=typeof Symbol=="function"&&F[Symbol.iterator];if(!W)return F;var Z,Q,re=W.call(F),ee=[];try{for(;(q===void 0||q-- >0)&&!(Z=re.next()).done;)ee.push(Z.value)}catch(ue){Q={error:ue}}finally{try{Z&&!Z.done&&(W=re.return)&&W.call(re)}finally{if(Q)throw Q.error}}return ee},u=this&&this.__spreadArray||function(F,q,W){if(W||arguments.length===2)for(var Z,Q=0,re=q.length;Q<re;Q++)!Z&&Q in q||(Z||(Z=Array.prototype.slice.call(q,0,Q)),Z[Q]=q[Q]);return F.concat(Z||Array.prototype.slice.call(q))};Object.defineProperty(e,"__esModule",{value:!0}),e.buildNotificationsFromMetadata=e.buildGqlStatusObjectFromMetadata=e.polyfillNotification=e.polyfillGqlStatusObject=e.GqlStatusObject=e.Notification=e.notificationClassification=e.notificationCategory=e.notificationSeverityLevel=void 0;var l=a(t(4027)),c=t(6995),f=t(1053),h={WARNING:{gql_status:"01N42",status_description:"warn: unknown warning"},NO_DATA:{gql_status:"02N42",status_description:"note: no data - unknown subcondition"},INFORMATION:{gql_status:"03N42",status_description:"info: unknown notification"}},d={WARNING:"WARNING",INFORMATION:"INFORMATION",UNKNOWN:"UNKNOWN"};e.notificationSeverityLevel=d,Object.freeze(d);var v=Object.values(d),g={HINT:"HINT",UNRECOGNIZED:"UNRECOGNIZED",UNSUPPORTED:"UNSUPPORTED",PERFORMANCE:"PERFORMANCE",DEPRECATION:"DEPRECATION",TOPOLOGY:"TOPOLOGY",SECURITY:"SECURITY",GENERIC:"GENERIC",SCHEMA:"SCHEMA",UNKNOWN:"UNKNOWN"};e.notificationCategory=g,Object.freeze(g);var _=Object.values(g),y=g;e.notificationClassification=y;var p=function(F){this.code=F.code,this.title=F.title,this.description=F.description,this.severity=F.severity,this.position=D(F.position),this.severityLevel=L(F.severity),this.rawSeverityLevel=F.severity,this.category=j(F.category),this.rawCategory=F.category};e.Notification=p;var m=function(){function F(q){var W;this.gqlStatus=q.gql_status,this.statusDescription=q.status_description,this.diagnosticRecord=(W=q.diagnostic_record)!==null&&W!==void 0?W:{},this.position=this.diagnosticRecord._position!=null?D(this.diagnosticRecord._position):void 0,this.severity=L(this.diagnosticRecord._severity),this.rawSeverity=this.diagnosticRecord._severity,this.classification=j(this.diagnosticRecord._classification),this.rawClassification=this.diagnosticRecord._classification,this.isNotification=q.neo4j_code!=null,Object.freeze(this)}return Object.defineProperty(F.prototype,"diagnosticRecordAsJsonString",{get:function(){return l.stringify(this.diagnosticRecord,{useCustomToString:!0})},enumerable:!1,configurable:!0}),F}();function E(F){var q,W,Z;if(F.neo4j_code!=null)return new p({code:F.neo4j_code,title:F.title,description:F.description,severity:(q=F.diagnostic_record)===null||q===void 0?void 0:q._severity,category:(W=F.diagnostic_record)===null||W===void 0?void 0:W._classification,position:(Z=F.diagnostic_record)===null||Z===void 0?void 0:Z._position})}function C(F){var q,W=F.severity===d.WARNING?h.WARNING:h.INFORMATION,Z={gql_status:W.gql_status,status_description:(q=F.description)!==null&&q!==void 0?q:W.status_description,neo4j_code:F.code,title:F.title,diagnostic_record:n({},f.rawPolyfilledDiagnosticRecord)};return F.severity!=null&&(Z.diagnostic_record._severity=F.severity),F.category!=null&&(Z.diagnostic_record._classification=F.category),F.position!=null&&(Z.diagnostic_record._position=F.position),new m(Z)}e.GqlStatusObject=m,e.polyfillNotification=E,e.polyfillGqlStatusObject=C;var P={SUCCESS:new m({gql_status:"00000",status_description:"note: successful completion",diagnostic_record:f.rawPolyfilledDiagnosticRecord}),NO_DATA:new m({gql_status:"02000",status_description:"note: no data",diagnostic_record:f.rawPolyfilledDiagnosticRecord}),NO_DATA_UNKNOWN_SUBCONDITION:new m(n(n({},h.NO_DATA),{diagnostic_record:f.rawPolyfilledDiagnosticRecord})),OMITTED_RESULT:new m({gql_status:"00001",status_description:"note: successful completion - omitted result",diagnostic_record:f.rawPolyfilledDiagnosticRecord})};Object.freeze(P),e.buildGqlStatusObjectFromMetadata=function(F){var q,W;if(F.statuses!=null)return F.statuses.map(function(re){return new m(re)});var Z,Q=((Z=F.stream_summary)==null?void 0:Z.have_records_streamed)===!0?P.SUCCESS:(Z==null?void 0:Z.has_keys)===!1?P.OMITTED_RESULT:(Z==null?void 0:Z.pulled)===!0?P.NO_DATA:P.NO_DATA_UNKNOWN_SUBCONDITION;return u([Q],s((W=(q=F.notifications)===null||q===void 0?void 0:q.map(C))!==null&&W!==void 0?W:[]),!1).sort(function(re,ee){return R(re)-R(ee)})};var T=Object.freeze({"02":0,"01":1,"00":2});function R(F){var q,W,Z=(q=F.gqlStatus)===null||q===void 0?void 0:q.slice(0,2);return(W=T[Z])!==null&&W!==void 0?W:9999}function D(F){return F==null?{}:{offset:c.util.toNumber(F.offset),line:c.util.toNumber(F.line),column:c.util.toNumber(F.column)}}function L(F){return v.includes(F)?F:d.UNKNOWN}function j(F){return _.includes(F)?F:y.UNKNOWN}e.buildNotificationsFromMetadata=function(F){return F.notifications!=null?F.notifications.map(function(q){return new p(q)}):F.statuses!=null?F.statuses.map(E).filter(function(q){return q!=null}):[]},e.default=p},4820:function(r,e,t){var n=this&&this.__generator||function(u,l){var c,f,h,d,v={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return d={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function g(_){return function(y){return function(p){if(c)throw new TypeError("Generator is already executing.");for(;d&&(d=0,p[0]&&(v=0)),v;)try{if(c=1,f&&(h=2&p[0]?f.return:p[0]?f.throw||((h=f.return)&&h.call(f),0):f.next)&&!(h=h.call(f,p[1])).done)return h;switch(f=0,h&&(p=[2&p[0],h.value]),p[0]){case 0:case 1:h=p;break;case 4:return v.label++,{value:p[1],done:!1};case 5:v.label++,f=p[1],p=[0];continue;case 7:p=v.ops.pop(),v.trys.pop();continue;default:if(!((h=(h=v.trys).length>0&&h[h.length-1])||p[0]!==6&&p[0]!==2)){v=0;continue}if(p[0]===3&&(!h||p[1]>h[0]&&p[1]<h[3])){v.label=p[1];break}if(p[0]===6&&v.label<h[1]){v.label=h[1],h=p;break}if(h&&v.label<h[2]){v.label=h[2],v.ops.push(p);break}h[2]&&v.ops.pop(),v.trys.pop();continue}p=l.call(u,v)}catch(m){p=[6,m],f=0}finally{c=h=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}([_,y])}}},i=this&&this.__values||function(u){var l=typeof Symbol=="function"&&Symbol.iterator,c=l&&u[l],f=0;if(c)return c.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&f>=u.length&&(u=void 0),{value:u&&u[f++],done:!u}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(u,l){var c=typeof Symbol=="function"&&u[Symbol.iterator];if(!c)return u;var f,h,d=c.call(u),v=[];try{for(;(l===void 0||l-- >0)&&!(f=d.next()).done;)v.push(f.value)}catch(g){h={error:g}}finally{try{f&&!f.done&&(c=d.return)&&c.call(d)}finally{if(h)throw h.error}}return v};Object.defineProperty(e,"__esModule",{value:!0});var a=t(9691),s=function(){function u(l,c,f){this.keys=l,this.length=l.length,this._fields=c,this._fieldLookup=f??function(h){var d={};return h.forEach(function(v,g){d[v]=g}),d}(l)}return u.prototype.forEach=function(l){var c,f;try{for(var h=i(this.entries()),d=h.next();!d.done;d=h.next()){var v=o(d.value,2),g=v[0];l(v[1],g,this)}}catch(_){c={error:_}}finally{try{d&&!d.done&&(f=h.return)&&f.call(h)}finally{if(c)throw c.error}}},u.prototype.map=function(l){var c,f,h=[];try{for(var d=i(this.entries()),v=d.next();!v.done;v=d.next()){var g=o(v.value,2),_=g[0],y=g[1];h.push(l(y,_,this))}}catch(p){c={error:p}}finally{try{v&&!v.done&&(f=d.return)&&f.call(d)}finally{if(c)throw c.error}}return h},u.prototype.entries=function(){var l;return n(this,function(c){switch(c.label){case 0:l=0,c.label=1;case 1:return l<this.keys.length?[4,[this.keys[l],this._fields[l]]]:[3,4];case 2:c.sent(),c.label=3;case 3:return l++,[3,1];case 4:return[2]}})},u.prototype.values=function(){var l;return n(this,function(c){switch(c.label){case 0:l=0,c.label=1;case 1:return l<this.keys.length?[4,this._fields[l]]:[3,4];case 2:c.sent(),c.label=3;case 3:return l++,[3,1];case 4:return[2]}})},u.prototype[Symbol.iterator]=function(){var l;return n(this,function(c){switch(c.label){case 0:l=0,c.label=1;case 1:return l<this.keys.length?[4,this._fields[l]]:[3,4];case 2:c.sent(),c.label=3;case 3:return l++,[3,1];case 4:return[2]}})},u.prototype.toObject=function(){var l,c,f={};try{for(var h=i(this.entries()),d=h.next();!d.done;d=h.next()){var v=o(d.value,2),g=v[0],_=v[1];f[g]=_}}catch(y){l={error:y}}finally{try{d&&!d.done&&(c=h.return)&&c.call(h)}finally{if(l)throw l.error}}return f},u.prototype.get=function(l){var c;if(typeof l!="number"){if((c=this._fieldLookup[l])===void 0)throw(0,a.newError)("This record has no field with key '".concat(l.toString(),"', available keys are: [")+this.keys.toString()+"].")}else c=l;if(c>this._fields.length-1||c<0)throw(0,a.newError)("This record has no field with index '"+c.toString()+"'. Remember that indexes start at `0`, and make sure your query returns records in the shape you meant it to.");return this._fields[c]},u.prototype.has=function(l){return typeof l=="number"?l>=0&&l<this._fields.length:this._fieldLookup[l]!==void 0},u}();e.default=s},8917:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,n,i){this.keys=t,this.records=n,this.summary=i}},6033:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Stats=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.ServerInfo=e.queryType=void 0;var n=t(6995),i=t(1866),o=function(){function f(h,d,v,g){var _,y,p;this.query={text:h,parameters:d},this.queryType=v.type,this.counters=new u((_=v.stats)!==null&&_!==void 0?_:{}),this.updateStatistics=this.counters,this.plan=(v.plan!=null||v.profile!=null)&&new a((y=v.plan)!==null&&y!==void 0?y:v.profile),this.profile=v.profile!=null&&new s(v.profile),this.notifications=(0,i.buildNotificationsFromMetadata)(v),this.gqlStatusObjects=(0,i.buildGqlStatusObjectFromMetadata)(v),this.server=new l(v.server,g),this.resultConsumedAfter=v.result_consumed_after,this.resultAvailableAfter=v.result_available_after,this.database={name:(p=v.db)!==null&&p!==void 0?p:null}}return f.prototype.hasPlan=function(){return this.plan instanceof a},f.prototype.hasProfile=function(){return this.profile instanceof s},f}(),a=function f(h){this.operatorType=h.operatorType,this.identifiers=h.identifiers,this.arguments=h.args,this.children=h.children!=null?h.children.map(function(d){return new f(d)}):[]};e.Plan=a;var s=function(){function f(h){this.operatorType=h.operatorType,this.identifiers=h.identifiers,this.arguments=h.args,this.dbHits=c("dbHits",h),this.rows=c("rows",h),this.pageCacheMisses=c("pageCacheMisses",h),this.pageCacheHits=c("pageCacheHits",h),this.pageCacheHitRatio=c("pageCacheHitRatio",h),this.time=c("time",h),this.children=h.children!=null?h.children.map(function(d){return new f(d)}):[]}return f.prototype.hasPageCacheStats=function(){return this.pageCacheMisses>0||this.pageCacheHits>0||this.pageCacheHitRatio>0},f}();e.ProfiledPlan=s,e.Stats=function(){this.nodesCreated=0,this.nodesDeleted=0,this.relationshipsCreated=0,this.relationshipsDeleted=0,this.propertiesSet=0,this.labelsAdded=0,this.labelsRemoved=0,this.indexesAdded=0,this.indexesRemoved=0,this.constraintsAdded=0,this.constraintsRemoved=0};var u=function(){function f(h){var d=this;this._stats={nodesCreated:0,nodesDeleted:0,relationshipsCreated:0,relationshipsDeleted:0,propertiesSet:0,labelsAdded:0,labelsRemoved:0,indexesAdded:0,indexesRemoved:0,constraintsAdded:0,constraintsRemoved:0},this._systemUpdates=0,Object.keys(h).forEach(function(v){var g=v.replace(/(-\w)/g,function(_){return _[1].toUpperCase()});g in d._stats?d._stats[g]=n.util.toNumber(h[v]):g==="systemUpdates"?d._systemUpdates=n.util.toNumber(h[v]):g==="containsSystemUpdates"?d._containsSystemUpdates=h[v]:g==="containsUpdates"&&(d._containsUpdates=h[v])}),this._stats=Object.freeze(this._stats)}return f.prototype.containsUpdates=function(){var h=this;return this._containsUpdates!==void 0?this._containsUpdates:Object.keys(this._stats).reduce(function(d,v){return d+h._stats[v]},0)>0},f.prototype.updates=function(){return this._stats},f.prototype.containsSystemUpdates=function(){return this._containsSystemUpdates!==void 0?this._containsSystemUpdates:this._systemUpdates>0},f.prototype.systemUpdates=function(){return this._systemUpdates},f}();e.QueryStatistics=u;var l=function(f,h){f!=null&&(this.address=f.address,this.agent=f.version),this.protocolVersion=h};function c(f,h,d){if(d===void 0&&(d=0),h!==!1&&f in h){var v=h[f];return n.util.toNumber(v)}return d}e.ServerInfo=l,e.queryType={READ_ONLY:"r",READ_WRITE:"rw",WRITE_ONLY:"w",SCHEMA_WRITE:"s"},e.default=o},1573:function(r,e,t){var n=this&&this.__awaiter||function(d,v,g,_){return new(g||(g=Promise))(function(y,p){function m(P){try{C(_.next(P))}catch(T){p(T)}}function E(P){try{C(_.throw(P))}catch(T){p(T)}}function C(P){var T;P.done?y(P.value):(T=P.value,T instanceof g?T:new g(function(R){R(T)})).then(m,E)}C((_=_.apply(d,v||[])).next())})},i=this&&this.__generator||function(d,v){var g,_,y,p,m={label:0,sent:function(){if(1&y[0])throw y[1];return y[1]},trys:[],ops:[]};return p={next:E(0),throw:E(1),return:E(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function E(C){return function(P){return function(T){if(g)throw new TypeError("Generator is already executing.");for(;p&&(p=0,T[0]&&(m=0)),m;)try{if(g=1,_&&(y=2&T[0]?_.return:T[0]?_.throw||((y=_.return)&&y.call(_),0):_.next)&&!(y=y.call(_,T[1])).done)return y;switch(_=0,y&&(T=[2&T[0],y.value]),T[0]){case 0:case 1:y=T;break;case 4:return m.label++,{value:T[1],done:!1};case 5:m.label++,_=T[1],T=[0];continue;case 7:T=m.ops.pop(),m.trys.pop();continue;default:if(!((y=(y=m.trys).length>0&&y[y.length-1])||T[0]!==6&&T[0]!==2)){m=0;continue}if(T[0]===3&&(!y||T[1]>y[0]&&T[1]<y[3])){m.label=T[1];break}if(T[0]===6&&m.label<y[1]){m.label=y[1],y=T;break}if(y&&m.label<y[2]){m.label=y[2],m.ops.push(T);break}y[2]&&m.ops.pop(),m.trys.pop();continue}T=v.call(d,m)}catch(R){T=[6,R],_=0}finally{g=y=0}if(5&T[0])throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}([C,P])}}},o=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(t(8917)),s=t(9691),u=new(function(){function d(){}return d.prototype.eagerResultTransformer=function(){return l},d.prototype.eager=function(){return l},d.prototype.mappedResultTransformer=function(v){return c(v)},d.prototype.mapped=function(v){return c(v)},d.prototype.first=function(){return f},d.prototype.summary=function(){return h},d}());function l(d){return n(this,void 0,void 0,function(){var v,g,_,y;return i(this,function(p){switch(p.label){case 0:return[4,d];case 1:return v=p.sent(),g=v.summary,_=v.records,[4,d.keys()];case 2:return y=p.sent(),[2,new a.default(y,_,g)]}})})}function c(d){var v=this;if(d==null||d.collect==null&&d.map==null)throw(0,s.newError)("Requires a map or/and a collect functions.");return function(g){return n(v,void 0,void 0,function(){return i(this,function(_){switch(_.label){case 0:return[4,new Promise(function(y,p){var m={records:[],keys:[]};g.subscribe({onKeys:function(E){m.keys=E},onNext:function(E){if(d.map!=null){var C=d.map(E);C!==void 0&&m.records.push(C)}else m.records.push(E)},onCompleted:function(E){if(d.collect!=null)y(d.collect(m.records,E,m.keys));else{var C={records:m.records,summary:E,keys:m.keys};y(C)}},onError:function(E){p(E)}})})];case 1:return[2,_.sent()]}})})}}function f(d){return n(this,void 0,void 0,function(){var v,g,_,y;return i(this,function(p){switch(p.label){case 0:return[4,(v=d[Symbol.asyncIterator]()).next()];case 1:g=p.sent(),_=g.value,y=g.done,p.label=2;case 2:return p.trys.push([2,,3,6]),y===!0?[2,void 0]:[2,_];case 3:return v.return==null?[3,5]:[4,v.return()];case 4:p.sent(),p.label=5;case 5:return[7];case 6:return[2]}})})}function h(d){return n(this,void 0,void 0,function(){return i(this,function(v){switch(v.label){case 0:return[4,d.summary()];case 1:return[2,v.sent()]}})})}Object.freeze(u),e.default=u},9512:function(r,e,t){var n,i=this&&this.__awaiter||function(g,_,y,p){return new(y||(y=Promise))(function(m,E){function C(R){try{T(p.next(R))}catch(D){E(D)}}function P(R){try{T(p.throw(R))}catch(D){E(D)}}function T(R){var D;R.done?m(R.value):(D=R.value,D instanceof y?D:new y(function(L){L(D)})).then(C,P)}T((p=p.apply(g,_||[])).next())})},o=this&&this.__generator||function(g,_){var y,p,m,E,C={label:0,sent:function(){if(1&m[0])throw m[1];return m[1]},trys:[],ops:[]};return E={next:P(0),throw:P(1),return:P(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function P(T){return function(R){return function(D){if(y)throw new TypeError("Generator is already executing.");for(;E&&(E=0,D[0]&&(C=0)),C;)try{if(y=1,p&&(m=2&D[0]?p.return:D[0]?p.throw||((m=p.return)&&m.call(p),0):p.next)&&!(m=m.call(p,D[1])).done)return m;switch(p=0,m&&(D=[2&D[0],m.value]),D[0]){case 0:case 1:m=D;break;case 4:return C.label++,{value:D[1],done:!1};case 5:C.label++,p=D[1],D=[0];continue;case 7:D=C.ops.pop(),C.trys.pop();continue;default:if(!((m=(m=C.trys).length>0&&m[m.length-1])||D[0]!==6&&D[0]!==2)){C=0;continue}if(D[0]===3&&(!m||D[1]>m[0]&&D[1]<m[3])){C.label=D[1];break}if(D[0]===6&&C.label<m[1]){C.label=m[1],m=D;break}if(m&&C.label<m[2]){C.label=m[2],C.ops.push(D);break}m[2]&&C.ops.pop(),C.trys.pop();continue}D=_.call(g,C)}catch(L){D=[6,L],p=0}finally{y=m=0}if(5&D[0])throw D[1];return{value:D[0]?D[1]:void 0,done:!0}}([T,R])}}},a=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(e,"__esModule",{value:!0});var s=a(t(6033)),u=t(6995),l=t(9691),c=u.connectionHolder.EMPTY_CONNECTION_HOLDER,f=function(g){""+g},h=function(g){},d=function(g){},v=function(){function g(_,y,p,m,E){var C;E===void 0&&(E={high:Number.MAX_VALUE,low:Number.MAX_VALUE}),this[n]="Result",this._stack=(C=new Error("")).stack!=null?C.stack.replace(/^Error(\n\r)*/,""):null,this._streamObserverPromise=_,this._p=null,this._query=y,this._parameters=p??{},this._connectionHolder=m??c,this._keys=null,this._summary=null,this._error=null,this._watermarks=E}return g.prototype.keys=function(){var _=this;return this._keys!==null?Promise.resolve(this._keys):this._error!==null?Promise.reject(this._error):new Promise(function(y,p){_._streamObserverPromise.then(function(m){return m.subscribe(_._decorateObserver({onKeys:function(E){return y(E)},onError:function(E){return p(E)}}))}).catch(p)})},g.prototype.summary=function(){var _=this;return this._summary!==null?Promise.resolve(this._summary):this._error!==null?Promise.reject(this._error):new Promise(function(y,p){_._streamObserverPromise.then(function(m){m.cancel(),m.subscribe(_._decorateObserver({onCompleted:function(E){return y(E)},onError:function(E){return p(E)}}))}).catch(p)})},g.prototype._getOrCreatePromise=function(){var _=this;return this._p==null&&(this._p=new Promise(function(y,p){var m=[],E={onNext:function(C){m.push(C)},onCompleted:function(C){y({records:m,summary:C})},onError:function(C){p(C)}};_.subscribe(E)})),this._p},g.prototype[Symbol.asyncIterator]=function(){var _=this;if(!this.isOpen()){var y=(0,l.newError)("Result is already consumed");return{next:function(){return Promise.reject(y)},peek:function(){return Promise.reject(y)}}}var p={paused:!0,firstRun:!0,finished:!1},m=function(){var P,T;if(p.streaming!=null){var R=(T=(P=p.queuedObserver)===null||P===void 0?void 0:P.size)!==null&&T!==void 0?T:0,D=R>=_._watermarks.high,L=R<=_._watermarks.low;D&&!p.paused?(p.paused=!0,p.streaming.pause()):(L&&p.paused||p.firstRun&&!D)&&(p.firstRun=!1,p.paused=!1,p.streaming.resume())}},E=function(){return i(_,void 0,void 0,function(){var P;return o(this,function(T){switch(T.label){case 0:return p.queuedObserver!==void 0?[3,2]:(p.queuedObserver=this._createQueuedResultObserver(m),P=p,[4,this._subscribe(p.queuedObserver,!0).catch(function(){})]);case 1:P.streaming=T.sent(),m(),T.label=2;case 2:return[2,p.queuedObserver]}})})},C=function(P){if(P===void 0)throw(0,l.newError)("InvalidState: Result stream finished without Summary",l.PROTOCOL_ERROR);return!0};return{next:function(){return i(_,void 0,void 0,function(){var P;return o(this,function(T){switch(T.label){case 0:return p.finished&&C(p.summary)?[2,{done:!0,value:p.summary}]:[4,E()];case 1:return[4,T.sent().dequeue()];case 2:return(P=T.sent()).done===!0&&(p.finished=P.done,p.summary=P.value),[2,P]}})})},return:function(P){return i(_,void 0,void 0,function(){var T,R;return o(this,function(D){switch(D.label){case 0:return p.finished&&C(p.summary)?[2,{done:!0,value:P??p.summary}]:((R=p.streaming)===null||R===void 0||R.cancel(),[4,E()]);case 1:return[4,D.sent().dequeueUntilDone()];case 2:return T=D.sent(),p.finished=!0,T.value=P??T.value,p.summary=T.value,[2,T]}})})},peek:function(){return i(_,void 0,void 0,function(){return o(this,function(P){switch(P.label){case 0:return p.finished&&C(p.summary)?[2,{done:!0,value:p.summary}]:[4,E()];case 1:return[4,P.sent().head()];case 2:return[2,P.sent()]}})})}}},g.prototype.then=function(_,y){return this._getOrCreatePromise().then(_,y)},g.prototype.catch=function(_){return this._getOrCreatePromise().catch(_)},g.prototype.finally=function(_){return this._getOrCreatePromise().finally(_)},g.prototype.subscribe=function(_){this._subscribe(_).catch(function(){})},g.prototype.isOpen=function(){return this._summary===null&&this._error===null},g.prototype._subscribe=function(_,y){y===void 0&&(y=!1);var p=this._decorateObserver(_);return this._streamObserverPromise.then(function(m){return y&&m.pause(),m.subscribe(p),m}).catch(function(m){return p.onError!=null&&p.onError(m),Promise.reject(m)})},g.prototype._decorateObserver=function(_){var y,p,m,E=this,C=(y=_.onCompleted)!==null&&y!==void 0?y:h,P=(p=_.onError)!==null&&p!==void 0?p:f,T=(m=_.onKeys)!==null&&m!==void 0?m:d;return{onNext:_.onNext!=null?_.onNext.bind(_):void 0,onKeys:function(R){return E._keys=R,T.call(_,R)},onCompleted:function(R){E._releaseConnectionAndGetSummary(R).then(function(D){return E._summary!==null?C.call(_,E._summary):(E._summary=D,C.call(_,D))}).catch(P)},onError:function(R){E._connectionHolder.releaseConnection().then(function(){(function(D,L){L!=null&&(D.stack=D.toString()+`
`+L)})(R,E._stack),E._error=R,P.call(_,R)}).catch(P)}}},g.prototype._cancel=function(){this._summary===null&&this._error===null&&this._streamObserverPromise.then(function(_){return _.cancel()}).catch(function(){})},g.prototype._releaseConnectionAndGetSummary=function(_){var y=u.util.validateQueryAndParameters(this._query,this._parameters,{skipAsserts:!0}),p=y.validatedQuery,m=y.params,E=this._connectionHolder;return E.getConnection().then(function(C){return E.releaseConnection().then(function(){return C==null?void 0:C.getProtocolVersion()})},function(C){}).then(function(C){return new s.default(p,m,_,C)})},g.prototype._createQueuedResultObserver=function(_){var y=this;function p(){var R={};return R.promise=new Promise(function(D,L){R.resolve=D,R.reject=L}),R}function m(R){return R instanceof Error}function E(){var R;return i(this,void 0,void 0,function(){var D;return o(this,function(L){switch(L.label){case 0:if(C.length>0){if(D=(R=C.shift())!==null&&R!==void 0?R:(0,l.newError)("Unexpected empty buffer",l.PROTOCOL_ERROR),_(),m(D))throw D;return[2,D]}return P.resolvable=p(),[4,P.resolvable.promise];case 1:return[2,L.sent()]}})})}var C=[],P={resolvable:null},T={onNext:function(R){T._push({done:!1,value:R})},onCompleted:function(R){T._push({done:!0,value:R})},onError:function(R){T._push(R)},_push:function(R){if(P.resolvable!==null){var D=P.resolvable;P.resolvable=null,m(R)?D.reject(R):D.resolve(R)}else C.push(R),_()},dequeue:E,dequeueUntilDone:function(){return i(y,void 0,void 0,function(){var R;return o(this,function(D){switch(D.label){case 0:return[4,E()];case 1:return(R=D.sent()).done===!0?[2,R]:[3,0];case 2:return[2]}})})},head:function(){return i(y,void 0,void 0,function(){var R,D;return o(this,function(L){switch(L.label){case 0:if(C.length>0){if(m(R=C[0]))throw R;return[2,R]}P.resolvable=p(),L.label=1;case 1:return L.trys.push([1,3,4,5]),[4,P.resolvable.promise];case 2:return R=L.sent(),C.unshift(R),[2,R];case 3:throw D=L.sent(),C.unshift(D),D;case 4:return _(),[7];case 5:return[2]}})})},get size(){return C.length}};return T},g}();n=Symbol.toStringTag,e.default=v},5481:function(r,e,t){var n=this&&this.__awaiter||function(E,C,P,T){return new(P||(P=Promise))(function(R,D){function L(q){try{F(T.next(q))}catch(W){D(W)}}function j(q){try{F(T.throw(q))}catch(W){D(W)}}function F(q){var W;q.done?R(q.value):(W=q.value,W instanceof P?W:new P(function(Z){Z(W)})).then(L,j)}F((T=T.apply(E,C||[])).next())})},i=this&&this.__generator||function(E,C){var P,T,R,D,L={label:0,sent:function(){if(1&R[0])throw R[1];return R[1]},trys:[],ops:[]};return D={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(D[Symbol.iterator]=function(){return this}),D;function j(F){return function(q){return function(W){if(P)throw new TypeError("Generator is already executing.");for(;D&&(D=0,W[0]&&(L=0)),L;)try{if(P=1,T&&(R=2&W[0]?T.return:W[0]?T.throw||((R=T.return)&&R.call(T),0):T.next)&&!(R=R.call(T,W[1])).done)return R;switch(T=0,R&&(W=[2&W[0],R.value]),W[0]){case 0:case 1:R=W;break;case 4:return L.label++,{value:W[1],done:!1};case 5:L.label++,T=W[1],W=[0];continue;case 7:W=L.ops.pop(),L.trys.pop();continue;default:if(!((R=(R=L.trys).length>0&&R[R.length-1])||W[0]!==6&&W[0]!==2)){L=0;continue}if(W[0]===3&&(!R||W[1]>R[0]&&W[1]<R[3])){L.label=W[1];break}if(W[0]===6&&L.label<R[1]){L.label=R[1],R=W;break}if(R&&L.label<R[2]){L.label=R[2],L.ops.push(W);break}R[2]&&L.ops.pop(),L.trys.pop();continue}W=C.call(E,L)}catch(Z){W=[6,Z],T=0}finally{P=R=0}if(5&W[0])throw W[1];return{value:W[0]?W[1]:void 0,done:!0}}([F,q])}}},o=this&&this.__read||function(E,C){var P=typeof Symbol=="function"&&E[Symbol.iterator];if(!P)return E;var T,R,D=P.call(E),L=[];try{for(;(C===void 0||C-- >0)&&!(T=D.next()).done;)L.push(T.value)}catch(j){R={error:j}}finally{try{T&&!T.done&&(P=D.return)&&P.call(D)}finally{if(R)throw R.error}}return L},a=this&&this.__spreadArray||function(E,C,P){if(P||arguments.length===2)for(var T,R=0,D=C.length;R<D;R++)!T&&R in C||(T||(T=Array.prototype.slice.call(C,0,R)),T[R]=C[R]);return E.concat(T||Array.prototype.slice.call(C))},s=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(e,"__esModule",{value:!0});var u=t(2696),l=t(6587),c=t(326),f=t(9691),h=s(t(9512)),d=t(3618),v=t(6189),g=t(9730),_=t(754),y=s(t(4569)),p=s(t(5909)),m=function(){function E(C){var P=C.mode,T=C.connectionProvider,R=C.bookmarks,D=C.database,L=C.config,j=C.reactive,F=C.fetchSize,q=C.impersonatedUser,W=C.bookmarkManager,Z=C.notificationFilter,Q=C.auth,re=C.log;this._mode=P,this._database=D,this._reactive=j,this._fetchSize=F,this._onDatabaseNameResolved=this._onDatabaseNameResolved.bind(this),this._getConnectionAcquistionBookmarks=this._getConnectionAcquistionBookmarks.bind(this),this._readConnectionHolder=new d.ConnectionHolder({mode:c.ACCESS_MODE_READ,auth:Q,database:D,bookmarks:R,connectionProvider:T,impersonatedUser:q,onDatabaseNameResolved:this._onDatabaseNameResolved,getConnectionAcquistionBookmarks:this._getConnectionAcquistionBookmarks,log:re}),this._writeConnectionHolder=new d.ConnectionHolder({mode:c.ACCESS_MODE_WRITE,auth:Q,database:D,bookmarks:R,connectionProvider:T,impersonatedUser:q,onDatabaseNameResolved:this._onDatabaseNameResolved,getConnectionAcquistionBookmarks:this._getConnectionAcquistionBookmarks,log:re}),this._open=!0,this._hasTx=!1,this._impersonatedUser=q,this._lastBookmarks=R??g.Bookmarks.empty(),this._configuredBookmarks=this._lastBookmarks,this._transactionExecutor=function(ue){var de,se=(de=ue==null?void 0:ue.maxTransactionRetryTime)!==null&&de!==void 0?de:null;return new v.TransactionExecutor(se)}(L),this._databaseNameResolved=this._database!=="";var ee=this._calculateWatermaks();this._lowRecordWatermark=ee.low,this._highRecordWatermark=ee.high,this._results=[],this._bookmarkManager=W,this._notificationFilter=Z,this._log=re}return E.prototype.run=function(C,P,T){var R=this,D=(0,l.validateQueryAndParameters)(C,P),L=D.validatedQuery,j=D.params,F=T!=null?new _.TxConfig(T,this._log):_.TxConfig.empty(),q=this._run(L,j,function(W){return n(R,void 0,void 0,function(){var Z,Q=this;return i(this,function(re){switch(re.label){case 0:return[4,this._bookmarks()];case 1:return Z=re.sent(),this._assertSessionIsOpen(),[2,W.run(L,j,{bookmarks:Z,txConfig:F,mode:this._mode,database:this._database,apiTelemetryConfig:{api:c.TELEMETRY_APIS.AUTO_COMMIT_TRANSACTION},impersonatedUser:this._impersonatedUser,afterComplete:function(ee){return Q._onCompleteCallback(ee,Z)},reactive:this._reactive,fetchSize:this._fetchSize,lowRecordWatermark:this._lowRecordWatermark,highRecordWatermark:this._highRecordWatermark,notificationFilter:this._notificationFilter})]}})})});return this._results.push(q),q},E.prototype._run=function(C,P,T){var R=this._acquireAndConsumeConnection(T),D=R.connectionHolder,L=R.resultPromise.catch(function(F){return Promise.resolve(new u.FailedObserver({error:F}))}),j={high:this._highRecordWatermark,low:this._lowRecordWatermark};return new h.default(L,C,P,D,j)},E.prototype._acquireConnection=function(C){var P=this,T=this._acquireAndConsumeConnection(C),R=T.connectionHolder;return T.resultPromise.then(function(D){return n(P,void 0,void 0,function(){return i(this,function(L){switch(L.label){case 0:return[4,R.releaseConnection()];case 1:return L.sent(),[2,D]}})})})},E.prototype._acquireAndConsumeConnection=function(C){var P,T=this._connectionHolderWithMode(this._mode);return P=this._open?!this._hasTx&&T.initializeConnection()?T.getConnection().then(function(R){return C(R)}):Promise.reject((0,f.newError)("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")):Promise.reject((0,f.newError)("Cannot run query in a closed session.")),{connectionHolder:T,resultPromise:P}},E.prototype.beginTransaction=function(C){var P=C,T=_.TxConfig.empty();return P!=null&&(T=new _.TxConfig(P,this._log)),this._beginTransaction(this._mode,T,{api:c.TELEMETRY_APIS.UNMANAGED_TRANSACTION})},E.prototype._beginTransaction=function(C,P,T){var R=this;if(!this._open)throw(0,f.newError)("Cannot begin a transaction on a closed session.");if(this._hasTx)throw(0,f.newError)("You cannot begin a transaction on a session with an open transaction; either run from within the transaction or use a different session.");var D=E._validateSessionMode(C),L=this._connectionHolderWithMode(D);L.initializeConnection(),this._hasTx=!0;var j=new y.default({connectionHolder:L,impersonatedUser:this._impersonatedUser,onClose:this._transactionClosed.bind(this),onBookmarks:function(F,q,W){return R._updateBookmarks(F,q,W)},onConnection:this._assertSessionIsOpen.bind(this),reactive:this._reactive,fetchSize:this._fetchSize,lowRecordWatermark:this._lowRecordWatermark,highRecordWatermark:this._highRecordWatermark,notificationFilter:this._notificationFilter,apiTelemetryConfig:T});return j._begin(function(){return R._bookmarks()},P),j},E.prototype._assertSessionIsOpen=function(){if(!this._open)throw(0,f.newError)("You cannot run more transactions on a closed session.")},E.prototype._transactionClosed=function(){this._hasTx=!1},E.prototype.lastBookmark=function(){return this.lastBookmarks()},E.prototype.lastBookmarks=function(){return this._lastBookmarks.values()},E.prototype._bookmarks=function(){var C;return n(this,void 0,void 0,function(){var P;return i(this,function(T){switch(T.label){case 0:return[4,(C=this._bookmarkManager)===null||C===void 0?void 0:C.getBookmarks()];case 1:return(P=T.sent())===void 0?[2,this._lastBookmarks]:[2,new g.Bookmarks(a(a([],o(P),!1),o(this._configuredBookmarks),!1))]}})})},E.prototype.readTransaction=function(C,P){var T=new _.TxConfig(P,this._log);return this._runTransaction(c.ACCESS_MODE_READ,T,C)},E.prototype.writeTransaction=function(C,P){var T=new _.TxConfig(P,this._log);return this._runTransaction(c.ACCESS_MODE_WRITE,T,C)},E.prototype._runTransaction=function(C,P,T){var R=this;return this._transactionExecutor.execute(function(D){return R._beginTransaction(C,P,D)},T)},E.prototype.executeRead=function(C,P){var T=new _.TxConfig(P,this._log);return this._executeInTransaction(c.ACCESS_MODE_READ,T,C)},E.prototype.executeWrite=function(C,P){var T=new _.TxConfig(P,this._log);return this._executeInTransaction(c.ACCESS_MODE_WRITE,T,C)},E.prototype._executeInTransaction=function(C,P,T){var R=this;return this._transactionExecutor.execute(function(D){return R._beginTransaction(C,P,D)},T,p.default.fromTransaction)},E.prototype._onDatabaseNameResolved=function(C){if(!this._databaseNameResolved){var P=C??"";this._database=P,this._readConnectionHolder.setDatabase(P),this._writeConnectionHolder.setDatabase(P),this._databaseNameResolved=!0}},E.prototype._getConnectionAcquistionBookmarks=function(){var C;return n(this,void 0,void 0,function(){var P;return i(this,function(T){switch(T.label){case 0:return[4,(C=this._bookmarkManager)===null||C===void 0?void 0:C.getBookmarks()];case 1:return(P=T.sent())===void 0?[2,this._lastBookmarks]:[2,new g.Bookmarks(a(a([],o(this._configuredBookmarks),!1),o(P),!1))]}})})},E.prototype._updateBookmarks=function(C,P,T){var R,D,L;C==null||C.isEmpty()||((R=this._bookmarkManager)===null||R===void 0||R.updateBookmarks((D=P==null?void 0:P.values())!==null&&D!==void 0?D:[],(L=C==null?void 0:C.values())!==null&&L!==void 0?L:[]).catch(function(){}),this._lastBookmarks=C,this._configuredBookmarks=g.Bookmarks.empty())},E.prototype.close=function(){return n(this,void 0,void 0,function(){return i(this,function(C){switch(C.label){case 0:return this._open?(this._open=!1,this._results.forEach(function(P){return P._cancel()}),this._transactionExecutor.close(),[4,this._readConnectionHolder.close(this._hasTx)]):[3,3];case 1:return C.sent(),[4,this._writeConnectionHolder.close(this._hasTx)];case 2:C.sent(),C.label=3;case 3:return[2]}})})},E.prototype[Symbol.asyncDispose]=function(){return this.close()},E.prototype._connectionHolderWithMode=function(C){if(C===c.ACCESS_MODE_READ)return this._readConnectionHolder;if(C===c.ACCESS_MODE_WRITE)return this._writeConnectionHolder;throw(0,f.newError)("Unknown access mode: "+C)},E.prototype._onCompleteCallback=function(C,P){this._updateBookmarks(new g.Bookmarks(C.bookmark),P,C.db)},E.prototype._calculateWatermaks=function(){return this._fetchSize===c.FETCH_ALL?{low:Number.MAX_VALUE,high:Number.MAX_VALUE}:{low:.3*this._fetchSize,high:.7*this._fetchSize}},E.prototype._configureTransactionExecutor=function(C,P){this._transactionExecutor.pipelineBegin=C,this._transactionExecutor.telemetryApi=P},E._validateSessionMode=function(C){var P=C??c.ACCESS_MODE_WRITE;if(P!==c.ACCESS_MODE_READ&&P!==c.ACCESS_MODE_WRITE)throw(0,f.newError)("Illegal session mode "+P);return P},E}();e.default=m},7093:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isPoint=e.Point=void 0;var n=t(6587),i="__isPoint__",o=function(){function s(u,l,c,f){this.srid=(0,n.assertNumberOrInteger)(u,"SRID"),this.x=(0,n.assertNumber)(l,"X coordinate"),this.y=(0,n.assertNumber)(c,"Y coordinate"),this.z=f==null?f:(0,n.assertNumber)(f,"Z coordinate"),Object.freeze(this)}return s.prototype.toString=function(){return this.z==null||isNaN(this.z)?"Point{srid=".concat(a(this.srid),", x=").concat(a(this.x),", y=").concat(a(this.y),"}"):"Point{srid=".concat(a(this.srid),", x=").concat(a(this.x),", y=").concat(a(this.y),", z=").concat(a(this.z),"}")},s}();function a(s){return Number.isInteger(s)?s.toString()+".0":s.toString()}e.Point=o,Object.defineProperty(o.prototype,i,{value:!0,enumerable:!1,configurable:!1,writable:!1}),e.isPoint=function(s){return s!=null&&s[i]===!0}},5459:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(j,F,q,W){W===void 0&&(W=q);var Z=Object.getOwnPropertyDescriptor(F,q);Z&&!("get"in Z?!F.__esModule:Z.writable||Z.configurable)||(Z={enumerable:!0,get:function(){return F[q]}}),Object.defineProperty(j,W,Z)}:function(j,F,q,W){W===void 0&&(W=q),j[W]=F[q]}),i=this&&this.__setModuleDefault||(Object.create?function(j,F){Object.defineProperty(j,"default",{enumerable:!0,value:F})}:function(j,F){j.default=F}),o=this&&this.__importStar||function(j){if(j&&j.__esModule)return j;var F={};if(j!=null)for(var q in j)q!=="default"&&Object.prototype.hasOwnProperty.call(j,q)&&n(F,j,q);return i(F,j),F},a=this&&this.__read||function(j,F){var q=typeof Symbol=="function"&&j[Symbol.iterator];if(!q)return j;var W,Z,Q=q.call(j),re=[];try{for(;(F===void 0||F-- >0)&&!(W=Q.next()).done;)re.push(W.value)}catch(ee){Z={error:ee}}finally{try{W&&!W.done&&(q=Q.return)&&q.call(Q)}finally{if(Z)throw Z.error}}return re};Object.defineProperty(e,"__esModule",{value:!0}),e.isDateTime=e.DateTime=e.isLocalDateTime=e.LocalDateTime=e.isDate=e.Date=e.isTime=e.Time=e.isLocalTime=e.LocalTime=e.isDuration=e.Duration=void 0;var s=o(t(5022)),u=t(6587),l=t(9691),c=o(t(3371)),f={value:!0,enumerable:!1,configurable:!1,writable:!1},h="__isDuration__",d="__isLocalTime__",v="__isTime__",g="__isDate__",_="__isLocalDateTime__",y="__isDateTime__",p=function(){function j(F,q,W,Z){this.months=(0,u.assertNumberOrInteger)(F,"Months"),this.days=(0,u.assertNumberOrInteger)(q,"Days"),(0,u.assertNumberOrInteger)(W,"Seconds"),(0,u.assertNumberOrInteger)(Z,"Nanoseconds"),this.seconds=s.normalizeSecondsForDuration(W,Z),this.nanoseconds=s.normalizeNanosecondsForDuration(Z),Object.freeze(this)}return j.prototype.toString=function(){return s.durationToIsoString(this.months,this.days,this.seconds,this.nanoseconds)},j}();e.Duration=p,Object.defineProperty(p.prototype,h,f),e.isDuration=function(j){return R(j,h)};var m=function(){function j(F,q,W,Z){this.hour=s.assertValidHour(F),this.minute=s.assertValidMinute(q),this.second=s.assertValidSecond(W),this.nanosecond=s.assertValidNanosecond(Z),Object.freeze(this)}return j.fromStandardDate=function(F,q){L(F,q);var W=s.totalNanoseconds(F,q);return new j(F.getHours(),F.getMinutes(),F.getSeconds(),W instanceof c.default?W.toInt():typeof W=="bigint"?(0,c.int)(W).toInt():W)},j.prototype.toString=function(){return s.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)},j}();e.LocalTime=m,Object.defineProperty(m.prototype,d,f),e.isLocalTime=function(j){return R(j,d)};var E=function(){function j(F,q,W,Z,Q){this.hour=s.assertValidHour(F),this.minute=s.assertValidMinute(q),this.second=s.assertValidSecond(W),this.nanosecond=s.assertValidNanosecond(Z),this.timeZoneOffsetSeconds=(0,u.assertNumberOrInteger)(Q,"Time zone offset in seconds"),Object.freeze(this)}return j.fromStandardDate=function(F,q){return L(F,q),new j(F.getHours(),F.getMinutes(),F.getSeconds(),(0,c.toNumber)(s.totalNanoseconds(F,q)),s.timeZoneOffsetInSeconds(F))},j.prototype.toString=function(){return s.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)+s.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds)},j}();e.Time=E,Object.defineProperty(E.prototype,v,f),e.isTime=function(j){return R(j,v)};var C=function(){function j(F,q,W){this.year=s.assertValidYear(F),this.month=s.assertValidMonth(q),this.day=s.assertValidDay(W),Object.freeze(this)}return j.fromStandardDate=function(F){return L(F),new j(F.getFullYear(),F.getMonth()+1,F.getDate())},j.prototype.toStandardDate=function(){return s.isoStringToStandardDate(this.toString())},j.prototype.toString=function(){return s.dateToIsoString(this.year,this.month,this.day)},j}();e.Date=C,Object.defineProperty(C.prototype,g,f),e.isDate=function(j){return R(j,g)};var P=function(){function j(F,q,W,Z,Q,re,ee){this.year=s.assertValidYear(F),this.month=s.assertValidMonth(q),this.day=s.assertValidDay(W),this.hour=s.assertValidHour(Z),this.minute=s.assertValidMinute(Q),this.second=s.assertValidSecond(re),this.nanosecond=s.assertValidNanosecond(ee),Object.freeze(this)}return j.fromStandardDate=function(F,q){return L(F,q),new j(F.getFullYear(),F.getMonth()+1,F.getDate(),F.getHours(),F.getMinutes(),F.getSeconds(),(0,c.toNumber)(s.totalNanoseconds(F,q)))},j.prototype.toStandardDate=function(){return s.isoStringToStandardDate(this.toString())},j.prototype.toString=function(){return D(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)},j}();e.LocalDateTime=P,Object.defineProperty(P.prototype,_,f),e.isLocalDateTime=function(j){return R(j,_)};var T=function(){function j(F,q,W,Z,Q,re,ee,ue,de){this.year=s.assertValidYear(F),this.month=s.assertValidMonth(q),this.day=s.assertValidDay(W),this.hour=s.assertValidHour(Z),this.minute=s.assertValidMinute(Q),this.second=s.assertValidSecond(re),this.nanosecond=s.assertValidNanosecond(ee);var se=a(function(fe,ce){var Ee=fe!=null,Ce=ce!=null&&ce!=="";if(!Ee&&!Ce)throw(0,l.newError)("Unable to create DateTime without either time zone offset or id. Please specify either of them. Given offset: ".concat(fe," and id: ").concat(ce));var ke=[void 0,void 0];return Ee&&((0,u.assertNumberOrInteger)(fe,"Time zone offset in seconds"),ke[0]=fe),Ce&&((0,u.assertString)(ce,"Time zone ID"),s.assertValidZoneId("Time zone ID",ce),ke[1]=ce),ke}(ue,de),2),be=se[0],Le=se[1];this.timeZoneOffsetSeconds=be,this.timeZoneId=Le??void 0,Object.freeze(this)}return j.fromStandardDate=function(F,q){return L(F,q),new j(F.getFullYear(),F.getMonth()+1,F.getDate(),F.getHours(),F.getMinutes(),F.getSeconds(),(0,c.toNumber)(s.totalNanoseconds(F,q)),s.timeZoneOffsetInSeconds(F),null)},j.prototype.toStandardDate=function(){return s.toStandardDate(this._toUTC())},j.prototype.toString=function(){var F;return D(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)+(this.timeZoneOffsetSeconds!=null?s.timeZoneOffsetToIsoString((F=this.timeZoneOffsetSeconds)!==null&&F!==void 0?F:0):"")+(this.timeZoneId!=null?"[".concat(this.timeZoneId,"]"):"")},j.prototype._toUTC=function(){var F;if(this.timeZoneOffsetSeconds===void 0)throw new Error("Requires DateTime created with time zone offset");var q=s.localDateTimeToEpochSecond(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond).subtract((F=this.timeZoneOffsetSeconds)!==null&&F!==void 0?F:0);return(0,c.int)(q).multiply(1e3).add((0,c.int)(this.nanosecond).div(1e6)).toNumber()},j}();function R(j,F){return j!=null&&j[F]===!0}function D(j,F,q,W,Z,Q,re){return s.dateToIsoString(j,F,q)+"T"+s.timeToIsoString(W,Z,Q,re)}function L(j,F){(0,u.assertValidDate)(j,"Standard date"),F!=null&&(0,u.assertNumberOrInteger)(F,"Nanosecond")}e.DateTime=T,Object.defineProperty(T.prototype,y,f),e.isDateTime=function(j){return R(j,y)}},5909:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function n(i){var o=i.run;this._run=o}return n.fromTransaction=function(i){return new n({run:i.run.bind(i)})},n.prototype.run=function(i,o){return this._run(i,o)},n}();e.default=t},4569:function(r,e,t){var n,i,o=this&&this.__extends||(n=function(l,c){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(f[d]=h[d])},n(l,c)},function(l,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function f(){this.constructor=l}n(l,c),l.prototype=c===null?Object.create(c):(f.prototype=c.prototype,new f)}),a=this&&this.__assign||function(){return a=Object.assign||function(l){for(var c,f=1,h=arguments.length;f<h;f++)for(var d in c=arguments[f])Object.prototype.hasOwnProperty.call(c,d)&&(l[d]=c[d]);return l},a.apply(this,arguments)},s=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0});var u=function(l){function c(f){var h=f.connectionHolder,d=f.onClose,v=f.onBookmarks,g=f.onConnection,_=f.reactive,y=f.fetchSize,p=f.impersonatedUser,m=f.highRecordWatermark,E=f.lowRecordWatermark,C=f.notificationFilter,P=f.apiTelemetryConfig,T=l.call(this,{connectionHolder:h,onClose:d,onBookmarks:v,onConnection:g,reactive:_,fetchSize:y,impersonatedUser:p,highRecordWatermark:m,lowRecordWatermark:E,notificationFilter:C,apiTelemetryConfig:P})||this;return T[i]="TransactionPromise",T}return o(c,l),c.prototype.then=function(f,h){return this._getOrCreateBeginPromise().then(f,h)},c.prototype.catch=function(f){return this._getOrCreateBeginPromise().catch(f)},c.prototype.finally=function(f){return this._getOrCreateBeginPromise().finally(f)},c.prototype._getOrCreateBeginPromise=function(){var f=this;return this._beginPromise==null&&(this._beginPromise=new Promise(function(h,d){f._resolve=h,f._reject=d,f._beginError!=null&&d(f._beginError),f._beginMetadata!=null&&h(f._toTransaction())})),this._beginPromise},c.prototype._toTransaction=function(){return a(a({},this),{run:l.prototype.run.bind(this),commit:l.prototype.commit.bind(this),rollback:l.prototype.rollback.bind(this),close:l.prototype.close.bind(this),isOpen:l.prototype.isOpen.bind(this),_begin:this._begin.bind(this)})},c.prototype._begin=function(f,h){return l.prototype._begin.call(this,f,h,{onError:this._onBeginError.bind(this),onComplete:this._onBeginMetadata.bind(this)})},c.prototype._onBeginError=function(f){this._beginError=f,this._reject!=null&&this._reject(f)},c.prototype._onBeginMetadata=function(f){this._beginMetadata=f??{},this._resolve!=null&&this._resolve(this._toTransaction())},c}(s(t(9473)).default);i=Symbol.toStringTag,e.default=u},9473:function(r,e,t){var n=this&&this.__awaiter||function(y,p,m,E){return new(m||(m=Promise))(function(C,P){function T(L){try{D(E.next(L))}catch(j){P(j)}}function R(L){try{D(E.throw(L))}catch(j){P(j)}}function D(L){var j;L.done?C(L.value):(j=L.value,j instanceof m?j:new m(function(F){F(j)})).then(T,R)}D((E=E.apply(y,p||[])).next())})},i=this&&this.__generator||function(y,p){var m,E,C,P,T={label:0,sent:function(){if(1&C[0])throw C[1];return C[1]},trys:[],ops:[]};return P={next:R(0),throw:R(1),return:R(2)},typeof Symbol=="function"&&(P[Symbol.iterator]=function(){return this}),P;function R(D){return function(L){return function(j){if(m)throw new TypeError("Generator is already executing.");for(;P&&(P=0,j[0]&&(T=0)),T;)try{if(m=1,E&&(C=2&j[0]?E.return:j[0]?E.throw||((C=E.return)&&C.call(E),0):E.next)&&!(C=C.call(E,j[1])).done)return C;switch(E=0,C&&(j=[2&j[0],C.value]),j[0]){case 0:case 1:C=j;break;case 4:return T.label++,{value:j[1],done:!1};case 5:T.label++,E=j[1],j=[0];continue;case 7:j=T.ops.pop(),T.trys.pop();continue;default:if(!((C=(C=T.trys).length>0&&C[C.length-1])||j[0]!==6&&j[0]!==2)){T=0;continue}if(j[0]===3&&(!C||j[1]>C[0]&&j[1]<C[3])){T.label=j[1];break}if(j[0]===6&&T.label<C[1]){T.label=C[1],C=j;break}if(C&&T.label<C[2]){T.label=C[2],T.ops.push(j);break}C[2]&&T.ops.pop(),T.trys.pop();continue}j=p.call(y,T)}catch(F){j=[6,F],E=0}finally{m=C=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}([D,L])}}},o=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(e,"__esModule",{value:!0});var a=t(6587),s=t(3618),u=t(9730),l=t(754),c=t(2696),f=t(9691),h=o(t(9512)),d=function(){function y(p){var m=p.connectionHolder,E=p.onClose,C=p.onBookmarks,P=p.onConnection,T=p.reactive,R=p.fetchSize,D=p.impersonatedUser,L=p.highRecordWatermark,j=p.lowRecordWatermark,F=p.notificationFilter,q=p.apiTelemetryConfig,W=this;this._connectionHolder=m,this._reactive=T,this._state=v.ACTIVE,this._onClose=E,this._onBookmarks=C,this._onConnection=P,this._onError=this._onErrorCallback.bind(this),this._fetchSize=R,this._onComplete=this._onCompleteCallback.bind(this),this._results=[],this._impersonatedUser=D,this._lowRecordWatermak=j,this._highRecordWatermark=L,this._bookmarks=u.Bookmarks.empty(),this._notificationFilter=F,this._apiTelemetryConfig=q,this._acceptActive=function(){},this._activePromise=new Promise(function(Z,Q){W._acceptActive=Z})}return y.prototype._begin=function(p,m,E){var C=this;this._connectionHolder.getConnection().then(function(P){return n(C,void 0,void 0,function(){var T,R=this;return i(this,function(D){switch(D.label){case 0:return this._onConnection(),P==null?[3,2]:(T=this,[4,p()]);case 1:return T._bookmarks=D.sent(),[2,P.beginTransaction({bookmarks:this._bookmarks,txConfig:m,mode:this._connectionHolder.mode(),database:this._connectionHolder.database(),impersonatedUser:this._impersonatedUser,notificationFilter:this._notificationFilter,apiTelemetryConfig:this._apiTelemetryConfig,beforeError:function(L){E!=null&&E.onError(L),R._onError(L).catch(function(){})},afterComplete:function(L){E!=null&&E.onComplete(L),R._onComplete(L)}})];case 2:throw(0,f.newError)("No connection available")}})})}).catch(function(P){E!=null&&E.onError(P),C._onError(P).catch(function(){})}).finally(function(){return C._acceptActive()})},y.prototype.run=function(p,m){var E=(0,a.validateQueryAndParameters)(p,m),C=E.validatedQuery,P=E.params,T=this._state.run(C,P,{connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,reactive:this._reactive,fetchSize:this._fetchSize,highRecordWatermark:this._highRecordWatermark,lowRecordWatermark:this._lowRecordWatermak,preparationJob:this._activePromise});return this._results.push(T),T},y.prototype.commit=function(){var p=this,m=this._state.commit({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:function(E){return p._onCompleteCallback(E,p._bookmarks)},onConnection:this._onConnection,pendingResults:this._results,preparationJob:this._activePromise});return this._state=m.state,this._onClose(),new Promise(function(E,C){m.result.subscribe({onCompleted:function(){return E()},onError:function(P){return C(P)}})})},y.prototype.rollback=function(){var p=this._state.rollback({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results,preparationJob:this._activePromise});return this._state=p.state,this._onClose(),new Promise(function(m,E){p.result.subscribe({onCompleted:function(){return m()},onError:function(C){return E(C)}})})},y.prototype.isOpen=function(){return this._state===v.ACTIVE},y.prototype.close=function(){return n(this,void 0,void 0,function(){return i(this,function(p){switch(p.label){case 0:return this.isOpen()?[4,this.rollback()]:[3,2];case 1:p.sent(),p.label=2;case 2:return[2]}})})},y.prototype[Symbol.asyncDispose]=function(){return this.close()},y.prototype._onErrorCallback=function(p){return this._state===v.FAILED?Promise.resolve(null):(this._state=v.FAILED,this._onClose(),this._results.forEach(function(m){m.isOpen()&&m._streamObserverPromise.then(function(E){return E.onError(p)}).catch(function(E){})}),this._connectionHolder.releaseConnection())},y.prototype._onCompleteCallback=function(p,m){this._onBookmarks(new u.Bookmarks(p==null?void 0:p.bookmark),m??u.Bookmarks.empty(),p==null?void 0:p.db)},y}(),v={ACTIVE:{commit:function(y){return{result:g(!0,y.connectionHolder,y.onError,y.onComplete,y.onConnection,y.pendingResults,y.preparationJob),state:v.SUCCEEDED}},rollback:function(y){return{result:g(!1,y.connectionHolder,y.onError,y.onComplete,y.onConnection,y.pendingResults,y.preparationJob),state:v.ROLLED_BACK}},run:function(y,p,m){var E=m.connectionHolder,C=m.onError,P=m.onComplete,T=m.onConnection,R=m.reactive,D=m.fetchSize,L=m.highRecordWatermark,j=m.lowRecordWatermark,F=m.preparationJob,q=F??Promise.resolve();return _(E.getConnection().then(function(W){return q.then(function(){return W})}).then(function(W){if(T(),W!=null)return W.run(y,p,{bookmarks:u.Bookmarks.empty(),txConfig:l.TxConfig.empty(),beforeError:C,afterComplete:P,reactive:R,fetchSize:D,highRecordWatermark:L,lowRecordWatermark:j});throw(0,f.newError)("No connection available")}).catch(function(W){return new c.FailedObserver({error:W,onError:C})}),y,p,E,L,j)}},FAILED:{commit:function(y){var p=y.connectionHolder,m=y.onError;return y.onComplete,{result:_(new c.FailedObserver({error:(0,f.newError)("Cannot commit this transaction, because it has been rolled back either because of an error or explicit termination."),onError:m}),"COMMIT",{},p,0,0),state:v.FAILED}},rollback:function(y){var p=y.connectionHolder;return y.onError,y.onComplete,{result:_(new c.CompletedObserver,"ROLLBACK",{},p,0,0),state:v.FAILED}},run:function(y,p,m){var E=m.connectionHolder,C=m.onError;return m.onComplete,_(new c.FailedObserver({error:(0,f.newError)("Cannot run query in this transaction, because it has been rolled back either because of an error or explicit termination."),onError:C}),y,p,E,0,0)}},SUCCEEDED:{commit:function(y){var p=y.connectionHolder,m=y.onError;return y.onComplete,{result:_(new c.FailedObserver({error:(0,f.newError)("Cannot commit this transaction, because it has already been committed."),onError:m}),"COMMIT",{},s.EMPTY_CONNECTION_HOLDER,0,0),state:v.SUCCEEDED,connectionHolder:p}},rollback:function(y){var p=y.connectionHolder,m=y.onError;return y.onComplete,{result:_(new c.FailedObserver({error:(0,f.newError)("Cannot rollback this transaction, because it has already been committed."),onError:m}),"ROLLBACK",{},s.EMPTY_CONNECTION_HOLDER,0,0),state:v.SUCCEEDED,connectionHolder:p}},run:function(y,p,m){var E=m.connectionHolder,C=m.onError;return m.onComplete,_(new c.FailedObserver({error:(0,f.newError)("Cannot run query in this transaction, because it has already been committed."),onError:C}),y,p,E,0,0)}},ROLLED_BACK:{commit:function(y){var p=y.connectionHolder,m=y.onError;return y.onComplete,{result:_(new c.FailedObserver({error:(0,f.newError)("Cannot commit this transaction, because it has already been rolled back."),onError:m}),"COMMIT",{},p,0,0),state:v.ROLLED_BACK}},rollback:function(y){var p=y.connectionHolder;return y.onError,y.onComplete,{result:_(new c.FailedObserver({error:(0,f.newError)("Cannot rollback this transaction, because it has already been rolled back.")}),"ROLLBACK",{},p,0,0),state:v.ROLLED_BACK}},run:function(y,p,m){var E=m.connectionHolder,C=m.onError;return m.onComplete,_(new c.FailedObserver({error:(0,f.newError)("Cannot run query in this transaction, because it has already been rolled back."),onError:C}),y,p,E,0,0)}}};function g(y,p,m,E,C,P,T){var R=T??Promise.resolve(),D=p.getConnection().then(function(L){return R.then(function(){return L})}).then(function(L){return C(),P.forEach(function(j){return j._cancel()}),Promise.all(P.map(function(j){return j.summary()})).then(function(j){if(L!=null)return y?L.commitTransaction({beforeError:m,afterComplete:E}):L.rollbackTransaction({beforeError:m,afterComplete:E});throw(0,f.newError)("No connection available")})}).catch(function(L){return new c.FailedObserver({error:L,onError:m})});return new h.default(D,y?"COMMIT":"ROLLBACK",{},p,{high:Number.MAX_VALUE,low:Number.MAX_VALUE})}function _(y,p,m,E,C,P){return E===void 0&&(E=s.EMPTY_CONNECTION_HOLDER),new h.default(Promise.resolve(y),p,m,new s.ReadOnlyConnectionHolder(E??s.EMPTY_CONNECTION_HOLDER),{low:P,high:C})}e.default=d},6872:function(r,e){var t,n=this&&this.__extends||(t=function(a,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},t(a,s)},function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}t(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)});Object.defineProperty(e,"__esModule",{value:!0}),e.InternalConfig=e.Config=void 0;var i=function(){this.encrypted=void 0,this.trust=void 0,this.trustedCertificates=[],this.maxConnectionPoolSize=100,this.maxConnectionLifetime=36e5,this.connectionAcquisitionTimeout=6e4,this.maxTransactionRetryTime=3e4,this.connectionLivenessCheckTimeout=void 0,this.connectionTimeout=3e4,this.disableLosslessIntegers=!1,this.useBigInt=!1,this.logging=void 0,this.resolver=void 0,this.notificationFilter=void 0,this.userAgent=void 0,this.telemetryDisabled=!1,this.clientCertificate=void 0};e.Config=i;var o=function(a){function s(){return a!==null&&a.apply(this,arguments)||this}return n(s,a),s}(i);e.InternalConfig=o},7857:function(r,e,t){var n,i=this&&this.__extends||(n=function(d,v){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,_){g.__proto__=_}||function(g,_){for(var y in _)Object.prototype.hasOwnProperty.call(_,y)&&(g[y]=_[y])},n(d,v)},function(d,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function g(){this.constructor=d}n(d,v),d.prototype=v===null?Object.create(v):(g.prototype=v.prototype,new g)}),o=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0}),e.WRITE=e.READ=e.Driver=void 0;var a=t(9305),s=o(t(3466)),u=a.internal.constants.FETCH_ALL,l=a.driver.READ,c=a.driver.WRITE;e.READ=l,e.WRITE=c;var f=function(d){function v(){return d!==null&&d.apply(this,arguments)||this}return i(v,d),v.prototype.rxSession=function(g){var _=g===void 0?{}:g,y=_.defaultAccessMode,p=y===void 0?c:y,m=_.bookmarks,E=_.database,C=E===void 0?"":E,P=_.fetchSize,T=_.impersonatedUser,R=_.bookmarkManager,D=_.notificationFilter,L=_.auth;return new s.default({session:this._newSession({defaultAccessMode:p,bookmarkOrBookmarks:m,database:C,impersonatedUser:T,auth:L,reactive:!1,fetchSize:h(P,this._config.fetchSize),bookmarkManager:R,notificationFilter:D,log:this._log}),config:this._config,log:this._log})},v}(a.Driver);function h(d,v){var g=parseInt(d,10);if(g>0||g===u)return g;if(g===0||g<0)throw new Error("The fetch size can only be a positive value or ".concat(u," for ALL. However fetchSize = ").concat(g));return v}e.Driver=f,e.default=f},1187:function(r,e,t){var n=this&&this.__awaiter||function(Z,Q,re,ee){return new(re||(re=Promise))(function(ue,de){function se(fe){try{Le(ee.next(fe))}catch(ce){de(ce)}}function be(fe){try{Le(ee.throw(fe))}catch(ce){de(ce)}}function Le(fe){var ce;fe.done?ue(fe.value):(ce=fe.value,ce instanceof re?ce:new re(function(Ee){Ee(ce)})).then(se,be)}Le((ee=ee.apply(Z,Q||[])).next())})},i=this&&this.__generator||function(Z,Q){var re,ee,ue,de,se={label:0,sent:function(){if(1&ue[0])throw ue[1];return ue[1]},trys:[],ops:[]};return de={next:be(0),throw:be(1),return:be(2)},typeof Symbol=="function"&&(de[Symbol.iterator]=function(){return this}),de;function be(Le){return function(fe){return function(ce){if(re)throw new TypeError("Generator is already executing.");for(;de&&(de=0,ce[0]&&(se=0)),se;)try{if(re=1,ee&&(ue=2&ce[0]?ee.return:ce[0]?ee.throw||((ue=ee.return)&&ue.call(ee),0):ee.next)&&!(ue=ue.call(ee,ce[1])).done)return ue;switch(ee=0,ue&&(ce=[2&ce[0],ue.value]),ce[0]){case 0:case 1:ue=ce;break;case 4:return se.label++,{value:ce[1],done:!1};case 5:se.label++,ee=ce[1],ce=[0];continue;case 7:ce=se.ops.pop(),se.trys.pop();continue;default:if(!((ue=(ue=se.trys).length>0&&ue[ue.length-1])||ce[0]!==6&&ce[0]!==2)){se=0;continue}if(ce[0]===3&&(!ue||ce[1]>ue[0]&&ce[1]<ue[3])){se.label=ce[1];break}if(ce[0]===6&&se.label<ue[1]){se.label=ue[1],ue=ce;break}if(ue&&se.label<ue[2]){se.label=ue[2],se.ops.push(ce);break}ue[2]&&se.ops.pop(),se.trys.pop();continue}ce=Q.call(Z,se)}catch(Ee){ce=[6,Ee],ee=0}finally{re=ue=0}if(5&ce[0])throw ce[1];return{value:ce[0]?ce[1]:void 0,done:!0}}([Le,fe])}}},o=this&&this.__importDefault||function(Z){return Z&&Z.__esModule?Z:{default:Z}};Object.defineProperty(e,"__esModule",{value:!0}),e.UnboundRelationship=e.Relationship=e.Node=e.Record=e.ServerInfo=e.GqlStatusObject=e.Notification=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.ResultSummary=e.RxResult=e.RxManagedTransaction=e.RxTransaction=e.RxSession=e.EagerResult=e.Result=e.ManagedTransaction=e.Transaction=e.Session=e.Driver=e.temporal=e.spatial=e.graph=e.error=e.routing=e.session=e.types=e.logging=e.auth=e.isRetryableError=e.Neo4jError=e.integer=e.isUnboundRelationship=e.isRelationship=e.isPathSegment=e.isPath=e.isNode=e.isDateTime=e.isLocalDateTime=e.isDate=e.isTime=e.isLocalTime=e.isDuration=e.isPoint=e.isInt=e.int=e.hasReachableServer=e.driver=e.authTokenManagers=void 0,e.clientCertificateProviders=e.notificationFilterMinimumSeverityLevel=e.notificationFilterDisabledClassification=e.notificationFilterDisabledCategory=e.notificationSeverityLevel=e.notificationClassification=e.notificationCategory=e.resultTransformers=e.bookmarkManager=e.DateTime=e.LocalDateTime=e.Date=e.Time=e.LocalTime=e.Duration=e.Integer=e.Point=e.PathSegment=e.Path=void 0;var a=t(7857);Object.defineProperty(e,"Driver",{enumerable:!0,get:function(){return a.Driver}});var s=o(t(3659)),u=t(9305);Object.defineProperty(e,"authTokenManagers",{enumerable:!0,get:function(){return u.authTokenManagers}}),Object.defineProperty(e,"Neo4jError",{enumerable:!0,get:function(){return u.Neo4jError}}),Object.defineProperty(e,"isRetryableError",{enumerable:!0,get:function(){return u.isRetryableError}}),Object.defineProperty(e,"error",{enumerable:!0,get:function(){return u.error}}),Object.defineProperty(e,"Integer",{enumerable:!0,get:function(){return u.Integer}}),Object.defineProperty(e,"int",{enumerable:!0,get:function(){return u.int}}),Object.defineProperty(e,"isInt",{enumerable:!0,get:function(){return u.isInt}}),Object.defineProperty(e,"isPoint",{enumerable:!0,get:function(){return u.isPoint}}),Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return u.Point}}),Object.defineProperty(e,"Date",{enumerable:!0,get:function(){return u.Date}}),Object.defineProperty(e,"DateTime",{enumerable:!0,get:function(){return u.DateTime}}),Object.defineProperty(e,"Duration",{enumerable:!0,get:function(){return u.Duration}}),Object.defineProperty(e,"isDate",{enumerable:!0,get:function(){return u.isDate}}),Object.defineProperty(e,"isDateTime",{enumerable:!0,get:function(){return u.isDateTime}}),Object.defineProperty(e,"isDuration",{enumerable:!0,get:function(){return u.isDuration}}),Object.defineProperty(e,"isLocalDateTime",{enumerable:!0,get:function(){return u.isLocalDateTime}}),Object.defineProperty(e,"isLocalTime",{enumerable:!0,get:function(){return u.isLocalTime}}),Object.defineProperty(e,"isNode",{enumerable:!0,get:function(){return u.isNode}}),Object.defineProperty(e,"isPath",{enumerable:!0,get:function(){return u.isPath}}),Object.defineProperty(e,"isPathSegment",{enumerable:!0,get:function(){return u.isPathSegment}}),Object.defineProperty(e,"isRelationship",{enumerable:!0,get:function(){return u.isRelationship}}),Object.defineProperty(e,"isTime",{enumerable:!0,get:function(){return u.isTime}}),Object.defineProperty(e,"isUnboundRelationship",{enumerable:!0,get:function(){return u.isUnboundRelationship}}),Object.defineProperty(e,"LocalDateTime",{enumerable:!0,get:function(){return u.LocalDateTime}}),Object.defineProperty(e,"LocalTime",{enumerable:!0,get:function(){return u.LocalTime}}),Object.defineProperty(e,"Time",{enumerable:!0,get:function(){return u.Time}}),Object.defineProperty(e,"Node",{enumerable:!0,get:function(){return u.Node}}),Object.defineProperty(e,"Path",{enumerable:!0,get:function(){return u.Path}}),Object.defineProperty(e,"PathSegment",{enumerable:!0,get:function(){return u.PathSegment}}),Object.defineProperty(e,"Relationship",{enumerable:!0,get:function(){return u.Relationship}}),Object.defineProperty(e,"UnboundRelationship",{enumerable:!0,get:function(){return u.UnboundRelationship}}),Object.defineProperty(e,"Record",{enumerable:!0,get:function(){return u.Record}}),Object.defineProperty(e,"ResultSummary",{enumerable:!0,get:function(){return u.ResultSummary}}),Object.defineProperty(e,"Plan",{enumerable:!0,get:function(){return u.Plan}}),Object.defineProperty(e,"ProfiledPlan",{enumerable:!0,get:function(){return u.ProfiledPlan}}),Object.defineProperty(e,"QueryStatistics",{enumerable:!0,get:function(){return u.QueryStatistics}}),Object.defineProperty(e,"Notification",{enumerable:!0,get:function(){return u.Notification}}),Object.defineProperty(e,"GqlStatusObject",{enumerable:!0,get:function(){return u.GqlStatusObject}}),Object.defineProperty(e,"ServerInfo",{enumerable:!0,get:function(){return u.ServerInfo}}),Object.defineProperty(e,"Result",{enumerable:!0,get:function(){return u.Result}}),Object.defineProperty(e,"EagerResult",{enumerable:!0,get:function(){return u.EagerResult}}),Object.defineProperty(e,"auth",{enumerable:!0,get:function(){return u.auth}}),Object.defineProperty(e,"Session",{enumerable:!0,get:function(){return u.Session}}),Object.defineProperty(e,"Transaction",{enumerable:!0,get:function(){return u.Transaction}}),Object.defineProperty(e,"ManagedTransaction",{enumerable:!0,get:function(){return u.ManagedTransaction}}),Object.defineProperty(e,"bookmarkManager",{enumerable:!0,get:function(){return u.bookmarkManager}}),Object.defineProperty(e,"routing",{enumerable:!0,get:function(){return u.routing}}),Object.defineProperty(e,"resultTransformers",{enumerable:!0,get:function(){return u.resultTransformers}}),Object.defineProperty(e,"notificationCategory",{enumerable:!0,get:function(){return u.notificationCategory}}),Object.defineProperty(e,"notificationClassification",{enumerable:!0,get:function(){return u.notificationClassification}}),Object.defineProperty(e,"notificationSeverityLevel",{enumerable:!0,get:function(){return u.notificationSeverityLevel}}),Object.defineProperty(e,"notificationFilterDisabledCategory",{enumerable:!0,get:function(){return u.notificationFilterDisabledCategory}}),Object.defineProperty(e,"notificationFilterDisabledClassification",{enumerable:!0,get:function(){return u.notificationFilterDisabledClassification}}),Object.defineProperty(e,"notificationFilterMinimumSeverityLevel",{enumerable:!0,get:function(){return u.notificationFilterMinimumSeverityLevel}}),Object.defineProperty(e,"clientCertificateProviders",{enumerable:!0,get:function(){return u.clientCertificateProviders}});var l=t(6672),c=o(t(3466));e.RxSession=c.default;var f=o(t(5742));e.RxTransaction=f.default;var h=o(t(1530));e.RxManagedTransaction=h.default;var d=o(t(3057));e.RxResult=d.default;var v=u.internal.util,g=v.ENCRYPTION_ON,_=v.assertString,y=v.isEmptyObjectOrNull,p=u.internal.serverAddress.ServerAddress,m=u.internal.urlUtil,E="neo4j-javascript/"+s.default;function C(Z,Q,re){re===void 0&&(re={}),_(Z,"Bolt URL");var ee,ue=m.parseDatabaseUrl(Z),de=!1,se=!1;switch(ue.scheme){case"bolt":break;case"bolt+s":se=!0,ee="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES";break;case"bolt+ssc":se=!0,ee="TRUST_ALL_CERTIFICATES";break;case"neo4j":de=!0;break;case"neo4j+s":se=!0,ee="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES",de=!0;break;case"neo4j+ssc":se=!0,ee="TRUST_ALL_CERTIFICATES",de=!0;break;default:throw new Error("Unknown scheme: ".concat(ue.scheme))}if(se){if("encrypted"in re||"trust"in re)throw new Error("Encryption/trust can only be configured either through URL or config, not both");re.encrypted=g,re.trust=ee,re.clientCertificate=(0,u.resolveCertificateProvider)(re.clientCertificate)}var be=function(ce){if(typeof(Ee=ce)=="object"&&Ee!=null&&"getToken"in Ee&&"handleSecurityException"in Ee&&typeof Ee.getToken=="function"&&typeof Ee.handleSecurityException=="function")return ce;var Ee,Ce=ce;return(Ce=Ce||{}).scheme=Ce.scheme||"none",(0,u.staticAuthTokenManager)({authToken:Ce})}(Q);re.userAgent=re.userAgent||E,re.boltAgent=u.internal.boltAgent.fromVersion(s.default);var Le=p.fromUrl(ue.hostAndPort),fe={address:Le,typename:de?"Routing":"Direct",routing:de};return new a.Driver(fe,re,function(){if(de)return function(ce,Ee,Ce,ke){return new l.RoutingConnectionProvider({id:ce,config:Ee,log:Ce,hostNameResolver:ke,authTokenManager:be,address:Le,userAgent:Ee.userAgent,boltAgent:Ee.boltAgent,routingContext:ue.query})};if(!y(ue.query))throw new Error("Parameters are not supported with none routed scheme. Given URL: '".concat(Z,"'"));return function(ce,Ee,Ce){return new l.DirectConnectionProvider({id:ce,config:Ee,log:Ce,authTokenManager:be,address:Le,userAgent:Ee.userAgent,boltAgent:Ee.boltAgent})}}())}function P(Z,Q){return n(this,void 0,void 0,function(){var re;return i(this,function(ee){switch(ee.label){case 0:re=C(Z,{scheme:"none",principal:"",credentials:""},Q),ee.label=1;case 1:return ee.trys.push([1,,3,5]),[4,re.getNegotiatedProtocolVersion()];case 2:return ee.sent(),[2,!0];case 3:return[4,re.close()];case 4:return ee.sent(),[7];case 5:return[2]}})})}e.driver=C,e.hasReachableServer=P;var T={console:function(Z){return{level:Z,logger:function(Q,re){return console.log("".concat(t.g.Date.now()," ").concat(Q.toUpperCase()," ").concat(re))}}}};e.logging=T;var R={Node:u.Node,Relationship:u.Relationship,UnboundRelationship:u.UnboundRelationship,PathSegment:u.PathSegment,Path:u.Path,Result:u.Result,EagerResult:u.EagerResult,ResultSummary:u.ResultSummary,Record:u.Record,Point:u.Point,Date:u.Date,DateTime:u.DateTime,Duration:u.Duration,LocalDateTime:u.LocalDateTime,LocalTime:u.LocalTime,Time:u.Time,Integer:u.Integer};e.types=R;var D={READ:a.READ,WRITE:a.WRITE};e.session=D;var L={toNumber:u.toNumber,toString:u.toString,inSafeRange:u.inSafeRange};e.integer=L;var j={isPoint:u.isPoint};e.spatial=j;var F={isDuration:u.isDuration,isLocalTime:u.isLocalTime,isTime:u.isTime,isDate:u.isDate,isLocalDateTime:u.isLocalDateTime,isDateTime:u.isDateTime};e.temporal=F;var q={isNode:u.isNode,isPath:u.isPath,isPathSegment:u.isPathSegment,isRelationship:u.isRelationship,isUnboundRelationship:u.isUnboundRelationship};e.graph=q;var W={authTokenManagers:u.authTokenManagers,driver:C,hasReachableServer:P,int:u.int,isInt:u.isInt,isPoint:u.isPoint,isDuration:u.isDuration,isLocalTime:u.isLocalTime,isTime:u.isTime,isDate:u.isDate,isLocalDateTime:u.isLocalDateTime,isDateTime:u.isDateTime,isNode:u.isNode,isPath:u.isPath,isPathSegment:u.isPathSegment,isRelationship:u.isRelationship,isUnboundRelationship:u.isUnboundRelationship,integer:L,Neo4jError:u.Neo4jError,isRetryableError:u.isRetryableError,auth:u.auth,logging:T,types:R,session:D,routing:u.routing,error:u.error,graph:q,spatial:j,temporal:F,Driver:a.Driver,Session:u.Session,Transaction:u.Transaction,ManagedTransaction:u.ManagedTransaction,Result:u.Result,EagerResult:u.EagerResult,RxSession:c.default,RxTransaction:f.default,RxManagedTransaction:h.default,RxResult:d.default,ResultSummary:u.ResultSummary,Plan:u.Plan,ProfiledPlan:u.ProfiledPlan,QueryStatistics:u.QueryStatistics,Notification:u.Notification,GqlStatusObject:u.GqlStatusObject,ServerInfo:u.ServerInfo,Record:u.Record,Node:u.Node,Relationship:u.Relationship,UnboundRelationship:u.UnboundRelationship,Path:u.Path,PathSegment:u.PathSegment,Point:u.Point,Integer:u.Integer,Duration:u.Duration,LocalTime:u.LocalTime,Time:u.Time,Date:u.Date,LocalDateTime:u.LocalDateTime,DateTime:u.DateTime,bookmarkManager:u.bookmarkManager,resultTransformers:u.resultTransformers,notificationCategory:u.notificationCategory,notificationSeverityLevel:u.notificationSeverityLevel,notificationFilterDisabledCategory:u.notificationFilterDisabledCategory,notificationFilterMinimumSeverityLevel:u.notificationFilterMinimumSeverityLevel,clientCertificateProviders:u.clientCertificateProviders};e.default=W},9823:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=t(9305),i=t(8813),o=t(9419),a=(n.internal.logger.Logger,n.error.SERVICE_UNAVAILABLE),s=function(){function l(c){var f=c===void 0?{}:c,h=f.maxRetryTimeout,d=h===void 0?3e4:h,v=f.initialDelay,g=v===void 0?1e3:v,_=f.delayMultiplier,y=_===void 0?2:_,p=f.delayJitter,m=p===void 0?.2:p,E=f.logger,C=E===void 0?null:E;this._maxRetryTimeout=u(d,3e4),this._initialDelay=u(g,1e3),this._delayMultiplier=u(y,2),this._delayJitter=u(m,.2),this._logger=C}return l.prototype.retry=function(c){var f=this;return c.pipe((0,o.retryWhen)(function(h){var d=[],v=Date.now(),g=1,_=f._initialDelay;return h.pipe((0,o.mergeMap)(function(y){if(!(0,n.isRetriableError)(y))return(0,i.throwError)(function(){return y});if(d.push(y),g>=2&&Date.now()-v>=f._maxRetryTimeout){var p=(0,n.newError)("Failed after retried for ".concat(g," times in ").concat(f._maxRetryTimeout," ms. Make sure that your database is online and retry again."),a);return p.seenErrors=d,(0,i.throwError)(function(){return p})}var m=f._computeNextDelay(_);return _*=f._delayMultiplier,g++,f._logger&&f._logger.warn("Transaction failed and will be retried in ".concat(m)),(0,i.of)(1).pipe((0,o.delay)(m))}))}))},l.prototype._computeNextDelay=function(c){var f=c*this._delayJitter;return c-f+2*f*Math.random()},l}();function u(l,c){return l||l===0?l:c}e.default=s},3057:function(r,e,t){var n=this&&this.__awaiter||function(c,f,h,d){return new(h||(h=Promise))(function(v,g){function _(m){try{p(d.next(m))}catch(E){g(E)}}function y(m){try{p(d.throw(m))}catch(E){g(E)}}function p(m){var E;m.done?v(m.value):(E=m.value,E instanceof h?E:new h(function(C){C(E)})).then(_,y)}p((d=d.apply(c,f||[])).next())})},i=this&&this.__generator||function(c,f){var h,d,v,g,_={label:0,sent:function(){if(1&v[0])throw v[1];return v[1]},trys:[],ops:[]};return g={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function y(p){return function(m){return function(E){if(h)throw new TypeError("Generator is already executing.");for(;g&&(g=0,E[0]&&(_=0)),_;)try{if(h=1,d&&(v=2&E[0]?d.return:E[0]?d.throw||((v=d.return)&&v.call(d),0):d.next)&&!(v=v.call(d,E[1])).done)return v;switch(d=0,v&&(E=[2&E[0],v.value]),E[0]){case 0:case 1:v=E;break;case 4:return _.label++,{value:E[1],done:!1};case 5:_.label++,d=E[1],E=[0];continue;case 7:E=_.ops.pop(),_.trys.pop();continue;default:if(!((v=(v=_.trys).length>0&&v[v.length-1])||E[0]!==6&&E[0]!==2)){_=0;continue}if(E[0]===3&&(!v||E[1]>v[0]&&E[1]<v[3])){_.label=E[1];break}if(E[0]===6&&_.label<v[1]){_.label=v[1],v=E;break}if(v&&_.label<v[2]){_.label=v[2],_.ops.push(E);break}v[2]&&_.ops.pop(),_.trys.pop();continue}E=f.call(c,_)}catch(C){E=[6,C],d=0}finally{h=v=0}if(5&E[0])throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}([p,m])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=t(9305),a=t(8813),s=t(9419),u=function(){function c(f,h){var d=f.pipe((0,s.publishReplay)(1),(0,s.refCount)());this._result=d,this._keys=d.pipe((0,s.mergeMap)(function(v){return(0,a.from)(v.keys())}),(0,s.publishReplay)(1),(0,s.refCount)()),this._records=void 0,this._controls=new l,this._summary=new a.ReplaySubject,this._state=h||0}return c.prototype.keys=function(){return this._keys},c.prototype.records=function(){var f=this,h=this._result.pipe((0,s.mergeMap)(function(d){return new a.Observable(function(v){return f._startStreaming({result:d,recordsObserver:v})})}));return h.push=function(){return f._push()},h},c.prototype.consume=function(){var f=this;return this._result.pipe((0,s.mergeMap)(function(h){return new a.Observable(function(d){return f._startStreaming({result:h,summaryObserver:d})})}))},c.prototype.pause=function(){this._controls.pause()},c.prototype.resume=function(){return this._controls.resume()},c.prototype.push=function(){return this._controls.push()},c.prototype._startStreaming=function(f){var h=f===void 0?{}:f,d=h.result,v=h.recordsObserver,g=v===void 0?null:v,_=h.summaryObserver,y=_===void 0?null:_,p=[];return y&&p.push(this._summary.subscribe(y)),this._state<1?(this._state=1,this._setupRecordsStream(d),g?p.push(this._records.subscribe(g)):d._cancel(),p.push({unsubscribe:function(){d._cancel&&d._cancel()}})):g&&g.error((0,o.newError)("Streaming has already started/consumed with a previous records or summary subscription.")),function(){p.forEach(function(m){return m.unsubscribe()})}},c.prototype._toObservable=function(){var f=this;return new a.Observable(function(h){f._result.subscribe({complete:function(){return h.complete()},next:function(d){return h.next(new c(function(v){return new a.Observable(function(g){g.next(v),g.complete()})}(d)),f._state)},error:function(d){return h.error(d)}})})},c.prototype._setupRecordsStream=function(f){var h=this;return this._records||(this._records=function(d,v,g){var _=this;g===void 0&&(g=new l);var y=new a.Subject,p=function(E){return n(_,void 0,void 0,function(){var C,P,T,R;return i(this,function(D){switch(D.label){case 0:return D.trys.push([0,2,3,4]),g.pushing=!0,[4,E];case 1:return C=D.sent(),P=C.done,T=C.value,P?(y.complete(),v.complete()):(y.next(T),g.paused||p(d.next()).catch(function(){})),[3,4];case 2:return R=D.sent(),y.error(R),v.error(R),[3,4];case 3:return g.pushing=!1,[7];case 4:return[2]}})})};function m(E){return n(this,void 0,void 0,function(){return i(this,function(C){switch(C.label){case 0:return[4,p(d.next(E))];case 1:return C.sent(),[2]}})})}return g.pusher=m,m(),y}(f[Symbol.asyncIterator](),{complete:function(){return n(h,void 0,void 0,function(){var d,v;return i(this,function(g){switch(g.label){case 0:return this._state=2,v=(d=this._summary).next,[4,f.summary()];case 1:return v.apply(d,[g.sent()]),this._summary.complete(),[2]}})})},error:function(d){h._state=2,h._summary.error(d)}},this._controls)),this._records},c}();e.default=u;var l=function(){function c(f){f===void 0&&(f=function(){return n(h,void 0,void 0,function(){return i(this,function(d){return[2]})})});var h=this;this._paused=!1,this._pushing=!1,this._push=f}return c.prototype.pause=function(){this._paused=!0},Object.defineProperty(c.prototype,"paused",{get:function(){return this._paused},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"pushing",{get:function(){return this._pushing},set:function(f){this._pushing=f},enumerable:!1,configurable:!0}),c.prototype.resume=function(){return n(this,void 0,void 0,function(){var f;return i(this,function(h){switch(h.label){case 0:return f=this._paused,this._paused=!1,!f||this._pushing?[3,2]:[4,this._push()];case 1:h.sent(),h.label=2;case 2:return[2]}})})},c.prototype.push=function(){return n(this,void 0,void 0,function(){return i(this,function(f){switch(f.label){case 0:return this.pause(),[4,this._push()];case 1:return[2,f.sent()]}})})},Object.defineProperty(c.prototype,"pusher",{get:function(){return this._push},set:function(f){this._push=f},enumerable:!1,configurable:!0}),c}()},3466:function(r,e,t){var n=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(e,"__esModule",{value:!0});var i=t(8813),o=t(9419),a=n(t(3057)),s=t(9305),u=n(t(5742)),l=n(t(1530)),c=n(t(9823)),f=s.internal.constants,h=f.ACCESS_MODE_READ,d=f.ACCESS_MODE_WRITE,v=f.TELEMETRY_APIS,g=s.internal.txConfig.TxConfig,_=function(){function y(p){var m=p===void 0?{}:p,E=m.session,C=m.config,P=m.log;this._session=E,this._retryLogic=function(T){var R=T&&T.maxTransactionRetryTime?T.maxTransactionRetryTime:null;return new c.default({maxRetryTimeout:R})}(C),this._log=P}return y.prototype.run=function(p,m,E){var C=this;return new a.default(new i.Observable(function(P){try{P.next(C._session.run(p,m,E)),P.complete()}catch(T){P.error(T)}return function(){}}))},y.prototype.beginTransaction=function(p){return this._beginTransaction(this._session._mode,p,{api:v.UNMANAGED_TRANSACTION})},y.prototype.readTransaction=function(p,m){return this._runTransaction(h,p,m)},y.prototype.writeTransaction=function(p,m){return this._runTransaction(d,p,m)},y.prototype.executeRead=function(p,m){return this._executeInTransaction(h,p,m)},y.prototype.executeWrite=function(p,m){return this._executeInTransaction(d,p,m)},y.prototype._executeInTransaction=function(p,m,E){return this._runTransaction(p,m,E,function(C){return new l.default({run:C.run.bind(C)})})},y.prototype.close=function(){var p=this;return new i.Observable(function(m){p._session.close().then(function(){m.complete()}).catch(function(E){return m.error(E)})})},y.prototype[Symbol.asyncDispose]=function(){return this.close()},y.prototype.lastBookmark=function(){return this.lastBookmarks()},y.prototype.lastBookmarks=function(){return this._session.lastBookmarks()},y.prototype._beginTransaction=function(p,m,E){var C=this,P=g.empty();return m&&(P=new g(m,this._log)),new i.Observable(function(T){try{C._session._beginTransaction(p,P,E).then(function(R){T.next(new u.default(R)),T.complete()}).catch(function(R){return T.error(R)})}catch(R){T.error(R)}return function(){}})},y.prototype._runTransaction=function(p,m,E,C){var P=this;C===void 0&&(C=function(D){return D});var T=g.empty();E&&(T=new g(E));var R={apiTelemetryConfig:{api:v.MANAGED_TRANSACTION,onTelemetrySuccess:function(){R.apiTelemetryConfig=void 0}}};return this._retryLogic.retry((0,i.of)(1).pipe((0,o.mergeMap)(function(){return P._beginTransaction(p,T,R.apiTelemetryConfig)}),(0,o.mergeMap)(function(D){return(0,i.defer)(function(){try{return m(C(D))}catch(L){return(0,i.throwError)(function(){return L})}}).pipe((0,o.catchError)(function(L){return D.rollback().pipe((0,o.concatWith)((0,i.throwError)(function(){return L})))}),(0,o.concatWith)(D.commit()))})))},y}();e.default=_},1530:function(r,e,t){var n=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0}),n(t(3057)),n(t(5742));var i=function(){function o(a){var s=a.run;this._run=s}return o.fromTransaction=function(a){return new o({run:a.run.bind(a)})},o.prototype.run=function(a,s){return this._run(a,s)},o}();e.default=i},5742:function(r,e,t){var n=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0});var i=t(8813),o=n(t(3057)),a=(n(t(9305)),function(){function s(u){this._txc=u}return s.prototype.run=function(u,l){var c=this;return new o.default(new i.Observable(function(f){try{f.next(c._txc.run(u,l)),f.complete()}catch(h){f.error(h)}return function(){}}))},s.prototype.commit=function(){var u=this;return new i.Observable(function(l){u._txc.commit().then(function(){l.complete()}).catch(function(c){return l.error(c)})})},s.prototype.rollback=function(){var u=this;return new i.Observable(function(l){u._txc.rollback().then(function(){l.complete()}).catch(function(c){return l.error(c)})})},s.prototype.isOpen=function(){return this._txc.isOpen()},s.prototype.close=function(){var u=this;return new i.Observable(function(l){u._txc.close().then(function(){l.complete()}).catch(function(c){return l.error(c)})})},s}());e.default=a},3659:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default="5.26.0"},481:(r,e,t)=>{r.exports=t(137)},137:r=>{r.exports=class{constructor(e,t,n,i){let o;if(typeof e=="object"){let a=e;e=a.k_p,t=a.k_i,n=a.k_d,i=a.dt,o=a.i_max}this.k_p=typeof e=="number"?e:1,this.k_i=t||0,this.k_d=n||0,this.dt=i||0,this.i_max=o||0,this.sumError=0,this.lastError=0,this.lastTime=0,this.target=0}setTarget(e){this.target=e}update(e){this.currentValue=e;let t=this.dt;if(!t){let o=Date.now();t=this.lastTime===0?0:(o-this.lastTime)/1e3,this.lastTime=o}typeof t=="number"&&t!==0||(t=1);let n=this.target-this.currentValue;if(this.sumError=this.sumError+n*t,this.i_max>0&&Math.abs(this.sumError)>this.i_max){let o=this.sumError>0?1:-1;this.sumError=o*this.i_max}let i=(n-this.lastError)/t;return this.lastError=n,this.k_p*n+this.k_i*this.sumError+this.k_d*i}reset(){this.sumError=0,this.lastError=0,this.lastTime=0}}},1803:r=>{var e,t,n=document.attachEvent,i=!1;function o(m){var E=m.__resizeTriggers__,C=E.firstElementChild,P=E.lastElementChild,T=C.firstElementChild;P.scrollLeft=P.scrollWidth,P.scrollTop=P.scrollHeight,T.style.width=C.offsetWidth+1+"px",T.style.height=C.offsetHeight+1+"px",C.scrollLeft=C.scrollWidth,C.scrollTop=C.scrollHeight}function a(m){var E=this;o(this),this.__resizeRAF__&&u(this.__resizeRAF__),this.__resizeRAF__=s(function(){(function(C){return C.offsetWidth!=C.__resizeLast__.width||C.offsetHeight!=C.__resizeLast__.height})(E)&&(E.__resizeLast__.width=E.offsetWidth,E.__resizeLast__.height=E.offsetHeight,E.__resizeListeners__.forEach(function(C){C.call(E,m)}))})}if(!n){var s=(t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(m){return window.setTimeout(m,20)},function(m){return t(m)}),u=(e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout,function(m){return e(m)}),l=!1,c="",f="animationstart",h="Webkit Moz O ms".split(" "),d="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),v=document.createElement("fakeelement");if(v.style.animationName!==void 0&&(l=!0),l===!1){for(var g=0;g<h.length;g++)if(v.style[h[g]+"AnimationName"]!==void 0){c="-"+h[g].toLowerCase()+"-",f=d[g],l=!0;break}}var _="resizeanim",y="@"+c+"keyframes "+_+" { from { opacity: 0; } to { opacity: 0; } } ",p=c+"animation: 1ms "+_+"; "}r.exports=function(m,E){return n?m.attachEvent("onresize",E):(m.__resizeTriggers__||(getComputedStyle(m).position=="static"&&(m.style.position="relative"),function(){if(!i){var C=(y||"")+".resize-triggers { "+(p||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',P=document.head||document.getElementsByTagName("head")[0],T=document.createElement("style");T.type="text/css",T.styleSheet?T.styleSheet.cssText=C:T.appendChild(document.createTextNode(C)),P.appendChild(T),i=!0}}(),m.__resizeLast__={},m.__resizeListeners__=[],(m.__resizeTriggers__=document.createElement("div")).className="resize-triggers",m.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',m.appendChild(m.__resizeTriggers__),o(m),m.addEventListener("scroll",a,!0),f&&m.__resizeTriggers__.addEventListener(f,function(C){C.animationName==_&&o(m)})),m.__resizeListeners__.push(E)),function(){n?m.detachEvent("onresize",E):(m.__resizeListeners__.splice(m.__resizeListeners__.indexOf(E),1),m.__resizeListeners__.length||(m.removeEventListener("scroll",a),m.__resizeTriggers__=!m.removeChild(m.__resizeTriggers__)))}}},8813:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(Kn,Ia,ka,sa){sa===void 0&&(sa=ka),Object.defineProperty(Kn,sa,{enumerable:!0,get:function(){return Ia[ka]}})}:function(Kn,Ia,ka,sa){sa===void 0&&(sa=ka),Kn[sa]=Ia[ka]}),i=this&&this.__exportStar||function(Kn,Ia){for(var ka in Kn)ka==="default"||Object.prototype.hasOwnProperty.call(Ia,ka)||n(Ia,Kn,ka)};Object.defineProperty(e,"__esModule",{value:!0}),e.interval=e.iif=e.generate=e.fromEventPattern=e.fromEvent=e.from=e.forkJoin=e.empty=e.defer=e.connectable=e.concat=e.combineLatest=e.bindNodeCallback=e.bindCallback=e.UnsubscriptionError=e.TimeoutError=e.SequenceError=e.ObjectUnsubscribedError=e.NotFoundError=e.EmptyError=e.ArgumentOutOfRangeError=e.firstValueFrom=e.lastValueFrom=e.isObservable=e.identity=e.noop=e.pipe=e.NotificationKind=e.Notification=e.Subscriber=e.Subscription=e.Scheduler=e.VirtualAction=e.VirtualTimeScheduler=e.animationFrameScheduler=e.animationFrame=e.queueScheduler=e.queue=e.asyncScheduler=e.async=e.asapScheduler=e.asap=e.AsyncSubject=e.ReplaySubject=e.BehaviorSubject=e.Subject=e.animationFrames=e.observable=e.ConnectableObservable=e.Observable=void 0,e.filter=e.expand=e.exhaustMap=e.exhaustAll=e.exhaust=e.every=e.endWith=e.elementAt=e.distinctUntilKeyChanged=e.distinctUntilChanged=e.distinct=e.dematerialize=e.delayWhen=e.delay=e.defaultIfEmpty=e.debounceTime=e.debounce=e.count=e.connect=e.concatWith=e.concatMapTo=e.concatMap=e.concatAll=e.combineLatestWith=e.combineLatestAll=e.combineAll=e.catchError=e.bufferWhen=e.bufferToggle=e.bufferTime=e.bufferCount=e.buffer=e.auditTime=e.audit=e.config=e.NEVER=e.EMPTY=e.scheduled=e.zip=e.using=e.timer=e.throwError=e.range=e.race=e.partition=e.pairs=e.onErrorResumeNext=e.of=e.never=e.merge=void 0,e.switchMap=e.switchAll=e.subscribeOn=e.startWith=e.skipWhile=e.skipUntil=e.skipLast=e.skip=e.single=e.shareReplay=e.share=e.sequenceEqual=e.scan=e.sampleTime=e.sample=e.refCount=e.retryWhen=e.retry=e.repeatWhen=e.repeat=e.reduce=e.raceWith=e.publishReplay=e.publishLast=e.publishBehavior=e.publish=e.pluck=e.pairwise=e.onErrorResumeNextWith=e.observeOn=e.multicast=e.min=e.mergeWith=e.mergeScan=e.mergeMapTo=e.mergeMap=e.flatMap=e.mergeAll=e.max=e.materialize=e.mapTo=e.map=e.last=e.isEmpty=e.ignoreElements=e.groupBy=e.first=e.findIndex=e.find=e.finalize=void 0,e.zipWith=e.zipAll=e.withLatestFrom=e.windowWhen=e.windowToggle=e.windowTime=e.windowCount=e.window=e.toArray=e.timestamp=e.timeoutWith=e.timeout=e.timeInterval=e.throwIfEmpty=e.throttleTime=e.throttle=e.tap=e.takeWhile=e.takeUntil=e.takeLast=e.take=e.switchScan=e.switchMapTo=void 0;var o=t(4662);Object.defineProperty(e,"Observable",{enumerable:!0,get:function(){return o.Observable}});var a=t(8918);Object.defineProperty(e,"ConnectableObservable",{enumerable:!0,get:function(){return a.ConnectableObservable}});var s=t(3327);Object.defineProperty(e,"observable",{enumerable:!0,get:function(){return s.observable}});var u=t(3110);Object.defineProperty(e,"animationFrames",{enumerable:!0,get:function(){return u.animationFrames}});var l=t(2483);Object.defineProperty(e,"Subject",{enumerable:!0,get:function(){return l.Subject}});var c=t(1637);Object.defineProperty(e,"BehaviorSubject",{enumerable:!0,get:function(){return c.BehaviorSubject}});var f=t(1242);Object.defineProperty(e,"ReplaySubject",{enumerable:!0,get:function(){return f.ReplaySubject}});var h=t(95);Object.defineProperty(e,"AsyncSubject",{enumerable:!0,get:function(){return h.AsyncSubject}});var d=t(3692);Object.defineProperty(e,"asap",{enumerable:!0,get:function(){return d.asap}}),Object.defineProperty(e,"asapScheduler",{enumerable:!0,get:function(){return d.asapScheduler}});var v=t(7961);Object.defineProperty(e,"async",{enumerable:!0,get:function(){return v.async}}),Object.defineProperty(e,"asyncScheduler",{enumerable:!0,get:function(){return v.asyncScheduler}});var g=t(2886);Object.defineProperty(e,"queue",{enumerable:!0,get:function(){return g.queue}}),Object.defineProperty(e,"queueScheduler",{enumerable:!0,get:function(){return g.queueScheduler}});var _=t(3862);Object.defineProperty(e,"animationFrame",{enumerable:!0,get:function(){return _.animationFrame}}),Object.defineProperty(e,"animationFrameScheduler",{enumerable:!0,get:function(){return _.animationFrameScheduler}});var y=t(182);Object.defineProperty(e,"VirtualTimeScheduler",{enumerable:!0,get:function(){return y.VirtualTimeScheduler}}),Object.defineProperty(e,"VirtualAction",{enumerable:!0,get:function(){return y.VirtualAction}});var p=t(8986);Object.defineProperty(e,"Scheduler",{enumerable:!0,get:function(){return p.Scheduler}});var m=t(8014);Object.defineProperty(e,"Subscription",{enumerable:!0,get:function(){return m.Subscription}});var E=t(5);Object.defineProperty(e,"Subscriber",{enumerable:!0,get:function(){return E.Subscriber}});var C=t(7800);Object.defineProperty(e,"Notification",{enumerable:!0,get:function(){return C.Notification}}),Object.defineProperty(e,"NotificationKind",{enumerable:!0,get:function(){return C.NotificationKind}});var P=t(2706);Object.defineProperty(e,"pipe",{enumerable:!0,get:function(){return P.pipe}});var T=t(1342);Object.defineProperty(e,"noop",{enumerable:!0,get:function(){return T.noop}});var R=t(6640);Object.defineProperty(e,"identity",{enumerable:!0,get:function(){return R.identity}});var D=t(1751);Object.defineProperty(e,"isObservable",{enumerable:!0,get:function(){return D.isObservable}});var L=t(6894);Object.defineProperty(e,"lastValueFrom",{enumerable:!0,get:function(){return L.lastValueFrom}});var j=t(9060);Object.defineProperty(e,"firstValueFrom",{enumerable:!0,get:function(){return j.firstValueFrom}});var F=t(7057);Object.defineProperty(e,"ArgumentOutOfRangeError",{enumerable:!0,get:function(){return F.ArgumentOutOfRangeError}});var q=t(2823);Object.defineProperty(e,"EmptyError",{enumerable:!0,get:function(){return q.EmptyError}});var W=t(1759);Object.defineProperty(e,"NotFoundError",{enumerable:!0,get:function(){return W.NotFoundError}});var Z=t(9686);Object.defineProperty(e,"ObjectUnsubscribedError",{enumerable:!0,get:function(){return Z.ObjectUnsubscribedError}});var Q=t(1505);Object.defineProperty(e,"SequenceError",{enumerable:!0,get:function(){return Q.SequenceError}});var re=t(1554);Object.defineProperty(e,"TimeoutError",{enumerable:!0,get:function(){return re.TimeoutError}});var ee=t(5788);Object.defineProperty(e,"UnsubscriptionError",{enumerable:!0,get:function(){return ee.UnsubscriptionError}});var ue=t(2713);Object.defineProperty(e,"bindCallback",{enumerable:!0,get:function(){return ue.bindCallback}});var de=t(8561);Object.defineProperty(e,"bindNodeCallback",{enumerable:!0,get:function(){return de.bindNodeCallback}});var se=t(3247);Object.defineProperty(e,"combineLatest",{enumerable:!0,get:function(){return se.combineLatest}});var be=t(3865);Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return be.concat}});var Le=t(7579);Object.defineProperty(e,"connectable",{enumerable:!0,get:function(){return Le.connectable}});var fe=t(9353);Object.defineProperty(e,"defer",{enumerable:!0,get:function(){return fe.defer}});var ce=t(8616);Object.defineProperty(e,"empty",{enumerable:!0,get:function(){return ce.empty}});var Ee=t(9105);Object.defineProperty(e,"forkJoin",{enumerable:!0,get:function(){return Ee.forkJoin}});var Ce=t(4917);Object.defineProperty(e,"from",{enumerable:!0,get:function(){return Ce.from}});var ke=t(5337);Object.defineProperty(e,"fromEvent",{enumerable:!0,get:function(){return ke.fromEvent}});var Ie=t(347);Object.defineProperty(e,"fromEventPattern",{enumerable:!0,get:function(){return Ie.fromEventPattern}});var ve=t(7610);Object.defineProperty(e,"generate",{enumerable:!0,get:function(){return ve.generate}});var we=t(4209);Object.defineProperty(e,"iif",{enumerable:!0,get:function(){return we.iif}});var xe=t(6472);Object.defineProperty(e,"interval",{enumerable:!0,get:function(){return xe.interval}});var Fe=t(2833);Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return Fe.merge}});var He=t(8655);Object.defineProperty(e,"never",{enumerable:!0,get:function(){return He.never}});var at=t(1004);Object.defineProperty(e,"of",{enumerable:!0,get:function(){return at.of}});var wt=t(6102);Object.defineProperty(e,"onErrorResumeNext",{enumerable:!0,get:function(){return wt.onErrorResumeNext}});var it=t(7740);Object.defineProperty(e,"pairs",{enumerable:!0,get:function(){return it.pairs}});var H=t(1699);Object.defineProperty(e,"partition",{enumerable:!0,get:function(){return H.partition}});var $=t(5584);Object.defineProperty(e,"race",{enumerable:!0,get:function(){return $.race}});var ne=t(9376);Object.defineProperty(e,"range",{enumerable:!0,get:function(){return ne.range}});var Re=t(1103);Object.defineProperty(e,"throwError",{enumerable:!0,get:function(){return Re.throwError}});var De=t(4092);Object.defineProperty(e,"timer",{enumerable:!0,get:function(){return De.timer}});var Be=t(7853);Object.defineProperty(e,"using",{enumerable:!0,get:function(){return Be.using}});var Je=t(7286);Object.defineProperty(e,"zip",{enumerable:!0,get:function(){return Je.zip}});var Tt=t(1656);Object.defineProperty(e,"scheduled",{enumerable:!0,get:function(){return Tt.scheduled}});var Lt=t(8616);Object.defineProperty(e,"EMPTY",{enumerable:!0,get:function(){return Lt.EMPTY}});var Vt=t(8655);Object.defineProperty(e,"NEVER",{enumerable:!0,get:function(){return Vt.NEVER}}),i(t(6038),e);var Nt=t(3413);Object.defineProperty(e,"config",{enumerable:!0,get:function(){return Nt.config}});var Jt=t(3146);Object.defineProperty(e,"audit",{enumerable:!0,get:function(){return Jt.audit}});var Er=t(3231);Object.defineProperty(e,"auditTime",{enumerable:!0,get:function(){return Er.auditTime}});var Yt=t(8015);Object.defineProperty(e,"buffer",{enumerable:!0,get:function(){return Yt.buffer}});var dt=t(5572);Object.defineProperty(e,"bufferCount",{enumerable:!0,get:function(){return dt.bufferCount}});var me=t(7210);Object.defineProperty(e,"bufferTime",{enumerable:!0,get:function(){return me.bufferTime}});var nt=t(8995);Object.defineProperty(e,"bufferToggle",{enumerable:!0,get:function(){return nt.bufferToggle}});var lt=t(8831);Object.defineProperty(e,"bufferWhen",{enumerable:!0,get:function(){return lt.bufferWhen}});var ct=t(8118);Object.defineProperty(e,"catchError",{enumerable:!0,get:function(){return ct.catchError}});var ft=t(6625);Object.defineProperty(e,"combineAll",{enumerable:!0,get:function(){return ft.combineAll}});var Xt=t(6728);Object.defineProperty(e,"combineLatestAll",{enumerable:!0,get:function(){return Xt.combineLatestAll}});var pt=t(8239);Object.defineProperty(e,"combineLatestWith",{enumerable:!0,get:function(){return pt.combineLatestWith}});var Qt=t(8158);Object.defineProperty(e,"concatAll",{enumerable:!0,get:function(){return Qt.concatAll}});var mr=t(9135);Object.defineProperty(e,"concatMap",{enumerable:!0,get:function(){return mr.concatMap}});var Rr=t(9938);Object.defineProperty(e,"concatMapTo",{enumerable:!0,get:function(){return Rr.concatMapTo}});var ar=t(9669);Object.defineProperty(e,"concatWith",{enumerable:!0,get:function(){return ar.concatWith}});var nr=t(1483);Object.defineProperty(e,"connect",{enumerable:!0,get:function(){return nr.connect}});var tr=t(1038);Object.defineProperty(e,"count",{enumerable:!0,get:function(){return tr.count}});var lr=t(4461);Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return lr.debounce}});var Gr=t(8079);Object.defineProperty(e,"debounceTime",{enumerable:!0,get:function(){return Gr.debounceTime}});var fn=t(378);Object.defineProperty(e,"defaultIfEmpty",{enumerable:!0,get:function(){return fn.defaultIfEmpty}});var In=t(914);Object.defineProperty(e,"delay",{enumerable:!0,get:function(){return In.delay}});var Un=t(8766);Object.defineProperty(e,"delayWhen",{enumerable:!0,get:function(){return Un.delayWhen}});var hn=t(7441);Object.defineProperty(e,"dematerialize",{enumerable:!0,get:function(){return hn.dematerialize}});var $n=t(5365);Object.defineProperty(e,"distinct",{enumerable:!0,get:function(){return $n.distinct}});var vn=t(8937);Object.defineProperty(e,"distinctUntilChanged",{enumerable:!0,get:function(){return vn.distinctUntilChanged}});var Ei=t(9612);Object.defineProperty(e,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return Ei.distinctUntilKeyChanged}});var Li=t(4520);Object.defineProperty(e,"elementAt",{enumerable:!0,get:function(){return Li.elementAt}});var Fr=t(1776);Object.defineProperty(e,"endWith",{enumerable:!0,get:function(){return Fr.endWith}});var Tn=t(5510);Object.defineProperty(e,"every",{enumerable:!0,get:function(){return Tn.every}});var Ni=t(1551);Object.defineProperty(e,"exhaust",{enumerable:!0,get:function(){return Ni.exhaust}});var _o=t(2752);Object.defineProperty(e,"exhaustAll",{enumerable:!0,get:function(){return _o.exhaustAll}});var Pi=t(4753);Object.defineProperty(e,"exhaustMap",{enumerable:!0,get:function(){return Pi.exhaustMap}});var vi=t(7661);Object.defineProperty(e,"expand",{enumerable:!0,get:function(){return vi.expand}});var un=t(783);Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return un.filter}});var qn=t(3555);Object.defineProperty(e,"finalize",{enumerable:!0,get:function(){return qn.finalize}});var Ca=t(7714);Object.defineProperty(e,"find",{enumerable:!0,get:function(){return Ca.find}});var pi=t(9756);Object.defineProperty(e,"findIndex",{enumerable:!0,get:function(){return pi.findIndex}});var Su=t(8275);Object.defineProperty(e,"first",{enumerable:!0,get:function(){return Su.first}});var Pa=t(7815);Object.defineProperty(e,"groupBy",{enumerable:!0,get:function(){return Pa.groupBy}});var Hi=t(490);Object.defineProperty(e,"ignoreElements",{enumerable:!0,get:function(){return Hi.ignoreElements}});var Ha=t(9356);Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return Ha.isEmpty}});var ia=t(8669);Object.defineProperty(e,"last",{enumerable:!0,get:function(){return ia.last}});var kn=t(5471);Object.defineProperty(e,"map",{enumerable:!0,get:function(){return kn.map}});var ui=t(3218);Object.defineProperty(e,"mapTo",{enumerable:!0,get:function(){return ui.mapTo}});var pr=t(2360);Object.defineProperty(e,"materialize",{enumerable:!0,get:function(){return pr.materialize}});var Aa=t(1415);Object.defineProperty(e,"max",{enumerable:!0,get:function(){return Aa.max}});var lo=t(7302);Object.defineProperty(e,"mergeAll",{enumerable:!0,get:function(){return lo.mergeAll}});var Vr=t(6902);Object.defineProperty(e,"flatMap",{enumerable:!0,get:function(){return Vr.flatMap}});var $r=t(983);Object.defineProperty(e,"mergeMap",{enumerable:!0,get:function(){return $r.mergeMap}});var Ya=t(6586);Object.defineProperty(e,"mergeMapTo",{enumerable:!0,get:function(){return Ya.mergeMapTo}});var Ys=t(4408);Object.defineProperty(e,"mergeScan",{enumerable:!0,get:function(){return Ys.mergeScan}});var eo=t(8253);Object.defineProperty(e,"mergeWith",{enumerable:!0,get:function(){return eo.mergeWith}});var oa=t(2669);Object.defineProperty(e,"min",{enumerable:!0,get:function(){return oa.min}});var Tu=t(9247);Object.defineProperty(e,"multicast",{enumerable:!0,get:function(){return Tu.multicast}});var Dn=t(5184);Object.defineProperty(e,"observeOn",{enumerable:!0,get:function(){return Dn.observeOn}});var Ai=t(1226);Object.defineProperty(e,"onErrorResumeNextWith",{enumerable:!0,get:function(){return Ai.onErrorResumeNextWith}});var Yi=t(1518);Object.defineProperty(e,"pairwise",{enumerable:!0,get:function(){return Yi.pairwise}});var Cu=t(4912);Object.defineProperty(e,"pluck",{enumerable:!0,get:function(){return Cu.pluck}});var il=t(766);Object.defineProperty(e,"publish",{enumerable:!0,get:function(){return il.publish}});var ji=t(7220);Object.defineProperty(e,"publishBehavior",{enumerable:!0,get:function(){return ji.publishBehavior}});var Xa=t(6106);Object.defineProperty(e,"publishLast",{enumerable:!0,get:function(){return Xa.publishLast}});var Xs=t(8157);Object.defineProperty(e,"publishReplay",{enumerable:!0,get:function(){return Xs.publishReplay}});var rc=t(5600);Object.defineProperty(e,"raceWith",{enumerable:!0,get:function(){return rc.raceWith}});var nc=t(9139);Object.defineProperty(e,"reduce",{enumerable:!0,get:function(){return nc.reduce}});var qr=t(8522);Object.defineProperty(e,"repeat",{enumerable:!0,get:function(){return qr.repeat}});var Uo=t(6566);Object.defineProperty(e,"repeatWhen",{enumerable:!0,get:function(){return Uo.repeatWhen}});var co=t(7835);Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return co.retry}});var ic=t(9843);Object.defineProperty(e,"retryWhen",{enumerable:!0,get:function(){return ic.retryWhen}});var Wt=t(7561);Object.defineProperty(e,"refCount",{enumerable:!0,get:function(){return Wt.refCount}});var $s=t(1731);Object.defineProperty(e,"sample",{enumerable:!0,get:function(){return $s.sample}});var oc=t(6086);Object.defineProperty(e,"sampleTime",{enumerable:!0,get:function(){return oc.sampleTime}});var Ra=t(8624);Object.defineProperty(e,"scan",{enumerable:!0,get:function(){return Ra.scan}});var Pu=t(582);Object.defineProperty(e,"sequenceEqual",{enumerable:!0,get:function(){return Pu.sequenceEqual}});var wo=t(8977);Object.defineProperty(e,"share",{enumerable:!0,get:function(){return wo.share}});var Kr=t(3133);Object.defineProperty(e,"shareReplay",{enumerable:!0,get:function(){return Kr.shareReplay}});var aa=t(3001);Object.defineProperty(e,"single",{enumerable:!0,get:function(){return aa.single}});var ol=t(3982);Object.defineProperty(e,"skip",{enumerable:!0,get:function(){return ol.skip}});var lh=t(9098);Object.defineProperty(e,"skipLast",{enumerable:!0,get:function(){return lh.skipLast}});var ac=t(7372);Object.defineProperty(e,"skipUntil",{enumerable:!0,get:function(){return ac.skipUntil}});var ch=t(4721);Object.defineProperty(e,"skipWhile",{enumerable:!0,get:function(){return ch.skipWhile}});var tf=t(269);Object.defineProperty(e,"startWith",{enumerable:!0,get:function(){return tf.startWith}});var al=t(8960);Object.defineProperty(e,"subscribeOn",{enumerable:!0,get:function(){return al.subscribeOn}});var Ks=t(8774);Object.defineProperty(e,"switchAll",{enumerable:!0,get:function(){return Ks.switchAll}});var ws=t(3879);Object.defineProperty(e,"switchMap",{enumerable:!0,get:function(){return ws.switchMap}});var $a=t(3274);Object.defineProperty(e,"switchMapTo",{enumerable:!0,get:function(){return $a.switchMapTo}});var sl=t(8712);Object.defineProperty(e,"switchScan",{enumerable:!0,get:function(){return sl.switchScan}});var sc=t(846);Object.defineProperty(e,"take",{enumerable:!0,get:function(){return sc.take}});var uc=t(8330);Object.defineProperty(e,"takeLast",{enumerable:!0,get:function(){return uc.takeLast}});var ul=t(4780);Object.defineProperty(e,"takeUntil",{enumerable:!0,get:function(){return ul.takeUntil}});var Zs=t(2129);Object.defineProperty(e,"takeWhile",{enumerable:!0,get:function(){return Zs.takeWhile}});var ll=t(3964);Object.defineProperty(e,"tap",{enumerable:!0,get:function(){return ll.tap}});var pn=t(8941);Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return pn.throttle}});var Dr=t(7640);Object.defineProperty(e,"throttleTime",{enumerable:!0,get:function(){return Dr.throttleTime}});var lc=t(4869);Object.defineProperty(e,"throwIfEmpty",{enumerable:!0,get:function(){return lc.throwIfEmpty}});var Qs=t(489);Object.defineProperty(e,"timeInterval",{enumerable:!0,get:function(){return Qs.timeInterval}});var rf=t(1554);Object.defineProperty(e,"timeout",{enumerable:!0,get:function(){return rf.timeout}});var Es=t(4862);Object.defineProperty(e,"timeoutWith",{enumerable:!0,get:function(){return Es.timeoutWith}});var Ka=t(6505);Object.defineProperty(e,"timestamp",{enumerable:!0,get:function(){return Ka.timestamp}});var fh=t(2343);Object.defineProperty(e,"toArray",{enumerable:!0,get:function(){return fh.toArray}});var Od=t(5477);Object.defineProperty(e,"window",{enumerable:!0,get:function(){return Od.window}});var Js=t(6746);Object.defineProperty(e,"windowCount",{enumerable:!0,get:function(){return Js.windowCount}});var zn=t(8208);Object.defineProperty(e,"windowTime",{enumerable:!0,get:function(){return zn.windowTime}});var cc=t(6637);Object.defineProperty(e,"windowToggle",{enumerable:!0,get:function(){return cc.windowToggle}});var to=t(1141);Object.defineProperty(e,"windowWhen",{enumerable:!0,get:function(){return to.windowWhen}});var eu=t(5442);Object.defineProperty(e,"withLatestFrom",{enumerable:!0,get:function(){return eu.withLatestFrom}});var fc=t(187);Object.defineProperty(e,"zipAll",{enumerable:!0,get:function(){return fc.zipAll}});var Fi=t(8538);Object.defineProperty(e,"zipWith",{enumerable:!0,get:function(){return Fi.zipWith}})},95:function(r,e,t){var n,i=this&&this.__extends||(n=function(a,s){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},n(a,s)},function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}n(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)});Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncSubject=void 0;var o=function(a){function s(){var u=a!==null&&a.apply(this,arguments)||this;return u._value=null,u._hasValue=!1,u._isComplete=!1,u}return i(s,a),s.prototype._checkFinalizedStatuses=function(u){var l=this,c=l.hasError,f=l._hasValue,h=l._value,d=l.thrownError,v=l.isStopped,g=l._isComplete;c?u.error(d):(v||g)&&(f&&u.next(h),u.complete())},s.prototype.next=function(u){this.isStopped||(this._value=u,this._hasValue=!0)},s.prototype.complete=function(){var u=this,l=u._hasValue,c=u._value;u._isComplete||(this._isComplete=!0,l&&a.prototype.next.call(this,c),a.prototype.complete.call(this))},s}(t(2483).Subject);e.AsyncSubject=o},1637:function(r,e,t){var n,i=this&&this.__extends||(n=function(a,s){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},n(a,s)},function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}n(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)});Object.defineProperty(e,"__esModule",{value:!0}),e.BehaviorSubject=void 0;var o=function(a){function s(u){var l=a.call(this)||this;return l._value=u,l}return i(s,a),Object.defineProperty(s.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),s.prototype._subscribe=function(u){var l=a.prototype._subscribe.call(this,u);return!l.closed&&u.next(this._value),l},s.prototype.getValue=function(){var u=this,l=u.hasError,c=u.thrownError,f=u._value;if(l)throw c;return this._throwIfClosed(),f},s.prototype.next=function(u){a.prototype.next.call(this,this._value=u)},s}(t(2483).Subject);e.BehaviorSubject=o},7800:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.observeNotification=e.Notification=e.NotificationKind=void 0;var n,i=t(8616),o=t(1004),a=t(1103),s=t(1018);(n=e.NotificationKind||(e.NotificationKind={})).NEXT="N",n.ERROR="E",n.COMPLETE="C";var u=function(){function c(f,h,d){this.kind=f,this.value=h,this.error=d,this.hasValue=f==="N"}return c.prototype.observe=function(f){return l(this,f)},c.prototype.do=function(f,h,d){var v=this,g=v.kind,_=v.value,y=v.error;return g==="N"?f==null?void 0:f(_):g==="E"?h==null?void 0:h(y):d==null?void 0:d()},c.prototype.accept=function(f,h,d){var v;return s.isFunction((v=f)===null||v===void 0?void 0:v.next)?this.observe(f):this.do(f,h,d)},c.prototype.toObservable=function(){var f=this,h=f.kind,d=f.value,v=f.error,g=h==="N"?o.of(d):h==="E"?a.throwError(function(){return v}):h==="C"?i.EMPTY:0;if(!g)throw new TypeError("Unexpected notification kind "+h);return g},c.createNext=function(f){return new c("N",f)},c.createError=function(f){return new c("E",void 0,f)},c.createComplete=function(){return c.completeNotification},c.completeNotification=new c("C"),c}();function l(c,f){var h,d,v,g=c,_=g.kind,y=g.value,p=g.error;if(typeof _!="string")throw new TypeError('Invalid notification, missing "kind"');_==="N"?(h=f.next)===null||h===void 0||h.call(f,y):_==="E"?(d=f.error)===null||d===void 0||d.call(f,p):(v=f.complete)===null||v===void 0||v.call(f)}e.Notification=u,e.observeNotification=l},9052:(r,e)=>{function t(n,i,o){return{kind:n,value:i,error:o}}Object.defineProperty(e,"__esModule",{value:!0}),e.createNotification=e.nextNotification=e.errorNotification=e.COMPLETE_NOTIFICATION=void 0,e.COMPLETE_NOTIFICATION=t("C",void 0,void 0),e.errorNotification=function(n){return t("E",void 0,n)},e.nextNotification=function(n){return t("N",n,void 0)},e.createNotification=t},4662:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Observable=void 0;var n=t(5),i=t(8014),o=t(3327),a=t(2706),s=t(3413),u=t(1018),l=t(9223),c=function(){function h(d){d&&(this._subscribe=d)}return h.prototype.lift=function(d){var v=new h;return v.source=this,v.operator=d,v},h.prototype.subscribe=function(d,v,g){var _,y=this,p=(_=d)&&_ instanceof n.Subscriber||function(m){return m&&u.isFunction(m.next)&&u.isFunction(m.error)&&u.isFunction(m.complete)}(_)&&i.isSubscription(_)?d:new n.SafeSubscriber(d,v,g);return l.errorContext(function(){var m=y,E=m.operator,C=m.source;p.add(E?E.call(p,C):C?y._subscribe(p):y._trySubscribe(p))}),p},h.prototype._trySubscribe=function(d){try{return this._subscribe(d)}catch(v){d.error(v)}},h.prototype.forEach=function(d,v){var g=this;return new(v=f(v))(function(_,y){var p=new n.SafeSubscriber({next:function(m){try{d(m)}catch(E){y(E),p.unsubscribe()}},error:y,complete:_});g.subscribe(p)})},h.prototype._subscribe=function(d){var v;return(v=this.source)===null||v===void 0?void 0:v.subscribe(d)},h.prototype[o.observable]=function(){return this},h.prototype.pipe=function(){for(var d=[],v=0;v<arguments.length;v++)d[v]=arguments[v];return a.pipeFromArray(d)(this)},h.prototype.toPromise=function(d){var v=this;return new(d=f(d))(function(g,_){var y;v.subscribe(function(p){return y=p},function(p){return _(p)},function(){return g(y)})})},h.create=function(d){return new h(d)},h}();function f(h){var d;return(d=h??s.config.Promise)!==null&&d!==void 0?d:Promise}e.Observable=c},1242:function(r,e,t){var n,i=this&&this.__extends||(n=function(u,l){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(c[h]=f[h])},n(u,l)},function(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function c(){this.constructor=u}n(u,l),u.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)});Object.defineProperty(e,"__esModule",{value:!0}),e.ReplaySubject=void 0;var o=t(2483),a=t(9568),s=function(u){function l(c,f,h){c===void 0&&(c=1/0),f===void 0&&(f=1/0),h===void 0&&(h=a.dateTimestampProvider);var d=u.call(this)||this;return d._bufferSize=c,d._windowTime=f,d._timestampProvider=h,d._buffer=[],d._infiniteTimeWindow=!0,d._infiniteTimeWindow=f===1/0,d._bufferSize=Math.max(1,c),d._windowTime=Math.max(1,f),d}return i(l,u),l.prototype.next=function(c){var f=this,h=f.isStopped,d=f._buffer,v=f._infiniteTimeWindow,g=f._timestampProvider,_=f._windowTime;h||(d.push(c),!v&&d.push(g.now()+_)),this._trimBuffer(),u.prototype.next.call(this,c)},l.prototype._subscribe=function(c){this._throwIfClosed(),this._trimBuffer();for(var f=this._innerSubscribe(c),h=this._infiniteTimeWindow,d=this._buffer.slice(),v=0;v<d.length&&!c.closed;v+=h?1:2)c.next(d[v]);return this._checkFinalizedStatuses(c),f},l.prototype._trimBuffer=function(){var c=this,f=c._bufferSize,h=c._timestampProvider,d=c._buffer,v=c._infiniteTimeWindow,g=(v?1:2)*f;if(f<1/0&&g<d.length&&d.splice(0,d.length-g),!v){for(var _=h.now(),y=0,p=1;p<d.length&&d[p]<=_;p+=2)y=p;y&&d.splice(0,y+1)}},l}(o.Subject);e.ReplaySubject=s},8986:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Scheduler=void 0;var n=t(9568),i=function(){function o(a,s){s===void 0&&(s=o.now),this.schedulerActionCtor=a,this.now=s}return o.prototype.schedule=function(a,s,u){return s===void 0&&(s=0),new this.schedulerActionCtor(this,a).schedule(u,s)},o.now=n.dateTimestampProvider.now,o}();e.Scheduler=i},2483:function(r,e,t){var n,i=this&&this.__extends||(n=function(d,v){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,_){g.__proto__=_}||function(g,_){for(var y in _)Object.prototype.hasOwnProperty.call(_,y)&&(g[y]=_[y])},n(d,v)},function(d,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function g(){this.constructor=d}n(d,v),d.prototype=v===null?Object.create(v):(g.prototype=v.prototype,new g)}),o=this&&this.__values||function(d){var v=typeof Symbol=="function"&&Symbol.iterator,g=v&&d[v],_=0;if(g)return g.call(d);if(d&&typeof d.length=="number")return{next:function(){return d&&_>=d.length&&(d=void 0),{value:d&&d[_++],done:!d}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.AnonymousSubject=e.Subject=void 0;var a=t(4662),s=t(8014),u=t(9686),l=t(7479),c=t(9223),f=function(d){function v(){var g=d.call(this)||this;return g.closed=!1,g.currentObservers=null,g.observers=[],g.isStopped=!1,g.hasError=!1,g.thrownError=null,g}return i(v,d),v.prototype.lift=function(g){var _=new h(this,this);return _.operator=g,_},v.prototype._throwIfClosed=function(){if(this.closed)throw new u.ObjectUnsubscribedError},v.prototype.next=function(g){var _=this;c.errorContext(function(){var y,p;if(_._throwIfClosed(),!_.isStopped){_.currentObservers||(_.currentObservers=Array.from(_.observers));try{for(var m=o(_.currentObservers),E=m.next();!E.done;E=m.next())E.value.next(g)}catch(C){y={error:C}}finally{try{E&&!E.done&&(p=m.return)&&p.call(m)}finally{if(y)throw y.error}}}})},v.prototype.error=function(g){var _=this;c.errorContext(function(){if(_._throwIfClosed(),!_.isStopped){_.hasError=_.isStopped=!0,_.thrownError=g;for(var y=_.observers;y.length;)y.shift().error(g)}})},v.prototype.complete=function(){var g=this;c.errorContext(function(){if(g._throwIfClosed(),!g.isStopped){g.isStopped=!0;for(var _=g.observers;_.length;)_.shift().complete()}})},v.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(v.prototype,"observed",{get:function(){var g;return((g=this.observers)===null||g===void 0?void 0:g.length)>0},enumerable:!1,configurable:!0}),v.prototype._trySubscribe=function(g){return this._throwIfClosed(),d.prototype._trySubscribe.call(this,g)},v.prototype._subscribe=function(g){return this._throwIfClosed(),this._checkFinalizedStatuses(g),this._innerSubscribe(g)},v.prototype._innerSubscribe=function(g){var _=this,y=this,p=y.hasError,m=y.isStopped,E=y.observers;return p||m?s.EMPTY_SUBSCRIPTION:(this.currentObservers=null,E.push(g),new s.Subscription(function(){_.currentObservers=null,l.arrRemove(E,g)}))},v.prototype._checkFinalizedStatuses=function(g){var _=this,y=_.hasError,p=_.thrownError,m=_.isStopped;y?g.error(p):m&&g.complete()},v.prototype.asObservable=function(){var g=new a.Observable;return g.source=this,g},v.create=function(g,_){return new h(g,_)},v}(a.Observable);e.Subject=f;var h=function(d){function v(g,_){var y=d.call(this)||this;return y.destination=g,y.source=_,y}return i(v,d),v.prototype.next=function(g){var _,y;(y=(_=this.destination)===null||_===void 0?void 0:_.next)===null||y===void 0||y.call(_,g)},v.prototype.error=function(g){var _,y;(y=(_=this.destination)===null||_===void 0?void 0:_.error)===null||y===void 0||y.call(_,g)},v.prototype.complete=function(){var g,_;(_=(g=this.destination)===null||g===void 0?void 0:g.complete)===null||_===void 0||_.call(g)},v.prototype._subscribe=function(g){var _,y;return(y=(_=this.source)===null||_===void 0?void 0:_.subscribe(g))!==null&&y!==void 0?y:s.EMPTY_SUBSCRIPTION},v}(f);e.AnonymousSubject=h},5:function(r,e,t){var n,i=this&&this.__extends||(n=function(E,C){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,T){P.__proto__=T}||function(P,T){for(var R in T)Object.prototype.hasOwnProperty.call(T,R)&&(P[R]=T[R])},n(E,C)},function(E,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function P(){this.constructor=E}n(E,C),E.prototype=C===null?Object.create(C):(P.prototype=C.prototype,new P)});Object.defineProperty(e,"__esModule",{value:!0}),e.EMPTY_OBSERVER=e.SafeSubscriber=e.Subscriber=void 0;var o=t(1018),a=t(8014),s=t(3413),u=t(7315),l=t(1342),c=t(9052),f=t(9155),h=t(9223),d=function(E){function C(P){var T=E.call(this)||this;return T.isStopped=!1,P?(T.destination=P,a.isSubscription(P)&&P.add(T)):T.destination=e.EMPTY_OBSERVER,T}return i(C,E),C.create=function(P,T,R){return new y(P,T,R)},C.prototype.next=function(P){this.isStopped?m(c.nextNotification(P),this):this._next(P)},C.prototype.error=function(P){this.isStopped?m(c.errorNotification(P),this):(this.isStopped=!0,this._error(P))},C.prototype.complete=function(){this.isStopped?m(c.COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())},C.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,E.prototype.unsubscribe.call(this),this.destination=null)},C.prototype._next=function(P){this.destination.next(P)},C.prototype._error=function(P){try{this.destination.error(P)}finally{this.unsubscribe()}},C.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},C}(a.Subscription);e.Subscriber=d;var v=Function.prototype.bind;function g(E,C){return v.call(E,C)}var _=function(){function E(C){this.partialObserver=C}return E.prototype.next=function(C){var P=this.partialObserver;if(P.next)try{P.next(C)}catch(T){p(T)}},E.prototype.error=function(C){var P=this.partialObserver;if(P.error)try{P.error(C)}catch(T){p(T)}else p(C)},E.prototype.complete=function(){var C=this.partialObserver;if(C.complete)try{C.complete()}catch(P){p(P)}},E}(),y=function(E){function C(P,T,R){var D,L,j=E.call(this)||this;return o.isFunction(P)||!P?D={next:P??void 0,error:T??void 0,complete:R??void 0}:j&&s.config.useDeprecatedNextContext?((L=Object.create(P)).unsubscribe=function(){return j.unsubscribe()},D={next:P.next&&g(P.next,L),error:P.error&&g(P.error,L),complete:P.complete&&g(P.complete,L)}):D=P,j.destination=new _(D),j}return i(C,E),C}(d);function p(E){s.config.useDeprecatedSynchronousErrorHandling?h.captureError(E):u.reportUnhandledError(E)}function m(E,C){var P=s.config.onStoppedNotification;P&&f.timeoutProvider.setTimeout(function(){return P(E,C)})}e.SafeSubscriber=y,e.EMPTY_OBSERVER={closed:!0,next:l.noop,error:function(E){throw E},complete:l.noop}},8014:function(r,e,t){var n=this&&this.__values||function(f){var h=typeof Symbol=="function"&&Symbol.iterator,d=h&&f[h],v=0;if(d)return d.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&v>=f.length&&(f=void 0),{value:f&&f[v++],done:!f}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(f,h){var d=typeof Symbol=="function"&&f[Symbol.iterator];if(!d)return f;var v,g,_=d.call(f),y=[];try{for(;(h===void 0||h-- >0)&&!(v=_.next()).done;)y.push(v.value)}catch(p){g={error:p}}finally{try{v&&!v.done&&(d=_.return)&&d.call(_)}finally{if(g)throw g.error}}return y},o=this&&this.__spreadArray||function(f,h){for(var d=0,v=h.length,g=f.length;d<v;d++,g++)f[g]=h[d];return f};Object.defineProperty(e,"__esModule",{value:!0}),e.isSubscription=e.EMPTY_SUBSCRIPTION=e.Subscription=void 0;var a=t(1018),s=t(5788),u=t(7479),l=function(){function f(d){this.initialTeardown=d,this.closed=!1,this._parentage=null,this._finalizers=null}var h;return f.prototype.unsubscribe=function(){var d,v,g,_,y;if(!this.closed){this.closed=!0;var p=this._parentage;if(p)if(this._parentage=null,Array.isArray(p))try{for(var m=n(p),E=m.next();!E.done;E=m.next())E.value.remove(this)}catch(L){d={error:L}}finally{try{E&&!E.done&&(v=m.return)&&v.call(m)}finally{if(d)throw d.error}}else p.remove(this);var C=this.initialTeardown;if(a.isFunction(C))try{C()}catch(L){y=L instanceof s.UnsubscriptionError?L.errors:[L]}var P=this._finalizers;if(P){this._finalizers=null;try{for(var T=n(P),R=T.next();!R.done;R=T.next()){var D=R.value;try{c(D)}catch(L){y=y??[],L instanceof s.UnsubscriptionError?y=o(o([],i(y)),i(L.errors)):y.push(L)}}}catch(L){g={error:L}}finally{try{R&&!R.done&&(_=T.return)&&_.call(T)}finally{if(g)throw g.error}}}if(y)throw new s.UnsubscriptionError(y)}},f.prototype.add=function(d){var v;if(d&&d!==this)if(this.closed)c(d);else{if(d instanceof f){if(d.closed||d._hasParent(this))return;d._addParent(this)}(this._finalizers=(v=this._finalizers)!==null&&v!==void 0?v:[]).push(d)}},f.prototype._hasParent=function(d){var v=this._parentage;return v===d||Array.isArray(v)&&v.includes(d)},f.prototype._addParent=function(d){var v=this._parentage;this._parentage=Array.isArray(v)?(v.push(d),v):v?[v,d]:d},f.prototype._removeParent=function(d){var v=this._parentage;v===d?this._parentage=null:Array.isArray(v)&&u.arrRemove(v,d)},f.prototype.remove=function(d){var v=this._finalizers;v&&u.arrRemove(v,d),d instanceof f&&d._removeParent(this)},f.EMPTY=((h=new f).closed=!0,h),f}();function c(f){a.isFunction(f)?f():f.unsubscribe()}e.Subscription=l,e.EMPTY_SUBSCRIPTION=l.EMPTY,e.isSubscription=function(f){return f instanceof l||f&&"closed"in f&&a.isFunction(f.remove)&&a.isFunction(f.add)&&a.isFunction(f.unsubscribe)}},3413:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.config=void 0,e.config={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9060:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.firstValueFrom=void 0;var n=t(2823),i=t(5);e.firstValueFrom=function(o,a){var s=typeof a=="object";return new Promise(function(u,l){var c=new i.SafeSubscriber({next:function(f){u(f),c.unsubscribe()},error:l,complete:function(){s?u(a.defaultValue):l(new n.EmptyError)}});o.subscribe(c)})}},6894:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.lastValueFrom=void 0;var n=t(2823);e.lastValueFrom=function(i,o){var a=typeof o=="object";return new Promise(function(s,u){var l,c=!1;i.subscribe({next:function(f){l=f,c=!0},error:u,complete:function(){c?s(l):a?s(o.defaultValue):u(new n.EmptyError)}})})}},8918:function(r,e,t){var n,i=this&&this.__extends||(n=function(f,h){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,v){d.__proto__=v}||function(d,v){for(var g in v)Object.prototype.hasOwnProperty.call(v,g)&&(d[g]=v[g])},n(f,h)},function(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function d(){this.constructor=f}n(f,h),f.prototype=h===null?Object.create(h):(d.prototype=h.prototype,new d)});Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectableObservable=void 0;var o=t(4662),a=t(8014),s=t(7561),u=t(3111),l=t(7843),c=function(f){function h(d,v){var g=f.call(this)||this;return g.source=d,g.subjectFactory=v,g._subject=null,g._refCount=0,g._connection=null,l.hasLift(d)&&(g.lift=d.lift),g}return i(h,f),h.prototype._subscribe=function(d){return this.getSubject().subscribe(d)},h.prototype.getSubject=function(){var d=this._subject;return d&&!d.isStopped||(this._subject=this.subjectFactory()),this._subject},h.prototype._teardown=function(){this._refCount=0;var d=this._connection;this._subject=this._connection=null,d==null||d.unsubscribe()},h.prototype.connect=function(){var d=this,v=this._connection;if(!v){v=this._connection=new a.Subscription;var g=this.getSubject();v.add(this.source.subscribe(u.createOperatorSubscriber(g,void 0,function(){d._teardown(),g.complete()},function(_){d._teardown(),g.error(_)},function(){return d._teardown()}))),v.closed&&(this._connection=null,v=a.Subscription.EMPTY)}return v},h.prototype.refCount=function(){return s.refCount()(this)},h}(o.Observable);e.ConnectableObservable=c},2713:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.bindCallback=void 0;var n=t(1439);e.bindCallback=function(i,o,a){return n.bindCallbackInternals(!1,i,o,a)}},1439:function(r,e,t){var n=this&&this.__read||function(f,h){var d=typeof Symbol=="function"&&f[Symbol.iterator];if(!d)return f;var v,g,_=d.call(f),y=[];try{for(;(h===void 0||h-- >0)&&!(v=_.next()).done;)y.push(v.value)}catch(p){g={error:p}}finally{try{v&&!v.done&&(d=_.return)&&d.call(_)}finally{if(g)throw g.error}}return y},i=this&&this.__spreadArray||function(f,h){for(var d=0,v=h.length,g=f.length;d<v;d++,g++)f[g]=h[d];return f};Object.defineProperty(e,"__esModule",{value:!0}),e.bindCallbackInternals=void 0;var o=t(8613),a=t(4662),s=t(8960),u=t(1251),l=t(5184),c=t(95);e.bindCallbackInternals=function f(h,d,v,g){if(v){if(!o.isScheduler(v))return function(){for(var _=[],y=0;y<arguments.length;y++)_[y]=arguments[y];return f(h,d,g).apply(this,_).pipe(u.mapOneOrManyArgs(v))};g=v}return g?function(){for(var _=[],y=0;y<arguments.length;y++)_[y]=arguments[y];return f(h,d).apply(this,_).pipe(s.subscribeOn(g),l.observeOn(g))}:function(){for(var _=this,y=[],p=0;p<arguments.length;p++)y[p]=arguments[p];var m=new c.AsyncSubject,E=!0;return new a.Observable(function(C){var P=m.subscribe(C);if(E){E=!1;var T=!1,R=!1;d.apply(_,i(i([],n(y)),[function(){for(var D=[],L=0;L<arguments.length;L++)D[L]=arguments[L];if(h){var j=D.shift();if(j!=null)return void m.error(j)}m.next(1<D.length?D:D[0]),R=!0,T&&m.complete()}])),R&&m.complete(),T=!0}return P})}}},8561:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.bindNodeCallback=void 0;var n=t(1439);e.bindNodeCallback=function(i,o,a){return n.bindCallbackInternals(!0,i,o,a)}},3247:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.combineLatestInit=e.combineLatest=void 0;var n=t(4662),i=t(7360),o=t(4917),a=t(6640),s=t(1251),u=t(1107),l=t(6013),c=t(3111),f=t(7110);function h(v,g,_){return _===void 0&&(_=a.identity),function(y){d(g,function(){for(var p=v.length,m=new Array(p),E=p,C=p,P=function(R){d(g,function(){var D=o.from(v[R],g),L=!1;D.subscribe(c.createOperatorSubscriber(y,function(j){m[R]=j,L||(L=!0,C--),C||y.next(_(m.slice()))},function(){--E||y.complete()}))},y)},T=0;T<p;T++)P(T)},y)}}function d(v,g,_){v?f.executeSchedule(_,v,g):g()}e.combineLatest=function(){for(var v=[],g=0;g<arguments.length;g++)v[g]=arguments[g];var _=u.popScheduler(v),y=u.popResultSelector(v),p=i.argsArgArrayOrObject(v),m=p.args,E=p.keys;if(m.length===0)return o.from([],_);var C=new n.Observable(h(m,_,E?function(P){return l.createObject(E,P)}:a.identity));return y?C.pipe(s.mapOneOrManyArgs(y)):C},e.combineLatestInit=h},3865:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.concat=void 0;var n=t(8158),i=t(1107),o=t(4917);e.concat=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return n.concatAll()(o.from(a,i.popScheduler(a)))}},7579:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.connectable=void 0;var n=t(2483),i=t(4662),o=t(9353),a={connector:function(){return new n.Subject},resetOnDisconnect:!0};e.connectable=function(s,u){u===void 0&&(u=a);var l=null,c=u.connector,f=u.resetOnDisconnect,h=f===void 0||f,d=c(),v=new i.Observable(function(g){return d.subscribe(g)});return v.connect=function(){return l&&!l.closed||(l=o.defer(function(){return s}).subscribe(d),h&&l.add(function(){return d=c()})),l},v}},9353:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.defer=void 0;var n=t(4662),i=t(9445);e.defer=function(o){return new n.Observable(function(a){i.innerFrom(o()).subscribe(a)})}},3110:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrames=void 0;var n=t(4662),i=t(4746),o=t(9507);function a(u){return new n.Observable(function(l){var c=u||i.performanceTimestampProvider,f=c.now(),h=0,d=function(){l.closed||(h=o.animationFrameProvider.requestAnimationFrame(function(v){h=0;var g=c.now();l.next({timestamp:u?g:v,elapsed:g-f}),d()}))};return d(),function(){h&&o.animationFrameProvider.cancelAnimationFrame(h)}})}e.animationFrames=function(u){return u?a(u):s};var s=a()},8616:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.empty=e.EMPTY=void 0;var n=t(4662);e.EMPTY=new n.Observable(function(i){return i.complete()}),e.empty=function(i){return i?function(o){return new n.Observable(function(a){return o.schedule(function(){return a.complete()})})}(i):e.EMPTY}},9105:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.forkJoin=void 0;var n=t(4662),i=t(7360),o=t(9445),a=t(1107),s=t(3111),u=t(1251),l=t(6013);e.forkJoin=function(){for(var c=[],f=0;f<arguments.length;f++)c[f]=arguments[f];var h=a.popResultSelector(c),d=i.argsArgArrayOrObject(c),v=d.args,g=d.keys,_=new n.Observable(function(y){var p=v.length;if(p)for(var m=new Array(p),E=p,C=p,P=function(R){var D=!1;o.innerFrom(v[R]).subscribe(s.createOperatorSubscriber(y,function(L){D||(D=!0,C--),m[R]=L},function(){return E--},void 0,function(){E&&D||(C||y.next(g?l.createObject(g,m):m),y.complete())}))},T=0;T<p;T++)P(T);else y.complete()});return h?_.pipe(u.mapOneOrManyArgs(h)):_}},4917:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.from=void 0;var n=t(1656),i=t(9445);e.from=function(o,a){return a?n.scheduled(o,a):i.innerFrom(o)}},5337:function(r,e,t){var n=this&&this.__read||function(v,g){var _=typeof Symbol=="function"&&v[Symbol.iterator];if(!_)return v;var y,p,m=_.call(v),E=[];try{for(;(g===void 0||g-- >0)&&!(y=m.next()).done;)E.push(y.value)}catch(C){p={error:C}}finally{try{y&&!y.done&&(_=m.return)&&_.call(m)}finally{if(p)throw p.error}}return E};Object.defineProperty(e,"__esModule",{value:!0}),e.fromEvent=void 0;var i=t(9445),o=t(4662),a=t(983),s=t(8046),u=t(1018),l=t(1251),c=["addListener","removeListener"],f=["addEventListener","removeEventListener"],h=["on","off"];function d(v,g){return function(_){return function(y){return v[_](g,y)}}}e.fromEvent=function v(g,_,y,p){if(u.isFunction(y)&&(p=y,y=void 0),p)return v(g,_,y).pipe(l.mapOneOrManyArgs(p));var m=n(function(P){return u.isFunction(P.addEventListener)&&u.isFunction(P.removeEventListener)}(g)?f.map(function(P){return function(T){return g[P](_,T,y)}}):function(P){return u.isFunction(P.addListener)&&u.isFunction(P.removeListener)}(g)?c.map(d(g,_)):function(P){return u.isFunction(P.on)&&u.isFunction(P.off)}(g)?h.map(d(g,_)):[],2),E=m[0],C=m[1];if(!E&&s.isArrayLike(g))return a.mergeMap(function(P){return v(P,_,y)})(i.innerFrom(g));if(!E)throw new TypeError("Invalid event target");return new o.Observable(function(P){var T=function(){for(var R=[],D=0;D<arguments.length;D++)R[D]=arguments[D];return P.next(1<R.length?R:R[0])};return E(T),function(){return C(T)}})}},347:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fromEventPattern=void 0;var n=t(4662),i=t(1018),o=t(1251);e.fromEventPattern=function a(s,u,l){return l?a(s,u).pipe(o.mapOneOrManyArgs(l)):new n.Observable(function(c){var f=function(){for(var d=[],v=0;v<arguments.length;v++)d[v]=arguments[v];return c.next(d.length===1?d[0]:d)},h=s(f);return i.isFunction(u)?function(){return u(f,h)}:void 0})}},6824:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fromSubscribable=void 0;var n=t(4662);e.fromSubscribable=function(i){return new n.Observable(function(o){return i.subscribe(o)})}},7610:function(r,e,t){var n=this&&this.__generator||function(u,l){var c,f,h,d,v={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return d={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function g(_){return function(y){return function(p){if(c)throw new TypeError("Generator is already executing.");for(;v;)try{if(c=1,f&&(h=2&p[0]?f.return:p[0]?f.throw||((h=f.return)&&h.call(f),0):f.next)&&!(h=h.call(f,p[1])).done)return h;switch(f=0,h&&(p=[2&p[0],h.value]),p[0]){case 0:case 1:h=p;break;case 4:return v.label++,{value:p[1],done:!1};case 5:v.label++,f=p[1],p=[0];continue;case 7:p=v.ops.pop(),v.trys.pop();continue;default:if(!((h=(h=v.trys).length>0&&h[h.length-1])||p[0]!==6&&p[0]!==2)){v=0;continue}if(p[0]===3&&(!h||p[1]>h[0]&&p[1]<h[3])){v.label=p[1];break}if(p[0]===6&&v.label<h[1]){v.label=h[1],h=p;break}if(h&&v.label<h[2]){v.label=h[2],v.ops.push(p);break}h[2]&&v.ops.pop(),v.trys.pop();continue}p=l.call(u,v)}catch(m){p=[6,m],f=0}finally{c=h=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}([_,y])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.generate=void 0;var i=t(6640),o=t(8613),a=t(9353),s=t(8808);e.generate=function(u,l,c,f,h){var d,v,g,_;function y(){var p;return n(this,function(m){switch(m.label){case 0:p=_,m.label=1;case 1:return l&&!l(p)?[3,4]:[4,g(p)];case 2:m.sent(),m.label=3;case 3:return p=c(p),[3,1];case 4:return[2]}})}return arguments.length===1?(_=(d=u).initialState,l=d.condition,c=d.iterate,v=d.resultSelector,g=v===void 0?i.identity:v,h=d.scheduler):(_=u,!f||o.isScheduler(f)?(g=i.identity,h=f):g=f),a.defer(h?function(){return s.scheduleIterable(y(),h)}:y)}},4209:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.iif=void 0;var n=t(9353);e.iif=function(i,o,a){return n.defer(function(){return i()?o:a})}},9445:function(r,e,t){var n=this&&this.__awaiter||function(R,D,L,j){return new(L||(L=Promise))(function(F,q){function W(re){try{Q(j.next(re))}catch(ee){q(ee)}}function Z(re){try{Q(j.throw(re))}catch(ee){q(ee)}}function Q(re){var ee;re.done?F(re.value):(ee=re.value,ee instanceof L?ee:new L(function(ue){ue(ee)})).then(W,Z)}Q((j=j.apply(R,D||[])).next())})},i=this&&this.__generator||function(R,D){var L,j,F,q,W={label:0,sent:function(){if(1&F[0])throw F[1];return F[1]},trys:[],ops:[]};return q={next:Z(0),throw:Z(1),return:Z(2)},typeof Symbol=="function"&&(q[Symbol.iterator]=function(){return this}),q;function Z(Q){return function(re){return function(ee){if(L)throw new TypeError("Generator is already executing.");for(;W;)try{if(L=1,j&&(F=2&ee[0]?j.return:ee[0]?j.throw||((F=j.return)&&F.call(j),0):j.next)&&!(F=F.call(j,ee[1])).done)return F;switch(j=0,F&&(ee=[2&ee[0],F.value]),ee[0]){case 0:case 1:F=ee;break;case 4:return W.label++,{value:ee[1],done:!1};case 5:W.label++,j=ee[1],ee=[0];continue;case 7:ee=W.ops.pop(),W.trys.pop();continue;default:if(!((F=(F=W.trys).length>0&&F[F.length-1])||ee[0]!==6&&ee[0]!==2)){W=0;continue}if(ee[0]===3&&(!F||ee[1]>F[0]&&ee[1]<F[3])){W.label=ee[1];break}if(ee[0]===6&&W.label<F[1]){W.label=F[1],F=ee;break}if(F&&W.label<F[2]){W.label=F[2],W.ops.push(ee);break}F[2]&&W.ops.pop(),W.trys.pop();continue}ee=D.call(R,W)}catch(ue){ee=[6,ue],j=0}finally{L=F=0}if(5&ee[0])throw ee[1];return{value:ee[0]?ee[1]:void 0,done:!0}}([Q,re])}}},o=this&&this.__asyncValues||function(R){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var D,L=R[Symbol.asyncIterator];return L?L.call(R):(R=typeof a=="function"?a(R):R[Symbol.iterator](),D={},j("next"),j("throw"),j("return"),D[Symbol.asyncIterator]=function(){return this},D);function j(F){D[F]=R[F]&&function(q){return new Promise(function(W,Z){(function(Q,re,ee,ue){Promise.resolve(ue).then(function(de){Q({value:de,done:ee})},re)})(W,Z,(q=R[F](q)).done,q.value)})}}},a=this&&this.__values||function(R){var D=typeof Symbol=="function"&&Symbol.iterator,L=D&&R[D],j=0;if(L)return L.call(R);if(R&&typeof R.length=="number")return{next:function(){return R&&j>=R.length&&(R=void 0),{value:R&&R[j++],done:!R}}};throw new TypeError(D?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.fromReadableStreamLike=e.fromAsyncIterable=e.fromIterable=e.fromPromise=e.fromArrayLike=e.fromInteropObservable=e.innerFrom=void 0;var s=t(8046),u=t(7629),l=t(4662),c=t(1116),f=t(1358),h=t(7614),d=t(6368),v=t(9137),g=t(1018),_=t(7315),y=t(3327);function p(R){return new l.Observable(function(D){var L=R[y.observable]();if(g.isFunction(L.subscribe))return L.subscribe(D);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function m(R){return new l.Observable(function(D){for(var L=0;L<R.length&&!D.closed;L++)D.next(R[L]);D.complete()})}function E(R){return new l.Observable(function(D){R.then(function(L){D.closed||(D.next(L),D.complete())},function(L){return D.error(L)}).then(null,_.reportUnhandledError)})}function C(R){return new l.Observable(function(D){var L,j;try{for(var F=a(R),q=F.next();!q.done;q=F.next()){var W=q.value;if(D.next(W),D.closed)return}}catch(Z){L={error:Z}}finally{try{q&&!q.done&&(j=F.return)&&j.call(F)}finally{if(L)throw L.error}}D.complete()})}function P(R){return new l.Observable(function(D){(function(L,j){var F,q,W,Z;return n(this,void 0,void 0,function(){var Q,re;return i(this,function(ee){switch(ee.label){case 0:ee.trys.push([0,5,6,11]),F=o(L),ee.label=1;case 1:return[4,F.next()];case 2:if((q=ee.sent()).done)return[3,4];if(Q=q.value,j.next(Q),j.closed)return[2];ee.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return re=ee.sent(),W={error:re},[3,11];case 6:return ee.trys.push([6,,9,10]),q&&!q.done&&(Z=F.return)?[4,Z.call(F)]:[3,8];case 7:ee.sent(),ee.label=8;case 8:return[3,10];case 9:if(W)throw W.error;return[7];case 10:return[7];case 11:return j.complete(),[2]}})})})(R,D).catch(function(L){return D.error(L)})})}function T(R){return P(v.readableStreamLikeToAsyncGenerator(R))}e.innerFrom=function(R){if(R instanceof l.Observable)return R;if(R!=null){if(c.isInteropObservable(R))return p(R);if(s.isArrayLike(R))return m(R);if(u.isPromise(R))return E(R);if(f.isAsyncIterable(R))return P(R);if(d.isIterable(R))return C(R);if(v.isReadableStreamLike(R))return T(R)}throw h.createInvalidObservableTypeError(R)},e.fromInteropObservable=p,e.fromArrayLike=m,e.fromPromise=E,e.fromIterable=C,e.fromAsyncIterable=P,e.fromReadableStreamLike=T},6472:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.interval=void 0;var n=t(7961),i=t(4092);e.interval=function(o,a){return o===void 0&&(o=0),a===void 0&&(a=n.asyncScheduler),o<0&&(o=0),i.timer(o,o,a)}},2833:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.merge=void 0;var n=t(7302),i=t(9445),o=t(8616),a=t(1107),s=t(4917);e.merge=function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];var c=a.popScheduler(u),f=a.popNumber(u,1/0),h=u;return h.length?h.length===1?i.innerFrom(h[0]):n.mergeAll(f)(s.from(h,c)):o.EMPTY}},8655:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.never=e.NEVER=void 0;var n=t(4662),i=t(1342);e.NEVER=new n.Observable(i.noop),e.never=function(){return e.NEVER}},1004:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.of=void 0;var n=t(1107),i=t(4917);e.of=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var s=n.popScheduler(o);return i.from(o,s)}},6102:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.onErrorResumeNext=void 0;var n=t(4662),i=t(8535),o=t(3111),a=t(1342),s=t(9445);e.onErrorResumeNext=function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];var c=i.argsOrArgArray(u);return new n.Observable(function(f){var h=0,d=function(){if(h<c.length){var v=void 0;try{v=s.innerFrom(c[h++])}catch{return void d()}var g=new o.OperatorSubscriber(f,void 0,a.noop,a.noop);v.subscribe(g),g.add(d)}else f.complete()};d()})}},7740:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.pairs=void 0;var n=t(4917);e.pairs=function(i,o){return n.from(Object.entries(i),o)}},1699:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.partition=void 0;var n=t(245),i=t(783),o=t(9445);e.partition=function(a,s,u){return[i.filter(s,u)(o.innerFrom(a)),i.filter(n.not(s,u))(o.innerFrom(a))]}},5584:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.raceInit=e.race=void 0;var n=t(4662),i=t(9445),o=t(8535),a=t(3111);function s(u){return function(l){for(var c=[],f=function(d){c.push(i.innerFrom(u[d]).subscribe(a.createOperatorSubscriber(l,function(v){if(c){for(var g=0;g<c.length;g++)g!==d&&c[g].unsubscribe();c=null}l.next(v)})))},h=0;c&&!l.closed&&h<u.length;h++)f(h)}}e.race=function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];return(u=o.argsOrArgArray(u)).length===1?i.innerFrom(u[0]):new n.Observable(s(u))},e.raceInit=s},9376:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.range=void 0;var n=t(4662),i=t(8616);e.range=function(o,a,s){if(a==null&&(a=o,o=0),a<=0)return i.EMPTY;var u=a+o;return new n.Observable(s?function(l){var c=o;return s.schedule(function(){c<u?(l.next(c++),this.schedule()):l.complete()})}:function(l){for(var c=o;c<u&&!l.closed;)l.next(c++);l.complete()})}},1103:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.throwError=void 0;var n=t(4662),i=t(1018);e.throwError=function(o,a){var s=i.isFunction(o)?o:function(){return o},u=function(l){return l.error(s())};return new n.Observable(a?function(l){return a.schedule(u,0,l)}:u)}},4092:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.timer=void 0;var n=t(4662),i=t(7961),o=t(8613),a=t(1074);e.timer=function(s,u,l){s===void 0&&(s=0),l===void 0&&(l=i.async);var c=-1;return u!=null&&(o.isScheduler(u)?l=u:c=u),new n.Observable(function(f){var h=a.isValidDate(s)?+s-l.now():s;h<0&&(h=0);var d=0;return l.schedule(function(){f.closed||(f.next(d++),0<=c?this.schedule(void 0,c):f.complete())},h)})}},7853:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.using=void 0;var n=t(4662),i=t(9445),o=t(8616);e.using=function(a,s){return new n.Observable(function(u){var l=a(),c=s(l);return(c?i.innerFrom(c):o.EMPTY).subscribe(u),function(){l&&l.unsubscribe()}})}},7286:function(r,e,t){var n=this&&this.__read||function(f,h){var d=typeof Symbol=="function"&&f[Symbol.iterator];if(!d)return f;var v,g,_=d.call(f),y=[];try{for(;(h===void 0||h-- >0)&&!(v=_.next()).done;)y.push(v.value)}catch(p){g={error:p}}finally{try{v&&!v.done&&(d=_.return)&&d.call(_)}finally{if(g)throw g.error}}return y},i=this&&this.__spreadArray||function(f,h){for(var d=0,v=h.length,g=f.length;d<v;d++,g++)f[g]=h[d];return f};Object.defineProperty(e,"__esModule",{value:!0}),e.zip=void 0;var o=t(4662),a=t(9445),s=t(8535),u=t(8616),l=t(3111),c=t(1107);e.zip=function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];var d=c.popResultSelector(f),v=s.argsOrArgArray(f);return v.length?new o.Observable(function(g){var _=v.map(function(){return[]}),y=v.map(function(){return!1});g.add(function(){_=y=null});for(var p=function(E){a.innerFrom(v[E]).subscribe(l.createOperatorSubscriber(g,function(C){if(_[E].push(C),_.every(function(T){return T.length})){var P=_.map(function(T){return T.shift()});g.next(d?d.apply(void 0,i([],n(P))):P),_.some(function(T,R){return!T.length&&y[R]})&&g.complete()}},function(){y[E]=!0,!_[E].length&&g.complete()}))},m=0;!g.closed&&m<v.length;m++)p(m);return function(){_=y=null}}):u.EMPTY}},3111:function(r,e,t){var n,i=this&&this.__extends||(n=function(s,u){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(l[f]=c[f])},n(s,u)},function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function l(){this.constructor=s}n(s,u),s.prototype=u===null?Object.create(u):(l.prototype=u.prototype,new l)});Object.defineProperty(e,"__esModule",{value:!0}),e.OperatorSubscriber=e.createOperatorSubscriber=void 0;var o=t(5);e.createOperatorSubscriber=function(s,u,l,c,f){return new a(s,u,l,c,f)};var a=function(s){function u(l,c,f,h,d,v){var g=s.call(this,l)||this;return g.onFinalize=d,g.shouldUnsubscribe=v,g._next=c?function(_){try{c(_)}catch(y){l.error(y)}}:s.prototype._next,g._error=h?function(_){try{h(_)}catch(y){l.error(y)}finally{this.unsubscribe()}}:s.prototype._error,g._complete=f?function(){try{f()}catch(_){l.error(_)}finally{this.unsubscribe()}}:s.prototype._complete,g}return i(u,s),u.prototype.unsubscribe=function(){var l;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var c=this.closed;s.prototype.unsubscribe.call(this),!c&&((l=this.onFinalize)===null||l===void 0||l.call(this))}},u}(o.Subscriber);e.OperatorSubscriber=a},3146:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.audit=void 0;var n=t(7843),i=t(9445),o=t(3111);e.audit=function(a){return n.operate(function(s,u){var l=!1,c=null,f=null,h=!1,d=function(){if(f==null||f.unsubscribe(),f=null,l){l=!1;var g=c;c=null,u.next(g)}h&&u.complete()},v=function(){f=null,h&&u.complete()};s.subscribe(o.createOperatorSubscriber(u,function(g){l=!0,c=g,f||i.innerFrom(a(g)).subscribe(f=o.createOperatorSubscriber(u,d,v))},function(){h=!0,(!l||!f||f.closed)&&u.complete()}))})}},3231:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.auditTime=void 0;var n=t(7961),i=t(3146),o=t(4092);e.auditTime=function(a,s){return s===void 0&&(s=n.asyncScheduler),i.audit(function(){return o.timer(a,s)})}},8015:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.buffer=void 0;var n=t(7843),i=t(1342),o=t(3111),a=t(9445);e.buffer=function(s){return n.operate(function(u,l){var c=[];return u.subscribe(o.createOperatorSubscriber(l,function(f){return c.push(f)},function(){l.next(c),l.complete()})),a.innerFrom(s).subscribe(o.createOperatorSubscriber(l,function(){var f=c;c=[],l.next(f)},i.noop)),function(){c=null}})}},5572:function(r,e,t){var n=this&&this.__values||function(s){var u=typeof Symbol=="function"&&Symbol.iterator,l=u&&s[u],c=0;if(l)return l.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&c>=s.length&&(s=void 0),{value:s&&s[c++],done:!s}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.bufferCount=void 0;var i=t(7843),o=t(3111),a=t(7479);e.bufferCount=function(s,u){return u===void 0&&(u=null),u=u??s,i.operate(function(l,c){var f=[],h=0;l.subscribe(o.createOperatorSubscriber(c,function(d){var v,g,_,y,p=null;h++%u==0&&f.push([]);try{for(var m=n(f),E=m.next();!E.done;E=m.next())(T=E.value).push(d),s<=T.length&&(p=p??[]).push(T)}catch(R){v={error:R}}finally{try{E&&!E.done&&(g=m.return)&&g.call(m)}finally{if(v)throw v.error}}if(p)try{for(var C=n(p),P=C.next();!P.done;P=C.next()){var T=P.value;a.arrRemove(f,T),c.next(T)}}catch(R){_={error:R}}finally{try{P&&!P.done&&(y=C.return)&&y.call(C)}finally{if(_)throw _.error}}},function(){var d,v;try{for(var g=n(f),_=g.next();!_.done;_=g.next()){var y=_.value;c.next(y)}}catch(p){d={error:p}}finally{try{_&&!_.done&&(v=g.return)&&v.call(g)}finally{if(d)throw d.error}}c.complete()},void 0,function(){f=null}))})}},7210:function(r,e,t){var n=this&&this.__values||function(f){var h=typeof Symbol=="function"&&Symbol.iterator,d=h&&f[h],v=0;if(d)return d.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&v>=f.length&&(f=void 0),{value:f&&f[v++],done:!f}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.bufferTime=void 0;var i=t(8014),o=t(7843),a=t(3111),s=t(7479),u=t(7961),l=t(1107),c=t(7110);e.bufferTime=function(f){for(var h,d,v=[],g=1;g<arguments.length;g++)v[g-1]=arguments[g];var _=(h=l.popScheduler(v))!==null&&h!==void 0?h:u.asyncScheduler,y=(d=v[0])!==null&&d!==void 0?d:null,p=v[1]||1/0;return o.operate(function(m,E){var C=[],P=!1,T=function(L){var j=L.buffer;L.subs.unsubscribe(),s.arrRemove(C,L),E.next(j),P&&R()},R=function(){if(C){var L=new i.Subscription;E.add(L);var j={buffer:[],subs:L};C.push(j),c.executeSchedule(L,_,function(){return T(j)},f)}};y!==null&&y>=0?c.executeSchedule(E,_,R,y,!0):P=!0,R();var D=a.createOperatorSubscriber(E,function(L){var j,F,q=C.slice();try{for(var W=n(q),Z=W.next();!Z.done;Z=W.next()){var Q=Z.value,re=Q.buffer;re.push(L),p<=re.length&&T(Q)}}catch(ee){j={error:ee}}finally{try{Z&&!Z.done&&(F=W.return)&&F.call(W)}finally{if(j)throw j.error}}},function(){for(;C!=null&&C.length;)E.next(C.shift().buffer);D==null||D.unsubscribe(),E.complete(),E.unsubscribe()},void 0,function(){return C=null});m.subscribe(D)})}},8995:function(r,e,t){var n=this&&this.__values||function(c){var f=typeof Symbol=="function"&&Symbol.iterator,h=f&&c[f],d=0;if(h)return h.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&d>=c.length&&(c=void 0),{value:c&&c[d++],done:!c}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.bufferToggle=void 0;var i=t(8014),o=t(7843),a=t(9445),s=t(3111),u=t(1342),l=t(7479);e.bufferToggle=function(c,f){return o.operate(function(h,d){var v=[];a.innerFrom(c).subscribe(s.createOperatorSubscriber(d,function(g){var _=[];v.push(_);var y=new i.Subscription;y.add(a.innerFrom(f(g)).subscribe(s.createOperatorSubscriber(d,function(){l.arrRemove(v,_),d.next(_),y.unsubscribe()},u.noop)))},u.noop)),h.subscribe(s.createOperatorSubscriber(d,function(g){var _,y;try{for(var p=n(v),m=p.next();!m.done;m=p.next())m.value.push(g)}catch(E){_={error:E}}finally{try{m&&!m.done&&(y=p.return)&&y.call(p)}finally{if(_)throw _.error}}},function(){for(;v.length>0;)d.next(v.shift());d.complete()}))})}},8831:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.bufferWhen=void 0;var n=t(7843),i=t(1342),o=t(3111),a=t(9445);e.bufferWhen=function(s){return n.operate(function(u,l){var c=null,f=null,h=function(){f==null||f.unsubscribe();var d=c;c=[],d&&l.next(d),a.innerFrom(s()).subscribe(f=o.createOperatorSubscriber(l,h,i.noop))};h(),u.subscribe(o.createOperatorSubscriber(l,function(d){return c==null?void 0:c.push(d)},function(){c&&l.next(c),l.complete()},void 0,function(){return c=f=null}))})}},8118:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.catchError=void 0;var n=t(9445),i=t(3111),o=t(7843);e.catchError=function a(s){return o.operate(function(u,l){var c,f=null,h=!1;f=u.subscribe(i.createOperatorSubscriber(l,void 0,void 0,function(d){c=n.innerFrom(s(d,a(s)(u))),f?(f.unsubscribe(),f=null,c.subscribe(l)):h=!0})),h&&(f.unsubscribe(),f=null,c.subscribe(l))})}},6625:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.combineAll=void 0;var n=t(6728);e.combineAll=n.combineLatestAll},2551:function(r,e,t){var n=this&&this.__read||function(f,h){var d=typeof Symbol=="function"&&f[Symbol.iterator];if(!d)return f;var v,g,_=d.call(f),y=[];try{for(;(h===void 0||h-- >0)&&!(v=_.next()).done;)y.push(v.value)}catch(p){g={error:p}}finally{try{v&&!v.done&&(d=_.return)&&d.call(_)}finally{if(g)throw g.error}}return y},i=this&&this.__spreadArray||function(f,h){for(var d=0,v=h.length,g=f.length;d<v;d++,g++)f[g]=h[d];return f};Object.defineProperty(e,"__esModule",{value:!0}),e.combineLatest=void 0;var o=t(3247),a=t(7843),s=t(8535),u=t(1251),l=t(2706),c=t(1107);e.combineLatest=function f(){for(var h=[],d=0;d<arguments.length;d++)h[d]=arguments[d];var v=c.popResultSelector(h);return v?l.pipe(f.apply(void 0,i([],n(h))),u.mapOneOrManyArgs(v)):a.operate(function(g,_){o.combineLatestInit(i([g],n(s.argsOrArgArray(h))))(_)})}},6728:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.combineLatestAll=void 0;var n=t(3247),i=t(3638);e.combineLatestAll=function(o){return i.joinAllInternals(n.combineLatest,o)}},8239:function(r,e,t){var n=this&&this.__read||function(a,s){var u=typeof Symbol=="function"&&a[Symbol.iterator];if(!u)return a;var l,c,f=u.call(a),h=[];try{for(;(s===void 0||s-- >0)&&!(l=f.next()).done;)h.push(l.value)}catch(d){c={error:d}}finally{try{l&&!l.done&&(u=f.return)&&u.call(f)}finally{if(c)throw c.error}}return h},i=this&&this.__spreadArray||function(a,s){for(var u=0,l=s.length,c=a.length;u<l;u++,c++)a[c]=s[u];return a};Object.defineProperty(e,"__esModule",{value:!0}),e.combineLatestWith=void 0;var o=t(2551);e.combineLatestWith=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return o.combineLatest.apply(void 0,i([],n(a)))}},7601:function(r,e,t){var n=this&&this.__read||function(l,c){var f=typeof Symbol=="function"&&l[Symbol.iterator];if(!f)return l;var h,d,v=f.call(l),g=[];try{for(;(c===void 0||c-- >0)&&!(h=v.next()).done;)g.push(h.value)}catch(_){d={error:_}}finally{try{h&&!h.done&&(f=v.return)&&f.call(v)}finally{if(d)throw d.error}}return g},i=this&&this.__spreadArray||function(l,c){for(var f=0,h=c.length,d=l.length;f<h;f++,d++)l[d]=c[f];return l};Object.defineProperty(e,"__esModule",{value:!0}),e.concat=void 0;var o=t(7843),a=t(8158),s=t(1107),u=t(4917);e.concat=function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];var f=s.popScheduler(l);return o.operate(function(h,d){a.concatAll()(u.from(i([h],n(l)),f)).subscribe(d)})}},8158:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.concatAll=void 0;var n=t(7302);e.concatAll=function(){return n.mergeAll(1)}},9135:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.concatMap=void 0;var n=t(983),i=t(1018);e.concatMap=function(o,a){return i.isFunction(a)?n.mergeMap(o,a,1):n.mergeMap(o,1)}},9938:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.concatMapTo=void 0;var n=t(9135),i=t(1018);e.concatMapTo=function(o,a){return i.isFunction(a)?n.concatMap(function(){return o},a):n.concatMap(function(){return o})}},9669:function(r,e,t){var n=this&&this.__read||function(a,s){var u=typeof Symbol=="function"&&a[Symbol.iterator];if(!u)return a;var l,c,f=u.call(a),h=[];try{for(;(s===void 0||s-- >0)&&!(l=f.next()).done;)h.push(l.value)}catch(d){c={error:d}}finally{try{l&&!l.done&&(u=f.return)&&u.call(f)}finally{if(c)throw c.error}}return h},i=this&&this.__spreadArray||function(a,s){for(var u=0,l=s.length,c=a.length;u<l;u++,c++)a[c]=s[u];return a};Object.defineProperty(e,"__esModule",{value:!0}),e.concatWith=void 0;var o=t(7601);e.concatWith=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return o.concat.apply(void 0,i([],n(a)))}},1483:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.connect=void 0;var n=t(2483),i=t(9445),o=t(7843),a=t(6824),s={connector:function(){return new n.Subject}};e.connect=function(u,l){l===void 0&&(l=s);var c=l.connector;return o.operate(function(f,h){var d=c();i.innerFrom(u(a.fromSubscribable(d))).subscribe(h),h.add(f.subscribe(d))})}},1038:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.count=void 0;var n=t(9139);e.count=function(i){return n.reduce(function(o,a,s){return!i||i(a,s)?o+1:o},0)}},4461:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.debounce=void 0;var n=t(7843),i=t(1342),o=t(3111),a=t(9445);e.debounce=function(s){return n.operate(function(u,l){var c=!1,f=null,h=null,d=function(){if(h==null||h.unsubscribe(),h=null,c){c=!1;var v=f;f=null,l.next(v)}};u.subscribe(o.createOperatorSubscriber(l,function(v){h==null||h.unsubscribe(),c=!0,f=v,h=o.createOperatorSubscriber(l,d,i.noop),a.innerFrom(s(v)).subscribe(h)},function(){d(),l.complete()},void 0,function(){f=h=null}))})}},8079:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.debounceTime=void 0;var n=t(7961),i=t(7843),o=t(3111);e.debounceTime=function(a,s){return s===void 0&&(s=n.asyncScheduler),i.operate(function(u,l){var c=null,f=null,h=null,d=function(){if(c){c.unsubscribe(),c=null;var g=f;f=null,l.next(g)}};function v(){var g=h+a,_=s.now();if(_<g)return c=this.schedule(void 0,g-_),void l.add(c);d()}u.subscribe(o.createOperatorSubscriber(l,function(g){f=g,h=s.now(),c||(c=s.schedule(v,a),l.add(c))},function(){d(),l.complete()},void 0,function(){f=c=null}))})}},378:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.defaultIfEmpty=void 0;var n=t(7843),i=t(3111);e.defaultIfEmpty=function(o){return n.operate(function(a,s){var u=!1;a.subscribe(i.createOperatorSubscriber(s,function(l){u=!0,s.next(l)},function(){u||s.next(o),s.complete()}))})}},914:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.delay=void 0;var n=t(7961),i=t(8766),o=t(4092);e.delay=function(a,s){s===void 0&&(s=n.asyncScheduler);var u=o.timer(a,s);return i.delayWhen(function(){return u})}},8766:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.delayWhen=void 0;var n=t(3865),i=t(846),o=t(490),a=t(3218),s=t(983),u=t(9445);e.delayWhen=function l(c,f){return f?function(h){return n.concat(f.pipe(i.take(1),o.ignoreElements()),h.pipe(l(c)))}:s.mergeMap(function(h,d){return u.innerFrom(c(h,d)).pipe(i.take(1),a.mapTo(h))})}},7441:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.dematerialize=void 0;var n=t(7800),i=t(7843),o=t(3111);e.dematerialize=function(){return i.operate(function(a,s){a.subscribe(o.createOperatorSubscriber(s,function(u){return n.observeNotification(u,s)}))})}},5365:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.distinct=void 0;var n=t(7843),i=t(3111),o=t(1342),a=t(9445);e.distinct=function(s,u){return n.operate(function(l,c){var f=new Set;l.subscribe(i.createOperatorSubscriber(c,function(h){var d=s?s(h):h;f.has(d)||(f.add(d),c.next(h))})),u&&a.innerFrom(u).subscribe(i.createOperatorSubscriber(c,function(){return f.clear()},o.noop))})}},8937:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.distinctUntilChanged=void 0;var n=t(6640),i=t(7843),o=t(3111);function a(s,u){return s===u}e.distinctUntilChanged=function(s,u){return u===void 0&&(u=n.identity),s=s??a,i.operate(function(l,c){var f,h=!0;l.subscribe(o.createOperatorSubscriber(c,function(d){var v=u(d);!h&&s(f,v)||(h=!1,f=v,c.next(d))}))})}},9612:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.distinctUntilKeyChanged=void 0;var n=t(8937);e.distinctUntilKeyChanged=function(i,o){return n.distinctUntilChanged(function(a,s){return o?o(a[i],s[i]):a[i]===s[i]})}},4520:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.elementAt=void 0;var n=t(7057),i=t(783),o=t(4869),a=t(378),s=t(846);e.elementAt=function(u,l){if(u<0)throw new n.ArgumentOutOfRangeError;var c=arguments.length>=2;return function(f){return f.pipe(i.filter(function(h,d){return d===u}),s.take(1),c?a.defaultIfEmpty(l):o.throwIfEmpty(function(){return new n.ArgumentOutOfRangeError}))}}},1776:function(r,e,t){var n=this&&this.__read||function(s,u){var l=typeof Symbol=="function"&&s[Symbol.iterator];if(!l)return s;var c,f,h=l.call(s),d=[];try{for(;(u===void 0||u-- >0)&&!(c=h.next()).done;)d.push(c.value)}catch(v){f={error:v}}finally{try{c&&!c.done&&(l=h.return)&&l.call(h)}finally{if(f)throw f.error}}return d},i=this&&this.__spreadArray||function(s,u){for(var l=0,c=u.length,f=s.length;l<c;l++,f++)s[f]=u[l];return s};Object.defineProperty(e,"__esModule",{value:!0}),e.endWith=void 0;var o=t(3865),a=t(1004);e.endWith=function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];return function(l){return o.concat(l,a.of.apply(void 0,i([],n(s))))}}},5510:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.every=void 0;var n=t(7843),i=t(3111);e.every=function(o,a){return n.operate(function(s,u){var l=0;s.subscribe(i.createOperatorSubscriber(u,function(c){o.call(a,c,l++,s)||(u.next(!1),u.complete())},function(){u.next(!0),u.complete()}))})}},1551:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.exhaust=void 0;var n=t(2752);e.exhaust=n.exhaustAll},2752:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.exhaustAll=void 0;var n=t(4753),i=t(6640);e.exhaustAll=function(){return n.exhaustMap(i.identity)}},4753:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.exhaustMap=void 0;var n=t(5471),i=t(9445),o=t(7843),a=t(3111);e.exhaustMap=function s(u,l){return l?function(c){return c.pipe(s(function(f,h){return i.innerFrom(u(f,h)).pipe(n.map(function(d,v){return l(f,d,h,v)}))}))}:o.operate(function(c,f){var h=0,d=null,v=!1;c.subscribe(a.createOperatorSubscriber(f,function(g){d||(d=a.createOperatorSubscriber(f,void 0,function(){d=null,v&&f.complete()}),i.innerFrom(u(g,h++)).subscribe(d))},function(){v=!0,!d&&f.complete()}))})}},7661:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.expand=void 0;var n=t(7843),i=t(1983);e.expand=function(o,a,s){return a===void 0&&(a=1/0),a=(a||0)<1?1/0:a,n.operate(function(u,l){return i.mergeInternals(u,l,o,a,void 0,!0,s)})}},783:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.filter=void 0;var n=t(7843),i=t(3111);e.filter=function(o,a){return n.operate(function(s,u){var l=0;s.subscribe(i.createOperatorSubscriber(u,function(c){return o.call(a,c,l++)&&u.next(c)}))})}},3555:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.finalize=void 0;var n=t(7843);e.finalize=function(i){return n.operate(function(o,a){try{o.subscribe(a)}finally{a.add(i)}})}},7714:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createFind=e.find=void 0;var n=t(7843),i=t(3111);function o(a,s,u){var l=u==="index";return function(c,f){var h=0;c.subscribe(i.createOperatorSubscriber(f,function(d){var v=h++;a.call(s,d,v,c)&&(f.next(l?v:d),f.complete())},function(){f.next(l?-1:void 0),f.complete()}))}}e.find=function(a,s){return n.operate(o(a,s,"value"))},e.createFind=o},9756:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.findIndex=void 0;var n=t(7843),i=t(7714);e.findIndex=function(o,a){return n.operate(i.createFind(o,a,"index"))}},8275:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.first=void 0;var n=t(2823),i=t(783),o=t(846),a=t(378),s=t(4869),u=t(6640);e.first=function(l,c){var f=arguments.length>=2;return function(h){return h.pipe(l?i.filter(function(d,v){return l(d,v,h)}):u.identity,o.take(1),f?a.defaultIfEmpty(c):s.throwIfEmpty(function(){return new n.EmptyError}))}}},6902:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.flatMap=void 0;var n=t(983);e.flatMap=n.mergeMap},7815:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.groupBy=void 0;var n=t(4662),i=t(9445),o=t(2483),a=t(7843),s=t(3111);e.groupBy=function(u,l,c,f){return a.operate(function(h,d){var v;l&&typeof l!="function"?(c=l.duration,v=l.element,f=l.connector):v=l;var g=new Map,_=function(C){g.forEach(C),C(d)},y=function(C){return _(function(P){return P.error(C)})},p=0,m=!1,E=new s.OperatorSubscriber(d,function(C){try{var P=u(C),T=g.get(P);if(!T){g.set(P,T=f?f():new o.Subject);var R=(L=P,j=T,(F=new n.Observable(function(q){p++;var W=j.subscribe(q);return function(){W.unsubscribe(),--p==0&&m&&E.unsubscribe()}})).key=L,F);if(d.next(R),c){var D=s.createOperatorSubscriber(T,function(){T.complete(),D==null||D.unsubscribe()},void 0,void 0,function(){return g.delete(P)});E.add(i.innerFrom(c(R)).subscribe(D))}}T.next(v?v(C):C)}catch(q){y(q)}var L,j,F},function(){return _(function(C){return C.complete()})},y,function(){return g.clear()},function(){return m=!0,p===0});h.subscribe(E)})}},490:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ignoreElements=void 0;var n=t(7843),i=t(3111),o=t(1342);e.ignoreElements=function(){return n.operate(function(a,s){a.subscribe(i.createOperatorSubscriber(s,o.noop))})}},9356:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isEmpty=void 0;var n=t(7843),i=t(3111);e.isEmpty=function(){return n.operate(function(o,a){o.subscribe(i.createOperatorSubscriber(a,function(){a.next(!1),a.complete()},function(){a.next(!0),a.complete()}))})}},3638:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.joinAllInternals=void 0;var n=t(6640),i=t(1251),o=t(2706),a=t(983),s=t(2343);e.joinAllInternals=function(u,l){return o.pipe(s.toArray(),a.mergeMap(function(c){return u(c)}),l?i.mapOneOrManyArgs(l):n.identity)}},8669:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.last=void 0;var n=t(2823),i=t(783),o=t(8330),a=t(4869),s=t(378),u=t(6640);e.last=function(l,c){var f=arguments.length>=2;return function(h){return h.pipe(l?i.filter(function(d,v){return l(d,v,h)}):u.identity,o.takeLast(1),f?s.defaultIfEmpty(c):a.throwIfEmpty(function(){return new n.EmptyError}))}}},5471:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.map=void 0;var n=t(7843),i=t(3111);e.map=function(o,a){return n.operate(function(s,u){var l=0;s.subscribe(i.createOperatorSubscriber(u,function(c){u.next(o.call(a,c,l++))}))})}},3218:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mapTo=void 0;var n=t(5471);e.mapTo=function(i){return n.map(function(){return i})}},2360:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.materialize=void 0;var n=t(7800),i=t(7843),o=t(3111);e.materialize=function(){return i.operate(function(a,s){a.subscribe(o.createOperatorSubscriber(s,function(u){s.next(n.Notification.createNext(u))},function(){s.next(n.Notification.createComplete()),s.complete()},function(u){s.next(n.Notification.createError(u)),s.complete()}))})}},1415:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.max=void 0;var n=t(9139),i=t(1018);e.max=function(o){return n.reduce(i.isFunction(o)?function(a,s){return o(a,s)>0?a:s}:function(a,s){return a>s?a:s})}},361:function(r,e,t){var n=this&&this.__read||function(c,f){var h=typeof Symbol=="function"&&c[Symbol.iterator];if(!h)return c;var d,v,g=h.call(c),_=[];try{for(;(f===void 0||f-- >0)&&!(d=g.next()).done;)_.push(d.value)}catch(y){v={error:y}}finally{try{d&&!d.done&&(h=g.return)&&h.call(g)}finally{if(v)throw v.error}}return _},i=this&&this.__spreadArray||function(c,f){for(var h=0,d=f.length,v=c.length;h<d;h++,v++)c[v]=f[h];return c};Object.defineProperty(e,"__esModule",{value:!0}),e.merge=void 0;var o=t(7843),a=t(8535),s=t(7302),u=t(1107),l=t(4917);e.merge=function(){for(var c=[],f=0;f<arguments.length;f++)c[f]=arguments[f];var h=u.popScheduler(c),d=u.popNumber(c,1/0);return c=a.argsOrArgArray(c),o.operate(function(v,g){s.mergeAll(d)(l.from(i([v],n(c)),h)).subscribe(g)})}},7302:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mergeAll=void 0;var n=t(983),i=t(6640);e.mergeAll=function(o){return o===void 0&&(o=1/0),n.mergeMap(i.identity,o)}},1983:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mergeInternals=void 0;var n=t(9445),i=t(7110),o=t(3111);e.mergeInternals=function(a,s,u,l,c,f,h,d){var v=[],g=0,_=0,y=!1,p=function(){!y||v.length||g||s.complete()},m=function(C){return g<l?E(C):v.push(C)},E=function(C){f&&s.next(C),g++;var P=!1;n.innerFrom(u(C,_++)).subscribe(o.createOperatorSubscriber(s,function(T){c==null||c(T),f?m(T):s.next(T)},function(){P=!0},void 0,function(){if(P)try{g--;for(var T=function(){var R=v.shift();h?i.executeSchedule(s,h,function(){return E(R)}):E(R)};v.length&&g<l;)T();p()}catch(R){s.error(R)}}))};return a.subscribe(o.createOperatorSubscriber(s,m,function(){y=!0,p()})),function(){d==null||d()}}},983:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mergeMap=void 0;var n=t(5471),i=t(9445),o=t(7843),a=t(1983),s=t(1018);e.mergeMap=function u(l,c,f){return f===void 0&&(f=1/0),s.isFunction(c)?u(function(h,d){return n.map(function(v,g){return c(h,v,d,g)})(i.innerFrom(l(h,d)))},f):(typeof c=="number"&&(f=c),o.operate(function(h,d){return a.mergeInternals(h,d,l,f)}))}},6586:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mergeMapTo=void 0;var n=t(983),i=t(1018);e.mergeMapTo=function(o,a,s){return s===void 0&&(s=1/0),i.isFunction(a)?n.mergeMap(function(){return o},a,s):(typeof a=="number"&&(s=a),n.mergeMap(function(){return o},s))}},4408:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mergeScan=void 0;var n=t(7843),i=t(1983);e.mergeScan=function(o,a,s){return s===void 0&&(s=1/0),n.operate(function(u,l){var c=a;return i.mergeInternals(u,l,function(f,h){return o(c,f,h)},s,function(f){c=f},!1,void 0,function(){return c=null})})}},8253:function(r,e,t){var n=this&&this.__read||function(a,s){var u=typeof Symbol=="function"&&a[Symbol.iterator];if(!u)return a;var l,c,f=u.call(a),h=[];try{for(;(s===void 0||s-- >0)&&!(l=f.next()).done;)h.push(l.value)}catch(d){c={error:d}}finally{try{l&&!l.done&&(u=f.return)&&u.call(f)}finally{if(c)throw c.error}}return h},i=this&&this.__spreadArray||function(a,s){for(var u=0,l=s.length,c=a.length;u<l;u++,c++)a[c]=s[u];return a};Object.defineProperty(e,"__esModule",{value:!0}),e.mergeWith=void 0;var o=t(361);e.mergeWith=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return o.merge.apply(void 0,i([],n(a)))}},2669:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.min=void 0;var n=t(9139),i=t(1018);e.min=function(o){return n.reduce(i.isFunction(o)?function(a,s){return o(a,s)<0?a:s}:function(a,s){return a<s?a:s})}},9247:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.multicast=void 0;var n=t(8918),i=t(1018),o=t(1483);e.multicast=function(a,s){var u=i.isFunction(a)?a:function(){return a};return i.isFunction(s)?o.connect(s,{connector:u}):function(l){return new n.ConnectableObservable(l,u)}}},5184:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.observeOn=void 0;var n=t(7110),i=t(7843),o=t(3111);e.observeOn=function(a,s){return s===void 0&&(s=0),i.operate(function(u,l){u.subscribe(o.createOperatorSubscriber(l,function(c){return n.executeSchedule(l,a,function(){return l.next(c)},s)},function(){return n.executeSchedule(l,a,function(){return l.complete()},s)},function(c){return n.executeSchedule(l,a,function(){return l.error(c)},s)}))})}},1226:function(r,e,t){var n=this&&this.__read||function(u,l){var c=typeof Symbol=="function"&&u[Symbol.iterator];if(!c)return u;var f,h,d=c.call(u),v=[];try{for(;(l===void 0||l-- >0)&&!(f=d.next()).done;)v.push(f.value)}catch(g){h={error:g}}finally{try{f&&!f.done&&(c=d.return)&&c.call(d)}finally{if(h)throw h.error}}return v},i=this&&this.__spreadArray||function(u,l){for(var c=0,f=l.length,h=u.length;c<f;c++,h++)u[h]=l[c];return u};Object.defineProperty(e,"__esModule",{value:!0}),e.onErrorResumeNext=e.onErrorResumeNextWith=void 0;var o=t(8535),a=t(6102);function s(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];var c=o.argsOrArgArray(u);return function(f){return a.onErrorResumeNext.apply(void 0,i([f],n(c)))}}e.onErrorResumeNextWith=s,e.onErrorResumeNext=s},1518:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.pairwise=void 0;var n=t(7843),i=t(3111);e.pairwise=function(){return n.operate(function(o,a){var s,u=!1;o.subscribe(i.createOperatorSubscriber(a,function(l){var c=s;s=l,u&&a.next([c,l]),u=!0}))})}},2171:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.partition=void 0;var n=t(245),i=t(783);e.partition=function(o,a){return function(s){return[i.filter(o,a)(s),i.filter(n.not(o,a))(s)]}}},4912:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.pluck=void 0;var n=t(5471);e.pluck=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a=i.length;if(a===0)throw new Error("list of properties cannot be empty.");return n.map(function(s){for(var u=s,l=0;l<a;l++){var c=u==null?void 0:u[i[l]];if(c===void 0)return;u=c}return u})}},766:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.publish=void 0;var n=t(2483),i=t(9247),o=t(1483);e.publish=function(a){return a?function(s){return o.connect(a)(s)}:function(s){return i.multicast(new n.Subject)(s)}}},7220:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.publishBehavior=void 0;var n=t(1637),i=t(8918);e.publishBehavior=function(o){return function(a){var s=new n.BehaviorSubject(o);return new i.ConnectableObservable(a,function(){return s})}}},6106:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.publishLast=void 0;var n=t(95),i=t(8918);e.publishLast=function(){return function(o){var a=new n.AsyncSubject;return new i.ConnectableObservable(o,function(){return a})}}},8157:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.publishReplay=void 0;var n=t(1242),i=t(9247),o=t(1018);e.publishReplay=function(a,s,u,l){u&&!o.isFunction(u)&&(l=u);var c=o.isFunction(u)?u:void 0;return function(f){return i.multicast(new n.ReplaySubject(a,s,l),c)(f)}}},4440:function(r,e,t){var n=this&&this.__read||function(s,u){var l=typeof Symbol=="function"&&s[Symbol.iterator];if(!l)return s;var c,f,h=l.call(s),d=[];try{for(;(u===void 0||u-- >0)&&!(c=h.next()).done;)d.push(c.value)}catch(v){f={error:v}}finally{try{c&&!c.done&&(l=h.return)&&l.call(h)}finally{if(f)throw f.error}}return d},i=this&&this.__spreadArray||function(s,u){for(var l=0,c=u.length,f=s.length;l<c;l++,f++)s[f]=u[l];return s};Object.defineProperty(e,"__esModule",{value:!0}),e.race=void 0;var o=t(8535),a=t(5600);e.race=function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];return a.raceWith.apply(void 0,i([],n(o.argsOrArgArray(s))))}},5600:function(r,e,t){var n=this&&this.__read||function(u,l){var c=typeof Symbol=="function"&&u[Symbol.iterator];if(!c)return u;var f,h,d=c.call(u),v=[];try{for(;(l===void 0||l-- >0)&&!(f=d.next()).done;)v.push(f.value)}catch(g){h={error:g}}finally{try{f&&!f.done&&(c=d.return)&&c.call(d)}finally{if(h)throw h.error}}return v},i=this&&this.__spreadArray||function(u,l){for(var c=0,f=l.length,h=u.length;c<f;c++,h++)u[h]=l[c];return u};Object.defineProperty(e,"__esModule",{value:!0}),e.raceWith=void 0;var o=t(5584),a=t(7843),s=t(6640);e.raceWith=function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];return u.length?a.operate(function(c,f){o.raceInit(i([c],n(u)))(f)}):s.identity}},9139:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reduce=void 0;var n=t(6384),i=t(7843);e.reduce=function(o,a){return i.operate(n.scanInternals(o,a,arguments.length>=2,!1,!0))}},7561:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.refCount=void 0;var n=t(7843),i=t(3111);e.refCount=function(){return n.operate(function(o,a){var s=null;o._refCount++;var u=i.createOperatorSubscriber(a,void 0,void 0,void 0,function(){if(!o||o._refCount<=0||0<--o._refCount)s=null;else{var l=o._connection,c=s;s=null,!l||c&&l!==c||l.unsubscribe(),a.unsubscribe()}});o.subscribe(u),u.closed||(s=o.connect())})}},8522:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.repeat=void 0;var n=t(8616),i=t(7843),o=t(3111),a=t(9445),s=t(4092);e.repeat=function(u){var l,c,f=1/0;return u!=null&&(typeof u=="object"?(l=u.count,f=l===void 0?1/0:l,c=u.delay):f=u),f<=0?function(){return n.EMPTY}:i.operate(function(h,d){var v,g=0,_=function(){if(v==null||v.unsubscribe(),v=null,c!=null){var p=typeof c=="number"?s.timer(c):a.innerFrom(c(g)),m=o.createOperatorSubscriber(d,function(){m.unsubscribe(),y()});p.subscribe(m)}else y()},y=function(){var p=!1;v=h.subscribe(o.createOperatorSubscriber(d,void 0,function(){++g<f?v?_():p=!0:d.complete()})),p&&_()};y()})}},6566:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.repeatWhen=void 0;var n=t(9445),i=t(2483),o=t(7843),a=t(3111);e.repeatWhen=function(s){return o.operate(function(u,l){var c,f,h=!1,d=!1,v=!1,g=function(){return v&&d&&(l.complete(),!0)},_=function(){v=!1,c=u.subscribe(a.createOperatorSubscriber(l,void 0,function(){v=!0,!g()&&(f||(f=new i.Subject,n.innerFrom(s(f)).subscribe(a.createOperatorSubscriber(l,function(){c?_():h=!0},function(){d=!0,g()}))),f).next()})),h&&(c.unsubscribe(),c=null,h=!1,_())};_()})}},7835:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.retry=void 0;var n=t(7843),i=t(3111),o=t(6640),a=t(4092),s=t(9445);e.retry=function(u){var l;u===void 0&&(u=1/0);var c=(l=u&&typeof u=="object"?u:{count:u}).count,f=c===void 0?1/0:c,h=l.delay,d=l.resetOnSuccess,v=d!==void 0&&d;return f<=0?o.identity:n.operate(function(g,_){var y,p=0,m=function(){var E=!1;y=g.subscribe(i.createOperatorSubscriber(_,function(C){v&&(p=0),_.next(C)},void 0,function(C){if(p++<f){var P=function(){y?(y.unsubscribe(),y=null,m()):E=!0};if(h!=null){var T=typeof h=="number"?a.timer(h):s.innerFrom(h(C,p)),R=i.createOperatorSubscriber(_,function(){R.unsubscribe(),P()},function(){_.complete()});T.subscribe(R)}else P()}else _.error(C)})),E&&(y.unsubscribe(),y=null,m())};m()})}},9843:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.retryWhen=void 0;var n=t(9445),i=t(2483),o=t(7843),a=t(3111);e.retryWhen=function(s){return o.operate(function(u,l){var c,f,h=!1,d=function(){c=u.subscribe(a.createOperatorSubscriber(l,void 0,void 0,function(v){f||(f=new i.Subject,n.innerFrom(s(f)).subscribe(a.createOperatorSubscriber(l,function(){return c?d():h=!0}))),f&&f.next(v)})),h&&(c.unsubscribe(),c=null,h=!1,d())};d()})}},1731:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sample=void 0;var n=t(9445),i=t(7843),o=t(1342),a=t(3111);e.sample=function(s){return i.operate(function(u,l){var c=!1,f=null;u.subscribe(a.createOperatorSubscriber(l,function(h){c=!0,f=h})),n.innerFrom(s).subscribe(a.createOperatorSubscriber(l,function(){if(c){c=!1;var h=f;f=null,l.next(h)}},o.noop))})}},6086:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sampleTime=void 0;var n=t(7961),i=t(1731),o=t(6472);e.sampleTime=function(a,s){return s===void 0&&(s=n.asyncScheduler),i.sample(o.interval(a,s))}},8624:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scan=void 0;var n=t(7843),i=t(6384);e.scan=function(o,a){return n.operate(i.scanInternals(o,a,arguments.length>=2,!0))}},6384:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scanInternals=void 0;var n=t(3111);e.scanInternals=function(i,o,a,s,u){return function(l,c){var f=a,h=o,d=0;l.subscribe(n.createOperatorSubscriber(c,function(v){var g=d++;h=f?i(h,v,g):(f=!0,v),s&&c.next(h)},u&&function(){f&&c.next(h),c.complete()}))}}},582:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sequenceEqual=void 0;var n=t(7843),i=t(3111),o=t(9445);e.sequenceEqual=function(a,s){return s===void 0&&(s=function(u,l){return u===l}),n.operate(function(u,l){var c={buffer:[],complete:!1},f={buffer:[],complete:!1},h=function(v){l.next(v),l.complete()},d=function(v,g){var _=i.createOperatorSubscriber(l,function(y){var p=g.buffer,m=g.complete;p.length===0?m?h(!1):v.buffer.push(y):!s(y,p.shift())&&h(!1)},function(){v.complete=!0;var y=g.complete,p=g.buffer;y&&h(p.length===0),_==null||_.unsubscribe()});return _};u.subscribe(d(c,f)),o.innerFrom(a).subscribe(d(f,c))})}},8977:function(r,e,t){var n=this&&this.__read||function(c,f){var h=typeof Symbol=="function"&&c[Symbol.iterator];if(!h)return c;var d,v,g=h.call(c),_=[];try{for(;(f===void 0||f-- >0)&&!(d=g.next()).done;)_.push(d.value)}catch(y){v={error:y}}finally{try{d&&!d.done&&(h=g.return)&&h.call(g)}finally{if(v)throw v.error}}return _},i=this&&this.__spreadArray||function(c,f){for(var h=0,d=f.length,v=c.length;h<d;h++,v++)c[v]=f[h];return c};Object.defineProperty(e,"__esModule",{value:!0}),e.share=void 0;var o=t(9445),a=t(2483),s=t(5),u=t(7843);function l(c,f){for(var h=[],d=2;d<arguments.length;d++)h[d-2]=arguments[d];if(f!==!0){if(f!==!1){var v=new s.SafeSubscriber({next:function(){v.unsubscribe(),c()}});return o.innerFrom(f.apply(void 0,i([],n(h)))).subscribe(v)}}else c()}e.share=function(c){c===void 0&&(c={});var f=c.connector,h=f===void 0?function(){return new a.Subject}:f,d=c.resetOnError,v=d===void 0||d,g=c.resetOnComplete,_=g===void 0||g,y=c.resetOnRefCountZero,p=y===void 0||y;return function(m){var E,C,P,T=0,R=!1,D=!1,L=function(){C==null||C.unsubscribe(),C=void 0},j=function(){L(),E=P=void 0,R=D=!1},F=function(){var q=E;j(),q==null||q.unsubscribe()};return u.operate(function(q,W){T++,D||R||L();var Z=P=P??h();W.add(function(){--T!=0||D||R||(C=l(F,p))}),Z.subscribe(W),!E&&T>0&&(E=new s.SafeSubscriber({next:function(Q){return Z.next(Q)},error:function(Q){D=!0,L(),C=l(j,v,Q),Z.error(Q)},complete:function(){R=!0,L(),C=l(j,_),Z.complete()}}),o.innerFrom(q).subscribe(E))})(m)}}},3133:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.shareReplay=void 0;var n=t(1242),i=t(8977);e.shareReplay=function(o,a,s){var u,l,c,f,h=!1;return o&&typeof o=="object"?(u=o.bufferSize,f=u===void 0?1/0:u,l=o.windowTime,a=l===void 0?1/0:l,h=(c=o.refCount)!==void 0&&c,s=o.scheduler):f=o??1/0,i.share({connector:function(){return new n.ReplaySubject(f,a,s)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:h})}},3001:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.single=void 0;var n=t(2823),i=t(1505),o=t(1759),a=t(7843),s=t(3111);e.single=function(u){return a.operate(function(l,c){var f,h=!1,d=!1,v=0;l.subscribe(s.createOperatorSubscriber(c,function(g){d=!0,u&&!u(g,v++,l)||(h&&c.error(new i.SequenceError("Too many matching values")),h=!0,f=g)},function(){h?(c.next(f),c.complete()):c.error(d?new o.NotFoundError("No matching values"):new n.EmptyError)}))})}},3982:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.skip=void 0;var n=t(783);e.skip=function(i){return n.filter(function(o,a){return i<=a})}},9098:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.skipLast=void 0;var n=t(6640),i=t(7843),o=t(3111);e.skipLast=function(a){return a<=0?n.identity:i.operate(function(s,u){var l=new Array(a),c=0;return s.subscribe(o.createOperatorSubscriber(u,function(f){var h=c++;if(h<a)l[h]=f;else{var d=h%a,v=l[d];l[d]=f,u.next(v)}})),function(){l=null}})}},7372:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.skipUntil=void 0;var n=t(7843),i=t(3111),o=t(9445),a=t(1342);e.skipUntil=function(s){return n.operate(function(u,l){var c=!1,f=i.createOperatorSubscriber(l,function(){f==null||f.unsubscribe(),c=!0},a.noop);o.innerFrom(s).subscribe(f),u.subscribe(i.createOperatorSubscriber(l,function(h){return c&&l.next(h)}))})}},4721:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.skipWhile=void 0;var n=t(7843),i=t(3111);e.skipWhile=function(o){return n.operate(function(a,s){var u=!1,l=0;a.subscribe(i.createOperatorSubscriber(s,function(c){return(u||(u=!o(c,l++)))&&s.next(c)}))})}},269:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.startWith=void 0;var n=t(3865),i=t(1107),o=t(7843);e.startWith=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var u=i.popScheduler(a);return o.operate(function(l,c){(u?n.concat(a,l,u):n.concat(a,l)).subscribe(c)})}},8960:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.subscribeOn=void 0;var n=t(7843);e.subscribeOn=function(i,o){return o===void 0&&(o=0),n.operate(function(a,s){s.add(i.schedule(function(){return a.subscribe(s)},o))})}},8774:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.switchAll=void 0;var n=t(3879),i=t(6640);e.switchAll=function(){return n.switchMap(i.identity)}},3879:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.switchMap=void 0;var n=t(9445),i=t(7843),o=t(3111);e.switchMap=function(a,s){return i.operate(function(u,l){var c=null,f=0,h=!1,d=function(){return h&&!c&&l.complete()};u.subscribe(o.createOperatorSubscriber(l,function(v){c==null||c.unsubscribe();var g=0,_=f++;n.innerFrom(a(v,_)).subscribe(c=o.createOperatorSubscriber(l,function(y){return l.next(s?s(v,y,_,g++):y)},function(){c=null,d()}))},function(){h=!0,d()}))})}},3274:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.switchMapTo=void 0;var n=t(3879),i=t(1018);e.switchMapTo=function(o,a){return i.isFunction(a)?n.switchMap(function(){return o},a):n.switchMap(function(){return o})}},8712:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.switchScan=void 0;var n=t(3879),i=t(7843);e.switchScan=function(o,a){return i.operate(function(s,u){var l=a;return n.switchMap(function(c,f){return o(l,c,f)},function(c,f){return l=f,f})(s).subscribe(u),function(){l=null}})}},846:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.take=void 0;var n=t(8616),i=t(7843),o=t(3111);e.take=function(a){return a<=0?function(){return n.EMPTY}:i.operate(function(s,u){var l=0;s.subscribe(o.createOperatorSubscriber(u,function(c){++l<=a&&(u.next(c),a<=l&&u.complete())}))})}},8330:function(r,e,t){var n=this&&this.__values||function(s){var u=typeof Symbol=="function"&&Symbol.iterator,l=u&&s[u],c=0;if(l)return l.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&c>=s.length&&(s=void 0),{value:s&&s[c++],done:!s}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.takeLast=void 0;var i=t(8616),o=t(7843),a=t(3111);e.takeLast=function(s){return s<=0?function(){return i.EMPTY}:o.operate(function(u,l){var c=[];u.subscribe(a.createOperatorSubscriber(l,function(f){c.push(f),s<c.length&&c.shift()},function(){var f,h;try{for(var d=n(c),v=d.next();!v.done;v=d.next()){var g=v.value;l.next(g)}}catch(_){f={error:_}}finally{try{v&&!v.done&&(h=d.return)&&h.call(d)}finally{if(f)throw f.error}}l.complete()},void 0,function(){c=null}))})}},4780:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.takeUntil=void 0;var n=t(7843),i=t(3111),o=t(9445),a=t(1342);e.takeUntil=function(s){return n.operate(function(u,l){o.innerFrom(s).subscribe(i.createOperatorSubscriber(l,function(){return l.complete()},a.noop)),!l.closed&&u.subscribe(l)})}},2129:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.takeWhile=void 0;var n=t(7843),i=t(3111);e.takeWhile=function(o,a){return a===void 0&&(a=!1),n.operate(function(s,u){var l=0;s.subscribe(i.createOperatorSubscriber(u,function(c){var f=o(c,l++);(f||a)&&u.next(c),!f&&u.complete()}))})}},3964:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tap=void 0;var n=t(1018),i=t(7843),o=t(3111),a=t(6640);e.tap=function(s,u,l){var c=n.isFunction(s)||u||l?{next:s,error:u,complete:l}:s;return c?i.operate(function(f,h){var d;(d=c.subscribe)===null||d===void 0||d.call(c);var v=!0;f.subscribe(o.createOperatorSubscriber(h,function(g){var _;(_=c.next)===null||_===void 0||_.call(c,g),h.next(g)},function(){var g;v=!1,(g=c.complete)===null||g===void 0||g.call(c),h.complete()},function(g){var _;v=!1,(_=c.error)===null||_===void 0||_.call(c,g),h.error(g)},function(){var g,_;v&&((g=c.unsubscribe)===null||g===void 0||g.call(c)),(_=c.finalize)===null||_===void 0||_.call(c)}))}):a.identity}},8941:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.throttle=void 0;var n=t(7843),i=t(3111),o=t(9445);e.throttle=function(a,s){return n.operate(function(u,l){var c=s??{},f=c.leading,h=f===void 0||f,d=c.trailing,v=d!==void 0&&d,g=!1,_=null,y=null,p=!1,m=function(){y==null||y.unsubscribe(),y=null,v&&(P(),p&&l.complete())},E=function(){y=null,p&&l.complete()},C=function(T){return y=o.innerFrom(a(T)).subscribe(i.createOperatorSubscriber(l,m,E))},P=function(){if(g){g=!1;var T=_;_=null,l.next(T),!p&&C(T)}};u.subscribe(i.createOperatorSubscriber(l,function(T){g=!0,_=T,(!y||y.closed)&&(h?P():C(T))},function(){p=!0,(!(v&&g&&y)||y.closed)&&l.complete()}))})}},7640:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.throttleTime=void 0;var n=t(7961),i=t(8941),o=t(4092);e.throttleTime=function(a,s,u){s===void 0&&(s=n.asyncScheduler);var l=o.timer(a,s);return i.throttle(function(){return l},u)}},4869:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.throwIfEmpty=void 0;var n=t(2823),i=t(7843),o=t(3111);function a(){return new n.EmptyError}e.throwIfEmpty=function(s){return s===void 0&&(s=a),i.operate(function(u,l){var c=!1;u.subscribe(o.createOperatorSubscriber(l,function(f){c=!0,l.next(f)},function(){return c?l.complete():l.error(s())}))})}},489:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TimeInterval=e.timeInterval=void 0;var n=t(7961),i=t(7843),o=t(3111);e.timeInterval=function(s){return s===void 0&&(s=n.asyncScheduler),i.operate(function(u,l){var c=s.now();u.subscribe(o.createOperatorSubscriber(l,function(f){var h=s.now(),d=h-c;c=h,l.next(new a(f,d))}))})};var a=function(s,u){this.value=s,this.interval=u};e.TimeInterval=a},1554:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.timeout=e.TimeoutError=void 0;var n=t(7961),i=t(1074),o=t(7843),a=t(9445),s=t(5568),u=t(3111),l=t(7110);function c(f){throw new e.TimeoutError(f)}e.TimeoutError=s.createErrorClass(function(f){return function(h){h===void 0&&(h=null),f(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=h}}),e.timeout=function(f,h){var d=i.isValidDate(f)?{first:f}:typeof f=="number"?{each:f}:f,v=d.first,g=d.each,_=d.with,y=_===void 0?c:_,p=d.scheduler,m=p===void 0?h??n.asyncScheduler:p,E=d.meta,C=E===void 0?null:E;if(v==null&&g==null)throw new TypeError("No timeout provided.");return o.operate(function(P,T){var R,D,L=null,j=0,F=function(q){D=l.executeSchedule(T,m,function(){try{R.unsubscribe(),a.innerFrom(y({meta:C,lastValue:L,seen:j})).subscribe(T)}catch(W){T.error(W)}},q)};R=P.subscribe(u.createOperatorSubscriber(T,function(q){D==null||D.unsubscribe(),j++,T.next(L=q),g>0&&F(g)},void 0,void 0,function(){D!=null&&D.closed||D==null||D.unsubscribe(),L=null})),!j&&F(v!=null?typeof v=="number"?v:+v-m.now():g)})}},4862:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.timeoutWith=void 0;var n=t(7961),i=t(1074),o=t(1554);e.timeoutWith=function(a,s,u){var l,c,f;if(u=u??n.async,i.isValidDate(a)?l=a:typeof a=="number"&&(c=a),!s)throw new TypeError("No observable provided to switch to");if(f=function(){return s},l==null&&c==null)throw new TypeError("No timeout provided.");return o.timeout({first:l,each:c,scheduler:u,with:f})}},6505:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.timestamp=void 0;var n=t(9568),i=t(5471);e.timestamp=function(o){return o===void 0&&(o=n.dateTimestampProvider),i.map(function(a){return{value:a,timestamp:o.now()}})}},2343:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.toArray=void 0;var n=t(9139),i=t(7843),o=function(a,s){return a.push(s),a};e.toArray=function(){return i.operate(function(a,s){n.reduce(o,[])(a).subscribe(s)})}},5477:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.window=void 0;var n=t(2483),i=t(7843),o=t(3111),a=t(1342),s=t(9445);e.window=function(u){return i.operate(function(l,c){var f=new n.Subject;c.next(f.asObservable());var h=function(d){f.error(d),c.error(d)};return l.subscribe(o.createOperatorSubscriber(c,function(d){return f==null?void 0:f.next(d)},function(){f.complete(),c.complete()},h)),s.innerFrom(u).subscribe(o.createOperatorSubscriber(c,function(){f.complete(),c.next(f=new n.Subject)},a.noop,h)),function(){f==null||f.unsubscribe(),f=null}})}},6746:function(r,e,t){var n=this&&this.__values||function(s){var u=typeof Symbol=="function"&&Symbol.iterator,l=u&&s[u],c=0;if(l)return l.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&c>=s.length&&(s=void 0),{value:s&&s[c++],done:!s}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.windowCount=void 0;var i=t(2483),o=t(7843),a=t(3111);e.windowCount=function(s,u){u===void 0&&(u=0);var l=u>0?u:s;return o.operate(function(c,f){var h=[new i.Subject],d=0;f.next(h[0].asObservable()),c.subscribe(a.createOperatorSubscriber(f,function(v){var g,_;try{for(var y=n(h),p=y.next();!p.done;p=y.next())p.value.next(v)}catch(C){g={error:C}}finally{try{p&&!p.done&&(_=y.return)&&_.call(y)}finally{if(g)throw g.error}}var m=d-s+1;if(m>=0&&m%l==0&&h.shift().complete(),++d%l==0){var E=new i.Subject;h.push(E),f.next(E.asObservable())}},function(){for(;h.length>0;)h.shift().complete();f.complete()},function(v){for(;h.length>0;)h.shift().error(v);f.error(v)},function(){h=null}))})}},8208:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.windowTime=void 0;var n=t(2483),i=t(7961),o=t(8014),a=t(7843),s=t(3111),u=t(7479),l=t(1107),c=t(7110);e.windowTime=function(f){for(var h,d,v=[],g=1;g<arguments.length;g++)v[g-1]=arguments[g];var _=(h=l.popScheduler(v))!==null&&h!==void 0?h:i.asyncScheduler,y=(d=v[0])!==null&&d!==void 0?d:null,p=v[1]||1/0;return a.operate(function(m,E){var C=[],P=!1,T=function(j){var F=j.window,q=j.subs;F.complete(),q.unsubscribe(),u.arrRemove(C,j),P&&R()},R=function(){if(C){var j=new o.Subscription;E.add(j);var F=new n.Subject,q={window:F,subs:j,seen:0};C.push(q),E.next(F.asObservable()),c.executeSchedule(j,_,function(){return T(q)},f)}};y!==null&&y>=0?c.executeSchedule(E,_,R,y,!0):P=!0,R();var D=function(j){return C.slice().forEach(j)},L=function(j){D(function(F){var q=F.window;return j(q)}),j(E),E.unsubscribe()};return m.subscribe(s.createOperatorSubscriber(E,function(j){D(function(F){F.window.next(j),p<=++F.seen&&T(F)})},function(){return L(function(j){return j.complete()})},function(j){return L(function(F){return F.error(j)})})),function(){C=null}})}},6637:function(r,e,t){var n=this&&this.__values||function(f){var h=typeof Symbol=="function"&&Symbol.iterator,d=h&&f[h],v=0;if(d)return d.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&v>=f.length&&(f=void 0),{value:f&&f[v++],done:!f}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.windowToggle=void 0;var i=t(2483),o=t(8014),a=t(7843),s=t(9445),u=t(3111),l=t(1342),c=t(7479);e.windowToggle=function(f,h){return a.operate(function(d,v){var g=[],_=function(y){for(;0<g.length;)g.shift().error(y);v.error(y)};s.innerFrom(f).subscribe(u.createOperatorSubscriber(v,function(y){var p=new i.Subject;g.push(p);var m,E=new o.Subscription;try{m=s.innerFrom(h(y))}catch(C){return void _(C)}v.next(p.asObservable()),E.add(m.subscribe(u.createOperatorSubscriber(v,function(){c.arrRemove(g,p),p.complete(),E.unsubscribe()},l.noop,_)))},l.noop)),d.subscribe(u.createOperatorSubscriber(v,function(y){var p,m,E=g.slice();try{for(var C=n(E),P=C.next();!P.done;P=C.next())P.value.next(y)}catch(T){p={error:T}}finally{try{P&&!P.done&&(m=C.return)&&m.call(C)}finally{if(p)throw p.error}}},function(){for(;0<g.length;)g.shift().complete();v.complete()},_,function(){for(;0<g.length;)g.shift().unsubscribe()}))})}},1141:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.windowWhen=void 0;var n=t(2483),i=t(7843),o=t(3111),a=t(9445);e.windowWhen=function(s){return i.operate(function(u,l){var c,f,h=function(v){c.error(v),l.error(v)},d=function(){var v;f==null||f.unsubscribe(),c==null||c.complete(),c=new n.Subject,l.next(c.asObservable());try{v=a.innerFrom(s())}catch(g){return void h(g)}v.subscribe(f=o.createOperatorSubscriber(l,d,d,h))};d(),u.subscribe(o.createOperatorSubscriber(l,function(v){return c.next(v)},function(){c.complete(),l.complete()},h,function(){f==null||f.unsubscribe(),c=null}))})}},5442:function(r,e,t){var n=this&&this.__read||function(f,h){var d=typeof Symbol=="function"&&f[Symbol.iterator];if(!d)return f;var v,g,_=d.call(f),y=[];try{for(;(h===void 0||h-- >0)&&!(v=_.next()).done;)y.push(v.value)}catch(p){g={error:p}}finally{try{v&&!v.done&&(d=_.return)&&d.call(_)}finally{if(g)throw g.error}}return y},i=this&&this.__spreadArray||function(f,h){for(var d=0,v=h.length,g=f.length;d<v;d++,g++)f[g]=h[d];return f};Object.defineProperty(e,"__esModule",{value:!0}),e.withLatestFrom=void 0;var o=t(7843),a=t(3111),s=t(9445),u=t(6640),l=t(1342),c=t(1107);e.withLatestFrom=function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];var d=c.popResultSelector(f);return o.operate(function(v,g){for(var _=f.length,y=new Array(_),p=f.map(function(){return!1}),m=!1,E=function(P){s.innerFrom(f[P]).subscribe(a.createOperatorSubscriber(g,function(T){y[P]=T,m||p[P]||(p[P]=!0,(m=p.every(u.identity))&&(p=null))},l.noop))},C=0;C<_;C++)E(C);v.subscribe(a.createOperatorSubscriber(g,function(P){if(m){var T=i([P],n(y));g.next(d?d.apply(void 0,i([],n(T))):T)}}))})}},5918:function(r,e,t){var n=this&&this.__read||function(s,u){var l=typeof Symbol=="function"&&s[Symbol.iterator];if(!l)return s;var c,f,h=l.call(s),d=[];try{for(;(u===void 0||u-- >0)&&!(c=h.next()).done;)d.push(c.value)}catch(v){f={error:v}}finally{try{c&&!c.done&&(l=h.return)&&l.call(h)}finally{if(f)throw f.error}}return d},i=this&&this.__spreadArray||function(s,u){for(var l=0,c=u.length,f=s.length;l<c;l++,f++)s[f]=u[l];return s};Object.defineProperty(e,"__esModule",{value:!0}),e.zip=void 0;var o=t(7286),a=t(7843);e.zip=function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];return a.operate(function(l,c){o.zip.apply(void 0,i([l],n(s))).subscribe(c)})}},187:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.zipAll=void 0;var n=t(7286),i=t(3638);e.zipAll=function(o){return i.joinAllInternals(n.zip,o)}},8538:function(r,e,t){var n=this&&this.__read||function(a,s){var u=typeof Symbol=="function"&&a[Symbol.iterator];if(!u)return a;var l,c,f=u.call(a),h=[];try{for(;(s===void 0||s-- >0)&&!(l=f.next()).done;)h.push(l.value)}catch(d){c={error:d}}finally{try{l&&!l.done&&(u=f.return)&&u.call(f)}finally{if(c)throw c.error}}return h},i=this&&this.__spreadArray||function(a,s){for(var u=0,l=s.length,c=a.length;u<l;u++,c++)a[c]=s[u];return a};Object.defineProperty(e,"__esModule",{value:!0}),e.zipWith=void 0;var o=t(5918);e.zipWith=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return o.zip.apply(void 0,i([],n(a)))}},6985:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scheduleArray=void 0;var n=t(4662);e.scheduleArray=function(i,o){return new n.Observable(function(a){var s=0;return o.schedule(function(){s===i.length?a.complete():(a.next(i[s++]),a.closed||this.schedule())})})}},854:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scheduleAsyncIterable=void 0;var n=t(4662),i=t(7110);e.scheduleAsyncIterable=function(o,a){if(!o)throw new Error("Iterable cannot be null");return new n.Observable(function(s){i.executeSchedule(s,a,function(){var u=o[Symbol.asyncIterator]();i.executeSchedule(s,a,function(){u.next().then(function(l){l.done?s.complete():s.next(l.value)})},0,!0)})})}},8808:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scheduleIterable=void 0;var n=t(4662),i=t(1964),o=t(1018),a=t(7110);e.scheduleIterable=function(s,u){return new n.Observable(function(l){var c;return a.executeSchedule(l,u,function(){c=s[i.iterator](),a.executeSchedule(l,u,function(){var f,h,d;try{h=(f=c.next()).value,d=f.done}catch(v){return void l.error(v)}d?l.complete():l.next(h)},0,!0)}),function(){return o.isFunction(c==null?void 0:c.return)&&c.return()}})}},9567:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scheduleObservable=void 0;var n=t(9445),i=t(5184),o=t(8960);e.scheduleObservable=function(a,s){return n.innerFrom(a).pipe(o.subscribeOn(s),i.observeOn(s))}},9589:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.schedulePromise=void 0;var n=t(9445),i=t(5184),o=t(8960);e.schedulePromise=function(a,s){return n.innerFrom(a).pipe(o.subscribeOn(s),i.observeOn(s))}},4953:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scheduleReadableStreamLike=void 0;var n=t(854),i=t(9137);e.scheduleReadableStreamLike=function(o,a){return n.scheduleAsyncIterable(i.readableStreamLikeToAsyncGenerator(o),a)}},1656:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scheduled=void 0;var n=t(9567),i=t(9589),o=t(6985),a=t(8808),s=t(854),u=t(1116),l=t(7629),c=t(8046),f=t(6368),h=t(1358),d=t(7614),v=t(9137),g=t(4953);e.scheduled=function(_,y){if(_!=null){if(u.isInteropObservable(_))return n.scheduleObservable(_,y);if(c.isArrayLike(_))return o.scheduleArray(_,y);if(l.isPromise(_))return i.schedulePromise(_,y);if(h.isAsyncIterable(_))return s.scheduleAsyncIterable(_,y);if(f.isIterable(_))return a.scheduleIterable(_,y);if(v.isReadableStreamLike(_))return g.scheduleReadableStreamLike(_,y)}throw d.createInvalidObservableTypeError(_)}},4671:function(r,e,t){var n,i=this&&this.__extends||(n=function(a,s){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},n(a,s)},function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}n(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)});Object.defineProperty(e,"__esModule",{value:!0}),e.Action=void 0;var o=function(a){function s(u,l){return a.call(this)||this}return i(s,a),s.prototype.schedule=function(u,l){return this},s}(t(8014).Subscription);e.Action=o},2628:function(r,e,t){var n,i=this&&this.__extends||(n=function(u,l){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(c[h]=f[h])},n(u,l)},function(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function c(){this.constructor=u}n(u,l),u.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)});Object.defineProperty(e,"__esModule",{value:!0}),e.AnimationFrameAction=void 0;var o=t(5267),a=t(9507),s=function(u){function l(c,f){var h=u.call(this,c,f)||this;return h.scheduler=c,h.work=f,h}return i(l,u),l.prototype.requestAsyncId=function(c,f,h){return h===void 0&&(h=0),h!==null&&h>0?u.prototype.requestAsyncId.call(this,c,f,h):(c.actions.push(this),c._scheduled||(c._scheduled=a.animationFrameProvider.requestAnimationFrame(function(){return c.flush(void 0)})))},l.prototype.recycleAsyncId=function(c,f,h){var d;if(h===void 0&&(h=0),h!=null?h>0:this.delay>0)return u.prototype.recycleAsyncId.call(this,c,f,h);var v=c.actions;f!=null&&((d=v[v.length-1])===null||d===void 0?void 0:d.id)!==f&&(a.animationFrameProvider.cancelAnimationFrame(f),c._scheduled=void 0)},l}(o.AsyncAction);e.AnimationFrameAction=s},3229:function(r,e,t){var n,i=this&&this.__extends||(n=function(a,s){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},n(a,s)},function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}n(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)});Object.defineProperty(e,"__esModule",{value:!0}),e.AnimationFrameScheduler=void 0;var o=function(a){function s(){return a!==null&&a.apply(this,arguments)||this}return i(s,a),s.prototype.flush=function(u){this._active=!0;var l=this._scheduled;this._scheduled=void 0;var c,f=this.actions;u=u||f.shift();do if(c=u.execute(u.state,u.delay))break;while((u=f[0])&&u.id===l&&f.shift());if(this._active=!1,c){for(;(u=f[0])&&u.id===l&&f.shift();)u.unsubscribe();throw c}},s}(t(5648).AsyncScheduler);e.AnimationFrameScheduler=o},5006:function(r,e,t){var n,i=this&&this.__extends||(n=function(u,l){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(c[h]=f[h])},n(u,l)},function(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function c(){this.constructor=u}n(u,l),u.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)});Object.defineProperty(e,"__esModule",{value:!0}),e.AsapAction=void 0;var o=t(5267),a=t(6293),s=function(u){function l(c,f){var h=u.call(this,c,f)||this;return h.scheduler=c,h.work=f,h}return i(l,u),l.prototype.requestAsyncId=function(c,f,h){return h===void 0&&(h=0),h!==null&&h>0?u.prototype.requestAsyncId.call(this,c,f,h):(c.actions.push(this),c._scheduled||(c._scheduled=a.immediateProvider.setImmediate(c.flush.bind(c,void 0))))},l.prototype.recycleAsyncId=function(c,f,h){var d;if(h===void 0&&(h=0),h!=null?h>0:this.delay>0)return u.prototype.recycleAsyncId.call(this,c,f,h);var v=c.actions;f!=null&&((d=v[v.length-1])===null||d===void 0?void 0:d.id)!==f&&(a.immediateProvider.clearImmediate(f),c._scheduled===f&&(c._scheduled=void 0))},l}(o.AsyncAction);e.AsapAction=s},827:function(r,e,t){var n,i=this&&this.__extends||(n=function(a,s){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},n(a,s)},function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}n(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)});Object.defineProperty(e,"__esModule",{value:!0}),e.AsapScheduler=void 0;var o=function(a){function s(){return a!==null&&a.apply(this,arguments)||this}return i(s,a),s.prototype.flush=function(u){this._active=!0;var l=this._scheduled;this._scheduled=void 0;var c,f=this.actions;u=u||f.shift();do if(c=u.execute(u.state,u.delay))break;while((u=f[0])&&u.id===l&&f.shift());if(this._active=!1,c){for(;(u=f[0])&&u.id===l&&f.shift();)u.unsubscribe();throw c}},s}(t(5648).AsyncScheduler);e.AsapScheduler=o},5267:function(r,e,t){var n,i=this&&this.__extends||(n=function(l,c){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(f[d]=h[d])},n(l,c)},function(l,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function f(){this.constructor=l}n(l,c),l.prototype=c===null?Object.create(c):(f.prototype=c.prototype,new f)});Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncAction=void 0;var o=t(4671),a=t(5649),s=t(7479),u=function(l){function c(f,h){var d=l.call(this,f,h)||this;return d.scheduler=f,d.work=h,d.pending=!1,d}return i(c,l),c.prototype.schedule=function(f,h){var d;if(h===void 0&&(h=0),this.closed)return this;this.state=f;var v=this.id,g=this.scheduler;return v!=null&&(this.id=this.recycleAsyncId(g,v,h)),this.pending=!0,this.delay=h,this.id=(d=this.id)!==null&&d!==void 0?d:this.requestAsyncId(g,this.id,h),this},c.prototype.requestAsyncId=function(f,h,d){return d===void 0&&(d=0),a.intervalProvider.setInterval(f.flush.bind(f,this),d)},c.prototype.recycleAsyncId=function(f,h,d){if(d===void 0&&(d=0),d!=null&&this.delay===d&&this.pending===!1)return h;h!=null&&a.intervalProvider.clearInterval(h)},c.prototype.execute=function(f,h){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var d=this._execute(f,h);if(d)return d;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},c.prototype._execute=function(f,h){var d,v=!1;try{this.work(f)}catch(g){v=!0,d=g||new Error("Scheduled action threw falsy error")}if(v)return this.unsubscribe(),d},c.prototype.unsubscribe=function(){if(!this.closed){var f=this.id,h=this.scheduler,d=h.actions;this.work=this.state=this.scheduler=null,this.pending=!1,s.arrRemove(d,this),f!=null&&(this.id=this.recycleAsyncId(h,f,null)),this.delay=null,l.prototype.unsubscribe.call(this)}},c}(o.Action);e.AsyncAction=u},5648:function(r,e,t){var n,i=this&&this.__extends||(n=function(s,u){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(l[f]=c[f])},n(s,u)},function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function l(){this.constructor=s}n(s,u),s.prototype=u===null?Object.create(u):(l.prototype=u.prototype,new l)});Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncScheduler=void 0;var o=t(8986),a=function(s){function u(l,c){c===void 0&&(c=o.Scheduler.now);var f=s.call(this,l,c)||this;return f.actions=[],f._active=!1,f}return i(u,s),u.prototype.flush=function(l){var c=this.actions;if(this._active)c.push(l);else{var f;this._active=!0;do if(f=l.execute(l.state,l.delay))break;while(l=c.shift());if(this._active=!1,f){for(;l=c.shift();)l.unsubscribe();throw f}}},u}(o.Scheduler);e.AsyncScheduler=a},4212:function(r,e,t){var n,i=this&&this.__extends||(n=function(a,s){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},n(a,s)},function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}n(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)});Object.defineProperty(e,"__esModule",{value:!0}),e.QueueAction=void 0;var o=function(a){function s(u,l){var c=a.call(this,u,l)||this;return c.scheduler=u,c.work=l,c}return i(s,a),s.prototype.schedule=function(u,l){return l===void 0&&(l=0),l>0?a.prototype.schedule.call(this,u,l):(this.delay=l,this.state=u,this.scheduler.flush(this),this)},s.prototype.execute=function(u,l){return l>0||this.closed?a.prototype.execute.call(this,u,l):this._execute(u,l)},s.prototype.requestAsyncId=function(u,l,c){return c===void 0&&(c=0),c!=null&&c>0||c==null&&this.delay>0?a.prototype.requestAsyncId.call(this,u,l,c):(u.flush(this),0)},s}(t(5267).AsyncAction);e.QueueAction=o},1293:function(r,e,t){var n,i=this&&this.__extends||(n=function(a,s){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},n(a,s)},function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}n(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)});Object.defineProperty(e,"__esModule",{value:!0}),e.QueueScheduler=void 0;var o=function(a){function s(){return a!==null&&a.apply(this,arguments)||this}return i(s,a),s}(t(5648).AsyncScheduler);e.QueueScheduler=o},182:function(r,e,t){var n,i=this&&this.__extends||(n=function(l,c){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(f[d]=h[d])},n(l,c)},function(l,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function f(){this.constructor=l}n(l,c),l.prototype=c===null?Object.create(c):(f.prototype=c.prototype,new f)});Object.defineProperty(e,"__esModule",{value:!0}),e.VirtualAction=e.VirtualTimeScheduler=void 0;var o=t(5267),a=t(8014),s=function(l){function c(f,h){f===void 0&&(f=u),h===void 0&&(h=1/0);var d=l.call(this,f,function(){return d.frame})||this;return d.maxFrames=h,d.frame=0,d.index=-1,d}return i(c,l),c.prototype.flush=function(){for(var f,h,d=this.actions,v=this.maxFrames;(h=d[0])&&h.delay<=v&&(d.shift(),this.frame=h.delay,!(f=h.execute(h.state,h.delay))););if(f){for(;h=d.shift();)h.unsubscribe();throw f}},c.frameTimeFactor=10,c}(t(5648).AsyncScheduler);e.VirtualTimeScheduler=s;var u=function(l){function c(f,h,d){d===void 0&&(d=f.index+=1);var v=l.call(this,f,h)||this;return v.scheduler=f,v.work=h,v.index=d,v.active=!0,v.index=f.index=d,v}return i(c,l),c.prototype.schedule=function(f,h){if(h===void 0&&(h=0),Number.isFinite(h)){if(!this.id)return l.prototype.schedule.call(this,f,h);this.active=!1;var d=new c(this.scheduler,this.work);return this.add(d),d.schedule(f,h)}return a.Subscription.EMPTY},c.prototype.requestAsyncId=function(f,h,d){d===void 0&&(d=0),this.delay=f.frame+d;var v=f.actions;return v.push(this),v.sort(c.sortActions),1},c.prototype.recycleAsyncId=function(f,h,d){},c.prototype._execute=function(f,h){if(this.active===!0)return l.prototype._execute.call(this,f,h)},c.sortActions=function(f,h){return f.delay===h.delay?f.index===h.index?0:f.index>h.index?1:-1:f.delay>h.delay?1:-1},c}(o.AsyncAction);e.VirtualAction=u},3862:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrame=e.animationFrameScheduler=void 0;var n=t(2628),i=t(3229);e.animationFrameScheduler=new i.AnimationFrameScheduler(n.AnimationFrameAction),e.animationFrame=e.animationFrameScheduler},9507:function(r,e,t){var n=this&&this.__read||function(a,s){var u=typeof Symbol=="function"&&a[Symbol.iterator];if(!u)return a;var l,c,f=u.call(a),h=[];try{for(;(s===void 0||s-- >0)&&!(l=f.next()).done;)h.push(l.value)}catch(d){c={error:d}}finally{try{l&&!l.done&&(u=f.return)&&u.call(f)}finally{if(c)throw c.error}}return h},i=this&&this.__spreadArray||function(a,s){for(var u=0,l=s.length,c=a.length;u<l;u++,c++)a[c]=s[u];return a};Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrameProvider=void 0;var o=t(8014);e.animationFrameProvider={schedule:function(a){var s=requestAnimationFrame,u=cancelAnimationFrame,l=e.animationFrameProvider.delegate;l&&(s=l.requestAnimationFrame,u=l.cancelAnimationFrame);var c=s(function(f){u=void 0,a(f)});return new o.Subscription(function(){return u==null?void 0:u(c)})},requestAnimationFrame:function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var u=e.animationFrameProvider.delegate;return((u==null?void 0:u.requestAnimationFrame)||requestAnimationFrame).apply(void 0,i([],n(a)))},cancelAnimationFrame:function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var u=e.animationFrameProvider.delegate;return((u==null?void 0:u.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,i([],n(a)))},delegate:void 0}},3692:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.asap=e.asapScheduler=void 0;var n=t(5006),i=t(827);e.asapScheduler=new i.AsapScheduler(n.AsapAction),e.asap=e.asapScheduler},7961:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.async=e.asyncScheduler=void 0;var n=t(5267),i=t(5648);e.asyncScheduler=new i.AsyncScheduler(n.AsyncAction),e.async=e.asyncScheduler},9568:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.dateTimestampProvider=void 0,e.dateTimestampProvider={now:function(){return(e.dateTimestampProvider.delegate||Date).now()},delegate:void 0}},6293:function(r,e,t){var n=this&&this.__read||function(u,l){var c=typeof Symbol=="function"&&u[Symbol.iterator];if(!c)return u;var f,h,d=c.call(u),v=[];try{for(;(l===void 0||l-- >0)&&!(f=d.next()).done;)v.push(f.value)}catch(g){h={error:g}}finally{try{f&&!f.done&&(c=d.return)&&c.call(d)}finally{if(h)throw h.error}}return v},i=this&&this.__spreadArray||function(u,l){for(var c=0,f=l.length,h=u.length;c<f;c++,h++)u[h]=l[c];return u};Object.defineProperty(e,"__esModule",{value:!0}),e.immediateProvider=void 0;var o=t(7245),a=o.Immediate.setImmediate,s=o.Immediate.clearImmediate;e.immediateProvider={setImmediate:function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];var c=e.immediateProvider.delegate;return((c==null?void 0:c.setImmediate)||a).apply(void 0,i([],n(u)))},clearImmediate:function(u){var l=e.immediateProvider.delegate;return((l==null?void 0:l.clearImmediate)||s)(u)},delegate:void 0}},5649:function(r,e){var t=this&&this.__read||function(i,o){var a=typeof Symbol=="function"&&i[Symbol.iterator];if(!a)return i;var s,u,l=a.call(i),c=[];try{for(;(o===void 0||o-- >0)&&!(s=l.next()).done;)c.push(s.value)}catch(f){u={error:f}}finally{try{s&&!s.done&&(a=l.return)&&a.call(l)}finally{if(u)throw u.error}}return c},n=this&&this.__spreadArray||function(i,o){for(var a=0,s=o.length,u=i.length;a<s;a++,u++)i[u]=o[a];return i};Object.defineProperty(e,"__esModule",{value:!0}),e.intervalProvider=void 0,e.intervalProvider={setInterval:function(i,o){for(var a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];var u=e.intervalProvider.delegate;return u!=null&&u.setInterval?u.setInterval.apply(u,n([i,o],t(a))):setInterval.apply(void 0,n([i,o],t(a)))},clearInterval:function(i){var o=e.intervalProvider.delegate;return((o==null?void 0:o.clearInterval)||clearInterval)(i)},delegate:void 0}},4746:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.performanceTimestampProvider=void 0,e.performanceTimestampProvider={now:function(){return(e.performanceTimestampProvider.delegate||performance).now()},delegate:void 0}},2886:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.queue=e.queueScheduler=void 0;var n=t(4212),i=t(1293);e.queueScheduler=new i.QueueScheduler(n.QueueAction),e.queue=e.queueScheduler},9155:function(r,e){var t=this&&this.__read||function(i,o){var a=typeof Symbol=="function"&&i[Symbol.iterator];if(!a)return i;var s,u,l=a.call(i),c=[];try{for(;(o===void 0||o-- >0)&&!(s=l.next()).done;)c.push(s.value)}catch(f){u={error:f}}finally{try{s&&!s.done&&(a=l.return)&&a.call(l)}finally{if(u)throw u.error}}return c},n=this&&this.__spreadArray||function(i,o){for(var a=0,s=o.length,u=i.length;a<s;a++,u++)i[u]=o[a];return i};Object.defineProperty(e,"__esModule",{value:!0}),e.timeoutProvider=void 0,e.timeoutProvider={setTimeout:function(i,o){for(var a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];var u=e.timeoutProvider.delegate;return u!=null&&u.setTimeout?u.setTimeout.apply(u,n([i,o],t(a))):setTimeout.apply(void 0,n([i,o],t(a)))},clearTimeout:function(i){var o=e.timeoutProvider.delegate;return((o==null?void 0:o.clearTimeout)||clearTimeout)(i)},delegate:void 0}},1964:(r,e)=>{function t(){return typeof Symbol=="function"&&Symbol.iterator?Symbol.iterator:"@@iterator"}Object.defineProperty(e,"__esModule",{value:!0}),e.iterator=e.getSymbolIterator=void 0,e.getSymbolIterator=t,e.iterator=t()},3327:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.observable=void 0,e.observable=typeof Symbol=="function"&&Symbol.observable||"@@observable"},6038:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},7057:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ArgumentOutOfRangeError=void 0;var n=t(5568);e.ArgumentOutOfRangeError=n.createErrorClass(function(i){return function(){i(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}})},2823:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.EmptyError=void 0;var n=t(5568);e.EmptyError=n.createErrorClass(function(i){return function(){i(this),this.name="EmptyError",this.message="no elements in sequence"}})},7245:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TestTools=e.Immediate=void 0;var t,n=1,i={};function o(a){return a in i&&(delete i[a],!0)}e.Immediate={setImmediate:function(a){var s=n++;return i[s]=!0,t||(t=Promise.resolve()),t.then(function(){return o(s)&&a()}),s},clearImmediate:function(a){o(a)}},e.TestTools={pending:function(){return Object.keys(i).length}}},1759:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NotFoundError=void 0;var n=t(5568);e.NotFoundError=n.createErrorClass(function(i){return function(o){i(this),this.name="NotFoundError",this.message=o}})},9686:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectUnsubscribedError=void 0;var n=t(5568);e.ObjectUnsubscribedError=n.createErrorClass(function(i){return function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})},1505:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SequenceError=void 0;var n=t(5568);e.SequenceError=n.createErrorClass(function(i){return function(o){i(this),this.name="SequenceError",this.message=o}})},5788:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.UnsubscriptionError=void 0;var n=t(5568);e.UnsubscriptionError=n.createErrorClass(function(i){return function(o){i(this),this.message=o?o.length+` errors occurred during unsubscription:
`+o.map(function(a,s){return s+1+") "+a.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=o}})},1107:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.popNumber=e.popScheduler=e.popResultSelector=void 0;var n=t(1018),i=t(8613);function o(a){return a[a.length-1]}e.popResultSelector=function(a){return n.isFunction(o(a))?a.pop():void 0},e.popScheduler=function(a){return i.isScheduler(o(a))?a.pop():void 0},e.popNumber=function(a,s){return typeof o(a)=="number"?a.pop():s}},7360:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.argsArgArrayOrObject=void 0;var t=Array.isArray,n=Object.getPrototypeOf,i=Object.prototype,o=Object.keys;e.argsArgArrayOrObject=function(a){if(a.length===1){var s=a[0];if(t(s))return{args:s,keys:null};if((l=s)&&typeof l=="object"&&n(l)===i){var u=o(s);return{args:u.map(function(c){return s[c]}),keys:u}}}var l;return{args:a,keys:null}}},8535:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.argsOrArgArray=void 0;var t=Array.isArray;e.argsOrArgArray=function(n){return n.length===1&&t(n[0])?n[0]:n}},7479:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.arrRemove=void 0,e.arrRemove=function(t,n){if(t){var i=t.indexOf(n);0<=i&&t.splice(i,1)}}},5568:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createErrorClass=void 0,e.createErrorClass=function(t){var n=t(function(i){Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}},6013:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createObject=void 0,e.createObject=function(t,n){return t.reduce(function(i,o,a){return i[o]=n[a],i},{})}},9223:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.captureError=e.errorContext=void 0;var n=t(3413),i=null;e.errorContext=function(o){if(n.config.useDeprecatedSynchronousErrorHandling){var a=!i;if(a&&(i={errorThrown:!1,error:null}),o(),a){var s=i,u=s.errorThrown,l=s.error;if(i=null,u)throw l}}else o()},e.captureError=function(o){n.config.useDeprecatedSynchronousErrorHandling&&i&&(i.errorThrown=!0,i.error=o)}},7110:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.executeSchedule=void 0,e.executeSchedule=function(t,n,i,o,a){o===void 0&&(o=0),a===void 0&&(a=!1);var s=n.schedule(function(){i(),a?t.add(this.schedule(null,o)):this.unsubscribe()},o);if(t.add(s),!a)return s}},6640:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.identity=void 0,e.identity=function(t){return t}},8046:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isArrayLike=void 0,e.isArrayLike=function(t){return t&&typeof t.length=="number"&&typeof t!="function"}},1358:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isAsyncIterable=void 0;var n=t(1018);e.isAsyncIterable=function(i){return Symbol.asyncIterator&&n.isFunction(i==null?void 0:i[Symbol.asyncIterator])}},1074:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isValidDate=void 0,e.isValidDate=function(t){return t instanceof Date&&!isNaN(t)}},1018:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isFunction=void 0,e.isFunction=function(t){return typeof t=="function"}},1116:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isInteropObservable=void 0;var n=t(3327),i=t(1018);e.isInteropObservable=function(o){return i.isFunction(o[n.observable])}},6368:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isIterable=void 0;var n=t(1964),i=t(1018);e.isIterable=function(o){return i.isFunction(o==null?void 0:o[n.iterator])}},1751:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isObservable=void 0;var n=t(4662),i=t(1018);e.isObservable=function(o){return!!o&&(o instanceof n.Observable||i.isFunction(o.lift)&&i.isFunction(o.subscribe))}},7629:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isPromise=void 0;var n=t(1018);e.isPromise=function(i){return n.isFunction(i==null?void 0:i.then)}},9137:function(r,e,t){var n=this&&this.__generator||function(s,u){var l,c,f,h,d={label:0,sent:function(){if(1&f[0])throw f[1];return f[1]},trys:[],ops:[]};return h={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function v(g){return function(_){return function(y){if(l)throw new TypeError("Generator is already executing.");for(;d;)try{if(l=1,c&&(f=2&y[0]?c.return:y[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,y[1])).done)return f;switch(c=0,f&&(y=[2&y[0],f.value]),y[0]){case 0:case 1:f=y;break;case 4:return d.label++,{value:y[1],done:!1};case 5:d.label++,c=y[1],y=[0];continue;case 7:y=d.ops.pop(),d.trys.pop();continue;default:if(!((f=(f=d.trys).length>0&&f[f.length-1])||y[0]!==6&&y[0]!==2)){d=0;continue}if(y[0]===3&&(!f||y[1]>f[0]&&y[1]<f[3])){d.label=y[1];break}if(y[0]===6&&d.label<f[1]){d.label=f[1],f=y;break}if(f&&d.label<f[2]){d.label=f[2],d.ops.push(y);break}f[2]&&d.ops.pop(),d.trys.pop();continue}y=u.call(s,d)}catch(p){y=[6,p],c=0}finally{l=f=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([g,_])}}},i=this&&this.__await||function(s){return this instanceof i?(this.v=s,this):new i(s)},o=this&&this.__asyncGenerator||function(s,u,l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c,f=l.apply(s,u||[]),h=[];return c={},d("next"),d("throw"),d("return"),c[Symbol.asyncIterator]=function(){return this},c;function d(p){f[p]&&(c[p]=function(m){return new Promise(function(E,C){h.push([p,m,E,C])>1||v(p,m)})})}function v(p,m){try{(E=f[p](m)).value instanceof i?Promise.resolve(E.value.v).then(g,_):y(h[0][2],E)}catch(C){y(h[0][3],C)}var E}function g(p){v("next",p)}function _(p){v("throw",p)}function y(p,m){p(m),h.shift(),h.length&&v(h[0][0],h[0][1])}};Object.defineProperty(e,"__esModule",{value:!0}),e.isReadableStreamLike=e.readableStreamLikeToAsyncGenerator=void 0;var a=t(1018);e.readableStreamLikeToAsyncGenerator=function(s){return o(this,arguments,function(){var u,l,c;return n(this,function(f){switch(f.label){case 0:u=s.getReader(),f.label=1;case 1:f.trys.push([1,,9,10]),f.label=2;case 2:return[4,i(u.read())];case 3:return l=f.sent(),c=l.value,l.done?[4,i(void 0)]:[3,5];case 4:return[2,f.sent()];case 5:return[4,i(c)];case 6:return[4,f.sent()];case 7:return f.sent(),[3,2];case 8:return[3,10];case 9:return u.releaseLock(),[7];case 10:return[2]}})})},e.isReadableStreamLike=function(s){return a.isFunction(s==null?void 0:s.getReader)}},8613:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isScheduler=void 0;var n=t(1018);e.isScheduler=function(i){return i&&n.isFunction(i.schedule)}},7843:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.operate=e.hasLift=void 0;var n=t(1018);function i(o){return n.isFunction(o==null?void 0:o.lift)}e.hasLift=i,e.operate=function(o){return function(a){if(i(a))return a.lift(function(s){try{return o(s,this)}catch(u){this.error(u)}});throw new TypeError("Unable to lift unknown Observable type")}}},1251:function(r,e,t){var n=this&&this.__read||function(s,u){var l=typeof Symbol=="function"&&s[Symbol.iterator];if(!l)return s;var c,f,h=l.call(s),d=[];try{for(;(u===void 0||u-- >0)&&!(c=h.next()).done;)d.push(c.value)}catch(v){f={error:v}}finally{try{c&&!c.done&&(l=h.return)&&l.call(h)}finally{if(f)throw f.error}}return d},i=this&&this.__spreadArray||function(s,u){for(var l=0,c=u.length,f=s.length;l<c;l++,f++)s[f]=u[l];return s};Object.defineProperty(e,"__esModule",{value:!0}),e.mapOneOrManyArgs=void 0;var o=t(5471),a=Array.isArray;e.mapOneOrManyArgs=function(s){return o.map(function(u){return function(l,c){return a(c)?l.apply(void 0,i([],n(c))):l(c)}(s,u)})}},1342:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.noop=void 0,e.noop=function(){}},245:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.not=void 0,e.not=function(t,n){return function(i,o){return!t.call(n,i,o)}}},2706:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.pipeFromArray=e.pipe=void 0;var n=t(6640);function i(o){return o.length===0?n.identity:o.length===1?o[0]:function(a){return o.reduce(function(s,u){return u(s)},a)}}e.pipe=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return i(o)},e.pipeFromArray=i},7315:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reportUnhandledError=void 0;var n=t(3413),i=t(9155);e.reportUnhandledError=function(o){i.timeoutProvider.setTimeout(function(){var a=n.config.onUnhandledError;if(!a)throw o;a(o)})}},7614:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createInvalidObservableTypeError=void 0,e.createInvalidObservableTypeError=function(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}},9419:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mergeAll=e.merge=e.max=e.materialize=e.mapTo=e.map=e.last=e.isEmpty=e.ignoreElements=e.groupBy=e.first=e.findIndex=e.find=e.finalize=e.filter=e.expand=e.exhaustMap=e.exhaustAll=e.exhaust=e.every=e.endWith=e.elementAt=e.distinctUntilKeyChanged=e.distinctUntilChanged=e.distinct=e.dematerialize=e.delayWhen=e.delay=e.defaultIfEmpty=e.debounceTime=e.debounce=e.count=e.connect=e.concatWith=e.concatMapTo=e.concatMap=e.concatAll=e.concat=e.combineLatestWith=e.combineLatest=e.combineLatestAll=e.combineAll=e.catchError=e.bufferWhen=e.bufferToggle=e.bufferTime=e.bufferCount=e.buffer=e.auditTime=e.audit=void 0,e.timeInterval=e.throwIfEmpty=e.throttleTime=e.throttle=e.tap=e.takeWhile=e.takeUntil=e.takeLast=e.take=e.switchScan=e.switchMapTo=e.switchMap=e.switchAll=e.subscribeOn=e.startWith=e.skipWhile=e.skipUntil=e.skipLast=e.skip=e.single=e.shareReplay=e.share=e.sequenceEqual=e.scan=e.sampleTime=e.sample=e.refCount=e.retryWhen=e.retry=e.repeatWhen=e.repeat=e.reduce=e.raceWith=e.race=e.publishReplay=e.publishLast=e.publishBehavior=e.publish=e.pluck=e.partition=e.pairwise=e.onErrorResumeNext=e.observeOn=e.multicast=e.min=e.mergeWith=e.mergeScan=e.mergeMapTo=e.mergeMap=e.flatMap=void 0,e.zipWith=e.zipAll=e.zip=e.withLatestFrom=e.windowWhen=e.windowToggle=e.windowTime=e.windowCount=e.window=e.toArray=e.timestamp=e.timeoutWith=e.timeout=void 0;var n=t(3146);Object.defineProperty(e,"audit",{enumerable:!0,get:function(){return n.audit}});var i=t(3231);Object.defineProperty(e,"auditTime",{enumerable:!0,get:function(){return i.auditTime}});var o=t(8015);Object.defineProperty(e,"buffer",{enumerable:!0,get:function(){return o.buffer}});var a=t(5572);Object.defineProperty(e,"bufferCount",{enumerable:!0,get:function(){return a.bufferCount}});var s=t(7210);Object.defineProperty(e,"bufferTime",{enumerable:!0,get:function(){return s.bufferTime}});var u=t(8995);Object.defineProperty(e,"bufferToggle",{enumerable:!0,get:function(){return u.bufferToggle}});var l=t(8831);Object.defineProperty(e,"bufferWhen",{enumerable:!0,get:function(){return l.bufferWhen}});var c=t(8118);Object.defineProperty(e,"catchError",{enumerable:!0,get:function(){return c.catchError}});var f=t(6625);Object.defineProperty(e,"combineAll",{enumerable:!0,get:function(){return f.combineAll}});var h=t(6728);Object.defineProperty(e,"combineLatestAll",{enumerable:!0,get:function(){return h.combineLatestAll}});var d=t(2551);Object.defineProperty(e,"combineLatest",{enumerable:!0,get:function(){return d.combineLatest}});var v=t(8239);Object.defineProperty(e,"combineLatestWith",{enumerable:!0,get:function(){return v.combineLatestWith}});var g=t(7601);Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return g.concat}});var _=t(8158);Object.defineProperty(e,"concatAll",{enumerable:!0,get:function(){return _.concatAll}});var y=t(9135);Object.defineProperty(e,"concatMap",{enumerable:!0,get:function(){return y.concatMap}});var p=t(9938);Object.defineProperty(e,"concatMapTo",{enumerable:!0,get:function(){return p.concatMapTo}});var m=t(9669);Object.defineProperty(e,"concatWith",{enumerable:!0,get:function(){return m.concatWith}});var E=t(1483);Object.defineProperty(e,"connect",{enumerable:!0,get:function(){return E.connect}});var C=t(1038);Object.defineProperty(e,"count",{enumerable:!0,get:function(){return C.count}});var P=t(4461);Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return P.debounce}});var T=t(8079);Object.defineProperty(e,"debounceTime",{enumerable:!0,get:function(){return T.debounceTime}});var R=t(378);Object.defineProperty(e,"defaultIfEmpty",{enumerable:!0,get:function(){return R.defaultIfEmpty}});var D=t(914);Object.defineProperty(e,"delay",{enumerable:!0,get:function(){return D.delay}});var L=t(8766);Object.defineProperty(e,"delayWhen",{enumerable:!0,get:function(){return L.delayWhen}});var j=t(7441);Object.defineProperty(e,"dematerialize",{enumerable:!0,get:function(){return j.dematerialize}});var F=t(5365);Object.defineProperty(e,"distinct",{enumerable:!0,get:function(){return F.distinct}});var q=t(8937);Object.defineProperty(e,"distinctUntilChanged",{enumerable:!0,get:function(){return q.distinctUntilChanged}});var W=t(9612);Object.defineProperty(e,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return W.distinctUntilKeyChanged}});var Z=t(4520);Object.defineProperty(e,"elementAt",{enumerable:!0,get:function(){return Z.elementAt}});var Q=t(1776);Object.defineProperty(e,"endWith",{enumerable:!0,get:function(){return Q.endWith}});var re=t(5510);Object.defineProperty(e,"every",{enumerable:!0,get:function(){return re.every}});var ee=t(1551);Object.defineProperty(e,"exhaust",{enumerable:!0,get:function(){return ee.exhaust}});var ue=t(2752);Object.defineProperty(e,"exhaustAll",{enumerable:!0,get:function(){return ue.exhaustAll}});var de=t(4753);Object.defineProperty(e,"exhaustMap",{enumerable:!0,get:function(){return de.exhaustMap}});var se=t(7661);Object.defineProperty(e,"expand",{enumerable:!0,get:function(){return se.expand}});var be=t(783);Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return be.filter}});var Le=t(3555);Object.defineProperty(e,"finalize",{enumerable:!0,get:function(){return Le.finalize}});var fe=t(7714);Object.defineProperty(e,"find",{enumerable:!0,get:function(){return fe.find}});var ce=t(9756);Object.defineProperty(e,"findIndex",{enumerable:!0,get:function(){return ce.findIndex}});var Ee=t(8275);Object.defineProperty(e,"first",{enumerable:!0,get:function(){return Ee.first}});var Ce=t(7815);Object.defineProperty(e,"groupBy",{enumerable:!0,get:function(){return Ce.groupBy}});var ke=t(490);Object.defineProperty(e,"ignoreElements",{enumerable:!0,get:function(){return ke.ignoreElements}});var Ie=t(9356);Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return Ie.isEmpty}});var ve=t(8669);Object.defineProperty(e,"last",{enumerable:!0,get:function(){return ve.last}});var we=t(5471);Object.defineProperty(e,"map",{enumerable:!0,get:function(){return we.map}});var xe=t(3218);Object.defineProperty(e,"mapTo",{enumerable:!0,get:function(){return xe.mapTo}});var Fe=t(2360);Object.defineProperty(e,"materialize",{enumerable:!0,get:function(){return Fe.materialize}});var He=t(1415);Object.defineProperty(e,"max",{enumerable:!0,get:function(){return He.max}});var at=t(361);Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return at.merge}});var wt=t(7302);Object.defineProperty(e,"mergeAll",{enumerable:!0,get:function(){return wt.mergeAll}});var it=t(6902);Object.defineProperty(e,"flatMap",{enumerable:!0,get:function(){return it.flatMap}});var H=t(983);Object.defineProperty(e,"mergeMap",{enumerable:!0,get:function(){return H.mergeMap}});var $=t(6586);Object.defineProperty(e,"mergeMapTo",{enumerable:!0,get:function(){return $.mergeMapTo}});var ne=t(4408);Object.defineProperty(e,"mergeScan",{enumerable:!0,get:function(){return ne.mergeScan}});var Re=t(8253);Object.defineProperty(e,"mergeWith",{enumerable:!0,get:function(){return Re.mergeWith}});var De=t(2669);Object.defineProperty(e,"min",{enumerable:!0,get:function(){return De.min}});var Be=t(9247);Object.defineProperty(e,"multicast",{enumerable:!0,get:function(){return Be.multicast}});var Je=t(5184);Object.defineProperty(e,"observeOn",{enumerable:!0,get:function(){return Je.observeOn}});var Tt=t(1226);Object.defineProperty(e,"onErrorResumeNext",{enumerable:!0,get:function(){return Tt.onErrorResumeNext}});var Lt=t(1518);Object.defineProperty(e,"pairwise",{enumerable:!0,get:function(){return Lt.pairwise}});var Vt=t(2171);Object.defineProperty(e,"partition",{enumerable:!0,get:function(){return Vt.partition}});var Nt=t(4912);Object.defineProperty(e,"pluck",{enumerable:!0,get:function(){return Nt.pluck}});var Jt=t(766);Object.defineProperty(e,"publish",{enumerable:!0,get:function(){return Jt.publish}});var Er=t(7220);Object.defineProperty(e,"publishBehavior",{enumerable:!0,get:function(){return Er.publishBehavior}});var Yt=t(6106);Object.defineProperty(e,"publishLast",{enumerable:!0,get:function(){return Yt.publishLast}});var dt=t(8157);Object.defineProperty(e,"publishReplay",{enumerable:!0,get:function(){return dt.publishReplay}});var me=t(4440);Object.defineProperty(e,"race",{enumerable:!0,get:function(){return me.race}});var nt=t(5600);Object.defineProperty(e,"raceWith",{enumerable:!0,get:function(){return nt.raceWith}});var lt=t(9139);Object.defineProperty(e,"reduce",{enumerable:!0,get:function(){return lt.reduce}});var ct=t(8522);Object.defineProperty(e,"repeat",{enumerable:!0,get:function(){return ct.repeat}});var ft=t(6566);Object.defineProperty(e,"repeatWhen",{enumerable:!0,get:function(){return ft.repeatWhen}});var Xt=t(7835);Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return Xt.retry}});var pt=t(9843);Object.defineProperty(e,"retryWhen",{enumerable:!0,get:function(){return pt.retryWhen}});var Qt=t(7561);Object.defineProperty(e,"refCount",{enumerable:!0,get:function(){return Qt.refCount}});var mr=t(1731);Object.defineProperty(e,"sample",{enumerable:!0,get:function(){return mr.sample}});var Rr=t(6086);Object.defineProperty(e,"sampleTime",{enumerable:!0,get:function(){return Rr.sampleTime}});var ar=t(8624);Object.defineProperty(e,"scan",{enumerable:!0,get:function(){return ar.scan}});var nr=t(582);Object.defineProperty(e,"sequenceEqual",{enumerable:!0,get:function(){return nr.sequenceEqual}});var tr=t(8977);Object.defineProperty(e,"share",{enumerable:!0,get:function(){return tr.share}});var lr=t(3133);Object.defineProperty(e,"shareReplay",{enumerable:!0,get:function(){return lr.shareReplay}});var Gr=t(3001);Object.defineProperty(e,"single",{enumerable:!0,get:function(){return Gr.single}});var fn=t(3982);Object.defineProperty(e,"skip",{enumerable:!0,get:function(){return fn.skip}});var In=t(9098);Object.defineProperty(e,"skipLast",{enumerable:!0,get:function(){return In.skipLast}});var Un=t(7372);Object.defineProperty(e,"skipUntil",{enumerable:!0,get:function(){return Un.skipUntil}});var hn=t(4721);Object.defineProperty(e,"skipWhile",{enumerable:!0,get:function(){return hn.skipWhile}});var $n=t(269);Object.defineProperty(e,"startWith",{enumerable:!0,get:function(){return $n.startWith}});var vn=t(8960);Object.defineProperty(e,"subscribeOn",{enumerable:!0,get:function(){return vn.subscribeOn}});var Ei=t(8774);Object.defineProperty(e,"switchAll",{enumerable:!0,get:function(){return Ei.switchAll}});var Li=t(3879);Object.defineProperty(e,"switchMap",{enumerable:!0,get:function(){return Li.switchMap}});var Fr=t(3274);Object.defineProperty(e,"switchMapTo",{enumerable:!0,get:function(){return Fr.switchMapTo}});var Tn=t(8712);Object.defineProperty(e,"switchScan",{enumerable:!0,get:function(){return Tn.switchScan}});var Ni=t(846);Object.defineProperty(e,"take",{enumerable:!0,get:function(){return Ni.take}});var _o=t(8330);Object.defineProperty(e,"takeLast",{enumerable:!0,get:function(){return _o.takeLast}});var Pi=t(4780);Object.defineProperty(e,"takeUntil",{enumerable:!0,get:function(){return Pi.takeUntil}});var vi=t(2129);Object.defineProperty(e,"takeWhile",{enumerable:!0,get:function(){return vi.takeWhile}});var un=t(3964);Object.defineProperty(e,"tap",{enumerable:!0,get:function(){return un.tap}});var qn=t(8941);Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return qn.throttle}});var Ca=t(7640);Object.defineProperty(e,"throttleTime",{enumerable:!0,get:function(){return Ca.throttleTime}});var pi=t(4869);Object.defineProperty(e,"throwIfEmpty",{enumerable:!0,get:function(){return pi.throwIfEmpty}});var Su=t(489);Object.defineProperty(e,"timeInterval",{enumerable:!0,get:function(){return Su.timeInterval}});var Pa=t(1554);Object.defineProperty(e,"timeout",{enumerable:!0,get:function(){return Pa.timeout}});var Hi=t(4862);Object.defineProperty(e,"timeoutWith",{enumerable:!0,get:function(){return Hi.timeoutWith}});var Ha=t(6505);Object.defineProperty(e,"timestamp",{enumerable:!0,get:function(){return Ha.timestamp}});var ia=t(2343);Object.defineProperty(e,"toArray",{enumerable:!0,get:function(){return ia.toArray}});var kn=t(5477);Object.defineProperty(e,"window",{enumerable:!0,get:function(){return kn.window}});var ui=t(6746);Object.defineProperty(e,"windowCount",{enumerable:!0,get:function(){return ui.windowCount}});var pr=t(8208);Object.defineProperty(e,"windowTime",{enumerable:!0,get:function(){return pr.windowTime}});var Aa=t(6637);Object.defineProperty(e,"windowToggle",{enumerable:!0,get:function(){return Aa.windowToggle}});var lo=t(1141);Object.defineProperty(e,"windowWhen",{enumerable:!0,get:function(){return lo.windowWhen}});var Vr=t(5442);Object.defineProperty(e,"withLatestFrom",{enumerable:!0,get:function(){return Vr.withLatestFrom}});var $r=t(5918);Object.defineProperty(e,"zip",{enumerable:!0,get:function(){return $r.zip}});var Ya=t(187);Object.defineProperty(e,"zipAll",{enumerable:!0,get:function(){return Ya.zipAll}});var Ys=t(8538);Object.defineProperty(e,"zipWith",{enumerable:!0,get:function(){return Ys.zipWith}})},5636:(r,e,t)=>{var n=t(1048),i=n.Buffer;function o(s,u){for(var l in s)u[l]=s[l]}function a(s,u,l){return i(s,u,l)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?r.exports=n:(o(n,e),e.Buffer=a),a.prototype=Object.create(i.prototype),o(i,a),a.from=function(s,u,l){if(typeof s=="number")throw new TypeError("Argument must not be a number");return i(s,u,l)},a.alloc=function(s,u,l){if(typeof s!="number")throw new TypeError("Argument must be a number");var c=i(s);return u!==void 0?typeof l=="string"?c.fill(u,l):c.fill(u):c.fill(0),c},a.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return i(s)},a.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(s)}},9975:(r,e,t)=>{var n=t(7101),i=Array.prototype.concat,o=Array.prototype.slice,a=r.exports=function(s){for(var u=[],l=0,c=s.length;l<c;l++){var f=s[l];n(f)?u=i.call(u,o.call(f)):u.push(f)}return u};a.wrap=function(s){return function(){return s(a(arguments))}}},7101:r=>{r.exports=function(e){return!(!e||typeof e=="string")&&(e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String"))}},8888:(r,e,t)=>{var n=t(5636).Buffer,i=n.isEncoding||function(v){switch((v=""+v)&&v.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(v){var g;switch(this.encoding=function(_){var y=function(p){if(!p)return"utf8";for(var m;;)switch(p){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return p;default:if(m)return;p=(""+p).toLowerCase(),m=!0}}(_);if(typeof y!="string"&&(n.isEncoding===i||!i(_)))throw new Error("Unknown encoding: "+_);return y||_}(v),this.encoding){case"utf16le":this.text=u,this.end=l,g=4;break;case"utf8":this.fillLast=s,g=4;break;case"base64":this.text=c,this.end=f,g=3;break;default:return this.write=h,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(g)}function a(v){return v<=127?0:v>>5==6?2:v>>4==14?3:v>>3==30?4:v>>6==2?-1:-2}function s(v){var g=this.lastTotal-this.lastNeed,_=function(y,p,m){if((192&p[0])!=128)return y.lastNeed=0,"�";if(y.lastNeed>1&&p.length>1){if((192&p[1])!=128)return y.lastNeed=1,"�";if(y.lastNeed>2&&p.length>2&&(192&p[2])!=128)return y.lastNeed=2,"�"}}(this,v);return _!==void 0?_:this.lastNeed<=v.length?(v.copy(this.lastChar,g,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(v.copy(this.lastChar,g,0,v.length),void(this.lastNeed-=v.length))}function u(v,g){if((v.length-g)%2==0){var _=v.toString("utf16le",g);if(_){var y=_.charCodeAt(_.length-1);if(y>=55296&&y<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=v[v.length-2],this.lastChar[1]=v[v.length-1],_.slice(0,-1)}return _}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=v[v.length-1],v.toString("utf16le",g,v.length-1)}function l(v){var g=v&&v.length?this.write(v):"";if(this.lastNeed){var _=this.lastTotal-this.lastNeed;return g+this.lastChar.toString("utf16le",0,_)}return g}function c(v,g){var _=(v.length-g)%3;return _===0?v.toString("base64",g):(this.lastNeed=3-_,this.lastTotal=3,_===1?this.lastChar[0]=v[v.length-1]:(this.lastChar[0]=v[v.length-2],this.lastChar[1]=v[v.length-1]),v.toString("base64",g,v.length-_))}function f(v){var g=v&&v.length?this.write(v):"";return this.lastNeed?g+this.lastChar.toString("base64",0,3-this.lastNeed):g}function h(v){return v.toString(this.encoding)}function d(v){return v&&v.length?this.write(v):""}e.StringDecoder=o,o.prototype.write=function(v){if(v.length===0)return"";var g,_;if(this.lastNeed){if((g=this.fillLast(v))===void 0)return"";_=this.lastNeed,this.lastNeed=0}else _=0;return _<v.length?g?g+this.text(v,_):this.text(v,_):g||""},o.prototype.end=function(v){var g=v&&v.length?this.write(v):"";return this.lastNeed?g+"�":g},o.prototype.text=function(v,g){var _=function(p,m,E){var C=m.length-1;if(C<E)return 0;var P=a(m[C]);return P>=0?(P>0&&(p.lastNeed=P-1),P):--C<E||P===-2?0:(P=a(m[C]))>=0?(P>0&&(p.lastNeed=P-2),P):--C<E||P===-2?0:(P=a(m[C]))>=0?(P>0&&(P===2?P=0:p.lastNeed=P-3),P):0}(this,v,g);if(!this.lastNeed)return v.toString("utf8",g);this.lastTotal=_;var y=v.length-(_-this.lastNeed);return v.copy(this.lastChar,0,y),v.toString("utf8",g,y)},o.prototype.fillLast=function(v){if(this.lastNeed<=v.length)return v.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);v.copy(this.lastChar,this.lastTotal-this.lastNeed,0,v.length),this.lastNeed-=v.length}}},iD={};function Mi(r){var e=iD[r];if(e!==void 0)return e.exports;var t=iD[r]={id:r,loaded:!1,exports:{}};return NG[r].call(t.exports,t,t.exports,Mi),t.loaded=!0,t.exports}Mi.n=r=>{var e=r&&r.__esModule?()=>r.default:()=>r;return Mi.d(e,{a:e}),e},Mi.d=(r,e)=>{for(var t in e)Mi.o(e,t)&&!Mi.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:e[t]})},Mi.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),Mi.o=(r,e)=>Object.prototype.hasOwnProperty.call(r,e),Mi.nmd=r=>(r.paths=[],r.children||(r.children=[]),r);var xu={};(()=>{Mi.d(xu,{RL:()=>_l,wK:()=>Sh,x_:()=>Id,lv:()=>xf,YQ:()=>Sl,BP:()=>cm,GZ:()=>Ob,Vw:()=>as,Ay:()=>xb,_G:()=>Ic,Wy:()=>sr,h4:()=>db});var r=Mi(5250);function e(b){return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},e(b)}function t(b,w){for(var x=0;x<w.length;x++){var O=w[x];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(b,n(O.key),O)}}function n(b){var w=function(x,O){if(e(x)!="object"||!x)return x;var M=x[Symbol.toPrimitive];if(M!==void 0){var I=M.call(x,"string");if(e(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(b);return e(w)=="symbol"?w:String(w)}var i=["onLayoutDone","onLayoutStep","onError","onLayoutComputing","onWebGLContextLost","onZoomTransitionDone","restart"],o=function(){function b(){var O,M,I,B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(function(V,z){if(!(V instanceof z))throw new TypeError("Cannot call a class as a function")})(this,b),O=this,I=void 0,(M=n(M="callbacks"))in O?Object.defineProperty(O,M,{value:I,enumerable:!0,configurable:!0,writable:!0}):O[M]=I,this.callbacks=B}var w,x;return w=b,x=[{key:"onZoomTransitionDone",value:function(){this.isValidFunction(this.callbacks.onZoomTransitionDone)&&this.callbacks.onZoomTransitionDone()}},{key:"onLayoutDone",value:function(){this.isValidFunction(this.callbacks.onLayoutDone)&&this.callbacks.onLayoutDone()}},{key:"onLayoutStep",value:function(O){this.isValidFunction(this.callbacks.onLayoutStep)&&this.callbacks.onLayoutStep(O)}},{key:"onLayoutComputing",value:function(O){this.isValidFunction(this.callbacks.onLayoutComputing)&&this.callbacks.onLayoutComputing(O)}},{key:"onError",value:function(O){this.isValidFunction(this.callbacks.onError)&&this.callbacks.onError(O)}},{key:"onWebGLContextLost",value:function(O){this.isValidFunction(this.callbacks.onWebGLContextLost)&&this.callbacks.onWebGLContextLost(O)}},{key:"isValidFunction",value:function(O){return O!==void 0&&typeof O=="function"}}],x&&t(w.prototype,x),Object.defineProperty(w,"prototype",{writable:!1}),b}(),a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,w){b.__proto__=w}||function(b,w){for(var x in w)w.hasOwnProperty(x)&&(b[x]=w[x])};function s(b,w){function x(){this.constructor=b}a(b,w),b.prototype=w===null?Object.create(w):(x.prototype=w.prototype,new x)}var u=function(){function b(w){w===void 0&&(w="Atom@"+kn()),this.name=w,this.isPendingUnobservation=!0,this.observers=[],this.observersIndexes={},this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=qr.NOT_TRACKING}return b.prototype.onBecomeUnobserved=function(){},b.prototype.reportObserved=function(){sl(this)},b.prototype.reportChanged=function(){ws(),function(w){if(w.lowestObserverState!==qr.STALE){w.lowestObserverState=qr.STALE;for(var x=w.observers,O=x.length;O--;){var M=x[O];M.dependenciesState===qr.UP_TO_DATE&&(M.isTracing!==Uo.NONE&&sc(M,w),M.onBecomeStale()),M.dependenciesState=qr.STALE}}}(this),$a()},b.prototype.toString=function(){return this.name},b}(),l=function(b){function w(x,O,M){x===void 0&&(x="Atom@"+kn()),O===void 0&&(O=$r),M===void 0&&(M=$r);var I=b.call(this,x)||this;return I.name=x,I.onBecomeObservedHandler=O,I.onBecomeUnobservedHandler=M,I.isPendingUnobservation=!1,I.isBeingTracked=!1,I}return s(w,b),w.prototype.reportObserved=function(){return ws(),b.prototype.reportObserved.call(this),this.isBeingTracked||(this.isBeingTracked=!0,this.onBecomeObservedHandler()),$a(),!!Wt.trackingDerivation},w.prototype.onBecomeUnobserved=function(){this.isBeingTracked=!1,this.onBecomeUnobservedHandler()},w}(u),c=Xa("Atom",u);function f(b){return b.interceptors&&b.interceptors.length>0}function h(b,w){var x=b.interceptors||(b.interceptors=[]);return x.push(w),Vr(function(){var O=x.indexOf(w);O!==-1&&x.splice(O,1)})}function d(b,w){var x=Es();try{var O=b.interceptors;if(O)for(var M=0,I=O.length;M<I&&(pr(!(w=O[M](w))||w.type,"Intercept handlers should return nothing or a change object"),w);M++);return w}finally{Ka(x)}}function v(b){return b.changeListeners&&b.changeListeners.length>0}function g(b,w){var x=b.changeListeners||(b.changeListeners=[]);return x.push(w),Vr(function(){var O=x.indexOf(w);O!==-1&&x.splice(O,1)})}function _(b,w){var x=Es(),O=b.changeListeners;if(O){for(var M=0,I=(O=O.slice()).length;M<I;M++)O[M](w);Ka(x)}}function y(){return!!Wt.spyListeners.length}function p(b){if(Wt.spyListeners.length)for(var w=Wt.spyListeners,x=0,O=w.length;x<O;x++)w[x](b)}function m(b){p(Tu({},b,{spyReportStart:!0}))}var E={spyReportEnd:!0};function C(b){p(b?Tu({},b,E):E)}function P(b){return Wt.spyListeners.push(b),Vr(function(){var w=Wt.spyListeners.indexOf(b);w!==-1&&Wt.spyListeners.splice(w,1)})}var T="__$$iterating";function R(b){pr(b[T]!==!0,"Illegal state: cannot recycle array as iterator"),Cu(b,T,!0);var w=-1;return Cu(b,"next",function(){return{done:++w>=this.length,value:w<this.length?this[w]:void 0}}),b}function D(b,w){Cu(b,typeof Symbol=="function"&&Symbol.iterator||"@@iterator",w)}var L,j,F=function(){var b=!1,w={};return Object.defineProperty(w,"0",{set:function(){b=!0}}),Object.create(w)[0]=1,b===!1}(),q=0,W=function(){};L=W,j=Array.prototype,Object.setPrototypeOf!==void 0?Object.setPrototypeOf(L.prototype,j):L.prototype.__proto__!==void 0?L.prototype.__proto__=j:L.prototype=j,Object.isFrozen(Array)&&["constructor","push","shift","concat","pop","unshift","replace","find","findIndex","splice","reverse","sort"].forEach(function(b){Object.defineProperty(W.prototype,b,{configurable:!0,writable:!0,value:Array.prototype[b]})});var Z=function(){function b(w,x,O,M){this.array=O,this.owned=M,this.values=[],this.lastKnownLength=0,this.interceptors=null,this.changeListeners=null,this.atom=new u(w||"ObservableArray@"+kn()),this.enhancer=function(I,B){return x(I,B,w+"[..]")}}return b.prototype.dehanceValue=function(w){return this.dehancer!==void 0?this.dehancer(w):w},b.prototype.dehanceValues=function(w){return this.dehancer!==void 0?w.map(this.dehancer):w},b.prototype.intercept=function(w){return h(this,w)},b.prototype.observe=function(w,x){return x===void 0&&(x=!1),x&&w({object:this.array,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),g(this,w)},b.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},b.prototype.setArrayLength=function(w){if(typeof w!="number"||w<0)throw new Error("[mobx.array] Out of range: "+w);var x=this.values.length;if(w!==x)if(w>x){for(var O=new Array(w-x),M=0;M<w-x;M++)O[M]=void 0;this.spliceWithArray(x,0,O)}else this.spliceWithArray(w,x-w)},b.prototype.updateArrayLength=function(w,x){if(w!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed. Did you use peek() to change it?");this.lastKnownLength+=x,x>0&&w+x+1>q&&de(w+x+1)},b.prototype.spliceWithArray=function(w,x,O){var M=this;Dr(this.atom);var I=this.values.length;if(w===void 0?w=0:w>I?w=I:w<0&&(w=Math.max(0,I+w)),x=arguments.length===1?I-w:x==null?0:Math.max(0,Math.min(x,I-w)),O===void 0&&(O=[]),f(this)){var B=d(this,{object:this.array,type:"splice",index:w,removedCount:x,added:O});if(!B)return Ha;x=B.removedCount,O=B.added}var V=(O=O.map(function(Y){return M.enhancer(Y,void 0)})).length-x;this.updateArrayLength(I,V);var z=this.spliceItemsIntoValues(w,x,O);return x===0&&O.length===0||this.notifyArraySplice(w,O,z),this.dehanceValues(z)},b.prototype.spliceItemsIntoValues=function(w,x,O){if(O.length<1e4)return(M=this.values).splice.apply(M,[w,x].concat(O));var M,I=this.values.slice(w,w+x);return this.values=this.values.slice(0,w).concat(O,this.values.slice(w+x)),I},b.prototype.notifyArrayChildUpdate=function(w,x,O){var M=!this.owned&&y(),I=v(this),B=I||M?{object:this.array,type:"update",index:w,newValue:x,oldValue:O}:null;M&&m(B),this.atom.reportChanged(),I&&_(this,B),M&&C()},b.prototype.notifyArraySplice=function(w,x,O){var M=!this.owned&&y(),I=v(this),B=I||M?{object:this.array,type:"splice",index:w,removed:O,added:x,removedCount:O.length,addedCount:x.length}:null;M&&m(B),this.atom.reportChanged(),I&&_(this,B),M&&C()},b}(),Q=function(b){function w(x,O,M,I){M===void 0&&(M="ObservableArray@"+kn()),I===void 0&&(I=!1);var B=b.call(this)||this,V=new Z(M,O,B,I);return Cu(B,"$mobx",V),x&&x.length&&B.spliceWithArray(0,0,x),F&&Object.defineProperty(V.array,"0",re),B}return s(w,b),w.prototype.intercept=function(x){return this.$mobx.intercept(x)},w.prototype.observe=function(x,O){return O===void 0&&(O=!1),this.$mobx.observe(x,O)},w.prototype.clear=function(){return this.splice(0)},w.prototype.concat=function(){for(var x=[],O=0;O<arguments.length;O++)x[O]=arguments[O];return this.$mobx.atom.reportObserved(),Array.prototype.concat.apply(this.peek(),x.map(function(M){return be(M)?M.peek():M}))},w.prototype.replace=function(x){return this.$mobx.spliceWithArray(0,this.$mobx.values.length,x)},w.prototype.toJS=function(){return this.slice()},w.prototype.toJSON=function(){return this.toJS()},w.prototype.peek=function(){return this.$mobx.atom.reportObserved(),this.$mobx.dehanceValues(this.$mobx.values)},w.prototype.find=function(x,O,M){M===void 0&&(M=0);var I=this.findIndex.apply(this,arguments);return I===-1?void 0:this.get(I)},w.prototype.findIndex=function(x,O,M){M===void 0&&(M=0);for(var I=this.peek(),B=I.length,V=M;V<B;V++)if(x.call(O,I[V],V,this))return V;return-1},w.prototype.splice=function(x,O){for(var M=[],I=2;I<arguments.length;I++)M[I-2]=arguments[I];switch(arguments.length){case 0:return[];case 1:return this.$mobx.spliceWithArray(x);case 2:return this.$mobx.spliceWithArray(x,O)}return this.$mobx.spliceWithArray(x,O,M)},w.prototype.spliceWithArray=function(x,O,M){return this.$mobx.spliceWithArray(x,O,M)},w.prototype.push=function(){for(var x=[],O=0;O<arguments.length;O++)x[O]=arguments[O];var M=this.$mobx;return M.spliceWithArray(M.values.length,0,x),M.values.length},w.prototype.pop=function(){return this.splice(Math.max(this.$mobx.values.length-1,0),1)[0]},w.prototype.shift=function(){return this.splice(0,1)[0]},w.prototype.unshift=function(){for(var x=[],O=0;O<arguments.length;O++)x[O]=arguments[O];var M=this.$mobx;return M.spliceWithArray(0,0,x),M.values.length},w.prototype.reverse=function(){var x=this.slice();return x.reverse.apply(x,arguments)},w.prototype.sort=function(x){var O=this.slice();return O.sort.apply(O,arguments)},w.prototype.remove=function(x){var O=this.$mobx.dehanceValues(this.$mobx.values).indexOf(x);return O>-1&&(this.splice(O,1),!0)},w.prototype.move=function(x,O){function M(V){if(V<0)throw new Error("[mobx.array] Index out of bounds: "+V+" is negative");var z=this.$mobx.values.length;if(V>=z)throw new Error("[mobx.array] Index out of bounds: "+V+" is not smaller than "+z)}if(M.call(this,x),M.call(this,O),x!==O){var I,B=this.$mobx.values;I=x<O?B.slice(0,x).concat(B.slice(x+1,O+1),[B[x]],B.slice(O+1)):B.slice(0,O).concat([B[x]],B.slice(O,x),B.slice(x+1)),this.replace(I)}},w.prototype.get=function(x){var O=this.$mobx;if(O){if(x<O.values.length)return O.atom.reportObserved(),O.dehanceValue(O.values[x]);console.warn("[mobx.array] Attempt to read an array index ("+x+") that is out of bounds ("+O.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},w.prototype.set=function(x,O){var M=this.$mobx,I=M.values;if(x<I.length){Dr(M.atom);var B=I[x];if(f(M)){var V=d(M,{type:"update",object:this,index:x,newValue:O});if(!V)return;O=V.newValue}(O=M.enhancer(O,B))!==B&&(I[x]=O,M.notifyArrayChildUpdate(x,O,B))}else{if(x!==I.length)throw new Error("[mobx.array] Index out of bounds, "+x+" is larger than "+I.length);M.spliceWithArray(x,0,[O])}},w}(W);D(Q.prototype,function(){return R(this.slice())}),Object.defineProperty(Q.prototype,"length",{enumerable:!1,configurable:!0,get:function(){return this.$mobx.getArrayLength()},set:function(b){this.$mobx.setArrayLength(b)}}),["every","filter","forEach","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toString","toLocaleString"].forEach(function(b){var w=Array.prototype[b];pr(typeof w=="function","Base function not defined on Array prototype: '"+b+"'"),Yi(Q.prototype,b,function(){return w.apply(this.peek(),arguments)})}),function(b,w){for(var x=0;x<w.length;x++)Yi(b,w[x],b[w[x]])}(Q.prototype,["constructor","intercept","observe","clear","concat","get","replace","toJS","toJSON","peek","find","findIndex","splice","spliceWithArray","push","pop","set","shift","unshift","reverse","sort","remove","move","toString","toLocaleString"]);var re=ee(0);function ee(b){return{enumerable:!1,configurable:!1,get:function(){return this.get(b)},set:function(w){this.set(b,w)}}}function ue(b){Object.defineProperty(Q.prototype,""+b,ee(b))}function de(b){for(var w=q;w<b;w++)ue(w);q=b}de(1e3);var se=Xa("ObservableArrayAdministration",Z);function be(b){return eo(b)&&se(b.$mobx)}var Le={},fe=function(b){function w(x,O,M,I){M===void 0&&(M="ObservableValue@"+kn()),I===void 0&&(I=!0);var B=b.call(this,M)||this;return B.enhancer=O,B.hasUnreportedChange=!1,B.dehancer=void 0,B.value=O(x,void 0,M),I&&y()&&p({type:"create",object:B,newValue:B.value}),B}return s(w,b),w.prototype.dehanceValue=function(x){return this.dehancer!==void 0?this.dehancer(x):x},w.prototype.set=function(x){var O=this.value;if((x=this.prepareNewValue(x))!==Le){var M=y();M&&m({type:"update",object:this,newValue:x,oldValue:O}),this.setNewValue(x),M&&C()}},w.prototype.prepareNewValue=function(x){if(Dr(this),f(this)){var O=d(this,{object:this,type:"update",newValue:x});if(!O)return Le;x=O.newValue}return x=this.enhancer(x,this.value,this.name),this.value!==x?x:Le},w.prototype.setNewValue=function(x){var O=this.value;this.value=x,this.reportChanged(),v(this)&&_(this,{type:"update",object:this,newValue:x,oldValue:O})},w.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},w.prototype.intercept=function(x){return h(this,x)},w.prototype.observe=function(x,O){return O&&x({object:this,type:"update",newValue:this.value,oldValue:void 0}),g(this,x)},w.prototype.toJSON=function(){return this.get()},w.prototype.toString=function(){return this.name+"["+this.value+"]"},w.prototype.valueOf=function(){return nc(this.get())},w}(u);fe.prototype[rc()]=fe.prototype.valueOf;var ce=Xa("ObservableValue",fe),Ee={m001:"It is not allowed to assign new values to @action fields",m002:"`runInAction` expects a function",m003:"`runInAction` expects a function without arguments",m004:"autorun expects a function",m005:"Warning: attempted to pass an action to autorun. Actions are untracked and will not trigger on state changes. Use `reaction` or wrap only your state modification code in an action.",m006:"Warning: attempted to pass an action to autorunAsync. Actions are untracked and will not trigger on state changes. Use `reaction` or wrap only your state modification code in an action.",m007:"reaction only accepts 2 or 3 arguments. If migrating from MobX 2, please provide an options object",m008:"wrapping reaction expression in `asReference` is no longer supported, use options object instead",m009:"@computed can only be used on getter functions, like: '@computed get myProps() { return ...; }'. It looks like it was used on a property.",m010:"@computed can only be used on getter functions, like: '@computed get myProps() { return ...; }'",m011:"First argument to `computed` should be an expression. If using computed as decorator, don't pass it arguments",m012:"computed takes one or two arguments if used as function",m013:"[mobx.expr] 'expr' should only be used inside other reactive functions.",m014:"extendObservable expected 2 or more arguments",m015:"extendObservable expects an object as first argument",m016:"extendObservable should not be used on maps, use map.merge instead",m017:"all arguments of extendObservable should be objects",m018:"extending an object with another observable (object) is not supported. Please construct an explicit propertymap, using `toJS` if need. See issue #540",m019:"[mobx.isObservable] isObservable(object, propertyName) is not supported for arrays and maps. Use map.has or array.length instead.",m020:"modifiers can only be used for individual object properties",m021:"observable expects zero or one arguments",m022:"@observable can not be used on getters, use @computed instead",m024:"whyRun() can only be used if a derivation is active, or by passing an computed value / reaction explicitly. If you invoked whyRun from inside a computation; the computation is currently suspended but re-evaluating because somebody requested its value.",m025:"whyRun can only be used on reactions and computed values",m026:"`action` can only be invoked on functions",m028:"It is not allowed to set `useStrict` when a derivation is running",m029:"INTERNAL ERROR only onBecomeUnobserved shouldn't be called twice in a row",m030a:"Since strict-mode is enabled, changing observed observable values outside actions is not allowed. Please wrap the code in an `action` if this change is intended. Tried to modify: ",m030b:"Side effects like changing state are not allowed at this point. Are you trying to modify state from, for example, the render function of a React component? Tried to modify: ",m031:"Computed values are not allowed to cause side effects by changing observables that are already being observed. Tried to modify: ",m032:`* This computation is suspended (not in use by any reaction) and won't run automatically.
	Didn't expect this computation to be suspended at this point?
	  1. Make sure this computation is used by a reaction (reaction, autorun, observer).
	  2. Check whether you are using this computation synchronously (in the same stack as they reaction that needs it).`,m033:"`observe` doesn't support the fire immediately property for observable maps.",m034:"`mobx.map` is deprecated, use `new ObservableMap` or `mobx.observable.map` instead",m035:"Cannot make the designated object observable; it is not extensible",m036:"It is not possible to get index atoms from arrays",m037:`Hi there! I'm sorry you have just run into an exception.
If your debugger ends up here, know that some reaction (like the render() of an observer component, autorun or reaction)
threw an exception and that mobx caught it, to avoid that it brings the rest of your application down.
The original cause of the exception (the code that caused this reaction to run (again)), is still in the stack.

However, more interesting is the actual stack trace of the error itself.
Hopefully the error is an instanceof Error, because in that case you can inspect the original stack of the error from where it was thrown.
See \`error.stack\` property, or press the very subtle "(...)" link you see near the console.error message that probably brought you here.
That stack is more interesting than the stack of this console.error itself.

If the exception you see is an exception you created yourself, make sure to use \`throw new Error("Oops")\` instead of \`throw "Oops"\`,
because the javascript environment will only preserve the original stack trace in the first form.

You can also make sure the debugger pauses the next time this very same exception is thrown by enabling "Pause on caught exception".
(Note that it might pause on many other, unrelated exception as well).

If that all doesn't help you out, feel free to open an issue https://github.com/mobxjs/mobx/issues!
`,m038:`Missing items in this list?
    1. Check whether all used values are properly marked as observable (use isObservable to verify)
    2. Make sure you didn't dereference values too early. MobX observes props, not primitives. E.g: use 'person.name' instead of 'name' in your computation.
`};function Ce(b){return Ee[b]}function ke(b,w){pr(typeof w=="function",Ce("m026")),pr(typeof b=="string"&&b.length>0,"actions should have valid names, got: '"+b+"'");var x=function(){return Ie(b,w,this,arguments)};return x.originalFn=w,x.isMobxAction=!0,x}function Ie(b,w,x,O){var M=function(I,B,V,z){var Y=y()&&!!I,X=0;if(Y){X=Date.now();var J=z&&z.length||0,ie=new Array(J);if(J>0)for(var he=0;he<J;he++)ie[he]=z[he];m({type:"action",name:I,fn:B,object:V,arguments:ie})}var ge=Es();return ws(),{prevDerivation:ge,prevAllowStateChanges:we(!0),notifySpy:Y,startTime:X}}(b,w,x,O);try{return w.apply(x,O)}finally{(function(I){xe(I.prevAllowStateChanges),$a(),Ka(I.prevDerivation),I.notifySpy&&C({time:Date.now()-I.startTime})})(M)}}function ve(b){pr(Wt.trackingDerivation===null,Ce("m028")),Wt.strictMode=b,Wt.allowStateChanges=!b}function we(b){var w=Wt.allowStateChanges;return Wt.allowStateChanges=b,w}function xe(b){Wt.allowStateChanges=b}function Fe(b,w,x,O,M){function I(B,V,z,Y,X){if(X===void 0&&(X=0),pr(M||wt(arguments),"This function is a decorator, but it wasn't invoked like a decorator"),z){Ai(B,"__mobxLazyInitializers")||Yi(B,"__mobxLazyInitializers",B.__mobxLazyInitializers&&B.__mobxLazyInitializers.slice()||[]);var J=z.value,ie=z.initializer;return B.__mobxLazyInitializers.push(function(ge){b(ge,V,ie?ie.call(ge):J,Y,z)}),{enumerable:O,configurable:!0,get:function(){return this.__mobxDidRunLazyInitializers!==!0&&at(this),w.call(this,V)},set:function(ge){this.__mobxDidRunLazyInitializers!==!0&&at(this),x.call(this,V,ge)}}}var he={enumerable:O,configurable:!0,get:function(){return this.__mobxInitializedProps&&this.__mobxInitializedProps[V]===!0||He(this,V,void 0,b,Y,z),w.call(this,V)},set:function(ge){this.__mobxInitializedProps&&this.__mobxInitializedProps[V]===!0?x.call(this,V,ge):He(this,V,ge,b,Y,z)}};return(arguments.length<3||arguments.length===5&&X<3)&&Object.defineProperty(B,V,he),he}return M?function(){if(wt(arguments))return I.apply(null,arguments);var B=arguments,V=arguments.length;return function(z,Y,X){return I(z,Y,X,B,V)}}:I}function He(b,w,x,O,M,I){Ai(b,"__mobxInitializedProps")||Yi(b,"__mobxInitializedProps",{}),b.__mobxInitializedProps[w]=!0,O(b,w,x,M,I)}function at(b){b.__mobxDidRunLazyInitializers!==!0&&b.__mobxLazyInitializers&&(Yi(b,"__mobxDidRunLazyInitializers",!0),b.__mobxDidRunLazyInitializers&&b.__mobxLazyInitializers.forEach(function(w){return w(b)}))}function wt(b){return(b.length===2||b.length===3)&&typeof b[1]=="string"}var it=Fe(function(b,w,x,O,M){var I=O&&O.length===1?O[0]:x.name||w||"<unnamed action>";Yi(b,w,$(I,x))},function(b){return this[b]},function(){pr(!1,Ce("m001"))},!1,!0),H=Fe(function(b,w,x){De(b,w,x)},function(b){return this[b]},function(){pr(!1,Ce("m001"))},!1,!1),$=function(b,w,x,O){return arguments.length===1&&typeof b=="function"?ke(b.name||"<unnamed action>",b):arguments.length===2&&typeof w=="function"?ke(b,w):arguments.length===1&&typeof b=="string"?ne(b):ne(w).apply(null,arguments)};function ne(b){return function(w,x,O){if(O&&typeof O.value=="function")return O.value=ke(b,O.value),O.enumerable=!1,O.configurable=!0,O;if(O!==void 0&&O.get!==void 0)throw new Error("[mobx] action is not expected to be used with getters");return it(b).apply(this,arguments)}}function Re(b){return typeof b=="function"&&b.isMobxAction===!0}function De(b,w,x){var O=function(){return Ie(w,x,b,arguments)};O.isMobxAction=!0,Yi(b,w,O)}$.bound=function(b,w,x){if(typeof b=="function"){var O=ke("<not yet bound action>",b);return O.autoBind=!0,O}return H.apply(null,arguments)};var Be=Object.prototype.toString;function Je(b,w){return Tt(b,w)}function Tt(b,w,x,O){if(b===w)return b!==0||1/b==1/w;if(b==null||w==null)return!1;if(b!=b)return w!=w;var M=typeof b;return(M==="function"||M==="object"||typeof w=="object")&&function(I,B,V,z){I=Lt(I),B=Lt(B);var Y=Be.call(I);if(Y!==Be.call(B))return!1;switch(Y){case"[object RegExp]":case"[object String]":return""+I==""+B;case"[object Number]":return+I!=+I?+B!=+B:+I==0?1/+I==1/B:+I==+B;case"[object Date]":case"[object Boolean]":return+I==+B;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(I)===Symbol.valueOf.call(B)}var X=Y==="[object Array]";if(!X){if(typeof I!="object"||typeof B!="object")return!1;var J=I.constructor,ie=B.constructor;if(J!==ie&&!(typeof J=="function"&&J instanceof J&&typeof ie=="function"&&ie instanceof ie)&&"constructor"in I&&"constructor"in B)return!1}z=z||[];for(var he=(V=V||[]).length;he--;)if(V[he]===I)return z[he]===B;if(V.push(I),z.push(B),X){if((he=I.length)!==B.length)return!1;for(;he--;)if(!Tt(I[he],B[he],V,z))return!1}else{var ge,le=Object.keys(I);if(he=le.length,Object.keys(B).length!==he)return!1;for(;he--;)if(!Vt(B,ge=le[he])||!Tt(I[ge],B[ge],V,z))return!1}return V.pop(),z.pop(),!0}(b,w,x,O)}function Lt(b){return be(b)?b.peek():Hi(b)?b.entries():Xs(b)?function(w){for(var x=[];;){var O=w.next();if(O.done)break;x.push(O.value)}return x}(b.entries()):b}function Vt(b,w){return Object.prototype.hasOwnProperty.call(b,w)}function Nt(b,w){return b===w}var Jt={identity:Nt,structural:function(b,w){return Je(b,w)},default:function(b,w){return function(x,O){return typeof x=="number"&&typeof O=="number"&&isNaN(x)&&isNaN(O)}(b,w)||Nt(b,w)}};function Er(b,w,x){var O,M,I;typeof b=="string"?(O=b,M=w,I=x):(O=b.name||"Autorun@"+kn(),M=b,I=w),pr(typeof M=="function",Ce("m004")),pr(Re(M)===!1,Ce("m005")),I&&(M=M.bind(I));var B=new zn(O,function(){this.track(V)});function V(){M(B)}return B.schedule(),B.getDisposer()}function Yt(b,w,x){var O;arguments.length>3&&ui(Ce("m007")),Ni(b)&&ui(Ce("m008")),(O=typeof x=="object"?x:{}).name=O.name||b.name||w.name||"Reaction@"+kn(),O.fireImmediately=x===!0||O.fireImmediately===!0,O.delay=O.delay||0,O.compareStructural=O.compareStructural||O.struct||!1,w=$(O.name,O.context?w.bind(O.context):w),O.context&&(b=b.bind(O.context));var M,I=!0,B=!1,V=O.equals?O.equals:O.compareStructural||O.struct?Jt.structural:Jt.default,z=new zn(O.name,function(){I||O.delay<1?Y():B||(B=!0,setTimeout(function(){B=!1,Y()},O.delay))});function Y(){if(!z.isDisposed){var X=!1;z.track(function(){var J=b(z);X=I||!V(M,J),M=J}),I&&O.fireImmediately&&w(M,z),I||X!==!0||w(M,z),I&&(I=!1)}}return z.schedule(),z.getDisposer()}var dt=function(){function b(w,x,O,M,I){this.derivation=w,this.scope=x,this.equals=O,this.dependenciesState=qr.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isPendingUnobservation=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=qr.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+kn(),this.value=new ul(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=Uo.NONE,this.name=M||"ComputedValue@"+kn(),I&&(this.setter=ke(M+"-setter",I))}return b.prototype.onBecomeStale=function(){(function(w){if(w.lowestObserverState===qr.UP_TO_DATE){w.lowestObserverState=qr.POSSIBLY_STALE;for(var x=w.observers,O=x.length;O--;){var M=x[O];M.dependenciesState===qr.UP_TO_DATE&&(M.dependenciesState=qr.POSSIBLY_STALE,M.isTracing!==Uo.NONE&&sc(M,w),M.onBecomeStale())}}})(this)},b.prototype.onBecomeUnobserved=function(){Qs(this),this.value=void 0},b.prototype.get=function(){pr(!this.isComputing,"Cycle detected in computation "+this.name,this.derivation),Wt.inBatch===0?(ws(),ll(this)&&(this.isTracing!==Uo.NONE&&""+this.name,this.value=this.computeValue(!1)),$a()):(sl(this),ll(this)&&this.trackAndCompute()&&function(x){if(x.lowestObserverState!==qr.STALE){x.lowestObserverState=qr.STALE;for(var O=x.observers,M=O.length;M--;){var I=O[M];I.dependenciesState===qr.POSSIBLY_STALE?I.dependenciesState=qr.STALE:I.dependenciesState===qr.UP_TO_DATE&&(x.lowestObserverState=qr.UP_TO_DATE)}}}(this));var w=this.value;if(Zs(w))throw w.cause;return w},b.prototype.peek=function(){var w=this.computeValue(!1);if(Zs(w))throw w.cause;return w},b.prototype.set=function(w){if(this.setter){pr(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,w)}finally{this.isRunningSetter=!1}}else pr(!1,"[ComputedValue '"+this.name+"'] It is not possible to assign a new value to a computed value.")},b.prototype.trackAndCompute=function(){y()&&p({object:this.scope,type:"compute",fn:this.derivation});var w=this.value,x=this.dependenciesState===qr.NOT_TRACKING,O=this.value=this.computeValue(!0);return x||Zs(w)||Zs(O)||!this.equals(w,O)},b.prototype.computeValue=function(w){var x;if(this.isComputing=!0,Wt.computationDepth++,w)x=lc(this,this.derivation,this.scope);else try{x=this.derivation.call(this.scope)}catch(O){x=new ul(O)}return Wt.computationDepth--,this.isComputing=!1,x},b.prototype.observe=function(w,x){var O=this,M=!0,I=void 0;return Er(function(){var B=O.get();if(!M||x){var V=Es();w({type:"update",object:O,newValue:B,oldValue:I}),Ka(V)}M=!1,I=B})},b.prototype.toJSON=function(){return this.get()},b.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},b.prototype.valueOf=function(){return nc(this.get())},b.prototype.whyRun=function(){var w=!!Wt.trackingDerivation,x=Ya(this.isComputing?this.newObserving:this.observing).map(function(M){return M.name}),O=Ya(ch(this).map(function(M){return M.name}));return`
WhyRun? computation '`+this.name+`':
 * Running because: `+(w?"[active] the value of this computation is needed by a reaction":this.isComputing?"[get] The value of this computed was requested outside a reaction":"[idle] not running at the moment")+`
`+(this.dependenciesState===qr.NOT_TRACKING?Ce("m032"):` * This computation will re-run if any of the following observables changes:
    `+Ys(x)+`
    `+(this.isComputing&&w?" (... or any observable accessed during the remainder of the current run)":"")+`
    `+Ce("m038")+`

  * If the outcome of this computation changes, the following observers will be re-run:
    `+Ys(O)+`
`)},b}();dt.prototype[rc()]=dt.prototype.valueOf;var me=Xa("ComputedValue",dt),nt=function(){function b(w,x){this.target=w,this.name=x,this.values={},this.changeListeners=null,this.interceptors=null}return b.prototype.observe=function(w,x){return pr(x!==!0,"`observe` doesn't support the fire immediately property for observable objects."),g(this,w)},b.prototype.intercept=function(w){return h(this,w)},b}();function lt(b,w){if(nr(b)&&b.hasOwnProperty("$mobx"))return b.$mobx;pr(Object.isExtensible(b),Ce("m035")),oa(b)||(w=(b.constructor.name||"ObservableObject")+"@"+kn()),w||(w="ObservableObject@"+kn());var x=new nt(b,w);return Cu(b,"$mobx",x),x}function ct(b,w,x,O){if(b.values[w]&&!me(b.values[w]))return pr("value"in x,"The property "+w+" in "+b.name+" is already observable, cannot redefine it as computed property"),void(b.target[w]=x.value);if("value"in x)if(Ni(x.value)){var M=x.value;ft(b,w,M.initialValue,M.enhancer)}else Re(x.value)&&x.value.autoBind===!0?De(b.target,w,x.value.originalFn):me(x.value)?function(I,B,V){var z=I.name+"."+B;V.name=z,V.scope||(V.scope=I.target),I.values[B]=V,Object.defineProperty(I.target,B,mr(B))}(b,w,x.value):ft(b,w,x.value,O);else Xt(b,w,x.get,x.set,Jt.default,!0)}function ft(b,w,x,O){if(ji(b.target,w),f(b)){var M=d(b,{object:b.target,name:w,type:"add",newValue:x});if(!M)return;x=M.newValue}x=(b.values[w]=new fe(x,O,b.name+"."+w,!1)).value,Object.defineProperty(b.target,w,function(I){return pt[I]||(pt[I]={configurable:!0,enumerable:!0,get:function(){return this.$mobx.values[I].get()},set:function(B){Rr(this,I,B)}})}(w)),function(I,B,V,z){var Y=v(I),X=y(),J=Y||X?{type:"add",object:B,name:V,newValue:z}:null;X&&m(J),Y&&_(I,J),X&&C()}(b,b.target,w,x)}function Xt(b,w,x,O,M,I){I&&ji(b.target,w),b.values[w]=new dt(x,b.target,M,b.name+"."+w,O),I&&Object.defineProperty(b.target,w,mr(w))}var pt={},Qt={};function mr(b){return Qt[b]||(Qt[b]={configurable:!0,enumerable:!1,get:function(){return this.$mobx.values[b].get()},set:function(w){return this.$mobx.values[b].set(w)}})}function Rr(b,w,x){var O=b.$mobx,M=O.values[w];if(f(O)){if(!(V=d(O,{type:"update",object:b,name:w,newValue:x})))return;x=V.newValue}if((x=M.prepareNewValue(x))!==Le){var I=v(O),B=y(),V=I||B?{type:"update",object:b,oldValue:M.value,name:w,newValue:x}:null;B&&m(V),M.setNewValue(x),I&&_(O,V),B&&C()}}var ar=Xa("ObservableObjectAdministration",nt);function nr(b){return!!eo(b)&&(at(b),ar(b.$mobx))}function tr(b,w){if(b==null)return!1;if(w!==void 0){if(be(b)||Hi(b))throw new Error(Ce("m019"));if(nr(b)){var x=b.$mobx;return x.values&&!!x.values[w]}return!1}return nr(b)||!!b.$mobx||c(b)||Kn(b)||me(b)}function lr(b){return pr(!!b,":("),Fe(function(w,x,O,M,I){ji(w,x),pr(!I||!I.get,Ce("m022")),ft(lt(w,void 0),x,O,b)},function(w){var x=this.$mobx.values[w];if(x!==void 0)return x.get()},function(w,x){Rr(this,w,x)},!0,!1)}function Gr(b){for(var w=[],x=1;x<arguments.length;x++)w[x-1]=arguments[x];return In(b,Pi,w)}function fn(b){for(var w=[],x=1;x<arguments.length;x++)w[x-1]=arguments[x];return In(b,un,w)}function In(b,w,x){pr(arguments.length>=2,Ce("m014")),pr(typeof b=="object",Ce("m015")),pr(!Hi(b),Ce("m016")),x.forEach(function(z){pr(typeof z=="object",Ce("m017")),pr(!tr(z),Ce("m018"))});for(var O=lt(b),M={},I=x.length-1;I>=0;I--){var B=x[I];for(var V in B)if(M[V]!==!0&&Ai(B,V)){if(M[V]=!0,b===B&&!il(b,V))continue;ct(O,V,Object.getOwnPropertyDescriptor(B,V),w)}}return b}var Un=lr(Pi),hn=lr(vi),$n=lr(un),vn=lr(qn),Ei=lr(Ca),Li={box:function(b,w){return arguments.length>2&&Tn("box"),new fe(b,Pi,w)},shallowBox:function(b,w){return arguments.length>2&&Tn("shallowBox"),new fe(b,un,w)},array:function(b,w){return arguments.length>2&&Tn("array"),new Q(b,Pi,w)},shallowArray:function(b,w){return arguments.length>2&&Tn("shallowArray"),new Q(b,un,w)},map:function(b,w){return arguments.length>2&&Tn("map"),new Pa(b,Pi,w)},shallowMap:function(b,w){return arguments.length>2&&Tn("shallowMap"),new Pa(b,un,w)},object:function(b,w){arguments.length>2&&Tn("object");var x={};return lt(x,w),Gr(x,b),x},shallowObject:function(b,w){arguments.length>2&&Tn("shallowObject");var x={};return lt(x,w),fn(x,b),x},ref:function(){return arguments.length<2?_o(un,arguments[0]):$n.apply(null,arguments)},shallow:function(){return arguments.length<2?_o(vi,arguments[0]):hn.apply(null,arguments)},deep:function(){return arguments.length<2?_o(Pi,arguments[0]):Un.apply(null,arguments)},struct:function(){return arguments.length<2?_o(qn,arguments[0]):vn.apply(null,arguments)}},Fr=function(b){if(b===void 0&&(b=void 0),typeof arguments[1]=="string")return Un.apply(null,arguments);if(pr(arguments.length<=1,Ce("m021")),pr(!Ni(b),Ce("m020")),tr(b))return b;var w=Pi(b,0,void 0);return w!==b?w:Fr.box(b)};function Tn(b){ui("Expected one or two arguments to observable."+b+". Did you accidentally try to use observable."+b+" as decorator?")}function Ni(b){return typeof b=="object"&&b!==null&&b.isMobxModifierDescriptor===!0}function _o(b,w){return pr(!Ni(w),"Modifiers cannot be nested"),{isMobxModifierDescriptor:!0,initialValue:w,enhancer:b}}function Pi(b,w,x){return Ni(b)&&ui("You tried to assign a modifier wrapped value to a collection, please define modifiers when creating the collection, not when modifying it"),tr(b)?b:Array.isArray(b)?Fr.array(b,x):oa(b)?Fr.object(b,x):Xs(b)?Fr.map(b,x):b}function vi(b,w,x){return Ni(b)&&ui("You tried to assign a modifier wrapped value to a collection, please define modifiers when creating the collection, not when modifying it"),b==null||nr(b)||be(b)||Hi(b)?b:Array.isArray(b)?Fr.shallowArray(b,x):oa(b)?Fr.shallowObject(b,x):Xs(b)?Fr.shallowMap(b,x):ui("The shallow modifier / decorator can only used in combination with arrays, objects and maps")}function un(b){return b}function qn(b,w,x){if(Je(b,w))return w;if(tr(b))return b;if(Array.isArray(b))return new Q(b,qn,x);if(Xs(b))return new Pa(b,qn,x);if(oa(b)){var O={};return lt(O,x),In(O,qn,[b]),O}return b}function Ca(b,w,x){return Je(b,w)?w:b}function pi(b,w){w===void 0&&(w=void 0),ws();try{return b.apply(w)}finally{$a()}}Object.keys(Li).forEach(function(b){return Fr[b]=Li[b]}),Fr.deep.struct=Fr.struct,Fr.ref.struct=function(){return arguments.length<2?_o(Ca,arguments[0]):Ei.apply(null,arguments)};var Su={},Pa=function(){function b(w,x,O){x===void 0&&(x=Pi),O===void 0&&(O="ObservableMap@"+kn()),this.enhancer=x,this.name=O,this.$mobx=Su,this._data=Object.create(null),this._hasMap=Object.create(null),this._keys=new Q(void 0,un,this.name+".keys()",!0),this.interceptors=null,this.changeListeners=null,this.dehancer=void 0,this.merge(w)}return b.prototype._has=function(w){return this._data[w]!==void 0},b.prototype.has=function(w){return!!this.isValidKey(w)&&(w=""+w,this._hasMap[w]?this._hasMap[w].get():this._updateHasMapEntry(w,!1).get())},b.prototype.set=function(w,x){this.assertValidKey(w),w=""+w;var O=this._has(w);if(f(this)){var M=d(this,{type:O?"update":"add",object:this,newValue:x,name:w});if(!M)return this;x=M.newValue}return O?this._updateValue(w,x):this._addValue(w,x),this},b.prototype.delete=function(w){var x=this;if(this.assertValidKey(w),w=""+w,f(this)&&!(I=d(this,{type:"delete",object:this,name:w})))return!1;if(this._has(w)){var O=y(),M=v(this),I=M||O?{type:"delete",object:this,oldValue:this._data[w].value,name:w}:null;return O&&m(I),pi(function(){x._keys.remove(w),x._updateHasMapEntry(w,!1),x._data[w].setNewValue(void 0),x._data[w]=void 0}),M&&_(this,I),O&&C(),!0}return!1},b.prototype._updateHasMapEntry=function(w,x){var O=this._hasMap[w];return O?O.setNewValue(x):O=this._hasMap[w]=new fe(x,un,this.name+"."+w+"?",!1),O},b.prototype._updateValue=function(w,x){var O=this._data[w];if((x=O.prepareNewValue(x))!==Le){var M=y(),I=v(this),B=I||M?{type:"update",object:this,oldValue:O.value,name:w,newValue:x}:null;M&&m(B),O.setNewValue(x),I&&_(this,B),M&&C()}},b.prototype._addValue=function(w,x){var O=this;pi(function(){var V=O._data[w]=new fe(x,O.enhancer,O.name+"."+w,!1);x=V.value,O._updateHasMapEntry(w,!0),O._keys.push(w)});var M=y(),I=v(this),B=I||M?{type:"add",object:this,name:w,newValue:x}:null;M&&m(B),I&&_(this,B),M&&C()},b.prototype.get=function(w){return w=""+w,this.has(w)?this.dehanceValue(this._data[w].get()):this.dehanceValue(void 0)},b.prototype.dehanceValue=function(w){return this.dehancer!==void 0?this.dehancer(w):w},b.prototype.keys=function(){return R(this._keys.slice())},b.prototype.values=function(){return R(this._keys.map(this.get,this))},b.prototype.entries=function(){var w=this;return R(this._keys.map(function(x){return[x,w.get(x)]}))},b.prototype.forEach=function(w,x){var O=this;this.keys().forEach(function(M){return w.call(x,O.get(M),M,O)})},b.prototype.merge=function(w){var x=this;return Hi(w)&&(w=w.toJS()),pi(function(){oa(w)?Object.keys(w).forEach(function(O){return x.set(O,w[O])}):Array.isArray(w)?w.forEach(function(O){var M=O[0],I=O[1];return x.set(M,I)}):Xs(w)?w.forEach(function(O,M){return x.set(M,O)}):w!=null&&ui("Cannot initialize map from "+w)}),this},b.prototype.clear=function(){var w=this;pi(function(){rf(function(){w.keys().forEach(w.delete,w)})})},b.prototype.replace=function(w){var x=this;return pi(function(){var O,M=oa(O=w)?Object.keys(O):Array.isArray(O)?O.map(function(I){return I[0]}):Xs(O)?Array.from(O.keys()):Hi(O)?O.keys():ui("Cannot get keys from "+O);x.keys().filter(function(I){return M.indexOf(I)===-1}).forEach(function(I){return x.delete(I)}),x.merge(w)}),this},Object.defineProperty(b.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),b.prototype.toJS=function(){var w=this,x={};return this.keys().forEach(function(O){return x[O]=w.get(O)}),x},b.prototype.toJSON=function(){return this.toJS()},b.prototype.isValidKey=function(w){return w!=null&&(typeof w=="string"||typeof w=="number"||typeof w=="boolean")},b.prototype.assertValidKey=function(w){if(!this.isValidKey(w))throw new Error("[mobx.map] Invalid key: '"+w+"', only strings, numbers and booleans are accepted as key in observable maps.")},b.prototype.toString=function(){var w=this;return this.name+"[{ "+this.keys().map(function(x){return x+": "+w.get(x)}).join(", ")+" }]"},b.prototype.observe=function(w,x){return pr(x!==!0,Ce("m033")),g(this,w)},b.prototype.intercept=function(w){return h(this,w)},b}();D(Pa.prototype,function(){return this.entries()});var Hi=Xa("ObservableMap",Pa),Ha=[];function ia(){return typeof window<"u"?window:Mi.g}function kn(){return++Wt.mobxGuid}function ui(b,w){throw pr(!1,b,w),"X"}function pr(b,w,x){if(!b)throw new Error("[mobx] Invariant failed: "+w+(x?" in '"+x+"'":""))}Object.freeze(Ha);var Aa=[];function lo(b){return Aa.indexOf(b)===-1&&(Aa.push(b),console.error("[mobx] Deprecated: "+b),!0)}function Vr(b){var w=!1;return function(){if(!w)return w=!0,b.apply(this,arguments)}}var $r=function(){};function Ya(b){var w=[];return b.forEach(function(x){w.indexOf(x)===-1&&w.push(x)}),w}function Ys(b,w,x){return w===void 0&&(w=100),x===void 0&&(x=" - "),b?b.slice(0,w).join(x)+(b.length>w?" (... and "+(b.length-w)+"more)":""):""}function eo(b){return b!==null&&typeof b=="object"}function oa(b){if(b===null||typeof b!="object")return!1;var w=Object.getPrototypeOf(b);return w===Object.prototype||w===null}function Tu(){for(var b=arguments[0],w=1,x=arguments.length;w<x;w++){var O=arguments[w];for(var M in O)Ai(O,M)&&(b[M]=O[M])}return b}var Dn=Object.prototype.hasOwnProperty;function Ai(b,w){return Dn.call(b,w)}function Yi(b,w,x){Object.defineProperty(b,w,{enumerable:!1,writable:!0,configurable:!0,value:x})}function Cu(b,w,x){Object.defineProperty(b,w,{enumerable:!1,writable:!1,configurable:!0,value:x})}function il(b,w){var x=Object.getOwnPropertyDescriptor(b,w);return!x||x.configurable!==!1&&x.writable!==!1}function ji(b,w){pr(il(b,w),"Cannot make property '"+w+"' observable, it is not configurable and writable in the target object")}function Xa(b,w){var x="isMobX"+b;return w.prototype[x]=!0,function(O){return eo(O)&&O[x]===!0}}function Xs(b){return ia().Map!==void 0&&b instanceof ia().Map}function rc(){return typeof Symbol=="function"&&Symbol.toPrimitive||"@@toPrimitive"}function nc(b){return b===null?null:typeof b=="object"?""+b:b}var qr,Uo,co=["mobxGuid","resetId","spyListeners","strictMode","runId"],ic=function(){this.version=5,this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.strictMode=!1,this.resetId=0,this.spyListeners=[],this.globalReactionErrorHandlers=[]},Wt=new ic,$s=!1,oc=!1,Ra=!1,Pu=ia();function wo(b,w){if(typeof b=="object"&&b!==null){if(be(b))return pr(w===void 0,Ce("m036")),b.$mobx.atom;if(Hi(b)){var x=b;return w===void 0?wo(x._keys):(pr(!!(O=x._data[w]||x._hasMap[w]),"the entry '"+w+"' does not exist in the observable map '"+aa(b)+"'"),O)}var O;if(at(b),w&&!b.$mobx&&b[w],nr(b))return w?(pr(!!(O=b.$mobx.values[w]),"no observable property '"+w+"' found on the observable object '"+aa(b)+"'"),O):ui("please specify a property");if(c(b)||me(b)||Kn(b))return b}else if(typeof b=="function"&&Kn(b.$mobx))return b.$mobx;return ui("Cannot obtain atom from "+b)}function Kr(b,w){return pr(b,"Expecting some object"),w!==void 0?Kr(wo(b,w)):c(b)||me(b)||Kn(b)||Hi(b)?b:(at(b),b.$mobx?b.$mobx:void pr(!1,"Cannot obtain administration from "+b))}function aa(b,w){return(w!==void 0?wo(b,w):nr(b)||Hi(b)?Kr(b):wo(b)).name}function ol(b,w){return lh(wo(b,w))}function lh(b){var w={name:b.name};return b.observing&&b.observing.length>0&&(w.dependencies=Ya(b.observing).map(lh)),w}function ac(b){var w={name:b.name};return function(x){return x.observers&&x.observers.length>0}(b)&&(w.observers=ch(b).map(ac)),w}function ch(b){return b.observers}function tf(b,w){var x=b.observers.length;x&&(b.observersIndexes[w.__mapid]=x),b.observers[x]=w,b.lowestObserverState>w.dependenciesState&&(b.lowestObserverState=w.dependenciesState)}function al(b,w){if(b.observers.length===1)b.observers.length=0,Ks(b);else{var x=b.observers,O=b.observersIndexes,M=x.pop();if(M!==w){var I=O[w.__mapid]||0;I?O[M.__mapid]=I:delete O[M.__mapid],x[I]=M}delete O[w.__mapid]}}function Ks(b){b.isPendingUnobservation||(b.isPendingUnobservation=!0,Wt.pendingUnobservations.push(b))}function ws(){Wt.inBatch++}function $a(){if(--Wt.inBatch==0){fc();for(var b=Wt.pendingUnobservations,w=0;w<b.length;w++){var x=b[w];x.isPendingUnobservation=!1,x.observers.length===0&&x.onBecomeUnobserved()}Wt.pendingUnobservations=[]}}function sl(b){var w=Wt.trackingDerivation;w!==null?w.runId!==b.lastAccessedBy&&(b.lastAccessedBy=w.runId,w.newObserving[w.unboundDepsCount++]=b):b.observers.length===0&&Ks(b)}function sc(b,w){if(""+b.name+w.name,b.isTracing===Uo.BREAK){var x=[];uc(ol(b),x,1),new Function(`debugger;
/*
Tracing '`+b.name+`'

You are entering this break point because derivation '`+b.name+"' is being traced and '"+w.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(b instanceof dt?b.derivation.toString():"")+`

The dependencies for this derivation are:

`+x.join(`
`)+`
*/
    `)()}}function uc(b,w,x){w.length>=1e3?w.push("(and many more)"):(w.push(""+new Array(x).join("	")+b.name),b.dependencies&&b.dependencies.forEach(function(O){return uc(O,w,x+1)}))}Pu.__mobxInstanceCount?(Pu.__mobxInstanceCount++,setTimeout(function(){$s||oc||Ra||(Ra=!0,console.warn("[mobx] Warning: there are multiple mobx instances active. This might lead to unexpected results. See https://github.com/mobxjs/mobx/issues/1082 for details."))},1)):Pu.__mobxInstanceCount=1,function(b){b[b.NOT_TRACKING=-1]="NOT_TRACKING",b[b.UP_TO_DATE=0]="UP_TO_DATE",b[b.POSSIBLY_STALE=1]="POSSIBLY_STALE",b[b.STALE=2]="STALE"}(qr||(qr={})),function(b){b[b.NONE=0]="NONE",b[b.LOG=1]="LOG",b[b.BREAK=2]="BREAK"}(Uo||(Uo={}));var ul=function(b){this.cause=b};function Zs(b){return b instanceof ul}function ll(b){switch(b.dependenciesState){case qr.UP_TO_DATE:return!1;case qr.NOT_TRACKING:case qr.STALE:return!0;case qr.POSSIBLY_STALE:for(var w=Es(),x=b.observing,O=x.length,M=0;M<O;M++){var I=x[M];if(me(I)){try{I.get()}catch{return Ka(w),!0}if(b.dependenciesState===qr.STALE)return Ka(w),!0}}return fh(b),Ka(w),!1}}function pn(){return Wt.trackingDerivation!==null}function Dr(b){var w=b.observers.length>0;Wt.computationDepth>0&&w&&ui(Ce("m031")+b.name),!Wt.allowStateChanges&&w&&ui(Ce(Wt.strictMode?"m030a":"m030b")+b.name)}function lc(b,w,x){fh(b),b.newObserving=new Array(b.observing.length+100),b.unboundDepsCount=0,b.runId=++Wt.runId;var O,M=Wt.trackingDerivation;Wt.trackingDerivation=b;try{O=w.call(x)}catch(I){O=new ul(I)}return Wt.trackingDerivation=M,function(I){for(var B=I.observing,V=I.observing=I.newObserving,z=qr.UP_TO_DATE,Y=0,X=I.unboundDepsCount,J=0;J<X;J++)(ie=V[J]).diffValue===0&&(ie.diffValue=1,Y!==J&&(V[Y]=ie),Y++),ie.dependenciesState>z&&(z=ie.dependenciesState);for(V.length=Y,I.newObserving=null,X=B.length;X--;)(ie=B[X]).diffValue===0&&al(ie,I),ie.diffValue=0;for(;Y--;){var ie;(ie=V[Y]).diffValue===1&&(ie.diffValue=0,tf(ie,I))}z!==qr.UP_TO_DATE&&(I.dependenciesState=z,I.onBecomeStale())}(b),O}function Qs(b){var w=b.observing;b.observing=[];for(var x=w.length;x--;)al(w[x],b);b.dependenciesState=qr.NOT_TRACKING}function rf(b){var w=Es(),x=b();return Ka(w),x}function Es(){var b=Wt.trackingDerivation;return Wt.trackingDerivation=null,b}function Ka(b){Wt.trackingDerivation=b}function fh(b){if(b.dependenciesState!==qr.UP_TO_DATE){b.dependenciesState=qr.UP_TO_DATE;for(var w=b.observing,x=w.length;x--;)w[x].lowestObserverState=qr.UP_TO_DATE}}function Od(b){return b}function Js(b){switch(b.length){case 0:return Wt.trackingDerivation;case 1:return wo(b[0]);case 2:return wo(b[0],b[1])}}var zn=function(){function b(w,x){w===void 0&&(w="Reaction@"+kn()),this.name=w,this.onInvalidate=x,this.observing=[],this.newObserving=[],this.dependenciesState=qr.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+kn(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=Uo.NONE}return b.prototype.onBecomeStale=function(){this.schedule()},b.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Wt.pendingReactions.push(this),fc())},b.prototype.isScheduled=function(){return this._isScheduled},b.prototype.runReaction=function(){this.isDisposed||(ws(),this._isScheduled=!1,ll(this)&&(this._isTrackPending=!0,this.onInvalidate(),this._isTrackPending&&y()&&p({object:this,type:"scheduled-reaction"})),$a())},b.prototype.track=function(w){ws();var x,O=y();O&&(x=Date.now(),m({object:this,type:"reaction",fn:w})),this._isRunning=!0;var M=lc(this,w,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&Qs(this),Zs(M)&&this.reportExceptionInDerivation(M.cause),O&&C({time:Date.now()-x}),$a()},b.prototype.reportExceptionInDerivation=function(w){var x=this;if(this.errorHandler)this.errorHandler(w,this);else{var O="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this,M=Ce("m037");console.error(O||M,w),y()&&p({type:"error",message:O,error:w,object:this}),Wt.globalReactionErrorHandlers.forEach(function(I){return I(w,x)})}},b.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(ws(),Qs(this),$a()))},b.prototype.getDisposer=function(){var w=this.dispose.bind(this);return w.$mobx=this,w.onError=cc,w},b.prototype.toString=function(){return"Reaction["+this.name+"]"},b.prototype.whyRun=function(){var w=Ya(this._isRunning?this.newObserving:this.observing).map(function(x){return x.name});return`
WhyRun? reaction '`+this.name+`':
 * Status: [`+(this.isDisposed?"stopped":this._isRunning?"running":this.isScheduled()?"scheduled":"idle")+`]
 * This reaction will re-run if any of the following observables changes:
    `+Ys(w)+`
    `+(this._isRunning?" (... or any observable accessed during the remainder of the current run)":"")+`
	`+Ce("m038")+`
`},b.prototype.trace=function(w){w===void 0&&(w=!1),function(){for(var x=[],O=0;O<arguments.length;O++)x[O]=arguments[O];var M=!1;typeof x[x.length-1]=="boolean"&&(M=x.pop());var I=Js(x);if(!I)return ui("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");I.isTracing===Uo.NONE&&""+I.name,I.isTracing=M?Uo.BREAK:Uo.LOG}(this,w)},b}();function cc(b){pr(this&&this.$mobx&&Kn(this.$mobx),"Invalid `this`"),pr(!this.$mobx.errorHandler,"Only one onErrorHandler can be registered"),this.$mobx.errorHandler=b}var to=100,eu=function(b){return b()};function fc(){Wt.inBatch>0||Wt.isRunningReactions||eu(Fi)}function Fi(){Wt.isRunningReactions=!0;for(var b=Wt.pendingReactions,w=0;b.length>0;){++w===to&&(console.error("Reaction doesn't converge to a stable state after "+to+" iterations. Probably there is a cycle in the reactive function: "+b[0]),b.splice(0));for(var x=b.splice(0),O=0,M=x.length;O<M;O++)x[O].runReaction()}Wt.isRunningReactions=!1}var Kn=Xa("Reaction",zn);function Ia(b){return Fe(function(w,x,O,M,I){pr(I!==void 0,Ce("m009")),pr(typeof I.get=="function",Ce("m010")),Xt(lt(w,""),x,I.get,I.set,b,!1)},function(w){var x=this.$mobx.values[w];if(x!==void 0)return x.get()},function(w,x){this.$mobx.values[w].set(x)},!1,!1)}var ka=Ia(Jt.default),sa=Ia(Jt.structural),ut=function(b,w,x){if(typeof w=="string")return ka.apply(null,arguments);pr(typeof b=="function",Ce("m011")),pr(arguments.length<3,Ce("m012"));var O=typeof w=="object"?w:{};O.setter=typeof w=="function"?w:O.setter;var M=O.equals?O.equals:O.compareStructural||O.struct?Jt.structural:Jt.default;return new dt(b,O.context,M,O.name||b.name||"",O.setter)};function gt(b,w,x){function O(X){return w&&x.push([b,X]),X}if(w===void 0&&(w=!0),x===void 0&&(x=[]),tr(b)){if(w&&x===null&&(x=[]),w&&b!==null&&typeof b=="object"){for(var M=0,I=x.length;M<I;M++)if(x[M][0]===b)return x[M][1]}if(be(b)){var B=O([]),V=b.map(function(X){return gt(X,w,x)});for(B.length=V.length,M=0,I=V.length;M<I;M++)B[M]=V[M];return B}if(nr(b)){for(var z in B=O({}),b)B[z]=gt(b[z],w,x);return B}if(Hi(b)){var Y=O({});return b.forEach(function(X,J){return Y[J]=gt(X,w,x)}),Y}if(ce(b))return gt(b.get(),w,x)}return b}ut.struct=sa,ut.equals=Ia;var yt={allowStateChanges:function(b,w){var x,O=we(b);try{x=w()}finally{xe(O)}return x},deepEqual:Je,getAtom:wo,getDebugName:aa,getDependencyTree:ol,getAdministration:Kr,getGlobalState:function(){return Wt},getObserverTree:function(b,w){return ac(wo(b,w))},interceptReads:function(b,w,x){var O;if(Hi(b)||be(b)||ce(b))O=Kr(b);else{if(!nr(b))return ui("Expected observable map, object or array as first array");if(typeof w!="string")return ui("InterceptReads can only be used with a specific property, not with an object in general");O=Kr(b,w)}return O.dehancer!==void 0?ui("An intercept reader was already established"):(O.dehancer=typeof w=="function"?w:x,function(){O.dehancer=void 0})},isComputingDerivation:pn,isSpyEnabled:y,onReactionError:function(b){return Wt.globalReactionErrorHandlers.push(b),function(){var w=Wt.globalReactionErrorHandlers.indexOf(b);w>=0&&Wt.globalReactionErrorHandlers.splice(w,1)}},reserveArrayBuffer:de,resetGlobalState:function(){Wt.resetId++;var b=new ic;for(var w in b)co.indexOf(w)===-1&&(Wt[w]=b[w]);Wt.allowStateChanges=!Wt.strictMode},isolateGlobalState:function(){oc=!0,ia().__mobxInstanceCount--},shareGlobalState:function(){lo("Using `shareGlobalState` is not recommended, use peer dependencies instead. See https://github.com/mobxjs/mobx/issues/1082 for details."),$s=!0;var b=ia(),w=Wt;if(b.__mobservableTrackingStack||b.__mobservableViewStack)throw new Error("[mobx] An incompatible version of mobservable is already loaded.");if(b.__mobxGlobal&&b.__mobxGlobal.version!==w.version)throw new Error("[mobx] An incompatible version of mobx is already loaded.");b.__mobxGlobal?Wt=b.__mobxGlobal:b.__mobxGlobal=w},spyReport:p,spyReportEnd:C,spyReportStart:m,setReactionScheduler:function(b){var w=eu;eu=function(x){return b(function(){return w(x)})}}},Gt={Reaction:zn,untracked:rf,Atom:l,BaseAtom:u,useStrict:ve,isStrictModeEnabled:function(){return Wt.strictMode},spy:P,comparer:Jt,asReference:function(b){return lo("asReference is deprecated, use observable.ref instead"),Fr.ref(b)},asFlat:function(b){return lo("asFlat is deprecated, use observable.shallow instead"),Fr.shallow(b)},asStructure:function(b){return lo("asStructure is deprecated. Use observable.struct, computed.struct or reaction options instead."),Fr.struct(b)},asMap:function(b){return lo("asMap is deprecated, use observable.map or observable.shallowMap instead"),Fr.map(b||{})},isModifierDescriptor:Ni,isObservableObject:nr,isBoxedObservable:ce,isObservableArray:be,ObservableMap:Pa,isObservableMap:Hi,map:function(b){return lo("`mobx.map` is deprecated, use `new ObservableMap` or `mobx.observable.map` instead"),Fr.map(b)},transaction:pi,observable:Fr,computed:ut,isObservable:tr,isComputed:function(b,w){if(b==null)return!1;if(w!==void 0){if(nr(b)===!1||!b.$mobx.values[w])return!1;var x=wo(b,w);return me(x)}return me(b)},extendObservable:Gr,extendShallowObservable:fn,observe:function(b,w,x,O){return typeof x=="function"?function(M,I,B,V){return Kr(M,I).observe(B,V)}(b,w,x,O):function(M,I,B){return Kr(M).observe(I,B)}(b,w,x)},intercept:function(b,w,x){return typeof x=="function"?function(O,M,I){return Kr(O,M).intercept(I)}(b,w,x):function(O,M){return Kr(O).intercept(M)}(b,w)},autorun:Er,autorunAsync:function(b,w,x,O){var M,I,B,V;typeof b=="string"?(M=b,I=w,B=x,V=O):(M=b.name||"AutorunAsync@"+kn(),I=b,B=w,V=x),pr(Re(I)===!1,Ce("m006")),B===void 0&&(B=1),V&&(I=I.bind(V));var z=!1,Y=new zn(M,function(){z||(z=!0,setTimeout(function(){z=!1,Y.isDisposed||Y.track(X)},B))});function X(){I(Y)}return Y.schedule(),Y.getDisposer()},when:function(b,w,x,O){var M,I,B,V;return typeof b=="string"?(M=b,I=w,B=x,V=O):(M="When@"+kn(),I=b,B=w,V=x),Er(M,function(z){if(I.call(V)){z.dispose();var Y=Es();B.call(V),Ka(Y)}})},reaction:Yt,action:$,isAction:Re,runInAction:function(b,w,x){var O=typeof b=="string"?b:b.name||"<unnamed action>",M=typeof b=="function"?b:w,I=typeof b=="function"?w:x;return pr(typeof M=="function",Ce("m002")),pr(M.length===0,Ce("m003")),pr(typeof O=="string"&&O.length>0,"actions should have valid names, got: '"+O+"'"),Ie(O,M,I,void 0)},expr:function(b,w){return pn()||console.warn(Ce("m013")),ut(b,{context:w}).get()},toJS:gt,createTransformer:function(b,w){pr(typeof b=="function"&&b.length<2,"createTransformer expects a function that accepts one argument");var x={},O=Wt.resetId,M=function(I){function B(V,z){var Y=I.call(this,function(){return b(z)},void 0,Jt.default,"Transformer-"+b.name+"-"+V,void 0)||this;return Y.sourceIdentifier=V,Y.sourceObject=z,Y}return s(B,I),B.prototype.onBecomeUnobserved=function(){var V=this.value;I.prototype.onBecomeUnobserved.call(this),delete x[this.sourceIdentifier],w&&w(V,this.sourceObject)},B}(dt);return function(I){O!==Wt.resetId&&(x={},O=Wt.resetId);var B=function(z){if(typeof z=="string"||typeof z=="number")return z;if(z===null||typeof z!="object")throw new Error("[mobx] transform expected some kind of object or primitive value, got: "+z);var Y=z.$transformId;return Y===void 0&&Yi(z,"$transformId",Y=kn()),Y}(I),V=x[B];return V?V.get():(V=x[B]=new M(B,I)).get()}},whyRun:function(b,w){return lo("`whyRun` is deprecated in favor of `trace`"),(b=Js(arguments))?me(b)||Kn(b)?b.whyRun():ui(Ce("m025")):Ce("m024")},isArrayLike:function(b){return Array.isArray(b)||be(b)},extras:yt},ir=!1,Jr=function(b){var w=Gt[b];Object.defineProperty(Gt,b,{get:function(){return ir||(ir=!0,console.warn("Using default export (`import mobx from 'mobx'`) is deprecated and won’t work in mobx@4.0.0\nUse `import * as mobx from 'mobx'` instead")),w}})};for(var Ri in Gt)Jr(Ri);typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:P,extras:yt});var ro=Mi(1803),gn=Mi.n(ro),nf={value:()=>{}};function Gn(){for(var b,w=0,x=arguments.length,O={};w<x;++w){if(!(b=arguments[w]+"")||b in O||/[\s.]/.test(b))throw new Error("illegal type: "+b);O[b]=[]}return new gi(O)}function gi(b){this._=b}function hc(b,w){for(var x,O=0,M=b.length;O<M;++O)if((x=b[O]).name===w)return x.value}function ep(b,w,x){for(var O=0,M=b.length;O<M;++O)if(b[O].name===w){b[O]=nf,b=b.slice(0,O).concat(b.slice(O+1));break}return x!=null&&b.push({name:w,value:x}),b}gi.prototype=Gn.prototype={constructor:gi,on:function(b,w){var x,O,M=this._,I=(O=M,(b+"").trim().split(/^|\s+/).map(function(z){var Y="",X=z.indexOf(".");if(X>=0&&(Y=z.slice(X+1),z=z.slice(0,X)),z&&!O.hasOwnProperty(z))throw new Error("unknown type: "+z);return{type:z,name:Y}})),B=-1,V=I.length;if(!(arguments.length<2)){if(w!=null&&typeof w!="function")throw new Error("invalid callback: "+w);for(;++B<V;)if(x=(b=I[B]).type)M[x]=ep(M[x],b.name,w);else if(w==null)for(x in M)M[x]=ep(M[x],b.name,null);return this}for(;++B<V;)if((x=(b=I[B]).type)&&(x=hc(M[x],b.name)))return x},copy:function(){var b={},w=this._;for(var x in w)b[x]=w[x].slice();return new gi(b)},call:function(b,w){if((x=arguments.length-2)>0)for(var x,O,M=new Array(x),I=0;I<x;++I)M[I]=arguments[I+2];if(!this._.hasOwnProperty(b))throw new Error("unknown type: "+b);for(I=0,x=(O=this._[b]).length;I<x;++I)O[I].value.apply(w,M)},apply:function(b,w,x){if(!this._.hasOwnProperty(b))throw new Error("unknown type: "+b);for(var O=this._[b],M=0,I=O.length;M<I;++M)O[M].value.apply(w,x)}};const Au=Gn;var cl,Ru,en=0,dc=0,tu=0,Os=1e3,hh=0,Iu=0,of=0,xs=typeof performance=="object"&&performance.now?performance:Date,Za=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(b){setTimeout(b,17)};function vc(){return Iu||(Za(tp),Iu=xs.now()+of)}function tp(){Iu=0}function ku(){this._call=this._time=this._next=null}function af(b,w,x){var O=new ku;return O.restart(b,w,x),O}function xd(){Iu=(hh=xs.now())+of,en=dc=0;try{(function(){vc(),++en;for(var b,w=cl;w;)(b=Iu-w._time)>=0&&w._call.call(void 0,b),w=w._next;--en})()}finally{en=0,function(){for(var b,w,x=cl,O=1/0;x;)x._call?(O>x._time&&(O=x._time),b=x,x=x._next):(w=x._next,x._next=null,x=b?b._next=w:cl=w);Ru=b,fo(O)}(),Iu=0}}function sf(){var b=xs.now(),w=b-hh;w>Os&&(of-=w,hh=b)}function fo(b){en||(dc&&(dc=clearTimeout(dc)),b-Iu>24?(b<1/0&&(dc=setTimeout(xd,b-xs.now()-of)),tu&&(tu=clearInterval(tu))):(tu||(hh=xs.now(),tu=setInterval(sf,Os)),en=1,Za(xd)))}ku.prototype=af.prototype={constructor:ku,restart:function(b,w,x){if(typeof b!="function")throw new TypeError("callback is not a function");x=(x==null?vc():+x)+(w==null?0:+w),this._next||Ru===this||(Ru?Ru._next=this:cl=this,Ru=this),this._call=b,this._time=x,fo()},stop:function(){this._call&&(this._call=null,this._time=1/0,fo())}};const Du=4294967296;function Qa(b){return b.x}function uf(b){return b.y}var rp=Math.PI*(3-Math.sqrt(5));function np(b,w,x,O){if(isNaN(w)||isNaN(x))return b;var M,I,B,V,z,Y,X,J,ie,he=b._root,ge={data:O},le=b._x0,ye=b._y0,Me=b._x1,Ne=b._y1;if(!he)return b._root=ge,b;for(;he.length;)if((Y=w>=(I=(le+Me)/2))?le=I:Me=I,(X=x>=(B=(ye+Ne)/2))?ye=B:Ne=B,M=he,!(he=he[J=X<<1|Y]))return M[J]=ge,b;if(V=+b._x.call(null,he.data),z=+b._y.call(null,he.data),w===V&&x===z)return ge.next=he,M?M[J]=ge:b._root=ge,b;do M=M?M[J]=new Array(4):b._root=new Array(4),(Y=w>=(I=(le+Me)/2))?le=I:Me=I,(X=x>=(B=(ye+Ne)/2))?ye=B:Ne=B;while((J=X<<1|Y)==(ie=(z>=B)<<1|V>=I));return M[ie]=he,M[J]=ge,b}function Eo(b,w,x,O,M){this.node=b,this.x0=w,this.y0=x,this.x1=O,this.y1=M}function dh(b){return b[0]}function vh(b){return b[1]}function lf(b,w,x){var O=new Mu(w??dh,x??vh,NaN,NaN,NaN,NaN);return b==null?O:O.addAll(b)}function Mu(b,w,x,O,M,I){this._x=b,this._y=w,this._x0=x,this._y0=O,this._x1=M,this._y1=I,this._root=void 0}function Sd(b){for(var w={data:b.data},x=w;b=b.next;)x=x.next={data:b.data};return w}var Oo=lf.prototype=Mu.prototype;function no(b){return function(){return b}}function Cn(b){return 1e-6*(b()-.5)}function Vn(){var b,w,x,O,M,I=no(-30),B=1,V=1/0,z=.81;function Y(he){var ge,le=b.length,ye=lf(b,Qa,uf).visitAfter(J);for(O=he,ge=0;ge<le;++ge)w=b[ge],ye.visit(ie)}function X(){if(b){var he,ge,le=b.length;for(M=new Array(le),he=0;he<le;++he)ge=b[he],M[ge.index]=+I(ge,he,b)}}function J(he){var ge,le,ye,Me,Ne,Ue=0,je=0;if(he.length){for(ye=Me=Ne=0;Ne<4;++Ne)(ge=he[Ne])&&(le=Math.abs(ge.value))&&(Ue+=ge.value,je+=le,ye+=le*ge.x,Me+=le*ge.y);he.x=ye/je,he.y=Me/je}else{(ge=he).x=ge.data.x,ge.y=ge.data.y;do Ue+=M[ge.data.index];while(ge=ge.next)}he.value=Ue}function ie(he,ge,le,ye){if(!he.value)return!0;var Me=he.x-w.x,Ne=he.y-w.y,Ue=ye-ge,je=Me*Me+Ne*Ne;if(Ue*Ue/z<je)return je<V&&(Me===0&&(je+=(Me=Cn(x))*Me),Ne===0&&(je+=(Ne=Cn(x))*Ne),je<B&&(je=Math.sqrt(B*je)),w.vx+=Me*he.value*O/je,w.vy+=Ne*he.value*O/je),!0;if(!(he.length||je>=V)){(he.data!==w||he.next)&&(Me===0&&(je+=(Me=Cn(x))*Me),Ne===0&&(je+=(Ne=Cn(x))*Ne),je<B&&(je=Math.sqrt(B*je)));do he.data!==w&&(Ue=M[he.data.index]*O/je,w.vx+=Me*Ue,w.vy+=Ne*Ue);while(he=he.next)}}return Y.initialize=function(he,ge){b=he,x=ge,X()},Y.strength=function(he){return arguments.length?(I=typeof he=="function"?he:no(+he),X(),Y):I},Y.distanceMin=function(he){return arguments.length?(B=he*he,Y):Math.sqrt(B)},Y.distanceMax=function(he){return arguments.length?(V=he*he,Y):Math.sqrt(V)},Y.theta=function(he){return arguments.length?(z=he*he,Y):Math.sqrt(z)},Y}function ph(b){return b.x+b.vx}function Og(b){return b.y+b.vy}function ip(b){return b.index}function op(b,w){var x=b.get(w);if(!x)throw new Error("node not found: "+w);return x}Oo.copy=function(){var b,w,x=new Mu(this._x,this._y,this._x0,this._y0,this._x1,this._y1),O=this._root;if(!O)return x;if(!O.length)return x._root=Sd(O),x;for(b=[{source:O,target:x._root=new Array(4)}];O=b.pop();)for(var M=0;M<4;++M)(w=O.source[M])&&(w.length?b.push({source:w,target:O.target[M]=new Array(4)}):O.target[M]=Sd(w));return x},Oo.add=function(b){const w=+this._x.call(null,b),x=+this._y.call(null,b);return np(this.cover(w,x),w,x,b)},Oo.addAll=function(b){var w,x,O,M,I=b.length,B=new Array(I),V=new Array(I),z=1/0,Y=1/0,X=-1/0,J=-1/0;for(x=0;x<I;++x)isNaN(O=+this._x.call(null,w=b[x]))||isNaN(M=+this._y.call(null,w))||(B[x]=O,V[x]=M,O<z&&(z=O),O>X&&(X=O),M<Y&&(Y=M),M>J&&(J=M));if(z>X||Y>J)return this;for(this.cover(z,Y).cover(X,J),x=0;x<I;++x)np(this,B[x],V[x],b[x]);return this},Oo.cover=function(b,w){if(isNaN(b=+b)||isNaN(w=+w))return this;var x=this._x0,O=this._y0,M=this._x1,I=this._y1;if(isNaN(x))M=(x=Math.floor(b))+1,I=(O=Math.floor(w))+1;else{for(var B,V,z=M-x||1,Y=this._root;x>b||b>=M||O>w||w>=I;)switch(V=(w<O)<<1|b<x,(B=new Array(4))[V]=Y,Y=B,z*=2,V){case 0:M=x+z,I=O+z;break;case 1:x=M-z,I=O+z;break;case 2:M=x+z,O=I-z;break;case 3:x=M-z,O=I-z}this._root&&this._root.length&&(this._root=Y)}return this._x0=x,this._y0=O,this._x1=M,this._y1=I,this},Oo.data=function(){var b=[];return this.visit(function(w){if(!w.length)do b.push(w.data);while(w=w.next)}),b},Oo.extent=function(b){return arguments.length?this.cover(+b[0][0],+b[0][1]).cover(+b[1][0],+b[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Oo.find=function(b,w,x){var O,M,I,B,V,z,Y,X=this._x0,J=this._y0,ie=this._x1,he=this._y1,ge=[],le=this._root;for(le&&ge.push(new Eo(le,X,J,ie,he)),x==null?x=1/0:(X=b-x,J=w-x,ie=b+x,he=w+x,x*=x);z=ge.pop();)if(!(!(le=z.node)||(M=z.x0)>ie||(I=z.y0)>he||(B=z.x1)<X||(V=z.y1)<J))if(le.length){var ye=(M+B)/2,Me=(I+V)/2;ge.push(new Eo(le[3],ye,Me,B,V),new Eo(le[2],M,Me,ye,V),new Eo(le[1],ye,I,B,Me),new Eo(le[0],M,I,ye,Me)),(Y=(w>=Me)<<1|b>=ye)&&(z=ge[ge.length-1],ge[ge.length-1]=ge[ge.length-1-Y],ge[ge.length-1-Y]=z)}else{var Ne=b-+this._x.call(null,le.data),Ue=w-+this._y.call(null,le.data),je=Ne*Ne+Ue*Ue;if(je<x){var Xe=Math.sqrt(x=je);X=b-Xe,J=w-Xe,ie=b+Xe,he=w+Xe,O=le.data}}return O},Oo.remove=function(b){if(isNaN(I=+this._x.call(null,b))||isNaN(B=+this._y.call(null,b)))return this;var w,x,O,M,I,B,V,z,Y,X,J,ie,he=this._root,ge=this._x0,le=this._y0,ye=this._x1,Me=this._y1;if(!he)return this;if(he.length)for(;;){if((Y=I>=(V=(ge+ye)/2))?ge=V:ye=V,(X=B>=(z=(le+Me)/2))?le=z:Me=z,w=he,!(he=he[J=X<<1|Y]))return this;if(!he.length)break;(w[J+1&3]||w[J+2&3]||w[J+3&3])&&(x=w,ie=J)}for(;he.data!==b;)if(O=he,!(he=he.next))return this;return(M=he.next)&&delete he.next,O?(M?O.next=M:delete O.next,this):w?(M?w[J]=M:delete w[J],(he=w[0]||w[1]||w[2]||w[3])&&he===(w[3]||w[2]||w[1]||w[0])&&!he.length&&(x?x[ie]=he:this._root=he),this):(this._root=M,this)},Oo.removeAll=function(b){for(var w=0,x=b.length;w<x;++w)this.remove(b[w]);return this},Oo.root=function(){return this._root},Oo.size=function(){var b=0;return this.visit(function(w){if(!w.length)do++b;while(w=w.next)}),b},Oo.visit=function(b){var w,x,O,M,I,B,V=[],z=this._root;for(z&&V.push(new Eo(z,this._x0,this._y0,this._x1,this._y1));w=V.pop();)if(!b(z=w.node,O=w.x0,M=w.y0,I=w.x1,B=w.y1)&&z.length){var Y=(O+I)/2,X=(M+B)/2;(x=z[3])&&V.push(new Eo(x,Y,X,I,B)),(x=z[2])&&V.push(new Eo(x,O,X,Y,B)),(x=z[1])&&V.push(new Eo(x,Y,M,I,X)),(x=z[0])&&V.push(new Eo(x,O,M,Y,X))}return this},Oo.visitAfter=function(b){var w,x=[],O=[];for(this._root&&x.push(new Eo(this._root,this._x0,this._y0,this._x1,this._y1));w=x.pop();){var M=w.node;if(M.length){var I,B=w.x0,V=w.y0,z=w.x1,Y=w.y1,X=(B+z)/2,J=(V+Y)/2;(I=M[0])&&x.push(new Eo(I,B,V,X,J)),(I=M[1])&&x.push(new Eo(I,X,V,z,J)),(I=M[2])&&x.push(new Eo(I,B,J,X,Y)),(I=M[3])&&x.push(new Eo(I,X,J,z,Y))}O.push(w)}for(;w=O.pop();)b(w.node,w.x0,w.y0,w.x1,w.y1);return this},Oo.x=function(b){return arguments.length?(this._x=b,this):this._x},Oo.y=function(b){return arguments.length?(this._y=b,this):this._y};var rr=256,io=4096,Zn=25,fl="#FFDF81",pc="#818790",gc="#EDEDED",cf="#CFD1D4",hl="#F5F6F6",dl="#8FE3E8",Qe="#1A1B1D",vt={position:"absolute",top:0,bottom:0,left:0,right:0},rt=function(){return window.devicePixelRatio||1},$t=["NVL_basic-wrapper","NVL_interactive-wrapper"];function br(b,w){var x=typeof Symbol<"u"&&b[Symbol.iterator]||b["@@iterator"];if(!x){if(Array.isArray(b)||(x=function(z,Y){if(z){if(typeof z=="string")return Yr(z,Y);var X=Object.prototype.toString.call(z).slice(8,-1);return X==="Object"&&z.constructor&&(X=z.constructor.name),X==="Map"||X==="Set"?Array.from(z):X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X)?Yr(z,Y):void 0}}(b))||w){x&&(b=x);var O=0,M=function(){};return{s:M,n:function(){return O>=b.length?{done:!0}:{done:!1,value:b[O++]}},e:function(z){throw z},f:M}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I,B=!0,V=!1;return{s:function(){x=x.call(b)},n:function(){var z=x.next();return B=z.done,z},e:function(z){V=!0,I=z},f:function(){try{B||x.return==null||x.return()}finally{if(V)throw I}}}}function Yr(b,w){(w==null||w>b.length)&&(w=b.length);for(var x=0,O=new Array(w);x<w;x++)O[x]=b[x];return O}var yi=function(b){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:gc,x=new Map;return b.forEach(function(O){var M=O.id,I=O.from,B=O.to,V=O.color,z=O.width,Y=O.disabled,X=[I,B].sort(),J="".concat(X[0],".").concat(X[1]),ie=x.get(J);ie?ie.bundledRels.push({id:M,color:V??void 0,disabled:Y!=null&&Y,width:z??1}):x.set(J,{bundledRels:[{id:M,color:V??void 0,disabled:Y!=null&&Y,width:z??1}],key:J,from:I,to:B,color:V??void 0,disabled:Y!=null&&Y,width:0})}),x.forEach(function(O){var M=(0,r.uniqBy)(O.bundledRels,"disabled"),I=M.length===1&&M[0].disabled===!0,B=M.length===1&&M[0].disabled!==!0;if(I)O.color=w,O.width=1;else{var V=O.bundledRels.filter(function(Y){return Y.disabled!==!0}),z=(0,r.uniqBy)(V,"color");B?(O.color=z.length>1?void 0:O.bundledRels[0].color,O.bundledRels.forEach(function(Y){O.width+=Y.width})):(O.color=z.length===1?z[0].color:void 0,O.disabled=!1,O.bundledRels.forEach(function(Y){O.width+=Y.disabled!==!0?Y.width:0}))}}),Array.from(x.values())},pe=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).find(function(b){return"size"in b})!==void 0};function Ss(b){return Ss=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},Ss(b)}var gh=function(b){var w,x;return typeof b.source=="number"||typeof b.target=="number"||typeof b.source=="string"||typeof b.target=="string"?45*devicePixelRatio:((w=b.source.size)!==null&&w!==void 0?w:Zn)+((x=b.target.size)!==null&&x!==void 0?x:Zn)+90*devicePixelRatio};function Qn(b){return Ss(b)==="object"}var Br=function(b){var w;return((w=b.size)!==null&&w!==void 0?w:Zn)+25*devicePixelRatio},ru=function(){return-400*Math.pow(devicePixelRatio,2)},qo=function(){return 2*ru()};function Xi(b){return Xi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},Xi(b)}function Ja(b,w){(w==null||w>b.length)&&(w=b.length);for(var x=0,O=new Array(w);x<w;x++)O[x]=b[x];return O}function Nr(b,w){var x=Object.keys(b);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(b);w&&(O=O.filter(function(M){return Object.getOwnPropertyDescriptor(b,M).enumerable})),x.push.apply(x,O)}return x}function ap(b,w){for(var x=0;x<w.length;x++){var O=w[x];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(b,yh(O.key),O)}}function yh(b){var w=function(x,O){if(Xi(x)!="object"||!x)return x;var M=x[Symbol.toPrimitive];if(M!==void 0){var I=M.call(x,"string");if(Xi(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(b);return Xi(w)=="symbol"?w:String(w)}var ua="d3ForceLayout",Td=function(b){return b&&gt(b)},Cd=function(){function b(O){var M=this;(function(Y,X){if(!(Y instanceof X))throw new TypeError("Cannot call a class as a function")})(this,b);var I=O.state;this.state=I,this.d3Nodes={},this.d3RelList={},this.computing=!0,this.center={x:0,y:0},this.nodeRelCount=[];var B=this.state,V=B.nodes,z=B.rels;V.addChannel(ua),z.addChannel(ua),this.simulation=function(Y){var X,J=1,ie=.001,he=1-Math.pow(ie,1/300),ge=0,le=.6,ye=new Map,Me=af(je),Ne=Au("tick","end"),Ue=function(){let $e=1;return()=>($e=(1664525*$e+1013904223)%Du)/Du}();function je(){Xe(),Ne.call("tick",X),J<ie&&(Me.stop(),Ne.call("end",X))}function Xe($e){var Ve,tt,mt=Y.length;$e===void 0&&($e=1);for(var It=0;It<$e;++It)for(J+=(ge-J)*he,ye.forEach(function(bt){bt(J)}),Ve=0;Ve<mt;++Ve)(tt=Y[Ve]).fx==null?tt.x+=tt.vx*=le:(tt.x=tt.fx,tt.vx=0),tt.fy==null?tt.y+=tt.vy*=le:(tt.y=tt.fy,tt.vy=0);return X}function Ge(){for(var $e,Ve=0,tt=Y.length;Ve<tt;++Ve){if(($e=Y[Ve]).index=Ve,$e.fx!=null&&($e.x=$e.fx),$e.fy!=null&&($e.y=$e.fy),isNaN($e.x)||isNaN($e.y)){var mt=10*Math.sqrt(.5+Ve),It=Ve*rp;$e.x=mt*Math.cos(It),$e.y=mt*Math.sin(It)}(isNaN($e.vx)||isNaN($e.vy))&&($e.vx=$e.vy=0)}}function Ke($e){return $e.initialize&&$e.initialize(Y,Ue),$e}return Y==null&&(Y=[]),Ge(),X={tick:Xe,restart:function(){return Me.restart(je),X},stop:function(){return Me.stop(),X},nodes:function($e){return arguments.length?(Y=$e,Ge(),ye.forEach(Ke),X):Y},alpha:function($e){return arguments.length?(J=+$e,X):J},alphaMin:function($e){return arguments.length?(ie=+$e,X):ie},alphaDecay:function($e){return arguments.length?(he=+$e,X):+he},alphaTarget:function($e){return arguments.length?(ge=+$e,X):ge},velocityDecay:function($e){return arguments.length?(le=1-$e,X):1-le},randomSource:function($e){return arguments.length?(Ue=$e,ye.forEach(Ke),X):Ue},force:function($e,Ve){return arguments.length>1?(Ve==null?ye.delete($e):ye.set($e,Ke(Ve)),X):ye.get($e)},find:function($e,Ve,tt){var mt,It,bt,jt,Ct,Pe=0,Te=Y.length;for(tt==null?tt=1/0:tt*=tt,Pe=0;Pe<Te;++Pe)(bt=(mt=$e-(jt=Y[Pe]).x)*mt+(It=Ve-jt.y)*It)<tt&&(Ct=jt,tt=bt);return Ct},on:function($e,Ve){return arguments.length>1?(Ne.on($e,Ve),X):Ne.on($e)}}}().velocityDecay(.4).force("charge",Vn().strength(ru)).force("centerX",function(Y){var X,J,ie,he=no(.1);function ge(ye){for(var Me,Ne=0,Ue=X.length;Ne<Ue;++Ne)(Me=X[Ne]).vx+=(ie[Ne]-Me.x)*J[Ne]*ye}function le(){if(X){var ye,Me=X.length;for(J=new Array(Me),ie=new Array(Me),ye=0;ye<Me;++ye)J[ye]=isNaN(ie[ye]=+Y(X[ye],ye,X))?0:+he(X[ye],ye,X)}}return typeof Y!="function"&&(Y=no(Y==null?0:+Y)),ge.initialize=function(ye){X=ye,le()},ge.strength=function(ye){return arguments.length?(he=typeof ye=="function"?ye:no(+ye),le(),ge):he},ge.x=function(ye){return arguments.length?(Y=typeof ye=="function"?ye:no(+ye),le(),ge):Y},ge}(0).strength(.03)).force("centerY",function(Y){var X,J,ie,he=no(.1);function ge(ye){for(var Me,Ne=0,Ue=X.length;Ne<Ue;++Ne)(Me=X[Ne]).vy+=(ie[Ne]-Me.y)*J[Ne]*ye}function le(){if(X){var ye,Me=X.length;for(J=new Array(Me),ie=new Array(Me),ye=0;ye<Me;++ye)J[ye]=isNaN(ie[ye]=+Y(X[ye],ye,X))?0:+he(X[ye],ye,X)}}return typeof Y!="function"&&(Y=no(Y==null?0:+Y)),ge.initialize=function(ye){X=ye,le()},ge.strength=function(ye){return arguments.length?(he=typeof ye=="function"?ye:no(+ye),le(),ge):he},ge.y=function(ye){return arguments.length?(Y=typeof ye=="function"?ye:no(+ye),le(),ge):Y},ge}(0).strength(.03)).alpha(1).alphaMin(.05).on("end",function(){M.simulationStopped=!0,M.shouldUpdate=!1,M.shouldReheatNodes=!1,M.shouldCountNodeRels=!1}).stop(),this.simulationStopped=!0,this.shouldUpdate=!0,this.shouldReheatNodes=!1,this.shouldCountNodeRels=!0,this.stateDisposers=[],this.stateDisposers.push(this.state.reaction(function(){return M.state.graphUpdates},function(){var Y=V.channels[ua];if(V.version!==void 0&&Y){var X=Object.values(Y.adds).length>0,J=Object.values(Y.removes).length>0,ie=Object.values(Y.updates),he=pe(ie);X||J||he?(M.shouldUpdate=!0,M.shouldReheatNodes=!0,M.shouldCountNodeRels=!0):M.shouldReheatNodes=!1}var ge=z.channels[ua];if(z.version!==void 0&&ge){var le=Object.values(ge.adds).length>0,ye=Object.values(ge.removes).length>0;(le||ye)&&(M.shouldUpdate=!0,M.shouldReheatNodes=!0,M.shouldCountNodeRels=!0)}}))}var w,x;return w=b,x=[{key:"setOptions",value:function(O){}},{key:"updateNodes",value:function(O){var M=this;O.forEach(function(I){M.d3Nodes[I.id]===void 0&&(M.d3Nodes[I.id]={id:I.id}),I!=null&&I.pinned?(M.d3Nodes[I.id].fx=I.x,M.d3Nodes[I.id].fy=I.y):(M.d3Nodes[I.id].x=I.x,M.d3Nodes[I.id].y=I.y),M.d3Nodes[I.id].vy=0,M.d3Nodes[I.id].vx=0}),this.shouldUpdate=!0,this.simulation.tick().alpha(.2)}},{key:"update",value:function(){var O,M=this,I=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.shouldUpdate||I){var B=this.state,V=B.nodes,z=B.rels,Y=V.channels[ua],X=z.channels[ua],J=Object.values(Y.adds).length>0,ie=Object.values(X.adds).length>0,he=Object.values(Y.removes).length>0,ge=Object.values(X.removes).length>0,le=Object.values(Y.updates).length>0;if(J||ie||he||ge||le){var ye=J&&Object.keys(this.d3Nodes).length===0,Me=Td(Y.removes);Object.keys(Me).forEach(function(je){delete M.d3Nodes[je]});var Ne=Td(Y.adds);if(Object.keys(Ne).forEach(function(je){M.d3Nodes[je]=function(Xe){for(var Ge=1;Ge<arguments.length;Ge++){var Ke=arguments[Ge]!=null?arguments[Ge]:{};Ge%2?Nr(Object(Ke),!0).forEach(function($e){var Ve,tt,mt;Ve=Xe,tt=$e,mt=Ke[$e],(tt=yh(tt))in Ve?Object.defineProperty(Ve,tt,{value:mt,enumerable:!0,configurable:!0,writable:!0}):Ve[tt]=mt}):Object.getOwnPropertyDescriptors?Object.defineProperties(Xe,Object.getOwnPropertyDescriptors(Ke)):Nr(Object(Ke)).forEach(function($e){Object.defineProperty(Xe,$e,Object.getOwnPropertyDescriptor(Ke,$e))})}return Xe}({},Ne[je])}),le&&Object.values(Y.updates).forEach(function(je){je.pinned===!0?(M.d3Nodes[je.id].fx=M.d3Nodes[je.id].x,M.d3Nodes[je.id].fy=M.d3Nodes[je.id].y):je.pinned===!1&&(M.d3Nodes[je.id].fx=null,M.d3Nodes[je.id].fy=null),je.size!==void 0&&(M.d3Nodes[je.id].size=je.size)}),(ie||ge)&&(this.d3RelList=yi(Td(z.items)).filter(function(je){return je.from!==je.to}).map(function(je,Xe){return{source:je.from,target:je.to,index:Xe}})),ye){var Ue=Object.values(this.d3Nodes);(function(je,Xe,Ge){var Ke=je.filter(function($e){return $e.x===void 0&&$e.y===void 0});Ke.forEach(function($e,Ve){$e.x=Xe.x+Ge*Math.sin(2*Math.PI*Ve/Ke.length),$e.y=Xe.y+Ge*Math.cos(2*Math.PI*Ve/Ke.length)})})(Ue,this.center,(O=Ue.length,45*O/(2*Math.PI)))}this.layout(V.items,z.items,ye)}V.clearChannel(ua),z.clearChannel(ua),this.shouldUpdate=!1,this.simulation.alpha()>this.simulation.alphaMin()&&(this.shouldUpdate=!0,this.simulationStopped&&(this.simulation.restart(),this.simulationStopped=!1))}}},{key:"layout",value:function(O,M,I){var B=this;if(!(0,r.isEmpty)(this.d3Nodes)){if(this.simulation.stop(),this.simulation.nodes(Object.values(this.d3Nodes)).force("collide",function(X){var J,ie,he,ge=1,le=1;function ye(){for(var Ue,je,Xe,Ge,Ke,$e,Ve,tt=J.length,mt=0;mt<le;++mt)for(je=lf(J,ph,Og).visitAfter(Me),Ue=0;Ue<tt;++Ue)Xe=J[Ue],$e=ie[Xe.index],Ve=$e*$e,Ge=Xe.x+Xe.vx,Ke=Xe.y+Xe.vy,je.visit(It);function It(bt,jt,Ct,Pe,Te){var Ae=bt.data,ot=bt.r,Ze=$e+ot;if(!Ae)return jt>Ge+Ze||Pe<Ge-Ze||Ct>Ke+Ze||Te<Ke-Ze;if(Ae.index>Xe.index){var ht=Ge-Ae.x-Ae.vx,kt=Ke-Ae.y-Ae.vy,Ut=ht*ht+kt*kt;Ut<Ze*Ze&&(ht===0&&(Ut+=(ht=Cn(he))*ht),kt===0&&(Ut+=(kt=Cn(he))*kt),Ut=(Ze-(Ut=Math.sqrt(Ut)))/Ut*ge,Xe.vx+=(ht*=Ut)*(Ze=(ot*=ot)/(Ve+ot)),Xe.vy+=(kt*=Ut)*Ze,Ae.vx-=ht*(Ze=1-Ze),Ae.vy-=kt*Ze)}}}function Me(Ue){if(Ue.data)return Ue.r=ie[Ue.data.index];for(var je=Ue.r=0;je<4;++je)Ue[je]&&Ue[je].r>Ue.r&&(Ue.r=Ue[je].r)}function Ne(){if(J){var Ue,je,Xe=J.length;for(ie=new Array(Xe),Ue=0;Ue<Xe;++Ue)je=J[Ue],ie[je.index]=+X(je,Ue,J)}}return typeof X!="function"&&(X=no(X==null?1:+X)),ye.initialize=function(Ue,je){J=Ue,he=je,Ne()},ye.iterations=function(Ue){return arguments.length?(le=+Ue,ye):le},ye.strength=function(Ue){return arguments.length?(ge=+Ue,ye):ge},ye.radius=function(Ue){return arguments.length?(X=typeof Ue=="function"?Ue:no(+Ue),Ne(),ye):X},ye}().radius(Br)),this.shouldCountNodeRels&&(this.nodeRelCount=this.countNodeRels()),this.simulation.force("link",function(X){var J,ie,he,ge,le,ye,Me=ip,Ne=function(Ve){return 1/Math.min(ge[Ve.source.index],ge[Ve.target.index])},Ue=no(30),je=1;function Xe(Ve){for(var tt=0,mt=X.length;tt<je;++tt)for(var It,bt,jt,Ct,Pe,Te,Ae,ot=0;ot<mt;++ot)bt=(It=X[ot]).source,Ct=(jt=It.target).x+jt.vx-bt.x-bt.vx||Cn(ye),Pe=jt.y+jt.vy-bt.y-bt.vy||Cn(ye),Ct*=Te=((Te=Math.sqrt(Ct*Ct+Pe*Pe))-ie[ot])/Te*Ve*J[ot],Pe*=Te,jt.vx-=Ct*(Ae=le[ot]),jt.vy-=Pe*Ae,bt.vx+=Ct*(Ae=1-Ae),bt.vy+=Pe*Ae}function Ge(){if(he){var Ve,tt,mt=he.length,It=X.length,bt=new Map(he.map((jt,Ct)=>[Me(jt,Ct,he),jt]));for(Ve=0,ge=new Array(mt);Ve<It;++Ve)(tt=X[Ve]).index=Ve,typeof tt.source!="object"&&(tt.source=op(bt,tt.source)),typeof tt.target!="object"&&(tt.target=op(bt,tt.target)),ge[tt.source.index]=(ge[tt.source.index]||0)+1,ge[tt.target.index]=(ge[tt.target.index]||0)+1;for(Ve=0,le=new Array(It);Ve<It;++Ve)tt=X[Ve],le[Ve]=ge[tt.source.index]/(ge[tt.source.index]+ge[tt.target.index]);J=new Array(It),Ke(),ie=new Array(It),$e()}}function Ke(){if(he)for(var Ve=0,tt=X.length;Ve<tt;++Ve)J[Ve]=+Ne(X[Ve],Ve,X)}function $e(){if(he)for(var Ve=0,tt=X.length;Ve<tt;++Ve)ie[Ve]=+Ue(X[Ve],Ve,X)}return X==null&&(X=[]),Xe.initialize=function(Ve,tt){he=Ve,ye=tt,Ge()},Xe.links=function(Ve){return arguments.length?(X=Ve,Ge(),Xe):X},Xe.id=function(Ve){return arguments.length?(Me=Ve,Xe):Me},Xe.iterations=function(Ve){return arguments.length?(je=+Ve,Xe):je},Xe.strength=function(Ve){return arguments.length?(Ne=typeof Ve=="function"?Ve:no(+Ve),Ke(),Xe):Ne},Xe.distance=function(Ve){return arguments.length?(Ue=typeof Ve=="function"?Ve:no(+Ve),$e(),Xe):Ue},Xe}(this.d3RelList).id(function(X){return X.id}).distance(gh).strength(function(X){return function(J,ie){if(!Qn(J.source)||!Qn(J.target))return 1;var he=1.2/(Math.min(ie[J.source.index],ie[J.target.index])+(Math.max(ie[J.source.index],ie[J.target.index])-1)/100);return Math.max(Math.min(he,1),.06)}(X,B.nodeRelCount)})),I){var V=0;this.simulation.force("charge",Vn().strength(qo));for(var z=performance.now();performance.now()-z<300&&V<200;)this.simulation.alpha(1),this.simulation.tick(1),V+=1;this.simulation.force("charge",Vn().strength(ru));for(var Y=performance.now();performance.now()-Y<100&&this.simulation.alpha()>=this.simulation.alphaMin();)this.simulation.tick(1);return this.computing=!1,void this.simulation.restart()}this.shouldReheatNodes?this.simulation.alpha(1).restart():this.simulation.restart()}}},{key:"getNodePositions",value:function(O){var M,I=[],B=function(X,J){var ie=typeof Symbol<"u"&&X[Symbol.iterator]||X["@@iterator"];if(!ie){if(Array.isArray(X)||(ie=function(Ne,Ue){if(Ne){if(typeof Ne=="string")return Ja(Ne,Ue);var je=Object.prototype.toString.call(Ne).slice(8,-1);return je==="Object"&&Ne.constructor&&(je=Ne.constructor.name),je==="Map"||je==="Set"?Array.from(Ne):je==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(je)?Ja(Ne,Ue):void 0}}(X))||J){ie&&(X=ie);var he=0,ge=function(){};return{s:ge,n:function(){return he>=X.length?{done:!0}:{done:!1,value:X[he++]}},e:function(Ne){throw Ne},f:ge}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var le,ye=!0,Me=!1;return{s:function(){ie=ie.call(X)},n:function(){var Ne=ie.next();return ye=Ne.done,Ne},e:function(Ne){Me=!0,le=Ne},f:function(){try{ye||ie.return==null||ie.return()}finally{if(Me)throw le}}}}(O);try{for(B.s();!(M=B.n()).done;){var V=M.value,z=this.d3Nodes[V.id];if(z!==void 0){var Y={id:z.id,x:z.x,y:z.y};I.push(Y)}}}catch(X){B.e(X)}finally{B.f()}return I}},{key:"getShouldUpdate",value:function(){return this.shouldUpdate}},{key:"getComputing",value:function(){return this.computing}},{key:"terminateUpdate",value:function(){this.simulation.alpha(this.simulation.alphaMin()).stop(),this.simulationStopped=!0}},{key:"destroy",value:function(){this.stateDisposers.forEach(function(O){O()}),this.state.nodes.removeChannel(ua),this.state.rels.removeChannel(ua),this.simulation.stop()}},{key:"setAlpha",value:function(O){this.simulation.alpha(O),this.simulation.restart(),this.simulation.shouldUpdate=!0}},{key:"countNodeRels",value:function(){for(var O=new Map(Object.entries(this.d3Nodes)),M=Object.values(this.d3RelList),I=new Array(O.length),B=0;B<M.length;++B){var V=M[B];V.index=B,Xi(V.source)!=="object"&&(V.source=O.get(V.source)),Xi(V.target)!=="object"&&(V.target=O.get(V.target)),I[V.source.index]=(I[V.source.index]||0)+1,I[V.target.index]=(I[V.target.index]||0)+1}return I}}],x&&ap(w.prototype,x),Object.defineProperty(w,"prototype",{writable:!1}),b}(),ff=Mi(5880),Lu=Mi.n(ff),zr=Lu().getLogger("NVL");const vl=mz;var Ts={CoseBilkentLayout:{standard:"createCoseBilkentLayoutWorker",fallback:"coseBilkentLayoutFallbackWorker"},HierarchicalLayout:{standard:"createHierarchicalLayoutWorker",fallback:"hierarchicalLayoutFallbackWorker"}},pl=function(b){var w,x=arguments.length>1&&arguments[1]!==void 0&&arguments[1],O=Ts[b],M=O.standard,I=O.fallback;if(x)w=vl[I];else try{w=vl[M]()}catch(B){console.warn("Failed to initialise ".concat(b,' worker: "').concat(JSON.stringify(B),'". Falling back to syncronous code.')),w=vl[I]}if(w===void 0)throw"".concat(b," code could not be initialized.");return w.port.start(),w};function Da(b){return Da=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},Da(b)}function zo(b,w){var x=Object.keys(b);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(b);w&&(O=O.filter(function(M){return Object.getOwnPropertyDescriptor(b,M).enumerable})),x.push.apply(x,O)}return x}function gl(b){for(var w=1;w<arguments.length;w++){var x=arguments[w]!=null?arguments[w]:{};w%2?zo(Object(x),!0).forEach(function(O){xo(b,O,x[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(x)):zo(Object(x)).forEach(function(O){Object.defineProperty(b,O,Object.getOwnPropertyDescriptor(x,O))})}return b}function hf(b,w){var x=typeof Symbol<"u"&&b[Symbol.iterator]||b["@@iterator"];if(!x){if(Array.isArray(b)||(x=function(z,Y){if(z){if(typeof z=="string")return Cs(z,Y);var X=Object.prototype.toString.call(z).slice(8,-1);return X==="Object"&&z.constructor&&(X=z.constructor.name),X==="Map"||X==="Set"?Array.from(z):X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X)?Cs(z,Y):void 0}}(b))||w){x&&(b=x);var O=0,M=function(){};return{s:M,n:function(){return O>=b.length?{done:!0}:{done:!1,value:b[O++]}},e:function(z){throw z},f:M}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I,B=!0,V=!1;return{s:function(){x=x.call(b)},n:function(){var z=x.next();return B=z.done,z},e:function(z){V=!0,I=z},f:function(){try{B||x.return==null||x.return()}finally{if(V)throw I}}}}function Cs(b,w){(w==null||w>b.length)&&(w=b.length);for(var x=0,O=new Array(w);x<w;x++)O[x]=b[x];return O}function Go(b,w){for(var x=0;x<w.length;x++){var O=w[x];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(b,sp(O.key),O)}}function xo(b,w,x){return(w=sp(w))in b?Object.defineProperty(b,w,{value:x,enumerable:!0,configurable:!0,writable:!0}):b[w]=x,b}function sp(b){var w=function(x,O){if(Da(x)!="object"||!x)return x;var M=x[Symbol.toPrimitive];if(M!==void 0){var I=M.call(x,"string");if(Da(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(b);return Da(w)=="symbol"?w:String(w)}var df=function(b,w,x){return b+(w-b)*function(O){return O*O*(3-2*O)}(x)},Pd=function(){function b(O){(function(I,B){if(!(I instanceof B))throw new TypeError("Cannot call a class as a function")})(this,b),xo(this,"positions",void 0),xo(this,"oldPositions",void 0),xo(this,"startTime",void 0),xo(this,"t",void 0),xo(this,"currentT",void 0),xo(this,"state",void 0),xo(this,"shouldUpdateAnimator",void 0),xo(this,"parents",void 0),xo(this,"animationCompleteCallback",void 0),xo(this,"shouldUpdate",void 0);var M=O.state;this.positions={},this.oldPositions={},this.startTime=0,this.t=1,this.currentT=1,this.state=M,this.shouldUpdateAnimator=!1,this.parents={},this.animationCompleteCallback=O.animationCompleteCallback}var w,x;return w=b,x=[{key:"getPositionMapFromState",value:function(){var O,M=this.state.nodes,I=M.idToPosition,B={},V=hf(M.items);try{for(V.s();!(O=V.n()).done;){var z=O.value,Y=I[z.id];Y!==void 0&&(B[z.id]={id:z.id,x:Y.x,y:Y.y})}}catch(X){V.e(X)}finally{V.f()}return B}},{key:"updatePositionsFromState",value:function(){this.positions=gl({},this.getPositionMapFromState())}},{key:"updateOldPositionFromState",value:function(){this.oldPositions=gl({},this.getPositionMapFromState())}},{key:"startAnimation",value:function(){this.updateOldPositionFromState(),this.startTime=Date.now(),this.t=0,this.currentT=0,this.shouldUpdateAnimator=!0}},{key:"update",value:function(){var O=this.shouldUpdateAnimator,M=(Date.now()-this.startTime)/400;this.t=Math.min(M,1),this.currentT<1?this.shouldUpdateAnimator=!0:(this.shouldUpdateAnimator=!1,O&&!this.shouldUpdateAnimator&&this.animationCompleteCallback!==void 0&&this.animationCompleteCallback(),this.shouldUpdateAnimator||this.updatePositionsFromState())}},{key:"updateNodes",value:function(O){var M,I=hf(O);try{for(I.s();!(M=I.n()).done;){var B=M.value;B.x!==void 0&&B.y!==void 0&&(this.positions[B.id]={id:B.id,x:B.x,y:B.y}),this.shouldUpdate=!0}}catch(V){I.e(V)}finally{I.f()}}},{key:"getNodePositions",value:function(O){var M,I=this.parents,B=this.state.nodes.idToPosition,V=function(je,Xe){for(var Ge={x:0,y:0},Ke=je.length,$e=0,Ve=0;Ve<Ke;Ve++){var tt=Xe[je[Ve].id];tt===void 0||isNaN(tt.x)||isNaN(tt.y)||tt.x===0||tt.y===0||(Ge.x+=tt.x,Ge.y+=tt.y,$e+=1)}return $e>0?[Ge.x/$e,Ge.y/$e]:[0,0]}(O,B),z={x:V[0],y:V[1]},Y=[],X=hf(O);try{for(X.s();!(M=X.n()).done;){var J=M.value,ie=this.positions[J.id],he=B[J.id],ge={id:J.id};if(ie!==void 0){for(var le,ye,Me,Ne=J.id,Ue=(le=this.oldPositions[J.id])!==null&&le!==void 0?le:gl({},z);Ue===void 0&&I[Ne]!==void 0;)Ne=I[Ne],Ue=this.oldPositions[Ne];Ue.x=(ye=Ue.x)!==null&&ye!==void 0?ye:z.x,Ue.y=(Me=Ue.y)!==null&&Me!==void 0?Me:z.y,ge.x=df(Ue.x,ie.x,this.t),ge.y=df(Ue.y,ie.y,this.t)}else he!==void 0&&(ge.x=he.x||z.x,ge.y=he.y||z.y);Y.push(ge)}}catch(je){X.e(je)}finally{X.f()}return this.currentT=this.t,Y}}],x&&Go(w.prototype,x),Object.defineProperty(w,"prototype",{writable:!1}),b}();function Wn(b){return Wn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},Wn(b)}function yl(b,w){var x=Object.keys(b);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(b);w&&(O=O.filter(function(M){return Object.getOwnPropertyDescriptor(b,M).enumerable})),x.push.apply(x,O)}return x}function mh(b){for(var w=1;w<arguments.length;w++){var x=arguments[w]!=null?arguments[w]:{};w%2?yl(Object(x),!0).forEach(function(O){Ma(b,O,x[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(x)):yl(Object(x)).forEach(function(O){Object.defineProperty(b,O,Object.getOwnPropertyDescriptor(x,O))})}return b}function Ps(b,w){return function(x){if(Array.isArray(x))return x}(b)||function(x,O){var M=x==null?null:typeof Symbol<"u"&&x[Symbol.iterator]||x["@@iterator"];if(M!=null){var I,B,V,z,Y=[],X=!0,J=!1;try{if(V=(M=M.call(x)).next,O!==0)for(;!(X=(I=V.call(M)).done)&&(Y.push(I.value),Y.length!==O);X=!0);}catch(ie){J=!0,B=ie}finally{try{if(!X&&M.return!=null&&(z=M.return(),Object(z)!==z))return}finally{if(J)throw B}}return Y}}(b,w)||pf(b,w)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function vf(b){return function(w){if(Array.isArray(w))return nu(w)}(b)||function(w){if(typeof Symbol<"u"&&w[Symbol.iterator]!=null||w["@@iterator"]!=null)return Array.from(w)}(b)||pf(b)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function pf(b,w){if(b){if(typeof b=="string")return nu(b,w);var x=Object.prototype.toString.call(b).slice(8,-1);return x==="Object"&&b.constructor&&(x=b.constructor.name),x==="Map"||x==="Set"?Array.from(b):x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x)?nu(b,w):void 0}}function nu(b,w){(w==null||w>b.length)&&(w=b.length);for(var x=0,O=new Array(w);x<w;x++)O[x]=b[x];return O}function Ii(b,w){for(var x=0;x<w.length;x++){var O=w[x];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(b,ju(O.key),O)}}function dn(b,w,x){return w=Nu(w),function(O,M){if(M&&(Wn(M)==="object"||typeof M=="function"))return M;if(M!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ml(O)}(b,bh()?Reflect.construct(w,x||[],Nu(b).constructor):w.apply(b,x))}function bh(){try{var b=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bh=function(){return!!b})()}function ml(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}function _h(){return _h=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(b,w,x){var O=function(I,B){for(;!Object.prototype.hasOwnProperty.call(I,B)&&(I=Nu(I))!==null;);return I}(b,w);if(O){var M=Object.getOwnPropertyDescriptor(O,w);return M.get?M.get.call(arguments.length<3?b:x):M.value}},_h.apply(this,arguments)}function Nu(b){return Nu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(w){return w.__proto__||Object.getPrototypeOf(w)},Nu(b)}function iu(b,w){return iu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(x,O){return x.__proto__=O,x},iu(b,w)}function Ma(b,w,x){return(w=ju(w))in b?Object.defineProperty(b,w,{value:x,enumerable:!0,configurable:!0,writable:!0}):b[w]=x,b}function ju(b){var w=function(x,O){if(Wn(x)!="object"||!x)return x;var M=x[Symbol.toPrimitive];if(M!==void 0){var I=M.call(x,"string");if(Wn(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(b);return Wn(w)=="symbol"?w:String(w)}var ou=function(b){return b!==void 0?gt(b):b},yc=function(b){function w(M){var I;return function(B,V){if(!(B instanceof V))throw new TypeError("Cannot call a class as a function")}(this,w),Ma(ml(I=dn(this,w,[M])),"stateDisposers",void 0),Ma(ml(I),"cytoCompleteCallback",void 0),Ma(ml(I),"computing",void 0),Ma(ml(I),"pendingLayoutData",void 0),Ma(ml(I),"worker",void 0),Ma(ml(I),"workersDisabled",void 0),I.stateDisposers=[],I.stateDisposers.push(I.state.reaction(function(){return I.state.graphUpdates},function(){I.state.nodes.version!==void 0&&(I.shouldUpdate=!0),I.state.rels.version!==void 0&&(I.shouldUpdate=!0)})),I.cytoCompleteCallback=M.cytoCompleteCallback,I.shouldUpdate=!0,I.computing=!1,I.workersDisabled=M.state.disableWebWorkers,I.setOptions(),I.worker=pl("CoseBilkentLayout",I.workersDisabled),I.pendingLayoutData=null,I}var x,O;return function(M,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(I&&I.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),Object.defineProperty(M,"prototype",{writable:!1}),I&&iu(M,I)}(w,b),x=w,O=[{key:"setOptions",value:function(){this.shouldUpdate=!0}},{key:"update",value:function(){var M=arguments.length>0&&arguments[0]!==void 0&&arguments[0],I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(this.shouldUpdate||M){var V=ou(I),z=ou(B);(V.length>0||z.length>0)&&(this.updatePositionsFromState(),this.layout(V,z))}_h(Nu(w.prototype),"update",this).call(this),this.shouldUpdate=!1}},{key:"getShouldUpdate",value:function(){return this.shouldUpdate||this.shouldUpdateAnimator}},{key:"getComputing",value:function(){return this.computing}},{key:"layout",value:function(M,I){var B=this;if(this.worker){if(M.length){var V=M.map(function(X){return{group:"nodes",data:{id:X.id}}}),z=I.map(function(X){return{group:"edges",data:{id:"rel".concat(X.id),source:X.from,target:X.to}}}),Y={elements:[].concat(vf(V),vf(z)),spacingFactor:M.reduce(function(X,J){var ie;return X+((ie=J.size)!==null&&ie!==void 0?ie:Zn)},0)/M.length*4.5/50*rt()};this.computing?this.pendingLayoutData=Y:(this.computing=!0,this.worker.port.onmessage=function(X){var J=X.data.positions;if(B.computing){for(var ie=0,he=Object.entries(J);ie<he.length;ie++){var ge=Ps(he[ie],2),le=ge[0],ye=ge[1];B.positions[le]=mh({id:le},ye)}B.cytoCompleteCallback(),B.startAnimation()}B.computing=!1,B.shouldUpdate=!0},setTimeout(function(){B.computing&&B.worker.port.postMessage(Y)},0))}}else zr.info("Cose-Bilkent layout code not yet initialised.")}},{key:"terminateUpdate",value:function(){this.computing=!1}},{key:"destroy",value:function(){var M;this.stateDisposers.forEach(function(I){I()}),(M=this.worker)===null||M===void 0||M.port.close()}}],O&&Ii(x.prototype,O),Object.defineProperty(x,"prototype",{writable:!1}),w}(Pd),bl=typeof Float32Array<"u"?Float32Array:Array;function au(){var b=new bl(16);return bl!=Float32Array&&(b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[11]=0,b[12]=0,b[13]=0,b[14]=0),b[0]=1,b[5]=1,b[10]=1,b[15]=1,b}Math.hypot||(Math.hypot=function(){for(var b=0,w=arguments.length;w--;)b+=arguments[w]*arguments[w];return Math.sqrt(b)});var As=function(b,w,x,O,M,I,B){var V=1/(w-x),z=1/(O-M),Y=1/(I-B);return b[0]=-2*V,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=-2*z,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=2*Y,b[11]=0,b[12]=(w+x)*V,b[13]=(M+O)*z,b[14]=(B+I)*Y,b[15]=1,b},up=Mi(9792),Ad=Mi.n(up);function mc(b){return mc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},mc(b)}function wh(b,w){for(var x=0;x<w.length;x++){var O=w[x];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(b,_c(O.key),O)}}function bc(b,w,x){return(w=_c(w))in b?Object.defineProperty(b,w,{value:x,enumerable:!0,configurable:!0,writable:!0}):b[w]=x,b}function _c(b){var w=function(x,O){if(mc(x)!="object"||!x)return x;var M=x[Symbol.toPrimitive];if(M!==void 0){var I=M.call(x,"string");if(mc(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(b);return mc(w)=="symbol"?w:String(w)}var la=function(){function b(O,M,I){var B=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};(function(J,ie){if(!(J instanceof ie))throw new TypeError("Cannot call a class as a function")})(this,b),bc(this,"shaderProgram",void 0),bc(this,"gl",void 0),bc(this,"curTexture",void 0),bc(this,"attributeInfo",void 0),bc(this,"uniformInfo",void 0);var V=O.createShader(O.FRAGMENT_SHADER);if(!O.isShader(V))throw new Error("Could not create shader object");var z=Ad()(I,B);O.shaderSource(V,z),O.compileShader(V),(0,r.isNil)(O.getShaderParameter(V,O.COMPILE_STATUS))&&zr.info(O.getShaderInfoLog(V));var Y=O.createShader(O.VERTEX_SHADER);if(!O.isShader(Y))throw new Error("Could not create shader object");var X=Ad()(M,B);if(O.shaderSource(Y,X),O.compileShader(Y),(0,r.isNil)(O.getShaderParameter(Y,O.COMPILE_STATUS))&&zr.info(O.getShaderInfoLog(Y)),this.shaderProgram=O.createProgram(),O.attachShader(this.shaderProgram,V),O.attachShader(this.shaderProgram,Y),O.linkProgram(this.shaderProgram),(0,r.isNil)(O.getProgramParameter(this.shaderProgram,O.LINK_STATUS)))throw new Error("Could not initialise shader");this.gl=O,this.curTexture=0,this.scanUniforms(),this.scanAttributes()}var w,x;return w=b,x=[{key:"setUniform",value:function(O,M){var I=this.gl,B=this.uniformInfo[O];if(B===void 0)throw new Error("Shader.setUniform - Uniform ".concat(O," not found in shader"));switch(B.type){case I.INT:I.uniform1i(B.location,M);break;case I.INT_VEC2:I.uniform2iv(B.location,M);break;case I.INT_VEC3:I.uniform3iv(B.location,M);break;case I.INT_VEC4:I.uniform4iv(B.location,M);break;case I.SAMPLER_2D:I.activeTexture(I.TEXTURE0+B.texture),I.bindTexture(I.TEXTURE_2D,M),I.uniform1i(B.location,B.texture);break;case I.SAMPLER_CUBE:case I.FLOAT:I.uniform1f(B.location,M);break;case I.FLOAT_VEC2:I.uniform2fv(B.location,M);break;case I.FLOAT_VEC3:I.uniform3fv(B.location,M);break;case I.FLOAT_VEC4:I.uniform4fv(B.location,M);break;case I.FLOAT_MAT2:I.uniformMatrix2fv(B.location,!1,M);break;case I.FLOAT_MAT3:I.uniformMatrix3fv(B.location,!1,M);break;case I.FLOAT_MAT4:I.uniformMatrix4fv(B.location,!1,M)}}},{key:"setAttributePointer",value:function(O,M,I,B){var V=this.gl,z=this.attributeInfo[O],Y=I*Float32Array.BYTES_PER_ELEMENT,X=B*Float32Array.BYTES_PER_ELEMENT;V.enableVertexAttribArray(z.position),V.vertexAttribPointer(z.position,M,V.FLOAT,!1,X,Y)}},{key:"setAttributePointerFloat",value:function(O,M,I,B){var V=this.gl,z=this.attributeInfo[O];V.enableVertexAttribArray(z.position),V.vertexAttribPointer(z.position,M,V.FLOAT,!1,B,I)}},{key:"setAttributePointerUShort",value:function(O,M,I,B){var V=this.gl,z=this.attributeInfo[O];V.enableVertexAttribArray(z.position),V.vertexAttribPointer(z.position,M,V.UNSIGNED_SHORT,!1,B,I)}},{key:"setAttributePointerByteNorm",value:function(O,M,I,B){var V=this.gl,z=this.attributeInfo[O];V.enableVertexAttribArray(z.position),V.vertexAttribPointer(z.position,M,V.UNSIGNED_BYTE,!0,B,I)}},{key:"setAttributePointerByte",value:function(O,M,I,B){var V=this.gl,z=this.attributeInfo[O];V.enableVertexAttribArray(z.position),V.vertexAttribPointer(z.position,M,V.UNSIGNED_BYTE,!1,B,I)}},{key:"use",value:function(){this.gl.useProgram(this.shaderProgram)}},{key:"remove",value:function(){this.gl.deleteProgram(this.shaderProgram)}},{key:"scanAttributes",value:function(){var O=this.gl;this.attributeInfo={};for(var M,I,B=O.getProgramParameter(this.shaderProgram,O.ACTIVE_ATTRIBUTES),V=0;V<B;V++)M=O.getActiveAttrib(this.shaderProgram,V),I=O.getAttribLocation(this.shaderProgram,M.name),this.attributeInfo[M.name]={type:M.type,position:I}}},{key:"scanUniforms",value:function(){var O=this.gl;this.uniformInfo={};for(var M,I=O.getProgramParameter(this.shaderProgram,O.ACTIVE_UNIFORMS),B=0;B<I;B++){M=O.getActiveUniform(this.shaderProgram,B);var V=O.getUniformLocation(this.shaderProgram,M.name),z={type:M.type,location:V};M.type===O.SAMPLER_2D&&(z.texture=this.curTexture,this.curTexture+=1),this.uniformInfo[M.name]=z}}}],x&&wh(w.prototype,x),Object.defineProperty(w,"prototype",{writable:!1}),b}();function su(b){return su=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},su(b)}function _e(b,w){for(var x=0;x<w.length;x++){var O=w[x];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(b,Fu(O.key),O)}}function Fu(b){var w=function(x,O){if(su(x)!="object"||!x)return x;var M=x[Symbol.toPrimitive];if(M!==void 0){var I=M.call(x,"string");if(su(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(b);return su(w)=="symbol"?w:String(w)}function Bu(b){var w=typeof Map=="function"?new Map:void 0;return Bu=function(x){if(x===null||!function(M){try{return Function.toString.call(M).indexOf("[native code]")!==-1}catch{return typeof M=="function"}}(x))return x;if(typeof x!="function")throw new TypeError("Super expression must either be null or a function");if(w!==void 0){if(w.has(x))return w.get(x);w.set(x,O)}function O(){return function(M,I,B){if(gr())return Reflect.construct.apply(null,arguments);var V=[null];V.push.apply(V,I);var z=new(M.bind.apply(M,V));return B&&jr(z,B.prototype),z}(x,arguments,gf(this).constructor)}return O.prototype=Object.create(x.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),jr(O,x)},Bu(b)}function gr(){try{var b=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gr=function(){return!!b})()}function jr(b,w){return jr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(x,O){return x.__proto__=O,x},jr(b,w)}function gf(b){return gf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(w){return w.__proto__||Object.getPrototypeOf(w)},gf(b)}var _l=function(b){function w(){return function(V,z){if(!(V instanceof z))throw new TypeError("Cannot call a class as a function")}(this,w),M=this,B=arguments,I=gf(I=w),function(V,z){if(z&&(su(z)==="object"||typeof z=="function"))return z;if(z!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Y){if(Y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Y}(V)}(M,gr()?Reflect.construct(I,B||[],gf(M).constructor):I.apply(M,B));var M,I,B}var x,O;return function(M,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(I&&I.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),Object.defineProperty(M,"prototype",{writable:!1}),I&&jr(M,I)}(w,b),x=w,(O=[{key:"toString",value:function(){return this.message}}])&&_e(x.prototype,O),Object.defineProperty(x,"prototype",{writable:!1}),w}(Bu(Error));const yf=`uniform mat4 u_projection;

attribute vec2 a_position;
//attribute float a_index;

//varying highp float index;

void main() {
//  index = a_index;
  gl_Position = u_projection * vec4(a_position, 0.0, 1.0);
}`;function es(b){return es=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},es(b)}function xg(b,w){for(var x=0;x<w.length;x++){var O=w[x];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(b,La(O.key),O)}}function La(b){var w=function(x,O){if(es(x)!="object"||!x)return x;var M=x[Symbol.toPrimitive];if(M!==void 0){var I=M.call(x,"string");if(es(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(b);return es(w)=="symbol"?w:String(w)}var lp=function(){function b(O,M){(function(I,B){if(!(I instanceof B))throw new TypeError("Cannot call a class as a function")})(this,b),this.graph=this.constructGraphObjects(O,M),this.subGraphs=[],this.sunMap={}}var w,x;return w=b,x=[{key:"constructGraphObjects",value:function(O,M){var I=new Array(O.nodes.length),B=new Array(O.rels.length),V={},z=[];return O.nodes.forEach(function(Y,X){I[X]=[],B[X]=[],z.push(Y)}),O.rels.forEach(function(Y){var X=M[Y.from],J=M[Y.to];X!==void 0&&J!==void 0&&(I[X].push(J),I[J].push(X),B[X].push(Y.id),B[J].push(Y.id),V[Y.id]=Y)}),this.relIdMap=B,{nodes:z,relationships:I,idToRel:V}}},{key:"coarsenTo",value:function(O){for(var M=this.graph,I=M.nodes.length,B=0;M.nodes.length>O&&M.relationships.some(function(z){return z.length>0});){var V=this.coarsen(M,B===0);if(B===0&&(this.nodeSortMap=V.nodeSortMap),this.subGraphs.push(V.sortedInput),(M=V.output).relationships.length===0||M.relationships.every(function(z){return z.length===0})||I===M.nodes.length)break;I=M.nodes.length,B+=1}return this.subGraphs.push(M),M}},{key:"coarsenBy",value:function(O){for(var M=O,I=this.graph,B=I.nodes.length,V=M;M>0;){var z=this.coarsen(I,M===V);if(this.subGraphs.push(z.sortedInput),(I=z.output).relationships.length===0||I.relationships.every(function(Y){return Y.length===0})||B===I.nodes.length)break;B=I.nodes.length,M-=1}return this.subGraphs.push(I),I}},{key:"coarsen",value:function(O,M){var I=this,B=O.nodes,V=O.relationships,z=B.map(function(Ge,Ke){return Ke}),Y={},X={};B.forEach(function(Ge,Ke){Y[Ke]=Ge,X[Ge.id]=Ke});for(var J=V.map(function(Ge){return Ge.slice()}),ie={suns:{},planets:{},moons:{}},he=[],ge=[],le=function(){var Ge=z[0];z.splice(z.indexOf(Ge),1),V[Ge].forEach(function(Ve){var tt=z.indexOf(Ve);tt>=0&&z.splice(tt,1);var mt=-1,It=J[Ve];It.forEach(function(bt,jt){var Ct=z.indexOf(bt);Ct>=0?z.splice(Ct,1):bt===Ge&&(mt=jt)}),It.splice(mt,1)});var Ke={id:Ge};if(M)Ke.originalId=Y[Ge].id;else{var $e=Y[Ge];Ke.finestIndex=$e.finestIndex,Ke.originalId=$e.originalId}he.push(Ke),ie.suns[Ge]=Ke};z.length>0;)le();he.forEach(function(Ge,Ke){ge[Ke]=[]}),he.forEach(function(Ge,Ke){var $e={},Ve=[];V[Ge.id].forEach(function(tt){if(tt!==Ge.id&&!$e[tt]){var mt={id:tt,parent:Ge,sunId:Ke,moons:[]},It=Y[tt];mt.size=function(){return mt.moons.length+1},mt.weight=It.weight||1,mt.children=function(){return mt.moons},M?mt.originalId=It.id:(mt.finestIndex=It.finestIndex,mt.originalId=It.originalId),Ve.push(mt),$e[tt]=!0}}),Ve.forEach(function(tt){ie.planets[tt.id]=tt}),Ge.planets=Ve,Ge.children=function(){return Ge.planets},Ge.weight=Ge.planets.reduce(function(tt,mt){return tt+(mt.weight||1)},0)+(Y[Ge.id].weight||1),Ge.size=function(){return Ge.planets.reduce(function(tt,mt){return tt+mt.size()},0)+1}});var ye=B.filter(function(Ge,Ke){return!he.find(function($e){return $e.id===Ke})&&!ie.planets[Ke]});ye.forEach(function(Ge){for(var Ke=X[Ge.id],$e=J[Ke],Ve=null,tt=-1,mt=0;mt<$e.length;mt++){var It=$e[mt];if(It!==Ke&&(Ve=ie.planets[It])){tt=mt;break}}if($e.splice(tt,1),Ve){var bt={id:Ke,size:function(){return 0}};bt.weight=Y[Ke].weight||1,bt.parent=Ve,bt.sunId=Ve.sunId,M?bt.originalId=Ge.id:(bt.finestIndex=Ge.finestIndex,bt.originalId=Ge.originalId),ie.moons[Ke]=bt,Ve.moons.push(bt),Ve.weight+=bt.weight,Ve.parent.weight+=bt.weight;var jt=J[Ve.id];jt.splice(jt.indexOf(Ke),1)}}),J.forEach(function(Ge,Ke){if(!ie.suns[Ke]){var $e=ie.planets[Ke]||ie.moons[Ke];J[Ke].forEach(function(Ve){var tt=ie.planets[Ve];if(tt||(tt=ie.moons[Ve]),$e.sunId!==tt.sunId){var mt=ge[$e.sunId];mt.includes(tt.sunId)||mt.push(tt.sunId)}})}});var Me=[],Ne=0,Ue={};he.forEach(function(Ge,Ke){var $e=B[Ge.id];Ue[Ge.id]=Ne,Ge.previousIndex=Ke,Ge.id=Ne,Ne+=1,M&&($e.finestIndex=Ge.id,Ge.finestIndex=Ge.id),Me.push($e),Ge.planets.forEach(function(Ve){var tt=B[Ve.id];Ue[Ve.id]=Ne,Ve.id=Ne,Ne+=1,Ve.sunId=Ge.id,M&&(tt.finestIndex=Ve.id),I.sunMap[Ve.originalId]=Ge.originalId,Me.push(tt),Ve.moons.forEach(function(mt){var It=B[mt.id];Ue[mt.id]=Ne,mt.id=Ne,Ne+=1,mt.sunId=Ge.id,M&&(It.finestIndex=mt.id),I.sunMap[mt.originalId]=Ge.originalId,Me.push(It)})})});var je=[],Xe=[];return V.forEach(function(Ge,Ke){var $e=Ue[Ke];je[$e]=Ge.map(function(Ve){return Ue[Ve]}),M&&(Xe[$e]=Ge.map(function(Ve,tt){return I.relIdMap[Ke][tt]}))}),Xe&&Xe.length>0&&(this.relIdMap=Xe),{output:{nodes:he,relationships:ge},sortedInput:{nodes:Me,relationships:je},nodeSortMap:Ue}}}],x&&xg(w.prototype,x),Object.defineProperty(w,"prototype",{writable:!1}),b}(),mf=function(b,w,x){for(var O=2*Math.PI/x,M=[],I=0;I<x;I++){var B=O*I;M.push({x:b.x+w*Math.cos(B),y:b.y+w*Math.sin(B)})}return M};function wl(b){return wl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},wl(b)}function Na(b,w){var x=typeof Symbol<"u"&&b[Symbol.iterator]||b["@@iterator"];if(!x){if(Array.isArray(b)||(x=function(z,Y){if(z){if(typeof z=="string")return Rd(z,Y);var X=Object.prototype.toString.call(z).slice(8,-1);return X==="Object"&&z.constructor&&(X=z.constructor.name),X==="Map"||X==="Set"?Array.from(z):X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X)?Rd(z,Y):void 0}}(b))||w){x&&(b=x);var O=0,M=function(){};return{s:M,n:function(){return O>=b.length?{done:!0}:{done:!1,value:b[O++]}},e:function(z){throw z},f:M}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I,B=!0,V=!1;return{s:function(){x=x.call(b)},n:function(){var z=x.next();return B=z.done,z},e:function(z){V=!0,I=z},f:function(){try{B||x.return==null||x.return()}finally{if(V)throw I}}}}function Rd(b,w){(w==null||w>b.length)&&(w=b.length);for(var x=0,O=new Array(w);x<w;x++)O[x]=b[x];return O}function ca(b,w){for(var x=0;x<w.length;x++){var O=w[x];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(b,Eh(O.key),O)}}function or(b,w,x){return(w=Eh(w))in b?Object.defineProperty(b,w,{value:x,enumerable:!0,configurable:!0,writable:!0}):b[w]=x,b}function Eh(b){var w=function(x,O){if(wl(x)!="object"||!x)return x;var M=x[Symbol.toPrimitive];if(M!==void 0){var I=M.call(x,"string");if(wl(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(b);return wl(w)=="symbol"?w:String(w)}var ho="PhysLayout",vo=new Float32Array(4),fa=256,bf=function(b){for(var w={},x={},O=0;O<b.length;O++)w[b[O].id]=O,x[O]=b[O].id;return{nodeIdToIndex:w,nodeIndexToId:x}},cp=function(){function b(O){var M=this;(function(ie,he){if(!(ie instanceof he))throw new TypeError("Cannot call a class as a function")})(this,b),or(this,"physVbo",void 0),or(this,"physSmallVbo",void 0),or(this,"physProjection",void 0),or(this,"physSmallProjection",void 0),or(this,"gl",void 0),or(this,"useReadpixelWorkaround",void 0),or(this,"averageNodeSize",void 0),or(this,"shouldUpdate",void 0),or(this,"iterationCount",void 0),or(this,"lastSpeedValues",void 0),or(this,"rollingAvgGraphSpeed",void 0),or(this,"nodeVariation",void 0),or(this,"nodeCenterPoint",void 0),or(this,"peakIterationMultiplier",void 0),or(this,"stateDisposers",void 0),or(this,"state",void 0),or(this,"dpr",void 0),or(this,"intelWorkaround",void 0),or(this,"simulationStopVelocitySquared",void 0),or(this,"gravity",void 0),or(this,"force",void 0),or(this,"nodeIdToIndex",void 0),or(this,"nodeIndexToId",void 0),or(this,"numNodes",void 0),or(this,"solarMerger",void 0),or(this,"subGraphs",void 0),or(this,"nodeSortMap",void 0),or(this,"firstUpdate",void 0),or(this,"curPhysData",void 0),or(this,"apprxRepForceShader",void 0),or(this,"levelsClusterTexture",void 0),or(this,"levelsFinestIndexTexture",void 0),or(this,"initalLevelTexture",void 0),or(this,"levelsData",void 0),or(this,"collisionDetectionMultiplier",void 0),or(this,"physShader",void 0),or(this,"physData",void 0),or(this,"workaroundData",void 0),or(this,"pinData",void 0),or(this,"updateData",void 0),or(this,"updateShader",void 0),or(this,"workaroundShader",void 0),or(this,"physPositions",void 0),or(this,"springTexture",void 0),or(this,"sizeTexture",void 0),or(this,"offsetTexture",void 0),or(this,"pinTexture",void 0),or(this,"addedNodes",void 0),or(this,"updateTexture",void 0),or(this,"enableVerlet",void 0);var I=O.state,B=O.webGLContext;if(zr.info("layout - webGLContext",!!B),O.webGLContext===void 0)throw new Error("PhysLayout missing options: webGLContext - webgl context");if(O.state===void 0)throw new Error("PhysLayout missing options: state - state object");var V=B;this.checkCompatibility(V),this.printGlStats(V),this.physVbo=V.createBuffer(),V.bindBuffer(V.ARRAY_BUFFER,this.physVbo);var z=new Float32Array([0,0,rr,0,0,rr,rr,rr]);V.bufferData(V.ARRAY_BUFFER,z,V.STATIC_DRAW),this.physSmallVbo=V.createBuffer(),V.bindBuffer(V.ARRAY_BUFFER,this.physSmallVbo);var Y=new Float32Array([0,0,fa,0,0,fa,fa,fa]);V.bufferData(V.ARRAY_BUFFER,Y,V.STATIC_DRAW),this.physProjection=au(),As(this.physProjection,0,rr,rr,0,0,1e6),this.physSmallProjection=au(),As(this.physSmallProjection,0,fa,fa,0,0,1e6),V.disable(V.DEPTH_TEST),this.gl=V,this.useReadpixelWorkaround&&this.setupReadpixelWorkaround(),this.setupUpdates(),this.averageNodeSize=Zn,this.shouldUpdate=!0,this.iterationCount=0,this.lastSpeedValues=[],this.rollingAvgGraphSpeed=0,this.nodeVariation=0,this.nodeCenterPoint=[0,0],this.peakIterationMultiplier=160,this.setOptions(O,!0),this.definePhysicsArrays();var X=I.nodes,J=I.rels;X.addChannel(ho),J.addChannel(ho),this.stateDisposers=[],this.stateDisposers.push(I.reaction(function(){return I.graphUpdates},function(){var ie=X.channels[ho];if(X.version!==void 0&&ie){var he=Object.values(ie.adds).length>0,ge=Object.values(ie.removes).length>0,le=Object.values(ie.updates),ye=pe(le);(he||ge||ye)&&(M.shouldUpdate=!0,M.checkForUpdates())}var Me=J.channels[ho];if(J.version!==void 0&&Me){var Ne=Object.values(Me.adds).length>0,Ue=Object.values(Me.removes).length>0;(Ne||Ue)&&(M.shouldUpdate=!0,M.checkForUpdates())}})),this.setData({nodes:X.items,rels:J.items}),this.state=I,this.dpr=window.devicePixelRatio||1}var w,x;return w=b,x=[{key:"setOptions",value:function(O){var M=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(O){var I=O.intelWorkaround,B=O.simulationStopVelocity,V=O.gravity,z=O.enableVerlet,Y=z!==void 0&&z;M&&(this.intelWorkaround=I,this.enableVerlet=Y);var X=this.enableVerlet?.25:B??100;this.simulationStopVelocitySquared=X*X,this.gravity=V??100,this.force=0}}},{key:"setData",value:function(O){var M=bf(O.nodes),I=M.nodeIdToIndex,B=M.nodeIndexToId;return this.nodeIdToIndex=I,this.nodeIndexToId=B,this.numNodes=O.nodes.length,this.solarMerger=new lp(O,I),this.solarMerger.coarsenTo(1),this.subGraphs=this.solarMerger.subGraphs,this.nodeSortMap=this.solarMerger.nodeSortMap,this.setupSprings(this.subGraphs[0]),this.setupSize(this.subGraphs[0]),this.setupPhysics(),this.firstUpdate=!0,this.curPhysData=0,this.shouldUpdate=!0,this.iterationCount=0,this.subGraphs[0]}},{key:"update",value:function(){var O=arguments.length>0&&arguments[0]!==void 0&&arguments[0],M=this.gl;if(this.checkForUpdates(O),!this.shouldUpdate)return M.bindFramebuffer(M.FRAMEBUFFER,this.getPhysData(0).frameBuffer),M.readPixels(0,0,rr,rr,M.RGBA,M.FLOAT,this.physPositions),!1;M.disable(M.BLEND);for(var I=this.nodeVariation/(this.numNodes||1)>.3,B=this.getScaleNumber(this.iterationCount),V=this.subGraphs?this.subGraphs.length:0,z=this.getPhysData(0).texture,Y=V-1;Y>0;Y--){var X=this.subGraphs[Y].nodes.length,J=Y===V-1;this.apprxRepForceShader.use(),this.apprxRepForceShader.setUniform("u_physData",z),this.apprxRepForceShader.setUniform("u_clusterData",this.levelsClusterTexture[Y]),this.apprxRepForceShader.setUniform("u_finestIndexes",this.levelsFinestIndexTexture[Y]),this.apprxRepForceShader.setUniform("u_prevForce",J?this.initalLevelTexture:this.levelsData[Y+1].texture),this.apprxRepForceShader.setUniform("u_numNodes",X),this.apprxRepForceShader.setUniform("u_iterationMultiplier",B),this.apprxRepForceShader.setUniform("u_baseLength",this.getBaseLength(X)),this.apprxRepForceShader.setUniform("u_isTopLevel",J?1:0),M.bindBuffer(M.ARRAY_BUFFER,this.physSmallVbo),this.apprxRepForceShader.setAttributePointer("a_position",2,0,2),M.bindFramebuffer(M.FRAMEBUFFER,this.levelsData[Y].frameBuffer),M.viewport(0,0,fa,fa),M.drawArrays(M.TRIANGLE_STRIP,0,4)}if(this.collisionDetectionMultiplier=0,this.collisionDetectionMultiplier=I?Math.min(this.iterationCount/Math.min(this.numNodes,300),1):1,this.force=V<=1?this.initalLevelTexture:this.levelsData[1].texture,this.physShader.use(),this.physShader.setUniform("u_prevForce",V<=1?this.initalLevelTexture:this.levelsData[1].texture),this.physShader.setUniform("u_connections",this.springTexture),this.physShader.setUniform("u_sizeTexture",this.sizeTexture),this.physShader.setUniform("u_connectionOffsets",this.offsetTexture),this.physShader.setUniform("u_physData",z),this.physShader.setUniform("u_pinnedNodes",this.pinTexture),this.physShader.setUniform("u_iterationMultiplier",B),this.physShader.setUniform("u_curIteration",this.iterationCount),this.physShader.setUniform("u_numNodes",this.numNodes),this.physShader.setUniform("u_clusterData",this.levelsClusterTexture[0]),this.physShader.setUniform("u_collisionMultiplier",this.collisionDetectionMultiplier),this.physShader.setUniform("u_baseLength",this.getBaseLength()),this.firstUpdate=!1,M.bindBuffer(M.ARRAY_BUFFER,this.physVbo),this.physShader.setAttributePointer("a_position",2,0,2),M.bindFramebuffer(M.FRAMEBUFFER,this.getPhysData(1).frameBuffer),M.viewport(0,0,rr,rr),M.drawArrays(M.TRIANGLE_STRIP,0,4),this.useReadpixelWorkaround?this.doReadpixelWorkaround():(M.bindFramebuffer(M.FRAMEBUFFER,this.getPhysData(0).frameBuffer),M.readPixels(0,0,rr,rr,M.RGBA,M.FLOAT,this.physPositions)),this.curPhysData=(this.curPhysData+1)%this.physData.length,this.iterationCount+=1,this.numNodes<2)this.shouldUpdate=!1,this.iterationCount=0;else if(this.iterationCount%5==0){var ie=this.iterationCount<300,he=ie?this.getMaxSpeedSquared():this.getMedianSpeedSquared(this.addedNodes);this.lastSpeedValues.push(he),this.rollingAvgGraphSpeed=this.lastSpeedValues.reduce(function(ye,Me){return ye+Me},0)/this.lastSpeedValues.length;var ge=ie&&he>=this.rollingAvgGraphSpeed,le=this.simulationStopVelocitySquared&&this.rollingAvgGraphSpeed<this.simulationStopVelocitySquared;this.lastSpeedValues.length>20&&this.lastSpeedValues.shift(),!ge&&le===!0&&this.iterationCount>2&&this.terminateUpdate()}return this.shouldUpdate}},{key:"terminateUpdate",value:function(){zr.info("Cooling down after ".concat(this.iterationCount," iterations at graph speed of ").concat(Math.sqrt(this.rollingAvgGraphSpeed))),this.shouldUpdate=!1,this.iterationCount=0,this.rollingAvgGraphSpeed=0,this.lastSpeedValues=[],this.addedNodes=null,this.nodeVariation=0}},{key:"getShouldUpdate",value:function(){return this.shouldUpdate}},{key:"getComputing",value:function(){return!1}},{key:"getNodePositions",value:function(O){var M=[];if(this.useReadpixelWorkaround){var I,B=Na(O);try{for(B.s();!(I=B.n()).done;){var V=I.value,z=this.nodeIdToIndex[V.id],Y=V.id,X=void 0,J=void 0;z!==void 0&&(X=this.workaroundData[0].dataFloat[z],J=this.workaroundData[1].dataFloat[z]),M.push({id:Y,x:X,y:J})}}catch(Ue){B.e(Ue)}finally{B.f()}}else{var ie,he=Na(O);try{for(he.s();!(ie=he.n()).done;){var ge=ie.value,le=this.nodeIdToIndex[ge.id],ye=ge.id,Me=void 0,Ne=void 0;le!==void 0&&(Me=this.physPositions[4*le+0],Ne=this.physPositions[4*le+1]),M.push({id:ye,x:Me,y:Ne})}}catch(Ue){he.e(Ue)}finally{he.f()}}return M}},{key:"reheat",value:function(O){this.setupSize(this.subGraphs[0]),this.shouldUpdate=!0,this.iterationCount=0,this.nodeVariation=O.nodes.length}},{key:"updateNodes",value:function(O){var M=this.gl,I=new Set;M.bindTexture(M.TEXTURE_2D,this.getPhysData().texture);var B,V=Na(O);try{for(V.s();!(B=V.n()).done;){var z=B.value,Y=this.nodeIdToIndex[z.id];if(z.x!==void 0&&z.y!==void 0){vo[0]=z.x,vo[1]=z.y,vo[2]=0,vo[3]=0;var X=Y%rr,J=(Y-X)/rr;M.texSubImage2D(M.TEXTURE_2D,0,X,J,1,1,M.RGBA,M.FLOAT,vo),this.useReadpixelWorkaround?(this.workaroundData[0].dataFloat[Y]=z.x,this.workaroundData[1].dataFloat[Y]=z.y):(this.physPositions[4*Y+0]=z.x,this.physPositions[4*Y+1]=z.y)}z.pinned!==void 0&&(this.pinData[Y]=z.pinned?255:0),Object.keys(z).forEach(function(ie){return I.add(ie)})}}catch(ie){V.e(ie)}finally{V.f()}I.has("pinned")&&(M.bindTexture(M.TEXTURE_2D,this.pinTexture),M.texImage2D(M.TEXTURE_2D,0,M.ALPHA,rr,rr,0,M.ALPHA,M.UNSIGNED_BYTE,this.pinData)),(I.has("x")||I.has("y")||I.has("size"))&&(this.shouldUpdate=!0,this.iterationCount=0)}},{key:"addRemoveData",value:function(O,M){var I=this.gl;this.numNodes=O.nodes.length,this.physShader.use(),this.physShader.setUniform("u_numNodes",this.numNodes),this.physShader.setUniform("u_baseLength",this.getBaseLength());var B=bf(O.nodes).nodeIdToIndex,V=new lp(O,B);V.coarsenTo(1);var z=V.subGraphs[0],Y=this.subGraphs[0],X=function(Ct){return Y.nodes.findIndex(function(Pe){return Pe.id===Ct})},J=Object.values(M.adds),ie=Object.values(M.removes);this.addedNodes=J.length>0?{}:null,this.nodeVariation=J.length+ie.length;for(var he,ge=3*Math.sqrt(O.nodes.length),le={x:0,y:0},ye=z.nodes.length,Me=new Uint8Array(65536),Ne=0;Ne<ye;Ne++){var Ue=0,je=0,Xe=z.nodes[Ne];if(he=Xe.id,!!M.adds[he]){if(this.addedNodes[Ne]=Xe.id,Ue=Xe.position?Xe.position.x:void 0,je=Xe.position?Xe.position.y:void 0,Ue===void 0||je===void 0){var Ge=V.sunMap,Ke=void 0;for(Ke=Ge[Xe.id];Ke!==void 0;Ke=Ge[Ke]){var $e=X(Ke);if($e!==-1){var Ve=this.getNodePosition($e);Ue=Ve.x+10*(Math.random()-.5),je=Ve.y+10*(Math.random()-.5);break}}Ke===void 0&&(Ue=this.nodeCenterPoint[0]+ge*(Math.random()-.5),je=this.nodeCenterPoint[1]+ge*(Math.random()-.5))}this.updateData[2*Ne]=Ue,this.updateData[2*Ne+1]=je,Me[Ne]=Xe.pinned?255:0}else{var tt=X(Xe.id),mt=this.getNodePosition(tt);Ue=mt.x,je=mt.y,this.updateData[2*Ne]=tt,this.updateData[2*Ne+1]=999999,Me[Ne]=this.pinData[tt]}le.x+=Ue||0,le.y+=je||0}this.nodeCenterPoint=ye?[le.x/ye,le.y/ye]:[0,0],this.pinData=Me,this.subGraphs=V.subGraphs,this.nodeSortMap=V.nodeSortMap,this.setupSprings(this.subGraphs[0]),this.setupSize(this.subGraphs[0]);var It=bf(this.subGraphs[0].nodes),bt=It.nodeIdToIndex,jt=It.nodeIndexToId;return this.nodeIdToIndex=bt,this.nodeIndexToId=jt,I.bindTexture(I.TEXTURE_2D,this.updateTexture),I.texImage2D(I.TEXTURE_2D,0,I.ALPHA,rr,rr,0,I.ALPHA,I.FLOAT,this.updateData),zr.info("Setting gravity center to ",this.nodeCenterPoint),this.physShader.setUniform("u_gravityCenter",this.nodeCenterPoint),this.updateShader.use(),this.updateShader.setUniform("u_numNodesNew",z.nodes.length),this.updateShader.setUniform("u_physData",this.getPhysData(0).texture),this.updateShader.setUniform("u_updateData",this.updateTexture),I.disable(I.BLEND),I.bindBuffer(I.ARRAY_BUFFER,this.physVbo),this.updateShader.setAttributePointer("a_position",2,0,2),I.bindFramebuffer(I.FRAMEBUFFER,this.getPhysData(1).frameBuffer),I.viewport(0,0,rr,rr),I.drawArrays(I.TRIANGLE_STRIP,0,4),this.curPhysData=(this.curPhysData+1)%this.physData.length,this.useReadpixelWorkaround?this.doReadpixelWorkaround():(I.bindFramebuffer(I.FRAMEBUFFER,this.getPhysData().frameBuffer),I.readPixels(0,0,rr,rr,I.RGBA,I.FLOAT,this.physPositions)),(J.length>0||ie.length>0)&&(I.bindTexture(I.TEXTURE_2D,this.pinTexture),I.texImage2D(I.TEXTURE_2D,0,I.ALPHA,rr,rr,0,I.ALPHA,I.UNSIGNED_BYTE,this.pinData)),this.shouldUpdate=!0,this.iterationCount=0,this.setupPhysicsForCoarse(),this.subGraphs[0]}},{key:"destroy",value:function(){var O=this;this.gl.deleteBuffer(this.physVbo),this.gl.deleteBuffer(this.physSmallVbo),this.physData.forEach(function(M){O.gl.deleteFramebuffer(M.frameBuffer),O.gl.deleteTexture(M.texture)}),this.levelsData.forEach(function(M){O.gl.deleteFramebuffer(M.frameBuffer),O.gl.deleteTexture(M.texture)}),this.levelsClusterTexture.forEach(function(M){O.gl.deleteTexture(M)}),this.levelsFinestIndexTexture.forEach(function(M){O.gl.deleteTexture(M)}),this.gl.deleteTexture(this.initalLevelTexture),this.gl.deleteTexture(this.sizeTexture),this.gl.deleteTexture(this.offsetTexture),this.gl.deleteTexture(this.springTexture),this.gl.deleteTexture(this.pinTexture),this.gl.deleteTexture(this.updateTexture),this.apprxRepForceShader!==void 0&&this.apprxRepForceShader.remove(),this.updateShader!==void 0&&this.updateShader.remove(),this.physShader!==void 0&&this.physShader.remove(),this.physPositions=null,this.gl=null,this.stateDisposers.forEach(function(M){M()}),this.state.nodes.removeChannel(ho),this.state.rels.removeChannel(ho)}},{key:"dumpTexture",value:function(O,M,I){var B=this.gl;zr.info("--- Dumping texture ",I),B.bindFramebuffer(B.FRAMEBUFFER,O),B.readPixels(0,0,rr,rr,B.RGBA,B.FLOAT,this.physPositions);for(var V=0;V<M;V++)zr.info(V,": ",this.physPositions[4*V+0],this.physPositions[4*V+1],this.physPositions[4*V+2],this.physPositions[4*V+3])}},{key:"getScaleNumber",value:function(O){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(I,B,V){return V+Math.pow(10,6)*Math.pow(I-120,-1.7)};return O===0?0:O<300?200+-1/Math.pow(10,5)*3*Math.pow(Math.abs(O-200+12),3):M(O,200,10)}},{key:"getBaseLength",value:function(O){if(O===void 0||O===this.numNodes)return 100*this.dpr;var M=Math.pow(this.averageNodeSize/2,2)*Math.PI,I=this.numNodes/O*M;return(100+Math.sqrt(I/Math.PI)/2/O)*this.dpr}},{key:"checkForUpdates",value:function(){var O=arguments.length>0&&arguments[0]!==void 0&&arguments[0],M=this.state,I=M.nodes,B=M.rels,V={nodes:I.items,rels:B.items},z=Object.values(I.channels[ho].adds).length>0,Y=Object.values(B.channels[ho].adds).length>0,X=Object.values(I.channels[ho].removes).length>0,J=Object.values(B.channels[ho].removes).length>0,ie=Object.values(I.channels[ho].updates);(z||Y||X||J)&&this.addRemoveData(V,{adds:I.channels[ho].adds,removes:I.channels[ho].removes}),O?(this.updateNodes(V.nodes),this.reheat(V)):ie.length>0&&(this.updateNodes(ie),pe(ie)&&this.reheat(V)),I.clearChannel(ho),B.clearChannel(ho)}},{key:"getNodePosition",value:function(O){return this.useReadpixelWorkaround?{x:this.workaroundData[0].dataFloat[O],y:this.workaroundData[1].dataFloat[O]}:{x:this.physPositions[4*O+0],y:this.physPositions[4*O+1]}}},{key:"getMaxSpeedSquared",value:function(){var O=0;if(this.useReadpixelWorkaround)for(var M=0;M<this.numNodes;M++){var I=this.workaroundData[2].dataFloat[M],B=this.workaroundData[3].dataFloat[M],V=I*I+B*B;V>O&&(O=V)}else for(var z=0;z<this.numNodes;z++){var Y=this.physPositions[4*z+2],X=this.physPositions[4*z+3],J=Y*Y+X*X;J>O&&(O=J)}return O}},{key:"getMedianSpeedSquared",value:function(O){var M=[];if(this.useReadpixelWorkaround)for(var I=0;I<this.numNodes;I++){var B=this.workaroundData[2].dataFloat[I],V=this.workaroundData[3].dataFloat[I],z=B*B+V*V;M[I]=z}else for(var Y=0;Y<this.numNodes;Y++)if(!O||O[Y]){var X=this.physPositions[4*Y+2],J=this.physPositions[4*Y+3],ie=X*X+J*J;M.push(ie)}return M.sort(function(he,ge){return he-ge}),M[Math.floor(M.length/2)]}},{key:"getPhysData",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.physData[(this.curPhysData+O)%this.physData.length]}},{key:"newTexture",value:function(O,M,I){var B=arguments.length>3&&arguments[3]!==void 0?arguments[3]:O.FLOAT,V=arguments.length>4&&arguments[4]!==void 0?arguments[4]:O.RGBA,z=O.createTexture();return O.bindTexture(O.TEXTURE_2D,z),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_MIN_FILTER,O.NEAREST),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_MAG_FILTER,O.NEAREST),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_WRAP_S,O.CLAMP_TO_EDGE),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_WRAP_T,O.CLAMP_TO_EDGE),O.texImage2D(O.TEXTURE_2D,0,V,I,I,0,V,B,M),z}},{key:"newFramebuffer",value:function(O,M){var I=O.createFramebuffer();return O.bindFramebuffer(O.FRAMEBUFFER,I),O.framebufferTexture2D(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_2D,M,0),I}},{key:"checkCompatibility",value:function(O){function M(X){throw new _l(X)}O||M("Could not initialize WebGL"),O.getParameter(O.MAX_VERTEX_TEXTURE_IMAGE_UNITS)===0&&M("Vertex shader texture access not available"),O.getExtension("OES_texture_float")||M("OES_texture_float extension not available"),O.getExtension("WEBGL_color_buffer_float")||(zr.info("gl.readPixels doesnt work for float texture, activating workaround"),this.useReadpixelWorkaround=!0);var I=O.getParameter(O.MAX_TEXTURE_SIZE),B=Math.max(rr,io);if(I<B&&M("Need larger WebGL texture support. Avaliable: ".concat(I," needed: ").concat(B)),!this.useReadpixelWorkaround){var V=new Float32Array(4),z=this.newTexture(O,V,1),Y=this.newFramebuffer(O,z);O.bindFramebuffer(O.FRAMEBUFFER,Y),O.readPixels(0,0,1,1,O.RGBA,O.FLOAT,V),O.getError()!==O.NO_ERROR&&(zr.info("gl.readPixels doesnt work for float texture, activating workaround"),this.useReadpixelWorkaround=!0),O.bindFramebuffer(O.FRAMEBUFFER,null),O.deleteFramebuffer(Y),O.deleteTexture(z)}}},{key:"printGlStats",value:function(O){var M="?",I="?";if(O.getParameter(O.RENDERER))I=O.getParameter(O.RENDERER),M=O.getParameter(O.VENDOR);else{var B=O.getExtension("WEBGL_debug_renderer_info");B&&(M=O.getParameter(B.UNMASKED_VENDOR_WEBGL),I=O.getParameter(B.UNMASKED_RENDERER_WEBGL))}zr.trace("Vendor: ".concat(M)),zr.trace("Renderer: ".concat(I));var V=O.getParameter(O.ALIASED_LINE_WIDTH_RANGE);zr.trace("Line width range: ".concat(V));var z=O.getSupportedExtensions();zr.trace("Extentions:"),z.length>0&&z.forEach(function(Y){return zr.trace(Y)})}},{key:"adjustToGlSize",value:function(O){return O*this.dpr*2.5}},{key:"setupSize",value:function(){for(var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{nodes:[]},M=new Float32Array(65536),I=O.nodes,B=I.length,V=0,z=0;z<B;z++){var Y,X=parseInt((Y=I[z].size)!==null&&Y!==void 0?Y:Zn,10);M[z]=this.adjustToGlSize(X),V+=X}this.averageNodeSize=B?V/B:Zn;var J=this.gl;this.sizeTexture===void 0&&(this.sizeTexture=J.createTexture()),J.bindTexture(J.TEXTURE_2D,this.sizeTexture),J.texImage2D(J.TEXTURE_2D,0,J.ALPHA,rr,rr,0,J.ALPHA,J.FLOAT,M),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MAG_FILTER,J.NEAREST),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MIN_FILTER,J.NEAREST),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_S,J.CLAMP_TO_EDGE),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_T,J.CLAMP_TO_EDGE)}},{key:"setupSprings",value:function(O){var M,I,B=this.gl,V=O.relationships,z=new Float32Array(16777216),Y=new Float32Array(65536),X=0;for(M=0;M<O.nodes.length;M++)for(Y[M]=X,z[X]=V[M].length,X+=1,I=0;I<V[M].length;I++)z[X]=V[M][I],X+=1;for(I=X;I<z.length;I++)z[I]=1;for(I=M;I<Y.length;I++)Y[I]=0;this.offsetTexture===void 0&&(this.offsetTexture=B.createTexture()),B.bindTexture(B.TEXTURE_2D,this.offsetTexture),B.texImage2D(B.TEXTURE_2D,0,B.ALPHA,rr,rr,0,B.ALPHA,B.FLOAT,Y),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MAG_FILTER,B.NEAREST),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MIN_FILTER,B.NEAREST),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_S,B.CLAMP_TO_EDGE),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_T,B.CLAMP_TO_EDGE),this.springTexture===void 0&&(this.springTexture=B.createTexture()),B.bindTexture(B.TEXTURE_2D,this.springTexture),B.texImage2D(B.TEXTURE_2D,0,B.ALPHA,io,io,0,B.ALPHA,B.FLOAT,z),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MAG_FILTER,B.NEAREST),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MIN_FILTER,B.NEAREST),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_S,B.CLAMP_TO_EDGE),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_T,B.CLAMP_TO_EDGE)}},{key:"setupPhysics",value:function(){this.setupPhysicsForCoarse(),this.setupPhysicsForNodes(),this.physPositions=new Float32Array(262144),this.setupPinData()}},{key:"setupPhysicsForNodes",value:function(){var O=this.gl,M=this.subGraphs.length,I=this.subGraphs[0].nodes,B=3*Math.sqrt(I.length),V=new Float32Array(262144),z=new Float32Array(262144);this.numNodes=I.length;for(var Y=0;Y<262144;Y++)V[Y]=0,z[Y]=0;for(var X=function(Me,Ne,Ue,je){je[4*Me+0]=Ne,je[4*Me+1]=Ue,je[4*Me+2]=0,je[4*Me+3]=0},J=M-1;J>=0;J--){var ie=J===M-1?[]:this.subGraphs[J+1].nodes;ie.length===0?this.subGraphs[J].nodes.forEach(function(Me,Ne){var Ue=Me.placement?Me.placement.x:B*(Math.random()-.5),je=Me.placement?Me.placement.y:B*(Math.random()-.5);X(Me.finestIndex===void 0?Ne:Me.finestIndex,Ue,je,V)}):ie.forEach(function(Me){var Ne=Me.finestIndex,Ue=V[4*Me.finestIndex],je=V[4*Me.finestIndex+1],Xe=mf({x:Ue,y:je},10,Me.planets.length+1);Ne+=1,Me.planets.forEach(function(Ge,Ke){var $e=Xe[Ke];X(Ne+=1,$e.x,$e.y,V);var Ve=mf({x:$e.x,y:$e.y},10,Ge.moons.length+1);Ge.moons.forEach(function(tt,mt){var It=Ve[mt];X(Ne+=1,It.x,It.y,V)})})})}this.physData=[];for(var he=0;he<2;he++){var ge=this.newTexture(O,he===0?V:z,rr),le=this.newFramebuffer(O,ge);this.physData.push({texture:ge,frameBuffer:le})}var ye=this.enableVerlet?`precision mediump float;

uniform sampler2D u_physData;
uniform sampler2D u_connections;
uniform sampler2D u_connectionOffsets;
uniform sampler2D u_pinnedNodes;
uniform sampler2D u_sizeTexture;
uniform float u_baseLength;
uniform float u_curIteration;
uniform float u_iterationMultiplier;
uniform vec2 u_gravityCenter;
uniform float u_numNodes;
uniform float u_gravity;

uniform sampler2D u_clusterData;
uniform sampler2D u_prevForce;
uniform float u_collisionMultiplier;


float DAMP = 0.6;
float COOL = 0.99998;
float TEMP = max(0.02, pow(COOL, u_curIteration));
float TIMESTEP = 1.0 / 30.0;
float VELOCITYDECAY = 0.6;
float accLimitLow = 500000.0;
float accLimitHigh = 750000.0;
float accLimitPosHigh = 10000000.0;

const float denseNodeThreshold = 1000.0;
const float MIN_DISTANCE = 0.00000001;
const float MAX_DISTANCE = 1000000000.0;
const float MAX_ACCELERATION = 50000.0;

vec4 getTextureData(sampler2D texture, float index, float base) {
  float x = mod(index, base);
  float y = (index - x) / base;
  return texture2D(texture, vec2(x + 0.5, y + 0.5) / base);
}

bool isNan(float val) {
  return (val < 0.0 || 0.0 < val || val == 0.0) ? false : true;
}

const float BIG_NUMBER = 999999999999999999.0;
bool isInf(float val) {
  return val > BIG_NUMBER || val < -BIG_NUMBER;
}

vec2 getDelta(vec2 v1, vec2 v2) {
  vec2 delta = v1 - v2;
  float dist = length(delta);
  if (dist < MIN_DISTANCE || isNan(dist)) {
    return vec2(MIN_DISTANCE, MIN_DISTANCE);
  }
  if (dist > MAX_DISTANCE) {
    vec2 normDelta = delta / dist;
    return normDelta * MAX_DISTANCE;
  }
  return delta;
}

vec4 getOtherNodePosition(float i) {
  return getTextureData(u_physData, i, 256.0);
}

float getCombinedNodeSize(float i, float nodeSize) {
  float otherNodeSize = getTextureData(u_sizeTexture, i, 256.0).a;
  return nodeSize + otherNodeSize;
}

vec2 getSpringForce(float curConnection, float numConnections, float springFScale, vec4 myPosition, float i) {
  float curSpring = getTextureData(u_connections, curConnection + i, 4096.0).a;

  vec4 otherPosition = getTextureData(u_physData, curSpring, 256.0);
  float otherDataPosition = getTextureData(u_connectionOffsets, curSpring, 256.0).a;
  float avgDegree;
#if INTEL_WORKAROUND
    avgDegree = max(numConnections, 4.0);
#else
    float otherNumConnections = getTextureData(u_connections, otherDataPosition, 4096.0).a;
    avgDegree = max((otherNumConnections + numConnections * 3.0) / 4.0, 4.0);
#endif

  vec2 delta = getDelta(myPosition.xy, otherPosition.xy);
  float dist = length(delta);

  float F = (dist * dist * springFScale) / (u_baseLength * avgDegree);
  if (u_collisionMultiplier > 0.0) {
    F *= u_collisionMultiplier;
  }
  return (-delta / dist) * F;
}

vec2 getCollisionForce(float combinedNodeSize, float dist, float fScale, vec2 delta) {
  float collisionForce = (combinedNodeSize - dist) / (dist);
  if (u_collisionMultiplier > 0.0) {
    collisionForce *= u_collisionMultiplier;
  }
  return (delta * collisionForce * fScale * combinedNodeSize) / (combinedNodeSize + 1.0);
}

vec2 getRepulsionForce(float dist, float fScale, vec2 delta) {
  float F = (u_baseLength * u_baseLength * fScale) / (dist);
  return (delta / dist) * F * 0.05;
}

void main(void) {
  float textureSide = 256.0; //#TEXTURE_SIDE#;
  float index = (gl_FragCoord.x - 0.5) + (gl_FragCoord.y - 0.5) * textureSide;

  if (index >= u_numNodes) {
    discard;
  }

  vec4 clusterData = getTextureData(u_clusterData, index, 256.0);

  float clusterIndex = clusterData.x;
  float clusterStartIndex = clusterData.y;
  float clusterSize = clusterData.z;
  float clusterWeight = clusterData.w;

  vec4 myPosition = getTextureData(u_physData, index, 256.0);
  vec4 previousForce = getTextureData(u_prevForce, clusterIndex, 256.0);

  vec2 acceleration = previousForce.xy;

  float isPinned = getTextureData(u_pinnedNodes, index, 256.0).a;
  float nodeSize = getTextureData(u_sizeTexture, index, 256.0).a;

  if (isPinned > 0.5) {
    gl_FragColor = vec4(myPosition.xy, 0.0, 0.0);
    return;
  }

  float curConnection = getTextureData(u_connectionOffsets, index, 256.0).a;
  float numConnections = getTextureData(u_connections, curConnection, 4096.0).a;

  float fScale = 1.0 + sqrt(u_iterationMultiplier);
  float springFScale = fScale;

  if (numConnections > denseNodeThreshold) {
    springFScale = sqrt(fScale);
  }

  float numOfRels = 0.0;

  // Springs
  for (float i = 1.0; i <= 256.0 * 256.0; i++) {
    if (numOfRels >= numConnections) {
      break;
    }
    acceleration += getSpringForce(curConnection, numConnections, springFScale, myPosition, i);
    numOfRels += 1.0;
  }

  // Repulsion && collision detection
  if (u_collisionMultiplier > 0.0) {
    float number_of_collisions = 0.0;
    for (float i = 0.0; i < 256.0 * 256.0; i++) {
      if (i >= u_numNodes) {
        break;
      }

      if (i == index) {
        continue;
      }

      vec4 otherPosition = getOtherNodePosition(i);
      vec2 delta = getDelta(myPosition.xy, otherPosition.xy);
      float dist = length(delta);
      float combinedNodeSize = getCombinedNodeSize(i, nodeSize) * 2.0;

      if (dist < combinedNodeSize && number_of_collisions < 40.0) {
        number_of_collisions++;
        acceleration += getCollisionForce(combinedNodeSize, dist, fScale, delta);
      }

      if (i >= clusterStartIndex && i < clusterStartIndex + clusterSize) {
        acceleration += getRepulsionForce(dist, fScale, delta);
      }
    }
  } else {
    for (float i = 0.0; i < 256.0 * 256.0; i++) {
      if (i >= clusterStartIndex + clusterSize || i >= u_numNodes) {
        break;
      }

      if (i < clusterStartIndex || i == index) {
        continue;
      }

      vec4 otherPosition = getOtherNodePosition(i);
      vec2 delta = getDelta(myPosition.xy, otherPosition.xy);
      float dist = length(delta);
      float combinedNodeSize = getCombinedNodeSize(i, nodeSize);

      if (dist < combinedNodeSize) {
        acceleration += getCollisionForce(combinedNodeSize, dist, fScale, delta);
      }

      acceleration += getRepulsionForce(dist, fScale, delta);
    }
  }

  // Gravity
  vec2 delta = getDelta(u_gravityCenter, myPosition.xy);
  float dist = length(delta);

  vec2 grav = (delta / dist) * u_gravity * fScale;
  acceleration += grav * smoothstep(0.0, 500.0, dist);

  float accMagnitude = length(acceleration);
  acceleration *= min(MAX_ACCELERATION, accMagnitude) / accMagnitude;

  float iterationFrictionThreshold = 1000.0;

  if (u_curIteration > iterationFrictionThreshold) {
    float friction = 1.0 + pow((u_curIteration - iterationFrictionThreshold), 2.0) / 100.0;
    acceleration *= 1.0 / friction;
  }

  if (u_curIteration == 0.0) {
    gl_FragColor = vec4(myPosition.xy, myPosition.zw);
  } else {
    vec2 prevVelocity = myPosition.zw;
    vec2 currentPos = myPosition.xy;
    vec2 prevPos = currentPos - prevVelocity;

    vec2 newPos = currentPos + TEMP * ( DAMP * (prevVelocity) + acceleration * TIMESTEP * TIMESTEP);
    vec2 newVelocity = newPos - currentPos;
    gl_FragColor = vec4(newPos, newVelocity);
  }
}`:`precision mediump float;

uniform sampler2D u_physData;
uniform sampler2D u_connections;
uniform sampler2D u_connectionOffsets;
uniform sampler2D u_pinnedNodes;
uniform sampler2D u_sizeTexture;
uniform float u_baseLength;
uniform float u_curIteration;
uniform float u_iterationMultiplier;
uniform vec2 u_gravityCenter;
uniform float u_numNodes;
uniform float u_gravity;

uniform sampler2D u_clusterData;
uniform sampler2D u_prevForce;
uniform float u_collisionMultiplier;

float TIMESTEP = 1.0 / 30.0;
float VELOCITYDECAY = 0.6;
float accLimitLow = 500000.0;
float accLimitHigh = 750000.0;
float accLimitPosHigh = 10000000.0;

const float denseNodeThreshold = 1000.0;
const float MIN_DISTANCE = 0.00000001;
const float MAX_DISTANCE = 1000000000.0;
const float MAX_ACCELERATION = 500000.0;

vec4 getTextureData(sampler2D texture, float index, float base) {
  float x = mod(index, base);
  float y = (index - x) / base;
  return texture2D(texture, vec2(x + 0.5, y + 0.5) / base);
}

bool isNan(float val) {
  return (val < 0.0 || 0.0 < val || val == 0.0) ? false : true;
}

const float BIG_NUMBER = 999999999999999999.0;
bool isInf(float val) {
  return val > BIG_NUMBER || val < -BIG_NUMBER;
}

vec2 getDelta(vec2 v1, vec2 v2) {
  vec2 delta = v1 - v2;
  float dist = length(delta);
  if (dist < MIN_DISTANCE || isNan(dist)) {
    return vec2(MIN_DISTANCE, MIN_DISTANCE);
  }
  if (dist > MAX_DISTANCE) {
    vec2 normDelta = delta / dist;
    return normDelta * MAX_DISTANCE;
  }
  return delta;
}

vec4 getOtherNodePosition(float i) {
  return getTextureData(u_physData, i, 256.0);
}

float getCombinedNodeSize(float i, float nodeSize) {
  float otherNodeSize = getTextureData(u_sizeTexture, i, 256.0).a;
  return nodeSize + otherNodeSize;
}

vec2 getSpringForce(float curConnection,  float numConnections, float springFScale, vec4 myPosition, float i) {
  float curSpring = getTextureData(u_connections, curConnection + i, 4096.0).a;

  vec4 otherPosition = getTextureData(u_physData, curSpring, 256.0);
  float otherDataPosition = getTextureData(u_connectionOffsets, curSpring, 256.0).a;
  float avgDegree;
#if INTEL_WORKAROUND
    avgDegree = max(numConnections, 4.0);
#else
    float otherNumConnections = getTextureData(u_connections, otherDataPosition, 4096.0).a;
    avgDegree = max((otherNumConnections + numConnections * 3.0) / 4.0, 4.0);
#endif

  vec2 delta = getDelta(myPosition.xy, otherPosition.xy);
  float dist = length(delta);

  float F = (dist * dist * springFScale) / (u_baseLength * avgDegree);
  if (u_collisionMultiplier > 0.0) {
    F *= u_collisionMultiplier;
  }
  return (-delta / dist) * F;
}

vec2 getCollisionForce(float combinedNodeSize, float dist, float fScale, vec2 delta) {
  float collisionForce = ((combinedNodeSize - dist) / dist);
  if (u_collisionMultiplier > 0.0) {
    collisionForce *= u_collisionMultiplier;
  }
  return (delta * collisionForce * fScale * combinedNodeSize) / (combinedNodeSize + 1.0);
}

vec2 getRepulsionForce(float dist, float fScale, vec2 delta) {
  float F = (u_baseLength * u_baseLength * (fScale / 1.5)) / dist;
  return (delta / dist) * F * 0.05;
}

void main(void) {
  float textureSide = 256.0; //#TEXTURE_SIDE#;
  float index = (gl_FragCoord.x - 0.5) + (gl_FragCoord.y - 0.5) * textureSide;

  if (index >= u_numNodes) {
    discard;
  }

  vec4 clusterData = getTextureData(u_clusterData, index, 256.0);

  float clusterIndex = clusterData.x;
  float clusterStartIndex = clusterData.y;
  float clusterSize = clusterData.z;
  float clusterWeight = clusterData.w;

  vec4 myPosition = getTextureData(u_physData, index, 256.0);
  vec4 previousForce = getTextureData(u_prevForce, clusterIndex, 256.0);

  vec2 acceleration = previousForce.xy;

  float isPinned = getTextureData(u_pinnedNodes, index, 256.0).a;
  float nodeSize = getTextureData(u_sizeTexture, index, 256.0).a;

  if (isPinned > 0.5) {
    gl_FragColor = vec4(myPosition.xy, 0.0, 0.0);
    return;
  }

  float curConnection = getTextureData(u_connectionOffsets, index, 256.0).a;
  float numConnections = getTextureData(u_connections, curConnection, 4096.0).a;

  float fScale = 1.0 + sqrt(u_iterationMultiplier);
  float springFScale = fScale;

  if (numConnections > denseNodeThreshold) {
    springFScale = sqrt(fScale);
  }

  float numOfRels = 0.0;

  // Springs
  for (float i = 1.0; i <= 256.0 * 256.0; i++) {
    if (numOfRels >= numConnections) {
      break;
    }
    acceleration += getSpringForce(curConnection, numConnections, springFScale, myPosition, i);
    numOfRels += 1.0;
  }

  // Repulsion && collision detection
  if (u_collisionMultiplier > 0.0) {
    float number_of_collisions = 0.0;
    for (float i = 0.0; i < 256.0 * 256.0; i++) {
      if (i >= u_numNodes) {
        break;
      }

      if (i == index) {
        continue;
      }

      vec4 otherPosition = getOtherNodePosition(i);
      vec2 delta = getDelta(myPosition.xy, otherPosition.xy);
      float dist = length(delta);
      float combinedNodeSize = getCombinedNodeSize(i, nodeSize) * 2.0;

      if (dist < combinedNodeSize && number_of_collisions < 40.0) {
        number_of_collisions++;
        acceleration += getCollisionForce(combinedNodeSize, dist, fScale, delta);
      }

      if (i >= clusterStartIndex && i < clusterStartIndex + clusterSize) {
        acceleration += getRepulsionForce(dist, fScale, delta);
      }
    }
  } else {
    for (float i = 0.0; i < 256.0 * 256.0; i++) {
      if (i >= clusterStartIndex + clusterSize || i >= u_numNodes) {
        break;
      }

      if (i < clusterStartIndex || i == index) {
        continue;
      }

      vec4 otherPosition = getOtherNodePosition(i);
      vec2 delta = getDelta(myPosition.xy, otherPosition.xy);
      float dist = length(delta);
      float combinedNodeSize = getCombinedNodeSize(i, nodeSize);

      if (dist < combinedNodeSize) {
        acceleration += getCollisionForce(combinedNodeSize, dist, fScale, delta);
      }

      acceleration += getRepulsionForce(dist, fScale, delta);
    }
  }

  // Gravity
  vec2 delta = getDelta(u_gravityCenter, myPosition.xy);
  float dist = length(delta);

  vec2 grav = (delta / dist) * u_gravity * fScale;
  acceleration += grav * smoothstep(0.0, 500.0, dist);

  float accMagnitude = length(acceleration);
  acceleration *= min(MAX_ACCELERATION, accMagnitude) / accMagnitude;

  float iterationFrictionThreshold = 1000.0;

  if (u_curIteration > iterationFrictionThreshold) {
    float friction = 1.0 + pow((u_curIteration - iterationFrictionThreshold), 2.0) / 100.0;
    acceleration *= 1.0 / friction;
  }

  if (u_curIteration == 0.0) {
    gl_FragColor = vec4(myPosition.xy, acceleration * TIMESTEP * 0.5);
  } else {
    myPosition.zw = myPosition.zw * VELOCITYDECAY;
    gl_FragColor = vec4(myPosition.xy + myPosition.zw * TIMESTEP, myPosition.zw + acceleration * TIMESTEP);
  }
}`;this.physShader=new la(O,yf,ye,{INTEL_WORKAROUND:this.intelWorkaround?1:0}),this.physShader.use(),this.physShader.setUniform("u_projection",this.physProjection),this.physShader.setUniform("u_baseLength",this.getBaseLength()),this.physShader.setUniform("u_connections",this.springTexture),this.physShader.setUniform("u_sizeTexture",this.sizeTexture),this.physShader.setUniform("u_connectionOffsets",this.offsetTexture),this.physShader.setUniform("u_pinnedNodes",this.pinTexture),this.physShader.setUniform("u_gravityCenter",this.nodeCenterPoint),this.physShader.setUniform("u_numNodes",this.numNodes),this.physShader.setUniform("u_gravity",this.gravity)}},{key:"setupPhysicsForCoarse",value:function(){var O=this,M=this.gl;this.levelsData=[],this.levelsClusterTexture=[],this.levelsFinestIndexTexture=[];var I,B,V=this.subGraphs.length,z=function(le,ye,Me,Ne,Ue){I[4*le+0]=ye,I[4*le+1]=Me,I[4*le+2]=Ue.size(),I[4*le+3]=Ne||1};if(V===1){I=new Float32Array(262144);var Y=this.subGraphs[0].nodes;Y.forEach(function(le,ye){z(ye,0,0,le.weight,{size:function(){return Y.length}})}),this.levelsClusterTexture[0]=this.newTexture(M,I,fa)}else for(var X=function(){var le=O.subGraphs[J].nodes,ye=J===O.subGraphs.length-1?[]:O.subGraphs[J+1].nodes;I=new Float32Array(262144),B=new Float32Array(65536);var Me=0;if(ye.length>0){var Ne=ye.slice();Ne.sort(function(Xe,Ge){return Xe.previousIndex-Ge.previousIndex}),Ne.forEach(function(Xe,Ge){var Ke=Me,$e=ye.indexOf(Xe);z(Me,$e,Ke,le[Xe.id].weight,Xe),B[Me]=le[Me].finestIndex,Me+=1,Xe.planets.forEach(function(Ve){z(Me,$e,Ke,Ve.weight,Xe),B[Me]=le[Me].finestIndex,Me+=1,Ve.moons.forEach(function(tt){z(Me,$e,Ke,tt.weight,Xe),B[Me]=le[Me].finestIndex,Me+=1})})})}else le.forEach(function(Xe,Ge){z(Ge,0,0,Xe.weight,{size:function(){return le.length}}),B[Ge]=le[Ge].finestIndex});var Ue=O.newTexture(M,null,fa),je=O.newFramebuffer(M,Ue);O.levelsData[J]={texture:Ue,frameBuffer:je},O.levelsClusterTexture[J]=O.newTexture(M,I,fa),O.levelsFinestIndexTexture[J]=O.newTexture(M,B,rr,M.FLOAT,M.ALPHA)},J=this.subGraphs.length-1;J>=0;J--)X();for(var ie=new Float32Array(262144),he=0;he<ie.length;he++)ie[he]=0;this.initalLevelTexture=this.newTexture(M,ie,fa);var ge=this.enableVerlet?`precision mediump float;
uniform sampler2D u_physData;
uniform sampler2D u_clusterData;
uniform sampler2D u_finestIndexes;
uniform sampler2D u_prevForce;

uniform float u_baseLength;
uniform float u_numNodes;
uniform float u_iterationMultiplier;
uniform float u_isTopLevel;

float PI = 3.1415926535897932384626433832795;
float TIMESTEP = 1.0 / 30.0;
float VELOCITYDECAY = 1.0;

vec4 getTextureData(sampler2D texture, float index, float base) {
  float x = mod(index, base);
  float y = (index - x) / base;
  return texture2D(texture, vec2(x + 0.5, y + 0.5) / base);
}

float getSquaredLogClusterWeight(float value) {
  return pow(log(value), 2.0);
}

void main(void) {
  float index = (gl_FragCoord.x - 0.5) + (gl_FragCoord.y - 0.5) * 256.0;

  if (index >= u_numNodes) {
    discard;
  }

  vec4 clusterData = getTextureData(u_clusterData, index, 256.0);

  float clusterIndex = clusterData.x;
  float clusterStartIndex = clusterData.y;
  float clusterSize = clusterData.z;
  float clusterArea = pow(clusterSize + u_baseLength * 2.0, 2.0);

  float finestIndex = getTextureData(u_finestIndexes, index, 256.0).a;
  vec4 myPosition = getTextureData(u_physData, finestIndex, 256.0);
  vec4 previousForce = getTextureData(u_prevForce, clusterIndex, 256.0);
  float fScale = 1.0 + sqrt(u_iterationMultiplier);

  vec2 acceleration = previousForce.xy;

  // Repulsion & Collision Detection
  for (float i = 0.0; i < 256.0 * 256.0; i++) {
    if (i >= clusterStartIndex + clusterSize || i >= u_numNodes) {
      break;
    }
    if (i < clusterStartIndex || i == index) {
      continue;
    }

    vec4 otherClusterData = getTextureData(u_clusterData, i, 256.0);
    float otherClusterWeight = getSquaredLogClusterWeight(otherClusterData.w);

    float otherFinestIndex = getTextureData(u_finestIndexes, i, 256.0).a;
    vec4 otherPosition = getTextureData(u_physData, otherFinestIndex, 256.0);

    vec2 delta = myPosition.xy - otherPosition.xy;
    float dist = max(length(delta), 0.0000001);
    float maxDist = 25.0;
    float repulsionForceScale = 0.1;

    float F = (clusterArea * fScale) / (dist * dist);

    if (u_isTopLevel == 1.0) {
      repulsionForceScale = 0.2;
    }

    acceleration += ((delta / sqrt(dist)) * F) * repulsionForceScale * otherClusterWeight;

    if (dist < maxDist) {
      float collide = (maxDist - dist) / (dist * dist);
      acceleration += delta * collide * fScale * maxDist / (maxDist + 1.0);
    }
  }

  gl_FragColor = vec4(acceleration, vec2(finestIndex, 0));
}`:`precision mediump float;
uniform sampler2D u_physData;
uniform sampler2D u_clusterData;
uniform sampler2D u_finestIndexes;
uniform sampler2D u_prevForce;

uniform float u_baseLength;
uniform float u_numNodes;
uniform float u_iterationMultiplier;
uniform float u_isTopLevel;

float TIMESTEP = 1.0 / 30.0;
float VELOCITYDECAY = 0.6;

vec4 getTextureData(sampler2D texture, float index, float base) {
  float x = mod(index, base);
  float y = (index - x) / base;
  return texture2D(texture, vec2(x + 0.5, y + 0.5) / base);
}

float getLogClusterWeight(float value) {
  return value / max(log(value), 1.0);
}

void main(void) {
  float index = (gl_FragCoord.x - 0.5) + (gl_FragCoord.y - 0.5) * 256.0;

  if (index >= u_numNodes) {
    discard;
  }

  vec4 clusterData = getTextureData(u_clusterData, index, 256.0);

  float clusterIndex = clusterData.x;
  float clusterStartIndex = clusterData.y;
  float clusterSize = clusterData.z;

  float finestIndex = getTextureData(u_finestIndexes, index, 256.0).a;
  vec4 myPosition = getTextureData(u_physData, finestIndex, 256.0);
  vec4 previousForce = getTextureData(u_prevForce, clusterIndex, 256.0);
  float fScale = 1.0 + sqrt(u_iterationMultiplier);

  vec2 acceleration = previousForce.xy;

  // Repulsion & Collision Detection
  for (float i = 0.0; i < 256.0 * 256.0; i++) {
    if (i >= clusterStartIndex + clusterSize || i >= u_numNodes) {
      break;
    }
    if (i < clusterStartIndex || i == index) {
      continue;
    }

    vec4 otherClusterData = getTextureData(u_clusterData, i, 256.0);
    float otherClusterWeight = getLogClusterWeight(otherClusterData.w);

    float otherFinestIndex = getTextureData(u_finestIndexes, i, 256.0).a;
    vec4 otherPosition = getTextureData(u_physData, otherFinestIndex, 256.0);

    vec2 delta = myPosition.xy - otherPosition.xy;
    float dist = max(length(delta), 0.0000001);
    float maxDist = 25.0;
    float repulsionForceScale = 0.1;

    float F = ((u_baseLength * u_baseLength) * (fScale / 1.5)) / dist;

    if (u_isTopLevel == 1.0) {
      repulsionForceScale = 0.3;
    }

    acceleration += ((delta / dist) * F) * repulsionForceScale * otherClusterWeight;

    if (dist < maxDist) {
      float collide = (maxDist - dist) / dist;
      acceleration += delta * collide * fScale * maxDist / (maxDist + 1.0);
    }
  }

  gl_FragColor = vec4(acceleration, vec2(finestIndex, 0));
}`;this.apprxRepForceShader=new la(M,yf,ge),this.apprxRepForceShader.use(),this.apprxRepForceShader.setUniform("u_projection",this.physSmallProjection)}},{key:"setupPinData",value:function(){var O=this.gl;this.pinTexture=O.createTexture(),this.pinData=new Uint8Array(65536);for(var M=0;M<65536;M++)this.pinData[M]=0;O.bindTexture(O.TEXTURE_2D,this.pinTexture),O.texImage2D(O.TEXTURE_2D,0,O.ALPHA,rr,rr,0,O.ALPHA,O.UNSIGNED_BYTE,this.pinData),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_MAG_FILTER,O.NEAREST),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_MIN_FILTER,O.NEAREST),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_WRAP_S,O.CLAMP_TO_EDGE),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_WRAP_T,O.CLAMP_TO_EDGE)}},{key:"setupUpdates",value:function(){var O=this.gl;this.updateData=new Float32Array(65536),this.updateTexture=O.createTexture(),O.bindTexture(O.TEXTURE_2D,this.updateTexture),O.texImage2D(O.TEXTURE_2D,0,O.ALPHA,rr,rr,0,O.ALPHA,O.FLOAT,this.updateData),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_MAG_FILTER,O.NEAREST),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_MIN_FILTER,O.NEAREST),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_WRAP_S,O.CLAMP_TO_EDGE),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_WRAP_T,O.CLAMP_TO_EDGE),this.updateShader=new la(O,yf,`precision mediump float;

uniform sampler2D u_physData;
uniform sampler2D u_updateData;
uniform float u_numNodesNew;

const float INDEX_FLAG = 999999.0;

vec4 getTextureData(sampler2D texture, float index, float base) {
  float x = mod(index, base);
  float y = (index - x) / base;
  return texture2D(texture, vec2(x + 0.5, y + 0.5) / base);
}

void main(void) {
  float textureSide = 256.0; //#TEXTURE_SIDE#;
  float index = (gl_FragCoord.x - 0.5) + (gl_FragCoord.y - 0.5)*textureSide;

  if (index >= u_numNodesNew) {
    discard;
  }

  float firstValue = getTextureData(u_updateData, index * 2.0, 256.0).a;
  float secondValue = getTextureData(u_updateData, index * 2.0 + 1.0, 256.0).a;

  if (secondValue == INDEX_FLAG) {
    vec4 myPosition = getTextureData(u_physData, firstValue, 256.0);
    gl_FragColor = myPosition;
  } else {
    gl_FragColor = vec4(firstValue, secondValue, 0.0, 0.0);
  }
}
`),this.updateShader.use(),this.updateShader.setUniform("u_projection",this.physProjection)}},{key:"setupReadpixelWorkaround",value:function(){var O=this.gl;this.workaroundShader=new la(O,yf,`precision lowp float;

uniform sampler2D u_physData;
uniform float u_index;

float shift_right (float v, float amt) { 
    v = floor(v) + 0.5; 
    return floor(v / exp2(amt)); 
}

float shift_left (float v, float amt) { 
    return floor(v * exp2(amt) + 0.5); 
}

float mask_last (float v, float bits) { 
    return mod(v, shift_left(1.0, bits)); 
}

float extract_bits (float num, float from, float to) { 
    from = floor(from + 0.5); to = floor(to + 0.5); 
    return mask_last(shift_right(num, from), to - from); 
}

// From https://stackoverflow.com/questions/17981163/webgl-read-pixels-from-floating-point-render-target
vec4 encode_float (float val) { 
    if (val == 0.0) return vec4(0, 0, 0, 0); 
    float sign = val > 0.0 ? 0.0 : 1.0; 
    val = abs(val); 
    float exponent = floor(log2(val)); 
    float biased_exponent = exponent + 127.0; 
    float fraction = ((val / exp2(exponent)) - 1.0) * 8388608.0; 
    float t = biased_exponent / 2.0; 
    float last_bit_of_biased_exponent = fract(t) * 2.0; 
    float remaining_bits_of_biased_exponent = floor(t); 
    float byte4 = extract_bits(fraction, 0.0, 8.0) / 255.0; 
    float byte3 = extract_bits(fraction, 8.0, 16.0) / 255.0; 
    float byte2 = (last_bit_of_biased_exponent * 128.0 + extract_bits(fraction, 16.0, 23.0)) / 255.0; 
    float byte1 = (sign * 128.0 + remaining_bits_of_biased_exponent) / 255.0; 
    return vec4(byte4, byte3, byte2, byte1); 
}

void main(void) {
  vec4 texData = texture2D(u_physData, gl_FragCoord.xy / 255.0);
  float data;
  if (u_index == 0.0) {
    data = texData.x;
  } else if (u_index == 1.0) {
    data = texData.y;
  } else if (u_index == 2.0) {
    data = texData.z;
  } else if (u_index == 3.0) {
    data = texData.w;
  }

  gl_FragColor = encode_float(data);
}
`),this.workaroundShader.use(),this.workaroundShader.setUniform("u_projection",this.physProjection),this.workaroundData=[];for(var M=0;M<4;M++){var I=new Uint8Array(262144),B=this.newTexture(O,null,rr,O.UNSIGNED_BYTE),V=this.newFramebuffer(O,B);this.workaroundData.push({dataByte:I,dataFloat:new Float32Array(I.buffer),texture:B,frameBuffer:V})}}},{key:"doReadpixelWorkaround",value:function(){for(var O=this.gl,M=0;M<4;M++){var I=this.workaroundData[M];O.bindFramebuffer(O.FRAMEBUFFER,I.frameBuffer),O.viewport(0,0,rr,rr),this.workaroundShader.use(),this.workaroundShader.setUniform("u_index",M),this.workaroundShader.setUniform("u_physData",this.getPhysData(0).texture),O.bindBuffer(O.ARRAY_BUFFER,this.physVbo),this.workaroundShader.setAttributePointer("a_position",2,0,2),O.drawArrays(O.TRIANGLE_STRIP,0,4),O.readPixels(0,0,rr,rr,O.RGBA,O.UNSIGNED_BYTE,I.dataByte)}}},{key:"definePhysicsArrays",value:function(){this.physData=[],this.levelsData=[],this.levelsClusterTexture=[],this.levelsFinestIndexTexture=[]}}],x&&ca(w.prototype,x),Object.defineProperty(w,"prototype",{writable:!1}),b}();function El(b){return El=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},El(b)}function wc(b){return function(w){if(Array.isArray(w))return po(w)}(b)||function(w){if(typeof Symbol<"u"&&w[Symbol.iterator]!=null||w["@@iterator"]!=null)return Array.from(w)}(b)||function(w,x){if(w){if(typeof w=="string")return po(w,x);var O=Object.prototype.toString.call(w).slice(8,-1);return O==="Object"&&w.constructor&&(O=w.constructor.name),O==="Map"||O==="Set"?Array.from(w):O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O)?po(w,x):void 0}}(b)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function po(b,w){(w==null||w>b.length)&&(w=b.length);for(var x=0,O=new Array(w);x<w;x++)O[x]=b[x];return O}function Sg(b,w){for(var x=0;x<w.length;x++){var O=w[x];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(b,da(O.key),O)}}function ha(b,w,x){return(w=da(w))in b?Object.defineProperty(b,w,{value:x,enumerable:!0,configurable:!0,writable:!0}):b[w]=x,b}function da(b){var w=function(x,O){if(El(x)!="object"||!x)return x;var M=x[Symbol.toPrimitive];if(M!==void 0){var I=M.call(x,"string");if(El(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(b);return El(w)=="symbol"?w:String(w)}var Ol="ForceCytoLayout",Ec="forceDirected",_f="coseBilkent",fp=function(){function b(O){var M=this;(function(Y,X){if(!(Y instanceof X))throw new TypeError("Cannot call a class as a function")})(this,b),ha(this,"physLayout",void 0),ha(this,"coseBilkentLayout",void 0),ha(this,"state",void 0),ha(this,"currentLayoutType",void 0),ha(this,"enableCytoscape",void 0),ha(this,"currentLayout",void 0);var I=O.state,B=O.enableCytoscape;this.enableCytoscape=B==null||B,this.physLayout=new cp(O),this.coseBilkentLayout=new yc({state:I,cytoCompleteCallback:function(){for(M.physLayout.update(!0),M.copyLayoutPositions(M.state.nodes.items,M.coseBilkentLayout,M.physLayout);M.physLayout.update(!1););M.copyLayoutPositions(M.state.nodes.items,M.physLayout,M.coseBilkentLayout)},animationCompleteCallback:function(){M.currentLayoutType===_f&&setTimeout(function(){return M.setLayout(Ec)},50)}}),this.currentLayout=this.physLayout,this.currentLayoutType=Ec;var V=I.nodes,z=I.rels;V.addChannel(Ol),z.addChannel(Ol),this.state=I}var w,x;return w=b,x=[{key:"setOptions",value:function(O){O!==void 0&&(this.currentLayout.setOptions(O),this.enableCytoscape=O.enableCytoscape)}},{key:"getLayout",value:function(O){return O===_f?this.coseBilkentLayout:this.physLayout}},{key:"setLayout",value:function(O){if(O!==this.currentLayoutType){zr.info("Switching to layout: ".concat(O," in ForceCyto"));var M=this.getLayout(O);this.currentLayout=M,this.currentLayoutType=O}}},{key:"copyLayoutPositions",value:function(O,M,I){var B=M.getNodePositions(O);I.updateNodes(B)}},{key:"update",value:function(){var O=arguments.length>0&&arguments[0]!==void 0&&arguments[0],M=this.state,I=M.nodes,B=M.rels,V=I.channels[Ol],z=B.channels[Ol],Y=Object.values(V.adds).length,X=Object.values(z.adds).length,J=Object.values(V.adds).map(function(tt){return tt.id}),ie=Object.values(z.adds).map(function(tt){return tt.id}),he=new Set(Object.keys(V.adds)),ge=new Set(Object.keys(z.adds));if(I.clearChannel(Ol),B.clearChannel(Ol),this.currentLayoutType===Ec&&this.enableCytoscape&&I.items.length<=100&&Y<100&&Y>0&&X>0){var le=I.items.map(function(tt){return tt.id}),ye=new Set([].concat(wc(le),wc(J))),Me=B.items.map(function(tt){return tt.id}),Ne=new Set([].concat(wc(Me),wc(ie)));if(ye.size<=100&&Ne.size<=300){var Ue=function(tt,mt,It,bt){var jt,Ct=new Set(tt),Pe=br(new Set(mt));try{for(Pe.s();!(jt=Pe.n()).done;){var Te=jt.value,Ae=bt.idToItem[Te];if(Ae){var ot=Ae.from,Ze=Ae.to;Ct.add(ot),Ct.add(Ze)}}}catch(jn){Pe.e(jn)}finally{Pe.f()}var ht,kt=function(jn){var yn,Zr={},Hr={},sn=br(jn);try{for(sn.s();!(yn=sn.n()).done;){for(var mn=yn.value,ti=mn.from,rn=mn.to,An="".concat(ti,"-").concat(rn),ri="".concat(rn,"-").concat(ti),ni=0,fi=[An,ri];ni<fi.length;ni++){var nn=fi[ni];Hr[nn]!==void 0?Hr[nn].push(mn):Hr[nn]=[mn]}Zr[ti]||(Zr[ti]=new Set),Zr[rn]||(Zr[rn]=new Set),Zr[ti].add(rn),Zr[rn].add(ti)}}catch(mi){sn.e(mi)}finally{sn.f()}return{adjNodesMap:Zr,relMap:Hr}}(bt.items),Ut=kt.adjNodesMap,qt=kt.relMap,Tr={},Ir={},Wr=function(jn){var yn=[];for(Tr[jn]||yn.push(jn);yn.length>0;){var Zr=yn.shift();if(Tr[Zr]=It.idToItem[Zr],Ut[Zr]!==void 0){var Hr,sn=br(Ut[Zr]);try{for(sn.s();!(Hr=sn.n()).done;){var mn=Hr.value;if(!Tr[mn]){yn.push(mn);var ti=qt["".concat(Zr,"-").concat(mn)];if(ti){var rn,An=br(ti);try{for(An.s();!(rn=An.n()).done;){var ri=rn.value;Ir[ri.id]||(Ir[ri.id]=ri)}}catch(ni){An.e(ni)}finally{An.f()}}}}}catch(ni){sn.e(ni)}finally{sn.f()}}}},On=br(Ct);try{for(On.s();!(ht=On.n()).done;)Wr(ht.value)}catch(jn){On.e(jn)}finally{On.f()}return{connectedNodes:Tr,connectedRels:Ir}}(he,ge,I,B),je=Ue.connectedNodes,Xe=Ue.connectedRels,Ge=Object.values(je),Ke=Object.values(Xe),$e=Ge.length,Ve=Ke.length;$e===he.size&&Ve===ge.size&&(ge.size>0||he.size>0)?(this.setLayout(_f),this.coseBilkentLayout.update(!0,I.items,B.items)):Ve>0&&ge.size/Ve>.25&&(this.setLayout(_f),this.coseBilkentLayout.update(!0,Ge,Ke))}}this.physLayout.update(O),this.coseBilkentLayout.update(O)}},{key:"getShouldUpdate",value:function(){return this.currentLayout.getShouldUpdate()}},{key:"getComputing",value:function(){return this.currentLayout.getComputing()}},{key:"updateNodes",value:function(O){this.setLayout(Ec),this.physLayout.updateNodes(O)}},{key:"getNodePositions",value:function(O){return this.currentLayout.getNodePositions(O)}},{key:"terminateUpdate",value:function(){this.physLayout.terminateUpdate(),this.coseBilkentLayout.terminateUpdate()}},{key:"destroy",value:function(){this.physLayout.destroy(),this.coseBilkentLayout.destroy()}}],x&&Sg(w.prototype,x),Object.defineProperty(w,"prototype",{writable:!1}),b}();function Oc(b){return Oc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},Oc(b)}function Oh(b,w){var x=Object.keys(b);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(b);w&&(O=O.filter(function(M){return Object.getOwnPropertyDescriptor(b,M).enumerable})),x.push.apply(x,O)}return x}function So(b){for(var w=1;w<arguments.length;w++){var x=arguments[w]!=null?arguments[w]:{};w%2?Oh(Object(x),!0).forEach(function(O){Rs(b,O,x[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(x)):Oh(Object(x)).forEach(function(O){Object.defineProperty(b,O,Object.getOwnPropertyDescriptor(x,O))})}return b}function ts(b,w){var x=typeof Symbol<"u"&&b[Symbol.iterator]||b["@@iterator"];if(!x){if(Array.isArray(b)||(x=function(z,Y){if(z){if(typeof z=="string")return wf(z,Y);var X=Object.prototype.toString.call(z).slice(8,-1);return X==="Object"&&z.constructor&&(X=z.constructor.name),X==="Map"||X==="Set"?Array.from(z):X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X)?wf(z,Y):void 0}}(b))||w){x&&(b=x);var O=0,M=function(){};return{s:M,n:function(){return O>=b.length?{done:!0}:{done:!1,value:b[O++]}},e:function(z){throw z},f:M}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I,B=!0,V=!1;return{s:function(){x=x.call(b)},n:function(){var z=x.next();return B=z.done,z},e:function(z){V=!0,I=z},f:function(){try{B||x.return==null||x.return()}finally{if(V)throw I}}}}function wf(b,w){(w==null||w>b.length)&&(w=b.length);for(var x=0,O=new Array(w);x<w;x++)O[x]=b[x];return O}function Uu(b,w){for(var x=0;x<w.length;x++){var O=w[x];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(b,xc(O.key),O)}}function Rs(b,w,x){return(w=xc(w))in b?Object.defineProperty(b,w,{value:x,enumerable:!0,configurable:!0,writable:!0}):b[w]=x,b}function xc(b){var w=function(x,O){if(Oc(x)!="object"||!x)return x;var M=x[Symbol.toPrimitive];if(M!==void 0){var I=M.call(x,"string");if(Oc(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(b);return Oc(w)=="symbol"?w:String(w)}var rs="FreeLayout",xl=function(){function b(O){var M=this;(function(Y,X){if(!(Y instanceof X))throw new TypeError("Cannot call a class as a function")})(this,b),Rs(this,"state",void 0),Rs(this,"positions",void 0),Rs(this,"shouldUpdate",void 0),Rs(this,"stateDisposers",void 0);var I=O.state;this.state=I,this.positions={},this.stateDisposers=[],this.stateDisposers.push(this.state.reaction(function(){return M.state.graphUpdates},function(){M.state.nodes.version!==void 0&&(M.shouldUpdate=!0),M.state.rels.version!==void 0&&(M.shouldUpdate=!0)}));var B=this.state,V=B.nodes,z=B.rels;V.addChannel(rs),z.addChannel(rs),this.shouldUpdate=!0,this.setOptions(),this.layout(V.items,V.idToItem,V.idToPosition)}var w,x;return w=b,x=[{key:"setOptions",value:function(){}},{key:"updateNodes",value:function(O){var M,I=ts(O);try{for(I.s();!(M=I.n()).done;){var B=M.value;B.x!==void 0&&B.y!==void 0&&(this.positions[B.id]={x:B.x,y:B.y}),this.shouldUpdate=!0}}catch(V){I.e(V)}finally{I.f()}}},{key:"update",value:function(){var O=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.shouldUpdate||O){var M=this.state,I=M.nodes,B=M.rels,V=Object.values(I.channels[rs].adds).length>0,z=Object.values(B.channels[rs].adds).length>0,Y=Object.values(I.channels[rs].removes).length>0,X=Object.values(B.channels[rs].removes).length>0;(V||z||Y||X)&&this.layout(I.items,I.idToItem,I.idToPosition),I.clearChannel(rs),B.clearChannel(rs)}this.shouldUpdate=!1}},{key:"layout",value:function(O,M,I){var B,V=(B=O)!==void 0?gt(B):B;if(!(0,r.isEmpty)(V)){for(var z={},Y=0;Y<V.length;++Y){var X,J=V[Y].id,ie=(X=I[J])!==null&&X!==void 0?X:{},he=ie.x,ge=he===void 0?0:he,le=ie.y,ye=le===void 0?0:le;z[J]={id:J,x:ge,y:ye}}this.positions=z,this.shouldUpdate=!1}}},{key:"setNodePositions",value:function(O){this.positions=O}},{key:"getNodePositions",value:function(O){var M,I=[],B=ts(O);try{for(B.s();!(M=B.n()).done;){var V=M.value,z=this.positions[V.id],Y=So({id:V.id},z);I.push(Y)}}catch(X){B.e(X)}finally{B.f()}return I}},{key:"getShouldUpdate",value:function(){return this.shouldUpdate}},{key:"getComputing",value:function(){return!1}},{key:"terminateUpdate",value:function(){}},{key:"destroy",value:function(){this.state.nodes.removeChannel(rs),this.state.rels.removeChannel(rs)}}],x&&Uu(w.prototype,x),Object.defineProperty(w,"prototype",{writable:!1}),b}();function uu(b){return uu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},uu(b)}function ns(b,w){var x=Object.keys(b);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(b);w&&(O=O.filter(function(M){return Object.getOwnPropertyDescriptor(b,M).enumerable})),x.push.apply(x,O)}return x}function Ef(b){for(var w=1;w<arguments.length;w++){var x=arguments[w]!=null?arguments[w]:{};w%2?ns(Object(x),!0).forEach(function(O){var M,I,B;M=b,I=O,B=x[O],(I=Of(I))in M?Object.defineProperty(M,I,{value:B,enumerable:!0,configurable:!0,writable:!0}):M[I]=B}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(x)):ns(Object(x)).forEach(function(O){Object.defineProperty(b,O,Object.getOwnPropertyDescriptor(x,O))})}return b}function is(b,w){var x=typeof Symbol<"u"&&b[Symbol.iterator]||b["@@iterator"];if(!x){if(Array.isArray(b)||(x=function(z,Y){if(z){if(typeof z=="string")return Vo(z,Y);var X=Object.prototype.toString.call(z).slice(8,-1);return X==="Object"&&z.constructor&&(X=z.constructor.name),X==="Map"||X==="Set"?Array.from(z):X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X)?Vo(z,Y):void 0}}(b))||w){x&&(b=x);var O=0,M=function(){};return{s:M,n:function(){return O>=b.length?{done:!0}:{done:!1,value:b[O++]}},e:function(z){throw z},f:M}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I,B=!0,V=!1;return{s:function(){x=x.call(b)},n:function(){var z=x.next();return B=z.done,z},e:function(z){V=!0,I=z},f:function(){try{B||x.return==null||x.return()}finally{if(V)throw I}}}}function Vo(b,w){(w==null||w>b.length)&&(w=b.length);for(var x=0,O=new Array(w);x<w;x++)O[x]=b[x];return O}function xh(b,w){for(var x=0;x<w.length;x++){var O=w[x];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(b,Of(O.key),O)}}function Of(b){var w=function(x,O){if(uu(x)!="object"||!x)return x;var M=x[Symbol.toPrimitive];if(M!==void 0){var I=M.call(x,"string");if(uu(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(b);return uu(w)=="symbol"?w:String(w)}var Wo="GridLayout",Sc=function(){function b(O){var M=this;(function(Y,X){if(!(Y instanceof X))throw new TypeError("Cannot call a class as a function")})(this,b);var I=O.state;this.state=I,this.positions={},this.stateDisposers=[],this.stateDisposers.push(this.state.reaction(function(){return M.state.graphUpdates},function(){M.state.nodes.version!==void 0&&(M.shouldUpdate=!0),M.state.rels.version!==void 0&&(M.shouldUpdate=!0)}));var B=this.state,V=B.nodes,z=B.rels;V.addChannel(Wo),z.addChannel(Wo),this.shouldUpdate=!0,this.setOptions(O),this.layout(V.items,V.idToItem,V.idToPosition,z.items)}var w,x;return w=b,x=[{key:"setOptions",value:function(O){}},{key:"updateNodes",value:function(O){var M,I=is(O);try{for(I.s();!(M=I.n()).done;){var B=M.value;B.x!==void 0&&B.y!==void 0&&(this.positions[B.id]={x:B.x,y:B.y}),this.shouldUpdate=!0}}catch(V){I.e(V)}finally{I.f()}}},{key:"update",value:function(){var O=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.shouldUpdate||O){var M=this.state,I=M.nodes,B=M.rels,V=Object.values(I.channels[Wo].adds).length>0,z=Object.values(B.channels[Wo].adds).length>0,Y=Object.values(I.channels[Wo].removes).length>0,X=Object.values(B.channels[Wo].removes).length>0;(V||z||Y||X)&&(this.layout(I.items,I.idToItem,I.idToPosition,B.items),I.idToPosition=this.positions),I.clearChannel(Wo),B.clearChannel(Wo)}this.shouldUpdate=!1}},{key:"layout",value:function(O,M,I,B){var V,z=(V=O)?gt(V):V;if(!(0,r.isEmpty)(z)){for(var Y=z.length,X=Math.ceil(Math.sqrt(Y)),J=new Array(Y),ie=0,he=0;he<X;++he){for(var ge=0;ge<X&&(J[ie]={y:0+150*he,x:0+150*ge},(ie+=1)!==Y);++ge);if(ie===Y)break}for(var le=z.sort(),ye={},Me=0;Me<Y;++Me){var Ne=le[Me],Ue=J[Me];Ne.x===Ue.x&&Ne.y===Ue.y||(ye[Ne.id]=Ef({id:Ne.id},Ue))}this.positions=ye,this.shouldUpdate=!1}}},{key:"getNodePositions",value:function(O){var M,I=[],B=is(O);try{for(B.s();!(M=B.n()).done;){var V=M.value,z=this.positions[V.id],Y=Ef({id:V.id},z);I.push(Y)}}catch(X){B.e(X)}finally{B.f()}return I}},{key:"getShouldUpdate",value:function(){return this.shouldUpdate}},{key:"getComputing",value:function(){return!1}},{key:"terminateUpdate",value:function(){this.shouldUpdate=!1}},{key:"destroy",value:function(){this.state.nodes.removeChannel(Wo),this.state.rels.removeChannel(Wo)}}],x&&xh(w.prototype,x),Object.defineProperty(w,"prototype",{writable:!1}),b}(),os=new Set(["direction","packing"]),Sh="forceDirected",Sl="hierarchical",xf="grid",Id="free",as="d3Force",ki="webgl",Tc="canvas";function Cc(b){return Cc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},Cc(b)}function Ho(b,w,x){return w=function(O){var M=function(I,B){if(Cc(I)!="object"||!I)return I;var V=I[Symbol.toPrimitive];if(V!==void 0){var z=V.call(I,"string");if(Cc(z)!="object")return z;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(I)}(O);return Cc(M)=="symbol"?M:String(M)}(w),w in b?Object.defineProperty(b,w,{value:x,enumerable:!0,configurable:!0,writable:!0}):b[w]=x,b}var va="down",Pc=Ho(Ho(Ho(Ho({},"up","BT"),va,"TB"),"left","RL"),"right","LR"),ss="bin",Th=[ss,"stack"],$i=["html"],qu=["html"],_r=["captionHtml"];function lu(b){return lu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},lu(b)}function Sf(b,w){if(b==null)return{};var x,O,M=function(B,V){if(B==null)return{};var z,Y,X={},J=Object.keys(B);for(Y=0;Y<J.length;Y++)z=J[Y],V.indexOf(z)>=0||(X[z]=B[z]);return X}(b,w);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(b);for(O=0;O<I.length;O++)x=I[O],w.indexOf(x)>=0||Object.prototype.propertyIsEnumerable.call(b,x)&&(M[x]=b[x])}return M}function cu(b,w){for(var x=0;x<w.length;x++){var O=w[x];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(b,go(O.key),O)}}function kd(b,w,x){return w=Cl(w),function(O,M){if(M&&(lu(M)==="object"||typeof M=="function"))return M;if(M!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pn(O)}(b,Tl()?Reflect.construct(w,x||[],Cl(b).constructor):w.apply(b,x))}function Tl(){try{var b=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Tl=function(){return!!b})()}function Pn(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}function Ch(){return Ch=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(b,w,x){var O=function(I,B){for(;!Object.prototype.hasOwnProperty.call(I,B)&&(I=Cl(I))!==null;);return I}(b,w);if(O){var M=Object.getOwnPropertyDescriptor(O,w);return M.get?M.get.call(arguments.length<3?b:x):M.value}},Ch.apply(this,arguments)}function Cl(b){return Cl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(w){return w.__proto__||Object.getPrototypeOf(w)},Cl(b)}function Pl(b,w){return Pl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(x,O){return x.__proto__=O,x},Pl(b,w)}function Ki(b,w,x){return(w=go(w))in b?Object.defineProperty(b,w,{value:x,enumerable:!0,configurable:!0,writable:!0}):b[w]=x,b}function go(b){var w=function(x,O){if(lu(x)!="object"||!x)return x;var M=x[Symbol.toPrimitive];if(M!==void 0){var I=M.call(x,"string");if(lu(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(b);return lu(w)=="symbol"?w:String(w)}var Bi="HierarchicalLayout",Al=function(b){return b!==void 0?gt(b):b},Tg=function(b){function w(M){var I;(function(Y,X){if(!(Y instanceof X))throw new TypeError("Cannot call a class as a function")})(this,w),Ki(Pn(I=kd(this,w,[M])),"direction",void 0),Ki(Pn(I),"packing",void 0),Ki(Pn(I),"stateDisposers",void 0),Ki(Pn(I),"oldComputing",void 0),Ki(Pn(I),"computing",void 0),Ki(Pn(I),"pendingLayoutData",void 0),Ki(Pn(I),"worker",void 0),Ki(Pn(I),"directionChanged",void 0),Ki(Pn(I),"packingChanged",void 0),Ki(Pn(I),"workersDisabled",void 0),I.direction=va,I.packing=ss;var B=I.state,V=B.nodes,z=B.rels;return V.addChannel(Bi),z.addChannel(Bi),I.stateDisposers=[I.state.reaction(function(){return I.state.graphUpdates},function(){if(V.version!==void 0){var Y=V.channels[Bi],X=Object.values(Y.adds).length>0,J=Object.values(Y.removes).length>0,ie=Object.values(Y.updates),he=pe(ie);I.shouldUpdate=I.shouldUpdate||X||J||he}if(z.version!==void 0){var ge=z.channels[Bi],le=Object.values(ge.adds).length>0,ye=Object.values(ge.removes).length>0;I.shouldUpdate=I.shouldUpdate||le||ye}})],I.shouldUpdate=!0,I.oldComputing=!1,I.computing=!1,I.workersDisabled=M.state.disableWebWorkers,I.setOptions(M),I.worker=pl("HierarchicalLayout",I.workersDisabled),I.pendingLayoutData=null,I.layout(V.items,V.idToItem,V.idToPosition,z.items),I}var x,O;return function(M,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(I&&I.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),Object.defineProperty(M,"prototype",{writable:!1}),I&&Pl(M,I)}(w,b),x=w,O=[{key:"setOptions",value:function(M){if(M!==void 0&&function(Y){return Object.keys(Y).every(function(X){return os.has(X)})}(M)){var I=M.direction,B=I===void 0?va:I,V=M.packing,z=V===void 0?ss:V;Object.keys(Pc).includes(B)&&(this.directionChanged=this.direction&&this.direction!==B,this.direction=B),Th.includes(z)&&(this.packingChanged=this.packing&&this.packing!==z,this.packing=z),this.shouldUpdate=this.shouldUpdate||this.directionChanged||this.packingChanged}}},{key:"update",value:function(){var M=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.shouldUpdate||M){var I=this.state,B=I.nodes,V=I.rels,z=this.directionChanged,Y=this.packingChanged,X=Object.values(B.channels[Bi].adds).length>0,J=Object.values(V.channels[Bi].adds).length>0,ie=Object.values(B.channels[Bi].removes).length>0,he=Object.values(V.channels[Bi].removes).length>0,ge=Object.values(B.channels[Bi].updates),le=pe(ge);(M||X||J||ie||he||z||Y||le)&&this.layout(B.items,B.idToItem,B.idToPosition,V.items),B.clearChannel(Bi),V.clearChannel(Bi),this.directionChanged=!1,this.packingChanged=!1}Ch(Cl(w.prototype),"update",this).call(this),this.shouldUpdate=!1,this.oldComputing=this.computing}},{key:"getShouldUpdate",value:function(){return this.shouldUpdate||this.shouldUpdateAnimator}},{key:"getComputing",value:function(){return this.computing}},{key:"layout",value:function(M,I,B,V){var z=this;if(this.worker){var Y=Al(M).map(function(Ne){return Ne.html,Sf(Ne,$i)}),X=Al(I),J={};Object.keys(X).forEach(function(Ne){var Ue=X[Ne],je=(Ue.html,Sf(Ue,qu));J[Ne]=je});var ie=Al(V).map(function(Ne){return Ne.captionHtml,Sf(Ne,_r)}),he=Al(B),ge=this.direction,le=this.packing,ye=window.devicePixelRatio,Me={nodes:Y,nodeIds:J,idToPosition:he,rels:ie,direction:ge,packing:le,pixelRatio:ye,forcedDelay:0};this.computing?this.pendingLayoutData=Me:(this.worker.port.onmessage=function(Ne){var Ue=Ne.data,je=Ue.positions,Xe=Ue.parents,Ge=Ue.waypoints;z.computing&&(z.positions=je),z.parents=Xe,z.state.setWaypoints(Ge),z.pendingLayoutData!==null?(z.worker.port.postMessage(z.pendingLayoutData),z.pendingLayoutData=null):z.computing=!1,z.shouldUpdate=!0,z.startAnimation()},this.computing=!0,this.worker.port.postMessage(Me))}else zr.info("Hierarchical layout code not yet initialised.")}},{key:"terminateUpdate",value:function(){var M,I;this.computing=!1,this.shouldUpdate=!1,(M=this.state.nodes)===null||M===void 0||M.clearChannel(Bi),(I=this.state.rels)===null||I===void 0||I.clearChannel(Bi)}},{key:"destroy",value:function(){var M;this.stateDisposers.forEach(function(I){I()}),this.state.nodes.removeChannel(Bi),this.state.rels.removeChannel(Bi),(M=this.worker)===null||M===void 0||M.port.close()}}],O&&cu(x.prototype,O),Object.defineProperty(x,"prototype",{writable:!1}),w}(Pd);function fu(b){return fu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},fu(b)}function hp(b,w){for(var x=0;x<w.length;x++){var O=w[x];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(b,Tf(O.key),O)}}function ja(b,w,x){return(w=Tf(w))in b?Object.defineProperty(b,w,{value:x,enumerable:!0,configurable:!0,writable:!0}):b[w]=x,b}function Tf(b){var w=function(x,O){if(fu(x)!="object"||!x)return x;var M=x[Symbol.toPrimitive];if(M!==void 0){var I=M.call(x,"string");if(fu(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(b);return fu(w)=="symbol"?w:String(w)}var dp=function(){function b(O,M){(function(I,B){if(!(I instanceof B))throw new TypeError("Cannot call a class as a function")})(this,b),ja(this,"elementId",void 0),ja(this,"currentValue",void 0),ja(this,"startValue",void 0),ja(this,"currentTime",void 0),ja(this,"duration",void 0),ja(this,"status",void 0),ja(this,"endValue",void 0),ja(this,"startTime",void 0),ja(this,"endTime",void 0),ja(this,"hasNextAnimation",void 0),this.elementId=O,this.startValue=M,this.status=0,this.currentValue=M,this.duration=0}var w,x;return w=b,(x=[{key:"setDuration",value:function(O){this.duration=O,this.setEndTime(this.startTime+this.duration)}},{key:"getStatus",value:function(){return this.status}},{key:"advance",value:function(){if(this.status!==1)return!1;this.currentTime=new Date().getTime();var O,M=this.endTime-this.startTime;return(O=M>0?(this.currentTime-this.startTime)/M:1)>=1?(this.currentValue=this.endValue,this.status=2):(this.currentValue=this.startValue+O*(this.endValue-this.startValue),this.hasNextAnimation=!0),this.hasNextAnimation}},{key:"setEndValue",value:function(O){this.endValue!==O&&(O-this.currentValue!=0?(this.currentTime=new Date().getTime(),this.status=1,this.startValue=this.currentValue,this.endValue=O,this.startTime=this.currentTime,this.setEndTime(this.startTime+this.duration)):this.endValue=O)}},{key:"setEndTime",value:function(O){this.endTime=Math.max(O,this.startTime)}}])&&hp(w.prototype,x),Object.defineProperty(w,"prototype",{writable:!1}),b}();function hu(b){return hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},hu(b)}function Ph(b,w){var x=Object.keys(b);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(b);w&&(O=O.filter(function(M){return Object.getOwnPropertyDescriptor(b,M).enumerable})),x.push.apply(x,O)}return x}function Rl(b){for(var w=1;w<arguments.length;w++){var x=arguments[w]!=null?arguments[w]:{};w%2?Ph(Object(x),!0).forEach(function(O){us(b,O,x[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(x)):Ph(Object(x)).forEach(function(O){Object.defineProperty(b,O,Object.getOwnPropertyDescriptor(x,O))})}return b}function Ah(b,w){for(var x=0;x<w.length;x++){var O=w[x];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(b,Dd(O.key),O)}}function us(b,w,x){return(w=Dd(w))in b?Object.defineProperty(b,w,{value:x,enumerable:!0,configurable:!0,writable:!0}):b[w]=x,b}function Dd(b){var w=function(x,O){if(hu(x)!="object"||!x)return x;var M=x[Symbol.toPrimitive];if(M!==void 0){var I=M.call(x,"string");if(hu(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(b);return hu(w)=="symbol"?w:String(w)}var Cf=function(){function b(){(function(O,M){if(!(O instanceof M))throw new TypeError("Cannot call a class as a function")})(this,b),us(this,"animations",void 0),us(this,"durations",void 0),us(this,"defaultDuration",void 0),us(this,"hasNextAnimation",void 0),us(this,"ignoreAnimationsFlag",void 0),this.animations=new Map,this.durations=[],this.durations[0]=0,this.durations[1]=0,this.defaultDuration=150,this.hasNextAnimation=!1,this.ignoreAnimationsFlag=!1}var w,x;return w=b,x=[{key:"advance",value:function(){var O=this;return this.hasNextAnimation=!1,this.animations.forEach(function(M){Object.values(M).forEach(function(I){I.advance()&&(O.hasNextAnimation=!0)})}),this.hasNextAnimation}},{key:"ignoreAnimations",value:function(O){this.ignoreAnimationsFlag=O}},{key:"setOptions",value:function(O){O.fadeDuration!==void 0&&(this.durations[0]=O.fadeDuration),O.sizeDuration!==void 0&&(this.durations[1]=O.sizeDuration)}},{key:"needsToRun",value:function(){return this.hasNextAnimation}},{key:"getValueForAnimationName",value:function(O,M,I){var B,V,z=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;if(this.ignoreAnimationsFlag)return I;var Y=(B=this.getById(O))!==null&&B!==void 0?B:{};if(Y[M]===void 0){var X=z===1?this.createSizeAnimation(0,O,M):this.createFadeAnimation(0,O,M);X.setEndValue(I),V=X.currentValue}else{var J=Y[M];if(J.currentValue===I)return I;J.setEndValue(I),V=J.currentValue}return this.hasNextAnimation=!0,V}},{key:"createAnimation",value:function(O,M,I){var B,V=new dp(M,O),z=(B=this.animations.get(M))!==null&&B!==void 0?B:{};return this.animations.set(M,Rl(Rl({},z),{},us({},I,V))),V}},{key:"getById",value:function(O){return this.animations.get(O)}},{key:"createFadeAnimation",value:function(O,M,I){var B,V=this.createAnimation(O,M,I);return V.setDuration((B=this.durations[0])!==null&&B!==void 0?B:this.defaultDuration),V}},{key:"createSizeAnimation",value:function(O,M,I){var B,V=this.createAnimation(O,M,I);return V.setDuration((B=this.durations[1])!==null&&B!==void 0?B:this.defaultDuration),V}}],x&&Ah(w.prototype,x),Object.defineProperty(w,"prototype",{writable:!1}),b}();function zu(b){return zu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},zu(b)}function Md(b,w){for(var x=0;x<w.length;x++){var O=w[x];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(b,Rh(O.key),O)}}function Rh(b){var w=function(x,O){if(zu(x)!="object"||!x)return x;var M=x[Symbol.toPrimitive];if(M!==void 0){var I=M.call(x,"string");if(zu(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(b);return zu(w)=="symbol"?w:String(w)}var Oi=64,du=function(){function b(){var O,M,I;(function(B,V){if(!(B instanceof V))throw new TypeError("Cannot call a class as a function")})(this,b),O=this,I=void 0,(M=Rh(M="cache"))in O?Object.defineProperty(O,M,{value:I,enumerable:!0,configurable:!0,writable:!0}):O[M]=I,this.cache={}}var w,x;return w=b,x=[{key:"getImage",value:function(O){var M=arguments.length>1&&arguments[1]!==void 0&&arguments[1],I=this.getOrCreateEntry(O),B=M?"inverted":"image",V=I[B];return V===void 0&&(V=this.loadImage(O),I[B]=V),this.drawIfNeeded(V,M),V.canvas}},{key:"getOrCreateEntry",value:function(O){return this.cache[O]===void 0&&(this.cache[O]={}),this.cache[O]}},{key:"invertCanvas",value:function(O){for(var M=O.getImageData(0,0,Oi,Oi),I=M.data,B=0;B<4096;B++){var V=4*B;I[V]^=255,I[V+1]^=255,I[V+2]^=255}O.putImageData(M,0,0)}},{key:"loadImage",value:function(O){var M=document.createElement("canvas");M.width=Oi,M.height=Oi;var I=new Image;return I.src=O,I.crossOrigin="anonymous",{canvas:M,image:I,drawn:!1}}},{key:"drawIfNeeded",value:function(O,M){var I=O.image,B=O.canvas;if(!O.drawn&&I.complete){var V=B.getContext("2d");try{V.drawImage(I,0,0,Oi,Oi)}catch(z){zr.error("Failed to draw image",I.src,z),V.beginPath(),V.strokeStyle="black",V.rect(0,0,Oi,Oi),V.moveTo(0,0),V.lineTo(Oi,Oi),V.moveTo(0,Oi),V.lineTo(Oi,0),V.stroke(),V.closePath()}M&&this.invertCanvas(V),O.drawn=!0}}}],x&&Md(w.prototype,x),Object.defineProperty(w,"prototype",{writable:!1}),b}();const Ld=du;function Il(b){return Il=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},Il(b)}function Nd(b,w){(w==null||w>b.length)&&(w=b.length);for(var x=0,O=new Array(w);x<w;x++)O[x]=b[x];return O}function jd(b,w){for(var x=0;x<w.length;x++){var O=w[x];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(b,Fd(O.key),O)}}function Sr(b,w,x){return(w=Fd(w))in b?Object.defineProperty(b,w,{value:x,enumerable:!0,configurable:!0,writable:!0}):b[w]=x,b}function Fd(b){var w=function(x,O){if(Il(x)!="object"||!x)return x;var M=x[Symbol.toPrimitive];if(M!==void 0){var I=M.call(x,"string");if(Il(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(b);return Il(w)=="symbol"?w:String(w)}var vp=function(){function b(O,M,I){(function(B,V){if(!(B instanceof V))throw new TypeError("Cannot call a class as a function")})(this,b),Sr(this,"key",void 0),Sr(this,"rels",void 0),Sr(this,"waypointPath",void 0),Sr(this,"selfReferring",void 0),Sr(this,"fromId",void 0),Sr(this,"toId",void 0),Sr(this,"angles",void 0),Sr(this,"labelInfo",void 0),this.key=O,this.rels=[],this.selfReferring=M===I,this.fromId=M,this.toId=I,this.labelInfo={},this.angles=[]}var w,x;return w=b,x=[{key:"insert",value:function(O){this.rels.push({rel:O})}},{key:"setLabelInfo",value:function(O,M){this.labelInfo[O]=M}},{key:"remove",value:function(O){var M=O.id,I=this.rels,B=I.findIndex(function(X){return X.rel.id===M});if(B!==-1&&(I.splice(B,1),B===0&&I.length>0)){var V=I[0].rel,z=V.from,Y=V.to;this.fromId=z,this.toId=Y}}},{key:"size",value:function(){return this.rels.length}},{key:"maxFontSize",value:function(){return Math.max.apply(Math,function(M){if(Array.isArray(M))return Nd(M)}(O=this.rels.map(function(M){var I=M.rel;return(0,r.isNumber)(I.captionSize)?I.captionSize:1}))||function(M){if(typeof Symbol<"u"&&M[Symbol.iterator]!=null||M["@@iterator"]!=null)return Array.from(M)}(O)||function(M,I){if(M){if(typeof M=="string")return Nd(M,I);var B=Object.prototype.toString.call(M).slice(8,-1);return B==="Object"&&M.constructor&&(B=M.constructor.name),B==="Map"||B==="Set"?Array.from(M):B==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B)?Nd(M,I):void 0}}(O)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}());var O}},{key:"relIsOppositeDirection",value:function(O){var M=O.from,I=O.to,B=this.fromId,V=this.toId;return M!==B&&I!==V||M===V&&I===B}},{key:"indexOf",value:function(O){var M=O.id;return this.rels.findIndex(function(I){return I.rel.id===M})}},{key:"getRel",value:function(O){var M=this.rels;return O<0||O>=M.length?null:M[O].rel}},{key:"setWaypoints",value:function(O){this.waypointPath=O}},{key:"setAngles",value:function(O){this.angles=O}}],x&&jd(w.prototype,x),Object.defineProperty(w,"prototype",{writable:!1}),b}(),kl=pc,Bd=2*Math.PI/50,pp=.1*Math.PI;function Pf(b){return Pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},Pf(b)}function li(b,w){var x=typeof Symbol<"u"&&b[Symbol.iterator]||b["@@iterator"];if(!x){if(Array.isArray(b)||(x=function(z,Y){if(z){if(typeof z=="string")return gp(z,Y);var X=Object.prototype.toString.call(z).slice(8,-1);return X==="Object"&&z.constructor&&(X=z.constructor.name),X==="Map"||X==="Set"?Array.from(z):X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X)?gp(z,Y):void 0}}(b))||w){x&&(b=x);var O=0,M=function(){};return{s:M,n:function(){return O>=b.length?{done:!0}:{done:!1,value:b[O++]}},e:function(z){throw z},f:M}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I,B=!0,V=!1;return{s:function(){x=x.call(b)},n:function(){var z=x.next();return B=z.done,z},e:function(z){V=!0,I=z},f:function(){try{B||x.return==null||x.return()}finally{if(V)throw I}}}}function gp(b,w){(w==null||w>b.length)&&(w=b.length);for(var x=0,O=new Array(w);x<w;x++)O[x]=b[x];return O}function Af(b,w){for(var x=0;x<w.length;x++){var O=w[x];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(b,Rf(O.key),O)}}function Ih(b,w,x){return(w=Rf(w))in b?Object.defineProperty(b,w,{value:x,enumerable:!0,configurable:!0,writable:!0}):b[w]=x,b}function Rf(b){var w=function(x,O){if(Pf(x)!="object"||!x)return x;var M=x[Symbol.toPrimitive];if(M!==void 0){var I=M.call(x,"string");if(Pf(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(b);return Pf(w)=="symbol"?w:String(w)}var yp=function(b){var w=[];if(b.length===0)w.push({size:2*Math.PI,start:0});else{for(var x=b.length-1;x>=0;x--){var O=void 0,M=void 0;x===0?(M=b[b.length-1],O=b[x]-b[b.length-1]+2*Math.PI):(M=b[x-1],O=b[x]-b[x-1]),w.push({size:O,start:M})}w.sort(function(I,B){return B.size-I.size})}return w},pa=function(b,w){for(;w>b.length||b[0].size>2*b[w-1].size;)b.push({size:b[0].size/2,start:b[0].start}),b.push({size:b[0].size/2,start:b[0].start+b[0].size/2}),b.shift(),b.sort(function(x,O){return O.size-x.size});return b},Gu=function(){function b(O,M){(function(B,V){if(!(B instanceof V))throw new TypeError("Cannot call a class as a function")})(this,b),Ih(this,"bundles",void 0),Ih(this,"nodeToBundles",void 0),this.bundles={},this.nodeToBundles={};var I=O.reduce(function(B,V){return B[V.id]=V,B},{});this.updateData(I,{},M)}var w,x;return w=b,x=[{key:"getBundle",value:function(O){var M=this.bundles,I=this.nodeToBundles,B=this.generatePairId(O.from,O.to),V=M[B];return V===void 0&&(V=new vp(B,O.from,O.to),M[B]=V,I[O.from]===void 0&&(I[O.from]=[]),I[O.to]===void 0&&(I[O.to]=[]),I[O.from].push(V),I[O.to].push(V)),V}},{key:"updateData",value:function(O,M,I){for(var B=this.bundles,V=this.nodeToBundles,z=function(Xe,Ge){var Ke=V[Ge].findIndex(function($e){return $e===Xe});Ke!==-1&&V[Ge].splice(Ke,1),V[Ge].length===0&&delete V[Ge]},Y=Object.values(O),X=Object.values(M),J=0,ie=Y;J<ie.length;J++){var he=ie[J];this.getBundle(he).insert(he)}for(var ge=0,le=X;ge<le.length;ge++){var ye=le[ge],Me=this.getBundle(ye);Me.remove(ye),Me.size()===0&&(delete B[Me.key],z(Me,ye.from),z(Me,ye.to))}for(var Ne=0,Ue=Object.keys(B);Ne<Ue.length;Ne++){var je=B[Ue[Ne]];je.setWaypoints(I["".concat(je.fromId,"-").concat(je.toId)])}}},{key:"updatePositions",value:function(O){for(var M=this.nodeToBundles,I=0,B=Object.keys(O);I<B.length;I++){var V,z=B[I],Y=(V=M[z])!==null&&V!==void 0?V:[];if(Y.length!==0){var X=Y.find(function(Ve){return Ve.selfReferring}),J=Y.filter(function(Ve){return!Ve.selfReferring});if(X!==void 0){var ie,he=[],ge=li(J);try{for(ge.s();!(ie=ge.n()).done;){var le=ie.value,ye=O[le.fromId],Me=O[le.toId];if(ye!==void 0&&Me!==void 0)for(var Ne=Bd*le.size(),Ue=ye.id===z?Math.atan2(Me.y-ye.y,Me.x-ye.x):Math.atan2(ye.y-Me.y,ye.x-Me.x),je=0;je<le.size();je++)he.push(Ue+Ne/2-je*Bd);else{var Xe=ye===void 0?le.fromId:le.toId;zr.warn("Arrowbundler: Node with id ".concat(Xe," is not in position map"))}}}catch(Ve){ge.e(Ve)}finally{ge.f()}var Ge=he.map(function(Ve){return(Ve+2*Math.PI)%(2*Math.PI)}).sort(),Ke=yp(Ge);pa(Ke,X.size());var $e=Ke.map(function(Ve){return Ve.start+Ve.size/2}).slice(0,X.size());X.setAngles($e)}}}}},{key:"generatePairId",value:function(O,M){return[O.toString(),M.toString()].sort(function(I,B){return I.localeCompare(B)}).join("-")}}],x&&Af(w.prototype,x),Object.defineProperty(w,"prototype",{writable:!1}),b}();function vu(b){return vu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},vu(b)}function kh(b,w){var x=Object.keys(b);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(b);w&&(O=O.filter(function(M){return Object.getOwnPropertyDescriptor(b,M).enumerable})),x.push.apply(x,O)}return x}function Dh(b,w){for(var x=0;x<w.length;x++){var O=w[x];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(b,Mh(O.key),O)}}function Vu(b,w,x){return(w=Mh(w))in b?Object.defineProperty(b,w,{value:x,enumerable:!0,configurable:!0,writable:!0}):b[w]=x,b}function Mh(b){var w=function(x,O){if(vu(x)!="object"||!x)return x;var M=x[Symbol.toPrimitive];if(M!==void 0){var I=M.call(x,"string");if(vu(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(b);return vu(w)=="symbol"?w:String(w)}var If=function(b,w){return(0,r.isFinite)(b.x)&&(0,r.isFinite)(b.y)&&(0,r.isFinite)(w.x)&&(0,r.isFinite)(w.y)},Ac=function(b,w){if(b===void 0||w===void 0||!If(b,w))return!1;var x=w.x-b.x,O=w.y-b.y,M=rt();return x*x+O*O<100*M*M},Zi=function(){function b(O,M){(function(I,B){if(!(I instanceof B))throw new TypeError("Cannot call a class as a function")})(this,b),Vu(this,"p1",void 0),Vu(this,"p2",void 0),Vu(this,"unit",void 0),Vu(this,"norm",void 0),Vu(this,"length",void 0),Vu(this,"vector",void 0),this.p1=O,this.p2=M,this.vector=this.getVector(),this.length=this.getLength(),this.unit=this.getUnitVector(),this.norm=this.getUnitNormalVector()}var w,x;return w=b,x=[{key:"getVector",value:function(){return{x:this.p2.x-this.p1.x,y:this.p2.y-this.p1.y}}},{key:"getLength",value:function(){var O=this.vector,M=O.x,I=O.y;return Math.sqrt(M*M+I*I)}},{key:"getUnitVector",value:function(){var O=this.vector,M=this.length;return{x:O.x/M,y:O.y/M}}},{key:"getUnitNormalVector",value:function(){return{x:this.unit.y,y:-this.unit.x}}}],x&&Dh(w.prototype,x),Object.defineProperty(w,"prototype",{writable:!1}),b}(),ls=function(b,w,x){var O={x:w.x-b.x,y:w.y-b.y},M=function(Y,X){var J=(Y.x*X.x+Y.y*X.y)/(X.x*X.x+X.y*X.y);return(0,r.clamp)(J,0,1)}({x:x.x-b.x,y:x.y-b.y},O),I=b.x+M*O.x,B=b.y+M*O.y,V=I-x.x,z=B-x.y;return Math.sqrt(V*V+z*z)},Lh=function(b,w,x,O){if(w.x===x.x&&w.y===x.y)return w;var M=w.y-b.y,I=b.x-w.x,B=M*b.x+I*b.y,V=O.y-x.y,z=x.x-O.x,Y=V*x.x+z*x.y,X=M*z-V*I;return X===0?null:{x:(z*B-I*Y)/X,y:(M*Y-V*B)/X}},Is=function(b,w,x,O){var M,I,B,V=1e9,z=function(X){for(var J=1;J<arguments.length;J++){var ie=arguments[J]!=null?arguments[J]:{};J%2?kh(Object(ie),!0).forEach(function(he){Vu(X,he,ie[he])}):Object.getOwnPropertyDescriptors?Object.defineProperties(X,Object.getOwnPropertyDescriptors(ie)):kh(Object(ie)).forEach(function(he){Object.defineProperty(X,he,Object.getOwnPropertyDescriptor(ie,he))})}return X}({},b),Y={x:0,y:0};for(I=1;I<10;I++)B=.1*I,Y.x=Math.pow(1-B,2)*b.x+2*B*(1-B)*x.x+Math.pow(B,2)*w.x,Y.y=Math.pow(1-B,2)*b.y+2*B*(1-B)*x.y+Math.pow(B,2)*w.y,I>0&&(V=(M=ls(z,Y,O))<V?M:V),z.x=Y.x,z.y=Y.y;return V},mp=Mi(3269),Ud=Mi.n(mp);function Dl(b){return Dl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},Dl(b)}function Rc(b){return function(w){if(Array.isArray(w))return jh(w)}(b)||function(w){if(typeof Symbol<"u"&&w[Symbol.iterator]!=null||w["@@iterator"]!=null)return Array.from(w)}(b)||zd(b)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function qd(b,w){var x=Object.keys(b);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(b);w&&(O=O.filter(function(M){return Object.getOwnPropertyDescriptor(b,M).enumerable})),x.push.apply(x,O)}return x}function Nh(b){for(var w=1;w<arguments.length;w++){var x=arguments[w]!=null?arguments[w]:{};w%2?qd(Object(x),!0).forEach(function(O){var M,I,B;M=b,I=O,B=x[O],I=function(V){var z=function(Y,X){if(Dl(Y)!="object"||!Y)return Y;var J=Y[Symbol.toPrimitive];if(J!==void 0){var ie=J.call(Y,"string");if(Dl(ie)!="object")return ie;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Y)}(V);return Dl(z)=="symbol"?z:String(z)}(I),I in M?Object.defineProperty(M,I,{value:B,enumerable:!0,configurable:!0,writable:!0}):M[I]=B}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(x)):qd(Object(x)).forEach(function(O){Object.defineProperty(b,O,Object.getOwnPropertyDescriptor(x,O))})}return b}function zd(b,w){if(b){if(typeof b=="string")return jh(b,w);var x=Object.prototype.toString.call(b).slice(8,-1);return x==="Object"&&b.constructor&&(x=b.constructor.name),x==="Map"||x==="Set"?Array.from(b):x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x)?jh(b,w):void 0}}function jh(b,w){(w==null||w>b.length)&&(w=b.length);for(var x=0,O=new Array(w);x<w;x++)O[x]=b[x];return O}var Ml="…",Gd=function(b){return!(!b||!isNaN(Number(b))||b.toLowerCase()===b.toUpperCase())&&b===b.toUpperCase()},bp=function(b){var w=b[b.length-1],x=b[b.length-2];return!(!w||!isNaN(Number(w))||w.toLowerCase()===w.toUpperCase())&&!(!x||!isNaN(Number(x))||x.toLowerCase()===x.toUpperCase())&&Gd(w)&&!Gd(x)},Ui=function(b,w,x,O){for(var M,I=arguments.length>4&&arguments[4]!==void 0&&arguments[4],B=[],V=[],z=0,Y=0,X=!1,J=!1,ie=0;ie<O;ie++)B[ie]=x(ie,O);for(var he,ge=function(){M=b.slice(z,le);var ye,Me,Ne=w(M),Ue=B[Y];if(Ne>Ue||(Me=b[le-1],`
\r\v`.includes(Me))){if(!(Y<O-1)){if(I)return{v:[]};for(var je=le;Ne>Ue;){for(je-=1;ye=b[je-1],` 	
\r\v`.includes(ye);)je-=1;if(!(je-z>1)){M="",J=!0,X=!1;break}M=b.slice(z,je),Ne=w(M),J=!0,X=!1}return V[Y]={text:M,hasEllipsisChar:J,hasHyphenChar:X},{v:V}}X=!1,J=!1;var Xe=function(Ke){var $e=Ke.length,Ve=Math.min($e-1,3);if($e===1)return{hyphen:!1,cnt:0};for(var tt=0;tt<Ve;tt++){var mt=Ke[Ke.length-(tt+1)];if(mt===" "||mt.toLowerCase()===mt.toUpperCase())return{hyphen:!1,cnt:tt+1};var It=Ke.slice(0,Ke.length-tt);if(bp(It))return{hyphen:!1,cnt:tt+1}}return{hyphen:!0,cnt:1}}(M),Ge=le-Xe.cnt;if(Xe.hyphen)for(M=b.slice(z,Ge),Ne=w(M),X=!0;Ne>Ue;){if(!(Ge-z>1)){M=b[z],Ge=z+1,Ne=w(M),X=!1;break}Ge-=1,M=b.slice(z,Ge),Ne=w(M),X=!0}else M=(M=b.slice(z,Ge)).trim();V[Y]={text:M,hasEllipsisChar:J,hasHyphenChar:X},z=Ge,Y+=1}},le=1;le<=b.length;le++)if(he=ge())return he.v;return M=b.slice(z,b.length),V[Y]={text:M,hasEllipsisChar:J,hasHyphenChar:!1},V},Fa=function(b,w,x,O,M,I,B,V){b.font="bold ".concat(O,"px ").concat(x).replace(/"/g,"");for(var z=function(ge){var le;return(le=b.measureText(ge))===null||le===void 0?void 0:le.width},Y=I?(B<4?["",""]:[""]).length:0,X=function(ge,le){return function(ye,Me,Ne){var Ue=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"top",je=.98*Ne,Xe=.89*Ne,Ge=.95*Ne;return Me===1?je:Me===2?Ge:Me===3&&Ue==="top"?ye===0||ye===2?Xe:je:Me===4&&Ue==="top"?ye===0||ye===3?.78*Ne:Ge:Me===5&&Ue==="top"?ye===0||ye===4?.65*Ne:ye===1||ye===3?Xe:Ge:je}(ge+Y,le+Y,M)},J=1,ie=[],he=function(){if((ie=function(le,ye,Me,Ne){var Ue,je=le.split(/\s/g).filter(function(bt){return bt.length>0}),Xe=[],Ge=null,Ke=function(bt){return ye(bt)>Me(Xe.length,Ne)},$e=function(bt,jt){var Ct=typeof Symbol<"u"&&bt[Symbol.iterator]||bt["@@iterator"];if(!Ct){if(Array.isArray(bt)||(Ct=zd(bt))){Ct&&(bt=Ct);var Pe=0,Te=function(){};return{s:Te,n:function(){return Pe>=bt.length?{done:!0}:{done:!1,value:bt[Pe++]}},e:function(ht){throw ht},f:Te}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ae,ot=!0,Ze=!1;return{s:function(){Ct=Ct.call(bt)},n:function(){var ht=Ct.next();return ot=ht.done,ht},e:function(ht){Ze=!0,Ae=ht},f:function(){try{ot||Ct.return==null||Ct.return()}finally{if(Ze)throw Ae}}}}(je);try{for($e.s();!(Ue=$e.n()).done;){var Ve=Ue.value,tt=Ge?"".concat(Ge," ").concat(Ve):Ve;if(ye(tt)<Me(Xe.length,Ne))Ge=tt;else{if(Ge!==null){var mt=Ke(Ge);Xe.push({text:Ge,overflowed:mt})}if(Ge=Ve,Xe.length>Ne)return[]}}}catch(bt){$e.e(bt)}finally{$e.f()}if(Ge){var It=Ke(Ge);Xe.push({text:Ge,overflowed:It})}return Xe.length<=Ne?Xe:[]}(w,z,X,J)).length===0)ie=Ui(w,z,X,J,B>J);else if(ie.some(function(le){return le.overflowed})){var ge=J;ie=ie.reduce(function(le,ye){var Me=B-le.length;if(Me===0){var Ne=le[le.length-1];return Ne.text.endsWith(Ml)||(z(Ne.text)+z(Ml)>X(le.length,ge)?(le[le.length-1].text=Ne.text.slice(0,-2),le[le.length-1].hasEllipsisChar=!0):(le[le.length-1].text=Ne.text,le[le.length-1].hasEllipsisChar=!0)),le}if(ye.overflowed){var Ue=Ui(ye.text,z,X,Me);le=le.concat(Ue)}else le.push({text:ye.text,hasEllipsisChar:!1,hasHyphenChar:!1});return le},[])}else ie=ie.map(function(le){return Nh(Nh({},le),{},{hasEllipsisChar:!1,hasHyphenChar:!1})});J+=1};ie.length===0;)he();return Array.from(ie)},Vd=function(){var b=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).reduce(function(w,x,O){var M=x.value;if(M){var I="".concat(O>0&&w.length?", ":"").concat(M);return[].concat(Rc(w),[Nh(Nh({},x),{},{value:I,chars:I.split("").map(function(B,V){var z,Y;return O!==0&&w.length?V<2?null:Rc((z=x.styles)!==null&&z!==void 0?z:[]):Rc((Y=x.styles)!==null&&Y!==void 0?Y:[])})})])}return[]},[]);return{stylesPerChar:b.reduce(function(w,x){return[].concat(Rc(w),Rc(x.chars))},[]),fullCaption:b.map(function(w){return w.value}).join("")}};function kf(b,w){(w==null||w>b.length)&&(w=b.length);for(var x=0,O=new Array(w);x<w;x++)O[x]=b[x];return O}var Df=[[.04,1],[100,2]],ks=[[.8,1.1],[3,1.6],[8,2.5]],_p=[[ks[0][0],1],[100,1.25]],Wu=function(b,w){if(b.includes("rgba"))return b;if(b.includes("rgb")){var x=b.substr(b.indexOf("(")+1).replace(")","").split(",");return"rgba(".concat(x[0],",").concat(x[1],",").concat(x[2],",").concat(w,")")}var O=Ud().get.rgb(b);return O===null?b:"rgba(".concat(O[0],",").concat(O[1],",").concat(O[2],",").concat(w,")")},cs=function(b,w,x,O){var M=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],I=arguments.length>5&&arguments[5]!==void 0&&arguments[5],B=O.headPosition,V=O.headAngle,z=O.headHeight,Y=O.headChinHeight,X=O.headWidth,J=Math.cos(V),ie=Math.sin(V),he=function(ye,Me){return{x:B.x+ye*J-Me*ie,y:B.y+ye*ie+Me*J}},ge=[he(Y-z,0),he(-z,X/2),he(0,0),he(-z,-X/2)],le={lineWidth:b.lineWidth,strokeStyle:b.strokeStyle,fillStyle:b.fillStyle};b.lineWidth=w,b.strokeStyle=x,b.fillStyle=x,function(ye,Me,Ne,Ue){if(ye.beginPath(),Me.length>0){var je=Me[0];ye.moveTo(je.x,je.y)}for(var Xe=1;Xe<Me.length;Xe++){var Ge=Me[Xe];ye.lineTo(Ge.x,Ge.y)}ye.closePath(),Ne&&ye.fill(),Ue&&ye.stroke()}(b,ge,M,I),b.lineWidth=le.lineWidth,b.strokeStyle=le.strokeStyle,b.fillStyle=le.fillStyle},Ic=function(b,w,x,O,M){var I=O;M.forEach(function(B){var V=B.width,z=B.color,Y=I+V;b.beginPath(),b.fillStyle=z,b.arc(w,x,Y,0,2*Math.PI,!1),b.arc(w,x,I,2*Math.PI,0,!0),b.fill(),b.closePath(),I=Y})},Ll=function(b,w,x,O){b.beginPath(),b.arc(w,x,O,0,2*Math.PI,!1),b.closePath()},Hu=function(b,w,x,O,M){b.beginPath(),b.fillStyle=O,Ll(b,w,x,M),b.fill(),b.closePath()};function Fh(b,w){var x=w.find(function(M){return b<M[0]}),O=w[w.length-1][1];return x!==void 0?x[1]:O}var Wd=function(b,w,x,O,M,I,B,V,z,Y){var X=O,J=0,ie=0,he="".concat(M,"px ").concat(I),ge="normal ".concat(he);w.forEach(function(le){var ye;b.font=ge;var Me,Ne=-((ye=b.measureText(le.text))===null||ye===void 0?void 0:ye.width)/2,Ue=le.text?function(je){if(Array.isArray(je))return kf(je)}(Me=le.text)||function(je){if(typeof Symbol<"u"&&je[Symbol.iterator]!=null||je["@@iterator"]!=null)return Array.from(je)}(Me)||function(je,Xe){if(je){if(typeof je=="string")return kf(je,Xe);var Ge=Object.prototype.toString.call(je).slice(8,-1);return Ge==="Object"&&je.constructor&&(Ge=je.constructor.name),Ge==="Map"||Ge==="Set"?Array.from(je):Ge==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ge)?kf(je,Xe):void 0}}(Me)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}():[];le.hasHyphenChar||le.hasEllipsisChar||Ue.push(" "),Ue.forEach(function(je){var Xe,Ge=b.measureText(je).width,Ke=(Xe=x[ie])!==null&&Xe!==void 0?Xe:[],$e=Ke.includes("bold"),Ve=Ke.includes("italic");b.font=$e&&Ve?"italic 600 ".concat(he):Ve?"italic 400 ".concat(he):$e?"bold ".concat(he):ge,Ke.includes("underline")&&b.fillRect(V+Ne+J,z+X+.2,Ge,.2),le.hasEllipsisChar?b.fillText(je,V+Ne+J-Y/2,z+X):b.fillText(je,V+Ne+J,z+X),J+=Ge,ie+=1}),b.font=ge,le.hasHyphenChar&&b.fillText("‐",V+Ne+J,z+X),le.hasEllipsisChar&&b.fillText(Ml,V+Ne+J-Y/2,z+X),J=0,X+=B})},oo=function(b,w){return{x:b.x+w.x,y:b.y+w.y}},Mf=function(b,w){return{x:b.x-w.x,y:b.y-w.y}},Nl=function(b,w){return{x:b.x*w,y:b.y*w}},Yo=function(b,w){return function(x){return Math.sqrt(x.x*x.x+x.y*x.y)}(Mf(b,w))},Cr=function(b,w){return{x:Math.cos(b)*w,y:Math.sin(b)*w}};function Lf(b,w){var x=typeof Symbol<"u"&&b[Symbol.iterator]||b["@@iterator"];if(!x){if(Array.isArray(b)||(x=function(z,Y){if(z){if(typeof z=="string")return To(z,Y);var X=Object.prototype.toString.call(z).slice(8,-1);return X==="Object"&&z.constructor&&(X=z.constructor.name),X==="Map"||X==="Set"?Array.from(z):X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X)?To(z,Y):void 0}}(b))||w){x&&(b=x);var O=0,M=function(){};return{s:M,n:function(){return O>=b.length?{done:!0}:{done:!1,value:b[O++]}},e:function(z){throw z},f:M}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I,B=!0,V=!1;return{s:function(){x=x.call(b)},n:function(){var z=x.next();return B=z.done,z},e:function(z){V=!0,I=z},f:function(){try{B||x.return==null||x.return()}finally{if(V)throw I}}}}function To(b,w){(w==null||w>b.length)&&(w=b.length);for(var x=0,O=new Array(w);x<w;x++)O[x]=b[x];return O}var Hn=2*Math.PI,Qi=Math.PI/2,Hd=function(b,w,x,O,M,I){var B={x:(b.x+w.x)/2,y:(b.y+w.y)/2},V={x:b.x,y:b.y},z={x:w.x,y:w.y},Y=new Zi(z,V),X=function(ie,he){var ge=0;return ie&&(ge+=ie),he&&(ge-=he),ge}(O,x);B.x+=X/2*Y.unit.x,B.y+=X/2*Y.unit.y;var J=I.size()/2-I.indexOf(M);return B.x+=J*Y.unit.x,B.y+=J*Y.unit.y,B},jl=function(b){var w=rt(),x=b.size,O=b.selected;return((x??Zn)+4+(O===!0?4:0))*w},Ba=function(b,w){var x=rt();b.shadowColor=w.color,b.shadowBlur=w.width*x,b.shadowOffsetX=0,b.shadowOffsetY=0},kc=function(b){b.shadowColor="rgba(0,0,0,0)",b.shadowBlur=0,b.shadowOffsetX=0,b.shadowOffsetY=0},Xo=function(b,w,x,O,M){var I,B,V=arguments.length>5&&arguments[5]!==void 0&&arguments[5],z=function(Te){var Ae=arguments.length>1&&arguments[1]!==void 0&&arguments[1],ot=Te.norm.x,Ze=Te.norm.y;return Ae?{x:-ot,y:-Ze}:Te.norm},Y=rt(),X=w.indexOf(b),J=(w.size()-1)/2,ie=X>J,he=Math.abs(X-J),ge=M?17*w.maxFontSize():8,le=(w.size()-1)*ge*Y,ye=function(Te,Ae,ot,Ze,ht,kt,Ut){var qt,Tr=arguments.length>7&&arguments[7]!==void 0&&arguments[7],Ir=rt(),Wr=Te.size(),On=Wr>1,jn=Te.relIsOppositeDirection(kt),yn=jn?ot:Ae,Zr=jn?Ae:ot,Hr=Te.waypointPath,sn=Hr==null?void 0:Hr.points,mn=Hr==null?void 0:Hr.from,ti=Hr==null?void 0:Hr.to,rn=Ac(yn,mn)&&Ac(Zr,ti)||Ac(Zr,mn)&&Ac(yn,ti),An=rn?sn[1]:null,ri=rn?sn[sn.length-2]:null,ni=jl(yn),fi=jl(Zr),nn=function(oi,bi){return Math.atan2(oi.y-bi.y,oi.x-bi.x)},mi=Math.max(Math.PI,Hn/(Wr/2)),bn=On?Ze*mi*(Ut?1:-1)/((qt=yn.size)!==null&&qt!==void 0?qt:Zn):0,ko=nn(rn?An:Zr,yn),Qo=rn?nn(Zr,ri):ko,Ku=function(oi,bi,ed,Yl){return{x:oi.x+Math.cos(bi)*ed*(Yl?-1:1),y:oi.y+Math.sin(bi)*ed*(Yl?-1:1)}},Gl=function(oi,bi){return Ku(yn,ko+oi,bi,!1)},Zu=function(oi,bi){return Ku(Zr,Qo-oi,bi,!0)},za=function(oi,bi){return{x:oi.x+(bi.x-oi.x)/2,y:oi.y+(bi.y-oi.y)/2}},ii=function(oi,bi){return Math.sqrt((oi.x-bi.x)*(oi.x-bi.x)+(oi.y-bi.y)*(oi.y-bi.y))*Ir},xn=Gl(bn,ni),zi=Zu(bn,fi),Jo=On?Gl(0,ni):null,Do=On?Zu(0,fi):null,js=200*Ir,hi=[];if(rn){var Uc=ii(xn,An)<js;if(On&&!Uc){var Hf=za(Jo,An);hi.push(new Zi(xn,Hf)),hi.push(new Zi(Hf,An))}else hi.push(new Zi(xn,An));for(var Vl=2;Vl<sn.length-1;Vl++)hi.push(new Zi(sn[Vl-1],sn[Vl]));var bv=ii(zi,ri)<js;if(On&&!bv){var qc=za(Do,ri);hi.push(new Zi(ri,qc)),hi.push(new Zi(qc,zi))}else hi.push(new Zi(ri,zi))}else{var Wl=On?ii(Jo,Do):0;if(On&&Wl>2*(30*Ir+Math.min(ni,fi)))if(Tr){var zc=Hd(yn,Zr,ni,fi,kt,Te);hi.push(new Zi(xn,zc)),hi.push(new Zi(zc,zi))}else{var Fs=Ze*ht,Bs=30+ni,Yf=Math.sqrt(Bs*Bs+Fs*Fs),Hl=30+fi,Xf=Math.sqrt(Hl*Hl+Fs*Fs),Gc=Gl(0,Yf),Jh=Zu(0,Xf);hi.push(new Zi(xn,Gc)),hi.push(new Zi(Gc,Jh)),hi.push(new Zi(Jh,zi))}else if(Wl>(ni+fi)/2){var $f=Hd(yn,Zr,ni,fi,kt,Te);hi.push(new Zi(xn,$f)),hi.push(new Zi($f,zi))}else hi.push(new Zi(xn,zi))}return hi}(w,x,O,he,ge,b,ie,V),Me=[],Ne=ye[0],Ue=z(Ne,ie);Me.push({x:Ne.p1.x+Ue.x,y:Ne.p1.y+Ue.y});for(var je=1;je<ye.length;je++)if(w.size()===1)Me.push(ye[je-1].p2);else{var Xe=ye[je-1],Ge=ye[je],Ke=z(Xe,ie),$e=z(Ge,ie),Ve=oo(Xe.p1,Nl(Ke,le/2)),tt=oo(Xe.p2,Nl(Ke,le/2)),mt=oo(Ge.p1,Nl($e,le/2)),It=oo(Ge.p2,Nl($e,le/2)),bt=null;B=$e,(I=Ke).x*B.x+I.y*B.y<.99&&(bt=Lh(Ve,tt,mt,It));var jt=bt!==null?Mf(bt,Xe.p2):Nl(Ke,le/2);Me.push(oo(Xe.p2,Nl(jt,he/J)))}var Ct=ye[ye.length-1],Pe=z(Ct,ie);return Me.push({x:Ct.p2.x+Pe.x,y:Ct.p2.y+Pe.y}),w.relIsOppositeDirection(b)?Me.reverse():Me},Yn=function(b,w,x,O,M,I,B,V){var z,Y=arguments.length>8&&arguments[8]!==void 0&&arguments[8],X=rt(),J=M.selected,ie=M.captions,he=ie===void 0?[]:ie,ge=M.caption,le=ge===void 0?"":ge,ye=M.width,Me=M.disabled,Ne=M.captionAlign,Ue=Ne===void 0?"top":Ne,je=M.captionSize,Xe=je===void 0?1:je,Ge=he.length>0?(z=Vd(he))===null||z===void 0?void 0:z.fullCaption:le;if(Ge!==void 0){var Ke=6*Xe*X,$e=J===!0?"bold":"normal",Ve=Ge;b.fillStyle=Me===!0?B.fontColor:V,b.font="".concat($e," ").concat(Ke,"px ").concat('"Open Sans", sans-serif');var tt=function(Tr){return b.measureText(Tr).width},mt=(ye??1)*(J===!0?1.5:1),It=tt(Ve);if(It>O){var bt=Ui(Ve,tt,function(){return O},1,!1)[0];Ve=bt.hasEllipsisChar===!0?"".concat(bt.text,"..."):Ve,It=O}var jt=Math.cos(x),Ct=Math.sin(x),Pe={x:w.x,y:w.y},Te=Pe.x,Ae=Pe.y,ot=x;Y&&(ot=x-Qi,Te+=2*Ke*jt,Ae+=2*Ke*Ct,ot-=Qi);var Ze=(1+Xe)*X,ht=Ue==="bottom"?Ke/2+mt+Ze:-(mt+Ze);b.translate(Te,Ae),b.rotate(ot),b.fillText(Ve,-It/2,ht),b.rotate(-ot),b.translate(-Te,-Ae);var kt=2*ht*Math.sin(x),Ut=2*ht*Math.cos(x),qt={position:{x:w.x-kt,y:w.y+Ut},rotation:Y?x-Math.PI:x,width:O/X,height:(Ke+Ze)/X};I.setLabelInfo(M.id,qt)}},Mn=function(b,w,x,O,M){if(b.beginPath(),b.moveTo(w[0].x,w[0].y),M&&w.length>2){for(var I=1;I<w.length-2;){var B=(w[I].x+w[I+1].x)/2,V=(w[I].y+w[I+1].y)/2;b.quadraticCurveTo(w[I].x,w[I].y,B,V),I+=1}b.quadraticCurveTo(w[I].x,w[I].y,w[I+1].x,w[I+1].y)}else for(var z=1;z<w.length;z++)b.lineTo(w[z].x,w[z].y);b.lineWidth=x,b.strokeStyle=O,b.lineCap="round",b.stroke()},Bh=function(b){return b.rings[0].width*rt()*1.5},Uh=function(b){return 6*b*rt()},Dc=function(b,w,x){var O,M;return{widthAlign:w/2*((O=b[0])!==null&&O!==void 0?O:0),heightAlign:x/2*((M=b[1])!==null&&M!==void 0?M:0)}},Nf=function(b,w,x){var O,M,I=x.indexOf(b),B=(O=x.angles[I])!==null&&O!==void 0?O:0,V=B-pp/2,z=B+pp/2,Y=(M=b.width)!==null&&M!==void 0?M:1,X=rt(),J=jl(w),ie={x:w.x+Math.cos(V)*(J+Y/2),y:w.y+Math.sin(V)*(J+Y/2)},he={x:w.x+Math.cos(z)*(J+Y/2),y:w.y+Math.sin(z)*(J+Y/2)},ge={x:w.x+Math.cos(B)*(J+35*X),y:w.y+Math.sin(B)*(J+35*X)};return{startAngle:V,endAngle:z,startPoint:ie,endPoint:he,apexPoint:ge,control1Point:{x:ge.x+25*Math.cos(B-Qi)*X/2,y:ge.y+25*Math.sin(B-Qi)*X/2},control2Point:{x:ge.x+25*Math.cos(B+Qi)*X/2,y:ge.y+25*Math.sin(B+Qi)*X/2}}},ga=function(b,w,x,O,M,I){b.beginPath(),b.moveTo(w.x,w.y),b.quadraticCurveTo(M.x,M.y,O.x,O.y),b.quadraticCurveTo(I.x,I.y,x.x,x.y),b.stroke()},Mc=function(b,w,x,O,M,I,B,V,z,Y){var X=!(arguments.length>10&&arguments[10]!==void 0)||arguments[10];If(x,O)&&(x.id===O.id?function(J,ie,he,ge,le,ye,Me,Ne){var Ue=arguments.length>8&&arguments[8]!==void 0?arguments[8]:kl,je=ie.overlayIcon,Xe=ie.selected,Ge=ie.width,Ke=ie.hovered,$e=ie.disabled,Ve=ie.color,tt=Nf(ie,he,ge),mt=tt.startPoint,It=tt.endPoint,bt=tt.apexPoint,jt=tt.control1Point,Ct=tt.control2Point,Pe=Me.rings,Te=Me.shadow,Ae=rt(),ot=Pe[0].color,Ze=Pe[1].color,ht=Pe[0].width*Ae,kt=Pe[1].width*Ae,Ut=40*Ae,qt=(Ge??1)*Ae,Tr=qt>1?qt/2:1,Ir=9*Tr,Wr=2*Tr,On=7*Tr,jn=Xe===!0,yn=$e===!0,Zr=je!==void 0,Hr=Math.atan2(It.y-Ct.y,It.x-Ct.x),sn=jn?ht*Math.sqrt(1+2*Ir/On*(2*Ir/On)):0,mn={x:It.x-Math.cos(Hr)*(.5*Ir-Wr+sn),y:It.y-Math.sin(Hr)*(.5*Ir-Wr+sn)},ti={headPosition:{x:It.x+Math.cos(Hr)*(.5*Ir-Wr-sn),y:It.y+Math.sin(Hr)*(.5*Ir-Wr-sn)},headAngle:Hr,headHeight:Ir,headChinHeight:Wr,headWidth:On};if(J.save(),J.lineCap="round",jn&&(Ba(J,Te),J.lineWidth=qt+kt,J.strokeStyle=Ze,ga(J,mt,mn,bt,jt,Ct),cs(J,kt,Ze,ti,!1,!0),kc(J),J.lineWidth=qt+ht,J.strokeStyle=ot,ga(J,mt,mn,bt,jt,Ct),cs(J,ht,ot,ti,!1,!0)),J.lineWidth=qt,Ke===!0&&!jn&&!yn){var rn=Te.color;Ba(J,Te),J.strokeStyle=rn,J.fillStyle=rn,ga(J,mt,mn,bt,jt,Ct),cs(J,qt,rn,ti),kc(J)}var An=yn?Ne.color:Ve??Ue;if(J.fillStyle=An,J.strokeStyle=An,ga(J,mt,mn,bt,jt,Ct),cs(J,qt,An,ti),ye||Zr){var ri,ni=ge.indexOf(ie),fi=(ri=ge.angles[ni])!==null&&ri!==void 0?ri:0,nn=bt.x-Math.cos(Hr)*(sn/4),mi=bt.y-Math.sin(Hr)*(sn/4),bn=(fi+Qi)%Hn,ko=(fi+Hn)%Hn<Math.PI;if(ye&&Yn(J,{x:nn,y:mi},bn,Ut,ie,ge,Ne,Ue,ko),Zr){var Qo=je.position,Ku=Qo===void 0?[0,0]:Qo,Gl=je.url,Zu=je.size,za=Uh(Zu===void 0?1:Zu),ii=Dc(Ku,Ut,za),xn=ii.widthAlign,zi=ii.heightAlign+(jn?Bh(Me):0)*(Ku[1]<0?-1:1);J.save(),J.translate(nn,mi),ko?(J.rotate(bn-Math.PI),J.translate(2*-xn,2*-zi)):J.rotate(bn);var Jo=za/2,Do=-Jo+xn,js=-Jo+zi;J.drawImage(le.getImage(Gl),Do,js,za,za),J.restore()}}J.restore()}(b,w,x,M,I,B,V,z,Y):function(J,ie,he,ge,le,ye,Me,Ne,Ue,je){var Xe=arguments.length>10&&arguments[10]!==void 0?arguments[10]:kl,Ge=ie.overlayIcon,Ke=ie.color,$e=ie.disabled,Ve=ie.selected,tt=ie.width,mt=ie.hovered,It=ie.captionAlign,bt=Ve===!0,jt=$e===!0,Ct=Ge!==void 0,Pe=Ue.rings,Te=Ue.shadow,Ae=Xo(ie,le,he,ge,Me,Ne),ot=rt(),Ze=function(Yl){var Gi,ai=Yl.selected===!0?1.5:1;return((Gi=Yl.width)!==null&&Gi!==void 0?Gi:1)*ai*rt()}(ie),ht=jt?je.color:Ke??Xe,kt=Pe[0].width*ot,Ut=Pe[1].width*ot,qt=ot*(tt>1?tt/2:1),Tr=9*qt,Ir=2*qt,Wr=7*qt,On=Yo(Ae[Ae.length-2],Ae[Ae.length-1]),jn=2*Tr,yn=bt?kt*Math.sqrt(1+jn/Wr*(jn/Wr)):0,Zr=2-yn,Hr=Math.floor(Ae.length/2);Ae.length>2&&bt&&On<Tr+yn-Ir&&(Zr+=On,yn-=On/2+Ir,Ae.pop(),Hr=Math.floor(Ae.length/2));var sn,mn,ti=Ae[Ae.length-2],rn=Ae[Ae.length-1],An=(sn=ti,mn=rn,Math.atan2(mn.y-sn.y,mn.x-sn.x)),ri=Tr/2+yn,ni=Math.cos(An),fi=Math.sin(An);Ae[Ae.length-1]={x:rn.x-ni*ri,y:rn.y-fi*ri};var nn,mi={headPosition:{x:rn.x+ni*Zr,y:rn.y+fi*Zr},headAngle:An,headHeight:Tr,headChinHeight:Ir,headWidth:Wr},bn=Lf(Ae);try{for(bn.s();!(nn=bn.n()).done;){var ko=nn.value;ko.x=Math.round(ko.x),ko.y=Math.round(ko.y)}}catch(Yl){bn.e(Yl)}finally{bn.f()}if(J.save(),bt){var Qo=Pe[0].color,Ku=Pe[1].color,Gl=Math.atan2(Ae[1].y-Ae[0].y,Ae[1].x-Ae[0].x),Zu=Cr(Gl,Bh(Ue));Ae[0]=oo(Ae[0],Zu),Ba(J,Te),Mn(J,Ae,Ze+Ut,Ku,Ne),cs(J,Ut,Ku,mi,!1,!0),kc(J),Mn(J,Ae,Ze+kt,Qo,Ne),cs(J,kt,Qo,mi,!1,!0)}if(mt===!0&&!bt&&!jt){var za=Te.color;Ba(J,Te),Mn(J,Ae,Ze,za,Ne),cs(J,Ze,za,mi),kc(J)}if(Mn(J,Ae,Ze,ht,Ne),cs(J,Ze,ht,mi),Me||Ct){var ii,xn,zi,Jo,Do,js=he.x>ge.x,hi=Ae[Hr];(1&Ae.length)==1?(ii=Ae[js?Hr+1:Hr-1],xn=Ae[js?Hr-1:Hr+1],Ne?(zi=(hi.x+(ii.x+xn.x)/2)/2,Jo=(hi.y+(ii.y+xn.y)/2)/2,Do=js?Math.atan2(he.y-ge.y,he.x-ge.x):Math.atan2(ge.y-he.y,ge.x-he.x)):(Yo(hi,ii)>Yo(hi,xn)?xn=hi:ii=hi,zi=(ii.x+xn.x)/2,Jo=(ii.y+xn.y)/2,Do=Math.atan2(xn.y-ii.y,xn.x-ii.x))):(ii=Ae[js?Hr:Hr-1],xn=Ae[js?Hr-1:Hr],zi=(ii.x+xn.x)/2,Jo=(ii.y+xn.y)/2,Do=Math.atan2(xn.y-ii.y,xn.x-ii.x));var Uc=bt?Cr(Do+Qi,Bh(Ue)):{x:0,y:0},Hf=Yo(ii,xn);if(Me){var Vl=It==="bottom"?1:-1,bv={x:zi+Uc.x*Vl,y:Jo+Uc.y*Vl};Yn(J,bv,Do,Hf,ie,le,je,Xe)}if(Ct){var qc=Ge.position,Wl=qc===void 0?[0,0]:qc,zc=Ge.url,Fs=Ge.size,Bs=Uh(Fs===void 0?1:Fs),Yf=Dc(Wl,Hf,Bs),Hl=Yf.widthAlign,Xf=Yf.heightAlign,Gc=Wl[1]<0?-1:1,Jh=Uc.x*Gc,$f=Uc.y*Gc,oi=Bs/2;J.translate(zi,Jo),J.rotate(Do);var bi=-oi+Jh+Hl,ed=-oi+$f+Xf;J.drawImage(ye.getImage(zc),bi,ed,Bs,Bs),J.rotate(-Do),J.translate(-zi,-Jo)}}J.restore()}(b,w,x,O,M,I,B,X,V,z,Y))},Co=function(b,w,x,O){var M=arguments.length>4&&arguments[4]!==void 0&&arguments[4],I=arguments.length>5&&arguments[5]!==void 0&&arguments[5];return If(x,O)?x.id===O.id?function(B,V,z){for(var Y=Nf(B,V,z),X={left:1/0,top:1/0,right:-1/0,bottom:-1/0},J=["startPoint","endPoint","apexPoint","control1Point","control2Point"],ie=0;ie<J.length;ie++){var he=Y[J[ie]],ge=he.x,le=he.y;ge<X.left&&(X.left=ge),ge>X.right&&(X.right=ge),le<X.top&&(X.top=le),le>X.bottom&&(X.bottom=le)}return X}(b,x,w):function(B,V,z,Y,X,J){var ie,he={left:1/0,top:1/0,right:-1/0,bottom:-1/0},ge=Lf(Xo(B,V,z,Y,X,J));try{for(ge.s();!(ie=ge.n()).done;){var le=ie.value,ye=le.x,Me=le.y;ye<he.left&&(he.left=ye),ye>he.right&&(he.right=ye),Me<he.top&&(he.top=Me),Me>he.bottom&&(he.bottom=Me)}}catch(Ne){ge.e(Ne)}finally{ge.f()}return he}(b,w,x,O,M,I):null};function fs(b){return fs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},fs(b)}var qh=/^\s+/,Lc=/\s+$/;function Pt(b,w){if(w=w||{},(b=b||"")instanceof Pt)return b;if(!(this instanceof Pt))return new Pt(b,w);var x=function(O){var M,I,B,V={r:0,g:0,b:0},z=1,Y=null,X=null,J=null,ie=!1,he=!1;return typeof O=="string"&&(O=function(ge){ge=ge.replace(qh,"").replace(Lc,"").toLowerCase();var le,ye=!1;if(ao[ge])ge=ao[ge],ye=!0;else if(ge=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(le=ba.rgb.exec(ge))?{r:le[1],g:le[2],b:le[3]}:(le=ba.rgba.exec(ge))?{r:le[1],g:le[2],b:le[3],a:le[4]}:(le=ba.hsl.exec(ge))?{h:le[1],s:le[2],l:le[3]}:(le=ba.hsla.exec(ge))?{h:le[1],s:le[2],l:le[3],a:le[4]}:(le=ba.hsv.exec(ge))?{h:le[1],s:le[2],v:le[3]}:(le=ba.hsva.exec(ge))?{h:le[1],s:le[2],v:le[3],a:le[4]}:(le=ba.hex8.exec(ge))?{r:$o(le[1]),g:$o(le[2]),b:$o(le[3]),a:Kd(le[4]),format:ye?"name":"hex8"}:(le=ba.hex6.exec(ge))?{r:$o(le[1]),g:$o(le[2]),b:$o(le[3]),format:ye?"name":"hex"}:(le=ba.hex4.exec(ge))?{r:$o(le[1]+""+le[1]),g:$o(le[2]+""+le[2]),b:$o(le[3]+""+le[3]),a:Kd(le[4]+""+le[4]),format:ye?"name":"hex8"}:!!(le=ba.hex3.exec(ge))&&{r:$o(le[1]+""+le[1]),g:$o(le[2]+""+le[2]),b:$o(le[3]+""+le[3]),format:ye?"name":"hex"}}(O)),fs(O)=="object"&&(hs(O.r)&&hs(O.g)&&hs(O.b)?(M=O.r,I=O.g,B=O.b,V={r:255*Ur(M,255),g:255*Ur(I,255),b:255*Ur(B,255)},ie=!0,he=String(O.r).substr(-1)==="%"?"prgb":"rgb"):hs(O.h)&&hs(O.s)&&hs(O.v)?(Y=Nc(O.s),X=Nc(O.v),V=function(ge,le,ye){ge=6*Ur(ge,360),le=Ur(le,100),ye=Ur(ye,100);var Me=Math.floor(ge),Ne=ge-Me,Ue=ye*(1-le),je=ye*(1-Ne*le),Xe=ye*(1-(1-Ne)*le),Ge=Me%6;return{r:255*[ye,je,Ue,Ue,Xe,ye][Ge],g:255*[Xe,ye,ye,je,Ue,Ue][Ge],b:255*[Ue,Ue,Xe,ye,ye,je][Ge]}}(O.h,Y,X),ie=!0,he="hsv"):hs(O.h)&&hs(O.s)&&hs(O.l)&&(Y=Nc(O.s),J=Nc(O.l),V=function(ge,le,ye){var Me,Ne,Ue;function je(Ke,$e,Ve){return Ve<0&&(Ve+=1),Ve>1&&(Ve-=1),Ve<1/6?Ke+6*($e-Ke)*Ve:Ve<.5?$e:Ve<2/3?Ke+($e-Ke)*(2/3-Ve)*6:Ke}if(ge=Ur(ge,360),le=Ur(le,100),ye=Ur(ye,100),le===0)Me=Ne=Ue=ye;else{var Xe=ye<.5?ye*(1+le):ye+le-ye*le,Ge=2*ye-Xe;Me=je(Ge,Xe,ge+1/3),Ne=je(Ge,Xe,ge),Ue=je(Ge,Xe,ge-1/3)}return{r:255*Me,g:255*Ne,b:255*Ue}}(O.h,Y,J),ie=!0,he="hsl"),O.hasOwnProperty("a")&&(z=O.a)),z=qi(z),{ok:ie,format:O.format||he,r:Math.min(255,Math.max(V.r,0)),g:Math.min(255,Math.max(V.g,0)),b:Math.min(255,Math.max(V.b,0)),a:z}}(b);this._originalInput=b,this._r=x.r,this._g=x.g,this._b=x.b,this._a=x.a,this._roundA=Math.round(100*this._a)/100,this._format=w.format||x.format,this._gradientType=w.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=x.ok}function ya(b,w,x){b=Ur(b,255),w=Ur(w,255),x=Ur(x,255);var O,M,I=Math.max(b,w,x),B=Math.min(b,w,x),V=(I+B)/2;if(I==B)O=M=0;else{var z=I-B;switch(M=V>.5?z/(2-I-B):z/(I+B),I){case b:O=(w-x)/z+(w<x?6:0);break;case w:O=(x-b)/z+2;break;case x:O=(b-w)/z+4}O/=6}return{h:O,s:M,l:V}}function kr(b,w,x){b=Ur(b,255),w=Ur(w,255),x=Ur(x,255);var O,M,I=Math.max(b,w,x),B=Math.min(b,w,x),V=I,z=I-B;if(M=I===0?0:z/I,I==B)O=0;else{switch(I){case b:O=(w-x)/z+(w<x?6:0);break;case w:O=(x-b)/z+2;break;case x:O=(b-w)/z+4}O/=6}return{h:O,s:M,v:V}}function pu(b,w,x,O){var M=[Po(Math.round(b).toString(16)),Po(Math.round(w).toString(16)),Po(Math.round(x).toString(16))];return O&&M[0].charAt(0)==M[0].charAt(1)&&M[1].charAt(0)==M[1].charAt(1)&&M[2].charAt(0)==M[2].charAt(1)?M[0].charAt(0)+M[1].charAt(0)+M[2].charAt(0):M.join("")}function ma(b,w,x,O){return[Po(Wh(O)),Po(Math.round(b).toString(16)),Po(Math.round(w).toString(16)),Po(Math.round(x).toString(16))].join("")}function zh(b,w){w=w===0?0:w||10;var x=Pt(b).toHsl();return x.s-=w/100,x.s=Vh(x.s),Pt(x)}function ln(b,w){w=w===0?0:w||10;var x=Pt(b).toHsl();return x.s+=w/100,x.s=Vh(x.s),Pt(x)}function yo(b){return Pt(b).desaturate(100)}function wp(b,w){w=w===0?0:w||10;var x=Pt(b).toHsl();return x.l+=w/100,x.l=Vh(x.l),Pt(x)}function Gh(b,w){w=w===0?0:w||10;var x=Pt(b).toRgb();return x.r=Math.max(0,Math.min(255,x.r-Math.round(-w/100*255))),x.g=Math.max(0,Math.min(255,x.g-Math.round(-w/100*255))),x.b=Math.max(0,Math.min(255,x.b-Math.round(-w/100*255))),Pt(x)}function Ep(b,w){w=w===0?0:w||10;var x=Pt(b).toHsl();return x.l-=w/100,x.l=Vh(x.l),Pt(x)}function Cg(b,w){var x=Pt(b).toHsl(),O=(x.h+w)%360;return x.h=O<0?360+O:O,Pt(x)}function Op(b){var w=Pt(b).toHsl();return w.h=(w.h+180)%360,Pt(w)}function xp(b,w){if(isNaN(w)||w<=0)throw new Error("Argument to polyad must be a positive number");for(var x=Pt(b).toHsl(),O=[Pt(b)],M=360/w,I=1;I<w;I++)O.push(Pt({h:(x.h+I*M)%360,s:x.s,l:x.l}));return O}function Yd(b){var w=Pt(b).toHsl(),x=w.h;return[Pt(b),Pt({h:(x+72)%360,s:w.s,l:w.l}),Pt({h:(x+216)%360,s:w.s,l:w.l})]}function Xd(b,w,x){w=w||6,x=x||30;var O=Pt(b).toHsl(),M=360/x,I=[Pt(b)];for(O.h=(O.h-(M*w>>1)+720)%360;--w;)O.h=(O.h+M)%360,I.push(Pt(O));return I}function gu(b,w){w=w||6;for(var x=Pt(b).toHsv(),O=x.h,M=x.s,I=x.v,B=[],V=1/w;w--;)B.push(Pt({h:O,s:M,v:I})),I=(I+V)%1;return B}Pt.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var b=this.toRgb();return(299*b.r+587*b.g+114*b.b)/1e3},getLuminance:function(){var b,w,x,O=this.toRgb();return b=O.r/255,w=O.g/255,x=O.b/255,.2126*(b<=.03928?b/12.92:Math.pow((b+.055)/1.055,2.4))+.7152*(w<=.03928?w/12.92:Math.pow((w+.055)/1.055,2.4))+.0722*(x<=.03928?x/12.92:Math.pow((x+.055)/1.055,2.4))},setAlpha:function(b){return this._a=qi(b),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var b=kr(this._r,this._g,this._b);return{h:360*b.h,s:b.s,v:b.v,a:this._a}},toHsvString:function(){var b=kr(this._r,this._g,this._b),w=Math.round(360*b.h),x=Math.round(100*b.s),O=Math.round(100*b.v);return this._a==1?"hsv("+w+", "+x+"%, "+O+"%)":"hsva("+w+", "+x+"%, "+O+"%, "+this._roundA+")"},toHsl:function(){var b=ya(this._r,this._g,this._b);return{h:360*b.h,s:b.s,l:b.l,a:this._a}},toHslString:function(){var b=ya(this._r,this._g,this._b),w=Math.round(360*b.h),x=Math.round(100*b.s),O=Math.round(100*b.l);return this._a==1?"hsl("+w+", "+x+"%, "+O+"%)":"hsla("+w+", "+x+"%, "+O+"%, "+this._roundA+")"},toHex:function(b){return pu(this._r,this._g,this._b,b)},toHexString:function(b){return"#"+this.toHex(b)},toHex8:function(b){return function(w,x,O,M,I){var B=[Po(Math.round(w).toString(16)),Po(Math.round(x).toString(16)),Po(Math.round(O).toString(16)),Po(Wh(M))];return I&&B[0].charAt(0)==B[0].charAt(1)&&B[1].charAt(0)==B[1].charAt(1)&&B[2].charAt(0)==B[2].charAt(1)&&B[3].charAt(0)==B[3].charAt(1)?B[0].charAt(0)+B[1].charAt(0)+B[2].charAt(0)+B[3].charAt(0):B.join("")}(this._r,this._g,this._b,this._a,b)},toHex8String:function(b){return"#"+this.toHex8(b)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*Ur(this._r,255))+"%",g:Math.round(100*Ur(this._g,255))+"%",b:Math.round(100*Ur(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(100*Ur(this._r,255))+"%, "+Math.round(100*Ur(this._g,255))+"%, "+Math.round(100*Ur(this._b,255))+"%)":"rgba("+Math.round(100*Ur(this._r,255))+"%, "+Math.round(100*Ur(this._g,255))+"%, "+Math.round(100*Ur(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&($d[pu(this._r,this._g,this._b,!0)]||!1)},toFilter:function(b){var w="#"+ma(this._r,this._g,this._b,this._a),x=w,O=this._gradientType?"GradientType = 1, ":"";if(b){var M=Pt(b);x="#"+ma(M._r,M._g,M._b,M._a)}return"progid:DXImageTransform.Microsoft.gradient("+O+"startColorstr="+w+",endColorstr="+x+")"},toString:function(b){var w=!!b;b=b||this._format;var x=!1,O=this._a<1&&this._a>=0;return w||!O||b!=="hex"&&b!=="hex6"&&b!=="hex3"&&b!=="hex4"&&b!=="hex8"&&b!=="name"?(b==="rgb"&&(x=this.toRgbString()),b==="prgb"&&(x=this.toPercentageRgbString()),b!=="hex"&&b!=="hex6"||(x=this.toHexString()),b==="hex3"&&(x=this.toHexString(!0)),b==="hex4"&&(x=this.toHex8String(!0)),b==="hex8"&&(x=this.toHex8String()),b==="name"&&(x=this.toName()),b==="hsl"&&(x=this.toHslString()),b==="hsv"&&(x=this.toHsvString()),x||this.toHexString()):b==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return Pt(this.toString())},_applyModification:function(b,w){var x=b.apply(null,[this].concat([].slice.call(w)));return this._r=x._r,this._g=x._g,this._b=x._b,this.setAlpha(x._a),this},lighten:function(){return this._applyModification(wp,arguments)},brighten:function(){return this._applyModification(Gh,arguments)},darken:function(){return this._applyModification(Ep,arguments)},desaturate:function(){return this._applyModification(zh,arguments)},saturate:function(){return this._applyModification(ln,arguments)},greyscale:function(){return this._applyModification(yo,arguments)},spin:function(){return this._applyModification(Cg,arguments)},_applyCombination:function(b,w){return b.apply(null,[this].concat([].slice.call(w)))},analogous:function(){return this._applyCombination(Xd,arguments)},complement:function(){return this._applyCombination(Op,arguments)},monochromatic:function(){return this._applyCombination(gu,arguments)},splitcomplement:function(){return this._applyCombination(Yd,arguments)},triad:function(){return this._applyCombination(xp,[3])},tetrad:function(){return this._applyCombination(xp,[4])}},Pt.fromRatio=function(b,w){if(fs(b)=="object"){var x={};for(var O in b)b.hasOwnProperty(O)&&(x[O]=O==="a"?b[O]:Nc(b[O]));b=x}return Pt(b,w)},Pt.equals=function(b,w){return!(!b||!w)&&Pt(b).toRgbString()==Pt(w).toRgbString()},Pt.random=function(){return Pt.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},Pt.mix=function(b,w,x){x=x===0?0:x||50;var O=Pt(b).toRgb(),M=Pt(w).toRgb(),I=x/100;return Pt({r:(M.r-O.r)*I+O.r,g:(M.g-O.g)*I+O.g,b:(M.b-O.b)*I+O.b,a:(M.a-O.a)*I+O.a})},Pt.readability=function(b,w){var x=Pt(b),O=Pt(w);return(Math.max(x.getLuminance(),O.getLuminance())+.05)/(Math.min(x.getLuminance(),O.getLuminance())+.05)},Pt.isReadable=function(b,w,x){var O,M,I,B,V,z=Pt.readability(b,w);switch(M=!1,(B=((I=(I=x)||{level:"AA",size:"small"}).level||"AA").toUpperCase())!=="AA"&&B!=="AAA"&&(B="AA"),(V=(I.size||"small").toLowerCase())!=="small"&&V!=="large"&&(V="small"),(O={level:B,size:V}).level+O.size){case"AAsmall":case"AAAlarge":M=z>=4.5;break;case"AAlarge":M=z>=3;break;case"AAAsmall":M=z>=7}return M},Pt.mostReadable=function(b,w,x){var O,M,I,B,V=null,z=0;M=(x=x||{}).includeFallbackColors,I=x.level,B=x.size;for(var Y=0;Y<w.length;Y++)(O=Pt.readability(b,w[Y]))>z&&(z=O,V=Pt(w[Y]));return Pt.isReadable(b,V,{level:I,size:B})||!M?V:(x.includeFallbackColors=!1,Pt.mostReadable(b,["#fff","#000"],x))};var ao=Pt.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},$d=Pt.hexNames=function(b){var w={};for(var x in b)b.hasOwnProperty(x)&&(w[b[x]]=x);return w}(ao);function qi(b){return b=parseFloat(b),(isNaN(b)||b<0||b>1)&&(b=1),b}function Ur(b,w){(function(O){return typeof O=="string"&&O.indexOf(".")!=-1&&parseFloat(O)===1})(b)&&(b="100%");var x=function(O){return typeof O=="string"&&O.indexOf("%")!=-1}(b);return b=Math.min(w,Math.max(0,parseFloat(b))),x&&(b=parseInt(b*w,10)/100),Math.abs(b-w)<1e-6?1:b%w/parseFloat(w)}function Vh(b){return Math.min(1,Math.max(0,b))}function $o(b){return parseInt(b,16)}function Po(b){return b.length==1?"0"+b:""+b}function Nc(b){return b<=1&&(b=100*b+"%"),b}function Wh(b){return Math.round(255*parseFloat(b)).toString(16)}function Kd(b){return $o(b)/255}var yu,mu,Hh,ba=(mu="[\\s|\\(]+("+(yu="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+yu+")[,|\\s]+("+yu+")\\s*\\)?",Hh="[\\s|\\(]+("+yu+")[,|\\s]+("+yu+")[,|\\s]+("+yu+")[,|\\s]+("+yu+")\\s*\\)?",{CSS_UNIT:new RegExp(yu),rgb:new RegExp("rgb"+mu),rgba:new RegExp("rgba"+Hh),hsl:new RegExp("hsl"+mu),hsla:new RegExp("hsla"+Hh),hsv:new RegExp("hsv"+mu),hsva:new RegExp("hsva"+Hh),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function hs(b){return!!ba.CSS_UNIT.exec(b)}var Sp=function(b){return Pt.mostReadable(b,[Qe,"#FFFFFF"]).toString()},Fl=function(b){return Ud().get.rgb(b)},jf=function(b){var w=new ArrayBuffer(4),x=new Uint32Array(w),O=new Uint8Array(w),M=Fl(b);return O[0]=M[0],O[1]=M[1],O[2]=M[2],O[3]=255*M[3],x[0]},Yu=function(b){return[(w=Fl(b))[0]/255,w[1]/255,w[2]/255];var w};function Zd(b,w){return function(x){if(Array.isArray(x))return x}(b)||function(x,O){var M=x==null?null:typeof Symbol<"u"&&x[Symbol.iterator]||x["@@iterator"];if(M!=null){var I,B,V,z,Y=[],X=!0,J=!1;try{if(V=(M=M.call(x)).next,O!==0)for(;!(X=(I=V.call(M)).done)&&(Y.push(I.value),Y.length!==O);X=!0);}catch(ie){J=!0,B=ie}finally{try{if(!X&&M.return!=null&&(z=M.return(),Object(z)!==z))return}finally{if(J)throw B}}return Y}}(b,w)||function(x,O){if(x){if(typeof x=="string")return Qd(x,O);var M=Object.prototype.toString.call(x).slice(8,-1);return M==="Object"&&x.constructor&&(M=x.constructor.name),M==="Map"||M==="Set"?Array.from(x):M==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(M)?Qd(x,O):void 0}}(b,w)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Qd(b,w){(w==null||w>b.length)&&(w=b.length);for(var x=0,O=new Array(w);x<w;x++)O[x]=b[x];return O}var Yh=function(b){var w=b.x,x=w===void 0?0:w,O=b.y,M=O===void 0?0:O,I=b.size,B=I===void 0?Zn:I;return{top:M-B,left:x-B,right:x+B,bottom:M+B}},Ff=function(b,w,x,O,M,I){var B=arguments.length>6&&arguments[6]!==void 0?arguments[6]:fl,V=arguments.length>7&&arguments[7]!==void 0?arguments[7]:1,z=arguments.length>8&&arguments[8]!==void 0?arguments[8]:1,Y=w.x,X=Y===void 0?0:Y,J=w.y,ie=J===void 0?0:J,he=w.size,ge=he===void 0?Zn:he,le=w.caption,ye=le===void 0?"":le,Me=w.captions,Ne=Me===void 0?[]:Me,Ue=w.captionAlign,je=Ue===void 0?"center":Ue,Xe=w.captionSize,Ge=Xe===void 0?1:Xe,Ke=w.disabled,$e=w.activated,Ve=w.selected,tt=w.hovered,mt=w.id,It=w.icon,bt=w.overlayIcon,jt=rt(),Ct=function(Gi,ai,bu){var Qu=Gi.selected?bu.selected.rings:bu.default.rings;if(!Qu.length){var Xl=ai.getById(Gi.id);return Xl!==void 0&&Object.entries(Xl).forEach(function(td){var $l=Zd(td,2),Vc=$l[0],_u=$l[1];Vc.startsWith("ring-")&&_u.setEndValue(0)}),[{width:0,color:""}]}return Qu.map(function(td,$l){var Vc=td.widthFactor,_u=td.color,Xg=(Gi.size||Zn)*Vc*rt();return{width:ai.getValueForAnimationName(Gi.id,"ring-".concat($l),Xg),color:_u}})}(w,O,M),Pe=Ct.reduce(function(Gi,ai){return Gi+ai.width},0),Te=ge*jt,Ae=2*Te,ot=function(Gi,ai){if(!Gi||!ai)return{nodeInfoLevel:0,fontInfoLevel:1.25,iconInfoLevel:1};var bu=rt(),Qu=1600*bu*(1200*bu),Xl=Math.pow(Gi,2)*Math.PI*Math.pow(ai,2)/(Qu/100);return{nodeInfoLevel:Fh(Xl,Df),fontInfoLevel:Fh(Xl,ks),iconInfoLevel:Fh(Xl,_p)}}(Te,z),Ze=ot.nodeInfoLevel,ht=ot.fontInfoLevel,kt=ot.iconInfoLevel,Ut=w.color||B,qt=function(Gi){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zn)/({1:3.5,2:2.75,3:2}[arguments.length>2&&arguments[2]!==void 0?arguments[2]:1]+(arguments.length>3&&arguments[3]!==void 0&&arguments[3]?1:0))/Gi}(ht,Te,Ge,!!It),Tr=Sp(Ut),Ir=Te;if(Pe>0&&(Ir=Te+Pe),Ke)Ut=I.color,Tr=I.fontColor;else{var Wr;if($e){var On=Date.now()%1e3/1e3,jn=On<.7?On/.7:0,yn=Wu(Ut,.4-.4*jn);Hu(b,X,ie,yn,Te+.88*Te*jn)}var Zr=(Wr=M.selected.shadow)!==null&&Wr!==void 0?Wr:{width:0,opacity:0,color:""},Hr=Zr.width*jt,sn=Zr.opacity,mn=Zr.color,ti=Ve||tt?Hr:0,rn=O.getValueForAnimationName(mt,"shadowWidth",ti);rn>0&&function(Gi,ai,bu,Qu,Xl,td){var $l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:1,Vc=Xl+td,_u=Gi.createRadialGradient(ai,bu,Xl,ai,bu,Vc);_u.addColorStop(0,"transparent"),_u.addColorStop(.01,Wu(Qu,.5*$l)),_u.addColorStop(.05,Wu(Qu,.5*$l)),_u.addColorStop(.5,Wu(Qu,.12*$l)),_u.addColorStop(.75,Wu(Qu,.03*$l)),_u.addColorStop(1,Wu(Qu,0)),Gi.fillStyle=_u,Ll(Gi,ai,bu,Vc),Gi.fill()}(b,X,ie,mn,Ir,rn,sn)}Hu(b,X,ie,Ut,Te),Pe>0&&Ic(b,X,ie,Te,Ct);var An=!!ye.length,ri=!!Ne.length,ni=!!It;if(It){var fi=Ze<2||!(An||ri),nn=Ze>0?1:0,mi=fi?1*Te:.75*Te;mi/=kt;var bn=fi?.5*mi:mi*(kt===1?je==="center"?1.3:je==="bottom"||fi?1.1:0:je==="center"?1.35:je==="bottom"||fi?1.1:0),ko=mi/2;mi=O.getValueForAnimationName(mt,"iconSize",mi),ko=O.getValueForAnimationName(mt,"iconXPos",ko),bn=O.getValueForAnimationName(mt,"iconYPos",bn);var Qo=b.globalAlpha,Ku=Ke?.1:nn;b.globalAlpha=O.getValueForAnimationName(mt,"iconOpacity",Ku);var Gl=Tr==="#ffffff",Zu=x.getImage(It,Gl);b.drawImage(Zu,X-ko,ie-bn,Math.floor(mi),Math.floor(mi)),b.globalAlpha=Qo}if(bt!==void 0){var za,ii,xn,zi,Jo,Do=Ae*((za=bt.size)!==null&&za!==void 0?za:1),js=Do/2-Te*((ii=(xn=bt.position)===null||xn===void 0?void 0:xn[1])!==null&&ii!==void 0?ii:0),hi=Do/2-Te*((zi=(Jo=bt.position)===null||Jo===void 0?void 0:Jo[0])!==null&&zi!==void 0?zi:0),Uc=b.globalAlpha,Hf=Ke?.1:1;b.globalAlpha=O.getValueForAnimationName(mt,"iconOpacity",Hf);var Vl=x.getImage(bt.url);b.drawImage(Vl,X-hi,ie-js,Do,Do),b.globalAlpha=Uc}if(An||ri){var bv=Ze<2?0:1,qc=O.getValueForAnimationName(mt,"textOpacity",bv,0);if(qc>0){var Wl,zc,Fs='"Open Sans", sans-serif',Bs=2;ht===((Wl=ks[1])===null||Wl===void 0?void 0:Wl[1])?Bs=3:ht===((zc=ks[2])===null||zc===void 0?void 0:zc[1])&&(Bs=4);var Yf=je==="center"?.7*Ae:2*Math.sqrt(Math.pow(Ae/2,2)-Math.pow(Ae/3,2));if(b.fillStyle=Wu(Tr,qc),ri){var Hl,Xf=Vd(Ne),Gc=Xf.stylesPerChar,Jh=Xf.fullCaption,$f=Fa(b,Jh,Fs,qt,Yf,ni,Bs,w==null||w.captionAlign),oi=-($f.length-2)*qt/2;Hl=je&&je!=="center"?je==="bottom"?oi+Te/Math.PI:oi-Te/Math.PI:oi,Wd(b,$f,Gc,Hl,qt,Fs,qt,X,ie,V)}else if(An){var bi=Fa(b,ye,Fs,qt,Yf,ni,Bs,w==null||w.captionAlign),ed=-(bi.length-2)*qt/2,Yl=ye.split("").map(function(Gi){return[]});Wd(b,bi,Yl,ed,qt,Fs,qt,X,ie,V)}}}};function Bl(b){return Bl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},Bl(b)}function ds(b,w){var x=Object.keys(b);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(b);w&&(O=O.filter(function(M){return Object.getOwnPropertyDescriptor(b,M).enumerable})),x.push.apply(x,O)}return x}function ci(b){for(var w=1;w<arguments.length;w++){var x=arguments[w]!=null?arguments[w]:{};w%2?ds(Object(x),!0).forEach(function(O){so(b,O,x[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(x)):ds(Object(x)).forEach(function(O){Object.defineProperty(b,O,Object.getOwnPropertyDescriptor(x,O))})}return b}function jc(b,w){var x=typeof Symbol<"u"&&b[Symbol.iterator]||b["@@iterator"];if(!x){if(Array.isArray(b)||(x=function(z,Y){if(z){if(typeof z=="string")return Jd(z,Y);var X=Object.prototype.toString.call(z).slice(8,-1);return X==="Object"&&z.constructor&&(X=z.constructor.name),X==="Map"||X==="Set"?Array.from(z):X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X)?Jd(z,Y):void 0}}(b))||w){x&&(b=x);var O=0,M=function(){};return{s:M,n:function(){return O>=b.length?{done:!0}:{done:!1,value:b[O++]}},e:function(z){throw z},f:M}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I,B=!0,V=!1;return{s:function(){x=x.call(b)},n:function(){var z=x.next();return B=z.done,z},e:function(z){V=!0,I=z},f:function(){try{B||x.return==null||x.return()}finally{if(V)throw I}}}}function Jd(b,w){(w==null||w>b.length)&&(w=b.length);for(var x=0,O=new Array(w);x<w;x++)O[x]=b[x];return O}function Ko(b,w){for(var x=0;x<w.length;x++){var O=w[x];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(b,Tp(O.key),O)}}function so(b,w,x){return(w=Tp(w))in b?Object.defineProperty(b,w,{value:x,enumerable:!0,configurable:!0,writable:!0}):b[w]=x,b}function Tp(b){var w=function(x,O){if(Bl(x)!="object"||!x)return x;var M=x[Symbol.toPrimitive];if(M!==void 0){var I=M.call(x,"string");if(Bl(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(b);return Bl(w)=="symbol"?w:String(w)}var Xu="canvasRenderer",ev=function(){function b(O,M,I){var B=this,V=(arguments.length>3&&arguments[3]!==void 0?arguments[3]:{}).relationshipThreshold,z=V===void 0?0:V;(function(Y,X){if(!(Y instanceof X))throw new TypeError("Cannot call a class as a function")})(this,b),so(this,"arrowBundler",void 0),so(this,"activeNodes",void 0),so(this,"canvas",void 0),so(this,"context",void 0),so(this,"state",void 0),so(this,"stateDisposers",void 0),so(this,"relationshipThreshold",void 0),so(this,"animationHandler",void 0),so(this,"imageCache",void 0),so(this,"needsRun",void 0),so(this,"nodeVersion",void 0),so(this,"relVersion",void 0),so(this,"waypointVersion",void 0),so(this,"ellipsisWidth",void 0),M!==null&&(this.activeNodes=new Set,this.canvas=O,this.context=M,this.state=I,this.stateDisposers=[],this.stateDisposers.push(I.autorun(function(){I.zoom!==void 0&&(B.needsRun=!0),I.panX!==void 0&&(B.needsRun=!0),I.panY!==void 0&&(B.needsRun=!0),I.nodes.version!==void 0&&(B.needsRun=!0),I.rels.version!==void 0&&(B.needsRun=!0),I.waypoints.counter>0&&(B.needsRun=!0),I.layout!==void 0&&(B.needsRun=!0)})),I.nodes.addChannel(Xu),I.rels.addChannel(Xu),this.relationshipThreshold=z,this.nodeVersion=I.nodes.version,this.relVersion=I.rels.version,this.waypointVersion=I.waypoints.counter,this.animationHandler=new Cf,this.animationHandler.setOptions({fadeDuration:150,sizeDuration:150}),this.arrowBundler=new Gu(I.rels.items,I.waypoints.data),this.imageCache=new Ld,this.needsRun=!0,this.ellipsisWidth=M.measureText(Ml).width)}var w,x;return w=b,x=[{key:"needsToRun",value:function(){return this.needsRun||this.animationHandler.needsToRun()||this.activeNodes.size>0}},{key:"processUpdates",value:function(){var O=this.state,M=!1,I=O.nodes.channels[Xu],B=O.rels.channels[Xu],V=I.adds,z=I.removes,Y=B.adds,X=B.removes;this.nodeVersion<O.nodes.version&&(Object.keys(V).length>0||Object.keys(z).length,this.handleChannelUpdate(I,O.nodes,!0),this.nodeVersion=O.nodes.version,O.nodes.clearChannel(Xu)),this.relVersion<O.rels.version&&(M=Object.keys(Y).length>0||Object.keys(X).length>0,O.rels.clearChannel(Xu),this.relVersion=O.rels.version),(M||this.waypointVersion<O.waypoints.counter)&&(this.arrowBundler.updateData(Y,X,O.waypoints.data),this.waypointVersion=O.waypoints.counter)}},{key:"render",value:function(O){var M,I,B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},V=this.state,z=this.animationHandler,Y=this.arrowBundler,X=V.zoom,J=V.layout,ie=V.nodes.idToPosition,he=(M=B.canvas)!==null&&M!==void 0?M:this.canvas,ge=(I=B.context)!==null&&I!==void 0?I:this.context,le=rt(),ye=he.clientWidth*le,Me=he.clientHeight*le;ge.save(),B.backgroundColor!==void 0?(ge.fillStyle=B.backgroundColor,ge.fillRect(0,0,ye,Me)):ge.clearRect(0,0,ye,Me),this.zoomAndPan(ge,he),z.ignoreAnimations(!!B.ignoreAnimations),B.ignoreAnimations!==!0&&z.advance(),Y.updatePositions(ie);var Ne=this.getRelationshipsToRender(B.showCaptions,ye,Me);this.renderRelationships(Ne,ge,J!==Sl);var Ue=this.getNodesToRender(O,ye,Me);this.renderNodes(Ue,ge,X),ge.restore(),this.needsRun=!1}},{key:"getRelationshipsToRender",value:function(O,M,I){var B,V=[],z=[],Y=[],X=this.arrowBundler,J=this.state,ie=this.relationshipThreshold,he=J.layout,ge=J.zoom,le=J.rels,ye=J.nodes,Me=ye.idToItem,Ne=ye.idToPosition,Ue=jc(le.items);try{for(Ue.s();!(B=Ue.n()).done;){var je=B.value,Xe=X.getBundle(je),Ge=ci(ci({},Me[je.from]),Ne[je.from]),Ke=ci(ci({},Me[je.to]),Ne[je.to]),$e=O||ge>ie||je.captionHtml!==void 0,Ve=Co(je,Xe,Ge,Ke,$e,he!==Sl);if(Ve!==null){var tt,mt,It,bt,jt,Ct,Pe=this.isBoundingBoxOffScreen(Ve,M,I),Te=Yo({x:(tt=Ge.x)!==null&&tt!==void 0?tt:0,y:(mt=Ge.y)!==null&&mt!==void 0?mt:0},{x:(It=Ke.x)!==null&&It!==void 0?It:0,y:(bt=Ke.y)!==null&&bt!==void 0?bt:0}),Ae=(((jt=Ge.size)!==null&&jt!==void 0?jt:Zn)+((Ct=Ke.size)!==null&&Ct!==void 0?Ct:Zn))*devicePixelRatio,ot=Ge.id!==Ke.id&&Ae>Te;Pe||ot||(je.disabled===!0?z.push(ci(ci({},je),{},{fromNode:Ge,toNode:Ke,showLabel:$e})):je.selected===!0?V.push(ci(ci({},je),{},{fromNode:Ge,toNode:Ke,showLabel:$e})):Y.push(ci(ci({},je),{},{fromNode:Ge,toNode:Ke,showLabel:$e})))}}}catch(Ze){Ue.e(Ze)}finally{Ue.f()}return[].concat(z,Y,V)}},{key:"getNodesToRender",value:function(O,M,I){var B,V=[],z=[],Y=[],X=this.state.nodes.idToItem,J=jc(O);try{for(J.s();!(B=J.n()).done;){var ie,he,ge=B.value,le=Yh(ge);this.isBoundingBoxOffScreen(le,M,I)||(((ie=X[ge.id])===null||ie===void 0?void 0:ie.disabled)===!0?V.push(ci({},ge)):((he=X[ge.id])===null||he===void 0?void 0:he.selected)===!0?z.push(ci({},ge)):Y.push(ci({},ge)))}}catch(ye){J.e(ye)}finally{J.f()}return[].concat(V,Y,z)}},{key:"renderNodes",value:function(O,M,I){var B,V=this.imageCache,z=this.animationHandler,Y=this.state,X=this.ellipsisWidth,J=Y.nodes.idToItem,ie=Y.nodeBorderStyles,he=Y.disabledItemStyles,ge=Y.defaultNodeColor,le=jc(O);try{for(le.s();!(B=le.n()).done;){var ye=B.value;Ff(M,ci(ci({},J[ye.id]),ye),V,z,ie,he,ge,X,I)}}catch(Me){le.e(Me)}finally{le.f()}}},{key:"renderRelationships",value:function(O,M,I){var B,V=this.state.relationshipBorderStyles.selected,z=this.arrowBundler,Y=this.imageCache,X=this.state,J=X.disabledItemStyles,ie=X.defaultRelationshipColor,he=jc(O);try{for(he.s();!(B=he.n()).done;){var ge=B.value,le=z.getBundle(ge),ye=ge.fromNode,Me=ge.toNode,Ne=ge.showLabel;Mc(M,ge,ye,Me,le,Y,Ne,V,J,ie,I)}}catch(Ue){he.e(Ue)}finally{he.f()}}},{key:"getNodesAt",value:function(O){var M,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,B=[],V=this.state.nodes,z=V.items,Y=V.idToPosition,X=rt(),J=jc(z);try{var ie=function(){var he=M.value,ge=he.id,le=he.size,ye=le===void 0?Zn:le,Me=Y[ge],Ne=Me.x,Ue=Me.y,je=Math.sqrt(Math.pow(O.x-Ne,2)+Math.pow(O.y-Ue,2));if(je<=(ye+I)*X){var Xe=B.findIndex(function(Ge){return Ge.distance>je});B.splice(Xe!==-1?Xe:B.length,0,{data:he,targetCoordinates:{x:Ne,y:Ue},pointerCoordinates:O,distanceVector:{x:O.x-Ne,y:O.y-Ue},insideNode:je<=ye*X,distance:je})}};for(J.s();!(M=J.n()).done;)ie()}catch(he){J.e(he)}finally{J.f()}return B}},{key:"getRelsAt",value:function(O){var M,I=[],B=this.state,V=this.arrowBundler,z=this.relationshipThreshold,Y=B.zoom,X=B.rels.items,J=B.nodes.idToPosition,ie=B.layout,he=Y>z,ge=jc(X);try{var le=function(){var ye=M.value,Me=V.getBundle(ye),Ne=J[ye.from],Ue=J[ye.to];if(Ne!==void 0&&Ue!==void 0&&Me.indexOf(ye)!==-1){var je=function(Ge,Ke,$e,Ve,tt,mt){var It=arguments.length>6&&arguments[6]!==void 0&&arguments[6];if(!If($e,Ve))return 1/0;var bt=$e===Ve?function(jt,Ct,Pe,Te){var Ae=Nf(Ct,Pe,Te),ot=Ae.startPoint,Ze=Ae.endPoint,ht=Ae.apexPoint,kt=Ae.control1Point,Ut=Ae.control2Point,qt=Is(ot,ht,kt,jt),Tr=Is(ht,Ze,Ut,jt);return Math.min(qt,Tr)}(Ge,Ke,$e,tt):function(jt,Ct,Pe,Te,Ae,ot,Ze){var ht=Xo(Ct,Pe,Te,Ae,ot,Ze),kt=1/0;if(Ze&&ht.length===3)kt=Is(ht[0],ht[2],ht[1],jt);else for(var Ut=1;Ut<ht.length;Ut++){var qt=ht[Ut-1],Tr=ht[Ut],Ir=ls(qt,Tr,jt);kt=Ir<kt?Ir:kt}return kt}(Ge,Ke,tt,$e,Ve,mt,It);return bt}(O,ye,Ne,Ue,Me,he,ie!==Sl);if(je<10){var Xe=I.findIndex(function(Ge){return Ge.distance>je});I.splice(Xe!==-1?Xe:I.length,0,{data:ye,fromTargetCoordinates:Ne,toTargetCoordinates:Ue,pointerCoordinates:O,distance:je})}}};for(ge.s();!(M=ge.n()).done;)le()}catch(ye){ge.e(ye)}finally{ge.f()}return I}},{key:"destroy",value:function(){this.stateDisposers.forEach(function(O){O()}),this.state.nodes.removeChannel(Xu),this.state.rels.removeChannel(Xu)}},{key:"isBoundingBoxOffScreen",value:function(O,M,I){var B=this.state,V=B.zoom,z=M/V,Y=I/V,X=B.panX-z/2,J=B.panY-Y/2,ie=O.right<X,he=O.bottom<J,ge=O.left>X+z,le=O.top>J+Y;return ie||ge||he||le}},{key:"handleChannelUpdate",value:function(O,M,I){for(var B=Object.keys(O.adds),V=0;V<B.length;V++){var z=B[V];O.adds[z].activated&&this.activeNodes.add(z)}for(var Y=Object.keys(O.removes),X=0;X<Y.length;X++){var J=Y[X];this.activeNodes.delete(J)}if(I)for(var ie=Object.keys(O.updates),he=0;he<ie.length;he++){var ge=ie[he];M.idToItem[ge].activated?this.activeNodes.add(ge):this.activeNodes.delete(ge)}}},{key:"zoomAndPan",value:function(O,M){var I=M.width,B=M.height,V=this.state,z=V.zoom,Y=V.panX,X=V.panY;O.translate(-I/2*z,-B/2*z),O.translate(-Y*z,-X*z),O.scale(z,z),O.translate(I/2/z,B/2/z),O.translate(I/2,B/2)}}],x&&Ko(w.prototype,x),Object.defineProperty(w,"prototype",{writable:!1}),b}(),Xh=function(b,w){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,O=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,M=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,I=function(B,V){if((0,r.isNil)(B)||(0,r.isNil)(V))return{offsetX:0,offsetY:0};var z=V.getBoundingClientRect(),Y=window.devicePixelRatio||1;return{offsetX:Y*(B.clientX-z.left-.5*z.width),offsetY:Y*(B.clientY-z.top-.5*z.height)}}(b,w);return{x:O+I.offsetX/x,y:M+I.offsetY/x}};function Bf(b){return Bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},Bf(b)}function Cp(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")}function Pg(b,w){for(var x=0;x<w.length;x++){var O=w[x];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(b,rv(O.key),O)}}function tv(b,w,x){return w&&Pg(b.prototype,w),Object.defineProperty(b,"prototype",{writable:!1}),b}function Ua(b,w,x){return(w=rv(w))in b?Object.defineProperty(b,w,{value:x,enumerable:!0,configurable:!0,writable:!0}):b[w]=x,b}function rv(b){var w=function(x,O){if(Bf(x)!="object"||!x)return x;var M=x[Symbol.toPrimitive];if(M!==void 0){var I=M.call(x,"string");if(Bf(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(b);return Bf(w)=="symbol"?w:String(w)}var Ao="WebGLRenderer",$h=function(){function b(w){var x=this;if(Cp(this,b),Ua(this,"mainSceneRenderer",void 0),Ua(this,"minimapRenderer",void 0),Ua(this,"needsRun",void 0),Ua(this,"minimapMouseDown",void 0),Ua(this,"stateDisposers",void 0),Ua(this,"state",void 0),w.state===void 0)throw new Error("Renderer missing options: state - state object");var O=w.state,M=w.mainSceneRenderer,I=w.minimapRenderer,B=O.nodes,V=O.rels;this.mainSceneRenderer=M,this.minimapRenderer=I,this.needsRun=!1,this.minimapMouseDown=!1,this.stateDisposers=[],this.stateDisposers.push(O.autorun(function(){x.updateMainViewport(O.zoom,O.panX,O.panY)})),this.stateDisposers.push(O.autorun(function(){x.updateMinimapViewport(O.minimapZoom,O.minimapPanX,O.minimapPanY)})),this.stateDisposers.push(O.autorun(function(){O.nodes.version!==void 0&&(x.needsRun=!0),O.rels.version!==void 0&&(x.needsRun=!0)})),B.addChannel(Ao),V.addChannel(Ao),this.state=O,this.setupMinimapInteractions()}return tv(b,[{key:"needsToRun",value:function(){return this.needsRun||Object.keys(this.mainSceneRenderer.activeNodes).length>0}},{key:"renderMainScene",value:function(w){var x=this.state,O=x.nodes,M=x.rels;this.checkForUpdates(O,M),this.mainSceneRenderer.render(w,O,M),this.needsRun=!1}},{key:"renderMinimap",value:function(w){var x=this.state,O=x.nodes,M=x.rels;this.checkForUpdates(O,M),this.minimapRenderer.render(w,O,M),this.minimapRenderer.renderViewbox(),this.needsRun=!1}},{key:"checkForUpdates",value:function(w,x){var O=Object.values(w.channels[Ao].adds).length>0,M=Object.values(x.channels[Ao].adds).length>0,I=Object.values(w.channels[Ao].removes).length>0,B=Object.values(x.channels[Ao].removes).length>0,V=Object.values(w.channels[Ao].updates),z=Object.values(x.channels[Ao].updates);O||M||I||B?(this.mainSceneRenderer.setData({nodes:w.items,rels:x.items}),this.minimapRenderer.setData({nodes:w.items,rels:x.items})):(V.length>0&&(this.mainSceneRenderer.updateNodes(V),this.minimapRenderer.updateNodes(V)),z.length>0&&(this.mainSceneRenderer.updateRelationships(x.items),this.minimapRenderer.updateRelationships(x.items))),w.clearChannel(Ao),x.clearChannel(Ao)}},{key:"onResize",value:function(){var w=this.state,x=w.zoom,O=w.panX,M=w.panY,I=w.minimapZoom,B=w.minimapPanX,V=w.minimapPanY;this.updateMainViewport(x,O,M),this.updateMinimapViewport(I,B,V)}},{key:"updateMainViewport",value:function(w,x,O){this.mainSceneRenderer.updateViewport(w,x,O);var M=this.mainSceneRenderer.canvas.clientWidth,I=this.mainSceneRenderer.canvas.clientHeight;this.minimapRenderer.updateViewportBox(w,x,O,M,I),this.needsRun=!0}},{key:"updateMinimapViewport",value:function(w,x,O){this.minimapRenderer.updateViewport(w,x,O),this.needsRun=!0}},{key:"handleMinimapDrag",value:function(w){var x=this.state,O=this.minimapRenderer,M=Xh(w,O.canvas,x.minimapZoom,x.minimapPanX,x.minimapPanY),I=M.x,B=M.y;x.setPan(I,B)}},{key:"handleMinimapWheel",value:function(w){var x=this.state,O=this.mainSceneRenderer;x.setZoom(function(M){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return(0,r.isNil)(M)||isNaN(M.deltaY)?I:I-M.deltaY/500*Math.min(1,I)}(w,x.zoom),O.canvas),w.preventDefault()}},{key:"setupMinimapInteractions",value:function(){var w=this,x=this.minimapRenderer.canvas;x.addEventListener("mousedown",function(O){w.handleMinimapDrag(O),w.minimapMouseDown=!0}),x.addEventListener("mousemove",function(O){w.minimapMouseDown&&w.handleMinimapDrag(O)}),x.addEventListener("mouseup",function(){w.minimapMouseDown=!1}),x.addEventListener("mouseleave",function(){w.minimapMouseDown=!1}),x.addEventListener("wheel",function(O){w.handleMinimapWheel(O)})}},{key:"destroy",value:function(){this.stateDisposers.forEach(function(w){w()}),this.state.nodes.removeChannel(Ao),this.state.rels.removeChannel(Ao),this.mainSceneRenderer.destroy(),this.minimapRenderer.destroy()}}]),b}(),nv=function(){function b(){Cp(this,b),Ua(this,"mainSceneRenderer",void 0),Ua(this,"minimapRenderer",void 0),Ua(this,"needsRun",void 0),Ua(this,"minimapMouseDown",void 0),Ua(this,"stateDisposers",void 0),Ua(this,"state",void 0)}return tv(b,[{key:"renderMainScene",value:function(w){}},{key:"renderMinimap",value:function(w){}},{key:"checkForUpdates",value:function(w,x){}},{key:"onResize",value:function(){}},{key:"updateMainViewport",value:function(w,x,O){}},{key:"updateMinimapViewport",value:function(w,x,O){}},{key:"handleMinimapDrag",value:function(w){}},{key:"handleMinimapWheel",value:function(w){}},{key:"setupMinimapInteractions",value:function(){}},{key:"destroy",value:function(){}},{key:"needsToRun",value:function(){return!1}}]),b}();function Uf(b){return Uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},Uf(b)}function iv(b,w){var x=typeof Symbol<"u"&&b[Symbol.iterator]||b["@@iterator"];if(!x){if(Array.isArray(b)||(x=function(z,Y){if(z){if(typeof z=="string")return ov(z,Y);var X=Object.prototype.toString.call(z).slice(8,-1);return X==="Object"&&z.constructor&&(X=z.constructor.name),X==="Map"||X==="Set"?Array.from(z):X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X)?ov(z,Y):void 0}}(b))||w){x&&(b=x);var O=0,M=function(){};return{s:M,n:function(){return O>=b.length?{done:!0}:{done:!1,value:b[O++]}},e:function(z){throw z},f:M}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I,B=!0,V=!1;return{s:function(){x=x.call(b)},n:function(){var z=x.next();return B=z.done,z},e:function(z){V=!0,I=z},f:function(){try{B||x.return==null||x.return()}finally{if(V)throw I}}}}function ov(b,w){(w==null||w>b.length)&&(w=b.length);for(var x=0,O=new Array(w);x<w;x++)O[x]=b[x];return O}function Ag(b,w){for(var x=0;x<w.length;x++){var O=w[x];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(b,Pp(O.key),O)}}function Jn(b,w,x){return(w=Pp(w))in b?Object.defineProperty(b,w,{value:x,enumerable:!0,configurable:!0,writable:!0}):b[w]=x,b}function Pp(b){var w=function(x,O){if(Uf(x)!="object"||!x)return x;var M=x[Symbol.toPrimitive];if(M!==void 0){var I=M.call(x,"string");if(Uf(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(b);return Uf(w)=="symbol"?w:String(w)}var av,A=24,N=function(){function b(O,M,I,B){var V;if(function(z,Y){if(!(z instanceof Y))throw new TypeError("Cannot call a class as a function")}(this,b),Jn(this,"nodeShader",void 0),Jn(this,"nodeAnimShader",void 0),Jn(this,"relShader",void 0),Jn(this,"relDataBuffer",void 0),Jn(this,"viewportBoxShader",void 0),Jn(this,"defaultRelColor",void 0),Jn(this,"defaultNodeColor",void 0),Jn(this,"disableRelColor",void 0),Jn(this,"disableNodeColor",void 0),Jn(this,"gl",void 0),Jn(this,"activeNodes",void 0),Jn(this,"canvas",void 0),Jn(this,"projection",void 0),Jn(this,"idToIndex",void 0),Jn(this,"posBuffer",void 0),Jn(this,"numRels",void 0),Jn(this,"numNodes",void 0),Jn(this,"nodeDataByte",void 0),Jn(this,"relIdToIndex",void 0),Jn(this,"relData",void 0),Jn(this,"viewportBoxBuffer",void 0),Jn(this,"relBuffer",void 0),Jn(this,"nodeBuffer",void 0),Jn(this,"posTexture",void 0),((V=O.getExtension("OES_texture_float"))!==null&&V!==void 0?V:void 0)===void 0)throw new Error("Renderer needs floating point texture support");this.nodeShader=new la(O,`uniform mat4 u_projection;
uniform sampler2D u_positions;
uniform mediump float u_zoom;
uniform mediump float u_glAdjust;
uniform lowp vec3 u_nodeBorderColor;
uniform lowp vec3 u_selectedBorderColor;
uniform lowp vec3 u_selectedInnerBorderColor;
uniform lowp vec3 u_shadowColor;
uniform lowp float u_drawDefaultBorder;

attribute float a_size;
attribute lowp vec2 a_index;
attribute lowp vec4 a_color;
attribute lowp float a_selected;
attribute lowp float a_hovered;

varying lowp float window;
varying lowp vec4 color;
varying lowp float selected;
varying lowp float hovered;
varying lowp float varNodeSize;
varying lowp vec3 nodeBorderColor;
varying lowp vec3 selectedBorderColor;
varying lowp vec3 selectedInnerBorderColor;
varying lowp vec3 shadowColor;
varying lowp float drawDefaultBorder;

lowp float MinNodeSize = 5.0;

void main(void) {
  vec4 data = texture2D(u_positions, a_index);
  gl_Position = u_projection * vec4(data.xy, 0.0, 1.0);

  lowp float nodeSize = a_size * u_zoom * u_glAdjust;
  if (nodeSize < MinNodeSize) {
   gl_PointSize = MinNodeSize;
   varNodeSize = MinNodeSize;
  } else {
    gl_PointSize = nodeSize;
    varNodeSize = nodeSize;
  }

  color = a_color;
  selected = a_selected;
  hovered = a_hovered;
  nodeBorderColor = u_nodeBorderColor;
  selectedBorderColor = u_selectedBorderColor;
  selectedInnerBorderColor = u_selectedInnerBorderColor;
  shadowColor = u_shadowColor;
  drawDefaultBorder = u_drawDefaultBorder;
}`,`uniform mediump float u_zoom;
uniform mediump float u_glAdjust;

varying lowp vec4 color;
varying lowp float drawDefaultBorder;
varying lowp vec3 nodeBorderColor;
varying lowp vec3 selectedBorderColor;
varying lowp vec3 selectedInnerBorderColor;
varying lowp vec3 shadowColor;
varying lowp float selected;
varying lowp float hovered;
varying lowp float varNodeSize;

mediump float circleSize = 0.40;
mediump float defaultBoderSize = 0.42;
mediump float innerSelectedRingSize = 0.43;
mediump float outerSelectedRingSize = 0.47;
mediump float shadowSize = 0.51;

lowp float getShadowAlpha(lowp float size, lowp float dist) {
  return (1.0 - smoothstep(size, shadowSize, dist)) * 0.25;
}

lowp float getCircleAlpha(lowp float ringSize, lowp float nodeSize, lowp float dist) {
  return color.w - smoothstep(ringSize - nodeSize, ringSize, dist);
}

void main() {
  lowp float dist = distance(gl_PointCoord, vec2(0.5));

  if (dist > 0.51) {
    discard;
  }
  else {
    lowp float nodeSize = 1.0 / varNodeSize;
    lowp float nodeAlpha = getCircleAlpha(circleSize, nodeSize, dist);
    lowp float borderAlpha = getCircleAlpha(defaultBoderSize, nodeSize, dist);
    lowp float ringAlpha = getCircleAlpha(innerSelectedRingSize, nodeSize, dist);
    lowp vec3 finalColor = color.xyz;
    lowp float finalAlpha = nodeAlpha;

    if (selected > 0.0) {
      lowp float shadowAlpha = getShadowAlpha(outerSelectedRingSize, dist);
      lowp float ringAlpha2 = getCircleAlpha(outerSelectedRingSize, nodeSize, dist);

      if (drawDefaultBorder > 0.0) {
        finalColor = mix(nodeBorderColor, finalColor, nodeAlpha);
        finalColor = mix(selectedInnerBorderColor, finalColor, borderAlpha);
        finalColor = mix(selectedBorderColor, finalColor, ringAlpha);
        finalColor = mix(shadowColor, finalColor, ringAlpha2);
        finalAlpha = max(shadowAlpha, max(nodeAlpha, max(borderAlpha, ringAlpha2)));
      } else {
        finalColor = mix(selectedInnerBorderColor, finalColor, nodeAlpha);
        finalColor = mix(selectedBorderColor, finalColor, ringAlpha);
        finalColor = mix(shadowColor, finalColor, ringAlpha2);
        finalAlpha = max(shadowAlpha, max(nodeAlpha, max(ringAlpha, ringAlpha2)));
      }
    } else if (hovered > 0.0) {
      if (drawDefaultBorder > 0.0) {
        lowp float shadowAlpha = getShadowAlpha(defaultBoderSize, dist);
  
        finalColor = mix(nodeBorderColor, finalColor, nodeAlpha);
        finalColor = mix(shadowColor, finalColor, borderAlpha);
        finalAlpha = max(shadowAlpha, max(nodeAlpha, ringAlpha));
      } else {
        lowp float shadowAlpha = getShadowAlpha(circleSize, dist);

        finalColor = mix(shadowColor, finalColor, nodeAlpha);
        finalAlpha = max(shadowAlpha, nodeAlpha);
      }
    } else {
      if (drawDefaultBorder > 0.0) {
        finalColor = mix(nodeBorderColor, finalColor, nodeAlpha);
        finalAlpha = borderAlpha;
      }
    }
    gl_FragColor = vec4(finalColor, 1.0) * finalAlpha;
  }
}
`),this.nodeAnimShader=new la(O,`uniform mat4 u_projection;
uniform sampler2D u_positions;
uniform lowp float u_animPos;
uniform mediump float u_zoom;
uniform mediump float u_glAdjust;

attribute float a_size;
attribute lowp vec2 a_index;
attribute lowp vec4 a_color;
attribute lowp float a_active;

varying lowp float varNodeSize;
varying lowp vec4 color;

void main(void) {
  vec4 data = texture2D(u_positions, a_index);

  gl_Position = u_projection * vec4(data.xy, 0.0, 1.0);

  float nodeSize = a_size * u_zoom * u_glAdjust;
  nodeSize = nodeSize * (0.4 / 0.5); // Remove extra space added for shadow and selection ring

  gl_PointSize = a_active > 0.5
    ? nodeSize + 0.88 * nodeSize * u_animPos
    : 0.0;

  color = a_color;
  varNodeSize = a_size;
}`,`uniform mediump float u_zoom;
uniform lowp float u_animPos;
uniform mediump float u_glAdjust;

varying lowp vec4 color;
varying lowp float varNodeSize;
mediump float circleSize = 0.50;

void main(void) {

  lowp float dist = distance(gl_PointCoord, vec2(0.5));

  if (dist > 0.51) {
    discard;
  }
  else {
    lowp float alpha = 1.0 - smoothstep(circleSize - (1.0 / (varNodeSize * 2.0 * u_zoom * u_glAdjust)), circleSize, dist);
    lowp float pulseAlpha = 0.9 - 0.9 * u_animPos;
    gl_FragColor = vec4(color.xyz, 1.0) * alpha * pulseAlpha;
  }
}
`),this.relShader=new la(O,`uniform mat4 u_projection;
uniform sampler2D u_positions;
uniform mediump float u_glAdjust;

attribute vec2 a_from;
attribute vec2 a_to;
attribute lowp vec4 a_color;
attribute lowp float a_triside;
attribute float a_width;

varying lowp vec4 color;

void main(void) {
  vec4 from = texture2D(u_positions, a_from);
  vec4 to = texture2D(u_positions, a_to);
  vec2 direction = normalize(to.xy - from.xy);
  direction = vec2(-direction.y, direction.x);

  float width = a_width * u_glAdjust * 0.5;

  if (a_triside == 0.0) {
    from.y += (width / 2.0) * direction.y;
    from.x += (width / 2.0) * direction.x;
  } else {
    from.y -= (width / 2.0) * direction.y;
    from.x -= (width / 2.0) * direction.x;
  }

  color = a_color;
  gl_Position = u_projection * vec4(from.xy, 0.0, 1.0);
}
`,`varying lowp vec4 color;

void main(void) {
  gl_FragColor = vec4(color.xyz, 1.0) * color.w;
}
`),this.viewportBoxShader=new la(O,`
attribute vec2 coordinates;
uniform mat4 u_projection;
uniform lowp vec4 u_minimapViewportBoxColor;

varying lowp vec4 minimapViewportBoxColor;

void main(void) {
  gl_Position = u_projection * vec4(coordinates, 0.0, 1.0);
  minimapViewportBoxColor = u_minimapViewportBoxColor;
}
`,`
varying lowp vec4 minimapViewportBoxColor;

void main(void) {
 gl_FragColor = minimapViewportBoxColor;
}
`),this.setShaderUniforms(B),O.clearColor(0,0,0,0),O.disable(O.DEPTH_TEST),this.defaultRelColor=B.defaultRelationshipColor,this.defaultNodeColor=B.defaultNodeColor,this.disableRelColor=B.disabledItemStyles.color,this.disableNodeColor=B.disabledItemStyles.color,O.blendFunc(O.ONE,O.ONE_MINUS_SRC_ALPHA),this.gl=O,this.activeNodes={},this.canvas=O.canvas,this.projection=au(),this.setData({nodes:M.items,rels:I.items}),this.createPositionTexture(),this.setupViewportRendering(B.minimapViewportBoxColor)}var w,x;return w=b,x=[{key:"setShaderUniforms",value:function(O){var M,I,B,V,z,Y=O.nodeBorderStyles,X=null;((M=Y.default)===null||M===void 0?void 0:M.rings.length)>0&&(X=(z=Y.default.rings[0])===null||z===void 0?void 0:z.color);var J,ie,he=null,ge=null,le=(I=(B=Y.selected)===null||B===void 0?void 0:B.rings)!==null&&I!==void 0?I:[],ye=le.length;ye>1&&(ge=(J=le[ye-2])===null||J===void 0?void 0:J.color,he=(ie=le[ye-1])===null||ie===void 0?void 0:ie.color);var Me=null;(V=Y.selected)!==null&&V!==void 0&&V.shadow&&(Me=Y.selected.shadow.color),this.nodeShader.use(),(0,r.isNil)(X)?this.nodeShader.setUniform("u_drawDefaultBorder",0):(this.nodeShader.setUniform("u_nodeBorderColor",Yu(X)),this.nodeShader.setUniform("u_drawDefaultBorder",1));var Ne=Yu(he),Ue=Yu(ge),je=Yu(Me);this.nodeShader.setUniform("u_selectedBorderColor",Ne),this.nodeShader.setUniform("u_selectedInnerBorderColor",Ue),this.nodeShader.setUniform("u_shadowColor",je)}},{key:"setData",value:function(O){var M=yi(O.rels,this.disableRelColor);this.setupNodeRendering(O.nodes),this.setupRelationshipRendering(M)}},{key:"render",value:function(O,M,I){var B,V=this.gl,z=this.idToIndex,Y=iv(O);try{for(Y.s();!(B=Y.n()).done;){var X=B.value,J=z[X.id];this.posBuffer[4*J+0]=X.x,this.posBuffer[4*J+1]=X.y}}catch(ie){Y.e(ie)}finally{Y.f()}V.bindTexture(V.TEXTURE_2D,this.posTexture),V.texImage2D(V.TEXTURE_2D,0,V.RGBA,rr,rr,0,V.RGBA,V.FLOAT,this.posBuffer),V.enable(V.BLEND),V.bindFramebuffer(V.FRAMEBUFFER,null),V.clear(V.COLOR_BUFFER_BIT),V.viewport(0,0,V.drawingBufferWidth,V.drawingBufferHeight),this.renderAnimations(this.posTexture),this.numRels>0&&(this.relShader.use(),this.relShader.setUniform("u_positions",this.posTexture),V.bindBuffer(V.ARRAY_BUFFER,this.relBuffer),this.relShader.setAttributePointerByteNorm("a_color",4,0,16),this.relShader.setAttributePointerByteNorm("a_from",2,4,16),this.relShader.setAttributePointerByteNorm("a_to",2,6,16),this.relShader.setAttributePointerByteNorm("a_triside",1,8,16),this.relShader.setAttributePointerFloat("a_width",1,12,16),V.drawArrays(V.TRIANGLES,0,6*this.numRels)),this.numNodes>0&&(this.nodeShader.use(),this.nodeShader.setUniform("u_positions",this.posTexture),V.bindBuffer(V.ARRAY_BUFFER,this.nodeBuffer),this.nodeShader.setAttributePointerByteNorm("a_color",4,0,12),this.nodeShader.setAttributePointerByteNorm("a_selected",1,4,12),this.nodeShader.setAttributePointerByteNorm("a_index",2,5,12),this.nodeShader.setAttributePointerByte("a_size",4,8,12),this.nodeShader.setAttributePointerByteNorm("a_hovered",1,9,12),V.drawArrays(V.POINTS,0,this.numNodes))}},{key:"renderViewbox",value:function(){var O=this.gl,M=this.projection,I=this.viewportBoxBuffer;this.viewportBoxShader.use(),this.viewportBoxShader.setUniform("u_projection",M),O.bindBuffer(O.ARRAY_BUFFER,I),this.viewportBoxShader.setAttributePointerFloat("coordinates",2,0,0),O.drawArrays(O.LINES,0,8)}},{key:"updateNodes",value:function(O){var M,I=this.gl,B=this.idToIndex,V=this.disableNodeColor,z=this.nodeBuffer,Y=this.nodeDataByte,X=!1,J=iv(O);try{for(J.s();!(M=J.n()).done;){var ie=M.value,he=B[ie.id];if(!(0,r.isNil)(ie.color)||ie.disabled===!0){var ge=Fl(ie.disabled===!0?V:ie.color);this.nodeDataByte[3*he*4+0]=ge[0],this.nodeDataByte[3*he*4+1]=ge[1],this.nodeDataByte[3*he*4+2]=ge[2],this.nodeDataByte[3*he*4+3]=255*ge[3],X=!0}if(ie.selected!==void 0){var le=ie.selected;this.nodeDataByte[3*he*4+4]=le?255:0,X=!0}if(ie.activated!==void 0&&(this.nodeDataByte[3*he*4+7]=ie.activated?255:0,X=!0,ie.activated?this.activeNodes[ie.id]=!0:delete this.activeNodes[ie.id]),ie.hovered!==void 0){var ye=ie.disabled!==!0&&ie.hovered;this.nodeDataByte[3*he*4+9]=ye?255:0,X=!0}if(ie.size!==void 0){var Me=ie.size;this.nodeDataByte[3*he*4+8]=Me||Zn,X=!0}}}catch(Ne){J.e(Ne)}finally{J.f()}X&&(I.bindBuffer(I.ARRAY_BUFFER,z),I.bufferData(I.ARRAY_BUFFER,Y,I.DYNAMIC_DRAW))}},{key:"updateRelationships",value:function(O){var M,I=yi(O,this.disableRelColor),B=this.gl,V=!1,z=iv(I);try{for(z.s();!(M=z.n()).done;){var Y=M.value,X=Y.key,J=Y.width,ie=Y.color,he=Y.disabled,ge=this.relIdToIndex[X],le=(0,r.isNil)(ie)?this.defaultRelColor:ie,ye=jf(he?this.disableRelColor:le);this.relData.positionsAndColors[ge*A+0]=ye,this.relData.positionsAndColors[ge*A+4]=ye,this.relData.positionsAndColors[ge*A+8]=ye,this.relData.positionsAndColors[ge*A+12]=ye,this.relData.positionsAndColors[ge*A+16]=ye,this.relData.positionsAndColors[ge*A+20]=ye,V=!0,J!==void 0&&(this.relData.widths[ge*A+3]=J,this.relData.widths[ge*A+7]=J,this.relData.widths[ge*A+11]=J,this.relData.widths[ge*A+15]=J,this.relData.widths[ge*A+19]=J,this.relData.widths[ge*A+23]=J,V=!0)}}catch(Me){z.e(Me)}finally{z.f()}V&&(B.bindBuffer(B.ARRAY_BUFFER,this.relBuffer),B.bufferData(B.ARRAY_BUFFER,this.relDataBuffer,B.DYNAMIC_DRAW))}},{key:"createPositionTexture",value:function(){var O=this.gl,M=O.createTexture(),I=new Float32Array(262144);O.bindTexture(O.TEXTURE_2D,M),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_MIN_FILTER,O.NEAREST),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_MAG_FILTER,O.NEAREST),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_WRAP_S,O.CLAMP_TO_EDGE),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_WRAP_T,O.CLAMP_TO_EDGE),O.texImage2D(O.TEXTURE_2D,0,O.RGBA,rr,rr,0,O.RGBA,O.FLOAT,I),this.posTexture=M,this.posBuffer=I}},{key:"updateViewportBox",value:function(O,M,I,B,V){var z=this.gl,Y=rt(),X=B*Y,J=V*Y,ie=(.5*X+M*O)/O,he=(.5*J+I*O)/O,ge=(.5*-X+M*O)/O,le=(.5*-J+I*O)/O,ye=[ie,he,ge,he,ge,he,ge,le,ge,le,ie,le,ie,le,ie,he];z.bindBuffer(z.ARRAY_BUFFER,this.viewportBoxBuffer),z.bufferData(z.ARRAY_BUFFER,new Float32Array(ye),z.DYNAMIC_DRAW)}},{key:"updateViewport",value:function(O,M,I){var B=this.gl,V=1/O,z=M-B.drawingBufferWidth*V*.5,Y=I-B.drawingBufferHeight*V*.5,X=B.drawingBufferWidth*V,J=B.drawingBufferHeight*V,ie=au(),he=2.6315789473684212*rt();As(ie,z,z+X,Y+J,Y,0,1e6),this.nodeShader.use(),this.nodeShader.setUniform("u_zoom",O),this.nodeShader.setUniform("u_glAdjust",he),this.nodeShader.setUniform("u_projection",ie),this.nodeAnimShader.use(),this.nodeAnimShader.setUniform("u_zoom",O),this.nodeAnimShader.setUniform("u_glAdjust",he),this.nodeAnimShader.setUniform("u_projection",ie),this.relShader.use(),this.relShader.setUniform("u_glAdjust",he),this.relShader.setUniform("u_projection",ie),this.projection=ie}},{key:"setupViewportRendering",value:function(){var O,M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Qe;this.viewportBoxBuffer=this.gl.createBuffer(),this.viewportBoxShader.use(),this.viewportBoxShader.setUniform("u_minimapViewportBoxColor",[(O=Fl(M))[0]/255,O[1]/255,O[2]/255,O[3]])}},{key:"setupNodeRendering",value:function(O){var M=this.gl,I=new ArrayBuffer(8),B=new Uint32Array(I),V=new Uint8Array(I);this.nodeBuffer===void 0&&(this.nodeBuffer=M.createBuffer()),this.numNodes=O.length;var z=new ArrayBuffer(3*O.length*8),Y=new Uint32Array(z),X={};this.activeNodes={};for(var J=0;J<O.length;J++){var ie=O[J],he=ie.selected,ge=ie.hovered,le=ie.color,ye=ie.activated,Me=ie.size,Ne=ie.id,Ue=ie.disabled,je=jf((0,r.isNil)(le)?this.defaultNodeColor:le);Y[3*J+0]=Ue?jf(this.disableNodeColor):je,V[0]=he?255:0,V[1]=J%rr,V[2]=Math.floor(J/rr),V[3]=ye?255:0,V[4]=!Ue&&ge?255:0,ye&&(this.activeNodes[Ne]=!0),Y[3*J+1]=B[0],Y[3*J+2]=Me??Zn,Y[3*J+3]=B[1],X[Ne]=J}M.bindBuffer(M.ARRAY_BUFFER,this.nodeBuffer),M.bufferData(M.ARRAY_BUFFER,Y,M.DYNAMIC_DRAW),this.numNodes=O.length,this.nodeDataByte=new Uint8Array(z),this.idToIndex=X}},{key:"setupRelationshipRendering",value:function(O){var M=this,I=this.gl,B=new ArrayBuffer(4),V=new Uint32Array(B),z=new Uint8Array(B),Y={};this.relBuffer===void 0&&(this.relBuffer=I.createBuffer());for(var X=new ArrayBuffer(O.length*A*4),J=new Uint32Array(X),ie=new Float32Array(X),he=function(le){var ye=O[le],Me=ye.from,Ne=ye.to,Ue=ye.color,je=ye.width,Xe=je===void 0?1:je,Ge=ye.key,Ke=ye.disabled,$e=M.idToIndex[Me],Ve=M.idToIndex[Ne],tt=$e%rr,mt=Math.floor($e/rr),It=Ve%rr,bt=Math.floor(Ve/rr),jt=[tt,mt,It,bt],Ct=[It,bt,tt,mt],Pe=(0,r.isNil)(Ue)?M.defaultRelColor:Ue,Te=jf(Ke?M.disableRelColor:Pe);Y[Ge]=le;var Ae=0,ot=function(Ze,ht,kt,Ut){J[le*A+Ae]=Ze,Ae+=1;for(var qt=0;qt<ht.length;qt++)z[qt]=ht[qt];J[le*A+Ae]=V[0],Ae+=1,z[0]=kt,J[le*A+Ae]=V[0],ie[le*A+(Ae+=1)]=Ut,Ae+=1};ot(Te,jt,255,Xe),ot(Te,Ct,0,Xe),ot(Te,jt,0,Xe),ot(Te,Ct,0,Xe),ot(Te,jt,0,Xe),ot(Te,Ct,255,Xe)},ge=0;ge<O.length;ge++)he(ge);I.bindBuffer(I.ARRAY_BUFFER,this.relBuffer),I.bufferData(I.ARRAY_BUFFER,X,I.DYNAMIC_DRAW),this.numRels=O.length,this.relDataBuffer=X,this.relData={positionsAndColors:J,widths:ie},this.relIdToIndex=Y}},{key:"renderAnimations",value:function(O){var M=this.gl,I=this.nodeBuffer,B=this.numNodes,V=Date.now()%1e3/1e3,z=V<.7?V/.7:0;this.nodeAnimShader.use(),this.nodeAnimShader.setUniform("u_positions",O),this.nodeAnimShader.setUniform("u_animPos",z),M.bindBuffer(M.ARRAY_BUFFER,I),this.nodeAnimShader.setAttributePointerByteNorm("a_color",4,0,12),this.nodeAnimShader.setAttributePointerByteNorm("a_active",1,7,12),this.nodeAnimShader.setAttributePointerByteNorm("a_index",2,5,12),this.nodeAnimShader.setAttributePointerByte("a_size",4,8,12),M.drawArrays(M.POINTS,0,B)}},{key:"destroy",value:function(){this.gl.deleteBuffer(this.nodeBuffer),this.gl.deleteBuffer(this.relBuffer),this.nodeShader.remove(),this.nodeAnimShader.remove(),this.relShader.remove()}}],x&&Ag(w.prototype,x),Object.defineProperty(w,"prototype",{writable:!1}),b}(),G=function(b,w,x){var O=rt();b.width=w*O,b.height=x*O,b.style.width="".concat(w,"px"),b.style.height="".concat(x,"px")},te=function(b){zr.warn("Error: WebGL context lost - visualization will stop working!",b),av!==void 0&&av(b)},ae=function(b){var w=b.parentElement.getBoundingClientRect(),x=w.width,O=w.height;G(b,x,O)},Se=function(b,w){var x=document.createElement("canvas");return document.body.appendChild(x),G(x,b,w),x},ze=function(b,w){var x=document.createElement("canvas");return Object.assign(x.style,vt),b!==void 0&&(b.appendChild(x),ae(x)),function(O,M){av=M,O.addEventListener("webglcontextlost",te)}(x,w),x},Ye=function(b){b.width=0,b.height=0,b.remove()},st=function(b){return b.getContext("2d")},Et=function(b){var w={antialias:!0},x=b.getContext("webgl",w);return x===null&&(x=b.getContext("experimental-webgl",w)),function(O){return O instanceof WebGLRenderingContext}(x)?x:null},_t=function(b){b.canvas.removeEventListener("webglcontextlost",te);var w=b.getExtension("WEBGL_lose_context");w==null||w.loseContext()};function Rt(b){return function(w){if(Array.isArray(w))return cr(w)}(b)||function(w){if(typeof Symbol<"u"&&w[Symbol.iterator]!=null||w["@@iterator"]!=null)return Array.from(w)}(b)||Zt(b)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Kt(b,w){var x=typeof Symbol<"u"&&b[Symbol.iterator]||b["@@iterator"];if(!x){if(Array.isArray(b)||(x=Zt(b))||w){x&&(b=x);var O=0,M=function(){};return{s:M,n:function(){return O>=b.length?{done:!0}:{done:!1,value:b[O++]}},e:function(z){throw z},f:M}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I,B=!0,V=!1;return{s:function(){x=x.call(b)},n:function(){var z=x.next();return B=z.done,z},e:function(z){V=!0,I=z},f:function(){try{B||x.return==null||x.return()}finally{if(V)throw I}}}}function Zt(b,w){if(b){if(typeof b=="string")return cr(b,w);var x=Object.prototype.toString.call(b).slice(8,-1);return x==="Object"&&b.constructor&&(x=b.constructor.name),x==="Map"||x==="Set"?Array.from(b):x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x)?cr(b,w):void 0}}function cr(b,w){(w==null||w>b.length)&&(w=b.length);for(var x=0,O=new Array(w);x<w;x++)O[x]=b[x];return O}var xt=Zn*rt();function Dt(b){return Dt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},Dt(b)}function vr(b,w){var x=Object.keys(b);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(b);w&&(O=O.filter(function(M){return Object.getOwnPropertyDescriptor(b,M).enumerable})),x.push.apply(x,O)}return x}function Ft(b){for(var w=1;w<arguments.length;w++){var x=arguments[w]!=null?arguments[w]:{};w%2?vr(Object(x),!0).forEach(function(O){var M,I,B;M=b,I=O,B=x[O],I=function(V){var z=function(Y,X){if(Dt(Y)!="object"||!Y)return Y;var J=Y[Symbol.toPrimitive];if(J!==void 0){var ie=J.call(Y,"string");if(Dt(ie)!="object")return ie;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Y)}(V);return Dt(z)=="symbol"?z:String(z)}(I),I in M?Object.defineProperty(M,I,{value:B,enumerable:!0,configurable:!0,writable:!0}):M[I]=B}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(x)):vr(Object(x)).forEach(function(O){Object.defineProperty(b,O,Object.getOwnPropertyDescriptor(x,O))})}return b}var Or=function(){for(var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:50,x={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},O=0;O<b.length;O++)x.minX>b[O].x&&(x.minX=b[O].x),x.minY>b[O].y&&(x.minY=b[O].y),x.maxX<b[O].x&&(x.maxX=b[O].x),x.maxY<b[O].y&&(x.maxY=b[O].y);var M=(x.minX+x.maxX)/2,I=(x.minY+x.maxY)/2,B=2*w,V=rt()*B;return{centerX:M,centerY:I,nodesWidth:x.maxX-x.minX+B+V,nodesHeight:x.maxY-x.minY+B+V}},wr=function(b,w,x,O){var M=1/0,I=1/0;return b>1&&(M=x/b),w>1&&(I=O/w),{zoomX:M,zoomY:I}},tn=function(b,w){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,O=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1/0,M=Math.min(b,w);return Math.min(O,Math.max(x,M))},sr=function(b,w,x){var O=Or(b,arguments.length>3&&arguments[3]!==void 0?arguments[3]:50),M=O.nodesWidth,I=O.nodesHeight,B=w*rt(),V=x*rt(),z=wr(M,I,B,V),Y=z.zoomX,X=z.zoomY;return tn(Y,X)},dr=function(b,w,x,O){return Math.max(Math.min(w,x),Math.min(b,O))},xi=function(b,w,x,O,M,I){var B=w;return function(V,z,Y){return V<z&&V<Y}(M,I,w)&&b.length>1?(B=function(V,z,Y){var X=function(le){var ye=new Array(4).fill(le[0]);return le.forEach(function(Me){ye[0]=Me.x<ye[0].x?ye[0]:Ft({},Me),ye[1]=Me.y<ye[1].y?ye[1]:Ft({},Me),ye[2]=Me.x<ye[2].x?Ft({},Me):ye[2],ye[3]=Me.y<ye[3].y?Ft({},Me):ye[3]}),ye}(V),J=function(){for(var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],ye=0,Me=0,Ne=0;Ne<le.length;Ne++)for(var Ue=Ne+1;Ue<le.length;Ue++)ye=Math.hypot(Math.abs(le[Ne].x-le[Ue].x),Math.abs(le[Ne].y-le[Ue].y)),Me=Math.max(Me,ye);return Me}(X),ie=2*Y,he=rt()*ie,ge=z.height<=z.width?z.height-ie-he:z.width-ie-he;return J>ge?.9*ge/J:.9*J/ge}(b,O,25),dr(M,I,Math.min(w,B),x)):dr(M,I,w,x)};function Xn(b){return Xn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},Xn(b)}function Ro(b,w){for(var x=0;x<w.length;x++){var O=w[x];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(b,Ln(O.key),O)}}function Ln(b){var w=function(x,O){if(Xn(x)!="object"||!x)return x;var M=x[Symbol.toPrimitive];if(M!==void 0){var I=M.call(x,"string");if(Xn(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(b);return Xn(w)=="symbol"?w:String(w)}var mo=function(){function b(){var O,M,I;(function(B,V){if(!(B instanceof V))throw new TypeError("Cannot call a class as a function")})(this,b),O=this,I=void 0,(M=Ln(M="callbacks"))in O?Object.defineProperty(O,M,{value:I,enumerable:!0,configurable:!0,writable:!0}):O[M]=I,this.callbacks={}}var w,x;return w=b,x=[{key:"register",value:function(O,M){this.isCallbackRegistered(O)||(this.callbacks[O]=[]),this.callbacks[O].push(M)}},{key:"isCallbackRegistered",value:function(O){return this.callbacks[O]!==void 0}},{key:"callIfRegistered",value:function(){var O,M=arguments,I=Array.prototype.slice.call(arguments)[0];O=I,i.includes(O)&&this.isCallbackRegistered(I)&&this.callbacks[I].slice(0).forEach(function(B){return B.apply(null,Array.prototype.slice.call(M,1))})}}],x&&Ro(w.prototype,x),Object.defineProperty(w,"prototype",{writable:!1}),b}(),Ds=Mi(481),Ms=Mi.n(Ds);function vs(b){return vs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},vs(b)}function ps(b,w){for(var x=0;x<w.length;x++){var O=w[x];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(b,sv(O.key),O)}}function Ls(b,w,x){return(w=sv(w))in b?Object.defineProperty(b,w,{value:x,enumerable:!0,configurable:!0,writable:!0}):b[w]=x,b}function sv(b){var w=function(x,O){if(vs(x)!="object"||!x)return x;var M=x[Symbol.toPrimitive];if(M!==void 0){var I=M.call(x,"string");if(vs(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(b);return vs(w)=="symbol"?w:String(w)}var qf=5e-5,uv=function(){function b(O){var M,I=this,B=O.state,V=O.getNodePositions,z=O.canvas;(function(Y,X){if(!(Y instanceof X))throw new TypeError("Cannot call a class as a function")})(this,b),Ls(this,"xCtrl",void 0),Ls(this,"yCtrl",void 0),Ls(this,"zoomCtrl",void 0),Ls(this,"getNodePositions",void 0),Ls(this,"firstUpdate",void 0),Ls(this,"state",void 0),Ls(this,"canvas",void 0),Ls(this,"stateDisposers",void 0),this.state=B,this.getNodePositions=V,this.canvas=z,this.xCtrl=new(Ms())(.35,qf,.05,1),this.yCtrl=new(Ms())(.35,qf,.05,1),this.zoomCtrl=new(Ms())(.3,1e-5,.01,1),this.stateDisposers=[],this.stateDisposers.push(B.autorun(function(){B.fitNodeIds===null&&(I.xCtrl.reset(),I.yCtrl.reset(),I.zoomCtrl.reset())})),this.stateDisposers.push(B.autorun(function(){M!==B.fitNodeIds&&(M=B.fitNodeIds,I.firstUpdate=!0)})),this.stateDisposers.push(B.autorun(function(){B.resetZoom&&(I.firstUpdate=!0)}))}var w,x;return w=b,x=[{key:"needsToRun",value:function(){var O=this.state,M=O.fitNodeIds,I=O.resetZoom;return M.length>0||I}},{key:"update",value:function(O,M){var I=this.state,B=I.fitNodeIds,V=I.resetZoom;B.length>0?this.fitNodes(B,O,M):V&&this.reset(O,M)}},{key:"destroy",value:function(){this.stateDisposers.forEach(function(O){return O()})}},{key:"recalculateTarget",value:function(O,M,I,B){for(var V=this.xCtrl,z=this.yCtrl,Y=this.zoomCtrl,X=this.state,J=[],ie=0;ie<O.length;ie++)J.push({id:O[ie]});var he=X.zoom,ge=X.panX,le=X.panY,ye=X.maxNodeRadius,Me=X.nodes,Ne=X.defaultZoomLevel,Ue=this.getNodePositions(J);Me.updatePositions(Ue);var je=Or(Ue,ye),Xe=je.centerX,Ge=je.centerY,Ke=je.nodesWidth,$e=je.nodesHeight;if(isNaN(Xe)||isNaN(Ge))return zr.info("fit() function couldn't calculate center point, not updating viewport"),!1;var Ve=M.noPan,tt=M.outOnly,mt=M.minZoom,It=M.maxZoom;V.setTarget(Ve?ge:Xe),z.setTarget(Ve?le:Ge);var bt=wr(Ke,$e,I,B),jt=bt.zoomX,Ct=bt.zoomY;if(jt===1/0&&Ct===1/0)Y.setTarget(Ne);else{var Pe=tn(jt,Ct,mt,It);tt&&he<Pe?Y.setTarget(he):Y.setTarget(Pe)}return!0}},{key:"allNodesAreVisible",value:function(O,M,I){var B=wr(M,I,this.canvas.width,this.canvas.height),V=B.zoomX,z=B.zoomY;return O<V&&O<z}},{key:"reset",value:function(O,M){var I=this.xCtrl,B=this.yCtrl,V=this.zoomCtrl,z=this.state,Y=this.firstUpdate,X=this.canvas,J=z.zoom,ie=z.panX,he=z.panY,ge=z.nodes,le=z.maxNodeRadius,ye=z.defaultZoomLevel;if(Y||O){V.setTarget(ye);var Me=Or(Object.values(ge.idToPosition),le),Ne=Me.centerX,Ue=Me.centerY,je=Me.nodesWidth,Xe=Me.nodesHeight;this.allNodesAreVisible(J,je,Xe)?(I.setTarget(Ne),B.setTarget(Ue)):(I.setTarget(ie),B.setTarget(he)),this.firstUpdate=!1}var Ge=J+V.update(J),Ke=ie+I.update(ie),$e=he+B.update(he);z.updateZoomToFit(Ge,Ke,$e,X),Math.abs(V.target-Ge)<.01&&(z.updateZoomToFit(ye,Ke,$e,X),z.clearReset(),M!==void 0&&M())}},{key:"fitNodes",value:function(O,M,I){var B=this.state,V=this.firstUpdate,z=this.canvas,Y=this.xCtrl,X=this.yCtrl,J=this.zoomCtrl,ie=B.zoomOptions,he=ie===void 0?{}:ie,ge=B.zoom,le=B.panX,ye=B.panY,Me=!0;if(V||M){var Ne=z.width,Ue=z.height;Me=this.recalculateTarget(O,he,Ne,Ue),this.firstUpdate=!1}if(Me){if(!he.animated)return B.setZoomPan(J.target,Y.target,X.target,z),void B.clearFit();var je=le+Y.update(le),Xe=ye+X.update(ye),Ge=ge+J.update(ge);B.updateZoomToFit(Ge,je,Xe,z);var Ke=Math.max(5,10/J.target),$e=Math.min(.01,.01*J.target);!M&&Math.abs(J.target-Ge)<$e&&Math.abs(Y.target-je)<Ke&&Math.abs(X.target-Xe)<Ke&&(B.setZoom(J.target,z),B.clearFit(),I!==void 0&&I())}}}],x&&ps(w.prototype,x),Object.defineProperty(w,"prototype",{writable:!1}),b}();function Ns(b){return Ns=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},Ns(b)}function Fc(){Fc=function(){return w};var b,w={},x=Object.prototype,O=x.hasOwnProperty,M=Object.defineProperty||function(Pe,Te,Ae){Pe[Te]=Ae.value},I=typeof Symbol=="function"?Symbol:{},B=I.iterator||"@@iterator",V=I.asyncIterator||"@@asyncIterator",z=I.toStringTag||"@@toStringTag";function Y(Pe,Te,Ae){return Object.defineProperty(Pe,Te,{value:Ae,enumerable:!0,configurable:!0,writable:!0}),Pe[Te]}try{Y({},"")}catch{Y=function(Te,Ae,ot){return Te[Ae]=ot}}function X(Pe,Te,Ae,ot){var Ze=Te&&Te.prototype instanceof Me?Te:Me,ht=Object.create(Ze.prototype),kt=new jt(ot||[]);return M(ht,"_invoke",{value:tt(Pe,Ae,kt)}),ht}function J(Pe,Te,Ae){try{return{type:"normal",arg:Pe.call(Te,Ae)}}catch(ot){return{type:"throw",arg:ot}}}w.wrap=X;var ie="suspendedStart",he="suspendedYield",ge="executing",le="completed",ye={};function Me(){}function Ne(){}function Ue(){}var je={};Y(je,B,function(){return this});var Xe=Object.getPrototypeOf,Ge=Xe&&Xe(Xe(Ct([])));Ge&&Ge!==x&&O.call(Ge,B)&&(je=Ge);var Ke=Ue.prototype=Me.prototype=Object.create(je);function $e(Pe){["next","throw","return"].forEach(function(Te){Y(Pe,Te,function(Ae){return this._invoke(Te,Ae)})})}function Ve(Pe,Te){function Ae(Ze,ht,kt,Ut){var qt=J(Pe[Ze],Pe,ht);if(qt.type!=="throw"){var Tr=qt.arg,Ir=Tr.value;return Ir&&Ns(Ir)=="object"&&O.call(Ir,"__await")?Te.resolve(Ir.__await).then(function(Wr){Ae("next",Wr,kt,Ut)},function(Wr){Ae("throw",Wr,kt,Ut)}):Te.resolve(Ir).then(function(Wr){Tr.value=Wr,kt(Tr)},function(Wr){return Ae("throw",Wr,kt,Ut)})}Ut(qt.arg)}var ot;M(this,"_invoke",{value:function(Ze,ht){function kt(){return new Te(function(Ut,qt){Ae(Ze,ht,Ut,qt)})}return ot=ot?ot.then(kt,kt):kt()}})}function tt(Pe,Te,Ae){var ot=ie;return function(Ze,ht){if(ot===ge)throw new Error("Generator is already running");if(ot===le){if(Ze==="throw")throw ht;return{value:b,done:!0}}for(Ae.method=Ze,Ae.arg=ht;;){var kt=Ae.delegate;if(kt){var Ut=mt(kt,Ae);if(Ut){if(Ut===ye)continue;return Ut}}if(Ae.method==="next")Ae.sent=Ae._sent=Ae.arg;else if(Ae.method==="throw"){if(ot===ie)throw ot=le,Ae.arg;Ae.dispatchException(Ae.arg)}else Ae.method==="return"&&Ae.abrupt("return",Ae.arg);ot=ge;var qt=J(Pe,Te,Ae);if(qt.type==="normal"){if(ot=Ae.done?le:he,qt.arg===ye)continue;return{value:qt.arg,done:Ae.done}}qt.type==="throw"&&(ot=le,Ae.method="throw",Ae.arg=qt.arg)}}}function mt(Pe,Te){var Ae=Te.method,ot=Pe.iterator[Ae];if(ot===b)return Te.delegate=null,Ae==="throw"&&Pe.iterator.return&&(Te.method="return",Te.arg=b,mt(Pe,Te),Te.method==="throw")||Ae!=="return"&&(Te.method="throw",Te.arg=new TypeError("The iterator does not provide a '"+Ae+"' method")),ye;var Ze=J(ot,Pe.iterator,Te.arg);if(Ze.type==="throw")return Te.method="throw",Te.arg=Ze.arg,Te.delegate=null,ye;var ht=Ze.arg;return ht?ht.done?(Te[Pe.resultName]=ht.value,Te.next=Pe.nextLoc,Te.method!=="return"&&(Te.method="next",Te.arg=b),Te.delegate=null,ye):ht:(Te.method="throw",Te.arg=new TypeError("iterator result is not an object"),Te.delegate=null,ye)}function It(Pe){var Te={tryLoc:Pe[0]};1 in Pe&&(Te.catchLoc=Pe[1]),2 in Pe&&(Te.finallyLoc=Pe[2],Te.afterLoc=Pe[3]),this.tryEntries.push(Te)}function bt(Pe){var Te=Pe.completion||{};Te.type="normal",delete Te.arg,Pe.completion=Te}function jt(Pe){this.tryEntries=[{tryLoc:"root"}],Pe.forEach(It,this),this.reset(!0)}function Ct(Pe){if(Pe||Pe===""){var Te=Pe[B];if(Te)return Te.call(Pe);if(typeof Pe.next=="function")return Pe;if(!isNaN(Pe.length)){var Ae=-1,ot=function Ze(){for(;++Ae<Pe.length;)if(O.call(Pe,Ae))return Ze.value=Pe[Ae],Ze.done=!1,Ze;return Ze.value=b,Ze.done=!0,Ze};return ot.next=ot}}throw new TypeError(Ns(Pe)+" is not iterable")}return Ne.prototype=Ue,M(Ke,"constructor",{value:Ue,configurable:!0}),M(Ue,"constructor",{value:Ne,configurable:!0}),Ne.displayName=Y(Ue,z,"GeneratorFunction"),w.isGeneratorFunction=function(Pe){var Te=typeof Pe=="function"&&Pe.constructor;return!!Te&&(Te===Ne||(Te.displayName||Te.name)==="GeneratorFunction")},w.mark=function(Pe){return Object.setPrototypeOf?Object.setPrototypeOf(Pe,Ue):(Pe.__proto__=Ue,Y(Pe,z,"GeneratorFunction")),Pe.prototype=Object.create(Ke),Pe},w.awrap=function(Pe){return{__await:Pe}},$e(Ve.prototype),Y(Ve.prototype,V,function(){return this}),w.AsyncIterator=Ve,w.async=function(Pe,Te,Ae,ot,Ze){Ze===void 0&&(Ze=Promise);var ht=new Ve(X(Pe,Te,Ae,ot),Ze);return w.isGeneratorFunction(Te)?ht:ht.next().then(function(kt){return kt.done?kt.value:ht.next()})},$e(Ke),Y(Ke,z,"Generator"),Y(Ke,B,function(){return this}),Y(Ke,"toString",function(){return"[object Generator]"}),w.keys=function(Pe){var Te=Object(Pe),Ae=[];for(var ot in Te)Ae.push(ot);return Ae.reverse(),function Ze(){for(;Ae.length;){var ht=Ae.pop();if(ht in Te)return Ze.value=ht,Ze.done=!1,Ze}return Ze.done=!0,Ze}},w.values=Ct,jt.prototype={constructor:jt,reset:function(Pe){if(this.prev=0,this.next=0,this.sent=this._sent=b,this.done=!1,this.delegate=null,this.method="next",this.arg=b,this.tryEntries.forEach(bt),!Pe)for(var Te in this)Te.charAt(0)==="t"&&O.call(this,Te)&&!isNaN(+Te.slice(1))&&(this[Te]=b)},stop:function(){this.done=!0;var Pe=this.tryEntries[0].completion;if(Pe.type==="throw")throw Pe.arg;return this.rval},dispatchException:function(Pe){if(this.done)throw Pe;var Te=this;function Ae(qt,Tr){return ht.type="throw",ht.arg=Pe,Te.next=qt,Tr&&(Te.method="next",Te.arg=b),!!Tr}for(var ot=this.tryEntries.length-1;ot>=0;--ot){var Ze=this.tryEntries[ot],ht=Ze.completion;if(Ze.tryLoc==="root")return Ae("end");if(Ze.tryLoc<=this.prev){var kt=O.call(Ze,"catchLoc"),Ut=O.call(Ze,"finallyLoc");if(kt&&Ut){if(this.prev<Ze.catchLoc)return Ae(Ze.catchLoc,!0);if(this.prev<Ze.finallyLoc)return Ae(Ze.finallyLoc)}else if(kt){if(this.prev<Ze.catchLoc)return Ae(Ze.catchLoc,!0)}else{if(!Ut)throw new Error("try statement without catch or finally");if(this.prev<Ze.finallyLoc)return Ae(Ze.finallyLoc)}}}},abrupt:function(Pe,Te){for(var Ae=this.tryEntries.length-1;Ae>=0;--Ae){var ot=this.tryEntries[Ae];if(ot.tryLoc<=this.prev&&O.call(ot,"finallyLoc")&&this.prev<ot.finallyLoc){var Ze=ot;break}}Ze&&(Pe==="break"||Pe==="continue")&&Ze.tryLoc<=Te&&Te<=Ze.finallyLoc&&(Ze=null);var ht=Ze?Ze.completion:{};return ht.type=Pe,ht.arg=Te,Ze?(this.method="next",this.next=Ze.finallyLoc,ye):this.complete(ht)},complete:function(Pe,Te){if(Pe.type==="throw")throw Pe.arg;return Pe.type==="break"||Pe.type==="continue"?this.next=Pe.arg:Pe.type==="return"?(this.rval=this.arg=Pe.arg,this.method="return",this.next="end"):Pe.type==="normal"&&Te&&(this.next=Te),ye},finish:function(Pe){for(var Te=this.tryEntries.length-1;Te>=0;--Te){var Ae=this.tryEntries[Te];if(Ae.finallyLoc===Pe)return this.complete(Ae.completion,Ae.afterLoc),bt(Ae),ye}},catch:function(Pe){for(var Te=this.tryEntries.length-1;Te>=0;--Te){var Ae=this.tryEntries[Te];if(Ae.tryLoc===Pe){var ot=Ae.completion;if(ot.type==="throw"){var Ze=ot.arg;bt(Ae)}return Ze}}throw new Error("illegal catch attempt")},delegateYield:function(Pe,Te,Ae){return this.delegate={iterator:Ct(Pe),resultName:Te,nextLoc:Ae},this.method==="next"&&(this.arg=b),ye}},w}function lv(b,w,x,O,M,I,B){try{var V=b[I](B),z=V.value}catch(Y){return void x(Y)}V.done?w(z):Promise.resolve(z).then(O,M)}function zf(b,w){(w==null||w>b.length)&&(w=b.length);for(var x=0,O=new Array(w);x<w;x++)O[x]=b[x];return O}function Gf(b,w){var x=Object.keys(b);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(b);w&&(O=O.filter(function(M){return Object.getOwnPropertyDescriptor(b,M).enumerable})),x.push.apply(x,O)}return x}function _a(b){for(var w=1;w<arguments.length;w++){var x=arguments[w]!=null?arguments[w]:{};w%2?Gf(Object(x),!0).forEach(function(O){Mr(b,O,x[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(x)):Gf(Object(x)).forEach(function(O){Object.defineProperty(b,O,Object.getOwnPropertyDescriptor(x,O))})}return b}function tb(b,w){for(var x=0;x<w.length;x++){var O=w[x];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(b,Wy(O.key),O)}}function Mr(b,w,x){return(w=Wy(w))in b?Object.defineProperty(b,w,{value:x,enumerable:!0,configurable:!0,writable:!0}):b[w]=x,b}function Wy(b){var w=function(x,O){if(Ns(x)!="object"||!x)return x;var M=x[Symbol.toPrimitive];if(M!==void 0){var I=M.call(x,"string");if(Ns(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(b);return Ns(w)=="symbol"?w:String(w)}var Ap="NvlController",Rg={filename:"visualisation.png",backgroundColor:"rgba(0,0,0,0)"},Kh="onError",Hy="onLayoutDone",Yy="onLayoutStep",Rp={},cv=function(){var b;return(b=Rp[arguments.length>0&&arguments[0]!==void 0?arguments[0]:"default"])!==null&&b!==void 0?b:Object.values(Rp).pop()},rb=function(){function b(I,B){var V,z,Y,X=this;(function(Te,Ae){if(!(Te instanceof Ae))throw new TypeError("Cannot call a class as a function")})(this,b),Mr(this,"destroyed",void 0),Mr(this,"state",void 0),Mr(this,"callbacks",void 0),Mr(this,"instanceId",void 0),Mr(this,"glController",void 0),Mr(this,"webGLContext",void 0),Mr(this,"webGLMinimapContext",void 0),Mr(this,"htmlOverlay",void 0),Mr(this,"hasResized",void 0),Mr(this,"hierarchicalLayout",void 0),Mr(this,"gridLayout",void 0),Mr(this,"freeLayout",void 0),Mr(this,"d3ForceLayout",void 0),Mr(this,"forceLayout",void 0),Mr(this,"canvasRenderer",void 0),Mr(this,"glCanvas",void 0),Mr(this,"canvasRect",void 0),Mr(this,"glMinimapCanvas",void 0),Mr(this,"c2dCanvas",void 0),Mr(this,"isInRenderSwitchAnimation",void 0),Mr(this,"justSwitchedRenderer",void 0),Mr(this,"justSwitchedLayout",void 0),Mr(this,"layoutUpdating",void 0),Mr(this,"layoutComputing",void 0),Mr(this,"isRenderingDisabled",void 0),Mr(this,"setRenderSwitchAnimation",void 0),Mr(this,"stateDisposers",void 0),Mr(this,"zoomTransitionHandler",void 0),Mr(this,"currentLayout",void 0),Mr(this,"layoutTimeLimit",void 0),Mr(this,"pixelRatio",void 0),Mr(this,"removeResizeListener",void 0),Mr(this,"removeMinimapResizeListener",void 0),Mr(this,"pendingZoomOperation",void 0),Mr(this,"layoutRunner",void 0),Mr(this,"animationRequestId",void 0),Mr(this,"layoutDoneCallback",void 0),Mr(this,"layoutComputingCallback",void 0),Mr(this,"currentLayoutType",void 0),Mr(this,"descriptionElement",void 0),this.destroyed=!1;var J=B.frame,ie=B.minimapContainer,he=ie===void 0?document.createElement("span"):ie,ge=B.layoutOptions,le=B.layout,ye=B.instanceId,Me=ye===void 0?"default":ye,Ne=B.disableAria,Ue=Ne!==void 0&&Ne,je=I.nodes,Xe=I.rels,Ge=I.webGLVisible,Ke=I.disableWebGL;this.state=I,this.callbacks=new mo,this.instanceId=Me;var $e=J;$e.setAttribute("instanceId",Me),$e.setAttribute("data-testid","nvl-parent"),(V=$e.style.height)!==null&&V!==void 0&&V.length||Object.assign($e.style,{height:"100%"}),(z=$e.style.outline)!==null&&z!==void 0&&z.length||Object.assign($e.style,{outline:"none"}),this.descriptionElement=Ue?document.createElement("div"):function(Te,Ae){var ot;Te.setAttribute("role","img"),Te.setAttribute("aria-label","Graph visualization");var Ze="nvl-".concat(Ae,"-description"),ht=(ot=document.getElementById(Ze))!==null&&ot!==void 0?ot:document.createElement("div");return ht.innerHTML="",ht.id="nvl-".concat(Ae,"-description"),ht.setAttribute("role","status"),ht.setAttribute("aria-live","polite"),ht.setAttribute("aria-atomic","false"),ht.style.display="none",Te.appendChild(ht),Te.setAttribute("aria-describedby",ht.id),ht}($e,Me);var Ve=ze($e,this.onWebGLContextLost.bind(this)),tt=ze(he,this.onWebGLContextLost.bind(this));if(Ve.setAttribute("data-testid","nvl-gl-canvas"),Ke)this.glController=new nv;else{var mt=Et(Ve),It=Et(tt);this.glController=new $h({mainSceneRenderer:new N(mt,je,Xe,this.state),minimapRenderer:new N(It,je,Xe,this.state),state:I}),this.webGLContext=mt,this.webGLMinimapContext=It}var bt=ze($e,this.onWebGLContextLost.bind(this));bt.setAttribute("data-testid","nvl-c2d-canvas");var jt=bt.getContext("2d"),Ct=document.createElement("div");Object.assign(Ct.style,_a(_a({},vt),{},{overflow:"hidden"})),$e.appendChild(Ct),this.htmlOverlay=Ct,this.hasResized=!0,this.hierarchicalLayout=new Tg(_a(_a({},ge),{},{state:this.state})),this.gridLayout=new Sc({state:this.state}),this.freeLayout=new xl({state:this.state}),this.d3ForceLayout=new Cd({state:this.state}),this.forceLayout=Ke?this.d3ForceLayout:new fp(_a(_a({},ge),{},{webGLContext:this.webGLContext,state:this.state})),this.state.setLayout(le),this.state.setLayoutOptions(ge);var Pe=new ev(bt,jt,I,B);this.canvasRenderer=Pe,this.glCanvas=Ve,this.canvasRect=Ve.getBoundingClientRect(),this.glMinimapCanvas=tt,this.c2dCanvas=bt,this.glCanvas.style.opacity=Ge?"1":"0",this.c2dCanvas.style.opacity=Ge?"0":"1",this.isInRenderSwitchAnimation=!1,this.justSwitchedRenderer=!1,this.justSwitchedLayout=!1,this.hasResized=!1,this.layoutUpdating=!1,this.layoutComputing=!1,this.isRenderingDisabled=!1,je.addChannel(Ap),Xe.addChannel(Ap),this.setRenderSwitchAnimation=function(){X.isInRenderSwitchAnimation=!1},this.stateDisposers=[],this.stateDisposers.push(I.autorun(function(){X.callIfRegistered("zoom",I.zoom)})),this.stateDisposers.push(I.autorun(function(){X.callIfRegistered("pan",{panX:I.panX,panY:I.panY})})),this.stateDisposers.push(I.autorun(function(){X.setLayout(I.layout)})),this.stateDisposers.push(I.autorun(function(){X.setLayoutOptions(I.layoutOptions)})),Ue||this.stateDisposers.push(I.autorun(function(){(function(Te,Ae){var ot=Te.nodes,Ze=Te.rels,ht=Te.layout,kt=ot.items.length,Ut=Ze.items.length;if(kt!==0||Ut!==0){var qt="".concat(kt," node").concat(kt!==1?"s":""),Tr="".concat(Ut," relationship").concat(Ut!==1?"s":""),Ir="displayed using a ".concat(ht??"forceDirected"," layout");Ae.innerHTML="A graph visualization with ".concat(qt," and ").concat(Tr,", ").concat(Ir,".")}else Ae.innerHTML="An empty graph visualization."})(I,X.descriptionElement)})),this.stateDisposers.push(I.autorun(function(){var Te=I.webGLVisible?"1":"0";Te!==X.glCanvas.style.opacity&&(X.justSwitchedRenderer=!0,X.glCanvas.style.opacity=Te,X.c2dCanvas.style.opacity=I.webGLVisible?"0":"1")})),this.startMainLoop(),this.zoomTransitionHandler=new uv({state:I,getNodePositions:function(Te){return X.currentLayout.getNodePositions(Te)},canvas:Ve}),this.layoutTimeLimit=(Y=B.layoutTimeLimit)!==null&&Y!==void 0?Y:16,this.pixelRatio=rt(),this.removeResizeListener=gn()($e,function(){ae(Ve),ae(bt),X.canvasRect=Ve.getBoundingClientRect(),X.hasResized=!0}),this.removeMinimapResizeListener=gn()(he,function(){ae(tt)}),Rp[Me]=this,window.__Nvl_dumpNodes=function(Te){var Ae;return(Ae=cv(Te))===null||Ae===void 0?void 0:Ae.dumpNodes()},window.__Nvl_dumpRelationships=function(Te){var Ae;return(Ae=cv(Te))===null||Ae===void 0?void 0:Ae.dumpRelationships()},window.__Nvl_registerDoneCallback=function(Te,Ae){var ot;return(ot=cv(Ae))===null||ot===void 0?void 0:ot.on(Hy,Te)},window.__Nvl_getNodesOnScreen=function(Te){var Ae;return(Ae=cv(Te))===null||Ae===void 0?void 0:Ae.getNodesOnScreen()},window.__Nvl_getZoomLevel=function(Te){var Ae;return(Ae=cv(Te))===null||Ae===void 0?void 0:Ae.getScale()},this.pendingZoomOperation=null}var w,x,O,M;return w=b,x=[{key:"onWebGLContextLost",value:function(I){this.callIfRegistered("onWebGLContextLost",I)}},{key:"updateMinimapZoom",value:function(){var I=this.state,B=I.nodes,V=I.maxNodeRadius,z=I.maxMinimapZoom,Y=I.minMinimapZoom,X=Or(Object.values(B.idToPosition),V),J=X.centerX,ie=X.centerY,he=X.nodesWidth,ge=X.nodesHeight,le=wr(he,ge,this.glMinimapCanvas.width,this.glMinimapCanvas.height),ye=le.zoomX,Me=le.zoomY,Ne=tn(ye,Me,Y,z);this.state.updateMinimapZoomToFit(Ne,J,ie)}},{key:"startMainLoop",value:function(){var I=this,B=this.state,V=B.nodes,z=B.rels;this.currentLayout.update();var Y=this.currentLayout.getNodePositions(V.items);V.updatePositions(Y),this.isRenderingDisabled||(this.glController.renderMainScene(Y),this.glController.renderMinimap(Y),this.canvasRenderer.processUpdates(),this.canvasRenderer.render(Y)),this.layoutRunner=setInterval(function(){try{(function(){var X=I.currentLayout.getShouldUpdate(),J=X||I.justSwitchedLayout,ie=J&&!I.layoutUpdating&&!I.justSwitchedLayout;if(J)for(var he=window.performance.now(),ge=ie?0:50,le=0;le<ge;le++){I.currentLayout.update(I.justSwitchedLayout),I.justSwitchedLayout=!1;var ye=window.performance.now();if(!X||ye-he>I.layoutTimeLimit)break}})()}catch(X){if(!I.callbacks.isCallbackRegistered(Kh))throw X;I.callIfRegistered(Kh,X)}},13),this.animationRequestId=window.requestAnimationFrame(function X(){try{(function(J){if(I.destroyed)zr.info("STEP IN A DESTROYED STRIP");else{var ie=rt();if(ie!==I.pixelRatio)return I.pixelRatio=ie,void I.callIfRegistered("restart");var he=I.currentLayout.getShouldUpdate(),ge=he||I.justSwitchedLayout,le=I.currentLayout.getComputing(),ye=I.zoomTransitionHandler.needsToRun(),Me=ge&&!I.layoutUpdating&&!I.justSwitchedLayout,Ne=I.layoutComputing&&!le,Ue=I.state.webGLVisible&&I.glController.needsToRun(),je=!I.state.webGLVisible&&I.canvasRenderer.needsToRun(),Xe=I.isInRenderSwitchAnimation||I.justSwitchedRenderer,Ge=I.hasResized,Ke=I.pendingZoomOperation!==null,$e=I.glController.minimapMouseDown;if(V.clearChannel(Ap),z.clearChannel(Ap),ye||ge||Ne||Xe||Ue||je||$e||Ge||Ke){!Ke||Me||I.currentLayout.getComputing()||(I.pendingZoomOperation(),I.pendingZoomOperation=null);var Ve=he||le||Ne;I.zoomTransitionHandler.update(Ve,function(){return I.callIfRegistered("onZoomTransitionDone")}),Ge&&I.glController.onResize();var tt=I.currentLayout.getNodePositions(V.items);if(V.updatePositions(tt),I.callbacks.isCallbackRegistered(Yy)&&I.callIfRegistered(Yy,I.dumpNodes()),I.updateMinimapZoom(),I.glController.renderMinimap(tt),!I.isRenderingDisabled){if((I.state.webGLVisible||Xe)&&I.glController.renderMainScene(tt),!I.state.webGLVisible||Xe){I.canvasRenderer.processUpdates(),I.canvasRenderer.render(tt);for(var mt=0;mt<z.items.length;mt++){var It=z.items[mt].id,bt=I.canvasRenderer.arrowBundler.getBundle(z.items[mt]),jt=z.idToHtmlOverlay[It],Ct=bt.labelInfo[It];if(jt&&Ct){var Pe=Ct.rotation,Te=Ct.position,Ae=Ct.width,ot=Ct.height,Ze=I.mapCanvasSpaceToRelativePosition(Te.x,Te.y),ht=Ze.x,kt=Ze.y,Ut=Ae>5&&!I.state.webGLVisible;Object.assign(jt.style,{top:"".concat(kt,"px"),left:"".concat(ht,"px"),width:"".concat(Ae,"px"),height:"".concat(ot,"px"),display:Ut?"block":"none",transform:"translate(-50%, -50%) scale(".concat(Number(I.state.zoom),") rotate(").concat(Pe,"rad")})}}}for(var qt=0;qt<V.items.length;qt++){var Tr=V.items[qt],Ir=Tr.id,Wr=Tr.size,On=V.idToHtmlOverlay[Ir];if(On){var jn=I.state.nodes.idToPosition[Ir],yn=I.mapCanvasSpaceToRelativePosition(jn.x,jn.y),Zr=yn.x,Hr=yn.y,sn="".concat(2*(Wr??Zn),"px");Object.assign(On.style,{top:"".concat(Hr,"px"),left:"".concat(Zr,"px"),width:sn,height:sn,transform:"translate(-50%, -50%) scale(".concat(Number(I.state.zoom),")")})}}}}var mn=!ge&&I.layoutUpdating,ti=le!==I.layoutComputing;I.layoutComputing=le,I.layoutUpdating=ge,mn&&I.callIfRegistered(Hy),ti&&I.callIfRegistered("onLayoutComputing",le),I.justSwitchedRenderer=!1,I.hasResized=!1,J!==void 0&&J()}})(function(){I.animationRequestId=window.requestAnimationFrame(X)})}catch(J){if(!I.callbacks.isCallbackRegistered(Kh))throw J;I.callIfRegistered(Kh,J)}})}},{key:"updateHtmlOverlay",value:function(){this.state.nodes.updateHtmlOverlay(this.htmlOverlay),this.state.rels.updateHtmlOverlay(this.htmlOverlay)}},{key:"dumpNodes",value:function(){var I,B=this.state.nodes.items,V=this.state.nodes.idToPosition,z=[],Y=function(he,ge){var le=typeof Symbol<"u"&&he[Symbol.iterator]||he["@@iterator"];if(!le){if(Array.isArray(he)||(le=function(Xe,Ge){if(Xe){if(typeof Xe=="string")return zf(Xe,Ge);var Ke=Object.prototype.toString.call(Xe).slice(8,-1);return Ke==="Object"&&Xe.constructor&&(Ke=Xe.constructor.name),Ke==="Map"||Ke==="Set"?Array.from(Xe):Ke==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ke)?zf(Xe,Ge):void 0}}(he))||ge){le&&(he=le);var ye=0,Me=function(){};return{s:Me,n:function(){return ye>=he.length?{done:!0}:{done:!1,value:he[ye++]}},e:function(Xe){throw Xe},f:Me}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ne,Ue=!0,je=!1;return{s:function(){le=le.call(he)},n:function(){var Xe=le.next();return Ue=Xe.done,Xe},e:function(Xe){je=!0,Ne=Xe},f:function(){try{Ue||le.return==null||le.return()}finally{if(je)throw Ne}}}}(B);try{for(Y.s();!(I=Y.n()).done;){var X=I.value,J=V[X.id],ie=this.mapCanvasSpaceToRelativePosition(J.x,J.y);z.push(_a(_a({},X),{},{x:ie.x,y:ie.y}))}}catch(he){Y.e(he)}finally{Y.f()}return z}},{key:"dumpRelationships",value:function(){return gt(this.state.rels.items)}},{key:"mapCanvasSpaceToRelativePosition",value:function(I,B){var V=this.canvasRect,z=window.devicePixelRatio||1,Y=(I-this.state.panX)*this.state.zoom/z,X=(B-this.state.panY)*this.state.zoom/z;return{x:Y+.5*V.width,y:X+.5*V.height}}},{key:"mapRelativePositionToCanvasSpace",value:function(I,B){var V=this.glCanvas.getBoundingClientRect(),z=window.devicePixelRatio||1,Y=z*(I-.5*V.width),X=z*(B-.5*V.height);return{x:this.state.panX+Y/this.state.zoom,y:this.state.panY+X/this.state.zoom}}},{key:"getNodePositions",value:function(){return Object.values(gt(this.state.nodes.idToPosition))}},{key:"setNodePositions",value:function(I){var B=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.state.nodes.updatePositions(I),this.currentLayout.updateNodes(I),B||this.currentLayout.terminateUpdate(),this.hasResized=!0,this.getNodesOnScreen().nodes.length===0&&this.state.setPan(0,0),this.state.clearFit()}},{key:"isLayoutMoving",value:function(){return this.layoutUpdating}},{key:"getNodesOnScreen",value:function(){var I=this.glCanvas.getBoundingClientRect(),B=this.mapRelativePositionToCanvasSpace(0,0),V=B.x,z=B.y,Y=this.mapRelativePositionToCanvasSpace(I.width,I.height);return function(X,J,ie,he,ge){var le=arguments.length>5&&arguments[5]!==void 0?arguments[5]:["node"],ye=ge.nodes,Me=ge.rels,Ne=Math.min(X,ie),Ue=Math.max(X,ie),je=Math.min(J,he),Xe=Math.max(J,he),Ge=[],Ke=[];if(le.includes("node"))for(var $e=0,Ve=Object.values(ye.idToPosition);$e<Ve.length;$e++){var tt=Ve[$e],mt=tt.x,It=tt.y;mt!==void 0&&It!==void 0&&mt>Ne&&mt<Ue&&It>je&&It<Xe&&Ge.push(tt)}if(le.includes("relationship")){var bt,jt=Kt(Me.items);try{for(jt.s();!(bt=jt.n()).done;){var Ct=bt.value,Pe=Ct.from,Te=Ct.to,Ae=ye.idToPosition[Pe],ot=ye.idToPosition[Te];if(Ae.x!==void 0&&Ae.y!==void 0&&ot.x!==void 0&&ot.y!==void 0){var Ze=Ae.x>Ne&&Ae.x<Ue&&Ae.y>je&&Ae.y<Xe,ht=ot.x>Ne&&ot.x<Ue&&ot.y>je&&ot.y<Xe;Ze&&ht&&Ke.push(Ct)}}}catch(kt){jt.e(kt)}finally{jt.f()}}return{nodes:Ge,rels:Ke}}(V,z,Y.x,Y.y,this.state,["node"])}},{key:"registerDoneCallback",value:function(I){this.layoutDoneCallback=I}},{key:"registerComputingCallback",value:function(I){this.layoutComputingCallback=I}},{key:"getPosition",value:function(I){return this.currentLayout.getNodePositions([{id:I}])[0]}},{key:"getScale",value:function(){return this.state.zoom}},{key:"getPan",value:function(){return{x:this.state.panX,y:this.state.panY}}},{key:"setZoomLevel",value:function(I){var B=this;this.pendingZoomOperation=function(){return B.state.setZoom(I,B.glCanvas)}}},{key:"setPanCoordinates",value:function(I,B){this.state.setPan(I,B)}},{key:"setZoomAndPan",value:function(I,B,V){var z=this;this.pendingZoomOperation=function(){return z.state.setZoomPan(I,B,V,z.glCanvas)}}},{key:"fit",value:function(I,B){var V=this;this.pendingZoomOperation=function(){return V.state.fitNodes(I,B)}}},{key:"resetZoom",value:function(){var I=this;this.pendingZoomOperation=function(){return I.state.setZoomReset()}}},{key:"setRenderer",value:function(I){this.state.setRenderer(I)}},{key:"on",value:function(I,B){this.callbacks.register(I,B)}},{key:"isDestroyed",value:function(){return this.destroyed}},{key:"destroy",value:function(){var I;this.destroyed||(this.animationRequestId&&window.cancelAnimationFrame(this.animationRequestId),this.layoutRunner!==void 0&&window.clearInterval(this.layoutRunner),this.glController.destroy(),this.glCanvas.removeEventListener("transitionend",this.setRenderSwitchAnimation),this.webGLContext!==void 0&&_t(this.webGLContext),this.webGLMinimapContext!==void 0&&_t(this.webGLMinimapContext),Ye(this.glCanvas),Ye(this.glMinimapCanvas),this.canvasRenderer.destroy(),Ye(this.c2dCanvas),this.removeResizeListener(),this.removeMinimapResizeListener(),this.forceLayout.destroy(),this.hierarchicalLayout.destroy(),this.gridLayout.destroy(),this.freeLayout.destroy(),this.htmlOverlay.remove(),this.descriptionElement.remove(),this.zoomTransitionHandler.destroy(),this.stateDisposers.forEach(function(B){B()}),I=this.instanceId,delete Rp[I],this.destroyed=!0)}},{key:"callIfRegistered",value:function(){for(var I=arguments.length,B=new Array(I),V=0;V<I;V++)B[V]=arguments[V];this.callbacks.callIfRegistered.apply(this.callbacks,arguments)}},{key:"getCanvasRelsAt",value:function(I){return this.canvasRenderer.getRelsAt(I)}},{key:"getCanvasNodesAt",value:function(I){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this.canvasRenderer.getNodesAt(I,B)}},{key:"getLayout",value:function(I){return I===Sl?this.hierarchicalLayout:I===Sh?this.forceLayout:I===xf?this.gridLayout:I===Id?this.freeLayout:I===as?this.d3ForceLayout:this.forceLayout}},{key:"setLayout",value:function(I){zr.info("Switching to layout: ".concat(I));var B=this.currentLayoutType,V=this.getLayout(I);I==="free"&&V.setNodePositions(this.state.nodes.idToPosition),this.currentLayout=V,this.currentLayoutType=I,B&&B!==this.currentLayoutType&&(this.justSwitchedLayout=!0)}},{key:"setLayoutOptions",value:function(I){this.getLayout(this.state.layout).setOptions(I)}},{key:"createDownloadLink",value:function(I,B){var V=document.createElement("a");V.style.display="none",V.setAttribute("download",I);var z=B.toDataURL("image/png").replace(/^data:image\/png/,"data:application/octet-stream");return V.setAttribute("href",z),V}},{key:"saveToFile",value:function(I){var B=_a(_a({},Rg),I),V=B.filename,z=B.backgroundColor,Y=this.state.nodes.items;this.currentLayout.update(this.justSwitchedLayout),this.justSwitchedLayout=!1;var X=this.currentLayout.getNodePositions(Y);this.state.nodes.updatePositions(X);var J=Se(this.c2dCanvas.width,this.c2dCanvas.height),ie=st(J);this.canvasRenderer.processUpdates(),this.canvasRenderer.render(X,{canvas:J,context:ie,backgroundColor:z,ignoreAnimations:!0}),this.createDownloadLink(V,J).click(),Ye(J),J=null,ie=null}},{key:"prepareLargeFileForDownload",value:function(I){var B=this,V=_a(_a({},Rg),I),z=this.state.nodes.items,Y=V.filename,X=V.backgroundColor,J=this.currentLayout.getNodePositions(z),ie=Or(J,100),he=ie.nodesWidth,ge=ie.nodesHeight,le=ie.centerX,ye=ie.centerY,Me=Math.max(Math.min(he+100,15e3),5e3),Ne=Math.max(Math.min(ge+100,15e3),5e3);return this.isRenderingDisabled=!0,new Promise(function(Ue,je){try{B.setPanCoordinates(le,ye);var Xe=Math.max(Me/he-.02,B.state.minZoom),Ge=Math.max(Ne/ge-.02,B.state.minZoom);B.setZoomLevel(Math.min(Xe,Ge))}catch(Ke){return zr.error("An error occurred while downloading the file"),void je(Ke)}setTimeout(function(){try{B.currentLayout.update(B.justSwitchedLayout),B.justSwitchedLayout=!1,B.state.nodes.updatePositions(J);var Ke=Se(Me,Ne),$e=st(Ke);B.canvasRenderer.processUpdates(),B.canvasRenderer.render(J,{canvas:Ke,context:$e,backgroundColor:X,ignoreAnimations:!0,showCaptions:!0}),B.createDownloadLink(Y,Ke).click(),Ye(Ke),Ke=null,$e=null,Ue(!0)}catch(Ve){je(Ve)}},500)})}},{key:"saveFullGraphToLargeFile",value:(O=Fc().mark(function I(B){var V,z,Y,X;return Fc().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return V=_a(_a({},Rg),B),z=this.state.zoom,Y=this.state.panX,X=this.state.panY,J.prev=4,J.next=7,this.prepareLargeFileForDownload(V);case 7:J.next=17;break;case 9:if(J.prev=9,J.t0=J.catch(4),zr.error("An error occurred while downloading the image"),!this.callbacks.isCallbackRegistered(Kh)){J.next=16;break}this.callIfRegistered(Kh,J.t0),J.next=17;break;case 16:throw J.t0;case 17:return J.prev=17,this.isRenderingDisabled=!1,this.setZoomLevel(z),this.setPanCoordinates(Y,X),J.finish(17);case 22:case"end":return J.stop()}},I,this,[[4,9,17,22]])}),M=function(){var I=this,B=arguments;return new Promise(function(V,z){var Y=O.apply(I,B);function X(ie){lv(Y,V,z,X,J,"next",ie)}function J(ie){lv(Y,V,z,X,J,"throw",ie)}X(void 0)})},function(I){return M.apply(this,arguments)})}],x&&tb(w.prototype,x),Object.defineProperty(w,"prototype",{writable:!1}),b}();function fv(b){return fv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},fv(b)}function Ip(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")}function nb(b,w){for(var x=0;x<w.length;x++){var O=w[x];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(b,ib(O.key),O)}}function kp(b,w,x){return w&&nb(b.prototype,w),Object.defineProperty(b,"prototype",{writable:!1}),b}function ib(b){var w=function(x,O){if(fv(x)!="object"||!x)return x;var M=x[Symbol.toPrimitive];if(M!==void 0){var I=M.call(x,"string");if(fv(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(b);return fv(w)=="symbol"?w:String(w)}var Ig=function(){function b(w,x){if(Ip(this,b),!w)throw new Error("Tried to create a node with no data");this.data=w,this.parent=x,this.children=[]}return kp(b,[{key:"addChild",value:function(w){this.children.push(w)}},{key:"isRoot",value:function(){return this.parent===null}},{key:"print",value:function(){var w=this.data.name;this.isRoot()||(w="".concat(w,"		").concat(function(M){for(var I=(Math.round(1e3*M)/1e3).toFixed(3);I.length<6;)I=" ".concat(I);return I}(this.data._timeSpent())," ms"),this.parent.isRoot()||(w="".concat(w,"	").concat(this._percentageOfParentSpent(),"%")));var x=this.noOfChildren()>0;for(var O in x&&(w="".concat(w,"	 Children: ").concat(this.noOfChildren()),console.groupCollapsed(w)),this.children)this.children[O].print();x&&console.groupEnd()}},{key:"noOfChildren",value:function(){return this.children.length}},{key:"_percentageOfParentSpent",value:function(){return Math.round(this.data._timeSpent()/this.parent.data._timeSpent()*100)}}]),b}(),Xy=function(){function b(w){Ip(this,b),this.name=w,this.startTime=performance.now(),this.endTime=null}return kp(b,[{key:"close",value:function(){this.endTime=performance.now()}},{key:"_timeSpent",value:function(){if(this.startTime===null||this.endTime===null)throw new Error("You have an error in your performance measurements that makes the whole tree unreliable. You probably forgot to call performanceTestEnd on ".concat(this.name));return this.endTime-this.startTime}}]),b}(),$y=function(){function b(){Ip(this,b),this.root=new Ig(new Xy("Performance Tree"),null),this.current=this.root}return kp(b,[{key:"clear",value:function(){this.root.children=[],this.current=this.root}},{key:"add",value:function(w){if(this.current){var x=new Ig(w,this.current);this.current.addChild(x),this.current=x}else{if(this.root)throw new Error("Performance tree is screwed up");this.root=new Ig(w,null),this.current=this.root}}},{key:"close",value:function(){if(this.current.isRoot())throw new Error("Tried to close performance tree root. You probably have one too many Performance.endTest() in your code.");this.current.data.close(),this.current=this.current.parent}},{key:"getCurrentData",value:function(){return this.current.data}},{key:"print",value:function(){this.root.noOfChildren()>0&&this.root.print()}}]),b}(),Ky=function(){function b(){Ip(this,b),window.performance?(this.disabled=!1,this.tree=new $y):(this.disabled=!0,this.tree=null)}return kp(b,[{key:"startTest",value:function(w){if(!this.disabled){var x,O=w||(x=(x=new Error().stack.split(`
`)[3].trim()).split(" ")[0]==="at"?x.split(" ")[1]:x.split("@")[0]),M=new Xy(O);this.tree.add(M)}}},{key:"endTest",value:function(){this.disabled||this.tree.close()}},{key:"reset",value:function(){this.disabled||this.tree.clear()}},{key:"print",value:function(){this.disabled||this.tree.print()}}]),b}();function Dp(b,w){var x=typeof Symbol<"u"&&b[Symbol.iterator]||b["@@iterator"];if(!x){if(Array.isArray(b)||(x=function(z,Y){if(z){if(typeof z=="string")return Zy(z,Y);var X=Object.prototype.toString.call(z).slice(8,-1);return X==="Object"&&z.constructor&&(X=z.constructor.name),X==="Map"||X==="Set"?Array.from(z):X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X)?Zy(z,Y):void 0}}(b))||w){x&&(b=x);var O=0,M=function(){};return{s:M,n:function(){return O>=b.length?{done:!0}:{done:!1,value:b[O++]}},e:function(z){throw z},f:M}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I,B=!0,V=!1;return{s:function(){x=x.call(b)},n:function(){var z=x.next();return B=z.done,z},e:function(z){V=!0,I=z},f:function(){try{B||x.return==null||x.return()}finally{if(V)throw I}}}}function Zy(b,w){(w==null||w>b.length)&&(w=b.length);for(var x=0,O=new Array(w);x<w;x++)O[x]=b[x];return O}function ob(b){this.channels[b]={adds:{},updates:{},removes:{}}}function ab(b){delete this.channels[b]}function Mp(b){this.channels[b].adds={},this.channels[b].updates={},this.channels[b].removes={}}var Qy=function(b){return"html"in b?b.html:"captionHtml"in b?b.captionHtml:void 0};function sb(b,w){var x,O=!1,M=Dp(b);try{for(M.s();!(x=M.n()).done;){var I=x.value,B=I.id;if(this.idToItem[B]===void 0){if(I=(0,r.cloneDeep)(I),this.items.push(I),this.idToItem[B]=I,this.idToPosition[B]={id:B,x:0,y:0},"x"in I&&"y"in I){var V=I,z=V.x,Y=V.y;isNaN(z)||isNaN(Y)||(this.idToPosition[B].x=z,this.idToPosition[B].y=Y)}var X=Qy(I);if(X instanceof HTMLElement){var J=document.createElement("div");Object.assign(J.style,{position:"absolute"}),J.appendChild(X),this.idToHtmlOverlay[B]=J}for(var ie=Object.values(this.channels),he=0,ge=ie;he<ge.length;he++){var le=ge[he];le.removes[B]===void 0?le.adds[B]=I:(delete le.removes[B],le.updates[B]=I)}O=!0}}}catch(ye){M.e(ye)}finally{M.f()}O&&(this.version+=1,w!==void 0&&(w.added=!0))}function ub(b,w){var x,O=!1,M=Dp(b);try{for(M.s();!(x=M.n()).done;){var I=x.value,B=I.id,V=this.idToItem[B];if(V!==void 0){Object.assign(V,I);var z=Qy(I);if(z instanceof HTMLElement){var Y;(Y=this.idToHtmlOverlay[B])===null||Y===void 0||Y.remove(),delete this.idToHtmlOverlay[B];var X=document.createElement("div");Object.assign(X.style,{position:"absolute"}),X.appendChild(z),this.idToHtmlOverlay[B]=X}for(var J=Object.values(this.channels),ie=0,he=J;ie<he.length;ie++){var ge=he[ie];if(ge.adds[B]===void 0){var le=ge.updates[B];le===void 0&&(le={id:B},ge.updates[B]=le),Object.assign(le,I)}}w!==void 0&&(w.updated=!0)}O=!0}}catch(ye){M.e(ye)}finally{M.f()}O&&(this.version+=1)}function lb(b,w){var x,O=!1,M=Dp(b);try{for(M.s();!(x=M.n()).done;){var I=x.value,B=this.idToItem[I];if(B!==void 0){var V;O=!0,delete this.idToItem[B.id],delete this.idToPosition[B.id],(V=this.idToHtmlOverlay[B.id])===null||V===void 0||V.remove(),delete this.idToHtmlOverlay[B.id],this.items.splice(this.items.indexOf(B),1);for(var z=Object.values(this.channels),Y=0,X=z;Y<X.length;Y++){var J=X[Y];J.adds[I]!==void 0?delete J.adds[I]:(delete J.updates[I],J.removes[I]=B)}}}}catch(ie){M.e(ie)}finally{M.f()}O&&(w!==void 0&&(w.removed=!0),this.version+=1)}function cb(b){var w,x=Dp(b);try{for(x.s();!(w=x.n()).done;){var O=w.value;if(this.idToPosition[O.id]!==void 0){var M=this.idToPosition[O.id];Object.assign(M,O)}else this.idToPosition[O.id]={id:O.id,x:O.x,y:O.y,pinned:O.pinned}}}catch(I){x.e(I)}finally{x.f()}}function fb(b){for(var w in this.idToHtmlOverlay){var x=this.idToHtmlOverlay[w];b.appendChild(x)}}var Jy=function(){return{idToItem:Fr.shallow({}),items:Fr.shallow([]),channels:Fr.shallow({}),idToPosition:Fr.shallow({}),idToHtmlOverlay:Fr.shallow({}),version:0,addChannel:$(ob),removeChannel:$(ab),clearChannel:$(Mp),add:$(sb),update:$(ub),remove:$(lb),updatePositions:$(cb),updateHtmlOverlay:$(fb)}},em={selected:{rings:[{widthFactor:.05,color:hl},{widthFactor:.1,color:dl}],shadow:{width:10,opacity:1,color:cf}},default:{rings:[]}},tm={selected:{rings:[{color:hl,width:2},{color:dl,width:4}],shadow:{width:18,opacity:1,color:cf}},default:{rings:[]}},kg=.75,Dg={noPan:!1,outOnly:!1,animated:!0};function Bc(b){return Bc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},Bc(b)}function Mg(b,w){(w==null||w>b.length)&&(w=b.length);for(var x=0,O=new Array(w);x<w;x++)O[x]=b[x];return O}function Lg(b,w){var x=Object.keys(b);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(b);w&&(O=O.filter(function(M){return Object.getOwnPropertyDescriptor(b,M).enumerable})),x.push.apply(x,O)}return x}function Lp(b){for(var w=1;w<arguments.length;w++){var x=arguments[w]!=null?arguments[w]:{};w%2?Lg(Object(x),!0).forEach(function(O){var M,I,B;M=b,I=O,B=x[O],I=function(V){var z=function(Y,X){if(Bc(Y)!="object"||!Y)return Y;var J=Y[Symbol.toPrimitive];if(J!==void 0){var ie=J.call(Y,"string");if(Bc(ie)!="object")return ie;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Y)}(V);return Bc(z)=="symbol"?z:String(z)}(I),I in M?Object.defineProperty(M,I,{value:B,enumerable:!0,configurable:!0,writable:!0}):M[I]=B}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(x)):Lg(Object(x)).forEach(function(O){Object.defineProperty(b,O,Object.getOwnPropertyDescriptor(x,O))})}return b}var $u=function(b,w,x){(0,r.isNil)(b)||(function(O){return typeof O=="string"&&Fl(O)!==null}(b)?w(b):Lu().warn("Invalid color string for ".concat(x,":"),b))};function Zh(b){return Zh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},Zh(b)}function Ng(b,w){var x=Object.keys(b);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(b);w&&(O=O.filter(function(M){return Object.getOwnPropertyDescriptor(b,M).enumerable})),x.push.apply(x,O)}return x}function jg(b){for(var w=1;w<arguments.length;w++){var x=arguments[w]!=null?arguments[w]:{};w%2?Ng(Object(x),!0).forEach(function(O){var M,I,B;M=b,I=O,B=x[O],I=function(V){var z=function(Y,X){if(Zh(Y)!="object"||!Y)return Y;var J=Y[Symbol.toPrimitive];if(J!==void 0){var ie=J.call(Y,"string");if(Zh(ie)!="object")return ie;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Y)}(V);return Zh(z)=="symbol"?z:String(z)}(I),I in M?Object.defineProperty(M,I,{value:B,enumerable:!0,configurable:!0,writable:!0}):M[I]=B}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(x)):Ng(Object(x)).forEach(function(O){Object.defineProperty(b,O,Object.getOwnPropertyDescriptor(x,O))})}return b}var rm=function(b){var w=b.minZoom,x=b.maxZoom,O=b.allowDynamicMinZoom,M=O===void 0||O,I=b.layout,B=b.layoutOptions,V=b.styling,z=V===void 0?{}:V,Y=b.panX,X=Y===void 0?0:Y,J=b.panY,ie=J===void 0?0:J,he=b.initialZoom,ge=b.renderer,le=ge===void 0?b.useWebGL===!0?ki:Tc:ge,ye=b.disableWebGL,Me=ye!==void 0&&ye,Ne=b.disableWebWorkers,Ue=Ne!==void 0&&Ne,je=b.disableTelemetry,Xe=je!==void 0&&je;ve(!0),yt.isolateGlobalState();var Ge=(0,r.isNil)(w)?.075:w,Ke=(0,r.isNil)(x)?10:x,$e=function(Pe,Te){var Ae=Te.legacyNodeDefaultBorderColor,ot=Te.legacySelectedBorderColor,Ze=Te.legacyDisabledItemColor,ht=Te.legacyDisabledItemFontColor,kt=Pe.nodeDefaultBorderColor,Ut=kt===void 0?Ae:kt,qt=Pe.selectedBorderColor,Tr=qt===void 0?ot:qt,Ir=Pe.disabledItemColor,Wr=Ir===void 0?Ze:Ir,On=Pe.disabledItemFontColor,jn=On===void 0?ht:On,yn=Pe.selectedInnerBorderColor,Zr=Pe.dropShadowColor,Hr=Pe.defaultNodeColor,sn=Pe.defaultRelationshipColor,mn=Pe.minimapViewportBoxColor,ti=Lp({},em.default),rn=Lp({},em.selected),An=Lp({},tm.selected),ri={color:gc,fontColor:"#DDDDDD"},ni=pc,fi=fl;return $u(yn,function(nn){rn.rings[0].color=nn,An.rings[0].color=nn},"selectedInnerBorderColor"),$u(Tr,function(nn){rn.rings[1].color=nn,An.rings[1].color=nn},"selectedBorderColor"),$u(Ut,function(nn){var mi;ti.rings=[{color:nn,widthFactor:.05}],rn.rings=[{color:nn,widthFactor:.05}].concat(function(bn){if(Array.isArray(bn))return Mg(bn)}(mi=rn.rings)||function(bn){if(typeof Symbol<"u"&&bn[Symbol.iterator]!=null||bn["@@iterator"]!=null)return Array.from(bn)}(mi)||function(bn,ko){if(bn){if(typeof bn=="string")return Mg(bn,ko);var Qo=Object.prototype.toString.call(bn).slice(8,-1);return Qo==="Object"&&bn.constructor&&(Qo=bn.constructor.name),Qo==="Map"||Qo==="Set"?Array.from(bn):Qo==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Qo)?Mg(bn,ko):void 0}}(mi)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}())},"nodeDefaultBorderColor"),$u(Zr,function(nn){rn.shadow.color=nn,An.shadow.color=nn},"dropShadowColor"),$u(Wr,function(nn){ri.color=nn},"disabledItemColor"),$u(jn,function(nn){ri.fontColor=nn},"disabledItemFontColor"),$u(Hr,function(nn){fi=nn},"defaultNodeColor"),$u(sn,function(nn){ni=nn},"defaultRelationshipColor"),{nodeBorderStyles:{default:ti,selected:rn},relationshipBorderStyles:{default:tm.default,selected:An},disabledItemStyles:ri,defaultNodeColor:fi,defaultRelationshipColor:ni,minimapViewportBoxColor:mn||Qe}}(z,{legacyNodeDefaultBorderColor:b.nodeDefaultBorderColor,legacySelectedBorderColor:b.selectedBorderColor,legacyDisabledItemColor:b.disabledItemColor,legacyDisabledItemFontColor:b.disabledItemFontColor}),Ve=$e.nodeBorderStyles,tt=$e.relationshipBorderStyles,mt=$e.disabledItemStyles,It=$e.defaultNodeColor,bt=$e.defaultRelationshipColor,jt=$e.minimapViewportBoxColor,Ct=Fr({zoom:he||kg,minimapZoom:kg,defaultZoomLevel:kg,panX:X,panY:ie,minimapPanX:0,minimapPanY:0,fitNodeIds:[],resetZoom:!1,zoomOptions:Dg,forceWebGL:!1,renderer:le,disableWebGL:Me,disableWebWorkers:Ue,disableTelemetry:Xe,fitMovement:0,layout:I,layoutOptions:B,maxDistance:0,maxNodeRadius:50,nodeBorderStyles:Ve,relationshipBorderStyles:tt,disabledItemStyles:mt,defaultNodeColor:It,defaultRelationshipColor:bt,minimapViewportBoxColor:jt,get minZoom(){return Ge},get maxZoom(){return Ke},get minMinimapZoom(){return 0},get maxMinimapZoom(){return .2},get webGLVisible(){var Pe=this.fitMovement>50;return this.renderer===ki||Pe},nodes:Jy(),rels:Jy(),graphUpdates:0,waypoints:{data:Fr.shallow({}),counter:0},setGraphUpdated:$(function(){this.graphUpdates+=1}),setRenderer:$(function(Pe){$(function(){this.graphUpdates+=1}),this.renderer=Pe}),setWaypoints:$(function(Pe){this.waypoints.data=Pe,this.waypoints.counter+=1}),setZoomPan:$(function(Pe,Te,Ae,ot){if(M){var Ze=Object.values(this.nodes.idToPosition),ht=xi(Ze,Ge,Ke,ot,Pe,this.zoom);ht!==this.zoom&&(this.zoom=ht,Pe===ht&&(this.panX=Te,this.panY=Ae))}else{var kt=dr(Pe,this.zoom,Ge,Ke);kt!==this.zoom&&(this.zoom=kt,this.panX=Te,this.panY=Ae)}this.fitNodeIds=[],this.resetZoom=!1,this.forceWebGL=!1}),setZoom:$(function(Pe,Te){if(M){var Ae=Object.values(this.nodes.idToPosition);this.zoom=xi(Ae,Ge,Ke,Te,Pe,this.zoom)}else this.zoom=dr(Pe,this.zoom,Ge,Ke);this.fitNodeIds=[],this.fitMovement=0,this.resetZoom=!1,this.forceWebGL=!1}),setPan:$(function(Pe,Te){this.panX=Pe,this.panY=Te,this.fitNodeIds=[],this.resetZoom=!1,this.forceWebGL=!1}),setLayout:$(function(Pe){this.layout=Pe}),setLayoutOptions:$(function(Pe){this.layoutOptions=Pe}),fitNodes:$(function(Pe){var Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.fitNodeIds=(0,r.intersection)(Pe,(0,r.map)(this.nodes.items,"id")),this.zoomOptions=jg(jg({},Dg),Te)}),setZoomReset:$(function(){this.resetZoom=!0}),clearFit:$(function(){this.fitNodeIds=[],this.forceWebGL=!1,this.fitMovement=0,this.zoomOptions=Dg}),clearReset:$(function(){this.resetZoom=!1,this.fitMovement=0}),updateZoomToFit:$(function(Pe,Te,Ae,ot){var Ze;if(this.fitMovement=Math.abs(Pe-this.zoom)+Math.abs(Te-this.panX)+Math.abs(Ae-this.panY),M){var ht=Object.values(this.nodes.idToPosition);Ze=xi(ht,Ge,Ke,ot,Pe,this.zoom)}else Ze=dr(Pe,this.zoom,Ge,Ke);this.zoom=Ze,this.panX=Te,this.panY=Ae}),updateMinimapZoomToFit:$(function(Pe,Te,Ae){this.minimapZoom=Pe,this.minimapPanX=Te,this.minimapPanY=Ae}),autorun:Er,reaction:Yt});return Ct},hb=function(b){return!!b&&typeof b.id=="string"&&b.id.length>0},Np=Mi(1187);function hv(b){return hv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},hv(b)}function dv(b,w){var x=Object.keys(b);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(b);w&&(O=O.filter(function(M){return Object.getOwnPropertyDescriptor(b,M).enumerable})),x.push.apply(x,O)}return x}function vv(b){for(var w=1;w<arguments.length;w++){var x=arguments[w]!=null?arguments[w]:{};w%2?dv(Object(x),!0).forEach(function(O){var M,I,B;M=b,I=O,B=x[O],I=function(V){var z=function(Y,X){if(hv(Y)!="object"||!Y)return Y;var J=Y[Symbol.toPrimitive];if(J!==void 0){var ie=J.call(Y,"string");if(hv(ie)!="object")return ie;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Y)}(V);return hv(z)=="symbol"?z:String(z)}(I),I in M?Object.defineProperty(M,I,{value:B,enumerable:!0,configurable:!0,writable:!0}):M[I]=B}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(x)):dv(Object(x)).forEach(function(O){Object.defineProperty(b,O,Object.getOwnPropertyDescriptor(x,O))})}return b}function nm(b){return function(w){if(Array.isArray(w))return Fg(w)}(b)||function(w){if(typeof Symbol<"u"&&w[Symbol.iterator]!=null||w["@@iterator"]!=null)return Array.from(w)}(b)||function(w,x){if(w){if(typeof w=="string")return Fg(w,x);var O=Object.prototype.toString.call(w).slice(8,-1);return O==="Object"&&w.constructor&&(O=w.constructor.name),O==="Map"||O==="Set"?Array.from(w):O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O)?Fg(w,x):void 0}}(b)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Fg(b,w){(w==null||w>b.length)&&(w=b.length);for(var x=0,O=new Array(w);x<w;x++)O[x]=b[x];return O}var pv=function(b){return{id:b.elementId}},Bg=function(b){return{id:b.elementId,from:b.startNodeElementId,to:b.endNodeElementId}},db=Np.resultTransformers.mappedResultTransformer({map:function(b){return Object.values(b.toObject())},collect:function(b){var w={nodes:[],relationships:[]},x=new Map;return function(O){for(var M=nm(O),I=[];M.length;){var B=M.pop();Array.isArray(B)?M.push.apply(M,nm(B)):I.push(B)}return I}(b).forEach(function(O){(0,Np.isNode)(O)?(w.nodes.push(pv(O)),x.set(O.elementId,O)):(0,Np.isPath)(O)?O.segments.forEach(function(M){w.nodes.push(pv(M.start)),w.nodes.push(pv(M.end)),w.relationships.push(Bg(M.relationship)),x.set(M.start.elementId,M.start),x.set(M.end.elementId,M.end),x.set(M.relationship.elementId,M.relationship)}):(0,Np.isRelationship)(O)&&(w.relationships.push(Bg(O)),x.set(O.elementId,O))}),vv(vv({},w),{},{recordObjectMap:x})}});const vb=(b=>{var w={};return Mi.d(w,b),w})({AnalyticsBrowser:()=>LG});var Ug,pb=new Uint8Array(16);function gb(){if(!Ug&&!(Ug=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ug(pb)}const yb=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var Io=[],qg=0;qg<256;++qg)Io.push((qg+256).toString(16).substr(1));const mb=function(b){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,x=(Io[b[w+0]]+Io[b[w+1]]+Io[b[w+2]]+Io[b[w+3]]+"-"+Io[b[w+4]]+Io[b[w+5]]+"-"+Io[b[w+6]]+Io[b[w+7]]+"-"+Io[b[w+8]]+Io[b[w+9]]+"-"+Io[b[w+10]]+Io[b[w+11]]+Io[b[w+12]]+Io[b[w+13]]+Io[b[w+14]]+Io[b[w+15]]).toLowerCase();if(!function(O){return typeof O=="string"&&yb.test(O)}(x))throw TypeError("Stringified UUID is invalid");return x};var im,zg,Gg=0,gs=0;const bb=function(b,w,x){var O=0,M=new Array(16),I=(b=b||{}).node||im,B=b.clockseq!==void 0?b.clockseq:zg;if(I==null||B==null){var V=b.random||(b.rng||gb)();I==null&&(I=im=[1|V[0],V[1],V[2],V[3],V[4],V[5]]),B==null&&(B=zg=16383&(V[6]<<8|V[7]))}var z=b.msecs!==void 0?b.msecs:Date.now(),Y=b.nsecs!==void 0?b.nsecs:gs+1,X=z-Gg+(Y-gs)/1e4;if(X<0&&b.clockseq===void 0&&(B=B+1&16383),(X<0||z>Gg)&&b.nsecs===void 0&&(Y=0),Y>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Gg=z,gs=Y,zg=B;var J=(1e4*(268435455&(z+=122192928e5))+Y)%4294967296;M[O++]=J>>>24&255,M[O++]=J>>>16&255,M[O++]=J>>>8&255,M[O++]=255&J;var ie=z/4294967296*1e4&268435455;M[O++]=ie>>>8&255,M[O++]=255&ie,M[O++]=ie>>>24&15|16,M[O++]=ie>>>16&255,M[O++]=B>>>8|128,M[O++]=255&B;for(var he=0;he<6;++he)M[O+he]=I[he];return w||mb(M)};function Vf(b){return Vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},Vf(b)}function Ul(){Ul=function(){return w};var b,w={},x=Object.prototype,O=x.hasOwnProperty,M=Object.defineProperty||function(Pe,Te,Ae){Pe[Te]=Ae.value},I=typeof Symbol=="function"?Symbol:{},B=I.iterator||"@@iterator",V=I.asyncIterator||"@@asyncIterator",z=I.toStringTag||"@@toStringTag";function Y(Pe,Te,Ae){return Object.defineProperty(Pe,Te,{value:Ae,enumerable:!0,configurable:!0,writable:!0}),Pe[Te]}try{Y({},"")}catch{Y=function(Te,Ae,ot){return Te[Ae]=ot}}function X(Pe,Te,Ae,ot){var Ze=Te&&Te.prototype instanceof Me?Te:Me,ht=Object.create(Ze.prototype),kt=new jt(ot||[]);return M(ht,"_invoke",{value:tt(Pe,Ae,kt)}),ht}function J(Pe,Te,Ae){try{return{type:"normal",arg:Pe.call(Te,Ae)}}catch(ot){return{type:"throw",arg:ot}}}w.wrap=X;var ie="suspendedStart",he="suspendedYield",ge="executing",le="completed",ye={};function Me(){}function Ne(){}function Ue(){}var je={};Y(je,B,function(){return this});var Xe=Object.getPrototypeOf,Ge=Xe&&Xe(Xe(Ct([])));Ge&&Ge!==x&&O.call(Ge,B)&&(je=Ge);var Ke=Ue.prototype=Me.prototype=Object.create(je);function $e(Pe){["next","throw","return"].forEach(function(Te){Y(Pe,Te,function(Ae){return this._invoke(Te,Ae)})})}function Ve(Pe,Te){function Ae(Ze,ht,kt,Ut){var qt=J(Pe[Ze],Pe,ht);if(qt.type!=="throw"){var Tr=qt.arg,Ir=Tr.value;return Ir&&Vf(Ir)=="object"&&O.call(Ir,"__await")?Te.resolve(Ir.__await).then(function(Wr){Ae("next",Wr,kt,Ut)},function(Wr){Ae("throw",Wr,kt,Ut)}):Te.resolve(Ir).then(function(Wr){Tr.value=Wr,kt(Tr)},function(Wr){return Ae("throw",Wr,kt,Ut)})}Ut(qt.arg)}var ot;M(this,"_invoke",{value:function(Ze,ht){function kt(){return new Te(function(Ut,qt){Ae(Ze,ht,Ut,qt)})}return ot=ot?ot.then(kt,kt):kt()}})}function tt(Pe,Te,Ae){var ot=ie;return function(Ze,ht){if(ot===ge)throw new Error("Generator is already running");if(ot===le){if(Ze==="throw")throw ht;return{value:b,done:!0}}for(Ae.method=Ze,Ae.arg=ht;;){var kt=Ae.delegate;if(kt){var Ut=mt(kt,Ae);if(Ut){if(Ut===ye)continue;return Ut}}if(Ae.method==="next")Ae.sent=Ae._sent=Ae.arg;else if(Ae.method==="throw"){if(ot===ie)throw ot=le,Ae.arg;Ae.dispatchException(Ae.arg)}else Ae.method==="return"&&Ae.abrupt("return",Ae.arg);ot=ge;var qt=J(Pe,Te,Ae);if(qt.type==="normal"){if(ot=Ae.done?le:he,qt.arg===ye)continue;return{value:qt.arg,done:Ae.done}}qt.type==="throw"&&(ot=le,Ae.method="throw",Ae.arg=qt.arg)}}}function mt(Pe,Te){var Ae=Te.method,ot=Pe.iterator[Ae];if(ot===b)return Te.delegate=null,Ae==="throw"&&Pe.iterator.return&&(Te.method="return",Te.arg=b,mt(Pe,Te),Te.method==="throw")||Ae!=="return"&&(Te.method="throw",Te.arg=new TypeError("The iterator does not provide a '"+Ae+"' method")),ye;var Ze=J(ot,Pe.iterator,Te.arg);if(Ze.type==="throw")return Te.method="throw",Te.arg=Ze.arg,Te.delegate=null,ye;var ht=Ze.arg;return ht?ht.done?(Te[Pe.resultName]=ht.value,Te.next=Pe.nextLoc,Te.method!=="return"&&(Te.method="next",Te.arg=b),Te.delegate=null,ye):ht:(Te.method="throw",Te.arg=new TypeError("iterator result is not an object"),Te.delegate=null,ye)}function It(Pe){var Te={tryLoc:Pe[0]};1 in Pe&&(Te.catchLoc=Pe[1]),2 in Pe&&(Te.finallyLoc=Pe[2],Te.afterLoc=Pe[3]),this.tryEntries.push(Te)}function bt(Pe){var Te=Pe.completion||{};Te.type="normal",delete Te.arg,Pe.completion=Te}function jt(Pe){this.tryEntries=[{tryLoc:"root"}],Pe.forEach(It,this),this.reset(!0)}function Ct(Pe){if(Pe||Pe===""){var Te=Pe[B];if(Te)return Te.call(Pe);if(typeof Pe.next=="function")return Pe;if(!isNaN(Pe.length)){var Ae=-1,ot=function Ze(){for(;++Ae<Pe.length;)if(O.call(Pe,Ae))return Ze.value=Pe[Ae],Ze.done=!1,Ze;return Ze.value=b,Ze.done=!0,Ze};return ot.next=ot}}throw new TypeError(Vf(Pe)+" is not iterable")}return Ne.prototype=Ue,M(Ke,"constructor",{value:Ue,configurable:!0}),M(Ue,"constructor",{value:Ne,configurable:!0}),Ne.displayName=Y(Ue,z,"GeneratorFunction"),w.isGeneratorFunction=function(Pe){var Te=typeof Pe=="function"&&Pe.constructor;return!!Te&&(Te===Ne||(Te.displayName||Te.name)==="GeneratorFunction")},w.mark=function(Pe){return Object.setPrototypeOf?Object.setPrototypeOf(Pe,Ue):(Pe.__proto__=Ue,Y(Pe,z,"GeneratorFunction")),Pe.prototype=Object.create(Ke),Pe},w.awrap=function(Pe){return{__await:Pe}},$e(Ve.prototype),Y(Ve.prototype,V,function(){return this}),w.AsyncIterator=Ve,w.async=function(Pe,Te,Ae,ot,Ze){Ze===void 0&&(Ze=Promise);var ht=new Ve(X(Pe,Te,Ae,ot),Ze);return w.isGeneratorFunction(Te)?ht:ht.next().then(function(kt){return kt.done?kt.value:ht.next()})},$e(Ke),Y(Ke,z,"Generator"),Y(Ke,B,function(){return this}),Y(Ke,"toString",function(){return"[object Generator]"}),w.keys=function(Pe){var Te=Object(Pe),Ae=[];for(var ot in Te)Ae.push(ot);return Ae.reverse(),function Ze(){for(;Ae.length;){var ht=Ae.pop();if(ht in Te)return Ze.value=ht,Ze.done=!1,Ze}return Ze.done=!0,Ze}},w.values=Ct,jt.prototype={constructor:jt,reset:function(Pe){if(this.prev=0,this.next=0,this.sent=this._sent=b,this.done=!1,this.delegate=null,this.method="next",this.arg=b,this.tryEntries.forEach(bt),!Pe)for(var Te in this)Te.charAt(0)==="t"&&O.call(this,Te)&&!isNaN(+Te.slice(1))&&(this[Te]=b)},stop:function(){this.done=!0;var Pe=this.tryEntries[0].completion;if(Pe.type==="throw")throw Pe.arg;return this.rval},dispatchException:function(Pe){if(this.done)throw Pe;var Te=this;function Ae(qt,Tr){return ht.type="throw",ht.arg=Pe,Te.next=qt,Tr&&(Te.method="next",Te.arg=b),!!Tr}for(var ot=this.tryEntries.length-1;ot>=0;--ot){var Ze=this.tryEntries[ot],ht=Ze.completion;if(Ze.tryLoc==="root")return Ae("end");if(Ze.tryLoc<=this.prev){var kt=O.call(Ze,"catchLoc"),Ut=O.call(Ze,"finallyLoc");if(kt&&Ut){if(this.prev<Ze.catchLoc)return Ae(Ze.catchLoc,!0);if(this.prev<Ze.finallyLoc)return Ae(Ze.finallyLoc)}else if(kt){if(this.prev<Ze.catchLoc)return Ae(Ze.catchLoc,!0)}else{if(!Ut)throw new Error("try statement without catch or finally");if(this.prev<Ze.finallyLoc)return Ae(Ze.finallyLoc)}}}},abrupt:function(Pe,Te){for(var Ae=this.tryEntries.length-1;Ae>=0;--Ae){var ot=this.tryEntries[Ae];if(ot.tryLoc<=this.prev&&O.call(ot,"finallyLoc")&&this.prev<ot.finallyLoc){var Ze=ot;break}}Ze&&(Pe==="break"||Pe==="continue")&&Ze.tryLoc<=Te&&Te<=Ze.finallyLoc&&(Ze=null);var ht=Ze?Ze.completion:{};return ht.type=Pe,ht.arg=Te,Ze?(this.method="next",this.next=Ze.finallyLoc,ye):this.complete(ht)},complete:function(Pe,Te){if(Pe.type==="throw")throw Pe.arg;return Pe.type==="break"||Pe.type==="continue"?this.next=Pe.arg:Pe.type==="return"?(this.rval=this.arg=Pe.arg,this.method="return",this.next="end"):Pe.type==="normal"&&Te&&(this.next=Te),ye},finish:function(Pe){for(var Te=this.tryEntries.length-1;Te>=0;--Te){var Ae=this.tryEntries[Te];if(Ae.finallyLoc===Pe)return this.complete(Ae.completion,Ae.afterLoc),bt(Ae),ye}},catch:function(Pe){for(var Te=this.tryEntries.length-1;Te>=0;--Te){var Ae=this.tryEntries[Te];if(Ae.tryLoc===Pe){var ot=Ae.completion;if(ot.type==="throw"){var Ze=ot.arg;bt(Ae)}return Ze}}throw new Error("illegal catch attempt")},delegateYield:function(Pe,Te,Ae){return this.delegate={iterator:Ct(Pe),resultName:Te,nextLoc:Ae},this.method==="next"&&(this.arg=b),ye}},w}function Lr(b,w,x,O,M,I,B){try{var V=b[I](B),z=V.value}catch(Y){return void x(Y)}V.done?w(z):Promise.resolve(z).then(O,M)}function _b(b,w){for(var x=0;x<w.length;x++){var O=w[x];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(b,wa(O.key),O)}}function wa(b){var w=function(x,O){if(Vf(x)!="object"||!x)return x;var M=x[Symbol.toPrimitive];if(M!==void 0){var I=M.call(x,"string");if(Vf(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(b);return Vf(w)=="symbol"?w:String(w)}var Di=window.localStorage,om="neo4j.nvl.sTid",ql=!1,wb=function(){function b(){var I,B,V;(function(Y,X){if(!(Y instanceof X))throw new TypeError("Cannot call a class as a function")})(this,b),I=this,V=void 0,(B=wa(B="analytics"))in I?Object.defineProperty(I,B,{value:V,enumerable:!0,configurable:!0,writable:!0}):I[B]=V;var z=new vb.AnalyticsBrowser;this.analytics=z}var w,x,O,M;return O=b,M=[{key:"init",value:function(I){this.analytics.load({writeKey:I}),this.analytics.addSourceMiddleware(function(B){var V=B.payload,z=B.next,Y=V.obj.context.page;Y!==void 0&&(Y.url="",Y.title="",Y.search="",Y.referrer="",Y.path=""),z(V)})}},{key:"trackEvent",value:(w=Ul().mark(function I(B){var V;return Ul().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,this.ready();case 2:V="".concat(B.eventPrefix?B.eventPrefix:"NVL_core","-").concat(B.event),this.analytics.track(V,B.properties).catch(function(Y){zr.warn("TRACKING: Event tracking is failed. err: ".concat(Y))});case 4:case"end":return z.stop()}},I,this)}),x=function(){var I=this,B=arguments;return new Promise(function(V,z){var Y=w.apply(I,B);function X(ie){Lr(Y,V,z,X,J,"next",ie)}function J(ie){Lr(Y,V,z,X,J,"throw",ie)}X(void 0)})},function(I){return x.apply(this,arguments)})},{key:"identify",value:function(){if(!ql){var I=this.getSegmentTrackingId();this.analytics.identify(I).catch(function(B){zr.debug("TRACKING: Identifying user for Segment tracking failed. err: ".concat(B))}),ql=!0}}},{key:"loadSavedSegmentId",value:function(){try{var I=Di.getItem(om);return typeof I=="string"?I:null}catch(B){return zr.debug("TRACKING: Retrieving tracking Id failed. err: ".concat(B)),null}}},{key:"getSegmentTrackingId",value:function(){var I=this.loadSavedSegmentId(),B=I??bb();return this.saveTrackingId(B),B}},{key:"saveTrackingId",value:function(I){Di.setItem(om,I)}},{key:"ready",value:function(){return this.analytics.ready().catch(function(I){zr.debug("TRACKING: segment track instance not ready. err: ".concat(I))})}}],M&&_b(O.prototype,M),Object.defineProperty(O,"prototype",{writable:!1}),b}();function gv(b){return gv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},gv(b)}function Eb(b,w){return function(x){if(Array.isArray(x))return x}(b)||function(x,O){var M=x==null?null:typeof Symbol<"u"&&x[Symbol.iterator]||x["@@iterator"];if(M!=null){var I,B,V,z,Y=[],X=!0,J=!1;try{if(V=(M=M.call(x)).next,O!==0)for(;!(X=(I=V.call(M)).done)&&(Y.push(I.value),Y.length!==O);X=!0);}catch(ie){J=!0,B=ie}finally{try{if(!X&&M.return!=null&&(z=M.return(),Object(z)!==z))return}finally{if(J)throw B}}return Y}}(b,w)||am(b,w)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Vg(b,w){var x=typeof Symbol<"u"&&b[Symbol.iterator]||b["@@iterator"];if(!x){if(Array.isArray(b)||(x=am(b))||w){x&&(b=x);var O=0,M=function(){};return{s:M,n:function(){return O>=b.length?{done:!0}:{done:!1,value:b[O++]}},e:function(z){throw z},f:M}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I,B=!0,V=!1;return{s:function(){x=x.call(b)},n:function(){var z=x.next();return B=z.done,z},e:function(z){V=!0,I=z},f:function(){try{B||x.return==null||x.return()}finally{if(V)throw I}}}}function am(b,w){if(b){if(typeof b=="string")return jp(b,w);var x=Object.prototype.toString.call(b).slice(8,-1);return x==="Object"&&b.constructor&&(x=b.constructor.name),x==="Map"||x==="Set"?Array.from(b):x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x)?jp(b,w):void 0}}function jp(b,w){(w==null||w>b.length)&&(w=b.length);for(var x=0,O=new Array(w);x<w;x++)O[x]=b[x];return O}function sm(b,w){var x=Object.keys(b);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(b);w&&(O=O.filter(function(M){return Object.getOwnPropertyDescriptor(b,M).enumerable})),x.push.apply(x,O)}return x}function ei(b){for(var w=1;w<arguments.length;w++){var x=arguments[w]!=null?arguments[w]:{};w%2?sm(Object(x),!0).forEach(function(O){var M,I,B;M=b,I=O,B=x[O],(I=yv(I))in M?Object.defineProperty(M,I,{value:B,enumerable:!0,configurable:!0,writable:!0}):M[I]=B}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(x)):sm(Object(x)).forEach(function(O){Object.defineProperty(b,O,Object.getOwnPropertyDescriptor(x,O))})}return b}function um(b,w){for(var x=0;x<w.length;x++){var O=w[x];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(b,yv(O.key),O)}}function yv(b){var w=function(x,O){if(gv(x)!="object"||!x)return x;var M=x[Symbol.toPrimitive];if(M!==void 0){var I=M.call(x,"string");if(gv(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(b);return gv(w)=="symbol"?w:String(w)}function Nn(b,w,x){Si(b,w),w.set(b,x)}function Si(b,w){if(w.has(b))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Bt(b,w){return b.get(qa(b,w))}function Qh(b,w,x){return b.set(qa(b,w),x),x}function qa(b,w,x){if(typeof b=="function"?b===w:b.has(w))return arguments.length<3?w:x;throw new TypeError("Private element is not present on this object")}var mv=new WeakMap,lm=new WeakMap,an=new WeakMap,En=new WeakMap,Zo=new WeakMap,zl=new WeakMap,Ea=new WeakSet,cm=function(){function b(O){var M,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],V=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},z=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};(function(Y,X){if(!(Y instanceof X))throw new TypeError("Cannot call a class as a function")})(this,b),Si(this,M=Ea),M.add(this),Nn(this,mv,void 0),Nn(this,lm,void 0),Nn(this,an,void 0),Nn(this,En,void 0),Nn(this,Zo,void 0),Nn(this,zl,void 0),V.disableTelemetry!==!0&&(Qh(zl,this,new wb),Bt(zl,this).init("4SGwdwzuDm5WkFvQtz7D6ATQlo14yjmW"),Bt(zl,this).identify()),qa(Ea,this,Fp).call(this,V),Qh(mv,this,new o(z)),Qh(lm,this,new Ky),Qh(Zo,this,V),Bt(Zo,this).frame=O,this.checkWebGLCompatibility(),qa(Ea,this,Wg).call(this,I,B,V)}var w,x;return w=b,x=[{key:"restart",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},M=arguments.length>1&&arguments[1]!==void 0&&arguments[1],I=this.getNodePositions(),B=Bt(an,this),V=B.zoom,z=B.layout,Y=B.layoutOptions,X=B.nodes,J=B.rels;Bt(En,this).destroy(),Object.assign(Bt(Zo,this),O),qa(Ea,this,Wg).call(this,X.items,J.items,Bt(Zo,this)),this.setZoom(V),this.setLayout(z),this.setLayoutOptions(Y),this.addAndUpdateElementsInGraph(X.items,J.items),M&&this.setNodePositions(I)}},{key:"addAndUpdateElementsInGraph",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];qa(Ea,this,Hg).call(this,O),qa(Ea,this,Yg).call(this,M,O);var I={added:!1,updated:!1};Bt(an,this).nodes.update(O,ei({},I)),Bt(an,this).rels.update(M,ei({},I)),Bt(an,this).nodes.add(O,ei({},I)),Bt(an,this).rels.add(M,ei({},I)),Bt(an,this).setGraphUpdated(),Bt(En,this).updateHtmlOverlay()}},{key:"getSelectedNodes",value:function(){var O=this;return Bt(an,this).nodes.items.filter(function(M){return M.selected}).map(function(M){return ei(ei({},M),Bt(an,O).nodes.idToPosition[M.id])})}},{key:"getSelectedRelationships",value:function(){return Bt(an,this).rels.items.filter(function(O){return O.selected})}},{key:"updateElementsInGraph",value:function(O,M){var I={added:!1,updated:!1};qa(Ea,this,Hg).call(this,O),qa(Ea,this,Yg).call(this,M,O),Bt(an,this).nodes.update(O,ei({},I)),Bt(an,this).rels.update(M,ei({},I)),Bt(En,this).updateHtmlOverlay()}},{key:"addElementsToGraph",value:function(O,M){qa(Ea,this,Hg).call(this,O),qa(Ea,this,Yg).call(this,M,O);var I={added:!1,updated:!1};Bt(an,this).nodes.add(O,ei({},I)),Bt(an,this).rels.add(M,ei({},I)),Bt(En,this).updateHtmlOverlay()}},{key:"removeNodesWithIds",value:function(O){if(Array.isArray(O)&&!(0,r.isEmpty)(O)){var M,I={},B=Vg(O);try{for(B.s();!(M=B.n()).done;)I[M.value]=!0}catch(J){B.e(J)}finally{B.f()}var V,z=[],Y=Vg(Bt(an,this).rels.items);try{for(Y.s();!(V=Y.n()).done;){var X=V.value;I[X.from]!==!0&&I[X.to]!==!0||z.push(X.id)}}catch(J){Y.e(J)}finally{Y.f()}z.length>0&&qa(Ea,this,Wf).call(this,z),qa(Ea,this,ys).call(this,O),Bt(an,this).setGraphUpdated(),Bt(En,this).updateHtmlOverlay()}}},{key:"removeRelationshipsWithIds",value:function(O){Array.isArray(O)&&!(0,r.isEmpty)(O)&&(qa(Ea,this,Wf).call(this,O),Bt(an,this).setGraphUpdated(),Bt(En,this).updateHtmlOverlay())}},{key:"getNodes",value:function(){return Bt(En,this).dumpNodes()}},{key:"getRelationships",value:function(){return Bt(En,this).dumpRelationships()}},{key:"getNodeById",value:function(O){return Bt(an,this).nodes.idToItem[O]}},{key:"getRelationshipById",value:function(O){return Bt(an,this).rels.idToItem[O]}},{key:"getPositionById",value:function(O){return Bt(an,this).nodes.idToPosition[O]}},{key:"getCurrentOptions",value:function(){return Bt(Zo,this)}},{key:"destroy",value:function(){Bt(En,this).destroy()}},{key:"deselectAll",value:function(){this.updateElementsInGraph(Bt(an,this).nodes.items.map(function(O){return ei(ei({},O),{},{selected:!1})}),Bt(an,this).rels.items.map(function(O){return ei(ei({},O),{},{selected:!1})}))}},{key:"fit",value:function(O,M){Bt(En,this).fit(O,M)}},{key:"resetZoom",value:function(){Bt(En,this).resetZoom()}},{key:"setUseWebGLRenderer",value:function(O){Bt(En,this).setRenderer(O?ki:Tc)}},{key:"setRenderer",value:function(O){Bt(En,this).setRenderer(O)}},{key:"setDisableWebGL",value:function(){var O=arguments.length>0&&arguments[0]!==void 0&&arguments[0];Bt(Zo,this).disableWebGL!==O&&(Bt(Zo,this).disableWebGL=O,this.restart())}},{key:"pinNode",value:function(O){Bt(an,this).nodes.update([{id:O,pinned:!0}],{})}},{key:"unPinNode",value:function(O){Bt(an,this).nodes.update(O.map(function(M){return{id:M,pinned:!1}}),{})}},{key:"setLayout",value:function(O){Bt(an,this).setLayout(O)}},{key:"setLayoutOptions",value:function(O){Bt(an,this).setLayoutOptions(O)}},{key:"getNodesOnScreen",value:function(){return Bt(En,this).getNodesOnScreen()}},{key:"getNodePositions",value:function(){return Bt(En,this).getNodePositions()}},{key:"setNodePositions",value:function(O){var M=arguments.length>1&&arguments[1]!==void 0&&arguments[1];Bt(En,this).setNodePositions(O,M)}},{key:"isLayoutMoving",value:function(){return Bt(En,this).isLayoutMoving()}},{key:"saveToFile",value:function(O){Bt(En,this).saveToFile(O)}},{key:"saveFullGraphToLargeFile",value:function(O){Bt(En,this).saveFullGraphToLargeFile(O)}},{key:"setZoom",value:function(O){Bt(En,this).setZoomLevel(O)}},{key:"setPan",value:function(O,M){Bt(En,this).setPanCoordinates(O,M)}},{key:"setZoomAndPan",value:function(O,M,I){Bt(En,this).setZoomAndPan(O,M,I)}},{key:"getScale",value:function(){return Bt(En,this).getScale()}},{key:"getPan",value:function(){return Bt(En,this).getPan()}},{key:"getHits",value:function(O){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["node","relationship"],I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{hitNodeMarginWidth:0},B=Bt(an,this),V=B.zoom,z=B.panX,Y=B.panY,X=B.webGLVisible,J=Xh(O,Bt(Zo,this).frame,V,z,Y),ie=J.x,he=J.y,ge=X?function(le,ye,Me){var Ne=arguments.length>3&&arguments[3]!==void 0?arguments[3]:["node","relationship"],Ue=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},je=[],Xe=[],Ge=Me.nodes,Ke=Me.rels;return Ne.includes("node")&&je.push.apply(je,Rt(function($e,Ve){var tt,mt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},It=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,bt=[],jt=Kt(arguments.length>2&&arguments[2]!==void 0?arguments[2]:[]);try{var Ct=function(){var Pe,Te=tt.value,Ae=mt[Te.id];if((Ae==null?void 0:Ae.x)===void 0||Ae.y===void 0)return 1;var ot=((Pe=Te.size)!==null&&Pe!==void 0?Pe:Zn)*rt(),Ze={x:Ae.x-$e,y:Ae.y-Ve},ht=Math.pow(ot,2),kt=Math.pow(ot+It,2),Ut=Math.pow(Ze.x,2)+Math.pow(Ze.y,2),qt=Math.sqrt(Ut);if(Ut<kt){var Tr=bt.findIndex(function(Ir){return Ir.distance>qt});bt.splice(Tr!==-1?Tr:bt.length,0,{data:Te,targetCoordinates:{x:Ae.x,y:Ae.y},pointerCoordinates:{x:$e,y:Ve},distanceVector:Ze,distance:qt,insideNode:Ut<ht})}};for(jt.s();!(tt=jt.n()).done;)Ct()}catch(Pe){jt.e(Pe)}finally{jt.f()}return bt}(le,ye,Ge.items,Ge.idToPosition,Ue.hitNodeMarginWidth))),Ne.includes("relationship")&&Xe.push.apply(Xe,Rt(function($e,Ve){var tt,mt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},It=[],bt={},jt=Kt(arguments.length>2&&arguments[2]!==void 0?arguments[2]:[]);try{var Ct=function(){var Pe=tt.value,Te=Pe.from,Ae=Pe.to;if(bt["".concat(Te,".").concat(Ae)]===void 0){var ot=mt[Te],Ze=mt[Ae];if((ot==null?void 0:ot.x)===void 0||ot.y===void 0||(Ze==null?void 0:Ze.x)===void 0||Ze.y===void 0)return 0;var ht=ls({x:ot.x,y:ot.y},{x:Ze.x,y:Ze.y},{x:$e,y:Ve});if(ht<=xt){var kt=It.findIndex(function(Ut){return Ut.distance>ht});It.splice(kt!==-1?kt:It.length,0,{data:Pe,fromTargetCoordinates:{x:ot.x,y:ot.y},toTargetCoordinates:{x:Ze.x,y:Ze.y},pointerCoordinates:{x:$e,y:Ve},distance:ht})}bt["".concat(Te,".").concat(Ae)]=1,bt["".concat(Ae,".").concat(Te)]=1}};for(jt.s();!(tt=jt.n()).done;)Ct()}catch(Pe){jt.e(Pe)}finally{jt.f()}return It}(le,ye,Ke.items,Ge.idToPosition))),{nodes:je,relationships:Xe}}(ie,he,Bt(an,this),M,I):function(le,ye,Me){var Ne=arguments.length>3&&arguments[3]!==void 0?arguments[3]:["node","relationship"],Ue=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},je=[],Xe=[];return Ne.includes("node")&&je.push.apply(je,Rt(Me.getCanvasNodesAt({x:le,y:ye},Ue.hitNodeMarginWidth))),Ne.includes("relationship")&&Xe.push.apply(Xe,Rt(Me.getCanvasRelsAt({x:le,y:ye}))),{nodes:je,relationships:Xe}}(ie,he,Bt(En,this),M,I);return ei(ei({},O),{},{nvlTargets:ge})}},{key:"getContainer",value:function(){return Bt(Zo,this).frame}},{key:"checkWebGLCompatibility",value:function(){var O=Bt(Zo,this).disableWebGL;if(O===void 0||!O){var M=function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document.createElement("canvas");try{return window.WebGLRenderingContext!==void 0&&(I.getContext("webgl")!==null||I.getContext("experimental-webgl")!==null)}catch{return!1}}();if(!M){if(O!==void 0)throw new _l("Could not initialize WebGL");Bt(Zo,this).renderer=Tc,console.warn("GPU acceleration is not available on your browser. Falling back to CPU layout and rendering. You can disable this warning by setting the disableWebGL option to true.")}O===void 0&&(Bt(Zo,this).disableWebGL=!M)}}}],x&&um(w.prototype,x),Object.defineProperty(w,"prototype",{writable:!1}),b}();function Wg(){var b,w=this,x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Qh(an,this,rm(M)),M.minimapContainer instanceof HTMLElement||delete M.minimapContainer,Qh(En,this,new rb(Bt(an,this),M)),this.addAndUpdateElementsInGraph(x,O),Bt(En,this).on("restart",this.restart.bind(this));var I,B,V=Vg((I=Bt(mv,this).callbacks,Object.entries(I)));try{for(V.s();!(B=V.n()).done;){var z=Eb(B.value,2),Y=z[0];z[1]!==void 0&&Bt(En,this).on(Y,Bt(mv,this)[Y].bind(Bt(mv,this)))}}catch(J){V.e(J)}finally{V.f()}var X=(b=Bt(Zo,this).frame)===null||b===void 0?void 0:b.getAttribute("id");Bt(Zo,this).disableTelemetry!==!0&&setTimeout(function(){Bt(En,w).isDestroyed()||Bt(zl,w).trackEvent({eventPrefix:$t.includes(X)?X:null,event:"instantiated",properties:{}})},200)}function Fp(b){var w,x=b.logging;(x==null?void 0:x.level)!==void 0&&(w=x.level,zr.setLevel(w),function(O,M){var I=O.methodFactory;O.methodFactory=function(B,V,z){var Y=I(B,V,z);return function(){for(var X=arguments.length,J=new Array(X),ie=0;ie<X;ie++)J[ie]=arguments[ie];typeof M.logger=="function"?M.logger.apply(M,[B].concat(J)):Y.apply(void 0,J)}},O.setLevel(O.getLevel())}(zr,x))}function ys(b){var w=Array.isArray(b)?b:[b],x=Bt(an,this),O=x.nodes,M=x.fitNodeIds;O.remove(w,{removed:!1}),M.length&&w.find(function(I){return M.includes(I)})!==void 0&&Bt(an,this).fitNodes(M.filter(function(I){return!w.includes(I)}))}function Wf(b){var w=Array.isArray(b)?b:[b];Bt(an,this).rels.remove(w,{removed:!1})}function Hg(b){var w=b.find(function(O){return!function(M){return!!M&&typeof M.id=="string"&&M.id.length>0}(O)});if(w){var x="";throw/^\d+$/.test(w.id)||(x=" Node ids need to be numeric strings. Strings that contain anything other than numbers are not yet supported."),new TypeError("Invalid node provided: ".concat(JSON.stringify(w),".").concat(x))}}function Yg(b){for(var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],x="",O=null,M=Bt(an,this),I=M.nodes,B=M.rels,V={},z=0;z<w.length;z++){var Y=w[z];V[Y.id]=Y}for(var X=ei(ei({},I.idToItem),V),J=B.idToItem,ie=0;ie<b.length;ie++){var he=b[ie];if(!hb(he)){O=he,/^\d+$/.test(he.id)&&(x=" Node ids need to be numeric strings. Strings that contain anything other than numbers are not yet supported.");break}if(J[he.id]===void 0){var ge=X[he.from],le=X[he.to];if(ge===void 0){x=' Node with id "'.concat(he.from,'" does not exist.'),O=he;break}if(le===void 0){x=' Node with id "'.concat(he.to,'" does not exist.'),O=he;break}}}if(O!==null)throw new TypeError("Invalid relationship provided: ".concat(JSON.stringify(O),".").concat(x))}var Ob={textColorForBackground:Sp};const xb=cm})();xu.RL;xu.wK;xu.x_;xu.lv;xu.YQ;var M7=xu.BP;xu.GZ;xu.Vw;xu.Ay;xu._G;xu.Wy;xu.h4;const jG=10,Bx=10;class eb{constructor(e,t){Rn(this,"nvl");Rn(this,"options");Rn(this,"container");Rn(this,"callbackMap");Rn(this,"addEventListener",(e,t,n)=>{var i;(i=this.container)==null||i.addEventListener(e,t,n)});Rn(this,"removeEventListener",(e,t,n)=>{var i;(i=this.container)==null||i.removeEventListener(e,t,n)});Rn(this,"callCallbackIfRegistered",(e,...t)=>{const n=this.callbackMap.get(e);typeof n=="function"&&n(...t)});Rn(this,"updateCallback",(e,t)=>{this.callbackMap.set(e,t)});Rn(this,"removeCallback",e=>{this.callbackMap.delete(e)});this.nvl=e,this.options=t,this.container=this.nvl.getContainer(),this.callbackMap=new Map}get nvlInstance(){return this.nvl}get currentOptions(){return this.options}get containerInstance(){return this.container}}const FG=(r,e)=>{const t=Math.abs(r.clientX-e.x),n=Math.abs(r.clientY-e.y);return t>Bx||n>Bx?!0:Math.pow(t,2)+Math.pow(n,2)>Bx},BG=(r,e)=>{const t=r.getBoundingClientRect(),n=window.devicePixelRatio||1;return{x:(e.clientX-t.left-t.width*.5)*n,y:(e.clientY-t.top-t.height*.5)*n}};class L7 extends eb{constructor(t,n={selectOnClick:!1}){super(t,n);Rn(this,"moved");Rn(this,"mousePosition");Rn(this,"handleMouseDown",t=>{this.mousePosition={x:t.clientX,y:t.clientY}});Rn(this,"handleRightClick",t=>{var a,s;t.preventDefault();const{nvlTargets:n}=this.nvlInstance.getHits(t),{nodes:i=[],relationships:o=[]}=n;if(i.length===0&&o.length===0){this.callCallbackIfRegistered("onCanvasRightClick",t);return}i.length>0?this.callCallbackIfRegistered("onNodeRightClick",(a=i[0])==null?void 0:a.data,n,t):o.length>0&&this.callCallbackIfRegistered("onRelationshipRightClick",(s=o[0])==null?void 0:s.data,n,t)});Rn(this,"handleDoubleClick",t=>{var a,s;const{nvlTargets:n}=this.nvlInstance.getHits(t),{nodes:i=[],relationships:o=[]}=n;if(i.length===0&&o.length===0){this.callCallbackIfRegistered("onCanvasDoubleClick",t);return}i.length>0?this.callCallbackIfRegistered("onNodeDoubleClick",(a=i[0])==null?void 0:a.data,n,t):o.length>0&&this.callCallbackIfRegistered("onRelationshipDoubleClick",(s=o[0])==null?void 0:s.data,n,t)});Rn(this,"handleClick",t=>{var a,s;if(FG(t,this.mousePosition)||t.button!==0)return;const{nvlTargets:n}=this.nvlInstance.getHits(t),{nodes:i=[],relationships:o=[]}=n;if(i.length===0&&o.length===0){this.currentOptions.selectOnClick===!0&&this.nvlInstance.deselectAll(),this.callCallbackIfRegistered("onCanvasClick",t);return}if(i.length>0){const u=i.map(l=>l.data);if(this.currentOptions.selectOnClick===!0){const l=this.nvlInstance.getSelectedNodes(),c=this.nvlInstance.getSelectedRelationships(),h=[...u[0]?[{id:u[0].id,selected:!0}]:[],...l.map(v=>({id:v.id,selected:!1}))],d=c.map(v=>({...v,selected:!1}));this.nvlInstance.updateElementsInGraph(h,d)}this.callCallbackIfRegistered("onNodeClick",(a=i[0])==null?void 0:a.data,n,t)}else if(o.length>0){const u=o.map(l=>l.data);if(this.currentOptions.selectOnClick===!0){const l=this.nvlInstance.getSelectedNodes(),c=this.nvlInstance.getSelectedRelationships(),f=l.map(v=>({id:v.id,selected:!1})),d=[...u[0]?[{id:u[0].id,selected:!0}]:[],...c.map(v=>({...v,selected:!1}))];this.nvlInstance.updateElementsInGraph(f,d)}this.callCallbackIfRegistered("onRelationshipClick",(s=o[0])==null?void 0:s.data,n,t)}});Rn(this,"destroy",()=>{this.removeEventListener("mousedown",this.handleMouseDown,!0),this.removeEventListener("click",this.handleClick,!0),this.removeEventListener("dblclick",this.handleDoubleClick,!0),this.removeEventListener("contextmenu",this.handleRightClick,!0)});this.mousePosition={x:0,y:0},this.addEventListener("mousedown",this.handleMouseDown,!0),this.addEventListener("click",this.handleClick,!0),this.addEventListener("dblclick",this.handleDoubleClick,!0),this.addEventListener("contextmenu",this.handleRightClick,!0)}}class N7 extends eb{constructor(t,n={drawShadowOnHover:!1}){super(t,n);Rn(this,"currentHoveredElement");Rn(this,"currentHoveredElementIsNode");Rn(this,"updates");Rn(this,"handleHover",t=>{const{nvlTargets:n}=this.nvlInstance.getHits(t),{nodes:i=[],relationships:o=[]}=n,a=i[0]??o[0],s=a==null?void 0:a.data;if(this.currentElementNeedsUnHover(s==null?void 0:s.id)&&this.unHoverCurrentElement(),s!==void 0&&i[0]!==void 0)this.updates.nodes.push({id:s.id,hovered:!0}),this.currentHoveredElement=s,this.currentHoveredElementIsNode=!0;else if(a!==void 0){const{id:l,from:c,to:f}=s;this.updates.relationships.push({id:l,from:c,to:f,hovered:!0}),this.currentHoveredElement=s,this.currentHoveredElementIsNode=!1}else this.currentHoveredElement=void 0,this.currentHoveredElementIsNode=void 0;this.callCallbackIfRegistered("onHover",this.currentHoveredElement,n,t),this.currentOptions.drawShadowOnHover===!0&&this.nvlInstance.getNodes().length>0&&this.nvlInstance.updateElementsInGraph(this.updates.nodes,this.updates.relationships),this.clearUpdates()});this.updates={nodes:[],relationships:[]},this.addEventListener("mousemove",this.handleHover,!0)}clearUpdates(){this.updates.nodes=[],this.updates.relationships=[]}currentElementNeedsUnHover(t){return this.currentHoveredElement!==void 0&&this.currentHoveredElement.id!==t}unHoverCurrentElement(){if(this.currentHoveredElement===void 0)return;const t={id:this.currentHoveredElement.id,hovered:!1};if(this.currentHoveredElementIsNode===!0)this.updates.nodes.push(t);else{const{from:n,to:i}=this.currentHoveredElement;this.updates.relationships.push({...t,from:n,to:i})}}destroy(){this.removeEventListener("mousemove",this.handleHover,!0)}}var Mm={exports:{}},Qm={exports:{}},UG=Qm.exports,oD;function qG(){return oD||(oD=1,function(r,e){(function(t,n){r.exports=n()})(UG,function(){function t(p,m,E,C,P){(function T(R,D,L,j,F){for(;j>L;){if(j-L>600){var q=j-L+1,W=D-L+1,Z=Math.log(q),Q=.5*Math.exp(2*Z/3),re=.5*Math.sqrt(Z*Q*(q-Q)/q)*(W-q/2<0?-1:1),ee=Math.max(L,Math.floor(D-W*Q/q+re)),ue=Math.min(j,Math.floor(D+(q-W)*Q/q+re));T(R,D,ee,ue,F)}var de=R[D],se=L,be=j;for(n(R,L,D),F(R[j],de)>0&&n(R,L,j);se<be;){for(n(R,se,be),se++,be--;F(R[se],de)<0;)se++;for(;F(R[be],de)>0;)be--}F(R[L],de)===0?n(R,L,be):n(R,++be,j),be<=D&&(L=be+1),D<=be&&(j=be-1)}})(p,m,E||0,C||p.length-1,P||i)}function n(p,m,E){var C=p[m];p[m]=p[E],p[E]=C}function i(p,m){return p<m?-1:p>m?1:0}var o=function(p){p===void 0&&(p=9),this._maxEntries=Math.max(4,p),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function a(p,m,E){if(!E)return m.indexOf(p);for(var C=0;C<m.length;C++)if(E(p,m[C]))return C;return-1}function s(p,m){u(p,0,p.children.length,m,p)}function u(p,m,E,C,P){P||(P=_(null)),P.minX=1/0,P.minY=1/0,P.maxX=-1/0,P.maxY=-1/0;for(var T=m;T<E;T++){var R=p.children[T];l(P,p.leaf?C(R):R)}return P}function l(p,m){return p.minX=Math.min(p.minX,m.minX),p.minY=Math.min(p.minY,m.minY),p.maxX=Math.max(p.maxX,m.maxX),p.maxY=Math.max(p.maxY,m.maxY),p}function c(p,m){return p.minX-m.minX}function f(p,m){return p.minY-m.minY}function h(p){return(p.maxX-p.minX)*(p.maxY-p.minY)}function d(p){return p.maxX-p.minX+(p.maxY-p.minY)}function v(p,m){return p.minX<=m.minX&&p.minY<=m.minY&&m.maxX<=p.maxX&&m.maxY<=p.maxY}function g(p,m){return m.minX<=p.maxX&&m.minY<=p.maxY&&m.maxX>=p.minX&&m.maxY>=p.minY}function _(p){return{children:p,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y(p,m,E,C,P){for(var T=[m,E];T.length;)if(!((E=T.pop())-(m=T.pop())<=C)){var R=m+Math.ceil((E-m)/C/2)*C;t(p,R,m,E,P),T.push(m,R,R,E)}}return o.prototype.all=function(){return this._all(this.data,[])},o.prototype.search=function(p){var m=this.data,E=[];if(!g(p,m))return E;for(var C=this.toBBox,P=[];m;){for(var T=0;T<m.children.length;T++){var R=m.children[T],D=m.leaf?C(R):R;g(p,D)&&(m.leaf?E.push(R):v(p,D)?this._all(R,E):P.push(R))}m=P.pop()}return E},o.prototype.collides=function(p){var m=this.data;if(!g(p,m))return!1;for(var E=[];m;){for(var C=0;C<m.children.length;C++){var P=m.children[C],T=m.leaf?this.toBBox(P):P;if(g(p,T)){if(m.leaf||v(p,T))return!0;E.push(P)}}m=E.pop()}return!1},o.prototype.load=function(p){if(!p||!p.length)return this;if(p.length<this._minEntries){for(var m=0;m<p.length;m++)this.insert(p[m]);return this}var E=this._build(p.slice(),0,p.length-1,0);if(this.data.children.length)if(this.data.height===E.height)this._splitRoot(this.data,E);else{if(this.data.height<E.height){var C=this.data;this.data=E,E=C}this._insert(E,this.data.height-E.height-1,!0)}else this.data=E;return this},o.prototype.insert=function(p){return p&&this._insert(p,this.data.height-1),this},o.prototype.clear=function(){return this.data=_([]),this},o.prototype.remove=function(p,m){if(!p)return this;for(var E,C,P,T=this.data,R=this.toBBox(p),D=[],L=[];T||D.length;){if(T||(T=D.pop(),C=D[D.length-1],E=L.pop(),P=!0),T.leaf){var j=a(p,T.children,m);if(j!==-1)return T.children.splice(j,1),D.push(T),this._condense(D),this}P||T.leaf||!v(T,R)?C?(E++,T=C.children[E],P=!1):T=null:(D.push(T),L.push(E),E=0,C=T,T=T.children[0])}return this},o.prototype.toBBox=function(p){return p},o.prototype.compareMinX=function(p,m){return p.minX-m.minX},o.prototype.compareMinY=function(p,m){return p.minY-m.minY},o.prototype.toJSON=function(){return this.data},o.prototype.fromJSON=function(p){return this.data=p,this},o.prototype._all=function(p,m){for(var E=[];p;)p.leaf?m.push.apply(m,p.children):E.push.apply(E,p.children),p=E.pop();return m},o.prototype._build=function(p,m,E,C){var P,T=E-m+1,R=this._maxEntries;if(T<=R)return s(P=_(p.slice(m,E+1)),this.toBBox),P;C||(C=Math.ceil(Math.log(T)/Math.log(R)),R=Math.ceil(T/Math.pow(R,C-1))),(P=_([])).leaf=!1,P.height=C;var D=Math.ceil(T/R),L=D*Math.ceil(Math.sqrt(R));y(p,m,E,L,this.compareMinX);for(var j=m;j<=E;j+=L){var F=Math.min(j+L-1,E);y(p,j,F,D,this.compareMinY);for(var q=j;q<=F;q+=D){var W=Math.min(q+D-1,F);P.children.push(this._build(p,q,W,C-1))}}return s(P,this.toBBox),P},o.prototype._chooseSubtree=function(p,m,E,C){for(;C.push(m),!m.leaf&&C.length-1!==E;){for(var P=1/0,T=1/0,R=void 0,D=0;D<m.children.length;D++){var L=m.children[D],j=h(L),F=(q=p,W=L,(Math.max(W.maxX,q.maxX)-Math.min(W.minX,q.minX))*(Math.max(W.maxY,q.maxY)-Math.min(W.minY,q.minY))-j);F<T?(T=F,P=j<P?j:P,R=L):F===T&&j<P&&(P=j,R=L)}m=R||m.children[0]}var q,W;return m},o.prototype._insert=function(p,m,E){var C=E?p:this.toBBox(p),P=[],T=this._chooseSubtree(C,this.data,m,P);for(T.children.push(p),l(T,C);m>=0&&P[m].children.length>this._maxEntries;)this._split(P,m),m--;this._adjustParentBBoxes(C,P,m)},o.prototype._split=function(p,m){var E=p[m],C=E.children.length,P=this._minEntries;this._chooseSplitAxis(E,P,C);var T=this._chooseSplitIndex(E,P,C),R=_(E.children.splice(T,E.children.length-T));R.height=E.height,R.leaf=E.leaf,s(E,this.toBBox),s(R,this.toBBox),m?p[m-1].children.push(R):this._splitRoot(E,R)},o.prototype._splitRoot=function(p,m){this.data=_([p,m]),this.data.height=p.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},o.prototype._chooseSplitIndex=function(p,m,E){for(var C,P,T,R,D,L,j,F=1/0,q=1/0,W=m;W<=E-m;W++){var Z=u(p,0,W,this.toBBox),Q=u(p,W,E,this.toBBox),re=(P=Z,T=Q,R=void 0,D=void 0,L=void 0,j=void 0,R=Math.max(P.minX,T.minX),D=Math.max(P.minY,T.minY),L=Math.min(P.maxX,T.maxX),j=Math.min(P.maxY,T.maxY),Math.max(0,L-R)*Math.max(0,j-D)),ee=h(Z)+h(Q);re<F?(F=re,C=W,q=ee<q?ee:q):re===F&&ee<q&&(q=ee,C=W)}return C||E-m},o.prototype._chooseSplitAxis=function(p,m,E){var C=p.leaf?this.compareMinX:c,P=p.leaf?this.compareMinY:f;this._allDistMargin(p,m,E,C)<this._allDistMargin(p,m,E,P)&&p.children.sort(C)},o.prototype._allDistMargin=function(p,m,E,C){p.children.sort(C);for(var P=this.toBBox,T=u(p,0,m,P),R=u(p,E-m,E,P),D=d(T)+d(R),L=m;L<E-m;L++){var j=p.children[L];l(T,p.leaf?P(j):j),D+=d(T)}for(var F=E-m-1;F>=m;F--){var q=p.children[F];l(R,p.leaf?P(q):q),D+=d(R)}return D},o.prototype._adjustParentBBoxes=function(p,m,E){for(var C=E;C>=0;C--)l(m[C],p)},o.prototype._condense=function(p){for(var m=p.length-1,E=void 0;m>=0;m--)p[m].children.length===0?m>0?(E=p[m-1].children).splice(E.indexOf(p[m]),1):this.clear():s(p[m],this.toBBox)},o})}(Qm)),Qm.exports}class zG{constructor(e=[],t=GG){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:n}=this,i=t[e];for(;e>0;){const o=e-1>>1,a=t[o];if(n(i,a)>=0)break;t[e]=a,e=o}t[e]=i}_down(e){const{data:t,compare:n}=this,i=this.length>>1,o=t[e];for(;e<i;){let a=(e<<1)+1,s=t[a];const u=a+1;if(u<this.length&&n(t[u],s)<0&&(a=u,s=t[u]),n(s,o)>=0)break;t[e]=s,e=a}t[e]=o}}function GG(r,e){return r<e?-1:r>e?1:0}const VG=Object.freeze(Object.defineProperty({__proto__:null,default:zG},Symbol.toStringTag,{value:"Module"})),WG=XN(VG);var oy={exports:{}},Ux,aD;function HG(){return aD||(aD=1,Ux=function(e,t,n,i){var o=e[0],a=e[1],s=!1;n===void 0&&(n=0),i===void 0&&(i=t.length);for(var u=(i-n)/2,l=0,c=u-1;l<u;c=l++){var f=t[n+l*2+0],h=t[n+l*2+1],d=t[n+c*2+0],v=t[n+c*2+1],g=h>a!=v>a&&o<(d-f)*(a-h)/(v-h)+f;g&&(s=!s)}return s}),Ux}var qx,sD;function YG(){return sD||(sD=1,qx=function(e,t,n,i){var o=e[0],a=e[1],s=!1;n===void 0&&(n=0),i===void 0&&(i=t.length);for(var u=i-n,l=0,c=u-1;l<u;c=l++){var f=t[l+n][0],h=t[l+n][1],d=t[c+n][0],v=t[c+n][1],g=h>a!=v>a&&o<(d-f)*(a-h)/(v-h)+f;g&&(s=!s)}return s}),qx}var uD;function XG(){if(uD)return oy.exports;uD=1;var r=HG(),e=YG();return oy.exports=function(n,i,o,a){return i.length>0&&Array.isArray(i[0])?e(n,i,o,a):r(n,i,o,a)},oy.exports.nested=e,oy.exports.flat=r,oy.exports}var dy={exports:{}},$G=dy.exports,lD;function KG(){return lD||(lD=1,function(r,e){(function(t,n){n(e)})($G,function(t){const i=33306690738754706e-32;function o(g,_,y,p,m){let E,C,P,T,R=_[0],D=p[0],L=0,j=0;D>R==D>-R?(E=R,R=_[++L]):(E=D,D=p[++j]);let F=0;if(L<g&&j<y)for(D>R==D>-R?(P=E-((C=R+E)-R),R=_[++L]):(P=E-((C=D+E)-D),D=p[++j]),E=C,P!==0&&(m[F++]=P);L<g&&j<y;)D>R==D>-R?(P=E-((C=E+R)-(T=C-E))+(R-T),R=_[++L]):(P=E-((C=E+D)-(T=C-E))+(D-T),D=p[++j]),E=C,P!==0&&(m[F++]=P);for(;L<g;)P=E-((C=E+R)-(T=C-E))+(R-T),R=_[++L],E=C,P!==0&&(m[F++]=P);for(;j<y;)P=E-((C=E+D)-(T=C-E))+(D-T),D=p[++j],E=C,P!==0&&(m[F++]=P);return E===0&&F!==0||(m[F++]=E),F}function a(g){return new Float64Array(g)}const s=33306690738754716e-32,u=22204460492503146e-32,l=11093356479670487e-47,c=a(4),f=a(8),h=a(12),d=a(16),v=a(4);t.orient2d=function(g,_,y,p,m,E){const C=(_-E)*(y-m),P=(g-m)*(p-E),T=C-P;if(C===0||P===0||C>0!=P>0)return T;const R=Math.abs(C+P);return Math.abs(T)>=s*R?T:-function(D,L,j,F,q,W,Z){let Q,re,ee,ue,de,se,be,Le,fe,ce,Ee,Ce,ke,Ie,ve,we,xe,Fe;const He=D-q,at=j-q,wt=L-W,it=F-W;de=(ve=(Le=He-(be=(se=134217729*He)-(se-He)))*(ce=it-(fe=(se=134217729*it)-(se-it)))-((Ie=He*it)-be*fe-Le*fe-be*ce))-(Ee=ve-(xe=(Le=wt-(be=(se=134217729*wt)-(se-wt)))*(ce=at-(fe=(se=134217729*at)-(se-at)))-((we=wt*at)-be*fe-Le*fe-be*ce))),c[0]=ve-(Ee+de)+(de-xe),de=(ke=Ie-((Ce=Ie+Ee)-(de=Ce-Ie))+(Ee-de))-(Ee=ke-we),c[1]=ke-(Ee+de)+(de-we),de=(Fe=Ce+Ee)-Ce,c[2]=Ce-(Fe-de)+(Ee-de),c[3]=Fe;let H=function(Be,Je){let Tt=Je[0];for(let Lt=1;Lt<Be;Lt++)Tt+=Je[Lt];return Tt}(4,c),$=u*Z;if(H>=$||-H>=$||(Q=D-(He+(de=D-He))+(de-q),ee=j-(at+(de=j-at))+(de-q),re=L-(wt+(de=L-wt))+(de-W),ue=F-(it+(de=F-it))+(de-W),Q===0&&re===0&&ee===0&&ue===0)||($=l*Z+i*Math.abs(H),(H+=He*ue+it*Q-(wt*ee+at*re))>=$||-H>=$))return H;de=(ve=(Le=Q-(be=(se=134217729*Q)-(se-Q)))*(ce=it-(fe=(se=134217729*it)-(se-it)))-((Ie=Q*it)-be*fe-Le*fe-be*ce))-(Ee=ve-(xe=(Le=re-(be=(se=134217729*re)-(se-re)))*(ce=at-(fe=(se=134217729*at)-(se-at)))-((we=re*at)-be*fe-Le*fe-be*ce))),v[0]=ve-(Ee+de)+(de-xe),de=(ke=Ie-((Ce=Ie+Ee)-(de=Ce-Ie))+(Ee-de))-(Ee=ke-we),v[1]=ke-(Ee+de)+(de-we),de=(Fe=Ce+Ee)-Ce,v[2]=Ce-(Fe-de)+(Ee-de),v[3]=Fe;const ne=o(4,c,4,v,f);de=(ve=(Le=He-(be=(se=134217729*He)-(se-He)))*(ce=ue-(fe=(se=134217729*ue)-(se-ue)))-((Ie=He*ue)-be*fe-Le*fe-be*ce))-(Ee=ve-(xe=(Le=wt-(be=(se=134217729*wt)-(se-wt)))*(ce=ee-(fe=(se=134217729*ee)-(se-ee)))-((we=wt*ee)-be*fe-Le*fe-be*ce))),v[0]=ve-(Ee+de)+(de-xe),de=(ke=Ie-((Ce=Ie+Ee)-(de=Ce-Ie))+(Ee-de))-(Ee=ke-we),v[1]=ke-(Ee+de)+(de-we),de=(Fe=Ce+Ee)-Ce,v[2]=Ce-(Fe-de)+(Ee-de),v[3]=Fe;const Re=o(ne,f,4,v,h);de=(ve=(Le=Q-(be=(se=134217729*Q)-(se-Q)))*(ce=ue-(fe=(se=134217729*ue)-(se-ue)))-((Ie=Q*ue)-be*fe-Le*fe-be*ce))-(Ee=ve-(xe=(Le=re-(be=(se=134217729*re)-(se-re)))*(ce=ee-(fe=(se=134217729*ee)-(se-ee)))-((we=re*ee)-be*fe-Le*fe-be*ce))),v[0]=ve-(Ee+de)+(de-xe),de=(ke=Ie-((Ce=Ie+Ee)-(de=Ce-Ie))+(Ee-de))-(Ee=ke-we),v[1]=ke-(Ee+de)+(de-we),de=(Fe=Ce+Ee)-Ce,v[2]=Ce-(Fe-de)+(Ee-de),v[3]=Fe;const De=o(Re,h,4,v,d);return d[De-1]}(g,_,y,p,m,E,R)},t.orient2dfast=function(g,_,y,p,m,E){return(_-E)*(y-m)-(g-m)*(p-E)},Object.defineProperty(t,"__esModule",{value:!0})})}(dy,dy.exports)),dy.exports}var cD;function ZG(){if(cD)return Mm.exports;cD=1;var r=qG(),e=WG,t=XG(),n=KG().orient2d;e.default&&(e=e.default),Mm.exports=i,Mm.exports.default=i;function i(E,C,P){C=Math.max(0,C===void 0?2:C),P=P||0;var T=d(E),R=new r(16);R.toBBox=function(be){return{minX:be[0],minY:be[1],maxX:be[0],maxY:be[1]}},R.compareMinX=function(be,Le){return be[0]-Le[0]},R.compareMinY=function(be,Le){return be[1]-Le[1]},R.load(E);for(var D=[],L=0,j;L<T.length;L++){var F=T[L];R.remove(F),j=v(F,j),D.push(j)}var q=new r(16);for(L=0;L<D.length;L++)q.insert(h(D[L]));for(var W=C*C,Z=P*P;D.length;){var Q=D.shift(),re=Q.p,ee=Q.next.p,ue=g(re,ee);if(!(ue<Z)){var de=ue/W;F=o(R,Q.prev.p,re,ee,Q.next.next.p,de,q),F&&Math.min(g(F,re),g(F,ee))<=de&&(D.push(Q),D.push(v(F,Q)),R.remove(F),q.remove(Q),q.insert(h(Q)),q.insert(h(Q.next)))}}Q=j;var se=[];do se.push(Q.p),Q=Q.next;while(Q!==j);return se.push(Q.p),se}function o(E,C,P,T,R,D,L){for(var j=new e([],a),F=E.data;F;){for(var q=0;q<F.children.length;q++){var W=F.children[q],Z=F.leaf?_(W,P,T):s(P,T,W);Z>D||j.push({node:W,dist:Z})}for(;j.length&&!j.peek().node.children;){var Q=j.pop(),re=Q.node,ee=_(re,C,P),ue=_(re,T,R);if(Q.dist<ee&&Q.dist<ue&&l(P,re,L)&&l(T,re,L))return re}F=j.pop(),F&&(F=F.node)}return null}function a(E,C){return E.dist-C.dist}function s(E,C,P){if(u(E,P)||u(C,P))return 0;var T=y(E[0],E[1],C[0],C[1],P.minX,P.minY,P.maxX,P.minY);if(T===0)return 0;var R=y(E[0],E[1],C[0],C[1],P.minX,P.minY,P.minX,P.maxY);if(R===0)return 0;var D=y(E[0],E[1],C[0],C[1],P.maxX,P.minY,P.maxX,P.maxY);if(D===0)return 0;var L=y(E[0],E[1],C[0],C[1],P.minX,P.maxY,P.maxX,P.maxY);return L===0?0:Math.min(T,R,D,L)}function u(E,C){return E[0]>=C.minX&&E[0]<=C.maxX&&E[1]>=C.minY&&E[1]<=C.maxY}function l(E,C,P){for(var T=Math.min(E[0],C[0]),R=Math.min(E[1],C[1]),D=Math.max(E[0],C[0]),L=Math.max(E[1],C[1]),j=P.search({minX:T,minY:R,maxX:D,maxY:L}),F=0;F<j.length;F++)if(f(j[F].p,j[F].next.p,E,C))return!1;return!0}function c(E,C,P){return n(E[0],E[1],C[0],C[1],P[0],P[1])}function f(E,C,P,T){return E!==T&&C!==P&&c(E,C,P)>0!=c(E,C,T)>0&&c(P,T,E)>0!=c(P,T,C)>0}function h(E){var C=E.p,P=E.next.p;return E.minX=Math.min(C[0],P[0]),E.minY=Math.min(C[1],P[1]),E.maxX=Math.max(C[0],P[0]),E.maxY=Math.max(C[1],P[1]),E}function d(E){for(var C=E[0],P=E[0],T=E[0],R=E[0],D=0;D<E.length;D++){var L=E[D];L[0]<C[0]&&(C=L),L[0]>T[0]&&(T=L),L[1]<P[1]&&(P=L),L[1]>R[1]&&(R=L)}var j=[C,P,T,R],F=j.slice();for(D=0;D<E.length;D++)t(E[D],j)||F.push(E[D]);return m(F)}function v(E,C){var P={p:E,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return C?(P.next=C.next,P.prev=C,C.next.prev=P,C.next=P):(P.prev=P,P.next=P),P}function g(E,C){var P=E[0]-C[0],T=E[1]-C[1];return P*P+T*T}function _(E,C,P){var T=C[0],R=C[1],D=P[0]-T,L=P[1]-R;if(D!==0||L!==0){var j=((E[0]-T)*D+(E[1]-R)*L)/(D*D+L*L);j>1?(T=P[0],R=P[1]):j>0&&(T+=D*j,R+=L*j)}return D=E[0]-T,L=E[1]-R,D*D+L*L}function y(E,C,P,T,R,D,L,j){var F=P-E,q=T-C,W=L-R,Z=j-D,Q=E-R,re=C-D,ee=F*F+q*q,ue=F*W+q*Z,de=W*W+Z*Z,se=F*Q+q*re,be=W*Q+Z*re,Le=ee*de-ue*ue,fe,ce,Ee,Ce,ke=Le,Ie=Le;Le===0?(ce=0,ke=1,Ce=be,Ie=de):(ce=ue*be-de*se,Ce=ee*be-ue*se,ce<0?(ce=0,Ce=be,Ie=de):ce>ke&&(ce=ke,Ce=be+ue,Ie=de)),Ce<0?(Ce=0,-se<0?ce=0:-se>ee?ce=ke:(ce=-se,ke=ee)):Ce>Ie&&(Ce=Ie,-se+ue<0?ce=0:-se+ue>ee?ce=ke:(ce=-se+ue,ke=ee)),fe=ce===0?0:ce/ke,Ee=Ce===0?0:Ce/Ie;var ve=(1-fe)*E+fe*P,we=(1-fe)*C+fe*T,xe=(1-Ee)*R+Ee*L,Fe=(1-Ee)*D+Ee*j,He=xe-ve,at=Fe-we;return He*He+at*at}function p(E,C){return E[0]===C[0]?E[1]-C[1]:E[0]-C[0]}function m(E){E.sort(p);for(var C=[],P=0;P<E.length;P++){for(;C.length>=2&&c(C[C.length-2],C[C.length-1],E[P])<=0;)C.pop();C.push(E[P])}for(var T=[],R=E.length-1;R>=0;R--){for(;T.length>=2&&c(T[T.length-2],T[T.length-1],E[R])<=0;)T.pop();T.push(E[R])}return T.pop(),C.pop(),C.concat(T)}return Mm.exports}ZG();var gN=Ci();class j7 extends eb{constructor(t,n={excludeNodeMargin:!1}){super(t,n);Rn(this,"mousePosition");Rn(this,"targets");Rn(this,"shouldPan");Rn(this,"updateTargets",(t,n)=>{this.targets=t,this.currentOptions.excludeNodeMargin=n});Rn(this,"handleMouseDown",t=>{const n=this.nvlInstance.getHits(t,gN.difference(["node","relationship"],this.targets),{hitNodeMarginWidth:this.currentOptions.excludeNodeMargin===!0?jG:0});n.nvlTargets.nodes.length>0||n.nvlTargets.relationships.length>0?this.shouldPan=!1:(this.mousePosition={x:t.clientX,y:t.clientY},this.shouldPan=!0)});Rn(this,"handleMouseMove",t=>{if(!this.shouldPan||t.buttons!==1)return;const n=this.nvlInstance.getScale(),{x:i,y:o}=this.nvlInstance.getPan(),a=(t.clientX-this.mousePosition.x)/n*window.devicePixelRatio,s=(t.clientY-this.mousePosition.y)/n*window.devicePixelRatio;this.nvlInstance.setPan(i-a,o-s),this.callCallbackIfRegistered("onPan",{x:i-a,y:o-s},t),this.mousePosition={x:t.clientX,y:t.clientY}});Rn(this,"handleMouseUp",()=>{this.shouldPan=!1});this.mousePosition={x:0,y:0},this.targets=[],this.shouldPan=!1,this.addEventListener("mousedown",this.handleMouseDown,!0),this.addEventListener("mousemove",this.handleMouseMove,!0),this.addEventListener("mouseup",this.handleMouseUp,!0)}destroy(){this.removeEventListener("mousedown",this.handleMouseDown,!0),this.removeEventListener("mousemove",this.handleMouseMove,!0),this.removeEventListener("mouseup",this.handleMouseUp,!0)}}class F7 extends eb{constructor(t,n={}){super(t,n);Rn(this,"throttledZoom",gN.throttle(t=>{const n=this.nvlInstance.getScale(),{x:i,y:o}=this.nvlInstance.getPan(),a=t.deltaY/500,s=n-a*Math.min(1,n),u=BG(this.containerInstance,t),l=i+(u.x/n-u.x/s),c=o+(u.y/n-u.y/s);this.nvlInstance.setZoomAndPan(s,l,c),this.callCallbackIfRegistered("onZoom",s,t)},25,{leading:!0}));Rn(this,"handleWheel",t=>{t.preventDefault(),this.throttledZoom(t)});Rn(this,"destroy",()=>{this.removeEventListener("wheel",this.handleWheel)});this.addEventListener("wheel",this.handleWheel)}}const QG={name:"NodeCommon",props:{title:{type:String,default:""}},data(){return{isShowMenu:!1,menus:[{label:"10%",value:.1},{label:"50%",value:.5},{label:"100%",value:1},{label:"200%",value:2},{label:"300%",value:3},{label:"400%",value:4},{label:"500%",value:5}]}},mounted(){document.addEventListener("click",this.documentClick)},beforeUnmount(){document.removeEventListener("click",this.documentClick)},methods:{handleMenu(r){this.$emit("change",r)},showMenu(){this.isShowMenu=!this.isShowMenu},documentClick(r){this.isShowMenu&&!this.$el.querySelector(".zoom-select-options").contains(r.target)&&r.target!==this.$el.querySelector(".zoom-select-label")&&(this.isShowMenu=!1)}}},JG={class:"zoom-select"},e7={class:"zoom-select-options"},t7=["onClick"];function r7(r,e,t,n,i,o){return py(),vy("div",JG,[ad("div",{class:"zoom-select-label",onClick:e[0]||(e[0]=(...a)=>o.showMenu&&o.showMenu(...a))},xT(t.title),1),$N(ad("div",e7,[(py(!0),vy(ZN,null,QN(i.menus,a=>(py(),vy("div",{class:"zoom-select-option",key:a.value,onClick:s=>o.handleMenu(a)},xT(a.label),9,t7))),128)),e[2]||(e[2]=ad("div",{class:"option-line"},null,-1)),ad("div",{class:"zoom-select-option",onClick:e[1]||(e[1]=a=>o.handleMenu({label:"5%",value:5}))},"全览")],512),[[KN,i.isShowMenu]])])}const n7=pS(QG,[["render",r7],["__scopeId","data-v-8ec24dc3"]]),i7={class:"custom-control-warpper"},o7={class:"custom-control"},a7={__name:"index",props:{value:{type:Number,default:1}},emits:["change"],setup(r,{emit:e}){const t=e,n=r,i=JN(()=>`${(n.value*100).toFixed(0)}%`),o=({value:l})=>{u(l)},a=()=>{let l=n.value-.1;l<.1&&(l=.1),u(l)},s=()=>{let l=n.value+.1;l>5&&(l=5),u(l)},u=l=>{l=Number(l.toFixed(1)),t("change",l)};return(l,c)=>{const f=aj;return py(),vy("div",i7,[ad("div",o7,[ad("div",{class:"action-btn zoom-btn",onClick:a},[Cb(f,{name:"minus",size:"16"})]),Cb(n7,{onChange:o,title:i.value},null,8,["title"]),ad("div",{class:"action-btn zoom-btn",onClick:s},[Cb(f,{name:"plus",size:"16"})])])])}}},B7=pS(a7,[["__scopeId","data-v-eaa243b2"]]);/*!
 * better-scroll / nested-scroll
 * (c) 2016-2023 ustbhuangyi
 * Released under the MIT License.
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function fD(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n}function s7(r){console.error("[BScroll warn]: "+r)}var Vy=typeof window<"u",g0=Vy&&navigator.userAgent.toLowerCase();g0&&g0.indexOf("android")>0;(function(){if(typeof g0=="string"){var r=/os (\d\d?_\d(_\d)?)/,e=r.exec(g0);if(!e)return!1;var t=e[1].split("_").map(function(n){return parseInt(n,10)});return t[0]===13&&t[1]>=4}return!1})();var u7=!1;if(Vy){var l7="test-passive";try{var hD={};Object.defineProperty(hD,"passive",{get:function(){u7=!0}}),window.addEventListener(l7,function(){},hD)}catch{}}var c7=function(r,e){for(var t in e)r[t]=e[t];return r};function rg(r,e){if(r.findIndex)return r.findIndex(e);var t=-1;return r.some(function(n,i,o){var a=e(n,i,o);if(a)return t=i,a}),t}var yN=Vy&&document.createElement("div").style,ug=function(){if(!Vy)return!1;for(var r=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}],e=0,t=r;e<t.length;e++){var n=t[e];if(yN[n.value]!==void 0)return n.key}return!1}();function eh(r){return ug===!1?r:ug==="standard"?r==="transitionEnd"?"transitionend":r:ug+r.charAt(0).toUpperCase()+r.substr(1)}ug&&ug!=="standard"&&""+ug.toLowerCase();eh("transform");eh("transition");Vy&&eh("perspective")in yN;eh("transitionTimingFunction"),eh("transitionDuration"),eh("transitionDelay"),eh("transformOrigin"),eh("transitionEnd"),eh("transitionProperty");var f7=function(){function r(e){this.ancestors=[],this.descendants=[],this.hooksManager=[],this.analyzed=!1,this.selfScroll=e}return r.create=function(e){return new r(e)},r.prototype.hasAncestors=function(e){var t=rg(this.ancestors,function(n){var i=n[0];return i===e});return t>-1},r.prototype.hasDescendants=function(e){var t=rg(this.descendants,function(n){var i=n[0];return i===e});return t>-1},r.prototype.addAncestor=function(e,t){var n=this.ancestors;n.push([e,t]),n.sort(function(i,o){return i[1]-o[1]})},r.prototype.addDescendant=function(e,t){var n=this.descendants;n.push([e,t]),n.sort(function(i,o){return i[1]-o[1]})},r.prototype.removeAncestor=function(e){var t=this.ancestors;if(t.length){var n=rg(this.ancestors,function(i){var o=i[0];return o===e});if(n>-1)return t.splice(n,1)}},r.prototype.removeDescendant=function(e){var t=this.descendants;if(t.length){var n=rg(this.descendants,function(i){var o=i[0];return o===e});if(n>-1)return t.splice(n,1)}},r.prototype.registerHooks=function(e,t,n){e.on(t,n),this.hooksManager.push([e,t,n])},r.prototype.setAnalyzed=function(e){e===void 0&&(e=!1),this.analyzed=e},r.prototype.purge=function(){var e=this;this.ancestors.forEach(function(t){var n=t[0];n.removeDescendant(e)}),this.descendants.forEach(function(t){var n=t[0];n.removeAncestor(e)}),this.hooksManager.forEach(function(t){var n=t[0],i=t[1],o=t[2];n.off(i,o)}),this.hooksManager=[]},r}(),h7="plugins.nestedScroll",d7=[{key:"purgeNestedScroll",name:"purgeNestedScroll"}],v7=d7.map(function(r){return{key:r.key,sourceKey:h7+"."+r.name}}),p7="INTERNAL_NESTED_SCROLL",g7=function(r){r.forEach(function(e){e.pending&&(e.stop(),e.resetPosition())})},dD=function(r){r.forEach(function(e){e.enable()})},Lm=function(r,e){r.forEach(function(t){(t.hasHorizontalScroll===e.hasHorizontalScroll||t.hasVerticalScroll===e.hasVerticalScroll)&&t.disable()})},y7=function(r){r.forEach(function(e){var t=e.scroller,n=t.actions,i=t.scrollBehaviorX,o=t.scrollBehaviorY;n.fingerMoved=!0,n.contentMoved=!1,n.directionLockAction.reset(),i.start(),o.start(),i.resetStartPos(),o.resetStartPos(),n.startTime=+new Date})},m7=function(r){var e=r.hasHorizontalScroll,t=r.hasVerticalScroll,n=r.x,i=r.y,o=r.minScrollX,a=r.maxScrollX,s=r.minScrollY,u=r.maxScrollY,l=r.movingDirectionX,c=r.movingDirectionY,f=!1,h=n>=o&&l===-1,d=n<=a&&l===1,v=i>=s&&c===-1,g=i<=u&&c===1;return t?f=v||g:e&&(f=h||d),f},b7=function(r){var e=r.hasHorizontalScroll,t=r.hasVerticalScroll,n=r.x,i=r.y,o=r.minScrollX,a=r.maxScrollX,s=r.minScrollY,u=r.maxScrollY,l=!1,c=n>o,f=n<a,h=i>s,d=i<u;return t?l=h||d:e&&(l=c||f),l},_7=function(r){r.scroller.reflow(),r.resetPosition(0)},w7=function(r,e){for(var t=0,n=r.parentNode;n&&n!==e;)t++,n=n.parentNode;return t},E7=function(){function r(e){var t=this.handleOptions(e),n=r.instancesMap[t];return n||(n=r.instancesMap[t]=this,n.store=[],n.hooksFn=[]),n.init(e),n}return r.getAllNestedScrolls=function(){var e=r.instancesMap;return Object.keys(e).map(function(t){return e[t]})},r.purgeAllNestedScrolls=function(){var e=r.getAllNestedScrolls();e.forEach(function(t){return t.purgeNestedScroll()})},r.prototype.handleOptions=function(e){var t=e.options.nestedScroll===!0?{}:e.options.nestedScroll,n={groupId:p7};this.options=c7(n,t);var i=typeof this.options.groupId;return i!=="string"&&i!=="number"&&s7("groupId must be string or number for NestedScroll plugin"),this.options.groupId},r.prototype.init=function(e){e.proxy(v7),this.addBScroll(e),this.buildBScrollGraph(),this.analyzeBScrollGraph(),this.ensureEventInvokeSequence(),this.handleHooks(e)},r.prototype.handleHooks=function(e){var t=this;this.registerHooks(e.hooks,e.hooks.eventTypes.destroy,function(){t.deleteScroll(e)})},r.prototype.deleteScroll=function(e){var t=e.wrapper;t.isBScrollContainer=void 0;var n=this.store,i=this.hooksFn,o=rg(n,function(h){return h.selfScroll===e});if(o>-1){var a=n[o];a.purge(),n.splice(o,1)}var s=rg(i,function(h){var d=h[0];return d===e.hooks});if(s>-1){var u=i[s],l=u[0],c=u[1],f=u[2];l.off(c,f),i.splice(s,1)}},r.prototype.addBScroll=function(e){this.store.push(f7.create(e))},r.prototype.buildBScrollGraph=function(){for(var e=this.store,t,n,i,o,a=this.store.length,s=0;s<a;s++){t=e[s],i=t.selfScroll.wrapper;for(var u=0;u<a;u++)if(n=e[u],o=n.selfScroll.wrapper,t!==n&&i.contains(o)){var l=w7(o,i);t.hasDescendants(n)||t.addDescendant(n,l),n.hasAncestors(t)||n.addAncestor(t,l)}}},r.prototype.analyzeBScrollGraph=function(){this.store.forEach(function(e){if(!e.analyzed){var t=e.ancestors,n=e.descendants,i=e.selfScroll,o=function(){var u=t.map(function(c){var f=c[0];return f.selfScroll}),l=n.map(function(c){var f=c[0];return f.selfScroll});g7(fD(u,l)),b7(i)&&_7(i),y7(u),Lm(u,i)},a=function(){var u=t.map(function(c){var f=c[0];return f.selfScroll}),l=n.map(function(c){var f=c[0];return f.selfScroll});dD(fD(u,l))};e.registerHooks(i,i.eventTypes.beforeScrollStart,o),e.registerHooks(i,i.eventTypes.touchEnd,a);var s=i.scroller.actions.hooks;e.registerHooks(s,s.eventTypes.detectMovingDirection,function(){var u=t.map(function(d){var v=d[0];return v.selfScroll}),l=u[0],c=u.slice(1),f=i.scroller.actions.contentMoved,h=u.length===0;if(f)Lm(u,i);else if(!h&&m7(i))return Lm([i],i),l&&dD([l]),Lm(c,i),!0}),e.setAnalyzed(!0)}})},r.prototype.ensureEventInvokeSequence=function(){var e=this.store.slice(),t=e.sort(function(n,i){return n.descendants.length-i.descendants.length});t.forEach(function(n){var i=n.selfScroll;i.scroller.actionsHandler.rebindDOMEvents()})},r.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},r.prototype.purgeNestedScroll=function(){var e=this.options.groupId;this.store.forEach(function(t){t.purge()}),this.store=[],this.hooksFn.forEach(function(t){var n=t[0],i=t[1],o=t[2];n.off(i,o)}),this.hooksFn=[],delete r.instancesMap[e]},r.pluginName="nestedScroll",r.instancesMap={},r}();const O7={class:"scroll-content"},x7={__name:"cu-scroll",props:{scrollX:{type:Boolean,default:!1},scrollY:{type:Boolean,default:!0},scrollbar:{type:[Boolean,Object],default:null},pullUpLoad:{type:[Boolean,Object],default:!0},groupId:{type:String,default:""}},emits:["onScrollEnd","scroll"],setup(r,{expose:e,emit:t}){Bp.use(sj),Bp.use(uj),Bp.use(cj),Bp.use(lj),Bp.use(E7);const n=t,i=r,o=ej(null);let a=null;const s=()=>{a.refresh()},u=f=>{let{el:h,time:d,offsetX:v,offsetY:g,easing:_}=f;a.scrollToElement(h,d,v,g,_)},l=()=>{a.enable()},c=()=>{a.disable()};return tj(()=>{let f={scrollX:i.scrollX,scrollY:i.scrollY,scrollbar:i.scrollbar||{},observeDOM:!0,pullUpLoad:i.pullUpLoad,probeType:0,mouseWheel:{speed:20,invert:!1,easeTime:300},preventDefault:!1,bounce:!1,click:!0};i.groupId&&(f.nestedScroll={groupId:i.groupId}),a=new Bp(o.value,f),a.on("pullingUp",()=>{n("onScrollEnd"),rj(()=>{a.finishPullUp()})}),a.on("scroll",h=>{n("scroll",h)})}),nj(()=>{a&&a.destroy()}),e({refresh:s,scrollToElement:u,enable:l,disable:c}),(f,h)=>(py(),vy("div",{class:"scroll-wrapper",ref_key:"scroller",ref:o},[ad("div",O7,[ij(f.$slots,"default",{},void 0,!0)])],512))}},U7=pS(x7,[["__scopeId","data-v-3d0b4120"]]);export{L7 as C,N7 as H,j7 as P,B7 as Z,fr as _,F7 as a,U7 as b,hr as c,jo as d,Mt as e,M7 as f,k7 as g,dg as h,Ry as i,pN as j,Iv as k,jx as l,I7 as m,aG as n,Jl as o,zL as p,cT as q,Dm as r,vT as s,$9 as t,D7 as u,by as v,nh as w,Xz as x,Iz as y,sG as z};
