function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/js/auto-track-DLyj4IhR.js","assets/js/vue-chunks-Dagx-vSq.js","assets/js/crypto-js-DN0vhd75.js","index-BdYv4pbp.js","assets/js/axios-BZ84_VUH.js","assets/js/qs-CSiAN3u4.js","assets/js/dayjs-CZ5VaChI.js","assets/css/index-BU-0VjGT.css","assets/js/pull-up.esm-D94Swpvl.js","assets/js/observe-dom.esm-CyCedSm-.js","assets/js/index-Db4E0li1.js","assets/js/index-DnzIFMnR.js","assets/js/is-plan-event-enabled-DS1Agtkw.js","assets/js/index-CqBqQQ5D.js","assets/js/index-Cfi8fwg1.js","assets/js/index-BxeEvAx-.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
var VN=Object.defineProperty;var WN=(r,e,t)=>e in r?VN(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var kn=(r,e,t)=>(WN(r,typeof e!="symbol"?e+"":e,t),t);import{c as dn,a as $0,g as HN,M as qy,N as Gy,W as Md,G as $N,Z as NT,H as YN,F as XN,a0 as KN,a1 as ZN,a2 as QN,d as JN,k as h_,e as ej,x as tj,z as rj,v as nj,U as ij}from"./vue-chunks-Dagx-vSq.js";import{c as oj}from"./crypto-js-DN0vhd75.js";import{a as lc,b as dS,d as aj}from"../../index-BdYv4pbp.js";import{B as sg,M as sj,S as uj,P as lj}from"./pull-up.esm-D94Swpvl.js";import{O as cj}from"./observe-dom.esm-CyCedSm-.js";function Dx(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function fj(r){if(Array.isArray(r))return r}function hj(r){if(Array.isArray(r))return Dx(r)}function $d(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function dj(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,Dk(n.key),n)}}function Yd(r,e,t){return e&&dj(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function cc(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=vS(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return a=u.done,u},e:function(u){s=!0,o=u},f:function(){try{a||t.return==null||t.return()}finally{if(s)throw o}}}}function Ik(r,e,t){return(e=Dk(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function vj(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function pj(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,o,a,s=[],u=!0,l=!1;try{if(o=(t=t.call(r)).next,e===0){if(Object(t)!==t)return;u=!1}else for(;!(u=(n=o.call(t)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function gj(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yj(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sa(r,e){return fj(r)||pj(r,e)||vS(r,e)||gj()}function kk(r){return hj(r)||vj(r)||vS(r)||yj()}function mj(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function Dk(r){var e=mj(r,"string");return typeof e=="symbol"?e:e+""}function Go(r){"@babel/helpers - typeof";return Go=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Go(r)}function vS(r,e){if(r){if(typeof r=="string")return Dx(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Dx(r,e):void 0}}var Uo=typeof window>"u"?null:window,jT=Uo?Uo.navigator:null;Uo&&Uo.document;var bj=Go(""),Mk=Go({}),_j=Go(function(){}),wj=typeof HTMLElement>"u"?"undefined":Go(HTMLElement),om=function(e){return e&&e.instanceString&&$i(e.instanceString)?e.instanceString():null},vr=function(e){return e!=null&&Go(e)==bj},$i=function(e){return e!=null&&Go(e)===_j},di=function(e){return!Iu(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},wn=function(e){return e!=null&&Go(e)===Mk&&!di(e)&&e.constructor===Object},Ej=function(e){return e!=null&&Go(e)===Mk},qt=function(e){return e!=null&&Go(e)===Go(1)&&!isNaN(e)},Oj=function(e){return qt(e)&&Math.floor(e)===e},S0=function(e){if(wj!=="undefined")return e!=null&&e instanceof HTMLElement},Iu=function(e){return am(e)||Lk(e)},am=function(e){return om(e)==="collection"&&e._private.single},Lk=function(e){return om(e)==="collection"&&!e._private.single},pS=function(e){return om(e)==="core"},Nk=function(e){return om(e)==="stylesheet"},xj=function(e){return om(e)==="event"},Fd=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},Sj=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},Tj=function(e){return wn(e)&&qt(e.x1)&&qt(e.x2)&&qt(e.y1)&&qt(e.y2)},Cj=function(e){return Ej(e)&&$i(e.then)},Pj=function(){return jT&&jT.userAgent.match(/msie|trident|edge/i)},Dg=function(e,t){t||(t=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var o=[],a=0;a<arguments.length;a++)o.push(arguments[a]);return o.join("$")});var n=function(){var o=this,a=arguments,s,u=t.apply(o,a),l=n.cache;return(s=l[u])||(s=l[u]=e.apply(o,a)),s};return n.cache={},n},gS=Dg(function(r){return r.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),Y0=Dg(function(r){return r.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),jk=Dg(function(r,e){return r+e[0].toUpperCase()+e.substring(1)},function(r,e){return r+"$"+e}),FT=function(e){return Fd(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},zo="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",Aj="rgb[a]?\\(("+zo+"[%]?)\\s*,\\s*("+zo+"[%]?)\\s*,\\s*("+zo+"[%]?)(?:\\s*,\\s*("+zo+"))?\\)",Rj="rgb[a]?\\((?:"+zo+"[%]?)\\s*,\\s*(?:"+zo+"[%]?)\\s*,\\s*(?:"+zo+"[%]?)(?:\\s*,\\s*(?:"+zo+"))?\\)",Ij="hsl[a]?\\(("+zo+")\\s*,\\s*("+zo+"[%])\\s*,\\s*("+zo+"[%])(?:\\s*,\\s*("+zo+"))?\\)",kj="hsl[a]?\\((?:"+zo+")\\s*,\\s*(?:"+zo+"[%])\\s*,\\s*(?:"+zo+"[%])(?:\\s*,\\s*(?:"+zo+"))?\\)",Dj="\\#[0-9a-fA-F]{3}",Mj="\\#[0-9a-fA-F]{6}",Fk=function(e,t){return e<t?-1:e>t?1:0},Lj=function(e,t){return-1*Fk(e,t)},_r=Object.assign!=null?Object.assign.bind(Object):function(r){for(var e=arguments,t=1;t<e.length;t++){var n=e[t];if(n!=null)for(var i=Object.keys(n),o=0;o<i.length;o++){var a=i[o];r[a]=n[a]}}return r},Nj=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var t=e.length===4,n,i,o,a=16;return t?(n=parseInt(e[1]+e[1],a),i=parseInt(e[2]+e[2],a),o=parseInt(e[3]+e[3],a)):(n=parseInt(e[1]+e[2],a),i=parseInt(e[3]+e[4],a),o=parseInt(e[5]+e[6],a)),[n,i,o]}},jj=function(e){var t,n,i,o,a,s,u,l;function c(v,y,w){return w<0&&(w+=1),w>1&&(w-=1),w<1/6?v+(y-v)*6*w:w<1/2?y:w<2/3?v+(y-v)*(2/3-w)*6:v}var f=new RegExp("^"+Ij+"$").exec(e);if(f){if(n=parseInt(f[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,i=parseFloat(f[2]),i<0||i>100||(i=i/100,o=parseFloat(f[3]),o<0||o>100)||(o=o/100,a=f[4],a!==void 0&&(a=parseFloat(a),a<0||a>1)))return;if(i===0)s=u=l=Math.round(o*255);else{var h=o<.5?o*(1+i):o+i-o*i,d=2*o-h;s=Math.round(255*c(d,h,n+1/3)),u=Math.round(255*c(d,h,n)),l=Math.round(255*c(d,h,n-1/3))}t=[s,u,l,a]}return t},Fj=function(e){var t,n=new RegExp("^"+Aj+"$").exec(e);if(n){t=[];for(var i=[],o=1;o<=3;o++){var a=n[o];if(a[a.length-1]==="%"&&(i[o]=!0),a=parseFloat(a),i[o]&&(a=a/100*255),a<0||a>255)return;t.push(Math.floor(a))}var s=i[1]||i[2]||i[3],u=i[1]&&i[2]&&i[3];if(s&&!u)return;var l=n[4];if(l!==void 0){if(l=parseFloat(l),l<0||l>1)return;t.push(l)}}return t},Bj=function(e){return Uj[e.toLowerCase()]},Bk=function(e){return(di(e)?e:null)||Bj(e)||Nj(e)||Fj(e)||jj(e)},Uj={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Uk=function(e){for(var t=e.map,n=e.keys,i=n.length,o=0;o<i;o++){var a=n[o];if(wn(a))throw Error("Tried to set map with object key");o<n.length-1?(t[a]==null&&(t[a]={}),t=t[a]):t[a]=e.value}},zk=function(e){for(var t=e.map,n=e.keys,i=n.length,o=0;o<i;o++){var a=n[o];if(wn(a))throw Error("Tried to get map with object key");if(t=t[a],t==null)return t}return t},Gm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sm(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var d_,BT;function um(){if(BT)return d_;BT=1;function r(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return d_=r,d_}var v_,UT;function zj(){if(UT)return v_;UT=1;var r=typeof Gm=="object"&&Gm&&Gm.Object===Object&&Gm;return v_=r,v_}var p_,zT;function X0(){if(zT)return p_;zT=1;var r=zj(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=r||e||Function("return this")();return p_=t,p_}var g_,qT;function qj(){if(qT)return g_;qT=1;var r=X0(),e=function(){return r.Date.now()};return g_=e,g_}var y_,GT;function Gj(){if(GT)return y_;GT=1;var r=/\s/;function e(t){for(var n=t.length;n--&&r.test(t.charAt(n)););return n}return y_=e,y_}var m_,VT;function Vj(){if(VT)return m_;VT=1;var r=Gj(),e=/^\s+/;function t(n){return n&&n.slice(0,r(n)+1).replace(e,"")}return m_=t,m_}var b_,WT;function yS(){if(WT)return b_;WT=1;var r=X0(),e=r.Symbol;return b_=e,b_}var __,HT;function Wj(){if(HT)return __;HT=1;var r=yS(),e=Object.prototype,t=e.hasOwnProperty,n=e.toString,i=r?r.toStringTag:void 0;function o(a){var s=t.call(a,i),u=a[i];try{a[i]=void 0;var l=!0}catch{}var c=n.call(a);return l&&(s?a[i]=u:delete a[i]),c}return __=o,__}var w_,$T;function Hj(){if($T)return w_;$T=1;var r=Object.prototype,e=r.toString;function t(n){return e.call(n)}return w_=t,w_}var E_,YT;function qk(){if(YT)return E_;YT=1;var r=yS(),e=Wj(),t=Hj(),n="[object Null]",i="[object Undefined]",o=r?r.toStringTag:void 0;function a(s){return s==null?s===void 0?i:n:o&&o in Object(s)?e(s):t(s)}return E_=a,E_}var O_,XT;function $j(){if(XT)return O_;XT=1;function r(e){return e!=null&&typeof e=="object"}return O_=r,O_}var x_,KT;function lm(){if(KT)return x_;KT=1;var r=qk(),e=$j(),t="[object Symbol]";function n(i){return typeof i=="symbol"||e(i)&&r(i)==t}return x_=n,x_}var S_,ZT;function Yj(){if(ZT)return S_;ZT=1;var r=Vj(),e=um(),t=lm(),n=NaN,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt;function u(l){if(typeof l=="number")return l;if(t(l))return n;if(e(l)){var c=typeof l.valueOf=="function"?l.valueOf():l;l=e(c)?c+"":c}if(typeof l!="string")return l===0?l:+l;l=r(l);var f=o.test(l);return f||a.test(l)?s(l.slice(2),f?2:8):i.test(l)?n:+l}return S_=u,S_}var T_,QT;function Xj(){if(QT)return T_;QT=1;var r=um(),e=qj(),t=Yj(),n="Expected a function",i=Math.max,o=Math.min;function a(s,u,l){var c,f,h,d,v,y,w=0,b=!1,p=!1,_=!0;if(typeof s!="function")throw new TypeError(n);u=t(u)||0,r(l)&&(b=!!l.leading,p="maxWait"in l,h=p?i(t(l.maxWait)||0,u):h,_="trailing"in l?!!l.trailing:_);function O(q){var W=c,J=f;return c=f=void 0,w=q,d=s.apply(J,W),d}function P(q){return w=q,v=setTimeout(A,u),b?O(q):d}function R(q){var W=q-y,J=q-w,te=u-W;return p?o(te,h-J):te}function T(q){var W=q-y,J=q-w;return y===void 0||W>=u||W<0||p&&J>=h}function A(){var q=e();if(T(q))return M(q);v=setTimeout(A,R(q))}function M(q){return v=void 0,_&&c?O(q):(c=f=void 0,d)}function N(){v!==void 0&&clearTimeout(v),w=0,c=y=f=v=void 0}function j(){return v===void 0?d:M(e())}function B(){var q=e(),W=T(q);if(c=arguments,f=this,y=q,W){if(v===void 0)return P(y);if(p)return clearTimeout(v),v=setTimeout(A,u),O(y)}return v===void 0&&(v=setTimeout(A,u)),d}return B.cancel=N,B.flush=j,B}return T_=a,T_}var Kj=Xj(),cm=sm(Kj),C_=Uo?Uo.performance:null,Gk=C_&&C_.now?function(){return C_.now()}:function(){return Date.now()},Zj=function(){if(Uo){if(Uo.requestAnimationFrame)return function(r){Uo.requestAnimationFrame(r)};if(Uo.mozRequestAnimationFrame)return function(r){Uo.mozRequestAnimationFrame(r)};if(Uo.webkitRequestAnimationFrame)return function(r){Uo.webkitRequestAnimationFrame(r)};if(Uo.msRequestAnimationFrame)return function(r){Uo.msRequestAnimationFrame(r)}}return function(r){r&&setTimeout(function(){r(Gk())},1e3/60)}}(),T0=function(e){return Zj(e)},Th=Gk,_g=9261,Vk=65599,ky=5381,Wk=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_g,n=t,i;i=e.next(),!i.done;)n=n*Vk+i.value|0;return n},Yy=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_g;return t*Vk+e|0},Xy=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ky;return(t<<5)+t+e|0},Qj=function(e,t){return e*2097152+t},Sd=function(e){return e[0]*2097152+e[1]},Vm=function(e,t){return[Yy(e[0],t[0]),Xy(e[1],t[1])]},JT=function(e,t){var n={value:0,done:!1},i=0,o=e.length,a={next:function(){return i<o?n.value=e[i++]:n.done=!0,n}};return Wk(a,t)},Bd=function(e,t){var n={value:0,done:!1},i=0,o=e.length,a={next:function(){return i<o?n.value=e.charCodeAt(i++):n.done=!0,n}};return Wk(a,t)},Hk=function(){return Jj(arguments)},Jj=function(e){for(var t,n=0;n<e.length;n++){var i=e[n];n===0?t=Bd(i):t=Bd(i,t)}return t},eC=!0,e5=console.warn!=null,t5=console.trace!=null,mS=Number.MAX_SAFE_INTEGER||9007199254740991,$k=function(){return!0},C0=function(){return!1},tC=function(){return 0},bS=function(){},Hi=function(e){throw new Error(e)},Yk=function(e){if(e!==void 0)eC=!!e;else return eC},Bn=function(e){Yk()&&(e5?console.warn(e):t5&&console.trace())},r5=function(e){return _r({},e)},lf=function(e){return e==null?e:di(e)?e.slice():wn(e)?r5(e):e},n5=function(e){return e.slice()},Xk=function(e,t){for(t=e="";e++<36;t+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return t},i5={},Kk=function(){return i5},Vo=function(e){var t=Object.keys(e);return function(n){for(var i={},o=0;o<t.length;o++){var a=t[o],s=n==null?void 0:n[a];i[a]=s===void 0?e[a]:s}return i}},Ud=function(e,t,n){for(var i=e.length-1;i>=0;i--)e[i]===t&&e.splice(i,1)},_S=function(e){e.splice(0,e.length)},o5=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];e.push(i)}},ul=function(e,t,n){return n&&(t=jk(n,t)),e[t]},bh=function(e,t,n,i){n&&(t=jk(n,t)),e[t]=i},a5=function(){function r(){$d(this,r),this._obj={}}return Yd(r,[{key:"set",value:function(t,n){return this._obj[t]=n,this}},{key:"delete",value:function(t){return this._obj[t]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(t){return this._obj[t]!==void 0}},{key:"get",value:function(t){return this._obj[t]}}])}(),Eh=typeof Map<"u"?Map:a5,s5="undefined",u5=function(){function r(e){if($d(this,r),this._obj=Object.create(null),this.size=0,e!=null){var t;e.instanceString!=null&&e.instanceString()===this.instanceString()?t=e.toArray():t=e;for(var n=0;n<t.length;n++)this.add(t[n])}}return Yd(r,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(t){var n=this._obj;n[t]!==1&&(n[t]=1,this.size++)}},{key:"delete",value:function(t){var n=this._obj;n[t]===1&&(n[t]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(t){return this._obj[t]===1}},{key:"toArray",value:function(){var t=this;return Object.keys(this._obj).filter(function(n){return t.has(n)})}},{key:"forEach",value:function(t,n){return this.toArray().forEach(t,n)}}])}(),Bg=(typeof Set>"u"?"undefined":Go(Set))!==s5?Set:u5,K0=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||t===void 0||!pS(e)){Hi("An element must have a core reference and parameters set");return}var i=t.group;if(i==null&&(t.data&&t.data.source!=null&&t.data.target!=null?i="edges":i="nodes"),i!=="nodes"&&i!=="edges"){Hi("An element must be of type `nodes` or `edges`; you specified `"+i+"`");return}this.length=1,this[0]=this;var o=this._private={cy:e,single:!0,data:t.data||{},position:t.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:i,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!t.selected,selectable:t.selectable===void 0?!0:!!t.selectable,locked:!!t.locked,grabbed:!1,grabbable:t.grabbable===void 0?!0:!!t.grabbable,pannable:t.pannable===void 0?i==="edges":!!t.pannable,active:!1,classes:new Bg,animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[],parent:t.parent&&t.parent.isNode()?t.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(o.position.x==null&&(o.position.x=0),o.position.y==null&&(o.position.y=0),t.renderedPosition){var a=t.renderedPosition,s=e.pan(),u=e.zoom();o.position={x:(a.x-s.x)/u,y:(a.y-s.y)/u}}var l=[];di(t.classes)?l=t.classes:vr(t.classes)&&(l=t.classes.split(/\s+/));for(var c=0,f=l.length;c<f;c++){var h=l[c];!h||h===""||o.classes.add(h)}this.createEmitter(),(n===void 0||n)&&this.restore();var d=t.style||t.css;d&&(Bn("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(d))},rC=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(n,i,o){var a;wn(n)&&!Iu(n)&&(a=n,n=a.roots||a.root,i=a.visit,o=a.directed),o=arguments.length===2&&!$i(i)?i:o,i=$i(i)?i:function(){};for(var s=this._private.cy,u=n=vr(n)?this.filter(n):n,l=[],c=[],f={},h={},d={},v=0,y,w=this.byGroup(),b=w.nodes,p=w.edges,_=0;_<u.length;_++){var O=u[_],P=O.id();O.isNode()&&(l.unshift(O),e.bfs&&(d[P]=!0,c.push(O)),h[P]=0)}for(var R=function(){var q=e.bfs?l.shift():l.pop(),W=q.id();if(e.dfs){if(d[W])return 0;d[W]=!0,c.push(q)}var J=h[W],te=f[W],re=te!=null?te.source():null,ee=te!=null?te.target():null,fe=te==null?void 0:q.same(re)?ee[0]:re[0],he;if(he=i(q,te,fe,v++,J),he===!0)return y=q,1;if(he===!1)return 1;for(var se=q.connectedEdges().filter(function(qe){return(!o||qe.source().same(q))&&p.has(qe)}),me=0;me<se.length;me++){var De=se[me],Le=De.connectedNodes().filter(function(qe){return!qe.same(q)&&b.has(qe)}),Ie=Le.id();Le.length!==0&&!d[Ie]&&(Le=Le[0],l.push(Le),e.bfs&&(d[Ie]=!0,c.push(Le)),f[Ie]=De,h[Ie]=h[W]+1)}},T;l.length!==0&&(T=R(),!(T!==0&&T===1)););for(var A=s.collection(),M=0;M<c.length;M++){var N=c[M],j=f[N.id()];j!=null&&A.push(j),A.push(N)}return{path:s.collection(A),found:s.collection(y)}}},Ky={breadthFirstSearch:rC({bfs:!0}),depthFirstSearch:rC({dfs:!0})};Ky.bfs=Ky.breadthFirstSearch;Ky.dfs=Ky.depthFirstSearch;var f0={exports:{}},l5=f0.exports,nC;function c5(){return nC||(nC=1,function(r,e){(function(){var t,n,i,o,a,s,u,l,c,f,h,d,v,y,w;i=Math.floor,f=Math.min,n=function(b,p){return b<p?-1:b>p?1:0},c=function(b,p,_,O,P){var R;if(_==null&&(_=0),P==null&&(P=n),_<0)throw new Error("lo must be non-negative");for(O==null&&(O=b.length);_<O;)R=i((_+O)/2),P(p,b[R])<0?O=R:_=R+1;return[].splice.apply(b,[_,_-_].concat(p)),p},s=function(b,p,_){return _==null&&(_=n),b.push(p),y(b,0,b.length-1,_)},a=function(b,p){var _,O;return p==null&&(p=n),_=b.pop(),b.length?(O=b[0],b[0]=_,w(b,0,p)):O=_,O},l=function(b,p,_){var O;return _==null&&(_=n),O=b[0],b[0]=p,w(b,0,_),O},u=function(b,p,_){var O;return _==null&&(_=n),b.length&&_(b[0],p)<0&&(O=[b[0],p],p=O[0],b[0]=O[1],w(b,0,_)),p},o=function(b,p){var _,O,P,R,T,A;for(p==null&&(p=n),R=(function(){A=[];for(var M=0,N=i(b.length/2);0<=N?M<N:M>N;0<=N?M++:M--)A.push(M);return A}).apply(this).reverse(),T=[],O=0,P=R.length;O<P;O++)_=R[O],T.push(w(b,_,p));return T},v=function(b,p,_){var O;if(_==null&&(_=n),O=b.indexOf(p),O!==-1)return y(b,0,O,_),w(b,O,_)},h=function(b,p,_){var O,P,R,T,A;if(_==null&&(_=n),P=b.slice(0,p),!P.length)return P;for(o(P,_),A=b.slice(p),R=0,T=A.length;R<T;R++)O=A[R],u(P,O,_);return P.sort(_).reverse()},d=function(b,p,_){var O,P,R,T,A,M,N,j,B;if(_==null&&(_=n),p*10<=b.length){if(R=b.slice(0,p).sort(_),!R.length)return R;for(P=R[R.length-1],N=b.slice(p),T=0,M=N.length;T<M;T++)O=N[T],_(O,P)<0&&(c(R,O,0,null,_),R.pop(),P=R[R.length-1]);return R}for(o(b,_),B=[],A=0,j=f(p,b.length);0<=j?A<j:A>j;0<=j?++A:--A)B.push(a(b,_));return B},y=function(b,p,_,O){var P,R,T;for(O==null&&(O=n),P=b[_];_>p;){if(T=_-1>>1,R=b[T],O(P,R)<0){b[_]=R,_=T;continue}break}return b[_]=P},w=function(b,p,_){var O,P,R,T,A;for(_==null&&(_=n),P=b.length,A=p,R=b[p],O=2*p+1;O<P;)T=O+1,T<P&&!(_(b[O],b[T])<0)&&(O=T),b[p]=b[O],p=O,O=2*p+1;return b[p]=R,y(b,A,p,_)},t=function(){b.push=s,b.pop=a,b.replace=l,b.pushpop=u,b.heapify=o,b.updateItem=v,b.nlargest=h,b.nsmallest=d;function b(p){this.cmp=p??n,this.nodes=[]}return b.prototype.push=function(p){return s(this.nodes,p,this.cmp)},b.prototype.pop=function(){return a(this.nodes,this.cmp)},b.prototype.peek=function(){return this.nodes[0]},b.prototype.contains=function(p){return this.nodes.indexOf(p)!==-1},b.prototype.replace=function(p){return l(this.nodes,p,this.cmp)},b.prototype.pushpop=function(p){return u(this.nodes,p,this.cmp)},b.prototype.heapify=function(){return o(this.nodes,this.cmp)},b.prototype.updateItem=function(p){return v(this.nodes,p,this.cmp)},b.prototype.clear=function(){return this.nodes=[]},b.prototype.empty=function(){return this.nodes.length===0},b.prototype.size=function(){return this.nodes.length},b.prototype.clone=function(){var p;return p=new b,p.nodes=this.nodes.slice(0),p},b.prototype.toArray=function(){return this.nodes.slice(0)},b.prototype.insert=b.prototype.push,b.prototype.top=b.prototype.peek,b.prototype.front=b.prototype.peek,b.prototype.has=b.prototype.contains,b.prototype.copy=b.prototype.clone,b}(),function(b,p){return r.exports=p()}(this,function(){return t})}).call(l5)}(f0)),f0.exports}var P_,iC;function f5(){return iC||(iC=1,P_=c5()),P_}var h5=f5(),fm=sm(h5),d5=Vo({root:null,weight:function(e){return 1},directed:!1}),v5={dijkstra:function(e){if(!wn(e)){var t=arguments;e={root:t[0],weight:t[1],directed:t[2]}}var n=d5(e),i=n.root,o=n.weight,a=n.directed,s=this,u=o,l=vr(i)?this.filter(i)[0]:i[0],c={},f={},h={},d=this.byGroup(),v=d.nodes,y=d.edges;y.unmergeBy(function(J){return J.isLoop()});for(var w=function(te){return c[te.id()]},b=function(te,re){c[te.id()]=re,p.updateItem(te)},p=new fm(function(J,te){return w(J)-w(te)}),_=0;_<v.length;_++){var O=v[_];c[O.id()]=O.same(l)?0:1/0,p.push(O)}for(var P=function(te,re){for(var ee=(a?te.edgesTo(re):te.edgesWith(re)).intersect(y),fe=1/0,he,se=0;se<ee.length;se++){var me=ee[se],De=u(me);(De<fe||!he)&&(fe=De,he=me)}return{edge:he,dist:fe}};p.size()>0;){var R=p.pop(),T=w(R),A=R.id();if(h[A]=T,T!==1/0)for(var M=R.neighborhood().intersect(v),N=0;N<M.length;N++){var j=M[N],B=j.id(),q=P(R,j),W=T+q.dist;W<w(j)&&(b(j,W),f[B]={node:R,edge:q.edge})}}return{distanceTo:function(te){var re=vr(te)?v.filter(te)[0]:te[0];return h[re.id()]},pathTo:function(te){var re=vr(te)?v.filter(te)[0]:te[0],ee=[],fe=re,he=fe.id();if(re.length>0)for(ee.unshift(re);f[he];){var se=f[he];ee.unshift(se.edge),ee.unshift(se.node),fe=se.node,he=fe.id()}return s.spawn(ee)}}}},p5={kruskal:function(e){e=e||function(_){return 1};for(var t=this.byGroup(),n=t.nodes,i=t.edges,o=n.length,a=new Array(o),s=n,u=function(O){for(var P=0;P<a.length;P++){var R=a[P];if(R.has(O))return P}},l=0;l<o;l++)a[l]=this.spawn(n[l]);for(var c=i.sort(function(_,O){return e(_)-e(O)}),f=0;f<c.length;f++){var h=c[f],d=h.source()[0],v=h.target()[0],y=u(d),w=u(v),b=a[y],p=a[w];y!==w&&(s.merge(h),b.merge(p),a.splice(w,1))}return s}},g5=Vo({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),y5={aStar:function(e){var t=this.cy(),n=g5(e),i=n.root,o=n.goal,a=n.heuristic,s=n.directed,u=n.weight;i=t.collection(i)[0],o=t.collection(o)[0];var l=i.id(),c=o.id(),f={},h={},d={},v=new fm(function(he,se){return h[he.id()]-h[se.id()]}),y=new Bg,w={},b={},p=function(se,me){v.push(se),y.add(me)},_,O,P=function(){_=v.pop(),O=_.id(),y.delete(O)},R=function(se){return y.has(se)};p(i,l),f[l]=0,h[l]=a(i);for(var T=0;v.size()>0;){if(P(),T++,O===c){for(var A=[],M=o,N=c,j=b[N];A.unshift(M),j!=null&&A.unshift(j),M=w[N],M!=null;)N=M.id(),j=b[N];return{found:!0,distance:f[O],path:this.spawn(A),steps:T}}d[O]=!0;for(var B=_._private.edges,q=0;q<B.length;q++){var W=B[q];if(this.hasElementWithId(W.id())&&!(s&&W.data("source")!==O)){var J=W.source(),te=W.target(),re=J.id()!==O?J:te,ee=re.id();if(this.hasElementWithId(ee)&&!d[ee]){var fe=f[O]+u(W);if(!R(ee)){f[ee]=fe,h[ee]=fe+a(re),p(re,ee),w[ee]=_,b[ee]=W;continue}fe<f[ee]&&(f[ee]=fe,h[ee]=fe+a(re),w[ee]=_,b[ee]=W)}}}}return{found:!1,distance:void 0,path:void 0,steps:T}}},m5=Vo({weight:function(e){return 1},directed:!1}),b5={floydWarshall:function(e){for(var t=this.cy(),n=m5(e),i=n.weight,o=n.directed,a=i,s=this.byGroup(),u=s.nodes,l=s.edges,c=u.length,f=c*c,h=function(De){return u.indexOf(De)},d=function(De){return u[De]},v=new Array(f),y=0;y<f;y++){var w=y%c,b=(y-w)/c;b===w?v[y]=0:v[y]=1/0}for(var p=new Array(f),_=new Array(f),O=0;O<l.length;O++){var P=l[O],R=P.source()[0],T=P.target()[0];if(R!==T){var A=h(R),M=h(T),N=A*c+M,j=a(P);if(v[N]>j&&(v[N]=j,p[N]=M,_[N]=P),!o){var B=M*c+A;!o&&v[B]>j&&(v[B]=j,p[B]=A,_[B]=P)}}}for(var q=0;q<c;q++)for(var W=0;W<c;W++)for(var J=W*c+q,te=0;te<c;te++){var re=W*c+te,ee=q*c+te;v[J]+v[ee]<v[re]&&(v[re]=v[J]+v[ee],p[re]=p[J])}var fe=function(De){return(vr(De)?t.filter(De):De)[0]},he=function(De){return h(fe(De))},se={distance:function(De,Le){var Ie=he(De),qe=he(Le);return v[Ie*c+qe]},path:function(De,Le){var Ie=he(De),qe=he(Le),Ge=d(Ie);if(Ie===qe)return Ge.collection();if(p[Ie*c+qe]==null)return t.collection();var Me=t.collection(),Pe=Ie,de;for(Me.merge(Ge);Ie!==qe;)Pe=Ie,Ie=p[Ie*c+qe],de=_[Pe*c+Ie],Me.merge(de),Me.merge(d(Ie));return Me}};return se}},_5=Vo({weight:function(e){return 1},directed:!1,root:null}),w5={bellmanFord:function(e){var t=this,n=_5(e),i=n.weight,o=n.directed,a=n.root,s=i,u=this,l=this.cy(),c=this.byGroup(),f=c.edges,h=c.nodes,d=h.length,v=new Eh,y=!1,w=[];a=l.collection(a)[0],f.unmergeBy(function(ut){return ut.isLoop()});for(var b=f.length,p=function(H){var X=v.get(H.id());return X||(X={},v.set(H.id(),X)),X},_=function(H){return(vr(H)?l.$(H):H)[0]},O=function(H){return p(_(H)).dist},P=function(H){for(var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a,ne=_(H),Se=[],Te=ne;;){if(Te==null)return t.spawn();var Ne=p(Te),et=Ne.edge,wt=Ne.pred;if(Se.unshift(Te[0]),Te.same(X)&&Se.length>0)break;et!=null&&Se.unshift(et),Te=wt}return u.spawn(Se)},R=0;R<d;R++){var T=h[R],A=p(T);T.same(a)?A.dist=0:A.dist=1/0,A.pred=null,A.edge=null}for(var M=!1,N=function(H,X,ne,Se,Te,Ne){var et=Se.dist+Ne;et<Te.dist&&!ne.same(Se.edge)&&(Te.dist=et,Te.pred=H,Te.edge=ne,M=!0)},j=1;j<d;j++){M=!1;for(var B=0;B<b;B++){var q=f[B],W=q.source(),J=q.target(),te=s(q),re=p(W),ee=p(J);N(W,J,q,re,ee,te),o||N(J,W,q,ee,re,te)}if(!M)break}if(M)for(var fe=[],he=0;he<b;he++){var se=f[he],me=se.source(),De=se.target(),Le=s(se),Ie=p(me).dist,qe=p(De).dist;if(Ie+Le<qe||!o&&qe+Le<Ie)if(y||(Bn("Graph contains a negative weight cycle for Bellman-Ford"),y=!0),e.findNegativeWeightCycles!==!1){var Ge=[];Ie+Le<qe&&Ge.push(me),!o&&qe+Le<Ie&&Ge.push(De);for(var Me=Ge.length,Pe=0;Pe<Me;Pe++){var de=Ge[Pe],Oe=[de];Oe.push(p(de).edge);for(var Ae=p(de).pred;Oe.indexOf(Ae)===-1;)Oe.push(Ae),Oe.push(p(Ae).edge),Ae=p(Ae).pred;Oe=Oe.slice(Oe.indexOf(Ae));for(var Ve=Oe[0].id(),tt=0,ht=2;ht<Oe.length;ht+=2)Oe[ht].id()<Ve&&(Ve=Oe[ht].id(),tt=ht);Oe=Oe.slice(tt).concat(Oe.slice(0,tt)),Oe.push(Oe[0]);var xt=Oe.map(function(ut){return ut.id()}).join(",");fe.indexOf(xt)===-1&&(w.push(u.spawn(Oe)),fe.push(xt))}}else break}return{distanceTo:O,pathTo:P,hasNegativeWeightCycle:y,negativeWeightCycles:w}}},E5=Math.sqrt(2),O5=function(e,t,n){n.length===0&&Hi("Karger-Stein must be run on a connected (sub)graph");for(var i=n[e],o=i[1],a=i[2],s=t[o],u=t[a],l=n,c=l.length-1;c>=0;c--){var f=l[c],h=f[1],d=f[2];(t[h]===s&&t[d]===u||t[h]===u&&t[d]===s)&&l.splice(c,1)}for(var v=0;v<l.length;v++){var y=l[v];y[1]===u?(l[v]=y.slice(),l[v][1]=s):y[2]===u&&(l[v]=y.slice(),l[v][2]=s)}for(var w=0;w<t.length;w++)t[w]===u&&(t[w]=s);return l},A_=function(e,t,n,i){for(;n>i;){var o=Math.floor(Math.random()*t.length);t=O5(o,e,t),n--}return t},x5={kargerStein:function(){var e=this,t=this.byGroup(),n=t.nodes,i=t.edges;i.unmergeBy(function(ee){return ee.isLoop()});var o=n.length,a=i.length,s=Math.ceil(Math.pow(Math.log(o)/Math.LN2,2)),u=Math.floor(o/E5);if(o<2){Hi("At least 2 nodes are required for Karger-Stein algorithm");return}for(var l=[],c=0;c<a;c++){var f=i[c];l.push([c,n.indexOf(f.source()),n.indexOf(f.target())])}for(var h=1/0,d=[],v=new Array(o),y=new Array(o),w=new Array(o),b=function(fe,he){for(var se=0;se<o;se++)he[se]=fe[se]},p=0;p<=s;p++){for(var _=0;_<o;_++)y[_]=_;var O=A_(y,l.slice(),o,u),P=O.slice();b(y,w);var R=A_(y,O,u,2),T=A_(w,P,u,2);R.length<=T.length&&R.length<h?(h=R.length,d=R,b(y,v)):T.length<=R.length&&T.length<h&&(h=T.length,d=T,b(w,v))}for(var A=this.spawn(d.map(function(ee){return i[ee[0]]})),M=this.spawn(),N=this.spawn(),j=v[0],B=0;B<v.length;B++){var q=v[B],W=n[B];q===j?M.merge(W):N.merge(W)}var J=function(fe){var he=e.spawn();return fe.forEach(function(se){he.merge(se),se.connectedEdges().forEach(function(me){e.contains(me)&&!A.contains(me)&&he.merge(me)})}),he},te=[J(M),J(N)],re={cut:A,components:te,partition1:M,partition2:N};return re}},S5=function(e){return{x:e.x,y:e.y}},Z0=function(e,t,n){return{x:e.x*t+n.x,y:e.y*t+n.y}},Zk=function(e,t,n){return{x:(e.x-n.x)/t,y:(e.y-n.y)/t}},wg=function(e){return{x:e[0],y:e[1]}},T5=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=1/0,o=t;o<n;o++){var a=e[o];isFinite(a)&&(i=Math.min(a,i))}return i},C5=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=-1/0,o=t;o<n;o++){var a=e[o];isFinite(a)&&(i=Math.max(a,i))}return i},P5=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=0,o=0,a=t;a<n;a++){var s=e[a];isFinite(s)&&(i+=s,o++)}return i/o},A5=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;i?e=e.slice(t,n):(n<e.length&&e.splice(n,e.length-n),t>0&&e.splice(0,t));for(var s=0,u=e.length-1;u>=0;u--){var l=e[u];a?isFinite(l)||(e[u]=-1/0,s++):e.splice(u,1)}o&&e.sort(function(h,d){return h-d});var c=e.length,f=Math.floor(c/2);return c%2!==0?e[f+1+s]:(e[f-1+s]+e[f+s])/2},R5=function(e){return Math.PI*e/180},Wm=function(e,t){return Math.atan2(t,e)-Math.PI/2},wS=Math.log2||function(r){return Math.log(r)/Math.log(2)},Qk=function(e){return e>0?1:e<0?-1:0},op=function(e,t){return Math.sqrt(Kv(e,t))},Kv=function(e,t){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i},I5=function(e){for(var t=e.length,n=0,i=0;i<t;i++)n+=e[i];for(var o=0;o<t;o++)e[o]=e[o]/n;return e},aa=function(e,t,n,i){return(1-i)*(1-i)*e+2*(1-i)*i*t+i*i*n},Tg=function(e,t,n,i){return{x:aa(e.x,t.x,n.x,i),y:aa(e.y,t.y,n.y,i)}},k5=function(e,t,n,i){var o={x:t.x-e.x,y:t.y-e.y},a=op(e,t),s={x:o.x/a,y:o.y/a};return n=n??0,i=i??n*a,{x:e.x+s.x*i,y:e.y+s.y*i}},Zy=function(e,t,n){return Math.max(e,Math.min(n,t))},$s=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},D5=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},M5=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},L5=function(e,t,n){return{x1:e.x1+t,x2:e.x2+t,y1:e.y1+n,y2:e.y2+n,w:e.w,h:e.h}},Jk=function(e,t){e.x1=Math.min(e.x1,t.x1),e.x2=Math.max(e.x2,t.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,t.y1),e.y2=Math.max(e.y2,t.y2),e.h=e.y2-e.y1},N5=function(e,t,n){e.x1=Math.min(e.x1,t),e.x2=Math.max(e.x2,t),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},h0=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=t,e.x2+=t,e.y1-=t,e.y2+=t,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},d0=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,i,o,a;if(t.length===1)n=i=o=a=t[0];else if(t.length===2)n=o=t[0],a=i=t[1];else if(t.length===4){var s=sa(t,4);n=s[0],i=s[1],o=s[2],a=s[3]}return e.x1-=a,e.x2+=i,e.y1-=n,e.y2+=o,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},oC=function(e,t){e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},ES=function(e,t){return!(e.x1>t.x2||t.x1>e.x2||e.x2<t.x1||t.x2<e.x1||e.y2<t.y1||t.y2<e.y1||e.y1>t.y2||t.y1>e.y2)},Mg=function(e,t,n){return e.x1<=t&&t<=e.x2&&e.y1<=n&&n<=e.y2},j5=function(e,t){return Mg(e,t.x,t.y)},eD=function(e,t){return Mg(e,t.x1,t.y1)&&Mg(e,t.x2,t.y2)},tD=function(e,t,n,i,o,a,s){var u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",l=u==="auto"?ap(o,a):u,c=o/2,f=a/2;l=Math.min(l,c,f);var h=l!==c,d=l!==f,v;if(h){var y=n-c+l-s,w=i-f-s,b=n+c-l+s,p=w;if(v=Dd(e,t,n,i,y,w,b,p,!1),v.length>0)return v}if(d){var _=n+c+s,O=i-f+l-s,P=_,R=i+f-l+s;if(v=Dd(e,t,n,i,_,O,P,R,!1),v.length>0)return v}if(h){var T=n-c+l-s,A=i+f+s,M=n+c-l+s,N=A;if(v=Dd(e,t,n,i,T,A,M,N,!1),v.length>0)return v}if(d){var j=n-c-s,B=i-f+l-s,q=j,W=i+f-l+s;if(v=Dd(e,t,n,i,j,B,q,W,!1),v.length>0)return v}var J;{var te=n-c+l,re=i-f+l;if(J=Dy(e,t,n,i,te,re,l+s),J.length>0&&J[0]<=te&&J[1]<=re)return[J[0],J[1]]}{var ee=n+c-l,fe=i-f+l;if(J=Dy(e,t,n,i,ee,fe,l+s),J.length>0&&J[0]>=ee&&J[1]<=fe)return[J[0],J[1]]}{var he=n+c-l,se=i+f-l;if(J=Dy(e,t,n,i,he,se,l+s),J.length>0&&J[0]>=he&&J[1]>=se)return[J[0],J[1]]}{var me=n-c+l,De=i+f-l;if(J=Dy(e,t,n,i,me,De,l+s),J.length>0&&J[0]<=me&&J[1]>=De)return[J[0],J[1]]}return[]},F5=function(e,t,n,i,o,a,s){var u=s,l=Math.min(n,o),c=Math.max(n,o),f=Math.min(i,a),h=Math.max(i,a);return l-u<=e&&e<=c+u&&f-u<=t&&t<=h+u},B5=function(e,t,n,i,o,a,s,u,l){var c={x1:Math.min(n,s,o)-l,x2:Math.max(n,s,o)+l,y1:Math.min(i,u,a)-l,y2:Math.max(i,u,a)+l};return!(e<c.x1||e>c.x2||t<c.y1||t>c.y2)},U5=function(e,t,n,i){n-=i;var o=t*t-4*e*n;if(o<0)return[];var a=Math.sqrt(o),s=2*e,u=(-t+a)/s,l=(-t-a)/s;return[u,l]},z5=function(e,t,n,i,o){var a=1e-5;e===0&&(e=a),t/=e,n/=e,i/=e;var s,u,l,c,f,h,d,v;if(u=(3*n-t*t)/9,l=-(27*i)+t*(9*n-2*(t*t)),l/=54,s=u*u*u+l*l,o[1]=0,d=t/3,s>0){f=l+Math.sqrt(s),f=f<0?-Math.pow(-f,1/3):Math.pow(f,1/3),h=l-Math.sqrt(s),h=h<0?-Math.pow(-h,1/3):Math.pow(h,1/3),o[0]=-d+f+h,d+=(f+h)/2,o[4]=o[2]=-d,d=Math.sqrt(3)*(-h+f)/2,o[3]=d,o[5]=-d;return}if(o[5]=o[3]=0,s===0){v=l<0?-Math.pow(-l,1/3):Math.pow(l,1/3),o[0]=-d+2*v,o[4]=o[2]=-(v+d);return}u=-u,c=u*u*u,c=Math.acos(l/Math.sqrt(c)),v=2*Math.sqrt(u),o[0]=-d+v*Math.cos(c/3),o[2]=-d+v*Math.cos((c+2*Math.PI)/3),o[4]=-d+v*Math.cos((c+4*Math.PI)/3)},q5=function(e,t,n,i,o,a,s,u){var l=1*n*n-4*n*o+2*n*s+4*o*o-4*o*s+s*s+i*i-4*i*a+2*i*u+4*a*a-4*a*u+u*u,c=1*9*n*o-3*n*n-3*n*s-6*o*o+3*o*s+9*i*a-3*i*i-3*i*u-6*a*a+3*a*u,f=1*3*n*n-6*n*o+n*s-n*e+2*o*o+2*o*e-s*e+3*i*i-6*i*a+i*u-i*t+2*a*a+2*a*t-u*t,h=1*n*o-n*n+n*e-o*e+i*a-i*i+i*t-a*t,d=[];z5(l,c,f,h,d);for(var v=1e-7,y=[],w=0;w<6;w+=2)Math.abs(d[w+1])<v&&d[w]>=0&&d[w]<=1&&y.push(d[w]);y.push(1),y.push(0);for(var b=-1,p,_,O,P=0;P<y.length;P++)p=Math.pow(1-y[P],2)*n+2*(1-y[P])*y[P]*o+y[P]*y[P]*s,_=Math.pow(1-y[P],2)*i+2*(1-y[P])*y[P]*a+y[P]*y[P]*u,O=Math.pow(p-e,2)+Math.pow(_-t,2),b>=0?O<b&&(b=O):b=O;return b},G5=function(e,t,n,i,o,a){var s=[e-n,t-i],u=[o-n,a-i],l=u[0]*u[0]+u[1]*u[1],c=s[0]*s[0]+s[1]*s[1],f=s[0]*u[0]+s[1]*u[1],h=f*f/l;return f<0?c:h>l?(e-o)*(e-o)+(t-a)*(t-a):c-h},Ws=function(e,t,n){for(var i,o,a,s,u,l=0,c=0;c<n.length/2;c++)if(i=n[c*2],o=n[c*2+1],c+1<n.length/2?(a=n[(c+1)*2],s=n[(c+1)*2+1]):(a=n[(c+1-n.length/2)*2],s=n[(c+1-n.length/2)*2+1]),!(i==e&&a==e))if(i>=e&&e>=a||i<=e&&e<=a)u=(e-i)/(a-i)*(s-o)+o,u>t&&l++;else continue;return l%2!==0},Ch=function(e,t,n,i,o,a,s,u,l){var c=new Array(n.length),f;u[0]!=null?(f=Math.atan(u[1]/u[0]),u[0]<0?f=f+Math.PI/2:f=-f-Math.PI/2):f=u;for(var h=Math.cos(-f),d=Math.sin(-f),v=0;v<c.length/2;v++)c[v*2]=a/2*(n[v*2]*h-n[v*2+1]*d),c[v*2+1]=s/2*(n[v*2+1]*h+n[v*2]*d),c[v*2]+=i,c[v*2+1]+=o;var y;if(l>0){var w=A0(c,-l);y=P0(w)}else y=c;return Ws(e,t,y)},V5=function(e,t,n,i,o,a,s,u){for(var l=new Array(n.length*2),c=0;c<u.length;c++){var f=u[c];l[c*4+0]=f.startX,l[c*4+1]=f.startY,l[c*4+2]=f.stopX,l[c*4+3]=f.stopY;var h=Math.pow(f.cx-e,2)+Math.pow(f.cy-t,2);if(h<=Math.pow(f.radius,2))return!0}return Ws(e,t,l)},P0=function(e){for(var t=new Array(e.length/2),n,i,o,a,s,u,l,c,f=0;f<e.length/4;f++){n=e[f*4],i=e[f*4+1],o=e[f*4+2],a=e[f*4+3],f<e.length/4-1?(s=e[(f+1)*4],u=e[(f+1)*4+1],l=e[(f+1)*4+2],c=e[(f+1)*4+3]):(s=e[0],u=e[1],l=e[2],c=e[3]);var h=Dd(n,i,o,a,s,u,l,c,!0);t[f*2]=h[0],t[f*2+1]=h[1]}return t},A0=function(e,t){for(var n=new Array(e.length*2),i,o,a,s,u=0;u<e.length/2;u++){i=e[u*2],o=e[u*2+1],u<e.length/2-1?(a=e[(u+1)*2],s=e[(u+1)*2+1]):(a=e[0],s=e[1]);var l=s-o,c=-(a-i),f=Math.sqrt(l*l+c*c),h=l/f,d=c/f;n[u*4]=i+h*t,n[u*4+1]=o+d*t,n[u*4+2]=a+h*t,n[u*4+3]=s+d*t}return n},W5=function(e,t,n,i,o,a){var s=n-e,u=i-t;s/=o,u/=a;var l=Math.sqrt(s*s+u*u),c=l-1;if(c<0)return[];var f=c/l;return[(n-e)*f+e,(i-t)*f+t]},ep=function(e,t,n,i,o,a,s){return e-=o,t-=a,e/=n/2+s,t/=i/2+s,e*e+t*t<=1},Dy=function(e,t,n,i,o,a,s){var u=[n-e,i-t],l=[e-o,t-a],c=u[0]*u[0]+u[1]*u[1],f=2*(l[0]*u[0]+l[1]*u[1]),h=l[0]*l[0]+l[1]*l[1]-s*s,d=f*f-4*c*h;if(d<0)return[];var v=(-f+Math.sqrt(d))/(2*c),y=(-f-Math.sqrt(d))/(2*c),w=Math.min(v,y),b=Math.max(v,y),p=[];if(w>=0&&w<=1&&p.push(w),b>=0&&b<=1&&p.push(b),p.length===0)return[];var _=p[0]*u[0]+e,O=p[0]*u[1]+t;if(p.length>1){if(p[0]==p[1])return[_,O];var P=p[1]*u[0]+e,R=p[1]*u[1]+t;return[_,O,P,R]}else return[_,O]},R_=function(e,t,n){return t<=e&&e<=n||n<=e&&e<=t?e:e<=t&&t<=n||n<=t&&t<=e?t:n},Dd=function(e,t,n,i,o,a,s,u,l){var c=e-o,f=n-e,h=s-o,d=t-a,v=i-t,y=u-a,w=h*d-y*c,b=f*d-v*c,p=y*f-h*v;if(p!==0){var _=w/p,O=b/p,P=.001,R=0-P,T=1+P;return R<=_&&_<=T&&R<=O&&O<=T?[e+_*f,t+_*v]:l?[e+_*f,t+_*v]:[]}else return w===0||b===0?R_(e,n,s)===s?[s,u]:R_(e,n,o)===o?[o,a]:R_(o,s,n)===n?[n,i]:[]:[]},Qy=function(e,t,n,i,o,a,s,u){var l=[],c,f=new Array(n.length),h=!0;a==null&&(h=!1);var d;if(h){for(var v=0;v<f.length/2;v++)f[v*2]=n[v*2]*a+i,f[v*2+1]=n[v*2+1]*s+o;if(u>0){var y=A0(f,-u);d=P0(y)}else d=f}else d=n;for(var w,b,p,_,O=0;O<d.length/2;O++)w=d[O*2],b=d[O*2+1],O<d.length/2-1?(p=d[(O+1)*2],_=d[(O+1)*2+1]):(p=d[0],_=d[1]),c=Dd(e,t,i,o,w,b,p,_),c.length!==0&&l.push(c[0],c[1]);return l},H5=function(e,t,n,i,o,a,s,u,l){var c=[],f,h=new Array(n.length*2);l.forEach(function(p,_){_===0?(h[h.length-2]=p.startX,h[h.length-1]=p.startY):(h[_*4-2]=p.startX,h[_*4-1]=p.startY),h[_*4]=p.stopX,h[_*4+1]=p.stopY,f=Dy(e,t,i,o,p.cx,p.cy,p.radius),f.length!==0&&c.push(f[0],f[1])});for(var d=0;d<h.length/4;d++)f=Dd(e,t,i,o,h[d*4],h[d*4+1],h[d*4+2],h[d*4+3],!1),f.length!==0&&c.push(f[0],f[1]);if(c.length>2){for(var v=[c[0],c[1]],y=Math.pow(v[0]-e,2)+Math.pow(v[1]-t,2),w=1;w<c.length/2;w++){var b=Math.pow(c[w*2]-e,2)+Math.pow(c[w*2+1]-t,2);b<=y&&(v[0]=c[w*2],v[1]=c[w*2+1],y=b)}return v}return c},Hm=function(e,t,n){var i=[e[0]-t[0],e[1]-t[1]],o=Math.sqrt(i[0]*i[0]+i[1]*i[1]),a=(o-n)/o;return a<0&&(a=1e-5),[t[0]+a*i[0],t[1]+a*i[1]]},xs=function(e,t){var n=Mx(e,t);return n=rD(n),n},rD=function(e){for(var t,n,i=e.length/2,o=1/0,a=1/0,s=-1/0,u=-1/0,l=0;l<i;l++)t=e[2*l],n=e[2*l+1],o=Math.min(o,t),s=Math.max(s,t),a=Math.min(a,n),u=Math.max(u,n);for(var c=2/(s-o),f=2/(u-a),h=0;h<i;h++)t=e[2*h]=e[2*h]*c,n=e[2*h+1]=e[2*h+1]*f,o=Math.min(o,t),s=Math.max(s,t),a=Math.min(a,n),u=Math.max(u,n);if(a<-1)for(var d=0;d<i;d++)n=e[2*d+1]=e[2*d+1]+(-1-a);return e},Mx=function(e,t){var n=1/e*2*Math.PI,i=e%2===0?Math.PI/2+n/2:Math.PI/2;i+=t;for(var o=new Array(e*2),a,s=0;s<e;s++)a=s*n+i,o[2*s]=Math.cos(a),o[2*s+1]=Math.sin(-a);return o},ap=function(e,t){return Math.min(e/4,t/4,8)},nD=function(e,t){return Math.min(e/10,t/10,8)},OS=function(){return 8},$5=function(e,t,n){return[e-2*t+n,2*(t-e),e]},Lx=function(e,t){return{heightOffset:Math.min(15,.05*t),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}},Y5=Vo({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),X5={pageRank:function(e){for(var t=Y5(e),n=t.dampingFactor,i=t.precision,o=t.iterations,a=t.weight,s=this._private.cy,u=this.byGroup(),l=u.nodes,c=u.edges,f=l.length,h=f*f,d=c.length,v=new Array(h),y=new Array(f),w=(1-n)/f,b=0;b<f;b++){for(var p=0;p<f;p++){var _=b*f+p;v[_]=0}y[b]=0}for(var O=0;O<d;O++){var P=c[O],R=P.data("source"),T=P.data("target");if(R!==T){var A=l.indexOfId(R),M=l.indexOfId(T),N=a(P),j=M*f+A;v[j]+=N,y[A]+=N}}for(var B=1/f+w,q=0;q<f;q++)if(y[q]===0)for(var W=0;W<f;W++){var J=W*f+q;v[J]=B}else for(var te=0;te<f;te++){var re=te*f+q;v[re]=v[re]/y[q]+w}for(var ee=new Array(f),fe=new Array(f),he,se=0;se<f;se++)ee[se]=1;for(var me=0;me<o;me++){for(var De=0;De<f;De++)fe[De]=0;for(var Le=0;Le<f;Le++)for(var Ie=0;Ie<f;Ie++){var qe=Le*f+Ie;fe[Le]+=v[qe]*ee[Ie]}I5(fe),he=ee,ee=fe,fe=he;for(var Ge=0,Me=0;Me<f;Me++){var Pe=he[Me]-ee[Me];Ge+=Pe*Pe}if(Ge<i)break}var de={rank:function(Ae){return Ae=s.collection(Ae)[0],ee[l.indexOf(Ae)]}};return de}},aC=Vo({root:null,weight:function(e){return 1},directed:!1,alpha:0}),Cg={degreeCentralityNormalized:function(e){e=aC(e);var t=this.cy(),n=this.nodes(),i=n.length;if(e.directed){for(var c={},f={},h=0,d=0,v=0;v<i;v++){var y=n[v],w=y.id();e.root=y;var b=this.degreeCentrality(e);h<b.indegree&&(h=b.indegree),d<b.outdegree&&(d=b.outdegree),c[w]=b.indegree,f[w]=b.outdegree}return{indegree:function(_){return h==0?0:(vr(_)&&(_=t.filter(_)),c[_.id()]/h)},outdegree:function(_){return d===0?0:(vr(_)&&(_=t.filter(_)),f[_.id()]/d)}}}else{for(var o={},a=0,s=0;s<i;s++){var u=n[s];e.root=u;var l=this.degreeCentrality(e);a<l.degree&&(a=l.degree),o[u.id()]=l.degree}return{degree:function(_){return a===0?0:(vr(_)&&(_=t.filter(_)),o[_.id()]/a)}}}},degreeCentrality:function(e){e=aC(e);var t=this.cy(),n=this,i=e,o=i.root,a=i.weight,s=i.directed,u=i.alpha;if(o=t.collection(o)[0],s){for(var d=o.connectedEdges(),v=d.filter(function(R){return R.target().same(o)&&n.has(R)}),y=d.filter(function(R){return R.source().same(o)&&n.has(R)}),w=v.length,b=y.length,p=0,_=0,O=0;O<v.length;O++)p+=a(v[O]);for(var P=0;P<y.length;P++)_+=a(y[P]);return{indegree:Math.pow(w,1-u)*Math.pow(p,u),outdegree:Math.pow(b,1-u)*Math.pow(_,u)}}else{for(var l=o.connectedEdges().intersection(n),c=l.length,f=0,h=0;h<l.length;h++)f+=a(l[h]);return{degree:Math.pow(c,1-u)*Math.pow(f,u)}}}};Cg.dc=Cg.degreeCentrality;Cg.dcn=Cg.degreeCentralityNormalised=Cg.degreeCentralityNormalized;var sC=Vo({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Pg={closenessCentralityNormalized:function(e){for(var t=sC(e),n=t.harmonic,i=t.weight,o=t.directed,a=this.cy(),s={},u=0,l=this.nodes(),c=this.floydWarshall({weight:i,directed:o}),f=0;f<l.length;f++){for(var h=0,d=l[f],v=0;v<l.length;v++)if(f!==v){var y=c.distance(d,l[v]);n?h+=1/y:h+=y}n||(h=1/h),u<h&&(u=h),s[d.id()]=h}return{closeness:function(b){return u==0?0:(vr(b)?b=a.filter(b)[0].id():b=b.id(),s[b]/u)}}},closenessCentrality:function(e){var t=sC(e),n=t.root,i=t.weight,o=t.directed,a=t.harmonic;n=this.filter(n)[0];for(var s=this.dijkstra({root:n,weight:i,directed:o}),u=0,l=this.nodes(),c=0;c<l.length;c++){var f=l[c];if(!f.same(n)){var h=s.distanceTo(f);a?u+=1/h:u+=h}}return a?u:1/u}};Pg.cc=Pg.closenessCentrality;Pg.ccn=Pg.closenessCentralityNormalised=Pg.closenessCentralityNormalized;var K5=Vo({weight:null,directed:!1}),Nx={betweennessCentrality:function(e){for(var t=K5(e),n=t.directed,i=t.weight,o=i!=null,a=this.cy(),s=this.nodes(),u={},l={},c=0,f={set:function(_,O){l[_]=O,O>c&&(c=O)},get:function(_){return l[_]}},h=0;h<s.length;h++){var d=s[h],v=d.id();n?u[v]=d.outgoers().nodes():u[v]=d.openNeighborhood().nodes(),f.set(v,0)}for(var y=function(){for(var _=s[w].id(),O=[],P={},R={},T={},A=new fm(function(Le,Ie){return T[Le]-T[Ie]}),M=0;M<s.length;M++){var N=s[M].id();P[N]=[],R[N]=0,T[N]=1/0}for(R[_]=1,T[_]=0,A.push(_);!A.empty();){var j=A.pop();if(O.push(j),o)for(var B=0;B<u[j].length;B++){var q=u[j][B],W=a.getElementById(j),J=void 0;W.edgesTo(q).length>0?J=W.edgesTo(q)[0]:J=q.edgesTo(W)[0];var te=i(J);q=q.id(),T[q]>T[j]+te&&(T[q]=T[j]+te,A.nodes.indexOf(q)<0?A.push(q):A.updateItem(q),R[q]=0,P[q]=[]),T[q]==T[j]+te&&(R[q]=R[q]+R[j],P[q].push(j))}else for(var re=0;re<u[j].length;re++){var ee=u[j][re].id();T[ee]==1/0&&(A.push(ee),T[ee]=T[j]+1),T[ee]==T[j]+1&&(R[ee]=R[ee]+R[j],P[ee].push(j))}}for(var fe={},he=0;he<s.length;he++)fe[s[he].id()]=0;for(;O.length>0;){for(var se=O.pop(),me=0;me<P[se].length;me++){var De=P[se][me];fe[De]=fe[De]+R[De]/R[se]*(1+fe[se])}se!=s[w].id()&&f.set(se,f.get(se)+fe[se])}},w=0;w<s.length;w++)y();var b={betweenness:function(_){var O=a.collection(_).id();return f.get(O)},betweennessNormalized:function(_){if(c==0)return 0;var O=a.collection(_).id();return f.get(O)/c}};return b.betweennessNormalised=b.betweennessNormalized,b}};Nx.bc=Nx.betweennessCentrality;var Z5=Vo({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(r){return 1}]}),Q5=function(e){return Z5(e)},J5=function(e,t){for(var n=0,i=0;i<t.length;i++)n+=t[i](e);return n},e3=function(e,t,n){for(var i=0;i<t;i++)e[i*t+i]=n},iD=function(e,t){for(var n,i=0;i<t;i++){n=0;for(var o=0;o<t;o++)n+=e[o*t+i];for(var a=0;a<t;a++)e[a*t+i]=e[a*t+i]/n}},t3=function(e,t,n){for(var i=new Array(n*n),o=0;o<n;o++){for(var a=0;a<n;a++)i[o*n+a]=0;for(var s=0;s<n;s++)for(var u=0;u<n;u++)i[o*n+u]+=e[o*n+s]*t[s*n+u]}return i},r3=function(e,t,n){for(var i=e.slice(0),o=1;o<n;o++)e=t3(e,i,t);return e},n3=function(e,t,n){for(var i=new Array(t*t),o=0;o<t*t;o++)i[o]=Math.pow(e[o],n);return iD(i,t),i},i3=function(e,t,n,i){for(var o=0;o<n;o++){var a=Math.round(e[o]*Math.pow(10,i))/Math.pow(10,i),s=Math.round(t[o]*Math.pow(10,i))/Math.pow(10,i);if(a!==s)return!1}return!0},o3=function(e,t,n,i){for(var o=[],a=0;a<t;a++){for(var s=[],u=0;u<t;u++)Math.round(e[a*t+u]*1e3)/1e3>0&&s.push(n[u]);s.length!==0&&o.push(i.collection(s))}return o},a3=function(e,t){for(var n=0;n<e.length;n++)if(!t[n]||e[n].id()!==t[n].id())return!1;return!0},s3=function(e){for(var t=0;t<e.length;t++)for(var n=0;n<e.length;n++)t!=n&&a3(e[t],e[n])&&e.splice(n,1);return e},uC=function(e){for(var t=this.nodes(),n=this.edges(),i=this.cy(),o=Q5(e),a={},s=0;s<t.length;s++)a[t[s].id()]=s;for(var u=t.length,l=u*u,c=new Array(l),f,h=0;h<l;h++)c[h]=0;for(var d=0;d<n.length;d++){var v=n[d],y=a[v.source().id()],w=a[v.target().id()],b=J5(v,o.attributes);c[y*u+w]+=b,c[w*u+y]+=b}e3(c,u,o.multFactor),iD(c,u);for(var p=!0,_=0;p&&_<o.maxIterations;)p=!1,f=r3(c,u,o.expandFactor),c=n3(f,u,o.inflateFactor),i3(c,f,l,4)||(p=!0),_++;var O=o3(c,u,t,i);return O=s3(O),O},u3={markovClustering:uC,mcl:uC},l3=function(e){return e},oD=function(e,t){return Math.abs(t-e)},lC=function(e,t,n){return e+oD(t,n)},cC=function(e,t,n){return e+Math.pow(n-t,2)},c3=function(e){return Math.sqrt(e)},f3=function(e,t,n){return Math.max(e,oD(t,n))},xy=function(e,t,n,i,o){for(var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:l3,s=i,u,l,c=0;c<e;c++)u=t(c),l=n(c),s=o(s,u,l);return a(s)},Lg={euclidean:function(e,t,n){return e>=2?xy(e,t,n,0,cC,c3):xy(e,t,n,0,lC)},squaredEuclidean:function(e,t,n){return xy(e,t,n,0,cC)},manhattan:function(e,t,n){return xy(e,t,n,0,lC)},max:function(e,t,n){return xy(e,t,n,-1/0,f3)}};Lg["squared-euclidean"]=Lg.squaredEuclidean;Lg.squaredeuclidean=Lg.squaredEuclidean;function Q0(r,e,t,n,i,o){var a;return $i(r)?a=r:a=Lg[r]||Lg.euclidean,e===0&&$i(r)?a(i,o):a(e,t,n,i,o)}var h3=Vo({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),xS=function(e){return h3(e)},R0=function(e,t,n,i,o){var a=o!=="kMedoids",s=a?function(f){return n[f]}:function(f){return i[f](n)},u=function(h){return i[h](t)},l=n,c=t;return Q0(e,i.length,s,u,l,c)},I_=function(e,t,n){for(var i=n.length,o=new Array(i),a=new Array(i),s=new Array(t),u=null,l=0;l<i;l++)o[l]=e.min(n[l]).value,a[l]=e.max(n[l]).value;for(var c=0;c<t;c++){u=[];for(var f=0;f<i;f++)u[f]=Math.random()*(a[f]-o[f])+o[f];s[c]=u}return s},aD=function(e,t,n,i,o){for(var a=1/0,s=0,u=0;u<t.length;u++){var l=R0(n,e,t[u],i,o);l<a&&(a=l,s=u)}return s},sD=function(e,t,n){for(var i=[],o=null,a=0;a<t.length;a++)o=t[a],n[o.id()]===e&&i.push(o);return i},d3=function(e,t,n){return Math.abs(t-e)<=n},v3=function(e,t,n){for(var i=0;i<e.length;i++)for(var o=0;o<e[i].length;o++){var a=Math.abs(e[i][o]-t[i][o]);if(a>n)return!1}return!0},p3=function(e,t,n){for(var i=0;i<n;i++)if(e===t[i])return!0;return!1},fC=function(e,t){var n=new Array(t);if(e.length<50)for(var i=0;i<t;i++){for(var o=e[Math.floor(Math.random()*e.length)];p3(o,n,i);)o=e[Math.floor(Math.random()*e.length)];n[i]=o}else for(var a=0;a<t;a++)n[a]=e[Math.floor(Math.random()*e.length)];return n},hC=function(e,t,n){for(var i=0,o=0;o<t.length;o++)i+=R0("manhattan",t[o],e,n,"kMedoids");return i},g3=function(e){var t=this.cy(),n=this.nodes(),i=null,o=xS(e),a=new Array(o.k),s={},u;o.testMode?typeof o.testCentroids=="number"?(o.testCentroids,u=I_(n,o.k,o.attributes)):Go(o.testCentroids)==="object"?u=o.testCentroids:u=I_(n,o.k,o.attributes):u=I_(n,o.k,o.attributes);for(var l=!0,c=0;l&&c<o.maxIterations;){for(var f=0;f<n.length;f++)i=n[f],s[i.id()]=aD(i,u,o.distance,o.attributes,"kMeans");l=!1;for(var h=0;h<o.k;h++){var d=sD(h,n,s);if(d.length!==0){for(var v=o.attributes.length,y=u[h],w=new Array(v),b=new Array(v),p=0;p<v;p++){b[p]=0;for(var _=0;_<d.length;_++)i=d[_],b[p]+=o.attributes[p](i);w[p]=b[p]/d.length,d3(w[p],y[p],o.sensitivityThreshold)||(l=!0)}u[h]=w,a[h]=t.collection(d)}}c++}return a},y3=function(e){var t=this.cy(),n=this.nodes(),i=null,o=xS(e),a=new Array(o.k),s,u={},l,c=new Array(o.k);o.testMode?typeof o.testCentroids=="number"||(Go(o.testCentroids)==="object"?s=o.testCentroids:s=fC(n,o.k)):s=fC(n,o.k);for(var f=!0,h=0;f&&h<o.maxIterations;){for(var d=0;d<n.length;d++)i=n[d],u[i.id()]=aD(i,s,o.distance,o.attributes,"kMedoids");f=!1;for(var v=0;v<s.length;v++){var y=sD(v,n,u);if(y.length!==0){c[v]=hC(s[v],y,o.attributes);for(var w=0;w<y.length;w++)l=hC(y[w],y,o.attributes),l<c[v]&&(c[v]=l,s[v]=y[w],f=!0);a[v]=t.collection(y)}}h++}return a},m3=function(e,t,n,i,o){for(var a,s,u=0;u<t.length;u++)for(var l=0;l<e.length;l++)i[u][l]=Math.pow(n[u][l],o.m);for(var c=0;c<e.length;c++)for(var f=0;f<o.attributes.length;f++){a=0,s=0;for(var h=0;h<t.length;h++)a+=i[h][c]*o.attributes[f](t[h]),s+=i[h][c];e[c][f]=a/s}},b3=function(e,t,n,i,o){for(var a=0;a<e.length;a++)t[a]=e[a].slice();for(var s,u,l,c=2/(o.m-1),f=0;f<n.length;f++)for(var h=0;h<i.length;h++){s=0;for(var d=0;d<n.length;d++)u=R0(o.distance,i[h],n[f],o.attributes,"cmeans"),l=R0(o.distance,i[h],n[d],o.attributes,"cmeans"),s+=Math.pow(u/l,c);e[h][f]=1/s}},_3=function(e,t,n,i){for(var o=new Array(n.k),a=0;a<o.length;a++)o[a]=[];for(var s,u,l=0;l<t.length;l++){s=-1/0,u=-1;for(var c=0;c<t[0].length;c++)t[l][c]>s&&(s=t[l][c],u=c);o[u].push(e[l])}for(var f=0;f<o.length;f++)o[f]=i.collection(o[f]);return o},dC=function(e){var t=this.cy(),n=this.nodes(),i=xS(e),o,a,s,u,l;u=new Array(n.length);for(var c=0;c<n.length;c++)u[c]=new Array(i.k);s=new Array(n.length);for(var f=0;f<n.length;f++)s[f]=new Array(i.k);for(var h=0;h<n.length;h++){for(var d=0,v=0;v<i.k;v++)s[h][v]=Math.random(),d+=s[h][v];for(var y=0;y<i.k;y++)s[h][y]=s[h][y]/d}a=new Array(i.k);for(var w=0;w<i.k;w++)a[w]=new Array(i.attributes.length);l=new Array(n.length);for(var b=0;b<n.length;b++)l[b]=new Array(i.k);for(var p=!0,_=0;p&&_<i.maxIterations;)p=!1,m3(a,n,s,l,i),b3(s,u,a,n,i),v3(s,u,i.sensitivityThreshold)||(p=!0),_++;return o=_3(n,s,i,t),{clusters:o,degreeOfMembership:s}},w3={kMeans:g3,kMedoids:y3,fuzzyCMeans:dC,fcm:dC},E3=Vo({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),O3={single:"min",complete:"max"},x3=function(e){var t=E3(e),n=O3[t.linkage];return n!=null&&(t.linkage=n),t},vC=function(e,t,n,i,o){for(var a=0,s=1/0,u,l=o.attributes,c=function(M,N){return Q0(o.distance,l.length,function(j){return l[j](M)},function(j){return l[j](N)},M,N)},f=0;f<e.length;f++){var h=e[f].key,d=n[h][i[h]];d<s&&(a=h,s=d)}if(o.mode==="threshold"&&s>=o.threshold||o.mode==="dendrogram"&&e.length===1)return!1;var v=t[a],y=t[i[a]],w;o.mode==="dendrogram"?w={left:v,right:y,key:v.key}:w={value:v.value.concat(y.value),key:v.key},e[v.index]=w,e.splice(y.index,1),t[v.key]=w;for(var b=0;b<e.length;b++){var p=e[b];v.key===p.key?u=1/0:o.linkage==="min"?(u=n[v.key][p.key],n[v.key][p.key]>n[y.key][p.key]&&(u=n[y.key][p.key])):o.linkage==="max"?(u=n[v.key][p.key],n[v.key][p.key]<n[y.key][p.key]&&(u=n[y.key][p.key])):o.linkage==="mean"?u=(n[v.key][p.key]*v.size+n[y.key][p.key]*y.size)/(v.size+y.size):o.mode==="dendrogram"?u=c(p.value,v.value):u=c(p.value[0],v.value[0]),n[v.key][p.key]=n[p.key][v.key]=u}for(var _=0;_<e.length;_++){var O=e[_].key;if(i[O]===v.key||i[O]===y.key){for(var P=O,R=0;R<e.length;R++){var T=e[R].key;n[O][T]<n[O][P]&&(P=T)}i[O]=P}e[_].index=_}return v.key=y.key=v.index=y.index=null,!0},Eg=function(e,t,n){e&&(e.value?t.push(e.value):(e.left&&Eg(e.left,t),e.right&&Eg(e.right,t)))},jx=function(e,t){if(!e)return"";if(e.left&&e.right){var n=jx(e.left,t),i=jx(e.right,t),o=t.add({group:"nodes",data:{id:n+","+i}});return t.add({group:"edges",data:{source:n,target:o.id()}}),t.add({group:"edges",data:{source:i,target:o.id()}}),o.id()}else if(e.value)return e.value.id()},Fx=function(e,t,n){if(!e)return[];var i=[],o=[],a=[];return t===0?(e.left&&Eg(e.left,i),e.right&&Eg(e.right,o),a=i.concat(o),[n.collection(a)]):t===1?e.value?[n.collection(e.value)]:(e.left&&Eg(e.left,i),e.right&&Eg(e.right,o),[n.collection(i),n.collection(o)]):e.value?[n.collection(e.value)]:(e.left&&(i=Fx(e.left,t-1,n)),e.right&&(o=Fx(e.right,t-1,n)),i.concat(o))},pC=function(e){for(var t=this.cy(),n=this.nodes(),i=x3(e),o=i.attributes,a=function(_,O){return Q0(i.distance,o.length,function(P){return o[P](_)},function(P){return o[P](O)},_,O)},s=[],u=[],l=[],c=[],f=0;f<n.length;f++){var h={value:i.mode==="dendrogram"?n[f]:[n[f]],key:f,index:f};s[f]=h,c[f]=h,u[f]=[],l[f]=0}for(var d=0;d<s.length;d++)for(var v=0;v<=d;v++){var y=void 0;i.mode==="dendrogram"?y=d===v?1/0:a(s[d].value,s[v].value):y=d===v?1/0:a(s[d].value[0],s[v].value[0]),u[d][v]=y,u[v][d]=y,y<u[d][l[d]]&&(l[d]=v)}for(var w=vC(s,c,u,l,i);w;)w=vC(s,c,u,l,i);var b;return i.mode==="dendrogram"?(b=Fx(s[0],i.dendrogramDepth,t),i.addDendrogram&&jx(s[0],t)):(b=new Array(s.length),s.forEach(function(p,_){p.key=p.index=null,b[_]=t.collection(p.value)})),b},S3={hierarchicalClustering:pC,hca:pC},T3=Vo({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),C3=function(e){var t=e.damping,n=e.preference;.5<=t&&t<1||Hi("Damping must range on [0.5, 1).  Got: ".concat(t));var i=["median","mean","min","max"];return i.some(function(o){return o===n})||qt(n)||Hi("Preference must be one of [".concat(i.map(function(o){return"'".concat(o,"'")}).join(", "),"] or a number.  Got: ").concat(n)),T3(e)},P3=function(e,t,n,i){var o=function(s,u){return i[u](s)};return-Q0(e,i.length,function(a){return o(t,a)},function(a){return o(n,a)},t,n)},A3=function(e,t){var n=null;return t==="median"?n=A5(e):t==="mean"?n=P5(e):t==="min"?n=T5(e):t==="max"?n=C5(e):n=t,n},R3=function(e,t,n){for(var i=[],o=0;o<e;o++)t[o*e+o]+n[o*e+o]>0&&i.push(o);return i},gC=function(e,t,n){for(var i=[],o=0;o<e;o++){for(var a=-1,s=-1/0,u=0;u<n.length;u++){var l=n[u];t[o*e+l]>s&&(a=l,s=t[o*e+l])}a>0&&i.push(a)}for(var c=0;c<n.length;c++)i[n[c]]=n[c];return i},I3=function(e,t,n){for(var i=gC(e,t,n),o=0;o<n.length;o++){for(var a=[],s=0;s<i.length;s++)i[s]===n[o]&&a.push(s);for(var u=-1,l=-1/0,c=0;c<a.length;c++){for(var f=0,h=0;h<a.length;h++)f+=t[a[h]*e+a[c]];f>l&&(u=c,l=f)}n[o]=a[u]}return i=gC(e,t,n),i},yC=function(e){for(var t=this.cy(),n=this.nodes(),i=C3(e),o={},a=0;a<n.length;a++)o[n[a].id()]=a;var s,u,l,c,f,h;s=n.length,u=s*s,l=new Array(u);for(var d=0;d<u;d++)l[d]=-1/0;for(var v=0;v<s;v++)for(var y=0;y<s;y++)v!==y&&(l[v*s+y]=P3(i.distance,n[v],n[y],i.attributes));c=A3(l,i.preference);for(var w=0;w<s;w++)l[w*s+w]=c;f=new Array(u);for(var b=0;b<u;b++)f[b]=0;h=new Array(u);for(var p=0;p<u;p++)h[p]=0;for(var _=new Array(s),O=new Array(s),P=new Array(s),R=0;R<s;R++)_[R]=0,O[R]=0,P[R]=0;for(var T=new Array(s*i.minIterations),A=0;A<T.length;A++)T[A]=0;var M;for(M=0;M<i.maxIterations;M++){for(var N=0;N<s;N++){for(var j=-1/0,B=-1/0,q=-1,W=0,J=0;J<s;J++)_[J]=f[N*s+J],W=h[N*s+J]+l[N*s+J],W>=j?(B=j,j=W,q=J):W>B&&(B=W);for(var te=0;te<s;te++)f[N*s+te]=(1-i.damping)*(l[N*s+te]-j)+i.damping*_[te];f[N*s+q]=(1-i.damping)*(l[N*s+q]-B)+i.damping*_[q]}for(var re=0;re<s;re++){for(var ee=0,fe=0;fe<s;fe++)_[fe]=h[fe*s+re],O[fe]=Math.max(0,f[fe*s+re]),ee+=O[fe];ee-=O[re],O[re]=f[re*s+re],ee+=O[re];for(var he=0;he<s;he++)h[he*s+re]=(1-i.damping)*Math.min(0,ee-O[he])+i.damping*_[he];h[re*s+re]=(1-i.damping)*(ee-O[re])+i.damping*_[re]}for(var se=0,me=0;me<s;me++){var De=h[me*s+me]+f[me*s+me]>0?1:0;T[M%i.minIterations*s+me]=De,se+=De}if(se>0&&(M>=i.minIterations-1||M==i.maxIterations-1)){for(var Le=0,Ie=0;Ie<s;Ie++){P[Ie]=0;for(var qe=0;qe<i.minIterations;qe++)P[Ie]+=T[qe*s+Ie];(P[Ie]===0||P[Ie]===i.minIterations)&&Le++}if(Le===s)break}}for(var Ge=R3(s,f,h),Me=I3(s,l,Ge),Pe={},de=0;de<Ge.length;de++)Pe[Ge[de]]=[];for(var Oe=0;Oe<n.length;Oe++){var Ae=o[n[Oe].id()],Ve=Me[Ae];Ve!=null&&Pe[Ve].push(n[Oe])}for(var tt=new Array(Ge.length),ht=0;ht<Ge.length;ht++)tt[ht]=t.collection(Pe[Ge[ht]]);return tt},k3={affinityPropagation:yC,ap:yC},D3=Vo({root:void 0,directed:!1}),M3={hierholzer:function(e){if(!wn(e)){var t=arguments;e={root:t[0],directed:t[1]}}var n=D3(e),i=n.root,o=n.directed,a=this,s=!1,u,l,c;i&&(c=vr(i)?this.filter(i)[0].id():i[0].id());var f={},h={};o?a.forEach(function(p){var _=p.id();if(p.isNode()){var O=p.indegree(!0),P=p.outdegree(!0),R=O-P,T=P-O;R==1?u?s=!0:u=_:T==1?l?s=!0:l=_:(T>1||R>1)&&(s=!0),f[_]=[],p.outgoers().forEach(function(A){A.isEdge()&&f[_].push(A.id())})}else h[_]=[void 0,p.target().id()]}):a.forEach(function(p){var _=p.id();if(p.isNode()){var O=p.degree(!0);O%2&&(u?l?s=!0:l=_:u=_),f[_]=[],p.connectedEdges().forEach(function(P){return f[_].push(P.id())})}else h[_]=[p.source().id(),p.target().id()]});var d={found:!1,trail:void 0};if(s)return d;if(l&&u)if(o){if(c&&l!=c)return d;c=l}else{if(c&&l!=c&&u!=c)return d;c||(c=l)}else c||(c=a[0].id());var v=function(_){for(var O=_,P=[_],R,T,A;f[O].length;)R=f[O].shift(),T=h[R][0],A=h[R][1],O!=A?(f[A]=f[A].filter(function(M){return M!=R}),O=A):!o&&O!=T&&(f[T]=f[T].filter(function(M){return M!=R}),O=T),P.unshift(R),P.unshift(O);return P},y=[],w=[];for(w=v(c);w.length!=1;)f[w[0]].length==0?(y.unshift(a.getElementById(w.shift())),y.unshift(a.getElementById(w.shift()))):w=v(w.shift()).concat(w);y.unshift(a.getElementById(w.shift()));for(var b in f)if(f[b].length)return d;return d.found=!0,d.trail=this.spawn(y,!0),d}},$m=function(){var e=this,t={},n=0,i=0,o=[],a=[],s={},u=function(h,d){for(var v=a.length-1,y=[],w=e.spawn();a[v].x!=h||a[v].y!=d;)y.push(a.pop().edge),v--;y.push(a.pop().edge),y.forEach(function(b){var p=b.connectedNodes().intersection(e);w.merge(b),p.forEach(function(_){var O=_.id(),P=_.connectedEdges().intersection(e);w.merge(_),t[O].cutVertex?w.merge(P.filter(function(R){return R.isLoop()})):w.merge(P)})}),o.push(w)},l=function(h,d,v){h===v&&(i+=1),t[d]={id:n,low:n++,cutVertex:!1};var y=e.getElementById(d).connectedEdges().intersection(e);if(y.size()===0)o.push(e.spawn(e.getElementById(d)));else{var w,b,p,_;y.forEach(function(O){w=O.source().id(),b=O.target().id(),p=w===d?b:w,p!==v&&(_=O.id(),s[_]||(s[_]=!0,a.push({x:d,y:p,edge:O})),p in t?t[d].low=Math.min(t[d].low,t[p].id):(l(h,p,d),t[d].low=Math.min(t[d].low,t[p].low),t[d].id<=t[p].low&&(t[d].cutVertex=!0,u(d,p))))})}};e.forEach(function(f){if(f.isNode()){var h=f.id();h in t||(i=0,l(h,h),t[h].cutVertex=i>1)}});var c=Object.keys(t).filter(function(f){return t[f].cutVertex}).map(function(f){return e.getElementById(f)});return{cut:e.spawn(c),components:o}},L3={hopcroftTarjanBiconnected:$m,htbc:$m,htb:$m,hopcroftTarjanBiconnectedComponents:$m},Ym=function(){var e=this,t={},n=0,i=[],o=[],a=e.spawn(e),s=function(l){o.push(l),t[l]={index:n,low:n++,explored:!1};var c=e.getElementById(l).connectedEdges().intersection(e);if(c.forEach(function(y){var w=y.target().id();w!==l&&(w in t||s(w),t[w].explored||(t[l].low=Math.min(t[l].low,t[w].low)))}),t[l].index===t[l].low){for(var f=e.spawn();;){var h=o.pop();if(f.merge(e.getElementById(h)),t[h].low=t[l].index,t[h].explored=!0,h===l)break}var d=f.edgesWith(f),v=f.merge(d);i.push(v),a=a.difference(v)}};return e.forEach(function(u){if(u.isNode()){var l=u.id();l in t||s(l)}}),{cut:a,components:i}},N3={tarjanStronglyConnected:Ym,tsc:Ym,tscc:Ym,tarjanStronglyConnectedComponents:Ym},uD={};[Ky,v5,p5,y5,b5,w5,x5,X5,Cg,Pg,Nx,u3,w3,S3,k3,M3,L3,N3].forEach(function(r){_r(uD,r)});/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var lD=0,cD=1,fD=2,dc=function(e){if(!(this instanceof dc))return new dc(e);this.id="Thenable/1.0.7",this.state=lD,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};dc.prototype={fulfill:function(e){return mC(this,cD,"fulfillValue",e)},reject:function(e){return mC(this,fD,"rejectReason",e)},then:function(e,t){var n=this,i=new dc;return n.onFulfilled.push(_C(e,i,"fulfill")),n.onRejected.push(_C(t,i,"reject")),hD(n),i.proxy}};var mC=function(e,t,n,i){return e.state===lD&&(e.state=t,e[n]=i,hD(e)),e},hD=function(e){e.state===cD?bC(e,"onFulfilled",e.fulfillValue):e.state===fD&&bC(e,"onRejected",e.rejectReason)},bC=function(e,t,n){if(e[t].length!==0){var i=e[t];e[t]=[];var o=function(){for(var s=0;s<i.length;s++)i[s](n)};typeof setImmediate=="function"?setImmediate(o):setTimeout(o,0)}},_C=function(e,t,n){return function(i){if(typeof e!="function")t[n].call(t,i);else{var o;try{o=e(i)}catch(a){t.reject(a);return}dD(t,o)}}},dD=function(e,t){if(e===t||e.proxy===t){e.reject(new TypeError("cannot resolve promise with itself"));return}var n;if(Go(t)==="object"&&t!==null||typeof t=="function")try{n=t.then}catch(o){e.reject(o);return}if(typeof n=="function"){var i=!1;try{n.call(t,function(o){i||(i=!0,o===t?e.reject(new TypeError("circular thenable chain")):dD(e,o))},function(o){i||(i=!0,e.reject(o))})}catch(o){i||e.reject(o)}return}e.fulfill(t)};dc.all=function(r){return new dc(function(e,t){for(var n=new Array(r.length),i=0,o=function(u,l){n[u]=l,i++,i===r.length&&e(n)},a=0;a<r.length;a++)(function(s){var u=r[s],l=u!=null&&u.then!=null;if(l)u.then(function(f){o(s,f)},function(f){t(f)});else{var c=u;o(s,c)}})(a)})};dc.resolve=function(r){return new dc(function(e,t){e(r)})};dc.reject=function(r){return new dc(function(e,t){t(r)})};var Ug=typeof Promise<"u"?Promise:dc,Bx=function(e,t,n){var i=pS(e),o=!i,a=this._private=_r({duration:1e3},t,n);if(a.target=e,a.style=a.style||a.css,a.started=!1,a.playing=!1,a.hooked=!1,a.applying=!1,a.progress=0,a.completes=[],a.frames=[],a.complete&&$i(a.complete)&&a.completes.push(a.complete),o){var s=e.position();a.startPosition=a.startPosition||{x:s.x,y:s.y},a.startStyle=a.startStyle||e.cy().style().getAnimationStartStyle(e,a.style)}if(i){var u=e.pan();a.startPan={x:u.x,y:u.y},a.startZoom=e.zoom()}this.length=1,this[0]=this},sp=Bx.prototype;_r(sp,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var t,n=e.target._private.animation;e.queue?t=n.queue:t=n.current,t.push(this),Iu(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var t=this._private;return e===void 0?t.progress*t.duration:this.progress(e/t.duration)},progress:function(e){var t=this._private,n=t.playing;return e===void 0?t.progress:(n&&this.pause(),t.progress=e,t.started=!1,n&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,t=e.playing;t&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(l,c){var f=e[l];f!=null&&(e[l]=e[c],e[c]=f)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var i=0;i<e.style.length;i++){var o=e.style[i],a=o.name,s=e.startStyle[a];e.startStyle[a]=o,e.style[i]=s}return t&&this.play(),this},promise:function(e){var t=this._private,n;switch(e){case"frame":n=t.frames;break;default:case"complete":case"completed":n=t.completes}return new Ug(function(i,o){n.push(function(){i()})})}});sp.complete=sp.completed;sp.run=sp.play;sp.running=sp.playing;var j3={animated:function(){return function(){var t=this,n=t.length!==void 0,i=n?t:[t],o=this._private.cy||this;if(!o.styleEnabled())return!1;var a=i[0];if(a)return a._private.animation.current.length>0}},clearQueue:function(){return function(){var t=this,n=t.length!==void 0,i=n?t:[t],o=this._private.cy||this;if(!o.styleEnabled())return this;for(var a=0;a<i.length;a++){var s=i[a];s._private.animation.queue=[]}return this}},delay:function(){return function(t,n){var i=this._private.cy||this;return i.styleEnabled()?this.animate({delay:t,duration:t,complete:n}):this}},delayAnimation:function(){return function(t,n){var i=this._private.cy||this;return i.styleEnabled()?this.animation({delay:t,duration:t,complete:n}):this}},animation:function(){return function(t,n){var i=this,o=i.length!==void 0,a=o?i:[i],s=this._private.cy||this,u=!o,l=!u;if(!s.styleEnabled())return this;var c=s.style();t=_r({},t,n);var f=Object.keys(t).length===0;if(f)return new Bx(a[0],t);switch(t.duration===void 0&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200;break}if(l&&(t.style=c.getPropsList(t.style||t.css),t.css=void 0),l&&t.renderedPosition!=null){var h=t.renderedPosition,d=s.pan(),v=s.zoom();t.position=Zk(h,v,d)}if(u&&t.panBy!=null){var y=t.panBy,w=s.pan();t.pan={x:w.x+y.x,y:w.y+y.y}}var b=t.center||t.centre;if(u&&b!=null){var p=s.getCenterPan(b.eles,t.zoom);p!=null&&(t.pan=p)}if(u&&t.fit!=null){var _=t.fit,O=s.getFitViewport(_.eles||_.boundingBox,_.padding);O!=null&&(t.pan=O.pan,t.zoom=O.zoom)}if(u&&wn(t.zoom)){var P=s.getZoomedViewport(t.zoom);P!=null?(P.zoomed&&(t.zoom=P.zoom),P.panned&&(t.pan=P.pan)):t.zoom=null}return new Bx(a[0],t)}},animate:function(){return function(t,n){var i=this,o=i.length!==void 0,a=o?i:[i],s=this._private.cy||this;if(!s.styleEnabled())return this;n&&(t=_r({},t,n));for(var u=0;u<a.length;u++){var l=a[u],c=l.animated()&&(t.queue===void 0||t.queue),f=l.animation(t,c?{queue:!0}:void 0);f.play()}return this}},stop:function(){return function(t,n){var i=this,o=i.length!==void 0,a=o?i:[i],s=this._private.cy||this;if(!s.styleEnabled())return this;for(var u=0;u<a.length;u++){for(var l=a[u],c=l._private,f=c.animation.current,h=0;h<f.length;h++){var d=f[h],v=d._private;n&&(v.duration=0)}t&&(c.animation.queue=[]),n||(c.animation.current=[])}return s.notify("draw"),this}}},k_,wC;function J0(){if(wC)return k_;wC=1;var r=Array.isArray;return k_=r,k_}var D_,EC;function F3(){if(EC)return D_;EC=1;var r=J0(),e=lm(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(o,a){if(r(o))return!1;var s=typeof o;return s=="number"||s=="symbol"||s=="boolean"||o==null||e(o)?!0:n.test(o)||!t.test(o)||a!=null&&o in Object(a)}return D_=i,D_}var M_,OC;function B3(){if(OC)return M_;OC=1;var r=qk(),e=um(),t="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",o="[object Proxy]";function a(s){if(!e(s))return!1;var u=r(s);return u==n||u==i||u==t||u==o}return M_=a,M_}var L_,xC;function U3(){if(xC)return L_;xC=1;var r=X0(),e=r["__core-js_shared__"];return L_=e,L_}var N_,SC;function z3(){if(SC)return N_;SC=1;var r=U3(),e=function(){var n=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function t(n){return!!e&&e in n}return N_=t,N_}var j_,TC;function q3(){if(TC)return j_;TC=1;var r=Function.prototype,e=r.toString;function t(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return j_=t,j_}var F_,CC;function G3(){if(CC)return F_;CC=1;var r=B3(),e=z3(),t=um(),n=q3(),i=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,a=Function.prototype,s=Object.prototype,u=a.toString,l=s.hasOwnProperty,c=RegExp("^"+u.call(l).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(h){if(!t(h)||e(h))return!1;var d=r(h)?c:o;return d.test(n(h))}return F_=f,F_}var B_,PC;function V3(){if(PC)return B_;PC=1;function r(e,t){return e==null?void 0:e[t]}return B_=r,B_}var U_,AC;function SS(){if(AC)return U_;AC=1;var r=G3(),e=V3();function t(n,i){var o=e(n,i);return r(o)?o:void 0}return U_=t,U_}var z_,RC;function eb(){if(RC)return z_;RC=1;var r=SS(),e=r(Object,"create");return z_=e,z_}var q_,IC;function W3(){if(IC)return q_;IC=1;var r=eb();function e(){this.__data__=r?r(null):{},this.size=0}return q_=e,q_}var G_,kC;function H3(){if(kC)return G_;kC=1;function r(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return G_=r,G_}var V_,DC;function $3(){if(DC)return V_;DC=1;var r=eb(),e="__lodash_hash_undefined__",t=Object.prototype,n=t.hasOwnProperty;function i(o){var a=this.__data__;if(r){var s=a[o];return s===e?void 0:s}return n.call(a,o)?a[o]:void 0}return V_=i,V_}var W_,MC;function Y3(){if(MC)return W_;MC=1;var r=eb(),e=Object.prototype,t=e.hasOwnProperty;function n(i){var o=this.__data__;return r?o[i]!==void 0:t.call(o,i)}return W_=n,W_}var H_,LC;function X3(){if(LC)return H_;LC=1;var r=eb(),e="__lodash_hash_undefined__";function t(n,i){var o=this.__data__;return this.size+=this.has(n)?0:1,o[n]=r&&i===void 0?e:i,this}return H_=t,H_}var $_,NC;function K3(){if(NC)return $_;NC=1;var r=W3(),e=H3(),t=$3(),n=Y3(),i=X3();function o(a){var s=-1,u=a==null?0:a.length;for(this.clear();++s<u;){var l=a[s];this.set(l[0],l[1])}}return o.prototype.clear=r,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=n,o.prototype.set=i,$_=o,$_}var Y_,jC;function Z3(){if(jC)return Y_;jC=1;function r(){this.__data__=[],this.size=0}return Y_=r,Y_}var X_,FC;function vD(){if(FC)return X_;FC=1;function r(e,t){return e===t||e!==e&&t!==t}return X_=r,X_}var K_,BC;function tb(){if(BC)return K_;BC=1;var r=vD();function e(t,n){for(var i=t.length;i--;)if(r(t[i][0],n))return i;return-1}return K_=e,K_}var Z_,UC;function Q3(){if(UC)return Z_;UC=1;var r=tb(),e=Array.prototype,t=e.splice;function n(i){var o=this.__data__,a=r(o,i);if(a<0)return!1;var s=o.length-1;return a==s?o.pop():t.call(o,a,1),--this.size,!0}return Z_=n,Z_}var Q_,zC;function J3(){if(zC)return Q_;zC=1;var r=tb();function e(t){var n=this.__data__,i=r(n,t);return i<0?void 0:n[i][1]}return Q_=e,Q_}var J_,qC;function e4(){if(qC)return J_;qC=1;var r=tb();function e(t){return r(this.__data__,t)>-1}return J_=e,J_}var ew,GC;function t4(){if(GC)return ew;GC=1;var r=tb();function e(t,n){var i=this.__data__,o=r(i,t);return o<0?(++this.size,i.push([t,n])):i[o][1]=n,this}return ew=e,ew}var tw,VC;function r4(){if(VC)return tw;VC=1;var r=Z3(),e=Q3(),t=J3(),n=e4(),i=t4();function o(a){var s=-1,u=a==null?0:a.length;for(this.clear();++s<u;){var l=a[s];this.set(l[0],l[1])}}return o.prototype.clear=r,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=n,o.prototype.set=i,tw=o,tw}var rw,WC;function n4(){if(WC)return rw;WC=1;var r=SS(),e=X0(),t=r(e,"Map");return rw=t,rw}var nw,HC;function i4(){if(HC)return nw;HC=1;var r=K3(),e=r4(),t=n4();function n(){this.size=0,this.__data__={hash:new r,map:new(t||e),string:new r}}return nw=n,nw}var iw,$C;function o4(){if($C)return iw;$C=1;function r(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return iw=r,iw}var ow,YC;function rb(){if(YC)return ow;YC=1;var r=o4();function e(t,n){var i=t.__data__;return r(n)?i[typeof n=="string"?"string":"hash"]:i.map}return ow=e,ow}var aw,XC;function a4(){if(XC)return aw;XC=1;var r=rb();function e(t){var n=r(this,t).delete(t);return this.size-=n?1:0,n}return aw=e,aw}var sw,KC;function s4(){if(KC)return sw;KC=1;var r=rb();function e(t){return r(this,t).get(t)}return sw=e,sw}var uw,ZC;function u4(){if(ZC)return uw;ZC=1;var r=rb();function e(t){return r(this,t).has(t)}return uw=e,uw}var lw,QC;function l4(){if(QC)return lw;QC=1;var r=rb();function e(t,n){var i=r(this,t),o=i.size;return i.set(t,n),this.size+=i.size==o?0:1,this}return lw=e,lw}var cw,JC;function c4(){if(JC)return cw;JC=1;var r=i4(),e=a4(),t=s4(),n=u4(),i=l4();function o(a){var s=-1,u=a==null?0:a.length;for(this.clear();++s<u;){var l=a[s];this.set(l[0],l[1])}}return o.prototype.clear=r,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=n,o.prototype.set=i,cw=o,cw}var fw,e2;function f4(){if(e2)return fw;e2=1;var r=c4(),e="Expected a function";function t(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var o=function(){var a=arguments,s=i?i.apply(this,a):a[0],u=o.cache;if(u.has(s))return u.get(s);var l=n.apply(this,a);return o.cache=u.set(s,l)||u,l};return o.cache=new(t.Cache||r),o}return t.Cache=r,fw=t,fw}var hw,t2;function h4(){if(t2)return hw;t2=1;var r=f4(),e=500;function t(n){var i=r(n,function(a){return o.size===e&&o.clear(),a}),o=i.cache;return i}return hw=t,hw}var dw,r2;function pD(){if(r2)return dw;r2=1;var r=h4(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,n=r(function(i){var o=[];return i.charCodeAt(0)===46&&o.push(""),i.replace(e,function(a,s,u,l){o.push(u?l.replace(t,"$1"):s||a)}),o});return dw=n,dw}var vw,n2;function gD(){if(n2)return vw;n2=1;function r(e,t){for(var n=-1,i=e==null?0:e.length,o=Array(i);++n<i;)o[n]=t(e[n],n,e);return o}return vw=r,vw}var pw,i2;function d4(){if(i2)return pw;i2=1;var r=yS(),e=gD(),t=J0(),n=lm(),i=r?r.prototype:void 0,o=i?i.toString:void 0;function a(s){if(typeof s=="string")return s;if(t(s))return e(s,a)+"";if(n(s))return o?o.call(s):"";var u=s+"";return u=="0"&&1/s==-1/0?"-0":u}return pw=a,pw}var gw,o2;function yD(){if(o2)return gw;o2=1;var r=d4();function e(t){return t==null?"":r(t)}return gw=e,gw}var yw,a2;function mD(){if(a2)return yw;a2=1;var r=J0(),e=F3(),t=pD(),n=yD();function i(o,a){return r(o)?o:e(o,a)?[o]:t(n(o))}return yw=i,yw}var mw,s2;function TS(){if(s2)return mw;s2=1;var r=lm();function e(t){if(typeof t=="string"||r(t))return t;var n=t+"";return n=="0"&&1/t==-1/0?"-0":n}return mw=e,mw}var bw,u2;function v4(){if(u2)return bw;u2=1;var r=mD(),e=TS();function t(n,i){i=r(i,n);for(var o=0,a=i.length;n!=null&&o<a;)n=n[e(i[o++])];return o&&o==a?n:void 0}return bw=t,bw}var _w,l2;function p4(){if(l2)return _w;l2=1;var r=v4();function e(t,n,i){var o=t==null?void 0:r(t,n);return o===void 0?i:o}return _w=e,_w}var g4=p4(),y4=sm(g4),ww,c2;function m4(){if(c2)return ww;c2=1;var r=SS(),e=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch{}}();return ww=e,ww}var Ew,f2;function b4(){if(f2)return Ew;f2=1;var r=m4();function e(t,n,i){n=="__proto__"&&r?r(t,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[n]=i}return Ew=e,Ew}var Ow,h2;function _4(){if(h2)return Ow;h2=1;var r=b4(),e=vD(),t=Object.prototype,n=t.hasOwnProperty;function i(o,a,s){var u=o[a];(!(n.call(o,a)&&e(u,s))||s===void 0&&!(a in o))&&r(o,a,s)}return Ow=i,Ow}var xw,d2;function w4(){if(d2)return xw;d2=1;var r=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(n,i){var o=typeof n;return i=i??r,!!i&&(o=="number"||o!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<i}return xw=t,xw}var Sw,v2;function E4(){if(v2)return Sw;v2=1;var r=_4(),e=mD(),t=w4(),n=um(),i=TS();function o(a,s,u,l){if(!n(a))return a;s=e(s,a);for(var c=-1,f=s.length,h=f-1,d=a;d!=null&&++c<f;){var v=i(s[c]),y=u;if(v==="__proto__"||v==="constructor"||v==="prototype")return a;if(c!=h){var w=d[v];y=l?l(w,v,d):void 0,y===void 0&&(y=n(w)?w:t(s[c+1])?[]:{})}r(d,v,y),d=d[v]}return a}return Sw=o,Sw}var Tw,p2;function O4(){if(p2)return Tw;p2=1;var r=E4();function e(t,n,i){return t==null?t:r(t,n,i)}return Tw=e,Tw}var x4=O4(),S4=sm(x4),Cw,g2;function T4(){if(g2)return Cw;g2=1;function r(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}return Cw=r,Cw}var Pw,y2;function C4(){if(y2)return Pw;y2=1;var r=gD(),e=T4(),t=J0(),n=lm(),i=pD(),o=TS(),a=yD();function s(u){return t(u)?r(u,o):n(u)?[u]:e(i(a(u)))}return Pw=s,Pw}var P4=C4(),A4=sm(P4),R4={data:function(e){var t={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(i){},beforeSet:function(i,o){},onSet:function(i){},canSet:function(i){return!0}};return e=_r({},t,e),function(i,o){var a=e,s=this,u=s.length!==void 0,l=u?s:[s],c=u?s[0]:s;if(vr(i)){var f=i.indexOf(".")!==-1,h=f&&A4(i);if(a.allowGetting&&o===void 0){var d;return c&&(a.beforeGet(c),h&&c._private[a.field][i]===void 0?d=y4(c._private[a.field],h):d=c._private[a.field][i]),d}else if(a.allowSetting&&o!==void 0){var v=!a.immutableKeys[i];if(v){var y=Ik({},i,o);a.beforeSet(s,y);for(var w=0,b=l.length;w<b;w++){var p=l[w];a.canSet(p)&&(h&&c._private[a.field][i]===void 0?S4(p._private[a.field],h,o):p._private[a.field][i]=o)}a.updateStyle&&s.updateStyle(),a.onSet(s),a.settingTriggersEvent&&s[a.triggerFnName](a.settingEvent)}}}else if(a.allowSetting&&wn(i)){var _=i,O,P,R=Object.keys(_);a.beforeSet(s,_);for(var T=0;T<R.length;T++){O=R[T],P=_[O];var A=!a.immutableKeys[O];if(A)for(var M=0;M<l.length;M++){var N=l[M];a.canSet(N)&&(N._private[a.field][O]=P)}}a.updateStyle&&s.updateStyle(),a.onSet(s),a.settingTriggersEvent&&s[a.triggerFnName](a.settingEvent)}else if(a.allowBinding&&$i(i)){var j=i;s.on(a.bindingEvent,j)}else if(a.allowGetting&&i===void 0){var B;return c&&(a.beforeGet(c),B=c._private[a.field]),B}return s}},removeData:function(e){var t={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=_r({},t,e),function(i){var o=e,a=this,s=a.length!==void 0,u=s?a:[a];if(vr(i)){for(var l=i.split(/\s+/),c=l.length,f=0;f<c;f++){var h=l[f];if(!Fd(h)){var d=!o.immutableKeys[h];if(d)for(var v=0,y=u.length;v<y;v++)u[v]._private[o.field][h]=void 0}}o.triggerEvent&&a[o.triggerFnName](o.event)}else if(i===void 0){for(var w=0,b=u.length;w<b;w++)for(var p=u[w]._private[o.field],_=Object.keys(p),O=0;O<_.length;O++){var P=_[O],R=!o.immutableKeys[P];R&&(p[P]=void 0)}o.triggerEvent&&a[o.triggerFnName](o.event)}return a}}},I4={eventAliasesOn:function(e){var t=e;t.addListener=t.listen=t.bind=t.on,t.unlisten=t.unbind=t.off=t.removeListener,t.trigger=t.emit,t.pon=t.promiseOn=function(n,i){var o=this,a=Array.prototype.slice.call(arguments,0);return new Ug(function(s,u){var l=function(d){o.off.apply(o,f),s(d)},c=a.concat([l]),f=c.concat([]);o.on.apply(o,c)})}}},Fn={};[j3,R4,I4].forEach(function(r){_r(Fn,r)});var k4={animate:Fn.animate(),animation:Fn.animation(),animated:Fn.animated(),clearQueue:Fn.clearQueue(),delay:Fn.delay(),delayAnimation:Fn.delayAnimation(),stop:Fn.stop()},v0={classes:function(e){var t=this;if(e===void 0){var n=[];return t[0]._private.classes.forEach(function(v){return n.push(v)}),n}else di(e)||(e=(e||"").match(/\S+/g)||[]);for(var i=[],o=new Bg(e),a=0;a<t.length;a++){for(var s=t[a],u=s._private,l=u.classes,c=!1,f=0;f<e.length;f++){var h=e[f],d=l.has(h);if(!d){c=!0;break}}c||(c=l.size!==e.length),c&&(u.classes=o,i.push(s))}return i.length>0&&this.spawn(i).updateStyle().emit("class"),t},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var t=this[0];return t!=null&&t._private.classes.has(e)},toggleClass:function(e,t){di(e)||(e=e.match(/\S+/g)||[]);for(var n=this,i=t===void 0,o=[],a=0,s=n.length;a<s;a++)for(var u=n[a],l=u._private.classes,c=!1,f=0;f<e.length;f++){var h=e[f],d=l.has(h),v=!1;t||i&&!d?(l.add(h),v=!0):(!t||i&&d)&&(l.delete(h),v=!0),!c&&v&&(o.push(u),c=!0)}return o.length>0&&this.spawn(o).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,t){var n=this;if(t==null)t=250;else if(t===0)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},t),n}};v0.className=v0.classNames=v0.classes;var _n={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:zo,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};_n.variable="(?:[\\w-.]|(?:\\\\"+_n.metaChar+"))+";_n.className="(?:[\\w-]|(?:\\\\"+_n.metaChar+"))+";_n.value=_n.string+"|"+_n.number;_n.id=_n.variable;(function(){var r,e,t;for(r=_n.comparatorOp.split("|"),t=0;t<r.length;t++)e=r[t],_n.comparatorOp+="|@"+e;for(r=_n.comparatorOp.split("|"),t=0;t<r.length;t++)e=r[t],!(e.indexOf("!")>=0)&&e!=="="&&(_n.comparatorOp+="|\\!"+e)})();var ui=function(){return{checks:[]}},Zt={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},Ux=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(r,e){return Lj(r.selector,e.selector)}),D4=function(){for(var r={},e,t=0;t<Ux.length;t++)e=Ux[t],r[e.selector]=e.matches;return r}(),M4=function(e,t){return D4[e](t)},L4="("+Ux.map(function(r){return r.selector}).join("|")+")",ug=function(e){return e.replace(new RegExp("\\\\("+_n.metaChar+")","g"),function(t,n){return n})},Td=function(e,t,n){e[e.length-1]=n},zx=[{name:"group",query:!0,regex:"("+_n.group+")",populate:function(e,t,n){var i=sa(n,1),o=i[0];t.checks.push({type:Zt.GROUP,value:o==="*"?o:o+"s"})}},{name:"state",query:!0,regex:L4,populate:function(e,t,n){var i=sa(n,1),o=i[0];t.checks.push({type:Zt.STATE,value:o})}},{name:"id",query:!0,regex:"\\#("+_n.id+")",populate:function(e,t,n){var i=sa(n,1),o=i[0];t.checks.push({type:Zt.ID,value:ug(o)})}},{name:"className",query:!0,regex:"\\.("+_n.className+")",populate:function(e,t,n){var i=sa(n,1),o=i[0];t.checks.push({type:Zt.CLASS,value:ug(o)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+_n.variable+")\\s*\\]",populate:function(e,t,n){var i=sa(n,1),o=i[0];t.checks.push({type:Zt.DATA_EXIST,field:ug(o)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+_n.variable+")\\s*("+_n.comparatorOp+")\\s*("+_n.value+")\\s*\\]",populate:function(e,t,n){var i=sa(n,3),o=i[0],a=i[1],s=i[2],u=new RegExp("^"+_n.string+"$").exec(s)!=null;u?s=s.substring(1,s.length-1):s=parseFloat(s),t.checks.push({type:Zt.DATA_COMPARE,field:ug(o),operator:a,value:s})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+_n.boolOp+")\\s*("+_n.variable+")\\s*\\]",populate:function(e,t,n){var i=sa(n,2),o=i[0],a=i[1];t.checks.push({type:Zt.DATA_BOOL,field:ug(a),operator:o})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+_n.meta+")\\s*("+_n.comparatorOp+")\\s*("+_n.number+")\\s*\\]\\]",populate:function(e,t,n){var i=sa(n,3),o=i[0],a=i[1],s=i[2];t.checks.push({type:Zt.META_COMPARE,field:ug(o),operator:a,value:parseFloat(s)})}},{name:"nextQuery",separator:!0,regex:_n.separator,populate:function(e,t){var n=e.currentSubject,i=e.edgeCount,o=e.compoundCount,a=e[e.length-1];n!=null&&(a.subject=n,e.currentSubject=null),a.edgeCount=i,a.compoundCount=o,e.edgeCount=0,e.compoundCount=0;var s=e[e.length++]=ui();return s}},{name:"directedEdge",separator:!0,regex:_n.directedEdge,populate:function(e,t){if(e.currentSubject==null){var n=ui(),i=t,o=ui();return n.checks.push({type:Zt.DIRECTED_EDGE,source:i,target:o}),Td(e,t,n),e.edgeCount++,o}else{var a=ui(),s=t,u=ui();return a.checks.push({type:Zt.NODE_SOURCE,source:s,target:u}),Td(e,t,a),e.edgeCount++,u}}},{name:"undirectedEdge",separator:!0,regex:_n.undirectedEdge,populate:function(e,t){if(e.currentSubject==null){var n=ui(),i=t,o=ui();return n.checks.push({type:Zt.UNDIRECTED_EDGE,nodes:[i,o]}),Td(e,t,n),e.edgeCount++,o}else{var a=ui(),s=t,u=ui();return a.checks.push({type:Zt.NODE_NEIGHBOR,node:s,neighbor:u}),Td(e,t,a),u}}},{name:"child",separator:!0,regex:_n.child,populate:function(e,t){if(e.currentSubject==null){var n=ui(),i=ui(),o=e[e.length-1];return n.checks.push({type:Zt.CHILD,parent:o,child:i}),Td(e,t,n),e.compoundCount++,i}else if(e.currentSubject===t){var a=ui(),s=e[e.length-1],u=ui(),l=ui(),c=ui(),f=ui();return a.checks.push({type:Zt.COMPOUND_SPLIT,left:s,right:u,subject:l}),l.checks=t.checks,t.checks=[{type:Zt.TRUE}],f.checks.push({type:Zt.TRUE}),u.checks.push({type:Zt.PARENT,parent:f,child:c}),Td(e,s,a),e.currentSubject=l,e.compoundCount++,c}else{var h=ui(),d=ui(),v=[{type:Zt.PARENT,parent:h,child:d}];return h.checks=t.checks,t.checks=v,e.compoundCount++,d}}},{name:"descendant",separator:!0,regex:_n.descendant,populate:function(e,t){if(e.currentSubject==null){var n=ui(),i=ui(),o=e[e.length-1];return n.checks.push({type:Zt.DESCENDANT,ancestor:o,descendant:i}),Td(e,t,n),e.compoundCount++,i}else if(e.currentSubject===t){var a=ui(),s=e[e.length-1],u=ui(),l=ui(),c=ui(),f=ui();return a.checks.push({type:Zt.COMPOUND_SPLIT,left:s,right:u,subject:l}),l.checks=t.checks,t.checks=[{type:Zt.TRUE}],f.checks.push({type:Zt.TRUE}),u.checks.push({type:Zt.ANCESTOR,ancestor:f,descendant:c}),Td(e,s,a),e.currentSubject=l,e.compoundCount++,c}else{var h=ui(),d=ui(),v=[{type:Zt.ANCESTOR,ancestor:h,descendant:d}];return h.checks=t.checks,t.checks=v,e.compoundCount++,d}}},{name:"subject",modifier:!0,regex:_n.subject,populate:function(e,t){if(e.currentSubject!=null&&e.currentSubject!==t)return Bn("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=t;var n=e[e.length-1],i=n.checks[0],o=i==null?null:i.type;o===Zt.DIRECTED_EDGE?i.type=Zt.NODE_TARGET:o===Zt.UNDIRECTED_EDGE&&(i.type=Zt.NODE_NEIGHBOR,i.node=i.nodes[1],i.neighbor=i.nodes[0],i.nodes=null)}}];zx.forEach(function(r){return r.regexObj=new RegExp("^"+r.regex)});var N4=function(e){for(var t,n,i,o=0;o<zx.length;o++){var a=zx[o],s=a.name,u=e.match(a.regexObj);if(u!=null){n=u,t=a,i=s;var l=u[0];e=e.substring(l.length);break}}return{expr:t,match:n,name:i,remaining:e}},j4=function(e){var t=e.match(/^\s+/);if(t){var n=t[0];e=e.substring(n.length)}return e},F4=function(e){var t=this,n=t.inputText=e,i=t[0]=ui();for(t.length=1,n=j4(n);;){var o=N4(n);if(o.expr==null)return Bn("The selector `"+e+"`is invalid"),!1;var a=o.match.slice(1),s=o.expr.populate(t,i,a);if(s===!1)return!1;if(s!=null&&(i=s),n=o.remaining,n.match(/^\s*$/))break}var u=t[t.length-1];t.currentSubject!=null&&(u.subject=t.currentSubject),u.edgeCount=t.edgeCount,u.compoundCount=t.compoundCount;for(var l=0;l<t.length;l++){var c=t[l];if(c.compoundCount>0&&c.edgeCount>0)return Bn("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(c.edgeCount>1)return Bn("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;c.edgeCount===1&&Bn("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},B4=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(c){return c??""},t=function(c){return vr(c)?'"'+c+'"':e(c)},n=function(c){return" "+c+" "},i=function(c,f){var h=c.type,d=c.value;switch(h){case Zt.GROUP:{var v=e(d);return v.substring(0,v.length-1)}case Zt.DATA_COMPARE:{var y=c.field,w=c.operator;return"["+y+n(e(w))+t(d)+"]"}case Zt.DATA_BOOL:{var b=c.operator,p=c.field;return"["+e(b)+p+"]"}case Zt.DATA_EXIST:{var _=c.field;return"["+_+"]"}case Zt.META_COMPARE:{var O=c.operator,P=c.field;return"[["+P+n(e(O))+t(d)+"]]"}case Zt.STATE:return d;case Zt.ID:return"#"+d;case Zt.CLASS:return"."+d;case Zt.PARENT:case Zt.CHILD:return o(c.parent,f)+n(">")+o(c.child,f);case Zt.ANCESTOR:case Zt.DESCENDANT:return o(c.ancestor,f)+" "+o(c.descendant,f);case Zt.COMPOUND_SPLIT:{var R=o(c.left,f),T=o(c.subject,f),A=o(c.right,f);return R+(R.length>0?" ":"")+T+A}case Zt.TRUE:return""}},o=function(c,f){return c.checks.reduce(function(h,d,v){return h+(f===c&&v===0?"$":"")+i(d,f)},"")},a="",s=0;s<this.length;s++){var u=this[s];a+=o(u,u.subject),this.length>1&&s<this.length-1&&(a+=", ")}return this.toStringCache=a,a},U4={parse:F4,toString:B4},bD=function(e,t,n){var i,o=vr(e),a=qt(e),s=vr(n),u,l,c=!1,f=!1,h=!1;switch(t.indexOf("!")>=0&&(t=t.replace("!",""),f=!0),t.indexOf("@")>=0&&(t=t.replace("@",""),c=!0),(o||s||c)&&(u=!o&&!a?"":""+e,l=""+n),c&&(e=u=u.toLowerCase(),n=l=l.toLowerCase()),t){case"*=":i=u.indexOf(l)>=0;break;case"$=":i=u.indexOf(l,u.length-l.length)>=0;break;case"^=":i=u.indexOf(l)===0;break;case"=":i=e===n;break;case">":h=!0,i=e>n;break;case">=":h=!0,i=e>=n;break;case"<":h=!0,i=e<n;break;case"<=":h=!0,i=e<=n;break;default:i=!1;break}return f&&(e!=null||!h)&&(i=!i),i},z4=function(e,t){switch(t){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},q4=function(e){return e!==void 0},CS=function(e,t){return e.data(t)},G4=function(e,t){return e[t]()},eo=[],Ci=function(e,t){return e.checks.every(function(n){return eo[n.type](n,t)})};eo[Zt.GROUP]=function(r,e){var t=r.value;return t==="*"||t===e.group()};eo[Zt.STATE]=function(r,e){var t=r.value;return M4(t,e)};eo[Zt.ID]=function(r,e){var t=r.value;return e.id()===t};eo[Zt.CLASS]=function(r,e){var t=r.value;return e.hasClass(t)};eo[Zt.META_COMPARE]=function(r,e){var t=r.field,n=r.operator,i=r.value;return bD(G4(e,t),n,i)};eo[Zt.DATA_COMPARE]=function(r,e){var t=r.field,n=r.operator,i=r.value;return bD(CS(e,t),n,i)};eo[Zt.DATA_BOOL]=function(r,e){var t=r.field,n=r.operator;return z4(CS(e,t),n)};eo[Zt.DATA_EXIST]=function(r,e){var t=r.field;return r.operator,q4(CS(e,t))};eo[Zt.UNDIRECTED_EDGE]=function(r,e){var t=r.nodes[0],n=r.nodes[1],i=e.source(),o=e.target();return Ci(t,i)&&Ci(n,o)||Ci(n,i)&&Ci(t,o)};eo[Zt.NODE_NEIGHBOR]=function(r,e){return Ci(r.node,e)&&e.neighborhood().some(function(t){return t.isNode()&&Ci(r.neighbor,t)})};eo[Zt.DIRECTED_EDGE]=function(r,e){return Ci(r.source,e.source())&&Ci(r.target,e.target())};eo[Zt.NODE_SOURCE]=function(r,e){return Ci(r.source,e)&&e.outgoers().some(function(t){return t.isNode()&&Ci(r.target,t)})};eo[Zt.NODE_TARGET]=function(r,e){return Ci(r.target,e)&&e.incomers().some(function(t){return t.isNode()&&Ci(r.source,t)})};eo[Zt.CHILD]=function(r,e){return Ci(r.child,e)&&Ci(r.parent,e.parent())};eo[Zt.PARENT]=function(r,e){return Ci(r.parent,e)&&e.children().some(function(t){return Ci(r.child,t)})};eo[Zt.DESCENDANT]=function(r,e){return Ci(r.descendant,e)&&e.ancestors().some(function(t){return Ci(r.ancestor,t)})};eo[Zt.ANCESTOR]=function(r,e){return Ci(r.ancestor,e)&&e.descendants().some(function(t){return Ci(r.descendant,t)})};eo[Zt.COMPOUND_SPLIT]=function(r,e){return Ci(r.subject,e)&&Ci(r.left,e)&&Ci(r.right,e)};eo[Zt.TRUE]=function(){return!0};eo[Zt.COLLECTION]=function(r,e){var t=r.value;return t.has(e)};eo[Zt.FILTER]=function(r,e){var t=r.value;return t(e)};var V4=function(e){var t=this;if(t.length===1&&t[0].checks.length===1&&t[0].checks[0].type===Zt.ID)return e.getElementById(t[0].checks[0].value).collection();var n=function(o){for(var a=0;a<t.length;a++){var s=t[a];if(Ci(s,o))return!0}return!1};return t.text()==null&&(n=function(){return!0}),e.filter(n)},W4=function(e){for(var t=this,n=0;n<t.length;n++){var i=t[n];if(Ci(i,e))return!0}return!1},H4={matches:W4,filter:V4},zd=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||vr(e)&&e.match(/^\s*$/)||(Iu(e)?this.addQuery({checks:[{type:Zt.COLLECTION,value:e.collection()}]}):$i(e)?this.addQuery({checks:[{type:Zt.FILTER,value:e}]}):vr(e)?this.parse(e)||(this.invalid=!0):Hi("A selector must be created from a string; found "))},qd=zd.prototype;[U4,H4].forEach(function(r){return _r(qd,r)});qd.text=function(){return this.inputText};qd.size=function(){return this.length};qd.eq=function(r){return this[r]};qd.sameText=function(r){return!this.invalid&&!r.invalid&&this.text()===r.text()};qd.addQuery=function(r){this[this.length++]=r};qd.selector=qd.toString;var Ld={allAre:function(e){var t=new zd(e);return this.every(function(n){return t.matches(n)})},is:function(e){var t=new zd(e);return this.some(function(n){return t.matches(n)})},some:function(e,t){for(var n=0;n<this.length;n++){var i=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(i)return!0}return!1},every:function(e,t){for(var n=0;n<this.length;n++){var i=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(!i)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var t=this.length,n=e.length;return t!==n?!1:t===1?this[0]===e[0]:this.every(function(i){return e.hasElementWithId(i.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(t){return e.hasElementWithId(t.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var t=this.neighborhood();return e.every(function(n){return t.hasElementWithId(n.id())})},contains:function(e){e=this.cy().collection(e);var t=this;return e.every(function(n){return t.hasElementWithId(n.id())})}};Ld.allAreNeighbours=Ld.allAreNeighbors;Ld.has=Ld.contains;Ld.equal=Ld.equals=Ld.same;var cl=function(e,t){return function(i,o,a,s){var u=i,l=this,c;if(u==null?c="":Iu(u)&&u.length===1&&(c=u.id()),l.length===1&&c){var f=l[0]._private,h=f.traversalCache=f.traversalCache||{},d=h[t]=h[t]||[],v=Bd(c),y=d[v];return y||(d[v]=e.call(l,i,o,a,s))}else return e.call(l,i,o,a,s)}},Ng={parent:function(e){var t=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var i=0;i<this.length;i++){var o=this[i],a=o._private.parent;a&&t.push(a)}return this.spawn(t,!0).filter(e)},parents:function(e){for(var t=[],n=this.parent();n.nonempty();){for(var i=0;i<n.length;i++){var o=n[i];t.push(o)}n=n.parent()}return this.spawn(t,!0).filter(e)},commonAncestors:function(e){for(var t,n=0;n<this.length;n++){var i=this[n],o=i.parents();t=t||o,t=t.intersect(o)}return t.filter(e)},orphans:function(e){return this.stdFilter(function(t){return t.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(t){return t.isChild()}).filter(e)},children:cl(function(r){for(var e=[],t=0;t<this.length;t++)for(var n=this[t],i=n._private.children,o=0;o<i.length;o++)e.push(i[o]);return this.spawn(e,!0).filter(r)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var t=[];function n(i){for(var o=0;o<i.length;o++){var a=i[o];t.push(a),a.children().nonempty()&&n(a.children())}}return n(this.children()),this.spawn(t,!0).filter(e)}};function PS(r,e,t,n){for(var i=[],o=new Bg,a=r.cy(),s=a.hasCompoundNodes(),u=0;u<r.length;u++){var l=r[u];t?i.push(l):s&&n(i,o,l)}for(;i.length>0;){var c=i.shift();e(c),o.add(c.id()),s&&n(i,o,c)}return r}function _D(r,e,t){if(t.isParent())for(var n=t._private.children,i=0;i<n.length;i++){var o=n[i];e.has(o.id())||r.push(o)}}Ng.forEachDown=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return PS(this,r,e,_D)};function wD(r,e,t){if(t.isChild()){var n=t._private.parent;e.has(n.id())||r.push(n)}}Ng.forEachUp=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return PS(this,r,e,wD)};function $4(r,e,t){wD(r,e,t),_D(r,e,t)}Ng.forEachUpAndDown=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return PS(this,r,e,$4)};Ng.ancestors=Ng.parents;var Jy,ED;Jy=ED={data:Fn.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:Fn.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:Fn.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Fn.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:Fn.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:Fn.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};Jy.attr=Jy.data;Jy.removeAttr=Jy.removeData;var Y4=ED,nb={};function Aw(r){return function(e){var t=this;if(e===void 0&&(e=!0),t.length!==0)if(t.isNode()&&!t.removed()){for(var n=0,i=t[0],o=i._private.edges,a=0;a<o.length;a++){var s=o[a];!e&&s.isLoop()||(n+=r(i,s))}return n}else return}}_r(nb,{degree:Aw(function(r,e){return e.source().same(e.target())?2:1}),indegree:Aw(function(r,e){return e.target().same(r)?1:0}),outdegree:Aw(function(r,e){return e.source().same(r)?1:0})});function lg(r,e){return function(t){for(var n,i=this.nodes(),o=0;o<i.length;o++){var a=i[o],s=a[r](t);s!==void 0&&(n===void 0||e(s,n))&&(n=s)}return n}}_r(nb,{minDegree:lg("degree",function(r,e){return r<e}),maxDegree:lg("degree",function(r,e){return r>e}),minIndegree:lg("indegree",function(r,e){return r<e}),maxIndegree:lg("indegree",function(r,e){return r>e}),minOutdegree:lg("outdegree",function(r,e){return r<e}),maxOutdegree:lg("outdegree",function(r,e){return r>e})});_r(nb,{totalDegree:function(e){for(var t=0,n=this.nodes(),i=0;i<n.length;i++)t+=n[i].degree(e);return t}});var hc,OD,xD=function(e,t,n){for(var i=0;i<e.length;i++){var o=e[i];if(!o.locked()){var a=o._private.position,s={x:t.x!=null?t.x-a.x:0,y:t.y!=null?t.y-a.y:0};o.isParent()&&!(s.x===0&&s.y===0)&&o.children().shift(s,n),o.dirtyBoundingBoxCache()}}},m2={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,t){xD(e,t,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};hc=OD={position:Fn.data(m2),silentPosition:Fn.data(_r({},m2,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,t){xD(e,t,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,t){if(wn(e))t?this.silentPosition(e):this.position(e);else if($i(e)){var n=e,i=this.cy();i.startBatch();for(var o=0;o<this.length;o++){var a=this[o],s=void 0;(s=n(a,o))&&(t?a.silentPosition(s):a.position(s))}i.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,t,n){var i;if(wn(e)?(i={x:qt(e.x)?e.x:0,y:qt(e.y)?e.y:0},n=t):vr(e)&&qt(t)&&(i={x:0,y:0},i[e]=t),i!=null){var o=this.cy();o.startBatch();for(var a=0;a<this.length;a++){var s=this[a];if(!(o.hasCompoundNodes()&&s.isChild()&&s.ancestors().anySame(this))){var u=s.position(),l={x:u.x+i.x,y:u.y+i.y};n?s.silentPosition(l):s.position(l)}}o.endBatch()}return this},silentShift:function(e,t){return wn(e)?this.shift(e,!0):vr(e)&&qt(t)&&this.shift(e,t,!0),this},renderedPosition:function(e,t){var n=this[0],i=this.cy(),o=i.zoom(),a=i.pan(),s=wn(e)?e:void 0,u=s!==void 0||t!==void 0&&vr(e);if(n&&n.isNode())if(u)for(var l=0;l<this.length;l++){var c=this[l];t!==void 0?c.position(e,(t-a[e])/o):s!==void 0&&c.position(Zk(s,o,a))}else{var f=n.position();return s=Z0(f,o,a),e===void 0?s:s[e]}else if(!u)return;return this},relativePosition:function(e,t){var n=this[0],i=this.cy(),o=wn(e)?e:void 0,a=o!==void 0||t!==void 0&&vr(e),s=i.hasCompoundNodes();if(n&&n.isNode())if(a)for(var u=0;u<this.length;u++){var l=this[u],c=s?l.parent():null,f=c&&c.length>0,h=f;f&&(c=c[0]);var d=h?c.position():{x:0,y:0};t!==void 0?l.position(e,t+d[e]):o!==void 0&&l.position({x:o.x+d.x,y:o.y+d.y})}else{var v=n.position(),y=s?n.parent():null,w=y&&y.length>0,b=w;w&&(y=y[0]);var p=b?y.position():{x:0,y:0};return o={x:v.x-p.x,y:v.y-p.y},e===void 0?o:o[e]}else if(!a)return;return this}};hc.modelPosition=hc.point=hc.position;hc.modelPositions=hc.points=hc.positions;hc.renderedPoint=hc.renderedPosition;hc.relativePoint=hc.relativePosition;var X4=OD,Ag,Xd;Ag=Xd={};Xd.renderedBoundingBox=function(r){var e=this.boundingBox(r),t=this.cy(),n=t.zoom(),i=t.pan(),o=e.x1*n+i.x,a=e.x2*n+i.x,s=e.y1*n+i.y,u=e.y2*n+i.y;return{x1:o,x2:a,y1:s,y2:u,w:a-o,h:u-s}};Xd.dirtyCompoundBoundsCache=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(t){if(t.isParent()){var n=t._private;n.compoundBoundsClean=!1,n.bbCache=null,r||t.emitAndNotify("bounds")}}),this)};Xd.updateCompoundBounds=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!r&&e.batching())return this;function t(a){if(!a.isParent())return;var s=a._private,u=a.children(),l=a.pstyle("compound-sizing-wrt-labels").value==="include",c={width:{val:a.pstyle("min-width").pfValue,left:a.pstyle("min-width-bias-left"),right:a.pstyle("min-width-bias-right")},height:{val:a.pstyle("min-height").pfValue,top:a.pstyle("min-height-bias-top"),bottom:a.pstyle("min-height-bias-bottom")}},f=u.boundingBox({includeLabels:l,includeOverlays:!1,useCache:!1}),h=s.position;(f.w===0||f.h===0)&&(f={w:a.pstyle("width").pfValue,h:a.pstyle("height").pfValue},f.x1=h.x-f.w/2,f.x2=h.x+f.w/2,f.y1=h.y-f.h/2,f.y2=h.y+f.h/2);function d(M,N,j){var B=0,q=0,W=N+j;return M>0&&W>0&&(B=N/W*M,q=j/W*M),{biasDiff:B,biasComplementDiff:q}}function v(M,N,j,B){if(j.units==="%")switch(B){case"width":return M>0?j.pfValue*M:0;case"height":return N>0?j.pfValue*N:0;case"average":return M>0&&N>0?j.pfValue*(M+N)/2:0;case"min":return M>0&&N>0?M>N?j.pfValue*N:j.pfValue*M:0;case"max":return M>0&&N>0?M>N?j.pfValue*M:j.pfValue*N:0;default:return 0}else return j.units==="px"?j.pfValue:0}var y=c.width.left.value;c.width.left.units==="px"&&c.width.val>0&&(y=y*100/c.width.val);var w=c.width.right.value;c.width.right.units==="px"&&c.width.val>0&&(w=w*100/c.width.val);var b=c.height.top.value;c.height.top.units==="px"&&c.height.val>0&&(b=b*100/c.height.val);var p=c.height.bottom.value;c.height.bottom.units==="px"&&c.height.val>0&&(p=p*100/c.height.val);var _=d(c.width.val-f.w,y,w),O=_.biasDiff,P=_.biasComplementDiff,R=d(c.height.val-f.h,b,p),T=R.biasDiff,A=R.biasComplementDiff;s.autoPadding=v(f.w,f.h,a.pstyle("padding"),a.pstyle("padding-relative-to").value),s.autoWidth=Math.max(f.w,c.width.val),h.x=(-O+f.x1+f.x2+P)/2,s.autoHeight=Math.max(f.h,c.height.val),h.y=(-T+f.y1+f.y2+A)/2}for(var n=0;n<this.length;n++){var i=this[n],o=i._private;(!o.compoundBoundsClean||r)&&(t(i),e.batching()||(o.compoundBoundsClean=!0))}return this};var ll=function(e){return e===1/0||e===-1/0?0:e},uc=function(e,t,n,i,o){i-t===0||o-n===0||t==null||n==null||i==null||o==null||(e.x1=t<e.x1?t:e.x1,e.x2=i>e.x2?i:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=o>e.y2?o:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},Zv=function(e,t){return t==null?e:uc(e,t.x1,t.y1,t.x2,t.y2)},Sy=function(e,t,n){return ul(e,t,n)},Xm=function(e,t,n){if(!t.cy().headless()){var i=t._private,o=i.rstyle,a=o.arrowWidth/2,s=t.pstyle(n+"-arrow-shape").value,u,l;if(s!=="none"){n==="source"?(u=o.srcX,l=o.srcY):n==="target"?(u=o.tgtX,l=o.tgtY):(u=o.midX,l=o.midY);var c=i.arrowBounds=i.arrowBounds||{},f=c[n]=c[n]||{};f.x1=u-a,f.y1=l-a,f.x2=u+a,f.y2=l+a,f.w=f.x2-f.x1,f.h=f.y2-f.y1,h0(f,1),uc(e,f.x1,f.y1,f.x2,f.y2)}}},Rw=function(e,t,n){if(!t.cy().headless()){var i;n?i=n+"-":i="";var o=t._private,a=o.rstyle,s=t.pstyle(i+"label").strValue;if(s){var u=t.pstyle("text-halign"),l=t.pstyle("text-valign"),c=Sy(a,"labelWidth",n),f=Sy(a,"labelHeight",n),h=Sy(a,"labelX",n),d=Sy(a,"labelY",n),v=t.pstyle(i+"text-margin-x").pfValue,y=t.pstyle(i+"text-margin-y").pfValue,w=t.isEdge(),b=t.pstyle(i+"text-rotation"),p=t.pstyle("text-outline-width").pfValue,_=t.pstyle("text-border-width").pfValue,O=_/2,P=t.pstyle("text-background-padding").pfValue,R=2,T=f,A=c,M=A/2,N=T/2,j,B,q,W;if(w)j=h-M,B=h+M,q=d-N,W=d+N;else{switch(u.value){case"left":j=h-A,B=h;break;case"center":j=h-M,B=h+M;break;case"right":j=h,B=h+A;break}switch(l.value){case"top":q=d-T,W=d;break;case"center":q=d-N,W=d+N;break;case"bottom":q=d,W=d+T;break}}var J=v-Math.max(p,O)-P-R,te=v+Math.max(p,O)+P+R,re=y-Math.max(p,O)-P-R,ee=y+Math.max(p,O)+P+R;j+=J,B+=te,q+=re,W+=ee;var fe=n||"main",he=o.labelBounds,se=he[fe]=he[fe]||{};se.x1=j,se.y1=q,se.x2=B,se.y2=W,se.w=B-j,se.h=W-q,se.leftPad=J,se.rightPad=te,se.topPad=re,se.botPad=ee;var me=w&&b.strValue==="autorotate",De=b.pfValue!=null&&b.pfValue!==0;if(me||De){var Le=me?Sy(o.rstyle,"labelAngle",n):b.pfValue,Ie=Math.cos(Le),qe=Math.sin(Le),Ge=(j+B)/2,Me=(q+W)/2;if(!w){switch(u.value){case"left":Ge=B;break;case"right":Ge=j;break}switch(l.value){case"top":Me=W;break;case"bottom":Me=q;break}}var Pe=function(ut,H){return ut=ut-Ge,H=H-Me,{x:ut*Ie-H*qe+Ge,y:ut*qe+H*Ie+Me}},de=Pe(j,q),Oe=Pe(j,W),Ae=Pe(B,q),Ve=Pe(B,W);j=Math.min(de.x,Oe.x,Ae.x,Ve.x),B=Math.max(de.x,Oe.x,Ae.x,Ve.x),q=Math.min(de.y,Oe.y,Ae.y,Ve.y),W=Math.max(de.y,Oe.y,Ae.y,Ve.y)}var tt=fe+"Rot",ht=he[tt]=he[tt]||{};ht.x1=j,ht.y1=q,ht.x2=B,ht.y2=W,ht.w=B-j,ht.h=W-q,uc(e,j,q,B,W),uc(o.labelBounds.all,j,q,B,W)}return e}},K4=function(e,t){if(!t.cy().headless()){var n=t.pstyle("outline-opacity").value,i=t.pstyle("outline-width").value;if(n>0&&i>0){var o=t.pstyle("outline-offset").value,a=t.pstyle("shape").value,s=i+o,u=(e.w+s*2)/e.w,l=(e.h+s*2)/e.h,c=0,f=0;["diamond","pentagon","round-triangle"].includes(a)?(u=(e.w+s*2.4)/e.w,f=-s/3.6):["concave-hexagon","rhomboid","right-rhomboid"].includes(a)?u=(e.w+s*2.4)/e.w:a==="star"?(u=(e.w+s*2.8)/e.w,l=(e.h+s*2.6)/e.h,f=-s/3.8):a==="triangle"?(u=(e.w+s*2.8)/e.w,l=(e.h+s*2.4)/e.h,f=-s/1.4):a==="vee"&&(u=(e.w+s*4.4)/e.w,l=(e.h+s*3.8)/e.h,f=-s*.5);var h=e.h*l-e.h,d=e.w*u-e.w;if(d0(e,[Math.ceil(h/2),Math.ceil(d/2)]),c!=0||f!==0){var v=L5(e,c,f);Jk(e,v)}}}},Z4=function(e,t){var n=e._private.cy,i=n.styleEnabled(),o=n.headless(),a=$s(),s=e._private,u=e.isNode(),l=e.isEdge(),c,f,h,d,v,y,w=s.rstyle,b=u&&i?e.pstyle("bounds-expansion").pfValue:[0],p=function(xt){return xt.pstyle("display").value!=="none"},_=!i||p(e)&&(!l||p(e.source())&&p(e.target()));if(_){var O=0,P=0;i&&t.includeOverlays&&(O=e.pstyle("overlay-opacity").value,O!==0&&(P=e.pstyle("overlay-padding").value));var R=0,T=0;i&&t.includeUnderlays&&(R=e.pstyle("underlay-opacity").value,R!==0&&(T=e.pstyle("underlay-padding").value));var A=Math.max(P,T),M=0,N=0;if(i&&(M=e.pstyle("width").pfValue,N=M/2),u&&t.includeNodes){var j=e.position();v=j.x,y=j.y;var B=e.outerWidth(),q=B/2,W=e.outerHeight(),J=W/2;c=v-q,f=v+q,h=y-J,d=y+J,uc(a,c,h,f,d),i&&t.includeOutlines&&K4(a,e)}else if(l&&t.includeEdges)if(i&&!o){var te=e.pstyle("curve-style").strValue;if(c=Math.min(w.srcX,w.midX,w.tgtX),f=Math.max(w.srcX,w.midX,w.tgtX),h=Math.min(w.srcY,w.midY,w.tgtY),d=Math.max(w.srcY,w.midY,w.tgtY),c-=N,f+=N,h-=N,d+=N,uc(a,c,h,f,d),te==="haystack"){var re=w.haystackPts;if(re&&re.length===2){if(c=re[0].x,h=re[0].y,f=re[1].x,d=re[1].y,c>f){var ee=c;c=f,f=ee}if(h>d){var fe=h;h=d,d=fe}uc(a,c-N,h-N,f+N,d+N)}}else if(te==="bezier"||te==="unbundled-bezier"||te.endsWith("segments")||te.endsWith("taxi")){var he;switch(te){case"bezier":case"unbundled-bezier":he=w.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":he=w.linePts;break}if(he!=null)for(var se=0;se<he.length;se++){var me=he[se];c=me.x-N,f=me.x+N,h=me.y-N,d=me.y+N,uc(a,c,h,f,d)}}}else{var De=e.source(),Le=De.position(),Ie=e.target(),qe=Ie.position();if(c=Le.x,f=qe.x,h=Le.y,d=qe.y,c>f){var Ge=c;c=f,f=Ge}if(h>d){var Me=h;h=d,d=Me}c-=N,f+=N,h-=N,d+=N,uc(a,c,h,f,d)}if(i&&t.includeEdges&&l&&(Xm(a,e,"mid-source"),Xm(a,e,"mid-target"),Xm(a,e,"source"),Xm(a,e,"target")),i){var Pe=e.pstyle("ghost").value==="yes";if(Pe){var de=e.pstyle("ghost-offset-x").pfValue,Oe=e.pstyle("ghost-offset-y").pfValue;uc(a,a.x1+de,a.y1+Oe,a.x2+de,a.y2+Oe)}}var Ae=s.bodyBounds=s.bodyBounds||{};oC(Ae,a),d0(Ae,b),h0(Ae,1),i&&(c=a.x1,f=a.x2,h=a.y1,d=a.y2,uc(a,c-A,h-A,f+A,d+A));var Ve=s.overlayBounds=s.overlayBounds||{};oC(Ve,a),d0(Ve,b),h0(Ve,1);var tt=s.labelBounds=s.labelBounds||{};tt.all!=null?M5(tt.all):tt.all=$s(),i&&t.includeLabels&&(t.includeMainLabels&&Rw(a,e,null),l&&(t.includeSourceLabels&&Rw(a,e,"source"),t.includeTargetLabels&&Rw(a,e,"target")))}return a.x1=ll(a.x1),a.y1=ll(a.y1),a.x2=ll(a.x2),a.y2=ll(a.y2),a.w=ll(a.x2-a.x1),a.h=ll(a.y2-a.y1),a.w>0&&a.h>0&&_&&(d0(a,b),h0(a,1)),a},SD=function(e){var t=0,n=function(a){return(a?1:0)<<t++},i=0;return i+=n(e.incudeNodes),i+=n(e.includeEdges),i+=n(e.includeLabels),i+=n(e.includeMainLabels),i+=n(e.includeSourceLabels),i+=n(e.includeTargetLabels),i+=n(e.includeOverlays),i+=n(e.includeOutlines),i},TD=function(e){var t=function(s){return Math.round(s)};if(e.isEdge()){var n=e.source().position(),i=e.target().position();return JT([t(n.x),t(n.y),t(i.x),t(i.y)])}else{var o=e.position();return JT([t(o.x),t(o.y)])}},b2=function(e,t){var n=e._private,i,o=e.isEdge(),a=t==null?_2:SD(t),s=a===_2;if(n.bbCache==null?(i=Z4(e,em),n.bbCache=i,n.bbCachePosKey=TD(e)):i=n.bbCache,!s){var u=e.isNode();i=$s(),(t.includeNodes&&u||t.includeEdges&&!u)&&(t.includeOverlays?Zv(i,n.overlayBounds):Zv(i,n.bodyBounds)),t.includeLabels&&(t.includeMainLabels&&(!o||t.includeSourceLabels&&t.includeTargetLabels)?Zv(i,n.labelBounds.all):(t.includeMainLabels&&Zv(i,n.labelBounds.mainRot),t.includeSourceLabels&&Zv(i,n.labelBounds.sourceRot),t.includeTargetLabels&&Zv(i,n.labelBounds.targetRot))),i.w=i.x2-i.x1,i.h=i.y2-i.y1}return i},em={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},_2=SD(em),w2=Vo(em);Xd.boundingBox=function(r){var e,t=r===void 0||r.useCache===void 0||r.useCache===!0,n=Dg(function(c){var f=c._private;return f.bbCache==null||f.styleDirty||f.bbCachePosKey!==TD(c)},function(c){return c.id()});if(t&&this.length===1&&!n(this[0]))r===void 0?r=em:r=w2(r),e=b2(this[0],r);else{e=$s(),r=r||em;var i=w2(r),o=this,a=o.cy(),s=a.styleEnabled();this.edges().forEach(n),this.nodes().forEach(n),s&&this.recalculateRenderedStyle(t),this.updateCompoundBounds(!t);for(var u=0;u<o.length;u++){var l=o[u];n(l)&&l.dirtyBoundingBoxCache(),Zv(e,b2(l,i))}}return e.x1=ll(e.x1),e.y1=ll(e.y1),e.x2=ll(e.x2),e.y2=ll(e.y2),e.w=ll(e.x2-e.x1),e.h=ll(e.y2-e.y1),e};Xd.dirtyBoundingBoxCache=function(){for(var r=0;r<this.length;r++){var e=this[r]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};Xd.boundingBoxAt=function(r){var e=this.nodes(),t=this.cy(),n=t.hasCompoundNodes(),i=t.collection();if(n&&(i=e.filter(function(l){return l.isParent()}),e=e.not(i)),wn(r)){var o=r;r=function(){return o}}var a=function(c,f){return c._private.bbAtOldPos=r(c,f)},s=function(c){return c._private.bbAtOldPos};t.startBatch(),e.forEach(a).silentPositions(r),n&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0));var u=D5(this.boundingBox({useCache:!1}));return e.silentPositions(s),n&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0)),t.endBatch(),u};Ag.boundingbox=Ag.bb=Ag.boundingBox;Ag.renderedBoundingbox=Ag.renderedBoundingBox;var Q4=Xd,My,hm;My=hm={};var CD=function(e){e.uppercaseName=FT(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=FT(e.outerName),My[e.name]=function(){var n=this[0],i=n._private,o=i.cy,a=o._private.styleEnabled;if(n)if(a){if(n.isParent())return n.updateCompoundBounds(),i[e.autoName]||0;var s=n.pstyle(e.name);switch(s.strValue){case"label":return n.recalculateRenderedStyle(),i.rstyle[e.labelName]||0;default:return s.pfValue}}else return 1},My["outer"+e.uppercaseName]=function(){var n=this[0],i=n._private,o=i.cy,a=o._private.styleEnabled;if(n)if(a){var s=n[e.name](),u=n.pstyle("border-width").pfValue,l=2*n.padding();return s+u+l}else return 1},My["rendered"+e.uppercaseName]=function(){var n=this[0];if(n){var i=n[e.name]();return i*this.cy().zoom()}},My["rendered"+e.uppercaseOuterName]=function(){var n=this[0];if(n){var i=n[e.outerName]();return i*this.cy().zoom()}}};CD({name:"width"});CD({name:"height"});hm.padding=function(){var r=this[0],e=r._private;return r.isParent()?(r.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:r.pstyle("padding").pfValue):r.pstyle("padding").pfValue};hm.paddedHeight=function(){var r=this[0];return r.height()+2*r.padding()};hm.paddedWidth=function(){var r=this[0];return r.width()+2*r.padding()};var J4=hm,eF=function(e,t){if(e.isEdge()&&e.takesUpSpace())return t(e)},tF=function(e,t){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy();return Z0(t(e),n.zoom(),n.pan())}},rF=function(e,t){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy(),i=n.pan(),o=n.zoom();return t(e).map(function(a){return Z0(a,o,i)})}},nF=function(e){return e.renderer().getControlPoints(e)},iF=function(e){return e.renderer().getSegmentPoints(e)},oF=function(e){return e.renderer().getSourceEndpoint(e)},aF=function(e){return e.renderer().getTargetEndpoint(e)},sF=function(e){return e.renderer().getEdgeMidpoint(e)},E2={controlPoints:{get:nF,mult:!0},segmentPoints:{get:iF,mult:!0},sourceEndpoint:{get:oF},targetEndpoint:{get:aF},midpoint:{get:sF}},uF=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},lF=Object.keys(E2).reduce(function(r,e){var t=E2[e],n=uF(e);return r[e]=function(){return eF(this,t.get)},t.mult?r[n]=function(){return rF(this,t.get)}:r[n]=function(){return tF(this,t.get)},r},{}),cF=_r({},X4,Q4,J4,lF);/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var PD=function(e,t){this.recycle(e,t)};function Ty(){return!1}function Km(){return!0}PD.prototype={instanceString:function(){return"event"},recycle:function(e,t){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Ty,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?Km:Ty):e!=null&&e.type?t=e:this.type=e,t!=null&&(this.originalEvent=t.originalEvent,this.type=t.type!=null?t.type:this.type,this.cy=t.cy,this.target=t.target,this.position=t.position,this.renderedPosition=t.renderedPosition,this.namespace=t.namespace,this.layout=t.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,i=this.cy.zoom(),o=this.cy.pan();this.renderedPosition={x:n.x*i+o.x,y:n.y*i+o.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=Km;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=Km;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Km,this.stopPropagation()},isDefaultPrevented:Ty,isPropagationStopped:Ty,isImmediatePropagationStopped:Ty};var AD=/^([^.]+)(\.(?:[^.]+))?$/,fF=".*",RD={qualifierCompare:function(e,t){return e===t},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},O2=Object.keys(RD),hF={};function ib(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:hF,e=arguments.length>1?arguments[1]:void 0,t=0;t<O2.length;t++){var n=O2[t];this[n]=r[n]||RD[n]}this.context=e||this.context,this.listeners=[],this.emitting=0}var Gd=ib.prototype,ID=function(e,t,n,i,o,a,s){$i(i)&&(o=i,i=null),s&&(a==null?a=s:a=_r({},a,s));for(var u=di(n)?n:n.split(/\s+/),l=0;l<u.length;l++){var c=u[l];if(!Fd(c)){var f=c.match(AD);if(f){var h=f[1],d=f[2]?f[2]:null,v=t(e,c,h,d,i,o,a);if(v===!1)break}}}},x2=function(e,t){return e.addEventFields(e.context,t),new PD(t.type,t)},dF=function(e,t,n){if(xj(n)){t(e,n);return}else if(wn(n)){t(e,x2(e,n));return}for(var i=di(n)?n:n.split(/\s+/),o=0;o<i.length;o++){var a=i[o];if(!Fd(a)){var s=a.match(AD);if(s){var u=s[1],l=s[2]?s[2]:null,c=x2(e,{type:u,namespace:l,target:e.context});t(e,c)}}}};Gd.on=Gd.addListener=function(r,e,t,n,i){return ID(this,function(o,a,s,u,l,c,f){$i(c)&&o.listeners.push({event:a,callback:c,type:s,namespace:u,qualifier:l,conf:f})},r,e,t,n,i),this};Gd.one=function(r,e,t,n){return this.on(r,e,t,n,{one:!0})};Gd.removeListener=Gd.off=function(r,e,t,n){var i=this;this.emitting!==0&&(this.listeners=n5(this.listeners));for(var o=this.listeners,a=function(l){var c=o[l];ID(i,function(f,h,d,v,y,w){if((c.type===d||r==="*")&&(!v&&c.namespace!==".*"||c.namespace===v)&&(!y||f.qualifierCompare(c.qualifier,y))&&(!w||c.callback===w))return o.splice(l,1),!1},r,e,t,n)},s=o.length-1;s>=0;s--)a(s);return this};Gd.removeAllListeners=function(){return this.removeListener("*")};Gd.emit=Gd.trigger=function(r,e,t){var n=this.listeners,i=n.length;return this.emitting++,di(e)||(e=[e]),dF(this,function(o,a){t!=null&&(n=[{event:a.event,type:a.type,namespace:a.namespace,callback:t}],i=n.length);for(var s=function(){var c=n[u];if(c.type===a.type&&(!c.namespace||c.namespace===a.namespace||c.namespace===fF)&&o.eventMatches(o.context,c,a)){var f=[a];e!=null&&o5(f,e),o.beforeEmit(o.context,c,a),c.conf&&c.conf.one&&(o.listeners=o.listeners.filter(function(v){return v!==c}));var h=o.callbackContext(o.context,c,a),d=c.callback.apply(h,f);o.afterEmit(o.context,c,a),d===!1&&(a.stopPropagation(),a.preventDefault())}},u=0;u<i;u++)s();o.bubble(o.context)&&!a.isPropagationStopped()&&o.parent(o.context).emit(a,e)},r),this.emitting--,this};var vF={qualifierCompare:function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},eventMatches:function(e,t,n){var i=t.qualifier;return i!=null?e!==n.target&&am(n.target)&&i.matches(n.target):!0},addEventFields:function(e,t){t.cy=e.cy(),t.target=e},callbackContext:function(e,t,n){return t.qualifier!=null?n.target:e},beforeEmit:function(e,t){t.conf&&t.conf.once&&t.conf.onceCollection.removeListener(t.event,t.qualifier,t.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},Zm=function(e){return vr(e)?new zd(e):e},kD={createEmitter:function(){for(var e=0;e<this.length;e++){var t=this[e],n=t._private;n.emitter||(n.emitter=new ib(vF,t))}return this},emitter:function(){return this._private.emitter},on:function(e,t,n){for(var i=Zm(t),o=0;o<this.length;o++){var a=this[o];a.emitter().on(e,i,n)}return this},removeListener:function(e,t,n){for(var i=Zm(t),o=0;o<this.length;o++){var a=this[o];a.emitter().removeListener(e,i,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var t=this[e];t.emitter().removeAllListeners()}return this},one:function(e,t,n){for(var i=Zm(t),o=0;o<this.length;o++){var a=this[o];a.emitter().one(e,i,n)}return this},once:function(e,t,n){for(var i=Zm(t),o=0;o<this.length;o++){var a=this[o];a.emitter().on(e,i,n,{once:!0,onceCollection:this})}},emit:function(e,t){for(var n=0;n<this.length;n++){var i=this[n];i.emitter().emit(e,t)}return this},emitAndNotify:function(e,t){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,t),this}};Fn.eventAliasesOn(kD);var DD={nodes:function(e){return this.filter(function(t){return t.isNode()}).filter(e)},edges:function(e){return this.filter(function(t){return t.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),t=this.spawn(),n=0;n<this.length;n++){var i=this[n];i.isNode()?e.push(i):t.push(i)}return{nodes:e,edges:t}},filter:function(e,t){if(e===void 0)return this;if(vr(e)||Iu(e))return new zd(e).filter(this);if($i(e)){for(var n=this.spawn(),i=this,o=0;o<i.length;o++){var a=i[o],s=t?e.apply(t,[a,o,i]):e(a,o,i);s&&n.push(a)}return n}return this.spawn()},not:function(e){if(e){vr(e)&&(e=this.filter(e));for(var t=this.spawn(),n=0;n<this.length;n++){var i=this[n],o=e.has(i);o||t.push(i)}return t}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(vr(e)){var t=e;return this.filter(t)}for(var n=this.spawn(),i=this,o=e,a=this.length<e.length,s=a?i:o,u=a?o:i,l=0;l<s.length;l++){var c=s[l];u.has(c)&&n.push(c)}return n},xor:function(e){var t=this._private.cy;vr(e)&&(e=t.$(e));var n=this.spawn(),i=this,o=e,a=function(u,l){for(var c=0;c<u.length;c++){var f=u[c],h=f._private.data.id,d=l.hasElementWithId(h);d||n.push(f)}};return a(i,o),a(o,i),n},diff:function(e){var t=this._private.cy;vr(e)&&(e=t.$(e));var n=this.spawn(),i=this.spawn(),o=this.spawn(),a=this,s=e,u=function(c,f,h){for(var d=0;d<c.length;d++){var v=c[d],y=v._private.data.id,w=f.hasElementWithId(y);w?o.merge(v):h.push(v)}};return u(a,s,n),u(s,a,i),{left:n,right:i,both:o}},add:function(e){var t=this._private.cy;if(!e)return this;if(vr(e)){var n=e;e=t.mutableElements().filter(n)}for(var i=this.spawnSelf(),o=0;o<e.length;o++){var a=e[o],s=!this.has(a);s&&i.push(a)}return i},merge:function(e){var t=this._private,n=t.cy;if(!e)return this;if(e&&vr(e)){var i=e;e=n.mutableElements().filter(i)}for(var o=t.map,a=0;a<e.length;a++){var s=e[a],u=s._private.data.id,l=!o.has(u);if(l){var c=this.length++;this[c]=s,o.set(u,{ele:s,index:c})}}return this},unmergeAt:function(e){var t=this[e],n=t.id(),i=this._private,o=i.map;this[e]=void 0,o.delete(n);var a=e===this.length-1;if(this.length>1&&!a){var s=this.length-1,u=this[s],l=u._private.data.id;this[s]=void 0,this[e]=u,o.set(l,{ele:u,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var t=this._private,n=e._private.data.id,i=t.map,o=i.get(n);if(!o)return this;var a=o.index;return this.unmergeAt(a),this},unmerge:function(e){var t=this._private.cy;if(!e)return this;if(e&&vr(e)){var n=e;e=t.mutableElements().filter(n)}for(var i=0;i<e.length;i++)this.unmergeOne(e[i]);return this},unmergeBy:function(e){for(var t=this.length-1;t>=0;t--){var n=this[t];e(n)&&this.unmergeAt(t)}return this},map:function(e,t){for(var n=[],i=this,o=0;o<i.length;o++){var a=i[o],s=t?e.apply(t,[a,o,i]):e(a,o,i);n.push(s)}return n},reduce:function(e,t){for(var n=t,i=this,o=0;o<i.length;o++)n=e(n,i[o],o,i);return n},max:function(e,t){for(var n=-1/0,i,o=this,a=0;a<o.length;a++){var s=o[a],u=t?e.apply(t,[s,a,o]):e(s,a,o);u>n&&(n=u,i=s)}return{value:n,ele:i}},min:function(e,t){for(var n=1/0,i,o=this,a=0;a<o.length;a++){var s=o[a],u=t?e.apply(t,[s,a,o]):e(s,a,o);u<n&&(n=u,i=s)}return{value:n,ele:i}}},Tn=DD;Tn.u=Tn["|"]=Tn["+"]=Tn.union=Tn.or=Tn.add;Tn["\\"]=Tn["!"]=Tn["-"]=Tn.difference=Tn.relativeComplement=Tn.subtract=Tn.not;Tn.n=Tn["&"]=Tn["."]=Tn.and=Tn.intersection=Tn.intersect;Tn["^"]=Tn["(+)"]=Tn["(-)"]=Tn.symmetricDifference=Tn.symdiff=Tn.xor;Tn.fnFilter=Tn.filterFn=Tn.stdFilter=Tn.filter;Tn.complement=Tn.abscomp=Tn.absoluteComplement;var pF={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},MD=function(e,t){var n=e.cy(),i=n.hasCompoundNodes();function o(c){var f=c.pstyle("z-compound-depth");return f.value==="auto"?i?c.zDepth():0:f.value==="bottom"?-1:f.value==="top"?mS:0}var a=o(e)-o(t);if(a!==0)return a;function s(c){var f=c.pstyle("z-index-compare");return f.value==="auto"&&c.isNode()?1:0}var u=s(e)-s(t);if(u!==0)return u;var l=e.pstyle("z-index").value-t.pstyle("z-index").value;return l!==0?l:e.poolIndex()-t.poolIndex()},I0={forEach:function(e,t){if($i(e))for(var n=this.length,i=0;i<n;i++){var o=this[i],a=t?e.apply(t,[o,i,this]):e(o,i,this);if(a===!1)break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(e,t){var n=[],i=this.length;t==null&&(t=i),e==null&&(e=0),e<0&&(e=i+e),t<0&&(t=i+t);for(var o=e;o>=0&&o<t&&o<i;o++)n.push(this[o]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!$i(e))return this;var t=this.toArray().sort(e);return this.spawn(t)},sortByZIndex:function(){return this.sort(MD)},zDepth:function(){var e=this[0];if(e){var t=e._private,n=t.group;if(n==="nodes"){var i=t.data.parent?e.parents().size():0;return e.isParent()?i:mS-1}else{var o=t.source,a=t.target,s=o.zDepth(),u=a.zDepth();return Math.max(s,u,0)}}}};I0.each=I0.forEach;var gF=function(){var e="undefined",t=(typeof Symbol>"u"?"undefined":Go(Symbol))!=e&&Go(Symbol.iterator)!=e;t&&(I0[Symbol.iterator]=function(){var n=this,i={value:void 0,done:!1},o=0,a=this.length;return Ik({next:function(){return o<a?i.value=n[o++]:(i.value=void 0,i.done=!0),i}},Symbol.iterator,function(){return this})})};gF();var yF=Vo({nodeDimensionsIncludeLabels:!1}),p0={layoutDimensions:function(e){e=yF(e);var t;if(!this.takesUpSpace())t={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();t={w:n.w,h:n.h}}else t={w:this.outerWidth(),h:this.outerHeight()};return(t.w===0||t.h===0)&&(t.w=t.h=1),t},layoutPositions:function(e,t,n){var i=this.nodes().filter(function(P){return!P.isParent()}),o=this.cy(),a=t.eles,s=function(R){return R.id()},u=Dg(n,s);e.emit({type:"layoutstart",layout:e}),e.animations=[];var l=function(R,T,A){var M={x:T.x1+T.w/2,y:T.y1+T.h/2},N={x:(A.x-M.x)*R,y:(A.y-M.y)*R};return{x:M.x+N.x,y:M.y+N.y}},c=t.spacingFactor&&t.spacingFactor!==1,f=function(){if(!c)return null;for(var R=$s(),T=0;T<i.length;T++){var A=i[T],M=u(A,T);N5(R,M.x,M.y)}return R},h=f(),d=Dg(function(P,R){var T=u(P,R);if(c){var A=Math.abs(t.spacingFactor);T=l(A,h,T)}return t.transform!=null&&(T=t.transform(P,T)),T},s);if(t.animate){for(var v=0;v<i.length;v++){var y=i[v],w=d(y,v),b=t.animateFilter==null||t.animateFilter(y,v);if(b){var p=y.animation({position:w,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(p)}else y.position(w)}if(t.fit){var _=o.animation({fit:{boundingBox:a.boundingBoxAt(d),padding:t.padding},duration:t.animationDuration,easing:t.animationEasing});e.animations.push(_)}else if(t.zoom!==void 0&&t.pan!==void 0){var O=o.animation({zoom:t.zoom,pan:t.pan,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(O)}e.animations.forEach(function(P){return P.play()}),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),Ug.all(e.animations.map(function(P){return P.promise()})).then(function(){e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e})})}else i.positions(d),t.fit&&o.fit(t.eles,t.padding),t.zoom!=null&&o.zoom(t.zoom),t.pan&&o.pan(t.pan),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var t=this.cy();return t.makeLayout(_r({},e,{eles:this}))}};p0.createLayout=p0.makeLayout=p0.layout;function LD(r,e,t){var n=t._private,i=n.styleCache=n.styleCache||[],o;return(o=i[r])!=null||(o=i[r]=e(t)),o}function ob(r,e){return r=Bd(r),function(n){return LD(r,e,n)}}function ab(r,e){r=Bd(r);var t=function(i){return e.call(i)};return function(){var i=this[0];if(i)return LD(r,t,i)}}var ka={recalculateRenderedStyle:function(e){var t=this.cy(),n=t.renderer(),i=t.styleEnabled();return n&&i&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),t=function(o){return o._private.styleCache=null};if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(t)}else this.forEach(function(i){t(i),i.connectedEdges().forEach(t)});return this},updateStyle:function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t.batching()){var n=t._private.batchStyleEles;return n.merge(this),this}var i=t.hasCompoundNodes(),o=this;e=!!(e||e===void 0),i&&(o=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var a=o;return e?a.emitAndNotify("style"):a.emit("style"),o.forEach(function(s){return s._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var t=0;t<this.length;t++){var n=this[t];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],i=n.cy();if(i.styleEnabled()&&n){n._private.styleDirty&&(n._private.styleDirty=!1,i.style().apply(n));var o=n._private.style[e];return o??(t?i.style().getDefaultProperty(e):null)}},numericStyle:function(e){var t=this[0];if(t.cy().styleEnabled()&&t){var n=t.pstyle(e);return n.pfValue!==void 0?n.pfValue:n.value}},numericStyleUnits:function(e){var t=this[0];if(t.cy().styleEnabled()&&t)return t.pstyle(e).units},renderedStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=this[0];if(n)return t.style().getRenderedStyle(n,e)},style:function(e,t){var n=this.cy();if(!n.styleEnabled())return this;var i=!1,o=n.style();if(wn(e)){var a=e;o.applyBypass(this,a,i),this.emitAndNotify("style")}else if(vr(e))if(t===void 0){var s=this[0];return s?o.getStylePropertyValue(s,e):void 0}else o.applyBypass(this,e,t,i),this.emitAndNotify("style");else if(e===void 0){var u=this[0];return u?o.getRawStyle(u):void 0}return this},removeStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=!1,i=t.style(),o=this;if(e===void 0)for(var a=0;a<o.length;a++){var s=o[a];i.removeAllBypasses(s,n)}else{e=e.split(/\s+/);for(var u=0;u<o.length;u++){var l=o[u];i.removeBypasses(l,e,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),n=this[0];if(n){var i=n._private,o=n.pstyle("opacity").value;if(!t)return o;var a=i.data.parent?n.parents():null;if(a)for(var s=0;s<a.length;s++){var u=a[s],l=u.pstyle("opacity").value;o=l*o}return o}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0],n=t.cy().hasCompoundNodes();if(t)return n?t.effectiveOpacity()===0:t.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0];return!!t._private.backgrounding}};function Iw(r,e){var t=r._private,n=t.data.parent?r.parents():null;if(n)for(var i=0;i<n.length;i++){var o=n[i];if(!e(o))return!1}return!0}function AS(r){var e=r.ok,t=r.edgeOkViaNode||r.ok,n=r.parentOk||r.ok;return function(){var i=this.cy();if(!i.styleEnabled())return!0;var o=this[0],a=i.hasCompoundNodes();if(o){var s=o._private;if(!e(o))return!1;if(o.isNode())return!a||Iw(o,n);var u=s.source,l=s.target;return t(u)&&(!a||Iw(u,t))&&(u===l||t(l)&&(!a||Iw(l,t)))}}}var zg=ob("eleTakesUpSpace",function(r){return r.pstyle("display").value==="element"&&r.width()!==0&&(r.isNode()?r.height()!==0:!0)});ka.takesUpSpace=ab("takesUpSpace",AS({ok:zg}));var mF=ob("eleInteractive",function(r){return r.pstyle("events").value==="yes"&&r.pstyle("visibility").value==="visible"&&zg(r)}),bF=ob("parentInteractive",function(r){return r.pstyle("visibility").value==="visible"&&zg(r)});ka.interactive=ab("interactive",AS({ok:mF,parentOk:bF,edgeOkViaNode:zg}));ka.noninteractive=function(){var r=this[0];if(r)return!r.interactive()};var _F=ob("eleVisible",function(r){return r.pstyle("visibility").value==="visible"&&r.pstyle("opacity").pfValue!==0&&zg(r)}),wF=zg;ka.visible=ab("visible",AS({ok:_F,edgeOkViaNode:wF}));ka.hidden=function(){var r=this[0];if(r)return!r.visible()};ka.isBundledBezier=ab("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});ka.bypass=ka.css=ka.style;ka.renderedCss=ka.renderedStyle;ka.removeBypass=ka.removeCss=ka.removeStyle;ka.pstyle=ka.parsedStyle;var Nd={};function S2(r){return function(){var e=arguments,t=[];if(e.length===2){var n=e[0],i=e[1];this.on(r.event,n,i)}else if(e.length===1&&$i(e[0])){var o=e[0];this.on(r.event,o)}else if(e.length===0||e.length===1&&di(e[0])){for(var a=e.length===1?e[0]:null,s=0;s<this.length;s++){var u=this[s],l=!r.ableField||u._private[r.ableField],c=u._private[r.field]!=r.value;if(r.overrideAble){var f=r.overrideAble(u);if(f!==void 0&&(l=f,!f))return this}l&&(u._private[r.field]=r.value,c&&t.push(u))}var h=this.spawn(t);h.updateStyle(),h.emit(r.event),a&&h.emit(a)}return this}}function qg(r){Nd[r.field]=function(){var e=this[0];if(e){if(r.overrideField){var t=r.overrideField(e);if(t!==void 0)return t}return e._private[r.field]}},Nd[r.on]=S2({event:r.on,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:!0}),Nd[r.off]=S2({event:r.off,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:!1})}qg({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});qg({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});qg({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});qg({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});Nd.deselect=Nd.unselect;Nd.grabbed=function(){var r=this[0];if(r)return r._private.grabbed};qg({field:"active",on:"activate",off:"unactivate"});qg({field:"pannable",on:"panify",off:"unpanify"});Nd.inactive=function(){var r=this[0];if(r)return!r._private.active};var Ka={},T2=function(e){return function(n){for(var i=this,o=[],a=0;a<i.length;a++){var s=i[a];if(s.isNode()){for(var u=!1,l=s.connectedEdges(),c=0;c<l.length;c++){var f=l[c],h=f.source(),d=f.target();if(e.noIncomingEdges&&d===s&&h!==s||e.noOutgoingEdges&&h===s&&d!==s){u=!0;break}}u||o.push(s)}}return this.spawn(o,!0).filter(n)}},C2=function(e){return function(t){for(var n=this,i=[],o=0;o<n.length;o++){var a=n[o];if(a.isNode())for(var s=a.connectedEdges(),u=0;u<s.length;u++){var l=s[u],c=l.source(),f=l.target();e.outgoing&&c===a?(i.push(l),i.push(f)):e.incoming&&f===a&&(i.push(l),i.push(c))}}return this.spawn(i,!0).filter(t)}},P2=function(e){return function(t){for(var n=this,i=[],o={};;){var a=e.outgoing?n.outgoers():n.incomers();if(a.length===0)break;for(var s=!1,u=0;u<a.length;u++){var l=a[u],c=l.id();o[c]||(o[c]=!0,i.push(l),s=!0)}if(!s)break;n=a}return this.spawn(i,!0).filter(t)}};Ka.clearTraversalCache=function(){for(var r=0;r<this.length;r++)this[r]._private.traversalCache=null};_r(Ka,{roots:T2({noIncomingEdges:!0}),leaves:T2({noOutgoingEdges:!0}),outgoers:cl(C2({outgoing:!0}),"outgoers"),successors:P2({outgoing:!0}),incomers:cl(C2({incoming:!0}),"incomers"),predecessors:P2({})});_r(Ka,{neighborhood:cl(function(r){for(var e=[],t=this.nodes(),n=0;n<t.length;n++)for(var i=t[n],o=i.connectedEdges(),a=0;a<o.length;a++){var s=o[a],u=s.source(),l=s.target(),c=i===u?l:u;c.length>0&&e.push(c[0]),e.push(s[0])}return this.spawn(e,!0).filter(r)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});Ka.neighbourhood=Ka.neighborhood;Ka.closedNeighbourhood=Ka.closedNeighborhood;Ka.openNeighbourhood=Ka.openNeighborhood;_r(Ka,{source:cl(function(e){var t=this[0],n;return t&&(n=t._private.source||t.cy().collection()),n&&e?n.filter(e):n},"source"),target:cl(function(e){var t=this[0],n;return t&&(n=t._private.target||t.cy().collection()),n&&e?n.filter(e):n},"target"),sources:A2({attr:"source"}),targets:A2({attr:"target"})});function A2(r){return function(t){for(var n=[],i=0;i<this.length;i++){var o=this[i],a=o._private[r.attr];a&&n.push(a)}return this.spawn(n,!0).filter(t)}}_r(Ka,{edgesWith:cl(R2(),"edgesWith"),edgesTo:cl(R2({thisIsSrc:!0}),"edgesTo")});function R2(r){return function(t){var n=[],i=this._private.cy,o=r||{};vr(t)&&(t=i.$(t));for(var a=0;a<t.length;a++)for(var s=t[a]._private.edges,u=0;u<s.length;u++){var l=s[u],c=l._private.data,f=this.hasElementWithId(c.source)&&t.hasElementWithId(c.target),h=t.hasElementWithId(c.source)&&this.hasElementWithId(c.target),d=f||h;d&&((o.thisIsSrc||o.thisIsTgt)&&(o.thisIsSrc&&!f||o.thisIsTgt&&!h)||n.push(l))}return this.spawn(n,!0)}}_r(Ka,{connectedEdges:cl(function(r){for(var e=[],t=this,n=0;n<t.length;n++){var i=t[n];if(i.isNode())for(var o=i._private.edges,a=0;a<o.length;a++){var s=o[a];e.push(s)}}return this.spawn(e,!0).filter(r)},"connectedEdges"),connectedNodes:cl(function(r){for(var e=[],t=this,n=0;n<t.length;n++){var i=t[n];i.isEdge()&&(e.push(i.source()[0]),e.push(i.target()[0]))}return this.spawn(e,!0).filter(r)},"connectedNodes"),parallelEdges:cl(I2(),"parallelEdges"),codirectedEdges:cl(I2({codirected:!0}),"codirectedEdges")});function I2(r){var e={codirected:!1};return r=_r({},e,r),function(n){for(var i=[],o=this.edges(),a=r,s=0;s<o.length;s++)for(var u=o[s],l=u._private,c=l.source,f=c._private.data.id,h=l.data.target,d=c._private.edges,v=0;v<d.length;v++){var y=d[v],w=y._private.data,b=w.target,p=w.source,_=b===h&&p===f,O=f===b&&h===p;(a.codirected&&_||!a.codirected&&(_||O))&&i.push(y)}return this.spawn(i,!0).filter(n)}}_r(Ka,{components:function(e){var t=this,n=t.cy(),i=n.collection(),o=e==null?t.nodes():e.nodes(),a=[];e!=null&&o.empty()&&(o=e.sources());var s=function(c,f){i.merge(c),o.unmerge(c),f.merge(c)};if(o.empty())return t.spawn();var u=function(){var c=n.collection();a.push(c);var f=o[0];s(f,c),t.bfs({directed:!1,roots:f,visit:function(d){return s(d,c)}}),c.forEach(function(h){h.connectedEdges().forEach(function(d){t.has(d)&&c.has(d.source())&&c.has(d.target())&&c.merge(d)})})};do u();while(o.length>0);return a},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});Ka.componentsOf=Ka.components;var Da=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){Hi("A collection must have a reference to the core");return}var o=new Eh,a=!1;if(!t)t=[];else if(t.length>0&&wn(t[0])&&!am(t[0])){a=!0;for(var s=[],u=new Bg,l=0,c=t.length;l<c;l++){var f=t[l];f.data==null&&(f.data={});var h=f.data;if(h.id==null)h.id=Xk();else if(e.hasElementWithId(h.id)||u.has(h.id))continue;var d=new K0(e,f,!1);s.push(d),u.add(h.id)}t=s}this.length=0;for(var v=0,y=t.length;v<y;v++){var w=t[v][0];if(w!=null){var b=w._private.data.id;(!n||!o.has(b))&&(n&&o.set(b,{index:this.length,ele:w}),this[this.length]=w,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(p){this.lazyMap=p},rebuildMap:function(){for(var _=this.lazyMap=new Eh,O=this.eles,P=0;P<O.length;P++){var R=O[P];_.set(R.id(),{index:P,ele:R})}}},n&&(this._private.map=o),a&&!i&&this.restore()},_i=K0.prototype=Da.prototype=Object.create(Array.prototype);_i.instanceString=function(){return"collection"};_i.spawn=function(r,e){return new Da(this.cy(),r,e)};_i.spawnSelf=function(){return this.spawn(this)};_i.cy=function(){return this._private.cy};_i.renderer=function(){return this._private.cy.renderer()};_i.element=function(){return this[0]};_i.collection=function(){return Lk(this)?this:new Da(this._private.cy,[this])};_i.unique=function(){return new Da(this._private.cy,this,!0)};_i.hasElementWithId=function(r){return r=""+r,this._private.map.has(r)};_i.getElementById=function(r){r=""+r;var e=this._private.cy,t=this._private.map.get(r);return t?t.ele:new Da(e)};_i.$id=_i.getElementById;_i.poolIndex=function(){var r=this._private.cy,e=r._private.elements,t=this[0]._private.data.id;return e._private.map.get(t).index};_i.indexOf=function(r){var e=r[0]._private.data.id;return this._private.map.get(e).index};_i.indexOfId=function(r){return r=""+r,this._private.map.get(r).index};_i.json=function(r){var e=this.element(),t=this.cy();if(e==null&&r)return this;if(e!=null){var n=e._private;if(wn(r)){if(t.startBatch(),r.data){e.data(r.data);var i=n.data;if(e.isEdge()){var o=!1,a={},s=r.data.source,u=r.data.target;s!=null&&s!=i.source&&(a.source=""+s,o=!0),u!=null&&u!=i.target&&(a.target=""+u,o=!0),o&&(e=e.move(a))}else{var l="parent"in r.data,c=r.data.parent;l&&(c!=null||i.parent!=null)&&c!=i.parent&&(c===void 0&&(c=null),c!=null&&(c=""+c),e=e.move({parent:c}))}}r.position&&e.position(r.position);var f=function(y,w,b){var p=r[y];p!=null&&p!==n[y]&&(p?e[w]():e[b]())};return f("removed","remove","restore"),f("selected","select","unselect"),f("selectable","selectify","unselectify"),f("locked","lock","unlock"),f("grabbable","grabify","ungrabify"),f("pannable","panify","unpanify"),r.classes!=null&&e.classes(r.classes),t.endBatch(),this}else if(r===void 0){var h={data:lf(n.data),position:lf(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};h.classes="";var d=0;return n.classes.forEach(function(v){return h.classes+=d++===0?v:" "+v}),h}}};_i.jsons=function(){for(var r=[],e=0;e<this.length;e++){var t=this[e],n=t.json();r.push(n)}return r};_i.clone=function(){for(var r=this.cy(),e=[],t=0;t<this.length;t++){var n=this[t],i=n.json(),o=new K0(r,i,!1);e.push(o)}return new Da(r,e)};_i.copy=_i.clone;_i.restore=function(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this,n=t.cy(),i=n._private,o=[],a=[],s,u=0,l=t.length;u<l;u++){var c=t[u];e&&!c.removed()||(c.isNode()?o.push(c):a.push(c))}s=o.concat(a);var f,h=function(){s.splice(f,1),f--};for(f=0;f<s.length;f++){var d=s[f],v=d._private,y=v.data;if(d.clearTraversalCache(),!(!e&&!v.removed)){if(y.id===void 0)y.id=Xk();else if(qt(y.id))y.id=""+y.id;else if(Fd(y.id)||!vr(y.id)){Hi("Can not create element with invalid string ID `"+y.id+"`"),h();continue}else if(n.hasElementWithId(y.id)){Hi("Can not create second element with ID `"+y.id+"`"),h();continue}}var w=y.id;if(d.isNode()){var b=v.position;b.x==null&&(b.x=0),b.y==null&&(b.y=0)}if(d.isEdge()){for(var p=d,_=["source","target"],O=_.length,P=!1,R=0;R<O;R++){var T=_[R],A=y[T];qt(A)&&(A=y[T]=""+y[T]),A==null||A===""?(Hi("Can not create edge `"+w+"` with unspecified "+T),P=!0):n.hasElementWithId(A)||(Hi("Can not create edge `"+w+"` with nonexistant "+T+" `"+A+"`"),P=!0)}if(P){h();continue}var M=n.getElementById(y.source),N=n.getElementById(y.target);M.same(N)?M._private.edges.push(p):(M._private.edges.push(p),N._private.edges.push(p)),p._private.source=M,p._private.target=N}v.map=new Eh,v.map.set(w,{ele:d,index:0}),v.removed=!1,e&&n.addToPool(d)}for(var j=0;j<o.length;j++){var B=o[j],q=B._private.data;qt(q.parent)&&(q.parent=""+q.parent);var W=q.parent,J=W!=null;if(J||B._private.parent){var te=B._private.parent?n.collection().merge(B._private.parent):n.getElementById(W);if(te.empty())q.parent=void 0;else if(te[0].removed())Bn("Node added with missing parent, reference to parent removed"),q.parent=void 0,B._private.parent=null;else{for(var re=!1,ee=te;!ee.empty();){if(B.same(ee)){re=!0,q.parent=void 0;break}ee=ee.parent()}re||(te[0]._private.children.push(B),B._private.parent=te[0],i.hasCompoundNodes=!0)}}}if(s.length>0){for(var fe=s.length===t.length?t:new Da(n,s),he=0;he<fe.length;he++){var se=fe[he];se.isNode()||(se.parallelEdges().clearTraversalCache(),se.source().clearTraversalCache(),se.target().clearTraversalCache())}var me;i.hasCompoundNodes?me=n.collection().merge(fe).merge(fe.connectedNodes()).merge(fe.parent()):me=fe,me.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(r),r?fe.emitAndNotify("add"):e&&fe.emit("add")}return t};_i.removed=function(){var r=this[0];return r&&r._private.removed};_i.inside=function(){var r=this[0];return r&&!r._private.removed};_i.remove=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this,n=[],i={},o=t._private.cy;function a(W){for(var J=W._private.edges,te=0;te<J.length;te++)u(J[te])}function s(W){for(var J=W._private.children,te=0;te<J.length;te++)u(J[te])}function u(W){var J=i[W.id()];e&&W.removed()||J||(i[W.id()]=!0,W.isNode()?(n.push(W),a(W),s(W)):n.unshift(W))}for(var l=0,c=t.length;l<c;l++){var f=t[l];u(f)}function h(W,J){var te=W._private.edges;Ud(te,J),W.clearTraversalCache()}function d(W){W.clearTraversalCache()}var v=[];v.ids={};function y(W,J){J=J[0],W=W[0];var te=W._private.children,re=W.id();Ud(te,J),J._private.parent=null,v.ids[re]||(v.ids[re]=!0,v.push(W))}t.dirtyCompoundBoundsCache(),e&&o.removeFromPool(n);for(var w=0;w<n.length;w++){var b=n[w];if(b.isEdge()){var p=b.source()[0],_=b.target()[0];h(p,b),h(_,b);for(var O=b.parallelEdges(),P=0;P<O.length;P++){var R=O[P];d(R),R.isBundledBezier()&&R.dirtyBoundingBoxCache()}}else{var T=b.parent();T.length!==0&&y(T,b)}e&&(b._private.removed=!0)}var A=o._private.elements;o._private.hasCompoundNodes=!1;for(var M=0;M<A.length;M++){var N=A[M];if(N.isParent()){o._private.hasCompoundNodes=!0;break}}var j=new Da(this.cy(),n);j.size()>0&&(r?j.emitAndNotify("remove"):e&&j.emit("remove"));for(var B=0;B<v.length;B++){var q=v[B];(!e||!q.removed())&&q.updateStyle()}return j};_i.move=function(r){var e=this._private.cy,t=this,n=!1,i=!1,o=function(v){return v==null?v:""+v};if(r.source!==void 0||r.target!==void 0){var a=o(r.source),s=o(r.target),u=a!=null&&e.hasElementWithId(a),l=s!=null&&e.hasElementWithId(s);(u||l)&&(e.batch(function(){t.remove(n,i),t.emitAndNotify("moveout");for(var d=0;d<t.length;d++){var v=t[d],y=v._private.data;v.isEdge()&&(u&&(y.source=a),l&&(y.target=s))}t.restore(n,i)}),t.emitAndNotify("move"))}else if(r.parent!==void 0){var c=o(r.parent),f=c===null||e.hasElementWithId(c);if(f){var h=c===null?void 0:c;e.batch(function(){var d=t.remove(n,i);d.emitAndNotify("moveout");for(var v=0;v<t.length;v++){var y=t[v],w=y._private.data;y.isNode()&&(w.parent=h)}d.restore(n,i)}),t.emitAndNotify("move")}}return this};[uD,k4,v0,Ld,Ng,Y4,nb,cF,kD,DD,pF,I0,p0,ka,Nd,Ka].forEach(function(r){_r(_i,r)});var EF={add:function(e){var t,n=this;if(Iu(e)){var i=e;if(i._private.cy===n)t=i.restore();else{for(var o=[],a=0;a<i.length;a++){var s=i[a];o.push(s.json())}t=new Da(n,o)}}else if(di(e)){var u=e;t=new Da(n,u)}else if(wn(e)&&(di(e.nodes)||di(e.edges))){for(var l=e,c=[],f=["nodes","edges"],h=0,d=f.length;h<d;h++){var v=f[h],y=l[v];if(di(y))for(var w=0,b=y.length;w<b;w++){var p=_r({group:v},y[w]);c.push(p)}}t=new Da(n,c)}else{var _=e;t=new K0(n,_).collection()}return t},remove:function(e){if(!Iu(e)){if(vr(e)){var t=e;e=this.$(t)}}return e.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function OF(r,e,t,n){var i=4,o=.001,a=1e-7,s=10,u=11,l=1/(u-1),c=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var f=0;f<4;++f)if(typeof arguments[f]!="number"||isNaN(arguments[f])||!isFinite(arguments[f]))return!1;r=Math.min(r,1),t=Math.min(t,1),r=Math.max(r,0),t=Math.max(t,0);var h=c?new Float32Array(u):new Array(u);function d(N,j){return 1-3*j+3*N}function v(N,j){return 3*j-6*N}function y(N){return 3*N}function w(N,j,B){return((d(j,B)*N+v(j,B))*N+y(j))*N}function b(N,j,B){return 3*d(j,B)*N*N+2*v(j,B)*N+y(j)}function p(N,j){for(var B=0;B<i;++B){var q=b(j,r,t);if(q===0)return j;var W=w(j,r,t)-N;j-=W/q}return j}function _(){for(var N=0;N<u;++N)h[N]=w(N*l,r,t)}function O(N,j,B){var q,W,J=0;do W=j+(B-j)/2,q=w(W,r,t)-N,q>0?B=W:j=W;while(Math.abs(q)>a&&++J<s);return W}function P(N){for(var j=0,B=1,q=u-1;B!==q&&h[B]<=N;++B)j+=l;--B;var W=(N-h[B])/(h[B+1]-h[B]),J=j+W*l,te=b(J,r,t);return te>=o?p(N,J):te===0?J:O(N,j,j+l)}var R=!1;function T(){R=!0,(r!==e||t!==n)&&_()}var A=function(j){return R||T(),r===e&&t===n?j:j===0?0:j===1?1:w(P(j),e,n)};A.getControlPoints=function(){return[{x:r,y:e},{x:t,y:n}]};var M="generateBezier("+[r,e,t,n]+")";return A.toString=function(){return M},A}/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var xF=function(){function r(n){return-n.tension*n.x-n.friction*n.v}function e(n,i,o){var a={x:n.x+o.dx*i,v:n.v+o.dv*i,tension:n.tension,friction:n.friction};return{dx:a.v,dv:r(a)}}function t(n,i){var o={dx:n.v,dv:r(n)},a=e(n,i*.5,o),s=e(n,i*.5,a),u=e(n,i,s),l=1/6*(o.dx+2*(a.dx+s.dx)+u.dx),c=1/6*(o.dv+2*(a.dv+s.dv)+u.dv);return n.x=n.x+l*i,n.v=n.v+c*i,n}return function n(i,o,a){var s={x:-1,v:0,tension:null,friction:null},u=[0],l=0,c=1/1e4,f=16/1e3,h,d,v;for(i=parseFloat(i)||500,o=parseFloat(o)||20,a=a||null,s.tension=i,s.friction=o,h=a!==null,h?(l=n(i,o),d=l/a*f):d=f;v=t(v||s,d),u.push(1+v.x),l+=16,Math.abs(v.x)>c&&Math.abs(v.v)>c;);return h?function(y){return u[y*(u.length-1)|0]}:l}}(),bi=function(e,t,n,i){var o=OF(e,t,n,i);return function(a,s,u){return a+(s-a)*o(u)}},g0={linear:function(e,t,n){return e+(t-e)*n},ease:bi(.25,.1,.25,1),"ease-in":bi(.42,0,1,1),"ease-out":bi(0,0,.58,1),"ease-in-out":bi(.42,0,.58,1),"ease-in-sine":bi(.47,0,.745,.715),"ease-out-sine":bi(.39,.575,.565,1),"ease-in-out-sine":bi(.445,.05,.55,.95),"ease-in-quad":bi(.55,.085,.68,.53),"ease-out-quad":bi(.25,.46,.45,.94),"ease-in-out-quad":bi(.455,.03,.515,.955),"ease-in-cubic":bi(.55,.055,.675,.19),"ease-out-cubic":bi(.215,.61,.355,1),"ease-in-out-cubic":bi(.645,.045,.355,1),"ease-in-quart":bi(.895,.03,.685,.22),"ease-out-quart":bi(.165,.84,.44,1),"ease-in-out-quart":bi(.77,0,.175,1),"ease-in-quint":bi(.755,.05,.855,.06),"ease-out-quint":bi(.23,1,.32,1),"ease-in-out-quint":bi(.86,0,.07,1),"ease-in-expo":bi(.95,.05,.795,.035),"ease-out-expo":bi(.19,1,.22,1),"ease-in-out-expo":bi(1,0,0,1),"ease-in-circ":bi(.6,.04,.98,.335),"ease-out-circ":bi(.075,.82,.165,1),"ease-in-out-circ":bi(.785,.135,.15,.86),spring:function(e,t,n){if(n===0)return g0.linear;var i=xF(e,t,n);return function(o,a,s){return o+(a-o)*i(s)}},"cubic-bezier":bi};function k2(r,e,t,n,i){if(n===1||e===t)return t;var o=i(e,t,n);return r==null||((r.roundValue||r.color)&&(o=Math.round(o)),r.min!==void 0&&(o=Math.max(o,r.min)),r.max!==void 0&&(o=Math.min(o,r.max))),o}function D2(r,e){return r.pfValue!=null||r.value!=null?r.pfValue!=null&&(e==null||e.type.units!=="%")?r.pfValue:r.value:r}function cg(r,e,t,n,i){var o=i!=null?i.type:null;t<0?t=0:t>1&&(t=1);var a=D2(r,i),s=D2(e,i);if(qt(a)&&qt(s))return k2(o,a,s,t,n);if(di(a)&&di(s)){for(var u=[],l=0;l<s.length;l++){var c=a[l],f=s[l];if(c!=null&&f!=null){var h=k2(o,c,f,t,n);u.push(h)}else u.push(f)}return u}}function SF(r,e,t,n){var i=!n,o=r._private,a=e._private,s=a.easing,u=a.startTime,l=n?r:r.cy(),c=l.style();if(!a.easingImpl)if(s==null)a.easingImpl=g0.linear;else{var f;if(vr(s)){var h=c.parse("transition-timing-function",s);f=h.value}else f=s;var d,v;vr(f)?(d=f,v=[]):(d=f[1],v=f.slice(2).map(function(fe){return+fe})),v.length>0?(d==="spring"&&v.push(a.duration),a.easingImpl=g0[d].apply(null,v)):a.easingImpl=g0[d]}var y=a.easingImpl,w;if(a.duration===0?w=1:w=(t-u)/a.duration,a.applying&&(w=a.progress),w<0?w=0:w>1&&(w=1),a.delay==null){var b=a.startPosition,p=a.position;if(p&&i&&!r.locked()){var _={};Cy(b.x,p.x)&&(_.x=cg(b.x,p.x,w,y)),Cy(b.y,p.y)&&(_.y=cg(b.y,p.y,w,y)),r.position(_)}var O=a.startPan,P=a.pan,R=o.pan,T=P!=null&&n;T&&(Cy(O.x,P.x)&&(R.x=cg(O.x,P.x,w,y)),Cy(O.y,P.y)&&(R.y=cg(O.y,P.y,w,y)),r.emit("pan"));var A=a.startZoom,M=a.zoom,N=M!=null&&n;N&&(Cy(A,M)&&(o.zoom=Zy(o.minZoom,cg(A,M,w,y),o.maxZoom)),r.emit("zoom")),(T||N)&&r.emit("viewport");var j=a.style;if(j&&j.length>0&&i){for(var B=0;B<j.length;B++){var q=j[B],W=q.name,J=q,te=a.startStyle[W],re=c.properties[te.name],ee=cg(te,J,w,y,re);c.overrideBypass(r,W,ee)}r.emit("style")}}return a.progress=w,w}function Cy(r,e){return r==null||e==null?!1:qt(r)&&qt(e)?!0:!!(r&&e)}function TF(r,e,t,n){var i=e._private;i.started=!0,i.startTime=t-i.progress*i.duration}function M2(r,e){var t=e._private.aniEles,n=[];function i(c,f){var h=c._private,d=h.animation.current,v=h.animation.queue,y=!1;if(d.length===0){var w=v.shift();w&&d.push(w)}for(var b=function(R){for(var T=R.length-1;T>=0;T--){var A=R[T];A()}R.splice(0,R.length)},p=d.length-1;p>=0;p--){var _=d[p],O=_._private;if(O.stopped){d.splice(p,1),O.hooked=!1,O.playing=!1,O.started=!1,b(O.frames);continue}!O.playing&&!O.applying||(O.playing&&O.applying&&(O.applying=!1),O.started||TF(c,_,r),SF(c,_,r,f),O.applying&&(O.applying=!1),b(O.frames),O.step!=null&&O.step(r),_.completed()&&(d.splice(p,1),O.hooked=!1,O.playing=!1,O.started=!1,b(O.completes)),y=!0)}return!f&&d.length===0&&v.length===0&&n.push(c),y}for(var o=!1,a=0;a<t.length;a++){var s=t[a],u=i(s);o=o||u}var l=i(e,!0);(o||l)&&(t.length>0?e.notify("draw",t):e.notify("draw")),t.unmerge(n),e.emit("step")}var CF={animate:Fn.animate(),animation:Fn.animation(),animated:Fn.animated(),clearQueue:Fn.clearQueue(),delay:Fn.delay(),delayAnimation:Fn.delayAnimation(),stop:Fn.stop(),addToAnimationPool:function(e){var t=this;t.styleEnabled()&&t._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function t(){e._private.animationsRunning&&T0(function(o){M2(o,e),t()})}var n=e.renderer();n&&n.beforeRender?n.beforeRender(function(o,a){M2(a,e)},n.beforeRenderPriorities.animations):t()}},PF={qualifierCompare:function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},eventMatches:function(e,t,n){var i=t.qualifier;return i!=null?e!==n.target&&am(n.target)&&i.matches(n.target):!0},addEventFields:function(e,t){t.cy=e,t.target=e},callbackContext:function(e,t,n){return t.qualifier!=null?n.target:e}},Qm=function(e){return vr(e)?new zd(e):e},ND={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new ib(PF,this)),this},emitter:function(){return this._private.emitter},on:function(e,t,n){return this.emitter().on(e,Qm(t),n),this},removeListener:function(e,t,n){return this.emitter().removeListener(e,Qm(t),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,t,n){return this.emitter().one(e,Qm(t),n),this},once:function(e,t,n){return this.emitter().one(e,Qm(t),n),this},emit:function(e,t){return this.emitter().emit(e,t),this},emitAndNotify:function(e,t){return this.emit(e),this.notify(e,t),this}};Fn.eventAliasesOn(ND);var qx={png:function(e){var t=this._private.renderer;return e=e||{},t.png(e)},jpg:function(e){var t=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",t.jpg(e)}};qx.jpeg=qx.jpg;var y0={layout:function(e){var t=this;if(e==null){Hi("Layout options must be specified to make a layout");return}if(e.name==null){Hi("A `name` must be specified to make a layout");return}var n=e.name,i=t.extension("layout",n);if(i==null){Hi("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var o;vr(e.eles)?o=t.$(e.eles):o=e.eles!=null?e.eles:t.$();var a=new i(_r({},e,{cy:t,eles:o}));return a}};y0.createLayout=y0.makeLayout=y0.layout;var AF={notify:function(e,t){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var i=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();t!=null&&i.merge(t);return}if(n.notificationsEnabled){var o=this.renderer();this.destroyed()||!o||o.notify(e,t)}},notifications:function(e){var t=this._private;return e===void 0?t.notificationsEnabled:(t.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var t=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var i=e.batchNotifications[n];i.empty()?t.notify(n):t.notify(n,i)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var t=this;return this.batch(function(){for(var n=Object.keys(e),i=0;i<n.length;i++){var o=n[i],a=e[o],s=t.getElementById(o);s.data(a)}})}},RF=Vo({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),Gx={renderTo:function(e,t,n,i){var o=this._private.renderer;return o.renderTo(e,t,n,i),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var t=this,n=t.extension("renderer",e.name);if(n==null){Hi("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&Bn("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var i=RF(e);i.cy=t,t._private.renderer=new n(i),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var t=e.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var i=n._private;i.rscratch={},i.rstyle={},i.animation.current=[],i.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};Gx.invalidateDimensions=Gx.resize;var m0={collection:function(e,t){return vr(e)?this.$(e):Iu(e)?e.collection():di(e)?(t||(t={}),new Da(this,e,t.unique,t.removed)):new Da(this)},nodes:function(e){var t=this.$(function(n){return n.isNode()});return e?t.filter(e):t},edges:function(e){var t=this.$(function(n){return n.isEdge()});return e?t.filter(e):t},$:function(e){var t=this._private.elements;return e?t.filter(e):t.spawnSelf()},mutableElements:function(){return this._private.elements}};m0.elements=m0.filter=m0.$;var la={},Vy="t",IF="f";la.apply=function(r){for(var e=this,t=e._private,n=t.cy,i=n.collection(),o=0;o<r.length;o++){var a=r[o],s=e.getContextMeta(a);if(!s.empty){var u=e.getContextStyle(s),l=e.applyContextStyle(s,u,a);a._private.appliedInitStyle?e.updateTransitions(a,l.diffProps):a._private.appliedInitStyle=!0;var c=e.updateStyleHints(a);c&&i.push(a)}}return i};la.getPropertiesDiff=function(r,e){var t=this,n=t._private.propDiffs=t._private.propDiffs||{},i=r+"-"+e,o=n[i];if(o)return o;for(var a=[],s={},u=0;u<t.length;u++){var l=t[u],c=r[u]===Vy,f=e[u]===Vy,h=c!==f,d=l.mappedProperties.length>0;if(h||f&&d){var v=void 0;h&&d||h?v=l.properties:d&&(v=l.mappedProperties);for(var y=0;y<v.length;y++){for(var w=v[y],b=w.name,p=!1,_=u+1;_<t.length;_++){var O=t[_],P=e[_]===Vy;if(P&&(p=O.properties[w.name]!=null,p))break}!s[b]&&!p&&(s[b]=!0,a.push(b))}}}return n[i]=a,a};la.getContextMeta=function(r){for(var e=this,t="",n,i=r._private.styleCxtKey||"",o=0;o<e.length;o++){var a=e[o],s=a.selector&&a.selector.matches(r);s?t+=Vy:t+=IF}return n=e.getPropertiesDiff(i,t),r._private.styleCxtKey=t,{key:t,diffPropNames:n,empty:n.length===0}};la.getContextStyle=function(r){var e=r.key,t=this,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var i={_private:{key:e}},o=0;o<t.length;o++){var a=t[o],s=e[o]===Vy;if(s)for(var u=0;u<a.properties.length;u++){var l=a.properties[u];i[l.name]=l}}return n[e]=i,i};la.applyContextStyle=function(r,e,t){for(var n=this,i=r.diffPropNames,o={},a=n.types,s=0;s<i.length;s++){var u=i[s],l=e[u],c=t.pstyle(u);if(!l)if(c)c.bypass?l={name:u,deleteBypassed:!0}:l={name:u,delete:!0};else continue;if(c!==l){if(l.mapped===a.fn&&c!=null&&c.mapping!=null&&c.mapping.value===l.value){var f=c.mapping,h=f.fnValue=l.value(t);if(h===f.prevFnValue)continue}var d=o[u]={prev:c};n.applyParsedProperty(t,l),d.next=t.pstyle(u),d.next&&d.next.bypass&&(d.next=d.next.bypassed)}}return{diffProps:o}};la.updateStyleHints=function(r){var e=r._private,t=this,n=t.propertyGroupNames,i=t.propertyGroupKeys,o=function(Oe,Ae,Ve){return t.getPropertiesHash(Oe,Ae,Ve)},a=e.styleKey;if(r.removed())return!1;var s=e.group==="nodes",u=r._private.style;n=Object.keys(u);for(var l=0;l<i.length;l++){var c=i[l];e.styleKeys[c]=[_g,ky]}for(var f=function(Oe,Ae){return e.styleKeys[Ae][0]=Yy(Oe,e.styleKeys[Ae][0])},h=function(Oe,Ae){return e.styleKeys[Ae][1]=Xy(Oe,e.styleKeys[Ae][1])},d=function(Oe,Ae){f(Oe,Ae),h(Oe,Ae)},v=function(Oe,Ae){for(var Ve=0;Ve<Oe.length;Ve++){var tt=Oe.charCodeAt(Ve);f(tt,Ae),h(tt,Ae)}},y=2e9,w=function(Oe){return-128<Oe&&Oe<128&&Math.floor(Oe)!==Oe?y-(Oe*1024|0):Oe},b=0;b<n.length;b++){var p=n[b],_=u[p];if(_!=null){var O=this.properties[p],P=O.type,R=O.groupKey,T=void 0;O.hashOverride!=null?T=O.hashOverride(r,_):_.pfValue!=null&&(T=_.pfValue);var A=O.enums==null?_.value:null,M=T!=null,N=A!=null,j=M||N,B=_.units;if(P.number&&j&&!P.multiple){var q=M?T:A;d(w(q),R),!M&&B!=null&&v(B,R)}else v(_.strValue,R)}}for(var W=[_g,ky],J=0;J<i.length;J++){var te=i[J],re=e.styleKeys[te];W[0]=Yy(re[0],W[0]),W[1]=Xy(re[1],W[1])}e.styleKey=Qj(W[0],W[1]);var ee=e.styleKeys;e.labelDimsKey=Sd(ee.labelDimensions);var fe=o(r,["label"],ee.labelDimensions);if(e.labelKey=Sd(fe),e.labelStyleKey=Sd(Vm(ee.commonLabel,fe)),!s){var he=o(r,["source-label"],ee.labelDimensions);e.sourceLabelKey=Sd(he),e.sourceLabelStyleKey=Sd(Vm(ee.commonLabel,he));var se=o(r,["target-label"],ee.labelDimensions);e.targetLabelKey=Sd(se),e.targetLabelStyleKey=Sd(Vm(ee.commonLabel,se))}if(s){var me=e.styleKeys,De=me.nodeBody,Le=me.nodeBorder,Ie=me.nodeOutline,qe=me.backgroundImage,Ge=me.compound,Me=me.pie,Pe=[De,Le,Ie,qe,Ge,Me].filter(function(de){return de!=null}).reduce(Vm,[_g,ky]);e.nodeKey=Sd(Pe),e.hasPie=Me!=null&&Me[0]!==_g&&Me[1]!==ky}return a!==e.styleKey};la.clearStyleHints=function(r){var e=r._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null};la.applyParsedProperty=function(r,e){var t=this,n=e,i=r._private.style,o,a=t.types,s=t.properties[n.name].type,u=n.bypass,l=i[n.name],c=l&&l.bypass,f=r._private,h="mapping",d=function(De){return De==null?null:De.pfValue!=null?De.pfValue:De.value},v=function(){var De=d(l),Le=d(n);t.checkTriggers(r,n.name,De,Le)};if(e.name==="curve-style"&&r.isEdge()&&(e.value!=="bezier"&&r.isLoop()||e.value==="haystack"&&(r.source().isParent()||r.target().isParent()))&&(n=e=this.parse(e.name,"bezier",u)),n.delete)return i[n.name]=void 0,v(),!0;if(n.deleteBypassed)return l?l.bypass?(l.bypassed=void 0,v(),!0):!1:(v(),!0);if(n.deleteBypass)return l?l.bypass?(i[n.name]=l.bypassed,v(),!0):!1:(v(),!0);var y=function(){Bn("Do not assign mappings to elements without corresponding data (i.e. ele `"+r.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case a.mapData:{for(var w=n.field.split("."),b=f.data,p=0;p<w.length&&b;p++){var _=w[p];b=b[_]}if(b==null)return y(),!1;var O;if(qt(b)){var P=n.fieldMax-n.fieldMin;P===0?O=0:O=(b-n.fieldMin)/P}else return Bn("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+b+"` for `"+r.id()+"` is non-numeric)"),!1;if(O<0?O=0:O>1&&(O=1),s.color){var R=n.valueMin[0],T=n.valueMax[0],A=n.valueMin[1],M=n.valueMax[1],N=n.valueMin[2],j=n.valueMax[2],B=n.valueMin[3]==null?1:n.valueMin[3],q=n.valueMax[3]==null?1:n.valueMax[3],W=[Math.round(R+(T-R)*O),Math.round(A+(M-A)*O),Math.round(N+(j-N)*O),Math.round(B+(q-B)*O)];o={bypass:n.bypass,name:n.name,value:W,strValue:"rgb("+W[0]+", "+W[1]+", "+W[2]+")"}}else if(s.number){var J=n.valueMin+(n.valueMax-n.valueMin)*O;o=this.parse(n.name,J,n.bypass,h)}else return!1;if(!o)return y(),!1;o.mapping=n,n=o;break}case a.data:{for(var te=n.field.split("."),re=f.data,ee=0;ee<te.length&&re;ee++){var fe=te[ee];re=re[fe]}if(re!=null&&(o=this.parse(n.name,re,n.bypass,h)),!o)return y(),!1;o.mapping=n,n=o;break}case a.fn:{var he=n.value,se=n.fnValue!=null?n.fnValue:he(r);if(n.prevFnValue=se,se==null)return Bn("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+r.id()+"` is null)"),!1;if(o=this.parse(n.name,se,n.bypass,h),!o)return Bn("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+r.id()+"` is invalid)"),!1;o.mapping=lf(n),n=o;break}case void 0:break;default:return!1}return u?(c?n.bypassed=l.bypassed:n.bypassed=l,i[n.name]=n):c?l.bypassed=n:i[n.name]=n,v(),!0};la.cleanElements=function(r,e){for(var t=0;t<r.length;t++){var n=r[t];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),!e)n._private.style={};else for(var i=n._private.style,o=Object.keys(i),a=0;a<o.length;a++){var s=o[a],u=i[s];u!=null&&(u.bypass?u.bypassed=null:i[s]=null)}}};la.update=function(){var r=this._private.cy,e=r.mutableElements();e.updateStyle()};la.updateTransitions=function(r,e){var t=this,n=r._private,i=r.pstyle("transition-property").value,o=r.pstyle("transition-duration").pfValue,a=r.pstyle("transition-delay").pfValue;if(i.length>0&&o>0){for(var s={},u=!1,l=0;l<i.length;l++){var c=i[l],f=r.pstyle(c),h=e[c];if(h){var d=h.prev,v=d,y=h.next!=null?h.next:f,w=!1,b=void 0,p=1e-6;v&&(qt(v.pfValue)&&qt(y.pfValue)?(w=y.pfValue-v.pfValue,b=v.pfValue+p*w):qt(v.value)&&qt(y.value)?(w=y.value-v.value,b=v.value+p*w):di(v.value)&&di(y.value)&&(w=v.value[0]!==y.value[0]||v.value[1]!==y.value[1]||v.value[2]!==y.value[2],b=v.strValue),w&&(s[c]=y.strValue,this.applyBypass(r,c,b),u=!0))}}if(!u)return;n.transitioning=!0,new Ug(function(_){a>0?r.delayAnimation(a).play().promise().then(_):_()}).then(function(){return r.animation({style:s,duration:o,easing:r.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){t.removeBypasses(r,i),r.emitAndNotify("style"),n.transitioning=!1})}else n.transitioning&&(this.removeBypasses(r,i),r.emitAndNotify("style"),n.transitioning=!1)};la.checkTrigger=function(r,e,t,n,i,o){var a=this.properties[e],s=i(a);r.removed()||s!=null&&s(t,n,r)&&o(a)};la.checkZOrderTrigger=function(r,e,t,n){var i=this;this.checkTrigger(r,e,t,n,function(o){return o.triggersZOrder},function(){i._private.cy.notify("zorder",r)})};la.checkBoundsTrigger=function(r,e,t,n){this.checkTrigger(r,e,t,n,function(i){return i.triggersBounds},function(i){r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache()})};la.checkConnectedEdgesBoundsTrigger=function(r,e,t,n){this.checkTrigger(r,e,t,n,function(i){return i.triggersBoundsOfConnectedEdges},function(i){r.connectedEdges().forEach(function(o){o.dirtyBoundingBoxCache()})})};la.checkParallelEdgesBoundsTrigger=function(r,e,t,n){this.checkTrigger(r,e,t,n,function(i){return i.triggersBoundsOfParallelEdges},function(i){r.parallelEdges().forEach(function(o){o.dirtyBoundingBoxCache()})})};la.checkTriggers=function(r,e,t,n){r.dirtyStyleCache(),this.checkZOrderTrigger(r,e,t,n),this.checkBoundsTrigger(r,e,t,n),this.checkConnectedEdgesBoundsTrigger(r,e,t,n),this.checkParallelEdgesBoundsTrigger(r,e,t,n)};var dm={};dm.applyBypass=function(r,e,t,n){var i=this,o=[],a=!0;if(e==="*"||e==="**"){if(t!==void 0)for(var s=0;s<i.properties.length;s++){var u=i.properties[s],l=u.name,c=this.parse(l,t,!0);c&&o.push(c)}}else if(vr(e)){var f=this.parse(e,t,!0);f&&o.push(f)}else if(wn(e)){var h=e;n=t;for(var d=Object.keys(h),v=0;v<d.length;v++){var y=d[v],w=h[y];if(w===void 0&&(w=h[Y0(y)]),w!==void 0){var b=this.parse(y,w,!0);b&&o.push(b)}}}else return!1;if(o.length===0)return!1;for(var p=!1,_=0;_<r.length;_++){for(var O=r[_],P={},R=void 0,T=0;T<o.length;T++){var A=o[T];if(n){var M=O.pstyle(A.name);R=P[A.name]={prev:M}}p=this.applyParsedProperty(O,lf(A))||p,n&&(R.next=O.pstyle(A.name))}p&&this.updateStyleHints(O),n&&this.updateTransitions(O,P,a)}return p};dm.overrideBypass=function(r,e,t){e=gS(e);for(var n=0;n<r.length;n++){var i=r[n],o=i._private.style[e],a=this.properties[e].type,s=a.color,u=a.mutiple,l=o?o.pfValue!=null?o.pfValue:o.value:null;!o||!o.bypass?this.applyBypass(i,e,t):(o.value=t,o.pfValue!=null&&(o.pfValue=t),s?o.strValue="rgb("+t.join(",")+")":u?o.strValue=t.join(" "):o.strValue=""+t,this.updateStyleHints(i)),this.checkTriggers(i,e,l,t)}};dm.removeAllBypasses=function(r,e){return this.removeBypasses(r,this.propertyNames,e)};dm.removeBypasses=function(r,e,t){for(var n=!0,i=0;i<r.length;i++){for(var o=r[i],a={},s=0;s<e.length;s++){var u=e[s],l=this.properties[u],c=o.pstyle(l.name);if(!(!c||!c.bypass)){var f="",h=this.parse(u,f,!0),d=a[l.name]={prev:c};this.applyParsedProperty(o,h),d.next=o.pstyle(l.name)}}this.updateStyleHints(o),t&&this.updateTransitions(o,a,n)}};var RS={};RS.getEmSizeInPixels=function(){var r=this.containerCss("font-size");return r!=null?parseFloat(r):1};RS.containerCss=function(r){var e=this._private.cy,t=e.container(),n=e.window();if(n&&t&&n.getComputedStyle)return n.getComputedStyle(t).getPropertyValue(r)};var df={};df.getRenderedStyle=function(r,e){return e?this.getStylePropertyValue(r,e,!0):this.getRawStyle(r,!0)};df.getRawStyle=function(r,e){var t=this;if(r=r[0],r){for(var n={},i=0;i<t.properties.length;i++){var o=t.properties[i],a=t.getStylePropertyValue(r,o.name,e);a!=null&&(n[o.name]=a,n[Y0(o.name)]=a)}return n}};df.getIndexedStyle=function(r,e,t,n){var i=r.pstyle(e)[t][n];return i??r.cy().style().getDefaultProperty(e)[t][0]};df.getStylePropertyValue=function(r,e,t){var n=this;if(r=r[0],r){var i=n.properties[e];i.alias&&(i=i.pointsTo);var o=i.type,a=r.pstyle(i.name);if(a){var s=a.value,u=a.units,l=a.strValue;if(t&&o.number&&s!=null&&qt(s)){var c=r.cy().zoom(),f=function(w){return w*c},h=function(w,b){return f(w)+b},d=di(s),v=d?u.every(function(y){return y!=null}):u!=null;return v?d?s.map(function(y,w){return h(y,u[w])}).join(" "):h(s,u):d?s.map(function(y){return vr(y)?y:""+f(y)}).join(" "):""+f(s)}else if(l!=null)return l}return null}};df.getAnimationStartStyle=function(r,e){for(var t={},n=0;n<e.length;n++){var i=e[n],o=i.name,a=r.pstyle(o);a!==void 0&&(wn(a)?a=this.parse(o,a.strValue):a=this.parse(o,a)),a&&(t[o]=a)}return t};df.getPropsList=function(r){var e=this,t=[],n=r,i=e.properties;if(n)for(var o=Object.keys(n),a=0;a<o.length;a++){var s=o[a],u=n[s],l=i[s]||i[gS(s)],c=this.parse(l.name,u);c&&t.push(c)}return t};df.getNonDefaultPropertiesHash=function(r,e,t){var n=t.slice(),i,o,a,s,u,l;for(u=0;u<e.length;u++)if(i=e[u],o=r.pstyle(i,!1),o!=null)if(o.pfValue!=null)n[0]=Yy(s,n[0]),n[1]=Xy(s,n[1]);else for(a=o.strValue,l=0;l<a.length;l++)s=a.charCodeAt(l),n[0]=Yy(s,n[0]),n[1]=Xy(s,n[1]);return n};df.getPropertiesHash=df.getNonDefaultPropertiesHash;var sb={};sb.appendFromJson=function(r){for(var e=this,t=0;t<r.length;t++){var n=r[t],i=n.selector,o=n.style||n.css,a=Object.keys(o);e.selector(i);for(var s=0;s<a.length;s++){var u=a[s],l=o[u];e.css(u,l)}}return e};sb.fromJson=function(r){var e=this;return e.resetToDefault(),e.appendFromJson(r),e};sb.json=function(){for(var r=[],e=this.defaultLength;e<this.length;e++){for(var t=this[e],n=t.selector,i=t.properties,o={},a=0;a<i.length;a++){var s=i[a];o[s.name]=s.strValue}r.push({selector:n?n.toString():"core",style:o})}return r};var IS={};IS.appendFromString=function(r){var e=this,t=this,n=""+r,i,o,a;n=n.replace(/[/][*](\s|.)+?[*][/]/g,"");function s(){n.length>i.length?n=n.substr(i.length):n=""}function u(){o.length>a.length?o=o.substr(a.length):o=""}for(;;){var l=n.match(/^\s*$/);if(l)break;var c=n.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){Bn("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+n);break}i=c[0];var f=c[1];if(f!=="core"){var h=new zd(f);if(h.invalid){Bn("Skipping parsing of block: Invalid selector found in string stylesheet: "+f),s();continue}}var d=c[2],v=!1;o=d;for(var y=[];;){var w=o.match(/^\s*$/);if(w)break;var b=o.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!b){Bn("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+d),v=!0;break}a=b[0];var p=b[1],_=b[2],O=e.properties[p];if(!O){Bn("Skipping property: Invalid property name in: "+a),u();continue}var P=t.parse(p,_);if(!P){Bn("Skipping property: Invalid property definition in: "+a),u();continue}y.push({name:p,val:_}),u()}if(v){s();break}t.selector(f);for(var R=0;R<y.length;R++){var T=y[R];t.css(T.name,T.val)}s()}return t};IS.fromString=function(r){var e=this;return e.resetToDefault(),e.appendFromString(r),e};var Ia={};(function(){var r=zo,e=Rj,t=kj,n=Dj,i=Mj,o=function(Pe){return"^"+Pe+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},a=function(Pe){var de=r+"|\\w+|"+e+"|"+t+"|"+n+"|"+i;return"^"+Pe+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+r+")\\s*\\,\\s*("+r+")\\s*,\\s*("+de+")\\s*\\,\\s*("+de+")\\)$"},s=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];Ia.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:o("data")},layoutData:{mapping:!0,regex:o("layoutData")},scratch:{mapping:!0,regex:o("scratch")},mapData:{mapping:!0,regex:a("mapData")},mapLayoutData:{mapping:!0,regex:a("mapLayoutData")},mapScratch:{mapping:!0,regex:a("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:s,singleRegexMatchValue:!0},urls:{regexes:s,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(Pe,de){switch(Pe.length){case 2:return de[0]!=="deg"&&de[0]!=="rad"&&de[1]!=="deg"&&de[1]!=="rad";case 1:return vr(Pe[0])||de[0]==="deg"||de[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+r+")\\s*,\\s*("+r+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+r+")\\s*,\\s*("+r+")\\s*,\\s*("+r+")\\s*,\\s*("+r+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(Pe){var de=Pe.length;return de===1||de===2||de===4}}};var u={zeroNonZero:function(Pe,de){return(Pe==null||de==null)&&Pe!==de||Pe==0&&de!=0?!0:Pe!=0&&de==0},any:function(Pe,de){return Pe!=de},emptyNonEmpty:function(Pe,de){var Oe=Fd(Pe),Ae=Fd(de);return Oe&&!Ae||!Oe&&Ae}},l=Ia.types,c=[{name:"label",type:l.text,triggersBounds:u.any,triggersZOrder:u.emptyNonEmpty},{name:"text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any}],f=[{name:"source-label",type:l.text,triggersBounds:u.any},{name:"source-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"source-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-offset",type:l.size,triggersBounds:u.any}],h=[{name:"target-label",type:l.text,triggersBounds:u.any},{name:"target-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"target-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-offset",type:l.size,triggersBounds:u.any}],d=[{name:"font-family",type:l.fontFamily,triggersBounds:u.any},{name:"font-style",type:l.fontStyle,triggersBounds:u.any},{name:"font-weight",type:l.fontWeight,triggersBounds:u.any},{name:"font-size",type:l.size,triggersBounds:u.any},{name:"text-transform",type:l.textTransform,triggersBounds:u.any},{name:"text-wrap",type:l.textWrap,triggersBounds:u.any},{name:"text-overflow-wrap",type:l.textOverflowWrap,triggersBounds:u.any},{name:"text-max-width",type:l.size,triggersBounds:u.any},{name:"text-outline-width",type:l.size,triggersBounds:u.any},{name:"line-height",type:l.positiveNumber,triggersBounds:u.any}],v=[{name:"text-valign",type:l.valign,triggersBounds:u.any},{name:"text-halign",type:l.halign,triggersBounds:u.any},{name:"color",type:l.color},{name:"text-outline-color",type:l.color},{name:"text-outline-opacity",type:l.zeroOneNumber},{name:"text-background-color",type:l.color},{name:"text-background-opacity",type:l.zeroOneNumber},{name:"text-background-padding",type:l.size,triggersBounds:u.any},{name:"text-border-opacity",type:l.zeroOneNumber},{name:"text-border-color",type:l.color},{name:"text-border-width",type:l.size,triggersBounds:u.any},{name:"text-border-style",type:l.borderStyle,triggersBounds:u.any},{name:"text-background-shape",type:l.textBackgroundShape,triggersBounds:u.any},{name:"text-justification",type:l.justification}],y=[{name:"events",type:l.bool,triggersZOrder:u.any},{name:"text-events",type:l.bool,triggersZOrder:u.any}],w=[{name:"display",type:l.display,triggersZOrder:u.any,triggersBounds:u.any,triggersBoundsOfConnectedEdges:u.any,triggersBoundsOfParallelEdges:function(Pe,de,Oe){return Pe===de?!1:Oe.pstyle("curve-style").value==="bezier"}},{name:"visibility",type:l.visibility,triggersZOrder:u.any},{name:"opacity",type:l.zeroOneNumber,triggersZOrder:u.zeroNonZero},{name:"text-opacity",type:l.zeroOneNumber},{name:"min-zoomed-font-size",type:l.size},{name:"z-compound-depth",type:l.zCompoundDepth,triggersZOrder:u.any},{name:"z-index-compare",type:l.zIndexCompare,triggersZOrder:u.any},{name:"z-index",type:l.number,triggersZOrder:u.any}],b=[{name:"overlay-padding",type:l.size,triggersBounds:u.any},{name:"overlay-color",type:l.color},{name:"overlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"overlay-shape",type:l.overlayShape,triggersBounds:u.any},{name:"overlay-corner-radius",type:l.cornerRadius}],p=[{name:"underlay-padding",type:l.size,triggersBounds:u.any},{name:"underlay-color",type:l.color},{name:"underlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"underlay-shape",type:l.overlayShape,triggersBounds:u.any},{name:"underlay-corner-radius",type:l.cornerRadius}],_=[{name:"transition-property",type:l.propList},{name:"transition-duration",type:l.time},{name:"transition-delay",type:l.time},{name:"transition-timing-function",type:l.easing}],O=function(Pe,de){return de.value==="label"?-Pe.poolIndex():de.pfValue},P=[{name:"height",type:l.nodeSize,triggersBounds:u.any,hashOverride:O},{name:"width",type:l.nodeSize,triggersBounds:u.any,hashOverride:O},{name:"shape",type:l.nodeShape,triggersBounds:u.any},{name:"shape-polygon-points",type:l.polygonPointList,triggersBounds:u.any},{name:"corner-radius",type:l.cornerRadius},{name:"background-color",type:l.color},{name:"background-fill",type:l.fill},{name:"background-opacity",type:l.zeroOneNumber},{name:"background-blacken",type:l.nOneOneNumber},{name:"background-gradient-stop-colors",type:l.colors},{name:"background-gradient-stop-positions",type:l.percentages},{name:"background-gradient-direction",type:l.gradientDirection},{name:"padding",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"padding-relative-to",type:l.paddingRelativeTo,triggersBounds:u.any},{name:"bounds-expansion",type:l.boundsExpansion,triggersBounds:u.any}],R=[{name:"border-color",type:l.color},{name:"border-opacity",type:l.zeroOneNumber},{name:"border-width",type:l.size,triggersBounds:u.any},{name:"border-style",type:l.borderStyle},{name:"border-cap",type:l.lineCap},{name:"border-join",type:l.lineJoin},{name:"border-dash-pattern",type:l.numbers},{name:"border-dash-offset",type:l.number},{name:"border-position",type:l.linePosition}],T=[{name:"outline-color",type:l.color},{name:"outline-opacity",type:l.zeroOneNumber},{name:"outline-width",type:l.size,triggersBounds:u.any},{name:"outline-style",type:l.borderStyle},{name:"outline-offset",type:l.size,triggersBounds:u.any}],A=[{name:"background-image",type:l.urls},{name:"background-image-crossorigin",type:l.bgCrossOrigin},{name:"background-image-opacity",type:l.zeroOneNumbers},{name:"background-image-containment",type:l.bgContainment},{name:"background-image-smoothing",type:l.bools},{name:"background-position-x",type:l.bgPos},{name:"background-position-y",type:l.bgPos},{name:"background-width-relative-to",type:l.bgRelativeTo},{name:"background-height-relative-to",type:l.bgRelativeTo},{name:"background-repeat",type:l.bgRepeat},{name:"background-fit",type:l.bgFit},{name:"background-clip",type:l.bgClip},{name:"background-width",type:l.bgWH},{name:"background-height",type:l.bgWH},{name:"background-offset-x",type:l.bgPos},{name:"background-offset-y",type:l.bgPos}],M=[{name:"position",type:l.position,triggersBounds:u.any},{name:"compound-sizing-wrt-labels",type:l.compoundIncludeLabels,triggersBounds:u.any},{name:"min-width",type:l.size,triggersBounds:u.any},{name:"min-width-bias-left",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-width-bias-right",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height",type:l.size,triggersBounds:u.any},{name:"min-height-bias-top",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height-bias-bottom",type:l.sizeMaybePercent,triggersBounds:u.any}],N=[{name:"line-style",type:l.lineStyle},{name:"line-color",type:l.color},{name:"line-fill",type:l.fill},{name:"line-cap",type:l.lineCap},{name:"line-opacity",type:l.zeroOneNumber},{name:"line-dash-pattern",type:l.numbers},{name:"line-dash-offset",type:l.number},{name:"line-outline-width",type:l.size},{name:"line-outline-color",type:l.color},{name:"line-gradient-stop-colors",type:l.colors},{name:"line-gradient-stop-positions",type:l.percentages},{name:"curve-style",type:l.curveStyle,triggersBounds:u.any,triggersBoundsOfParallelEdges:function(Pe,de){return Pe===de?!1:Pe==="bezier"||de==="bezier"}},{name:"haystack-radius",type:l.zeroOneNumber,triggersBounds:u.any},{name:"source-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"target-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"control-point-step-size",type:l.size,triggersBounds:u.any},{name:"control-point-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"control-point-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"segment-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-radii",type:l.numbers,triggersBounds:u.any},{name:"radius-type",type:l.radiusType,triggersBounds:u.any},{name:"taxi-turn",type:l.bidirectionalSizeMaybePercent,triggersBounds:u.any},{name:"taxi-turn-min-distance",type:l.size,triggersBounds:u.any},{name:"taxi-direction",type:l.axisDirection,triggersBounds:u.any},{name:"taxi-radius",type:l.number,triggersBounds:u.any},{name:"edge-distances",type:l.edgeDistances,triggersBounds:u.any},{name:"arrow-scale",type:l.positiveNumber,triggersBounds:u.any},{name:"loop-direction",type:l.angle,triggersBounds:u.any},{name:"loop-sweep",type:l.angle,triggersBounds:u.any},{name:"source-distance-from-node",type:l.size,triggersBounds:u.any},{name:"target-distance-from-node",type:l.size,triggersBounds:u.any}],j=[{name:"ghost",type:l.bool,triggersBounds:u.any},{name:"ghost-offset-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-offset-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-opacity",type:l.zeroOneNumber}],B=[{name:"selection-box-color",type:l.color},{name:"selection-box-opacity",type:l.zeroOneNumber},{name:"selection-box-border-color",type:l.color},{name:"selection-box-border-width",type:l.size},{name:"active-bg-color",type:l.color},{name:"active-bg-opacity",type:l.zeroOneNumber},{name:"active-bg-size",type:l.size},{name:"outside-texture-bg-color",type:l.color},{name:"outside-texture-bg-opacity",type:l.zeroOneNumber}],q=[];Ia.pieBackgroundN=16,q.push({name:"pie-size",type:l.sizeMaybePercent});for(var W=1;W<=Ia.pieBackgroundN;W++)q.push({name:"pie-"+W+"-background-color",type:l.color}),q.push({name:"pie-"+W+"-background-size",type:l.percent}),q.push({name:"pie-"+W+"-background-opacity",type:l.zeroOneNumber});var J=[],te=Ia.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:l.arrowShape,triggersBounds:u.any},{name:"arrow-color",type:l.color},{name:"arrow-fill",type:l.arrowFill},{name:"arrow-width",type:l.arrowWidth}].forEach(function(Me){te.forEach(function(Pe){var de=Pe+"-"+Me.name,Oe=Me.type,Ae=Me.triggersBounds;J.push({name:de,type:Oe,triggersBounds:Ae})})},{});var re=Ia.properties=[].concat(y,_,w,b,p,j,v,d,c,f,h,P,R,T,A,q,M,N,J,B),ee=Ia.propertyGroups={behavior:y,transition:_,visibility:w,overlay:b,underlay:p,ghost:j,commonLabel:v,labelDimensions:d,mainLabel:c,sourceLabel:f,targetLabel:h,nodeBody:P,nodeBorder:R,nodeOutline:T,backgroundImage:A,pie:q,compound:M,edgeLine:N,edgeArrow:J,core:B},fe=Ia.propertyGroupNames={},he=Ia.propertyGroupKeys=Object.keys(ee);he.forEach(function(Me){fe[Me]=ee[Me].map(function(Pe){return Pe.name}),ee[Me].forEach(function(Pe){return Pe.groupKey=Me})});var se=Ia.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Ia.propertyNames=re.map(function(Me){return Me.name});for(var me=0;me<re.length;me++){var De=re[me];re[De.name]=De}for(var Le=0;Le<se.length;Le++){var Ie=se[Le],qe=re[Ie.pointsTo],Ge={name:Ie.name,alias:!0,pointsTo:qe};re.push(Ge),re[Ie.name]=Ge}})();Ia.getDefaultProperty=function(r){return this.getDefaultProperties()[r]};Ia.getDefaultProperties=function(){var r=this._private;if(r.defaultProperties!=null)return r.defaultProperties;for(var e=_r({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(u,l){for(var c=1;c<=Ia.pieBackgroundN;c++){var f=l.name.replace("{{i}}",c),h=l.value;u[f]=h}return u},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(u,l){return Ia.arrowPrefixes.forEach(function(c){var f=c+"-"+l.name,h=l.value;u[f]=h}),u},{})),t={},n=0;n<this.properties.length;n++){var i=this.properties[n];if(!i.pointsTo){var o=i.name,a=e[o],s=this.parse(o,a);t[o]=s}}return r.defaultProperties=t,r.defaultProperties};Ia.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var ub={};ub.parse=function(r,e,t,n){var i=this;if($i(e))return i.parseImplWarn(r,e,t,n);var o=n==="mapping"||n===!0||n===!1||n==null?"dontcare":n,a=t?"t":"f",s=""+e,u=Hk(r,s,a,o),l=i.propCache=i.propCache||[],c;return(c=l[u])||(c=l[u]=i.parseImplWarn(r,e,t,n)),(t||n==="mapping")&&(c=lf(c),c&&(c.value=lf(c.value))),c};ub.parseImplWarn=function(r,e,t,n){var i=this.parseImpl(r,e,t,n);return!i&&e!=null&&Bn("The style property `".concat(r,": ").concat(e,"` is invalid")),i&&(i.name==="width"||i.name==="height")&&e==="label"&&Bn("The style value of `label` is deprecated for `"+i.name+"`"),i};ub.parseImpl=function(r,e,t,n){var i=this;r=gS(r);var o=i.properties[r],a=e,s=i.types;if(!o||e===void 0)return null;o.alias&&(o=o.pointsTo,r=o.name);var u=vr(e);u&&(e=e.trim());var l=o.type;if(!l)return null;if(t&&(e===""||e===null))return{name:r,value:e,bypass:!0,deleteBypass:!0};if($i(e))return{name:r,value:e,strValue:"fn",mapped:s.fn,bypass:t};var c,f;if(!(!u||n||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(c=new RegExp(s.data.regex).exec(e))){if(t)return!1;var h=s.data;return{name:r,value:c,strValue:""+e,mapped:h,field:c[1],bypass:t}}else if(e.length>=10&&e[0]==="m"&&(f=new RegExp(s.mapData.regex).exec(e))){if(t||l.multiple)return!1;var d=s.mapData;if(!(l.color||l.number))return!1;var v=this.parse(r,f[4]);if(!v||v.mapped)return!1;var y=this.parse(r,f[5]);if(!y||y.mapped)return!1;if(v.pfValue===y.pfValue||v.strValue===y.strValue)return Bn("`"+r+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+r+": "+v.strValue+"`"),this.parse(r,v.strValue);if(l.color){var w=v.value,b=y.value,p=w[0]===b[0]&&w[1]===b[1]&&w[2]===b[2]&&(w[3]===b[3]||(w[3]==null||w[3]===1)&&(b[3]==null||b[3]===1));if(p)return!1}return{name:r,value:f,strValue:""+e,mapped:d,field:f[1],fieldMin:parseFloat(f[2]),fieldMax:parseFloat(f[3]),valueMin:v.value,valueMax:y.value,bypass:t}}}if(l.multiple&&n!=="multiple"){var _;if(u?_=e.split(/\s+/):di(e)?_=e:_=[e],l.evenMultiple&&_.length%2!==0)return null;for(var O=[],P=[],R=[],T="",A=!1,M=0;M<_.length;M++){var N=i.parse(r,_[M],t,"multiple");A=A||vr(N.value),O.push(N.value),R.push(N.pfValue!=null?N.pfValue:N.value),P.push(N.units),T+=(M>0?" ":"")+N.strValue}return l.validate&&!l.validate(O,P)?null:l.singleEnum&&A?O.length===1&&vr(O[0])?{name:r,value:O[0],strValue:O[0],bypass:t}:null:{name:r,value:O,pfValue:R,strValue:T,bypass:t,units:P}}var j=function(){for(var Pe=0;Pe<l.enums.length;Pe++){var de=l.enums[Pe];if(de===e)return{name:r,value:e,strValue:""+e,bypass:t}}return null};if(l.number){var B,q="px";if(l.units&&(B=l.units),l.implicitUnits&&(q=l.implicitUnits),!l.unitless)if(u){var W="px|em"+(l.allowPercent?"|\\%":"");B&&(W=B);var J=e.match("^("+zo+")("+W+")?$");J&&(e=J[1],B=J[2]||q)}else(!B||l.implicitUnits)&&(B=q);if(e=parseFloat(e),isNaN(e)&&l.enums===void 0)return null;if(isNaN(e)&&l.enums!==void 0)return e=a,j();if(l.integer&&!Oj(e)||l.min!==void 0&&(e<l.min||l.strictMin&&e===l.min)||l.max!==void 0&&(e>l.max||l.strictMax&&e===l.max))return null;var te={name:r,value:e,strValue:""+e+(B||""),units:B,bypass:t};return l.unitless||B!=="px"&&B!=="em"?te.pfValue=e:te.pfValue=B==="px"||!B?e:this.getEmSizeInPixels()*e,(B==="ms"||B==="s")&&(te.pfValue=B==="ms"?e:1e3*e),(B==="deg"||B==="rad")&&(te.pfValue=B==="rad"?e:R5(e)),B==="%"&&(te.pfValue=e/100),te}else if(l.propList){var re=[],ee=""+e;if(ee!=="none"){for(var fe=ee.split(/\s*,\s*|\s+/),he=0;he<fe.length;he++){var se=fe[he].trim();i.properties[se]?re.push(se):Bn("`"+se+"` is not a valid property name")}if(re.length===0)return null}return{name:r,value:re,strValue:re.length===0?"none":re.join(" "),bypass:t}}else if(l.color){var me=Bk(e);return me?{name:r,value:me,pfValue:me,strValue:"rgb("+me[0]+","+me[1]+","+me[2]+")",bypass:t}:null}else if(l.regex||l.regexes){if(l.enums){var De=j();if(De)return De}for(var Le=l.regexes?l.regexes:[l.regex],Ie=0;Ie<Le.length;Ie++){var qe=new RegExp(Le[Ie]),Ge=qe.exec(e);if(Ge)return{name:r,value:l.singleRegexMatchValue?Ge[1]:Ge,strValue:""+e,bypass:t}}return null}else return l.string?{name:r,value:""+e,strValue:""+e,bypass:t}:l.enums?j():null};var ua=function(e){if(!(this instanceof ua))return new ua(e);if(!pS(e)){Hi("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},Za=ua.prototype;Za.instanceString=function(){return"style"};Za.clear=function(){for(var r=this._private,e=r.cy,t=e.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,r.contextStyles={},r.propDiffs={},this.cleanElements(t,!0),t.forEach(function(i){var o=i[0]._private;o.styleDirty=!0,o.appliedInitStyle=!1}),this};Za.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};Za.core=function(r){return this._private.coreStyle[r]||this.getDefaultProperty(r)};Za.selector=function(r){var e=r==="core"?null:new zd(r),t=this.length++;return this[t]={selector:e,properties:[],mappedProperties:[],index:t},this};Za.css=function(){var r=this,e=arguments;if(e.length===1)for(var t=e[0],n=0;n<r.properties.length;n++){var i=r.properties[n],o=t[i.name];o===void 0&&(o=t[Y0(i.name)]),o!==void 0&&this.cssRule(i.name,o)}else e.length===2&&this.cssRule(e[0],e[1]);return this};Za.style=Za.css;Za.cssRule=function(r,e){var t=this.parse(r,e);if(t){var n=this.length-1;this[n].properties.push(t),this[n].properties[t.name]=t,t.name.match(/pie-(\d+)-background-size/)&&t.value&&(this._private.hasPie=!0),t.mapped&&this[n].mappedProperties.push(t);var i=!this[n].selector;i&&(this._private.coreStyle[t.name]=t)}return this};Za.append=function(r){return Nk(r)?r.appendToStyle(this):di(r)?this.appendFromJson(r):vr(r)&&this.appendFromString(r),this};ua.fromJson=function(r,e){var t=new ua(r);return t.fromJson(e),t};ua.fromString=function(r,e){return new ua(r).fromString(e)};[la,dm,RS,df,sb,IS,Ia,ub].forEach(function(r){_r(Za,r)});ua.types=Za.types;ua.properties=Za.properties;ua.propertyGroups=Za.propertyGroups;ua.propertyGroupNames=Za.propertyGroupNames;ua.propertyGroupKeys=Za.propertyGroupKeys;var kF={style:function(e){if(e){var t=this.setStyle(e);t.update()}return this._private.style},setStyle:function(e){var t=this._private;return Nk(e)?t.style=e.generateStyle(this):di(e)?t.style=ua.fromJson(this,e):vr(e)?t.style=ua.fromString(this,e):t.style=ua(this),t.style},updateStyle:function(){this.mutableElements().updateStyle()}},DF="single",up={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var t=this._private;if(t.selectionType==null&&(t.selectionType=DF),e!==void 0)(e==="additive"||e==="single")&&(t.selectionType=e);else return t.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,t=this._private.pan,n,i,o,a,s;switch(e.length){case 0:return t;case 1:if(vr(e[0]))return n=e[0],t[n];if(wn(e[0])){if(!this._private.panningEnabled)return this;o=e[0],a=o.x,s=o.y,qt(a)&&(t.x=a),qt(s)&&(t.y=s),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],i=e[1],(n==="x"||n==="y")&&qt(i)&&(t[n]=i),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,t){var n=arguments,i=this._private.pan,o,a,s,u,l;if(!this._private.panningEnabled)return this;switch(n.length){case 1:wn(e)&&(s=n[0],u=s.x,l=s.y,qt(u)&&(i.x+=u),qt(l)&&(i.y+=l),this.emit("pan viewport"));break;case 2:o=e,a=t,(o==="x"||o==="y")&&qt(a)&&(i[o]+=a),this.emit("pan viewport");break}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(e,t){var n=this.getFitViewport(e,t);if(n){var i=this._private;i.zoom=n.zoom,i.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,t){if(qt(e)&&t===void 0&&(t=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(vr(e)){var i=e;e=this.$(i)}else if(Tj(e)){var o=e;n={x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else Iu(e)||(e=this.mutableElements());if(!(Iu(e)&&e.empty())){n=n||e.boundingBox();var a=this.width(),s=this.height(),u;if(t=qt(t)?t:0,!isNaN(a)&&!isNaN(s)&&a>0&&s>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){u=Math.min((a-2*t)/n.w,(s-2*t)/n.h),u=u>this._private.maxZoom?this._private.maxZoom:u,u=u<this._private.minZoom?this._private.minZoom:u;var l={x:(a-u*(n.x1+n.x2))/2,y:(s-u*(n.y1+n.y2))/2};return{zoom:u,pan:l}}}}},zoomRange:function(e,t){var n=this._private;if(t==null){var i=e;e=i.min,t=i.max}return qt(e)&&qt(t)&&e<=t?(n.minZoom=e,n.maxZoom=t):qt(e)&&t===void 0&&e<=n.maxZoom?n.minZoom=e:qt(t)&&e===void 0&&t>=n.minZoom&&(n.maxZoom=t),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var t=this._private,n=t.pan,i=t.zoom,o,a,s=!1;if(t.zoomingEnabled||(s=!0),qt(e)?a=e:wn(e)&&(a=e.level,e.position!=null?o=Z0(e.position,i,n):e.renderedPosition!=null&&(o=e.renderedPosition),o!=null&&!t.panningEnabled&&(s=!0)),a=a>t.maxZoom?t.maxZoom:a,a=a<t.minZoom?t.minZoom:a,s||!qt(a)||a===i||o!=null&&(!qt(o.x)||!qt(o.y)))return null;if(o!=null){var u=n,l=i,c=a,f={x:-c/l*(o.x-u.x)+o.x,y:-c/l*(o.y-u.y)+o.y};return{zoomed:!0,panned:!0,zoom:c,pan:f}}else return{zoomed:!0,panned:!1,zoom:a,pan:n}},zoom:function(e){if(e===void 0)return this._private.zoom;var t=this.getZoomedViewport(e),n=this._private;return t==null||!t.zoomed?this:(n.zoom=t.zoom,t.panned&&(n.pan.x=t.pan.x,n.pan.y=t.pan.y),this.emit("zoom"+(t.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var t=this._private,n=!0,i=!0,o=[],a=!1,s=!1;if(!e)return this;if(qt(e.zoom)||(n=!1),wn(e.pan)||(i=!1),!n&&!i)return this;if(n){var u=e.zoom;u<t.minZoom||u>t.maxZoom||!t.zoomingEnabled?a=!0:(t.zoom=u,o.push("zoom"))}if(i&&(!a||!e.cancelOnFailedZoom)&&t.panningEnabled){var l=e.pan;qt(l.x)&&(t.pan.x=l.x,s=!1),qt(l.y)&&(t.pan.y=l.y,s=!1),s||o.push("pan")}return o.length>0&&(o.push("viewport"),this.emit(o.join(" ")),this.notify("viewport")),this},center:function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,t){if(this._private.panningEnabled){if(vr(e)){var n=e;e=this.mutableElements().filter(n)}else Iu(e)||(e=this.mutableElements());if(e.length!==0){var i=e.boundingBox(),o=this.width(),a=this.height();t=t===void 0?this._private.zoom:t;var s={x:(o-t*(i.x1+i.x2))/2,y:(a-t*(i.y1+i.y2))/2};return s}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,t=e.container,n=this;return e.sizeCache=e.sizeCache||(t?function(){var i=n.window().getComputedStyle(t),o=function(s){return parseFloat(i.getPropertyValue(s))};return{width:t.clientWidth-o("padding-left")-o("padding-right"),height:t.clientHeight-o("padding-top")-o("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,t=this._private.zoom,n=this.renderedExtent(),i={x1:(n.x1-e.x)/t,x2:(n.x2-e.x)/t,y1:(n.y1-e.y)/t,y2:(n.y2-e.y)/t};return i.w=i.x2-i.x1,i.h=i.y2-i.y1,i},renderedExtent:function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};up.centre=up.center;up.autolockNodes=up.autolock;up.autoungrabifyNodes=up.autoungrabify;var tm={data:Fn.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:Fn.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:Fn.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Fn.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};tm.attr=tm.data;tm.removeAttr=tm.removeData;var rm=function(e){var t=this;e=_r({},e);var n=e.container;n&&!S0(n)&&S0(n[0])&&(n=n[0]);var i=n?n._cyreg:null;i=i||{},i&&i.cy&&(i.cy.destroy(),i={});var o=i.readies=i.readies||[];n&&(n._cyreg=i),i.cy=t;var a=Uo!==void 0&&n!==void 0&&!e.headless,s=e;s.layout=_r({name:a?"grid":"null"},s.layout),s.renderer=_r({name:a?"canvas":"null"},s.renderer);var u=function(v,y,w){return y!==void 0?y:w!==void 0?w:v},l=this._private={container:n,ready:!1,options:s,elements:new Da(this),listeners:[],aniEles:new Da(this),data:s.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:u(!0,s.zoomingEnabled),userZoomingEnabled:u(!0,s.userZoomingEnabled),panningEnabled:u(!0,s.panningEnabled),userPanningEnabled:u(!0,s.userPanningEnabled),boxSelectionEnabled:u(!0,s.boxSelectionEnabled),autolock:u(!1,s.autolock,s.autolockNodes),autoungrabify:u(!1,s.autoungrabify,s.autoungrabifyNodes),autounselectify:u(!1,s.autounselectify),styleEnabled:s.styleEnabled===void 0?a:s.styleEnabled,zoom:qt(s.zoom)?s.zoom:1,pan:{x:wn(s.pan)&&qt(s.pan.x)?s.pan.x:0,y:wn(s.pan)&&qt(s.pan.y)?s.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:u(250,s.multiClickDebounceTime)};this.createEmitter(),this.selectionType(s.selectionType),this.zoomRange({min:s.minZoom,max:s.maxZoom});var c=function(v,y){var w=v.some(Cj);if(w)return Ug.all(v).then(y);y(v)};l.styleEnabled&&t.setStyle([]);var f=_r({},s,s.renderer);t.initRenderer(f);var h=function(v,y,w){t.notifications(!1);var b=t.mutableElements();b.length>0&&b.remove(),v!=null&&(wn(v)||di(v))&&t.add(v),t.one("layoutready",function(_){t.notifications(!0),t.emit(_),t.one("load",y),t.emitAndNotify("load")}).one("layoutstop",function(){t.one("done",w),t.emit("done")});var p=_r({},t._private.options.layout);p.eles=t.elements(),t.layout(p).run()};c([s.style,s.elements],function(d){var v=d[0],y=d[1];l.styleEnabled&&t.style().append(v),h(y,function(){t.startAnimationLoop(),l.ready=!0,$i(s.ready)&&t.on("ready",s.ready);for(var w=0;w<o.length;w++){var b=o[w];t.on("ready",b)}i&&(i.readies=[]),t.emit("ready")},s.done)})},k0=rm.prototype;_r(k0,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){var e=this._private.container;if(e==null)return Uo;var t=this._private.container.ownerDocument;return t===void 0||t==null?Uo:t.defaultView||Uo},mount:function(e){if(e!=null){var t=this,n=t._private,i=n.options;return!S0(e)&&S0(e[0])&&(e=e[0]),t.stopAnimationLoop(),t.destroyRenderer(),n.container=e,n.styleEnabled=!0,t.invalidateSize(),t.initRenderer(_r({},i,i.renderer,{name:i.renderer.name==="null"?"canvas":i.renderer.name})),t.startAnimationLoop(),t.style(i.style),t.emit("mount"),t}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return lf(this._private.options)},json:function(e){var t=this,n=t._private,i=t.mutableElements(),o=function(O){return t.getElementById(O.id())};if(wn(e)){if(t.startBatch(),e.elements){var a={},s=function(O,P){for(var R=[],T=[],A=0;A<O.length;A++){var M=O[A];if(!M.data.id){Bn("cy.json() cannot handle elements without an ID attribute");continue}var N=""+M.data.id,j=t.getElementById(N);a[N]=!0,j.length!==0?T.push({ele:j,json:M}):(P&&(M.group=P),R.push(M))}t.add(R);for(var B=0;B<T.length;B++){var q=T[B],W=q.ele,J=q.json;W.json(J)}};if(di(e.elements))s(e.elements);else for(var u=["nodes","edges"],l=0;l<u.length;l++){var c=u[l],f=e.elements[c];di(f)&&s(f,c)}var h=t.collection();i.filter(function(_){return!a[_.id()]}).forEach(function(_){_.isParent()?h.merge(_):_.remove()}),h.forEach(function(_){return _.children().move({parent:null})}),h.forEach(function(_){return o(_).remove()})}e.style&&t.style(e.style),e.zoom!=null&&e.zoom!==n.zoom&&t.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&t.pan(e.pan),e.data&&t.data(e.data);for(var d=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],v=0;v<d.length;v++){var y=d[v];e[y]!=null&&t[y](e[y])}return t.endBatch(),this}else{var w=!!e,b={};w?b.elements=this.elements().map(function(_){return _.json()}):(b.elements={},i.forEach(function(_){var O=_.group();b.elements[O]||(b.elements[O]=[]),b.elements[O].push(_.json())})),this._private.styleEnabled&&(b.style=t.style().json()),b.data=lf(t.data());var p=n.options;return b.zoomingEnabled=n.zoomingEnabled,b.userZoomingEnabled=n.userZoomingEnabled,b.zoom=n.zoom,b.minZoom=n.minZoom,b.maxZoom=n.maxZoom,b.panningEnabled=n.panningEnabled,b.userPanningEnabled=n.userPanningEnabled,b.pan=lf(n.pan),b.boxSelectionEnabled=n.boxSelectionEnabled,b.renderer=lf(p.renderer),b.hideEdgesOnViewport=p.hideEdgesOnViewport,b.textureOnViewport=p.textureOnViewport,b.wheelSensitivity=p.wheelSensitivity,b.motionBlur=p.motionBlur,b.multiClickDebounceTime=p.multiClickDebounceTime,b}}});k0.$id=k0.getElementById;[EF,CF,ND,qx,y0,AF,Gx,m0,kF,up,tm].forEach(function(r){_r(k0,r)});var MF={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}},LF={maximal:!1,acyclic:!1},fg=function(e){return e.scratch("breadthfirst")},L2=function(e,t){return e.scratch("breadthfirst",t)};function jD(r){this.options=_r({},MF,LF,r)}jD.prototype.run=function(){var r=this.options,e=r.cy,t=r.eles,n=t.nodes().filter(function(H){return H.isChildless()}),i=t,o=r.directed,a=r.acyclic||r.maximal||r.maximalAdjustments>0,s=!!r.boundingBox,u=e.extent(),l=$s(s?r.boundingBox:{x1:u.x1,y1:u.y1,w:u.w,h:u.h}),c;if(Iu(r.roots))c=r.roots;else if(di(r.roots)){for(var f=[],h=0;h<r.roots.length;h++){var d=r.roots[h],v=e.getElementById(d);f.push(v)}c=e.collection(f)}else if(vr(r.roots))c=e.$(r.roots);else if(o)c=n.roots();else{var y=t.components();c=e.collection();for(var w=function(){var X=y[b],ne=X.maxDegree(!1),Se=X.filter(function(Te){return Te.degree(!1)===ne});c=c.add(Se)},b=0;b<y.length;b++)w()}var p=[],_={},O=function(X,ne){p[ne]==null&&(p[ne]=[]);var Se=p[ne].length;p[ne].push(X),L2(X,{index:Se,depth:ne})},P=function(X,ne){var Se=fg(X),Te=Se.depth,Ne=Se.index;p[Te][Ne]=null,X.isChildless()&&O(X,ne)};i.bfs({roots:c,directed:r.directed,visit:function(X,ne,Se,Te,Ne){var et=X[0],wt=et.id();et.isChildless()&&O(et,Ne),_[wt]=!0}});for(var R=[],T=0;T<n.length;T++){var A=n[T];_[A.id()]||R.push(A)}var M=function(X){for(var ne=p[X],Se=0;Se<ne.length;Se++){var Te=ne[Se];if(Te==null){ne.splice(Se,1),Se--;continue}L2(Te,{depth:X,index:Se})}},N=function(X,ne){for(var Se=fg(X),Te=X.incomers().filter(function(nt){return nt.isNode()&&t.has(nt)}),Ne=-1,et=X.id(),wt=0;wt<Te.length;wt++){var lt=Te[wt],pe=fg(lt);Ne=Math.max(Ne,pe.depth)}if(Se.depth<=Ne){if(!r.acyclic&&ne[et])return null;var Ue=Ne+1;return P(X,Ue),ne[et]=Ue,!0}return!1};if(o&&a){var j=[],B={},q=function(X){return j.push(X)},W=function(){return j.shift()};for(n.forEach(function(H){return j.push(H)});j.length>0;){var J=W(),te=N(J,B);if(te)J.outgoers().filter(function(H){return H.isNode()&&t.has(H)}).forEach(q);else if(te===null){Bn("Detected double maximal shift for node `"+J.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var re=0;if(r.avoidOverlap)for(var ee=0;ee<n.length;ee++){var fe=n[ee],he=fe.layoutDimensions(r),se=he.w,me=he.h;re=Math.max(re,se,me)}var De={},Le=function(X){if(De[X.id()])return De[X.id()];for(var ne=fg(X).depth,Se=X.neighborhood(),Te=0,Ne=0,et=0;et<Se.length;et++){var wt=Se[et];if(!(wt.isEdge()||wt.isParent()||!n.has(wt))){var lt=fg(wt);if(lt!=null){var pe=lt.index,Ue=lt.depth;if(!(pe==null||Ue==null)){var nt=p[Ue].length;Ue<ne&&(Te+=pe/nt,Ne++)}}}}return Ne=Math.max(1,Ne),Te=Te/Ne,Ne===0&&(Te=0),De[X.id()]=Te,Te},Ie=function(X,ne){var Se=Le(X),Te=Le(ne),Ne=Se-Te;return Ne===0?Fk(X.id(),ne.id()):Ne};r.depthSort!==void 0&&(Ie=r.depthSort);for(var qe=p.length,Ge=0;Ge<qe;Ge++)p[Ge].sort(Ie),M(Ge);for(var Me=[],Pe=0;Pe<R.length;Pe++)Me.push(R[Pe]);var de=function(){for(var X=0;X<qe;X++)M(X)};Me.length&&(p.unshift(Me),qe=p.length,de());for(var Oe=0,Ae=0;Ae<qe;Ae++)Oe=Math.max(p[Ae].length,Oe);var Ve={x:l.x1+l.w/2,y:l.y1+l.h/2},tt=n.reduce(function(H,X){return function(ne){return{w:H.w===-1?ne.w:(H.w+ne.w)/2,h:H.h===-1?ne.h:(H.h+ne.h)/2}}(X.boundingBox({includeLabels:r.nodeDimensionsIncludeLabels}))},{w:-1,h:-1}),ht=Math.max(qe===1?0:s?(l.h-r.padding*2-tt.h)/(qe-1):(l.h-r.padding*2-tt.h)/(qe+1),re),xt=p.reduce(function(H,X){return Math.max(H,X.length)},0),ut=function(X){var ne=fg(X),Se=ne.depth,Te=ne.index;if(r.circle){var Ne=Math.min(l.w/2/qe,l.h/2/qe);Ne=Math.max(Ne,re);var et=Ne*Se+Ne-(qe>0&&p[0].length<=3?Ne/2:0),wt=2*Math.PI/p[Se].length*Te;return Se===0&&p[0].length===1&&(et=1),{x:Ve.x+et*Math.cos(wt),y:Ve.y+et*Math.sin(wt)}}else{var lt=p[Se].length,pe=Math.max(lt===1?0:s?(l.w-r.padding*2-tt.w)/((r.grid?xt:lt)-1):(l.w-r.padding*2-tt.w)/((r.grid?xt:lt)+1),re),Ue={x:Ve.x+(Te+1-(lt+1)/2)*pe,y:Ve.y+(Se+1-(qe+1)/2)*ht};return Ue}};return t.nodes().layoutPositions(this,r,ut),this};var NF={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function FD(r){this.options=_r({},NF,r)}FD.prototype.run=function(){var r=this.options,e=r,t=r.cy,n=e.eles,i=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,o=n.nodes().not(":parent");e.sort&&(o=o.sort(e.sort));for(var a=$s(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),s={x:a.x1+a.w/2,y:a.y1+a.h/2},u=e.sweep===void 0?2*Math.PI-2*Math.PI/o.length:e.sweep,l=u/Math.max(1,o.length-1),c,f=0,h=0;h<o.length;h++){var d=o[h],v=d.layoutDimensions(e),y=v.w,w=v.h;f=Math.max(f,y,w)}if(qt(e.radius)?c=e.radius:o.length<=1?c=0:c=Math.min(a.h,a.w)/2-f,o.length>1&&e.avoidOverlap){f*=1.75;var b=Math.cos(l)-Math.cos(0),p=Math.sin(l)-Math.sin(0),_=Math.sqrt(f*f/(b*b+p*p));c=Math.max(_,c)}var O=function(R,T){var A=e.startAngle+T*l*(i?1:-1),M=c*Math.cos(A),N=c*Math.sin(A),j={x:s.x+M,y:s.y+N};return j};return n.nodes().layoutPositions(this,e,O),this};var jF={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function BD(r){this.options=_r({},jF,r)}BD.prototype.run=function(){for(var r=this.options,e=r,t=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,n=r.cy,i=e.eles,o=i.nodes().not(":parent"),a=$s(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),s={x:a.x1+a.w/2,y:a.y1+a.h/2},u=[],l=0,c=0;c<o.length;c++){var f=o[c],h=void 0;h=e.concentric(f),u.push({value:h,node:f}),f._private.scratch.concentric=h}o.updateStyle();for(var d=0;d<o.length;d++){var v=o[d],y=v.layoutDimensions(e);l=Math.max(l,y.w,y.h)}u.sort(function(tt,ht){return ht.value-tt.value});for(var w=e.levelWidth(o),b=[[]],p=b[0],_=0;_<u.length;_++){var O=u[_];if(p.length>0){var P=Math.abs(p[0].value-O.value);P>=w&&(p=[],b.push(p))}p.push(O)}var R=l+e.minNodeSpacing;if(!e.avoidOverlap){var T=b.length>0&&b[0].length>1,A=Math.min(a.w,a.h)/2-R,M=A/(b.length+T?1:0);R=Math.min(R,M)}for(var N=0,j=0;j<b.length;j++){var B=b[j],q=e.sweep===void 0?2*Math.PI-2*Math.PI/B.length:e.sweep,W=B.dTheta=q/Math.max(1,B.length-1);if(B.length>1&&e.avoidOverlap){var J=Math.cos(W)-Math.cos(0),te=Math.sin(W)-Math.sin(0),re=Math.sqrt(R*R/(J*J+te*te));N=Math.max(re,N)}B.r=N,N+=R}if(e.equidistant){for(var ee=0,fe=0,he=0;he<b.length;he++){var se=b[he],me=se.r-fe;ee=Math.max(ee,me)}fe=0;for(var De=0;De<b.length;De++){var Le=b[De];De===0&&(fe=Le.r),Le.r=fe,fe+=ee}}for(var Ie={},qe=0;qe<b.length;qe++)for(var Ge=b[qe],Me=Ge.dTheta,Pe=Ge.r,de=0;de<Ge.length;de++){var Oe=Ge[de],Ae=e.startAngle+(t?1:-1)*Me*de,Ve={x:s.x+Pe*Math.cos(Ae),y:s.y+Pe*Math.sin(Ae)};Ie[Oe.node.id()]=Ve}return i.nodes().layoutPositions(this,e,function(tt){var ht=tt.id();return Ie[ht]}),this};var kw,FF={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,t){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function lb(r){this.options=_r({},FF,r),this.options.layout=this;var e=this.options.eles.nodes(),t=this.options.eles.edges(),n=t.filter(function(i){var o=i.source().data("id"),a=i.target().data("id"),s=e.some(function(l){return l.data("id")===o}),u=e.some(function(l){return l.data("id")===a});return!s||!u});this.options.eles=this.options.eles.not(n)}lb.prototype.run=function(){var r=this.options,e=r.cy,t=this;t.stopped=!1,(r.animate===!0||r.animate===!1)&&t.emit({type:"layoutstart",layout:t}),r.debug===!0?kw=!0:kw=!1;var n=BF(e,t,r);kw&&zF(n),r.randomize&&qF(n);var i=Th(),o=function(){GF(n,e,r),r.fit===!0&&e.fit(r.padding)},a=function(h){return!(t.stopped||h>=r.numIter||(VF(n,r),n.temperature=n.temperature*r.coolingFactor,n.temperature<r.minTemp))},s=function(){if(r.animate===!0||r.animate===!1)o(),t.one("layoutstop",r.stop),t.emit({type:"layoutstop",layout:t});else{var h=r.eles.nodes(),d=zD(n,r,h);h.layoutPositions(t,r,d)}},u=0,l=!0;if(r.animate===!0){var c=function(){for(var h=0;l&&h<r.refresh;)l=a(u),u++,h++;if(!l)j2(n,r),s();else{var d=Th();d-i>=r.animationThreshold&&o(),T0(c)}};c()}else{for(;l;)l=a(u),u++;j2(n,r),s()}return this};lb.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};lb.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var BF=function(e,t,n){for(var i=n.eles.edges(),o=n.eles.nodes(),a=$s(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),s={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:o.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:i.size(),temperature:n.initialTemp,clientWidth:a.w,clientHeight:a.h,boundingBox:a},u=n.eles.components(),l={},c=0;c<u.length;c++)for(var f=u[c],h=0;h<f.length;h++){var d=f[h];l[d.id()]=c}for(var c=0;c<s.nodeSize;c++){var v=o[c],y=v.layoutDimensions(n),w={};w.isLocked=v.locked(),w.id=v.data("id"),w.parentId=v.data("parent"),w.cmptId=l[v.id()],w.children=[],w.positionX=v.position("x"),w.positionY=v.position("y"),w.offsetX=0,w.offsetY=0,w.height=y.w,w.width=y.h,w.maxX=w.positionX+w.width/2,w.minX=w.positionX-w.width/2,w.maxY=w.positionY+w.height/2,w.minY=w.positionY-w.height/2,w.padLeft=parseFloat(v.style("padding")),w.padRight=parseFloat(v.style("padding")),w.padTop=parseFloat(v.style("padding")),w.padBottom=parseFloat(v.style("padding")),w.nodeRepulsion=$i(n.nodeRepulsion)?n.nodeRepulsion(v):n.nodeRepulsion,s.layoutNodes.push(w),s.idToIndex[w.id]=c}for(var b=[],p=0,_=-1,O=[],c=0;c<s.nodeSize;c++){var v=s.layoutNodes[c],P=v.parentId;P!=null?s.layoutNodes[s.idToIndex[P]].children.push(v.id):(b[++_]=v.id,O.push(v.id))}for(s.graphSet.push(O);p<=_;){var R=b[p++],T=s.idToIndex[R],d=s.layoutNodes[T],A=d.children;if(A.length>0){s.graphSet.push(A);for(var c=0;c<A.length;c++)b[++_]=A[c]}}for(var c=0;c<s.graphSet.length;c++)for(var M=s.graphSet[c],h=0;h<M.length;h++){var N=s.idToIndex[M[h]];s.indexToGraph[N]=c}for(var c=0;c<s.edgeSize;c++){var j=i[c],B={};B.id=j.data("id"),B.sourceId=j.data("source"),B.targetId=j.data("target");var q=$i(n.idealEdgeLength)?n.idealEdgeLength(j):n.idealEdgeLength,W=$i(n.edgeElasticity)?n.edgeElasticity(j):n.edgeElasticity,J=s.idToIndex[B.sourceId],te=s.idToIndex[B.targetId],re=s.indexToGraph[J],ee=s.indexToGraph[te];if(re!=ee){for(var fe=UF(B.sourceId,B.targetId,s),he=s.graphSet[fe],se=0,w=s.layoutNodes[J];he.indexOf(w.id)===-1;)w=s.layoutNodes[s.idToIndex[w.parentId]],se++;for(w=s.layoutNodes[te];he.indexOf(w.id)===-1;)w=s.layoutNodes[s.idToIndex[w.parentId]],se++;q*=se*n.nestingFactor}B.idealLength=q,B.elasticity=W,s.layoutEdges.push(B)}return s},UF=function(e,t,n){var i=UD(e,t,0,n);return 2>i.count?0:i.graph},UD=function(e,t,n,i){var o=i.graphSet[n];if(-1<o.indexOf(e)&&-1<o.indexOf(t))return{count:2,graph:n};for(var a=0,s=0;s<o.length;s++){var u=o[s],l=i.idToIndex[u],c=i.layoutNodes[l].children;if(c.length!==0){var f=i.indexToGraph[i.idToIndex[c[0]]],h=UD(e,t,f,i);if(h.count!==0)if(h.count===1){if(a++,a===2)break}else return h}}return{count:a,graph:n}},zF,qF=function(e,t){for(var n=e.clientWidth,i=e.clientHeight,o=0;o<e.nodeSize;o++){var a=e.layoutNodes[o];a.children.length===0&&!a.isLocked&&(a.positionX=Math.random()*n,a.positionY=Math.random()*i)}},zD=function(e,t,n){var i=e.boundingBox,o={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return t.boundingBox&&(n.forEach(function(a){var s=e.layoutNodes[e.idToIndex[a.data("id")]];o.x1=Math.min(o.x1,s.positionX),o.x2=Math.max(o.x2,s.positionX),o.y1=Math.min(o.y1,s.positionY),o.y2=Math.max(o.y2,s.positionY)}),o.w=o.x2-o.x1,o.h=o.y2-o.y1),function(a,s){var u=e.layoutNodes[e.idToIndex[a.data("id")]];if(t.boundingBox){var l=(u.positionX-o.x1)/o.w,c=(u.positionY-o.y1)/o.h;return{x:i.x1+l*i.w,y:i.y1+c*i.h}}else return{x:u.positionX,y:u.positionY}}},GF=function(e,t,n){var i=n.layout,o=n.eles.nodes(),a=zD(e,n,o);o.positions(a),e.ready!==!0&&(e.ready=!0,i.one("layoutready",n.ready),i.emit({type:"layoutready",layout:this}))},VF=function(e,t,n){WF(e,t),YF(e),XF(e,t),KF(e),ZF(e)},WF=function(e,t){for(var n=0;n<e.graphSet.length;n++)for(var i=e.graphSet[n],o=i.length,a=0;a<o;a++)for(var s=e.layoutNodes[e.idToIndex[i[a]]],u=a+1;u<o;u++){var l=e.layoutNodes[e.idToIndex[i[u]]];HF(s,l,e,t)}},N2=function(e){return-1+2*e*Math.random()},HF=function(e,t,n,i){var o=e.cmptId,a=t.cmptId;if(!(o!==a&&!n.isCompound)){var s=t.positionX-e.positionX,u=t.positionY-e.positionY,l=1;s===0&&u===0&&(s=N2(l),u=N2(l));var c=$F(e,t,s,u);if(c>0)var f=i.nodeOverlap*c,h=Math.sqrt(s*s+u*u),d=f*s/h,v=f*u/h;else var y=D0(e,s,u),w=D0(t,-1*s,-1*u),b=w.x-y.x,p=w.y-y.y,_=b*b+p*p,h=Math.sqrt(_),f=(e.nodeRepulsion+t.nodeRepulsion)/_,d=f*b/h,v=f*p/h;e.isLocked||(e.offsetX-=d,e.offsetY-=v),t.isLocked||(t.offsetX+=d,t.offsetY+=v)}},$F=function(e,t,n,i){if(n>0)var o=e.maxX-t.minX;else var o=t.maxX-e.minX;if(i>0)var a=e.maxY-t.minY;else var a=t.maxY-e.minY;return o>=0&&a>=0?Math.sqrt(o*o+a*a):0},D0=function(e,t,n){var i=e.positionX,o=e.positionY,a=e.height||1,s=e.width||1,u=n/t,l=a/s,c={};return t===0&&0<n||t===0&&0>n?(c.x=i,c.y=o+a/2,c):0<t&&-1*l<=u&&u<=l?(c.x=i+s/2,c.y=o+s*n/2/t,c):0>t&&-1*l<=u&&u<=l?(c.x=i-s/2,c.y=o-s*n/2/t,c):0<n&&(u<=-1*l||u>=l)?(c.x=i+a*t/2/n,c.y=o+a/2,c):(0>n&&(u<=-1*l||u>=l)&&(c.x=i-a*t/2/n,c.y=o-a/2),c)},YF=function(e,t){for(var n=0;n<e.edgeSize;n++){var i=e.layoutEdges[n],o=e.idToIndex[i.sourceId],a=e.layoutNodes[o],s=e.idToIndex[i.targetId],u=e.layoutNodes[s],l=u.positionX-a.positionX,c=u.positionY-a.positionY;if(!(l===0&&c===0)){var f=D0(a,l,c),h=D0(u,-1*l,-1*c),d=h.x-f.x,v=h.y-f.y,y=Math.sqrt(d*d+v*v),w=Math.pow(i.idealLength-y,2)/i.elasticity;if(y!==0)var b=w*d/y,p=w*v/y;else var b=0,p=0;a.isLocked||(a.offsetX+=b,a.offsetY+=p),u.isLocked||(u.offsetX-=b,u.offsetY-=p)}}},XF=function(e,t){if(t.gravity!==0)for(var n=1,i=0;i<e.graphSet.length;i++){var o=e.graphSet[i],a=o.length;if(i===0)var s=e.clientHeight/2,u=e.clientWidth/2;else var l=e.layoutNodes[e.idToIndex[o[0]]],c=e.layoutNodes[e.idToIndex[l.parentId]],s=c.positionX,u=c.positionY;for(var f=0;f<a;f++){var h=e.layoutNodes[e.idToIndex[o[f]]];if(!h.isLocked){var d=s-h.positionX,v=u-h.positionY,y=Math.sqrt(d*d+v*v);if(y>n){var w=t.gravity*d/y,b=t.gravity*v/y;h.offsetX+=w,h.offsetY+=b}}}}},KF=function(e,t){var n=[],i=0,o=-1;for(n.push.apply(n,e.graphSet[0]),o+=e.graphSet[0].length;i<=o;){var a=n[i++],s=e.idToIndex[a],u=e.layoutNodes[s],l=u.children;if(0<l.length&&!u.isLocked){for(var c=u.offsetX,f=u.offsetY,h=0;h<l.length;h++){var d=e.layoutNodes[e.idToIndex[l[h]]];d.offsetX+=c,d.offsetY+=f,n[++o]=l[h]}u.offsetX=0,u.offsetY=0}}},ZF=function(e,t){for(var n=0;n<e.nodeSize;n++){var i=e.layoutNodes[n];0<i.children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var i=e.layoutNodes[n];if(!(0<i.children.length||i.isLocked)){var o=QF(i.offsetX,i.offsetY,e.temperature);i.positionX+=o.x,i.positionY+=o.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,qD(i,e)}}for(var n=0;n<e.nodeSize;n++){var i=e.layoutNodes[n];0<i.children.length&&!i.isLocked&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}},QF=function(e,t,n){var i=Math.sqrt(e*e+t*t);if(i>n)var o={x:n*e/i,y:n*t/i};else var o={x:e,y:t};return o},qD=function(e,t){var n=e.parentId;if(n!=null){var i=t.layoutNodes[t.idToIndex[n]],o=!1;if((i.maxX==null||e.maxX+i.padRight>i.maxX)&&(i.maxX=e.maxX+i.padRight,o=!0),(i.minX==null||e.minX-i.padLeft<i.minX)&&(i.minX=e.minX-i.padLeft,o=!0),(i.maxY==null||e.maxY+i.padBottom>i.maxY)&&(i.maxY=e.maxY+i.padBottom,o=!0),(i.minY==null||e.minY-i.padTop<i.minY)&&(i.minY=e.minY-i.padTop,o=!0),o)return qD(i,t)}},j2=function(e,t){for(var n=e.layoutNodes,i=[],o=0;o<n.length;o++){var a=n[o],s=a.cmptId,u=i[s]=i[s]||[];u.push(a)}for(var l=0,o=0;o<i.length;o++){var c=i[o];if(c){c.x1=1/0,c.x2=-1/0,c.y1=1/0,c.y2=-1/0;for(var f=0;f<c.length;f++){var h=c[f];c.x1=Math.min(c.x1,h.positionX-h.width/2),c.x2=Math.max(c.x2,h.positionX+h.width/2),c.y1=Math.min(c.y1,h.positionY-h.height/2),c.y2=Math.max(c.y2,h.positionY+h.height/2)}c.w=c.x2-c.x1,c.h=c.y2-c.y1,l+=c.w*c.h}}i.sort(function(p,_){return _.w*_.h-p.w*p.h});for(var d=0,v=0,y=0,w=0,b=Math.sqrt(l)*e.clientWidth/e.clientHeight,o=0;o<i.length;o++){var c=i[o];if(c){for(var f=0;f<c.length;f++){var h=c[f];h.isLocked||(h.positionX+=d-c.x1,h.positionY+=v-c.y1)}d+=c.w+t.componentSpacing,y+=c.w+t.componentSpacing,w=Math.max(w,c.h),y>b&&(v+=w+t.componentSpacing,d=0,y=0,w=0)}}},JF={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function GD(r){this.options=_r({},JF,r)}GD.prototype.run=function(){var r=this.options,e=r,t=r.cy,n=e.eles,i=n.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));var o=$s(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()});if(o.h===0||o.w===0)n.nodes().layoutPositions(this,e,function(De){return{x:o.x1,y:o.y1}});else{var a=i.size(),s=Math.sqrt(a*o.h/o.w),u=Math.round(s),l=Math.round(o.w/o.h*s),c=function(Le){if(Le==null)return Math.min(u,l);var Ie=Math.min(u,l);Ie==u?u=Le:l=Le},f=function(Le){if(Le==null)return Math.max(u,l);var Ie=Math.max(u,l);Ie==u?u=Le:l=Le},h=e.rows,d=e.cols!=null?e.cols:e.columns;if(h!=null&&d!=null)u=h,l=d;else if(h!=null&&d==null)u=h,l=Math.ceil(a/u);else if(h==null&&d!=null)l=d,u=Math.ceil(a/l);else if(l*u>a){var v=c(),y=f();(v-1)*y>=a?c(v-1):(y-1)*v>=a&&f(y-1)}else for(;l*u<a;){var w=c(),b=f();(b+1)*w>=a?f(b+1):c(w+1)}var p=o.w/l,_=o.h/u;if(e.condense&&(p=0,_=0),e.avoidOverlap)for(var O=0;O<i.length;O++){var P=i[O],R=P._private.position;(R.x==null||R.y==null)&&(R.x=0,R.y=0);var T=P.layoutDimensions(e),A=e.avoidOverlapPadding,M=T.w+A,N=T.h+A;p=Math.max(p,M),_=Math.max(_,N)}for(var j={},B=function(Le,Ie){return!!j["c-"+Le+"-"+Ie]},q=function(Le,Ie){j["c-"+Le+"-"+Ie]=!0},W=0,J=0,te=function(){J++,J>=l&&(J=0,W++)},re={},ee=0;ee<i.length;ee++){var fe=i[ee],he=e.position(fe);if(he&&(he.row!==void 0||he.col!==void 0)){var se={row:he.row,col:he.col};if(se.col===void 0)for(se.col=0;B(se.row,se.col);)se.col++;else if(se.row===void 0)for(se.row=0;B(se.row,se.col);)se.row++;re[fe.id()]=se,q(se.row,se.col)}}var me=function(Le,Ie){var qe,Ge;if(Le.locked()||Le.isParent())return!1;var Me=re[Le.id()];if(Me)qe=Me.col*p+p/2+o.x1,Ge=Me.row*_+_/2+o.y1;else{for(;B(W,J);)te();qe=J*p+p/2+o.x1,Ge=W*_+_/2+o.y1,q(W,J),te()}return{x:qe,y:Ge}};i.layoutPositions(this,e,me)}return this};var eB={ready:function(){},stop:function(){}};function kS(r){this.options=_r({},eB,r)}kS.prototype.run=function(){var r=this.options,e=r.eles,t=this;return r.cy,t.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),t.one("layoutready",r.ready),t.emit("layoutready"),t.one("layoutstop",r.stop),t.emit("layoutstop"),this};kS.prototype.stop=function(){return this};var tB={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function VD(r){this.options=_r({},tB,r)}VD.prototype.run=function(){var r=this.options,e=r.eles,t=e.nodes(),n=$i(r.positions);function i(o){if(r.positions==null)return S5(o.position());if(n)return r.positions(o);var a=r.positions[o._private.data.id];return a??null}return t.layoutPositions(this,r,function(o,a){var s=i(o);return o.locked()||s==null?!1:s}),this};var rB={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function WD(r){this.options=_r({},rB,r)}WD.prototype.run=function(){var r=this.options,e=r.cy,t=r.eles,n=$s(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),i=function(a,s){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}};return t.nodes().layoutPositions(this,r,i),this};var nB=[{name:"breadthfirst",impl:jD},{name:"circle",impl:FD},{name:"concentric",impl:BD},{name:"cose",impl:lb},{name:"grid",impl:GD},{name:"null",impl:kS},{name:"preset",impl:VD},{name:"random",impl:WD}];function HD(r){this.options=r,this.notifications=0}var F2=function(){},B2=function(){throw new Error("A headless instance can not render images")};HD.prototype={recalculateRenderedStyle:F2,notify:function(){this.notifications++},init:F2,isHeadless:function(){return!0},png:B2,jpg:B2};var DS={};DS.arrowShapeWidth=.3;DS.registerArrowShapes=function(){var r=this.arrowShapes={},e=this,t=function(l,c,f,h,d,v,y){var w=d.x-f/2-y,b=d.x+f/2+y,p=d.y-f/2-y,_=d.y+f/2+y,O=w<=l&&l<=b&&p<=c&&c<=_;return O},n=function(l,c,f,h,d){var v=l*Math.cos(h)-c*Math.sin(h),y=l*Math.sin(h)+c*Math.cos(h),w=v*f,b=y*f,p=w+d.x,_=b+d.y;return{x:p,y:_}},i=function(l,c,f,h){for(var d=[],v=0;v<l.length;v+=2){var y=l[v],w=l[v+1];d.push(n(y,w,c,f,h))}return d},o=function(l){for(var c=[],f=0;f<l.length;f++){var h=l[f];c.push(h.x,h.y)}return c},a=function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").pfValue*2},s=function(l,c){vr(c)&&(c=r[c]),r[l]=_r({name:l,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(h,d,v,y,w,b){var p=o(i(this.points,v+2*b,y,w)),_=Ws(h,d,p);return _},roughCollide:t,draw:function(h,d,v,y){var w=i(this.points,d,v,y);e.arrowShapeImpl("polygon")(h,w)},spacing:function(h){return 0},gap:a},c)};s("none",{collide:C0,roughCollide:C0,draw:bS,spacing:tC,gap:tC}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:r.triangle.points,controlPoint:[0,-.15],roughCollide:t,draw:function(l,c,f,h,d){var v=i(this.points,c,f,h),y=this.controlPoint,w=n(y[0],y[1],c,f,h);e.arrowShapeImpl(this.name)(l,v,w)},gap:function(l){return a(l)*.8}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(l,c,f,h,d,v,y){var w=o(i(this.points,f+2*y,h,d)),b=o(i(this.pointsTee,f+2*y,h,d)),p=Ws(l,c,w)||Ws(l,c,b);return p},draw:function(l,c,f,h,d){var v=i(this.points,c,f,h),y=i(this.pointsTee,c,f,h);e.arrowShapeImpl(this.name)(l,v,y)}}),s("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(l,c,f,h,d,v,y){var w=d,b=Math.pow(w.x-l,2)+Math.pow(w.y-c,2)<=Math.pow((f+2*y)*this.radius,2),p=o(i(this.points,f+2*y,h,d));return Ws(l,c,p)||b},draw:function(l,c,f,h,d){var v=i(this.pointsTr,c,f,h);e.arrowShapeImpl(this.name)(l,v,h.x,h.y,this.radius*c)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(l,c){var f=this.baseCrossLinePts.slice(),h=c/l,d=3,v=5;return f[d]=f[d]-h,f[v]=f[v]-h,f},collide:function(l,c,f,h,d,v,y){var w=o(i(this.points,f+2*y,h,d)),b=o(i(this.crossLinePts(f,v),f+2*y,h,d)),p=Ws(l,c,w)||Ws(l,c,b);return p},draw:function(l,c,f,h,d){var v=i(this.points,c,f,h),y=i(this.crossLinePts(c,d),c,f,h);e.arrowShapeImpl(this.name)(l,v,y)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(l){return a(l)*.525}}),s("circle",{radius:.15,collide:function(l,c,f,h,d,v,y){var w=d,b=Math.pow(w.x-l,2)+Math.pow(w.y-c,2)<=Math.pow((f+2*y)*this.radius,2);return b},draw:function(l,c,f,h,d){e.arrowShapeImpl(this.name)(l,h.x,h.y,this.radius*c)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(l){return 1},gap:function(l){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(l){return .95*l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}})};var dp={};dp.projectIntoViewport=function(r,e){var t=this.cy,n=this.findContainerClientCoords(),i=n[0],o=n[1],a=n[4],s=t.pan(),u=t.zoom(),l=((r-i)/a-s.x)/u,c=((e-o)/a-s.y)/u;return[l,c]};dp.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var r=this.container,e=r.getBoundingClientRect(),t=this.cy.window().getComputedStyle(r),n=function(b){return parseFloat(t.getPropertyValue(b))},i={left:n("padding-left"),right:n("padding-right"),top:n("padding-top"),bottom:n("padding-bottom")},o={left:n("border-left-width"),right:n("border-right-width"),top:n("border-top-width"),bottom:n("border-bottom-width")},a=r.clientWidth,s=r.clientHeight,u=i.left+i.right,l=i.top+i.bottom,c=o.left+o.right,f=e.width/(a+c),h=a-u,d=s-l,v=e.left+i.left+o.left,y=e.top+i.top+o.top;return this.containerBB=[v,y,h,d,f]};dp.invalidateContainerClientCoordsCache=function(){this.containerBB=null};dp.findNearestElement=function(r,e,t,n){return this.findNearestElements(r,e,t,n)[0]};dp.findNearestElements=function(r,e,t,n){var i=this,o=this,a=o.getCachedZSortedEles(),s=[],u=o.cy.zoom(),l=o.cy.hasCompoundNodes(),c=(n?24:8)/u,f=(n?8:2)/u,h=(n?8:2)/u,d=1/0,v,y;t&&(a=a.interactive);function w(T,A){if(T.isNode()){if(y)return;y=T,s.push(T)}if(T.isEdge()&&(A==null||A<d))if(v){if(v.pstyle("z-compound-depth").value===T.pstyle("z-compound-depth").value&&v.pstyle("z-compound-depth").value===T.pstyle("z-compound-depth").value){for(var M=0;M<s.length;M++)if(s[M].isEdge()){s[M]=T,v=T,d=A??d;break}}}else s.push(T),v=T,d=A??d}function b(T){var A=T.outerWidth()+2*f,M=T.outerHeight()+2*f,N=A/2,j=M/2,B=T.position(),q=T.pstyle("corner-radius").value==="auto"?"auto":T.pstyle("corner-radius").pfValue,W=T._private.rscratch;if(B.x-N<=r&&r<=B.x+N&&B.y-j<=e&&e<=B.y+j){var J=o.nodeShapes[i.getNodeShape(T)];if(J.checkPoint(r,e,0,A,M,B.x,B.y,q,W))return w(T,0),!0}}function p(T){var A=T._private,M=A.rscratch,N=T.pstyle("width").pfValue,j=T.pstyle("arrow-scale").value,B=N/2+c,q=B*B,W=B*2,ee=A.source,fe=A.target,J;if(M.edgeType==="segments"||M.edgeType==="straight"||M.edgeType==="haystack"){for(var te=M.allpts,re=0;re+3<te.length;re+=2)if(F5(r,e,te[re],te[re+1],te[re+2],te[re+3],W)&&q>(J=G5(r,e,te[re],te[re+1],te[re+2],te[re+3])))return w(T,J),!0}else if(M.edgeType==="bezier"||M.edgeType==="multibezier"||M.edgeType==="self"||M.edgeType==="compound"){for(var te=M.allpts,re=0;re+5<M.allpts.length;re+=4)if(B5(r,e,te[re],te[re+1],te[re+2],te[re+3],te[re+4],te[re+5],W)&&q>(J=q5(r,e,te[re],te[re+1],te[re+2],te[re+3],te[re+4],te[re+5])))return w(T,J),!0}for(var ee=ee||A.source,fe=fe||A.target,he=i.getArrowWidth(N,j),se=[{name:"source",x:M.arrowStartX,y:M.arrowStartY,angle:M.srcArrowAngle},{name:"target",x:M.arrowEndX,y:M.arrowEndY,angle:M.tgtArrowAngle},{name:"mid-source",x:M.midX,y:M.midY,angle:M.midsrcArrowAngle},{name:"mid-target",x:M.midX,y:M.midY,angle:M.midtgtArrowAngle}],re=0;re<se.length;re++){var me=se[re],De=o.arrowShapes[T.pstyle(me.name+"-arrow-shape").value],Le=T.pstyle("width").pfValue;if(De.roughCollide(r,e,he,me.angle,{x:me.x,y:me.y},Le,c)&&De.collide(r,e,he,me.angle,{x:me.x,y:me.y},Le,c))return w(T),!0}l&&s.length>0&&(b(ee),b(fe))}function _(T,A,M){return ul(T,A,M)}function O(T,A){var M=T._private,N=h,j;A?j=A+"-":j="",T.boundingBox();var B=M.labelBounds[A||"main"],q=T.pstyle(j+"label").value,W=T.pstyle("text-events").strValue==="yes";if(!(!W||!q)){var J=_(M.rscratch,"labelX",A),te=_(M.rscratch,"labelY",A),re=_(M.rscratch,"labelAngle",A),ee=T.pstyle(j+"text-margin-x").pfValue,fe=T.pstyle(j+"text-margin-y").pfValue,he=B.x1-N-ee,se=B.x2+N-ee,me=B.y1-N-fe,De=B.y2+N-fe;if(re){var Le=Math.cos(re),Ie=Math.sin(re),qe=function(Ve,tt){return Ve=Ve-J,tt=tt-te,{x:Ve*Le-tt*Ie+J,y:Ve*Ie+tt*Le+te}},Ge=qe(he,me),Me=qe(he,De),Pe=qe(se,me),de=qe(se,De),Oe=[Ge.x+ee,Ge.y+fe,Pe.x+ee,Pe.y+fe,de.x+ee,de.y+fe,Me.x+ee,Me.y+fe];if(Ws(r,e,Oe))return w(T),!0}else if(Mg(B,r,e))return w(T),!0}}for(var P=a.length-1;P>=0;P--){var R=a[P];R.isNode()?b(R)||O(R):p(R)||O(R)||O(R,"source")||O(R,"target")}return s};dp.getAllInBox=function(r,e,t,n){var i=this.getCachedZSortedEles().interactive,o=[],a=Math.min(r,t),s=Math.max(r,t),u=Math.min(e,n),l=Math.max(e,n);r=a,t=s,e=u,n=l;for(var c=$s({x1:r,y1:e,x2:t,y2:n}),f=0;f<i.length;f++){var h=i[f];if(h.isNode()){var d=h,v=d.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});ES(c,v)&&!eD(v,c)&&o.push(d)}else{var y=h,w=y._private,b=w.rscratch;if(b.startX!=null&&b.startY!=null&&!Mg(c,b.startX,b.startY)||b.endX!=null&&b.endY!=null&&!Mg(c,b.endX,b.endY))continue;if(b.edgeType==="bezier"||b.edgeType==="multibezier"||b.edgeType==="self"||b.edgeType==="compound"||b.edgeType==="segments"||b.edgeType==="haystack"){for(var p=w.rstyle.bezierPts||w.rstyle.linePts||w.rstyle.haystackPts,_=!0,O=0;O<p.length;O++)if(!j5(c,p[O])){_=!1;break}_&&o.push(y)}else(b.edgeType==="haystack"||b.edgeType==="straight")&&o.push(y)}}return o};var M0={};M0.calculateArrowAngles=function(r){var e=r._private.rscratch,t=e.edgeType==="haystack",n=e.edgeType==="bezier",i=e.edgeType==="multibezier",o=e.edgeType==="segments",a=e.edgeType==="compound",s=e.edgeType==="self",u,l,c,f,h,d,b,p;if(t?(c=e.haystackPts[0],f=e.haystackPts[1],h=e.haystackPts[2],d=e.haystackPts[3]):(c=e.arrowStartX,f=e.arrowStartY,h=e.arrowEndX,d=e.arrowEndY),b=e.midX,p=e.midY,o)u=c-e.segpts[0],l=f-e.segpts[1];else if(i||a||s||n){var v=e.allpts,y=aa(v[0],v[2],v[4],.1),w=aa(v[1],v[3],v[5],.1);u=c-y,l=f-w}else u=c-b,l=f-p;e.srcArrowAngle=Wm(u,l);var b=e.midX,p=e.midY;if(t&&(b=(c+h)/2,p=(f+d)/2),u=h-c,l=d-f,o){var v=e.allpts;if(v.length/2%2===0){var _=v.length/2,O=_-2;u=v[_]-v[O],l=v[_+1]-v[O+1]}else if(e.isRound)u=e.midVector[1],l=-e.midVector[0];else{var _=v.length/2-1,O=_-2;u=v[_]-v[O],l=v[_+1]-v[O+1]}}else if(i||a||s){var v=e.allpts,P=e.ctrlpts,R,T,A,M;if(P.length/2%2===0){var N=v.length/2-1,j=N+2,B=j+2;R=aa(v[N],v[j],v[B],0),T=aa(v[N+1],v[j+1],v[B+1],0),A=aa(v[N],v[j],v[B],1e-4),M=aa(v[N+1],v[j+1],v[B+1],1e-4)}else{var j=v.length/2-1,N=j-2,B=j+2;R=aa(v[N],v[j],v[B],.4999),T=aa(v[N+1],v[j+1],v[B+1],.4999),A=aa(v[N],v[j],v[B],.5),M=aa(v[N+1],v[j+1],v[B+1],.5)}u=A-R,l=M-T}if(e.midtgtArrowAngle=Wm(u,l),e.midDispX=u,e.midDispY=l,u*=-1,l*=-1,o){var v=e.allpts;if(v.length/2%2!==0){if(!e.isRound){var _=v.length/2-1,q=_+2;u=-(v[q]-v[_]),l=-(v[q+1]-v[_+1])}}}if(e.midsrcArrowAngle=Wm(u,l),o)u=h-e.segpts[e.segpts.length-2],l=d-e.segpts[e.segpts.length-1];else if(i||a||s||n){var v=e.allpts,W=v.length,y=aa(v[W-6],v[W-4],v[W-2],.9),w=aa(v[W-5],v[W-3],v[W-1],.9);u=h-y,l=d-w}else u=h-b,l=d-p;e.tgtArrowAngle=Wm(u,l)};M0.getArrowWidth=M0.getArrowHeight=function(r,e){var t=this.arrowWidthCache=this.arrowWidthCache||{},n=t[r+", "+e];return n||(n=Math.max(Math.pow(r*13.37,.9),29)*e,t[r+", "+e]=n,n)};var Vx,Wx,uf={},sl={},U2,z2,Jv,b0,gh,Yv,Qv,af,hg,Jm,$D,YD,Hx,$x,q2,G2=function(e,t,n){n.x=t.x-e.x,n.y=t.y-e.y,n.len=Math.sqrt(n.x*n.x+n.y*n.y),n.nx=n.x/n.len,n.ny=n.y/n.len,n.ang=Math.atan2(n.ny,n.nx)},iB=function(e,t){t.x=e.x*-1,t.y=e.y*-1,t.nx=e.nx*-1,t.ny=e.ny*-1,t.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang},oB=function(e,t,n,i,o){if(e!==q2?G2(t,e,uf):iB(sl,uf),G2(t,n,sl),U2=uf.nx*sl.ny-uf.ny*sl.nx,z2=uf.nx*sl.nx-uf.ny*-sl.ny,gh=Math.asin(Math.max(-1,Math.min(1,U2))),Math.abs(gh)<1e-6){Vx=t.x,Wx=t.y,Qv=hg=0;return}Jv=1,b0=!1,z2<0?gh<0?gh=Math.PI+gh:(gh=Math.PI-gh,Jv=-1,b0=!0):gh>0&&(Jv=-1,b0=!0),t.radius!==void 0?hg=t.radius:hg=i,Yv=gh/2,Jm=Math.min(uf.len/2,sl.len/2),o?(af=Math.abs(Math.cos(Yv)*hg/Math.sin(Yv)),af>Jm?(af=Jm,Qv=Math.abs(af*Math.sin(Yv)/Math.cos(Yv))):Qv=hg):(af=Math.min(Jm,hg),Qv=Math.abs(af*Math.sin(Yv)/Math.cos(Yv))),Hx=t.x+sl.nx*af,$x=t.y+sl.ny*af,Vx=Hx-sl.ny*Qv*Jv,Wx=$x+sl.nx*Qv*Jv,$D=t.x+uf.nx*af,YD=t.y+uf.ny*af,q2=t};function XD(r,e){e.radius===0?r.lineTo(e.cx,e.cy):r.arc(e.cx,e.cy,e.radius,e.startAngle,e.endAngle,e.counterClockwise)}function MS(r,e,t,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return n===0||e.radius===0?{cx:e.x,cy:e.y,radius:0,startX:e.x,startY:e.y,stopX:e.x,stopY:e.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(oB(r,e,t,n,i),{cx:Vx,cy:Wx,radius:Qv,startX:$D,startY:YD,stopX:Hx,stopY:$x,startAngle:uf.ang+Math.PI/2*Jv,endAngle:sl.ang-Math.PI/2*Jv,counterClockwise:b0})}var nm=.01,aB=Math.sqrt(2*nm),Qa={};Qa.findMidptPtsEtc=function(r,e){var t=e.posPts,n=e.intersectionPts,i=e.vectorNormInverse,o,a=r.pstyle("source-endpoint"),s=r.pstyle("target-endpoint"),u=a.units!=null&&s.units!=null,l=function(P,R,T,A){var M=A-R,N=T-P,j=Math.sqrt(N*N+M*M);return{x:-M/j,y:N/j}},c=r.pstyle("edge-distances").value;switch(c){case"node-position":o=t;break;case"intersection":o=n;break;case"endpoints":{if(u){var f=this.manualEndptToPx(r.source()[0],a),h=sa(f,2),d=h[0],v=h[1],y=this.manualEndptToPx(r.target()[0],s),w=sa(y,2),b=w[0],p=w[1],_={x1:d,y1:v,x2:b,y2:p};i=l(d,v,b,p),o=_}else Bn("Edge ".concat(r.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),o=n;break}}return{midptPts:o,vectorNormInverse:i}};Qa.findHaystackPoints=function(r){for(var e=0;e<r.length;e++){var t=r[e],n=t._private,i=n.rscratch;if(!i.haystack){var o=Math.random()*2*Math.PI;i.source={x:Math.cos(o),y:Math.sin(o)},o=Math.random()*2*Math.PI,i.target={x:Math.cos(o),y:Math.sin(o)}}var a=n.source,s=n.target,u=a.position(),l=s.position(),c=a.width(),f=s.width(),h=a.height(),d=s.height(),v=t.pstyle("haystack-radius").value,y=v/2;i.haystackPts=i.allpts=[i.source.x*c*y+u.x,i.source.y*h*y+u.y,i.target.x*f*y+l.x,i.target.y*d*y+l.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType="haystack",i.haystack=!0,this.storeEdgeProjections(t),this.calculateArrowAngles(t),this.recalculateEdgeLabelProjections(t),this.calculateLabelAngles(t)}};Qa.findSegmentsPoints=function(r,e){var t=r._private.rscratch,n=r.pstyle("segment-weights"),i=r.pstyle("segment-distances"),o=r.pstyle("segment-radii"),a=r.pstyle("radius-type"),s=Math.min(n.pfValue.length,i.pfValue.length),u=o.pfValue[o.pfValue.length-1],l=a.pfValue[a.pfValue.length-1];t.edgeType="segments",t.segpts=[],t.radii=[],t.isArcRadius=[];for(var c=0;c<s;c++){var f=n.pfValue[c],h=i.pfValue[c],d=1-f,v=f,y=this.findMidptPtsEtc(r,e),w=y.midptPts,b=y.vectorNormInverse,p={x:w.x1*d+w.x2*v,y:w.y1*d+w.y2*v};t.segpts.push(p.x+b.x*h,p.y+b.y*h),t.radii.push(o.pfValue[c]!==void 0?o.pfValue[c]:u),t.isArcRadius.push((a.pfValue[c]!==void 0?a.pfValue[c]:l)==="arc-radius")}};Qa.findLoopPoints=function(r,e,t,n){var i=r._private.rscratch,o=e.dirCounts,a=e.srcPos,s=r.pstyle("control-point-distances"),u=s?s.pfValue[0]:void 0,l=r.pstyle("loop-direction").pfValue,c=r.pstyle("loop-sweep").pfValue,f=r.pstyle("control-point-step-size").pfValue;i.edgeType="self";var h=t,d=f;n&&(h=0,d=u);var v=l-Math.PI/2,y=v-c/2,w=v+c/2,b=l+"_"+c;h=o[b]===void 0?o[b]=0:++o[b],i.ctrlpts=[a.x+Math.cos(y)*1.4*d*(h/3+1),a.y+Math.sin(y)*1.4*d*(h/3+1),a.x+Math.cos(w)*1.4*d*(h/3+1),a.y+Math.sin(w)*1.4*d*(h/3+1)]};Qa.findCompoundLoopPoints=function(r,e,t,n){var i=r._private.rscratch;i.edgeType="compound";var o=e.srcPos,a=e.tgtPos,s=e.srcW,u=e.srcH,l=e.tgtW,c=e.tgtH,f=r.pstyle("control-point-step-size").pfValue,h=r.pstyle("control-point-distances"),d=h?h.pfValue[0]:void 0,v=t,y=f;n&&(v=0,y=d);var w=50,b={x:o.x-s/2,y:o.y-u/2},p={x:a.x-l/2,y:a.y-c/2},_={x:Math.min(b.x,p.x),y:Math.min(b.y,p.y)},O=.5,P=Math.max(O,Math.log(s*nm)),R=Math.max(O,Math.log(l*nm));i.ctrlpts=[_.x,_.y-(1+Math.pow(w,1.12)/100)*y*(v/3+1)*P,_.x-(1+Math.pow(w,1.12)/100)*y*(v/3+1)*R,_.y]};Qa.findStraightEdgePoints=function(r){r._private.rscratch.edgeType="straight"};Qa.findBezierPoints=function(r,e,t,n,i){var o=r._private.rscratch,a=r.pstyle("control-point-step-size").pfValue,s=r.pstyle("control-point-distances"),u=r.pstyle("control-point-weights"),l=s&&u?Math.min(s.value.length,u.value.length):1,c=s?s.pfValue[0]:void 0,f=u.value[0],h=n;o.edgeType=h?"multibezier":"bezier",o.ctrlpts=[];for(var d=0;d<l;d++){var v=(.5-e.eles.length/2+t)*a*(i?-1:1),y=void 0,w=Qk(v);h&&(c=s?s.pfValue[d]:a,f=u.value[d]),n?y=c:y=c!==void 0?w*c:void 0;var b=y!==void 0?y:v,p=1-f,_=f,O=this.findMidptPtsEtc(r,e),P=O.midptPts,R=O.vectorNormInverse,T={x:P.x1*p+P.x2*_,y:P.y1*p+P.y2*_};o.ctrlpts.push(T.x+R.x*b,T.y+R.y*b)}};Qa.findTaxiPoints=function(r,e){var t=r._private.rscratch;t.edgeType="segments";var n="vertical",i="horizontal",o="leftward",a="rightward",s="downward",u="upward",l="auto",c=e.posPts,f=e.srcW,h=e.srcH,d=e.tgtW,v=e.tgtH,y=r.pstyle("edge-distances").value,w=y!=="node-position",b=r.pstyle("taxi-direction").value,p=b,_=r.pstyle("taxi-turn"),O=_.units==="%",P=_.pfValue,R=P<0,T=r.pstyle("taxi-turn-min-distance").pfValue,A=w?(f+d)/2:0,M=w?(h+v)/2:0,N=c.x2-c.x1,j=c.y2-c.y1,B=function(dt,Dt){return dt>0?Math.max(dt-Dt,0):Math.min(dt+Dt,0)},q=B(N,A),W=B(j,M),J=!1;p===l?b=Math.abs(q)>Math.abs(W)?i:n:p===u||p===s?(b=n,J=!0):(p===o||p===a)&&(b=i,J=!0);var te=b===n,re=te?W:q,ee=te?j:N,fe=Qk(ee),he=!1;!(J&&(O||R))&&(p===s&&ee<0||p===u&&ee>0||p===o&&ee>0||p===a&&ee<0)&&(fe*=-1,re=fe*Math.abs(re),he=!0);var se;if(O){var me=P<0?1+P:P;se=me*re}else{var De=P<0?re:0;se=De+P*fe}var Le=function(dt){return Math.abs(dt)<T||Math.abs(dt)>=Math.abs(re)},Ie=Le(se),qe=Le(Math.abs(re)-Math.abs(se)),Ge=Ie||qe;if(Ge&&!he)if(te){var Me=Math.abs(ee)<=h/2,Pe=Math.abs(N)<=d/2;if(Me){var de=(c.x1+c.x2)/2,Oe=c.y1,Ae=c.y2;t.segpts=[de,Oe,de,Ae]}else if(Pe){var Ve=(c.y1+c.y2)/2,tt=c.x1,ht=c.x2;t.segpts=[tt,Ve,ht,Ve]}else t.segpts=[c.x1,c.y2]}else{var xt=Math.abs(ee)<=f/2,ut=Math.abs(j)<=v/2;if(xt){var H=(c.y1+c.y2)/2,X=c.x1,ne=c.x2;t.segpts=[X,H,ne,H]}else if(ut){var Se=(c.x1+c.x2)/2,Te=c.y1,Ne=c.y2;t.segpts=[Se,Te,Se,Ne]}else t.segpts=[c.x2,c.y1]}else if(te){var et=c.y1+se+(w?h/2*fe:0),wt=c.x1,lt=c.x2;t.segpts=[wt,et,lt,et]}else{var pe=c.x1+se+(w?f/2*fe:0),Ue=c.y1,nt=c.y2;t.segpts=[pe,Ue,pe,nt]}if(t.isRound){var Je=r.pstyle("taxi-radius").value,at=r.pstyle("radius-type").value[0]==="arc-radius";t.radii=new Array(t.segpts.length/2).fill(Je),t.isArcRadius=new Array(t.segpts.length/2).fill(at)}};Qa.tryToCorrectInvalidPoints=function(r,e){var t=r._private.rscratch;if(t.edgeType==="bezier"){var n=e.srcPos,i=e.tgtPos,o=e.srcW,a=e.srcH,s=e.tgtW,u=e.tgtH,l=e.srcShape,c=e.tgtShape,f=e.srcCornerRadius,h=e.tgtCornerRadius,d=e.srcRs,v=e.tgtRs,y=!qt(t.startX)||!qt(t.startY),w=!qt(t.arrowStartX)||!qt(t.arrowStartY),b=!qt(t.endX)||!qt(t.endY),p=!qt(t.arrowEndX)||!qt(t.arrowEndY),_=3,O=this.getArrowWidth(r.pstyle("width").pfValue,r.pstyle("arrow-scale").value)*this.arrowShapeWidth,P=_*O,R=op({x:t.ctrlpts[0],y:t.ctrlpts[1]},{x:t.startX,y:t.startY}),T=R<P,A=op({x:t.ctrlpts[0],y:t.ctrlpts[1]},{x:t.endX,y:t.endY}),M=A<P,N=!1;if(y||w||T){N=!0;var j={x:t.ctrlpts[0]-n.x,y:t.ctrlpts[1]-n.y},B=Math.sqrt(j.x*j.x+j.y*j.y),q={x:j.x/B,y:j.y/B},W=Math.max(o,a),J={x:t.ctrlpts[0]+q.x*2*W,y:t.ctrlpts[1]+q.y*2*W},te=l.intersectLine(n.x,n.y,o,a,J.x,J.y,0,f,d);T?(t.ctrlpts[0]=t.ctrlpts[0]+q.x*(P-R),t.ctrlpts[1]=t.ctrlpts[1]+q.y*(P-R)):(t.ctrlpts[0]=te[0]+q.x*P,t.ctrlpts[1]=te[1]+q.y*P)}if(b||p||M){N=!0;var re={x:t.ctrlpts[0]-i.x,y:t.ctrlpts[1]-i.y},ee=Math.sqrt(re.x*re.x+re.y*re.y),fe={x:re.x/ee,y:re.y/ee},he=Math.max(o,a),se={x:t.ctrlpts[0]+fe.x*2*he,y:t.ctrlpts[1]+fe.y*2*he},me=c.intersectLine(i.x,i.y,s,u,se.x,se.y,0,h,v);M?(t.ctrlpts[0]=t.ctrlpts[0]+fe.x*(P-A),t.ctrlpts[1]=t.ctrlpts[1]+fe.y*(P-A)):(t.ctrlpts[0]=me[0]+fe.x*P,t.ctrlpts[1]=me[1]+fe.y*P)}N&&this.findEndpoints(r)}};Qa.storeAllpts=function(r){var e=r._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var t=0;t+1<e.ctrlpts.length;t+=2)e.allpts.push(e.ctrlpts[t],e.ctrlpts[t+1]),t+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[t]+e.ctrlpts[t+2])/2,(e.ctrlpts[t+1]+e.ctrlpts[t+3])/2);e.allpts.push(e.endX,e.endY);var n,i;e.ctrlpts.length/2%2===0?(n=e.allpts.length/2-1,e.midX=e.allpts[n],e.midY=e.allpts[n+1]):(n=e.allpts.length/2-3,i=.5,e.midX=aa(e.allpts[n],e.allpts[n+2],e.allpts[n+4],i),e.midY=aa(e.allpts[n+1],e.allpts[n+3],e.allpts[n+5],i))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments"){if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.isRound){e.roundCorners=[];for(var o=2;o+3<e.allpts.length;o+=2){var a=e.radii[o/2-1],s=e.isArcRadius[o/2-1];e.roundCorners.push(MS({x:e.allpts[o-2],y:e.allpts[o-1]},{x:e.allpts[o],y:e.allpts[o+1],radius:a},{x:e.allpts[o+2],y:e.allpts[o+3]},a,s))}}if(e.segpts.length%4===0){var u=e.segpts.length/2,l=u-2;e.midX=(e.segpts[l]+e.segpts[u])/2,e.midY=(e.segpts[l+1]+e.segpts[u+1])/2}else{var c=e.segpts.length/2-1;if(!e.isRound)e.midX=e.segpts[c],e.midY=e.segpts[c+1];else{var f={x:e.segpts[c],y:e.segpts[c+1]},h=e.roundCorners[c/2];if(h.radius===0){var d={x:e.segpts[c+2],y:e.segpts[c+3]};e.midX=f.x,e.midY=f.y,e.midVector=[f.y-d.y,d.x-f.x]}else{var v=[f.x-h.cx,f.y-h.cy],y=h.radius/Math.sqrt(Math.pow(v[0],2)+Math.pow(v[1],2));v=v.map(function(w){return w*y}),e.midX=h.cx+v[0],e.midY=h.cy+v[1],e.midVector=v}}}}};Qa.checkForInvalidEdgeWarning=function(r){var e=r[0]._private.rscratch;e.nodesOverlap||qt(e.startX)&&qt(e.startY)&&qt(e.endX)&&qt(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,Bn("Edge `"+r.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};Qa.findEdgeControlPoints=function(r){var e=this;if(!(!r||r.length===0)){for(var t=this,n=t.cy,i=n.hasCompoundNodes(),o=new Eh,a=function(M,N){return[].concat(kk(M),[N?1:0]).join("-")},s=[],u=[],l=0;l<r.length;l++){var c=r[l],f=c._private,h=c.pstyle("curve-style").value;if(!(c.removed()||!c.takesUpSpace())){if(h==="haystack"){u.push(c);continue}var d=h==="unbundled-bezier"||h.endsWith("segments")||h==="straight"||h==="straight-triangle"||h.endsWith("taxi"),v=h==="unbundled-bezier"||h==="bezier",y=f.source,w=f.target,b=y.poolIndex(),p=w.poolIndex(),_=[b,p].sort(),O=a(_,d),P=o.get(O);P==null&&(P={eles:[]},s.push({pairId:_,edgeIsUnbundled:d}),o.set(O,P)),P.eles.push(c),d&&(P.hasUnbundled=!0),v&&(P.hasBezier=!0)}}for(var R=function(){var M=s[T],N=M.pairId,j=M.edgeIsUnbundled,B=a(N,j),q=o.get(B),W;if(!q.hasUnbundled){var J=q.eles[0].parallelEdges().filter(function(at){return at.isBundledBezier()});_S(q.eles),J.forEach(function(at){return q.eles.push(at)}),q.eles.sort(function(at,kt){return at.poolIndex()-kt.poolIndex()})}var te=q.eles[0],re=te.source(),ee=te.target();if(re.poolIndex()>ee.poolIndex()){var fe=re;re=ee,ee=fe}var he=q.srcPos=re.position(),se=q.tgtPos=ee.position(),me=q.srcW=re.outerWidth(),De=q.srcH=re.outerHeight(),Le=q.tgtW=ee.outerWidth(),Ie=q.tgtH=ee.outerHeight(),qe=q.srcShape=t.nodeShapes[e.getNodeShape(re)],Ge=q.tgtShape=t.nodeShapes[e.getNodeShape(ee)],Me=q.srcCornerRadius=re.pstyle("corner-radius").value==="auto"?"auto":re.pstyle("corner-radius").pfValue,Pe=q.tgtCornerRadius=ee.pstyle("corner-radius").value==="auto"?"auto":ee.pstyle("corner-radius").pfValue,de=q.tgtRs=ee._private.rscratch,Oe=q.srcRs=re._private.rscratch;q.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var Ae=0;Ae<q.eles.length;Ae++){var Ve=q.eles[Ae],tt=Ve[0]._private.rscratch,ht=Ve.pstyle("curve-style").value,xt=ht==="unbundled-bezier"||ht.endsWith("segments")||ht.endsWith("taxi"),ut=!re.same(Ve.source());if(!q.calculatedIntersection&&re!==ee&&(q.hasBezier||q.hasUnbundled)){q.calculatedIntersection=!0;var H=qe.intersectLine(he.x,he.y,me,De,se.x,se.y,0,Me,Oe),X=q.srcIntn=H,ne=Ge.intersectLine(se.x,se.y,Le,Ie,he.x,he.y,0,Pe,de),Se=q.tgtIntn=ne,Te=q.intersectionPts={x1:H[0],x2:ne[0],y1:H[1],y2:ne[1]},Ne=q.posPts={x1:he.x,x2:se.x,y1:he.y,y2:se.y},et=Math.abs(ne[1]-H[1]),wt=Math.abs(ne[0]-H[0]),lt=Math.sqrt(wt*wt+et*et);qt(lt)&&lt>=aB||(lt=Math.sqrt(Math.max(wt*wt,nm)+Math.max(et*et,nm)));var pe=q.vector={x:wt,y:et},Ue=q.vectorNorm={x:pe.x/lt,y:pe.y/lt},nt={x:-Ue.y,y:Ue.x};q.nodesOverlap=!qt(lt)||Ge.checkPoint(H[0],H[1],0,Le,Ie,se.x,se.y,Pe,de)||qe.checkPoint(ne[0],ne[1],0,me,De,he.x,he.y,Me,Oe),q.vectorNormInverse=nt,W={nodesOverlap:q.nodesOverlap,dirCounts:q.dirCounts,calculatedIntersection:!0,hasBezier:q.hasBezier,hasUnbundled:q.hasUnbundled,eles:q.eles,srcPos:se,srcRs:de,tgtPos:he,tgtRs:Oe,srcW:Le,srcH:Ie,tgtW:me,tgtH:De,srcIntn:Se,tgtIntn:X,srcShape:Ge,tgtShape:qe,posPts:{x1:Ne.x2,y1:Ne.y2,x2:Ne.x1,y2:Ne.y1},intersectionPts:{x1:Te.x2,y1:Te.y2,x2:Te.x1,y2:Te.y1},vector:{x:-pe.x,y:-pe.y},vectorNorm:{x:-Ue.x,y:-Ue.y},vectorNormInverse:{x:-nt.x,y:-nt.y}}}var Je=ut?W:q;tt.nodesOverlap=Je.nodesOverlap,tt.srcIntn=Je.srcIntn,tt.tgtIntn=Je.tgtIntn,tt.isRound=ht.startsWith("round"),i&&(re.isParent()||re.isChild()||ee.isParent()||ee.isChild())&&(re.parents().anySame(ee)||ee.parents().anySame(re)||re.same(ee)&&re.isParent())?e.findCompoundLoopPoints(Ve,Je,Ae,xt):re===ee?e.findLoopPoints(Ve,Je,Ae,xt):ht.endsWith("segments")?e.findSegmentsPoints(Ve,Je):ht.endsWith("taxi")?e.findTaxiPoints(Ve,Je):ht==="straight"||!xt&&q.eles.length%2===1&&Ae===Math.floor(q.eles.length/2)?e.findStraightEdgePoints(Ve):e.findBezierPoints(Ve,Je,Ae,xt,ut),e.findEndpoints(Ve),e.tryToCorrectInvalidPoints(Ve,Je),e.checkForInvalidEdgeWarning(Ve),e.storeAllpts(Ve),e.storeEdgeProjections(Ve),e.calculateArrowAngles(Ve),e.recalculateEdgeLabelProjections(Ve),e.calculateLabelAngles(Ve)}},T=0;T<s.length;T++)R();this.findHaystackPoints(u)}};function KD(r){var e=[];if(r!=null){for(var t=0;t<r.length;t+=2){var n=r[t],i=r[t+1];e.push({x:n,y:i})}return e}}Qa.getSegmentPoints=function(r){var e=r[0]._private.rscratch;this.recalculateRenderedStyle(r);var t=e.edgeType;if(t==="segments")return KD(e.segpts)};Qa.getControlPoints=function(r){var e=r[0]._private.rscratch;this.recalculateRenderedStyle(r);var t=e.edgeType;if(t==="bezier"||t==="multibezier"||t==="self"||t==="compound")return KD(e.ctrlpts)};Qa.getEdgeMidpoint=function(r){var e=r[0]._private.rscratch;return this.recalculateRenderedStyle(r),{x:e.midX,y:e.midY}};var vm={};vm.manualEndptToPx=function(r,e){var t=this,n=r.position(),i=r.outerWidth(),o=r.outerHeight(),a=r._private.rscratch;if(e.value.length===2){var s=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(s[0]=s[0]*i),e.units[1]==="%"&&(s[1]=s[1]*o),s[0]+=n.x,s[1]+=n.y,s}else{var u=e.pfValue[0];u=-Math.PI/2+u;var l=2*Math.max(i,o),c=[n.x+Math.cos(u)*l,n.y+Math.sin(u)*l];return t.nodeShapes[this.getNodeShape(r)].intersectLine(n.x,n.y,i,o,c[0],c[1],0,r.pstyle("corner-radius").value==="auto"?"auto":r.pstyle("corner-radius").pfValue,a)}};vm.findEndpoints=function(r){var e=this,t,n=r.source()[0],i=r.target()[0],o=n.position(),a=i.position(),s=r.pstyle("target-arrow-shape").value,u=r.pstyle("source-arrow-shape").value,l=r.pstyle("target-distance-from-node").pfValue,c=r.pstyle("source-distance-from-node").pfValue,f=n._private.rscratch,h=i._private.rscratch,d=r.pstyle("curve-style").value,v=r._private.rscratch,y=v.edgeType,w=d==="taxi",b=y==="self"||y==="compound",p=y==="bezier"||y==="multibezier"||b,_=y!=="bezier",O=y==="straight"||y==="segments",P=y==="segments",R=p||_||O,T=b||w,A=r.pstyle("source-endpoint"),M=T?"outside-to-node":A.value,N=n.pstyle("corner-radius").value==="auto"?"auto":n.pstyle("corner-radius").pfValue,j=r.pstyle("target-endpoint"),B=T?"outside-to-node":j.value,q=i.pstyle("corner-radius").value==="auto"?"auto":i.pstyle("corner-radius").pfValue;v.srcManEndpt=A,v.tgtManEndpt=j;var W,J,te,re;if(p){var ee=[v.ctrlpts[0],v.ctrlpts[1]],fe=_?[v.ctrlpts[v.ctrlpts.length-2],v.ctrlpts[v.ctrlpts.length-1]]:ee;W=fe,J=ee}else if(O){var he=P?v.segpts.slice(0,2):[a.x,a.y],se=P?v.segpts.slice(v.segpts.length-2):[o.x,o.y];W=se,J=he}if(B==="inside-to-node")t=[a.x,a.y];else if(j.units)t=this.manualEndptToPx(i,j);else if(B==="outside-to-line")t=v.tgtIntn;else if(B==="outside-to-node"||B==="outside-to-node-or-label"?te=W:(B==="outside-to-line"||B==="outside-to-line-or-label")&&(te=[o.x,o.y]),t=e.nodeShapes[this.getNodeShape(i)].intersectLine(a.x,a.y,i.outerWidth(),i.outerHeight(),te[0],te[1],0,q,h),B==="outside-to-node-or-label"||B==="outside-to-line-or-label"){var me=i._private.rscratch,De=me.labelWidth,Le=me.labelHeight,Ie=me.labelX,qe=me.labelY,Ge=De/2,Me=Le/2,Pe=i.pstyle("text-valign").value;Pe==="top"?qe-=Me:Pe==="bottom"&&(qe+=Me);var de=i.pstyle("text-halign").value;de==="left"?Ie-=Ge:de==="right"&&(Ie+=Ge);var Oe=Qy(te[0],te[1],[Ie-Ge,qe-Me,Ie+Ge,qe-Me,Ie+Ge,qe+Me,Ie-Ge,qe+Me],a.x,a.y);if(Oe.length>0){var Ae=o,Ve=Kv(Ae,wg(t)),tt=Kv(Ae,wg(Oe)),ht=Ve;if(tt<Ve&&(t=Oe,ht=tt),Oe.length>2){var xt=Kv(Ae,{x:Oe[2],y:Oe[3]});xt<ht&&(t=[Oe[2],Oe[3]])}}}var ut=Hm(t,W,e.arrowShapes[s].spacing(r)+l),H=Hm(t,W,e.arrowShapes[s].gap(r)+l);if(v.endX=H[0],v.endY=H[1],v.arrowEndX=ut[0],v.arrowEndY=ut[1],M==="inside-to-node")t=[o.x,o.y];else if(A.units)t=this.manualEndptToPx(n,A);else if(M==="outside-to-line")t=v.srcIntn;else if(M==="outside-to-node"||M==="outside-to-node-or-label"?re=J:(M==="outside-to-line"||M==="outside-to-line-or-label")&&(re=[a.x,a.y]),t=e.nodeShapes[this.getNodeShape(n)].intersectLine(o.x,o.y,n.outerWidth(),n.outerHeight(),re[0],re[1],0,N,f),M==="outside-to-node-or-label"||M==="outside-to-line-or-label"){var X=n._private.rscratch,ne=X.labelWidth,Se=X.labelHeight,Te=X.labelX,Ne=X.labelY,et=ne/2,wt=Se/2,lt=n.pstyle("text-valign").value;lt==="top"?Ne-=wt:lt==="bottom"&&(Ne+=wt);var pe=n.pstyle("text-halign").value;pe==="left"?Te-=et:pe==="right"&&(Te+=et);var Ue=Qy(re[0],re[1],[Te-et,Ne-wt,Te+et,Ne-wt,Te+et,Ne+wt,Te-et,Ne+wt],o.x,o.y);if(Ue.length>0){var nt=a,Je=Kv(nt,wg(t)),at=Kv(nt,wg(Ue)),kt=Je;if(at<Je&&(t=[Ue[0],Ue[1]],kt=at),Ue.length>2){var dt=Kv(nt,{x:Ue[2],y:Ue[3]});dt<kt&&(t=[Ue[2],Ue[3]])}}}var Dt=Hm(t,J,e.arrowShapes[u].spacing(r)+c),Xt=Hm(t,J,e.arrowShapes[u].gap(r)+c);v.startX=Xt[0],v.startY=Xt[1],v.arrowStartX=Dt[0],v.arrowStartY=Dt[1],R&&(!qt(v.startX)||!qt(v.startY)||!qt(v.endX)||!qt(v.endY)?v.badLine=!0:v.badLine=!1)};vm.getSourceEndpoint=function(r){var e=r[0]._private.rscratch;switch(this.recalculateRenderedStyle(r),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}};vm.getTargetEndpoint=function(r){var e=r[0]._private.rscratch;switch(this.recalculateRenderedStyle(r),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var LS={};function sB(r,e,t){for(var n=function(l,c,f,h){return aa(l,c,f,h)},i=e._private,o=i.rstyle.bezierPts,a=0;a<r.bezierProjPcts.length;a++){var s=r.bezierProjPcts[a];o.push({x:n(t[0],t[2],t[4],s),y:n(t[1],t[3],t[5],s)})}}LS.storeEdgeProjections=function(r){var e=r._private,t=e.rscratch,n=t.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,n==="multibezier"||n==="bezier"||n==="self"||n==="compound"){e.rstyle.bezierPts=[];for(var i=0;i+5<t.allpts.length;i+=4)sB(this,r,t.allpts.slice(i,i+6))}else if(n==="segments")for(var o=e.rstyle.linePts=[],i=0;i+1<t.allpts.length;i+=2)o.push({x:t.allpts[i],y:t.allpts[i+1]});else if(n==="haystack"){var a=t.haystackPts;e.rstyle.haystackPts=[{x:a[0],y:a[1]},{x:a[2],y:a[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(r.pstyle("width").pfValue,r.pstyle("arrow-scale").value)*this.arrowShapeWidth};LS.recalculateEdgeProjections=function(r){this.findEdgeControlPoints(r)};var vf={};vf.recalculateNodeLabelProjection=function(r){var e=r.pstyle("label").strValue;if(!Fd(e)){var t,n,i=r._private,o=r.width(),a=r.height(),s=r.padding(),u=r.position(),l=r.pstyle("text-halign").strValue,c=r.pstyle("text-valign").strValue,f=i.rscratch,h=i.rstyle;switch(l){case"left":t=u.x-o/2-s;break;case"right":t=u.x+o/2+s;break;default:t=u.x}switch(c){case"top":n=u.y-a/2-s;break;case"bottom":n=u.y+a/2+s;break;default:n=u.y}f.labelX=t,f.labelY=n,h.labelX=t,h.labelY=n,this.calculateLabelAngles(r),this.applyLabelDimensions(r)}};var ZD=function(e,t){var n=Math.atan(t/e);return e===0&&n<0&&(n=n*-1),n},QD=function(e,t){var n=t.x-e.x,i=t.y-e.y;return ZD(n,i)},uB=function(e,t,n,i){var o=Zy(0,i-.001,1),a=Zy(0,i+.001,1),s=Tg(e,t,n,o),u=Tg(e,t,n,a);return QD(s,u)};vf.recalculateEdgeLabelProjections=function(r){var e,t=r._private,n=t.rscratch,i=this,o={mid:r.pstyle("label").strValue,source:r.pstyle("source-label").strValue,target:r.pstyle("target-label").strValue};if(o.mid||o.source||o.target){e={x:n.midX,y:n.midY};var a=function(f,h,d){bh(t.rscratch,f,h,d),bh(t.rstyle,f,h,d)};a("labelX",null,e.x),a("labelY",null,e.y);var s=ZD(n.midDispX,n.midDispY);a("labelAutoAngle",null,s);var u=function(){if(u.cache)return u.cache;for(var f=[],h=0;h+5<n.allpts.length;h+=4){var d={x:n.allpts[h],y:n.allpts[h+1]},v={x:n.allpts[h+2],y:n.allpts[h+3]},y={x:n.allpts[h+4],y:n.allpts[h+5]};f.push({p0:d,p1:v,p2:y,startDist:0,length:0,segments:[]})}var w=t.rstyle.bezierPts,b=i.bezierProjPcts.length;function p(T,A,M,N,j){var B=op(A,M),q=T.segments[T.segments.length-1],W={p0:A,p1:M,t0:N,t1:j,startDist:q?q.startDist+q.length:0,length:B};T.segments.push(W),T.length+=B}for(var _=0;_<f.length;_++){var O=f[_],P=f[_-1];P&&(O.startDist=P.startDist+P.length),p(O,O.p0,w[_*b],0,i.bezierProjPcts[0]);for(var R=0;R<b-1;R++)p(O,w[_*b+R],w[_*b+R+1],i.bezierProjPcts[R],i.bezierProjPcts[R+1]);p(O,w[_*b+b-1],O.p2,i.bezierProjPcts[b-1],1)}return u.cache=f},l=function(f){var h,d=f==="source";if(o[f]){var v=r.pstyle(f+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var y=u(),w,b=0,p=0,_=0;_<y.length;_++){for(var O=y[d?_:y.length-1-_],P=0;P<O.segments.length;P++){var R=O.segments[d?P:O.segments.length-1-P],T=_===y.length-1&&P===O.segments.length-1;if(b=p,p+=R.length,p>=v||T){w={cp:O,segment:R};break}}if(w)break}var A=w.cp,M=w.segment,N=(v-b)/M.length,j=M.t1-M.t0,B=d?M.t0+j*N:M.t1-j*N;B=Zy(0,B,1),e=Tg(A.p0,A.p1,A.p2,B),h=uB(A.p0,A.p1,A.p2,B);break}case"straight":case"segments":case"haystack":{for(var q=0,W,J,te,re,ee=n.allpts.length,fe=0;fe+3<ee&&(d?(te={x:n.allpts[fe],y:n.allpts[fe+1]},re={x:n.allpts[fe+2],y:n.allpts[fe+3]}):(te={x:n.allpts[ee-2-fe],y:n.allpts[ee-1-fe]},re={x:n.allpts[ee-4-fe],y:n.allpts[ee-3-fe]}),W=op(te,re),J=q,q+=W,!(q>=v));fe+=2);var he=v-J,se=he/W;se=Zy(0,se,1),e=k5(te,re,se),h=QD(te,re);break}}a("labelX",f,e.x),a("labelY",f,e.y),a("labelAutoAngle",f,h)}};l("source"),l("target"),this.applyLabelDimensions(r)}};vf.applyLabelDimensions=function(r){this.applyPrefixedLabelDimensions(r),r.isEdge()&&(this.applyPrefixedLabelDimensions(r,"source"),this.applyPrefixedLabelDimensions(r,"target"))};vf.applyPrefixedLabelDimensions=function(r,e){var t=r._private,n=this.getLabelText(r,e),i=Bd(n,r._private.labelDimsKey);if(ul(t.rscratch,"prefixedLabelDimsKey",e)!==i){bh(t.rscratch,"prefixedLabelDimsKey",e,i);var o=this.calculateLabelDimensions(r,n),a=r.pstyle("line-height").pfValue,s=r.pstyle("text-wrap").strValue,u=ul(t.rscratch,"labelWrapCachedLines",e)||[],l=s!=="wrap"?1:Math.max(u.length,1),c=o.height/l,f=c*a,h=o.width,d=o.height+(l-1)*(a-1)*c;bh(t.rstyle,"labelWidth",e,h),bh(t.rscratch,"labelWidth",e,h),bh(t.rstyle,"labelHeight",e,d),bh(t.rscratch,"labelHeight",e,d),bh(t.rscratch,"labelLineHeight",e,f)}};vf.getLabelText=function(r,e){var t=r._private,n=e?e+"-":"",i=r.pstyle(n+"label").strValue,o=r.pstyle("text-transform").value,a=function(De,Le){return Le?(bh(t.rscratch,De,e,Le),Le):ul(t.rscratch,De,e)};if(!i)return"";o=="none"||(o=="uppercase"?i=i.toUpperCase():o=="lowercase"&&(i=i.toLowerCase()));var s=r.pstyle("text-wrap").value;if(s==="wrap"){var u=a("labelKey");if(u!=null&&a("labelWrapKey")===u)return a("labelWrapCachedText");for(var l="",c=i.split(`
`),f=r.pstyle("text-max-width").pfValue,h=r.pstyle("text-overflow-wrap").value,d=h==="anywhere",v=[],y=/[\s\u200b]+|$/g,w=0;w<c.length;w++){var b=c[w],p=this.calculateLabelDimensions(r,b),_=p.width;if(d){var O=b.split("").join(l);b=O}if(_>f){var P=b.matchAll(y),R="",T=0,A=cc(P),M;try{for(A.s();!(M=A.n()).done;){var N=M.value,j=N[0],B=b.substring(T,N.index);T=N.index+j.length;var q=R.length===0?B:R+B+j,W=this.calculateLabelDimensions(r,q),J=W.width;J<=f?R+=B+j:(R&&v.push(R),R=B+j)}}catch(me){A.e(me)}finally{A.f()}R.match(/^[\s\u200b]+$/)||v.push(R)}else v.push(b)}a("labelWrapCachedLines",v),i=a("labelWrapCachedText",v.join(`
`)),a("labelWrapKey",u)}else if(s==="ellipsis"){var te=r.pstyle("text-max-width").pfValue,re="",ee="",fe=!1;if(this.calculateLabelDimensions(r,i).width<te)return i;for(var he=0;he<i.length;he++){var se=this.calculateLabelDimensions(r,re+i[he]+ee).width;if(se>te)break;re+=i[he],he===i.length-1&&(fe=!0)}return fe||(re+=ee),re}return i};vf.getLabelJustification=function(r){var e=r.pstyle("text-justification").strValue,t=r.pstyle("text-halign").strValue;if(e==="auto")if(r.isNode())switch(t){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};vf.calculateLabelDimensions=function(r,e){var t=this,n=t.cy.window(),i=n.document,o=0,a=r.pstyle("font-style").strValue,s=r.pstyle("font-size").pfValue,u=r.pstyle("font-family").strValue,l=r.pstyle("font-weight").strValue,c=this.labelCalcCanvas,f=this.labelCalcCanvasContext;if(!c){c=this.labelCalcCanvas=i.createElement("canvas"),f=this.labelCalcCanvasContext=c.getContext("2d");var h=c.style;h.position="absolute",h.left="-9999px",h.top="-9999px",h.zIndex="-1",h.visibility="hidden",h.pointerEvents="none"}f.font="".concat(a," ").concat(l," ").concat(s,"px ").concat(u);for(var d=0,v=0,y=e.split(`
`),w=0;w<y.length;w++){var b=y[w],p=f.measureText(b),_=Math.ceil(p.width),O=s;d=Math.max(_,d),v+=O}return d+=o,v+=o,{width:d,height:v}};vf.calculateLabelAngle=function(r,e){var t=r._private,n=t.rscratch,i=r.isEdge(),o=e?e+"-":"",a=r.pstyle(o+"text-rotation"),s=a.strValue;return s==="none"?0:i&&s==="autorotate"?n.labelAutoAngle:s==="autorotate"?0:a.pfValue};vf.calculateLabelAngles=function(r){var e=this,t=r.isEdge(),n=r._private,i=n.rscratch;i.labelAngle=e.calculateLabelAngle(r),t&&(i.sourceLabelAngle=e.calculateLabelAngle(r,"source"),i.targetLabelAngle=e.calculateLabelAngle(r,"target"))};var JD={},V2=28,W2=!1;JD.getNodeShape=function(r){var e=this,t=r.pstyle("shape").value;if(t==="cutrectangle"&&(r.width()<V2||r.height()<V2))return W2||(Bn("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),W2=!0),"rectangle";if(r.isParent())return t==="rectangle"||t==="roundrectangle"||t==="round-rectangle"||t==="cutrectangle"||t==="cut-rectangle"||t==="barrel"?t:"rectangle";if(t==="polygon"){var n=r.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(n).name}return t};var cb={};cb.registerCalculationListeners=function(){var r=this.cy,e=r.collection(),t=this,n=function(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(a),s)for(var u=0;u<a.length;u++){var l=a[u],c=l._private,f=c.rstyle;f.clean=!1,f.cleanConnected=!1}};t.binder(r).on("bounds.* dirty.*",function(a){var s=a.target;n(s)}).on("style.* background.*",function(a){var s=a.target;n(s,!1)});var i=function(a){if(a){var s=t.onUpdateEleCalcsFns;e.cleanStyle();for(var u=0;u<e.length;u++){var l=e[u],c=l._private.rstyle;l.isNode()&&!c.cleanConnected&&(n(l.connectedEdges()),c.cleanConnected=!0)}if(s)for(var f=0;f<s.length;f++){var h=s[f];h(a,e)}t.recalculateRenderedStyle(e),e=r.collection()}};t.flushRenderedStyleQueue=function(){i(!0)},t.beforeRender(i,t.beforeRenderPriorities.eleCalcs)};cb.onUpdateEleCalcs=function(r){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(r)};cb.recalculateRenderedStyle=function(r,e){var t=function(O){return O._private.rstyle.cleanConnected};if(r.length!==0){var n=[],i=[];if(!this.destroyed){e===void 0&&(e=!0);for(var o=0;o<r.length;o++){var a=r[o],s=a._private,u=s.rstyle;a.isEdge()&&(!t(a.source())||!t(a.target()))&&(u.clean=!1),a.isEdge()&&a.isBundledBezier()&&a.parallelEdges().some(function(_){return!_._private.rstyle.clean&&_.isBundledBezier()})&&(u.clean=!1),!(e&&u.clean||a.removed())&&a.pstyle("display").value!=="none"&&(s.group==="nodes"?i.push(a):n.push(a),u.clean=!0)}for(var l=0;l<i.length;l++){var c=i[l],f=c._private,h=f.rstyle,d=c.position();this.recalculateNodeLabelProjection(c),h.nodeX=d.x,h.nodeY=d.y,h.nodeW=c.pstyle("width").pfValue,h.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var v=0;v<n.length;v++){var y=n[v],w=y._private,b=w.rstyle,p=w.rscratch;b.srcX=p.arrowStartX,b.srcY=p.arrowStartY,b.tgtX=p.arrowEndX,b.tgtY=p.arrowEndY,b.midX=p.midX,b.midY=p.midY,b.labelAngle=p.labelAngle,b.sourceLabelAngle=p.sourceLabelAngle,b.targetLabelAngle=p.targetLabelAngle}}}};var fb={};fb.updateCachedGrabbedEles=function(){var r=this.cachedZSortedEles;if(r){r.drag=[],r.nondrag=[];for(var e=[],t=0;t<r.length;t++){var n=r[t],i=n._private.rscratch;n.grabbed()&&!n.isParent()?e.push(n):i.inDragLayer?r.drag.push(n):r.nondrag.push(n)}for(var t=0;t<e.length;t++){var n=e[t];r.drag.push(n)}}};fb.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};fb.getCachedZSortedEles=function(r){if(r||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(MD),e.interactive=e.filter(function(t){return t.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var eM={};[dp,M0,Qa,vm,LS,vf,JD,cb,fb].forEach(function(r){_r(eM,r)});var tM={};tM.getCachedImage=function(r,e,t){var n=this,i=n.imageCache=n.imageCache||{},o=i[r];if(o)return o.image.complete||o.image.addEventListener("load",t),o.image;o=i[r]=i[r]||{};var a=o.image=new Image;a.addEventListener("load",t),a.addEventListener("error",function(){a.error=!0});var s="data:",u=r.substring(0,s.length).toLowerCase()===s;return u||(e=e==="null"?null:e,a.crossOrigin=e),a.src=r,a};var Gg={};Gg.registerBinding=function(r,e,t,n){var i=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(r)){for(var o=[],a=0;a<r.length;a++){var s=r[a];if(s!==void 0){var u=this.binder(s);o.push(u.on.apply(u,i))}}return o}var u=this.binder(r);return u.on.apply(u,i)};Gg.binder=function(r){var e=this,t=e.cy.window(),n=r===t||r===t.document||r===t.document.body||Sj(r);if(e.supportsPassiveEvents==null){var i=!1;try{var o=Object.defineProperty({},"passive",{get:function(){return i=!0,!0}});t.addEventListener("test",null,o)}catch{}e.supportsPassiveEvents=i}var a=function(u,l,c){var f=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(f[2]={capture:c??!1,passive:!1,once:!1}),e.bindings.push({target:r,args:f}),(r.addEventListener||r.on).apply(r,f),this};return{on:a,addEventListener:a,addListener:a,bind:a}};Gg.nodeIsDraggable=function(r){return r&&r.isNode()&&!r.locked()&&r.grabbable()};Gg.nodeIsGrabbable=function(r){return this.nodeIsDraggable(r)&&r.interactive()};Gg.load=function(){var r=this,e=r.cy.window(),t=function(pe){return pe.selected()},n=function(pe){var Ue=pe.getRootNode();if(Ue&&Ue.nodeType===11&&Ue.host!==void 0)return Ue},i=function(pe,Ue,nt,Je){pe==null&&(pe=r.cy);for(var at=0;at<Ue.length;at++){var kt=Ue[at];pe.emit({originalEvent:nt,type:kt,position:Je})}},o=function(pe){return pe.shiftKey||pe.metaKey||pe.ctrlKey},a=function(pe,Ue){var nt=!0;if(r.cy.hasCompoundNodes()&&pe&&pe.pannable())for(var Je=0;Ue&&Je<Ue.length;Je++){var pe=Ue[Je];if(pe.isNode()&&pe.isParent()&&!pe.pannable()){nt=!1;break}}else nt=!0;return nt},s=function(pe){pe[0]._private.grabbed=!0},u=function(pe){pe[0]._private.grabbed=!1},l=function(pe){pe[0]._private.rscratch.inDragLayer=!0},c=function(pe){pe[0]._private.rscratch.inDragLayer=!1},f=function(pe){pe[0]._private.rscratch.isGrabTarget=!0},h=function(pe){pe[0]._private.rscratch.isGrabTarget=!1},d=function(pe,Ue){var nt=Ue.addToList,Je=nt.has(pe);!Je&&pe.grabbable()&&!pe.locked()&&(nt.merge(pe),s(pe))},v=function(pe,Ue){if(pe.cy().hasCompoundNodes()&&!(Ue.inDragLayer==null&&Ue.addToList==null)){var nt=pe.descendants();Ue.inDragLayer&&(nt.forEach(l),nt.connectedEdges().forEach(l)),Ue.addToList&&d(nt,Ue)}},y=function(pe,Ue){Ue=Ue||{};var nt=pe.cy().hasCompoundNodes();Ue.inDragLayer&&(pe.forEach(l),pe.neighborhood().stdFilter(function(Je){return!nt||Je.isEdge()}).forEach(l)),Ue.addToList&&pe.forEach(function(Je){d(Je,Ue)}),v(pe,Ue),p(pe,{inDragLayer:Ue.inDragLayer}),r.updateCachedGrabbedEles()},w=y,b=function(pe){pe&&(r.getCachedZSortedEles().forEach(function(Ue){u(Ue),c(Ue),h(Ue)}),r.updateCachedGrabbedEles())},p=function(pe,Ue){if(!(Ue.inDragLayer==null&&Ue.addToList==null)&&pe.cy().hasCompoundNodes()){var nt=pe.ancestors().orphans();if(!nt.same(pe)){var Je=nt.descendants().spawnSelf().merge(nt).unmerge(pe).unmerge(pe.descendants()),at=Je.connectedEdges();Ue.inDragLayer&&(at.forEach(l),Je.forEach(l)),Ue.addToList&&Je.forEach(function(kt){d(kt,Ue)})}}},_=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},O=typeof MutationObserver<"u",P=typeof ResizeObserver<"u";O?(r.removeObserver=new MutationObserver(function(lt){for(var pe=0;pe<lt.length;pe++){var Ue=lt[pe],nt=Ue.removedNodes;if(nt)for(var Je=0;Je<nt.length;Je++){var at=nt[Je];if(at===r.container){r.destroy();break}}}}),r.container.parentNode&&r.removeObserver.observe(r.container.parentNode,{childList:!0})):r.registerBinding(r.container,"DOMNodeRemoved",function(lt){r.destroy()});var R=cm(function(){r.cy.resize()},100);O&&(r.styleObserver=new MutationObserver(R),r.styleObserver.observe(r.container,{attributes:!0})),r.registerBinding(e,"resize",R),P&&(r.resizeObserver=new ResizeObserver(R),r.resizeObserver.observe(r.container));var T=function(pe,Ue){for(;pe!=null;)Ue(pe),pe=pe.parentNode},A=function(){r.invalidateContainerClientCoordsCache()};T(r.container,function(lt){r.registerBinding(lt,"transitionend",A),r.registerBinding(lt,"animationend",A),r.registerBinding(lt,"scroll",A)}),r.registerBinding(r.container,"contextmenu",function(lt){lt.preventDefault()});var M=function(){return r.selection[4]!==0},N=function(pe){for(var Ue=r.findContainerClientCoords(),nt=Ue[0],Je=Ue[1],at=Ue[2],kt=Ue[3],dt=pe.touches?pe.touches:[pe],Dt=!1,Xt=0;Xt<dt.length;Xt++){var fr=dt[Xt];if(nt<=fr.clientX&&fr.clientX<=nt+at&&Je<=fr.clientY&&fr.clientY<=Je+kt){Dt=!0;break}}if(!Dt)return!1;for(var Vt=r.container,lr=pe.target,ir=lr.parentNode,Jt=!1;ir;){if(ir===Vt){Jt=!0;break}ir=ir.parentNode}return!!Jt};r.registerBinding(r.container,"mousedown",function(pe){if(N(pe)&&!(r.hoverData.which===1&&pe.which!==1)){pe.preventDefault(),_(),r.hoverData.capture=!0,r.hoverData.which=pe.which;var Ue=r.cy,nt=[pe.clientX,pe.clientY],Je=r.projectIntoViewport(nt[0],nt[1]),at=r.selection,kt=r.findNearestElements(Je[0],Je[1],!0,!1),dt=kt[0],Dt=r.dragData.possibleDragElements;r.hoverData.mdownPos=Je,r.hoverData.mdownGPos=nt;var Xt=function(){r.hoverData.tapholdCancelled=!1,clearTimeout(r.hoverData.tapholdTimeout),r.hoverData.tapholdTimeout=setTimeout(function(){if(!r.hoverData.tapholdCancelled){var Wr=r.hoverData.down;Wr?Wr.emit({originalEvent:pe,type:"taphold",position:{x:Je[0],y:Je[1]}}):Ue.emit({originalEvent:pe,type:"taphold",position:{x:Je[0],y:Je[1]}})}},r.tapholdDuration)};if(pe.which==3){r.hoverData.cxtStarted=!0;var fr={originalEvent:pe,type:"cxttapstart",position:{x:Je[0],y:Je[1]}};dt?(dt.activate(),dt.emit(fr),r.hoverData.down=dt):Ue.emit(fr),r.hoverData.downTime=new Date().getTime(),r.hoverData.cxtDragged=!1}else if(pe.which==1){dt&&dt.activate();{if(dt!=null&&r.nodeIsGrabbable(dt)){var Vt=function(Wr){return{originalEvent:pe,type:Wr,position:{x:Je[0],y:Je[1]}}},lr=function(Wr){Wr.emit(Vt("grab"))};if(f(dt),!dt.selected())Dt=r.dragData.possibleDragElements=Ue.collection(),w(dt,{addToList:Dt}),dt.emit(Vt("grabon")).emit(Vt("grab"));else{Dt=r.dragData.possibleDragElements=Ue.collection();var ir=Ue.$(function(Jt){return Jt.isNode()&&Jt.selected()&&r.nodeIsGrabbable(Jt)});y(ir,{addToList:Dt}),dt.emit(Vt("grabon")),ir.forEach(lr)}r.redrawHint("eles",!0),r.redrawHint("drag",!0)}r.hoverData.down=dt,r.hoverData.downs=kt,r.hoverData.downTime=new Date().getTime()}i(dt,["mousedown","tapstart","vmousedown"],pe,{x:Je[0],y:Je[1]}),dt==null?(at[4]=1,r.data.bgActivePosistion={x:Je[0],y:Je[1]},r.redrawHint("select",!0),r.redraw()):dt.pannable()&&(at[4]=1),Xt()}at[0]=at[2]=Je[0],at[1]=at[3]=Je[1]}},!1);var j=n(r.container);r.registerBinding([e,j],"mousemove",function(pe){var Ue=r.hoverData.capture;if(!(!Ue&&!N(pe))){var nt=!1,Je=r.cy,at=Je.zoom(),kt=[pe.clientX,pe.clientY],dt=r.projectIntoViewport(kt[0],kt[1]),Dt=r.hoverData.mdownPos,Xt=r.hoverData.mdownGPos,fr=r.selection,Vt=null;!r.hoverData.draggingEles&&!r.hoverData.dragging&&!r.hoverData.selecting&&(Vt=r.findNearestElement(dt[0],dt[1],!0,!1));var lr=r.hoverData.last,ir=r.hoverData.down,Jt=[dt[0]-fr[2],dt[1]-fr[3]],Wr=r.dragData.possibleDragElements,on;if(Xt){var Pi=kt[0]-Xt[0],vn=Pi*Pi,ln=kt[1]-Xt[1],En=ln*ln,Cn=vn+En;r.hoverData.isOverThresholdDrag=on=Cn>=r.desktopTapThreshold2}var Un=o(pe);on&&(r.hoverData.tapholdCancelled=!0);var Xn=function(){var Oi=r.hoverData.dragDelta=r.hoverData.dragDelta||[];Oi.length===0?(Oi.push(Jt[0]),Oi.push(Jt[1])):(Oi[0]+=Jt[0],Oi[1]+=Jt[1])};nt=!0,i(Vt,["mousemove","vmousemove","tapdrag"],pe,{x:dt[0],y:dt[1]});var to=function(){r.data.bgActivePosistion=void 0,r.hoverData.selecting||Je.emit({originalEvent:pe,type:"boxstart",position:{x:dt[0],y:dt[1]}}),fr[4]=1,r.hoverData.selecting=!0,r.redrawHint("select",!0),r.redraw()};if(r.hoverData.which===3){if(on){var Ei={originalEvent:pe,type:"cxtdrag",position:{x:dt[0],y:dt[1]}};ir?ir.emit(Ei):Je.emit(Ei),r.hoverData.cxtDragged=!0,(!r.hoverData.cxtOver||Vt!==r.hoverData.cxtOver)&&(r.hoverData.cxtOver&&r.hoverData.cxtOver.emit({originalEvent:pe,type:"cxtdragout",position:{x:dt[0],y:dt[1]}}),r.hoverData.cxtOver=Vt,Vt&&Vt.emit({originalEvent:pe,type:"cxtdragover",position:{x:dt[0],y:dt[1]}}))}}else if(r.hoverData.dragging){if(nt=!0,Je.panningEnabled()&&Je.userPanningEnabled()){var ro;if(r.hoverData.justStartedPan){var Fi=r.hoverData.mdownPos;ro={x:(dt[0]-Fi[0])*at,y:(dt[1]-Fi[1])*at},r.hoverData.justStartedPan=!1}else ro={x:Jt[0]*at,y:Jt[1]*at};Je.panBy(ro),Je.emit("dragpan"),r.hoverData.dragged=!0}dt=r.projectIntoViewport(pe.clientX,pe.clientY)}else if(fr[4]==1&&(ir==null||ir.pannable())){if(on){if(!r.hoverData.dragging&&Je.boxSelectionEnabled()&&(Un||!Je.panningEnabled()||!Je.userPanningEnabled()))to();else if(!r.hoverData.selecting&&Je.panningEnabled()&&Je.userPanningEnabled()){var ho=a(ir,r.hoverData.downs);ho&&(r.hoverData.dragging=!0,r.hoverData.justStartedPan=!0,fr[4]=0,r.data.bgActivePosistion=wg(Dt),r.redrawHint("select",!0),r.redraw())}ir&&ir.pannable()&&ir.active()&&ir.unactivate()}}else{if(ir&&ir.pannable()&&ir.active()&&ir.unactivate(),(!ir||!ir.grabbed())&&Vt!=lr&&(lr&&i(lr,["mouseout","tapdragout"],pe,{x:dt[0],y:dt[1]}),Vt&&i(Vt,["mouseover","tapdragover"],pe,{x:dt[0],y:dt[1]}),r.hoverData.last=Vt),ir)if(on){if(Je.boxSelectionEnabled()&&Un)ir&&ir.grabbed()&&(b(Wr),ir.emit("freeon"),Wr.emit("free"),r.dragData.didDrag&&(ir.emit("dragfreeon"),Wr.emit("dragfree"))),to();else if(ir&&ir.grabbed()&&r.nodeIsDraggable(ir)){var zn=!r.dragData.didDrag;zn&&r.redrawHint("eles",!0),r.dragData.didDrag=!0,r.hoverData.draggingEles||y(Wr,{inDragLayer:!0});var yr={x:0,y:0};if(qt(Jt[0])&&qt(Jt[1])&&(yr.x+=Jt[0],yr.y+=Jt[1],zn)){var an=r.hoverData.dragDelta;an&&qt(an[0])&&qt(an[1])&&(yr.x+=an[0],yr.y+=an[1])}r.hoverData.draggingEles=!0,Wr.silentShift(yr).emit("position drag"),r.redrawHint("drag",!0),r.redraw()}}else Xn();nt=!0}if(fr[2]=dt[0],fr[3]=dt[1],nt)return pe.stopPropagation&&pe.stopPropagation(),pe.preventDefault&&pe.preventDefault(),!1}},!1);var B,q,W;r.registerBinding(e,"mouseup",function(pe){if(!(r.hoverData.which===1&&pe.which!==1&&r.hoverData.capture)){var Ue=r.hoverData.capture;if(Ue){r.hoverData.capture=!1;var nt=r.cy,Je=r.projectIntoViewport(pe.clientX,pe.clientY),at=r.selection,kt=r.findNearestElement(Je[0],Je[1],!0,!1),dt=r.dragData.possibleDragElements,Dt=r.hoverData.down,Xt=o(pe);if(r.data.bgActivePosistion&&(r.redrawHint("select",!0),r.redraw()),r.hoverData.tapholdCancelled=!0,r.data.bgActivePosistion=void 0,Dt&&Dt.unactivate(),r.hoverData.which===3){var fr={originalEvent:pe,type:"cxttapend",position:{x:Je[0],y:Je[1]}};if(Dt?Dt.emit(fr):nt.emit(fr),!r.hoverData.cxtDragged){var Vt={originalEvent:pe,type:"cxttap",position:{x:Je[0],y:Je[1]}};Dt?Dt.emit(Vt):nt.emit(Vt)}r.hoverData.cxtDragged=!1,r.hoverData.which=null}else if(r.hoverData.which===1){if(i(kt,["mouseup","tapend","vmouseup"],pe,{x:Je[0],y:Je[1]}),!r.dragData.didDrag&&!r.hoverData.dragged&&!r.hoverData.selecting&&!r.hoverData.isOverThresholdDrag&&(i(Dt,["click","tap","vclick"],pe,{x:Je[0],y:Je[1]}),q=!1,pe.timeStamp-W<=nt.multiClickDebounceTime()?(B&&clearTimeout(B),q=!0,W=null,i(Dt,["dblclick","dbltap","vdblclick"],pe,{x:Je[0],y:Je[1]})):(B=setTimeout(function(){q||i(Dt,["oneclick","onetap","voneclick"],pe,{x:Je[0],y:Je[1]})},nt.multiClickDebounceTime()),W=pe.timeStamp)),Dt==null&&!r.dragData.didDrag&&!r.hoverData.selecting&&!r.hoverData.dragged&&!o(pe)&&(nt.$(t).unselect(["tapunselect"]),dt.length>0&&r.redrawHint("eles",!0),r.dragData.possibleDragElements=dt=nt.collection()),kt==Dt&&!r.dragData.didDrag&&!r.hoverData.selecting&&kt!=null&&kt._private.selectable&&(r.hoverData.dragging||(nt.selectionType()==="additive"||Xt?kt.selected()?kt.unselect(["tapunselect"]):kt.select(["tapselect"]):Xt||(nt.$(t).unmerge(kt).unselect(["tapunselect"]),kt.select(["tapselect"]))),r.redrawHint("eles",!0)),r.hoverData.selecting){var lr=nt.collection(r.getAllInBox(at[0],at[1],at[2],at[3]));r.redrawHint("select",!0),lr.length>0&&r.redrawHint("eles",!0),nt.emit({type:"boxend",originalEvent:pe,position:{x:Je[0],y:Je[1]}});var ir=function(on){return on.selectable()&&!on.selected()};nt.selectionType()==="additive"||Xt||nt.$(t).unmerge(lr).unselect(),lr.emit("box").stdFilter(ir).select().emit("boxselect"),r.redraw()}if(r.hoverData.dragging&&(r.hoverData.dragging=!1,r.redrawHint("select",!0),r.redrawHint("eles",!0),r.redraw()),!at[4]){r.redrawHint("drag",!0),r.redrawHint("eles",!0);var Jt=Dt&&Dt.grabbed();b(dt),Jt&&(Dt.emit("freeon"),dt.emit("free"),r.dragData.didDrag&&(Dt.emit("dragfreeon"),dt.emit("dragfree")))}}at[4]=0,r.hoverData.down=null,r.hoverData.cxtStarted=!1,r.hoverData.draggingEles=!1,r.hoverData.selecting=!1,r.hoverData.isOverThresholdDrag=!1,r.dragData.didDrag=!1,r.hoverData.dragged=!1,r.hoverData.dragDelta=[],r.hoverData.mdownPos=null,r.hoverData.mdownGPos=null,r.hoverData.which=null}}},!1);var J=function(pe){if(!r.scrollingPage){var Ue=r.cy,nt=Ue.zoom(),Je=Ue.pan(),at=r.projectIntoViewport(pe.clientX,pe.clientY),kt=[at[0]*nt+Je.x,at[1]*nt+Je.y];if(r.hoverData.draggingEles||r.hoverData.dragging||r.hoverData.cxtStarted||M()){pe.preventDefault();return}if(Ue.panningEnabled()&&Ue.userPanningEnabled()&&Ue.zoomingEnabled()&&Ue.userZoomingEnabled()){pe.preventDefault(),r.data.wheelZooming=!0,clearTimeout(r.data.wheelTimeout),r.data.wheelTimeout=setTimeout(function(){r.data.wheelZooming=!1,r.redrawHint("eles",!0),r.redraw()},150);var dt;pe.deltaY!=null?dt=pe.deltaY/-250:pe.wheelDeltaY!=null?dt=pe.wheelDeltaY/1e3:dt=pe.wheelDelta/1e3,dt=dt*r.wheelSensitivity;var Dt=pe.deltaMode===1;Dt&&(dt*=33);var Xt=Ue.zoom()*Math.pow(10,dt);pe.type==="gesturechange"&&(Xt=r.gestureStartZoom*pe.scale),Ue.zoom({level:Xt,renderedPosition:{x:kt[0],y:kt[1]}}),Ue.emit(pe.type==="gesturechange"?"pinchzoom":"scrollzoom")}}};r.registerBinding(r.container,"wheel",J,!0),r.registerBinding(e,"scroll",function(pe){r.scrollingPage=!0,clearTimeout(r.scrollingPageTimeout),r.scrollingPageTimeout=setTimeout(function(){r.scrollingPage=!1},250)},!0),r.registerBinding(r.container,"gesturestart",function(pe){r.gestureStartZoom=r.cy.zoom(),r.hasTouchStarted||pe.preventDefault()},!0),r.registerBinding(r.container,"gesturechange",function(lt){r.hasTouchStarted||J(lt)},!0),r.registerBinding(r.container,"mouseout",function(pe){var Ue=r.projectIntoViewport(pe.clientX,pe.clientY);r.cy.emit({originalEvent:pe,type:"mouseout",position:{x:Ue[0],y:Ue[1]}})},!1),r.registerBinding(r.container,"mouseover",function(pe){var Ue=r.projectIntoViewport(pe.clientX,pe.clientY);r.cy.emit({originalEvent:pe,type:"mouseover",position:{x:Ue[0],y:Ue[1]}})},!1);var te,re,ee,fe,he,se,me,De,Le,Ie,qe,Ge,Me,Pe=function(pe,Ue,nt,Je){return Math.sqrt((nt-pe)*(nt-pe)+(Je-Ue)*(Je-Ue))},de=function(pe,Ue,nt,Je){return(nt-pe)*(nt-pe)+(Je-Ue)*(Je-Ue)},Oe;r.registerBinding(r.container,"touchstart",Oe=function(pe){if(r.hasTouchStarted=!0,!!N(pe)){_(),r.touchData.capture=!0,r.data.bgActivePosistion=void 0;var Ue=r.cy,nt=r.touchData.now,Je=r.touchData.earlier;if(pe.touches[0]){var at=r.projectIntoViewport(pe.touches[0].clientX,pe.touches[0].clientY);nt[0]=at[0],nt[1]=at[1]}if(pe.touches[1]){var at=r.projectIntoViewport(pe.touches[1].clientX,pe.touches[1].clientY);nt[2]=at[0],nt[3]=at[1]}if(pe.touches[2]){var at=r.projectIntoViewport(pe.touches[2].clientX,pe.touches[2].clientY);nt[4]=at[0],nt[5]=at[1]}if(pe.touches[1]){r.touchData.singleTouchMoved=!0,b(r.dragData.touchDragEles);var kt=r.findContainerClientCoords();Le=kt[0],Ie=kt[1],qe=kt[2],Ge=kt[3],te=pe.touches[0].clientX-Le,re=pe.touches[0].clientY-Ie,ee=pe.touches[1].clientX-Le,fe=pe.touches[1].clientY-Ie,Me=0<=te&&te<=qe&&0<=ee&&ee<=qe&&0<=re&&re<=Ge&&0<=fe&&fe<=Ge;var dt=Ue.pan(),Dt=Ue.zoom();he=Pe(te,re,ee,fe),se=de(te,re,ee,fe),me=[(te+ee)/2,(re+fe)/2],De=[(me[0]-dt.x)/Dt,(me[1]-dt.y)/Dt];var Xt=200,fr=Xt*Xt;if(se<fr&&!pe.touches[2]){var Vt=r.findNearestElement(nt[0],nt[1],!0,!0),lr=r.findNearestElement(nt[2],nt[3],!0,!0);Vt&&Vt.isNode()?(Vt.activate().emit({originalEvent:pe,type:"cxttapstart",position:{x:nt[0],y:nt[1]}}),r.touchData.start=Vt):lr&&lr.isNode()?(lr.activate().emit({originalEvent:pe,type:"cxttapstart",position:{x:nt[0],y:nt[1]}}),r.touchData.start=lr):Ue.emit({originalEvent:pe,type:"cxttapstart",position:{x:nt[0],y:nt[1]}}),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!0,r.touchData.cxtDragged=!1,r.data.bgActivePosistion=void 0,r.redraw();return}}if(pe.touches[2])Ue.boxSelectionEnabled()&&pe.preventDefault();else if(!pe.touches[1]){if(pe.touches[0]){var ir=r.findNearestElements(nt[0],nt[1],!0,!0),Jt=ir[0];if(Jt!=null&&(Jt.activate(),r.touchData.start=Jt,r.touchData.starts=ir,r.nodeIsGrabbable(Jt))){var Wr=r.dragData.touchDragEles=Ue.collection(),on=null;r.redrawHint("eles",!0),r.redrawHint("drag",!0),Jt.selected()?(on=Ue.$(function(Cn){return Cn.selected()&&r.nodeIsGrabbable(Cn)}),y(on,{addToList:Wr})):w(Jt,{addToList:Wr}),f(Jt);var Pi=function(Un){return{originalEvent:pe,type:Un,position:{x:nt[0],y:nt[1]}}};Jt.emit(Pi("grabon")),on?on.forEach(function(Cn){Cn.emit(Pi("grab"))}):Jt.emit(Pi("grab"))}i(Jt,["touchstart","tapstart","vmousedown"],pe,{x:nt[0],y:nt[1]}),Jt==null&&(r.data.bgActivePosistion={x:at[0],y:at[1]},r.redrawHint("select",!0),r.redraw()),r.touchData.singleTouchMoved=!1,r.touchData.singleTouchStartTime=+new Date,clearTimeout(r.touchData.tapholdTimeout),r.touchData.tapholdTimeout=setTimeout(function(){r.touchData.singleTouchMoved===!1&&!r.pinching&&!r.touchData.selecting&&i(r.touchData.start,["taphold"],pe,{x:nt[0],y:nt[1]})},r.tapholdDuration)}}if(pe.touches.length>=1){for(var vn=r.touchData.startPosition=[null,null,null,null,null,null],ln=0;ln<nt.length;ln++)vn[ln]=Je[ln]=nt[ln];var En=pe.touches[0];r.touchData.startGPosition=[En.clientX,En.clientY]}}},!1);var Ae;r.registerBinding(e,"touchmove",Ae=function(pe){var Ue=r.touchData.capture;if(!(!Ue&&!N(pe))){var nt=r.selection,Je=r.cy,at=r.touchData.now,kt=r.touchData.earlier,dt=Je.zoom();if(pe.touches[0]){var Dt=r.projectIntoViewport(pe.touches[0].clientX,pe.touches[0].clientY);at[0]=Dt[0],at[1]=Dt[1]}if(pe.touches[1]){var Dt=r.projectIntoViewport(pe.touches[1].clientX,pe.touches[1].clientY);at[2]=Dt[0],at[3]=Dt[1]}if(pe.touches[2]){var Dt=r.projectIntoViewport(pe.touches[2].clientX,pe.touches[2].clientY);at[4]=Dt[0],at[5]=Dt[1]}var Xt=r.touchData.startGPosition,fr;if(Ue&&pe.touches[0]&&Xt){for(var Vt=[],lr=0;lr<at.length;lr++)Vt[lr]=at[lr]-kt[lr];var ir=pe.touches[0].clientX-Xt[0],Jt=ir*ir,Wr=pe.touches[0].clientY-Xt[1],on=Wr*Wr,Pi=Jt+on;fr=Pi>=r.touchTapThreshold2}if(Ue&&r.touchData.cxt){pe.preventDefault();var vn=pe.touches[0].clientX-Le,ln=pe.touches[0].clientY-Ie,En=pe.touches[1].clientX-Le,Cn=pe.touches[1].clientY-Ie,Un=de(vn,ln,En,Cn),Xn=Un/se,to=150,Ei=to*to,ro=1.5,Fi=ro*ro;if(Xn>=Fi||Un>=Ei){r.touchData.cxt=!1,r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var ho={originalEvent:pe,type:"cxttapend",position:{x:at[0],y:at[1]}};r.touchData.start?(r.touchData.start.unactivate().emit(ho),r.touchData.start=null):Je.emit(ho)}}if(Ue&&r.touchData.cxt){var ho={originalEvent:pe,type:"cxtdrag",position:{x:at[0],y:at[1]}};r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),r.touchData.start?r.touchData.start.emit(ho):Je.emit(ho),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxtDragged=!0;var zn=r.findNearestElement(at[0],at[1],!0,!0);(!r.touchData.cxtOver||zn!==r.touchData.cxtOver)&&(r.touchData.cxtOver&&r.touchData.cxtOver.emit({originalEvent:pe,type:"cxtdragout",position:{x:at[0],y:at[1]}}),r.touchData.cxtOver=zn,zn&&zn.emit({originalEvent:pe,type:"cxtdragover",position:{x:at[0],y:at[1]}}))}else if(Ue&&pe.touches[2]&&Je.boxSelectionEnabled())pe.preventDefault(),r.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,r.touchData.selecting||Je.emit({originalEvent:pe,type:"boxstart",position:{x:at[0],y:at[1]}}),r.touchData.selecting=!0,r.touchData.didSelect=!0,nt[4]=1,!nt||nt.length===0||nt[0]===void 0?(nt[0]=(at[0]+at[2]+at[4])/3,nt[1]=(at[1]+at[3]+at[5])/3,nt[2]=(at[0]+at[2]+at[4])/3+1,nt[3]=(at[1]+at[3]+at[5])/3+1):(nt[2]=(at[0]+at[2]+at[4])/3,nt[3]=(at[1]+at[3]+at[5])/3),r.redrawHint("select",!0),r.redraw();else if(Ue&&pe.touches[1]&&!r.touchData.didSelect&&Je.zoomingEnabled()&&Je.panningEnabled()&&Je.userZoomingEnabled()&&Je.userPanningEnabled()){pe.preventDefault(),r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var yr=r.dragData.touchDragEles;if(yr){r.redrawHint("drag",!0);for(var an=0;an<yr.length;an++){var no=yr[an]._private;no.grabbed=!1,no.rscratch.inDragLayer=!1}}var Oi=r.touchData.start,vn=pe.touches[0].clientX-Le,ln=pe.touches[0].clientY-Ie,En=pe.touches[1].clientX-Le,Cn=pe.touches[1].clientY-Ie,To=Pe(vn,ln,En,Cn),Zs=To/he;if(Me){var vo=vn-te,La=ln-re,Qs=En-ee,ha=Cn-fe,vl=(vo+Qs)/2,Na=(La+ha)/2,vi=Je.zoom(),da=vi*Zs,po=Je.pan(),Pn=De[0]*vi+po.x,Kn=De[1]*vi+po.y,hr={x:-da/vi*(Pn-po.x-vl)+Pn,y:-da/vi*(Kn-po.y-Na)+Kn};if(Oi&&Oi.active()){var yr=r.dragData.touchDragEles;b(yr),r.redrawHint("drag",!0),r.redrawHint("eles",!0),Oi.unactivate().emit("freeon"),yr.emit("free"),r.dragData.didDrag&&(Oi.emit("dragfreeon"),yr.emit("dragfree"))}Je.viewport({zoom:da,pan:hr,cancelOnFailedZoom:!0}),Je.emit("pinchzoom"),he=To,te=vn,re=ln,ee=En,fe=Cn,r.pinching=!0}if(pe.touches[0]){var Dt=r.projectIntoViewport(pe.touches[0].clientX,pe.touches[0].clientY);at[0]=Dt[0],at[1]=Dt[1]}if(pe.touches[1]){var Dt=r.projectIntoViewport(pe.touches[1].clientX,pe.touches[1].clientY);at[2]=Dt[0],at[3]=Dt[1]}if(pe.touches[2]){var Dt=r.projectIntoViewport(pe.touches[2].clientX,pe.touches[2].clientY);at[4]=Dt[0],at[5]=Dt[1]}}else if(pe.touches[0]&&!r.touchData.didSelect){var Yi=r.touchData.start,go=r.touchData.last,zn;if(!r.hoverData.draggingEles&&!r.swipePanning&&(zn=r.findNearestElement(at[0],at[1],!0,!0)),Ue&&Yi!=null&&pe.preventDefault(),Ue&&Yi!=null&&r.nodeIsDraggable(Yi))if(fr){var yr=r.dragData.touchDragEles,Hr=!r.dragData.didDrag;Hr&&y(yr,{inDragLayer:!0}),r.dragData.didDrag=!0;var jr={x:0,y:0};if(qt(Vt[0])&&qt(Vt[1])&&(jr.x+=Vt[0],jr.y+=Vt[1],Hr)){r.redrawHint("eles",!0);var Ai=r.touchData.dragDelta;Ai&&qt(Ai[0])&&qt(Ai[1])&&(jr.x+=Ai[0],jr.y+=Ai[1])}r.hoverData.draggingEles=!0,yr.silentShift(jr).emit("position drag"),r.redrawHint("drag",!0),r.touchData.startPosition[0]==kt[0]&&r.touchData.startPosition[1]==kt[1]&&r.redrawHint("eles",!0),r.redraw()}else{var Ai=r.touchData.dragDelta=r.touchData.dragDelta||[];Ai.length===0?(Ai.push(Vt[0]),Ai.push(Vt[1])):(Ai[0]+=Vt[0],Ai[1]+=Vt[1])}if(i(Yi||zn,["touchmove","tapdrag","vmousemove"],pe,{x:at[0],y:at[1]}),(!Yi||!Yi.grabbed())&&zn!=go&&(go&&go.emit({originalEvent:pe,type:"tapdragout",position:{x:at[0],y:at[1]}}),zn&&zn.emit({originalEvent:pe,type:"tapdragover",position:{x:at[0],y:at[1]}})),r.touchData.last=zn,Ue)for(var an=0;an<at.length;an++)at[an]&&r.touchData.startPosition[an]&&fr&&(r.touchData.singleTouchMoved=!0);if(Ue&&(Yi==null||Yi.pannable())&&Je.panningEnabled()&&Je.userPanningEnabled()){var Js=a(Yi,r.touchData.starts);Js&&(pe.preventDefault(),r.data.bgActivePosistion||(r.data.bgActivePosistion=wg(r.touchData.startPosition)),r.swipePanning?(Je.panBy({x:Vt[0]*dt,y:Vt[1]*dt}),Je.emit("dragpan")):fr&&(r.swipePanning=!0,Je.panBy({x:ir*dt,y:Wr*dt}),Je.emit("dragpan"),Yi&&(Yi.unactivate(),r.redrawHint("select",!0),r.touchData.start=null)));var Dt=r.projectIntoViewport(pe.touches[0].clientX,pe.touches[0].clientY);at[0]=Dt[0],at[1]=Dt[1]}}for(var lr=0;lr<at.length;lr++)kt[lr]=at[lr];Ue&&pe.touches.length>0&&!r.hoverData.draggingEles&&!r.swipePanning&&r.data.bgActivePosistion!=null&&(r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),r.redraw())}},!1);var Ve;r.registerBinding(e,"touchcancel",Ve=function(pe){var Ue=r.touchData.start;r.touchData.capture=!1,Ue&&Ue.unactivate()});var tt,ht,xt,ut;if(r.registerBinding(e,"touchend",tt=function(pe){var Ue=r.touchData.start,nt=r.touchData.capture;if(nt)pe.touches.length===0&&(r.touchData.capture=!1),pe.preventDefault();else return;var Je=r.selection;r.swipePanning=!1,r.hoverData.draggingEles=!1;var at=r.cy,kt=at.zoom(),dt=r.touchData.now,Dt=r.touchData.earlier;if(pe.touches[0]){var Xt=r.projectIntoViewport(pe.touches[0].clientX,pe.touches[0].clientY);dt[0]=Xt[0],dt[1]=Xt[1]}if(pe.touches[1]){var Xt=r.projectIntoViewport(pe.touches[1].clientX,pe.touches[1].clientY);dt[2]=Xt[0],dt[3]=Xt[1]}if(pe.touches[2]){var Xt=r.projectIntoViewport(pe.touches[2].clientX,pe.touches[2].clientY);dt[4]=Xt[0],dt[5]=Xt[1]}Ue&&Ue.unactivate();var fr;if(r.touchData.cxt){if(fr={originalEvent:pe,type:"cxttapend",position:{x:dt[0],y:dt[1]}},Ue?Ue.emit(fr):at.emit(fr),!r.touchData.cxtDragged){var Vt={originalEvent:pe,type:"cxttap",position:{x:dt[0],y:dt[1]}};Ue?Ue.emit(Vt):at.emit(Vt)}r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!1,r.touchData.start=null,r.redraw();return}if(!pe.touches[2]&&at.boxSelectionEnabled()&&r.touchData.selecting){r.touchData.selecting=!1;var lr=at.collection(r.getAllInBox(Je[0],Je[1],Je[2],Je[3]));Je[0]=void 0,Je[1]=void 0,Je[2]=void 0,Je[3]=void 0,Je[4]=0,r.redrawHint("select",!0),at.emit({type:"boxend",originalEvent:pe,position:{x:dt[0],y:dt[1]}});var ir=function(Ei){return Ei.selectable()&&!Ei.selected()};lr.emit("box").stdFilter(ir).select().emit("boxselect"),lr.nonempty()&&r.redrawHint("eles",!0),r.redraw()}if(Ue!=null&&Ue.unactivate(),pe.touches[2])r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);else if(!pe.touches[1]){if(!pe.touches[0]){if(!pe.touches[0]){r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var Jt=r.dragData.touchDragEles;if(Ue!=null){var Wr=Ue._private.grabbed;b(Jt),r.redrawHint("drag",!0),r.redrawHint("eles",!0),Wr&&(Ue.emit("freeon"),Jt.emit("free"),r.dragData.didDrag&&(Ue.emit("dragfreeon"),Jt.emit("dragfree"))),i(Ue,["touchend","tapend","vmouseup","tapdragout"],pe,{x:dt[0],y:dt[1]}),Ue.unactivate(),r.touchData.start=null}else{var on=r.findNearestElement(dt[0],dt[1],!0,!0);i(on,["touchend","tapend","vmouseup","tapdragout"],pe,{x:dt[0],y:dt[1]})}var Pi=r.touchData.startPosition[0]-dt[0],vn=Pi*Pi,ln=r.touchData.startPosition[1]-dt[1],En=ln*ln,Cn=vn+En,Un=Cn*kt*kt;r.touchData.singleTouchMoved||(Ue||at.$(":selected").unselect(["tapunselect"]),i(Ue,["tap","vclick"],pe,{x:dt[0],y:dt[1]}),ht=!1,pe.timeStamp-ut<=at.multiClickDebounceTime()?(xt&&clearTimeout(xt),ht=!0,ut=null,i(Ue,["dbltap","vdblclick"],pe,{x:dt[0],y:dt[1]})):(xt=setTimeout(function(){ht||i(Ue,["onetap","voneclick"],pe,{x:dt[0],y:dt[1]})},at.multiClickDebounceTime()),ut=pe.timeStamp)),Ue!=null&&!r.dragData.didDrag&&Ue._private.selectable&&Un<r.touchTapThreshold2&&!r.pinching&&(at.selectionType()==="single"?(at.$(t).unmerge(Ue).unselect(["tapunselect"]),Ue.select(["tapselect"])):Ue.selected()?Ue.unselect(["tapunselect"]):Ue.select(["tapselect"]),r.redrawHint("eles",!0)),r.touchData.singleTouchMoved=!0}}}for(var Xn=0;Xn<dt.length;Xn++)Dt[Xn]=dt[Xn];r.dragData.didDrag=!1,pe.touches.length===0&&(r.touchData.dragDelta=[],r.touchData.startPosition=[null,null,null,null,null,null],r.touchData.startGPosition=null,r.touchData.didSelect=!1),pe.touches.length<2&&(pe.touches.length===1&&(r.touchData.startGPosition=[pe.touches[0].clientX,pe.touches[0].clientY]),r.pinching=!1,r.redrawHint("eles",!0),r.redraw())},!1),typeof TouchEvent>"u"){var H=[],X=function(pe){return{clientX:pe.clientX,clientY:pe.clientY,force:1,identifier:pe.pointerId,pageX:pe.pageX,pageY:pe.pageY,radiusX:pe.width/2,radiusY:pe.height/2,screenX:pe.screenX,screenY:pe.screenY,target:pe.target}},ne=function(pe){return{event:pe,touch:X(pe)}},Se=function(pe){H.push(ne(pe))},Te=function(pe){for(var Ue=0;Ue<H.length;Ue++){var nt=H[Ue];if(nt.event.pointerId===pe.pointerId){H.splice(Ue,1);return}}},Ne=function(pe){var Ue=H.filter(function(nt){return nt.event.pointerId===pe.pointerId})[0];Ue.event=pe,Ue.touch=X(pe)},et=function(pe){pe.touches=H.map(function(Ue){return Ue.touch})},wt=function(pe){return pe.pointerType==="mouse"||pe.pointerType===4};r.registerBinding(r.container,"pointerdown",function(lt){wt(lt)||(lt.preventDefault(),Se(lt),et(lt),Oe(lt))}),r.registerBinding(r.container,"pointerup",function(lt){wt(lt)||(Te(lt),et(lt),tt(lt))}),r.registerBinding(r.container,"pointercancel",function(lt){wt(lt)||(Te(lt),et(lt),Ve(lt))}),r.registerBinding(r.container,"pointermove",function(lt){wt(lt)||(lt.preventDefault(),Ne(lt),et(lt),Ae(lt))})}};var Ah={};Ah.generatePolygon=function(r,e){return this.nodeShapes[r]={renderer:this,name:r,points:e,draw:function(n,i,o,a,s,u){this.renderer.nodeShapeImpl("polygon",n,i,o,a,s,this.points)},intersectLine:function(n,i,o,a,s,u,l,c){return Qy(s,u,this.points,n,i,o/2,a/2,l)},checkPoint:function(n,i,o,a,s,u,l,c){return Ch(n,i,this.points,u,l,a,s,[0,-1],o)}}};Ah.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,t,n,i,o,a){this.renderer.nodeShapeImpl(this.name,e,t,n,i,o)},intersectLine:function(e,t,n,i,o,a,s,u){return W5(o,a,e,t,n/2+s,i/2+s)},checkPoint:function(e,t,n,i,o,a,s,u){return ep(e,t,i,o,a,s,n)}}};Ah.generateRoundPolygon=function(r,e){return this.nodeShapes[r]={renderer:this,name:r,points:e,getOrCreateCorners:function(n,i,o,a,s,u,l){if(u[l]!==void 0&&u[l+"-cx"]===n&&u[l+"-cy"]===i)return u[l];u[l]=new Array(e.length/2),u[l+"-cx"]=n,u[l+"-cy"]=i;var c=o/2,f=a/2;s=s==="auto"?nD(o,a):s;for(var h=new Array(e.length/2),d=0;d<e.length/2;d++)h[d]={x:n+c*e[d*2],y:i+f*e[d*2+1]};var v,y,w,b,p=h.length;for(y=h[p-1],v=0;v<p;v++)w=h[v%p],b=h[(v+1)%p],u[l][v]=MS(y,w,b,s),y=w,w=b;return u[l]},draw:function(n,i,o,a,s,u,l){this.renderer.nodeShapeImpl("round-polygon",n,i,o,a,s,this.points,this.getOrCreateCorners(i,o,a,s,u,l,"drawCorners"))},intersectLine:function(n,i,o,a,s,u,l,c,f){return H5(s,u,this.points,n,i,o,a,l,this.getOrCreateCorners(n,i,o,a,c,f,"corners"))},checkPoint:function(n,i,o,a,s,u,l,c,f){return V5(n,i,this.points,u,l,a,s,this.getOrCreateCorners(u,l,a,s,c,f,"corners"))}}};Ah.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:xs(4,0),draw:function(e,t,n,i,o,a){this.renderer.nodeShapeImpl(this.name,e,t,n,i,o,this.points,a)},intersectLine:function(e,t,n,i,o,a,s,u){return tD(o,a,e,t,n,i,s,u)},checkPoint:function(e,t,n,i,o,a,s,u){var l=i/2,c=o/2;u=u==="auto"?ap(i,o):u,u=Math.min(l,c,u);var f=u*2;return!!(Ch(e,t,this.points,a,s,i,o-f,[0,-1],n)||Ch(e,t,this.points,a,s,i-f,o,[0,-1],n)||ep(e,t,f,f,a-l+u,s-c+u,n)||ep(e,t,f,f,a+l-u,s-c+u,n)||ep(e,t,f,f,a+l-u,s+c-u,n)||ep(e,t,f,f,a-l+u,s+c-u,n))}}};Ah.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:OS(),points:xs(4,0),draw:function(e,t,n,i,o,a){this.renderer.nodeShapeImpl(this.name,e,t,n,i,o,null,a)},generateCutTrianglePts:function(e,t,n,i,o){var a=o==="auto"?this.cornerLength:o,s=t/2,u=e/2,l=n-u,c=n+u,f=i-s,h=i+s;return{topLeft:[l,f+a,l+a,f,l+a,f+a],topRight:[c-a,f,c,f+a,c-a,f+a],bottomRight:[c,h-a,c-a,h,c-a,h-a],bottomLeft:[l+a,h,l,h-a,l+a,h-a]}},intersectLine:function(e,t,n,i,o,a,s,u){var l=this.generateCutTrianglePts(n+2*s,i+2*s,e,t,u),c=[].concat.apply([],[l.topLeft.splice(0,4),l.topRight.splice(0,4),l.bottomRight.splice(0,4),l.bottomLeft.splice(0,4)]);return Qy(o,a,c,e,t)},checkPoint:function(e,t,n,i,o,a,s,u){var l=u==="auto"?this.cornerLength:u;if(Ch(e,t,this.points,a,s,i,o-2*l,[0,-1],n)||Ch(e,t,this.points,a,s,i-2*l,o,[0,-1],n))return!0;var c=this.generateCutTrianglePts(i,o,a,s);return Ws(e,t,c.topLeft)||Ws(e,t,c.topRight)||Ws(e,t,c.bottomRight)||Ws(e,t,c.bottomLeft)}}};Ah.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:xs(4,0),draw:function(e,t,n,i,o,a){this.renderer.nodeShapeImpl(this.name,e,t,n,i,o)},intersectLine:function(e,t,n,i,o,a,s,u){var l=.15,c=.5,f=.85,h=this.generateBarrelBezierPts(n+2*s,i+2*s,e,t),d=function(w){var b=Tg({x:w[0],y:w[1]},{x:w[2],y:w[3]},{x:w[4],y:w[5]},l),p=Tg({x:w[0],y:w[1]},{x:w[2],y:w[3]},{x:w[4],y:w[5]},c),_=Tg({x:w[0],y:w[1]},{x:w[2],y:w[3]},{x:w[4],y:w[5]},f);return[w[0],w[1],b.x,b.y,p.x,p.y,_.x,_.y,w[4],w[5]]},v=[].concat(d(h.topLeft),d(h.topRight),d(h.bottomRight),d(h.bottomLeft));return Qy(o,a,v,e,t)},generateBarrelBezierPts:function(e,t,n,i){var o=t/2,a=e/2,s=n-a,u=n+a,l=i-o,c=i+o,f=Lx(e,t),h=f.heightOffset,d=f.widthOffset,v=f.ctrlPtOffsetPct*e,y={topLeft:[s,l+h,s+v,l,s+d,l],topRight:[u-d,l,u-v,l,u,l+h],bottomRight:[u,c-h,u-v,c,u-d,c],bottomLeft:[s+d,c,s+v,c,s,c-h]};return y.topLeft.isTop=!0,y.topRight.isTop=!0,y.bottomLeft.isBottom=!0,y.bottomRight.isBottom=!0,y},checkPoint:function(e,t,n,i,o,a,s,u){var l=Lx(i,o),c=l.heightOffset,f=l.widthOffset;if(Ch(e,t,this.points,a,s,i,o-2*c,[0,-1],n)||Ch(e,t,this.points,a,s,i-2*f,o,[0,-1],n))return!0;for(var h=this.generateBarrelBezierPts(i,o,a,s),d=function(A,M,N){var j=N[4],B=N[2],q=N[0],W=N[5],J=N[1],te=Math.min(j,q),re=Math.max(j,q),ee=Math.min(W,J),fe=Math.max(W,J);if(te<=A&&A<=re&&ee<=M&&M<=fe){var he=$5(j,B,q),se=U5(he[0],he[1],he[2],A),me=se.filter(function(De){return 0<=De&&De<=1});if(me.length>0)return me[0]}return null},v=Object.keys(h),y=0;y<v.length;y++){var w=v[y],b=h[w],p=d(e,t,b);if(p!=null){var _=b[5],O=b[3],P=b[1],R=aa(_,O,P,p);if(b.isTop&&R<=t||b.isBottom&&t<=R)return!0}}return!1}}};Ah.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:xs(4,0),draw:function(e,t,n,i,o,a){this.renderer.nodeShapeImpl(this.name,e,t,n,i,o,this.points,a)},intersectLine:function(e,t,n,i,o,a,s,u){var l=e-(n/2+s),c=t-(i/2+s),f=c,h=e+(n/2+s),d=Dd(o,a,e,t,l,c,h,f,!1);return d.length>0?d:tD(o,a,e,t,n,i,s,u)},checkPoint:function(e,t,n,i,o,a,s,u){u=u==="auto"?ap(i,o):u;var l=2*u;if(Ch(e,t,this.points,a,s,i,o-l,[0,-1],n)||Ch(e,t,this.points,a,s,i-l,o,[0,-1],n))return!0;var c=i/2+2*n,f=o/2+2*n,h=[a-c,s-f,a-c,s,a+c,s,a+c,s-f];return!!(Ws(e,t,h)||ep(e,t,l,l,a+i/2-u,s+o/2-u,n)||ep(e,t,l,l,a-i/2+u,s+o/2-u,n))}}};Ah.registerNodeShapes=function(){var r=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",xs(3,0)),this.generateRoundPolygon("round-triangle",xs(3,0)),this.generatePolygon("rectangle",xs(4,0)),r.square=r.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var t=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",t),this.generateRoundPolygon("round-diamond",t)}this.generatePolygon("pentagon",xs(5,0)),this.generateRoundPolygon("round-pentagon",xs(5,0)),this.generatePolygon("hexagon",xs(6,0)),this.generateRoundPolygon("round-hexagon",xs(6,0)),this.generatePolygon("heptagon",xs(7,0)),this.generateRoundPolygon("round-heptagon",xs(7,0)),this.generatePolygon("octagon",xs(8,0)),this.generateRoundPolygon("round-octagon",xs(8,0));var n=new Array(20);{var i=Mx(5,0),o=Mx(5,Math.PI/5),a=.5*(3-Math.sqrt(5));a*=1.57;for(var s=0;s<o.length/2;s++)o[s*2]*=a,o[s*2+1]*=a;for(var s=0;s<20/4;s++)n[s*4]=i[s*2],n[s*4+1]=i[s*2+1],n[s*4+2]=o[s*2],n[s*4+3]=o[s*2+1]}n=rD(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var u=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",u),this.generateRoundPolygon("round-tag",u)}r.makePolygon=function(l){var c=l.join("$"),f="polygon-"+c,h;return(h=this[f])?h:e.generatePolygon(f,l)}};var pm={};pm.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};pm.redraw=function(r){r=r||Kk();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=r};pm.beforeRender=function(r,e){if(!this.destroyed){e==null&&Hi("Priority is not optional for beforeRender");var t=this.beforeRenderCallbacks;t.push({fn:r,priority:e}),t.sort(function(n,i){return i.priority-n.priority})}};var H2=function(e,t,n){for(var i=e.beforeRenderCallbacks,o=0;o<i.length;o++)i[o].fn(t,n)};pm.startRenderLoop=function(){var r=this,e=r.cy;if(!r.renderLoopStarted){r.renderLoopStarted=!0;var t=function(i){if(!r.destroyed){if(!e.batching())if(r.requestedFrame&&!r.skipFrame){H2(r,!0,i);var o=Th();r.render(r.renderOptions);var a=r.lastDrawTime=Th();r.averageRedrawTime===void 0&&(r.averageRedrawTime=a-o),r.redrawCount===void 0&&(r.redrawCount=0),r.redrawCount++,r.redrawTotalTime===void 0&&(r.redrawTotalTime=0);var s=a-o;r.redrawTotalTime+=s,r.lastRedrawTime=s,r.averageRedrawTime=r.averageRedrawTime/2+s/2,r.requestedFrame=!1}else H2(r,!1,i);r.skipFrame=!1,T0(t)}};T0(t)}};var lB=function(e){this.init(e)},rM=lB,Vg=rM.prototype;Vg.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];Vg.init=function(r){var e=this;e.options=r,e.cy=r.cy;var t=e.container=r.cy.container(),n=e.cy.window();if(n){var i=n.document,o=i.head,a="__________cytoscape_stylesheet",s="__________cytoscape_container",u=i.getElementById(a)!=null;if(t.className.indexOf(s)<0&&(t.className=(t.className||"")+" "+s),!u){var l=i.createElement("style");l.id=a,l.textContent="."+s+" { position: relative; }",o.insertBefore(l,o.children[0])}var c=n.getComputedStyle(t),f=c.getPropertyValue("position");f==="static"&&Bn("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=r.showFps,e.debug=r.debug,e.webgl=r.webgl,e.hideEdgesOnViewport=r.hideEdgesOnViewport,e.textureOnViewport=r.textureOnViewport,e.wheelSensitivity=r.wheelSensitivity,e.motionBlurEnabled=r.motionBlur,e.forcedPixelRatio=qt(r.pixelRatio)?r.pixelRatio:null,e.motionBlur=r.motionBlur,e.motionBlurOpacity=r.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=r.desktopTapThreshold,e.desktopTapThreshold2=r.desktopTapThreshold*r.desktopTapThreshold,e.touchTapThreshold=r.touchTapThreshold,e.touchTapThreshold2=r.touchTapThreshold*r.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};Vg.notify=function(r,e){var t=this,n=t.cy;if(!this.destroyed){if(r==="init"){t.load();return}if(r==="destroy"){t.destroy();return}(r==="add"||r==="remove"||r==="move"&&n.hasCompoundNodes()||r==="load"||r==="zorder"||r==="mount")&&t.invalidateCachedZSortedEles(),r==="viewport"&&t.redrawHint("select",!0),r==="gc"&&t.redrawHint("gc",!0),(r==="load"||r==="resize"||r==="mount")&&(t.invalidateContainerClientCoordsCache(),t.matchCanvasSize(t.container)),t.redrawHint("eles",!0),t.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};Vg.destroy=function(){var r=this;r.destroyed=!0,r.cy.stopAnimationLoop();for(var e=0;e<r.bindings.length;e++){var t=r.bindings[e],n=t,i=n.target;(i.off||i.removeEventListener).apply(i,n.args)}if(r.bindings=[],r.beforeRenderCallbacks=[],r.onUpdateEleCalcsFns=[],r.removeObserver&&r.removeObserver.disconnect(),r.styleObserver&&r.styleObserver.disconnect(),r.resizeObserver&&r.resizeObserver.disconnect(),r.labelCalcDiv)try{document.body.removeChild(r.labelCalcDiv)}catch{}};Vg.isHeadless=function(){return!1};[DS,eM,tM,Gg,Ah,pm].forEach(function(r){_r(Vg,r)});var Dw=1e3/60,nM={setupDequeueing:function(e){return function(){var n=this,i=this.renderer;if(!n.dequeueingSetup){n.dequeueingSetup=!0;var o=cm(function(){i.redrawHint("eles",!0),i.redrawHint("drag",!0),i.redraw()},e.deqRedrawThreshold),a=function(l,c){var f=Th(),h=i.averageRedrawTime,d=i.lastRedrawTime,v=[],y=i.cy.extent(),w=i.getPixelRatio();for(l||i.flushRenderedStyleQueue();;){var b=Th(),p=b-f,_=b-c;if(d<Dw){var O=Dw-(l?h:0);if(_>=e.deqFastCost*O)break}else if(l){if(p>=e.deqCost*d||p>=e.deqAvgCost*h)break}else if(_>=e.deqNoDrawCost*Dw)break;var P=e.deq(n,w,y);if(P.length>0)for(var R=0;R<P.length;R++)v.push(P[R]);else break}v.length>0&&(e.onDeqd(n,v),!l&&e.shouldRedraw(n,v,w,y)&&o())},s=e.priority||bS;i.beforeRender(a,s(n))}}}},cB=function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:C0;$d(this,r),this.idsByKey=new Eh,this.keyForId=new Eh,this.cachesByLvl=new Eh,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=t}return Yd(r,[{key:"getIdsFor",value:function(t){t==null&&Hi("Can not get id list for null key");var n=this.idsByKey,i=this.idsByKey.get(t);return i||(i=new Bg,n.set(t,i)),i}},{key:"addIdForKey",value:function(t,n){t!=null&&this.getIdsFor(t).add(n)}},{key:"deleteIdForKey",value:function(t,n){t!=null&&this.getIdsFor(t).delete(n)}},{key:"getNumberOfIdsForKey",value:function(t){return t==null?0:this.getIdsFor(t).size}},{key:"updateKeyMappingFor",value:function(t){var n=t.id(),i=this.keyForId.get(n),o=this.getKey(t);this.deleteIdForKey(i,n),this.addIdForKey(o,n),this.keyForId.set(n,o)}},{key:"deleteKeyMappingFor",value:function(t){var n=t.id(),i=this.keyForId.get(n);this.deleteIdForKey(i,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(t){var n=t.id(),i=this.keyForId.get(n),o=this.getKey(t);return i!==o}},{key:"isInvalid",value:function(t){return this.keyHasChangedFor(t)||this.doesEleInvalidateKey(t)}},{key:"getCachesAt",value:function(t){var n=this.cachesByLvl,i=this.lvls,o=n.get(t);return o||(o=new Eh,n.set(t,o),i.push(t)),o}},{key:"getCache",value:function(t,n){return this.getCachesAt(n).get(t)}},{key:"get",value:function(t,n){var i=this.getKey(t),o=this.getCache(i,n);return o!=null&&this.updateKeyMappingFor(t),o}},{key:"getForCachedKey",value:function(t,n){var i=this.keyForId.get(t.id()),o=this.getCache(i,n);return o}},{key:"hasCache",value:function(t,n){return this.getCachesAt(n).has(t)}},{key:"has",value:function(t,n){var i=this.getKey(t);return this.hasCache(i,n)}},{key:"setCache",value:function(t,n,i){i.key=t,this.getCachesAt(n).set(t,i)}},{key:"set",value:function(t,n,i){var o=this.getKey(t);this.setCache(o,n,i),this.updateKeyMappingFor(t)}},{key:"deleteCache",value:function(t,n){this.getCachesAt(n).delete(t)}},{key:"delete",value:function(t,n){var i=this.getKey(t);this.deleteCache(i,n)}},{key:"invalidateKey",value:function(t){var n=this;this.lvls.forEach(function(i){return n.deleteCache(t,i)})}},{key:"invalidate",value:function(t){var n=t.id(),i=this.keyForId.get(n);this.deleteKeyMappingFor(t);var o=this.doesEleInvalidateKey(t);return o&&this.invalidateKey(i),o||this.getNumberOfIdsForKey(i)===0}}])}(),$2=25,e0=50,_0=-4,Yx=3,iM=7.99,fB=8,hB=1024,dB=1024,vB=1024,pB=.2,gB=.8,yB=10,mB=.15,bB=.1,_B=.9,wB=.9,EB=100,OB=1,Og={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},xB=Vo({getKey:null,doesEleInvalidateKey:C0,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:$k,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),Ly=function(e,t){var n=this;n.renderer=e,n.onDequeues=[];var i=xB(t);_r(n,i),n.lookup=new cB(i.getKey,i.doesEleInvalidateKey),n.setupDequeueing()},Wo=Ly.prototype;Wo.reasons=Og;Wo.getTextureQueue=function(r){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[r]=e.eleImgCaches[r]||[]};Wo.getRetiredTextureQueue=function(r){var e=this,t=e.eleImgCaches.retired=e.eleImgCaches.retired||{},n=t[r]=t[r]||[];return n};Wo.getElementQueue=function(){var r=this,e=r.eleCacheQueue=r.eleCacheQueue||new fm(function(t,n){return n.reqs-t.reqs});return e};Wo.getElementKeyToQueue=function(){var r=this,e=r.eleKeyToCacheQueue=r.eleKeyToCacheQueue||{};return e};Wo.getElement=function(r,e,t,n,i){var o=this,a=this.renderer,s=a.cy.zoom(),u=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!r.visible()||r.removed()||!o.allowEdgeTxrCaching&&r.isEdge()||!o.allowParentTxrCaching&&r.isParent())return null;if(n==null&&(n=Math.ceil(wS(s*t))),n<_0)n=_0;else if(s>=iM||n>Yx)return null;var l=Math.pow(2,n),c=e.h*l,f=e.w*l,h=a.eleTextBiggerThanMin(r,l);if(!this.isVisible(r,h))return null;var d=u.get(r,n);if(d&&d.invalidated&&(d.invalidated=!1,d.texture.invalidatedWidth-=d.width),d)return d;var v;if(c<=$2?v=$2:c<=e0?v=e0:v=Math.ceil(c/e0)*e0,c>vB||f>dB)return null;var y=o.getTextureQueue(v),w=y[y.length-2],b=function(){return o.recycleTexture(v,f)||o.addTexture(v,f)};w||(w=y[y.length-1]),w||(w=b()),w.width-w.usedWidth<f&&(w=b());for(var p=function(te){return te&&te.scaledLabelShown===h},_=i&&i===Og.dequeue,O=i&&i===Og.highQuality,P=i&&i===Og.downscale,R,T=n+1;T<=Yx;T++){var A=u.get(r,T);if(A){R=A;break}}var M=R&&R.level===n+1?R:null,N=function(){w.context.drawImage(M.texture.canvas,M.x,0,M.width,M.height,w.usedWidth,0,f,c)};if(w.context.setTransform(1,0,0,1,0,0),w.context.clearRect(w.usedWidth,0,f,v),p(M))N();else if(p(R))if(O){for(var j=R.level;j>n;j--)M=o.getElement(r,e,t,j,Og.downscale);N()}else return o.queueElement(r,R.level-1),R;else{var B;if(!_&&!O&&!P)for(var q=n-1;q>=_0;q--){var W=u.get(r,q);if(W){B=W;break}}if(p(B))return o.queueElement(r,n),B;w.context.translate(w.usedWidth,0),w.context.scale(l,l),this.drawElement(w.context,r,e,h,!1),w.context.scale(1/l,1/l),w.context.translate(-w.usedWidth,0)}return d={x:w.usedWidth,texture:w,level:n,scale:l,width:f,height:c,scaledLabelShown:h},w.usedWidth+=Math.ceil(f+fB),w.eleCaches.push(d),u.set(r,n,d),o.checkTextureFullness(w),d};Wo.invalidateElements=function(r){for(var e=0;e<r.length;e++)this.invalidateElement(r[e])};Wo.invalidateElement=function(r){var e=this,t=e.lookup,n=[],i=t.isInvalid(r);if(i){for(var o=_0;o<=Yx;o++){var a=t.getForCachedKey(r,o);a&&n.push(a)}var s=t.invalidate(r);if(s)for(var u=0;u<n.length;u++){var l=n[u],c=l.texture;c.invalidatedWidth+=l.width,l.invalidated=!0,e.checkTextureUtility(c)}e.removeFromQueue(r)}};Wo.checkTextureUtility=function(r){r.invalidatedWidth>=pB*r.width&&this.retireTexture(r)};Wo.checkTextureFullness=function(r){var e=this,t=e.getTextureQueue(r.height);r.usedWidth/r.width>gB&&r.fullnessChecks>=yB?Ud(t,r):r.fullnessChecks++};Wo.retireTexture=function(r){var e=this,t=r.height,n=e.getTextureQueue(t),i=this.lookup;Ud(n,r),r.retired=!0;for(var o=r.eleCaches,a=0;a<o.length;a++){var s=o[a];i.deleteCache(s.key,s.level)}_S(o);var u=e.getRetiredTextureQueue(t);u.push(r)};Wo.addTexture=function(r,e){var t=this,n=t.getTextureQueue(r),i={};return n.push(i),i.eleCaches=[],i.height=r,i.width=Math.max(hB,e),i.usedWidth=0,i.invalidatedWidth=0,i.fullnessChecks=0,i.canvas=t.renderer.makeOffscreenCanvas(i.width,i.height),i.context=i.canvas.getContext("2d"),i};Wo.recycleTexture=function(r,e){for(var t=this,n=t.getTextureQueue(r),i=t.getRetiredTextureQueue(r),o=0;o<i.length;o++){var a=i[o];if(a.width>=e)return a.retired=!1,a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,_S(a.eleCaches),a.context.setTransform(1,0,0,1,0,0),a.context.clearRect(0,0,a.width,a.height),Ud(i,a),n.push(a),a}};Wo.queueElement=function(r,e){var t=this,n=t.getElementQueue(),i=t.getElementKeyToQueue(),o=this.getKey(r),a=i[o];if(a)a.level=Math.max(a.level,e),a.eles.merge(r),a.reqs++,n.updateItem(a);else{var s={eles:r.spawn().merge(r),level:e,reqs:1,key:o};n.push(s),i[o]=s}};Wo.dequeue=function(r){for(var e=this,t=e.getElementQueue(),n=e.getElementKeyToQueue(),i=[],o=e.lookup,a=0;a<OB&&t.size()>0;a++){var s=t.pop(),u=s.key,l=s.eles[0],c=o.hasCache(l,s.level);if(n[u]=null,c)continue;i.push(s);var f=e.getBoundingBox(l);e.getElement(l,f,r,s.level,Og.dequeue)}return i};Wo.removeFromQueue=function(r){var e=this,t=e.getElementQueue(),n=e.getElementKeyToQueue(),i=this.getKey(r),o=n[i];o!=null&&(o.eles.length===1?(o.reqs=mS,t.updateItem(o),t.pop(),n[i]=null):o.eles.unmerge(r))};Wo.onDequeue=function(r){this.onDequeues.push(r)};Wo.offDequeue=function(r){Ud(this.onDequeues,r)};Wo.setupDequeueing=nM.setupDequeueing({deqRedrawThreshold:EB,deqCost:mB,deqAvgCost:bB,deqNoDrawCost:_B,deqFastCost:wB,deq:function(e,t,n){return e.dequeue(t,n)},onDeqd:function(e,t){for(var n=0;n<e.onDequeues.length;n++){var i=e.onDequeues[n];i(t)}},shouldRedraw:function(e,t,n,i){for(var o=0;o<t.length;o++)for(var a=t[o].eles,s=0;s<a.length;s++){var u=a[s].boundingBox();if(ES(u,i))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var SB=1,Wy=-4,L0=2,TB=3.99,CB=50,PB=50,AB=.15,RB=.1,IB=.9,kB=.9,DB=1,Y2=250,MB=4e3*4e3,X2=32767,LB=!0,oM=function(e){var t=this,n=t.renderer=e,i=n.cy;t.layersByLevel={},t.firstGet=!0,t.lastInvalidationTime=Th()-2*Y2,t.skipping=!1,t.eleTxrDeqs=i.collection(),t.scheduleElementRefinement=cm(function(){t.refineElementTextures(t.eleTxrDeqs),t.eleTxrDeqs.unmerge(t.eleTxrDeqs)},PB),n.beforeRender(function(a,s){s-t.lastInvalidationTime<=Y2?t.skipping=!0:t.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var o=function(s,u){return u.reqs-s.reqs};t.layersQueue=new fm(o),t.setupDequeueing()},Ma=oM.prototype,K2=0,NB=Math.pow(2,53)-1;Ma.makeLayer=function(r,e){var t=Math.pow(2,e),n=Math.ceil(r.w*t),i=Math.ceil(r.h*t),o=this.renderer.makeOffscreenCanvas(n,i),a={id:K2=++K2%NB,bb:r,level:e,width:n,height:i,canvas:o,context:o.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=a.context,u=-a.bb.x1,l=-a.bb.y1;return s.scale(t,t),s.translate(u,l),a};Ma.getLayers=function(r,e,t){var n=this,i=n.renderer,o=i.cy,a=o.zoom(),s=n.firstGet;if(n.firstGet=!1,t==null){if(t=Math.ceil(wS(a*e)),t<Wy)t=Wy;else if(a>=TB||t>L0)return null}n.validateLayersElesOrdering(t,r);var u=n.layersByLevel,l=Math.pow(2,t),c=u[t]=u[t]||[],f,h=n.levelIsComplete(t,r),d,v=function(){var N=function(J){if(n.validateLayersElesOrdering(J,r),n.levelIsComplete(J,r))return d=u[J],!0},j=function(J){if(!d)for(var te=t+J;Wy<=te&&te<=L0&&!N(te);te+=J);};j(1),j(-1);for(var B=c.length-1;B>=0;B--){var q=c[B];q.invalid&&Ud(c,q)}};if(!h)v();else return c;var y=function(){if(!f){f=$s();for(var N=0;N<r.length;N++)Jk(f,r[N].boundingBox())}return f},w=function(N){N=N||{};var j=N.after;y();var B=Math.ceil(f.w*l),q=Math.ceil(f.h*l);if(B>X2||q>X2)return null;var W=B*q;if(W>MB)return null;var J=n.makeLayer(f,t);if(j!=null){var te=c.indexOf(j)+1;c.splice(te,0,J)}else(N.insert===void 0||N.insert)&&c.unshift(J);return J};if(n.skipping&&!s)return null;for(var b=null,p=r.length/SB,_=!s,O=0;O<r.length;O++){var P=r[O],R=P._private.rscratch,T=R.imgLayerCaches=R.imgLayerCaches||{},A=T[t];if(A){b=A;continue}if((!b||b.eles.length>=p||!eD(b.bb,P.boundingBox()))&&(b=w({insert:!0,after:b}),!b))return null;d||_?n.queueLayer(b,P):n.drawEleInLayer(b,P,t,e),b.eles.push(P),T[t]=b}return d||(_?null:c)};Ma.getEleLevelForLayerLevel=function(r,e){return r};Ma.drawEleInLayer=function(r,e,t,n){var i=this,o=this.renderer,a=r.context,s=e.boundingBox();s.w===0||s.h===0||!e.visible()||(t=i.getEleLevelForLayerLevel(t,n),o.setImgSmoothing(a,!1),o.drawCachedElement(a,e,null,null,t,LB),o.setImgSmoothing(a,!0))};Ma.levelIsComplete=function(r,e){var t=this,n=t.layersByLevel[r];if(!n||n.length===0)return!1;for(var i=0,o=0;o<n.length;o++){var a=n[o];if(a.reqs>0||a.invalid)return!1;i+=a.eles.length}return i===e.length};Ma.validateLayersElesOrdering=function(r,e){var t=this.layersByLevel[r];if(t)for(var n=0;n<t.length;n++){for(var i=t[n],o=-1,a=0;a<e.length;a++)if(i.eles[0]===e[a]){o=a;break}if(o<0){this.invalidateLayer(i);continue}for(var s=o,a=0;a<i.eles.length;a++)if(i.eles[a]!==e[s+a]){this.invalidateLayer(i);break}}};Ma.updateElementsInLayers=function(r,e){for(var t=this,n=am(r[0]),i=0;i<r.length;i++)for(var o=n?null:r[i],a=n?r[i]:r[i].ele,s=a._private.rscratch,u=s.imgLayerCaches=s.imgLayerCaches||{},l=Wy;l<=L0;l++){var c=u[l];c&&(o&&t.getEleLevelForLayerLevel(c.level)!==o.level||e(c,a,o))}};Ma.haveLayers=function(){for(var r=this,e=!1,t=Wy;t<=L0;t++){var n=r.layersByLevel[t];if(n&&n.length>0){e=!0;break}}return e};Ma.invalidateElements=function(r){var e=this;r.length!==0&&(e.lastInvalidationTime=Th(),!(r.length===0||!e.haveLayers())&&e.updateElementsInLayers(r,function(n,i,o){e.invalidateLayer(n)}))};Ma.invalidateLayer=function(r){if(this.lastInvalidationTime=Th(),!r.invalid){var e=r.level,t=r.eles,n=this.layersByLevel[e];Ud(n,r),r.elesQueue=[],r.invalid=!0,r.replacement&&(r.replacement.invalid=!0);for(var i=0;i<t.length;i++){var o=t[i]._private.rscratch.imgLayerCaches;o&&(o[e]=null)}}};Ma.refineElementTextures=function(r){var e=this;e.updateElementsInLayers(r,function(n,i,o){var a=n.replacement;if(a||(a=n.replacement=e.makeLayer(n.bb,n.level),a.replaces=n,a.eles=n.eles),!a.reqs)for(var s=0;s<a.eles.length;s++)e.queueLayer(a,a.eles[s])})};Ma.enqueueElementRefinement=function(r){this.eleTxrDeqs.merge(r),this.scheduleElementRefinement()};Ma.queueLayer=function(r,e){var t=this,n=t.layersQueue,i=r.elesQueue,o=i.hasId=i.hasId||{};if(!r.replacement){if(e){if(o[e.id()])return;i.push(e),o[e.id()]=!0}r.reqs?(r.reqs++,n.updateItem(r)):(r.reqs=1,n.push(r))}};Ma.dequeue=function(r){for(var e=this,t=e.layersQueue,n=[],i=0;i<DB&&t.size()!==0;){var o=t.peek();if(o.replacement){t.pop();continue}if(o.replaces&&o!==o.replaces.replacement){t.pop();continue}if(o.invalid){t.pop();continue}var a=o.elesQueue.shift();a&&(e.drawEleInLayer(o,a,o.level,r),i++),n.length===0&&n.push(!0),o.elesQueue.length===0&&(t.pop(),o.reqs=0,o.replaces&&e.applyLayerReplacement(o),e.requestRedraw())}return n};Ma.applyLayerReplacement=function(r){var e=this,t=e.layersByLevel[r.level],n=r.replaces,i=t.indexOf(n);if(!(i<0||n.invalid)){t[i]=r;for(var o=0;o<r.eles.length;o++){var a=r.eles[o]._private,s=a.imgLayerCaches=a.imgLayerCaches||{};s&&(s[r.level]=r)}e.requestRedraw()}};Ma.requestRedraw=cm(function(){var r=this.renderer;r.redrawHint("eles",!0),r.redrawHint("drag",!0),r.redraw()},100);Ma.setupDequeueing=nM.setupDequeueing({deqRedrawThreshold:CB,deqCost:AB,deqAvgCost:RB,deqNoDrawCost:IB,deqFastCost:kB,deq:function(e,t){return e.dequeue(t)},onDeqd:bS,shouldRedraw:$k,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var aM={},Z2;function jB(r,e){for(var t=0;t<e.length;t++){var n=e[t];r.lineTo(n.x,n.y)}}function FB(r,e,t){for(var n,i=0;i<e.length;i++){var o=e[i];i===0&&(n=o),r.lineTo(o.x,o.y)}r.quadraticCurveTo(t.x,t.y,n.x,n.y)}function Q2(r,e,t){r.beginPath&&r.beginPath();for(var n=e,i=0;i<n.length;i++){var o=n[i];r.lineTo(o.x,o.y)}var a=t,s=t[0];r.moveTo(s.x,s.y);for(var i=1;i<a.length;i++){var o=a[i];r.lineTo(o.x,o.y)}r.closePath&&r.closePath()}function BB(r,e,t,n,i){r.beginPath&&r.beginPath(),r.arc(t,n,i,0,Math.PI*2,!1);var o=e,a=o[0];r.moveTo(a.x,a.y);for(var s=0;s<o.length;s++){var u=o[s];r.lineTo(u.x,u.y)}r.closePath&&r.closePath()}function UB(r,e,t,n){r.arc(e,t,n,0,Math.PI*2,!1)}aM.arrowShapeImpl=function(r){return(Z2||(Z2={polygon:jB,"triangle-backcurve":FB,"triangle-tee":Q2,"circle-triangle":BB,"triangle-cross":Q2,circle:UB}))[r]};var pf={};pf.drawElement=function(r,e,t,n,i,o){var a=this;e.isNode()?a.drawNode(r,e,t,n,i,o):a.drawEdge(r,e,t,n,i,o)};pf.drawElementOverlay=function(r,e){var t=this;e.isNode()?t.drawNodeOverlay(r,e):t.drawEdgeOverlay(r,e)};pf.drawElementUnderlay=function(r,e){var t=this;e.isNode()?t.drawNodeUnderlay(r,e):t.drawEdgeUnderlay(r,e)};pf.drawCachedElementPortion=function(r,e,t,n,i,o,a,s){var u=this,l=t.getBoundingBox(e);if(!(l.w===0||l.h===0)){var c=t.getElement(e,l,n,i,o);if(c!=null){var f=s(u,e);if(f===0)return;var h=a(u,e),d=l.x1,v=l.y1,y=l.w,w=l.h,b,p,_,O,P;if(h!==0){var R=t.getRotationPoint(e);_=R.x,O=R.y,r.translate(_,O),r.rotate(h),P=u.getImgSmoothing(r),P||u.setImgSmoothing(r,!0);var T=t.getRotationOffset(e);b=T.x,p=T.y}else b=d,p=v;var A;f!==1&&(A=r.globalAlpha,r.globalAlpha=A*f),r.drawImage(c.texture.canvas,c.x,0,c.width,c.height,b,p,y,w),f!==1&&(r.globalAlpha=A),h!==0&&(r.rotate(-h),r.translate(-_,-O),P||u.setImgSmoothing(r,!1))}else t.drawElement(r,e)}};var zB=function(){return 0},qB=function(e,t){return e.getTextAngle(t,null)},GB=function(e,t){return e.getTextAngle(t,"source")},VB=function(e,t){return e.getTextAngle(t,"target")},WB=function(e,t){return t.effectiveOpacity()},Mw=function(e,t){return t.pstyle("text-opacity").pfValue*t.effectiveOpacity()};pf.drawCachedElement=function(r,e,t,n,i,o){var a=this,s=a.data,u=s.eleTxrCache,l=s.lblTxrCache,c=s.slbTxrCache,f=s.tlbTxrCache,h=e.boundingBox(),d=o===!0?u.reasons.highQuality:null;if(!(h.w===0||h.h===0||!e.visible())&&(!n||ES(h,n))){var v=e.isEdge(),y=e.element()._private.rscratch.badLine;a.drawElementUnderlay(r,e),a.drawCachedElementPortion(r,e,u,t,i,d,zB,WB),(!v||!y)&&a.drawCachedElementPortion(r,e,l,t,i,d,qB,Mw),v&&!y&&(a.drawCachedElementPortion(r,e,c,t,i,d,GB,Mw),a.drawCachedElementPortion(r,e,f,t,i,d,VB,Mw)),a.drawElementOverlay(r,e)}};pf.drawElements=function(r,e){for(var t=this,n=0;n<e.length;n++){var i=e[n];t.drawElement(r,i)}};pf.drawCachedElements=function(r,e,t,n){for(var i=this,o=0;o<e.length;o++){var a=e[o];i.drawCachedElement(r,a,t,n)}};pf.drawCachedNodes=function(r,e,t,n){for(var i=this,o=0;o<e.length;o++){var a=e[o];a.isNode()&&i.drawCachedElement(r,a,t,n)}};pf.drawLayeredElements=function(r,e,t,n){var i=this,o=i.data.lyrTxrCache.getLayers(e,t);if(o)for(var a=0;a<o.length;a++){var s=o[a],u=s.bb;u.w===0||u.h===0||r.drawImage(s.canvas,u.x1,u.y1,u.w,u.h)}else i.drawCachedElements(r,e,t,n)};var Rh={};Rh.drawEdge=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,a=this,s=e._private.rscratch;if(!(o&&!e.visible())&&!(s.badLine||s.allpts==null||isNaN(s.allpts[0]))){var u;t&&(u=t,r.translate(-u.x1,-u.y1));var l=o?e.pstyle("opacity").value:1,c=o?e.pstyle("line-opacity").value:1,f=e.pstyle("curve-style").value,h=e.pstyle("line-style").value,d=e.pstyle("width").pfValue,v=e.pstyle("line-cap").value,y=e.pstyle("line-outline-width").value,w=e.pstyle("line-outline-color").value,b=l*c,p=l*c,_=function(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b;f==="straight-triangle"?(a.eleStrokeStyle(r,e,J),a.drawEdgeTrianglePath(e,r,s.allpts)):(r.lineWidth=d,r.lineCap=v,a.eleStrokeStyle(r,e,J),a.drawEdgePath(e,r,s.allpts,h),r.lineCap="butt")},O=function(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b;if(r.lineWidth=d+y,r.lineCap=v,y>0)a.colorStrokeStyle(r,w[0],w[1],w[2],J);else{r.lineCap="butt";return}f==="straight-triangle"?a.drawEdgeTrianglePath(e,r,s.allpts):(a.drawEdgePath(e,r,s.allpts,h),r.lineCap="butt")},P=function(){i&&a.drawEdgeOverlay(r,e)},R=function(){i&&a.drawEdgeUnderlay(r,e)},T=function(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p;a.drawArrowheads(r,e,J)},A=function(){a.drawElementText(r,e,null,n)};r.lineJoin="round";var M=e.pstyle("ghost").value==="yes";if(M){var N=e.pstyle("ghost-offset-x").pfValue,j=e.pstyle("ghost-offset-y").pfValue,B=e.pstyle("ghost-opacity").value,q=b*B;r.translate(N,j),_(q),T(q),r.translate(-N,-j)}else O();R(),_(),T(),P(),A(),t&&r.translate(u.x1,u.y1)}};var sM=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n){if(n.visible()){var i=n.pstyle("".concat(e,"-opacity")).value;if(i!==0){var o=this,a=o.usePaths(),s=n._private.rscratch,u=n.pstyle("".concat(e,"-padding")).pfValue,l=2*u,c=n.pstyle("".concat(e,"-color")).value;t.lineWidth=l,s.edgeType==="self"&&!a?t.lineCap="butt":t.lineCap="round",o.colorStrokeStyle(t,c[0],c[1],c[2],i),o.drawEdgePath(n,t,s.allpts,"solid")}}}};Rh.drawEdgeOverlay=sM("overlay");Rh.drawEdgeUnderlay=sM("underlay");Rh.drawEdgePath=function(r,e,t,n){var i=r._private.rscratch,o=e,a,s=!1,u=this.usePaths(),l=r.pstyle("line-dash-pattern").pfValue,c=r.pstyle("line-dash-offset").pfValue;if(u){var f=t.join("$"),h=i.pathCacheKey&&i.pathCacheKey===f;h?(a=e=i.pathCache,s=!0):(a=e=new Path2D,i.pathCacheKey=f,i.pathCache=a)}if(o.setLineDash)switch(n){case"dotted":o.setLineDash([1,1]);break;case"dashed":o.setLineDash(l),o.lineDashOffset=c;break;case"solid":o.setLineDash([]);break}if(!s&&!i.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(t[0],t[1]),i.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var d=2;d+3<t.length;d+=4)e.quadraticCurveTo(t[d],t[d+1],t[d+2],t[d+3]);break;case"straight":case"haystack":for(var v=2;v+1<t.length;v+=2)e.lineTo(t[v],t[v+1]);break;case"segments":if(i.isRound){var y=cc(i.roundCorners),w;try{for(y.s();!(w=y.n()).done;){var b=w.value;XD(e,b)}}catch(_){y.e(_)}finally{y.f()}e.lineTo(t[t.length-2],t[t.length-1])}else for(var p=2;p+1<t.length;p+=2)e.lineTo(t[p],t[p+1]);break}e=o,u?e.stroke(a):e.stroke(),e.setLineDash&&e.setLineDash([])};Rh.drawEdgeTrianglePath=function(r,e,t){e.fillStyle=e.strokeStyle;for(var n=r.pstyle("width").pfValue,i=0;i+1<t.length;i+=2){var o=[t[i+2]-t[i],t[i+3]-t[i+1]],a=Math.sqrt(o[0]*o[0]+o[1]*o[1]),s=[o[1]/a,-o[0]/a],u=[s[0]*n/2,s[1]*n/2];e.beginPath(),e.moveTo(t[i]-u[0],t[i+1]-u[1]),e.lineTo(t[i]+u[0],t[i+1]+u[1]),e.lineTo(t[i+2],t[i+3]),e.closePath(),e.fill()}};Rh.drawArrowheads=function(r,e,t){var n=e._private.rscratch,i=n.edgeType==="haystack";i||this.drawArrowhead(r,e,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,t),this.drawArrowhead(r,e,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,t),this.drawArrowhead(r,e,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,t),i||this.drawArrowhead(r,e,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,t)};Rh.drawArrowhead=function(r,e,t,n,i,o,a){if(!(isNaN(n)||n==null||isNaN(i)||i==null||isNaN(o)||o==null)){var s=this,u=e.pstyle(t+"-arrow-shape").value;if(u!=="none"){var l=e.pstyle(t+"-arrow-fill").value==="hollow"?"both":"filled",c=e.pstyle(t+"-arrow-fill").value,f=e.pstyle("width").pfValue,h=e.pstyle(t+"-arrow-width"),d=h.value==="match-line"?f:h.pfValue;h.units==="%"&&(d*=f);var v=e.pstyle("opacity").value;a===void 0&&(a=v);var y=r.globalCompositeOperation;(a!==1||c==="hollow")&&(r.globalCompositeOperation="destination-out",s.colorFillStyle(r,255,255,255,1),s.colorStrokeStyle(r,255,255,255,1),s.drawArrowShape(e,r,l,f,u,d,n,i,o),r.globalCompositeOperation=y);var w=e.pstyle(t+"-arrow-color").value;s.colorFillStyle(r,w[0],w[1],w[2],a),s.colorStrokeStyle(r,w[0],w[1],w[2],a),s.drawArrowShape(e,r,c,f,u,d,n,i,o)}}};Rh.drawArrowShape=function(r,e,t,n,i,o,a,s,u){var l=this,c=this.usePaths()&&i!=="triangle-cross",f=!1,h,d=e,v={x:a,y:s},y=r.pstyle("arrow-scale").value,w=this.getArrowWidth(n,y),b=l.arrowShapes[i];if(c){var p=l.arrowPathCache=l.arrowPathCache||[],_=Bd(i),O=p[_];O!=null?(h=e=O,f=!0):(h=e=new Path2D,p[_]=h)}f||(e.beginPath&&e.beginPath(),c?b.draw(e,1,0,{x:0,y:0},1):b.draw(e,w,u,v,n),e.closePath&&e.closePath()),e=d,c&&(e.translate(a,s),e.rotate(u),e.scale(w,w)),(t==="filled"||t==="both")&&(c?e.fill(h):e.fill()),(t==="hollow"||t==="both")&&(e.lineWidth=o/(c?w:1),e.lineJoin="miter",c?e.stroke(h):e.stroke()),c&&(e.scale(1/w,1/w),e.rotate(-u),e.translate(-a,-s))};var NS={};NS.safeDrawImage=function(r,e,t,n,i,o,a,s,u,l){if(!(i<=0||o<=0||u<=0||l<=0))try{r.drawImage(e,t,n,i,o,a,s,u,l)}catch(c){Bn(c)}};NS.drawInscribedImage=function(r,e,t,n,i){var o=this,a=t.position(),s=a.x,u=a.y,l=t.cy().style(),c=l.getIndexedStyle.bind(l),f=c(t,"background-fit","value",n),h=c(t,"background-repeat","value",n),d=t.width(),v=t.height(),y=t.padding()*2,w=d+(c(t,"background-width-relative-to","value",n)==="inner"?0:y),b=v+(c(t,"background-height-relative-to","value",n)==="inner"?0:y),p=t._private.rscratch,_=c(t,"background-clip","value",n),O=_==="node",P=c(t,"background-image-opacity","value",n)*i,R=c(t,"background-image-smoothing","value",n),T=t.pstyle("corner-radius").value;T!=="auto"&&(T=t.pstyle("corner-radius").pfValue);var A=e.width||e.cachedW,M=e.height||e.cachedH;(A==null||M==null)&&(document.body.appendChild(e),A=e.cachedW=e.width||e.offsetWidth,M=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var N=A,j=M;if(c(t,"background-width","value",n)!=="auto"&&(c(t,"background-width","units",n)==="%"?N=c(t,"background-width","pfValue",n)*w:N=c(t,"background-width","pfValue",n)),c(t,"background-height","value",n)!=="auto"&&(c(t,"background-height","units",n)==="%"?j=c(t,"background-height","pfValue",n)*b:j=c(t,"background-height","pfValue",n)),!(N===0||j===0)){if(f==="contain"){var B=Math.min(w/N,b/j);N*=B,j*=B}else if(f==="cover"){var B=Math.max(w/N,b/j);N*=B,j*=B}var q=s-w/2,W=c(t,"background-position-x","units",n),J=c(t,"background-position-x","pfValue",n);W==="%"?q+=(w-N)*J:q+=J;var te=c(t,"background-offset-x","units",n),re=c(t,"background-offset-x","pfValue",n);te==="%"?q+=(w-N)*re:q+=re;var ee=u-b/2,fe=c(t,"background-position-y","units",n),he=c(t,"background-position-y","pfValue",n);fe==="%"?ee+=(b-j)*he:ee+=he;var se=c(t,"background-offset-y","units",n),me=c(t,"background-offset-y","pfValue",n);se==="%"?ee+=(b-j)*me:ee+=me,p.pathCache&&(q-=s,ee-=u,s=0,u=0);var De=r.globalAlpha;r.globalAlpha=P;var Le=o.getImgSmoothing(r),Ie=!1;if(R==="no"&&Le?(o.setImgSmoothing(r,!1),Ie=!0):R==="yes"&&!Le&&(o.setImgSmoothing(r,!0),Ie=!0),h==="no-repeat")O&&(r.save(),p.pathCache?r.clip(p.pathCache):(o.nodeShapes[o.getNodeShape(t)].draw(r,s,u,w,b,T,p),r.clip())),o.safeDrawImage(r,e,0,0,A,M,q,ee,N,j),O&&r.restore();else{var qe=r.createPattern(e,h);r.fillStyle=qe,o.nodeShapes[o.getNodeShape(t)].draw(r,s,u,w,b,T,p),r.translate(q,ee),r.fill(),r.translate(-q,-ee)}r.globalAlpha=De,Ie&&o.setImgSmoothing(r,Le)}};var vp={};vp.eleTextBiggerThanMin=function(r,e){if(!e){var t=r.cy().zoom(),n=this.getPixelRatio(),i=Math.ceil(wS(t*n));e=Math.pow(2,i)}var o=r.pstyle("font-size").pfValue*e,a=r.pstyle("min-zoomed-font-size").pfValue;return!(o<a)};vp.drawElementText=function(r,e,t,n,i){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,a=this;if(n==null){if(o&&!a.eleTextBiggerThanMin(e))return}else if(n===!1)return;if(e.isNode()){var s=e.pstyle("label");if(!s||!s.value)return;var u=a.getLabelJustification(e);r.textAlign=u,r.textBaseline="bottom"}else{var l=e.element()._private.rscratch.badLine,c=e.pstyle("label"),f=e.pstyle("source-label"),h=e.pstyle("target-label");if(l||(!c||!c.value)&&(!f||!f.value)&&(!h||!h.value))return;r.textAlign="center",r.textBaseline="bottom"}var d=!t,v;t&&(v=t,r.translate(-v.x1,-v.y1)),i==null?(a.drawText(r,e,null,d,o),e.isEdge()&&(a.drawText(r,e,"source",d,o),a.drawText(r,e,"target",d,o))):a.drawText(r,e,i,d,o),t&&r.translate(v.x1,v.y1)};vp.getFontCache=function(r){var e;this.fontCaches=this.fontCaches||[];for(var t=0;t<this.fontCaches.length;t++)if(e=this.fontCaches[t],e.context===r)return e;return e={context:r},this.fontCaches.push(e),e};vp.setupTextStyle=function(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=e.pstyle("font-style").strValue,i=e.pstyle("font-size").pfValue+"px",o=e.pstyle("font-family").strValue,a=e.pstyle("font-weight").strValue,s=t?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,u=e.pstyle("text-outline-opacity").value*s,l=e.pstyle("color").value,c=e.pstyle("text-outline-color").value;r.font=n+" "+a+" "+i+" "+o,r.lineJoin="round",this.colorFillStyle(r,l[0],l[1],l[2],s),this.colorStrokeStyle(r,c[0],c[1],c[2],u)};function Lw(r,e,t,n,i){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,a=arguments.length>6?arguments[6]:void 0;r.beginPath(),r.moveTo(e+o,t),r.lineTo(e+n-o,t),r.quadraticCurveTo(e+n,t,e+n,t+o),r.lineTo(e+n,t+i-o),r.quadraticCurveTo(e+n,t+i,e+n-o,t+i),r.lineTo(e+o,t+i),r.quadraticCurveTo(e,t+i,e,t+i-o),r.lineTo(e,t+o),r.quadraticCurveTo(e,t,e+o,t),r.closePath(),a?r.stroke():r.fill()}vp.getTextAngle=function(r,e){var t,n=r._private,i=n.rscratch,o=e?e+"-":"",a=r.pstyle(o+"text-rotation");if(a.strValue==="autorotate"){var s=ul(i,"labelAngle",e);t=r.isEdge()?s:0}else a.strValue==="none"?t=0:t=a.pfValue;return t};vp.drawText=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=e._private,a=o.rscratch,s=i?e.effectiveOpacity():1;if(!(i&&(s===0||e.pstyle("text-opacity").value===0))){t==="main"&&(t=null);var u=ul(a,"labelX",t),l=ul(a,"labelY",t),c,f,h=this.getLabelText(e,t);if(h!=null&&h!==""&&!isNaN(u)&&!isNaN(l)){this.setupTextStyle(r,e,i);var d=t?t+"-":"",v=ul(a,"labelWidth",t),y=ul(a,"labelHeight",t),w=e.pstyle(d+"text-margin-x").pfValue,b=e.pstyle(d+"text-margin-y").pfValue,p=e.isEdge(),_=e.pstyle("text-halign").value,O=e.pstyle("text-valign").value;p&&(_="center",O="center"),u+=w,l+=b;var P;switch(n?P=this.getTextAngle(e,t):P=0,P!==0&&(c=u,f=l,r.translate(c,f),r.rotate(P),u=0,l=0),O){case"top":break;case"center":l+=y/2;break;case"bottom":l+=y;break}var R=e.pstyle("text-background-opacity").value,T=e.pstyle("text-border-opacity").value,A=e.pstyle("text-border-width").pfValue,M=e.pstyle("text-background-padding").pfValue,N=e.pstyle("text-background-shape").strValue,j=N.indexOf("round")===0,B=2;if(R>0||A>0&&T>0){var q=u-M;switch(_){case"left":q-=v;break;case"center":q-=v/2;break}var W=l-y-M,J=v+2*M,te=y+2*M;if(R>0){var re=r.fillStyle,ee=e.pstyle("text-background-color").value;r.fillStyle="rgba("+ee[0]+","+ee[1]+","+ee[2]+","+R*s+")",j?Lw(r,q,W,J,te,B):r.fillRect(q,W,J,te),r.fillStyle=re}if(A>0&&T>0){var fe=r.strokeStyle,he=r.lineWidth,se=e.pstyle("text-border-color").value,me=e.pstyle("text-border-style").value;if(r.strokeStyle="rgba("+se[0]+","+se[1]+","+se[2]+","+T*s+")",r.lineWidth=A,r.setLineDash)switch(me){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash([4,2]);break;case"double":r.lineWidth=A/4,r.setLineDash([]);break;case"solid":r.setLineDash([]);break}if(j?Lw(r,q,W,J,te,B,"stroke"):r.strokeRect(q,W,J,te),me==="double"){var De=A/2;j?Lw(r,q+De,W+De,J-De*2,te-De*2,B,"stroke"):r.strokeRect(q+De,W+De,J-De*2,te-De*2)}r.setLineDash&&r.setLineDash([]),r.lineWidth=he,r.strokeStyle=fe}}var Le=2*e.pstyle("text-outline-width").pfValue;if(Le>0&&(r.lineWidth=Le),e.pstyle("text-wrap").value==="wrap"){var Ie=ul(a,"labelWrapCachedLines",t),qe=ul(a,"labelLineHeight",t),Ge=v/2,Me=this.getLabelJustification(e);switch(Me==="auto"||(_==="left"?Me==="left"?u+=-v:Me==="center"&&(u+=-Ge):_==="center"?Me==="left"?u+=-Ge:Me==="right"&&(u+=Ge):_==="right"&&(Me==="center"?u+=Ge:Me==="right"&&(u+=v))),O){case"top":l-=(Ie.length-1)*qe;break;case"center":case"bottom":l-=(Ie.length-1)*qe;break}for(var Pe=0;Pe<Ie.length;Pe++)Le>0&&r.strokeText(Ie[Pe],u,l),r.fillText(Ie[Pe],u,l),l+=qe}else Le>0&&r.strokeText(h,u,l),r.fillText(h,u,l);P!==0&&(r.rotate(-P),r.translate(-c,-f))}}};var Wg={};Wg.drawNode=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,a=this,s,u,l=e._private,c=l.rscratch,f=e.position();if(!(!qt(f.x)||!qt(f.y))&&!(o&&!e.visible())){var h=o?e.effectiveOpacity():1,d=a.usePaths(),v,y=!1,w=e.padding();s=e.width()+2*w,u=e.height()+2*w;var b;t&&(b=t,r.translate(-b.x1,-b.y1));for(var p=e.pstyle("background-image"),_=p.value,O=new Array(_.length),P=new Array(_.length),R=0,T=0;T<_.length;T++){var A=_[T],M=O[T]=A!=null&&A!=="none";if(M){var N=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",T);R++,P[T]=a.getCachedImage(A,N,function(){l.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var j=e.pstyle("background-blacken").value,B=e.pstyle("border-width").pfValue,q=e.pstyle("background-opacity").value*h,W=e.pstyle("border-color").value,J=e.pstyle("border-style").value,te=e.pstyle("border-join").value,re=e.pstyle("border-cap").value,ee=e.pstyle("border-position").value,fe=e.pstyle("border-dash-pattern").pfValue,he=e.pstyle("border-dash-offset").pfValue,se=e.pstyle("border-opacity").value*h,me=e.pstyle("outline-width").pfValue,De=e.pstyle("outline-color").value,Le=e.pstyle("outline-style").value,Ie=e.pstyle("outline-opacity").value*h,qe=e.pstyle("outline-offset").value,Ge=e.pstyle("corner-radius").value;Ge!=="auto"&&(Ge=e.pstyle("corner-radius").pfValue);var Me=function(){var Je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:q;a.eleFillStyle(r,e,Je)},Pe=function(){var Je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:se;a.colorStrokeStyle(r,W[0],W[1],W[2],Je)},de=function(){var Je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ie;a.colorStrokeStyle(r,De[0],De[1],De[2],Je)},Oe=function(Je,at,kt,dt){var Dt=a.nodePathCache=a.nodePathCache||[],Xt=Hk(kt==="polygon"?kt+","+dt.join(","):kt,""+at,""+Je,""+Ge),fr=Dt[Xt],Vt,lr=!1;return fr!=null?(Vt=fr,lr=!0,c.pathCache=Vt):(Vt=new Path2D,Dt[Xt]=c.pathCache=Vt),{path:Vt,cacheHit:lr}},Ae=e.pstyle("shape").strValue,Ve=e.pstyle("shape-polygon-points").pfValue;if(d){r.translate(f.x,f.y);var tt=Oe(s,u,Ae,Ve);v=tt.path,y=tt.cacheHit}var ht=function(){if(!y){var Je=f;d&&(Je={x:0,y:0}),a.nodeShapes[a.getNodeShape(e)].draw(v||r,Je.x,Je.y,s,u,Ge,c)}d?r.fill(v):r.fill()},xt=function(){for(var Je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h,at=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,kt=l.backgrounding,dt=0,Dt=0;Dt<P.length;Dt++){var Xt=e.cy().style().getIndexedStyle(e,"background-image-containment","value",Dt);if(at&&Xt==="over"||!at&&Xt==="inside"){dt++;continue}O[Dt]&&P[Dt].complete&&!P[Dt].error&&(dt++,a.drawInscribedImage(r,P[Dt],e,Dt,Je))}l.backgrounding=dt!==R,kt!==l.backgrounding&&e.updateStyle(!1)},ut=function(){var Je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,at=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h;a.hasPie(e)&&(a.drawPie(r,e,at),Je&&(d||a.nodeShapes[a.getNodeShape(e)].draw(r,f.x,f.y,s,u,Ge,c)))},H=function(){var Je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h,at=(j>0?j:-j)*Je,kt=j>0?0:255;j!==0&&(a.colorFillStyle(r,kt,kt,kt,at),d?r.fill(v):r.fill())},X=function(){if(B>0){if(r.lineWidth=B,r.lineCap=re,r.lineJoin=te,r.setLineDash)switch(J){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash(fe),r.lineDashOffset=he;break;case"solid":case"double":r.setLineDash([]);break}if(ee!=="center"){if(r.save(),r.lineWidth*=2,ee==="inside")d?r.clip(v):r.clip();else{var Je=new Path2D;Je.rect(-s/2-B,-u/2-B,s+2*B,u+2*B),Je.addPath(v),r.clip(Je,"evenodd")}d?r.stroke(v):r.stroke(),r.restore()}else d?r.stroke(v):r.stroke();if(J==="double"){r.lineWidth=B/3;var at=r.globalCompositeOperation;r.globalCompositeOperation="destination-out",d?r.stroke(v):r.stroke(),r.globalCompositeOperation=at}r.setLineDash&&r.setLineDash([])}},ne=function(){if(me>0){if(r.lineWidth=me,r.lineCap="butt",r.setLineDash)switch(Le){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash([4,2]);break;case"solid":case"double":r.setLineDash([]);break}var Je=f;d&&(Je={x:0,y:0});var at=a.getNodeShape(e),kt=B;ee==="inside"&&(kt=0),ee==="outside"&&(kt*=2);var dt=(s+kt+(me+qe))/s,Dt=(u+kt+(me+qe))/u,Xt=s*dt,fr=u*Dt,Vt=a.nodeShapes[at].points,lr;if(d){var ir=Oe(Xt,fr,at,Vt);lr=ir.path}if(at==="ellipse")a.drawEllipsePath(lr||r,Je.x,Je.y,Xt,fr);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(at)){var Jt=0,Wr=0,on=0;at==="round-diamond"?Jt=(kt+qe+me)*1.4:at==="round-heptagon"?(Jt=(kt+qe+me)*1.075,on=-(kt/2+qe+me)/35):at==="round-hexagon"?Jt=(kt+qe+me)*1.12:at==="round-pentagon"?(Jt=(kt+qe+me)*1.13,on=-(kt/2+qe+me)/15):at==="round-tag"?(Jt=(kt+qe+me)*1.12,Wr=(kt/2+me+qe)*.07):at==="round-triangle"&&(Jt=(kt+qe+me)*(Math.PI/2),on=-(kt+qe/2+me)/Math.PI),Jt!==0&&(dt=(s+Jt)/s,Xt=s*dt,["round-hexagon","round-tag"].includes(at)||(Dt=(u+Jt)/u,fr=u*Dt)),Ge=Ge==="auto"?nD(Xt,fr):Ge;for(var Pi=Xt/2,vn=fr/2,ln=Ge+(kt+me+qe)/2,En=new Array(Vt.length/2),Cn=new Array(Vt.length/2),Un=0;Un<Vt.length/2;Un++)En[Un]={x:Je.x+Wr+Pi*Vt[Un*2],y:Je.y+on+vn*Vt[Un*2+1]};var Xn,to,Ei,ro,Fi=En.length;for(to=En[Fi-1],Xn=0;Xn<Fi;Xn++)Ei=En[Xn%Fi],ro=En[(Xn+1)%Fi],Cn[Xn]=MS(to,Ei,ro,ln),to=Ei,Ei=ro;a.drawRoundPolygonPath(lr||r,Je.x+Wr,Je.y+on,s*dt,u*Dt,Vt,Cn)}else if(["roundrectangle","round-rectangle"].includes(at))Ge=Ge==="auto"?ap(Xt,fr):Ge,a.drawRoundRectanglePath(lr||r,Je.x,Je.y,Xt,fr,Ge+(kt+me+qe)/2);else if(["cutrectangle","cut-rectangle"].includes(at))Ge=Ge==="auto"?OS():Ge,a.drawCutRectanglePath(lr||r,Je.x,Je.y,Xt,fr,null,Ge+(kt+me+qe)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(at))Ge=Ge==="auto"?ap(Xt,fr):Ge,a.drawBottomRoundRectanglePath(lr||r,Je.x,Je.y,Xt,fr,Ge+(kt+me+qe)/2);else if(at==="barrel")a.drawBarrelPath(lr||r,Je.x,Je.y,Xt,fr);else if(at.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(at)){var ho=(kt+me+qe)/s;Vt=P0(A0(Vt,ho)),a.drawPolygonPath(lr||r,Je.x,Je.y,s,u,Vt)}else{var zn=(kt+me+qe)/s;Vt=P0(A0(Vt,-zn)),a.drawPolygonPath(lr||r,Je.x,Je.y,s,u,Vt)}if(d?r.stroke(lr):r.stroke(),Le==="double"){r.lineWidth=kt/3;var yr=r.globalCompositeOperation;r.globalCompositeOperation="destination-out",d?r.stroke(lr):r.stroke(),r.globalCompositeOperation=yr}r.setLineDash&&r.setLineDash([])}},Se=function(){i&&a.drawNodeOverlay(r,e,f,s,u)},Te=function(){i&&a.drawNodeUnderlay(r,e,f,s,u)},Ne=function(){a.drawElementText(r,e,null,n)},et=e.pstyle("ghost").value==="yes";if(et){var wt=e.pstyle("ghost-offset-x").pfValue,lt=e.pstyle("ghost-offset-y").pfValue,pe=e.pstyle("ghost-opacity").value,Ue=pe*h;r.translate(wt,lt),de(),ne(),Me(pe*q),ht(),xt(Ue,!0),Pe(pe*se),X(),ut(j!==0||B!==0),xt(Ue,!1),H(Ue),r.translate(-wt,-lt)}d&&r.translate(-f.x,-f.y),Te(),d&&r.translate(f.x,f.y),de(),ne(),Me(),ht(),xt(h,!0),Pe(),X(),ut(j!==0||B!==0),xt(h,!1),H(),d&&r.translate(-f.x,-f.y),Ne(),Se(),t&&r.translate(b.x1,b.y1)}};var uM=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n,i,o,a){var s=this;if(n.visible()){var u=n.pstyle("".concat(e,"-padding")).pfValue,l=n.pstyle("".concat(e,"-opacity")).value,c=n.pstyle("".concat(e,"-color")).value,f=n.pstyle("".concat(e,"-shape")).value,h=n.pstyle("".concat(e,"-corner-radius")).value;if(l>0){if(i=i||n.position(),o==null||a==null){var d=n.padding();o=n.width()+2*d,a=n.height()+2*d}s.colorFillStyle(t,c[0],c[1],c[2],l),s.nodeShapes[f].draw(t,i.x,i.y,o+u*2,a+u*2,h),t.fill()}}}};Wg.drawNodeOverlay=uM("overlay");Wg.drawNodeUnderlay=uM("underlay");Wg.hasPie=function(r){return r=r[0],r._private.hasPie};Wg.drawPie=function(r,e,t,n){e=e[0],n=n||e.position();var i=e.cy().style(),o=e.pstyle("pie-size"),a=n.x,s=n.y,u=e.width(),l=e.height(),c=Math.min(u,l)/2,f=0,h=this.usePaths();h&&(a=0,s=0),o.units==="%"?c=c*o.pfValue:o.pfValue!==void 0&&(c=o.pfValue/2);for(var d=1;d<=i.pieBackgroundN;d++){var v=e.pstyle("pie-"+d+"-background-size").value,y=e.pstyle("pie-"+d+"-background-color").value,w=e.pstyle("pie-"+d+"-background-opacity").value*t,b=v/100;b+f>1&&(b=1-f);var p=1.5*Math.PI+2*Math.PI*f,_=2*Math.PI*b,O=p+_;v===0||f>=1||f+b>1||(r.beginPath(),r.moveTo(a,s),r.arc(a,s,c,p,O),r.closePath(),this.colorFillStyle(r,y[0],y[1],y[2],w),r.fill(),f+=b)}};var Ss={},HB=100;Ss.getPixelRatio=function(){var r=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=this.cy.window(),t=r.backingStorePixelRatio||r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1;return(e.devicePixelRatio||1)/t};Ss.paintCache=function(r){for(var e=this.paintCaches=this.paintCaches||[],t=!0,n,i=0;i<e.length;i++)if(n=e[i],n.context===r){t=!1;break}return t&&(n={context:r},e.push(n)),n};Ss.createGradientStyleFor=function(r,e,t,n,i){var o,a=this.usePaths(),s=t.pstyle(e+"-gradient-stop-colors").value,u=t.pstyle(e+"-gradient-stop-positions").pfValue;if(n==="radial-gradient")if(t.isEdge()){var l=t.sourceEndpoint(),c=t.targetEndpoint(),f=t.midpoint(),h=op(l,f),d=op(c,f);o=r.createRadialGradient(f.x,f.y,0,f.x,f.y,Math.max(h,d))}else{var v=a?{x:0,y:0}:t.position(),y=t.paddedWidth(),w=t.paddedHeight();o=r.createRadialGradient(v.x,v.y,0,v.x,v.y,Math.max(y,w))}else if(t.isEdge()){var b=t.sourceEndpoint(),p=t.targetEndpoint();o=r.createLinearGradient(b.x,b.y,p.x,p.y)}else{var _=a?{x:0,y:0}:t.position(),O=t.paddedWidth(),P=t.paddedHeight(),R=O/2,T=P/2,A=t.pstyle("background-gradient-direction").value;switch(A){case"to-bottom":o=r.createLinearGradient(_.x,_.y-T,_.x,_.y+T);break;case"to-top":o=r.createLinearGradient(_.x,_.y+T,_.x,_.y-T);break;case"to-left":o=r.createLinearGradient(_.x+R,_.y,_.x-R,_.y);break;case"to-right":o=r.createLinearGradient(_.x-R,_.y,_.x+R,_.y);break;case"to-bottom-right":case"to-right-bottom":o=r.createLinearGradient(_.x-R,_.y-T,_.x+R,_.y+T);break;case"to-top-right":case"to-right-top":o=r.createLinearGradient(_.x-R,_.y+T,_.x+R,_.y-T);break;case"to-bottom-left":case"to-left-bottom":o=r.createLinearGradient(_.x+R,_.y-T,_.x-R,_.y+T);break;case"to-top-left":case"to-left-top":o=r.createLinearGradient(_.x+R,_.y+T,_.x-R,_.y-T);break}}if(!o)return null;for(var M=u.length===s.length,N=s.length,j=0;j<N;j++)o.addColorStop(M?u[j]:j/(N-1),"rgba("+s[j][0]+","+s[j][1]+","+s[j][2]+","+i+")");return o};Ss.gradientFillStyle=function(r,e,t,n){var i=this.createGradientStyleFor(r,"background",e,t,n);if(!i)return null;r.fillStyle=i};Ss.colorFillStyle=function(r,e,t,n,i){r.fillStyle="rgba("+e+","+t+","+n+","+i+")"};Ss.eleFillStyle=function(r,e,t){var n=e.pstyle("background-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientFillStyle(r,e,n,t);else{var i=e.pstyle("background-color").value;this.colorFillStyle(r,i[0],i[1],i[2],t)}};Ss.gradientStrokeStyle=function(r,e,t,n){var i=this.createGradientStyleFor(r,"line",e,t,n);if(!i)return null;r.strokeStyle=i};Ss.colorStrokeStyle=function(r,e,t,n,i){r.strokeStyle="rgba("+e+","+t+","+n+","+i+")"};Ss.eleStrokeStyle=function(r,e,t){var n=e.pstyle("line-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientStrokeStyle(r,e,n,t);else{var i=e.pstyle("line-color").value;this.colorStrokeStyle(r,i[0],i[1],i[2],t)}};Ss.matchCanvasSize=function(r){var e=this,t=e.data,n=e.findContainerClientCoords(),i=n[2],o=n[3],a=e.getPixelRatio(),s=e.motionBlurPxRatio;(r===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||r===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(a=s);var u=i*a,l=o*a,c;if(!(u===e.canvasWidth&&l===e.canvasHeight)){e.fontCaches=null;var f=t.canvasContainer;f.style.width=i+"px",f.style.height=o+"px";for(var h=0;h<e.CANVAS_LAYERS;h++)c=t.canvases[h],c.width=u,c.height=l,c.style.width=i+"px",c.style.height=o+"px";for(var h=0;h<e.BUFFER_COUNT;h++)c=t.bufferCanvases[h],c.width=u,c.height=l,c.style.width=i+"px",c.style.height=o+"px";e.textureMult=1,a<=1&&(c=t.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,c.width=u*e.textureMult,c.height=l*e.textureMult),e.canvasWidth=u,e.canvasHeight=l,e.pixelRatio=a}};Ss.renderTo=function(r,e,t,n){this.render({forcedContext:r,forcedZoom:e,forcedPan:t,drawAllLayers:!0,forcedPxRatio:n})};Ss.clearCanvas=function(){var r=this,e=r.data;function t(n){n.clearRect(0,0,r.canvasWidth,r.canvasHeight)}t(e.contexts[r.NODE]),t(e.contexts[r.DRAG])};Ss.render=function(r){var e=this;r=r||Kk();var t=e.cy,n=r.forcedContext,i=r.drawAllLayers,o=r.drawOnlyNodeLayer,a=r.forcedZoom,s=r.forcedPan,u=r.forcedPxRatio===void 0?this.getPixelRatio():r.forcedPxRatio,l=e.data,c=l.canvasNeedsRedraw,f=e.textureOnViewport&&!n&&(e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming),h=r.motionBlur!==void 0?r.motionBlur:e.motionBlur,d=e.motionBlurPxRatio,v=t.hasCompoundNodes(),y=e.hoverData.draggingEles,w=!!(e.hoverData.selecting||e.touchData.selecting);h=h&&!n&&e.motionBlurEnabled&&!w;var b=h;n||(e.prevPxRatio!==u&&(e.invalidateContainerClientCoordsCache(),e.matchCanvasSize(e.container),e.redrawHint("eles",!0),e.redrawHint("drag",!0)),e.prevPxRatio=u),!n&&e.motionBlurTimeout&&clearTimeout(e.motionBlurTimeout),h&&(e.mbFrames==null&&(e.mbFrames=0),e.mbFrames++,e.mbFrames<3&&(b=!1),e.mbFrames>e.minMbLowQualFrames&&(e.motionBlurPxRatio=e.mbPxRBlurry)),e.clearingMotionBlur&&(e.motionBlurPxRatio=1),e.textureDrawLastFrame&&!f&&(c[e.NODE]=!0,c[e.SELECT_BOX]=!0);var p=t.style(),_=t.zoom(),O=a!==void 0?a:_,P=t.pan(),R={x:P.x,y:P.y},T={zoom:_,pan:{x:P.x,y:P.y}},A=e.prevViewport,M=A===void 0||T.zoom!==A.zoom||T.pan.x!==A.pan.x||T.pan.y!==A.pan.y;!M&&!(y&&!v)&&(e.motionBlurPxRatio=1),s&&(R=s),O*=u,R.x*=u,R.y*=u;var N=e.getCachedZSortedEles();function j(Pe,de,Oe,Ae,Ve){var tt=Pe.globalCompositeOperation;Pe.globalCompositeOperation="destination-out",e.colorFillStyle(Pe,255,255,255,e.motionBlurTransparency),Pe.fillRect(de,Oe,Ae,Ve),Pe.globalCompositeOperation=tt}function B(Pe,de){var Oe,Ae,Ve,tt;!e.clearingMotionBlur&&(Pe===l.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]||Pe===l.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG])?(Oe={x:P.x*d,y:P.y*d},Ae=_*d,Ve=e.canvasWidth*d,tt=e.canvasHeight*d):(Oe=R,Ae=O,Ve=e.canvasWidth,tt=e.canvasHeight),Pe.setTransform(1,0,0,1,0,0),de==="motionBlur"?j(Pe,0,0,Ve,tt):!n&&(de===void 0||de)&&Pe.clearRect(0,0,Ve,tt),i||(Pe.translate(Oe.x,Oe.y),Pe.scale(Ae,Ae)),s&&Pe.translate(s.x,s.y),a&&Pe.scale(a,a)}if(f||(e.textureDrawLastFrame=!1),f){if(e.textureDrawLastFrame=!0,!e.textureCache){e.textureCache={},e.textureCache.bb=t.mutableElements().boundingBox(),e.textureCache.texture=e.data.bufferCanvases[e.TEXTURE_BUFFER];var q=e.data.bufferContexts[e.TEXTURE_BUFFER];q.setTransform(1,0,0,1,0,0),q.clearRect(0,0,e.canvasWidth*e.textureMult,e.canvasHeight*e.textureMult),e.render({forcedContext:q,drawOnlyNodeLayer:!0,forcedPxRatio:u*e.textureMult});var T=e.textureCache.viewport={zoom:t.zoom(),pan:t.pan(),width:e.canvasWidth,height:e.canvasHeight};T.mpan={x:(0-T.pan.x)/T.zoom,y:(0-T.pan.y)/T.zoom}}c[e.DRAG]=!1,c[e.NODE]=!1;var W=l.contexts[e.NODE],J=e.textureCache.texture,T=e.textureCache.viewport;W.setTransform(1,0,0,1,0,0),h?j(W,0,0,T.width,T.height):W.clearRect(0,0,T.width,T.height);var te=p.core("outside-texture-bg-color").value,re=p.core("outside-texture-bg-opacity").value;e.colorFillStyle(W,te[0],te[1],te[2],re),W.fillRect(0,0,T.width,T.height);var _=t.zoom();B(W,!1),W.clearRect(T.mpan.x,T.mpan.y,T.width/T.zoom/u,T.height/T.zoom/u),W.drawImage(J,T.mpan.x,T.mpan.y,T.width/T.zoom/u,T.height/T.zoom/u)}else e.textureOnViewport&&!n&&(e.textureCache=null);var ee=t.extent(),fe=e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming||e.hoverData.draggingEles||e.cy.animated(),he=e.hideEdgesOnViewport&&fe,se=[];if(se[e.NODE]=!c[e.NODE]&&h&&!e.clearedForMotionBlur[e.NODE]||e.clearingMotionBlur,se[e.NODE]&&(e.clearedForMotionBlur[e.NODE]=!0),se[e.DRAG]=!c[e.DRAG]&&h&&!e.clearedForMotionBlur[e.DRAG]||e.clearingMotionBlur,se[e.DRAG]&&(e.clearedForMotionBlur[e.DRAG]=!0),c[e.NODE]||i||o||se[e.NODE]){var me=h&&!se[e.NODE]&&d!==1,W=n||(me?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]:l.contexts[e.NODE]),De=h&&!me?"motionBlur":void 0;B(W,De),he?e.drawCachedNodes(W,N.nondrag,u,ee):e.drawLayeredElements(W,N.nondrag,u,ee),e.debug&&e.drawDebugPoints(W,N.nondrag),!i&&!h&&(c[e.NODE]=!1)}if(!o&&(c[e.DRAG]||i||se[e.DRAG])){var me=h&&!se[e.DRAG]&&d!==1,W=n||(me?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG]:l.contexts[e.DRAG]);B(W,h&&!me?"motionBlur":void 0),he?e.drawCachedNodes(W,N.drag,u,ee):e.drawCachedElements(W,N.drag,u,ee),e.debug&&e.drawDebugPoints(W,N.drag),!i&&!h&&(c[e.DRAG]=!1)}if(this.drawSelectionRectangle(r,B),h&&d!==1){var Le=l.contexts[e.NODE],Ie=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE],qe=l.contexts[e.DRAG],Ge=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG],Me=function(de,Oe,Ae){de.setTransform(1,0,0,1,0,0),Ae||!b?de.clearRect(0,0,e.canvasWidth,e.canvasHeight):j(de,0,0,e.canvasWidth,e.canvasHeight);var Ve=d;de.drawImage(Oe,0,0,e.canvasWidth*Ve,e.canvasHeight*Ve,0,0,e.canvasWidth,e.canvasHeight)};(c[e.NODE]||se[e.NODE])&&(Me(Le,Ie,se[e.NODE]),c[e.NODE]=!1),(c[e.DRAG]||se[e.DRAG])&&(Me(qe,Ge,se[e.DRAG]),c[e.DRAG]=!1)}e.prevViewport=T,e.clearingMotionBlur&&(e.clearingMotionBlur=!1,e.motionBlurCleared=!0,e.motionBlur=!0),h&&(e.motionBlurTimeout=setTimeout(function(){e.motionBlurTimeout=null,e.clearedForMotionBlur[e.NODE]=!1,e.clearedForMotionBlur[e.DRAG]=!1,e.motionBlur=!1,e.clearingMotionBlur=!f,e.mbFrames=0,c[e.NODE]=!0,c[e.DRAG]=!0,e.redraw()},HB)),n||t.emit("render")};var Py;Ss.drawSelectionRectangle=function(r,e){var t=this,n=t.cy,i=t.data,o=n.style(),a=r.drawOnlyNodeLayer,s=r.drawAllLayers,u=i.canvasNeedsRedraw,l=r.forcedContext;if(t.showFps||!a&&u[t.SELECT_BOX]&&!s){var c=l||i.contexts[t.SELECT_BOX];if(e(c),t.selection[4]==1&&(t.hoverData.selecting||t.touchData.selecting)){var f=t.cy.zoom(),h=o.core("selection-box-border-width").value/f;c.lineWidth=h,c.fillStyle="rgba("+o.core("selection-box-color").value[0]+","+o.core("selection-box-color").value[1]+","+o.core("selection-box-color").value[2]+","+o.core("selection-box-opacity").value+")",c.fillRect(t.selection[0],t.selection[1],t.selection[2]-t.selection[0],t.selection[3]-t.selection[1]),h>0&&(c.strokeStyle="rgba("+o.core("selection-box-border-color").value[0]+","+o.core("selection-box-border-color").value[1]+","+o.core("selection-box-border-color").value[2]+","+o.core("selection-box-opacity").value+")",c.strokeRect(t.selection[0],t.selection[1],t.selection[2]-t.selection[0],t.selection[3]-t.selection[1]))}if(i.bgActivePosistion&&!t.hoverData.selecting){var f=t.cy.zoom(),d=i.bgActivePosistion;c.fillStyle="rgba("+o.core("active-bg-color").value[0]+","+o.core("active-bg-color").value[1]+","+o.core("active-bg-color").value[2]+","+o.core("active-bg-opacity").value+")",c.beginPath(),c.arc(d.x,d.y,o.core("active-bg-size").pfValue/f,0,2*Math.PI),c.fill()}var v=t.lastRedrawTime;if(t.showFps&&v){v=Math.round(v);var y=Math.round(1e3/v),w="1 frame = "+v+" ms = "+y+" fps";if(c.setTransform(1,0,0,1,0,0),c.fillStyle="rgba(255, 0, 0, 0.75)",c.strokeStyle="rgba(255, 0, 0, 0.75)",c.font="30px Arial",!Py){var b=c.measureText(w);Py=b.actualBoundingBoxAscent}c.fillText(w,0,Py);var p=60;c.strokeRect(0,Py+10,250,20),c.fillRect(0,Py+10,250*Math.min(y/p,1),20)}s||(u[t.SELECT_BOX]=!1)}};function J2(r,e,t){var n=r.createShader(e);if(r.shaderSource(n,t),r.compileShader(n),!r.getShaderParameter(n,r.COMPILE_STATUS))throw new Error(r.getShaderInfoLog(n));return n}function $B(r,e,t){var n=J2(r,r.VERTEX_SHADER,e),i=J2(r,r.FRAGMENT_SHADER,t),o=r.createProgram();if(r.attachShader(o,n),r.attachShader(o,i),r.linkProgram(o),!r.getProgramParameter(o,r.LINK_STATUS))throw new Error("Could not initialize shaders");return o}function YB(r,e,t){t===void 0&&(t=e);var n=r.makeOffscreenCanvas(e,t),i=n.context=n.getContext("2d");return n.clear=function(){return i.clearRect(0,0,n.width,n.height)},n.clear(),n}function jS(r){var e=r.pixelRatio,t=r.cy.zoom(),n=r.cy.pan();return{zoom:t*e,pan:{x:n.x*e,y:n.y*e}}}function XB(r,e,t,n,i){var o=n*t+e.x,a=i*t+e.y;return a=Math.round(r.canvasHeight-a),[o,a]}function Ay(r,e,t){var n=r[0]/255,i=r[1]/255,o=r[2]/255,a=e,s=t||new Array(4);return s[0]=n*a,s[1]=i*a,s[2]=o*a,s[3]=a,s}function dg(r,e){var t=e||new Array(4);return t[0]=(r>>0&255)/255,t[1]=(r>>8&255)/255,t[2]=(r>>16&255)/255,t[3]=(r>>24&255)/255,t}function KB(r){return r[0]+(r[1]<<8)+(r[2]<<16)+(r[3]<<24)}function ZB(r,e){var t=r.createTexture();return t.buffer=function(n){r.bindTexture(r.TEXTURE_2D,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR_MIPMAP_NEAREST),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,n),r.generateMipmap(r.TEXTURE_2D),r.bindTexture(r.TEXTURE_2D,null)},t.deleteTexture=function(){r.deleteTexture(t)},t}function lM(r,e){switch(e){case"float":return[1,r.FLOAT,4];case"vec2":return[2,r.FLOAT,4];case"vec3":return[3,r.FLOAT,4];case"vec4":return[4,r.FLOAT,4];case"int":return[1,r.INT,4];case"ivec2":return[2,r.INT,4]}}function cM(r,e,t){switch(e){case r.FLOAT:return new Float32Array(t);case r.INT:return new Int32Array(t)}}function QB(r,e,t,n,i,o){switch(e){case r.FLOAT:return new Float32Array(t.buffer,o*n,i);case r.INT:return new Int32Array(t.buffer,o*n,i)}}function JB(r,e,t,n){var i=lM(r,e),o=sa(i,2),a=o[0],s=o[1],u=cM(r,s,n),l=r.createBuffer();return r.bindBuffer(r.ARRAY_BUFFER,l),r.bufferData(r.ARRAY_BUFFER,u,r.STATIC_DRAW),s===r.FLOAT?r.vertexAttribPointer(t,a,s,!1,0,0):s===r.INT&&r.vertexAttribIPointer(t,a,s,0,0),r.enableVertexAttribArray(t),r.bindBuffer(r.ARRAY_BUFFER,null),l}function Cd(r,e,t,n){var i=lM(r,t),o=sa(i,3),a=o[0],s=o[1],u=o[2],l=cM(r,s,e*a),c=a*u,f=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,f),r.bufferData(r.ARRAY_BUFFER,e*c,r.DYNAMIC_DRAW),r.enableVertexAttribArray(n),s===r.FLOAT?r.vertexAttribPointer(n,a,s,!1,c,0):s===r.INT&&r.vertexAttribIPointer(n,a,s,c,0),r.vertexAttribDivisor(n,1),r.bindBuffer(r.ARRAY_BUFFER,null);for(var h=new Array(e),d=0;d<e;d++)h[d]=QB(r,s,l,c,a,d);return f.dataArray=l,f.stride=c,f.size=a,f.getView=function(v){return h[v]},f.setPoint=function(v,y,w){var b=h[v];b[0]=y,b[1]=w},f.bufferSubData=function(v){r.bindBuffer(r.ARRAY_BUFFER,f),v?r.bufferSubData(r.ARRAY_BUFFER,0,l,0,v*a):r.bufferSubData(r.ARRAY_BUFFER,0,l)},f}function eU(r,e,t){for(var n=9,i=new Float32Array(e*n),o=new Array(e),a=0;a<e;a++){var s=a*n*4;o[a]=new Float32Array(i.buffer,s,n)}var u=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,u),r.bufferData(r.ARRAY_BUFFER,i.byteLength,r.DYNAMIC_DRAW);for(var l=0;l<3;l++){var c=t+l;r.enableVertexAttribArray(c),r.vertexAttribPointer(c,3,r.FLOAT,!1,3*12,l*12),r.vertexAttribDivisor(c,1)}return r.bindBuffer(r.ARRAY_BUFFER,null),u.getMatrixView=function(f){return o[f]},u.setData=function(f,h){o[h].set(f,0)},u.bufferSubData=function(){r.bindBuffer(r.ARRAY_BUFFER,u),r.bufferSubData(r.ARRAY_BUFFER,0,i)},u}function tU(r){var e=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,e);var t=r.createTexture();return r.bindTexture(r.TEXTURE_2D,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0),r.bindFramebuffer(r.FRAMEBUFFER,null),e.setFramebufferAttachmentSizes=function(n,i){r.bindTexture(r.TEXTURE_2D,t),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,n,i,0,r.RGBA,r.UNSIGNED_BYTE,null)},e}var eP=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var r=0,e=arguments.length;e--;)r+=arguments[e]*arguments[e];return Math.sqrt(r)});function w0(){var r=new eP(9);return eP!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function fM(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function rU(r,e,t){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=t[0],d=t[1],v=t[2],y=t[3],w=t[4],b=t[5],p=t[6],_=t[7],O=t[8];return r[0]=h*n+d*a+v*l,r[1]=h*i+d*s+v*c,r[2]=h*o+d*u+v*f,r[3]=y*n+w*a+b*l,r[4]=y*i+w*s+b*c,r[5]=y*o+w*u+b*f,r[6]=p*n+_*a+O*l,r[7]=p*i+_*s+O*c,r[8]=p*o+_*u+O*f,r}function N0(r,e,t){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=t[0],d=t[1];return r[0]=n,r[1]=i,r[2]=o,r[3]=a,r[4]=s,r[5]=u,r[6]=h*n+d*a+l,r[7]=h*i+d*s+c,r[8]=h*o+d*u+f,r}function hM(r,e,t){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=Math.sin(t),d=Math.cos(t);return r[0]=d*n+h*a,r[1]=d*i+h*s,r[2]=d*o+h*u,r[3]=d*a-h*n,r[4]=d*s-h*i,r[5]=d*u-h*o,r[6]=l,r[7]=c,r[8]=f,r}function FS(r,e,t){var n=t[0],i=t[1];return r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=i*e[3],r[4]=i*e[4],r[5]=i*e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r}function nU(r,e,t){return r[0]=2/e,r[1]=0,r[2]=0,r[3]=0,r[4]=-2/t,r[5]=0,r[6]=-1,r[7]=1,r[8]=1,r}var Hy={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},tP=Vo({texRows:24}),vg=Vo({collection:"default",getKey:null,drawElement:null,getBoundingBox:null,getRotation:null,getRotationPoint:null,getRotationOffset:null,isVisible:function(){return!0},getPadding:0}),iU=function(){function r(e,t,n,i){$d(this,r),this.debugID=Math.floor(Math.random()*1e4),this.r=e,this.texSize=t,this.texRows=n,this.texHeight=Math.floor(t/n),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=i(e,t,t),this.scratch=i(e,t,this.texHeight,"scratch")}return Yd(r,[{key:"lock",value:function(){this.locked=!0}},{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(t){var n=t.w,i=t.h,o=this.texHeight,a=this.texSize,s=o/i,u=n*s,l=i*s;return u>a&&(s=a/n,u=n*s,l=i*s),{scale:s,texW:u,texH:l}}},{key:"draw",value:function(t,n,i){var o=this;if(this.locked)throw new Error("can't draw, atlas is locked");var a=this.texSize,s=this.texRows,u=this.texHeight,l=this.getScale(n),c=l.scale,f=l.texW,h=l.texH,d=[null,null],v=function(_,O){if(i&&O){var P=O.context,R=_.x,T=_.row,A=R,M=u*T;P.save(),P.translate(A,M),P.scale(c,c),i(P,n),P.restore()}},y=function(){v(o.freePointer,o.canvas),d[0]={x:o.freePointer.x,y:o.freePointer.row*u,w:f,h},d[1]={x:o.freePointer.x+f,y:o.freePointer.row*u,w:0,h},o.freePointer.x+=f,o.freePointer.x==a&&(o.freePointer.x=0,o.freePointer.row++)},w=function(){var _=o.scratch,O=o.canvas;_.clear(),v({x:0,row:0},_);var P=a-o.freePointer.x,R=f-P,T=u;{var A=o.freePointer.x,M=o.freePointer.row*u,N=P;O.context.drawImage(_,0,0,N,T,A,M,N,T),d[0]={x:A,y:M,w:N,h}}{var j=P,B=(o.freePointer.row+1)*u,q=R;O&&O.context.drawImage(_,j,0,q,T,0,B,q,T),d[1]={x:0,y:B,w:q,h}}o.freePointer.x=R,o.freePointer.row++},b=function(){o.freePointer.x=0,o.freePointer.row++};if(this.freePointer.x+f<=a)y();else{if(this.freePointer.row>=s-1)return!1;this.freePointer.x===a?(b(),y()):this.enableWrapping?w():(b(),y())}return this.keyToLocation.set(t,d),this.needsBuffer=!0,d}},{key:"getOffsets",value:function(t){return this.keyToLocation.get(t)}},{key:"isEmpty",value:function(){return this.freePointer.x===0&&this.freePointer.row===0}},{key:"canFit",value:function(t){if(this.locked)return!1;var n=this.texSize,i=this.texRows,o=this.getScale(t),a=o.texW;return this.freePointer.x+a>n?this.freePointer.row<i-1:!0}},{key:"bufferIfNeeded",value:function(t){this.texture||(this.texture=ZB(t,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0}}])}(),oU=function(){function r(e,t,n,i){$d(this,r),this.r=e,this.texSize=t,this.texRows=n,this.createTextureCanvas=i,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set}return Yd(r,[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function(){var t=this.r,n=this.texSize,i=this.texRows,o=this.createTextureCanvas;return new iU(t,n,i,o)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var t=this.r,n=this.texSize,i=this.texRows,o=this.createTextureCanvas,a=Math.floor(n/i);this.scratch=o(t,n,a,"scratch")}return this.scratch}},{key:"draw",value:function(t,n,i){var o=this.styleKeyToAtlas.get(t);return o||(o=this.atlases[this.atlases.length-1],(!o||!o.canFit(n))&&(o&&o.lock(),o=this._createAtlas(),this.atlases.push(o)),o.draw(t,n,i),this.styleKeyToAtlas.set(t,o)),o}},{key:"getAtlas",value:function(t){return this.styleKeyToAtlas.get(t)}},{key:"hasAtlas",value:function(t){return this.styleKeyToAtlas.has(t)}},{key:"markKeyForGC",value:function(t){this.markedKeys.add(t)}},{key:"gc",value:function(){var t=this,n=this.markedKeys;if(n.size!==0){var i=[],o=new Map,a=null,s=cc(this.atlases),u;try{var l=function(){var f=u.value,h=f.getKeys(),d=aU(n,h);if(d.size===0)return i.push(f),h.forEach(function(P){return o.set(P,f)}),1;a||(a=t._createAtlas(),i.push(a));var v=cc(h),y;try{for(v.s();!(y=v.n()).done;){var w=y.value;if(!d.has(w)){var b=f.getOffsets(w),p=sa(b,2),_=p[0],O=p[1];a.canFit({w:_.w+O.w,h:_.h})||(a.lock(),a=t._createAtlas(),i.push(a)),t._copyTextureToNewAtlas(w,f,a),o.set(w,a)}}}catch(P){v.e(P)}finally{v.f()}f.dispose()};for(s.s();!(u=s.n()).done;)l()}catch(c){s.e(c)}finally{s.f()}this.atlases=i,this.styleKeyToAtlas=o,this.markedKeys=new Set}}},{key:"_copyTextureToNewAtlas",value:function(t,n,i){var o=n.getOffsets(t),a=sa(o,2),s=a[0],u=a[1];if(u.w===0)i.draw(t,s,function(h){h.drawImage(n.canvas,s.x,s.y,s.w,s.h,0,0,s.w,s.h)});else{var l=this._getScratchCanvas();l.clear(),l.context.drawImage(n.canvas,s.x,s.y,s.w,s.h,0,0,s.w,s.h),l.context.drawImage(n.canvas,u.x,u.y,u.w,u.h,s.w,0,u.w,u.h);var c=s.w+u.w,f=s.h;i.draw(t,{w:c,h:f},function(h){h.drawImage(l,0,0,c,f,0,0,c,f)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}])}();function aU(r,e){return r.intersection?r.intersection(e):new Set(kk(r).filter(function(t){return e.has(t)}))}var sU=function(){function r(e,t){$d(this,r),this.r=e,this.globalOptions=t,this.atlasSize=t.webglTexSize,this.maxAtlasesPerBatch=t.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map,this.batchAtlases=[]}return Yd(r,[{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"getMaxAtlasesPerBatch",value:function(){return this.maxAtlasesPerBatch}},{key:"addAtlasCollection",value:function(t,n){var i=this.globalOptions,o=i.webglTexSize,a=i.createTextureCanvas,s=n.texRows,u=this._cacheScratchCanvas(a),l=new oU(this.r,o,s,u);this.collections.set(t,l)}},{key:"addRenderType",value:function(t,n){var i=n.collection;if(!this.collections.has(i))throw new Error("invalid atlas collection name '".concat(i,"'"));var o=this.collections.get(i),a=_r({type:t,atlasCollection:o},n);this.renderTypes.set(t,a)}},{key:"getRenderTypeOpts",value:function(t){return this.renderTypes.get(t)}},{key:"getAtlasCollection",value:function(t){return this.collections.get(t)}},{key:"_cacheScratchCanvas",value:function(t){var n=-1,i=-1,o=null;return function(a,s,u,l){return l?((!o||s!=n||u!=i)&&(n=s,i=u,o=t(a,s,u)),o):t(a,s,u)}}},{key:"_key",value:function(t,n){return"".concat(t,"-").concat(n)}},{key:"invalidate",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.forceRedraw,o=i===void 0?!1:i,a=n.filterEle,s=a===void 0?function(){return!0}:a,u=n.filterType,l=u===void 0?function(){return!0}:u,c=!1,f=!1,h=cc(t),d;try{for(h.s();!(d=h.n()).done;){var v=d.value;if(s(v)){var y=cc(this.renderTypes.values()),w;try{for(y.s();!(w=y.n()).done;){var b=w.value,p=b.type;if(l(p)){var _=b.getKey(v),O=this.collections.get(b.collection);if(o)O.markKeyForGC(_),f=!0;else{var P=b.getID?b.getID(v):v.id(),R=this._key(p,P),T=this.typeAndIdToKey.get(R);T!==void 0&&T!==_&&(this.typeAndIdToKey.delete(R),O.markKeyForGC(T),c=!0)}}}}catch(A){y.e(A)}finally{y.f()}}}}catch(A){h.e(A)}finally{h.f()}return f&&(this.gc(),c=!1),c}},{key:"gc",value:function(){var t=cc(this.collections.values()),n;try{for(t.s();!(n=t.n()).done;){var i=n.value;i.gc()}}catch(o){t.e(o)}finally{t.f()}}},{key:"getOrCreateAtlas",value:function(t,n,i){var o=this.renderTypes.get(n),a=o.getKey(t);i||(i=o.getBoundingBox(t));var s=this.collections.get(o.collection),u=!1,l=s.draw(a,i,function(h){o.drawElement(h,t,i,!0,!0),u=!0});if(u){var c=o.getID?o.getID(t):t.id(),f=this._key(n,c);this.typeAndIdToKey.set(f,a)}return l}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function(t,n){if(this.batchAtlases.length===this.maxAtlasesPerBatch){var i=this.renderTypes.get(n),o=i.getKey(t),a=this.collections.get(i.collection),s=a.getAtlas(o);return!!s&&this.batchAtlases.includes(s)}return!0}},{key:"getAtlasIndexForBatch",value:function(t){var n=this.batchAtlases.indexOf(t);if(n<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)return;this.batchAtlases.push(t),n=this.batchAtlases.length-1}return n}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlasesPerBatch},function(t,n){return n})}},{key:"getAtlasInfo",value:function(t,n){var i=this.renderTypes.get(n),o=i.getBoundingBox(t),a=this.getOrCreateAtlas(t,n,o),s=this.getAtlasIndexForBatch(a);if(s!==void 0){var u=i.getKey(t),l=a.getOffsets(u),c=sa(l,2),f=c[0],h=c[1];return{index:s,tex1:f,tex2:h,bb:o}}}},{key:"setTransformMatrix",value:function(t,n,i,o){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=this.getRenderTypeOpts(i),u=s.getPadding?s.getPadding(t):0;if(o){var l=o.bb,c=o.tex1,f=o.tex2,h=c.w/(c.w+f.w);a||(h=1-h);var d=this.getAdjustedBB(l,u,a,h);this._applyTransformMatrix(n,d,s,t)}else{var v=s.getBoundingBox(t),y=this.getAdjustedBB(v,u,!0,1);this._applyTransformMatrix(n,y,s,t)}}},{key:"_applyTransformMatrix",value:function(t,n,i,o){var a,s;fM(t);var u=i.getRotation?i.getRotation(o):0;if(u!==0){var l=i.getRotationPoint(o),c=l.x,f=l.y;N0(t,t,[c,f]),hM(t,t,u);var h=i.getRotationOffset(o);a=h.x+n.xOffset,s=h.y}else a=n.x1,s=n.y1;N0(t,t,[a,s]),FS(t,t,[n.w,n.h])}},{key:"getAdjustedBB",value:function(t,n,i,o){var a=t.x1,s=t.y1,u=t.w,l=t.h;n&&(a-=n,s-=n,u+=2*n,l+=2*n);var c=0,f=u*o;return i&&o<1?u=f:!i&&o<1&&(c=u-f,a+=c,u=f),{x1:a,y1:s,w:u,h:l,xOffset:c}}},{key:"getDebugInfo",value:function(){var t=[],n=cc(this.collections),i;try{for(n.s();!(i=n.n()).done;){var o=sa(i.value,2),a=o[0],s=o[1],u=s.getCounts(),l=u.keyCount,c=u.atlasCount;t.push({type:a,keyCount:l,atlasCount:c})}}catch(f){n.e(f)}finally{n.f()}return t}}])}(),t0=0,rP=1,nP=2,Nw=3,iP=4,uU=function(){function r(e,t,n){$d(this,r),this.r=e,this.gl=t,this.maxInstances=n.webglBatchSize,this.atlasSize=n.webglTexSize,this.bgColor=n.bgColor,this.debug=n.webglDebug,this.batchDebugInfo=[],n.enableWrapping=!0,n.createTextureCanvas=YB,this.atlasManager=new sU(e,n),this.program=this.createShaderProgram(Hy.SCREEN),this.pickingProgram=this.createShaderProgram(Hy.PICKING),this.vao=this.createVAO()}return Yd(r,[{key:"addAtlasCollection",value:function(t,n){this.atlasManager.addAtlasCollection(t,n)}},{key:"addAtlasRenderType",value:function(t,n){this.atlasManager.addRenderType(t,n)}},{key:"invalidate",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.type,o=this.atlasManager;return i?o.invalidate(t,{filterType:function(s){return s===i},forceRedraw:!0}):o.invalidate(t)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"createShaderProgram",value:function(t){var n=this.gl,i=`#version 300 es
      precision highp float;

      uniform mat3 uPanZoomMatrix;
      uniform int  uAtlasSize;
      
      // instanced
      in vec2 aPosition; 

      in mat3 aTransform;

      // what are we rendering?
      in int aVertType;

      // for picking
      in vec4 aIndex;
      
      // For textures
      in int aAtlasId; // which shader unit/atlas to use
      in vec4 aTex; // x/y/w/h of texture in atlas

      // for edges
      in vec4 aPointAPointB;
      in vec4 aPointCPointD;
      in float aLineWidth;
      in vec4 aColor;

      out vec2 vTexCoord;
      out vec4 vColor;
      flat out int vAtlasId;
      flat out vec4 vIndex;
      flat out int vVertType;

      void main(void) {
        int vid = gl_VertexID;
        vec2 position = aPosition;

        if(aVertType == `.concat(t0,`) {
          float texX = aTex.x;
          float texY = aTex.y;
          float texW = aTex.z;
          float texH = aTex.w;

          int vid = gl_VertexID;

          if(vid == 1 || vid == 2 || vid == 4) {
            texX += texW;
          }
          if(vid == 2 || vid == 4 || vid == 5) {
            texY += texH;
          }

          float d = float(uAtlasSize);
          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(iP,`) {
          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
          vColor = aColor;
        }
        else if(aVertType == `).concat(rP,`) {
          vec2 source = aPointAPointB.xy;
          vec2 target = aPointAPointB.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 xBasis = target - source;
          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));
          vec2 point = source + xBasis * position.x + yBasis * aLineWidth * position.y;

          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);
          vColor = aColor;
        } 
        else if(aVertType == `).concat(nP,`) {
          vec2 pointA = aPointAPointB.xy;
          vec2 pointB = aPointAPointB.zw;
          vec2 pointC = aPointCPointD.xy;
          vec2 pointD = aPointCPointD.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 p0 = pointA;
          vec2 p1 = pointB;
          vec2 p2 = pointC;
          vec2 pos = position;
          if(position.x == 1.0) {
            p0 = pointD;
            p1 = pointC;
            p2 = pointB;
            pos = vec2(0.0, -position.y);
          }

          vec2 p01 = p1 - p0;
          vec2 p12 = p2 - p1;
          vec2 p21 = p1 - p2;

          // Find the normal vector.
          vec2 tangent = normalize(normalize(p12) + normalize(p01));
          vec2 normal = vec2(-tangent.y, tangent.x);

          // Find the vector perpendicular to p0 -> p1.
          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));

          // Determine the bend direction.
          float sigma = sign(dot(p01 + p21, normal));
          float width = aLineWidth;

          if(sign(pos.y) == -sigma) {
            // This is an intersecting vertex. Adjust the position so that there's no overlap.
            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          } else {
            // This is a non-intersecting vertex. Treat it like a mitre join.
            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          }

          vColor = aColor;
        } 
        else if(aVertType == `).concat(Nw,` && vid < 3) {
          // massage the first triangle into an edge arrow
          if(vid == 0)
            position = vec2(-0.15, -0.3);
          if(vid == 1)
            position = vec2( 0.0,   0.0);
          if(vid == 2)
            position = vec2( 0.15, -0.3);

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
          vColor = aColor;
        }
        else {
          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space
        }

        vAtlasId = aAtlasId;
        vIndex = aIndex;
        vVertType = aVertType;
      }
    `),o=this.atlasManager.getIndexArray(),a=`#version 300 es
      precision highp float;

      // define texture unit for each node in the batch
      `.concat(o.map(function(l){return"uniform sampler2D uTexture".concat(l,";")}).join(`
	`),`

      uniform vec4 uBGColor;

      in vec2 vTexCoord;
      in vec4 vColor;
      flat in int vAtlasId;
      flat in vec4 vIndex;
      flat in int vVertType;

      out vec4 outColor;

      void main(void) {
        if(vVertType == `).concat(t0,`) {
          `).concat(o.map(function(l){return"if(vAtlasId == ".concat(l,") outColor = texture(uTexture").concat(l,", vTexCoord);")}).join(`
	else `),`
        } else if(vVertType == `).concat(Nw,`) {
          // blend arrow color with background (using premultiplied alpha)
          outColor.rgb = vColor.rgb + (uBGColor.rgb * (1.0 - vColor.a)); 
          outColor.a = 1.0; // make opaque, masks out line under arrow
        } else {
          outColor = vColor;
        }

        `).concat(t.picking?`if(outColor.a == 0.0) discard;
             else outColor = vIndex;`:"",`
      }
    `),s=$B(n,i,a);s.aPosition=n.getAttribLocation(s,"aPosition"),s.aIndex=n.getAttribLocation(s,"aIndex"),s.aVertType=n.getAttribLocation(s,"aVertType"),s.aTransform=n.getAttribLocation(s,"aTransform"),s.aAtlasId=n.getAttribLocation(s,"aAtlasId"),s.aTex=n.getAttribLocation(s,"aTex"),s.aPointAPointB=n.getAttribLocation(s,"aPointAPointB"),s.aPointCPointD=n.getAttribLocation(s,"aPointCPointD"),s.aLineWidth=n.getAttribLocation(s,"aLineWidth"),s.aColor=n.getAttribLocation(s,"aColor"),s.uPanZoomMatrix=n.getUniformLocation(s,"uPanZoomMatrix"),s.uAtlasSize=n.getUniformLocation(s,"uAtlasSize"),s.uBGColor=n.getUniformLocation(s,"uBGColor"),s.uTextures=[];for(var u=0;u<this.atlasManager.getMaxAtlasesPerBatch();u++)s.uTextures.push(n.getUniformLocation(s,"uTexture".concat(u)));return s}},{key:"createVAO",value:function(){var t=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=t.length/2;var n=this.maxInstances,i=this.gl,o=this.program,a=i.createVertexArray();return i.bindVertexArray(a),JB(i,"vec2",o.aPosition,t),this.transformBuffer=eU(i,n,o.aTransform),this.indexBuffer=Cd(i,n,"vec4",o.aIndex),this.vertTypeBuffer=Cd(i,n,"int",o.aVertType),this.atlasIdBuffer=Cd(i,n,"int",o.aAtlasId),this.texBuffer=Cd(i,n,"vec4",o.aTex),this.pointAPointBBuffer=Cd(i,n,"vec4",o.aPointAPointB),this.pointCPointDBuffer=Cd(i,n,"vec4",o.aPointCPointD),this.lineWidthBuffer=Cd(i,n,"float",o.aLineWidth),this.colorBuffer=Cd(i,n,"vec4",o.aColor),i.bindVertexArray(null),a}},{key:"buffers",get:function(){var t=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(n){return n.endsWith("Buffer")}).map(function(n){return t[n]})),this._buffers}},{key:"startFrame",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Hy.SCREEN;this.panZoomMatrix=t,this.renderTarget=n,this.batchDebugInfo=[],this.wrappedCount=0,this.rectangleCount=0,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.atlasManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"getTempMatrix",value:function(){return this.tempMatrix=this.tempMatrix||w0()}},{key:"drawTexture",value:function(t,n,i){var o=this.atlasManager;if(t.visible()&&o.getRenderTypeOpts(i).isVisible(t)){o.canAddToCurrentBatch(t,i)||this.endBatch(),this.instanceCount+1>=this.maxInstances&&this.endBatch();var a=this.instanceCount;this.vertTypeBuffer.getView(a)[0]=t0;var s=this.indexBuffer.getView(a);dg(n,s);var u=o.getAtlasInfo(t,i),l=u.index,c=u.tex1,f=u.tex2;f.w>0&&this.wrappedCount++;for(var h=!0,d=0,v=[c,f];d<v.length;d++){var y=v[d];if(y.w!=0){var w=this.instanceCount;this.vertTypeBuffer.getView(w)[0]=t0;var b=this.indexBuffer.getView(w);dg(n,b);var p=this.atlasIdBuffer.getView(w);p[0]=l;var _=this.texBuffer.getView(w);_[0]=y.x,_[1]=y.y,_[2]=y.w,_[3]=y.h;var O=this.transformBuffer.getMatrixView(w);o.setTransformMatrix(t,O,i,u,h),this.instanceCount++}h=!1}this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"drawSimpleRectangle",value:function(t,n,i){if(t.visible()){var o=this.atlasManager,a=this.instanceCount;this.vertTypeBuffer.getView(a)[0]=iP;var s=this.indexBuffer.getView(a);dg(n,s);var u=t.pstyle("background-color").value,l=t.pstyle("background-opacity").value,c=this.colorBuffer.getView(a);Ay(u,l,c);var f=this.transformBuffer.getMatrixView(a);o.setTransformMatrix(t,f,i),this.rectangleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"drawEdgeArrow",value:function(t,n,i){if(t.visible()){var o=t._private.rscratch,a,s,u;if(i==="source"?(a=o.arrowStartX,s=o.arrowStartY,u=o.srcArrowAngle):(a=o.arrowEndX,s=o.arrowEndY,u=o.tgtArrowAngle),!(isNaN(a)||a==null||isNaN(s)||s==null||isNaN(u)||u==null)){var l=t.pstyle(i+"-arrow-shape").value;if(l!=="none"){var c=t.pstyle(i+"-arrow-color").value,f=t.pstyle("opacity").value,h=t.pstyle("line-opacity").value,d=f*h,v=t.pstyle("width").pfValue,y=t.pstyle("arrow-scale").value,w=this.r.getArrowWidth(v,y),b=this.instanceCount,p=this.transformBuffer.getMatrixView(b);fM(p),N0(p,p,[a,s]),FS(p,p,[w,w]),hM(p,p,u),this.vertTypeBuffer.getView(b)[0]=Nw;var _=this.indexBuffer.getView(b);dg(n,_);var O=this.colorBuffer.getView(b);Ay(c,d,O),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"drawEdgeLine",value:function(t,n){if(t.visible()){var i=this.getEdgePoints(t);if(i){var o=t.pstyle("opacity").value,a=t.pstyle("line-opacity").value,s=t.pstyle("width").pfValue,u=t.pstyle("line-color").value,l=o*a;if(i.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),i.length==4){var c=this.instanceCount;this.vertTypeBuffer.getView(c)[0]=rP;var f=this.indexBuffer.getView(c);dg(n,f);var h=this.colorBuffer.getView(c);Ay(u,l,h);var d=this.lineWidthBuffer.getView(c);d[0]=s;var v=this.pointAPointBBuffer.getView(c);v[0]=i[0],v[1]=i[1],v[2]=i[2],v[3]=i[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var y=0;y<i.length-2;y+=2){var w=this.instanceCount;this.vertTypeBuffer.getView(w)[0]=nP;var b=this.indexBuffer.getView(w);dg(n,b);var p=this.colorBuffer.getView(w);Ay(u,l,p);var _=this.lineWidthBuffer.getView(w);_[0]=s;var O=i[y-2],P=i[y-1],R=i[y],T=i[y+1],A=i[y+2],M=i[y+3],N=i[y+4],j=i[y+5];y==0&&(O=2*R-A+.001,P=2*T-M+.001),y==i.length-4&&(N=2*A-R+.001,j=2*M-T+.001);var B=this.pointAPointBBuffer.getView(w);B[0]=O,B[1]=P,B[2]=R,B[3]=T;var q=this.pointCPointDBuffer.getView(w);q[0]=A,q[1]=M,q[2]=N,q[3]=j,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"getEdgePoints",value:function(t){var n=t._private.rscratch;if(!(n.badLine||n.allpts==null||isNaN(n.allpts[0]))){var i=n.allpts;if(i.length==4)return i;var o=this.getNumSegments(t);return this.getCurveSegmentPoints(i,o)}}},{key:"getNumSegments",value:function(t){var n=15;return Math.min(Math.max(n,5),this.maxInstances)}},{key:"getCurveSegmentPoints",value:function(t,n){if(t.length==4)return t;for(var i=Array((n+1)*2),o=0;o<=n;o++)if(o==0)i[0]=t[0],i[1]=t[1];else if(o==n)i[o*2]=t[t.length-2],i[o*2+1]=t[t.length-1];else{var a=o/n;this.setCurvePoint(t,a,i,o*2)}return i}},{key:"setCurvePoint",value:function(t,n,i,o){if(t.length<=2)i[o]=t[0],i[o+1]=t[1];else{for(var a=Array(t.length-2),s=0;s<a.length;s+=2){var u=(1-n)*t[s]+n*t[s+2],l=(1-n)*t[s+1]+n*t[s+3];a[s]=u,a[s+1]=l}return this.setCurvePoint(a,n,i,o)}}},{key:"endBatch",value:function(){var t=this.gl,n=this.vao,i=this.vertexCount,o=this.instanceCount;if(o!==0){var a=this.renderTarget.picking?this.pickingProgram:this.program;t.useProgram(a),t.bindVertexArray(n);var s=cc(this.buffers),u;try{for(s.s();!(u=s.n()).done;){var l=u.value;l.bufferSubData(o)}}catch(v){s.e(v)}finally{s.f()}for(var c=this.atlasManager.getAtlases(),f=0;f<c.length;f++)c[f].bufferIfNeeded(t);for(var h=0;h<c.length;h++)t.activeTexture(t.TEXTURE0+h),t.bindTexture(t.TEXTURE_2D,c[h].texture),t.uniform1i(a.uTextures[h],h);t.uniformMatrix3fv(a.uPanZoomMatrix,!1,this.panZoomMatrix),t.uniform1i(a.uAtlasSize,this.atlasManager.getAtlasSize());var d=Ay(this.bgColor,1);t.uniform4fv(a.uBGColor,d),t.drawArraysInstanced(t.TRIANGLES,0,i,o),t.bindVertexArray(null),t.bindTexture(t.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:o,atlasCount:c.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){var t=this.atlasManager.getDebugInfo(),n=t.reduce(function(a,s){return a+s.atlasCount},0),i=this.batchDebugInfo,o=i.reduce(function(a,s){return a+s.count},0);return{atlasInfo:t,totalAtlases:n,wrappedCount:this.wrappedCount,rectangleCount:this.rectangleCount,batchCount:i.length,batchInfo:i,totalInstances:o}}}])}();function oP(r,e){return"rgba(".concat(r[0],", ").concat(r[1],", ").concat(r[2],", ").concat(e,")")}var lU=function(){function r(e){$d(this,r),this.r=e}return Yd(r,[{key:"getStyleKey",value:function(t,n){var i=this.getStyle(t,n),o=i.shape,a=i.opacity,s=i.color;if(!o)return null;var u=n.width(),l=n.height(),c=oP(s,a);return Bd("".concat(o,"-").concat(u,"-").concat(l,"-").concat(c))}},{key:"isVisible",value:function(t,n){var i=n.pstyle("".concat(t,"-opacity")).value;return i>0}},{key:"getStyle",value:function(t,n){var i=n.pstyle("".concat(t,"-opacity")).value,o=n.pstyle("".concat(t,"-color")).value,a=n.pstyle("".concat(t,"-shape")).value;return{opacity:i,color:o,shape:a}}},{key:"getPadding",value:function(t,n){return n.pstyle("".concat(t,"-padding")).pfValue}},{key:"draw",value:function(t,n,i,o){if(this.isVisible(t,i)){var a=this.r,s=o.w,u=o.h,l=s/2,c=u/2,f=this.getStyle(t,i),h=f.shape,d=f.color,v=f.opacity;n.save(),n.fillStyle=oP(d,v),h==="round-rectangle"||h==="roundrectangle"?a.drawRoundRectanglePath(n,l,c,s,u,"auto"):h==="ellipse"&&a.drawEllipsePath(n,l,c,s,u),n.fill(),n.restore()}}}])}(),dM={};dM.initWebgl=function(r,e){var t=this,n=t.data.contexts[t.WEBGL];r.bgColor=cU(t),r.webglTexSize=Math.min(r.webglTexSize,n.getParameter(n.MAX_TEXTURE_SIZE)),r.webglTexRows=Math.min(r.webglTexRows,54),r.webglTexRowsNodes=Math.min(r.webglTexRowsNodes,54),r.webglBatchSize=Math.min(r.webglBatchSize,16384),r.webglTexPerBatch=Math.min(r.webglTexPerBatch,n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)),t.webglDebug=r.webglDebug,t.webglDebugShowAtlases=r.webglDebugShowAtlases,t.pickingFrameBuffer=tU(n),t.pickingFrameBuffer.needsDraw=!0;var i=function(l){return function(c){return t.getTextAngle(c,l)}},o=function(l){return function(c){var f=c.pstyle(l);return f&&f.value}};t.drawing=new uU(t,n,r);var a=new lU(t);t.drawing.addAtlasCollection("node",tP({texRows:r.webglTexRowsNodes})),t.drawing.addAtlasCollection("label",tP({texRows:r.webglTexRows})),t.drawing.addAtlasRenderType("node-body",vg({collection:"node",getKey:e.getStyleKey,getBoundingBox:e.getElementBox,drawElement:e.drawElement})),t.drawing.addAtlasRenderType("label",vg({collection:"label",getKey:e.getLabelKey,getBoundingBox:e.getLabelBox,drawElement:e.drawLabel,getRotation:i(null),getRotationPoint:e.getLabelRotationPoint,getRotationOffset:e.getLabelRotationOffset,isVisible:o("label")})),t.drawing.addAtlasRenderType("node-overlay",vg({collection:"node",getBoundingBox:e.getElementBox,getKey:function(l){return a.getStyleKey("overlay",l)},drawElement:function(l,c,f){return a.draw("overlay",l,c,f)},isVisible:function(l){return a.isVisible("overlay",l)},getPadding:function(l){return a.getPadding("overlay",l)}})),t.drawing.addAtlasRenderType("node-underlay",vg({collection:"node",getBoundingBox:e.getElementBox,getKey:function(l){return a.getStyleKey("underlay",l)},drawElement:function(l,c,f){return a.draw("underlay",l,c,f)},isVisible:function(l){return a.isVisible("underlay",l)},getPadding:function(l){return a.getPadding("underlay",l)}})),t.drawing.addAtlasRenderType("edge-source-label",vg({collection:"label",getKey:e.getSourceLabelKey,getBoundingBox:e.getSourceLabelBox,drawElement:e.drawSourceLabel,getRotation:i("source"),getRotationPoint:e.getSourceLabelRotationPoint,getRotationOffset:e.getSourceLabelRotationOffset,isVisible:o("source-label")})),t.drawing.addAtlasRenderType("edge-target-label",vg({collection:"label",getKey:e.getTargetLabelKey,getBoundingBox:e.getTargetLabelBox,drawElement:e.drawTargetLabel,getRotation:i("target"),getRotationPoint:e.getTargetLabelRotationPoint,getRotationOffset:e.getTargetLabelRotationOffset,isVisible:o("target-label")}));var s=cm(function(){t.data.gc=!0},1e4);t.onUpdateEleCalcs(function(u,l){var c=!1;l&&l.length>0&&(c|=t.drawing.invalidate(l)),c&&s()}),fU(t)};function cU(r){var e=r.cy.container(),t=e&&e.style&&e.style.backgroundColor||"white";return Bk(t)}function fU(r){{var e=r.render;r.render=function(o){o=o||{};var a=r.cy;r.webgl&&(a.zoom()>iM?(hU(r),e.call(r,o)):(dU(r),pM(r,o,Hy.SCREEN)))}}{var t=r.matchCanvasSize;r.matchCanvasSize=function(o){t.call(r,o),r.pickingFrameBuffer.setFramebufferAttachmentSizes(r.canvasWidth,r.canvasHeight),r.pickingFrameBuffer.needsDraw=!0}}r.findNearestElements=function(o,a,s,u){return bU(r,o,a)};{var n=r.invalidateCachedZSortedEles;r.invalidateCachedZSortedEles=function(){n.call(r),r.pickingFrameBuffer.needsDraw=!0}}{var i=r.notify;r.notify=function(o,a){i.call(r,o,a),o==="viewport"||o==="bounds"?r.pickingFrameBuffer.needsDraw=!0:o==="background"&&r.drawing.invalidate(a,{type:"node-body"})}}}function hU(r){var e=r.data.contexts[r.WEBGL];e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}function dU(r){var e=function(n){n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,r.canvasWidth,r.canvasHeight),n.restore()};e(r.data.contexts[r.NODE]),e(r.data.contexts[r.DRAG])}function vU(r){var e=r.canvasWidth,t=r.canvasHeight,n=jS(r),i=n.pan,o=n.zoom,a=w0();N0(a,a,[i.x,i.y]),FS(a,a,[o,o]);var s=w0();nU(s,e,t);var u=w0();return rU(u,s,a),u}function vM(r,e){var t=r.canvasWidth,n=r.canvasHeight,i=jS(r),o=i.pan,a=i.zoom;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t,n),e.translate(o.x,o.y),e.scale(a,a)}function pU(r,e){r.drawSelectionRectangle(e,function(t){return vM(r,t)})}function gU(r){var e=r.data.contexts[r.NODE];e.save(),vM(r,e),e.strokeStyle="rgba(0, 0, 0, 0.3)",e.beginPath(),e.moveTo(-1e3,0),e.lineTo(1e3,0),e.stroke(),e.beginPath(),e.moveTo(0,-1e3),e.lineTo(0,1e3),e.stroke(),e.restore()}function yU(r){var e=function(i,o,a){for(var s=i.atlasManager.getAtlasCollection(o),u=r.data.contexts[r.NODE],l=.125,c=s.atlases,f=0;f<c.length;f++){var h=c[f],d=h.canvas;if(d){var v=d.width,y=d.height,w=v*f,b=d.height*a;u.save(),u.scale(l,l),u.drawImage(d,w,b),u.strokeStyle="black",u.rect(w,b,v,y),u.stroke(),u.restore()}}},t=0;e(r.drawing,"node",t++),e(r.drawing,"label",t++)}function mU(r,e,t,n,i){var o,a,s,u,l=jS(r),c=l.pan,f=l.zoom;{var h=XB(r,c,f,e,t),d=sa(h,2),v=d[0],y=d[1],w=6;o=v-w/2,a=y-w/2,s=w,u=w}if(s===0||u===0)return[];var b=r.data.contexts[r.WEBGL];b.bindFramebuffer(b.FRAMEBUFFER,r.pickingFrameBuffer),r.pickingFrameBuffer.needsDraw&&(b.viewport(0,0,b.canvas.width,b.canvas.height),pM(r,null,Hy.PICKING),r.pickingFrameBuffer.needsDraw=!1);var p=s*u,_=new Uint8Array(p*4);b.readPixels(o,a,s,u,b.RGBA,b.UNSIGNED_BYTE,_),b.bindFramebuffer(b.FRAMEBUFFER,null);for(var O=new Set,P=0;P<p;P++){var R=_.slice(P*4,P*4+4),T=KB(R)-1;T>=0&&O.add(T)}return O}function bU(r,e,t){var n=mU(r,e,t),i=r.getCachedZSortedEles(),o,a,s=cc(n),u;try{for(s.s();!(u=s.n()).done;){var l=u.value,c=i[l];if(!o&&c.isNode()&&(o=c),!a&&c.isEdge()&&(a=c),o&&a)break}}catch(f){s.e(f)}finally{s.f()}return[o,a].filter(Boolean)}function _U(r){return r.pstyle("shape").value==="rectangle"&&r.pstyle("background-fill").value==="solid"&&r.pstyle("border-width").pfValue===0&&r.pstyle("background-image").strValue==="none"}function jw(r,e,t){var n=r.drawing;e+=1,t.isNode()?(n.drawTexture(t,e,"node-underlay"),_U(t)?n.drawSimpleRectangle(t,e,"node-body"):n.drawTexture(t,e,"node-body"),n.drawTexture(t,e,"label"),n.drawTexture(t,e,"node-overlay")):(n.drawEdgeLine(t,e),n.drawEdgeArrow(t,e,"source"),n.drawEdgeArrow(t,e,"target"),n.drawTexture(t,e,"label"),n.drawTexture(t,e,"edge-source-label"),n.drawTexture(t,e,"edge-target-label"))}function pM(r,e,t){var n;r.webglDebug&&(n=performance.now());var i=r.drawing,o=0;if(t.screen&&r.data.canvasNeedsRedraw[r.SELECT_BOX]&&pU(r,e),r.data.canvasNeedsRedraw[r.NODE]||t.picking){var a=r.data.contexts[r.WEBGL];t.screen?(a.clearColor(0,0,0,0),a.enable(a.BLEND),a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA)):a.disable(a.BLEND),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),a.viewport(0,0,a.canvas.width,a.canvas.height);var s=vU(r),u=r.getCachedZSortedEles();if(o=u.length,i.startFrame(s,t),t.screen){for(var l=0;l<u.nondrag.length;l++)jw(r,l,u.nondrag[l]);for(var c=0;c<u.drag.length;c++)jw(r,c,u.drag[c])}else if(t.picking)for(var f=0;f<u.length;f++)jw(r,f,u[f]);i.endFrame(),t.screen&&r.webglDebugShowAtlases&&(gU(r),yU(r)),r.data.canvasNeedsRedraw[r.NODE]=!1,r.data.canvasNeedsRedraw[r.DRAG]=!1}if(r.webglDebug){var h=performance.now(),d=!1,v=Math.ceil(h-n),y=i.getDebugInfo(),w=["".concat(o," elements"),"".concat(y.totalInstances," instances"),"".concat(y.batchCount," batches"),"".concat(y.totalAtlases," atlases"),"".concat(y.wrappedCount," wrapped textures"),"".concat(y.rectangleCount," simple rectangles")].join(", ");if(d)"WebGL (".concat(t.name,") - time ").concat(v,"ms, ").concat(w);else{"WebGL (".concat(t.name,") - frame time ").concat(v,"ms"),"  ".concat(w);var b=y.atlasInfo,p=cc(b),_;try{for(p.s();!(_=p.n()).done;){var O=_.value;"  ".concat(O.type,": ").concat(O.keyCount," keys, ").concat(O.atlasCount," atlases")}}catch(P){p.e(P)}finally{p.f()}}}r.data.gc&&(r.data.gc=!1,i.gc())}var Kd={};Kd.drawPolygonPath=function(r,e,t,n,i,o){var a=n/2,s=i/2;r.beginPath&&r.beginPath(),r.moveTo(e+a*o[0],t+s*o[1]);for(var u=1;u<o.length/2;u++)r.lineTo(e+a*o[u*2],t+s*o[u*2+1]);r.closePath()};Kd.drawRoundPolygonPath=function(r,e,t,n,i,o,a){a.forEach(function(s){return XD(r,s)}),r.closePath()};Kd.drawRoundRectanglePath=function(r,e,t,n,i,o){var a=n/2,s=i/2,u=o==="auto"?ap(n,i):Math.min(o,s,a);r.beginPath&&r.beginPath(),r.moveTo(e,t-s),r.arcTo(e+a,t-s,e+a,t,u),r.arcTo(e+a,t+s,e,t+s,u),r.arcTo(e-a,t+s,e-a,t,u),r.arcTo(e-a,t-s,e,t-s,u),r.lineTo(e,t-s),r.closePath()};Kd.drawBottomRoundRectanglePath=function(r,e,t,n,i,o){var a=n/2,s=i/2,u=o==="auto"?ap(n,i):o;r.beginPath&&r.beginPath(),r.moveTo(e,t-s),r.lineTo(e+a,t-s),r.lineTo(e+a,t),r.arcTo(e+a,t+s,e,t+s,u),r.arcTo(e-a,t+s,e-a,t,u),r.lineTo(e-a,t-s),r.lineTo(e,t-s),r.closePath()};Kd.drawCutRectanglePath=function(r,e,t,n,i,o,a){var s=n/2,u=i/2,l=a==="auto"?OS():a;r.beginPath&&r.beginPath(),r.moveTo(e-s+l,t-u),r.lineTo(e+s-l,t-u),r.lineTo(e+s,t-u+l),r.lineTo(e+s,t+u-l),r.lineTo(e+s-l,t+u),r.lineTo(e-s+l,t+u),r.lineTo(e-s,t+u-l),r.lineTo(e-s,t-u+l),r.closePath()};Kd.drawBarrelPath=function(r,e,t,n,i){var o=n/2,a=i/2,s=e-o,u=e+o,l=t-a,c=t+a,f=Lx(n,i),h=f.widthOffset,d=f.heightOffset,v=f.ctrlPtOffsetPct*h;r.beginPath&&r.beginPath(),r.moveTo(s,l+d),r.lineTo(s,c-d),r.quadraticCurveTo(s+v,c,s+h,c),r.lineTo(u-h,c),r.quadraticCurveTo(u-v,c,u,c-d),r.lineTo(u,l+d),r.quadraticCurveTo(u-v,l,u-h,l),r.lineTo(s+h,l),r.quadraticCurveTo(s+v,l,s,l+d),r.closePath()};var aP=Math.sin(0),sP=Math.cos(0),Xx={},Kx={},gM=Math.PI/40;for(var pg=0*Math.PI;pg<2*Math.PI;pg+=gM)Xx[pg]=Math.sin(pg),Kx[pg]=Math.cos(pg);Kd.drawEllipsePath=function(r,e,t,n,i){if(r.beginPath&&r.beginPath(),r.ellipse)r.ellipse(e,t,n/2,i/2,0,0,2*Math.PI);else for(var o,a,s=n/2,u=i/2,l=0*Math.PI;l<2*Math.PI;l+=gM)o=e-s*Xx[l]*aP+s*Kx[l]*sP,a=t+u*Kx[l]*aP+u*Xx[l]*sP,l===0?r.moveTo(o,a):r.lineTo(o,a);r.closePath()};var gm={};gm.createBuffer=function(r,e){var t=document.createElement("canvas");return t.width=r,t.height=e,[t,t.getContext("2d")]};gm.bufferCanvasImage=function(r){var e=this.cy,t=e.mutableElements(),n=t.boundingBox(),i=this.findContainerClientCoords(),o=r.full?Math.ceil(n.w):i[2],a=r.full?Math.ceil(n.h):i[3],s=qt(r.maxWidth)||qt(r.maxHeight),u=this.getPixelRatio(),l=1;if(r.scale!==void 0)o*=r.scale,a*=r.scale,l=r.scale;else if(s){var c=1/0,f=1/0;qt(r.maxWidth)&&(c=l*r.maxWidth/o),qt(r.maxHeight)&&(f=l*r.maxHeight/a),l=Math.min(c,f),o*=l,a*=l}s||(o*=u,a*=u,l*=u);var h=document.createElement("canvas");h.width=o,h.height=a,h.style.width=o+"px",h.style.height=a+"px";var d=h.getContext("2d");if(o>0&&a>0){d.clearRect(0,0,o,a),d.globalCompositeOperation="source-over";var v=this.getCachedZSortedEles();if(r.full)d.translate(-n.x1*l,-n.y1*l),d.scale(l,l),this.drawElements(d,v),d.scale(1/l,1/l),d.translate(n.x1*l,n.y1*l);else{var y=e.pan(),w={x:y.x*l,y:y.y*l};l*=e.zoom(),d.translate(w.x,w.y),d.scale(l,l),this.drawElements(d,v),d.scale(1/l,1/l),d.translate(-w.x,-w.y)}r.bg&&(d.globalCompositeOperation="destination-over",d.fillStyle=r.bg,d.rect(0,0,o,a),d.fill())}return h};function wU(r,e){for(var t=atob(r),n=new ArrayBuffer(t.length),i=new Uint8Array(n),o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return new Blob([n],{type:e})}function uP(r){var e=r.indexOf(",");return r.substr(e+1)}function yM(r,e,t){var n=function(){return e.toDataURL(t,r.quality)};switch(r.output){case"blob-promise":return new Ug(function(i,o){try{e.toBlob(function(a){a!=null?i(a):o(new Error("`canvas.toBlob()` sent a null value in its callback"))},t,r.quality)}catch(a){o(a)}});case"blob":return wU(uP(n()),t);case"base64":return uP(n());case"base64uri":default:return n()}}gm.png=function(r){return yM(r,this.bufferCanvasImage(r),"image/png")};gm.jpg=function(r){return yM(r,this.bufferCanvasImage(r),"image/jpeg")};var mM={};mM.nodeShapeImpl=function(r,e,t,n,i,o,a,s){switch(r){case"ellipse":return this.drawEllipsePath(e,t,n,i,o);case"polygon":return this.drawPolygonPath(e,t,n,i,o,a);case"round-polygon":return this.drawRoundPolygonPath(e,t,n,i,o,a,s);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,t,n,i,o,s);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,t,n,i,o,a,s);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,t,n,i,o,s);case"barrel":return this.drawBarrelPath(e,t,n,i,o)}};var EU=bM,Xr=bM.prototype;Xr.CANVAS_LAYERS=3;Xr.SELECT_BOX=0;Xr.DRAG=1;Xr.NODE=2;Xr.WEBGL=3;Xr.CANVAS_TYPES=["2d","2d","2d","webgl2"];Xr.BUFFER_COUNT=3;Xr.TEXTURE_BUFFER=0;Xr.MOTIONBLUR_BUFFER_NODE=1;Xr.MOTIONBLUR_BUFFER_DRAG=2;function bM(r){var e=this,t=e.cy.window(),n=t.document;r.webgl&&(Xr.CANVAS_LAYERS=e.CANVAS_LAYERS=4),e.data={canvases:new Array(Xr.CANVAS_LAYERS),contexts:new Array(Xr.CANVAS_LAYERS),canvasNeedsRedraw:new Array(Xr.CANVAS_LAYERS),bufferCanvases:new Array(Xr.BUFFER_COUNT),bufferContexts:new Array(Xr.CANVAS_LAYERS)};var i="-webkit-tap-highlight-color",o="rgba(0,0,0,0)";e.data.canvasContainer=n.createElement("div");var a=e.data.canvasContainer.style;e.data.canvasContainer.style[i]=o,a.position="relative",a.zIndex="0",a.overflow="hidden";var s=r.cy.container();s.appendChild(e.data.canvasContainer),s.style[i]=o;var u={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};Pj()&&(u["-ms-touch-action"]="none",u["touch-action"]="none");for(var l=0;l<Xr.CANVAS_LAYERS;l++){var c=e.data.canvases[l]=n.createElement("canvas"),f=Xr.CANVAS_TYPES[l];e.data.contexts[l]=c.getContext(f),e.data.contexts[l]||Hi("Could not create canvas of type "+f),Object.keys(u).forEach(function(Pe){c.style[Pe]=u[Pe]}),c.style.position="absolute",c.setAttribute("data-id","layer"+l),c.style.zIndex=String(Xr.CANVAS_LAYERS-l),e.data.canvasContainer.appendChild(c),e.data.canvasNeedsRedraw[l]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[Xr.NODE].setAttribute("data-id","layer"+Xr.NODE+"-node"),e.data.canvases[Xr.SELECT_BOX].setAttribute("data-id","layer"+Xr.SELECT_BOX+"-selectbox"),e.data.canvases[Xr.DRAG].setAttribute("data-id","layer"+Xr.DRAG+"-drag"),e.data.canvases[Xr.WEBGL]&&e.data.canvases[Xr.WEBGL].setAttribute("data-id","layer"+Xr.WEBGL+"-webgl");for(var l=0;l<Xr.BUFFER_COUNT;l++)e.data.bufferCanvases[l]=n.createElement("canvas"),e.data.bufferContexts[l]=e.data.bufferCanvases[l].getContext("2d"),e.data.bufferCanvases[l].style.position="absolute",e.data.bufferCanvases[l].setAttribute("data-id","buffer"+l),e.data.bufferCanvases[l].style.zIndex=String(-l-1),e.data.bufferCanvases[l].style.visibility="hidden";e.pathsEnabled=!0;var h=$s(),d=function(de){return{x:(de.x1+de.x2)/2,y:(de.y1+de.y2)/2}},v=function(de){return{x:-de.w/2,y:-de.h/2}},y=function(de){var Oe=de[0]._private,Ae=Oe.oldBackgroundTimestamp===Oe.backgroundTimestamp;return!Ae},w=function(de){return de[0]._private.nodeKey},b=function(de){return de[0]._private.labelStyleKey},p=function(de){return de[0]._private.sourceLabelStyleKey},_=function(de){return de[0]._private.targetLabelStyleKey},O=function(de,Oe,Ae,Ve,tt){return e.drawElement(de,Oe,Ae,!1,!1,tt)},P=function(de,Oe,Ae,Ve,tt){return e.drawElementText(de,Oe,Ae,Ve,"main",tt)},R=function(de,Oe,Ae,Ve,tt){return e.drawElementText(de,Oe,Ae,Ve,"source",tt)},T=function(de,Oe,Ae,Ve,tt){return e.drawElementText(de,Oe,Ae,Ve,"target",tt)},A=function(de){return de.boundingBox(),de[0]._private.bodyBounds},M=function(de){return de.boundingBox(),de[0]._private.labelBounds.main||h},N=function(de){return de.boundingBox(),de[0]._private.labelBounds.source||h},j=function(de){return de.boundingBox(),de[0]._private.labelBounds.target||h},B=function(de,Oe){return Oe},q=function(de){return d(A(de))},W=function(de,Oe,Ae){var Ve=de?de+"-":"";return{x:Oe.x+Ae.pstyle(Ve+"text-margin-x").pfValue,y:Oe.y+Ae.pstyle(Ve+"text-margin-y").pfValue}},J=function(de,Oe,Ae){var Ve=de[0]._private.rscratch;return{x:Ve[Oe],y:Ve[Ae]}},te=function(de){return W("",J(de,"labelX","labelY"),de)},re=function(de){return W("source",J(de,"sourceLabelX","sourceLabelY"),de)},ee=function(de){return W("target",J(de,"targetLabelX","targetLabelY"),de)},fe=function(de){return v(A(de))},he=function(de){return v(N(de))},se=function(de){return v(j(de))},me=function(de){var Oe=M(de),Ae=v(M(de));if(de.isNode()){switch(de.pstyle("text-halign").value){case"left":Ae.x=-Oe.w-(Oe.leftPad||0);break;case"right":Ae.x=-(Oe.rightPad||0);break}switch(de.pstyle("text-valign").value){case"top":Ae.y=-Oe.h-(Oe.topPad||0);break;case"bottom":Ae.y=-(Oe.botPad||0);break}}return Ae},De=e.data.eleTxrCache=new Ly(e,{getKey:w,doesEleInvalidateKey:y,drawElement:O,getBoundingBox:A,getRotationPoint:q,getRotationOffset:fe,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),Le=e.data.lblTxrCache=new Ly(e,{getKey:b,drawElement:P,getBoundingBox:M,getRotationPoint:te,getRotationOffset:me,isVisible:B}),Ie=e.data.slbTxrCache=new Ly(e,{getKey:p,drawElement:R,getBoundingBox:N,getRotationPoint:re,getRotationOffset:he,isVisible:B}),qe=e.data.tlbTxrCache=new Ly(e,{getKey:_,drawElement:T,getBoundingBox:j,getRotationPoint:ee,getRotationOffset:se,isVisible:B}),Ge=e.data.lyrTxrCache=new oM(e);e.onUpdateEleCalcs(function(de,Oe){De.invalidateElements(Oe),Le.invalidateElements(Oe),Ie.invalidateElements(Oe),qe.invalidateElements(Oe),Ge.invalidateElements(Oe);for(var Ae=0;Ae<Oe.length;Ae++){var Ve=Oe[Ae]._private;Ve.oldBackgroundTimestamp=Ve.backgroundTimestamp}});var Me=function(de){for(var Oe=0;Oe<de.length;Oe++)Ge.enqueueElementRefinement(de[Oe].ele)};De.onDequeue(Me),Le.onDequeue(Me),Ie.onDequeue(Me),qe.onDequeue(Me),r.webgl&&e.initWebgl(r,{getStyleKey:w,getLabelKey:b,getSourceLabelKey:p,getTargetLabelKey:_,drawElement:O,drawLabel:P,drawSourceLabel:R,drawTargetLabel:T,getElementBox:A,getLabelBox:M,getSourceLabelBox:N,getTargetLabelBox:j,getElementRotationPoint:q,getElementRotationOffset:fe,getLabelRotationPoint:te,getSourceLabelRotationPoint:re,getTargetLabelRotationPoint:ee,getLabelRotationOffset:me,getSourceLabelRotationOffset:he,getTargetLabelRotationOffset:se})}Xr.redrawHint=function(r,e){var t=this;switch(r){case"eles":t.data.canvasNeedsRedraw[Xr.NODE]=e;break;case"drag":t.data.canvasNeedsRedraw[Xr.DRAG]=e;break;case"select":t.data.canvasNeedsRedraw[Xr.SELECT_BOX]=e;break;case"gc":t.data.gc=!0;break}};var OU=typeof Path2D<"u";Xr.path2dEnabled=function(r){if(r===void 0)return this.pathsEnabled;this.pathsEnabled=!!r};Xr.usePaths=function(){return OU&&this.pathsEnabled};Xr.setImgSmoothing=function(r,e){r.imageSmoothingEnabled!=null?r.imageSmoothingEnabled=e:(r.webkitImageSmoothingEnabled=e,r.mozImageSmoothingEnabled=e,r.msImageSmoothingEnabled=e)};Xr.getImgSmoothing=function(r){return r.imageSmoothingEnabled!=null?r.imageSmoothingEnabled:r.webkitImageSmoothingEnabled||r.mozImageSmoothingEnabled||r.msImageSmoothingEnabled};Xr.makeOffscreenCanvas=function(r,e){var t;if((typeof OffscreenCanvas>"u"?"undefined":Go(OffscreenCanvas))!=="undefined")t=new OffscreenCanvas(r,e);else{var n=this.cy.window(),i=n.document;t=i.createElement("canvas"),t.width=r,t.height=e}return t};[aM,pf,Rh,NS,vp,Wg,Ss,dM,Kd,gm,mM].forEach(function(r){_r(Xr,r)});var xU=[{name:"null",impl:HD},{name:"base",impl:rM},{name:"canvas",impl:EU}],SU=[{type:"layout",extensions:nB},{type:"renderer",extensions:xU}],_M={},wM={};function EM(r,e,t){var n=t,i=function(A){Bn("Can not register `"+e+"` for `"+r+"` since `"+A+"` already exists in the prototype and can not be overridden")};if(r==="core"){if(rm.prototype[e])return i(e);rm.prototype[e]=t}else if(r==="collection"){if(Da.prototype[e])return i(e);Da.prototype[e]=t}else if(r==="layout"){for(var o=function(A){this.options=A,t.call(this,A),wn(this._private)||(this._private={}),this._private.cy=A.cy,this._private.listeners=[],this.createEmitter()},a=o.prototype=Object.create(t.prototype),s=[],u=0;u<s.length;u++){var l=s[u];a[l]=a[l]||function(){return this}}a.start&&!a.run?a.run=function(){return this.start(),this}:!a.start&&a.run&&(a.start=function(){return this.run(),this});var c=t.prototype.stop;a.stop=function(){var T=this.options;if(T&&T.animate){var A=this.animations;if(A)for(var M=0;M<A.length;M++)A[M].stop()}return c?c.call(this):this.emit("layoutstop"),this},a.destroy||(a.destroy=function(){return this}),a.cy=function(){return this._private.cy};var f=function(A){return A._private.cy},h={addEventFields:function(A,M){M.layout=A,M.cy=f(A),M.target=A},bubble:function(){return!0},parent:function(A){return f(A)}};_r(a,{createEmitter:function(){return this._private.emitter=new ib(h,this),this},emitter:function(){return this._private.emitter},on:function(A,M){return this.emitter().on(A,M),this},one:function(A,M){return this.emitter().one(A,M),this},once:function(A,M){return this.emitter().one(A,M),this},removeListener:function(A,M){return this.emitter().removeListener(A,M),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(A,M){return this.emitter().emit(A,M),this}}),Fn.eventAliasesOn(a),n=o}else if(r==="renderer"&&e!=="null"&&e!=="base"){var d=OM("renderer","base"),v=d.prototype,y=t,w=t.prototype,b=function(){d.apply(this,arguments),y.apply(this,arguments)},p=b.prototype;for(var _ in v){var O=v[_],P=w[_]!=null;if(P)return i(_);p[_]=O}for(var R in w)p[R]=w[R];v.clientFunctions.forEach(function(T){p[T]=p[T]||function(){Hi("Renderer does not implement `renderer."+T+"()` on its prototype")}}),n=b}else if(r==="__proto__"||r==="constructor"||r==="prototype")return Hi(r+" is an illegal type to be registered, possibly lead to prototype pollutions");return Uk({map:_M,keys:[r,e],value:n})}function OM(r,e){return zk({map:_M,keys:[r,e]})}function TU(r,e,t,n,i){return Uk({map:wM,keys:[r,e,t,n],value:i})}function CU(r,e,t,n){return zk({map:wM,keys:[r,e,t,n]})}var Zx=function(){if(arguments.length===2)return OM.apply(null,arguments);if(arguments.length===3)return EM.apply(null,arguments);if(arguments.length===4)return CU.apply(null,arguments);if(arguments.length===5)return TU.apply(null,arguments);Hi("Invalid extension access syntax")};rm.prototype.extension=Zx;SU.forEach(function(r){r.extensions.forEach(function(e){EM(r.type,e.name,e.impl)})});var j0=function(){if(!(this instanceof j0))return new j0;this.length=0},lp=j0.prototype;lp.instanceString=function(){return"stylesheet"};lp.selector=function(r){var e=this.length++;return this[e]={selector:r,properties:[]},this};lp.css=function(r,e){var t=this.length-1;if(vr(r))this[t].properties.push({name:r,value:e});else if(wn(r))for(var n=r,i=Object.keys(n),o=0;o<i.length;o++){var a=i[o],s=n[a];if(s!=null){var u=ua.properties[a]||ua.properties[Y0(a)];if(u!=null){var l=u.name,c=s;this[t].properties.push({name:l,value:c})}}}return this};lp.style=lp.css;lp.generateStyle=function(r){var e=new ua(r);return this.appendToStyle(e)};lp.appendToStyle=function(r){for(var e=0;e<this.length;e++){var t=this[e],n=t.selector,i=t.properties;r.selector(n);for(var o=0;o<i.length;o++){var a=i[o];r.css(a.name,a.value)}}return r};var PU="3.31.2",Vd=function(e){if(e===void 0&&(e={}),wn(e))return new rm(e);if(vr(e))return Zx.apply(Zx,arguments)};Vd.use=function(r){var e=Array.prototype.slice.call(arguments,1);return e.unshift(Vd),r.apply(null,e),this};Vd.warnings=function(r){return Yk(r)};Vd.version=PU;Vd.stylesheet=Vd.Stylesheet=j0;var xM={exports:{}},Fw={exports:{}},Bw={exports:{}},lP;function AU(){return lP||(lP=1,function(r,e){(function(n,i){r.exports=i()})(dn,function(){return function(t){var n={};function i(o){if(n[o])return n[o].exports;var a=n[o]={i:o,l:!1,exports:{}};return t[o].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=t,i.c=n,i.i=function(o){return o},i.d=function(o,a,s){i.o(o,a)||Object.defineProperty(o,a,{configurable:!1,enumerable:!0,get:s})},i.n=function(o){var a=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(a,"a",a),a},i.o=function(o,a){return Object.prototype.hasOwnProperty.call(o,a)},i.p="",i(i.s=26)}([function(t,n,i){function o(){}o.QUALITY=1,o.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,o.DEFAULT_INCREMENTAL=!1,o.DEFAULT_ANIMATION_ON_LAYOUT=!0,o.DEFAULT_ANIMATION_DURING_LAYOUT=!1,o.DEFAULT_ANIMATION_PERIOD=50,o.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,o.DEFAULT_GRAPH_MARGIN=15,o.NODE_DIMENSIONS_INCLUDE_LABELS=!1,o.SIMPLE_NODE_SIZE=40,o.SIMPLE_NODE_HALF_SIZE=o.SIMPLE_NODE_SIZE/2,o.EMPTY_COMPOUND_NODE_SIZE=40,o.MIN_EDGE_LENGTH=1,o.WORLD_BOUNDARY=1e6,o.INITIAL_WORLD_BOUNDARY=o.WORLD_BOUNDARY/1e3,o.WORLD_CENTER_X=1200,o.WORLD_CENTER_Y=900,t.exports=o},function(t,n,i){var o=i(2),a=i(8),s=i(9);function u(c,f,h){o.call(this,h),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=h,this.bendpoints=[],this.source=c,this.target=f}u.prototype=Object.create(o.prototype);for(var l in o)u[l]=o[l];u.prototype.getSource=function(){return this.source},u.prototype.getTarget=function(){return this.target},u.prototype.isInterGraph=function(){return this.isInterGraph},u.prototype.getLength=function(){return this.length},u.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},u.prototype.getBendpoints=function(){return this.bendpoints},u.prototype.getLca=function(){return this.lca},u.prototype.getSourceInLca=function(){return this.sourceInLca},u.prototype.getTargetInLca=function(){return this.targetInLca},u.prototype.getOtherEnd=function(c){if(this.source===c)return this.target;if(this.target===c)return this.source;throw"Node is not incident with this edge"},u.prototype.getOtherEndInGraph=function(c,f){for(var h=this.getOtherEnd(c),d=f.getGraphManager().getRoot();;){if(h.getOwner()==f)return h;if(h.getOwner()==d)break;h=h.getOwner().getParent()}return null},u.prototype.updateLength=function(){var c=new Array(4);this.isOverlapingSourceAndTarget=a.getIntersection(this.target.getRect(),this.source.getRect(),c),this.isOverlapingSourceAndTarget||(this.lengthX=c[0]-c[2],this.lengthY=c[1]-c[3],Math.abs(this.lengthX)<1&&(this.lengthX=s.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=s.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},u.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=s.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=s.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},t.exports=u},function(t,n,i){function o(a){this.vGraphObject=a}t.exports=o},function(t,n,i){var o=i(2),a=i(10),s=i(13),u=i(0),l=i(16),c=i(4);function f(d,v,y,w){y==null&&w==null&&(w=v),o.call(this,w),d.graphManager!=null&&(d=d.graphManager),this.estimatedSize=a.MIN_VALUE,this.inclusionTreeDepth=a.MAX_VALUE,this.vGraphObject=w,this.edges=[],this.graphManager=d,y!=null&&v!=null?this.rect=new s(v.x,v.y,y.width,y.height):this.rect=new s}f.prototype=Object.create(o.prototype);for(var h in o)f[h]=o[h];f.prototype.getEdges=function(){return this.edges},f.prototype.getChild=function(){return this.child},f.prototype.getOwner=function(){return this.owner},f.prototype.getWidth=function(){return this.rect.width},f.prototype.setWidth=function(d){this.rect.width=d},f.prototype.getHeight=function(){return this.rect.height},f.prototype.setHeight=function(d){this.rect.height=d},f.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},f.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},f.prototype.getCenter=function(){return new c(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},f.prototype.getLocation=function(){return new c(this.rect.x,this.rect.y)},f.prototype.getRect=function(){return this.rect},f.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},f.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},f.prototype.setRect=function(d,v){this.rect.x=d.x,this.rect.y=d.y,this.rect.width=v.width,this.rect.height=v.height},f.prototype.setCenter=function(d,v){this.rect.x=d-this.rect.width/2,this.rect.y=v-this.rect.height/2},f.prototype.setLocation=function(d,v){this.rect.x=d,this.rect.y=v},f.prototype.moveBy=function(d,v){this.rect.x+=d,this.rect.y+=v},f.prototype.getEdgeListToNode=function(d){var v=[],y=this;return y.edges.forEach(function(w){if(w.target==d){if(w.source!=y)throw"Incorrect edge source!";v.push(w)}}),v},f.prototype.getEdgesBetween=function(d){var v=[],y=this;return y.edges.forEach(function(w){if(!(w.source==y||w.target==y))throw"Incorrect edge source and/or target";(w.target==d||w.source==d)&&v.push(w)}),v},f.prototype.getNeighborsList=function(){var d=new Set,v=this;return v.edges.forEach(function(y){if(y.source==v)d.add(y.target);else{if(y.target!=v)throw"Incorrect incidency!";d.add(y.source)}}),d},f.prototype.withChildren=function(){var d=new Set,v,y;if(d.add(this),this.child!=null)for(var w=this.child.getNodes(),b=0;b<w.length;b++)v=w[b],y=v.withChildren(),y.forEach(function(p){d.add(p)});return d},f.prototype.getNoOfChildren=function(){var d=0,v;if(this.child==null)d=1;else for(var y=this.child.getNodes(),w=0;w<y.length;w++)v=y[w],d+=v.getNoOfChildren();return d==0&&(d=1),d},f.prototype.getEstimatedSize=function(){if(this.estimatedSize==a.MIN_VALUE)throw"assert failed";return this.estimatedSize},f.prototype.calcEstimatedSize=function(){return this.child==null?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},f.prototype.scatter=function(){var d,v,y=-u.INITIAL_WORLD_BOUNDARY,w=u.INITIAL_WORLD_BOUNDARY;d=u.WORLD_CENTER_X+l.nextDouble()*(w-y)+y;var b=-u.INITIAL_WORLD_BOUNDARY,p=u.INITIAL_WORLD_BOUNDARY;v=u.WORLD_CENTER_Y+l.nextDouble()*(p-b)+b,this.rect.x=d,this.rect.y=v},f.prototype.updateBounds=function(){if(this.getChild()==null)throw"assert failed";if(this.getChild().getNodes().length!=0){var d=this.getChild();if(d.updateBounds(!0),this.rect.x=d.getLeft(),this.rect.y=d.getTop(),this.setWidth(d.getRight()-d.getLeft()),this.setHeight(d.getBottom()-d.getTop()),u.NODE_DIMENSIONS_INCLUDE_LABELS){var v=d.getRight()-d.getLeft(),y=d.getBottom()-d.getTop();this.labelWidth>v&&(this.rect.x-=(this.labelWidth-v)/2,this.setWidth(this.labelWidth)),this.labelHeight>y&&(this.labelPos=="center"?this.rect.y-=(this.labelHeight-y)/2:this.labelPos=="top"&&(this.rect.y-=this.labelHeight-y),this.setHeight(this.labelHeight))}}},f.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==a.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},f.prototype.transform=function(d){var v=this.rect.x;v>u.WORLD_BOUNDARY?v=u.WORLD_BOUNDARY:v<-u.WORLD_BOUNDARY&&(v=-u.WORLD_BOUNDARY);var y=this.rect.y;y>u.WORLD_BOUNDARY?y=u.WORLD_BOUNDARY:y<-u.WORLD_BOUNDARY&&(y=-u.WORLD_BOUNDARY);var w=new c(v,y),b=d.inverseTransformPoint(w);this.setLocation(b.x,b.y)},f.prototype.getLeft=function(){return this.rect.x},f.prototype.getRight=function(){return this.rect.x+this.rect.width},f.prototype.getTop=function(){return this.rect.y},f.prototype.getBottom=function(){return this.rect.y+this.rect.height},f.prototype.getParent=function(){return this.owner==null?null:this.owner.getParent()},t.exports=f},function(t,n,i){function o(a,s){a==null&&s==null?(this.x=0,this.y=0):(this.x=a,this.y=s)}o.prototype.getX=function(){return this.x},o.prototype.getY=function(){return this.y},o.prototype.setX=function(a){this.x=a},o.prototype.setY=function(a){this.y=a},o.prototype.getDifference=function(a){return new DimensionD(this.x-a.x,this.y-a.y)},o.prototype.getCopy=function(){return new o(this.x,this.y)},o.prototype.translate=function(a){return this.x+=a.width,this.y+=a.height,this},t.exports=o},function(t,n,i){var o=i(2),a=i(10),s=i(0),u=i(6),l=i(3),c=i(1),f=i(13),h=i(12),d=i(11);function v(w,b,p){o.call(this,p),this.estimatedSize=a.MIN_VALUE,this.margin=s.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=w,b!=null&&b instanceof u?this.graphManager=b:b!=null&&b instanceof Layout&&(this.graphManager=b.graphManager)}v.prototype=Object.create(o.prototype);for(var y in o)v[y]=o[y];v.prototype.getNodes=function(){return this.nodes},v.prototype.getEdges=function(){return this.edges},v.prototype.getGraphManager=function(){return this.graphManager},v.prototype.getParent=function(){return this.parent},v.prototype.getLeft=function(){return this.left},v.prototype.getRight=function(){return this.right},v.prototype.getTop=function(){return this.top},v.prototype.getBottom=function(){return this.bottom},v.prototype.isConnected=function(){return this.isConnected},v.prototype.add=function(w,b,p){if(b==null&&p==null){var _=w;if(this.graphManager==null)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(_)>-1)throw"Node already in graph!";return _.owner=this,this.getNodes().push(_),_}else{var O=w;if(!(this.getNodes().indexOf(b)>-1&&this.getNodes().indexOf(p)>-1))throw"Source or target not in graph!";if(!(b.owner==p.owner&&b.owner==this))throw"Both owners must be this graph!";return b.owner!=p.owner?null:(O.source=b,O.target=p,O.isInterGraph=!1,this.getEdges().push(O),b.edges.push(O),p!=b&&p.edges.push(O),O)}},v.prototype.remove=function(w){var b=w;if(w instanceof l){if(b==null)throw"Node is null!";if(!(b.owner!=null&&b.owner==this))throw"Owner graph is invalid!";if(this.graphManager==null)throw"Owner graph manager is invalid!";for(var p=b.edges.slice(),_,O=p.length,P=0;P<O;P++)_=p[P],_.isInterGraph?this.graphManager.remove(_):_.source.owner.remove(_);var R=this.nodes.indexOf(b);if(R==-1)throw"Node not in owner node list!";this.nodes.splice(R,1)}else if(w instanceof c){var _=w;if(_==null)throw"Edge is null!";if(!(_.source!=null&&_.target!=null))throw"Source and/or target is null!";if(!(_.source.owner!=null&&_.target.owner!=null&&_.source.owner==this&&_.target.owner==this))throw"Source and/or target owner is invalid!";var T=_.source.edges.indexOf(_),A=_.target.edges.indexOf(_);if(!(T>-1&&A>-1))throw"Source and/or target doesn't know this edge!";_.source.edges.splice(T,1),_.target!=_.source&&_.target.edges.splice(A,1);var R=_.source.owner.getEdges().indexOf(_);if(R==-1)throw"Not in owner's edge list!";_.source.owner.getEdges().splice(R,1)}},v.prototype.updateLeftTop=function(){for(var w=a.MAX_VALUE,b=a.MAX_VALUE,p,_,O,P=this.getNodes(),R=P.length,T=0;T<R;T++){var A=P[T];p=A.getTop(),_=A.getLeft(),w>p&&(w=p),b>_&&(b=_)}return w==a.MAX_VALUE?null:(P[0].getParent().paddingLeft!=null?O=P[0].getParent().paddingLeft:O=this.margin,this.left=b-O,this.top=w-O,new h(this.left,this.top))},v.prototype.updateBounds=function(w){for(var b=a.MAX_VALUE,p=-a.MAX_VALUE,_=a.MAX_VALUE,O=-a.MAX_VALUE,P,R,T,A,M,N=this.nodes,j=N.length,B=0;B<j;B++){var q=N[B];w&&q.child!=null&&q.updateBounds(),P=q.getLeft(),R=q.getRight(),T=q.getTop(),A=q.getBottom(),b>P&&(b=P),p<R&&(p=R),_>T&&(_=T),O<A&&(O=A)}var W=new f(b,_,p-b,O-_);b==a.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),N[0].getParent().paddingLeft!=null?M=N[0].getParent().paddingLeft:M=this.margin,this.left=W.x-M,this.right=W.x+W.width+M,this.top=W.y-M,this.bottom=W.y+W.height+M},v.calculateBounds=function(w){for(var b=a.MAX_VALUE,p=-a.MAX_VALUE,_=a.MAX_VALUE,O=-a.MAX_VALUE,P,R,T,A,M=w.length,N=0;N<M;N++){var j=w[N];P=j.getLeft(),R=j.getRight(),T=j.getTop(),A=j.getBottom(),b>P&&(b=P),p<R&&(p=R),_>T&&(_=T),O<A&&(O=A)}var B=new f(b,_,p-b,O-_);return B},v.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},v.prototype.getEstimatedSize=function(){if(this.estimatedSize==a.MIN_VALUE)throw"assert failed";return this.estimatedSize},v.prototype.calcEstimatedSize=function(){for(var w=0,b=this.nodes,p=b.length,_=0;_<p;_++){var O=b[_];w+=O.calcEstimatedSize()}return w==0?this.estimatedSize=s.EMPTY_COMPOUND_NODE_SIZE:this.estimatedSize=w/Math.sqrt(this.nodes.length),this.estimatedSize},v.prototype.updateConnected=function(){var w=this;if(this.nodes.length==0){this.isConnected=!0;return}var b=new d,p=new Set,_=this.nodes[0],O,P,R=_.withChildren();for(R.forEach(function(B){b.push(B),p.add(B)});b.length!==0;){_=b.shift(),O=_.getEdges();for(var T=O.length,A=0;A<T;A++){var M=O[A];if(P=M.getOtherEndInGraph(_,this),P!=null&&!p.has(P)){var N=P.withChildren();N.forEach(function(B){b.push(B),p.add(B)})}}}if(this.isConnected=!1,p.size>=this.nodes.length){var j=0;p.forEach(function(B){B.owner==w&&j++}),j==this.nodes.length&&(this.isConnected=!0)}},t.exports=v},function(t,n,i){var o,a=i(1);function s(u){o=i(5),this.layout=u,this.graphs=[],this.edges=[]}s.prototype.addRoot=function(){var u=this.layout.newGraph(),l=this.layout.newNode(null),c=this.add(u,l);return this.setRootGraph(c),this.rootGraph},s.prototype.add=function(u,l,c,f,h){if(c==null&&f==null&&h==null){if(u==null)throw"Graph is null!";if(l==null)throw"Parent node is null!";if(this.graphs.indexOf(u)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(u),u.parent!=null)throw"Already has a parent!";if(l.child!=null)throw"Already has a child!";return u.parent=l,l.child=u,u}else{h=c,f=l,c=u;var d=f.getOwner(),v=h.getOwner();if(!(d!=null&&d.getGraphManager()==this))throw"Source not in this graph mgr!";if(!(v!=null&&v.getGraphManager()==this))throw"Target not in this graph mgr!";if(d==v)return c.isInterGraph=!1,d.add(c,f,h);if(c.isInterGraph=!0,c.source=f,c.target=h,this.edges.indexOf(c)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(c),!(c.source!=null&&c.target!=null))throw"Edge source and/or target is null!";if(!(c.source.edges.indexOf(c)==-1&&c.target.edges.indexOf(c)==-1))throw"Edge already in source and/or target incidency list!";return c.source.edges.push(c),c.target.edges.push(c),c}},s.prototype.remove=function(u){if(u instanceof o){var l=u;if(l.getGraphManager()!=this)throw"Graph not in this graph mgr";if(!(l==this.rootGraph||l.parent!=null&&l.parent.graphManager==this))throw"Invalid parent node!";var c=[];c=c.concat(l.getEdges());for(var f,h=c.length,d=0;d<h;d++)f=c[d],l.remove(f);var v=[];v=v.concat(l.getNodes());var y;h=v.length;for(var d=0;d<h;d++)y=v[d],l.remove(y);l==this.rootGraph&&this.setRootGraph(null);var w=this.graphs.indexOf(l);this.graphs.splice(w,1),l.parent=null}else if(u instanceof a){if(f=u,f==null)throw"Edge is null!";if(!f.isInterGraph)throw"Not an inter-graph edge!";if(!(f.source!=null&&f.target!=null))throw"Source and/or target is null!";if(!(f.source.edges.indexOf(f)!=-1&&f.target.edges.indexOf(f)!=-1))throw"Source and/or target doesn't know this edge!";var w=f.source.edges.indexOf(f);if(f.source.edges.splice(w,1),w=f.target.edges.indexOf(f),f.target.edges.splice(w,1),!(f.source.owner!=null&&f.source.owner.getGraphManager()!=null))throw"Edge owner graph or owner graph manager is null!";if(f.source.owner.getGraphManager().edges.indexOf(f)==-1)throw"Not in owner graph manager's edge list!";var w=f.source.owner.getGraphManager().edges.indexOf(f);f.source.owner.getGraphManager().edges.splice(w,1)}},s.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},s.prototype.getGraphs=function(){return this.graphs},s.prototype.getAllNodes=function(){if(this.allNodes==null){for(var u=[],l=this.getGraphs(),c=l.length,f=0;f<c;f++)u=u.concat(l[f].getNodes());this.allNodes=u}return this.allNodes},s.prototype.resetAllNodes=function(){this.allNodes=null},s.prototype.resetAllEdges=function(){this.allEdges=null},s.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},s.prototype.getAllEdges=function(){if(this.allEdges==null){var u=[],l=this.getGraphs();l.length;for(var c=0;c<l.length;c++)u=u.concat(l[c].getEdges());u=u.concat(this.edges),this.allEdges=u}return this.allEdges},s.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},s.prototype.setAllNodesToApplyGravitation=function(u){if(this.allNodesToApplyGravitation!=null)throw"assert failed";this.allNodesToApplyGravitation=u},s.prototype.getRoot=function(){return this.rootGraph},s.prototype.setRootGraph=function(u){if(u.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=u,u.parent==null&&(u.parent=this.layout.newNode("Root node"))},s.prototype.getLayout=function(){return this.layout},s.prototype.isOneAncestorOfOther=function(u,l){if(!(u!=null&&l!=null))throw"assert failed";if(u==l)return!0;var c=u.getOwner(),f;do{if(f=c.getParent(),f==null)break;if(f==l)return!0;if(c=f.getOwner(),c==null)break}while(!0);c=l.getOwner();do{if(f=c.getParent(),f==null)break;if(f==u)return!0;if(c=f.getOwner(),c==null)break}while(!0);return!1},s.prototype.calcLowestCommonAncestors=function(){for(var u,l,c,f,h,d=this.getAllEdges(),v=d.length,y=0;y<v;y++){if(u=d[y],l=u.source,c=u.target,u.lca=null,u.sourceInLca=l,u.targetInLca=c,l==c){u.lca=l.getOwner();continue}for(f=l.getOwner();u.lca==null;){for(u.targetInLca=c,h=c.getOwner();u.lca==null;){if(h==f){u.lca=h;break}if(h==this.rootGraph)break;if(u.lca!=null)throw"assert failed";u.targetInLca=h.getParent(),h=u.targetInLca.getOwner()}if(f==this.rootGraph)break;u.lca==null&&(u.sourceInLca=f.getParent(),f=u.sourceInLca.getOwner())}if(u.lca==null)throw"assert failed"}},s.prototype.calcLowestCommonAncestor=function(u,l){if(u==l)return u.getOwner();var c=u.getOwner();do{if(c==null)break;var f=l.getOwner();do{if(f==null)break;if(f==c)return f;f=f.getParent().getOwner()}while(!0);c=c.getParent().getOwner()}while(!0);return c},s.prototype.calcInclusionTreeDepths=function(u,l){u==null&&l==null&&(u=this.rootGraph,l=1);for(var c,f=u.getNodes(),h=f.length,d=0;d<h;d++)c=f[d],c.inclusionTreeDepth=l,c.child!=null&&this.calcInclusionTreeDepths(c.child,l+1)},s.prototype.includesInvalidEdge=function(){for(var u,l=this.edges.length,c=0;c<l;c++)if(u=this.edges[c],this.isOneAncestorOfOther(u.source,u.target))return!0;return!1},t.exports=s},function(t,n,i){var o=i(0);function a(){}for(var s in o)a[s]=o[s];a.MAX_ITERATIONS=2500,a.DEFAULT_EDGE_LENGTH=50,a.DEFAULT_SPRING_STRENGTH=.45,a.DEFAULT_REPULSION_STRENGTH=4500,a.DEFAULT_GRAVITY_STRENGTH=.4,a.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,a.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,a.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,a.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,a.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,a.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,a.COOLING_ADAPTATION_FACTOR=.33,a.ADAPTATION_LOWER_NODE_LIMIT=1e3,a.ADAPTATION_UPPER_NODE_LIMIT=5e3,a.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,a.MAX_NODE_DISPLACEMENT=a.MAX_NODE_DISPLACEMENT_INCREMENTAL*3,a.MIN_REPULSION_DIST=a.DEFAULT_EDGE_LENGTH/10,a.CONVERGENCE_CHECK_PERIOD=100,a.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,a.MIN_EDGE_LENGTH=1,a.GRID_CALCULATION_CHECK_PERIOD=10,t.exports=a},function(t,n,i){var o=i(12);function a(){}a.calcSeparationAmount=function(s,u,l,c){if(!s.intersects(u))throw"assert failed";var f=new Array(2);this.decideDirectionsForOverlappingNodes(s,u,f),l[0]=Math.min(s.getRight(),u.getRight())-Math.max(s.x,u.x),l[1]=Math.min(s.getBottom(),u.getBottom())-Math.max(s.y,u.y),s.getX()<=u.getX()&&s.getRight()>=u.getRight()?l[0]+=Math.min(u.getX()-s.getX(),s.getRight()-u.getRight()):u.getX()<=s.getX()&&u.getRight()>=s.getRight()&&(l[0]+=Math.min(s.getX()-u.getX(),u.getRight()-s.getRight())),s.getY()<=u.getY()&&s.getBottom()>=u.getBottom()?l[1]+=Math.min(u.getY()-s.getY(),s.getBottom()-u.getBottom()):u.getY()<=s.getY()&&u.getBottom()>=s.getBottom()&&(l[1]+=Math.min(s.getY()-u.getY(),u.getBottom()-s.getBottom()));var h=Math.abs((u.getCenterY()-s.getCenterY())/(u.getCenterX()-s.getCenterX()));u.getCenterY()===s.getCenterY()&&u.getCenterX()===s.getCenterX()&&(h=1);var d=h*l[0],v=l[1]/h;l[0]<v?v=l[0]:d=l[1],l[0]=-1*f[0]*(v/2+c),l[1]=-1*f[1]*(d/2+c)},a.decideDirectionsForOverlappingNodes=function(s,u,l){s.getCenterX()<u.getCenterX()?l[0]=-1:l[0]=1,s.getCenterY()<u.getCenterY()?l[1]=-1:l[1]=1},a.getIntersection2=function(s,u,l){var c=s.getCenterX(),f=s.getCenterY(),h=u.getCenterX(),d=u.getCenterY();if(s.intersects(u))return l[0]=c,l[1]=f,l[2]=h,l[3]=d,!0;var v=s.getX(),y=s.getY(),w=s.getRight(),b=s.getX(),p=s.getBottom(),_=s.getRight(),O=s.getWidthHalf(),P=s.getHeightHalf(),R=u.getX(),T=u.getY(),A=u.getRight(),M=u.getX(),N=u.getBottom(),j=u.getRight(),B=u.getWidthHalf(),q=u.getHeightHalf(),W=!1,J=!1;if(c===h){if(f>d)return l[0]=c,l[1]=y,l[2]=h,l[3]=N,!1;if(f<d)return l[0]=c,l[1]=p,l[2]=h,l[3]=T,!1}else if(f===d){if(c>h)return l[0]=v,l[1]=f,l[2]=A,l[3]=d,!1;if(c<h)return l[0]=w,l[1]=f,l[2]=R,l[3]=d,!1}else{var te=s.height/s.width,re=u.height/u.width,ee=(d-f)/(h-c),fe=void 0,he=void 0,se=void 0,me=void 0,De=void 0,Le=void 0;if(-te===ee?c>h?(l[0]=b,l[1]=p,W=!0):(l[0]=w,l[1]=y,W=!0):te===ee&&(c>h?(l[0]=v,l[1]=y,W=!0):(l[0]=_,l[1]=p,W=!0)),-re===ee?h>c?(l[2]=M,l[3]=N,J=!0):(l[2]=A,l[3]=T,J=!0):re===ee&&(h>c?(l[2]=R,l[3]=T,J=!0):(l[2]=j,l[3]=N,J=!0)),W&&J)return!1;if(c>h?f>d?(fe=this.getCardinalDirection(te,ee,4),he=this.getCardinalDirection(re,ee,2)):(fe=this.getCardinalDirection(-te,ee,3),he=this.getCardinalDirection(-re,ee,1)):f>d?(fe=this.getCardinalDirection(-te,ee,1),he=this.getCardinalDirection(-re,ee,3)):(fe=this.getCardinalDirection(te,ee,2),he=this.getCardinalDirection(re,ee,4)),!W)switch(fe){case 1:me=y,se=c+-P/ee,l[0]=se,l[1]=me;break;case 2:se=_,me=f+O*ee,l[0]=se,l[1]=me;break;case 3:me=p,se=c+P/ee,l[0]=se,l[1]=me;break;case 4:se=b,me=f+-O*ee,l[0]=se,l[1]=me;break}if(!J)switch(he){case 1:Le=T,De=h+-q/ee,l[2]=De,l[3]=Le;break;case 2:De=j,Le=d+B*ee,l[2]=De,l[3]=Le;break;case 3:Le=N,De=h+q/ee,l[2]=De,l[3]=Le;break;case 4:De=M,Le=d+-B*ee,l[2]=De,l[3]=Le;break}}return!1},a.getCardinalDirection=function(s,u,l){return s>u?l:1+l%4},a.getIntersection=function(s,u,l,c){if(c==null)return this.getIntersection2(s,u,l);var f=s.x,h=s.y,d=u.x,v=u.y,y=l.x,w=l.y,b=c.x,p=c.y,_=void 0,O=void 0,P=void 0,R=void 0,T=void 0,A=void 0,M=void 0,N=void 0,j=void 0;return P=v-h,T=f-d,M=d*h-f*v,R=p-w,A=y-b,N=b*w-y*p,j=P*A-R*T,j===0?null:(_=(T*N-A*M)/j,O=(R*M-P*N)/j,new o(_,O))},a.angleOfVector=function(s,u,l,c){var f=void 0;return s!==l?(f=Math.atan((c-u)/(l-s)),l<s?f+=Math.PI:c<u&&(f+=this.TWO_PI)):c<u?f=this.ONE_AND_HALF_PI:f=this.HALF_PI,f},a.doIntersect=function(s,u,l,c){var f=s.x,h=s.y,d=u.x,v=u.y,y=l.x,w=l.y,b=c.x,p=c.y,_=(d-f)*(p-w)-(b-y)*(v-h);if(_===0)return!1;var O=((p-w)*(b-f)+(y-b)*(p-h))/_,P=((h-v)*(b-f)+(d-f)*(p-h))/_;return 0<O&&O<1&&0<P&&P<1},a.HALF_PI=.5*Math.PI,a.ONE_AND_HALF_PI=1.5*Math.PI,a.TWO_PI=2*Math.PI,a.THREE_PI=3*Math.PI,t.exports=a},function(t,n,i){function o(){}o.sign=function(a){return a>0?1:a<0?-1:0},o.floor=function(a){return a<0?Math.ceil(a):Math.floor(a)},o.ceil=function(a){return a<0?Math.floor(a):Math.ceil(a)},t.exports=o},function(t,n,i){function o(){}o.MAX_VALUE=2147483647,o.MIN_VALUE=-2147483648,t.exports=o},function(t,n,i){var o=function(){function f(h,d){for(var v=0;v<d.length;v++){var y=d[v];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(h,y.key,y)}}return function(h,d,v){return d&&f(h.prototype,d),v&&f(h,v),h}}();function a(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}var s=function(h){return{value:h,next:null,prev:null}},u=function(h,d,v,y){return h!==null?h.next=d:y.head=d,v!==null?v.prev=d:y.tail=d,d.prev=h,d.next=v,y.length++,d},l=function(h,d){var v=h.prev,y=h.next;return v!==null?v.next=y:d.head=y,y!==null?y.prev=v:d.tail=v,h.prev=h.next=null,d.length--,h},c=function(){function f(h){var d=this;a(this,f),this.length=0,this.head=null,this.tail=null,h!=null&&h.forEach(function(v){return d.push(v)})}return o(f,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(d,v){return u(v.prev,s(d),v,this)}},{key:"insertAfter",value:function(d,v){return u(v,s(d),v.next,this)}},{key:"insertNodeBefore",value:function(d,v){return u(v.prev,d,v,this)}},{key:"insertNodeAfter",value:function(d,v){return u(v,d,v.next,this)}},{key:"push",value:function(d){return u(this.tail,s(d),null,this)}},{key:"unshift",value:function(d){return u(null,s(d),this.head,this)}},{key:"remove",value:function(d){return l(d,this)}},{key:"pop",value:function(){return l(this.tail,this).value}},{key:"popNode",value:function(){return l(this.tail,this)}},{key:"shift",value:function(){return l(this.head,this).value}},{key:"shiftNode",value:function(){return l(this.head,this)}},{key:"get_object_at",value:function(d){if(d<=this.length()){for(var v=1,y=this.head;v<d;)y=y.next,v++;return y.value}}},{key:"set_object_at",value:function(d,v){if(d<=this.length()){for(var y=1,w=this.head;y<d;)w=w.next,y++;w.value=v}}}]),f}();t.exports=c},function(t,n,i){function o(a,s,u){this.x=null,this.y=null,a==null&&s==null&&u==null?(this.x=0,this.y=0):typeof a=="number"&&typeof s=="number"&&u==null?(this.x=a,this.y=s):a.constructor.name=="Point"&&s==null&&u==null&&(u=a,this.x=u.x,this.y=u.y)}o.prototype.getX=function(){return this.x},o.prototype.getY=function(){return this.y},o.prototype.getLocation=function(){return new o(this.x,this.y)},o.prototype.setLocation=function(a,s,u){a.constructor.name=="Point"&&s==null&&u==null?(u=a,this.setLocation(u.x,u.y)):typeof a=="number"&&typeof s=="number"&&u==null&&(parseInt(a)==a&&parseInt(s)==s?this.move(a,s):(this.x=Math.floor(a+.5),this.y=Math.floor(s+.5)))},o.prototype.move=function(a,s){this.x=a,this.y=s},o.prototype.translate=function(a,s){this.x+=a,this.y+=s},o.prototype.equals=function(a){if(a.constructor.name=="Point"){var s=a;return this.x==s.x&&this.y==s.y}return this==a},o.prototype.toString=function(){return new o().constructor.name+"[x="+this.x+",y="+this.y+"]"},t.exports=o},function(t,n,i){function o(a,s,u,l){this.x=0,this.y=0,this.width=0,this.height=0,a!=null&&s!=null&&u!=null&&l!=null&&(this.x=a,this.y=s,this.width=u,this.height=l)}o.prototype.getX=function(){return this.x},o.prototype.setX=function(a){this.x=a},o.prototype.getY=function(){return this.y},o.prototype.setY=function(a){this.y=a},o.prototype.getWidth=function(){return this.width},o.prototype.setWidth=function(a){this.width=a},o.prototype.getHeight=function(){return this.height},o.prototype.setHeight=function(a){this.height=a},o.prototype.getRight=function(){return this.x+this.width},o.prototype.getBottom=function(){return this.y+this.height},o.prototype.intersects=function(a){return!(this.getRight()<a.x||this.getBottom()<a.y||a.getRight()<this.x||a.getBottom()<this.y)},o.prototype.getCenterX=function(){return this.x+this.width/2},o.prototype.getMinX=function(){return this.getX()},o.prototype.getMaxX=function(){return this.getX()+this.width},o.prototype.getCenterY=function(){return this.y+this.height/2},o.prototype.getMinY=function(){return this.getY()},o.prototype.getMaxY=function(){return this.getY()+this.height},o.prototype.getWidthHalf=function(){return this.width/2},o.prototype.getHeightHalf=function(){return this.height/2},t.exports=o},function(t,n,i){var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s};function a(){}a.lastID=0,a.createID=function(s){return a.isPrimitive(s)?s:(s.uniqueID!=null||(s.uniqueID=a.getString(),a.lastID++),s.uniqueID)},a.getString=function(s){return s==null&&(s=a.lastID),"Object#"+s},a.isPrimitive=function(s){var u=typeof s>"u"?"undefined":o(s);return s==null||u!="object"&&u!="function"},t.exports=a},function(t,n,i){function o(y){if(Array.isArray(y)){for(var w=0,b=Array(y.length);w<y.length;w++)b[w]=y[w];return b}else return Array.from(y)}var a=i(0),s=i(6),u=i(3),l=i(1),c=i(5),f=i(4),h=i(17),d=i(27);function v(y){d.call(this),this.layoutQuality=a.QUALITY,this.createBendsAsNeeded=a.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=a.DEFAULT_INCREMENTAL,this.animationOnLayout=a.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=a.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=a.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=a.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new s(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,y!=null&&(this.isRemoteUse=y)}v.RANDOM_SEED=1,v.prototype=Object.create(d.prototype),v.prototype.getGraphManager=function(){return this.graphManager},v.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},v.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},v.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},v.prototype.newGraphManager=function(){var y=new s(this);return this.graphManager=y,y},v.prototype.newGraph=function(y){return new c(null,this.graphManager,y)},v.prototype.newNode=function(y){return new u(this.graphManager,y)},v.prototype.newEdge=function(y){return new l(null,null,y)},v.prototype.checkLayoutSuccess=function(){return this.graphManager.getRoot()==null||this.graphManager.getRoot().getNodes().length==0||this.graphManager.includesInvalidEdge()},v.prototype.runLayout=function(){this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters();var y;return this.checkLayoutSuccess()?y=!1:y=this.layout(),a.ANIMATE==="during"?!1:(y&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,y)},v.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},v.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var y=this.graphManager.getAllEdges(),w=0;w<y.length;w++)y[w];for(var b=this.graphManager.getRoot().getNodes(),w=0;w<b.length;w++)b[w];this.update(this.graphManager.getRoot())}},v.prototype.update=function(y){if(y==null)this.update2();else if(y instanceof u){var w=y;if(w.getChild()!=null)for(var b=w.getChild().getNodes(),p=0;p<b.length;p++)update(b[p]);if(w.vGraphObject!=null){var _=w.vGraphObject;_.update(w)}}else if(y instanceof l){var O=y;if(O.vGraphObject!=null){var P=O.vGraphObject;P.update(O)}}else if(y instanceof c){var R=y;if(R.vGraphObject!=null){var T=R.vGraphObject;T.update(R)}}},v.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=a.QUALITY,this.animationDuringLayout=a.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=a.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=a.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=a.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=a.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=a.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},v.prototype.transform=function(y){if(y==null)this.transform(new f(0,0));else{var w=new h,b=this.graphManager.getRoot().updateLeftTop();if(b!=null){w.setWorldOrgX(y.x),w.setWorldOrgY(y.y),w.setDeviceOrgX(b.x),w.setDeviceOrgY(b.y);for(var p=this.getAllNodes(),_,O=0;O<p.length;O++)_=p[O],_.transform(w)}}},v.prototype.positionNodesRandomly=function(y){if(y==null)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var w,b,p=y.getNodes(),_=0;_<p.length;_++)w=p[_],b=w.getChild(),b==null||b.getNodes().length==0?w.scatter():(this.positionNodesRandomly(b),w.updateBounds())},v.prototype.getFlatForest=function(){for(var y=[],w=!0,b=this.graphManager.getRoot().getNodes(),p=!0,_=0;_<b.length;_++)b[_].getChild()!=null&&(p=!1);if(!p)return y;var O=new Set,P=[],R=new Map,T=[];for(T=T.concat(b);T.length>0&&w;){for(P.push(T[0]);P.length>0&&w;){var A=P[0];P.splice(0,1),O.add(A);for(var M=A.getEdges(),_=0;_<M.length;_++){var N=M[_].getOtherEnd(A);if(R.get(A)!=N)if(!O.has(N))P.push(N),R.set(N,A);else{w=!1;break}}}if(!w)y=[];else{var j=[].concat(o(O));y.push(j);for(var _=0;_<j.length;_++){var B=j[_],q=T.indexOf(B);q>-1&&T.splice(q,1)}O=new Set,R=new Map}}return y},v.prototype.createDummyNodesForBendpoints=function(y){for(var w=[],b=y.source,p=this.graphManager.calcLowestCommonAncestor(y.source,y.target),_=0;_<y.bendpoints.length;_++){var O=this.newNode(null);O.setRect(new Point(0,0),new Dimension(1,1)),p.add(O);var P=this.newEdge(null);this.graphManager.add(P,b,O),w.add(O),b=O}var P=this.newEdge(null);return this.graphManager.add(P,b,y.target),this.edgeToDummyNodes.set(y,w),y.isInterGraph()?this.graphManager.remove(y):p.remove(y),w},v.prototype.createBendpointsFromDummyNodes=function(){var y=[];y=y.concat(this.graphManager.getAllEdges()),y=[].concat(o(this.edgeToDummyNodes.keys())).concat(y);for(var w=0;w<y.length;w++){var b=y[w];if(b.bendpoints.length>0){for(var p=this.edgeToDummyNodes.get(b),_=0;_<p.length;_++){var O=p[_],P=new f(O.getCenterX(),O.getCenterY()),R=b.bendpoints.get(_);R.x=P.x,R.y=P.y,O.getOwner().remove(O)}this.graphManager.add(b,b.source,b.target)}}},v.transform=function(y,w,b,p){if(b!=null&&p!=null){var _=w;if(y<=50){var O=w/b;_-=(w-O)/50*(50-y)}else{var P=w*p;_+=(P-w)/50*(y-50)}return _}else{var R,T;return y<=50?(R=9*w/500,T=w/10):(R=9*w/50,T=-8*w),R*y+T}},v.findCenterOfTree=function(y){var w=[];w=w.concat(y);var b=[],p=new Map,_=!1,O=null;(w.length==1||w.length==2)&&(_=!0,O=w[0]);for(var P=0;P<w.length;P++){var R=w[P],T=R.getNeighborsList().size;p.set(R,R.getNeighborsList().size),T==1&&b.push(R)}var A=[];for(A=A.concat(b);!_;){var M=[];M=M.concat(A),A=[];for(var P=0;P<w.length;P++){var R=w[P],N=w.indexOf(R);N>=0&&w.splice(N,1);var j=R.getNeighborsList();j.forEach(function(W){if(b.indexOf(W)<0){var J=p.get(W),te=J-1;te==1&&A.push(W),p.set(W,te)}})}b=b.concat(A),(w.length==1||w.length==2)&&(_=!0,O=w[0])}return O},v.prototype.setGraphManager=function(y){this.graphManager=y},t.exports=v},function(t,n,i){function o(){}o.seed=1,o.x=0,o.nextDouble=function(){return o.x=Math.sin(o.seed++)*1e4,o.x-Math.floor(o.x)},t.exports=o},function(t,n,i){var o=i(4);function a(s,u){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}a.prototype.getWorldOrgX=function(){return this.lworldOrgX},a.prototype.setWorldOrgX=function(s){this.lworldOrgX=s},a.prototype.getWorldOrgY=function(){return this.lworldOrgY},a.prototype.setWorldOrgY=function(s){this.lworldOrgY=s},a.prototype.getWorldExtX=function(){return this.lworldExtX},a.prototype.setWorldExtX=function(s){this.lworldExtX=s},a.prototype.getWorldExtY=function(){return this.lworldExtY},a.prototype.setWorldExtY=function(s){this.lworldExtY=s},a.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},a.prototype.setDeviceOrgX=function(s){this.ldeviceOrgX=s},a.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},a.prototype.setDeviceOrgY=function(s){this.ldeviceOrgY=s},a.prototype.getDeviceExtX=function(){return this.ldeviceExtX},a.prototype.setDeviceExtX=function(s){this.ldeviceExtX=s},a.prototype.getDeviceExtY=function(){return this.ldeviceExtY},a.prototype.setDeviceExtY=function(s){this.ldeviceExtY=s},a.prototype.transformX=function(s){var u=0,l=this.lworldExtX;return l!=0&&(u=this.ldeviceOrgX+(s-this.lworldOrgX)*this.ldeviceExtX/l),u},a.prototype.transformY=function(s){var u=0,l=this.lworldExtY;return l!=0&&(u=this.ldeviceOrgY+(s-this.lworldOrgY)*this.ldeviceExtY/l),u},a.prototype.inverseTransformX=function(s){var u=0,l=this.ldeviceExtX;return l!=0&&(u=this.lworldOrgX+(s-this.ldeviceOrgX)*this.lworldExtX/l),u},a.prototype.inverseTransformY=function(s){var u=0,l=this.ldeviceExtY;return l!=0&&(u=this.lworldOrgY+(s-this.ldeviceOrgY)*this.lworldExtY/l),u},a.prototype.inverseTransformPoint=function(s){var u=new o(this.inverseTransformX(s.x),this.inverseTransformY(s.y));return u},t.exports=a},function(t,n,i){function o(d){if(Array.isArray(d)){for(var v=0,y=Array(d.length);v<d.length;v++)y[v]=d[v];return y}else return Array.from(d)}var a=i(15),s=i(7),u=i(0),l=i(8),c=i(9);function f(){a.call(this),this.useSmartIdealEdgeLengthCalculation=s.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.idealEdgeLength=s.DEFAULT_EDGE_LENGTH,this.springConstant=s.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=s.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=s.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=s.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=s.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=s.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*s.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=s.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=s.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=s.MAX_ITERATIONS}f.prototype=Object.create(a.prototype);for(var h in a)f[h]=a[h];f.prototype.initParameters=function(){a.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=s.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},f.prototype.calcIdealEdgeLengths=function(){for(var d,v,y,w,b,p,_=this.getGraphManager().getAllEdges(),O=0;O<_.length;O++)d=_[O],d.idealLength=this.idealEdgeLength,d.isInterGraph&&(y=d.getSource(),w=d.getTarget(),b=d.getSourceInLca().getEstimatedSize(),p=d.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(d.idealLength+=b+p-2*u.SIMPLE_NODE_SIZE),v=d.getLca().getInclusionTreeDepth(),d.idealLength+=s.DEFAULT_EDGE_LENGTH*s.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(y.getInclusionTreeDepth()+w.getInclusionTreeDepth()-2*v))},f.prototype.initSpringEmbedder=function(){var d=this.getAllNodes().length;this.incremental?(d>s.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*s.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(d-s.ADAPTATION_LOWER_NODE_LIMIT)/(s.ADAPTATION_UPPER_NODE_LIMIT-s.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-s.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=s.MAX_NODE_DISPLACEMENT_INCREMENTAL):(d>s.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(s.COOLING_ADAPTATION_FACTOR,1-(d-s.ADAPTATION_LOWER_NODE_LIMIT)/(s.ADAPTATION_UPPER_NODE_LIMIT-s.ADAPTATION_LOWER_NODE_LIMIT)*(1-s.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=s.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(this.getAllNodes().length*5,this.maxIterations),this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},f.prototype.calcSpringForces=function(){for(var d=this.getAllEdges(),v,y=0;y<d.length;y++)v=d[y],this.calcSpringForce(v,v.idealLength)},f.prototype.calcRepulsionForces=function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,y,w,b,p,_=this.getAllNodes(),O;if(this.useFRGridVariant)for(this.totalIterations%s.GRID_CALCULATION_CHECK_PERIOD==1&&d&&this.updateGrid(),O=new Set,y=0;y<_.length;y++)b=_[y],this.calculateRepulsionForceOfANode(b,O,d,v),O.add(b);else for(y=0;y<_.length;y++)for(b=_[y],w=y+1;w<_.length;w++)p=_[w],b.getOwner()==p.getOwner()&&this.calcRepulsionForce(b,p)},f.prototype.calcGravitationalForces=function(){for(var d,v=this.getAllNodesToApplyGravitation(),y=0;y<v.length;y++)d=v[y],this.calcGravitationalForce(d)},f.prototype.moveNodes=function(){for(var d=this.getAllNodes(),v,y=0;y<d.length;y++)v=d[y],v.move()},f.prototype.calcSpringForce=function(d,v){var y=d.getSource(),w=d.getTarget(),b,p,_,O;if(this.uniformLeafNodeSizes&&y.getChild()==null&&w.getChild()==null)d.updateLengthSimple();else if(d.updateLength(),d.isOverlapingSourceAndTarget)return;b=d.getLength(),b!=0&&(p=this.springConstant*(b-v),_=p*(d.lengthX/b),O=p*(d.lengthY/b),y.springForceX+=_,y.springForceY+=O,w.springForceX-=_,w.springForceY-=O)},f.prototype.calcRepulsionForce=function(d,v){var y=d.getRect(),w=v.getRect(),b=new Array(2),p=new Array(4),_,O,P,R,T,A,M;if(y.intersects(w)){l.calcSeparationAmount(y,w,b,s.DEFAULT_EDGE_LENGTH/2),A=2*b[0],M=2*b[1];var N=d.noOfChildren*v.noOfChildren/(d.noOfChildren+v.noOfChildren);d.repulsionForceX-=N*A,d.repulsionForceY-=N*M,v.repulsionForceX+=N*A,v.repulsionForceY+=N*M}else this.uniformLeafNodeSizes&&d.getChild()==null&&v.getChild()==null?(_=w.getCenterX()-y.getCenterX(),O=w.getCenterY()-y.getCenterY()):(l.getIntersection(y,w,p),_=p[2]-p[0],O=p[3]-p[1]),Math.abs(_)<s.MIN_REPULSION_DIST&&(_=c.sign(_)*s.MIN_REPULSION_DIST),Math.abs(O)<s.MIN_REPULSION_DIST&&(O=c.sign(O)*s.MIN_REPULSION_DIST),P=_*_+O*O,R=Math.sqrt(P),T=this.repulsionConstant*d.noOfChildren*v.noOfChildren/P,A=T*_/R,M=T*O/R,d.repulsionForceX-=A,d.repulsionForceY-=M,v.repulsionForceX+=A,v.repulsionForceY+=M},f.prototype.calcGravitationalForce=function(d){var v,y,w,b,p,_,O,P;v=d.getOwner(),y=(v.getRight()+v.getLeft())/2,w=(v.getTop()+v.getBottom())/2,b=d.getCenterX()-y,p=d.getCenterY()-w,_=Math.abs(b)+d.getWidth()/2,O=Math.abs(p)+d.getHeight()/2,d.getOwner()==this.graphManager.getRoot()?(P=v.getEstimatedSize()*this.gravityRangeFactor,(_>P||O>P)&&(d.gravitationForceX=-this.gravityConstant*b,d.gravitationForceY=-this.gravityConstant*p)):(P=v.getEstimatedSize()*this.compoundGravityRangeFactor,(_>P||O>P)&&(d.gravitationForceX=-this.gravityConstant*b*this.compoundGravityConstant,d.gravitationForceY=-this.gravityConstant*p*this.compoundGravityConstant))},f.prototype.isConverged=function(){var d,v=!1;return this.totalIterations>this.maxIterations/3&&(v=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),d=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,d||v},f.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},f.prototype.calcNoOfChildrenForAllNodes=function(){for(var d,v=this.graphManager.getAllNodes(),y=0;y<v.length;y++)d=v[y],d.noOfChildren=d.getNoOfChildren()},f.prototype.calcGrid=function(d){var v=0,y=0;v=parseInt(Math.ceil((d.getRight()-d.getLeft())/this.repulsionRange)),y=parseInt(Math.ceil((d.getBottom()-d.getTop())/this.repulsionRange));for(var w=new Array(v),b=0;b<v;b++)w[b]=new Array(y);for(var b=0;b<v;b++)for(var p=0;p<y;p++)w[b][p]=new Array;return w},f.prototype.addNodeToGrid=function(d,v,y){var w=0,b=0,p=0,_=0;w=parseInt(Math.floor((d.getRect().x-v)/this.repulsionRange)),b=parseInt(Math.floor((d.getRect().width+d.getRect().x-v)/this.repulsionRange)),p=parseInt(Math.floor((d.getRect().y-y)/this.repulsionRange)),_=parseInt(Math.floor((d.getRect().height+d.getRect().y-y)/this.repulsionRange));for(var O=w;O<=b;O++)for(var P=p;P<=_;P++)this.grid[O][P].push(d),d.setGridCoordinates(w,b,p,_)},f.prototype.updateGrid=function(){var d,v,y=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),d=0;d<y.length;d++)v=y[d],this.addNodeToGrid(v,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},f.prototype.calculateRepulsionForceOfANode=function(d,v,y,w){if(this.totalIterations%s.GRID_CALCULATION_CHECK_PERIOD==1&&y||w){var b=new Set;d.surrounding=new Array;for(var p,_=this.grid,O=d.startX-1;O<d.finishX+2;O++)for(var P=d.startY-1;P<d.finishY+2;P++)if(!(O<0||P<0||O>=_.length||P>=_[0].length)){for(var R=0;R<_[O][P].length;R++)if(p=_[O][P][R],!(d.getOwner()!=p.getOwner()||d==p)&&!v.has(p)&&!b.has(p)){var T=Math.abs(d.getCenterX()-p.getCenterX())-(d.getWidth()/2+p.getWidth()/2),A=Math.abs(d.getCenterY()-p.getCenterY())-(d.getHeight()/2+p.getHeight()/2);T<=this.repulsionRange&&A<=this.repulsionRange&&b.add(p)}}d.surrounding=[].concat(o(b))}for(O=0;O<d.surrounding.length;O++)this.calcRepulsionForce(d,d.surrounding[O])},f.prototype.calcRepulsionRange=function(){return 0},t.exports=f},function(t,n,i){var o=i(1),a=i(7);function s(l,c,f){o.call(this,l,c,f),this.idealLength=a.DEFAULT_EDGE_LENGTH}s.prototype=Object.create(o.prototype);for(var u in o)s[u]=o[u];t.exports=s},function(t,n,i){var o=i(3);function a(u,l,c,f){o.call(this,u,l,c,f),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}a.prototype=Object.create(o.prototype);for(var s in o)a[s]=o[s];a.prototype.setGridCoordinates=function(u,l,c,f){this.startX=u,this.finishX=l,this.startY=c,this.finishY=f},t.exports=a},function(t,n,i){function o(a,s){this.width=0,this.height=0,a!==null&&s!==null&&(this.height=s,this.width=a)}o.prototype.getWidth=function(){return this.width},o.prototype.setWidth=function(a){this.width=a},o.prototype.getHeight=function(){return this.height},o.prototype.setHeight=function(a){this.height=a},t.exports=o},function(t,n,i){var o=i(14);function a(){this.map={},this.keys=[]}a.prototype.put=function(s,u){var l=o.createID(s);this.contains(l)||(this.map[l]=u,this.keys.push(s))},a.prototype.contains=function(s){return o.createID(s),this.map[s]!=null},a.prototype.get=function(s){var u=o.createID(s);return this.map[u]},a.prototype.keySet=function(){return this.keys},t.exports=a},function(t,n,i){var o=i(14);function a(){this.set={}}a.prototype.add=function(s){var u=o.createID(s);this.contains(u)||(this.set[u]=s)},a.prototype.remove=function(s){delete this.set[o.createID(s)]},a.prototype.clear=function(){this.set={}},a.prototype.contains=function(s){return this.set[o.createID(s)]==s},a.prototype.isEmpty=function(){return this.size()===0},a.prototype.size=function(){return Object.keys(this.set).length},a.prototype.addAllTo=function(s){for(var u=Object.keys(this.set),l=u.length,c=0;c<l;c++)s.push(this.set[u[c]])},a.prototype.size=function(){return Object.keys(this.set).length},a.prototype.addAll=function(s){for(var u=s.length,l=0;l<u;l++){var c=s[l];this.add(c)}},t.exports=a},function(t,n,i){var o=function(){function l(c,f){for(var h=0;h<f.length;h++){var d=f[h];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(c,d.key,d)}}return function(c,f,h){return f&&l(c.prototype,f),h&&l(c,h),c}}();function a(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}var s=i(11),u=function(){function l(c,f){a(this,l),(f!==null||f!==void 0)&&(this.compareFunction=this._defaultCompareFunction);var h=void 0;c instanceof s?h=c.size():h=c.length,this._quicksort(c,0,h-1)}return o(l,[{key:"_quicksort",value:function(f,h,d){if(h<d){var v=this._partition(f,h,d);this._quicksort(f,h,v),this._quicksort(f,v+1,d)}}},{key:"_partition",value:function(f,h,d){for(var v=this._get(f,h),y=h,w=d;;){for(;this.compareFunction(v,this._get(f,w));)w--;for(;this.compareFunction(this._get(f,y),v);)y++;if(y<w)this._swap(f,y,w),y++,w--;else return w}}},{key:"_get",value:function(f,h){return f instanceof s?f.get_object_at(h):f[h]}},{key:"_set",value:function(f,h,d){f instanceof s?f.set_object_at(h,d):f[h]=d}},{key:"_swap",value:function(f,h,d){var v=this._get(f,h);this._set(f,h,this._get(f,d)),this._set(f,d,v)}},{key:"_defaultCompareFunction",value:function(f,h){return h>f}}]),l}();t.exports=u},function(t,n,i){var o=function(){function u(l,c){for(var f=0;f<c.length;f++){var h=c[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(l,h.key,h)}}return function(l,c,f){return c&&u(l.prototype,c),f&&u(l,f),l}}();function a(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}var s=function(){function u(l,c){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1;a(this,u),this.sequence1=l,this.sequence2=c,this.match_score=f,this.mismatch_penalty=h,this.gap_penalty=d,this.iMax=l.length+1,this.jMax=c.length+1,this.grid=new Array(this.iMax);for(var v=0;v<this.iMax;v++){this.grid[v]=new Array(this.jMax);for(var y=0;y<this.jMax;y++)this.grid[v][y]=0}this.tracebackGrid=new Array(this.iMax);for(var w=0;w<this.iMax;w++){this.tracebackGrid[w]=new Array(this.jMax);for(var b=0;b<this.jMax;b++)this.tracebackGrid[w][b]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return o(u,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var c=1;c<this.jMax;c++)this.grid[0][c]=this.grid[0][c-1]+this.gap_penalty,this.tracebackGrid[0][c]=[!1,!1,!0];for(var f=1;f<this.iMax;f++)this.grid[f][0]=this.grid[f-1][0]+this.gap_penalty,this.tracebackGrid[f][0]=[!1,!0,!1];for(var h=1;h<this.iMax;h++)for(var d=1;d<this.jMax;d++){var v=void 0;this.sequence1[h-1]===this.sequence2[d-1]?v=this.grid[h-1][d-1]+this.match_score:v=this.grid[h-1][d-1]+this.mismatch_penalty;var y=this.grid[h-1][d]+this.gap_penalty,w=this.grid[h][d-1]+this.gap_penalty,b=[v,y,w],p=this.arrayAllMaxIndexes(b);this.grid[h][d]=b[p[0]],this.tracebackGrid[h][d]=[p.includes(0),p.includes(1),p.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var c=[];for(c.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});c[0];){var f=c[0],h=this.tracebackGrid[f.pos[0]][f.pos[1]];h[0]&&c.push({pos:[f.pos[0]-1,f.pos[1]-1],seq1:this.sequence1[f.pos[0]-1]+f.seq1,seq2:this.sequence2[f.pos[1]-1]+f.seq2}),h[1]&&c.push({pos:[f.pos[0]-1,f.pos[1]],seq1:this.sequence1[f.pos[0]-1]+f.seq1,seq2:"-"+f.seq2}),h[2]&&c.push({pos:[f.pos[0],f.pos[1]-1],seq1:"-"+f.seq1,seq2:this.sequence2[f.pos[1]-1]+f.seq2}),f.pos[0]===0&&f.pos[1]===0&&this.alignments.push({sequence1:f.seq1,sequence2:f.seq2}),c.shift()}return this.alignments}},{key:"getAllIndexes",value:function(c,f){for(var h=[],d=-1;(d=c.indexOf(f,d+1))!==-1;)h.push(d);return h}},{key:"arrayAllMaxIndexes",value:function(c){return this.getAllIndexes(c,Math.max.apply(null,c))}}]),u}();t.exports=s},function(t,n,i){var o=function(){};o.FDLayout=i(18),o.FDLayoutConstants=i(7),o.FDLayoutEdge=i(19),o.FDLayoutNode=i(20),o.DimensionD=i(21),o.HashMap=i(22),o.HashSet=i(23),o.IGeometry=i(8),o.IMath=i(9),o.Integer=i(10),o.Point=i(12),o.PointD=i(4),o.RandomSeed=i(16),o.RectangleD=i(13),o.Transform=i(17),o.UniqueIDGeneretor=i(14),o.Quicksort=i(24),o.LinkedList=i(11),o.LGraphObject=i(2),o.LGraph=i(5),o.LEdge=i(1),o.LGraphManager=i(6),o.LNode=i(3),o.Layout=i(15),o.LayoutConstants=i(0),o.NeedlemanWunsch=i(25),t.exports=o},function(t,n,i){function o(){this.listeners=[]}var a=o.prototype;a.addListener=function(s,u){this.listeners.push({event:s,callback:u})},a.removeListener=function(s,u){for(var l=this.listeners.length;l>=0;l--){var c=this.listeners[l];c.event===s&&c.callback===u&&this.listeners.splice(l,1)}},a.emit=function(s,u){for(var l=0;l<this.listeners.length;l++){var c=this.listeners[l];s===c.event&&c.callback(u)}},t.exports=o}])})}(Bw)),Bw.exports}var cP;function RU(){return cP||(cP=1,function(r,e){(function(n,i){r.exports=i(AU())})(dn,function(t){return function(n){var i={};function o(a){if(i[a])return i[a].exports;var s=i[a]={i:a,l:!1,exports:{}};return n[a].call(s.exports,s,s.exports,o),s.l=!0,s.exports}return o.m=n,o.c=i,o.i=function(a){return a},o.d=function(a,s,u){o.o(a,s)||Object.defineProperty(a,s,{configurable:!1,enumerable:!0,get:u})},o.n=function(a){var s=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(s,"a",s),s},o.o=function(a,s){return Object.prototype.hasOwnProperty.call(a,s)},o.p="",o(o.s=7)}([function(n,i){n.exports=t},function(n,i,o){var a=o(0).FDLayoutConstants;function s(){}for(var u in a)s[u]=a[u];s.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,s.DEFAULT_RADIAL_SEPARATION=a.DEFAULT_EDGE_LENGTH,s.DEFAULT_COMPONENT_SEPERATION=60,s.TILE=!0,s.TILING_PADDING_VERTICAL=10,s.TILING_PADDING_HORIZONTAL=10,s.TREE_REDUCTION_ON_INCREMENTAL=!1,n.exports=s},function(n,i,o){var a=o(0).FDLayoutEdge;function s(l,c,f){a.call(this,l,c,f)}s.prototype=Object.create(a.prototype);for(var u in a)s[u]=a[u];n.exports=s},function(n,i,o){var a=o(0).LGraph;function s(l,c,f){a.call(this,l,c,f)}s.prototype=Object.create(a.prototype);for(var u in a)s[u]=a[u];n.exports=s},function(n,i,o){var a=o(0).LGraphManager;function s(l){a.call(this,l)}s.prototype=Object.create(a.prototype);for(var u in a)s[u]=a[u];n.exports=s},function(n,i,o){var a=o(0).FDLayoutNode,s=o(0).IMath;function u(c,f,h,d){a.call(this,c,f,h,d)}u.prototype=Object.create(a.prototype);for(var l in a)u[l]=a[l];u.prototype.move=function(){var c=this.graphManager.getLayout();this.displacementX=c.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY=c.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren,Math.abs(this.displacementX)>c.coolingFactor*c.maxNodeDisplacement&&(this.displacementX=c.coolingFactor*c.maxNodeDisplacement*s.sign(this.displacementX)),Math.abs(this.displacementY)>c.coolingFactor*c.maxNodeDisplacement&&(this.displacementY=c.coolingFactor*c.maxNodeDisplacement*s.sign(this.displacementY)),this.child==null?this.moveBy(this.displacementX,this.displacementY):this.child.getNodes().length==0?this.moveBy(this.displacementX,this.displacementY):this.propogateDisplacementToChildren(this.displacementX,this.displacementY),c.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},u.prototype.propogateDisplacementToChildren=function(c,f){for(var h=this.getChild().getNodes(),d,v=0;v<h.length;v++)d=h[v],d.getChild()==null?(d.moveBy(c,f),d.displacementX+=c,d.displacementY+=f):d.propogateDisplacementToChildren(c,f)},u.prototype.setPred1=function(c){this.pred1=c},u.prototype.getPred1=function(){return pred1},u.prototype.getPred2=function(){return pred2},u.prototype.setNext=function(c){this.next=c},u.prototype.getNext=function(){return next},u.prototype.setProcessed=function(c){this.processed=c},u.prototype.isProcessed=function(){return processed},n.exports=u},function(n,i,o){var a=o(0).FDLayout,s=o(4),u=o(3),l=o(5),c=o(2),f=o(1),h=o(0).FDLayoutConstants,d=o(0).LayoutConstants,v=o(0).Point,y=o(0).PointD,w=o(0).Layout,b=o(0).Integer,p=o(0).IGeometry,_=o(0).LGraph,O=o(0).Transform;function P(){a.call(this),this.toBeTiled={}}P.prototype=Object.create(a.prototype);for(var R in a)P[R]=a[R];P.prototype.newGraphManager=function(){var T=new s(this);return this.graphManager=T,T},P.prototype.newGraph=function(T){return new u(null,this.graphManager,T)},P.prototype.newNode=function(T){return new l(this.graphManager,T)},P.prototype.newEdge=function(T){return new c(null,null,T)},P.prototype.initParameters=function(){a.prototype.initParameters.call(this,arguments),this.isSubLayout||(f.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=f.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=f.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.springConstant=h.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=h.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=h.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=h.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=h.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=h.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1,this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/h.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=h.CONVERGENCE_CHECK_PERIOD/this.maxIterations,this.coolingAdjuster=1)},P.prototype.layout=function(){var T=d.DEFAULT_CREATE_BENDS_AS_NEEDED;return T&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},P.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(f.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var A=new Set(this.getAllNodes()),M=this.nodesWithGravity.filter(function(B){return A.has(B)});this.graphManager.setAllNodesToApplyGravitation(M)}}else{var T=this.getFlatForest();if(T.length>0)this.positionNodesRadially(T);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var A=new Set(this.getAllNodes()),M=this.nodesWithGravity.filter(function(N){return A.has(N)});this.graphManager.setAllNodesToApplyGravitation(M),this.positionNodesRandomly()}}return this.initSpringEmbedder(),this.runSpringEmbedder(),!0},P.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished)if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;if(this.totalIterations%h.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged())if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;this.coolingCycle++,this.layoutQuality==0?this.coolingAdjuster=this.coolingCycle:this.layoutQuality==1&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var T=new Set(this.getAllNodes()),A=this.nodesWithGravity.filter(function(j){return T.has(j)});this.graphManager.setAllNodesToApplyGravitation(A),this.graphManager.updateBounds(),this.updateGrid(),this.coolingFactor=h.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),this.coolingFactor=h.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var M=!this.isTreeGrowing&&!this.isGrowthFinished,N=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(M,N),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},P.prototype.getPositionsData=function(){for(var T=this.graphManager.getAllNodes(),A={},M=0;M<T.length;M++){var N=T[M].rect,j=T[M].id;A[j]={id:j,x:N.getCenterX(),y:N.getCenterY(),w:N.width,h:N.height}}return A},P.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var T=!1;if(h.ANIMATE==="during")this.emit("layoutstarted");else{for(;!T;)T=this.tick();this.graphManager.updateBounds()}},P.prototype.calculateNodesToApplyGravitationTo=function(){var T=[],A,M=this.graphManager.getGraphs(),N=M.length,j;for(j=0;j<N;j++)A=M[j],A.updateConnected(),A.isConnected||(T=T.concat(A.getNodes()));return T},P.prototype.createBendpoints=function(){var T=[];T=T.concat(this.graphManager.getAllEdges());var A=new Set,M;for(M=0;M<T.length;M++){var N=T[M];if(!A.has(N)){var j=N.getSource(),B=N.getTarget();if(j==B)N.getBendpoints().push(new y),N.getBendpoints().push(new y),this.createDummyNodesForBendpoints(N),A.add(N);else{var q=[];if(q=q.concat(j.getEdgeListToNode(B)),q=q.concat(B.getEdgeListToNode(j)),!A.has(q[0])){if(q.length>1){var W;for(W=0;W<q.length;W++){var J=q[W];J.getBendpoints().push(new y),this.createDummyNodesForBendpoints(J)}}q.forEach(function(te){A.add(te)})}}}if(A.size==T.length)break}},P.prototype.positionNodesRadially=function(T){for(var A=new v(0,0),M=Math.ceil(Math.sqrt(T.length)),N=0,j=0,B=0,q=new y(0,0),W=0;W<T.length;W++){W%M==0&&(B=0,j=N,W!=0&&(j+=f.DEFAULT_COMPONENT_SEPERATION),N=0);var J=T[W],te=w.findCenterOfTree(J);A.x=B,A.y=j,q=P.radialLayout(J,te,A),q.y>N&&(N=Math.floor(q.y)),B=Math.floor(q.x+f.DEFAULT_COMPONENT_SEPERATION)}this.transform(new y(d.WORLD_CENTER_X-q.x/2,d.WORLD_CENTER_Y-q.y/2))},P.radialLayout=function(T,A,M){var N=Math.max(this.maxDiagonalInTree(T),f.DEFAULT_RADIAL_SEPARATION);P.branchRadialLayout(A,null,0,359,0,N);var j=_.calculateBounds(T),B=new O;B.setDeviceOrgX(j.getMinX()),B.setDeviceOrgY(j.getMinY()),B.setWorldOrgX(M.x),B.setWorldOrgY(M.y);for(var q=0;q<T.length;q++){var W=T[q];W.transform(B)}var J=new y(j.getMaxX(),j.getMaxY());return B.inverseTransformPoint(J)},P.branchRadialLayout=function(T,A,M,N,j,B){var q=(N-M+1)/2;q<0&&(q+=180);var W=(q+M)%360,J=W*p.TWO_PI/360,te=j*Math.cos(J),re=j*Math.sin(J);T.setCenter(te,re);var ee=[];ee=ee.concat(T.getEdges());var fe=ee.length;A!=null&&fe--;for(var he=0,se=ee.length,me,De=T.getEdgesBetween(A);De.length>1;){var Le=De[0];De.splice(0,1);var Ie=ee.indexOf(Le);Ie>=0&&ee.splice(Ie,1),se--,fe--}A!=null?me=(ee.indexOf(De[0])+1)%se:me=0;for(var qe=Math.abs(N-M)/fe,Ge=me;he!=fe;Ge=++Ge%se){var Me=ee[Ge].getOtherEnd(T);if(Me!=A){var Pe=(M+he*qe)%360,de=(Pe+qe)%360;P.branchRadialLayout(Me,T,Pe,de,j+B,B),he++}}},P.maxDiagonalInTree=function(T){for(var A=b.MIN_VALUE,M=0;M<T.length;M++){var N=T[M],j=N.getDiagonal();j>A&&(A=j)}return A},P.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},P.prototype.groupZeroDegreeMembers=function(){var T=this,A={};this.memberGroups={},this.idToDummyNode={};for(var M=[],N=this.graphManager.getAllNodes(),j=0;j<N.length;j++){var B=N[j],q=B.getParent();this.getNodeDegreeWithChildren(B)===0&&(q.id==null||!this.getToBeTiled(q))&&M.push(B)}for(var j=0;j<M.length;j++){var B=M[j],W=B.getParent().id;typeof A[W]>"u"&&(A[W]=[]),A[W]=A[W].concat(B)}Object.keys(A).forEach(function(J){if(A[J].length>1){var te="DummyCompound_"+J;T.memberGroups[te]=A[J];var re=A[J][0].getParent(),ee=new l(T.graphManager);ee.id=te,ee.paddingLeft=re.paddingLeft||0,ee.paddingRight=re.paddingRight||0,ee.paddingBottom=re.paddingBottom||0,ee.paddingTop=re.paddingTop||0,T.idToDummyNode[te]=ee;var fe=T.getGraphManager().add(T.newGraph(),ee),he=re.getChild();he.add(ee);for(var se=0;se<A[J].length;se++){var me=A[J][se];he.remove(me),fe.add(me)}}})},P.prototype.clearCompounds=function(){var T={},A={};this.performDFSOnCompounds();for(var M=0;M<this.compoundOrder.length;M++)A[this.compoundOrder[M].id]=this.compoundOrder[M],T[this.compoundOrder[M].id]=[].concat(this.compoundOrder[M].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[M].getChild()),this.compoundOrder[M].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(T,A)},P.prototype.clearZeroDegreeMembers=function(){var T=this,A=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(M){var N=T.idToDummyNode[M];A[M]=T.tileNodes(T.memberGroups[M],N.paddingLeft+N.paddingRight),N.rect.width=A[M].width,N.rect.height=A[M].height})},P.prototype.repopulateCompounds=function(){for(var T=this.compoundOrder.length-1;T>=0;T--){var A=this.compoundOrder[T],M=A.id,N=A.paddingLeft,j=A.paddingTop;this.adjustLocations(this.tiledMemberPack[M],A.rect.x,A.rect.y,N,j)}},P.prototype.repopulateZeroDegreeMembers=function(){var T=this,A=this.tiledZeroDegreePack;Object.keys(A).forEach(function(M){var N=T.idToDummyNode[M],j=N.paddingLeft,B=N.paddingTop;T.adjustLocations(A[M],N.rect.x,N.rect.y,j,B)})},P.prototype.getToBeTiled=function(T){var A=T.id;if(this.toBeTiled[A]!=null)return this.toBeTiled[A];var M=T.getChild();if(M==null)return this.toBeTiled[A]=!1,!1;for(var N=M.getNodes(),j=0;j<N.length;j++){var B=N[j];if(this.getNodeDegree(B)>0)return this.toBeTiled[A]=!1,!1;if(B.getChild()==null){this.toBeTiled[B.id]=!1;continue}if(!this.getToBeTiled(B))return this.toBeTiled[A]=!1,!1}return this.toBeTiled[A]=!0,!0},P.prototype.getNodeDegree=function(T){T.id;for(var A=T.getEdges(),M=0,N=0;N<A.length;N++){var j=A[N];j.getSource().id!==j.getTarget().id&&(M=M+1)}return M},P.prototype.getNodeDegreeWithChildren=function(T){var A=this.getNodeDegree(T);if(T.getChild()==null)return A;for(var M=T.getChild().getNodes(),N=0;N<M.length;N++){var j=M[N];A+=this.getNodeDegreeWithChildren(j)}return A},P.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},P.prototype.fillCompexOrderByDFS=function(T){for(var A=0;A<T.length;A++){var M=T[A];M.getChild()!=null&&this.fillCompexOrderByDFS(M.getChild().getNodes()),this.getToBeTiled(M)&&this.compoundOrder.push(M)}},P.prototype.adjustLocations=function(T,A,M,N,j){A+=N,M+=j;for(var B=A,q=0;q<T.rows.length;q++){var W=T.rows[q];A=B;for(var J=0,te=0;te<W.length;te++){var re=W[te];re.rect.x=A,re.rect.y=M,A+=re.rect.width+T.horizontalPadding,re.rect.height>J&&(J=re.rect.height)}M+=J+T.verticalPadding}},P.prototype.tileCompoundMembers=function(T,A){var M=this;this.tiledMemberPack=[],Object.keys(T).forEach(function(N){var j=A[N];M.tiledMemberPack[N]=M.tileNodes(T[N],j.paddingLeft+j.paddingRight),j.rect.width=M.tiledMemberPack[N].width,j.rect.height=M.tiledMemberPack[N].height})},P.prototype.tileNodes=function(T,A){var M=f.TILING_PADDING_VERTICAL,N=f.TILING_PADDING_HORIZONTAL,j={rows:[],rowWidth:[],rowHeight:[],width:0,height:A,verticalPadding:M,horizontalPadding:N};T.sort(function(W,J){return W.rect.width*W.rect.height>J.rect.width*J.rect.height?-1:W.rect.width*W.rect.height<J.rect.width*J.rect.height?1:0});for(var B=0;B<T.length;B++){var q=T[B];j.rows.length==0?this.insertNodeToRow(j,q,0,A):this.canAddHorizontal(j,q.rect.width,q.rect.height)?this.insertNodeToRow(j,q,this.getShortestRowIndex(j),A):this.insertNodeToRow(j,q,j.rows.length,A),this.shiftToLastRow(j)}return j},P.prototype.insertNodeToRow=function(T,A,M,N){var j=N;if(M==T.rows.length){var B=[];T.rows.push(B),T.rowWidth.push(j),T.rowHeight.push(0)}var q=T.rowWidth[M]+A.rect.width;T.rows[M].length>0&&(q+=T.horizontalPadding),T.rowWidth[M]=q,T.width<q&&(T.width=q);var W=A.rect.height;M>0&&(W+=T.verticalPadding);var J=0;W>T.rowHeight[M]&&(J=T.rowHeight[M],T.rowHeight[M]=W,J=T.rowHeight[M]-J),T.height+=J,T.rows[M].push(A)},P.prototype.getShortestRowIndex=function(T){for(var A=-1,M=Number.MAX_VALUE,N=0;N<T.rows.length;N++)T.rowWidth[N]<M&&(A=N,M=T.rowWidth[N]);return A},P.prototype.getLongestRowIndex=function(T){for(var A=-1,M=Number.MIN_VALUE,N=0;N<T.rows.length;N++)T.rowWidth[N]>M&&(A=N,M=T.rowWidth[N]);return A},P.prototype.canAddHorizontal=function(T,A,M){var N=this.getShortestRowIndex(T);if(N<0)return!0;var j=T.rowWidth[N];if(j+T.horizontalPadding+A<=T.width)return!0;var B=0;T.rowHeight[N]<M&&N>0&&(B=M+T.verticalPadding-T.rowHeight[N]);var q;T.width-j>=A+T.horizontalPadding?q=(T.height+B)/(j+A+T.horizontalPadding):q=(T.height+B)/T.width,B=M+T.verticalPadding;var W;return T.width<A?W=(T.height+B)/A:W=(T.height+B)/T.width,W<1&&(W=1/W),q<1&&(q=1/q),q<W},P.prototype.shiftToLastRow=function(T){var A=this.getLongestRowIndex(T),M=T.rowWidth.length-1,N=T.rows[A],j=N[N.length-1],B=j.width+T.horizontalPadding;if(T.width-T.rowWidth[M]>B&&A!=M){N.splice(-1,1),T.rows[M].push(j),T.rowWidth[A]=T.rowWidth[A]-B,T.rowWidth[M]=T.rowWidth[M]+B,T.width=T.rowWidth[instance.getLongestRowIndex(T)];for(var q=Number.MIN_VALUE,W=0;W<N.length;W++)N[W].height>q&&(q=N[W].height);A>0&&(q+=T.verticalPadding);var J=T.rowHeight[A]+T.rowHeight[M];T.rowHeight[A]=q,T.rowHeight[M]<j.height+T.verticalPadding&&(T.rowHeight[M]=j.height+T.verticalPadding);var te=T.rowHeight[A]+T.rowHeight[M];T.height+=te-J,this.shiftToLastRow(T)}},P.prototype.tilingPreLayout=function(){f.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},P.prototype.tilingPostLayout=function(){f.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},P.prototype.reduceTrees=function(){for(var T=[],A=!0,M;A;){var N=this.graphManager.getAllNodes(),j=[];A=!1;for(var B=0;B<N.length;B++)M=N[B],M.getEdges().length==1&&!M.getEdges()[0].isInterGraph&&M.getChild()==null&&(j.push([M,M.getEdges()[0],M.getOwner()]),A=!0);if(A==!0){for(var q=[],W=0;W<j.length;W++)j[W][0].getEdges().length==1&&(q.push(j[W]),j[W][0].getOwner().remove(j[W][0]));T.push(q),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=T},P.prototype.growTree=function(T){for(var A=T.length,M=T[A-1],N,j=0;j<M.length;j++)N=M[j],this.findPlaceforPrunedNode(N),N[2].add(N[0]),N[2].add(N[1],N[1].source,N[1].target);T.splice(T.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},P.prototype.findPlaceforPrunedNode=function(T){var A,M,N=T[0];N==T[1].source?M=T[1].target:M=T[1].source;var j=M.startX,B=M.finishX,q=M.startY,W=M.finishY,J=0,te=0,re=0,ee=0,fe=[J,re,te,ee];if(q>0)for(var he=j;he<=B;he++)fe[0]+=this.grid[he][q-1].length+this.grid[he][q].length-1;if(B<this.grid.length-1)for(var he=q;he<=W;he++)fe[1]+=this.grid[B+1][he].length+this.grid[B][he].length-1;if(W<this.grid[0].length-1)for(var he=j;he<=B;he++)fe[2]+=this.grid[he][W+1].length+this.grid[he][W].length-1;if(j>0)for(var he=q;he<=W;he++)fe[3]+=this.grid[j-1][he].length+this.grid[j][he].length-1;for(var se=b.MAX_VALUE,me,De,Le=0;Le<fe.length;Le++)fe[Le]<se?(se=fe[Le],me=1,De=Le):fe[Le]==se&&me++;if(me==3&&se==0)fe[0]==0&&fe[1]==0&&fe[2]==0?A=1:fe[0]==0&&fe[1]==0&&fe[3]==0?A=0:fe[0]==0&&fe[2]==0&&fe[3]==0?A=3:fe[1]==0&&fe[2]==0&&fe[3]==0&&(A=2);else if(me==2&&se==0){var Ie=Math.floor(Math.random()*2);fe[0]==0&&fe[1]==0?Ie==0?A=0:A=1:fe[0]==0&&fe[2]==0?Ie==0?A=0:A=2:fe[0]==0&&fe[3]==0?Ie==0?A=0:A=3:fe[1]==0&&fe[2]==0?Ie==0?A=1:A=2:fe[1]==0&&fe[3]==0?Ie==0?A=1:A=3:Ie==0?A=2:A=3}else if(me==4&&se==0){var Ie=Math.floor(Math.random()*4);A=Ie}else A=De;A==0?N.setCenter(M.getCenterX(),M.getCenterY()-M.getHeight()/2-h.DEFAULT_EDGE_LENGTH-N.getHeight()/2):A==1?N.setCenter(M.getCenterX()+M.getWidth()/2+h.DEFAULT_EDGE_LENGTH+N.getWidth()/2,M.getCenterY()):A==2?N.setCenter(M.getCenterX(),M.getCenterY()+M.getHeight()/2+h.DEFAULT_EDGE_LENGTH+N.getHeight()/2):N.setCenter(M.getCenterX()-M.getWidth()/2-h.DEFAULT_EDGE_LENGTH-N.getWidth()/2,M.getCenterY())},n.exports=P},function(n,i,o){var a={};a.layoutBase=o(0),a.CoSEConstants=o(1),a.CoSEEdge=o(2),a.CoSEGraph=o(3),a.CoSEGraphManager=o(4),a.CoSELayout=o(6),a.CoSENode=o(5),n.exports=a}])})}(Fw)),Fw.exports}(function(r,e){(function(n,i){r.exports=i(RU())})(dn,function(t){return function(n){var i={};function o(a){if(i[a])return i[a].exports;var s=i[a]={i:a,l:!1,exports:{}};return n[a].call(s.exports,s,s.exports,o),s.l=!0,s.exports}return o.m=n,o.c=i,o.i=function(a){return a},o.d=function(a,s,u){o.o(a,s)||Object.defineProperty(a,s,{configurable:!1,enumerable:!0,get:u})},o.n=function(a){var s=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(s,"a",s),s},o.o=function(a,s){return Object.prototype.hasOwnProperty.call(a,s)},o.p="",o(o.s=1)}([function(n,i){n.exports=t},function(n,i,o){var a=o(0).layoutBase.LayoutConstants,s=o(0).layoutBase.FDLayoutConstants,u=o(0).CoSEConstants,l=o(0).CoSELayout,c=o(0).CoSENode,f=o(0).layoutBase.PointD,h=o(0).layoutBase.DimensionD,d={ready:function(){},stop:function(){},quality:"default",nodeDimensionsIncludeLabels:!1,refresh:30,fit:!0,padding:10,randomize:!0,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",animationDuration:500,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.5};function v(p,_){var O={};for(var P in p)O[P]=p[P];for(var P in _)O[P]=_[P];return O}function y(p){this.options=v(d,p),w(this.options)}var w=function(_){_.nodeRepulsion!=null&&(u.DEFAULT_REPULSION_STRENGTH=s.DEFAULT_REPULSION_STRENGTH=_.nodeRepulsion),_.idealEdgeLength!=null&&(u.DEFAULT_EDGE_LENGTH=s.DEFAULT_EDGE_LENGTH=_.idealEdgeLength),_.edgeElasticity!=null&&(u.DEFAULT_SPRING_STRENGTH=s.DEFAULT_SPRING_STRENGTH=_.edgeElasticity),_.nestingFactor!=null&&(u.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=s.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=_.nestingFactor),_.gravity!=null&&(u.DEFAULT_GRAVITY_STRENGTH=s.DEFAULT_GRAVITY_STRENGTH=_.gravity),_.numIter!=null&&(u.MAX_ITERATIONS=s.MAX_ITERATIONS=_.numIter),_.gravityRange!=null&&(u.DEFAULT_GRAVITY_RANGE_FACTOR=s.DEFAULT_GRAVITY_RANGE_FACTOR=_.gravityRange),_.gravityCompound!=null&&(u.DEFAULT_COMPOUND_GRAVITY_STRENGTH=s.DEFAULT_COMPOUND_GRAVITY_STRENGTH=_.gravityCompound),_.gravityRangeCompound!=null&&(u.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=s.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=_.gravityRangeCompound),_.initialEnergyOnIncremental!=null&&(u.DEFAULT_COOLING_FACTOR_INCREMENTAL=s.DEFAULT_COOLING_FACTOR_INCREMENTAL=_.initialEnergyOnIncremental),_.quality=="draft"?a.QUALITY=0:_.quality=="proof"?a.QUALITY=2:a.QUALITY=1,u.NODE_DIMENSIONS_INCLUDE_LABELS=s.NODE_DIMENSIONS_INCLUDE_LABELS=a.NODE_DIMENSIONS_INCLUDE_LABELS=_.nodeDimensionsIncludeLabels,u.DEFAULT_INCREMENTAL=s.DEFAULT_INCREMENTAL=a.DEFAULT_INCREMENTAL=!_.randomize,u.ANIMATE=s.ANIMATE=a.ANIMATE=_.animate,u.TILE=_.tile,u.TILING_PADDING_VERTICAL=typeof _.tilingPaddingVertical=="function"?_.tilingPaddingVertical.call():_.tilingPaddingVertical,u.TILING_PADDING_HORIZONTAL=typeof _.tilingPaddingHorizontal=="function"?_.tilingPaddingHorizontal.call():_.tilingPaddingHorizontal};y.prototype.run=function(){var p,_,O=this.options;this.idToLNode={};var P=this.layout=new l,R=this;R.stopped=!1,this.cy=this.options.cy,this.cy.trigger({type:"layoutstart",layout:this});var T=P.newGraphManager();this.gm=T;var A=this.options.eles.nodes(),M=this.options.eles.edges();this.root=T.addRoot(),this.processChildrenList(this.root,this.getTopMostNodes(A),P);for(var N=0;N<M.length;N++){var j=M[N],B=this.idToLNode[j.data("source")],q=this.idToLNode[j.data("target")];if(B!==q&&B.getEdgesBetween(q).length==0){var W=T.add(P.newEdge(),B,q);W.id=j.id()}}var J=function(ee,fe){typeof ee=="number"&&(ee=fe);var he=ee.data("id"),se=R.idToLNode[he];return{x:se.getRect().getCenterX(),y:se.getRect().getCenterY()}},te=function re(){for(var ee=function(){O.fit&&O.cy.fit(O.eles,O.padding),p||(p=!0,R.cy.one("layoutready",O.ready),R.cy.trigger({type:"layoutready",layout:R}))},fe=R.options.refresh,he,se=0;se<fe&&!he;se++)he=R.stopped||R.layout.tick();if(he){P.checkLayoutSuccess()&&!P.isSubLayout&&P.doPostLayout(),P.tilingPostLayout&&P.tilingPostLayout(),P.isLayoutFinished=!0,R.options.eles.nodes().positions(J),ee(),R.cy.one("layoutstop",R.options.stop),R.cy.trigger({type:"layoutstop",layout:R}),_&&cancelAnimationFrame(_),p=!1;return}var me=R.layout.getPositionsData();O.eles.nodes().positions(function(De,Le){if(typeof De=="number"&&(De=Le),!De.isParent()){for(var Ie=De.id(),qe=me[Ie],Ge=De;qe==null&&(qe=me[Ge.data("parent")]||me["DummyCompound_"+Ge.data("parent")],me[Ie]=qe,Ge=Ge.parent()[0],Ge!=null););return qe!=null?{x:qe.x,y:qe.y}:{x:De.position("x"),y:De.position("y")}}}),ee(),_=requestAnimationFrame(re)};return P.addListener("layoutstarted",function(){R.options.animate==="during"&&(_=requestAnimationFrame(te))}),P.runLayout(),this.options.animate!=="during"&&(R.options.eles.nodes().not(":parent").layoutPositions(R,R.options,J),p=!1),this},y.prototype.getTopMostNodes=function(p){for(var _={},O=0;O<p.length;O++)_[p[O].id()]=!0;var P=p.filter(function(R,T){typeof R=="number"&&(R=T);for(var A=R.parent()[0];A!=null;){if(_[A.id()])return!1;A=A.parent()[0]}return!0});return P},y.prototype.processChildrenList=function(p,_,O){for(var P=_.length,R=0;R<P;R++){var T=_[R],A=T.children(),M,N=T.layoutDimensions({nodeDimensionsIncludeLabels:this.options.nodeDimensionsIncludeLabels});if(T.outerWidth()!=null&&T.outerHeight()!=null?M=p.add(new c(O.graphManager,new f(T.position("x")-N.w/2,T.position("y")-N.h/2),new h(parseFloat(N.w),parseFloat(N.h)))):M=p.add(new c(this.graphManager)),M.id=T.data("id"),M.paddingLeft=parseInt(T.css("padding")),M.paddingTop=parseInt(T.css("padding")),M.paddingRight=parseInt(T.css("padding")),M.paddingBottom=parseInt(T.css("padding")),this.options.nodeDimensionsIncludeLabels&&T.isParent()){var j=T.boundingBox({includeLabels:!0,includeNodes:!1}).w,B=T.boundingBox({includeLabels:!0,includeNodes:!1}).h,q=T.css("text-halign");M.labelWidth=j,M.labelHeight=B,M.labelPos=q}if(this.idToLNode[T.data("id")]=M,isNaN(M.rect.x)&&(M.rect.x=0),isNaN(M.rect.y)&&(M.rect.y=0),A!=null&&A.length>0){var W;W=O.getGraphManager().add(O.newGraph(),M),this.processChildrenList(W,A,O)}}},y.prototype.stop=function(){return this.stopped=!0,this};var b=function(_){_("layout","cose-bilkent",y)};typeof cytoscape<"u"&&b(cytoscape),n.exports=b}])})})(xM);var IU=xM.exports;const kU=$0(IU);Vd.use(kU);const DU="cose-bilkent",MU=(r,e)=>{const t=Vd({headless:!0,styleEnabled:!1});t.add(r);const n={};return t.layout({name:DU,animate:!1,spacingFactor:e,quality:"default",tile:!1,randomize:!0,stop:()=>{t.nodes().forEach(o=>{n[o.id()]={...o.position()}})}}).run(),{positions:n}};class LU{start(){}postMessage(e){const{elements:t,spacingFactor:n}=e,i=MU(t,n);this.onmessage({data:i})}onmessage(){}close(){}}const NU={port:new LU},jU=()=>new SharedWorker(new URL("/assets/CoseBilkentLayout.worker-o1wgcK6V.js",import.meta.url),{type:"module",name:"CoseBilkentLayout"});var Uw,fP;function FU(){if(fP)return Uw;fP=1;function r(){this.__data__=[],this.size=0}return Uw=r,Uw}var zw,hP;function BS(){if(hP)return zw;hP=1;function r(e,t){return e===t||e!==e&&t!==t}return zw=r,zw}var qw,dP;function hb(){if(dP)return qw;dP=1;var r=BS();function e(t,n){for(var i=t.length;i--;)if(r(t[i][0],n))return i;return-1}return qw=e,qw}var Gw,vP;function BU(){if(vP)return Gw;vP=1;var r=hb(),e=Array.prototype,t=e.splice;function n(i){var o=this.__data__,a=r(o,i);if(a<0)return!1;var s=o.length-1;return a==s?o.pop():t.call(o,a,1),--this.size,!0}return Gw=n,Gw}var Vw,pP;function UU(){if(pP)return Vw;pP=1;var r=hb();function e(t){var n=this.__data__,i=r(n,t);return i<0?void 0:n[i][1]}return Vw=e,Vw}var Ww,gP;function zU(){if(gP)return Ww;gP=1;var r=hb();function e(t){return r(this.__data__,t)>-1}return Ww=e,Ww}var Hw,yP;function qU(){if(yP)return Hw;yP=1;var r=hb();function e(t,n){var i=this.__data__,o=r(i,t);return o<0?(++this.size,i.push([t,n])):i[o][1]=n,this}return Hw=e,Hw}var $w,mP;function db(){if(mP)return $w;mP=1;var r=FU(),e=BU(),t=UU(),n=zU(),i=qU();function o(a){var s=-1,u=a==null?0:a.length;for(this.clear();++s<u;){var l=a[s];this.set(l[0],l[1])}}return o.prototype.clear=r,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=n,o.prototype.set=i,$w=o,$w}var Yw,bP;function GU(){if(bP)return Yw;bP=1;var r=db();function e(){this.__data__=new r,this.size=0}return Yw=e,Yw}var Xw,_P;function VU(){if(_P)return Xw;_P=1;function r(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}return Xw=r,Xw}var Kw,wP;function WU(){if(wP)return Kw;wP=1;function r(e){return this.__data__.get(e)}return Kw=r,Kw}var Zw,EP;function HU(){if(EP)return Zw;EP=1;function r(e){return this.__data__.has(e)}return Zw=r,Zw}var Qw,OP;function SM(){if(OP)return Qw;OP=1;var r=typeof dn=="object"&&dn&&dn.Object===Object&&dn;return Qw=r,Qw}var Jw,xP;function gf(){if(xP)return Jw;xP=1;var r=SM(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=r||e||Function("return this")();return Jw=t,Jw}var e1,SP;function Hg(){if(SP)return e1;SP=1;var r=gf(),e=r.Symbol;return e1=e,e1}var t1,TP;function $U(){if(TP)return t1;TP=1;var r=Hg(),e=Object.prototype,t=e.hasOwnProperty,n=e.toString,i=r?r.toStringTag:void 0;function o(a){var s=t.call(a,i),u=a[i];try{a[i]=void 0;var l=!0}catch{}var c=n.call(a);return l&&(s?a[i]=u:delete a[i]),c}return t1=o,t1}var r1,CP;function YU(){if(CP)return r1;CP=1;var r=Object.prototype,e=r.toString;function t(n){return e.call(n)}return r1=t,r1}var n1,PP;function $g(){if(PP)return n1;PP=1;var r=Hg(),e=$U(),t=YU(),n="[object Null]",i="[object Undefined]",o=r?r.toStringTag:void 0;function a(s){return s==null?s===void 0?i:n:o&&o in Object(s)?e(s):t(s)}return n1=a,n1}var i1,AP;function pp(){if(AP)return i1;AP=1;function r(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return i1=r,i1}var o1,RP;function vb(){if(RP)return o1;RP=1;var r=$g(),e=pp(),t="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",o="[object Proxy]";function a(s){if(!e(s))return!1;var u=r(s);return u==n||u==i||u==t||u==o}return o1=a,o1}var a1,IP;function XU(){if(IP)return a1;IP=1;var r=gf(),e=r["__core-js_shared__"];return a1=e,a1}var s1,kP;function KU(){if(kP)return s1;kP=1;var r=XU(),e=function(){var n=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function t(n){return!!e&&e in n}return s1=t,s1}var u1,DP;function TM(){if(DP)return u1;DP=1;var r=Function.prototype,e=r.toString;function t(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return u1=t,u1}var l1,MP;function ZU(){if(MP)return l1;MP=1;var r=vb(),e=KU(),t=pp(),n=TM(),i=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,a=Function.prototype,s=Object.prototype,u=a.toString,l=s.hasOwnProperty,c=RegExp("^"+u.call(l).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(h){if(!t(h)||e(h))return!1;var d=r(h)?c:o;return d.test(n(h))}return l1=f,l1}var c1,LP;function QU(){if(LP)return c1;LP=1;function r(e,t){return e==null?void 0:e[t]}return c1=r,c1}var f1,NP;function gp(){if(NP)return f1;NP=1;var r=ZU(),e=QU();function t(n,i){var o=e(n,i);return r(o)?o:void 0}return f1=t,f1}var h1,jP;function US(){if(jP)return h1;jP=1;var r=gp(),e=gf(),t=r(e,"Map");return h1=t,h1}var d1,FP;function pb(){if(FP)return d1;FP=1;var r=gp(),e=r(Object,"create");return d1=e,d1}var v1,BP;function JU(){if(BP)return v1;BP=1;var r=pb();function e(){this.__data__=r?r(null):{},this.size=0}return v1=e,v1}var p1,UP;function e6(){if(UP)return p1;UP=1;function r(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return p1=r,p1}var g1,zP;function t6(){if(zP)return g1;zP=1;var r=pb(),e="__lodash_hash_undefined__",t=Object.prototype,n=t.hasOwnProperty;function i(o){var a=this.__data__;if(r){var s=a[o];return s===e?void 0:s}return n.call(a,o)?a[o]:void 0}return g1=i,g1}var y1,qP;function r6(){if(qP)return y1;qP=1;var r=pb(),e=Object.prototype,t=e.hasOwnProperty;function n(i){var o=this.__data__;return r?o[i]!==void 0:t.call(o,i)}return y1=n,y1}var m1,GP;function n6(){if(GP)return m1;GP=1;var r=pb(),e="__lodash_hash_undefined__";function t(n,i){var o=this.__data__;return this.size+=this.has(n)?0:1,o[n]=r&&i===void 0?e:i,this}return m1=t,m1}var b1,VP;function i6(){if(VP)return b1;VP=1;var r=JU(),e=e6(),t=t6(),n=r6(),i=n6();function o(a){var s=-1,u=a==null?0:a.length;for(this.clear();++s<u;){var l=a[s];this.set(l[0],l[1])}}return o.prototype.clear=r,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=n,o.prototype.set=i,b1=o,b1}var _1,WP;function o6(){if(WP)return _1;WP=1;var r=i6(),e=db(),t=US();function n(){this.size=0,this.__data__={hash:new r,map:new(t||e),string:new r}}return _1=n,_1}var w1,HP;function a6(){if(HP)return w1;HP=1;function r(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return w1=r,w1}var E1,$P;function gb(){if($P)return E1;$P=1;var r=a6();function e(t,n){var i=t.__data__;return r(n)?i[typeof n=="string"?"string":"hash"]:i.map}return E1=e,E1}var O1,YP;function s6(){if(YP)return O1;YP=1;var r=gb();function e(t){var n=r(this,t).delete(t);return this.size-=n?1:0,n}return O1=e,O1}var x1,XP;function u6(){if(XP)return x1;XP=1;var r=gb();function e(t){return r(this,t).get(t)}return x1=e,x1}var S1,KP;function l6(){if(KP)return S1;KP=1;var r=gb();function e(t){return r(this,t).has(t)}return S1=e,S1}var T1,ZP;function c6(){if(ZP)return T1;ZP=1;var r=gb();function e(t,n){var i=r(this,t),o=i.size;return i.set(t,n),this.size+=i.size==o?0:1,this}return T1=e,T1}var C1,QP;function zS(){if(QP)return C1;QP=1;var r=o6(),e=s6(),t=u6(),n=l6(),i=c6();function o(a){var s=-1,u=a==null?0:a.length;for(this.clear();++s<u;){var l=a[s];this.set(l[0],l[1])}}return o.prototype.clear=r,o.prototype.delete=e,o.prototype.get=t,o.prototype.has=n,o.prototype.set=i,C1=o,C1}var P1,JP;function f6(){if(JP)return P1;JP=1;var r=db(),e=US(),t=zS(),n=200;function i(o,a){var s=this.__data__;if(s instanceof r){var u=s.__data__;if(!e||u.length<n-1)return u.push([o,a]),this.size=++s.size,this;s=this.__data__=new t(u)}return s.set(o,a),this.size=s.size,this}return P1=i,P1}var A1,eA;function qS(){if(eA)return A1;eA=1;var r=db(),e=GU(),t=VU(),n=WU(),i=HU(),o=f6();function a(s){var u=this.__data__=new r(s);this.size=u.size}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=i,a.prototype.set=o,A1=a,A1}var R1,tA;function GS(){if(tA)return R1;tA=1;function r(e,t){for(var n=-1,i=e==null?0:e.length;++n<i&&t(e[n],n,e)!==!1;);return e}return R1=r,R1}var I1,rA;function CM(){if(rA)return I1;rA=1;var r=gp(),e=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch{}}();return I1=e,I1}var k1,nA;function PM(){if(nA)return k1;nA=1;var r=CM();function e(t,n,i){n=="__proto__"&&r?r(t,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[n]=i}return k1=e,k1}var D1,iA;function AM(){if(iA)return D1;iA=1;var r=PM(),e=BS(),t=Object.prototype,n=t.hasOwnProperty;function i(o,a,s){var u=o[a];(!(n.call(o,a)&&e(u,s))||s===void 0&&!(a in o))&&r(o,a,s)}return D1=i,D1}var M1,oA;function yb(){if(oA)return M1;oA=1;var r=AM(),e=PM();function t(n,i,o,a){var s=!o;o||(o={});for(var u=-1,l=i.length;++u<l;){var c=i[u],f=a?a(o[c],n[c],c,o,n):void 0;f===void 0&&(f=n[c]),s?e(o,c,f):r(o,c,f)}return o}return M1=t,M1}var L1,aA;function h6(){if(aA)return L1;aA=1;function r(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}return L1=r,L1}var N1,sA;function Ih(){if(sA)return N1;sA=1;function r(e){return e!=null&&typeof e=="object"}return N1=r,N1}var j1,uA;function d6(){if(uA)return j1;uA=1;var r=$g(),e=Ih(),t="[object Arguments]";function n(i){return e(i)&&r(i)==t}return j1=n,j1}var F1,lA;function mb(){if(lA)return F1;lA=1;var r=d6(),e=Ih(),t=Object.prototype,n=t.hasOwnProperty,i=t.propertyIsEnumerable,o=r(function(){return arguments}())?r:function(a){return e(a)&&n.call(a,"callee")&&!i.call(a,"callee")};return F1=o,F1}var B1,cA;function ca(){if(cA)return B1;cA=1;var r=Array.isArray;return B1=r,B1}var Ny={exports:{}},U1,fA;function v6(){if(fA)return U1;fA=1;function r(){return!1}return U1=r,U1}Ny.exports;var hA;function ym(){return hA||(hA=1,function(r,e){var t=gf(),n=v6(),i=e&&!e.nodeType&&e,o=i&&!0&&r&&!r.nodeType&&r,a=o&&o.exports===i,s=a?t.Buffer:void 0,u=s?s.isBuffer:void 0,l=u||n;r.exports=l}(Ny,Ny.exports)),Ny.exports}var z1,dA;function RM(){if(dA)return z1;dA=1;var r=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(n,i){var o=typeof n;return i=i??r,!!i&&(o=="number"||o!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<i}return z1=t,z1}var q1,vA;function VS(){if(vA)return q1;vA=1;var r=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=r}return q1=e,q1}var G1,pA;function p6(){if(pA)return G1;pA=1;var r=$g(),e=VS(),t=Ih(),n="[object Arguments]",i="[object Array]",o="[object Boolean]",a="[object Date]",s="[object Error]",u="[object Function]",l="[object Map]",c="[object Number]",f="[object Object]",h="[object RegExp]",d="[object Set]",v="[object String]",y="[object WeakMap]",w="[object ArrayBuffer]",b="[object DataView]",p="[object Float32Array]",_="[object Float64Array]",O="[object Int8Array]",P="[object Int16Array]",R="[object Int32Array]",T="[object Uint8Array]",A="[object Uint8ClampedArray]",M="[object Uint16Array]",N="[object Uint32Array]",j={};j[p]=j[_]=j[O]=j[P]=j[R]=j[T]=j[A]=j[M]=j[N]=!0,j[n]=j[i]=j[w]=j[o]=j[b]=j[a]=j[s]=j[u]=j[l]=j[c]=j[f]=j[h]=j[d]=j[v]=j[y]=!1;function B(q){return t(q)&&e(q.length)&&!!j[r(q)]}return G1=B,G1}var V1,gA;function WS(){if(gA)return V1;gA=1;function r(e){return function(t){return e(t)}}return V1=r,V1}var jy={exports:{}};jy.exports;var yA;function HS(){return yA||(yA=1,function(r,e){var t=SM(),n=e&&!e.nodeType&&e,i=n&&!0&&r&&!r.nodeType&&r,o=i&&i.exports===n,a=o&&t.process,s=function(){try{var u=i&&i.require&&i.require("util").types;return u||a&&a.binding&&a.binding("util")}catch{}}();r.exports=s}(jy,jy.exports)),jy.exports}var W1,mA;function bb(){if(mA)return W1;mA=1;var r=p6(),e=WS(),t=HS(),n=t&&t.isTypedArray,i=n?e(n):r;return W1=i,W1}var H1,bA;function IM(){if(bA)return H1;bA=1;var r=h6(),e=mb(),t=ca(),n=ym(),i=RM(),o=bb(),a=Object.prototype,s=a.hasOwnProperty;function u(l,c){var f=t(l),h=!f&&e(l),d=!f&&!h&&n(l),v=!f&&!h&&!d&&o(l),y=f||h||d||v,w=y?r(l.length,String):[],b=w.length;for(var p in l)(c||s.call(l,p))&&!(y&&(p=="length"||d&&(p=="offset"||p=="parent")||v&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||i(p,b)))&&w.push(p);return w}return H1=u,H1}var $1,_A;function _b(){if(_A)return $1;_A=1;var r=Object.prototype;function e(t){var n=t&&t.constructor,i=typeof n=="function"&&n.prototype||r;return t===i}return $1=e,$1}var Y1,wA;function kM(){if(wA)return Y1;wA=1;function r(e,t){return function(n){return e(t(n))}}return Y1=r,Y1}var X1,EA;function g6(){if(EA)return X1;EA=1;var r=kM(),e=r(Object.keys,Object);return X1=e,X1}var K1,OA;function $S(){if(OA)return K1;OA=1;var r=_b(),e=g6(),t=Object.prototype,n=t.hasOwnProperty;function i(o){if(!r(o))return e(o);var a=[];for(var s in Object(o))n.call(o,s)&&s!="constructor"&&a.push(s);return a}return K1=i,K1}var Z1,xA;function yp(){if(xA)return Z1;xA=1;var r=vb(),e=VS();function t(n){return n!=null&&e(n.length)&&!r(n)}return Z1=t,Z1}var Q1,SA;function mp(){if(SA)return Q1;SA=1;var r=IM(),e=$S(),t=yp();function n(i){return t(i)?r(i):e(i)}return Q1=n,Q1}var J1,TA;function y6(){if(TA)return J1;TA=1;var r=yb(),e=mp();function t(n,i){return n&&r(i,e(i),n)}return J1=t,J1}var eE,CA;function m6(){if(CA)return eE;CA=1;function r(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}return eE=r,eE}var tE,PA;function b6(){if(PA)return tE;PA=1;var r=pp(),e=_b(),t=m6(),n=Object.prototype,i=n.hasOwnProperty;function o(a){if(!r(a))return t(a);var s=e(a),u=[];for(var l in a)l=="constructor"&&(s||!i.call(a,l))||u.push(l);return u}return tE=o,tE}var rE,AA;function YS(){if(AA)return rE;AA=1;var r=IM(),e=b6(),t=yp();function n(i){return t(i)?r(i,!0):e(i)}return rE=n,rE}var nE,RA;function _6(){if(RA)return nE;RA=1;var r=yb(),e=YS();function t(n,i){return n&&r(i,e(i),n)}return nE=t,nE}var Fy={exports:{}};Fy.exports;var IA;function w6(){return IA||(IA=1,function(r,e){var t=gf(),n=e&&!e.nodeType&&e,i=n&&!0&&r&&!r.nodeType&&r,o=i&&i.exports===n,a=o?t.Buffer:void 0,s=a?a.allocUnsafe:void 0;function u(l,c){if(c)return l.slice();var f=l.length,h=s?s(f):new l.constructor(f);return l.copy(h),h}r.exports=u}(Fy,Fy.exports)),Fy.exports}var iE,kA;function E6(){if(kA)return iE;kA=1;function r(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}return iE=r,iE}var oE,DA;function DM(){if(DA)return oE;DA=1;function r(e,t){for(var n=-1,i=e==null?0:e.length,o=0,a=[];++n<i;){var s=e[n];t(s,n,e)&&(a[o++]=s)}return a}return oE=r,oE}var aE,MA;function MM(){if(MA)return aE;MA=1;function r(){return[]}return aE=r,aE}var sE,LA;function XS(){if(LA)return sE;LA=1;var r=DM(),e=MM(),t=Object.prototype,n=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,o=i?function(a){return a==null?[]:(a=Object(a),r(i(a),function(s){return n.call(a,s)}))}:e;return sE=o,sE}var uE,NA;function O6(){if(NA)return uE;NA=1;var r=yb(),e=XS();function t(n,i){return r(n,e(n),i)}return uE=t,uE}var lE,jA;function KS(){if(jA)return lE;jA=1;function r(e,t){for(var n=-1,i=t.length,o=e.length;++n<i;)e[o+n]=t[n];return e}return lE=r,lE}var cE,FA;function ZS(){if(FA)return cE;FA=1;var r=kM(),e=r(Object.getPrototypeOf,Object);return cE=e,cE}var fE,BA;function LM(){if(BA)return fE;BA=1;var r=KS(),e=ZS(),t=XS(),n=MM(),i=Object.getOwnPropertySymbols,o=i?function(a){for(var s=[];a;)r(s,t(a)),a=e(a);return s}:n;return fE=o,fE}var hE,UA;function x6(){if(UA)return hE;UA=1;var r=yb(),e=LM();function t(n,i){return r(n,e(n),i)}return hE=t,hE}var dE,zA;function NM(){if(zA)return dE;zA=1;var r=KS(),e=ca();function t(n,i,o){var a=i(n);return e(n)?a:r(a,o(n))}return dE=t,dE}var vE,qA;function jM(){if(qA)return vE;qA=1;var r=NM(),e=XS(),t=mp();function n(i){return r(i,t,e)}return vE=n,vE}var pE,GA;function S6(){if(GA)return pE;GA=1;var r=NM(),e=LM(),t=YS();function n(i){return r(i,t,e)}return pE=n,pE}var gE,VA;function T6(){if(VA)return gE;VA=1;var r=gp(),e=gf(),t=r(e,"DataView");return gE=t,gE}var yE,WA;function C6(){if(WA)return yE;WA=1;var r=gp(),e=gf(),t=r(e,"Promise");return yE=t,yE}var mE,HA;function FM(){if(HA)return mE;HA=1;var r=gp(),e=gf(),t=r(e,"Set");return mE=t,mE}var bE,$A;function P6(){if($A)return bE;$A=1;var r=gp(),e=gf(),t=r(e,"WeakMap");return bE=t,bE}var _E,YA;function Yg(){if(YA)return _E;YA=1;var r=T6(),e=US(),t=C6(),n=FM(),i=P6(),o=$g(),a=TM(),s="[object Map]",u="[object Object]",l="[object Promise]",c="[object Set]",f="[object WeakMap]",h="[object DataView]",d=a(r),v=a(e),y=a(t),w=a(n),b=a(i),p=o;return(r&&p(new r(new ArrayBuffer(1)))!=h||e&&p(new e)!=s||t&&p(t.resolve())!=l||n&&p(new n)!=c||i&&p(new i)!=f)&&(p=function(_){var O=o(_),P=O==u?_.constructor:void 0,R=P?a(P):"";if(R)switch(R){case d:return h;case v:return s;case y:return l;case w:return c;case b:return f}return O}),_E=p,_E}var wE,XA;function A6(){if(XA)return wE;XA=1;var r=Object.prototype,e=r.hasOwnProperty;function t(n){var i=n.length,o=new n.constructor(i);return i&&typeof n[0]=="string"&&e.call(n,"index")&&(o.index=n.index,o.input=n.input),o}return wE=t,wE}var EE,KA;function BM(){if(KA)return EE;KA=1;var r=gf(),e=r.Uint8Array;return EE=e,EE}var OE,ZA;function QS(){if(ZA)return OE;ZA=1;var r=BM();function e(t){var n=new t.constructor(t.byteLength);return new r(n).set(new r(t)),n}return OE=e,OE}var xE,QA;function R6(){if(QA)return xE;QA=1;var r=QS();function e(t,n){var i=n?r(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}return xE=e,xE}var SE,JA;function I6(){if(JA)return SE;JA=1;var r=/\w*$/;function e(t){var n=new t.constructor(t.source,r.exec(t));return n.lastIndex=t.lastIndex,n}return SE=e,SE}var TE,eR;function k6(){if(eR)return TE;eR=1;var r=Hg(),e=r?r.prototype:void 0,t=e?e.valueOf:void 0;function n(i){return t?Object(t.call(i)):{}}return TE=n,TE}var CE,tR;function D6(){if(tR)return CE;tR=1;var r=QS();function e(t,n){var i=n?r(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}return CE=e,CE}var PE,rR;function M6(){if(rR)return PE;rR=1;var r=QS(),e=R6(),t=I6(),n=k6(),i=D6(),o="[object Boolean]",a="[object Date]",s="[object Map]",u="[object Number]",l="[object RegExp]",c="[object Set]",f="[object String]",h="[object Symbol]",d="[object ArrayBuffer]",v="[object DataView]",y="[object Float32Array]",w="[object Float64Array]",b="[object Int8Array]",p="[object Int16Array]",_="[object Int32Array]",O="[object Uint8Array]",P="[object Uint8ClampedArray]",R="[object Uint16Array]",T="[object Uint32Array]";function A(M,N,j){var B=M.constructor;switch(N){case d:return r(M);case o:case a:return new B(+M);case v:return e(M,j);case y:case w:case b:case p:case _:case O:case P:case R:case T:return i(M,j);case s:return new B;case u:case f:return new B(M);case l:return t(M);case c:return new B;case h:return n(M)}}return PE=A,PE}var AE,nR;function UM(){if(nR)return AE;nR=1;var r=pp(),e=Object.create,t=function(){function n(){}return function(i){if(!r(i))return{};if(e)return e(i);n.prototype=i;var o=new n;return n.prototype=void 0,o}}();return AE=t,AE}var RE,iR;function L6(){if(iR)return RE;iR=1;var r=UM(),e=ZS(),t=_b();function n(i){return typeof i.constructor=="function"&&!t(i)?r(e(i)):{}}return RE=n,RE}var IE,oR;function N6(){if(oR)return IE;oR=1;var r=Yg(),e=Ih(),t="[object Map]";function n(i){return e(i)&&r(i)==t}return IE=n,IE}var kE,aR;function j6(){if(aR)return kE;aR=1;var r=N6(),e=WS(),t=HS(),n=t&&t.isMap,i=n?e(n):r;return kE=i,kE}var DE,sR;function F6(){if(sR)return DE;sR=1;var r=Yg(),e=Ih(),t="[object Set]";function n(i){return e(i)&&r(i)==t}return DE=n,DE}var ME,uR;function B6(){if(uR)return ME;uR=1;var r=F6(),e=WS(),t=HS(),n=t&&t.isSet,i=n?e(n):r;return ME=i,ME}var LE,lR;function U6(){if(lR)return LE;lR=1;var r=qS(),e=GS(),t=AM(),n=y6(),i=_6(),o=w6(),a=E6(),s=O6(),u=x6(),l=jM(),c=S6(),f=Yg(),h=A6(),d=M6(),v=L6(),y=ca(),w=ym(),b=j6(),p=pp(),_=B6(),O=mp(),P=YS(),R=1,T=2,A=4,M="[object Arguments]",N="[object Array]",j="[object Boolean]",B="[object Date]",q="[object Error]",W="[object Function]",J="[object GeneratorFunction]",te="[object Map]",re="[object Number]",ee="[object Object]",fe="[object RegExp]",he="[object Set]",se="[object String]",me="[object Symbol]",De="[object WeakMap]",Le="[object ArrayBuffer]",Ie="[object DataView]",qe="[object Float32Array]",Ge="[object Float64Array]",Me="[object Int8Array]",Pe="[object Int16Array]",de="[object Int32Array]",Oe="[object Uint8Array]",Ae="[object Uint8ClampedArray]",Ve="[object Uint16Array]",tt="[object Uint32Array]",ht={};ht[M]=ht[N]=ht[Le]=ht[Ie]=ht[j]=ht[B]=ht[qe]=ht[Ge]=ht[Me]=ht[Pe]=ht[de]=ht[te]=ht[re]=ht[ee]=ht[fe]=ht[he]=ht[se]=ht[me]=ht[Oe]=ht[Ae]=ht[Ve]=ht[tt]=!0,ht[q]=ht[W]=ht[De]=!1;function xt(ut,H,X,ne,Se,Te){var Ne,et=H&R,wt=H&T,lt=H&A;if(X&&(Ne=Se?X(ut,ne,Se,Te):X(ut)),Ne!==void 0)return Ne;if(!p(ut))return ut;var pe=y(ut);if(pe){if(Ne=h(ut),!et)return a(ut,Ne)}else{var Ue=f(ut),nt=Ue==W||Ue==J;if(w(ut))return o(ut,et);if(Ue==ee||Ue==M||nt&&!Se){if(Ne=wt||nt?{}:v(ut),!et)return wt?u(ut,i(Ne,ut)):s(ut,n(Ne,ut))}else{if(!ht[Ue])return Se?ut:{};Ne=d(ut,Ue,et)}}Te||(Te=new r);var Je=Te.get(ut);if(Je)return Je;Te.set(ut,Ne),_(ut)?ut.forEach(function(dt){Ne.add(xt(dt,H,X,dt,ut,Te))}):b(ut)&&ut.forEach(function(dt,Dt){Ne.set(Dt,xt(dt,H,X,Dt,ut,Te))});var at=lt?wt?c:l:wt?P:O,kt=pe?void 0:at(ut);return e(kt||ut,function(dt,Dt){kt&&(Dt=dt,dt=ut[Dt]),t(Ne,Dt,xt(dt,H,X,Dt,ut,Te))}),Ne}return LE=xt,LE}var NE,cR;function z6(){if(cR)return NE;cR=1;var r=U6(),e=4;function t(n){return r(n,e)}return NE=t,NE}var jE,fR;function zM(){if(fR)return jE;fR=1;function r(e){return function(){return e}}return jE=r,jE}var FE,hR;function q6(){if(hR)return FE;hR=1;function r(e){return function(t,n,i){for(var o=-1,a=Object(t),s=i(t),u=s.length;u--;){var l=s[e?u:++o];if(n(a[l],l,a)===!1)break}return t}}return FE=r,FE}var BE,dR;function G6(){if(dR)return BE;dR=1;var r=q6(),e=r();return BE=e,BE}var UE,vR;function qM(){if(vR)return UE;vR=1;var r=G6(),e=mp();function t(n,i){return n&&r(n,i,e)}return UE=t,UE}var zE,pR;function V6(){if(pR)return zE;pR=1;var r=yp();function e(t,n){return function(i,o){if(i==null)return i;if(!r(i))return t(i,o);for(var a=i.length,s=n?a:-1,u=Object(i);(n?s--:++s<a)&&o(u[s],s,u)!==!1;);return i}}return zE=e,zE}var qE,gR;function wb(){if(gR)return qE;gR=1;var r=qM(),e=V6(),t=e(r);return qE=t,qE}var GE,yR;function Eb(){if(yR)return GE;yR=1;function r(e){return e}return GE=r,GE}var VE,mR;function W6(){if(mR)return VE;mR=1;var r=Eb();function e(t){return typeof t=="function"?t:r}return VE=e,VE}var WE,bR;function H6(){if(bR)return WE;bR=1;var r=GS(),e=wb(),t=W6(),n=ca();function i(o,a){var s=n(o)?r:e;return s(o,t(a))}return WE=i,WE}var HE,_R;function $6(){return _R||(_R=1,HE=H6()),HE}var $E,wR;function Y6(){if(wR)return $E;wR=1;var r=wb();function e(t,n){var i=[];return r(t,function(o,a,s){n(o,a,s)&&i.push(o)}),i}return $E=e,$E}var YE,ER;function X6(){if(ER)return YE;ER=1;var r="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,r),this}return YE=e,YE}var XE,OR;function K6(){if(OR)return XE;OR=1;function r(e){return this.__data__.has(e)}return XE=r,XE}var KE,xR;function GM(){if(xR)return KE;xR=1;var r=zS(),e=X6(),t=K6();function n(i){var o=-1,a=i==null?0:i.length;for(this.__data__=new r;++o<a;)this.add(i[o])}return n.prototype.add=n.prototype.push=e,n.prototype.has=t,KE=n,KE}var ZE,SR;function Z6(){if(SR)return ZE;SR=1;function r(e,t){for(var n=-1,i=e==null?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}return ZE=r,ZE}var QE,TR;function VM(){if(TR)return QE;TR=1;function r(e,t){return e.has(t)}return QE=r,QE}var JE,CR;function WM(){if(CR)return JE;CR=1;var r=GM(),e=Z6(),t=VM(),n=1,i=2;function o(a,s,u,l,c,f){var h=u&n,d=a.length,v=s.length;if(d!=v&&!(h&&v>d))return!1;var y=f.get(a),w=f.get(s);if(y&&w)return y==s&&w==a;var b=-1,p=!0,_=u&i?new r:void 0;for(f.set(a,s),f.set(s,a);++b<d;){var O=a[b],P=s[b];if(l)var R=h?l(P,O,b,s,a,f):l(O,P,b,a,s,f);if(R!==void 0){if(R)continue;p=!1;break}if(_){if(!e(s,function(T,A){if(!t(_,A)&&(O===T||c(O,T,u,l,f)))return _.push(A)})){p=!1;break}}else if(!(O===P||c(O,P,u,l,f))){p=!1;break}}return f.delete(a),f.delete(s),p}return JE=o,JE}var eO,PR;function Q6(){if(PR)return eO;PR=1;function r(e){var t=-1,n=Array(e.size);return e.forEach(function(i,o){n[++t]=[o,i]}),n}return eO=r,eO}var tO,AR;function JS(){if(AR)return tO;AR=1;function r(e){var t=-1,n=Array(e.size);return e.forEach(function(i){n[++t]=i}),n}return tO=r,tO}var rO,RR;function J6(){if(RR)return rO;RR=1;var r=Hg(),e=BM(),t=BS(),n=WM(),i=Q6(),o=JS(),a=1,s=2,u="[object Boolean]",l="[object Date]",c="[object Error]",f="[object Map]",h="[object Number]",d="[object RegExp]",v="[object Set]",y="[object String]",w="[object Symbol]",b="[object ArrayBuffer]",p="[object DataView]",_=r?r.prototype:void 0,O=_?_.valueOf:void 0;function P(R,T,A,M,N,j,B){switch(A){case p:if(R.byteLength!=T.byteLength||R.byteOffset!=T.byteOffset)return!1;R=R.buffer,T=T.buffer;case b:return!(R.byteLength!=T.byteLength||!j(new e(R),new e(T)));case u:case l:case h:return t(+R,+T);case c:return R.name==T.name&&R.message==T.message;case d:case y:return R==T+"";case f:var q=i;case v:var W=M&a;if(q||(q=o),R.size!=T.size&&!W)return!1;var J=B.get(R);if(J)return J==T;M|=s,B.set(R,T);var te=n(q(R),q(T),M,N,j,B);return B.delete(R),te;case w:if(O)return O.call(R)==O.call(T)}return!1}return rO=P,rO}var nO,IR;function e8(){if(IR)return nO;IR=1;var r=jM(),e=1,t=Object.prototype,n=t.hasOwnProperty;function i(o,a,s,u,l,c){var f=s&e,h=r(o),d=h.length,v=r(a),y=v.length;if(d!=y&&!f)return!1;for(var w=d;w--;){var b=h[w];if(!(f?b in a:n.call(a,b)))return!1}var p=c.get(o),_=c.get(a);if(p&&_)return p==a&&_==o;var O=!0;c.set(o,a),c.set(a,o);for(var P=f;++w<d;){b=h[w];var R=o[b],T=a[b];if(u)var A=f?u(T,R,b,a,o,c):u(R,T,b,o,a,c);if(!(A===void 0?R===T||l(R,T,s,u,c):A)){O=!1;break}P||(P=b=="constructor")}if(O&&!P){var M=o.constructor,N=a.constructor;M!=N&&"constructor"in o&&"constructor"in a&&!(typeof M=="function"&&M instanceof M&&typeof N=="function"&&N instanceof N)&&(O=!1)}return c.delete(o),c.delete(a),O}return nO=i,nO}var iO,kR;function t8(){if(kR)return iO;kR=1;var r=qS(),e=WM(),t=J6(),n=e8(),i=Yg(),o=ca(),a=ym(),s=bb(),u=1,l="[object Arguments]",c="[object Array]",f="[object Object]",h=Object.prototype,d=h.hasOwnProperty;function v(y,w,b,p,_,O){var P=o(y),R=o(w),T=P?c:i(y),A=R?c:i(w);T=T==l?f:T,A=A==l?f:A;var M=T==f,N=A==f,j=T==A;if(j&&a(y)){if(!a(w))return!1;P=!0,M=!1}if(j&&!M)return O||(O=new r),P||s(y)?e(y,w,b,p,_,O):t(y,w,T,b,p,_,O);if(!(b&u)){var B=M&&d.call(y,"__wrapped__"),q=N&&d.call(w,"__wrapped__");if(B||q){var W=B?y.value():y,J=q?w.value():w;return O||(O=new r),_(W,J,b,p,O)}}return j?(O||(O=new r),n(y,w,b,p,_,O)):!1}return iO=v,iO}var oO,DR;function HM(){if(DR)return oO;DR=1;var r=t8(),e=Ih();function t(n,i,o,a,s){return n===i?!0:n==null||i==null||!e(n)&&!e(i)?n!==n&&i!==i:r(n,i,o,a,t,s)}return oO=t,oO}var aO,MR;function r8(){if(MR)return aO;MR=1;var r=qS(),e=HM(),t=1,n=2;function i(o,a,s,u){var l=s.length,c=l,f=!u;if(o==null)return!c;for(o=Object(o);l--;){var h=s[l];if(f&&h[2]?h[1]!==o[h[0]]:!(h[0]in o))return!1}for(;++l<c;){h=s[l];var d=h[0],v=o[d],y=h[1];if(f&&h[2]){if(v===void 0&&!(d in o))return!1}else{var w=new r;if(u)var b=u(v,y,d,o,a,w);if(!(b===void 0?e(y,v,t|n,u,w):b))return!1}}return!0}return aO=i,aO}var sO,LR;function $M(){if(LR)return sO;LR=1;var r=pp();function e(t){return t===t&&!r(t)}return sO=e,sO}var uO,NR;function n8(){if(NR)return uO;NR=1;var r=$M(),e=mp();function t(n){for(var i=e(n),o=i.length;o--;){var a=i[o],s=n[a];i[o]=[a,s,r(s)]}return i}return uO=t,uO}var lO,jR;function YM(){if(jR)return lO;jR=1;function r(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}return lO=r,lO}var cO,FR;function i8(){if(FR)return cO;FR=1;var r=r8(),e=n8(),t=YM();function n(i){var o=e(i);return o.length==1&&o[0][2]?t(o[0][0],o[0][1]):function(a){return a===i||r(a,i,o)}}return cO=n,cO}var fO,BR;function eT(){if(BR)return fO;BR=1;var r=$g(),e=Ih(),t="[object Symbol]";function n(i){return typeof i=="symbol"||e(i)&&r(i)==t}return fO=n,fO}var hO,UR;function tT(){if(UR)return hO;UR=1;var r=ca(),e=eT(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(o,a){if(r(o))return!1;var s=typeof o;return s=="number"||s=="symbol"||s=="boolean"||o==null||e(o)?!0:n.test(o)||!t.test(o)||a!=null&&o in Object(a)}return hO=i,hO}var dO,zR;function o8(){if(zR)return dO;zR=1;var r=zS(),e="Expected a function";function t(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var o=function(){var a=arguments,s=i?i.apply(this,a):a[0],u=o.cache;if(u.has(s))return u.get(s);var l=n.apply(this,a);return o.cache=u.set(s,l)||u,l};return o.cache=new(t.Cache||r),o}return t.Cache=r,dO=t,dO}var vO,qR;function a8(){if(qR)return vO;qR=1;var r=o8(),e=500;function t(n){var i=r(n,function(a){return o.size===e&&o.clear(),a}),o=i.cache;return i}return vO=t,vO}var pO,GR;function s8(){if(GR)return pO;GR=1;var r=a8(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,n=r(function(i){var o=[];return i.charCodeAt(0)===46&&o.push(""),i.replace(e,function(a,s,u,l){o.push(u?l.replace(t,"$1"):s||a)}),o});return pO=n,pO}var gO,VR;function rT(){if(VR)return gO;VR=1;function r(e,t){for(var n=-1,i=e==null?0:e.length,o=Array(i);++n<i;)o[n]=t(e[n],n,e);return o}return gO=r,gO}var yO,WR;function u8(){if(WR)return yO;WR=1;var r=Hg(),e=rT(),t=ca(),n=eT(),i=r?r.prototype:void 0,o=i?i.toString:void 0;function a(s){if(typeof s=="string")return s;if(t(s))return e(s,a)+"";if(n(s))return o?o.call(s):"";var u=s+"";return u=="0"&&1/s==-1/0?"-0":u}return yO=a,yO}var mO,HR;function l8(){if(HR)return mO;HR=1;var r=u8();function e(t){return t==null?"":r(t)}return mO=e,mO}var bO,$R;function XM(){if($R)return bO;$R=1;var r=ca(),e=tT(),t=s8(),n=l8();function i(o,a){return r(o)?o:e(o,a)?[o]:t(n(o))}return bO=i,bO}var _O,YR;function Ob(){if(YR)return _O;YR=1;var r=eT();function e(t){if(typeof t=="string"||r(t))return t;var n=t+"";return n=="0"&&1/t==-1/0?"-0":n}return _O=e,_O}var wO,XR;function KM(){if(XR)return wO;XR=1;var r=XM(),e=Ob();function t(n,i){i=r(i,n);for(var o=0,a=i.length;n!=null&&o<a;)n=n[e(i[o++])];return o&&o==a?n:void 0}return wO=t,wO}var EO,KR;function c8(){if(KR)return EO;KR=1;var r=KM();function e(t,n,i){var o=t==null?void 0:r(t,n);return o===void 0?i:o}return EO=e,EO}var OO,ZR;function f8(){if(ZR)return OO;ZR=1;function r(e,t){return e!=null&&t in Object(e)}return OO=r,OO}var xO,QR;function ZM(){if(QR)return xO;QR=1;var r=XM(),e=mb(),t=ca(),n=RM(),i=VS(),o=Ob();function a(s,u,l){u=r(u,s);for(var c=-1,f=u.length,h=!1;++c<f;){var d=o(u[c]);if(!(h=s!=null&&l(s,d)))break;s=s[d]}return h||++c!=f?h:(f=s==null?0:s.length,!!f&&i(f)&&n(d,f)&&(t(s)||e(s)))}return xO=a,xO}var SO,JR;function h8(){if(JR)return SO;JR=1;var r=f8(),e=ZM();function t(n,i){return n!=null&&e(n,i,r)}return SO=t,SO}var TO,eI;function d8(){if(eI)return TO;eI=1;var r=HM(),e=c8(),t=h8(),n=tT(),i=$M(),o=YM(),a=Ob(),s=1,u=2;function l(c,f){return n(c)&&i(f)?o(a(c),f):function(h){var d=e(h,c);return d===void 0&&d===f?t(h,c):r(f,d,s|u)}}return TO=l,TO}var CO,tI;function QM(){if(tI)return CO;tI=1;function r(e){return function(t){return t==null?void 0:t[e]}}return CO=r,CO}var PO,rI;function v8(){if(rI)return PO;rI=1;var r=KM();function e(t){return function(n){return r(n,t)}}return PO=e,PO}var AO,nI;function p8(){if(nI)return AO;nI=1;var r=QM(),e=v8(),t=tT(),n=Ob();function i(o){return t(o)?r(n(o)):e(o)}return AO=i,AO}var RO,iI;function xb(){if(iI)return RO;iI=1;var r=i8(),e=d8(),t=Eb(),n=ca(),i=p8();function o(a){return typeof a=="function"?a:a==null?t:typeof a=="object"?n(a)?e(a[0],a[1]):r(a):i(a)}return RO=o,RO}var IO,oI;function g8(){if(oI)return IO;oI=1;var r=DM(),e=Y6(),t=xb(),n=ca();function i(o,a){var s=n(o)?r:e;return s(o,t(a,3))}return IO=i,IO}var kO,aI;function y8(){if(aI)return kO;aI=1;var r=Object.prototype,e=r.hasOwnProperty;function t(n,i){return n!=null&&e.call(n,i)}return kO=t,kO}var DO,sI;function m8(){if(sI)return DO;sI=1;var r=y8(),e=ZM();function t(n,i){return n!=null&&e(n,i,r)}return DO=t,DO}var MO,uI;function b8(){if(uI)return MO;uI=1;var r=$S(),e=Yg(),t=mb(),n=ca(),i=yp(),o=ym(),a=_b(),s=bb(),u="[object Map]",l="[object Set]",c=Object.prototype,f=c.hasOwnProperty;function h(d){if(d==null)return!0;if(i(d)&&(n(d)||typeof d=="string"||typeof d.splice=="function"||o(d)||s(d)||t(d)))return!d.length;var v=e(d);if(v==u||v==l)return!d.size;if(a(d))return!r(d).length;for(var y in d)if(f.call(d,y))return!1;return!0}return MO=h,MO}var LO,lI;function _8(){if(lI)return LO;lI=1;function r(e){return e===void 0}return LO=r,LO}var NO,cI;function w8(){if(cI)return NO;cI=1;var r=wb(),e=yp();function t(n,i){var o=-1,a=e(n)?Array(n.length):[];return r(n,function(s,u,l){a[++o]=i(s,u,l)}),a}return NO=t,NO}var jO,fI;function E8(){if(fI)return jO;fI=1;var r=rT(),e=xb(),t=w8(),n=ca();function i(o,a){var s=n(o)?r:t;return s(o,e(a,3))}return jO=i,jO}var FO,hI;function O8(){if(hI)return FO;hI=1;function r(e,t,n,i){var o=-1,a=e==null?0:e.length;for(i&&a&&(n=e[++o]);++o<a;)n=t(n,e[o],o,e);return n}return FO=r,FO}var BO,dI;function x8(){if(dI)return BO;dI=1;function r(e,t,n,i,o){return o(e,function(a,s,u){n=i?(i=!1,a):t(n,a,s,u)}),n}return BO=r,BO}var UO,vI;function S8(){if(vI)return UO;vI=1;var r=O8(),e=wb(),t=xb(),n=x8(),i=ca();function o(a,s,u){var l=i(a)?r:n,c=arguments.length<3;return l(a,t(s,4),u,c,e)}return UO=o,UO}var zO,pI;function T8(){if(pI)return zO;pI=1;var r=$g(),e=ca(),t=Ih(),n="[object String]";function i(o){return typeof o=="string"||!e(o)&&t(o)&&r(o)==n}return zO=i,zO}var qO,gI;function C8(){if(gI)return qO;gI=1;var r=QM(),e=r("length");return qO=e,qO}var GO,yI;function P8(){if(yI)return GO;yI=1;var r="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=e+t+n,o="\\ufe0e\\ufe0f",a="\\u200d",s=RegExp("["+a+r+i+o+"]");function u(l){return s.test(l)}return GO=u,GO}var VO,mI;function A8(){if(mI)return VO;mI=1;var r="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=e+t+n,o="\\ufe0e\\ufe0f",a="["+r+"]",s="["+i+"]",u="\\ud83c[\\udffb-\\udfff]",l="(?:"+s+"|"+u+")",c="[^"+r+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",d="\\u200d",v=l+"?",y="["+o+"]?",w="(?:"+d+"(?:"+[c,f,h].join("|")+")"+y+v+")*",b=y+v+w,p="(?:"+[c+s+"?",s,f,h,a].join("|")+")",_=RegExp(u+"(?="+u+")|"+p+b,"g");function O(P){for(var R=_.lastIndex=0;_.test(P);)++R;return R}return VO=O,VO}var WO,bI;function R8(){if(bI)return WO;bI=1;var r=C8(),e=P8(),t=A8();function n(i){return e(i)?t(i):r(i)}return WO=n,WO}var HO,_I;function I8(){if(_I)return HO;_I=1;var r=$S(),e=Yg(),t=yp(),n=T8(),i=R8(),o="[object Map]",a="[object Set]";function s(u){if(u==null)return 0;if(t(u))return n(u)?i(u):u.length;var l=e(u);return l==o||l==a?u.size:r(u).length}return HO=s,HO}var $O,wI;function k8(){if(wI)return $O;wI=1;var r=GS(),e=UM(),t=qM(),n=xb(),i=ZS(),o=ca(),a=ym(),s=vb(),u=pp(),l=bb();function c(f,h,d){var v=o(f),y=v||a(f)||l(f);if(h=n(h,4),d==null){var w=f&&f.constructor;y?d=v?new w:[]:u(f)?d=s(w)?e(i(f)):{}:d={}}return(y?r:t)(f,function(b,p,_){return h(d,b,p,_)}),d}return $O=c,$O}var YO,EI;function D8(){if(EI)return YO;EI=1;var r=Hg(),e=mb(),t=ca(),n=r?r.isConcatSpreadable:void 0;function i(o){return t(o)||e(o)||!!(n&&o&&o[n])}return YO=i,YO}var XO,OI;function M8(){if(OI)return XO;OI=1;var r=KS(),e=D8();function t(n,i,o,a,s){var u=-1,l=n.length;for(o||(o=e),s||(s=[]);++u<l;){var c=n[u];i>0&&o(c)?i>1?t(c,i-1,o,a,s):r(s,c):a||(s[s.length]=c)}return s}return XO=t,XO}var KO,xI;function L8(){if(xI)return KO;xI=1;function r(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}return KO=r,KO}var ZO,SI;function N8(){if(SI)return ZO;SI=1;var r=L8(),e=Math.max;function t(n,i,o){return i=e(i===void 0?n.length-1:i,0),function(){for(var a=arguments,s=-1,u=e(a.length-i,0),l=Array(u);++s<u;)l[s]=a[i+s];s=-1;for(var c=Array(i+1);++s<i;)c[s]=a[s];return c[i]=o(l),r(n,this,c)}}return ZO=t,ZO}var QO,TI;function j8(){if(TI)return QO;TI=1;var r=zM(),e=CM(),t=Eb(),n=e?function(i,o){return e(i,"toString",{configurable:!0,enumerable:!1,value:r(o),writable:!0})}:t;return QO=n,QO}var JO,CI;function F8(){if(CI)return JO;CI=1;var r=800,e=16,t=Date.now;function n(i){var o=0,a=0;return function(){var s=t(),u=e-(s-a);if(a=s,u>0){if(++o>=r)return arguments[0]}else o=0;return i.apply(void 0,arguments)}}return JO=n,JO}var ex,PI;function B8(){if(PI)return ex;PI=1;var r=j8(),e=F8(),t=e(r);return ex=t,ex}var tx,AI;function U8(){if(AI)return tx;AI=1;var r=Eb(),e=N8(),t=B8();function n(i,o){return t(e(i,o,r),i+"")}return tx=n,tx}var rx,RI;function z8(){if(RI)return rx;RI=1;function r(e,t,n,i){for(var o=e.length,a=n+(i?1:-1);i?a--:++a<o;)if(t(e[a],a,e))return a;return-1}return rx=r,rx}var nx,II;function q8(){if(II)return nx;II=1;function r(e){return e!==e}return nx=r,nx}var ix,kI;function G8(){if(kI)return ix;kI=1;function r(e,t,n){for(var i=n-1,o=e.length;++i<o;)if(e[i]===t)return i;return-1}return ix=r,ix}var ox,DI;function V8(){if(DI)return ox;DI=1;var r=z8(),e=q8(),t=G8();function n(i,o,a){return o===o?t(i,o,a):r(i,e,a)}return ox=n,ox}var ax,MI;function W8(){if(MI)return ax;MI=1;var r=V8();function e(t,n){var i=t==null?0:t.length;return!!i&&r(t,n,0)>-1}return ax=e,ax}var sx,LI;function H8(){if(LI)return sx;LI=1;function r(e,t,n){for(var i=-1,o=e==null?0:e.length;++i<o;)if(n(t,e[i]))return!0;return!1}return sx=r,sx}var ux,NI;function $8(){if(NI)return ux;NI=1;function r(){}return ux=r,ux}var lx,jI;function Y8(){if(jI)return lx;jI=1;var r=FM(),e=$8(),t=JS(),n=1/0,i=r&&1/t(new r([,-0]))[1]==n?function(o){return new r(o)}:e;return lx=i,lx}var cx,FI;function X8(){if(FI)return cx;FI=1;var r=GM(),e=W8(),t=H8(),n=VM(),i=Y8(),o=JS(),a=200;function s(u,l,c){var f=-1,h=e,d=u.length,v=!0,y=[],w=y;if(c)v=!1,h=t;else if(d>=a){var b=l?null:i(u);if(b)return o(b);v=!1,h=n,w=new r}else w=l?[]:y;e:for(;++f<d;){var p=u[f],_=l?l(p):p;if(p=c||p!==0?p:0,v&&_===_){for(var O=w.length;O--;)if(w[O]===_)continue e;l&&w.push(_),y.push(p)}else h(w,_,c)||(w!==y&&w.push(_),y.push(p))}return y}return cx=s,cx}var fx,BI;function K8(){if(BI)return fx;BI=1;var r=yp(),e=Ih();function t(n){return e(n)&&r(n)}return fx=t,fx}var hx,UI;function Z8(){if(UI)return hx;UI=1;var r=M8(),e=U8(),t=X8(),n=K8(),i=e(function(o){return t(r(o,1,n,!0))});return hx=i,hx}var dx,zI;function Q8(){if(zI)return dx;zI=1;var r=rT();function e(t,n){return r(n,function(i){return t[i]})}return dx=e,dx}var vx,qI;function J8(){if(qI)return vx;qI=1;var r=Q8(),e=mp();function t(n){return n==null?[]:r(n,e(n))}return vx=t,vx}var F0;if(typeof oj=="function")try{F0={clone:z6(),constant:zM(),each:$6(),filter:g8(),has:m8(),isArray:ca(),isEmpty:b8(),isFunction:vb(),isUndefined:_8(),keys:mp(),map:E8(),reduce:S8(),size:I8(),transform:k8(),union:Z8(),values:J8()}}catch{}F0||(F0=window._);var fl=F0,Mr=fl,nT=en,ez="\0",cp="\0",GI="";function en(r){this._isDirected=Mr.has(r,"directed")?r.directed:!0,this._isMultigraph=Mr.has(r,"multigraph")?r.multigraph:!1,this._isCompound=Mr.has(r,"compound")?r.compound:!1,this._label=void 0,this._defaultNodeLabelFn=Mr.constant(void 0),this._defaultEdgeLabelFn=Mr.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[cp]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}en.prototype._nodeCount=0;en.prototype._edgeCount=0;en.prototype.isDirected=function(){return this._isDirected};en.prototype.isMultigraph=function(){return this._isMultigraph};en.prototype.isCompound=function(){return this._isCompound};en.prototype.setGraph=function(r){return this._label=r,this};en.prototype.graph=function(){return this._label};en.prototype.setDefaultNodeLabel=function(r){return Mr.isFunction(r)||(r=Mr.constant(r)),this._defaultNodeLabelFn=r,this};en.prototype.nodeCount=function(){return this._nodeCount};en.prototype.nodes=function(){return Mr.keys(this._nodes)};en.prototype.sources=function(){var r=this;return Mr.filter(this.nodes(),function(e){return Mr.isEmpty(r._in[e])})};en.prototype.sinks=function(){var r=this;return Mr.filter(this.nodes(),function(e){return Mr.isEmpty(r._out[e])})};en.prototype.setNodes=function(r,e){var t=arguments,n=this;return Mr.each(r,function(i){t.length>1?n.setNode(i,e):n.setNode(i)}),this};en.prototype.setNode=function(r,e){return Mr.has(this._nodes,r)?(arguments.length>1&&(this._nodes[r]=e),this):(this._nodes[r]=arguments.length>1?e:this._defaultNodeLabelFn(r),this._isCompound&&(this._parent[r]=cp,this._children[r]={},this._children[cp][r]=!0),this._in[r]={},this._preds[r]={},this._out[r]={},this._sucs[r]={},++this._nodeCount,this)};en.prototype.node=function(r){return this._nodes[r]};en.prototype.hasNode=function(r){return Mr.has(this._nodes,r)};en.prototype.removeNode=function(r){var e=this;if(Mr.has(this._nodes,r)){var t=function(n){e.removeEdge(e._edgeObjs[n])};delete this._nodes[r],this._isCompound&&(this._removeFromParentsChildList(r),delete this._parent[r],Mr.each(this.children(r),function(n){e.setParent(n)}),delete this._children[r]),Mr.each(Mr.keys(this._in[r]),t),delete this._in[r],delete this._preds[r],Mr.each(Mr.keys(this._out[r]),t),delete this._out[r],delete this._sucs[r],--this._nodeCount}return this};en.prototype.setParent=function(r,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(Mr.isUndefined(e))e=cp;else{e+="";for(var t=e;!Mr.isUndefined(t);t=this.parent(t))if(t===r)throw new Error("Setting "+e+" as parent of "+r+" would create a cycle");this.setNode(e)}return this.setNode(r),this._removeFromParentsChildList(r),this._parent[r]=e,this._children[e][r]=!0,this};en.prototype._removeFromParentsChildList=function(r){delete this._children[this._parent[r]][r]};en.prototype.parent=function(r){if(this._isCompound){var e=this._parent[r];if(e!==cp)return e}};en.prototype.children=function(r){if(Mr.isUndefined(r)&&(r=cp),this._isCompound){var e=this._children[r];if(e)return Mr.keys(e)}else{if(r===cp)return this.nodes();if(this.hasNode(r))return[]}};en.prototype.predecessors=function(r){var e=this._preds[r];if(e)return Mr.keys(e)};en.prototype.successors=function(r){var e=this._sucs[r];if(e)return Mr.keys(e)};en.prototype.neighbors=function(r){var e=this.predecessors(r);if(e)return Mr.union(e,this.successors(r))};en.prototype.isLeaf=function(r){var e;return this.isDirected()?e=this.successors(r):e=this.neighbors(r),e.length===0};en.prototype.filterNodes=function(r){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var t=this;Mr.each(this._nodes,function(o,a){r(a)&&e.setNode(a,o)}),Mr.each(this._edgeObjs,function(o){e.hasNode(o.v)&&e.hasNode(o.w)&&e.setEdge(o,t.edge(o))});var n={};function i(o){var a=t.parent(o);return a===void 0||e.hasNode(a)?(n[o]=a,a):a in n?n[a]:i(a)}return this._isCompound&&Mr.each(e.nodes(),function(o){e.setParent(o,i(o))}),e};en.prototype.setDefaultEdgeLabel=function(r){return Mr.isFunction(r)||(r=Mr.constant(r)),this._defaultEdgeLabelFn=r,this};en.prototype.edgeCount=function(){return this._edgeCount};en.prototype.edges=function(){return Mr.values(this._edgeObjs)};en.prototype.setPath=function(r,e){var t=this,n=arguments;return Mr.reduce(r,function(i,o){return n.length>1?t.setEdge(i,o,e):t.setEdge(i,o),o}),this};en.prototype.setEdge=function(){var r,e,t,n,i=!1,o=arguments[0];typeof o=="object"&&o!==null&&"v"in o?(r=o.v,e=o.w,t=o.name,arguments.length===2&&(n=arguments[1],i=!0)):(r=o,e=arguments[1],t=arguments[3],arguments.length>2&&(n=arguments[2],i=!0)),r=""+r,e=""+e,Mr.isUndefined(t)||(t=""+t);var a=mm(this._isDirected,r,e,t);if(Mr.has(this._edgeLabels,a))return i&&(this._edgeLabels[a]=n),this;if(!Mr.isUndefined(t)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(r),this.setNode(e),this._edgeLabels[a]=i?n:this._defaultEdgeLabelFn(r,e,t);var s=tz(this._isDirected,r,e,t);return r=s.v,e=s.w,Object.freeze(s),this._edgeObjs[a]=s,VI(this._preds[e],r),VI(this._sucs[r],e),this._in[e][a]=s,this._out[r][a]=s,this._edgeCount++,this};en.prototype.edge=function(r,e,t){var n=arguments.length===1?iT(this._isDirected,arguments[0]):mm(this._isDirected,r,e,t);return this._edgeLabels[n]};en.prototype.hasEdge=function(r,e,t){var n=arguments.length===1?iT(this._isDirected,arguments[0]):mm(this._isDirected,r,e,t);return Mr.has(this._edgeLabels,n)};en.prototype.removeEdge=function(r,e,t){var n=arguments.length===1?iT(this._isDirected,arguments[0]):mm(this._isDirected,r,e,t),i=this._edgeObjs[n];return i&&(r=i.v,e=i.w,delete this._edgeLabels[n],delete this._edgeObjs[n],WI(this._preds[e],r),WI(this._sucs[r],e),delete this._in[e][n],delete this._out[r][n],this._edgeCount--),this};en.prototype.inEdges=function(r,e){var t=this._in[r];if(t){var n=Mr.values(t);return e?Mr.filter(n,function(i){return i.v===e}):n}};en.prototype.outEdges=function(r,e){var t=this._out[r];if(t){var n=Mr.values(t);return e?Mr.filter(n,function(i){return i.w===e}):n}};en.prototype.nodeEdges=function(r,e){var t=this.inEdges(r,e);if(t)return t.concat(this.outEdges(r,e))};function VI(r,e){r[e]?r[e]++:r[e]=1}function WI(r,e){--r[e]||delete r[e]}function mm(r,e,t,n){var i=""+e,o=""+t;if(!r&&i>o){var a=i;i=o,o=a}return i+GI+o+GI+(Mr.isUndefined(n)?ez:n)}function tz(r,e,t,n){var i=""+e,o=""+t;if(!r&&i>o){var a=i;i=o,o=a}var s={v:i,w:o};return n&&(s.name=n),s}function iT(r,e){return mm(r,e.v,e.w,e.name)}var rz="2.1.8",nz={Graph:nT,version:rz},ff=fl,iz=nT,oz={write:az,read:lz};function az(r){var e={options:{directed:r.isDirected(),multigraph:r.isMultigraph(),compound:r.isCompound()},nodes:sz(r),edges:uz(r)};return ff.isUndefined(r.graph())||(e.value=ff.clone(r.graph())),e}function sz(r){return ff.map(r.nodes(),function(e){var t=r.node(e),n=r.parent(e),i={v:e};return ff.isUndefined(t)||(i.value=t),ff.isUndefined(n)||(i.parent=n),i})}function uz(r){return ff.map(r.edges(),function(e){var t=r.edge(e),n={v:e.v,w:e.w};return ff.isUndefined(e.name)||(n.name=e.name),ff.isUndefined(t)||(n.value=t),n})}function lz(r){var e=new iz(r.options).setGraph(r.value);return ff.each(r.nodes,function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)}),ff.each(r.edges,function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)}),e}var r0=fl,cz=fz;function fz(r){var e={},t=[],n;function i(o){r0.has(e,o)||(e[o]=!0,n.push(o),r0.each(r.successors(o),i),r0.each(r.predecessors(o),i))}return r0.each(r.nodes(),function(o){n=[],i(o),n.length&&t.push(n)}),t}var JM=fl,eL=hl;function hl(){this._arr=[],this._keyIndices={}}hl.prototype.size=function(){return this._arr.length};hl.prototype.keys=function(){return this._arr.map(function(r){return r.key})};hl.prototype.has=function(r){return JM.has(this._keyIndices,r)};hl.prototype.priority=function(r){var e=this._keyIndices[r];if(e!==void 0)return this._arr[e].priority};hl.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key};hl.prototype.add=function(r,e){var t=this._keyIndices;if(r=String(r),!JM.has(t,r)){var n=this._arr,i=n.length;return t[r]=i,n.push({key:r,priority:e}),this._decrease(i),!0}return!1};hl.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var r=this._arr.pop();return delete this._keyIndices[r.key],this._heapify(0),r.key};hl.prototype.decrease=function(r,e){var t=this._keyIndices[r];if(e>this._arr[t].priority)throw new Error("New priority is greater than current priority. Key: "+r+" Old: "+this._arr[t].priority+" New: "+e);this._arr[t].priority=e,this._decrease(t)};hl.prototype._heapify=function(r){var e=this._arr,t=2*r,n=t+1,i=r;t<e.length&&(i=e[t].priority<e[i].priority?t:i,n<e.length&&(i=e[n].priority<e[i].priority?n:i),i!==r&&(this._swap(r,i),this._heapify(i)))};hl.prototype._decrease=function(r){for(var e=this._arr,t=e[r].priority,n;r!==0&&(n=r>>1,!(e[n].priority<t));)this._swap(r,n),r=n};hl.prototype._swap=function(r,e){var t=this._arr,n=this._keyIndices,i=t[r],o=t[e];t[r]=o,t[e]=i,n[o.key]=r,n[i.key]=e};var hz=fl,dz=eL,tL=pz,vz=hz.constant(1);function pz(r,e,t,n){return gz(r,String(e),t||vz,n||function(i){return r.outEdges(i)})}function gz(r,e,t,n){var i={},o=new dz,a,s,u=function(l){var c=l.v!==a?l.v:l.w,f=i[c],h=t(l),d=s.distance+h;if(h<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+l+" Weight: "+h);d<f.distance&&(f.distance=d,f.predecessor=a,o.decrease(c,d))};for(r.nodes().forEach(function(l){var c=l===e?0:Number.POSITIVE_INFINITY;i[l]={distance:c},o.add(l,c)});o.size()>0&&(a=o.removeMin(),s=i[a],s.distance!==Number.POSITIVE_INFINITY);)n(a).forEach(u);return i}var yz=tL,mz=fl,bz=_z;function _z(r,e,t){return mz.transform(r.nodes(),function(n,i){n[i]=yz(r,i,e,t)},{})}var HI=fl,rL=wz;function wz(r){var e=0,t=[],n={},i=[];function o(a){var s=n[a]={onStack:!0,lowlink:e,index:e++};if(t.push(a),r.successors(a).forEach(function(c){HI.has(n,c)?n[c].onStack&&(s.lowlink=Math.min(s.lowlink,n[c].index)):(o(c),s.lowlink=Math.min(s.lowlink,n[c].lowlink))}),s.lowlink===s.index){var u=[],l;do l=t.pop(),n[l].onStack=!1,u.push(l);while(a!==l);i.push(u)}}return r.nodes().forEach(function(a){HI.has(n,a)||o(a)}),i}var Ez=fl,Oz=rL,xz=Sz;function Sz(r){return Ez.filter(Oz(r),function(e){return e.length>1||e.length===1&&r.hasEdge(e[0],e[0])})}var Tz=fl,Cz=Az,Pz=Tz.constant(1);function Az(r,e,t){return Rz(r,e||Pz,t||function(n){return r.outEdges(n)})}function Rz(r,e,t){var n={},i=r.nodes();return i.forEach(function(o){n[o]={},n[o][o]={distance:0},i.forEach(function(a){o!==a&&(n[o][a]={distance:Number.POSITIVE_INFINITY})}),t(o).forEach(function(a){var s=a.v===o?a.w:a.v,u=e(a);n[o][s]={distance:u,predecessor:o}})}),i.forEach(function(o){var a=n[o];i.forEach(function(s){var u=n[s];i.forEach(function(l){var c=u[o],f=a[l],h=u[l],d=c.distance+f.distance;d<h.distance&&(h.distance=d,h.predecessor=f.predecessor)})})}),n}var Ry=fl,nL=iL;iL.CycleException=B0;function iL(r){var e={},t={},n=[];function i(o){if(Ry.has(t,o))throw new B0;Ry.has(e,o)||(t[o]=!0,e[o]=!0,Ry.each(r.predecessors(o),i),delete t[o],n.push(o))}if(Ry.each(r.sinks(),i),Ry.size(e)!==r.nodeCount())throw new B0;return n}function B0(){}B0.prototype=new Error;var $I=nL,Iz=kz;function kz(r){try{$I(r)}catch(e){if(e instanceof $I.CycleException)return!1;throw e}return!0}var U0=fl,oL=Dz;function Dz(r,e,t){U0.isArray(e)||(e=[e]);var n=(r.isDirected()?r.successors:r.neighbors).bind(r),i=[],o={};return U0.each(e,function(a){if(!r.hasNode(a))throw new Error("Graph does not have node: "+a);aL(r,a,t==="post",o,n,i)}),i}function aL(r,e,t,n,i,o){U0.has(n,e)||(n[e]=!0,t||o.push(e),U0.each(i(e),function(a){aL(r,a,t,n,i,o)}),t&&o.push(e))}var Mz=oL,Lz=Nz;function Nz(r,e){return Mz(r,e,"post")}var jz=oL,Fz=Bz;function Bz(r,e){return jz(r,e,"pre")}var YI=fl,Uz=nT,zz=eL,qz=Gz;function Gz(r,e){var t=new Uz,n={},i=new zz,o;function a(u){var l=u.v===o?u.w:u.v,c=i.priority(l);if(c!==void 0){var f=e(u);f<c&&(n[l]=o,i.decrease(l,f))}}if(r.nodeCount()===0)return t;YI.each(r.nodes(),function(u){i.add(u,Number.POSITIVE_INFINITY),t.setNode(u)}),i.decrease(r.nodes()[0],0);for(var s=!1;i.size()>0;){if(o=i.removeMin(),YI.has(n,o))t.setEdge(o,n[o]);else{if(s)throw new Error("Input graph is not connected: "+r);s=!0}r.nodeEdges(o).forEach(a)}return t}var Vz={components:cz,dijkstra:tL,dijkstraAll:bz,findCycles:xz,floydWarshall:Cz,isAcyclic:Iz,postorder:Lz,preorder:Fz,prim:qz,tarjan:rL,topsort:nL},XI=nz,dl={Graph:XI.Graph,json:oz,alg:Vz,version:XI.version};const Wz=$0(dl);var z0={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */z0.exports;(function(r,e){(function(){var t,n="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",s="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",l=500,c="__lodash_placeholder__",f=1,h=2,d=4,v=1,y=2,w=1,b=2,p=4,_=8,O=16,P=32,R=64,T=128,A=256,M=512,N=30,j="...",B=800,q=16,W=1,J=2,te=3,re=1/0,ee=9007199254740991,fe=17976931348623157e292,he=NaN,se=4294967295,me=se-1,De=se>>>1,Le=[["ary",T],["bind",w],["bindKey",b],["curry",_],["curryRight",O],["flip",M],["partial",P],["partialRight",R],["rearg",A]],Ie="[object Arguments]",qe="[object Array]",Ge="[object AsyncFunction]",Me="[object Boolean]",Pe="[object Date]",de="[object DOMException]",Oe="[object Error]",Ae="[object Function]",Ve="[object GeneratorFunction]",tt="[object Map]",ht="[object Number]",xt="[object Null]",ut="[object Object]",H="[object Promise]",X="[object Proxy]",ne="[object RegExp]",Se="[object Set]",Te="[object String]",Ne="[object Symbol]",et="[object Undefined]",wt="[object WeakMap]",lt="[object WeakSet]",pe="[object ArrayBuffer]",Ue="[object DataView]",nt="[object Float32Array]",Je="[object Float64Array]",at="[object Int8Array]",kt="[object Int16Array]",dt="[object Int32Array]",Dt="[object Uint8Array]",Xt="[object Uint8ClampedArray]",fr="[object Uint16Array]",Vt="[object Uint32Array]",lr=/\b__p \+= '';/g,ir=/\b(__p \+=) '' \+/g,Jt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Wr=/&(?:amp|lt|gt|quot|#39);/g,on=/[&<>"']/g,Pi=RegExp(Wr.source),vn=RegExp(on.source),ln=/<%-([\s\S]+?)%>/g,En=/<%([\s\S]+?)%>/g,Cn=/<%=([\s\S]+?)%>/g,Un=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Xn=/^\w*$/,to=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ei=/[\\^$.*+?()[\]{}|]/g,ro=RegExp(Ei.source),Fi=/^\s+/,ho=/\s/,zn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,yr=/\{\n\/\* \[wrapped with (.+)\] \*/,an=/,? & /,no=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Oi=/[()=,{}\[\]\/\s]/,To=/\\(\\)?/g,Zs=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,vo=/\w*$/,La=/^[-+]0x[0-9a-f]+$/i,Qs=/^0b[01]+$/i,ha=/^\[object .+?Constructor\]$/,vl=/^0o[0-7]+$/i,Na=/^(?:0|[1-9]\d*)$/,vi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,da=/($^)/,po=/['\n\r\u2028\u2029\\]/g,Pn="\\ud800-\\udfff",Kn="\\u0300-\\u036f",hr="\\ufe20-\\ufe2f",Yi="\\u20d0-\\u20ff",go=Kn+hr+Yi,Hr="\\u2700-\\u27bf",jr="a-z\\xdf-\\xf6\\xf8-\\xff",Ai="\\xac\\xb1\\xd7\\xf7",Js="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",bf="\\u2000-\\u206f",eu=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",_f="A-Z\\xc0-\\xd6\\xd8-\\xde",Ri="\\ufe0e\\ufe0f",Mu=Ai+Js+bf+eu,yo="[']",Lu="["+Pn+"]",pl="["+Mu+"]",Bi="["+go+"]",Ja="\\d+",tu="["+Hr+"]",gc="["+jr+"]",yc="[^"+Pn+Mu+Ja+Hr+jr+_f+"]",Fr="\\ud83c[\\udffb-\\udfff]",Ho="(?:"+Bi+"|"+Fr+")",mo="[^"+Pn+"]",mc="(?:\\ud83c[\\udde6-\\uddff]){2}",Wt="[\\ud800-\\udbff][\\udc00-\\udfff]",ru="["+_f+"]",bc="\\u200d",ja="(?:"+gc+"|"+yc+")",Nu="(?:"+ru+"|"+yc+")",Co="(?:"+yo+"(?:d|ll|m|re|s|t|ve))?",$r="(?:"+yo+"(?:D|LL|M|RE|S|T|VE))?",va=Ho+"?",gl="["+Ri+"]?",kh="(?:"+bc+"(?:"+[mo,mc,Wt].join("|")+")"+gl+va+")*",_c="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Dh="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",wf=gl+va+kh,yl="(?:"+[tu,mc,Wt].join("|")+")"+wf,nu="(?:"+[mo+Bi+"?",Bi,mc,Wt,Lu].join("|")+")",Ts=RegExp(yo,"g"),es=RegExp(Bi,"g"),ml=RegExp(Fr+"(?="+Fr+")|"+nu+wf,"g"),wc=RegExp([ru+"?"+gc+"+"+Co+"(?="+[pl,ru,"$"].join("|")+")",Nu+"+"+$r+"(?="+[pl,ru+ja,"$"].join("|")+")",ru+"?"+ja+"+"+Co,ru+"+"+$r,Dh,_c,Ja,yl].join("|"),"g"),Ec=RegExp("["+bc+Pn+go+Ri+"]"),bl=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,iu=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],_l=-1,pn={};pn[nt]=pn[Je]=pn[at]=pn[kt]=pn[dt]=pn[Dt]=pn[Xt]=pn[fr]=pn[Vt]=!0,pn[Ie]=pn[qe]=pn[pe]=pn[Me]=pn[Ue]=pn[Pe]=pn[Oe]=pn[Ae]=pn[tt]=pn[ht]=pn[ut]=pn[ne]=pn[Se]=pn[Te]=pn[wt]=!1;var Pr={};Pr[Ie]=Pr[qe]=Pr[pe]=Pr[Ue]=Pr[Me]=Pr[Pe]=Pr[nt]=Pr[Je]=Pr[at]=Pr[kt]=Pr[dt]=Pr[tt]=Pr[ht]=Pr[ut]=Pr[ne]=Pr[Se]=Pr[Te]=Pr[Ne]=Pr[Dt]=Pr[Xt]=Pr[fr]=Pr[Vt]=!0,Pr[Oe]=Pr[Ae]=Pr[wt]=!1;var Oc={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},ou={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ef={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Cs={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ts=parseFloat,Mh=parseInt,Zd=typeof dn=="object"&&dn&&dn.Object===Object&&dn,au=typeof self=="object"&&self&&self.Object===Object&&self,qn=Zd||au||Function("return this")(),xc=e&&!e.nodeType&&e,io=xc&&!0&&r&&!r.nodeType&&r,su=io&&io.exports===xc,Sc=su&&Zd.process,Ui=function(){try{var Qe=io&&io.require&&io.require("util").types;return Qe||Sc&&Sc.binding&&Sc.binding("util")}catch{}}(),Zn=Ui&&Ui.isArrayBuffer,Fa=Ui&&Ui.isDate,Ba=Ui&&Ui.isMap,pa=Ui&&Ui.isRegExp,ft=Ui&&Ui.isSet,gt=Ui&&Ui.isTypedArray;function yt(Qe,pt,ot){switch(ot.length){case 0:return Qe.call(pt);case 1:return Qe.call(pt,ot[0]);case 2:return Qe.call(pt,ot[0],ot[1]);case 3:return Qe.call(pt,ot[0],ot[1],ot[2])}return Qe.apply(pt,ot)}function Gt(Qe,pt,ot,$t){for(var pr=-1,Gr=Qe==null?0:Qe.length;++pr<Gr;){var gi=Qe[pr];pt($t,gi,ot(gi),Qe)}return $t}function er(Qe,pt){for(var ot=-1,$t=Qe==null?0:Qe.length;++ot<$t&&pt(Qe[ot],ot,Qe)!==!1;);return Qe}function Zr(Qe,pt){for(var ot=Qe==null?0:Qe.length;ot--&&pt(Qe[ot],ot,Qe)!==!1;);return Qe}function Ii(Qe,pt){for(var ot=-1,$t=Qe==null?0:Qe.length;++ot<$t;)if(!pt(Qe[ot],ot,Qe))return!1;return!0}function oo(Qe,pt){for(var ot=-1,$t=Qe==null?0:Qe.length,pr=0,Gr=[];++ot<$t;){var gi=Qe[ot];pt(gi,ot,Qe)&&(Gr[pr++]=gi)}return Gr}function gn(Qe,pt){var ot=Qe==null?0:Qe.length;return!!ot&&Ps(Qe,pt,0)>-1}function Of(Qe,pt,ot){for(var $t=-1,pr=Qe==null?0:Qe.length;++$t<pr;)if(ot(pt,Qe[$t]))return!0;return!1}function Gn(Qe,pt){for(var ot=-1,$t=Qe==null?0:Qe.length,pr=Array($t);++ot<$t;)pr[ot]=pt(Qe[ot],ot,Qe);return pr}function pi(Qe,pt){for(var ot=-1,$t=pt.length,pr=Qe.length;++ot<$t;)Qe[pr+ot]=pt[ot];return Qe}function Tc(Qe,pt,ot,$t){var pr=-1,Gr=Qe==null?0:Qe.length;for($t&&Gr&&(ot=Qe[++pr]);++pr<Gr;)ot=pt(ot,Qe[pr],pr,Qe);return ot}function Ep(Qe,pt,ot,$t){var pr=Qe==null?0:Qe.length;for($t&&pr&&(ot=Qe[--pr]);pr--;)ot=pt(ot,Qe[pr],pr,Qe);return ot}function ju(Qe,pt){for(var ot=-1,$t=Qe==null?0:Qe.length;++ot<$t;)if(pt(Qe[ot],ot,Qe))return!0;return!1}var wl=As("length");function Fu(Qe){return Qe.split("")}function Qr(Qe){return Qe.match(no)||[]}function Cc(Qe,pt,ot){var $t;return ot(Qe,function(pr,Gr,gi){if(pt(pr,Gr,gi))return $t=Gr,!1}),$t}function uu(Qe,pt,ot,$t){for(var pr=Qe.length,Gr=ot+($t?1:-1);$t?Gr--:++Gr<pr;)if(pt(Qe[Gr],Gr,Qe))return Gr;return-1}function Ps(Qe,pt,ot){return pt===pt?Tp(Qe,pt,ot):uu(Qe,Bu,ot)}function Lh(Qe,pt,ot,$t){for(var pr=ot-1,Gr=Qe.length;++pr<Gr;)if($t(Qe[pr],pt))return pr;return-1}function Bu(Qe){return Qe!==Qe}function xf(Qe,pt){var ot=Qe==null?0:Qe.length;return ot?Uu(Qe,pt)/ot:he}function As(Qe){return function(pt){return pt==null?t:pt[Qe]}}function rs(Qe){return function(pt){return Qe==null?t:Qe[pt]}}function Pc(Qe,pt,ot,$t,pr){return pr(Qe,function(Gr,gi,ce){ot=$t?($t=!1,Gr):pt(ot,Gr,gi,ce)}),ot}function Op(Qe,pt){var ot=Qe.length;for(Qe.sort(pt);ot--;)Qe[ot]=Qe[ot].value;return Qe}function Uu(Qe,pt){for(var ot,$t=-1,pr=Qe.length;++$t<pr;){var Gr=pt(Qe[$t]);Gr!==t&&(ot=ot===t?Gr:ot+Gr)}return ot}function Sf(Qe,pt){for(var ot=-1,$t=Array(Qe);++ot<Qe;)$t[ot]=pt(ot);return $t}function Qd(Qe,pt){return Gn(pt,function(ot){return[ot,Qe[ot]]})}function Tf(Qe){return Qe&&Qe.slice(0,Qn(Qe)+1).replace(Fi,"")}function bo(Qe){return function(pt){return Qe(pt)}}function zu(Qe,pt){return Gn(pt,function(ot){return Qe[ot]})}function ns(Qe,pt){return Qe.has(pt)}function Cf(Qe,pt){for(var ot=-1,$t=Qe.length;++ot<$t&&Ps(pt,Qe[ot],0)>-1;);return ot}function xp(Qe,pt){for(var ot=Qe.length;ot--&&Ps(pt,Qe[ot],0)>-1;);return ot}function Sp(Qe,pt){for(var ot=Qe.length,$t=0;ot--;)Qe[ot]===pt&&++$t;return $t}var Po=rs(Oc),Nh=rs(ou);function jh(Qe){return"\\"+Cs[Qe]}function Pf(Qe,pt){return Qe==null?t:Qe[pt]}function qu(Qe){return Ec.test(Qe)}function Jd(Qe){return bl.test(Qe)}function Ao(Qe){for(var pt,ot=[];!(pt=Qe.next()).done;)ot.push(pt.value);return ot}function ao(Qe){var pt=-1,ot=Array(Qe.size);return Qe.forEach(function($t,pr){ot[++pt]=[pr,$t]}),ot}function An(Qe,pt){return function(ot){return Qe(pt(ot))}}function Vn(Qe,pt){for(var ot=-1,$t=Qe.length,pr=0,Gr=[];++ot<$t;){var gi=Qe[ot];(gi===pt||gi===c)&&(Qe[ot]=c,Gr[pr++]=ot)}return Gr}function Fh(Qe){var pt=-1,ot=Array(Qe.size);return Qe.forEach(function($t){ot[++pt]=$t}),ot}function Qg(Qe){var pt=-1,ot=Array(Qe.size);return Qe.forEach(function($t){ot[++pt]=[$t,$t]}),ot}function Tp(Qe,pt,ot){for(var $t=ot-1,pr=Qe.length;++$t<pr;)if(Qe[$t]===pt)return $t;return-1}function Cp(Qe,pt,ot){for(var $t=ot+1;$t--;)if(Qe[$t]===pt)return $t;return $t}function Qt(Qe){return qu(Qe)?Ac(Qe):wl(Qe)}function so(Qe){return qu(Qe)?Rc(Qe):Fu(Qe)}function Qn(Qe){for(var pt=Qe.length;pt--&&ho.test(Qe.charAt(pt)););return pt}var El=rs(Ef);function Ac(Qe){for(var pt=ml.lastIndex=0;ml.test(Qe);)++pt;return pt}function Rc(Qe){return Qe.match(ml)||[]}function Af(Qe){return Qe.match(wc)||[]}var Ol=function Qe(pt){pt=pt==null?qn:xl.defaults(qn.Object(),pt,xl.pick(qn,iu));var ot=pt.Array,$t=pt.Date,pr=pt.Error,Gr=pt.Function,gi=pt.Math,ce=pt.Object,Rs=pt.RegExp,Bh=pt.String,Jn=pt.TypeError,Lr=ot.prototype,lu=Gr.prototype,$o=ce.prototype,Xi=pt["__core-js_shared__"],is=lu.toString,Ir=$o.hasOwnProperty,Pp=0,Uh=function(){var S=/[^.]+$/.exec(Xi&&Xi.keys&&Xi.keys.IE_PROTO||"");return S?"Symbol(src)_1."+S:""}(),ga=$o.toString,ev=is.call(ce),tv=qn._,Rf=Rs("^"+is.call(Ir).replace(Ei,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Gu=su?pt.Buffer:t,Br=pt.Symbol,Sl=pt.Uint8Array,Is=Gu?Gu.allocUnsafe:t,Tl=An(ce.getPrototypeOf,ce),Ua=ce.create,Yo=$o.propertyIsEnumerable,Cl=Lr.splice,If=Br?Br.isConcatSpreadable:t,ks=Br?Br.iterator:t,Xo=Br?Br.toStringTag:t,Ro=function(){try{var S=Eu(ce,"defineProperty");return S({},"",{}),S}catch{}}(),Ap=pt.clearTimeout!==qn.clearTimeout&&pt.clearTimeout,kf=$t&&$t.now!==qn.Date.now&&$t.now,rv=pt.setTimeout!==qn.setTimeout&&pt.setTimeout,Wn=gi.ceil,Pl=gi.floor,zh=ce.getOwnPropertySymbols,Ds=Gu?Gu.isBuffer:t,Df=pt.isFinite,Mf=Lr.join,cu=An(ce.keys,ce),ki=gi.max,hn=gi.min,qh=$t.now,Al=pt.parseInt,Gh=gi.random,Vu=Lr.reverse,fu=Eu(pt,"DataView"),za=Eu(pt,"Map"),Wu=Eu(pt,"Promise"),hu=Eu(pt,"Set"),Ic=Eu(pt,"WeakMap"),Rl=Eu(ce,"create"),du=Ic&&new Ic,Ms={},Rp=ci(fu),nv=ci(za),kc=ci(Wu),Vh=ci(hu),Dc=ci(Ic),Mc=Br?Br.prototype:t,ya=Mc?Mc.valueOf:t,vu=Mc?Mc.toString:t;function ye(S){if(Ti(S)&&!Rr(S)&&!(S instanceof kr)){if(S instanceof dr)return S;if(Ir.call(S,"__wrapped__"))return Cv(S)}return new dr(S)}var Hu=function(){function S(){}return function(k){if(!Nn(k))return{};if(Ua)return Ua(k);S.prototype=k;var U=new S;return S.prototype=t,U}}();function $u(){}function dr(S,k){this.__wrapped__=S,this.__actions__=[],this.__chain__=!!k,this.__index__=0,this.__values__=t}ye.templateSettings={escape:ln,evaluate:En,interpolate:Cn,variable:"",imports:{_:ye}},ye.prototype=$u.prototype,ye.prototype.constructor=ye,dr.prototype=Hu($u.prototype),dr.prototype.constructor=dr;function kr(S){this.__wrapped__=S,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=se,this.__views__=[]}function Lf(){var S=new kr(this.__wrapped__);return S.__actions__=qi(this.__actions__),S.__dir__=this.__dir__,S.__filtered__=this.__filtered__,S.__iteratees__=qi(this.__iteratees__),S.__takeCount__=this.__takeCount__,S.__views__=qi(this.__views__),S}function Il(){if(this.__filtered__){var S=new kr(this);S.__dir__=-1,S.__filtered__=!0}else S=this.clone(),S.__dir__*=-1;return S}function Nf(){var S=this.__wrapped__.value(),k=this.__dir__,U=Rr(S),K=k<0,oe=U?S.length:0,be=Gp(0,oe,this.__views__),Fe=be.start,He=be.end,rt=He-Fe,Ot=K?He:Fe-1,Tt=this.__iteratees__,At=Tt.length,Ht=0,nr=hn(rt,this.__takeCount__);if(!U||!K&&oe==rt&&nr==rt)return Qu(S,this.__actions__);var xr=[];e:for(;rt--&&Ht<nr;){Ot+=k;for(var Vr=-1,Sr=S[Ot];++Vr<At;){var nn=Tt[Vr],fn=nn.iteratee,Pu=nn.type,Os=fn(Sr);if(Pu==J)Sr=Os;else if(!Os){if(Pu==W)continue e;break e}}xr[Ht++]=Sr}return xr}kr.prototype=Hu($u.prototype),kr.prototype.constructor=kr;function os(S){var k=-1,U=S==null?0:S.length;for(this.clear();++k<U;){var K=S[k];this.set(K[0],K[1])}}function Jg(){this.__data__=Rl?Rl(null):{},this.size=0}function qa(S){var k=this.has(S)&&delete this.__data__[S];return this.size-=k?1:0,k}function Ip(S){var k=this.__data__;if(Rl){var U=k[S];return U===u?t:U}return Ir.call(k,S)?k[S]:t}function jf(S){var k=this.__data__;return Rl?k[S]!==t:Ir.call(k,S)}function kl(S,k){var U=this.__data__;return this.size+=this.has(S)?0:1,U[S]=Rl&&k===t?u:k,this}os.prototype.clear=Jg,os.prototype.delete=qa,os.prototype.get=Ip,os.prototype.has=jf,os.prototype.set=kl;function Ga(S){var k=-1,U=S==null?0:S.length;for(this.clear();++k<U;){var K=S[k];this.set(K[0],K[1])}}function iv(){this.__data__=[],this.size=0}function ma(S){var k=this.__data__,U=Fc(k,S);if(U<0)return!1;var K=k.length-1;return U==K?k.pop():Cl.call(k,U,1),--this.size,!0}function tr(S){var k=this.__data__,U=Fc(k,S);return U<0?t:k[U][1]}function Wh(S){return Fc(this.__data__,S)>-1}function _o(S,k){var U=this.__data__,K=Fc(U,S);return K<0?(++this.size,U.push([S,k])):U[K][1]=k,this}Ga.prototype.clear=iv,Ga.prototype.delete=ma,Ga.prototype.get=tr,Ga.prototype.has=Wh,Ga.prototype.set=_o;function wo(S){var k=-1,U=S==null?0:S.length;for(this.clear();++k<U;){var K=S[k];this.set(K[0],K[1])}}function ba(){this.size=0,this.__data__={hash:new os,map:new(za||Ga),string:new os}}function Ff(S){var k=Sa(this,S).delete(S);return this.size-=k?1:0,k}function kp(S){return Sa(this,S).get(S)}function Dl(S){return Sa(this,S).has(S)}function Lc(S,k){var U=Sa(this,S),K=U.size;return U.set(S,k),this.size+=U.size==K?0:1,this}wo.prototype.clear=ba,wo.prototype.delete=Ff,wo.prototype.get=kp,wo.prototype.has=Dl,wo.prototype.set=Lc;function Eo(S){var k=-1,U=S==null?0:S.length;for(this.__data__=new wo;++k<U;)this.add(S[k])}function ey(S){return this.__data__.set(S,u),this}function _a(S){return this.__data__.has(S)}Eo.prototype.add=Eo.prototype.push=ey,Eo.prototype.has=_a;function wa(S){var k=this.__data__=new Ga(S);this.size=k.size}function Ml(){this.__data__=new Ga,this.size=0}function Nc(S){var k=this.__data__,U=k.delete(S);return this.size=k.size,U}function Bf(S){return this.__data__.get(S)}function Dp(S){return this.__data__.has(S)}function jc(S,k){var U=this.__data__;if(U instanceof Ga){var K=U.__data__;if(!za||K.length<i-1)return K.push([S,k]),this.size=++U.size,this;U=this.__data__=new wo(K)}return U.set(S,k),this.size=U.size,this}wa.prototype.clear=Ml,wa.prototype.delete=Nc,wa.prototype.get=Bf,wa.prototype.has=Dp,wa.prototype.set=jc;function Hh(S,k){var U=Rr(S),K=!U&&Zl(S),oe=!U&&!K&&Ql(S),be=!U&&!K&&!oe&&ch(S),Fe=U||K||oe||be,He=Fe?Sf(S.length,Bh):[],rt=He.length;for(var Ot in S)(k||Ir.call(S,Ot))&&!(Fe&&(Ot=="length"||oe&&(Ot=="offset"||Ot=="parent")||be&&(Ot=="buffer"||Ot=="byteLength"||Ot=="byteOffset")||Ou(Ot,rt)))&&He.push(Ot);return He}function Io(S){var k=S.length;return k?S[ql(0,k-1)]:t}function as(S,k){return nh(qi(S),ls(k,0,S.length))}function Uf(S){return nh(qi(S))}function Yu(S,k,U){(U!==t&&!ws(S[k],U)||U===t&&!(k in S))&&us(S,k,U)}function Ls(S,k,U){var K=S[k];(!(Ir.call(S,k)&&ws(K,U))||U===t&&!(k in S))&&us(S,k,U)}function Fc(S,k){for(var U=S.length;U--;)if(ws(S[U][0],k))return U;return-1}function ss(S,k,U,K){return cs(S,function(oe,be,Fe){k(K,oe,U(oe),Fe)}),K}function Ll(S,k){return S&&Wa(k,Ct(k),S)}function pu(S,k){return S&&Wa(k,Ee(k),S)}function us(S,k,U){k=="__proto__"&&Ro?Ro(S,k,{configurable:!0,enumerable:!0,value:U,writable:!0}):S[k]=U}function zf(S,k){for(var U=-1,K=k.length,oe=ot(K),be=S==null;++U<K;)oe[U]=be?t:We(S,k[U]);return oe}function ls(S,k,U){return S===S&&(U!==t&&(S=S<=U?S:U),k!==t&&(S=S>=k?S:k)),S}function Ko(S,k,U,K,oe,be){var Fe,He=k&f,rt=k&h,Ot=k&d;if(U&&(Fe=oe?U(S,K,oe,be):U(S)),Fe!==t)return Fe;if(!Nn(S))return S;var Tt=Rr(S);if(Tt){if(Fe=ry(S),!He)return qi(S,Fe)}else{var At=xo(S),Ht=At==Ae||At==Ve;if(Ql(S))return vv(S,He);if(At==ut||At==Ie||Ht&&!oe){if(Fe=rt||Ht?{}:Wp(S),!He)return rt?Zf(S,pu(Fe,S)):mv(S,Ll(Fe,S))}else{if(!Pr[At])return oe?S:{};Fe=Hp(S,At,He)}}be||(be=new wa);var nr=be.get(S);if(nr)return nr;be.set(S,Fe),_y(S)?S.forEach(function(Sr){Fe.add(Ko(Sr,k,U,Sr,S,be))}):Bt(S)&&S.forEach(function(Sr,nn){Fe.set(nn,Ko(Sr,k,U,nn,S,be))});var xr=Ot?rt?Do:Yc:rt?Ee:Ct,Vr=Tt?t:xr(S);return er(Vr||S,function(Sr,nn){Vr&&(nn=Sr,Sr=S[nn]),Ls(Fe,nn,Ko(Sr,k,U,nn,S,be))}),Fe}function $h(S){var k=Ct(S);return function(U){return qf(U,S,k)}}function qf(S,k,U){var K=U.length;if(S==null)return!K;for(S=ce(S);K--;){var oe=U[K],be=k[oe],Fe=S[oe];if(Fe===t&&!(oe in S)||!be(Fe))return!1}return!0}function Zo(S,k,U){if(typeof S!="function")throw new Jn(a);return tl(function(){S.apply(t,U)},k)}function Bc(S,k,U,K){var oe=-1,be=gn,Fe=!0,He=S.length,rt=[],Ot=k.length;if(!He)return rt;U&&(k=Gn(k,bo(U))),K?(be=Of,Fe=!1):k.length>=i&&(be=ns,Fe=!1,k=new Eo(k));e:for(;++oe<He;){var Tt=S[oe],At=U==null?Tt:U(Tt);if(Tt=K||Tt!==0?Tt:0,Fe&&At===At){for(var Ht=Ot;Ht--;)if(k[Ht]===At)continue e;rt.push(Tt)}else be(k,At,K)||rt.push(Tt)}return rt}var cs=qp(Qo),Yh=qp(Ea,!0);function Nl(S,k){var U=!0;return cs(S,function(K,oe,be){return U=!!k(K,oe,be),U}),U}function Gf(S,k,U){for(var K=-1,oe=S.length;++K<oe;){var be=S[K],Fe=k(be);if(Fe!=null&&(He===t?Fe===Fe&&!Es(Fe):U(Fe,He)))var He=Fe,rt=be}return rt}function ov(S,k,U,K){var oe=S.length;for(U=E(U),U<0&&(U=-U>oe?0:oe+U),K=K===t||K>oe?oe:E(K),K<0&&(K+=oe),K=U>K?0:D(K);U<K;)S[U++]=k;return S}function fs(S,k){var U=[];return cs(S,function(K,oe,be){k(K,oe,be)&&U.push(K)}),U}function Di(S,k,U,K,oe){var be=-1,Fe=S.length;for(U||(U=Ev),oe||(oe=[]);++be<Fe;){var He=S[be];k>0&&U(He)?k>1?Di(He,k-1,U,K,oe):pi(oe,He):K||(oe[oe.length]=He)}return oe}var Uc=Ju(),zc=Ju(!0);function Qo(S,k){return S&&Uc(S,k,Ct)}function Ea(S,k){return S&&zc(S,k,Ct)}function qc(S,k){return oo(k,function(U){return ti(S[U])})}function hs(S,k){k=vs(k,S);for(var U=0,K=k.length;S!=null&&U<K;)S=S[ms(k[U++])];return U&&U==K?S:t}function Xh(S,k,U){var K=k(S);return Rr(S)?K:pi(K,U(S))}function Ki(S){return S==null?S===t?et:xt:Xo&&Xo in ce(S)?Ta(S):pd(S)}function Xu(S,k){return S>k}function gr(S,k){return S!=null&&Ir.call(S,k)}function gu(S,k){return S!=null&&k in ce(S)}function Vf(S,k,U){return S>=hn(k,U)&&S<ki(k,U)}function yu(S,k,U){for(var K=U?Of:gn,oe=S[0].length,be=S.length,Fe=be,He=ot(be),rt=1/0,Ot=[];Fe--;){var Tt=S[Fe];Fe&&k&&(Tt=Gn(Tt,bo(k))),rt=hn(Tt.length,rt),He[Fe]=!U&&(k||oe>=120&&Tt.length>=120)?new Eo(Fe&&Tt):t}Tt=S[0];var At=-1,Ht=He[0];e:for(;++At<oe&&Ot.length<rt;){var nr=Tt[At],xr=k?k(nr):nr;if(nr=U||nr!==0?nr:0,!(Ht?ns(Ht,xr):K(Ot,xr,U))){for(Fe=be;--Fe;){var Vr=He[Fe];if(!(Vr?ns(Vr,xr):K(S[Fe],xr,U)))continue e}Ht&&Ht.push(xr),Ot.push(nr)}}return Ot}function av(S,k,U,K){return Qo(S,function(oe,be,Fe){k(K,U(oe),be,Fe)}),K}function jl(S,k,U){k=vs(k,S),S=ys(S,k);var K=S==null?S:S[ms(G(k))];return K==null?t:yt(K,S,U)}function Rn(S){return Ti(S)&&Ki(S)==Ie}function Kh(S){return Ti(S)&&Ki(S)==pe}function Fl(S){return Ti(S)&&Ki(S)==Pe}function Bl(S,k,U,K,oe){return S===k?!0:S==null||k==null||!Ti(S)&&!Ti(k)?S!==S&&k!==k:Zi(S,k,U,K,Bl,oe)}function Zi(S,k,U,K,oe,be){var Fe=Rr(S),He=Rr(k),rt=Fe?qe:xo(S),Ot=He?qe:xo(k);rt=rt==Ie?ut:rt,Ot=Ot==Ie?ut:Ot;var Tt=rt==ut,At=Ot==ut,Ht=rt==Ot;if(Ht&&Ql(S)){if(!Ql(k))return!1;Fe=!0,Tt=!1}if(Ht&&!Tt)return be||(be=new wa),Fe||ch(S)?ld(S,k,U,K,oe,be):$c(S,k,rt,U,K,oe,be);if(!(U&v)){var nr=Tt&&Ir.call(S,"__wrapped__"),xr=At&&Ir.call(k,"__wrapped__");if(nr||xr){var Vr=nr?S.value():S,Sr=xr?k.value():k;return be||(be=new wa),oe(Vr,Sr,U,K,be)}}return Ht?(be||(be=new wa),th(S,k,U,K,oe,be)):!1}function Oo(S){return Ti(S)&&xo(S)==tt}function zi(S,k,U,K){var oe=U.length,be=oe,Fe=!K;if(S==null)return!be;for(S=ce(S);oe--;){var He=U[oe];if(Fe&&He[2]?He[1]!==S[He[0]]:!(He[0]in S))return!1}for(;++oe<be;){He=U[oe];var rt=He[0],Ot=S[rt],Tt=He[1];if(Fe&&He[2]){if(Ot===t&&!(rt in S))return!1}else{var At=new wa;if(K)var Ht=K(Ot,Tt,rt,S,k,At);if(!(Ht===t?Bl(Tt,Ot,v|y,K,At):Ht))return!1}}return!0}function Ul(S){if(!Nn(S)||dd(S))return!1;var k=ti(S)?Rf:ha;return k.test(ci(S))}function ty(S){return Ti(S)&&Ki(S)==ne}function mu(S){return Ti(S)&&xo(S)==Se}function Mp(S){return Ti(S)&&Wv(S.length)&&!!pn[Ki(S)]}function Va(S){return typeof S=="function"?S:S==null?si:typeof S=="object"?Rr(S)?Qh(S[0],S[1]):zl(S):MT(S)}function Wf(S){if(!Mo(S))return cu(S);var k=[];for(var U in ce(S))Ir.call(S,U)&&U!="constructor"&&k.push(U);return k}function Lp(S){if(!Nn(S))return Su(S);var k=Mo(S),U=[];for(var K in S)K=="constructor"&&(k||!Ir.call(S,K))||U.push(K);return U}function bu(S,k){return S<k}function Zh(S,k){var U=-1,K=Aa(S)?ot(S.length):[];return cs(S,function(oe,be,Fe){K[++U]=k(oe,be,Fe)}),K}function zl(S){var k=Cr(S);return k.length==1&&k[0][2]?vd(k[0][0],k[0][1]):function(U){return U===S||zi(U,S,k)}}function Qh(S,k){return Ov(S)&&Kc(k)?vd(ms(S),k):function(U){var K=We(U,S);return K===t&&K===k?mt(U,S):Bl(k,K,v|y)}}function ds(S,k,U,K,oe){S!==k&&Uc(k,function(be,Fe){if(oe||(oe=new wa),Nn(be))sv(S,k,Fe,U,ds,K,oe);else{var He=K?K(Xl(S,Fe),be,Fe+"",S,k,oe):t;He===t&&(He=be),Yu(S,Fe,He)}},Ee)}function sv(S,k,U,K,oe,be,Fe){var He=Xl(S,U),rt=Xl(k,U),Ot=Fe.get(rt);if(Ot){Yu(S,U,Ot);return}var Tt=be?be(He,rt,U+"",S,k,Fe):t,At=Tt===t;if(At){var Ht=Rr(rt),nr=!Ht&&Ql(rt),xr=!Ht&&!nr&&ch(rt);Tt=rt,Ht||nr||xr?Rr(He)?Tt=He:Mi(He)?Tt=qi(He):nr?(At=!1,Tt=vv(rt,!0)):xr?(At=!1,Tt=gv(rt,!0)):Tt=[]:Jl(rt)||Zl(rt)?(Tt=He,Zl(He)?Tt=F(He):(!Nn(He)||ti(He))&&(Tt=Wp(rt))):At=!1}At&&(Fe.set(rt,Tt),oe(Tt,rt,K,be,Fe),Fe.delete(rt)),Yu(S,U,Tt)}function Hf(S,k){var U=S.length;if(U)return k+=k<0?U:0,Ou(k,U)?S[k]:t}function Ku(S,k,U){k.length?k=Gn(k,function(be){return Rr(be)?function(Fe){return hs(Fe,be.length===1?be[0]:be)}:be}):k=[si];var K=-1;k=Gn(k,bo(Pt()));var oe=Zh(S,function(be,Fe,He){var rt=Gn(k,function(Ot){return Ot(be)});return{criteria:rt,index:++K,value:be}});return Op(oe,function(be,Fe){return Wl(be,Fe,U)})}function uv(S,k){return Jh(S,k,function(U,K){return mt(S,K)})}function Jh(S,k,U){for(var K=-1,oe=k.length,be={};++K<oe;){var Fe=k[K],He=hs(S,Fe);U(He,Fe)&&Gl(be,vs(Fe,S),He)}return be}function xi(S){return function(k){return hs(k,S)}}function _u(S,k,U,K){var oe=K?Lh:Ps,be=-1,Fe=k.length,He=S;for(S===k&&(k=qi(k)),U&&(He=Gn(S,bo(U)));++be<Fe;)for(var rt=0,Ot=k[be],Tt=U?U(Ot):Ot;(rt=oe(He,Tt,rt,K))>-1;)He!==S&&Cl.call(He,rt,1),Cl.call(S,rt,1);return S}function lv(S,k){for(var U=S?k.length:0,K=U-1;U--;){var oe=k[U];if(U==K||oe!==be){var be=oe;Ou(oe)?Cl.call(S,oe,1):wu(S,oe)}}return S}function ql(S,k){return S+Pl(Gh()*(k-S+1))}function cv(S,k,U,K){for(var oe=-1,be=ki(Wn((k-S)/(U||1)),0),Fe=ot(be);be--;)Fe[K?be:++oe]=S,S+=U;return Fe}function fv(S,k){var U="";if(!S||k<1||k>ee)return U;do k%2&&(U+=S),k=Pl(k/2),k&&(S+=S);while(k);return U}function wr(S,k){return Sv(Ca(S,k,si),S+"")}function hv(S){return Io(mn(S))}function Np(S,k){var U=mn(S);return nh(U,ls(k,0,U.length))}function Gl(S,k,U,K){if(!Nn(S))return S;k=vs(k,S);for(var oe=-1,be=k.length,Fe=be-1,He=S;He!=null&&++oe<be;){var rt=ms(k[oe]),Ot=U;if(rt==="__proto__"||rt==="constructor"||rt==="prototype")return S;if(oe!=Fe){var Tt=He[rt];Ot=K?K(Tt,rt,He):t,Ot===t&&(Ot=Nn(Tt)?Tt:Ou(k[oe+1])?[]:{})}Ls(He,rt,Ot),He=He[rt]}return S}var dv=du?function(S,k){return du.set(S,k),S}:si,jp=Ro?function(S,k){return Ro(S,"toString",{configurable:!0,enumerable:!1,value:mi(k),writable:!0})}:si;function $f(S){return nh(mn(S))}function li(S,k,U){var K=-1,oe=S.length;k<0&&(k=-k>oe?0:oe+k),U=U>oe?oe:U,U<0&&(U+=oe),oe=k>U?0:U-k>>>0,k>>>=0;for(var be=ot(oe);++K<oe;)be[K]=S[K+k];return be}function Fp(S,k){var U;return cs(S,function(K,oe,be){return U=k(K,oe,be),!U}),!!U}function Yf(S,k,U){var K=0,oe=S==null?K:S.length;if(typeof k=="number"&&k===k&&oe<=De){for(;K<oe;){var be=K+oe>>>1,Fe=S[be];Fe!==null&&!Es(Fe)&&(U?Fe<=k:Fe<k)?K=be+1:oe=be}return oe}return ed(S,k,si,U)}function ed(S,k,U,K){var oe=0,be=S==null?0:S.length;if(be===0)return 0;k=U(k);for(var Fe=k!==k,He=k===null,rt=Es(k),Ot=k===t;oe<be;){var Tt=Pl((oe+be)/2),At=U(S[Tt]),Ht=At!==t,nr=At===null,xr=At===At,Vr=Es(At);if(Fe)var Sr=K||xr;else Ot?Sr=xr&&(K||Ht):He?Sr=xr&&Ht&&(K||!nr):rt?Sr=xr&&Ht&&!nr&&(K||!Vr):nr||Vr?Sr=!1:Sr=K?At<=k:At<k;Sr?oe=Tt+1:be=Tt}return hn(be,me)}function Xf(S,k){for(var U=-1,K=S.length,oe=0,be=[];++U<K;){var Fe=S[U],He=k?k(Fe):Fe;if(!U||!ws(He,rt)){var rt=He;be[oe++]=Fe===0?0:Fe}}return be}function Bp(S){return typeof S=="number"?S:Es(S)?he:+S}function Oa(S){if(typeof S=="string")return S;if(Rr(S))return Gn(S,Oa)+"";if(Es(S))return vu?vu.call(S):"";var k=S+"";return k=="0"&&1/S==-1/0?"-0":k}function Zu(S,k,U){var K=-1,oe=gn,be=S.length,Fe=!0,He=[],rt=He;if(U)Fe=!1,oe=Of;else if(be>=i){var Ot=k?null:Ha(S);if(Ot)return Fh(Ot);Fe=!1,oe=ns,rt=new Eo}else rt=k?[]:He;e:for(;++K<be;){var Tt=S[K],At=k?k(Tt):Tt;if(Tt=U||Tt!==0?Tt:0,Fe&&At===At){for(var Ht=rt.length;Ht--;)if(rt[Ht]===At)continue e;k&&rt.push(At),He.push(Tt)}else oe(rt,At,U)||(rt!==He&&rt.push(At),He.push(Tt))}return He}function wu(S,k){return k=vs(k,S),S=ys(S,k),S==null||delete S[ms(G(k))]}function td(S,k,U,K){return Gl(S,k,U(hs(S,k)),K)}function rd(S,k,U,K){for(var oe=S.length,be=K?oe:-1;(K?be--:++be<oe)&&k(S[be],be,S););return U?li(S,K?0:be,K?be+1:oe):li(S,K?be+1:0,K?oe:be)}function Qu(S,k){var U=S;return U instanceof kr&&(U=U.value()),Tc(k,function(K,oe){return oe.func.apply(oe.thisArg,pi([K],oe.args))},U)}function nd(S,k,U){var K=S.length;if(K<2)return K?Zu(S[0]):[];for(var oe=-1,be=ot(K);++oe<K;)for(var Fe=S[oe],He=-1;++He<K;)He!=oe&&(be[oe]=Bc(be[oe]||Fe,S[He],k,U));return Zu(Di(be,1),k,U)}function Kf(S,k,U){for(var K=-1,oe=S.length,be=k.length,Fe={};++K<oe;){var He=K<be?k[K]:t;U(Fe,S[K],He)}return Fe}function Gc(S){return Mi(S)?S:[]}function Qi(S){return typeof S=="function"?S:si}function vs(S,k){return Rr(S)?S:Ov(S,k)?[S]:Kl(z(S))}var id=wr;function Ns(S,k,U){var K=S.length;return U=U===t?K:U,!k&&U>=K?S:li(S,k,U)}var Up=Ap||function(S){return qn.clearTimeout(S)};function vv(S,k){if(k)return S.slice();var U=S.length,K=Is?Is(U):new S.constructor(U);return S.copy(K),K}function Vl(S){var k=new S.constructor(S.byteLength);return new Sl(k).set(new Sl(S)),k}function Vc(S,k){var U=k?Vl(S.buffer):S.buffer;return new S.constructor(U,S.byteOffset,S.byteLength)}function pv(S){var k=new S.constructor(S.source,vo.exec(S));return k.lastIndex=S.lastIndex,k}function od(S){return ya?ce(ya.call(S)):{}}function gv(S,k){var U=k?Vl(S.buffer):S.buffer;return new S.constructor(U,S.byteOffset,S.length)}function ad(S,k){if(S!==k){var U=S!==t,K=S===null,oe=S===S,be=Es(S),Fe=k!==t,He=k===null,rt=k===k,Ot=Es(k);if(!He&&!Ot&&!be&&S>k||be&&Fe&&rt&&!He&&!Ot||K&&Fe&&rt||!U&&rt||!oe)return 1;if(!K&&!be&&!Ot&&S<k||Ot&&U&&oe&&!K&&!be||He&&U&&oe||!Fe&&oe||!rt)return-1}return 0}function Wl(S,k,U){for(var K=-1,oe=S.criteria,be=k.criteria,Fe=oe.length,He=U.length;++K<Fe;){var rt=ad(oe[K],be[K]);if(rt){if(K>=He)return rt;var Ot=U[K];return rt*(Ot=="desc"?-1:1)}}return S.index-k.index}function yv(S,k,U,K){for(var oe=-1,be=S.length,Fe=U.length,He=-1,rt=k.length,Ot=ki(be-Fe,0),Tt=ot(rt+Ot),At=!K;++He<rt;)Tt[He]=k[He];for(;++oe<Fe;)(At||oe<be)&&(Tt[U[oe]]=S[oe]);for(;Ot--;)Tt[He++]=S[oe++];return Tt}function zp(S,k,U,K){for(var oe=-1,be=S.length,Fe=-1,He=U.length,rt=-1,Ot=k.length,Tt=ki(be-He,0),At=ot(Tt+Ot),Ht=!K;++oe<Tt;)At[oe]=S[oe];for(var nr=oe;++rt<Ot;)At[nr+rt]=k[rt];for(;++Fe<He;)(Ht||oe<be)&&(At[nr+U[Fe]]=S[oe++]);return At}function qi(S,k){var U=-1,K=S.length;for(k||(k=ot(K));++U<K;)k[U]=S[U];return k}function Wa(S,k,U,K){var oe=!U;U||(U={});for(var be=-1,Fe=k.length;++be<Fe;){var He=k[be],rt=K?K(U[He],S[He],He,U,S):t;rt===t&&(rt=S[He]),oe?us(U,He,rt):Ls(U,He,rt)}return U}function mv(S,k){return Wa(S,fd(S),k)}function Zf(S,k){return Wa(S,cn(S),k)}function Qf(S,k){return function(U,K){var oe=Rr(U)?Gt:ss,be=k?k():{};return oe(U,S,Pt(K,2),be)}}function js(S){return wr(function(k,U){var K=-1,oe=U.length,be=oe>1?U[oe-1]:t,Fe=oe>2?U[2]:t;for(be=S.length>3&&typeof be=="function"?(oe--,be):t,Fe&&lo(U[0],U[1],Fe)&&(be=oe<3?t:be,oe=1),k=ce(k);++K<oe;){var He=U[K];He&&S(k,He,K,be)}return k})}function qp(S,k){return function(U,K){if(U==null)return U;if(!Aa(U))return S(U,K);for(var oe=U.length,be=k?oe:-1,Fe=ce(U);(k?be--:++be<oe)&&K(Fe[be],be,Fe)!==!1;);return U}}function Ju(S){return function(k,U,K){for(var oe=-1,be=ce(k),Fe=K(k),He=Fe.length;He--;){var rt=Fe[S?He:++oe];if(U(be[rt],rt,be)===!1)break}return k}}function ps(S,k,U){var K=k&w,oe=el(S);function be(){var Fe=this&&this!==qn&&this instanceof be?oe:S;return Fe.apply(K?U:this,arguments)}return be}function Wc(S){return function(k){k=z(k);var U=qu(k)?so(k):t,K=U?U[0]:k.charAt(0),oe=U?Ns(U,1).join(""):k.slice(1);return K[S]()+oe}}function Hl(S){return function(k){return Tc(dh(rn(k).replace(Ts,"")),S,"")}}function el(S){return function(){var k=arguments;switch(k.length){case 0:return new S;case 1:return new S(k[0]);case 2:return new S(k[0],k[1]);case 3:return new S(k[0],k[1],k[2]);case 4:return new S(k[0],k[1],k[2],k[3]);case 5:return new S(k[0],k[1],k[2],k[3],k[4]);case 6:return new S(k[0],k[1],k[2],k[3],k[4],k[5]);case 7:return new S(k[0],k[1],k[2],k[3],k[4],k[5],k[6])}var U=Hu(S.prototype),K=S.apply(U,k);return Nn(K)?K:U}}function sd(S,k,U){var K=el(S);function oe(){for(var be=arguments.length,Fe=ot(be),He=be,rt=Xc(oe);He--;)Fe[He]=arguments[He];var Ot=be<3&&Fe[0]!==rt&&Fe[be-1]!==rt?[]:Vn(Fe,rt);if(be-=Ot.length,be<U)return _v(S,k,Jf,oe.placeholder,t,Fe,Ot,t,t,U-be);var Tt=this&&this!==qn&&this instanceof oe?K:S;return yt(Tt,this,Fe)}return oe}function bv(S){return function(k,U,K){var oe=ce(k);if(!Aa(k)){var be=Pt(U,3);k=Ct(k),U=function(He){return be(oe[He],He,oe)}}var Fe=S(k,U,K);return Fe>-1?oe[be?k[Fe]:Fe]:t}}function uo(S){return xa(function(k){var U=k.length,K=U,oe=dr.prototype.thru;for(S&&k.reverse();K--;){var be=k[K];if(typeof be!="function")throw new Jn(a);if(oe&&!Fe&&cd(be)=="wrapper")var Fe=new dr([],!0)}for(K=Fe?K:U;++K<U;){be=k[K];var He=cd(be),rt=He=="wrapper"?gs(be):t;rt&&Nr(rt[0])&&rt[1]==(T|_|P|A)&&!rt[4].length&&rt[9]==1?Fe=Fe[cd(rt[0])].apply(Fe,rt[3]):Fe=be.length==1&&Nr(be)?Fe[He]():Fe.thru(be)}return function(){var Ot=arguments,Tt=Ot[0];if(Fe&&Ot.length==1&&Rr(Tt))return Fe.plant(Tt).value();for(var At=0,Ht=U?k[At].apply(this,Ot):Tt;++At<U;)Ht=k[At].call(this,Ht);return Ht}})}function Jf(S,k,U,K,oe,be,Fe,He,rt,Ot){var Tt=k&T,At=k&w,Ht=k&b,nr=k&(_|O),xr=k&M,Vr=Ht?t:el(S);function Sr(){for(var nn=arguments.length,fn=ot(nn),Pu=nn;Pu--;)fn[Pu]=arguments[Pu];if(nr)var Os=Xc(Sr),Au=Sp(fn,Os);if(K&&(fn=yv(fn,K,oe,nr)),be&&(fn=zp(fn,be,Fe,nr)),nn-=Au,nr&&nn<Ot){var fo=Vn(fn,Os);return _v(S,k,Jf,Sr.placeholder,U,fn,fo,He,rt,Ot-nn)}var sc=At?U:this,ph=Ht?sc[S]:S;return nn=fn.length,He?fn=$p(fn,He):xr&&nn>1&&fn.reverse(),Tt&&rt<nn&&(fn.length=rt),this&&this!==qn&&this instanceof Sr&&(ph=Vr||el(ph)),ph.apply(sc,fn)}return Sr}function $l(S,k){return function(U,K){return av(U,S,k(K),{})}}function Jo(S,k){return function(U,K){var oe;if(U===t&&K===t)return k;if(U!==t&&(oe=U),K!==t){if(oe===t)return K;typeof U=="string"||typeof K=="string"?(U=Oa(U),K=Oa(K)):(U=Bp(U),K=Bp(K)),oe=S(U,K)}return oe}}function Or(S){return xa(function(k){return k=Gn(k,bo(Pt())),wr(function(U){var K=this;return S(k,function(oe){return yt(oe,K,U)})})})}function eh(S,k){k=k===t?" ":Oa(k);var U=k.length;if(U<2)return U?fv(k,S):k;var K=fv(k,Wn(S/Qt(k)));return qu(k)?Ns(so(K),0,S).join(""):K.slice(0,S)}function ko(S,k,U,K){var oe=k&w,be=el(S);function Fe(){for(var He=-1,rt=arguments.length,Ot=-1,Tt=K.length,At=ot(Tt+rt),Ht=this&&this!==qn&&this instanceof Fe?be:S;++Ot<Tt;)At[Ot]=K[Ot];for(;rt--;)At[Ot++]=arguments[++He];return yt(Ht,oe?U:this,At)}return Fe}function Hn(S){return function(k,U,K){return K&&typeof K!="number"&&lo(k,U,K)&&(U=K=t),k=x(k),U===t?(U=k,k=0):U=x(U),K=K===t?k<U?1:-1:x(K),cv(k,U,K,S)}}function Ji(S){return function(k,U){return typeof k=="string"&&typeof U=="string"||(k=I(k),U=I(U)),S(k,U)}}function _v(S,k,U,K,oe,be,Fe,He,rt,Ot){var Tt=k&_,At=Tt?Fe:t,Ht=Tt?t:Fe,nr=Tt?be:t,xr=Tt?t:be;k|=Tt?P:R,k&=~(Tt?R:P),k&p||(k&=-4);var Vr=[S,k,oe,nr,At,xr,Ht,He,rt,Ot],Sr=U.apply(t,Vr);return Nr(S)&&rh(Sr,Vr),Sr.placeholder=K,Tv(Sr,S,k)}function Yl(S){var k=gi[S];return function(U,K){if(U=I(U),K=K==null?0:hn(E(K),292),K&&Df(U)){var oe=(z(U)+"e").split("e"),be=k(oe[0]+"e"+(+oe[1]+K));return oe=(z(be)+"e").split("e"),+(oe[0]+"e"+(+oe[1]-K))}return k(U)}}var Ha=hu&&1/Fh(new hu([,-0]))[1]==re?function(S){return new hu(S)}:Oy;function Hc(S){return function(k){var U=xo(k);return U==tt?ao(k):U==Se?Qg(k):Qd(k,S(k))}}function ea(S,k,U,K,oe,be,Fe,He){var rt=k&b;if(!rt&&typeof S!="function")throw new Jn(a);var Ot=K?K.length:0;if(Ot||(k&=-97,K=oe=t),Fe=Fe===t?Fe:ki(E(Fe),0),He=He===t?He:E(He),Ot-=oe?oe.length:0,k&R){var Tt=K,At=oe;K=oe=t}var Ht=rt?t:gs(S),nr=[S,k,U,K,oe,Tt,At,be,Fe,He];if(Ht&&xu(nr,Ht),S=nr[0],k=nr[1],U=nr[2],K=nr[3],oe=nr[4],He=nr[9]=nr[9]===t?rt?0:S.length:ki(nr[9]-Ot,0),!He&&k&(_|O)&&(k&=-25),!k||k==w)var xr=ps(S,k,U);else k==_||k==O?xr=sd(S,k,He):(k==P||k==(w|P))&&!oe.length?xr=ko(S,k,U,K):xr=Jf.apply(t,nr);var Vr=Ht?dv:rh;return Tv(Vr(xr,nr),S,k)}function $n(S,k,U,K){return S===t||ws(S,$o[U])&&!Ir.call(K,U)?k:S}function Mn(S,k,U,K,oe,be){return Nn(S)&&Nn(k)&&(be.set(k,S),ds(S,k,t,Mn,be),be.delete(k)),S}function ud(S){return Jl(S)?t:S}function ld(S,k,U,K,oe,be){var Fe=U&v,He=S.length,rt=k.length;if(He!=rt&&!(Fe&&rt>He))return!1;var Ot=be.get(S),Tt=be.get(k);if(Ot&&Tt)return Ot==k&&Tt==S;var At=-1,Ht=!0,nr=U&y?new Eo:t;for(be.set(S,k),be.set(k,S);++At<He;){var xr=S[At],Vr=k[At];if(K)var Sr=Fe?K(Vr,xr,At,k,S,be):K(xr,Vr,At,S,k,be);if(Sr!==t){if(Sr)continue;Ht=!1;break}if(nr){if(!ju(k,function(nn,fn){if(!ns(nr,fn)&&(xr===nn||oe(xr,nn,U,K,be)))return nr.push(fn)})){Ht=!1;break}}else if(!(xr===Vr||oe(xr,Vr,U,K,be))){Ht=!1;break}}return be.delete(S),be.delete(k),Ht}function $c(S,k,U,K,oe,be,Fe){switch(U){case Ue:if(S.byteLength!=k.byteLength||S.byteOffset!=k.byteOffset)return!1;S=S.buffer,k=k.buffer;case pe:return!(S.byteLength!=k.byteLength||!be(new Sl(S),new Sl(k)));case Me:case Pe:case ht:return ws(+S,+k);case Oe:return S.name==k.name&&S.message==k.message;case ne:case Te:return S==k+"";case tt:var He=ao;case Se:var rt=K&v;if(He||(He=Fh),S.size!=k.size&&!rt)return!1;var Ot=Fe.get(S);if(Ot)return Ot==k;K|=y,Fe.set(S,k);var Tt=ld(He(S),He(k),K,oe,be,Fe);return Fe.delete(S),Tt;case Ne:if(ya)return ya.call(S)==ya.call(k)}return!1}function th(S,k,U,K,oe,be){var Fe=U&v,He=Yc(S),rt=He.length,Ot=Yc(k),Tt=Ot.length;if(rt!=Tt&&!Fe)return!1;for(var At=rt;At--;){var Ht=He[At];if(!(Fe?Ht in k:Ir.call(k,Ht)))return!1}var nr=be.get(S),xr=be.get(k);if(nr&&xr)return nr==k&&xr==S;var Vr=!0;be.set(S,k),be.set(k,S);for(var Sr=Fe;++At<rt;){Ht=He[At];var nn=S[Ht],fn=k[Ht];if(K)var Pu=Fe?K(fn,nn,Ht,k,S,be):K(nn,fn,Ht,S,k,be);if(!(Pu===t?nn===fn||oe(nn,fn,U,K,be):Pu)){Vr=!1;break}Sr||(Sr=Ht=="constructor")}if(Vr&&!Sr){var Os=S.constructor,Au=k.constructor;Os!=Au&&"constructor"in S&&"constructor"in k&&!(typeof Os=="function"&&Os instanceof Os&&typeof Au=="function"&&Au instanceof Au)&&(Vr=!1)}return be.delete(S),be.delete(k),Vr}function xa(S){return Sv(Ca(S,t,md),S+"")}function Yc(S){return Xh(S,Ct,fd)}function Do(S){return Xh(S,Ee,cn)}var gs=du?function(S){return du.get(S)}:Oy;function cd(S){for(var k=S.name+"",U=Ms[k],K=Ir.call(Ms,k)?U.length:0;K--;){var oe=U[K],be=oe.func;if(be==null||be==S)return oe.name}return k}function Xc(S){var k=Ir.call(ye,"placeholder")?ye:S;return k.placeholder}function Pt(){var S=ye.iteratee||Tu;return S=S===Tu?Va:S,arguments.length?S(arguments[0],arguments[1]):S}function Sa(S,k){var U=S.__data__;return Gi(k)?U[typeof k=="string"?"string":"hash"]:U.map}function Cr(S){for(var k=Ct(S),U=k.length;U--;){var K=k[U],oe=S[K];k[U]=[K,oe,Kc(oe)]}return k}function Eu(S,k){var U=Pf(S,k);return Ul(U)?U:t}function Ta(S){var k=Ir.call(S,Xo),U=S[Xo];try{S[Xo]=t;var K=!0}catch{}var oe=ga.call(S);return K&&(k?S[Xo]=U:delete S[Xo]),oe}var fd=zh?function(S){return S==null?[]:(S=ce(S),oo(zh(S),function(k){return Yo.call(S,k)}))}:c_,cn=zh?function(S){for(var k=[];S;)pi(k,fd(S)),S=Tl(S);return k}:c_,xo=Ki;(fu&&xo(new fu(new ArrayBuffer(1)))!=Ue||za&&xo(new za)!=tt||Wu&&xo(Wu.resolve())!=H||hu&&xo(new hu)!=Se||Ic&&xo(new Ic)!=wt)&&(xo=function(S){var k=Ki(S),U=k==ut?S.constructor:t,K=U?ci(U):"";if(K)switch(K){case Rp:return Ue;case nv:return tt;case kc:return H;case Vh:return Se;case Dc:return wt}return k});function Gp(S,k,U){for(var K=-1,oe=U.length;++K<oe;){var be=U[K],Fe=be.size;switch(be.type){case"drop":S+=Fe;break;case"dropRight":k-=Fe;break;case"take":k=hn(k,S+Fe);break;case"takeRight":S=ki(S,k-Fe);break}}return{start:S,end:k}}function hd(S){var k=S.match(yr);return k?k[1].split(an):[]}function Vp(S,k,U){k=vs(k,S);for(var K=-1,oe=k.length,be=!1;++K<oe;){var Fe=ms(k[K]);if(!(be=S!=null&&U(S,Fe)))break;S=S[Fe]}return be||++K!=oe?be:(oe=S==null?0:S.length,!!oe&&Wv(oe)&&Ou(Fe,oe)&&(Rr(S)||Zl(S)))}function ry(S){var k=S.length,U=new S.constructor(k);return k&&typeof S[0]=="string"&&Ir.call(S,"index")&&(U.index=S.index,U.input=S.input),U}function Wp(S){return typeof S.constructor=="function"&&!Mo(S)?Hu(Tl(S)):{}}function Hp(S,k,U){var K=S.constructor;switch(k){case pe:return Vl(S);case Me:case Pe:return new K(+S);case Ue:return Vc(S,U);case nt:case Je:case at:case kt:case dt:case Dt:case Xt:case fr:case Vt:return gv(S,U);case tt:return new K;case ht:case Te:return new K(S);case ne:return pv(S);case Se:return new K;case Ne:return od(S)}}function wv(S,k){var U=k.length;if(!U)return S;var K=U-1;return k[K]=(U>1?"& ":"")+k[K],k=k.join(U>2?", ":" "),S.replace(zn,`{
/* [wrapped with `+k+`] */
`)}function Ev(S){return Rr(S)||Zl(S)||!!(If&&S&&S[If])}function Ou(S,k){var U=typeof S;return k=k??ee,!!k&&(U=="number"||U!="symbol"&&Na.test(S))&&S>-1&&S%1==0&&S<k}function lo(S,k,U){if(!Nn(U))return!1;var K=typeof k;return(K=="number"?Aa(U)&&Ou(k,U.length):K=="string"&&k in U)?ws(U[k],S):!1}function Ov(S,k){if(Rr(S))return!1;var U=typeof S;return U=="number"||U=="symbol"||U=="boolean"||S==null||Es(S)?!0:Xn.test(S)||!Un.test(S)||k!=null&&S in ce(k)}function Gi(S){var k=typeof S;return k=="string"||k=="number"||k=="symbol"||k=="boolean"?S!=="__proto__":S===null}function Nr(S){var k=cd(S),U=ye[k];if(typeof U!="function"||!(k in kr.prototype))return!1;if(S===U)return!0;var K=gs(U);return!!K&&S===K[0]}function dd(S){return!!Uh&&Uh in S}var ta=Xi?ti:f_;function Mo(S){var k=S&&S.constructor,U=typeof k=="function"&&k.prototype||$o;return S===U}function Kc(S){return S===S&&!Nn(S)}function vd(S,k){return function(U){return U==null?!1:U[S]===k&&(k!==t||S in ce(U))}}function xv(S){var k=zv(S,function(K){return U.size===l&&U.clear(),K}),U=k.cache;return k}function xu(S,k){var U=S[1],K=k[1],oe=U|K,be=oe<(w|b|T),Fe=K==T&&U==_||K==T&&U==A&&S[7].length<=k[8]||K==(T|A)&&k[7].length<=k[8]&&U==_;if(!(be||Fe))return S;K&w&&(S[2]=k[2],oe|=U&w?0:p);var He=k[3];if(He){var rt=S[3];S[3]=rt?yv(rt,He,k[4]):He,S[4]=rt?Vn(S[3],c):k[4]}return He=k[5],He&&(rt=S[5],S[5]=rt?zp(rt,He,k[6]):He,S[6]=rt?Vn(S[5],c):k[6]),He=k[7],He&&(S[7]=He),K&T&&(S[8]=S[8]==null?k[8]:hn(S[8],k[8])),S[9]==null&&(S[9]=k[9]),S[0]=k[0],S[1]=oe,S}function Su(S){var k=[];if(S!=null)for(var U in ce(S))k.push(U);return k}function pd(S){return ga.call(S)}function Ca(S,k,U){return k=ki(k===t?S.length-1:k,0),function(){for(var K=arguments,oe=-1,be=ki(K.length-k,0),Fe=ot(be);++oe<be;)Fe[oe]=K[k+oe];oe=-1;for(var He=ot(k+1);++oe<k;)He[oe]=K[oe];return He[k]=U(Fe),yt(S,this,He)}}function ys(S,k){return k.length<2?S:hs(S,li(k,0,-1))}function $p(S,k){for(var U=S.length,K=hn(k.length,U),oe=qi(S);K--;){var be=k[K];S[K]=Ou(be,U)?oe[be]:t}return S}function Xl(S,k){if(!(k==="constructor"&&typeof S[k]=="function")&&k!="__proto__")return S[k]}var rh=gd(dv),tl=rv||function(S,k){return qn.setTimeout(S,k)},Sv=gd(jp);function Tv(S,k,U){var K=k+"";return Sv(S,wv(K,Zc(hd(K),U)))}function gd(S){var k=0,U=0;return function(){var K=qh(),oe=q-(K-U);if(U=K,oe>0){if(++k>=B)return arguments[0]}else k=0;return S.apply(t,arguments)}}function nh(S,k){var U=-1,K=S.length,oe=K-1;for(k=k===t?K:k;++U<k;){var be=ql(U,oe),Fe=S[be];S[be]=S[U],S[U]=Fe}return S.length=k,S}var Kl=xv(function(S){var k=[];return S.charCodeAt(0)===46&&k.push(""),S.replace(to,function(U,K,oe,be){k.push(oe?be.replace(To,"$1"):K||U)}),k});function ms(S){if(typeof S=="string"||Es(S))return S;var k=S+"";return k=="0"&&1/S==-1/0?"-0":k}function ci(S){if(S!=null){try{return is.call(S)}catch{}try{return S+""}catch{}}return""}function Zc(S,k){return er(Le,function(U){var K="_."+U[0];k&U[1]&&!gn(S,K)&&S.push(K)}),S.sort()}function Cv(S){if(S instanceof kr)return S.clone();var k=new dr(S.__wrapped__,S.__chain__);return k.__actions__=qi(S.__actions__),k.__index__=S.__index__,k.__values__=S.__values__,k}function ra(S,k,U){(U?lo(S,k,U):k===t)?k=1:k=ki(E(k),0);var K=S==null?0:S.length;if(!K||k<1)return[];for(var oe=0,be=0,Fe=ot(Wn(K/k));oe<K;)Fe[be++]=li(S,oe,oe+=k);return Fe}function co(S){for(var k=-1,U=S==null?0:S.length,K=0,oe=[];++k<U;){var be=S[k];be&&(oe[K++]=be)}return oe}function Yp(){var S=arguments.length;if(!S)return[];for(var k=ot(S-1),U=arguments[0],K=S;K--;)k[K-1]=arguments[K];return pi(Rr(U)?qi(U):[U],Di(k,1))}var rl=wr(function(S,k){return Mi(S)?Bc(S,Di(k,1,Mi,!0)):[]}),Pv=wr(function(S,k){var U=G(k);return Mi(U)&&(U=t),Mi(S)?Bc(S,Di(k,1,Mi,!0),Pt(U,2)):[]}),yd=wr(function(S,k){var U=G(k);return Mi(U)&&(U=t),Mi(S)?Bc(S,Di(k,1,Mi,!0),t,U):[]});function ih(S,k,U){var K=S==null?0:S.length;return K?(k=U||k===t?1:E(k),li(S,k<0?0:k,K)):[]}function Xp(S,k,U){var K=S==null?0:S.length;return K?(k=U||k===t?1:E(k),k=K-k,li(S,0,k<0?0:k)):[]}function ny(S,k){return S&&S.length?rd(S,Pt(k,3),!0,!0):[]}function Av(S,k){return S&&S.length?rd(S,Pt(k,3),!0):[]}function $a(S,k,U,K){var oe=S==null?0:S.length;return oe?(U&&typeof U!="number"&&lo(S,k,U)&&(U=0,K=oe),ov(S,k,U,K)):[]}function Rv(S,k,U){var K=S==null?0:S.length;if(!K)return-1;var oe=U==null?0:E(U);return oe<0&&(oe=ki(K+oe,0)),uu(S,Pt(k,3),oe)}function Lo(S,k,U){var K=S==null?0:S.length;if(!K)return-1;var oe=K-1;return U!==t&&(oe=E(U),oe=U<0?ki(K+oe,0):hn(oe,K-1)),uu(S,Pt(k,3),oe,!0)}function md(S){var k=S==null?0:S.length;return k?Di(S,1):[]}function Iv(S){var k=S==null?0:S.length;return k?Di(S,re):[]}function oh(S,k){var U=S==null?0:S.length;return U?(k=k===t?1:E(k),Di(S,k)):[]}function kv(S){for(var k=-1,U=S==null?0:S.length,K={};++k<U;){var oe=S[k];K[oe[0]]=oe[1]}return K}function Dv(S){return S&&S.length?S[0]:t}function iy(S,k,U){var K=S==null?0:S.length;if(!K)return-1;var oe=U==null?0:E(U);return oe<0&&(oe=ki(K+oe,0)),Ps(S,k,oe)}function ei(S){var k=S==null?0:S.length;return k?li(S,0,-1):[]}var Kp=wr(function(S){var k=Gn(S,Gc);return k.length&&k[0]===S[0]?yu(k):[]}),Mv=wr(function(S){var k=G(S),U=Gn(S,Gc);return k===G(U)?k=t:U.pop(),U.length&&U[0]===S[0]?yu(U,Pt(k,2)):[]}),C=wr(function(S){var k=G(S),U=Gn(S,Gc);return k=typeof k=="function"?k:t,k&&U.pop(),U.length&&U[0]===S[0]?yu(U,t,k):[]});function L(S,k){return S==null?"":Mf.call(S,k)}function G(S){var k=S==null?0:S.length;return k?S[k-1]:t}function Q(S,k,U){var K=S==null?0:S.length;if(!K)return-1;var oe=K;return U!==t&&(oe=E(U),oe=oe<0?ki(K+oe,0):hn(oe,K-1)),k===k?Cp(S,k,oe):uu(S,Bu,oe,!0)}function ae(S,k){return S&&S.length?Hf(S,E(k)):t}var _e=wr(Be);function Be(S,k){return S&&S.length&&k&&k.length?_u(S,k):S}function $e(S,k,U){return S&&S.length&&k&&k.length?_u(S,k,Pt(U,2)):S}function ct(S,k,U){return S&&S.length&&k&&k.length?_u(S,k,t,U):S}var Et=xa(function(S,k){var U=S==null?0:S.length,K=zf(S,k);return lv(S,Gn(k,function(oe){return Ou(oe,U)?+oe:oe}).sort(ad)),K});function _t(S,k){var U=[];if(!(S&&S.length))return U;var K=-1,oe=[],be=S.length;for(k=Pt(k,3);++K<be;){var Fe=S[K];k(Fe,K,S)&&(U.push(Fe),oe.push(K))}return lv(S,oe),U}function Rt(S){return S==null?S:Vu.call(S)}function Yt(S,k,U){var K=S==null?0:S.length;return K?(U&&typeof U!="number"&&lo(S,k,U)?(k=0,U=K):(k=k==null?0:E(k),U=U===t?K:E(U)),li(S,k,U)):[]}function Kt(S,k){return Yf(S,k)}function or(S,k,U){return ed(S,k,Pt(U,2))}function St(S,k){var U=S==null?0:S.length;if(U){var K=Yf(S,k);if(K<U&&ws(S[K],k))return K}return-1}function Lt(S,k){return Yf(S,k,!0)}function cr(S,k,U){return ed(S,k,Pt(U,2),!0)}function Ft(S,k){var U=S==null?0:S.length;if(U){var K=Yf(S,k,!0)-1;if(ws(S[K],k))return K}return-1}function br(S){return S&&S.length?Xf(S):[]}function mr(S,k){return S&&S.length?Xf(S,Pt(k,2)):[]}function Jr(S){var k=S==null?0:S.length;return k?li(S,1,k):[]}function rr(S,k,U){return S&&S.length?(k=U||k===t?1:E(k),li(S,0,k<0?0:k)):[]}function ur(S,k,U){var K=S==null?0:S.length;return K?(k=U||k===t?1:E(k),k=K-k,li(S,k<0?0:k,K)):[]}function Si(S,k){return S&&S.length?rd(S,Pt(k,3),!1,!0):[]}function Yn(S,k){return S&&S.length?rd(S,Pt(k,3)):[]}var No=wr(function(S){return Zu(Di(S,1,Mi,!0))}),Ln=wr(function(S){var k=G(S);return Mi(k)&&(k=t),Zu(Di(S,1,Mi,!0),Pt(k,2))}),So=wr(function(S){var k=G(S);return k=typeof k=="function"?k:t,Zu(Di(S,1,Mi,!0),t,k)});function Fs(S){return S&&S.length?Zu(S):[]}function Bs(S,k){return S&&S.length?Zu(S,Pt(k,2)):[]}function bs(S,k){return k=typeof k=="function"?k:t,S&&S.length?Zu(S,t,k):[]}function _s(S){if(!(S&&S.length))return[];var k=0;return S=oo(S,function(U){if(Mi(U))return k=ki(U.length,k),!0}),Sf(k,function(U){return Gn(S,As(U))})}function Us(S,k){if(!(S&&S.length))return[];var U=_s(S);return k==null?U:Gn(U,function(K){return yt(k,t,K)})}var Lv=wr(function(S,k){return Mi(S)?Bc(S,k):[]}),ah=wr(function(S){return nd(oo(S,Mi))}),Nv=wr(function(S){var k=G(S);return Mi(k)&&(k=t),nd(oo(S,Mi),Pt(k,2))}),zs=wr(function(S){var k=G(S);return k=typeof k=="function"?k:t,nd(oo(S,Mi),t,k)}),Qc=wr(_s);function jv(S,k){return Kf(S||[],k||[],Ls)}function sh(S,k){return Kf(S||[],k||[],Gl)}var uh=wr(function(S){var k=S.length,U=k>1?S[k-1]:t;return U=typeof U=="function"?(S.pop(),U):t,Us(S,U)});function Pa(S){var k=ye(S);return k.__chain__=!0,k}function Ub(S,k){return k(S),S}function Ar(S,k){return k(S)}var Om=xa(function(S){var k=S.length,U=k?S[0]:0,K=this.__wrapped__,oe=function(be){return zf(be,S)};return k>1||this.__actions__.length||!(K instanceof kr)||!Ou(U)?this.thru(oe):(K=K.slice(U,+U+(k?1:0)),K.__actions__.push({func:Ar,args:[oe],thisArg:t}),new dr(K,this.__chain__).thru(function(be){return k&&!be.length&&be.push(t),be}))});function Zp(){return Pa(this)}function oy(){return new dr(this.value(),this.__chain__)}function bd(){this.__values__===t&&(this.__values__=m(this.value()));var S=this.__index__>=this.__values__.length,k=S?t:this.__values__[this.__index__++];return{done:S,value:k}}function xm(){return this}function Sm(S){for(var k,U=this;U instanceof $u;){var K=Cv(U);K.__index__=0,K.__values__=t,k?oe.__wrapped__=K:k=K;var oe=K;U=U.__wrapped__}return oe.__wrapped__=S,k}function Qp(){var S=this.__wrapped__;if(S instanceof kr){var k=S;return this.__actions__.length&&(k=new kr(this)),k=k.reverse(),k.__actions__.push({func:Ar,args:[Rt],thisArg:t}),new dr(k,this.__chain__)}return this.thru(Rt)}function Fv(){return Qu(this.__wrapped__,this.__actions__)}var zb=Qf(function(S,k,U){Ir.call(S,U)?++S[U]:us(S,U,1)});function Bv(S,k,U){var K=Rr(S)?Ii:Nl;return U&&lo(S,k,U)&&(k=t),K(S,Pt(k,3))}function Jp(S,k){var U=Rr(S)?oo:fs;return U(S,Pt(k,3))}var qb=bv(Rv),eg=bv(Lo);function Gb(S,k){return Di(rg(S,k),1)}function ay(S,k){return Di(rg(S,k),re)}function Tm(S,k,U){return U=U===t?1:E(U),Di(rg(S,k),U)}function Cm(S,k){var U=Rr(S)?er:cs;return U(S,Pt(k,3))}function Pm(S,k){var U=Rr(S)?Zr:Yh;return U(S,Pt(k,3))}var tg=Qf(function(S,k,U){Ir.call(S,U)?S[U].push(k):us(S,U,[k])});function Am(S,k,U,K){S=Aa(S)?S:mn(S),U=U&&!K?E(U):0;var oe=S.length;return U<0&&(U=ki(oe+U,0)),ag(S)?U<=oe&&S.indexOf(k,U)>-1:!!oe&&Ps(S,k,U)>-1}var Vb=wr(function(S,k,U){var K=-1,oe=typeof k=="function",be=Aa(S)?ot(S.length):[];return cs(S,function(Fe){be[++K]=oe?yt(k,Fe,U):jl(Fe,k,U)}),be}),Wb=Qf(function(S,k,U){us(S,U,k)});function rg(S,k){var U=Rr(S)?Gn:Zh;return U(S,Pt(k,3))}function Rm(S,k,U,K){return S==null?[]:(Rr(k)||(k=k==null?[]:[k]),U=K?t:U,Rr(U)||(U=U==null?[]:[U]),Ku(S,k,U))}var Hb=Qf(function(S,k,U){S[U?0:1].push(k)},function(){return[[],[]]});function $b(S,k,U){var K=Rr(S)?Tc:Pc,oe=arguments.length<3;return K(S,Pt(k,4),U,oe,cs)}function Yb(S,k,U){var K=Rr(S)?Ep:Pc,oe=arguments.length<3;return K(S,Pt(k,4),U,oe,Yh)}function Xb(S,k){var U=Rr(S)?oo:fs;return U(S,qv(Pt(k,3)))}function Kb(S){var k=Rr(S)?Io:hv;return k(S)}function Im(S,k,U){(U?lo(S,k,U):k===t)?k=1:k=E(k);var K=Rr(S)?as:Np;return K(S,k)}function km(S){var k=Rr(S)?Uf:$f;return k(S)}function Dm(S){if(S==null)return 0;if(Aa(S))return ag(S)?Qt(S):S.length;var k=xo(S);return k==tt||k==Se?S.size:Wf(S).length}function sy(S,k,U){var K=Rr(S)?ju:Fp;return U&&lo(S,k,U)&&(k=t),K(S,Pt(k,3))}var uy=wr(function(S,k){if(S==null)return[];var U=k.length;return U>1&&lo(S,k[0],k[1])?k=[]:U>2&&lo(k[0],k[1],k[2])&&(k=[k[0]]),Ku(S,Di(k,1),[])}),Jc=kf||function(){return qn.Date.now()};function ly(S,k){if(typeof k!="function")throw new Jn(a);return S=E(S),function(){if(--S<1)return k.apply(this,arguments)}}function cy(S,k,U){return k=U?t:k,k=S&&k==null?S.length:k,ea(S,T,t,t,t,t,k)}function ng(S,k){var U;if(typeof k!="function")throw new Jn(a);return S=E(S),function(){return--S>0&&(U=k.apply(this,arguments)),S<=1&&(k=t),U}}var nl=wr(function(S,k,U){var K=w;if(U.length){var oe=Vn(U,Xc(nl));K|=P}return ea(S,K,k,U,oe)}),_d=wr(function(S,k,U){var K=w|b;if(U.length){var oe=Vn(U,Xc(_d));K|=P}return ea(k,K,S,U,oe)});function fy(S,k,U){k=U?t:k;var K=ea(S,_,t,t,t,t,t,k);return K.placeholder=fy.placeholder,K}function hy(S,k,U){k=U?t:k;var K=ea(S,O,t,t,t,t,t,k);return K.placeholder=hy.placeholder,K}function Mm(S,k,U){var K,oe,be,Fe,He,rt,Ot=0,Tt=!1,At=!1,Ht=!0;if(typeof S!="function")throw new Jn(a);k=I(k)||0,Nn(U)&&(Tt=!!U.leading,At="maxWait"in U,be=At?ki(I(U.maxWait)||0,k):be,Ht="trailing"in U?!!U.trailing:Ht);function nr(fo){var sc=K,ph=oe;return K=oe=t,Ot=fo,Fe=S.apply(ph,sc),Fe}function xr(fo){return Ot=fo,He=tl(nn,k),Tt?nr(fo):Fe}function Vr(fo){var sc=fo-rt,ph=fo-Ot,LT=k-sc;return At?hn(LT,be-ph):LT}function Sr(fo){var sc=fo-rt,ph=fo-Ot;return rt===t||sc>=k||sc<0||At&&ph>=be}function nn(){var fo=Jc();if(Sr(fo))return fn(fo);He=tl(nn,Vr(fo))}function fn(fo){return He=t,Ht&&K?nr(fo):(K=oe=t,Fe)}function Pu(){He!==t&&Up(He),Ot=0,K=rt=oe=He=t}function Os(){return He===t?Fe:fn(Jc())}function Au(){var fo=Jc(),sc=Sr(fo);if(K=arguments,oe=this,rt=fo,sc){if(He===t)return xr(rt);if(At)return Up(He),He=tl(nn,k),nr(rt)}return He===t&&(He=tl(nn,k)),Fe}return Au.cancel=Pu,Au.flush=Os,Au}var Zb=wr(function(S,k){return Zo(S,1,k)}),ig=wr(function(S,k,U){return Zo(S,I(k)||0,U)});function Uv(S){return ea(S,M)}function zv(S,k){if(typeof S!="function"||k!=null&&typeof k!="function")throw new Jn(a);var U=function(){var K=arguments,oe=k?k.apply(this,K):K[0],be=U.cache;if(be.has(oe))return be.get(oe);var Fe=S.apply(this,K);return U.cache=be.set(oe,Fe)||be,Fe};return U.cache=new(zv.Cache||wo),U}zv.Cache=wo;function qv(S){if(typeof S!="function")throw new Jn(a);return function(){var k=arguments;switch(k.length){case 0:return!S.call(this);case 1:return!S.call(this,k[0]);case 2:return!S.call(this,k[0],k[1]);case 3:return!S.call(this,k[0],k[1],k[2])}return!S.apply(this,k)}}function Lm(S){return ng(2,S)}var dy=id(function(S,k){k=k.length==1&&Rr(k[0])?Gn(k[0],bo(Pt())):Gn(Di(k,1),bo(Pt()));var U=k.length;return wr(function(K){for(var oe=-1,be=hn(K.length,U);++oe<be;)K[oe]=k[oe].call(this,K[oe]);return yt(S,this,K)})}),Gv=wr(function(S,k){var U=Vn(k,Xc(Gv));return ea(S,P,t,k,U)}),vy=wr(function(S,k){var U=Vn(k,Xc(vy));return ea(S,R,t,k,U)}),Qb=xa(function(S,k){return ea(S,A,t,t,t,k)});function Jb(S,k){if(typeof S!="function")throw new Jn(a);return k=k===t?k:E(k),wr(S,k)}function py(S,k){if(typeof S!="function")throw new Jn(a);return k=k==null?0:ki(E(k),0),wr(function(U){var K=U[k],oe=Ns(U,0,k);return K&&pi(oe,K),yt(S,this,oe)})}function e_(S,k,U){var K=!0,oe=!0;if(typeof S!="function")throw new Jn(a);return Nn(U)&&(K="leading"in U?!!U.leading:K,oe="trailing"in U?!!U.trailing:oe),Mm(S,k,{leading:K,maxWait:k,trailing:oe})}function t_(S){return cy(S,1)}function r_(S,k){return Gv(Qi(k),S)}function jo(){if(!arguments.length)return[];var S=arguments[0];return Rr(S)?S:[S]}function gy(S){return Ko(S,d)}function n_(S,k){return k=typeof k=="function"?k:t,Ko(S,d,k)}function Nm(S){return Ko(S,f|d)}function yy(S,k){return k=typeof k=="function"?k:t,Ko(S,f|d,k)}function my(S,k){return k==null||qf(S,k,Ct(k))}function ws(S,k){return S===k||S!==S&&k!==k}var i_=Ji(Xu),lh=Ji(function(S,k){return S>=k}),Zl=Rn(function(){return arguments}())?Rn:function(S){return Ti(S)&&Ir.call(S,"callee")&&!Yo.call(S,"callee")},Rr=ot.isArray,o_=Zn?bo(Zn):Kh;function Aa(S){return S!=null&&Wv(S.length)&&!ti(S)}function Mi(S){return Ti(S)&&Aa(S)}function jm(S){return S===!0||S===!1||Ti(S)&&Ki(S)==Me}var Ql=Ds||f_,a_=Fa?bo(Fa):Fl;function Vv(S){return Ti(S)&&S.nodeType===1&&!Jl(S)}function s_(S){if(S==null)return!0;if(Aa(S)&&(Rr(S)||typeof S=="string"||typeof S.splice=="function"||Ql(S)||ch(S)||Zl(S)))return!S.length;var k=xo(S);if(k==tt||k==Se)return!S.size;if(Mo(S))return!Wf(S).length;for(var U in S)if(Ir.call(S,U))return!1;return!0}function by(S,k){return Bl(S,k)}function Fm(S,k,U){U=typeof U=="function"?U:t;var K=U?U(S,k):t;return K===t?Bl(S,k,t,U):!!K}function og(S){if(!Ti(S))return!1;var k=Ki(S);return k==Oe||k==de||typeof S.message=="string"&&typeof S.name=="string"&&!Jl(S)}function Bm(S){return typeof S=="number"&&Df(S)}function ti(S){if(!Nn(S))return!1;var k=Ki(S);return k==Ae||k==Ve||k==Ge||k==X}function Um(S){return typeof S=="number"&&S==E(S)}function Wv(S){return typeof S=="number"&&S>-1&&S%1==0&&S<=ee}function Nn(S){var k=typeof S;return S!=null&&(k=="object"||k=="function")}function Ti(S){return S!=null&&typeof S=="object"}var Bt=Ba?bo(Ba):Oo;function wd(S,k){return S===k||zi(S,k,Cr(k))}function Ya(S,k,U){return U=typeof U=="function"?U:t,zi(S,k,Cr(k),U)}function Hv(S){return na(S)&&S!=+S}function zm(S){if(ta(S))throw new pr(o);return Ul(S)}function sn(S){return S===null}function On(S){return S==null}function na(S){return typeof S=="number"||Ti(S)&&Ki(S)==ht}function Jl(S){if(!Ti(S)||Ki(S)!=ut)return!1;var k=Tl(S);if(k===null)return!0;var U=Ir.call(k,"constructor")&&k.constructor;return typeof U=="function"&&U instanceof U&&is.call(U)==ev}var Ra=pa?bo(pa):ty;function qm(S){return Um(S)&&S>=-9007199254740991&&S<=ee}var _y=ft?bo(ft):mu;function ag(S){return typeof S=="string"||!Rr(S)&&Ti(S)&&Ki(S)==Te}function Es(S){return typeof S=="symbol"||Ti(S)&&Ki(S)==Ne}var ch=gt?bo(gt):Mp;function wy(S){return S===t}function Ey(S){return Ti(S)&&xo(S)==wt}function u_(S){return Ti(S)&&Ki(S)==lt}var l_=Ji(bu),g=Ji(function(S,k){return S<=k});function m(S){if(!S)return[];if(Aa(S))return ag(S)?so(S):qi(S);if(ks&&S[ks])return Ao(S[ks]());var k=xo(S),U=k==tt?ao:k==Se?Fh:mn;return U(S)}function x(S){if(!S)return S===0?S:0;if(S=I(S),S===re||S===-1/0){var k=S<0?-1:1;return k*fe}return S===S?S:0}function E(S){var k=x(S),U=k%1;return k===k?U?k-U:k:0}function D(S){return S?ls(E(S),0,se):0}function I(S){if(typeof S=="number")return S;if(Es(S))return he;if(Nn(S)){var k=typeof S.valueOf=="function"?S.valueOf():S;S=Nn(k)?k+"":k}if(typeof S!="string")return S===0?S:+S;S=Tf(S);var U=Qs.test(S);return U||vl.test(S)?Mh(S.slice(2),U?2:8):La.test(S)?he:+S}function F(S){return Wa(S,Ee(S))}function V(S){return S?ls(E(S),-9007199254740991,ee):S===0?S:0}function z(S){return S==null?"":Oa(S)}var $=js(function(S,k){if(Mo(k)||Aa(k)){Wa(k,Ct(k),S);return}for(var U in k)Ir.call(k,U)&&Ls(S,U,k[U])}),Y=js(function(S,k){Wa(k,Ee(k),S)}),Z=js(function(S,k,U,K){Wa(k,Ee(k),S,K)}),ie=js(function(S,k,U,K){Wa(k,Ct(k),S,K)}),le=xa(zf);function ve(S,k){var U=Hu(S);return k==null?U:Ll(U,k)}var ue=wr(function(S,k){S=ce(S);var U=-1,K=k.length,oe=K>2?k[2]:t;for(oe&&lo(k[0],k[1],oe)&&(K=1);++U<K;)for(var be=k[U],Fe=Ee(be),He=-1,rt=Fe.length;++He<rt;){var Ot=Fe[He],Tt=S[Ot];(Tt===t||ws(Tt,$o[Ot])&&!Ir.call(S,Ot))&&(S[Ot]=be[Ot])}return S}),ge=wr(function(S){return S.push(t,Mn),yt(Ze,t,S)});function Ce(S,k){return Cc(S,Pt(k,3),Qo)}function Re(S,k){return Cc(S,Pt(k,3),Ea)}function je(S,k){return S==null?S:Uc(S,Pt(k,3),Ee)}function ke(S,k){return S==null?S:zc(S,Pt(k,3),Ee)}function Ye(S,k){return S&&Qo(S,Pt(k,3))}function ze(S,k){return S&&Ea(S,Pt(k,3))}function Ke(S){return S==null?[]:qc(S,Ct(S))}function Xe(S){return S==null?[]:qc(S,Ee(S))}function We(S,k,U){var K=S==null?t:hs(S,k);return K===t?U:K}function it(S,k){return S!=null&&Vp(S,k,gr)}function mt(S,k){return S!=null&&Vp(S,k,gu)}var It=$l(function(S,k,U){k!=null&&typeof k.toString!="function"&&(k=ga.call(k)),S[k]=U},mi(si)),bt=$l(function(S,k,U){k!=null&&typeof k.toString!="function"&&(k=ga.call(k)),Ir.call(S,k)?S[k].push(U):S[k]=[U]},Pt),jt=wr(jl);function Ct(S){return Aa(S)?Hh(S):Wf(S)}function Ee(S){return Aa(S)?Hh(S,!0):Lp(S)}function we(S,k){var U={};return k=Pt(k,3),Qo(S,function(K,oe,be){us(U,k(K,oe,be),K)}),U}function xe(S,k){var U={};return k=Pt(k,3),Qo(S,function(K,oe,be){us(U,oe,k(K,oe,be))}),U}var st=js(function(S,k,U){ds(S,k,U)}),Ze=js(function(S,k,U,K){ds(S,k,U,K)}),vt=xa(function(S,k){var U={};if(S==null)return U;var K=!1;k=Gn(k,function(be){return be=vs(be,S),K||(K=be.length>1),be}),Wa(S,Do(S),U),K&&(U=Ko(U,f|h|d,ud));for(var oe=k.length;oe--;)wu(U,k[oe]);return U});function Mt(S,k){return zt(S,qv(Pt(k)))}var Ut=xa(function(S,k){return S==null?{}:uv(S,k)});function zt(S,k){if(S==null)return{};var U=Gn(Do(S),function(K){return[K]});return k=Pt(k),Jh(S,U,function(K,oe){return k(K,oe[0])})}function Er(S,k,U){k=vs(k,S);var K=-1,oe=k.length;for(oe||(oe=1,S=t);++K<oe;){var be=S==null?t:S[ms(k[K])];be===t&&(K=oe,be=U),S=ti(be)?be.call(S):be}return S}function Tr(S,k,U){return S==null?S:Gl(S,k,U)}function Ur(S,k,U,K){return K=typeof K=="function"?K:t,S==null?S:Gl(S,k,U,K)}var xn=Hc(Ct),jn=Hc(Ee);function yn(S,k,U){var K=Rr(S),oe=K||Ql(S)||ch(S);if(k=Pt(k,4),U==null){var be=S&&S.constructor;oe?U=K?new be:[]:Nn(S)?U=ti(be)?Hu(Tl(S)):{}:U={}}return(oe?er:Qo)(S,function(Fe,He,rt){return k(U,Fe,He,rt)}),U}function Yr(S,k){return S==null?!0:wu(S,k)}function zr(S,k,U){return S==null?S:td(S,k,Qi(U))}function un(S,k,U,K){return K=typeof K=="function"?K:t,S==null?S:td(S,k,Qi(U),K)}function mn(S){return S==null?[]:zu(S,Ct(S))}function ri(S){return S==null?[]:zu(S,Ee(S))}function tn(S,k,U){return U===t&&(U=k,k=t),U!==t&&(U=I(U),U=U===U?U:0),k!==t&&(k=I(k),k=k===k?k:0),ls(I(S),k,U)}function In(S,k,U){return k=x(k),U===t?(U=k,k=0):U=x(U),S=I(S),Vf(S,k,U)}function ni(S,k,U){if(U&&typeof U!="boolean"&&lo(S,k,U)&&(k=U=t),U===t&&(typeof k=="boolean"?(U=k,k=t):typeof S=="boolean"&&(U=S,S=t)),S===t&&k===t?(S=0,k=1):(S=x(S),k===t?(k=S,S=0):k=x(k)),S>k){var K=S;S=k,k=K}if(U||S%1||k%1){var oe=Gh();return hn(S+oe*(k-S+ts("1e-"+((oe+"").length-1))),k)}return ql(S,k)}var ii=Hl(function(S,k,U){return k=k.toLowerCase(),S+(U?fi(k):k)});function fi(S){return nc(z(S).toLowerCase())}function rn(S){return S=z(S),S&&S.replace(vi,Po).replace(es,"")}function yi(S,k,U){S=z(S),k=Oa(k);var K=S.length;U=U===t?K:ls(E(U),0,K);var oe=U;return U-=k.length,U>=0&&S.slice(U,oe)==k}function bn(S){return S=z(S),S&&vn.test(S)?S.replace(on,Nh):S}function Fo(S){return S=z(S),S&&ro.test(S)?S.replace(Ei,"\\$&"):S}var ia=Hl(function(S,k,U){return S+(U?"-":"")+k.toLowerCase()}),il=Hl(function(S,k,U){return S+(U?" ":"")+k.toLowerCase()}),ec=Wc("toLowerCase");function ol(S,k,U){S=z(S),k=E(k);var K=k?Qt(S):0;if(!k||K>=k)return S;var oe=(k-K)/2;return eh(Pl(oe),U)+S+eh(Wn(oe),U)}function Xa(S,k,U){S=z(S),k=E(k);var K=k?Qt(S):0;return k&&K<k?S+eh(k-K,U):S}function oi(S,k,U){S=z(S),k=E(k);var K=k?Qt(S):0;return k&&K<k?eh(k-K,U)+S:S}function Sn(S,k,U){return U||k==null?k=0:k&&(k=+k),Al(z(S).replace(Fi,""),k||0)}function Vi(S,k,U){return(U?lo(S,k,U):k===t)?k=1:k=E(k),fv(z(S),k)}function oa(){var S=arguments,k=z(S[0]);return S.length<3?k:k.replace(S[1],S[2])}var Bo=Hl(function(S,k,U){return S+(U?"_":"")+k.toLowerCase()});function qs(S,k,U){return U&&typeof U!="number"&&lo(S,k,U)&&(k=U=t),U=U===t?se:U>>>0,U?(S=z(S),S&&(typeof k=="string"||k!=null&&!Ra(k))&&(k=Oa(k),!k&&qu(S))?Ns(so(S),0,U):S.split(k,U)):[]}var hi=Hl(function(S,k,U){return S+(U?" ":"")+nc(k)});function ef(S,k,U){return S=z(S),U=U==null?0:ls(E(U),0,S.length),k=Oa(k),S.slice(U,U+k.length)==k}function fh(S,k,U){var K=ye.templateSettings;U&&lo(S,k,U)&&(k=t),S=z(S),k=Z({},k,K,$n);var oe=Z({},k.imports,K.imports,$n),be=Ct(oe),Fe=zu(oe,be),He,rt,Ot=0,Tt=k.interpolate||da,At="__p += '",Ht=Rs((k.escape||da).source+"|"+Tt.source+"|"+(Tt===Cn?Zs:da).source+"|"+(k.evaluate||da).source+"|$","g"),nr="//# sourceURL="+(Ir.call(k,"sourceURL")?(k.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++_l+"]")+`
`;S.replace(Ht,function(Sr,nn,fn,Pu,Os,Au){return fn||(fn=Pu),At+=S.slice(Ot,Au).replace(po,jh),nn&&(He=!0,At+=`' +
__e(`+nn+`) +
'`),Os&&(rt=!0,At+=`';
`+Os+`;
__p += '`),fn&&(At+=`' +
((__t = (`+fn+`)) == null ? '' : __t) +
'`),Ot=Au+Sr.length,Sr}),At+=`';
`;var xr=Ir.call(k,"variable")&&k.variable;if(!xr)At=`with (obj) {
`+At+`
}
`;else if(Oi.test(xr))throw new pr(s);At=(rt?At.replace(lr,""):At).replace(ir,"$1").replace(Jt,"$1;"),At="function("+(xr||"obj")+`) {
`+(xr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(He?", __e = _.escape":"")+(rt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+At+`return __p
}`;var Vr=nf(function(){return Gr(be,nr+"return "+At).apply(t,Fe)});if(Vr.source=At,og(Vr))throw Vr;return Vr}function tc(S){return z(S).toLowerCase()}function $v(S){return z(S).toUpperCase()}function tf(S,k,U){if(S=z(S),S&&(U||k===t))return Tf(S);if(!S||!(k=Oa(k)))return S;var K=so(S),oe=so(k),be=Cf(K,oe),Fe=xp(K,oe)+1;return Ns(K,be,Fe).join("")}function rc(S,k,U){if(S=z(S),S&&(U||k===t))return S.slice(0,Qn(S)+1);if(!S||!(k=Oa(k)))return S;var K=so(S),oe=xp(K,so(k))+1;return Ns(K,0,oe).join("")}function rf(S,k,U){if(S=z(S),S&&(U||k===t))return S.replace(Fi,"");if(!S||!(k=Oa(k)))return S;var K=so(S),oe=Cf(K,so(k));return Ns(K,oe).join("")}function Gs(S,k){var U=N,K=j;if(Nn(k)){var oe="separator"in k?k.separator:oe;U="length"in k?E(k.length):U,K="omission"in k?Oa(k.omission):K}S=z(S);var be=S.length;if(qu(S)){var Fe=so(S);be=Fe.length}if(U>=be)return S;var He=U-Qt(K);if(He<1)return K;var rt=Fe?Ns(Fe,0,He).join(""):S.slice(0,He);if(oe===t)return rt+K;if(Fe&&(He+=rt.length-He),Ra(oe)){if(S.slice(He).search(oe)){var Ot,Tt=rt;for(oe.global||(oe=Rs(oe.source,z(vo.exec(oe))+"g")),oe.lastIndex=0;Ot=oe.exec(Tt);)var At=Ot.index;rt=rt.slice(0,At===t?He:At)}}else if(S.indexOf(Oa(oe),He)!=He){var Ht=rt.lastIndexOf(oe);Ht>-1&&(rt=rt.slice(0,Ht))}return rt+K}function Vs(S){return S=z(S),S&&Pi.test(S)?S.replace(Wr,El):S}var hh=Hl(function(S,k,U){return S+(U?" ":"")+k.toUpperCase()}),nc=Wc("toUpperCase");function dh(S,k,U){return S=z(S),k=U?t:k,k===t?Jd(S)?Af(S):Qr(S):S.match(k)||[]}var nf=wr(function(S,k){try{return yt(S,t,k)}catch(U){return og(U)?U:new pr(U)}}),Ed=xa(function(S,k){return er(k,function(U){U=ms(U),us(S,U,nl(S[U],S))}),S});function vh(S){var k=S==null?0:S.length,U=Pt();return S=k?Gn(S,function(K){if(typeof K[1]!="function")throw new Jn(a);return[U(K[0]),K[1]]}):[],wr(function(K){for(var oe=-1;++oe<k;){var be=S[oe];if(yt(be[0],this,K))return yt(be[1],this,K)}})}function ai(S){return $h(Ko(S,f))}function mi(S){return function(){return S}}function Od(S,k){return S==null||S!==S?k:S}var ic=uo(),Wi=uo(!0);function si(S){return S}function Tu(S){return Va(typeof S=="function"?S:Ko(S,f))}function al(S){return zl(Ko(S,f))}function oc(S,k){return Qh(S,Ko(k,f))}var xd=wr(function(S,k){return function(U){return jl(U,S,k)}}),ac=wr(function(S,k){return function(U){return jl(S,U,k)}});function of(S,k,U){var K=Ct(k),oe=qc(k,K);U==null&&!(Nn(k)&&(oe.length||!K.length))&&(U=k,k=S,S=this,oe=qc(k,Ct(k)));var be=!(Nn(U)&&"chain"in U)||!!U.chain,Fe=ti(S);return er(oe,function(He){var rt=k[He];S[He]=rt,Fe&&(S.prototype[He]=function(){var Ot=this.__chain__;if(be||Ot){var Tt=S(this.__wrapped__),At=Tt.__actions__=qi(this.__actions__);return At.push({func:rt,args:arguments,thisArg:S}),Tt.__chain__=Ot,Tt}return rt.apply(S,pi([this.value()],arguments))})}),S}function Cu(){return qn._===this&&(qn._=tv),this}function Oy(){}function gN(S){return S=E(S),wr(function(k){return Hf(k,S)})}var yN=Or(Gn),mN=Or(Ii),bN=Or(ju);function MT(S){return Ov(S)?As(ms(S)):xi(S)}function _N(S){return function(k){return S==null?t:hs(S,k)}}var wN=Hn(),EN=Hn(!0);function c_(){return[]}function f_(){return!1}function ON(){return{}}function xN(){return""}function SN(){return!0}function TN(S,k){if(S=E(S),S<1||S>ee)return[];var U=se,K=hn(S,se);k=Pt(k),S-=se;for(var oe=Sf(K,k);++U<S;)k(U);return oe}function CN(S){return Rr(S)?Gn(S,ms):Es(S)?[S]:qi(Kl(z(S)))}function PN(S){var k=++Pp;return z(S)+k}var AN=Jo(function(S,k){return S+k},0),RN=Yl("ceil"),IN=Jo(function(S,k){return S/k},1),kN=Yl("floor");function DN(S){return S&&S.length?Gf(S,si,Xu):t}function MN(S,k){return S&&S.length?Gf(S,Pt(k,2),Xu):t}function LN(S){return xf(S,si)}function NN(S,k){return xf(S,Pt(k,2))}function jN(S){return S&&S.length?Gf(S,si,bu):t}function FN(S,k){return S&&S.length?Gf(S,Pt(k,2),bu):t}var BN=Jo(function(S,k){return S*k},1),UN=Yl("round"),zN=Jo(function(S,k){return S-k},0);function qN(S){return S&&S.length?Uu(S,si):0}function GN(S,k){return S&&S.length?Uu(S,Pt(k,2)):0}return ye.after=ly,ye.ary=cy,ye.assign=$,ye.assignIn=Y,ye.assignInWith=Z,ye.assignWith=ie,ye.at=le,ye.before=ng,ye.bind=nl,ye.bindAll=Ed,ye.bindKey=_d,ye.castArray=jo,ye.chain=Pa,ye.chunk=ra,ye.compact=co,ye.concat=Yp,ye.cond=vh,ye.conforms=ai,ye.constant=mi,ye.countBy=zb,ye.create=ve,ye.curry=fy,ye.curryRight=hy,ye.debounce=Mm,ye.defaults=ue,ye.defaultsDeep=ge,ye.defer=Zb,ye.delay=ig,ye.difference=rl,ye.differenceBy=Pv,ye.differenceWith=yd,ye.drop=ih,ye.dropRight=Xp,ye.dropRightWhile=ny,ye.dropWhile=Av,ye.fill=$a,ye.filter=Jp,ye.flatMap=Gb,ye.flatMapDeep=ay,ye.flatMapDepth=Tm,ye.flatten=md,ye.flattenDeep=Iv,ye.flattenDepth=oh,ye.flip=Uv,ye.flow=ic,ye.flowRight=Wi,ye.fromPairs=kv,ye.functions=Ke,ye.functionsIn=Xe,ye.groupBy=tg,ye.initial=ei,ye.intersection=Kp,ye.intersectionBy=Mv,ye.intersectionWith=C,ye.invert=It,ye.invertBy=bt,ye.invokeMap=Vb,ye.iteratee=Tu,ye.keyBy=Wb,ye.keys=Ct,ye.keysIn=Ee,ye.map=rg,ye.mapKeys=we,ye.mapValues=xe,ye.matches=al,ye.matchesProperty=oc,ye.memoize=zv,ye.merge=st,ye.mergeWith=Ze,ye.method=xd,ye.methodOf=ac,ye.mixin=of,ye.negate=qv,ye.nthArg=gN,ye.omit=vt,ye.omitBy=Mt,ye.once=Lm,ye.orderBy=Rm,ye.over=yN,ye.overArgs=dy,ye.overEvery=mN,ye.overSome=bN,ye.partial=Gv,ye.partialRight=vy,ye.partition=Hb,ye.pick=Ut,ye.pickBy=zt,ye.property=MT,ye.propertyOf=_N,ye.pull=_e,ye.pullAll=Be,ye.pullAllBy=$e,ye.pullAllWith=ct,ye.pullAt=Et,ye.range=wN,ye.rangeRight=EN,ye.rearg=Qb,ye.reject=Xb,ye.remove=_t,ye.rest=Jb,ye.reverse=Rt,ye.sampleSize=Im,ye.set=Tr,ye.setWith=Ur,ye.shuffle=km,ye.slice=Yt,ye.sortBy=uy,ye.sortedUniq=br,ye.sortedUniqBy=mr,ye.split=qs,ye.spread=py,ye.tail=Jr,ye.take=rr,ye.takeRight=ur,ye.takeRightWhile=Si,ye.takeWhile=Yn,ye.tap=Ub,ye.throttle=e_,ye.thru=Ar,ye.toArray=m,ye.toPairs=xn,ye.toPairsIn=jn,ye.toPath=CN,ye.toPlainObject=F,ye.transform=yn,ye.unary=t_,ye.union=No,ye.unionBy=Ln,ye.unionWith=So,ye.uniq=Fs,ye.uniqBy=Bs,ye.uniqWith=bs,ye.unset=Yr,ye.unzip=_s,ye.unzipWith=Us,ye.update=zr,ye.updateWith=un,ye.values=mn,ye.valuesIn=ri,ye.without=Lv,ye.words=dh,ye.wrap=r_,ye.xor=ah,ye.xorBy=Nv,ye.xorWith=zs,ye.zip=Qc,ye.zipObject=jv,ye.zipObjectDeep=sh,ye.zipWith=uh,ye.entries=xn,ye.entriesIn=jn,ye.extend=Y,ye.extendWith=Z,of(ye,ye),ye.add=AN,ye.attempt=nf,ye.camelCase=ii,ye.capitalize=fi,ye.ceil=RN,ye.clamp=tn,ye.clone=gy,ye.cloneDeep=Nm,ye.cloneDeepWith=yy,ye.cloneWith=n_,ye.conformsTo=my,ye.deburr=rn,ye.defaultTo=Od,ye.divide=IN,ye.endsWith=yi,ye.eq=ws,ye.escape=bn,ye.escapeRegExp=Fo,ye.every=Bv,ye.find=qb,ye.findIndex=Rv,ye.findKey=Ce,ye.findLast=eg,ye.findLastIndex=Lo,ye.findLastKey=Re,ye.floor=kN,ye.forEach=Cm,ye.forEachRight=Pm,ye.forIn=je,ye.forInRight=ke,ye.forOwn=Ye,ye.forOwnRight=ze,ye.get=We,ye.gt=i_,ye.gte=lh,ye.has=it,ye.hasIn=mt,ye.head=Dv,ye.identity=si,ye.includes=Am,ye.indexOf=iy,ye.inRange=In,ye.invoke=jt,ye.isArguments=Zl,ye.isArray=Rr,ye.isArrayBuffer=o_,ye.isArrayLike=Aa,ye.isArrayLikeObject=Mi,ye.isBoolean=jm,ye.isBuffer=Ql,ye.isDate=a_,ye.isElement=Vv,ye.isEmpty=s_,ye.isEqual=by,ye.isEqualWith=Fm,ye.isError=og,ye.isFinite=Bm,ye.isFunction=ti,ye.isInteger=Um,ye.isLength=Wv,ye.isMap=Bt,ye.isMatch=wd,ye.isMatchWith=Ya,ye.isNaN=Hv,ye.isNative=zm,ye.isNil=On,ye.isNull=sn,ye.isNumber=na,ye.isObject=Nn,ye.isObjectLike=Ti,ye.isPlainObject=Jl,ye.isRegExp=Ra,ye.isSafeInteger=qm,ye.isSet=_y,ye.isString=ag,ye.isSymbol=Es,ye.isTypedArray=ch,ye.isUndefined=wy,ye.isWeakMap=Ey,ye.isWeakSet=u_,ye.join=L,ye.kebabCase=ia,ye.last=G,ye.lastIndexOf=Q,ye.lowerCase=il,ye.lowerFirst=ec,ye.lt=l_,ye.lte=g,ye.max=DN,ye.maxBy=MN,ye.mean=LN,ye.meanBy=NN,ye.min=jN,ye.minBy=FN,ye.stubArray=c_,ye.stubFalse=f_,ye.stubObject=ON,ye.stubString=xN,ye.stubTrue=SN,ye.multiply=BN,ye.nth=ae,ye.noConflict=Cu,ye.noop=Oy,ye.now=Jc,ye.pad=ol,ye.padEnd=Xa,ye.padStart=oi,ye.parseInt=Sn,ye.random=ni,ye.reduce=$b,ye.reduceRight=Yb,ye.repeat=Vi,ye.replace=oa,ye.result=Er,ye.round=UN,ye.runInContext=Qe,ye.sample=Kb,ye.size=Dm,ye.snakeCase=Bo,ye.some=sy,ye.sortedIndex=Kt,ye.sortedIndexBy=or,ye.sortedIndexOf=St,ye.sortedLastIndex=Lt,ye.sortedLastIndexBy=cr,ye.sortedLastIndexOf=Ft,ye.startCase=hi,ye.startsWith=ef,ye.subtract=zN,ye.sum=qN,ye.sumBy=GN,ye.template=fh,ye.times=TN,ye.toFinite=x,ye.toInteger=E,ye.toLength=D,ye.toLower=tc,ye.toNumber=I,ye.toSafeInteger=V,ye.toString=z,ye.toUpper=$v,ye.trim=tf,ye.trimEnd=rc,ye.trimStart=rf,ye.truncate=Gs,ye.unescape=Vs,ye.uniqueId=PN,ye.upperCase=hh,ye.upperFirst=nc,ye.each=Cm,ye.eachRight=Pm,ye.first=Dv,of(ye,function(){var S={};return Qo(ye,function(k,U){Ir.call(ye.prototype,U)||(S[U]=k)}),S}(),{chain:!1}),ye.VERSION=n,er(["bind","bindKey","curry","curryRight","partial","partialRight"],function(S){ye[S].placeholder=ye}),er(["drop","take"],function(S,k){kr.prototype[S]=function(U){U=U===t?1:ki(E(U),0);var K=this.__filtered__&&!k?new kr(this):this.clone();return K.__filtered__?K.__takeCount__=hn(U,K.__takeCount__):K.__views__.push({size:hn(U,se),type:S+(K.__dir__<0?"Right":"")}),K},kr.prototype[S+"Right"]=function(U){return this.reverse()[S](U).reverse()}}),er(["filter","map","takeWhile"],function(S,k){var U=k+1,K=U==W||U==te;kr.prototype[S]=function(oe){var be=this.clone();return be.__iteratees__.push({iteratee:Pt(oe,3),type:U}),be.__filtered__=be.__filtered__||K,be}}),er(["head","last"],function(S,k){var U="take"+(k?"Right":"");kr.prototype[S]=function(){return this[U](1).value()[0]}}),er(["initial","tail"],function(S,k){var U="drop"+(k?"":"Right");kr.prototype[S]=function(){return this.__filtered__?new kr(this):this[U](1)}}),kr.prototype.compact=function(){return this.filter(si)},kr.prototype.find=function(S){return this.filter(S).head()},kr.prototype.findLast=function(S){return this.reverse().find(S)},kr.prototype.invokeMap=wr(function(S,k){return typeof S=="function"?new kr(this):this.map(function(U){return jl(U,S,k)})}),kr.prototype.reject=function(S){return this.filter(qv(Pt(S)))},kr.prototype.slice=function(S,k){S=E(S);var U=this;return U.__filtered__&&(S>0||k<0)?new kr(U):(S<0?U=U.takeRight(-S):S&&(U=U.drop(S)),k!==t&&(k=E(k),U=k<0?U.dropRight(-k):U.take(k-S)),U)},kr.prototype.takeRightWhile=function(S){return this.reverse().takeWhile(S).reverse()},kr.prototype.toArray=function(){return this.take(se)},Qo(kr.prototype,function(S,k){var U=/^(?:filter|find|map|reject)|While$/.test(k),K=/^(?:head|last)$/.test(k),oe=ye[K?"take"+(k=="last"?"Right":""):k],be=K||/^find/.test(k);oe&&(ye.prototype[k]=function(){var Fe=this.__wrapped__,He=K?[1]:arguments,rt=Fe instanceof kr,Ot=He[0],Tt=rt||Rr(Fe),At=function(nn){var fn=oe.apply(ye,pi([nn],He));return K&&Ht?fn[0]:fn};Tt&&U&&typeof Ot=="function"&&Ot.length!=1&&(rt=Tt=!1);var Ht=this.__chain__,nr=!!this.__actions__.length,xr=be&&!Ht,Vr=rt&&!nr;if(!be&&Tt){Fe=Vr?Fe:new kr(this);var Sr=S.apply(Fe,He);return Sr.__actions__.push({func:Ar,args:[At],thisArg:t}),new dr(Sr,Ht)}return xr&&Vr?S.apply(this,He):(Sr=this.thru(At),xr?K?Sr.value()[0]:Sr.value():Sr)})}),er(["pop","push","shift","sort","splice","unshift"],function(S){var k=Lr[S],U=/^(?:push|sort|unshift)$/.test(S)?"tap":"thru",K=/^(?:pop|shift)$/.test(S);ye.prototype[S]=function(){var oe=arguments;if(K&&!this.__chain__){var be=this.value();return k.apply(Rr(be)?be:[],oe)}return this[U](function(Fe){return k.apply(Rr(Fe)?Fe:[],oe)})}}),Qo(kr.prototype,function(S,k){var U=ye[k];if(U){var K=U.name+"";Ir.call(Ms,K)||(Ms[K]=[]),Ms[K].push({name:k,func:U})}}),Ms[Jf(t,b).name]=[{name:"wrapper",func:t}],kr.prototype.clone=Lf,kr.prototype.reverse=Il,kr.prototype.value=Nf,ye.prototype.at=Om,ye.prototype.chain=Zp,ye.prototype.commit=oy,ye.prototype.next=bd,ye.prototype.plant=Sm,ye.prototype.reverse=Qp,ye.prototype.toJSON=ye.prototype.valueOf=ye.prototype.value=Fv,ye.prototype.first=ye.prototype.head,ks&&(ye.prototype[ks]=xm),ye},xl=Ol();io?((io.exports=xl)._=xl,xc._=xl):qn._=xl}).call(dn)})(z0,z0.exports);var wi=z0.exports,Hz=Sb;function Sb(){var r={};r._next=r._prev=r,this._sentinel=r}Sb.prototype.dequeue=function(){var r=this._sentinel,e=r._prev;if(e!==r)return sL(e),e};Sb.prototype.enqueue=function(r){var e=this._sentinel;r._prev&&r._next&&sL(r),r._next=e._next,e._next._prev=r,e._next=r,r._prev=e};Sb.prototype.toString=function(){for(var r=[],e=this._sentinel,t=e._prev;t!==e;)r.push(JSON.stringify(t,$z)),t=t._prev;return"["+r.join(", ")+"]"};function sL(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function $z(r,e){if(r!=="_next"&&r!=="_prev")return e}var Oh=wi,Yz=dl.Graph,Xz=Hz,Kz=Qz,Zz=Oh.constant(1);function Qz(r,e){if(r.nodeCount()<=1)return[];var t=eq(r,e||Zz),n=Jz(t.graph,t.buckets,t.zeroIdx);return Oh.flatten(Oh.map(n,function(i){return r.outEdges(i.v,i.w)}),!0)}function Jz(r,e,t){for(var n=[],i=e[e.length-1],o=e[0],a;r.nodeCount();){for(;a=o.dequeue();)px(r,e,t,a);for(;a=i.dequeue();)px(r,e,t,a);if(r.nodeCount()){for(var s=e.length-2;s>0;--s)if(a=e[s].dequeue(),a){n=n.concat(px(r,e,t,a,!0));break}}}return n}function px(r,e,t,n,i){var o=i?[]:void 0;return Oh.forEach(r.inEdges(n.v),function(a){var s=r.edge(a),u=r.node(a.v);i&&o.push({v:a.v,w:a.w}),u.out-=s,Qx(e,t,u)}),Oh.forEach(r.outEdges(n.v),function(a){var s=r.edge(a),u=a.w,l=r.node(u);l.in-=s,Qx(e,t,l)}),r.removeNode(n.v),o}function eq(r,e){var t=new Yz,n=0,i=0;Oh.forEach(r.nodes(),function(s){t.setNode(s,{v:s,in:0,out:0})}),Oh.forEach(r.edges(),function(s){var u=t.edge(s.v,s.w)||0,l=e(s),c=u+l;t.setEdge(s.v,s.w,c),i=Math.max(i,t.node(s.v).out+=l),n=Math.max(n,t.node(s.w).in+=l)});var o=Oh.range(i+n+3).map(function(){return new Xz}),a=n+1;return Oh.forEach(t.nodes(),function(s){Qx(o,a,t.node(s))}),{graph:t,buckets:o,zeroIdx:a}}function Qx(r,e,t){t.out?t.in?r[t.out-t.in+e].enqueue(t):r[r.length-1].enqueue(t):r[0].enqueue(t)}var tp=wi,tq=Kz,rq={run:nq,undo:oq};function nq(r){var e=r.graph().acyclicer==="greedy"?tq(r,t(r)):iq(r);tp.forEach(e,function(n){var i=r.edge(n);r.removeEdge(n),i.forwardName=n.name,i.reversed=!0,r.setEdge(n.w,n.v,i,tp.uniqueId("rev"))});function t(n){return function(i){return n.edge(i).weight}}}function iq(r){var e=[],t={},n={};function i(o){tp.has(n,o)||(n[o]=!0,t[o]=!0,tp.forEach(r.outEdges(o),function(a){tp.has(t,a.w)?e.push(a):i(a.w)}),delete t[o])}return tp.forEach(r.nodes(),i),e}function oq(r){tp.forEach(r.edges(),function(e){var t=r.edge(e);if(t.reversed){r.removeEdge(e);var n=t.forwardName;delete t.reversed,delete t.forwardName,r.setEdge(e.w,e.v,t,n)}})}var Dn=wi,uL=dl.Graph,Ys={addDummyNode:lL,simplify:aq,asNonCompoundGraph:sq,successorWeights:uq,predecessorWeights:lq,intersectRect:cq,buildLayerMatrix:fq,normalizeRanks:hq,removeEmptyRanks:dq,addBorderNode:vq,maxRank:cL,partition:pq,time:gq,notime:yq};function lL(r,e,t,n){var i;do i=Dn.uniqueId(n);while(r.hasNode(i));return t.dummy=e,r.setNode(i,t),i}function aq(r){var e=new uL().setGraph(r.graph());return Dn.forEach(r.nodes(),function(t){e.setNode(t,r.node(t))}),Dn.forEach(r.edges(),function(t){var n=e.edge(t.v,t.w)||{weight:0,minlen:1},i=r.edge(t);e.setEdge(t.v,t.w,{weight:n.weight+i.weight,minlen:Math.max(n.minlen,i.minlen)})}),e}function sq(r){var e=new uL({multigraph:r.isMultigraph()}).setGraph(r.graph());return Dn.forEach(r.nodes(),function(t){r.children(t).length||e.setNode(t,r.node(t))}),Dn.forEach(r.edges(),function(t){e.setEdge(t,r.edge(t))}),e}function uq(r){var e=Dn.map(r.nodes(),function(t){var n={};return Dn.forEach(r.outEdges(t),function(i){n[i.w]=(n[i.w]||0)+r.edge(i).weight}),n});return Dn.zipObject(r.nodes(),e)}function lq(r){var e=Dn.map(r.nodes(),function(t){var n={};return Dn.forEach(r.inEdges(t),function(i){n[i.v]=(n[i.v]||0)+r.edge(i).weight}),n});return Dn.zipObject(r.nodes(),e)}function cq(r,e){var t=r.x,n=r.y,i=e.x-t,o=e.y-n,a=r.width/2,s=r.height/2;if(!i&&!o)throw new Error("Not possible to find intersection inside of the rectangle");var u,l;return Math.abs(o)*a>Math.abs(i)*s?(o<0&&(s=-s),u=s*i/o,l=s):(i<0&&(a=-a),u=a,l=a*o/i),{x:t+u,y:n+l}}function fq(r){var e=Dn.map(Dn.range(cL(r)+1),function(){return[]});return Dn.forEach(r.nodes(),function(t){var n=r.node(t),i=n.rank;Dn.isUndefined(i)||(e[i][n.order]=t)}),e}function hq(r){var e=Dn.min(Dn.map(r.nodes(),function(t){return r.node(t).rank}));Dn.forEach(r.nodes(),function(t){var n=r.node(t);Dn.has(n,"rank")&&(n.rank-=e)})}function dq(r){var e=Dn.min(Dn.map(r.nodes(),function(o){return r.node(o).rank})),t=[];Dn.forEach(r.nodes(),function(o){var a=r.node(o).rank-e;t[a]||(t[a]=[]),t[a].push(o)});var n=0,i=r.graph().nodeRankFactor;Dn.forEach(t,function(o,a){Dn.isUndefined(o)&&a%i!==0?--n:n&&Dn.forEach(o,function(s){r.node(s).rank+=n})})}function vq(r,e,t,n){var i={width:0,height:0};return arguments.length>=4&&(i.rank=t,i.order=n),lL(r,"border",i,e)}function cL(r){return Dn.max(Dn.map(r.nodes(),function(e){var t=r.node(e).rank;if(!Dn.isUndefined(t))return t}))}function pq(r,e){var t={lhs:[],rhs:[]};return Dn.forEach(r,function(n){e(n)?t.lhs.push(n):t.rhs.push(n)}),t}function gq(r,e){var t=Dn.now();try{return e()}finally{r+""+(Dn.now()-t)}}function yq(r,e){return e()}var fL=wi,mq=Ys,bq={run:_q,undo:Eq};function _q(r){r.graph().dummyChains=[],fL.forEach(r.edges(),function(e){wq(r,e)})}function wq(r,e){var t=e.v,n=r.node(t).rank,i=e.w,o=r.node(i).rank,a=e.name,s=r.edge(e),u=s.labelRank;if(o!==n+1){r.removeEdge(e);var l,c,f;for(f=0,++n;n<o;++f,++n)s.points=[],c={width:0,height:0,edgeLabel:s,edgeObj:e,rank:n},l=mq.addDummyNode(r,"edge",c,"_d"),n===u&&(c.width=s.width,c.height=s.height,c.dummy="edge-label",c.labelpos=s.labelpos),r.setEdge(t,l,{weight:s.weight},a),f===0&&r.graph().dummyChains.push(l),t=l;r.setEdge(t,i,{weight:s.weight},a)}}function Eq(r){fL.forEach(r.graph().dummyChains,function(e){var t=r.node(e),n=t.edgeLabel,i;for(r.setEdge(t.edgeObj,n);t.dummy;)i=r.successors(e)[0],r.removeNode(e),n.points.push({x:t.x,y:t.y}),t.dummy==="edge-label"&&(n.x=t.x,n.y=t.y,n.width=t.width,n.height=t.height),e=i,t=r.node(e)})}var n0=wi,Tb={longestPath:Oq,slack:xq};function Oq(r){var e={};function t(n){var i=r.node(n);if(n0.has(e,n))return i.rank;e[n]=!0;var o=n0.min(n0.map(r.outEdges(n),function(a){return t(a.w)-r.edge(a).minlen}));return(o===Number.POSITIVE_INFINITY||o===void 0||o===null)&&(o=0),i.rank=o}n0.forEach(r.sources(),t)}function xq(r,e){return r.node(e.w).rank-r.node(e.v).rank-r.edge(e).minlen}var q0=wi,Sq=dl.Graph,G0=Tb.slack,hL=Tq;function Tq(r){var e=new Sq({directed:!1}),t=r.nodes()[0],n=r.nodeCount();e.setNode(t,{});for(var i,o;Cq(e,r)<n;)i=Pq(e,r),o=e.hasNode(i.v)?G0(r,i):-G0(r,i),Aq(e,r,o);return e}function Cq(r,e){function t(n){q0.forEach(e.nodeEdges(n),function(i){var o=i.v,a=n===o?i.w:o;!r.hasNode(a)&&!G0(e,i)&&(r.setNode(a,{}),r.setEdge(n,a,{}),t(a))})}return q0.forEach(r.nodes(),t),r.nodeCount()}function Pq(r,e){return q0.minBy(e.edges(),function(t){if(r.hasNode(t.v)!==r.hasNode(t.w))return G0(e,t)})}function Aq(r,e,t){q0.forEach(r.nodes(),function(n){e.node(n).rank+=t})}var Ph=wi,Rq=hL,Iq=Tb.slack,kq=Tb.longestPath,Dq=dl.alg.preorder,Mq=dl.alg.postorder,Lq=Ys.simplify,Nq=bp;bp.initLowLimValues=aT;bp.initCutValues=oT;bp.calcCutValue=dL;bp.leaveEdge=pL;bp.enterEdge=gL;bp.exchangeEdges=yL;function bp(r){r=Lq(r),kq(r);var e=Rq(r);aT(e),oT(e,r);for(var t,n;t=pL(e);)n=gL(e,r,t),yL(e,r,t,n)}function oT(r,e){var t=Mq(r,r.nodes());t=t.slice(0,t.length-1),Ph.forEach(t,function(n){jq(r,e,n)})}function jq(r,e,t){var n=r.node(t),i=n.parent;r.edge(t,i).cutvalue=dL(r,e,t)}function dL(r,e,t){var n=r.node(t),i=n.parent,o=!0,a=e.edge(t,i),s=0;return a||(o=!1,a=e.edge(i,t)),s=a.weight,Ph.forEach(e.nodeEdges(t),function(u){var l=u.v===t,c=l?u.w:u.v;if(c!==i){var f=l===o,h=e.edge(u).weight;if(s+=f?h:-h,Bq(r,t,c)){var d=r.edge(t,c).cutvalue;s+=f?-d:d}}}),s}function aT(r,e){arguments.length<2&&(e=r.nodes()[0]),vL(r,{},1,e)}function vL(r,e,t,n,i){var o=t,a=r.node(n);return e[n]=!0,Ph.forEach(r.neighbors(n),function(s){Ph.has(e,s)||(t=vL(r,e,t,s,n))}),a.low=o,a.lim=t++,i?a.parent=i:delete a.parent,t}function pL(r){return Ph.find(r.edges(),function(e){return r.edge(e).cutvalue<0})}function gL(r,e,t){var n=t.v,i=t.w;e.hasEdge(n,i)||(n=t.w,i=t.v);var o=r.node(n),a=r.node(i),s=o,u=!1;o.lim>a.lim&&(s=a,u=!0);var l=Ph.filter(e.edges(),function(c){return u===KI(r,r.node(c.v),s)&&u!==KI(r,r.node(c.w),s)});return Ph.minBy(l,function(c){return Iq(e,c)})}function yL(r,e,t,n){var i=t.v,o=t.w;r.removeEdge(i,o),r.setEdge(n.v,n.w,{}),aT(r),oT(r,e),Fq(r,e)}function Fq(r,e){var t=Ph.find(r.nodes(),function(i){return!e.node(i).parent}),n=Dq(r,t);n=n.slice(1),Ph.forEach(n,function(i){var o=r.node(i).parent,a=e.edge(i,o),s=!1;a||(a=e.edge(o,i),s=!0),e.node(i).rank=e.node(o).rank+(s?a.minlen:-a.minlen)})}function Bq(r,e,t){return r.hasEdge(e,t)}function KI(r,e,t){return t.low<=e.lim&&e.lim<=t.lim}var Uq=Tb,mL=Uq.longestPath,zq=hL,qq=Nq,Gq=Vq;function Vq(r){switch(r.graph().ranker){case"network-simplex":ZI(r);break;case"tight-tree":Hq(r);break;case"longest-path":Wq(r);break;default:ZI(r)}}var Wq=mL;function Hq(r){mL(r),zq(r)}function ZI(r){qq(r)}var Jx=wi,$q=Yq;function Yq(r){var e=Kq(r);Jx.forEach(r.graph().dummyChains,function(t){for(var n=r.node(t),i=n.edgeObj,o=Xq(r,e,i.v,i.w),a=o.path,s=o.lca,u=0,l=a[u],c=!0;t!==i.w;){if(n=r.node(t),c){for(;(l=a[u])!==s&&r.node(l).maxRank<n.rank;)u++;l===s&&(c=!1)}if(!c){for(;u<a.length-1&&r.node(l=a[u+1]).minRank<=n.rank;)u++;l=a[u]}r.setParent(t,l),t=r.successors(t)[0]}})}function Xq(r,e,t,n){var i=[],o=[],a=Math.min(e[t].low,e[n].low),s=Math.max(e[t].lim,e[n].lim),u,l;u=t;do u=r.parent(u),i.push(u);while(u&&(e[u].low>a||s>e[u].lim));for(l=u,u=n;(u=r.parent(u))!==l;)o.push(u);return{path:i.concat(o.reverse()),lca:l}}function Kq(r){var e={},t=0;function n(i){var o=t;Jx.forEach(r.children(i),n),e[i]={low:o,lim:t++}}return Jx.forEach(r.children(),n),e}var xh=wi,eS=Ys,Zq={run:Qq,cleanup:t9};function Qq(r){var e=eS.addDummyNode(r,"root",{},"_root"),t=Jq(r),n=xh.max(xh.values(t))-1,i=2*n+1;r.graph().nestingRoot=e,xh.forEach(r.edges(),function(a){r.edge(a).minlen*=i});var o=e9(r)+1;xh.forEach(r.children(),function(a){bL(r,e,i,o,n,t,a)}),r.graph().nodeRankFactor=i}function bL(r,e,t,n,i,o,a){var s=r.children(a);if(!s.length){a!==e&&r.setEdge(e,a,{weight:0,minlen:t});return}var u=eS.addBorderNode(r,"_bt"),l=eS.addBorderNode(r,"_bb"),c=r.node(a);r.setParent(u,a),c.borderTop=u,r.setParent(l,a),c.borderBottom=l,xh.forEach(s,function(f){bL(r,e,t,n,i,o,f);var h=r.node(f),d=h.borderTop?h.borderTop:f,v=h.borderBottom?h.borderBottom:f,y=h.borderTop?n:2*n,w=d!==v?1:i-o[a]+1;r.setEdge(u,d,{weight:y,minlen:w,nestingEdge:!0}),r.setEdge(v,l,{weight:y,minlen:w,nestingEdge:!0})}),r.parent(a)||r.setEdge(e,u,{weight:0,minlen:i+o[a]})}function Jq(r){var e={};function t(n,i){var o=r.children(n);o&&o.length&&xh.forEach(o,function(a){t(a,i+1)}),e[n]=i}return xh.forEach(r.children(),function(n){t(n,1)}),e}function e9(r){return xh.reduce(r.edges(),function(e,t){return e+r.edge(t).weight},0)}function t9(r){var e=r.graph();r.removeNode(e.nestingRoot),delete e.nestingRoot,xh.forEach(r.edges(),function(t){var n=r.edge(t);n.nestingEdge&&r.removeEdge(t)})}var gx=wi,r9=Ys,n9=i9;function i9(r){function e(t){var n=r.children(t),i=r.node(t);if(n.length&&gx.forEach(n,e),gx.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var o=i.minRank,a=i.maxRank+1;o<a;++o)QI(r,"borderLeft","_bl",t,i,o),QI(r,"borderRight","_br",t,i,o)}}gx.forEach(r.children(),e)}function QI(r,e,t,n,i,o){var a={width:0,height:0,rank:o,borderType:e},s=i[e][o-1],u=r9.addDummyNode(r,"border",a,t);i[e][o]=u,r.setParent(u,n),s&&r.setEdge(s,u,{weight:1})}var cf=wi,o9={adjust:a9,undo:s9};function a9(r){var e=r.graph().rankdir.toLowerCase();(e==="lr"||e==="rl")&&_L(r)}function s9(r){var e=r.graph().rankdir.toLowerCase();(e==="bt"||e==="rl")&&u9(r),(e==="lr"||e==="rl")&&(l9(r),_L(r))}function _L(r){cf.forEach(r.nodes(),function(e){JI(r.node(e))}),cf.forEach(r.edges(),function(e){JI(r.edge(e))})}function JI(r){var e=r.width;r.width=r.height,r.height=e}function u9(r){cf.forEach(r.nodes(),function(e){yx(r.node(e))}),cf.forEach(r.edges(),function(e){var t=r.edge(e);cf.forEach(t.points,yx),cf.has(t,"y")&&yx(t)})}function yx(r){r.y=-r.y}function l9(r){cf.forEach(r.nodes(),function(e){mx(r.node(e))}),cf.forEach(r.edges(),function(e){var t=r.edge(e);cf.forEach(t.points,mx),cf.has(t,"x")&&mx(t)})}function mx(r){var e=r.x;r.x=r.y,r.y=e}var yh=wi,c9=f9;function f9(r){var e={},t=yh.filter(r.nodes(),function(s){return!r.children(s).length}),n=yh.max(yh.map(t,function(s){return r.node(s).rank})),i=yh.map(yh.range(n+1),function(){return[]});function o(s){if(!yh.has(e,s)){e[s]=!0;var u=r.node(s);i[u.rank].push(s),yh.forEach(r.successors(s),o)}}var a=yh.sortBy(t,function(s){return r.node(s).rank});return yh.forEach(a,o),i}var Pd=wi,h9=d9;function d9(r,e){for(var t=0,n=1;n<e.length;++n)t+=v9(r,e[n-1],e[n]);return t}function v9(r,e,t){for(var n=Pd.zipObject(t,Pd.map(t,function(l,c){return c})),i=Pd.flatten(Pd.map(e,function(l){return Pd.sortBy(Pd.map(r.outEdges(l),function(c){return{pos:n[c.w],weight:r.edge(c).weight}}),"pos")}),!0),o=1;o<t.length;)o<<=1;var a=2*o-1;o-=1;var s=Pd.map(new Array(a),function(){return 0}),u=0;return Pd.forEach(i.forEach(function(l){var c=l.pos+o;s[c]+=l.weight;for(var f=0;c>0;)c%2&&(f+=s[c+1]),c=c-1>>1,s[c]+=l.weight;u+=l.weight*f})),u}var ek=wi,p9=g9;function g9(r,e){return ek.map(e,function(t){var n=r.inEdges(t);if(n.length){var i=ek.reduce(n,function(o,a){var s=r.edge(a),u=r.node(a.v);return{sum:o.sum+s.weight*u.order,weight:o.weight+s.weight}},{sum:0,weight:0});return{v:t,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:t}})}var Ru=wi,y9=m9;function m9(r,e){var t={};Ru.forEach(r,function(i,o){var a=t[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:o};Ru.isUndefined(i.barycenter)||(a.barycenter=i.barycenter,a.weight=i.weight)}),Ru.forEach(e.edges(),function(i){var o=t[i.v],a=t[i.w];!Ru.isUndefined(o)&&!Ru.isUndefined(a)&&(a.indegree++,o.out.push(t[i.w]))});var n=Ru.filter(t,function(i){return!i.indegree});return b9(n)}function b9(r){var e=[];function t(o){return function(a){a.merged||(Ru.isUndefined(a.barycenter)||Ru.isUndefined(o.barycenter)||a.barycenter>=o.barycenter)&&_9(o,a)}}function n(o){return function(a){a.in.push(o),--a.indegree===0&&r.push(a)}}for(;r.length;){var i=r.pop();e.push(i),Ru.forEach(i.in.reverse(),t(i)),Ru.forEach(i.out,n(i))}return Ru.map(Ru.filter(e,function(o){return!o.merged}),function(o){return Ru.pick(o,["vs","i","barycenter","weight"])})}function _9(r,e){var t=0,n=0;r.weight&&(t+=r.barycenter*r.weight,n+=r.weight),e.weight&&(t+=e.barycenter*e.weight,n+=e.weight),r.vs=e.vs.concat(r.vs),r.barycenter=t/n,r.weight=n,r.i=Math.min(e.i,r.i),e.merged=!0}var By=wi,w9=Ys,E9=O9;function O9(r,e){var t=w9.partition(r,function(c){return By.has(c,"barycenter")}),n=t.lhs,i=By.sortBy(t.rhs,function(c){return-c.i}),o=[],a=0,s=0,u=0;n.sort(x9(!!e)),u=tk(o,i,u),By.forEach(n,function(c){u+=c.vs.length,o.push(c.vs),a+=c.barycenter*c.weight,s+=c.weight,u=tk(o,i,u)});var l={vs:By.flatten(o,!0)};return s&&(l.barycenter=a/s,l.weight=s),l}function tk(r,e,t){for(var n;e.length&&(n=By.last(e)).i<=t;)e.pop(),r.push(n.vs),t++;return t}function x9(r){return function(e,t){return e.barycenter<t.barycenter?-1:e.barycenter>t.barycenter?1:r?t.i-e.i:e.i-t.i}}var kd=wi,S9=p9,T9=y9,C9=E9,P9=wL;function wL(r,e,t,n){var i=r.children(e),o=r.node(e),a=o?o.borderLeft:void 0,s=o?o.borderRight:void 0,u={};a&&(i=kd.filter(i,function(v){return v!==a&&v!==s}));var l=S9(r,i);kd.forEach(l,function(v){if(r.children(v.v).length){var y=wL(r,v.v,t,n);u[v.v]=y,kd.has(y,"barycenter")&&R9(v,y)}});var c=T9(l,t);A9(c,u);var f=C9(c,n);if(a&&(f.vs=kd.flatten([a,f.vs,s],!0),r.predecessors(a).length)){var h=r.node(r.predecessors(a)[0]),d=r.node(r.predecessors(s)[0]);kd.has(f,"barycenter")||(f.barycenter=0,f.weight=0),f.barycenter=(f.barycenter*f.weight+h.order+d.order)/(f.weight+2),f.weight+=2}return f}function A9(r,e){kd.forEach(r,function(t){t.vs=kd.flatten(t.vs.map(function(n){return e[n]?e[n].vs:n}),!0)})}function R9(r,e){kd.isUndefined(r.barycenter)?(r.barycenter=e.barycenter,r.weight=e.weight):(r.barycenter=(r.barycenter*r.weight+e.barycenter*e.weight)/(r.weight+e.weight),r.weight+=e.weight)}var Uy=wi,I9=dl.Graph,k9=D9;function D9(r,e,t){var n=M9(r),i=new I9({compound:!0}).setGraph({root:n}).setDefaultNodeLabel(function(o){return r.node(o)});return Uy.forEach(r.nodes(),function(o){var a=r.node(o),s=r.parent(o);(a.rank===e||a.minRank<=e&&e<=a.maxRank)&&(i.setNode(o),i.setParent(o,s||n),Uy.forEach(r[t](o),function(u){var l=u.v===o?u.w:u.v,c=i.edge(l,o),f=Uy.isUndefined(c)?0:c.weight;i.setEdge(l,o,{weight:r.edge(u).weight+f})}),Uy.has(a,"minRank")&&i.setNode(o,{borderLeft:a.borderLeft[e],borderRight:a.borderRight[e]}))}),i}function M9(r){for(var e;r.hasNode(e=Uy.uniqueId("_root")););return e}var L9=wi,N9=j9;function j9(r,e,t){var n={},i;L9.forEach(t,function(o){for(var a=r.parent(o),s,u;a;){if(s=r.parent(a),s?(u=n[s],n[s]=a):(u=i,i=a),u&&u!==a){e.setEdge(u,a);return}a=s}})}var jd=wi,F9=c9,B9=h9,U9=P9,z9=k9,q9=N9,G9=dl.Graph,rk=Ys,V9=W9;function W9(r){var e=rk.maxRank(r),t=nk(r,jd.range(1,e+1),"inEdges"),n=nk(r,jd.range(e-1,-1,-1),"outEdges"),i=F9(r);ik(r,i);for(var o=Number.POSITIVE_INFINITY,a,s=0,u=0;u<4;++s,++u){H9(s%2?t:n,s%4>=2),i=rk.buildLayerMatrix(r);var l=B9(r,i);l<o&&(u=0,a=jd.cloneDeep(i),o=l)}ik(r,a)}function nk(r,e,t){return jd.map(e,function(n){return z9(r,n,t)})}function H9(r,e){var t=new G9;jd.forEach(r,function(n){var i=n.graph().root,o=U9(n,i,t,e);jd.forEach(o.vs,function(a,s){n.node(a).order=s}),q9(n,t,o.vs)})}function ik(r,e){jd.forEach(e,function(t){jd.forEach(t,function(n,i){r.node(n).order=i})})}var Dr=wi,$9=dl.Graph,Y9=Ys,X9={positionX:aG};function K9(r,e){var t={};function n(i,o){var a=0,s=0,u=i.length,l=Dr.last(o);return Dr.forEach(o,function(c,f){var h=Q9(r,c),d=h?r.node(h).order:u;(h||c===l)&&(Dr.forEach(o.slice(s,f+1),function(v){Dr.forEach(r.predecessors(v),function(y){var w=r.node(y),b=w.order;(b<a||d<b)&&!(w.dummy&&r.node(v).dummy)&&EL(t,y,v)})}),s=f+1,a=d)}),o}return Dr.reduce(e,n),t}function Z9(r,e){var t={};if(r.nodeCount()>1e3)return t;function n(o,a,s,u,l){var c;Dr.forEach(Dr.range(a,s),function(f){c=o[f],r.node(c).dummy&&Dr.forEach(r.predecessors(c),function(h){var d=r.node(h);d.dummy&&(d.order<u||d.order>l)&&EL(t,h,c)})})}function i(o,a){var s=-1,u,l=0;return Dr.forEach(a,function(c,f){if(r.node(c).dummy==="border"){var h=r.predecessors(c);h.length&&(u=r.node(h[0]).order,n(a,l,f,s,u),l=f,s=u)}n(a,l,a.length,u,o.length)}),a}return Dr.reduce(e,i),t}function Q9(r,e){if(r.node(e).dummy)return Dr.find(r.predecessors(e),function(t){return r.node(t).dummy})}function EL(r,e,t){if(e>t){var n=e;e=t,t=n}var i=r[e];i||(r[e]=i={}),i[t]=!0}function J9(r,e,t){if(e>t){var n=e;e=t,t=n}return Dr.has(r[e],t)}function eG(r,e,t,n){var i={},o={},a={};return Dr.forEach(e,function(s){Dr.forEach(s,function(u,l){i[u]=u,o[u]=u,a[u]=l})}),Dr.forEach(e,function(s){var u=-1;Dr.forEach(s,function(l){var c=n(l);if(c.length){c=Dr.sortBy(c,function(y){return a[y]});for(var f=(c.length-1)/2,h=Math.floor(f),d=Math.ceil(f);h<=d;++h){var v=c[h];o[l]===l&&u<a[v]&&!J9(t,l,v)&&(o[v]=l,o[l]=i[l]=i[v],u=a[v])}}})}),{root:i,align:o}}function tG(r,e,t,n,i){var o={},a=rG(r,e,t,i),s=i?"borderLeft":"borderRight";function u(f,h){for(var d=a.nodes(),v=d.pop(),y={};v;)y[v]?f(v):(y[v]=!0,d.push(v),d=d.concat(h(v))),v=d.pop()}function l(f){o[f]=a.inEdges(f).reduce(function(h,d){return Math.max(h,o[d.v]+a.edge(d))},0)}function c(f){var h=a.outEdges(f).reduce(function(v,y){return Math.min(v,o[y.w]-a.edge(y))},Number.POSITIVE_INFINITY),d=r.node(f);h!==Number.POSITIVE_INFINITY&&d.borderType!==s&&(o[f]=Math.max(o[f],h))}return u(l,a.predecessors.bind(a)),u(c,a.successors.bind(a)),Dr.forEach(n,function(f){o[f]=o[t[f]]}),o}function rG(r,e,t,n){var i=new $9,o=r.graph(),a=sG(o.nodesep,o.edgesep,n);return Dr.forEach(e,function(s){var u;Dr.forEach(s,function(l){var c=t[l];if(i.setNode(c),u){var f=t[u],h=i.edge(f,c);i.setEdge(f,c,Math.max(a(r,l,u),h||0))}u=l})}),i}function nG(r,e){return Dr.minBy(Dr.values(e),function(t){var n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return Dr.forIn(t,function(o,a){var s=uG(r,a)/2;n=Math.max(o+s,n),i=Math.min(o-s,i)}),n-i})}function iG(r,e){var t=Dr.values(e),n=Dr.min(t),i=Dr.max(t);Dr.forEach(["u","d"],function(o){Dr.forEach(["l","r"],function(a){var s=o+a,u=r[s],l;if(u!==e){var c=Dr.values(u);l=a==="l"?n-Dr.min(c):i-Dr.max(c),l&&(r[s]=Dr.mapValues(u,function(f){return f+l}))}})})}function oG(r,e){return Dr.mapValues(r.ul,function(t,n){if(e)return r[e.toLowerCase()][n];var i=Dr.sortBy(Dr.map(r,n));return(i[1]+i[2])/2})}function aG(r){var e=Y9.buildLayerMatrix(r),t=Dr.merge(K9(r,e),Z9(r,e)),n={},i;Dr.forEach(["u","d"],function(a){i=a==="u"?e:Dr.values(e).reverse(),Dr.forEach(["l","r"],function(s){s==="r"&&(i=Dr.map(i,function(f){return Dr.values(f).reverse()}));var u=(a==="u"?r.predecessors:r.successors).bind(r),l=eG(r,i,t,u),c=tG(r,i,l.root,l.align,s==="r");s==="r"&&(c=Dr.mapValues(c,function(f){return-f})),n[a+s]=c})});var o=nG(r,n);return iG(n,o),oG(n,r.graph().align)}function sG(r,e,t){return function(n,i,o){var a=n.node(i),s=n.node(o),u=0,l;if(u+=a.width/2,Dr.has(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":l=-a.width/2;break;case"r":l=a.width/2;break}if(l&&(u+=t?l:-l),l=0,u+=(a.dummy?e:r)/2,u+=(s.dummy?e:r)/2,u+=s.width/2,Dr.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":l=s.width/2;break;case"r":l=-s.width/2;break}return l&&(u+=t?l:-l),l=0,u}}function uG(r,e){return r.node(e).width}var zy=wi,OL=Ys,lG=X9.positionX,cG=fG;function fG(r){r=OL.asNonCompoundGraph(r),hG(r),zy.forEach(lG(r),function(e,t){r.node(t).x=e})}function hG(r){var e=OL.buildLayerMatrix(r),t=r.graph().ranksep,n=0;zy.forEach(e,function(i){var o=zy.max(zy.map(i,function(a){return r.node(a).height}));zy.forEach(i,function(a){r.node(a).y=n+o/2}),n+=o+t})}var Kr=wi,ok=rq,ak=bq,dG=Gq,vG=Ys.normalizeRanks,pG=$q,gG=Ys.removeEmptyRanks,sk=Zq,yG=n9,uk=o9,mG=V9,bG=cG,Wd=Ys,_G=dl.Graph,wG=EG;function EG(r,e){var t=e&&e.debugTiming?Wd.time:Wd.notime,n=t("layout",function(){return n=t("  buildLayoutGraph",function(){return DG(r)}),t("  runLayout",function(){OG(n,t)}),t("  updateInputGraph",function(){xG(r,n)}),n});return n}function OG(r,e){e("    makeSpaceForEdgeLabels",function(){MG(r)}),e("    removeSelfEdges",function(){GG(r)}),e("    acyclic",function(){ok.run(r)}),e("    nestingGraph.run",function(){sk.run(r)}),e("    rank",function(){dG(Wd.asNonCompoundGraph(r))}),e("    injectEdgeLabelProxies",function(){LG(r)}),e("    removeEmptyRanks",function(){gG(r)}),e("    nestingGraph.cleanup",function(){sk.cleanup(r)}),e("    normalizeRanks",function(){vG(r)}),e("    assignRankMinMax",function(){NG(r)}),e("    removeEdgeLabelProxies",function(){jG(r)}),e("    normalize.run",function(){ak.run(r)}),e("    parentDummyChains",function(){pG(r)}),e("    addBorderSegments",function(){yG(r)}),e("    order",function(){mG(r)}),e("    insertSelfEdges",function(){VG(r)}),e("    adjustCoordinateSystem",function(){uk.adjust(r)}),e("    position",function(){bG(r)}),e("    positionSelfEdges",function(){WG(r)}),e("    removeBorderNodes",function(){qG(r)}),e("    normalize.undo",function(){ak.undo(r)}),e("    fixupEdgeLabelCoords",function(){UG(r)}),e("    undoCoordinateSystem",function(){uk.undo(r)}),e("    translateGraph",function(){FG(r)}),e("    assignNodeIntersects",function(){BG(r)}),e("    reversePoints",function(){zG(r)}),e("    acyclic.undo",function(){ok.undo(r)})}function xG(r,e){Kr.forEach(r.nodes(),function(t){var n=r.node(t),i=e.node(t);n&&(n.x=i.x,n.y=i.y,e.children(t).length&&(n.width=i.width,n.height=i.height))}),Kr.forEach(r.edges(),function(t){var n=r.edge(t),i=e.edge(t);n.points=i.points,Kr.has(i,"x")&&(n.x=i.x,n.y=i.y)}),r.graph().width=e.graph().width,r.graph().height=e.graph().height}var SG=["nodesep","edgesep","ranksep","marginx","marginy"],TG={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},CG=["acyclicer","ranker","rankdir","align"],PG=["width","height"],AG={width:0,height:0},RG=["minlen","weight","width","height","labeloffset"],IG={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},kG=["labelpos"];function DG(r){var e=new _G({multigraph:!0,compound:!0}),t=_x(r.graph());return e.setGraph(Kr.merge({},TG,bx(t,SG),Kr.pick(t,CG))),Kr.forEach(r.nodes(),function(n){var i=_x(r.node(n));e.setNode(n,Kr.defaults(bx(i,PG),AG)),e.setParent(n,r.parent(n))}),Kr.forEach(r.edges(),function(n){var i=_x(r.edge(n));e.setEdge(n,Kr.merge({},IG,bx(i,RG),Kr.pick(i,kG)))}),e}function MG(r){var e=r.graph();e.ranksep/=2,Kr.forEach(r.edges(),function(t){var n=r.edge(t);n.minlen*=2,n.labelpos.toLowerCase()!=="c"&&(e.rankdir==="TB"||e.rankdir==="BT"?n.width+=n.labeloffset:n.height+=n.labeloffset)})}function LG(r){Kr.forEach(r.edges(),function(e){var t=r.edge(e);if(t.width&&t.height){var n=r.node(e.v),i=r.node(e.w),o={rank:(i.rank-n.rank)/2+n.rank,e};Wd.addDummyNode(r,"edge-proxy",o,"_ep")}})}function NG(r){var e=0;Kr.forEach(r.nodes(),function(t){var n=r.node(t);n.borderTop&&(n.minRank=r.node(n.borderTop).rank,n.maxRank=r.node(n.borderBottom).rank,e=Kr.max(e,n.maxRank))}),r.graph().maxRank=e}function jG(r){Kr.forEach(r.nodes(),function(e){var t=r.node(e);t.dummy==="edge-proxy"&&(r.edge(t.e).labelRank=t.rank,r.removeNode(e))})}function FG(r){var e=Number.POSITIVE_INFINITY,t=0,n=Number.POSITIVE_INFINITY,i=0,o=r.graph(),a=o.marginx||0,s=o.marginy||0;function u(l){var c=l.x,f=l.y,h=l.width,d=l.height;e=Math.min(e,c-h/2),t=Math.max(t,c+h/2),n=Math.min(n,f-d/2),i=Math.max(i,f+d/2)}Kr.forEach(r.nodes(),function(l){u(r.node(l))}),Kr.forEach(r.edges(),function(l){var c=r.edge(l);Kr.has(c,"x")&&u(c)}),e-=a,n-=s,Kr.forEach(r.nodes(),function(l){var c=r.node(l);c.x-=e,c.y-=n}),Kr.forEach(r.edges(),function(l){var c=r.edge(l);Kr.forEach(c.points,function(f){f.x-=e,f.y-=n}),Kr.has(c,"x")&&(c.x-=e),Kr.has(c,"y")&&(c.y-=n)}),o.width=t-e+a,o.height=i-n+s}function BG(r){Kr.forEach(r.edges(),function(e){var t=r.edge(e),n=r.node(e.v),i=r.node(e.w),o,a;t.points?(o=t.points[0],a=t.points[t.points.length-1]):(t.points=[],o=i,a=n),t.points.unshift(Wd.intersectRect(n,o)),t.points.push(Wd.intersectRect(i,a))})}function UG(r){Kr.forEach(r.edges(),function(e){var t=r.edge(e);if(Kr.has(t,"x"))switch((t.labelpos==="l"||t.labelpos==="r")&&(t.width-=t.labeloffset),t.labelpos){case"l":t.x-=t.width/2+t.labeloffset;break;case"r":t.x+=t.width/2+t.labeloffset;break}})}function zG(r){Kr.forEach(r.edges(),function(e){var t=r.edge(e);t.reversed&&t.points.reverse()})}function qG(r){Kr.forEach(r.nodes(),function(e){if(r.children(e).length){var t=r.node(e),n=r.node(t.borderTop),i=r.node(t.borderBottom),o=r.node(Kr.last(t.borderLeft)),a=r.node(Kr.last(t.borderRight));t.width=Math.abs(a.x-o.x),t.height=Math.abs(i.y-n.y),t.x=o.x+t.width/2,t.y=n.y+t.height/2}}),Kr.forEach(r.nodes(),function(e){r.node(e).dummy==="border"&&r.removeNode(e)})}function GG(r){Kr.forEach(r.edges(),function(e){if(e.v===e.w){var t=r.node(e.v);t.selfEdges||(t.selfEdges=[]),t.selfEdges.push({e,label:r.edge(e)}),r.removeEdge(e)}})}function VG(r){var e=Wd.buildLayerMatrix(r);Kr.forEach(e,function(t){var n=0;Kr.forEach(t,function(i,o){var a=r.node(i);a.order=o+n,Kr.forEach(a.selfEdges,function(s){Wd.addDummyNode(r,"selfedge",{width:s.label.width,height:s.label.height,rank:a.rank,order:o+ ++n,e:s.e,label:s.label},"_se")}),delete a.selfEdges})})}function WG(r){Kr.forEach(r.nodes(),function(e){var t=r.node(e);if(t.dummy==="selfedge"){var n=r.node(t.e.v),i=n.x+n.width/2,o=n.y,a=t.x-i,s=n.height/2;r.setEdge(t.e,t.label),r.removeNode(e),t.label.points=[{x:i+2*a/3,y:o-s},{x:i+5*a/6,y:o-s},{x:i+a,y:o},{x:i+5*a/6,y:o+s},{x:i+2*a/3,y:o+s}],t.label.x=t.x,t.label.y=t.y}})}function bx(r,e){return Kr.mapValues(Kr.pick(r,e),Number)}function _x(r){var e={};return Kr.forEach(r,function(t,n){e[n.toLowerCase()]=t}),e}var i0=wi,HG=Ys,$G=dl.Graph,YG={debugOrdering:XG};function XG(r){var e=HG.buildLayerMatrix(r),t=new $G({compound:!0,multigraph:!0}).setGraph({});return i0.forEach(r.nodes(),function(n){t.setNode(n,{label:n}),t.setParent(n,"layer"+r.node(n).rank)}),i0.forEach(r.edges(),function(n){t.setEdge(n.v,n.w,{},n.name)}),i0.forEach(e,function(n,i){var o="layer"+i;t.setNode(o,{rank:"same"}),i0.reduce(n,function(a,s){return t.setEdge(a,s,{style:"invis"}),s})}),t}var KG="0.8.14",ZG={graphlib:dl,layout:wG,debug:YG,util:{time:Ys.time,notime:Ys.notime},version:KG};const xL=$0(ZG);var SL=function(){};SL.prototype={fit:function(r){var e,t,n,i=r.length,o,a=i>0?r[0].width:0,s=i>0?r[0].height:0;for(this.root={x:0,y:0,width:a,height:s},e=0;e<i;e++)n=r[e],(t=this.findNode(this.root,n.width,n.height))?(o=this.splitNode(t,n.width,n.height),n.x=o.x,n.y=o.y):(o=this.growNode(n.width,n.height),n.x=o.x,n.y=o.y)},findNode:function(r,e,t){return r.used?this.findNode(r.right,e,t)||this.findNode(r.down,e,t):e<=r.width&&t<=r.height?r:null},splitNode:function(r,e,t){return r.used=!0,r.down={x:r.x,y:r.y+t,width:r.width,height:r.height-t},r.right={x:r.x+e,y:r.y,width:r.width-e,height:t},r},growNode:function(r,e){var t=r<=this.root.width,n=e<=this.root.height,i=n&&this.root.height>=this.root.width+r,o=t&&this.root.width>=this.root.height+e;return i?this.growRight(r,e):o?this.growDown(r,e):n?this.growRight(r,e):t?this.growDown(r,e):null},growRight:function(r,e){this.root={used:!0,x:0,y:0,width:this.root.width+r,height:this.root.height,down:this.root,right:{x:this.root.width,y:0,width:r,height:this.root.height}};var t;return(t=this.findNode(this.root,r,e))?this.splitNode(t,r,e):null},growDown:function(r,e){this.root={used:!0,x:0,y:0,width:this.root.width,height:this.root.height+e,down:{x:0,y:this.root.height,width:this.root.width,height:e},right:this.root};var t;return(t=this.findNode(this.root,r,e))?this.splitNode(t,r,e):null}};var QG=SL,JG=QG,e7=function(r,e){e=e||{};var t=new JG,n=e.inPlace||!1,i=r.map(function(u){return n?u:{width:u.width,height:u.height,item:u}});i=i.sort(function(u,l){return l.width*l.height-u.width*u.height}),t.fit(i);var o=i.reduce(function(u,l){return Math.max(u,l.x+l.width)},0),a=i.reduce(function(u,l){return Math.max(u,l.y+l.height)},0),s={width:o,height:a};return n||(s.items=i),s};const t7=$0(e7),r7="tight-tree",mh=100,TL="up",sT="down",n7="left",CL="right",i7={[TL]:"BT",[sT]:"TB",[n7]:"RL",[CL]:"LR"},o7="bin",a7=25,s7=1/.38,u7=r=>r===TL||r===sT,l7=r=>r===sT||r===CL,wx=r=>{let e=null,t=null,n=null,i=null,o=null,a=null,s=null,u=null;for(const l of r.nodes()){const c=r.node(l);(o===null||c.x<o)&&(o=c.x),(a===null||c.y<a)&&(a=c.y),(s===null||c.x>s)&&(s=c.x),(u===null||c.y>u)&&(u=c.y);const f=Math.ceil(c.width/2);(e===null||c.x-f<e)&&(e=c.x-f),(t===null||c.y-f<t)&&(t=c.y-f),(n===null||c.x+f>n)&&(n=c.x+f),(i===null||c.y+f>i)&&(i=c.y+f)}return{minX:e,minY:t,maxX:n,maxY:i,minCenterX:o,minCenterY:a,maxCenterX:s,maxCenterY:u,width:n-e,height:i-t,xOffset:o-e,yOffset:a-t}},PL=r=>{const e=new xL.graphlib.Graph;return e.setGraph({}),e.setDefaultEdgeLabel(()=>({})),e.graph().nodesep=75*r,e.graph().ranksep=75*r,e},lk=(r,e,t)=>{const{rank:n}=t.node(r);let i=null,o=null;for(const a of e){const{rank:s}=t.node(a);if(!(a===r||s>=n))if(s===n-1){i=s,o=a;break}else(i===null&&o===null||s>i)&&(i=s,o=a)}return o},c7=(r,e)=>{let t=lk(r,e.predecessors(r),e);return t===null&&(t=lk(r,e.successors(r),e)),t},f7=(r,e)=>{const t=[],n=Wz.alg.components(r);if(n.length>1)for(const i of n){const o=PL(e);for(const a of i){const s=r.node(a);o.setNode(a,{width:s.width,height:s.height});const u=r.outEdges(a);if(u)for(const l of u)o.setEdge(l.v,l.w)}t.push(o)}else t.push(r);return t},ck=(r,e,t)=>{r.graph().ranker=r7,r.graph().rankdir=i7[e];const n=xL.layout(r);for(const i of n.nodes()){const o=c7(i,n);o!==null&&(t[i]=o)}},Ex=(r,e)=>Math.sqrt((r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y)),h7=r=>{const e=[r[0]];let t={p1:r[0],p2:r[1]},n=Ex(t.p1,t.p2);for(let i=2;i<r.length;i++){let o={p1:r[i-1],p2:r[i]},a=Ex(o.p1,o.p2);const s={p1:t.p1,p2:o.p2},u=Ex(s.p1,s.p2);a+n-u<.1&&(e.pop(),o=s,a=u),e.push(o.p1),t=o,n=a}return e.push(r[r.length-1]),e},d7=(r,e,t,n,i,o,a=1)=>{const s=PL(a),u={},l={x:0,y:0},c=r.length;for(const _ of r){const O=t[_.id];l.x+=(O==null?void 0:O.x)||0,l.y+=(O==null?void 0:O.y)||0;const P=(_.size||a7)*s7*a;s.setNode(_.id,{width:P,height:P})}const f=c?[l.x/c,l.y/c]:[0,0],h={};for(const _ of n)if(e[_.from]&&e[_.to]&&_.from!==_.to){const O=_.from<_.to?`${_.from}-${_.to}`:`${_.to}-${_.from}`;h[O]||(h[O]=1,s.setEdge(_.from,_.to))}const d=f7(s,a);if(d.length>1){d.forEach(T=>ck(T,i,u));const _=u7(i),O=l7(i),P=d.filter(T=>T.nodeCount()===1),R=d.filter(T=>T.nodeCount()!==1);if(o===o7){R.sort((re,ee)=>ee.nodeCount()-re.nodeCount());const M=_?({width:re,height:ee,...fe})=>({...fe,width:re+mh,height:ee+mh}):({width:re,height:ee,...fe})=>({...fe,width:ee+mh,height:re+mh}),N=R.map(wx).map(M),j=P.map(wx).map(M),B=N.concat(j);t7(B,{inPlace:!0});const q=Math.floor(mh/2),W=_?"x":"y",J=_?"y":"x";if(!O){const re=_?"y":"x",ee=_?"height":"width",fe=B.reduce((se,me)=>se===null?me[re]:Math.min(me[re],se[ee]||0),null),he=B.reduce((se,me)=>se===null?me[re]+me[ee]:Math.max(me[re]+me[ee],se[ee]||0),null);B.forEach(se=>{se[re]=fe+(he-(se[re]+se[ee]))})}const te=(re,ee)=>{for(const fe of re.nodes()){const he=re.node(fe),se=s.node(fe);se.x=he.x-ee.xOffset+ee[W]+q,se.y=he.y-ee.yOffset+ee[J]+q}};for(let re=0;re<R.length;re++){const ee=R[re],fe=N[re];te(ee,fe)}for(let re=0;re<P.length;re++){const ee=P[re],fe=j[re];te(ee,fe)}}else{R.sort(O?(ee,fe)=>fe.nodeCount()-ee.nodeCount():(ee,fe)=>ee.nodeCount()-fe.nodeCount());const T=R.map(wx),A=P.reduce((ee,fe)=>ee+s.node(fe.nodes()[0]).width,0),M=P.reduce((ee,fe)=>Math.max(ee,s.node(fe.nodes()[0]).width),0),N=P.length>0?A+(P.length-1)*mh:0,j=T.reduce((ee,{width:fe})=>Math.max(ee,fe),0),B=Math.max(j,N),q=T.reduce((ee,{height:fe})=>Math.max(ee,fe),0),W=Math.max(q,N);let J=0;const te=()=>{for(let ee=0;ee<R.length;ee++){const fe=R[ee],he=T[ee],se=Math.floor(_?(B-he.width)/2:(W-he.height)/2);for(const me of fe.nodes()){const De=fe.node(me),Le=s.node(me);_?(Le.x=De.x-he.minX+se,Le.y=De.y-he.minY+J):(Le.x=De.x-he.minX+J,Le.y=De.y-he.minY+se)}for(const me of fe.edges()){const De=fe.edge(me),Le=s.edge(me);De.points&&De.points.length>3&&(Le.points=De.points.map(({x:Ie,y:qe})=>({x:Ie-he.minX+(_?se:J),y:qe-he.minY+(_?J:se)})))}J+=(_?he.height:he.width)+mh}},re=()=>{const ee=Math.floor(((_?B:W)-N)/2);J+=Math.floor(M/2);let fe=ee;for(const he of P){const se=he.nodes()[0],me=s.node(se);_?(me.x=fe+Math.floor(me.width/2),me.y=J):(me.x=J,me.y=fe+Math.floor(me.width/2)),fe+=mh+me.width}J=M+mh};O?(te(),re()):(re(),te())}}else ck(s,i,u);l.x=0,l.y=0;const v={};for(const _ of s.nodes()){const O=s.node(_);l.x+=O.x||0,l.y+=O.y||0,v[_]={x:O.x,y:O.y}}const y=c?[l.x/c,l.y/c]:[0,0],w=f[0]-y[0],b=f[1]-y[1];for(const _ in v)v[_].x+=w,v[_].y+=b;const p={};for(const _ of s.edges()){const O=s.edge(_);if(O.points&&O.points.length>3){const P=h7(O.points);for(const R of P)R.x+=w,R.y+=b;p[`${_.v}-${_.w}`]={points:[...P],from:{x:v[_.v].x,y:v[_.v].y},to:{x:v[_.w].x,y:v[_.w].y}},p[`${_.w}-${_.v}`]={points:P.reverse(),from:{x:v[_.w].x,y:v[_.w].y},to:{x:v[_.v].x,y:v[_.v].y}}}}return{positions:v,parents:u,waypoints:p}};class v7{start(){}postMessage(e){const{nodes:t,nodeIds:n,idToPosition:i,rels:o,direction:a,packing:s,pixelRatio:u,forcedDelay:l=0}=e,c=d7(t,n,i,o,a,s,u);l?setTimeout(()=>{this.onmessage({data:c})},l):this.onmessage({data:c})}onmessage(){}close(){}}const p7={port:new v7},g7=()=>new SharedWorker(new URL("/assets/HierarchicalLayout.worker-BG0gRXhm.js",import.meta.url),{type:"module",name:"HierarchicalLayout"}),y7=Object.freeze(Object.defineProperty({__proto__:null,coseBilkentLayoutFallbackWorker:NU,createCoseBilkentLayoutWorker:jU,createHierarchicalLayoutWorker:g7,hierarchicalLayoutFallbackWorker:p7},Symbol.toStringTag,{value:"Module"}));var tS=function(r,e){return tS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},tS(r,e)};function Ks(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");tS(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Nt=function(){return Nt=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Nt.apply(this,arguments)};function AL(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function ar(r,e,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(c){try{l(n.next(c))}catch(f){a(f)}}function u(c){try{l(n.throw(c))}catch(f){a(f)}}function l(c){c.done?o(c.value):i(c.value).then(s,u)}l((n=n.apply(r,e||[])).next())})}function sr(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(c){return u([l,c])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(t=0)),t;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(l[0]===6&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(c){l=[6,c],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function qo(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))}function rS(r,e,t){e.split&&(e=e.split("."));for(var n=0,i=e.length,o=r,a,s;n<i&&(s=""+e[n++],!(s==="__proto__"||s==="constructor"||s==="prototype"));)o=o[s]=n===i?t:typeof(a=o[s])==typeof e?a:e[n]*0!==0||~(""+e[n]).indexOf(".")?{}:[]}var m7=function(r,e){return Object.keys(r).filter(function(t){return e(t,r[t])}).reduce(function(t,n){return t[n]=r[n],t},{})},fp=function(r){Ks(e,r);function e(t,n){var i=r.call(this,"".concat(t," ").concat(n))||this;return i.field=t,i}return e}(Error);function Hd(r){return typeof r=="string"}function nS(r){return typeof r=="number"}function Rg(r){return typeof r=="function"}function b7(r){return r!=null}function fc(r){return Object.prototype.toString.call(r).slice(8,-1).toLowerCase()==="object"}var uT="is not a string",lT="is not an object",_7="is nil";function w7(r){if(!b7(r))throw new fp("Event",_7);if(typeof r!="object")throw new fp("Event",lT)}function E7(r){if(!Hd(r.type))throw new fp(".type",uT)}function O7(r){if(!Hd(r.event))throw new fp(".event",uT)}function x7(r){if(!fc(r.properties))throw new fp(".properties",lT)}function S7(r){if(!fc(r.traits))throw new fp(".traits",lT)}function T7(r){if(!Hd(r.messageId))throw new fp(".messageId",uT)}function C7(r){w7(r),E7(r),T7(r),r.type==="track"&&(O7(r),x7(r)),["group","identify"].includes(r.type)&&S7(r)}var P7=function(){function r(e){var t,n;this.settings=e,this.createMessageId=e.createMessageId,this.onEventMethodCall=(t=e.onEventMethodCall)!==null&&t!==void 0?t:function(){},this.onFinishedEvent=(n=e.onFinishedEvent)!==null&&n!==void 0?n:function(){}}return r}(),A7=function(){function r(e){this.settings=new P7(e)}return r.prototype.track=function(e,t,n,i){return this.settings.onEventMethodCall({type:"track",options:n}),this.normalize(Nt(Nt({},this.baseEvent()),{event:e,type:"track",properties:t??{},options:Nt({},n),integrations:Nt({},i)}))},r.prototype.page=function(e,t,n,i,o){var a;this.settings.onEventMethodCall({type:"page",options:i});var s={type:"page",properties:Nt({},n),options:Nt({},i),integrations:Nt({},o)};return e!==null&&(s.category=e,s.properties=(a=s.properties)!==null&&a!==void 0?a:{},s.properties.category=e),t!==null&&(s.name=t),this.normalize(Nt(Nt({},this.baseEvent()),s))},r.prototype.screen=function(e,t,n,i,o){this.settings.onEventMethodCall({type:"screen",options:i});var a={type:"screen",properties:Nt({},n),options:Nt({},i),integrations:Nt({},o)};return e!==null&&(a.category=e),t!==null&&(a.name=t),this.normalize(Nt(Nt({},this.baseEvent()),a))},r.prototype.identify=function(e,t,n,i){return this.settings.onEventMethodCall({type:"identify",options:n}),this.normalize(Nt(Nt({},this.baseEvent()),{type:"identify",userId:e,traits:t??{},options:Nt({},n),integrations:i}))},r.prototype.group=function(e,t,n,i){return this.settings.onEventMethodCall({type:"group",options:n}),this.normalize(Nt(Nt({},this.baseEvent()),{type:"group",traits:t??{},options:Nt({},n),integrations:Nt({},i),groupId:e}))},r.prototype.alias=function(e,t,n,i){this.settings.onEventMethodCall({type:"alias",options:n});var o={userId:e,type:"alias",options:Nt({},n),integrations:Nt({},i)};return t!==null&&(o.previousId=t),e===void 0?this.normalize(Nt(Nt({},o),this.baseEvent())):this.normalize(Nt(Nt({},this.baseEvent()),o))},r.prototype.baseEvent=function(){return{integrations:{},options:{}}},r.prototype.context=function(e){var t,n=["userId","anonymousId","timestamp","messageId"];delete e.integrations;var i=Object.keys(e),o=(t=e.context)!==null&&t!==void 0?t:{},a={};return i.forEach(function(s){s!=="context"&&(n.includes(s)?rS(a,s,e[s]):rS(o,s,e[s]))}),[o,a]},r.prototype.normalize=function(e){var t,n,i=Object.keys((t=e.integrations)!==null&&t!==void 0?t:{}).reduce(function(h,d){var v,y;return Nt(Nt({},h),(v={},v[d]=!!(!((y=e.integrations)===null||y===void 0)&&y[d]),v))},{});e.options=m7(e.options||{},function(h,d){return d!==void 0});var o=Nt(Nt({},i),(n=e.options)===null||n===void 0?void 0:n.integrations),a=e.options?this.context(e.options):[],s=a[0],u=a[1],l=e.options,c=AL(e,["options"]),f=Nt(Nt(Nt(Nt({timestamp:new Date},c),{context:s,integrations:o}),u),{messageId:l.messageId||this.settings.createMessageId()});return this.settings.onFinishedEvent(f),C7(f),f},r}();function R7(r,e){return new Promise(function(t,n){var i=setTimeout(function(){n(Error("Promise timed out"))},e);r.then(function(o){return clearTimeout(i),t(o)}).catch(n)})}function I7(r){return new Promise(function(e){return setTimeout(e,r)})}function k7(r,e,t){var n=function(){try{return Promise.resolve(e(r))}catch(i){return Promise.reject(i)}};return I7(t).then(function(){return R7(n(),1e3)}).catch(function(i){r==null||r.log("warn","Callback Error",{error:i}),r==null||r.stats.increment("callback_error")}).then(function(){return r})}var RL=function(){var r,e,t=!1,n=new Promise(function(i,o){r=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];t=!0,i.apply(void 0,a)},e=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];t=!0,o.apply(void 0,a)}});return{resolve:r,reject:e,promise:n,isSettled:function(){return t}}},cT=function(){function r(e){var t;this.callbacks={},this.warned=!1,this.maxListeners=(t=e==null?void 0:e.maxListeners)!==null&&t!==void 0?t:10}return r.prototype.warnIfPossibleMemoryLeak=function(e){this.warned||this.maxListeners&&this.callbacks[e].length>this.maxListeners&&(console.warn("Event Emitter: Possible memory leak detected; ".concat(String(e)," has exceeded ").concat(this.maxListeners," listeners.")),this.warned=!0)},r.prototype.on=function(e,t){return this.callbacks[e]?(this.callbacks[e].push(t),this.warnIfPossibleMemoryLeak(e)):this.callbacks[e]=[t],this},r.prototype.once=function(e,t){var n=this,i=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];n.off(e,i),t.apply(n,o)};return this.on(e,i),this},r.prototype.off=function(e,t){var n,i=(n=this.callbacks[e])!==null&&n!==void 0?n:[],o=i.filter(function(a){return a!==t});return this.callbacks[e]=o,this},r.prototype.emit=function(e){for(var t=this,n,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];var a=(n=this.callbacks[e])!==null&&n!==void 0?n:[];return a.forEach(function(s){s.apply(t,i)}),this},r}();function D7(r){var e=Math.random()+1,t=r.minTimeout,n=t===void 0?500:t,i=r.factor,o=i===void 0?2:i,a=r.attempt,s=r.maxTimeout,u=s===void 0?1/0:s;return Math.min(e*n*Math.pow(o,a),u)}var IL="onRemoveFromFuture",fT=function(r){Ks(e,r);function e(t,n,i){var o=r.call(this)||this;return o.future=[],o.maxAttempts=t,o.queue=n,o.seen=i??{},o}return e.prototype.push=function(){for(var t=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=n.map(function(a){var s=t.updateAttempts(a);return s>t.maxAttempts||t.includes(a)?!1:(t.queue.push(a),!0)});return this.queue=this.queue.sort(function(a,s){return t.getAttempts(a)-t.getAttempts(s)}),o},e.prototype.pushWithBackoff=function(t,n){var i=this;if(n===void 0&&(n=0),n==0&&this.getAttempts(t)===0)return this.push(t)[0];var o=this.updateAttempts(t);if(o>this.maxAttempts||this.includes(t))return!1;var a=D7({attempt:o-1});return n>0&&a<n&&(a=n),setTimeout(function(){i.queue.push(t),i.future=i.future.filter(function(s){return s.id!==t.id}),i.emit(IL)},a),this.future.push(t),!0},e.prototype.getAttempts=function(t){var n;return(n=this.seen[t.id])!==null&&n!==void 0?n:0},e.prototype.updateAttempts=function(t){return this.seen[t.id]=this.getAttempts(t)+1,this.getAttempts(t)},e.prototype.includes=function(t){return this.queue.includes(t)||this.future.includes(t)||!!this.queue.find(function(n){return n.id===t.id})||!!this.future.find(function(n){return n.id===t.id})},e.prototype.pop=function(){return this.queue.shift()},Object.defineProperty(e.prototype,"length",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"todo",{get:function(){return this.queue.length+this.future.length},enumerable:!1,configurable:!0}),e}(cT),rp=256,E0=[],o0;for(;rp--;)E0[rp]=(rp+256).toString(16).substring(1);function hT(){var r=0,e,t="";if(!o0||rp+16>256){for(o0=Array(r=256);r--;)o0[r]=256*Math.random()|0;r=rp=0}for(;r<16;r++)e=o0[rp+r],r==6?t+=E0[e&15|64]:r==8?t+=E0[e&63|128]:t+=E0[e],r&1&&r>1&&r<11&&(t+="-");return rp++,t}var M7=function(){function r(){this._logs=[]}return r.prototype.log=function(e,t,n){var i=new Date;this._logs.push({level:e,message:t,time:i,extras:n})},Object.defineProperty(r.prototype,"logs",{get:function(){return this._logs},enumerable:!1,configurable:!0}),r.prototype.flush=function(){if(this.logs.length>1){var e=this._logs.reduce(function(t,n){var i,o,a,s=Nt(Nt({},n),{json:JSON.stringify(n.extras,null," "),extras:n.extras});delete s.time;var u=(a=(o=n.time)===null||o===void 0?void 0:o.toISOString())!==null&&a!==void 0?a:"";return t[u]&&(u="".concat(u,"-").concat(Math.random())),Nt(Nt({},t),(i={},i[u]=s,i))},{});console.table&&console.table(e)}else this.logs.forEach(function(t){var n=t.level,i=t.message,o=t.extras;n==="info"||n==="debug"||console[n](i,o??"")});this._logs=[]},r}(),L7=function(r){var e={gauge:"g",counter:"c"};return e[r]},kL=function(){function r(){this.metrics=[]}return r.prototype.increment=function(e,t,n){t===void 0&&(t=1),this.metrics.push({metric:e,value:t,tags:n??[],type:"counter",timestamp:Date.now()})},r.prototype.gauge=function(e,t,n){this.metrics.push({metric:e,value:t,tags:n??[],type:"gauge",timestamp:Date.now()})},r.prototype.flush=function(){var e=this.metrics.map(function(t){return Nt(Nt({},t),{tags:t.tags.join(",")})});console.table&&console.table(e),this.metrics=[]},r.prototype.serialize=function(){return this.metrics.map(function(e){return{m:e.metric,v:e.value,t:e.tags,k:L7(e.type),e:e.timestamp}})},r}(),N7=function(r){Ks(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.gauge=function(){},e.prototype.increment=function(){},e.prototype.flush=function(){},e.prototype.serialize=function(){return[]},e}(kL),jg=function(){function r(e){var t,n,i;this.retry=(t=e.retry)!==null&&t!==void 0?t:!0,this.type=(n=e.type)!==null&&n!==void 0?n:"plugin Error",this.reason=(i=e.reason)!==null&&i!==void 0?i:""}return r}(),V0=function(){function r(e,t,n,i){t===void 0&&(t=hT()),n===void 0&&(n=new N7),i===void 0&&(i=new M7),this.attempts=0,this.event=e,this._id=t,this.logger=i,this.stats=n}return r.system=function(){},r.prototype.isSame=function(e){return e.id===this.id},r.prototype.cancel=function(e){throw e||new jg({reason:"Context Cancel"})},r.prototype.log=function(e,t,n){this.logger.log(e,t,n)},Object.defineProperty(r.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),r.prototype.updateEvent=function(e,t){var n;if(e.split(".")[0]==="integrations"){var i=e.split(".")[1];if(((n=this.event.integrations)===null||n===void 0?void 0:n[i])===!1)return this.event}return rS(this.event,e,t),this.event},r.prototype.failedDelivery=function(){return this._failedDelivery},r.prototype.setFailedDelivery=function(e){this._failedDelivery=e},r.prototype.logs=function(){return this.logger.logs},r.prototype.flush=function(){this.logger.flush(),this.stats.flush()},r.prototype.toJSON=function(){return{id:this._id,event:this.event,logs:this.logger.logs,metrics:this.stats.metrics}},r}();function j7(r,e){var t={};return r.forEach(function(n){var i,o=void 0;{var a=n[e];o=typeof a!="string"?JSON.stringify(a):a}o!==void 0&&(t[o]=qo(qo([],(i=t[o])!==null&&i!==void 0?i:[],!0),[n],!1))}),t}var F7=function(r){return typeof r=="object"&&r!==null&&"then"in r&&typeof r.then=="function"},B7=function(){var r,e,t=0;return{done:function(){return r},run:function(n){var i=n();return F7(i)&&(++t===1&&(r=new Promise(function(o){return e=o})),i.finally(function(){return--t===0&&e()})),i}}};function U7(r){return ar(this,void 0,void 0,function(){var e;return sr(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,r()];case 1:return[2,t.sent()];case 2:return e=t.sent(),[2,Promise.reject(e)];case 3:return[2]}})})}function $y(r,e){r.log("debug","plugin",{plugin:e.name});var t=new Date().getTime(),n=e[r.event.type];if(n===void 0)return Promise.resolve(r);var i=U7(function(){return n.apply(e,[r])}).then(function(o){var a=new Date().getTime()-t;return o.stats.gauge("plugin_time",a,["plugin:".concat(e.name)]),o}).catch(function(o){if(o instanceof jg&&o.type==="middleware_cancellation")throw o;return o instanceof jg?(r.log("warn",o.type,{plugin:e.name,error:o}),o):(r.log("error","plugin Error",{plugin:e.name,error:o}),r.stats.increment("plugin_error",1,["plugin:".concat(e.name)]),o)});return i}function z7(r,e){return $y(r,e).then(function(t){if(t instanceof V0)return t;r.log("debug","Context canceled"),r.stats.increment("context_canceled"),r.cancel(t)})}var q7=function(r){Ks(e,r);function e(t){var n=r.call(this)||this;return n.criticalTasks=B7(),n.plugins=[],n.failedInitializations=[],n.flushing=!1,n.queue=t,n.queue.on(IL,function(){n.scheduleFlush(0)}),n}return e.prototype.register=function(t,n,i){return ar(this,void 0,void 0,function(){var o,a,s=this;return sr(this,function(u){switch(u.label){case 0:return this.plugins.push(n),o=function(l){s.failedInitializations.push(n.name),s.emit("initialization_failure",n),console.warn(n.name,l),t.log("warn","Failed to load destination",{plugin:n.name,error:l}),s.plugins=s.plugins.filter(function(c){return c!==n})},n.type==="destination"&&n.name!=="Segment.io"?(n.load(t,i).catch(o),[3,4]):[3,1];case 1:return u.trys.push([1,3,,4]),[4,n.load(t,i)];case 2:return u.sent(),[3,4];case 3:return a=u.sent(),o(a),[3,4];case 4:return[2]}})})},e.prototype.deregister=function(t,n,i){return ar(this,void 0,void 0,function(){var o;return sr(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),n.unload?[4,Promise.resolve(n.unload(t,i))]:[3,2];case 1:a.sent(),a.label=2;case 2:return this.plugins=this.plugins.filter(function(s){return s.name!==n.name}),[3,4];case 3:return o=a.sent(),t.log("warn","Failed to unload destination",{plugin:n.name,error:o}),[3,4];case 4:return[2]}})})},e.prototype.dispatch=function(t){return ar(this,void 0,void 0,function(){var n;return sr(this,function(i){return t.log("debug","Dispatching"),t.stats.increment("message_dispatched"),this.queue.push(t),n=this.subscribeToDelivery(t),this.scheduleFlush(0),[2,n]})})},e.prototype.subscribeToDelivery=function(t){return ar(this,void 0,void 0,function(){var n=this;return sr(this,function(i){return[2,new Promise(function(o){var a=function(s,u){s.isSame(t)&&(n.off("flush",a),o(s))};n.on("flush",a)})]})})},e.prototype.dispatchSingle=function(t){return ar(this,void 0,void 0,function(){var n=this;return sr(this,function(i){return t.log("debug","Dispatching"),t.stats.increment("message_dispatched"),this.queue.updateAttempts(t),t.attempts=1,[2,this.deliver(t).catch(function(o){var a=n.enqueuRetry(o,t);return a?n.subscribeToDelivery(t):(t.setFailedDelivery({reason:o}),t)})]})})},e.prototype.isEmpty=function(){return this.queue.length===0},e.prototype.scheduleFlush=function(t){var n=this;t===void 0&&(t=500),!this.flushing&&(this.flushing=!0,setTimeout(function(){n.flush().then(function(){setTimeout(function(){n.flushing=!1,n.queue.length&&n.scheduleFlush(0)},0)})},t))},e.prototype.deliver=function(t){return ar(this,void 0,void 0,function(){var n,i,o,a;return sr(this,function(s){switch(s.label){case 0:return[4,this.criticalTasks.done()];case 1:s.sent(),n=Date.now(),s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this.flushOne(t)];case 3:return t=s.sent(),i=Date.now()-n,this.emit("delivery_success",t),t.stats.gauge("delivered",i),t.log("debug","Delivered",t.event),[2,t];case 4:throw o=s.sent(),a=o,t.log("error","Failed to deliver",a),this.emit("delivery_failure",t,a),t.stats.increment("delivery_failed"),o;case 5:return[2]}})})},e.prototype.enqueuRetry=function(t,n){var i=!(t instanceof jg)||t.retry;return i?this.queue.pushWithBackoff(n):!1},e.prototype.flush=function(){return ar(this,void 0,void 0,function(){var t,n,i;return sr(this,function(o){switch(o.label){case 0:if(this.queue.length===0)return[2,[]];if(t=this.queue.pop(),!t)return[2,[]];t.attempts=this.queue.getAttempts(t),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.deliver(t)];case 2:return t=o.sent(),this.emit("flush",t,!0),[3,4];case 3:return n=o.sent(),i=this.enqueuRetry(n,t),i||(t.setFailedDelivery({reason:n}),this.emit("flush",t,!1)),[2,[]];case 4:return[2,[t]]}})})},e.prototype.isReady=function(){return!0},e.prototype.availableExtensions=function(t){var n=this.plugins.filter(function(d){var v,y,w;if(d.type!=="destination"&&d.name!=="Segment.io")return!0;var b=void 0;return(v=d.alternativeNames)===null||v===void 0||v.forEach(function(p){t[p]!==void 0&&(b=t[p])}),(w=(y=t[d.name])!==null&&y!==void 0?y:b)!==null&&w!==void 0?w:(d.name==="Segment.io"?!0:t.All)!==!1}),i=j7(n,"type"),o=i.before,a=o===void 0?[]:o,s=i.enrichment,u=s===void 0?[]:s,l=i.destination,c=l===void 0?[]:l,f=i.after,h=f===void 0?[]:f;return{before:a,enrichment:u,destinations:c,after:h}},e.prototype.flushOne=function(t){var n,i;return ar(this,void 0,void 0,function(){var o,a,s,u,l,c,v,f,h,d,v,y,w,b,p;return sr(this,function(_){switch(_.label){case 0:if(!this.isReady())throw new Error("Not ready");t.attempts>1&&this.emit("delivery_retry",t),o=this.availableExtensions((n=t.event.integrations)!==null&&n!==void 0?n:{}),a=o.before,s=o.enrichment,u=0,l=a,_.label=1;case 1:return u<l.length?(c=l[u],[4,z7(t,c)]):[3,4];case 2:v=_.sent(),v instanceof V0&&(t=v),this.emit("message_enriched",t,c),_.label=3;case 3:return u++,[3,1];case 4:f=0,h=s,_.label=5;case 5:return f<h.length?(d=h[f],[4,$y(t,d)]):[3,8];case 6:v=_.sent(),v instanceof V0&&(t=v),this.emit("message_enriched",t,d),_.label=7;case 7:return f++,[3,5];case 8:return y=this.availableExtensions((i=t.event.integrations)!==null&&i!==void 0?i:{}),w=y.destinations,b=y.after,[4,new Promise(function(O,P){setTimeout(function(){var R=w.map(function(T){return $y(t,T)});Promise.all(R).then(O).catch(P)},0)})];case 9:return _.sent(),t.stats.increment("message_delivered"),this.emit("message_delivered",t),p=b.map(function(O){return $y(t,O)}),[4,Promise.all(p)];case 10:return _.sent(),[2,t]}})})},e}(cT),G7=function(r,e){var t=Date.now()-r;return Math.max((e??300)-t,0)};function V7(r,e,t,n){return ar(this,void 0,void 0,function(){var i,o;return sr(this,function(a){switch(a.label){case 0:return t.emit("dispatch_start",r),i=Date.now(),e.isEmpty()?[4,e.dispatchSingle(r)]:[3,2];case 1:return o=a.sent(),[3,4];case 2:return[4,e.dispatch(r)];case 3:o=a.sent(),a.label=4;case 4:return n!=null&&n.callback?[4,k7(o,n.callback,G7(i,n.timeout))]:[3,6];case 5:o=a.sent(),a.label=6;case 6:return n!=null&&n.debug&&o.flush(),[2,o]}})})}function W7(r,e,t,n){var i,o=[r,e,t,n],a=fc(r)?r.event:r;if(!a||!Hd(a))throw new Error("Event missing");var s=fc(r)?(i=r.properties)!==null&&i!==void 0?i:{}:fc(e)?e:{},u={};Rg(t)||(u=t??{}),fc(r)&&!Rg(e)&&(u=e??{});var l=o.find(Rg);return[a,s,u,l]}function fk(r,e,t,n,i){var o,a,s=null,u=null,l=[r,e,t,n,i],c=l.filter(Hd);c.length===1?Hd(l[1])?(u=l[1],s=null):(u=c[0],s=null):c.length===2&&(typeof l[0]=="string"&&(s=l[0]),typeof l[1]=="string"&&(u=l[1]));var f=l.find(Rg),h=l.filter(fc);return h.length===1?fc(l[2])?(a={},o=l[2]):fc(l[3])?(o={},a=l[3]):(o=h[0],a={}):h.length===2&&(o=h[0],a=h[1]),[s,u,o??(o={}),a??(a={}),f]}var hk=function(r){return function(){for(var e,t,n,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];for(var a={},s=["callback","options","traits","id"],u=0,l=i;u<l.length;u++){var c=l[u],f=s.pop();if(f==="id"){if(Hd(c)||nS(c)){a.id=c.toString();continue}if(c==null)continue;f=s.pop()}if((f==="traits"||f==="options")&&(c==null||fc(c))&&(a[f]=c),Rg(c)){a.callback=c;break}}return[(e=a.id)!==null&&e!==void 0?e:r.id(),(t=a.traits)!==null&&t!==void 0?t:{},(n=a.options)!==null&&n!==void 0?n:{},a.callback]}};function H7(r,e,t,n){nS(r)&&(r=r.toString()),nS(e)&&(e=e.toString());var i=[r,e,t,n],o=i.filter(Hd),a=o[0],s=a===void 0?r:a,u=o[1],l=u===void 0?null:u,c=i.filter(fc)[0],f=c===void 0?{}:c,h=i.find(Rg);return[s,l,f,h]}function dT(){return typeof window<"u"}function f$(){return!dT()}function $7(){return dT()?window.navigator.onLine:!0}function im(){return!$7()}function Y7(r,e){return e=e||{},new Promise(function(t,n){var i=new XMLHttpRequest,o=[],a=[],s={},u=function(){return{ok:(i.status/100|0)==2,statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:u,headers:{keys:function(){return o},entries:function(){return a},get:function(c){return s[c.toLowerCase()]},has:function(c){return c.toLowerCase()in s}}}};for(var l in i.open(e.method||"get",r,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(c,f,h){o.push(f=f.toLowerCase()),a.push([f,h]),s[f]=s[f]?s[f]+","+h:h}),t(u())},i.onerror=n,i.withCredentials=e.credentials=="include",e.headers)i.setRequestHeader(l,e.headers[l]);i.send(e.body||null)})}var vT=function(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:null},Cb=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=vT();return(t&&t.fetch||Y7).apply(void 0,r)},Pb="1.81.0",DL="api.segment.io/v1",X7=function(r,e,t){var n=e.reduce(function(i,o){var a=o.split(":"),s=a[0],u=a[1];return i[s]=u,i},{});return{type:"Counter",metric:r,value:1,tags:Nt(Nt({},n),{library:"analytics.js",library_version:"npm:next-".concat(Pb)})}};function Ox(r){console.error("Error sending segment performance metrics",r)}var K7=function(){function r(e){var t=this,n,i,o,a,s;if(this.host=(n=e==null?void 0:e.host)!==null&&n!==void 0?n:DL,this.sampleRate=(i=e==null?void 0:e.sampleRate)!==null&&i!==void 0?i:1,this.flushTimer=(o=e==null?void 0:e.flushTimer)!==null&&o!==void 0?o:30*1e3,this.maxQueueSize=(a=e==null?void 0:e.maxQueueSize)!==null&&a!==void 0?a:20,this.protocol=(s=e==null?void 0:e.protocol)!==null&&s!==void 0?s:"https",this.queue=[],this.sampleRate>0){var u=!1,l=function(){u||(u=!0,t.flush().catch(Ox),u=!1,setTimeout(l,t.flushTimer))};l()}}return r.prototype.increment=function(e,t){if(e.includes("analytics_js.")&&t.length!==0&&!(Math.random()>this.sampleRate)&&!(this.queue.length>=this.maxQueueSize)){var n=X7(e,t);this.queue.push(n),e.includes("error")&&this.flush().catch(Ox)}},r.prototype.flush=function(){return ar(this,void 0,void 0,function(){var e=this;return sr(this,function(t){switch(t.label){case 0:return this.queue.length<=0?[2]:[4,this.send().catch(function(n){Ox(n),e.sampleRate=0})];case 1:return t.sent(),[2]}})})},r.prototype.send=function(){return ar(this,void 0,void 0,function(){var e,t,n;return sr(this,function(i){return e={series:this.queue},this.queue=[],t={"Content-Type":"text/plain"},n="".concat(this.protocol,"://").concat(this.host,"/m"),[2,Cb(n,{headers:t,body:JSON.stringify(e),method:"POST"})]})})},r}(),a0,ML=function(r){Ks(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.initRemoteMetrics=function(t){a0=new K7(t)},e.prototype.increment=function(t,n,i){r.prototype.increment.call(this,t,n,i),a0==null||a0.increment(t,i??[])},e}(kL),Sh=function(r){Ks(e,r);function e(t,n){return r.call(this,t,n,new ML)||this}return e.system=function(){return new this({type:"track",event:"system"})},e}(V0);function Z7(r){return Object.prototype.toString.call(r).slice(8,-1).toLowerCase()==="object"}var LL="bpc",NL=function(r,e,t,n,i,o){return{__t:LL,c:e,p:n,u:r,s:t,t:i,r:o}},Q7=Object.keys(NL("","","","","",""));function J7(r){if(!Z7(r)||r.__t!==LL)return!1;for(var e in r)if(!Q7.includes(e))return!1;return!0}var eV=function(r,e){return r.indexOf("?")>-1?r:r+e},tV=function(r){var e=r.indexOf("#");return e===-1?r:r.slice(0,e)},rV=function(r){try{return new URL(r).pathname}catch{return r[0]==="/"?r:"/"+r}},jL=function(r){var e=r.c,t=r.p,n=r.s,i=r.u,o=r.r,a=r.t,s=e?rV(e):t,u=e?eV(e,n):tV(i);return{path:s,referrer:o,search:n,title:a,url:u}},FL=function(){var r=document.querySelector("link[rel='canonical']");return NL(location.href,r&&r.getAttribute("href")||void 0,location.search,location.pathname,document.title,document.referrer)},nV=function(){return jL(FL())};function iV(r,e){return Object.assign.apply(Object,qo([{}],e.map(function(t){var n;if(r&&Object.prototype.hasOwnProperty.call(r,t))return n={},n[t]=r[t],n}),!1))}var gg=function(r,e){e===void 0&&(e=nV());var t=r.context,n;r.type==="page"&&(n=r.properties&&iV(r.properties,Object.keys(e)),r.properties=Nt(Nt(Nt({},e),r.properties),r.name?{name:r.name}:{})),t.page=Nt(Nt(Nt({},e),n),t.page)},oV=function(r){Ks(e,r);function e(t){var n=r.call(this,{createMessageId:function(){return"ajs-next-".concat(Date.now(),"-").concat(hT())},onEventMethodCall:function(i){var o=i.options;n.maybeUpdateAnonId(o)},onFinishedEvent:function(i){return n.addIdentity(i),i}})||this;return n.user=t,n}return e.prototype.maybeUpdateAnonId=function(t){t!=null&&t.anonymousId&&this.user.anonymousId(t.anonymousId)},e.prototype.addIdentity=function(t){this.user.id()&&(t.userId=this.user.id()),this.user.anonymousId()&&(t.anonymousId=this.user.anonymousId())},e.prototype.track=function(t,n,i,o,a){var s=r.prototype.track.call(this,t,n,i,o);return gg(s,a),s},e.prototype.page=function(t,n,i,o,a,s){var u=r.prototype.page.call(this,t,n,i,o,a);return gg(u,s),u},e.prototype.screen=function(t,n,i,o,a,s){var u=r.prototype.screen.call(this,t,n,i,o,a);return gg(u,s),u},e.prototype.identify=function(t,n,i,o,a){var s=r.prototype.identify.call(this,t,n,i,o);return gg(s,a),s},e.prototype.group=function(t,n,i,o,a){var s=r.prototype.group.call(this,t,n,i,o);return gg(s,a),s},e.prototype.alias=function(t,n,i,o,a){var s=r.prototype.alias.call(this,t,n,i,o);return gg(s,a),s},e}(A7),aV=function(r){return"addMiddleware"in r&&r.type==="destination"},hf={getItem:function(){},setItem:function(){},removeItem:function(){}};try{hf=dT()&&window.localStorage?window.localStorage:hf}catch(r){console.warn("Unable to access localStorage",r)}function BL(r){var e=hf.getItem(r);return(e?JSON.parse(e):[]).map(function(t){return new Sh(t.event,t.id)})}function sV(r,e){var t=BL(r),n=qo(qo([],e,!0),t,!0),i=n.reduce(function(o,a){var s;return Nt(Nt({},o),(s={},s[a.id]=a,s))},{});hf.setItem(r,JSON.stringify(Object.values(i)))}function UL(r){var e=hf.getItem(r);return e?JSON.parse(e):{}}function uV(r,e){var t=UL(r);hf.setItem(r,JSON.stringify(Nt(Nt({},t),e)))}function dk(r){hf.removeItem(r)}var lV=function(){return new Date().getTime()};function iS(r,e,t){t===void 0&&(t=0);var n=50,i="persisted-queue:v1:".concat(r,":lock"),o=function(l){return new Date().getTime()>l},a=hf.getItem(i),s=a?JSON.parse(a):null,u=s===null||o(s);if(u){hf.setItem(i,JSON.stringify(lV()+n)),e(),hf.removeItem(i);return}!u&&t<3?setTimeout(function(){iS(r,e,t+1)},n):console.error("Unable to retrieve lock")}var pT=function(r){Ks(e,r);function e(t,n){var i=r.call(this,t,[])||this,o="persisted-queue:v1:".concat(n,":items"),a="persisted-queue:v1:".concat(n,":seen"),s=[],u={};return iS(n,function(){try{s=BL(o),u=UL(a),dk(o),dk(a),i.queue=qo(qo([],s,!0),i.queue,!0),i.seen=Nt(Nt({},u),i.seen)}catch(l){console.error(l)}}),window.addEventListener("pagehide",function(){if(i.todo>0){var l=qo(qo([],i.queue,!0),i.future,!0);try{iS(n,function(){sV(o,l),uV(a,i.seen)})}catch(c){console.error(c)}}}),i}return e}(fT),cV=function(r){Ks(e,r);function e(t){return r.call(this,typeof t=="string"?new pT(4,t):t)||this}return e.prototype.flush=function(){return ar(this,void 0,void 0,function(){return sr(this,function(t){return im()?[2,[]]:[2,r.prototype.flush.call(this)]})})},e}(q7);function gT(r){for(var e=r.constructor.prototype,t=0,n=Object.getOwnPropertyNames(e);t<n.length;t++){var i=n[t];if(i!=="constructor"){var o=Object.getOwnPropertyDescriptor(r.constructor.prototype,i);o&&typeof o.value=="function"&&(r[i]=r[i].bind(r))}}return r}/*! js-cookie v3.0.1 | MIT */function s0(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)r[n]=t[n]}return r}var fV={read:function(r){return r[0]==='"'&&(r=r.slice(1,-1)),r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(r){return encodeURIComponent(r).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function oS(r,e){function t(i,o,a){if(!(typeof document>"u")){a=s0({},e,a),typeof a.expires=="number"&&(a.expires=new Date(Date.now()+a.expires*864e5)),a.expires&&(a.expires=a.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var u in a)a[u]&&(s+="; "+u,a[u]!==!0&&(s+="="+a[u].split(";")[0]));return document.cookie=i+"="+r.write(o,i)+s}}function n(i){if(!(typeof document>"u"||arguments.length&&!i)){for(var o=document.cookie?document.cookie.split("; "):[],a={},s=0;s<o.length;s++){var u=o[s].split("="),l=u.slice(1).join("=");try{var c=decodeURIComponent(u[0]);if(a[c]=r.read(l,c),i===c)break}catch{}}return i?a[i]:a}}return Object.create({set:t,get:n,remove:function(i,o){t(i,"",s0({},o,{expires:-1}))},withAttributes:function(i){return oS(this.converter,s0({},this.attributes,i))},withConverter:function(i){return oS(s0({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(r)}})}var wh=oS(fV,{path:"/"});function hV(r){var e=r.hostname,t=e.split("."),n=t[t.length-1],i=[];if(t.length===4&&parseInt(n,10)>0||t.length<=1)return i;for(var o=t.length-2;o>=0;--o)i.push(t.slice(o).join("."));return i}function dV(r){try{return new URL(r)}catch{return}}function zL(r){var e=dV(r);if(e)for(var t=hV(e),n=0;n<t.length;++n){var i="__tld__",o=t[n],a={domain:"."+o};try{if(wh.set(i,"1",a),wh.get(i))return wh.remove(i,a),o}catch{return}}}var vV=365,qL=function(){function r(e){e===void 0&&(e=r.defaults),this.options=Nt(Nt({},r.defaults),e)}return Object.defineProperty(r,"defaults",{get:function(){return{maxage:vV,domain:zL(window.location.href),path:"/",sameSite:"Lax"}},enumerable:!1,configurable:!0}),r.prototype.opts=function(){return{sameSite:this.options.sameSite,expires:this.options.maxage,domain:this.options.domain,path:this.options.path,secure:this.options.secure}},r.prototype.get=function(e){var t;try{var n=wh.get(e);if(n==null)return null;try{return(t=JSON.parse(n))!==null&&t!==void 0?t:null}catch{return n??null}}catch{return null}},r.prototype.set=function(e,t){typeof t=="string"?wh.set(e,t,this.opts()):t===null?wh.remove(e,this.opts()):wh.set(e,JSON.stringify(t),this.opts())},r.prototype.remove=function(e){return wh.remove(e,this.opts())},r}(),pV=function(){function r(){}return r.prototype.localStorageWarning=function(e,t){console.warn("Unable to access ".concat(e,", localStorage may be ").concat(t))},r.prototype.get=function(e){var t;try{var n=localStorage.getItem(e);if(n===null)return null;try{return(t=JSON.parse(n))!==null&&t!==void 0?t:null}catch{return n??null}}catch{return this.localStorageWarning(e,"unavailable"),null}},r.prototype.set=function(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch{this.localStorageWarning(e,"full")}},r.prototype.remove=function(e){try{return localStorage.removeItem(e)}catch{this.localStorageWarning(e,"unavailable")}},r}(),yT=function(){function r(){this.cache={}}return r.prototype.get=function(e){var t;return(t=this.cache[e])!==null&&t!==void 0?t:null},r.prototype.set=function(e,t){this.cache[e]=t},r.prototype.remove=function(e){delete this.cache[e]},r}(),Hs={Cookie:"cookie",LocalStorage:"localStorage",Memory:"memory"};function GL(r){return r&&r.stores&&Array.isArray(r.stores)&&r.stores.every(function(e){return Object.values(Hs).includes(e)})}function gV(r){return typeof r=="object"&&r.name!==void 0}var xx=function(r,e,t,n){console.warn("".concat(r.constructor.name,": Can't ").concat(e,' key "').concat(t,'" | Err: ').concat(n))},np=function(){function r(e){this.stores=e}return r.prototype.get=function(e){for(var t=null,n=0,i=this.stores;n<i.length;n++){var o=i[n];try{if(t=o.get(e),t!=null)return t}catch(a){xx(o,"get",e,a)}}return null},r.prototype.set=function(e,t){this.stores.forEach(function(n){try{n.set(e,t)}catch(i){xx(n,"set",e,i)}})},r.prototype.clear=function(e){this.stores.forEach(function(t){try{t.remove(e)}catch(n){xx(t,"remove",e,n)}})},r.prototype.getAndSync=function(e){var t=this.get(e),n=typeof t=="number"?t.toString():t;return this.set(e,n),n},r}();function aS(r){var e=r.map(function(t){var n,i;switch(gV(t)?(n=t.name,i=t.settings):n=t,n){case Hs.Cookie:return new qL(i);case Hs.LocalStorage:return new pV;case Hs.Memory:return new yT;default:throw new Error("Unknown Store Type: ".concat(t))}});return e}function VL(r,e){return r.map(function(t){return e&&t===Hs.Cookie?{name:t,settings:e}:t})}var Xv={persist:!0,cookie:{key:"ajs_user_id",oldKey:"ajs_user"},localStorage:{key:"ajs_user_traits"}},WL=function(){function r(e,t){e===void 0&&(e=Xv);var n=this,i,o,a,s;this.options={},this.id=function(l){if(n.options.disable)return null;var c=n.identityStore.getAndSync(n.idKey);if(l!==void 0){n.identityStore.set(n.idKey,l);var f=l!==c&&c!==null&&l!==null;f&&n.anonymousId(null)}var h=n.identityStore.getAndSync(n.idKey);if(h)return h;var d=n.legacyUserStore.get(Xv.cookie.oldKey);return d?typeof d=="object"?d.id:d:null},this.anonymousId=function(l){var c,f;if(n.options.disable)return null;if(l===void 0){var h=(c=n.identityStore.getAndSync(n.anonKey))!==null&&c!==void 0?c:(f=n.legacySIO())===null||f===void 0?void 0:f[0];if(h)return h}return l===null?(n.identityStore.set(n.anonKey,null),n.identityStore.getAndSync(n.anonKey)):(n.identityStore.set(n.anonKey,l??hT()),n.identityStore.getAndSync(n.anonKey))},this.traits=function(l){var c;if(!n.options.disable)return l===null&&(l={}),l&&n.traitsStore.set(n.traitsKey,l??{}),(c=n.traitsStore.get(n.traitsKey))!==null&&c!==void 0?c:{}},this.options=Nt(Nt({},Xv),e),this.cookieOptions=t,this.idKey=(o=(i=e.cookie)===null||i===void 0?void 0:i.key)!==null&&o!==void 0?o:Xv.cookie.key,this.traitsKey=(s=(a=e.localStorage)===null||a===void 0?void 0:a.key)!==null&&s!==void 0?s:Xv.localStorage.key,this.anonKey="ajs_anonymous_id",this.identityStore=this.createStorage(this.options,t),this.legacyUserStore=this.createStorage(this.options,t,function(l){return l===Hs.Cookie}),this.traitsStore=this.createStorage(this.options,t,function(l){return l!==Hs.Cookie});var u=this.legacyUserStore.get(Xv.cookie.oldKey);u&&typeof u=="object"&&(u.id&&this.id(u.id),u.traits&&this.traits(u.traits)),gT(this)}return r.prototype.legacySIO=function(){var e=this.legacyUserStore.get("_sio");if(!e)return null;var t=e.split("----"),n=t[0],i=t[1];return[n,i]},r.prototype.identify=function(e,t){if(!this.options.disable){t=t??{};var n=this.id();(n===null||n===e)&&(t=Nt(Nt({},this.traits()),t)),e&&this.id(e),this.traits(t)}},r.prototype.logout=function(){this.anonymousId(null),this.id(null),this.traits({})},r.prototype.reset=function(){this.logout(),this.identityStore.clear(this.idKey),this.identityStore.clear(this.anonKey),this.traitsStore.clear(this.traitsKey)},r.prototype.load=function(){return new r(this.options,this.cookieOptions)},r.prototype.save=function(){return!0},r.prototype.createStorage=function(e,t,n){var i=[Hs.LocalStorage,Hs.Cookie,Hs.Memory];return e.disable?new np([]):e.persist?(e.storage!==void 0&&e.storage!==null&&GL(e.storage)&&(i=e.storage.stores),e.localStorageFallbackDisabled&&(i=i.filter(function(o){return o!==Hs.LocalStorage})),n&&(i=i.filter(n)),new np(aS(VL(i,t)))):new np([new yT])},r.defaults=Xv,r}(),vk={persist:!0,cookie:{key:"ajs_group_id"},localStorage:{key:"ajs_group_properties"}},yV=function(r){Ks(e,r);function e(t,n){t===void 0&&(t=vk);var i=r.call(this,Nt(Nt({},vk),t),n)||this;return i.anonymousId=function(o){},gT(i),i}return e}(WL),mT="analytics";function HL(){return window[mT]}function mV(r){mT=r}function bV(r){window[mT]=r}var _V=function(r){return typeof r=="object"&&r!==null&&"then"in r&&typeof r.then=="function"},$L=function(r,e,t){t.getAndRemove(r).forEach(function(n){Ab(e,n).catch(console.error)})},wV=function(r,e){return ar(void 0,void 0,void 0,function(){var t,n,i;return sr(this,function(o){switch(o.label){case 0:t=0,n=e.getAndRemove("addSourceMiddleware"),o.label=1;case 1:return t<n.length?(i=n[t],[4,Ab(r,i).catch(console.error)]):[3,4];case 2:o.sent(),o.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},EV=function(r,e){return ar(void 0,void 0,void 0,function(){var t,n,i;return sr(this,function(o){switch(o.label){case 0:t=0,n=e.getAndRemove("register"),o.label=1;case 1:return t<n.length?(i=n[t],[4,Ab(r,i).catch(console.error)]):[3,4];case 2:o.sent(),o.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},OV=$L.bind(void 0,"on"),xV=$L.bind(void 0,"setAnonymousId"),SV=function(r,e){Object.keys(e.calls).forEach(function(t){e.getAndRemove(t).forEach(function(n){setTimeout(function(){Ab(r,n).catch(console.error)},0)})})},yg=function(r){if(YL(r)){var e=r.pop();return jL(e)}},YL=function(r){var e=r[r.length-1];return J7(e)},sS=function(){function r(e,t,n,i){n===void 0&&(n=function(){}),i===void 0&&(i=console.error),this.method=e,this.resolve=n,this.reject=i,this.called=!1,this.args=t}return r}(),TV=function(){function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._callMap={},this.add.apply(this,e)}return Object.defineProperty(r.prototype,"calls",{get:function(){return this._pushSnippetWindowBuffer(),this._callMap},set:function(e){this._callMap=e},enumerable:!1,configurable:!0}),r.prototype.get=function(e){var t;return(t=this.calls[e])!==null&&t!==void 0?t:[]},r.prototype.getAndRemove=function(e){var t=this.get(e);return this.calls[e]=[],t},r.prototype.add=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.forEach(function(i){var o=["track","screen","alias","group","page","identify"];o.includes(i.method)&&!YL(i.args)&&(i.args=qo(qo([],i.args,!0),[FL()],!1)),e.calls[i.method]?e.calls[i.method].push(i):e.calls[i.method]=[i]})},r.prototype.clear=function(){this._pushSnippetWindowBuffer(),this.calls={}},r.prototype.toArray=function(){var e;return(e=[]).concat.apply(e,Object.values(this.calls))},r.prototype._pushSnippetWindowBuffer=function(){},r}();function Ab(r,e){return ar(this,void 0,void 0,function(){var t,n;return sr(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),e.called?[2,void 0]:(e.called=!0,t=r[e.method].apply(r,e.args),_V(t)?[4,t]:[3,2]);case 1:i.sent(),i.label=2;case 2:return e.resolve(t),[3,4];case 3:return n=i.sent(),e.reject(n),[3,4];case 4:return[2]}})})}var CV=function(){function r(e){var t=this;this.trackSubmit=this._createMethod("trackSubmit"),this.trackClick=this._createMethod("trackClick"),this.trackLink=this._createMethod("trackLink"),this.pageView=this._createMethod("pageview"),this.identify=this._createMethod("identify"),this.reset=this._createMethod("reset"),this.group=this._createMethod("group"),this.track=this._createMethod("track"),this.ready=this._createMethod("ready"),this.alias=this._createMethod("alias"),this.debug=this._createChainableMethod("debug"),this.page=this._createMethod("page"),this.once=this._createChainableMethod("once"),this.off=this._createChainableMethod("off"),this.on=this._createChainableMethod("on"),this.addSourceMiddleware=this._createMethod("addSourceMiddleware"),this.setAnonymousId=this._createMethod("setAnonymousId"),this.addDestinationMiddleware=this._createMethod("addDestinationMiddleware"),this.screen=this._createMethod("screen"),this.register=this._createMethod("register"),this.deregister=this._createMethod("deregister"),this.user=this._createMethod("user"),this.VERSION=Pb,this._preInitBuffer=new TV,this._promise=e(this._preInitBuffer),this._promise.then(function(n){var i=n[0],o=n[1];t.instance=i,t.ctx=o}).catch(function(){})}return r.prototype.then=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._promise).then.apply(e,t)},r.prototype.catch=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._promise).catch.apply(e,t)},r.prototype.finally=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._promise).finally.apply(e,t)},r.prototype._createMethod=function(e){var t=this;return function(){for(var n,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(t.instance){var a=(n=t.instance)[e].apply(n,i);return Promise.resolve(a)}return new Promise(function(s,u){t._preInitBuffer.add(new sS(e,i,s,u))})}},r.prototype._createChainableMethod=function(e){var t=this;return function(){for(var n,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return t.instance?((n=t.instance)[e].apply(n,i),t):(t._preInitBuffer.add(new sS(e,i)),t)}},r}(),Rd={},yf={},bT={},XL={exports:{}};(function(r){r.exports=e(t),r.exports.find=r.exports,r.exports.replace=function(s,u,l,c){return e(i).call(this,s,u,l,c),s},r.exports.del=function(s,u,l){return e(n).call(this,s,u,null,l),s};function e(s){return function(u,l,c,f){var h=f&&a(f.normalizer)?f.normalizer:o;l=h(l);for(var d,v=!1;!v;)y();function y(){for(d in u){var w=h(d);if(l.indexOf(w)===0){var b=l.substr(w.length);if(b.charAt(0)==="."||b.length===0){l=b.substr(1);var p=u[d];if(p==null){v=!0;return}if(!l.length){v=!0;return}u=p;return}}}d=void 0,v=!0}if(d)return u==null?u:s(u,d,c)}}function t(s,u){if(s.hasOwnProperty(u))return s[u]}function n(s,u){return s.hasOwnProperty(u)&&delete s[u],s}function i(s,u,l){return s.hasOwnProperty(u)&&(s[u]=l),s}function o(s){return s.replace(/[^a-zA-Z0-9\.]+/g,"").toLowerCase()}function a(s){return typeof s=="function"}})(XL);var Rb=XL.exports,PV=dn&&dn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(bT,"__esModule",{value:!0});var Ad=PV(Rb);function mg(r,e){return function(){var t=this.traits(),n=this.properties?this.properties():{};return Ad.default(t,"address."+r)||Ad.default(t,r)||(e?Ad.default(t,"address."+e):null)||(e?Ad.default(t,e):null)||Ad.default(n,"address."+r)||Ad.default(n,r)||(e?Ad.default(n,"address."+e):null)||(e?Ad.default(n,e):null)}}function AV(r){r.zip=mg("postalCode","zip"),r.country=mg("country"),r.street=mg("street"),r.state=mg("state"),r.city=mg("city"),r.region=mg("region")}bT.default=AV;var Ib={};Object.defineProperty(Ib,"__esModule",{value:!0});Ib.clone=void 0;function uS(r){if(typeof r!="object")return r;if(Object.prototype.toString.call(r)==="[object Object]"){var e={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=uS(r[t]));return e}else return Array.isArray(r)?r.map(uS):r}Ib.clone=uS;var _T={};Object.defineProperty(_T,"__esModule",{value:!0});var RV={Salesforce:!0};function IV(r){return!RV[r]}_T.default=IV;var kb={},KL=/^(\d{4})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:([ T])(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;kb.parse=function(r){var e=[1,5,6,7,11,12],t=KL.exec(r),n=0;if(!t)return new Date(r);for(var i=0,o;o=e[i];i++)t[o]=parseInt(t[o],10)||0;t[2]=parseInt(t[2],10)||1,t[3]=parseInt(t[3],10)||1,t[2]--,t[8]=t[8]?(t[8]+"00").substring(0,3):0,t[4]===" "?n=new Date().getTimezoneOffset():t[9]!=="Z"&&t[10]&&(n=t[11]*60+t[12],t[10]==="+"&&(n=0-n));var a=Date.UTC(t[1],t[2],t[3],t[5],t[6]+n,t[7],t[8]);return new Date(a)};kb.is=function(r,e){return typeof r!="string"||e&&/^\d{4}-\d{2}-\d{2}/.test(r)===!1?!1:KL.test(r)};var wT={},kV=/\d{13}/;wT.is=function(r){return kV.test(r)};wT.parse=function(r){return r=parseInt(r,10),new Date(r)};var ET={},DV=/\d{10}/;ET.is=function(r){return DV.test(r)};ET.parse=function(r){var e=parseInt(r,10)*1e3;return new Date(e)};var pk=kb,gk=wT,yk=ET,MV=Object.prototype,ZL=MV.toString;function LV(r){return ZL.call(r)==="[object Date]"}function NV(r){return ZL.call(r)==="[object Number]"}var OT=function(e){return LV(e)?e:NV(e)?new Date(jV(e)):pk.is(e)?pk.parse(e):gk.is(e)?gk.parse(e):yk.is(e)?yk.parse(e):new Date(e)};function jV(r){return r<315576e5?r*1e3:r}var mk=kb,FV=xT;function xT(r,e){return e===void 0&&(e=!0),r&&typeof r=="object"?BV(r,e):Array.isArray(r)?UV(r,e):mk.is(r,e)?mk.parse(r):r}function BV(r,e){return Object.keys(r).forEach(function(t){r[t]=xT(r[t],e)}),r}function UV(r,e){return r.forEach(function(t,n){r[n]=xT(t,e)}),r}var bm=dn&&dn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(yf,"__esModule",{value:!0});yf.Facade=void 0;var zV=bm(bT),Fg=Ib,qV=bm(_T),GV=bm(OT),lS=bm(Rb),VV=bm(FV);function ku(r,e){e=e||{},this.raw=Fg.clone(r),"clone"in e||(e.clone=!0),e.clone&&(r=Fg.clone(r)),"traverse"in e||(e.traverse=!0),"timestamp"in r?r.timestamp=GV.default(r.timestamp):r.timestamp=new Date,e.traverse&&VV.default(r),this.opts=e,this.obj=r}yf.Facade=ku;var Ni=ku.prototype;Ni.proxy=function(r){var e=r.split(".");r=e.shift();var t=this[r]||this.obj[r];return t&&(typeof t=="function"&&(t=t.call(this)||{}),e.length===0?this.opts.clone?cS(t):t:(t=lS.default(t,e.join(".")),this.opts.clone?cS(t):t))};Ni.field=function(r){var e=this.obj[r];return this.opts.clone?cS(e):e};ku.proxy=function(r){return function(){return this.proxy(r)}};ku.field=function(r){return function(){return this.field(r)}};ku.multi=function(r){return function(){var e=this.proxy(r+"s");if(Array.isArray(e))return e;var t=this.proxy(r);return t&&(t=[this.opts.clone?Fg.clone(t):t]),t||[]}};ku.one=function(r){return function(){var e=this.proxy(r);if(e)return e;var t=this.proxy(r+"s");if(Array.isArray(t))return t[0]}};Ni.json=function(){var r=this.opts.clone?Fg.clone(this.obj):this.obj;return this.type&&(r.type=this.type()),r};Ni.rawEvent=function(){return this.raw};Ni.options=function(r){var e=this.obj.options||this.obj.context||{},t=this.opts.clone?Fg.clone(e):e;if(!r)return t;if(this.enabled(r)){var n=this.integrations(),i=n[r]||lS.default(n,r);return typeof i!="object"&&(i=lS.default(this.options(),r)),typeof i=="object"?i:{}}};Ni.context=Ni.options;Ni.enabled=function(r){var e=this.proxy("options.providers.all");typeof e!="boolean"&&(e=this.proxy("options.all")),typeof e!="boolean"&&(e=this.proxy("integrations.all")),typeof e!="boolean"&&(e=!0);var t=e&&qV.default(r),n=this.integrations();if(n.providers&&n.providers.hasOwnProperty(r)&&(t=n.providers[r]),n.hasOwnProperty(r)){var i=n[r];typeof i=="boolean"?t=i:t=!0}return!!t};Ni.integrations=function(){return this.obj.integrations||this.proxy("options.providers")||this.options()};Ni.active=function(){var r=this.proxy("options.active");return r==null&&(r=!0),r};Ni.anonymousId=function(){return this.field("anonymousId")||this.field("sessionId")};Ni.sessionId=Ni.anonymousId;Ni.groupId=ku.proxy("options.groupId");Ni.traits=function(r){var e=this.proxy("options.traits")||{},t=this.userId();r=r||{},t&&(e.id=t);for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){var i=this[n]==null?this.proxy("options.traits."+n):this[n]();if(i==null)continue;e[r[n]]=i,delete e[n]}return e};Ni.library=function(){var r=this.proxy("options.library");return r?typeof r=="string"?{name:r,version:null}:r:{name:"unknown",version:null}};Ni.device=function(){var r=this.proxy("context.device");(typeof r!="object"||r===null)&&(r={});var e=this.library().name;return r.type||(e.indexOf("ios")>-1&&(r.type="ios"),e.indexOf("android")>-1&&(r.type="android")),r};Ni.userAgent=ku.proxy("context.userAgent");Ni.timezone=ku.proxy("context.timezone");Ni.timestamp=ku.field("timestamp");Ni.channel=ku.field("channel");Ni.ip=ku.proxy("context.ip");Ni.userId=ku.field("userId");zV.default(Ni);function cS(r){return Fg.clone(r)}var Db={},fS={exports:{}};typeof Object.create=="function"?fS.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:fS.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}};var _p=fS.exports,WV=dn&&dn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Db,"__esModule",{value:!0});Db.Alias=void 0;var HV=WV(_p),QL=yf;function vc(r,e){QL.Facade.call(this,r,e)}Db.Alias=vc;HV.default(vc,QL.Facade);vc.prototype.action=function(){return"alias"};vc.prototype.type=vc.prototype.action;vc.prototype.previousId=function(){return this.field("previousId")||this.field("from")};vc.prototype.from=vc.prototype.previousId;vc.prototype.userId=function(){return this.field("userId")||this.field("to")};vc.prototype.to=vc.prototype.userId;var Mb={},Xg={};Object.defineProperty(Xg,"__esModule",{value:!0});var $V=/.+\@.+\..+/;function YV(r){return $V.test(r)}Xg.default=YV;var ST=dn&&dn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Mb,"__esModule",{value:!0});Mb.Group=void 0;var XV=ST(_p),KV=ST(Xg),ZV=ST(OT),Kg=yf;function TT(r,e){Kg.Facade.call(this,r,e)}Mb.Group=TT;XV.default(TT,Kg.Facade);var pc=TT.prototype;pc.action=function(){return"group"};pc.type=pc.action;pc.groupId=Kg.Facade.field("groupId");pc.created=function(){var r=this.proxy("traits.createdAt")||this.proxy("traits.created")||this.proxy("properties.createdAt")||this.proxy("properties.created");if(r)return ZV.default(r)};pc.email=function(){var r=this.proxy("traits.email");if(r)return r;var e=this.groupId();if(KV.default(e))return e};pc.traits=function(r){var e=this.properties(),t=this.groupId();r=r||{},t&&(e.id=t);for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){var i=this[n]==null?this.proxy("traits."+n):this[n]();if(i==null)continue;e[r[n]]=i,delete e[n]}return e};pc.name=Kg.Facade.proxy("traits.name");pc.industry=Kg.Facade.proxy("traits.industry");pc.employees=Kg.Facade.proxy("traits.employees");pc.properties=function(){return this.field("traits")||this.field("properties")||{}};var _m={},Lb=dn&&dn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_m,"__esModule",{value:!0});_m.Identify=void 0;var mf=yf,Ig=Lb(Rb),QV=Lb(_p),JV=Lb(Xg),JL=Lb(OT),ip=function(r){return r.trim()};function CT(r,e){mf.Facade.call(this,r,e)}_m.Identify=CT;QV.default(CT,mf.Facade);var ji=CT.prototype;ji.action=function(){return"identify"};ji.type=ji.action;ji.traits=function(r){var e=this.field("traits")||{},t=this.userId();r=r||{},t&&(e.id=t);for(var n in r){var i=this[n]==null?this.proxy("traits."+n):this[n]();i!=null&&(e[r[n]]=i,n!==r[n]&&delete e[n])}return e};ji.email=function(){var r=this.proxy("traits.email");if(r)return r;var e=this.userId();if(JV.default(e))return e};ji.created=function(){var r=this.proxy("traits.created")||this.proxy("traits.createdAt");if(r)return JL.default(r)};ji.companyCreated=function(){var r=this.proxy("traits.company.created")||this.proxy("traits.company.createdAt");if(r)return JL.default(r)};ji.companyName=function(){return this.proxy("traits.company.name")};ji.name=function(){var r=this.proxy("traits.name");if(typeof r=="string")return ip(r);var e=this.firstName(),t=this.lastName();if(e&&t)return ip(e+" "+t)};ji.firstName=function(){var r=this.proxy("traits.firstName");if(typeof r=="string")return ip(r);var e=this.proxy("traits.name");if(typeof e=="string")return ip(e).split(" ")[0]};ji.lastName=function(){var r=this.proxy("traits.lastName");if(typeof r=="string")return ip(r);var e=this.proxy("traits.name");if(typeof e=="string"){var t=ip(e).indexOf(" ");if(t!==-1)return ip(e.substr(t+1))}};ji.uid=function(){return this.userId()||this.username()||this.email()};ji.description=function(){return this.proxy("traits.description")||this.proxy("traits.background")};ji.age=function(){var r=this.birthday(),e=Ig.default(this.traits(),"age");if(e!=null)return e;if(r instanceof Date){var t=new Date;return t.getFullYear()-r.getFullYear()}};ji.avatar=function(){var r=this.traits();return Ig.default(r,"avatar")||Ig.default(r,"photoUrl")||Ig.default(r,"avatarUrl")};ji.position=function(){var r=this.traits();return Ig.default(r,"position")||Ig.default(r,"jobTitle")};ji.username=mf.Facade.proxy("traits.username");ji.website=mf.Facade.one("traits.website");ji.websites=mf.Facade.multi("traits.website");ji.phone=mf.Facade.one("traits.phone");ji.phones=mf.Facade.multi("traits.phone");ji.address=mf.Facade.proxy("traits.address");ji.gender=mf.Facade.proxy("traits.gender");ji.birthday=mf.Facade.proxy("traits.birthday");var Zg={},PT=dn&&dn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Zg,"__esModule",{value:!0});Zg.Track=void 0;var eW=PT(_p),fa=yf,tW=_m,rW=PT(Xg),eN=PT(Rb);function AT(r,e){fa.Facade.call(this,r,e)}Zg.Track=AT;eW.default(AT,fa.Facade);var qr=AT.prototype;qr.action=function(){return"track"};qr.type=qr.action;qr.event=fa.Facade.field("event");qr.value=fa.Facade.proxy("properties.value");qr.category=fa.Facade.proxy("properties.category");qr.id=fa.Facade.proxy("properties.id");qr.productId=function(){return this.proxy("properties.product_id")||this.proxy("properties.productId")};qr.promotionId=function(){return this.proxy("properties.promotion_id")||this.proxy("properties.promotionId")};qr.cartId=function(){return this.proxy("properties.cart_id")||this.proxy("properties.cartId")};qr.checkoutId=function(){return this.proxy("properties.checkout_id")||this.proxy("properties.checkoutId")};qr.paymentId=function(){return this.proxy("properties.payment_id")||this.proxy("properties.paymentId")};qr.couponId=function(){return this.proxy("properties.coupon_id")||this.proxy("properties.couponId")};qr.wishlistId=function(){return this.proxy("properties.wishlist_id")||this.proxy("properties.wishlistId")};qr.reviewId=function(){return this.proxy("properties.review_id")||this.proxy("properties.reviewId")};qr.orderId=function(){return this.proxy("properties.id")||this.proxy("properties.order_id")||this.proxy("properties.orderId")};qr.sku=fa.Facade.proxy("properties.sku");qr.tax=fa.Facade.proxy("properties.tax");qr.name=fa.Facade.proxy("properties.name");qr.price=fa.Facade.proxy("properties.price");qr.total=fa.Facade.proxy("properties.total");qr.repeat=fa.Facade.proxy("properties.repeat");qr.coupon=fa.Facade.proxy("properties.coupon");qr.shipping=fa.Facade.proxy("properties.shipping");qr.discount=fa.Facade.proxy("properties.discount");qr.shippingMethod=function(){return this.proxy("properties.shipping_method")||this.proxy("properties.shippingMethod")};qr.paymentMethod=function(){return this.proxy("properties.payment_method")||this.proxy("properties.paymentMethod")};qr.description=fa.Facade.proxy("properties.description");qr.plan=fa.Facade.proxy("properties.plan");qr.subtotal=function(){var r=eN.default(this.properties(),"subtotal"),e=this.total()||this.revenue();if(r)return r;if(!e)return 0;if(this.total()){var t=this.tax();t&&(e-=t),t=this.shipping(),t&&(e-=t),t=this.discount(),t&&(e+=t)}return e};qr.products=function(){var r=this.properties(),e=eN.default(r,"products");return Array.isArray(e)?e.filter(function(t){return t!==null}):[]};qr.quantity=function(){var r=this.obj.properties||{};return r.quantity||1};qr.currency=function(){var r=this.obj.properties||{};return r.currency||"USD"};qr.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")};qr.query=fa.Facade.proxy("options.query");qr.properties=function(r){var e=this.field("properties")||{};r=r||{};for(var t in r)if(Object.prototype.hasOwnProperty.call(r,t)){var n=this[t]==null?this.proxy("properties."+t):this[t]();if(n==null)continue;e[r[t]]=n,delete e[t]}return e};qr.username=function(){return this.proxy("traits.username")||this.proxy("properties.username")||this.userId()||this.sessionId()};qr.email=function(){var r=this.proxy("traits.email")||this.proxy("properties.email")||this.proxy("options.traits.email");if(r)return r;var e=this.userId();if(rW.default(e))return e};qr.revenue=function(){var r=this.proxy("properties.revenue"),e=this.event(),t=/^[ _]?completed[ _]?order[ _]?|^[ _]?order[ _]?completed[ _]?$/i;return!r&&e&&e.match(t)&&(r=this.proxy("properties.total")),nW(r)};qr.cents=function(){var r=this.revenue();return typeof r!="number"?this.value()||0:r*100};qr.identify=function(){var r=this.json();return r.traits=this.traits(),new tW.Identify(r,this.opts)};function nW(r){if(r){if(typeof r=="number")return r;if(typeof r=="string"&&(r=r.replace(/\$/g,""),r=parseFloat(r),!isNaN(r)))return r}}var wm={},tN=dn&&dn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(wm,"__esModule",{value:!0});wm.Page=void 0;var iW=tN(_p),wp=yf,oW=Zg,aW=tN(Xg);function RT(r,e){wp.Facade.call(this,r,e)}wm.Page=RT;iW.default(RT,wp.Facade);var Xs=RT.prototype;Xs.action=function(){return"page"};Xs.type=Xs.action;Xs.category=wp.Facade.field("category");Xs.name=wp.Facade.field("name");Xs.title=wp.Facade.proxy("properties.title");Xs.path=wp.Facade.proxy("properties.path");Xs.url=wp.Facade.proxy("properties.url");Xs.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")};Xs.properties=function(r){var e=this.field("properties")||{},t=this.category(),n=this.name();r=r||{},t&&(e.category=t),n&&(e.name=n);for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){var o=this[i]==null?this.proxy("properties."+i):this[i]();if(o==null)continue;e[r[i]]=o,i!==r[i]&&delete e[i]}return e};Xs.email=function(){var r=this.proxy("context.traits.email")||this.proxy("properties.email");if(r)return r;var e=this.userId();if(aW.default(e))return e};Xs.fullName=function(){var r=this.category(),e=this.name();return e&&r?r+" "+e:e};Xs.event=function(r){return r?"Viewed "+r+" Page":"Loaded a Page"};Xs.track=function(r){var e=this.json();return e.event=this.event(r),e.timestamp=this.timestamp(),e.properties=this.properties(),new oW.Track(e,this.opts)};var Nb={},sW=dn&&dn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Nb,"__esModule",{value:!0});Nb.Screen=void 0;var uW=sW(_p),rN=wm,lW=Zg;function hp(r,e){rN.Page.call(this,r,e)}Nb.Screen=hp;uW.default(hp,rN.Page);hp.prototype.action=function(){return"screen"};hp.prototype.type=hp.prototype.action;hp.prototype.event=function(r){return r?"Viewed "+r+" Screen":"Loaded a Screen"};hp.prototype.track=function(r){var e=this.json();return e.event=this.event(r),e.timestamp=this.timestamp(),e.properties=this.properties(),new lW.Track(e,this.opts)};var jb={},cW=dn&&dn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(jb,"__esModule",{value:!0});jb.Delete=void 0;var fW=cW(_p),nN=yf;function IT(r,e){nN.Facade.call(this,r,e)}jb.Delete=IT;fW.default(IT,nN.Facade);IT.prototype.type=function(){return"delete"};(function(r){var e=dn&&dn.__assign||function(){return e=Object.assign||function(c){for(var f,h=1,d=arguments.length;h<d;h++){f=arguments[h];for(var v in f)Object.prototype.hasOwnProperty.call(f,v)&&(c[v]=f[v])}return c},e.apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0}),r.Delete=r.Screen=r.Page=r.Track=r.Identify=r.Group=r.Alias=r.Facade=void 0;var t=yf;Object.defineProperty(r,"Facade",{enumerable:!0,get:function(){return t.Facade}});var n=Db;Object.defineProperty(r,"Alias",{enumerable:!0,get:function(){return n.Alias}});var i=Mb;Object.defineProperty(r,"Group",{enumerable:!0,get:function(){return i.Group}});var o=_m;Object.defineProperty(r,"Identify",{enumerable:!0,get:function(){return o.Identify}});var a=Zg;Object.defineProperty(r,"Track",{enumerable:!0,get:function(){return a.Track}});var s=wm;Object.defineProperty(r,"Page",{enumerable:!0,get:function(){return s.Page}});var u=Nb;Object.defineProperty(r,"Screen",{enumerable:!0,get:function(){return u.Screen}});var l=jb;Object.defineProperty(r,"Delete",{enumerable:!0,get:function(){return l.Delete}}),r.default=e(e({},t.Facade),{Alias:n.Alias,Group:i.Group,Identify:o.Identify,Track:a.Track,Page:s.Page,Screen:u.Screen,Delete:l.Delete})})(Rd);function W0(r,e){var t=new Rd.Facade(r,e);return r.type==="track"&&(t=new Rd.Track(r,e)),r.type==="identify"&&(t=new Rd.Identify(r,e)),r.type==="page"&&(t=new Rd.Page(r,e)),r.type==="alias"&&(t=new Rd.Alias(r,e)),r.type==="group"&&(t=new Rd.Group(r,e)),r.type==="screen"&&(t=new Rd.Screen(r,e)),Object.defineProperty(t,"obj",{value:r,writable:!0}),t}var hW=function(r){var e=!1;window.addEventListener("pagehide",function(){e||(e=!0,r(e))}),document.addEventListener("visibilitychange",function(){if(document.visibilityState=="hidden"){if(e)return;e=!0}else e=!1;r(e)})},iN=function(r){Ks(e,r);function e(t,n){var i=r.call(this,t)||this;return i.retryTimeout=n,i.name="RateLimitError",i}return e}(Error),oN=function(r){return Nt({"Content-Type":"text/plain"},typeof r=="function"?r():r)},dW=500,vW=64;function kT(r){var e=encodeURI(JSON.stringify(r)).split(/%..|./).length-1;return e/1024}function pW(r){return kT(r)>=dW-50}function gW(r){return kT(r)>=vW-10}function yW(r){var e=[],t=0;return r.forEach(function(n){var i=kT(e[t]);i>=64&&t++,e[t]?e[t].push(n):e[t]=[n]}),e}function mW(r,e){var t,n,i=[],o=!1,a=(t=e==null?void 0:e.size)!==null&&t!==void 0?t:10,s=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:5e3,u=0;function l(v){var y;if(v.length!==0){var w=(y=v[0])===null||y===void 0?void 0:y.writeKey,b=v.map(function(p){var _=p;_.sentAt;var O=AL(_,["sentAt"]);return O});return Cb("https://".concat(r,"/b"),{credentials:e==null?void 0:e.credentials,keepalive:(e==null?void 0:e.keepalive)||o,headers:oN(e==null?void 0:e.headers),method:"post",body:JSON.stringify({writeKey:w,batch:b,sentAt:new Date().toISOString()}),priority:e==null?void 0:e.priority}).then(function(p){var _;if(p.status>=500)throw new Error("Bad response from server: ".concat(p.status));if(p.status===429){var O=(_=p.headers)===null||_===void 0?void 0:_.get("x-ratelimit-reset"),P=typeof O=="string"?parseInt(O)*1e3:s;throw new iN("Rate limit exceeded: ".concat(p.status),P)}})}}function c(v){var y;return v===void 0&&(v=1),ar(this,void 0,void 0,function(){var w;return sr(this,function(b){return i.length?(w=i,i=[],[2,(y=l(w))===null||y===void 0?void 0:y.catch(function(p){var _,O=Sh.system();O.log("error","Error sending batch",p),v<=((_=e==null?void 0:e.maxRetries)!==null&&_!==void 0?_:10)&&(p.name==="RateLimitError"&&(u=p.retryTimeout),i.push.apply(i,w),i.map(function(P){if("_metadata"in P){var R=P;R._metadata=Nt(Nt({},R._metadata),{retryCount:v})}}),h(v+1))})]):[2]})})}var f;function h(v){v===void 0&&(v=1),!f&&(f=setTimeout(function(){f=void 0,c(v).catch(console.error)},u||s),u=0)}hW(function(v){if(o=v,o&&i.length){var y=yW(i).map(l);Promise.all(y).catch(console.error)}});function d(v,y){return ar(this,void 0,void 0,function(){var w;return sr(this,function(b){return i.push(y),w=i.length>=a||pW(i)||(e==null?void 0:e.keepalive)&&gW(i),[2,w||o?c():h()]})})}return{dispatch:d}}function bW(r){function e(t,n){return Cb(t,{credentials:r==null?void 0:r.credentials,keepalive:r==null?void 0:r.keepalive,headers:oN(r==null?void 0:r.headers),method:"post",body:JSON.stringify(n),priority:r==null?void 0:r.priority}).then(function(i){var o;if(i.status>=500)throw new Error("Bad response from server: ".concat(i.status));if(i.status===429){var a=(o=i.headers)===null||o===void 0?void 0:o.get("x-ratelimit-reset"),s=a?parseInt(a)*1e3:5e3;throw new iN("Rate limit exceeded: ".concat(i.status),s)}})}return{dispatch:e}}function _W(r,e,t,n,i){var o,a=r.user();delete e.options,e.writeKey=t==null?void 0:t.apiKey,e.userId=e.userId||a.id(),e.anonymousId=e.anonymousId||a.anonymousId(),e.sentAt=new Date;var s=r.queue.failedInitializations||[];s.length>0&&(e._metadata={failedInitializations:s}),i!=null&&(i.attempts>1&&(e._metadata=Nt(Nt({},e._metadata),{retryCount:i.attempts})),i.attempts++);var u=[],l=[];for(var c in n){var f=n[c];c==="Segment.io"&&u.push(c),f.bundlingStatus==="bundled"&&u.push(c),f.bundlingStatus==="unbundled"&&l.push(c)}for(var h=0,d=(t==null?void 0:t.unbundledIntegrations)||[];h<d.length;h++){var v=d[h];l.includes(v)||l.push(v)}var y=(o=t==null?void 0:t.maybeBundledConfigIds)!==null&&o!==void 0?o:{},w=[];return u.sort().forEach(function(b){var p;((p=y[b])!==null&&p!==void 0?p:[]).forEach(function(_){w.push(_)})}),(t==null?void 0:t.addBundledMetadata)!==!1&&(e._metadata=Nt(Nt({},e._metadata),{bundled:u.sort(),unbundled:l.sort(),bundledIds:w})),e}var wW=function(r,e){return ar(void 0,void 0,void 0,function(){var t;return sr(this,function(n){return t=function(i){return ar(void 0,void 0,void 0,function(){var o;return sr(this,function(a){switch(a.label){case 0:return r(i)?(o=t,[4,e()]):[3,2];case 1:return[2,o.apply(void 0,[a.sent()])];case 2:return[2]}})})},[2,t(void 0)]})})};function EW(r,e){return ar(this,void 0,void 0,function(){var t,n=this;return sr(this,function(i){switch(i.label){case 0:return t=[],im()?[2,e]:[4,wW(function(){return e.length>0&&!im()},function(){return ar(n,void 0,void 0,function(){var o,a,s;return sr(this,function(u){switch(u.label){case 0:return o=e.pop(),o?[4,$y(o,r)]:[2];case 1:return a=u.sent(),s=a instanceof Sh,s||t.push(o),[2]}})})})];case 1:return i.sent(),t.map(function(o){return e.pushWithBackoff(o)}),[2,e]}})})}function bg(r,e,t,n){var i=this;r||setTimeout(function(){return ar(i,void 0,void 0,function(){var o,a;return sr(this,function(s){switch(s.label){case 0:return o=!0,[4,EW(t,e)];case 1:return a=s.sent(),o=!1,e.todo>0&&n(o,a,t,n),[2]}})})},Math.random()*5e3)}function OW(r,e){var t,n,i,o,a=r.user();return e.previousId=(i=(n=(t=e.previousId)!==null&&t!==void 0?t:e.from)!==null&&n!==void 0?n:a.id())!==null&&i!==void 0?i:a.anonymousId(),e.userId=(o=e.userId)!==null&&o!==void 0?o:e.to,delete e.from,delete e.to,e}var xW=function(r){return r.name==="Segment.io"};function SW(r,e,t){var n,i,o;window.addEventListener("pagehide",function(){s.push.apply(s,Array.from(u)),u.clear()});var a=(n=e==null?void 0:e.apiKey)!==null&&n!==void 0?n:"",s=r.options.disableClientPersistence?new fT(r.queue.queue.maxAttempts,[]):new pT(r.queue.queue.maxAttempts,"".concat(a,":dest-Segment.io")),u=new Set,l=!1,c=(i=e==null?void 0:e.apiHost)!==null&&i!==void 0?i:DL,f=(o=e==null?void 0:e.protocol)!==null&&o!==void 0?o:"https",h="".concat(f,"://").concat(c),d=e==null?void 0:e.deliveryStrategy,v=d&&"strategy"in d&&d.strategy==="batching"?mW(c,d.config):bW(d==null?void 0:d.config);function y(b){return ar(this,void 0,void 0,function(){var p,_;return sr(this,function(O){return im()?(s.push(b),bg(l,s,w,bg),[2,b]):(u.add(b),p=b.event.type.charAt(0),_=W0(b.event).json(),b.event.type==="track"&&delete _.traits,b.event.type==="alias"&&(_=OW(r,_)),s.getAttempts(b)>=s.maxAttempts?(u.delete(b),[2,b]):[2,v.dispatch("".concat(h,"/").concat(p),_W(r,_,e,t,b)).then(function(){return b}).catch(function(P){if(b.log("error","Error sending event",P),P.name==="RateLimitError"){var R=P.retryTimeout;s.pushWithBackoff(b,R)}else s.pushWithBackoff(b);return bg(l,s,w,bg),b}).finally(function(){u.delete(b)})])})})}var w={metadata:{writeKey:a,apiHost:c,protocol:f},name:"Segment.io",type:"destination",version:"0.1.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:y,identify:y,page:y,alias:y,group:y,screen:y};return s.todo&&bg(l,s,w,bg),w}var Id="This is being deprecated and will be not be available in future releases of Analytics JS",Sx=vT(),Tx=Sx==null?void 0:Sx.analytics;function TW(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var n=e?10:1,i=t?new fT(n,[]):new pT(n,r);return new cV(i)}var CW=function(){function r(e,t){var n;this.timeout=300,this._getSegmentPluginMetadata=function(){var o;return(o=t.plugins.find(xW))===null||o===void 0?void 0:o.metadata},this.writeKey=e.writeKey;var i={integrations:{"Segment.io":{apiKey:""}}};this.cdnSettings=(n=e.cdnSettings)!==null&&n!==void 0?n:i,this.cdnURL=e.cdnURL}return Object.defineProperty(r.prototype,"apiHost",{get:function(){var e,t;return(t=(e=this._getSegmentPluginMetadata)===null||e===void 0?void 0:e.call(this))===null||t===void 0?void 0:t.apiHost},enumerable:!1,configurable:!0}),r}();function sf(){console.warn(Id)}var aN=function(r){Ks(e,r);function e(t,n,i,o,a){var s=this,u,l;s=r.call(this)||this,s._debug=!1,s.initialized=!1,s.user=function(){return s._user},s.init=s.initialize.bind(s),s.log=sf,s.addIntegrationMiddleware=sf,s.listeners=sf,s.addEventListener=sf,s.removeAllListeners=sf,s.removeListener=sf,s.removeEventListener=sf,s.hasListeners=sf,s.add=sf,s.addIntegration=sf;var c=n==null?void 0:n.cookie,f=(u=n==null?void 0:n.disableClientPersistence)!==null&&u!==void 0?u:!1;s.queue=i??TW("".concat(t.writeKey,":event-queue"),n==null?void 0:n.retryQueue,f),s.settings=new CW(t,s.queue);var h=n==null?void 0:n.storage;return s._universalStorage=s.createStore(f,h,c),s._user=o??new WL(Nt({persist:!f,storage:n==null?void 0:n.storage},n==null?void 0:n.user),c).load(),s._group=a??new yV(Nt({persist:!f,storage:n==null?void 0:n.storage},n==null?void 0:n.group),c).load(),s.eventFactory=new oV(s._user),s.integrations=(l=n==null?void 0:n.integrations)!==null&&l!==void 0?l:{},s.options=n??{},gT(s),s}return e.prototype.createStore=function(t,n,i){return t?new np([new yT]):n&&GL(n)?new np(aS(VL(n.stores,i))):new np(aS([Hs.LocalStorage,{name:Hs.Cookie,settings:i},Hs.Memory]))},Object.defineProperty(e.prototype,"storage",{get:function(){return this._universalStorage},enumerable:!1,configurable:!0}),e.prototype.track=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return ar(this,void 0,void 0,function(){var i,o,a,s,u,l,c,f=this;return sr(this,function(h){return i=yg(t),o=W7.apply(void 0,t),a=o[0],s=o[1],u=o[2],l=o[3],c=this.eventFactory.track(a,s,u,this.integrations,i),[2,this._dispatch(c,l).then(function(d){return f.emit("track",a,d.event.properties,d.event.options),d})]})})},e.prototype.page=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return ar(this,void 0,void 0,function(){var i,o,a,s,u,l,c,f,h=this;return sr(this,function(d){return i=yg(t),o=fk.apply(void 0,t),a=o[0],s=o[1],u=o[2],l=o[3],c=o[4],f=this.eventFactory.page(a,s,u,l,this.integrations,i),[2,this._dispatch(f,c).then(function(v){return h.emit("page",a,s,v.event.properties,v.event.options),v})]})})},e.prototype.identify=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return ar(this,void 0,void 0,function(){var i,o,a,s,u,l,c,f=this;return sr(this,function(h){return i=yg(t),o=hk(this._user).apply(void 0,t),a=o[0],s=o[1],u=o[2],l=o[3],this._user.identify(a,s),c=this.eventFactory.identify(this._user.id(),this._user.traits(),u,this.integrations,i),[2,this._dispatch(c,l).then(function(d){return f.emit("identify",d.event.userId,d.event.traits,d.event.options),d})]})})},e.prototype.group=function(){for(var t=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=yg(n);if(n.length===0)return this._group;var a=hk(this._group).apply(void 0,n),s=a[0],u=a[1],l=a[2],c=a[3];this._group.identify(s,u);var f=this._group.id(),h=this._group.traits(),d=this.eventFactory.group(f,h,l,this.integrations,o);return this._dispatch(d,c).then(function(v){return t.emit("group",v.event.groupId,v.event.traits,v.event.options),v})},e.prototype.alias=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return ar(this,void 0,void 0,function(){var i,o,a,s,u,l,c,f=this;return sr(this,function(h){return i=yg(t),o=H7.apply(void 0,t),a=o[0],s=o[1],u=o[2],l=o[3],c=this.eventFactory.alias(a,s,u,this.integrations,i),[2,this._dispatch(c,l).then(function(d){return f.emit("alias",a,s,d.event.options),d})]})})},e.prototype.screen=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return ar(this,void 0,void 0,function(){var i,o,a,s,u,l,c,f,h=this;return sr(this,function(d){return i=yg(t),o=fk.apply(void 0,t),a=o[0],s=o[1],u=o[2],l=o[3],c=o[4],f=this.eventFactory.screen(a,s,u,l,this.integrations,i),[2,this._dispatch(f,c).then(function(v){return h.emit("screen",a,s,v.event.properties,v.event.options),v})]})})},e.prototype.trackClick=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return ar(this,void 0,void 0,function(){var i,o;return sr(this,function(a){switch(a.label){case 0:return[4,lc(()=>import("./auto-track-DLyj4IhR.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))];case 1:return i=a.sent(),[2,(o=i.link).call.apply(o,qo([this],t,!1))]}})})},e.prototype.trackLink=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return ar(this,void 0,void 0,function(){var i,o;return sr(this,function(a){switch(a.label){case 0:return[4,lc(()=>import("./auto-track-DLyj4IhR.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))];case 1:return i=a.sent(),[2,(o=i.link).call.apply(o,qo([this],t,!1))]}})})},e.prototype.trackSubmit=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return ar(this,void 0,void 0,function(){var i,o;return sr(this,function(a){switch(a.label){case 0:return[4,lc(()=>import("./auto-track-DLyj4IhR.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))];case 1:return i=a.sent(),[2,(o=i.form).call.apply(o,qo([this],t,!1))]}})})},e.prototype.trackForm=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return ar(this,void 0,void 0,function(){var i,o;return sr(this,function(a){switch(a.label){case 0:return[4,lc(()=>import("./auto-track-DLyj4IhR.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))];case 1:return i=a.sent(),[2,(o=i.form).call.apply(o,qo([this],t,!1))]}})})},e.prototype.register=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return ar(this,void 0,void 0,function(){var i,o,a=this;return sr(this,function(s){switch(s.label){case 0:return i=Sh.system(),o=t.map(function(u){return a.queue.register(i,u,a)}),[4,Promise.all(o)];case 1:return s.sent(),[2,i]}})})},e.prototype.deregister=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return ar(this,void 0,void 0,function(){var i,o,a=this;return sr(this,function(s){switch(s.label){case 0:return i=Sh.system(),o=t.map(function(u){var l=a.queue.plugins.find(function(c){return c.name===u});if(l)return a.queue.deregister(i,l,a);i.log("warn","plugin ".concat(u," not found"))}),[4,Promise.all(o)];case 1:return s.sent(),[2,i]}})})},e.prototype.debug=function(t){return t===!1&&localStorage.getItem("debug")&&localStorage.removeItem("debug"),this._debug=t,this},e.prototype.reset=function(){this._user.reset(),this._group.reset(),this.emit("reset")},e.prototype.timeout=function(t){this.settings.timeout=t},e.prototype._dispatch=function(t,n){return ar(this,void 0,void 0,function(){var i;return sr(this,function(o){return i=new Sh(t),i.stats.increment("analytics_js.invoke",1,[t.type]),im()&&!this.options.retryQueue?[2,i]:[2,V7(i,this.queue,this,{callback:n,debug:this._debug,timeout:this.settings.timeout})]})})},e.prototype.addSourceMiddleware=function(t){return ar(this,void 0,void 0,function(){var n=this;return sr(this,function(i){switch(i.label){case 0:return[4,this.queue.criticalTasks.run(function(){return ar(n,void 0,void 0,function(){var o,a,s;return sr(this,function(u){switch(u.label){case 0:return[4,lc(()=>Promise.resolve().then(()=>VW),void 0)];case 1:return o=u.sent().sourceMiddlewarePlugin,a={},this.queue.plugins.forEach(function(l){if(l.type==="destination")return a[l.name]=!0}),s=o(t,a),[4,this.register(s)];case 2:return u.sent(),[2]}})})})];case 1:return i.sent(),[2,this]}})})},e.prototype.addDestinationMiddleware=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return this.queue.plugins.filter(aV).forEach(function(o){(t==="*"||o.name.toLowerCase()===t.toLowerCase())&&o.addMiddleware.apply(o,n)}),Promise.resolve(this)},e.prototype.setAnonymousId=function(t){return this._user.anonymousId(t)},e.prototype.queryString=function(t){return ar(this,void 0,void 0,function(){var n;return sr(this,function(i){switch(i.label){case 0:return this.options.useQueryString===!1?[2,[]]:[4,lc(()=>import("./index-Db4E0li1.js"),__vite__mapDeps([10,1,2,3,4,5,6,7,8,9]))];case 1:return n=i.sent().queryString,[2,n(this,t)]}})})},e.prototype.use=function(t){return t(this),this},e.prototype.ready=function(t){return t===void 0&&(t=function(n){return n}),ar(this,void 0,void 0,function(){return sr(this,function(n){return[2,Promise.all(this.queue.plugins.map(function(i){return i.ready?i.ready():Promise.resolve()})).then(function(i){return t(i),i})]})})},e.prototype.noConflict=function(){return console.warn(Id),bV(Tx??this),this},e.prototype.normalize=function(t){return console.warn(Id),this.eventFactory.normalize(t)},Object.defineProperty(e.prototype,"failedInitializations",{get:function(){return console.warn(Id),this.queue.failedInitializations},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"VERSION",{get:function(){return Pb},enumerable:!1,configurable:!0}),e.prototype.initialize=function(t,n){return ar(this,void 0,void 0,function(){return sr(this,function(i){return console.warn(Id),[2,Promise.resolve(this)]})})},e.prototype.pageview=function(t){return ar(this,void 0,void 0,function(){return sr(this,function(n){switch(n.label){case 0:return console.warn(Id),[4,this.page({path:t})];case 1:return n.sent(),[2,this]}})})},Object.defineProperty(e.prototype,"plugins",{get:function(){var t;return console.warn(Id),(t=this._plugins)!==null&&t!==void 0?t:{}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Integrations",{get:function(){console.warn(Id);var t=this.queue.plugins.filter(function(n){return n.type==="destination"}).reduce(function(n,i){var o="".concat(i.name.toLowerCase().replace(".","").split(" ").join("-"),"Integration"),a=window[o];if(!a)return n;var s=a.Integration;return s?(n[i.name]=s,n):(n[i.name]=a,n)},{});return t},enumerable:!1,configurable:!0}),e.prototype.push=function(t){var n=this,i=t.shift();i&&!n[i]||n[i].apply(this,t)},e}(cT),bk=function(r){Ks(e,r);function e(){var t=r.call(this,{writeKey:""},{disableClientPersistence:!0})||this;return t.initialized=!0,t}return e}(aN),_k={};function sN(){return typeof process>"u"||!_k?{}:_k}var PW=/(https:\/\/.*)\/analytics\.js\/v1\/(?:.*?)\/(?:platform|analytics.*)?/,AW=function(){var r,e=Array.prototype.slice.call(document.querySelectorAll("script"));return e.forEach(function(t){var n,i=(n=t.getAttribute("src"))!==null&&n!==void 0?n:"",o=PW.exec(i);o&&o[1]&&(r=o[1])}),r},O0,RW=function(){var r,e=O0??((r=HL())===null||r===void 0?void 0:r._cdn);return e},IW=function(r){var e=HL();e&&(e._cdn=r),O0=r},DT=function(){var r=RW();if(r)return r;var e=AW();return e||"https://cdn.segment.com"},h$=function(){var r=DT();return"".concat(r,"/next-integrations")};function kW(r,e){var t,n=Object.entries((t=e.integrations)!==null&&t!==void 0?t:{}).reduce(function(i,o){var a,s,u=o[0],l=o[1];return typeof l=="object"?Nt(Nt({},i),(a={},a[u]=l,a)):Nt(Nt({},i),(s={},s[u]={},s))},{});return Object.entries(r.integrations).reduce(function(i,o){var a,s=o[0],u=o[1];return Nt(Nt({},i),(a={},a[s]=Nt(Nt({},u),n[s]),a))},{})}function DW(r){try{return decodeURIComponent(r.replace(/\+/g," "))}catch{return r}}function MW(r){return ar(this,void 0,void 0,function(){var e;return sr(this,function(t){return e=navigator.userAgentData,e?r?[2,e.getHighEntropyValues(r).catch(function(){return e.toJSON()})]:[2,e.toJSON()]:[2,void 0]})})}var Iy;function LW(){if(Iy)return Iy;var r=zL(window.location.href);return Iy={expires:31536e6,secure:!1,path:"/"},r&&(Iy.domain=r),Iy}function NW(r){var e={btid:"dataxu",urid:"millennial-media"};r.startsWith("?")&&(r=r.substring(1)),r=r.replace(/\?/g,"&");for(var t=r.split("&"),n=0,i=t;n<i.length;n++){var o=i[n],a=o.split("="),s=a[0],u=a[1];if(e[s])return{id:u,type:e[s]}}}function jW(r){return r.startsWith("?")&&(r=r.substring(1)),r=r.replace(/\?/g,"&"),r.split("&").reduce(function(e,t){var n=t.split("="),i=n[0],o=n[1],a=o===void 0?"":o;if(i.includes("utm_")&&i.length>4){var s=i.slice(4);s==="campaign"&&(s="name"),e[s]=DW(a)}return e},{})}function FW(){var r=wh.get("_ga");if(r&&r.startsWith("amp"))return r}function BW(r,e,t){var n,i=new np(t?[]:[new qL(LW())]),o=i.get("s:context.referrer"),a=(n=NW(r))!==null&&n!==void 0?n:o;a&&(e&&(e.referrer=Nt(Nt({},e.referrer),a)),i.set("s:context.referrer",a))}var UW=function(r){try{var e=new URLSearchParams;return Object.entries(r).forEach(function(t){var n=t[0],i=t[1];Array.isArray(i)?i.forEach(function(o){return e.append(n,o)}):e.append(n,i)}),e.toString()}catch{return""}},zW=function(){function r(){var e=this;this.name="Page Enrichment",this.type="before",this.version="0.1.0",this.isLoaded=function(){return!0},this.load=function(t,n){return ar(e,void 0,void 0,function(){var i;return sr(this,function(o){switch(o.label){case 0:this.instance=n,o.label=1;case 1:return o.trys.push([1,3,,4]),i=this,[4,MW(this.instance.options.highEntropyValuesClientHints)];case 2:return i.userAgentData=o.sent(),[3,4];case 3:return o.sent(),[3,4];case 4:return[2,Promise.resolve()]}})})},this.enrich=function(t){var n,i,o=t.event.context,a=o.page.search||"",s=typeof a=="object"?UW(a):a;o.userAgent=navigator.userAgent,o.userAgentData=e.userAgentData;var u=navigator.userLanguage||navigator.language;typeof o.locale>"u"&&typeof u<"u"&&(o.locale=u),(n=o.library)!==null&&n!==void 0||(o.library={name:"analytics.js",version:"".concat("npm:next","-").concat(Pb)}),s&&!o.campaign&&(o.campaign=jW(s));var l=FW();l&&(o.amp={id:l}),BW(s,o,(i=e.instance.options.disableClientPersistence)!==null&&i!==void 0?i:!1);try{o.timezone=Intl.DateTimeFormat().resolvedOptions().timeZone}catch{}return t},this.track=this.enrich,this.identify=this.enrich,this.page=this.enrich,this.group=this.enrich,this.alias=this.enrich,this.screen=this.enrich}return r}(),qW=new zW;function uN(r){var e=Array.prototype.slice.call(window.document.querySelectorAll("script"));return e.find(function(t){return t.src===r})}function Cx(r,e){var t=uN(r);if(t!==void 0){var n=t==null?void 0:t.getAttribute("status");if(n==="loaded")return Promise.resolve(t);if(n==="loading")return new Promise(function(i,o){t.addEventListener("load",function(){return i(t)}),t.addEventListener("error",function(a){return o(a)})})}return new Promise(function(i,o){var a,s=window.document.createElement("script");s.type="text/javascript",s.src=r,s.async=!0,s.setAttribute("status","loading");for(var u=0,l=Object.entries({});u<l.length;u++){var c=l[u],f=c[0],h=c[1];s.setAttribute(f,h)}s.onload=function(){s.onerror=s.onload=null,s.setAttribute("status","loaded"),i(s)},s.onerror=function(){s.onerror=s.onload=null,s.setAttribute("status","error"),o(new Error("Failed to load ".concat(r)))};var d=window.document.querySelector("script");d?(a=d.parentElement)===null||a===void 0||a.insertBefore(s,d):window.document.head.appendChild(s)})}function d$(r){var e=uN(r);return e!==void 0&&e.remove(),Promise.resolve()}function lN(r,e,t){return ar(this,void 0,void 0,function(){function n(l,c){return ar(this,void 0,void 0,function(){var f,h,d;return sr(this,function(v){switch(v.label){case 0:return f=!1,h=null,[4,c({payload:W0(l,{clone:!0,traverse:!1}),integration:r,next:function(y){f=!0,y===null&&(h=null),y&&(h=y.obj)}})];case 1:return v.sent(),!f&&h!==null&&(h=h,h.integrations=Nt(Nt({},l.integrations),(d={},d[r]=!1,d))),[2,h]}})})}var i,o,a,s,u;return sr(this,function(l){switch(l.label){case 0:i=W0(e,{clone:!0,traverse:!1}).rawEvent(),o=0,a=t,l.label=1;case 1:return o<a.length?(s=a[o],[4,n(i,s)]):[3,4];case 2:if(u=l.sent(),u===null)return[2,null];i=u,l.label=3;case 3:return o++,[3,1];case 4:return[2,i]}})})}function GW(r,e){function t(n){return ar(this,void 0,void 0,function(){var i;return sr(this,function(o){switch(o.label){case 0:return i=!1,[4,r({payload:W0(n.event,{clone:!0,traverse:!1}),integrations:e??{},next:function(a){i=!0,a&&(n.event=a.obj)}})];case 1:if(o.sent(),!i)throw new jg({retry:!1,type:"middleware_cancellation",reason:"Middleware `next` function skipped"});return[2,n]}})})}return{name:"Source Middleware ".concat(r.name),type:"before",version:"0.1.0",isLoaded:function(){return!0},load:function(n){return Promise.resolve(n)},track:t,page:t,screen:t,identify:t,alias:t,group:t}}const VW=Object.freeze(Object.defineProperty({__proto__:null,applyDestinationMiddleware:lN,sourceMiddlewarePlugin:GW},Symbol.toStringTag,{value:"Module"}));function u0(r,e){var t=e.methodName,n=e.integrationName,i=e.type,o=e.didError,a=o===void 0?!1:o;r.stats.increment("analytics_js.integration.invoke".concat(a?".error":""),1,["method:".concat(t),"integration_name:".concat(n),"type:".concat(i)])}var WW=function(){function r(e,t){this.version="1.0.0",this.alternativeNames=[],this.loadPromise=RL(),this.middleware=[],this.alias=this._createMethod("alias"),this.group=this._createMethod("group"),this.identify=this._createMethod("identify"),this.page=this._createMethod("page"),this.screen=this._createMethod("screen"),this.track=this._createMethod("track"),this.action=t,this.name=e,this.type=t.type,this.alternativeNames.push(t.name)}return r.prototype.addMiddleware=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.type==="destination"&&(e=this.middleware).push.apply(e,t)},r.prototype.transform=function(e){return ar(this,void 0,void 0,function(){var t;return sr(this,function(n){switch(n.label){case 0:return[4,lN(this.name,e.event,this.middleware)];case 1:return t=n.sent(),t===null&&e.cancel(new jg({retry:!1,reason:"dropped by destination middleware"})),[2,new Sh(t)]}})})},r.prototype._createMethod=function(e){var t=this;return function(n){return ar(t,void 0,void 0,function(){var i,o;return sr(this,function(a){switch(a.label){case 0:return this.action[e]?(i=n,this.type!=="destination"?[3,2]:[4,this.transform(n)]):[2,n];case 1:i=a.sent(),a.label=2;case 2:return a.trys.push([2,5,,6]),[4,this.ready()];case 3:if(!a.sent())throw new Error("Something prevented the destination from getting ready");return u0(n,{integrationName:this.action.name,methodName:e,type:"action"}),[4,this.action[e](i)];case 4:return a.sent(),[3,6];case 5:throw o=a.sent(),u0(n,{integrationName:this.action.name,methodName:e,type:"action",didError:!0}),o;case 6:return[2,n]}})})}},r.prototype.isLoaded=function(){return this.action.isLoaded()},r.prototype.ready=function(){return ar(this,void 0,void 0,function(){return sr(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.loadPromise.promise];case 1:return e.sent(),[2,!0];case 2:return e.sent(),[2,!1];case 3:return[2]}})})},r.prototype.load=function(e,t){return ar(this,void 0,void 0,function(){var n,i,o,a;return sr(this,function(s){switch(s.label){case 0:if(this.loadPromise.isSettled())return[2,this.loadPromise.promise];s.label=1;case 1:return s.trys.push([1,3,,4]),u0(e,{integrationName:this.action.name,methodName:"load",type:"action"}),n=this.action.load(e,t),o=(i=this.loadPromise).resolve,[4,n];case 2:return o.apply(i,[s.sent()]),[2,n];case 3:throw a=s.sent(),u0(e,{integrationName:this.action.name,methodName:"load",type:"action",didError:!0}),this.loadPromise.reject(a),a;case 4:return[2]}})})},r.prototype.unload=function(e,t){var n,i;return(i=(n=this.action).unload)===null||i===void 0?void 0:i.call(n,e,t)},r}();function HW(r){if(!Array.isArray(r))throw new Error("Not a valid list of plugins");var e=["load","isLoaded","name","version","type"];return r.forEach(function(t){e.forEach(function(n){var i;if(t[n]===void 0)throw new Error("Plugin: ".concat((i=t.name)!==null&&i!==void 0?i:"unknown"," missing required function ").concat(n))})}),!0}function $W(r,e){var t=r[e.creationName],n=r[e.name];return r.All===!1&&!t&&!n||t===!1||n===!1}function YW(r,e){return ar(this,void 0,void 0,function(){var t,n,i,o,a,s;return sr(this,function(u){switch(u.label){case 0:if(u.trys.push([0,9,,10]),t=new RegExp("https://cdn.segment.(com|build)"),n=DT(),!e)return[3,6];i=r.url.split("/"),o=i[i.length-2],a=r.url.replace(o,btoa(o).replace(/=/g,"")),u.label=1;case 1:return u.trys.push([1,3,,5]),[4,Cx(a.replace(t,n))];case 2:return u.sent(),[3,5];case 3:return u.sent(),[4,Cx(r.url.replace(t,n))];case 4:return u.sent(),[3,5];case 5:return[3,8];case 6:return[4,Cx(r.url.replace(t,n))];case 7:u.sent(),u.label=8;case 8:return typeof window[r.libraryName]=="function"?[2,window[r.libraryName]]:[3,10];case 9:throw s=u.sent(),console.error("Failed to create PluginFactory",r),s;case 10:return[2]}})})}function XW(r,e,t,n,i,o){var a,s,u;return ar(this,void 0,void 0,function(){var l,c,f,h=this;return sr(this,function(d){switch(d.label){case 0:return l=[],c=(s=(a=r.middlewareSettings)===null||a===void 0?void 0:a.routingRules)!==null&&s!==void 0?s:[],f=((u=r.remotePlugins)!==null&&u!==void 0?u:[]).map(function(v){return ar(h,void 0,void 0,function(){var y,w,b,p,_,O,P;return sr(this,function(R){switch(R.label){case 0:if($W(e,v))return[2];R.label=1;case 1:return R.trys.push([1,6,,7]),w=o==null?void 0:o.find(function(T){var A=T.pluginName;return A===v.name}),w?[3,3]:[4,YW(v,n==null?void 0:n.obfuscate)];case 2:w=R.sent(),R.label=3;case 3:return y=w,y?(b=t[v.name],[4,y(Nt(Nt({},v.settings),b))]):[3,5];case 4:p=R.sent(),_=Array.isArray(p)?p:[p],HW(_),O=c.filter(function(T){return T.destinationName===v.creationName}),_.forEach(function(T){var A=new WW(v.creationName,T);O.length&&i&&A.addMiddleware(i),l.push(A)}),R.label=5;case 5:return[3,7];case 6:return P=R.sent(),console.warn("Failed to load Remote Plugin",P),[3,7];case 7:return[2]}})})}),[4,Promise.all(f)];case 1:return d.sent(),[2,l.filter(Boolean)]}})})}var Px,wk,KW=vT(),Ek=(Px=(wk=KW).__SEGMENT_INSPECTOR__)!==null&&Px!==void 0?Px:wk.__SEGMENT_INSPECTOR__={},ZW=function(r){var e;return(e=Ek.attach)===null||e===void 0?void 0:e.call(Ek,r)};function QW(r,e){return Cb("".concat(e,"/v1/projects/").concat(r,"/settings")).then(function(t){return t.ok?t.json():t.text().then(function(n){throw new Error(n)})}).catch(function(t){throw console.error(t.message),t})}function JW(r){return sN().NODE_ENV!=="test"&&Object.keys(r.integrations).length>1}function eH(r){var e,t,n;return sN().NODE_ENV!=="test"&&((n=(t=(e=r.middlewareSettings)===null||e===void 0?void 0:e.routingRules)===null||t===void 0?void 0:t.length)!==null&&n!==void 0?n:0)>0}function tH(r,e){xV(r,e),OV(r,e)}function rH(r,e,t){return ar(this,void 0,void 0,function(){return sr(this,function(n){switch(n.label){case 0:return[4,iH(r,e)];case 1:return n.sent(),SV(r,t),[2]}})})}var nH=function(){var r,e,t=(r=window.location.hash)!==null&&r!==void 0?r:"",n=(e=window.location.search)!==null&&e!==void 0?e:"",i=n.length?n:t.replace(/(?=#).*(?=\?)/,"");return i},iH=function(r,e){return ar(void 0,void 0,void 0,function(){return sr(this,function(t){switch(t.label){case 0:return e.includes("ajs_")?[4,r.queryString(e).catch(console.error)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})};function oH(r,e,t,n,i,o,a){var s,u,l;return i===void 0&&(i=[]),ar(this,void 0,void 0,function(){var c,f,h,d,v,y,w,b,p,_,O,P,R,T,A,M=this;return sr(this,function(N){switch(N.label){case 0:return tH(t,a),c=i==null?void 0:i.filter(function(j){return typeof j=="object"}),f=i==null?void 0:i.filter(function(j){return typeof j=="function"&&typeof j.pluginName=="string"}),eH(e)?[4,lc(()=>import("./index-SSgaCJsD.js"),__vite__mapDeps([])).then(function(j){return j.tsubMiddleware(e.middlewareSettings.routingRules)})]:[3,2];case 1:return d=N.sent(),[3,3];case 2:d=void 0,N.label=3;case 3:return h=d,JW(e)||o.length>0?[4,lc(()=>import("./index-DnzIFMnR.js"),__vite__mapDeps([11,12,1,2,3,4,5,6,7,8,9])).then(function(j){return j.ajsDestinations(r,e,t.integrations,n,h,o)})]:[3,5];case 4:return y=N.sent(),[3,6];case 5:y=[],N.label=6;case 6:return v=y,e.legacyVideoPluginsEnabled?[4,lc(()=>import("./index-CqBqQQ5D.js"),__vite__mapDeps([13,3,1,4,5,2,6,7,8,9])).then(function(j){return j.loadLegacyVideoPlugins(t)})]:[3,8];case 7:N.sent(),N.label=8;case 8:return!((s=n.plan)===null||s===void 0)&&s.track?[4,lc(()=>import("./index-Cfi8fwg1.js"),__vite__mapDeps([14,12,1,2,3,4,5,6,7,8,9])).then(function(j){var B;return j.schemaFilter((B=n.plan)===null||B===void 0?void 0:B.track,e)})]:[3,10];case 9:return b=N.sent(),[3,11];case 10:b=void 0,N.label=11;case 11:return w=b,p=kW(e,n),[4,XW(e,t.integrations,p,n,h,f).catch(function(){return[]})];case 12:return _=N.sent(),O=qo(qo([qW],v,!0),_,!0),w&&O.push(w),P=((u=n.integrations)===null||u===void 0?void 0:u.All)===!1&&!n.integrations["Segment.io"]||n.integrations&&n.integrations["Segment.io"]===!1,P?[3,14]:(T=(R=O).push,[4,SW(t,p["Segment.io"],e.integrations)]);case 13:T.apply(R,[N.sent()]),N.label=14;case 14:return[4,t.register.apply(t,qo(qo([],O,!1),c,!1))];case 15:return A=N.sent(),[4,EV(t,a)];case 16:return N.sent(),Object.entries((l=e.enabledMiddleware)!==null&&l!==void 0?l:{}).some(function(j){var B=j[1];return B})?[4,lc(()=>import("./index-BxeEvAx-.js"),__vite__mapDeps([15,1,2,3,4,5,6,7,8,9])).then(function(j){var B=j.remoteMiddlewares;return ar(M,void 0,void 0,function(){var q,W;return sr(this,function(J){switch(J.label){case 0:return[4,B(A,e,n.obfuscate)];case 1:return q=J.sent(),W=q.map(function(te){return t.addSourceMiddleware(te)}),[2,Promise.all(W)]}})})})]:[3,18];case 17:N.sent(),N.label=18;case 18:return[4,wV(t,a)];case 19:return N.sent(),[2,A]}})})}function aH(r,e,t){var n,i,o,a,s,u,l,c,f;return e===void 0&&(e={}),ar(this,void 0,void 0,function(){var h,d,v,y,w,b,p,_,O,P,R;return sr(this,function(T){switch(T.label){case 0:return e.disable===!0?[2,[new bk,Sh.system()]]:(e.globalAnalyticsKey&&mV(e.globalAnalyticsKey),r.cdnURL&&IW(r.cdnURL),e.initialPageview&&t.add(new sS("page",[])),h=nH(),d=(n=r.cdnURL)!==null&&n!==void 0?n:DT(),(i=r.cdnSettings)!==null&&i!==void 0?(y=i,[3,3]):[3,1]);case 1:return[4,QW(r.writeKey,d)];case 2:y=T.sent(),T.label=3;case 3:return v=y,e.updateCDNSettings&&(v=e.updateCDNSettings(v)),typeof e.disable!="function"?[3,5]:[4,e.disable(v)];case 4:if(w=T.sent(),w)return[2,[new bk,Sh.system()]];T.label=5;case 5:return b=(a=(o=v.integrations["Segment.io"])===null||o===void 0?void 0:o.retryQueue)!==null&&a!==void 0?a:!0,e=Nt({retryQueue:b},e),p=new aN(Nt(Nt({},r),{cdnSettings:v,cdnURL:d}),e),ZW(p),_=(s=r.plugins)!==null&&s!==void 0?s:[],O=(u=r.classicIntegrations)!==null&&u!==void 0?u:[],P=(l=e.integrations)===null||l===void 0?void 0:l["Segment.io"],ML.initRemoteMetrics(Nt(Nt({},v.metrics),{host:(c=P==null?void 0:P.apiHost)!==null&&c!==void 0?c:(f=v.metrics)===null||f===void 0?void 0:f.host,protocol:P==null?void 0:P.protocol})),[4,oH(r.writeKey,v,p,e,_,O,t)];case 6:return R=T.sent(),p.initialized=!0,p.emit("initialize",r,e),[4,rH(p,h,t)];case 7:return T.sent(),[2,[p,R]]}})})}var sH=function(r){Ks(e,r);function e(){var t=this,n=RL(),i=n.promise,o=n.resolve;return t=r.call(this,function(a){return i.then(function(s){var u=s[0],l=s[1];return aH(u,l,a)})})||this,t._resolveLoadStart=function(a,s){return o([a,s])},t}return e.prototype.load=function(t,n){return n===void 0&&(n={}),this._resolveLoadStart(t,n),this},e.load=function(t,n){return n===void 0&&(n={}),new e().load(t,n)},e.standalone=function(t,n){return e.load({writeKey:t},n).then(function(i){return i[0]})},e}(CV);/*! For license information please see base.mjs.LICENSE.txt */var uH={7991:(r,e)=>{e.byteLength=function(l){var c=s(l),f=c[0],h=c[1];return 3*(f+h)/4-h},e.toByteArray=function(l){var c,f,h=s(l),d=h[0],v=h[1],y=new i(function(p,_,O){return 3*(_+O)/4-O}(0,d,v)),w=0,b=v>0?d-4:d;for(f=0;f<b;f+=4)c=n[l.charCodeAt(f)]<<18|n[l.charCodeAt(f+1)]<<12|n[l.charCodeAt(f+2)]<<6|n[l.charCodeAt(f+3)],y[w++]=c>>16&255,y[w++]=c>>8&255,y[w++]=255&c;return v===2&&(c=n[l.charCodeAt(f)]<<2|n[l.charCodeAt(f+1)]>>4,y[w++]=255&c),v===1&&(c=n[l.charCodeAt(f)]<<10|n[l.charCodeAt(f+1)]<<4|n[l.charCodeAt(f+2)]>>2,y[w++]=c>>8&255,y[w++]=255&c),y},e.fromByteArray=function(l){for(var c,f=l.length,h=f%3,d=[],v=16383,y=0,w=f-h;y<w;y+=v)d.push(u(l,y,y+v>w?w:y+v));return h===1?(c=l[f-1],d.push(t[c>>2]+t[c<<4&63]+"==")):h===2&&(c=(l[f-2]<<8)+l[f-1],d.push(t[c>>10]+t[c>>4&63]+t[c<<2&63]+"=")),d.join("")};for(var t=[],n=[],i=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)t[a]=o[a],n[o.charCodeAt(a)]=a;function s(l){var c=l.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var f=l.indexOf("=");return f===-1&&(f=c),[f,f===c?0:4-f%4]}function u(l,c,f){for(var h,d,v=[],y=c;y<f;y+=3)h=(l[y]<<16&16711680)+(l[y+1]<<8&65280)+(255&l[y+2]),v.push(t[(d=h)>>18&63]+t[d>>12&63]+t[d>>6&63]+t[63&d]);return v.join("")}n[45]=62,n[95]=63},1048:(r,e,t)=>{const n=t(7991),i=t(9318),o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=function(H){return+H!=H&&(H=0),u.alloc(+H)},e.INSPECT_MAX_BYTES=50;const a=2147483647;function s(H){if(H>a)throw new RangeError('The value "'+H+'" is invalid for option "size"');const X=new Uint8Array(H);return Object.setPrototypeOf(X,u.prototype),X}function u(H,X,ne){if(typeof H=="number"){if(typeof X=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(H)}return l(H,X,ne)}function l(H,X,ne){if(typeof H=="string")return function(Ne,et){if(typeof et=="string"&&et!==""||(et="utf8"),!u.isEncoding(et))throw new TypeError("Unknown encoding: "+et);const wt=0|y(Ne,et);let lt=s(wt);const pe=lt.write(Ne,et);return pe!==wt&&(lt=lt.slice(0,pe)),lt}(H,X);if(ArrayBuffer.isView(H))return function(Ne){if(Ve(Ne,Uint8Array)){const et=new Uint8Array(Ne);return d(et.buffer,et.byteOffset,et.byteLength)}return h(Ne)}(H);if(H==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof H);if(Ve(H,ArrayBuffer)||H&&Ve(H.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ve(H,SharedArrayBuffer)||H&&Ve(H.buffer,SharedArrayBuffer)))return d(H,X,ne);if(typeof H=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Se=H.valueOf&&H.valueOf();if(Se!=null&&Se!==H)return u.from(Se,X,ne);const Te=function(Ne){if(u.isBuffer(Ne)){const et=0|v(Ne.length),wt=s(et);return wt.length===0||Ne.copy(wt,0,0,et),wt}return Ne.length!==void 0?typeof Ne.length!="number"||tt(Ne.length)?s(0):h(Ne):Ne.type==="Buffer"&&Array.isArray(Ne.data)?h(Ne.data):void 0}(H);if(Te)return Te;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof H[Symbol.toPrimitive]=="function")return u.from(H[Symbol.toPrimitive]("string"),X,ne);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof H)}function c(H){if(typeof H!="number")throw new TypeError('"size" argument must be of type number');if(H<0)throw new RangeError('The value "'+H+'" is invalid for option "size"')}function f(H){return c(H),s(H<0?0:0|v(H))}function h(H){const X=H.length<0?0:0|v(H.length),ne=s(X);for(let Se=0;Se<X;Se+=1)ne[Se]=255&H[Se];return ne}function d(H,X,ne){if(X<0||H.byteLength<X)throw new RangeError('"offset" is outside of buffer bounds');if(H.byteLength<X+(ne||0))throw new RangeError('"length" is outside of buffer bounds');let Se;return Se=X===void 0&&ne===void 0?new Uint8Array(H):ne===void 0?new Uint8Array(H,X):new Uint8Array(H,X,ne),Object.setPrototypeOf(Se,u.prototype),Se}function v(H){if(H>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|H}function y(H,X){if(u.isBuffer(H))return H.length;if(ArrayBuffer.isView(H)||Ve(H,ArrayBuffer))return H.byteLength;if(typeof H!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof H);const ne=H.length,Se=arguments.length>2&&arguments[2]===!0;if(!Se&&ne===0)return 0;let Te=!1;for(;;)switch(X){case"ascii":case"latin1":case"binary":return ne;case"utf8":case"utf-8":return de(H).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*ne;case"hex":return ne>>>1;case"base64":return Oe(H).length;default:if(Te)return Se?-1:de(H).length;X=(""+X).toLowerCase(),Te=!0}}function w(H,X,ne){let Se=!1;if((X===void 0||X<0)&&(X=0),X>this.length||((ne===void 0||ne>this.length)&&(ne=this.length),ne<=0)||(ne>>>=0)<=(X>>>=0))return"";for(H||(H="utf8");;)switch(H){case"hex":return W(this,X,ne);case"utf8":case"utf-8":return N(this,X,ne);case"ascii":return B(this,X,ne);case"latin1":case"binary":return q(this,X,ne);case"base64":return M(this,X,ne);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,X,ne);default:if(Se)throw new TypeError("Unknown encoding: "+H);H=(H+"").toLowerCase(),Se=!0}}function b(H,X,ne){const Se=H[X];H[X]=H[ne],H[ne]=Se}function p(H,X,ne,Se,Te){if(H.length===0)return-1;if(typeof ne=="string"?(Se=ne,ne=0):ne>2147483647?ne=2147483647:ne<-2147483648&&(ne=-2147483648),tt(ne=+ne)&&(ne=Te?0:H.length-1),ne<0&&(ne=H.length+ne),ne>=H.length){if(Te)return-1;ne=H.length-1}else if(ne<0){if(!Te)return-1;ne=0}if(typeof X=="string"&&(X=u.from(X,Se)),u.isBuffer(X))return X.length===0?-1:_(H,X,ne,Se,Te);if(typeof X=="number")return X&=255,typeof Uint8Array.prototype.indexOf=="function"?Te?Uint8Array.prototype.indexOf.call(H,X,ne):Uint8Array.prototype.lastIndexOf.call(H,X,ne):_(H,[X],ne,Se,Te);throw new TypeError("val must be string, number or Buffer")}function _(H,X,ne,Se,Te){let Ne,et=1,wt=H.length,lt=X.length;if(Se!==void 0&&((Se=String(Se).toLowerCase())==="ucs2"||Se==="ucs-2"||Se==="utf16le"||Se==="utf-16le")){if(H.length<2||X.length<2)return-1;et=2,wt/=2,lt/=2,ne/=2}function pe(Ue,nt){return et===1?Ue[nt]:Ue.readUInt16BE(nt*et)}if(Te){let Ue=-1;for(Ne=ne;Ne<wt;Ne++)if(pe(H,Ne)===pe(X,Ue===-1?0:Ne-Ue)){if(Ue===-1&&(Ue=Ne),Ne-Ue+1===lt)return Ue*et}else Ue!==-1&&(Ne-=Ne-Ue),Ue=-1}else for(ne+lt>wt&&(ne=wt-lt),Ne=ne;Ne>=0;Ne--){let Ue=!0;for(let nt=0;nt<lt;nt++)if(pe(H,Ne+nt)!==pe(X,nt)){Ue=!1;break}if(Ue)return Ne}return-1}function O(H,X,ne,Se){ne=Number(ne)||0;const Te=H.length-ne;Se?(Se=Number(Se))>Te&&(Se=Te):Se=Te;const Ne=X.length;let et;for(Se>Ne/2&&(Se=Ne/2),et=0;et<Se;++et){const wt=parseInt(X.substr(2*et,2),16);if(tt(wt))return et;H[ne+et]=wt}return et}function P(H,X,ne,Se){return Ae(de(X,H.length-ne),H,ne,Se)}function R(H,X,ne,Se){return Ae(function(Te){const Ne=[];for(let et=0;et<Te.length;++et)Ne.push(255&Te.charCodeAt(et));return Ne}(X),H,ne,Se)}function T(H,X,ne,Se){return Ae(Oe(X),H,ne,Se)}function A(H,X,ne,Se){return Ae(function(Te,Ne){let et,wt,lt;const pe=[];for(let Ue=0;Ue<Te.length&&!((Ne-=2)<0);++Ue)et=Te.charCodeAt(Ue),wt=et>>8,lt=et%256,pe.push(lt),pe.push(wt);return pe}(X,H.length-ne),H,ne,Se)}function M(H,X,ne){return X===0&&ne===H.length?n.fromByteArray(H):n.fromByteArray(H.slice(X,ne))}function N(H,X,ne){ne=Math.min(H.length,ne);const Se=[];let Te=X;for(;Te<ne;){const Ne=H[Te];let et=null,wt=Ne>239?4:Ne>223?3:Ne>191?2:1;if(Te+wt<=ne){let lt,pe,Ue,nt;switch(wt){case 1:Ne<128&&(et=Ne);break;case 2:lt=H[Te+1],(192&lt)==128&&(nt=(31&Ne)<<6|63&lt,nt>127&&(et=nt));break;case 3:lt=H[Te+1],pe=H[Te+2],(192&lt)==128&&(192&pe)==128&&(nt=(15&Ne)<<12|(63&lt)<<6|63&pe,nt>2047&&(nt<55296||nt>57343)&&(et=nt));break;case 4:lt=H[Te+1],pe=H[Te+2],Ue=H[Te+3],(192&lt)==128&&(192&pe)==128&&(192&Ue)==128&&(nt=(15&Ne)<<18|(63&lt)<<12|(63&pe)<<6|63&Ue,nt>65535&&nt<1114112&&(et=nt))}}et===null?(et=65533,wt=1):et>65535&&(et-=65536,Se.push(et>>>10&1023|55296),et=56320|1023&et),Se.push(et),Te+=wt}return function(Ne){const et=Ne.length;if(et<=j)return String.fromCharCode.apply(String,Ne);let wt="",lt=0;for(;lt<et;)wt+=String.fromCharCode.apply(String,Ne.slice(lt,lt+=j));return wt}(Se)}e.kMaxLength=a,u.TYPED_ARRAY_SUPPORT=function(){try{const H=new Uint8Array(1),X={foo:function(){return 42}};return Object.setPrototypeOf(X,Uint8Array.prototype),Object.setPrototypeOf(H,X),H.foo()===42}catch{return!1}}(),u.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(H,X,ne){return l(H,X,ne)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(H,X,ne){return function(Se,Te,Ne){return c(Se),Se<=0?s(Se):Te!==void 0?typeof Ne=="string"?s(Se).fill(Te,Ne):s(Se).fill(Te):s(Se)}(H,X,ne)},u.allocUnsafe=function(H){return f(H)},u.allocUnsafeSlow=function(H){return f(H)},u.isBuffer=function(H){return H!=null&&H._isBuffer===!0&&H!==u.prototype},u.compare=function(H,X){if(Ve(H,Uint8Array)&&(H=u.from(H,H.offset,H.byteLength)),Ve(X,Uint8Array)&&(X=u.from(X,X.offset,X.byteLength)),!u.isBuffer(H)||!u.isBuffer(X))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(H===X)return 0;let ne=H.length,Se=X.length;for(let Te=0,Ne=Math.min(ne,Se);Te<Ne;++Te)if(H[Te]!==X[Te]){ne=H[Te],Se=X[Te];break}return ne<Se?-1:Se<ne?1:0},u.isEncoding=function(H){switch(String(H).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(H,X){if(!Array.isArray(H))throw new TypeError('"list" argument must be an Array of Buffers');if(H.length===0)return u.alloc(0);let ne;if(X===void 0)for(X=0,ne=0;ne<H.length;++ne)X+=H[ne].length;const Se=u.allocUnsafe(X);let Te=0;for(ne=0;ne<H.length;++ne){let Ne=H[ne];if(Ve(Ne,Uint8Array))Te+Ne.length>Se.length?(u.isBuffer(Ne)||(Ne=u.from(Ne)),Ne.copy(Se,Te)):Uint8Array.prototype.set.call(Se,Ne,Te);else{if(!u.isBuffer(Ne))throw new TypeError('"list" argument must be an Array of Buffers');Ne.copy(Se,Te)}Te+=Ne.length}return Se},u.byteLength=y,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const H=this.length;if(H%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let X=0;X<H;X+=2)b(this,X,X+1);return this},u.prototype.swap32=function(){const H=this.length;if(H%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let X=0;X<H;X+=4)b(this,X,X+3),b(this,X+1,X+2);return this},u.prototype.swap64=function(){const H=this.length;if(H%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let X=0;X<H;X+=8)b(this,X,X+7),b(this,X+1,X+6),b(this,X+2,X+5),b(this,X+3,X+4);return this},u.prototype.toString=function(){const H=this.length;return H===0?"":arguments.length===0?N(this,0,H):w.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(H){if(!u.isBuffer(H))throw new TypeError("Argument must be a Buffer");return this===H||u.compare(this,H)===0},u.prototype.inspect=function(){let H="";const X=e.INSPECT_MAX_BYTES;return H=this.toString("hex",0,X).replace(/(.{2})/g,"$1 ").trim(),this.length>X&&(H+=" ... "),"<Buffer "+H+">"},o&&(u.prototype[o]=u.prototype.inspect),u.prototype.compare=function(H,X,ne,Se,Te){if(Ve(H,Uint8Array)&&(H=u.from(H,H.offset,H.byteLength)),!u.isBuffer(H))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof H);if(X===void 0&&(X=0),ne===void 0&&(ne=H?H.length:0),Se===void 0&&(Se=0),Te===void 0&&(Te=this.length),X<0||ne>H.length||Se<0||Te>this.length)throw new RangeError("out of range index");if(Se>=Te&&X>=ne)return 0;if(Se>=Te)return-1;if(X>=ne)return 1;if(this===H)return 0;let Ne=(Te>>>=0)-(Se>>>=0),et=(ne>>>=0)-(X>>>=0);const wt=Math.min(Ne,et),lt=this.slice(Se,Te),pe=H.slice(X,ne);for(let Ue=0;Ue<wt;++Ue)if(lt[Ue]!==pe[Ue]){Ne=lt[Ue],et=pe[Ue];break}return Ne<et?-1:et<Ne?1:0},u.prototype.includes=function(H,X,ne){return this.indexOf(H,X,ne)!==-1},u.prototype.indexOf=function(H,X,ne){return p(this,H,X,ne,!0)},u.prototype.lastIndexOf=function(H,X,ne){return p(this,H,X,ne,!1)},u.prototype.write=function(H,X,ne,Se){if(X===void 0)Se="utf8",ne=this.length,X=0;else if(ne===void 0&&typeof X=="string")Se=X,ne=this.length,X=0;else{if(!isFinite(X))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");X>>>=0,isFinite(ne)?(ne>>>=0,Se===void 0&&(Se="utf8")):(Se=ne,ne=void 0)}const Te=this.length-X;if((ne===void 0||ne>Te)&&(ne=Te),H.length>0&&(ne<0||X<0)||X>this.length)throw new RangeError("Attempt to write outside buffer bounds");Se||(Se="utf8");let Ne=!1;for(;;)switch(Se){case"hex":return O(this,H,X,ne);case"utf8":case"utf-8":return P(this,H,X,ne);case"ascii":case"latin1":case"binary":return R(this,H,X,ne);case"base64":return T(this,H,X,ne);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,H,X,ne);default:if(Ne)throw new TypeError("Unknown encoding: "+Se);Se=(""+Se).toLowerCase(),Ne=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const j=4096;function B(H,X,ne){let Se="";ne=Math.min(H.length,ne);for(let Te=X;Te<ne;++Te)Se+=String.fromCharCode(127&H[Te]);return Se}function q(H,X,ne){let Se="";ne=Math.min(H.length,ne);for(let Te=X;Te<ne;++Te)Se+=String.fromCharCode(H[Te]);return Se}function W(H,X,ne){const Se=H.length;(!X||X<0)&&(X=0),(!ne||ne<0||ne>Se)&&(ne=Se);let Te="";for(let Ne=X;Ne<ne;++Ne)Te+=ht[H[Ne]];return Te}function J(H,X,ne){const Se=H.slice(X,ne);let Te="";for(let Ne=0;Ne<Se.length-1;Ne+=2)Te+=String.fromCharCode(Se[Ne]+256*Se[Ne+1]);return Te}function te(H,X,ne){if(H%1!=0||H<0)throw new RangeError("offset is not uint");if(H+X>ne)throw new RangeError("Trying to access beyond buffer length")}function re(H,X,ne,Se,Te,Ne){if(!u.isBuffer(H))throw new TypeError('"buffer" argument must be a Buffer instance');if(X>Te||X<Ne)throw new RangeError('"value" argument is out of bounds');if(ne+Se>H.length)throw new RangeError("Index out of range")}function ee(H,X,ne,Se,Te){qe(X,Se,Te,H,ne,7);let Ne=Number(X&BigInt(4294967295));H[ne++]=Ne,Ne>>=8,H[ne++]=Ne,Ne>>=8,H[ne++]=Ne,Ne>>=8,H[ne++]=Ne;let et=Number(X>>BigInt(32)&BigInt(4294967295));return H[ne++]=et,et>>=8,H[ne++]=et,et>>=8,H[ne++]=et,et>>=8,H[ne++]=et,ne}function fe(H,X,ne,Se,Te){qe(X,Se,Te,H,ne,7);let Ne=Number(X&BigInt(4294967295));H[ne+7]=Ne,Ne>>=8,H[ne+6]=Ne,Ne>>=8,H[ne+5]=Ne,Ne>>=8,H[ne+4]=Ne;let et=Number(X>>BigInt(32)&BigInt(4294967295));return H[ne+3]=et,et>>=8,H[ne+2]=et,et>>=8,H[ne+1]=et,et>>=8,H[ne]=et,ne+8}function he(H,X,ne,Se,Te,Ne){if(ne+Se>H.length)throw new RangeError("Index out of range");if(ne<0)throw new RangeError("Index out of range")}function se(H,X,ne,Se,Te){return X=+X,ne>>>=0,Te||he(H,0,ne,4),i.write(H,X,ne,Se,23,4),ne+4}function me(H,X,ne,Se,Te){return X=+X,ne>>>=0,Te||he(H,0,ne,8),i.write(H,X,ne,Se,52,8),ne+8}u.prototype.slice=function(H,X){const ne=this.length;(H=~~H)<0?(H+=ne)<0&&(H=0):H>ne&&(H=ne),(X=X===void 0?ne:~~X)<0?(X+=ne)<0&&(X=0):X>ne&&(X=ne),X<H&&(X=H);const Se=this.subarray(H,X);return Object.setPrototypeOf(Se,u.prototype),Se},u.prototype.readUintLE=u.prototype.readUIntLE=function(H,X,ne){H>>>=0,X>>>=0,ne||te(H,X,this.length);let Se=this[H],Te=1,Ne=0;for(;++Ne<X&&(Te*=256);)Se+=this[H+Ne]*Te;return Se},u.prototype.readUintBE=u.prototype.readUIntBE=function(H,X,ne){H>>>=0,X>>>=0,ne||te(H,X,this.length);let Se=this[H+--X],Te=1;for(;X>0&&(Te*=256);)Se+=this[H+--X]*Te;return Se},u.prototype.readUint8=u.prototype.readUInt8=function(H,X){return H>>>=0,X||te(H,1,this.length),this[H]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(H,X){return H>>>=0,X||te(H,2,this.length),this[H]|this[H+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(H,X){return H>>>=0,X||te(H,2,this.length),this[H]<<8|this[H+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(H,X){return H>>>=0,X||te(H,4,this.length),(this[H]|this[H+1]<<8|this[H+2]<<16)+16777216*this[H+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(H,X){return H>>>=0,X||te(H,4,this.length),16777216*this[H]+(this[H+1]<<16|this[H+2]<<8|this[H+3])},u.prototype.readBigUInt64LE=xt(function(H){Ge(H>>>=0,"offset");const X=this[H],ne=this[H+7];X!==void 0&&ne!==void 0||Me(H,this.length-8);const Se=X+256*this[++H]+65536*this[++H]+this[++H]*2**24,Te=this[++H]+256*this[++H]+65536*this[++H]+ne*2**24;return BigInt(Se)+(BigInt(Te)<<BigInt(32))}),u.prototype.readBigUInt64BE=xt(function(H){Ge(H>>>=0,"offset");const X=this[H],ne=this[H+7];X!==void 0&&ne!==void 0||Me(H,this.length-8);const Se=X*2**24+65536*this[++H]+256*this[++H]+this[++H],Te=this[++H]*2**24+65536*this[++H]+256*this[++H]+ne;return(BigInt(Se)<<BigInt(32))+BigInt(Te)}),u.prototype.readIntLE=function(H,X,ne){H>>>=0,X>>>=0,ne||te(H,X,this.length);let Se=this[H],Te=1,Ne=0;for(;++Ne<X&&(Te*=256);)Se+=this[H+Ne]*Te;return Te*=128,Se>=Te&&(Se-=Math.pow(2,8*X)),Se},u.prototype.readIntBE=function(H,X,ne){H>>>=0,X>>>=0,ne||te(H,X,this.length);let Se=X,Te=1,Ne=this[H+--Se];for(;Se>0&&(Te*=256);)Ne+=this[H+--Se]*Te;return Te*=128,Ne>=Te&&(Ne-=Math.pow(2,8*X)),Ne},u.prototype.readInt8=function(H,X){return H>>>=0,X||te(H,1,this.length),128&this[H]?-1*(255-this[H]+1):this[H]},u.prototype.readInt16LE=function(H,X){H>>>=0,X||te(H,2,this.length);const ne=this[H]|this[H+1]<<8;return 32768&ne?4294901760|ne:ne},u.prototype.readInt16BE=function(H,X){H>>>=0,X||te(H,2,this.length);const ne=this[H+1]|this[H]<<8;return 32768&ne?4294901760|ne:ne},u.prototype.readInt32LE=function(H,X){return H>>>=0,X||te(H,4,this.length),this[H]|this[H+1]<<8|this[H+2]<<16|this[H+3]<<24},u.prototype.readInt32BE=function(H,X){return H>>>=0,X||te(H,4,this.length),this[H]<<24|this[H+1]<<16|this[H+2]<<8|this[H+3]},u.prototype.readBigInt64LE=xt(function(H){Ge(H>>>=0,"offset");const X=this[H],ne=this[H+7];X!==void 0&&ne!==void 0||Me(H,this.length-8);const Se=this[H+4]+256*this[H+5]+65536*this[H+6]+(ne<<24);return(BigInt(Se)<<BigInt(32))+BigInt(X+256*this[++H]+65536*this[++H]+this[++H]*2**24)}),u.prototype.readBigInt64BE=xt(function(H){Ge(H>>>=0,"offset");const X=this[H],ne=this[H+7];X!==void 0&&ne!==void 0||Me(H,this.length-8);const Se=(X<<24)+65536*this[++H]+256*this[++H]+this[++H];return(BigInt(Se)<<BigInt(32))+BigInt(this[++H]*2**24+65536*this[++H]+256*this[++H]+ne)}),u.prototype.readFloatLE=function(H,X){return H>>>=0,X||te(H,4,this.length),i.read(this,H,!0,23,4)},u.prototype.readFloatBE=function(H,X){return H>>>=0,X||te(H,4,this.length),i.read(this,H,!1,23,4)},u.prototype.readDoubleLE=function(H,X){return H>>>=0,X||te(H,8,this.length),i.read(this,H,!0,52,8)},u.prototype.readDoubleBE=function(H,X){return H>>>=0,X||te(H,8,this.length),i.read(this,H,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(H,X,ne,Se){H=+H,X>>>=0,ne>>>=0,Se||re(this,H,X,ne,Math.pow(2,8*ne)-1,0);let Te=1,Ne=0;for(this[X]=255&H;++Ne<ne&&(Te*=256);)this[X+Ne]=H/Te&255;return X+ne},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(H,X,ne,Se){H=+H,X>>>=0,ne>>>=0,Se||re(this,H,X,ne,Math.pow(2,8*ne)-1,0);let Te=ne-1,Ne=1;for(this[X+Te]=255&H;--Te>=0&&(Ne*=256);)this[X+Te]=H/Ne&255;return X+ne},u.prototype.writeUint8=u.prototype.writeUInt8=function(H,X,ne){return H=+H,X>>>=0,ne||re(this,H,X,1,255,0),this[X]=255&H,X+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(H,X,ne){return H=+H,X>>>=0,ne||re(this,H,X,2,65535,0),this[X]=255&H,this[X+1]=H>>>8,X+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(H,X,ne){return H=+H,X>>>=0,ne||re(this,H,X,2,65535,0),this[X]=H>>>8,this[X+1]=255&H,X+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(H,X,ne){return H=+H,X>>>=0,ne||re(this,H,X,4,4294967295,0),this[X+3]=H>>>24,this[X+2]=H>>>16,this[X+1]=H>>>8,this[X]=255&H,X+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(H,X,ne){return H=+H,X>>>=0,ne||re(this,H,X,4,4294967295,0),this[X]=H>>>24,this[X+1]=H>>>16,this[X+2]=H>>>8,this[X+3]=255&H,X+4},u.prototype.writeBigUInt64LE=xt(function(H,X=0){return ee(this,H,X,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=xt(function(H,X=0){return fe(this,H,X,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(H,X,ne,Se){if(H=+H,X>>>=0,!Se){const wt=Math.pow(2,8*ne-1);re(this,H,X,ne,wt-1,-wt)}let Te=0,Ne=1,et=0;for(this[X]=255&H;++Te<ne&&(Ne*=256);)H<0&&et===0&&this[X+Te-1]!==0&&(et=1),this[X+Te]=(H/Ne>>0)-et&255;return X+ne},u.prototype.writeIntBE=function(H,X,ne,Se){if(H=+H,X>>>=0,!Se){const wt=Math.pow(2,8*ne-1);re(this,H,X,ne,wt-1,-wt)}let Te=ne-1,Ne=1,et=0;for(this[X+Te]=255&H;--Te>=0&&(Ne*=256);)H<0&&et===0&&this[X+Te+1]!==0&&(et=1),this[X+Te]=(H/Ne>>0)-et&255;return X+ne},u.prototype.writeInt8=function(H,X,ne){return H=+H,X>>>=0,ne||re(this,H,X,1,127,-128),H<0&&(H=255+H+1),this[X]=255&H,X+1},u.prototype.writeInt16LE=function(H,X,ne){return H=+H,X>>>=0,ne||re(this,H,X,2,32767,-32768),this[X]=255&H,this[X+1]=H>>>8,X+2},u.prototype.writeInt16BE=function(H,X,ne){return H=+H,X>>>=0,ne||re(this,H,X,2,32767,-32768),this[X]=H>>>8,this[X+1]=255&H,X+2},u.prototype.writeInt32LE=function(H,X,ne){return H=+H,X>>>=0,ne||re(this,H,X,4,2147483647,-2147483648),this[X]=255&H,this[X+1]=H>>>8,this[X+2]=H>>>16,this[X+3]=H>>>24,X+4},u.prototype.writeInt32BE=function(H,X,ne){return H=+H,X>>>=0,ne||re(this,H,X,4,2147483647,-2147483648),H<0&&(H=4294967295+H+1),this[X]=H>>>24,this[X+1]=H>>>16,this[X+2]=H>>>8,this[X+3]=255&H,X+4},u.prototype.writeBigInt64LE=xt(function(H,X=0){return ee(this,H,X,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=xt(function(H,X=0){return fe(this,H,X,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeFloatLE=function(H,X,ne){return se(this,H,X,!0,ne)},u.prototype.writeFloatBE=function(H,X,ne){return se(this,H,X,!1,ne)},u.prototype.writeDoubleLE=function(H,X,ne){return me(this,H,X,!0,ne)},u.prototype.writeDoubleBE=function(H,X,ne){return me(this,H,X,!1,ne)},u.prototype.copy=function(H,X,ne,Se){if(!u.isBuffer(H))throw new TypeError("argument should be a Buffer");if(ne||(ne=0),Se||Se===0||(Se=this.length),X>=H.length&&(X=H.length),X||(X=0),Se>0&&Se<ne&&(Se=ne),Se===ne||H.length===0||this.length===0)return 0;if(X<0)throw new RangeError("targetStart out of bounds");if(ne<0||ne>=this.length)throw new RangeError("Index out of range");if(Se<0)throw new RangeError("sourceEnd out of bounds");Se>this.length&&(Se=this.length),H.length-X<Se-ne&&(Se=H.length-X+ne);const Te=Se-ne;return this===H&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(X,ne,Se):Uint8Array.prototype.set.call(H,this.subarray(ne,Se),X),Te},u.prototype.fill=function(H,X,ne,Se){if(typeof H=="string"){if(typeof X=="string"?(Se=X,X=0,ne=this.length):typeof ne=="string"&&(Se=ne,ne=this.length),Se!==void 0&&typeof Se!="string")throw new TypeError("encoding must be a string");if(typeof Se=="string"&&!u.isEncoding(Se))throw new TypeError("Unknown encoding: "+Se);if(H.length===1){const Ne=H.charCodeAt(0);(Se==="utf8"&&Ne<128||Se==="latin1")&&(H=Ne)}}else typeof H=="number"?H&=255:typeof H=="boolean"&&(H=Number(H));if(X<0||this.length<X||this.length<ne)throw new RangeError("Out of range index");if(ne<=X)return this;let Te;if(X>>>=0,ne=ne===void 0?this.length:ne>>>0,H||(H=0),typeof H=="number")for(Te=X;Te<ne;++Te)this[Te]=H;else{const Ne=u.isBuffer(H)?H:u.from(H,Se),et=Ne.length;if(et===0)throw new TypeError('The value "'+H+'" is invalid for argument "value"');for(Te=0;Te<ne-X;++Te)this[Te+X]=Ne[Te%et]}return this};const De={};function Le(H,X,ne){De[H]=class extends ne{constructor(){super(),Object.defineProperty(this,"message",{value:X.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${H}]`,this.stack,delete this.name}get code(){return H}set code(Se){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Se,writable:!0})}toString(){return`${this.name} [${H}]: ${this.message}`}}}function Ie(H){let X="",ne=H.length;const Se=H[0]==="-"?1:0;for(;ne>=Se+4;ne-=3)X=`_${H.slice(ne-3,ne)}${X}`;return`${H.slice(0,ne)}${X}`}function qe(H,X,ne,Se,Te,Ne){if(H>ne||H<X){const et=typeof X=="bigint"?"n":"";let wt;throw wt=X===0||X===BigInt(0)?`>= 0${et} and < 2${et} ** ${8*(Ne+1)}${et}`:`>= -(2${et} ** ${8*(Ne+1)-1}${et}) and < 2 ** ${8*(Ne+1)-1}${et}`,new De.ERR_OUT_OF_RANGE("value",wt,H)}(function(et,wt,lt){Ge(wt,"offset"),et[wt]!==void 0&&et[wt+lt]!==void 0||Me(wt,et.length-(lt+1))})(Se,Te,Ne)}function Ge(H,X){if(typeof H!="number")throw new De.ERR_INVALID_ARG_TYPE(X,"number",H)}function Me(H,X,ne){throw Math.floor(H)!==H?(Ge(H,ne),new De.ERR_OUT_OF_RANGE("offset","an integer",H)):X<0?new De.ERR_BUFFER_OUT_OF_BOUNDS:new De.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${X}`,H)}Le("ERR_BUFFER_OUT_OF_BOUNDS",function(H){return H?`${H} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Le("ERR_INVALID_ARG_TYPE",function(H,X){return`The "${H}" argument must be of type number. Received type ${typeof X}`},TypeError),Le("ERR_OUT_OF_RANGE",function(H,X,ne){let Se=`The value of "${H}" is out of range.`,Te=ne;return Number.isInteger(ne)&&Math.abs(ne)>2**32?Te=Ie(String(ne)):typeof ne=="bigint"&&(Te=String(ne),(ne>BigInt(2)**BigInt(32)||ne<-(BigInt(2)**BigInt(32)))&&(Te=Ie(Te)),Te+="n"),Se+=` It must be ${X}. Received ${Te}`,Se},RangeError);const Pe=/[^+/0-9A-Za-z-_]/g;function de(H,X){let ne;X=X||1/0;const Se=H.length;let Te=null;const Ne=[];for(let et=0;et<Se;++et){if(ne=H.charCodeAt(et),ne>55295&&ne<57344){if(!Te){if(ne>56319){(X-=3)>-1&&Ne.push(239,191,189);continue}if(et+1===Se){(X-=3)>-1&&Ne.push(239,191,189);continue}Te=ne;continue}if(ne<56320){(X-=3)>-1&&Ne.push(239,191,189),Te=ne;continue}ne=65536+(Te-55296<<10|ne-56320)}else Te&&(X-=3)>-1&&Ne.push(239,191,189);if(Te=null,ne<128){if((X-=1)<0)break;Ne.push(ne)}else if(ne<2048){if((X-=2)<0)break;Ne.push(ne>>6|192,63&ne|128)}else if(ne<65536){if((X-=3)<0)break;Ne.push(ne>>12|224,ne>>6&63|128,63&ne|128)}else{if(!(ne<1114112))throw new Error("Invalid code point");if((X-=4)<0)break;Ne.push(ne>>18|240,ne>>12&63|128,ne>>6&63|128,63&ne|128)}}return Ne}function Oe(H){return n.toByteArray(function(X){if((X=(X=X.split("=")[0]).trim().replace(Pe,"")).length<2)return"";for(;X.length%4!=0;)X+="=";return X}(H))}function Ae(H,X,ne,Se){let Te;for(Te=0;Te<Se&&!(Te+ne>=X.length||Te>=H.length);++Te)X[Te+ne]=H[Te];return Te}function Ve(H,X){return H instanceof X||H!=null&&H.constructor!=null&&H.constructor.name!=null&&H.constructor.name===X.name}function tt(H){return H!=H}const ht=function(){const H="0123456789abcdef",X=new Array(256);for(let ne=0;ne<16;++ne){const Se=16*ne;for(let Te=0;Te<16;++Te)X[Se+Te]=H[ne]+H[Te]}return X}();function xt(H){return typeof BigInt>"u"?ut:H}function ut(){throw new Error("BigInt not supported")}},6931:r=>{r.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},3269:(r,e,t)=>{var n=t(6931),i=t(9975),o=Object.hasOwnProperty,a=Object.create(null);for(var s in n)o.call(n,s)&&(a[n[s]]=s);var u=r.exports={to:{},get:{}};function l(f,h,d){return Math.min(Math.max(h,f),d)}function c(f){var h=Math.round(f).toString(16).toUpperCase();return h.length<2?"0"+h:h}u.get=function(f){var h,d;switch(f.substring(0,3).toLowerCase()){case"hsl":h=u.get.hsl(f),d="hsl";break;case"hwb":h=u.get.hwb(f),d="hwb";break;default:h=u.get.rgb(f),d="rgb"}return h?{model:d,value:h}:null},u.get.rgb=function(f){if(!f)return null;var h,d,v,y=[0,0,0,1];if(h=f.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(v=h[2],h=h[1],d=0;d<3;d++){var w=2*d;y[d]=parseInt(h.slice(w,w+2),16)}v&&(y[3]=parseInt(v,16)/255)}else if(h=f.match(/^#([a-f0-9]{3,4})$/i)){for(v=(h=h[1])[3],d=0;d<3;d++)y[d]=parseInt(h[d]+h[d],16);v&&(y[3]=parseInt(v+v,16)/255)}else if(h=f.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)){for(d=0;d<3;d++)y[d]=parseInt(h[d+1],0);h[4]&&(h[5]?y[3]=.01*parseFloat(h[4]):y[3]=parseFloat(h[4]))}else{if(!(h=f.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(h=f.match(/^(\w+)$/))?h[1]==="transparent"?[0,0,0,0]:o.call(n,h[1])?((y=n[h[1]])[3]=1,y):null:null;for(d=0;d<3;d++)y[d]=Math.round(2.55*parseFloat(h[d+1]));h[4]&&(h[5]?y[3]=.01*parseFloat(h[4]):y[3]=parseFloat(h[4]))}for(d=0;d<3;d++)y[d]=l(y[d],0,255);return y[3]=l(y[3],0,1),y},u.get.hsl=function(f){if(!f)return null;var h=f.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(h){var d=parseFloat(h[4]);return[(parseFloat(h[1])%360+360)%360,l(parseFloat(h[2]),0,100),l(parseFloat(h[3]),0,100),l(isNaN(d)?1:d,0,1)]}return null},u.get.hwb=function(f){if(!f)return null;var h=f.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(h){var d=parseFloat(h[4]);return[(parseFloat(h[1])%360+360)%360,l(parseFloat(h[2]),0,100),l(parseFloat(h[3]),0,100),l(isNaN(d)?1:d,0,1)]}return null},u.to.hex=function(){var f=i(arguments);return"#"+c(f[0])+c(f[1])+c(f[2])+(f[3]<1?c(Math.round(255*f[3])):"")},u.to.rgb=function(){var f=i(arguments);return f.length<4||f[3]===1?"rgb("+Math.round(f[0])+", "+Math.round(f[1])+", "+Math.round(f[2])+")":"rgba("+Math.round(f[0])+", "+Math.round(f[1])+", "+Math.round(f[2])+", "+f[3]+")"},u.to.rgb.percent=function(){var f=i(arguments),h=Math.round(f[0]/255*100),d=Math.round(f[1]/255*100),v=Math.round(f[2]/255*100);return f.length<4||f[3]===1?"rgb("+h+"%, "+d+"%, "+v+"%)":"rgba("+h+"%, "+d+"%, "+v+"%, "+f[3]+")"},u.to.hsl=function(){var f=i(arguments);return f.length<4||f[3]===1?"hsl("+f[0]+", "+f[1]+"%, "+f[2]+"%)":"hsla("+f[0]+", "+f[1]+"%, "+f[2]+"%, "+f[3]+")"},u.to.hwb=function(){var f=i(arguments),h="";return f.length>=4&&f[3]!==1&&(h=", "+f[3]),"hwb("+f[0]+", "+f[1]+"%, "+f[2]+"%"+h+")"},u.to.keyword=function(f){return a[f.slice(0,3)]}},9792:(r,e,t)=>{var n=t(7045),i=t(4360),o=t(6804);r.exports=function(a,s){if(!s)return a;var u=Object.keys(s);if(u.length===0)return a;for(var l=n(a),c=u.length-1;c>=0;c--){var f=u[c],h=String(s[f]);h&&(h=" "+h),o(l,{type:"preprocessor",data:"#define "+f+h})}return i(l)}},6804:r=>{r.exports=function(i,o){Array.isArray(o)||(o=[o]);var a=function(l){for(var c=-1,f=0;f<l.length;f++){var h=l[f];if(h.type==="preprocessor")/^#(extension|version)/.test(h.data)&&(c=Math.max(c,f));else if(h.type==="keyword"&&h.data==="precision"){var d=n(l,f);if(d===-1)throw new Error("precision statement not followed by any semicolons!");c=Math.max(c,d)}}return c+1}(i),s=a>0?i[a-1]:null;s&&t.test(s.data)&&i.splice(a++,0,e),i.splice.apply(i,[a,0].concat(o));var u=a+o.length;return i[u]&&/[^\r\n]$/.test(i[u].data)&&i.splice(u,0,e),i};var e={data:`
`,type:"whitespace"},t=/[^\r\n]$/;function n(i,o){for(var a=o;a<i.length;a++)if(i[a].type==="operator"&&i[a].data===";")return a;return-1}},4360:r=>{r.exports=function(e){for(var t=[],n=0;n<e.length;n++)e[n].type!=="eof"&&t.push(e[n].data);return t.join("")}},3206:(r,e,t)=>{r.exports=function(T){var A,M,N,j=0,B=0,q=u,W=[],J=[],te=1,re=0,ee=0,fe=!1,he=!1,se="",me=o,De=n;(T=T||{}).version==="300 es"&&(me=s,De=a);var Le={},Ie={};for(j=0;j<me.length;j++)Le[me[j]]=!0;for(j=0;j<De.length;j++)Ie[De[j]]=!0;return function(ut){return J=[],ut!==null?function(H){var X;for(j=0,H.toString&&(H=H.toString()),se+=H.replace(/\r\n/g,`
`),N=se.length;A=se[j],j<N;){switch(X=j,q){case c:j=de();break;case f:case h:j=Pe();break;case d:j=Oe();break;case v:j=tt();break;case P:j=Ve();break;case y:j=ht();break;case l:j=xt();break;case _:j=Me();break;case u:j=Ge()}X!==j&&(se[X]===`
`?(re=0,++te):++re)}return B+=j,se=se.slice(j),J}(ut):(W.length&&qe(W.join("")),q=O,qe("(eof)"),J)};function qe(ut){ut.length&&J.push({type:R[q],data:ut,position:ee,line:te,column:re})}function Ge(){return W=W.length?[]:W,M==="/"&&A==="*"?(ee=B+j-1,q=c,M=A,j+1):M==="/"&&A==="/"?(ee=B+j-1,q=f,M=A,j+1):A==="#"?(q=h,ee=B+j,j):/\s/.test(A)?(q=_,ee=B+j,j):(fe=/\d/.test(A),he=/[^\w_]/.test(A),ee=B+j,q=fe?v:he?d:l,j)}function Me(){return/[^\s]/g.test(A)?(qe(W.join("")),q=u,j):(W.push(A),M=A,j+1)}function Pe(){return A!=="\r"&&A!==`
`||M==="\\"?(W.push(A),M=A,j+1):(qe(W.join("")),q=u,j)}function de(){return A==="/"&&M==="*"?(W.push(A),qe(W.join("")),q=u,j+1):(W.push(A),M=A,j+1)}function Oe(){if(M==="."&&/\d/.test(A))return q=y,j;if(M==="/"&&A==="*")return q=c,j;if(M==="/"&&A==="/")return q=f,j;if(A==="."&&W.length){for(;Ae(W););return q=y,j}if(A===";"||A===")"||A==="("){if(W.length)for(;Ae(W););return qe(A),q=u,j+1}var ut=W.length===2&&A!=="=";if(/[\w_\d\s]/.test(A)||ut){for(;Ae(W););return q=u,j}return W.push(A),M=A,j+1}function Ae(ut){for(var H,X,ne=0;;){if(H=i.indexOf(ut.slice(0,ut.length+ne).join("")),X=i[H],H===-1){if(ne--+ut.length>0)continue;X=ut.slice(0,1).join("")}return qe(X),ee+=X.length,(W=W.slice(X.length)).length}}function Ve(){return/[^a-fA-F0-9]/.test(A)?(qe(W.join("")),q=u,j):(W.push(A),M=A,j+1)}function tt(){return A==="."||/[eE]/.test(A)?(W.push(A),q=y,M=A,j+1):A==="x"&&W.length===1&&W[0]==="0"?(q=P,W.push(A),M=A,j+1):/[^\d]/.test(A)?(qe(W.join("")),q=u,j):(W.push(A),M=A,j+1)}function ht(){return A==="f"&&(W.push(A),M=A,j+=1),/[eE]/.test(A)?(W.push(A),M=A,j+1):(A!=="-"&&A!=="+"||!/[eE]/.test(M))&&/[^\d]/.test(A)?(qe(W.join("")),q=u,j):(W.push(A),M=A,j+1)}function xt(){if(/[^\d\w_]/.test(A)){var ut=W.join("");return q=Ie[ut]?p:Le[ut]?b:w,qe(W.join("")),q=u,j}return W.push(A),M=A,j+1}};var n=t(4704),i=t(2063),o=t(7192),a=t(8784),s=t(5592),u=999,l=9999,c=0,f=1,h=2,d=3,v=4,y=5,w=6,b=7,p=8,_=9,O=10,P=11,R=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},5592:(r,e,t)=>{var n=t(7192);n=n.slice().filter(function(i){return!/^(gl\_|texture)/.test(i)}),r.exports=n.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},7192:r=>{r.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},8784:(r,e,t)=>{var n=t(4704);r.exports=n.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},4704:r=>{r.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},2063:r=>{r.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},7045:(r,e,t)=>{var n=t(3206);r.exports=function(i,o){var a=n(o),s=[];return(s=s.concat(a(i))).concat(a(null))}},9318:(r,e)=>{e.read=function(t,n,i,o,a){var s,u,l=8*a-o-1,c=(1<<l)-1,f=c>>1,h=-7,d=i?a-1:0,v=i?-1:1,y=t[n+d];for(d+=v,s=y&(1<<-h)-1,y>>=-h,h+=l;h>0;s=256*s+t[n+d],d+=v,h-=8);for(u=s&(1<<-h)-1,s>>=-h,h+=o;h>0;u=256*u+t[n+d],d+=v,h-=8);if(s===0)s=1-f;else{if(s===c)return u?NaN:1/0*(y?-1:1);u+=Math.pow(2,o),s-=f}return(y?-1:1)*u*Math.pow(2,s-o)},e.write=function(t,n,i,o,a,s){var u,l,c,f=8*s-a-1,h=(1<<f)-1,d=h>>1,v=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=o?0:s-1,w=o?1:-1,b=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(l=isNaN(n)?1:0,u=h):(u=Math.floor(Math.log(n)/Math.LN2),n*(c=Math.pow(2,-u))<1&&(u--,c*=2),(n+=u+d>=1?v/c:v*Math.pow(2,1-d))*c>=2&&(u++,c/=2),u+d>=h?(l=0,u=h):u+d>=1?(l=(n*c-1)*Math.pow(2,a),u+=d):(l=n*Math.pow(2,d-1)*Math.pow(2,a),u=0));a>=8;t[i+y]=255&l,y+=w,l/=256,a-=8);for(u=u<<a|l,f+=a;f>0;t[i+y]=255&u,y+=w,u/=256,f-=8);t[i+y-w]|=128*b}},5250:function(r,e,t){var n;r=t.nmd(r),(function(){var i,o="Expected a function",a="__lodash_hash_undefined__",s="__lodash_placeholder__",u=32,l=128,c=1/0,f=9007199254740991,h=NaN,d=4294967295,v=[["ary",l],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",u],["partialRight",64],["rearg",256]],y="[object Arguments]",w="[object Array]",b="[object Boolean]",p="[object Date]",_="[object Error]",O="[object Function]",P="[object GeneratorFunction]",R="[object Map]",T="[object Number]",A="[object Object]",M="[object Promise]",N="[object RegExp]",j="[object Set]",B="[object String]",q="[object Symbol]",W="[object WeakMap]",J="[object ArrayBuffer]",te="[object DataView]",re="[object Float32Array]",ee="[object Float64Array]",fe="[object Int8Array]",he="[object Int16Array]",se="[object Int32Array]",me="[object Uint8Array]",De="[object Uint8ClampedArray]",Le="[object Uint16Array]",Ie="[object Uint32Array]",qe=/\b__p \+= '';/g,Ge=/\b(__p \+=) '' \+/g,Me=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Pe=/&(?:amp|lt|gt|quot|#39);/g,de=/[&<>"']/g,Oe=RegExp(Pe.source),Ae=RegExp(de.source),Ve=/<%-([\s\S]+?)%>/g,tt=/<%([\s\S]+?)%>/g,ht=/<%=([\s\S]+?)%>/g,xt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ut=/^\w*$/,H=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,X=/[\\^$.*+?()[\]{}|]/g,ne=RegExp(X.source),Se=/^\s+/,Te=/\s/,Ne=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,et=/\{\n\/\* \[wrapped with (.+)\] \*/,wt=/,? & /,lt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,pe=/[()=,{}\[\]\/\s]/,Ue=/\\(\\)?/g,nt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Je=/\w*$/,at=/^[-+]0x[0-9a-f]+$/i,kt=/^0b[01]+$/i,dt=/^\[object .+?Constructor\]$/,Dt=/^0o[0-7]+$/i,Xt=/^(?:0|[1-9]\d*)$/,fr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Vt=/($^)/,lr=/['\n\r\u2028\u2029\\]/g,ir="\\ud800-\\udfff",Jt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Wr="\\u2700-\\u27bf",on="a-z\\xdf-\\xf6\\xf8-\\xff",Pi="A-Z\\xc0-\\xd6\\xd8-\\xde",vn="\\ufe0e\\ufe0f",ln="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",En="["+ir+"]",Cn="["+ln+"]",Un="["+Jt+"]",Xn="\\d+",to="["+Wr+"]",Ei="["+on+"]",ro="[^"+ir+ln+Xn+Wr+on+Pi+"]",Fi="\\ud83c[\\udffb-\\udfff]",ho="[^"+ir+"]",zn="(?:\\ud83c[\\udde6-\\uddff]){2}",yr="[\\ud800-\\udbff][\\udc00-\\udfff]",an="["+Pi+"]",no="\\u200d",Oi="(?:"+Ei+"|"+ro+")",To="(?:"+an+"|"+ro+")",Zs="(?:['](?:d|ll|m|re|s|t|ve))?",vo="(?:['](?:D|LL|M|RE|S|T|VE))?",La="(?:"+Un+"|"+Fi+")?",Qs="["+vn+"]?",ha=Qs+La+"(?:"+no+"(?:"+[ho,zn,yr].join("|")+")"+Qs+La+")*",vl="(?:"+[to,zn,yr].join("|")+")"+ha,Na="(?:"+[ho+Un+"?",Un,zn,yr,En].join("|")+")",vi=RegExp("[']","g"),da=RegExp(Un,"g"),po=RegExp(Fi+"(?="+Fi+")|"+Na+ha,"g"),Pn=RegExp([an+"?"+Ei+"+"+Zs+"(?="+[Cn,an,"$"].join("|")+")",To+"+"+vo+"(?="+[Cn,an+Oi,"$"].join("|")+")",an+"?"+Oi+"+"+Zs,an+"+"+vo,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Xn,vl].join("|"),"g"),Kn=RegExp("["+no+ir+Jt+vn+"]"),hr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Yi=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],go=-1,Hr={};Hr[re]=Hr[ee]=Hr[fe]=Hr[he]=Hr[se]=Hr[me]=Hr[De]=Hr[Le]=Hr[Ie]=!0,Hr[y]=Hr[w]=Hr[J]=Hr[b]=Hr[te]=Hr[p]=Hr[_]=Hr[O]=Hr[R]=Hr[T]=Hr[A]=Hr[N]=Hr[j]=Hr[B]=Hr[W]=!1;var jr={};jr[y]=jr[w]=jr[J]=jr[te]=jr[b]=jr[p]=jr[re]=jr[ee]=jr[fe]=jr[he]=jr[se]=jr[R]=jr[T]=jr[A]=jr[N]=jr[j]=jr[B]=jr[q]=jr[me]=jr[De]=jr[Le]=jr[Ie]=!0,jr[_]=jr[O]=jr[W]=!1;var Ai={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Js=parseFloat,bf=parseInt,eu=typeof t.g=="object"&&t.g&&t.g.Object===Object&&t.g,_f=typeof self=="object"&&self&&self.Object===Object&&self,Ri=eu||_f||Function("return this")(),Mu=e&&!e.nodeType&&e,yo=Mu&&r&&!r.nodeType&&r,Lu=yo&&yo.exports===Mu,pl=Lu&&eu.process,Bi=function(){try{return yo&&yo.require&&yo.require("util").types||pl&&pl.binding&&pl.binding("util")}catch{}}(),Ja=Bi&&Bi.isArrayBuffer,tu=Bi&&Bi.isDate,gc=Bi&&Bi.isMap,yc=Bi&&Bi.isRegExp,Fr=Bi&&Bi.isSet,Ho=Bi&&Bi.isTypedArray;function mo(ft,gt,yt){switch(yt.length){case 0:return ft.call(gt);case 1:return ft.call(gt,yt[0]);case 2:return ft.call(gt,yt[0],yt[1]);case 3:return ft.call(gt,yt[0],yt[1],yt[2])}return ft.apply(gt,yt)}function mc(ft,gt,yt,Gt){for(var er=-1,Zr=ft==null?0:ft.length;++er<Zr;){var Ii=ft[er];gt(Gt,Ii,yt(Ii),ft)}return Gt}function Wt(ft,gt){for(var yt=-1,Gt=ft==null?0:ft.length;++yt<Gt&&gt(ft[yt],yt,ft)!==!1;);return ft}function ru(ft,gt){for(var yt=ft==null?0:ft.length;yt--&&gt(ft[yt],yt,ft)!==!1;);return ft}function bc(ft,gt){for(var yt=-1,Gt=ft==null?0:ft.length;++yt<Gt;)if(!gt(ft[yt],yt,ft))return!1;return!0}function ja(ft,gt){for(var yt=-1,Gt=ft==null?0:ft.length,er=0,Zr=[];++yt<Gt;){var Ii=ft[yt];gt(Ii,yt,ft)&&(Zr[er++]=Ii)}return Zr}function Nu(ft,gt){return!(ft==null||!ft.length)&&nu(ft,gt,0)>-1}function Co(ft,gt,yt){for(var Gt=-1,er=ft==null?0:ft.length;++Gt<er;)if(yt(gt,ft[Gt]))return!0;return!1}function $r(ft,gt){for(var yt=-1,Gt=ft==null?0:ft.length,er=Array(Gt);++yt<Gt;)er[yt]=gt(ft[yt],yt,ft);return er}function va(ft,gt){for(var yt=-1,Gt=gt.length,er=ft.length;++yt<Gt;)ft[er+yt]=gt[yt];return ft}function gl(ft,gt,yt,Gt){var er=-1,Zr=ft==null?0:ft.length;for(Gt&&Zr&&(yt=ft[++er]);++er<Zr;)yt=gt(yt,ft[er],er,ft);return yt}function kh(ft,gt,yt,Gt){var er=ft==null?0:ft.length;for(Gt&&er&&(yt=ft[--er]);er--;)yt=gt(yt,ft[er],er,ft);return yt}function _c(ft,gt){for(var yt=-1,Gt=ft==null?0:ft.length;++yt<Gt;)if(gt(ft[yt],yt,ft))return!0;return!1}var Dh=wc("length");function wf(ft,gt,yt){var Gt;return yt(ft,function(er,Zr,Ii){if(gt(er,Zr,Ii))return Gt=Zr,!1}),Gt}function yl(ft,gt,yt,Gt){for(var er=ft.length,Zr=yt+(Gt?1:-1);Gt?Zr--:++Zr<er;)if(gt(ft[Zr],Zr,ft))return Zr;return-1}function nu(ft,gt,yt){return gt==gt?function(Gt,er,Zr){for(var Ii=Zr-1,oo=Gt.length;++Ii<oo;)if(Gt[Ii]===er)return Ii;return-1}(ft,gt,yt):yl(ft,es,yt)}function Ts(ft,gt,yt,Gt){for(var er=yt-1,Zr=ft.length;++er<Zr;)if(Gt(ft[er],gt))return er;return-1}function es(ft){return ft!=ft}function ml(ft,gt){var yt=ft==null?0:ft.length;return yt?iu(ft,gt)/yt:h}function wc(ft){return function(gt){return gt==null?i:gt[ft]}}function Ec(ft){return function(gt){return ft==null?i:ft[gt]}}function bl(ft,gt,yt,Gt,er){return er(ft,function(Zr,Ii,oo){yt=Gt?(Gt=!1,Zr):gt(yt,Zr,Ii,oo)}),yt}function iu(ft,gt){for(var yt,Gt=-1,er=ft.length;++Gt<er;){var Zr=gt(ft[Gt]);Zr!==i&&(yt=yt===i?Zr:yt+Zr)}return yt}function _l(ft,gt){for(var yt=-1,Gt=Array(ft);++yt<ft;)Gt[yt]=gt(yt);return Gt}function pn(ft){return ft&&ft.slice(0,Fa(ft)+1).replace(Se,"")}function Pr(ft){return function(gt){return ft(gt)}}function Oc(ft,gt){return $r(gt,function(yt){return ft[yt]})}function ou(ft,gt){return ft.has(gt)}function Ef(ft,gt){for(var yt=-1,Gt=ft.length;++yt<Gt&&nu(gt,ft[yt],0)>-1;);return yt}function Cs(ft,gt){for(var yt=ft.length;yt--&&nu(gt,ft[yt],0)>-1;);return yt}var ts=Ec({:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"}),Mh=Ec({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Zd(ft){return"\\"+Ai[ft]}function au(ft){return Kn.test(ft)}function qn(ft){var gt=-1,yt=Array(ft.size);return ft.forEach(function(Gt,er){yt[++gt]=[er,Gt]}),yt}function xc(ft,gt){return function(yt){return ft(gt(yt))}}function io(ft,gt){for(var yt=-1,Gt=ft.length,er=0,Zr=[];++yt<Gt;){var Ii=ft[yt];Ii!==gt&&Ii!==s||(ft[yt]=s,Zr[er++]=yt)}return Zr}function su(ft){var gt=-1,yt=Array(ft.size);return ft.forEach(function(Gt){yt[++gt]=Gt}),yt}function Sc(ft){var gt=-1,yt=Array(ft.size);return ft.forEach(function(Gt){yt[++gt]=[Gt,Gt]}),yt}function Ui(ft){return au(ft)?function(gt){for(var yt=po.lastIndex=0;po.test(gt);)++yt;return yt}(ft):Dh(ft)}function Zn(ft){return au(ft)?function(gt){return gt.match(po)||[]}(ft):function(gt){return gt.split("")}(ft)}function Fa(ft){for(var gt=ft.length;gt--&&Te.test(ft.charAt(gt)););return gt}var Ba=Ec({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),pa=function ft(gt){var yt,Gt=(gt=gt==null?Ri:pa.defaults(Ri.Object(),gt,pa.pick(Ri,Yi))).Array,er=gt.Date,Zr=gt.Error,Ii=gt.Function,oo=gt.Math,gn=gt.Object,Of=gt.RegExp,Gn=gt.String,pi=gt.TypeError,Tc=Gt.prototype,Ep=Ii.prototype,ju=gn.prototype,wl=gt["__core-js_shared__"],Fu=Ep.toString,Qr=ju.hasOwnProperty,Cc=0,uu=(yt=/[^.]+$/.exec(wl&&wl.keys&&wl.keys.IE_PROTO||""))?"Symbol(src)_1."+yt:"",Ps=ju.toString,Lh=Fu.call(gn),Bu=Ri._,xf=Of("^"+Fu.call(Qr).replace(X,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),As=Lu?gt.Buffer:i,rs=gt.Symbol,Pc=gt.Uint8Array,Op=As?As.allocUnsafe:i,Uu=xc(gn.getPrototypeOf,gn),Sf=gn.create,Qd=ju.propertyIsEnumerable,Tf=Tc.splice,bo=rs?rs.isConcatSpreadable:i,zu=rs?rs.iterator:i,ns=rs?rs.toStringTag:i,Cf=function(){try{var C=yu(gn,"defineProperty");return C({},"",{}),C}catch{}}(),xp=gt.clearTimeout!==Ri.clearTimeout&&gt.clearTimeout,Sp=er&&er.now!==Ri.Date.now&&er.now,Po=gt.setTimeout!==Ri.setTimeout&&gt.setTimeout,Nh=oo.ceil,jh=oo.floor,Pf=gn.getOwnPropertySymbols,qu=As?As.isBuffer:i,Jd=gt.isFinite,Ao=Tc.join,ao=xc(gn.keys,gn),An=oo.max,Vn=oo.min,Fh=er.now,Qg=gt.parseInt,Tp=oo.random,Cp=Tc.reverse,Qt=yu(gt,"DataView"),so=yu(gt,"Map"),Qn=yu(gt,"Promise"),El=yu(gt,"Set"),Ac=yu(gt,"WeakMap"),Rc=yu(gn,"create"),Af=Ac&&new Ac,Ol={},xl=_u(Qt),Qe=_u(so),pt=_u(Qn),ot=_u(El),$t=_u(Ac),pr=rs?rs.prototype:i,Gr=pr?pr.valueOf:i,gi=pr?pr.toString:i;function ce(C){if(Mn(C)&&!Or(C)&&!(C instanceof Lr)){if(C instanceof Jn)return C;if(Qr.call(C,"__wrapped__"))return lv(C)}return new Jn(C)}var Rs=function(){function C(){}return function(L){if(!$n(L))return{};if(Sf)return Sf(L);C.prototype=L;var G=new C;return C.prototype=i,G}}();function Bh(){}function Jn(C,L){this.__wrapped__=C,this.__actions__=[],this.__chain__=!!L,this.__index__=0,this.__values__=i}function Lr(C){this.__wrapped__=C,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=d,this.__views__=[]}function lu(C){var L=-1,G=C==null?0:C.length;for(this.clear();++L<G;){var Q=C[L];this.set(Q[0],Q[1])}}function $o(C){var L=-1,G=C==null?0:C.length;for(this.clear();++L<G;){var Q=C[L];this.set(Q[0],Q[1])}}function Xi(C){var L=-1,G=C==null?0:C.length;for(this.clear();++L<G;){var Q=C[L];this.set(Q[0],Q[1])}}function is(C){var L=-1,G=C==null?0:C.length;for(this.__data__=new Xi;++L<G;)this.add(C[L])}function Ir(C){var L=this.__data__=new $o(C);this.size=L.size}function Pp(C,L){var G=Or(C),Q=!G&&Jo(C),ae=!G&&!Q&&Ji(C),_e=!G&&!Q&&!ae&&gs(C),Be=G||Q||ae||_e,$e=Be?_l(C.length,Gn):[],ct=$e.length;for(var Et in C)!L&&!Qr.call(C,Et)||Be&&(Et=="length"||ae&&(Et=="offset"||Et=="parent")||_e&&(Et=="buffer"||Et=="byteLength"||Et=="byteOffset")||Zi(Et,ct))||$e.push(Et);return $e}function Uh(C){var L=C.length;return L?C[Hu(0,L-1)]:i}function ga(C,L){return Hf(Io(C),Ua(L,0,C.length))}function ev(C){return Hf(Io(C))}function tv(C,L,G){(G!==i&&!uo(C[L],G)||G===i&&!(L in C))&&Is(C,L,G)}function Rf(C,L,G){var Q=C[L];Qr.call(C,L)&&uo(Q,G)&&(G!==i||L in C)||Is(C,L,G)}function Gu(C,L){for(var G=C.length;G--;)if(uo(C[G][0],L))return G;return-1}function Br(C,L,G,Q){return Xo(C,function(ae,_e,Be){L(Q,ae,G(ae),Be)}),Q}function Sl(C,L){return C&&as(L,Gi(L),C)}function Is(C,L,G){L=="__proto__"&&Cf?Cf(C,L,{configurable:!0,enumerable:!0,value:G,writable:!0}):C[L]=G}function Tl(C,L){for(var G=-1,Q=L.length,ae=Gt(Q),_e=C==null;++G<Q;)ae[G]=_e?i:wv(C,L[G]);return ae}function Ua(C,L,G){return C==C&&(G!==i&&(C=C<=G?C:G),L!==i&&(C=C>=L?C:L)),C}function Yo(C,L,G,Q,ae,_e){var Be,$e=1&L,ct=2&L,Et=4&L;if(G&&(Be=ae?G(C,Q,ae,_e):G(C)),Be!==i)return Be;if(!$n(C))return C;var _t=Or(C);if(_t){if(Be=function(St){var Lt=St.length,cr=new St.constructor(Lt);return Lt&&typeof St[0]=="string"&&Qr.call(St,"index")&&(cr.index=St.index,cr.input=St.input),cr}(C),!$e)return Io(C,Be)}else{var Rt=Rn(C),Yt=Rt==O||Rt==P;if(Ji(C))return Ml(C,$e);if(Rt==A||Rt==y||Yt&&!ae){if(Be=ct||Yt?{}:Fl(C),!$e)return ct?function(St,Lt){return as(St,jl(St),Lt)}(C,function(St,Lt){return St&&as(Lt,Nr(Lt),St)}(Be,C)):function(St,Lt){return as(St,av(St),Lt)}(C,Sl(Be,C))}else{if(!jr[Rt])return ae?C:{};Be=function(St,Lt,cr){var Ft,br=St.constructor;switch(Lt){case J:return Nc(St);case b:case p:return new br(+St);case te:return function(mr,Jr){var rr=Jr?Nc(mr.buffer):mr.buffer;return new mr.constructor(rr,mr.byteOffset,mr.byteLength)}(St,cr);case re:case ee:case fe:case he:case se:case me:case De:case Le:case Ie:return Bf(St,cr);case R:return new br;case T:case B:return new br(St);case N:return function(mr){var Jr=new mr.constructor(mr.source,Je.exec(mr));return Jr.lastIndex=mr.lastIndex,Jr}(St);case j:return new br;case q:return Ft=St,Gr?gn(Gr.call(Ft)):{}}}(C,Rt,$e)}}_e||(_e=new Ir);var Kt=_e.get(C);if(Kt)return Kt;_e.set(C,Be),xa(C)?C.forEach(function(St){Be.add(Yo(St,L,G,St,C,_e))}):ud(C)&&C.forEach(function(St,Lt){Be.set(Lt,Yo(St,L,G,Lt,C,_e))});var or=_t?i:(Et?ct?hs:qc:ct?Nr:Gi)(C);return Wt(or||C,function(St,Lt){or&&(St=C[Lt=St]),Rf(Be,Lt,Yo(St,L,G,Lt,C,_e))}),Be}function Cl(C,L,G){var Q=G.length;if(C==null)return!Q;for(C=gn(C);Q--;){var ae=G[Q],_e=L[ae],Be=C[ae];if(Be===i&&!(ae in C)||!_e(Be))return!1}return!0}function If(C,L,G){if(typeof C!="function")throw new pi(o);return zl(function(){C.apply(i,G)},L)}function ks(C,L,G,Q){var ae=-1,_e=Nu,Be=!0,$e=C.length,ct=[],Et=L.length;if(!$e)return ct;G&&(L=$r(L,Pr(G))),Q?(_e=Co,Be=!1):L.length>=200&&(_e=ou,Be=!1,L=new is(L));e:for(;++ae<$e;){var _t=C[ae],Rt=G==null?_t:G(_t);if(_t=Q||_t!==0?_t:0,Be&&Rt==Rt){for(var Yt=Et;Yt--;)if(L[Yt]===Rt)continue e;ct.push(_t)}else _e(L,Rt,Q)||ct.push(_t)}return ct}ce.templateSettings={escape:Ve,evaluate:tt,interpolate:ht,variable:"",imports:{_:ce}},ce.prototype=Bh.prototype,ce.prototype.constructor=ce,Jn.prototype=Rs(Bh.prototype),Jn.prototype.constructor=Jn,Lr.prototype=Rs(Bh.prototype),Lr.prototype.constructor=Lr,lu.prototype.clear=function(){this.__data__=Rc?Rc(null):{},this.size=0},lu.prototype.delete=function(C){var L=this.has(C)&&delete this.__data__[C];return this.size-=L?1:0,L},lu.prototype.get=function(C){var L=this.__data__;if(Rc){var G=L[C];return G===a?i:G}return Qr.call(L,C)?L[C]:i},lu.prototype.has=function(C){var L=this.__data__;return Rc?L[C]!==i:Qr.call(L,C)},lu.prototype.set=function(C,L){var G=this.__data__;return this.size+=this.has(C)?0:1,G[C]=Rc&&L===i?a:L,this},$o.prototype.clear=function(){this.__data__=[],this.size=0},$o.prototype.delete=function(C){var L=this.__data__,G=Gu(L,C);return!(G<0||(G==L.length-1?L.pop():Tf.call(L,G,1),--this.size,0))},$o.prototype.get=function(C){var L=this.__data__,G=Gu(L,C);return G<0?i:L[G][1]},$o.prototype.has=function(C){return Gu(this.__data__,C)>-1},$o.prototype.set=function(C,L){var G=this.__data__,Q=Gu(G,C);return Q<0?(++this.size,G.push([C,L])):G[Q][1]=L,this},Xi.prototype.clear=function(){this.size=0,this.__data__={hash:new lu,map:new(so||$o),string:new lu}},Xi.prototype.delete=function(C){var L=gu(this,C).delete(C);return this.size-=L?1:0,L},Xi.prototype.get=function(C){return gu(this,C).get(C)},Xi.prototype.has=function(C){return gu(this,C).has(C)},Xi.prototype.set=function(C,L){var G=gu(this,C),Q=G.size;return G.set(C,L),this.size+=G.size==Q?0:1,this},is.prototype.add=is.prototype.push=function(C){return this.__data__.set(C,a),this},is.prototype.has=function(C){return this.__data__.has(C)},Ir.prototype.clear=function(){this.__data__=new $o,this.size=0},Ir.prototype.delete=function(C){var L=this.__data__,G=L.delete(C);return this.size=L.size,G},Ir.prototype.get=function(C){return this.__data__.get(C)},Ir.prototype.has=function(C){return this.__data__.has(C)},Ir.prototype.set=function(C,L){var G=this.__data__;if(G instanceof $o){var Q=G.__data__;if(!so||Q.length<199)return Q.push([C,L]),this.size=++G.size,this;G=this.__data__=new Xi(Q)}return G.set(C,L),this.size=G.size,this};var Xo=Ls(Ds),Ro=Ls(Df,!0);function Ap(C,L){var G=!0;return Xo(C,function(Q,ae,_e){return G=!!L(Q,ae,_e)}),G}function kf(C,L,G){for(var Q=-1,ae=C.length;++Q<ae;){var _e=C[Q],Be=L(_e);if(Be!=null&&($e===i?Be==Be&&!Do(Be):G(Be,$e)))var $e=Be,ct=_e}return ct}function rv(C,L){var G=[];return Xo(C,function(Q,ae,_e){L(Q,ae,_e)&&G.push(Q)}),G}function Wn(C,L,G,Q,ae){var _e=-1,Be=C.length;for(G||(G=Bl),ae||(ae=[]);++_e<Be;){var $e=C[_e];L>0&&G($e)?L>1?Wn($e,L-1,G,Q,ae):va(ae,$e):Q||(ae[ae.length]=$e)}return ae}var Pl=Fc(),zh=Fc(!0);function Ds(C,L){return C&&Pl(C,L,Gi)}function Df(C,L){return C&&zh(C,L,Gi)}function Mf(C,L){return ja(L,function(G){return Ha(C[G])})}function cu(C,L){for(var G=0,Q=(L=Eo(L,C)).length;C!=null&&G<Q;)C=C[xi(L[G++])];return G&&G==Q?C:i}function ki(C,L,G){var Q=L(C);return Or(C)?Q:va(Q,G(C))}function hn(C){return C==null?C===i?"[object Undefined]":"[object Null]":ns&&ns in gn(C)?function(L){var G=Qr.call(L,ns),Q=L[ns];try{L[ns]=i;var ae=!0}catch{}var _e=Ps.call(L);return ae&&(G?L[ns]=Q:delete L[ns]),_e}(C):function(L){return Ps.call(L)}(C)}function qh(C,L){return C>L}function Al(C,L){return C!=null&&Qr.call(C,L)}function Gh(C,L){return C!=null&&L in gn(C)}function Vu(C,L,G){for(var Q=G?Co:Nu,ae=C[0].length,_e=C.length,Be=_e,$e=Gt(_e),ct=1/0,Et=[];Be--;){var _t=C[Be];Be&&L&&(_t=$r(_t,Pr(L))),ct=Vn(_t.length,ct),$e[Be]=!G&&(L||ae>=120&&_t.length>=120)?new is(Be&&_t):i}_t=C[0];var Rt=-1,Yt=$e[0];e:for(;++Rt<ae&&Et.length<ct;){var Kt=_t[Rt],or=L?L(Kt):Kt;if(Kt=G||Kt!==0?Kt:0,!(Yt?ou(Yt,or):Q(Et,or,G))){for(Be=_e;--Be;){var St=$e[Be];if(!(St?ou(St,or):Q(C[Be],or,G)))continue e}Yt&&Yt.push(or),Et.push(Kt)}}return Et}function fu(C,L,G){var Q=(C=Lp(C,L=Eo(L,C)))==null?C:C[xi(li(L))];return Q==null?i:mo(Q,C,G)}function za(C){return Mn(C)&&hn(C)==y}function Wu(C,L,G,Q,ae){return C===L||(C==null||L==null||!Mn(C)&&!Mn(L)?C!=C&&L!=L:function(_e,Be,$e,ct,Et,_t){var Rt=Or(_e),Yt=Or(Be),Kt=Rt?w:Rn(_e),or=Yt?w:Rn(Be),St=(Kt=Kt==y?A:Kt)==A,Lt=(or=or==y?A:or)==A,cr=Kt==or;if(cr&&Ji(_e)){if(!Ji(Be))return!1;Rt=!0,St=!1}if(cr&&!St)return _t||(_t=new Ir),Rt||gs(_e)?Qo(_e,Be,$e,ct,Et,_t):function(rr,ur,Si,Yn,No,Ln,So){switch(Si){case te:if(rr.byteLength!=ur.byteLength||rr.byteOffset!=ur.byteOffset)return!1;rr=rr.buffer,ur=ur.buffer;case J:return!(rr.byteLength!=ur.byteLength||!Ln(new Pc(rr),new Pc(ur)));case b:case p:case T:return uo(+rr,+ur);case _:return rr.name==ur.name&&rr.message==ur.message;case N:case B:return rr==ur+"";case R:var Fs=qn;case j:var Bs=1&Yn;if(Fs||(Fs=su),rr.size!=ur.size&&!Bs)return!1;var bs=So.get(rr);if(bs)return bs==ur;Yn|=2,So.set(rr,ur);var _s=Qo(Fs(rr),Fs(ur),Yn,No,Ln,So);return So.delete(rr),_s;case q:if(Gr)return Gr.call(rr)==Gr.call(ur)}return!1}(_e,Be,Kt,$e,ct,Et,_t);if(!(1&$e)){var Ft=St&&Qr.call(_e,"__wrapped__"),br=Lt&&Qr.call(Be,"__wrapped__");if(Ft||br){var mr=Ft?_e.value():_e,Jr=br?Be.value():Be;return _t||(_t=new Ir),Et(mr,Jr,$e,ct,_t)}}return!!cr&&(_t||(_t=new Ir),function(rr,ur,Si,Yn,No,Ln){var So=1&Si,Fs=qc(rr),Bs=Fs.length;if(Bs!=qc(ur).length&&!So)return!1;for(var bs=Bs;bs--;){var _s=Fs[bs];if(!(So?_s in ur:Qr.call(ur,_s)))return!1}var Us=Ln.get(rr),Lv=Ln.get(ur);if(Us&&Lv)return Us==ur&&Lv==rr;var ah=!0;Ln.set(rr,ur),Ln.set(ur,rr);for(var Nv=So;++bs<Bs;){var zs=rr[_s=Fs[bs]],Qc=ur[_s];if(Yn)var jv=So?Yn(Qc,zs,_s,ur,rr,Ln):Yn(zs,Qc,_s,rr,ur,Ln);if(!(jv===i?zs===Qc||No(zs,Qc,Si,Yn,Ln):jv)){ah=!1;break}Nv||(Nv=_s=="constructor")}if(ah&&!Nv){var sh=rr.constructor,uh=ur.constructor;sh==uh||!("constructor"in rr)||!("constructor"in ur)||typeof sh=="function"&&sh instanceof sh&&typeof uh=="function"&&uh instanceof uh||(ah=!1)}return Ln.delete(rr),Ln.delete(ur),ah}(_e,Be,$e,ct,Et,_t))}(C,L,G,Q,Wu,ae))}function hu(C,L,G,Q){var ae=G.length,_e=ae,Be=!Q;if(C==null)return!_e;for(C=gn(C);ae--;){var $e=G[ae];if(Be&&$e[2]?$e[1]!==C[$e[0]]:!($e[0]in C))return!1}for(;++ae<_e;){var ct=($e=G[ae])[0],Et=C[ct],_t=$e[1];if(Be&&$e[2]){if(Et===i&&!(ct in C))return!1}else{var Rt=new Ir;if(Q)var Yt=Q(Et,_t,ct,C,L,Rt);if(!(Yt===i?Wu(_t,Et,3,Q,Rt):Yt))return!1}}return!0}function Ic(C){return!(!$n(C)||(L=C,uu&&uu in L))&&(Ha(C)?xf:dt).test(_u(C));var L}function Rl(C){return typeof C=="function"?C:C==null?ra:typeof C=="object"?Or(C)?kc(C[0],C[1]):nv(C):Av(C)}function du(C){if(!mu(C))return ao(C);var L=[];for(var G in gn(C))Qr.call(C,G)&&G!="constructor"&&L.push(G);return L}function Ms(C,L){return C<L}function Rp(C,L){var G=-1,Q=ko(C)?Gt(C.length):[];return Xo(C,function(ae,_e,Be){Q[++G]=L(ae,_e,Be)}),Q}function nv(C){var L=Vf(C);return L.length==1&&L[0][2]?Va(L[0][0],L[0][1]):function(G){return G===C||hu(G,C,L)}}function kc(C,L){return zi(C)&&Mp(L)?Va(xi(C),L):function(G){var Q=wv(G,C);return Q===i&&Q===L?Ev(G,C):Wu(L,Q,3)}}function Vh(C,L,G,Q,ae){C!==L&&Pl(L,function(_e,Be){if(ae||(ae=new Ir),$n(_e))(function(ct,Et,_t,Rt,Yt,Kt,or){var St=bu(ct,_t),Lt=bu(Et,_t),cr=or.get(Lt);if(cr)tv(ct,_t,cr);else{var Ft=Kt?Kt(St,Lt,_t+"",ct,Et,or):i,br=Ft===i;if(br){var mr=Or(Lt),Jr=!mr&&Ji(Lt),rr=!mr&&!Jr&&gs(Lt);Ft=Lt,mr||Jr||rr?Or(St)?Ft=St:Hn(St)?Ft=Io(St):Jr?(br=!1,Ft=Ml(Lt,!0)):rr?(br=!1,Ft=Bf(Lt,!0)):Ft=[]:$c(Lt)||Jo(Lt)?(Ft=St,Jo(St)?Ft=fd(St):$n(St)&&!Ha(St)||(Ft=Fl(Lt))):br=!1}br&&(or.set(Lt,Ft),Yt(Ft,Lt,Rt,Kt,or),or.delete(Lt)),tv(ct,_t,Ft)}})(C,L,Be,G,Vh,Q,ae);else{var $e=Q?Q(bu(C,Be),_e,Be+"",C,L,ae):i;$e===i&&($e=_e),tv(C,Be,$e)}},Nr)}function Dc(C,L){var G=C.length;if(G)return Zi(L+=L<0?G:0,G)?C[L]:i}function Mc(C,L,G){L=L.length?$r(L,function(_e){return Or(_e)?function(Be){return cu(Be,_e.length===1?_e[0]:_e)}:_e}):[ra];var Q=-1;L=$r(L,Pr(gr()));var ae=Rp(C,function(_e,Be,$e){var ct=$r(L,function(Et){return Et(_e)});return{criteria:ct,index:++Q,value:_e}});return function(_e,Be){var $e=_e.length;for(_e.sort(function(ct,Et){return function(_t,Rt,Yt){for(var Kt=-1,or=_t.criteria,St=Rt.criteria,Lt=or.length,cr=Yt.length;++Kt<Lt;){var Ft=Dp(or[Kt],St[Kt]);if(Ft)return Kt>=cr?Ft:Ft*(Yt[Kt]=="desc"?-1:1)}return _t.index-Rt.index}(ct,Et,G)});$e--;)_e[$e]=_e[$e].value;return _e}(ae)}function ya(C,L,G){for(var Q=-1,ae=L.length,_e={};++Q<ae;){var Be=L[Q],$e=cu(C,Be);G($e,Be)&&Il(_e,Eo(Be,C),$e)}return _e}function vu(C,L,G,Q){var ae=Q?Ts:nu,_e=-1,Be=L.length,$e=C;for(C===L&&(L=Io(L)),G&&($e=$r(C,Pr(G)));++_e<Be;)for(var ct=0,Et=L[_e],_t=G?G(Et):Et;(ct=ae($e,_t,ct,Q))>-1;)$e!==C&&Tf.call($e,ct,1),Tf.call(C,ct,1);return C}function ye(C,L){for(var G=C?L.length:0,Q=G-1;G--;){var ae=L[G];if(G==Q||ae!==_e){var _e=ae;Zi(ae)?Tf.call(C,ae,1):Wh(C,ae)}}return C}function Hu(C,L){return C+jh(Tp()*(L-C+1))}function $u(C,L){var G="";if(!C||L<1||L>f)return G;do L%2&&(G+=C),(L=jh(L/2))&&(C+=C);while(L);return G}function dr(C,L){return Qh(Wf(C,L,ra),C+"")}function kr(C){return Uh(Su(C))}function Lf(C,L){var G=Su(C);return Hf(G,Ua(L,0,G.length))}function Il(C,L,G,Q){if(!$n(C))return C;for(var ae=-1,_e=(L=Eo(L,C)).length,Be=_e-1,$e=C;$e!=null&&++ae<_e;){var ct=xi(L[ae]),Et=G;if(ct==="__proto__"||ct==="constructor"||ct==="prototype")return C;if(ae!=Be){var _t=$e[ct];(Et=Q?Q(_t,ct,$e):i)===i&&(Et=$n(_t)?_t:Zi(L[ae+1])?[]:{})}Rf($e,ct,Et),$e=$e[ct]}return C}var Nf=Af?function(C,L){return Af.set(C,L),C}:ra,os=Cf?function(C,L){return Cf(C,"toString",{configurable:!0,enumerable:!1,value:ci(L),writable:!0})}:ra;function Jg(C){return Hf(Su(C))}function qa(C,L,G){var Q=-1,ae=C.length;L<0&&(L=-L>ae?0:ae+L),(G=G>ae?ae:G)<0&&(G+=ae),ae=L>G?0:G-L>>>0,L>>>=0;for(var _e=Gt(ae);++Q<ae;)_e[Q]=C[Q+L];return _e}function Ip(C,L){var G;return Xo(C,function(Q,ae,_e){return!(G=L(Q,ae,_e))}),!!G}function jf(C,L,G){var Q=0,ae=C==null?Q:C.length;if(typeof L=="number"&&L==L&&ae<=2147483647){for(;Q<ae;){var _e=Q+ae>>>1,Be=C[_e];Be!==null&&!Do(Be)&&(G?Be<=L:Be<L)?Q=_e+1:ae=_e}return ae}return kl(C,L,ra,G)}function kl(C,L,G,Q){var ae=0,_e=C==null?0:C.length;if(_e===0)return 0;for(var Be=(L=G(L))!=L,$e=L===null,ct=Do(L),Et=L===i;ae<_e;){var _t=jh((ae+_e)/2),Rt=G(C[_t]),Yt=Rt!==i,Kt=Rt===null,or=Rt==Rt,St=Do(Rt);if(Be)var Lt=Q||or;else Lt=Et?or&&(Q||Yt):$e?or&&Yt&&(Q||!Kt):ct?or&&Yt&&!Kt&&(Q||!St):!Kt&&!St&&(Q?Rt<=L:Rt<L);Lt?ae=_t+1:_e=_t}return Vn(_e,4294967294)}function Ga(C,L){for(var G=-1,Q=C.length,ae=0,_e=[];++G<Q;){var Be=C[G],$e=L?L(Be):Be;if(!G||!uo($e,ct)){var ct=$e;_e[ae++]=Be===0?0:Be}}return _e}function iv(C){return typeof C=="number"?C:Do(C)?h:+C}function ma(C){if(typeof C=="string")return C;if(Or(C))return $r(C,ma)+"";if(Do(C))return gi?gi.call(C):"";var L=C+"";return L=="0"&&1/C==-1/0?"-0":L}function tr(C,L,G){var Q=-1,ae=Nu,_e=C.length,Be=!0,$e=[],ct=$e;if(G)Be=!1,ae=Co;else if(_e>=200){var Et=L?null:Gf(C);if(Et)return su(Et);Be=!1,ae=ou,ct=new is}else ct=L?[]:$e;e:for(;++Q<_e;){var _t=C[Q],Rt=L?L(_t):_t;if(_t=G||_t!==0?_t:0,Be&&Rt==Rt){for(var Yt=ct.length;Yt--;)if(ct[Yt]===Rt)continue e;L&&ct.push(Rt),$e.push(_t)}else ae(ct,Rt,G)||(ct!==$e&&ct.push(Rt),$e.push(_t))}return $e}function Wh(C,L){return(C=Lp(C,L=Eo(L,C)))==null||delete C[xi(li(L))]}function _o(C,L,G,Q){return Il(C,L,G(cu(C,L)),Q)}function wo(C,L,G,Q){for(var ae=C.length,_e=Q?ae:-1;(Q?_e--:++_e<ae)&&L(C[_e],_e,C););return G?qa(C,Q?0:_e,Q?_e+1:ae):qa(C,Q?_e+1:0,Q?ae:_e)}function ba(C,L){var G=C;return G instanceof Lr&&(G=G.value()),gl(L,function(Q,ae){return ae.func.apply(ae.thisArg,va([Q],ae.args))},G)}function Ff(C,L,G){var Q=C.length;if(Q<2)return Q?tr(C[0]):[];for(var ae=-1,_e=Gt(Q);++ae<Q;)for(var Be=C[ae],$e=-1;++$e<Q;)$e!=ae&&(_e[ae]=ks(_e[ae]||Be,C[$e],L,G));return tr(Wn(_e,1),L,G)}function kp(C,L,G){for(var Q=-1,ae=C.length,_e=L.length,Be={};++Q<ae;){var $e=Q<_e?L[Q]:i;G(Be,C[Q],$e)}return Be}function Dl(C){return Hn(C)?C:[]}function Lc(C){return typeof C=="function"?C:ra}function Eo(C,L){return Or(C)?C:zi(C,L)?[C]:Jh(cn(C))}var ey=dr;function _a(C,L,G){var Q=C.length;return G=G===i?Q:G,!L&&G>=Q?C:qa(C,L,G)}var wa=xp||function(C){return Ri.clearTimeout(C)};function Ml(C,L){if(L)return C.slice();var G=C.length,Q=Op?Op(G):new C.constructor(G);return C.copy(Q),Q}function Nc(C){var L=new C.constructor(C.byteLength);return new Pc(L).set(new Pc(C)),L}function Bf(C,L){var G=L?Nc(C.buffer):C.buffer;return new C.constructor(G,C.byteOffset,C.length)}function Dp(C,L){if(C!==L){var G=C!==i,Q=C===null,ae=C==C,_e=Do(C),Be=L!==i,$e=L===null,ct=L==L,Et=Do(L);if(!$e&&!Et&&!_e&&C>L||_e&&Be&&ct&&!$e&&!Et||Q&&Be&&ct||!G&&ct||!ae)return 1;if(!Q&&!_e&&!Et&&C<L||Et&&G&&ae&&!Q&&!_e||$e&&G&&ae||!Be&&ae||!ct)return-1}return 0}function jc(C,L,G,Q){for(var ae=-1,_e=C.length,Be=G.length,$e=-1,ct=L.length,Et=An(_e-Be,0),_t=Gt(ct+Et),Rt=!Q;++$e<ct;)_t[$e]=L[$e];for(;++ae<Be;)(Rt||ae<_e)&&(_t[G[ae]]=C[ae]);for(;Et--;)_t[$e++]=C[ae++];return _t}function Hh(C,L,G,Q){for(var ae=-1,_e=C.length,Be=-1,$e=G.length,ct=-1,Et=L.length,_t=An(_e-$e,0),Rt=Gt(_t+Et),Yt=!Q;++ae<_t;)Rt[ae]=C[ae];for(var Kt=ae;++ct<Et;)Rt[Kt+ct]=L[ct];for(;++Be<$e;)(Yt||ae<_e)&&(Rt[Kt+G[Be]]=C[ae++]);return Rt}function Io(C,L){var G=-1,Q=C.length;for(L||(L=Gt(Q));++G<Q;)L[G]=C[G];return L}function as(C,L,G,Q){var ae=!G;G||(G={});for(var _e=-1,Be=L.length;++_e<Be;){var $e=L[_e],ct=Q?Q(G[$e],C[$e],$e,G,C):i;ct===i&&(ct=C[$e]),ae?Is(G,$e,ct):Rf(G,$e,ct)}return G}function Uf(C,L){return function(G,Q){var ae=Or(G)?mc:Br,_e=L?L():{};return ae(G,C,gr(Q,2),_e)}}function Yu(C){return dr(function(L,G){var Q=-1,ae=G.length,_e=ae>1?G[ae-1]:i,Be=ae>2?G[2]:i;for(_e=C.length>3&&typeof _e=="function"?(ae--,_e):i,Be&&Oo(G[0],G[1],Be)&&(_e=ae<3?i:_e,ae=1),L=gn(L);++Q<ae;){var $e=G[Q];$e&&C(L,$e,Q,_e)}return L})}function Ls(C,L){return function(G,Q){if(G==null)return G;if(!ko(G))return C(G,Q);for(var ae=G.length,_e=L?ae:-1,Be=gn(G);(L?_e--:++_e<ae)&&Q(Be[_e],_e,Be)!==!1;);return G}}function Fc(C){return function(L,G,Q){for(var ae=-1,_e=gn(L),Be=Q(L),$e=Be.length;$e--;){var ct=Be[C?$e:++ae];if(G(_e[ct],ct,_e)===!1)break}return L}}function ss(C){return function(L){var G=au(L=cn(L))?Zn(L):i,Q=G?G[0]:L.charAt(0),ae=G?_a(G,1).join(""):L.slice(1);return Q[C]()+ae}}function Ll(C){return function(L){return gl(nh(ys(L).replace(vi,"")),C,"")}}function pu(C){return function(){var L=arguments;switch(L.length){case 0:return new C;case 1:return new C(L[0]);case 2:return new C(L[0],L[1]);case 3:return new C(L[0],L[1],L[2]);case 4:return new C(L[0],L[1],L[2],L[3]);case 5:return new C(L[0],L[1],L[2],L[3],L[4]);case 6:return new C(L[0],L[1],L[2],L[3],L[4],L[5]);case 7:return new C(L[0],L[1],L[2],L[3],L[4],L[5],L[6])}var G=Rs(C.prototype),Q=C.apply(G,L);return $n(Q)?Q:G}}function us(C){return function(L,G,Q){var ae=gn(L);if(!ko(L)){var _e=gr(G,3);L=Gi(L),G=function($e){return _e(ae[$e],$e,ae)}}var Be=C(L,G,Q);return Be>-1?ae[_e?L[Be]:Be]:i}}function zf(C){return Ea(function(L){var G=L.length,Q=G,ae=Jn.prototype.thru;for(C&&L.reverse();Q--;){var _e=L[Q];if(typeof _e!="function")throw new pi(o);if(ae&&!Be&&Ki(_e)=="wrapper")var Be=new Jn([],!0)}for(Q=Be?Q:G;++Q<G;){var $e=Ki(_e=L[Q]),ct=$e=="wrapper"?Xh(_e):i;Be=ct&&Ul(ct[0])&&ct[1]==424&&!ct[4].length&&ct[9]==1?Be[Ki(ct[0])].apply(Be,ct[3]):_e.length==1&&Ul(_e)?Be[$e]():Be.thru(_e)}return function(){var Et=arguments,_t=Et[0];if(Be&&Et.length==1&&Or(_t))return Be.plant(_t).value();for(var Rt=0,Yt=G?L[Rt].apply(this,Et):_t;++Rt<G;)Yt=L[Rt].call(this,Yt);return Yt}})}function ls(C,L,G,Q,ae,_e,Be,$e,ct,Et){var _t=L&l,Rt=1&L,Yt=2&L,Kt=24&L,or=512&L,St=Yt?i:pu(C);return function Lt(){for(var cr=arguments.length,Ft=Gt(cr),br=cr;br--;)Ft[br]=arguments[br];if(Kt)var mr=Xu(Lt),Jr=function(Yn,No){for(var Ln=Yn.length,So=0;Ln--;)Yn[Ln]===No&&++So;return So}(Ft,mr);if(Q&&(Ft=jc(Ft,Q,ae,Kt)),_e&&(Ft=Hh(Ft,_e,Be,Kt)),cr-=Jr,Kt&&cr<Et){var rr=io(Ft,mr);return Yh(C,L,ls,Lt.placeholder,G,Ft,rr,$e,ct,Et-cr)}var ur=Rt?G:this,Si=Yt?ur[C]:C;return cr=Ft.length,$e?Ft=function(Yn,No){for(var Ln=Yn.length,So=Vn(No.length,Ln),Fs=Io(Yn);So--;){var Bs=No[So];Yn[So]=Zi(Bs,Ln)?Fs[Bs]:i}return Yn}(Ft,$e):or&&cr>1&&Ft.reverse(),_t&&ct<cr&&(Ft.length=ct),this&&this!==Ri&&this instanceof Lt&&(Si=St||pu(Si)),Si.apply(ur,Ft)}}function Ko(C,L){return function(G,Q){return function(ae,_e,Be,$e){return Ds(ae,function(ct,Et,_t){_e($e,Be(ct),Et,_t)}),$e}(G,C,L(Q),{})}}function $h(C,L){return function(G,Q){var ae;if(G===i&&Q===i)return L;if(G!==i&&(ae=G),Q!==i){if(ae===i)return Q;typeof G=="string"||typeof Q=="string"?(G=ma(G),Q=ma(Q)):(G=iv(G),Q=iv(Q)),ae=C(G,Q)}return ae}}function qf(C){return Ea(function(L){return L=$r(L,Pr(gr())),dr(function(G){var Q=this;return C(L,function(ae){return mo(ae,Q,G)})})})}function Zo(C,L){var G=(L=L===i?" ":ma(L)).length;if(G<2)return G?$u(L,C):L;var Q=$u(L,Nh(C/Ui(L)));return au(L)?_a(Zn(Q),0,C).join(""):Q.slice(0,C)}function Bc(C){return function(L,G,Q){return Q&&typeof Q!="number"&&Oo(L,G,Q)&&(G=Q=i),L=Sa(L),G===i?(G=L,L=0):G=Sa(G),function(ae,_e,Be,$e){for(var ct=-1,Et=An(Nh((_e-ae)/(Be||1)),0),_t=Gt(Et);Et--;)_t[$e?Et:++ct]=ae,ae+=Be;return _t}(L,G,Q=Q===i?L<G?1:-1:Sa(Q),C)}}function cs(C){return function(L,G){return typeof L=="string"&&typeof G=="string"||(L=Ta(L),G=Ta(G)),C(L,G)}}function Yh(C,L,G,Q,ae,_e,Be,$e,ct,Et){var _t=8&L;L|=_t?u:64,4&(L&=~(_t?64:u))||(L&=-4);var Rt=[C,L,ae,_t?_e:i,_t?Be:i,_t?i:_e,_t?i:Be,$e,ct,Et],Yt=G.apply(i,Rt);return Ul(C)&&Zh(Yt,Rt),Yt.placeholder=Q,ds(Yt,C,L)}function Nl(C){var L=oo[C];return function(G,Q){if(G=Ta(G),(Q=Q==null?0:Vn(Cr(Q),292))&&Jd(G)){var ae=(cn(G)+"e").split("e");return+((ae=(cn(L(ae[0]+"e"+(+ae[1]+Q)))+"e").split("e"))[0]+"e"+(+ae[1]-Q))}return L(G)}}var Gf=El&&1/su(new El([,-0]))[1]==c?function(C){return new El(C)}:yd;function ov(C){return function(L){var G=Rn(L);return G==R?qn(L):G==j?Sc(L):function(Q,ae){return $r(ae,function(_e){return[_e,Q[_e]]})}(L,C(L))}}function fs(C,L,G,Q,ae,_e,Be,$e){var ct=2&L;if(!ct&&typeof C!="function")throw new pi(o);var Et=Q?Q.length:0;if(Et||(L&=-97,Q=ae=i),Be=Be===i?Be:An(Cr(Be),0),$e=$e===i?$e:Cr($e),Et-=ae?ae.length:0,64&L){var _t=Q,Rt=ae;Q=ae=i}var Yt=ct?i:Xh(C),Kt=[C,L,G,Q,ae,_t,Rt,_e,Be,$e];if(Yt&&function(St,Lt){var cr=St[1],Ft=Lt[1],br=cr|Ft,mr=br<131,Jr=Ft==l&&cr==8||Ft==l&&cr==256&&St[7].length<=Lt[8]||Ft==384&&Lt[7].length<=Lt[8]&&cr==8;if(!mr&&!Jr)return St;1&Ft&&(St[2]=Lt[2],br|=1&cr?0:4);var rr=Lt[3];if(rr){var ur=St[3];St[3]=ur?jc(ur,rr,Lt[4]):rr,St[4]=ur?io(St[3],s):Lt[4]}(rr=Lt[5])&&(ur=St[5],St[5]=ur?Hh(ur,rr,Lt[6]):rr,St[6]=ur?io(St[5],s):Lt[6]),(rr=Lt[7])&&(St[7]=rr),Ft&l&&(St[8]=St[8]==null?Lt[8]:Vn(St[8],Lt[8])),St[9]==null&&(St[9]=Lt[9]),St[0]=Lt[0],St[1]=br}(Kt,Yt),C=Kt[0],L=Kt[1],G=Kt[2],Q=Kt[3],ae=Kt[4],!($e=Kt[9]=Kt[9]===i?ct?0:C.length:An(Kt[9]-Et,0))&&24&L&&(L&=-25),L&&L!=1)or=L==8||L==16?function(St,Lt,cr){var Ft=pu(St);return function br(){for(var mr=arguments.length,Jr=Gt(mr),rr=mr,ur=Xu(br);rr--;)Jr[rr]=arguments[rr];var Si=mr<3&&Jr[0]!==ur&&Jr[mr-1]!==ur?[]:io(Jr,ur);return(mr-=Si.length)<cr?Yh(St,Lt,ls,br.placeholder,i,Jr,Si,i,i,cr-mr):mo(this&&this!==Ri&&this instanceof br?Ft:St,this,Jr)}}(C,L,$e):L!=u&&L!=33||ae.length?ls.apply(i,Kt):function(St,Lt,cr,Ft){var br=1&Lt,mr=pu(St);return function Jr(){for(var rr=-1,ur=arguments.length,Si=-1,Yn=Ft.length,No=Gt(Yn+ur),Ln=this&&this!==Ri&&this instanceof Jr?mr:St;++Si<Yn;)No[Si]=Ft[Si];for(;ur--;)No[Si++]=arguments[++rr];return mo(Ln,br?cr:this,No)}}(C,L,G,Q);else var or=function(St,Lt,cr){var Ft=1&Lt,br=pu(St);return function mr(){return(this&&this!==Ri&&this instanceof mr?br:St).apply(Ft?cr:this,arguments)}}(C,L,G);return ds((Yt?Nf:Zh)(or,Kt),C,L)}function Di(C,L,G,Q){return C===i||uo(C,ju[G])&&!Qr.call(Q,G)?L:C}function Uc(C,L,G,Q,ae,_e){return $n(C)&&$n(L)&&(_e.set(L,C),Vh(C,L,i,Uc,_e),_e.delete(L)),C}function zc(C){return $c(C)?i:C}function Qo(C,L,G,Q,ae,_e){var Be=1&G,$e=C.length,ct=L.length;if($e!=ct&&!(Be&&ct>$e))return!1;var Et=_e.get(C),_t=_e.get(L);if(Et&&_t)return Et==L&&_t==C;var Rt=-1,Yt=!0,Kt=2&G?new is:i;for(_e.set(C,L),_e.set(L,C);++Rt<$e;){var or=C[Rt],St=L[Rt];if(Q)var Lt=Be?Q(St,or,Rt,L,C,_e):Q(or,St,Rt,C,L,_e);if(Lt!==i){if(Lt)continue;Yt=!1;break}if(Kt){if(!_c(L,function(cr,Ft){if(!ou(Kt,Ft)&&(or===cr||ae(or,cr,G,Q,_e)))return Kt.push(Ft)})){Yt=!1;break}}else if(or!==St&&!ae(or,St,G,Q,_e)){Yt=!1;break}}return _e.delete(C),_e.delete(L),Yt}function Ea(C){return Qh(Wf(C,i,Np),C+"")}function qc(C){return ki(C,Gi,av)}function hs(C){return ki(C,Nr,jl)}var Xh=Af?function(C){return Af.get(C)}:yd;function Ki(C){for(var L=C.name+"",G=Ol[L],Q=Qr.call(Ol,L)?G.length:0;Q--;){var ae=G[Q],_e=ae.func;if(_e==null||_e==C)return ae.name}return L}function Xu(C){return(Qr.call(ce,"placeholder")?ce:C).placeholder}function gr(){var C=ce.iteratee||co;return C=C===co?Rl:C,arguments.length?C(arguments[0],arguments[1]):C}function gu(C,L){var G,Q,ae=C.__data__;return((Q=typeof(G=L))=="string"||Q=="number"||Q=="symbol"||Q=="boolean"?G!=="__proto__":G===null)?ae[typeof L=="string"?"string":"hash"]:ae.map}function Vf(C){for(var L=Gi(C),G=L.length;G--;){var Q=L[G],ae=C[Q];L[G]=[Q,ae,Mp(ae)]}return L}function yu(C,L){var G=function(Q,ae){return Q==null?i:Q[ae]}(C,L);return Ic(G)?G:i}var av=Pf?function(C){return C==null?[]:(C=gn(C),ja(Pf(C),function(L){return Qd.call(C,L)}))}:Lo,jl=Pf?function(C){for(var L=[];C;)va(L,av(C)),C=Uu(C);return L}:Lo,Rn=hn;function Kh(C,L,G){for(var Q=-1,ae=(L=Eo(L,C)).length,_e=!1;++Q<ae;){var Be=xi(L[Q]);if(!(_e=C!=null&&G(C,Be)))break;C=C[Be]}return _e||++Q!=ae?_e:!!(ae=C==null?0:C.length)&&ea(ae)&&Zi(Be,ae)&&(Or(C)||Jo(C))}function Fl(C){return typeof C.constructor!="function"||mu(C)?{}:Rs(Uu(C))}function Bl(C){return Or(C)||Jo(C)||!!(bo&&C&&C[bo])}function Zi(C,L){var G=typeof C;return!!(L=L??f)&&(G=="number"||G!="symbol"&&Xt.test(C))&&C>-1&&C%1==0&&C<L}function Oo(C,L,G){if(!$n(G))return!1;var Q=typeof L;return!!(Q=="number"?ko(G)&&Zi(L,G.length):Q=="string"&&L in G)&&uo(G[L],C)}function zi(C,L){if(Or(C))return!1;var G=typeof C;return!(G!="number"&&G!="symbol"&&G!="boolean"&&C!=null&&!Do(C))||ut.test(C)||!xt.test(C)||L!=null&&C in gn(L)}function Ul(C){var L=Ki(C),G=ce[L];if(typeof G!="function"||!(L in Lr.prototype))return!1;if(C===G)return!0;var Q=Xh(G);return!!Q&&C===Q[0]}(Qt&&Rn(new Qt(new ArrayBuffer(1)))!=te||so&&Rn(new so)!=R||Qn&&Rn(Qn.resolve())!=M||El&&Rn(new El)!=j||Ac&&Rn(new Ac)!=W)&&(Rn=function(C){var L=hn(C),G=L==A?C.constructor:i,Q=G?_u(G):"";if(Q)switch(Q){case xl:return te;case Qe:return R;case pt:return M;case ot:return j;case $t:return W}return L});var ty=wl?Ha:md;function mu(C){var L=C&&C.constructor;return C===(typeof L=="function"&&L.prototype||ju)}function Mp(C){return C==C&&!$n(C)}function Va(C,L){return function(G){return G!=null&&G[C]===L&&(L!==i||C in gn(G))}}function Wf(C,L,G){return L=An(L===i?C.length-1:L,0),function(){for(var Q=arguments,ae=-1,_e=An(Q.length-L,0),Be=Gt(_e);++ae<_e;)Be[ae]=Q[L+ae];ae=-1;for(var $e=Gt(L+1);++ae<L;)$e[ae]=Q[ae];return $e[L]=G(Be),mo(C,this,$e)}}function Lp(C,L){return L.length<2?C:cu(C,qa(L,0,-1))}function bu(C,L){if((L!=="constructor"||typeof C[L]!="function")&&L!="__proto__")return C[L]}var Zh=sv(Nf),zl=Po||function(C,L){return Ri.setTimeout(C,L)},Qh=sv(os);function ds(C,L,G){var Q=L+"";return Qh(C,function(ae,_e){var Be=_e.length;if(!Be)return ae;var $e=Be-1;return _e[$e]=(Be>1?"& ":"")+_e[$e],_e=_e.join(Be>2?", ":" "),ae.replace(Ne,`{
/* [wrapped with `+_e+`] */
`)}(Q,function(ae,_e){return Wt(v,function(Be){var $e="_."+Be[0];_e&Be[1]&&!Nu(ae,$e)&&ae.push($e)}),ae.sort()}(function(ae){var _e=ae.match(et);return _e?_e[1].split(wt):[]}(Q),G)))}function sv(C){var L=0,G=0;return function(){var Q=Fh(),ae=16-(Q-G);if(G=Q,ae>0){if(++L>=800)return arguments[0]}else L=0;return C.apply(i,arguments)}}function Hf(C,L){var G=-1,Q=C.length,ae=Q-1;for(L=L===i?Q:L;++G<L;){var _e=Hu(G,ae),Be=C[_e];C[_e]=C[G],C[G]=Be}return C.length=L,C}var Ku,uv,Jh=(Ku=ps(function(C){var L=[];return C.charCodeAt(0)===46&&L.push(""),C.replace(H,function(G,Q,ae,_e){L.push(ae?_e.replace(Ue,"$1"):Q||G)}),L},function(C){return uv.size===500&&uv.clear(),C}),uv=Ku.cache,Ku);function xi(C){if(typeof C=="string"||Do(C))return C;var L=C+"";return L=="0"&&1/C==-1/0?"-0":L}function _u(C){if(C!=null){try{return Fu.call(C)}catch{}try{return C+""}catch{}}return""}function lv(C){if(C instanceof Lr)return C.clone();var L=new Jn(C.__wrapped__,C.__chain__);return L.__actions__=Io(C.__actions__),L.__index__=C.__index__,L.__values__=C.__values__,L}var ql=dr(function(C,L){return Hn(C)?ks(C,Wn(L,1,Hn,!0)):[]}),cv=dr(function(C,L){var G=li(L);return Hn(G)&&(G=i),Hn(C)?ks(C,Wn(L,1,Hn,!0),gr(G,2)):[]}),fv=dr(function(C,L){var G=li(L);return Hn(G)&&(G=i),Hn(C)?ks(C,Wn(L,1,Hn,!0),i,G):[]});function wr(C,L,G){var Q=C==null?0:C.length;if(!Q)return-1;var ae=G==null?0:Cr(G);return ae<0&&(ae=An(Q+ae,0)),yl(C,gr(L,3),ae)}function hv(C,L,G){var Q=C==null?0:C.length;if(!Q)return-1;var ae=Q-1;return G!==i&&(ae=Cr(G),ae=G<0?An(Q+ae,0):Vn(ae,Q-1)),yl(C,gr(L,3),ae,!0)}function Np(C){return C!=null&&C.length?Wn(C,1):[]}function Gl(C){return C&&C.length?C[0]:i}var dv=dr(function(C){var L=$r(C,Dl);return L.length&&L[0]===C[0]?Vu(L):[]}),jp=dr(function(C){var L=li(C),G=$r(C,Dl);return L===li(G)?L=i:G.pop(),G.length&&G[0]===C[0]?Vu(G,gr(L,2)):[]}),$f=dr(function(C){var L=li(C),G=$r(C,Dl);return(L=typeof L=="function"?L:i)&&G.pop(),G.length&&G[0]===C[0]?Vu(G,i,L):[]});function li(C){var L=C==null?0:C.length;return L?C[L-1]:i}var Fp=dr(Yf);function Yf(C,L){return C&&C.length&&L&&L.length?vu(C,L):C}var ed=Ea(function(C,L){var G=C==null?0:C.length,Q=Tl(C,L);return ye(C,$r(L,function(ae){return Zi(ae,G)?+ae:ae}).sort(Dp)),Q});function Xf(C){return C==null?C:Cp.call(C)}var Bp=dr(function(C){return tr(Wn(C,1,Hn,!0))}),Oa=dr(function(C){var L=li(C);return Hn(L)&&(L=i),tr(Wn(C,1,Hn,!0),gr(L,2))}),Zu=dr(function(C){var L=li(C);return L=typeof L=="function"?L:i,tr(Wn(C,1,Hn,!0),i,L)});function wu(C){if(!C||!C.length)return[];var L=0;return C=ja(C,function(G){if(Hn(G))return L=An(G.length,L),!0}),_l(L,function(G){return $r(C,wc(G))})}function td(C,L){if(!C||!C.length)return[];var G=wu(C);return L==null?G:$r(G,function(Q){return mo(L,i,Q)})}var rd=dr(function(C,L){return Hn(C)?ks(C,L):[]}),Qu=dr(function(C){return Ff(ja(C,Hn))}),nd=dr(function(C){var L=li(C);return Hn(L)&&(L=i),Ff(ja(C,Hn),gr(L,2))}),Kf=dr(function(C){var L=li(C);return L=typeof L=="function"?L:i,Ff(ja(C,Hn),i,L)}),Gc=dr(wu),Qi=dr(function(C){var L=C.length,G=L>1?C[L-1]:i;return G=typeof G=="function"?(C.pop(),G):i,td(C,G)});function vs(C){var L=ce(C);return L.__chain__=!0,L}function id(C,L){return L(C)}var Ns=Ea(function(C){var L=C.length,G=L?C[0]:0,Q=this.__wrapped__,ae=function(_e){return Tl(_e,C)};return!(L>1||this.__actions__.length)&&Q instanceof Lr&&Zi(G)?((Q=Q.slice(G,+G+(L?1:0))).__actions__.push({func:id,args:[ae],thisArg:i}),new Jn(Q,this.__chain__).thru(function(_e){return L&&!_e.length&&_e.push(i),_e})):this.thru(ae)}),Up=Uf(function(C,L,G){Qr.call(C,G)?++C[G]:Is(C,G,1)}),vv=us(wr),Vl=us(hv);function Vc(C,L){return(Or(C)?Wt:Xo)(C,gr(L,3))}function pv(C,L){return(Or(C)?ru:Ro)(C,gr(L,3))}var od=Uf(function(C,L,G){Qr.call(C,G)?C[G].push(L):Is(C,G,[L])}),gv=dr(function(C,L,G){var Q=-1,ae=typeof L=="function",_e=ko(C)?Gt(C.length):[];return Xo(C,function(Be){_e[++Q]=ae?mo(L,Be,G):fu(Be,L,G)}),_e}),ad=Uf(function(C,L,G){Is(C,G,L)});function Wl(C,L){return(Or(C)?$r:Rp)(C,gr(L,3))}var yv=Uf(function(C,L,G){C[G?0:1].push(L)},function(){return[[],[]]}),zp=dr(function(C,L){if(C==null)return[];var G=L.length;return G>1&&Oo(C,L[0],L[1])?L=[]:G>2&&Oo(L[0],L[1],L[2])&&(L=[L[0]]),Mc(C,Wn(L,1),[])}),qi=Sp||function(){return Ri.Date.now()};function Wa(C,L,G){return L=G?i:L,L=C&&L==null?C.length:L,fs(C,l,i,i,i,i,L)}function mv(C,L){var G;if(typeof L!="function")throw new pi(o);return C=Cr(C),function(){return--C>0&&(G=L.apply(this,arguments)),C<=1&&(L=i),G}}var Zf=dr(function(C,L,G){var Q=1;if(G.length){var ae=io(G,Xu(Zf));Q|=u}return fs(C,Q,L,G,ae)}),Qf=dr(function(C,L,G){var Q=3;if(G.length){var ae=io(G,Xu(Qf));Q|=u}return fs(L,Q,C,G,ae)});function js(C,L,G){var Q,ae,_e,Be,$e,ct,Et=0,_t=!1,Rt=!1,Yt=!0;if(typeof C!="function")throw new pi(o);function Kt(Ft){var br=Q,mr=ae;return Q=ae=i,Et=Ft,Be=C.apply(mr,br)}function or(Ft){var br=Ft-ct;return ct===i||br>=L||br<0||Rt&&Ft-Et>=_e}function St(){var Ft=qi();if(or(Ft))return Lt(Ft);$e=zl(St,function(br){var mr=L-(br-ct);return Rt?Vn(mr,_e-(br-Et)):mr}(Ft))}function Lt(Ft){return $e=i,Yt&&Q?Kt(Ft):(Q=ae=i,Be)}function cr(){var Ft=qi(),br=or(Ft);if(Q=arguments,ae=this,ct=Ft,br){if($e===i)return function(mr){return Et=mr,$e=zl(St,L),_t?Kt(mr):Be}(ct);if(Rt)return wa($e),$e=zl(St,L),Kt(ct)}return $e===i&&($e=zl(St,L)),Be}return L=Ta(L)||0,$n(G)&&(_t=!!G.leading,_e=(Rt="maxWait"in G)?An(Ta(G.maxWait)||0,L):_e,Yt="trailing"in G?!!G.trailing:Yt),cr.cancel=function(){$e!==i&&wa($e),Et=0,Q=ct=ae=$e=i},cr.flush=function(){return $e===i?Be:Lt(qi())},cr}var qp=dr(function(C,L){return If(C,1,L)}),Ju=dr(function(C,L,G){return If(C,Ta(L)||0,G)});function ps(C,L){if(typeof C!="function"||L!=null&&typeof L!="function")throw new pi(o);var G=function(){var Q=arguments,ae=L?L.apply(this,Q):Q[0],_e=G.cache;if(_e.has(ae))return _e.get(ae);var Be=C.apply(this,Q);return G.cache=_e.set(ae,Be)||_e,Be};return G.cache=new(ps.Cache||Xi),G}function Wc(C){if(typeof C!="function")throw new pi(o);return function(){var L=arguments;switch(L.length){case 0:return!C.call(this);case 1:return!C.call(this,L[0]);case 2:return!C.call(this,L[0],L[1]);case 3:return!C.call(this,L[0],L[1],L[2])}return!C.apply(this,L)}}ps.Cache=Xi;var Hl=ey(function(C,L){var G=(L=L.length==1&&Or(L[0])?$r(L[0],Pr(gr())):$r(Wn(L,1),Pr(gr()))).length;return dr(function(Q){for(var ae=-1,_e=Vn(Q.length,G);++ae<_e;)Q[ae]=L[ae].call(this,Q[ae]);return mo(C,this,Q)})}),el=dr(function(C,L){var G=io(L,Xu(el));return fs(C,u,i,L,G)}),sd=dr(function(C,L){var G=io(L,Xu(sd));return fs(C,64,i,L,G)}),bv=Ea(function(C,L){return fs(C,256,i,i,i,L)});function uo(C,L){return C===L||C!=C&&L!=L}var Jf=cs(qh),$l=cs(function(C,L){return C>=L}),Jo=za(function(){return arguments}())?za:function(C){return Mn(C)&&Qr.call(C,"callee")&&!Qd.call(C,"callee")},Or=Gt.isArray,eh=Ja?Pr(Ja):function(C){return Mn(C)&&hn(C)==J};function ko(C){return C!=null&&ea(C.length)&&!Ha(C)}function Hn(C){return Mn(C)&&ko(C)}var Ji=qu||md,_v=tu?Pr(tu):function(C){return Mn(C)&&hn(C)==p};function Yl(C){if(!Mn(C))return!1;var L=hn(C);return L==_||L=="[object DOMException]"||typeof C.message=="string"&&typeof C.name=="string"&&!$c(C)}function Ha(C){if(!$n(C))return!1;var L=hn(C);return L==O||L==P||L=="[object AsyncFunction]"||L=="[object Proxy]"}function Hc(C){return typeof C=="number"&&C==Cr(C)}function ea(C){return typeof C=="number"&&C>-1&&C%1==0&&C<=f}function $n(C){var L=typeof C;return C!=null&&(L=="object"||L=="function")}function Mn(C){return C!=null&&typeof C=="object"}var ud=gc?Pr(gc):function(C){return Mn(C)&&Rn(C)==R};function ld(C){return typeof C=="number"||Mn(C)&&hn(C)==T}function $c(C){if(!Mn(C)||hn(C)!=A)return!1;var L=Uu(C);if(L===null)return!0;var G=Qr.call(L,"constructor")&&L.constructor;return typeof G=="function"&&G instanceof G&&Fu.call(G)==Lh}var th=yc?Pr(yc):function(C){return Mn(C)&&hn(C)==N},xa=Fr?Pr(Fr):function(C){return Mn(C)&&Rn(C)==j};function Yc(C){return typeof C=="string"||!Or(C)&&Mn(C)&&hn(C)==B}function Do(C){return typeof C=="symbol"||Mn(C)&&hn(C)==q}var gs=Ho?Pr(Ho):function(C){return Mn(C)&&ea(C.length)&&!!Hr[hn(C)]},cd=cs(Ms),Xc=cs(function(C,L){return C<=L});function Pt(C){if(!C)return[];if(ko(C))return Yc(C)?Zn(C):Io(C);if(zu&&C[zu])return function(G){for(var Q,ae=[];!(Q=G.next()).done;)ae.push(Q.value);return ae}(C[zu]());var L=Rn(C);return(L==R?qn:L==j?su:Su)(C)}function Sa(C){return C?(C=Ta(C))===c||C===-1/0?17976931348623157e292*(C<0?-1:1):C==C?C:0:C===0?C:0}function Cr(C){var L=Sa(C),G=L%1;return L==L?G?L-G:L:0}function Eu(C){return C?Ua(Cr(C),0,d):0}function Ta(C){if(typeof C=="number")return C;if(Do(C))return h;if($n(C)){var L=typeof C.valueOf=="function"?C.valueOf():C;C=$n(L)?L+"":L}if(typeof C!="string")return C===0?C:+C;C=pn(C);var G=kt.test(C);return G||Dt.test(C)?bf(C.slice(2),G?2:8):at.test(C)?h:+C}function fd(C){return as(C,Nr(C))}function cn(C){return C==null?"":ma(C)}var xo=Yu(function(C,L){if(mu(L)||ko(L))as(L,Gi(L),C);else for(var G in L)Qr.call(L,G)&&Rf(C,G,L[G])}),Gp=Yu(function(C,L){as(L,Nr(L),C)}),hd=Yu(function(C,L,G,Q){as(L,Nr(L),C,Q)}),Vp=Yu(function(C,L,G,Q){as(L,Gi(L),C,Q)}),ry=Ea(Tl),Wp=dr(function(C,L){C=gn(C);var G=-1,Q=L.length,ae=Q>2?L[2]:i;for(ae&&Oo(L[0],L[1],ae)&&(Q=1);++G<Q;)for(var _e=L[G],Be=Nr(_e),$e=-1,ct=Be.length;++$e<ct;){var Et=Be[$e],_t=C[Et];(_t===i||uo(_t,ju[Et])&&!Qr.call(C,Et))&&(C[Et]=_e[Et])}return C}),Hp=dr(function(C){return C.push(i,Uc),mo(ta,i,C)});function wv(C,L,G){var Q=C==null?i:cu(C,L);return Q===i?G:Q}function Ev(C,L){return C!=null&&Kh(C,L,Gh)}var Ou=Ko(function(C,L,G){L!=null&&typeof L.toString!="function"&&(L=Ps.call(L)),C[L]=G},ci(ra)),lo=Ko(function(C,L,G){L!=null&&typeof L.toString!="function"&&(L=Ps.call(L)),Qr.call(C,L)?C[L].push(G):C[L]=[G]},gr),Ov=dr(fu);function Gi(C){return ko(C)?Pp(C):du(C)}function Nr(C){return ko(C)?Pp(C,!0):function(L){if(!$n(L))return function(_e){var Be=[];if(_e!=null)for(var $e in gn(_e))Be.push($e);return Be}(L);var G=mu(L),Q=[];for(var ae in L)(ae!="constructor"||!G&&Qr.call(L,ae))&&Q.push(ae);return Q}(C)}var dd=Yu(function(C,L,G){Vh(C,L,G)}),ta=Yu(function(C,L,G,Q){Vh(C,L,G,Q)}),Mo=Ea(function(C,L){var G={};if(C==null)return G;var Q=!1;L=$r(L,function(_e){return _e=Eo(_e,C),Q||(Q=_e.length>1),_e}),as(C,hs(C),G),Q&&(G=Yo(G,7,zc));for(var ae=L.length;ae--;)Wh(G,L[ae]);return G}),Kc=Ea(function(C,L){return C==null?{}:function(G,Q){return ya(G,Q,function(ae,_e){return Ev(G,_e)})}(C,L)});function vd(C,L){if(C==null)return{};var G=$r(hs(C),function(Q){return[Q]});return L=gr(L),ya(C,G,function(Q,ae){return L(Q,ae[0])})}var xv=ov(Gi),xu=ov(Nr);function Su(C){return C==null?[]:Oc(C,Gi(C))}var pd=Ll(function(C,L,G){return L=L.toLowerCase(),C+(G?Ca(L):L)});function Ca(C){return gd(cn(C).toLowerCase())}function ys(C){return(C=cn(C))&&C.replace(fr,ts).replace(da,"")}var $p=Ll(function(C,L,G){return C+(G?"-":"")+L.toLowerCase()}),Xl=Ll(function(C,L,G){return C+(G?" ":"")+L.toLowerCase()}),rh=ss("toLowerCase"),tl=Ll(function(C,L,G){return C+(G?"_":"")+L.toLowerCase()}),Sv=Ll(function(C,L,G){return C+(G?" ":"")+gd(L)}),Tv=Ll(function(C,L,G){return C+(G?" ":"")+L.toUpperCase()}),gd=ss("toUpperCase");function nh(C,L,G){return C=cn(C),(L=G?i:L)===i?function(Q){return hr.test(Q)}(C)?function(Q){return Q.match(Pn)||[]}(C):function(Q){return Q.match(lt)||[]}(C):C.match(L)||[]}var Kl=dr(function(C,L){try{return mo(C,i,L)}catch(G){return Yl(G)?G:new Zr(G)}}),ms=Ea(function(C,L){return Wt(L,function(G){G=xi(G),Is(C,G,Zf(C[G],C))}),C});function ci(C){return function(){return C}}var Zc=zf(),Cv=zf(!0);function ra(C){return C}function co(C){return Rl(typeof C=="function"?C:Yo(C,1))}var Yp=dr(function(C,L){return function(G){return fu(G,C,L)}}),rl=dr(function(C,L){return function(G){return fu(C,G,L)}});function Pv(C,L,G){var Q=Gi(L),ae=Mf(L,Q);G!=null||$n(L)&&(ae.length||!Q.length)||(G=L,L=C,C=this,ae=Mf(L,Gi(L)));var _e=!($n(G)&&"chain"in G&&!G.chain),Be=Ha(C);return Wt(ae,function($e){var ct=L[$e];C[$e]=ct,Be&&(C.prototype[$e]=function(){var Et=this.__chain__;if(_e||Et){var _t=C(this.__wrapped__);return(_t.__actions__=Io(this.__actions__)).push({func:ct,args:arguments,thisArg:C}),_t.__chain__=Et,_t}return ct.apply(C,va([this.value()],arguments))})}),C}function yd(){}var ih=qf($r),Xp=qf(bc),ny=qf(_c);function Av(C){return zi(C)?wc(xi(C)):function(L){return function(G){return cu(G,L)}}(C)}var $a=Bc(),Rv=Bc(!0);function Lo(){return[]}function md(){return!1}var Iv,oh=$h(function(C,L){return C+L},0),kv=Nl("ceil"),Dv=$h(function(C,L){return C/L},1),iy=Nl("floor"),ei=$h(function(C,L){return C*L},1),Kp=Nl("round"),Mv=$h(function(C,L){return C-L},0);return ce.after=function(C,L){if(typeof L!="function")throw new pi(o);return C=Cr(C),function(){if(--C<1)return L.apply(this,arguments)}},ce.ary=Wa,ce.assign=xo,ce.assignIn=Gp,ce.assignInWith=hd,ce.assignWith=Vp,ce.at=ry,ce.before=mv,ce.bind=Zf,ce.bindAll=ms,ce.bindKey=Qf,ce.castArray=function(){if(!arguments.length)return[];var C=arguments[0];return Or(C)?C:[C]},ce.chain=vs,ce.chunk=function(C,L,G){L=(G?Oo(C,L,G):L===i)?1:An(Cr(L),0);var Q=C==null?0:C.length;if(!Q||L<1)return[];for(var ae=0,_e=0,Be=Gt(Nh(Q/L));ae<Q;)Be[_e++]=qa(C,ae,ae+=L);return Be},ce.compact=function(C){for(var L=-1,G=C==null?0:C.length,Q=0,ae=[];++L<G;){var _e=C[L];_e&&(ae[Q++]=_e)}return ae},ce.concat=function(){var C=arguments.length;if(!C)return[];for(var L=Gt(C-1),G=arguments[0],Q=C;Q--;)L[Q-1]=arguments[Q];return va(Or(G)?Io(G):[G],Wn(L,1))},ce.cond=function(C){var L=C==null?0:C.length,G=gr();return C=L?$r(C,function(Q){if(typeof Q[1]!="function")throw new pi(o);return[G(Q[0]),Q[1]]}):[],dr(function(Q){for(var ae=-1;++ae<L;){var _e=C[ae];if(mo(_e[0],this,Q))return mo(_e[1],this,Q)}})},ce.conforms=function(C){return function(L){var G=Gi(L);return function(Q){return Cl(Q,L,G)}}(Yo(C,1))},ce.constant=ci,ce.countBy=Up,ce.create=function(C,L){var G=Rs(C);return L==null?G:Sl(G,L)},ce.curry=function C(L,G,Q){var ae=fs(L,8,i,i,i,i,i,G=Q?i:G);return ae.placeholder=C.placeholder,ae},ce.curryRight=function C(L,G,Q){var ae=fs(L,16,i,i,i,i,i,G=Q?i:G);return ae.placeholder=C.placeholder,ae},ce.debounce=js,ce.defaults=Wp,ce.defaultsDeep=Hp,ce.defer=qp,ce.delay=Ju,ce.difference=ql,ce.differenceBy=cv,ce.differenceWith=fv,ce.drop=function(C,L,G){var Q=C==null?0:C.length;return Q?qa(C,(L=G||L===i?1:Cr(L))<0?0:L,Q):[]},ce.dropRight=function(C,L,G){var Q=C==null?0:C.length;return Q?qa(C,0,(L=Q-(L=G||L===i?1:Cr(L)))<0?0:L):[]},ce.dropRightWhile=function(C,L){return C&&C.length?wo(C,gr(L,3),!0,!0):[]},ce.dropWhile=function(C,L){return C&&C.length?wo(C,gr(L,3),!0):[]},ce.fill=function(C,L,G,Q){var ae=C==null?0:C.length;return ae?(G&&typeof G!="number"&&Oo(C,L,G)&&(G=0,Q=ae),function(_e,Be,$e,ct){var Et=_e.length;for(($e=Cr($e))<0&&($e=-$e>Et?0:Et+$e),(ct=ct===i||ct>Et?Et:Cr(ct))<0&&(ct+=Et),ct=$e>ct?0:Eu(ct);$e<ct;)_e[$e++]=Be;return _e}(C,L,G,Q)):[]},ce.filter=function(C,L){return(Or(C)?ja:rv)(C,gr(L,3))},ce.flatMap=function(C,L){return Wn(Wl(C,L),1)},ce.flatMapDeep=function(C,L){return Wn(Wl(C,L),c)},ce.flatMapDepth=function(C,L,G){return G=G===i?1:Cr(G),Wn(Wl(C,L),G)},ce.flatten=Np,ce.flattenDeep=function(C){return C!=null&&C.length?Wn(C,c):[]},ce.flattenDepth=function(C,L){return C!=null&&C.length?Wn(C,L=L===i?1:Cr(L)):[]},ce.flip=function(C){return fs(C,512)},ce.flow=Zc,ce.flowRight=Cv,ce.fromPairs=function(C){for(var L=-1,G=C==null?0:C.length,Q={};++L<G;){var ae=C[L];Q[ae[0]]=ae[1]}return Q},ce.functions=function(C){return C==null?[]:Mf(C,Gi(C))},ce.functionsIn=function(C){return C==null?[]:Mf(C,Nr(C))},ce.groupBy=od,ce.initial=function(C){return C!=null&&C.length?qa(C,0,-1):[]},ce.intersection=dv,ce.intersectionBy=jp,ce.intersectionWith=$f,ce.invert=Ou,ce.invertBy=lo,ce.invokeMap=gv,ce.iteratee=co,ce.keyBy=ad,ce.keys=Gi,ce.keysIn=Nr,ce.map=Wl,ce.mapKeys=function(C,L){var G={};return L=gr(L,3),Ds(C,function(Q,ae,_e){Is(G,L(Q,ae,_e),Q)}),G},ce.mapValues=function(C,L){var G={};return L=gr(L,3),Ds(C,function(Q,ae,_e){Is(G,ae,L(Q,ae,_e))}),G},ce.matches=function(C){return nv(Yo(C,1))},ce.matchesProperty=function(C,L){return kc(C,Yo(L,1))},ce.memoize=ps,ce.merge=dd,ce.mergeWith=ta,ce.method=Yp,ce.methodOf=rl,ce.mixin=Pv,ce.negate=Wc,ce.nthArg=function(C){return C=Cr(C),dr(function(L){return Dc(L,C)})},ce.omit=Mo,ce.omitBy=function(C,L){return vd(C,Wc(gr(L)))},ce.once=function(C){return mv(2,C)},ce.orderBy=function(C,L,G,Q){return C==null?[]:(Or(L)||(L=L==null?[]:[L]),Or(G=Q?i:G)||(G=G==null?[]:[G]),Mc(C,L,G))},ce.over=ih,ce.overArgs=Hl,ce.overEvery=Xp,ce.overSome=ny,ce.partial=el,ce.partialRight=sd,ce.partition=yv,ce.pick=Kc,ce.pickBy=vd,ce.property=Av,ce.propertyOf=function(C){return function(L){return C==null?i:cu(C,L)}},ce.pull=Fp,ce.pullAll=Yf,ce.pullAllBy=function(C,L,G){return C&&C.length&&L&&L.length?vu(C,L,gr(G,2)):C},ce.pullAllWith=function(C,L,G){return C&&C.length&&L&&L.length?vu(C,L,i,G):C},ce.pullAt=ed,ce.range=$a,ce.rangeRight=Rv,ce.rearg=bv,ce.reject=function(C,L){return(Or(C)?ja:rv)(C,Wc(gr(L,3)))},ce.remove=function(C,L){var G=[];if(!C||!C.length)return G;var Q=-1,ae=[],_e=C.length;for(L=gr(L,3);++Q<_e;){var Be=C[Q];L(Be,Q,C)&&(G.push(Be),ae.push(Q))}return ye(C,ae),G},ce.rest=function(C,L){if(typeof C!="function")throw new pi(o);return dr(C,L=L===i?L:Cr(L))},ce.reverse=Xf,ce.sampleSize=function(C,L,G){return L=(G?Oo(C,L,G):L===i)?1:Cr(L),(Or(C)?ga:Lf)(C,L)},ce.set=function(C,L,G){return C==null?C:Il(C,L,G)},ce.setWith=function(C,L,G,Q){return Q=typeof Q=="function"?Q:i,C==null?C:Il(C,L,G,Q)},ce.shuffle=function(C){return(Or(C)?ev:Jg)(C)},ce.slice=function(C,L,G){var Q=C==null?0:C.length;return Q?(G&&typeof G!="number"&&Oo(C,L,G)?(L=0,G=Q):(L=L==null?0:Cr(L),G=G===i?Q:Cr(G)),qa(C,L,G)):[]},ce.sortBy=zp,ce.sortedUniq=function(C){return C&&C.length?Ga(C):[]},ce.sortedUniqBy=function(C,L){return C&&C.length?Ga(C,gr(L,2)):[]},ce.split=function(C,L,G){return G&&typeof G!="number"&&Oo(C,L,G)&&(L=G=i),(G=G===i?d:G>>>0)?(C=cn(C))&&(typeof L=="string"||L!=null&&!th(L))&&!(L=ma(L))&&au(C)?_a(Zn(C),0,G):C.split(L,G):[]},ce.spread=function(C,L){if(typeof C!="function")throw new pi(o);return L=L==null?0:An(Cr(L),0),dr(function(G){var Q=G[L],ae=_a(G,0,L);return Q&&va(ae,Q),mo(C,this,ae)})},ce.tail=function(C){var L=C==null?0:C.length;return L?qa(C,1,L):[]},ce.take=function(C,L,G){return C&&C.length?qa(C,0,(L=G||L===i?1:Cr(L))<0?0:L):[]},ce.takeRight=function(C,L,G){var Q=C==null?0:C.length;return Q?qa(C,(L=Q-(L=G||L===i?1:Cr(L)))<0?0:L,Q):[]},ce.takeRightWhile=function(C,L){return C&&C.length?wo(C,gr(L,3),!1,!0):[]},ce.takeWhile=function(C,L){return C&&C.length?wo(C,gr(L,3)):[]},ce.tap=function(C,L){return L(C),C},ce.throttle=function(C,L,G){var Q=!0,ae=!0;if(typeof C!="function")throw new pi(o);return $n(G)&&(Q="leading"in G?!!G.leading:Q,ae="trailing"in G?!!G.trailing:ae),js(C,L,{leading:Q,maxWait:L,trailing:ae})},ce.thru=id,ce.toArray=Pt,ce.toPairs=xv,ce.toPairsIn=xu,ce.toPath=function(C){return Or(C)?$r(C,xi):Do(C)?[C]:Io(Jh(cn(C)))},ce.toPlainObject=fd,ce.transform=function(C,L,G){var Q=Or(C),ae=Q||Ji(C)||gs(C);if(L=gr(L,4),G==null){var _e=C&&C.constructor;G=ae?Q?new _e:[]:$n(C)&&Ha(_e)?Rs(Uu(C)):{}}return(ae?Wt:Ds)(C,function(Be,$e,ct){return L(G,Be,$e,ct)}),G},ce.unary=function(C){return Wa(C,1)},ce.union=Bp,ce.unionBy=Oa,ce.unionWith=Zu,ce.uniq=function(C){return C&&C.length?tr(C):[]},ce.uniqBy=function(C,L){return C&&C.length?tr(C,gr(L,2)):[]},ce.uniqWith=function(C,L){return L=typeof L=="function"?L:i,C&&C.length?tr(C,i,L):[]},ce.unset=function(C,L){return C==null||Wh(C,L)},ce.unzip=wu,ce.unzipWith=td,ce.update=function(C,L,G){return C==null?C:_o(C,L,Lc(G))},ce.updateWith=function(C,L,G,Q){return Q=typeof Q=="function"?Q:i,C==null?C:_o(C,L,Lc(G),Q)},ce.values=Su,ce.valuesIn=function(C){return C==null?[]:Oc(C,Nr(C))},ce.without=rd,ce.words=nh,ce.wrap=function(C,L){return el(Lc(L),C)},ce.xor=Qu,ce.xorBy=nd,ce.xorWith=Kf,ce.zip=Gc,ce.zipObject=function(C,L){return kp(C||[],L||[],Rf)},ce.zipObjectDeep=function(C,L){return kp(C||[],L||[],Il)},ce.zipWith=Qi,ce.entries=xv,ce.entriesIn=xu,ce.extend=Gp,ce.extendWith=hd,Pv(ce,ce),ce.add=oh,ce.attempt=Kl,ce.camelCase=pd,ce.capitalize=Ca,ce.ceil=kv,ce.clamp=function(C,L,G){return G===i&&(G=L,L=i),G!==i&&(G=(G=Ta(G))==G?G:0),L!==i&&(L=(L=Ta(L))==L?L:0),Ua(Ta(C),L,G)},ce.clone=function(C){return Yo(C,4)},ce.cloneDeep=function(C){return Yo(C,5)},ce.cloneDeepWith=function(C,L){return Yo(C,5,L=typeof L=="function"?L:i)},ce.cloneWith=function(C,L){return Yo(C,4,L=typeof L=="function"?L:i)},ce.conformsTo=function(C,L){return L==null||Cl(C,L,Gi(L))},ce.deburr=ys,ce.defaultTo=function(C,L){return C==null||C!=C?L:C},ce.divide=Dv,ce.endsWith=function(C,L,G){C=cn(C),L=ma(L);var Q=C.length,ae=G=G===i?Q:Ua(Cr(G),0,Q);return(G-=L.length)>=0&&C.slice(G,ae)==L},ce.eq=uo,ce.escape=function(C){return(C=cn(C))&&Ae.test(C)?C.replace(de,Mh):C},ce.escapeRegExp=function(C){return(C=cn(C))&&ne.test(C)?C.replace(X,"\\$&"):C},ce.every=function(C,L,G){var Q=Or(C)?bc:Ap;return G&&Oo(C,L,G)&&(L=i),Q(C,gr(L,3))},ce.find=vv,ce.findIndex=wr,ce.findKey=function(C,L){return wf(C,gr(L,3),Ds)},ce.findLast=Vl,ce.findLastIndex=hv,ce.findLastKey=function(C,L){return wf(C,gr(L,3),Df)},ce.floor=iy,ce.forEach=Vc,ce.forEachRight=pv,ce.forIn=function(C,L){return C==null?C:Pl(C,gr(L,3),Nr)},ce.forInRight=function(C,L){return C==null?C:zh(C,gr(L,3),Nr)},ce.forOwn=function(C,L){return C&&Ds(C,gr(L,3))},ce.forOwnRight=function(C,L){return C&&Df(C,gr(L,3))},ce.get=wv,ce.gt=Jf,ce.gte=$l,ce.has=function(C,L){return C!=null&&Kh(C,L,Al)},ce.hasIn=Ev,ce.head=Gl,ce.identity=ra,ce.includes=function(C,L,G,Q){C=ko(C)?C:Su(C),G=G&&!Q?Cr(G):0;var ae=C.length;return G<0&&(G=An(ae+G,0)),Yc(C)?G<=ae&&C.indexOf(L,G)>-1:!!ae&&nu(C,L,G)>-1},ce.indexOf=function(C,L,G){var Q=C==null?0:C.length;if(!Q)return-1;var ae=G==null?0:Cr(G);return ae<0&&(ae=An(Q+ae,0)),nu(C,L,ae)},ce.inRange=function(C,L,G){return L=Sa(L),G===i?(G=L,L=0):G=Sa(G),function(Q,ae,_e){return Q>=Vn(ae,_e)&&Q<An(ae,_e)}(C=Ta(C),L,G)},ce.invoke=Ov,ce.isArguments=Jo,ce.isArray=Or,ce.isArrayBuffer=eh,ce.isArrayLike=ko,ce.isArrayLikeObject=Hn,ce.isBoolean=function(C){return C===!0||C===!1||Mn(C)&&hn(C)==b},ce.isBuffer=Ji,ce.isDate=_v,ce.isElement=function(C){return Mn(C)&&C.nodeType===1&&!$c(C)},ce.isEmpty=function(C){if(C==null)return!0;if(ko(C)&&(Or(C)||typeof C=="string"||typeof C.splice=="function"||Ji(C)||gs(C)||Jo(C)))return!C.length;var L=Rn(C);if(L==R||L==j)return!C.size;if(mu(C))return!du(C).length;for(var G in C)if(Qr.call(C,G))return!1;return!0},ce.isEqual=function(C,L){return Wu(C,L)},ce.isEqualWith=function(C,L,G){var Q=(G=typeof G=="function"?G:i)?G(C,L):i;return Q===i?Wu(C,L,i,G):!!Q},ce.isError=Yl,ce.isFinite=function(C){return typeof C=="number"&&Jd(C)},ce.isFunction=Ha,ce.isInteger=Hc,ce.isLength=ea,ce.isMap=ud,ce.isMatch=function(C,L){return C===L||hu(C,L,Vf(L))},ce.isMatchWith=function(C,L,G){return G=typeof G=="function"?G:i,hu(C,L,Vf(L),G)},ce.isNaN=function(C){return ld(C)&&C!=+C},ce.isNative=function(C){if(ty(C))throw new Zr("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ic(C)},ce.isNil=function(C){return C==null},ce.isNull=function(C){return C===null},ce.isNumber=ld,ce.isObject=$n,ce.isObjectLike=Mn,ce.isPlainObject=$c,ce.isRegExp=th,ce.isSafeInteger=function(C){return Hc(C)&&C>=-9007199254740991&&C<=f},ce.isSet=xa,ce.isString=Yc,ce.isSymbol=Do,ce.isTypedArray=gs,ce.isUndefined=function(C){return C===i},ce.isWeakMap=function(C){return Mn(C)&&Rn(C)==W},ce.isWeakSet=function(C){return Mn(C)&&hn(C)=="[object WeakSet]"},ce.join=function(C,L){return C==null?"":Ao.call(C,L)},ce.kebabCase=$p,ce.last=li,ce.lastIndexOf=function(C,L,G){var Q=C==null?0:C.length;if(!Q)return-1;var ae=Q;return G!==i&&(ae=(ae=Cr(G))<0?An(Q+ae,0):Vn(ae,Q-1)),L==L?function(_e,Be,$e){for(var ct=$e+1;ct--;)if(_e[ct]===Be)return ct;return ct}(C,L,ae):yl(C,es,ae,!0)},ce.lowerCase=Xl,ce.lowerFirst=rh,ce.lt=cd,ce.lte=Xc,ce.max=function(C){return C&&C.length?kf(C,ra,qh):i},ce.maxBy=function(C,L){return C&&C.length?kf(C,gr(L,2),qh):i},ce.mean=function(C){return ml(C,ra)},ce.meanBy=function(C,L){return ml(C,gr(L,2))},ce.min=function(C){return C&&C.length?kf(C,ra,Ms):i},ce.minBy=function(C,L){return C&&C.length?kf(C,gr(L,2),Ms):i},ce.stubArray=Lo,ce.stubFalse=md,ce.stubObject=function(){return{}},ce.stubString=function(){return""},ce.stubTrue=function(){return!0},ce.multiply=ei,ce.nth=function(C,L){return C&&C.length?Dc(C,Cr(L)):i},ce.noConflict=function(){return Ri._===this&&(Ri._=Bu),this},ce.noop=yd,ce.now=qi,ce.pad=function(C,L,G){C=cn(C);var Q=(L=Cr(L))?Ui(C):0;if(!L||Q>=L)return C;var ae=(L-Q)/2;return Zo(jh(ae),G)+C+Zo(Nh(ae),G)},ce.padEnd=function(C,L,G){C=cn(C);var Q=(L=Cr(L))?Ui(C):0;return L&&Q<L?C+Zo(L-Q,G):C},ce.padStart=function(C,L,G){C=cn(C);var Q=(L=Cr(L))?Ui(C):0;return L&&Q<L?Zo(L-Q,G)+C:C},ce.parseInt=function(C,L,G){return G||L==null?L=0:L&&(L=+L),Qg(cn(C).replace(Se,""),L||0)},ce.random=function(C,L,G){if(G&&typeof G!="boolean"&&Oo(C,L,G)&&(L=G=i),G===i&&(typeof L=="boolean"?(G=L,L=i):typeof C=="boolean"&&(G=C,C=i)),C===i&&L===i?(C=0,L=1):(C=Sa(C),L===i?(L=C,C=0):L=Sa(L)),C>L){var Q=C;C=L,L=Q}if(G||C%1||L%1){var ae=Tp();return Vn(C+ae*(L-C+Js("1e-"+((ae+"").length-1))),L)}return Hu(C,L)},ce.reduce=function(C,L,G){var Q=Or(C)?gl:bl,ae=arguments.length<3;return Q(C,gr(L,4),G,ae,Xo)},ce.reduceRight=function(C,L,G){var Q=Or(C)?kh:bl,ae=arguments.length<3;return Q(C,gr(L,4),G,ae,Ro)},ce.repeat=function(C,L,G){return L=(G?Oo(C,L,G):L===i)?1:Cr(L),$u(cn(C),L)},ce.replace=function(){var C=arguments,L=cn(C[0]);return C.length<3?L:L.replace(C[1],C[2])},ce.result=function(C,L,G){var Q=-1,ae=(L=Eo(L,C)).length;for(ae||(ae=1,C=i);++Q<ae;){var _e=C==null?i:C[xi(L[Q])];_e===i&&(Q=ae,_e=G),C=Ha(_e)?_e.call(C):_e}return C},ce.round=Kp,ce.runInContext=ft,ce.sample=function(C){return(Or(C)?Uh:kr)(C)},ce.size=function(C){if(C==null)return 0;if(ko(C))return Yc(C)?Ui(C):C.length;var L=Rn(C);return L==R||L==j?C.size:du(C).length},ce.snakeCase=tl,ce.some=function(C,L,G){var Q=Or(C)?_c:Ip;return G&&Oo(C,L,G)&&(L=i),Q(C,gr(L,3))},ce.sortedIndex=function(C,L){return jf(C,L)},ce.sortedIndexBy=function(C,L,G){return kl(C,L,gr(G,2))},ce.sortedIndexOf=function(C,L){var G=C==null?0:C.length;if(G){var Q=jf(C,L);if(Q<G&&uo(C[Q],L))return Q}return-1},ce.sortedLastIndex=function(C,L){return jf(C,L,!0)},ce.sortedLastIndexBy=function(C,L,G){return kl(C,L,gr(G,2),!0)},ce.sortedLastIndexOf=function(C,L){if(C!=null&&C.length){var G=jf(C,L,!0)-1;if(uo(C[G],L))return G}return-1},ce.startCase=Sv,ce.startsWith=function(C,L,G){return C=cn(C),G=G==null?0:Ua(Cr(G),0,C.length),L=ma(L),C.slice(G,G+L.length)==L},ce.subtract=Mv,ce.sum=function(C){return C&&C.length?iu(C,ra):0},ce.sumBy=function(C,L){return C&&C.length?iu(C,gr(L,2)):0},ce.template=function(C,L,G){var Q=ce.templateSettings;G&&Oo(C,L,G)&&(L=i),C=cn(C),L=hd({},L,Q,Di);var ae,_e,Be=hd({},L.imports,Q.imports,Di),$e=Gi(Be),ct=Oc(Be,$e),Et=0,_t=L.interpolate||Vt,Rt="__p += '",Yt=Of((L.escape||Vt).source+"|"+_t.source+"|"+(_t===ht?nt:Vt).source+"|"+(L.evaluate||Vt).source+"|$","g"),Kt="//# sourceURL="+(Qr.call(L,"sourceURL")?(L.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++go+"]")+`
`;C.replace(Yt,function(Lt,cr,Ft,br,mr,Jr){return Ft||(Ft=br),Rt+=C.slice(Et,Jr).replace(lr,Zd),cr&&(ae=!0,Rt+=`' +
__e(`+cr+`) +
'`),mr&&(_e=!0,Rt+=`';
`+mr+`;
__p += '`),Ft&&(Rt+=`' +
((__t = (`+Ft+`)) == null ? '' : __t) +
'`),Et=Jr+Lt.length,Lt}),Rt+=`';
`;var or=Qr.call(L,"variable")&&L.variable;if(or){if(pe.test(or))throw new Zr("Invalid `variable` option passed into `_.template`")}else Rt=`with (obj) {
`+Rt+`
}
`;Rt=(_e?Rt.replace(qe,""):Rt).replace(Ge,"$1").replace(Me,"$1;"),Rt="function("+(or||"obj")+`) {
`+(or?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ae?", __e = _.escape":"")+(_e?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Rt+`return __p
}`;var St=Kl(function(){return Ii($e,Kt+"return "+Rt).apply(i,ct)});if(St.source=Rt,Yl(St))throw St;return St},ce.times=function(C,L){if((C=Cr(C))<1||C>f)return[];var G=d,Q=Vn(C,d);L=gr(L),C-=d;for(var ae=_l(Q,L);++G<C;)L(G);return ae},ce.toFinite=Sa,ce.toInteger=Cr,ce.toLength=Eu,ce.toLower=function(C){return cn(C).toLowerCase()},ce.toNumber=Ta,ce.toSafeInteger=function(C){return C?Ua(Cr(C),-9007199254740991,f):C===0?C:0},ce.toString=cn,ce.toUpper=function(C){return cn(C).toUpperCase()},ce.trim=function(C,L,G){if((C=cn(C))&&(G||L===i))return pn(C);if(!C||!(L=ma(L)))return C;var Q=Zn(C),ae=Zn(L);return _a(Q,Ef(Q,ae),Cs(Q,ae)+1).join("")},ce.trimEnd=function(C,L,G){if((C=cn(C))&&(G||L===i))return C.slice(0,Fa(C)+1);if(!C||!(L=ma(L)))return C;var Q=Zn(C);return _a(Q,0,Cs(Q,Zn(L))+1).join("")},ce.trimStart=function(C,L,G){if((C=cn(C))&&(G||L===i))return C.replace(Se,"");if(!C||!(L=ma(L)))return C;var Q=Zn(C);return _a(Q,Ef(Q,Zn(L))).join("")},ce.truncate=function(C,L){var G=30,Q="...";if($n(L)){var ae="separator"in L?L.separator:ae;G="length"in L?Cr(L.length):G,Q="omission"in L?ma(L.omission):Q}var _e=(C=cn(C)).length;if(au(C)){var Be=Zn(C);_e=Be.length}if(G>=_e)return C;var $e=G-Ui(Q);if($e<1)return Q;var ct=Be?_a(Be,0,$e).join(""):C.slice(0,$e);if(ae===i)return ct+Q;if(Be&&($e+=ct.length-$e),th(ae)){if(C.slice($e).search(ae)){var Et,_t=ct;for(ae.global||(ae=Of(ae.source,cn(Je.exec(ae))+"g")),ae.lastIndex=0;Et=ae.exec(_t);)var Rt=Et.index;ct=ct.slice(0,Rt===i?$e:Rt)}}else if(C.indexOf(ma(ae),$e)!=$e){var Yt=ct.lastIndexOf(ae);Yt>-1&&(ct=ct.slice(0,Yt))}return ct+Q},ce.unescape=function(C){return(C=cn(C))&&Oe.test(C)?C.replace(Pe,Ba):C},ce.uniqueId=function(C){var L=++Cc;return cn(C)+L},ce.upperCase=Tv,ce.upperFirst=gd,ce.each=Vc,ce.eachRight=pv,ce.first=Gl,Pv(ce,(Iv={},Ds(ce,function(C,L){Qr.call(ce.prototype,L)||(Iv[L]=C)}),Iv),{chain:!1}),ce.VERSION="4.17.21",Wt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(C){ce[C].placeholder=ce}),Wt(["drop","take"],function(C,L){Lr.prototype[C]=function(G){G=G===i?1:An(Cr(G),0);var Q=this.__filtered__&&!L?new Lr(this):this.clone();return Q.__filtered__?Q.__takeCount__=Vn(G,Q.__takeCount__):Q.__views__.push({size:Vn(G,d),type:C+(Q.__dir__<0?"Right":"")}),Q},Lr.prototype[C+"Right"]=function(G){return this.reverse()[C](G).reverse()}}),Wt(["filter","map","takeWhile"],function(C,L){var G=L+1,Q=G==1||G==3;Lr.prototype[C]=function(ae){var _e=this.clone();return _e.__iteratees__.push({iteratee:gr(ae,3),type:G}),_e.__filtered__=_e.__filtered__||Q,_e}}),Wt(["head","last"],function(C,L){var G="take"+(L?"Right":"");Lr.prototype[C]=function(){return this[G](1).value()[0]}}),Wt(["initial","tail"],function(C,L){var G="drop"+(L?"":"Right");Lr.prototype[C]=function(){return this.__filtered__?new Lr(this):this[G](1)}}),Lr.prototype.compact=function(){return this.filter(ra)},Lr.prototype.find=function(C){return this.filter(C).head()},Lr.prototype.findLast=function(C){return this.reverse().find(C)},Lr.prototype.invokeMap=dr(function(C,L){return typeof C=="function"?new Lr(this):this.map(function(G){return fu(G,C,L)})}),Lr.prototype.reject=function(C){return this.filter(Wc(gr(C)))},Lr.prototype.slice=function(C,L){C=Cr(C);var G=this;return G.__filtered__&&(C>0||L<0)?new Lr(G):(C<0?G=G.takeRight(-C):C&&(G=G.drop(C)),L!==i&&(G=(L=Cr(L))<0?G.dropRight(-L):G.take(L-C)),G)},Lr.prototype.takeRightWhile=function(C){return this.reverse().takeWhile(C).reverse()},Lr.prototype.toArray=function(){return this.take(d)},Ds(Lr.prototype,function(C,L){var G=/^(?:filter|find|map|reject)|While$/.test(L),Q=/^(?:head|last)$/.test(L),ae=ce[Q?"take"+(L=="last"?"Right":""):L],_e=Q||/^find/.test(L);ae&&(ce.prototype[L]=function(){var Be=this.__wrapped__,$e=Q?[1]:arguments,ct=Be instanceof Lr,Et=$e[0],_t=ct||Or(Be),Rt=function(cr){var Ft=ae.apply(ce,va([cr],$e));return Q&&Yt?Ft[0]:Ft};_t&&G&&typeof Et=="function"&&Et.length!=1&&(ct=_t=!1);var Yt=this.__chain__,Kt=!!this.__actions__.length,or=_e&&!Yt,St=ct&&!Kt;if(!_e&&_t){Be=St?Be:new Lr(this);var Lt=C.apply(Be,$e);return Lt.__actions__.push({func:id,args:[Rt],thisArg:i}),new Jn(Lt,Yt)}return or&&St?C.apply(this,$e):(Lt=this.thru(Rt),or?Q?Lt.value()[0]:Lt.value():Lt)})}),Wt(["pop","push","shift","sort","splice","unshift"],function(C){var L=Tc[C],G=/^(?:push|sort|unshift)$/.test(C)?"tap":"thru",Q=/^(?:pop|shift)$/.test(C);ce.prototype[C]=function(){var ae=arguments;if(Q&&!this.__chain__){var _e=this.value();return L.apply(Or(_e)?_e:[],ae)}return this[G](function(Be){return L.apply(Or(Be)?Be:[],ae)})}}),Ds(Lr.prototype,function(C,L){var G=ce[L];if(G){var Q=G.name+"";Qr.call(Ol,Q)||(Ol[Q]=[]),Ol[Q].push({name:L,func:G})}}),Ol[ls(i,2).name]=[{name:"wrapper",func:i}],Lr.prototype.clone=function(){var C=new Lr(this.__wrapped__);return C.__actions__=Io(this.__actions__),C.__dir__=this.__dir__,C.__filtered__=this.__filtered__,C.__iteratees__=Io(this.__iteratees__),C.__takeCount__=this.__takeCount__,C.__views__=Io(this.__views__),C},Lr.prototype.reverse=function(){if(this.__filtered__){var C=new Lr(this);C.__dir__=-1,C.__filtered__=!0}else(C=this.clone()).__dir__*=-1;return C},Lr.prototype.value=function(){var C=this.__wrapped__.value(),L=this.__dir__,G=Or(C),Q=L<0,ae=G?C.length:0,_e=function(Jr,rr,ur){for(var Si=-1,Yn=ur.length;++Si<Yn;){var No=ur[Si],Ln=No.size;switch(No.type){case"drop":Jr+=Ln;break;case"dropRight":rr-=Ln;break;case"take":rr=Vn(rr,Jr+Ln);break;case"takeRight":Jr=An(Jr,rr-Ln)}}return{start:Jr,end:rr}}(0,ae,this.__views__),Be=_e.start,$e=_e.end,ct=$e-Be,Et=Q?$e:Be-1,_t=this.__iteratees__,Rt=_t.length,Yt=0,Kt=Vn(ct,this.__takeCount__);if(!G||!Q&&ae==ct&&Kt==ct)return ba(C,this.__actions__);var or=[];e:for(;ct--&&Yt<Kt;){for(var St=-1,Lt=C[Et+=L];++St<Rt;){var cr=_t[St],Ft=cr.iteratee,br=cr.type,mr=Ft(Lt);if(br==2)Lt=mr;else if(!mr){if(br==1)continue e;break e}}or[Yt++]=Lt}return or},ce.prototype.at=Ns,ce.prototype.chain=function(){return vs(this)},ce.prototype.commit=function(){return new Jn(this.value(),this.__chain__)},ce.prototype.next=function(){this.__values__===i&&(this.__values__=Pt(this.value()));var C=this.__index__>=this.__values__.length;return{done:C,value:C?i:this.__values__[this.__index__++]}},ce.prototype.plant=function(C){for(var L,G=this;G instanceof Bh;){var Q=lv(G);Q.__index__=0,Q.__values__=i,L?ae.__wrapped__=Q:L=Q;var ae=Q;G=G.__wrapped__}return ae.__wrapped__=C,L},ce.prototype.reverse=function(){var C=this.__wrapped__;if(C instanceof Lr){var L=C;return this.__actions__.length&&(L=new Lr(this)),(L=L.reverse()).__actions__.push({func:id,args:[Xf],thisArg:i}),new Jn(L,this.__chain__)}return this.thru(Xf)},ce.prototype.toJSON=ce.prototype.valueOf=ce.prototype.value=function(){return ba(this.__wrapped__,this.__actions__)},ce.prototype.first=ce.prototype.head,zu&&(ce.prototype[zu]=function(){return this}),ce}();Ri._=pa,(n=(function(){return pa}).call(e,t,e,r))===i||(r.exports=n)}).call(this)},5880:function(r,e,t){var n,i;n=function(){var o=function(){},a="undefined",s=typeof window!==a&&typeof window.navigator!==a&&/Trident\/|MSIE /.test(window.navigator.userAgent),u=["trace","debug","info","warn","error"],l={},c=null;function f(p,_){var O=p[_];if(typeof O.bind=="function")return O.bind(p);try{return Function.prototype.bind.call(O,p)}catch{return function(){return Function.prototype.apply.apply(O,[p,arguments])}}}function h(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function d(){for(var p=this.getLevel(),_=0;_<u.length;_++){var O=u[_];this[O]=_<p?o:this.methodFactory(O,p,this.name)}if(this.log=this.debug,typeof console===a&&p<this.levels.SILENT)return"No console available for logging"}function v(p){return function(){typeof console!==a&&(d.call(this),this[p].apply(this,arguments))}}function y(p,_,O){return function(P){return P==="debug"&&(P="log"),typeof console!==a&&(P==="trace"&&s?h:console[P]!==void 0?f(console,P):console.log!==void 0?f(console,"log"):o)}(p)||v.apply(this,arguments)}function w(p,_){var O,P,R,T=this,A="loglevel";function M(){var B;if(typeof window!==a&&A){try{B=window.localStorage[A]}catch{}if(typeof B===a)try{var q=window.document.cookie,W=encodeURIComponent(A),J=q.indexOf(W+"=");J!==-1&&(B=/^([^;]+)/.exec(q.slice(J+W.length+1))[1])}catch{}return T.levels[B]===void 0&&(B=void 0),B}}function N(B){var q=B;if(typeof q=="string"&&T.levels[q.toUpperCase()]!==void 0&&(q=T.levels[q.toUpperCase()]),typeof q=="number"&&q>=0&&q<=T.levels.SILENT)return q;throw new TypeError("log.setLevel() called with invalid level: "+B)}typeof p=="string"?A+=":"+p:typeof p=="symbol"&&(A=void 0),T.name=p,T.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},T.methodFactory=_||y,T.getLevel=function(){return R??P??O},T.setLevel=function(B,q){return R=N(B),q!==!1&&function(W){var J=(u[W]||"silent").toUpperCase();if(typeof window!==a&&A){try{return void(window.localStorage[A]=J)}catch{}try{window.document.cookie=encodeURIComponent(A)+"="+J+";"}catch{}}}(R),d.call(T)},T.setDefaultLevel=function(B){P=N(B),M()||T.setLevel(B,!1)},T.resetLevel=function(){R=null,function(){if(typeof window!==a&&A){try{window.localStorage.removeItem(A)}catch{}try{window.document.cookie=encodeURIComponent(A)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}(),d.call(T)},T.enableAll=function(B){T.setLevel(T.levels.TRACE,B)},T.disableAll=function(B){T.setLevel(T.levels.SILENT,B)},T.rebuild=function(){if(c!==T&&(O=N(c.getLevel())),d.call(T),c===T)for(var B in l)l[B].rebuild()},O=N(c?c.getLevel():"WARN");var j=M();j!=null&&(R=N(j)),d.call(T)}(c=new w).getLogger=function(p){if(typeof p!="symbol"&&typeof p!="string"||p==="")throw new TypeError("You must supply a name when creating a logger.");var _=l[p];return _||(_=l[p]=new w(p,c.methodFactory)),_};var b=typeof window!==a?window.log:void 0;return c.noConflict=function(){return typeof window!==a&&window.log===c&&(window.log=b),c},c.getLoggers=function(){return l},c.default=c,c},(i=n.call(e,t,e,r))===void 0||(r.exports=i)},397:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.assertNotificationFilterIsEmpty=e.assertImpersonatedUserIsEmpty=e.assertTxConfigIsEmpty=e.assertDatabaseIsEmpty=void 0;var n=t(9305);t(9014),e.assertTxConfigIsEmpty=function(i,o,a){if(o===void 0&&(o=function(){}),i&&!i.isEmpty()){var s=(0,n.newError)("Driver is connected to the database that does not support transaction configuration. Please upgrade to neo4j 3.5.0 or later in order to use this functionality");throw o(s.message),a.onError(s),s}},e.assertDatabaseIsEmpty=function(i,o,a){if(o===void 0&&(o=function(){}),i){var s=(0,n.newError)("Driver is connected to the database that does not support multiple databases. Please upgrade to neo4j 4.0.0 or later in order to use this functionality");throw o(s.message),a.onError(s),s}},e.assertImpersonatedUserIsEmpty=function(i,o,a){if(o===void 0&&(o=function(){}),i){var s=(0,n.newError)("Driver is connected to the database that does not support user impersonation. Please upgrade to neo4j 4.4.0 or later in order to use this functionality. "+"Trying to impersonate ".concat(i,"."));throw o(s.message),a.onError(s),s}},e.assertNotificationFilterIsEmpty=function(i,o,a){if(o===void 0&&(o=function(){}),i!==void 0){var s=(0,n.newError)("Driver is connected to a database that does not support user notification filters. Please upgrade to Neo4j 5.7.0 or later in order to use this functionality. "+"Trying to set notifications to ".concat(n.json.stringify(i),"."));throw o(s.message),a.onError(s),s}}},8320:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(R){for(var T,A=1,M=arguments.length;A<M;A++)for(var N in T=arguments[A])Object.prototype.hasOwnProperty.call(T,N)&&(R[N]=T[N]);return R},n.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(R,T,A,M){M===void 0&&(M=A);var N=Object.getOwnPropertyDescriptor(T,A);N&&!("get"in N?!T.__esModule:N.writable||N.configurable)||(N={enumerable:!0,get:function(){return T[A]}}),Object.defineProperty(R,M,N)}:function(R,T,A,M){M===void 0&&(M=A),R[M]=T[A]}),o=this&&this.__setModuleDefault||(Object.create?function(R,T){Object.defineProperty(R,"default",{enumerable:!0,value:T})}:function(R,T){R.default=T}),a=this&&this.__importStar||function(R){if(R&&R.__esModule)return R;var T={};if(R!=null)for(var A in R)A!=="default"&&Object.prototype.hasOwnProperty.call(R,A)&&i(T,R,A);return o(T,R),T},s=this&&this.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(e,"__esModule",{value:!0});var u=t(397),l=(t(7452),t(7168)),c=a(t(7021)),f=t(9014),h=t(9305),d=s(t(6661)),v=s(t(3321)),y=h.internal.bookmarks.Bookmarks,w=h.internal.constants,b=w.ACCESS_MODE_WRITE,p=w.BOLT_PROTOCOL_V1,_=(h.internal.logger.Logger,h.internal.txConfig.TxConfig),O=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),P=function(){function R(T,A,M,N,j,B){var q=M===void 0?{}:M,W=q.disableLosslessIntegers,J=q.useBigInt;N===void 0&&(N=function(){return null}),this._server=T||{},this._chunker=A,this._packer=this._createPacker(A),this._unpacker=this._createUnpacker(W,J),this._responseHandler=N(this),this._log=j,this._onProtocolError=B,this._fatalError=null,this._lastMessageSignature=null,this._config={disableLosslessIntegers:W,useBigInt:J}}return Object.defineProperty(R.prototype,"transformer",{get:function(){var T=this;return this._transformer===void 0&&(this._transformer=new v.default(Object.values(d.default).map(function(A){return A(T._config,T._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"version",{get:function(){return p},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"supportsReAuth",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"initialized",{get:function(){return!!this._initialized},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"authToken",{get:function(){return this._authToken},enumerable:!1,configurable:!0}),R.prototype.packer=function(){return this._packer},R.prototype.packable=function(T){return this._packer.packable(T,this.transformer.toStructure)},R.prototype.unpacker=function(){return this._unpacker},R.prototype.unpack=function(T){return this._unpacker.unpack(T,this.transformer.fromStructure)},R.prototype.transformMetadata=function(T){return T},R.prototype.enrichErrorMetadata=function(T){return n(n({},T),{diagnostic_record:T.diagnostic_record!==null?n(n({},O),T.diagnostic_record):null})},R.prototype.initialize=function(T){var A=this,M=T===void 0?{}:T,N=M.userAgent,j=(M.boltAgent,M.authToken),B=M.notificationFilter,q=M.onError,W=M.onComplete,J=new f.LoginObserver({onError:function(te){return A._onLoginError(te,q)},onCompleted:function(te){return A._onLoginCompleted(te,W)}});return(0,u.assertNotificationFilterIsEmpty)(B,this._onProtocolError,J),this.write(c.default.init(N,j),J,!0),J},R.prototype.logoff=function(T){var A=T===void 0?{}:T,M=A.onComplete,N=A.onError,j=(A.flush,new f.LogoffObserver({onCompleted:M,onError:N})),B=(0,h.newError)("Driver is connected to a database that does not support logoff. Please upgrade to Neo4j 5.5.0 or later in order to use this functionality.");throw this._onProtocolError(B.message),j.onError(B),B},R.prototype.logon=function(T){var A=this,M=T===void 0?{}:T,N=M.authToken,j=M.onComplete,B=M.onError,q=(M.flush,new f.LoginObserver({onCompleted:function(){return A._onLoginCompleted({},N,j)},onError:function(J){return A._onLoginError(J,B)}})),W=(0,h.newError)("Driver is connected to a database that does not support logon. Please upgrade to Neo4j 5.5.0 or later in order to use this functionality.");throw this._onProtocolError(W.message),q.onError(W),W},R.prototype.prepareToClose=function(){},R.prototype.beginTransaction=function(T){var A=T===void 0?{}:T,M=A.bookmarks,N=A.txConfig,j=A.database,B=A.mode,q=A.impersonatedUser,W=A.notificationFilter,J=A.beforeError,te=A.afterError,re=A.beforeComplete,ee=A.afterComplete;return this.run("BEGIN",M?M.asBeginTransactionParameters():{},{bookmarks:M,txConfig:N,database:j,mode:B,impersonatedUser:q,notificationFilter:W,beforeError:J,afterError:te,beforeComplete:re,afterComplete:ee,flush:!1})},R.prototype.commitTransaction=function(T){var A=T===void 0?{}:T,M=A.beforeError,N=A.afterError,j=A.beforeComplete,B=A.afterComplete;return this.run("COMMIT",{},{bookmarks:y.empty(),txConfig:_.empty(),mode:b,beforeError:M,afterError:N,beforeComplete:j,afterComplete:B})},R.prototype.rollbackTransaction=function(T){var A=T===void 0?{}:T,M=A.beforeError,N=A.afterError,j=A.beforeComplete,B=A.afterComplete;return this.run("ROLLBACK",{},{bookmarks:y.empty(),txConfig:_.empty(),mode:b,beforeError:M,afterError:N,beforeComplete:j,afterComplete:B})},R.prototype.run=function(T,A,M){var N=M===void 0?{}:M,j=(N.bookmarks,N.txConfig),B=N.database,q=(N.mode,N.impersonatedUser),W=N.notificationFilter,J=N.beforeKeys,te=N.afterKeys,re=N.beforeError,ee=N.afterError,fe=N.beforeComplete,he=N.afterComplete,se=N.flush,me=se===void 0||se,De=N.highRecordWatermark,Le=De===void 0?Number.MAX_VALUE:De,Ie=N.lowRecordWatermark,qe=Ie===void 0?Number.MAX_VALUE:Ie,Ge=new f.ResultStreamObserver({server:this._server,beforeKeys:J,afterKeys:te,beforeError:re,afterError:ee,beforeComplete:fe,afterComplete:he,highRecordWatermark:Le,lowRecordWatermark:qe});return(0,u.assertTxConfigIsEmpty)(j,this._onProtocolError,Ge),(0,u.assertDatabaseIsEmpty)(B,this._onProtocolError,Ge),(0,u.assertImpersonatedUserIsEmpty)(q,this._onProtocolError,Ge),(0,u.assertNotificationFilterIsEmpty)(W,this._onProtocolError,Ge),this.write(c.default.run(T,A),Ge,!1),this.write(c.default.pullAll(),Ge,me),Ge},Object.defineProperty(R.prototype,"currentFailure",{get:function(){return this._responseHandler.currentFailure},enumerable:!1,configurable:!0}),R.prototype.reset=function(T){var A=T===void 0?{}:T,M=A.onError,N=A.onComplete,j=new f.ResetObserver({onProtocolError:this._onProtocolError,onError:M,onComplete:N});return this.write(c.default.reset(),j,!0),j},R.prototype.telemetry=function(T,A){T.api;var M=A===void 0?{}:A,N=(M.onError,M.onCompleted),j=new f.CompletedObserver;return N&&N(),j},R.prototype._createPacker=function(T){return new l.v1.Packer(T)},R.prototype._createUnpacker=function(T,A){return new l.v1.Unpacker(T,A)},R.prototype.write=function(T,A,M){if(this.queueObserverIfProtocolIsNotBroken(A)){this._log.isDebugEnabled()&&this._log.debug("C: ".concat(T)),this._lastMessageSignature=T.signature;var N=new l.structure.Structure(T.signature,T.fields);this.packable(N)(),this._chunker.messageBoundary(),M&&this._chunker.flush()}},R.prototype.isLastMessageLogon=function(){return this._lastMessageSignature===c.SIGNATURES.HELLO||this._lastMessageSignature===c.SIGNATURES.LOGON},R.prototype.isLastMessageReset=function(){return this._lastMessageSignature===c.SIGNATURES.RESET},R.prototype.notifyFatalError=function(T){return this._fatalError=T,this._responseHandler._notifyErrorToObservers(T)},R.prototype.updateCurrentObserver=function(){return this._responseHandler._updateCurrentObserver()},R.prototype.hasOngoingObservableRequests=function(){return this._responseHandler.hasOngoingObservableRequests()},R.prototype.queueObserverIfProtocolIsNotBroken=function(T){return this.isBroken()?(this.notifyFatalErrorToObserver(T),!1):this._responseHandler._queueObserver(T)},R.prototype.isBroken=function(){return!!this._fatalError},R.prototype.notifyFatalErrorToObserver=function(T){T&&T.onError&&T.onError(this._fatalError)},R.prototype.resetFailure=function(){this._responseHandler._resetFailure()},R.prototype._onLoginCompleted=function(T,A,M){if(this._initialized=!0,this._authToken=A,T){var N=T.server;this._server.version||(this._server.version=N)}M&&M(T)},R.prototype._onLoginError=function(T,A){this._onProtocolError(T.message),A&&A(T)},R}();e.default=P},6661:function(r,e,t){var n=this&&this.__read||function(u,l){var c=typeof Symbol=="function"&&u[Symbol.iterator];if(!c)return u;var f,h,d=c.call(u),v=[];try{for(;(l===void 0||l-- >0)&&!(f=d.next()).done;)v.push(f.value)}catch(y){h={error:y}}finally{try{f&&!f.done&&(c=d.return)&&c.call(d)}finally{if(h)throw h.error}}return v};Object.defineProperty(e,"__esModule",{value:!0});var i=t(9305),o=t(7168),a=t(3321),s=i.error.PROTOCOL_ERROR;e.default={createNodeTransformer:function(){return new a.TypeTransformer({signature:78,isTypeInstance:function(u){return u instanceof i.Node},toStructure:function(u){throw(0,i.newError)("It is not allowed to pass nodes in query parameters, given: ".concat(u),s)},fromStructure:function(u){o.structure.verifyStructSize("Node",3,u.size);var l=n(u.fields,3),c=l[0],f=l[1],h=l[2];return new i.Node(c,f,h)}})},createRelationshipTransformer:function(){return new a.TypeTransformer({signature:82,isTypeInstance:function(u){return u instanceof i.Relationship},toStructure:function(u){throw(0,i.newError)("It is not allowed to pass relationships in query parameters, given: ".concat(u),s)},fromStructure:function(u){o.structure.verifyStructSize("Relationship",5,u.size);var l=n(u.fields,5),c=l[0],f=l[1],h=l[2],d=l[3],v=l[4];return new i.Relationship(c,f,h,d,v)}})},createUnboundRelationshipTransformer:function(){return new a.TypeTransformer({signature:114,isTypeInstance:function(u){return u instanceof i.UnboundRelationship},toStructure:function(u){throw(0,i.newError)("It is not allowed to pass unbound relationships in query parameters, given: ".concat(u),s)},fromStructure:function(u){o.structure.verifyStructSize("UnboundRelationship",3,u.size);var l=n(u.fields,3),c=l[0],f=l[1],h=l[2];return new i.UnboundRelationship(c,f,h)}})},createPathTransformer:function(){return new a.TypeTransformer({signature:80,isTypeInstance:function(u){return u instanceof i.Path},toStructure:function(u){throw(0,i.newError)("It is not allowed to pass paths in query parameters, given: ".concat(u),s)},fromStructure:function(u){o.structure.verifyStructSize("Path",3,u.size);for(var l=n(u.fields,3),c=l[0],f=l[1],h=l[2],d=[],v=c[0],y=0;y<h.length;y+=2){var w=c[h[y+1]],b=(0,i.toNumber)(h[y]),p=void 0;b>0?(p=f[b-1])instanceof i.UnboundRelationship&&(f[b-1]=p=p.bindTo(v,w)):(p=f[-b-1])instanceof i.UnboundRelationship&&(f[-b-1]=p=p.bindTo(w,v)),d.push(new i.PathSegment(v,p,w)),v=w}return new i.Path(c[0],c[c.length-1],d)}})}}},2857:function(r,e,t){var n,i=this&&this.__extends||(n=function(d,v){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,w){y.__proto__=w}||function(y,w){for(var b in w)Object.prototype.hasOwnProperty.call(w,b)&&(y[b]=w[b])},n(d,v)},function(d,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function y(){this.constructor=d}n(d,v),d.prototype=v===null?Object.create(v):(y.prototype=v.prototype,new y)}),o=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(t(8320)),s=o(t(7168)),u=t(9305),l=o(t(3448)),c=o(t(3321)),f=u.internal.constants.BOLT_PROTOCOL_V2,h=function(d){function v(){return d!==null&&d.apply(this,arguments)||this}return i(v,d),v.prototype._createPacker=function(y){return new s.default.Packer(y)},v.prototype._createUnpacker=function(y,w){return new s.default.Unpacker(y,w)},Object.defineProperty(v.prototype,"transformer",{get:function(){var y=this;return this._transformer===void 0&&(this._transformer=new c.default(Object.values(l.default).map(function(w){return w(y._config,y._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"version",{get:function(){return f},enumerable:!1,configurable:!0}),v}(a.default);e.default=h},3448:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(w){for(var b,p=1,_=arguments.length;p<_;p++)for(var O in b=arguments[p])Object.prototype.hasOwnProperty.call(b,O)&&(w[O]=b[O]);return w},n.apply(this,arguments)},i=this&&this.__read||function(w,b){var p=typeof Symbol=="function"&&w[Symbol.iterator];if(!p)return w;var _,O,P=p.call(w),R=[];try{for(;(b===void 0||b-- >0)&&!(_=P.next()).done;)R.push(_.value)}catch(T){O={error:T}}finally{try{_&&!_.done&&(p=P.return)&&p.call(P)}finally{if(O)throw O.error}}return R},o=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(e,"__esModule",{value:!0});var a=t(9305),s=t(7168),u=t(3321),l=t(5973),c=o(t(6661)),f=a.internal.temporalUtil,h=f.dateToEpochDay,d=f.localDateTimeToEpochSecond,v=f.localTimeToNanoOfDay;function y(w,b,p){if(!b&&!p)return w;var _=function(T){return p?T.toBigInt():T.toNumberOrInfinity()},O=Object.create(Object.getPrototypeOf(w));for(var P in w)if(Object.prototype.hasOwnProperty.call(w,P)===!0){var R=w[P];O[P]=(0,a.isInt)(R)?_(R):R}return Object.freeze(O),O}e.default=n(n({},c.default),{createPoint2DTransformer:function(){return new u.TypeTransformer({signature:88,isTypeInstance:function(w){return(0,a.isPoint)(w)&&(w.z===null||w.z===void 0)},toStructure:function(w){return new s.structure.Structure(88,[(0,a.int)(w.srid),w.x,w.y])},fromStructure:function(w){s.structure.verifyStructSize("Point2D",3,w.size);var b=i(w.fields,3),p=b[0],_=b[1],O=b[2];return new a.Point(p,_,O,void 0)}})},createPoint3DTransformer:function(){return new u.TypeTransformer({signature:89,isTypeInstance:function(w){return(0,a.isPoint)(w)&&w.z!==null&&w.z!==void 0},toStructure:function(w){return new s.structure.Structure(89,[(0,a.int)(w.srid),w.x,w.y,w.z])},fromStructure:function(w){s.structure.verifyStructSize("Point3D",4,w.size);var b=i(w.fields,4),p=b[0],_=b[1],O=b[2],P=b[3];return new a.Point(p,_,O,P)}})},createDurationTransformer:function(){return new u.TypeTransformer({signature:69,isTypeInstance:a.isDuration,toStructure:function(w){var b=(0,a.int)(w.months),p=(0,a.int)(w.days),_=(0,a.int)(w.seconds),O=(0,a.int)(w.nanoseconds);return new s.structure.Structure(69,[b,p,_,O])},fromStructure:function(w){s.structure.verifyStructSize("Duration",4,w.size);var b=i(w.fields,4),p=b[0],_=b[1],O=b[2],P=b[3];return new a.Duration(p,_,O,P)}})},createLocalTimeTransformer:function(w){var b=w.disableLosslessIntegers,p=w.useBigInt;return new u.TypeTransformer({signature:116,isTypeInstance:a.isLocalTime,toStructure:function(_){var O=v(_.hour,_.minute,_.second,_.nanosecond);return new s.structure.Structure(116,[O])},fromStructure:function(_){s.structure.verifyStructSize("LocalTime",1,_.size);var O=i(_.fields,1)[0];return y((0,l.nanoOfDayToLocalTime)(O),b,p)}})},createTimeTransformer:function(w){var b=w.disableLosslessIntegers,p=w.useBigInt;return new u.TypeTransformer({signature:84,isTypeInstance:a.isTime,toStructure:function(_){var O=v(_.hour,_.minute,_.second,_.nanosecond),P=(0,a.int)(_.timeZoneOffsetSeconds);return new s.structure.Structure(84,[O,P])},fromStructure:function(_){s.structure.verifyStructSize("Time",2,_.size);var O=i(_.fields,2),P=O[0],R=O[1],T=(0,l.nanoOfDayToLocalTime)(P);return y(new a.Time(T.hour,T.minute,T.second,T.nanosecond,R),b,p)}})},createDateTransformer:function(w){var b=w.disableLosslessIntegers,p=w.useBigInt;return new u.TypeTransformer({signature:68,isTypeInstance:a.isDate,toStructure:function(_){var O=h(_.year,_.month,_.day);return new s.structure.Structure(68,[O])},fromStructure:function(_){s.structure.verifyStructSize("Date",1,_.size);var O=i(_.fields,1)[0];return y((0,l.epochDayToDate)(O),b,p)}})},createLocalDateTimeTransformer:function(w){var b=w.disableLosslessIntegers,p=w.useBigInt;return new u.TypeTransformer({signature:100,isTypeInstance:a.isLocalDateTime,toStructure:function(_){var O=d(_.year,_.month,_.day,_.hour,_.minute,_.second,_.nanosecond),P=(0,a.int)(_.nanosecond);return new s.structure.Structure(100,[O,P])},fromStructure:function(_){s.structure.verifyStructSize("LocalDateTime",2,_.size);var O=i(_.fields,2),P=O[0],R=O[1];return y((0,l.epochSecondAndNanoToLocalDateTime)(P,R),b,p)}})},createDateTimeWithZoneIdTransformer:function(w){var b=w.disableLosslessIntegers,p=w.useBigInt;return new u.TypeTransformer({signature:102,isTypeInstance:function(_){return(0,a.isDateTime)(_)&&_.timeZoneId!=null},toStructure:function(_){var O=d(_.year,_.month,_.day,_.hour,_.minute,_.second,_.nanosecond),P=(0,a.int)(_.nanosecond),R=_.timeZoneId;return new s.structure.Structure(102,[O,P,R])},fromStructure:function(_){s.structure.verifyStructSize("DateTimeWithZoneId",3,_.size);var O=i(_.fields,3),P=O[0],R=O[1],T=O[2],A=(0,l.epochSecondAndNanoToLocalDateTime)(P,R);return y(new a.DateTime(A.year,A.month,A.day,A.hour,A.minute,A.second,A.nanosecond,null,T),b,p)}})},createDateTimeWithOffsetTransformer:function(w){var b=w.disableLosslessIntegers,p=w.useBigInt;return new u.TypeTransformer({signature:70,isTypeInstance:function(_){return(0,a.isDateTime)(_)&&_.timeZoneId==null},toStructure:function(_){var O=d(_.year,_.month,_.day,_.hour,_.minute,_.second,_.nanosecond),P=(0,a.int)(_.nanosecond),R=(0,a.int)(_.timeZoneOffsetSeconds);return new s.structure.Structure(70,[O,P,R])},fromStructure:function(_){s.structure.verifyStructSize("DateTimeWithZoneOffset",3,_.size);var O=i(_.fields,3),P=O[0],R=O[1],T=O[2],A=(0,l.epochSecondAndNanoToLocalDateTime)(P,R);return y(new a.DateTime(A.year,A.month,A.day,A.hour,A.minute,A.second,A.nanosecond,T,null),b,p)}})}})},5642:function(r,e,t){var n,i=this&&this.__extends||(n=function(O,P){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,T){R.__proto__=T}||function(R,T){for(var A in T)Object.prototype.hasOwnProperty.call(T,A)&&(R[A]=T[A])},n(O,P)},function(O,P){if(typeof P!="function"&&P!==null)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function R(){this.constructor=O}n(O,P),O.prototype=P===null?Object.create(P):(R.prototype=P.prototype,new R)}),o=this&&this.__assign||function(){return o=Object.assign||function(O){for(var P,R=1,T=arguments.length;R<T;R++)for(var A in P=arguments[R])Object.prototype.hasOwnProperty.call(P,A)&&(O[A]=P[A]);return O},o.apply(this,arguments)},a=this&&this.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(e,"__esModule",{value:!0});var s=a(t(2857)),u=a(t(7021)),l=t(397),c=t(9014),f=a(t(1175)),h=a(t(3321)),d=t(9305),v=(d.internal.bookmarks.Bookmarks,d.internal.constants.BOLT_PROTOCOL_V3),y=d.internal.txConfig.TxConfig,w="context",b="CALL dbms.cluster.routing.getRoutingTable($".concat(w,")"),p=new c.StreamObserver,_=function(O){function P(){return O!==null&&O.apply(this,arguments)||this}return i(P,O),Object.defineProperty(P.prototype,"version",{get:function(){return v},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"transformer",{get:function(){var R=this;return this._transformer===void 0&&(this._transformer=new h.default(Object.values(f.default).map(function(T){return T(R._config,R._log)}))),this._transformer},enumerable:!1,configurable:!0}),P.prototype.transformMetadata=function(R){return"t_first"in R&&(R.result_available_after=R.t_first,delete R.t_first),"t_last"in R&&(R.result_consumed_after=R.t_last,delete R.t_last),R},P.prototype.initialize=function(R){var T=this,A=R===void 0?{}:R,M=A.userAgent,N=(A.boltAgent,A.authToken),j=A.notificationFilter,B=A.onError,q=A.onComplete,W=new c.LoginObserver({onError:function(J){return T._onLoginError(J,B)},onCompleted:function(J){return T._onLoginCompleted(J,N,q)}});return(0,l.assertNotificationFilterIsEmpty)(j,this._onProtocolError,W),this.write(u.default.hello(M,N),W,!0),W},P.prototype.prepareToClose=function(){this.write(u.default.goodbye(),p,!0)},P.prototype.beginTransaction=function(R){var T=R===void 0?{}:R,A=T.bookmarks,M=T.txConfig,N=T.database,j=T.impersonatedUser,B=T.notificationFilter,q=T.mode,W=T.beforeError,J=T.afterError,te=T.beforeComplete,re=T.afterComplete,ee=new c.ResultStreamObserver({server:this._server,beforeError:W,afterError:J,beforeComplete:te,afterComplete:re});return ee.prepareToHandleSingleResponse(),(0,l.assertDatabaseIsEmpty)(N,this._onProtocolError,ee),(0,l.assertImpersonatedUserIsEmpty)(j,this._onProtocolError,ee),(0,l.assertNotificationFilterIsEmpty)(B,this._onProtocolError,ee),this.write(u.default.begin({bookmarks:A,txConfig:M,mode:q}),ee,!0),ee},P.prototype.commitTransaction=function(R){var T=R===void 0?{}:R,A=T.beforeError,M=T.afterError,N=T.beforeComplete,j=T.afterComplete,B=new c.ResultStreamObserver({server:this._server,beforeError:A,afterError:M,beforeComplete:N,afterComplete:j});return B.prepareToHandleSingleResponse(),this.write(u.default.commit(),B,!0),B},P.prototype.rollbackTransaction=function(R){var T=R===void 0?{}:R,A=T.beforeError,M=T.afterError,N=T.beforeComplete,j=T.afterComplete,B=new c.ResultStreamObserver({server:this._server,beforeError:A,afterError:M,beforeComplete:N,afterComplete:j});return B.prepareToHandleSingleResponse(),this.write(u.default.rollback(),B,!0),B},P.prototype.run=function(R,T,A){var M=A===void 0?{}:A,N=M.bookmarks,j=M.txConfig,B=M.database,q=M.impersonatedUser,W=M.notificationFilter,J=M.mode,te=M.beforeKeys,re=M.afterKeys,ee=M.beforeError,fe=M.afterError,he=M.beforeComplete,se=M.afterComplete,me=M.flush,De=me===void 0||me,Le=M.highRecordWatermark,Ie=Le===void 0?Number.MAX_VALUE:Le,qe=M.lowRecordWatermark,Ge=qe===void 0?Number.MAX_VALUE:qe,Me=new c.ResultStreamObserver({server:this._server,beforeKeys:te,afterKeys:re,beforeError:ee,afterError:fe,beforeComplete:he,afterComplete:se,highRecordWatermark:Ie,lowRecordWatermark:Ge});return(0,l.assertDatabaseIsEmpty)(B,this._onProtocolError,Me),(0,l.assertImpersonatedUserIsEmpty)(q,this._onProtocolError,Me),(0,l.assertNotificationFilterIsEmpty)(W,this._onProtocolError,Me),this.write(u.default.runWithMetadata(R,T,{bookmarks:N,txConfig:j,mode:J}),Me,!1),this.write(u.default.pullAll(),Me,De),Me},P.prototype.requestRoutingInformation=function(R){var T,A=R.routingContext,M=A===void 0?{}:A,N=R.sessionContext,j=N===void 0?{}:N,B=R.onError,q=R.onCompleted,W=this.run(b,((T={})[w]=M,T),o(o({},j),{txConfig:y.empty()}));return new c.ProcedureRouteObserver({resultObserver:W,onProtocolError:this._onProtocolError,onError:B,onCompleted:q})},P}(s.default);e.default=_},1175:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(3448));e.default=n({},o.default)},2539:function(r,e,t){var n,i=this&&this.__extends||(n=function(R,T){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,M){A.__proto__=M}||function(A,M){for(var N in M)Object.prototype.hasOwnProperty.call(M,N)&&(A[N]=M[N])},n(R,T)},function(R,T){if(typeof T!="function"&&T!==null)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");function A(){this.constructor=R}n(R,T),R.prototype=T===null?Object.create(T):(A.prototype=T.prototype,new A)}),o=this&&this.__assign||function(){return o=Object.assign||function(R){for(var T,A=1,M=arguments.length;A<M;A++)for(var N in T=arguments[A])Object.prototype.hasOwnProperty.call(T,N)&&(R[N]=T[N]);return R},o.apply(this,arguments)},a=this&&this.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(e,"__esModule",{value:!0});var s=a(t(5642)),u=a(t(7021)),l=t(397),c=t(9014),f=a(t(2066)),h=a(t(3321)),d=t(9305),v=(d.internal.bookmarks.Bookmarks,d.internal.constants),y=v.BOLT_PROTOCOL_V4_0,w=v.FETCH_ALL,b=d.internal.txConfig.TxConfig,p="context",_="database",O="CALL dbms.routing.getRoutingTable($".concat(p,", $").concat(_,")"),P=function(R){function T(){return R!==null&&R.apply(this,arguments)||this}return i(T,R),Object.defineProperty(T.prototype,"version",{get:function(){return y},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"transformer",{get:function(){var A=this;return this._transformer===void 0&&(this._transformer=new h.default(Object.values(f.default).map(function(M){return M(A._config,A._log)}))),this._transformer},enumerable:!1,configurable:!0}),T.prototype.beginTransaction=function(A){var M=A===void 0?{}:A,N=M.bookmarks,j=M.txConfig,B=M.database,q=M.impersonatedUser,W=M.notificationFilter,J=M.mode,te=M.beforeError,re=M.afterError,ee=M.beforeComplete,fe=M.afterComplete,he=new c.ResultStreamObserver({server:this._server,beforeError:te,afterError:re,beforeComplete:ee,afterComplete:fe});return he.prepareToHandleSingleResponse(),(0,l.assertImpersonatedUserIsEmpty)(q,this._onProtocolError,he),(0,l.assertNotificationFilterIsEmpty)(W,this._onProtocolError,he),this.write(u.default.begin({bookmarks:N,txConfig:j,database:B,mode:J}),he,!0),he},T.prototype.run=function(A,M,N){var j=N===void 0?{}:N,B=j.bookmarks,q=j.txConfig,W=j.database,J=j.impersonatedUser,te=j.notificationFilter,re=j.mode,ee=j.beforeKeys,fe=j.afterKeys,he=j.beforeError,se=j.afterError,me=j.beforeComplete,De=j.afterComplete,Le=j.flush,Ie=Le===void 0||Le,qe=j.reactive,Ge=qe!==void 0&&qe,Me=j.fetchSize,Pe=Me===void 0?w:Me,de=j.highRecordWatermark,Oe=de===void 0?Number.MAX_VALUE:de,Ae=j.lowRecordWatermark,Ve=Ae===void 0?Number.MAX_VALUE:Ae,tt=new c.ResultStreamObserver({server:this._server,reactive:Ge,fetchSize:Pe,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:ee,afterKeys:fe,beforeError:he,afterError:se,beforeComplete:me,afterComplete:De,highRecordWatermark:Oe,lowRecordWatermark:Ve});(0,l.assertImpersonatedUserIsEmpty)(J,this._onProtocolError,tt),(0,l.assertNotificationFilterIsEmpty)(te,this._onProtocolError,tt);var ht=Ge;return this.write(u.default.runWithMetadata(A,M,{bookmarks:B,txConfig:q,database:W,mode:re}),tt,ht&&Ie),Ge||this.write(u.default.pull({n:Pe}),tt,Ie),tt},T.prototype._requestMore=function(A,M,N){this.write(u.default.pull({stmtId:A,n:M}),N,!0)},T.prototype._requestDiscard=function(A,M){this.write(u.default.discard({stmtId:A}),M,!0)},T.prototype._noOp=function(){},T.prototype.requestRoutingInformation=function(A){var M,N=A.routingContext,j=N===void 0?{}:N,B=A.databaseName,q=B===void 0?null:B,W=A.sessionContext,J=W===void 0?{}:W,te=A.onError,re=A.onCompleted,ee=this.run(O,((M={})[p]=j,M[_]=q,M),o(o({},J),{txConfig:b.empty()}));return new c.ProcedureRouteObserver({resultObserver:ee,onProtocolError:this._onProtocolError,onError:te,onCompleted:re})},T}(s.default);e.default=P},2066:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(1175));e.default=n({},o.default)},4596:function(r,e,t){var n,i=this&&this.__extends||(n=function(y,w){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,p){b.__proto__=p}||function(b,p){for(var _ in p)Object.prototype.hasOwnProperty.call(p,_)&&(b[_]=p[_])},n(y,w)},function(y,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function b(){this.constructor=y}n(y,w),y.prototype=w===null?Object.create(w):(b.prototype=w.prototype,new b)}),o=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(t(2539)),s=o(t(7021)),u=t(9014),l=t(9305),c=t(397),f=o(t(7521)),h=o(t(3321)),d=l.internal.constants.BOLT_PROTOCOL_V4_1,v=function(y){function w(b,p,_,O,P,R,T){O===void 0&&(O=function(){return null});var A=y.call(this,b,p,_,O,P,R)||this;return A._serversideRouting=T,A}return i(w,y),Object.defineProperty(w.prototype,"version",{get:function(){return d},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"transformer",{get:function(){var b=this;return this._transformer===void 0&&(this._transformer=new h.default(Object.values(f.default).map(function(p){return p(b._config,b._log)}))),this._transformer},enumerable:!1,configurable:!0}),w.prototype.initialize=function(b){var p=this,_=b===void 0?{}:b,O=_.userAgent,P=(_.boltAgent,_.authToken),R=_.notificationFilter,T=_.onError,A=_.onComplete,M=new u.LoginObserver({onError:function(N){return p._onLoginError(N,T)},onCompleted:function(N){return p._onLoginCompleted(N,P,A)}});return(0,c.assertNotificationFilterIsEmpty)(R,this._onProtocolError,M),this.write(s.default.hello(O,P,this._serversideRouting),M,!0),M},w}(a.default);e.default=v},7521:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(2066));e.default=n({},o.default)},6445:function(r,e,t){var n,i=this&&this.__extends||(n=function(h,d){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,y){v.__proto__=y}||function(v,y){for(var w in y)Object.prototype.hasOwnProperty.call(y,w)&&(v[w]=y[w])},n(h,d)},function(h,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function v(){this.constructor=h}n(h,d),h.prototype=d===null?Object.create(d):(v.prototype=d.prototype,new v)}),o=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(t(4596)),s=t(9305),u=o(t(5348)),l=o(t(3321)),c=s.internal.constants.BOLT_PROTOCOL_V4_2,f=function(h){function d(){return h!==null&&h.apply(this,arguments)||this}return i(d,h),Object.defineProperty(d.prototype,"version",{get:function(){return c},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"transformer",{get:function(){var v=this;return this._transformer===void 0&&(this._transformer=new l.default(Object.values(u.default).map(function(y){return y(v._config,v._log)}))),this._transformer},enumerable:!1,configurable:!0}),d}(a.default);e.default=f},5348:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(7521));e.default=n({},o.default)},9054:function(r,e,t){var n,i=this&&this.__extends||(n=function(p,_){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,P){O.__proto__=P}||function(O,P){for(var R in P)Object.prototype.hasOwnProperty.call(P,R)&&(O[R]=P[R])},n(p,_)},function(p,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function O(){this.constructor=p}n(p,_),p.prototype=_===null?Object.create(_):(O.prototype=_.prototype,new O)}),o=this&&this.__assign||function(){return o=Object.assign||function(p){for(var _,O=1,P=arguments.length;O<P;O++)for(var R in _=arguments[O])Object.prototype.hasOwnProperty.call(_,R)&&(p[R]=_[R]);return p},o.apply(this,arguments)},a=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(e,"__esModule",{value:!0});var s=a(t(6445)),u=a(t(7021)),l=t(9014),c=t(397),f=a(t(7331)),h=a(t(5045)),d=a(t(3321)),v=t(9305),y=v.internal.bookmarks.Bookmarks,w=v.internal.constants.BOLT_PROTOCOL_V4_3,b=function(p){function _(){return p!==null&&p.apply(this,arguments)||this}return i(_,p),Object.defineProperty(_.prototype,"version",{get:function(){return w},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"transformer",{get:function(){var O=this;return this._transformer===void 0&&(this._transformer=new d.default(Object.values(f.default).map(function(P){return P(O._config,O._log)}))),this._transformer},enumerable:!1,configurable:!0}),_.prototype.requestRoutingInformation=function(O){var P=O.routingContext,R=P===void 0?{}:P,T=O.databaseName,A=T===void 0?null:T,M=O.sessionContext,N=M===void 0?{}:M,j=O.onError,B=O.onCompleted,q=new l.RouteObserver({onProtocolError:this._onProtocolError,onError:j,onCompleted:B}),W=N.bookmarks||y.empty();return this.write(u.default.route(R,W.values(),A),q,!0),q},_.prototype.initialize=function(O){var P=this,R=O===void 0?{}:O,T=R.userAgent,A=(R.boltAgent,R.authToken),M=R.notificationFilter,N=R.onError,j=R.onComplete,B=new l.LoginObserver({onError:function(q){return P._onLoginError(q,N)},onCompleted:function(q){return q.patch_bolt!==void 0&&P._applyPatches(q.patch_bolt),P._onLoginCompleted(q,A,j)}});return(0,c.assertNotificationFilterIsEmpty)(M,this._onProtocolError,B),this.write(u.default.hello(T,A,this._serversideRouting,["utc"]),B,!0),B},_.prototype._applyPatches=function(O){O.includes("utc")&&this._applyUtcPatch()},_.prototype._applyUtcPatch=function(){var O=this;this._transformer=new d.default(Object.values(o(o({},f.default),h.default)).map(function(P){return P(O._config,O._log)}))},_}(s.default);e.default=b},7331:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(5348));e.default=n({},o.default)},1711:function(r,e,t){var n,i=this&&this.__extends||(n=function(O,P){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,T){R.__proto__=T}||function(R,T){for(var A in T)Object.prototype.hasOwnProperty.call(T,A)&&(R[A]=T[A])},n(O,P)},function(O,P){if(typeof P!="function"&&P!==null)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function R(){this.constructor=O}n(O,P),O.prototype=P===null?Object.create(P):(R.prototype=P.prototype,new R)}),o=this&&this.__assign||function(){return o=Object.assign||function(O){for(var P,R=1,T=arguments.length;R<T;R++)for(var A in P=arguments[R])Object.prototype.hasOwnProperty.call(P,A)&&(O[A]=P[A]);return O},o.apply(this,arguments)},a=this&&this.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(e,"__esModule",{value:!0});var s=a(t(9054)),u=t(9305),l=a(t(7021)),c=t(9014),f=t(397),h=a(t(7518)),d=a(t(5045)),v=a(t(3321)),y=u.internal.constants,w=y.BOLT_PROTOCOL_V4_4,b=y.FETCH_ALL,p=u.internal.bookmarks.Bookmarks,_=function(O){function P(){return O!==null&&O.apply(this,arguments)||this}return i(P,O),Object.defineProperty(P.prototype,"version",{get:function(){return w},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"transformer",{get:function(){var R=this;return this._transformer===void 0&&(this._transformer=new v.default(Object.values(h.default).map(function(T){return T(R._config,R._log)}))),this._transformer},enumerable:!1,configurable:!0}),P.prototype.requestRoutingInformation=function(R){var T=R.routingContext,A=T===void 0?{}:T,M=R.databaseName,N=M===void 0?null:M,j=R.impersonatedUser,B=j===void 0?null:j,q=R.sessionContext,W=q===void 0?{}:q,J=R.onError,te=R.onCompleted,re=new c.RouteObserver({onProtocolError:this._onProtocolError,onError:J,onCompleted:te}),ee=W.bookmarks||p.empty();return this.write(l.default.routeV4x4(A,ee.values(),{databaseName:N,impersonatedUser:B}),re,!0),re},P.prototype.run=function(R,T,A){var M=A===void 0?{}:A,N=M.bookmarks,j=M.txConfig,B=M.database,q=M.mode,W=M.impersonatedUser,J=M.notificationFilter,te=M.beforeKeys,re=M.afterKeys,ee=M.beforeError,fe=M.afterError,he=M.beforeComplete,se=M.afterComplete,me=M.flush,De=me===void 0||me,Le=M.reactive,Ie=Le!==void 0&&Le,qe=M.fetchSize,Ge=qe===void 0?b:qe,Me=M.highRecordWatermark,Pe=Me===void 0?Number.MAX_VALUE:Me,de=M.lowRecordWatermark,Oe=de===void 0?Number.MAX_VALUE:de,Ae=new c.ResultStreamObserver({server:this._server,reactive:Ie,fetchSize:Ge,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:te,afterKeys:re,beforeError:ee,afterError:fe,beforeComplete:he,afterComplete:se,highRecordWatermark:Pe,lowRecordWatermark:Oe});(0,f.assertNotificationFilterIsEmpty)(J,this._onProtocolError,Ae);var Ve=Ie;return this.write(l.default.runWithMetadata(R,T,{bookmarks:N,txConfig:j,database:B,mode:q,impersonatedUser:W}),Ae,Ve&&De),Ie||this.write(l.default.pull({n:Ge}),Ae,De),Ae},P.prototype.beginTransaction=function(R){var T=R===void 0?{}:R,A=T.bookmarks,M=T.txConfig,N=T.database,j=T.mode,B=T.impersonatedUser,q=T.notificationFilter,W=T.beforeError,J=T.afterError,te=T.beforeComplete,re=T.afterComplete,ee=new c.ResultStreamObserver({server:this._server,beforeError:W,afterError:J,beforeComplete:te,afterComplete:re});return ee.prepareToHandleSingleResponse(),(0,f.assertNotificationFilterIsEmpty)(q,this._onProtocolError,ee),this.write(l.default.begin({bookmarks:A,txConfig:M,database:N,mode:j,impersonatedUser:B}),ee,!0),ee},P.prototype._applyUtcPatch=function(){var R=this;this._transformer=new v.default(Object.values(o(o({},h.default),d.default)).map(function(T){return T(R._config,R._log)}))},P}(s.default);e.default=_},7518:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(7331));e.default=n({},o.default)},844:function(r,e,t){var n,i=this&&this.__extends||(n=function(v,y){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,b){w.__proto__=b}||function(w,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(w[p]=b[p])},n(v,y)},function(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function w(){this.constructor=v}n(v,y),v.prototype=y===null?Object.create(y):(w.prototype=y.prototype,new w)}),o=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(t(1711)),s=t(397),u=o(t(7449)),l=o(t(3321)),c=o(t(7021)),f=t(9014),h=t(9305).internal.constants.BOLT_PROTOCOL_V5_0,d=function(v){function y(){return v!==null&&v.apply(this,arguments)||this}return i(y,v),Object.defineProperty(y.prototype,"version",{get:function(){return h},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"transformer",{get:function(){var w=this;return this._transformer===void 0&&(this._transformer=new l.default(Object.values(u.default).map(function(b){return b(w._config,w._log)}))),this._transformer},enumerable:!1,configurable:!0}),y.prototype.initialize=function(w){var b=this,p=w===void 0?{}:w,_=p.userAgent,O=(p.boltAgent,p.authToken),P=p.notificationFilter,R=p.onError,T=p.onComplete,A=new f.LoginObserver({onError:function(M){return b._onLoginError(M,R)},onCompleted:function(M){return b._onLoginCompleted(M,O,T)}});return(0,s.assertNotificationFilterIsEmpty)(P,this._onProtocolError,A),this.write(c.default.hello(_,O,this._serversideRouting),A,!0),A},y}(a.default);e.default=d},7449:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(c){for(var f,h=1,d=arguments.length;h<d;h++)for(var v in f=arguments[h])Object.prototype.hasOwnProperty.call(f,v)&&(c[v]=f[v]);return c},n.apply(this,arguments)},i=this&&this.__read||function(c,f){var h=typeof Symbol=="function"&&c[Symbol.iterator];if(!h)return c;var d,v,y=h.call(c),w=[];try{for(;(f===void 0||f-- >0)&&!(d=y.next()).done;)w.push(d.value)}catch(b){v={error:b}}finally{try{d&&!d.done&&(h=y.return)&&h.call(y)}finally{if(v)throw v.error}}return w},o=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0});var a=t(7168),s=t(9305),u=o(t(7518)),l=o(t(5045));e.default=n(n(n({},u.default),l.default),{createNodeTransformer:function(c){return u.default.createNodeTransformer(c).extendsWith({fromStructure:function(f){a.structure.verifyStructSize("Node",4,f.size);var h=i(f.fields,4),d=h[0],v=h[1],y=h[2],w=h[3];return new s.Node(d,v,y,w)}})},createRelationshipTransformer:function(c){return u.default.createRelationshipTransformer(c).extendsWith({fromStructure:function(f){a.structure.verifyStructSize("Relationship",8,f.size);var h=i(f.fields,8),d=h[0],v=h[1],y=h[2],w=h[3],b=h[4],p=h[5],_=h[6],O=h[7];return new s.Relationship(d,v,y,w,b,p,_,O)}})},createUnboundRelationshipTransformer:function(c){return u.default.createUnboundRelationshipTransformer(c).extendsWith({fromStructure:function(f){a.structure.verifyStructSize("UnboundRelationship",4,f.size);var h=i(f.fields,4),d=h[0],v=h[1],y=h[2],w=h[3];return new s.UnboundRelationship(d,v,y,w)}})}})},5045:function(r,e,t){var n=this&&this.__read||function(v,y){var w=typeof Symbol=="function"&&v[Symbol.iterator];if(!w)return v;var b,p,_=w.call(v),O=[];try{for(;(y===void 0||y-- >0)&&!(b=_.next()).done;)O.push(b.value)}catch(P){p={error:P}}finally{try{b&&!b.done&&(w=_.return)&&w.call(_)}finally{if(p)throw p.error}}return O},i=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(e,"__esModule",{value:!0});var o=t(7168),a=t(9305),s=i(t(7518)),u=t(5973),l=t(6492),c=a.internal.temporalUtil.localDateTimeToEpochSecond,f=new Map;function h(v,y,w){var b=function(P){if(!f.has(P)){var R=new Intl.DateTimeFormat("en-US",{timeZone:P,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1,era:"narrow"});f.set(P,R)}return f.get(P)}(v),p=(0,a.int)(y).multiply(1e3).add((0,a.int)(w).div(1e6)).toNumber(),_=b.formatToParts(p).reduce(function(P,R){return R.type==="era"?P.adjustEra=R.value.toUpperCase()==="B"?function(T){return T.subtract(1).negate()}:l.identity:R.type==="hour"?P.hour=(0,a.int)(R.value).modulo(24):R.type!=="literal"&&(P[R.type]=(0,a.int)(R.value)),P},{});_.year=_.adjustEra(_.year);var O=c(_.year,_.month,_.day,_.hour,_.minute,_.second,_.nanosecond);return _.timeZoneOffsetSeconds=O.subtract(y),_.hour=_.hour.modulo(24),_}function d(v,y,w){if(!y&&!w)return v;var b=function(P){return w?P.toBigInt():P.toNumberOrInfinity()},p=Object.create(Object.getPrototypeOf(v));for(var _ in v)if(Object.prototype.hasOwnProperty.call(v,_)===!0){var O=v[_];p[_]=(0,a.isInt)(O)?b(O):O}return Object.freeze(p),p}e.default={createDateTimeWithZoneIdTransformer:function(v,y){var w=v.disableLosslessIntegers,b=v.useBigInt;return s.default.createDateTimeWithZoneIdTransformer(v).extendsWith({signature:105,fromStructure:function(p){o.structure.verifyStructSize("DateTimeWithZoneId",3,p.size);var _=n(p.fields,3),O=_[0],P=_[1],R=_[2],T=h(R,O,P);return d(new a.DateTime(T.year,T.month,T.day,T.hour,T.minute,T.second,(0,a.int)(P),T.timeZoneOffsetSeconds,R),w,b)},toStructure:function(p){var _=c(p.year,p.month,p.day,p.hour,p.minute,p.second,p.nanosecond),O=p.timeZoneOffsetSeconds!=null?p.timeZoneOffsetSeconds:function(A,M,N){var j=h(A,M,N),B=c(j.year,j.month,j.day,j.hour,j.minute,j.second,N).subtract(M),q=M.subtract(B),W=h(A,q,N);return c(W.year,W.month,W.day,W.hour,W.minute,W.second,N).subtract(q)}(p.timeZoneId,_,p.nanosecond);p.timeZoneOffsetSeconds==null&&y.warn('DateTime objects without "timeZoneOffsetSeconds" property are prune to bugs related to ambiguous times. For instance, 2022-10-30T2:30:00[Europe/Berlin] could be GMT+1 or GMT+2.');var P=_.subtract(O),R=(0,a.int)(p.nanosecond),T=p.timeZoneId;return new o.structure.Structure(105,[P,R,T])}})},createDateTimeWithOffsetTransformer:function(v){var y=v.disableLosslessIntegers,w=v.useBigInt;return s.default.createDateTimeWithOffsetTransformer(v).extendsWith({signature:73,toStructure:function(b){var p=c(b.year,b.month,b.day,b.hour,b.minute,b.second,b.nanosecond),_=(0,a.int)(b.nanosecond),O=(0,a.int)(b.timeZoneOffsetSeconds),P=p.subtract(O);return new o.structure.Structure(73,[P,_,O])},fromStructure:function(b){o.structure.verifyStructSize("DateTimeWithZoneOffset",3,b.size);var p=n(b.fields,3),_=p[0],O=p[1],P=p[2],R=(0,a.int)(_).add(P),T=(0,u.epochSecondAndNanoToLocalDateTime)(R,O);return d(new a.DateTime(T.year,T.month,T.day,T.hour,T.minute,T.second,T.nanosecond,P,null),y,w)}})}}},6345:function(r,e,t){var n,i=this&&this.__extends||(n=function(y,w){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,p){b.__proto__=p}||function(b,p){for(var _ in p)Object.prototype.hasOwnProperty.call(p,_)&&(b[_]=p[_])},n(y,w)},function(y,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function b(){this.constructor=y}n(y,w),y.prototype=w===null?Object.create(w):(b.prototype=w.prototype,new b)}),o=this&&this.__assign||function(){return o=Object.assign||function(y){for(var w,b=1,p=arguments.length;b<p;b++)for(var _ in w=arguments[b])Object.prototype.hasOwnProperty.call(w,_)&&(y[_]=w[_]);return y},o.apply(this,arguments)},a=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(e,"__esModule",{value:!0});var s=a(t(844)),u=t(397),l=a(t(9994)),c=a(t(3321)),f=a(t(7021)),h=t(9014),d=t(9305).internal.constants.BOLT_PROTOCOL_V5_1,v=function(y){function w(){return y!==null&&y.apply(this,arguments)||this}return i(w,y),Object.defineProperty(w.prototype,"version",{get:function(){return d},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"transformer",{get:function(){var b=this;return this._transformer===void 0&&(this._transformer=new c.default(Object.values(l.default).map(function(p){return p(b._config,b._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"supportsReAuth",{get:function(){return!0},enumerable:!1,configurable:!0}),w.prototype.initialize=function(b){var p=this,_=b===void 0?{}:b,O=_.userAgent,P=(_.boltAgent,_.authToken),R=_.notificationFilter,T=_.onError,A=_.onComplete,M={},N=new h.LoginObserver({onError:function(j){return p._onLoginError(j,T)},onCompleted:function(j){return M.metadata=j,p._onLoginCompleted(j)}});return(0,u.assertNotificationFilterIsEmpty)(R,this._onProtocolError,N),this.write(f.default.hello5x1(O,this._serversideRouting),N,!1),this.logon({authToken:P,onComplete:function(j){return A(o(o({},j),M.metadata))},onError:T,flush:!0})},w.prototype.logon=function(b){var p=this,_=b===void 0?{}:b,O=_.authToken,P=_.onComplete,R=_.onError,T=_.flush,A=new h.LoginObserver({onCompleted:function(){return p._onLoginCompleted(null,O,P)},onError:function(M){return p._onLoginError(M,R)}});return this.write(f.default.logon(O),A,T),A},w.prototype.logoff=function(b){var p=b===void 0?{}:b,_=p.onComplete,O=p.onError,P=p.flush,R=new h.LogoffObserver({onCompleted:_,onError:O});return this.write(f.default.logoff(),R,P),R},w}(s.default);e.default=v},9994:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(7449));e.default=n({},o.default)},934:function(r,e,t){var n,i=this&&this.__extends||(n=function(w,b){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,_){p.__proto__=_}||function(p,_){for(var O in _)Object.prototype.hasOwnProperty.call(_,O)&&(p[O]=_[O])},n(w,b)},function(w,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function p(){this.constructor=w}n(w,b),w.prototype=b===null?Object.create(b):(p.prototype=b.prototype,new p)}),o=this&&this.__assign||function(){return o=Object.assign||function(w){for(var b,p=1,_=arguments.length;p<_;p++)for(var O in b=arguments[p])Object.prototype.hasOwnProperty.call(b,O)&&(w[O]=b[O]);return w},o.apply(this,arguments)},a=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(e,"__esModule",{value:!0});var s=a(t(6345)),u=a(t(3019)),l=a(t(3321)),c=a(t(7021)),f=t(9014),h=t(9305).internal.constants,d=h.BOLT_PROTOCOL_V5_2,v=h.FETCH_ALL,y=function(w){function b(){return w!==null&&w.apply(this,arguments)||this}return i(b,w),Object.defineProperty(b.prototype,"version",{get:function(){return d},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"transformer",{get:function(){var p=this;return this._transformer===void 0&&(this._transformer=new l.default(Object.values(u.default).map(function(_){return _(p._config,p._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"supportsReAuth",{get:function(){return!0},enumerable:!1,configurable:!0}),b.prototype.initialize=function(p){var _=this,O=p===void 0?{}:p,P=O.userAgent,R=(O.boltAgent,O.authToken),T=O.notificationFilter,A=O.onError,M=O.onComplete,N={},j=new f.LoginObserver({onError:function(B){return _._onLoginError(B,A)},onCompleted:function(B){return N.metadata=B,_._onLoginCompleted(B)}});return this.write(c.default.hello5x2(P,T,this._serversideRouting),j,!1),this.logon({authToken:R,onComplete:function(B){return M(o(o({},B),N.metadata))},onError:A,flush:!0})},b.prototype.beginTransaction=function(p){var _=p===void 0?{}:p,O=_.bookmarks,P=_.txConfig,R=_.database,T=_.mode,A=_.impersonatedUser,M=_.notificationFilter,N=_.beforeError,j=_.afterError,B=_.beforeComplete,q=_.afterComplete,W=new f.ResultStreamObserver({server:this._server,beforeError:N,afterError:j,beforeComplete:B,afterComplete:q});return W.prepareToHandleSingleResponse(),this.write(c.default.begin({bookmarks:O,txConfig:P,database:R,mode:T,impersonatedUser:A,notificationFilter:M}),W,!0),W},b.prototype.run=function(p,_,O){var P=O===void 0?{}:O,R=P.bookmarks,T=P.txConfig,A=P.database,M=P.mode,N=P.impersonatedUser,j=P.notificationFilter,B=P.beforeKeys,q=P.afterKeys,W=P.beforeError,J=P.afterError,te=P.beforeComplete,re=P.afterComplete,ee=P.flush,fe=ee===void 0||ee,he=P.reactive,se=he!==void 0&&he,me=P.fetchSize,De=me===void 0?v:me,Le=P.highRecordWatermark,Ie=Le===void 0?Number.MAX_VALUE:Le,qe=P.lowRecordWatermark,Ge=qe===void 0?Number.MAX_VALUE:qe,Me=new f.ResultStreamObserver({server:this._server,reactive:se,fetchSize:De,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:B,afterKeys:q,beforeError:W,afterError:J,beforeComplete:te,afterComplete:re,highRecordWatermark:Ie,lowRecordWatermark:Ge}),Pe=se;return this.write(c.default.runWithMetadata(p,_,{bookmarks:R,txConfig:T,database:A,mode:M,impersonatedUser:N,notificationFilter:j}),Me,Pe&&fe),se||this.write(c.default.pull({n:De}),Me,fe),Me},b}(s.default);e.default=y},3019:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(9994));e.default=n({},o.default)},9125:function(r,e,t){var n,i=this&&this.__extends||(n=function(v,y){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,b){w.__proto__=b}||function(w,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(w[p]=b[p])},n(v,y)},function(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function w(){this.constructor=v}n(v,y),v.prototype=y===null?Object.create(y):(w.prototype=y.prototype,new w)}),o=this&&this.__assign||function(){return o=Object.assign||function(v){for(var y,w=1,b=arguments.length;w<b;w++)for(var p in y=arguments[w])Object.prototype.hasOwnProperty.call(y,p)&&(v[p]=y[p]);return v},o.apply(this,arguments)},a=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(e,"__esModule",{value:!0});var s=a(t(934)),u=a(t(2204)),l=a(t(3321)),c=a(t(7021)),f=t(9014),h=t(9305).internal.constants.BOLT_PROTOCOL_V5_3,d=function(v){function y(){return v!==null&&v.apply(this,arguments)||this}return i(y,v),Object.defineProperty(y.prototype,"version",{get:function(){return h},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"transformer",{get:function(){var w=this;return this._transformer===void 0&&(this._transformer=new l.default(Object.values(u.default).map(function(b){return b(w._config,w._log)}))),this._transformer},enumerable:!1,configurable:!0}),y.prototype.initialize=function(w){var b=this,p=w===void 0?{}:w,_=p.userAgent,O=p.boltAgent,P=p.authToken,R=p.notificationFilter,T=p.onError,A=p.onComplete,M={},N=new f.LoginObserver({onError:function(j){return b._onLoginError(j,T)},onCompleted:function(j){return M.metadata=j,b._onLoginCompleted(j)}});return this.write(c.default.hello5x3(_,O,R,this._serversideRouting),N,!1),this.logon({authToken:P,onComplete:function(j){return A(o(o({},j),M.metadata))},onError:T,flush:!0})},y}(s.default);e.default=d},2204:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(3019));e.default=n({},o.default)},9744:function(r,e,t){var n,i=this&&this.__extends||(n=function(d,v){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,w){y.__proto__=w}||function(y,w){for(var b in w)Object.prototype.hasOwnProperty.call(w,b)&&(y[b]=w[b])},n(d,v)},function(d,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function y(){this.constructor=d}n(d,v),d.prototype=v===null?Object.create(v):(y.prototype=v.prototype,new y)}),o=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(t(9125)),s=o(t(4325)),u=o(t(7021)),l=t(9014),c=o(t(3321)),f=t(9305).internal.constants.BOLT_PROTOCOL_V5_4,h=function(d){function v(){return d!==null&&d.apply(this,arguments)||this}return i(v,d),Object.defineProperty(v.prototype,"version",{get:function(){return f},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"transformer",{get:function(){var y=this;return this._transformer===void 0&&(this._transformer=new c.default(Object.values(s.default).map(function(w){return w(y._config,y._log)}))),this._transformer},enumerable:!1,configurable:!0}),v.prototype.telemetry=function(y,w){var b=y.api,p=w===void 0?{}:w,_=p.onError,O=p.onCompleted,P=new l.TelemetryObserver({onCompleted:O,onError:_});return this.write(u.default.telemetry({api:b}),P,!1),P},v}(a.default);e.default=h},4325:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(2204));e.default=n({},o.default)},5815:function(r,e,t){var n,i=this&&this.__extends||(n=function(b,p){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,O){_.__proto__=O}||function(_,O){for(var P in O)Object.prototype.hasOwnProperty.call(O,P)&&(_[P]=O[P])},n(b,p)},function(b,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");function _(){this.constructor=b}n(b,p),b.prototype=p===null?Object.create(p):(_.prototype=p.prototype,new _)}),o=this&&this.__assign||function(){return o=Object.assign||function(b){for(var p,_=1,O=arguments.length;_<O;_++)for(var P in p=arguments[_])Object.prototype.hasOwnProperty.call(p,P)&&(b[P]=p[P]);return b},o.apply(this,arguments)},a=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(e,"__esModule",{value:!0});var s=a(t(9744)),u=a(t(9238)),l=a(t(3321)),c=a(t(7021)),f=t(9014),h=t(9305).internal.constants,d=h.BOLT_PROTOCOL_V5_5,v=h.FETCH_ALL,y=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),w=function(b){function p(){return b!==null&&b.apply(this,arguments)||this}return i(p,b),Object.defineProperty(p.prototype,"version",{get:function(){return d},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"transformer",{get:function(){var _=this;return this._transformer===void 0&&(this._transformer=new l.default(Object.values(u.default).map(function(O){return O(_._config,_._log)}))),this._transformer},enumerable:!1,configurable:!0}),p.prototype.initialize=function(_){var O=this,P=_===void 0?{}:_,R=P.userAgent,T=P.boltAgent,A=P.authToken,M=P.notificationFilter,N=P.onError,j=P.onComplete,B={},q=new f.LoginObserver({onError:function(W){return O._onLoginError(W,N)},onCompleted:function(W){return B.metadata=W,O._onLoginCompleted(W)}});return this.write(c.default.hello5x5(R,T,M,this._serversideRouting),q,!1),this.logon({authToken:A,onComplete:function(W){return j(o(o({},W),B.metadata))},onError:N,flush:!0})},p.prototype.beginTransaction=function(_){var O=_===void 0?{}:_,P=O.bookmarks,R=O.txConfig,T=O.database,A=O.mode,M=O.impersonatedUser,N=O.notificationFilter,j=O.beforeError,B=O.afterError,q=O.beforeComplete,W=O.afterComplete,J=new f.ResultStreamObserver({server:this._server,beforeError:j,afterError:B,beforeComplete:q,afterComplete:W});return J.prepareToHandleSingleResponse(),this.write(c.default.begin5x5({bookmarks:P,txConfig:R,database:T,mode:A,impersonatedUser:M,notificationFilter:N}),J,!0),J},p.prototype.run=function(_,O,P){var R=P===void 0?{}:P,T=R.bookmarks,A=R.txConfig,M=R.database,N=R.mode,j=R.impersonatedUser,B=R.notificationFilter,q=R.beforeKeys,W=R.afterKeys,J=R.beforeError,te=R.afterError,re=R.beforeComplete,ee=R.afterComplete,fe=R.flush,he=fe===void 0||fe,se=R.reactive,me=se!==void 0&&se,De=R.fetchSize,Le=De===void 0?v:De,Ie=R.highRecordWatermark,qe=Ie===void 0?Number.MAX_VALUE:Ie,Ge=R.lowRecordWatermark,Me=Ge===void 0?Number.MAX_VALUE:Ge,Pe=new f.ResultStreamObserver({server:this._server,reactive:me,fetchSize:Le,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:q,afterKeys:W,beforeError:J,afterError:te,beforeComplete:re,afterComplete:ee,highRecordWatermark:qe,lowRecordWatermark:Me,enrichMetadata:this._enrichMetadata}),de=me;return this.write(c.default.runWithMetadata5x5(_,O,{bookmarks:T,txConfig:A,database:M,mode:N,impersonatedUser:j,notificationFilter:B}),Pe,de&&he),me||this.write(c.default.pull({n:Le}),Pe,he),Pe},p.prototype._enrichMetadata=function(_){return Array.isArray(_.statuses)&&(_.statuses=_.statuses.map(function(O){return o(o({},O),{description:O.neo4j_code!=null?O.status_description:O.description,diagnostic_record:O.diagnostic_record!==null?o(o({},y),O.diagnostic_record):null})})),_},p}(s.default);e.default=w},9238:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(a){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c]);return a},n.apply(this,arguments)},i=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(t(4325));e.default=n({},o.default)},6890:function(r,e,t){var n,i=this&&this.__extends||(n=function(d,v){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,w){y.__proto__=w}||function(y,w){for(var b in w)Object.prototype.hasOwnProperty.call(w,b)&&(y[b]=w[b])},n(d,v)},function(d,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function y(){this.constructor=d}n(d,v),d.prototype=v===null?Object.create(v):(y.prototype=v.prototype,new y)}),o=this&&this.__assign||function(){return o=Object.assign||function(d){for(var v,y=1,w=arguments.length;y<w;y++)for(var b in v=arguments[y])Object.prototype.hasOwnProperty.call(v,b)&&(d[b]=v[b]);return d},o.apply(this,arguments)},a=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0});var s=a(t(5815)),u=a(t(9238)),l=a(t(3321)),c=t(9305).internal.constants.BOLT_PROTOCOL_V5_6,f=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),h=function(d){function v(){return d!==null&&d.apply(this,arguments)||this}return i(v,d),Object.defineProperty(v.prototype,"version",{get:function(){return c},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"transformer",{get:function(){var y=this;return this._transformer===void 0&&(this._transformer=new l.default(Object.values(u.default).map(function(w){return w(y._config,y._log)}))),this._transformer},enumerable:!1,configurable:!0}),v.prototype._enrichMetadata=function(y){return Array.isArray(y.statuses)&&(y.statuses=y.statuses.map(function(w){return o(o({},w),{diagnostic_record:w.diagnostic_record!==null?o(o({},f),w.diagnostic_record):null})})),y},v}(s.default);e.default=h},6377:function(r,e,t){var n,i=this&&this.__extends||(n=function(d,v){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,w){y.__proto__=w}||function(y,w){for(var b in w)Object.prototype.hasOwnProperty.call(w,b)&&(y[b]=w[b])},n(d,v)},function(d,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function y(){this.constructor=d}n(d,v),d.prototype=v===null?Object.create(v):(y.prototype=v.prototype,new y)}),o=this&&this.__assign||function(){return o=Object.assign||function(d){for(var v,y=1,w=arguments.length;y<w;y++)for(var b in v=arguments[y])Object.prototype.hasOwnProperty.call(v,b)&&(d[b]=v[b]);return d},o.apply(this,arguments)},a=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0});var s=a(t(6890)),u=a(t(9238)),l=a(t(3321)),c=t(9305).internal.constants.BOLT_PROTOCOL_V5_7,f=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),h=function(d){function v(){return d!==null&&d.apply(this,arguments)||this}return i(v,d),Object.defineProperty(v.prototype,"version",{get:function(){return c},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"transformer",{get:function(){var y=this;return this._transformer===void 0&&(this._transformer=new l.default(Object.values(u.default).map(function(w){return w(y._config,y._log)}))),this._transformer},enumerable:!1,configurable:!0}),v.prototype.enrichErrorMetadata=function(y){return o(o({},y),{cause:y.cause!==null&&y.cause!==void 0?this.enrichErrorMetadata(y.cause):null,code:y.neo4j_code,diagnostic_record:y.diagnostic_record!==null?o(o({},f),y.diagnostic_record):null})},v}(s.default);e.default=h},6544:function(r,e,t){var n=this&&this.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(e,"__esModule",{value:!0});var i=t(9305),o=n(t(8320)),a=n(t(2857)),s=n(t(5642)),u=n(t(2539)),l=n(t(4596)),c=n(t(6445)),f=n(t(9054)),h=n(t(1711)),d=n(t(844)),v=n(t(6345)),y=n(t(934)),w=n(t(9125)),b=n(t(9744)),p=n(t(5815)),_=n(t(6890)),O=n(t(6377)),P=(t(7452),n(t(2578)));e.default=function(R){var T=R===void 0?{}:R,A=T.version,M=T.chunker,N=T.dechunker,j=T.channel,B=T.disableLosslessIntegers,q=T.useBigInt,W=T.serversideRouting,J=T.server,te=T.log,re=T.observer;return function(ee,fe,he,se,me,De,Le,Ie){switch(ee){case 1:return new o.default(fe,he,se,De,Ie,Le);case 2:return new a.default(fe,he,se,De,Ie,Le);case 3:return new s.default(fe,he,se,De,Ie,Le);case 4:return new u.default(fe,he,se,De,Ie,Le);case 4.1:return new l.default(fe,he,se,De,Ie,Le,me);case 4.2:return new c.default(fe,he,se,De,Ie,Le,me);case 4.3:return new f.default(fe,he,se,De,Ie,Le,me);case 4.4:return new h.default(fe,he,se,De,Ie,Le,me);case 5:return new d.default(fe,he,se,De,Ie,Le,me);case 5.1:return new v.default(fe,he,se,De,Ie,Le,me);case 5.2:return new y.default(fe,he,se,De,Ie,Le,me);case 5.3:return new w.default(fe,he,se,De,Ie,Le,me);case 5.4:return new b.default(fe,he,se,De,Ie,Le,me);case 5.5:return new p.default(fe,he,se,De,Ie,Le,me);case 5.6:return new _.default(fe,he,se,De,Ie,Le,me);case 5.7:return new O.default(fe,he,se,De,Ie,Le,me);default:throw(0,i.newError)("Unknown Bolt protocol version: "+ee)}}(A,J,M,{disableLosslessIntegers:B,useBigInt:q},W,function(ee){var fe=new P.default({transformMetadata:ee.transformMetadata.bind(ee),enrichErrorMetadata:ee.enrichErrorMetadata.bind(ee),log:te,observer:re});return j.onerror=re.onError.bind(re),j.onmessage=function(he){return N.write(he)},N.onmessage=function(he){try{fe.handleResponse(ee.unpack(he))}catch(se){return re.onError(se)}},fe},re.onProtocolError.bind(re),te)}},8731:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=t(7452),i=t(9305);function o(a,s){return{major:a,minor:s}}e.default=function(a,s){var u=this;return new Promise(function(l,c){var f=function(h){c(h)};a.onerror=f.bind(u),a._error&&f(a._error),a.onmessage=function(h){try{var d=function(v,y){var w=[v.readUInt8(),v.readUInt8(),v.readUInt8(),v.readUInt8()];if(w[0]===72&&w[1]===84&&w[2]===84&&w[3]===80)throw y.error("Handshake failed since server responded with HTTP."),(0,i.newError)("Server responded HTTP. Make sure you are not trying to connect to the http endpoint (HTTP defaults to port 7474 whereas BOLT defaults to port 7687)");return+(w[3]+"."+w[2])}(h,s);l({protocolVersion:d,consumeRemainingBuffer:function(v){h.hasRemaining()&&v(h.readSlice(h.remaining()))}})}catch(v){c(v)}},a.write(function(h){if(h.length>4)throw(0,i.newError)("It should not have more than 4 versions of the protocol");var d=(0,n.alloc)(20);return d.writeInt32(1616949271),h.forEach(function(v){if(v instanceof Array){var y=v[0],w=y.major,b=(p=y.minor)-v[1].minor;d.writeInt32(b<<16|p<<8|w)}else{w=v.major;var p=v.minor;d.writeInt32(p<<8|w)}}),d.reset(),d}([[o(5,7),o(5,0)],[o(4,4),o(4,2)],o(4,1),o(3,0)]))})}},7666:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(c,f,h,d){d===void 0&&(d=h);var v=Object.getOwnPropertyDescriptor(f,h);v&&!("get"in v?!f.__esModule:v.writable||v.configurable)||(v={enumerable:!0,get:function(){return f[h]}}),Object.defineProperty(c,d,v)}:function(c,f,h,d){d===void 0&&(d=h),c[d]=f[h]}),i=this&&this.__exportStar||function(c,f){for(var h in c)h==="default"||Object.prototype.hasOwnProperty.call(f,h)||n(f,c,h)},o=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0}),e.RawRoutingTable=e.BoltProtocol=void 0;var a=o(t(8731)),s=o(t(6544)),u=o(t(9054)),l=o(t(7790));i(t(9014),e),e.BoltProtocol=u.default,e.RawRoutingTable=l.default,e.default={handshake:a.default,create:s.default}},7021:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SIGNATURES=void 0;var n=t(9305),i=n.internal.constants,o=i.ACCESS_MODE_READ,a=i.FETCH_ALL,s=n.internal.util.assertString,u=Object.freeze({INIT:1,RESET:15,RUN:16,PULL_ALL:63,HELLO:1,GOODBYE:2,BEGIN:17,COMMIT:18,ROLLBACK:19,TELEMETRY:84,ROUTE:102,LOGON:106,LOGOFF:107,DISCARD:47,PULL:63});e.SIGNATURES=u;var l=function(){function _(O,P,R){this.signature=O,this.fields=P,this.toString=R}return _.init=function(O,P){return new _(1,[O,P],function(){return"INIT ".concat(O," {...}")})},_.run=function(O,P){return new _(16,[O,P],function(){return"RUN ".concat(O," ").concat(n.json.stringify(P))})},_.pullAll=function(){return v},_.reset=function(){return y},_.hello=function(O,P,R,T){R===void 0&&(R=null),T===void 0&&(T=null);var A=Object.assign({user_agent:O},P);return R&&(A.routing=R),T&&(A.patch_bolt=T),new _(1,[A],function(){return"HELLO {user_agent: '".concat(O,"', ...}")})},_.hello5x1=function(O,P){P===void 0&&(P=null);var R={user_agent:O};return P&&(R.routing=P),new _(1,[R],function(){return"HELLO {user_agent: '".concat(O,"', ...}")})},_.hello5x2=function(O,P,R){P===void 0&&(P=null),R===void 0&&(R=null);var T={user_agent:O};return h(T,P),R&&(T.routing=R),new _(1,[T],function(){return"HELLO ".concat(n.json.stringify(T))})},_.hello5x3=function(O,P,R,T){R===void 0&&(R=null),T===void 0&&(T=null);var A={};return O&&(A.user_agent=O),P&&(A.bolt_agent={product:P.product,platform:P.platform,language:P.language,language_details:P.languageDetails}),h(A,R),T&&(A.routing=T),new _(1,[A],function(){return"HELLO ".concat(n.json.stringify(A))})},_.hello5x5=function(O,P,R,T){R===void 0&&(R=null),T===void 0&&(T=null);var A={};return O&&(A.user_agent=O),P&&(A.bolt_agent={product:P.product,platform:P.platform,language:P.language,language_details:P.languageDetails}),d(A,R),T&&(A.routing=T),new _(1,[A],function(){return"HELLO ".concat(n.json.stringify(A))})},_.logon=function(O){return new _(106,[O],function(){return"LOGON { ... }"})},_.logoff=function(){return new _(107,[],function(){return"LOGOFF"})},_.begin=function(O){var P=O===void 0?{}:O,R=c(P.bookmarks,P.txConfig,P.database,P.mode,P.impersonatedUser,P.notificationFilter);return new _(17,[R],function(){return"BEGIN ".concat(n.json.stringify(R))})},_.begin5x5=function(O){var P=O===void 0?{}:O,R=c(P.bookmarks,P.txConfig,P.database,P.mode,P.impersonatedUser,P.notificationFilter,{appendNotificationFilter:d});return new _(17,[R],function(){return"BEGIN ".concat(n.json.stringify(R))})},_.commit=function(){return w},_.rollback=function(){return b},_.runWithMetadata=function(O,P,R){var T=R===void 0?{}:R,A=c(T.bookmarks,T.txConfig,T.database,T.mode,T.impersonatedUser,T.notificationFilter);return new _(16,[O,P,A],function(){return"RUN ".concat(O," ").concat(n.json.stringify(P)," ").concat(n.json.stringify(A))})},_.runWithMetadata5x5=function(O,P,R){var T=R===void 0?{}:R,A=c(T.bookmarks,T.txConfig,T.database,T.mode,T.impersonatedUser,T.notificationFilter,{appendNotificationFilter:d});return new _(16,[O,P,A],function(){return"RUN ".concat(O," ").concat(n.json.stringify(P)," ").concat(n.json.stringify(A))})},_.goodbye=function(){return p},_.pull=function(O){var P=O===void 0?{}:O,R=P.stmtId,T=R===void 0?-1:R,A=P.n,M=f(T??-1,(A===void 0?a:A)||a);return new _(63,[M],function(){return"PULL ".concat(n.json.stringify(M))})},_.discard=function(O){var P=O===void 0?{}:O,R=P.stmtId,T=R===void 0?-1:R,A=P.n,M=f(T??-1,(A===void 0?a:A)||a);return new _(47,[M],function(){return"DISCARD ".concat(n.json.stringify(M))})},_.telemetry=function(O){var P=O.api,R=(0,n.int)(P);return new _(84,[R],function(){return"TELEMETRY ".concat(R.toString())})},_.route=function(O,P,R){return O===void 0&&(O={}),P===void 0&&(P=[]),R===void 0&&(R=null),new _(102,[O,P,R],function(){return"ROUTE ".concat(n.json.stringify(O)," ").concat(n.json.stringify(P)," ").concat(R)})},_.routeV4x4=function(O,P,R){O===void 0&&(O={}),P===void 0&&(P=[]),R===void 0&&(R={});var T={};return R.databaseName&&(T.db=R.databaseName),R.impersonatedUser&&(T.imp_user=R.impersonatedUser),new _(102,[O,P,T],function(){return"ROUTE ".concat(n.json.stringify(O)," ").concat(n.json.stringify(P)," ").concat(n.json.stringify(T))})},_}();function c(_,O,P,R,T,A,M){var N;M===void 0&&(M={});var j={};return _.isEmpty()||(j.bookmarks=_.values()),O.timeout!==null&&(j.tx_timeout=O.timeout),O.metadata&&(j.tx_metadata=O.metadata),P&&(j.db=s(P,"database")),T&&(j.imp_user=s(T,"impersonatedUser")),R===o&&(j.mode="r"),((N=M.appendNotificationFilter)!==null&&N!==void 0?N:h)(j,A),j}function f(_,O){var P={n:(0,n.int)(O)};return _!==-1&&(P.qid=(0,n.int)(_)),P}function h(_,O){O&&(O.minimumSeverityLevel&&(_.notifications_minimum_severity=O.minimumSeverityLevel),O.disabledCategories&&(_.notifications_disabled_categories=O.disabledCategories),O.disabledClassifications&&(_.notifications_disabled_categories=O.disabledClassifications))}function d(_,O){O&&(O.minimumSeverityLevel&&(_.notifications_minimum_severity=O.minimumSeverityLevel),O.disabledCategories&&(_.notifications_disabled_classifications=O.disabledCategories),O.disabledClassifications&&(_.notifications_disabled_classifications=O.disabledClassifications))}e.default=l;var v=new l(63,[],function(){return"PULL_ALL"}),y=new l(15,[],function(){return"RESET"}),w=new l(18,[],function(){return"COMMIT"}),b=new l(19,[],function(){return"ROLLBACK"}),p=new l(2,[],function(){return"GOODBYE"})},2578:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=t(9305);function i(){}function o(u){return u}var a={onNext:i,onCompleted:i,onError:i},s=function(){function u(l){var c=l===void 0?{}:l,f=c.transformMetadata,h=c.enrichErrorMetadata,d=c.log,v=c.observer;this._pendingObservers=[],this._log=d,this._transformMetadata=f||o,this._enrichErrorMetadata=h||o,this._observer=Object.assign({onObserversCountChange:i,onError:i,onFailure:i,onErrorApplyTransformation:o},v)}return Object.defineProperty(u.prototype,"currentFailure",{get:function(){return this._currentFailure},enumerable:!1,configurable:!0}),u.prototype.handleResponse=function(l){var c=l.fields[0];switch(l.signature){case 113:this._log.isDebugEnabled()&&this._log.debug("S: RECORD ".concat(n.json.stringify(l))),this._currentObserver.onNext(c);break;case 112:this._log.isDebugEnabled()&&this._log.debug("S: SUCCESS ".concat(n.json.stringify(l)));try{var f=this._transformMetadata(c);this._currentObserver.onCompleted(f)}finally{this._updateCurrentObserver()}break;case 127:this._log.isDebugEnabled()&&this._log.debug("S: FAILURE ".concat(n.json.stringify(l)));try{this._currentFailure=this._handleErrorPayload(this._enrichErrorMetadata(c)),this._currentObserver.onError(this._currentFailure)}finally{this._updateCurrentObserver(),this._observer.onFailure(this._currentFailure)}break;case 126:this._log.isDebugEnabled()&&this._log.debug("S: IGNORED ".concat(n.json.stringify(l)));try{this._currentFailure&&this._currentObserver.onError?this._currentObserver.onError(this._currentFailure):this._currentObserver.onError&&this._currentObserver.onError((0,n.newError)("Ignored either because of an error or RESET"))}finally{this._updateCurrentObserver()}break;default:this._observer.onError((0,n.newError)("Unknown Bolt protocol message: "+l))}},u.prototype._updateCurrentObserver=function(){this._currentObserver=this._pendingObservers.shift(),this._observer.onObserversCountChange(this._observersCount)},Object.defineProperty(u.prototype,"_observersCount",{get:function(){return this._currentObserver==null?this._pendingObservers.length:this._pendingObservers.length+1},enumerable:!1,configurable:!0}),u.prototype._queueObserver=function(l){return(l=l||a).onCompleted=l.onCompleted||i,l.onError=l.onError||i,l.onNext=l.onNext||i,this._currentObserver===void 0?this._currentObserver=l:this._pendingObservers.push(l),this._observer.onObserversCountChange(this._observersCount),!0},u.prototype._notifyErrorToObservers=function(l){for(this._currentObserver&&this._currentObserver.onError&&this._currentObserver.onError(l);this._pendingObservers.length>0;){var c=this._pendingObservers.shift();c&&c.onError&&c.onError(l)}},u.prototype.hasOngoingObservableRequests=function(){return this._currentObserver!=null||this._pendingObservers.length>0},u.prototype._resetFailure=function(){this._currentFailure=null},u.prototype._handleErrorPayload=function(l){var c,f=(c=l.code)==="Neo.TransientError.Transaction.Terminated"?"Neo.ClientError.Transaction.Terminated":c==="Neo.TransientError.Transaction.LockClientStopped"?"Neo.ClientError.Transaction.LockClientStopped":c,h=l.cause!=null?this._handleErrorCause(l.cause):void 0,d=(0,n.newError)(l.message,f,h,l.gql_status,l.description,l.diagnostic_record);return this._observer.onErrorApplyTransformation(d)},u.prototype._handleErrorCause=function(l){var c=l.cause!=null?this._handleErrorCause(l.cause):void 0,f=(0,n.newGQLError)(l.message,c,l.gql_status,l.description,l.diagnostic_record);return this._observer.onErrorApplyTransformation(f)},u}();e.default=s},7790:function(r,e,t){var n,i=this&&this.__extends||(n=function(c,f){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var v in d)Object.prototype.hasOwnProperty.call(d,v)&&(h[v]=d[v])},n(c,f)},function(c,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function h(){this.constructor=c}n(c,f),c.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)}),o=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0}),o(t(9305));var a=function(){function c(){}return c.ofRecord=function(f){return f===null?c.ofNull():new l(f)},c.ofMessageResponse=function(f){return f===null?c.ofNull():new s(f)},c.ofNull=function(){return new u},Object.defineProperty(c.prototype,"ttl",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"db",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"servers",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"isNull",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),c}();e.default=a;var s=function(c){function f(h){var d=c.call(this)||this;return d._response=h,d}return i(f,c),Object.defineProperty(f.prototype,"ttl",{get:function(){return this._response.rt.ttl},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"servers",{get:function(){return this._response.rt.servers},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"db",{get:function(){return this._response.rt.db},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"isNull",{get:function(){return this._response===null},enumerable:!1,configurable:!0}),f}(a),u=function(c){function f(){return c!==null&&c.apply(this,arguments)||this}return i(f,c),Object.defineProperty(f.prototype,"isNull",{get:function(){return!0},enumerable:!1,configurable:!0}),f}(a),l=function(c){function f(h){var d=c.call(this)||this;return d._record=h,d}return i(f,c),Object.defineProperty(f.prototype,"ttl",{get:function(){return this._record.get("ttl")},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"servers",{get:function(){return this._record.get("servers")},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"db",{get:function(){return this._record.has("db")?this._record.get("db"):null},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"isNull",{get:function(){return this._record===null},enumerable:!1,configurable:!0}),f}(a)},9014:function(r,e,t){var n,i=this&&this.__extends||(n=function(R,T){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,M){A.__proto__=M}||function(A,M){for(var N in M)Object.prototype.hasOwnProperty.call(M,N)&&(A[N]=M[N])},n(R,T)},function(R,T){if(typeof T!="function"&&T!==null)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");function A(){this.constructor=R}n(R,T),R.prototype=T===null?Object.create(T):(A.prototype=T.prototype,new A)}),o=this&&this.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetryObserver=e.ProcedureRouteObserver=e.RouteObserver=e.CompletedObserver=e.FailedObserver=e.ResetObserver=e.LogoffObserver=e.LoginObserver=e.ResultStreamObserver=e.StreamObserver=void 0;var a=t(9305),s=o(t(7790)),u=t(6781),l=a.internal.constants.FETCH_ALL,c=a.error.PROTOCOL_ERROR,f=function(){function R(){}return R.prototype.onNext=function(T){},R.prototype.onError=function(T){},R.prototype.onCompleted=function(T){},R}();e.StreamObserver=f;var h=function(R){function T(A){var M=A===void 0?{}:A,N=M.reactive,j=N!==void 0&&N,B=M.moreFunction,q=M.discardFunction,W=M.fetchSize,J=W===void 0?l:W,te=M.beforeError,re=M.afterError,ee=M.beforeKeys,fe=M.afterKeys,he=M.beforeComplete,se=M.afterComplete,me=M.server,De=M.highRecordWatermark,Le=De===void 0?Number.MAX_VALUE:De,Ie=M.lowRecordWatermark,qe=Ie===void 0?Number.MAX_VALUE:Ie,Ge=M.enrichMetadata,Me=R.call(this)||this;return Me._fieldKeys=null,Me._fieldLookup=null,Me._head=null,Me._queuedRecords=[],Me._tail=null,Me._error=null,Me._observers=[],Me._meta={},Me._server=me,Me._beforeError=te,Me._afterError=re,Me._beforeKeys=ee,Me._afterKeys=fe,Me._beforeComplete=he,Me._afterComplete=se,Me._enrichMetadata=Ge||u.functional.identity,Me._queryId=null,Me._moreFunction=B,Me._discardFunction=q,Me._discard=!1,Me._fetchSize=J,Me._lowRecordWatermark=qe,Me._highRecordWatermark=Le,Me._setState(j?P.READY:P.READY_STREAMING),Me._setupAutoPull(),Me._paused=!1,Me._pulled=!j,Me._haveRecordStreamed=!1,Me}return i(T,R),T.prototype.pause=function(){this._paused=!0},T.prototype.resume=function(){this._paused=!1,this._setupAutoPull(!0),this._state.pull(this)},T.prototype.onNext=function(A){this._haveRecordStreamed=!0;var M=new a.Record(this._fieldKeys,A,this._fieldLookup);this._observers.some(function(N){return N.onNext})?this._observers.forEach(function(N){N.onNext&&N.onNext(M)}):(this._queuedRecords.push(M),this._queuedRecords.length>this._highRecordWatermark&&(this._autoPull=!1))},T.prototype.onCompleted=function(A){this._state.onSuccess(this,A)},T.prototype.onError=function(A){this._state.onError(this,A)},T.prototype.cancel=function(){this._discard=!0},T.prototype.prepareToHandleSingleResponse=function(){this._head=[],this._fieldKeys=[],this._setState(P.STREAMING)},T.prototype.markCompleted=function(){this._head=[],this._fieldKeys=[],this._tail={},this._setState(P.SUCCEEDED)},T.prototype.subscribe=function(A){if(this._head&&A.onKeys&&A.onKeys(this._head),this._queuedRecords.length>0&&A.onNext)for(var M=0;M<this._queuedRecords.length;M++)A.onNext(this._queuedRecords[M]),this._queuedRecords.length-M-1<=this._lowRecordWatermark&&(this._autoPull=!0,this._state===P.READY&&this._handleStreaming());this._tail&&A.onCompleted&&A.onCompleted(this._tail),this._error&&A.onError(this._error),this._observers.push(A),this._state===P.READY&&this._handleStreaming()},T.prototype._handleHasMore=function(A){this._setState(P.READY),this._handleStreaming(),delete A.has_more},T.prototype._handlePullSuccess=function(A){var M=this,N=this._enrichMetadata(Object.assign(this._server?{server:this._server}:{},this._meta,{stream_summary:{have_records_streamed:this._haveRecordStreamed,pulled:this._pulled,has_keys:this._fieldKeys.length>0}},A));if([void 0,null,"r","w","rw","s"].includes(N.type)){this._setState(P.SUCCEEDED);var j=null;this._beforeComplete&&(j=this._beforeComplete(N));var B=function(){M._tail=N,M._observers.some(function(q){return q.onCompleted})&&M._observers.forEach(function(q){q.onCompleted&&q.onCompleted(N)}),M._afterComplete&&M._afterComplete(N)};j?Promise.resolve(j).then(function(){return B()}):B()}else this.onError((0,a.newError)(`Server returned invalid query type. Expected one of [undefined, null, "r", "w", "rw", "s"] but got '`.concat(N.type,"'"),c))},T.prototype._handleRunSuccess=function(A,M){var N=this;if(this._fieldKeys===null){if(this._fieldKeys=[],this._fieldLookup={},A.fields&&A.fields.length>0){this._fieldKeys=A.fields;for(var j=0;j<A.fields.length;j++)this._fieldLookup[A.fields[j]]=j}A.fields!=null&&delete A.fields,A.qid!==null&&A.qid!==void 0&&(this._queryId=A.qid,delete A.qid),this._storeMetadataForCompletion(A);var B=null;this._beforeKeys&&(B=this._beforeKeys(this._fieldKeys));var q=function(){N._head=N._fieldKeys,N._observers.some(function(W){return W.onKeys})&&N._observers.forEach(function(W){W.onKeys&&W.onKeys(N._fieldKeys)}),N._afterKeys&&N._afterKeys(N._fieldKeys),M()};B?Promise.resolve(B).then(function(){return q()}):q()}},T.prototype._handleError=function(A){var M=this;this._setState(P.FAILED),this._error=A;var N=null;this._beforeError&&(N=this._beforeError(A));var j=function(){M._observers.some(function(B){return B.onError})&&M._observers.forEach(function(B){B.onError&&B.onError(A)}),M._afterError&&M._afterError(A)};N?Promise.resolve(N).then(function(){return j()}):j()},T.prototype._handleStreaming=function(){this._head&&this._observers.some(function(A){return A.onNext||A.onCompleted})&&(this._paused||!this._discard&&!this._autoPull||this._more())},T.prototype._more=function(){this._discard?this._discardFunction(this._queryId,this):(this._pulled=!0,this._moreFunction(this._queryId,this._fetchSize,this)),this._setState(P.STREAMING)},T.prototype._storeMetadataForCompletion=function(A){for(var M=Object.keys(A),N=M.length,j="";N--;)j=M[N],this._meta[j]=A[j]},T.prototype._setState=function(A){this._state=A},T.prototype._setupAutoPull=function(){this._autoPull=!0},T}(f);e.ResultStreamObserver=h;var d=function(R){function T(A){var M=A===void 0?{}:A,N=M.onError,j=M.onCompleted,B=R.call(this)||this;return B._onError=N,B._onCompleted=j,B}return i(T,R),T.prototype.onNext=function(A){this.onError((0,a.newError)("Received RECORD when initializing "+a.json.stringify(A)))},T.prototype.onError=function(A){this._onError&&this._onError(A)},T.prototype.onCompleted=function(A){this._onCompleted&&this._onCompleted(A)},T}(f);e.LoginObserver=d;var v=function(R){function T(A){var M=A===void 0?{}:A,N=M.onError,j=M.onCompleted,B=R.call(this)||this;return B._onError=N,B._onCompleted=j,B}return i(T,R),T.prototype.onNext=function(A){this.onError((0,a.newError)("Received RECORD when logging off "+a.json.stringify(A)))},T.prototype.onError=function(A){this._onError&&this._onError(A)},T.prototype.onCompleted=function(A){this._onCompleted&&this._onCompleted(A)},T}(f);e.LogoffObserver=v;var y=function(R){function T(A){var M=A===void 0?{}:A,N=M.onProtocolError,j=M.onError,B=M.onComplete,q=R.call(this)||this;return q._onProtocolError=N,q._onError=j,q._onComplete=B,q}return i(T,R),T.prototype.onNext=function(A){this.onError((0,a.newError)("Received RECORD when resetting: received record is: "+a.json.stringify(A),c))},T.prototype.onError=function(A){A.code===c&&this._onProtocolError&&this._onProtocolError(A.message),this._onError&&this._onError(A)},T.prototype.onCompleted=function(A){this._onComplete&&this._onComplete(A)},T}(f);e.ResetObserver=y;var w=function(R){function T(A){var M=A===void 0?{}:A,N=M.onError,j=M.onCompleted,B=R.call(this)||this;return B._onError=N,B._onCompleted=j,B}return i(T,R),T.prototype.onNext=function(A){this.onError((0,a.newError)("Received RECORD when sending telemetry "+a.json.stringify(A),c))},T.prototype.onError=function(A){this._onError&&this._onError(A)},T.prototype.onCompleted=function(A){this._onCompleted&&this._onCompleted(A)},T}(h);e.TelemetryObserver=w;var b=function(R){function T(A){var M=A.error,N=A.onError,j=R.call(this,{beforeError:N})||this;return j.onError(M),j}return i(T,R),T}(h);e.FailedObserver=b;var p=function(R){function T(){var A=R.call(this)||this;return R.prototype.markCompleted.call(A),A}return i(T,R),T}(h);e.CompletedObserver=p;var _=function(R){function T(A){var M=A.resultObserver,N=A.onProtocolError,j=A.onError,B=A.onCompleted,q=R.call(this)||this;return q._resultObserver=M,q._onError=j,q._onCompleted=B,q._records=[],q._onProtocolError=N,M.subscribe(q),q}return i(T,R),T.prototype.onNext=function(A){this._records.push(A)},T.prototype.onError=function(A){A.code===c&&this._onProtocolError&&this._onProtocolError(A.message),this._onError&&this._onError(A)},T.prototype.onCompleted=function(){this._records===null||this._records.length===1?this._onCompleted&&this._onCompleted(s.default.ofRecord(this._records[0])):this.onError((0,a.newError)("Illegal response from router. Received "+this._records.length+` records but expected only one.
`+a.json.stringify(this._records),c))},T}(f);e.ProcedureRouteObserver=_;var O=function(R){function T(A){var M=A===void 0?{}:A,N=M.onProtocolError,j=M.onError,B=M.onCompleted,q=R.call(this)||this;return q._onProtocolError=N,q._onError=j,q._onCompleted=B,q}return i(T,R),T.prototype.onNext=function(A){this.onError((0,a.newError)("Received RECORD when resetting: received record is: "+a.json.stringify(A),c))},T.prototype.onError=function(A){A.code===c&&this._onProtocolError&&this._onProtocolError(A.message),this._onError&&this._onError(A)},T.prototype.onCompleted=function(A){this._onCompleted&&this._onCompleted(s.default.ofMessageResponse(A))},T}(f);e.RouteObserver=O;var P={READY_STREAMING:{onSuccess:function(R,T){R._handleRunSuccess(T,function(){R._setState(P.STREAMING)})},onError:function(R,T){R._handleError(T)},name:function(){return"READY_STREAMING"},pull:function(){}},READY:{onSuccess:function(R,T){R._handleRunSuccess(T,function(){return R._handleStreaming()})},onError:function(R,T){R._handleError(T)},name:function(){return"READY"},pull:function(R){return R._more()}},STREAMING:{onSuccess:function(R,T){T.has_more?R._handleHasMore(T):R._handlePullSuccess(T)},onError:function(R,T){R._handleError(T)},name:function(){return"STREAMING"},pull:function(){}},FAILED:{onError:function(R){},name:function(){return"FAILED"},pull:function(){}},SUCCEEDED:{name:function(){return"SUCCEEDED"},pull:function(){}}}},5973:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.epochSecondAndNanoToLocalDateTime=e.nanoOfDayToLocalTime=e.epochDayToDate=void 0;var n=t(9305),i=n.internal.temporalUtil,o=i.DAYS_0000_TO_1970,a=i.DAYS_PER_400_YEAR_CYCLE,s=i.NANOS_PER_HOUR,u=i.NANOS_PER_MINUTE,l=i.NANOS_PER_SECOND,c=i.SECONDS_PER_DAY,f=i.floorDiv,h=i.floorMod;function d(y){var w=(y=(0,n.int)(y)).add(o).subtract(60),b=(0,n.int)(0);if(w.lessThan(0)){var p=w.add(1).div(a).subtract(1);b=p.multiply(400),w=w.add(p.multiply(-a))}var _=w.multiply(400).add(591).div(a),O=w.subtract(_.multiply(365).add(_.div(4)).subtract(_.div(100)).add(_.div(400)));O.lessThan(0)&&(_=_.subtract(1),O=w.subtract(_.multiply(365).add(_.div(4)).subtract(_.div(100)).add(_.div(400)))),_=_.add(b);var P=O,R=P.multiply(5).add(2).div(153),T=R.add(2).modulo(12).add(1),A=P.subtract(R.multiply(306).add(5).div(10)).add(1);return _=_.add(R.div(10)),new n.Date(_,T,A)}function v(y){var w=(y=(0,n.int)(y)).div(s),b=(y=y.subtract(w.multiply(s))).div(u),p=(y=y.subtract(b.multiply(u))).div(l),_=y.subtract(p.multiply(l));return new n.LocalTime(w,b,p,_)}e.epochDayToDate=d,e.nanoOfDayToLocalTime=v,e.epochSecondAndNanoToLocalDateTime=function(y,w){var b=f(y,c),p=h(y,c).multiply(l).add(w),_=d(b),O=v(p);return new n.LocalDateTime(_.year,_.month,_.day,O.hour,O.minute,O.second,O.nanosecond)}},3321:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TypeTransformer=void 0;var n=t(7168),i=t(9305).internal.objectUtil,o=function(){function s(u){this._transformers=u,this._transformersPerSignature=new Map(u.map(function(l){return[l.signature,l]})),this.fromStructure=this.fromStructure.bind(this),this.toStructure=this.toStructure.bind(this),Object.freeze(this)}return s.prototype.fromStructure=function(u){try{return u instanceof n.structure.Structure&&this._transformersPerSignature.has(u.signature)?(0,this._transformersPerSignature.get(u.signature).fromStructure)(u):u}catch(l){return i.createBrokenObject(l)}},s.prototype.toStructure=function(u){var l=this._transformers.find(function(c){return(0,c.isTypeInstance)(u)});return l!==void 0?l.toStructure(u):u},s}();e.default=o;var a=function(){function s(u){var l=u.signature,c=u.fromStructure,f=u.toStructure,h=u.isTypeInstance;this.signature=l,this.isTypeInstance=h,this.fromStructure=c,this.toStructure=f,Object.freeze(this)}return s.prototype.extendsWith=function(u){var l=u.signature,c=u.fromStructure,f=u.toStructure,h=u.isTypeInstance;return new s({signature:l||this.signature,fromStructure:c||this.fromStructure,toStructure:f||this.toStructure,isTypeInstance:h||this.isTypeInstance})},s}();e.TypeTransformer=a},45:function(r,e){var t,n=this&&this.__extends||(t=function(a,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},t(a,s)},function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}t(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function a(s){this.position=0,this.length=s}return a.prototype.getUInt8=function(s){throw new Error("Not implemented")},a.prototype.getInt8=function(s){throw new Error("Not implemented")},a.prototype.getFloat64=function(s){throw new Error("Not implemented")},a.prototype.putUInt8=function(s,u){throw new Error("Not implemented")},a.prototype.putInt8=function(s,u){throw new Error("Not implemented")},a.prototype.putFloat64=function(s,u){throw new Error("Not implemented")},a.prototype.getInt16=function(s){return this.getInt8(s)<<8|this.getUInt8(s+1)},a.prototype.getUInt16=function(s){return this.getUInt8(s)<<8|this.getUInt8(s+1)},a.prototype.getInt32=function(s){return this.getInt8(s)<<24|this.getUInt8(s+1)<<16|this.getUInt8(s+2)<<8|this.getUInt8(s+3)},a.prototype.getUInt32=function(s){return this.getUInt8(s)<<24|this.getUInt8(s+1)<<16|this.getUInt8(s+2)<<8|this.getUInt8(s+3)},a.prototype.getInt64=function(s){return this.getInt8(s)<<56|this.getUInt8(s+1)<<48|this.getUInt8(s+2)<<40|this.getUInt8(s+3)<<32|this.getUInt8(s+4)<<24|this.getUInt8(s+5)<<16|this.getUInt8(s+6)<<8|this.getUInt8(s+7)},a.prototype.getSlice=function(s,u){return new o(s,u,this)},a.prototype.putInt16=function(s,u){this.putInt8(s,u>>8),this.putUInt8(s+1,255&u)},a.prototype.putUInt16=function(s,u){this.putUInt8(s,u>>8&255),this.putUInt8(s+1,255&u)},a.prototype.putInt32=function(s,u){this.putInt8(s,u>>24),this.putUInt8(s+1,u>>16&255),this.putUInt8(s+2,u>>8&255),this.putUInt8(s+3,255&u)},a.prototype.putUInt32=function(s,u){this.putUInt8(s,u>>24&255),this.putUInt8(s+1,u>>16&255),this.putUInt8(s+2,u>>8&255),this.putUInt8(s+3,255&u)},a.prototype.putInt64=function(s,u){this.putInt8(s,u>>48),this.putUInt8(s+1,u>>42&255),this.putUInt8(s+2,u>>36&255),this.putUInt8(s+3,u>>30&255),this.putUInt8(s+4,u>>24&255),this.putUInt8(s+5,u>>16&255),this.putUInt8(s+6,u>>8&255),this.putUInt8(s+7,255&u)},a.prototype.putBytes=function(s,u){for(var l=0,c=u.remaining();l<c;l++)this.putUInt8(s+l,u.readUInt8())},a.prototype.readUInt8=function(){return this.getUInt8(this._updatePos(1))},a.prototype.readInt8=function(){return this.getInt8(this._updatePos(1))},a.prototype.readUInt16=function(){return this.getUInt16(this._updatePos(2))},a.prototype.readUInt32=function(){return this.getUInt32(this._updatePos(4))},a.prototype.readInt16=function(){return this.getInt16(this._updatePos(2))},a.prototype.readInt32=function(){return this.getInt32(this._updatePos(4))},a.prototype.readInt64=function(){return this.getInt32(this._updatePos(8))},a.prototype.readFloat64=function(){return this.getFloat64(this._updatePos(8))},a.prototype.writeUInt8=function(s){this.putUInt8(this._updatePos(1),s)},a.prototype.writeInt8=function(s){this.putInt8(this._updatePos(1),s)},a.prototype.writeInt16=function(s){this.putInt16(this._updatePos(2),s)},a.prototype.writeInt32=function(s){this.putInt32(this._updatePos(4),s)},a.prototype.writeUInt32=function(s){this.putUInt32(this._updatePos(4),s)},a.prototype.writeInt64=function(s){this.putInt64(this._updatePos(8),s)},a.prototype.writeFloat64=function(s){this.putFloat64(this._updatePos(8),s)},a.prototype.writeBytes=function(s){this.putBytes(this._updatePos(s.remaining()),s)},a.prototype.readSlice=function(s){return this.getSlice(this._updatePos(s),s)},a.prototype._updatePos=function(s){var u=this.position;return this.position+=s,u},a.prototype.remaining=function(){return this.length-this.position},a.prototype.hasRemaining=function(){return this.remaining()>0},a.prototype.reset=function(){this.position=0},a.prototype.toString=function(){return this.constructor.name+"( position="+this.position+` )
  `+this.toHex()},a.prototype.toHex=function(){for(var s="",u=0;u<this.length;u++){var l=this.getUInt8(u).toString(16);l.length===1&&(l="0"+l),s+=l,u!==this.length-1&&(s+=" ")}return s},a}();e.default=i;var o=function(a){function s(u,l,c){var f=a.call(this,l)||this;return f._start=u,f._inner=c,f}return n(s,a),s.prototype.putUInt8=function(u,l){this._inner.putUInt8(this._start+u,l)},s.prototype.getUInt8=function(u){return this._inner.getUInt8(this._start+u)},s.prototype.putInt8=function(u,l){this._inner.putInt8(this._start+u,l)},s.prototype.putFloat64=function(u,l){this._inner.putFloat64(this._start+u,l)},s.prototype.getInt8=function(u){return this._inner.getInt8(this._start+u)},s.prototype.getFloat64=function(u){return this._inner.getFloat64(this._start+u)},s}(i)},7174:function(r,e,t){var n=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0}),e.BaseBuffer=void 0;var i=n(t(45));e.BaseBuffer=i.default,e.default=i.default},6245:function(r,e,t){var n=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(t(5319)),o=t(9305),a=o.internal.util,s=a.ENCRYPTION_OFF,u=a.ENCRYPTION_ON,l=function(){function f(h,d,v){d===void 0&&(d=c),v===void 0&&(v=function(O){return new WebSocket(O)});var y=this;this._open=!0,this._pending=[],this._error=null,this._handleConnectionError=this._handleConnectionError.bind(this),this._config=h,this._receiveTimeout=null,this._receiveTimeoutStarted=!1,this._receiveTimeoutId=null,this._closingPromise=null;var w=function(O,P){var R=function(N){return N.encrypted===!0||N.encrypted===u}(O),T=function(N){return N.encrypted===!1||N.encrypted===s}(O),A=O.trust,M=function(N){var j=typeof N=="function"?N():"";return j&&j.toLowerCase().indexOf("https")>=0}(P);return function(N,j,B){B===null||(N&&!B?console.warn("Neo4j driver is configured to use secure WebSocket on a HTTP web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to not use encryption."):j&&B&&console.warn("Neo4j driver is configured to use insecure WebSocket on a HTTPS web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to use encryption."))}(R,T,M),T?{scheme:"ws",error:null}:M?{scheme:"wss",error:null}:R?A&&A!=="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"?{scheme:null,error:(0,o.newError)("The browser version of this driver only supports one trust strategy, 'TRUST_SYSTEM_CA_SIGNED_CERTIFICATES'. "+A+' is not supported. Please either use TRUST_SYSTEM_CA_SIGNED_CERTIFICATES or disable encryption by setting `encrypted:"'+s+'"` in the driver configuration.')}:{scheme:"wss",error:null}:{scheme:"ws",error:null}}(h,d),b=w.scheme,p=w.error;if(p)this._error=p;else{this._ws=function(O,P,R){var T=O+"://"+P.asHostPort();try{return R(T)}catch(M){if(function(N,j){return N.name==="SyntaxError"&&(B=j.asHostPort()).charAt(0)==="["&&B.indexOf("]")!==-1;var B}(M,P)){var A=function(N,j){var B=j.host().replace(/:/g,"-").replace("%","s")+".ipv6-literal.net";return"".concat(N,"://").concat(B,":").concat(j.port())}(O,P);return R(A)}throw M}}(b,h.address,v),this._ws.binaryType="arraybuffer";var _=this;this._ws.onclose=function(O){O&&!O.wasClean&&_._handleConnectionError(),_._open=!1},this._ws.onopen=function(){_._clearConnectionTimeout();var O=_._pending;_._pending=null;for(var P=0;P<O.length;P++)_.write(O[P])},this._ws.onmessage=function(O){if(y._resetTimeout(),_.onmessage){var P=new i.default(O.data);_.onmessage(P)}},this._ws.onerror=this._handleConnectionError,this._connectionTimeoutFired=!1,this._connectionTimeoutId=this._setupConnectionTimeout()}}return f.prototype._handleConnectionError=function(){if(this._connectionTimeoutFired)return this._error=(0,o.newError)("Failed to establish connection in ".concat(this._config.connectionTimeout,"ms"),this._config.connectionErrorCode),void(this.onerror&&this.onerror(this._error));this._open&&!this._timedout&&(this._error=(0,o.newError)("WebSocket connection failure. Due to security constraints in your web browser, the reason for the failure is not available to this Neo4j Driver. Please use your browsers development console to determine the root cause of the failure. Common reasons include the database being unavailable, using the wrong connection URL or temporary network problems. If you have enabled encryption, ensure your browser is configured to trust the certificate Neo4j is configured to use. WebSocket `readyState` is: "+this._ws.readyState,this._config.connectionErrorCode),this.onerror&&this.onerror(this._error))},f.prototype.write=function(h){if(this._pending!==null)this._pending.push(h);else{if(!(h instanceof i.default))throw(0,o.newError)("Don't know how to send buffer: "+h);try{this._ws.send(h._buffer)}catch(d){if(this._ws.readyState===1)throw d;this._handleConnectionError()}}},f.prototype.close=function(){var h=this;return this._closingPromise===null&&(this._closingPromise=new Promise(function(d,v){h._clearConnectionTimeout(),h._ws&&h._ws.readyState!==3?(h._open=!1,h.stopReceiveTimeout(),h._ws.onclose=function(){d()},h._ws.close()):d()})),this._closingPromise},f.prototype.setupReceiveTimeout=function(h){this._receiveTimeout=h},f.prototype.stopReceiveTimeout=function(){this._receiveTimeout!==null&&this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!1,this._receiveTimeoutId!=null&&clearTimeout(this._receiveTimeoutId),this._receiveTimeoutId=null)},f.prototype.startReceiveTimeout=function(){this._open&&this._receiveTimeout!==null&&!this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!0,this._resetTimeout())},f.prototype._resetTimeout=function(){var h=this;this._receiveTimeoutStarted&&(this._receiveTimeoutId!==null&&clearTimeout(this._receiveTimeoutId),this._receiveTimeoutId=setTimeout(function(){h._receiveTimeoutId=null,h._timedout=!0,h.stopReceiveTimeout(),h._error=(0,o.newError)("Connection lost. Server didn't respond in ".concat(h._receiveTimeout,"ms"),h._config.connectionErrorCode),h.close(),h.onerror&&h.onerror(h._error)},this._receiveTimeout))},f.prototype._setupConnectionTimeout=function(){var h=this,d=this._config.connectionTimeout;if(d){var v=this._ws;return setTimeout(function(){v.readyState!==1&&(h._connectionTimeoutFired=!0,v.close())},d)}return null},f.prototype._clearConnectionTimeout=function(){var h=this._connectionTimeoutId;(h||h===0)&&(this._connectionTimeoutFired=!1,this._connectionTimeoutId=null,clearTimeout(h))},f}();function c(){return typeof window<"u"&&window.location?window.location.protocol:null}e.default=l},614:function(r,e){var t=this&&this.__awaiter||function(i,o,a,s){return new(a||(a=Promise))(function(u,l){function c(d){try{h(s.next(d))}catch(v){l(v)}}function f(d){try{h(s.throw(d))}catch(v){l(v)}}function h(d){var v;d.done?u(d.value):(v=d.value,v instanceof a?v:new a(function(y){y(v)})).then(c,f)}h((s=s.apply(i,o||[])).next())})},n=this&&this.__generator||function(i,o){var a,s,u,l,c={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(h){return function(d){return function(v){if(a)throw new TypeError("Generator is already executing.");for(;l&&(l=0,v[0]&&(c=0)),c;)try{if(a=1,s&&(u=2&v[0]?s.return:v[0]?s.throw||((u=s.return)&&u.call(s),0):s.next)&&!(u=u.call(s,v[1])).done)return u;switch(s=0,u&&(v=[2&v[0],u.value]),v[0]){case 0:case 1:u=v;break;case 4:return c.label++,{value:v[1],done:!1};case 5:c.label++,s=v[1],v=[0];continue;case 7:v=c.ops.pop(),c.trys.pop();continue;default:if(!((u=(u=c.trys).length>0&&u[u.length-1])||v[0]!==6&&v[0]!==2)){c=0;continue}if(v[0]===3&&(!u||v[1]>u[0]&&v[1]<u[3])){c.label=v[1];break}if(v[0]===6&&c.label<u[1]){c.label=u[1],u=v;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(v);break}u[2]&&c.ops.pop(),c.trys.pop();continue}v=o.call(i,c)}catch(y){v=[6,y],s=0}finally{a=u=0}if(5&v[0])throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}([h,d])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.default={load:function(i){return t(this,void 0,void 0,function(){return n(this,function(o){return[2,i]})})}}},2199:function(r,e,t){var n,i=this&&this.__extends||(n=function(a,s){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},n(a,s)},function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}n(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(a){function s(){return a!==null&&a.apply(this,arguments)||this}return i(s,a),s.prototype.resolve=function(u){return this._resolveToItself(u)},s}(t(9305).internal.resolver.BaseHostNameResolver);e.default=o},3951:function(r,e,t){var n=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0}),e.ClientCertificatesLoader=e.HostNameResolver=e.Channel=void 0;var i=n(t(6245)),o=n(t(2199)),a=n(t(614));e.Channel=i.default,e.HostNameResolver=o.default,e.ClientCertificatesLoader=a.default},5319:function(r,e,t){var n,i=this&&this.__extends||(n=function(u,l){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(c[h]=f[h])},n(u,l)},function(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function c(){this.constructor=u}n(u,l),u.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)}),o=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.alloc=void 0;var a=o(t(1048)),s=function(u){function l(c){var f=this,h=function(d){return d instanceof a.default.Buffer?d:typeof d=="number"&&typeof a.default.Buffer.alloc=="function"?a.default.Buffer.alloc(d):new a.default.Buffer(d)}(c);return(f=u.call(this,h.length)||this)._buffer=h,f}return i(l,u),l.prototype.getUInt8=function(c){return this._buffer.readUInt8(c)},l.prototype.getInt8=function(c){return this._buffer.readInt8(c)},l.prototype.getFloat64=function(c){return this._buffer.readDoubleBE(c)},l.prototype.putUInt8=function(c,f){this._buffer.writeUInt8(f,c)},l.prototype.putInt8=function(c,f){this._buffer.writeInt8(f,c)},l.prototype.putFloat64=function(c,f){this._buffer.writeDoubleBE(f,c)},l.prototype.putBytes=function(c,f){if(f instanceof l){var h=Math.min(f.length-f.position,this.length-c);f._buffer.copy(this._buffer,c,f.position,f.position+h),f.position+=h}else u.prototype.putBytes.call(this,c,f)},l.prototype.getSlice=function(c,f){return new l(this._buffer.slice(c,c+f))},l}(o(t(7174)).default);e.default=s,e.alloc=function(u){return new s(u)}},2481:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=t(9305),i=n.internal.util,o=i.ENCRYPTION_OFF,a=i.ENCRYPTION_ON,s=n.error.SERVICE_UNAVAILABLE,u=[null,void 0,!0,!1,a,o],l=[null,void 0,"TRUST_ALL_CERTIFICATES","TRUST_CUSTOM_CA_SIGNED_CERTIFICATES","TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"];e.default=function(c,f,h,d){this.address=c,this.encrypted=function(v){var y=v.encrypted;if(u.indexOf(y)===-1)throw(0,n.newError)("Illegal value of the encrypted setting ".concat(y,". Expected one of ").concat(u));return y}(f),this.trust=function(v){var y=v.trust;if(l.indexOf(y)===-1)throw(0,n.newError)("Illegal value of the trust setting ".concat(y,". Expected one of ").concat(l));return y}(f),this.trustedCertificates=function(v){return v.trustedCertificates||[]}(f),this.knownHostsPath=function(v){return v.knownHosts||null}(f),this.connectionErrorCode=h||s,this.connectionTimeout=f.connectionTimeout,this.clientCertificate=d}},373:function(r,e,t){var n,i=this&&this.__extends||(n=function(f,h){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,v){d.__proto__=v}||function(d,v){for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(d[y]=v[y])},n(f,h)},function(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function d(){this.constructor=f}n(f,h),f.prototype=h===null?Object.create(h):(d.prototype=h.prototype,new d)}),o=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(e,"__esModule",{value:!0}),e.Dechunker=e.Chunker=void 0;var a=o(t(45)),s=t(5319),u=o(t(5553)),l=function(f){function h(d,v){var y=f.call(this,0)||this;return y._bufferSize=v||1400,y._ch=d,y._buffer=(0,s.alloc)(y._bufferSize),y._currentChunkStart=0,y._chunkOpen=!1,y}return i(h,f),h.prototype.putUInt8=function(d,v){this._ensure(1),this._buffer.writeUInt8(v)},h.prototype.putInt8=function(d,v){this._ensure(1),this._buffer.writeInt8(v)},h.prototype.putFloat64=function(d,v){this._ensure(8),this._buffer.writeFloat64(v)},h.prototype.putBytes=function(d,v){for(;v.remaining()>0;)this._ensure(1),this._buffer.remaining()>v.remaining()?this._buffer.writeBytes(v):this._buffer.writeBytes(v.readSlice(this._buffer.remaining()));return this},h.prototype.flush=function(){if(this._buffer.position>0){this._closeChunkIfOpen();var d=this._buffer;this._buffer=null,this._ch.write(d.getSlice(0,d.position)),this._buffer=(0,s.alloc)(this._bufferSize),this._chunkOpen=!1}return this},h.prototype.messageBoundary=function(){this._closeChunkIfOpen(),this._buffer.remaining()<2&&this.flush(),this._buffer.writeInt16(0)},h.prototype._ensure=function(d){var v=this._chunkOpen?d:d+2;this._buffer.remaining()<v&&this.flush(),this._chunkOpen||(this._currentChunkStart=this._buffer.position,this._buffer.position=this._buffer.position+2,this._chunkOpen=!0)},h.prototype._closeChunkIfOpen=function(){if(this._chunkOpen){var d=this._buffer.position-(this._currentChunkStart+2);this._buffer.putUInt16(this._currentChunkStart,d),this._chunkOpen=!1}},h}(a.default);e.Chunker=l;var c=function(){function f(){this._currentMessage=[],this._partialChunkHeader=0,this._state=this.AWAITING_CHUNK}return f.prototype.AWAITING_CHUNK=function(h){return h.remaining()>=2?this._onHeader(h.readUInt16()):(this._partialChunkHeader=h.readUInt8()<<8,this.IN_HEADER)},f.prototype.IN_HEADER=function(h){return this._onHeader(65535&(this._partialChunkHeader|h.readUInt8()))},f.prototype.IN_CHUNK=function(h){return this._chunkSize<=h.remaining()?(this._currentMessage.push(h.readSlice(this._chunkSize)),this.AWAITING_CHUNK):(this._chunkSize-=h.remaining(),this._currentMessage.push(h.readSlice(h.remaining())),this.IN_CHUNK)},f.prototype.CLOSED=function(h){},f.prototype._onHeader=function(h){if(h===0){var d=void 0;switch(this._currentMessage.length){case 0:return this.AWAITING_CHUNK;case 1:d=this._currentMessage[0];break;default:d=new u.default(this._currentMessage)}return this._currentMessage=[],this.onmessage(d),this.AWAITING_CHUNK}return this._chunkSize=h,this.IN_CHUNK},f.prototype.write=function(h){for(;h.hasRemaining();)this._state=this._state(h)},f}();e.Dechunker=c},5553:function(r,e,t){var n,i=this&&this.__extends||(n=function(u,l){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(c[h]=f[h])},n(u,l)},function(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function c(){this.constructor=u}n(u,l),u.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)});Object.defineProperty(e,"__esModule",{value:!0});var o=t(7174),a=t(5319),s=function(u){function l(c){for(var f=this,h=0,d=0;d<c.length;d++)h+=c[d].length;return(f=u.call(this,h)||this)._buffers=c,f}return i(l,u),l.prototype.getUInt8=function(c){for(var f=0;f<this._buffers.length;f++){var h=this._buffers[f];if(!(c>=h.length))return h.getUInt8(c);c-=h.length}},l.prototype.getInt8=function(c){for(var f=0;f<this._buffers.length;f++){var h=this._buffers[f];if(!(c>=h.length))return h.getInt8(c);c-=h.length}},l.prototype.getFloat64=function(c){for(var f=(0,a.alloc)(8),h=0;h<8;h++)f.putUInt8(h,this.getUInt8(c+h));return f.getFloat64(0)},l}(o.BaseBuffer);e.default=s},7452:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(l,c,f,h){h===void 0&&(h=f);var d=Object.getOwnPropertyDescriptor(c,f);d&&!("get"in d?!c.__esModule:d.writable||d.configurable)||(d={enumerable:!0,get:function(){return c[f]}}),Object.defineProperty(l,h,d)}:function(l,c,f,h){h===void 0&&(h=f),l[h]=c[f]}),i=this&&this.__exportStar||function(l,c){for(var f in l)f==="default"||Object.prototype.hasOwnProperty.call(c,f)||n(c,l,f)},o=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0}),e.utf8=e.alloc=e.ChannelConfig=void 0,i(t(3951),e),i(t(373),e);var a=t(2481);Object.defineProperty(e,"ChannelConfig",{enumerable:!0,get:function(){return o(a).default}});var s=t(5319);Object.defineProperty(e,"alloc",{enumerable:!0,get:function(){return s.alloc}});var u=t(3473);Object.defineProperty(e,"utf8",{enumerable:!0,get:function(){return o(u).default}})},3473:function(r,e,t){var n=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(t(5319)),o=t(9305),a=n(t(1048)),s=new(t(8888)).StringDecoder("utf8");e.default={encode:function(u){return new i.default(function(l){return typeof a.default.Buffer.from=="function"?a.default.Buffer.from(l,"utf8"):new a.default.Buffer(l,"utf8")}(u))},decode:function(u,l){if(Object.prototype.hasOwnProperty.call(u,"_buffer"))return function(c,f){var h=c.position,d=h+f;return c.position=Math.min(d,c.length),c._buffer.toString("utf8",h,d)}(u,l);if(Object.prototype.hasOwnProperty.call(u,"_buffers"))return function(c,f){return function(h,d,v,y){var w=d,b=h.position;return h._updatePos(Math.min(d,h.length-b)),h._buffers.reduce(function(p,_){if(w<=0)return p;if(b>=_.length)return b-=_.length,"";_._updatePos(b-_.position);var O=Math.min(_.length-b,w),P=_.readSlice(O);return _._updatePos(O),w=Math.max(w-P.length,0),b=0,p+function(R){return s.write(R._buffer)}(P)},"")+s.end()}(c,f)}(u,l);throw(0,o.newError)("Don't know how to decode strings from '".concat(u,"'"))}}},1839:function(r,e,t){var n=this&&this.__awaiter||function(u,l,c,f){return new(c||(c=Promise))(function(h,d){function v(b){try{w(f.next(b))}catch(p){d(p)}}function y(b){try{w(f.throw(b))}catch(p){d(p)}}function w(b){var p;b.done?h(b.value):(p=b.value,p instanceof c?p:new c(function(_){_(p)})).then(v,y)}w((f=f.apply(u,l||[])).next())})},i=this&&this.__generator||function(u,l){var c,f,h,d,v={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return d={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function y(w){return function(b){return function(p){if(c)throw new TypeError("Generator is already executing.");for(;d&&(d=0,p[0]&&(v=0)),v;)try{if(c=1,f&&(h=2&p[0]?f.return:p[0]?f.throw||((h=f.return)&&h.call(f),0):f.next)&&!(h=h.call(f,p[1])).done)return h;switch(f=0,h&&(p=[2&p[0],h.value]),p[0]){case 0:case 1:h=p;break;case 4:return v.label++,{value:p[1],done:!1};case 5:v.label++,f=p[1],p=[0];continue;case 7:p=v.ops.pop(),v.trys.pop();continue;default:if(!((h=(h=v.trys).length>0&&h[h.length-1])||p[0]!==6&&p[0]!==2)){v=0;continue}if(p[0]===3&&(!h||p[1]>h[0]&&p[1]<h[3])){v.label=p[1];break}if(p[0]===6&&v.label<h[1]){v.label=h[1],h=p;break}if(h&&v.label<h[2]){v.label=h[2],v.ops.push(p);break}h[2]&&v.ops.pop(),v.trys.pop();continue}p=l.call(u,v)}catch(_){p=[6,_],f=0}finally{c=h=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}([w,b])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=t(9305),a=t(6781),s=function(){function u(l){var c=l.authTokenManager,f=l.userAgent,h=l.boltAgent;this._authTokenManager=c||(0,o.staticAuthTokenManager)({}),this._userAgent=f,this._boltAgent=h}return u.prototype.authenticate=function(l){var c=l.connection,f=l.auth,h=l.skipReAuth,d=l.waitReAuth,v=l.forceReAuth;return n(this,void 0,void 0,function(){var y,w;return i(this,function(b){switch(b.label){case 0:return f==null?[3,3]:(y=c.supportsReAuth===!0&&(!a.object.equals(c.authToken,f)&&h!==!0||v===!0),c.authToken==null||y?[4,c.connect(this._userAgent,this._boltAgent,f,d||!1)]:[3,2]);case 1:case 5:return[2,b.sent()];case 2:case 6:return[2,c];case 3:return[4,this._authTokenManager.getToken()];case 4:return w=b.sent(),a.object.equals(w,c.authToken)?[3,6]:[4,c.connect(this._userAgent,this._boltAgent,w,!1)]}})})},u.prototype.handleError=function(l){var c=l.connection,f=l.code;return!(!c||!f.startsWith("Neo.ClientError.Security."))&&this._authTokenManager.handleSecurityException(c.authToken,f)},u}();e.default=s},4271:function(r,e,t){var n=this&&this.__awaiter||function(s,u,l,c){return new(l||(l=Promise))(function(f,h){function d(w){try{y(c.next(w))}catch(b){h(b)}}function v(w){try{y(c.throw(w))}catch(b){h(b)}}function y(w){var b;w.done?f(w.value):(b=w.value,b instanceof l?b:new l(function(p){p(b)})).then(d,v)}y((c=c.apply(s,u||[])).next())})},i=this&&this.__generator||function(s,u){var l,c,f,h,d={label:0,sent:function(){if(1&f[0])throw f[1];return f[1]},trys:[],ops:[]};return h={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function v(y){return function(w){return function(b){if(l)throw new TypeError("Generator is already executing.");for(;h&&(h=0,b[0]&&(d=0)),d;)try{if(l=1,c&&(f=2&b[0]?c.return:b[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,b[1])).done)return f;switch(c=0,f&&(b=[2&b[0],f.value]),b[0]){case 0:case 1:f=b;break;case 4:return d.label++,{value:b[1],done:!1};case 5:d.label++,c=b[1],b=[0];continue;case 7:b=d.ops.pop(),d.trys.pop();continue;default:if(!((f=(f=d.trys).length>0&&f[f.length-1])||b[0]!==6&&b[0]!==2)){d=0;continue}if(b[0]===3&&(!f||b[1]>f[0]&&b[1]<f[3])){d.label=b[1];break}if(b[0]===6&&d.label<f[1]){d.label=f[1],f=b;break}if(f&&d.label<f[2]){d.label=f[2],d.ops.push(b);break}f[2]&&d.ops.pop(),d.trys.pop();continue}b=u.call(s,d)}catch(p){b=[6,p],c=0}finally{l=f=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}([y,w])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=t(7452),a=function(){function s(u){var l=u.clientCertificateProvider,c=u.loader;this._clientCertificateProvider=l,this._loader=c||o.ClientCertificatesLoader,this._clientCertificate=null}return s.prototype.getClientCertificate=function(){return n(this,void 0,void 0,function(){var u,l,c=this;return i(this,function(f){switch(f.label){case 0:return(u=this._clientCertificateProvider!=null)?(l=this._clientCertificate==null)?[3,2]:[4,this._clientCertificateProvider.hasUpdate()]:[3,3];case 1:l=f.sent(),f.label=2;case 2:u=l,f.label=3;case 3:return u&&(this._clientCertificate=Promise.resolve(this._clientCertificateProvider.getClientCertificate()).then(this._loader.load).then(function(h){return c._clientCertificate=h,c._clientCertificate}).catch(function(h){throw c._clientCertificate=null,h})),[2,this._clientCertificate]}})})},s}();e.default=a},3545:function(r,e,t){var n,i=this&&this.__extends||(n=function(p,_){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,P){O.__proto__=P}||function(O,P){for(var R in P)Object.prototype.hasOwnProperty.call(P,R)&&(O[R]=P[R])},n(p,_)},function(p,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function O(){this.constructor=p}n(p,_),p.prototype=_===null?Object.create(_):(O.prototype=_.prototype,new O)}),o=this&&this.__awaiter||function(p,_,O,P){return new(O||(O=Promise))(function(R,T){function A(j){try{N(P.next(j))}catch(B){T(B)}}function M(j){try{N(P.throw(j))}catch(B){T(B)}}function N(j){var B;j.done?R(j.value):(B=j.value,B instanceof O?B:new O(function(q){q(B)})).then(A,M)}N((P=P.apply(p,_||[])).next())})},a=this&&this.__generator||function(p,_){var O,P,R,T,A={label:0,sent:function(){if(1&R[0])throw R[1];return R[1]},trys:[],ops:[]};return T={next:M(0),throw:M(1),return:M(2)},typeof Symbol=="function"&&(T[Symbol.iterator]=function(){return this}),T;function M(N){return function(j){return function(B){if(O)throw new TypeError("Generator is already executing.");for(;T&&(T=0,B[0]&&(A=0)),A;)try{if(O=1,P&&(R=2&B[0]?P.return:B[0]?P.throw||((R=P.return)&&R.call(P),0):P.next)&&!(R=R.call(P,B[1])).done)return R;switch(P=0,R&&(B=[2&B[0],R.value]),B[0]){case 0:case 1:R=B;break;case 4:return A.label++,{value:B[1],done:!1};case 5:A.label++,P=B[1],B=[0];continue;case 7:B=A.ops.pop(),A.trys.pop();continue;default:if(!((R=(R=A.trys).length>0&&R[R.length-1])||B[0]!==6&&B[0]!==2)){A=0;continue}if(B[0]===3&&(!R||B[1]>R[0]&&B[1]<R[3])){A.label=B[1];break}if(B[0]===6&&A.label<R[1]){A.label=R[1],R=B;break}if(R&&A.label<R[2]){A.label=R[2],A.ops.push(B);break}R[2]&&A.ops.pop(),A.trys.pop();continue}B=_.call(p,A)}catch(q){B=[6,q],P=0}finally{O=R=0}if(5&B[0])throw B[1];return{value:B[0]?B[1]:void 0,done:!0}}([N,j])}}},s=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(e,"__esModule",{value:!0});var u=s(t(8987)),l=t(7721),c=t(9305),f=c.internal.constants,h=f.BOLT_PROTOCOL_V3,d=f.BOLT_PROTOCOL_V4_0,v=f.BOLT_PROTOCOL_V4_4,y=f.BOLT_PROTOCOL_V5_1,w=c.error.SERVICE_UNAVAILABLE,b=function(p){function _(O){var P=O.id,R=O.config,T=O.log,A=O.address,M=O.userAgent,N=O.boltAgent,j=O.authTokenManager,B=O.newPool,q=p.call(this,{id:P,config:R,log:T,userAgent:M,boltAgent:N,authTokenManager:j,newPool:B})||this;return q._address=A,q}return i(_,p),_.prototype.acquireConnection=function(O){var P=O===void 0?{}:O,R=(P.accessMode,P.database),T=(P.bookmarks,P.auth),A=P.forceReAuth;return o(this,void 0,void 0,function(){var M,N,j=this;return a(this,function(B){switch(B.label){case 0:return M=l.ConnectionErrorHandler.create({errorCode:w,handleSecurityError:function(q,W,J){return j._handleSecurityError(q,W,J,R)}}),[4,this._connectionPool.acquire({auth:T,forceReAuth:A},this._address)];case 1:return N=B.sent(),T?[4,this._verifyStickyConnection({auth:T,connection:N,address:this._address})]:[3,3];case 2:return B.sent(),[2,N];case 3:return[2,new l.DelegateConnection(N,M)]}})})},_.prototype._handleSecurityError=function(O,P,R,T){return this._log.warn("Direct driver ".concat(this._id," will close connection to ").concat(P," for database '").concat(T,"' because of an error ").concat(O.code," '").concat(O.message,"'")),p.prototype._handleSecurityError.call(this,O,P,R)},_.prototype._hasProtocolVersion=function(O){return o(this,void 0,void 0,function(){var P,R;return a(this,function(T){switch(T.label){case 0:return[4,this._createChannelConnection(this._address)];case 1:return P=T.sent(),R=P.protocol()?P.protocol().version:null,[4,P.close()];case 2:return T.sent(),R?[2,O(R)]:[2,!1]}})})},_.prototype.supportsMultiDb=function(){return o(this,void 0,void 0,function(){return a(this,function(O){switch(O.label){case 0:return[4,this._hasProtocolVersion(function(P){return P>=d})];case 1:return[2,O.sent()]}})})},_.prototype.getNegotiatedProtocolVersion=function(){var O=this;return new Promise(function(P,R){O._hasProtocolVersion(P).catch(R)})},_.prototype.supportsTransactionConfig=function(){return o(this,void 0,void 0,function(){return a(this,function(O){switch(O.label){case 0:return[4,this._hasProtocolVersion(function(P){return P>=h})];case 1:return[2,O.sent()]}})})},_.prototype.supportsUserImpersonation=function(){return o(this,void 0,void 0,function(){return a(this,function(O){switch(O.label){case 0:return[4,this._hasProtocolVersion(function(P){return P>=v})];case 1:return[2,O.sent()]}})})},_.prototype.supportsSessionAuth=function(){return o(this,void 0,void 0,function(){return a(this,function(O){switch(O.label){case 0:return[4,this._hasProtocolVersion(function(P){return P>=y})];case 1:return[2,O.sent()]}})})},_.prototype.verifyAuthentication=function(O){var P=O.auth;return o(this,void 0,void 0,function(){var R=this;return a(this,function(T){return[2,this._verifyAuthentication({auth:P,getAddress:function(){return R._address}})]})})},_.prototype.verifyConnectivityAndGetServerInfo=function(){return o(this,void 0,void 0,function(){return a(this,function(O){switch(O.label){case 0:return[4,this._verifyConnectivityAndGetServerVersion({address:this._address})];case 1:return[2,O.sent()]}})})},_}(u.default);e.default=b},8987:function(r,e,t){var n,i=this&&this.__extends||(n=function(R,T){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,M){A.__proto__=M}||function(A,M){for(var N in M)Object.prototype.hasOwnProperty.call(M,N)&&(A[N]=M[N])},n(R,T)},function(R,T){if(typeof T!="function"&&T!==null)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");function A(){this.constructor=R}n(R,T),R.prototype=T===null?Object.create(T):(A.prototype=T.prototype,new A)}),o=this&&this.__awaiter||function(R,T,A,M){return new(A||(A=Promise))(function(N,j){function B(J){try{W(M.next(J))}catch(te){j(te)}}function q(J){try{W(M.throw(J))}catch(te){j(te)}}function W(J){var te;J.done?N(J.value):(te=J.value,te instanceof A?te:new A(function(re){re(te)})).then(B,q)}W((M=M.apply(R,T||[])).next())})},a=this&&this.__generator||function(R,T){var A,M,N,j,B={label:0,sent:function(){if(1&N[0])throw N[1];return N[1]},trys:[],ops:[]};return j={next:q(0),throw:q(1),return:q(2)},typeof Symbol=="function"&&(j[Symbol.iterator]=function(){return this}),j;function q(W){return function(J){return function(te){if(A)throw new TypeError("Generator is already executing.");for(;j&&(j=0,te[0]&&(B=0)),B;)try{if(A=1,M&&(N=2&te[0]?M.return:te[0]?M.throw||((N=M.return)&&N.call(M),0):M.next)&&!(N=N.call(M,te[1])).done)return N;switch(M=0,N&&(te=[2&te[0],N.value]),te[0]){case 0:case 1:N=te;break;case 4:return B.label++,{value:te[1],done:!1};case 5:B.label++,M=te[1],te=[0];continue;case 7:te=B.ops.pop(),B.trys.pop();continue;default:if(!((N=(N=B.trys).length>0&&N[N.length-1])||te[0]!==6&&te[0]!==2)){B=0;continue}if(te[0]===3&&(!N||te[1]>N[0]&&te[1]<N[3])){B.label=te[1];break}if(te[0]===6&&B.label<N[1]){B.label=N[1],N=te;break}if(N&&B.label<N[2]){B.label=N[2],B.ops.push(te);break}N[2]&&B.ops.pop(),B.trys.pop();continue}te=T.call(R,B)}catch(re){te=[6,re],M=0}finally{A=N=0}if(5&te[0])throw te[1];return{value:te[0]?te[1]:void 0,done:!0}}([W,J])}}},s=this&&this.__read||function(R,T){var A=typeof Symbol=="function"&&R[Symbol.iterator];if(!A)return R;var M,N,j=A.call(R),B=[];try{for(;(T===void 0||T-- >0)&&!(M=j.next()).done;)B.push(M.value)}catch(q){N={error:q}}finally{try{M&&!M.done&&(A=j.return)&&A.call(j)}finally{if(N)throw N.error}}return B},u=this&&this.__spreadArray||function(R,T,A){if(A||arguments.length===2)for(var M,N=0,j=T.length;N<j;N++)!M&&N in T||(M||(M=Array.prototype.slice.call(T,0,N)),M[N]=T[N]);return R.concat(M||Array.prototype.slice.call(T))},l=this&&this.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(e,"__esModule",{value:!0});var c=t(7721),f=t(9305),h=l(t(1839)),d=t(6781),v=l(t(4531)),y=l(t(4271)),w=f.error.SERVICE_UNAVAILABLE,b=["Neo.ClientError.Security.CredentialsExpired","Neo.ClientError.Security.Forbidden","Neo.ClientError.Security.TokenExpired","Neo.ClientError.Security.Unauthorized"],p=f.internal.pool,_=p.Pool,O=p.PoolConfig,P=function(R){function T(A,M){var N=A.id,j=A.config,B=A.log,q=A.userAgent,W=A.boltAgent,J=A.authTokenManager,te=A.newPool,re=te===void 0?function(){for(var fe=[],he=0;he<arguments.length;he++)fe[he]=arguments[he];return new(_.bind.apply(_,u([void 0],s(fe),!1)))}:te;M===void 0&&(M=null);var ee=R.call(this)||this;return ee._id=N,ee._config=j,ee._log=B,ee._clientCertificateHolder=new y.default({clientCertificateProvider:ee._config.clientCertificate}),ee._authenticationProvider=new h.default({authTokenManager:J,userAgent:q,boltAgent:W}),ee._livenessCheckProvider=new v.default({connectionLivenessCheckTimeout:j.connectionLivenessCheckTimeout}),ee._userAgent=q,ee._boltAgent=W,ee._createChannelConnection=M||function(fe){return o(ee,void 0,void 0,function(){var he,se;return a(this,function(me){switch(me.label){case 0:return he=c.createChannelConnection,se=[fe,this._config,this._createConnectionErrorHandler(),this._log],[4,this._clientCertificateHolder.getClientCertificate()];case 1:return[2,he.apply(void 0,se.concat([me.sent()]))]}})})},ee._connectionPool=re({create:ee._createConnection.bind(ee),destroy:ee._destroyConnection.bind(ee),validateOnAcquire:ee._validateConnectionOnAcquire.bind(ee),validateOnRelease:ee._validateConnectionOnRelease.bind(ee),installIdleObserver:T._installIdleObserverOnConnection.bind(ee),removeIdleObserver:T._removeIdleObserverOnConnection.bind(ee),config:O.fromDriverConfig(j),log:ee._log}),ee._openConnections={},ee}return i(T,R),T.prototype._createConnectionErrorHandler=function(){return new c.ConnectionErrorHandler(w)},T.prototype._getClientCertificate=function(){return o(this,void 0,void 0,function(){return a(this,function(A){return[2,this._config.clientCertificate.getClientCertificate()]})})},T.prototype._createConnection=function(A,M,N){var j=this,B=A.auth;return this._createChannelConnection(M).then(function(q){return q.release=function(){return q.idleTimestamp=Date.now(),N(M,q)},j._openConnections[q.id]=q,j._authenticationProvider.authenticate({connection:q,auth:B}).catch(function(W){throw j._destroyConnection(q),W})})},T.prototype._validateConnectionOnAcquire=function(A,M){var N=A.auth,j=A.skipReAuth;return o(this,void 0,void 0,function(){var B,q;return a(this,function(W){switch(W.label){case 0:if(!this._validateConnection(M))return[2,!1];W.label=1;case 1:return W.trys.push([1,3,,4]),[4,this._livenessCheckProvider.check(M)];case 2:return W.sent(),[3,4];case 3:return B=W.sent(),this._log.debug("The connection ".concat(M.id," is not alive because of an error ").concat(B.code," '").concat(B.message,"'")),[2,!1];case 4:return W.trys.push([4,6,,7]),[4,this._authenticationProvider.authenticate({connection:M,auth:N,skipReAuth:j})];case 5:return W.sent(),[2,!0];case 6:return q=W.sent(),this._log.debug("The connection ".concat(M.id," is not valid because of an error ").concat(q.code," '").concat(q.message,"'")),[2,!1];case 7:return[2]}})})},T.prototype._validateConnectionOnRelease=function(A){return A._sticky!==!0&&this._validateConnection(A)},T.prototype._validateConnection=function(A){if(!A.isOpen())return!1;var M=this._config.maxConnectionLifetime;return!(Date.now()-A.creationTimestamp>M)},T.prototype._destroyConnection=function(A){return delete this._openConnections[A.id],A.close()},T.prototype._verifyConnectivityAndGetServerVersion=function(A){var M=A.address;return o(this,void 0,void 0,function(){var N,j;return a(this,function(B){switch(B.label){case 0:return[4,this._connectionPool.acquire({},M)];case 1:N=B.sent(),j=new f.ServerInfo(N.server,N.protocol().version),B.label=2;case 2:return B.trys.push([2,,5,7]),N.protocol().isLastMessageLogon()?[3,4]:[4,N.resetAndFlush()];case 3:B.sent(),B.label=4;case 4:return[3,7];case 5:return[4,N.release()];case 6:return B.sent(),[7];case 7:return[2,j]}})})},T.prototype._verifyAuthentication=function(A){var M=A.getAddress,N=A.auth;return o(this,void 0,void 0,function(){var j,B,q,W,J,te;return a(this,function(re){switch(re.label){case 0:j=[],re.label=1;case 1:return re.trys.push([1,8,9,11]),[4,M()];case 2:return B=re.sent(),[4,this._connectionPool.acquire({auth:N,skipReAuth:!0},B)];case 3:if(q=re.sent(),j.push(q),W=!q.protocol().isLastMessageLogon(),!q.supportsReAuth)throw(0,f.newError)("Driver is connected to a database that does not support user switch.");return W&&q.supportsReAuth?[4,this._authenticationProvider.authenticate({connection:q,auth:N,waitReAuth:!0,forceReAuth:!0})]:[3,5];case 4:return re.sent(),[3,7];case 5:return!W||q.supportsReAuth?[3,7]:[4,this._connectionPool.acquire({auth:N},B,{requireNew:!0})];case 6:(J=re.sent())._sticky=!0,j.push(J),re.label=7;case 7:return[2,!0];case 8:if(te=re.sent(),b.includes(te.code))return[2,!1];throw te;case 9:return[4,Promise.all(j.map(function(ee){return ee.release()}))];case 10:return re.sent(),[7];case 11:return[2]}})})},T.prototype._verifyStickyConnection=function(A){var M=A.auth,N=A.connection;return A.address,o(this,void 0,void 0,function(){var j,B;return a(this,function(q){switch(q.label){case 0:return j=d.object.equals(M,N.authToken),B=!j,N._sticky=j&&!N.supportsReAuth,B||N._sticky?[4,N.release()]:[3,2];case 1:throw q.sent(),(0,f.newError)("Driver is connected to a database that does not support user switch.");case 2:return[2]}})})},T.prototype.close=function(){return o(this,void 0,void 0,function(){return a(this,function(A){switch(A.label){case 0:return[4,this._connectionPool.close()];case 1:return A.sent(),[4,Promise.all(Object.values(this._openConnections).map(function(M){return M.close()}))];case 2:return A.sent(),[2]}})})},T._installIdleObserverOnConnection=function(A,M){A._setIdle(M)},T._removeIdleObserverOnConnection=function(A){A._unsetIdle()},T.prototype._handleSecurityError=function(A,M,N){return this._authenticationProvider.handleError({connection:N,code:A.code})&&(A.retriable=!0),A.code==="Neo.ClientError.Security.AuthorizationExpired"&&this._connectionPool.apply(M,function(j){j.authToken=null}),N&&N.close().catch(function(){}),A},T}(f.ConnectionProvider);e.default=P},7428:function(r,e,t){var n,i=this&&this.__extends||(n=function(Me,Pe){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(de,Oe){de.__proto__=Oe}||function(de,Oe){for(var Ae in Oe)Object.prototype.hasOwnProperty.call(Oe,Ae)&&(de[Ae]=Oe[Ae])},n(Me,Pe)},function(Me,Pe){if(typeof Pe!="function"&&Pe!==null)throw new TypeError("Class extends value "+String(Pe)+" is not a constructor or null");function de(){this.constructor=Me}n(Me,Pe),Me.prototype=Pe===null?Object.create(Pe):(de.prototype=Pe.prototype,new de)}),o=this&&this.__assign||function(){return o=Object.assign||function(Me){for(var Pe,de=1,Oe=arguments.length;de<Oe;de++)for(var Ae in Pe=arguments[de])Object.prototype.hasOwnProperty.call(Pe,Ae)&&(Me[Ae]=Pe[Ae]);return Me},o.apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(Me,Pe,de,Oe){Oe===void 0&&(Oe=de);var Ae=Object.getOwnPropertyDescriptor(Pe,de);Ae&&!("get"in Ae?!Pe.__esModule:Ae.writable||Ae.configurable)||(Ae={enumerable:!0,get:function(){return Pe[de]}}),Object.defineProperty(Me,Oe,Ae)}:function(Me,Pe,de,Oe){Oe===void 0&&(Oe=de),Me[Oe]=Pe[de]}),s=this&&this.__setModuleDefault||(Object.create?function(Me,Pe){Object.defineProperty(Me,"default",{enumerable:!0,value:Pe})}:function(Me,Pe){Me.default=Pe}),u=this&&this.__importStar||function(Me){if(Me&&Me.__esModule)return Me;var Pe={};if(Me!=null)for(var de in Me)de!=="default"&&Object.prototype.hasOwnProperty.call(Me,de)&&a(Pe,Me,de);return s(Pe,Me),Pe},l=this&&this.__awaiter||function(Me,Pe,de,Oe){return new(de||(de=Promise))(function(Ae,Ve){function tt(ut){try{xt(Oe.next(ut))}catch(H){Ve(H)}}function ht(ut){try{xt(Oe.throw(ut))}catch(H){Ve(H)}}function xt(ut){var H;ut.done?Ae(ut.value):(H=ut.value,H instanceof de?H:new de(function(X){X(H)})).then(tt,ht)}xt((Oe=Oe.apply(Me,Pe||[])).next())})},c=this&&this.__generator||function(Me,Pe){var de,Oe,Ae,Ve,tt={label:0,sent:function(){if(1&Ae[0])throw Ae[1];return Ae[1]},trys:[],ops:[]};return Ve={next:ht(0),throw:ht(1),return:ht(2)},typeof Symbol=="function"&&(Ve[Symbol.iterator]=function(){return this}),Ve;function ht(xt){return function(ut){return function(H){if(de)throw new TypeError("Generator is already executing.");for(;Ve&&(Ve=0,H[0]&&(tt=0)),tt;)try{if(de=1,Oe&&(Ae=2&H[0]?Oe.return:H[0]?Oe.throw||((Ae=Oe.return)&&Ae.call(Oe),0):Oe.next)&&!(Ae=Ae.call(Oe,H[1])).done)return Ae;switch(Oe=0,Ae&&(H=[2&H[0],Ae.value]),H[0]){case 0:case 1:Ae=H;break;case 4:return tt.label++,{value:H[1],done:!1};case 5:tt.label++,Oe=H[1],H=[0];continue;case 7:H=tt.ops.pop(),tt.trys.pop();continue;default:if(!((Ae=(Ae=tt.trys).length>0&&Ae[Ae.length-1])||H[0]!==6&&H[0]!==2)){tt=0;continue}if(H[0]===3&&(!Ae||H[1]>Ae[0]&&H[1]<Ae[3])){tt.label=H[1];break}if(H[0]===6&&tt.label<Ae[1]){tt.label=Ae[1],Ae=H;break}if(Ae&&tt.label<Ae[2]){tt.label=Ae[2],tt.ops.push(H);break}Ae[2]&&tt.ops.pop(),tt.trys.pop();continue}H=Pe.call(Me,tt)}catch(X){H=[6,X],Oe=0}finally{de=Ae=0}if(5&H[0])throw H[1];return{value:H[0]?H[1]:void 0,done:!0}}([xt,ut])}}},f=this&&this.__values||function(Me){var Pe=typeof Symbol=="function"&&Symbol.iterator,de=Pe&&Me[Pe],Oe=0;if(de)return de.call(Me);if(Me&&typeof Me.length=="number")return{next:function(){return Me&&Oe>=Me.length&&(Me=void 0),{value:Me&&Me[Oe++],done:!Me}}};throw new TypeError(Pe?"Object is not iterable.":"Symbol.iterator is not defined.")},h=this&&this.__read||function(Me,Pe){var de=typeof Symbol=="function"&&Me[Symbol.iterator];if(!de)return Me;var Oe,Ae,Ve=de.call(Me),tt=[];try{for(;(Pe===void 0||Pe-- >0)&&!(Oe=Ve.next()).done;)tt.push(Oe.value)}catch(ht){Ae={error:ht}}finally{try{Oe&&!Oe.done&&(de=Ve.return)&&de.call(Ve)}finally{if(Ae)throw Ae.error}}return tt},d=this&&this.__importDefault||function(Me){return Me&&Me.__esModule?Me:{default:Me}};Object.defineProperty(e,"__esModule",{value:!0});var v=t(9305),y=u(t(206)),w=t(7452),b=d(t(4132)),p=d(t(8987)),_=t(4455),O=t(7721),P=t(6781),R=v.error.SERVICE_UNAVAILABLE,T=v.error.SESSION_EXPIRED,A=v.internal.bookmarks.Bookmarks,M=v.internal.constants,N=M.ACCESS_MODE_READ,j=M.ACCESS_MODE_WRITE,B=M.BOLT_PROTOCOL_V3,q=M.BOLT_PROTOCOL_V4_0,W=M.BOLT_PROTOCOL_V4_4,J=M.BOLT_PROTOCOL_V5_1,te="Neo.ClientError.Database.DatabaseNotFound",re="Neo.ClientError.Transaction.InvalidBookmark",ee="Neo.ClientError.Transaction.InvalidBookmarkMixture",fe="Neo.ClientError.Security.AuthorizationExpired",he="Neo.ClientError.Statement.ArgumentError",se="Neo.ClientError.Request.Invalid",me="Neo.ClientError.Statement.TypeError",De="N/A",Le=null,Ie=(0,v.int)(3e4),qe=function(Me){function Pe(de){var Oe=de.id,Ae=de.address,Ve=de.routingContext,tt=de.hostNameResolver,ht=de.config,xt=de.log,ut=de.userAgent,H=de.boltAgent,X=de.authTokenManager,ne=de.routingTablePurgeDelay,Se=de.newPool,Te=Me.call(this,{id:Oe,config:ht,log:xt,userAgent:ut,boltAgent:H,authTokenManager:X,newPool:Se},function(Ne){return l(Te,void 0,void 0,function(){var et,wt;return c(this,function(lt){switch(lt.label){case 0:return et=O.createChannelConnection,wt=[Ne,this._config,this._createConnectionErrorHandler(),this._log],[4,this._clientCertificateHolder.getClientCertificate()];case 1:return[2,et.apply(void 0,wt.concat([lt.sent(),this._routingContext]))]}})})})||this;return Te._routingContext=o(o({},Ve),{address:Ae.toString()}),Te._seedRouter=Ae,Te._rediscovery=new y.default(Te._routingContext),Te._loadBalancingStrategy=new _.LeastConnectedLoadBalancingStrategy(Te._connectionPool),Te._hostNameResolver=tt,Te._dnsResolver=new w.HostNameResolver,Te._log=xt,Te._useSeedRouter=!0,Te._routingTableRegistry=new Ge(ne?(0,v.int)(ne):Ie),Te._refreshRoutingTable=P.functional.reuseOngoingRequest(Te._refreshRoutingTable,Te),Te}return i(Pe,Me),Pe.prototype._createConnectionErrorHandler=function(){return new O.ConnectionErrorHandler(T)},Pe.prototype._handleUnavailability=function(de,Oe,Ae){return this._log.warn("Routing driver ".concat(this._id," will forget ").concat(Oe," for database '").concat(Ae,"' because of an error ").concat(de.code," '").concat(de.message,"'")),this.forget(Oe,Ae||Le),de},Pe.prototype._handleSecurityError=function(de,Oe,Ae,Ve){return this._log.warn("Routing driver ".concat(this._id," will close connections to ").concat(Oe," for database '").concat(Ve,"' because of an error ").concat(de.code," '").concat(de.message,"'")),Me.prototype._handleSecurityError.call(this,de,Oe,Ae,Ve)},Pe.prototype._handleWriteFailure=function(de,Oe,Ae){return this._log.warn("Routing driver ".concat(this._id," will forget writer ").concat(Oe," for database '").concat(Ae,"' because of an error ").concat(de.code," '").concat(de.message,"'")),this.forgetWriter(Oe,Ae||Le),(0,v.newError)("No longer possible to write to server at "+Oe,T,de)},Pe.prototype.acquireConnection=function(de){var Oe=de===void 0?{}:de,Ae=Oe.accessMode,Ve=Oe.database,tt=Oe.bookmarks,ht=Oe.impersonatedUser,xt=Oe.onDatabaseNameResolved,ut=Oe.auth;return l(this,void 0,void 0,function(){var H,X,ne,Se,Te,Ne,et,wt=this;return c(this,function(lt){switch(lt.label){case 0:return ne={database:Ve||Le},Se=new O.ConnectionErrorHandler(T,function(pe,Ue){return wt._handleUnavailability(pe,Ue,ne.database)},function(pe,Ue){return wt._handleWriteFailure(pe,Ue,ne.database)},function(pe,Ue,nt){return wt._handleSecurityError(pe,Ue,nt,ne.database)}),[4,this._freshRoutingTable({accessMode:Ae,database:ne.database,bookmarks:tt,impersonatedUser:ht,auth:ut,onDatabaseNameResolved:function(pe){ne.database=ne.database||pe,xt&&xt(pe)}})];case 1:if(Te=lt.sent(),Ae===N)X=this._loadBalancingStrategy.selectReader(Te.readers),H="read";else{if(Ae!==j)throw(0,v.newError)("Illegal mode "+Ae);X=this._loadBalancingStrategy.selectWriter(Te.writers),H="write"}if(!X)throw(0,v.newError)("Failed to obtain connection towards ".concat(H," server. Known routing table is: ").concat(Te),T);lt.label=2;case 2:return lt.trys.push([2,6,,7]),[4,this._connectionPool.acquire({auth:ut},X)];case 3:return Ne=lt.sent(),ut?[4,this._verifyStickyConnection({auth:ut,connection:Ne,address:X})]:[3,5];case 4:return lt.sent(),[2,Ne];case 5:return[2,new O.DelegateConnection(Ne,Se)];case 6:throw et=lt.sent(),Se.handleAndTransformError(et,X);case 7:return[2]}})})},Pe.prototype._hasProtocolVersion=function(de){return l(this,void 0,void 0,function(){var Oe,Ae,Ve,tt,ht,xt;return c(this,function(ut){switch(ut.label){case 0:return[4,this._resolveSeedRouter(this._seedRouter)];case 1:Oe=ut.sent(),Ve=0,ut.label=2;case 2:if(!(Ve<Oe.length))return[3,8];ut.label=3;case 3:return ut.trys.push([3,6,,7]),[4,this._createChannelConnection(Oe[Ve])];case 4:return tt=ut.sent(),ht=tt.protocol()?tt.protocol().version:null,[4,tt.close()];case 5:return ut.sent(),ht?[2,de(ht)]:[2,!1];case 6:return xt=ut.sent(),Ae=xt,[3,7];case 7:return Ve++,[3,2];case 8:if(Ae)throw Ae;return[2,!1]}})})},Pe.prototype.supportsMultiDb=function(){return l(this,void 0,void 0,function(){return c(this,function(de){switch(de.label){case 0:return[4,this._hasProtocolVersion(function(Oe){return Oe>=q})];case 1:return[2,de.sent()]}})})},Pe.prototype.supportsTransactionConfig=function(){return l(this,void 0,void 0,function(){return c(this,function(de){switch(de.label){case 0:return[4,this._hasProtocolVersion(function(Oe){return Oe>=B})];case 1:return[2,de.sent()]}})})},Pe.prototype.supportsUserImpersonation=function(){return l(this,void 0,void 0,function(){return c(this,function(de){switch(de.label){case 0:return[4,this._hasProtocolVersion(function(Oe){return Oe>=W})];case 1:return[2,de.sent()]}})})},Pe.prototype.supportsSessionAuth=function(){return l(this,void 0,void 0,function(){return c(this,function(de){switch(de.label){case 0:return[4,this._hasProtocolVersion(function(Oe){return Oe>=J})];case 1:return[2,de.sent()]}})})},Pe.prototype.getNegotiatedProtocolVersion=function(){var de=this;return new Promise(function(Oe,Ae){de._hasProtocolVersion(Oe).catch(Ae)})},Pe.prototype.verifyAuthentication=function(de){var Oe=de.database,Ae=de.accessMode,Ve=de.auth;return l(this,void 0,void 0,function(){var tt=this;return c(this,function(ht){return[2,this._verifyAuthentication({auth:Ve,getAddress:function(){return l(tt,void 0,void 0,function(){var xt,ut,H;return c(this,function(X){switch(X.label){case 0:return xt={database:Oe||Le},[4,this._freshRoutingTable({accessMode:Ae,database:xt.database,auth:Ve,onDatabaseNameResolved:function(ne){xt.database=xt.database||ne}})];case 1:if(ut=X.sent(),(H=Ae===j?ut.writers:ut.readers).length===0)throw(0,v.newError)("No servers available for database '".concat(xt.database,"' with access mode '").concat(Ae,"'"),R);return[2,H[0]]}})})}})]})})},Pe.prototype.verifyConnectivityAndGetServerInfo=function(de){var Oe=de.database,Ae=de.accessMode;return l(this,void 0,void 0,function(){var Ve,tt,ht,xt,ut,H,X,ne,Se,Te,Ne;return c(this,function(et){switch(et.label){case 0:return Ve={database:Oe||Le},[4,this._freshRoutingTable({accessMode:Ae,database:Ve.database,onDatabaseNameResolved:function(wt){Ve.database=Ve.database||wt}})];case 1:tt=et.sent(),ht=Ae===j?tt.writers:tt.readers,xt=(0,v.newError)("No servers available for database '".concat(Ve.database,"' with access mode '").concat(Ae,"'"),R),et.label=2;case 2:et.trys.push([2,9,10,11]),ut=f(ht),H=ut.next(),et.label=3;case 3:if(H.done)return[3,8];X=H.value,et.label=4;case 4:return et.trys.push([4,6,,7]),[4,this._verifyConnectivityAndGetServerVersion({address:X})];case 5:return[2,et.sent()];case 6:return ne=et.sent(),xt=ne,[3,7];case 7:return H=ut.next(),[3,3];case 8:return[3,11];case 9:return Se=et.sent(),Te={error:Se},[3,11];case 10:try{H&&!H.done&&(Ne=ut.return)&&Ne.call(ut)}finally{if(Te)throw Te.error}return[7];case 11:throw xt}})})},Pe.prototype.forget=function(de,Oe){this._routingTableRegistry.apply(Oe,{applyWhenExists:function(Ae){return Ae.forget(de)}}),this._connectionPool.purge(de).catch(function(){})},Pe.prototype.forgetWriter=function(de,Oe){this._routingTableRegistry.apply(Oe,{applyWhenExists:function(Ae){return Ae.forgetWriter(de)}})},Pe.prototype._freshRoutingTable=function(de){var Oe=de===void 0?{}:de,Ae=Oe.accessMode,Ve=Oe.database,tt=Oe.bookmarks,ht=Oe.impersonatedUser,xt=Oe.onDatabaseNameResolved,ut=Oe.auth,H=this._routingTableRegistry.get(Ve,function(){return new y.RoutingTable({database:Ve})});return H.isStaleFor(Ae)?(this._log.info('Routing table is stale for database: "'.concat(Ve,'" and access mode: "').concat(Ae,'": ').concat(H)),this._refreshRoutingTable(H,tt,ht,ut).then(function(X){return xt(X.database),X})):H},Pe.prototype._refreshRoutingTable=function(de,Oe,Ae,Ve){var tt=de.routers;return this._useSeedRouter?this._fetchRoutingTableFromSeedRouterFallbackToKnownRouters(tt,de,Oe,Ae,Ve):this._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter(tt,de,Oe,Ae,Ve)},Pe.prototype._fetchRoutingTableFromSeedRouterFallbackToKnownRouters=function(de,Oe,Ae,Ve,tt){return l(this,void 0,void 0,function(){var ht,xt,ut,H,X,ne,Se;return c(this,function(Te){switch(Te.label){case 0:return ht=[],[4,this._fetchRoutingTableUsingSeedRouter(ht,this._seedRouter,Oe,Ae,Ve,tt)];case 1:return xt=h.apply(void 0,[Te.sent(),2]),ut=xt[0],H=xt[1],ut?(this._useSeedRouter=!1,[3,4]):[3,2];case 2:return[4,this._fetchRoutingTableUsingKnownRouters(de,Oe,Ae,Ve,tt)];case 3:X=h.apply(void 0,[Te.sent(),2]),ne=X[0],Se=X[1],ut=ne,H=Se||H,Te.label=4;case 4:return[4,this._applyRoutingTableIfPossible(Oe,ut,H)];case 5:return[2,Te.sent()]}})})},Pe.prototype._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter=function(de,Oe,Ae,Ve,tt){return l(this,void 0,void 0,function(){var ht,xt,ut,H;return c(this,function(X){switch(X.label){case 0:return[4,this._fetchRoutingTableUsingKnownRouters(de,Oe,Ae,Ve,tt)];case 1:return ht=h.apply(void 0,[X.sent(),2]),xt=ht[0],ut=ht[1],xt?[3,3]:[4,this._fetchRoutingTableUsingSeedRouter(de,this._seedRouter,Oe,Ae,Ve,tt)];case 2:H=h.apply(void 0,[X.sent(),2]),xt=H[0],ut=H[1],X.label=3;case 3:return[4,this._applyRoutingTableIfPossible(Oe,xt,ut)];case 4:return[2,X.sent()]}})})},Pe.prototype._fetchRoutingTableUsingKnownRouters=function(de,Oe,Ae,Ve,tt){return l(this,void 0,void 0,function(){var ht,xt,ut,H;return c(this,function(X){switch(X.label){case 0:return[4,this._fetchRoutingTable(de,Oe,Ae,Ve,tt)];case 1:return ht=h.apply(void 0,[X.sent(),2]),xt=ht[0],ut=ht[1],xt?[2,[xt,null]]:(H=de.length-1,Pe._forgetRouter(Oe,de,H),[2,[null,ut]])}})})},Pe.prototype._fetchRoutingTableUsingSeedRouter=function(de,Oe,Ae,Ve,tt,ht){return l(this,void 0,void 0,function(){var xt,ut;return c(this,function(H){switch(H.label){case 0:return[4,this._resolveSeedRouter(Oe)];case 1:return xt=H.sent(),ut=xt.filter(function(X){return de.indexOf(X)<0}),[4,this._fetchRoutingTable(ut,Ae,Ve,tt,ht)];case 2:return[2,H.sent()]}})})},Pe.prototype._resolveSeedRouter=function(de){return l(this,void 0,void 0,function(){var Oe,Ae,Ve=this;return c(this,function(tt){switch(tt.label){case 0:return[4,this._hostNameResolver.resolve(de)];case 1:return Oe=tt.sent(),[4,Promise.all(Oe.map(function(ht){return Ve._dnsResolver.resolve(ht)}))];case 2:return Ae=tt.sent(),[2,[].concat.apply([],Ae)]}})})},Pe.prototype._fetchRoutingTable=function(de,Oe,Ae,Ve,tt){return l(this,void 0,void 0,function(){var ht=this;return c(this,function(xt){return[2,de.reduce(function(ut,H,X){return l(ht,void 0,void 0,function(){var ne,Se,Te,Ne,et,wt,lt;return c(this,function(pe){switch(pe.label){case 0:return[4,ut];case 1:return ne=h.apply(void 0,[pe.sent(),1]),(Se=ne[0])?[2,[Se,null]]:(Te=X-1,Pe._forgetRouter(Oe,de,Te),[4,this._createSessionForRediscovery(H,Ae,Ve,tt)]);case 2:if(Ne=h.apply(void 0,[pe.sent(),2]),et=Ne[0],wt=Ne[1],!et)return[3,8];pe.label=3;case 3:return pe.trys.push([3,5,6,7]),[4,this._rediscovery.lookupRoutingTableOnRouter(et,Oe.database,H,Ve)];case 4:return[2,[pe.sent(),null]];case 5:return lt=pe.sent(),[2,this._handleRediscoveryError(lt,H)];case 6:return et.close(),[7];case 7:return[3,9];case 8:return[2,[null,wt]];case 9:return[2]}})})},Promise.resolve([null,null]))]})})},Pe.prototype._createSessionForRediscovery=function(de,Oe,Ae,Ve){return l(this,void 0,void 0,function(){var tt,ht,xt,ut,H,X=this;return c(this,function(ne){switch(ne.label){case 0:return ne.trys.push([0,4,,5]),[4,this._connectionPool.acquire({auth:Ve},de)];case 1:return tt=ne.sent(),Ve?[4,this._verifyStickyConnection({auth:Ve,connection:tt,address:de})]:[3,3];case 2:ne.sent(),ne.label=3;case 3:return ht=O.ConnectionErrorHandler.create({errorCode:T,handleSecurityError:function(Se,Te,Ne){return X._handleSecurityError(Se,Te,Ne)}}),xt=tt._sticky?new O.DelegateConnection(tt):new O.DelegateConnection(tt,ht),ut=new b.default(xt),tt.protocol().version<4?[2,[new v.Session({mode:j,bookmarks:A.empty(),connectionProvider:ut}),null]]:[2,[new v.Session({mode:N,database:"system",bookmarks:Oe,connectionProvider:ut,impersonatedUser:Ae}),null]];case 4:return H=ne.sent(),[2,this._handleRediscoveryError(H,de)];case 5:return[2]}})})},Pe.prototype._handleRediscoveryError=function(de,Oe){if(function(Ae){return[te,re,ee,he,se,me,De].includes(Ae.code)}(de)||function(Ae){return Ae.code.startsWith("Neo.ClientError.Security.")&&![fe].includes(Ae.code)}(de))throw de;if(de.code==="Neo.ClientError.Procedure.ProcedureNotFound")throw(0,v.newError)("Server at ".concat(Oe.asHostPort()," can't perform routing. Make sure you are connecting to a causal cluster"),R,de);return this._log.warn("unable to fetch routing table because of an error ".concat(de)),[null,de]},Pe.prototype._applyRoutingTableIfPossible=function(de,Oe,Ae){return l(this,void 0,void 0,function(){return c(this,function(Ve){switch(Ve.label){case 0:if(!Oe)throw(0,v.newError)("Could not perform discovery. No routing servers available. Known routing table: ".concat(de),R,Ae);return Oe.writers.length===0&&(this._useSeedRouter=!0),[4,this._updateRoutingTable(Oe)];case 1:return Ve.sent(),[2,Oe]}})})},Pe.prototype._updateRoutingTable=function(de){return l(this,void 0,void 0,function(){return c(this,function(Oe){switch(Oe.label){case 0:return[4,this._connectionPool.keepAll(de.allServers())];case 1:return Oe.sent(),this._routingTableRegistry.removeExpired(),this._routingTableRegistry.register(de),this._log.info("Updated routing table ".concat(de)),[2]}})})},Pe._forgetRouter=function(de,Oe,Ae){var Ve=Oe[Ae];de&&Ve&&de.forgetRouter(Ve)},Pe}(p.default);e.default=qe;var Ge=function(){function Me(Pe){this._tables=new Map,this._routingTablePurgeDelay=Pe}return Me.prototype.register=function(Pe){return this._tables.set(Pe.database,Pe),this},Me.prototype.apply=function(Pe,de){var Oe=de===void 0?{}:de,Ae=Oe.applyWhenExists,Ve=Oe.applyWhenDontExists,tt=Ve===void 0?function(){}:Ve;return this._tables.has(Pe)?Ae(this._tables.get(Pe)):typeof Pe=="string"||Pe===null?tt():this._forEach(Ae),this},Me.prototype.get=function(Pe,de){return this._tables.has(Pe)?this._tables.get(Pe):typeof de=="function"?de():de},Me.prototype.removeExpired=function(){var Pe=this;return this._removeIf(function(de){return de.isExpiredFor(Pe._routingTablePurgeDelay)})},Me.prototype._forEach=function(Pe){var de,Oe;try{for(var Ae=f(this._tables),Ve=Ae.next();!Ve.done;Ve=Ae.next())Pe(h(Ve.value,2)[1])}catch(tt){de={error:tt}}finally{try{Ve&&!Ve.done&&(Oe=Ae.return)&&Oe.call(Ae)}finally{if(de)throw de.error}}return this},Me.prototype._remove=function(Pe){return this._tables.delete(Pe),this},Me.prototype._removeIf=function(Pe){var de,Oe;try{for(var Ae=f(this._tables),Ve=Ae.next();!Ve.done;Ve=Ae.next()){var tt=h(Ve.value,2),ht=tt[0];Pe(tt[1])&&this._remove(ht)}}catch(xt){de={error:xt}}finally{try{Ve&&!Ve.done&&(Oe=Ae.return)&&Oe.call(Ae)}finally{if(de)throw de.error}}return this},Me}()},4132:function(r,e,t){var n,i=this&&this.__extends||(n=function(a,s){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},n(a,s)},function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}n(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(a){function s(u){var l=a.call(this)||this;return l._connection=u,l}return i(s,a),s.prototype.acquireConnection=function(u){var l=u===void 0?{}:u,c=(l.accessMode,l.database,l.bookmarks,this._connection);return this._connection=null,Promise.resolve(c)},s}(t(9305).ConnectionProvider);e.default=o},9689:function(r,e,t){var n=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.RoutingConnectionProvider=e.DirectConnectionProvider=e.PooledConnectionProvider=e.SingleConnectionProvider=void 0;var i=t(4132);Object.defineProperty(e,"SingleConnectionProvider",{enumerable:!0,get:function(){return n(i).default}});var o=t(8987);Object.defineProperty(e,"PooledConnectionProvider",{enumerable:!0,get:function(){return n(o).default}});var a=t(3545);Object.defineProperty(e,"DirectConnectionProvider",{enumerable:!0,get:function(){return n(a).default}});var s=t(7428);Object.defineProperty(e,"RoutingConnectionProvider",{enumerable:!0,get:function(){return n(s).default}})},4531:function(r,e){var t=this&&this.__awaiter||function(o,a,s,u){return new(s||(s=Promise))(function(l,c){function f(v){try{d(u.next(v))}catch(y){c(y)}}function h(v){try{d(u.throw(v))}catch(y){c(y)}}function d(v){var y;v.done?l(v.value):(y=v.value,y instanceof s?y:new s(function(w){w(y)})).then(f,h)}d((u=u.apply(o,a||[])).next())})},n=this&&this.__generator||function(o,a){var s,u,l,c,f={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(d){return function(v){return function(y){if(s)throw new TypeError("Generator is already executing.");for(;c&&(c=0,y[0]&&(f=0)),f;)try{if(s=1,u&&(l=2&y[0]?u.return:y[0]?u.throw||((l=u.return)&&l.call(u),0):u.next)&&!(l=l.call(u,y[1])).done)return l;switch(u=0,l&&(y=[2&y[0],l.value]),y[0]){case 0:case 1:l=y;break;case 4:return f.label++,{value:y[1],done:!1};case 5:f.label++,u=y[1],y=[0];continue;case 7:y=f.ops.pop(),f.trys.pop();continue;default:if(!((l=(l=f.trys).length>0&&l[l.length-1])||y[0]!==6&&y[0]!==2)){f=0;continue}if(y[0]===3&&(!l||y[1]>l[0]&&y[1]<l[3])){f.label=y[1];break}if(y[0]===6&&f.label<l[1]){f.label=l[1],l=y;break}if(l&&f.label<l[2]){f.label=l[2],f.ops.push(y);break}l[2]&&f.ops.pop(),f.trys.pop();continue}y=a.call(o,f)}catch(w){y=[6,w],u=0}finally{s=l=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([d,v])}}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function o(a){var s=a.connectionLivenessCheckTimeout;this._connectionLivenessCheckTimeout=s}return o.prototype.check=function(a){return t(this,void 0,void 0,function(){var s;return n(this,function(u){switch(u.label){case 0:return this._isCheckDisabled||this._isNewlyCreatedConnection(a)?[2,!0]:(s=Date.now()-a.idleTimestamp,this._connectionLivenessCheckTimeout===0||s>this._connectionLivenessCheckTimeout?[4,a.resetAndFlush().then(function(){return!0})]:[3,2]);case 1:return[2,u.sent()];case 2:return[2,!0]}})})},Object.defineProperty(o.prototype,"_isCheckDisabled",{get:function(){return this._connectionLivenessCheckTimeout==null||this._connectionLivenessCheckTimeout<0},enumerable:!1,configurable:!0}),o.prototype._isNewlyCreatedConnection=function(a){return a.authToken==null},o}();e.default=i},8031:function(r,e,t){var n,i=this&&this.__extends||(n=function(w,b){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,_){p.__proto__=_}||function(p,_){for(var O in _)Object.prototype.hasOwnProperty.call(_,O)&&(p[O]=_[O])},n(w,b)},function(w,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function p(){this.constructor=w}n(w,b),w.prototype=b===null?Object.create(b):(p.prototype=b.prototype,new p)}),o=this&&this.__awaiter||function(w,b,p,_){return new(p||(p=Promise))(function(O,P){function R(M){try{A(_.next(M))}catch(N){P(N)}}function T(M){try{A(_.throw(M))}catch(N){P(N)}}function A(M){var N;M.done?O(M.value):(N=M.value,N instanceof p?N:new p(function(j){j(N)})).then(R,T)}A((_=_.apply(w,b||[])).next())})},a=this&&this.__generator||function(w,b){var p,_,O,P,R={label:0,sent:function(){if(1&O[0])throw O[1];return O[1]},trys:[],ops:[]};return P={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(P[Symbol.iterator]=function(){return this}),P;function T(A){return function(M){return function(N){if(p)throw new TypeError("Generator is already executing.");for(;P&&(P=0,N[0]&&(R=0)),R;)try{if(p=1,_&&(O=2&N[0]?_.return:N[0]?_.throw||((O=_.return)&&O.call(_),0):_.next)&&!(O=O.call(_,N[1])).done)return O;switch(_=0,O&&(N=[2&N[0],O.value]),N[0]){case 0:case 1:O=N;break;case 4:return R.label++,{value:N[1],done:!1};case 5:R.label++,_=N[1],N=[0];continue;case 7:N=R.ops.pop(),R.trys.pop();continue;default:if(!((O=(O=R.trys).length>0&&O[O.length-1])||N[0]!==6&&N[0]!==2)){R=0;continue}if(N[0]===3&&(!O||N[1]>O[0]&&N[1]<O[3])){R.label=N[1];break}if(N[0]===6&&R.label<O[1]){R.label=O[1],O=N;break}if(O&&R.label<O[2]){R.label=O[2],R.ops.push(N);break}O[2]&&R.ops.pop(),R.trys.pop();continue}N=b.call(w,R)}catch(j){N=[6,j],_=0}finally{p=O=0}if(5&N[0])throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}([A,M])}}},s=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(e,"__esModule",{value:!0}),e.createChannelConnection=void 0;var u=t(7452),l=t(9305),c=s(t(6385)),f=s(t(7666)),h=l.error.PROTOCOL_ERROR,d=l.internal.logger.Logger,v=0;e.createChannelConnection=function(w,b,p,_,O,P,R){P===void 0&&(P=null),R===void 0&&(R=function(A){return new u.Channel(A)});var T=R(new u.ChannelConfig(w,b,p.errorCode(),O));return f.default.handshake(T,_).then(function(A){var M=A.protocolVersion,N=A.consumeRemainingBuffer,j=new u.Chunker(T),B=new u.Dechunker,q=new y(T,p,w,_,b.disableLosslessIntegers,P,j,b.notificationFilter,function(W){return f.default.create({version:M,channel:T,chunker:j,dechunker:B,disableLosslessIntegers:b.disableLosslessIntegers,useBigInt:b.useBigInt,serversideRouting:P,server:W.server,log:W.logger,observer:{onObserversCountChange:W._handleOngoingRequestsNumberChange.bind(W),onError:W._handleFatalError.bind(W),onFailure:W._resetOnFailure.bind(W),onProtocolError:W._handleProtocolError.bind(W),onErrorApplyTransformation:function(J){return W.handleAndTransformError(J,W._address)}}})},b.telemetryDisabled);return N(function(W){return B.write(W)}),q}).catch(function(A){return T.close().then(function(){throw A})})};var y=function(w){function b(p,_,O,P,R,T,A,M,N,j){R===void 0&&(R=!1),T===void 0&&(T=null);var B,q,W=w.call(this,_)||this;return W._authToken=null,W._idle=!1,W._reseting=!1,W._resetObservers=[],W._id=v++,W._address=O,W._server={address:O.asHostPort()},W._creationTimestamp=Date.now(),W._disableLosslessIntegers=R,W._ch=p,W._chunker=A,W._log=(B=W,new d((q=P)._level,function(J,te){return q._loggerFunction(J,"".concat(B," ").concat(te))})),W._serversideRouting=T,W._notificationFilter=M,W._telemetryDisabledDriverConfig=j===!0,W._telemetryDisabledConnection=!0,W._dbConnectionId=null,W._protocol=N(W),W._isBroken=!1,W._log.isDebugEnabled()&&W._log.debug("created towards ".concat(O)),W}return i(b,w),b.prototype.beginTransaction=function(p){return this._sendTelemetryIfEnabled(p),this._protocol.beginTransaction(p)},b.prototype.run=function(p,_,O){return this._sendTelemetryIfEnabled(O),this._protocol.run(p,_,O)},b.prototype._sendTelemetryIfEnabled=function(p){this._telemetryDisabledConnection||this._telemetryDisabledDriverConfig||p==null||p.apiTelemetryConfig==null||this._protocol.telemetry({api:p.apiTelemetryConfig.api},{onCompleted:p.apiTelemetryConfig.onTelemetrySuccess,onError:p.beforeError})},b.prototype.commitTransaction=function(p){return this._protocol.commitTransaction(p)},b.prototype.rollbackTransaction=function(p){return this._protocol.rollbackTransaction(p)},b.prototype.getProtocolVersion=function(){return this._protocol.version},Object.defineProperty(b.prototype,"authToken",{get:function(){return this._authToken},set:function(p){this._authToken=p},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"supportsReAuth",{get:function(){return this._protocol.supportsReAuth},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"databaseId",{get:function(){return this._dbConnectionId},set:function(p){this._dbConnectionId=p},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"idleTimestamp",{get:function(){return this._idleTimestamp},set:function(p){this._idleTimestamp=p},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"creationTimestamp",{get:function(){return this._creationTimestamp},enumerable:!1,configurable:!0}),b.prototype.connect=function(p,_,O,P){return o(this,void 0,void 0,function(){var R=this;return a(this,function(T){switch(T.label){case 0:if(this._protocol.initialized&&!this._protocol.supportsReAuth)throw(0,l.newError)("Connection does not support re-auth");return this._authToken=O,this._protocol.initialized?[3,2]:[4,this._initialize(p,_,O)];case 1:case 3:return[2,T.sent()];case 2:return P?[4,new Promise(function(A,M){R._protocol.logoff({onError:M}),R._protocol.logon({authToken:O,onError:M,onComplete:function(){return A(R)},flush:!0})})]:[3,4];case 4:return this._protocol.logoff(),this._protocol.logon({authToken:O,flush:!0}),[2,this]}})})},b.prototype._initialize=function(p,_,O){var P=this,R=this;return new Promise(function(T,A){P._protocol.initialize({userAgent:p,boltAgent:_,authToken:O,notificationFilter:P._notificationFilter,onError:function(M){return A(M)},onComplete:function(M){if(M){var N=M.server;P.version&&!N||(P.version=N);var j=M.connection_id;if(P.databaseId||(P.databaseId=j),M.hints){var B=M.hints["connection.recv_timeout_seconds"];if(B!=null){var q=(0,l.toNumber)(B);Number.isInteger(q)&&q>0?P._ch.setupReceiveTimeout(1e3*q):P._log.info("Server located at ".concat(P._address," supplied an invalid connection receive timeout value (").concat(q,"). ")+"Please, verify the server configuration and status because this can be the symptom of a bigger issue.")}M.hints["telemetry.enabled"]===!0&&(P._telemetryDisabledConnection=!1)}}T(R)}})})},b.prototype.protocol=function(){return this._protocol},Object.defineProperty(b.prototype,"address",{get:function(){return this._address},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"version",{get:function(){return this._server.version},set:function(p){this._server.version=p},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"server",{get:function(){return this._server},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"logger",{get:function(){return this._log},enumerable:!1,configurable:!0}),b.prototype._handleFatalError=function(p){this._isBroken=!0,this._error=this.handleAndTransformError(this._protocol.currentFailure||p,this._address),this._log.isErrorEnabled()&&this._log.error("experienced a fatal error caused by ".concat(this._error," (").concat(l.json.stringify(this._error),")")),this._protocol.notifyFatalError(this._error)},b.prototype._setIdle=function(p){this._idle=!0,this._ch.stopReceiveTimeout(),this._protocol.queueObserverIfProtocolIsNotBroken(p)},b.prototype._unsetIdle=function(){this._idle=!1,this._updateCurrentObserver()},b.prototype._queueObserver=function(p){return this._protocol.queueObserverIfProtocolIsNotBroken(p)},b.prototype.hasOngoingObservableRequests=function(){return!this._idle&&this._protocol.hasOngoingObservableRequests()},b.prototype.resetAndFlush=function(){var p=this;return new Promise(function(_,O){p._reset({onError:function(P){if(p._isBroken)O(P);else{var R=p._handleProtocolError("Received FAILURE as a response for RESET: ".concat(P));O(R)}},onComplete:function(){_()}})})},b.prototype._resetOnFailure=function(){var p=this;this.isOpen()&&this._reset({onError:function(){p._protocol.resetFailure()},onComplete:function(){p._protocol.resetFailure()}})},b.prototype._reset=function(p){var _=this;if(this._reseting)this._protocol.isLastMessageReset()?this._resetObservers.push(p):this._protocol.reset({onError:function(P){p.onError(P)},onComplete:function(){p.onComplete()}});else{this._resetObservers.push(p),this._reseting=!0;var O=function(P){_._reseting=!1;var R=_._resetObservers;_._resetObservers=[],R.forEach(P)};this._protocol.reset({onError:function(P){O(function(R){return R.onError(P)})},onComplete:function(){O(function(P){return P.onComplete()})}})}},b.prototype._updateCurrentObserver=function(){this._protocol.updateCurrentObserver()},b.prototype.isOpen=function(){return!this._isBroken&&this._ch._open},b.prototype._handleOngoingRequestsNumberChange=function(p){this._idle||(p===0?this._ch.stopReceiveTimeout():this._ch.startReceiveTimeout())},b.prototype.close=function(){return o(this,void 0,void 0,function(){return a(this,function(p){switch(p.label){case 0:return this._log.isDebugEnabled()&&this._log.debug("closing"),this._protocol&&this.isOpen()&&this._protocol.prepareToClose(),[4,this._ch.close()];case 1:return p.sent(),this._log.isDebugEnabled()&&this._log.debug("closed"),[2]}})})},b.prototype.toString=function(){return"Connection [".concat(this.id,"][").concat(this.databaseId||"","]")},b.prototype._handleProtocolError=function(p){this._protocol.resetFailure(),this._updateCurrentObserver();var _=(0,l.newError)(p,h);return this._handleFatalError(_),_},b}(c.default);e.default=y},9857:function(r,e,t){var n,i=this&&this.__extends||(n=function(s,u){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(l[f]=c[f])},n(s,u)},function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function l(){this.constructor=s}n(s,u),s.prototype=u===null?Object.create(u):(l.prototype=u.prototype,new l)}),o=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(s){function u(l,c){var f=s.call(this,c)||this;return c&&(f._originalErrorHandler=l._errorHandler,l._errorHandler=f._errorHandler),f._delegate=l,f}return i(u,s),u.prototype.beginTransaction=function(l){return this._delegate.beginTransaction(l)},u.prototype.run=function(l,c,f){return this._delegate.run(l,c,f)},u.prototype.commitTransaction=function(l){return this._delegate.commitTransaction(l)},u.prototype.rollbackTransaction=function(l){return this._delegate.rollbackTransaction(l)},u.prototype.getProtocolVersion=function(){return this._delegate.getProtocolVersion()},Object.defineProperty(u.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"databaseId",{get:function(){return this._delegate.databaseId},set:function(l){this._delegate.databaseId=l},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"server",{get:function(){return this._delegate.server},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"authToken",{get:function(){return this._delegate.authToken},set:function(l){this._delegate.authToken=l},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"supportsReAuth",{get:function(){return this._delegate.supportsReAuth},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"address",{get:function(){return this._delegate.address},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"version",{get:function(){return this._delegate.version},set:function(l){this._delegate.version=l},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"creationTimestamp",{get:function(){return this._delegate.creationTimestamp},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"idleTimestamp",{get:function(){return this._delegate.idleTimestamp},set:function(l){this._delegate.idleTimestamp=l},enumerable:!1,configurable:!0}),u.prototype.isOpen=function(){return this._delegate.isOpen()},u.prototype.protocol=function(){return this._delegate.protocol()},u.prototype.connect=function(l,c,f,h){return this._delegate.connect(l,c,f,h)},u.prototype.write=function(l,c,f){return this._delegate.write(l,c,f)},u.prototype.resetAndFlush=function(){return this._delegate.resetAndFlush()},u.prototype.hasOngoingObservableRequests=function(){return this._delegate.hasOngoingObservableRequests()},u.prototype.close=function(){return this._delegate.close()},u.prototype.release=function(){return this._originalErrorHandler&&(this._delegate._errorHandler=this._originalErrorHandler),this._delegate.release()},u}(o(t(6385)).default);e.default=a},2363:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=t(9305),i=n.error.SERVICE_UNAVAILABLE,o=n.error.SESSION_EXPIRED,a=function(){function u(l,c,f,h){this._errorCode=l,this._handleUnavailability=c||s,this._handleWriteFailure=f||s,this._handleSecurityError=h||s}return u.create=function(l){return new u(l.errorCode,l.handleUnavailability,l.handleWriteFailure,l.handleSecurityError)},u.prototype.errorCode=function(){return this._errorCode},u.prototype.handleAndTransformError=function(l,c,f){return function(h){return h!=null&&h.code!=null&&h.code.startsWith("Neo.ClientError.Security.")}(l)?this._handleSecurityError(l,c,f):function(h){return!!h&&(h.code===o||h.code===i||h.code==="Neo.TransientError.General.DatabaseUnavailable")}(l)?this._handleUnavailability(l,c,f):function(h){return!!h&&(h.code==="Neo.ClientError.Cluster.NotALeader"||h.code==="Neo.ClientError.General.ForbiddenOnReadOnlyDatabase")}(l)?this._handleWriteFailure(l,c,f):l},u}();function s(u){return u}e.default=a},6385:function(r,e,t){var n,i=this&&this.__extends||(n=function(a,s){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},n(a,s)},function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}n(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)});Object.defineProperty(e,"__esModule",{value:!0}),t(7666);var o=function(a){function s(u){var l=a.call(this)||this;return l._errorHandler=u,l}return i(s,a),Object.defineProperty(s.prototype,"id",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"databaseId",{get:function(){throw new Error("not implemented")},set:function(u){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"authToken",{get:function(){throw new Error("not implemented")},set:function(u){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"supportsReAuth",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"creationTimestamp",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"idleTimestamp",{get:function(){throw new Error("not implemented")},set:function(u){throw new Error("not implemented")},enumerable:!1,configurable:!0}),s.prototype.protocol=function(){throw new Error("not implemented")},Object.defineProperty(s.prototype,"address",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"version",{get:function(){throw new Error("not implemented")},set:function(u){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"server",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),s.prototype.connect=function(u,l,c,f){throw new Error("not implemented")},s.prototype.write=function(u,l,c){throw new Error("not implemented")},s.prototype.close=function(){throw new Error("not implemented")},s.prototype.handleAndTransformError=function(u,l){return this._errorHandler?this._errorHandler.handleAndTransformError(u,l,this):u},s}(t(9305).Connection);e.default=o},7721:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(f,h,d,v){v===void 0&&(v=d);var y=Object.getOwnPropertyDescriptor(h,d);y&&!("get"in y?!h.__esModule:y.writable||y.configurable)||(y={enumerable:!0,get:function(){return h[d]}}),Object.defineProperty(f,v,y)}:function(f,h,d,v){v===void 0&&(v=d),f[v]=h[d]}),i=this&&this.__setModuleDefault||(Object.create?function(f,h){Object.defineProperty(f,"default",{enumerable:!0,value:h})}:function(f,h){f.default=h}),o=this&&this.__importStar||function(f){if(f&&f.__esModule)return f;var h={};if(f!=null)for(var d in f)d!=="default"&&Object.prototype.hasOwnProperty.call(f,d)&&n(h,f,d);return i(h,f),h},a=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(e,"__esModule",{value:!0}),e.createChannelConnection=e.ConnectionErrorHandler=e.DelegateConnection=e.ChannelConnection=e.Connection=void 0;var s=a(t(6385));e.Connection=s.default;var u=o(t(8031));e.ChannelConnection=u.default,Object.defineProperty(e,"createChannelConnection",{enumerable:!0,get:function(){return u.createChannelConnection}});var l=a(t(9857));e.DelegateConnection=l.default;var c=a(t(2363));e.ConnectionErrorHandler=c.default,e.default=s.default},6672:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(s,u,l,c){c===void 0&&(c=l);var f=Object.getOwnPropertyDescriptor(u,l);f&&!("get"in f?!u.__esModule:f.writable||f.configurable)||(f={enumerable:!0,get:function(){return u[l]}}),Object.defineProperty(s,c,f)}:function(s,u,l,c){c===void 0&&(c=l),s[c]=u[l]}),i=this&&this.__setModuleDefault||(Object.create?function(s,u){Object.defineProperty(s,"default",{enumerable:!0,value:u})}:function(s,u){s.default=u}),o=this&&this.__importStar||function(s){if(s&&s.__esModule)return s;var u={};if(s!=null)for(var l in s)l!=="default"&&Object.prototype.hasOwnProperty.call(s,l)&&n(u,s,l);return i(u,s),u},a=this&&this.__exportStar||function(s,u){for(var l in s)l==="default"||Object.prototype.hasOwnProperty.call(u,l)||n(u,s,l)};Object.defineProperty(e,"__esModule",{value:!0}),e.packstream=e.channel=e.buf=e.bolt=e.loadBalancing=void 0,e.loadBalancing=o(t(4455)),e.bolt=o(t(7666)),e.buf=o(t(7174)),e.channel=o(t(7452)),e.packstream=o(t(7168)),a(t(9689),e)},6492:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reuseOngoingRequest=e.identity=void 0;var n=t(9305);e.identity=function(i){return i},e.reuseOngoingRequest=function(i,o){o===void 0&&(o=null);var a=new Map;return function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];var l=n.json.stringify(s);if(a.has(l))return a.get(l);var c=i.apply(o,s);return a.set(l,c),c.finally(function(){a.delete(l)})}}},6781:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(a,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);c&&!("get"in c?!s.__esModule:c.writable||c.configurable)||(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(a,l,c)}:function(a,s,u,l){l===void 0&&(l=u),a[l]=s[u]}),i=this&&this.__setModuleDefault||(Object.create?function(a,s){Object.defineProperty(a,"default",{enumerable:!0,value:s})}:function(a,s){a.default=s}),o=this&&this.__importStar||function(a){if(a&&a.__esModule)return a;var s={};if(a!=null)for(var u in a)u!=="default"&&Object.prototype.hasOwnProperty.call(a,u)&&n(s,a,u);return i(s,a),s};Object.defineProperty(e,"__esModule",{value:!0}),e.object=e.functional=void 0,e.functional=o(t(6492)),e.object=o(t(6702))},6702:function(r,e){var t=this&&this.__values||function(n){var i=typeof Symbol=="function"&&Symbol.iterator,o=i&&n[i],a=0;if(o)return o.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&a>=n.length&&(n=void 0),{value:n&&n[a++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.equals=void 0,e.equals=function(n,i){var o,a;if(n===i)return!0;if(n===null||i===null)return!1;if(typeof n=="object"&&typeof i=="object"){var s=Object.keys(n),u=Object.keys(i);if(s.length!==u.length)return!1;try{for(var l=t(s),c=l.next();!c.done;c=l.next()){var f=c.value;if(n[f]!==i[f])return!1}}catch(h){o={error:h}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(o)throw o.error}}return!0}return!1}},4455:function(r,e,t){var n=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.LeastConnectedLoadBalancingStrategy=e.LoadBalancingStrategy=void 0;var i=n(t(4311));e.LoadBalancingStrategy=i.default;var o=n(t(2533));e.LeastConnectedLoadBalancingStrategy=o.default,e.default=o.default},2533:function(r,e,t){var n,i=this&&this.__extends||(n=function(u,l){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(c[h]=f[h])},n(u,l)},function(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function c(){this.constructor=u}n(u,l),u.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)}),o=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(t(715)),s=function(u){function l(c){var f=u.call(this)||this;return f._readersIndex=new a.default,f._writersIndex=new a.default,f._connectionPool=c,f}return i(l,u),l.prototype.selectReader=function(c){return this._select(c,this._readersIndex)},l.prototype.selectWriter=function(c){return this._select(c,this._writersIndex)},l.prototype._select=function(c,f){var h=c.length;if(h===0)return null;var d=f.next(h),v=d,y=null,w=Number.MAX_SAFE_INTEGER;do{var b=c[v],p=this._connectionPool.activeResourceCount(b);p<w&&(y=b,w=p),v===h-1?v=0:v++}while(v!==d);return y},l}(o(t(4311)).default);e.default=s},4311:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function n(){}return n.prototype.selectReader=function(i){throw new Error("Abstract function")},n.prototype.selectWriter=function(i){throw new Error("Abstract function")},n}();e.default=t},715:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function n(i){this._offset=i||0}return n.prototype.next=function(i){if(i===0)return-1;var o=this._offset;return this._offset+=1,this._offset===Number.MAX_SAFE_INTEGER&&(this._offset=0),o%i},n}();e.default=t},7168:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(l,c,f,h){h===void 0&&(h=f);var d=Object.getOwnPropertyDescriptor(c,f);d&&!("get"in d?!c.__esModule:d.writable||d.configurable)||(d={enumerable:!0,get:function(){return c[f]}}),Object.defineProperty(l,h,d)}:function(l,c,f,h){h===void 0&&(h=f),l[h]=c[f]}),i=this&&this.__setModuleDefault||(Object.create?function(l,c){Object.defineProperty(l,"default",{enumerable:!0,value:c})}:function(l,c){l.default=c}),o=this&&this.__importStar||function(l){if(l&&l.__esModule)return l;var c={};if(l!=null)for(var f in l)f!=="default"&&Object.prototype.hasOwnProperty.call(l,f)&&n(c,l,f);return i(c,l),c};Object.defineProperty(e,"__esModule",{value:!0}),e.structure=e.v2=e.v1=void 0;var a=o(t(5361));e.v1=a;var s=o(t(2072));e.v2=s;var u=o(t(7665));e.structure=u,e.default=s},5361:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Unpacker=e.Packer=void 0;var n=t(7452),i=t(6781),o=t(7665),a=t(9305),s=a.error.PROTOCOL_ERROR,u=function(){function c(f){this._ch=f,this._byteArraysSupported=!0}return c.prototype.packable=function(f,h){var d,v=this;h===void 0&&(h=i.functional.identity);try{f=h(f)}catch(b){return function(){throw b}}if(f===null)return function(){return v._ch.writeUInt8(192)};if(f===!0)return function(){return v._ch.writeUInt8(195)};if(f===!1)return function(){return v._ch.writeUInt8(194)};if(typeof f=="number")return function(){return v.packFloat(f)};if(typeof f=="string")return function(){return v.packString(f)};if(typeof f=="bigint")return function(){return v.packInteger((0,a.int)(f))};if((0,a.isInt)(f))return function(){return v.packInteger(f)};if(f instanceof Int8Array)return function(){return v.packBytes(f)};if(f instanceof Array)return function(){v.packListHeader(f.length);for(var b=0;b<f.length;b++)v.packable(f[b]===void 0?null:f[b],h)()};if((d=f)!=null&&typeof d[Symbol.iterator]=="function")return this.packableIterable(f,h);if(f instanceof o.Structure){for(var y=[],w=0;w<f.fields.length;w++)y[w]=this.packable(f.fields[w],h);return function(){return v.packStruct(f.signature,y)}}return typeof f=="object"?function(){for(var b=Object.keys(f),p=0,_=0;_<b.length;_++)f[b[_]]!==void 0&&p++;for(v.packMapHeader(p),_=0;_<b.length;_++){var O=b[_];f[O]!==void 0&&(v.packString(O),v.packable(f[O],h)())}}:this._nonPackableValue("Unable to pack the given value: ".concat(f))},c.prototype.packableIterable=function(f,h){try{var d=Array.from(f);return this.packable(d,h)}catch(v){throw(0,a.newError)("Cannot pack given iterable, ".concat(v.message,": ").concat(f))}},c.prototype.packStruct=function(f,h){h=h||[],this.packStructHeader(h.length,f);for(var d=0;d<h.length;d++)h[d]()},c.prototype.packInteger=function(f){var h=f.high,d=f.low;f.greaterThanOrEqual(-16)&&f.lessThan(128)?this._ch.writeInt8(d):f.greaterThanOrEqual(-128)&&f.lessThan(-16)?(this._ch.writeUInt8(200),this._ch.writeInt8(d)):f.greaterThanOrEqual(-32768)&&f.lessThan(32768)?(this._ch.writeUInt8(201),this._ch.writeInt16(d)):f.greaterThanOrEqual(-2147483648)&&f.lessThan(2147483648)?(this._ch.writeUInt8(202),this._ch.writeInt32(d)):(this._ch.writeUInt8(203),this._ch.writeInt32(h),this._ch.writeInt32(d))},c.prototype.packFloat=function(f){this._ch.writeUInt8(193),this._ch.writeFloat64(f)},c.prototype.packString=function(f){var h=n.utf8.encode(f),d=h.length;if(d<16)this._ch.writeUInt8(128|d),this._ch.writeBytes(h);else if(d<256)this._ch.writeUInt8(208),this._ch.writeUInt8(d),this._ch.writeBytes(h);else if(d<65536)this._ch.writeUInt8(209),this._ch.writeUInt8(d/256>>0),this._ch.writeUInt8(d%256),this._ch.writeBytes(h);else{if(!(d<4294967296))throw(0,a.newError)("UTF-8 strings of size "+d+" are not supported");this._ch.writeUInt8(210),this._ch.writeUInt8((d/16777216>>0)%256),this._ch.writeUInt8((d/65536>>0)%256),this._ch.writeUInt8((d/256>>0)%256),this._ch.writeUInt8(d%256),this._ch.writeBytes(h)}},c.prototype.packListHeader=function(f){if(f<16)this._ch.writeUInt8(144|f);else if(f<256)this._ch.writeUInt8(212),this._ch.writeUInt8(f);else if(f<65536)this._ch.writeUInt8(213),this._ch.writeUInt8((f/256>>0)%256),this._ch.writeUInt8(f%256);else{if(!(f<4294967296))throw(0,a.newError)("Lists of size "+f+" are not supported");this._ch.writeUInt8(214),this._ch.writeUInt8((f/16777216>>0)%256),this._ch.writeUInt8((f/65536>>0)%256),this._ch.writeUInt8((f/256>>0)%256),this._ch.writeUInt8(f%256)}},c.prototype.packBytes=function(f){if(!this._byteArraysSupported)throw(0,a.newError)("Byte arrays are not supported by the database this driver is connected to");this.packBytesHeader(f.length);for(var h=0;h<f.length;h++)this._ch.writeInt8(f[h])},c.prototype.packBytesHeader=function(f){if(f<256)this._ch.writeUInt8(204),this._ch.writeUInt8(f);else if(f<65536)this._ch.writeUInt8(205),this._ch.writeUInt8((f/256>>0)%256),this._ch.writeUInt8(f%256);else{if(!(f<4294967296))throw(0,a.newError)("Byte arrays of size "+f+" are not supported");this._ch.writeUInt8(206),this._ch.writeUInt8((f/16777216>>0)%256),this._ch.writeUInt8((f/65536>>0)%256),this._ch.writeUInt8((f/256>>0)%256),this._ch.writeUInt8(f%256)}},c.prototype.packMapHeader=function(f){if(f<16)this._ch.writeUInt8(160|f);else if(f<256)this._ch.writeUInt8(216),this._ch.writeUInt8(f);else if(f<65536)this._ch.writeUInt8(217),this._ch.writeUInt8(f/256>>0),this._ch.writeUInt8(f%256);else{if(!(f<4294967296))throw(0,a.newError)("Maps of size "+f+" are not supported");this._ch.writeUInt8(218),this._ch.writeUInt8((f/16777216>>0)%256),this._ch.writeUInt8((f/65536>>0)%256),this._ch.writeUInt8((f/256>>0)%256),this._ch.writeUInt8(f%256)}},c.prototype.packStructHeader=function(f,h){if(f<16)this._ch.writeUInt8(176|f),this._ch.writeUInt8(h);else if(f<256)this._ch.writeUInt8(220),this._ch.writeUInt8(f),this._ch.writeUInt8(h);else{if(!(f<65536))throw(0,a.newError)("Structures of size "+f+" are not supported");this._ch.writeUInt8(221),this._ch.writeUInt8(f/256>>0),this._ch.writeUInt8(f%256)}},c.prototype.disableByteArrays=function(){this._byteArraysSupported=!1},c.prototype._nonPackableValue=function(f){return function(){throw(0,a.newError)(f,s)}},c}();e.Packer=u;var l=function(){function c(f,h){f===void 0&&(f=!1),h===void 0&&(h=!1),this._disableLosslessIntegers=f,this._useBigInt=h}return c.prototype.unpack=function(f,h){h===void 0&&(h=i.functional.identity);var d=f.readUInt8(),v=240&d,y=15&d;if(d===192)return null;var w=this._unpackBoolean(d);if(w!==null)return w;var b=this._unpackNumberOrInteger(d,f);if(b!==null){if((0,a.isInt)(b)){if(this._useBigInt)return b.toBigInt();if(this._disableLosslessIntegers)return b.toNumberOrInfinity()}return b}var p=this._unpackString(d,v,y,f);if(p!==null)return p;var _=this._unpackList(d,v,y,f,h);if(_!==null)return _;var O=this._unpackByteArray(d,f);if(O!==null)return O;var P=this._unpackMap(d,v,y,f,h);if(P!==null)return P;var R=this._unpackStruct(d,v,y,f,h);if(R!==null)return R;throw(0,a.newError)("Unknown packed value with marker "+d.toString(16))},c.prototype.unpackInteger=function(f){var h=f.readUInt8(),d=this._unpackInteger(h,f);if(d==null)throw(0,a.newError)("Unable to unpack integer value with marker "+h.toString(16));return d},c.prototype._unpackBoolean=function(f){return f===195||f!==194&&null},c.prototype._unpackNumberOrInteger=function(f,h){return f===193?h.readFloat64():this._unpackInteger(f,h)},c.prototype._unpackInteger=function(f,h){if(f>=0&&f<128)return(0,a.int)(f);if(f>=240&&f<256)return(0,a.int)(f-256);if(f===200)return(0,a.int)(h.readInt8());if(f===201)return(0,a.int)(h.readInt16());if(f===202){var d=h.readInt32();return(0,a.int)(d)}if(f===203){var v=h.readInt32(),y=h.readInt32();return new a.Integer(y,v)}return null},c.prototype._unpackString=function(f,h,d,v){return h===128?n.utf8.decode(v,d):f===208?n.utf8.decode(v,v.readUInt8()):f===209?n.utf8.decode(v,v.readUInt16()):f===210?n.utf8.decode(v,v.readUInt32()):null},c.prototype._unpackList=function(f,h,d,v,y){return h===144?this._unpackListWithSize(d,v,y):f===212?this._unpackListWithSize(v.readUInt8(),v,y):f===213?this._unpackListWithSize(v.readUInt16(),v,y):f===214?this._unpackListWithSize(v.readUInt32(),v,y):null},c.prototype._unpackListWithSize=function(f,h,d){for(var v=[],y=0;y<f;y++)v.push(this.unpack(h,d));return v},c.prototype._unpackByteArray=function(f,h){return f===204?this._unpackByteArrayWithSize(h.readUInt8(),h):f===205?this._unpackByteArrayWithSize(h.readUInt16(),h):f===206?this._unpackByteArrayWithSize(h.readUInt32(),h):null},c.prototype._unpackByteArrayWithSize=function(f,h){for(var d=new Int8Array(f),v=0;v<f;v++)d[v]=h.readInt8();return d},c.prototype._unpackMap=function(f,h,d,v,y){return h===160?this._unpackMapWithSize(d,v,y):f===216?this._unpackMapWithSize(v.readUInt8(),v,y):f===217?this._unpackMapWithSize(v.readUInt16(),v,y):f===218?this._unpackMapWithSize(v.readUInt32(),v,y):null},c.prototype._unpackMapWithSize=function(f,h,d){for(var v={},y=0;y<f;y++)v[this.unpack(h,d)]=this.unpack(h,d);return v},c.prototype._unpackStruct=function(f,h,d,v,y){return h===176?this._unpackStructWithSize(d,v,y):f===220?this._unpackStructWithSize(v.readUInt8(),v,y):f===221?this._unpackStructWithSize(v.readUInt16(),v,y):null},c.prototype._unpackStructWithSize=function(f,h,d){for(var v=h.readUInt8(),y=new o.Structure(v,[]),w=0;w<f;w++)y.fields.push(this.unpack(h,d));return d(y)},c}();e.Unpacker=l},2072:function(r,e,t){var n,i=this&&this.__extends||(n=function(f,h){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,v){d.__proto__=v}||function(d,v){for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(d[y]=v[y])},n(f,h)},function(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function d(){this.constructor=f}n(f,h),f.prototype=h===null?Object.create(h):(d.prototype=h.prototype,new d)}),o=this&&this.__createBinding||(Object.create?function(f,h,d,v){v===void 0&&(v=d);var y=Object.getOwnPropertyDescriptor(h,d);y&&!("get"in y?!h.__esModule:y.writable||y.configurable)||(y={enumerable:!0,get:function(){return h[d]}}),Object.defineProperty(f,v,y)}:function(f,h,d,v){v===void 0&&(v=d),f[v]=h[d]}),a=this&&this.__setModuleDefault||(Object.create?function(f,h){Object.defineProperty(f,"default",{enumerable:!0,value:h})}:function(f,h){f.default=h}),s=this&&this.__importStar||function(f){if(f&&f.__esModule)return f;var h={};if(f!=null)for(var d in f)d!=="default"&&Object.prototype.hasOwnProperty.call(f,d)&&o(h,f,d);return a(h,f),h};Object.defineProperty(e,"__esModule",{value:!0}),e.Unpacker=e.Packer=void 0;var u=s(t(5361)),l=function(f){function h(){return f!==null&&f.apply(this,arguments)||this}return i(h,f),h.prototype.disableByteArrays=function(){throw new Error("Bolt V2 should always support byte arrays")},h}(u.Packer);e.Packer=l;var c=function(f){function h(d,v){return d===void 0&&(d=!1),v===void 0&&(v=!1),f.call(this,d,v)||this}return i(h,f),h}(u.Unpacker);e.Unpacker=c},7665:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.verifyStructSize=e.Structure=void 0;var n=t(9305),i=n.error.PROTOCOL_ERROR,o=function(){function a(s,u){this.signature=s,this.fields=u}return Object.defineProperty(a.prototype,"size",{get:function(){return this.fields.length},enumerable:!1,configurable:!0}),a.prototype.toString=function(){for(var s="",u=0;u<this.fields.length;u++)u>0&&(s+=", "),s+=this.fields[u];return"Structure("+this.signature+", ["+s+"])"},a}();e.Structure=o,e.verifyStructSize=function(a,s,u){if(s!==u)throw(0,n.newError)("Wrong struct size for ".concat(a,", expected ").concat(s," but was ").concat(u),i)},e.default=o},206:function(r,e,t){var n=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.RoutingTable=e.Rediscovery=void 0;var i=n(t(4151));e.Rediscovery=i.default;var o=n(t(9018));e.RoutingTable=o.default,e.default=i.default},4151:function(r,e,t){var n=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(t(9018)),o=(t(9305),function(){function a(s){this._routingContext=s}return a.prototype.lookupRoutingTableOnRouter=function(s,u,l,c){var f=this;return s._acquireConnection(function(h){return f._requestRawRoutingTable(h,s,u,l,c).then(function(d){return d.isNull?null:i.default.fromRawRoutingTable(u,l,d)})})},a.prototype._requestRawRoutingTable=function(s,u,l,c,f){var h=this;return new Promise(function(d,v){s.protocol().requestRoutingInformation({routingContext:h._routingContext,databaseName:l,impersonatedUser:f,sessionContext:{bookmarks:u._lastBookmarks,mode:u._mode,database:u._database,afterComplete:u._onComplete},onCompleted:d,onError:v})})},a}());e.default=o},9018:function(r,e,t){var n=this&&this.__read||function(w,b){var p=typeof Symbol=="function"&&w[Symbol.iterator];if(!p)return w;var _,O,P=p.call(w),R=[];try{for(;(b===void 0||b-- >0)&&!(_=P.next()).done;)R.push(_.value)}catch(T){O={error:T}}finally{try{_&&!_.done&&(p=P.return)&&p.call(P)}finally{if(O)throw O.error}}return R},i=this&&this.__spreadArray||function(w,b,p){if(p||arguments.length===2)for(var _,O=0,P=b.length;O<P;O++)!_&&O in b||(_||(_=Array.prototype.slice.call(b,0,O)),_[O]=b[O]);return w.concat(_||Array.prototype.slice.call(b))};Object.defineProperty(e,"__esModule",{value:!0}),e.createValidRoutingTable=void 0;var o=t(9305),a=o.internal.constants,s=a.ACCESS_MODE_WRITE,u=a.ACCESS_MODE_READ,l=o.internal.serverAddress.ServerAddress,c=o.error.PROTOCOL_ERROR,f=function(){function w(b){var p=b===void 0?{}:b,_=p.database,O=p.routers,P=p.readers,R=p.writers,T=p.expirationTime,A=p.ttl;this.database=_||null,this.databaseName=_||"default database",this.routers=O||[],this.readers=P||[],this.writers=R||[],this.expirationTime=T||(0,o.int)(0),this.ttl=A}return w.fromRawRoutingTable=function(b,p,_){return d(b,p,_)},w.prototype.forget=function(b){this.readers=h(this.readers,b),this.writers=h(this.writers,b)},w.prototype.forgetRouter=function(b){this.routers=h(this.routers,b)},w.prototype.forgetWriter=function(b){this.writers=h(this.writers,b)},w.prototype.isStaleFor=function(b){return this.expirationTime.lessThan(Date.now())||this.routers.length<1||b===u&&this.readers.length===0||b===s&&this.writers.length===0},w.prototype.isExpiredFor=function(b){return this.expirationTime.add(b).lessThan(Date.now())},w.prototype.allServers=function(){return i(i(i([],n(this.routers),!1),n(this.readers),!1),n(this.writers),!1)},w.prototype.toString=function(){return"RoutingTable["+"database=".concat(this.databaseName,", ")+"expirationTime=".concat(this.expirationTime,", ")+"currentTime=".concat(Date.now(),", ")+"routers=[".concat(this.routers,"], ")+"readers=[".concat(this.readers,"], ")+"writers=[".concat(this.writers,"]]")},w}();function h(w,b){return w.filter(function(p){return p.asKey()!==b.asKey()})}function d(w,b,p){var _=p.ttl,O=function(M,N){try{var j=(0,o.int)(Date.now()),B=(0,o.int)(M.ttl).multiply(1e3).add(j);return B.lessThan(j)?o.Integer.MAX_VALUE:B}catch(q){throw(0,o.newError)("Unable to parse TTL entry from router ".concat(N,` from raw routing table:
`).concat(o.json.stringify(M),`
Error message: `).concat(q.message),c)}}(p,b),P=function(M,N){try{var j=[],B=[],q=[];return M.servers.forEach(function(W){var J=W.role,te=W.addresses;J==="ROUTE"?j=y(te).map(function(re){return l.fromUrl(re)}):J==="WRITE"?q=y(te).map(function(re){return l.fromUrl(re)}):J==="READ"&&(B=y(te).map(function(re){return l.fromUrl(re)}))}),{routers:j,readers:B,writers:q}}catch(W){throw(0,o.newError)("Unable to parse servers entry from router ".concat(N,` from addresses:
`).concat(o.json.stringify(M.servers),`
Error message: `).concat(W.message),c)}}(p,b),R=P.routers,T=P.readers,A=P.writers;return v(R,"routers",b),v(T,"readers",b),new f({database:w||p.db,routers:R,readers:T,writers:A,expirationTime:O,ttl:_})}function v(w,b,p){if(w.length===0)throw(0,o.newError)("Received no "+b+" from router "+p,c)}function y(w){if(!Array.isArray(w))throw new TypeError("Array expected but got: "+w);return Array.from(w)}e.default=f,e.createValidRoutingTable=d},2069:function(r,e,t){var n=this&&this.__awaiter||function(d,v,y,w){return new(y||(y=Promise))(function(b,p){function _(R){try{P(w.next(R))}catch(T){p(T)}}function O(R){try{P(w.throw(R))}catch(T){p(T)}}function P(R){var T;R.done?b(R.value):(T=R.value,T instanceof y?T:new y(function(A){A(T)})).then(_,O)}P((w=w.apply(d,v||[])).next())})},i=this&&this.__generator||function(d,v){var y,w,b,p,_={label:0,sent:function(){if(1&b[0])throw b[1];return b[1]},trys:[],ops:[]};return p={next:O(0),throw:O(1),return:O(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function O(P){return function(R){return function(T){if(y)throw new TypeError("Generator is already executing.");for(;p&&(p=0,T[0]&&(_=0)),_;)try{if(y=1,w&&(b=2&T[0]?w.return:T[0]?w.throw||((b=w.return)&&b.call(w),0):w.next)&&!(b=b.call(w,T[1])).done)return b;switch(w=0,b&&(T=[2&T[0],b.value]),T[0]){case 0:case 1:b=T;break;case 4:return _.label++,{value:T[1],done:!1};case 5:_.label++,w=T[1],T=[0];continue;case 7:T=_.ops.pop(),_.trys.pop();continue;default:if(!((b=(b=_.trys).length>0&&b[b.length-1])||T[0]!==6&&T[0]!==2)){_=0;continue}if(T[0]===3&&(!b||T[1]>b[0]&&T[1]<b[3])){_.label=T[1];break}if(T[0]===6&&_.label<b[1]){_.label=b[1],b=T;break}if(b&&_.label<b[2]){_.label=b[2],_.ops.push(T);break}b[2]&&_.ops.pop(),_.trys.pop();continue}T=v.call(d,_)}catch(A){T=[6,A],w=0}finally{y=b=0}if(5&T[0])throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}([P,R])}}},o=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0}),e.staticAuthTokenManager=e.authTokenManagers=e.AuthTokenAndExpiration=void 0;var a=o(t(1967)),s=t(6995),u=function(){function d(){}return d.prototype.getToken=function(){throw new Error("Not Implemented")},d.prototype.handleSecurityException=function(v,y){throw new Error("Not implemented")},d}();e.default=u,e.AuthTokenAndExpiration=function(){this.token=a.default.none(),this.expiration=void 0};var l=new(function(){function d(){}return d.prototype.bearer=function(v){var y=v.tokenProvider;if(typeof y!="function")throw new TypeError("tokenProvider should be function, but got: ".concat(typeof y));return new f(y,["Neo.ClientError.Security.Unauthorized","Neo.ClientError.Security.TokenExpired"])},d.prototype.basic=function(v){var y=this,w=v.tokenProvider;if(typeof w!="function")throw new TypeError("tokenProvider should be function, but got: ".concat(typeof w));return new f(function(){return n(y,void 0,void 0,function(){var b;return i(this,function(p){switch(p.label){case 0:return b={},[4,w()];case 1:return[2,(b.token=p.sent(),b)]}})})},["Neo.ClientError.Security.Unauthorized"])},d}());e.authTokenManagers=l,Object.freeze(l),e.staticAuthTokenManager=function(d){var v=d.authToken;return new h(v)};var c=function(){function d(v){v===void 0&&(v=[]),this._subscribers=v}return d.prototype.subscribe=function(v){this._subscribers.push(v)},d.prototype.onCompleted=function(v){this._subscribers.forEach(function(y){return y.onCompleted(v)})},d.prototype.onError=function(v){this._subscribers.forEach(function(y){return y.onError(v)})},d}(),f=function(){function d(v,y,w,b){this._tokenProvider=v,this._handledSecurityCodes=y,this._currentAuthData=w,this._refreshObservable=b}return d.prototype.getToken=function(){var v;return n(this,void 0,void 0,function(){return i(this,function(y){switch(y.label){case 0:return this._currentAuthData===void 0||this._currentAuthData.expiration!==void 0&&this._currentAuthData.expiration<new Date?[4,this._refreshAuthToken()]:[3,2];case 1:y.sent(),y.label=2;case 2:return[2,(v=this._currentAuthData)===null||v===void 0?void 0:v.token]}})})},d.prototype.handleSecurityException=function(v,y){var w;return!!this._handledSecurityCodes.includes(y)&&(s.util.equals(v,(w=this._currentAuthData)===null||w===void 0?void 0:w.token)&&this._scheduleRefreshAuthToken(),!0)},d.prototype._scheduleRefreshAuthToken=function(v){var y=this;this._refreshObservable===void 0&&(this._currentAuthData=void 0,this._refreshObservable=new c,Promise.resolve(this._tokenProvider()).then(function(w){var b;y._currentAuthData=w,(b=y._refreshObservable)===null||b===void 0||b.onCompleted(w)}).catch(function(w){var b;(b=y._refreshObservable)===null||b===void 0||b.onError(w)}).finally(function(){y._refreshObservable=void 0})),v!==void 0&&this._refreshObservable.subscribe(v)},d.prototype._refreshAuthToken=function(){return n(this,void 0,void 0,function(){var v=this;return i(this,function(y){switch(y.label){case 0:return[4,new Promise(function(w,b){v._scheduleRefreshAuthToken({onCompleted:w,onError:b})})];case 1:return[2,y.sent()]}})})},d}(),h=function(){function d(v){this._authToken=v}return d.prototype.getToken=function(){return this._authToken},d.prototype.handleSecurityException=function(v,y){return!1},d}()},1967:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var t={basic:function(i,o,a){return a!=null?{scheme:"basic",principal:i,credentials:o,realm:a}:{scheme:"basic",principal:i,credentials:o}},kerberos:function(i){return{scheme:"kerberos",principal:"",credentials:i}},bearer:function(i){return{scheme:"bearer",credentials:i}},none:function(){return{scheme:"none"}},custom:function(i,o,a,s,u){var l={scheme:s,principal:i};return n(o)&&(l.credentials=o),n(a)&&(l.realm=a),n(u)&&(l.parameters=u),l}};function n(i){return!(i==null||i===""||Object.getPrototypeOf(i)===Object.prototype&&Object.keys(i).length===0)}e.default=t},6755:function(r,e){var t=this&&this.__awaiter||function(l,c,f,h){return new(f||(f=Promise))(function(d,v){function y(p){try{b(h.next(p))}catch(_){v(_)}}function w(p){try{b(h.throw(p))}catch(_){v(_)}}function b(p){var _;p.done?d(p.value):(_=p.value,_ instanceof f?_:new f(function(O){O(_)})).then(y,w)}b((h=h.apply(l,c||[])).next())})},n=this&&this.__generator||function(l,c){var f,h,d,v,y={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return v={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function w(b){return function(p){return function(_){if(f)throw new TypeError("Generator is already executing.");for(;v&&(v=0,_[0]&&(y=0)),y;)try{if(f=1,h&&(d=2&_[0]?h.return:_[0]?h.throw||((d=h.return)&&d.call(h),0):h.next)&&!(d=d.call(h,_[1])).done)return d;switch(h=0,d&&(_=[2&_[0],d.value]),_[0]){case 0:case 1:d=_;break;case 4:return y.label++,{value:_[1],done:!1};case 5:y.label++,h=_[1],_=[0];continue;case 7:_=y.ops.pop(),y.trys.pop();continue;default:if(!((d=(d=y.trys).length>0&&d[d.length-1])||_[0]!==6&&_[0]!==2)){y=0;continue}if(_[0]===3&&(!d||_[1]>d[0]&&_[1]<d[3])){y.label=_[1];break}if(_[0]===6&&y.label<d[1]){y.label=d[1],d=_;break}if(d&&y.label<d[2]){y.label=d[2],y.ops.push(_);break}d[2]&&y.ops.pop(),y.trys.pop();continue}_=c.call(l,y)}catch(O){_=[6,O],h=0}finally{f=d=0}if(5&_[0])throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}([b,p])}}},i=this&&this.__values||function(l){var c=typeof Symbol=="function"&&Symbol.iterator,f=c&&l[c],h=0;if(f)return f.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&h>=l.length&&(l=void 0),{value:l&&l[h++],done:!l}}};throw new TypeError(c?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(l,c){var f=typeof Symbol=="function"&&l[Symbol.iterator];if(!f)return l;var h,d,v=f.call(l),y=[];try{for(;(c===void 0||c-- >0)&&!(h=v.next()).done;)y.push(h.value)}catch(w){d={error:w}}finally{try{h&&!h.done&&(f=v.return)&&f.call(v)}finally{if(d)throw d.error}}return y},a=this&&this.__spreadArray||function(l,c,f){if(f||arguments.length===2)for(var h,d=0,v=c.length;d<v;d++)!h&&d in c||(h||(h=Array.prototype.slice.call(c,0,d)),h[d]=c[d]);return l.concat(h||Array.prototype.slice.call(c))};Object.defineProperty(e,"__esModule",{value:!0}),e.bookmarkManager=void 0;var s=function(){function l(){throw new Error("Not implemented")}return l.prototype.updateBookmarks=function(c,f){return t(this,void 0,void 0,function(){return n(this,function(h){throw new Error("Not implemented")})})},l.prototype.getBookmarks=function(){return t(this,void 0,void 0,function(){return n(this,function(c){throw new Error("Not implemented")})})},l}();e.default=s,e.bookmarkManager=function(l){l===void 0&&(l={});var c=new Set(l.initialBookmarks);return new u(c,l.bookmarksSupplier,l.bookmarksConsumer)};var u=function(){function l(c,f,h){this._bookmarks=c,this._bookmarksSupplier=f,this._bookmarksConsumer=h}return l.prototype.updateBookmarks=function(c,f){return t(this,void 0,void 0,function(){var h,d,v,y,w,b,p,_,O,P;return n(this,function(R){switch(R.label){case 0:h=this._bookmarks;try{for(d=i(c),v=d.next();!v.done;v=d.next())b=v.value,h.delete(b)}catch(T){p={error:T}}finally{try{v&&!v.done&&(_=d.return)&&_.call(d)}finally{if(p)throw p.error}}try{for(y=i(f),w=y.next();!w.done;w=y.next())b=w.value,h.add(b)}catch(T){O={error:T}}finally{try{w&&!w.done&&(P=y.return)&&P.call(y)}finally{if(O)throw O.error}}return typeof this._bookmarksConsumer!="function"?[3,2]:[4,this._bookmarksConsumer(a([],o(h),!1))];case 1:R.sent(),R.label=2;case 2:return[2]}})})},l.prototype.getBookmarks=function(){var c;return t(this,void 0,void 0,function(){var f,h,d,v,y,w,b;return n(this,function(p){switch(p.label){case 0:return f=new Set(this._bookmarks),typeof this._bookmarksSupplier!="function"?[3,2]:[4,this._bookmarksSupplier()];case 1:h=(c=p.sent())!==null&&c!==void 0?c:[];try{for(d=i(h),v=d.next();!v.done;v=d.next())y=v.value,f.add(y)}catch(_){w={error:_}}finally{try{v&&!v.done&&(b=d.return)&&b.call(d)}finally{if(w)throw w.error}}p.label=2;case 2:return[2,a([],o(f),!1)]}})})},l}()},8264:function(r,e,t){var n,i=this&&this.__extends||(n=function(p,_){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,P){O.__proto__=P}||function(O,P){for(var R in P)Object.prototype.hasOwnProperty.call(P,R)&&(O[R]=P[R])},n(p,_)},function(p,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function O(){this.constructor=p}n(p,_),p.prototype=_===null?Object.create(_):(O.prototype=_.prototype,new O)}),o=this&&this.__assign||function(){return o=Object.assign||function(p){for(var _,O=1,P=arguments.length;O<P;O++)for(var R in _=arguments[O])Object.prototype.hasOwnProperty.call(_,R)&&(p[R]=_[R]);return p},o.apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(p,_,O,P){P===void 0&&(P=O);var R=Object.getOwnPropertyDescriptor(_,O);R&&!("get"in R?!_.__esModule:R.writable||R.configurable)||(R={enumerable:!0,get:function(){return _[O]}}),Object.defineProperty(p,P,R)}:function(p,_,O,P){P===void 0&&(P=O),p[P]=_[O]}),s=this&&this.__setModuleDefault||(Object.create?function(p,_){Object.defineProperty(p,"default",{enumerable:!0,value:_})}:function(p,_){p.default=_}),u=this&&this.__importStar||function(p){if(p&&p.__esModule)return p;var _={};if(p!=null)for(var O in p)O!=="default"&&Object.prototype.hasOwnProperty.call(p,O)&&a(_,p,O);return s(_,p),_};Object.defineProperty(e,"__esModule",{value:!0}),e.resolveCertificateProvider=e.clientCertificateProviders=e.RotatingClientCertificateProvider=e.ClientCertificateProvider=void 0;var l=u(t(4027));e.default=function(){this.certfile="",this.keyfile="",this.password=void 0};var c=function(){function p(){}return p.prototype.hasUpdate=function(){throw new Error("Not Implemented")},p.prototype.getClientCertificate=function(){throw new Error("Not Implemented")},p}();e.ClientCertificateProvider=c;var f=function(p){function _(){return p!==null&&p.apply(this,arguments)||this}return i(_,p),_.prototype.updateCertificate=function(O){throw new Error("Not implemented")},_}(c);e.RotatingClientCertificateProvider=f;var h=new(function(){function p(){}return p.prototype.rotating=function(_){var O=_.initialCertificate;if(O==null||!d(O))throw new TypeError("initialCertificate should be ClientCertificate, but got ".concat(l.stringify(O)));var P=o({},O);return new b(P)},p}());function d(p){return p!=null&&typeof p=="object"&&"certfile"in p&&(v(_=p.certfile)||y(_,v))&&"keyfile"in p&&function(O){function P(R){return typeof R=="string"||R!=null&&typeof R=="object"&&"path"in R&&typeof R.path=="string"&&w("password",R)}return P(O)||y(O,P)}(p.keyfile)&&w("password",p);var _}function v(p){return typeof p=="string"}function y(p,_,O){return O===void 0&&(O=!1),Array.isArray(p)&&(O||p.length>0)&&p.filter(_).length===p.length}function w(p,_){return!(p in _)||_[p]==null||typeof _[p]=="string"}e.clientCertificateProviders=h,Object.freeze(h),e.resolveCertificateProvider=function(p){if(p!=null){if(typeof p=="object"&&"hasUpdate"in p&&"getClientCertificate"in p&&typeof p.getClientCertificate=="function"&&typeof p.hasUpdate=="function")return p;if(d(p)){var _=o({},p);return{getClientCertificate:function(){return _},hasUpdate:function(){return!1}}}throw new TypeError("clientCertificate should be configured with ClientCertificate or ClientCertificateProvider, but got ".concat(l.stringify(p)))}};var b=function(){function p(_,O){O===void 0&&(O=!1),this._certificate=_,this._updated=O}return p.prototype.hasUpdate=function(){try{return this._updated}finally{this._updated=!1}},p.prototype.getClientCertificate=function(){return this._certificate},p.prototype.updateCertificate=function(_){if(!d(_))throw new TypeError("certificate should be ClientCertificate, but got ".concat(l.stringify(_)));this._certificate=o({},_),this._updated=!0},p}()},2007:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Releasable=void 0;var t=function(){function i(){}return i.prototype.release=function(){throw new Error("Not implemented")},i}();e.Releasable=t;var n=function(){function i(){}return i.prototype.acquireConnection=function(o){throw Error("Not implemented")},i.prototype.supportsMultiDb=function(){throw Error("Not implemented")},i.prototype.supportsTransactionConfig=function(){throw Error("Not implemented")},i.prototype.supportsUserImpersonation=function(){throw Error("Not implemented")},i.prototype.supportsSessionAuth=function(){throw Error("Not implemented")},i.prototype.verifyConnectivityAndGetServerInfo=function(o){throw Error("Not implemented")},i.prototype.verifyAuthentication=function(o){throw Error("Not implemented")},i.prototype.getNegotiatedProtocolVersion=function(){throw Error("Not Implemented")},i.prototype.close=function(){throw Error("Not implemented")},i}();e.default=n},1409:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function n(){}return n.prototype.beginTransaction=function(i){throw new Error("Not implemented")},n.prototype.run=function(i,o,a){throw new Error("Not implemented")},n.prototype.commitTransaction=function(i){throw new Error("Not implemented")},n.prototype.rollbackTransaction=function(i){throw new Error("Not implemented")},n.prototype.resetAndFlush=function(){throw new Error("Not implemented")},n.prototype.isOpen=function(){throw new Error("Not implemented")},n.prototype.getProtocolVersion=function(){throw new Error("Not implemented")},n.prototype.hasOngoingObservableRequests=function(){throw new Error("Not implemented")},n}();e.default=t},7264:function(r,e,t){var n=this&&this.__awaiter||function(T,A,M,N){return new(M||(M=Promise))(function(j,B){function q(te){try{J(N.next(te))}catch(re){B(re)}}function W(te){try{J(N.throw(te))}catch(re){B(re)}}function J(te){var re;te.done?j(te.value):(re=te.value,re instanceof M?re:new M(function(ee){ee(re)})).then(q,W)}J((N=N.apply(T,A||[])).next())})},i=this&&this.__generator||function(T,A){var M,N,j,B,q={label:0,sent:function(){if(1&j[0])throw j[1];return j[1]},trys:[],ops:[]};return B={next:W(0),throw:W(1),return:W(2)},typeof Symbol=="function"&&(B[Symbol.iterator]=function(){return this}),B;function W(J){return function(te){return function(re){if(M)throw new TypeError("Generator is already executing.");for(;B&&(B=0,re[0]&&(q=0)),q;)try{if(M=1,N&&(j=2&re[0]?N.return:re[0]?N.throw||((j=N.return)&&j.call(N),0):N.next)&&!(j=j.call(N,re[1])).done)return j;switch(N=0,j&&(re=[2&re[0],j.value]),re[0]){case 0:case 1:j=re;break;case 4:return q.label++,{value:re[1],done:!1};case 5:q.label++,N=re[1],re=[0];continue;case 7:re=q.ops.pop(),q.trys.pop();continue;default:if(!((j=(j=q.trys).length>0&&j[j.length-1])||re[0]!==6&&re[0]!==2)){q=0;continue}if(re[0]===3&&(!j||re[1]>j[0]&&re[1]<j[3])){q.label=re[1];break}if(re[0]===6&&q.label<j[1]){q.label=j[1],j=re;break}if(j&&q.label<j[2]){q.label=j[2],q.ops.push(re);break}j[2]&&q.ops.pop(),q.trys.pop();continue}re=A.call(T,q)}catch(ee){re=[6,ee],N=0}finally{M=j=0}if(5&re[0])throw re[1];return{value:re[0]?re[1]:void 0,done:!0}}([J,te])}}},o=this&&this.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(e,"__esModule",{value:!0}),e.QueryConfig=e.SessionConfig=e.routing=e.WRITE=e.READ=e.Driver=void 0;var a=t(9730),s=o(t(8341)),u=t(326),l=t(4883),c=o(t(5481)),f=t(6587),h=t(6755),d=o(t(1573)),v=o(t(7041)),y=t(9691),w=u.ACCESS_MODE_READ;e.READ=w;var b=u.ACCESS_MODE_WRITE;e.WRITE=b;var p=0;e.SessionConfig=function(){this.defaultAccessMode=b,this.bookmarks=[],this.database="",this.impersonatedUser=void 0,this.auth=void 0,this.fetchSize=void 0,this.bookmarkManager=void 0,this.notificationFilter=void 0};var _={WRITE:"WRITE",READ:"READ"};e.routing=_,Object.freeze(_),e.QueryConfig=function(){this.routing=_.WRITE,this.resultTransformer=void 0,this.database="",this.impersonatedUser=void 0,this.bookmarkManager=void 0,this.transactionConfig=void 0,this.auth=void 0,this.signal=void 0};var O=function(){function T(A,M,N,j,B){M===void 0&&(M={}),j===void 0&&(j=function(W){return new c.default(W)}),B===void 0&&(B=function(W){return new v.default(W)}),function(W){W.maxConnectionLifetime=P(W.maxConnectionLifetime,36e5),W.maxConnectionPoolSize=P(W.maxConnectionPoolSize,u.DEFAULT_POOL_MAX_SIZE),W.connectionAcquisitionTimeout=P(W.connectionAcquisitionTimeout,u.DEFAULT_POOL_ACQUISITION_TIMEOUT),W.fetchSize=R(W.fetchSize,1e3),W.connectionTimeout=function(J){var te=parseInt(J.connectionTimeout,10);return te===0||!isNaN(te)&&te<0?null:isNaN(te)?u.DEFAULT_CONNECTION_TIMEOUT_MILLIS:te}(W),W.connectionLivenessCheckTimeout=function(J){if(J!=null){var te=parseInt(J,10);if(te<0||Number.isNaN(te))throw new Error("The connectionLivenessCheckTimeout can only be a positive value or 0 for always. However connectionLivenessCheckTimeout = ".concat(te));return te}}(W.connectionLivenessCheckTimeout)}(M);var q=l.Logger.create(M);(function(W,J){var te,re,ee=W.resolver;if(ee!=null&&typeof ee!="function")throw new TypeError("Configured resolver should be a function. Got: ".concat(typeof ee));if(W.connectionAcquisitionTimeout<W.connectionTimeout&&J.warn('Configuration for "connectionAcquisitionTimeout" should be greater than or equal to "connectionTimeout". Otherwise, the connection acquisition timeout will take precedence for over the connection timeout in scenarios where a new connection is created while it is acquired'),((te=W.notificationFilter)===null||te===void 0?void 0:te.disabledCategories)!=null&&((re=W.notificationFilter)===null||re===void 0?void 0:re.disabledClassifications)!=null)throw new Error(`The notificationFilter can't have both "disabledCategories" and  "disabledClassifications" configured at the same time.`)})(M,q),this._id=p++,this._meta=A,this._config=M,this._log=q,this._createConnectionProvider=N,this._createSession=j,this._defaultExecuteQueryBookmarkManager=(0,h.bookmarkManager)(),this._queryExecutor=B(this.session.bind(this)),this._connectionProvider=null,this._afterConstruction()}return Object.defineProperty(T.prototype,"executeQueryBookmarkManager",{get:function(){return this._defaultExecuteQueryBookmarkManager},enumerable:!1,configurable:!0}),T.prototype.executeQuery=function(A,M,N){var j,B,q;return N===void 0&&(N={}),n(this,void 0,void 0,function(){var W,J,te;return i(this,function(re){switch(re.label){case 0:if(W=N.bookmarkManager===null?void 0:(j=N.bookmarkManager)!==null&&j!==void 0?j:this.executeQueryBookmarkManager,J=(B=N.resultTransformer)!==null&&B!==void 0?B:d.default.eagerResultTransformer(),(te=(q=N.routing)!==null&&q!==void 0?q:_.WRITE)!==_.READ&&te!==_.WRITE)throw(0,y.newError)('Illegal query routing config: "'.concat(te,'"'));return[4,this._queryExecutor.execute({resultTransformer:J,bookmarkManager:W,routing:te,database:N.database,impersonatedUser:N.impersonatedUser,transactionConfig:N.transactionConfig,auth:N.auth,signal:N.signal},A,M)];case 1:return[2,re.sent()]}})})},T.prototype.verifyConnectivity=function(A){var M=(A===void 0?{}:A).database,N=M===void 0?"":M;return this._getOrCreateConnectionProvider().verifyConnectivityAndGetServerInfo({database:N,accessMode:w})},T.prototype.verifyAuthentication=function(A){var M=A===void 0?{}:A,N=M.database,j=M.auth;return n(this,void 0,void 0,function(){return i(this,function(B){switch(B.label){case 0:return[4,this._getOrCreateConnectionProvider().verifyAuthentication({database:N??"system",auth:j,accessMode:w})];case 1:return[2,B.sent()]}})})},T.prototype.getServerInfo=function(A){var M=(A===void 0?{}:A).database,N=M===void 0?"":M;return this._getOrCreateConnectionProvider().verifyConnectivityAndGetServerInfo({database:N,accessMode:w})},T.prototype.supportsMultiDb=function(){return this._getOrCreateConnectionProvider().supportsMultiDb()},T.prototype.supportsTransactionConfig=function(){return this._getOrCreateConnectionProvider().supportsTransactionConfig()},T.prototype.supportsUserImpersonation=function(){return this._getOrCreateConnectionProvider().supportsUserImpersonation()},T.prototype.supportsSessionAuth=function(){return this._getOrCreateConnectionProvider().supportsSessionAuth()},T.prototype.getNegotiatedProtocolVersion=function(){return this._getOrCreateConnectionProvider().getNegotiatedProtocolVersion()},T.prototype.isEncrypted=function(){return this._isEncrypted()},T.prototype._supportsRouting=function(){return this._meta.routing},T.prototype._isEncrypted=function(){return this._config.encrypted===f.ENCRYPTION_ON||this._config.encrypted===!0},T.prototype._getTrust=function(){return this._config.trust},T.prototype.session=function(A){var M=A===void 0?{}:A,N=M.defaultAccessMode,j=N===void 0?b:N,B=M.bookmarks,q=M.database,W=q===void 0?"":q,J=M.impersonatedUser,te=M.fetchSize,re=M.bookmarkManager,ee=M.notificationFilter,fe=M.auth;return this._newSession({defaultAccessMode:j,bookmarkOrBookmarks:B,database:W,reactive:!1,impersonatedUser:J,fetchSize:R(te,this._config.fetchSize),bookmarkManager:re,notificationFilter:ee,auth:fe})},T.prototype.close=function(){return this._log.info("Driver ".concat(this._id," closing")),this._connectionProvider!=null?this._connectionProvider.close():Promise.resolve()},T.prototype[Symbol.asyncDispose]=function(){return this.close()},T.prototype._afterConstruction=function(){this._log.info("".concat(this._meta.typename," driver ").concat(this._id," created for server address ").concat(this._meta.address.toString()))},T.prototype._newSession=function(A){var M=A.defaultAccessMode,N=A.bookmarkOrBookmarks,j=A.database,B=A.reactive,q=A.impersonatedUser,W=A.fetchSize,J=A.bookmarkManager,te=A.notificationFilter,re=A.auth,ee=c.default._validateSessionMode(M),fe=this._getOrCreateConnectionProvider(),he=N!=null?new a.Bookmarks(N):a.Bookmarks.empty();return this._createSession({mode:ee,database:j??"",connectionProvider:fe,bookmarks:he,config:this._config,reactive:B,impersonatedUser:q,fetchSize:W,bookmarkManager:J,notificationFilter:te,auth:re,log:this._log})},T.prototype._getOrCreateConnectionProvider=function(){var A;return this._connectionProvider==null&&(this._connectionProvider=this._createConnectionProvider(this._id,this._config,this._log,(A=this._config,new s.default(A.resolver)))),this._connectionProvider},T}();function P(T,A){var M=parseInt(T,10);return M>0||M===0?M:M<0?Number.MAX_SAFE_INTEGER:A}function R(T,A){var M=parseInt(T,10);if(M>0||M===u.FETCH_ALL)return M;if(M===0||M<0)throw new Error("The fetch size can only be a positive value or ".concat(u.FETCH_ALL," for ALL. However fetchSize = ").concat(M));return A}e.Driver=O,e.default=O},9691:function(r,e,t){var n,i=this&&this.__extends||(n=function(b,p){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,O){_.__proto__=O}||function(_,O){for(var P in O)Object.prototype.hasOwnProperty.call(O,P)&&(_[P]=O[P])},n(b,p)},function(b,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");function _(){this.constructor=b}n(b,p),b.prototype=p===null?Object.create(p):(_.prototype=p.prototype,new _)}),o=this&&this.__createBinding||(Object.create?function(b,p,_,O){O===void 0&&(O=_);var P=Object.getOwnPropertyDescriptor(p,_);P&&!("get"in P?!p.__esModule:P.writable||P.configurable)||(P={enumerable:!0,get:function(){return p[_]}}),Object.defineProperty(b,O,P)}:function(b,p,_,O){O===void 0&&(O=_),b[O]=p[_]}),a=this&&this.__setModuleDefault||(Object.create?function(b,p){Object.defineProperty(b,"default",{enumerable:!0,value:p})}:function(b,p){b.default=p}),s=this&&this.__importStar||function(b){if(b&&b.__esModule)return b;var p={};if(b!=null)for(var _ in b)_!=="default"&&Object.prototype.hasOwnProperty.call(b,_)&&o(p,b,_);return a(p,b),p};Object.defineProperty(e,"__esModule",{value:!0}),e.PROTOCOL_ERROR=e.SESSION_EXPIRED=e.SERVICE_UNAVAILABLE=e.GQLError=e.Neo4jError=e.isRetriableError=e.newGQLError=e.newError=void 0;var u=s(t(4027)),l=t(1053),c={DATABASE_ERROR:"DATABASE_ERROR",CLIENT_ERROR:"CLIENT_ERROR",TRANSIENT_ERROR:"TRANSIENT_ERROR",UNKNOWN:"UNKNOWN"};Object.freeze(c);var f=Object.values(c),h="ServiceUnavailable";e.SERVICE_UNAVAILABLE=h;var d="SessionExpired";e.SESSION_EXPIRED=d,e.PROTOCOL_ERROR="ProtocolError";var v=function(b){function p(_,O,P,R,T){var A,M=this;return(M=b.call(this,_,T!=null?{cause:T}:void 0)||this).constructor=p,M.__proto__=p.prototype,M.cause=T??void 0,M.gqlStatus=O,M.gqlStatusDescription=P,M.diagnosticRecord=R,M.classification=function(N){return N===void 0||N._classification===void 0?"UNKNOWN":f.includes(N._classification)?N==null?void 0:N._classification:"UNKNOWN"}(M.diagnosticRecord),M.rawClassification=(A=R==null?void 0:R._classification)!==null&&A!==void 0?A:void 0,M.name="GQLError",M}return i(p,b),Object.defineProperty(p.prototype,"diagnosticRecordAsJsonString",{get:function(){return u.stringify(this.diagnosticRecord,{useCustomToString:!0})},enumerable:!1,configurable:!0}),p}(Error);e.GQLError=v;var y=function(b){function p(_,O,P,R,T,A){var M=b.call(this,_,P,R,T,A)||this;return M.constructor=p,M.__proto__=p.prototype,M.code=O,M.name="Neo4jError",M.retriable=function(N){return N===h||N===d||function(j){return j==="Neo.ClientError.Security.AuthorizationExpired"}(N)||function(j){return(j==null?void 0:j.includes("TransientError"))===!0}(N)}(O),M}return i(p,b),p.isRetriable=function(_){return _!=null&&_ instanceof p&&_.retriable},p}(v);e.Neo4jError=y,e.newError=function(b,p,_,O,P,R){return new y(b,p??"N/A",O??"50N42",P??"error: general processing exception - unexpected error. "+b,R??l.rawPolyfilledDiagnosticRecord,_)},e.newGQLError=function(b,p,_,O,P){return new v(b,_??"50N42",O??"error: general processing exception - unexpected error. "+b,P??l.rawPolyfilledDiagnosticRecord,p)};var w=y.isRetriable;e.isRetriableError=w},1053:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.rawPolyfilledDiagnosticRecord=void 0,e.rawPolyfilledDiagnosticRecord={OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"},Object.freeze(e.rawPolyfilledDiagnosticRecord)},1517:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isPathSegment=e.PathSegment=e.isPath=e.Path=e.isUnboundRelationship=e.UnboundRelationship=e.isRelationship=e.Relationship=e.isNode=e.Node=void 0;var n=t(4027),i={value:!0,enumerable:!1,configurable:!1,writable:!1},o="__isNode__",a="__isRelationship__",s="__isUnboundRelationship__",u="__isPath__",l="__isPathSegment__";function c(b,p){return b!=null&&b[p]===!0}var f=function(){function b(p,_,O,P){this.identity=p,this.labels=_,this.properties=O,this.elementId=w(P,function(){return p.toString()})}return b.prototype.toString=function(){for(var p="("+this.elementId,_=0;_<this.labels.length;_++)p+=":"+this.labels[_];var O=Object.keys(this.properties);if(O.length>0){for(p+=" {",_=0;_<O.length;_++)_>0&&(p+=","),p+=O[_]+":"+(0,n.stringify)(this.properties[O[_]]);p+="}"}return p+")"},b}();e.Node=f,Object.defineProperty(f.prototype,o,i),e.isNode=function(b){return c(b,o)};var h=function(){function b(p,_,O,P,R,T,A,M){this.identity=p,this.start=_,this.end=O,this.type=P,this.properties=R,this.elementId=w(T,function(){return p.toString()}),this.startNodeElementId=w(A,function(){return _.toString()}),this.endNodeElementId=w(M,function(){return O.toString()})}return b.prototype.toString=function(){var p="("+this.startNodeElementId+")-[:"+this.type,_=Object.keys(this.properties);if(_.length>0){p+=" {";for(var O=0;O<_.length;O++)O>0&&(p+=","),p+=_[O]+":"+(0,n.stringify)(this.properties[_[O]]);p+="}"}return p+"]->("+this.endNodeElementId+")"},b}();e.Relationship=h,Object.defineProperty(h.prototype,a,i),e.isRelationship=function(b){return c(b,a)};var d=function(){function b(p,_,O,P){this.identity=p,this.type=_,this.properties=O,this.elementId=w(P,function(){return p.toString()})}return b.prototype.bind=function(p,_){return new h(this.identity,p,_,this.type,this.properties,this.elementId)},b.prototype.bindTo=function(p,_){return new h(this.identity,p.identity,_.identity,this.type,this.properties,this.elementId,p.elementId,_.elementId)},b.prototype.toString=function(){var p="-[:"+this.type,_=Object.keys(this.properties);if(_.length>0){p+=" {";for(var O=0;O<_.length;O++)O>0&&(p+=","),p+=_[O]+":"+(0,n.stringify)(this.properties[_[O]]);p+="}"}return p+"]->"},b}();e.UnboundRelationship=d,Object.defineProperty(d.prototype,s,i),e.isUnboundRelationship=function(b){return c(b,s)};var v=function(b,p,_){this.start=b,this.relationship=p,this.end=_};e.PathSegment=v,Object.defineProperty(v.prototype,l,i),e.isPathSegment=function(b){return c(b,l)};var y=function(b,p,_){this.start=b,this.end=p,this.segments=_,this.length=_.length};function w(b,p){return b??p()}e.Path=y,Object.defineProperty(y.prototype,u,i),e.isPath=function(b){return c(b,u)}},9305:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(se,me,De,Le){Le===void 0&&(Le=De);var Ie=Object.getOwnPropertyDescriptor(me,De);Ie&&!("get"in Ie?!me.__esModule:Ie.writable||Ie.configurable)||(Ie={enumerable:!0,get:function(){return me[De]}}),Object.defineProperty(se,Le,Ie)}:function(se,me,De,Le){Le===void 0&&(Le=De),se[Le]=me[De]}),i=this&&this.__setModuleDefault||(Object.create?function(se,me){Object.defineProperty(se,"default",{enumerable:!0,value:me})}:function(se,me){se.default=me}),o=this&&this.__importStar||function(se){if(se&&se.__esModule)return se;var me={};if(se!=null)for(var De in se)De!=="default"&&Object.prototype.hasOwnProperty.call(se,De)&&n(me,se,De);return i(me,se),me},a=this&&this.__importDefault||function(se){return se&&se.__esModule?se:{default:se}};Object.defineProperty(e,"__esModule",{value:!0}),e.EagerResult=e.Result=e.Stats=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.GqlStatusObject=e.Notification=e.ServerInfo=e.queryType=e.ResultSummary=e.Record=e.isPathSegment=e.PathSegment=e.isPath=e.Path=e.isUnboundRelationship=e.UnboundRelationship=e.isRelationship=e.Relationship=e.isNode=e.Node=e.Time=e.LocalTime=e.LocalDateTime=e.isTime=e.isLocalTime=e.isLocalDateTime=e.isDuration=e.isDateTime=e.isDate=e.Duration=e.DateTime=e.Date=e.Point=e.isPoint=e.internal=e.toString=e.toNumber=e.inSafeRange=e.isInt=e.int=e.Integer=e.error=e.isRetriableError=e.GQLError=e.newGQLError=e.Neo4jError=e.newError=e.authTokenManagers=void 0,e.resolveCertificateProvider=e.clientCertificateProviders=e.notificationFilterMinimumSeverityLevel=e.notificationFilterDisabledClassification=e.notificationFilterDisabledCategory=e.notificationSeverityLevel=e.notificationClassification=e.notificationCategory=e.resultTransformers=e.routing=e.staticAuthTokenManager=e.bookmarkManager=e.auth=e.json=e.driver=e.types=e.Driver=e.Session=e.TransactionPromise=e.ManagedTransaction=e.Transaction=e.Connection=e.Releasable=e.ConnectionProvider=void 0;var s=t(9691);Object.defineProperty(e,"newError",{enumerable:!0,get:function(){return s.newError}}),Object.defineProperty(e,"Neo4jError",{enumerable:!0,get:function(){return s.Neo4jError}}),Object.defineProperty(e,"newGQLError",{enumerable:!0,get:function(){return s.newGQLError}}),Object.defineProperty(e,"GQLError",{enumerable:!0,get:function(){return s.GQLError}}),Object.defineProperty(e,"isRetriableError",{enumerable:!0,get:function(){return s.isRetriableError}});var u=o(t(3371));e.Integer=u.default,Object.defineProperty(e,"int",{enumerable:!0,get:function(){return u.int}}),Object.defineProperty(e,"isInt",{enumerable:!0,get:function(){return u.isInt}}),Object.defineProperty(e,"inSafeRange",{enumerable:!0,get:function(){return u.inSafeRange}}),Object.defineProperty(e,"toNumber",{enumerable:!0,get:function(){return u.toNumber}}),Object.defineProperty(e,"toString",{enumerable:!0,get:function(){return u.toString}});var l=t(5459);Object.defineProperty(e,"Date",{enumerable:!0,get:function(){return l.Date}}),Object.defineProperty(e,"DateTime",{enumerable:!0,get:function(){return l.DateTime}}),Object.defineProperty(e,"Duration",{enumerable:!0,get:function(){return l.Duration}}),Object.defineProperty(e,"isDate",{enumerable:!0,get:function(){return l.isDate}}),Object.defineProperty(e,"isDateTime",{enumerable:!0,get:function(){return l.isDateTime}}),Object.defineProperty(e,"isDuration",{enumerable:!0,get:function(){return l.isDuration}}),Object.defineProperty(e,"isLocalDateTime",{enumerable:!0,get:function(){return l.isLocalDateTime}}),Object.defineProperty(e,"isLocalTime",{enumerable:!0,get:function(){return l.isLocalTime}}),Object.defineProperty(e,"isTime",{enumerable:!0,get:function(){return l.isTime}}),Object.defineProperty(e,"LocalDateTime",{enumerable:!0,get:function(){return l.LocalDateTime}}),Object.defineProperty(e,"LocalTime",{enumerable:!0,get:function(){return l.LocalTime}}),Object.defineProperty(e,"Time",{enumerable:!0,get:function(){return l.Time}});var c=t(1517);Object.defineProperty(e,"Node",{enumerable:!0,get:function(){return c.Node}}),Object.defineProperty(e,"isNode",{enumerable:!0,get:function(){return c.isNode}}),Object.defineProperty(e,"Relationship",{enumerable:!0,get:function(){return c.Relationship}}),Object.defineProperty(e,"isRelationship",{enumerable:!0,get:function(){return c.isRelationship}}),Object.defineProperty(e,"UnboundRelationship",{enumerable:!0,get:function(){return c.UnboundRelationship}}),Object.defineProperty(e,"isUnboundRelationship",{enumerable:!0,get:function(){return c.isUnboundRelationship}}),Object.defineProperty(e,"Path",{enumerable:!0,get:function(){return c.Path}}),Object.defineProperty(e,"isPath",{enumerable:!0,get:function(){return c.isPath}}),Object.defineProperty(e,"PathSegment",{enumerable:!0,get:function(){return c.PathSegment}}),Object.defineProperty(e,"isPathSegment",{enumerable:!0,get:function(){return c.isPathSegment}});var f=a(t(4820));e.Record=f.default;var h=t(7093);Object.defineProperty(e,"isPoint",{enumerable:!0,get:function(){return h.isPoint}}),Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return h.Point}});var d=o(t(6033));e.ResultSummary=d.default,Object.defineProperty(e,"queryType",{enumerable:!0,get:function(){return d.queryType}}),Object.defineProperty(e,"ServerInfo",{enumerable:!0,get:function(){return d.ServerInfo}}),Object.defineProperty(e,"Plan",{enumerable:!0,get:function(){return d.Plan}}),Object.defineProperty(e,"ProfiledPlan",{enumerable:!0,get:function(){return d.ProfiledPlan}}),Object.defineProperty(e,"QueryStatistics",{enumerable:!0,get:function(){return d.QueryStatistics}}),Object.defineProperty(e,"Stats",{enumerable:!0,get:function(){return d.Stats}});var v=o(t(1866));e.Notification=v.default,Object.defineProperty(e,"GqlStatusObject",{enumerable:!0,get:function(){return v.GqlStatusObject}}),Object.defineProperty(e,"notificationCategory",{enumerable:!0,get:function(){return v.notificationCategory}}),Object.defineProperty(e,"notificationClassification",{enumerable:!0,get:function(){return v.notificationClassification}}),Object.defineProperty(e,"notificationSeverityLevel",{enumerable:!0,get:function(){return v.notificationSeverityLevel}});var y=t(1985);Object.defineProperty(e,"notificationFilterDisabledCategory",{enumerable:!0,get:function(){return y.notificationFilterDisabledCategory}}),Object.defineProperty(e,"notificationFilterDisabledClassification",{enumerable:!0,get:function(){return y.notificationFilterDisabledClassification}}),Object.defineProperty(e,"notificationFilterMinimumSeverityLevel",{enumerable:!0,get:function(){return y.notificationFilterMinimumSeverityLevel}});var w=a(t(9512));e.Result=w.default;var b=a(t(8917));e.EagerResult=b.default;var p=o(t(2007));e.ConnectionProvider=p.default,Object.defineProperty(e,"Releasable",{enumerable:!0,get:function(){return p.Releasable}});var _=a(t(1409));e.Connection=_.default;var O=a(t(9473));e.Transaction=O.default;var P=a(t(5909));e.ManagedTransaction=P.default;var R=a(t(4569));e.TransactionPromise=R.default;var T=a(t(5481));e.Session=T.default;var A=o(t(7264)),M=A;e.Driver=A.default,e.driver=M;var N=a(t(1967));e.auth=N.default;var j=t(6755);Object.defineProperty(e,"bookmarkManager",{enumerable:!0,get:function(){return j.bookmarkManager}});var B=t(2069);Object.defineProperty(e,"authTokenManagers",{enumerable:!0,get:function(){return B.authTokenManagers}}),Object.defineProperty(e,"staticAuthTokenManager",{enumerable:!0,get:function(){return B.staticAuthTokenManager}});var q=t(7264);Object.defineProperty(e,"routing",{enumerable:!0,get:function(){return q.routing}});var W=o(t(6872));e.types=W;var J=o(t(4027));e.json=J;var te=a(t(1573));e.resultTransformers=te.default;var re=t(8264);Object.defineProperty(e,"clientCertificateProviders",{enumerable:!0,get:function(){return re.clientCertificateProviders}}),Object.defineProperty(e,"resolveCertificateProvider",{enumerable:!0,get:function(){return re.resolveCertificateProvider}});var ee=o(t(6995));e.internal=ee;var fe={SERVICE_UNAVAILABLE:s.SERVICE_UNAVAILABLE,SESSION_EXPIRED:s.SESSION_EXPIRED,PROTOCOL_ERROR:s.PROTOCOL_ERROR};e.error=fe;var he={authTokenManagers:B.authTokenManagers,newError:s.newError,Neo4jError:s.Neo4jError,newGQLError:s.newGQLError,GQLError:s.GQLError,isRetriableError:s.isRetriableError,error:fe,Integer:u.default,int:u.int,isInt:u.isInt,inSafeRange:u.inSafeRange,toNumber:u.toNumber,toString:u.toString,internal:ee,isPoint:h.isPoint,Point:h.Point,Date:l.Date,DateTime:l.DateTime,Duration:l.Duration,isDate:l.isDate,isDateTime:l.isDateTime,isDuration:l.isDuration,isLocalDateTime:l.isLocalDateTime,isLocalTime:l.isLocalTime,isTime:l.isTime,LocalDateTime:l.LocalDateTime,LocalTime:l.LocalTime,Time:l.Time,Node:c.Node,isNode:c.isNode,Relationship:c.Relationship,isRelationship:c.isRelationship,UnboundRelationship:c.UnboundRelationship,isUnboundRelationship:c.isUnboundRelationship,Path:c.Path,isPath:c.isPath,PathSegment:c.PathSegment,isPathSegment:c.isPathSegment,Record:f.default,ResultSummary:d.default,queryType:d.queryType,ServerInfo:d.ServerInfo,Notification:v.default,GqlStatusObject:v.GqlStatusObject,Plan:d.Plan,ProfiledPlan:d.ProfiledPlan,QueryStatistics:d.QueryStatistics,Stats:d.Stats,Result:w.default,EagerResult:b.default,Transaction:O.default,ManagedTransaction:P.default,TransactionPromise:R.default,Session:T.default,Driver:A.default,Connection:_.default,Releasable:p.Releasable,types:W,driver:M,json:J,auth:N.default,bookmarkManager:j.bookmarkManager,routing:q.routing,resultTransformers:te.default,notificationCategory:v.notificationCategory,notificationClassification:v.notificationClassification,notificationSeverityLevel:v.notificationSeverityLevel,notificationFilterDisabledCategory:y.notificationFilterDisabledCategory,notificationFilterDisabledClassification:y.notificationFilterDisabledClassification,notificationFilterMinimumSeverityLevel:y.notificationFilterMinimumSeverityLevel,clientCertificateProviders:re.clientCertificateProviders,resolveCertificateProvider:re.resolveCertificateProvider};e.default=he},3371:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.toString=e.toNumber=e.inSafeRange=e.isInt=e.int=void 0;var n=t(9691),i=new Map,o=function(){function y(w,b){this.low=w??0,this.high=b??0}return y.prototype.inSafeRange=function(){return this.greaterThanOrEqual(y.MIN_SAFE_VALUE)&&this.lessThanOrEqual(y.MAX_SAFE_VALUE)},y.prototype.toInt=function(){return this.low},y.prototype.toNumber=function(){return this.high*s+(this.low>>>0)},y.prototype.toBigInt=function(){if(this.isZero())return BigInt(0);if(this.isPositive())return BigInt(this.high>>>0)*BigInt(s)+BigInt(this.low>>>0);var w=this.negate();return BigInt(-1)*(BigInt(w.high>>>0)*BigInt(s)+BigInt(w.low>>>0))},y.prototype.toNumberOrInfinity=function(){return this.lessThan(y.MIN_SAFE_VALUE)?Number.NEGATIVE_INFINITY:this.greaterThan(y.MAX_SAFE_VALUE)?Number.POSITIVE_INFINITY:this.toNumber()},y.prototype.toString=function(w){if((w=w??10)<2||w>36)throw RangeError("radix out of range: "+w.toString());if(this.isZero())return"0";var b;if(this.isNegative()){if(this.equals(y.MIN_VALUE)){var p=y.fromNumber(w),_=this.div(p);return b=_.multiply(p).subtract(this),_.toString(w)+b.toInt().toString(w)}return"-"+this.negate().toString(w)}var O=y.fromNumber(Math.pow(w,6));b=this;for(var P="";;){var R=b.div(O),T=(b.subtract(R.multiply(O)).toInt()>>>0).toString(w);if((b=R).isZero())return T+P;for(;T.length<6;)T="0"+T;P=""+T+P}},y.prototype.valueOf=function(){return this.toBigInt()},y.prototype.getHighBits=function(){return this.high},y.prototype.getLowBits=function(){return this.low},y.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(y.MIN_VALUE)?64:this.negate().getNumBitsAbs();var w=this.high!==0?this.high:this.low,b=0;for(b=31;b>0&&!(w&1<<b);b--);return this.high!==0?b+33:b+1},y.prototype.isZero=function(){return this.high===0&&this.low===0},y.prototype.isNegative=function(){return this.high<0},y.prototype.isPositive=function(){return this.high>=0},y.prototype.isOdd=function(){return(1&this.low)==1},y.prototype.isEven=function(){return(1&this.low)==0},y.prototype.equals=function(w){var b=y.fromValue(w);return this.high===b.high&&this.low===b.low},y.prototype.notEquals=function(w){return!this.equals(w)},y.prototype.lessThan=function(w){return this.compare(w)<0},y.prototype.lessThanOrEqual=function(w){return this.compare(w)<=0},y.prototype.greaterThan=function(w){return this.compare(w)>0},y.prototype.greaterThanOrEqual=function(w){return this.compare(w)>=0},y.prototype.compare=function(w){var b=y.fromValue(w);if(this.equals(b))return 0;var p=this.isNegative(),_=b.isNegative();return p&&!_?-1:!p&&_?1:this.subtract(b).isNegative()?-1:1},y.prototype.negate=function(){return this.equals(y.MIN_VALUE)?y.MIN_VALUE:this.not().add(y.ONE)},y.prototype.add=function(w){var b=y.fromValue(w),p=this.high>>>16,_=65535&this.high,O=this.low>>>16,P=65535&this.low,R=b.high>>>16,T=65535&b.high,A=b.low>>>16,M=0,N=0,j=0,B=0;return j+=(B+=P+(65535&b.low))>>>16,B&=65535,N+=(j+=O+A)>>>16,j&=65535,M+=(N+=_+T)>>>16,N&=65535,M+=p+R,M&=65535,y.fromBits(j<<16|B,M<<16|N)},y.prototype.subtract=function(w){var b=y.fromValue(w);return this.add(b.negate())},y.prototype.multiply=function(w){if(this.isZero())return y.ZERO;var b=y.fromValue(w);if(b.isZero())return y.ZERO;if(this.equals(y.MIN_VALUE))return b.isOdd()?y.MIN_VALUE:y.ZERO;if(b.equals(y.MIN_VALUE))return this.isOdd()?y.MIN_VALUE:y.ZERO;if(this.isNegative())return b.isNegative()?this.negate().multiply(b.negate()):this.negate().multiply(b).negate();if(b.isNegative())return this.multiply(b.negate()).negate();if(this.lessThan(l)&&b.lessThan(l))return y.fromNumber(this.toNumber()*b.toNumber());var p=this.high>>>16,_=65535&this.high,O=this.low>>>16,P=65535&this.low,R=b.high>>>16,T=65535&b.high,A=b.low>>>16,M=65535&b.low,N=0,j=0,B=0,q=0;return B+=(q+=P*M)>>>16,q&=65535,j+=(B+=O*M)>>>16,B&=65535,j+=(B+=P*A)>>>16,B&=65535,N+=(j+=_*M)>>>16,j&=65535,N+=(j+=O*A)>>>16,j&=65535,N+=(j+=P*T)>>>16,j&=65535,N+=p*M+_*A+O*T+P*R,N&=65535,y.fromBits(B<<16|q,N<<16|j)},y.prototype.div=function(w){var b,p,_,O=y.fromValue(w);if(O.isZero())throw(0,n.newError)("division by zero");if(this.isZero())return y.ZERO;if(this.equals(y.MIN_VALUE))return O.equals(y.ONE)||O.equals(y.NEG_ONE)?y.MIN_VALUE:O.equals(y.MIN_VALUE)?y.ONE:(b=this.shiftRight(1).div(O).shiftLeft(1)).equals(y.ZERO)?O.isNegative()?y.ONE:y.NEG_ONE:(p=this.subtract(O.multiply(b)),_=b.add(p.div(O)));if(O.equals(y.MIN_VALUE))return y.ZERO;if(this.isNegative())return O.isNegative()?this.negate().div(O.negate()):this.negate().div(O).negate();if(O.isNegative())return this.div(O.negate()).negate();for(_=y.ZERO,p=this;p.greaterThanOrEqual(O);){b=Math.max(1,Math.floor(p.toNumber()/O.toNumber()));for(var P=Math.ceil(Math.log(b)/Math.LN2),R=P<=48?1:Math.pow(2,P-48),T=y.fromNumber(b),A=T.multiply(O);A.isNegative()||A.greaterThan(p);)b-=R,A=(T=y.fromNumber(b)).multiply(O);T.isZero()&&(T=y.ONE),_=_.add(T),p=p.subtract(A)}return _},y.prototype.modulo=function(w){var b=y.fromValue(w);return this.subtract(this.div(b).multiply(b))},y.prototype.not=function(){return y.fromBits(~this.low,~this.high)},y.prototype.and=function(w){var b=y.fromValue(w);return y.fromBits(this.low&b.low,this.high&b.high)},y.prototype.or=function(w){var b=y.fromValue(w);return y.fromBits(this.low|b.low,this.high|b.high)},y.prototype.xor=function(w){var b=y.fromValue(w);return y.fromBits(this.low^b.low,this.high^b.high)},y.prototype.shiftLeft=function(w){var b=y.toNumber(w);return(b&=63)==0?y.ZERO:b<32?y.fromBits(this.low<<b,this.high<<b|this.low>>>32-b):y.fromBits(0,this.low<<b-32)},y.prototype.shiftRight=function(w){var b=y.toNumber(w),p=y.toNumber(w);return(b&=63)==0?y.ZERO:p<32?y.fromBits(this.low>>>b|this.high<<32-b,this.high>>b):y.fromBits(this.high>>b-32,this.high>=0?0:-1)},y.isInteger=function(w){return(w==null?void 0:w.__isInteger__)===!0},y.fromInt=function(w){var b;if((w|=0)>=-128&&w<128&&(b=i.get(w))!=null)return b;var p=new y(w,w<0?-1:0);return w>=-128&&w<128&&i.set(w,p),p},y.fromBits=function(w,b){return new y(w,b)},y.fromNumber=function(w){return isNaN(w)||!isFinite(w)?y.ZERO:w<=-u?y.MIN_VALUE:w+1>=u?y.MAX_VALUE:w<0?y.fromNumber(-w).negate():new y(w%s|0,w/s|0)},y.fromString=function(w,b,p){var _,O=(p===void 0?{}:p).strictStringValidation;if(w.length===0)throw(0,n.newError)("number format error: empty string");if(w==="NaN"||w==="Infinity"||w==="+Infinity"||w==="-Infinity")return y.ZERO;if((b=b??10)<2||b>36)throw(0,n.newError)("radix out of range: "+b.toString());if((_=w.indexOf("-"))>0)throw(0,n.newError)('number format error: interior "-" character: '+w);if(_===0)return y.fromString(w.substring(1),b).negate();for(var P=y.fromNumber(Math.pow(b,8)),R=y.ZERO,T=0;T<w.length;T+=8){var A=Math.min(8,w.length-T),M=w.substring(T,T+A),N=parseInt(M,b);if(O===!0&&!a(M,N,b))throw(0,n.newError)('number format error: "'.concat(M,'" is NaN in radix ').concat(b,": ").concat(w));if(A<8){var j=y.fromNumber(Math.pow(b,A));R=R.multiply(j).add(y.fromNumber(N))}else R=(R=R.multiply(P)).add(y.fromNumber(N))}return R},y.fromValue=function(w,b){return b===void 0&&(b={}),w instanceof y?w:typeof w=="number"?(b.ceilFloat===!0&&(w=Math.ceil(w)),y.fromNumber(w)):typeof w=="string"?y.fromString(w,void 0,b):typeof w=="bigint"?y.fromString(w.toString()):new y(w.low,w.high)},y.toNumber=function(w){switch(typeof w){case"number":return w;case"bigint":return Number(w);default:return y.fromValue(w).toNumber()}},y.toString=function(w,b){return y.fromValue(w).toString(b)},y.inSafeRange=function(w){return y.fromValue(w).inSafeRange()},y.ZERO=y.fromInt(0),y.ONE=y.fromInt(1),y.NEG_ONE=y.fromInt(-1),y.MAX_VALUE=y.fromBits(-1,2147483647),y.MIN_VALUE=y.fromBits(0,-2147483648),y.MIN_SAFE_VALUE=y.fromBits(1,-2097152),y.MAX_SAFE_VALUE=y.fromBits(-1,2097151),y.__isInteger__=!0,y}();function a(y,w,b){return!Number.isNaN(y)&&!Number.isNaN(w)&&function(p,_,O){var P=p.toString(_),R=Math.max(O-P.length,0),T="0".repeat(R);return"".concat(T).concat(P)}(w,b,y.length)===y.toLowerCase()}Object.defineProperty(o.prototype,"__isInteger__",{value:!0,enumerable:!1,configurable:!1});var s=4294967296,u=s*s/2,l=o.fromInt(1<<24),c=o.fromValue;e.int=c;var f=o.isInteger;e.isInt=f;var h=o.inSafeRange;e.inSafeRange=h;var d=o.toNumber;e.toNumber=d;var v=o.toString;e.toString=v,e.default=o},5837:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fromVersion=void 0,e.fromVersion=function(t,n){n===void 0&&(n=function(){return{get userAgent(){}}});var i=n(),o=i.userAgent!=null?i.userAgent.split("(")[1].split(")")[0]:void 0,a=i.userAgent||void 0;return{product:"neo4j-javascript/".concat(t),platform:o,languageDetails:a}}},3488:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(o,a,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(a,s);l&&!("get"in l?!a.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(o,u,l)}:function(o,a,s,u){u===void 0&&(u=s),o[u]=a[s]}),i=this&&this.__exportStar||function(o,a){for(var s in o)s==="default"||Object.prototype.hasOwnProperty.call(a,s)||n(a,o,s)};Object.defineProperty(e,"__esModule",{value:!0}),i(t(5837),e)},9730:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(h,d,v,y){y===void 0&&(y=v);var w=Object.getOwnPropertyDescriptor(d,v);w&&!("get"in w?!d.__esModule:w.writable||w.configurable)||(w={enumerable:!0,get:function(){return d[v]}}),Object.defineProperty(h,y,w)}:function(h,d,v,y){y===void 0&&(y=v),h[y]=d[v]}),i=this&&this.__setModuleDefault||(Object.create?function(h,d){Object.defineProperty(h,"default",{enumerable:!0,value:d})}:function(h,d){h.default=d}),o=this&&this.__importStar||function(h){if(h&&h.__esModule)return h;var d={};if(h!=null)for(var v in h)v!=="default"&&Object.prototype.hasOwnProperty.call(h,v)&&n(d,h,v);return i(d,h),d},a=this&&this.__read||function(h,d){var v=typeof Symbol=="function"&&h[Symbol.iterator];if(!v)return h;var y,w,b=v.call(h),p=[];try{for(;(d===void 0||d-- >0)&&!(y=b.next()).done;)p.push(y.value)}catch(_){w={error:_}}finally{try{y&&!y.done&&(v=b.return)&&v.call(b)}finally{if(w)throw w.error}}return p},s=this&&this.__spreadArray||function(h,d,v){if(v||arguments.length===2)for(var y,w=0,b=d.length;w<b;w++)!y&&w in d||(y||(y=Array.prototype.slice.call(d,0,w)),y[w]=d[w]);return h.concat(y||Array.prototype.slice.call(d))};Object.defineProperty(e,"__esModule",{value:!0}),e.Bookmarks=void 0;var u=o(t(6587)),l=function(){function h(d){this._values=function(v){if(v==null||v==="")return[];if(u.isString(v))return[v];if(Array.isArray(v)){for(var y=new Set,w=f(v),b=0;b<w.length;b++){var p=w[b];if(p!=null){if(!u.isString(p))throw new TypeError("Bookmark value should be a string, given: '".concat(p,"'"));y.add(p)}}return s([],a(y),!1)}throw new TypeError("Bookmarks should either be a string or a string array, given: '".concat(v,"'"))}(d)}return h.empty=function(){return c},h.prototype.isEmpty=function(){return this._values.length===0},h.prototype.values=function(){return this._values},h.prototype[Symbol.iterator]=function(){return this._values[Symbol.iterator]()},h.prototype.asBeginTransactionParameters=function(){var d;return this.isEmpty()?{}:((d={}).bookmarks=this._values,d)},h}();e.Bookmarks=l;var c=new l(null);function f(h){return h.reduce(function(d,v){return Array.isArray(v)?d.concat(f(v)):d.concat(v)},[])}},3618:function(r,e,t){var n,i=this&&this.__extends||(n=function(w,b){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,_){p.__proto__=_}||function(p,_){for(var O in _)Object.prototype.hasOwnProperty.call(_,O)&&(p[O]=_[O])},n(w,b)},function(w,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function p(){this.constructor=w}n(w,b),w.prototype=b===null?Object.create(b):(p.prototype=b.prototype,new p)}),o=this&&this.__awaiter||function(w,b,p,_){return new(p||(p=Promise))(function(O,P){function R(M){try{A(_.next(M))}catch(N){P(N)}}function T(M){try{A(_.throw(M))}catch(N){P(N)}}function A(M){var N;M.done?O(M.value):(N=M.value,N instanceof p?N:new p(function(j){j(N)})).then(R,T)}A((_=_.apply(w,b||[])).next())})},a=this&&this.__generator||function(w,b){var p,_,O,P,R={label:0,sent:function(){if(1&O[0])throw O[1];return O[1]},trys:[],ops:[]};return P={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(P[Symbol.iterator]=function(){return this}),P;function T(A){return function(M){return function(N){if(p)throw new TypeError("Generator is already executing.");for(;P&&(P=0,N[0]&&(R=0)),R;)try{if(p=1,_&&(O=2&N[0]?_.return:N[0]?_.throw||((O=_.return)&&O.call(_),0):_.next)&&!(O=O.call(_,N[1])).done)return O;switch(_=0,O&&(N=[2&N[0],O.value]),N[0]){case 0:case 1:O=N;break;case 4:return R.label++,{value:N[1],done:!1};case 5:R.label++,_=N[1],N=[0];continue;case 7:N=R.ops.pop(),R.trys.pop();continue;default:if(!((O=(O=R.trys).length>0&&O[O.length-1])||N[0]!==6&&N[0]!==2)){R=0;continue}if(N[0]===3&&(!O||N[1]>O[0]&&N[1]<O[3])){R.label=N[1];break}if(N[0]===6&&R.label<O[1]){R.label=O[1],O=N;break}if(O&&R.label<O[2]){R.label=O[2],R.ops.push(N);break}O[2]&&R.ops.pop(),R.trys.pop();continue}N=b.call(w,R)}catch(j){N=[6,j],_=0}finally{p=O=0}if(5&N[0])throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}([A,M])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.EMPTY_CONNECTION_HOLDER=e.ReadOnlyConnectionHolder=e.ConnectionHolder=void 0;var s=t(9691),u=t(6587),l=t(326),c=t(9730),f=t(4883),h=function(){function w(b){var p=b.mode,_=b.database,O=_===void 0?"":_,P=b.bookmarks,R=b.connectionProvider,T=b.impersonatedUser,A=b.onDatabaseNameResolved,M=b.getConnectionAcquistionBookmarks,N=b.auth,j=b.log;this._mode=p??l.ACCESS_MODE_WRITE,this._closed=!1,this._database=O!=null?(0,u.assertString)(O,"database"):"",this._bookmarks=P??c.Bookmarks.empty(),this._connectionProvider=R,this._impersonatedUser=T,this._referenceCount=0,this._connectionPromise=Promise.resolve(null),this._onDatabaseNameResolved=A,this._auth=N,this._log=j,this._logError=this._logError.bind(this),this._getConnectionAcquistionBookmarks=M??function(){return Promise.resolve(c.Bookmarks.empty())}}return w.prototype.mode=function(){return this._mode},w.prototype.database=function(){return this._database},w.prototype.setDatabase=function(b){this._database=b},w.prototype.bookmarks=function(){return this._bookmarks},w.prototype.connectionProvider=function(){return this._connectionProvider},w.prototype.referenceCount=function(){return this._referenceCount},w.prototype.initializeConnection=function(){return this._referenceCount!==0||this._connectionProvider==null?(this._referenceCount++,!1):(this._connectionPromise=this._createConnectionPromise(this._connectionProvider),this._referenceCount++,!0)},w.prototype._createConnectionPromise=function(b){return o(this,void 0,void 0,function(){var p,_,O;return a(this,function(P){switch(P.label){case 0:return _=(p=b).acquireConnection,O={accessMode:this._mode,database:this._database},[4,this._getBookmarks()];case 1:return[4,_.apply(p,[(O.bookmarks=P.sent(),O.impersonatedUser=this._impersonatedUser,O.onDatabaseNameResolved=this._onDatabaseNameResolved,O.auth=this._auth,O)])];case 2:return[2,P.sent()]}})})},w.prototype._getBookmarks=function(){return o(this,void 0,void 0,function(){return a(this,function(b){switch(b.label){case 0:return[4,this._getConnectionAcquistionBookmarks()];case 1:return[2,b.sent()]}})})},w.prototype.getConnection=function(){return this._connectionPromise},w.prototype.releaseConnection=function(){return this._referenceCount===0?this._connectionPromise:(this._referenceCount--,this._referenceCount===0?this._releaseConnection():this._connectionPromise)},w.prototype.close=function(b){return this._closed=!0,this._referenceCount===0?this._connectionPromise:(this._referenceCount=0,this._releaseConnection(b))},w.prototype.log=function(){return this._log},w.prototype._releaseConnection=function(b){return this._connectionPromise=this._connectionPromise.then(function(p){return p!=null?p.isOpen()&&(p.hasOngoingObservableRequests()||b===!0)?p.resetAndFlush().catch(y).then(function(){return p.release().then(function(){return null})}):p.release().then(function(){return null}):Promise.resolve(null)}).catch(this._logError),this._connectionPromise},w.prototype._logError=function(b){return this._log.isWarnEnabled()&&this._log.warn("ConnectionHolder got an error while releasing the connection. Error ".concat(b,". Stacktrace: ").concat(b.stack)),null},w}();e.ConnectionHolder=h;var d=function(w){function b(p){var _=w.call(this,{mode:p.mode(),database:p.database(),bookmarks:p.bookmarks(),getConnectionAcquistionBookmarks:p._getConnectionAcquistionBookmarks,connectionProvider:p.connectionProvider(),log:p.log()})||this;return _._connectionHolder=p,_}return i(b,w),b.prototype.initializeConnection=function(){return this._connectionHolder.referenceCount()!==0},b.prototype.getConnection=function(){return this._connectionHolder.getConnection()},b.prototype.releaseConnection=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve(null)})},b.prototype.close=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve(null)})},b}(h);e.ReadOnlyConnectionHolder=d,e.default=d;var v=new(function(w){function b(){return w.call(this,{log:f.Logger.create({})})||this}return i(b,w),b.prototype.mode=function(){},b.prototype.database=function(){},b.prototype.initializeConnection=function(){return!0},b.prototype.getConnection=function(){return o(this,void 0,void 0,function(){return a(this,function(p){switch(p.label){case 0:return[4,Promise.reject((0,s.newError)("This connection holder does not serve connections"))];case 1:return[2,p.sent()]}})})},b.prototype.releaseConnection=function(){return o(this,void 0,void 0,function(){return a(this,function(p){switch(p.label){case 0:return[4,Promise.resolve(null)];case 1:return[2,p.sent()]}})})},b.prototype.close=function(){return o(this,void 0,void 0,function(){return a(this,function(p){switch(p.label){case 0:return[4,Promise.resolve(null)];case 1:return[2,p.sent()]}})})},b}(h));function y(w){return null}e.EMPTY_CONNECTION_HOLDER=v},326:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TELEMETRY_APIS=e.BOLT_PROTOCOL_V5_7=e.BOLT_PROTOCOL_V5_6=e.BOLT_PROTOCOL_V5_5=e.BOLT_PROTOCOL_V5_4=e.BOLT_PROTOCOL_V5_3=e.BOLT_PROTOCOL_V5_2=e.BOLT_PROTOCOL_V5_1=e.BOLT_PROTOCOL_V5_0=e.BOLT_PROTOCOL_V4_4=e.BOLT_PROTOCOL_V4_3=e.BOLT_PROTOCOL_V4_2=e.BOLT_PROTOCOL_V4_1=e.BOLT_PROTOCOL_V4_0=e.BOLT_PROTOCOL_V3=e.BOLT_PROTOCOL_V2=e.BOLT_PROTOCOL_V1=e.DEFAULT_POOL_MAX_SIZE=e.DEFAULT_POOL_ACQUISITION_TIMEOUT=e.DEFAULT_CONNECTION_TIMEOUT_MILLIS=e.ACCESS_MODE_WRITE=e.ACCESS_MODE_READ=e.FETCH_ALL=void 0,e.FETCH_ALL=-1,e.DEFAULT_POOL_ACQUISITION_TIMEOUT=6e4,e.DEFAULT_POOL_MAX_SIZE=100,e.DEFAULT_CONNECTION_TIMEOUT_MILLIS=3e4,e.ACCESS_MODE_READ="READ",e.ACCESS_MODE_WRITE="WRITE",e.BOLT_PROTOCOL_V1=1,e.BOLT_PROTOCOL_V2=2,e.BOLT_PROTOCOL_V3=3,e.BOLT_PROTOCOL_V4_0=4,e.BOLT_PROTOCOL_V4_1=4.1,e.BOLT_PROTOCOL_V4_2=4.2,e.BOLT_PROTOCOL_V4_3=4.3,e.BOLT_PROTOCOL_V4_4=4.4,e.BOLT_PROTOCOL_V5_0=5,e.BOLT_PROTOCOL_V5_1=5.1,e.BOLT_PROTOCOL_V5_2=5.2,e.BOLT_PROTOCOL_V5_3=5.3,e.BOLT_PROTOCOL_V5_4=5.4,e.BOLT_PROTOCOL_V5_5=5.5,e.BOLT_PROTOCOL_V5_6=5.6,e.BOLT_PROTOCOL_V5_7=5.7,e.TELEMETRY_APIS={MANAGED_TRANSACTION:0,UNMANAGED_TRANSACTION:1,AUTO_COMMIT_TRANSACTION:2,EXECUTE_QUERY:3}},6995:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(P,R,T,A){A===void 0&&(A=T);var M=Object.getOwnPropertyDescriptor(R,T);M&&!("get"in M?!R.__esModule:M.writable||M.configurable)||(M={enumerable:!0,get:function(){return R[T]}}),Object.defineProperty(P,A,M)}:function(P,R,T,A){A===void 0&&(A=T),P[A]=R[T]}),i=this&&this.__setModuleDefault||(Object.create?function(P,R){Object.defineProperty(P,"default",{enumerable:!0,value:R})}:function(P,R){P.default=R}),o=this&&this.__importStar||function(P){if(P&&P.__esModule)return P;var R={};if(P!=null)for(var T in P)T!=="default"&&Object.prototype.hasOwnProperty.call(P,T)&&n(R,P,T);return i(R,P),R};Object.defineProperty(e,"__esModule",{value:!0}),e.pool=e.boltAgent=e.objectUtil=e.resolver=e.serverAddress=e.urlUtil=e.logger=e.transactionExecutor=e.txConfig=e.connectionHolder=e.constants=e.bookmarks=e.observer=e.temporalUtil=e.util=void 0;var a=o(t(6587));e.util=a;var s=o(t(5022));e.temporalUtil=s;var u=o(t(2696));e.observer=u;var l=o(t(9730));e.bookmarks=l;var c=o(t(326));e.constants=c;var f=o(t(3618));e.connectionHolder=f;var h=o(t(754));e.txConfig=h;var d=o(t(6189));e.transactionExecutor=d;var v=o(t(4883));e.logger=v;var y=o(t(407));e.urlUtil=y;var w=o(t(7509));e.serverAddress=w;var b=o(t(9470));e.resolver=b;var p=o(t(93));e.objectUtil=p;var _=o(t(3488));e.boltAgent=_;var O=o(t(2906));e.pool=O},4883:function(r,e,t){var n,i,o=this&&this.__extends||(n=function(w,b){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,_){p.__proto__=_}||function(p,_){for(var O in _)Object.prototype.hasOwnProperty.call(_,O)&&(p[O]=_[O])},n(w,b)},function(w,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function p(){this.constructor=w}n(w,b),w.prototype=b===null?Object.create(b):(p.prototype=b.prototype,new p)});Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=void 0;var a=t(9691),s="error",u="warn",l="info",c="debug",f=l,h=((i={})[s]=0,i[u]=1,i[l]=2,i[c]=3,i),d=function(){function w(b,p){this._level=b,this._loggerFunction=p}return w.create=function(b){if((b==null?void 0:b.logging)!=null){var p=b.logging,_=function(P){if((P==null?void 0:P.level)!=null){var R=P.level,T=h[R];if(T==null&&T!==0)throw(0,a.newError)("Illegal logging level: ".concat(R,". Supported levels are: ").concat(Object.keys(h).toString()));return R}return f}(p),O=function(P){var R,T;if((P==null?void 0:P.logger)!=null){var A=P.logger;if(A!=null&&typeof A=="function")return A}throw(0,a.newError)("Illegal logger function: ".concat((T=(R=P==null?void 0:P.logger)===null||R===void 0?void 0:R.toString())!==null&&T!==void 0?T:"undefined"))}(p);return new w(_,O)}return this.noOp()},w.noOp=function(){return v},w.prototype.isErrorEnabled=function(){return y(this._level,s)},w.prototype.error=function(b){this.isErrorEnabled()&&this._loggerFunction(s,b)},w.prototype.isWarnEnabled=function(){return y(this._level,u)},w.prototype.warn=function(b){this.isWarnEnabled()&&this._loggerFunction(u,b)},w.prototype.isInfoEnabled=function(){return y(this._level,l)},w.prototype.info=function(b){this.isInfoEnabled()&&this._loggerFunction(l,b)},w.prototype.isDebugEnabled=function(){return y(this._level,c)},w.prototype.debug=function(b){this.isDebugEnabled()&&this._loggerFunction(c,b)},w}();e.Logger=d;var v=new(function(w){function b(){return w.call(this,l,function(p,_){})||this}return o(b,w),b.prototype.isErrorEnabled=function(){return!1},b.prototype.error=function(p){},b.prototype.isWarnEnabled=function(){return!1},b.prototype.warn=function(p){},b.prototype.isInfoEnabled=function(){return!1},b.prototype.info=function(p){},b.prototype.isDebugEnabled=function(){return!1},b.prototype.debug=function(p){},b}(d));function y(w,b){return h[w]>=h[b]}},93:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getBrokenObjectReason=e.isBrokenObject=e.createBrokenObject=void 0;var t="__isBrokenObject__",n="__reason__";e.createBrokenObject=function(i,o){o===void 0&&(o={});var a=function(){throw i};return new Proxy(o,{get:function(s,u){return u===t||(u===n?i:void(u!=="toJSON"&&a()))},set:a,apply:a,construct:a,defineProperty:a,deleteProperty:a,getOwnPropertyDescriptor:a,getPrototypeOf:a,has:a,isExtensible:a,ownKeys:a,preventExtensions:a,setPrototypeOf:a})},e.isBrokenObject=function(i){return i!==null&&typeof i=="object"&&i[t]===!0},e.getBrokenObjectReason=function(i){return i[n]}},2696:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FailedObserver=e.CompletedObserver=void 0;var t=function(){function o(){}return o.prototype.subscribe=function(a){i(a,a.onKeys,[]),i(a,a.onCompleted,{})},o.prototype.cancel=function(){},o.prototype.pause=function(){},o.prototype.resume=function(){},o.prototype.prepareToHandleSingleResponse=function(){},o.prototype.markCompleted=function(){},o.prototype.onError=function(a){throw new Error("CompletedObserver not supposed to call onError",{cause:a})},o}();e.CompletedObserver=t;var n=function(){function o(a){var s=a.error,u=a.onError;this._error=s,this._beforeError=u,this._observers=[],this.onError(s)}return o.prototype.subscribe=function(a){i(a,a.onError,this._error),this._observers.push(a)},o.prototype.onError=function(a){i(this,this._beforeError,a),this._observers.forEach(function(s){return i(s,s.onError,a)})},o.prototype.cancel=function(){},o.prototype.pause=function(){},o.prototype.resume=function(){},o.prototype.markCompleted=function(){},o.prototype.prepareToHandleSingleResponse=function(){},o}();function i(o,a,s){a!=null&&a.bind(o)(s)}e.FailedObserver=n},2906:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(l,c,f,h){h===void 0&&(h=f);var d=Object.getOwnPropertyDescriptor(c,f);d&&!("get"in d?!c.__esModule:d.writable||d.configurable)||(d={enumerable:!0,get:function(){return c[f]}}),Object.defineProperty(l,h,d)}:function(l,c,f,h){h===void 0&&(h=f),l[h]=c[f]}),i=this&&this.__setModuleDefault||(Object.create?function(l,c){Object.defineProperty(l,"default",{enumerable:!0,value:c})}:function(l,c){l.default=c}),o=this&&this.__importStar||function(l){if(l&&l.__esModule)return l;var c={};if(l!=null)for(var f in l)f!=="default"&&Object.prototype.hasOwnProperty.call(l,f)&&n(c,l,f);return i(c,l),c},a=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_MAX_SIZE=e.DEFAULT_ACQUISITION_TIMEOUT=e.PoolConfig=e.Pool=void 0;var s=o(t(7589));e.PoolConfig=s.default,Object.defineProperty(e,"DEFAULT_ACQUISITION_TIMEOUT",{enumerable:!0,get:function(){return s.DEFAULT_ACQUISITION_TIMEOUT}}),Object.defineProperty(e,"DEFAULT_MAX_SIZE",{enumerable:!0,get:function(){return s.DEFAULT_MAX_SIZE}});var u=a(t(6842));e.Pool=u.default,e.default=u.default},7589:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_ACQUISITION_TIMEOUT=e.DEFAULT_MAX_SIZE=void 0;var t=100;e.DEFAULT_MAX_SIZE=t;var n=6e4;e.DEFAULT_ACQUISITION_TIMEOUT=n;var i=function(){function s(u,l){this.maxSize=o(u,t),this.acquisitionTimeout=o(l,n)}return s.defaultConfig=function(){return new s(t,n)},s.fromDriverConfig=function(u){return new s(a(u.maxConnectionPoolSize)?u.maxConnectionPoolSize:t,a(u.connectionAcquisitionTimeout)?u.connectionAcquisitionTimeout:n)},s}();function o(s,u){return a(s)?s:u}function a(s){return s===0||s!=null}e.default=i},6842:function(r,e,t){var n=this&&this.__awaiter||function(v,y,w,b){return new(w||(w=Promise))(function(p,_){function O(T){try{R(b.next(T))}catch(A){_(A)}}function P(T){try{R(b.throw(T))}catch(A){_(A)}}function R(T){var A;T.done?p(T.value):(A=T.value,A instanceof w?A:new w(function(M){M(A)})).then(O,P)}R((b=b.apply(v,y||[])).next())})},i=this&&this.__generator||function(v,y){var w,b,p,_,O={label:0,sent:function(){if(1&p[0])throw p[1];return p[1]},trys:[],ops:[]};return _={next:P(0),throw:P(1),return:P(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function P(R){return function(T){return function(A){if(w)throw new TypeError("Generator is already executing.");for(;_&&(_=0,A[0]&&(O=0)),O;)try{if(w=1,b&&(p=2&A[0]?b.return:A[0]?b.throw||((p=b.return)&&p.call(b),0):b.next)&&!(p=p.call(b,A[1])).done)return p;switch(b=0,p&&(A=[2&A[0],p.value]),A[0]){case 0:case 1:p=A;break;case 4:return O.label++,{value:A[1],done:!1};case 5:O.label++,b=A[1],A=[0];continue;case 7:A=O.ops.pop(),O.trys.pop();continue;default:if(!((p=(p=O.trys).length>0&&p[p.length-1])||A[0]!==6&&A[0]!==2)){O=0;continue}if(A[0]===3&&(!p||A[1]>p[0]&&A[1]<p[3])){O.label=A[1];break}if(A[0]===6&&O.label<p[1]){O.label=p[1],p=A;break}if(p&&O.label<p[2]){O.label=p[2],O.ops.push(A);break}p[2]&&O.ops.pop(),O.trys.pop();continue}A=y.call(v,O)}catch(M){A=[6,M],b=0}finally{w=p=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([R,T])}}},o=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(t(7589)),s=t(9691),u=t(4883),l=function(){function v(y){var w=y.create,b=w===void 0?function(re,ee,fe){return n(te,void 0,void 0,function(){return i(this,function(he){switch(he.label){case 0:return[4,Promise.reject(new Error("Not implemented"))];case 1:return[2,he.sent()]}})})}:w,p=y.destroy,_=p===void 0?function(re){return n(te,void 0,void 0,function(){return i(this,function(ee){switch(ee.label){case 0:return[4,Promise.resolve()];case 1:return[2,ee.sent()]}})})}:p,O=y.validateOnAcquire,P=O===void 0?function(re,ee){return!0}:O,R=y.validateOnRelease,T=R===void 0?function(re){return!0}:R,A=y.installIdleObserver,M=A===void 0?function(re,ee){}:A,N=y.removeIdleObserver,j=N===void 0?function(re){}:N,B=y.config,q=B===void 0?a.default.defaultConfig():B,W=y.log,J=W===void 0?u.Logger.noOp():W,te=this;this._create=b,this._destroy=_,this._validateOnAcquire=P,this._validateOnRelease=T,this._installIdleObserver=M,this._removeIdleObserver=j,this._maxSize=q.maxSize,this._acquisitionTimeout=q.acquisitionTimeout,this._pools={},this._pendingCreates={},this._acquireRequests={},this._activeResourceCounts={},this._release=this._release.bind(this),this._log=J,this._closed=!1}return v.prototype.acquire=function(y,w,b){return n(this,void 0,void 0,function(){var p,_,O=this;return i(this,function(P){switch(P.label){case 0:return p=w.asKey(),(_=this._acquireRequests)[p]==null&&(_[p]=[]),[4,new Promise(function(R,T){var A=setTimeout(function(){var N=_[p];if(N!=null&&(_[p]=N.filter(function(q){return q!==M})),!M.isCompleted()){var j=O.activeResourceCount(w),B=O.has(w)?O._pools[p].length:0;M.reject((0,s.newError)("Connection acquisition timed out in ".concat(O._acquisitionTimeout," ms. Pool status: Active conn count = ").concat(j,", Idle conn count = ").concat(B,".")))}},O._acquisitionTimeout);typeof A=="object"&&A.unref();var M=new h(p,y,b,R,T,A,O._log);_[p].push(M),O._processPendingAcquireRequests(w)})];case 1:return[2,P.sent()]}})})},v.prototype.purge=function(y){return n(this,void 0,void 0,function(){return i(this,function(w){switch(w.label){case 0:return[4,this._purgeKey(y.asKey())];case 1:return[2,w.sent()]}})})},v.prototype.apply=function(y,w){var b=y.asKey();b in this._pools&&this._pools[b].apply(w)},v.prototype.close=function(){return n(this,void 0,void 0,function(){var y=this;return i(this,function(w){switch(w.label){case 0:return this._closed=!0,[4,Promise.all(Object.keys(this._pools).map(function(b){return n(y,void 0,void 0,function(){return i(this,function(p){switch(p.label){case 0:return[4,this._purgeKey(b)];case 1:return[2,p.sent()]}})})})).then()];case 1:return[2,w.sent()]}})})},v.prototype.keepAll=function(y){return n(this,void 0,void 0,function(){var w,b,p,_=this;return i(this,function(O){switch(O.label){case 0:return w=y.map(function(P){return P.asKey()}),b=Object.keys(this._pools),p=b.filter(function(P){return!w.includes(P)}),[4,Promise.all(p.map(function(P){return n(_,void 0,void 0,function(){return i(this,function(R){switch(R.label){case 0:return[4,this._purgeKey(P)];case 1:return[2,R.sent()]}})})})).then()];case 1:return[2,O.sent()]}})})},v.prototype.has=function(y){return y.asKey()in this._pools},v.prototype.activeResourceCount=function(y){var w;return(w=this._activeResourceCounts[y.asKey()])!==null&&w!==void 0?w:0},v.prototype._getOrInitializePoolFor=function(y){var w=this._pools[y];return w==null&&(w=new d,this._pools[y]=w,this._pendingCreates[y]=0),w},v.prototype._acquire=function(y,w,b){return n(this,void 0,void 0,function(){var p,_,O,P,R,T,A,M=this;return i(this,function(N){switch(N.label){case 0:if(this._closed)throw(0,s.newError)("Pool is closed, it is no more able to serve requests.");if(p=w.asKey(),_=this._getOrInitializePoolFor(p),b)return[3,10];N.label=1;case 1:if(!(_.length>0))return[3,10];if((O=_.pop())==null)return[3,1];c(p,this._activeResourceCounts),this._removeIdleObserver!=null&&this._removeIdleObserver(O),P=!1,N.label=2;case 2:return N.trys.push([2,4,,6]),[4,this._validateOnAcquire(y,O)];case 3:return P=N.sent(),[3,6];case 4:return R=N.sent(),f(p,this._activeResourceCounts),_.removeInUse(O),[4,this._destroy(O)];case 5:throw N.sent(),R;case 6:return P?(this._log.isDebugEnabled()&&this._log.debug("".concat(O," acquired from the pool ").concat(p)),[2,{resource:O,pool:_}]):[3,7];case 7:return f(p,this._activeResourceCounts),_.removeInUse(O),[4,this._destroy(O)];case 8:N.sent(),N.label=9;case 9:return[3,1];case 10:if(this._maxSize>0&&this.activeResourceCount(w)+this._pendingCreates[p]>=this._maxSize)return[2,{resource:null,pool:_}];this._pendingCreates[p]=this._pendingCreates[p]+1,N.label=11;case 11:return N.trys.push([11,,15,16]),this.activeResourceCount(w)+_.length>=this._maxSize&&b?(A=_.pop())==null?[3,13]:(this._removeIdleObserver!=null&&this._removeIdleObserver(A),_.removeInUse(A),[4,this._destroy(A)]):[3,13];case 12:N.sent(),N.label=13;case 13:return[4,this._create(y,w,function(j,B){return n(M,void 0,void 0,function(){return i(this,function(q){switch(q.label){case 0:return[4,this._release(j,B,_)];case 1:return[2,q.sent()]}})})})];case 14:return T=N.sent(),_.pushInUse(T),c(p,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug("".concat(T," created for the pool ").concat(p)),[3,16];case 15:return this._pendingCreates[p]=this._pendingCreates[p]-1,[7];case 16:return[2,{resource:T,pool:_}]}})})},v.prototype._release=function(y,w,b){return n(this,void 0,void 0,function(){var p,_=this;return i(this,function(O){switch(O.label){case 0:p=y.asKey(),O.label=1;case 1:return O.trys.push([1,,9,10]),b.isActive()?[4,this._validateOnRelease(w)]:[3,6];case 2:return O.sent()?[3,4]:(this._log.isDebugEnabled()&&this._log.debug("".concat(w," destroyed and can't be released to the pool ").concat(p," because it is not functional")),b.removeInUse(w),[4,this._destroy(w)]);case 3:return O.sent(),[3,5];case 4:this._installIdleObserver!=null&&this._installIdleObserver(w,{onError:function(P){_._log.debug("Idle connection ".concat(w," destroyed because of error: ").concat(P));var R=_._pools[p];R!=null&&(_._pools[p]=R.filter(function(T){return T!==w}),R.removeInUse(w)),_._destroy(w).catch(function(){})}}),b.push(w),this._log.isDebugEnabled()&&this._log.debug("".concat(w," released to the pool ").concat(p)),O.label=5;case 5:return[3,8];case 6:return this._log.isDebugEnabled()&&this._log.debug("".concat(w," destroyed and can't be released to the pool ").concat(p," because pool has been purged")),b.removeInUse(w),[4,this._destroy(w)];case 7:O.sent(),O.label=8;case 8:return[3,10];case 9:return f(p,this._activeResourceCounts),this._processPendingAcquireRequests(y),[7];case 10:return[2]}})})},v.prototype._purgeKey=function(y){return n(this,void 0,void 0,function(){var w,b,p;return i(this,function(_){switch(_.label){case 0:if(w=this._pools[y],b=[],w==null)return[3,2];for(;w.length>0;)(p=w.pop())!=null&&(this._removeIdleObserver!=null&&this._removeIdleObserver(p),b.push(this._destroy(p)));return w.close(),delete this._pools[y],[4,Promise.all(b)];case 1:_.sent(),_.label=2;case 2:return[2]}})})},v.prototype._processPendingAcquireRequests=function(y){var w=this,b=y.asKey(),p=this._acquireRequests[b];if(p!=null){var _=p.shift();_!=null?this._acquire(_.context,y,_.requireNew).catch(function(O){return _.reject(O),{resource:null,pool:null}}).then(function(O){var P=O.resource,R=O.pool;P!=null&&R!=null?_.isCompleted()?w._release(y,P,R).catch(function(T){w._log.isDebugEnabled()&&w._log.debug("".concat(P," could not be release back to the pool. Cause: ").concat(T))}):_.resolve(P):_.isCompleted()||(w._acquireRequests[b]==null&&(w._acquireRequests[b]=[]),w._acquireRequests[b].unshift(_))}).catch(function(O){return _.reject(O)}):delete this._acquireRequests[b]}},v}();function c(v,y){var w,b=(w=y[v])!==null&&w!==void 0?w:0;y[v]=b+1}function f(v,y){var w,b=((w=y[v])!==null&&w!==void 0?w:0)-1;b>0?y[v]=b:delete y[v]}var h=function(){function v(y,w,b,p,_,O,P){this._key=y,this._context=w,this._resolve=p,this._reject=_,this._timeoutId=O,this._log=P,this._completed=!1,this._config=b??{}}return Object.defineProperty(v.prototype,"context",{get:function(){return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"requireNew",{get:function(){var y;return(y=this._config.requireNew)!==null&&y!==void 0&&y},enumerable:!1,configurable:!0}),v.prototype.isCompleted=function(){return this._completed},v.prototype.resolve=function(y){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._log.isDebugEnabled()&&this._log.debug("".concat(y," acquired from the pool ").concat(this._key)),this._resolve(y))},v.prototype.reject=function(y){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._reject(y))},v}(),d=function(){function v(){this._active=!0,this._elements=[],this._elementsInUse=new Set}return v.prototype.isActive=function(){return this._active},v.prototype.close=function(){this._active=!1,this._elements=[],this._elementsInUse=new Set},v.prototype.filter=function(y){return this._elements=this._elements.filter(y),this},v.prototype.apply=function(y){this._elements.forEach(y),this._elementsInUse.forEach(y)},Object.defineProperty(v.prototype,"length",{get:function(){return this._elements.length},enumerable:!1,configurable:!0}),v.prototype.pop=function(){var y=this._elements.pop();return y!=null&&this._elementsInUse.add(y),y},v.prototype.push=function(y){return this._elementsInUse.delete(y),this._elements.push(y)},v.prototype.pushInUse=function(y){this._elementsInUse.add(y)},v.prototype.removeInUse=function(y){this._elementsInUse.delete(y)},v}();e.default=l},7041:function(r,e,t){var n=this&&this.__awaiter||function(s,u,l,c){return new(l||(l=Promise))(function(f,h){function d(w){try{y(c.next(w))}catch(b){h(b)}}function v(w){try{y(c.throw(w))}catch(b){h(b)}}function y(w){var b;w.done?f(w.value):(b=w.value,b instanceof l?b:new l(function(p){p(b)})).then(d,v)}y((c=c.apply(s,u||[])).next())})},i=this&&this.__generator||function(s,u){var l,c,f,h,d={label:0,sent:function(){if(1&f[0])throw f[1];return f[1]},trys:[],ops:[]};return h={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function v(y){return function(w){return function(b){if(l)throw new TypeError("Generator is already executing.");for(;h&&(h=0,b[0]&&(d=0)),d;)try{if(l=1,c&&(f=2&b[0]?c.return:b[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,b[1])).done)return f;switch(c=0,f&&(b=[2&b[0],f.value]),b[0]){case 0:case 1:f=b;break;case 4:return d.label++,{value:b[1],done:!1};case 5:d.label++,c=b[1],b=[0];continue;case 7:b=d.ops.pop(),d.trys.pop();continue;default:if(!((f=(f=d.trys).length>0&&f[f.length-1])||b[0]!==6&&b[0]!==2)){d=0;continue}if(b[0]===3&&(!f||b[1]>f[0]&&b[1]<f[3])){d.label=b[1];break}if(b[0]===6&&d.label<f[1]){d.label=f[1],f=b;break}if(f&&d.label<f[2]){d.label=f[2],d.ops.push(b);break}f[2]&&d.ops.pop(),d.trys.pop();continue}b=u.call(s,d)}catch(p){b=[6,p],c=0}finally{l=f=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}([y,w])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=t(326),a=function(){function s(u){this._createSession=u}return s.prototype.execute=function(u,l,c){return n(this,void 0,void 0,function(){var f,h,d=this;return i(this,function(v){switch(v.label){case 0:f=this._createSession({database:u.database,bookmarkManager:u.bookmarkManager,impersonatedUser:u.impersonatedUser,auth:u.auth}),y=u.signal,w="abort",b=function(){return n(d,void 0,void 0,function(){return i(this,function(p){switch(p.label){case 0:return[4,f.close()];case 1:return[2,p.sent()]}})})},typeof(y==null?void 0:y.addEventListener)=="function"&&y.addEventListener(w,b),h={uninstall:function(){typeof(y==null?void 0:y.removeEventListener)=="function"&&y.removeEventListener(w,b)}},f._configureTransactionExecutor(!0,o.TELEMETRY_APIS.EXECUTE_QUERY),v.label=1;case 1:return v.trys.push([1,,3,5]),[4,(u.routing==="READ"?f.executeRead.bind(f):f.executeWrite.bind(f))(function(p){return n(d,void 0,void 0,function(){var _;return i(this,function(O){switch(O.label){case 0:return _=p.run(l,c),[4,u.resultTransformer(_)];case 1:return[2,O.sent()]}})})},u.transactionConfig)];case 2:return[2,v.sent()];case 3:return h.uninstall(),[4,f.close()];case 4:return v.sent(),[7];case 5:return[2]}var y,w,b})})},s}();e.default=a},3389:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function n(){}return n.prototype.resolve=function(){throw new Error("Abstract function")},n.prototype._resolveToItself=function(i){return Promise.resolve([i])},n}();e.default=t},8341:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=t(7509);function i(a){return Promise.resolve([a])}var o=function(){function a(s){this._resolverFunction=s??i}return a.prototype.resolve=function(s){var u=this;return new Promise(function(l){return l(u._resolverFunction(s.asHostPort()))}).then(function(l){if(!Array.isArray(l))throw new TypeError("Configured resolver function should either return an array of addresses or a Promise resolved with an array of addresses."+"Each address is '<host>:<port>'. Got: ".concat(l));return l.map(function(c){return n.ServerAddress.fromUrl(c)})})},a}();e.default=o},9470:function(r,e,t){var n=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.ConfiguredCustomResolver=e.BaseHostNameResolver=void 0;var i=n(t(3389));e.BaseHostNameResolver=i.default;var o=n(t(8341));e.ConfiguredCustomResolver=o.default},7509:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(l,c,f,h){h===void 0&&(h=f);var d=Object.getOwnPropertyDescriptor(c,f);d&&!("get"in d?!c.__esModule:d.writable||d.configurable)||(d={enumerable:!0,get:function(){return c[f]}}),Object.defineProperty(l,h,d)}:function(l,c,f,h){h===void 0&&(h=f),l[h]=c[f]}),i=this&&this.__setModuleDefault||(Object.create?function(l,c){Object.defineProperty(l,"default",{enumerable:!0,value:c})}:function(l,c){l.default=c}),o=this&&this.__importStar||function(l){if(l&&l.__esModule)return l;var c={};if(l!=null)for(var f in l)f!=="default"&&Object.prototype.hasOwnProperty.call(l,f)&&n(c,l,f);return i(c,l),c};Object.defineProperty(e,"__esModule",{value:!0}),e.ServerAddress=void 0;var a=t(6587),s=o(t(407)),u=function(){function l(c,f,h,d){this._host=(0,a.assertString)(c,"host"),this._resolved=f!=null?(0,a.assertString)(f,"resolved"):null,this._port=(0,a.assertNumber)(h,"port"),this._hostPort=d,this._stringValue=f!=null?"".concat(d,"(").concat(f,")"):"".concat(d)}return l.prototype.host=function(){return this._host},l.prototype.resolvedHost=function(){return this._resolved!=null?this._resolved:this._host},l.prototype.port=function(){return this._port},l.prototype.resolveWith=function(c){return new l(this._host,c,this._port,this._hostPort)},l.prototype.asHostPort=function(){return this._hostPort},l.prototype.asKey=function(){return this._hostPort},l.prototype.toString=function(){return this._stringValue},l.fromUrl=function(c){var f=s.parseDatabaseUrl(c);return new l(f.host,null,f.port,f.hostAndPort)},l}();e.ServerAddress=u},5022:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(p,_,O,P){P===void 0&&(P=O);var R=Object.getOwnPropertyDescriptor(_,O);R&&!("get"in R?!_.__esModule:R.writable||R.configurable)||(R={enumerable:!0,get:function(){return _[O]}}),Object.defineProperty(p,P,R)}:function(p,_,O,P){P===void 0&&(P=O),p[P]=_[O]}),i=this&&this.__setModuleDefault||(Object.create?function(p,_){Object.defineProperty(p,"default",{enumerable:!0,value:_})}:function(p,_){p.default=_}),o=this&&this.__importStar||function(p){if(p&&p.__esModule)return p;var _={};if(p!=null)for(var O in p)O!=="default"&&Object.prototype.hasOwnProperty.call(p,O)&&n(_,p,O);return i(_,p),_};Object.defineProperty(e,"__esModule",{value:!0}),e.floorMod=e.floorDiv=e.assertValidZoneId=e.assertValidNanosecond=e.assertValidSecond=e.assertValidMinute=e.assertValidHour=e.assertValidDay=e.assertValidMonth=e.assertValidYear=e.timeZoneOffsetInSeconds=e.totalNanoseconds=e.newDate=e.toStandardDate=e.isoStringToStandardDate=e.dateToIsoString=e.timeZoneOffsetToIsoString=e.timeToIsoString=e.durationToIsoString=e.dateToEpochDay=e.localDateTimeToEpochSecond=e.localTimeToNanoOfDay=e.normalizeNanosecondsForDuration=e.normalizeSecondsForDuration=e.SECONDS_PER_DAY=e.DAYS_PER_400_YEAR_CYCLE=e.DAYS_0000_TO_1970=e.NANOS_PER_HOUR=e.NANOS_PER_MINUTE=e.NANOS_PER_MILLISECOND=e.NANOS_PER_SECOND=e.SECONDS_PER_HOUR=e.SECONDS_PER_MINUTE=e.MINUTES_PER_HOUR=e.NANOSECOND_OF_SECOND_RANGE=e.SECOND_OF_MINUTE_RANGE=e.MINUTE_OF_HOUR_RANGE=e.HOUR_OF_DAY_RANGE=e.DAY_OF_MONTH_RANGE=e.MONTH_OF_YEAR_RANGE=e.YEAR_RANGE=void 0;var a=o(t(3371)),s=t(9691),u=t(6587),l=function(){function p(_,O){this._minNumber=_,this._maxNumber=O,this._minInteger=(0,a.int)(_),this._maxInteger=(0,a.int)(O)}return p.prototype.contains=function(_){if((0,a.isInt)(_)&&_ instanceof a.default)return _.greaterThanOrEqual(this._minInteger)&&_.lessThanOrEqual(this._maxInteger);if(typeof _=="bigint"){var O=(0,a.int)(_);return O.greaterThanOrEqual(this._minInteger)&&O.lessThanOrEqual(this._maxInteger)}return _>=this._minNumber&&_<=this._maxNumber},p.prototype.toString=function(){return"[".concat(this._minNumber,", ").concat(this._maxNumber,"]")},p}();function c(p,_,O){p=(0,a.int)(p),_=(0,a.int)(_),O=(0,a.int)(O);var P=p.multiply(365);return P=(P=(P=p.greaterThanOrEqual(0)?P.add(p.add(3).div(4).subtract(p.add(99).div(100)).add(p.add(399).div(400))):P.subtract(p.div(-4).subtract(p.div(-100)).add(p.div(-400)))).add(_.multiply(367).subtract(362).div(12))).add(O.subtract(1)),_.greaterThan(2)&&(P=P.subtract(1),function(R){return!(!(R=(0,a.int)(R)).modulo(4).equals(0)||R.modulo(100).equals(0)&&!R.modulo(400).equals(0))}(p)||(P=P.subtract(1))),P.subtract(e.DAYS_0000_TO_1970)}e.YEAR_RANGE=new l(-999999999,999999999),e.MONTH_OF_YEAR_RANGE=new l(1,12),e.DAY_OF_MONTH_RANGE=new l(1,31),e.HOUR_OF_DAY_RANGE=new l(0,23),e.MINUTE_OF_HOUR_RANGE=new l(0,59),e.SECOND_OF_MINUTE_RANGE=new l(0,59),e.NANOSECOND_OF_SECOND_RANGE=new l(0,999999999),e.MINUTES_PER_HOUR=60,e.SECONDS_PER_MINUTE=60,e.SECONDS_PER_HOUR=e.SECONDS_PER_MINUTE*e.MINUTES_PER_HOUR,e.NANOS_PER_SECOND=1e9,e.NANOS_PER_MILLISECOND=1e6,e.NANOS_PER_MINUTE=e.NANOS_PER_SECOND*e.SECONDS_PER_MINUTE,e.NANOS_PER_HOUR=e.NANOS_PER_MINUTE*e.MINUTES_PER_HOUR,e.DAYS_0000_TO_1970=719528,e.DAYS_PER_400_YEAR_CYCLE=146097,e.SECONDS_PER_DAY=86400,e.normalizeSecondsForDuration=function(p,_){return(0,a.int)(p).add(v(_,e.NANOS_PER_SECOND))},e.normalizeNanosecondsForDuration=function(p){return y(p,e.NANOS_PER_SECOND)},e.localTimeToNanoOfDay=function(p,_,O,P){p=(0,a.int)(p),_=(0,a.int)(_),O=(0,a.int)(O),P=(0,a.int)(P);var R=p.multiply(e.NANOS_PER_HOUR);return(R=(R=R.add(_.multiply(e.NANOS_PER_MINUTE))).add(O.multiply(e.NANOS_PER_SECOND))).add(P)},e.localDateTimeToEpochSecond=function(p,_,O,P,R,T,A){var M=c(p,_,O),N=function(j,B,q){j=(0,a.int)(j),B=(0,a.int)(B),q=(0,a.int)(q);var W=j.multiply(e.SECONDS_PER_HOUR);return(W=W.add(B.multiply(e.SECONDS_PER_MINUTE))).add(q)}(P,R,T);return M.multiply(e.SECONDS_PER_DAY).add(N)},e.dateToEpochDay=c,e.durationToIsoString=function(p,_,O,P){var R=b(p),T=b(_),A=function(M,N){var j,B;M=(0,a.int)(M),N=(0,a.int)(N);var q=M.isNegative(),W=N.greaterThan(0);return j=q&&W?M.equals(-1)?"-0":M.add(1).toString():M.toString(),W&&(B=w(q?N.negate().add(2*e.NANOS_PER_SECOND).modulo(e.NANOS_PER_SECOND):N.add(e.NANOS_PER_SECOND).modulo(e.NANOS_PER_SECOND))),B!=null?j+B:j}(O,P);return"P".concat(R,"M").concat(T,"DT").concat(A,"S")},e.timeToIsoString=function(p,_,O,P){var R=b(p,2),T=b(_,2),A=b(O,2),M=w(P);return"".concat(R,":").concat(T,":").concat(A).concat(M)},e.timeZoneOffsetToIsoString=function(p){if((p=(0,a.int)(p)).equals(0))return"Z";var _=p.isNegative();_&&(p=p.multiply(-1));var O=_?"-":"+",P=b(p.div(e.SECONDS_PER_HOUR),2),R=b(p.div(e.SECONDS_PER_MINUTE).modulo(e.MINUTES_PER_HOUR),2),T=p.modulo(e.SECONDS_PER_MINUTE),A=T.equals(0)?null:b(T,2);return A!=null?"".concat(O).concat(P,":").concat(R,":").concat(A):"".concat(O).concat(P,":").concat(R)},e.dateToIsoString=function(p,_,O){var P=function(A){var M=(0,a.int)(A);return M.isNegative()||M.greaterThan(9999)?b(M,6,{usePositiveSign:!0}):b(M,4)}(p),R=b(_,2),T=b(O,2);return"".concat(P,"-").concat(R,"-").concat(T)},e.isoStringToStandardDate=function(p){return new Date(p)},e.toStandardDate=function(p){return new Date(p)},e.newDate=function(p){return new Date(p)},e.totalNanoseconds=function(p,_){return O=_=_??0,P=p.getMilliseconds()*e.NANOS_PER_MILLISECOND,O instanceof a.default?O.add(P):typeof O=="bigint"?O+BigInt(P):O+P;var O,P},e.timeZoneOffsetInSeconds=function(p){var _=p.getSeconds()>=p.getUTCSeconds()?p.getSeconds()-p.getUTCSeconds():p.getSeconds()-p.getUTCSeconds()+60,O=p.getTimezoneOffset();return O===0?0+_:-1*O*e.SECONDS_PER_MINUTE+_},e.assertValidYear=function(p){return d(p,e.YEAR_RANGE,"Year")},e.assertValidMonth=function(p){return d(p,e.MONTH_OF_YEAR_RANGE,"Month")},e.assertValidDay=function(p){return d(p,e.DAY_OF_MONTH_RANGE,"Day")},e.assertValidHour=function(p){return d(p,e.HOUR_OF_DAY_RANGE,"Hour")},e.assertValidMinute=function(p){return d(p,e.MINUTE_OF_HOUR_RANGE,"Minute")},e.assertValidSecond=function(p){return d(p,e.SECOND_OF_MINUTE_RANGE,"Second")},e.assertValidNanosecond=function(p){return d(p,e.NANOSECOND_OF_SECOND_RANGE,"Nanosecond")};var f=new Map,h=function(p,_){return(0,s.newError)("".concat(_,' is expected to be a valid ZoneId but was: "').concat(p,'"'))};function d(p,_,O){if((0,u.assertNumberOrInteger)(p,O),!_.contains(p))throw(0,s.newError)("".concat(O," is expected to be in range ").concat(_.toString()," but was: ").concat(p.toString()));return p}function v(p,_){p=(0,a.int)(p),_=(0,a.int)(_);var O=p.div(_);return p.isPositive()!==_.isPositive()&&O.multiply(_).notEquals(p)&&(O=O.subtract(1)),O}function y(p,_){return p=(0,a.int)(p),_=(0,a.int)(_),p.subtract(v(p,_).multiply(_))}function w(p){return(p=(0,a.int)(p)).equals(0)?"":"."+b(p,9)}function b(p,_,O){var P=(p=(0,a.int)(p)).isNegative();P&&(p=p.negate());var R=p.toString();if(_!=null)for(;R.length<_;)R="0"+R;return P?"-"+R:(O==null?void 0:O.usePositiveSign)===!0?"+"+R:R}e.assertValidZoneId=function(p,_){var O=f.get(_);if(O!==!0){if(O===!1)throw h(_,p);try{Intl.DateTimeFormat(void 0,{timeZone:_}),f.set(_,!0)}catch{throw f.set(_,!1),h(_,p)}}},e.floorDiv=v,e.floorMod=y},6189:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(v){for(var y,w=1,b=arguments.length;w<b;w++)for(var p in y=arguments[w])Object.prototype.hasOwnProperty.call(y,p)&&(v[p]=y[p]);return v},n.apply(this,arguments)},i=this&&this.__awaiter||function(v,y,w,b){return new(w||(w=Promise))(function(p,_){function O(T){try{R(b.next(T))}catch(A){_(A)}}function P(T){try{R(b.throw(T))}catch(A){_(A)}}function R(T){var A;T.done?p(T.value):(A=T.value,A instanceof w?A:new w(function(M){M(A)})).then(O,P)}R((b=b.apply(v,y||[])).next())})},o=this&&this.__generator||function(v,y){var w,b,p,_,O={label:0,sent:function(){if(1&p[0])throw p[1];return p[1]},trys:[],ops:[]};return _={next:P(0),throw:P(1),return:P(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function P(R){return function(T){return function(A){if(w)throw new TypeError("Generator is already executing.");for(;_&&(_=0,A[0]&&(O=0)),O;)try{if(w=1,b&&(p=2&A[0]?b.return:A[0]?b.throw||((p=b.return)&&p.call(b),0):b.next)&&!(p=p.call(b,A[1])).done)return p;switch(b=0,p&&(A=[2&A[0],p.value]),A[0]){case 0:case 1:p=A;break;case 4:return O.label++,{value:A[1],done:!1};case 5:O.label++,b=A[1],A=[0];continue;case 7:A=O.ops.pop(),O.trys.pop();continue;default:if(!((p=(p=O.trys).length>0&&p[p.length-1])||A[0]!==6&&A[0]!==2)){O=0;continue}if(A[0]===3&&(!p||A[1]>p[0]&&A[1]<p[3])){O.label=A[1];break}if(A[0]===6&&O.label<p[1]){O.label=p[1],p=A;break}if(p&&O.label<p[2]){O.label=p[2],O.ops.push(A);break}p[2]&&O.ops.pop(),O.trys.pop();continue}A=y.call(v,O)}catch(M){A=[6,M],b=0}finally{w=p=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([R,T])}}},a=this&&this.__read||function(v,y){var w=typeof Symbol=="function"&&v[Symbol.iterator];if(!w)return v;var b,p,_=w.call(v),O=[];try{for(;(y===void 0||y-- >0)&&!(b=_.next()).done;)O.push(b.value)}catch(P){p={error:P}}finally{try{b&&!b.done&&(w=_.return)&&w.call(_)}finally{if(p)throw p.error}}return O},s=this&&this.__spreadArray||function(v,y,w){if(w||arguments.length===2)for(var b,p=0,_=y.length;p<_;p++)!b&&p in y||(b||(b=Array.prototype.slice.call(y,0,p)),b[p]=y[p]);return v.concat(b||Array.prototype.slice.call(y))};Object.defineProperty(e,"__esModule",{value:!0}),e.TransactionExecutor=void 0;var u=t(9691),l=t(326);function c(v,y){for(var w=[],b=2;b<arguments.length;b++)w[b-2]=arguments[b];return setTimeout.apply(void 0,s([v,y],a(w),!1))}function f(v){return clearTimeout(v)}var h=function(){function v(y,w,b,p,_){_===void 0&&(_={setTimeout:c,clearTimeout:f}),this._maxRetryTimeMs=d(y,3e4),this._initialRetryDelayMs=d(w,1e3),this._multiplier=d(b,2),this._jitterFactor=d(p,.2),this._setTimeout=_.setTimeout,this._clearTimeout=_.clearTimeout,this._inFlightTimeoutIds=[],this.pipelineBegin=!1,this.telemetryApi=l.TELEMETRY_APIS.MANAGED_TRANSACTION,this._verifyAfterConstruction()}return v.prototype.execute=function(y,w,b){var p=this,_={apiTransactionConfig:{api:this.telemetryApi,onTelemetrySuccess:function(){_.apiTransactionConfig=void 0}}};return new Promise(function(O,P){p._executeTransactionInsidePromise(y,w,O,P,b,_).catch(P)}).catch(function(O){var P=Date.now(),R=p._initialRetryDelayMs;return p._retryTransactionPromise(y,w,O,P,R,b,_)})},v.prototype.close=function(){var y=this;this._inFlightTimeoutIds.forEach(function(w){return y._clearTimeout(w)}),this._inFlightTimeoutIds=[]},v.prototype._retryTransactionPromise=function(y,w,b,p,_,O,P){var R=this;return Date.now()-p>this._maxRetryTimeMs||!(0,u.isRetriableError)(b)?Promise.reject(b):new Promise(function(T,A){var M=R._computeDelayWithJitter(_),N=R._setTimeout(function(){R._inFlightTimeoutIds=R._inFlightTimeoutIds.filter(function(j){return j!==N}),R._executeTransactionInsidePromise(y,w,T,A,O,P).catch(A)},M);R._inFlightTimeoutIds.push(N)}).catch(function(T){var A=_*R._multiplier;return R._retryTransactionPromise(y,w,T,p,A,O,P)})},v.prototype._executeTransactionInsidePromise=function(y,w,b,p,_,O){return i(this,void 0,void 0,function(){var P,R,T,A,M,N,j=this;return o(this,function(B){switch(B.label){case 0:return B.trys.push([0,4,,5]),R=y((O==null?void 0:O.apiTransactionConfig)!=null?n({},O==null?void 0:O.apiTransactionConfig):void 0),this.pipelineBegin?(T=R,[3,3]):[3,1];case 1:return[4,R];case 2:T=B.sent(),B.label=3;case 3:return P=T,[3,5];case 4:return A=B.sent(),p(A),[2];case 5:return M=_??function(q){return q},N=M(P),this._safeExecuteTransactionWork(N,w).then(function(q){return j._handleTransactionWorkSuccess(q,P,b,p)}).catch(function(q){return j._handleTransactionWorkFailure(q,P,p)}),[2]}})})},v.prototype._safeExecuteTransactionWork=function(y,w){try{var b=w(y);return Promise.resolve(b)}catch(p){return Promise.reject(p)}},v.prototype._handleTransactionWorkSuccess=function(y,w,b,p){w.isOpen()?w.commit().then(function(){b(y)}).catch(function(_){p(_)}):b(y)},v.prototype._handleTransactionWorkFailure=function(y,w,b){w.isOpen()?w.rollback().catch(function(p){}).then(function(){return b(y)}).catch(b):b(y)},v.prototype._computeDelayWithJitter=function(y){var w=y*this._jitterFactor,b=y-w,p=y+w;return Math.random()*(p-b)+b},v.prototype._verifyAfterConstruction=function(){if(this._maxRetryTimeMs<0)throw(0,u.newError)("Max retry time should be >= 0: "+this._maxRetryTimeMs.toString());if(this._initialRetryDelayMs<0)throw(0,u.newError)("Initial retry delay should >= 0: "+this._initialRetryDelayMs.toString());if(this._multiplier<1)throw(0,u.newError)("Multiplier should be >= 1.0: "+this._multiplier.toString());if(this._jitterFactor<0||this._jitterFactor>1)throw(0,u.newError)("Jitter factor should be in [0.0, 1.0]: "+this._jitterFactor.toFixed())},v}();function d(v,y){return v??y}e.TransactionExecutor=h},754:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(f,h,d,v){v===void 0&&(v=d);var y=Object.getOwnPropertyDescriptor(h,d);y&&!("get"in y?!h.__esModule:y.writable||y.configurable)||(y={enumerable:!0,get:function(){return h[d]}}),Object.defineProperty(f,v,y)}:function(f,h,d,v){v===void 0&&(v=d),f[v]=h[d]}),i=this&&this.__setModuleDefault||(Object.create?function(f,h){Object.defineProperty(f,"default",{enumerable:!0,value:h})}:function(f,h){f.default=h}),o=this&&this.__importStar||function(f){if(f&&f.__esModule)return f;var h={};if(f!=null)for(var d in f)d!=="default"&&Object.prototype.hasOwnProperty.call(f,d)&&n(h,f,d);return i(h,f),h};Object.defineProperty(e,"__esModule",{value:!0}),e.TxConfig=void 0;var a=o(t(6587)),s=t(9691),u=t(3371),l=function(){function f(h,d){(function(v){v!=null&&a.assertObject(v,"Transaction config")})(h),this.timeout=function(v,y){if(a.isObject(v)&&v.timeout!=null){a.assertNumberOrInteger(v.timeout,"Transaction timeout"),function(b){return typeof b.timeout=="number"&&!Number.isInteger(b.timeout)}(v)&&(y==null?void 0:y.isInfoEnabled())===!0&&(y==null||y.info("Transaction timeout expected to be an integer, got: ".concat(v.timeout,". The value will be rounded up.")));var w=(0,u.int)(v.timeout,{ceilFloat:!0});if(w.isNegative())throw(0,s.newError)("Transaction timeout should not be negative");return w}return null}(h,d),this.metadata=function(v){if(a.isObject(v)&&v.metadata!=null){var y=v.metadata;if(a.assertObject(y,"config.metadata"),Object.keys(y).length!==0)return y}return null}(h)}return f.empty=function(){return c},f.prototype.isEmpty=function(){return Object.values(this).every(function(h){return h==null})},f}();e.TxConfig=l;var c=new l({})},407:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(c){for(var f,h=1,d=arguments.length;h<d;h++)for(var v in f=arguments[h])Object.prototype.hasOwnProperty.call(f,v)&&(c[v]=f[v]);return c},n.apply(this,arguments)},i=this&&this.__read||function(c,f){var h=typeof Symbol=="function"&&c[Symbol.iterator];if(!h)return c;var d,v,y=h.call(c),w=[];try{for(;(f===void 0||f-- >0)&&!(d=y.next()).done;)w.push(d.value)}catch(b){v={error:b}}finally{try{d&&!d.done&&(h=y.return)&&h.call(y)}finally{if(v)throw v.error}}return w};Object.defineProperty(e,"__esModule",{value:!0}),e.Url=e.formatIPv6Address=e.formatIPv4Address=e.defaultPortForScheme=e.parseDatabaseUrl=void 0;var o=t(6587),a=function(c,f,h,d,v){this.scheme=c,this.host=f,this.port=h,this.hostAndPort=d,this.query=v};function s(c,f,h){if((c=(c??"").trim())==="")throw new Error("Illegal empty ".concat(f," in URL query '").concat(h,"'"));return c}function u(c){var f=c.charAt(0)==="[",h=c.charAt(c.length-1)==="]";if(f||h){if(f&&h)return c;throw new Error("Illegal IPv6 address ".concat(c))}return"[".concat(c,"]")}function l(c){return c==="http"?7474:c==="https"?7473:7687}e.Url=a,e.parseDatabaseUrl=function(c){var f;(0,o.assertString)(c,"URL");var h,d=function(P){return(P=P.trim()).includes("://")?{schemeMissing:!1,url:P}:{schemeMissing:!0,url:"none://".concat(P)}}(c),v=function(P){function R(M,N){var j=M.indexOf(N);return j>=0?[M.substring(0,j),M[j],M.substring(j+1)]:[M,"",""]}var T,A={};return(T=R(P,":"))[1]===":"&&(A.scheme=decodeURIComponent(T[0]),P=T[2]),(T=R(P,"#"))[1]==="#"&&(A.fragment=decodeURIComponent(T[2]),P=T[0]),(T=R(P,"?"))[1]==="?"&&(A.query=T[2],P=T[0]),P.startsWith("//")?(T=R(P.substr(2),"/"),(A=n(n({},A),function(M){var N,j,B,q,W={};(j=M,B="@",q=j.lastIndexOf(B),N=q>=0?[j.substring(0,q),j[q],j.substring(q+1)]:["","",j])[1]==="@"&&(W.userInfo=decodeURIComponent(N[0]),M=N[2]);var J=i(function(ee,fe,he){var se=R(ee,fe),me=R(se[2],he);return[me[0],me[2]]}(M,"[","]"),2),te=J[0],re=J[1];return te!==""?(W.host=te,N=R(re,":")):(N=R(M,":"),W.host=N[0]),N[1]===":"&&(W.port=N[2]),W}(T[0]))).path=T[1]+T[2]):A.path=P,A}(d.url),y=d.schemeMissing?null:function(P){return P!=null?((P=P.trim()).charAt(P.length-1)===":"&&(P=P.substring(0,P.length-1)),P):null}(v.scheme),w=function(P,R){if(P==null)throw new Error("Unable to extract host from null or undefined URL");return P.trim()}(v.host),b=function(P){if(P===""||P==null)throw new Error("Illegal host ".concat(P));return P.includes(":")?u(P):P}(w),p=function(P,R){var T=typeof P=="string"?parseInt(P,10):P;return T==null||isNaN(T)?l(R):T}(v.port,y),_="".concat(b,":").concat(p),O=function(P,R){var T=P!=null?function(M){return((M=(M??"").trim())==null?void 0:M.charAt(0))==="?"&&(M=M.substring(1,M.length)),M}(P):null,A={};return T!=null&&T.split("&").forEach(function(M){var N=M.split("=");if(N.length!==2)throw new Error("Invalid parameters: '".concat(N.toString(),"' in URL '").concat(R,"'."));var j=s(N[0],"key",R),B=s(N[1],"value",R);if(A[j]!==void 0)throw new Error("Duplicated query parameters with key '".concat(j,"' in URL '").concat(R,"'"));A[j]=B}),A}((f=v.query)!==null&&f!==void 0?f:typeof(h=v.resourceName)!="string"?null:i(h.split("?"),2)[1],c);return new a(y,w,p,_,O)},e.formatIPv4Address=function(c,f){return"".concat(c,":").concat(f)},e.formatIPv6Address=function(c,f){var h=u(c);return"".concat(h,":").concat(f)},e.defaultPortForScheme=l},6587:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(h,d,v,y){y===void 0&&(y=v);var w=Object.getOwnPropertyDescriptor(d,v);w&&!("get"in w?!d.__esModule:w.writable||w.configurable)||(w={enumerable:!0,get:function(){return d[v]}}),Object.defineProperty(h,y,w)}:function(h,d,v,y){y===void 0&&(y=v),h[y]=d[v]}),i=this&&this.__setModuleDefault||(Object.create?function(h,d){Object.defineProperty(h,"default",{enumerable:!0,value:d})}:function(h,d){h.default=d}),o=this&&this.__importStar||function(h){if(h&&h.__esModule)return h;var d={};if(h!=null)for(var v in h)v!=="default"&&Object.prototype.hasOwnProperty.call(h,v)&&n(d,h,v);return i(d,h),d},a=this&&this.__values||function(h){var d=typeof Symbol=="function"&&Symbol.iterator,v=d&&h[d],y=0;if(v)return v.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&y>=h.length&&(h=void 0),{value:h&&h[y++],done:!h}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.ENCRYPTION_OFF=e.ENCRYPTION_ON=e.equals=e.validateQueryAndParameters=e.toNumber=e.assertValidDate=e.assertNumberOrInteger=e.assertNumber=e.assertString=e.assertObject=e.isString=e.isObject=e.isEmptyObjectOrNull=void 0;var s=o(t(3371)),u=t(4027);function l(h){return typeof h=="object"&&!Array.isArray(h)&&h!==null}function c(h,d){if(!f(h))throw new TypeError((0,u.stringify)(d)+" expected to be string but was: "+(0,u.stringify)(h));return h}function f(h){return Object.prototype.toString.call(h)==="[object String]"}e.ENCRYPTION_ON="ENCRYPTION_ON",e.ENCRYPTION_OFF="ENCRYPTION_OFF",e.isEmptyObjectOrNull=function(h){if(h===null)return!0;if(!l(h))return!1;for(var d in h)if(h[d]!==void 0)return!1;return!0},e.isObject=l,e.validateQueryAndParameters=function(h,d,v){var y,w,b="",p=d??{},_=(y=v==null?void 0:v.skipAsserts)!==null&&y!==void 0&&y;return typeof h=="string"?b=h:h instanceof String?b=h.toString():typeof h=="object"&&h.text!=null&&(b=h.text,p=(w=h.parameters)!==null&&w!==void 0?w:{}),_||(function(O){if(c(O,"Cypher query"),O.trim().length===0)throw new TypeError("Cypher query is expected to be a non-empty string.")}(b),function(O){if(!l(O)){var P=O.constructor!=null?" "+O.constructor.name:"";throw new TypeError("Query parameters are expected to either be undefined/null or an object, given:".concat(P," ").concat(JSON.stringify(O)))}}(p)),{validatedQuery:b,params:p}},e.assertObject=function(h,d){if(!l(h))throw new TypeError(d+" expected to be an object but was: "+(0,u.stringify)(h));return h},e.assertString=c,e.assertNumber=function(h,d){if(typeof h!="number")throw new TypeError(d+" expected to be a number but was: "+(0,u.stringify)(h));return h},e.assertNumberOrInteger=function(h,d){if(typeof h!="number"&&typeof h!="bigint"&&!(0,s.isInt)(h))throw new TypeError(d+" expected to be either a number or an Integer object but was: "+(0,u.stringify)(h));return h},e.assertValidDate=function(h,d){if(Object.prototype.toString.call(h)!=="[object Date]")throw new TypeError(d+" expected to be a standard JavaScript Date but was: "+(0,u.stringify)(h));if(Number.isNaN(h.getTime()))throw new TypeError(d+" expected to be valid JavaScript Date but its time was NaN: "+(0,u.stringify)(h));return h},e.isString=f,e.equals=function h(d,v){var y,w;if(d===v)return!0;if(d===null||v===null)return!1;if(typeof d=="object"&&typeof v=="object"){var b=Object.keys(d),p=Object.keys(v);if(b.length!==p.length)return!1;try{for(var _=a(b),O=_.next();!O.done;O=_.next()){var P=O.value;if(!h(d[P],v[P]))return!1}}catch(R){y={error:R}}finally{try{O&&!O.done&&(w=_.return)&&w.call(_)}finally{if(y)throw y.error}}return!0}return!1},e.toNumber=function(h){return h instanceof s.default?h.toNumber():typeof h=="bigint"?(0,s.int)(h).toNumber():h}},4027:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.stringify=void 0;var n=t(93);e.stringify=function(i,o){return JSON.stringify(i,function(a,s){return(0,n.isBrokenObject)(s)?{__isBrokenObject__:!0,__reason__:(0,n.getBrokenObjectReason)(s)}:typeof s=="bigint"?"".concat(s,"n"):(o==null?void 0:o.useCustomToString)!==!0||typeof s!="object"||Array.isArray(s)||typeof s.toString!="function"||s.toString===Object.prototype.toString?s:s==null?void 0:s.toString()})}},1985:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.notificationFilterDisabledClassification=e.notificationFilterDisabledCategory=e.notificationFilterMinimumSeverityLevel=void 0;var t={OFF:"OFF",WARNING:"WARNING",INFORMATION:"INFORMATION"};e.notificationFilterMinimumSeverityLevel=t,Object.freeze(t);var n={HINT:"HINT",UNRECOGNIZED:"UNRECOGNIZED",UNSUPPORTED:"UNSUPPORTED",PERFORMANCE:"PERFORMANCE",TOPOLOGY:"TOPOLOGY",SECURITY:"SECURITY",DEPRECATION:"DEPRECATION",GENERIC:"GENERIC",SCHEMA:"SCHEMA"};e.notificationFilterDisabledCategory=n,Object.freeze(n);var i=n;e.notificationFilterDisabledClassification=i,e.default=function(){throw this.minimumSeverityLevel=void 0,this.disabledCategories=void 0,this.disabledClassifications=void 0,new Error("Not implemented")}},1866:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(B){for(var q,W=1,J=arguments.length;W<J;W++)for(var te in q=arguments[W])Object.prototype.hasOwnProperty.call(q,te)&&(B[te]=q[te]);return B},n.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(B,q,W,J){J===void 0&&(J=W);var te=Object.getOwnPropertyDescriptor(q,W);te&&!("get"in te?!q.__esModule:te.writable||te.configurable)||(te={enumerable:!0,get:function(){return q[W]}}),Object.defineProperty(B,J,te)}:function(B,q,W,J){J===void 0&&(J=W),B[J]=q[W]}),o=this&&this.__setModuleDefault||(Object.create?function(B,q){Object.defineProperty(B,"default",{enumerable:!0,value:q})}:function(B,q){B.default=q}),a=this&&this.__importStar||function(B){if(B&&B.__esModule)return B;var q={};if(B!=null)for(var W in B)W!=="default"&&Object.prototype.hasOwnProperty.call(B,W)&&i(q,B,W);return o(q,B),q},s=this&&this.__read||function(B,q){var W=typeof Symbol=="function"&&B[Symbol.iterator];if(!W)return B;var J,te,re=W.call(B),ee=[];try{for(;(q===void 0||q-- >0)&&!(J=re.next()).done;)ee.push(J.value)}catch(fe){te={error:fe}}finally{try{J&&!J.done&&(W=re.return)&&W.call(re)}finally{if(te)throw te.error}}return ee},u=this&&this.__spreadArray||function(B,q,W){if(W||arguments.length===2)for(var J,te=0,re=q.length;te<re;te++)!J&&te in q||(J||(J=Array.prototype.slice.call(q,0,te)),J[te]=q[te]);return B.concat(J||Array.prototype.slice.call(q))};Object.defineProperty(e,"__esModule",{value:!0}),e.buildNotificationsFromMetadata=e.buildGqlStatusObjectFromMetadata=e.polyfillNotification=e.polyfillGqlStatusObject=e.GqlStatusObject=e.Notification=e.notificationClassification=e.notificationCategory=e.notificationSeverityLevel=void 0;var l=a(t(4027)),c=t(6995),f=t(1053),h={WARNING:{gql_status:"01N42",status_description:"warn: unknown warning"},NO_DATA:{gql_status:"02N42",status_description:"note: no data - unknown subcondition"},INFORMATION:{gql_status:"03N42",status_description:"info: unknown notification"}},d={WARNING:"WARNING",INFORMATION:"INFORMATION",UNKNOWN:"UNKNOWN"};e.notificationSeverityLevel=d,Object.freeze(d);var v=Object.values(d),y={HINT:"HINT",UNRECOGNIZED:"UNRECOGNIZED",UNSUPPORTED:"UNSUPPORTED",PERFORMANCE:"PERFORMANCE",DEPRECATION:"DEPRECATION",TOPOLOGY:"TOPOLOGY",SECURITY:"SECURITY",GENERIC:"GENERIC",SCHEMA:"SCHEMA",UNKNOWN:"UNKNOWN"};e.notificationCategory=y,Object.freeze(y);var w=Object.values(y),b=y;e.notificationClassification=b;var p=function(B){this.code=B.code,this.title=B.title,this.description=B.description,this.severity=B.severity,this.position=M(B.position),this.severityLevel=N(B.severity),this.rawSeverityLevel=B.severity,this.category=j(B.category),this.rawCategory=B.category};e.Notification=p;var _=function(){function B(q){var W;this.gqlStatus=q.gql_status,this.statusDescription=q.status_description,this.diagnosticRecord=(W=q.diagnostic_record)!==null&&W!==void 0?W:{},this.position=this.diagnosticRecord._position!=null?M(this.diagnosticRecord._position):void 0,this.severity=N(this.diagnosticRecord._severity),this.rawSeverity=this.diagnosticRecord._severity,this.classification=j(this.diagnosticRecord._classification),this.rawClassification=this.diagnosticRecord._classification,this.isNotification=q.neo4j_code!=null,Object.freeze(this)}return Object.defineProperty(B.prototype,"diagnosticRecordAsJsonString",{get:function(){return l.stringify(this.diagnosticRecord,{useCustomToString:!0})},enumerable:!1,configurable:!0}),B}();function O(B){var q,W,J;if(B.neo4j_code!=null)return new p({code:B.neo4j_code,title:B.title,description:B.description,severity:(q=B.diagnostic_record)===null||q===void 0?void 0:q._severity,category:(W=B.diagnostic_record)===null||W===void 0?void 0:W._classification,position:(J=B.diagnostic_record)===null||J===void 0?void 0:J._position})}function P(B){var q,W=B.severity===d.WARNING?h.WARNING:h.INFORMATION,J={gql_status:W.gql_status,status_description:(q=B.description)!==null&&q!==void 0?q:W.status_description,neo4j_code:B.code,title:B.title,diagnostic_record:n({},f.rawPolyfilledDiagnosticRecord)};return B.severity!=null&&(J.diagnostic_record._severity=B.severity),B.category!=null&&(J.diagnostic_record._classification=B.category),B.position!=null&&(J.diagnostic_record._position=B.position),new _(J)}e.GqlStatusObject=_,e.polyfillNotification=O,e.polyfillGqlStatusObject=P;var R={SUCCESS:new _({gql_status:"00000",status_description:"note: successful completion",diagnostic_record:f.rawPolyfilledDiagnosticRecord}),NO_DATA:new _({gql_status:"02000",status_description:"note: no data",diagnostic_record:f.rawPolyfilledDiagnosticRecord}),NO_DATA_UNKNOWN_SUBCONDITION:new _(n(n({},h.NO_DATA),{diagnostic_record:f.rawPolyfilledDiagnosticRecord})),OMITTED_RESULT:new _({gql_status:"00001",status_description:"note: successful completion - omitted result",diagnostic_record:f.rawPolyfilledDiagnosticRecord})};Object.freeze(R),e.buildGqlStatusObjectFromMetadata=function(B){var q,W;if(B.statuses!=null)return B.statuses.map(function(re){return new _(re)});var J,te=((J=B.stream_summary)==null?void 0:J.have_records_streamed)===!0?R.SUCCESS:(J==null?void 0:J.has_keys)===!1?R.OMITTED_RESULT:(J==null?void 0:J.pulled)===!0?R.NO_DATA:R.NO_DATA_UNKNOWN_SUBCONDITION;return u([te],s((W=(q=B.notifications)===null||q===void 0?void 0:q.map(P))!==null&&W!==void 0?W:[]),!1).sort(function(re,ee){return A(re)-A(ee)})};var T=Object.freeze({"02":0,"01":1,"00":2});function A(B){var q,W,J=(q=B.gqlStatus)===null||q===void 0?void 0:q.slice(0,2);return(W=T[J])!==null&&W!==void 0?W:9999}function M(B){return B==null?{}:{offset:c.util.toNumber(B.offset),line:c.util.toNumber(B.line),column:c.util.toNumber(B.column)}}function N(B){return v.includes(B)?B:d.UNKNOWN}function j(B){return w.includes(B)?B:b.UNKNOWN}e.buildNotificationsFromMetadata=function(B){return B.notifications!=null?B.notifications.map(function(q){return new p(q)}):B.statuses!=null?B.statuses.map(O).filter(function(q){return q!=null}):[]},e.default=p},4820:function(r,e,t){var n=this&&this.__generator||function(u,l){var c,f,h,d,v={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return d={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function y(w){return function(b){return function(p){if(c)throw new TypeError("Generator is already executing.");for(;d&&(d=0,p[0]&&(v=0)),v;)try{if(c=1,f&&(h=2&p[0]?f.return:p[0]?f.throw||((h=f.return)&&h.call(f),0):f.next)&&!(h=h.call(f,p[1])).done)return h;switch(f=0,h&&(p=[2&p[0],h.value]),p[0]){case 0:case 1:h=p;break;case 4:return v.label++,{value:p[1],done:!1};case 5:v.label++,f=p[1],p=[0];continue;case 7:p=v.ops.pop(),v.trys.pop();continue;default:if(!((h=(h=v.trys).length>0&&h[h.length-1])||p[0]!==6&&p[0]!==2)){v=0;continue}if(p[0]===3&&(!h||p[1]>h[0]&&p[1]<h[3])){v.label=p[1];break}if(p[0]===6&&v.label<h[1]){v.label=h[1],h=p;break}if(h&&v.label<h[2]){v.label=h[2],v.ops.push(p);break}h[2]&&v.ops.pop(),v.trys.pop();continue}p=l.call(u,v)}catch(_){p=[6,_],f=0}finally{c=h=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}([w,b])}}},i=this&&this.__values||function(u){var l=typeof Symbol=="function"&&Symbol.iterator,c=l&&u[l],f=0;if(c)return c.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&f>=u.length&&(u=void 0),{value:u&&u[f++],done:!u}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(u,l){var c=typeof Symbol=="function"&&u[Symbol.iterator];if(!c)return u;var f,h,d=c.call(u),v=[];try{for(;(l===void 0||l-- >0)&&!(f=d.next()).done;)v.push(f.value)}catch(y){h={error:y}}finally{try{f&&!f.done&&(c=d.return)&&c.call(d)}finally{if(h)throw h.error}}return v};Object.defineProperty(e,"__esModule",{value:!0});var a=t(9691),s=function(){function u(l,c,f){this.keys=l,this.length=l.length,this._fields=c,this._fieldLookup=f??function(h){var d={};return h.forEach(function(v,y){d[v]=y}),d}(l)}return u.prototype.forEach=function(l){var c,f;try{for(var h=i(this.entries()),d=h.next();!d.done;d=h.next()){var v=o(d.value,2),y=v[0];l(v[1],y,this)}}catch(w){c={error:w}}finally{try{d&&!d.done&&(f=h.return)&&f.call(h)}finally{if(c)throw c.error}}},u.prototype.map=function(l){var c,f,h=[];try{for(var d=i(this.entries()),v=d.next();!v.done;v=d.next()){var y=o(v.value,2),w=y[0],b=y[1];h.push(l(b,w,this))}}catch(p){c={error:p}}finally{try{v&&!v.done&&(f=d.return)&&f.call(d)}finally{if(c)throw c.error}}return h},u.prototype.entries=function(){var l;return n(this,function(c){switch(c.label){case 0:l=0,c.label=1;case 1:return l<this.keys.length?[4,[this.keys[l],this._fields[l]]]:[3,4];case 2:c.sent(),c.label=3;case 3:return l++,[3,1];case 4:return[2]}})},u.prototype.values=function(){var l;return n(this,function(c){switch(c.label){case 0:l=0,c.label=1;case 1:return l<this.keys.length?[4,this._fields[l]]:[3,4];case 2:c.sent(),c.label=3;case 3:return l++,[3,1];case 4:return[2]}})},u.prototype[Symbol.iterator]=function(){var l;return n(this,function(c){switch(c.label){case 0:l=0,c.label=1;case 1:return l<this.keys.length?[4,this._fields[l]]:[3,4];case 2:c.sent(),c.label=3;case 3:return l++,[3,1];case 4:return[2]}})},u.prototype.toObject=function(){var l,c,f={};try{for(var h=i(this.entries()),d=h.next();!d.done;d=h.next()){var v=o(d.value,2),y=v[0],w=v[1];f[y]=w}}catch(b){l={error:b}}finally{try{d&&!d.done&&(c=h.return)&&c.call(h)}finally{if(l)throw l.error}}return f},u.prototype.get=function(l){var c;if(typeof l!="number"){if((c=this._fieldLookup[l])===void 0)throw(0,a.newError)("This record has no field with key '".concat(l.toString(),"', available keys are: [")+this.keys.toString()+"].")}else c=l;if(c>this._fields.length-1||c<0)throw(0,a.newError)("This record has no field with index '"+c.toString()+"'. Remember that indexes start at `0`, and make sure your query returns records in the shape you meant it to.");return this._fields[c]},u.prototype.has=function(l){return typeof l=="number"?l>=0&&l<this._fields.length:this._fieldLookup[l]!==void 0},u}();e.default=s},8917:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,n,i){this.keys=t,this.records=n,this.summary=i}},6033:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Stats=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.ServerInfo=e.queryType=void 0;var n=t(6995),i=t(1866),o=function(){function f(h,d,v,y){var w,b,p;this.query={text:h,parameters:d},this.queryType=v.type,this.counters=new u((w=v.stats)!==null&&w!==void 0?w:{}),this.updateStatistics=this.counters,this.plan=(v.plan!=null||v.profile!=null)&&new a((b=v.plan)!==null&&b!==void 0?b:v.profile),this.profile=v.profile!=null&&new s(v.profile),this.notifications=(0,i.buildNotificationsFromMetadata)(v),this.gqlStatusObjects=(0,i.buildGqlStatusObjectFromMetadata)(v),this.server=new l(v.server,y),this.resultConsumedAfter=v.result_consumed_after,this.resultAvailableAfter=v.result_available_after,this.database={name:(p=v.db)!==null&&p!==void 0?p:null}}return f.prototype.hasPlan=function(){return this.plan instanceof a},f.prototype.hasProfile=function(){return this.profile instanceof s},f}(),a=function f(h){this.operatorType=h.operatorType,this.identifiers=h.identifiers,this.arguments=h.args,this.children=h.children!=null?h.children.map(function(d){return new f(d)}):[]};e.Plan=a;var s=function(){function f(h){this.operatorType=h.operatorType,this.identifiers=h.identifiers,this.arguments=h.args,this.dbHits=c("dbHits",h),this.rows=c("rows",h),this.pageCacheMisses=c("pageCacheMisses",h),this.pageCacheHits=c("pageCacheHits",h),this.pageCacheHitRatio=c("pageCacheHitRatio",h),this.time=c("time",h),this.children=h.children!=null?h.children.map(function(d){return new f(d)}):[]}return f.prototype.hasPageCacheStats=function(){return this.pageCacheMisses>0||this.pageCacheHits>0||this.pageCacheHitRatio>0},f}();e.ProfiledPlan=s,e.Stats=function(){this.nodesCreated=0,this.nodesDeleted=0,this.relationshipsCreated=0,this.relationshipsDeleted=0,this.propertiesSet=0,this.labelsAdded=0,this.labelsRemoved=0,this.indexesAdded=0,this.indexesRemoved=0,this.constraintsAdded=0,this.constraintsRemoved=0};var u=function(){function f(h){var d=this;this._stats={nodesCreated:0,nodesDeleted:0,relationshipsCreated:0,relationshipsDeleted:0,propertiesSet:0,labelsAdded:0,labelsRemoved:0,indexesAdded:0,indexesRemoved:0,constraintsAdded:0,constraintsRemoved:0},this._systemUpdates=0,Object.keys(h).forEach(function(v){var y=v.replace(/(-\w)/g,function(w){return w[1].toUpperCase()});y in d._stats?d._stats[y]=n.util.toNumber(h[v]):y==="systemUpdates"?d._systemUpdates=n.util.toNumber(h[v]):y==="containsSystemUpdates"?d._containsSystemUpdates=h[v]:y==="containsUpdates"&&(d._containsUpdates=h[v])}),this._stats=Object.freeze(this._stats)}return f.prototype.containsUpdates=function(){var h=this;return this._containsUpdates!==void 0?this._containsUpdates:Object.keys(this._stats).reduce(function(d,v){return d+h._stats[v]},0)>0},f.prototype.updates=function(){return this._stats},f.prototype.containsSystemUpdates=function(){return this._containsSystemUpdates!==void 0?this._containsSystemUpdates:this._systemUpdates>0},f.prototype.systemUpdates=function(){return this._systemUpdates},f}();e.QueryStatistics=u;var l=function(f,h){f!=null&&(this.address=f.address,this.agent=f.version),this.protocolVersion=h};function c(f,h,d){if(d===void 0&&(d=0),h!==!1&&f in h){var v=h[f];return n.util.toNumber(v)}return d}e.ServerInfo=l,e.queryType={READ_ONLY:"r",READ_WRITE:"rw",WRITE_ONLY:"w",SCHEMA_WRITE:"s"},e.default=o},1573:function(r,e,t){var n=this&&this.__awaiter||function(d,v,y,w){return new(y||(y=Promise))(function(b,p){function _(R){try{P(w.next(R))}catch(T){p(T)}}function O(R){try{P(w.throw(R))}catch(T){p(T)}}function P(R){var T;R.done?b(R.value):(T=R.value,T instanceof y?T:new y(function(A){A(T)})).then(_,O)}P((w=w.apply(d,v||[])).next())})},i=this&&this.__generator||function(d,v){var y,w,b,p,_={label:0,sent:function(){if(1&b[0])throw b[1];return b[1]},trys:[],ops:[]};return p={next:O(0),throw:O(1),return:O(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function O(P){return function(R){return function(T){if(y)throw new TypeError("Generator is already executing.");for(;p&&(p=0,T[0]&&(_=0)),_;)try{if(y=1,w&&(b=2&T[0]?w.return:T[0]?w.throw||((b=w.return)&&b.call(w),0):w.next)&&!(b=b.call(w,T[1])).done)return b;switch(w=0,b&&(T=[2&T[0],b.value]),T[0]){case 0:case 1:b=T;break;case 4:return _.label++,{value:T[1],done:!1};case 5:_.label++,w=T[1],T=[0];continue;case 7:T=_.ops.pop(),_.trys.pop();continue;default:if(!((b=(b=_.trys).length>0&&b[b.length-1])||T[0]!==6&&T[0]!==2)){_=0;continue}if(T[0]===3&&(!b||T[1]>b[0]&&T[1]<b[3])){_.label=T[1];break}if(T[0]===6&&_.label<b[1]){_.label=b[1],b=T;break}if(b&&_.label<b[2]){_.label=b[2],_.ops.push(T);break}b[2]&&_.ops.pop(),_.trys.pop();continue}T=v.call(d,_)}catch(A){T=[6,A],w=0}finally{y=b=0}if(5&T[0])throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}([P,R])}}},o=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(t(8917)),s=t(9691),u=new(function(){function d(){}return d.prototype.eagerResultTransformer=function(){return l},d.prototype.eager=function(){return l},d.prototype.mappedResultTransformer=function(v){return c(v)},d.prototype.mapped=function(v){return c(v)},d.prototype.first=function(){return f},d.prototype.summary=function(){return h},d}());function l(d){return n(this,void 0,void 0,function(){var v,y,w,b;return i(this,function(p){switch(p.label){case 0:return[4,d];case 1:return v=p.sent(),y=v.summary,w=v.records,[4,d.keys()];case 2:return b=p.sent(),[2,new a.default(b,w,y)]}})})}function c(d){var v=this;if(d==null||d.collect==null&&d.map==null)throw(0,s.newError)("Requires a map or/and a collect functions.");return function(y){return n(v,void 0,void 0,function(){return i(this,function(w){switch(w.label){case 0:return[4,new Promise(function(b,p){var _={records:[],keys:[]};y.subscribe({onKeys:function(O){_.keys=O},onNext:function(O){if(d.map!=null){var P=d.map(O);P!==void 0&&_.records.push(P)}else _.records.push(O)},onCompleted:function(O){if(d.collect!=null)b(d.collect(_.records,O,_.keys));else{var P={records:_.records,summary:O,keys:_.keys};b(P)}},onError:function(O){p(O)}})})];case 1:return[2,w.sent()]}})})}}function f(d){return n(this,void 0,void 0,function(){var v,y,w,b;return i(this,function(p){switch(p.label){case 0:return[4,(v=d[Symbol.asyncIterator]()).next()];case 1:y=p.sent(),w=y.value,b=y.done,p.label=2;case 2:return p.trys.push([2,,3,6]),b===!0?[2,void 0]:[2,w];case 3:return v.return==null?[3,5]:[4,v.return()];case 4:p.sent(),p.label=5;case 5:return[7];case 6:return[2]}})})}function h(d){return n(this,void 0,void 0,function(){return i(this,function(v){switch(v.label){case 0:return[4,d.summary()];case 1:return[2,v.sent()]}})})}Object.freeze(u),e.default=u},9512:function(r,e,t){var n,i=this&&this.__awaiter||function(y,w,b,p){return new(b||(b=Promise))(function(_,O){function P(A){try{T(p.next(A))}catch(M){O(M)}}function R(A){try{T(p.throw(A))}catch(M){O(M)}}function T(A){var M;A.done?_(A.value):(M=A.value,M instanceof b?M:new b(function(N){N(M)})).then(P,R)}T((p=p.apply(y,w||[])).next())})},o=this&&this.__generator||function(y,w){var b,p,_,O,P={label:0,sent:function(){if(1&_[0])throw _[1];return _[1]},trys:[],ops:[]};return O={next:R(0),throw:R(1),return:R(2)},typeof Symbol=="function"&&(O[Symbol.iterator]=function(){return this}),O;function R(T){return function(A){return function(M){if(b)throw new TypeError("Generator is already executing.");for(;O&&(O=0,M[0]&&(P=0)),P;)try{if(b=1,p&&(_=2&M[0]?p.return:M[0]?p.throw||((_=p.return)&&_.call(p),0):p.next)&&!(_=_.call(p,M[1])).done)return _;switch(p=0,_&&(M=[2&M[0],_.value]),M[0]){case 0:case 1:_=M;break;case 4:return P.label++,{value:M[1],done:!1};case 5:P.label++,p=M[1],M=[0];continue;case 7:M=P.ops.pop(),P.trys.pop();continue;default:if(!((_=(_=P.trys).length>0&&_[_.length-1])||M[0]!==6&&M[0]!==2)){P=0;continue}if(M[0]===3&&(!_||M[1]>_[0]&&M[1]<_[3])){P.label=M[1];break}if(M[0]===6&&P.label<_[1]){P.label=_[1],_=M;break}if(_&&P.label<_[2]){P.label=_[2],P.ops.push(M);break}_[2]&&P.ops.pop(),P.trys.pop();continue}M=w.call(y,P)}catch(N){M=[6,N],p=0}finally{b=_=0}if(5&M[0])throw M[1];return{value:M[0]?M[1]:void 0,done:!0}}([T,A])}}},a=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(e,"__esModule",{value:!0});var s=a(t(6033)),u=t(6995),l=t(9691),c=u.connectionHolder.EMPTY_CONNECTION_HOLDER,f=function(y){""+y},h=function(y){},d=function(y){},v=function(){function y(w,b,p,_,O){var P;O===void 0&&(O={high:Number.MAX_VALUE,low:Number.MAX_VALUE}),this[n]="Result",this._stack=(P=new Error("")).stack!=null?P.stack.replace(/^Error(\n\r)*/,""):null,this._streamObserverPromise=w,this._p=null,this._query=b,this._parameters=p??{},this._connectionHolder=_??c,this._keys=null,this._summary=null,this._error=null,this._watermarks=O}return y.prototype.keys=function(){var w=this;return this._keys!==null?Promise.resolve(this._keys):this._error!==null?Promise.reject(this._error):new Promise(function(b,p){w._streamObserverPromise.then(function(_){return _.subscribe(w._decorateObserver({onKeys:function(O){return b(O)},onError:function(O){return p(O)}}))}).catch(p)})},y.prototype.summary=function(){var w=this;return this._summary!==null?Promise.resolve(this._summary):this._error!==null?Promise.reject(this._error):new Promise(function(b,p){w._streamObserverPromise.then(function(_){_.cancel(),_.subscribe(w._decorateObserver({onCompleted:function(O){return b(O)},onError:function(O){return p(O)}}))}).catch(p)})},y.prototype._getOrCreatePromise=function(){var w=this;return this._p==null&&(this._p=new Promise(function(b,p){var _=[],O={onNext:function(P){_.push(P)},onCompleted:function(P){b({records:_,summary:P})},onError:function(P){p(P)}};w.subscribe(O)})),this._p},y.prototype[Symbol.asyncIterator]=function(){var w=this;if(!this.isOpen()){var b=(0,l.newError)("Result is already consumed");return{next:function(){return Promise.reject(b)},peek:function(){return Promise.reject(b)}}}var p={paused:!0,firstRun:!0,finished:!1},_=function(){var R,T;if(p.streaming!=null){var A=(T=(R=p.queuedObserver)===null||R===void 0?void 0:R.size)!==null&&T!==void 0?T:0,M=A>=w._watermarks.high,N=A<=w._watermarks.low;M&&!p.paused?(p.paused=!0,p.streaming.pause()):(N&&p.paused||p.firstRun&&!M)&&(p.firstRun=!1,p.paused=!1,p.streaming.resume())}},O=function(){return i(w,void 0,void 0,function(){var R;return o(this,function(T){switch(T.label){case 0:return p.queuedObserver!==void 0?[3,2]:(p.queuedObserver=this._createQueuedResultObserver(_),R=p,[4,this._subscribe(p.queuedObserver,!0).catch(function(){})]);case 1:R.streaming=T.sent(),_(),T.label=2;case 2:return[2,p.queuedObserver]}})})},P=function(R){if(R===void 0)throw(0,l.newError)("InvalidState: Result stream finished without Summary",l.PROTOCOL_ERROR);return!0};return{next:function(){return i(w,void 0,void 0,function(){var R;return o(this,function(T){switch(T.label){case 0:return p.finished&&P(p.summary)?[2,{done:!0,value:p.summary}]:[4,O()];case 1:return[4,T.sent().dequeue()];case 2:return(R=T.sent()).done===!0&&(p.finished=R.done,p.summary=R.value),[2,R]}})})},return:function(R){return i(w,void 0,void 0,function(){var T,A;return o(this,function(M){switch(M.label){case 0:return p.finished&&P(p.summary)?[2,{done:!0,value:R??p.summary}]:((A=p.streaming)===null||A===void 0||A.cancel(),[4,O()]);case 1:return[4,M.sent().dequeueUntilDone()];case 2:return T=M.sent(),p.finished=!0,T.value=R??T.value,p.summary=T.value,[2,T]}})})},peek:function(){return i(w,void 0,void 0,function(){return o(this,function(R){switch(R.label){case 0:return p.finished&&P(p.summary)?[2,{done:!0,value:p.summary}]:[4,O()];case 1:return[4,R.sent().head()];case 2:return[2,R.sent()]}})})}}},y.prototype.then=function(w,b){return this._getOrCreatePromise().then(w,b)},y.prototype.catch=function(w){return this._getOrCreatePromise().catch(w)},y.prototype.finally=function(w){return this._getOrCreatePromise().finally(w)},y.prototype.subscribe=function(w){this._subscribe(w).catch(function(){})},y.prototype.isOpen=function(){return this._summary===null&&this._error===null},y.prototype._subscribe=function(w,b){b===void 0&&(b=!1);var p=this._decorateObserver(w);return this._streamObserverPromise.then(function(_){return b&&_.pause(),_.subscribe(p),_}).catch(function(_){return p.onError!=null&&p.onError(_),Promise.reject(_)})},y.prototype._decorateObserver=function(w){var b,p,_,O=this,P=(b=w.onCompleted)!==null&&b!==void 0?b:h,R=(p=w.onError)!==null&&p!==void 0?p:f,T=(_=w.onKeys)!==null&&_!==void 0?_:d;return{onNext:w.onNext!=null?w.onNext.bind(w):void 0,onKeys:function(A){return O._keys=A,T.call(w,A)},onCompleted:function(A){O._releaseConnectionAndGetSummary(A).then(function(M){return O._summary!==null?P.call(w,O._summary):(O._summary=M,P.call(w,M))}).catch(R)},onError:function(A){O._connectionHolder.releaseConnection().then(function(){(function(M,N){N!=null&&(M.stack=M.toString()+`
`+N)})(A,O._stack),O._error=A,R.call(w,A)}).catch(R)}}},y.prototype._cancel=function(){this._summary===null&&this._error===null&&this._streamObserverPromise.then(function(w){return w.cancel()}).catch(function(){})},y.prototype._releaseConnectionAndGetSummary=function(w){var b=u.util.validateQueryAndParameters(this._query,this._parameters,{skipAsserts:!0}),p=b.validatedQuery,_=b.params,O=this._connectionHolder;return O.getConnection().then(function(P){return O.releaseConnection().then(function(){return P==null?void 0:P.getProtocolVersion()})},function(P){}).then(function(P){return new s.default(p,_,w,P)})},y.prototype._createQueuedResultObserver=function(w){var b=this;function p(){var A={};return A.promise=new Promise(function(M,N){A.resolve=M,A.reject=N}),A}function _(A){return A instanceof Error}function O(){var A;return i(this,void 0,void 0,function(){var M;return o(this,function(N){switch(N.label){case 0:if(P.length>0){if(M=(A=P.shift())!==null&&A!==void 0?A:(0,l.newError)("Unexpected empty buffer",l.PROTOCOL_ERROR),w(),_(M))throw M;return[2,M]}return R.resolvable=p(),[4,R.resolvable.promise];case 1:return[2,N.sent()]}})})}var P=[],R={resolvable:null},T={onNext:function(A){T._push({done:!1,value:A})},onCompleted:function(A){T._push({done:!0,value:A})},onError:function(A){T._push(A)},_push:function(A){if(R.resolvable!==null){var M=R.resolvable;R.resolvable=null,_(A)?M.reject(A):M.resolve(A)}else P.push(A),w()},dequeue:O,dequeueUntilDone:function(){return i(b,void 0,void 0,function(){var A;return o(this,function(M){switch(M.label){case 0:return[4,O()];case 1:return(A=M.sent()).done===!0?[2,A]:[3,0];case 2:return[2]}})})},head:function(){return i(b,void 0,void 0,function(){var A,M;return o(this,function(N){switch(N.label){case 0:if(P.length>0){if(_(A=P[0]))throw A;return[2,A]}R.resolvable=p(),N.label=1;case 1:return N.trys.push([1,3,4,5]),[4,R.resolvable.promise];case 2:return A=N.sent(),P.unshift(A),[2,A];case 3:throw M=N.sent(),P.unshift(M),M;case 4:return w(),[7];case 5:return[2]}})})},get size(){return P.length}};return T},y}();n=Symbol.toStringTag,e.default=v},5481:function(r,e,t){var n=this&&this.__awaiter||function(O,P,R,T){return new(R||(R=Promise))(function(A,M){function N(q){try{B(T.next(q))}catch(W){M(W)}}function j(q){try{B(T.throw(q))}catch(W){M(W)}}function B(q){var W;q.done?A(q.value):(W=q.value,W instanceof R?W:new R(function(J){J(W)})).then(N,j)}B((T=T.apply(O,P||[])).next())})},i=this&&this.__generator||function(O,P){var R,T,A,M,N={label:0,sent:function(){if(1&A[0])throw A[1];return A[1]},trys:[],ops:[]};return M={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(M[Symbol.iterator]=function(){return this}),M;function j(B){return function(q){return function(W){if(R)throw new TypeError("Generator is already executing.");for(;M&&(M=0,W[0]&&(N=0)),N;)try{if(R=1,T&&(A=2&W[0]?T.return:W[0]?T.throw||((A=T.return)&&A.call(T),0):T.next)&&!(A=A.call(T,W[1])).done)return A;switch(T=0,A&&(W=[2&W[0],A.value]),W[0]){case 0:case 1:A=W;break;case 4:return N.label++,{value:W[1],done:!1};case 5:N.label++,T=W[1],W=[0];continue;case 7:W=N.ops.pop(),N.trys.pop();continue;default:if(!((A=(A=N.trys).length>0&&A[A.length-1])||W[0]!==6&&W[0]!==2)){N=0;continue}if(W[0]===3&&(!A||W[1]>A[0]&&W[1]<A[3])){N.label=W[1];break}if(W[0]===6&&N.label<A[1]){N.label=A[1],A=W;break}if(A&&N.label<A[2]){N.label=A[2],N.ops.push(W);break}A[2]&&N.ops.pop(),N.trys.pop();continue}W=P.call(O,N)}catch(J){W=[6,J],T=0}finally{R=A=0}if(5&W[0])throw W[1];return{value:W[0]?W[1]:void 0,done:!0}}([B,q])}}},o=this&&this.__read||function(O,P){var R=typeof Symbol=="function"&&O[Symbol.iterator];if(!R)return O;var T,A,M=R.call(O),N=[];try{for(;(P===void 0||P-- >0)&&!(T=M.next()).done;)N.push(T.value)}catch(j){A={error:j}}finally{try{T&&!T.done&&(R=M.return)&&R.call(M)}finally{if(A)throw A.error}}return N},a=this&&this.__spreadArray||function(O,P,R){if(R||arguments.length===2)for(var T,A=0,M=P.length;A<M;A++)!T&&A in P||(T||(T=Array.prototype.slice.call(P,0,A)),T[A]=P[A]);return O.concat(T||Array.prototype.slice.call(P))},s=this&&this.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(e,"__esModule",{value:!0});var u=t(2696),l=t(6587),c=t(326),f=t(9691),h=s(t(9512)),d=t(3618),v=t(6189),y=t(9730),w=t(754),b=s(t(4569)),p=s(t(5909)),_=function(){function O(P){var R=P.mode,T=P.connectionProvider,A=P.bookmarks,M=P.database,N=P.config,j=P.reactive,B=P.fetchSize,q=P.impersonatedUser,W=P.bookmarkManager,J=P.notificationFilter,te=P.auth,re=P.log;this._mode=R,this._database=M,this._reactive=j,this._fetchSize=B,this._onDatabaseNameResolved=this._onDatabaseNameResolved.bind(this),this._getConnectionAcquistionBookmarks=this._getConnectionAcquistionBookmarks.bind(this),this._readConnectionHolder=new d.ConnectionHolder({mode:c.ACCESS_MODE_READ,auth:te,database:M,bookmarks:A,connectionProvider:T,impersonatedUser:q,onDatabaseNameResolved:this._onDatabaseNameResolved,getConnectionAcquistionBookmarks:this._getConnectionAcquistionBookmarks,log:re}),this._writeConnectionHolder=new d.ConnectionHolder({mode:c.ACCESS_MODE_WRITE,auth:te,database:M,bookmarks:A,connectionProvider:T,impersonatedUser:q,onDatabaseNameResolved:this._onDatabaseNameResolved,getConnectionAcquistionBookmarks:this._getConnectionAcquistionBookmarks,log:re}),this._open=!0,this._hasTx=!1,this._impersonatedUser=q,this._lastBookmarks=A??y.Bookmarks.empty(),this._configuredBookmarks=this._lastBookmarks,this._transactionExecutor=function(fe){var he,se=(he=fe==null?void 0:fe.maxTransactionRetryTime)!==null&&he!==void 0?he:null;return new v.TransactionExecutor(se)}(N),this._databaseNameResolved=this._database!=="";var ee=this._calculateWatermaks();this._lowRecordWatermark=ee.low,this._highRecordWatermark=ee.high,this._results=[],this._bookmarkManager=W,this._notificationFilter=J,this._log=re}return O.prototype.run=function(P,R,T){var A=this,M=(0,l.validateQueryAndParameters)(P,R),N=M.validatedQuery,j=M.params,B=T!=null?new w.TxConfig(T,this._log):w.TxConfig.empty(),q=this._run(N,j,function(W){return n(A,void 0,void 0,function(){var J,te=this;return i(this,function(re){switch(re.label){case 0:return[4,this._bookmarks()];case 1:return J=re.sent(),this._assertSessionIsOpen(),[2,W.run(N,j,{bookmarks:J,txConfig:B,mode:this._mode,database:this._database,apiTelemetryConfig:{api:c.TELEMETRY_APIS.AUTO_COMMIT_TRANSACTION},impersonatedUser:this._impersonatedUser,afterComplete:function(ee){return te._onCompleteCallback(ee,J)},reactive:this._reactive,fetchSize:this._fetchSize,lowRecordWatermark:this._lowRecordWatermark,highRecordWatermark:this._highRecordWatermark,notificationFilter:this._notificationFilter})]}})})});return this._results.push(q),q},O.prototype._run=function(P,R,T){var A=this._acquireAndConsumeConnection(T),M=A.connectionHolder,N=A.resultPromise.catch(function(B){return Promise.resolve(new u.FailedObserver({error:B}))}),j={high:this._highRecordWatermark,low:this._lowRecordWatermark};return new h.default(N,P,R,M,j)},O.prototype._acquireConnection=function(P){var R=this,T=this._acquireAndConsumeConnection(P),A=T.connectionHolder;return T.resultPromise.then(function(M){return n(R,void 0,void 0,function(){return i(this,function(N){switch(N.label){case 0:return[4,A.releaseConnection()];case 1:return N.sent(),[2,M]}})})})},O.prototype._acquireAndConsumeConnection=function(P){var R,T=this._connectionHolderWithMode(this._mode);return R=this._open?!this._hasTx&&T.initializeConnection()?T.getConnection().then(function(A){return P(A)}):Promise.reject((0,f.newError)("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")):Promise.reject((0,f.newError)("Cannot run query in a closed session.")),{connectionHolder:T,resultPromise:R}},O.prototype.beginTransaction=function(P){var R=P,T=w.TxConfig.empty();return R!=null&&(T=new w.TxConfig(R,this._log)),this._beginTransaction(this._mode,T,{api:c.TELEMETRY_APIS.UNMANAGED_TRANSACTION})},O.prototype._beginTransaction=function(P,R,T){var A=this;if(!this._open)throw(0,f.newError)("Cannot begin a transaction on a closed session.");if(this._hasTx)throw(0,f.newError)("You cannot begin a transaction on a session with an open transaction; either run from within the transaction or use a different session.");var M=O._validateSessionMode(P),N=this._connectionHolderWithMode(M);N.initializeConnection(),this._hasTx=!0;var j=new b.default({connectionHolder:N,impersonatedUser:this._impersonatedUser,onClose:this._transactionClosed.bind(this),onBookmarks:function(B,q,W){return A._updateBookmarks(B,q,W)},onConnection:this._assertSessionIsOpen.bind(this),reactive:this._reactive,fetchSize:this._fetchSize,lowRecordWatermark:this._lowRecordWatermark,highRecordWatermark:this._highRecordWatermark,notificationFilter:this._notificationFilter,apiTelemetryConfig:T});return j._begin(function(){return A._bookmarks()},R),j},O.prototype._assertSessionIsOpen=function(){if(!this._open)throw(0,f.newError)("You cannot run more transactions on a closed session.")},O.prototype._transactionClosed=function(){this._hasTx=!1},O.prototype.lastBookmark=function(){return this.lastBookmarks()},O.prototype.lastBookmarks=function(){return this._lastBookmarks.values()},O.prototype._bookmarks=function(){var P;return n(this,void 0,void 0,function(){var R;return i(this,function(T){switch(T.label){case 0:return[4,(P=this._bookmarkManager)===null||P===void 0?void 0:P.getBookmarks()];case 1:return(R=T.sent())===void 0?[2,this._lastBookmarks]:[2,new y.Bookmarks(a(a([],o(R),!1),o(this._configuredBookmarks),!1))]}})})},O.prototype.readTransaction=function(P,R){var T=new w.TxConfig(R,this._log);return this._runTransaction(c.ACCESS_MODE_READ,T,P)},O.prototype.writeTransaction=function(P,R){var T=new w.TxConfig(R,this._log);return this._runTransaction(c.ACCESS_MODE_WRITE,T,P)},O.prototype._runTransaction=function(P,R,T){var A=this;return this._transactionExecutor.execute(function(M){return A._beginTransaction(P,R,M)},T)},O.prototype.executeRead=function(P,R){var T=new w.TxConfig(R,this._log);return this._executeInTransaction(c.ACCESS_MODE_READ,T,P)},O.prototype.executeWrite=function(P,R){var T=new w.TxConfig(R,this._log);return this._executeInTransaction(c.ACCESS_MODE_WRITE,T,P)},O.prototype._executeInTransaction=function(P,R,T){var A=this;return this._transactionExecutor.execute(function(M){return A._beginTransaction(P,R,M)},T,p.default.fromTransaction)},O.prototype._onDatabaseNameResolved=function(P){if(!this._databaseNameResolved){var R=P??"";this._database=R,this._readConnectionHolder.setDatabase(R),this._writeConnectionHolder.setDatabase(R),this._databaseNameResolved=!0}},O.prototype._getConnectionAcquistionBookmarks=function(){var P;return n(this,void 0,void 0,function(){var R;return i(this,function(T){switch(T.label){case 0:return[4,(P=this._bookmarkManager)===null||P===void 0?void 0:P.getBookmarks()];case 1:return(R=T.sent())===void 0?[2,this._lastBookmarks]:[2,new y.Bookmarks(a(a([],o(this._configuredBookmarks),!1),o(R),!1))]}})})},O.prototype._updateBookmarks=function(P,R,T){var A,M,N;P==null||P.isEmpty()||((A=this._bookmarkManager)===null||A===void 0||A.updateBookmarks((M=R==null?void 0:R.values())!==null&&M!==void 0?M:[],(N=P==null?void 0:P.values())!==null&&N!==void 0?N:[]).catch(function(){}),this._lastBookmarks=P,this._configuredBookmarks=y.Bookmarks.empty())},O.prototype.close=function(){return n(this,void 0,void 0,function(){return i(this,function(P){switch(P.label){case 0:return this._open?(this._open=!1,this._results.forEach(function(R){return R._cancel()}),this._transactionExecutor.close(),[4,this._readConnectionHolder.close(this._hasTx)]):[3,3];case 1:return P.sent(),[4,this._writeConnectionHolder.close(this._hasTx)];case 2:P.sent(),P.label=3;case 3:return[2]}})})},O.prototype[Symbol.asyncDispose]=function(){return this.close()},O.prototype._connectionHolderWithMode=function(P){if(P===c.ACCESS_MODE_READ)return this._readConnectionHolder;if(P===c.ACCESS_MODE_WRITE)return this._writeConnectionHolder;throw(0,f.newError)("Unknown access mode: "+P)},O.prototype._onCompleteCallback=function(P,R){this._updateBookmarks(new y.Bookmarks(P.bookmark),R,P.db)},O.prototype._calculateWatermaks=function(){return this._fetchSize===c.FETCH_ALL?{low:Number.MAX_VALUE,high:Number.MAX_VALUE}:{low:.3*this._fetchSize,high:.7*this._fetchSize}},O.prototype._configureTransactionExecutor=function(P,R){this._transactionExecutor.pipelineBegin=P,this._transactionExecutor.telemetryApi=R},O._validateSessionMode=function(P){var R=P??c.ACCESS_MODE_WRITE;if(R!==c.ACCESS_MODE_READ&&R!==c.ACCESS_MODE_WRITE)throw(0,f.newError)("Illegal session mode "+R);return R},O}();e.default=_},7093:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isPoint=e.Point=void 0;var n=t(6587),i="__isPoint__",o=function(){function s(u,l,c,f){this.srid=(0,n.assertNumberOrInteger)(u,"SRID"),this.x=(0,n.assertNumber)(l,"X coordinate"),this.y=(0,n.assertNumber)(c,"Y coordinate"),this.z=f==null?f:(0,n.assertNumber)(f,"Z coordinate"),Object.freeze(this)}return s.prototype.toString=function(){return this.z==null||isNaN(this.z)?"Point{srid=".concat(a(this.srid),", x=").concat(a(this.x),", y=").concat(a(this.y),"}"):"Point{srid=".concat(a(this.srid),", x=").concat(a(this.x),", y=").concat(a(this.y),", z=").concat(a(this.z),"}")},s}();function a(s){return Number.isInteger(s)?s.toString()+".0":s.toString()}e.Point=o,Object.defineProperty(o.prototype,i,{value:!0,enumerable:!1,configurable:!1,writable:!1}),e.isPoint=function(s){return s!=null&&s[i]===!0}},5459:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(j,B,q,W){W===void 0&&(W=q);var J=Object.getOwnPropertyDescriptor(B,q);J&&!("get"in J?!B.__esModule:J.writable||J.configurable)||(J={enumerable:!0,get:function(){return B[q]}}),Object.defineProperty(j,W,J)}:function(j,B,q,W){W===void 0&&(W=q),j[W]=B[q]}),i=this&&this.__setModuleDefault||(Object.create?function(j,B){Object.defineProperty(j,"default",{enumerable:!0,value:B})}:function(j,B){j.default=B}),o=this&&this.__importStar||function(j){if(j&&j.__esModule)return j;var B={};if(j!=null)for(var q in j)q!=="default"&&Object.prototype.hasOwnProperty.call(j,q)&&n(B,j,q);return i(B,j),B},a=this&&this.__read||function(j,B){var q=typeof Symbol=="function"&&j[Symbol.iterator];if(!q)return j;var W,J,te=q.call(j),re=[];try{for(;(B===void 0||B-- >0)&&!(W=te.next()).done;)re.push(W.value)}catch(ee){J={error:ee}}finally{try{W&&!W.done&&(q=te.return)&&q.call(te)}finally{if(J)throw J.error}}return re};Object.defineProperty(e,"__esModule",{value:!0}),e.isDateTime=e.DateTime=e.isLocalDateTime=e.LocalDateTime=e.isDate=e.Date=e.isTime=e.Time=e.isLocalTime=e.LocalTime=e.isDuration=e.Duration=void 0;var s=o(t(5022)),u=t(6587),l=t(9691),c=o(t(3371)),f={value:!0,enumerable:!1,configurable:!1,writable:!1},h="__isDuration__",d="__isLocalTime__",v="__isTime__",y="__isDate__",w="__isLocalDateTime__",b="__isDateTime__",p=function(){function j(B,q,W,J){this.months=(0,u.assertNumberOrInteger)(B,"Months"),this.days=(0,u.assertNumberOrInteger)(q,"Days"),(0,u.assertNumberOrInteger)(W,"Seconds"),(0,u.assertNumberOrInteger)(J,"Nanoseconds"),this.seconds=s.normalizeSecondsForDuration(W,J),this.nanoseconds=s.normalizeNanosecondsForDuration(J),Object.freeze(this)}return j.prototype.toString=function(){return s.durationToIsoString(this.months,this.days,this.seconds,this.nanoseconds)},j}();e.Duration=p,Object.defineProperty(p.prototype,h,f),e.isDuration=function(j){return A(j,h)};var _=function(){function j(B,q,W,J){this.hour=s.assertValidHour(B),this.minute=s.assertValidMinute(q),this.second=s.assertValidSecond(W),this.nanosecond=s.assertValidNanosecond(J),Object.freeze(this)}return j.fromStandardDate=function(B,q){N(B,q);var W=s.totalNanoseconds(B,q);return new j(B.getHours(),B.getMinutes(),B.getSeconds(),W instanceof c.default?W.toInt():typeof W=="bigint"?(0,c.int)(W).toInt():W)},j.prototype.toString=function(){return s.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)},j}();e.LocalTime=_,Object.defineProperty(_.prototype,d,f),e.isLocalTime=function(j){return A(j,d)};var O=function(){function j(B,q,W,J,te){this.hour=s.assertValidHour(B),this.minute=s.assertValidMinute(q),this.second=s.assertValidSecond(W),this.nanosecond=s.assertValidNanosecond(J),this.timeZoneOffsetSeconds=(0,u.assertNumberOrInteger)(te,"Time zone offset in seconds"),Object.freeze(this)}return j.fromStandardDate=function(B,q){return N(B,q),new j(B.getHours(),B.getMinutes(),B.getSeconds(),(0,c.toNumber)(s.totalNanoseconds(B,q)),s.timeZoneOffsetInSeconds(B))},j.prototype.toString=function(){return s.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)+s.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds)},j}();e.Time=O,Object.defineProperty(O.prototype,v,f),e.isTime=function(j){return A(j,v)};var P=function(){function j(B,q,W){this.year=s.assertValidYear(B),this.month=s.assertValidMonth(q),this.day=s.assertValidDay(W),Object.freeze(this)}return j.fromStandardDate=function(B){return N(B),new j(B.getFullYear(),B.getMonth()+1,B.getDate())},j.prototype.toStandardDate=function(){return s.isoStringToStandardDate(this.toString())},j.prototype.toString=function(){return s.dateToIsoString(this.year,this.month,this.day)},j}();e.Date=P,Object.defineProperty(P.prototype,y,f),e.isDate=function(j){return A(j,y)};var R=function(){function j(B,q,W,J,te,re,ee){this.year=s.assertValidYear(B),this.month=s.assertValidMonth(q),this.day=s.assertValidDay(W),this.hour=s.assertValidHour(J),this.minute=s.assertValidMinute(te),this.second=s.assertValidSecond(re),this.nanosecond=s.assertValidNanosecond(ee),Object.freeze(this)}return j.fromStandardDate=function(B,q){return N(B,q),new j(B.getFullYear(),B.getMonth()+1,B.getDate(),B.getHours(),B.getMinutes(),B.getSeconds(),(0,c.toNumber)(s.totalNanoseconds(B,q)))},j.prototype.toStandardDate=function(){return s.isoStringToStandardDate(this.toString())},j.prototype.toString=function(){return M(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)},j}();e.LocalDateTime=R,Object.defineProperty(R.prototype,w,f),e.isLocalDateTime=function(j){return A(j,w)};var T=function(){function j(B,q,W,J,te,re,ee,fe,he){this.year=s.assertValidYear(B),this.month=s.assertValidMonth(q),this.day=s.assertValidDay(W),this.hour=s.assertValidHour(J),this.minute=s.assertValidMinute(te),this.second=s.assertValidSecond(re),this.nanosecond=s.assertValidNanosecond(ee);var se=a(function(Le,Ie){var qe=Le!=null,Ge=Ie!=null&&Ie!=="";if(!qe&&!Ge)throw(0,l.newError)("Unable to create DateTime without either time zone offset or id. Please specify either of them. Given offset: ".concat(Le," and id: ").concat(Ie));var Me=[void 0,void 0];return qe&&((0,u.assertNumberOrInteger)(Le,"Time zone offset in seconds"),Me[0]=Le),Ge&&((0,u.assertString)(Ie,"Time zone ID"),s.assertValidZoneId("Time zone ID",Ie),Me[1]=Ie),Me}(fe,he),2),me=se[0],De=se[1];this.timeZoneOffsetSeconds=me,this.timeZoneId=De??void 0,Object.freeze(this)}return j.fromStandardDate=function(B,q){return N(B,q),new j(B.getFullYear(),B.getMonth()+1,B.getDate(),B.getHours(),B.getMinutes(),B.getSeconds(),(0,c.toNumber)(s.totalNanoseconds(B,q)),s.timeZoneOffsetInSeconds(B),null)},j.prototype.toStandardDate=function(){return s.toStandardDate(this._toUTC())},j.prototype.toString=function(){var B;return M(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)+(this.timeZoneOffsetSeconds!=null?s.timeZoneOffsetToIsoString((B=this.timeZoneOffsetSeconds)!==null&&B!==void 0?B:0):"")+(this.timeZoneId!=null?"[".concat(this.timeZoneId,"]"):"")},j.prototype._toUTC=function(){var B;if(this.timeZoneOffsetSeconds===void 0)throw new Error("Requires DateTime created with time zone offset");var q=s.localDateTimeToEpochSecond(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond).subtract((B=this.timeZoneOffsetSeconds)!==null&&B!==void 0?B:0);return(0,c.int)(q).multiply(1e3).add((0,c.int)(this.nanosecond).div(1e6)).toNumber()},j}();function A(j,B){return j!=null&&j[B]===!0}function M(j,B,q,W,J,te,re){return s.dateToIsoString(j,B,q)+"T"+s.timeToIsoString(W,J,te,re)}function N(j,B){(0,u.assertValidDate)(j,"Standard date"),B!=null&&(0,u.assertNumberOrInteger)(B,"Nanosecond")}e.DateTime=T,Object.defineProperty(T.prototype,b,f),e.isDateTime=function(j){return A(j,b)}},5909:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function n(i){var o=i.run;this._run=o}return n.fromTransaction=function(i){return new n({run:i.run.bind(i)})},n.prototype.run=function(i,o){return this._run(i,o)},n}();e.default=t},4569:function(r,e,t){var n,i,o=this&&this.__extends||(n=function(l,c){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(f[d]=h[d])},n(l,c)},function(l,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function f(){this.constructor=l}n(l,c),l.prototype=c===null?Object.create(c):(f.prototype=c.prototype,new f)}),a=this&&this.__assign||function(){return a=Object.assign||function(l){for(var c,f=1,h=arguments.length;f<h;f++)for(var d in c=arguments[f])Object.prototype.hasOwnProperty.call(c,d)&&(l[d]=c[d]);return l},a.apply(this,arguments)},s=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0});var u=function(l){function c(f){var h=f.connectionHolder,d=f.onClose,v=f.onBookmarks,y=f.onConnection,w=f.reactive,b=f.fetchSize,p=f.impersonatedUser,_=f.highRecordWatermark,O=f.lowRecordWatermark,P=f.notificationFilter,R=f.apiTelemetryConfig,T=l.call(this,{connectionHolder:h,onClose:d,onBookmarks:v,onConnection:y,reactive:w,fetchSize:b,impersonatedUser:p,highRecordWatermark:_,lowRecordWatermark:O,notificationFilter:P,apiTelemetryConfig:R})||this;return T[i]="TransactionPromise",T}return o(c,l),c.prototype.then=function(f,h){return this._getOrCreateBeginPromise().then(f,h)},c.prototype.catch=function(f){return this._getOrCreateBeginPromise().catch(f)},c.prototype.finally=function(f){return this._getOrCreateBeginPromise().finally(f)},c.prototype._getOrCreateBeginPromise=function(){var f=this;return this._beginPromise==null&&(this._beginPromise=new Promise(function(h,d){f._resolve=h,f._reject=d,f._beginError!=null&&d(f._beginError),f._beginMetadata!=null&&h(f._toTransaction())})),this._beginPromise},c.prototype._toTransaction=function(){return a(a({},this),{run:l.prototype.run.bind(this),commit:l.prototype.commit.bind(this),rollback:l.prototype.rollback.bind(this),close:l.prototype.close.bind(this),isOpen:l.prototype.isOpen.bind(this),_begin:this._begin.bind(this)})},c.prototype._begin=function(f,h){return l.prototype._begin.call(this,f,h,{onError:this._onBeginError.bind(this),onComplete:this._onBeginMetadata.bind(this)})},c.prototype._onBeginError=function(f){this._beginError=f,this._reject!=null&&this._reject(f)},c.prototype._onBeginMetadata=function(f){this._beginMetadata=f??{},this._resolve!=null&&this._resolve(this._toTransaction())},c}(s(t(9473)).default);i=Symbol.toStringTag,e.default=u},9473:function(r,e,t){var n=this&&this.__awaiter||function(b,p,_,O){return new(_||(_=Promise))(function(P,R){function T(N){try{M(O.next(N))}catch(j){R(j)}}function A(N){try{M(O.throw(N))}catch(j){R(j)}}function M(N){var j;N.done?P(N.value):(j=N.value,j instanceof _?j:new _(function(B){B(j)})).then(T,A)}M((O=O.apply(b,p||[])).next())})},i=this&&this.__generator||function(b,p){var _,O,P,R,T={label:0,sent:function(){if(1&P[0])throw P[1];return P[1]},trys:[],ops:[]};return R={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(R[Symbol.iterator]=function(){return this}),R;function A(M){return function(N){return function(j){if(_)throw new TypeError("Generator is already executing.");for(;R&&(R=0,j[0]&&(T=0)),T;)try{if(_=1,O&&(P=2&j[0]?O.return:j[0]?O.throw||((P=O.return)&&P.call(O),0):O.next)&&!(P=P.call(O,j[1])).done)return P;switch(O=0,P&&(j=[2&j[0],P.value]),j[0]){case 0:case 1:P=j;break;case 4:return T.label++,{value:j[1],done:!1};case 5:T.label++,O=j[1],j=[0];continue;case 7:j=T.ops.pop(),T.trys.pop();continue;default:if(!((P=(P=T.trys).length>0&&P[P.length-1])||j[0]!==6&&j[0]!==2)){T=0;continue}if(j[0]===3&&(!P||j[1]>P[0]&&j[1]<P[3])){T.label=j[1];break}if(j[0]===6&&T.label<P[1]){T.label=P[1],P=j;break}if(P&&T.label<P[2]){T.label=P[2],T.ops.push(j);break}P[2]&&T.ops.pop(),T.trys.pop();continue}j=p.call(b,T)}catch(B){j=[6,B],O=0}finally{_=P=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}([M,N])}}},o=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(e,"__esModule",{value:!0});var a=t(6587),s=t(3618),u=t(9730),l=t(754),c=t(2696),f=t(9691),h=o(t(9512)),d=function(){function b(p){var _=p.connectionHolder,O=p.onClose,P=p.onBookmarks,R=p.onConnection,T=p.reactive,A=p.fetchSize,M=p.impersonatedUser,N=p.highRecordWatermark,j=p.lowRecordWatermark,B=p.notificationFilter,q=p.apiTelemetryConfig,W=this;this._connectionHolder=_,this._reactive=T,this._state=v.ACTIVE,this._onClose=O,this._onBookmarks=P,this._onConnection=R,this._onError=this._onErrorCallback.bind(this),this._fetchSize=A,this._onComplete=this._onCompleteCallback.bind(this),this._results=[],this._impersonatedUser=M,this._lowRecordWatermak=j,this._highRecordWatermark=N,this._bookmarks=u.Bookmarks.empty(),this._notificationFilter=B,this._apiTelemetryConfig=q,this._acceptActive=function(){},this._activePromise=new Promise(function(J,te){W._acceptActive=J})}return b.prototype._begin=function(p,_,O){var P=this;this._connectionHolder.getConnection().then(function(R){return n(P,void 0,void 0,function(){var T,A=this;return i(this,function(M){switch(M.label){case 0:return this._onConnection(),R==null?[3,2]:(T=this,[4,p()]);case 1:return T._bookmarks=M.sent(),[2,R.beginTransaction({bookmarks:this._bookmarks,txConfig:_,mode:this._connectionHolder.mode(),database:this._connectionHolder.database(),impersonatedUser:this._impersonatedUser,notificationFilter:this._notificationFilter,apiTelemetryConfig:this._apiTelemetryConfig,beforeError:function(N){O!=null&&O.onError(N),A._onError(N).catch(function(){})},afterComplete:function(N){O!=null&&O.onComplete(N),A._onComplete(N)}})];case 2:throw(0,f.newError)("No connection available")}})})}).catch(function(R){O!=null&&O.onError(R),P._onError(R).catch(function(){})}).finally(function(){return P._acceptActive()})},b.prototype.run=function(p,_){var O=(0,a.validateQueryAndParameters)(p,_),P=O.validatedQuery,R=O.params,T=this._state.run(P,R,{connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,reactive:this._reactive,fetchSize:this._fetchSize,highRecordWatermark:this._highRecordWatermark,lowRecordWatermark:this._lowRecordWatermak,preparationJob:this._activePromise});return this._results.push(T),T},b.prototype.commit=function(){var p=this,_=this._state.commit({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:function(O){return p._onCompleteCallback(O,p._bookmarks)},onConnection:this._onConnection,pendingResults:this._results,preparationJob:this._activePromise});return this._state=_.state,this._onClose(),new Promise(function(O,P){_.result.subscribe({onCompleted:function(){return O()},onError:function(R){return P(R)}})})},b.prototype.rollback=function(){var p=this._state.rollback({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results,preparationJob:this._activePromise});return this._state=p.state,this._onClose(),new Promise(function(_,O){p.result.subscribe({onCompleted:function(){return _()},onError:function(P){return O(P)}})})},b.prototype.isOpen=function(){return this._state===v.ACTIVE},b.prototype.close=function(){return n(this,void 0,void 0,function(){return i(this,function(p){switch(p.label){case 0:return this.isOpen()?[4,this.rollback()]:[3,2];case 1:p.sent(),p.label=2;case 2:return[2]}})})},b.prototype[Symbol.asyncDispose]=function(){return this.close()},b.prototype._onErrorCallback=function(p){return this._state===v.FAILED?Promise.resolve(null):(this._state=v.FAILED,this._onClose(),this._results.forEach(function(_){_.isOpen()&&_._streamObserverPromise.then(function(O){return O.onError(p)}).catch(function(O){})}),this._connectionHolder.releaseConnection())},b.prototype._onCompleteCallback=function(p,_){this._onBookmarks(new u.Bookmarks(p==null?void 0:p.bookmark),_??u.Bookmarks.empty(),p==null?void 0:p.db)},b}(),v={ACTIVE:{commit:function(b){return{result:y(!0,b.connectionHolder,b.onError,b.onComplete,b.onConnection,b.pendingResults,b.preparationJob),state:v.SUCCEEDED}},rollback:function(b){return{result:y(!1,b.connectionHolder,b.onError,b.onComplete,b.onConnection,b.pendingResults,b.preparationJob),state:v.ROLLED_BACK}},run:function(b,p,_){var O=_.connectionHolder,P=_.onError,R=_.onComplete,T=_.onConnection,A=_.reactive,M=_.fetchSize,N=_.highRecordWatermark,j=_.lowRecordWatermark,B=_.preparationJob,q=B??Promise.resolve();return w(O.getConnection().then(function(W){return q.then(function(){return W})}).then(function(W){if(T(),W!=null)return W.run(b,p,{bookmarks:u.Bookmarks.empty(),txConfig:l.TxConfig.empty(),beforeError:P,afterComplete:R,reactive:A,fetchSize:M,highRecordWatermark:N,lowRecordWatermark:j});throw(0,f.newError)("No connection available")}).catch(function(W){return new c.FailedObserver({error:W,onError:P})}),b,p,O,N,j)}},FAILED:{commit:function(b){var p=b.connectionHolder,_=b.onError;return b.onComplete,{result:w(new c.FailedObserver({error:(0,f.newError)("Cannot commit this transaction, because it has been rolled back either because of an error or explicit termination."),onError:_}),"COMMIT",{},p,0,0),state:v.FAILED}},rollback:function(b){var p=b.connectionHolder;return b.onError,b.onComplete,{result:w(new c.CompletedObserver,"ROLLBACK",{},p,0,0),state:v.FAILED}},run:function(b,p,_){var O=_.connectionHolder,P=_.onError;return _.onComplete,w(new c.FailedObserver({error:(0,f.newError)("Cannot run query in this transaction, because it has been rolled back either because of an error or explicit termination."),onError:P}),b,p,O,0,0)}},SUCCEEDED:{commit:function(b){var p=b.connectionHolder,_=b.onError;return b.onComplete,{result:w(new c.FailedObserver({error:(0,f.newError)("Cannot commit this transaction, because it has already been committed."),onError:_}),"COMMIT",{},s.EMPTY_CONNECTION_HOLDER,0,0),state:v.SUCCEEDED,connectionHolder:p}},rollback:function(b){var p=b.connectionHolder,_=b.onError;return b.onComplete,{result:w(new c.FailedObserver({error:(0,f.newError)("Cannot rollback this transaction, because it has already been committed."),onError:_}),"ROLLBACK",{},s.EMPTY_CONNECTION_HOLDER,0,0),state:v.SUCCEEDED,connectionHolder:p}},run:function(b,p,_){var O=_.connectionHolder,P=_.onError;return _.onComplete,w(new c.FailedObserver({error:(0,f.newError)("Cannot run query in this transaction, because it has already been committed."),onError:P}),b,p,O,0,0)}},ROLLED_BACK:{commit:function(b){var p=b.connectionHolder,_=b.onError;return b.onComplete,{result:w(new c.FailedObserver({error:(0,f.newError)("Cannot commit this transaction, because it has already been rolled back."),onError:_}),"COMMIT",{},p,0,0),state:v.ROLLED_BACK}},rollback:function(b){var p=b.connectionHolder;return b.onError,b.onComplete,{result:w(new c.FailedObserver({error:(0,f.newError)("Cannot rollback this transaction, because it has already been rolled back.")}),"ROLLBACK",{},p,0,0),state:v.ROLLED_BACK}},run:function(b,p,_){var O=_.connectionHolder,P=_.onError;return _.onComplete,w(new c.FailedObserver({error:(0,f.newError)("Cannot run query in this transaction, because it has already been rolled back."),onError:P}),b,p,O,0,0)}}};function y(b,p,_,O,P,R,T){var A=T??Promise.resolve(),M=p.getConnection().then(function(N){return A.then(function(){return N})}).then(function(N){return P(),R.forEach(function(j){return j._cancel()}),Promise.all(R.map(function(j){return j.summary()})).then(function(j){if(N!=null)return b?N.commitTransaction({beforeError:_,afterComplete:O}):N.rollbackTransaction({beforeError:_,afterComplete:O});throw(0,f.newError)("No connection available")})}).catch(function(N){return new c.FailedObserver({error:N,onError:_})});return new h.default(M,b?"COMMIT":"ROLLBACK",{},p,{high:Number.MAX_VALUE,low:Number.MAX_VALUE})}function w(b,p,_,O,P,R){return O===void 0&&(O=s.EMPTY_CONNECTION_HOLDER),new h.default(Promise.resolve(b),p,_,new s.ReadOnlyConnectionHolder(O??s.EMPTY_CONNECTION_HOLDER),{low:R,high:P})}e.default=d},6872:function(r,e){var t,n=this&&this.__extends||(t=function(a,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},t(a,s)},function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}t(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)});Object.defineProperty(e,"__esModule",{value:!0}),e.InternalConfig=e.Config=void 0;var i=function(){this.encrypted=void 0,this.trust=void 0,this.trustedCertificates=[],this.maxConnectionPoolSize=100,this.maxConnectionLifetime=36e5,this.connectionAcquisitionTimeout=6e4,this.maxTransactionRetryTime=3e4,this.connectionLivenessCheckTimeout=void 0,this.connectionTimeout=3e4,this.disableLosslessIntegers=!1,this.useBigInt=!1,this.logging=void 0,this.resolver=void 0,this.notificationFilter=void 0,this.userAgent=void 0,this.telemetryDisabled=!1,this.clientCertificate=void 0};e.Config=i;var o=function(a){function s(){return a!==null&&a.apply(this,arguments)||this}return n(s,a),s}(i);e.InternalConfig=o},7857:function(r,e,t){var n,i=this&&this.__extends||(n=function(d,v){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,w){y.__proto__=w}||function(y,w){for(var b in w)Object.prototype.hasOwnProperty.call(w,b)&&(y[b]=w[b])},n(d,v)},function(d,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function y(){this.constructor=d}n(d,v),d.prototype=v===null?Object.create(v):(y.prototype=v.prototype,new y)}),o=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0}),e.WRITE=e.READ=e.Driver=void 0;var a=t(9305),s=o(t(3466)),u=a.internal.constants.FETCH_ALL,l=a.driver.READ,c=a.driver.WRITE;e.READ=l,e.WRITE=c;var f=function(d){function v(){return d!==null&&d.apply(this,arguments)||this}return i(v,d),v.prototype.rxSession=function(y){var w=y===void 0?{}:y,b=w.defaultAccessMode,p=b===void 0?c:b,_=w.bookmarks,O=w.database,P=O===void 0?"":O,R=w.fetchSize,T=w.impersonatedUser,A=w.bookmarkManager,M=w.notificationFilter,N=w.auth;return new s.default({session:this._newSession({defaultAccessMode:p,bookmarkOrBookmarks:_,database:P,impersonatedUser:T,auth:N,reactive:!1,fetchSize:h(R,this._config.fetchSize),bookmarkManager:A,notificationFilter:M,log:this._log}),config:this._config,log:this._log})},v}(a.Driver);function h(d,v){var y=parseInt(d,10);if(y>0||y===u)return y;if(y===0||y<0)throw new Error("The fetch size can only be a positive value or ".concat(u," for ALL. However fetchSize = ").concat(y));return v}e.Driver=f,e.default=f},1187:function(r,e,t){var n=this&&this.__awaiter||function(J,te,re,ee){return new(re||(re=Promise))(function(fe,he){function se(Le){try{De(ee.next(Le))}catch(Ie){he(Ie)}}function me(Le){try{De(ee.throw(Le))}catch(Ie){he(Ie)}}function De(Le){var Ie;Le.done?fe(Le.value):(Ie=Le.value,Ie instanceof re?Ie:new re(function(qe){qe(Ie)})).then(se,me)}De((ee=ee.apply(J,te||[])).next())})},i=this&&this.__generator||function(J,te){var re,ee,fe,he,se={label:0,sent:function(){if(1&fe[0])throw fe[1];return fe[1]},trys:[],ops:[]};return he={next:me(0),throw:me(1),return:me(2)},typeof Symbol=="function"&&(he[Symbol.iterator]=function(){return this}),he;function me(De){return function(Le){return function(Ie){if(re)throw new TypeError("Generator is already executing.");for(;he&&(he=0,Ie[0]&&(se=0)),se;)try{if(re=1,ee&&(fe=2&Ie[0]?ee.return:Ie[0]?ee.throw||((fe=ee.return)&&fe.call(ee),0):ee.next)&&!(fe=fe.call(ee,Ie[1])).done)return fe;switch(ee=0,fe&&(Ie=[2&Ie[0],fe.value]),Ie[0]){case 0:case 1:fe=Ie;break;case 4:return se.label++,{value:Ie[1],done:!1};case 5:se.label++,ee=Ie[1],Ie=[0];continue;case 7:Ie=se.ops.pop(),se.trys.pop();continue;default:if(!((fe=(fe=se.trys).length>0&&fe[fe.length-1])||Ie[0]!==6&&Ie[0]!==2)){se=0;continue}if(Ie[0]===3&&(!fe||Ie[1]>fe[0]&&Ie[1]<fe[3])){se.label=Ie[1];break}if(Ie[0]===6&&se.label<fe[1]){se.label=fe[1],fe=Ie;break}if(fe&&se.label<fe[2]){se.label=fe[2],se.ops.push(Ie);break}fe[2]&&se.ops.pop(),se.trys.pop();continue}Ie=te.call(J,se)}catch(qe){Ie=[6,qe],ee=0}finally{re=fe=0}if(5&Ie[0])throw Ie[1];return{value:Ie[0]?Ie[1]:void 0,done:!0}}([De,Le])}}},o=this&&this.__importDefault||function(J){return J&&J.__esModule?J:{default:J}};Object.defineProperty(e,"__esModule",{value:!0}),e.UnboundRelationship=e.Relationship=e.Node=e.Record=e.ServerInfo=e.GqlStatusObject=e.Notification=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.ResultSummary=e.RxResult=e.RxManagedTransaction=e.RxTransaction=e.RxSession=e.EagerResult=e.Result=e.ManagedTransaction=e.Transaction=e.Session=e.Driver=e.temporal=e.spatial=e.graph=e.error=e.routing=e.session=e.types=e.logging=e.auth=e.isRetryableError=e.Neo4jError=e.integer=e.isUnboundRelationship=e.isRelationship=e.isPathSegment=e.isPath=e.isNode=e.isDateTime=e.isLocalDateTime=e.isDate=e.isTime=e.isLocalTime=e.isDuration=e.isPoint=e.isInt=e.int=e.hasReachableServer=e.driver=e.authTokenManagers=void 0,e.clientCertificateProviders=e.notificationFilterMinimumSeverityLevel=e.notificationFilterDisabledClassification=e.notificationFilterDisabledCategory=e.notificationSeverityLevel=e.notificationClassification=e.notificationCategory=e.resultTransformers=e.bookmarkManager=e.DateTime=e.LocalDateTime=e.Date=e.Time=e.LocalTime=e.Duration=e.Integer=e.Point=e.PathSegment=e.Path=void 0;var a=t(7857);Object.defineProperty(e,"Driver",{enumerable:!0,get:function(){return a.Driver}});var s=o(t(3659)),u=t(9305);Object.defineProperty(e,"authTokenManagers",{enumerable:!0,get:function(){return u.authTokenManagers}}),Object.defineProperty(e,"Neo4jError",{enumerable:!0,get:function(){return u.Neo4jError}}),Object.defineProperty(e,"isRetryableError",{enumerable:!0,get:function(){return u.isRetryableError}}),Object.defineProperty(e,"error",{enumerable:!0,get:function(){return u.error}}),Object.defineProperty(e,"Integer",{enumerable:!0,get:function(){return u.Integer}}),Object.defineProperty(e,"int",{enumerable:!0,get:function(){return u.int}}),Object.defineProperty(e,"isInt",{enumerable:!0,get:function(){return u.isInt}}),Object.defineProperty(e,"isPoint",{enumerable:!0,get:function(){return u.isPoint}}),Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return u.Point}}),Object.defineProperty(e,"Date",{enumerable:!0,get:function(){return u.Date}}),Object.defineProperty(e,"DateTime",{enumerable:!0,get:function(){return u.DateTime}}),Object.defineProperty(e,"Duration",{enumerable:!0,get:function(){return u.Duration}}),Object.defineProperty(e,"isDate",{enumerable:!0,get:function(){return u.isDate}}),Object.defineProperty(e,"isDateTime",{enumerable:!0,get:function(){return u.isDateTime}}),Object.defineProperty(e,"isDuration",{enumerable:!0,get:function(){return u.isDuration}}),Object.defineProperty(e,"isLocalDateTime",{enumerable:!0,get:function(){return u.isLocalDateTime}}),Object.defineProperty(e,"isLocalTime",{enumerable:!0,get:function(){return u.isLocalTime}}),Object.defineProperty(e,"isNode",{enumerable:!0,get:function(){return u.isNode}}),Object.defineProperty(e,"isPath",{enumerable:!0,get:function(){return u.isPath}}),Object.defineProperty(e,"isPathSegment",{enumerable:!0,get:function(){return u.isPathSegment}}),Object.defineProperty(e,"isRelationship",{enumerable:!0,get:function(){return u.isRelationship}}),Object.defineProperty(e,"isTime",{enumerable:!0,get:function(){return u.isTime}}),Object.defineProperty(e,"isUnboundRelationship",{enumerable:!0,get:function(){return u.isUnboundRelationship}}),Object.defineProperty(e,"LocalDateTime",{enumerable:!0,get:function(){return u.LocalDateTime}}),Object.defineProperty(e,"LocalTime",{enumerable:!0,get:function(){return u.LocalTime}}),Object.defineProperty(e,"Time",{enumerable:!0,get:function(){return u.Time}}),Object.defineProperty(e,"Node",{enumerable:!0,get:function(){return u.Node}}),Object.defineProperty(e,"Path",{enumerable:!0,get:function(){return u.Path}}),Object.defineProperty(e,"PathSegment",{enumerable:!0,get:function(){return u.PathSegment}}),Object.defineProperty(e,"Relationship",{enumerable:!0,get:function(){return u.Relationship}}),Object.defineProperty(e,"UnboundRelationship",{enumerable:!0,get:function(){return u.UnboundRelationship}}),Object.defineProperty(e,"Record",{enumerable:!0,get:function(){return u.Record}}),Object.defineProperty(e,"ResultSummary",{enumerable:!0,get:function(){return u.ResultSummary}}),Object.defineProperty(e,"Plan",{enumerable:!0,get:function(){return u.Plan}}),Object.defineProperty(e,"ProfiledPlan",{enumerable:!0,get:function(){return u.ProfiledPlan}}),Object.defineProperty(e,"QueryStatistics",{enumerable:!0,get:function(){return u.QueryStatistics}}),Object.defineProperty(e,"Notification",{enumerable:!0,get:function(){return u.Notification}}),Object.defineProperty(e,"GqlStatusObject",{enumerable:!0,get:function(){return u.GqlStatusObject}}),Object.defineProperty(e,"ServerInfo",{enumerable:!0,get:function(){return u.ServerInfo}}),Object.defineProperty(e,"Result",{enumerable:!0,get:function(){return u.Result}}),Object.defineProperty(e,"EagerResult",{enumerable:!0,get:function(){return u.EagerResult}}),Object.defineProperty(e,"auth",{enumerable:!0,get:function(){return u.auth}}),Object.defineProperty(e,"Session",{enumerable:!0,get:function(){return u.Session}}),Object.defineProperty(e,"Transaction",{enumerable:!0,get:function(){return u.Transaction}}),Object.defineProperty(e,"ManagedTransaction",{enumerable:!0,get:function(){return u.ManagedTransaction}}),Object.defineProperty(e,"bookmarkManager",{enumerable:!0,get:function(){return u.bookmarkManager}}),Object.defineProperty(e,"routing",{enumerable:!0,get:function(){return u.routing}}),Object.defineProperty(e,"resultTransformers",{enumerable:!0,get:function(){return u.resultTransformers}}),Object.defineProperty(e,"notificationCategory",{enumerable:!0,get:function(){return u.notificationCategory}}),Object.defineProperty(e,"notificationClassification",{enumerable:!0,get:function(){return u.notificationClassification}}),Object.defineProperty(e,"notificationSeverityLevel",{enumerable:!0,get:function(){return u.notificationSeverityLevel}}),Object.defineProperty(e,"notificationFilterDisabledCategory",{enumerable:!0,get:function(){return u.notificationFilterDisabledCategory}}),Object.defineProperty(e,"notificationFilterDisabledClassification",{enumerable:!0,get:function(){return u.notificationFilterDisabledClassification}}),Object.defineProperty(e,"notificationFilterMinimumSeverityLevel",{enumerable:!0,get:function(){return u.notificationFilterMinimumSeverityLevel}}),Object.defineProperty(e,"clientCertificateProviders",{enumerable:!0,get:function(){return u.clientCertificateProviders}});var l=t(6672),c=o(t(3466));e.RxSession=c.default;var f=o(t(5742));e.RxTransaction=f.default;var h=o(t(1530));e.RxManagedTransaction=h.default;var d=o(t(3057));e.RxResult=d.default;var v=u.internal.util,y=v.ENCRYPTION_ON,w=v.assertString,b=v.isEmptyObjectOrNull,p=u.internal.serverAddress.ServerAddress,_=u.internal.urlUtil,O="neo4j-javascript/"+s.default;function P(J,te,re){re===void 0&&(re={}),w(J,"Bolt URL");var ee,fe=_.parseDatabaseUrl(J),he=!1,se=!1;switch(fe.scheme){case"bolt":break;case"bolt+s":se=!0,ee="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES";break;case"bolt+ssc":se=!0,ee="TRUST_ALL_CERTIFICATES";break;case"neo4j":he=!0;break;case"neo4j+s":se=!0,ee="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES",he=!0;break;case"neo4j+ssc":se=!0,ee="TRUST_ALL_CERTIFICATES",he=!0;break;default:throw new Error("Unknown scheme: ".concat(fe.scheme))}if(se){if("encrypted"in re||"trust"in re)throw new Error("Encryption/trust can only be configured either through URL or config, not both");re.encrypted=y,re.trust=ee,re.clientCertificate=(0,u.resolveCertificateProvider)(re.clientCertificate)}var me=function(Ie){if(typeof(qe=Ie)=="object"&&qe!=null&&"getToken"in qe&&"handleSecurityException"in qe&&typeof qe.getToken=="function"&&typeof qe.handleSecurityException=="function")return Ie;var qe,Ge=Ie;return(Ge=Ge||{}).scheme=Ge.scheme||"none",(0,u.staticAuthTokenManager)({authToken:Ge})}(te);re.userAgent=re.userAgent||O,re.boltAgent=u.internal.boltAgent.fromVersion(s.default);var De=p.fromUrl(fe.hostAndPort),Le={address:De,typename:he?"Routing":"Direct",routing:he};return new a.Driver(Le,re,function(){if(he)return function(Ie,qe,Ge,Me){return new l.RoutingConnectionProvider({id:Ie,config:qe,log:Ge,hostNameResolver:Me,authTokenManager:me,address:De,userAgent:qe.userAgent,boltAgent:qe.boltAgent,routingContext:fe.query})};if(!b(fe.query))throw new Error("Parameters are not supported with none routed scheme. Given URL: '".concat(J,"'"));return function(Ie,qe,Ge){return new l.DirectConnectionProvider({id:Ie,config:qe,log:Ge,authTokenManager:me,address:De,userAgent:qe.userAgent,boltAgent:qe.boltAgent})}}())}function R(J,te){return n(this,void 0,void 0,function(){var re;return i(this,function(ee){switch(ee.label){case 0:re=P(J,{scheme:"none",principal:"",credentials:""},te),ee.label=1;case 1:return ee.trys.push([1,,3,5]),[4,re.getNegotiatedProtocolVersion()];case 2:return ee.sent(),[2,!0];case 3:return[4,re.close()];case 4:return ee.sent(),[7];case 5:return[2]}})})}e.driver=P,e.hasReachableServer=R;var T={console:function(J){return{level:J,logger:function(te,re){return console.log("".concat(t.g.Date.now()," ").concat(te.toUpperCase()," ").concat(re))}}}};e.logging=T;var A={Node:u.Node,Relationship:u.Relationship,UnboundRelationship:u.UnboundRelationship,PathSegment:u.PathSegment,Path:u.Path,Result:u.Result,EagerResult:u.EagerResult,ResultSummary:u.ResultSummary,Record:u.Record,Point:u.Point,Date:u.Date,DateTime:u.DateTime,Duration:u.Duration,LocalDateTime:u.LocalDateTime,LocalTime:u.LocalTime,Time:u.Time,Integer:u.Integer};e.types=A;var M={READ:a.READ,WRITE:a.WRITE};e.session=M;var N={toNumber:u.toNumber,toString:u.toString,inSafeRange:u.inSafeRange};e.integer=N;var j={isPoint:u.isPoint};e.spatial=j;var B={isDuration:u.isDuration,isLocalTime:u.isLocalTime,isTime:u.isTime,isDate:u.isDate,isLocalDateTime:u.isLocalDateTime,isDateTime:u.isDateTime};e.temporal=B;var q={isNode:u.isNode,isPath:u.isPath,isPathSegment:u.isPathSegment,isRelationship:u.isRelationship,isUnboundRelationship:u.isUnboundRelationship};e.graph=q;var W={authTokenManagers:u.authTokenManagers,driver:P,hasReachableServer:R,int:u.int,isInt:u.isInt,isPoint:u.isPoint,isDuration:u.isDuration,isLocalTime:u.isLocalTime,isTime:u.isTime,isDate:u.isDate,isLocalDateTime:u.isLocalDateTime,isDateTime:u.isDateTime,isNode:u.isNode,isPath:u.isPath,isPathSegment:u.isPathSegment,isRelationship:u.isRelationship,isUnboundRelationship:u.isUnboundRelationship,integer:N,Neo4jError:u.Neo4jError,isRetryableError:u.isRetryableError,auth:u.auth,logging:T,types:A,session:M,routing:u.routing,error:u.error,graph:q,spatial:j,temporal:B,Driver:a.Driver,Session:u.Session,Transaction:u.Transaction,ManagedTransaction:u.ManagedTransaction,Result:u.Result,EagerResult:u.EagerResult,RxSession:c.default,RxTransaction:f.default,RxManagedTransaction:h.default,RxResult:d.default,ResultSummary:u.ResultSummary,Plan:u.Plan,ProfiledPlan:u.ProfiledPlan,QueryStatistics:u.QueryStatistics,Notification:u.Notification,GqlStatusObject:u.GqlStatusObject,ServerInfo:u.ServerInfo,Record:u.Record,Node:u.Node,Relationship:u.Relationship,UnboundRelationship:u.UnboundRelationship,Path:u.Path,PathSegment:u.PathSegment,Point:u.Point,Integer:u.Integer,Duration:u.Duration,LocalTime:u.LocalTime,Time:u.Time,Date:u.Date,LocalDateTime:u.LocalDateTime,DateTime:u.DateTime,bookmarkManager:u.bookmarkManager,resultTransformers:u.resultTransformers,notificationCategory:u.notificationCategory,notificationSeverityLevel:u.notificationSeverityLevel,notificationFilterDisabledCategory:u.notificationFilterDisabledCategory,notificationFilterMinimumSeverityLevel:u.notificationFilterMinimumSeverityLevel,clientCertificateProviders:u.clientCertificateProviders};e.default=W},9823:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=t(9305),i=t(8813),o=t(9419),a=(n.internal.logger.Logger,n.error.SERVICE_UNAVAILABLE),s=function(){function l(c){var f=c===void 0?{}:c,h=f.maxRetryTimeout,d=h===void 0?3e4:h,v=f.initialDelay,y=v===void 0?1e3:v,w=f.delayMultiplier,b=w===void 0?2:w,p=f.delayJitter,_=p===void 0?.2:p,O=f.logger,P=O===void 0?null:O;this._maxRetryTimeout=u(d,3e4),this._initialDelay=u(y,1e3),this._delayMultiplier=u(b,2),this._delayJitter=u(_,.2),this._logger=P}return l.prototype.retry=function(c){var f=this;return c.pipe((0,o.retryWhen)(function(h){var d=[],v=Date.now(),y=1,w=f._initialDelay;return h.pipe((0,o.mergeMap)(function(b){if(!(0,n.isRetriableError)(b))return(0,i.throwError)(function(){return b});if(d.push(b),y>=2&&Date.now()-v>=f._maxRetryTimeout){var p=(0,n.newError)("Failed after retried for ".concat(y," times in ").concat(f._maxRetryTimeout," ms. Make sure that your database is online and retry again."),a);return p.seenErrors=d,(0,i.throwError)(function(){return p})}var _=f._computeNextDelay(w);return w*=f._delayMultiplier,y++,f._logger&&f._logger.warn("Transaction failed and will be retried in ".concat(_)),(0,i.of)(1).pipe((0,o.delay)(_))}))}))},l.prototype._computeNextDelay=function(c){var f=c*this._delayJitter;return c-f+2*f*Math.random()},l}();function u(l,c){return l||l===0?l:c}e.default=s},3057:function(r,e,t){var n=this&&this.__awaiter||function(c,f,h,d){return new(h||(h=Promise))(function(v,y){function w(_){try{p(d.next(_))}catch(O){y(O)}}function b(_){try{p(d.throw(_))}catch(O){y(O)}}function p(_){var O;_.done?v(_.value):(O=_.value,O instanceof h?O:new h(function(P){P(O)})).then(w,b)}p((d=d.apply(c,f||[])).next())})},i=this&&this.__generator||function(c,f){var h,d,v,y,w={label:0,sent:function(){if(1&v[0])throw v[1];return v[1]},trys:[],ops:[]};return y={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function b(p){return function(_){return function(O){if(h)throw new TypeError("Generator is already executing.");for(;y&&(y=0,O[0]&&(w=0)),w;)try{if(h=1,d&&(v=2&O[0]?d.return:O[0]?d.throw||((v=d.return)&&v.call(d),0):d.next)&&!(v=v.call(d,O[1])).done)return v;switch(d=0,v&&(O=[2&O[0],v.value]),O[0]){case 0:case 1:v=O;break;case 4:return w.label++,{value:O[1],done:!1};case 5:w.label++,d=O[1],O=[0];continue;case 7:O=w.ops.pop(),w.trys.pop();continue;default:if(!((v=(v=w.trys).length>0&&v[v.length-1])||O[0]!==6&&O[0]!==2)){w=0;continue}if(O[0]===3&&(!v||O[1]>v[0]&&O[1]<v[3])){w.label=O[1];break}if(O[0]===6&&w.label<v[1]){w.label=v[1],v=O;break}if(v&&w.label<v[2]){w.label=v[2],w.ops.push(O);break}v[2]&&w.ops.pop(),w.trys.pop();continue}O=f.call(c,w)}catch(P){O=[6,P],d=0}finally{h=v=0}if(5&O[0])throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}([p,_])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=t(9305),a=t(8813),s=t(9419),u=function(){function c(f,h){var d=f.pipe((0,s.publishReplay)(1),(0,s.refCount)());this._result=d,this._keys=d.pipe((0,s.mergeMap)(function(v){return(0,a.from)(v.keys())}),(0,s.publishReplay)(1),(0,s.refCount)()),this._records=void 0,this._controls=new l,this._summary=new a.ReplaySubject,this._state=h||0}return c.prototype.keys=function(){return this._keys},c.prototype.records=function(){var f=this,h=this._result.pipe((0,s.mergeMap)(function(d){return new a.Observable(function(v){return f._startStreaming({result:d,recordsObserver:v})})}));return h.push=function(){return f._push()},h},c.prototype.consume=function(){var f=this;return this._result.pipe((0,s.mergeMap)(function(h){return new a.Observable(function(d){return f._startStreaming({result:h,summaryObserver:d})})}))},c.prototype.pause=function(){this._controls.pause()},c.prototype.resume=function(){return this._controls.resume()},c.prototype.push=function(){return this._controls.push()},c.prototype._startStreaming=function(f){var h=f===void 0?{}:f,d=h.result,v=h.recordsObserver,y=v===void 0?null:v,w=h.summaryObserver,b=w===void 0?null:w,p=[];return b&&p.push(this._summary.subscribe(b)),this._state<1?(this._state=1,this._setupRecordsStream(d),y?p.push(this._records.subscribe(y)):d._cancel(),p.push({unsubscribe:function(){d._cancel&&d._cancel()}})):y&&y.error((0,o.newError)("Streaming has already started/consumed with a previous records or summary subscription.")),function(){p.forEach(function(_){return _.unsubscribe()})}},c.prototype._toObservable=function(){var f=this;return new a.Observable(function(h){f._result.subscribe({complete:function(){return h.complete()},next:function(d){return h.next(new c(function(v){return new a.Observable(function(y){y.next(v),y.complete()})}(d)),f._state)},error:function(d){return h.error(d)}})})},c.prototype._setupRecordsStream=function(f){var h=this;return this._records||(this._records=function(d,v,y){var w=this;y===void 0&&(y=new l);var b=new a.Subject,p=function(O){return n(w,void 0,void 0,function(){var P,R,T,A;return i(this,function(M){switch(M.label){case 0:return M.trys.push([0,2,3,4]),y.pushing=!0,[4,O];case 1:return P=M.sent(),R=P.done,T=P.value,R?(b.complete(),v.complete()):(b.next(T),y.paused||p(d.next()).catch(function(){})),[3,4];case 2:return A=M.sent(),b.error(A),v.error(A),[3,4];case 3:return y.pushing=!1,[7];case 4:return[2]}})})};function _(O){return n(this,void 0,void 0,function(){return i(this,function(P){switch(P.label){case 0:return[4,p(d.next(O))];case 1:return P.sent(),[2]}})})}return y.pusher=_,_(),b}(f[Symbol.asyncIterator](),{complete:function(){return n(h,void 0,void 0,function(){var d,v;return i(this,function(y){switch(y.label){case 0:return this._state=2,v=(d=this._summary).next,[4,f.summary()];case 1:return v.apply(d,[y.sent()]),this._summary.complete(),[2]}})})},error:function(d){h._state=2,h._summary.error(d)}},this._controls)),this._records},c}();e.default=u;var l=function(){function c(f){f===void 0&&(f=function(){return n(h,void 0,void 0,function(){return i(this,function(d){return[2]})})});var h=this;this._paused=!1,this._pushing=!1,this._push=f}return c.prototype.pause=function(){this._paused=!0},Object.defineProperty(c.prototype,"paused",{get:function(){return this._paused},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"pushing",{get:function(){return this._pushing},set:function(f){this._pushing=f},enumerable:!1,configurable:!0}),c.prototype.resume=function(){return n(this,void 0,void 0,function(){var f;return i(this,function(h){switch(h.label){case 0:return f=this._paused,this._paused=!1,!f||this._pushing?[3,2]:[4,this._push()];case 1:h.sent(),h.label=2;case 2:return[2]}})})},c.prototype.push=function(){return n(this,void 0,void 0,function(){return i(this,function(f){switch(f.label){case 0:return this.pause(),[4,this._push()];case 1:return[2,f.sent()]}})})},Object.defineProperty(c.prototype,"pusher",{get:function(){return this._push},set:function(f){this._push=f},enumerable:!1,configurable:!0}),c}()},3466:function(r,e,t){var n=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(e,"__esModule",{value:!0});var i=t(8813),o=t(9419),a=n(t(3057)),s=t(9305),u=n(t(5742)),l=n(t(1530)),c=n(t(9823)),f=s.internal.constants,h=f.ACCESS_MODE_READ,d=f.ACCESS_MODE_WRITE,v=f.TELEMETRY_APIS,y=s.internal.txConfig.TxConfig,w=function(){function b(p){var _=p===void 0?{}:p,O=_.session,P=_.config,R=_.log;this._session=O,this._retryLogic=function(T){var A=T&&T.maxTransactionRetryTime?T.maxTransactionRetryTime:null;return new c.default({maxRetryTimeout:A})}(P),this._log=R}return b.prototype.run=function(p,_,O){var P=this;return new a.default(new i.Observable(function(R){try{R.next(P._session.run(p,_,O)),R.complete()}catch(T){R.error(T)}return function(){}}))},b.prototype.beginTransaction=function(p){return this._beginTransaction(this._session._mode,p,{api:v.UNMANAGED_TRANSACTION})},b.prototype.readTransaction=function(p,_){return this._runTransaction(h,p,_)},b.prototype.writeTransaction=function(p,_){return this._runTransaction(d,p,_)},b.prototype.executeRead=function(p,_){return this._executeInTransaction(h,p,_)},b.prototype.executeWrite=function(p,_){return this._executeInTransaction(d,p,_)},b.prototype._executeInTransaction=function(p,_,O){return this._runTransaction(p,_,O,function(P){return new l.default({run:P.run.bind(P)})})},b.prototype.close=function(){var p=this;return new i.Observable(function(_){p._session.close().then(function(){_.complete()}).catch(function(O){return _.error(O)})})},b.prototype[Symbol.asyncDispose]=function(){return this.close()},b.prototype.lastBookmark=function(){return this.lastBookmarks()},b.prototype.lastBookmarks=function(){return this._session.lastBookmarks()},b.prototype._beginTransaction=function(p,_,O){var P=this,R=y.empty();return _&&(R=new y(_,this._log)),new i.Observable(function(T){try{P._session._beginTransaction(p,R,O).then(function(A){T.next(new u.default(A)),T.complete()}).catch(function(A){return T.error(A)})}catch(A){T.error(A)}return function(){}})},b.prototype._runTransaction=function(p,_,O,P){var R=this;P===void 0&&(P=function(M){return M});var T=y.empty();O&&(T=new y(O));var A={apiTelemetryConfig:{api:v.MANAGED_TRANSACTION,onTelemetrySuccess:function(){A.apiTelemetryConfig=void 0}}};return this._retryLogic.retry((0,i.of)(1).pipe((0,o.mergeMap)(function(){return R._beginTransaction(p,T,A.apiTelemetryConfig)}),(0,o.mergeMap)(function(M){return(0,i.defer)(function(){try{return _(P(M))}catch(N){return(0,i.throwError)(function(){return N})}}).pipe((0,o.catchError)(function(N){return M.rollback().pipe((0,o.concatWith)((0,i.throwError)(function(){return N})))}),(0,o.concatWith)(M.commit()))})))},b}();e.default=w},1530:function(r,e,t){var n=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0}),n(t(3057)),n(t(5742));var i=function(){function o(a){var s=a.run;this._run=s}return o.fromTransaction=function(a){return new o({run:a.run.bind(a)})},o.prototype.run=function(a,s){return this._run(a,s)},o}();e.default=i},5742:function(r,e,t){var n=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0});var i=t(8813),o=n(t(3057)),a=(n(t(9305)),function(){function s(u){this._txc=u}return s.prototype.run=function(u,l){var c=this;return new o.default(new i.Observable(function(f){try{f.next(c._txc.run(u,l)),f.complete()}catch(h){f.error(h)}return function(){}}))},s.prototype.commit=function(){var u=this;return new i.Observable(function(l){u._txc.commit().then(function(){l.complete()}).catch(function(c){return l.error(c)})})},s.prototype.rollback=function(){var u=this;return new i.Observable(function(l){u._txc.rollback().then(function(){l.complete()}).catch(function(c){return l.error(c)})})},s.prototype.isOpen=function(){return this._txc.isOpen()},s.prototype.close=function(){var u=this;return new i.Observable(function(l){u._txc.close().then(function(){l.complete()}).catch(function(c){return l.error(c)})})},s}());e.default=a},3659:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default="5.26.0"},481:(r,e,t)=>{r.exports=t(137)},137:r=>{r.exports=class{constructor(e,t,n,i){let o;if(typeof e=="object"){let a=e;e=a.k_p,t=a.k_i,n=a.k_d,i=a.dt,o=a.i_max}this.k_p=typeof e=="number"?e:1,this.k_i=t||0,this.k_d=n||0,this.dt=i||0,this.i_max=o||0,this.sumError=0,this.lastError=0,this.lastTime=0,this.target=0}setTarget(e){this.target=e}update(e){this.currentValue=e;let t=this.dt;if(!t){let o=Date.now();t=this.lastTime===0?0:(o-this.lastTime)/1e3,this.lastTime=o}typeof t=="number"&&t!==0||(t=1);let n=this.target-this.currentValue;if(this.sumError=this.sumError+n*t,this.i_max>0&&Math.abs(this.sumError)>this.i_max){let o=this.sumError>0?1:-1;this.sumError=o*this.i_max}let i=(n-this.lastError)/t;return this.lastError=n,this.k_p*n+this.k_i*this.sumError+this.k_d*i}reset(){this.sumError=0,this.lastError=0,this.lastTime=0}}},1803:r=>{var e,t,n=document.attachEvent,i=!1;function o(_){var O=_.__resizeTriggers__,P=O.firstElementChild,R=O.lastElementChild,T=P.firstElementChild;R.scrollLeft=R.scrollWidth,R.scrollTop=R.scrollHeight,T.style.width=P.offsetWidth+1+"px",T.style.height=P.offsetHeight+1+"px",P.scrollLeft=P.scrollWidth,P.scrollTop=P.scrollHeight}function a(_){var O=this;o(this),this.__resizeRAF__&&u(this.__resizeRAF__),this.__resizeRAF__=s(function(){(function(P){return P.offsetWidth!=P.__resizeLast__.width||P.offsetHeight!=P.__resizeLast__.height})(O)&&(O.__resizeLast__.width=O.offsetWidth,O.__resizeLast__.height=O.offsetHeight,O.__resizeListeners__.forEach(function(P){P.call(O,_)}))})}if(!n){var s=(t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(_){return window.setTimeout(_,20)},function(_){return t(_)}),u=(e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout,function(_){return e(_)}),l=!1,c="",f="animationstart",h="Webkit Moz O ms".split(" "),d="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),v=document.createElement("fakeelement");if(v.style.animationName!==void 0&&(l=!0),l===!1){for(var y=0;y<h.length;y++)if(v.style[h[y]+"AnimationName"]!==void 0){c="-"+h[y].toLowerCase()+"-",f=d[y],l=!0;break}}var w="resizeanim",b="@"+c+"keyframes "+w+" { from { opacity: 0; } to { opacity: 0; } } ",p=c+"animation: 1ms "+w+"; "}r.exports=function(_,O){return n?_.attachEvent("onresize",O):(_.__resizeTriggers__||(getComputedStyle(_).position=="static"&&(_.style.position="relative"),function(){if(!i){var P=(b||"")+".resize-triggers { "+(p||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',R=document.head||document.getElementsByTagName("head")[0],T=document.createElement("style");T.type="text/css",T.styleSheet?T.styleSheet.cssText=P:T.appendChild(document.createTextNode(P)),R.appendChild(T),i=!0}}(),_.__resizeLast__={},_.__resizeListeners__=[],(_.__resizeTriggers__=document.createElement("div")).className="resize-triggers",_.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',_.appendChild(_.__resizeTriggers__),o(_),_.addEventListener("scroll",a,!0),f&&_.__resizeTriggers__.addEventListener(f,function(P){P.animationName==w&&o(_)})),_.__resizeListeners__.push(O)),function(){n?_.detachEvent("onresize",O):(_.__resizeListeners__.splice(_.__resizeListeners__.indexOf(O),1),_.__resizeListeners__.length||(_.removeEventListener("scroll",a),_.__resizeTriggers__=!_.removeChild(_.__resizeTriggers__)))}}},8813:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(Zn,Fa,Ba,pa){pa===void 0&&(pa=Ba),Object.defineProperty(Zn,pa,{enumerable:!0,get:function(){return Fa[Ba]}})}:function(Zn,Fa,Ba,pa){pa===void 0&&(pa=Ba),Zn[pa]=Fa[Ba]}),i=this&&this.__exportStar||function(Zn,Fa){for(var Ba in Zn)Ba==="default"||Object.prototype.hasOwnProperty.call(Fa,Ba)||n(Fa,Zn,Ba)};Object.defineProperty(e,"__esModule",{value:!0}),e.interval=e.iif=e.generate=e.fromEventPattern=e.fromEvent=e.from=e.forkJoin=e.empty=e.defer=e.connectable=e.concat=e.combineLatest=e.bindNodeCallback=e.bindCallback=e.UnsubscriptionError=e.TimeoutError=e.SequenceError=e.ObjectUnsubscribedError=e.NotFoundError=e.EmptyError=e.ArgumentOutOfRangeError=e.firstValueFrom=e.lastValueFrom=e.isObservable=e.identity=e.noop=e.pipe=e.NotificationKind=e.Notification=e.Subscriber=e.Subscription=e.Scheduler=e.VirtualAction=e.VirtualTimeScheduler=e.animationFrameScheduler=e.animationFrame=e.queueScheduler=e.queue=e.asyncScheduler=e.async=e.asapScheduler=e.asap=e.AsyncSubject=e.ReplaySubject=e.BehaviorSubject=e.Subject=e.animationFrames=e.observable=e.ConnectableObservable=e.Observable=void 0,e.filter=e.expand=e.exhaustMap=e.exhaustAll=e.exhaust=e.every=e.endWith=e.elementAt=e.distinctUntilKeyChanged=e.distinctUntilChanged=e.distinct=e.dematerialize=e.delayWhen=e.delay=e.defaultIfEmpty=e.debounceTime=e.debounce=e.count=e.connect=e.concatWith=e.concatMapTo=e.concatMap=e.concatAll=e.combineLatestWith=e.combineLatestAll=e.combineAll=e.catchError=e.bufferWhen=e.bufferToggle=e.bufferTime=e.bufferCount=e.buffer=e.auditTime=e.audit=e.config=e.NEVER=e.EMPTY=e.scheduled=e.zip=e.using=e.timer=e.throwError=e.range=e.race=e.partition=e.pairs=e.onErrorResumeNext=e.of=e.never=e.merge=void 0,e.switchMap=e.switchAll=e.subscribeOn=e.startWith=e.skipWhile=e.skipUntil=e.skipLast=e.skip=e.single=e.shareReplay=e.share=e.sequenceEqual=e.scan=e.sampleTime=e.sample=e.refCount=e.retryWhen=e.retry=e.repeatWhen=e.repeat=e.reduce=e.raceWith=e.publishReplay=e.publishLast=e.publishBehavior=e.publish=e.pluck=e.pairwise=e.onErrorResumeNextWith=e.observeOn=e.multicast=e.min=e.mergeWith=e.mergeScan=e.mergeMapTo=e.mergeMap=e.flatMap=e.mergeAll=e.max=e.materialize=e.mapTo=e.map=e.last=e.isEmpty=e.ignoreElements=e.groupBy=e.first=e.findIndex=e.find=e.finalize=void 0,e.zipWith=e.zipAll=e.withLatestFrom=e.windowWhen=e.windowToggle=e.windowTime=e.windowCount=e.window=e.toArray=e.timestamp=e.timeoutWith=e.timeout=e.timeInterval=e.throwIfEmpty=e.throttleTime=e.throttle=e.tap=e.takeWhile=e.takeUntil=e.takeLast=e.take=e.switchScan=e.switchMapTo=void 0;var o=t(4662);Object.defineProperty(e,"Observable",{enumerable:!0,get:function(){return o.Observable}});var a=t(8918);Object.defineProperty(e,"ConnectableObservable",{enumerable:!0,get:function(){return a.ConnectableObservable}});var s=t(3327);Object.defineProperty(e,"observable",{enumerable:!0,get:function(){return s.observable}});var u=t(3110);Object.defineProperty(e,"animationFrames",{enumerable:!0,get:function(){return u.animationFrames}});var l=t(2483);Object.defineProperty(e,"Subject",{enumerable:!0,get:function(){return l.Subject}});var c=t(1637);Object.defineProperty(e,"BehaviorSubject",{enumerable:!0,get:function(){return c.BehaviorSubject}});var f=t(1242);Object.defineProperty(e,"ReplaySubject",{enumerable:!0,get:function(){return f.ReplaySubject}});var h=t(95);Object.defineProperty(e,"AsyncSubject",{enumerable:!0,get:function(){return h.AsyncSubject}});var d=t(3692);Object.defineProperty(e,"asap",{enumerable:!0,get:function(){return d.asap}}),Object.defineProperty(e,"asapScheduler",{enumerable:!0,get:function(){return d.asapScheduler}});var v=t(7961);Object.defineProperty(e,"async",{enumerable:!0,get:function(){return v.async}}),Object.defineProperty(e,"asyncScheduler",{enumerable:!0,get:function(){return v.asyncScheduler}});var y=t(2886);Object.defineProperty(e,"queue",{enumerable:!0,get:function(){return y.queue}}),Object.defineProperty(e,"queueScheduler",{enumerable:!0,get:function(){return y.queueScheduler}});var w=t(3862);Object.defineProperty(e,"animationFrame",{enumerable:!0,get:function(){return w.animationFrame}}),Object.defineProperty(e,"animationFrameScheduler",{enumerable:!0,get:function(){return w.animationFrameScheduler}});var b=t(182);Object.defineProperty(e,"VirtualTimeScheduler",{enumerable:!0,get:function(){return b.VirtualTimeScheduler}}),Object.defineProperty(e,"VirtualAction",{enumerable:!0,get:function(){return b.VirtualAction}});var p=t(8986);Object.defineProperty(e,"Scheduler",{enumerable:!0,get:function(){return p.Scheduler}});var _=t(8014);Object.defineProperty(e,"Subscription",{enumerable:!0,get:function(){return _.Subscription}});var O=t(5);Object.defineProperty(e,"Subscriber",{enumerable:!0,get:function(){return O.Subscriber}});var P=t(7800);Object.defineProperty(e,"Notification",{enumerable:!0,get:function(){return P.Notification}}),Object.defineProperty(e,"NotificationKind",{enumerable:!0,get:function(){return P.NotificationKind}});var R=t(2706);Object.defineProperty(e,"pipe",{enumerable:!0,get:function(){return R.pipe}});var T=t(1342);Object.defineProperty(e,"noop",{enumerable:!0,get:function(){return T.noop}});var A=t(6640);Object.defineProperty(e,"identity",{enumerable:!0,get:function(){return A.identity}});var M=t(1751);Object.defineProperty(e,"isObservable",{enumerable:!0,get:function(){return M.isObservable}});var N=t(6894);Object.defineProperty(e,"lastValueFrom",{enumerable:!0,get:function(){return N.lastValueFrom}});var j=t(9060);Object.defineProperty(e,"firstValueFrom",{enumerable:!0,get:function(){return j.firstValueFrom}});var B=t(7057);Object.defineProperty(e,"ArgumentOutOfRangeError",{enumerable:!0,get:function(){return B.ArgumentOutOfRangeError}});var q=t(2823);Object.defineProperty(e,"EmptyError",{enumerable:!0,get:function(){return q.EmptyError}});var W=t(1759);Object.defineProperty(e,"NotFoundError",{enumerable:!0,get:function(){return W.NotFoundError}});var J=t(9686);Object.defineProperty(e,"ObjectUnsubscribedError",{enumerable:!0,get:function(){return J.ObjectUnsubscribedError}});var te=t(1505);Object.defineProperty(e,"SequenceError",{enumerable:!0,get:function(){return te.SequenceError}});var re=t(1554);Object.defineProperty(e,"TimeoutError",{enumerable:!0,get:function(){return re.TimeoutError}});var ee=t(5788);Object.defineProperty(e,"UnsubscriptionError",{enumerable:!0,get:function(){return ee.UnsubscriptionError}});var fe=t(2713);Object.defineProperty(e,"bindCallback",{enumerable:!0,get:function(){return fe.bindCallback}});var he=t(8561);Object.defineProperty(e,"bindNodeCallback",{enumerable:!0,get:function(){return he.bindNodeCallback}});var se=t(3247);Object.defineProperty(e,"combineLatest",{enumerable:!0,get:function(){return se.combineLatest}});var me=t(3865);Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return me.concat}});var De=t(7579);Object.defineProperty(e,"connectable",{enumerable:!0,get:function(){return De.connectable}});var Le=t(9353);Object.defineProperty(e,"defer",{enumerable:!0,get:function(){return Le.defer}});var Ie=t(8616);Object.defineProperty(e,"empty",{enumerable:!0,get:function(){return Ie.empty}});var qe=t(9105);Object.defineProperty(e,"forkJoin",{enumerable:!0,get:function(){return qe.forkJoin}});var Ge=t(4917);Object.defineProperty(e,"from",{enumerable:!0,get:function(){return Ge.from}});var Me=t(5337);Object.defineProperty(e,"fromEvent",{enumerable:!0,get:function(){return Me.fromEvent}});var Pe=t(347);Object.defineProperty(e,"fromEventPattern",{enumerable:!0,get:function(){return Pe.fromEventPattern}});var de=t(7610);Object.defineProperty(e,"generate",{enumerable:!0,get:function(){return de.generate}});var Oe=t(4209);Object.defineProperty(e,"iif",{enumerable:!0,get:function(){return Oe.iif}});var Ae=t(6472);Object.defineProperty(e,"interval",{enumerable:!0,get:function(){return Ae.interval}});var Ve=t(2833);Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return Ve.merge}});var tt=t(8655);Object.defineProperty(e,"never",{enumerable:!0,get:function(){return tt.never}});var ht=t(1004);Object.defineProperty(e,"of",{enumerable:!0,get:function(){return ht.of}});var xt=t(6102);Object.defineProperty(e,"onErrorResumeNext",{enumerable:!0,get:function(){return xt.onErrorResumeNext}});var ut=t(7740);Object.defineProperty(e,"pairs",{enumerable:!0,get:function(){return ut.pairs}});var H=t(1699);Object.defineProperty(e,"partition",{enumerable:!0,get:function(){return H.partition}});var X=t(5584);Object.defineProperty(e,"race",{enumerable:!0,get:function(){return X.race}});var ne=t(9376);Object.defineProperty(e,"range",{enumerable:!0,get:function(){return ne.range}});var Se=t(1103);Object.defineProperty(e,"throwError",{enumerable:!0,get:function(){return Se.throwError}});var Te=t(4092);Object.defineProperty(e,"timer",{enumerable:!0,get:function(){return Te.timer}});var Ne=t(7853);Object.defineProperty(e,"using",{enumerable:!0,get:function(){return Ne.using}});var et=t(7286);Object.defineProperty(e,"zip",{enumerable:!0,get:function(){return et.zip}});var wt=t(1656);Object.defineProperty(e,"scheduled",{enumerable:!0,get:function(){return wt.scheduled}});var lt=t(8616);Object.defineProperty(e,"EMPTY",{enumerable:!0,get:function(){return lt.EMPTY}});var pe=t(8655);Object.defineProperty(e,"NEVER",{enumerable:!0,get:function(){return pe.NEVER}}),i(t(6038),e);var Ue=t(3413);Object.defineProperty(e,"config",{enumerable:!0,get:function(){return Ue.config}});var nt=t(3146);Object.defineProperty(e,"audit",{enumerable:!0,get:function(){return nt.audit}});var Je=t(3231);Object.defineProperty(e,"auditTime",{enumerable:!0,get:function(){return Je.auditTime}});var at=t(8015);Object.defineProperty(e,"buffer",{enumerable:!0,get:function(){return at.buffer}});var kt=t(5572);Object.defineProperty(e,"bufferCount",{enumerable:!0,get:function(){return kt.bufferCount}});var dt=t(7210);Object.defineProperty(e,"bufferTime",{enumerable:!0,get:function(){return dt.bufferTime}});var Dt=t(8995);Object.defineProperty(e,"bufferToggle",{enumerable:!0,get:function(){return Dt.bufferToggle}});var Xt=t(8831);Object.defineProperty(e,"bufferWhen",{enumerable:!0,get:function(){return Xt.bufferWhen}});var fr=t(8118);Object.defineProperty(e,"catchError",{enumerable:!0,get:function(){return fr.catchError}});var Vt=t(6625);Object.defineProperty(e,"combineAll",{enumerable:!0,get:function(){return Vt.combineAll}});var lr=t(6728);Object.defineProperty(e,"combineLatestAll",{enumerable:!0,get:function(){return lr.combineLatestAll}});var ir=t(8239);Object.defineProperty(e,"combineLatestWith",{enumerable:!0,get:function(){return ir.combineLatestWith}});var Jt=t(8158);Object.defineProperty(e,"concatAll",{enumerable:!0,get:function(){return Jt.concatAll}});var Wr=t(9135);Object.defineProperty(e,"concatMap",{enumerable:!0,get:function(){return Wr.concatMap}});var on=t(9938);Object.defineProperty(e,"concatMapTo",{enumerable:!0,get:function(){return on.concatMapTo}});var Pi=t(9669);Object.defineProperty(e,"concatWith",{enumerable:!0,get:function(){return Pi.concatWith}});var vn=t(1483);Object.defineProperty(e,"connect",{enumerable:!0,get:function(){return vn.connect}});var ln=t(1038);Object.defineProperty(e,"count",{enumerable:!0,get:function(){return ln.count}});var En=t(4461);Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return En.debounce}});var Cn=t(8079);Object.defineProperty(e,"debounceTime",{enumerable:!0,get:function(){return Cn.debounceTime}});var Un=t(378);Object.defineProperty(e,"defaultIfEmpty",{enumerable:!0,get:function(){return Un.defaultIfEmpty}});var Xn=t(914);Object.defineProperty(e,"delay",{enumerable:!0,get:function(){return Xn.delay}});var to=t(8766);Object.defineProperty(e,"delayWhen",{enumerable:!0,get:function(){return to.delayWhen}});var Ei=t(7441);Object.defineProperty(e,"dematerialize",{enumerable:!0,get:function(){return Ei.dematerialize}});var ro=t(5365);Object.defineProperty(e,"distinct",{enumerable:!0,get:function(){return ro.distinct}});var Fi=t(8937);Object.defineProperty(e,"distinctUntilChanged",{enumerable:!0,get:function(){return Fi.distinctUntilChanged}});var ho=t(9612);Object.defineProperty(e,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return ho.distinctUntilKeyChanged}});var zn=t(4520);Object.defineProperty(e,"elementAt",{enumerable:!0,get:function(){return zn.elementAt}});var yr=t(1776);Object.defineProperty(e,"endWith",{enumerable:!0,get:function(){return yr.endWith}});var an=t(5510);Object.defineProperty(e,"every",{enumerable:!0,get:function(){return an.every}});var no=t(1551);Object.defineProperty(e,"exhaust",{enumerable:!0,get:function(){return no.exhaust}});var Oi=t(2752);Object.defineProperty(e,"exhaustAll",{enumerable:!0,get:function(){return Oi.exhaustAll}});var To=t(4753);Object.defineProperty(e,"exhaustMap",{enumerable:!0,get:function(){return To.exhaustMap}});var Zs=t(7661);Object.defineProperty(e,"expand",{enumerable:!0,get:function(){return Zs.expand}});var vo=t(783);Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return vo.filter}});var La=t(3555);Object.defineProperty(e,"finalize",{enumerable:!0,get:function(){return La.finalize}});var Qs=t(7714);Object.defineProperty(e,"find",{enumerable:!0,get:function(){return Qs.find}});var ha=t(9756);Object.defineProperty(e,"findIndex",{enumerable:!0,get:function(){return ha.findIndex}});var vl=t(8275);Object.defineProperty(e,"first",{enumerable:!0,get:function(){return vl.first}});var Na=t(7815);Object.defineProperty(e,"groupBy",{enumerable:!0,get:function(){return Na.groupBy}});var vi=t(490);Object.defineProperty(e,"ignoreElements",{enumerable:!0,get:function(){return vi.ignoreElements}});var da=t(9356);Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return da.isEmpty}});var po=t(8669);Object.defineProperty(e,"last",{enumerable:!0,get:function(){return po.last}});var Pn=t(5471);Object.defineProperty(e,"map",{enumerable:!0,get:function(){return Pn.map}});var Kn=t(3218);Object.defineProperty(e,"mapTo",{enumerable:!0,get:function(){return Kn.mapTo}});var hr=t(2360);Object.defineProperty(e,"materialize",{enumerable:!0,get:function(){return hr.materialize}});var Yi=t(1415);Object.defineProperty(e,"max",{enumerable:!0,get:function(){return Yi.max}});var go=t(7302);Object.defineProperty(e,"mergeAll",{enumerable:!0,get:function(){return go.mergeAll}});var Hr=t(6902);Object.defineProperty(e,"flatMap",{enumerable:!0,get:function(){return Hr.flatMap}});var jr=t(983);Object.defineProperty(e,"mergeMap",{enumerable:!0,get:function(){return jr.mergeMap}});var Ai=t(6586);Object.defineProperty(e,"mergeMapTo",{enumerable:!0,get:function(){return Ai.mergeMapTo}});var Js=t(4408);Object.defineProperty(e,"mergeScan",{enumerable:!0,get:function(){return Js.mergeScan}});var bf=t(8253);Object.defineProperty(e,"mergeWith",{enumerable:!0,get:function(){return bf.mergeWith}});var eu=t(2669);Object.defineProperty(e,"min",{enumerable:!0,get:function(){return eu.min}});var _f=t(9247);Object.defineProperty(e,"multicast",{enumerable:!0,get:function(){return _f.multicast}});var Ri=t(5184);Object.defineProperty(e,"observeOn",{enumerable:!0,get:function(){return Ri.observeOn}});var Mu=t(1226);Object.defineProperty(e,"onErrorResumeNextWith",{enumerable:!0,get:function(){return Mu.onErrorResumeNextWith}});var yo=t(1518);Object.defineProperty(e,"pairwise",{enumerable:!0,get:function(){return yo.pairwise}});var Lu=t(4912);Object.defineProperty(e,"pluck",{enumerable:!0,get:function(){return Lu.pluck}});var pl=t(766);Object.defineProperty(e,"publish",{enumerable:!0,get:function(){return pl.publish}});var Bi=t(7220);Object.defineProperty(e,"publishBehavior",{enumerable:!0,get:function(){return Bi.publishBehavior}});var Ja=t(6106);Object.defineProperty(e,"publishLast",{enumerable:!0,get:function(){return Ja.publishLast}});var tu=t(8157);Object.defineProperty(e,"publishReplay",{enumerable:!0,get:function(){return tu.publishReplay}});var gc=t(5600);Object.defineProperty(e,"raceWith",{enumerable:!0,get:function(){return gc.raceWith}});var yc=t(9139);Object.defineProperty(e,"reduce",{enumerable:!0,get:function(){return yc.reduce}});var Fr=t(8522);Object.defineProperty(e,"repeat",{enumerable:!0,get:function(){return Fr.repeat}});var Ho=t(6566);Object.defineProperty(e,"repeatWhen",{enumerable:!0,get:function(){return Ho.repeatWhen}});var mo=t(7835);Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return mo.retry}});var mc=t(9843);Object.defineProperty(e,"retryWhen",{enumerable:!0,get:function(){return mc.retryWhen}});var Wt=t(7561);Object.defineProperty(e,"refCount",{enumerable:!0,get:function(){return Wt.refCount}});var ru=t(1731);Object.defineProperty(e,"sample",{enumerable:!0,get:function(){return ru.sample}});var bc=t(6086);Object.defineProperty(e,"sampleTime",{enumerable:!0,get:function(){return bc.sampleTime}});var ja=t(8624);Object.defineProperty(e,"scan",{enumerable:!0,get:function(){return ja.scan}});var Nu=t(582);Object.defineProperty(e,"sequenceEqual",{enumerable:!0,get:function(){return Nu.sequenceEqual}});var Co=t(8977);Object.defineProperty(e,"share",{enumerable:!0,get:function(){return Co.share}});var $r=t(3133);Object.defineProperty(e,"shareReplay",{enumerable:!0,get:function(){return $r.shareReplay}});var va=t(3001);Object.defineProperty(e,"single",{enumerable:!0,get:function(){return va.single}});var gl=t(3982);Object.defineProperty(e,"skip",{enumerable:!0,get:function(){return gl.skip}});var kh=t(9098);Object.defineProperty(e,"skipLast",{enumerable:!0,get:function(){return kh.skipLast}});var _c=t(7372);Object.defineProperty(e,"skipUntil",{enumerable:!0,get:function(){return _c.skipUntil}});var Dh=t(4721);Object.defineProperty(e,"skipWhile",{enumerable:!0,get:function(){return Dh.skipWhile}});var wf=t(269);Object.defineProperty(e,"startWith",{enumerable:!0,get:function(){return wf.startWith}});var yl=t(8960);Object.defineProperty(e,"subscribeOn",{enumerable:!0,get:function(){return yl.subscribeOn}});var nu=t(8774);Object.defineProperty(e,"switchAll",{enumerable:!0,get:function(){return nu.switchAll}});var Ts=t(3879);Object.defineProperty(e,"switchMap",{enumerable:!0,get:function(){return Ts.switchMap}});var es=t(3274);Object.defineProperty(e,"switchMapTo",{enumerable:!0,get:function(){return es.switchMapTo}});var ml=t(8712);Object.defineProperty(e,"switchScan",{enumerable:!0,get:function(){return ml.switchScan}});var wc=t(846);Object.defineProperty(e,"take",{enumerable:!0,get:function(){return wc.take}});var Ec=t(8330);Object.defineProperty(e,"takeLast",{enumerable:!0,get:function(){return Ec.takeLast}});var bl=t(4780);Object.defineProperty(e,"takeUntil",{enumerable:!0,get:function(){return bl.takeUntil}});var iu=t(2129);Object.defineProperty(e,"takeWhile",{enumerable:!0,get:function(){return iu.takeWhile}});var _l=t(3964);Object.defineProperty(e,"tap",{enumerable:!0,get:function(){return _l.tap}});var pn=t(8941);Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return pn.throttle}});var Pr=t(7640);Object.defineProperty(e,"throttleTime",{enumerable:!0,get:function(){return Pr.throttleTime}});var Oc=t(4869);Object.defineProperty(e,"throwIfEmpty",{enumerable:!0,get:function(){return Oc.throwIfEmpty}});var ou=t(489);Object.defineProperty(e,"timeInterval",{enumerable:!0,get:function(){return ou.timeInterval}});var Ef=t(1554);Object.defineProperty(e,"timeout",{enumerable:!0,get:function(){return Ef.timeout}});var Cs=t(4862);Object.defineProperty(e,"timeoutWith",{enumerable:!0,get:function(){return Cs.timeoutWith}});var ts=t(6505);Object.defineProperty(e,"timestamp",{enumerable:!0,get:function(){return ts.timestamp}});var Mh=t(2343);Object.defineProperty(e,"toArray",{enumerable:!0,get:function(){return Mh.toArray}});var Zd=t(5477);Object.defineProperty(e,"window",{enumerable:!0,get:function(){return Zd.window}});var au=t(6746);Object.defineProperty(e,"windowCount",{enumerable:!0,get:function(){return au.windowCount}});var qn=t(8208);Object.defineProperty(e,"windowTime",{enumerable:!0,get:function(){return qn.windowTime}});var xc=t(6637);Object.defineProperty(e,"windowToggle",{enumerable:!0,get:function(){return xc.windowToggle}});var io=t(1141);Object.defineProperty(e,"windowWhen",{enumerable:!0,get:function(){return io.windowWhen}});var su=t(5442);Object.defineProperty(e,"withLatestFrom",{enumerable:!0,get:function(){return su.withLatestFrom}});var Sc=t(187);Object.defineProperty(e,"zipAll",{enumerable:!0,get:function(){return Sc.zipAll}});var Ui=t(8538);Object.defineProperty(e,"zipWith",{enumerable:!0,get:function(){return Ui.zipWith}})},95:function(r,e,t){var n,i=this&&this.__extends||(n=function(a,s){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},n(a,s)},function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}n(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)});Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncSubject=void 0;var o=function(a){function s(){var u=a!==null&&a.apply(this,arguments)||this;return u._value=null,u._hasValue=!1,u._isComplete=!1,u}return i(s,a),s.prototype._checkFinalizedStatuses=function(u){var l=this,c=l.hasError,f=l._hasValue,h=l._value,d=l.thrownError,v=l.isStopped,y=l._isComplete;c?u.error(d):(v||y)&&(f&&u.next(h),u.complete())},s.prototype.next=function(u){this.isStopped||(this._value=u,this._hasValue=!0)},s.prototype.complete=function(){var u=this,l=u._hasValue,c=u._value;u._isComplete||(this._isComplete=!0,l&&a.prototype.next.call(this,c),a.prototype.complete.call(this))},s}(t(2483).Subject);e.AsyncSubject=o},1637:function(r,e,t){var n,i=this&&this.__extends||(n=function(a,s){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},n(a,s)},function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}n(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)});Object.defineProperty(e,"__esModule",{value:!0}),e.BehaviorSubject=void 0;var o=function(a){function s(u){var l=a.call(this)||this;return l._value=u,l}return i(s,a),Object.defineProperty(s.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),s.prototype._subscribe=function(u){var l=a.prototype._subscribe.call(this,u);return!l.closed&&u.next(this._value),l},s.prototype.getValue=function(){var u=this,l=u.hasError,c=u.thrownError,f=u._value;if(l)throw c;return this._throwIfClosed(),f},s.prototype.next=function(u){a.prototype.next.call(this,this._value=u)},s}(t(2483).Subject);e.BehaviorSubject=o},7800:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.observeNotification=e.Notification=e.NotificationKind=void 0;var n,i=t(8616),o=t(1004),a=t(1103),s=t(1018);(n=e.NotificationKind||(e.NotificationKind={})).NEXT="N",n.ERROR="E",n.COMPLETE="C";var u=function(){function c(f,h,d){this.kind=f,this.value=h,this.error=d,this.hasValue=f==="N"}return c.prototype.observe=function(f){return l(this,f)},c.prototype.do=function(f,h,d){var v=this,y=v.kind,w=v.value,b=v.error;return y==="N"?f==null?void 0:f(w):y==="E"?h==null?void 0:h(b):d==null?void 0:d()},c.prototype.accept=function(f,h,d){var v;return s.isFunction((v=f)===null||v===void 0?void 0:v.next)?this.observe(f):this.do(f,h,d)},c.prototype.toObservable=function(){var f=this,h=f.kind,d=f.value,v=f.error,y=h==="N"?o.of(d):h==="E"?a.throwError(function(){return v}):h==="C"?i.EMPTY:0;if(!y)throw new TypeError("Unexpected notification kind "+h);return y},c.createNext=function(f){return new c("N",f)},c.createError=function(f){return new c("E",void 0,f)},c.createComplete=function(){return c.completeNotification},c.completeNotification=new c("C"),c}();function l(c,f){var h,d,v,y=c,w=y.kind,b=y.value,p=y.error;if(typeof w!="string")throw new TypeError('Invalid notification, missing "kind"');w==="N"?(h=f.next)===null||h===void 0||h.call(f,b):w==="E"?(d=f.error)===null||d===void 0||d.call(f,p):(v=f.complete)===null||v===void 0||v.call(f)}e.Notification=u,e.observeNotification=l},9052:(r,e)=>{function t(n,i,o){return{kind:n,value:i,error:o}}Object.defineProperty(e,"__esModule",{value:!0}),e.createNotification=e.nextNotification=e.errorNotification=e.COMPLETE_NOTIFICATION=void 0,e.COMPLETE_NOTIFICATION=t("C",void 0,void 0),e.errorNotification=function(n){return t("E",void 0,n)},e.nextNotification=function(n){return t("N",n,void 0)},e.createNotification=t},4662:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Observable=void 0;var n=t(5),i=t(8014),o=t(3327),a=t(2706),s=t(3413),u=t(1018),l=t(9223),c=function(){function h(d){d&&(this._subscribe=d)}return h.prototype.lift=function(d){var v=new h;return v.source=this,v.operator=d,v},h.prototype.subscribe=function(d,v,y){var w,b=this,p=(w=d)&&w instanceof n.Subscriber||function(_){return _&&u.isFunction(_.next)&&u.isFunction(_.error)&&u.isFunction(_.complete)}(w)&&i.isSubscription(w)?d:new n.SafeSubscriber(d,v,y);return l.errorContext(function(){var _=b,O=_.operator,P=_.source;p.add(O?O.call(p,P):P?b._subscribe(p):b._trySubscribe(p))}),p},h.prototype._trySubscribe=function(d){try{return this._subscribe(d)}catch(v){d.error(v)}},h.prototype.forEach=function(d,v){var y=this;return new(v=f(v))(function(w,b){var p=new n.SafeSubscriber({next:function(_){try{d(_)}catch(O){b(O),p.unsubscribe()}},error:b,complete:w});y.subscribe(p)})},h.prototype._subscribe=function(d){var v;return(v=this.source)===null||v===void 0?void 0:v.subscribe(d)},h.prototype[o.observable]=function(){return this},h.prototype.pipe=function(){for(var d=[],v=0;v<arguments.length;v++)d[v]=arguments[v];return a.pipeFromArray(d)(this)},h.prototype.toPromise=function(d){var v=this;return new(d=f(d))(function(y,w){var b;v.subscribe(function(p){return b=p},function(p){return w(p)},function(){return y(b)})})},h.create=function(d){return new h(d)},h}();function f(h){var d;return(d=h??s.config.Promise)!==null&&d!==void 0?d:Promise}e.Observable=c},1242:function(r,e,t){var n,i=this&&this.__extends||(n=function(u,l){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(c[h]=f[h])},n(u,l)},function(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function c(){this.constructor=u}n(u,l),u.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)});Object.defineProperty(e,"__esModule",{value:!0}),e.ReplaySubject=void 0;var o=t(2483),a=t(9568),s=function(u){function l(c,f,h){c===void 0&&(c=1/0),f===void 0&&(f=1/0),h===void 0&&(h=a.dateTimestampProvider);var d=u.call(this)||this;return d._bufferSize=c,d._windowTime=f,d._timestampProvider=h,d._buffer=[],d._infiniteTimeWindow=!0,d._infiniteTimeWindow=f===1/0,d._bufferSize=Math.max(1,c),d._windowTime=Math.max(1,f),d}return i(l,u),l.prototype.next=function(c){var f=this,h=f.isStopped,d=f._buffer,v=f._infiniteTimeWindow,y=f._timestampProvider,w=f._windowTime;h||(d.push(c),!v&&d.push(y.now()+w)),this._trimBuffer(),u.prototype.next.call(this,c)},l.prototype._subscribe=function(c){this._throwIfClosed(),this._trimBuffer();for(var f=this._innerSubscribe(c),h=this._infiniteTimeWindow,d=this._buffer.slice(),v=0;v<d.length&&!c.closed;v+=h?1:2)c.next(d[v]);return this._checkFinalizedStatuses(c),f},l.prototype._trimBuffer=function(){var c=this,f=c._bufferSize,h=c._timestampProvider,d=c._buffer,v=c._infiniteTimeWindow,y=(v?1:2)*f;if(f<1/0&&y<d.length&&d.splice(0,d.length-y),!v){for(var w=h.now(),b=0,p=1;p<d.length&&d[p]<=w;p+=2)b=p;b&&d.splice(0,b+1)}},l}(o.Subject);e.ReplaySubject=s},8986:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Scheduler=void 0;var n=t(9568),i=function(){function o(a,s){s===void 0&&(s=o.now),this.schedulerActionCtor=a,this.now=s}return o.prototype.schedule=function(a,s,u){return s===void 0&&(s=0),new this.schedulerActionCtor(this,a).schedule(u,s)},o.now=n.dateTimestampProvider.now,o}();e.Scheduler=i},2483:function(r,e,t){var n,i=this&&this.__extends||(n=function(d,v){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,w){y.__proto__=w}||function(y,w){for(var b in w)Object.prototype.hasOwnProperty.call(w,b)&&(y[b]=w[b])},n(d,v)},function(d,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function y(){this.constructor=d}n(d,v),d.prototype=v===null?Object.create(v):(y.prototype=v.prototype,new y)}),o=this&&this.__values||function(d){var v=typeof Symbol=="function"&&Symbol.iterator,y=v&&d[v],w=0;if(y)return y.call(d);if(d&&typeof d.length=="number")return{next:function(){return d&&w>=d.length&&(d=void 0),{value:d&&d[w++],done:!d}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.AnonymousSubject=e.Subject=void 0;var a=t(4662),s=t(8014),u=t(9686),l=t(7479),c=t(9223),f=function(d){function v(){var y=d.call(this)||this;return y.closed=!1,y.currentObservers=null,y.observers=[],y.isStopped=!1,y.hasError=!1,y.thrownError=null,y}return i(v,d),v.prototype.lift=function(y){var w=new h(this,this);return w.operator=y,w},v.prototype._throwIfClosed=function(){if(this.closed)throw new u.ObjectUnsubscribedError},v.prototype.next=function(y){var w=this;c.errorContext(function(){var b,p;if(w._throwIfClosed(),!w.isStopped){w.currentObservers||(w.currentObservers=Array.from(w.observers));try{for(var _=o(w.currentObservers),O=_.next();!O.done;O=_.next())O.value.next(y)}catch(P){b={error:P}}finally{try{O&&!O.done&&(p=_.return)&&p.call(_)}finally{if(b)throw b.error}}}})},v.prototype.error=function(y){var w=this;c.errorContext(function(){if(w._throwIfClosed(),!w.isStopped){w.hasError=w.isStopped=!0,w.thrownError=y;for(var b=w.observers;b.length;)b.shift().error(y)}})},v.prototype.complete=function(){var y=this;c.errorContext(function(){if(y._throwIfClosed(),!y.isStopped){y.isStopped=!0;for(var w=y.observers;w.length;)w.shift().complete()}})},v.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(v.prototype,"observed",{get:function(){var y;return((y=this.observers)===null||y===void 0?void 0:y.length)>0},enumerable:!1,configurable:!0}),v.prototype._trySubscribe=function(y){return this._throwIfClosed(),d.prototype._trySubscribe.call(this,y)},v.prototype._subscribe=function(y){return this._throwIfClosed(),this._checkFinalizedStatuses(y),this._innerSubscribe(y)},v.prototype._innerSubscribe=function(y){var w=this,b=this,p=b.hasError,_=b.isStopped,O=b.observers;return p||_?s.EMPTY_SUBSCRIPTION:(this.currentObservers=null,O.push(y),new s.Subscription(function(){w.currentObservers=null,l.arrRemove(O,y)}))},v.prototype._checkFinalizedStatuses=function(y){var w=this,b=w.hasError,p=w.thrownError,_=w.isStopped;b?y.error(p):_&&y.complete()},v.prototype.asObservable=function(){var y=new a.Observable;return y.source=this,y},v.create=function(y,w){return new h(y,w)},v}(a.Observable);e.Subject=f;var h=function(d){function v(y,w){var b=d.call(this)||this;return b.destination=y,b.source=w,b}return i(v,d),v.prototype.next=function(y){var w,b;(b=(w=this.destination)===null||w===void 0?void 0:w.next)===null||b===void 0||b.call(w,y)},v.prototype.error=function(y){var w,b;(b=(w=this.destination)===null||w===void 0?void 0:w.error)===null||b===void 0||b.call(w,y)},v.prototype.complete=function(){var y,w;(w=(y=this.destination)===null||y===void 0?void 0:y.complete)===null||w===void 0||w.call(y)},v.prototype._subscribe=function(y){var w,b;return(b=(w=this.source)===null||w===void 0?void 0:w.subscribe(y))!==null&&b!==void 0?b:s.EMPTY_SUBSCRIPTION},v}(f);e.AnonymousSubject=h},5:function(r,e,t){var n,i=this&&this.__extends||(n=function(O,P){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,T){R.__proto__=T}||function(R,T){for(var A in T)Object.prototype.hasOwnProperty.call(T,A)&&(R[A]=T[A])},n(O,P)},function(O,P){if(typeof P!="function"&&P!==null)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function R(){this.constructor=O}n(O,P),O.prototype=P===null?Object.create(P):(R.prototype=P.prototype,new R)});Object.defineProperty(e,"__esModule",{value:!0}),e.EMPTY_OBSERVER=e.SafeSubscriber=e.Subscriber=void 0;var o=t(1018),a=t(8014),s=t(3413),u=t(7315),l=t(1342),c=t(9052),f=t(9155),h=t(9223),d=function(O){function P(R){var T=O.call(this)||this;return T.isStopped=!1,R?(T.destination=R,a.isSubscription(R)&&R.add(T)):T.destination=e.EMPTY_OBSERVER,T}return i(P,O),P.create=function(R,T,A){return new b(R,T,A)},P.prototype.next=function(R){this.isStopped?_(c.nextNotification(R),this):this._next(R)},P.prototype.error=function(R){this.isStopped?_(c.errorNotification(R),this):(this.isStopped=!0,this._error(R))},P.prototype.complete=function(){this.isStopped?_(c.COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())},P.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,O.prototype.unsubscribe.call(this),this.destination=null)},P.prototype._next=function(R){this.destination.next(R)},P.prototype._error=function(R){try{this.destination.error(R)}finally{this.unsubscribe()}},P.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},P}(a.Subscription);e.Subscriber=d;var v=Function.prototype.bind;function y(O,P){return v.call(O,P)}var w=function(){function O(P){this.partialObserver=P}return O.prototype.next=function(P){var R=this.partialObserver;if(R.next)try{R.next(P)}catch(T){p(T)}},O.prototype.error=function(P){var R=this.partialObserver;if(R.error)try{R.error(P)}catch(T){p(T)}else p(P)},O.prototype.complete=function(){var P=this.partialObserver;if(P.complete)try{P.complete()}catch(R){p(R)}},O}(),b=function(O){function P(R,T,A){var M,N,j=O.call(this)||this;return o.isFunction(R)||!R?M={next:R??void 0,error:T??void 0,complete:A??void 0}:j&&s.config.useDeprecatedNextContext?((N=Object.create(R)).unsubscribe=function(){return j.unsubscribe()},M={next:R.next&&y(R.next,N),error:R.error&&y(R.error,N),complete:R.complete&&y(R.complete,N)}):M=R,j.destination=new w(M),j}return i(P,O),P}(d);function p(O){s.config.useDeprecatedSynchronousErrorHandling?h.captureError(O):u.reportUnhandledError(O)}function _(O,P){var R=s.config.onStoppedNotification;R&&f.timeoutProvider.setTimeout(function(){return R(O,P)})}e.SafeSubscriber=b,e.EMPTY_OBSERVER={closed:!0,next:l.noop,error:function(O){throw O},complete:l.noop}},8014:function(r,e,t){var n=this&&this.__values||function(f){var h=typeof Symbol=="function"&&Symbol.iterator,d=h&&f[h],v=0;if(d)return d.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&v>=f.length&&(f=void 0),{value:f&&f[v++],done:!f}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(f,h){var d=typeof Symbol=="function"&&f[Symbol.iterator];if(!d)return f;var v,y,w=d.call(f),b=[];try{for(;(h===void 0||h-- >0)&&!(v=w.next()).done;)b.push(v.value)}catch(p){y={error:p}}finally{try{v&&!v.done&&(d=w.return)&&d.call(w)}finally{if(y)throw y.error}}return b},o=this&&this.__spreadArray||function(f,h){for(var d=0,v=h.length,y=f.length;d<v;d++,y++)f[y]=h[d];return f};Object.defineProperty(e,"__esModule",{value:!0}),e.isSubscription=e.EMPTY_SUBSCRIPTION=e.Subscription=void 0;var a=t(1018),s=t(5788),u=t(7479),l=function(){function f(d){this.initialTeardown=d,this.closed=!1,this._parentage=null,this._finalizers=null}var h;return f.prototype.unsubscribe=function(){var d,v,y,w,b;if(!this.closed){this.closed=!0;var p=this._parentage;if(p)if(this._parentage=null,Array.isArray(p))try{for(var _=n(p),O=_.next();!O.done;O=_.next())O.value.remove(this)}catch(N){d={error:N}}finally{try{O&&!O.done&&(v=_.return)&&v.call(_)}finally{if(d)throw d.error}}else p.remove(this);var P=this.initialTeardown;if(a.isFunction(P))try{P()}catch(N){b=N instanceof s.UnsubscriptionError?N.errors:[N]}var R=this._finalizers;if(R){this._finalizers=null;try{for(var T=n(R),A=T.next();!A.done;A=T.next()){var M=A.value;try{c(M)}catch(N){b=b??[],N instanceof s.UnsubscriptionError?b=o(o([],i(b)),i(N.errors)):b.push(N)}}}catch(N){y={error:N}}finally{try{A&&!A.done&&(w=T.return)&&w.call(T)}finally{if(y)throw y.error}}}if(b)throw new s.UnsubscriptionError(b)}},f.prototype.add=function(d){var v;if(d&&d!==this)if(this.closed)c(d);else{if(d instanceof f){if(d.closed||d._hasParent(this))return;d._addParent(this)}(this._finalizers=(v=this._finalizers)!==null&&v!==void 0?v:[]).push(d)}},f.prototype._hasParent=function(d){var v=this._parentage;return v===d||Array.isArray(v)&&v.includes(d)},f.prototype._addParent=function(d){var v=this._parentage;this._parentage=Array.isArray(v)?(v.push(d),v):v?[v,d]:d},f.prototype._removeParent=function(d){var v=this._parentage;v===d?this._parentage=null:Array.isArray(v)&&u.arrRemove(v,d)},f.prototype.remove=function(d){var v=this._finalizers;v&&u.arrRemove(v,d),d instanceof f&&d._removeParent(this)},f.EMPTY=((h=new f).closed=!0,h),f}();function c(f){a.isFunction(f)?f():f.unsubscribe()}e.Subscription=l,e.EMPTY_SUBSCRIPTION=l.EMPTY,e.isSubscription=function(f){return f instanceof l||f&&"closed"in f&&a.isFunction(f.remove)&&a.isFunction(f.add)&&a.isFunction(f.unsubscribe)}},3413:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.config=void 0,e.config={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9060:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.firstValueFrom=void 0;var n=t(2823),i=t(5);e.firstValueFrom=function(o,a){var s=typeof a=="object";return new Promise(function(u,l){var c=new i.SafeSubscriber({next:function(f){u(f),c.unsubscribe()},error:l,complete:function(){s?u(a.defaultValue):l(new n.EmptyError)}});o.subscribe(c)})}},6894:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.lastValueFrom=void 0;var n=t(2823);e.lastValueFrom=function(i,o){var a=typeof o=="object";return new Promise(function(s,u){var l,c=!1;i.subscribe({next:function(f){l=f,c=!0},error:u,complete:function(){c?s(l):a?s(o.defaultValue):u(new n.EmptyError)}})})}},8918:function(r,e,t){var n,i=this&&this.__extends||(n=function(f,h){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,v){d.__proto__=v}||function(d,v){for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(d[y]=v[y])},n(f,h)},function(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function d(){this.constructor=f}n(f,h),f.prototype=h===null?Object.create(h):(d.prototype=h.prototype,new d)});Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectableObservable=void 0;var o=t(4662),a=t(8014),s=t(7561),u=t(3111),l=t(7843),c=function(f){function h(d,v){var y=f.call(this)||this;return y.source=d,y.subjectFactory=v,y._subject=null,y._refCount=0,y._connection=null,l.hasLift(d)&&(y.lift=d.lift),y}return i(h,f),h.prototype._subscribe=function(d){return this.getSubject().subscribe(d)},h.prototype.getSubject=function(){var d=this._subject;return d&&!d.isStopped||(this._subject=this.subjectFactory()),this._subject},h.prototype._teardown=function(){this._refCount=0;var d=this._connection;this._subject=this._connection=null,d==null||d.unsubscribe()},h.prototype.connect=function(){var d=this,v=this._connection;if(!v){v=this._connection=new a.Subscription;var y=this.getSubject();v.add(this.source.subscribe(u.createOperatorSubscriber(y,void 0,function(){d._teardown(),y.complete()},function(w){d._teardown(),y.error(w)},function(){return d._teardown()}))),v.closed&&(this._connection=null,v=a.Subscription.EMPTY)}return v},h.prototype.refCount=function(){return s.refCount()(this)},h}(o.Observable);e.ConnectableObservable=c},2713:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.bindCallback=void 0;var n=t(1439);e.bindCallback=function(i,o,a){return n.bindCallbackInternals(!1,i,o,a)}},1439:function(r,e,t){var n=this&&this.__read||function(f,h){var d=typeof Symbol=="function"&&f[Symbol.iterator];if(!d)return f;var v,y,w=d.call(f),b=[];try{for(;(h===void 0||h-- >0)&&!(v=w.next()).done;)b.push(v.value)}catch(p){y={error:p}}finally{try{v&&!v.done&&(d=w.return)&&d.call(w)}finally{if(y)throw y.error}}return b},i=this&&this.__spreadArray||function(f,h){for(var d=0,v=h.length,y=f.length;d<v;d++,y++)f[y]=h[d];return f};Object.defineProperty(e,"__esModule",{value:!0}),e.bindCallbackInternals=void 0;var o=t(8613),a=t(4662),s=t(8960),u=t(1251),l=t(5184),c=t(95);e.bindCallbackInternals=function f(h,d,v,y){if(v){if(!o.isScheduler(v))return function(){for(var w=[],b=0;b<arguments.length;b++)w[b]=arguments[b];return f(h,d,y).apply(this,w).pipe(u.mapOneOrManyArgs(v))};y=v}return y?function(){for(var w=[],b=0;b<arguments.length;b++)w[b]=arguments[b];return f(h,d).apply(this,w).pipe(s.subscribeOn(y),l.observeOn(y))}:function(){for(var w=this,b=[],p=0;p<arguments.length;p++)b[p]=arguments[p];var _=new c.AsyncSubject,O=!0;return new a.Observable(function(P){var R=_.subscribe(P);if(O){O=!1;var T=!1,A=!1;d.apply(w,i(i([],n(b)),[function(){for(var M=[],N=0;N<arguments.length;N++)M[N]=arguments[N];if(h){var j=M.shift();if(j!=null)return void _.error(j)}_.next(1<M.length?M:M[0]),A=!0,T&&_.complete()}])),A&&_.complete(),T=!0}return R})}}},8561:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.bindNodeCallback=void 0;var n=t(1439);e.bindNodeCallback=function(i,o,a){return n.bindCallbackInternals(!0,i,o,a)}},3247:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.combineLatestInit=e.combineLatest=void 0;var n=t(4662),i=t(7360),o=t(4917),a=t(6640),s=t(1251),u=t(1107),l=t(6013),c=t(3111),f=t(7110);function h(v,y,w){return w===void 0&&(w=a.identity),function(b){d(y,function(){for(var p=v.length,_=new Array(p),O=p,P=p,R=function(A){d(y,function(){var M=o.from(v[A],y),N=!1;M.subscribe(c.createOperatorSubscriber(b,function(j){_[A]=j,N||(N=!0,P--),P||b.next(w(_.slice()))},function(){--O||b.complete()}))},b)},T=0;T<p;T++)R(T)},b)}}function d(v,y,w){v?f.executeSchedule(w,v,y):y()}e.combineLatest=function(){for(var v=[],y=0;y<arguments.length;y++)v[y]=arguments[y];var w=u.popScheduler(v),b=u.popResultSelector(v),p=i.argsArgArrayOrObject(v),_=p.args,O=p.keys;if(_.length===0)return o.from([],w);var P=new n.Observable(h(_,w,O?function(R){return l.createObject(O,R)}:a.identity));return b?P.pipe(s.mapOneOrManyArgs(b)):P},e.combineLatestInit=h},3865:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.concat=void 0;var n=t(8158),i=t(1107),o=t(4917);e.concat=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return n.concatAll()(o.from(a,i.popScheduler(a)))}},7579:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.connectable=void 0;var n=t(2483),i=t(4662),o=t(9353),a={connector:function(){return new n.Subject},resetOnDisconnect:!0};e.connectable=function(s,u){u===void 0&&(u=a);var l=null,c=u.connector,f=u.resetOnDisconnect,h=f===void 0||f,d=c(),v=new i.Observable(function(y){return d.subscribe(y)});return v.connect=function(){return l&&!l.closed||(l=o.defer(function(){return s}).subscribe(d),h&&l.add(function(){return d=c()})),l},v}},9353:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.defer=void 0;var n=t(4662),i=t(9445);e.defer=function(o){return new n.Observable(function(a){i.innerFrom(o()).subscribe(a)})}},3110:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrames=void 0;var n=t(4662),i=t(4746),o=t(9507);function a(u){return new n.Observable(function(l){var c=u||i.performanceTimestampProvider,f=c.now(),h=0,d=function(){l.closed||(h=o.animationFrameProvider.requestAnimationFrame(function(v){h=0;var y=c.now();l.next({timestamp:u?y:v,elapsed:y-f}),d()}))};return d(),function(){h&&o.animationFrameProvider.cancelAnimationFrame(h)}})}e.animationFrames=function(u){return u?a(u):s};var s=a()},8616:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.empty=e.EMPTY=void 0;var n=t(4662);e.EMPTY=new n.Observable(function(i){return i.complete()}),e.empty=function(i){return i?function(o){return new n.Observable(function(a){return o.schedule(function(){return a.complete()})})}(i):e.EMPTY}},9105:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.forkJoin=void 0;var n=t(4662),i=t(7360),o=t(9445),a=t(1107),s=t(3111),u=t(1251),l=t(6013);e.forkJoin=function(){for(var c=[],f=0;f<arguments.length;f++)c[f]=arguments[f];var h=a.popResultSelector(c),d=i.argsArgArrayOrObject(c),v=d.args,y=d.keys,w=new n.Observable(function(b){var p=v.length;if(p)for(var _=new Array(p),O=p,P=p,R=function(A){var M=!1;o.innerFrom(v[A]).subscribe(s.createOperatorSubscriber(b,function(N){M||(M=!0,P--),_[A]=N},function(){return O--},void 0,function(){O&&M||(P||b.next(y?l.createObject(y,_):_),b.complete())}))},T=0;T<p;T++)R(T);else b.complete()});return h?w.pipe(u.mapOneOrManyArgs(h)):w}},4917:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.from=void 0;var n=t(1656),i=t(9445);e.from=function(o,a){return a?n.scheduled(o,a):i.innerFrom(o)}},5337:function(r,e,t){var n=this&&this.__read||function(v,y){var w=typeof Symbol=="function"&&v[Symbol.iterator];if(!w)return v;var b,p,_=w.call(v),O=[];try{for(;(y===void 0||y-- >0)&&!(b=_.next()).done;)O.push(b.value)}catch(P){p={error:P}}finally{try{b&&!b.done&&(w=_.return)&&w.call(_)}finally{if(p)throw p.error}}return O};Object.defineProperty(e,"__esModule",{value:!0}),e.fromEvent=void 0;var i=t(9445),o=t(4662),a=t(983),s=t(8046),u=t(1018),l=t(1251),c=["addListener","removeListener"],f=["addEventListener","removeEventListener"],h=["on","off"];function d(v,y){return function(w){return function(b){return v[w](y,b)}}}e.fromEvent=function v(y,w,b,p){if(u.isFunction(b)&&(p=b,b=void 0),p)return v(y,w,b).pipe(l.mapOneOrManyArgs(p));var _=n(function(R){return u.isFunction(R.addEventListener)&&u.isFunction(R.removeEventListener)}(y)?f.map(function(R){return function(T){return y[R](w,T,b)}}):function(R){return u.isFunction(R.addListener)&&u.isFunction(R.removeListener)}(y)?c.map(d(y,w)):function(R){return u.isFunction(R.on)&&u.isFunction(R.off)}(y)?h.map(d(y,w)):[],2),O=_[0],P=_[1];if(!O&&s.isArrayLike(y))return a.mergeMap(function(R){return v(R,w,b)})(i.innerFrom(y));if(!O)throw new TypeError("Invalid event target");return new o.Observable(function(R){var T=function(){for(var A=[],M=0;M<arguments.length;M++)A[M]=arguments[M];return R.next(1<A.length?A:A[0])};return O(T),function(){return P(T)}})}},347:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fromEventPattern=void 0;var n=t(4662),i=t(1018),o=t(1251);e.fromEventPattern=function a(s,u,l){return l?a(s,u).pipe(o.mapOneOrManyArgs(l)):new n.Observable(function(c){var f=function(){for(var d=[],v=0;v<arguments.length;v++)d[v]=arguments[v];return c.next(d.length===1?d[0]:d)},h=s(f);return i.isFunction(u)?function(){return u(f,h)}:void 0})}},6824:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fromSubscribable=void 0;var n=t(4662);e.fromSubscribable=function(i){return new n.Observable(function(o){return i.subscribe(o)})}},7610:function(r,e,t){var n=this&&this.__generator||function(u,l){var c,f,h,d,v={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return d={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function y(w){return function(b){return function(p){if(c)throw new TypeError("Generator is already executing.");for(;v;)try{if(c=1,f&&(h=2&p[0]?f.return:p[0]?f.throw||((h=f.return)&&h.call(f),0):f.next)&&!(h=h.call(f,p[1])).done)return h;switch(f=0,h&&(p=[2&p[0],h.value]),p[0]){case 0:case 1:h=p;break;case 4:return v.label++,{value:p[1],done:!1};case 5:v.label++,f=p[1],p=[0];continue;case 7:p=v.ops.pop(),v.trys.pop();continue;default:if(!((h=(h=v.trys).length>0&&h[h.length-1])||p[0]!==6&&p[0]!==2)){v=0;continue}if(p[0]===3&&(!h||p[1]>h[0]&&p[1]<h[3])){v.label=p[1];break}if(p[0]===6&&v.label<h[1]){v.label=h[1],h=p;break}if(h&&v.label<h[2]){v.label=h[2],v.ops.push(p);break}h[2]&&v.ops.pop(),v.trys.pop();continue}p=l.call(u,v)}catch(_){p=[6,_],f=0}finally{c=h=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}([w,b])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.generate=void 0;var i=t(6640),o=t(8613),a=t(9353),s=t(8808);e.generate=function(u,l,c,f,h){var d,v,y,w;function b(){var p;return n(this,function(_){switch(_.label){case 0:p=w,_.label=1;case 1:return l&&!l(p)?[3,4]:[4,y(p)];case 2:_.sent(),_.label=3;case 3:return p=c(p),[3,1];case 4:return[2]}})}return arguments.length===1?(w=(d=u).initialState,l=d.condition,c=d.iterate,v=d.resultSelector,y=v===void 0?i.identity:v,h=d.scheduler):(w=u,!f||o.isScheduler(f)?(y=i.identity,h=f):y=f),a.defer(h?function(){return s.scheduleIterable(b(),h)}:b)}},4209:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.iif=void 0;var n=t(9353);e.iif=function(i,o,a){return n.defer(function(){return i()?o:a})}},9445:function(r,e,t){var n=this&&this.__awaiter||function(A,M,N,j){return new(N||(N=Promise))(function(B,q){function W(re){try{te(j.next(re))}catch(ee){q(ee)}}function J(re){try{te(j.throw(re))}catch(ee){q(ee)}}function te(re){var ee;re.done?B(re.value):(ee=re.value,ee instanceof N?ee:new N(function(fe){fe(ee)})).then(W,J)}te((j=j.apply(A,M||[])).next())})},i=this&&this.__generator||function(A,M){var N,j,B,q,W={label:0,sent:function(){if(1&B[0])throw B[1];return B[1]},trys:[],ops:[]};return q={next:J(0),throw:J(1),return:J(2)},typeof Symbol=="function"&&(q[Symbol.iterator]=function(){return this}),q;function J(te){return function(re){return function(ee){if(N)throw new TypeError("Generator is already executing.");for(;W;)try{if(N=1,j&&(B=2&ee[0]?j.return:ee[0]?j.throw||((B=j.return)&&B.call(j),0):j.next)&&!(B=B.call(j,ee[1])).done)return B;switch(j=0,B&&(ee=[2&ee[0],B.value]),ee[0]){case 0:case 1:B=ee;break;case 4:return W.label++,{value:ee[1],done:!1};case 5:W.label++,j=ee[1],ee=[0];continue;case 7:ee=W.ops.pop(),W.trys.pop();continue;default:if(!((B=(B=W.trys).length>0&&B[B.length-1])||ee[0]!==6&&ee[0]!==2)){W=0;continue}if(ee[0]===3&&(!B||ee[1]>B[0]&&ee[1]<B[3])){W.label=ee[1];break}if(ee[0]===6&&W.label<B[1]){W.label=B[1],B=ee;break}if(B&&W.label<B[2]){W.label=B[2],W.ops.push(ee);break}B[2]&&W.ops.pop(),W.trys.pop();continue}ee=M.call(A,W)}catch(fe){ee=[6,fe],j=0}finally{N=B=0}if(5&ee[0])throw ee[1];return{value:ee[0]?ee[1]:void 0,done:!0}}([te,re])}}},o=this&&this.__asyncValues||function(A){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var M,N=A[Symbol.asyncIterator];return N?N.call(A):(A=typeof a=="function"?a(A):A[Symbol.iterator](),M={},j("next"),j("throw"),j("return"),M[Symbol.asyncIterator]=function(){return this},M);function j(B){M[B]=A[B]&&function(q){return new Promise(function(W,J){(function(te,re,ee,fe){Promise.resolve(fe).then(function(he){te({value:he,done:ee})},re)})(W,J,(q=A[B](q)).done,q.value)})}}},a=this&&this.__values||function(A){var M=typeof Symbol=="function"&&Symbol.iterator,N=M&&A[M],j=0;if(N)return N.call(A);if(A&&typeof A.length=="number")return{next:function(){return A&&j>=A.length&&(A=void 0),{value:A&&A[j++],done:!A}}};throw new TypeError(M?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.fromReadableStreamLike=e.fromAsyncIterable=e.fromIterable=e.fromPromise=e.fromArrayLike=e.fromInteropObservable=e.innerFrom=void 0;var s=t(8046),u=t(7629),l=t(4662),c=t(1116),f=t(1358),h=t(7614),d=t(6368),v=t(9137),y=t(1018),w=t(7315),b=t(3327);function p(A){return new l.Observable(function(M){var N=A[b.observable]();if(y.isFunction(N.subscribe))return N.subscribe(M);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function _(A){return new l.Observable(function(M){for(var N=0;N<A.length&&!M.closed;N++)M.next(A[N]);M.complete()})}function O(A){return new l.Observable(function(M){A.then(function(N){M.closed||(M.next(N),M.complete())},function(N){return M.error(N)}).then(null,w.reportUnhandledError)})}function P(A){return new l.Observable(function(M){var N,j;try{for(var B=a(A),q=B.next();!q.done;q=B.next()){var W=q.value;if(M.next(W),M.closed)return}}catch(J){N={error:J}}finally{try{q&&!q.done&&(j=B.return)&&j.call(B)}finally{if(N)throw N.error}}M.complete()})}function R(A){return new l.Observable(function(M){(function(N,j){var B,q,W,J;return n(this,void 0,void 0,function(){var te,re;return i(this,function(ee){switch(ee.label){case 0:ee.trys.push([0,5,6,11]),B=o(N),ee.label=1;case 1:return[4,B.next()];case 2:if((q=ee.sent()).done)return[3,4];if(te=q.value,j.next(te),j.closed)return[2];ee.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return re=ee.sent(),W={error:re},[3,11];case 6:return ee.trys.push([6,,9,10]),q&&!q.done&&(J=B.return)?[4,J.call(B)]:[3,8];case 7:ee.sent(),ee.label=8;case 8:return[3,10];case 9:if(W)throw W.error;return[7];case 10:return[7];case 11:return j.complete(),[2]}})})})(A,M).catch(function(N){return M.error(N)})})}function T(A){return R(v.readableStreamLikeToAsyncGenerator(A))}e.innerFrom=function(A){if(A instanceof l.Observable)return A;if(A!=null){if(c.isInteropObservable(A))return p(A);if(s.isArrayLike(A))return _(A);if(u.isPromise(A))return O(A);if(f.isAsyncIterable(A))return R(A);if(d.isIterable(A))return P(A);if(v.isReadableStreamLike(A))return T(A)}throw h.createInvalidObservableTypeError(A)},e.fromInteropObservable=p,e.fromArrayLike=_,e.fromPromise=O,e.fromIterable=P,e.fromAsyncIterable=R,e.fromReadableStreamLike=T},6472:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.interval=void 0;var n=t(7961),i=t(4092);e.interval=function(o,a){return o===void 0&&(o=0),a===void 0&&(a=n.asyncScheduler),o<0&&(o=0),i.timer(o,o,a)}},2833:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.merge=void 0;var n=t(7302),i=t(9445),o=t(8616),a=t(1107),s=t(4917);e.merge=function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];var c=a.popScheduler(u),f=a.popNumber(u,1/0),h=u;return h.length?h.length===1?i.innerFrom(h[0]):n.mergeAll(f)(s.from(h,c)):o.EMPTY}},8655:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.never=e.NEVER=void 0;var n=t(4662),i=t(1342);e.NEVER=new n.Observable(i.noop),e.never=function(){return e.NEVER}},1004:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.of=void 0;var n=t(1107),i=t(4917);e.of=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var s=n.popScheduler(o);return i.from(o,s)}},6102:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.onErrorResumeNext=void 0;var n=t(4662),i=t(8535),o=t(3111),a=t(1342),s=t(9445);e.onErrorResumeNext=function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];var c=i.argsOrArgArray(u);return new n.Observable(function(f){var h=0,d=function(){if(h<c.length){var v=void 0;try{v=s.innerFrom(c[h++])}catch{return void d()}var y=new o.OperatorSubscriber(f,void 0,a.noop,a.noop);v.subscribe(y),y.add(d)}else f.complete()};d()})}},7740:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.pairs=void 0;var n=t(4917);e.pairs=function(i,o){return n.from(Object.entries(i),o)}},1699:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.partition=void 0;var n=t(245),i=t(783),o=t(9445);e.partition=function(a,s,u){return[i.filter(s,u)(o.innerFrom(a)),i.filter(n.not(s,u))(o.innerFrom(a))]}},5584:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.raceInit=e.race=void 0;var n=t(4662),i=t(9445),o=t(8535),a=t(3111);function s(u){return function(l){for(var c=[],f=function(d){c.push(i.innerFrom(u[d]).subscribe(a.createOperatorSubscriber(l,function(v){if(c){for(var y=0;y<c.length;y++)y!==d&&c[y].unsubscribe();c=null}l.next(v)})))},h=0;c&&!l.closed&&h<u.length;h++)f(h)}}e.race=function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];return(u=o.argsOrArgArray(u)).length===1?i.innerFrom(u[0]):new n.Observable(s(u))},e.raceInit=s},9376:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.range=void 0;var n=t(4662),i=t(8616);e.range=function(o,a,s){if(a==null&&(a=o,o=0),a<=0)return i.EMPTY;var u=a+o;return new n.Observable(s?function(l){var c=o;return s.schedule(function(){c<u?(l.next(c++),this.schedule()):l.complete()})}:function(l){for(var c=o;c<u&&!l.closed;)l.next(c++);l.complete()})}},1103:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.throwError=void 0;var n=t(4662),i=t(1018);e.throwError=function(o,a){var s=i.isFunction(o)?o:function(){return o},u=function(l){return l.error(s())};return new n.Observable(a?function(l){return a.schedule(u,0,l)}:u)}},4092:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.timer=void 0;var n=t(4662),i=t(7961),o=t(8613),a=t(1074);e.timer=function(s,u,l){s===void 0&&(s=0),l===void 0&&(l=i.async);var c=-1;return u!=null&&(o.isScheduler(u)?l=u:c=u),new n.Observable(function(f){var h=a.isValidDate(s)?+s-l.now():s;h<0&&(h=0);var d=0;return l.schedule(function(){f.closed||(f.next(d++),0<=c?this.schedule(void 0,c):f.complete())},h)})}},7853:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.using=void 0;var n=t(4662),i=t(9445),o=t(8616);e.using=function(a,s){return new n.Observable(function(u){var l=a(),c=s(l);return(c?i.innerFrom(c):o.EMPTY).subscribe(u),function(){l&&l.unsubscribe()}})}},7286:function(r,e,t){var n=this&&this.__read||function(f,h){var d=typeof Symbol=="function"&&f[Symbol.iterator];if(!d)return f;var v,y,w=d.call(f),b=[];try{for(;(h===void 0||h-- >0)&&!(v=w.next()).done;)b.push(v.value)}catch(p){y={error:p}}finally{try{v&&!v.done&&(d=w.return)&&d.call(w)}finally{if(y)throw y.error}}return b},i=this&&this.__spreadArray||function(f,h){for(var d=0,v=h.length,y=f.length;d<v;d++,y++)f[y]=h[d];return f};Object.defineProperty(e,"__esModule",{value:!0}),e.zip=void 0;var o=t(4662),a=t(9445),s=t(8535),u=t(8616),l=t(3111),c=t(1107);e.zip=function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];var d=c.popResultSelector(f),v=s.argsOrArgArray(f);return v.length?new o.Observable(function(y){var w=v.map(function(){return[]}),b=v.map(function(){return!1});y.add(function(){w=b=null});for(var p=function(O){a.innerFrom(v[O]).subscribe(l.createOperatorSubscriber(y,function(P){if(w[O].push(P),w.every(function(T){return T.length})){var R=w.map(function(T){return T.shift()});y.next(d?d.apply(void 0,i([],n(R))):R),w.some(function(T,A){return!T.length&&b[A]})&&y.complete()}},function(){b[O]=!0,!w[O].length&&y.complete()}))},_=0;!y.closed&&_<v.length;_++)p(_);return function(){w=b=null}}):u.EMPTY}},3111:function(r,e,t){var n,i=this&&this.__extends||(n=function(s,u){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(l[f]=c[f])},n(s,u)},function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function l(){this.constructor=s}n(s,u),s.prototype=u===null?Object.create(u):(l.prototype=u.prototype,new l)});Object.defineProperty(e,"__esModule",{value:!0}),e.OperatorSubscriber=e.createOperatorSubscriber=void 0;var o=t(5);e.createOperatorSubscriber=function(s,u,l,c,f){return new a(s,u,l,c,f)};var a=function(s){function u(l,c,f,h,d,v){var y=s.call(this,l)||this;return y.onFinalize=d,y.shouldUnsubscribe=v,y._next=c?function(w){try{c(w)}catch(b){l.error(b)}}:s.prototype._next,y._error=h?function(w){try{h(w)}catch(b){l.error(b)}finally{this.unsubscribe()}}:s.prototype._error,y._complete=f?function(){try{f()}catch(w){l.error(w)}finally{this.unsubscribe()}}:s.prototype._complete,y}return i(u,s),u.prototype.unsubscribe=function(){var l;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var c=this.closed;s.prototype.unsubscribe.call(this),!c&&((l=this.onFinalize)===null||l===void 0||l.call(this))}},u}(o.Subscriber);e.OperatorSubscriber=a},3146:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.audit=void 0;var n=t(7843),i=t(9445),o=t(3111);e.audit=function(a){return n.operate(function(s,u){var l=!1,c=null,f=null,h=!1,d=function(){if(f==null||f.unsubscribe(),f=null,l){l=!1;var y=c;c=null,u.next(y)}h&&u.complete()},v=function(){f=null,h&&u.complete()};s.subscribe(o.createOperatorSubscriber(u,function(y){l=!0,c=y,f||i.innerFrom(a(y)).subscribe(f=o.createOperatorSubscriber(u,d,v))},function(){h=!0,(!l||!f||f.closed)&&u.complete()}))})}},3231:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.auditTime=void 0;var n=t(7961),i=t(3146),o=t(4092);e.auditTime=function(a,s){return s===void 0&&(s=n.asyncScheduler),i.audit(function(){return o.timer(a,s)})}},8015:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.buffer=void 0;var n=t(7843),i=t(1342),o=t(3111),a=t(9445);e.buffer=function(s){return n.operate(function(u,l){var c=[];return u.subscribe(o.createOperatorSubscriber(l,function(f){return c.push(f)},function(){l.next(c),l.complete()})),a.innerFrom(s).subscribe(o.createOperatorSubscriber(l,function(){var f=c;c=[],l.next(f)},i.noop)),function(){c=null}})}},5572:function(r,e,t){var n=this&&this.__values||function(s){var u=typeof Symbol=="function"&&Symbol.iterator,l=u&&s[u],c=0;if(l)return l.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&c>=s.length&&(s=void 0),{value:s&&s[c++],done:!s}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.bufferCount=void 0;var i=t(7843),o=t(3111),a=t(7479);e.bufferCount=function(s,u){return u===void 0&&(u=null),u=u??s,i.operate(function(l,c){var f=[],h=0;l.subscribe(o.createOperatorSubscriber(c,function(d){var v,y,w,b,p=null;h++%u==0&&f.push([]);try{for(var _=n(f),O=_.next();!O.done;O=_.next())(T=O.value).push(d),s<=T.length&&(p=p??[]).push(T)}catch(A){v={error:A}}finally{try{O&&!O.done&&(y=_.return)&&y.call(_)}finally{if(v)throw v.error}}if(p)try{for(var P=n(p),R=P.next();!R.done;R=P.next()){var T=R.value;a.arrRemove(f,T),c.next(T)}}catch(A){w={error:A}}finally{try{R&&!R.done&&(b=P.return)&&b.call(P)}finally{if(w)throw w.error}}},function(){var d,v;try{for(var y=n(f),w=y.next();!w.done;w=y.next()){var b=w.value;c.next(b)}}catch(p){d={error:p}}finally{try{w&&!w.done&&(v=y.return)&&v.call(y)}finally{if(d)throw d.error}}c.complete()},void 0,function(){f=null}))})}},7210:function(r,e,t){var n=this&&this.__values||function(f){var h=typeof Symbol=="function"&&Symbol.iterator,d=h&&f[h],v=0;if(d)return d.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&v>=f.length&&(f=void 0),{value:f&&f[v++],done:!f}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.bufferTime=void 0;var i=t(8014),o=t(7843),a=t(3111),s=t(7479),u=t(7961),l=t(1107),c=t(7110);e.bufferTime=function(f){for(var h,d,v=[],y=1;y<arguments.length;y++)v[y-1]=arguments[y];var w=(h=l.popScheduler(v))!==null&&h!==void 0?h:u.asyncScheduler,b=(d=v[0])!==null&&d!==void 0?d:null,p=v[1]||1/0;return o.operate(function(_,O){var P=[],R=!1,T=function(N){var j=N.buffer;N.subs.unsubscribe(),s.arrRemove(P,N),O.next(j),R&&A()},A=function(){if(P){var N=new i.Subscription;O.add(N);var j={buffer:[],subs:N};P.push(j),c.executeSchedule(N,w,function(){return T(j)},f)}};b!==null&&b>=0?c.executeSchedule(O,w,A,b,!0):R=!0,A();var M=a.createOperatorSubscriber(O,function(N){var j,B,q=P.slice();try{for(var W=n(q),J=W.next();!J.done;J=W.next()){var te=J.value,re=te.buffer;re.push(N),p<=re.length&&T(te)}}catch(ee){j={error:ee}}finally{try{J&&!J.done&&(B=W.return)&&B.call(W)}finally{if(j)throw j.error}}},function(){for(;P!=null&&P.length;)O.next(P.shift().buffer);M==null||M.unsubscribe(),O.complete(),O.unsubscribe()},void 0,function(){return P=null});_.subscribe(M)})}},8995:function(r,e,t){var n=this&&this.__values||function(c){var f=typeof Symbol=="function"&&Symbol.iterator,h=f&&c[f],d=0;if(h)return h.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&d>=c.length&&(c=void 0),{value:c&&c[d++],done:!c}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.bufferToggle=void 0;var i=t(8014),o=t(7843),a=t(9445),s=t(3111),u=t(1342),l=t(7479);e.bufferToggle=function(c,f){return o.operate(function(h,d){var v=[];a.innerFrom(c).subscribe(s.createOperatorSubscriber(d,function(y){var w=[];v.push(w);var b=new i.Subscription;b.add(a.innerFrom(f(y)).subscribe(s.createOperatorSubscriber(d,function(){l.arrRemove(v,w),d.next(w),b.unsubscribe()},u.noop)))},u.noop)),h.subscribe(s.createOperatorSubscriber(d,function(y){var w,b;try{for(var p=n(v),_=p.next();!_.done;_=p.next())_.value.push(y)}catch(O){w={error:O}}finally{try{_&&!_.done&&(b=p.return)&&b.call(p)}finally{if(w)throw w.error}}},function(){for(;v.length>0;)d.next(v.shift());d.complete()}))})}},8831:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.bufferWhen=void 0;var n=t(7843),i=t(1342),o=t(3111),a=t(9445);e.bufferWhen=function(s){return n.operate(function(u,l){var c=null,f=null,h=function(){f==null||f.unsubscribe();var d=c;c=[],d&&l.next(d),a.innerFrom(s()).subscribe(f=o.createOperatorSubscriber(l,h,i.noop))};h(),u.subscribe(o.createOperatorSubscriber(l,function(d){return c==null?void 0:c.push(d)},function(){c&&l.next(c),l.complete()},void 0,function(){return c=f=null}))})}},8118:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.catchError=void 0;var n=t(9445),i=t(3111),o=t(7843);e.catchError=function a(s){return o.operate(function(u,l){var c,f=null,h=!1;f=u.subscribe(i.createOperatorSubscriber(l,void 0,void 0,function(d){c=n.innerFrom(s(d,a(s)(u))),f?(f.unsubscribe(),f=null,c.subscribe(l)):h=!0})),h&&(f.unsubscribe(),f=null,c.subscribe(l))})}},6625:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.combineAll=void 0;var n=t(6728);e.combineAll=n.combineLatestAll},2551:function(r,e,t){var n=this&&this.__read||function(f,h){var d=typeof Symbol=="function"&&f[Symbol.iterator];if(!d)return f;var v,y,w=d.call(f),b=[];try{for(;(h===void 0||h-- >0)&&!(v=w.next()).done;)b.push(v.value)}catch(p){y={error:p}}finally{try{v&&!v.done&&(d=w.return)&&d.call(w)}finally{if(y)throw y.error}}return b},i=this&&this.__spreadArray||function(f,h){for(var d=0,v=h.length,y=f.length;d<v;d++,y++)f[y]=h[d];return f};Object.defineProperty(e,"__esModule",{value:!0}),e.combineLatest=void 0;var o=t(3247),a=t(7843),s=t(8535),u=t(1251),l=t(2706),c=t(1107);e.combineLatest=function f(){for(var h=[],d=0;d<arguments.length;d++)h[d]=arguments[d];var v=c.popResultSelector(h);return v?l.pipe(f.apply(void 0,i([],n(h))),u.mapOneOrManyArgs(v)):a.operate(function(y,w){o.combineLatestInit(i([y],n(s.argsOrArgArray(h))))(w)})}},6728:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.combineLatestAll=void 0;var n=t(3247),i=t(3638);e.combineLatestAll=function(o){return i.joinAllInternals(n.combineLatest,o)}},8239:function(r,e,t){var n=this&&this.__read||function(a,s){var u=typeof Symbol=="function"&&a[Symbol.iterator];if(!u)return a;var l,c,f=u.call(a),h=[];try{for(;(s===void 0||s-- >0)&&!(l=f.next()).done;)h.push(l.value)}catch(d){c={error:d}}finally{try{l&&!l.done&&(u=f.return)&&u.call(f)}finally{if(c)throw c.error}}return h},i=this&&this.__spreadArray||function(a,s){for(var u=0,l=s.length,c=a.length;u<l;u++,c++)a[c]=s[u];return a};Object.defineProperty(e,"__esModule",{value:!0}),e.combineLatestWith=void 0;var o=t(2551);e.combineLatestWith=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return o.combineLatest.apply(void 0,i([],n(a)))}},7601:function(r,e,t){var n=this&&this.__read||function(l,c){var f=typeof Symbol=="function"&&l[Symbol.iterator];if(!f)return l;var h,d,v=f.call(l),y=[];try{for(;(c===void 0||c-- >0)&&!(h=v.next()).done;)y.push(h.value)}catch(w){d={error:w}}finally{try{h&&!h.done&&(f=v.return)&&f.call(v)}finally{if(d)throw d.error}}return y},i=this&&this.__spreadArray||function(l,c){for(var f=0,h=c.length,d=l.length;f<h;f++,d++)l[d]=c[f];return l};Object.defineProperty(e,"__esModule",{value:!0}),e.concat=void 0;var o=t(7843),a=t(8158),s=t(1107),u=t(4917);e.concat=function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];var f=s.popScheduler(l);return o.operate(function(h,d){a.concatAll()(u.from(i([h],n(l)),f)).subscribe(d)})}},8158:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.concatAll=void 0;var n=t(7302);e.concatAll=function(){return n.mergeAll(1)}},9135:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.concatMap=void 0;var n=t(983),i=t(1018);e.concatMap=function(o,a){return i.isFunction(a)?n.mergeMap(o,a,1):n.mergeMap(o,1)}},9938:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.concatMapTo=void 0;var n=t(9135),i=t(1018);e.concatMapTo=function(o,a){return i.isFunction(a)?n.concatMap(function(){return o},a):n.concatMap(function(){return o})}},9669:function(r,e,t){var n=this&&this.__read||function(a,s){var u=typeof Symbol=="function"&&a[Symbol.iterator];if(!u)return a;var l,c,f=u.call(a),h=[];try{for(;(s===void 0||s-- >0)&&!(l=f.next()).done;)h.push(l.value)}catch(d){c={error:d}}finally{try{l&&!l.done&&(u=f.return)&&u.call(f)}finally{if(c)throw c.error}}return h},i=this&&this.__spreadArray||function(a,s){for(var u=0,l=s.length,c=a.length;u<l;u++,c++)a[c]=s[u];return a};Object.defineProperty(e,"__esModule",{value:!0}),e.concatWith=void 0;var o=t(7601);e.concatWith=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return o.concat.apply(void 0,i([],n(a)))}},1483:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.connect=void 0;var n=t(2483),i=t(9445),o=t(7843),a=t(6824),s={connector:function(){return new n.Subject}};e.connect=function(u,l){l===void 0&&(l=s);var c=l.connector;return o.operate(function(f,h){var d=c();i.innerFrom(u(a.fromSubscribable(d))).subscribe(h),h.add(f.subscribe(d))})}},1038:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.count=void 0;var n=t(9139);e.count=function(i){return n.reduce(function(o,a,s){return!i||i(a,s)?o+1:o},0)}},4461:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.debounce=void 0;var n=t(7843),i=t(1342),o=t(3111),a=t(9445);e.debounce=function(s){return n.operate(function(u,l){var c=!1,f=null,h=null,d=function(){if(h==null||h.unsubscribe(),h=null,c){c=!1;var v=f;f=null,l.next(v)}};u.subscribe(o.createOperatorSubscriber(l,function(v){h==null||h.unsubscribe(),c=!0,f=v,h=o.createOperatorSubscriber(l,d,i.noop),a.innerFrom(s(v)).subscribe(h)},function(){d(),l.complete()},void 0,function(){f=h=null}))})}},8079:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.debounceTime=void 0;var n=t(7961),i=t(7843),o=t(3111);e.debounceTime=function(a,s){return s===void 0&&(s=n.asyncScheduler),i.operate(function(u,l){var c=null,f=null,h=null,d=function(){if(c){c.unsubscribe(),c=null;var y=f;f=null,l.next(y)}};function v(){var y=h+a,w=s.now();if(w<y)return c=this.schedule(void 0,y-w),void l.add(c);d()}u.subscribe(o.createOperatorSubscriber(l,function(y){f=y,h=s.now(),c||(c=s.schedule(v,a),l.add(c))},function(){d(),l.complete()},void 0,function(){f=c=null}))})}},378:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.defaultIfEmpty=void 0;var n=t(7843),i=t(3111);e.defaultIfEmpty=function(o){return n.operate(function(a,s){var u=!1;a.subscribe(i.createOperatorSubscriber(s,function(l){u=!0,s.next(l)},function(){u||s.next(o),s.complete()}))})}},914:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.delay=void 0;var n=t(7961),i=t(8766),o=t(4092);e.delay=function(a,s){s===void 0&&(s=n.asyncScheduler);var u=o.timer(a,s);return i.delayWhen(function(){return u})}},8766:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.delayWhen=void 0;var n=t(3865),i=t(846),o=t(490),a=t(3218),s=t(983),u=t(9445);e.delayWhen=function l(c,f){return f?function(h){return n.concat(f.pipe(i.take(1),o.ignoreElements()),h.pipe(l(c)))}:s.mergeMap(function(h,d){return u.innerFrom(c(h,d)).pipe(i.take(1),a.mapTo(h))})}},7441:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.dematerialize=void 0;var n=t(7800),i=t(7843),o=t(3111);e.dematerialize=function(){return i.operate(function(a,s){a.subscribe(o.createOperatorSubscriber(s,function(u){return n.observeNotification(u,s)}))})}},5365:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.distinct=void 0;var n=t(7843),i=t(3111),o=t(1342),a=t(9445);e.distinct=function(s,u){return n.operate(function(l,c){var f=new Set;l.subscribe(i.createOperatorSubscriber(c,function(h){var d=s?s(h):h;f.has(d)||(f.add(d),c.next(h))})),u&&a.innerFrom(u).subscribe(i.createOperatorSubscriber(c,function(){return f.clear()},o.noop))})}},8937:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.distinctUntilChanged=void 0;var n=t(6640),i=t(7843),o=t(3111);function a(s,u){return s===u}e.distinctUntilChanged=function(s,u){return u===void 0&&(u=n.identity),s=s??a,i.operate(function(l,c){var f,h=!0;l.subscribe(o.createOperatorSubscriber(c,function(d){var v=u(d);!h&&s(f,v)||(h=!1,f=v,c.next(d))}))})}},9612:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.distinctUntilKeyChanged=void 0;var n=t(8937);e.distinctUntilKeyChanged=function(i,o){return n.distinctUntilChanged(function(a,s){return o?o(a[i],s[i]):a[i]===s[i]})}},4520:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.elementAt=void 0;var n=t(7057),i=t(783),o=t(4869),a=t(378),s=t(846);e.elementAt=function(u,l){if(u<0)throw new n.ArgumentOutOfRangeError;var c=arguments.length>=2;return function(f){return f.pipe(i.filter(function(h,d){return d===u}),s.take(1),c?a.defaultIfEmpty(l):o.throwIfEmpty(function(){return new n.ArgumentOutOfRangeError}))}}},1776:function(r,e,t){var n=this&&this.__read||function(s,u){var l=typeof Symbol=="function"&&s[Symbol.iterator];if(!l)return s;var c,f,h=l.call(s),d=[];try{for(;(u===void 0||u-- >0)&&!(c=h.next()).done;)d.push(c.value)}catch(v){f={error:v}}finally{try{c&&!c.done&&(l=h.return)&&l.call(h)}finally{if(f)throw f.error}}return d},i=this&&this.__spreadArray||function(s,u){for(var l=0,c=u.length,f=s.length;l<c;l++,f++)s[f]=u[l];return s};Object.defineProperty(e,"__esModule",{value:!0}),e.endWith=void 0;var o=t(3865),a=t(1004);e.endWith=function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];return function(l){return o.concat(l,a.of.apply(void 0,i([],n(s))))}}},5510:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.every=void 0;var n=t(7843),i=t(3111);e.every=function(o,a){return n.operate(function(s,u){var l=0;s.subscribe(i.createOperatorSubscriber(u,function(c){o.call(a,c,l++,s)||(u.next(!1),u.complete())},function(){u.next(!0),u.complete()}))})}},1551:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.exhaust=void 0;var n=t(2752);e.exhaust=n.exhaustAll},2752:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.exhaustAll=void 0;var n=t(4753),i=t(6640);e.exhaustAll=function(){return n.exhaustMap(i.identity)}},4753:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.exhaustMap=void 0;var n=t(5471),i=t(9445),o=t(7843),a=t(3111);e.exhaustMap=function s(u,l){return l?function(c){return c.pipe(s(function(f,h){return i.innerFrom(u(f,h)).pipe(n.map(function(d,v){return l(f,d,h,v)}))}))}:o.operate(function(c,f){var h=0,d=null,v=!1;c.subscribe(a.createOperatorSubscriber(f,function(y){d||(d=a.createOperatorSubscriber(f,void 0,function(){d=null,v&&f.complete()}),i.innerFrom(u(y,h++)).subscribe(d))},function(){v=!0,!d&&f.complete()}))})}},7661:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.expand=void 0;var n=t(7843),i=t(1983);e.expand=function(o,a,s){return a===void 0&&(a=1/0),a=(a||0)<1?1/0:a,n.operate(function(u,l){return i.mergeInternals(u,l,o,a,void 0,!0,s)})}},783:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.filter=void 0;var n=t(7843),i=t(3111);e.filter=function(o,a){return n.operate(function(s,u){var l=0;s.subscribe(i.createOperatorSubscriber(u,function(c){return o.call(a,c,l++)&&u.next(c)}))})}},3555:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.finalize=void 0;var n=t(7843);e.finalize=function(i){return n.operate(function(o,a){try{o.subscribe(a)}finally{a.add(i)}})}},7714:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createFind=e.find=void 0;var n=t(7843),i=t(3111);function o(a,s,u){var l=u==="index";return function(c,f){var h=0;c.subscribe(i.createOperatorSubscriber(f,function(d){var v=h++;a.call(s,d,v,c)&&(f.next(l?v:d),f.complete())},function(){f.next(l?-1:void 0),f.complete()}))}}e.find=function(a,s){return n.operate(o(a,s,"value"))},e.createFind=o},9756:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.findIndex=void 0;var n=t(7843),i=t(7714);e.findIndex=function(o,a){return n.operate(i.createFind(o,a,"index"))}},8275:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.first=void 0;var n=t(2823),i=t(783),o=t(846),a=t(378),s=t(4869),u=t(6640);e.first=function(l,c){var f=arguments.length>=2;return function(h){return h.pipe(l?i.filter(function(d,v){return l(d,v,h)}):u.identity,o.take(1),f?a.defaultIfEmpty(c):s.throwIfEmpty(function(){return new n.EmptyError}))}}},6902:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.flatMap=void 0;var n=t(983);e.flatMap=n.mergeMap},7815:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.groupBy=void 0;var n=t(4662),i=t(9445),o=t(2483),a=t(7843),s=t(3111);e.groupBy=function(u,l,c,f){return a.operate(function(h,d){var v;l&&typeof l!="function"?(c=l.duration,v=l.element,f=l.connector):v=l;var y=new Map,w=function(P){y.forEach(P),P(d)},b=function(P){return w(function(R){return R.error(P)})},p=0,_=!1,O=new s.OperatorSubscriber(d,function(P){try{var R=u(P),T=y.get(R);if(!T){y.set(R,T=f?f():new o.Subject);var A=(N=R,j=T,(B=new n.Observable(function(q){p++;var W=j.subscribe(q);return function(){W.unsubscribe(),--p==0&&_&&O.unsubscribe()}})).key=N,B);if(d.next(A),c){var M=s.createOperatorSubscriber(T,function(){T.complete(),M==null||M.unsubscribe()},void 0,void 0,function(){return y.delete(R)});O.add(i.innerFrom(c(A)).subscribe(M))}}T.next(v?v(P):P)}catch(q){b(q)}var N,j,B},function(){return w(function(P){return P.complete()})},b,function(){return y.clear()},function(){return _=!0,p===0});h.subscribe(O)})}},490:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ignoreElements=void 0;var n=t(7843),i=t(3111),o=t(1342);e.ignoreElements=function(){return n.operate(function(a,s){a.subscribe(i.createOperatorSubscriber(s,o.noop))})}},9356:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isEmpty=void 0;var n=t(7843),i=t(3111);e.isEmpty=function(){return n.operate(function(o,a){o.subscribe(i.createOperatorSubscriber(a,function(){a.next(!1),a.complete()},function(){a.next(!0),a.complete()}))})}},3638:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.joinAllInternals=void 0;var n=t(6640),i=t(1251),o=t(2706),a=t(983),s=t(2343);e.joinAllInternals=function(u,l){return o.pipe(s.toArray(),a.mergeMap(function(c){return u(c)}),l?i.mapOneOrManyArgs(l):n.identity)}},8669:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.last=void 0;var n=t(2823),i=t(783),o=t(8330),a=t(4869),s=t(378),u=t(6640);e.last=function(l,c){var f=arguments.length>=2;return function(h){return h.pipe(l?i.filter(function(d,v){return l(d,v,h)}):u.identity,o.takeLast(1),f?s.defaultIfEmpty(c):a.throwIfEmpty(function(){return new n.EmptyError}))}}},5471:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.map=void 0;var n=t(7843),i=t(3111);e.map=function(o,a){return n.operate(function(s,u){var l=0;s.subscribe(i.createOperatorSubscriber(u,function(c){u.next(o.call(a,c,l++))}))})}},3218:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mapTo=void 0;var n=t(5471);e.mapTo=function(i){return n.map(function(){return i})}},2360:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.materialize=void 0;var n=t(7800),i=t(7843),o=t(3111);e.materialize=function(){return i.operate(function(a,s){a.subscribe(o.createOperatorSubscriber(s,function(u){s.next(n.Notification.createNext(u))},function(){s.next(n.Notification.createComplete()),s.complete()},function(u){s.next(n.Notification.createError(u)),s.complete()}))})}},1415:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.max=void 0;var n=t(9139),i=t(1018);e.max=function(o){return n.reduce(i.isFunction(o)?function(a,s){return o(a,s)>0?a:s}:function(a,s){return a>s?a:s})}},361:function(r,e,t){var n=this&&this.__read||function(c,f){var h=typeof Symbol=="function"&&c[Symbol.iterator];if(!h)return c;var d,v,y=h.call(c),w=[];try{for(;(f===void 0||f-- >0)&&!(d=y.next()).done;)w.push(d.value)}catch(b){v={error:b}}finally{try{d&&!d.done&&(h=y.return)&&h.call(y)}finally{if(v)throw v.error}}return w},i=this&&this.__spreadArray||function(c,f){for(var h=0,d=f.length,v=c.length;h<d;h++,v++)c[v]=f[h];return c};Object.defineProperty(e,"__esModule",{value:!0}),e.merge=void 0;var o=t(7843),a=t(8535),s=t(7302),u=t(1107),l=t(4917);e.merge=function(){for(var c=[],f=0;f<arguments.length;f++)c[f]=arguments[f];var h=u.popScheduler(c),d=u.popNumber(c,1/0);return c=a.argsOrArgArray(c),o.operate(function(v,y){s.mergeAll(d)(l.from(i([v],n(c)),h)).subscribe(y)})}},7302:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mergeAll=void 0;var n=t(983),i=t(6640);e.mergeAll=function(o){return o===void 0&&(o=1/0),n.mergeMap(i.identity,o)}},1983:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mergeInternals=void 0;var n=t(9445),i=t(7110),o=t(3111);e.mergeInternals=function(a,s,u,l,c,f,h,d){var v=[],y=0,w=0,b=!1,p=function(){!b||v.length||y||s.complete()},_=function(P){return y<l?O(P):v.push(P)},O=function(P){f&&s.next(P),y++;var R=!1;n.innerFrom(u(P,w++)).subscribe(o.createOperatorSubscriber(s,function(T){c==null||c(T),f?_(T):s.next(T)},function(){R=!0},void 0,function(){if(R)try{y--;for(var T=function(){var A=v.shift();h?i.executeSchedule(s,h,function(){return O(A)}):O(A)};v.length&&y<l;)T();p()}catch(A){s.error(A)}}))};return a.subscribe(o.createOperatorSubscriber(s,_,function(){b=!0,p()})),function(){d==null||d()}}},983:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mergeMap=void 0;var n=t(5471),i=t(9445),o=t(7843),a=t(1983),s=t(1018);e.mergeMap=function u(l,c,f){return f===void 0&&(f=1/0),s.isFunction(c)?u(function(h,d){return n.map(function(v,y){return c(h,v,d,y)})(i.innerFrom(l(h,d)))},f):(typeof c=="number"&&(f=c),o.operate(function(h,d){return a.mergeInternals(h,d,l,f)}))}},6586:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mergeMapTo=void 0;var n=t(983),i=t(1018);e.mergeMapTo=function(o,a,s){return s===void 0&&(s=1/0),i.isFunction(a)?n.mergeMap(function(){return o},a,s):(typeof a=="number"&&(s=a),n.mergeMap(function(){return o},s))}},4408:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mergeScan=void 0;var n=t(7843),i=t(1983);e.mergeScan=function(o,a,s){return s===void 0&&(s=1/0),n.operate(function(u,l){var c=a;return i.mergeInternals(u,l,function(f,h){return o(c,f,h)},s,function(f){c=f},!1,void 0,function(){return c=null})})}},8253:function(r,e,t){var n=this&&this.__read||function(a,s){var u=typeof Symbol=="function"&&a[Symbol.iterator];if(!u)return a;var l,c,f=u.call(a),h=[];try{for(;(s===void 0||s-- >0)&&!(l=f.next()).done;)h.push(l.value)}catch(d){c={error:d}}finally{try{l&&!l.done&&(u=f.return)&&u.call(f)}finally{if(c)throw c.error}}return h},i=this&&this.__spreadArray||function(a,s){for(var u=0,l=s.length,c=a.length;u<l;u++,c++)a[c]=s[u];return a};Object.defineProperty(e,"__esModule",{value:!0}),e.mergeWith=void 0;var o=t(361);e.mergeWith=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return o.merge.apply(void 0,i([],n(a)))}},2669:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.min=void 0;var n=t(9139),i=t(1018);e.min=function(o){return n.reduce(i.isFunction(o)?function(a,s){return o(a,s)<0?a:s}:function(a,s){return a<s?a:s})}},9247:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.multicast=void 0;var n=t(8918),i=t(1018),o=t(1483);e.multicast=function(a,s){var u=i.isFunction(a)?a:function(){return a};return i.isFunction(s)?o.connect(s,{connector:u}):function(l){return new n.ConnectableObservable(l,u)}}},5184:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.observeOn=void 0;var n=t(7110),i=t(7843),o=t(3111);e.observeOn=function(a,s){return s===void 0&&(s=0),i.operate(function(u,l){u.subscribe(o.createOperatorSubscriber(l,function(c){return n.executeSchedule(l,a,function(){return l.next(c)},s)},function(){return n.executeSchedule(l,a,function(){return l.complete()},s)},function(c){return n.executeSchedule(l,a,function(){return l.error(c)},s)}))})}},1226:function(r,e,t){var n=this&&this.__read||function(u,l){var c=typeof Symbol=="function"&&u[Symbol.iterator];if(!c)return u;var f,h,d=c.call(u),v=[];try{for(;(l===void 0||l-- >0)&&!(f=d.next()).done;)v.push(f.value)}catch(y){h={error:y}}finally{try{f&&!f.done&&(c=d.return)&&c.call(d)}finally{if(h)throw h.error}}return v},i=this&&this.__spreadArray||function(u,l){for(var c=0,f=l.length,h=u.length;c<f;c++,h++)u[h]=l[c];return u};Object.defineProperty(e,"__esModule",{value:!0}),e.onErrorResumeNext=e.onErrorResumeNextWith=void 0;var o=t(8535),a=t(6102);function s(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];var c=o.argsOrArgArray(u);return function(f){return a.onErrorResumeNext.apply(void 0,i([f],n(c)))}}e.onErrorResumeNextWith=s,e.onErrorResumeNext=s},1518:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.pairwise=void 0;var n=t(7843),i=t(3111);e.pairwise=function(){return n.operate(function(o,a){var s,u=!1;o.subscribe(i.createOperatorSubscriber(a,function(l){var c=s;s=l,u&&a.next([c,l]),u=!0}))})}},2171:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.partition=void 0;var n=t(245),i=t(783);e.partition=function(o,a){return function(s){return[i.filter(o,a)(s),i.filter(n.not(o,a))(s)]}}},4912:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.pluck=void 0;var n=t(5471);e.pluck=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a=i.length;if(a===0)throw new Error("list of properties cannot be empty.");return n.map(function(s){for(var u=s,l=0;l<a;l++){var c=u==null?void 0:u[i[l]];if(c===void 0)return;u=c}return u})}},766:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.publish=void 0;var n=t(2483),i=t(9247),o=t(1483);e.publish=function(a){return a?function(s){return o.connect(a)(s)}:function(s){return i.multicast(new n.Subject)(s)}}},7220:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.publishBehavior=void 0;var n=t(1637),i=t(8918);e.publishBehavior=function(o){return function(a){var s=new n.BehaviorSubject(o);return new i.ConnectableObservable(a,function(){return s})}}},6106:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.publishLast=void 0;var n=t(95),i=t(8918);e.publishLast=function(){return function(o){var a=new n.AsyncSubject;return new i.ConnectableObservable(o,function(){return a})}}},8157:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.publishReplay=void 0;var n=t(1242),i=t(9247),o=t(1018);e.publishReplay=function(a,s,u,l){u&&!o.isFunction(u)&&(l=u);var c=o.isFunction(u)?u:void 0;return function(f){return i.multicast(new n.ReplaySubject(a,s,l),c)(f)}}},4440:function(r,e,t){var n=this&&this.__read||function(s,u){var l=typeof Symbol=="function"&&s[Symbol.iterator];if(!l)return s;var c,f,h=l.call(s),d=[];try{for(;(u===void 0||u-- >0)&&!(c=h.next()).done;)d.push(c.value)}catch(v){f={error:v}}finally{try{c&&!c.done&&(l=h.return)&&l.call(h)}finally{if(f)throw f.error}}return d},i=this&&this.__spreadArray||function(s,u){for(var l=0,c=u.length,f=s.length;l<c;l++,f++)s[f]=u[l];return s};Object.defineProperty(e,"__esModule",{value:!0}),e.race=void 0;var o=t(8535),a=t(5600);e.race=function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];return a.raceWith.apply(void 0,i([],n(o.argsOrArgArray(s))))}},5600:function(r,e,t){var n=this&&this.__read||function(u,l){var c=typeof Symbol=="function"&&u[Symbol.iterator];if(!c)return u;var f,h,d=c.call(u),v=[];try{for(;(l===void 0||l-- >0)&&!(f=d.next()).done;)v.push(f.value)}catch(y){h={error:y}}finally{try{f&&!f.done&&(c=d.return)&&c.call(d)}finally{if(h)throw h.error}}return v},i=this&&this.__spreadArray||function(u,l){for(var c=0,f=l.length,h=u.length;c<f;c++,h++)u[h]=l[c];return u};Object.defineProperty(e,"__esModule",{value:!0}),e.raceWith=void 0;var o=t(5584),a=t(7843),s=t(6640);e.raceWith=function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];return u.length?a.operate(function(c,f){o.raceInit(i([c],n(u)))(f)}):s.identity}},9139:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reduce=void 0;var n=t(6384),i=t(7843);e.reduce=function(o,a){return i.operate(n.scanInternals(o,a,arguments.length>=2,!1,!0))}},7561:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.refCount=void 0;var n=t(7843),i=t(3111);e.refCount=function(){return n.operate(function(o,a){var s=null;o._refCount++;var u=i.createOperatorSubscriber(a,void 0,void 0,void 0,function(){if(!o||o._refCount<=0||0<--o._refCount)s=null;else{var l=o._connection,c=s;s=null,!l||c&&l!==c||l.unsubscribe(),a.unsubscribe()}});o.subscribe(u),u.closed||(s=o.connect())})}},8522:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.repeat=void 0;var n=t(8616),i=t(7843),o=t(3111),a=t(9445),s=t(4092);e.repeat=function(u){var l,c,f=1/0;return u!=null&&(typeof u=="object"?(l=u.count,f=l===void 0?1/0:l,c=u.delay):f=u),f<=0?function(){return n.EMPTY}:i.operate(function(h,d){var v,y=0,w=function(){if(v==null||v.unsubscribe(),v=null,c!=null){var p=typeof c=="number"?s.timer(c):a.innerFrom(c(y)),_=o.createOperatorSubscriber(d,function(){_.unsubscribe(),b()});p.subscribe(_)}else b()},b=function(){var p=!1;v=h.subscribe(o.createOperatorSubscriber(d,void 0,function(){++y<f?v?w():p=!0:d.complete()})),p&&w()};b()})}},6566:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.repeatWhen=void 0;var n=t(9445),i=t(2483),o=t(7843),a=t(3111);e.repeatWhen=function(s){return o.operate(function(u,l){var c,f,h=!1,d=!1,v=!1,y=function(){return v&&d&&(l.complete(),!0)},w=function(){v=!1,c=u.subscribe(a.createOperatorSubscriber(l,void 0,function(){v=!0,!y()&&(f||(f=new i.Subject,n.innerFrom(s(f)).subscribe(a.createOperatorSubscriber(l,function(){c?w():h=!0},function(){d=!0,y()}))),f).next()})),h&&(c.unsubscribe(),c=null,h=!1,w())};w()})}},7835:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.retry=void 0;var n=t(7843),i=t(3111),o=t(6640),a=t(4092),s=t(9445);e.retry=function(u){var l;u===void 0&&(u=1/0);var c=(l=u&&typeof u=="object"?u:{count:u}).count,f=c===void 0?1/0:c,h=l.delay,d=l.resetOnSuccess,v=d!==void 0&&d;return f<=0?o.identity:n.operate(function(y,w){var b,p=0,_=function(){var O=!1;b=y.subscribe(i.createOperatorSubscriber(w,function(P){v&&(p=0),w.next(P)},void 0,function(P){if(p++<f){var R=function(){b?(b.unsubscribe(),b=null,_()):O=!0};if(h!=null){var T=typeof h=="number"?a.timer(h):s.innerFrom(h(P,p)),A=i.createOperatorSubscriber(w,function(){A.unsubscribe(),R()},function(){w.complete()});T.subscribe(A)}else R()}else w.error(P)})),O&&(b.unsubscribe(),b=null,_())};_()})}},9843:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.retryWhen=void 0;var n=t(9445),i=t(2483),o=t(7843),a=t(3111);e.retryWhen=function(s){return o.operate(function(u,l){var c,f,h=!1,d=function(){c=u.subscribe(a.createOperatorSubscriber(l,void 0,void 0,function(v){f||(f=new i.Subject,n.innerFrom(s(f)).subscribe(a.createOperatorSubscriber(l,function(){return c?d():h=!0}))),f&&f.next(v)})),h&&(c.unsubscribe(),c=null,h=!1,d())};d()})}},1731:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sample=void 0;var n=t(9445),i=t(7843),o=t(1342),a=t(3111);e.sample=function(s){return i.operate(function(u,l){var c=!1,f=null;u.subscribe(a.createOperatorSubscriber(l,function(h){c=!0,f=h})),n.innerFrom(s).subscribe(a.createOperatorSubscriber(l,function(){if(c){c=!1;var h=f;f=null,l.next(h)}},o.noop))})}},6086:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sampleTime=void 0;var n=t(7961),i=t(1731),o=t(6472);e.sampleTime=function(a,s){return s===void 0&&(s=n.asyncScheduler),i.sample(o.interval(a,s))}},8624:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scan=void 0;var n=t(7843),i=t(6384);e.scan=function(o,a){return n.operate(i.scanInternals(o,a,arguments.length>=2,!0))}},6384:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scanInternals=void 0;var n=t(3111);e.scanInternals=function(i,o,a,s,u){return function(l,c){var f=a,h=o,d=0;l.subscribe(n.createOperatorSubscriber(c,function(v){var y=d++;h=f?i(h,v,y):(f=!0,v),s&&c.next(h)},u&&function(){f&&c.next(h),c.complete()}))}}},582:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sequenceEqual=void 0;var n=t(7843),i=t(3111),o=t(9445);e.sequenceEqual=function(a,s){return s===void 0&&(s=function(u,l){return u===l}),n.operate(function(u,l){var c={buffer:[],complete:!1},f={buffer:[],complete:!1},h=function(v){l.next(v),l.complete()},d=function(v,y){var w=i.createOperatorSubscriber(l,function(b){var p=y.buffer,_=y.complete;p.length===0?_?h(!1):v.buffer.push(b):!s(b,p.shift())&&h(!1)},function(){v.complete=!0;var b=y.complete,p=y.buffer;b&&h(p.length===0),w==null||w.unsubscribe()});return w};u.subscribe(d(c,f)),o.innerFrom(a).subscribe(d(f,c))})}},8977:function(r,e,t){var n=this&&this.__read||function(c,f){var h=typeof Symbol=="function"&&c[Symbol.iterator];if(!h)return c;var d,v,y=h.call(c),w=[];try{for(;(f===void 0||f-- >0)&&!(d=y.next()).done;)w.push(d.value)}catch(b){v={error:b}}finally{try{d&&!d.done&&(h=y.return)&&h.call(y)}finally{if(v)throw v.error}}return w},i=this&&this.__spreadArray||function(c,f){for(var h=0,d=f.length,v=c.length;h<d;h++,v++)c[v]=f[h];return c};Object.defineProperty(e,"__esModule",{value:!0}),e.share=void 0;var o=t(9445),a=t(2483),s=t(5),u=t(7843);function l(c,f){for(var h=[],d=2;d<arguments.length;d++)h[d-2]=arguments[d];if(f!==!0){if(f!==!1){var v=new s.SafeSubscriber({next:function(){v.unsubscribe(),c()}});return o.innerFrom(f.apply(void 0,i([],n(h)))).subscribe(v)}}else c()}e.share=function(c){c===void 0&&(c={});var f=c.connector,h=f===void 0?function(){return new a.Subject}:f,d=c.resetOnError,v=d===void 0||d,y=c.resetOnComplete,w=y===void 0||y,b=c.resetOnRefCountZero,p=b===void 0||b;return function(_){var O,P,R,T=0,A=!1,M=!1,N=function(){P==null||P.unsubscribe(),P=void 0},j=function(){N(),O=R=void 0,A=M=!1},B=function(){var q=O;j(),q==null||q.unsubscribe()};return u.operate(function(q,W){T++,M||A||N();var J=R=R??h();W.add(function(){--T!=0||M||A||(P=l(B,p))}),J.subscribe(W),!O&&T>0&&(O=new s.SafeSubscriber({next:function(te){return J.next(te)},error:function(te){M=!0,N(),P=l(j,v,te),J.error(te)},complete:function(){A=!0,N(),P=l(j,w),J.complete()}}),o.innerFrom(q).subscribe(O))})(_)}}},3133:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.shareReplay=void 0;var n=t(1242),i=t(8977);e.shareReplay=function(o,a,s){var u,l,c,f,h=!1;return o&&typeof o=="object"?(u=o.bufferSize,f=u===void 0?1/0:u,l=o.windowTime,a=l===void 0?1/0:l,h=(c=o.refCount)!==void 0&&c,s=o.scheduler):f=o??1/0,i.share({connector:function(){return new n.ReplaySubject(f,a,s)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:h})}},3001:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.single=void 0;var n=t(2823),i=t(1505),o=t(1759),a=t(7843),s=t(3111);e.single=function(u){return a.operate(function(l,c){var f,h=!1,d=!1,v=0;l.subscribe(s.createOperatorSubscriber(c,function(y){d=!0,u&&!u(y,v++,l)||(h&&c.error(new i.SequenceError("Too many matching values")),h=!0,f=y)},function(){h?(c.next(f),c.complete()):c.error(d?new o.NotFoundError("No matching values"):new n.EmptyError)}))})}},3982:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.skip=void 0;var n=t(783);e.skip=function(i){return n.filter(function(o,a){return i<=a})}},9098:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.skipLast=void 0;var n=t(6640),i=t(7843),o=t(3111);e.skipLast=function(a){return a<=0?n.identity:i.operate(function(s,u){var l=new Array(a),c=0;return s.subscribe(o.createOperatorSubscriber(u,function(f){var h=c++;if(h<a)l[h]=f;else{var d=h%a,v=l[d];l[d]=f,u.next(v)}})),function(){l=null}})}},7372:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.skipUntil=void 0;var n=t(7843),i=t(3111),o=t(9445),a=t(1342);e.skipUntil=function(s){return n.operate(function(u,l){var c=!1,f=i.createOperatorSubscriber(l,function(){f==null||f.unsubscribe(),c=!0},a.noop);o.innerFrom(s).subscribe(f),u.subscribe(i.createOperatorSubscriber(l,function(h){return c&&l.next(h)}))})}},4721:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.skipWhile=void 0;var n=t(7843),i=t(3111);e.skipWhile=function(o){return n.operate(function(a,s){var u=!1,l=0;a.subscribe(i.createOperatorSubscriber(s,function(c){return(u||(u=!o(c,l++)))&&s.next(c)}))})}},269:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.startWith=void 0;var n=t(3865),i=t(1107),o=t(7843);e.startWith=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var u=i.popScheduler(a);return o.operate(function(l,c){(u?n.concat(a,l,u):n.concat(a,l)).subscribe(c)})}},8960:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.subscribeOn=void 0;var n=t(7843);e.subscribeOn=function(i,o){return o===void 0&&(o=0),n.operate(function(a,s){s.add(i.schedule(function(){return a.subscribe(s)},o))})}},8774:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.switchAll=void 0;var n=t(3879),i=t(6640);e.switchAll=function(){return n.switchMap(i.identity)}},3879:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.switchMap=void 0;var n=t(9445),i=t(7843),o=t(3111);e.switchMap=function(a,s){return i.operate(function(u,l){var c=null,f=0,h=!1,d=function(){return h&&!c&&l.complete()};u.subscribe(o.createOperatorSubscriber(l,function(v){c==null||c.unsubscribe();var y=0,w=f++;n.innerFrom(a(v,w)).subscribe(c=o.createOperatorSubscriber(l,function(b){return l.next(s?s(v,b,w,y++):b)},function(){c=null,d()}))},function(){h=!0,d()}))})}},3274:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.switchMapTo=void 0;var n=t(3879),i=t(1018);e.switchMapTo=function(o,a){return i.isFunction(a)?n.switchMap(function(){return o},a):n.switchMap(function(){return o})}},8712:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.switchScan=void 0;var n=t(3879),i=t(7843);e.switchScan=function(o,a){return i.operate(function(s,u){var l=a;return n.switchMap(function(c,f){return o(l,c,f)},function(c,f){return l=f,f})(s).subscribe(u),function(){l=null}})}},846:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.take=void 0;var n=t(8616),i=t(7843),o=t(3111);e.take=function(a){return a<=0?function(){return n.EMPTY}:i.operate(function(s,u){var l=0;s.subscribe(o.createOperatorSubscriber(u,function(c){++l<=a&&(u.next(c),a<=l&&u.complete())}))})}},8330:function(r,e,t){var n=this&&this.__values||function(s){var u=typeof Symbol=="function"&&Symbol.iterator,l=u&&s[u],c=0;if(l)return l.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&c>=s.length&&(s=void 0),{value:s&&s[c++],done:!s}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.takeLast=void 0;var i=t(8616),o=t(7843),a=t(3111);e.takeLast=function(s){return s<=0?function(){return i.EMPTY}:o.operate(function(u,l){var c=[];u.subscribe(a.createOperatorSubscriber(l,function(f){c.push(f),s<c.length&&c.shift()},function(){var f,h;try{for(var d=n(c),v=d.next();!v.done;v=d.next()){var y=v.value;l.next(y)}}catch(w){f={error:w}}finally{try{v&&!v.done&&(h=d.return)&&h.call(d)}finally{if(f)throw f.error}}l.complete()},void 0,function(){c=null}))})}},4780:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.takeUntil=void 0;var n=t(7843),i=t(3111),o=t(9445),a=t(1342);e.takeUntil=function(s){return n.operate(function(u,l){o.innerFrom(s).subscribe(i.createOperatorSubscriber(l,function(){return l.complete()},a.noop)),!l.closed&&u.subscribe(l)})}},2129:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.takeWhile=void 0;var n=t(7843),i=t(3111);e.takeWhile=function(o,a){return a===void 0&&(a=!1),n.operate(function(s,u){var l=0;s.subscribe(i.createOperatorSubscriber(u,function(c){var f=o(c,l++);(f||a)&&u.next(c),!f&&u.complete()}))})}},3964:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tap=void 0;var n=t(1018),i=t(7843),o=t(3111),a=t(6640);e.tap=function(s,u,l){var c=n.isFunction(s)||u||l?{next:s,error:u,complete:l}:s;return c?i.operate(function(f,h){var d;(d=c.subscribe)===null||d===void 0||d.call(c);var v=!0;f.subscribe(o.createOperatorSubscriber(h,function(y){var w;(w=c.next)===null||w===void 0||w.call(c,y),h.next(y)},function(){var y;v=!1,(y=c.complete)===null||y===void 0||y.call(c),h.complete()},function(y){var w;v=!1,(w=c.error)===null||w===void 0||w.call(c,y),h.error(y)},function(){var y,w;v&&((y=c.unsubscribe)===null||y===void 0||y.call(c)),(w=c.finalize)===null||w===void 0||w.call(c)}))}):a.identity}},8941:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.throttle=void 0;var n=t(7843),i=t(3111),o=t(9445);e.throttle=function(a,s){return n.operate(function(u,l){var c=s??{},f=c.leading,h=f===void 0||f,d=c.trailing,v=d!==void 0&&d,y=!1,w=null,b=null,p=!1,_=function(){b==null||b.unsubscribe(),b=null,v&&(R(),p&&l.complete())},O=function(){b=null,p&&l.complete()},P=function(T){return b=o.innerFrom(a(T)).subscribe(i.createOperatorSubscriber(l,_,O))},R=function(){if(y){y=!1;var T=w;w=null,l.next(T),!p&&P(T)}};u.subscribe(i.createOperatorSubscriber(l,function(T){y=!0,w=T,(!b||b.closed)&&(h?R():P(T))},function(){p=!0,(!(v&&y&&b)||b.closed)&&l.complete()}))})}},7640:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.throttleTime=void 0;var n=t(7961),i=t(8941),o=t(4092);e.throttleTime=function(a,s,u){s===void 0&&(s=n.asyncScheduler);var l=o.timer(a,s);return i.throttle(function(){return l},u)}},4869:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.throwIfEmpty=void 0;var n=t(2823),i=t(7843),o=t(3111);function a(){return new n.EmptyError}e.throwIfEmpty=function(s){return s===void 0&&(s=a),i.operate(function(u,l){var c=!1;u.subscribe(o.createOperatorSubscriber(l,function(f){c=!0,l.next(f)},function(){return c?l.complete():l.error(s())}))})}},489:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TimeInterval=e.timeInterval=void 0;var n=t(7961),i=t(7843),o=t(3111);e.timeInterval=function(s){return s===void 0&&(s=n.asyncScheduler),i.operate(function(u,l){var c=s.now();u.subscribe(o.createOperatorSubscriber(l,function(f){var h=s.now(),d=h-c;c=h,l.next(new a(f,d))}))})};var a=function(s,u){this.value=s,this.interval=u};e.TimeInterval=a},1554:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.timeout=e.TimeoutError=void 0;var n=t(7961),i=t(1074),o=t(7843),a=t(9445),s=t(5568),u=t(3111),l=t(7110);function c(f){throw new e.TimeoutError(f)}e.TimeoutError=s.createErrorClass(function(f){return function(h){h===void 0&&(h=null),f(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=h}}),e.timeout=function(f,h){var d=i.isValidDate(f)?{first:f}:typeof f=="number"?{each:f}:f,v=d.first,y=d.each,w=d.with,b=w===void 0?c:w,p=d.scheduler,_=p===void 0?h??n.asyncScheduler:p,O=d.meta,P=O===void 0?null:O;if(v==null&&y==null)throw new TypeError("No timeout provided.");return o.operate(function(R,T){var A,M,N=null,j=0,B=function(q){M=l.executeSchedule(T,_,function(){try{A.unsubscribe(),a.innerFrom(b({meta:P,lastValue:N,seen:j})).subscribe(T)}catch(W){T.error(W)}},q)};A=R.subscribe(u.createOperatorSubscriber(T,function(q){M==null||M.unsubscribe(),j++,T.next(N=q),y>0&&B(y)},void 0,void 0,function(){M!=null&&M.closed||M==null||M.unsubscribe(),N=null})),!j&&B(v!=null?typeof v=="number"?v:+v-_.now():y)})}},4862:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.timeoutWith=void 0;var n=t(7961),i=t(1074),o=t(1554);e.timeoutWith=function(a,s,u){var l,c,f;if(u=u??n.async,i.isValidDate(a)?l=a:typeof a=="number"&&(c=a),!s)throw new TypeError("No observable provided to switch to");if(f=function(){return s},l==null&&c==null)throw new TypeError("No timeout provided.");return o.timeout({first:l,each:c,scheduler:u,with:f})}},6505:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.timestamp=void 0;var n=t(9568),i=t(5471);e.timestamp=function(o){return o===void 0&&(o=n.dateTimestampProvider),i.map(function(a){return{value:a,timestamp:o.now()}})}},2343:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.toArray=void 0;var n=t(9139),i=t(7843),o=function(a,s){return a.push(s),a};e.toArray=function(){return i.operate(function(a,s){n.reduce(o,[])(a).subscribe(s)})}},5477:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.window=void 0;var n=t(2483),i=t(7843),o=t(3111),a=t(1342),s=t(9445);e.window=function(u){return i.operate(function(l,c){var f=new n.Subject;c.next(f.asObservable());var h=function(d){f.error(d),c.error(d)};return l.subscribe(o.createOperatorSubscriber(c,function(d){return f==null?void 0:f.next(d)},function(){f.complete(),c.complete()},h)),s.innerFrom(u).subscribe(o.createOperatorSubscriber(c,function(){f.complete(),c.next(f=new n.Subject)},a.noop,h)),function(){f==null||f.unsubscribe(),f=null}})}},6746:function(r,e,t){var n=this&&this.__values||function(s){var u=typeof Symbol=="function"&&Symbol.iterator,l=u&&s[u],c=0;if(l)return l.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&c>=s.length&&(s=void 0),{value:s&&s[c++],done:!s}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.windowCount=void 0;var i=t(2483),o=t(7843),a=t(3111);e.windowCount=function(s,u){u===void 0&&(u=0);var l=u>0?u:s;return o.operate(function(c,f){var h=[new i.Subject],d=0;f.next(h[0].asObservable()),c.subscribe(a.createOperatorSubscriber(f,function(v){var y,w;try{for(var b=n(h),p=b.next();!p.done;p=b.next())p.value.next(v)}catch(P){y={error:P}}finally{try{p&&!p.done&&(w=b.return)&&w.call(b)}finally{if(y)throw y.error}}var _=d-s+1;if(_>=0&&_%l==0&&h.shift().complete(),++d%l==0){var O=new i.Subject;h.push(O),f.next(O.asObservable())}},function(){for(;h.length>0;)h.shift().complete();f.complete()},function(v){for(;h.length>0;)h.shift().error(v);f.error(v)},function(){h=null}))})}},8208:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.windowTime=void 0;var n=t(2483),i=t(7961),o=t(8014),a=t(7843),s=t(3111),u=t(7479),l=t(1107),c=t(7110);e.windowTime=function(f){for(var h,d,v=[],y=1;y<arguments.length;y++)v[y-1]=arguments[y];var w=(h=l.popScheduler(v))!==null&&h!==void 0?h:i.asyncScheduler,b=(d=v[0])!==null&&d!==void 0?d:null,p=v[1]||1/0;return a.operate(function(_,O){var P=[],R=!1,T=function(j){var B=j.window,q=j.subs;B.complete(),q.unsubscribe(),u.arrRemove(P,j),R&&A()},A=function(){if(P){var j=new o.Subscription;O.add(j);var B=new n.Subject,q={window:B,subs:j,seen:0};P.push(q),O.next(B.asObservable()),c.executeSchedule(j,w,function(){return T(q)},f)}};b!==null&&b>=0?c.executeSchedule(O,w,A,b,!0):R=!0,A();var M=function(j){return P.slice().forEach(j)},N=function(j){M(function(B){var q=B.window;return j(q)}),j(O),O.unsubscribe()};return _.subscribe(s.createOperatorSubscriber(O,function(j){M(function(B){B.window.next(j),p<=++B.seen&&T(B)})},function(){return N(function(j){return j.complete()})},function(j){return N(function(B){return B.error(j)})})),function(){P=null}})}},6637:function(r,e,t){var n=this&&this.__values||function(f){var h=typeof Symbol=="function"&&Symbol.iterator,d=h&&f[h],v=0;if(d)return d.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&v>=f.length&&(f=void 0),{value:f&&f[v++],done:!f}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.windowToggle=void 0;var i=t(2483),o=t(8014),a=t(7843),s=t(9445),u=t(3111),l=t(1342),c=t(7479);e.windowToggle=function(f,h){return a.operate(function(d,v){var y=[],w=function(b){for(;0<y.length;)y.shift().error(b);v.error(b)};s.innerFrom(f).subscribe(u.createOperatorSubscriber(v,function(b){var p=new i.Subject;y.push(p);var _,O=new o.Subscription;try{_=s.innerFrom(h(b))}catch(P){return void w(P)}v.next(p.asObservable()),O.add(_.subscribe(u.createOperatorSubscriber(v,function(){c.arrRemove(y,p),p.complete(),O.unsubscribe()},l.noop,w)))},l.noop)),d.subscribe(u.createOperatorSubscriber(v,function(b){var p,_,O=y.slice();try{for(var P=n(O),R=P.next();!R.done;R=P.next())R.value.next(b)}catch(T){p={error:T}}finally{try{R&&!R.done&&(_=P.return)&&_.call(P)}finally{if(p)throw p.error}}},function(){for(;0<y.length;)y.shift().complete();v.complete()},w,function(){for(;0<y.length;)y.shift().unsubscribe()}))})}},1141:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.windowWhen=void 0;var n=t(2483),i=t(7843),o=t(3111),a=t(9445);e.windowWhen=function(s){return i.operate(function(u,l){var c,f,h=function(v){c.error(v),l.error(v)},d=function(){var v;f==null||f.unsubscribe(),c==null||c.complete(),c=new n.Subject,l.next(c.asObservable());try{v=a.innerFrom(s())}catch(y){return void h(y)}v.subscribe(f=o.createOperatorSubscriber(l,d,d,h))};d(),u.subscribe(o.createOperatorSubscriber(l,function(v){return c.next(v)},function(){c.complete(),l.complete()},h,function(){f==null||f.unsubscribe(),c=null}))})}},5442:function(r,e,t){var n=this&&this.__read||function(f,h){var d=typeof Symbol=="function"&&f[Symbol.iterator];if(!d)return f;var v,y,w=d.call(f),b=[];try{for(;(h===void 0||h-- >0)&&!(v=w.next()).done;)b.push(v.value)}catch(p){y={error:p}}finally{try{v&&!v.done&&(d=w.return)&&d.call(w)}finally{if(y)throw y.error}}return b},i=this&&this.__spreadArray||function(f,h){for(var d=0,v=h.length,y=f.length;d<v;d++,y++)f[y]=h[d];return f};Object.defineProperty(e,"__esModule",{value:!0}),e.withLatestFrom=void 0;var o=t(7843),a=t(3111),s=t(9445),u=t(6640),l=t(1342),c=t(1107);e.withLatestFrom=function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];var d=c.popResultSelector(f);return o.operate(function(v,y){for(var w=f.length,b=new Array(w),p=f.map(function(){return!1}),_=!1,O=function(R){s.innerFrom(f[R]).subscribe(a.createOperatorSubscriber(y,function(T){b[R]=T,_||p[R]||(p[R]=!0,(_=p.every(u.identity))&&(p=null))},l.noop))},P=0;P<w;P++)O(P);v.subscribe(a.createOperatorSubscriber(y,function(R){if(_){var T=i([R],n(b));y.next(d?d.apply(void 0,i([],n(T))):T)}}))})}},5918:function(r,e,t){var n=this&&this.__read||function(s,u){var l=typeof Symbol=="function"&&s[Symbol.iterator];if(!l)return s;var c,f,h=l.call(s),d=[];try{for(;(u===void 0||u-- >0)&&!(c=h.next()).done;)d.push(c.value)}catch(v){f={error:v}}finally{try{c&&!c.done&&(l=h.return)&&l.call(h)}finally{if(f)throw f.error}}return d},i=this&&this.__spreadArray||function(s,u){for(var l=0,c=u.length,f=s.length;l<c;l++,f++)s[f]=u[l];return s};Object.defineProperty(e,"__esModule",{value:!0}),e.zip=void 0;var o=t(7286),a=t(7843);e.zip=function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];return a.operate(function(l,c){o.zip.apply(void 0,i([l],n(s))).subscribe(c)})}},187:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.zipAll=void 0;var n=t(7286),i=t(3638);e.zipAll=function(o){return i.joinAllInternals(n.zip,o)}},8538:function(r,e,t){var n=this&&this.__read||function(a,s){var u=typeof Symbol=="function"&&a[Symbol.iterator];if(!u)return a;var l,c,f=u.call(a),h=[];try{for(;(s===void 0||s-- >0)&&!(l=f.next()).done;)h.push(l.value)}catch(d){c={error:d}}finally{try{l&&!l.done&&(u=f.return)&&u.call(f)}finally{if(c)throw c.error}}return h},i=this&&this.__spreadArray||function(a,s){for(var u=0,l=s.length,c=a.length;u<l;u++,c++)a[c]=s[u];return a};Object.defineProperty(e,"__esModule",{value:!0}),e.zipWith=void 0;var o=t(5918);e.zipWith=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return o.zip.apply(void 0,i([],n(a)))}},6985:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scheduleArray=void 0;var n=t(4662);e.scheduleArray=function(i,o){return new n.Observable(function(a){var s=0;return o.schedule(function(){s===i.length?a.complete():(a.next(i[s++]),a.closed||this.schedule())})})}},854:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scheduleAsyncIterable=void 0;var n=t(4662),i=t(7110);e.scheduleAsyncIterable=function(o,a){if(!o)throw new Error("Iterable cannot be null");return new n.Observable(function(s){i.executeSchedule(s,a,function(){var u=o[Symbol.asyncIterator]();i.executeSchedule(s,a,function(){u.next().then(function(l){l.done?s.complete():s.next(l.value)})},0,!0)})})}},8808:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scheduleIterable=void 0;var n=t(4662),i=t(1964),o=t(1018),a=t(7110);e.scheduleIterable=function(s,u){return new n.Observable(function(l){var c;return a.executeSchedule(l,u,function(){c=s[i.iterator](),a.executeSchedule(l,u,function(){var f,h,d;try{h=(f=c.next()).value,d=f.done}catch(v){return void l.error(v)}d?l.complete():l.next(h)},0,!0)}),function(){return o.isFunction(c==null?void 0:c.return)&&c.return()}})}},9567:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scheduleObservable=void 0;var n=t(9445),i=t(5184),o=t(8960);e.scheduleObservable=function(a,s){return n.innerFrom(a).pipe(o.subscribeOn(s),i.observeOn(s))}},9589:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.schedulePromise=void 0;var n=t(9445),i=t(5184),o=t(8960);e.schedulePromise=function(a,s){return n.innerFrom(a).pipe(o.subscribeOn(s),i.observeOn(s))}},4953:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scheduleReadableStreamLike=void 0;var n=t(854),i=t(9137);e.scheduleReadableStreamLike=function(o,a){return n.scheduleAsyncIterable(i.readableStreamLikeToAsyncGenerator(o),a)}},1656:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scheduled=void 0;var n=t(9567),i=t(9589),o=t(6985),a=t(8808),s=t(854),u=t(1116),l=t(7629),c=t(8046),f=t(6368),h=t(1358),d=t(7614),v=t(9137),y=t(4953);e.scheduled=function(w,b){if(w!=null){if(u.isInteropObservable(w))return n.scheduleObservable(w,b);if(c.isArrayLike(w))return o.scheduleArray(w,b);if(l.isPromise(w))return i.schedulePromise(w,b);if(h.isAsyncIterable(w))return s.scheduleAsyncIterable(w,b);if(f.isIterable(w))return a.scheduleIterable(w,b);if(v.isReadableStreamLike(w))return y.scheduleReadableStreamLike(w,b)}throw d.createInvalidObservableTypeError(w)}},4671:function(r,e,t){var n,i=this&&this.__extends||(n=function(a,s){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},n(a,s)},function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}n(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)});Object.defineProperty(e,"__esModule",{value:!0}),e.Action=void 0;var o=function(a){function s(u,l){return a.call(this)||this}return i(s,a),s.prototype.schedule=function(u,l){return this},s}(t(8014).Subscription);e.Action=o},2628:function(r,e,t){var n,i=this&&this.__extends||(n=function(u,l){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(c[h]=f[h])},n(u,l)},function(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function c(){this.constructor=u}n(u,l),u.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)});Object.defineProperty(e,"__esModule",{value:!0}),e.AnimationFrameAction=void 0;var o=t(5267),a=t(9507),s=function(u){function l(c,f){var h=u.call(this,c,f)||this;return h.scheduler=c,h.work=f,h}return i(l,u),l.prototype.requestAsyncId=function(c,f,h){return h===void 0&&(h=0),h!==null&&h>0?u.prototype.requestAsyncId.call(this,c,f,h):(c.actions.push(this),c._scheduled||(c._scheduled=a.animationFrameProvider.requestAnimationFrame(function(){return c.flush(void 0)})))},l.prototype.recycleAsyncId=function(c,f,h){var d;if(h===void 0&&(h=0),h!=null?h>0:this.delay>0)return u.prototype.recycleAsyncId.call(this,c,f,h);var v=c.actions;f!=null&&((d=v[v.length-1])===null||d===void 0?void 0:d.id)!==f&&(a.animationFrameProvider.cancelAnimationFrame(f),c._scheduled=void 0)},l}(o.AsyncAction);e.AnimationFrameAction=s},3229:function(r,e,t){var n,i=this&&this.__extends||(n=function(a,s){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},n(a,s)},function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}n(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)});Object.defineProperty(e,"__esModule",{value:!0}),e.AnimationFrameScheduler=void 0;var o=function(a){function s(){return a!==null&&a.apply(this,arguments)||this}return i(s,a),s.prototype.flush=function(u){this._active=!0;var l=this._scheduled;this._scheduled=void 0;var c,f=this.actions;u=u||f.shift();do if(c=u.execute(u.state,u.delay))break;while((u=f[0])&&u.id===l&&f.shift());if(this._active=!1,c){for(;(u=f[0])&&u.id===l&&f.shift();)u.unsubscribe();throw c}},s}(t(5648).AsyncScheduler);e.AnimationFrameScheduler=o},5006:function(r,e,t){var n,i=this&&this.__extends||(n=function(u,l){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(c[h]=f[h])},n(u,l)},function(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function c(){this.constructor=u}n(u,l),u.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)});Object.defineProperty(e,"__esModule",{value:!0}),e.AsapAction=void 0;var o=t(5267),a=t(6293),s=function(u){function l(c,f){var h=u.call(this,c,f)||this;return h.scheduler=c,h.work=f,h}return i(l,u),l.prototype.requestAsyncId=function(c,f,h){return h===void 0&&(h=0),h!==null&&h>0?u.prototype.requestAsyncId.call(this,c,f,h):(c.actions.push(this),c._scheduled||(c._scheduled=a.immediateProvider.setImmediate(c.flush.bind(c,void 0))))},l.prototype.recycleAsyncId=function(c,f,h){var d;if(h===void 0&&(h=0),h!=null?h>0:this.delay>0)return u.prototype.recycleAsyncId.call(this,c,f,h);var v=c.actions;f!=null&&((d=v[v.length-1])===null||d===void 0?void 0:d.id)!==f&&(a.immediateProvider.clearImmediate(f),c._scheduled===f&&(c._scheduled=void 0))},l}(o.AsyncAction);e.AsapAction=s},827:function(r,e,t){var n,i=this&&this.__extends||(n=function(a,s){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},n(a,s)},function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}n(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)});Object.defineProperty(e,"__esModule",{value:!0}),e.AsapScheduler=void 0;var o=function(a){function s(){return a!==null&&a.apply(this,arguments)||this}return i(s,a),s.prototype.flush=function(u){this._active=!0;var l=this._scheduled;this._scheduled=void 0;var c,f=this.actions;u=u||f.shift();do if(c=u.execute(u.state,u.delay))break;while((u=f[0])&&u.id===l&&f.shift());if(this._active=!1,c){for(;(u=f[0])&&u.id===l&&f.shift();)u.unsubscribe();throw c}},s}(t(5648).AsyncScheduler);e.AsapScheduler=o},5267:function(r,e,t){var n,i=this&&this.__extends||(n=function(l,c){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(f[d]=h[d])},n(l,c)},function(l,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function f(){this.constructor=l}n(l,c),l.prototype=c===null?Object.create(c):(f.prototype=c.prototype,new f)});Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncAction=void 0;var o=t(4671),a=t(5649),s=t(7479),u=function(l){function c(f,h){var d=l.call(this,f,h)||this;return d.scheduler=f,d.work=h,d.pending=!1,d}return i(c,l),c.prototype.schedule=function(f,h){var d;if(h===void 0&&(h=0),this.closed)return this;this.state=f;var v=this.id,y=this.scheduler;return v!=null&&(this.id=this.recycleAsyncId(y,v,h)),this.pending=!0,this.delay=h,this.id=(d=this.id)!==null&&d!==void 0?d:this.requestAsyncId(y,this.id,h),this},c.prototype.requestAsyncId=function(f,h,d){return d===void 0&&(d=0),a.intervalProvider.setInterval(f.flush.bind(f,this),d)},c.prototype.recycleAsyncId=function(f,h,d){if(d===void 0&&(d=0),d!=null&&this.delay===d&&this.pending===!1)return h;h!=null&&a.intervalProvider.clearInterval(h)},c.prototype.execute=function(f,h){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var d=this._execute(f,h);if(d)return d;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},c.prototype._execute=function(f,h){var d,v=!1;try{this.work(f)}catch(y){v=!0,d=y||new Error("Scheduled action threw falsy error")}if(v)return this.unsubscribe(),d},c.prototype.unsubscribe=function(){if(!this.closed){var f=this.id,h=this.scheduler,d=h.actions;this.work=this.state=this.scheduler=null,this.pending=!1,s.arrRemove(d,this),f!=null&&(this.id=this.recycleAsyncId(h,f,null)),this.delay=null,l.prototype.unsubscribe.call(this)}},c}(o.Action);e.AsyncAction=u},5648:function(r,e,t){var n,i=this&&this.__extends||(n=function(s,u){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(l[f]=c[f])},n(s,u)},function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function l(){this.constructor=s}n(s,u),s.prototype=u===null?Object.create(u):(l.prototype=u.prototype,new l)});Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncScheduler=void 0;var o=t(8986),a=function(s){function u(l,c){c===void 0&&(c=o.Scheduler.now);var f=s.call(this,l,c)||this;return f.actions=[],f._active=!1,f}return i(u,s),u.prototype.flush=function(l){var c=this.actions;if(this._active)c.push(l);else{var f;this._active=!0;do if(f=l.execute(l.state,l.delay))break;while(l=c.shift());if(this._active=!1,f){for(;l=c.shift();)l.unsubscribe();throw f}}},u}(o.Scheduler);e.AsyncScheduler=a},4212:function(r,e,t){var n,i=this&&this.__extends||(n=function(a,s){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},n(a,s)},function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}n(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)});Object.defineProperty(e,"__esModule",{value:!0}),e.QueueAction=void 0;var o=function(a){function s(u,l){var c=a.call(this,u,l)||this;return c.scheduler=u,c.work=l,c}return i(s,a),s.prototype.schedule=function(u,l){return l===void 0&&(l=0),l>0?a.prototype.schedule.call(this,u,l):(this.delay=l,this.state=u,this.scheduler.flush(this),this)},s.prototype.execute=function(u,l){return l>0||this.closed?a.prototype.execute.call(this,u,l):this._execute(u,l)},s.prototype.requestAsyncId=function(u,l,c){return c===void 0&&(c=0),c!=null&&c>0||c==null&&this.delay>0?a.prototype.requestAsyncId.call(this,u,l,c):(u.flush(this),0)},s}(t(5267).AsyncAction);e.QueueAction=o},1293:function(r,e,t){var n,i=this&&this.__extends||(n=function(a,s){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},n(a,s)},function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=a}n(a,s),a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)});Object.defineProperty(e,"__esModule",{value:!0}),e.QueueScheduler=void 0;var o=function(a){function s(){return a!==null&&a.apply(this,arguments)||this}return i(s,a),s}(t(5648).AsyncScheduler);e.QueueScheduler=o},182:function(r,e,t){var n,i=this&&this.__extends||(n=function(l,c){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(f[d]=h[d])},n(l,c)},function(l,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function f(){this.constructor=l}n(l,c),l.prototype=c===null?Object.create(c):(f.prototype=c.prototype,new f)});Object.defineProperty(e,"__esModule",{value:!0}),e.VirtualAction=e.VirtualTimeScheduler=void 0;var o=t(5267),a=t(8014),s=function(l){function c(f,h){f===void 0&&(f=u),h===void 0&&(h=1/0);var d=l.call(this,f,function(){return d.frame})||this;return d.maxFrames=h,d.frame=0,d.index=-1,d}return i(c,l),c.prototype.flush=function(){for(var f,h,d=this.actions,v=this.maxFrames;(h=d[0])&&h.delay<=v&&(d.shift(),this.frame=h.delay,!(f=h.execute(h.state,h.delay))););if(f){for(;h=d.shift();)h.unsubscribe();throw f}},c.frameTimeFactor=10,c}(t(5648).AsyncScheduler);e.VirtualTimeScheduler=s;var u=function(l){function c(f,h,d){d===void 0&&(d=f.index+=1);var v=l.call(this,f,h)||this;return v.scheduler=f,v.work=h,v.index=d,v.active=!0,v.index=f.index=d,v}return i(c,l),c.prototype.schedule=function(f,h){if(h===void 0&&(h=0),Number.isFinite(h)){if(!this.id)return l.prototype.schedule.call(this,f,h);this.active=!1;var d=new c(this.scheduler,this.work);return this.add(d),d.schedule(f,h)}return a.Subscription.EMPTY},c.prototype.requestAsyncId=function(f,h,d){d===void 0&&(d=0),this.delay=f.frame+d;var v=f.actions;return v.push(this),v.sort(c.sortActions),1},c.prototype.recycleAsyncId=function(f,h,d){},c.prototype._execute=function(f,h){if(this.active===!0)return l.prototype._execute.call(this,f,h)},c.sortActions=function(f,h){return f.delay===h.delay?f.index===h.index?0:f.index>h.index?1:-1:f.delay>h.delay?1:-1},c}(o.AsyncAction);e.VirtualAction=u},3862:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrame=e.animationFrameScheduler=void 0;var n=t(2628),i=t(3229);e.animationFrameScheduler=new i.AnimationFrameScheduler(n.AnimationFrameAction),e.animationFrame=e.animationFrameScheduler},9507:function(r,e,t){var n=this&&this.__read||function(a,s){var u=typeof Symbol=="function"&&a[Symbol.iterator];if(!u)return a;var l,c,f=u.call(a),h=[];try{for(;(s===void 0||s-- >0)&&!(l=f.next()).done;)h.push(l.value)}catch(d){c={error:d}}finally{try{l&&!l.done&&(u=f.return)&&u.call(f)}finally{if(c)throw c.error}}return h},i=this&&this.__spreadArray||function(a,s){for(var u=0,l=s.length,c=a.length;u<l;u++,c++)a[c]=s[u];return a};Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrameProvider=void 0;var o=t(8014);e.animationFrameProvider={schedule:function(a){var s=requestAnimationFrame,u=cancelAnimationFrame,l=e.animationFrameProvider.delegate;l&&(s=l.requestAnimationFrame,u=l.cancelAnimationFrame);var c=s(function(f){u=void 0,a(f)});return new o.Subscription(function(){return u==null?void 0:u(c)})},requestAnimationFrame:function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var u=e.animationFrameProvider.delegate;return((u==null?void 0:u.requestAnimationFrame)||requestAnimationFrame).apply(void 0,i([],n(a)))},cancelAnimationFrame:function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var u=e.animationFrameProvider.delegate;return((u==null?void 0:u.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,i([],n(a)))},delegate:void 0}},3692:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.asap=e.asapScheduler=void 0;var n=t(5006),i=t(827);e.asapScheduler=new i.AsapScheduler(n.AsapAction),e.asap=e.asapScheduler},7961:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.async=e.asyncScheduler=void 0;var n=t(5267),i=t(5648);e.asyncScheduler=new i.AsyncScheduler(n.AsyncAction),e.async=e.asyncScheduler},9568:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.dateTimestampProvider=void 0,e.dateTimestampProvider={now:function(){return(e.dateTimestampProvider.delegate||Date).now()},delegate:void 0}},6293:function(r,e,t){var n=this&&this.__read||function(u,l){var c=typeof Symbol=="function"&&u[Symbol.iterator];if(!c)return u;var f,h,d=c.call(u),v=[];try{for(;(l===void 0||l-- >0)&&!(f=d.next()).done;)v.push(f.value)}catch(y){h={error:y}}finally{try{f&&!f.done&&(c=d.return)&&c.call(d)}finally{if(h)throw h.error}}return v},i=this&&this.__spreadArray||function(u,l){for(var c=0,f=l.length,h=u.length;c<f;c++,h++)u[h]=l[c];return u};Object.defineProperty(e,"__esModule",{value:!0}),e.immediateProvider=void 0;var o=t(7245),a=o.Immediate.setImmediate,s=o.Immediate.clearImmediate;e.immediateProvider={setImmediate:function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];var c=e.immediateProvider.delegate;return((c==null?void 0:c.setImmediate)||a).apply(void 0,i([],n(u)))},clearImmediate:function(u){var l=e.immediateProvider.delegate;return((l==null?void 0:l.clearImmediate)||s)(u)},delegate:void 0}},5649:function(r,e){var t=this&&this.__read||function(i,o){var a=typeof Symbol=="function"&&i[Symbol.iterator];if(!a)return i;var s,u,l=a.call(i),c=[];try{for(;(o===void 0||o-- >0)&&!(s=l.next()).done;)c.push(s.value)}catch(f){u={error:f}}finally{try{s&&!s.done&&(a=l.return)&&a.call(l)}finally{if(u)throw u.error}}return c},n=this&&this.__spreadArray||function(i,o){for(var a=0,s=o.length,u=i.length;a<s;a++,u++)i[u]=o[a];return i};Object.defineProperty(e,"__esModule",{value:!0}),e.intervalProvider=void 0,e.intervalProvider={setInterval:function(i,o){for(var a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];var u=e.intervalProvider.delegate;return u!=null&&u.setInterval?u.setInterval.apply(u,n([i,o],t(a))):setInterval.apply(void 0,n([i,o],t(a)))},clearInterval:function(i){var o=e.intervalProvider.delegate;return((o==null?void 0:o.clearInterval)||clearInterval)(i)},delegate:void 0}},4746:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.performanceTimestampProvider=void 0,e.performanceTimestampProvider={now:function(){return(e.performanceTimestampProvider.delegate||performance).now()},delegate:void 0}},2886:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.queue=e.queueScheduler=void 0;var n=t(4212),i=t(1293);e.queueScheduler=new i.QueueScheduler(n.QueueAction),e.queue=e.queueScheduler},9155:function(r,e){var t=this&&this.__read||function(i,o){var a=typeof Symbol=="function"&&i[Symbol.iterator];if(!a)return i;var s,u,l=a.call(i),c=[];try{for(;(o===void 0||o-- >0)&&!(s=l.next()).done;)c.push(s.value)}catch(f){u={error:f}}finally{try{s&&!s.done&&(a=l.return)&&a.call(l)}finally{if(u)throw u.error}}return c},n=this&&this.__spreadArray||function(i,o){for(var a=0,s=o.length,u=i.length;a<s;a++,u++)i[u]=o[a];return i};Object.defineProperty(e,"__esModule",{value:!0}),e.timeoutProvider=void 0,e.timeoutProvider={setTimeout:function(i,o){for(var a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];var u=e.timeoutProvider.delegate;return u!=null&&u.setTimeout?u.setTimeout.apply(u,n([i,o],t(a))):setTimeout.apply(void 0,n([i,o],t(a)))},clearTimeout:function(i){var o=e.timeoutProvider.delegate;return((o==null?void 0:o.clearTimeout)||clearTimeout)(i)},delegate:void 0}},1964:(r,e)=>{function t(){return typeof Symbol=="function"&&Symbol.iterator?Symbol.iterator:"@@iterator"}Object.defineProperty(e,"__esModule",{value:!0}),e.iterator=e.getSymbolIterator=void 0,e.getSymbolIterator=t,e.iterator=t()},3327:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.observable=void 0,e.observable=typeof Symbol=="function"&&Symbol.observable||"@@observable"},6038:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},7057:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ArgumentOutOfRangeError=void 0;var n=t(5568);e.ArgumentOutOfRangeError=n.createErrorClass(function(i){return function(){i(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}})},2823:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.EmptyError=void 0;var n=t(5568);e.EmptyError=n.createErrorClass(function(i){return function(){i(this),this.name="EmptyError",this.message="no elements in sequence"}})},7245:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TestTools=e.Immediate=void 0;var t,n=1,i={};function o(a){return a in i&&(delete i[a],!0)}e.Immediate={setImmediate:function(a){var s=n++;return i[s]=!0,t||(t=Promise.resolve()),t.then(function(){return o(s)&&a()}),s},clearImmediate:function(a){o(a)}},e.TestTools={pending:function(){return Object.keys(i).length}}},1759:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NotFoundError=void 0;var n=t(5568);e.NotFoundError=n.createErrorClass(function(i){return function(o){i(this),this.name="NotFoundError",this.message=o}})},9686:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectUnsubscribedError=void 0;var n=t(5568);e.ObjectUnsubscribedError=n.createErrorClass(function(i){return function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})},1505:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SequenceError=void 0;var n=t(5568);e.SequenceError=n.createErrorClass(function(i){return function(o){i(this),this.name="SequenceError",this.message=o}})},5788:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.UnsubscriptionError=void 0;var n=t(5568);e.UnsubscriptionError=n.createErrorClass(function(i){return function(o){i(this),this.message=o?o.length+` errors occurred during unsubscription:
`+o.map(function(a,s){return s+1+") "+a.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=o}})},1107:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.popNumber=e.popScheduler=e.popResultSelector=void 0;var n=t(1018),i=t(8613);function o(a){return a[a.length-1]}e.popResultSelector=function(a){return n.isFunction(o(a))?a.pop():void 0},e.popScheduler=function(a){return i.isScheduler(o(a))?a.pop():void 0},e.popNumber=function(a,s){return typeof o(a)=="number"?a.pop():s}},7360:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.argsArgArrayOrObject=void 0;var t=Array.isArray,n=Object.getPrototypeOf,i=Object.prototype,o=Object.keys;e.argsArgArrayOrObject=function(a){if(a.length===1){var s=a[0];if(t(s))return{args:s,keys:null};if((l=s)&&typeof l=="object"&&n(l)===i){var u=o(s);return{args:u.map(function(c){return s[c]}),keys:u}}}var l;return{args:a,keys:null}}},8535:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.argsOrArgArray=void 0;var t=Array.isArray;e.argsOrArgArray=function(n){return n.length===1&&t(n[0])?n[0]:n}},7479:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.arrRemove=void 0,e.arrRemove=function(t,n){if(t){var i=t.indexOf(n);0<=i&&t.splice(i,1)}}},5568:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createErrorClass=void 0,e.createErrorClass=function(t){var n=t(function(i){Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}},6013:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createObject=void 0,e.createObject=function(t,n){return t.reduce(function(i,o,a){return i[o]=n[a],i},{})}},9223:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.captureError=e.errorContext=void 0;var n=t(3413),i=null;e.errorContext=function(o){if(n.config.useDeprecatedSynchronousErrorHandling){var a=!i;if(a&&(i={errorThrown:!1,error:null}),o(),a){var s=i,u=s.errorThrown,l=s.error;if(i=null,u)throw l}}else o()},e.captureError=function(o){n.config.useDeprecatedSynchronousErrorHandling&&i&&(i.errorThrown=!0,i.error=o)}},7110:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.executeSchedule=void 0,e.executeSchedule=function(t,n,i,o,a){o===void 0&&(o=0),a===void 0&&(a=!1);var s=n.schedule(function(){i(),a?t.add(this.schedule(null,o)):this.unsubscribe()},o);if(t.add(s),!a)return s}},6640:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.identity=void 0,e.identity=function(t){return t}},8046:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isArrayLike=void 0,e.isArrayLike=function(t){return t&&typeof t.length=="number"&&typeof t!="function"}},1358:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isAsyncIterable=void 0;var n=t(1018);e.isAsyncIterable=function(i){return Symbol.asyncIterator&&n.isFunction(i==null?void 0:i[Symbol.asyncIterator])}},1074:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isValidDate=void 0,e.isValidDate=function(t){return t instanceof Date&&!isNaN(t)}},1018:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isFunction=void 0,e.isFunction=function(t){return typeof t=="function"}},1116:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isInteropObservable=void 0;var n=t(3327),i=t(1018);e.isInteropObservable=function(o){return i.isFunction(o[n.observable])}},6368:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isIterable=void 0;var n=t(1964),i=t(1018);e.isIterable=function(o){return i.isFunction(o==null?void 0:o[n.iterator])}},1751:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isObservable=void 0;var n=t(4662),i=t(1018);e.isObservable=function(o){return!!o&&(o instanceof n.Observable||i.isFunction(o.lift)&&i.isFunction(o.subscribe))}},7629:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isPromise=void 0;var n=t(1018);e.isPromise=function(i){return n.isFunction(i==null?void 0:i.then)}},9137:function(r,e,t){var n=this&&this.__generator||function(s,u){var l,c,f,h,d={label:0,sent:function(){if(1&f[0])throw f[1];return f[1]},trys:[],ops:[]};return h={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function v(y){return function(w){return function(b){if(l)throw new TypeError("Generator is already executing.");for(;d;)try{if(l=1,c&&(f=2&b[0]?c.return:b[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,b[1])).done)return f;switch(c=0,f&&(b=[2&b[0],f.value]),b[0]){case 0:case 1:f=b;break;case 4:return d.label++,{value:b[1],done:!1};case 5:d.label++,c=b[1],b=[0];continue;case 7:b=d.ops.pop(),d.trys.pop();continue;default:if(!((f=(f=d.trys).length>0&&f[f.length-1])||b[0]!==6&&b[0]!==2)){d=0;continue}if(b[0]===3&&(!f||b[1]>f[0]&&b[1]<f[3])){d.label=b[1];break}if(b[0]===6&&d.label<f[1]){d.label=f[1],f=b;break}if(f&&d.label<f[2]){d.label=f[2],d.ops.push(b);break}f[2]&&d.ops.pop(),d.trys.pop();continue}b=u.call(s,d)}catch(p){b=[6,p],c=0}finally{l=f=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}([y,w])}}},i=this&&this.__await||function(s){return this instanceof i?(this.v=s,this):new i(s)},o=this&&this.__asyncGenerator||function(s,u,l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c,f=l.apply(s,u||[]),h=[];return c={},d("next"),d("throw"),d("return"),c[Symbol.asyncIterator]=function(){return this},c;function d(p){f[p]&&(c[p]=function(_){return new Promise(function(O,P){h.push([p,_,O,P])>1||v(p,_)})})}function v(p,_){try{(O=f[p](_)).value instanceof i?Promise.resolve(O.value.v).then(y,w):b(h[0][2],O)}catch(P){b(h[0][3],P)}var O}function y(p){v("next",p)}function w(p){v("throw",p)}function b(p,_){p(_),h.shift(),h.length&&v(h[0][0],h[0][1])}};Object.defineProperty(e,"__esModule",{value:!0}),e.isReadableStreamLike=e.readableStreamLikeToAsyncGenerator=void 0;var a=t(1018);e.readableStreamLikeToAsyncGenerator=function(s){return o(this,arguments,function(){var u,l,c;return n(this,function(f){switch(f.label){case 0:u=s.getReader(),f.label=1;case 1:f.trys.push([1,,9,10]),f.label=2;case 2:return[4,i(u.read())];case 3:return l=f.sent(),c=l.value,l.done?[4,i(void 0)]:[3,5];case 4:return[2,f.sent()];case 5:return[4,i(c)];case 6:return[4,f.sent()];case 7:return f.sent(),[3,2];case 8:return[3,10];case 9:return u.releaseLock(),[7];case 10:return[2]}})})},e.isReadableStreamLike=function(s){return a.isFunction(s==null?void 0:s.getReader)}},8613:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isScheduler=void 0;var n=t(1018);e.isScheduler=function(i){return i&&n.isFunction(i.schedule)}},7843:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.operate=e.hasLift=void 0;var n=t(1018);function i(o){return n.isFunction(o==null?void 0:o.lift)}e.hasLift=i,e.operate=function(o){return function(a){if(i(a))return a.lift(function(s){try{return o(s,this)}catch(u){this.error(u)}});throw new TypeError("Unable to lift unknown Observable type")}}},1251:function(r,e,t){var n=this&&this.__read||function(s,u){var l=typeof Symbol=="function"&&s[Symbol.iterator];if(!l)return s;var c,f,h=l.call(s),d=[];try{for(;(u===void 0||u-- >0)&&!(c=h.next()).done;)d.push(c.value)}catch(v){f={error:v}}finally{try{c&&!c.done&&(l=h.return)&&l.call(h)}finally{if(f)throw f.error}}return d},i=this&&this.__spreadArray||function(s,u){for(var l=0,c=u.length,f=s.length;l<c;l++,f++)s[f]=u[l];return s};Object.defineProperty(e,"__esModule",{value:!0}),e.mapOneOrManyArgs=void 0;var o=t(5471),a=Array.isArray;e.mapOneOrManyArgs=function(s){return o.map(function(u){return function(l,c){return a(c)?l.apply(void 0,i([],n(c))):l(c)}(s,u)})}},1342:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.noop=void 0,e.noop=function(){}},245:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.not=void 0,e.not=function(t,n){return function(i,o){return!t.call(n,i,o)}}},2706:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.pipeFromArray=e.pipe=void 0;var n=t(6640);function i(o){return o.length===0?n.identity:o.length===1?o[0]:function(a){return o.reduce(function(s,u){return u(s)},a)}}e.pipe=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return i(o)},e.pipeFromArray=i},7315:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reportUnhandledError=void 0;var n=t(3413),i=t(9155);e.reportUnhandledError=function(o){i.timeoutProvider.setTimeout(function(){var a=n.config.onUnhandledError;if(!a)throw o;a(o)})}},7614:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createInvalidObservableTypeError=void 0,e.createInvalidObservableTypeError=function(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}},9419:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mergeAll=e.merge=e.max=e.materialize=e.mapTo=e.map=e.last=e.isEmpty=e.ignoreElements=e.groupBy=e.first=e.findIndex=e.find=e.finalize=e.filter=e.expand=e.exhaustMap=e.exhaustAll=e.exhaust=e.every=e.endWith=e.elementAt=e.distinctUntilKeyChanged=e.distinctUntilChanged=e.distinct=e.dematerialize=e.delayWhen=e.delay=e.defaultIfEmpty=e.debounceTime=e.debounce=e.count=e.connect=e.concatWith=e.concatMapTo=e.concatMap=e.concatAll=e.concat=e.combineLatestWith=e.combineLatest=e.combineLatestAll=e.combineAll=e.catchError=e.bufferWhen=e.bufferToggle=e.bufferTime=e.bufferCount=e.buffer=e.auditTime=e.audit=void 0,e.timeInterval=e.throwIfEmpty=e.throttleTime=e.throttle=e.tap=e.takeWhile=e.takeUntil=e.takeLast=e.take=e.switchScan=e.switchMapTo=e.switchMap=e.switchAll=e.subscribeOn=e.startWith=e.skipWhile=e.skipUntil=e.skipLast=e.skip=e.single=e.shareReplay=e.share=e.sequenceEqual=e.scan=e.sampleTime=e.sample=e.refCount=e.retryWhen=e.retry=e.repeatWhen=e.repeat=e.reduce=e.raceWith=e.race=e.publishReplay=e.publishLast=e.publishBehavior=e.publish=e.pluck=e.partition=e.pairwise=e.onErrorResumeNext=e.observeOn=e.multicast=e.min=e.mergeWith=e.mergeScan=e.mergeMapTo=e.mergeMap=e.flatMap=void 0,e.zipWith=e.zipAll=e.zip=e.withLatestFrom=e.windowWhen=e.windowToggle=e.windowTime=e.windowCount=e.window=e.toArray=e.timestamp=e.timeoutWith=e.timeout=void 0;var n=t(3146);Object.defineProperty(e,"audit",{enumerable:!0,get:function(){return n.audit}});var i=t(3231);Object.defineProperty(e,"auditTime",{enumerable:!0,get:function(){return i.auditTime}});var o=t(8015);Object.defineProperty(e,"buffer",{enumerable:!0,get:function(){return o.buffer}});var a=t(5572);Object.defineProperty(e,"bufferCount",{enumerable:!0,get:function(){return a.bufferCount}});var s=t(7210);Object.defineProperty(e,"bufferTime",{enumerable:!0,get:function(){return s.bufferTime}});var u=t(8995);Object.defineProperty(e,"bufferToggle",{enumerable:!0,get:function(){return u.bufferToggle}});var l=t(8831);Object.defineProperty(e,"bufferWhen",{enumerable:!0,get:function(){return l.bufferWhen}});var c=t(8118);Object.defineProperty(e,"catchError",{enumerable:!0,get:function(){return c.catchError}});var f=t(6625);Object.defineProperty(e,"combineAll",{enumerable:!0,get:function(){return f.combineAll}});var h=t(6728);Object.defineProperty(e,"combineLatestAll",{enumerable:!0,get:function(){return h.combineLatestAll}});var d=t(2551);Object.defineProperty(e,"combineLatest",{enumerable:!0,get:function(){return d.combineLatest}});var v=t(8239);Object.defineProperty(e,"combineLatestWith",{enumerable:!0,get:function(){return v.combineLatestWith}});var y=t(7601);Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return y.concat}});var w=t(8158);Object.defineProperty(e,"concatAll",{enumerable:!0,get:function(){return w.concatAll}});var b=t(9135);Object.defineProperty(e,"concatMap",{enumerable:!0,get:function(){return b.concatMap}});var p=t(9938);Object.defineProperty(e,"concatMapTo",{enumerable:!0,get:function(){return p.concatMapTo}});var _=t(9669);Object.defineProperty(e,"concatWith",{enumerable:!0,get:function(){return _.concatWith}});var O=t(1483);Object.defineProperty(e,"connect",{enumerable:!0,get:function(){return O.connect}});var P=t(1038);Object.defineProperty(e,"count",{enumerable:!0,get:function(){return P.count}});var R=t(4461);Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return R.debounce}});var T=t(8079);Object.defineProperty(e,"debounceTime",{enumerable:!0,get:function(){return T.debounceTime}});var A=t(378);Object.defineProperty(e,"defaultIfEmpty",{enumerable:!0,get:function(){return A.defaultIfEmpty}});var M=t(914);Object.defineProperty(e,"delay",{enumerable:!0,get:function(){return M.delay}});var N=t(8766);Object.defineProperty(e,"delayWhen",{enumerable:!0,get:function(){return N.delayWhen}});var j=t(7441);Object.defineProperty(e,"dematerialize",{enumerable:!0,get:function(){return j.dematerialize}});var B=t(5365);Object.defineProperty(e,"distinct",{enumerable:!0,get:function(){return B.distinct}});var q=t(8937);Object.defineProperty(e,"distinctUntilChanged",{enumerable:!0,get:function(){return q.distinctUntilChanged}});var W=t(9612);Object.defineProperty(e,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return W.distinctUntilKeyChanged}});var J=t(4520);Object.defineProperty(e,"elementAt",{enumerable:!0,get:function(){return J.elementAt}});var te=t(1776);Object.defineProperty(e,"endWith",{enumerable:!0,get:function(){return te.endWith}});var re=t(5510);Object.defineProperty(e,"every",{enumerable:!0,get:function(){return re.every}});var ee=t(1551);Object.defineProperty(e,"exhaust",{enumerable:!0,get:function(){return ee.exhaust}});var fe=t(2752);Object.defineProperty(e,"exhaustAll",{enumerable:!0,get:function(){return fe.exhaustAll}});var he=t(4753);Object.defineProperty(e,"exhaustMap",{enumerable:!0,get:function(){return he.exhaustMap}});var se=t(7661);Object.defineProperty(e,"expand",{enumerable:!0,get:function(){return se.expand}});var me=t(783);Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return me.filter}});var De=t(3555);Object.defineProperty(e,"finalize",{enumerable:!0,get:function(){return De.finalize}});var Le=t(7714);Object.defineProperty(e,"find",{enumerable:!0,get:function(){return Le.find}});var Ie=t(9756);Object.defineProperty(e,"findIndex",{enumerable:!0,get:function(){return Ie.findIndex}});var qe=t(8275);Object.defineProperty(e,"first",{enumerable:!0,get:function(){return qe.first}});var Ge=t(7815);Object.defineProperty(e,"groupBy",{enumerable:!0,get:function(){return Ge.groupBy}});var Me=t(490);Object.defineProperty(e,"ignoreElements",{enumerable:!0,get:function(){return Me.ignoreElements}});var Pe=t(9356);Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return Pe.isEmpty}});var de=t(8669);Object.defineProperty(e,"last",{enumerable:!0,get:function(){return de.last}});var Oe=t(5471);Object.defineProperty(e,"map",{enumerable:!0,get:function(){return Oe.map}});var Ae=t(3218);Object.defineProperty(e,"mapTo",{enumerable:!0,get:function(){return Ae.mapTo}});var Ve=t(2360);Object.defineProperty(e,"materialize",{enumerable:!0,get:function(){return Ve.materialize}});var tt=t(1415);Object.defineProperty(e,"max",{enumerable:!0,get:function(){return tt.max}});var ht=t(361);Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return ht.merge}});var xt=t(7302);Object.defineProperty(e,"mergeAll",{enumerable:!0,get:function(){return xt.mergeAll}});var ut=t(6902);Object.defineProperty(e,"flatMap",{enumerable:!0,get:function(){return ut.flatMap}});var H=t(983);Object.defineProperty(e,"mergeMap",{enumerable:!0,get:function(){return H.mergeMap}});var X=t(6586);Object.defineProperty(e,"mergeMapTo",{enumerable:!0,get:function(){return X.mergeMapTo}});var ne=t(4408);Object.defineProperty(e,"mergeScan",{enumerable:!0,get:function(){return ne.mergeScan}});var Se=t(8253);Object.defineProperty(e,"mergeWith",{enumerable:!0,get:function(){return Se.mergeWith}});var Te=t(2669);Object.defineProperty(e,"min",{enumerable:!0,get:function(){return Te.min}});var Ne=t(9247);Object.defineProperty(e,"multicast",{enumerable:!0,get:function(){return Ne.multicast}});var et=t(5184);Object.defineProperty(e,"observeOn",{enumerable:!0,get:function(){return et.observeOn}});var wt=t(1226);Object.defineProperty(e,"onErrorResumeNext",{enumerable:!0,get:function(){return wt.onErrorResumeNext}});var lt=t(1518);Object.defineProperty(e,"pairwise",{enumerable:!0,get:function(){return lt.pairwise}});var pe=t(2171);Object.defineProperty(e,"partition",{enumerable:!0,get:function(){return pe.partition}});var Ue=t(4912);Object.defineProperty(e,"pluck",{enumerable:!0,get:function(){return Ue.pluck}});var nt=t(766);Object.defineProperty(e,"publish",{enumerable:!0,get:function(){return nt.publish}});var Je=t(7220);Object.defineProperty(e,"publishBehavior",{enumerable:!0,get:function(){return Je.publishBehavior}});var at=t(6106);Object.defineProperty(e,"publishLast",{enumerable:!0,get:function(){return at.publishLast}});var kt=t(8157);Object.defineProperty(e,"publishReplay",{enumerable:!0,get:function(){return kt.publishReplay}});var dt=t(4440);Object.defineProperty(e,"race",{enumerable:!0,get:function(){return dt.race}});var Dt=t(5600);Object.defineProperty(e,"raceWith",{enumerable:!0,get:function(){return Dt.raceWith}});var Xt=t(9139);Object.defineProperty(e,"reduce",{enumerable:!0,get:function(){return Xt.reduce}});var fr=t(8522);Object.defineProperty(e,"repeat",{enumerable:!0,get:function(){return fr.repeat}});var Vt=t(6566);Object.defineProperty(e,"repeatWhen",{enumerable:!0,get:function(){return Vt.repeatWhen}});var lr=t(7835);Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return lr.retry}});var ir=t(9843);Object.defineProperty(e,"retryWhen",{enumerable:!0,get:function(){return ir.retryWhen}});var Jt=t(7561);Object.defineProperty(e,"refCount",{enumerable:!0,get:function(){return Jt.refCount}});var Wr=t(1731);Object.defineProperty(e,"sample",{enumerable:!0,get:function(){return Wr.sample}});var on=t(6086);Object.defineProperty(e,"sampleTime",{enumerable:!0,get:function(){return on.sampleTime}});var Pi=t(8624);Object.defineProperty(e,"scan",{enumerable:!0,get:function(){return Pi.scan}});var vn=t(582);Object.defineProperty(e,"sequenceEqual",{enumerable:!0,get:function(){return vn.sequenceEqual}});var ln=t(8977);Object.defineProperty(e,"share",{enumerable:!0,get:function(){return ln.share}});var En=t(3133);Object.defineProperty(e,"shareReplay",{enumerable:!0,get:function(){return En.shareReplay}});var Cn=t(3001);Object.defineProperty(e,"single",{enumerable:!0,get:function(){return Cn.single}});var Un=t(3982);Object.defineProperty(e,"skip",{enumerable:!0,get:function(){return Un.skip}});var Xn=t(9098);Object.defineProperty(e,"skipLast",{enumerable:!0,get:function(){return Xn.skipLast}});var to=t(7372);Object.defineProperty(e,"skipUntil",{enumerable:!0,get:function(){return to.skipUntil}});var Ei=t(4721);Object.defineProperty(e,"skipWhile",{enumerable:!0,get:function(){return Ei.skipWhile}});var ro=t(269);Object.defineProperty(e,"startWith",{enumerable:!0,get:function(){return ro.startWith}});var Fi=t(8960);Object.defineProperty(e,"subscribeOn",{enumerable:!0,get:function(){return Fi.subscribeOn}});var ho=t(8774);Object.defineProperty(e,"switchAll",{enumerable:!0,get:function(){return ho.switchAll}});var zn=t(3879);Object.defineProperty(e,"switchMap",{enumerable:!0,get:function(){return zn.switchMap}});var yr=t(3274);Object.defineProperty(e,"switchMapTo",{enumerable:!0,get:function(){return yr.switchMapTo}});var an=t(8712);Object.defineProperty(e,"switchScan",{enumerable:!0,get:function(){return an.switchScan}});var no=t(846);Object.defineProperty(e,"take",{enumerable:!0,get:function(){return no.take}});var Oi=t(8330);Object.defineProperty(e,"takeLast",{enumerable:!0,get:function(){return Oi.takeLast}});var To=t(4780);Object.defineProperty(e,"takeUntil",{enumerable:!0,get:function(){return To.takeUntil}});var Zs=t(2129);Object.defineProperty(e,"takeWhile",{enumerable:!0,get:function(){return Zs.takeWhile}});var vo=t(3964);Object.defineProperty(e,"tap",{enumerable:!0,get:function(){return vo.tap}});var La=t(8941);Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return La.throttle}});var Qs=t(7640);Object.defineProperty(e,"throttleTime",{enumerable:!0,get:function(){return Qs.throttleTime}});var ha=t(4869);Object.defineProperty(e,"throwIfEmpty",{enumerable:!0,get:function(){return ha.throwIfEmpty}});var vl=t(489);Object.defineProperty(e,"timeInterval",{enumerable:!0,get:function(){return vl.timeInterval}});var Na=t(1554);Object.defineProperty(e,"timeout",{enumerable:!0,get:function(){return Na.timeout}});var vi=t(4862);Object.defineProperty(e,"timeoutWith",{enumerable:!0,get:function(){return vi.timeoutWith}});var da=t(6505);Object.defineProperty(e,"timestamp",{enumerable:!0,get:function(){return da.timestamp}});var po=t(2343);Object.defineProperty(e,"toArray",{enumerable:!0,get:function(){return po.toArray}});var Pn=t(5477);Object.defineProperty(e,"window",{enumerable:!0,get:function(){return Pn.window}});var Kn=t(6746);Object.defineProperty(e,"windowCount",{enumerable:!0,get:function(){return Kn.windowCount}});var hr=t(8208);Object.defineProperty(e,"windowTime",{enumerable:!0,get:function(){return hr.windowTime}});var Yi=t(6637);Object.defineProperty(e,"windowToggle",{enumerable:!0,get:function(){return Yi.windowToggle}});var go=t(1141);Object.defineProperty(e,"windowWhen",{enumerable:!0,get:function(){return go.windowWhen}});var Hr=t(5442);Object.defineProperty(e,"withLatestFrom",{enumerable:!0,get:function(){return Hr.withLatestFrom}});var jr=t(5918);Object.defineProperty(e,"zip",{enumerable:!0,get:function(){return jr.zip}});var Ai=t(187);Object.defineProperty(e,"zipAll",{enumerable:!0,get:function(){return Ai.zipAll}});var Js=t(8538);Object.defineProperty(e,"zipWith",{enumerable:!0,get:function(){return Js.zipWith}})},5636:(r,e,t)=>{var n=t(1048),i=n.Buffer;function o(s,u){for(var l in s)u[l]=s[l]}function a(s,u,l){return i(s,u,l)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?r.exports=n:(o(n,e),e.Buffer=a),a.prototype=Object.create(i.prototype),o(i,a),a.from=function(s,u,l){if(typeof s=="number")throw new TypeError("Argument must not be a number");return i(s,u,l)},a.alloc=function(s,u,l){if(typeof s!="number")throw new TypeError("Argument must be a number");var c=i(s);return u!==void 0?typeof l=="string"?c.fill(u,l):c.fill(u):c.fill(0),c},a.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return i(s)},a.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(s)}},9975:(r,e,t)=>{var n=t(7101),i=Array.prototype.concat,o=Array.prototype.slice,a=r.exports=function(s){for(var u=[],l=0,c=s.length;l<c;l++){var f=s[l];n(f)?u=i.call(u,o.call(f)):u.push(f)}return u};a.wrap=function(s){return function(){return s(a(arguments))}}},7101:r=>{r.exports=function(e){return!(!e||typeof e=="string")&&(e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String"))}},8888:(r,e,t)=>{var n=t(5636).Buffer,i=n.isEncoding||function(v){switch((v=""+v)&&v.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(v){var y;switch(this.encoding=function(w){var b=function(p){if(!p)return"utf8";for(var _;;)switch(p){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return p;default:if(_)return;p=(""+p).toLowerCase(),_=!0}}(w);if(typeof b!="string"&&(n.isEncoding===i||!i(w)))throw new Error("Unknown encoding: "+w);return b||w}(v),this.encoding){case"utf16le":this.text=u,this.end=l,y=4;break;case"utf8":this.fillLast=s,y=4;break;case"base64":this.text=c,this.end=f,y=3;break;default:return this.write=h,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(y)}function a(v){return v<=127?0:v>>5==6?2:v>>4==14?3:v>>3==30?4:v>>6==2?-1:-2}function s(v){var y=this.lastTotal-this.lastNeed,w=function(b,p,_){if((192&p[0])!=128)return b.lastNeed=0,"";if(b.lastNeed>1&&p.length>1){if((192&p[1])!=128)return b.lastNeed=1,"";if(b.lastNeed>2&&p.length>2&&(192&p[2])!=128)return b.lastNeed=2,""}}(this,v);return w!==void 0?w:this.lastNeed<=v.length?(v.copy(this.lastChar,y,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(v.copy(this.lastChar,y,0,v.length),void(this.lastNeed-=v.length))}function u(v,y){if((v.length-y)%2==0){var w=v.toString("utf16le",y);if(w){var b=w.charCodeAt(w.length-1);if(b>=55296&&b<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=v[v.length-2],this.lastChar[1]=v[v.length-1],w.slice(0,-1)}return w}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=v[v.length-1],v.toString("utf16le",y,v.length-1)}function l(v){var y=v&&v.length?this.write(v):"";if(this.lastNeed){var w=this.lastTotal-this.lastNeed;return y+this.lastChar.toString("utf16le",0,w)}return y}function c(v,y){var w=(v.length-y)%3;return w===0?v.toString("base64",y):(this.lastNeed=3-w,this.lastTotal=3,w===1?this.lastChar[0]=v[v.length-1]:(this.lastChar[0]=v[v.length-2],this.lastChar[1]=v[v.length-1]),v.toString("base64",y,v.length-w))}function f(v){var y=v&&v.length?this.write(v):"";return this.lastNeed?y+this.lastChar.toString("base64",0,3-this.lastNeed):y}function h(v){return v.toString(this.encoding)}function d(v){return v&&v.length?this.write(v):""}e.StringDecoder=o,o.prototype.write=function(v){if(v.length===0)return"";var y,w;if(this.lastNeed){if((y=this.fillLast(v))===void 0)return"";w=this.lastNeed,this.lastNeed=0}else w=0;return w<v.length?y?y+this.text(v,w):this.text(v,w):y||""},o.prototype.end=function(v){var y=v&&v.length?this.write(v):"";return this.lastNeed?y+"":y},o.prototype.text=function(v,y){var w=function(p,_,O){var P=_.length-1;if(P<O)return 0;var R=a(_[P]);return R>=0?(R>0&&(p.lastNeed=R-1),R):--P<O||R===-2?0:(R=a(_[P]))>=0?(R>0&&(p.lastNeed=R-2),R):--P<O||R===-2?0:(R=a(_[P]))>=0?(R>0&&(R===2?R=0:p.lastNeed=R-3),R):0}(this,v,y);if(!this.lastNeed)return v.toString("utf8",y);this.lastTotal=w;var b=v.length-(w-this.lastNeed);return v.copy(this.lastChar,0,b),v.toString("utf8",y,b)},o.prototype.fillLast=function(v){if(this.lastNeed<=v.length)return v.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);v.copy(this.lastChar,this.lastTotal-this.lastNeed,0,v.length),this.lastNeed-=v.length}}},Ok={};function Li(r){var e=Ok[r];if(e!==void 0)return e.exports;var t=Ok[r]={id:r,loaded:!1,exports:{}};return uH[r].call(t.exports,t,t.exports,Li),t.loaded=!0,t.exports}Li.n=r=>{var e=r&&r.__esModule?()=>r.default:()=>r;return Li.d(e,{a:e}),e},Li.d=(r,e)=>{for(var t in e)Li.o(e,t)&&!Li.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:e[t]})},Li.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),Li.o=(r,e)=>Object.prototype.hasOwnProperty.call(r,e),Li.nmd=r=>(r.paths=[],r.children||(r.children=[]),r);var Du={};(()=>{Li.d(Du,{RL:()=>Il,wK:()=>Yh,x_:()=>ov,lv:()=>Gf,YQ:()=>Nl,BP:()=>qm,GZ:()=>u_,Vw:()=>fs,Ay:()=>l_,_G:()=>Wc,Wy:()=>rr,h4:()=>Qb});var r=Li(5250);function e(g){return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},e(g)}function t(g,m){for(var x=0;x<m.length;x++){var E=m[x];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,n(E.key),E)}}function n(g){var m=function(x,E){if(e(x)!="object"||!x)return x;var D=x[Symbol.toPrimitive];if(D!==void 0){var I=D.call(x,"string");if(e(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(g);return e(m)=="symbol"?m:String(m)}var i=["onLayoutDone","onLayoutStep","onError","onLayoutComputing","onWebGLContextLost","onZoomTransitionDone","restart"],o=function(){function g(){var E,D,I,F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(function(V,z){if(!(V instanceof z))throw new TypeError("Cannot call a class as a function")})(this,g),E=this,I=void 0,(D=n(D="callbacks"))in E?Object.defineProperty(E,D,{value:I,enumerable:!0,configurable:!0,writable:!0}):E[D]=I,this.callbacks=F}var m,x;return m=g,x=[{key:"onZoomTransitionDone",value:function(){this.isValidFunction(this.callbacks.onZoomTransitionDone)&&this.callbacks.onZoomTransitionDone()}},{key:"onLayoutDone",value:function(){this.isValidFunction(this.callbacks.onLayoutDone)&&this.callbacks.onLayoutDone()}},{key:"onLayoutStep",value:function(E){this.isValidFunction(this.callbacks.onLayoutStep)&&this.callbacks.onLayoutStep(E)}},{key:"onLayoutComputing",value:function(E){this.isValidFunction(this.callbacks.onLayoutComputing)&&this.callbacks.onLayoutComputing(E)}},{key:"onError",value:function(E){this.isValidFunction(this.callbacks.onError)&&this.callbacks.onError(E)}},{key:"onWebGLContextLost",value:function(E){this.isValidFunction(this.callbacks.onWebGLContextLost)&&this.callbacks.onWebGLContextLost(E)}},{key:"isValidFunction",value:function(E){return E!==void 0&&typeof E=="function"}}],x&&t(m.prototype,x),Object.defineProperty(m,"prototype",{writable:!1}),g}(),a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,m){g.__proto__=m}||function(g,m){for(var x in m)m.hasOwnProperty(x)&&(g[x]=m[x])};function s(g,m){function x(){this.constructor=g}a(g,m),g.prototype=m===null?Object.create(m):(x.prototype=m.prototype,new x)}var u=function(){function g(m){m===void 0&&(m="Atom@"+Pn()),this.name=m,this.isPendingUnobservation=!0,this.observers=[],this.observersIndexes={},this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=Fr.NOT_TRACKING}return g.prototype.onBecomeUnobserved=function(){},g.prototype.reportObserved=function(){ml(this)},g.prototype.reportChanged=function(){Ts(),function(m){if(m.lowestObserverState!==Fr.STALE){m.lowestObserverState=Fr.STALE;for(var x=m.observers,E=x.length;E--;){var D=x[E];D.dependenciesState===Fr.UP_TO_DATE&&(D.isTracing!==Ho.NONE&&wc(D,m),D.onBecomeStale()),D.dependenciesState=Fr.STALE}}}(this),es()},g.prototype.toString=function(){return this.name},g}(),l=function(g){function m(x,E,D){x===void 0&&(x="Atom@"+Pn()),E===void 0&&(E=jr),D===void 0&&(D=jr);var I=g.call(this,x)||this;return I.name=x,I.onBecomeObservedHandler=E,I.onBecomeUnobservedHandler=D,I.isPendingUnobservation=!1,I.isBeingTracked=!1,I}return s(m,g),m.prototype.reportObserved=function(){return Ts(),g.prototype.reportObserved.call(this),this.isBeingTracked||(this.isBeingTracked=!0,this.onBecomeObservedHandler()),es(),!!Wt.trackingDerivation},m.prototype.onBecomeUnobserved=function(){this.isBeingTracked=!1,this.onBecomeUnobservedHandler()},m}(u),c=Ja("Atom",u);function f(g){return g.interceptors&&g.interceptors.length>0}function h(g,m){var x=g.interceptors||(g.interceptors=[]);return x.push(m),Hr(function(){var E=x.indexOf(m);E!==-1&&x.splice(E,1)})}function d(g,m){var x=Cs();try{var E=g.interceptors;if(E)for(var D=0,I=E.length;D<I&&(hr(!(m=E[D](m))||m.type,"Intercept handlers should return nothing or a change object"),m);D++);return m}finally{ts(x)}}function v(g){return g.changeListeners&&g.changeListeners.length>0}function y(g,m){var x=g.changeListeners||(g.changeListeners=[]);return x.push(m),Hr(function(){var E=x.indexOf(m);E!==-1&&x.splice(E,1)})}function w(g,m){var x=Cs(),E=g.changeListeners;if(E){for(var D=0,I=(E=E.slice()).length;D<I;D++)E[D](m);ts(x)}}function b(){return!!Wt.spyListeners.length}function p(g){if(Wt.spyListeners.length)for(var m=Wt.spyListeners,x=0,E=m.length;x<E;x++)m[x](g)}function _(g){p(_f({},g,{spyReportStart:!0}))}var O={spyReportEnd:!0};function P(g){p(g?_f({},g,O):O)}function R(g){return Wt.spyListeners.push(g),Hr(function(){var m=Wt.spyListeners.indexOf(g);m!==-1&&Wt.spyListeners.splice(m,1)})}var T="__$$iterating";function A(g){hr(g[T]!==!0,"Illegal state: cannot recycle array as iterator"),Lu(g,T,!0);var m=-1;return Lu(g,"next",function(){return{done:++m>=this.length,value:m<this.length?this[m]:void 0}}),g}function M(g,m){Lu(g,typeof Symbol=="function"&&Symbol.iterator||"@@iterator",m)}var N,j,B=function(){var g=!1,m={};return Object.defineProperty(m,"0",{set:function(){g=!0}}),Object.create(m)[0]=1,g===!1}(),q=0,W=function(){};N=W,j=Array.prototype,Object.setPrototypeOf!==void 0?Object.setPrototypeOf(N.prototype,j):N.prototype.__proto__!==void 0?N.prototype.__proto__=j:N.prototype=j,Object.isFrozen(Array)&&["constructor","push","shift","concat","pop","unshift","replace","find","findIndex","splice","reverse","sort"].forEach(function(g){Object.defineProperty(W.prototype,g,{configurable:!0,writable:!0,value:Array.prototype[g]})});var J=function(){function g(m,x,E,D){this.array=E,this.owned=D,this.values=[],this.lastKnownLength=0,this.interceptors=null,this.changeListeners=null,this.atom=new u(m||"ObservableArray@"+Pn()),this.enhancer=function(I,F){return x(I,F,m+"[..]")}}return g.prototype.dehanceValue=function(m){return this.dehancer!==void 0?this.dehancer(m):m},g.prototype.dehanceValues=function(m){return this.dehancer!==void 0?m.map(this.dehancer):m},g.prototype.intercept=function(m){return h(this,m)},g.prototype.observe=function(m,x){return x===void 0&&(x=!1),x&&m({object:this.array,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),y(this,m)},g.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},g.prototype.setArrayLength=function(m){if(typeof m!="number"||m<0)throw new Error("[mobx.array] Out of range: "+m);var x=this.values.length;if(m!==x)if(m>x){for(var E=new Array(m-x),D=0;D<m-x;D++)E[D]=void 0;this.spliceWithArray(x,0,E)}else this.spliceWithArray(m,x-m)},g.prototype.updateArrayLength=function(m,x){if(m!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed. Did you use peek() to change it?");this.lastKnownLength+=x,x>0&&m+x+1>q&&he(m+x+1)},g.prototype.spliceWithArray=function(m,x,E){var D=this;Pr(this.atom);var I=this.values.length;if(m===void 0?m=0:m>I?m=I:m<0&&(m=Math.max(0,I+m)),x=arguments.length===1?I-m:x==null?0:Math.max(0,Math.min(x,I-m)),E===void 0&&(E=[]),f(this)){var F=d(this,{object:this.array,type:"splice",index:m,removedCount:x,added:E});if(!F)return da;x=F.removedCount,E=F.added}var V=(E=E.map(function($){return D.enhancer($,void 0)})).length-x;this.updateArrayLength(I,V);var z=this.spliceItemsIntoValues(m,x,E);return x===0&&E.length===0||this.notifyArraySplice(m,E,z),this.dehanceValues(z)},g.prototype.spliceItemsIntoValues=function(m,x,E){if(E.length<1e4)return(D=this.values).splice.apply(D,[m,x].concat(E));var D,I=this.values.slice(m,m+x);return this.values=this.values.slice(0,m).concat(E,this.values.slice(m+x)),I},g.prototype.notifyArrayChildUpdate=function(m,x,E){var D=!this.owned&&b(),I=v(this),F=I||D?{object:this.array,type:"update",index:m,newValue:x,oldValue:E}:null;D&&_(F),this.atom.reportChanged(),I&&w(this,F),D&&P()},g.prototype.notifyArraySplice=function(m,x,E){var D=!this.owned&&b(),I=v(this),F=I||D?{object:this.array,type:"splice",index:m,removed:E,added:x,removedCount:E.length,addedCount:x.length}:null;D&&_(F),this.atom.reportChanged(),I&&w(this,F),D&&P()},g}(),te=function(g){function m(x,E,D,I){D===void 0&&(D="ObservableArray@"+Pn()),I===void 0&&(I=!1);var F=g.call(this)||this,V=new J(D,E,F,I);return Lu(F,"$mobx",V),x&&x.length&&F.spliceWithArray(0,0,x),B&&Object.defineProperty(V.array,"0",re),F}return s(m,g),m.prototype.intercept=function(x){return this.$mobx.intercept(x)},m.prototype.observe=function(x,E){return E===void 0&&(E=!1),this.$mobx.observe(x,E)},m.prototype.clear=function(){return this.splice(0)},m.prototype.concat=function(){for(var x=[],E=0;E<arguments.length;E++)x[E]=arguments[E];return this.$mobx.atom.reportObserved(),Array.prototype.concat.apply(this.peek(),x.map(function(D){return me(D)?D.peek():D}))},m.prototype.replace=function(x){return this.$mobx.spliceWithArray(0,this.$mobx.values.length,x)},m.prototype.toJS=function(){return this.slice()},m.prototype.toJSON=function(){return this.toJS()},m.prototype.peek=function(){return this.$mobx.atom.reportObserved(),this.$mobx.dehanceValues(this.$mobx.values)},m.prototype.find=function(x,E,D){D===void 0&&(D=0);var I=this.findIndex.apply(this,arguments);return I===-1?void 0:this.get(I)},m.prototype.findIndex=function(x,E,D){D===void 0&&(D=0);for(var I=this.peek(),F=I.length,V=D;V<F;V++)if(x.call(E,I[V],V,this))return V;return-1},m.prototype.splice=function(x,E){for(var D=[],I=2;I<arguments.length;I++)D[I-2]=arguments[I];switch(arguments.length){case 0:return[];case 1:return this.$mobx.spliceWithArray(x);case 2:return this.$mobx.spliceWithArray(x,E)}return this.$mobx.spliceWithArray(x,E,D)},m.prototype.spliceWithArray=function(x,E,D){return this.$mobx.spliceWithArray(x,E,D)},m.prototype.push=function(){for(var x=[],E=0;E<arguments.length;E++)x[E]=arguments[E];var D=this.$mobx;return D.spliceWithArray(D.values.length,0,x),D.values.length},m.prototype.pop=function(){return this.splice(Math.max(this.$mobx.values.length-1,0),1)[0]},m.prototype.shift=function(){return this.splice(0,1)[0]},m.prototype.unshift=function(){for(var x=[],E=0;E<arguments.length;E++)x[E]=arguments[E];var D=this.$mobx;return D.spliceWithArray(0,0,x),D.values.length},m.prototype.reverse=function(){var x=this.slice();return x.reverse.apply(x,arguments)},m.prototype.sort=function(x){var E=this.slice();return E.sort.apply(E,arguments)},m.prototype.remove=function(x){var E=this.$mobx.dehanceValues(this.$mobx.values).indexOf(x);return E>-1&&(this.splice(E,1),!0)},m.prototype.move=function(x,E){function D(V){if(V<0)throw new Error("[mobx.array] Index out of bounds: "+V+" is negative");var z=this.$mobx.values.length;if(V>=z)throw new Error("[mobx.array] Index out of bounds: "+V+" is not smaller than "+z)}if(D.call(this,x),D.call(this,E),x!==E){var I,F=this.$mobx.values;I=x<E?F.slice(0,x).concat(F.slice(x+1,E+1),[F[x]],F.slice(E+1)):F.slice(0,E).concat([F[x]],F.slice(E,x),F.slice(x+1)),this.replace(I)}},m.prototype.get=function(x){var E=this.$mobx;if(E){if(x<E.values.length)return E.atom.reportObserved(),E.dehanceValue(E.values[x]);console.warn("[mobx.array] Attempt to read an array index ("+x+") that is out of bounds ("+E.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},m.prototype.set=function(x,E){var D=this.$mobx,I=D.values;if(x<I.length){Pr(D.atom);var F=I[x];if(f(D)){var V=d(D,{type:"update",object:this,index:x,newValue:E});if(!V)return;E=V.newValue}(E=D.enhancer(E,F))!==F&&(I[x]=E,D.notifyArrayChildUpdate(x,E,F))}else{if(x!==I.length)throw new Error("[mobx.array] Index out of bounds, "+x+" is larger than "+I.length);D.spliceWithArray(x,0,[E])}},m}(W);M(te.prototype,function(){return A(this.slice())}),Object.defineProperty(te.prototype,"length",{enumerable:!1,configurable:!0,get:function(){return this.$mobx.getArrayLength()},set:function(g){this.$mobx.setArrayLength(g)}}),["every","filter","forEach","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toString","toLocaleString"].forEach(function(g){var m=Array.prototype[g];hr(typeof m=="function","Base function not defined on Array prototype: '"+g+"'"),yo(te.prototype,g,function(){return m.apply(this.peek(),arguments)})}),function(g,m){for(var x=0;x<m.length;x++)yo(g,m[x],g[m[x]])}(te.prototype,["constructor","intercept","observe","clear","concat","get","replace","toJS","toJSON","peek","find","findIndex","splice","spliceWithArray","push","pop","set","shift","unshift","reverse","sort","remove","move","toString","toLocaleString"]);var re=ee(0);function ee(g){return{enumerable:!1,configurable:!1,get:function(){return this.get(g)},set:function(m){this.set(g,m)}}}function fe(g){Object.defineProperty(te.prototype,""+g,ee(g))}function he(g){for(var m=q;m<g;m++)fe(m);q=g}he(1e3);var se=Ja("ObservableArrayAdministration",J);function me(g){return bf(g)&&se(g.$mobx)}var De={},Le=function(g){function m(x,E,D,I){D===void 0&&(D="ObservableValue@"+Pn()),I===void 0&&(I=!0);var F=g.call(this,D)||this;return F.enhancer=E,F.hasUnreportedChange=!1,F.dehancer=void 0,F.value=E(x,void 0,D),I&&b()&&p({type:"create",object:F,newValue:F.value}),F}return s(m,g),m.prototype.dehanceValue=function(x){return this.dehancer!==void 0?this.dehancer(x):x},m.prototype.set=function(x){var E=this.value;if((x=this.prepareNewValue(x))!==De){var D=b();D&&_({type:"update",object:this,newValue:x,oldValue:E}),this.setNewValue(x),D&&P()}},m.prototype.prepareNewValue=function(x){if(Pr(this),f(this)){var E=d(this,{object:this,type:"update",newValue:x});if(!E)return De;x=E.newValue}return x=this.enhancer(x,this.value,this.name),this.value!==x?x:De},m.prototype.setNewValue=function(x){var E=this.value;this.value=x,this.reportChanged(),v(this)&&w(this,{type:"update",object:this,newValue:x,oldValue:E})},m.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},m.prototype.intercept=function(x){return h(this,x)},m.prototype.observe=function(x,E){return E&&x({object:this,type:"update",newValue:this.value,oldValue:void 0}),y(this,x)},m.prototype.toJSON=function(){return this.get()},m.prototype.toString=function(){return this.name+"["+this.value+"]"},m.prototype.valueOf=function(){return yc(this.get())},m}(u);Le.prototype[gc()]=Le.prototype.valueOf;var Ie=Ja("ObservableValue",Le),qe={m001:"It is not allowed to assign new values to @action fields",m002:"`runInAction` expects a function",m003:"`runInAction` expects a function without arguments",m004:"autorun expects a function",m005:"Warning: attempted to pass an action to autorun. Actions are untracked and will not trigger on state changes. Use `reaction` or wrap only your state modification code in an action.",m006:"Warning: attempted to pass an action to autorunAsync. Actions are untracked and will not trigger on state changes. Use `reaction` or wrap only your state modification code in an action.",m007:"reaction only accepts 2 or 3 arguments. If migrating from MobX 2, please provide an options object",m008:"wrapping reaction expression in `asReference` is no longer supported, use options object instead",m009:"@computed can only be used on getter functions, like: '@computed get myProps() { return ...; }'. It looks like it was used on a property.",m010:"@computed can only be used on getter functions, like: '@computed get myProps() { return ...; }'",m011:"First argument to `computed` should be an expression. If using computed as decorator, don't pass it arguments",m012:"computed takes one or two arguments if used as function",m013:"[mobx.expr] 'expr' should only be used inside other reactive functions.",m014:"extendObservable expected 2 or more arguments",m015:"extendObservable expects an object as first argument",m016:"extendObservable should not be used on maps, use map.merge instead",m017:"all arguments of extendObservable should be objects",m018:"extending an object with another observable (object) is not supported. Please construct an explicit propertymap, using `toJS` if need. See issue #540",m019:"[mobx.isObservable] isObservable(object, propertyName) is not supported for arrays and maps. Use map.has or array.length instead.",m020:"modifiers can only be used for individual object properties",m021:"observable expects zero or one arguments",m022:"@observable can not be used on getters, use @computed instead",m024:"whyRun() can only be used if a derivation is active, or by passing an computed value / reaction explicitly. If you invoked whyRun from inside a computation; the computation is currently suspended but re-evaluating because somebody requested its value.",m025:"whyRun can only be used on reactions and computed values",m026:"`action` can only be invoked on functions",m028:"It is not allowed to set `useStrict` when a derivation is running",m029:"INTERNAL ERROR only onBecomeUnobserved shouldn't be called twice in a row",m030a:"Since strict-mode is enabled, changing observed observable values outside actions is not allowed. Please wrap the code in an `action` if this change is intended. Tried to modify: ",m030b:"Side effects like changing state are not allowed at this point. Are you trying to modify state from, for example, the render function of a React component? Tried to modify: ",m031:"Computed values are not allowed to cause side effects by changing observables that are already being observed. Tried to modify: ",m032:`* This computation is suspended (not in use by any reaction) and won't run automatically.
	Didn't expect this computation to be suspended at this point?
	  1. Make sure this computation is used by a reaction (reaction, autorun, observer).
	  2. Check whether you are using this computation synchronously (in the same stack as they reaction that needs it).`,m033:"`observe` doesn't support the fire immediately property for observable maps.",m034:"`mobx.map` is deprecated, use `new ObservableMap` or `mobx.observable.map` instead",m035:"Cannot make the designated object observable; it is not extensible",m036:"It is not possible to get index atoms from arrays",m037:`Hi there! I'm sorry you have just run into an exception.
If your debugger ends up here, know that some reaction (like the render() of an observer component, autorun or reaction)
threw an exception and that mobx caught it, to avoid that it brings the rest of your application down.
The original cause of the exception (the code that caused this reaction to run (again)), is still in the stack.

However, more interesting is the actual stack trace of the error itself.
Hopefully the error is an instanceof Error, because in that case you can inspect the original stack of the error from where it was thrown.
See \`error.stack\` property, or press the very subtle "(...)" link you see near the console.error message that probably brought you here.
That stack is more interesting than the stack of this console.error itself.

If the exception you see is an exception you created yourself, make sure to use \`throw new Error("Oops")\` instead of \`throw "Oops"\`,
because the javascript environment will only preserve the original stack trace in the first form.

You can also make sure the debugger pauses the next time this very same exception is thrown by enabling "Pause on caught exception".
(Note that it might pause on many other, unrelated exception as well).

If that all doesn't help you out, feel free to open an issue https://github.com/mobxjs/mobx/issues!
`,m038:`Missing items in this list?
    1. Check whether all used values are properly marked as observable (use isObservable to verify)
    2. Make sure you didn't dereference values too early. MobX observes props, not primitives. E.g: use 'person.name' instead of 'name' in your computation.
`};function Ge(g){return qe[g]}function Me(g,m){hr(typeof m=="function",Ge("m026")),hr(typeof g=="string"&&g.length>0,"actions should have valid names, got: '"+g+"'");var x=function(){return Pe(g,m,this,arguments)};return x.originalFn=m,x.isMobxAction=!0,x}function Pe(g,m,x,E){var D=function(I,F,V,z){var $=b()&&!!I,Y=0;if($){Y=Date.now();var Z=z&&z.length||0,ie=new Array(Z);if(Z>0)for(var le=0;le<Z;le++)ie[le]=z[le];_({type:"action",name:I,fn:F,object:V,arguments:ie})}var ve=Cs();return Ts(),{prevDerivation:ve,prevAllowStateChanges:Oe(!0),notifySpy:$,startTime:Y}}(g,m,x,E);try{return m.apply(x,E)}finally{(function(I){Ae(I.prevAllowStateChanges),es(),ts(I.prevDerivation),I.notifySpy&&P({time:Date.now()-I.startTime})})(D)}}function de(g){hr(Wt.trackingDerivation===null,Ge("m028")),Wt.strictMode=g,Wt.allowStateChanges=!g}function Oe(g){var m=Wt.allowStateChanges;return Wt.allowStateChanges=g,m}function Ae(g){Wt.allowStateChanges=g}function Ve(g,m,x,E,D){function I(F,V,z,$,Y){if(Y===void 0&&(Y=0),hr(D||xt(arguments),"This function is a decorator, but it wasn't invoked like a decorator"),z){Mu(F,"__mobxLazyInitializers")||yo(F,"__mobxLazyInitializers",F.__mobxLazyInitializers&&F.__mobxLazyInitializers.slice()||[]);var Z=z.value,ie=z.initializer;return F.__mobxLazyInitializers.push(function(ve){g(ve,V,ie?ie.call(ve):Z,$,z)}),{enumerable:E,configurable:!0,get:function(){return this.__mobxDidRunLazyInitializers!==!0&&ht(this),m.call(this,V)},set:function(ve){this.__mobxDidRunLazyInitializers!==!0&&ht(this),x.call(this,V,ve)}}}var le={enumerable:E,configurable:!0,get:function(){return this.__mobxInitializedProps&&this.__mobxInitializedProps[V]===!0||tt(this,V,void 0,g,$,z),m.call(this,V)},set:function(ve){this.__mobxInitializedProps&&this.__mobxInitializedProps[V]===!0?x.call(this,V,ve):tt(this,V,ve,g,$,z)}};return(arguments.length<3||arguments.length===5&&Y<3)&&Object.defineProperty(F,V,le),le}return D?function(){if(xt(arguments))return I.apply(null,arguments);var F=arguments,V=arguments.length;return function(z,$,Y){return I(z,$,Y,F,V)}}:I}function tt(g,m,x,E,D,I){Mu(g,"__mobxInitializedProps")||yo(g,"__mobxInitializedProps",{}),g.__mobxInitializedProps[m]=!0,E(g,m,x,D,I)}function ht(g){g.__mobxDidRunLazyInitializers!==!0&&g.__mobxLazyInitializers&&(yo(g,"__mobxDidRunLazyInitializers",!0),g.__mobxDidRunLazyInitializers&&g.__mobxLazyInitializers.forEach(function(m){return m(g)}))}function xt(g){return(g.length===2||g.length===3)&&typeof g[1]=="string"}var ut=Ve(function(g,m,x,E,D){var I=E&&E.length===1?E[0]:x.name||m||"<unnamed action>";yo(g,m,X(I,x))},function(g){return this[g]},function(){hr(!1,Ge("m001"))},!1,!0),H=Ve(function(g,m,x){Te(g,m,x)},function(g){return this[g]},function(){hr(!1,Ge("m001"))},!1,!1),X=function(g,m,x,E){return arguments.length===1&&typeof g=="function"?Me(g.name||"<unnamed action>",g):arguments.length===2&&typeof m=="function"?Me(g,m):arguments.length===1&&typeof g=="string"?ne(g):ne(m).apply(null,arguments)};function ne(g){return function(m,x,E){if(E&&typeof E.value=="function")return E.value=Me(g,E.value),E.enumerable=!1,E.configurable=!0,E;if(E!==void 0&&E.get!==void 0)throw new Error("[mobx] action is not expected to be used with getters");return ut(g).apply(this,arguments)}}function Se(g){return typeof g=="function"&&g.isMobxAction===!0}function Te(g,m,x){var E=function(){return Pe(m,x,g,arguments)};E.isMobxAction=!0,yo(g,m,E)}X.bound=function(g,m,x){if(typeof g=="function"){var E=Me("<not yet bound action>",g);return E.autoBind=!0,E}return H.apply(null,arguments)};var Ne=Object.prototype.toString;function et(g,m){return wt(g,m)}function wt(g,m,x,E){if(g===m)return g!==0||1/g==1/m;if(g==null||m==null)return!1;if(g!=g)return m!=m;var D=typeof g;return(D==="function"||D==="object"||typeof m=="object")&&function(I,F,V,z){I=lt(I),F=lt(F);var $=Ne.call(I);if($!==Ne.call(F))return!1;switch($){case"[object RegExp]":case"[object String]":return""+I==""+F;case"[object Number]":return+I!=+I?+F!=+F:+I==0?1/+I==1/F:+I==+F;case"[object Date]":case"[object Boolean]":return+I==+F;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(I)===Symbol.valueOf.call(F)}var Y=$==="[object Array]";if(!Y){if(typeof I!="object"||typeof F!="object")return!1;var Z=I.constructor,ie=F.constructor;if(Z!==ie&&!(typeof Z=="function"&&Z instanceof Z&&typeof ie=="function"&&ie instanceof ie)&&"constructor"in I&&"constructor"in F)return!1}z=z||[];for(var le=(V=V||[]).length;le--;)if(V[le]===I)return z[le]===F;if(V.push(I),z.push(F),Y){if((le=I.length)!==F.length)return!1;for(;le--;)if(!wt(I[le],F[le],V,z))return!1}else{var ve,ue=Object.keys(I);if(le=ue.length,Object.keys(F).length!==le)return!1;for(;le--;)if(!pe(F,ve=ue[le])||!wt(I[ve],F[ve],V,z))return!1}return V.pop(),z.pop(),!0}(g,m,x,E)}function lt(g){return me(g)?g.peek():vi(g)?g.entries():tu(g)?function(m){for(var x=[];;){var E=m.next();if(E.done)break;x.push(E.value)}return x}(g.entries()):g}function pe(g,m){return Object.prototype.hasOwnProperty.call(g,m)}function Ue(g,m){return g===m}var nt={identity:Ue,structural:function(g,m){return et(g,m)},default:function(g,m){return function(x,E){return typeof x=="number"&&typeof E=="number"&&isNaN(x)&&isNaN(E)}(g,m)||Ue(g,m)}};function Je(g,m,x){var E,D,I;typeof g=="string"?(E=g,D=m,I=x):(E=g.name||"Autorun@"+Pn(),D=g,I=m),hr(typeof D=="function",Ge("m004")),hr(Se(D)===!1,Ge("m005")),I&&(D=D.bind(I));var F=new qn(E,function(){this.track(V)});function V(){D(F)}return F.schedule(),F.getDisposer()}function at(g,m,x){var E;arguments.length>3&&Kn(Ge("m007")),no(g)&&Kn(Ge("m008")),(E=typeof x=="object"?x:{}).name=E.name||g.name||m.name||"Reaction@"+Pn(),E.fireImmediately=x===!0||E.fireImmediately===!0,E.delay=E.delay||0,E.compareStructural=E.compareStructural||E.struct||!1,m=X(E.name,E.context?m.bind(E.context):m),E.context&&(g=g.bind(E.context));var D,I=!0,F=!1,V=E.equals?E.equals:E.compareStructural||E.struct?nt.structural:nt.default,z=new qn(E.name,function(){I||E.delay<1?$():F||(F=!0,setTimeout(function(){F=!1,$()},E.delay))});function $(){if(!z.isDisposed){var Y=!1;z.track(function(){var Z=g(z);Y=I||!V(D,Z),D=Z}),I&&E.fireImmediately&&m(D,z),I||Y!==!0||m(D,z),I&&(I=!1)}}return z.schedule(),z.getDisposer()}var kt=function(){function g(m,x,E,D,I){this.derivation=m,this.scope=x,this.equals=E,this.dependenciesState=Fr.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isPendingUnobservation=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=Fr.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+Pn(),this.value=new bl(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=Ho.NONE,this.name=D||"ComputedValue@"+Pn(),I&&(this.setter=Me(D+"-setter",I))}return g.prototype.onBecomeStale=function(){(function(m){if(m.lowestObserverState===Fr.UP_TO_DATE){m.lowestObserverState=Fr.POSSIBLY_STALE;for(var x=m.observers,E=x.length;E--;){var D=x[E];D.dependenciesState===Fr.UP_TO_DATE&&(D.dependenciesState=Fr.POSSIBLY_STALE,D.isTracing!==Ho.NONE&&wc(D,m),D.onBecomeStale())}}})(this)},g.prototype.onBecomeUnobserved=function(){ou(this),this.value=void 0},g.prototype.get=function(){hr(!this.isComputing,"Cycle detected in computation "+this.name,this.derivation),Wt.inBatch===0?(Ts(),_l(this)&&(this.isTracing!==Ho.NONE&&""+this.name,this.value=this.computeValue(!1)),es()):(ml(this),_l(this)&&this.trackAndCompute()&&function(x){if(x.lowestObserverState!==Fr.STALE){x.lowestObserverState=Fr.STALE;for(var E=x.observers,D=E.length;D--;){var I=E[D];I.dependenciesState===Fr.POSSIBLY_STALE?I.dependenciesState=Fr.STALE:I.dependenciesState===Fr.UP_TO_DATE&&(x.lowestObserverState=Fr.UP_TO_DATE)}}}(this));var m=this.value;if(iu(m))throw m.cause;return m},g.prototype.peek=function(){var m=this.computeValue(!1);if(iu(m))throw m.cause;return m},g.prototype.set=function(m){if(this.setter){hr(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,m)}finally{this.isRunningSetter=!1}}else hr(!1,"[ComputedValue '"+this.name+"'] It is not possible to assign a new value to a computed value.")},g.prototype.trackAndCompute=function(){b()&&p({object:this.scope,type:"compute",fn:this.derivation});var m=this.value,x=this.dependenciesState===Fr.NOT_TRACKING,E=this.value=this.computeValue(!0);return x||iu(m)||iu(E)||!this.equals(m,E)},g.prototype.computeValue=function(m){var x;if(this.isComputing=!0,Wt.computationDepth++,m)x=Oc(this,this.derivation,this.scope);else try{x=this.derivation.call(this.scope)}catch(E){x=new bl(E)}return Wt.computationDepth--,this.isComputing=!1,x},g.prototype.observe=function(m,x){var E=this,D=!0,I=void 0;return Je(function(){var F=E.get();if(!D||x){var V=Cs();m({type:"update",object:E,newValue:F,oldValue:I}),ts(V)}D=!1,I=F})},g.prototype.toJSON=function(){return this.get()},g.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},g.prototype.valueOf=function(){return yc(this.get())},g.prototype.whyRun=function(){var m=!!Wt.trackingDerivation,x=Ai(this.isComputing?this.newObserving:this.observing).map(function(D){return D.name}),E=Ai(Dh(this).map(function(D){return D.name}));return`
WhyRun? computation '`+this.name+`':
 * Running because: `+(m?"[active] the value of this computation is needed by a reaction":this.isComputing?"[get] The value of this computed was requested outside a reaction":"[idle] not running at the moment")+`
`+(this.dependenciesState===Fr.NOT_TRACKING?Ge("m032"):` * This computation will re-run if any of the following observables changes:
    `+Js(x)+`
    `+(this.isComputing&&m?" (... or any observable accessed during the remainder of the current run)":"")+`
    `+Ge("m038")+`

  * If the outcome of this computation changes, the following observers will be re-run:
    `+Js(E)+`
`)},g}();kt.prototype[gc()]=kt.prototype.valueOf;var dt=Ja("ComputedValue",kt),Dt=function(){function g(m,x){this.target=m,this.name=x,this.values={},this.changeListeners=null,this.interceptors=null}return g.prototype.observe=function(m,x){return hr(x!==!0,"`observe` doesn't support the fire immediately property for observable objects."),y(this,m)},g.prototype.intercept=function(m){return h(this,m)},g}();function Xt(g,m){if(vn(g)&&g.hasOwnProperty("$mobx"))return g.$mobx;hr(Object.isExtensible(g),Ge("m035")),eu(g)||(m=(g.constructor.name||"ObservableObject")+"@"+Pn()),m||(m="ObservableObject@"+Pn());var x=new Dt(g,m);return Lu(g,"$mobx",x),x}function fr(g,m,x,E){if(g.values[m]&&!dt(g.values[m]))return hr("value"in x,"The property "+m+" in "+g.name+" is already observable, cannot redefine it as computed property"),void(g.target[m]=x.value);if("value"in x)if(no(x.value)){var D=x.value;Vt(g,m,D.initialValue,D.enhancer)}else Se(x.value)&&x.value.autoBind===!0?Te(g.target,m,x.value.originalFn):dt(x.value)?function(I,F,V){var z=I.name+"."+F;V.name=z,V.scope||(V.scope=I.target),I.values[F]=V,Object.defineProperty(I.target,F,Wr(F))}(g,m,x.value):Vt(g,m,x.value,E);else lr(g,m,x.get,x.set,nt.default,!0)}function Vt(g,m,x,E){if(Bi(g.target,m),f(g)){var D=d(g,{object:g.target,name:m,type:"add",newValue:x});if(!D)return;x=D.newValue}x=(g.values[m]=new Le(x,E,g.name+"."+m,!1)).value,Object.defineProperty(g.target,m,function(I){return ir[I]||(ir[I]={configurable:!0,enumerable:!0,get:function(){return this.$mobx.values[I].get()},set:function(F){on(this,I,F)}})}(m)),function(I,F,V,z){var $=v(I),Y=b(),Z=$||Y?{type:"add",object:F,name:V,newValue:z}:null;Y&&_(Z),$&&w(I,Z),Y&&P()}(g,g.target,m,x)}function lr(g,m,x,E,D,I){I&&Bi(g.target,m),g.values[m]=new kt(x,g.target,D,g.name+"."+m,E),I&&Object.defineProperty(g.target,m,Wr(m))}var ir={},Jt={};function Wr(g){return Jt[g]||(Jt[g]={configurable:!0,enumerable:!1,get:function(){return this.$mobx.values[g].get()},set:function(m){return this.$mobx.values[g].set(m)}})}function on(g,m,x){var E=g.$mobx,D=E.values[m];if(f(E)){if(!(V=d(E,{type:"update",object:g,name:m,newValue:x})))return;x=V.newValue}if((x=D.prepareNewValue(x))!==De){var I=v(E),F=b(),V=I||F?{type:"update",object:g,oldValue:D.value,name:m,newValue:x}:null;F&&_(V),D.setNewValue(x),I&&w(E,V),F&&P()}}var Pi=Ja("ObservableObjectAdministration",Dt);function vn(g){return!!bf(g)&&(ht(g),Pi(g.$mobx))}function ln(g,m){if(g==null)return!1;if(m!==void 0){if(me(g)||vi(g))throw new Error(Ge("m019"));if(vn(g)){var x=g.$mobx;return x.values&&!!x.values[m]}return!1}return vn(g)||!!g.$mobx||c(g)||Zn(g)||dt(g)}function En(g){return hr(!!g,":("),Ve(function(m,x,E,D,I){Bi(m,x),hr(!I||!I.get,Ge("m022")),Vt(Xt(m,void 0),x,E,g)},function(m){var x=this.$mobx.values[m];if(x!==void 0)return x.get()},function(m,x){on(this,m,x)},!0,!1)}function Cn(g){for(var m=[],x=1;x<arguments.length;x++)m[x-1]=arguments[x];return Xn(g,To,m)}function Un(g){for(var m=[],x=1;x<arguments.length;x++)m[x-1]=arguments[x];return Xn(g,vo,m)}function Xn(g,m,x){hr(arguments.length>=2,Ge("m014")),hr(typeof g=="object",Ge("m015")),hr(!vi(g),Ge("m016")),x.forEach(function(z){hr(typeof z=="object",Ge("m017")),hr(!ln(z),Ge("m018"))});for(var E=Xt(g),D={},I=x.length-1;I>=0;I--){var F=x[I];for(var V in F)if(D[V]!==!0&&Mu(F,V)){if(D[V]=!0,g===F&&!pl(g,V))continue;fr(E,V,Object.getOwnPropertyDescriptor(F,V),m)}}return g}var to=En(To),Ei=En(Zs),ro=En(vo),Fi=En(La),ho=En(Qs),zn={box:function(g,m){return arguments.length>2&&an("box"),new Le(g,To,m)},shallowBox:function(g,m){return arguments.length>2&&an("shallowBox"),new Le(g,vo,m)},array:function(g,m){return arguments.length>2&&an("array"),new te(g,To,m)},shallowArray:function(g,m){return arguments.length>2&&an("shallowArray"),new te(g,vo,m)},map:function(g,m){return arguments.length>2&&an("map"),new Na(g,To,m)},shallowMap:function(g,m){return arguments.length>2&&an("shallowMap"),new Na(g,vo,m)},object:function(g,m){arguments.length>2&&an("object");var x={};return Xt(x,m),Cn(x,g),x},shallowObject:function(g,m){arguments.length>2&&an("shallowObject");var x={};return Xt(x,m),Un(x,g),x},ref:function(){return arguments.length<2?Oi(vo,arguments[0]):ro.apply(null,arguments)},shallow:function(){return arguments.length<2?Oi(Zs,arguments[0]):Ei.apply(null,arguments)},deep:function(){return arguments.length<2?Oi(To,arguments[0]):to.apply(null,arguments)},struct:function(){return arguments.length<2?Oi(La,arguments[0]):Fi.apply(null,arguments)}},yr=function(g){if(g===void 0&&(g=void 0),typeof arguments[1]=="string")return to.apply(null,arguments);if(hr(arguments.length<=1,Ge("m021")),hr(!no(g),Ge("m020")),ln(g))return g;var m=To(g,0,void 0);return m!==g?m:yr.box(g)};function an(g){Kn("Expected one or two arguments to observable."+g+". Did you accidentally try to use observable."+g+" as decorator?")}function no(g){return typeof g=="object"&&g!==null&&g.isMobxModifierDescriptor===!0}function Oi(g,m){return hr(!no(m),"Modifiers cannot be nested"),{isMobxModifierDescriptor:!0,initialValue:m,enhancer:g}}function To(g,m,x){return no(g)&&Kn("You tried to assign a modifier wrapped value to a collection, please define modifiers when creating the collection, not when modifying it"),ln(g)?g:Array.isArray(g)?yr.array(g,x):eu(g)?yr.object(g,x):tu(g)?yr.map(g,x):g}function Zs(g,m,x){return no(g)&&Kn("You tried to assign a modifier wrapped value to a collection, please define modifiers when creating the collection, not when modifying it"),g==null||vn(g)||me(g)||vi(g)?g:Array.isArray(g)?yr.shallowArray(g,x):eu(g)?yr.shallowObject(g,x):tu(g)?yr.shallowMap(g,x):Kn("The shallow modifier / decorator can only used in combination with arrays, objects and maps")}function vo(g){return g}function La(g,m,x){if(et(g,m))return m;if(ln(g))return g;if(Array.isArray(g))return new te(g,La,x);if(tu(g))return new Na(g,La,x);if(eu(g)){var E={};return Xt(E,x),Xn(E,La,[g]),E}return g}function Qs(g,m,x){return et(g,m)?m:g}function ha(g,m){m===void 0&&(m=void 0),Ts();try{return g.apply(m)}finally{es()}}Object.keys(zn).forEach(function(g){return yr[g]=zn[g]}),yr.deep.struct=yr.struct,yr.ref.struct=function(){return arguments.length<2?Oi(Qs,arguments[0]):ho.apply(null,arguments)};var vl={},Na=function(){function g(m,x,E){x===void 0&&(x=To),E===void 0&&(E="ObservableMap@"+Pn()),this.enhancer=x,this.name=E,this.$mobx=vl,this._data=Object.create(null),this._hasMap=Object.create(null),this._keys=new te(void 0,vo,this.name+".keys()",!0),this.interceptors=null,this.changeListeners=null,this.dehancer=void 0,this.merge(m)}return g.prototype._has=function(m){return this._data[m]!==void 0},g.prototype.has=function(m){return!!this.isValidKey(m)&&(m=""+m,this._hasMap[m]?this._hasMap[m].get():this._updateHasMapEntry(m,!1).get())},g.prototype.set=function(m,x){this.assertValidKey(m),m=""+m;var E=this._has(m);if(f(this)){var D=d(this,{type:E?"update":"add",object:this,newValue:x,name:m});if(!D)return this;x=D.newValue}return E?this._updateValue(m,x):this._addValue(m,x),this},g.prototype.delete=function(m){var x=this;if(this.assertValidKey(m),m=""+m,f(this)&&!(I=d(this,{type:"delete",object:this,name:m})))return!1;if(this._has(m)){var E=b(),D=v(this),I=D||E?{type:"delete",object:this,oldValue:this._data[m].value,name:m}:null;return E&&_(I),ha(function(){x._keys.remove(m),x._updateHasMapEntry(m,!1),x._data[m].setNewValue(void 0),x._data[m]=void 0}),D&&w(this,I),E&&P(),!0}return!1},g.prototype._updateHasMapEntry=function(m,x){var E=this._hasMap[m];return E?E.setNewValue(x):E=this._hasMap[m]=new Le(x,vo,this.name+"."+m+"?",!1),E},g.prototype._updateValue=function(m,x){var E=this._data[m];if((x=E.prepareNewValue(x))!==De){var D=b(),I=v(this),F=I||D?{type:"update",object:this,oldValue:E.value,name:m,newValue:x}:null;D&&_(F),E.setNewValue(x),I&&w(this,F),D&&P()}},g.prototype._addValue=function(m,x){var E=this;ha(function(){var V=E._data[m]=new Le(x,E.enhancer,E.name+"."+m,!1);x=V.value,E._updateHasMapEntry(m,!0),E._keys.push(m)});var D=b(),I=v(this),F=I||D?{type:"add",object:this,name:m,newValue:x}:null;D&&_(F),I&&w(this,F),D&&P()},g.prototype.get=function(m){return m=""+m,this.has(m)?this.dehanceValue(this._data[m].get()):this.dehanceValue(void 0)},g.prototype.dehanceValue=function(m){return this.dehancer!==void 0?this.dehancer(m):m},g.prototype.keys=function(){return A(this._keys.slice())},g.prototype.values=function(){return A(this._keys.map(this.get,this))},g.prototype.entries=function(){var m=this;return A(this._keys.map(function(x){return[x,m.get(x)]}))},g.prototype.forEach=function(m,x){var E=this;this.keys().forEach(function(D){return m.call(x,E.get(D),D,E)})},g.prototype.merge=function(m){var x=this;return vi(m)&&(m=m.toJS()),ha(function(){eu(m)?Object.keys(m).forEach(function(E){return x.set(E,m[E])}):Array.isArray(m)?m.forEach(function(E){var D=E[0],I=E[1];return x.set(D,I)}):tu(m)?m.forEach(function(E,D){return x.set(D,E)}):m!=null&&Kn("Cannot initialize map from "+m)}),this},g.prototype.clear=function(){var m=this;ha(function(){Ef(function(){m.keys().forEach(m.delete,m)})})},g.prototype.replace=function(m){var x=this;return ha(function(){var E,D=eu(E=m)?Object.keys(E):Array.isArray(E)?E.map(function(I){return I[0]}):tu(E)?Array.from(E.keys()):vi(E)?E.keys():Kn("Cannot get keys from "+E);x.keys().filter(function(I){return D.indexOf(I)===-1}).forEach(function(I){return x.delete(I)}),x.merge(m)}),this},Object.defineProperty(g.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),g.prototype.toJS=function(){var m=this,x={};return this.keys().forEach(function(E){return x[E]=m.get(E)}),x},g.prototype.toJSON=function(){return this.toJS()},g.prototype.isValidKey=function(m){return m!=null&&(typeof m=="string"||typeof m=="number"||typeof m=="boolean")},g.prototype.assertValidKey=function(m){if(!this.isValidKey(m))throw new Error("[mobx.map] Invalid key: '"+m+"', only strings, numbers and booleans are accepted as key in observable maps.")},g.prototype.toString=function(){var m=this;return this.name+"[{ "+this.keys().map(function(x){return x+": "+m.get(x)}).join(", ")+" }]"},g.prototype.observe=function(m,x){return hr(x!==!0,Ge("m033")),y(this,m)},g.prototype.intercept=function(m){return h(this,m)},g}();M(Na.prototype,function(){return this.entries()});var vi=Ja("ObservableMap",Na),da=[];function po(){return typeof window<"u"?window:Li.g}function Pn(){return++Wt.mobxGuid}function Kn(g,m){throw hr(!1,g,m),"X"}function hr(g,m,x){if(!g)throw new Error("[mobx] Invariant failed: "+m+(x?" in '"+x+"'":""))}Object.freeze(da);var Yi=[];function go(g){return Yi.indexOf(g)===-1&&(Yi.push(g),console.error("[mobx] Deprecated: "+g),!0)}function Hr(g){var m=!1;return function(){if(!m)return m=!0,g.apply(this,arguments)}}var jr=function(){};function Ai(g){var m=[];return g.forEach(function(x){m.indexOf(x)===-1&&m.push(x)}),m}function Js(g,m,x){return m===void 0&&(m=100),x===void 0&&(x=" - "),g?g.slice(0,m).join(x)+(g.length>m?" (... and "+(g.length-m)+"more)":""):""}function bf(g){return g!==null&&typeof g=="object"}function eu(g){if(g===null||typeof g!="object")return!1;var m=Object.getPrototypeOf(g);return m===Object.prototype||m===null}function _f(){for(var g=arguments[0],m=1,x=arguments.length;m<x;m++){var E=arguments[m];for(var D in E)Mu(E,D)&&(g[D]=E[D])}return g}var Ri=Object.prototype.hasOwnProperty;function Mu(g,m){return Ri.call(g,m)}function yo(g,m,x){Object.defineProperty(g,m,{enumerable:!1,writable:!0,configurable:!0,value:x})}function Lu(g,m,x){Object.defineProperty(g,m,{enumerable:!1,writable:!1,configurable:!0,value:x})}function pl(g,m){var x=Object.getOwnPropertyDescriptor(g,m);return!x||x.configurable!==!1&&x.writable!==!1}function Bi(g,m){hr(pl(g,m),"Cannot make property '"+m+"' observable, it is not configurable and writable in the target object")}function Ja(g,m){var x="isMobX"+g;return m.prototype[x]=!0,function(E){return bf(E)&&E[x]===!0}}function tu(g){return po().Map!==void 0&&g instanceof po().Map}function gc(){return typeof Symbol=="function"&&Symbol.toPrimitive||"@@toPrimitive"}function yc(g){return g===null?null:typeof g=="object"?""+g:g}var Fr,Ho,mo=["mobxGuid","resetId","spyListeners","strictMode","runId"],mc=function(){this.version=5,this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.strictMode=!1,this.resetId=0,this.spyListeners=[],this.globalReactionErrorHandlers=[]},Wt=new mc,ru=!1,bc=!1,ja=!1,Nu=po();function Co(g,m){if(typeof g=="object"&&g!==null){if(me(g))return hr(m===void 0,Ge("m036")),g.$mobx.atom;if(vi(g)){var x=g;return m===void 0?Co(x._keys):(hr(!!(E=x._data[m]||x._hasMap[m]),"the entry '"+m+"' does not exist in the observable map '"+va(g)+"'"),E)}var E;if(ht(g),m&&!g.$mobx&&g[m],vn(g))return m?(hr(!!(E=g.$mobx.values[m]),"no observable property '"+m+"' found on the observable object '"+va(g)+"'"),E):Kn("please specify a property");if(c(g)||dt(g)||Zn(g))return g}else if(typeof g=="function"&&Zn(g.$mobx))return g.$mobx;return Kn("Cannot obtain atom from "+g)}function $r(g,m){return hr(g,"Expecting some object"),m!==void 0?$r(Co(g,m)):c(g)||dt(g)||Zn(g)||vi(g)?g:(ht(g),g.$mobx?g.$mobx:void hr(!1,"Cannot obtain administration from "+g))}function va(g,m){return(m!==void 0?Co(g,m):vn(g)||vi(g)?$r(g):Co(g)).name}function gl(g,m){return kh(Co(g,m))}function kh(g){var m={name:g.name};return g.observing&&g.observing.length>0&&(m.dependencies=Ai(g.observing).map(kh)),m}function _c(g){var m={name:g.name};return function(x){return x.observers&&x.observers.length>0}(g)&&(m.observers=Dh(g).map(_c)),m}function Dh(g){return g.observers}function wf(g,m){var x=g.observers.length;x&&(g.observersIndexes[m.__mapid]=x),g.observers[x]=m,g.lowestObserverState>m.dependenciesState&&(g.lowestObserverState=m.dependenciesState)}function yl(g,m){if(g.observers.length===1)g.observers.length=0,nu(g);else{var x=g.observers,E=g.observersIndexes,D=x.pop();if(D!==m){var I=E[m.__mapid]||0;I?E[D.__mapid]=I:delete E[D.__mapid],x[I]=D}delete E[m.__mapid]}}function nu(g){g.isPendingUnobservation||(g.isPendingUnobservation=!0,Wt.pendingUnobservations.push(g))}function Ts(){Wt.inBatch++}function es(){if(--Wt.inBatch==0){Sc();for(var g=Wt.pendingUnobservations,m=0;m<g.length;m++){var x=g[m];x.isPendingUnobservation=!1,x.observers.length===0&&x.onBecomeUnobserved()}Wt.pendingUnobservations=[]}}function ml(g){var m=Wt.trackingDerivation;m!==null?m.runId!==g.lastAccessedBy&&(g.lastAccessedBy=m.runId,m.newObserving[m.unboundDepsCount++]=g):g.observers.length===0&&nu(g)}function wc(g,m){if(""+g.name+m.name,g.isTracing===Ho.BREAK){var x=[];Ec(gl(g),x,1),new Function(`debugger;
/*
Tracing '`+g.name+`'

You are entering this break point because derivation '`+g.name+"' is being traced and '"+m.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(g instanceof kt?g.derivation.toString():"")+`

The dependencies for this derivation are:

`+x.join(`
`)+`
*/
    `)()}}function Ec(g,m,x){m.length>=1e3?m.push("(and many more)"):(m.push(""+new Array(x).join("	")+g.name),g.dependencies&&g.dependencies.forEach(function(E){return Ec(E,m,x+1)}))}Nu.__mobxInstanceCount?(Nu.__mobxInstanceCount++,setTimeout(function(){ru||bc||ja||(ja=!0,console.warn("[mobx] Warning: there are multiple mobx instances active. This might lead to unexpected results. See https://github.com/mobxjs/mobx/issues/1082 for details."))},1)):Nu.__mobxInstanceCount=1,function(g){g[g.NOT_TRACKING=-1]="NOT_TRACKING",g[g.UP_TO_DATE=0]="UP_TO_DATE",g[g.POSSIBLY_STALE=1]="POSSIBLY_STALE",g[g.STALE=2]="STALE"}(Fr||(Fr={})),function(g){g[g.NONE=0]="NONE",g[g.LOG=1]="LOG",g[g.BREAK=2]="BREAK"}(Ho||(Ho={}));var bl=function(g){this.cause=g};function iu(g){return g instanceof bl}function _l(g){switch(g.dependenciesState){case Fr.UP_TO_DATE:return!1;case Fr.NOT_TRACKING:case Fr.STALE:return!0;case Fr.POSSIBLY_STALE:for(var m=Cs(),x=g.observing,E=x.length,D=0;D<E;D++){var I=x[D];if(dt(I)){try{I.get()}catch{return ts(m),!0}if(g.dependenciesState===Fr.STALE)return ts(m),!0}}return Mh(g),ts(m),!1}}function pn(){return Wt.trackingDerivation!==null}function Pr(g){var m=g.observers.length>0;Wt.computationDepth>0&&m&&Kn(Ge("m031")+g.name),!Wt.allowStateChanges&&m&&Kn(Ge(Wt.strictMode?"m030a":"m030b")+g.name)}function Oc(g,m,x){Mh(g),g.newObserving=new Array(g.observing.length+100),g.unboundDepsCount=0,g.runId=++Wt.runId;var E,D=Wt.trackingDerivation;Wt.trackingDerivation=g;try{E=m.call(x)}catch(I){E=new bl(I)}return Wt.trackingDerivation=D,function(I){for(var F=I.observing,V=I.observing=I.newObserving,z=Fr.UP_TO_DATE,$=0,Y=I.unboundDepsCount,Z=0;Z<Y;Z++)(ie=V[Z]).diffValue===0&&(ie.diffValue=1,$!==Z&&(V[$]=ie),$++),ie.dependenciesState>z&&(z=ie.dependenciesState);for(V.length=$,I.newObserving=null,Y=F.length;Y--;)(ie=F[Y]).diffValue===0&&yl(ie,I),ie.diffValue=0;for(;$--;){var ie;(ie=V[$]).diffValue===1&&(ie.diffValue=0,wf(ie,I))}z!==Fr.UP_TO_DATE&&(I.dependenciesState=z,I.onBecomeStale())}(g),E}function ou(g){var m=g.observing;g.observing=[];for(var x=m.length;x--;)yl(m[x],g);g.dependenciesState=Fr.NOT_TRACKING}function Ef(g){var m=Cs(),x=g();return ts(m),x}function Cs(){var g=Wt.trackingDerivation;return Wt.trackingDerivation=null,g}function ts(g){Wt.trackingDerivation=g}function Mh(g){if(g.dependenciesState!==Fr.UP_TO_DATE){g.dependenciesState=Fr.UP_TO_DATE;for(var m=g.observing,x=m.length;x--;)m[x].lowestObserverState=Fr.UP_TO_DATE}}function Zd(g){return g}function au(g){switch(g.length){case 0:return Wt.trackingDerivation;case 1:return Co(g[0]);case 2:return Co(g[0],g[1])}}var qn=function(){function g(m,x){m===void 0&&(m="Reaction@"+Pn()),this.name=m,this.onInvalidate=x,this.observing=[],this.newObserving=[],this.dependenciesState=Fr.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+Pn(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=Ho.NONE}return g.prototype.onBecomeStale=function(){this.schedule()},g.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Wt.pendingReactions.push(this),Sc())},g.prototype.isScheduled=function(){return this._isScheduled},g.prototype.runReaction=function(){this.isDisposed||(Ts(),this._isScheduled=!1,_l(this)&&(this._isTrackPending=!0,this.onInvalidate(),this._isTrackPending&&b()&&p({object:this,type:"scheduled-reaction"})),es())},g.prototype.track=function(m){Ts();var x,E=b();E&&(x=Date.now(),_({object:this,type:"reaction",fn:m})),this._isRunning=!0;var D=Oc(this,m,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&ou(this),iu(D)&&this.reportExceptionInDerivation(D.cause),E&&P({time:Date.now()-x}),es()},g.prototype.reportExceptionInDerivation=function(m){var x=this;if(this.errorHandler)this.errorHandler(m,this);else{var E="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this,D=Ge("m037");console.error(E||D,m),b()&&p({type:"error",message:E,error:m,object:this}),Wt.globalReactionErrorHandlers.forEach(function(I){return I(m,x)})}},g.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(Ts(),ou(this),es()))},g.prototype.getDisposer=function(){var m=this.dispose.bind(this);return m.$mobx=this,m.onError=xc,m},g.prototype.toString=function(){return"Reaction["+this.name+"]"},g.prototype.whyRun=function(){var m=Ai(this._isRunning?this.newObserving:this.observing).map(function(x){return x.name});return`
WhyRun? reaction '`+this.name+`':
 * Status: [`+(this.isDisposed?"stopped":this._isRunning?"running":this.isScheduled()?"scheduled":"idle")+`]
 * This reaction will re-run if any of the following observables changes:
    `+Js(m)+`
    `+(this._isRunning?" (... or any observable accessed during the remainder of the current run)":"")+`
	`+Ge("m038")+`
`},g.prototype.trace=function(m){m===void 0&&(m=!1),function(){for(var x=[],E=0;E<arguments.length;E++)x[E]=arguments[E];var D=!1;typeof x[x.length-1]=="boolean"&&(D=x.pop());var I=au(x);if(!I)return Kn("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");I.isTracing===Ho.NONE&&""+I.name,I.isTracing=D?Ho.BREAK:Ho.LOG}(this,m)},g}();function xc(g){hr(this&&this.$mobx&&Zn(this.$mobx),"Invalid `this`"),hr(!this.$mobx.errorHandler,"Only one onErrorHandler can be registered"),this.$mobx.errorHandler=g}var io=100,su=function(g){return g()};function Sc(){Wt.inBatch>0||Wt.isRunningReactions||su(Ui)}function Ui(){Wt.isRunningReactions=!0;for(var g=Wt.pendingReactions,m=0;g.length>0;){++m===io&&(console.error("Reaction doesn't converge to a stable state after "+io+" iterations. Probably there is a cycle in the reactive function: "+g[0]),g.splice(0));for(var x=g.splice(0),E=0,D=x.length;E<D;E++)x[E].runReaction()}Wt.isRunningReactions=!1}var Zn=Ja("Reaction",qn);function Fa(g){return Ve(function(m,x,E,D,I){hr(I!==void 0,Ge("m009")),hr(typeof I.get=="function",Ge("m010")),lr(Xt(m,""),x,I.get,I.set,g,!1)},function(m){var x=this.$mobx.values[m];if(x!==void 0)return x.get()},function(m,x){this.$mobx.values[m].set(x)},!1,!1)}var Ba=Fa(nt.default),pa=Fa(nt.structural),ft=function(g,m,x){if(typeof m=="string")return Ba.apply(null,arguments);hr(typeof g=="function",Ge("m011")),hr(arguments.length<3,Ge("m012"));var E=typeof m=="object"?m:{};E.setter=typeof m=="function"?m:E.setter;var D=E.equals?E.equals:E.compareStructural||E.struct?nt.structural:nt.default;return new kt(g,E.context,D,E.name||g.name||"",E.setter)};function gt(g,m,x){function E(Y){return m&&x.push([g,Y]),Y}if(m===void 0&&(m=!0),x===void 0&&(x=[]),ln(g)){if(m&&x===null&&(x=[]),m&&g!==null&&typeof g=="object"){for(var D=0,I=x.length;D<I;D++)if(x[D][0]===g)return x[D][1]}if(me(g)){var F=E([]),V=g.map(function(Y){return gt(Y,m,x)});for(F.length=V.length,D=0,I=V.length;D<I;D++)F[D]=V[D];return F}if(vn(g)){for(var z in F=E({}),g)F[z]=gt(g[z],m,x);return F}if(vi(g)){var $=E({});return g.forEach(function(Y,Z){return $[Z]=gt(Y,m,x)}),$}if(Ie(g))return gt(g.get(),m,x)}return g}ft.struct=pa,ft.equals=Fa;var yt={allowStateChanges:function(g,m){var x,E=Oe(g);try{x=m()}finally{Ae(E)}return x},deepEqual:et,getAtom:Co,getDebugName:va,getDependencyTree:gl,getAdministration:$r,getGlobalState:function(){return Wt},getObserverTree:function(g,m){return _c(Co(g,m))},interceptReads:function(g,m,x){var E;if(vi(g)||me(g)||Ie(g))E=$r(g);else{if(!vn(g))return Kn("Expected observable map, object or array as first array");if(typeof m!="string")return Kn("InterceptReads can only be used with a specific property, not with an object in general");E=$r(g,m)}return E.dehancer!==void 0?Kn("An intercept reader was already established"):(E.dehancer=typeof m=="function"?m:x,function(){E.dehancer=void 0})},isComputingDerivation:pn,isSpyEnabled:b,onReactionError:function(g){return Wt.globalReactionErrorHandlers.push(g),function(){var m=Wt.globalReactionErrorHandlers.indexOf(g);m>=0&&Wt.globalReactionErrorHandlers.splice(m,1)}},reserveArrayBuffer:he,resetGlobalState:function(){Wt.resetId++;var g=new mc;for(var m in g)mo.indexOf(m)===-1&&(Wt[m]=g[m]);Wt.allowStateChanges=!Wt.strictMode},isolateGlobalState:function(){bc=!0,po().__mobxInstanceCount--},shareGlobalState:function(){go("Using `shareGlobalState` is not recommended, use peer dependencies instead. See https://github.com/mobxjs/mobx/issues/1082 for details."),ru=!0;var g=po(),m=Wt;if(g.__mobservableTrackingStack||g.__mobservableViewStack)throw new Error("[mobx] An incompatible version of mobservable is already loaded.");if(g.__mobxGlobal&&g.__mobxGlobal.version!==m.version)throw new Error("[mobx] An incompatible version of mobx is already loaded.");g.__mobxGlobal?Wt=g.__mobxGlobal:g.__mobxGlobal=m},spyReport:p,spyReportEnd:P,spyReportStart:_,setReactionScheduler:function(g){var m=su;su=function(x){return g(function(){return m(x)})}}},Gt={Reaction:qn,untracked:Ef,Atom:l,BaseAtom:u,useStrict:de,isStrictModeEnabled:function(){return Wt.strictMode},spy:R,comparer:nt,asReference:function(g){return go("asReference is deprecated, use observable.ref instead"),yr.ref(g)},asFlat:function(g){return go("asFlat is deprecated, use observable.shallow instead"),yr.shallow(g)},asStructure:function(g){return go("asStructure is deprecated. Use observable.struct, computed.struct or reaction options instead."),yr.struct(g)},asMap:function(g){return go("asMap is deprecated, use observable.map or observable.shallowMap instead"),yr.map(g||{})},isModifierDescriptor:no,isObservableObject:vn,isBoxedObservable:Ie,isObservableArray:me,ObservableMap:Na,isObservableMap:vi,map:function(g){return go("`mobx.map` is deprecated, use `new ObservableMap` or `mobx.observable.map` instead"),yr.map(g)},transaction:ha,observable:yr,computed:ft,isObservable:ln,isComputed:function(g,m){if(g==null)return!1;if(m!==void 0){if(vn(g)===!1||!g.$mobx.values[m])return!1;var x=Co(g,m);return dt(x)}return dt(g)},extendObservable:Cn,extendShallowObservable:Un,observe:function(g,m,x,E){return typeof x=="function"?function(D,I,F,V){return $r(D,I).observe(F,V)}(g,m,x,E):function(D,I,F){return $r(D).observe(I,F)}(g,m,x)},intercept:function(g,m,x){return typeof x=="function"?function(E,D,I){return $r(E,D).intercept(I)}(g,m,x):function(E,D){return $r(E).intercept(D)}(g,m)},autorun:Je,autorunAsync:function(g,m,x,E){var D,I,F,V;typeof g=="string"?(D=g,I=m,F=x,V=E):(D=g.name||"AutorunAsync@"+Pn(),I=g,F=m,V=x),hr(Se(I)===!1,Ge("m006")),F===void 0&&(F=1),V&&(I=I.bind(V));var z=!1,$=new qn(D,function(){z||(z=!0,setTimeout(function(){z=!1,$.isDisposed||$.track(Y)},F))});function Y(){I($)}return $.schedule(),$.getDisposer()},when:function(g,m,x,E){var D,I,F,V;return typeof g=="string"?(D=g,I=m,F=x,V=E):(D="When@"+Pn(),I=g,F=m,V=x),Je(D,function(z){if(I.call(V)){z.dispose();var $=Cs();F.call(V),ts($)}})},reaction:at,action:X,isAction:Se,runInAction:function(g,m,x){var E=typeof g=="string"?g:g.name||"<unnamed action>",D=typeof g=="function"?g:m,I=typeof g=="function"?m:x;return hr(typeof D=="function",Ge("m002")),hr(D.length===0,Ge("m003")),hr(typeof E=="string"&&E.length>0,"actions should have valid names, got: '"+E+"'"),Pe(E,D,I,void 0)},expr:function(g,m){return pn()||console.warn(Ge("m013")),ft(g,{context:m}).get()},toJS:gt,createTransformer:function(g,m){hr(typeof g=="function"&&g.length<2,"createTransformer expects a function that accepts one argument");var x={},E=Wt.resetId,D=function(I){function F(V,z){var $=I.call(this,function(){return g(z)},void 0,nt.default,"Transformer-"+g.name+"-"+V,void 0)||this;return $.sourceIdentifier=V,$.sourceObject=z,$}return s(F,I),F.prototype.onBecomeUnobserved=function(){var V=this.value;I.prototype.onBecomeUnobserved.call(this),delete x[this.sourceIdentifier],m&&m(V,this.sourceObject)},F}(kt);return function(I){E!==Wt.resetId&&(x={},E=Wt.resetId);var F=function(z){if(typeof z=="string"||typeof z=="number")return z;if(z===null||typeof z!="object")throw new Error("[mobx] transform expected some kind of object or primitive value, got: "+z);var $=z.$transformId;return $===void 0&&yo(z,"$transformId",$=Pn()),$}(I),V=x[F];return V?V.get():(V=x[F]=new D(F,I)).get()}},whyRun:function(g,m){return go("`whyRun` is deprecated in favor of `trace`"),(g=au(arguments))?dt(g)||Zn(g)?g.whyRun():Kn(Ge("m025")):Ge("m024")},isArrayLike:function(g){return Array.isArray(g)||me(g)},extras:yt},er=!1,Zr=function(g){var m=Gt[g];Object.defineProperty(Gt,g,{get:function(){return er||(er=!0,console.warn("Using default export (`import mobx from 'mobx'`) is deprecated and wont work in mobx@4.0.0\nUse `import * as mobx from 'mobx'` instead")),m}})};for(var Ii in Gt)Zr(Ii);typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:R,extras:yt});var oo=Li(1803),gn=Li.n(oo),Of={value:()=>{}};function Gn(){for(var g,m=0,x=arguments.length,E={};m<x;++m){if(!(g=arguments[m]+"")||g in E||/[\s.]/.test(g))throw new Error("illegal type: "+g);E[g]=[]}return new pi(E)}function pi(g){this._=g}function Tc(g,m){for(var x,E=0,D=g.length;E<D;++E)if((x=g[E]).name===m)return x.value}function Ep(g,m,x){for(var E=0,D=g.length;E<D;++E)if(g[E].name===m){g[E]=Of,g=g.slice(0,E).concat(g.slice(E+1));break}return x!=null&&g.push({name:m,value:x}),g}pi.prototype=Gn.prototype={constructor:pi,on:function(g,m){var x,E,D=this._,I=(E=D,(g+"").trim().split(/^|\s+/).map(function(z){var $="",Y=z.indexOf(".");if(Y>=0&&($=z.slice(Y+1),z=z.slice(0,Y)),z&&!E.hasOwnProperty(z))throw new Error("unknown type: "+z);return{type:z,name:$}})),F=-1,V=I.length;if(!(arguments.length<2)){if(m!=null&&typeof m!="function")throw new Error("invalid callback: "+m);for(;++F<V;)if(x=(g=I[F]).type)D[x]=Ep(D[x],g.name,m);else if(m==null)for(x in D)D[x]=Ep(D[x],g.name,null);return this}for(;++F<V;)if((x=(g=I[F]).type)&&(x=Tc(D[x],g.name)))return x},copy:function(){var g={},m=this._;for(var x in m)g[x]=m[x].slice();return new pi(g)},call:function(g,m){if((x=arguments.length-2)>0)for(var x,E,D=new Array(x),I=0;I<x;++I)D[I]=arguments[I+2];if(!this._.hasOwnProperty(g))throw new Error("unknown type: "+g);for(I=0,x=(E=this._[g]).length;I<x;++I)E[I].value.apply(m,D)},apply:function(g,m,x){if(!this._.hasOwnProperty(g))throw new Error("unknown type: "+g);for(var E=this._[g],D=0,I=E.length;D<I;++D)E[D].value.apply(m,x)}};const ju=Gn;var wl,Fu,Qr=0,Cc=0,uu=0,Ps=1e3,Lh=0,Bu=0,xf=0,As=typeof performance=="object"&&performance.now?performance:Date,rs=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(g){setTimeout(g,17)};function Pc(){return Bu||(rs(Op),Bu=As.now()+xf)}function Op(){Bu=0}function Uu(){this._call=this._time=this._next=null}function Sf(g,m,x){var E=new Uu;return E.restart(g,m,x),E}function Qd(){Bu=(Lh=As.now())+xf,Qr=Cc=0;try{(function(){Pc(),++Qr;for(var g,m=wl;m;)(g=Bu-m._time)>=0&&m._call.call(void 0,g),m=m._next;--Qr})()}finally{Qr=0,function(){for(var g,m,x=wl,E=1/0;x;)x._call?(E>x._time&&(E=x._time),g=x,x=x._next):(m=x._next,x._next=null,x=g?g._next=m:wl=m);Fu=g,bo(E)}(),Bu=0}}function Tf(){var g=As.now(),m=g-Lh;m>Ps&&(xf-=m,Lh=g)}function bo(g){Qr||(Cc&&(Cc=clearTimeout(Cc)),g-Bu>24?(g<1/0&&(Cc=setTimeout(Qd,g-As.now()-xf)),uu&&(uu=clearInterval(uu))):(uu||(Lh=As.now(),uu=setInterval(Tf,Ps)),Qr=1,rs(Qd)))}Uu.prototype=Sf.prototype={constructor:Uu,restart:function(g,m,x){if(typeof g!="function")throw new TypeError("callback is not a function");x=(x==null?Pc():+x)+(m==null?0:+m),this._next||Fu===this||(Fu?Fu._next=this:wl=this,Fu=this),this._call=g,this._time=x,bo()},stop:function(){this._call&&(this._call=null,this._time=1/0,bo())}};const zu=4294967296;function ns(g){return g.x}function Cf(g){return g.y}var xp=Math.PI*(3-Math.sqrt(5));function Sp(g,m,x,E){if(isNaN(m)||isNaN(x))return g;var D,I,F,V,z,$,Y,Z,ie,le=g._root,ve={data:E},ue=g._x0,ge=g._y0,Ce=g._x1,Re=g._y1;if(!le)return g._root=ve,g;for(;le.length;)if(($=m>=(I=(ue+Ce)/2))?ue=I:Ce=I,(Y=x>=(F=(ge+Re)/2))?ge=F:Re=F,D=le,!(le=le[Z=Y<<1|$]))return D[Z]=ve,g;if(V=+g._x.call(null,le.data),z=+g._y.call(null,le.data),m===V&&x===z)return ve.next=le,D?D[Z]=ve:g._root=ve,g;do D=D?D[Z]=new Array(4):g._root=new Array(4),($=m>=(I=(ue+Ce)/2))?ue=I:Ce=I,(Y=x>=(F=(ge+Re)/2))?ge=F:Re=F;while((Z=Y<<1|$)==(ie=(z>=F)<<1|V>=I));return D[ie]=le,D[Z]=ve,g}function Po(g,m,x,E,D){this.node=g,this.x0=m,this.y0=x,this.x1=E,this.y1=D}function Nh(g){return g[0]}function jh(g){return g[1]}function Pf(g,m,x){var E=new qu(m??Nh,x??jh,NaN,NaN,NaN,NaN);return g==null?E:E.addAll(g)}function qu(g,m,x,E,D,I){this._x=g,this._y=m,this._x0=x,this._y0=E,this._x1=D,this._y1=I,this._root=void 0}function Jd(g){for(var m={data:g.data},x=m;g=g.next;)x=x.next={data:g.data};return m}var Ao=Pf.prototype=qu.prototype;function ao(g){return function(){return g}}function An(g){return 1e-6*(g()-.5)}function Vn(){var g,m,x,E,D,I=ao(-30),F=1,V=1/0,z=.81;function $(le){var ve,ue=g.length,ge=Pf(g,ns,Cf).visitAfter(Z);for(E=le,ve=0;ve<ue;++ve)m=g[ve],ge.visit(ie)}function Y(){if(g){var le,ve,ue=g.length;for(D=new Array(ue),le=0;le<ue;++le)ve=g[le],D[ve.index]=+I(ve,le,g)}}function Z(le){var ve,ue,ge,Ce,Re,je=0,ke=0;if(le.length){for(ge=Ce=Re=0;Re<4;++Re)(ve=le[Re])&&(ue=Math.abs(ve.value))&&(je+=ve.value,ke+=ue,ge+=ue*ve.x,Ce+=ue*ve.y);le.x=ge/ke,le.y=Ce/ke}else{(ve=le).x=ve.data.x,ve.y=ve.data.y;do je+=D[ve.data.index];while(ve=ve.next)}le.value=je}function ie(le,ve,ue,ge){if(!le.value)return!0;var Ce=le.x-m.x,Re=le.y-m.y,je=ge-ve,ke=Ce*Ce+Re*Re;if(je*je/z<ke)return ke<V&&(Ce===0&&(ke+=(Ce=An(x))*Ce),Re===0&&(ke+=(Re=An(x))*Re),ke<F&&(ke=Math.sqrt(F*ke)),m.vx+=Ce*le.value*E/ke,m.vy+=Re*le.value*E/ke),!0;if(!(le.length||ke>=V)){(le.data!==m||le.next)&&(Ce===0&&(ke+=(Ce=An(x))*Ce),Re===0&&(ke+=(Re=An(x))*Re),ke<F&&(ke=Math.sqrt(F*ke)));do le.data!==m&&(je=D[le.data.index]*E/ke,m.vx+=Ce*je,m.vy+=Re*je);while(le=le.next)}}return $.initialize=function(le,ve){g=le,x=ve,Y()},$.strength=function(le){return arguments.length?(I=typeof le=="function"?le:ao(+le),Y(),$):I},$.distanceMin=function(le){return arguments.length?(F=le*le,$):Math.sqrt(F)},$.distanceMax=function(le){return arguments.length?(V=le*le,$):Math.sqrt(V)},$.theta=function(le){return arguments.length?(z=le*le,$):Math.sqrt(z)},$}function Fh(g){return g.x+g.vx}function Qg(g){return g.y+g.vy}function Tp(g){return g.index}function Cp(g,m){var x=g.get(m);if(!x)throw new Error("node not found: "+m);return x}Ao.copy=function(){var g,m,x=new qu(this._x,this._y,this._x0,this._y0,this._x1,this._y1),E=this._root;if(!E)return x;if(!E.length)return x._root=Jd(E),x;for(g=[{source:E,target:x._root=new Array(4)}];E=g.pop();)for(var D=0;D<4;++D)(m=E.source[D])&&(m.length?g.push({source:m,target:E.target[D]=new Array(4)}):E.target[D]=Jd(m));return x},Ao.add=function(g){const m=+this._x.call(null,g),x=+this._y.call(null,g);return Sp(this.cover(m,x),m,x,g)},Ao.addAll=function(g){var m,x,E,D,I=g.length,F=new Array(I),V=new Array(I),z=1/0,$=1/0,Y=-1/0,Z=-1/0;for(x=0;x<I;++x)isNaN(E=+this._x.call(null,m=g[x]))||isNaN(D=+this._y.call(null,m))||(F[x]=E,V[x]=D,E<z&&(z=E),E>Y&&(Y=E),D<$&&($=D),D>Z&&(Z=D));if(z>Y||$>Z)return this;for(this.cover(z,$).cover(Y,Z),x=0;x<I;++x)Sp(this,F[x],V[x],g[x]);return this},Ao.cover=function(g,m){if(isNaN(g=+g)||isNaN(m=+m))return this;var x=this._x0,E=this._y0,D=this._x1,I=this._y1;if(isNaN(x))D=(x=Math.floor(g))+1,I=(E=Math.floor(m))+1;else{for(var F,V,z=D-x||1,$=this._root;x>g||g>=D||E>m||m>=I;)switch(V=(m<E)<<1|g<x,(F=new Array(4))[V]=$,$=F,z*=2,V){case 0:D=x+z,I=E+z;break;case 1:x=D-z,I=E+z;break;case 2:D=x+z,E=I-z;break;case 3:x=D-z,E=I-z}this._root&&this._root.length&&(this._root=$)}return this._x0=x,this._y0=E,this._x1=D,this._y1=I,this},Ao.data=function(){var g=[];return this.visit(function(m){if(!m.length)do g.push(m.data);while(m=m.next)}),g},Ao.extent=function(g){return arguments.length?this.cover(+g[0][0],+g[0][1]).cover(+g[1][0],+g[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Ao.find=function(g,m,x){var E,D,I,F,V,z,$,Y=this._x0,Z=this._y0,ie=this._x1,le=this._y1,ve=[],ue=this._root;for(ue&&ve.push(new Po(ue,Y,Z,ie,le)),x==null?x=1/0:(Y=g-x,Z=m-x,ie=g+x,le=m+x,x*=x);z=ve.pop();)if(!(!(ue=z.node)||(D=z.x0)>ie||(I=z.y0)>le||(F=z.x1)<Y||(V=z.y1)<Z))if(ue.length){var ge=(D+F)/2,Ce=(I+V)/2;ve.push(new Po(ue[3],ge,Ce,F,V),new Po(ue[2],D,Ce,ge,V),new Po(ue[1],ge,I,F,Ce),new Po(ue[0],D,I,ge,Ce)),($=(m>=Ce)<<1|g>=ge)&&(z=ve[ve.length-1],ve[ve.length-1]=ve[ve.length-1-$],ve[ve.length-1-$]=z)}else{var Re=g-+this._x.call(null,ue.data),je=m-+this._y.call(null,ue.data),ke=Re*Re+je*je;if(ke<x){var Ye=Math.sqrt(x=ke);Y=g-Ye,Z=m-Ye,ie=g+Ye,le=m+Ye,E=ue.data}}return E},Ao.remove=function(g){if(isNaN(I=+this._x.call(null,g))||isNaN(F=+this._y.call(null,g)))return this;var m,x,E,D,I,F,V,z,$,Y,Z,ie,le=this._root,ve=this._x0,ue=this._y0,ge=this._x1,Ce=this._y1;if(!le)return this;if(le.length)for(;;){if(($=I>=(V=(ve+ge)/2))?ve=V:ge=V,(Y=F>=(z=(ue+Ce)/2))?ue=z:Ce=z,m=le,!(le=le[Z=Y<<1|$]))return this;if(!le.length)break;(m[Z+1&3]||m[Z+2&3]||m[Z+3&3])&&(x=m,ie=Z)}for(;le.data!==g;)if(E=le,!(le=le.next))return this;return(D=le.next)&&delete le.next,E?(D?E.next=D:delete E.next,this):m?(D?m[Z]=D:delete m[Z],(le=m[0]||m[1]||m[2]||m[3])&&le===(m[3]||m[2]||m[1]||m[0])&&!le.length&&(x?x[ie]=le:this._root=le),this):(this._root=D,this)},Ao.removeAll=function(g){for(var m=0,x=g.length;m<x;++m)this.remove(g[m]);return this},Ao.root=function(){return this._root},Ao.size=function(){var g=0;return this.visit(function(m){if(!m.length)do++g;while(m=m.next)}),g},Ao.visit=function(g){var m,x,E,D,I,F,V=[],z=this._root;for(z&&V.push(new Po(z,this._x0,this._y0,this._x1,this._y1));m=V.pop();)if(!g(z=m.node,E=m.x0,D=m.y0,I=m.x1,F=m.y1)&&z.length){var $=(E+I)/2,Y=(D+F)/2;(x=z[3])&&V.push(new Po(x,$,Y,I,F)),(x=z[2])&&V.push(new Po(x,E,Y,$,F)),(x=z[1])&&V.push(new Po(x,$,D,I,Y)),(x=z[0])&&V.push(new Po(x,E,D,$,Y))}return this},Ao.visitAfter=function(g){var m,x=[],E=[];for(this._root&&x.push(new Po(this._root,this._x0,this._y0,this._x1,this._y1));m=x.pop();){var D=m.node;if(D.length){var I,F=m.x0,V=m.y0,z=m.x1,$=m.y1,Y=(F+z)/2,Z=(V+$)/2;(I=D[0])&&x.push(new Po(I,F,V,Y,Z)),(I=D[1])&&x.push(new Po(I,Y,V,z,Z)),(I=D[2])&&x.push(new Po(I,F,Z,Y,$)),(I=D[3])&&x.push(new Po(I,Y,Z,z,$))}E.push(m)}for(;m=E.pop();)g(m.node,m.x0,m.y0,m.x1,m.y1);return this},Ao.x=function(g){return arguments.length?(this._x=g,this):this._x},Ao.y=function(g){return arguments.length?(this._y=g,this):this._y};var Qt=256,so=4096,Qn=25,El="#FFDF81",Ac="#818790",Rc="#EDEDED",Af="#CFD1D4",Ol="#F5F6F6",xl="#8FE3E8",Qe="#1A1B1D",pt={position:"absolute",top:0,bottom:0,left:0,right:0},ot=function(){return window.devicePixelRatio||1},$t=["NVL_basic-wrapper","NVL_interactive-wrapper"];function pr(g,m){var x=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!x){if(Array.isArray(g)||(x=function(z,$){if(z){if(typeof z=="string")return Gr(z,$);var Y=Object.prototype.toString.call(z).slice(8,-1);return Y==="Object"&&z.constructor&&(Y=z.constructor.name),Y==="Map"||Y==="Set"?Array.from(z):Y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Y)?Gr(z,$):void 0}}(g))||m){x&&(g=x);var E=0,D=function(){};return{s:D,n:function(){return E>=g.length?{done:!0}:{done:!1,value:g[E++]}},e:function(z){throw z},f:D}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I,F=!0,V=!1;return{s:function(){x=x.call(g)},n:function(){var z=x.next();return F=z.done,z},e:function(z){V=!0,I=z},f:function(){try{F||x.return==null||x.return()}finally{if(V)throw I}}}}function Gr(g,m){(m==null||m>g.length)&&(m=g.length);for(var x=0,E=new Array(m);x<m;x++)E[x]=g[x];return E}var gi=function(g){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Rc,x=new Map;return g.forEach(function(E){var D=E.id,I=E.from,F=E.to,V=E.color,z=E.width,$=E.disabled,Y=[I,F].sort(),Z="".concat(Y[0],".").concat(Y[1]),ie=x.get(Z);ie?ie.bundledRels.push({id:D,color:V??void 0,disabled:$!=null&&$,width:z??1}):x.set(Z,{bundledRels:[{id:D,color:V??void 0,disabled:$!=null&&$,width:z??1}],key:Z,from:I,to:F,color:V??void 0,disabled:$!=null&&$,width:0})}),x.forEach(function(E){var D=(0,r.uniqBy)(E.bundledRels,"disabled"),I=D.length===1&&D[0].disabled===!0,F=D.length===1&&D[0].disabled!==!0;if(I)E.color=m,E.width=1;else{var V=E.bundledRels.filter(function($){return $.disabled!==!0}),z=(0,r.uniqBy)(V,"color");F?(E.color=z.length>1?void 0:E.bundledRels[0].color,E.bundledRels.forEach(function($){E.width+=$.width})):(E.color=z.length===1?z[0].color:void 0,E.disabled=!1,E.bundledRels.forEach(function($){E.width+=$.disabled!==!0?$.width:0}))}}),Array.from(x.values())},ce=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).find(function(g){return"size"in g})!==void 0};function Rs(g){return Rs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},Rs(g)}var Bh=function(g){var m,x;return typeof g.source=="number"||typeof g.target=="number"||typeof g.source=="string"||typeof g.target=="string"?45*devicePixelRatio:((m=g.source.size)!==null&&m!==void 0?m:Qn)+((x=g.target.size)!==null&&x!==void 0?x:Qn)+90*devicePixelRatio};function Jn(g){return Rs(g)==="object"}var Lr=function(g){var m;return((m=g.size)!==null&&m!==void 0?m:Qn)+25*devicePixelRatio},lu=function(){return-400*Math.pow(devicePixelRatio,2)},$o=function(){return 2*lu()};function Xi(g){return Xi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},Xi(g)}function is(g,m){(m==null||m>g.length)&&(m=g.length);for(var x=0,E=new Array(m);x<m;x++)E[x]=g[x];return E}function Ir(g,m){var x=Object.keys(g);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(g);m&&(E=E.filter(function(D){return Object.getOwnPropertyDescriptor(g,D).enumerable})),x.push.apply(x,E)}return x}function Pp(g,m){for(var x=0;x<m.length;x++){var E=m[x];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,Uh(E.key),E)}}function Uh(g){var m=function(x,E){if(Xi(x)!="object"||!x)return x;var D=x[Symbol.toPrimitive];if(D!==void 0){var I=D.call(x,"string");if(Xi(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(g);return Xi(m)=="symbol"?m:String(m)}var ga="d3ForceLayout",ev=function(g){return g&&gt(g)},tv=function(){function g(E){var D=this;(function($,Y){if(!($ instanceof Y))throw new TypeError("Cannot call a class as a function")})(this,g);var I=E.state;this.state=I,this.d3Nodes={},this.d3RelList={},this.computing=!0,this.center={x:0,y:0},this.nodeRelCount=[];var F=this.state,V=F.nodes,z=F.rels;V.addChannel(ga),z.addChannel(ga),this.simulation=function($){var Y,Z=1,ie=.001,le=1-Math.pow(ie,1/300),ve=0,ue=.6,ge=new Map,Ce=Sf(ke),Re=ju("tick","end"),je=function(){let Xe=1;return()=>(Xe=(1664525*Xe+1013904223)%zu)/zu}();function ke(){Ye(),Re.call("tick",Y),Z<ie&&(Ce.stop(),Re.call("end",Y))}function Ye(Xe){var We,it,mt=$.length;Xe===void 0&&(Xe=1);for(var It=0;It<Xe;++It)for(Z+=(ve-Z)*le,ge.forEach(function(bt){bt(Z)}),We=0;We<mt;++We)(it=$[We]).fx==null?it.x+=it.vx*=ue:(it.x=it.fx,it.vx=0),it.fy==null?it.y+=it.vy*=ue:(it.y=it.fy,it.vy=0);return Y}function ze(){for(var Xe,We=0,it=$.length;We<it;++We){if((Xe=$[We]).index=We,Xe.fx!=null&&(Xe.x=Xe.fx),Xe.fy!=null&&(Xe.y=Xe.fy),isNaN(Xe.x)||isNaN(Xe.y)){var mt=10*Math.sqrt(.5+We),It=We*xp;Xe.x=mt*Math.cos(It),Xe.y=mt*Math.sin(It)}(isNaN(Xe.vx)||isNaN(Xe.vy))&&(Xe.vx=Xe.vy=0)}}function Ke(Xe){return Xe.initialize&&Xe.initialize($,je),Xe}return $==null&&($=[]),ze(),Y={tick:Ye,restart:function(){return Ce.restart(ke),Y},stop:function(){return Ce.stop(),Y},nodes:function(Xe){return arguments.length?($=Xe,ze(),ge.forEach(Ke),Y):$},alpha:function(Xe){return arguments.length?(Z=+Xe,Y):Z},alphaMin:function(Xe){return arguments.length?(ie=+Xe,Y):ie},alphaDecay:function(Xe){return arguments.length?(le=+Xe,Y):+le},alphaTarget:function(Xe){return arguments.length?(ve=+Xe,Y):ve},velocityDecay:function(Xe){return arguments.length?(ue=1-Xe,Y):1-ue},randomSource:function(Xe){return arguments.length?(je=Xe,ge.forEach(Ke),Y):je},force:function(Xe,We){return arguments.length>1?(We==null?ge.delete(Xe):ge.set(Xe,Ke(We)),Y):ge.get(Xe)},find:function(Xe,We,it){var mt,It,bt,jt,Ct,Ee=0,we=$.length;for(it==null?it=1/0:it*=it,Ee=0;Ee<we;++Ee)(bt=(mt=Xe-(jt=$[Ee]).x)*mt+(It=We-jt.y)*It)<it&&(Ct=jt,it=bt);return Ct},on:function(Xe,We){return arguments.length>1?(Re.on(Xe,We),Y):Re.on(Xe)}}}().velocityDecay(.4).force("charge",Vn().strength(lu)).force("centerX",function($){var Y,Z,ie,le=ao(.1);function ve(ge){for(var Ce,Re=0,je=Y.length;Re<je;++Re)(Ce=Y[Re]).vx+=(ie[Re]-Ce.x)*Z[Re]*ge}function ue(){if(Y){var ge,Ce=Y.length;for(Z=new Array(Ce),ie=new Array(Ce),ge=0;ge<Ce;++ge)Z[ge]=isNaN(ie[ge]=+$(Y[ge],ge,Y))?0:+le(Y[ge],ge,Y)}}return typeof $!="function"&&($=ao($==null?0:+$)),ve.initialize=function(ge){Y=ge,ue()},ve.strength=function(ge){return arguments.length?(le=typeof ge=="function"?ge:ao(+ge),ue(),ve):le},ve.x=function(ge){return arguments.length?($=typeof ge=="function"?ge:ao(+ge),ue(),ve):$},ve}(0).strength(.03)).force("centerY",function($){var Y,Z,ie,le=ao(.1);function ve(ge){for(var Ce,Re=0,je=Y.length;Re<je;++Re)(Ce=Y[Re]).vy+=(ie[Re]-Ce.y)*Z[Re]*ge}function ue(){if(Y){var ge,Ce=Y.length;for(Z=new Array(Ce),ie=new Array(Ce),ge=0;ge<Ce;++ge)Z[ge]=isNaN(ie[ge]=+$(Y[ge],ge,Y))?0:+le(Y[ge],ge,Y)}}return typeof $!="function"&&($=ao($==null?0:+$)),ve.initialize=function(ge){Y=ge,ue()},ve.strength=function(ge){return arguments.length?(le=typeof ge=="function"?ge:ao(+ge),ue(),ve):le},ve.y=function(ge){return arguments.length?($=typeof ge=="function"?ge:ao(+ge),ue(),ve):$},ve}(0).strength(.03)).alpha(1).alphaMin(.05).on("end",function(){D.simulationStopped=!0,D.shouldUpdate=!1,D.shouldReheatNodes=!1,D.shouldCountNodeRels=!1}).stop(),this.simulationStopped=!0,this.shouldUpdate=!0,this.shouldReheatNodes=!1,this.shouldCountNodeRels=!0,this.stateDisposers=[],this.stateDisposers.push(this.state.reaction(function(){return D.state.graphUpdates},function(){var $=V.channels[ga];if(V.version!==void 0&&$){var Y=Object.values($.adds).length>0,Z=Object.values($.removes).length>0,ie=Object.values($.updates),le=ce(ie);Y||Z||le?(D.shouldUpdate=!0,D.shouldReheatNodes=!0,D.shouldCountNodeRels=!0):D.shouldReheatNodes=!1}var ve=z.channels[ga];if(z.version!==void 0&&ve){var ue=Object.values(ve.adds).length>0,ge=Object.values(ve.removes).length>0;(ue||ge)&&(D.shouldUpdate=!0,D.shouldReheatNodes=!0,D.shouldCountNodeRels=!0)}}))}var m,x;return m=g,x=[{key:"setOptions",value:function(E){}},{key:"updateNodes",value:function(E){var D=this;E.forEach(function(I){D.d3Nodes[I.id]===void 0&&(D.d3Nodes[I.id]={id:I.id}),I!=null&&I.pinned?(D.d3Nodes[I.id].fx=I.x,D.d3Nodes[I.id].fy=I.y):(D.d3Nodes[I.id].x=I.x,D.d3Nodes[I.id].y=I.y),D.d3Nodes[I.id].vy=0,D.d3Nodes[I.id].vx=0}),this.shouldUpdate=!0,this.simulation.tick().alpha(.2)}},{key:"update",value:function(){var E,D=this,I=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.shouldUpdate||I){var F=this.state,V=F.nodes,z=F.rels,$=V.channels[ga],Y=z.channels[ga],Z=Object.values($.adds).length>0,ie=Object.values(Y.adds).length>0,le=Object.values($.removes).length>0,ve=Object.values(Y.removes).length>0,ue=Object.values($.updates).length>0;if(Z||ie||le||ve||ue){var ge=Z&&Object.keys(this.d3Nodes).length===0,Ce=ev($.removes);Object.keys(Ce).forEach(function(ke){delete D.d3Nodes[ke]});var Re=ev($.adds);if(Object.keys(Re).forEach(function(ke){D.d3Nodes[ke]=function(Ye){for(var ze=1;ze<arguments.length;ze++){var Ke=arguments[ze]!=null?arguments[ze]:{};ze%2?Ir(Object(Ke),!0).forEach(function(Xe){var We,it,mt;We=Ye,it=Xe,mt=Ke[Xe],(it=Uh(it))in We?Object.defineProperty(We,it,{value:mt,enumerable:!0,configurable:!0,writable:!0}):We[it]=mt}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ye,Object.getOwnPropertyDescriptors(Ke)):Ir(Object(Ke)).forEach(function(Xe){Object.defineProperty(Ye,Xe,Object.getOwnPropertyDescriptor(Ke,Xe))})}return Ye}({},Re[ke])}),ue&&Object.values($.updates).forEach(function(ke){ke.pinned===!0?(D.d3Nodes[ke.id].fx=D.d3Nodes[ke.id].x,D.d3Nodes[ke.id].fy=D.d3Nodes[ke.id].y):ke.pinned===!1&&(D.d3Nodes[ke.id].fx=null,D.d3Nodes[ke.id].fy=null),ke.size!==void 0&&(D.d3Nodes[ke.id].size=ke.size)}),(ie||ve)&&(this.d3RelList=gi(ev(z.items)).filter(function(ke){return ke.from!==ke.to}).map(function(ke,Ye){return{source:ke.from,target:ke.to,index:Ye}})),ge){var je=Object.values(this.d3Nodes);(function(ke,Ye,ze){var Ke=ke.filter(function(Xe){return Xe.x===void 0&&Xe.y===void 0});Ke.forEach(function(Xe,We){Xe.x=Ye.x+ze*Math.sin(2*Math.PI*We/Ke.length),Xe.y=Ye.y+ze*Math.cos(2*Math.PI*We/Ke.length)})})(je,this.center,(E=je.length,45*E/(2*Math.PI)))}this.layout(V.items,z.items,ge)}V.clearChannel(ga),z.clearChannel(ga),this.shouldUpdate=!1,this.simulation.alpha()>this.simulation.alphaMin()&&(this.shouldUpdate=!0,this.simulationStopped&&(this.simulation.restart(),this.simulationStopped=!1))}}},{key:"layout",value:function(E,D,I){var F=this;if(!(0,r.isEmpty)(this.d3Nodes)){if(this.simulation.stop(),this.simulation.nodes(Object.values(this.d3Nodes)).force("collide",function(Y){var Z,ie,le,ve=1,ue=1;function ge(){for(var je,ke,Ye,ze,Ke,Xe,We,it=Z.length,mt=0;mt<ue;++mt)for(ke=Pf(Z,Fh,Qg).visitAfter(Ce),je=0;je<it;++je)Ye=Z[je],Xe=ie[Ye.index],We=Xe*Xe,ze=Ye.x+Ye.vx,Ke=Ye.y+Ye.vy,ke.visit(It);function It(bt,jt,Ct,Ee,we){var xe=bt.data,st=bt.r,Ze=Xe+st;if(!xe)return jt>ze+Ze||Ee<ze-Ze||Ct>Ke+Ze||we<Ke-Ze;if(xe.index>Ye.index){var vt=ze-xe.x-xe.vx,Mt=Ke-xe.y-xe.vy,Ut=vt*vt+Mt*Mt;Ut<Ze*Ze&&(vt===0&&(Ut+=(vt=An(le))*vt),Mt===0&&(Ut+=(Mt=An(le))*Mt),Ut=(Ze-(Ut=Math.sqrt(Ut)))/Ut*ve,Ye.vx+=(vt*=Ut)*(Ze=(st*=st)/(We+st)),Ye.vy+=(Mt*=Ut)*Ze,xe.vx-=vt*(Ze=1-Ze),xe.vy-=Mt*Ze)}}}function Ce(je){if(je.data)return je.r=ie[je.data.index];for(var ke=je.r=0;ke<4;++ke)je[ke]&&je[ke].r>je.r&&(je.r=je[ke].r)}function Re(){if(Z){var je,ke,Ye=Z.length;for(ie=new Array(Ye),je=0;je<Ye;++je)ke=Z[je],ie[ke.index]=+Y(ke,je,Z)}}return typeof Y!="function"&&(Y=ao(Y==null?1:+Y)),ge.initialize=function(je,ke){Z=je,le=ke,Re()},ge.iterations=function(je){return arguments.length?(ue=+je,ge):ue},ge.strength=function(je){return arguments.length?(ve=+je,ge):ve},ge.radius=function(je){return arguments.length?(Y=typeof je=="function"?je:ao(+je),Re(),ge):Y},ge}().radius(Lr)),this.shouldCountNodeRels&&(this.nodeRelCount=this.countNodeRels()),this.simulation.force("link",function(Y){var Z,ie,le,ve,ue,ge,Ce=Tp,Re=function(We){return 1/Math.min(ve[We.source.index],ve[We.target.index])},je=ao(30),ke=1;function Ye(We){for(var it=0,mt=Y.length;it<ke;++it)for(var It,bt,jt,Ct,Ee,we,xe,st=0;st<mt;++st)bt=(It=Y[st]).source,Ct=(jt=It.target).x+jt.vx-bt.x-bt.vx||An(ge),Ee=jt.y+jt.vy-bt.y-bt.vy||An(ge),Ct*=we=((we=Math.sqrt(Ct*Ct+Ee*Ee))-ie[st])/we*We*Z[st],Ee*=we,jt.vx-=Ct*(xe=ue[st]),jt.vy-=Ee*xe,bt.vx+=Ct*(xe=1-xe),bt.vy+=Ee*xe}function ze(){if(le){var We,it,mt=le.length,It=Y.length,bt=new Map(le.map((jt,Ct)=>[Ce(jt,Ct,le),jt]));for(We=0,ve=new Array(mt);We<It;++We)(it=Y[We]).index=We,typeof it.source!="object"&&(it.source=Cp(bt,it.source)),typeof it.target!="object"&&(it.target=Cp(bt,it.target)),ve[it.source.index]=(ve[it.source.index]||0)+1,ve[it.target.index]=(ve[it.target.index]||0)+1;for(We=0,ue=new Array(It);We<It;++We)it=Y[We],ue[We]=ve[it.source.index]/(ve[it.source.index]+ve[it.target.index]);Z=new Array(It),Ke(),ie=new Array(It),Xe()}}function Ke(){if(le)for(var We=0,it=Y.length;We<it;++We)Z[We]=+Re(Y[We],We,Y)}function Xe(){if(le)for(var We=0,it=Y.length;We<it;++We)ie[We]=+je(Y[We],We,Y)}return Y==null&&(Y=[]),Ye.initialize=function(We,it){le=We,ge=it,ze()},Ye.links=function(We){return arguments.length?(Y=We,ze(),Ye):Y},Ye.id=function(We){return arguments.length?(Ce=We,Ye):Ce},Ye.iterations=function(We){return arguments.length?(ke=+We,Ye):ke},Ye.strength=function(We){return arguments.length?(Re=typeof We=="function"?We:ao(+We),Ke(),Ye):Re},Ye.distance=function(We){return arguments.length?(je=typeof We=="function"?We:ao(+We),Xe(),Ye):je},Ye}(this.d3RelList).id(function(Y){return Y.id}).distance(Bh).strength(function(Y){return function(Z,ie){if(!Jn(Z.source)||!Jn(Z.target))return 1;var le=1.2/(Math.min(ie[Z.source.index],ie[Z.target.index])+(Math.max(ie[Z.source.index],ie[Z.target.index])-1)/100);return Math.max(Math.min(le,1),.06)}(Y,F.nodeRelCount)})),I){var V=0;this.simulation.force("charge",Vn().strength($o));for(var z=performance.now();performance.now()-z<300&&V<200;)this.simulation.alpha(1),this.simulation.tick(1),V+=1;this.simulation.force("charge",Vn().strength(lu));for(var $=performance.now();performance.now()-$<100&&this.simulation.alpha()>=this.simulation.alphaMin();)this.simulation.tick(1);return this.computing=!1,void this.simulation.restart()}this.shouldReheatNodes?this.simulation.alpha(1).restart():this.simulation.restart()}}},{key:"getNodePositions",value:function(E){var D,I=[],F=function(Y,Z){var ie=typeof Symbol<"u"&&Y[Symbol.iterator]||Y["@@iterator"];if(!ie){if(Array.isArray(Y)||(ie=function(Re,je){if(Re){if(typeof Re=="string")return is(Re,je);var ke=Object.prototype.toString.call(Re).slice(8,-1);return ke==="Object"&&Re.constructor&&(ke=Re.constructor.name),ke==="Map"||ke==="Set"?Array.from(Re):ke==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ke)?is(Re,je):void 0}}(Y))||Z){ie&&(Y=ie);var le=0,ve=function(){};return{s:ve,n:function(){return le>=Y.length?{done:!0}:{done:!1,value:Y[le++]}},e:function(Re){throw Re},f:ve}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ue,ge=!0,Ce=!1;return{s:function(){ie=ie.call(Y)},n:function(){var Re=ie.next();return ge=Re.done,Re},e:function(Re){Ce=!0,ue=Re},f:function(){try{ge||ie.return==null||ie.return()}finally{if(Ce)throw ue}}}}(E);try{for(F.s();!(D=F.n()).done;){var V=D.value,z=this.d3Nodes[V.id];if(z!==void 0){var $={id:z.id,x:z.x,y:z.y};I.push($)}}}catch(Y){F.e(Y)}finally{F.f()}return I}},{key:"getShouldUpdate",value:function(){return this.shouldUpdate}},{key:"getComputing",value:function(){return this.computing}},{key:"terminateUpdate",value:function(){this.simulation.alpha(this.simulation.alphaMin()).stop(),this.simulationStopped=!0}},{key:"destroy",value:function(){this.stateDisposers.forEach(function(E){E()}),this.state.nodes.removeChannel(ga),this.state.rels.removeChannel(ga),this.simulation.stop()}},{key:"setAlpha",value:function(E){this.simulation.alpha(E),this.simulation.restart(),this.simulation.shouldUpdate=!0}},{key:"countNodeRels",value:function(){for(var E=new Map(Object.entries(this.d3Nodes)),D=Object.values(this.d3RelList),I=new Array(E.length),F=0;F<D.length;++F){var V=D[F];V.index=F,Xi(V.source)!=="object"&&(V.source=E.get(V.source)),Xi(V.target)!=="object"&&(V.target=E.get(V.target)),I[V.source.index]=(I[V.source.index]||0)+1,I[V.target.index]=(I[V.target.index]||0)+1}return I}}],x&&Pp(m.prototype,x),Object.defineProperty(m,"prototype",{writable:!1}),g}(),Rf=Li(5880),Gu=Li.n(Rf),Br=Gu().getLogger("NVL");const Sl=y7;var Is={CoseBilkentLayout:{standard:"createCoseBilkentLayoutWorker",fallback:"coseBilkentLayoutFallbackWorker"},HierarchicalLayout:{standard:"createHierarchicalLayoutWorker",fallback:"hierarchicalLayoutFallbackWorker"}},Tl=function(g){var m,x=arguments.length>1&&arguments[1]!==void 0&&arguments[1],E=Is[g],D=E.standard,I=E.fallback;if(x)m=Sl[I];else try{m=Sl[D]()}catch(F){console.warn("Failed to initialise ".concat(g,' worker: "').concat(JSON.stringify(F),'". Falling back to syncronous code.')),m=Sl[I]}if(m===void 0)throw"".concat(g," code could not be initialized.");return m.port.start(),m};function Ua(g){return Ua=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},Ua(g)}function Yo(g,m){var x=Object.keys(g);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(g);m&&(E=E.filter(function(D){return Object.getOwnPropertyDescriptor(g,D).enumerable})),x.push.apply(x,E)}return x}function Cl(g){for(var m=1;m<arguments.length;m++){var x=arguments[m]!=null?arguments[m]:{};m%2?Yo(Object(x),!0).forEach(function(E){Ro(g,E,x[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(x)):Yo(Object(x)).forEach(function(E){Object.defineProperty(g,E,Object.getOwnPropertyDescriptor(x,E))})}return g}function If(g,m){var x=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!x){if(Array.isArray(g)||(x=function(z,$){if(z){if(typeof z=="string")return ks(z,$);var Y=Object.prototype.toString.call(z).slice(8,-1);return Y==="Object"&&z.constructor&&(Y=z.constructor.name),Y==="Map"||Y==="Set"?Array.from(z):Y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Y)?ks(z,$):void 0}}(g))||m){x&&(g=x);var E=0,D=function(){};return{s:D,n:function(){return E>=g.length?{done:!0}:{done:!1,value:g[E++]}},e:function(z){throw z},f:D}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I,F=!0,V=!1;return{s:function(){x=x.call(g)},n:function(){var z=x.next();return F=z.done,z},e:function(z){V=!0,I=z},f:function(){try{F||x.return==null||x.return()}finally{if(V)throw I}}}}function ks(g,m){(m==null||m>g.length)&&(m=g.length);for(var x=0,E=new Array(m);x<m;x++)E[x]=g[x];return E}function Xo(g,m){for(var x=0;x<m.length;x++){var E=m[x];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,Ap(E.key),E)}}function Ro(g,m,x){return(m=Ap(m))in g?Object.defineProperty(g,m,{value:x,enumerable:!0,configurable:!0,writable:!0}):g[m]=x,g}function Ap(g){var m=function(x,E){if(Ua(x)!="object"||!x)return x;var D=x[Symbol.toPrimitive];if(D!==void 0){var I=D.call(x,"string");if(Ua(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(g);return Ua(m)=="symbol"?m:String(m)}var kf=function(g,m,x){return g+(m-g)*function(E){return E*E*(3-2*E)}(x)},rv=function(){function g(E){(function(I,F){if(!(I instanceof F))throw new TypeError("Cannot call a class as a function")})(this,g),Ro(this,"positions",void 0),Ro(this,"oldPositions",void 0),Ro(this,"startTime",void 0),Ro(this,"t",void 0),Ro(this,"currentT",void 0),Ro(this,"state",void 0),Ro(this,"shouldUpdateAnimator",void 0),Ro(this,"parents",void 0),Ro(this,"animationCompleteCallback",void 0),Ro(this,"shouldUpdate",void 0);var D=E.state;this.positions={},this.oldPositions={},this.startTime=0,this.t=1,this.currentT=1,this.state=D,this.shouldUpdateAnimator=!1,this.parents={},this.animationCompleteCallback=E.animationCompleteCallback}var m,x;return m=g,x=[{key:"getPositionMapFromState",value:function(){var E,D=this.state.nodes,I=D.idToPosition,F={},V=If(D.items);try{for(V.s();!(E=V.n()).done;){var z=E.value,$=I[z.id];$!==void 0&&(F[z.id]={id:z.id,x:$.x,y:$.y})}}catch(Y){V.e(Y)}finally{V.f()}return F}},{key:"updatePositionsFromState",value:function(){this.positions=Cl({},this.getPositionMapFromState())}},{key:"updateOldPositionFromState",value:function(){this.oldPositions=Cl({},this.getPositionMapFromState())}},{key:"startAnimation",value:function(){this.updateOldPositionFromState(),this.startTime=Date.now(),this.t=0,this.currentT=0,this.shouldUpdateAnimator=!0}},{key:"update",value:function(){var E=this.shouldUpdateAnimator,D=(Date.now()-this.startTime)/400;this.t=Math.min(D,1),this.currentT<1?this.shouldUpdateAnimator=!0:(this.shouldUpdateAnimator=!1,E&&!this.shouldUpdateAnimator&&this.animationCompleteCallback!==void 0&&this.animationCompleteCallback(),this.shouldUpdateAnimator||this.updatePositionsFromState())}},{key:"updateNodes",value:function(E){var D,I=If(E);try{for(I.s();!(D=I.n()).done;){var F=D.value;F.x!==void 0&&F.y!==void 0&&(this.positions[F.id]={id:F.id,x:F.x,y:F.y}),this.shouldUpdate=!0}}catch(V){I.e(V)}finally{I.f()}}},{key:"getNodePositions",value:function(E){var D,I=this.parents,F=this.state.nodes.idToPosition,V=function(ke,Ye){for(var ze={x:0,y:0},Ke=ke.length,Xe=0,We=0;We<Ke;We++){var it=Ye[ke[We].id];it===void 0||isNaN(it.x)||isNaN(it.y)||it.x===0||it.y===0||(ze.x+=it.x,ze.y+=it.y,Xe+=1)}return Xe>0?[ze.x/Xe,ze.y/Xe]:[0,0]}(E,F),z={x:V[0],y:V[1]},$=[],Y=If(E);try{for(Y.s();!(D=Y.n()).done;){var Z=D.value,ie=this.positions[Z.id],le=F[Z.id],ve={id:Z.id};if(ie!==void 0){for(var ue,ge,Ce,Re=Z.id,je=(ue=this.oldPositions[Z.id])!==null&&ue!==void 0?ue:Cl({},z);je===void 0&&I[Re]!==void 0;)Re=I[Re],je=this.oldPositions[Re];je.x=(ge=je.x)!==null&&ge!==void 0?ge:z.x,je.y=(Ce=je.y)!==null&&Ce!==void 0?Ce:z.y,ve.x=kf(je.x,ie.x,this.t),ve.y=kf(je.y,ie.y,this.t)}else le!==void 0&&(ve.x=le.x||z.x,ve.y=le.y||z.y);$.push(ve)}}catch(ke){Y.e(ke)}finally{Y.f()}return this.currentT=this.t,$}}],x&&Xo(m.prototype,x),Object.defineProperty(m,"prototype",{writable:!1}),g}();function Wn(g){return Wn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},Wn(g)}function Pl(g,m){var x=Object.keys(g);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(g);m&&(E=E.filter(function(D){return Object.getOwnPropertyDescriptor(g,D).enumerable})),x.push.apply(x,E)}return x}function zh(g){for(var m=1;m<arguments.length;m++){var x=arguments[m]!=null?arguments[m]:{};m%2?Pl(Object(x),!0).forEach(function(E){za(g,E,x[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(x)):Pl(Object(x)).forEach(function(E){Object.defineProperty(g,E,Object.getOwnPropertyDescriptor(x,E))})}return g}function Ds(g,m){return function(x){if(Array.isArray(x))return x}(g)||function(x,E){var D=x==null?null:typeof Symbol<"u"&&x[Symbol.iterator]||x["@@iterator"];if(D!=null){var I,F,V,z,$=[],Y=!0,Z=!1;try{if(V=(D=D.call(x)).next,E!==0)for(;!(Y=(I=V.call(D)).done)&&($.push(I.value),$.length!==E);Y=!0);}catch(ie){Z=!0,F=ie}finally{try{if(!Y&&D.return!=null&&(z=D.return(),Object(z)!==z))return}finally{if(Z)throw F}}return $}}(g,m)||Mf(g,m)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Df(g){return function(m){if(Array.isArray(m))return cu(m)}(g)||function(m){if(typeof Symbol<"u"&&m[Symbol.iterator]!=null||m["@@iterator"]!=null)return Array.from(m)}(g)||Mf(g)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Mf(g,m){if(g){if(typeof g=="string")return cu(g,m);var x=Object.prototype.toString.call(g).slice(8,-1);return x==="Object"&&g.constructor&&(x=g.constructor.name),x==="Map"||x==="Set"?Array.from(g):x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x)?cu(g,m):void 0}}function cu(g,m){(m==null||m>g.length)&&(m=g.length);for(var x=0,E=new Array(m);x<m;x++)E[x]=g[x];return E}function ki(g,m){for(var x=0;x<m.length;x++){var E=m[x];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,Wu(E.key),E)}}function hn(g,m,x){return m=Vu(m),function(E,D){if(D&&(Wn(D)==="object"||typeof D=="function"))return D;if(D!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Al(E)}(g,qh()?Reflect.construct(m,x||[],Vu(g).constructor):m.apply(g,x))}function qh(){try{var g=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qh=function(){return!!g})()}function Al(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function Gh(){return Gh=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(g,m,x){var E=function(I,F){for(;!Object.prototype.hasOwnProperty.call(I,F)&&(I=Vu(I))!==null;);return I}(g,m);if(E){var D=Object.getOwnPropertyDescriptor(E,m);return D.get?D.get.call(arguments.length<3?g:x):D.value}},Gh.apply(this,arguments)}function Vu(g){return Vu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(m){return m.__proto__||Object.getPrototypeOf(m)},Vu(g)}function fu(g,m){return fu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(x,E){return x.__proto__=E,x},fu(g,m)}function za(g,m,x){return(m=Wu(m))in g?Object.defineProperty(g,m,{value:x,enumerable:!0,configurable:!0,writable:!0}):g[m]=x,g}function Wu(g){var m=function(x,E){if(Wn(x)!="object"||!x)return x;var D=x[Symbol.toPrimitive];if(D!==void 0){var I=D.call(x,"string");if(Wn(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(g);return Wn(m)=="symbol"?m:String(m)}var hu=function(g){return g!==void 0?gt(g):g},Ic=function(g){function m(D){var I;return function(F,V){if(!(F instanceof V))throw new TypeError("Cannot call a class as a function")}(this,m),za(Al(I=hn(this,m,[D])),"stateDisposers",void 0),za(Al(I),"cytoCompleteCallback",void 0),za(Al(I),"computing",void 0),za(Al(I),"pendingLayoutData",void 0),za(Al(I),"worker",void 0),za(Al(I),"workersDisabled",void 0),I.stateDisposers=[],I.stateDisposers.push(I.state.reaction(function(){return I.state.graphUpdates},function(){I.state.nodes.version!==void 0&&(I.shouldUpdate=!0),I.state.rels.version!==void 0&&(I.shouldUpdate=!0)})),I.cytoCompleteCallback=D.cytoCompleteCallback,I.shouldUpdate=!0,I.computing=!1,I.workersDisabled=D.state.disableWebWorkers,I.setOptions(),I.worker=Tl("CoseBilkentLayout",I.workersDisabled),I.pendingLayoutData=null,I}var x,E;return function(D,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function");D.prototype=Object.create(I&&I.prototype,{constructor:{value:D,writable:!0,configurable:!0}}),Object.defineProperty(D,"prototype",{writable:!1}),I&&fu(D,I)}(m,g),x=m,E=[{key:"setOptions",value:function(){this.shouldUpdate=!0}},{key:"update",value:function(){var D=arguments.length>0&&arguments[0]!==void 0&&arguments[0],I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(this.shouldUpdate||D){var V=hu(I),z=hu(F);(V.length>0||z.length>0)&&(this.updatePositionsFromState(),this.layout(V,z))}Gh(Vu(m.prototype),"update",this).call(this),this.shouldUpdate=!1}},{key:"getShouldUpdate",value:function(){return this.shouldUpdate||this.shouldUpdateAnimator}},{key:"getComputing",value:function(){return this.computing}},{key:"layout",value:function(D,I){var F=this;if(this.worker){if(D.length){var V=D.map(function(Y){return{group:"nodes",data:{id:Y.id}}}),z=I.map(function(Y){return{group:"edges",data:{id:"rel".concat(Y.id),source:Y.from,target:Y.to}}}),$={elements:[].concat(Df(V),Df(z)),spacingFactor:D.reduce(function(Y,Z){var ie;return Y+((ie=Z.size)!==null&&ie!==void 0?ie:Qn)},0)/D.length*4.5/50*ot()};this.computing?this.pendingLayoutData=$:(this.computing=!0,this.worker.port.onmessage=function(Y){var Z=Y.data.positions;if(F.computing){for(var ie=0,le=Object.entries(Z);ie<le.length;ie++){var ve=Ds(le[ie],2),ue=ve[0],ge=ve[1];F.positions[ue]=zh({id:ue},ge)}F.cytoCompleteCallback(),F.startAnimation()}F.computing=!1,F.shouldUpdate=!0},setTimeout(function(){F.computing&&F.worker.port.postMessage($)},0))}}else Br.info("Cose-Bilkent layout code not yet initialised.")}},{key:"terminateUpdate",value:function(){this.computing=!1}},{key:"destroy",value:function(){var D;this.stateDisposers.forEach(function(I){I()}),(D=this.worker)===null||D===void 0||D.port.close()}}],E&&ki(x.prototype,E),Object.defineProperty(x,"prototype",{writable:!1}),m}(rv),Rl=typeof Float32Array<"u"?Float32Array:Array;function du(){var g=new Rl(16);return Rl!=Float32Array&&(g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[11]=0,g[12]=0,g[13]=0,g[14]=0),g[0]=1,g[5]=1,g[10]=1,g[15]=1,g}Math.hypot||(Math.hypot=function(){for(var g=0,m=arguments.length;m--;)g+=arguments[m]*arguments[m];return Math.sqrt(g)});var Ms=function(g,m,x,E,D,I,F){var V=1/(m-x),z=1/(E-D),$=1/(I-F);return g[0]=-2*V,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=-2*z,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=2*$,g[11]=0,g[12]=(m+x)*V,g[13]=(D+E)*z,g[14]=(F+I)*$,g[15]=1,g},Rp=Li(9792),nv=Li.n(Rp);function kc(g){return kc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},kc(g)}function Vh(g,m){for(var x=0;x<m.length;x++){var E=m[x];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,Mc(E.key),E)}}function Dc(g,m,x){return(m=Mc(m))in g?Object.defineProperty(g,m,{value:x,enumerable:!0,configurable:!0,writable:!0}):g[m]=x,g}function Mc(g){var m=function(x,E){if(kc(x)!="object"||!x)return x;var D=x[Symbol.toPrimitive];if(D!==void 0){var I=D.call(x,"string");if(kc(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(g);return kc(m)=="symbol"?m:String(m)}var ya=function(){function g(E,D,I){var F=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};(function(Z,ie){if(!(Z instanceof ie))throw new TypeError("Cannot call a class as a function")})(this,g),Dc(this,"shaderProgram",void 0),Dc(this,"gl",void 0),Dc(this,"curTexture",void 0),Dc(this,"attributeInfo",void 0),Dc(this,"uniformInfo",void 0);var V=E.createShader(E.FRAGMENT_SHADER);if(!E.isShader(V))throw new Error("Could not create shader object");var z=nv()(I,F);E.shaderSource(V,z),E.compileShader(V),(0,r.isNil)(E.getShaderParameter(V,E.COMPILE_STATUS))&&Br.info(E.getShaderInfoLog(V));var $=E.createShader(E.VERTEX_SHADER);if(!E.isShader($))throw new Error("Could not create shader object");var Y=nv()(D,F);if(E.shaderSource($,Y),E.compileShader($),(0,r.isNil)(E.getShaderParameter($,E.COMPILE_STATUS))&&Br.info(E.getShaderInfoLog($)),this.shaderProgram=E.createProgram(),E.attachShader(this.shaderProgram,V),E.attachShader(this.shaderProgram,$),E.linkProgram(this.shaderProgram),(0,r.isNil)(E.getProgramParameter(this.shaderProgram,E.LINK_STATUS)))throw new Error("Could not initialise shader");this.gl=E,this.curTexture=0,this.scanUniforms(),this.scanAttributes()}var m,x;return m=g,x=[{key:"setUniform",value:function(E,D){var I=this.gl,F=this.uniformInfo[E];if(F===void 0)throw new Error("Shader.setUniform - Uniform ".concat(E," not found in shader"));switch(F.type){case I.INT:I.uniform1i(F.location,D);break;case I.INT_VEC2:I.uniform2iv(F.location,D);break;case I.INT_VEC3:I.uniform3iv(F.location,D);break;case I.INT_VEC4:I.uniform4iv(F.location,D);break;case I.SAMPLER_2D:I.activeTexture(I.TEXTURE0+F.texture),I.bindTexture(I.TEXTURE_2D,D),I.uniform1i(F.location,F.texture);break;case I.SAMPLER_CUBE:case I.FLOAT:I.uniform1f(F.location,D);break;case I.FLOAT_VEC2:I.uniform2fv(F.location,D);break;case I.FLOAT_VEC3:I.uniform3fv(F.location,D);break;case I.FLOAT_VEC4:I.uniform4fv(F.location,D);break;case I.FLOAT_MAT2:I.uniformMatrix2fv(F.location,!1,D);break;case I.FLOAT_MAT3:I.uniformMatrix3fv(F.location,!1,D);break;case I.FLOAT_MAT4:I.uniformMatrix4fv(F.location,!1,D)}}},{key:"setAttributePointer",value:function(E,D,I,F){var V=this.gl,z=this.attributeInfo[E],$=I*Float32Array.BYTES_PER_ELEMENT,Y=F*Float32Array.BYTES_PER_ELEMENT;V.enableVertexAttribArray(z.position),V.vertexAttribPointer(z.position,D,V.FLOAT,!1,Y,$)}},{key:"setAttributePointerFloat",value:function(E,D,I,F){var V=this.gl,z=this.attributeInfo[E];V.enableVertexAttribArray(z.position),V.vertexAttribPointer(z.position,D,V.FLOAT,!1,F,I)}},{key:"setAttributePointerUShort",value:function(E,D,I,F){var V=this.gl,z=this.attributeInfo[E];V.enableVertexAttribArray(z.position),V.vertexAttribPointer(z.position,D,V.UNSIGNED_SHORT,!1,F,I)}},{key:"setAttributePointerByteNorm",value:function(E,D,I,F){var V=this.gl,z=this.attributeInfo[E];V.enableVertexAttribArray(z.position),V.vertexAttribPointer(z.position,D,V.UNSIGNED_BYTE,!0,F,I)}},{key:"setAttributePointerByte",value:function(E,D,I,F){var V=this.gl,z=this.attributeInfo[E];V.enableVertexAttribArray(z.position),V.vertexAttribPointer(z.position,D,V.UNSIGNED_BYTE,!1,F,I)}},{key:"use",value:function(){this.gl.useProgram(this.shaderProgram)}},{key:"remove",value:function(){this.gl.deleteProgram(this.shaderProgram)}},{key:"scanAttributes",value:function(){var E=this.gl;this.attributeInfo={};for(var D,I,F=E.getProgramParameter(this.shaderProgram,E.ACTIVE_ATTRIBUTES),V=0;V<F;V++)D=E.getActiveAttrib(this.shaderProgram,V),I=E.getAttribLocation(this.shaderProgram,D.name),this.attributeInfo[D.name]={type:D.type,position:I}}},{key:"scanUniforms",value:function(){var E=this.gl;this.uniformInfo={};for(var D,I=E.getProgramParameter(this.shaderProgram,E.ACTIVE_UNIFORMS),F=0;F<I;F++){D=E.getActiveUniform(this.shaderProgram,F);var V=E.getUniformLocation(this.shaderProgram,D.name),z={type:D.type,location:V};D.type===E.SAMPLER_2D&&(z.texture=this.curTexture,this.curTexture+=1),this.uniformInfo[D.name]=z}}}],x&&Vh(m.prototype,x),Object.defineProperty(m,"prototype",{writable:!1}),g}();function vu(g){return vu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},vu(g)}function ye(g,m){for(var x=0;x<m.length;x++){var E=m[x];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,Hu(E.key),E)}}function Hu(g){var m=function(x,E){if(vu(x)!="object"||!x)return x;var D=x[Symbol.toPrimitive];if(D!==void 0){var I=D.call(x,"string");if(vu(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(g);return vu(m)=="symbol"?m:String(m)}function $u(g){var m=typeof Map=="function"?new Map:void 0;return $u=function(x){if(x===null||!function(D){try{return Function.toString.call(D).indexOf("[native code]")!==-1}catch{return typeof D=="function"}}(x))return x;if(typeof x!="function")throw new TypeError("Super expression must either be null or a function");if(m!==void 0){if(m.has(x))return m.get(x);m.set(x,E)}function E(){return function(D,I,F){if(dr())return Reflect.construct.apply(null,arguments);var V=[null];V.push.apply(V,I);var z=new(D.bind.apply(D,V));return F&&kr(z,F.prototype),z}(x,arguments,Lf(this).constructor)}return E.prototype=Object.create(x.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),kr(E,x)},$u(g)}function dr(){try{var g=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dr=function(){return!!g})()}function kr(g,m){return kr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(x,E){return x.__proto__=E,x},kr(g,m)}function Lf(g){return Lf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(m){return m.__proto__||Object.getPrototypeOf(m)},Lf(g)}var Il=function(g){function m(){return function(V,z){if(!(V instanceof z))throw new TypeError("Cannot call a class as a function")}(this,m),D=this,F=arguments,I=Lf(I=m),function(V,z){if(z&&(vu(z)==="object"||typeof z=="function"))return z;if(z!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function($){if($===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $}(V)}(D,dr()?Reflect.construct(I,F||[],Lf(D).constructor):I.apply(D,F));var D,I,F}var x,E;return function(D,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function");D.prototype=Object.create(I&&I.prototype,{constructor:{value:D,writable:!0,configurable:!0}}),Object.defineProperty(D,"prototype",{writable:!1}),I&&kr(D,I)}(m,g),x=m,(E=[{key:"toString",value:function(){return this.message}}])&&ye(x.prototype,E),Object.defineProperty(x,"prototype",{writable:!1}),m}($u(Error));const Nf=`uniform mat4 u_projection;

attribute vec2 a_position;
//attribute float a_index;

//varying highp float index;

void main() {
//  index = a_index;
  gl_Position = u_projection * vec4(a_position, 0.0, 1.0);
}`;function os(g){return os=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},os(g)}function Jg(g,m){for(var x=0;x<m.length;x++){var E=m[x];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,qa(E.key),E)}}function qa(g){var m=function(x,E){if(os(x)!="object"||!x)return x;var D=x[Symbol.toPrimitive];if(D!==void 0){var I=D.call(x,"string");if(os(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(g);return os(m)=="symbol"?m:String(m)}var Ip=function(){function g(E,D){(function(I,F){if(!(I instanceof F))throw new TypeError("Cannot call a class as a function")})(this,g),this.graph=this.constructGraphObjects(E,D),this.subGraphs=[],this.sunMap={}}var m,x;return m=g,x=[{key:"constructGraphObjects",value:function(E,D){var I=new Array(E.nodes.length),F=new Array(E.rels.length),V={},z=[];return E.nodes.forEach(function($,Y){I[Y]=[],F[Y]=[],z.push($)}),E.rels.forEach(function($){var Y=D[$.from],Z=D[$.to];Y!==void 0&&Z!==void 0&&(I[Y].push(Z),I[Z].push(Y),F[Y].push($.id),F[Z].push($.id),V[$.id]=$)}),this.relIdMap=F,{nodes:z,relationships:I,idToRel:V}}},{key:"coarsenTo",value:function(E){for(var D=this.graph,I=D.nodes.length,F=0;D.nodes.length>E&&D.relationships.some(function(z){return z.length>0});){var V=this.coarsen(D,F===0);if(F===0&&(this.nodeSortMap=V.nodeSortMap),this.subGraphs.push(V.sortedInput),(D=V.output).relationships.length===0||D.relationships.every(function(z){return z.length===0})||I===D.nodes.length)break;I=D.nodes.length,F+=1}return this.subGraphs.push(D),D}},{key:"coarsenBy",value:function(E){for(var D=E,I=this.graph,F=I.nodes.length,V=D;D>0;){var z=this.coarsen(I,D===V);if(this.subGraphs.push(z.sortedInput),(I=z.output).relationships.length===0||I.relationships.every(function($){return $.length===0})||F===I.nodes.length)break;F=I.nodes.length,D-=1}return this.subGraphs.push(I),I}},{key:"coarsen",value:function(E,D){var I=this,F=E.nodes,V=E.relationships,z=F.map(function(ze,Ke){return Ke}),$={},Y={};F.forEach(function(ze,Ke){$[Ke]=ze,Y[ze.id]=Ke});for(var Z=V.map(function(ze){return ze.slice()}),ie={suns:{},planets:{},moons:{}},le=[],ve=[],ue=function(){var ze=z[0];z.splice(z.indexOf(ze),1),V[ze].forEach(function(We){var it=z.indexOf(We);it>=0&&z.splice(it,1);var mt=-1,It=Z[We];It.forEach(function(bt,jt){var Ct=z.indexOf(bt);Ct>=0?z.splice(Ct,1):bt===ze&&(mt=jt)}),It.splice(mt,1)});var Ke={id:ze};if(D)Ke.originalId=$[ze].id;else{var Xe=$[ze];Ke.finestIndex=Xe.finestIndex,Ke.originalId=Xe.originalId}le.push(Ke),ie.suns[ze]=Ke};z.length>0;)ue();le.forEach(function(ze,Ke){ve[Ke]=[]}),le.forEach(function(ze,Ke){var Xe={},We=[];V[ze.id].forEach(function(it){if(it!==ze.id&&!Xe[it]){var mt={id:it,parent:ze,sunId:Ke,moons:[]},It=$[it];mt.size=function(){return mt.moons.length+1},mt.weight=It.weight||1,mt.children=function(){return mt.moons},D?mt.originalId=It.id:(mt.finestIndex=It.finestIndex,mt.originalId=It.originalId),We.push(mt),Xe[it]=!0}}),We.forEach(function(it){ie.planets[it.id]=it}),ze.planets=We,ze.children=function(){return ze.planets},ze.weight=ze.planets.reduce(function(it,mt){return it+(mt.weight||1)},0)+($[ze.id].weight||1),ze.size=function(){return ze.planets.reduce(function(it,mt){return it+mt.size()},0)+1}});var ge=F.filter(function(ze,Ke){return!le.find(function(Xe){return Xe.id===Ke})&&!ie.planets[Ke]});ge.forEach(function(ze){for(var Ke=Y[ze.id],Xe=Z[Ke],We=null,it=-1,mt=0;mt<Xe.length;mt++){var It=Xe[mt];if(It!==Ke&&(We=ie.planets[It])){it=mt;break}}if(Xe.splice(it,1),We){var bt={id:Ke,size:function(){return 0}};bt.weight=$[Ke].weight||1,bt.parent=We,bt.sunId=We.sunId,D?bt.originalId=ze.id:(bt.finestIndex=ze.finestIndex,bt.originalId=ze.originalId),ie.moons[Ke]=bt,We.moons.push(bt),We.weight+=bt.weight,We.parent.weight+=bt.weight;var jt=Z[We.id];jt.splice(jt.indexOf(Ke),1)}}),Z.forEach(function(ze,Ke){if(!ie.suns[Ke]){var Xe=ie.planets[Ke]||ie.moons[Ke];Z[Ke].forEach(function(We){var it=ie.planets[We];if(it||(it=ie.moons[We]),Xe.sunId!==it.sunId){var mt=ve[Xe.sunId];mt.includes(it.sunId)||mt.push(it.sunId)}})}});var Ce=[],Re=0,je={};le.forEach(function(ze,Ke){var Xe=F[ze.id];je[ze.id]=Re,ze.previousIndex=Ke,ze.id=Re,Re+=1,D&&(Xe.finestIndex=ze.id,ze.finestIndex=ze.id),Ce.push(Xe),ze.planets.forEach(function(We){var it=F[We.id];je[We.id]=Re,We.id=Re,Re+=1,We.sunId=ze.id,D&&(it.finestIndex=We.id),I.sunMap[We.originalId]=ze.originalId,Ce.push(it),We.moons.forEach(function(mt){var It=F[mt.id];je[mt.id]=Re,mt.id=Re,Re+=1,mt.sunId=ze.id,D&&(It.finestIndex=mt.id),I.sunMap[mt.originalId]=ze.originalId,Ce.push(It)})})});var ke=[],Ye=[];return V.forEach(function(ze,Ke){var Xe=je[Ke];ke[Xe]=ze.map(function(We){return je[We]}),D&&(Ye[Xe]=ze.map(function(We,it){return I.relIdMap[Ke][it]}))}),Ye&&Ye.length>0&&(this.relIdMap=Ye),{output:{nodes:le,relationships:ve},sortedInput:{nodes:Ce,relationships:ke},nodeSortMap:je}}}],x&&Jg(m.prototype,x),Object.defineProperty(m,"prototype",{writable:!1}),g}(),jf=function(g,m,x){for(var E=2*Math.PI/x,D=[],I=0;I<x;I++){var F=E*I;D.push({x:g.x+m*Math.cos(F),y:g.y+m*Math.sin(F)})}return D};function kl(g){return kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},kl(g)}function Ga(g,m){var x=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!x){if(Array.isArray(g)||(x=function(z,$){if(z){if(typeof z=="string")return iv(z,$);var Y=Object.prototype.toString.call(z).slice(8,-1);return Y==="Object"&&z.constructor&&(Y=z.constructor.name),Y==="Map"||Y==="Set"?Array.from(z):Y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Y)?iv(z,$):void 0}}(g))||m){x&&(g=x);var E=0,D=function(){};return{s:D,n:function(){return E>=g.length?{done:!0}:{done:!1,value:g[E++]}},e:function(z){throw z},f:D}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I,F=!0,V=!1;return{s:function(){x=x.call(g)},n:function(){var z=x.next();return F=z.done,z},e:function(z){V=!0,I=z},f:function(){try{F||x.return==null||x.return()}finally{if(V)throw I}}}}function iv(g,m){(m==null||m>g.length)&&(m=g.length);for(var x=0,E=new Array(m);x<m;x++)E[x]=g[x];return E}function ma(g,m){for(var x=0;x<m.length;x++){var E=m[x];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,Wh(E.key),E)}}function tr(g,m,x){return(m=Wh(m))in g?Object.defineProperty(g,m,{value:x,enumerable:!0,configurable:!0,writable:!0}):g[m]=x,g}function Wh(g){var m=function(x,E){if(kl(x)!="object"||!x)return x;var D=x[Symbol.toPrimitive];if(D!==void 0){var I=D.call(x,"string");if(kl(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(g);return kl(m)=="symbol"?m:String(m)}var _o="PhysLayout",wo=new Float32Array(4),ba=256,Ff=function(g){for(var m={},x={},E=0;E<g.length;E++)m[g[E].id]=E,x[E]=g[E].id;return{nodeIdToIndex:m,nodeIndexToId:x}},kp=function(){function g(E){var D=this;(function(ie,le){if(!(ie instanceof le))throw new TypeError("Cannot call a class as a function")})(this,g),tr(this,"physVbo",void 0),tr(this,"physSmallVbo",void 0),tr(this,"physProjection",void 0),tr(this,"physSmallProjection",void 0),tr(this,"gl",void 0),tr(this,"useReadpixelWorkaround",void 0),tr(this,"averageNodeSize",void 0),tr(this,"shouldUpdate",void 0),tr(this,"iterationCount",void 0),tr(this,"lastSpeedValues",void 0),tr(this,"rollingAvgGraphSpeed",void 0),tr(this,"nodeVariation",void 0),tr(this,"nodeCenterPoint",void 0),tr(this,"peakIterationMultiplier",void 0),tr(this,"stateDisposers",void 0),tr(this,"state",void 0),tr(this,"dpr",void 0),tr(this,"intelWorkaround",void 0),tr(this,"simulationStopVelocitySquared",void 0),tr(this,"gravity",void 0),tr(this,"force",void 0),tr(this,"nodeIdToIndex",void 0),tr(this,"nodeIndexToId",void 0),tr(this,"numNodes",void 0),tr(this,"solarMerger",void 0),tr(this,"subGraphs",void 0),tr(this,"nodeSortMap",void 0),tr(this,"firstUpdate",void 0),tr(this,"curPhysData",void 0),tr(this,"apprxRepForceShader",void 0),tr(this,"levelsClusterTexture",void 0),tr(this,"levelsFinestIndexTexture",void 0),tr(this,"initalLevelTexture",void 0),tr(this,"levelsData",void 0),tr(this,"collisionDetectionMultiplier",void 0),tr(this,"physShader",void 0),tr(this,"physData",void 0),tr(this,"workaroundData",void 0),tr(this,"pinData",void 0),tr(this,"updateData",void 0),tr(this,"updateShader",void 0),tr(this,"workaroundShader",void 0),tr(this,"physPositions",void 0),tr(this,"springTexture",void 0),tr(this,"sizeTexture",void 0),tr(this,"offsetTexture",void 0),tr(this,"pinTexture",void 0),tr(this,"addedNodes",void 0),tr(this,"updateTexture",void 0),tr(this,"enableVerlet",void 0);var I=E.state,F=E.webGLContext;if(Br.info("layout - webGLContext",!!F),E.webGLContext===void 0)throw new Error("PhysLayout missing options: webGLContext - webgl context");if(E.state===void 0)throw new Error("PhysLayout missing options: state - state object");var V=F;this.checkCompatibility(V),this.printGlStats(V),this.physVbo=V.createBuffer(),V.bindBuffer(V.ARRAY_BUFFER,this.physVbo);var z=new Float32Array([0,0,Qt,0,0,Qt,Qt,Qt]);V.bufferData(V.ARRAY_BUFFER,z,V.STATIC_DRAW),this.physSmallVbo=V.createBuffer(),V.bindBuffer(V.ARRAY_BUFFER,this.physSmallVbo);var $=new Float32Array([0,0,ba,0,0,ba,ba,ba]);V.bufferData(V.ARRAY_BUFFER,$,V.STATIC_DRAW),this.physProjection=du(),Ms(this.physProjection,0,Qt,Qt,0,0,1e6),this.physSmallProjection=du(),Ms(this.physSmallProjection,0,ba,ba,0,0,1e6),V.disable(V.DEPTH_TEST),this.gl=V,this.useReadpixelWorkaround&&this.setupReadpixelWorkaround(),this.setupUpdates(),this.averageNodeSize=Qn,this.shouldUpdate=!0,this.iterationCount=0,this.lastSpeedValues=[],this.rollingAvgGraphSpeed=0,this.nodeVariation=0,this.nodeCenterPoint=[0,0],this.peakIterationMultiplier=160,this.setOptions(E,!0),this.definePhysicsArrays();var Y=I.nodes,Z=I.rels;Y.addChannel(_o),Z.addChannel(_o),this.stateDisposers=[],this.stateDisposers.push(I.reaction(function(){return I.graphUpdates},function(){var ie=Y.channels[_o];if(Y.version!==void 0&&ie){var le=Object.values(ie.adds).length>0,ve=Object.values(ie.removes).length>0,ue=Object.values(ie.updates),ge=ce(ue);(le||ve||ge)&&(D.shouldUpdate=!0,D.checkForUpdates())}var Ce=Z.channels[_o];if(Z.version!==void 0&&Ce){var Re=Object.values(Ce.adds).length>0,je=Object.values(Ce.removes).length>0;(Re||je)&&(D.shouldUpdate=!0,D.checkForUpdates())}})),this.setData({nodes:Y.items,rels:Z.items}),this.state=I,this.dpr=window.devicePixelRatio||1}var m,x;return m=g,x=[{key:"setOptions",value:function(E){var D=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(E){var I=E.intelWorkaround,F=E.simulationStopVelocity,V=E.gravity,z=E.enableVerlet,$=z!==void 0&&z;D&&(this.intelWorkaround=I,this.enableVerlet=$);var Y=this.enableVerlet?.25:F??100;this.simulationStopVelocitySquared=Y*Y,this.gravity=V??100,this.force=0}}},{key:"setData",value:function(E){var D=Ff(E.nodes),I=D.nodeIdToIndex,F=D.nodeIndexToId;return this.nodeIdToIndex=I,this.nodeIndexToId=F,this.numNodes=E.nodes.length,this.solarMerger=new Ip(E,I),this.solarMerger.coarsenTo(1),this.subGraphs=this.solarMerger.subGraphs,this.nodeSortMap=this.solarMerger.nodeSortMap,this.setupSprings(this.subGraphs[0]),this.setupSize(this.subGraphs[0]),this.setupPhysics(),this.firstUpdate=!0,this.curPhysData=0,this.shouldUpdate=!0,this.iterationCount=0,this.subGraphs[0]}},{key:"update",value:function(){var E=arguments.length>0&&arguments[0]!==void 0&&arguments[0],D=this.gl;if(this.checkForUpdates(E),!this.shouldUpdate)return D.bindFramebuffer(D.FRAMEBUFFER,this.getPhysData(0).frameBuffer),D.readPixels(0,0,Qt,Qt,D.RGBA,D.FLOAT,this.physPositions),!1;D.disable(D.BLEND);for(var I=this.nodeVariation/(this.numNodes||1)>.3,F=this.getScaleNumber(this.iterationCount),V=this.subGraphs?this.subGraphs.length:0,z=this.getPhysData(0).texture,$=V-1;$>0;$--){var Y=this.subGraphs[$].nodes.length,Z=$===V-1;this.apprxRepForceShader.use(),this.apprxRepForceShader.setUniform("u_physData",z),this.apprxRepForceShader.setUniform("u_clusterData",this.levelsClusterTexture[$]),this.apprxRepForceShader.setUniform("u_finestIndexes",this.levelsFinestIndexTexture[$]),this.apprxRepForceShader.setUniform("u_prevForce",Z?this.initalLevelTexture:this.levelsData[$+1].texture),this.apprxRepForceShader.setUniform("u_numNodes",Y),this.apprxRepForceShader.setUniform("u_iterationMultiplier",F),this.apprxRepForceShader.setUniform("u_baseLength",this.getBaseLength(Y)),this.apprxRepForceShader.setUniform("u_isTopLevel",Z?1:0),D.bindBuffer(D.ARRAY_BUFFER,this.physSmallVbo),this.apprxRepForceShader.setAttributePointer("a_position",2,0,2),D.bindFramebuffer(D.FRAMEBUFFER,this.levelsData[$].frameBuffer),D.viewport(0,0,ba,ba),D.drawArrays(D.TRIANGLE_STRIP,0,4)}if(this.collisionDetectionMultiplier=0,this.collisionDetectionMultiplier=I?Math.min(this.iterationCount/Math.min(this.numNodes,300),1):1,this.force=V<=1?this.initalLevelTexture:this.levelsData[1].texture,this.physShader.use(),this.physShader.setUniform("u_prevForce",V<=1?this.initalLevelTexture:this.levelsData[1].texture),this.physShader.setUniform("u_connections",this.springTexture),this.physShader.setUniform("u_sizeTexture",this.sizeTexture),this.physShader.setUniform("u_connectionOffsets",this.offsetTexture),this.physShader.setUniform("u_physData",z),this.physShader.setUniform("u_pinnedNodes",this.pinTexture),this.physShader.setUniform("u_iterationMultiplier",F),this.physShader.setUniform("u_curIteration",this.iterationCount),this.physShader.setUniform("u_numNodes",this.numNodes),this.physShader.setUniform("u_clusterData",this.levelsClusterTexture[0]),this.physShader.setUniform("u_collisionMultiplier",this.collisionDetectionMultiplier),this.physShader.setUniform("u_baseLength",this.getBaseLength()),this.firstUpdate=!1,D.bindBuffer(D.ARRAY_BUFFER,this.physVbo),this.physShader.setAttributePointer("a_position",2,0,2),D.bindFramebuffer(D.FRAMEBUFFER,this.getPhysData(1).frameBuffer),D.viewport(0,0,Qt,Qt),D.drawArrays(D.TRIANGLE_STRIP,0,4),this.useReadpixelWorkaround?this.doReadpixelWorkaround():(D.bindFramebuffer(D.FRAMEBUFFER,this.getPhysData(0).frameBuffer),D.readPixels(0,0,Qt,Qt,D.RGBA,D.FLOAT,this.physPositions)),this.curPhysData=(this.curPhysData+1)%this.physData.length,this.iterationCount+=1,this.numNodes<2)this.shouldUpdate=!1,this.iterationCount=0;else if(this.iterationCount%5==0){var ie=this.iterationCount<300,le=ie?this.getMaxSpeedSquared():this.getMedianSpeedSquared(this.addedNodes);this.lastSpeedValues.push(le),this.rollingAvgGraphSpeed=this.lastSpeedValues.reduce(function(ge,Ce){return ge+Ce},0)/this.lastSpeedValues.length;var ve=ie&&le>=this.rollingAvgGraphSpeed,ue=this.simulationStopVelocitySquared&&this.rollingAvgGraphSpeed<this.simulationStopVelocitySquared;this.lastSpeedValues.length>20&&this.lastSpeedValues.shift(),!ve&&ue===!0&&this.iterationCount>2&&this.terminateUpdate()}return this.shouldUpdate}},{key:"terminateUpdate",value:function(){Br.info("Cooling down after ".concat(this.iterationCount," iterations at graph speed of ").concat(Math.sqrt(this.rollingAvgGraphSpeed))),this.shouldUpdate=!1,this.iterationCount=0,this.rollingAvgGraphSpeed=0,this.lastSpeedValues=[],this.addedNodes=null,this.nodeVariation=0}},{key:"getShouldUpdate",value:function(){return this.shouldUpdate}},{key:"getComputing",value:function(){return!1}},{key:"getNodePositions",value:function(E){var D=[];if(this.useReadpixelWorkaround){var I,F=Ga(E);try{for(F.s();!(I=F.n()).done;){var V=I.value,z=this.nodeIdToIndex[V.id],$=V.id,Y=void 0,Z=void 0;z!==void 0&&(Y=this.workaroundData[0].dataFloat[z],Z=this.workaroundData[1].dataFloat[z]),D.push({id:$,x:Y,y:Z})}}catch(je){F.e(je)}finally{F.f()}}else{var ie,le=Ga(E);try{for(le.s();!(ie=le.n()).done;){var ve=ie.value,ue=this.nodeIdToIndex[ve.id],ge=ve.id,Ce=void 0,Re=void 0;ue!==void 0&&(Ce=this.physPositions[4*ue+0],Re=this.physPositions[4*ue+1]),D.push({id:ge,x:Ce,y:Re})}}catch(je){le.e(je)}finally{le.f()}}return D}},{key:"reheat",value:function(E){this.setupSize(this.subGraphs[0]),this.shouldUpdate=!0,this.iterationCount=0,this.nodeVariation=E.nodes.length}},{key:"updateNodes",value:function(E){var D=this.gl,I=new Set;D.bindTexture(D.TEXTURE_2D,this.getPhysData().texture);var F,V=Ga(E);try{for(V.s();!(F=V.n()).done;){var z=F.value,$=this.nodeIdToIndex[z.id];if(z.x!==void 0&&z.y!==void 0){wo[0]=z.x,wo[1]=z.y,wo[2]=0,wo[3]=0;var Y=$%Qt,Z=($-Y)/Qt;D.texSubImage2D(D.TEXTURE_2D,0,Y,Z,1,1,D.RGBA,D.FLOAT,wo),this.useReadpixelWorkaround?(this.workaroundData[0].dataFloat[$]=z.x,this.workaroundData[1].dataFloat[$]=z.y):(this.physPositions[4*$+0]=z.x,this.physPositions[4*$+1]=z.y)}z.pinned!==void 0&&(this.pinData[$]=z.pinned?255:0),Object.keys(z).forEach(function(ie){return I.add(ie)})}}catch(ie){V.e(ie)}finally{V.f()}I.has("pinned")&&(D.bindTexture(D.TEXTURE_2D,this.pinTexture),D.texImage2D(D.TEXTURE_2D,0,D.ALPHA,Qt,Qt,0,D.ALPHA,D.UNSIGNED_BYTE,this.pinData)),(I.has("x")||I.has("y")||I.has("size"))&&(this.shouldUpdate=!0,this.iterationCount=0)}},{key:"addRemoveData",value:function(E,D){var I=this.gl;this.numNodes=E.nodes.length,this.physShader.use(),this.physShader.setUniform("u_numNodes",this.numNodes),this.physShader.setUniform("u_baseLength",this.getBaseLength());var F=Ff(E.nodes).nodeIdToIndex,V=new Ip(E,F);V.coarsenTo(1);var z=V.subGraphs[0],$=this.subGraphs[0],Y=function(Ct){return $.nodes.findIndex(function(Ee){return Ee.id===Ct})},Z=Object.values(D.adds),ie=Object.values(D.removes);this.addedNodes=Z.length>0?{}:null,this.nodeVariation=Z.length+ie.length;for(var le,ve=3*Math.sqrt(E.nodes.length),ue={x:0,y:0},ge=z.nodes.length,Ce=new Uint8Array(65536),Re=0;Re<ge;Re++){var je=0,ke=0,Ye=z.nodes[Re];if(le=Ye.id,!!D.adds[le]){if(this.addedNodes[Re]=Ye.id,je=Ye.position?Ye.position.x:void 0,ke=Ye.position?Ye.position.y:void 0,je===void 0||ke===void 0){var ze=V.sunMap,Ke=void 0;for(Ke=ze[Ye.id];Ke!==void 0;Ke=ze[Ke]){var Xe=Y(Ke);if(Xe!==-1){var We=this.getNodePosition(Xe);je=We.x+10*(Math.random()-.5),ke=We.y+10*(Math.random()-.5);break}}Ke===void 0&&(je=this.nodeCenterPoint[0]+ve*(Math.random()-.5),ke=this.nodeCenterPoint[1]+ve*(Math.random()-.5))}this.updateData[2*Re]=je,this.updateData[2*Re+1]=ke,Ce[Re]=Ye.pinned?255:0}else{var it=Y(Ye.id),mt=this.getNodePosition(it);je=mt.x,ke=mt.y,this.updateData[2*Re]=it,this.updateData[2*Re+1]=999999,Ce[Re]=this.pinData[it]}ue.x+=je||0,ue.y+=ke||0}this.nodeCenterPoint=ge?[ue.x/ge,ue.y/ge]:[0,0],this.pinData=Ce,this.subGraphs=V.subGraphs,this.nodeSortMap=V.nodeSortMap,this.setupSprings(this.subGraphs[0]),this.setupSize(this.subGraphs[0]);var It=Ff(this.subGraphs[0].nodes),bt=It.nodeIdToIndex,jt=It.nodeIndexToId;return this.nodeIdToIndex=bt,this.nodeIndexToId=jt,I.bindTexture(I.TEXTURE_2D,this.updateTexture),I.texImage2D(I.TEXTURE_2D,0,I.ALPHA,Qt,Qt,0,I.ALPHA,I.FLOAT,this.updateData),Br.info("Setting gravity center to ",this.nodeCenterPoint),this.physShader.setUniform("u_gravityCenter",this.nodeCenterPoint),this.updateShader.use(),this.updateShader.setUniform("u_numNodesNew",z.nodes.length),this.updateShader.setUniform("u_physData",this.getPhysData(0).texture),this.updateShader.setUniform("u_updateData",this.updateTexture),I.disable(I.BLEND),I.bindBuffer(I.ARRAY_BUFFER,this.physVbo),this.updateShader.setAttributePointer("a_position",2,0,2),I.bindFramebuffer(I.FRAMEBUFFER,this.getPhysData(1).frameBuffer),I.viewport(0,0,Qt,Qt),I.drawArrays(I.TRIANGLE_STRIP,0,4),this.curPhysData=(this.curPhysData+1)%this.physData.length,this.useReadpixelWorkaround?this.doReadpixelWorkaround():(I.bindFramebuffer(I.FRAMEBUFFER,this.getPhysData().frameBuffer),I.readPixels(0,0,Qt,Qt,I.RGBA,I.FLOAT,this.physPositions)),(Z.length>0||ie.length>0)&&(I.bindTexture(I.TEXTURE_2D,this.pinTexture),I.texImage2D(I.TEXTURE_2D,0,I.ALPHA,Qt,Qt,0,I.ALPHA,I.UNSIGNED_BYTE,this.pinData)),this.shouldUpdate=!0,this.iterationCount=0,this.setupPhysicsForCoarse(),this.subGraphs[0]}},{key:"destroy",value:function(){var E=this;this.gl.deleteBuffer(this.physVbo),this.gl.deleteBuffer(this.physSmallVbo),this.physData.forEach(function(D){E.gl.deleteFramebuffer(D.frameBuffer),E.gl.deleteTexture(D.texture)}),this.levelsData.forEach(function(D){E.gl.deleteFramebuffer(D.frameBuffer),E.gl.deleteTexture(D.texture)}),this.levelsClusterTexture.forEach(function(D){E.gl.deleteTexture(D)}),this.levelsFinestIndexTexture.forEach(function(D){E.gl.deleteTexture(D)}),this.gl.deleteTexture(this.initalLevelTexture),this.gl.deleteTexture(this.sizeTexture),this.gl.deleteTexture(this.offsetTexture),this.gl.deleteTexture(this.springTexture),this.gl.deleteTexture(this.pinTexture),this.gl.deleteTexture(this.updateTexture),this.apprxRepForceShader!==void 0&&this.apprxRepForceShader.remove(),this.updateShader!==void 0&&this.updateShader.remove(),this.physShader!==void 0&&this.physShader.remove(),this.physPositions=null,this.gl=null,this.stateDisposers.forEach(function(D){D()}),this.state.nodes.removeChannel(_o),this.state.rels.removeChannel(_o)}},{key:"dumpTexture",value:function(E,D,I){var F=this.gl;Br.info("--- Dumping texture ",I),F.bindFramebuffer(F.FRAMEBUFFER,E),F.readPixels(0,0,Qt,Qt,F.RGBA,F.FLOAT,this.physPositions);for(var V=0;V<D;V++)Br.info(V,": ",this.physPositions[4*V+0],this.physPositions[4*V+1],this.physPositions[4*V+2],this.physPositions[4*V+3])}},{key:"getScaleNumber",value:function(E){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(I,F,V){return V+Math.pow(10,6)*Math.pow(I-120,-1.7)};return E===0?0:E<300?200+-1/Math.pow(10,5)*3*Math.pow(Math.abs(E-200+12),3):D(E,200,10)}},{key:"getBaseLength",value:function(E){if(E===void 0||E===this.numNodes)return 100*this.dpr;var D=Math.pow(this.averageNodeSize/2,2)*Math.PI,I=this.numNodes/E*D;return(100+Math.sqrt(I/Math.PI)/2/E)*this.dpr}},{key:"checkForUpdates",value:function(){var E=arguments.length>0&&arguments[0]!==void 0&&arguments[0],D=this.state,I=D.nodes,F=D.rels,V={nodes:I.items,rels:F.items},z=Object.values(I.channels[_o].adds).length>0,$=Object.values(F.channels[_o].adds).length>0,Y=Object.values(I.channels[_o].removes).length>0,Z=Object.values(F.channels[_o].removes).length>0,ie=Object.values(I.channels[_o].updates);(z||$||Y||Z)&&this.addRemoveData(V,{adds:I.channels[_o].adds,removes:I.channels[_o].removes}),E?(this.updateNodes(V.nodes),this.reheat(V)):ie.length>0&&(this.updateNodes(ie),ce(ie)&&this.reheat(V)),I.clearChannel(_o),F.clearChannel(_o)}},{key:"getNodePosition",value:function(E){return this.useReadpixelWorkaround?{x:this.workaroundData[0].dataFloat[E],y:this.workaroundData[1].dataFloat[E]}:{x:this.physPositions[4*E+0],y:this.physPositions[4*E+1]}}},{key:"getMaxSpeedSquared",value:function(){var E=0;if(this.useReadpixelWorkaround)for(var D=0;D<this.numNodes;D++){var I=this.workaroundData[2].dataFloat[D],F=this.workaroundData[3].dataFloat[D],V=I*I+F*F;V>E&&(E=V)}else for(var z=0;z<this.numNodes;z++){var $=this.physPositions[4*z+2],Y=this.physPositions[4*z+3],Z=$*$+Y*Y;Z>E&&(E=Z)}return E}},{key:"getMedianSpeedSquared",value:function(E){var D=[];if(this.useReadpixelWorkaround)for(var I=0;I<this.numNodes;I++){var F=this.workaroundData[2].dataFloat[I],V=this.workaroundData[3].dataFloat[I],z=F*F+V*V;D[I]=z}else for(var $=0;$<this.numNodes;$++)if(!E||E[$]){var Y=this.physPositions[4*$+2],Z=this.physPositions[4*$+3],ie=Y*Y+Z*Z;D.push(ie)}return D.sort(function(le,ve){return le-ve}),D[Math.floor(D.length/2)]}},{key:"getPhysData",value:function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.physData[(this.curPhysData+E)%this.physData.length]}},{key:"newTexture",value:function(E,D,I){var F=arguments.length>3&&arguments[3]!==void 0?arguments[3]:E.FLOAT,V=arguments.length>4&&arguments[4]!==void 0?arguments[4]:E.RGBA,z=E.createTexture();return E.bindTexture(E.TEXTURE_2D,z),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.NEAREST),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,E.NEAREST),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),E.texImage2D(E.TEXTURE_2D,0,V,I,I,0,V,F,D),z}},{key:"newFramebuffer",value:function(E,D){var I=E.createFramebuffer();return E.bindFramebuffer(E.FRAMEBUFFER,I),E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_2D,D,0),I}},{key:"checkCompatibility",value:function(E){function D(Y){throw new Il(Y)}E||D("Could not initialize WebGL"),E.getParameter(E.MAX_VERTEX_TEXTURE_IMAGE_UNITS)===0&&D("Vertex shader texture access not available"),E.getExtension("OES_texture_float")||D("OES_texture_float extension not available"),E.getExtension("WEBGL_color_buffer_float")||(Br.info("gl.readPixels doesnt work for float texture, activating workaround"),this.useReadpixelWorkaround=!0);var I=E.getParameter(E.MAX_TEXTURE_SIZE),F=Math.max(Qt,so);if(I<F&&D("Need larger WebGL texture support. Avaliable: ".concat(I," needed: ").concat(F)),!this.useReadpixelWorkaround){var V=new Float32Array(4),z=this.newTexture(E,V,1),$=this.newFramebuffer(E,z);E.bindFramebuffer(E.FRAMEBUFFER,$),E.readPixels(0,0,1,1,E.RGBA,E.FLOAT,V),E.getError()!==E.NO_ERROR&&(Br.info("gl.readPixels doesnt work for float texture, activating workaround"),this.useReadpixelWorkaround=!0),E.bindFramebuffer(E.FRAMEBUFFER,null),E.deleteFramebuffer($),E.deleteTexture(z)}}},{key:"printGlStats",value:function(E){var D="?",I="?";if(E.getParameter(E.RENDERER))I=E.getParameter(E.RENDERER),D=E.getParameter(E.VENDOR);else{var F=E.getExtension("WEBGL_debug_renderer_info");F&&(D=E.getParameter(F.UNMASKED_VENDOR_WEBGL),I=E.getParameter(F.UNMASKED_RENDERER_WEBGL))}Br.trace("Vendor: ".concat(D)),Br.trace("Renderer: ".concat(I));var V=E.getParameter(E.ALIASED_LINE_WIDTH_RANGE);Br.trace("Line width range: ".concat(V));var z=E.getSupportedExtensions();Br.trace("Extentions:"),z.length>0&&z.forEach(function($){return Br.trace($)})}},{key:"adjustToGlSize",value:function(E){return E*this.dpr*2.5}},{key:"setupSize",value:function(){for(var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{nodes:[]},D=new Float32Array(65536),I=E.nodes,F=I.length,V=0,z=0;z<F;z++){var $,Y=parseInt(($=I[z].size)!==null&&$!==void 0?$:Qn,10);D[z]=this.adjustToGlSize(Y),V+=Y}this.averageNodeSize=F?V/F:Qn;var Z=this.gl;this.sizeTexture===void 0&&(this.sizeTexture=Z.createTexture()),Z.bindTexture(Z.TEXTURE_2D,this.sizeTexture),Z.texImage2D(Z.TEXTURE_2D,0,Z.ALPHA,Qt,Qt,0,Z.ALPHA,Z.FLOAT,D),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MAG_FILTER,Z.NEAREST),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MIN_FILTER,Z.NEAREST),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_S,Z.CLAMP_TO_EDGE),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_T,Z.CLAMP_TO_EDGE)}},{key:"setupSprings",value:function(E){var D,I,F=this.gl,V=E.relationships,z=new Float32Array(16777216),$=new Float32Array(65536),Y=0;for(D=0;D<E.nodes.length;D++)for($[D]=Y,z[Y]=V[D].length,Y+=1,I=0;I<V[D].length;I++)z[Y]=V[D][I],Y+=1;for(I=Y;I<z.length;I++)z[I]=1;for(I=D;I<$.length;I++)$[I]=0;this.offsetTexture===void 0&&(this.offsetTexture=F.createTexture()),F.bindTexture(F.TEXTURE_2D,this.offsetTexture),F.texImage2D(F.TEXTURE_2D,0,F.ALPHA,Qt,Qt,0,F.ALPHA,F.FLOAT,$),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MAG_FILTER,F.NEAREST),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MIN_FILTER,F.NEAREST),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_S,F.CLAMP_TO_EDGE),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_T,F.CLAMP_TO_EDGE),this.springTexture===void 0&&(this.springTexture=F.createTexture()),F.bindTexture(F.TEXTURE_2D,this.springTexture),F.texImage2D(F.TEXTURE_2D,0,F.ALPHA,so,so,0,F.ALPHA,F.FLOAT,z),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MAG_FILTER,F.NEAREST),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MIN_FILTER,F.NEAREST),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_S,F.CLAMP_TO_EDGE),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_T,F.CLAMP_TO_EDGE)}},{key:"setupPhysics",value:function(){this.setupPhysicsForCoarse(),this.setupPhysicsForNodes(),this.physPositions=new Float32Array(262144),this.setupPinData()}},{key:"setupPhysicsForNodes",value:function(){var E=this.gl,D=this.subGraphs.length,I=this.subGraphs[0].nodes,F=3*Math.sqrt(I.length),V=new Float32Array(262144),z=new Float32Array(262144);this.numNodes=I.length;for(var $=0;$<262144;$++)V[$]=0,z[$]=0;for(var Y=function(Ce,Re,je,ke){ke[4*Ce+0]=Re,ke[4*Ce+1]=je,ke[4*Ce+2]=0,ke[4*Ce+3]=0},Z=D-1;Z>=0;Z--){var ie=Z===D-1?[]:this.subGraphs[Z+1].nodes;ie.length===0?this.subGraphs[Z].nodes.forEach(function(Ce,Re){var je=Ce.placement?Ce.placement.x:F*(Math.random()-.5),ke=Ce.placement?Ce.placement.y:F*(Math.random()-.5);Y(Ce.finestIndex===void 0?Re:Ce.finestIndex,je,ke,V)}):ie.forEach(function(Ce){var Re=Ce.finestIndex,je=V[4*Ce.finestIndex],ke=V[4*Ce.finestIndex+1],Ye=jf({x:je,y:ke},10,Ce.planets.length+1);Re+=1,Ce.planets.forEach(function(ze,Ke){var Xe=Ye[Ke];Y(Re+=1,Xe.x,Xe.y,V);var We=jf({x:Xe.x,y:Xe.y},10,ze.moons.length+1);ze.moons.forEach(function(it,mt){var It=We[mt];Y(Re+=1,It.x,It.y,V)})})})}this.physData=[];for(var le=0;le<2;le++){var ve=this.newTexture(E,le===0?V:z,Qt),ue=this.newFramebuffer(E,ve);this.physData.push({texture:ve,frameBuffer:ue})}var ge=this.enableVerlet?`precision mediump float;

uniform sampler2D u_physData;
uniform sampler2D u_connections;
uniform sampler2D u_connectionOffsets;
uniform sampler2D u_pinnedNodes;
uniform sampler2D u_sizeTexture;
uniform float u_baseLength;
uniform float u_curIteration;
uniform float u_iterationMultiplier;
uniform vec2 u_gravityCenter;
uniform float u_numNodes;
uniform float u_gravity;

uniform sampler2D u_clusterData;
uniform sampler2D u_prevForce;
uniform float u_collisionMultiplier;


float DAMP = 0.6;
float COOL = 0.99998;
float TEMP = max(0.02, pow(COOL, u_curIteration));
float TIMESTEP = 1.0 / 30.0;
float VELOCITYDECAY = 0.6;
float accLimitLow = 500000.0;
float accLimitHigh = 750000.0;
float accLimitPosHigh = 10000000.0;

const float denseNodeThreshold = 1000.0;
const float MIN_DISTANCE = 0.00000001;
const float MAX_DISTANCE = 1000000000.0;
const float MAX_ACCELERATION = 50000.0;

vec4 getTextureData(sampler2D texture, float index, float base) {
  float x = mod(index, base);
  float y = (index - x) / base;
  return texture2D(texture, vec2(x + 0.5, y + 0.5) / base);
}

bool isNan(float val) {
  return (val < 0.0 || 0.0 < val || val == 0.0) ? false : true;
}

const float BIG_NUMBER = 999999999999999999.0;
bool isInf(float val) {
  return val > BIG_NUMBER || val < -BIG_NUMBER;
}

vec2 getDelta(vec2 v1, vec2 v2) {
  vec2 delta = v1 - v2;
  float dist = length(delta);
  if (dist < MIN_DISTANCE || isNan(dist)) {
    return vec2(MIN_DISTANCE, MIN_DISTANCE);
  }
  if (dist > MAX_DISTANCE) {
    vec2 normDelta = delta / dist;
    return normDelta * MAX_DISTANCE;
  }
  return delta;
}

vec4 getOtherNodePosition(float i) {
  return getTextureData(u_physData, i, 256.0);
}

float getCombinedNodeSize(float i, float nodeSize) {
  float otherNodeSize = getTextureData(u_sizeTexture, i, 256.0).a;
  return nodeSize + otherNodeSize;
}

vec2 getSpringForce(float curConnection, float numConnections, float springFScale, vec4 myPosition, float i) {
  float curSpring = getTextureData(u_connections, curConnection + i, 4096.0).a;

  vec4 otherPosition = getTextureData(u_physData, curSpring, 256.0);
  float otherDataPosition = getTextureData(u_connectionOffsets, curSpring, 256.0).a;
  float avgDegree;
#if INTEL_WORKAROUND
    avgDegree = max(numConnections, 4.0);
#else
    float otherNumConnections = getTextureData(u_connections, otherDataPosition, 4096.0).a;
    avgDegree = max((otherNumConnections + numConnections * 3.0) / 4.0, 4.0);
#endif

  vec2 delta = getDelta(myPosition.xy, otherPosition.xy);
  float dist = length(delta);

  float F = (dist * dist * springFScale) / (u_baseLength * avgDegree);
  if (u_collisionMultiplier > 0.0) {
    F *= u_collisionMultiplier;
  }
  return (-delta / dist) * F;
}

vec2 getCollisionForce(float combinedNodeSize, float dist, float fScale, vec2 delta) {
  float collisionForce = (combinedNodeSize - dist) / (dist);
  if (u_collisionMultiplier > 0.0) {
    collisionForce *= u_collisionMultiplier;
  }
  return (delta * collisionForce * fScale * combinedNodeSize) / (combinedNodeSize + 1.0);
}

vec2 getRepulsionForce(float dist, float fScale, vec2 delta) {
  float F = (u_baseLength * u_baseLength * fScale) / (dist);
  return (delta / dist) * F * 0.05;
}

void main(void) {
  float textureSide = 256.0; //#TEXTURE_SIDE#;
  float index = (gl_FragCoord.x - 0.5) + (gl_FragCoord.y - 0.5) * textureSide;

  if (index >= u_numNodes) {
    discard;
  }

  vec4 clusterData = getTextureData(u_clusterData, index, 256.0);

  float clusterIndex = clusterData.x;
  float clusterStartIndex = clusterData.y;
  float clusterSize = clusterData.z;
  float clusterWeight = clusterData.w;

  vec4 myPosition = getTextureData(u_physData, index, 256.0);
  vec4 previousForce = getTextureData(u_prevForce, clusterIndex, 256.0);

  vec2 acceleration = previousForce.xy;

  float isPinned = getTextureData(u_pinnedNodes, index, 256.0).a;
  float nodeSize = getTextureData(u_sizeTexture, index, 256.0).a;

  if (isPinned > 0.5) {
    gl_FragColor = vec4(myPosition.xy, 0.0, 0.0);
    return;
  }

  float curConnection = getTextureData(u_connectionOffsets, index, 256.0).a;
  float numConnections = getTextureData(u_connections, curConnection, 4096.0).a;

  float fScale = 1.0 + sqrt(u_iterationMultiplier);
  float springFScale = fScale;

  if (numConnections > denseNodeThreshold) {
    springFScale = sqrt(fScale);
  }

  float numOfRels = 0.0;

  // Springs
  for (float i = 1.0; i <= 256.0 * 256.0; i++) {
    if (numOfRels >= numConnections) {
      break;
    }
    acceleration += getSpringForce(curConnection, numConnections, springFScale, myPosition, i);
    numOfRels += 1.0;
  }

  // Repulsion && collision detection
  if (u_collisionMultiplier > 0.0) {
    float number_of_collisions = 0.0;
    for (float i = 0.0; i < 256.0 * 256.0; i++) {
      if (i >= u_numNodes) {
        break;
      }

      if (i == index) {
        continue;
      }

      vec4 otherPosition = getOtherNodePosition(i);
      vec2 delta = getDelta(myPosition.xy, otherPosition.xy);
      float dist = length(delta);
      float combinedNodeSize = getCombinedNodeSize(i, nodeSize) * 2.0;

      if (dist < combinedNodeSize && number_of_collisions < 40.0) {
        number_of_collisions++;
        acceleration += getCollisionForce(combinedNodeSize, dist, fScale, delta);
      }

      if (i >= clusterStartIndex && i < clusterStartIndex + clusterSize) {
        acceleration += getRepulsionForce(dist, fScale, delta);
      }
    }
  } else {
    for (float i = 0.0; i < 256.0 * 256.0; i++) {
      if (i >= clusterStartIndex + clusterSize || i >= u_numNodes) {
        break;
      }

      if (i < clusterStartIndex || i == index) {
        continue;
      }

      vec4 otherPosition = getOtherNodePosition(i);
      vec2 delta = getDelta(myPosition.xy, otherPosition.xy);
      float dist = length(delta);
      float combinedNodeSize = getCombinedNodeSize(i, nodeSize);

      if (dist < combinedNodeSize) {
        acceleration += getCollisionForce(combinedNodeSize, dist, fScale, delta);
      }

      acceleration += getRepulsionForce(dist, fScale, delta);
    }
  }

  // Gravity
  vec2 delta = getDelta(u_gravityCenter, myPosition.xy);
  float dist = length(delta);

  vec2 grav = (delta / dist) * u_gravity * fScale;
  acceleration += grav * smoothstep(0.0, 500.0, dist);

  float accMagnitude = length(acceleration);
  acceleration *= min(MAX_ACCELERATION, accMagnitude) / accMagnitude;

  float iterationFrictionThreshold = 1000.0;

  if (u_curIteration > iterationFrictionThreshold) {
    float friction = 1.0 + pow((u_curIteration - iterationFrictionThreshold), 2.0) / 100.0;
    acceleration *= 1.0 / friction;
  }

  if (u_curIteration == 0.0) {
    gl_FragColor = vec4(myPosition.xy, myPosition.zw);
  } else {
    vec2 prevVelocity = myPosition.zw;
    vec2 currentPos = myPosition.xy;
    vec2 prevPos = currentPos - prevVelocity;

    vec2 newPos = currentPos + TEMP * ( DAMP * (prevVelocity) + acceleration * TIMESTEP * TIMESTEP);
    vec2 newVelocity = newPos - currentPos;
    gl_FragColor = vec4(newPos, newVelocity);
  }
}`:`precision mediump float;

uniform sampler2D u_physData;
uniform sampler2D u_connections;
uniform sampler2D u_connectionOffsets;
uniform sampler2D u_pinnedNodes;
uniform sampler2D u_sizeTexture;
uniform float u_baseLength;
uniform float u_curIteration;
uniform float u_iterationMultiplier;
uniform vec2 u_gravityCenter;
uniform float u_numNodes;
uniform float u_gravity;

uniform sampler2D u_clusterData;
uniform sampler2D u_prevForce;
uniform float u_collisionMultiplier;

float TIMESTEP = 1.0 / 30.0;
float VELOCITYDECAY = 0.6;
float accLimitLow = 500000.0;
float accLimitHigh = 750000.0;
float accLimitPosHigh = 10000000.0;

const float denseNodeThreshold = 1000.0;
const float MIN_DISTANCE = 0.00000001;
const float MAX_DISTANCE = 1000000000.0;
const float MAX_ACCELERATION = 500000.0;

vec4 getTextureData(sampler2D texture, float index, float base) {
  float x = mod(index, base);
  float y = (index - x) / base;
  return texture2D(texture, vec2(x + 0.5, y + 0.5) / base);
}

bool isNan(float val) {
  return (val < 0.0 || 0.0 < val || val == 0.0) ? false : true;
}

const float BIG_NUMBER = 999999999999999999.0;
bool isInf(float val) {
  return val > BIG_NUMBER || val < -BIG_NUMBER;
}

vec2 getDelta(vec2 v1, vec2 v2) {
  vec2 delta = v1 - v2;
  float dist = length(delta);
  if (dist < MIN_DISTANCE || isNan(dist)) {
    return vec2(MIN_DISTANCE, MIN_DISTANCE);
  }
  if (dist > MAX_DISTANCE) {
    vec2 normDelta = delta / dist;
    return normDelta * MAX_DISTANCE;
  }
  return delta;
}

vec4 getOtherNodePosition(float i) {
  return getTextureData(u_physData, i, 256.0);
}

float getCombinedNodeSize(float i, float nodeSize) {
  float otherNodeSize = getTextureData(u_sizeTexture, i, 256.0).a;
  return nodeSize + otherNodeSize;
}

vec2 getSpringForce(float curConnection,  float numConnections, float springFScale, vec4 myPosition, float i) {
  float curSpring = getTextureData(u_connections, curConnection + i, 4096.0).a;

  vec4 otherPosition = getTextureData(u_physData, curSpring, 256.0);
  float otherDataPosition = getTextureData(u_connectionOffsets, curSpring, 256.0).a;
  float avgDegree;
#if INTEL_WORKAROUND
    avgDegree = max(numConnections, 4.0);
#else
    float otherNumConnections = getTextureData(u_connections, otherDataPosition, 4096.0).a;
    avgDegree = max((otherNumConnections + numConnections * 3.0) / 4.0, 4.0);
#endif

  vec2 delta = getDelta(myPosition.xy, otherPosition.xy);
  float dist = length(delta);

  float F = (dist * dist * springFScale) / (u_baseLength * avgDegree);
  if (u_collisionMultiplier > 0.0) {
    F *= u_collisionMultiplier;
  }
  return (-delta / dist) * F;
}

vec2 getCollisionForce(float combinedNodeSize, float dist, float fScale, vec2 delta) {
  float collisionForce = ((combinedNodeSize - dist) / dist);
  if (u_collisionMultiplier > 0.0) {
    collisionForce *= u_collisionMultiplier;
  }
  return (delta * collisionForce * fScale * combinedNodeSize) / (combinedNodeSize + 1.0);
}

vec2 getRepulsionForce(float dist, float fScale, vec2 delta) {
  float F = (u_baseLength * u_baseLength * (fScale / 1.5)) / dist;
  return (delta / dist) * F * 0.05;
}

void main(void) {
  float textureSide = 256.0; //#TEXTURE_SIDE#;
  float index = (gl_FragCoord.x - 0.5) + (gl_FragCoord.y - 0.5) * textureSide;

  if (index >= u_numNodes) {
    discard;
  }

  vec4 clusterData = getTextureData(u_clusterData, index, 256.0);

  float clusterIndex = clusterData.x;
  float clusterStartIndex = clusterData.y;
  float clusterSize = clusterData.z;
  float clusterWeight = clusterData.w;

  vec4 myPosition = getTextureData(u_physData, index, 256.0);
  vec4 previousForce = getTextureData(u_prevForce, clusterIndex, 256.0);

  vec2 acceleration = previousForce.xy;

  float isPinned = getTextureData(u_pinnedNodes, index, 256.0).a;
  float nodeSize = getTextureData(u_sizeTexture, index, 256.0).a;

  if (isPinned > 0.5) {
    gl_FragColor = vec4(myPosition.xy, 0.0, 0.0);
    return;
  }

  float curConnection = getTextureData(u_connectionOffsets, index, 256.0).a;
  float numConnections = getTextureData(u_connections, curConnection, 4096.0).a;

  float fScale = 1.0 + sqrt(u_iterationMultiplier);
  float springFScale = fScale;

  if (numConnections > denseNodeThreshold) {
    springFScale = sqrt(fScale);
  }

  float numOfRels = 0.0;

  // Springs
  for (float i = 1.0; i <= 256.0 * 256.0; i++) {
    if (numOfRels >= numConnections) {
      break;
    }
    acceleration += getSpringForce(curConnection, numConnections, springFScale, myPosition, i);
    numOfRels += 1.0;
  }

  // Repulsion && collision detection
  if (u_collisionMultiplier > 0.0) {
    float number_of_collisions = 0.0;
    for (float i = 0.0; i < 256.0 * 256.0; i++) {
      if (i >= u_numNodes) {
        break;
      }

      if (i == index) {
        continue;
      }

      vec4 otherPosition = getOtherNodePosition(i);
      vec2 delta = getDelta(myPosition.xy, otherPosition.xy);
      float dist = length(delta);
      float combinedNodeSize = getCombinedNodeSize(i, nodeSize) * 2.0;

      if (dist < combinedNodeSize && number_of_collisions < 40.0) {
        number_of_collisions++;
        acceleration += getCollisionForce(combinedNodeSize, dist, fScale, delta);
      }

      if (i >= clusterStartIndex && i < clusterStartIndex + clusterSize) {
        acceleration += getRepulsionForce(dist, fScale, delta);
      }
    }
  } else {
    for (float i = 0.0; i < 256.0 * 256.0; i++) {
      if (i >= clusterStartIndex + clusterSize || i >= u_numNodes) {
        break;
      }

      if (i < clusterStartIndex || i == index) {
        continue;
      }

      vec4 otherPosition = getOtherNodePosition(i);
      vec2 delta = getDelta(myPosition.xy, otherPosition.xy);
      float dist = length(delta);
      float combinedNodeSize = getCombinedNodeSize(i, nodeSize);

      if (dist < combinedNodeSize) {
        acceleration += getCollisionForce(combinedNodeSize, dist, fScale, delta);
      }

      acceleration += getRepulsionForce(dist, fScale, delta);
    }
  }

  // Gravity
  vec2 delta = getDelta(u_gravityCenter, myPosition.xy);
  float dist = length(delta);

  vec2 grav = (delta / dist) * u_gravity * fScale;
  acceleration += grav * smoothstep(0.0, 500.0, dist);

  float accMagnitude = length(acceleration);
  acceleration *= min(MAX_ACCELERATION, accMagnitude) / accMagnitude;

  float iterationFrictionThreshold = 1000.0;

  if (u_curIteration > iterationFrictionThreshold) {
    float friction = 1.0 + pow((u_curIteration - iterationFrictionThreshold), 2.0) / 100.0;
    acceleration *= 1.0 / friction;
  }

  if (u_curIteration == 0.0) {
    gl_FragColor = vec4(myPosition.xy, acceleration * TIMESTEP * 0.5);
  } else {
    myPosition.zw = myPosition.zw * VELOCITYDECAY;
    gl_FragColor = vec4(myPosition.xy + myPosition.zw * TIMESTEP, myPosition.zw + acceleration * TIMESTEP);
  }
}`;this.physShader=new ya(E,Nf,ge,{INTEL_WORKAROUND:this.intelWorkaround?1:0}),this.physShader.use(),this.physShader.setUniform("u_projection",this.physProjection),this.physShader.setUniform("u_baseLength",this.getBaseLength()),this.physShader.setUniform("u_connections",this.springTexture),this.physShader.setUniform("u_sizeTexture",this.sizeTexture),this.physShader.setUniform("u_connectionOffsets",this.offsetTexture),this.physShader.setUniform("u_pinnedNodes",this.pinTexture),this.physShader.setUniform("u_gravityCenter",this.nodeCenterPoint),this.physShader.setUniform("u_numNodes",this.numNodes),this.physShader.setUniform("u_gravity",this.gravity)}},{key:"setupPhysicsForCoarse",value:function(){var E=this,D=this.gl;this.levelsData=[],this.levelsClusterTexture=[],this.levelsFinestIndexTexture=[];var I,F,V=this.subGraphs.length,z=function(ue,ge,Ce,Re,je){I[4*ue+0]=ge,I[4*ue+1]=Ce,I[4*ue+2]=je.size(),I[4*ue+3]=Re||1};if(V===1){I=new Float32Array(262144);var $=this.subGraphs[0].nodes;$.forEach(function(ue,ge){z(ge,0,0,ue.weight,{size:function(){return $.length}})}),this.levelsClusterTexture[0]=this.newTexture(D,I,ba)}else for(var Y=function(){var ue=E.subGraphs[Z].nodes,ge=Z===E.subGraphs.length-1?[]:E.subGraphs[Z+1].nodes;I=new Float32Array(262144),F=new Float32Array(65536);var Ce=0;if(ge.length>0){var Re=ge.slice();Re.sort(function(Ye,ze){return Ye.previousIndex-ze.previousIndex}),Re.forEach(function(Ye,ze){var Ke=Ce,Xe=ge.indexOf(Ye);z(Ce,Xe,Ke,ue[Ye.id].weight,Ye),F[Ce]=ue[Ce].finestIndex,Ce+=1,Ye.planets.forEach(function(We){z(Ce,Xe,Ke,We.weight,Ye),F[Ce]=ue[Ce].finestIndex,Ce+=1,We.moons.forEach(function(it){z(Ce,Xe,Ke,it.weight,Ye),F[Ce]=ue[Ce].finestIndex,Ce+=1})})})}else ue.forEach(function(Ye,ze){z(ze,0,0,Ye.weight,{size:function(){return ue.length}}),F[ze]=ue[ze].finestIndex});var je=E.newTexture(D,null,ba),ke=E.newFramebuffer(D,je);E.levelsData[Z]={texture:je,frameBuffer:ke},E.levelsClusterTexture[Z]=E.newTexture(D,I,ba),E.levelsFinestIndexTexture[Z]=E.newTexture(D,F,Qt,D.FLOAT,D.ALPHA)},Z=this.subGraphs.length-1;Z>=0;Z--)Y();for(var ie=new Float32Array(262144),le=0;le<ie.length;le++)ie[le]=0;this.initalLevelTexture=this.newTexture(D,ie,ba);var ve=this.enableVerlet?`precision mediump float;
uniform sampler2D u_physData;
uniform sampler2D u_clusterData;
uniform sampler2D u_finestIndexes;
uniform sampler2D u_prevForce;

uniform float u_baseLength;
uniform float u_numNodes;
uniform float u_iterationMultiplier;
uniform float u_isTopLevel;

float PI = 3.1415926535897932384626433832795;
float TIMESTEP = 1.0 / 30.0;
float VELOCITYDECAY = 1.0;

vec4 getTextureData(sampler2D texture, float index, float base) {
  float x = mod(index, base);
  float y = (index - x) / base;
  return texture2D(texture, vec2(x + 0.5, y + 0.5) / base);
}

float getSquaredLogClusterWeight(float value) {
  return pow(log(value), 2.0);
}

void main(void) {
  float index = (gl_FragCoord.x - 0.5) + (gl_FragCoord.y - 0.5) * 256.0;

  if (index >= u_numNodes) {
    discard;
  }

  vec4 clusterData = getTextureData(u_clusterData, index, 256.0);

  float clusterIndex = clusterData.x;
  float clusterStartIndex = clusterData.y;
  float clusterSize = clusterData.z;
  float clusterArea = pow(clusterSize + u_baseLength * 2.0, 2.0);

  float finestIndex = getTextureData(u_finestIndexes, index, 256.0).a;
  vec4 myPosition = getTextureData(u_physData, finestIndex, 256.0);
  vec4 previousForce = getTextureData(u_prevForce, clusterIndex, 256.0);
  float fScale = 1.0 + sqrt(u_iterationMultiplier);

  vec2 acceleration = previousForce.xy;

  // Repulsion & Collision Detection
  for (float i = 0.0; i < 256.0 * 256.0; i++) {
    if (i >= clusterStartIndex + clusterSize || i >= u_numNodes) {
      break;
    }
    if (i < clusterStartIndex || i == index) {
      continue;
    }

    vec4 otherClusterData = getTextureData(u_clusterData, i, 256.0);
    float otherClusterWeight = getSquaredLogClusterWeight(otherClusterData.w);

    float otherFinestIndex = getTextureData(u_finestIndexes, i, 256.0).a;
    vec4 otherPosition = getTextureData(u_physData, otherFinestIndex, 256.0);

    vec2 delta = myPosition.xy - otherPosition.xy;
    float dist = max(length(delta), 0.0000001);
    float maxDist = 25.0;
    float repulsionForceScale = 0.1;

    float F = (clusterArea * fScale) / (dist * dist);

    if (u_isTopLevel == 1.0) {
      repulsionForceScale = 0.2;
    }

    acceleration += ((delta / sqrt(dist)) * F) * repulsionForceScale * otherClusterWeight;

    if (dist < maxDist) {
      float collide = (maxDist - dist) / (dist * dist);
      acceleration += delta * collide * fScale * maxDist / (maxDist + 1.0);
    }
  }

  gl_FragColor = vec4(acceleration, vec2(finestIndex, 0));
}`:`precision mediump float;
uniform sampler2D u_physData;
uniform sampler2D u_clusterData;
uniform sampler2D u_finestIndexes;
uniform sampler2D u_prevForce;

uniform float u_baseLength;
uniform float u_numNodes;
uniform float u_iterationMultiplier;
uniform float u_isTopLevel;

float TIMESTEP = 1.0 / 30.0;
float VELOCITYDECAY = 0.6;

vec4 getTextureData(sampler2D texture, float index, float base) {
  float x = mod(index, base);
  float y = (index - x) / base;
  return texture2D(texture, vec2(x + 0.5, y + 0.5) / base);
}

float getLogClusterWeight(float value) {
  return value / max(log(value), 1.0);
}

void main(void) {
  float index = (gl_FragCoord.x - 0.5) + (gl_FragCoord.y - 0.5) * 256.0;

  if (index >= u_numNodes) {
    discard;
  }

  vec4 clusterData = getTextureData(u_clusterData, index, 256.0);

  float clusterIndex = clusterData.x;
  float clusterStartIndex = clusterData.y;
  float clusterSize = clusterData.z;

  float finestIndex = getTextureData(u_finestIndexes, index, 256.0).a;
  vec4 myPosition = getTextureData(u_physData, finestIndex, 256.0);
  vec4 previousForce = getTextureData(u_prevForce, clusterIndex, 256.0);
  float fScale = 1.0 + sqrt(u_iterationMultiplier);

  vec2 acceleration = previousForce.xy;

  // Repulsion & Collision Detection
  for (float i = 0.0; i < 256.0 * 256.0; i++) {
    if (i >= clusterStartIndex + clusterSize || i >= u_numNodes) {
      break;
    }
    if (i < clusterStartIndex || i == index) {
      continue;
    }

    vec4 otherClusterData = getTextureData(u_clusterData, i, 256.0);
    float otherClusterWeight = getLogClusterWeight(otherClusterData.w);

    float otherFinestIndex = getTextureData(u_finestIndexes, i, 256.0).a;
    vec4 otherPosition = getTextureData(u_physData, otherFinestIndex, 256.0);

    vec2 delta = myPosition.xy - otherPosition.xy;
    float dist = max(length(delta), 0.0000001);
    float maxDist = 25.0;
    float repulsionForceScale = 0.1;

    float F = ((u_baseLength * u_baseLength) * (fScale / 1.5)) / dist;

    if (u_isTopLevel == 1.0) {
      repulsionForceScale = 0.3;
    }

    acceleration += ((delta / dist) * F) * repulsionForceScale * otherClusterWeight;

    if (dist < maxDist) {
      float collide = (maxDist - dist) / dist;
      acceleration += delta * collide * fScale * maxDist / (maxDist + 1.0);
    }
  }

  gl_FragColor = vec4(acceleration, vec2(finestIndex, 0));
}`;this.apprxRepForceShader=new ya(D,Nf,ve),this.apprxRepForceShader.use(),this.apprxRepForceShader.setUniform("u_projection",this.physSmallProjection)}},{key:"setupPinData",value:function(){var E=this.gl;this.pinTexture=E.createTexture(),this.pinData=new Uint8Array(65536);for(var D=0;D<65536;D++)this.pinData[D]=0;E.bindTexture(E.TEXTURE_2D,this.pinTexture),E.texImage2D(E.TEXTURE_2D,0,E.ALPHA,Qt,Qt,0,E.ALPHA,E.UNSIGNED_BYTE,this.pinData),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,E.NEAREST),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.NEAREST),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE)}},{key:"setupUpdates",value:function(){var E=this.gl;this.updateData=new Float32Array(65536),this.updateTexture=E.createTexture(),E.bindTexture(E.TEXTURE_2D,this.updateTexture),E.texImage2D(E.TEXTURE_2D,0,E.ALPHA,Qt,Qt,0,E.ALPHA,E.FLOAT,this.updateData),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,E.NEAREST),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.NEAREST),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),this.updateShader=new ya(E,Nf,`precision mediump float;

uniform sampler2D u_physData;
uniform sampler2D u_updateData;
uniform float u_numNodesNew;

const float INDEX_FLAG = 999999.0;

vec4 getTextureData(sampler2D texture, float index, float base) {
  float x = mod(index, base);
  float y = (index - x) / base;
  return texture2D(texture, vec2(x + 0.5, y + 0.5) / base);
}

void main(void) {
  float textureSide = 256.0; //#TEXTURE_SIDE#;
  float index = (gl_FragCoord.x - 0.5) + (gl_FragCoord.y - 0.5)*textureSide;

  if (index >= u_numNodesNew) {
    discard;
  }

  float firstValue = getTextureData(u_updateData, index * 2.0, 256.0).a;
  float secondValue = getTextureData(u_updateData, index * 2.0 + 1.0, 256.0).a;

  if (secondValue == INDEX_FLAG) {
    vec4 myPosition = getTextureData(u_physData, firstValue, 256.0);
    gl_FragColor = myPosition;
  } else {
    gl_FragColor = vec4(firstValue, secondValue, 0.0, 0.0);
  }
}
`),this.updateShader.use(),this.updateShader.setUniform("u_projection",this.physProjection)}},{key:"setupReadpixelWorkaround",value:function(){var E=this.gl;this.workaroundShader=new ya(E,Nf,`precision lowp float;

uniform sampler2D u_physData;
uniform float u_index;

float shift_right (float v, float amt) { 
    v = floor(v) + 0.5; 
    return floor(v / exp2(amt)); 
}

float shift_left (float v, float amt) { 
    return floor(v * exp2(amt) + 0.5); 
}

float mask_last (float v, float bits) { 
    return mod(v, shift_left(1.0, bits)); 
}

float extract_bits (float num, float from, float to) { 
    from = floor(from + 0.5); to = floor(to + 0.5); 
    return mask_last(shift_right(num, from), to - from); 
}

// From https://stackoverflow.com/questions/17981163/webgl-read-pixels-from-floating-point-render-target
vec4 encode_float (float val) { 
    if (val == 0.0) return vec4(0, 0, 0, 0); 
    float sign = val > 0.0 ? 0.0 : 1.0; 
    val = abs(val); 
    float exponent = floor(log2(val)); 
    float biased_exponent = exponent + 127.0; 
    float fraction = ((val / exp2(exponent)) - 1.0) * 8388608.0; 
    float t = biased_exponent / 2.0; 
    float last_bit_of_biased_exponent = fract(t) * 2.0; 
    float remaining_bits_of_biased_exponent = floor(t); 
    float byte4 = extract_bits(fraction, 0.0, 8.0) / 255.0; 
    float byte3 = extract_bits(fraction, 8.0, 16.0) / 255.0; 
    float byte2 = (last_bit_of_biased_exponent * 128.0 + extract_bits(fraction, 16.0, 23.0)) / 255.0; 
    float byte1 = (sign * 128.0 + remaining_bits_of_biased_exponent) / 255.0; 
    return vec4(byte4, byte3, byte2, byte1); 
}

void main(void) {
  vec4 texData = texture2D(u_physData, gl_FragCoord.xy / 255.0);
  float data;
  if (u_index == 0.0) {
    data = texData.x;
  } else if (u_index == 1.0) {
    data = texData.y;
  } else if (u_index == 2.0) {
    data = texData.z;
  } else if (u_index == 3.0) {
    data = texData.w;
  }

  gl_FragColor = encode_float(data);
}
`),this.workaroundShader.use(),this.workaroundShader.setUniform("u_projection",this.physProjection),this.workaroundData=[];for(var D=0;D<4;D++){var I=new Uint8Array(262144),F=this.newTexture(E,null,Qt,E.UNSIGNED_BYTE),V=this.newFramebuffer(E,F);this.workaroundData.push({dataByte:I,dataFloat:new Float32Array(I.buffer),texture:F,frameBuffer:V})}}},{key:"doReadpixelWorkaround",value:function(){for(var E=this.gl,D=0;D<4;D++){var I=this.workaroundData[D];E.bindFramebuffer(E.FRAMEBUFFER,I.frameBuffer),E.viewport(0,0,Qt,Qt),this.workaroundShader.use(),this.workaroundShader.setUniform("u_index",D),this.workaroundShader.setUniform("u_physData",this.getPhysData(0).texture),E.bindBuffer(E.ARRAY_BUFFER,this.physVbo),this.workaroundShader.setAttributePointer("a_position",2,0,2),E.drawArrays(E.TRIANGLE_STRIP,0,4),E.readPixels(0,0,Qt,Qt,E.RGBA,E.UNSIGNED_BYTE,I.dataByte)}}},{key:"definePhysicsArrays",value:function(){this.physData=[],this.levelsData=[],this.levelsClusterTexture=[],this.levelsFinestIndexTexture=[]}}],x&&ma(m.prototype,x),Object.defineProperty(m,"prototype",{writable:!1}),g}();function Dl(g){return Dl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},Dl(g)}function Lc(g){return function(m){if(Array.isArray(m))return Eo(m)}(g)||function(m){if(typeof Symbol<"u"&&m[Symbol.iterator]!=null||m["@@iterator"]!=null)return Array.from(m)}(g)||function(m,x){if(m){if(typeof m=="string")return Eo(m,x);var E=Object.prototype.toString.call(m).slice(8,-1);return E==="Object"&&m.constructor&&(E=m.constructor.name),E==="Map"||E==="Set"?Array.from(m):E==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(E)?Eo(m,x):void 0}}(g)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Eo(g,m){(m==null||m>g.length)&&(m=g.length);for(var x=0,E=new Array(m);x<m;x++)E[x]=g[x];return E}function ey(g,m){for(var x=0;x<m.length;x++){var E=m[x];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,wa(E.key),E)}}function _a(g,m,x){return(m=wa(m))in g?Object.defineProperty(g,m,{value:x,enumerable:!0,configurable:!0,writable:!0}):g[m]=x,g}function wa(g){var m=function(x,E){if(Dl(x)!="object"||!x)return x;var D=x[Symbol.toPrimitive];if(D!==void 0){var I=D.call(x,"string");if(Dl(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(g);return Dl(m)=="symbol"?m:String(m)}var Ml="ForceCytoLayout",Nc="forceDirected",Bf="coseBilkent",Dp=function(){function g(E){var D=this;(function($,Y){if(!($ instanceof Y))throw new TypeError("Cannot call a class as a function")})(this,g),_a(this,"physLayout",void 0),_a(this,"coseBilkentLayout",void 0),_a(this,"state",void 0),_a(this,"currentLayoutType",void 0),_a(this,"enableCytoscape",void 0),_a(this,"currentLayout",void 0);var I=E.state,F=E.enableCytoscape;this.enableCytoscape=F==null||F,this.physLayout=new kp(E),this.coseBilkentLayout=new Ic({state:I,cytoCompleteCallback:function(){for(D.physLayout.update(!0),D.copyLayoutPositions(D.state.nodes.items,D.coseBilkentLayout,D.physLayout);D.physLayout.update(!1););D.copyLayoutPositions(D.state.nodes.items,D.physLayout,D.coseBilkentLayout)},animationCompleteCallback:function(){D.currentLayoutType===Bf&&setTimeout(function(){return D.setLayout(Nc)},50)}}),this.currentLayout=this.physLayout,this.currentLayoutType=Nc;var V=I.nodes,z=I.rels;V.addChannel(Ml),z.addChannel(Ml),this.state=I}var m,x;return m=g,x=[{key:"setOptions",value:function(E){E!==void 0&&(this.currentLayout.setOptions(E),this.enableCytoscape=E.enableCytoscape)}},{key:"getLayout",value:function(E){return E===Bf?this.coseBilkentLayout:this.physLayout}},{key:"setLayout",value:function(E){if(E!==this.currentLayoutType){Br.info("Switching to layout: ".concat(E," in ForceCyto"));var D=this.getLayout(E);this.currentLayout=D,this.currentLayoutType=E}}},{key:"copyLayoutPositions",value:function(E,D,I){var F=D.getNodePositions(E);I.updateNodes(F)}},{key:"update",value:function(){var E=arguments.length>0&&arguments[0]!==void 0&&arguments[0],D=this.state,I=D.nodes,F=D.rels,V=I.channels[Ml],z=F.channels[Ml],$=Object.values(V.adds).length,Y=Object.values(z.adds).length,Z=Object.values(V.adds).map(function(it){return it.id}),ie=Object.values(z.adds).map(function(it){return it.id}),le=new Set(Object.keys(V.adds)),ve=new Set(Object.keys(z.adds));if(I.clearChannel(Ml),F.clearChannel(Ml),this.currentLayoutType===Nc&&this.enableCytoscape&&I.items.length<=100&&$<100&&$>0&&Y>0){var ue=I.items.map(function(it){return it.id}),ge=new Set([].concat(Lc(ue),Lc(Z))),Ce=F.items.map(function(it){return it.id}),Re=new Set([].concat(Lc(Ce),Lc(ie)));if(ge.size<=100&&Re.size<=300){var je=function(it,mt,It,bt){var jt,Ct=new Set(it),Ee=pr(new Set(mt));try{for(Ee.s();!(jt=Ee.n()).done;){var we=jt.value,xe=bt.idToItem[we];if(xe){var st=xe.from,Ze=xe.to;Ct.add(st),Ct.add(Ze)}}}catch(jn){Ee.e(jn)}finally{Ee.f()}var vt,Mt=function(jn){var yn,Yr={},zr={},un=pr(jn);try{for(un.s();!(yn=un.n()).done;){for(var mn=yn.value,ri=mn.from,tn=mn.to,In="".concat(ri,"-").concat(tn),ni="".concat(tn,"-").concat(ri),ii=0,fi=[In,ni];ii<fi.length;ii++){var rn=fi[ii];zr[rn]!==void 0?zr[rn].push(mn):zr[rn]=[mn]}Yr[ri]||(Yr[ri]=new Set),Yr[tn]||(Yr[tn]=new Set),Yr[ri].add(tn),Yr[tn].add(ri)}}catch(yi){un.e(yi)}finally{un.f()}return{adjNodesMap:Yr,relMap:zr}}(bt.items),Ut=Mt.adjNodesMap,zt=Mt.relMap,Er={},Tr={},Ur=function(jn){var yn=[];for(Er[jn]||yn.push(jn);yn.length>0;){var Yr=yn.shift();if(Er[Yr]=It.idToItem[Yr],Ut[Yr]!==void 0){var zr,un=pr(Ut[Yr]);try{for(un.s();!(zr=un.n()).done;){var mn=zr.value;if(!Er[mn]){yn.push(mn);var ri=zt["".concat(Yr,"-").concat(mn)];if(ri){var tn,In=pr(ri);try{for(In.s();!(tn=In.n()).done;){var ni=tn.value;Tr[ni.id]||(Tr[ni.id]=ni)}}catch(ii){In.e(ii)}finally{In.f()}}}}}catch(ii){un.e(ii)}finally{un.f()}}}},xn=pr(Ct);try{for(xn.s();!(vt=xn.n()).done;)Ur(vt.value)}catch(jn){xn.e(jn)}finally{xn.f()}return{connectedNodes:Er,connectedRels:Tr}}(le,ve,I,F),ke=je.connectedNodes,Ye=je.connectedRels,ze=Object.values(ke),Ke=Object.values(Ye),Xe=ze.length,We=Ke.length;Xe===le.size&&We===ve.size&&(ve.size>0||le.size>0)?(this.setLayout(Bf),this.coseBilkentLayout.update(!0,I.items,F.items)):We>0&&ve.size/We>.25&&(this.setLayout(Bf),this.coseBilkentLayout.update(!0,ze,Ke))}}this.physLayout.update(E),this.coseBilkentLayout.update(E)}},{key:"getShouldUpdate",value:function(){return this.currentLayout.getShouldUpdate()}},{key:"getComputing",value:function(){return this.currentLayout.getComputing()}},{key:"updateNodes",value:function(E){this.setLayout(Nc),this.physLayout.updateNodes(E)}},{key:"getNodePositions",value:function(E){return this.currentLayout.getNodePositions(E)}},{key:"terminateUpdate",value:function(){this.physLayout.terminateUpdate(),this.coseBilkentLayout.terminateUpdate()}},{key:"destroy",value:function(){this.physLayout.destroy(),this.coseBilkentLayout.destroy()}}],x&&ey(m.prototype,x),Object.defineProperty(m,"prototype",{writable:!1}),g}();function jc(g){return jc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},jc(g)}function Hh(g,m){var x=Object.keys(g);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(g);m&&(E=E.filter(function(D){return Object.getOwnPropertyDescriptor(g,D).enumerable})),x.push.apply(x,E)}return x}function Io(g){for(var m=1;m<arguments.length;m++){var x=arguments[m]!=null?arguments[m]:{};m%2?Hh(Object(x),!0).forEach(function(E){Ls(g,E,x[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(x)):Hh(Object(x)).forEach(function(E){Object.defineProperty(g,E,Object.getOwnPropertyDescriptor(x,E))})}return g}function as(g,m){var x=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!x){if(Array.isArray(g)||(x=function(z,$){if(z){if(typeof z=="string")return Uf(z,$);var Y=Object.prototype.toString.call(z).slice(8,-1);return Y==="Object"&&z.constructor&&(Y=z.constructor.name),Y==="Map"||Y==="Set"?Array.from(z):Y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Y)?Uf(z,$):void 0}}(g))||m){x&&(g=x);var E=0,D=function(){};return{s:D,n:function(){return E>=g.length?{done:!0}:{done:!1,value:g[E++]}},e:function(z){throw z},f:D}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I,F=!0,V=!1;return{s:function(){x=x.call(g)},n:function(){var z=x.next();return F=z.done,z},e:function(z){V=!0,I=z},f:function(){try{F||x.return==null||x.return()}finally{if(V)throw I}}}}function Uf(g,m){(m==null||m>g.length)&&(m=g.length);for(var x=0,E=new Array(m);x<m;x++)E[x]=g[x];return E}function Yu(g,m){for(var x=0;x<m.length;x++){var E=m[x];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,Fc(E.key),E)}}function Ls(g,m,x){return(m=Fc(m))in g?Object.defineProperty(g,m,{value:x,enumerable:!0,configurable:!0,writable:!0}):g[m]=x,g}function Fc(g){var m=function(x,E){if(jc(x)!="object"||!x)return x;var D=x[Symbol.toPrimitive];if(D!==void 0){var I=D.call(x,"string");if(jc(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(g);return jc(m)=="symbol"?m:String(m)}var ss="FreeLayout",Ll=function(){function g(E){var D=this;(function($,Y){if(!($ instanceof Y))throw new TypeError("Cannot call a class as a function")})(this,g),Ls(this,"state",void 0),Ls(this,"positions",void 0),Ls(this,"shouldUpdate",void 0),Ls(this,"stateDisposers",void 0);var I=E.state;this.state=I,this.positions={},this.stateDisposers=[],this.stateDisposers.push(this.state.reaction(function(){return D.state.graphUpdates},function(){D.state.nodes.version!==void 0&&(D.shouldUpdate=!0),D.state.rels.version!==void 0&&(D.shouldUpdate=!0)}));var F=this.state,V=F.nodes,z=F.rels;V.addChannel(ss),z.addChannel(ss),this.shouldUpdate=!0,this.setOptions(),this.layout(V.items,V.idToItem,V.idToPosition)}var m,x;return m=g,x=[{key:"setOptions",value:function(){}},{key:"updateNodes",value:function(E){var D,I=as(E);try{for(I.s();!(D=I.n()).done;){var F=D.value;F.x!==void 0&&F.y!==void 0&&(this.positions[F.id]={x:F.x,y:F.y}),this.shouldUpdate=!0}}catch(V){I.e(V)}finally{I.f()}}},{key:"update",value:function(){var E=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.shouldUpdate||E){var D=this.state,I=D.nodes,F=D.rels,V=Object.values(I.channels[ss].adds).length>0,z=Object.values(F.channels[ss].adds).length>0,$=Object.values(I.channels[ss].removes).length>0,Y=Object.values(F.channels[ss].removes).length>0;(V||z||$||Y)&&this.layout(I.items,I.idToItem,I.idToPosition),I.clearChannel(ss),F.clearChannel(ss)}this.shouldUpdate=!1}},{key:"layout",value:function(E,D,I){var F,V=(F=E)!==void 0?gt(F):F;if(!(0,r.isEmpty)(V)){for(var z={},$=0;$<V.length;++$){var Y,Z=V[$].id,ie=(Y=I[Z])!==null&&Y!==void 0?Y:{},le=ie.x,ve=le===void 0?0:le,ue=ie.y,ge=ue===void 0?0:ue;z[Z]={id:Z,x:ve,y:ge}}this.positions=z,this.shouldUpdate=!1}}},{key:"setNodePositions",value:function(E){this.positions=E}},{key:"getNodePositions",value:function(E){var D,I=[],F=as(E);try{for(F.s();!(D=F.n()).done;){var V=D.value,z=this.positions[V.id],$=Io({id:V.id},z);I.push($)}}catch(Y){F.e(Y)}finally{F.f()}return I}},{key:"getShouldUpdate",value:function(){return this.shouldUpdate}},{key:"getComputing",value:function(){return!1}},{key:"terminateUpdate",value:function(){}},{key:"destroy",value:function(){this.state.nodes.removeChannel(ss),this.state.rels.removeChannel(ss)}}],x&&Yu(m.prototype,x),Object.defineProperty(m,"prototype",{writable:!1}),g}();function pu(g){return pu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},pu(g)}function us(g,m){var x=Object.keys(g);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(g);m&&(E=E.filter(function(D){return Object.getOwnPropertyDescriptor(g,D).enumerable})),x.push.apply(x,E)}return x}function zf(g){for(var m=1;m<arguments.length;m++){var x=arguments[m]!=null?arguments[m]:{};m%2?us(Object(x),!0).forEach(function(E){var D,I,F;D=g,I=E,F=x[E],(I=qf(I))in D?Object.defineProperty(D,I,{value:F,enumerable:!0,configurable:!0,writable:!0}):D[I]=F}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(x)):us(Object(x)).forEach(function(E){Object.defineProperty(g,E,Object.getOwnPropertyDescriptor(x,E))})}return g}function ls(g,m){var x=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!x){if(Array.isArray(g)||(x=function(z,$){if(z){if(typeof z=="string")return Ko(z,$);var Y=Object.prototype.toString.call(z).slice(8,-1);return Y==="Object"&&z.constructor&&(Y=z.constructor.name),Y==="Map"||Y==="Set"?Array.from(z):Y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Y)?Ko(z,$):void 0}}(g))||m){x&&(g=x);var E=0,D=function(){};return{s:D,n:function(){return E>=g.length?{done:!0}:{done:!1,value:g[E++]}},e:function(z){throw z},f:D}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I,F=!0,V=!1;return{s:function(){x=x.call(g)},n:function(){var z=x.next();return F=z.done,z},e:function(z){V=!0,I=z},f:function(){try{F||x.return==null||x.return()}finally{if(V)throw I}}}}function Ko(g,m){(m==null||m>g.length)&&(m=g.length);for(var x=0,E=new Array(m);x<m;x++)E[x]=g[x];return E}function $h(g,m){for(var x=0;x<m.length;x++){var E=m[x];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,qf(E.key),E)}}function qf(g){var m=function(x,E){if(pu(x)!="object"||!x)return x;var D=x[Symbol.toPrimitive];if(D!==void 0){var I=D.call(x,"string");if(pu(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(g);return pu(m)=="symbol"?m:String(m)}var Zo="GridLayout",Bc=function(){function g(E){var D=this;(function($,Y){if(!($ instanceof Y))throw new TypeError("Cannot call a class as a function")})(this,g);var I=E.state;this.state=I,this.positions={},this.stateDisposers=[],this.stateDisposers.push(this.state.reaction(function(){return D.state.graphUpdates},function(){D.state.nodes.version!==void 0&&(D.shouldUpdate=!0),D.state.rels.version!==void 0&&(D.shouldUpdate=!0)}));var F=this.state,V=F.nodes,z=F.rels;V.addChannel(Zo),z.addChannel(Zo),this.shouldUpdate=!0,this.setOptions(E),this.layout(V.items,V.idToItem,V.idToPosition,z.items)}var m,x;return m=g,x=[{key:"setOptions",value:function(E){}},{key:"updateNodes",value:function(E){var D,I=ls(E);try{for(I.s();!(D=I.n()).done;){var F=D.value;F.x!==void 0&&F.y!==void 0&&(this.positions[F.id]={x:F.x,y:F.y}),this.shouldUpdate=!0}}catch(V){I.e(V)}finally{I.f()}}},{key:"update",value:function(){var E=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.shouldUpdate||E){var D=this.state,I=D.nodes,F=D.rels,V=Object.values(I.channels[Zo].adds).length>0,z=Object.values(F.channels[Zo].adds).length>0,$=Object.values(I.channels[Zo].removes).length>0,Y=Object.values(F.channels[Zo].removes).length>0;(V||z||$||Y)&&(this.layout(I.items,I.idToItem,I.idToPosition,F.items),I.idToPosition=this.positions),I.clearChannel(Zo),F.clearChannel(Zo)}this.shouldUpdate=!1}},{key:"layout",value:function(E,D,I,F){var V,z=(V=E)?gt(V):V;if(!(0,r.isEmpty)(z)){for(var $=z.length,Y=Math.ceil(Math.sqrt($)),Z=new Array($),ie=0,le=0;le<Y;++le){for(var ve=0;ve<Y&&(Z[ie]={y:0+150*le,x:0+150*ve},(ie+=1)!==$);++ve);if(ie===$)break}for(var ue=z.sort(),ge={},Ce=0;Ce<$;++Ce){var Re=ue[Ce],je=Z[Ce];Re.x===je.x&&Re.y===je.y||(ge[Re.id]=zf({id:Re.id},je))}this.positions=ge,this.shouldUpdate=!1}}},{key:"getNodePositions",value:function(E){var D,I=[],F=ls(E);try{for(F.s();!(D=F.n()).done;){var V=D.value,z=this.positions[V.id],$=zf({id:V.id},z);I.push($)}}catch(Y){F.e(Y)}finally{F.f()}return I}},{key:"getShouldUpdate",value:function(){return this.shouldUpdate}},{key:"getComputing",value:function(){return!1}},{key:"terminateUpdate",value:function(){this.shouldUpdate=!1}},{key:"destroy",value:function(){this.state.nodes.removeChannel(Zo),this.state.rels.removeChannel(Zo)}}],x&&$h(m.prototype,x),Object.defineProperty(m,"prototype",{writable:!1}),g}(),cs=new Set(["direction","packing"]),Yh="forceDirected",Nl="hierarchical",Gf="grid",ov="free",fs="d3Force",Di="webgl",Uc="canvas";function zc(g){return zc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},zc(g)}function Qo(g,m,x){return m=function(E){var D=function(I,F){if(zc(I)!="object"||!I)return I;var V=I[Symbol.toPrimitive];if(V!==void 0){var z=V.call(I,"string");if(zc(z)!="object")return z;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(I)}(E);return zc(D)=="symbol"?D:String(D)}(m),m in g?Object.defineProperty(g,m,{value:x,enumerable:!0,configurable:!0,writable:!0}):g[m]=x,g}var Ea="down",qc=Qo(Qo(Qo(Qo({},"up","BT"),Ea,"TB"),"left","RL"),"right","LR"),hs="bin",Xh=[hs,"stack"],Ki=["html"],Xu=["html"],gr=["captionHtml"];function gu(g){return gu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},gu(g)}function Vf(g,m){if(g==null)return{};var x,E,D=function(F,V){if(F==null)return{};var z,$,Y={},Z=Object.keys(F);for($=0;$<Z.length;$++)z=Z[$],V.indexOf(z)>=0||(Y[z]=F[z]);return Y}(g,m);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(g);for(E=0;E<I.length;E++)x=I[E],m.indexOf(x)>=0||Object.prototype.propertyIsEnumerable.call(g,x)&&(D[x]=g[x])}return D}function yu(g,m){for(var x=0;x<m.length;x++){var E=m[x];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,Oo(E.key),E)}}function av(g,m,x){return m=Fl(m),function(E,D){if(D&&(gu(D)==="object"||typeof D=="function"))return D;if(D!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rn(E)}(g,jl()?Reflect.construct(m,x||[],Fl(g).constructor):m.apply(g,x))}function jl(){try{var g=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jl=function(){return!!g})()}function Rn(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function Kh(){return Kh=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(g,m,x){var E=function(I,F){for(;!Object.prototype.hasOwnProperty.call(I,F)&&(I=Fl(I))!==null;);return I}(g,m);if(E){var D=Object.getOwnPropertyDescriptor(E,m);return D.get?D.get.call(arguments.length<3?g:x):D.value}},Kh.apply(this,arguments)}function Fl(g){return Fl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(m){return m.__proto__||Object.getPrototypeOf(m)},Fl(g)}function Bl(g,m){return Bl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(x,E){return x.__proto__=E,x},Bl(g,m)}function Zi(g,m,x){return(m=Oo(m))in g?Object.defineProperty(g,m,{value:x,enumerable:!0,configurable:!0,writable:!0}):g[m]=x,g}function Oo(g){var m=function(x,E){if(gu(x)!="object"||!x)return x;var D=x[Symbol.toPrimitive];if(D!==void 0){var I=D.call(x,"string");if(gu(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(g);return gu(m)=="symbol"?m:String(m)}var zi="HierarchicalLayout",Ul=function(g){return g!==void 0?gt(g):g},ty=function(g){function m(D){var I;(function($,Y){if(!($ instanceof Y))throw new TypeError("Cannot call a class as a function")})(this,m),Zi(Rn(I=av(this,m,[D])),"direction",void 0),Zi(Rn(I),"packing",void 0),Zi(Rn(I),"stateDisposers",void 0),Zi(Rn(I),"oldComputing",void 0),Zi(Rn(I),"computing",void 0),Zi(Rn(I),"pendingLayoutData",void 0),Zi(Rn(I),"worker",void 0),Zi(Rn(I),"directionChanged",void 0),Zi(Rn(I),"packingChanged",void 0),Zi(Rn(I),"workersDisabled",void 0),I.direction=Ea,I.packing=hs;var F=I.state,V=F.nodes,z=F.rels;return V.addChannel(zi),z.addChannel(zi),I.stateDisposers=[I.state.reaction(function(){return I.state.graphUpdates},function(){if(V.version!==void 0){var $=V.channels[zi],Y=Object.values($.adds).length>0,Z=Object.values($.removes).length>0,ie=Object.values($.updates),le=ce(ie);I.shouldUpdate=I.shouldUpdate||Y||Z||le}if(z.version!==void 0){var ve=z.channels[zi],ue=Object.values(ve.adds).length>0,ge=Object.values(ve.removes).length>0;I.shouldUpdate=I.shouldUpdate||ue||ge}})],I.shouldUpdate=!0,I.oldComputing=!1,I.computing=!1,I.workersDisabled=D.state.disableWebWorkers,I.setOptions(D),I.worker=Tl("HierarchicalLayout",I.workersDisabled),I.pendingLayoutData=null,I.layout(V.items,V.idToItem,V.idToPosition,z.items),I}var x,E;return function(D,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function");D.prototype=Object.create(I&&I.prototype,{constructor:{value:D,writable:!0,configurable:!0}}),Object.defineProperty(D,"prototype",{writable:!1}),I&&Bl(D,I)}(m,g),x=m,E=[{key:"setOptions",value:function(D){if(D!==void 0&&function($){return Object.keys($).every(function(Y){return cs.has(Y)})}(D)){var I=D.direction,F=I===void 0?Ea:I,V=D.packing,z=V===void 0?hs:V;Object.keys(qc).includes(F)&&(this.directionChanged=this.direction&&this.direction!==F,this.direction=F),Xh.includes(z)&&(this.packingChanged=this.packing&&this.packing!==z,this.packing=z),this.shouldUpdate=this.shouldUpdate||this.directionChanged||this.packingChanged}}},{key:"update",value:function(){var D=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.shouldUpdate||D){var I=this.state,F=I.nodes,V=I.rels,z=this.directionChanged,$=this.packingChanged,Y=Object.values(F.channels[zi].adds).length>0,Z=Object.values(V.channels[zi].adds).length>0,ie=Object.values(F.channels[zi].removes).length>0,le=Object.values(V.channels[zi].removes).length>0,ve=Object.values(F.channels[zi].updates),ue=ce(ve);(D||Y||Z||ie||le||z||$||ue)&&this.layout(F.items,F.idToItem,F.idToPosition,V.items),F.clearChannel(zi),V.clearChannel(zi),this.directionChanged=!1,this.packingChanged=!1}Kh(Fl(m.prototype),"update",this).call(this),this.shouldUpdate=!1,this.oldComputing=this.computing}},{key:"getShouldUpdate",value:function(){return this.shouldUpdate||this.shouldUpdateAnimator}},{key:"getComputing",value:function(){return this.computing}},{key:"layout",value:function(D,I,F,V){var z=this;if(this.worker){var $=Ul(D).map(function(Re){return Re.html,Vf(Re,Ki)}),Y=Ul(I),Z={};Object.keys(Y).forEach(function(Re){var je=Y[Re],ke=(je.html,Vf(je,Xu));Z[Re]=ke});var ie=Ul(V).map(function(Re){return Re.captionHtml,Vf(Re,gr)}),le=Ul(F),ve=this.direction,ue=this.packing,ge=window.devicePixelRatio,Ce={nodes:$,nodeIds:Z,idToPosition:le,rels:ie,direction:ve,packing:ue,pixelRatio:ge,forcedDelay:0};this.computing?this.pendingLayoutData=Ce:(this.worker.port.onmessage=function(Re){var je=Re.data,ke=je.positions,Ye=je.parents,ze=je.waypoints;z.computing&&(z.positions=ke),z.parents=Ye,z.state.setWaypoints(ze),z.pendingLayoutData!==null?(z.worker.port.postMessage(z.pendingLayoutData),z.pendingLayoutData=null):z.computing=!1,z.shouldUpdate=!0,z.startAnimation()},this.computing=!0,this.worker.port.postMessage(Ce))}else Br.info("Hierarchical layout code not yet initialised.")}},{key:"terminateUpdate",value:function(){var D,I;this.computing=!1,this.shouldUpdate=!1,(D=this.state.nodes)===null||D===void 0||D.clearChannel(zi),(I=this.state.rels)===null||I===void 0||I.clearChannel(zi)}},{key:"destroy",value:function(){var D;this.stateDisposers.forEach(function(I){I()}),this.state.nodes.removeChannel(zi),this.state.rels.removeChannel(zi),(D=this.worker)===null||D===void 0||D.port.close()}}],E&&yu(x.prototype,E),Object.defineProperty(x,"prototype",{writable:!1}),m}(rv);function mu(g){return mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},mu(g)}function Mp(g,m){for(var x=0;x<m.length;x++){var E=m[x];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,Wf(E.key),E)}}function Va(g,m,x){return(m=Wf(m))in g?Object.defineProperty(g,m,{value:x,enumerable:!0,configurable:!0,writable:!0}):g[m]=x,g}function Wf(g){var m=function(x,E){if(mu(x)!="object"||!x)return x;var D=x[Symbol.toPrimitive];if(D!==void 0){var I=D.call(x,"string");if(mu(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(g);return mu(m)=="symbol"?m:String(m)}var Lp=function(){function g(E,D){(function(I,F){if(!(I instanceof F))throw new TypeError("Cannot call a class as a function")})(this,g),Va(this,"elementId",void 0),Va(this,"currentValue",void 0),Va(this,"startValue",void 0),Va(this,"currentTime",void 0),Va(this,"duration",void 0),Va(this,"status",void 0),Va(this,"endValue",void 0),Va(this,"startTime",void 0),Va(this,"endTime",void 0),Va(this,"hasNextAnimation",void 0),this.elementId=E,this.startValue=D,this.status=0,this.currentValue=D,this.duration=0}var m,x;return m=g,(x=[{key:"setDuration",value:function(E){this.duration=E,this.setEndTime(this.startTime+this.duration)}},{key:"getStatus",value:function(){return this.status}},{key:"advance",value:function(){if(this.status!==1)return!1;this.currentTime=new Date().getTime();var E,D=this.endTime-this.startTime;return(E=D>0?(this.currentTime-this.startTime)/D:1)>=1?(this.currentValue=this.endValue,this.status=2):(this.currentValue=this.startValue+E*(this.endValue-this.startValue),this.hasNextAnimation=!0),this.hasNextAnimation}},{key:"setEndValue",value:function(E){this.endValue!==E&&(E-this.currentValue!=0?(this.currentTime=new Date().getTime(),this.status=1,this.startValue=this.currentValue,this.endValue=E,this.startTime=this.currentTime,this.setEndTime(this.startTime+this.duration)):this.endValue=E)}},{key:"setEndTime",value:function(E){this.endTime=Math.max(E,this.startTime)}}])&&Mp(m.prototype,x),Object.defineProperty(m,"prototype",{writable:!1}),g}();function bu(g){return bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},bu(g)}function Zh(g,m){var x=Object.keys(g);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(g);m&&(E=E.filter(function(D){return Object.getOwnPropertyDescriptor(g,D).enumerable})),x.push.apply(x,E)}return x}function zl(g){for(var m=1;m<arguments.length;m++){var x=arguments[m]!=null?arguments[m]:{};m%2?Zh(Object(x),!0).forEach(function(E){ds(g,E,x[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(x)):Zh(Object(x)).forEach(function(E){Object.defineProperty(g,E,Object.getOwnPropertyDescriptor(x,E))})}return g}function Qh(g,m){for(var x=0;x<m.length;x++){var E=m[x];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,sv(E.key),E)}}function ds(g,m,x){return(m=sv(m))in g?Object.defineProperty(g,m,{value:x,enumerable:!0,configurable:!0,writable:!0}):g[m]=x,g}function sv(g){var m=function(x,E){if(bu(x)!="object"||!x)return x;var D=x[Symbol.toPrimitive];if(D!==void 0){var I=D.call(x,"string");if(bu(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(g);return bu(m)=="symbol"?m:String(m)}var Hf=function(){function g(){(function(E,D){if(!(E instanceof D))throw new TypeError("Cannot call a class as a function")})(this,g),ds(this,"animations",void 0),ds(this,"durations",void 0),ds(this,"defaultDuration",void 0),ds(this,"hasNextAnimation",void 0),ds(this,"ignoreAnimationsFlag",void 0),this.animations=new Map,this.durations=[],this.durations[0]=0,this.durations[1]=0,this.defaultDuration=150,this.hasNextAnimation=!1,this.ignoreAnimationsFlag=!1}var m,x;return m=g,x=[{key:"advance",value:function(){var E=this;return this.hasNextAnimation=!1,this.animations.forEach(function(D){Object.values(D).forEach(function(I){I.advance()&&(E.hasNextAnimation=!0)})}),this.hasNextAnimation}},{key:"ignoreAnimations",value:function(E){this.ignoreAnimationsFlag=E}},{key:"setOptions",value:function(E){E.fadeDuration!==void 0&&(this.durations[0]=E.fadeDuration),E.sizeDuration!==void 0&&(this.durations[1]=E.sizeDuration)}},{key:"needsToRun",value:function(){return this.hasNextAnimation}},{key:"getValueForAnimationName",value:function(E,D,I){var F,V,z=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;if(this.ignoreAnimationsFlag)return I;var $=(F=this.getById(E))!==null&&F!==void 0?F:{};if($[D]===void 0){var Y=z===1?this.createSizeAnimation(0,E,D):this.createFadeAnimation(0,E,D);Y.setEndValue(I),V=Y.currentValue}else{var Z=$[D];if(Z.currentValue===I)return I;Z.setEndValue(I),V=Z.currentValue}return this.hasNextAnimation=!0,V}},{key:"createAnimation",value:function(E,D,I){var F,V=new Lp(D,E),z=(F=this.animations.get(D))!==null&&F!==void 0?F:{};return this.animations.set(D,zl(zl({},z),{},ds({},I,V))),V}},{key:"getById",value:function(E){return this.animations.get(E)}},{key:"createFadeAnimation",value:function(E,D,I){var F,V=this.createAnimation(E,D,I);return V.setDuration((F=this.durations[0])!==null&&F!==void 0?F:this.defaultDuration),V}},{key:"createSizeAnimation",value:function(E,D,I){var F,V=this.createAnimation(E,D,I);return V.setDuration((F=this.durations[1])!==null&&F!==void 0?F:this.defaultDuration),V}}],x&&Qh(m.prototype,x),Object.defineProperty(m,"prototype",{writable:!1}),g}();function Ku(g){return Ku=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},Ku(g)}function uv(g,m){for(var x=0;x<m.length;x++){var E=m[x];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,Jh(E.key),E)}}function Jh(g){var m=function(x,E){if(Ku(x)!="object"||!x)return x;var D=x[Symbol.toPrimitive];if(D!==void 0){var I=D.call(x,"string");if(Ku(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(g);return Ku(m)=="symbol"?m:String(m)}var xi=64,_u=function(){function g(){var E,D,I;(function(F,V){if(!(F instanceof V))throw new TypeError("Cannot call a class as a function")})(this,g),E=this,I=void 0,(D=Jh(D="cache"))in E?Object.defineProperty(E,D,{value:I,enumerable:!0,configurable:!0,writable:!0}):E[D]=I,this.cache={}}var m,x;return m=g,x=[{key:"getImage",value:function(E){var D=arguments.length>1&&arguments[1]!==void 0&&arguments[1],I=this.getOrCreateEntry(E),F=D?"inverted":"image",V=I[F];return V===void 0&&(V=this.loadImage(E),I[F]=V),this.drawIfNeeded(V,D),V.canvas}},{key:"getOrCreateEntry",value:function(E){return this.cache[E]===void 0&&(this.cache[E]={}),this.cache[E]}},{key:"invertCanvas",value:function(E){for(var D=E.getImageData(0,0,xi,xi),I=D.data,F=0;F<4096;F++){var V=4*F;I[V]^=255,I[V+1]^=255,I[V+2]^=255}E.putImageData(D,0,0)}},{key:"loadImage",value:function(E){var D=document.createElement("canvas");D.width=xi,D.height=xi;var I=new Image;return I.src=E,I.crossOrigin="anonymous",{canvas:D,image:I,drawn:!1}}},{key:"drawIfNeeded",value:function(E,D){var I=E.image,F=E.canvas;if(!E.drawn&&I.complete){var V=F.getContext("2d");try{V.drawImage(I,0,0,xi,xi)}catch(z){Br.error("Failed to draw image",I.src,z),V.beginPath(),V.strokeStyle="black",V.rect(0,0,xi,xi),V.moveTo(0,0),V.lineTo(xi,xi),V.moveTo(0,xi),V.lineTo(xi,0),V.stroke(),V.closePath()}D&&this.invertCanvas(V),E.drawn=!0}}}],x&&uv(m.prototype,x),Object.defineProperty(m,"prototype",{writable:!1}),g}();const lv=_u;function ql(g){return ql=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},ql(g)}function cv(g,m){(m==null||m>g.length)&&(m=g.length);for(var x=0,E=new Array(m);x<m;x++)E[x]=g[x];return E}function fv(g,m){for(var x=0;x<m.length;x++){var E=m[x];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,hv(E.key),E)}}function wr(g,m,x){return(m=hv(m))in g?Object.defineProperty(g,m,{value:x,enumerable:!0,configurable:!0,writable:!0}):g[m]=x,g}function hv(g){var m=function(x,E){if(ql(x)!="object"||!x)return x;var D=x[Symbol.toPrimitive];if(D!==void 0){var I=D.call(x,"string");if(ql(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(g);return ql(m)=="symbol"?m:String(m)}var Np=function(){function g(E,D,I){(function(F,V){if(!(F instanceof V))throw new TypeError("Cannot call a class as a function")})(this,g),wr(this,"key",void 0),wr(this,"rels",void 0),wr(this,"waypointPath",void 0),wr(this,"selfReferring",void 0),wr(this,"fromId",void 0),wr(this,"toId",void 0),wr(this,"angles",void 0),wr(this,"labelInfo",void 0),this.key=E,this.rels=[],this.selfReferring=D===I,this.fromId=D,this.toId=I,this.labelInfo={},this.angles=[]}var m,x;return m=g,x=[{key:"insert",value:function(E){this.rels.push({rel:E})}},{key:"setLabelInfo",value:function(E,D){this.labelInfo[E]=D}},{key:"remove",value:function(E){var D=E.id,I=this.rels,F=I.findIndex(function(Y){return Y.rel.id===D});if(F!==-1&&(I.splice(F,1),F===0&&I.length>0)){var V=I[0].rel,z=V.from,$=V.to;this.fromId=z,this.toId=$}}},{key:"size",value:function(){return this.rels.length}},{key:"maxFontSize",value:function(){return Math.max.apply(Math,function(D){if(Array.isArray(D))return cv(D)}(E=this.rels.map(function(D){var I=D.rel;return(0,r.isNumber)(I.captionSize)?I.captionSize:1}))||function(D){if(typeof Symbol<"u"&&D[Symbol.iterator]!=null||D["@@iterator"]!=null)return Array.from(D)}(E)||function(D,I){if(D){if(typeof D=="string")return cv(D,I);var F=Object.prototype.toString.call(D).slice(8,-1);return F==="Object"&&D.constructor&&(F=D.constructor.name),F==="Map"||F==="Set"?Array.from(D):F==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(F)?cv(D,I):void 0}}(E)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}());var E}},{key:"relIsOppositeDirection",value:function(E){var D=E.from,I=E.to,F=this.fromId,V=this.toId;return D!==F&&I!==V||D===V&&I===F}},{key:"indexOf",value:function(E){var D=E.id;return this.rels.findIndex(function(I){return I.rel.id===D})}},{key:"getRel",value:function(E){var D=this.rels;return E<0||E>=D.length?null:D[E].rel}},{key:"setWaypoints",value:function(E){this.waypointPath=E}},{key:"setAngles",value:function(E){this.angles=E}}],x&&fv(m.prototype,x),Object.defineProperty(m,"prototype",{writable:!1}),g}(),Gl=Ac,dv=2*Math.PI/50,jp=.1*Math.PI;function $f(g){return $f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},$f(g)}function li(g,m){var x=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!x){if(Array.isArray(g)||(x=function(z,$){if(z){if(typeof z=="string")return Fp(z,$);var Y=Object.prototype.toString.call(z).slice(8,-1);return Y==="Object"&&z.constructor&&(Y=z.constructor.name),Y==="Map"||Y==="Set"?Array.from(z):Y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Y)?Fp(z,$):void 0}}(g))||m){x&&(g=x);var E=0,D=function(){};return{s:D,n:function(){return E>=g.length?{done:!0}:{done:!1,value:g[E++]}},e:function(z){throw z},f:D}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I,F=!0,V=!1;return{s:function(){x=x.call(g)},n:function(){var z=x.next();return F=z.done,z},e:function(z){V=!0,I=z},f:function(){try{F||x.return==null||x.return()}finally{if(V)throw I}}}}function Fp(g,m){(m==null||m>g.length)&&(m=g.length);for(var x=0,E=new Array(m);x<m;x++)E[x]=g[x];return E}function Yf(g,m){for(var x=0;x<m.length;x++){var E=m[x];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,Xf(E.key),E)}}function ed(g,m,x){return(m=Xf(m))in g?Object.defineProperty(g,m,{value:x,enumerable:!0,configurable:!0,writable:!0}):g[m]=x,g}function Xf(g){var m=function(x,E){if($f(x)!="object"||!x)return x;var D=x[Symbol.toPrimitive];if(D!==void 0){var I=D.call(x,"string");if($f(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(g);return $f(m)=="symbol"?m:String(m)}var Bp=function(g){var m=[];if(g.length===0)m.push({size:2*Math.PI,start:0});else{for(var x=g.length-1;x>=0;x--){var E=void 0,D=void 0;x===0?(D=g[g.length-1],E=g[x]-g[g.length-1]+2*Math.PI):(D=g[x-1],E=g[x]-g[x-1]),m.push({size:E,start:D})}m.sort(function(I,F){return F.size-I.size})}return m},Oa=function(g,m){for(;m>g.length||g[0].size>2*g[m-1].size;)g.push({size:g[0].size/2,start:g[0].start}),g.push({size:g[0].size/2,start:g[0].start+g[0].size/2}),g.shift(),g.sort(function(x,E){return E.size-x.size});return g},Zu=function(){function g(E,D){(function(F,V){if(!(F instanceof V))throw new TypeError("Cannot call a class as a function")})(this,g),ed(this,"bundles",void 0),ed(this,"nodeToBundles",void 0),this.bundles={},this.nodeToBundles={};var I=E.reduce(function(F,V){return F[V.id]=V,F},{});this.updateData(I,{},D)}var m,x;return m=g,x=[{key:"getBundle",value:function(E){var D=this.bundles,I=this.nodeToBundles,F=this.generatePairId(E.from,E.to),V=D[F];return V===void 0&&(V=new Np(F,E.from,E.to),D[F]=V,I[E.from]===void 0&&(I[E.from]=[]),I[E.to]===void 0&&(I[E.to]=[]),I[E.from].push(V),I[E.to].push(V)),V}},{key:"updateData",value:function(E,D,I){for(var F=this.bundles,V=this.nodeToBundles,z=function(Ye,ze){var Ke=V[ze].findIndex(function(Xe){return Xe===Ye});Ke!==-1&&V[ze].splice(Ke,1),V[ze].length===0&&delete V[ze]},$=Object.values(E),Y=Object.values(D),Z=0,ie=$;Z<ie.length;Z++){var le=ie[Z];this.getBundle(le).insert(le)}for(var ve=0,ue=Y;ve<ue.length;ve++){var ge=ue[ve],Ce=this.getBundle(ge);Ce.remove(ge),Ce.size()===0&&(delete F[Ce.key],z(Ce,ge.from),z(Ce,ge.to))}for(var Re=0,je=Object.keys(F);Re<je.length;Re++){var ke=F[je[Re]];ke.setWaypoints(I["".concat(ke.fromId,"-").concat(ke.toId)])}}},{key:"updatePositions",value:function(E){for(var D=this.nodeToBundles,I=0,F=Object.keys(E);I<F.length;I++){var V,z=F[I],$=(V=D[z])!==null&&V!==void 0?V:[];if($.length!==0){var Y=$.find(function(We){return We.selfReferring}),Z=$.filter(function(We){return!We.selfReferring});if(Y!==void 0){var ie,le=[],ve=li(Z);try{for(ve.s();!(ie=ve.n()).done;){var ue=ie.value,ge=E[ue.fromId],Ce=E[ue.toId];if(ge!==void 0&&Ce!==void 0)for(var Re=dv*ue.size(),je=ge.id===z?Math.atan2(Ce.y-ge.y,Ce.x-ge.x):Math.atan2(ge.y-Ce.y,ge.x-Ce.x),ke=0;ke<ue.size();ke++)le.push(je+Re/2-ke*dv);else{var Ye=ge===void 0?ue.fromId:ue.toId;Br.warn("Arrowbundler: Node with id ".concat(Ye," is not in position map"))}}}catch(We){ve.e(We)}finally{ve.f()}var ze=le.map(function(We){return(We+2*Math.PI)%(2*Math.PI)}).sort(),Ke=Bp(ze);Oa(Ke,Y.size());var Xe=Ke.map(function(We){return We.start+We.size/2}).slice(0,Y.size());Y.setAngles(Xe)}}}}},{key:"generatePairId",value:function(E,D){return[E.toString(),D.toString()].sort(function(I,F){return I.localeCompare(F)}).join("-")}}],x&&Yf(m.prototype,x),Object.defineProperty(m,"prototype",{writable:!1}),g}();function wu(g){return wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},wu(g)}function td(g,m){var x=Object.keys(g);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(g);m&&(E=E.filter(function(D){return Object.getOwnPropertyDescriptor(g,D).enumerable})),x.push.apply(x,E)}return x}function rd(g,m){for(var x=0;x<m.length;x++){var E=m[x];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,nd(E.key),E)}}function Qu(g,m,x){return(m=nd(m))in g?Object.defineProperty(g,m,{value:x,enumerable:!0,configurable:!0,writable:!0}):g[m]=x,g}function nd(g){var m=function(x,E){if(wu(x)!="object"||!x)return x;var D=x[Symbol.toPrimitive];if(D!==void 0){var I=D.call(x,"string");if(wu(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(g);return wu(m)=="symbol"?m:String(m)}var Kf=function(g,m){return(0,r.isFinite)(g.x)&&(0,r.isFinite)(g.y)&&(0,r.isFinite)(m.x)&&(0,r.isFinite)(m.y)},Gc=function(g,m){if(g===void 0||m===void 0||!Kf(g,m))return!1;var x=m.x-g.x,E=m.y-g.y,D=ot();return x*x+E*E<100*D*D},Qi=function(){function g(E,D){(function(I,F){if(!(I instanceof F))throw new TypeError("Cannot call a class as a function")})(this,g),Qu(this,"p1",void 0),Qu(this,"p2",void 0),Qu(this,"unit",void 0),Qu(this,"norm",void 0),Qu(this,"length",void 0),Qu(this,"vector",void 0),this.p1=E,this.p2=D,this.vector=this.getVector(),this.length=this.getLength(),this.unit=this.getUnitVector(),this.norm=this.getUnitNormalVector()}var m,x;return m=g,x=[{key:"getVector",value:function(){return{x:this.p2.x-this.p1.x,y:this.p2.y-this.p1.y}}},{key:"getLength",value:function(){var E=this.vector,D=E.x,I=E.y;return Math.sqrt(D*D+I*I)}},{key:"getUnitVector",value:function(){var E=this.vector,D=this.length;return{x:E.x/D,y:E.y/D}}},{key:"getUnitNormalVector",value:function(){return{x:this.unit.y,y:-this.unit.x}}}],x&&rd(m.prototype,x),Object.defineProperty(m,"prototype",{writable:!1}),g}(),vs=function(g,m,x){var E={x:m.x-g.x,y:m.y-g.y},D=function($,Y){var Z=($.x*Y.x+$.y*Y.y)/(Y.x*Y.x+Y.y*Y.y);return(0,r.clamp)(Z,0,1)}({x:x.x-g.x,y:x.y-g.y},E),I=g.x+D*E.x,F=g.y+D*E.y,V=I-x.x,z=F-x.y;return Math.sqrt(V*V+z*z)},id=function(g,m,x,E){if(m.x===x.x&&m.y===x.y)return m;var D=m.y-g.y,I=g.x-m.x,F=D*g.x+I*g.y,V=E.y-x.y,z=x.x-E.x,$=V*x.x+z*x.y,Y=D*z-V*I;return Y===0?null:{x:(z*F-I*$)/Y,y:(D*$-V*F)/Y}},Ns=function(g,m,x,E){var D,I,F,V=1e9,z=function(Y){for(var Z=1;Z<arguments.length;Z++){var ie=arguments[Z]!=null?arguments[Z]:{};Z%2?td(Object(ie),!0).forEach(function(le){Qu(Y,le,ie[le])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Y,Object.getOwnPropertyDescriptors(ie)):td(Object(ie)).forEach(function(le){Object.defineProperty(Y,le,Object.getOwnPropertyDescriptor(ie,le))})}return Y}({},g),$={x:0,y:0};for(I=1;I<10;I++)F=.1*I,$.x=Math.pow(1-F,2)*g.x+2*F*(1-F)*x.x+Math.pow(F,2)*m.x,$.y=Math.pow(1-F,2)*g.y+2*F*(1-F)*x.y+Math.pow(F,2)*m.y,I>0&&(V=(D=vs(z,$,E))<V?D:V),z.x=$.x,z.y=$.y;return V},Up=Li(3269),vv=Li.n(Up);function Vl(g){return Vl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},Vl(g)}function Vc(g){return function(m){if(Array.isArray(m))return ad(m)}(g)||function(m){if(typeof Symbol<"u"&&m[Symbol.iterator]!=null||m["@@iterator"]!=null)return Array.from(m)}(g)||gv(g)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function pv(g,m){var x=Object.keys(g);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(g);m&&(E=E.filter(function(D){return Object.getOwnPropertyDescriptor(g,D).enumerable})),x.push.apply(x,E)}return x}function od(g){for(var m=1;m<arguments.length;m++){var x=arguments[m]!=null?arguments[m]:{};m%2?pv(Object(x),!0).forEach(function(E){var D,I,F;D=g,I=E,F=x[E],I=function(V){var z=function($,Y){if(Vl($)!="object"||!$)return $;var Z=$[Symbol.toPrimitive];if(Z!==void 0){var ie=Z.call($,"string");if(Vl(ie)!="object")return ie;throw new TypeError("@@toPrimitive must return a primitive value.")}return String($)}(V);return Vl(z)=="symbol"?z:String(z)}(I),I in D?Object.defineProperty(D,I,{value:F,enumerable:!0,configurable:!0,writable:!0}):D[I]=F}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(x)):pv(Object(x)).forEach(function(E){Object.defineProperty(g,E,Object.getOwnPropertyDescriptor(x,E))})}return g}function gv(g,m){if(g){if(typeof g=="string")return ad(g,m);var x=Object.prototype.toString.call(g).slice(8,-1);return x==="Object"&&g.constructor&&(x=g.constructor.name),x==="Map"||x==="Set"?Array.from(g):x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x)?ad(g,m):void 0}}function ad(g,m){(m==null||m>g.length)&&(m=g.length);for(var x=0,E=new Array(m);x<m;x++)E[x]=g[x];return E}var Wl="",yv=function(g){return!(!g||!isNaN(Number(g))||g.toLowerCase()===g.toUpperCase())&&g===g.toUpperCase()},zp=function(g){var m=g[g.length-1],x=g[g.length-2];return!(!m||!isNaN(Number(m))||m.toLowerCase()===m.toUpperCase())&&!(!x||!isNaN(Number(x))||x.toLowerCase()===x.toUpperCase())&&yv(m)&&!yv(x)},qi=function(g,m,x,E){for(var D,I=arguments.length>4&&arguments[4]!==void 0&&arguments[4],F=[],V=[],z=0,$=0,Y=!1,Z=!1,ie=0;ie<E;ie++)F[ie]=x(ie,E);for(var le,ve=function(){D=g.slice(z,ue);var ge,Ce,Re=m(D),je=F[$];if(Re>je||(Ce=g[ue-1],`
\r\v`.includes(Ce))){if(!($<E-1)){if(I)return{v:[]};for(var ke=ue;Re>je;){for(ke-=1;ge=g[ke-1],` 	
\r\v`.includes(ge);)ke-=1;if(!(ke-z>1)){D="",Z=!0,Y=!1;break}D=g.slice(z,ke),Re=m(D),Z=!0,Y=!1}return V[$]={text:D,hasEllipsisChar:Z,hasHyphenChar:Y},{v:V}}Y=!1,Z=!1;var Ye=function(Ke){var Xe=Ke.length,We=Math.min(Xe-1,3);if(Xe===1)return{hyphen:!1,cnt:0};for(var it=0;it<We;it++){var mt=Ke[Ke.length-(it+1)];if(mt===" "||mt.toLowerCase()===mt.toUpperCase())return{hyphen:!1,cnt:it+1};var It=Ke.slice(0,Ke.length-it);if(zp(It))return{hyphen:!1,cnt:it+1}}return{hyphen:!0,cnt:1}}(D),ze=ue-Ye.cnt;if(Ye.hyphen)for(D=g.slice(z,ze),Re=m(D),Y=!0;Re>je;){if(!(ze-z>1)){D=g[z],ze=z+1,Re=m(D),Y=!1;break}ze-=1,D=g.slice(z,ze),Re=m(D),Y=!0}else D=(D=g.slice(z,ze)).trim();V[$]={text:D,hasEllipsisChar:Z,hasHyphenChar:Y},z=ze,$+=1}},ue=1;ue<=g.length;ue++)if(le=ve())return le.v;return D=g.slice(z,g.length),V[$]={text:D,hasEllipsisChar:Z,hasHyphenChar:!1},V},Wa=function(g,m,x,E,D,I,F,V){g.font="bold ".concat(E,"px ").concat(x).replace(/"/g,"");for(var z=function(ve){var ue;return(ue=g.measureText(ve))===null||ue===void 0?void 0:ue.width},$=I?(F<4?["",""]:[""]).length:0,Y=function(ve,ue){return function(ge,Ce,Re){var je=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"top",ke=.98*Re,Ye=.89*Re,ze=.95*Re;return Ce===1?ke:Ce===2?ze:Ce===3&&je==="top"?ge===0||ge===2?Ye:ke:Ce===4&&je==="top"?ge===0||ge===3?.78*Re:ze:Ce===5&&je==="top"?ge===0||ge===4?.65*Re:ge===1||ge===3?Ye:ze:ke}(ve+$,ue+$,D)},Z=1,ie=[],le=function(){if((ie=function(ue,ge,Ce,Re){var je,ke=ue.split(/\s/g).filter(function(bt){return bt.length>0}),Ye=[],ze=null,Ke=function(bt){return ge(bt)>Ce(Ye.length,Re)},Xe=function(bt,jt){var Ct=typeof Symbol<"u"&&bt[Symbol.iterator]||bt["@@iterator"];if(!Ct){if(Array.isArray(bt)||(Ct=gv(bt))){Ct&&(bt=Ct);var Ee=0,we=function(){};return{s:we,n:function(){return Ee>=bt.length?{done:!0}:{done:!1,value:bt[Ee++]}},e:function(vt){throw vt},f:we}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var xe,st=!0,Ze=!1;return{s:function(){Ct=Ct.call(bt)},n:function(){var vt=Ct.next();return st=vt.done,vt},e:function(vt){Ze=!0,xe=vt},f:function(){try{st||Ct.return==null||Ct.return()}finally{if(Ze)throw xe}}}}(ke);try{for(Xe.s();!(je=Xe.n()).done;){var We=je.value,it=ze?"".concat(ze," ").concat(We):We;if(ge(it)<Ce(Ye.length,Re))ze=it;else{if(ze!==null){var mt=Ke(ze);Ye.push({text:ze,overflowed:mt})}if(ze=We,Ye.length>Re)return[]}}}catch(bt){Xe.e(bt)}finally{Xe.f()}if(ze){var It=Ke(ze);Ye.push({text:ze,overflowed:It})}return Ye.length<=Re?Ye:[]}(m,z,Y,Z)).length===0)ie=qi(m,z,Y,Z,F>Z);else if(ie.some(function(ue){return ue.overflowed})){var ve=Z;ie=ie.reduce(function(ue,ge){var Ce=F-ue.length;if(Ce===0){var Re=ue[ue.length-1];return Re.text.endsWith(Wl)||(z(Re.text)+z(Wl)>Y(ue.length,ve)?(ue[ue.length-1].text=Re.text.slice(0,-2),ue[ue.length-1].hasEllipsisChar=!0):(ue[ue.length-1].text=Re.text,ue[ue.length-1].hasEllipsisChar=!0)),ue}if(ge.overflowed){var je=qi(ge.text,z,Y,Ce);ue=ue.concat(je)}else ue.push({text:ge.text,hasEllipsisChar:!1,hasHyphenChar:!1});return ue},[])}else ie=ie.map(function(ue){return od(od({},ue),{},{hasEllipsisChar:!1,hasHyphenChar:!1})});Z+=1};ie.length===0;)le();return Array.from(ie)},mv=function(){var g=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).reduce(function(m,x,E){var D=x.value;if(D){var I="".concat(E>0&&m.length?", ":"").concat(D);return[].concat(Vc(m),[od(od({},x),{},{value:I,chars:I.split("").map(function(F,V){var z,$;return E!==0&&m.length?V<2?null:Vc((z=x.styles)!==null&&z!==void 0?z:[]):Vc(($=x.styles)!==null&&$!==void 0?$:[])})})])}return[]},[]);return{stylesPerChar:g.reduce(function(m,x){return[].concat(Vc(m),Vc(x.chars))},[]),fullCaption:g.map(function(m){return m.value}).join("")}};function Zf(g,m){(m==null||m>g.length)&&(m=g.length);for(var x=0,E=new Array(m);x<m;x++)E[x]=g[x];return E}var Qf=[[.04,1],[100,2]],js=[[.8,1.1],[3,1.6],[8,2.5]],qp=[[js[0][0],1],[100,1.25]],Ju=function(g,m){if(g.includes("rgba"))return g;if(g.includes("rgb")){var x=g.substr(g.indexOf("(")+1).replace(")","").split(",");return"rgba(".concat(x[0],",").concat(x[1],",").concat(x[2],",").concat(m,")")}var E=vv().get.rgb(g);return E===null?g:"rgba(".concat(E[0],",").concat(E[1],",").concat(E[2],",").concat(m,")")},ps=function(g,m,x,E){var D=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],I=arguments.length>5&&arguments[5]!==void 0&&arguments[5],F=E.headPosition,V=E.headAngle,z=E.headHeight,$=E.headChinHeight,Y=E.headWidth,Z=Math.cos(V),ie=Math.sin(V),le=function(ge,Ce){return{x:F.x+ge*Z-Ce*ie,y:F.y+ge*ie+Ce*Z}},ve=[le($-z,0),le(-z,Y/2),le(0,0),le(-z,-Y/2)],ue={lineWidth:g.lineWidth,strokeStyle:g.strokeStyle,fillStyle:g.fillStyle};g.lineWidth=m,g.strokeStyle=x,g.fillStyle=x,function(ge,Ce,Re,je){if(ge.beginPath(),Ce.length>0){var ke=Ce[0];ge.moveTo(ke.x,ke.y)}for(var Ye=1;Ye<Ce.length;Ye++){var ze=Ce[Ye];ge.lineTo(ze.x,ze.y)}ge.closePath(),Re&&ge.fill(),je&&ge.stroke()}(g,ve,D,I),g.lineWidth=ue.lineWidth,g.strokeStyle=ue.strokeStyle,g.fillStyle=ue.fillStyle},Wc=function(g,m,x,E,D){var I=E;D.forEach(function(F){var V=F.width,z=F.color,$=I+V;g.beginPath(),g.fillStyle=z,g.arc(m,x,$,0,2*Math.PI,!1),g.arc(m,x,I,2*Math.PI,0,!0),g.fill(),g.closePath(),I=$})},Hl=function(g,m,x,E){g.beginPath(),g.arc(m,x,E,0,2*Math.PI,!1),g.closePath()},el=function(g,m,x,E,D){g.beginPath(),g.fillStyle=E,Hl(g,m,x,D),g.fill(),g.closePath()};function sd(g,m){var x=m.find(function(D){return g<D[0]}),E=m[m.length-1][1];return x!==void 0?x[1]:E}var bv=function(g,m,x,E,D,I,F,V,z,$){var Y=E,Z=0,ie=0,le="".concat(D,"px ").concat(I),ve="normal ".concat(le);m.forEach(function(ue){var ge;g.font=ve;var Ce,Re=-((ge=g.measureText(ue.text))===null||ge===void 0?void 0:ge.width)/2,je=ue.text?function(ke){if(Array.isArray(ke))return Zf(ke)}(Ce=ue.text)||function(ke){if(typeof Symbol<"u"&&ke[Symbol.iterator]!=null||ke["@@iterator"]!=null)return Array.from(ke)}(Ce)||function(ke,Ye){if(ke){if(typeof ke=="string")return Zf(ke,Ye);var ze=Object.prototype.toString.call(ke).slice(8,-1);return ze==="Object"&&ke.constructor&&(ze=ke.constructor.name),ze==="Map"||ze==="Set"?Array.from(ke):ze==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ze)?Zf(ke,Ye):void 0}}(Ce)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}():[];ue.hasHyphenChar||ue.hasEllipsisChar||je.push(" "),je.forEach(function(ke){var Ye,ze=g.measureText(ke).width,Ke=(Ye=x[ie])!==null&&Ye!==void 0?Ye:[],Xe=Ke.includes("bold"),We=Ke.includes("italic");g.font=Xe&&We?"italic 600 ".concat(le):We?"italic 400 ".concat(le):Xe?"bold ".concat(le):ve,Ke.includes("underline")&&g.fillRect(V+Re+Z,z+Y+.2,ze,.2),ue.hasEllipsisChar?g.fillText(ke,V+Re+Z-$/2,z+Y):g.fillText(ke,V+Re+Z,z+Y),Z+=ze,ie+=1}),g.font=ve,ue.hasHyphenChar&&g.fillText("",V+Re+Z,z+Y),ue.hasEllipsisChar&&g.fillText(Wl,V+Re+Z-$/2,z+Y),Z=0,Y+=F})},uo=function(g,m){return{x:g.x+m.x,y:g.y+m.y}},Jf=function(g,m){return{x:g.x-m.x,y:g.y-m.y}},$l=function(g,m){return{x:g.x*m,y:g.y*m}},Jo=function(g,m){return function(x){return Math.sqrt(x.x*x.x+x.y*x.y)}(Jf(g,m))},Or=function(g,m){return{x:Math.cos(g)*m,y:Math.sin(g)*m}};function eh(g,m){var x=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!x){if(Array.isArray(g)||(x=function(z,$){if(z){if(typeof z=="string")return ko(z,$);var Y=Object.prototype.toString.call(z).slice(8,-1);return Y==="Object"&&z.constructor&&(Y=z.constructor.name),Y==="Map"||Y==="Set"?Array.from(z):Y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Y)?ko(z,$):void 0}}(g))||m){x&&(g=x);var E=0,D=function(){};return{s:D,n:function(){return E>=g.length?{done:!0}:{done:!1,value:g[E++]}},e:function(z){throw z},f:D}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I,F=!0,V=!1;return{s:function(){x=x.call(g)},n:function(){var z=x.next();return F=z.done,z},e:function(z){V=!0,I=z},f:function(){try{F||x.return==null||x.return()}finally{if(V)throw I}}}}function ko(g,m){(m==null||m>g.length)&&(m=g.length);for(var x=0,E=new Array(m);x<m;x++)E[x]=g[x];return E}var Hn=2*Math.PI,Ji=Math.PI/2,_v=function(g,m,x,E,D,I){var F={x:(g.x+m.x)/2,y:(g.y+m.y)/2},V={x:g.x,y:g.y},z={x:m.x,y:m.y},$=new Qi(z,V),Y=function(ie,le){var ve=0;return ie&&(ve+=ie),le&&(ve-=le),ve}(E,x);F.x+=Y/2*$.unit.x,F.y+=Y/2*$.unit.y;var Z=I.size()/2-I.indexOf(D);return F.x+=Z*$.unit.x,F.y+=Z*$.unit.y,F},Yl=function(g){var m=ot(),x=g.size,E=g.selected;return((x??Qn)+4+(E===!0?4:0))*m},Ha=function(g,m){var x=ot();g.shadowColor=m.color,g.shadowBlur=m.width*x,g.shadowOffsetX=0,g.shadowOffsetY=0},Hc=function(g){g.shadowColor="rgba(0,0,0,0)",g.shadowBlur=0,g.shadowOffsetX=0,g.shadowOffsetY=0},ea=function(g,m,x,E,D){var I,F,V=arguments.length>5&&arguments[5]!==void 0&&arguments[5],z=function(we){var xe=arguments.length>1&&arguments[1]!==void 0&&arguments[1],st=we.norm.x,Ze=we.norm.y;return xe?{x:-st,y:-Ze}:we.norm},$=ot(),Y=m.indexOf(g),Z=(m.size()-1)/2,ie=Y>Z,le=Math.abs(Y-Z),ve=D?17*m.maxFontSize():8,ue=(m.size()-1)*ve*$,ge=function(we,xe,st,Ze,vt,Mt,Ut){var zt,Er=arguments.length>7&&arguments[7]!==void 0&&arguments[7],Tr=ot(),Ur=we.size(),xn=Ur>1,jn=we.relIsOppositeDirection(Mt),yn=jn?st:xe,Yr=jn?xe:st,zr=we.waypointPath,un=zr==null?void 0:zr.points,mn=zr==null?void 0:zr.from,ri=zr==null?void 0:zr.to,tn=Gc(yn,mn)&&Gc(Yr,ri)||Gc(Yr,mn)&&Gc(yn,ri),In=tn?un[1]:null,ni=tn?un[un.length-2]:null,ii=Yl(yn),fi=Yl(Yr),rn=function(ai,mi){return Math.atan2(ai.y-mi.y,ai.x-mi.x)},yi=Math.max(Math.PI,Hn/(Ur/2)),bn=xn?Ze*yi*(Ut?1:-1)/((zt=yn.size)!==null&&zt!==void 0?zt:Qn):0,Fo=rn(tn?In:Yr,yn),ia=tn?rn(Yr,ni):Fo,il=function(ai,mi,Od,ic){return{x:ai.x+Math.cos(mi)*Od*(ic?-1:1),y:ai.y+Math.sin(mi)*Od*(ic?-1:1)}},ec=function(ai,mi){return il(yn,Fo+ai,mi,!1)},ol=function(ai,mi){return il(Yr,ia-ai,mi,!0)},Xa=function(ai,mi){return{x:ai.x+(mi.x-ai.x)/2,y:ai.y+(mi.y-ai.y)/2}},oi=function(ai,mi){return Math.sqrt((ai.x-mi.x)*(ai.x-mi.x)+(ai.y-mi.y)*(ai.y-mi.y))*Tr},Sn=ec(bn,ii),Vi=ol(bn,fi),oa=xn?ec(0,ii):null,Bo=xn?ol(0,fi):null,qs=200*Tr,hi=[];if(tn){var ef=oi(Sn,In)<qs;if(xn&&!ef){var fh=Xa(oa,In);hi.push(new Qi(Sn,fh)),hi.push(new Qi(fh,In))}else hi.push(new Qi(Sn,In));for(var tc=2;tc<un.length-1;tc++)hi.push(new Qi(un[tc-1],un[tc]));var $v=oi(Vi,ni)<qs;if(xn&&!$v){var tf=Xa(Bo,ni);hi.push(new Qi(ni,tf)),hi.push(new Qi(tf,Vi))}else hi.push(new Qi(ni,Vi))}else{var rc=xn?oi(oa,Bo):0;if(xn&&rc>2*(30*Tr+Math.min(ii,fi)))if(Er){var rf=_v(yn,Yr,ii,fi,Mt,we);hi.push(new Qi(Sn,rf)),hi.push(new Qi(rf,Vi))}else{var Gs=Ze*vt,Vs=30+ii,hh=Math.sqrt(Vs*Vs+Gs*Gs),nc=30+fi,dh=Math.sqrt(nc*nc+Gs*Gs),nf=ec(0,hh),Ed=ol(0,dh);hi.push(new Qi(Sn,nf)),hi.push(new Qi(nf,Ed)),hi.push(new Qi(Ed,Vi))}else if(rc>(ii+fi)/2){var vh=_v(yn,Yr,ii,fi,Mt,we);hi.push(new Qi(Sn,vh)),hi.push(new Qi(vh,Vi))}else hi.push(new Qi(Sn,Vi))}return hi}(m,x,E,le,ve,g,ie,V),Ce=[],Re=ge[0],je=z(Re,ie);Ce.push({x:Re.p1.x+je.x,y:Re.p1.y+je.y});for(var ke=1;ke<ge.length;ke++)if(m.size()===1)Ce.push(ge[ke-1].p2);else{var Ye=ge[ke-1],ze=ge[ke],Ke=z(Ye,ie),Xe=z(ze,ie),We=uo(Ye.p1,$l(Ke,ue/2)),it=uo(Ye.p2,$l(Ke,ue/2)),mt=uo(ze.p1,$l(Xe,ue/2)),It=uo(ze.p2,$l(Xe,ue/2)),bt=null;F=Xe,(I=Ke).x*F.x+I.y*F.y<.99&&(bt=id(We,it,mt,It));var jt=bt!==null?Jf(bt,Ye.p2):$l(Ke,ue/2);Ce.push(uo(Ye.p2,$l(jt,le/Z)))}var Ct=ge[ge.length-1],Ee=z(Ct,ie);return Ce.push({x:Ct.p2.x+Ee.x,y:Ct.p2.y+Ee.y}),m.relIsOppositeDirection(g)?Ce.reverse():Ce},$n=function(g,m,x,E,D,I,F,V){var z,$=arguments.length>8&&arguments[8]!==void 0&&arguments[8],Y=ot(),Z=D.selected,ie=D.captions,le=ie===void 0?[]:ie,ve=D.caption,ue=ve===void 0?"":ve,ge=D.width,Ce=D.disabled,Re=D.captionAlign,je=Re===void 0?"top":Re,ke=D.captionSize,Ye=ke===void 0?1:ke,ze=le.length>0?(z=mv(le))===null||z===void 0?void 0:z.fullCaption:ue;if(ze!==void 0){var Ke=6*Ye*Y,Xe=Z===!0?"bold":"normal",We=ze;g.fillStyle=Ce===!0?F.fontColor:V,g.font="".concat(Xe," ").concat(Ke,"px ").concat('"Open Sans", sans-serif');var it=function(Er){return g.measureText(Er).width},mt=(ge??1)*(Z===!0?1.5:1),It=it(We);if(It>E){var bt=qi(We,it,function(){return E},1,!1)[0];We=bt.hasEllipsisChar===!0?"".concat(bt.text,"..."):We,It=E}var jt=Math.cos(x),Ct=Math.sin(x),Ee={x:m.x,y:m.y},we=Ee.x,xe=Ee.y,st=x;$&&(st=x-Ji,we+=2*Ke*jt,xe+=2*Ke*Ct,st-=Ji);var Ze=(1+Ye)*Y,vt=je==="bottom"?Ke/2+mt+Ze:-(mt+Ze);g.translate(we,xe),g.rotate(st),g.fillText(We,-It/2,vt),g.rotate(-st),g.translate(-we,-xe);var Mt=2*vt*Math.sin(x),Ut=2*vt*Math.cos(x),zt={position:{x:m.x-Mt,y:m.y+Ut},rotation:$?x-Math.PI:x,width:E/Y,height:(Ke+Ze)/Y};I.setLabelInfo(D.id,zt)}},Mn=function(g,m,x,E,D){if(g.beginPath(),g.moveTo(m[0].x,m[0].y),D&&m.length>2){for(var I=1;I<m.length-2;){var F=(m[I].x+m[I+1].x)/2,V=(m[I].y+m[I+1].y)/2;g.quadraticCurveTo(m[I].x,m[I].y,F,V),I+=1}g.quadraticCurveTo(m[I].x,m[I].y,m[I+1].x,m[I+1].y)}else for(var z=1;z<m.length;z++)g.lineTo(m[z].x,m[z].y);g.lineWidth=x,g.strokeStyle=E,g.lineCap="round",g.stroke()},ud=function(g){return g.rings[0].width*ot()*1.5},ld=function(g){return 6*g*ot()},$c=function(g,m,x){var E,D;return{widthAlign:m/2*((E=g[0])!==null&&E!==void 0?E:0),heightAlign:x/2*((D=g[1])!==null&&D!==void 0?D:0)}},th=function(g,m,x){var E,D,I=x.indexOf(g),F=(E=x.angles[I])!==null&&E!==void 0?E:0,V=F-jp/2,z=F+jp/2,$=(D=g.width)!==null&&D!==void 0?D:1,Y=ot(),Z=Yl(m),ie={x:m.x+Math.cos(V)*(Z+$/2),y:m.y+Math.sin(V)*(Z+$/2)},le={x:m.x+Math.cos(z)*(Z+$/2),y:m.y+Math.sin(z)*(Z+$/2)},ve={x:m.x+Math.cos(F)*(Z+35*Y),y:m.y+Math.sin(F)*(Z+35*Y)};return{startAngle:V,endAngle:z,startPoint:ie,endPoint:le,apexPoint:ve,control1Point:{x:ve.x+25*Math.cos(F-Ji)*Y/2,y:ve.y+25*Math.sin(F-Ji)*Y/2},control2Point:{x:ve.x+25*Math.cos(F+Ji)*Y/2,y:ve.y+25*Math.sin(F+Ji)*Y/2}}},xa=function(g,m,x,E,D,I){g.beginPath(),g.moveTo(m.x,m.y),g.quadraticCurveTo(D.x,D.y,E.x,E.y),g.quadraticCurveTo(I.x,I.y,x.x,x.y),g.stroke()},Yc=function(g,m,x,E,D,I,F,V,z,$){var Y=!(arguments.length>10&&arguments[10]!==void 0)||arguments[10];Kf(x,E)&&(x.id===E.id?function(Z,ie,le,ve,ue,ge,Ce,Re){var je=arguments.length>8&&arguments[8]!==void 0?arguments[8]:Gl,ke=ie.overlayIcon,Ye=ie.selected,ze=ie.width,Ke=ie.hovered,Xe=ie.disabled,We=ie.color,it=th(ie,le,ve),mt=it.startPoint,It=it.endPoint,bt=it.apexPoint,jt=it.control1Point,Ct=it.control2Point,Ee=Ce.rings,we=Ce.shadow,xe=ot(),st=Ee[0].color,Ze=Ee[1].color,vt=Ee[0].width*xe,Mt=Ee[1].width*xe,Ut=40*xe,zt=(ze??1)*xe,Er=zt>1?zt/2:1,Tr=9*Er,Ur=2*Er,xn=7*Er,jn=Ye===!0,yn=Xe===!0,Yr=ke!==void 0,zr=Math.atan2(It.y-Ct.y,It.x-Ct.x),un=jn?vt*Math.sqrt(1+2*Tr/xn*(2*Tr/xn)):0,mn={x:It.x-Math.cos(zr)*(.5*Tr-Ur+un),y:It.y-Math.sin(zr)*(.5*Tr-Ur+un)},ri={headPosition:{x:It.x+Math.cos(zr)*(.5*Tr-Ur-un),y:It.y+Math.sin(zr)*(.5*Tr-Ur-un)},headAngle:zr,headHeight:Tr,headChinHeight:Ur,headWidth:xn};if(Z.save(),Z.lineCap="round",jn&&(Ha(Z,we),Z.lineWidth=zt+Mt,Z.strokeStyle=Ze,xa(Z,mt,mn,bt,jt,Ct),ps(Z,Mt,Ze,ri,!1,!0),Hc(Z),Z.lineWidth=zt+vt,Z.strokeStyle=st,xa(Z,mt,mn,bt,jt,Ct),ps(Z,vt,st,ri,!1,!0)),Z.lineWidth=zt,Ke===!0&&!jn&&!yn){var tn=we.color;Ha(Z,we),Z.strokeStyle=tn,Z.fillStyle=tn,xa(Z,mt,mn,bt,jt,Ct),ps(Z,zt,tn,ri),Hc(Z)}var In=yn?Re.color:We??je;if(Z.fillStyle=In,Z.strokeStyle=In,xa(Z,mt,mn,bt,jt,Ct),ps(Z,zt,In,ri),ge||Yr){var ni,ii=ve.indexOf(ie),fi=(ni=ve.angles[ii])!==null&&ni!==void 0?ni:0,rn=bt.x-Math.cos(zr)*(un/4),yi=bt.y-Math.sin(zr)*(un/4),bn=(fi+Ji)%Hn,Fo=(fi+Hn)%Hn<Math.PI;if(ge&&$n(Z,{x:rn,y:yi},bn,Ut,ie,ve,Re,je,Fo),Yr){var ia=ke.position,il=ia===void 0?[0,0]:ia,ec=ke.url,ol=ke.size,Xa=ld(ol===void 0?1:ol),oi=$c(il,Ut,Xa),Sn=oi.widthAlign,Vi=oi.heightAlign+(jn?ud(Ce):0)*(il[1]<0?-1:1);Z.save(),Z.translate(rn,yi),Fo?(Z.rotate(bn-Math.PI),Z.translate(2*-Sn,2*-Vi)):Z.rotate(bn);var oa=Xa/2,Bo=-oa+Sn,qs=-oa+Vi;Z.drawImage(ue.getImage(ec),Bo,qs,Xa,Xa),Z.restore()}}Z.restore()}(g,m,x,D,I,F,V,z,$):function(Z,ie,le,ve,ue,ge,Ce,Re,je,ke){var Ye=arguments.length>10&&arguments[10]!==void 0?arguments[10]:Gl,ze=ie.overlayIcon,Ke=ie.color,Xe=ie.disabled,We=ie.selected,it=ie.width,mt=ie.hovered,It=ie.captionAlign,bt=We===!0,jt=Xe===!0,Ct=ze!==void 0,Ee=je.rings,we=je.shadow,xe=ea(ie,ue,le,ve,Ce,Re),st=ot(),Ze=function(ic){var Wi,si=ic.selected===!0?1.5:1;return((Wi=ic.width)!==null&&Wi!==void 0?Wi:1)*si*ot()}(ie),vt=jt?ke.color:Ke??Ye,Mt=Ee[0].width*st,Ut=Ee[1].width*st,zt=st*(it>1?it/2:1),Er=9*zt,Tr=2*zt,Ur=7*zt,xn=Jo(xe[xe.length-2],xe[xe.length-1]),jn=2*Er,yn=bt?Mt*Math.sqrt(1+jn/Ur*(jn/Ur)):0,Yr=2-yn,zr=Math.floor(xe.length/2);xe.length>2&&bt&&xn<Er+yn-Tr&&(Yr+=xn,yn-=xn/2+Tr,xe.pop(),zr=Math.floor(xe.length/2));var un,mn,ri=xe[xe.length-2],tn=xe[xe.length-1],In=(un=ri,mn=tn,Math.atan2(mn.y-un.y,mn.x-un.x)),ni=Er/2+yn,ii=Math.cos(In),fi=Math.sin(In);xe[xe.length-1]={x:tn.x-ii*ni,y:tn.y-fi*ni};var rn,yi={headPosition:{x:tn.x+ii*Yr,y:tn.y+fi*Yr},headAngle:In,headHeight:Er,headChinHeight:Tr,headWidth:Ur},bn=eh(xe);try{for(bn.s();!(rn=bn.n()).done;){var Fo=rn.value;Fo.x=Math.round(Fo.x),Fo.y=Math.round(Fo.y)}}catch(ic){bn.e(ic)}finally{bn.f()}if(Z.save(),bt){var ia=Ee[0].color,il=Ee[1].color,ec=Math.atan2(xe[1].y-xe[0].y,xe[1].x-xe[0].x),ol=Or(ec,ud(je));xe[0]=uo(xe[0],ol),Ha(Z,we),Mn(Z,xe,Ze+Ut,il,Re),ps(Z,Ut,il,yi,!1,!0),Hc(Z),Mn(Z,xe,Ze+Mt,ia,Re),ps(Z,Mt,ia,yi,!1,!0)}if(mt===!0&&!bt&&!jt){var Xa=we.color;Ha(Z,we),Mn(Z,xe,Ze,Xa,Re),ps(Z,Ze,Xa,yi),Hc(Z)}if(Mn(Z,xe,Ze,vt,Re),ps(Z,Ze,vt,yi),Ce||Ct){var oi,Sn,Vi,oa,Bo,qs=le.x>ve.x,hi=xe[zr];(1&xe.length)==1?(oi=xe[qs?zr+1:zr-1],Sn=xe[qs?zr-1:zr+1],Re?(Vi=(hi.x+(oi.x+Sn.x)/2)/2,oa=(hi.y+(oi.y+Sn.y)/2)/2,Bo=qs?Math.atan2(le.y-ve.y,le.x-ve.x):Math.atan2(ve.y-le.y,ve.x-le.x)):(Jo(hi,oi)>Jo(hi,Sn)?Sn=hi:oi=hi,Vi=(oi.x+Sn.x)/2,oa=(oi.y+Sn.y)/2,Bo=Math.atan2(Sn.y-oi.y,Sn.x-oi.x))):(oi=xe[qs?zr:zr-1],Sn=xe[qs?zr-1:zr],Vi=(oi.x+Sn.x)/2,oa=(oi.y+Sn.y)/2,Bo=Math.atan2(Sn.y-oi.y,Sn.x-oi.x));var ef=bt?Or(Bo+Ji,ud(je)):{x:0,y:0},fh=Jo(oi,Sn);if(Ce){var tc=It==="bottom"?1:-1,$v={x:Vi+ef.x*tc,y:oa+ef.y*tc};$n(Z,$v,Bo,fh,ie,ue,ke,Ye)}if(Ct){var tf=ze.position,rc=tf===void 0?[0,0]:tf,rf=ze.url,Gs=ze.size,Vs=ld(Gs===void 0?1:Gs),hh=$c(rc,fh,Vs),nc=hh.widthAlign,dh=hh.heightAlign,nf=rc[1]<0?-1:1,Ed=ef.x*nf,vh=ef.y*nf,ai=Vs/2;Z.translate(Vi,oa),Z.rotate(Bo);var mi=-ai+Ed+nc,Od=-ai+vh+dh;Z.drawImage(ge.getImage(rf),mi,Od,Vs,Vs),Z.rotate(-Bo),Z.translate(-Vi,-oa)}}Z.restore()}(g,m,x,E,D,I,F,Y,V,z,$))},Do=function(g,m,x,E){var D=arguments.length>4&&arguments[4]!==void 0&&arguments[4],I=arguments.length>5&&arguments[5]!==void 0&&arguments[5];return Kf(x,E)?x.id===E.id?function(F,V,z){for(var $=th(F,V,z),Y={left:1/0,top:1/0,right:-1/0,bottom:-1/0},Z=["startPoint","endPoint","apexPoint","control1Point","control2Point"],ie=0;ie<Z.length;ie++){var le=$[Z[ie]],ve=le.x,ue=le.y;ve<Y.left&&(Y.left=ve),ve>Y.right&&(Y.right=ve),ue<Y.top&&(Y.top=ue),ue>Y.bottom&&(Y.bottom=ue)}return Y}(g,x,m):function(F,V,z,$,Y,Z){var ie,le={left:1/0,top:1/0,right:-1/0,bottom:-1/0},ve=eh(ea(F,V,z,$,Y,Z));try{for(ve.s();!(ie=ve.n()).done;){var ue=ie.value,ge=ue.x,Ce=ue.y;ge<le.left&&(le.left=ge),ge>le.right&&(le.right=ge),Ce<le.top&&(le.top=Ce),Ce>le.bottom&&(le.bottom=Ce)}}catch(Re){ve.e(Re)}finally{ve.f()}return le}(g,m,x,E,D,I):null};function gs(g){return gs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},gs(g)}var cd=/^\s+/,Xc=/\s+$/;function Pt(g,m){if(m=m||{},(g=g||"")instanceof Pt)return g;if(!(this instanceof Pt))return new Pt(g,m);var x=function(E){var D,I,F,V={r:0,g:0,b:0},z=1,$=null,Y=null,Z=null,ie=!1,le=!1;return typeof E=="string"&&(E=function(ve){ve=ve.replace(cd,"").replace(Xc,"").toLowerCase();var ue,ge=!1;if(lo[ve])ve=lo[ve],ge=!0;else if(ve=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(ue=Ca.rgb.exec(ve))?{r:ue[1],g:ue[2],b:ue[3]}:(ue=Ca.rgba.exec(ve))?{r:ue[1],g:ue[2],b:ue[3],a:ue[4]}:(ue=Ca.hsl.exec(ve))?{h:ue[1],s:ue[2],l:ue[3]}:(ue=Ca.hsla.exec(ve))?{h:ue[1],s:ue[2],l:ue[3],a:ue[4]}:(ue=Ca.hsv.exec(ve))?{h:ue[1],s:ue[2],v:ue[3]}:(ue=Ca.hsva.exec(ve))?{h:ue[1],s:ue[2],v:ue[3],a:ue[4]}:(ue=Ca.hex8.exec(ve))?{r:ta(ue[1]),g:ta(ue[2]),b:ta(ue[3]),a:xv(ue[4]),format:ge?"name":"hex8"}:(ue=Ca.hex6.exec(ve))?{r:ta(ue[1]),g:ta(ue[2]),b:ta(ue[3]),format:ge?"name":"hex"}:(ue=Ca.hex4.exec(ve))?{r:ta(ue[1]+""+ue[1]),g:ta(ue[2]+""+ue[2]),b:ta(ue[3]+""+ue[3]),a:xv(ue[4]+""+ue[4]),format:ge?"name":"hex8"}:!!(ue=Ca.hex3.exec(ve))&&{r:ta(ue[1]+""+ue[1]),g:ta(ue[2]+""+ue[2]),b:ta(ue[3]+""+ue[3]),format:ge?"name":"hex"}}(E)),gs(E)=="object"&&(ys(E.r)&&ys(E.g)&&ys(E.b)?(D=E.r,I=E.g,F=E.b,V={r:255*Nr(D,255),g:255*Nr(I,255),b:255*Nr(F,255)},ie=!0,le=String(E.r).substr(-1)==="%"?"prgb":"rgb"):ys(E.h)&&ys(E.s)&&ys(E.v)?($=Kc(E.s),Y=Kc(E.v),V=function(ve,ue,ge){ve=6*Nr(ve,360),ue=Nr(ue,100),ge=Nr(ge,100);var Ce=Math.floor(ve),Re=ve-Ce,je=ge*(1-ue),ke=ge*(1-Re*ue),Ye=ge*(1-(1-Re)*ue),ze=Ce%6;return{r:255*[ge,ke,je,je,Ye,ge][ze],g:255*[Ye,ge,ge,ke,je,je][ze],b:255*[je,je,Ye,ge,ge,ke][ze]}}(E.h,$,Y),ie=!0,le="hsv"):ys(E.h)&&ys(E.s)&&ys(E.l)&&($=Kc(E.s),Z=Kc(E.l),V=function(ve,ue,ge){var Ce,Re,je;function ke(Ke,Xe,We){return We<0&&(We+=1),We>1&&(We-=1),We<1/6?Ke+6*(Xe-Ke)*We:We<.5?Xe:We<2/3?Ke+(Xe-Ke)*(2/3-We)*6:Ke}if(ve=Nr(ve,360),ue=Nr(ue,100),ge=Nr(ge,100),ue===0)Ce=Re=je=ge;else{var Ye=ge<.5?ge*(1+ue):ge+ue-ge*ue,ze=2*ge-Ye;Ce=ke(ze,Ye,ve+1/3),Re=ke(ze,Ye,ve),je=ke(ze,Ye,ve-1/3)}return{r:255*Ce,g:255*Re,b:255*je}}(E.h,$,Z),ie=!0,le="hsl"),E.hasOwnProperty("a")&&(z=E.a)),z=Gi(z),{ok:ie,format:E.format||le,r:Math.min(255,Math.max(V.r,0)),g:Math.min(255,Math.max(V.g,0)),b:Math.min(255,Math.max(V.b,0)),a:z}}(g);this._originalInput=g,this._r=x.r,this._g=x.g,this._b=x.b,this._a=x.a,this._roundA=Math.round(100*this._a)/100,this._format=m.format||x.format,this._gradientType=m.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=x.ok}function Sa(g,m,x){g=Nr(g,255),m=Nr(m,255),x=Nr(x,255);var E,D,I=Math.max(g,m,x),F=Math.min(g,m,x),V=(I+F)/2;if(I==F)E=D=0;else{var z=I-F;switch(D=V>.5?z/(2-I-F):z/(I+F),I){case g:E=(m-x)/z+(m<x?6:0);break;case m:E=(x-g)/z+2;break;case x:E=(g-m)/z+4}E/=6}return{h:E,s:D,l:V}}function Cr(g,m,x){g=Nr(g,255),m=Nr(m,255),x=Nr(x,255);var E,D,I=Math.max(g,m,x),F=Math.min(g,m,x),V=I,z=I-F;if(D=I===0?0:z/I,I==F)E=0;else{switch(I){case g:E=(m-x)/z+(m<x?6:0);break;case m:E=(x-g)/z+2;break;case x:E=(g-m)/z+4}E/=6}return{h:E,s:D,v:V}}function Eu(g,m,x,E){var D=[Mo(Math.round(g).toString(16)),Mo(Math.round(m).toString(16)),Mo(Math.round(x).toString(16))];return E&&D[0].charAt(0)==D[0].charAt(1)&&D[1].charAt(0)==D[1].charAt(1)&&D[2].charAt(0)==D[2].charAt(1)?D[0].charAt(0)+D[1].charAt(0)+D[2].charAt(0):D.join("")}function Ta(g,m,x,E){return[Mo(vd(E)),Mo(Math.round(g).toString(16)),Mo(Math.round(m).toString(16)),Mo(Math.round(x).toString(16))].join("")}function fd(g,m){m=m===0?0:m||10;var x=Pt(g).toHsl();return x.s-=m/100,x.s=dd(x.s),Pt(x)}function cn(g,m){m=m===0?0:m||10;var x=Pt(g).toHsl();return x.s+=m/100,x.s=dd(x.s),Pt(x)}function xo(g){return Pt(g).desaturate(100)}function Gp(g,m){m=m===0?0:m||10;var x=Pt(g).toHsl();return x.l+=m/100,x.l=dd(x.l),Pt(x)}function hd(g,m){m=m===0?0:m||10;var x=Pt(g).toRgb();return x.r=Math.max(0,Math.min(255,x.r-Math.round(-m/100*255))),x.g=Math.max(0,Math.min(255,x.g-Math.round(-m/100*255))),x.b=Math.max(0,Math.min(255,x.b-Math.round(-m/100*255))),Pt(x)}function Vp(g,m){m=m===0?0:m||10;var x=Pt(g).toHsl();return x.l-=m/100,x.l=dd(x.l),Pt(x)}function ry(g,m){var x=Pt(g).toHsl(),E=(x.h+m)%360;return x.h=E<0?360+E:E,Pt(x)}function Wp(g){var m=Pt(g).toHsl();return m.h=(m.h+180)%360,Pt(m)}function Hp(g,m){if(isNaN(m)||m<=0)throw new Error("Argument to polyad must be a positive number");for(var x=Pt(g).toHsl(),E=[Pt(g)],D=360/m,I=1;I<m;I++)E.push(Pt({h:(x.h+I*D)%360,s:x.s,l:x.l}));return E}function wv(g){var m=Pt(g).toHsl(),x=m.h;return[Pt(g),Pt({h:(x+72)%360,s:m.s,l:m.l}),Pt({h:(x+216)%360,s:m.s,l:m.l})]}function Ev(g,m,x){m=m||6,x=x||30;var E=Pt(g).toHsl(),D=360/x,I=[Pt(g)];for(E.h=(E.h-(D*m>>1)+720)%360;--m;)E.h=(E.h+D)%360,I.push(Pt(E));return I}function Ou(g,m){m=m||6;for(var x=Pt(g).toHsv(),E=x.h,D=x.s,I=x.v,F=[],V=1/m;m--;)F.push(Pt({h:E,s:D,v:I})),I=(I+V)%1;return F}Pt.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var g=this.toRgb();return(299*g.r+587*g.g+114*g.b)/1e3},getLuminance:function(){var g,m,x,E=this.toRgb();return g=E.r/255,m=E.g/255,x=E.b/255,.2126*(g<=.03928?g/12.92:Math.pow((g+.055)/1.055,2.4))+.7152*(m<=.03928?m/12.92:Math.pow((m+.055)/1.055,2.4))+.0722*(x<=.03928?x/12.92:Math.pow((x+.055)/1.055,2.4))},setAlpha:function(g){return this._a=Gi(g),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var g=Cr(this._r,this._g,this._b);return{h:360*g.h,s:g.s,v:g.v,a:this._a}},toHsvString:function(){var g=Cr(this._r,this._g,this._b),m=Math.round(360*g.h),x=Math.round(100*g.s),E=Math.round(100*g.v);return this._a==1?"hsv("+m+", "+x+"%, "+E+"%)":"hsva("+m+", "+x+"%, "+E+"%, "+this._roundA+")"},toHsl:function(){var g=Sa(this._r,this._g,this._b);return{h:360*g.h,s:g.s,l:g.l,a:this._a}},toHslString:function(){var g=Sa(this._r,this._g,this._b),m=Math.round(360*g.h),x=Math.round(100*g.s),E=Math.round(100*g.l);return this._a==1?"hsl("+m+", "+x+"%, "+E+"%)":"hsla("+m+", "+x+"%, "+E+"%, "+this._roundA+")"},toHex:function(g){return Eu(this._r,this._g,this._b,g)},toHexString:function(g){return"#"+this.toHex(g)},toHex8:function(g){return function(m,x,E,D,I){var F=[Mo(Math.round(m).toString(16)),Mo(Math.round(x).toString(16)),Mo(Math.round(E).toString(16)),Mo(vd(D))];return I&&F[0].charAt(0)==F[0].charAt(1)&&F[1].charAt(0)==F[1].charAt(1)&&F[2].charAt(0)==F[2].charAt(1)&&F[3].charAt(0)==F[3].charAt(1)?F[0].charAt(0)+F[1].charAt(0)+F[2].charAt(0)+F[3].charAt(0):F.join("")}(this._r,this._g,this._b,this._a,g)},toHex8String:function(g){return"#"+this.toHex8(g)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*Nr(this._r,255))+"%",g:Math.round(100*Nr(this._g,255))+"%",b:Math.round(100*Nr(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(100*Nr(this._r,255))+"%, "+Math.round(100*Nr(this._g,255))+"%, "+Math.round(100*Nr(this._b,255))+"%)":"rgba("+Math.round(100*Nr(this._r,255))+"%, "+Math.round(100*Nr(this._g,255))+"%, "+Math.round(100*Nr(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(Ov[Eu(this._r,this._g,this._b,!0)]||!1)},toFilter:function(g){var m="#"+Ta(this._r,this._g,this._b,this._a),x=m,E=this._gradientType?"GradientType = 1, ":"";if(g){var D=Pt(g);x="#"+Ta(D._r,D._g,D._b,D._a)}return"progid:DXImageTransform.Microsoft.gradient("+E+"startColorstr="+m+",endColorstr="+x+")"},toString:function(g){var m=!!g;g=g||this._format;var x=!1,E=this._a<1&&this._a>=0;return m||!E||g!=="hex"&&g!=="hex6"&&g!=="hex3"&&g!=="hex4"&&g!=="hex8"&&g!=="name"?(g==="rgb"&&(x=this.toRgbString()),g==="prgb"&&(x=this.toPercentageRgbString()),g!=="hex"&&g!=="hex6"||(x=this.toHexString()),g==="hex3"&&(x=this.toHexString(!0)),g==="hex4"&&(x=this.toHex8String(!0)),g==="hex8"&&(x=this.toHex8String()),g==="name"&&(x=this.toName()),g==="hsl"&&(x=this.toHslString()),g==="hsv"&&(x=this.toHsvString()),x||this.toHexString()):g==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return Pt(this.toString())},_applyModification:function(g,m){var x=g.apply(null,[this].concat([].slice.call(m)));return this._r=x._r,this._g=x._g,this._b=x._b,this.setAlpha(x._a),this},lighten:function(){return this._applyModification(Gp,arguments)},brighten:function(){return this._applyModification(hd,arguments)},darken:function(){return this._applyModification(Vp,arguments)},desaturate:function(){return this._applyModification(fd,arguments)},saturate:function(){return this._applyModification(cn,arguments)},greyscale:function(){return this._applyModification(xo,arguments)},spin:function(){return this._applyModification(ry,arguments)},_applyCombination:function(g,m){return g.apply(null,[this].concat([].slice.call(m)))},analogous:function(){return this._applyCombination(Ev,arguments)},complement:function(){return this._applyCombination(Wp,arguments)},monochromatic:function(){return this._applyCombination(Ou,arguments)},splitcomplement:function(){return this._applyCombination(wv,arguments)},triad:function(){return this._applyCombination(Hp,[3])},tetrad:function(){return this._applyCombination(Hp,[4])}},Pt.fromRatio=function(g,m){if(gs(g)=="object"){var x={};for(var E in g)g.hasOwnProperty(E)&&(x[E]=E==="a"?g[E]:Kc(g[E]));g=x}return Pt(g,m)},Pt.equals=function(g,m){return!(!g||!m)&&Pt(g).toRgbString()==Pt(m).toRgbString()},Pt.random=function(){return Pt.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},Pt.mix=function(g,m,x){x=x===0?0:x||50;var E=Pt(g).toRgb(),D=Pt(m).toRgb(),I=x/100;return Pt({r:(D.r-E.r)*I+E.r,g:(D.g-E.g)*I+E.g,b:(D.b-E.b)*I+E.b,a:(D.a-E.a)*I+E.a})},Pt.readability=function(g,m){var x=Pt(g),E=Pt(m);return(Math.max(x.getLuminance(),E.getLuminance())+.05)/(Math.min(x.getLuminance(),E.getLuminance())+.05)},Pt.isReadable=function(g,m,x){var E,D,I,F,V,z=Pt.readability(g,m);switch(D=!1,(F=((I=(I=x)||{level:"AA",size:"small"}).level||"AA").toUpperCase())!=="AA"&&F!=="AAA"&&(F="AA"),(V=(I.size||"small").toLowerCase())!=="small"&&V!=="large"&&(V="small"),(E={level:F,size:V}).level+E.size){case"AAsmall":case"AAAlarge":D=z>=4.5;break;case"AAlarge":D=z>=3;break;case"AAAsmall":D=z>=7}return D},Pt.mostReadable=function(g,m,x){var E,D,I,F,V=null,z=0;D=(x=x||{}).includeFallbackColors,I=x.level,F=x.size;for(var $=0;$<m.length;$++)(E=Pt.readability(g,m[$]))>z&&(z=E,V=Pt(m[$]));return Pt.isReadable(g,V,{level:I,size:F})||!D?V:(x.includeFallbackColors=!1,Pt.mostReadable(g,["#fff","#000"],x))};var lo=Pt.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Ov=Pt.hexNames=function(g){var m={};for(var x in g)g.hasOwnProperty(x)&&(m[g[x]]=x);return m}(lo);function Gi(g){return g=parseFloat(g),(isNaN(g)||g<0||g>1)&&(g=1),g}function Nr(g,m){(function(E){return typeof E=="string"&&E.indexOf(".")!=-1&&parseFloat(E)===1})(g)&&(g="100%");var x=function(E){return typeof E=="string"&&E.indexOf("%")!=-1}(g);return g=Math.min(m,Math.max(0,parseFloat(g))),x&&(g=parseInt(g*m,10)/100),Math.abs(g-m)<1e-6?1:g%m/parseFloat(m)}function dd(g){return Math.min(1,Math.max(0,g))}function ta(g){return parseInt(g,16)}function Mo(g){return g.length==1?"0"+g:""+g}function Kc(g){return g<=1&&(g=100*g+"%"),g}function vd(g){return Math.round(255*parseFloat(g)).toString(16)}function xv(g){return ta(g)/255}var xu,Su,pd,Ca=(Su="[\\s|\\(]+("+(xu="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+xu+")[,|\\s]+("+xu+")\\s*\\)?",pd="[\\s|\\(]+("+xu+")[,|\\s]+("+xu+")[,|\\s]+("+xu+")[,|\\s]+("+xu+")\\s*\\)?",{CSS_UNIT:new RegExp(xu),rgb:new RegExp("rgb"+Su),rgba:new RegExp("rgba"+pd),hsl:new RegExp("hsl"+Su),hsla:new RegExp("hsla"+pd),hsv:new RegExp("hsv"+Su),hsva:new RegExp("hsva"+pd),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function ys(g){return!!Ca.CSS_UNIT.exec(g)}var $p=function(g){return Pt.mostReadable(g,[Qe,"#FFFFFF"]).toString()},Xl=function(g){return vv().get.rgb(g)},rh=function(g){var m=new ArrayBuffer(4),x=new Uint32Array(m),E=new Uint8Array(m),D=Xl(g);return E[0]=D[0],E[1]=D[1],E[2]=D[2],E[3]=255*D[3],x[0]},tl=function(g){return[(m=Xl(g))[0]/255,m[1]/255,m[2]/255];var m};function Sv(g,m){return function(x){if(Array.isArray(x))return x}(g)||function(x,E){var D=x==null?null:typeof Symbol<"u"&&x[Symbol.iterator]||x["@@iterator"];if(D!=null){var I,F,V,z,$=[],Y=!0,Z=!1;try{if(V=(D=D.call(x)).next,E!==0)for(;!(Y=(I=V.call(D)).done)&&($.push(I.value),$.length!==E);Y=!0);}catch(ie){Z=!0,F=ie}finally{try{if(!Y&&D.return!=null&&(z=D.return(),Object(z)!==z))return}finally{if(Z)throw F}}return $}}(g,m)||function(x,E){if(x){if(typeof x=="string")return Tv(x,E);var D=Object.prototype.toString.call(x).slice(8,-1);return D==="Object"&&x.constructor&&(D=x.constructor.name),D==="Map"||D==="Set"?Array.from(x):D==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(D)?Tv(x,E):void 0}}(g,m)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Tv(g,m){(m==null||m>g.length)&&(m=g.length);for(var x=0,E=new Array(m);x<m;x++)E[x]=g[x];return E}var gd=function(g){var m=g.x,x=m===void 0?0:m,E=g.y,D=E===void 0?0:E,I=g.size,F=I===void 0?Qn:I;return{top:D-F,left:x-F,right:x+F,bottom:D+F}},nh=function(g,m,x,E,D,I){var F=arguments.length>6&&arguments[6]!==void 0?arguments[6]:El,V=arguments.length>7&&arguments[7]!==void 0?arguments[7]:1,z=arguments.length>8&&arguments[8]!==void 0?arguments[8]:1,$=m.x,Y=$===void 0?0:$,Z=m.y,ie=Z===void 0?0:Z,le=m.size,ve=le===void 0?Qn:le,ue=m.caption,ge=ue===void 0?"":ue,Ce=m.captions,Re=Ce===void 0?[]:Ce,je=m.captionAlign,ke=je===void 0?"center":je,Ye=m.captionSize,ze=Ye===void 0?1:Ye,Ke=m.disabled,Xe=m.activated,We=m.selected,it=m.hovered,mt=m.id,It=m.icon,bt=m.overlayIcon,jt=ot(),Ct=function(Wi,si,Tu){var al=Wi.selected?Tu.selected.rings:Tu.default.rings;if(!al.length){var oc=si.getById(Wi.id);return oc!==void 0&&Object.entries(oc).forEach(function(xd){var ac=Sv(xd,2),of=ac[0],Cu=ac[1];of.startsWith("ring-")&&Cu.setEndValue(0)}),[{width:0,color:""}]}return al.map(function(xd,ac){var of=xd.widthFactor,Cu=xd.color,Oy=(Wi.size||Qn)*of*ot();return{width:si.getValueForAnimationName(Wi.id,"ring-".concat(ac),Oy),color:Cu}})}(m,E,D),Ee=Ct.reduce(function(Wi,si){return Wi+si.width},0),we=ve*jt,xe=2*we,st=function(Wi,si){if(!Wi||!si)return{nodeInfoLevel:0,fontInfoLevel:1.25,iconInfoLevel:1};var Tu=ot(),al=1600*Tu*(1200*Tu),oc=Math.pow(Wi,2)*Math.PI*Math.pow(si,2)/(al/100);return{nodeInfoLevel:sd(oc,Qf),fontInfoLevel:sd(oc,js),iconInfoLevel:sd(oc,qp)}}(we,z),Ze=st.nodeInfoLevel,vt=st.fontInfoLevel,Mt=st.iconInfoLevel,Ut=m.color||F,zt=function(Wi){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qn)/({1:3.5,2:2.75,3:2}[arguments.length>2&&arguments[2]!==void 0?arguments[2]:1]+(arguments.length>3&&arguments[3]!==void 0&&arguments[3]?1:0))/Wi}(vt,we,ze,!!It),Er=$p(Ut),Tr=we;if(Ee>0&&(Tr=we+Ee),Ke)Ut=I.color,Er=I.fontColor;else{var Ur;if(Xe){var xn=Date.now()%1e3/1e3,jn=xn<.7?xn/.7:0,yn=Ju(Ut,.4-.4*jn);el(g,Y,ie,yn,we+.88*we*jn)}var Yr=(Ur=D.selected.shadow)!==null&&Ur!==void 0?Ur:{width:0,opacity:0,color:""},zr=Yr.width*jt,un=Yr.opacity,mn=Yr.color,ri=We||it?zr:0,tn=E.getValueForAnimationName(mt,"shadowWidth",ri);tn>0&&function(Wi,si,Tu,al,oc,xd){var ac=arguments.length>6&&arguments[6]!==void 0?arguments[6]:1,of=oc+xd,Cu=Wi.createRadialGradient(si,Tu,oc,si,Tu,of);Cu.addColorStop(0,"transparent"),Cu.addColorStop(.01,Ju(al,.5*ac)),Cu.addColorStop(.05,Ju(al,.5*ac)),Cu.addColorStop(.5,Ju(al,.12*ac)),Cu.addColorStop(.75,Ju(al,.03*ac)),Cu.addColorStop(1,Ju(al,0)),Wi.fillStyle=Cu,Hl(Wi,si,Tu,of),Wi.fill()}(g,Y,ie,mn,Tr,tn,un)}el(g,Y,ie,Ut,we),Ee>0&&Wc(g,Y,ie,we,Ct);var In=!!ge.length,ni=!!Re.length,ii=!!It;if(It){var fi=Ze<2||!(In||ni),rn=Ze>0?1:0,yi=fi?1*we:.75*we;yi/=Mt;var bn=fi?.5*yi:yi*(Mt===1?ke==="center"?1.3:ke==="bottom"||fi?1.1:0:ke==="center"?1.35:ke==="bottom"||fi?1.1:0),Fo=yi/2;yi=E.getValueForAnimationName(mt,"iconSize",yi),Fo=E.getValueForAnimationName(mt,"iconXPos",Fo),bn=E.getValueForAnimationName(mt,"iconYPos",bn);var ia=g.globalAlpha,il=Ke?.1:rn;g.globalAlpha=E.getValueForAnimationName(mt,"iconOpacity",il);var ec=Er==="#ffffff",ol=x.getImage(It,ec);g.drawImage(ol,Y-Fo,ie-bn,Math.floor(yi),Math.floor(yi)),g.globalAlpha=ia}if(bt!==void 0){var Xa,oi,Sn,Vi,oa,Bo=xe*((Xa=bt.size)!==null&&Xa!==void 0?Xa:1),qs=Bo/2-we*((oi=(Sn=bt.position)===null||Sn===void 0?void 0:Sn[1])!==null&&oi!==void 0?oi:0),hi=Bo/2-we*((Vi=(oa=bt.position)===null||oa===void 0?void 0:oa[0])!==null&&Vi!==void 0?Vi:0),ef=g.globalAlpha,fh=Ke?.1:1;g.globalAlpha=E.getValueForAnimationName(mt,"iconOpacity",fh);var tc=x.getImage(bt.url);g.drawImage(tc,Y-hi,ie-qs,Bo,Bo),g.globalAlpha=ef}if(In||ni){var $v=Ze<2?0:1,tf=E.getValueForAnimationName(mt,"textOpacity",$v,0);if(tf>0){var rc,rf,Gs='"Open Sans", sans-serif',Vs=2;vt===((rc=js[1])===null||rc===void 0?void 0:rc[1])?Vs=3:vt===((rf=js[2])===null||rf===void 0?void 0:rf[1])&&(Vs=4);var hh=ke==="center"?.7*xe:2*Math.sqrt(Math.pow(xe/2,2)-Math.pow(xe/3,2));if(g.fillStyle=Ju(Er,tf),ni){var nc,dh=mv(Re),nf=dh.stylesPerChar,Ed=dh.fullCaption,vh=Wa(g,Ed,Gs,zt,hh,ii,Vs,m==null||m.captionAlign),ai=-(vh.length-2)*zt/2;nc=ke&&ke!=="center"?ke==="bottom"?ai+we/Math.PI:ai-we/Math.PI:ai,bv(g,vh,nf,nc,zt,Gs,zt,Y,ie,V)}else if(In){var mi=Wa(g,ge,Gs,zt,hh,ii,Vs,m==null||m.captionAlign),Od=-(mi.length-2)*zt/2,ic=ge.split("").map(function(Wi){return[]});bv(g,mi,ic,Od,zt,Gs,zt,Y,ie,V)}}}};function Kl(g){return Kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},Kl(g)}function ms(g,m){var x=Object.keys(g);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(g);m&&(E=E.filter(function(D){return Object.getOwnPropertyDescriptor(g,D).enumerable})),x.push.apply(x,E)}return x}function ci(g){for(var m=1;m<arguments.length;m++){var x=arguments[m]!=null?arguments[m]:{};m%2?ms(Object(x),!0).forEach(function(E){co(g,E,x[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(x)):ms(Object(x)).forEach(function(E){Object.defineProperty(g,E,Object.getOwnPropertyDescriptor(x,E))})}return g}function Zc(g,m){var x=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!x){if(Array.isArray(g)||(x=function(z,$){if(z){if(typeof z=="string")return Cv(z,$);var Y=Object.prototype.toString.call(z).slice(8,-1);return Y==="Object"&&z.constructor&&(Y=z.constructor.name),Y==="Map"||Y==="Set"?Array.from(z):Y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Y)?Cv(z,$):void 0}}(g))||m){x&&(g=x);var E=0,D=function(){};return{s:D,n:function(){return E>=g.length?{done:!0}:{done:!1,value:g[E++]}},e:function(z){throw z},f:D}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I,F=!0,V=!1;return{s:function(){x=x.call(g)},n:function(){var z=x.next();return F=z.done,z},e:function(z){V=!0,I=z},f:function(){try{F||x.return==null||x.return()}finally{if(V)throw I}}}}function Cv(g,m){(m==null||m>g.length)&&(m=g.length);for(var x=0,E=new Array(m);x<m;x++)E[x]=g[x];return E}function ra(g,m){for(var x=0;x<m.length;x++){var E=m[x];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,Yp(E.key),E)}}function co(g,m,x){return(m=Yp(m))in g?Object.defineProperty(g,m,{value:x,enumerable:!0,configurable:!0,writable:!0}):g[m]=x,g}function Yp(g){var m=function(x,E){if(Kl(x)!="object"||!x)return x;var D=x[Symbol.toPrimitive];if(D!==void 0){var I=D.call(x,"string");if(Kl(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(g);return Kl(m)=="symbol"?m:String(m)}var rl="canvasRenderer",Pv=function(){function g(E,D,I){var F=this,V=(arguments.length>3&&arguments[3]!==void 0?arguments[3]:{}).relationshipThreshold,z=V===void 0?0:V;(function($,Y){if(!($ instanceof Y))throw new TypeError("Cannot call a class as a function")})(this,g),co(this,"arrowBundler",void 0),co(this,"activeNodes",void 0),co(this,"canvas",void 0),co(this,"context",void 0),co(this,"state",void 0),co(this,"stateDisposers",void 0),co(this,"relationshipThreshold",void 0),co(this,"animationHandler",void 0),co(this,"imageCache",void 0),co(this,"needsRun",void 0),co(this,"nodeVersion",void 0),co(this,"relVersion",void 0),co(this,"waypointVersion",void 0),co(this,"ellipsisWidth",void 0),D!==null&&(this.activeNodes=new Set,this.canvas=E,this.context=D,this.state=I,this.stateDisposers=[],this.stateDisposers.push(I.autorun(function(){I.zoom!==void 0&&(F.needsRun=!0),I.panX!==void 0&&(F.needsRun=!0),I.panY!==void 0&&(F.needsRun=!0),I.nodes.version!==void 0&&(F.needsRun=!0),I.rels.version!==void 0&&(F.needsRun=!0),I.waypoints.counter>0&&(F.needsRun=!0),I.layout!==void 0&&(F.needsRun=!0)})),I.nodes.addChannel(rl),I.rels.addChannel(rl),this.relationshipThreshold=z,this.nodeVersion=I.nodes.version,this.relVersion=I.rels.version,this.waypointVersion=I.waypoints.counter,this.animationHandler=new Hf,this.animationHandler.setOptions({fadeDuration:150,sizeDuration:150}),this.arrowBundler=new Zu(I.rels.items,I.waypoints.data),this.imageCache=new lv,this.needsRun=!0,this.ellipsisWidth=D.measureText(Wl).width)}var m,x;return m=g,x=[{key:"needsToRun",value:function(){return this.needsRun||this.animationHandler.needsToRun()||this.activeNodes.size>0}},{key:"processUpdates",value:function(){var E=this.state,D=!1,I=E.nodes.channels[rl],F=E.rels.channels[rl],V=I.adds,z=I.removes,$=F.adds,Y=F.removes;this.nodeVersion<E.nodes.version&&(Object.keys(V).length>0||Object.keys(z).length,this.handleChannelUpdate(I,E.nodes,!0),this.nodeVersion=E.nodes.version,E.nodes.clearChannel(rl)),this.relVersion<E.rels.version&&(D=Object.keys($).length>0||Object.keys(Y).length>0,E.rels.clearChannel(rl),this.relVersion=E.rels.version),(D||this.waypointVersion<E.waypoints.counter)&&(this.arrowBundler.updateData($,Y,E.waypoints.data),this.waypointVersion=E.waypoints.counter)}},{key:"render",value:function(E){var D,I,F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},V=this.state,z=this.animationHandler,$=this.arrowBundler,Y=V.zoom,Z=V.layout,ie=V.nodes.idToPosition,le=(D=F.canvas)!==null&&D!==void 0?D:this.canvas,ve=(I=F.context)!==null&&I!==void 0?I:this.context,ue=ot(),ge=le.clientWidth*ue,Ce=le.clientHeight*ue;ve.save(),F.backgroundColor!==void 0?(ve.fillStyle=F.backgroundColor,ve.fillRect(0,0,ge,Ce)):ve.clearRect(0,0,ge,Ce),this.zoomAndPan(ve,le),z.ignoreAnimations(!!F.ignoreAnimations),F.ignoreAnimations!==!0&&z.advance(),$.updatePositions(ie);var Re=this.getRelationshipsToRender(F.showCaptions,ge,Ce);this.renderRelationships(Re,ve,Z!==Nl);var je=this.getNodesToRender(E,ge,Ce);this.renderNodes(je,ve,Y),ve.restore(),this.needsRun=!1}},{key:"getRelationshipsToRender",value:function(E,D,I){var F,V=[],z=[],$=[],Y=this.arrowBundler,Z=this.state,ie=this.relationshipThreshold,le=Z.layout,ve=Z.zoom,ue=Z.rels,ge=Z.nodes,Ce=ge.idToItem,Re=ge.idToPosition,je=Zc(ue.items);try{for(je.s();!(F=je.n()).done;){var ke=F.value,Ye=Y.getBundle(ke),ze=ci(ci({},Ce[ke.from]),Re[ke.from]),Ke=ci(ci({},Ce[ke.to]),Re[ke.to]),Xe=E||ve>ie||ke.captionHtml!==void 0,We=Do(ke,Ye,ze,Ke,Xe,le!==Nl);if(We!==null){var it,mt,It,bt,jt,Ct,Ee=this.isBoundingBoxOffScreen(We,D,I),we=Jo({x:(it=ze.x)!==null&&it!==void 0?it:0,y:(mt=ze.y)!==null&&mt!==void 0?mt:0},{x:(It=Ke.x)!==null&&It!==void 0?It:0,y:(bt=Ke.y)!==null&&bt!==void 0?bt:0}),xe=(((jt=ze.size)!==null&&jt!==void 0?jt:Qn)+((Ct=Ke.size)!==null&&Ct!==void 0?Ct:Qn))*devicePixelRatio,st=ze.id!==Ke.id&&xe>we;Ee||st||(ke.disabled===!0?z.push(ci(ci({},ke),{},{fromNode:ze,toNode:Ke,showLabel:Xe})):ke.selected===!0?V.push(ci(ci({},ke),{},{fromNode:ze,toNode:Ke,showLabel:Xe})):$.push(ci(ci({},ke),{},{fromNode:ze,toNode:Ke,showLabel:Xe})))}}}catch(Ze){je.e(Ze)}finally{je.f()}return[].concat(z,$,V)}},{key:"getNodesToRender",value:function(E,D,I){var F,V=[],z=[],$=[],Y=this.state.nodes.idToItem,Z=Zc(E);try{for(Z.s();!(F=Z.n()).done;){var ie,le,ve=F.value,ue=gd(ve);this.isBoundingBoxOffScreen(ue,D,I)||(((ie=Y[ve.id])===null||ie===void 0?void 0:ie.disabled)===!0?V.push(ci({},ve)):((le=Y[ve.id])===null||le===void 0?void 0:le.selected)===!0?z.push(ci({},ve)):$.push(ci({},ve)))}}catch(ge){Z.e(ge)}finally{Z.f()}return[].concat(V,$,z)}},{key:"renderNodes",value:function(E,D,I){var F,V=this.imageCache,z=this.animationHandler,$=this.state,Y=this.ellipsisWidth,Z=$.nodes.idToItem,ie=$.nodeBorderStyles,le=$.disabledItemStyles,ve=$.defaultNodeColor,ue=Zc(E);try{for(ue.s();!(F=ue.n()).done;){var ge=F.value;nh(D,ci(ci({},Z[ge.id]),ge),V,z,ie,le,ve,Y,I)}}catch(Ce){ue.e(Ce)}finally{ue.f()}}},{key:"renderRelationships",value:function(E,D,I){var F,V=this.state.relationshipBorderStyles.selected,z=this.arrowBundler,$=this.imageCache,Y=this.state,Z=Y.disabledItemStyles,ie=Y.defaultRelationshipColor,le=Zc(E);try{for(le.s();!(F=le.n()).done;){var ve=F.value,ue=z.getBundle(ve),ge=ve.fromNode,Ce=ve.toNode,Re=ve.showLabel;Yc(D,ve,ge,Ce,ue,$,Re,V,Z,ie,I)}}catch(je){le.e(je)}finally{le.f()}}},{key:"getNodesAt",value:function(E){var D,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,F=[],V=this.state.nodes,z=V.items,$=V.idToPosition,Y=ot(),Z=Zc(z);try{var ie=function(){var le=D.value,ve=le.id,ue=le.size,ge=ue===void 0?Qn:ue,Ce=$[ve],Re=Ce.x,je=Ce.y,ke=Math.sqrt(Math.pow(E.x-Re,2)+Math.pow(E.y-je,2));if(ke<=(ge+I)*Y){var Ye=F.findIndex(function(ze){return ze.distance>ke});F.splice(Ye!==-1?Ye:F.length,0,{data:le,targetCoordinates:{x:Re,y:je},pointerCoordinates:E,distanceVector:{x:E.x-Re,y:E.y-je},insideNode:ke<=ge*Y,distance:ke})}};for(Z.s();!(D=Z.n()).done;)ie()}catch(le){Z.e(le)}finally{Z.f()}return F}},{key:"getRelsAt",value:function(E){var D,I=[],F=this.state,V=this.arrowBundler,z=this.relationshipThreshold,$=F.zoom,Y=F.rels.items,Z=F.nodes.idToPosition,ie=F.layout,le=$>z,ve=Zc(Y);try{var ue=function(){var ge=D.value,Ce=V.getBundle(ge),Re=Z[ge.from],je=Z[ge.to];if(Re!==void 0&&je!==void 0&&Ce.indexOf(ge)!==-1){var ke=function(ze,Ke,Xe,We,it,mt){var It=arguments.length>6&&arguments[6]!==void 0&&arguments[6];if(!Kf(Xe,We))return 1/0;var bt=Xe===We?function(jt,Ct,Ee,we){var xe=th(Ct,Ee,we),st=xe.startPoint,Ze=xe.endPoint,vt=xe.apexPoint,Mt=xe.control1Point,Ut=xe.control2Point,zt=Ns(st,vt,Mt,jt),Er=Ns(vt,Ze,Ut,jt);return Math.min(zt,Er)}(ze,Ke,Xe,it):function(jt,Ct,Ee,we,xe,st,Ze){var vt=ea(Ct,Ee,we,xe,st,Ze),Mt=1/0;if(Ze&&vt.length===3)Mt=Ns(vt[0],vt[2],vt[1],jt);else for(var Ut=1;Ut<vt.length;Ut++){var zt=vt[Ut-1],Er=vt[Ut],Tr=vs(zt,Er,jt);Mt=Tr<Mt?Tr:Mt}return Mt}(ze,Ke,it,Xe,We,mt,It);return bt}(E,ge,Re,je,Ce,le,ie!==Nl);if(ke<10){var Ye=I.findIndex(function(ze){return ze.distance>ke});I.splice(Ye!==-1?Ye:I.length,0,{data:ge,fromTargetCoordinates:Re,toTargetCoordinates:je,pointerCoordinates:E,distance:ke})}}};for(ve.s();!(D=ve.n()).done;)ue()}catch(ge){ve.e(ge)}finally{ve.f()}return I}},{key:"destroy",value:function(){this.stateDisposers.forEach(function(E){E()}),this.state.nodes.removeChannel(rl),this.state.rels.removeChannel(rl)}},{key:"isBoundingBoxOffScreen",value:function(E,D,I){var F=this.state,V=F.zoom,z=D/V,$=I/V,Y=F.panX-z/2,Z=F.panY-$/2,ie=E.right<Y,le=E.bottom<Z,ve=E.left>Y+z,ue=E.top>Z+$;return ie||ve||le||ue}},{key:"handleChannelUpdate",value:function(E,D,I){for(var F=Object.keys(E.adds),V=0;V<F.length;V++){var z=F[V];E.adds[z].activated&&this.activeNodes.add(z)}for(var $=Object.keys(E.removes),Y=0;Y<$.length;Y++){var Z=$[Y];this.activeNodes.delete(Z)}if(I)for(var ie=Object.keys(E.updates),le=0;le<ie.length;le++){var ve=ie[le];D.idToItem[ve].activated?this.activeNodes.add(ve):this.activeNodes.delete(ve)}}},{key:"zoomAndPan",value:function(E,D){var I=D.width,F=D.height,V=this.state,z=V.zoom,$=V.panX,Y=V.panY;E.translate(-I/2*z,-F/2*z),E.translate(-$*z,-Y*z),E.scale(z,z),E.translate(I/2/z,F/2/z),E.translate(I/2,F/2)}}],x&&ra(m.prototype,x),Object.defineProperty(m,"prototype",{writable:!1}),g}(),yd=function(g,m){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,D=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,I=function(F,V){if((0,r.isNil)(F)||(0,r.isNil)(V))return{offsetX:0,offsetY:0};var z=V.getBoundingClientRect(),$=window.devicePixelRatio||1;return{offsetX:$*(F.clientX-z.left-.5*z.width),offsetY:$*(F.clientY-z.top-.5*z.height)}}(g,m);return{x:E+I.offsetX/x,y:D+I.offsetY/x}};function ih(g){return ih=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},ih(g)}function Xp(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}function ny(g,m){for(var x=0;x<m.length;x++){var E=m[x];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,Rv(E.key),E)}}function Av(g,m,x){return m&&ny(g.prototype,m),Object.defineProperty(g,"prototype",{writable:!1}),g}function $a(g,m,x){return(m=Rv(m))in g?Object.defineProperty(g,m,{value:x,enumerable:!0,configurable:!0,writable:!0}):g[m]=x,g}function Rv(g){var m=function(x,E){if(ih(x)!="object"||!x)return x;var D=x[Symbol.toPrimitive];if(D!==void 0){var I=D.call(x,"string");if(ih(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(g);return ih(m)=="symbol"?m:String(m)}var Lo="WebGLRenderer",md=function(){function g(m){var x=this;if(Xp(this,g),$a(this,"mainSceneRenderer",void 0),$a(this,"minimapRenderer",void 0),$a(this,"needsRun",void 0),$a(this,"minimapMouseDown",void 0),$a(this,"stateDisposers",void 0),$a(this,"state",void 0),m.state===void 0)throw new Error("Renderer missing options: state - state object");var E=m.state,D=m.mainSceneRenderer,I=m.minimapRenderer,F=E.nodes,V=E.rels;this.mainSceneRenderer=D,this.minimapRenderer=I,this.needsRun=!1,this.minimapMouseDown=!1,this.stateDisposers=[],this.stateDisposers.push(E.autorun(function(){x.updateMainViewport(E.zoom,E.panX,E.panY)})),this.stateDisposers.push(E.autorun(function(){x.updateMinimapViewport(E.minimapZoom,E.minimapPanX,E.minimapPanY)})),this.stateDisposers.push(E.autorun(function(){E.nodes.version!==void 0&&(x.needsRun=!0),E.rels.version!==void 0&&(x.needsRun=!0)})),F.addChannel(Lo),V.addChannel(Lo),this.state=E,this.setupMinimapInteractions()}return Av(g,[{key:"needsToRun",value:function(){return this.needsRun||Object.keys(this.mainSceneRenderer.activeNodes).length>0}},{key:"renderMainScene",value:function(m){var x=this.state,E=x.nodes,D=x.rels;this.checkForUpdates(E,D),this.mainSceneRenderer.render(m,E,D),this.needsRun=!1}},{key:"renderMinimap",value:function(m){var x=this.state,E=x.nodes,D=x.rels;this.checkForUpdates(E,D),this.minimapRenderer.render(m,E,D),this.minimapRenderer.renderViewbox(),this.needsRun=!1}},{key:"checkForUpdates",value:function(m,x){var E=Object.values(m.channels[Lo].adds).length>0,D=Object.values(x.channels[Lo].adds).length>0,I=Object.values(m.channels[Lo].removes).length>0,F=Object.values(x.channels[Lo].removes).length>0,V=Object.values(m.channels[Lo].updates),z=Object.values(x.channels[Lo].updates);E||D||I||F?(this.mainSceneRenderer.setData({nodes:m.items,rels:x.items}),this.minimapRenderer.setData({nodes:m.items,rels:x.items})):(V.length>0&&(this.mainSceneRenderer.updateNodes(V),this.minimapRenderer.updateNodes(V)),z.length>0&&(this.mainSceneRenderer.updateRelationships(x.items),this.minimapRenderer.updateRelationships(x.items))),m.clearChannel(Lo),x.clearChannel(Lo)}},{key:"onResize",value:function(){var m=this.state,x=m.zoom,E=m.panX,D=m.panY,I=m.minimapZoom,F=m.minimapPanX,V=m.minimapPanY;this.updateMainViewport(x,E,D),this.updateMinimapViewport(I,F,V)}},{key:"updateMainViewport",value:function(m,x,E){this.mainSceneRenderer.updateViewport(m,x,E);var D=this.mainSceneRenderer.canvas.clientWidth,I=this.mainSceneRenderer.canvas.clientHeight;this.minimapRenderer.updateViewportBox(m,x,E,D,I),this.needsRun=!0}},{key:"updateMinimapViewport",value:function(m,x,E){this.minimapRenderer.updateViewport(m,x,E),this.needsRun=!0}},{key:"handleMinimapDrag",value:function(m){var x=this.state,E=this.minimapRenderer,D=yd(m,E.canvas,x.minimapZoom,x.minimapPanX,x.minimapPanY),I=D.x,F=D.y;x.setPan(I,F)}},{key:"handleMinimapWheel",value:function(m){var x=this.state,E=this.mainSceneRenderer;x.setZoom(function(D){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return(0,r.isNil)(D)||isNaN(D.deltaY)?I:I-D.deltaY/500*Math.min(1,I)}(m,x.zoom),E.canvas),m.preventDefault()}},{key:"setupMinimapInteractions",value:function(){var m=this,x=this.minimapRenderer.canvas;x.addEventListener("mousedown",function(E){m.handleMinimapDrag(E),m.minimapMouseDown=!0}),x.addEventListener("mousemove",function(E){m.minimapMouseDown&&m.handleMinimapDrag(E)}),x.addEventListener("mouseup",function(){m.minimapMouseDown=!1}),x.addEventListener("mouseleave",function(){m.minimapMouseDown=!1}),x.addEventListener("wheel",function(E){m.handleMinimapWheel(E)})}},{key:"destroy",value:function(){this.stateDisposers.forEach(function(m){m()}),this.state.nodes.removeChannel(Lo),this.state.rels.removeChannel(Lo),this.mainSceneRenderer.destroy(),this.minimapRenderer.destroy()}}]),g}(),Iv=function(){function g(){Xp(this,g),$a(this,"mainSceneRenderer",void 0),$a(this,"minimapRenderer",void 0),$a(this,"needsRun",void 0),$a(this,"minimapMouseDown",void 0),$a(this,"stateDisposers",void 0),$a(this,"state",void 0)}return Av(g,[{key:"renderMainScene",value:function(m){}},{key:"renderMinimap",value:function(m){}},{key:"checkForUpdates",value:function(m,x){}},{key:"onResize",value:function(){}},{key:"updateMainViewport",value:function(m,x,E){}},{key:"updateMinimapViewport",value:function(m,x,E){}},{key:"handleMinimapDrag",value:function(m){}},{key:"handleMinimapWheel",value:function(m){}},{key:"setupMinimapInteractions",value:function(){}},{key:"destroy",value:function(){}},{key:"needsToRun",value:function(){return!1}}]),g}();function oh(g){return oh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},oh(g)}function kv(g,m){var x=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!x){if(Array.isArray(g)||(x=function(z,$){if(z){if(typeof z=="string")return Dv(z,$);var Y=Object.prototype.toString.call(z).slice(8,-1);return Y==="Object"&&z.constructor&&(Y=z.constructor.name),Y==="Map"||Y==="Set"?Array.from(z):Y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Y)?Dv(z,$):void 0}}(g))||m){x&&(g=x);var E=0,D=function(){};return{s:D,n:function(){return E>=g.length?{done:!0}:{done:!1,value:g[E++]}},e:function(z){throw z},f:D}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I,F=!0,V=!1;return{s:function(){x=x.call(g)},n:function(){var z=x.next();return F=z.done,z},e:function(z){V=!0,I=z},f:function(){try{F||x.return==null||x.return()}finally{if(V)throw I}}}}function Dv(g,m){(m==null||m>g.length)&&(m=g.length);for(var x=0,E=new Array(m);x<m;x++)E[x]=g[x];return E}function iy(g,m){for(var x=0;x<m.length;x++){var E=m[x];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,Kp(E.key),E)}}function ei(g,m,x){return(m=Kp(m))in g?Object.defineProperty(g,m,{value:x,enumerable:!0,configurable:!0,writable:!0}):g[m]=x,g}function Kp(g){var m=function(x,E){if(oh(x)!="object"||!x)return x;var D=x[Symbol.toPrimitive];if(D!==void 0){var I=D.call(x,"string");if(oh(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(g);return oh(m)=="symbol"?m:String(m)}var Mv,C=24,L=function(){function g(E,D,I,F){var V;if(function(z,$){if(!(z instanceof $))throw new TypeError("Cannot call a class as a function")}(this,g),ei(this,"nodeShader",void 0),ei(this,"nodeAnimShader",void 0),ei(this,"relShader",void 0),ei(this,"relDataBuffer",void 0),ei(this,"viewportBoxShader",void 0),ei(this,"defaultRelColor",void 0),ei(this,"defaultNodeColor",void 0),ei(this,"disableRelColor",void 0),ei(this,"disableNodeColor",void 0),ei(this,"gl",void 0),ei(this,"activeNodes",void 0),ei(this,"canvas",void 0),ei(this,"projection",void 0),ei(this,"idToIndex",void 0),ei(this,"posBuffer",void 0),ei(this,"numRels",void 0),ei(this,"numNodes",void 0),ei(this,"nodeDataByte",void 0),ei(this,"relIdToIndex",void 0),ei(this,"relData",void 0),ei(this,"viewportBoxBuffer",void 0),ei(this,"relBuffer",void 0),ei(this,"nodeBuffer",void 0),ei(this,"posTexture",void 0),((V=E.getExtension("OES_texture_float"))!==null&&V!==void 0?V:void 0)===void 0)throw new Error("Renderer needs floating point texture support");this.nodeShader=new ya(E,`uniform mat4 u_projection;
uniform sampler2D u_positions;
uniform mediump float u_zoom;
uniform mediump float u_glAdjust;
uniform lowp vec3 u_nodeBorderColor;
uniform lowp vec3 u_selectedBorderColor;
uniform lowp vec3 u_selectedInnerBorderColor;
uniform lowp vec3 u_shadowColor;
uniform lowp float u_drawDefaultBorder;

attribute float a_size;
attribute lowp vec2 a_index;
attribute lowp vec4 a_color;
attribute lowp float a_selected;
attribute lowp float a_hovered;

varying lowp float window;
varying lowp vec4 color;
varying lowp float selected;
varying lowp float hovered;
varying lowp float varNodeSize;
varying lowp vec3 nodeBorderColor;
varying lowp vec3 selectedBorderColor;
varying lowp vec3 selectedInnerBorderColor;
varying lowp vec3 shadowColor;
varying lowp float drawDefaultBorder;

lowp float MinNodeSize = 5.0;

void main(void) {
  vec4 data = texture2D(u_positions, a_index);
  gl_Position = u_projection * vec4(data.xy, 0.0, 1.0);

  lowp float nodeSize = a_size * u_zoom * u_glAdjust;
  if (nodeSize < MinNodeSize) {
   gl_PointSize = MinNodeSize;
   varNodeSize = MinNodeSize;
  } else {
    gl_PointSize = nodeSize;
    varNodeSize = nodeSize;
  }

  color = a_color;
  selected = a_selected;
  hovered = a_hovered;
  nodeBorderColor = u_nodeBorderColor;
  selectedBorderColor = u_selectedBorderColor;
  selectedInnerBorderColor = u_selectedInnerBorderColor;
  shadowColor = u_shadowColor;
  drawDefaultBorder = u_drawDefaultBorder;
}`,`uniform mediump float u_zoom;
uniform mediump float u_glAdjust;

varying lowp vec4 color;
varying lowp float drawDefaultBorder;
varying lowp vec3 nodeBorderColor;
varying lowp vec3 selectedBorderColor;
varying lowp vec3 selectedInnerBorderColor;
varying lowp vec3 shadowColor;
varying lowp float selected;
varying lowp float hovered;
varying lowp float varNodeSize;

mediump float circleSize = 0.40;
mediump float defaultBoderSize = 0.42;
mediump float innerSelectedRingSize = 0.43;
mediump float outerSelectedRingSize = 0.47;
mediump float shadowSize = 0.51;

lowp float getShadowAlpha(lowp float size, lowp float dist) {
  return (1.0 - smoothstep(size, shadowSize, dist)) * 0.25;
}

lowp float getCircleAlpha(lowp float ringSize, lowp float nodeSize, lowp float dist) {
  return color.w - smoothstep(ringSize - nodeSize, ringSize, dist);
}

void main() {
  lowp float dist = distance(gl_PointCoord, vec2(0.5));

  if (dist > 0.51) {
    discard;
  }
  else {
    lowp float nodeSize = 1.0 / varNodeSize;
    lowp float nodeAlpha = getCircleAlpha(circleSize, nodeSize, dist);
    lowp float borderAlpha = getCircleAlpha(defaultBoderSize, nodeSize, dist);
    lowp float ringAlpha = getCircleAlpha(innerSelectedRingSize, nodeSize, dist);
    lowp vec3 finalColor = color.xyz;
    lowp float finalAlpha = nodeAlpha;

    if (selected > 0.0) {
      lowp float shadowAlpha = getShadowAlpha(outerSelectedRingSize, dist);
      lowp float ringAlpha2 = getCircleAlpha(outerSelectedRingSize, nodeSize, dist);

      if (drawDefaultBorder > 0.0) {
        finalColor = mix(nodeBorderColor, finalColor, nodeAlpha);
        finalColor = mix(selectedInnerBorderColor, finalColor, borderAlpha);
        finalColor = mix(selectedBorderColor, finalColor, ringAlpha);
        finalColor = mix(shadowColor, finalColor, ringAlpha2);
        finalAlpha = max(shadowAlpha, max(nodeAlpha, max(borderAlpha, ringAlpha2)));
      } else {
        finalColor = mix(selectedInnerBorderColor, finalColor, nodeAlpha);
        finalColor = mix(selectedBorderColor, finalColor, ringAlpha);
        finalColor = mix(shadowColor, finalColor, ringAlpha2);
        finalAlpha = max(shadowAlpha, max(nodeAlpha, max(ringAlpha, ringAlpha2)));
      }
    } else if (hovered > 0.0) {
      if (drawDefaultBorder > 0.0) {
        lowp float shadowAlpha = getShadowAlpha(defaultBoderSize, dist);
  
        finalColor = mix(nodeBorderColor, finalColor, nodeAlpha);
        finalColor = mix(shadowColor, finalColor, borderAlpha);
        finalAlpha = max(shadowAlpha, max(nodeAlpha, ringAlpha));
      } else {
        lowp float shadowAlpha = getShadowAlpha(circleSize, dist);

        finalColor = mix(shadowColor, finalColor, nodeAlpha);
        finalAlpha = max(shadowAlpha, nodeAlpha);
      }
    } else {
      if (drawDefaultBorder > 0.0) {
        finalColor = mix(nodeBorderColor, finalColor, nodeAlpha);
        finalAlpha = borderAlpha;
      }
    }
    gl_FragColor = vec4(finalColor, 1.0) * finalAlpha;
  }
}
`),this.nodeAnimShader=new ya(E,`uniform mat4 u_projection;
uniform sampler2D u_positions;
uniform lowp float u_animPos;
uniform mediump float u_zoom;
uniform mediump float u_glAdjust;

attribute float a_size;
attribute lowp vec2 a_index;
attribute lowp vec4 a_color;
attribute lowp float a_active;

varying lowp float varNodeSize;
varying lowp vec4 color;

void main(void) {
  vec4 data = texture2D(u_positions, a_index);

  gl_Position = u_projection * vec4(data.xy, 0.0, 1.0);

  float nodeSize = a_size * u_zoom * u_glAdjust;
  nodeSize = nodeSize * (0.4 / 0.5); // Remove extra space added for shadow and selection ring

  gl_PointSize = a_active > 0.5
    ? nodeSize + 0.88 * nodeSize * u_animPos
    : 0.0;

  color = a_color;
  varNodeSize = a_size;
}`,`uniform mediump float u_zoom;
uniform lowp float u_animPos;
uniform mediump float u_glAdjust;

varying lowp vec4 color;
varying lowp float varNodeSize;
mediump float circleSize = 0.50;

void main(void) {

  lowp float dist = distance(gl_PointCoord, vec2(0.5));

  if (dist > 0.51) {
    discard;
  }
  else {
    lowp float alpha = 1.0 - smoothstep(circleSize - (1.0 / (varNodeSize * 2.0 * u_zoom * u_glAdjust)), circleSize, dist);
    lowp float pulseAlpha = 0.9 - 0.9 * u_animPos;
    gl_FragColor = vec4(color.xyz, 1.0) * alpha * pulseAlpha;
  }
}
`),this.relShader=new ya(E,`uniform mat4 u_projection;
uniform sampler2D u_positions;
uniform mediump float u_glAdjust;

attribute vec2 a_from;
attribute vec2 a_to;
attribute lowp vec4 a_color;
attribute lowp float a_triside;
attribute float a_width;

varying lowp vec4 color;

void main(void) {
  vec4 from = texture2D(u_positions, a_from);
  vec4 to = texture2D(u_positions, a_to);
  vec2 direction = normalize(to.xy - from.xy);
  direction = vec2(-direction.y, direction.x);

  float width = a_width * u_glAdjust * 0.5;

  if (a_triside == 0.0) {
    from.y += (width / 2.0) * direction.y;
    from.x += (width / 2.0) * direction.x;
  } else {
    from.y -= (width / 2.0) * direction.y;
    from.x -= (width / 2.0) * direction.x;
  }

  color = a_color;
  gl_Position = u_projection * vec4(from.xy, 0.0, 1.0);
}
`,`varying lowp vec4 color;

void main(void) {
  gl_FragColor = vec4(color.xyz, 1.0) * color.w;
}
`),this.viewportBoxShader=new ya(E,`
attribute vec2 coordinates;
uniform mat4 u_projection;
uniform lowp vec4 u_minimapViewportBoxColor;

varying lowp vec4 minimapViewportBoxColor;

void main(void) {
  gl_Position = u_projection * vec4(coordinates, 0.0, 1.0);
  minimapViewportBoxColor = u_minimapViewportBoxColor;
}
`,`
varying lowp vec4 minimapViewportBoxColor;

void main(void) {
 gl_FragColor = minimapViewportBoxColor;
}
`),this.setShaderUniforms(F),E.clearColor(0,0,0,0),E.disable(E.DEPTH_TEST),this.defaultRelColor=F.defaultRelationshipColor,this.defaultNodeColor=F.defaultNodeColor,this.disableRelColor=F.disabledItemStyles.color,this.disableNodeColor=F.disabledItemStyles.color,E.blendFunc(E.ONE,E.ONE_MINUS_SRC_ALPHA),this.gl=E,this.activeNodes={},this.canvas=E.canvas,this.projection=du(),this.setData({nodes:D.items,rels:I.items}),this.createPositionTexture(),this.setupViewportRendering(F.minimapViewportBoxColor)}var m,x;return m=g,x=[{key:"setShaderUniforms",value:function(E){var D,I,F,V,z,$=E.nodeBorderStyles,Y=null;((D=$.default)===null||D===void 0?void 0:D.rings.length)>0&&(Y=(z=$.default.rings[0])===null||z===void 0?void 0:z.color);var Z,ie,le=null,ve=null,ue=(I=(F=$.selected)===null||F===void 0?void 0:F.rings)!==null&&I!==void 0?I:[],ge=ue.length;ge>1&&(ve=(Z=ue[ge-2])===null||Z===void 0?void 0:Z.color,le=(ie=ue[ge-1])===null||ie===void 0?void 0:ie.color);var Ce=null;(V=$.selected)!==null&&V!==void 0&&V.shadow&&(Ce=$.selected.shadow.color),this.nodeShader.use(),(0,r.isNil)(Y)?this.nodeShader.setUniform("u_drawDefaultBorder",0):(this.nodeShader.setUniform("u_nodeBorderColor",tl(Y)),this.nodeShader.setUniform("u_drawDefaultBorder",1));var Re=tl(le),je=tl(ve),ke=tl(Ce);this.nodeShader.setUniform("u_selectedBorderColor",Re),this.nodeShader.setUniform("u_selectedInnerBorderColor",je),this.nodeShader.setUniform("u_shadowColor",ke)}},{key:"setData",value:function(E){var D=gi(E.rels,this.disableRelColor);this.setupNodeRendering(E.nodes),this.setupRelationshipRendering(D)}},{key:"render",value:function(E,D,I){var F,V=this.gl,z=this.idToIndex,$=kv(E);try{for($.s();!(F=$.n()).done;){var Y=F.value,Z=z[Y.id];this.posBuffer[4*Z+0]=Y.x,this.posBuffer[4*Z+1]=Y.y}}catch(ie){$.e(ie)}finally{$.f()}V.bindTexture(V.TEXTURE_2D,this.posTexture),V.texImage2D(V.TEXTURE_2D,0,V.RGBA,Qt,Qt,0,V.RGBA,V.FLOAT,this.posBuffer),V.enable(V.BLEND),V.bindFramebuffer(V.FRAMEBUFFER,null),V.clear(V.COLOR_BUFFER_BIT),V.viewport(0,0,V.drawingBufferWidth,V.drawingBufferHeight),this.renderAnimations(this.posTexture),this.numRels>0&&(this.relShader.use(),this.relShader.setUniform("u_positions",this.posTexture),V.bindBuffer(V.ARRAY_BUFFER,this.relBuffer),this.relShader.setAttributePointerByteNorm("a_color",4,0,16),this.relShader.setAttributePointerByteNorm("a_from",2,4,16),this.relShader.setAttributePointerByteNorm("a_to",2,6,16),this.relShader.setAttributePointerByteNorm("a_triside",1,8,16),this.relShader.setAttributePointerFloat("a_width",1,12,16),V.drawArrays(V.TRIANGLES,0,6*this.numRels)),this.numNodes>0&&(this.nodeShader.use(),this.nodeShader.setUniform("u_positions",this.posTexture),V.bindBuffer(V.ARRAY_BUFFER,this.nodeBuffer),this.nodeShader.setAttributePointerByteNorm("a_color",4,0,12),this.nodeShader.setAttributePointerByteNorm("a_selected",1,4,12),this.nodeShader.setAttributePointerByteNorm("a_index",2,5,12),this.nodeShader.setAttributePointerByte("a_size",4,8,12),this.nodeShader.setAttributePointerByteNorm("a_hovered",1,9,12),V.drawArrays(V.POINTS,0,this.numNodes))}},{key:"renderViewbox",value:function(){var E=this.gl,D=this.projection,I=this.viewportBoxBuffer;this.viewportBoxShader.use(),this.viewportBoxShader.setUniform("u_projection",D),E.bindBuffer(E.ARRAY_BUFFER,I),this.viewportBoxShader.setAttributePointerFloat("coordinates",2,0,0),E.drawArrays(E.LINES,0,8)}},{key:"updateNodes",value:function(E){var D,I=this.gl,F=this.idToIndex,V=this.disableNodeColor,z=this.nodeBuffer,$=this.nodeDataByte,Y=!1,Z=kv(E);try{for(Z.s();!(D=Z.n()).done;){var ie=D.value,le=F[ie.id];if(!(0,r.isNil)(ie.color)||ie.disabled===!0){var ve=Xl(ie.disabled===!0?V:ie.color);this.nodeDataByte[3*le*4+0]=ve[0],this.nodeDataByte[3*le*4+1]=ve[1],this.nodeDataByte[3*le*4+2]=ve[2],this.nodeDataByte[3*le*4+3]=255*ve[3],Y=!0}if(ie.selected!==void 0){var ue=ie.selected;this.nodeDataByte[3*le*4+4]=ue?255:0,Y=!0}if(ie.activated!==void 0&&(this.nodeDataByte[3*le*4+7]=ie.activated?255:0,Y=!0,ie.activated?this.activeNodes[ie.id]=!0:delete this.activeNodes[ie.id]),ie.hovered!==void 0){var ge=ie.disabled!==!0&&ie.hovered;this.nodeDataByte[3*le*4+9]=ge?255:0,Y=!0}if(ie.size!==void 0){var Ce=ie.size;this.nodeDataByte[3*le*4+8]=Ce||Qn,Y=!0}}}catch(Re){Z.e(Re)}finally{Z.f()}Y&&(I.bindBuffer(I.ARRAY_BUFFER,z),I.bufferData(I.ARRAY_BUFFER,$,I.DYNAMIC_DRAW))}},{key:"updateRelationships",value:function(E){var D,I=gi(E,this.disableRelColor),F=this.gl,V=!1,z=kv(I);try{for(z.s();!(D=z.n()).done;){var $=D.value,Y=$.key,Z=$.width,ie=$.color,le=$.disabled,ve=this.relIdToIndex[Y],ue=(0,r.isNil)(ie)?this.defaultRelColor:ie,ge=rh(le?this.disableRelColor:ue);this.relData.positionsAndColors[ve*C+0]=ge,this.relData.positionsAndColors[ve*C+4]=ge,this.relData.positionsAndColors[ve*C+8]=ge,this.relData.positionsAndColors[ve*C+12]=ge,this.relData.positionsAndColors[ve*C+16]=ge,this.relData.positionsAndColors[ve*C+20]=ge,V=!0,Z!==void 0&&(this.relData.widths[ve*C+3]=Z,this.relData.widths[ve*C+7]=Z,this.relData.widths[ve*C+11]=Z,this.relData.widths[ve*C+15]=Z,this.relData.widths[ve*C+19]=Z,this.relData.widths[ve*C+23]=Z,V=!0)}}catch(Ce){z.e(Ce)}finally{z.f()}V&&(F.bindBuffer(F.ARRAY_BUFFER,this.relBuffer),F.bufferData(F.ARRAY_BUFFER,this.relDataBuffer,F.DYNAMIC_DRAW))}},{key:"createPositionTexture",value:function(){var E=this.gl,D=E.createTexture(),I=new Float32Array(262144);E.bindTexture(E.TEXTURE_2D,D),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.NEAREST),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,E.NEAREST),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),E.texImage2D(E.TEXTURE_2D,0,E.RGBA,Qt,Qt,0,E.RGBA,E.FLOAT,I),this.posTexture=D,this.posBuffer=I}},{key:"updateViewportBox",value:function(E,D,I,F,V){var z=this.gl,$=ot(),Y=F*$,Z=V*$,ie=(.5*Y+D*E)/E,le=(.5*Z+I*E)/E,ve=(.5*-Y+D*E)/E,ue=(.5*-Z+I*E)/E,ge=[ie,le,ve,le,ve,le,ve,ue,ve,ue,ie,ue,ie,ue,ie,le];z.bindBuffer(z.ARRAY_BUFFER,this.viewportBoxBuffer),z.bufferData(z.ARRAY_BUFFER,new Float32Array(ge),z.DYNAMIC_DRAW)}},{key:"updateViewport",value:function(E,D,I){var F=this.gl,V=1/E,z=D-F.drawingBufferWidth*V*.5,$=I-F.drawingBufferHeight*V*.5,Y=F.drawingBufferWidth*V,Z=F.drawingBufferHeight*V,ie=du(),le=2.6315789473684212*ot();Ms(ie,z,z+Y,$+Z,$,0,1e6),this.nodeShader.use(),this.nodeShader.setUniform("u_zoom",E),this.nodeShader.setUniform("u_glAdjust",le),this.nodeShader.setUniform("u_projection",ie),this.nodeAnimShader.use(),this.nodeAnimShader.setUniform("u_zoom",E),this.nodeAnimShader.setUniform("u_glAdjust",le),this.nodeAnimShader.setUniform("u_projection",ie),this.relShader.use(),this.relShader.setUniform("u_glAdjust",le),this.relShader.setUniform("u_projection",ie),this.projection=ie}},{key:"setupViewportRendering",value:function(){var E,D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Qe;this.viewportBoxBuffer=this.gl.createBuffer(),this.viewportBoxShader.use(),this.viewportBoxShader.setUniform("u_minimapViewportBoxColor",[(E=Xl(D))[0]/255,E[1]/255,E[2]/255,E[3]])}},{key:"setupNodeRendering",value:function(E){var D=this.gl,I=new ArrayBuffer(8),F=new Uint32Array(I),V=new Uint8Array(I);this.nodeBuffer===void 0&&(this.nodeBuffer=D.createBuffer()),this.numNodes=E.length;var z=new ArrayBuffer(3*E.length*8),$=new Uint32Array(z),Y={};this.activeNodes={};for(var Z=0;Z<E.length;Z++){var ie=E[Z],le=ie.selected,ve=ie.hovered,ue=ie.color,ge=ie.activated,Ce=ie.size,Re=ie.id,je=ie.disabled,ke=rh((0,r.isNil)(ue)?this.defaultNodeColor:ue);$[3*Z+0]=je?rh(this.disableNodeColor):ke,V[0]=le?255:0,V[1]=Z%Qt,V[2]=Math.floor(Z/Qt),V[3]=ge?255:0,V[4]=!je&&ve?255:0,ge&&(this.activeNodes[Re]=!0),$[3*Z+1]=F[0],$[3*Z+2]=Ce??Qn,$[3*Z+3]=F[1],Y[Re]=Z}D.bindBuffer(D.ARRAY_BUFFER,this.nodeBuffer),D.bufferData(D.ARRAY_BUFFER,$,D.DYNAMIC_DRAW),this.numNodes=E.length,this.nodeDataByte=new Uint8Array(z),this.idToIndex=Y}},{key:"setupRelationshipRendering",value:function(E){var D=this,I=this.gl,F=new ArrayBuffer(4),V=new Uint32Array(F),z=new Uint8Array(F),$={};this.relBuffer===void 0&&(this.relBuffer=I.createBuffer());for(var Y=new ArrayBuffer(E.length*C*4),Z=new Uint32Array(Y),ie=new Float32Array(Y),le=function(ue){var ge=E[ue],Ce=ge.from,Re=ge.to,je=ge.color,ke=ge.width,Ye=ke===void 0?1:ke,ze=ge.key,Ke=ge.disabled,Xe=D.idToIndex[Ce],We=D.idToIndex[Re],it=Xe%Qt,mt=Math.floor(Xe/Qt),It=We%Qt,bt=Math.floor(We/Qt),jt=[it,mt,It,bt],Ct=[It,bt,it,mt],Ee=(0,r.isNil)(je)?D.defaultRelColor:je,we=rh(Ke?D.disableRelColor:Ee);$[ze]=ue;var xe=0,st=function(Ze,vt,Mt,Ut){Z[ue*C+xe]=Ze,xe+=1;for(var zt=0;zt<vt.length;zt++)z[zt]=vt[zt];Z[ue*C+xe]=V[0],xe+=1,z[0]=Mt,Z[ue*C+xe]=V[0],ie[ue*C+(xe+=1)]=Ut,xe+=1};st(we,jt,255,Ye),st(we,Ct,0,Ye),st(we,jt,0,Ye),st(we,Ct,0,Ye),st(we,jt,0,Ye),st(we,Ct,255,Ye)},ve=0;ve<E.length;ve++)le(ve);I.bindBuffer(I.ARRAY_BUFFER,this.relBuffer),I.bufferData(I.ARRAY_BUFFER,Y,I.DYNAMIC_DRAW),this.numRels=E.length,this.relDataBuffer=Y,this.relData={positionsAndColors:Z,widths:ie},this.relIdToIndex=$}},{key:"renderAnimations",value:function(E){var D=this.gl,I=this.nodeBuffer,F=this.numNodes,V=Date.now()%1e3/1e3,z=V<.7?V/.7:0;this.nodeAnimShader.use(),this.nodeAnimShader.setUniform("u_positions",E),this.nodeAnimShader.setUniform("u_animPos",z),D.bindBuffer(D.ARRAY_BUFFER,I),this.nodeAnimShader.setAttributePointerByteNorm("a_color",4,0,12),this.nodeAnimShader.setAttributePointerByteNorm("a_active",1,7,12),this.nodeAnimShader.setAttributePointerByteNorm("a_index",2,5,12),this.nodeAnimShader.setAttributePointerByte("a_size",4,8,12),D.drawArrays(D.POINTS,0,F)}},{key:"destroy",value:function(){this.gl.deleteBuffer(this.nodeBuffer),this.gl.deleteBuffer(this.relBuffer),this.nodeShader.remove(),this.nodeAnimShader.remove(),this.relShader.remove()}}],x&&iy(m.prototype,x),Object.defineProperty(m,"prototype",{writable:!1}),g}(),G=function(g,m,x){var E=ot();g.width=m*E,g.height=x*E,g.style.width="".concat(m,"px"),g.style.height="".concat(x,"px")},Q=function(g){Br.warn("Error: WebGL context lost - visualization will stop working!",g),Mv!==void 0&&Mv(g)},ae=function(g){var m=g.parentElement.getBoundingClientRect(),x=m.width,E=m.height;G(g,x,E)},_e=function(g,m){var x=document.createElement("canvas");return document.body.appendChild(x),G(x,g,m),x},Be=function(g,m){var x=document.createElement("canvas");return Object.assign(x.style,pt),g!==void 0&&(g.appendChild(x),ae(x)),function(E,D){Mv=D,E.addEventListener("webglcontextlost",Q)}(x,m),x},$e=function(g){g.width=0,g.height=0,g.remove()},ct=function(g){return g.getContext("2d")},Et=function(g){var m={antialias:!0},x=g.getContext("webgl",m);return x===null&&(x=g.getContext("experimental-webgl",m)),function(E){return E instanceof WebGLRenderingContext}(x)?x:null},_t=function(g){g.canvas.removeEventListener("webglcontextlost",Q);var m=g.getExtension("WEBGL_lose_context");m==null||m.loseContext()};function Rt(g){return function(m){if(Array.isArray(m))return or(m)}(g)||function(m){if(typeof Symbol<"u"&&m[Symbol.iterator]!=null||m["@@iterator"]!=null)return Array.from(m)}(g)||Kt(g)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Yt(g,m){var x=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!x){if(Array.isArray(g)||(x=Kt(g))||m){x&&(g=x);var E=0,D=function(){};return{s:D,n:function(){return E>=g.length?{done:!0}:{done:!1,value:g[E++]}},e:function(z){throw z},f:D}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I,F=!0,V=!1;return{s:function(){x=x.call(g)},n:function(){var z=x.next();return F=z.done,z},e:function(z){V=!0,I=z},f:function(){try{F||x.return==null||x.return()}finally{if(V)throw I}}}}function Kt(g,m){if(g){if(typeof g=="string")return or(g,m);var x=Object.prototype.toString.call(g).slice(8,-1);return x==="Object"&&g.constructor&&(x=g.constructor.name),x==="Map"||x==="Set"?Array.from(g):x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x)?or(g,m):void 0}}function or(g,m){(m==null||m>g.length)&&(m=g.length);for(var x=0,E=new Array(m);x<m;x++)E[x]=g[x];return E}var St=Qn*ot();function Lt(g){return Lt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},Lt(g)}function cr(g,m){var x=Object.keys(g);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(g);m&&(E=E.filter(function(D){return Object.getOwnPropertyDescriptor(g,D).enumerable})),x.push.apply(x,E)}return x}function Ft(g){for(var m=1;m<arguments.length;m++){var x=arguments[m]!=null?arguments[m]:{};m%2?cr(Object(x),!0).forEach(function(E){var D,I,F;D=g,I=E,F=x[E],I=function(V){var z=function($,Y){if(Lt($)!="object"||!$)return $;var Z=$[Symbol.toPrimitive];if(Z!==void 0){var ie=Z.call($,"string");if(Lt(ie)!="object")return ie;throw new TypeError("@@toPrimitive must return a primitive value.")}return String($)}(V);return Lt(z)=="symbol"?z:String(z)}(I),I in D?Object.defineProperty(D,I,{value:F,enumerable:!0,configurable:!0,writable:!0}):D[I]=F}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(x)):cr(Object(x)).forEach(function(E){Object.defineProperty(g,E,Object.getOwnPropertyDescriptor(x,E))})}return g}var br=function(){for(var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:50,x={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},E=0;E<g.length;E++)x.minX>g[E].x&&(x.minX=g[E].x),x.minY>g[E].y&&(x.minY=g[E].y),x.maxX<g[E].x&&(x.maxX=g[E].x),x.maxY<g[E].y&&(x.maxY=g[E].y);var D=(x.minX+x.maxX)/2,I=(x.minY+x.maxY)/2,F=2*m,V=ot()*F;return{centerX:D,centerY:I,nodesWidth:x.maxX-x.minX+F+V,nodesHeight:x.maxY-x.minY+F+V}},mr=function(g,m,x,E){var D=1/0,I=1/0;return g>1&&(D=x/g),m>1&&(I=E/m),{zoomX:D,zoomY:I}},Jr=function(g,m){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1/0,D=Math.min(g,m);return Math.min(E,Math.max(x,D))},rr=function(g,m,x){var E=br(g,arguments.length>3&&arguments[3]!==void 0?arguments[3]:50),D=E.nodesWidth,I=E.nodesHeight,F=m*ot(),V=x*ot(),z=mr(D,I,F,V),$=z.zoomX,Y=z.zoomY;return Jr($,Y)},ur=function(g,m,x,E){return Math.max(Math.min(m,x),Math.min(g,E))},Si=function(g,m,x,E,D,I){var F=m;return function(V,z,$){return V<z&&V<$}(D,I,m)&&g.length>1?(F=function(V,z,$){var Y=function(ue){var ge=new Array(4).fill(ue[0]);return ue.forEach(function(Ce){ge[0]=Ce.x<ge[0].x?ge[0]:Ft({},Ce),ge[1]=Ce.y<ge[1].y?ge[1]:Ft({},Ce),ge[2]=Ce.x<ge[2].x?Ft({},Ce):ge[2],ge[3]=Ce.y<ge[3].y?Ft({},Ce):ge[3]}),ge}(V),Z=function(){for(var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],ge=0,Ce=0,Re=0;Re<ue.length;Re++)for(var je=Re+1;je<ue.length;je++)ge=Math.hypot(Math.abs(ue[Re].x-ue[je].x),Math.abs(ue[Re].y-ue[je].y)),Ce=Math.max(Ce,ge);return Ce}(Y),ie=2*$,le=ot()*ie,ve=z.height<=z.width?z.height-ie-le:z.width-ie-le;return Z>ve?.9*ve/Z:.9*Z/ve}(g,E,25),ur(D,I,Math.min(m,F),x)):ur(D,I,m,x)};function Yn(g){return Yn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},Yn(g)}function No(g,m){for(var x=0;x<m.length;x++){var E=m[x];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,Ln(E.key),E)}}function Ln(g){var m=function(x,E){if(Yn(x)!="object"||!x)return x;var D=x[Symbol.toPrimitive];if(D!==void 0){var I=D.call(x,"string");if(Yn(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(g);return Yn(m)=="symbol"?m:String(m)}var So=function(){function g(){var E,D,I;(function(F,V){if(!(F instanceof V))throw new TypeError("Cannot call a class as a function")})(this,g),E=this,I=void 0,(D=Ln(D="callbacks"))in E?Object.defineProperty(E,D,{value:I,enumerable:!0,configurable:!0,writable:!0}):E[D]=I,this.callbacks={}}var m,x;return m=g,x=[{key:"register",value:function(E,D){this.isCallbackRegistered(E)||(this.callbacks[E]=[]),this.callbacks[E].push(D)}},{key:"isCallbackRegistered",value:function(E){return this.callbacks[E]!==void 0}},{key:"callIfRegistered",value:function(){var E,D=arguments,I=Array.prototype.slice.call(arguments)[0];E=I,i.includes(E)&&this.isCallbackRegistered(I)&&this.callbacks[I].slice(0).forEach(function(F){return F.apply(null,Array.prototype.slice.call(D,1))})}}],x&&No(m.prototype,x),Object.defineProperty(m,"prototype",{writable:!1}),g}(),Fs=Li(481),Bs=Li.n(Fs);function bs(g){return bs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},bs(g)}function _s(g,m){for(var x=0;x<m.length;x++){var E=m[x];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,Lv(E.key),E)}}function Us(g,m,x){return(m=Lv(m))in g?Object.defineProperty(g,m,{value:x,enumerable:!0,configurable:!0,writable:!0}):g[m]=x,g}function Lv(g){var m=function(x,E){if(bs(x)!="object"||!x)return x;var D=x[Symbol.toPrimitive];if(D!==void 0){var I=D.call(x,"string");if(bs(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(g);return bs(m)=="symbol"?m:String(m)}var ah=5e-5,Nv=function(){function g(E){var D,I=this,F=E.state,V=E.getNodePositions,z=E.canvas;(function($,Y){if(!($ instanceof Y))throw new TypeError("Cannot call a class as a function")})(this,g),Us(this,"xCtrl",void 0),Us(this,"yCtrl",void 0),Us(this,"zoomCtrl",void 0),Us(this,"getNodePositions",void 0),Us(this,"firstUpdate",void 0),Us(this,"state",void 0),Us(this,"canvas",void 0),Us(this,"stateDisposers",void 0),this.state=F,this.getNodePositions=V,this.canvas=z,this.xCtrl=new(Bs())(.35,ah,.05,1),this.yCtrl=new(Bs())(.35,ah,.05,1),this.zoomCtrl=new(Bs())(.3,1e-5,.01,1),this.stateDisposers=[],this.stateDisposers.push(F.autorun(function(){F.fitNodeIds===null&&(I.xCtrl.reset(),I.yCtrl.reset(),I.zoomCtrl.reset())})),this.stateDisposers.push(F.autorun(function(){D!==F.fitNodeIds&&(D=F.fitNodeIds,I.firstUpdate=!0)})),this.stateDisposers.push(F.autorun(function(){F.resetZoom&&(I.firstUpdate=!0)}))}var m,x;return m=g,x=[{key:"needsToRun",value:function(){var E=this.state,D=E.fitNodeIds,I=E.resetZoom;return D.length>0||I}},{key:"update",value:function(E,D){var I=this.state,F=I.fitNodeIds,V=I.resetZoom;F.length>0?this.fitNodes(F,E,D):V&&this.reset(E,D)}},{key:"destroy",value:function(){this.stateDisposers.forEach(function(E){return E()})}},{key:"recalculateTarget",value:function(E,D,I,F){for(var V=this.xCtrl,z=this.yCtrl,$=this.zoomCtrl,Y=this.state,Z=[],ie=0;ie<E.length;ie++)Z.push({id:E[ie]});var le=Y.zoom,ve=Y.panX,ue=Y.panY,ge=Y.maxNodeRadius,Ce=Y.nodes,Re=Y.defaultZoomLevel,je=this.getNodePositions(Z);Ce.updatePositions(je);var ke=br(je,ge),Ye=ke.centerX,ze=ke.centerY,Ke=ke.nodesWidth,Xe=ke.nodesHeight;if(isNaN(Ye)||isNaN(ze))return Br.info("fit() function couldn't calculate center point, not updating viewport"),!1;var We=D.noPan,it=D.outOnly,mt=D.minZoom,It=D.maxZoom;V.setTarget(We?ve:Ye),z.setTarget(We?ue:ze);var bt=mr(Ke,Xe,I,F),jt=bt.zoomX,Ct=bt.zoomY;if(jt===1/0&&Ct===1/0)$.setTarget(Re);else{var Ee=Jr(jt,Ct,mt,It);it&&le<Ee?$.setTarget(le):$.setTarget(Ee)}return!0}},{key:"allNodesAreVisible",value:function(E,D,I){var F=mr(D,I,this.canvas.width,this.canvas.height),V=F.zoomX,z=F.zoomY;return E<V&&E<z}},{key:"reset",value:function(E,D){var I=this.xCtrl,F=this.yCtrl,V=this.zoomCtrl,z=this.state,$=this.firstUpdate,Y=this.canvas,Z=z.zoom,ie=z.panX,le=z.panY,ve=z.nodes,ue=z.maxNodeRadius,ge=z.defaultZoomLevel;if($||E){V.setTarget(ge);var Ce=br(Object.values(ve.idToPosition),ue),Re=Ce.centerX,je=Ce.centerY,ke=Ce.nodesWidth,Ye=Ce.nodesHeight;this.allNodesAreVisible(Z,ke,Ye)?(I.setTarget(Re),F.setTarget(je)):(I.setTarget(ie),F.setTarget(le)),this.firstUpdate=!1}var ze=Z+V.update(Z),Ke=ie+I.update(ie),Xe=le+F.update(le);z.updateZoomToFit(ze,Ke,Xe,Y),Math.abs(V.target-ze)<.01&&(z.updateZoomToFit(ge,Ke,Xe,Y),z.clearReset(),D!==void 0&&D())}},{key:"fitNodes",value:function(E,D,I){var F=this.state,V=this.firstUpdate,z=this.canvas,$=this.xCtrl,Y=this.yCtrl,Z=this.zoomCtrl,ie=F.zoomOptions,le=ie===void 0?{}:ie,ve=F.zoom,ue=F.panX,ge=F.panY,Ce=!0;if(V||D){var Re=z.width,je=z.height;Ce=this.recalculateTarget(E,le,Re,je),this.firstUpdate=!1}if(Ce){if(!le.animated)return F.setZoomPan(Z.target,$.target,Y.target,z),void F.clearFit();var ke=ue+$.update(ue),Ye=ge+Y.update(ge),ze=ve+Z.update(ve);F.updateZoomToFit(ze,ke,Ye,z);var Ke=Math.max(5,10/Z.target),Xe=Math.min(.01,.01*Z.target);!D&&Math.abs(Z.target-ze)<Xe&&Math.abs($.target-ke)<Ke&&Math.abs(Y.target-Ye)<Ke&&(F.setZoom(Z.target,z),F.clearFit(),I!==void 0&&I())}}}],x&&_s(m.prototype,x),Object.defineProperty(m,"prototype",{writable:!1}),g}();function zs(g){return zs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},zs(g)}function Qc(){Qc=function(){return m};var g,m={},x=Object.prototype,E=x.hasOwnProperty,D=Object.defineProperty||function(Ee,we,xe){Ee[we]=xe.value},I=typeof Symbol=="function"?Symbol:{},F=I.iterator||"@@iterator",V=I.asyncIterator||"@@asyncIterator",z=I.toStringTag||"@@toStringTag";function $(Ee,we,xe){return Object.defineProperty(Ee,we,{value:xe,enumerable:!0,configurable:!0,writable:!0}),Ee[we]}try{$({},"")}catch{$=function(we,xe,st){return we[xe]=st}}function Y(Ee,we,xe,st){var Ze=we&&we.prototype instanceof Ce?we:Ce,vt=Object.create(Ze.prototype),Mt=new jt(st||[]);return D(vt,"_invoke",{value:it(Ee,xe,Mt)}),vt}function Z(Ee,we,xe){try{return{type:"normal",arg:Ee.call(we,xe)}}catch(st){return{type:"throw",arg:st}}}m.wrap=Y;var ie="suspendedStart",le="suspendedYield",ve="executing",ue="completed",ge={};function Ce(){}function Re(){}function je(){}var ke={};$(ke,F,function(){return this});var Ye=Object.getPrototypeOf,ze=Ye&&Ye(Ye(Ct([])));ze&&ze!==x&&E.call(ze,F)&&(ke=ze);var Ke=je.prototype=Ce.prototype=Object.create(ke);function Xe(Ee){["next","throw","return"].forEach(function(we){$(Ee,we,function(xe){return this._invoke(we,xe)})})}function We(Ee,we){function xe(Ze,vt,Mt,Ut){var zt=Z(Ee[Ze],Ee,vt);if(zt.type!=="throw"){var Er=zt.arg,Tr=Er.value;return Tr&&zs(Tr)=="object"&&E.call(Tr,"__await")?we.resolve(Tr.__await).then(function(Ur){xe("next",Ur,Mt,Ut)},function(Ur){xe("throw",Ur,Mt,Ut)}):we.resolve(Tr).then(function(Ur){Er.value=Ur,Mt(Er)},function(Ur){return xe("throw",Ur,Mt,Ut)})}Ut(zt.arg)}var st;D(this,"_invoke",{value:function(Ze,vt){function Mt(){return new we(function(Ut,zt){xe(Ze,vt,Ut,zt)})}return st=st?st.then(Mt,Mt):Mt()}})}function it(Ee,we,xe){var st=ie;return function(Ze,vt){if(st===ve)throw new Error("Generator is already running");if(st===ue){if(Ze==="throw")throw vt;return{value:g,done:!0}}for(xe.method=Ze,xe.arg=vt;;){var Mt=xe.delegate;if(Mt){var Ut=mt(Mt,xe);if(Ut){if(Ut===ge)continue;return Ut}}if(xe.method==="next")xe.sent=xe._sent=xe.arg;else if(xe.method==="throw"){if(st===ie)throw st=ue,xe.arg;xe.dispatchException(xe.arg)}else xe.method==="return"&&xe.abrupt("return",xe.arg);st=ve;var zt=Z(Ee,we,xe);if(zt.type==="normal"){if(st=xe.done?ue:le,zt.arg===ge)continue;return{value:zt.arg,done:xe.done}}zt.type==="throw"&&(st=ue,xe.method="throw",xe.arg=zt.arg)}}}function mt(Ee,we){var xe=we.method,st=Ee.iterator[xe];if(st===g)return we.delegate=null,xe==="throw"&&Ee.iterator.return&&(we.method="return",we.arg=g,mt(Ee,we),we.method==="throw")||xe!=="return"&&(we.method="throw",we.arg=new TypeError("The iterator does not provide a '"+xe+"' method")),ge;var Ze=Z(st,Ee.iterator,we.arg);if(Ze.type==="throw")return we.method="throw",we.arg=Ze.arg,we.delegate=null,ge;var vt=Ze.arg;return vt?vt.done?(we[Ee.resultName]=vt.value,we.next=Ee.nextLoc,we.method!=="return"&&(we.method="next",we.arg=g),we.delegate=null,ge):vt:(we.method="throw",we.arg=new TypeError("iterator result is not an object"),we.delegate=null,ge)}function It(Ee){var we={tryLoc:Ee[0]};1 in Ee&&(we.catchLoc=Ee[1]),2 in Ee&&(we.finallyLoc=Ee[2],we.afterLoc=Ee[3]),this.tryEntries.push(we)}function bt(Ee){var we=Ee.completion||{};we.type="normal",delete we.arg,Ee.completion=we}function jt(Ee){this.tryEntries=[{tryLoc:"root"}],Ee.forEach(It,this),this.reset(!0)}function Ct(Ee){if(Ee||Ee===""){var we=Ee[F];if(we)return we.call(Ee);if(typeof Ee.next=="function")return Ee;if(!isNaN(Ee.length)){var xe=-1,st=function Ze(){for(;++xe<Ee.length;)if(E.call(Ee,xe))return Ze.value=Ee[xe],Ze.done=!1,Ze;return Ze.value=g,Ze.done=!0,Ze};return st.next=st}}throw new TypeError(zs(Ee)+" is not iterable")}return Re.prototype=je,D(Ke,"constructor",{value:je,configurable:!0}),D(je,"constructor",{value:Re,configurable:!0}),Re.displayName=$(je,z,"GeneratorFunction"),m.isGeneratorFunction=function(Ee){var we=typeof Ee=="function"&&Ee.constructor;return!!we&&(we===Re||(we.displayName||we.name)==="GeneratorFunction")},m.mark=function(Ee){return Object.setPrototypeOf?Object.setPrototypeOf(Ee,je):(Ee.__proto__=je,$(Ee,z,"GeneratorFunction")),Ee.prototype=Object.create(Ke),Ee},m.awrap=function(Ee){return{__await:Ee}},Xe(We.prototype),$(We.prototype,V,function(){return this}),m.AsyncIterator=We,m.async=function(Ee,we,xe,st,Ze){Ze===void 0&&(Ze=Promise);var vt=new We(Y(Ee,we,xe,st),Ze);return m.isGeneratorFunction(we)?vt:vt.next().then(function(Mt){return Mt.done?Mt.value:vt.next()})},Xe(Ke),$(Ke,z,"Generator"),$(Ke,F,function(){return this}),$(Ke,"toString",function(){return"[object Generator]"}),m.keys=function(Ee){var we=Object(Ee),xe=[];for(var st in we)xe.push(st);return xe.reverse(),function Ze(){for(;xe.length;){var vt=xe.pop();if(vt in we)return Ze.value=vt,Ze.done=!1,Ze}return Ze.done=!0,Ze}},m.values=Ct,jt.prototype={constructor:jt,reset:function(Ee){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(bt),!Ee)for(var we in this)we.charAt(0)==="t"&&E.call(this,we)&&!isNaN(+we.slice(1))&&(this[we]=g)},stop:function(){this.done=!0;var Ee=this.tryEntries[0].completion;if(Ee.type==="throw")throw Ee.arg;return this.rval},dispatchException:function(Ee){if(this.done)throw Ee;var we=this;function xe(zt,Er){return vt.type="throw",vt.arg=Ee,we.next=zt,Er&&(we.method="next",we.arg=g),!!Er}for(var st=this.tryEntries.length-1;st>=0;--st){var Ze=this.tryEntries[st],vt=Ze.completion;if(Ze.tryLoc==="root")return xe("end");if(Ze.tryLoc<=this.prev){var Mt=E.call(Ze,"catchLoc"),Ut=E.call(Ze,"finallyLoc");if(Mt&&Ut){if(this.prev<Ze.catchLoc)return xe(Ze.catchLoc,!0);if(this.prev<Ze.finallyLoc)return xe(Ze.finallyLoc)}else if(Mt){if(this.prev<Ze.catchLoc)return xe(Ze.catchLoc,!0)}else{if(!Ut)throw new Error("try statement without catch or finally");if(this.prev<Ze.finallyLoc)return xe(Ze.finallyLoc)}}}},abrupt:function(Ee,we){for(var xe=this.tryEntries.length-1;xe>=0;--xe){var st=this.tryEntries[xe];if(st.tryLoc<=this.prev&&E.call(st,"finallyLoc")&&this.prev<st.finallyLoc){var Ze=st;break}}Ze&&(Ee==="break"||Ee==="continue")&&Ze.tryLoc<=we&&we<=Ze.finallyLoc&&(Ze=null);var vt=Ze?Ze.completion:{};return vt.type=Ee,vt.arg=we,Ze?(this.method="next",this.next=Ze.finallyLoc,ge):this.complete(vt)},complete:function(Ee,we){if(Ee.type==="throw")throw Ee.arg;return Ee.type==="break"||Ee.type==="continue"?this.next=Ee.arg:Ee.type==="return"?(this.rval=this.arg=Ee.arg,this.method="return",this.next="end"):Ee.type==="normal"&&we&&(this.next=we),ge},finish:function(Ee){for(var we=this.tryEntries.length-1;we>=0;--we){var xe=this.tryEntries[we];if(xe.finallyLoc===Ee)return this.complete(xe.completion,xe.afterLoc),bt(xe),ge}},catch:function(Ee){for(var we=this.tryEntries.length-1;we>=0;--we){var xe=this.tryEntries[we];if(xe.tryLoc===Ee){var st=xe.completion;if(st.type==="throw"){var Ze=st.arg;bt(xe)}return Ze}}throw new Error("illegal catch attempt")},delegateYield:function(Ee,we,xe){return this.delegate={iterator:Ct(Ee),resultName:we,nextLoc:xe},this.method==="next"&&(this.arg=g),ge}},m}function jv(g,m,x,E,D,I,F){try{var V=g[I](F),z=V.value}catch($){return void x($)}V.done?m(z):Promise.resolve(z).then(E,D)}function sh(g,m){(m==null||m>g.length)&&(m=g.length);for(var x=0,E=new Array(m);x<m;x++)E[x]=g[x];return E}function uh(g,m){var x=Object.keys(g);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(g);m&&(E=E.filter(function(D){return Object.getOwnPropertyDescriptor(g,D).enumerable})),x.push.apply(x,E)}return x}function Pa(g){for(var m=1;m<arguments.length;m++){var x=arguments[m]!=null?arguments[m]:{};m%2?uh(Object(x),!0).forEach(function(E){Ar(g,E,x[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(x)):uh(Object(x)).forEach(function(E){Object.defineProperty(g,E,Object.getOwnPropertyDescriptor(x,E))})}return g}function Ub(g,m){for(var x=0;x<m.length;x++){var E=m[x];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,Om(E.key),E)}}function Ar(g,m,x){return(m=Om(m))in g?Object.defineProperty(g,m,{value:x,enumerable:!0,configurable:!0,writable:!0}):g[m]=x,g}function Om(g){var m=function(x,E){if(zs(x)!="object"||!x)return x;var D=x[Symbol.toPrimitive];if(D!==void 0){var I=D.call(x,"string");if(zs(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(g);return zs(m)=="symbol"?m:String(m)}var Zp="NvlController",oy={filename:"visualisation.png",backgroundColor:"rgba(0,0,0,0)"},bd="onError",xm="onLayoutDone",Sm="onLayoutStep",Qp={},Fv=function(){var g;return(g=Qp[arguments.length>0&&arguments[0]!==void 0?arguments[0]:"default"])!==null&&g!==void 0?g:Object.values(Qp).pop()},zb=function(){function g(I,F){var V,z,$,Y=this;(function(we,xe){if(!(we instanceof xe))throw new TypeError("Cannot call a class as a function")})(this,g),Ar(this,"destroyed",void 0),Ar(this,"state",void 0),Ar(this,"callbacks",void 0),Ar(this,"instanceId",void 0),Ar(this,"glController",void 0),Ar(this,"webGLContext",void 0),Ar(this,"webGLMinimapContext",void 0),Ar(this,"htmlOverlay",void 0),Ar(this,"hasResized",void 0),Ar(this,"hierarchicalLayout",void 0),Ar(this,"gridLayout",void 0),Ar(this,"freeLayout",void 0),Ar(this,"d3ForceLayout",void 0),Ar(this,"forceLayout",void 0),Ar(this,"canvasRenderer",void 0),Ar(this,"glCanvas",void 0),Ar(this,"canvasRect",void 0),Ar(this,"glMinimapCanvas",void 0),Ar(this,"c2dCanvas",void 0),Ar(this,"isInRenderSwitchAnimation",void 0),Ar(this,"justSwitchedRenderer",void 0),Ar(this,"justSwitchedLayout",void 0),Ar(this,"layoutUpdating",void 0),Ar(this,"layoutComputing",void 0),Ar(this,"isRenderingDisabled",void 0),Ar(this,"setRenderSwitchAnimation",void 0),Ar(this,"stateDisposers",void 0),Ar(this,"zoomTransitionHandler",void 0),Ar(this,"currentLayout",void 0),Ar(this,"layoutTimeLimit",void 0),Ar(this,"pixelRatio",void 0),Ar(this,"removeResizeListener",void 0),Ar(this,"removeMinimapResizeListener",void 0),Ar(this,"pendingZoomOperation",void 0),Ar(this,"layoutRunner",void 0),Ar(this,"animationRequestId",void 0),Ar(this,"layoutDoneCallback",void 0),Ar(this,"layoutComputingCallback",void 0),Ar(this,"currentLayoutType",void 0),Ar(this,"descriptionElement",void 0),this.destroyed=!1;var Z=F.frame,ie=F.minimapContainer,le=ie===void 0?document.createElement("span"):ie,ve=F.layoutOptions,ue=F.layout,ge=F.instanceId,Ce=ge===void 0?"default":ge,Re=F.disableAria,je=Re!==void 0&&Re,ke=I.nodes,Ye=I.rels,ze=I.webGLVisible,Ke=I.disableWebGL;this.state=I,this.callbacks=new So,this.instanceId=Ce;var Xe=Z;Xe.setAttribute("instanceId",Ce),Xe.setAttribute("data-testid","nvl-parent"),(V=Xe.style.height)!==null&&V!==void 0&&V.length||Object.assign(Xe.style,{height:"100%"}),(z=Xe.style.outline)!==null&&z!==void 0&&z.length||Object.assign(Xe.style,{outline:"none"}),this.descriptionElement=je?document.createElement("div"):function(we,xe){var st;we.setAttribute("role","img"),we.setAttribute("aria-label","Graph visualization");var Ze="nvl-".concat(xe,"-description"),vt=(st=document.getElementById(Ze))!==null&&st!==void 0?st:document.createElement("div");return vt.innerHTML="",vt.id="nvl-".concat(xe,"-description"),vt.setAttribute("role","status"),vt.setAttribute("aria-live","polite"),vt.setAttribute("aria-atomic","false"),vt.style.display="none",we.appendChild(vt),we.setAttribute("aria-describedby",vt.id),vt}(Xe,Ce);var We=Be(Xe,this.onWebGLContextLost.bind(this)),it=Be(le,this.onWebGLContextLost.bind(this));if(We.setAttribute("data-testid","nvl-gl-canvas"),Ke)this.glController=new Iv;else{var mt=Et(We),It=Et(it);this.glController=new md({mainSceneRenderer:new L(mt,ke,Ye,this.state),minimapRenderer:new L(It,ke,Ye,this.state),state:I}),this.webGLContext=mt,this.webGLMinimapContext=It}var bt=Be(Xe,this.onWebGLContextLost.bind(this));bt.setAttribute("data-testid","nvl-c2d-canvas");var jt=bt.getContext("2d"),Ct=document.createElement("div");Object.assign(Ct.style,Pa(Pa({},pt),{},{overflow:"hidden"})),Xe.appendChild(Ct),this.htmlOverlay=Ct,this.hasResized=!0,this.hierarchicalLayout=new ty(Pa(Pa({},ve),{},{state:this.state})),this.gridLayout=new Bc({state:this.state}),this.freeLayout=new Ll({state:this.state}),this.d3ForceLayout=new tv({state:this.state}),this.forceLayout=Ke?this.d3ForceLayout:new Dp(Pa(Pa({},ve),{},{webGLContext:this.webGLContext,state:this.state})),this.state.setLayout(ue),this.state.setLayoutOptions(ve);var Ee=new Pv(bt,jt,I,F);this.canvasRenderer=Ee,this.glCanvas=We,this.canvasRect=We.getBoundingClientRect(),this.glMinimapCanvas=it,this.c2dCanvas=bt,this.glCanvas.style.opacity=ze?"1":"0",this.c2dCanvas.style.opacity=ze?"0":"1",this.isInRenderSwitchAnimation=!1,this.justSwitchedRenderer=!1,this.justSwitchedLayout=!1,this.hasResized=!1,this.layoutUpdating=!1,this.layoutComputing=!1,this.isRenderingDisabled=!1,ke.addChannel(Zp),Ye.addChannel(Zp),this.setRenderSwitchAnimation=function(){Y.isInRenderSwitchAnimation=!1},this.stateDisposers=[],this.stateDisposers.push(I.autorun(function(){Y.callIfRegistered("zoom",I.zoom)})),this.stateDisposers.push(I.autorun(function(){Y.callIfRegistered("pan",{panX:I.panX,panY:I.panY})})),this.stateDisposers.push(I.autorun(function(){Y.setLayout(I.layout)})),this.stateDisposers.push(I.autorun(function(){Y.setLayoutOptions(I.layoutOptions)})),je||this.stateDisposers.push(I.autorun(function(){(function(we,xe){var st=we.nodes,Ze=we.rels,vt=we.layout,Mt=st.items.length,Ut=Ze.items.length;if(Mt!==0||Ut!==0){var zt="".concat(Mt," node").concat(Mt!==1?"s":""),Er="".concat(Ut," relationship").concat(Ut!==1?"s":""),Tr="displayed using a ".concat(vt??"forceDirected"," layout");xe.innerHTML="A graph visualization with ".concat(zt," and ").concat(Er,", ").concat(Tr,".")}else xe.innerHTML="An empty graph visualization."})(I,Y.descriptionElement)})),this.stateDisposers.push(I.autorun(function(){var we=I.webGLVisible?"1":"0";we!==Y.glCanvas.style.opacity&&(Y.justSwitchedRenderer=!0,Y.glCanvas.style.opacity=we,Y.c2dCanvas.style.opacity=I.webGLVisible?"0":"1")})),this.startMainLoop(),this.zoomTransitionHandler=new Nv({state:I,getNodePositions:function(we){return Y.currentLayout.getNodePositions(we)},canvas:We}),this.layoutTimeLimit=($=F.layoutTimeLimit)!==null&&$!==void 0?$:16,this.pixelRatio=ot(),this.removeResizeListener=gn()(Xe,function(){ae(We),ae(bt),Y.canvasRect=We.getBoundingClientRect(),Y.hasResized=!0}),this.removeMinimapResizeListener=gn()(le,function(){ae(it)}),Qp[Ce]=this,window.__Nvl_dumpNodes=function(we){var xe;return(xe=Fv(we))===null||xe===void 0?void 0:xe.dumpNodes()},window.__Nvl_dumpRelationships=function(we){var xe;return(xe=Fv(we))===null||xe===void 0?void 0:xe.dumpRelationships()},window.__Nvl_registerDoneCallback=function(we,xe){var st;return(st=Fv(xe))===null||st===void 0?void 0:st.on(xm,we)},window.__Nvl_getNodesOnScreen=function(we){var xe;return(xe=Fv(we))===null||xe===void 0?void 0:xe.getNodesOnScreen()},window.__Nvl_getZoomLevel=function(we){var xe;return(xe=Fv(we))===null||xe===void 0?void 0:xe.getScale()},this.pendingZoomOperation=null}var m,x,E,D;return m=g,x=[{key:"onWebGLContextLost",value:function(I){this.callIfRegistered("onWebGLContextLost",I)}},{key:"updateMinimapZoom",value:function(){var I=this.state,F=I.nodes,V=I.maxNodeRadius,z=I.maxMinimapZoom,$=I.minMinimapZoom,Y=br(Object.values(F.idToPosition),V),Z=Y.centerX,ie=Y.centerY,le=Y.nodesWidth,ve=Y.nodesHeight,ue=mr(le,ve,this.glMinimapCanvas.width,this.glMinimapCanvas.height),ge=ue.zoomX,Ce=ue.zoomY,Re=Jr(ge,Ce,$,z);this.state.updateMinimapZoomToFit(Re,Z,ie)}},{key:"startMainLoop",value:function(){var I=this,F=this.state,V=F.nodes,z=F.rels;this.currentLayout.update();var $=this.currentLayout.getNodePositions(V.items);V.updatePositions($),this.isRenderingDisabled||(this.glController.renderMainScene($),this.glController.renderMinimap($),this.canvasRenderer.processUpdates(),this.canvasRenderer.render($)),this.layoutRunner=setInterval(function(){try{(function(){var Y=I.currentLayout.getShouldUpdate(),Z=Y||I.justSwitchedLayout,ie=Z&&!I.layoutUpdating&&!I.justSwitchedLayout;if(Z)for(var le=window.performance.now(),ve=ie?0:50,ue=0;ue<ve;ue++){I.currentLayout.update(I.justSwitchedLayout),I.justSwitchedLayout=!1;var ge=window.performance.now();if(!Y||ge-le>I.layoutTimeLimit)break}})()}catch(Y){if(!I.callbacks.isCallbackRegistered(bd))throw Y;I.callIfRegistered(bd,Y)}},13),this.animationRequestId=window.requestAnimationFrame(function Y(){try{(function(Z){if(I.destroyed)Br.info("STEP IN A DESTROYED STRIP");else{var ie=ot();if(ie!==I.pixelRatio)return I.pixelRatio=ie,void I.callIfRegistered("restart");var le=I.currentLayout.getShouldUpdate(),ve=le||I.justSwitchedLayout,ue=I.currentLayout.getComputing(),ge=I.zoomTransitionHandler.needsToRun(),Ce=ve&&!I.layoutUpdating&&!I.justSwitchedLayout,Re=I.layoutComputing&&!ue,je=I.state.webGLVisible&&I.glController.needsToRun(),ke=!I.state.webGLVisible&&I.canvasRenderer.needsToRun(),Ye=I.isInRenderSwitchAnimation||I.justSwitchedRenderer,ze=I.hasResized,Ke=I.pendingZoomOperation!==null,Xe=I.glController.minimapMouseDown;if(V.clearChannel(Zp),z.clearChannel(Zp),ge||ve||Re||Ye||je||ke||Xe||ze||Ke){!Ke||Ce||I.currentLayout.getComputing()||(I.pendingZoomOperation(),I.pendingZoomOperation=null);var We=le||ue||Re;I.zoomTransitionHandler.update(We,function(){return I.callIfRegistered("onZoomTransitionDone")}),ze&&I.glController.onResize();var it=I.currentLayout.getNodePositions(V.items);if(V.updatePositions(it),I.callbacks.isCallbackRegistered(Sm)&&I.callIfRegistered(Sm,I.dumpNodes()),I.updateMinimapZoom(),I.glController.renderMinimap(it),!I.isRenderingDisabled){if((I.state.webGLVisible||Ye)&&I.glController.renderMainScene(it),!I.state.webGLVisible||Ye){I.canvasRenderer.processUpdates(),I.canvasRenderer.render(it);for(var mt=0;mt<z.items.length;mt++){var It=z.items[mt].id,bt=I.canvasRenderer.arrowBundler.getBundle(z.items[mt]),jt=z.idToHtmlOverlay[It],Ct=bt.labelInfo[It];if(jt&&Ct){var Ee=Ct.rotation,we=Ct.position,xe=Ct.width,st=Ct.height,Ze=I.mapCanvasSpaceToRelativePosition(we.x,we.y),vt=Ze.x,Mt=Ze.y,Ut=xe>5&&!I.state.webGLVisible;Object.assign(jt.style,{top:"".concat(Mt,"px"),left:"".concat(vt,"px"),width:"".concat(xe,"px"),height:"".concat(st,"px"),display:Ut?"block":"none",transform:"translate(-50%, -50%) scale(".concat(Number(I.state.zoom),") rotate(").concat(Ee,"rad")})}}}for(var zt=0;zt<V.items.length;zt++){var Er=V.items[zt],Tr=Er.id,Ur=Er.size,xn=V.idToHtmlOverlay[Tr];if(xn){var jn=I.state.nodes.idToPosition[Tr],yn=I.mapCanvasSpaceToRelativePosition(jn.x,jn.y),Yr=yn.x,zr=yn.y,un="".concat(2*(Ur??Qn),"px");Object.assign(xn.style,{top:"".concat(zr,"px"),left:"".concat(Yr,"px"),width:un,height:un,transform:"translate(-50%, -50%) scale(".concat(Number(I.state.zoom),")")})}}}}var mn=!ve&&I.layoutUpdating,ri=ue!==I.layoutComputing;I.layoutComputing=ue,I.layoutUpdating=ve,mn&&I.callIfRegistered(xm),ri&&I.callIfRegistered("onLayoutComputing",ue),I.justSwitchedRenderer=!1,I.hasResized=!1,Z!==void 0&&Z()}})(function(){I.animationRequestId=window.requestAnimationFrame(Y)})}catch(Z){if(!I.callbacks.isCallbackRegistered(bd))throw Z;I.callIfRegistered(bd,Z)}})}},{key:"updateHtmlOverlay",value:function(){this.state.nodes.updateHtmlOverlay(this.htmlOverlay),this.state.rels.updateHtmlOverlay(this.htmlOverlay)}},{key:"dumpNodes",value:function(){var I,F=this.state.nodes.items,V=this.state.nodes.idToPosition,z=[],$=function(le,ve){var ue=typeof Symbol<"u"&&le[Symbol.iterator]||le["@@iterator"];if(!ue){if(Array.isArray(le)||(ue=function(Ye,ze){if(Ye){if(typeof Ye=="string")return sh(Ye,ze);var Ke=Object.prototype.toString.call(Ye).slice(8,-1);return Ke==="Object"&&Ye.constructor&&(Ke=Ye.constructor.name),Ke==="Map"||Ke==="Set"?Array.from(Ye):Ke==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ke)?sh(Ye,ze):void 0}}(le))||ve){ue&&(le=ue);var ge=0,Ce=function(){};return{s:Ce,n:function(){return ge>=le.length?{done:!0}:{done:!1,value:le[ge++]}},e:function(Ye){throw Ye},f:Ce}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Re,je=!0,ke=!1;return{s:function(){ue=ue.call(le)},n:function(){var Ye=ue.next();return je=Ye.done,Ye},e:function(Ye){ke=!0,Re=Ye},f:function(){try{je||ue.return==null||ue.return()}finally{if(ke)throw Re}}}}(F);try{for($.s();!(I=$.n()).done;){var Y=I.value,Z=V[Y.id],ie=this.mapCanvasSpaceToRelativePosition(Z.x,Z.y);z.push(Pa(Pa({},Y),{},{x:ie.x,y:ie.y}))}}catch(le){$.e(le)}finally{$.f()}return z}},{key:"dumpRelationships",value:function(){return gt(this.state.rels.items)}},{key:"mapCanvasSpaceToRelativePosition",value:function(I,F){var V=this.canvasRect,z=window.devicePixelRatio||1,$=(I-this.state.panX)*this.state.zoom/z,Y=(F-this.state.panY)*this.state.zoom/z;return{x:$+.5*V.width,y:Y+.5*V.height}}},{key:"mapRelativePositionToCanvasSpace",value:function(I,F){var V=this.glCanvas.getBoundingClientRect(),z=window.devicePixelRatio||1,$=z*(I-.5*V.width),Y=z*(F-.5*V.height);return{x:this.state.panX+$/this.state.zoom,y:this.state.panY+Y/this.state.zoom}}},{key:"getNodePositions",value:function(){return Object.values(gt(this.state.nodes.idToPosition))}},{key:"setNodePositions",value:function(I){var F=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.state.nodes.updatePositions(I),this.currentLayout.updateNodes(I),F||this.currentLayout.terminateUpdate(),this.hasResized=!0,this.getNodesOnScreen().nodes.length===0&&this.state.setPan(0,0),this.state.clearFit()}},{key:"isLayoutMoving",value:function(){return this.layoutUpdating}},{key:"getNodesOnScreen",value:function(){var I=this.glCanvas.getBoundingClientRect(),F=this.mapRelativePositionToCanvasSpace(0,0),V=F.x,z=F.y,$=this.mapRelativePositionToCanvasSpace(I.width,I.height);return function(Y,Z,ie,le,ve){var ue=arguments.length>5&&arguments[5]!==void 0?arguments[5]:["node"],ge=ve.nodes,Ce=ve.rels,Re=Math.min(Y,ie),je=Math.max(Y,ie),ke=Math.min(Z,le),Ye=Math.max(Z,le),ze=[],Ke=[];if(ue.includes("node"))for(var Xe=0,We=Object.values(ge.idToPosition);Xe<We.length;Xe++){var it=We[Xe],mt=it.x,It=it.y;mt!==void 0&&It!==void 0&&mt>Re&&mt<je&&It>ke&&It<Ye&&ze.push(it)}if(ue.includes("relationship")){var bt,jt=Yt(Ce.items);try{for(jt.s();!(bt=jt.n()).done;){var Ct=bt.value,Ee=Ct.from,we=Ct.to,xe=ge.idToPosition[Ee],st=ge.idToPosition[we];if(xe.x!==void 0&&xe.y!==void 0&&st.x!==void 0&&st.y!==void 0){var Ze=xe.x>Re&&xe.x<je&&xe.y>ke&&xe.y<Ye,vt=st.x>Re&&st.x<je&&st.y>ke&&st.y<Ye;Ze&&vt&&Ke.push(Ct)}}}catch(Mt){jt.e(Mt)}finally{jt.f()}}return{nodes:ze,rels:Ke}}(V,z,$.x,$.y,this.state,["node"])}},{key:"registerDoneCallback",value:function(I){this.layoutDoneCallback=I}},{key:"registerComputingCallback",value:function(I){this.layoutComputingCallback=I}},{key:"getPosition",value:function(I){return this.currentLayout.getNodePositions([{id:I}])[0]}},{key:"getScale",value:function(){return this.state.zoom}},{key:"getPan",value:function(){return{x:this.state.panX,y:this.state.panY}}},{key:"setZoomLevel",value:function(I){var F=this;this.pendingZoomOperation=function(){return F.state.setZoom(I,F.glCanvas)}}},{key:"setPanCoordinates",value:function(I,F){this.state.setPan(I,F)}},{key:"setZoomAndPan",value:function(I,F,V){var z=this;this.pendingZoomOperation=function(){return z.state.setZoomPan(I,F,V,z.glCanvas)}}},{key:"fit",value:function(I,F){var V=this;this.pendingZoomOperation=function(){return V.state.fitNodes(I,F)}}},{key:"resetZoom",value:function(){var I=this;this.pendingZoomOperation=function(){return I.state.setZoomReset()}}},{key:"setRenderer",value:function(I){this.state.setRenderer(I)}},{key:"on",value:function(I,F){this.callbacks.register(I,F)}},{key:"isDestroyed",value:function(){return this.destroyed}},{key:"destroy",value:function(){var I;this.destroyed||(this.animationRequestId&&window.cancelAnimationFrame(this.animationRequestId),this.layoutRunner!==void 0&&window.clearInterval(this.layoutRunner),this.glController.destroy(),this.glCanvas.removeEventListener("transitionend",this.setRenderSwitchAnimation),this.webGLContext!==void 0&&_t(this.webGLContext),this.webGLMinimapContext!==void 0&&_t(this.webGLMinimapContext),$e(this.glCanvas),$e(this.glMinimapCanvas),this.canvasRenderer.destroy(),$e(this.c2dCanvas),this.removeResizeListener(),this.removeMinimapResizeListener(),this.forceLayout.destroy(),this.hierarchicalLayout.destroy(),this.gridLayout.destroy(),this.freeLayout.destroy(),this.htmlOverlay.remove(),this.descriptionElement.remove(),this.zoomTransitionHandler.destroy(),this.stateDisposers.forEach(function(F){F()}),I=this.instanceId,delete Qp[I],this.destroyed=!0)}},{key:"callIfRegistered",value:function(){for(var I=arguments.length,F=new Array(I),V=0;V<I;V++)F[V]=arguments[V];this.callbacks.callIfRegistered.apply(this.callbacks,arguments)}},{key:"getCanvasRelsAt",value:function(I){return this.canvasRenderer.getRelsAt(I)}},{key:"getCanvasNodesAt",value:function(I){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this.canvasRenderer.getNodesAt(I,F)}},{key:"getLayout",value:function(I){return I===Nl?this.hierarchicalLayout:I===Yh?this.forceLayout:I===Gf?this.gridLayout:I===ov?this.freeLayout:I===fs?this.d3ForceLayout:this.forceLayout}},{key:"setLayout",value:function(I){Br.info("Switching to layout: ".concat(I));var F=this.currentLayoutType,V=this.getLayout(I);I==="free"&&V.setNodePositions(this.state.nodes.idToPosition),this.currentLayout=V,this.currentLayoutType=I,F&&F!==this.currentLayoutType&&(this.justSwitchedLayout=!0)}},{key:"setLayoutOptions",value:function(I){this.getLayout(this.state.layout).setOptions(I)}},{key:"createDownloadLink",value:function(I,F){var V=document.createElement("a");V.style.display="none",V.setAttribute("download",I);var z=F.toDataURL("image/png").replace(/^data:image\/png/,"data:application/octet-stream");return V.setAttribute("href",z),V}},{key:"saveToFile",value:function(I){var F=Pa(Pa({},oy),I),V=F.filename,z=F.backgroundColor,$=this.state.nodes.items;this.currentLayout.update(this.justSwitchedLayout),this.justSwitchedLayout=!1;var Y=this.currentLayout.getNodePositions($);this.state.nodes.updatePositions(Y);var Z=_e(this.c2dCanvas.width,this.c2dCanvas.height),ie=ct(Z);this.canvasRenderer.processUpdates(),this.canvasRenderer.render(Y,{canvas:Z,context:ie,backgroundColor:z,ignoreAnimations:!0}),this.createDownloadLink(V,Z).click(),$e(Z),Z=null,ie=null}},{key:"prepareLargeFileForDownload",value:function(I){var F=this,V=Pa(Pa({},oy),I),z=this.state.nodes.items,$=V.filename,Y=V.backgroundColor,Z=this.currentLayout.getNodePositions(z),ie=br(Z,100),le=ie.nodesWidth,ve=ie.nodesHeight,ue=ie.centerX,ge=ie.centerY,Ce=Math.max(Math.min(le+100,15e3),5e3),Re=Math.max(Math.min(ve+100,15e3),5e3);return this.isRenderingDisabled=!0,new Promise(function(je,ke){try{F.setPanCoordinates(ue,ge);var Ye=Math.max(Ce/le-.02,F.state.minZoom),ze=Math.max(Re/ve-.02,F.state.minZoom);F.setZoomLevel(Math.min(Ye,ze))}catch(Ke){return Br.error("An error occurred while downloading the file"),void ke(Ke)}setTimeout(function(){try{F.currentLayout.update(F.justSwitchedLayout),F.justSwitchedLayout=!1,F.state.nodes.updatePositions(Z);var Ke=_e(Ce,Re),Xe=ct(Ke);F.canvasRenderer.processUpdates(),F.canvasRenderer.render(Z,{canvas:Ke,context:Xe,backgroundColor:Y,ignoreAnimations:!0,showCaptions:!0}),F.createDownloadLink($,Ke).click(),$e(Ke),Ke=null,Xe=null,je(!0)}catch(We){ke(We)}},500)})}},{key:"saveFullGraphToLargeFile",value:(E=Qc().mark(function I(F){var V,z,$,Y;return Qc().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return V=Pa(Pa({},oy),F),z=this.state.zoom,$=this.state.panX,Y=this.state.panY,Z.prev=4,Z.next=7,this.prepareLargeFileForDownload(V);case 7:Z.next=17;break;case 9:if(Z.prev=9,Z.t0=Z.catch(4),Br.error("An error occurred while downloading the image"),!this.callbacks.isCallbackRegistered(bd)){Z.next=16;break}this.callIfRegistered(bd,Z.t0),Z.next=17;break;case 16:throw Z.t0;case 17:return Z.prev=17,this.isRenderingDisabled=!1,this.setZoomLevel(z),this.setPanCoordinates($,Y),Z.finish(17);case 22:case"end":return Z.stop()}},I,this,[[4,9,17,22]])}),D=function(){var I=this,F=arguments;return new Promise(function(V,z){var $=E.apply(I,F);function Y(ie){jv($,V,z,Y,Z,"next",ie)}function Z(ie){jv($,V,z,Y,Z,"throw",ie)}Y(void 0)})},function(I){return D.apply(this,arguments)})}],x&&Ub(m.prototype,x),Object.defineProperty(m,"prototype",{writable:!1}),g}();function Bv(g){return Bv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},Bv(g)}function Jp(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}function qb(g,m){for(var x=0;x<m.length;x++){var E=m[x];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,Gb(E.key),E)}}function eg(g,m,x){return m&&qb(g.prototype,m),Object.defineProperty(g,"prototype",{writable:!1}),g}function Gb(g){var m=function(x,E){if(Bv(x)!="object"||!x)return x;var D=x[Symbol.toPrimitive];if(D!==void 0){var I=D.call(x,"string");if(Bv(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(g);return Bv(m)=="symbol"?m:String(m)}var ay=function(){function g(m,x){if(Jp(this,g),!m)throw new Error("Tried to create a node with no data");this.data=m,this.parent=x,this.children=[]}return eg(g,[{key:"addChild",value:function(m){this.children.push(m)}},{key:"isRoot",value:function(){return this.parent===null}},{key:"print",value:function(){var m=this.data.name;this.isRoot()||(m="".concat(m,"		").concat(function(D){for(var I=(Math.round(1e3*D)/1e3).toFixed(3);I.length<6;)I=" ".concat(I);return I}(this.data._timeSpent())," ms"),this.parent.isRoot()||(m="".concat(m,"	").concat(this._percentageOfParentSpent(),"%")));var x=this.noOfChildren()>0;for(var E in x&&(m="".concat(m,"	 Children: ").concat(this.noOfChildren()),console.groupCollapsed(m)),this.children)this.children[E].print();x&&console.groupEnd()}},{key:"noOfChildren",value:function(){return this.children.length}},{key:"_percentageOfParentSpent",value:function(){return Math.round(this.data._timeSpent()/this.parent.data._timeSpent()*100)}}]),g}(),Tm=function(){function g(m){Jp(this,g),this.name=m,this.startTime=performance.now(),this.endTime=null}return eg(g,[{key:"close",value:function(){this.endTime=performance.now()}},{key:"_timeSpent",value:function(){if(this.startTime===null||this.endTime===null)throw new Error("You have an error in your performance measurements that makes the whole tree unreliable. You probably forgot to call performanceTestEnd on ".concat(this.name));return this.endTime-this.startTime}}]),g}(),Cm=function(){function g(){Jp(this,g),this.root=new ay(new Tm("Performance Tree"),null),this.current=this.root}return eg(g,[{key:"clear",value:function(){this.root.children=[],this.current=this.root}},{key:"add",value:function(m){if(this.current){var x=new ay(m,this.current);this.current.addChild(x),this.current=x}else{if(this.root)throw new Error("Performance tree is screwed up");this.root=new ay(m,null),this.current=this.root}}},{key:"close",value:function(){if(this.current.isRoot())throw new Error("Tried to close performance tree root. You probably have one too many Performance.endTest() in your code.");this.current.data.close(),this.current=this.current.parent}},{key:"getCurrentData",value:function(){return this.current.data}},{key:"print",value:function(){this.root.noOfChildren()>0&&this.root.print()}}]),g}(),Pm=function(){function g(){Jp(this,g),window.performance?(this.disabled=!1,this.tree=new Cm):(this.disabled=!0,this.tree=null)}return eg(g,[{key:"startTest",value:function(m){if(!this.disabled){var x,E=m||(x=(x=new Error().stack.split(`
`)[3].trim()).split(" ")[0]==="at"?x.split(" ")[1]:x.split("@")[0]),D=new Tm(E);this.tree.add(D)}}},{key:"endTest",value:function(){this.disabled||this.tree.close()}},{key:"reset",value:function(){this.disabled||this.tree.clear()}},{key:"print",value:function(){this.disabled||this.tree.print()}}]),g}();function tg(g,m){var x=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!x){if(Array.isArray(g)||(x=function(z,$){if(z){if(typeof z=="string")return Am(z,$);var Y=Object.prototype.toString.call(z).slice(8,-1);return Y==="Object"&&z.constructor&&(Y=z.constructor.name),Y==="Map"||Y==="Set"?Array.from(z):Y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Y)?Am(z,$):void 0}}(g))||m){x&&(g=x);var E=0,D=function(){};return{s:D,n:function(){return E>=g.length?{done:!0}:{done:!1,value:g[E++]}},e:function(z){throw z},f:D}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I,F=!0,V=!1;return{s:function(){x=x.call(g)},n:function(){var z=x.next();return F=z.done,z},e:function(z){V=!0,I=z},f:function(){try{F||x.return==null||x.return()}finally{if(V)throw I}}}}function Am(g,m){(m==null||m>g.length)&&(m=g.length);for(var x=0,E=new Array(m);x<m;x++)E[x]=g[x];return E}function Vb(g){this.channels[g]={adds:{},updates:{},removes:{}}}function Wb(g){delete this.channels[g]}function rg(g){this.channels[g].adds={},this.channels[g].updates={},this.channels[g].removes={}}var Rm=function(g){return"html"in g?g.html:"captionHtml"in g?g.captionHtml:void 0};function Hb(g,m){var x,E=!1,D=tg(g);try{for(D.s();!(x=D.n()).done;){var I=x.value,F=I.id;if(this.idToItem[F]===void 0){if(I=(0,r.cloneDeep)(I),this.items.push(I),this.idToItem[F]=I,this.idToPosition[F]={id:F,x:0,y:0},"x"in I&&"y"in I){var V=I,z=V.x,$=V.y;isNaN(z)||isNaN($)||(this.idToPosition[F].x=z,this.idToPosition[F].y=$)}var Y=Rm(I);if(Y instanceof HTMLElement){var Z=document.createElement("div");Object.assign(Z.style,{position:"absolute"}),Z.appendChild(Y),this.idToHtmlOverlay[F]=Z}for(var ie=Object.values(this.channels),le=0,ve=ie;le<ve.length;le++){var ue=ve[le];ue.removes[F]===void 0?ue.adds[F]=I:(delete ue.removes[F],ue.updates[F]=I)}E=!0}}}catch(ge){D.e(ge)}finally{D.f()}E&&(this.version+=1,m!==void 0&&(m.added=!0))}function $b(g,m){var x,E=!1,D=tg(g);try{for(D.s();!(x=D.n()).done;){var I=x.value,F=I.id,V=this.idToItem[F];if(V!==void 0){Object.assign(V,I);var z=Rm(I);if(z instanceof HTMLElement){var $;($=this.idToHtmlOverlay[F])===null||$===void 0||$.remove(),delete this.idToHtmlOverlay[F];var Y=document.createElement("div");Object.assign(Y.style,{position:"absolute"}),Y.appendChild(z),this.idToHtmlOverlay[F]=Y}for(var Z=Object.values(this.channels),ie=0,le=Z;ie<le.length;ie++){var ve=le[ie];if(ve.adds[F]===void 0){var ue=ve.updates[F];ue===void 0&&(ue={id:F},ve.updates[F]=ue),Object.assign(ue,I)}}m!==void 0&&(m.updated=!0)}E=!0}}catch(ge){D.e(ge)}finally{D.f()}E&&(this.version+=1)}function Yb(g,m){var x,E=!1,D=tg(g);try{for(D.s();!(x=D.n()).done;){var I=x.value,F=this.idToItem[I];if(F!==void 0){var V;E=!0,delete this.idToItem[F.id],delete this.idToPosition[F.id],(V=this.idToHtmlOverlay[F.id])===null||V===void 0||V.remove(),delete this.idToHtmlOverlay[F.id],this.items.splice(this.items.indexOf(F),1);for(var z=Object.values(this.channels),$=0,Y=z;$<Y.length;$++){var Z=Y[$];Z.adds[I]!==void 0?delete Z.adds[I]:(delete Z.updates[I],Z.removes[I]=F)}}}}catch(ie){D.e(ie)}finally{D.f()}E&&(m!==void 0&&(m.removed=!0),this.version+=1)}function Xb(g){var m,x=tg(g);try{for(x.s();!(m=x.n()).done;){var E=m.value;if(this.idToPosition[E.id]!==void 0){var D=this.idToPosition[E.id];Object.assign(D,E)}else this.idToPosition[E.id]={id:E.id,x:E.x,y:E.y,pinned:E.pinned}}}catch(I){x.e(I)}finally{x.f()}}function Kb(g){for(var m in this.idToHtmlOverlay){var x=this.idToHtmlOverlay[m];g.appendChild(x)}}var Im=function(){return{idToItem:yr.shallow({}),items:yr.shallow([]),channels:yr.shallow({}),idToPosition:yr.shallow({}),idToHtmlOverlay:yr.shallow({}),version:0,addChannel:X(Vb),removeChannel:X(Wb),clearChannel:X(rg),add:X(Hb),update:X($b),remove:X(Yb),updatePositions:X(Xb),updateHtmlOverlay:X(Kb)}},km={selected:{rings:[{widthFactor:.05,color:Ol},{widthFactor:.1,color:xl}],shadow:{width:10,opacity:1,color:Af}},default:{rings:[]}},Dm={selected:{rings:[{color:Ol,width:2},{color:xl,width:4}],shadow:{width:18,opacity:1,color:Af}},default:{rings:[]}},sy=.75,uy={noPan:!1,outOnly:!1,animated:!0};function Jc(g){return Jc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},Jc(g)}function ly(g,m){(m==null||m>g.length)&&(m=g.length);for(var x=0,E=new Array(m);x<m;x++)E[x]=g[x];return E}function cy(g,m){var x=Object.keys(g);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(g);m&&(E=E.filter(function(D){return Object.getOwnPropertyDescriptor(g,D).enumerable})),x.push.apply(x,E)}return x}function ng(g){for(var m=1;m<arguments.length;m++){var x=arguments[m]!=null?arguments[m]:{};m%2?cy(Object(x),!0).forEach(function(E){var D,I,F;D=g,I=E,F=x[E],I=function(V){var z=function($,Y){if(Jc($)!="object"||!$)return $;var Z=$[Symbol.toPrimitive];if(Z!==void 0){var ie=Z.call($,"string");if(Jc(ie)!="object")return ie;throw new TypeError("@@toPrimitive must return a primitive value.")}return String($)}(V);return Jc(z)=="symbol"?z:String(z)}(I),I in D?Object.defineProperty(D,I,{value:F,enumerable:!0,configurable:!0,writable:!0}):D[I]=F}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(x)):cy(Object(x)).forEach(function(E){Object.defineProperty(g,E,Object.getOwnPropertyDescriptor(x,E))})}return g}var nl=function(g,m,x){(0,r.isNil)(g)||(function(E){return typeof E=="string"&&Xl(E)!==null}(g)?m(g):Gu().warn("Invalid color string for ".concat(x,":"),g))};function _d(g){return _d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},_d(g)}function fy(g,m){var x=Object.keys(g);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(g);m&&(E=E.filter(function(D){return Object.getOwnPropertyDescriptor(g,D).enumerable})),x.push.apply(x,E)}return x}function hy(g){for(var m=1;m<arguments.length;m++){var x=arguments[m]!=null?arguments[m]:{};m%2?fy(Object(x),!0).forEach(function(E){var D,I,F;D=g,I=E,F=x[E],I=function(V){var z=function($,Y){if(_d($)!="object"||!$)return $;var Z=$[Symbol.toPrimitive];if(Z!==void 0){var ie=Z.call($,"string");if(_d(ie)!="object")return ie;throw new TypeError("@@toPrimitive must return a primitive value.")}return String($)}(V);return _d(z)=="symbol"?z:String(z)}(I),I in D?Object.defineProperty(D,I,{value:F,enumerable:!0,configurable:!0,writable:!0}):D[I]=F}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(x)):fy(Object(x)).forEach(function(E){Object.defineProperty(g,E,Object.getOwnPropertyDescriptor(x,E))})}return g}var Mm=function(g){var m=g.minZoom,x=g.maxZoom,E=g.allowDynamicMinZoom,D=E===void 0||E,I=g.layout,F=g.layoutOptions,V=g.styling,z=V===void 0?{}:V,$=g.panX,Y=$===void 0?0:$,Z=g.panY,ie=Z===void 0?0:Z,le=g.initialZoom,ve=g.renderer,ue=ve===void 0?g.useWebGL===!0?Di:Uc:ve,ge=g.disableWebGL,Ce=ge!==void 0&&ge,Re=g.disableWebWorkers,je=Re!==void 0&&Re,ke=g.disableTelemetry,Ye=ke!==void 0&&ke;de(!0),yt.isolateGlobalState();var ze=(0,r.isNil)(m)?.075:m,Ke=(0,r.isNil)(x)?10:x,Xe=function(Ee,we){var xe=we.legacyNodeDefaultBorderColor,st=we.legacySelectedBorderColor,Ze=we.legacyDisabledItemColor,vt=we.legacyDisabledItemFontColor,Mt=Ee.nodeDefaultBorderColor,Ut=Mt===void 0?xe:Mt,zt=Ee.selectedBorderColor,Er=zt===void 0?st:zt,Tr=Ee.disabledItemColor,Ur=Tr===void 0?Ze:Tr,xn=Ee.disabledItemFontColor,jn=xn===void 0?vt:xn,yn=Ee.selectedInnerBorderColor,Yr=Ee.dropShadowColor,zr=Ee.defaultNodeColor,un=Ee.defaultRelationshipColor,mn=Ee.minimapViewportBoxColor,ri=ng({},km.default),tn=ng({},km.selected),In=ng({},Dm.selected),ni={color:Rc,fontColor:"#DDDDDD"},ii=Ac,fi=El;return nl(yn,function(rn){tn.rings[0].color=rn,In.rings[0].color=rn},"selectedInnerBorderColor"),nl(Er,function(rn){tn.rings[1].color=rn,In.rings[1].color=rn},"selectedBorderColor"),nl(Ut,function(rn){var yi;ri.rings=[{color:rn,widthFactor:.05}],tn.rings=[{color:rn,widthFactor:.05}].concat(function(bn){if(Array.isArray(bn))return ly(bn)}(yi=tn.rings)||function(bn){if(typeof Symbol<"u"&&bn[Symbol.iterator]!=null||bn["@@iterator"]!=null)return Array.from(bn)}(yi)||function(bn,Fo){if(bn){if(typeof bn=="string")return ly(bn,Fo);var ia=Object.prototype.toString.call(bn).slice(8,-1);return ia==="Object"&&bn.constructor&&(ia=bn.constructor.name),ia==="Map"||ia==="Set"?Array.from(bn):ia==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ia)?ly(bn,Fo):void 0}}(yi)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}())},"nodeDefaultBorderColor"),nl(Yr,function(rn){tn.shadow.color=rn,In.shadow.color=rn},"dropShadowColor"),nl(Ur,function(rn){ni.color=rn},"disabledItemColor"),nl(jn,function(rn){ni.fontColor=rn},"disabledItemFontColor"),nl(zr,function(rn){fi=rn},"defaultNodeColor"),nl(un,function(rn){ii=rn},"defaultRelationshipColor"),{nodeBorderStyles:{default:ri,selected:tn},relationshipBorderStyles:{default:Dm.default,selected:In},disabledItemStyles:ni,defaultNodeColor:fi,defaultRelationshipColor:ii,minimapViewportBoxColor:mn||Qe}}(z,{legacyNodeDefaultBorderColor:g.nodeDefaultBorderColor,legacySelectedBorderColor:g.selectedBorderColor,legacyDisabledItemColor:g.disabledItemColor,legacyDisabledItemFontColor:g.disabledItemFontColor}),We=Xe.nodeBorderStyles,it=Xe.relationshipBorderStyles,mt=Xe.disabledItemStyles,It=Xe.defaultNodeColor,bt=Xe.defaultRelationshipColor,jt=Xe.minimapViewportBoxColor,Ct=yr({zoom:le||sy,minimapZoom:sy,defaultZoomLevel:sy,panX:Y,panY:ie,minimapPanX:0,minimapPanY:0,fitNodeIds:[],resetZoom:!1,zoomOptions:uy,forceWebGL:!1,renderer:ue,disableWebGL:Ce,disableWebWorkers:je,disableTelemetry:Ye,fitMovement:0,layout:I,layoutOptions:F,maxDistance:0,maxNodeRadius:50,nodeBorderStyles:We,relationshipBorderStyles:it,disabledItemStyles:mt,defaultNodeColor:It,defaultRelationshipColor:bt,minimapViewportBoxColor:jt,get minZoom(){return ze},get maxZoom(){return Ke},get minMinimapZoom(){return 0},get maxMinimapZoom(){return .2},get webGLVisible(){var Ee=this.fitMovement>50;return this.renderer===Di||Ee},nodes:Im(),rels:Im(),graphUpdates:0,waypoints:{data:yr.shallow({}),counter:0},setGraphUpdated:X(function(){this.graphUpdates+=1}),setRenderer:X(function(Ee){X(function(){this.graphUpdates+=1}),this.renderer=Ee}),setWaypoints:X(function(Ee){this.waypoints.data=Ee,this.waypoints.counter+=1}),setZoomPan:X(function(Ee,we,xe,st){if(D){var Ze=Object.values(this.nodes.idToPosition),vt=Si(Ze,ze,Ke,st,Ee,this.zoom);vt!==this.zoom&&(this.zoom=vt,Ee===vt&&(this.panX=we,this.panY=xe))}else{var Mt=ur(Ee,this.zoom,ze,Ke);Mt!==this.zoom&&(this.zoom=Mt,this.panX=we,this.panY=xe)}this.fitNodeIds=[],this.resetZoom=!1,this.forceWebGL=!1}),setZoom:X(function(Ee,we){if(D){var xe=Object.values(this.nodes.idToPosition);this.zoom=Si(xe,ze,Ke,we,Ee,this.zoom)}else this.zoom=ur(Ee,this.zoom,ze,Ke);this.fitNodeIds=[],this.fitMovement=0,this.resetZoom=!1,this.forceWebGL=!1}),setPan:X(function(Ee,we){this.panX=Ee,this.panY=we,this.fitNodeIds=[],this.resetZoom=!1,this.forceWebGL=!1}),setLayout:X(function(Ee){this.layout=Ee}),setLayoutOptions:X(function(Ee){this.layoutOptions=Ee}),fitNodes:X(function(Ee){var we=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.fitNodeIds=(0,r.intersection)(Ee,(0,r.map)(this.nodes.items,"id")),this.zoomOptions=hy(hy({},uy),we)}),setZoomReset:X(function(){this.resetZoom=!0}),clearFit:X(function(){this.fitNodeIds=[],this.forceWebGL=!1,this.fitMovement=0,this.zoomOptions=uy}),clearReset:X(function(){this.resetZoom=!1,this.fitMovement=0}),updateZoomToFit:X(function(Ee,we,xe,st){var Ze;if(this.fitMovement=Math.abs(Ee-this.zoom)+Math.abs(we-this.panX)+Math.abs(xe-this.panY),D){var vt=Object.values(this.nodes.idToPosition);Ze=Si(vt,ze,Ke,st,Ee,this.zoom)}else Ze=ur(Ee,this.zoom,ze,Ke);this.zoom=Ze,this.panX=we,this.panY=xe}),updateMinimapZoomToFit:X(function(Ee,we,xe){this.minimapZoom=Ee,this.minimapPanX=we,this.minimapPanY=xe}),autorun:Je,reaction:at});return Ct},Zb=function(g){return!!g&&typeof g.id=="string"&&g.id.length>0},ig=Li(1187);function Uv(g){return Uv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},Uv(g)}function zv(g,m){var x=Object.keys(g);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(g);m&&(E=E.filter(function(D){return Object.getOwnPropertyDescriptor(g,D).enumerable})),x.push.apply(x,E)}return x}function qv(g){for(var m=1;m<arguments.length;m++){var x=arguments[m]!=null?arguments[m]:{};m%2?zv(Object(x),!0).forEach(function(E){var D,I,F;D=g,I=E,F=x[E],I=function(V){var z=function($,Y){if(Uv($)!="object"||!$)return $;var Z=$[Symbol.toPrimitive];if(Z!==void 0){var ie=Z.call($,"string");if(Uv(ie)!="object")return ie;throw new TypeError("@@toPrimitive must return a primitive value.")}return String($)}(V);return Uv(z)=="symbol"?z:String(z)}(I),I in D?Object.defineProperty(D,I,{value:F,enumerable:!0,configurable:!0,writable:!0}):D[I]=F}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(x)):zv(Object(x)).forEach(function(E){Object.defineProperty(g,E,Object.getOwnPropertyDescriptor(x,E))})}return g}function Lm(g){return function(m){if(Array.isArray(m))return dy(m)}(g)||function(m){if(typeof Symbol<"u"&&m[Symbol.iterator]!=null||m["@@iterator"]!=null)return Array.from(m)}(g)||function(m,x){if(m){if(typeof m=="string")return dy(m,x);var E=Object.prototype.toString.call(m).slice(8,-1);return E==="Object"&&m.constructor&&(E=m.constructor.name),E==="Map"||E==="Set"?Array.from(m):E==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(E)?dy(m,x):void 0}}(g)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function dy(g,m){(m==null||m>g.length)&&(m=g.length);for(var x=0,E=new Array(m);x<m;x++)E[x]=g[x];return E}var Gv=function(g){return{id:g.elementId}},vy=function(g){return{id:g.elementId,from:g.startNodeElementId,to:g.endNodeElementId}},Qb=ig.resultTransformers.mappedResultTransformer({map:function(g){return Object.values(g.toObject())},collect:function(g){var m={nodes:[],relationships:[]},x=new Map;return function(E){for(var D=Lm(E),I=[];D.length;){var F=D.pop();Array.isArray(F)?D.push.apply(D,Lm(F)):I.push(F)}return I}(g).forEach(function(E){(0,ig.isNode)(E)?(m.nodes.push(Gv(E)),x.set(E.elementId,E)):(0,ig.isPath)(E)?E.segments.forEach(function(D){m.nodes.push(Gv(D.start)),m.nodes.push(Gv(D.end)),m.relationships.push(vy(D.relationship)),x.set(D.start.elementId,D.start),x.set(D.end.elementId,D.end),x.set(D.relationship.elementId,D.relationship)}):(0,ig.isRelationship)(E)&&(m.relationships.push(vy(E)),x.set(E.elementId,E))}),qv(qv({},m),{},{recordObjectMap:x})}});const Jb=(g=>{var m={};return Li.d(m,g),m})({AnalyticsBrowser:()=>sH});var py,e_=new Uint8Array(16);function t_(){if(!py&&!(py=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return py(e_)}const r_=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var jo=[],gy=0;gy<256;++gy)jo.push((gy+256).toString(16).substr(1));const n_=function(g){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,x=(jo[g[m+0]]+jo[g[m+1]]+jo[g[m+2]]+jo[g[m+3]]+"-"+jo[g[m+4]]+jo[g[m+5]]+"-"+jo[g[m+6]]+jo[g[m+7]]+"-"+jo[g[m+8]]+jo[g[m+9]]+"-"+jo[g[m+10]]+jo[g[m+11]]+jo[g[m+12]]+jo[g[m+13]]+jo[g[m+14]]+jo[g[m+15]]).toLowerCase();if(!function(E){return typeof E=="string"&&r_.test(E)}(x))throw TypeError("Stringified UUID is invalid");return x};var Nm,yy,my=0,ws=0;const i_=function(g,m,x){var E=0,D=new Array(16),I=(g=g||{}).node||Nm,F=g.clockseq!==void 0?g.clockseq:yy;if(I==null||F==null){var V=g.random||(g.rng||t_)();I==null&&(I=Nm=[1|V[0],V[1],V[2],V[3],V[4],V[5]]),F==null&&(F=yy=16383&(V[6]<<8|V[7]))}var z=g.msecs!==void 0?g.msecs:Date.now(),$=g.nsecs!==void 0?g.nsecs:ws+1,Y=z-my+($-ws)/1e4;if(Y<0&&g.clockseq===void 0&&(F=F+1&16383),(Y<0||z>my)&&g.nsecs===void 0&&($=0),$>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");my=z,ws=$,yy=F;var Z=(1e4*(268435455&(z+=122192928e5))+$)%4294967296;D[E++]=Z>>>24&255,D[E++]=Z>>>16&255,D[E++]=Z>>>8&255,D[E++]=255&Z;var ie=z/4294967296*1e4&268435455;D[E++]=ie>>>8&255,D[E++]=255&ie,D[E++]=ie>>>24&15|16,D[E++]=ie>>>16&255,D[E++]=F>>>8|128,D[E++]=255&F;for(var le=0;le<6;++le)D[E+le]=I[le];return m||n_(D)};function lh(g){return lh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},lh(g)}function Zl(){Zl=function(){return m};var g,m={},x=Object.prototype,E=x.hasOwnProperty,D=Object.defineProperty||function(Ee,we,xe){Ee[we]=xe.value},I=typeof Symbol=="function"?Symbol:{},F=I.iterator||"@@iterator",V=I.asyncIterator||"@@asyncIterator",z=I.toStringTag||"@@toStringTag";function $(Ee,we,xe){return Object.defineProperty(Ee,we,{value:xe,enumerable:!0,configurable:!0,writable:!0}),Ee[we]}try{$({},"")}catch{$=function(we,xe,st){return we[xe]=st}}function Y(Ee,we,xe,st){var Ze=we&&we.prototype instanceof Ce?we:Ce,vt=Object.create(Ze.prototype),Mt=new jt(st||[]);return D(vt,"_invoke",{value:it(Ee,xe,Mt)}),vt}function Z(Ee,we,xe){try{return{type:"normal",arg:Ee.call(we,xe)}}catch(st){return{type:"throw",arg:st}}}m.wrap=Y;var ie="suspendedStart",le="suspendedYield",ve="executing",ue="completed",ge={};function Ce(){}function Re(){}function je(){}var ke={};$(ke,F,function(){return this});var Ye=Object.getPrototypeOf,ze=Ye&&Ye(Ye(Ct([])));ze&&ze!==x&&E.call(ze,F)&&(ke=ze);var Ke=je.prototype=Ce.prototype=Object.create(ke);function Xe(Ee){["next","throw","return"].forEach(function(we){$(Ee,we,function(xe){return this._invoke(we,xe)})})}function We(Ee,we){function xe(Ze,vt,Mt,Ut){var zt=Z(Ee[Ze],Ee,vt);if(zt.type!=="throw"){var Er=zt.arg,Tr=Er.value;return Tr&&lh(Tr)=="object"&&E.call(Tr,"__await")?we.resolve(Tr.__await).then(function(Ur){xe("next",Ur,Mt,Ut)},function(Ur){xe("throw",Ur,Mt,Ut)}):we.resolve(Tr).then(function(Ur){Er.value=Ur,Mt(Er)},function(Ur){return xe("throw",Ur,Mt,Ut)})}Ut(zt.arg)}var st;D(this,"_invoke",{value:function(Ze,vt){function Mt(){return new we(function(Ut,zt){xe(Ze,vt,Ut,zt)})}return st=st?st.then(Mt,Mt):Mt()}})}function it(Ee,we,xe){var st=ie;return function(Ze,vt){if(st===ve)throw new Error("Generator is already running");if(st===ue){if(Ze==="throw")throw vt;return{value:g,done:!0}}for(xe.method=Ze,xe.arg=vt;;){var Mt=xe.delegate;if(Mt){var Ut=mt(Mt,xe);if(Ut){if(Ut===ge)continue;return Ut}}if(xe.method==="next")xe.sent=xe._sent=xe.arg;else if(xe.method==="throw"){if(st===ie)throw st=ue,xe.arg;xe.dispatchException(xe.arg)}else xe.method==="return"&&xe.abrupt("return",xe.arg);st=ve;var zt=Z(Ee,we,xe);if(zt.type==="normal"){if(st=xe.done?ue:le,zt.arg===ge)continue;return{value:zt.arg,done:xe.done}}zt.type==="throw"&&(st=ue,xe.method="throw",xe.arg=zt.arg)}}}function mt(Ee,we){var xe=we.method,st=Ee.iterator[xe];if(st===g)return we.delegate=null,xe==="throw"&&Ee.iterator.return&&(we.method="return",we.arg=g,mt(Ee,we),we.method==="throw")||xe!=="return"&&(we.method="throw",we.arg=new TypeError("The iterator does not provide a '"+xe+"' method")),ge;var Ze=Z(st,Ee.iterator,we.arg);if(Ze.type==="throw")return we.method="throw",we.arg=Ze.arg,we.delegate=null,ge;var vt=Ze.arg;return vt?vt.done?(we[Ee.resultName]=vt.value,we.next=Ee.nextLoc,we.method!=="return"&&(we.method="next",we.arg=g),we.delegate=null,ge):vt:(we.method="throw",we.arg=new TypeError("iterator result is not an object"),we.delegate=null,ge)}function It(Ee){var we={tryLoc:Ee[0]};1 in Ee&&(we.catchLoc=Ee[1]),2 in Ee&&(we.finallyLoc=Ee[2],we.afterLoc=Ee[3]),this.tryEntries.push(we)}function bt(Ee){var we=Ee.completion||{};we.type="normal",delete we.arg,Ee.completion=we}function jt(Ee){this.tryEntries=[{tryLoc:"root"}],Ee.forEach(It,this),this.reset(!0)}function Ct(Ee){if(Ee||Ee===""){var we=Ee[F];if(we)return we.call(Ee);if(typeof Ee.next=="function")return Ee;if(!isNaN(Ee.length)){var xe=-1,st=function Ze(){for(;++xe<Ee.length;)if(E.call(Ee,xe))return Ze.value=Ee[xe],Ze.done=!1,Ze;return Ze.value=g,Ze.done=!0,Ze};return st.next=st}}throw new TypeError(lh(Ee)+" is not iterable")}return Re.prototype=je,D(Ke,"constructor",{value:je,configurable:!0}),D(je,"constructor",{value:Re,configurable:!0}),Re.displayName=$(je,z,"GeneratorFunction"),m.isGeneratorFunction=function(Ee){var we=typeof Ee=="function"&&Ee.constructor;return!!we&&(we===Re||(we.displayName||we.name)==="GeneratorFunction")},m.mark=function(Ee){return Object.setPrototypeOf?Object.setPrototypeOf(Ee,je):(Ee.__proto__=je,$(Ee,z,"GeneratorFunction")),Ee.prototype=Object.create(Ke),Ee},m.awrap=function(Ee){return{__await:Ee}},Xe(We.prototype),$(We.prototype,V,function(){return this}),m.AsyncIterator=We,m.async=function(Ee,we,xe,st,Ze){Ze===void 0&&(Ze=Promise);var vt=new We(Y(Ee,we,xe,st),Ze);return m.isGeneratorFunction(we)?vt:vt.next().then(function(Mt){return Mt.done?Mt.value:vt.next()})},Xe(Ke),$(Ke,z,"Generator"),$(Ke,F,function(){return this}),$(Ke,"toString",function(){return"[object Generator]"}),m.keys=function(Ee){var we=Object(Ee),xe=[];for(var st in we)xe.push(st);return xe.reverse(),function Ze(){for(;xe.length;){var vt=xe.pop();if(vt in we)return Ze.value=vt,Ze.done=!1,Ze}return Ze.done=!0,Ze}},m.values=Ct,jt.prototype={constructor:jt,reset:function(Ee){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(bt),!Ee)for(var we in this)we.charAt(0)==="t"&&E.call(this,we)&&!isNaN(+we.slice(1))&&(this[we]=g)},stop:function(){this.done=!0;var Ee=this.tryEntries[0].completion;if(Ee.type==="throw")throw Ee.arg;return this.rval},dispatchException:function(Ee){if(this.done)throw Ee;var we=this;function xe(zt,Er){return vt.type="throw",vt.arg=Ee,we.next=zt,Er&&(we.method="next",we.arg=g),!!Er}for(var st=this.tryEntries.length-1;st>=0;--st){var Ze=this.tryEntries[st],vt=Ze.completion;if(Ze.tryLoc==="root")return xe("end");if(Ze.tryLoc<=this.prev){var Mt=E.call(Ze,"catchLoc"),Ut=E.call(Ze,"finallyLoc");if(Mt&&Ut){if(this.prev<Ze.catchLoc)return xe(Ze.catchLoc,!0);if(this.prev<Ze.finallyLoc)return xe(Ze.finallyLoc)}else if(Mt){if(this.prev<Ze.catchLoc)return xe(Ze.catchLoc,!0)}else{if(!Ut)throw new Error("try statement without catch or finally");if(this.prev<Ze.finallyLoc)return xe(Ze.finallyLoc)}}}},abrupt:function(Ee,we){for(var xe=this.tryEntries.length-1;xe>=0;--xe){var st=this.tryEntries[xe];if(st.tryLoc<=this.prev&&E.call(st,"finallyLoc")&&this.prev<st.finallyLoc){var Ze=st;break}}Ze&&(Ee==="break"||Ee==="continue")&&Ze.tryLoc<=we&&we<=Ze.finallyLoc&&(Ze=null);var vt=Ze?Ze.completion:{};return vt.type=Ee,vt.arg=we,Ze?(this.method="next",this.next=Ze.finallyLoc,ge):this.complete(vt)},complete:function(Ee,we){if(Ee.type==="throw")throw Ee.arg;return Ee.type==="break"||Ee.type==="continue"?this.next=Ee.arg:Ee.type==="return"?(this.rval=this.arg=Ee.arg,this.method="return",this.next="end"):Ee.type==="normal"&&we&&(this.next=we),ge},finish:function(Ee){for(var we=this.tryEntries.length-1;we>=0;--we){var xe=this.tryEntries[we];if(xe.finallyLoc===Ee)return this.complete(xe.completion,xe.afterLoc),bt(xe),ge}},catch:function(Ee){for(var we=this.tryEntries.length-1;we>=0;--we){var xe=this.tryEntries[we];if(xe.tryLoc===Ee){var st=xe.completion;if(st.type==="throw"){var Ze=st.arg;bt(xe)}return Ze}}throw new Error("illegal catch attempt")},delegateYield:function(Ee,we,xe){return this.delegate={iterator:Ct(Ee),resultName:we,nextLoc:xe},this.method==="next"&&(this.arg=g),ge}},m}function Rr(g,m,x,E,D,I,F){try{var V=g[I](F),z=V.value}catch($){return void x($)}V.done?m(z):Promise.resolve(z).then(E,D)}function o_(g,m){for(var x=0;x<m.length;x++){var E=m[x];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,Aa(E.key),E)}}function Aa(g){var m=function(x,E){if(lh(x)!="object"||!x)return x;var D=x[Symbol.toPrimitive];if(D!==void 0){var I=D.call(x,"string");if(lh(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(g);return lh(m)=="symbol"?m:String(m)}var Mi=window.localStorage,jm="neo4j.nvl.sTid",Ql=!1,a_=function(){function g(){var I,F,V;(function($,Y){if(!($ instanceof Y))throw new TypeError("Cannot call a class as a function")})(this,g),I=this,V=void 0,(F=Aa(F="analytics"))in I?Object.defineProperty(I,F,{value:V,enumerable:!0,configurable:!0,writable:!0}):I[F]=V;var z=new Jb.AnalyticsBrowser;this.analytics=z}var m,x,E,D;return E=g,D=[{key:"init",value:function(I){this.analytics.load({writeKey:I}),this.analytics.addSourceMiddleware(function(F){var V=F.payload,z=F.next,$=V.obj.context.page;$!==void 0&&($.url="",$.title="",$.search="",$.referrer="",$.path=""),z(V)})}},{key:"trackEvent",value:(m=Zl().mark(function I(F){var V;return Zl().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,this.ready();case 2:V="".concat(F.eventPrefix?F.eventPrefix:"NVL_core","-").concat(F.event),this.analytics.track(V,F.properties).catch(function($){Br.warn("TRACKING: Event tracking is failed. err: ".concat($))});case 4:case"end":return z.stop()}},I,this)}),x=function(){var I=this,F=arguments;return new Promise(function(V,z){var $=m.apply(I,F);function Y(ie){Rr($,V,z,Y,Z,"next",ie)}function Z(ie){Rr($,V,z,Y,Z,"throw",ie)}Y(void 0)})},function(I){return x.apply(this,arguments)})},{key:"identify",value:function(){if(!Ql){var I=this.getSegmentTrackingId();this.analytics.identify(I).catch(function(F){Br.debug("TRACKING: Identifying user for Segment tracking failed. err: ".concat(F))}),Ql=!0}}},{key:"loadSavedSegmentId",value:function(){try{var I=Mi.getItem(jm);return typeof I=="string"?I:null}catch(F){return Br.debug("TRACKING: Retrieving tracking Id failed. err: ".concat(F)),null}}},{key:"getSegmentTrackingId",value:function(){var I=this.loadSavedSegmentId(),F=I??i_();return this.saveTrackingId(F),F}},{key:"saveTrackingId",value:function(I){Mi.setItem(jm,I)}},{key:"ready",value:function(){return this.analytics.ready().catch(function(I){Br.debug("TRACKING: segment track instance not ready. err: ".concat(I))})}}],D&&o_(E.prototype,D),Object.defineProperty(E,"prototype",{writable:!1}),g}();function Vv(g){return Vv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},Vv(g)}function s_(g,m){return function(x){if(Array.isArray(x))return x}(g)||function(x,E){var D=x==null?null:typeof Symbol<"u"&&x[Symbol.iterator]||x["@@iterator"];if(D!=null){var I,F,V,z,$=[],Y=!0,Z=!1;try{if(V=(D=D.call(x)).next,E!==0)for(;!(Y=(I=V.call(D)).done)&&($.push(I.value),$.length!==E);Y=!0);}catch(ie){Z=!0,F=ie}finally{try{if(!Y&&D.return!=null&&(z=D.return(),Object(z)!==z))return}finally{if(Z)throw F}}return $}}(g,m)||Fm(g,m)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function by(g,m){var x=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!x){if(Array.isArray(g)||(x=Fm(g))||m){x&&(g=x);var E=0,D=function(){};return{s:D,n:function(){return E>=g.length?{done:!0}:{done:!1,value:g[E++]}},e:function(z){throw z},f:D}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I,F=!0,V=!1;return{s:function(){x=x.call(g)},n:function(){var z=x.next();return F=z.done,z},e:function(z){V=!0,I=z},f:function(){try{F||x.return==null||x.return()}finally{if(V)throw I}}}}function Fm(g,m){if(g){if(typeof g=="string")return og(g,m);var x=Object.prototype.toString.call(g).slice(8,-1);return x==="Object"&&g.constructor&&(x=g.constructor.name),x==="Map"||x==="Set"?Array.from(g):x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x)?og(g,m):void 0}}function og(g,m){(m==null||m>g.length)&&(m=g.length);for(var x=0,E=new Array(m);x<m;x++)E[x]=g[x];return E}function Bm(g,m){var x=Object.keys(g);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(g);m&&(E=E.filter(function(D){return Object.getOwnPropertyDescriptor(g,D).enumerable})),x.push.apply(x,E)}return x}function ti(g){for(var m=1;m<arguments.length;m++){var x=arguments[m]!=null?arguments[m]:{};m%2?Bm(Object(x),!0).forEach(function(E){var D,I,F;D=g,I=E,F=x[E],(I=Wv(I))in D?Object.defineProperty(D,I,{value:F,enumerable:!0,configurable:!0,writable:!0}):D[I]=F}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(x)):Bm(Object(x)).forEach(function(E){Object.defineProperty(g,E,Object.getOwnPropertyDescriptor(x,E))})}return g}function Um(g,m){for(var x=0;x<m.length;x++){var E=m[x];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,Wv(E.key),E)}}function Wv(g){var m=function(x,E){if(Vv(x)!="object"||!x)return x;var D=x[Symbol.toPrimitive];if(D!==void 0){var I=D.call(x,"string");if(Vv(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}(g);return Vv(m)=="symbol"?m:String(m)}function Nn(g,m,x){Ti(g,m),m.set(g,x)}function Ti(g,m){if(m.has(g))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Bt(g,m){return g.get(Ya(g,m))}function wd(g,m,x){return g.set(Ya(g,m),x),x}function Ya(g,m,x){if(typeof g=="function"?g===m:g.has(m))return arguments.length<3?m:x;throw new TypeError("Private element is not present on this object")}var Hv=new WeakMap,zm=new WeakMap,sn=new WeakMap,On=new WeakMap,na=new WeakMap,Jl=new WeakMap,Ra=new WeakSet,qm=function(){function g(E){var D,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],V=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},z=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};(function($,Y){if(!($ instanceof Y))throw new TypeError("Cannot call a class as a function")})(this,g),Ti(this,D=Ra),D.add(this),Nn(this,Hv,void 0),Nn(this,zm,void 0),Nn(this,sn,void 0),Nn(this,On,void 0),Nn(this,na,void 0),Nn(this,Jl,void 0),V.disableTelemetry!==!0&&(wd(Jl,this,new a_),Bt(Jl,this).init("4SGwdwzuDm5WkFvQtz7D6ATQlo14yjmW"),Bt(Jl,this).identify()),Ya(Ra,this,ag).call(this,V),wd(Hv,this,new o(z)),wd(zm,this,new Pm),wd(na,this,V),Bt(na,this).frame=E,this.checkWebGLCompatibility(),Ya(Ra,this,_y).call(this,I,F,V)}var m,x;return m=g,x=[{key:"restart",value:function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},D=arguments.length>1&&arguments[1]!==void 0&&arguments[1],I=this.getNodePositions(),F=Bt(sn,this),V=F.zoom,z=F.layout,$=F.layoutOptions,Y=F.nodes,Z=F.rels;Bt(On,this).destroy(),Object.assign(Bt(na,this),E),Ya(Ra,this,_y).call(this,Y.items,Z.items,Bt(na,this)),this.setZoom(V),this.setLayout(z),this.setLayoutOptions($),this.addAndUpdateElementsInGraph(Y.items,Z.items),D&&this.setNodePositions(I)}},{key:"addAndUpdateElementsInGraph",value:function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];Ya(Ra,this,wy).call(this,E),Ya(Ra,this,Ey).call(this,D,E);var I={added:!1,updated:!1};Bt(sn,this).nodes.update(E,ti({},I)),Bt(sn,this).rels.update(D,ti({},I)),Bt(sn,this).nodes.add(E,ti({},I)),Bt(sn,this).rels.add(D,ti({},I)),Bt(sn,this).setGraphUpdated(),Bt(On,this).updateHtmlOverlay()}},{key:"getSelectedNodes",value:function(){var E=this;return Bt(sn,this).nodes.items.filter(function(D){return D.selected}).map(function(D){return ti(ti({},D),Bt(sn,E).nodes.idToPosition[D.id])})}},{key:"getSelectedRelationships",value:function(){return Bt(sn,this).rels.items.filter(function(E){return E.selected})}},{key:"updateElementsInGraph",value:function(E,D){var I={added:!1,updated:!1};Ya(Ra,this,wy).call(this,E),Ya(Ra,this,Ey).call(this,D,E),Bt(sn,this).nodes.update(E,ti({},I)),Bt(sn,this).rels.update(D,ti({},I)),Bt(On,this).updateHtmlOverlay()}},{key:"addElementsToGraph",value:function(E,D){Ya(Ra,this,wy).call(this,E),Ya(Ra,this,Ey).call(this,D,E);var I={added:!1,updated:!1};Bt(sn,this).nodes.add(E,ti({},I)),Bt(sn,this).rels.add(D,ti({},I)),Bt(On,this).updateHtmlOverlay()}},{key:"removeNodesWithIds",value:function(E){if(Array.isArray(E)&&!(0,r.isEmpty)(E)){var D,I={},F=by(E);try{for(F.s();!(D=F.n()).done;)I[D.value]=!0}catch(Z){F.e(Z)}finally{F.f()}var V,z=[],$=by(Bt(sn,this).rels.items);try{for($.s();!(V=$.n()).done;){var Y=V.value;I[Y.from]!==!0&&I[Y.to]!==!0||z.push(Y.id)}}catch(Z){$.e(Z)}finally{$.f()}z.length>0&&Ya(Ra,this,ch).call(this,z),Ya(Ra,this,Es).call(this,E),Bt(sn,this).setGraphUpdated(),Bt(On,this).updateHtmlOverlay()}}},{key:"removeRelationshipsWithIds",value:function(E){Array.isArray(E)&&!(0,r.isEmpty)(E)&&(Ya(Ra,this,ch).call(this,E),Bt(sn,this).setGraphUpdated(),Bt(On,this).updateHtmlOverlay())}},{key:"getNodes",value:function(){return Bt(On,this).dumpNodes()}},{key:"getRelationships",value:function(){return Bt(On,this).dumpRelationships()}},{key:"getNodeById",value:function(E){return Bt(sn,this).nodes.idToItem[E]}},{key:"getRelationshipById",value:function(E){return Bt(sn,this).rels.idToItem[E]}},{key:"getPositionById",value:function(E){return Bt(sn,this).nodes.idToPosition[E]}},{key:"getCurrentOptions",value:function(){return Bt(na,this)}},{key:"destroy",value:function(){Bt(On,this).destroy()}},{key:"deselectAll",value:function(){this.updateElementsInGraph(Bt(sn,this).nodes.items.map(function(E){return ti(ti({},E),{},{selected:!1})}),Bt(sn,this).rels.items.map(function(E){return ti(ti({},E),{},{selected:!1})}))}},{key:"fit",value:function(E,D){Bt(On,this).fit(E,D)}},{key:"resetZoom",value:function(){Bt(On,this).resetZoom()}},{key:"setUseWebGLRenderer",value:function(E){Bt(On,this).setRenderer(E?Di:Uc)}},{key:"setRenderer",value:function(E){Bt(On,this).setRenderer(E)}},{key:"setDisableWebGL",value:function(){var E=arguments.length>0&&arguments[0]!==void 0&&arguments[0];Bt(na,this).disableWebGL!==E&&(Bt(na,this).disableWebGL=E,this.restart())}},{key:"pinNode",value:function(E){Bt(sn,this).nodes.update([{id:E,pinned:!0}],{})}},{key:"unPinNode",value:function(E){Bt(sn,this).nodes.update(E.map(function(D){return{id:D,pinned:!1}}),{})}},{key:"setLayout",value:function(E){Bt(sn,this).setLayout(E)}},{key:"setLayoutOptions",value:function(E){Bt(sn,this).setLayoutOptions(E)}},{key:"getNodesOnScreen",value:function(){return Bt(On,this).getNodesOnScreen()}},{key:"getNodePositions",value:function(){return Bt(On,this).getNodePositions()}},{key:"setNodePositions",value:function(E){var D=arguments.length>1&&arguments[1]!==void 0&&arguments[1];Bt(On,this).setNodePositions(E,D)}},{key:"isLayoutMoving",value:function(){return Bt(On,this).isLayoutMoving()}},{key:"saveToFile",value:function(E){Bt(On,this).saveToFile(E)}},{key:"saveFullGraphToLargeFile",value:function(E){Bt(On,this).saveFullGraphToLargeFile(E)}},{key:"setZoom",value:function(E){Bt(On,this).setZoomLevel(E)}},{key:"setPan",value:function(E,D){Bt(On,this).setPanCoordinates(E,D)}},{key:"setZoomAndPan",value:function(E,D,I){Bt(On,this).setZoomAndPan(E,D,I)}},{key:"getScale",value:function(){return Bt(On,this).getScale()}},{key:"getPan",value:function(){return Bt(On,this).getPan()}},{key:"getHits",value:function(E){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["node","relationship"],I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{hitNodeMarginWidth:0},F=Bt(sn,this),V=F.zoom,z=F.panX,$=F.panY,Y=F.webGLVisible,Z=yd(E,Bt(na,this).frame,V,z,$),ie=Z.x,le=Z.y,ve=Y?function(ue,ge,Ce){var Re=arguments.length>3&&arguments[3]!==void 0?arguments[3]:["node","relationship"],je=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},ke=[],Ye=[],ze=Ce.nodes,Ke=Ce.rels;return Re.includes("node")&&ke.push.apply(ke,Rt(function(Xe,We){var it,mt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},It=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,bt=[],jt=Yt(arguments.length>2&&arguments[2]!==void 0?arguments[2]:[]);try{var Ct=function(){var Ee,we=it.value,xe=mt[we.id];if((xe==null?void 0:xe.x)===void 0||xe.y===void 0)return 1;var st=((Ee=we.size)!==null&&Ee!==void 0?Ee:Qn)*ot(),Ze={x:xe.x-Xe,y:xe.y-We},vt=Math.pow(st,2),Mt=Math.pow(st+It,2),Ut=Math.pow(Ze.x,2)+Math.pow(Ze.y,2),zt=Math.sqrt(Ut);if(Ut<Mt){var Er=bt.findIndex(function(Tr){return Tr.distance>zt});bt.splice(Er!==-1?Er:bt.length,0,{data:we,targetCoordinates:{x:xe.x,y:xe.y},pointerCoordinates:{x:Xe,y:We},distanceVector:Ze,distance:zt,insideNode:Ut<vt})}};for(jt.s();!(it=jt.n()).done;)Ct()}catch(Ee){jt.e(Ee)}finally{jt.f()}return bt}(ue,ge,ze.items,ze.idToPosition,je.hitNodeMarginWidth))),Re.includes("relationship")&&Ye.push.apply(Ye,Rt(function(Xe,We){var it,mt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},It=[],bt={},jt=Yt(arguments.length>2&&arguments[2]!==void 0?arguments[2]:[]);try{var Ct=function(){var Ee=it.value,we=Ee.from,xe=Ee.to;if(bt["".concat(we,".").concat(xe)]===void 0){var st=mt[we],Ze=mt[xe];if((st==null?void 0:st.x)===void 0||st.y===void 0||(Ze==null?void 0:Ze.x)===void 0||Ze.y===void 0)return 0;var vt=vs({x:st.x,y:st.y},{x:Ze.x,y:Ze.y},{x:Xe,y:We});if(vt<=St){var Mt=It.findIndex(function(Ut){return Ut.distance>vt});It.splice(Mt!==-1?Mt:It.length,0,{data:Ee,fromTargetCoordinates:{x:st.x,y:st.y},toTargetCoordinates:{x:Ze.x,y:Ze.y},pointerCoordinates:{x:Xe,y:We},distance:vt})}bt["".concat(we,".").concat(xe)]=1,bt["".concat(xe,".").concat(we)]=1}};for(jt.s();!(it=jt.n()).done;)Ct()}catch(Ee){jt.e(Ee)}finally{jt.f()}return It}(ue,ge,Ke.items,ze.idToPosition))),{nodes:ke,relationships:Ye}}(ie,le,Bt(sn,this),D,I):function(ue,ge,Ce){var Re=arguments.length>3&&arguments[3]!==void 0?arguments[3]:["node","relationship"],je=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},ke=[],Ye=[];return Re.includes("node")&&ke.push.apply(ke,Rt(Ce.getCanvasNodesAt({x:ue,y:ge},je.hitNodeMarginWidth))),Re.includes("relationship")&&Ye.push.apply(Ye,Rt(Ce.getCanvasRelsAt({x:ue,y:ge}))),{nodes:ke,relationships:Ye}}(ie,le,Bt(On,this),D,I);return ti(ti({},E),{},{nvlTargets:ve})}},{key:"getContainer",value:function(){return Bt(na,this).frame}},{key:"checkWebGLCompatibility",value:function(){var E=Bt(na,this).disableWebGL;if(E===void 0||!E){var D=function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document.createElement("canvas");try{return window.WebGLRenderingContext!==void 0&&(I.getContext("webgl")!==null||I.getContext("experimental-webgl")!==null)}catch{return!1}}();if(!D){if(E!==void 0)throw new Il("Could not initialize WebGL");Bt(na,this).renderer=Uc,console.warn("GPU acceleration is not available on your browser. Falling back to CPU layout and rendering. You can disable this warning by setting the disableWebGL option to true.")}E===void 0&&(Bt(na,this).disableWebGL=!D)}}}],x&&Um(m.prototype,x),Object.defineProperty(m,"prototype",{writable:!1}),g}();function _y(){var g,m=this,x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};wd(sn,this,Mm(D)),D.minimapContainer instanceof HTMLElement||delete D.minimapContainer,wd(On,this,new zb(Bt(sn,this),D)),this.addAndUpdateElementsInGraph(x,E),Bt(On,this).on("restart",this.restart.bind(this));var I,F,V=by((I=Bt(Hv,this).callbacks,Object.entries(I)));try{for(V.s();!(F=V.n()).done;){var z=s_(F.value,2),$=z[0];z[1]!==void 0&&Bt(On,this).on($,Bt(Hv,this)[$].bind(Bt(Hv,this)))}}catch(Z){V.e(Z)}finally{V.f()}var Y=(g=Bt(na,this).frame)===null||g===void 0?void 0:g.getAttribute("id");Bt(na,this).disableTelemetry!==!0&&setTimeout(function(){Bt(On,m).isDestroyed()||Bt(Jl,m).trackEvent({eventPrefix:$t.includes(Y)?Y:null,event:"instantiated",properties:{}})},200)}function ag(g){var m,x=g.logging;(x==null?void 0:x.level)!==void 0&&(m=x.level,Br.setLevel(m),function(E,D){var I=E.methodFactory;E.methodFactory=function(F,V,z){var $=I(F,V,z);return function(){for(var Y=arguments.length,Z=new Array(Y),ie=0;ie<Y;ie++)Z[ie]=arguments[ie];typeof D.logger=="function"?D.logger.apply(D,[F].concat(Z)):$.apply(void 0,Z)}},E.setLevel(E.getLevel())}(Br,x))}function Es(g){var m=Array.isArray(g)?g:[g],x=Bt(sn,this),E=x.nodes,D=x.fitNodeIds;E.remove(m,{removed:!1}),D.length&&m.find(function(I){return D.includes(I)})!==void 0&&Bt(sn,this).fitNodes(D.filter(function(I){return!m.includes(I)}))}function ch(g){var m=Array.isArray(g)?g:[g];Bt(sn,this).rels.remove(m,{removed:!1})}function wy(g){var m=g.find(function(E){return!function(D){return!!D&&typeof D.id=="string"&&D.id.length>0}(E)});if(m){var x="";throw/^\d+$/.test(m.id)||(x=" Node ids need to be numeric strings. Strings that contain anything other than numbers are not yet supported."),new TypeError("Invalid node provided: ".concat(JSON.stringify(m),".").concat(x))}}function Ey(g){for(var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],x="",E=null,D=Bt(sn,this),I=D.nodes,F=D.rels,V={},z=0;z<m.length;z++){var $=m[z];V[$.id]=$}for(var Y=ti(ti({},I.idToItem),V),Z=F.idToItem,ie=0;ie<g.length;ie++){var le=g[ie];if(!Zb(le)){E=le,/^\d+$/.test(le.id)&&(x=" Node ids need to be numeric strings. Strings that contain anything other than numbers are not yet supported.");break}if(Z[le.id]===void 0){var ve=Y[le.from],ue=Y[le.to];if(ve===void 0){x=' Node with id "'.concat(le.from,'" does not exist.'),E=le;break}if(ue===void 0){x=' Node with id "'.concat(le.to,'" does not exist.'),E=le;break}}}if(E!==null)throw new TypeError("Invalid relationship provided: ".concat(JSON.stringify(E),".").concat(x))}var u_={textColorForBackground:$p};const l_=qm})();Du.RL;Du.wK;Du.x_;Du.lv;Du.YQ;var v$=Du.BP;Du.GZ;Du.Vw;Du.Ay;Du._G;Du.Wy;Du.h4;const lH=10,Ax=10;class Fb{constructor(e,t){kn(this,"nvl");kn(this,"options");kn(this,"container");kn(this,"callbackMap");kn(this,"addEventListener",(e,t,n)=>{var i;(i=this.container)==null||i.addEventListener(e,t,n)});kn(this,"removeEventListener",(e,t,n)=>{var i;(i=this.container)==null||i.removeEventListener(e,t,n)});kn(this,"callCallbackIfRegistered",(e,...t)=>{const n=this.callbackMap.get(e);typeof n=="function"&&n(...t)});kn(this,"updateCallback",(e,t)=>{this.callbackMap.set(e,t)});kn(this,"removeCallback",e=>{this.callbackMap.delete(e)});this.nvl=e,this.options=t,this.container=this.nvl.getContainer(),this.callbackMap=new Map}get nvlInstance(){return this.nvl}get currentOptions(){return this.options}get containerInstance(){return this.container}}const cH=(r,e)=>{const t=Math.abs(r.clientX-e.x),n=Math.abs(r.clientY-e.y);return t>Ax||n>Ax?!0:Math.pow(t,2)+Math.pow(n,2)>Ax},fH=(r,e)=>{const t=r.getBoundingClientRect(),n=window.devicePixelRatio||1;return{x:(e.clientX-t.left-t.width*.5)*n,y:(e.clientY-t.top-t.height*.5)*n}};class p$ extends Fb{constructor(t,n={selectOnClick:!1}){super(t,n);kn(this,"moved");kn(this,"mousePosition");kn(this,"handleMouseDown",t=>{this.mousePosition={x:t.clientX,y:t.clientY}});kn(this,"handleRightClick",t=>{var a,s;t.preventDefault();const{nvlTargets:n}=this.nvlInstance.getHits(t),{nodes:i=[],relationships:o=[]}=n;if(i.length===0&&o.length===0){this.callCallbackIfRegistered("onCanvasRightClick",t);return}i.length>0?this.callCallbackIfRegistered("onNodeRightClick",(a=i[0])==null?void 0:a.data,n,t):o.length>0&&this.callCallbackIfRegistered("onRelationshipRightClick",(s=o[0])==null?void 0:s.data,n,t)});kn(this,"handleDoubleClick",t=>{var a,s;const{nvlTargets:n}=this.nvlInstance.getHits(t),{nodes:i=[],relationships:o=[]}=n;if(i.length===0&&o.length===0){this.callCallbackIfRegistered("onCanvasDoubleClick",t);return}i.length>0?this.callCallbackIfRegistered("onNodeDoubleClick",(a=i[0])==null?void 0:a.data,n,t):o.length>0&&this.callCallbackIfRegistered("onRelationshipDoubleClick",(s=o[0])==null?void 0:s.data,n,t)});kn(this,"handleClick",t=>{var a,s;if(cH(t,this.mousePosition)||t.button!==0)return;const{nvlTargets:n}=this.nvlInstance.getHits(t),{nodes:i=[],relationships:o=[]}=n;if(i.length===0&&o.length===0){this.currentOptions.selectOnClick===!0&&this.nvlInstance.deselectAll(),this.callCallbackIfRegistered("onCanvasClick",t);return}if(i.length>0){const u=i.map(l=>l.data);if(this.currentOptions.selectOnClick===!0){const l=this.nvlInstance.getSelectedNodes(),c=this.nvlInstance.getSelectedRelationships(),h=[...u[0]?[{id:u[0].id,selected:!0}]:[],...l.map(v=>({id:v.id,selected:!1}))],d=c.map(v=>({...v,selected:!1}));this.nvlInstance.updateElementsInGraph(h,d)}this.callCallbackIfRegistered("onNodeClick",(a=i[0])==null?void 0:a.data,n,t)}else if(o.length>0){const u=o.map(l=>l.data);if(this.currentOptions.selectOnClick===!0){const l=this.nvlInstance.getSelectedNodes(),c=this.nvlInstance.getSelectedRelationships(),f=l.map(v=>({id:v.id,selected:!1})),d=[...u[0]?[{id:u[0].id,selected:!0}]:[],...c.map(v=>({...v,selected:!1}))];this.nvlInstance.updateElementsInGraph(f,d)}this.callCallbackIfRegistered("onRelationshipClick",(s=o[0])==null?void 0:s.data,n,t)}});kn(this,"destroy",()=>{this.removeEventListener("mousedown",this.handleMouseDown,!0),this.removeEventListener("click",this.handleClick,!0),this.removeEventListener("dblclick",this.handleDoubleClick,!0),this.removeEventListener("contextmenu",this.handleRightClick,!0)});this.mousePosition={x:0,y:0},this.addEventListener("mousedown",this.handleMouseDown,!0),this.addEventListener("click",this.handleClick,!0),this.addEventListener("dblclick",this.handleDoubleClick,!0),this.addEventListener("contextmenu",this.handleRightClick,!0)}}class g$ extends Fb{constructor(t,n={drawShadowOnHover:!1}){super(t,n);kn(this,"currentHoveredElement");kn(this,"currentHoveredElementIsNode");kn(this,"updates");kn(this,"handleHover",t=>{const{nvlTargets:n}=this.nvlInstance.getHits(t),{nodes:i=[],relationships:o=[]}=n,a=i[0]??o[0],s=a==null?void 0:a.data;if(this.currentElementNeedsUnHover(s==null?void 0:s.id)&&this.unHoverCurrentElement(),s!==void 0&&i[0]!==void 0)this.updates.nodes.push({id:s.id,hovered:!0}),this.currentHoveredElement=s,this.currentHoveredElementIsNode=!0;else if(a!==void 0){const{id:l,from:c,to:f}=s;this.updates.relationships.push({id:l,from:c,to:f,hovered:!0}),this.currentHoveredElement=s,this.currentHoveredElementIsNode=!1}else this.currentHoveredElement=void 0,this.currentHoveredElementIsNode=void 0;this.callCallbackIfRegistered("onHover",this.currentHoveredElement,n,t),this.currentOptions.drawShadowOnHover===!0&&this.nvlInstance.getNodes().length>0&&this.nvlInstance.updateElementsInGraph(this.updates.nodes,this.updates.relationships),this.clearUpdates()});this.updates={nodes:[],relationships:[]},this.addEventListener("mousemove",this.handleHover,!0)}clearUpdates(){this.updates.nodes=[],this.updates.relationships=[]}currentElementNeedsUnHover(t){return this.currentHoveredElement!==void 0&&this.currentHoveredElement.id!==t}unHoverCurrentElement(){if(this.currentHoveredElement===void 0)return;const t={id:this.currentHoveredElement.id,hovered:!1};if(this.currentHoveredElementIsNode===!0)this.updates.nodes.push(t);else{const{from:n,to:i}=this.currentHoveredElement;this.updates.relationships.push({...t,from:n,to:i})}}destroy(){this.removeEventListener("mousemove",this.handleHover,!0)}}var cN={exports:{}},fN={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(dn,function(){function t(p,_,O,P,R){(function T(A,M,N,j,B){for(;j>N;){if(j-N>600){var q=j-N+1,W=M-N+1,J=Math.log(q),te=.5*Math.exp(2*J/3),re=.5*Math.sqrt(J*te*(q-te)/q)*(W-q/2<0?-1:1),ee=Math.max(N,Math.floor(M-W*te/q+re)),fe=Math.min(j,Math.floor(M+(q-W)*te/q+re));T(A,M,ee,fe,B)}var he=A[M],se=N,me=j;for(n(A,N,M),B(A[j],he)>0&&n(A,N,j);se<me;){for(n(A,se,me),se++,me--;B(A[se],he)<0;)se++;for(;B(A[me],he)>0;)me--}B(A[N],he)===0?n(A,N,me):n(A,++me,j),me<=M&&(N=me+1),M<=me&&(j=me-1)}})(p,_,O||0,P||p.length-1,R||i)}function n(p,_,O){var P=p[_];p[_]=p[O],p[O]=P}function i(p,_){return p<_?-1:p>_?1:0}var o=function(p){p===void 0&&(p=9),this._maxEntries=Math.max(4,p),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function a(p,_,O){if(!O)return _.indexOf(p);for(var P=0;P<_.length;P++)if(O(p,_[P]))return P;return-1}function s(p,_){u(p,0,p.children.length,_,p)}function u(p,_,O,P,R){R||(R=w(null)),R.minX=1/0,R.minY=1/0,R.maxX=-1/0,R.maxY=-1/0;for(var T=_;T<O;T++){var A=p.children[T];l(R,p.leaf?P(A):A)}return R}function l(p,_){return p.minX=Math.min(p.minX,_.minX),p.minY=Math.min(p.minY,_.minY),p.maxX=Math.max(p.maxX,_.maxX),p.maxY=Math.max(p.maxY,_.maxY),p}function c(p,_){return p.minX-_.minX}function f(p,_){return p.minY-_.minY}function h(p){return(p.maxX-p.minX)*(p.maxY-p.minY)}function d(p){return p.maxX-p.minX+(p.maxY-p.minY)}function v(p,_){return p.minX<=_.minX&&p.minY<=_.minY&&_.maxX<=p.maxX&&_.maxY<=p.maxY}function y(p,_){return _.minX<=p.maxX&&_.minY<=p.maxY&&_.maxX>=p.minX&&_.maxY>=p.minY}function w(p){return{children:p,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function b(p,_,O,P,R){for(var T=[_,O];T.length;)if(!((O=T.pop())-(_=T.pop())<=P)){var A=_+Math.ceil((O-_)/P/2)*P;t(p,A,_,O,R),T.push(_,A,A,O)}}return o.prototype.all=function(){return this._all(this.data,[])},o.prototype.search=function(p){var _=this.data,O=[];if(!y(p,_))return O;for(var P=this.toBBox,R=[];_;){for(var T=0;T<_.children.length;T++){var A=_.children[T],M=_.leaf?P(A):A;y(p,M)&&(_.leaf?O.push(A):v(p,M)?this._all(A,O):R.push(A))}_=R.pop()}return O},o.prototype.collides=function(p){var _=this.data;if(!y(p,_))return!1;for(var O=[];_;){for(var P=0;P<_.children.length;P++){var R=_.children[P],T=_.leaf?this.toBBox(R):R;if(y(p,T)){if(_.leaf||v(p,T))return!0;O.push(R)}}_=O.pop()}return!1},o.prototype.load=function(p){if(!p||!p.length)return this;if(p.length<this._minEntries){for(var _=0;_<p.length;_++)this.insert(p[_]);return this}var O=this._build(p.slice(),0,p.length-1,0);if(this.data.children.length)if(this.data.height===O.height)this._splitRoot(this.data,O);else{if(this.data.height<O.height){var P=this.data;this.data=O,O=P}this._insert(O,this.data.height-O.height-1,!0)}else this.data=O;return this},o.prototype.insert=function(p){return p&&this._insert(p,this.data.height-1),this},o.prototype.clear=function(){return this.data=w([]),this},o.prototype.remove=function(p,_){if(!p)return this;for(var O,P,R,T=this.data,A=this.toBBox(p),M=[],N=[];T||M.length;){if(T||(T=M.pop(),P=M[M.length-1],O=N.pop(),R=!0),T.leaf){var j=a(p,T.children,_);if(j!==-1)return T.children.splice(j,1),M.push(T),this._condense(M),this}R||T.leaf||!v(T,A)?P?(O++,T=P.children[O],R=!1):T=null:(M.push(T),N.push(O),O=0,P=T,T=T.children[0])}return this},o.prototype.toBBox=function(p){return p},o.prototype.compareMinX=function(p,_){return p.minX-_.minX},o.prototype.compareMinY=function(p,_){return p.minY-_.minY},o.prototype.toJSON=function(){return this.data},o.prototype.fromJSON=function(p){return this.data=p,this},o.prototype._all=function(p,_){for(var O=[];p;)p.leaf?_.push.apply(_,p.children):O.push.apply(O,p.children),p=O.pop();return _},o.prototype._build=function(p,_,O,P){var R,T=O-_+1,A=this._maxEntries;if(T<=A)return s(R=w(p.slice(_,O+1)),this.toBBox),R;P||(P=Math.ceil(Math.log(T)/Math.log(A)),A=Math.ceil(T/Math.pow(A,P-1))),(R=w([])).leaf=!1,R.height=P;var M=Math.ceil(T/A),N=M*Math.ceil(Math.sqrt(A));b(p,_,O,N,this.compareMinX);for(var j=_;j<=O;j+=N){var B=Math.min(j+N-1,O);b(p,j,B,M,this.compareMinY);for(var q=j;q<=B;q+=M){var W=Math.min(q+M-1,B);R.children.push(this._build(p,q,W,P-1))}}return s(R,this.toBBox),R},o.prototype._chooseSubtree=function(p,_,O,P){for(;P.push(_),!_.leaf&&P.length-1!==O;){for(var R=1/0,T=1/0,A=void 0,M=0;M<_.children.length;M++){var N=_.children[M],j=h(N),B=(q=p,W=N,(Math.max(W.maxX,q.maxX)-Math.min(W.minX,q.minX))*(Math.max(W.maxY,q.maxY)-Math.min(W.minY,q.minY))-j);B<T?(T=B,R=j<R?j:R,A=N):B===T&&j<R&&(R=j,A=N)}_=A||_.children[0]}var q,W;return _},o.prototype._insert=function(p,_,O){var P=O?p:this.toBBox(p),R=[],T=this._chooseSubtree(P,this.data,_,R);for(T.children.push(p),l(T,P);_>=0&&R[_].children.length>this._maxEntries;)this._split(R,_),_--;this._adjustParentBBoxes(P,R,_)},o.prototype._split=function(p,_){var O=p[_],P=O.children.length,R=this._minEntries;this._chooseSplitAxis(O,R,P);var T=this._chooseSplitIndex(O,R,P),A=w(O.children.splice(T,O.children.length-T));A.height=O.height,A.leaf=O.leaf,s(O,this.toBBox),s(A,this.toBBox),_?p[_-1].children.push(A):this._splitRoot(O,A)},o.prototype._splitRoot=function(p,_){this.data=w([p,_]),this.data.height=p.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},o.prototype._chooseSplitIndex=function(p,_,O){for(var P,R,T,A,M,N,j,B=1/0,q=1/0,W=_;W<=O-_;W++){var J=u(p,0,W,this.toBBox),te=u(p,W,O,this.toBBox),re=(R=J,T=te,A=void 0,M=void 0,N=void 0,j=void 0,A=Math.max(R.minX,T.minX),M=Math.max(R.minY,T.minY),N=Math.min(R.maxX,T.maxX),j=Math.min(R.maxY,T.maxY),Math.max(0,N-A)*Math.max(0,j-M)),ee=h(J)+h(te);re<B?(B=re,P=W,q=ee<q?ee:q):re===B&&ee<q&&(q=ee,P=W)}return P||O-_},o.prototype._chooseSplitAxis=function(p,_,O){var P=p.leaf?this.compareMinX:c,R=p.leaf?this.compareMinY:f;this._allDistMargin(p,_,O,P)<this._allDistMargin(p,_,O,R)&&p.children.sort(P)},o.prototype._allDistMargin=function(p,_,O,P){p.children.sort(P);for(var R=this.toBBox,T=u(p,0,_,R),A=u(p,O-_,O,R),M=d(T)+d(A),N=_;N<O-_;N++){var j=p.children[N];l(T,p.leaf?R(j):j),M+=d(T)}for(var B=O-_-1;B>=_;B--){var q=p.children[B];l(A,p.leaf?R(q):q),M+=d(A)}return M},o.prototype._adjustParentBBoxes=function(p,_,O){for(var P=O;P>=0;P--)l(_[P],p)},o.prototype._condense=function(p){for(var _=p.length-1,O=void 0;_>=0;_--)p[_].children.length===0?_>0?(O=p[_-1].children).splice(O.indexOf(p[_]),1):this.clear():s(p[_],this.toBBox)},o})})(fN);var hH=fN.exports;class dH{constructor(e=[],t=vH){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:n}=this,i=t[e];for(;e>0;){const o=e-1>>1,a=t[o];if(n(i,a)>=0)break;t[e]=a,e=o}t[e]=i}_down(e){const{data:t,compare:n}=this,i=this.length>>1,o=t[e];for(;e<i;){let a=(e<<1)+1,s=t[a];const u=a+1;if(u<this.length&&n(t[u],s)<0&&(a=u,s=t[u]),n(s,o)>=0)break;t[e]=s,e=a}t[e]=o}}function vH(r,e){return r<e?-1:r>e?1:0}const pH=Object.freeze(Object.defineProperty({__proto__:null,default:dH},Symbol.toStringTag,{value:"Module"})),gH=HN(pH);var Bb={exports:{}},yH=function(e,t,n,i){var o=e[0],a=e[1],s=!1;n===void 0&&(n=0),i===void 0&&(i=t.length);for(var u=(i-n)/2,l=0,c=u-1;l<u;c=l++){var f=t[n+l*2+0],h=t[n+l*2+1],d=t[n+c*2+0],v=t[n+c*2+1],y=h>a!=v>a&&o<(d-f)*(a-h)/(v-h)+f;y&&(s=!s)}return s},mH=function(e,t,n,i){var o=e[0],a=e[1],s=!1;n===void 0&&(n=0),i===void 0&&(i=t.length);for(var u=i-n,l=0,c=u-1;l<u;c=l++){var f=t[l+n][0],h=t[l+n][1],d=t[c+n][0],v=t[c+n][1],y=h>a!=v>a&&o<(d-f)*(a-h)/(v-h)+f;y&&(s=!s)}return s},hN=yH,dN=mH;Bb.exports=function(e,t,n,i){return t.length>0&&Array.isArray(t[0])?dN(e,t,n,i):hN(e,t,n,i)};Bb.exports.nested=dN;Bb.exports.flat=hN;var bH=Bb.exports,hS={exports:{}};(function(r,e){(function(t,n){n(e)})(dn,function(t){const i=33306690738754706e-32;function o(y,w,b,p,_){let O,P,R,T,A=w[0],M=p[0],N=0,j=0;M>A==M>-A?(O=A,A=w[++N]):(O=M,M=p[++j]);let B=0;if(N<y&&j<b)for(M>A==M>-A?(R=O-((P=A+O)-A),A=w[++N]):(R=O-((P=M+O)-M),M=p[++j]),O=P,R!==0&&(_[B++]=R);N<y&&j<b;)M>A==M>-A?(R=O-((P=O+A)-(T=P-O))+(A-T),A=w[++N]):(R=O-((P=O+M)-(T=P-O))+(M-T),M=p[++j]),O=P,R!==0&&(_[B++]=R);for(;N<y;)R=O-((P=O+A)-(T=P-O))+(A-T),A=w[++N],O=P,R!==0&&(_[B++]=R);for(;j<b;)R=O-((P=O+M)-(T=P-O))+(M-T),M=p[++j],O=P,R!==0&&(_[B++]=R);return O===0&&B!==0||(_[B++]=O),B}function a(y){return new Float64Array(y)}const s=33306690738754716e-32,u=22204460492503146e-32,l=11093356479670487e-47,c=a(4),f=a(8),h=a(12),d=a(16),v=a(4);t.orient2d=function(y,w,b,p,_,O){const P=(w-O)*(b-_),R=(y-_)*(p-O),T=P-R;if(P===0||R===0||P>0!=R>0)return T;const A=Math.abs(P+R);return Math.abs(T)>=s*A?T:-function(M,N,j,B,q,W,J){let te,re,ee,fe,he,se,me,De,Le,Ie,qe,Ge,Me,Pe,de,Oe,Ae,Ve;const tt=M-q,ht=j-q,xt=N-W,ut=B-W;he=(de=(De=tt-(me=(se=134217729*tt)-(se-tt)))*(Ie=ut-(Le=(se=134217729*ut)-(se-ut)))-((Pe=tt*ut)-me*Le-De*Le-me*Ie))-(qe=de-(Ae=(De=xt-(me=(se=134217729*xt)-(se-xt)))*(Ie=ht-(Le=(se=134217729*ht)-(se-ht)))-((Oe=xt*ht)-me*Le-De*Le-me*Ie))),c[0]=de-(qe+he)+(he-Ae),he=(Me=Pe-((Ge=Pe+qe)-(he=Ge-Pe))+(qe-he))-(qe=Me-Oe),c[1]=Me-(qe+he)+(he-Oe),he=(Ve=Ge+qe)-Ge,c[2]=Ge-(Ve-he)+(qe-he),c[3]=Ve;let H=function(Ne,et){let wt=et[0];for(let lt=1;lt<Ne;lt++)wt+=et[lt];return wt}(4,c),X=u*J;if(H>=X||-H>=X||(te=M-(tt+(he=M-tt))+(he-q),ee=j-(ht+(he=j-ht))+(he-q),re=N-(xt+(he=N-xt))+(he-W),fe=B-(ut+(he=B-ut))+(he-W),te===0&&re===0&&ee===0&&fe===0)||(X=l*J+i*Math.abs(H),(H+=tt*fe+ut*te-(xt*ee+ht*re))>=X||-H>=X))return H;he=(de=(De=te-(me=(se=134217729*te)-(se-te)))*(Ie=ut-(Le=(se=134217729*ut)-(se-ut)))-((Pe=te*ut)-me*Le-De*Le-me*Ie))-(qe=de-(Ae=(De=re-(me=(se=134217729*re)-(se-re)))*(Ie=ht-(Le=(se=134217729*ht)-(se-ht)))-((Oe=re*ht)-me*Le-De*Le-me*Ie))),v[0]=de-(qe+he)+(he-Ae),he=(Me=Pe-((Ge=Pe+qe)-(he=Ge-Pe))+(qe-he))-(qe=Me-Oe),v[1]=Me-(qe+he)+(he-Oe),he=(Ve=Ge+qe)-Ge,v[2]=Ge-(Ve-he)+(qe-he),v[3]=Ve;const ne=o(4,c,4,v,f);he=(de=(De=tt-(me=(se=134217729*tt)-(se-tt)))*(Ie=fe-(Le=(se=134217729*fe)-(se-fe)))-((Pe=tt*fe)-me*Le-De*Le-me*Ie))-(qe=de-(Ae=(De=xt-(me=(se=134217729*xt)-(se-xt)))*(Ie=ee-(Le=(se=134217729*ee)-(se-ee)))-((Oe=xt*ee)-me*Le-De*Le-me*Ie))),v[0]=de-(qe+he)+(he-Ae),he=(Me=Pe-((Ge=Pe+qe)-(he=Ge-Pe))+(qe-he))-(qe=Me-Oe),v[1]=Me-(qe+he)+(he-Oe),he=(Ve=Ge+qe)-Ge,v[2]=Ge-(Ve-he)+(qe-he),v[3]=Ve;const Se=o(ne,f,4,v,h);he=(de=(De=te-(me=(se=134217729*te)-(se-te)))*(Ie=fe-(Le=(se=134217729*fe)-(se-fe)))-((Pe=te*fe)-me*Le-De*Le-me*Ie))-(qe=de-(Ae=(De=re-(me=(se=134217729*re)-(se-re)))*(Ie=ee-(Le=(se=134217729*ee)-(se-ee)))-((Oe=re*ee)-me*Le-De*Le-me*Ie))),v[0]=de-(qe+he)+(he-Ae),he=(Me=Pe-((Ge=Pe+qe)-(he=Ge-Pe))+(qe-he))-(qe=Me-Oe),v[1]=Me-(qe+he)+(he-Oe),he=(Ve=Ge+qe)-Ge,v[2]=Ge-(Ve-he)+(qe-he),v[3]=Ve;const Te=o(Se,h,4,v,d);return d[Te-1]}(y,w,b,p,_,O,A)},t.orient2dfast=function(y,w,b,p,_,O){return(w-O)*(b-_)-(y-_)*(p-O)},Object.defineProperty(t,"__esModule",{value:!0})})})(hS,hS.exports);var _H=hS.exports,xk=hH,x0=gH,wH=bH,EH=_H.orient2d;x0.default&&(x0=x0.default);cN.exports=vN;cN.exports.default=vN;function vN(r,e,t){e=Math.max(0,e===void 0?2:e),t=t||0;var n=CH(r),i=new xk(16);i.toBBox=function(p){return{minX:p[0],minY:p[1],maxX:p[0],maxY:p[1]}},i.compareMinX=function(p,_){return p[0]-_[0]},i.compareMinY=function(p,_){return p[1]-_[1]},i.load(r);for(var o=[],a=0,s;a<n.length;a++){var u=n[a];i.remove(u),s=Ck(u,s),o.push(s)}var l=new xk(16);for(a=0;a<o.length;a++)l.insert(Rx(o[a]));for(var c=e*e,f=t*t;o.length;){var h=o.shift(),d=h.p,v=h.next.p,y=Ix(d,v);if(!(y<f)){var w=y/c;u=OH(i,h.prev.p,d,v,h.next.next.p,w,l),u&&Math.min(Ix(u,d),Ix(u,v))<=w&&(o.push(h),o.push(Ck(u,h)),i.remove(u),l.remove(h),l.insert(Rx(h)),l.insert(Rx(h.next)))}}h=s;var b=[];do b.push(h.p),h=h.next;while(h!==s);return b.push(h.p),b}function OH(r,e,t,n,i,o,a){for(var s=new x0([],xH),u=r.data;u;){for(var l=0;l<u.children.length;l++){var c=u.children[l],f=u.leaf?kx(c,t,n):SH(t,n,c);f>o||s.push({node:c,dist:f})}for(;s.length&&!s.peek().node.children;){var h=s.pop(),d=h.node,v=kx(d,e,t),y=kx(d,n,i);if(h.dist<v&&h.dist<y&&Tk(t,d,a)&&Tk(n,d,a))return d}u=s.pop(),u&&(u=u.node)}return null}function xH(r,e){return r.dist-e.dist}function SH(r,e,t){if(Sk(r,t)||Sk(e,t))return 0;var n=l0(r[0],r[1],e[0],e[1],t.minX,t.minY,t.maxX,t.minY);if(n===0)return 0;var i=l0(r[0],r[1],e[0],e[1],t.minX,t.minY,t.minX,t.maxY);if(i===0)return 0;var o=l0(r[0],r[1],e[0],e[1],t.maxX,t.minY,t.maxX,t.maxY);if(o===0)return 0;var a=l0(r[0],r[1],e[0],e[1],t.minX,t.maxY,t.maxX,t.maxY);return a===0?0:Math.min(n,i,o,a)}function Sk(r,e){return r[0]>=e.minX&&r[0]<=e.maxX&&r[1]>=e.minY&&r[1]<=e.maxY}function Tk(r,e,t){for(var n=Math.min(r[0],e[0]),i=Math.min(r[1],e[1]),o=Math.max(r[0],e[0]),a=Math.max(r[1],e[1]),s=t.search({minX:n,minY:i,maxX:o,maxY:a}),u=0;u<s.length;u++)if(TH(s[u].p,s[u].next.p,r,e))return!1;return!0}function xg(r,e,t){return EH(r[0],r[1],e[0],e[1],t[0],t[1])}function TH(r,e,t,n){return r!==n&&e!==t&&xg(r,e,t)>0!=xg(r,e,n)>0&&xg(t,n,r)>0!=xg(t,n,e)>0}function Rx(r){var e=r.p,t=r.next.p;return r.minX=Math.min(e[0],t[0]),r.minY=Math.min(e[1],t[1]),r.maxX=Math.max(e[0],t[0]),r.maxY=Math.max(e[1],t[1]),r}function CH(r){for(var e=r[0],t=r[0],n=r[0],i=r[0],o=0;o<r.length;o++){var a=r[o];a[0]<e[0]&&(e=a),a[0]>n[0]&&(n=a),a[1]<t[1]&&(t=a),a[1]>i[1]&&(i=a)}var s=[e,t,n,i],u=s.slice();for(o=0;o<r.length;o++)wH(r[o],s)||u.push(r[o]);return AH(u)}function Ck(r,e){var t={p:r,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(t.next=e.next,t.prev=e,e.next.prev=t,e.next=t):(t.prev=t,t.next=t),t}function Ix(r,e){var t=r[0]-e[0],n=r[1]-e[1];return t*t+n*n}function kx(r,e,t){var n=e[0],i=e[1],o=t[0]-n,a=t[1]-i;if(o!==0||a!==0){var s=((r[0]-n)*o+(r[1]-i)*a)/(o*o+a*a);s>1?(n=t[0],i=t[1]):s>0&&(n+=o*s,i+=a*s)}return o=r[0]-n,a=r[1]-i,o*o+a*a}function l0(r,e,t,n,i,o,a,s){var u=t-r,l=n-e,c=a-i,f=s-o,h=r-i,d=e-o,v=u*u+l*l,y=u*c+l*f,w=c*c+f*f,b=u*h+l*d,p=c*h+f*d,_=v*w-y*y,O,P,R,T,A=_,M=_;_===0?(P=0,A=1,T=p,M=w):(P=y*p-w*b,T=v*p-y*b,P<0?(P=0,T=p,M=w):P>A&&(P=A,T=p+y,M=w)),T<0?(T=0,-b<0?P=0:-b>v?P=A:(P=-b,A=v)):T>M&&(T=M,-b+y<0?P=0:-b+y>v?P=A:(P=-b+y,A=v)),O=P===0?0:P/A,R=T===0?0:T/M;var N=(1-O)*r+O*t,j=(1-O)*e+O*n,B=(1-R)*i+R*a,q=(1-R)*o+R*s,W=B-N,J=q-j;return W*W+J*J}function PH(r,e){return r[0]===e[0]?r[1]-e[1]:r[0]-e[0]}function AH(r){r.sort(PH);for(var e=[],t=0;t<r.length;t++){for(;e.length>=2&&xg(e[e.length-2],e[e.length-1],r[t])<=0;)e.pop();e.push(r[t])}for(var n=[],i=r.length-1;i>=0;i--){for(;n.length>=2&&xg(n[n.length-2],n[n.length-1],r[i])<=0;)n.pop();n.push(r[i])}return n.pop(),e.pop(),e.concat(n)}class y$ extends Fb{constructor(t,n={excludeNodeMargin:!1}){super(t,n);kn(this,"mousePosition");kn(this,"targets");kn(this,"shouldPan");kn(this,"updateTargets",(t,n)=>{this.targets=t,this.currentOptions.excludeNodeMargin=n});kn(this,"handleMouseDown",t=>{const n=this.nvlInstance.getHits(t,wi.difference(["node","relationship"],this.targets),{hitNodeMarginWidth:this.currentOptions.excludeNodeMargin===!0?lH:0});n.nvlTargets.nodes.length>0||n.nvlTargets.relationships.length>0?this.shouldPan=!1:(this.mousePosition={x:t.clientX,y:t.clientY},this.shouldPan=!0)});kn(this,"handleMouseMove",t=>{if(!this.shouldPan||t.buttons!==1)return;const n=this.nvlInstance.getScale(),{x:i,y:o}=this.nvlInstance.getPan(),a=(t.clientX-this.mousePosition.x)/n*window.devicePixelRatio,s=(t.clientY-this.mousePosition.y)/n*window.devicePixelRatio;this.nvlInstance.setPan(i-a,o-s),this.callCallbackIfRegistered("onPan",{x:i-a,y:o-s},t),this.mousePosition={x:t.clientX,y:t.clientY}});kn(this,"handleMouseUp",()=>{this.shouldPan=!1});this.mousePosition={x:0,y:0},this.targets=[],this.shouldPan=!1,this.addEventListener("mousedown",this.handleMouseDown,!0),this.addEventListener("mousemove",this.handleMouseMove,!0),this.addEventListener("mouseup",this.handleMouseUp,!0)}destroy(){this.removeEventListener("mousedown",this.handleMouseDown,!0),this.removeEventListener("mousemove",this.handleMouseMove,!0),this.removeEventListener("mouseup",this.handleMouseUp,!0)}}class m$ extends Fb{constructor(t,n={}){super(t,n);kn(this,"throttledZoom",wi.throttle(t=>{const n=this.nvlInstance.getScale(),{x:i,y:o}=this.nvlInstance.getPan(),a=t.deltaY/500,s=n-a*Math.min(1,n),u=fH(this.containerInstance,t),l=i+(u.x/n-u.x/s),c=o+(u.y/n-u.y/s);this.nvlInstance.setZoomAndPan(s,l,c),this.callCallbackIfRegistered("onZoom",s,t)},25,{leading:!0}));kn(this,"handleWheel",t=>{t.preventDefault(),this.throttledZoom(t)});kn(this,"destroy",()=>{this.removeEventListener("wheel",this.handleWheel)});this.addEventListener("wheel",this.handleWheel)}}const RH={name:"NodeCommon",props:{title:{type:String,default:""}},data(){return{isShowMenu:!1,menus:[{label:"10%",value:.1},{label:"50%",value:.5},{label:"100%",value:1},{label:"200%",value:2},{label:"300%",value:3},{label:"400%",value:4},{label:"500%",value:5}]}},mounted(){document.addEventListener("click",this.documentClick)},beforeUnmount(){document.removeEventListener("click",this.documentClick)},methods:{handleMenu(r){this.$emit("change",r)},showMenu(){this.isShowMenu=!this.isShowMenu},documentClick(r){this.isShowMenu&&!this.$el.querySelector(".zoom-select-options").contains(r.target)&&r.target!==this.$el.querySelector(".zoom-select-label")&&(this.isShowMenu=!1)}}},IH=r=>(ZN("data-v-223f6542"),r=r(),QN(),r),kH={class:"zoom-select"},DH={class:"zoom-select-options"},MH=["onClick"],LH=IH(()=>Md("div",{class:"option-line"},null,-1));function NH(r,e,t,n,i,o){return Gy(),qy("div",kH,[Md("div",{class:"zoom-select-label",onClick:e[0]||(e[0]=(...a)=>o.showMenu&&o.showMenu(...a))},NT(t.title),1),$N(Md("div",DH,[(Gy(!0),qy(XN,null,KN(i.menus,a=>(Gy(),qy("div",{class:"zoom-select-option",key:a.value,onClick:s=>o.handleMenu(a)},NT(a.label),9,MH))),128)),LH,Md("div",{class:"zoom-select-option",onClick:e[1]||(e[1]=a=>o.handleMenu({label:"5%",value:5}))},"")],512),[[YN,i.isShowMenu]])])}const jH=dS(RH,[["render",NH],["__scopeId","data-v-223f6542"]]),FH={class:"custom-control-warpper"},BH={class:"custom-control"},UH={__name:"index",props:{value:{type:Number,default:1}},emits:["change"],setup(r,{emit:e}){const t=e,n=r,i=JN(()=>`${(n.value*100).toFixed(0)}%`),o=({value:l})=>{u(l)},a=()=>{let l=n.value-.1;l<.1&&(l=.1),u(l)},s=()=>{let l=n.value+.1;l>5&&(l=5),u(l)},u=l=>{l=Number(l.toFixed(1)),t("change",l)};return(l,c)=>{const f=aj;return Gy(),qy("div",FH,[Md("div",BH,[Md("div",{class:"action-btn zoom-btn",onClick:a},[h_(f,{name:"minus",size:"16"})]),h_(jH,{onChange:o,title:i.value},null,8,["title"]),Md("div",{class:"action-btn zoom-btn",onClick:s},[h_(f,{name:"plus",size:"16"})])])])}}},b$=dS(UH,[["__scopeId","data-v-f2e37dca"]]);/*!
 * better-scroll / nested-scroll
 * (c) 2016-2023 ustbhuangyi
 * Released under the MIT License.
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Pk(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n}function zH(r){console.error("[BScroll warn]: "+r)}var Em=typeof window<"u",H0=Em&&navigator.userAgent.toLowerCase();H0&&H0.indexOf("android")>0;(function(){if(typeof H0=="string"){var r=/os (\d\d?_\d(_\d)?)/,e=r.exec(H0);if(!e)return!1;var t=e[1].split("_").map(function(n){return parseInt(n,10)});return t[0]===13&&t[1]>=4}return!1})();var qH=!1;if(Em){var GH="test-passive";try{var Ak={};Object.defineProperty(Ak,"passive",{get:function(){qH=!0}}),window.addEventListener(GH,function(){},Ak)}catch{}}var VH=function(r,e){for(var t in e)r[t]=e[t];return r};function Sg(r,e){if(r.findIndex)return r.findIndex(e);var t=-1;return r.some(function(n,i,o){var a=e(n,i,o);if(a)return t=i,a}),t}var pN=Em&&document.createElement("div").style,kg=function(){if(!Em)return!1;for(var r=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}],e=0,t=r;e<t.length;e++){var n=t[e];if(pN[n.value]!==void 0)return n.key}return!1}();function _h(r){return kg===!1?r:kg==="standard"?r==="transitionEnd"?"transitionend":r:kg+r.charAt(0).toUpperCase()+r.substr(1)}kg&&kg!=="standard"&&""+kg.toLowerCase();_h("transform");_h("transition");Em&&_h("perspective")in pN;_h("transitionTimingFunction"),_h("transitionDuration"),_h("transitionDelay"),_h("transformOrigin"),_h("transitionEnd"),_h("transitionProperty");var WH=function(){function r(e){this.ancestors=[],this.descendants=[],this.hooksManager=[],this.analyzed=!1,this.selfScroll=e}return r.create=function(e){return new r(e)},r.prototype.hasAncestors=function(e){var t=Sg(this.ancestors,function(n){var i=n[0];return i===e});return t>-1},r.prototype.hasDescendants=function(e){var t=Sg(this.descendants,function(n){var i=n[0];return i===e});return t>-1},r.prototype.addAncestor=function(e,t){var n=this.ancestors;n.push([e,t]),n.sort(function(i,o){return i[1]-o[1]})},r.prototype.addDescendant=function(e,t){var n=this.descendants;n.push([e,t]),n.sort(function(i,o){return i[1]-o[1]})},r.prototype.removeAncestor=function(e){var t=this.ancestors;if(t.length){var n=Sg(this.ancestors,function(i){var o=i[0];return o===e});if(n>-1)return t.splice(n,1)}},r.prototype.removeDescendant=function(e){var t=this.descendants;if(t.length){var n=Sg(this.descendants,function(i){var o=i[0];return o===e});if(n>-1)return t.splice(n,1)}},r.prototype.registerHooks=function(e,t,n){e.on(t,n),this.hooksManager.push([e,t,n])},r.prototype.setAnalyzed=function(e){e===void 0&&(e=!1),this.analyzed=e},r.prototype.purge=function(){var e=this;this.ancestors.forEach(function(t){var n=t[0];n.removeDescendant(e)}),this.descendants.forEach(function(t){var n=t[0];n.removeAncestor(e)}),this.hooksManager.forEach(function(t){var n=t[0],i=t[1],o=t[2];n.off(i,o)}),this.hooksManager=[]},r}(),HH="plugins.nestedScroll",$H=[{key:"purgeNestedScroll",name:"purgeNestedScroll"}],YH=$H.map(function(r){return{key:r.key,sourceKey:HH+"."+r.name}}),XH="INTERNAL_NESTED_SCROLL",KH=function(r){r.forEach(function(e){e.pending&&(e.stop(),e.resetPosition())})},Rk=function(r){r.forEach(function(e){e.enable()})},c0=function(r,e){r.forEach(function(t){(t.hasHorizontalScroll===e.hasHorizontalScroll||t.hasVerticalScroll===e.hasVerticalScroll)&&t.disable()})},ZH=function(r){r.forEach(function(e){var t=e.scroller,n=t.actions,i=t.scrollBehaviorX,o=t.scrollBehaviorY;n.fingerMoved=!0,n.contentMoved=!1,n.directionLockAction.reset(),i.start(),o.start(),i.resetStartPos(),o.resetStartPos(),n.startTime=+new Date})},QH=function(r){var e=r.hasHorizontalScroll,t=r.hasVerticalScroll,n=r.x,i=r.y,o=r.minScrollX,a=r.maxScrollX,s=r.minScrollY,u=r.maxScrollY,l=r.movingDirectionX,c=r.movingDirectionY,f=!1,h=n>=o&&l===-1,d=n<=a&&l===1,v=i>=s&&c===-1,y=i<=u&&c===1;return t?f=v||y:e&&(f=h||d),f},JH=function(r){var e=r.hasHorizontalScroll,t=r.hasVerticalScroll,n=r.x,i=r.y,o=r.minScrollX,a=r.maxScrollX,s=r.minScrollY,u=r.maxScrollY,l=!1,c=n>o,f=n<a,h=i>s,d=i<u;return t?l=h||d:e&&(l=c||f),l},e$=function(r){r.scroller.reflow(),r.resetPosition(0)},t$=function(r,e){for(var t=0,n=r.parentNode;n&&n!==e;)t++,n=n.parentNode;return t},r$=function(){function r(e){var t=this.handleOptions(e),n=r.instancesMap[t];return n||(n=r.instancesMap[t]=this,n.store=[],n.hooksFn=[]),n.init(e),n}return r.getAllNestedScrolls=function(){var e=r.instancesMap;return Object.keys(e).map(function(t){return e[t]})},r.purgeAllNestedScrolls=function(){var e=r.getAllNestedScrolls();e.forEach(function(t){return t.purgeNestedScroll()})},r.prototype.handleOptions=function(e){var t=e.options.nestedScroll===!0?{}:e.options.nestedScroll,n={groupId:XH};this.options=VH(n,t);var i=typeof this.options.groupId;return i!=="string"&&i!=="number"&&zH("groupId must be string or number for NestedScroll plugin"),this.options.groupId},r.prototype.init=function(e){e.proxy(YH),this.addBScroll(e),this.buildBScrollGraph(),this.analyzeBScrollGraph(),this.ensureEventInvokeSequence(),this.handleHooks(e)},r.prototype.handleHooks=function(e){var t=this;this.registerHooks(e.hooks,e.hooks.eventTypes.destroy,function(){t.deleteScroll(e)})},r.prototype.deleteScroll=function(e){var t=e.wrapper;t.isBScrollContainer=void 0;var n=this.store,i=this.hooksFn,o=Sg(n,function(h){return h.selfScroll===e});if(o>-1){var a=n[o];a.purge(),n.splice(o,1)}var s=Sg(i,function(h){var d=h[0];return d===e.hooks});if(s>-1){var u=i[s],l=u[0],c=u[1],f=u[2];l.off(c,f),i.splice(s,1)}},r.prototype.addBScroll=function(e){this.store.push(WH.create(e))},r.prototype.buildBScrollGraph=function(){for(var e=this.store,t,n,i,o,a=this.store.length,s=0;s<a;s++){t=e[s],i=t.selfScroll.wrapper;for(var u=0;u<a;u++)if(n=e[u],o=n.selfScroll.wrapper,t!==n&&i.contains(o)){var l=t$(o,i);t.hasDescendants(n)||t.addDescendant(n,l),n.hasAncestors(t)||n.addAncestor(t,l)}}},r.prototype.analyzeBScrollGraph=function(){this.store.forEach(function(e){if(!e.analyzed){var t=e.ancestors,n=e.descendants,i=e.selfScroll,o=function(){var u=t.map(function(c){var f=c[0];return f.selfScroll}),l=n.map(function(c){var f=c[0];return f.selfScroll});KH(Pk(u,l)),JH(i)&&e$(i),ZH(u),c0(u,i)},a=function(){var u=t.map(function(c){var f=c[0];return f.selfScroll}),l=n.map(function(c){var f=c[0];return f.selfScroll});Rk(Pk(u,l))};e.registerHooks(i,i.eventTypes.beforeScrollStart,o),e.registerHooks(i,i.eventTypes.touchEnd,a);var s=i.scroller.actions.hooks;e.registerHooks(s,s.eventTypes.detectMovingDirection,function(){var u=t.map(function(d){var v=d[0];return v.selfScroll}),l=u[0],c=u.slice(1),f=i.scroller.actions.contentMoved,h=u.length===0;if(f)c0(u,i);else if(!h&&QH(i))return c0([i],i),l&&Rk([l]),c0(c,i),!0}),e.setAnalyzed(!0)}})},r.prototype.ensureEventInvokeSequence=function(){var e=this.store.slice(),t=e.sort(function(n,i){return n.descendants.length-i.descendants.length});t.forEach(function(n){var i=n.selfScroll;i.scroller.actionsHandler.rebindDOMEvents()})},r.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},r.prototype.purgeNestedScroll=function(){var e=this.options.groupId;this.store.forEach(function(t){t.purge()}),this.store=[],this.hooksFn.forEach(function(t){var n=t[0],i=t[1],o=t[2];n.off(i,o)}),this.hooksFn=[],delete r.instancesMap[e]},r.pluginName="nestedScroll",r.instancesMap={},r}();const n$={class:"scroll-content"},i$={__name:"cu-scroll",props:{scrollX:{type:Boolean,default:!1},scrollY:{type:Boolean,default:!0},scrollbar:{type:[Boolean,Object],default:null},pullUpLoad:{type:[Boolean,Object],default:!0},groupId:{type:String,default:""}},emits:["onScrollEnd","scroll"],setup(r,{expose:e,emit:t}){sg.use(sj),sg.use(uj),sg.use(cj),sg.use(lj),sg.use(r$);const n=t,i=r,o=ej(null);let a=null;const s=()=>{a.refresh()},u=f=>{let{el:h,time:d,offsetX:v,offsetY:y,easing:w}=f;a.scrollToElement(h,d,v,y,w)},l=()=>{a.enable()},c=()=>{a.disable()};return tj(()=>{let f={scrollX:i.scrollX,scrollY:i.scrollY,scrollbar:i.scrollbar||{},observeDOM:!0,pullUpLoad:i.pullUpLoad,probeType:0,mouseWheel:{speed:20,invert:!1,easeTime:300},preventDefault:!1,bounce:!1,click:!0};i.groupId&&(f.nestedScroll={groupId:i.groupId}),a=new sg(o.value,f),a.on("pullingUp",()=>{n("onScrollEnd"),rj(()=>{a.finishPullUp()})}),a.on("scroll",h=>{n("scroll",h)})}),nj(()=>{a&&a.destroy()}),e({refresh:s,scrollToElement:u,enable:l,disable:c}),(f,h)=>(Gy(),qy("div",{class:"scroll-wrapper",ref_key:"scroller",ref:o},[Md("div",n$,[ij(f.$slots,"default",{},void 0,!0)])],512))}},_$=dS(i$,[["__scopeId","data-v-feb19931"]]);export{p$ as C,g$ as H,y$ as P,b$ as Z,ar as _,m$ as a,_$ as b,sr as c,qo as d,Nt as e,v$ as f,h$ as g,jg as h,im as i,lN as j,Rd as k,Cx as l,f$ as m,kW as n,fc as o,RL as p,fT as q,u0 as r,pT as s,wW as t,d$ as u,$y as v,Sh as w,$7 as x,R7 as y,DW as z};
