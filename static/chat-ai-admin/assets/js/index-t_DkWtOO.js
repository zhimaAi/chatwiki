import{aB as R,f as x,ac as y,as as o,k as n,ar as a,F as S,ax as $,ad as k,u as F,G as _,at as E,l as f}from"./vue-chunks-CGLjTDrY.js";import{u as O}from"./robot-jPE-s270.js";import{_ as M,$ as N,a0 as V,a1 as D}from"./index-AgSL8KLK.js";import{u as G}from"./index-DqhUrknF.js";import{_ as L}from"../../index-C5-B0r5-.js";import{o as j,B as q,I as z,a9 as Q,Q as U,T as W,b as r,M as h,W as H}from"./ui-antd-B11sc9DP.js";import"./neo4j-Bk0ySkcX.js";import"./utils-BH-4gQMj.js";import"./other-BrZCAsTs.js";const J={class:"page-container"},X={class:"opration-box"},Y={style:{"margin-left":"auto"},href:"https://www.yuque.com/zhimaxiaoshiwangluo/pggco1/bg1ol40fo68pgdae",target:"_blank"},Z={class:"list-box"},ee={class:"key-content"},te={class:"right-box"},oe={__name:"index",setup(ne){const{toClipboard:A}=G(),C=O(),{robotInfo:d}=R(C),c=x(""),m=x([]),u=()=>{M({robot_key:d.value.robot_key}).then(t=>{c.value=t.data.end_point,m.value=t.data.list})};u();const I=t=>{N({robot_key:d.value.robot_key,id:t.id}).then(e=>{r.success("更新成功"),u()})},K=()=>{h.confirm({title:f("div",{style:"color:#262626; font-weight: 600;"},"新增API Key"),icon:null,content:f("div",{style:" color: #f10; line-height: 22px;"},"请妥善保管您的API Key,注意不要外泄。API Key外泄可能导致其他人使用此Key访问您的机器人，消耗您模型资源。"),bodyStyle:{padding:"12px 8px 4px 12px"},okText:"创建",width:480,onOk:()=>{P()},onCancel:()=>{}})},P=()=>{D({robot_key:d.value.robot_key}).then(t=>{r.success("创建成功"),u()})},w=t=>{let e=5,i=B(t.key),l=h.confirm({title:`确定删除API Key：${i}`,icon:n(H),content:f("div",{style:{color:"#FB363F"}},"删除后，将无法使用该Key调用接口"),okText:e+" 确 定",okType:"danger",cancelText:"取 消",okButtonProps:{disabled:!0},onOk(){V({robot_key:d.value.robot_key,id:t.id}).then(b=>{r.success("删除成功"),u()})},onCancel(){}}),p=setInterval(()=>{e==1?(l.update({okText:"确 定",okButtonProps:{disabled:!1}}),clearInterval(p),p=void 0):(e-=1,l.update({okText:e+" 确 定",okButtonProps:{disabled:!0}}))},1e3)};function B(t){let e=t.slice(0,4),i=t.slice(-4);return t.length<=4?t:t.length<=8?e+"...":e+"..."+i}const v=async t=>{try{await A(t),r.success("复制成功")}catch{r.error("复制失败")}};return(t,e)=>{const i=j,l=q,p=z,b=U,T=W;return k(),y("div",J,[e[8]||(e[8]=o("div",{class:"page-title"},"API Key管理",-1)),n(i,{class:"mt8",type:"info","show-icon":""},{icon:a(()=>[o("div",null,[n(F(Q))])]),message:a(()=>[...e[2]||(e[2]=[o("div",{class:"alert-content"},[o("div",null," 请妥善保管您的API Key,注意不要外泄。API Key外泄可能导致其他人使用此Key访问您的机器人，消耗您模型资源。 ")],-1)])]),_:1}),o("div",X,[n(l,{type:"primary",onClick:K},{default:a(()=>[...e[3]||(e[3]=[_("新增API Key",-1)])]),_:1}),n(p,{value:c.value,"onUpdate:value":e[1]||(e[1]=s=>c.value=s),style:{width:"500px"},readonly:""},{addonBefore:a(()=>[o("span",{onClick:e[0]||(e[0]=s=>v(c.value)),style:{cursor:"pointer"}},"复制API Endpoint")]),_:1},8,["value"]),o("a",Y,[n(l,null,{default:a(()=>[...e[4]||(e[4]=[_("API 文档",-1)])]),_:1})])]),o("div",Z,[(k(!0),y(S,null,$(m.value,s=>(k(),y("div",{class:"list-item",key:s.id},[n(T,{justify:"space-between",align:"center"},{default:a(()=>[o("div",ee,[e[5]||(e[5]=o("span",null,"API Key：",-1)),o("span",null,E(s.key),1)]),o("div",te,[n(b,{onChange:g=>I(s),checked:s.status==1,"checked-children":"开","un-checked-children":"关"},null,8,["onChange","checked"]),n(l,{onClick:g=>v(s.key)},{default:a(()=>[...e[6]||(e[6]=[_("复制",-1)])]),_:1},8,["onClick"]),n(l,{danger:"",onClick:g=>w(s)},{default:a(()=>[...e[7]||(e[7]=[_("删除",-1)])]),_:1},8,["onClick"])])]),_:2},1024)]))),128))])])}}},_e=L(oe,[["__scopeId","data-v-98f755ff"]]);export{_e as default};
