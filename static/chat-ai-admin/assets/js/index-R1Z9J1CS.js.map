{"version":3,"file":"index-R1Z9J1CS.js","sources":["../../../../front-end/chat-ai-admin-vue/src/views/public-library/home/components/edit-title.vue","../../../../front-end/chat-ai-admin-vue/src/views/public-library/home/components/edit-desc.vue","../../../../front-end/chat-ai-admin-vue/src/views/public-library/home/components/edit-question-guide.vue","../../../../front-end/chat-ai-admin-vue/src/assets/img/library/preview/phone-header.png","../../../../front-end/chat-ai-admin-vue/src/views/public-library/home/components/phone-box.vue","../../../../front-end/chat-ai-admin-vue/src/views/public-library/home/components/shortcut-selector.vue","../../../../front-end/chat-ai-admin-vue/src/views/public-library/home/index.vue"],"sourcesContent":["<style lang=\"less\" scoped>\r\n.upload-ssl-form {\r\n  padding-top: 16px;\r\n  .domain {\r\n    margin-bottom: 16px;\r\n    color: #333;\r\n  }\r\n}\r\n</style>\r\n\r\n<template>\r\n  <a-modal\r\n    v-model:open=\"show\"\r\n    :title=\"t('edit_title')\"\r\n    @ok=\"handleOk\"\r\n    :confirmLoading=\"props.confirmLoading\"\r\n    :ok-text=\"t('save')\"\r\n  >\r\n    <div class=\"upload-ssl-form\">\r\n      <a-form ref=\"formRef\" :model=\"formState\" :rules=\"rules\" autocomplete=\"off\" layout=\"vertical\">\r\n        <a-form-item label=\"\" name=\"title\">\r\n          <a-textarea :rows=\"5\" v-model:value=\"formState.title\" />\r\n        </a-form-item>\r\n      </a-form>\r\n    </div>\r\n  </a-modal>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, toRaw } from 'vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.public-library.home.components.edit-title')\r\n\r\nconst emit = defineEmits(['ok'])\r\n\r\nconst props = defineProps({\r\n  confirmLoading: {\r\n    type: Boolean,\r\n    default: false\r\n  }\r\n})\r\n\r\nconst formRef = ref()\r\n\r\nconst formState = reactive({\r\n  title: ''\r\n})\r\n\r\nconst rules = {\r\n  title: [{ required: true, message: t('please_enter_title') }]\r\n}\r\n\r\nconst show = ref(false)\r\n\r\nconst open = (record) => {\r\n  formState.title = record.title\r\n  show.value = true\r\n}\r\n\r\nconst close = () => {\r\n  show.value = false\r\n}\r\n\r\nconst handleOk = () => {\r\n  formRef.value\r\n    .validate()\r\n    .then(() => {\r\n      emit('ok', toRaw(formState))\r\n    })\r\n    .catch((error) => {\r\n      console.log('error', error)\r\n    })\r\n}\r\n\r\ndefineExpose({\r\n  open,\r\n  close\r\n})\r\n</script>\r\n","<style lang=\"less\" scoped>\r\n.upload-ssl-form {\r\n  padding-top: 16px;\r\n  .domain {\r\n    margin-bottom: 16px;\r\n    color: #333;\r\n  }\r\n}\r\n</style>\r\n\r\n<template>\r\n  <a-modal\r\n    v-model:open=\"show\"\r\n    :title=\"t('title_edit_desc')\"\r\n    @ok=\"handleOk\"\r\n    :confirmLoading=\"props.confirmLoading\"\r\n    :ok-text=\"t('btn_save')\"\r\n  >\r\n    <div class=\"upload-ssl-form\">\r\n      <a-form ref=\"formRef\" :model=\"formState\" :rules=\"rules\" autocomplete=\"off\" layout=\"vertical\">\r\n        <a-form-item label=\"\" name=\"content\">\r\n          <a-textarea :rows=\"5\" v-model:value=\"formState.content\" />\r\n        </a-form-item>\r\n      </a-form>\r\n    </div>\r\n  </a-modal>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, toRaw } from 'vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.public-library.home.components.edit-desc')\r\n\r\nconst emit = defineEmits(['ok'])\r\n\r\nconst props = defineProps({\r\n  confirmLoading: {\r\n    type: Boolean,\r\n    default: false\r\n  }\r\n})\r\n\r\nconst formRef = ref()\r\n\r\nconst formState = reactive({\r\n  content: ''\r\n})\r\n\r\nconst rules = {\r\n  // content: [{ required: true, message: '请输入描述' }]\r\n}\r\n\r\nconst show = ref(false)\r\n\r\nconst open = (record) => {\r\n  formState.content = record.content\r\n  show.value = true\r\n}\r\n\r\nconst close = () => {\r\n  show.value = false\r\n}\r\n\r\nconst handleOk = () => {\r\n  formRef.value\r\n    .validate()\r\n    .then(() => {\r\n      emit('ok', toRaw(formState))\r\n    })\r\n    .catch((error) => {\r\n      console.log('error', error)\r\n    })\r\n}\r\n\r\ndefineExpose({\r\n  open,\r\n  close\r\n})\r\n</script>\r\n","<style lang=\"less\" scoped>\r\n.upload-ssl-form {\r\n  padding-top: 16px;\r\n  .domain {\r\n    margin-bottom: 16px;\r\n    color: #333;\r\n  }\r\n}\r\n</style>\r\n\r\n<template>\r\n  <a-modal\r\n    v-model:open=\"show\"\r\n    :title=\"t('edit_question_guide')\"\r\n    @ok=\"handleOk\"\r\n    :confirmLoading=\"props.confirmLoading\"\r\n    :ok-text=\"t('save')\"\r\n  >\r\n    <div class=\"upload-ssl-form\">\r\n      <a-form ref=\"formRef\" :model=\"formState\" :rules=\"rules\" autocomplete=\"off\" layout=\"vertical\">\r\n        <a-form-item label=\"\" name=\"question\">\r\n          <a-textarea :rows=\"5\" v-model:value=\"formState.question\" />\r\n        </a-form-item>\r\n      </a-form>\r\n    </div>\r\n  </a-modal>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, toRaw } from 'vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.public-library.home.components.edit-question-guide')\r\n\r\nconst emit = defineEmits(['ok'])\r\n\r\nconst props = defineProps({\r\n  confirmLoading: {\r\n    type: Boolean,\r\n    default: false\r\n  }\r\n})\r\n\r\nconst formRef = ref()\r\n\r\nconst formState = reactive({\r\n  question: ''\r\n})\r\n\r\nconst rules = {\r\n  question: [{ required: true, message: t('please_input_question_guide') }]\r\n}\r\n\r\nconst show = ref(false)\r\n\r\nconst open = (record) => {\r\n  formState.question = record.question\r\n  show.value = true\r\n}\r\n\r\nconst close = () => {\r\n  show.value = false\r\n}\r\n\r\nconst handleOk = () => {\r\n  formRef.value\r\n    .validate()\r\n    .then(() => {\r\n      emit('ok', toRaw(formState))\r\n    })\r\n    .catch((error) => {\r\n      console.log('error', error)\r\n    })\r\n}\r\n\r\ndefineExpose({\r\n  open,\r\n  close\r\n})\r\n</script>\r\n","export default \"data:image/png;base64,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\"","<style lang=\"less\" scoped>\r\n.phone-wrapper {\r\n  height: 100%;\r\n  width: 399px;\r\n  border-radius: 32px;\r\n  border: 12px solid #fff;\r\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);\r\n  .phone-box {\r\n    display: flex;\r\n    flex-direction: column;\r\n    position: relative;\r\n    width: 100%;\r\n    height: 100%;\r\n\r\n    &::before {\r\n      position: absolute;\r\n      left: 0;\r\n      right: 0;\r\n      top: 0;\r\n      bottom: 0;\r\n      content: ' ';\r\n      z-index: 101;\r\n      width: 100%;\r\n      height: 100%;\r\n      border-radius: 28px;\r\n      box-shadow: inset 0 0 4px rgba(0, 0, 0, 0.1);\r\n      overflow: hidden;\r\n      pointer-events: none;\r\n    }\r\n\r\n    .phone-header {\r\n      .navbar {\r\n        display: block;\r\n      }\r\n    }\r\n    .phone-body {\r\n      flex: 1;\r\n      overflow: hidden;\r\n    }\r\n    .phone-footer {\r\n    }\r\n  }\r\n}\r\n</style>\r\n<template>\r\n  <div class=\"phone-wrapper\">\r\n    <div class=\"phone-box\">\r\n      <div class=\"phone-header\">\r\n        <img class=\"navbar\" src=\"../../../../assets/img/library/preview/phone-header.png\" alt=\"\" />\r\n      </div>\r\n      <div class=\"phone-body\">\r\n        <slot name=\"default\"></slot>\r\n      </div>\r\n      <div class=\"phone-footer\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup></script>\r\n","<style lang=\"less\" scoped>\r\n:deep(.ant-tree-treenode-selected) {\r\n  .ant-tree-title {\r\n    background-color: #e6f7ff;\r\n  }\r\n}\r\n\r\n:deep(.ant-tree-checkbox) {\r\n  .ant-tree-checkbox-inner {\r\n    border-radius: 50%;\r\n  }\r\n}\r\n\r\n.tree-node-title {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n</style>\r\n\r\n<template>\r\n  <a-modal v-model:open=\"visible\" :title=\"title\" @ok=\"handleOk\">\r\n    <a-tree\r\n      blockNode\r\n      checkable\r\n      v-model:expandedKeys=\"expandedKeys\"\r\n      :defaultExpandAll=\"false\"\r\n      :checkStrictly=\"true\"\r\n      :checkedKeys=\"checkedKeys\"\r\n      :tree-data=\"treeData\"\r\n      :load-data=\"loadData\"\r\n      v-if=\"treeData.length > 0\"\r\n      @check=\"onCheck\"\r\n    >\r\n      <template #title=\"{ data, level }\">\r\n        <span class=\"tree-node-title\">\r\n          <span class=\"doc-icon\" v-if=\"data.doc_icon\">{{ data.doc_icon }}</span>\r\n          <span class=\"doc-icon\" v-else>{{ data.is_dir == 1 ? props.iconTemplateConfig.levels[level].folder_icon : props.iconTemplateConfig.levels[level].doc_icon }}</span>\r\n          <span>{{ data.title }}</span>\r\n        </span>\r\n      </template>\r\n    </a-tree>\r\n  </a-modal>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed } from 'vue';\r\nimport { getDocList } from '@/api/public-library'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.public-library.home.components.shortcut-selector')\r\n\r\nconst emit = defineEmits(['ok'])\r\nconst props = defineProps({\r\n  iconTemplateConfig: {\r\n    type: Object,\r\n    default: () => ({})\r\n  },\r\n})\r\n\r\n\r\nconst visible = ref(false);\r\nconst libraryKey = ref('')\r\nconst expandedKeys = ref([]);\r\nconst checkedKeys = ref([]);\r\nconst treeData = ref([]);\r\nconst oldDocKey = ref(null);\r\nconst oldDocId = ref(null);\r\n\r\nconst title = computed(() => {\r\n  return oldDocKey.value ? t('modify_shortcut') : t('add_shortcut')\r\n})\r\n\r\nconst getMyDocList = async (doc) => {\r\n  let data = {\r\n    library_key: libraryKey.value,\r\n    pid: doc ? doc.id : 0\r\n  }\r\n\r\n  const res = await getDocList(data);\r\n\r\n  let list = res.data || [];\r\n\r\n  list.forEach((item) => {\r\n    item.id = item.id * 1;\r\n    item.pid = item.pid * 1;\r\n    item.key = item.id;\r\n    item.level = doc ? doc.level + 1 : 0;\r\n    item.sort = item.sort * 1;\r\n    item.children_num = item.children_num * 1;\r\n    item.children = [];\r\n    item.hasLoaded = false;\r\n    item.isLeaf = item.children_num == 0;\r\n    item.disabled = item.is_draft == 1;\r\n  });\r\n\r\n  if (!doc) {\r\n    treeData.value = list;\r\n  } else {\r\n    doc.hasLoaded = true;\r\n    doc.children = list;\r\n\r\n    treeData.value = [...treeData.value];\r\n  }\r\n\r\n  return res;\r\n}\r\n\r\n\r\nconst loadData = (treeNode) => {\r\n  return new Promise((resolve) => {\r\n    if (treeNode.dataRef.hasLoaded) {\r\n      resolve()\r\n      return\r\n    }\r\n\r\n    getMyDocList(treeNode.dataRef).then(() => {\r\n      resolve()\r\n    })\r\n  })\r\n}\r\n\r\nconst open = (data = {}) => {\r\n  libraryKey.value = data.library_key;\r\n  expandedKeys.value = [];\r\n  checkedKeys.value = [];\r\n  treeData.value = [];\r\n  oldDocKey.value = data.key || null;\r\n  oldDocId.value = data.doc_id || null;\r\n\r\n  if(oldDocKey.value){\r\n    checkedKeys.value = [data.doc_id];\r\n  }\r\n\r\n  getMyDocList();\r\n\r\n  visible.value = true;\r\n}\r\n\r\nconst onCheck = (keys, e) => {\r\n  if (e.checked) {\r\n    checkedKeys.value = [e.node.key];\r\n  } else {\r\n    checkedKeys.value = [];\r\n  }\r\n}\r\n\r\nconst handleOk = () => {\r\n  if (checkedKeys.value.length > 0) {\r\n    emit('ok', {doc_id: checkedKeys.value[0], old_doc_key: oldDocKey.value, old_doc_id: oldDocId.value});\r\n  }\r\n  visible.value = false;\r\n};\r\n\r\ndefineExpose({\r\n  open\r\n})\r\n</script>\r\n","<style lang=\"less\" scoped>\r\n.home-preview {\r\n  height: 100%;\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n\r\n  .toolbar-wrapper {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    height: 64px;\r\n    padding: 0 16px 0 32px;\r\n    background-color: #fff;\r\n    border-bottom: 1px solid #D9D9D9;\r\n\r\n    .toolbar-right {\r\n      display: flex;\r\n      align-items: center;\r\n    }\r\n\r\n    .action-item {\r\n      margin-right: 8px;\r\n\r\n      &:last-child {\r\n        margin-right: 0;\r\n      }\r\n\r\n      .action-name{\r\n        margin-left: 8px;\r\n      }\r\n    }\r\n\r\n    .change-home-preview-style-btn {\r\n      margin-left: 8px;\r\n      cursor: pointer;\r\n    }\r\n\r\n    .edit-user {\r\n      display: flex;\r\n      align-items: center;\r\n      margin-right: 16px;\r\n\r\n      .line {\r\n        width: 1px;\r\n        height: 16px;\r\n        margin-right: 16px;\r\n        border-radius: 1px;\r\n        background: #d9d9d9;\r\n      }\r\n\r\n      .user-avatar {\r\n        width: 24px;\r\n        height: 24px;\r\n        border-radius: 6px;\r\n      }\r\n\r\n      .user-name {\r\n        margin-left: 8px;\r\n        font-size: 14px;\r\n        color: #595959;\r\n      }\r\n\r\n      .edit-status-text {\r\n        margin-left: 8px;\r\n        font-size: 14px;\r\n        color: #8c8c8c;\r\n      }\r\n    }\r\n  }\r\n\r\n  .library-info {\r\n    display: flex;\r\n    flex-direction: row;\r\n    line-height: 22px;\r\n    padding: 24px 24px 24px 0;\r\n\r\n    .library-logo {\r\n      width: 32px;\r\n      height: 32px;\r\n      margin-right: 8px;\r\n      border-radius: 12px;\r\n    }\r\n\r\n    .library-info-content {\r\n      flex: 1;\r\n      display: flex;\r\n      align-items: center;\r\n      flex-direction: row;\r\n    }\r\n\r\n    .library-name {\r\n      flex: 1;\r\n      line-height: 24px;\r\n      height: 24px;\r\n      font-size: 16px;\r\n      font-weight: 600;\r\n      color: #000000;\r\n      overflow: hidden;\r\n      white-space: nowrap;\r\n      text-overflow: ellipsis;\r\n    }\r\n\r\n    .libray-arrow-down {\r\n      margin-left: 12px;\r\n      font-size: 16px;\r\n      cursor: pointer;\r\n    }\r\n\r\n    .publish-status {\r\n      display: flex;\r\n      align-items: center;\r\n      height: 22px;\r\n      line-height: 22px;\r\n      padding: 0 6px;\r\n      border-radius: 6px;\r\n      margin-left: 12px;\r\n      color: #3a4559;\r\n\r\n      &.is-publish {\r\n        color: #21A665;\r\n        background-color: #CAFCE4;\r\n      }\r\n\r\n      .status-icon {\r\n        margin-right: 2px;\r\n        font-size: 14px;\r\n      }\r\n\r\n      .status-name {\r\n        font-size: 14px;\r\n        font-weight: 500;\r\n      }\r\n    }\r\n  }\r\n\r\n  .preview-box {\r\n    position: relative;\r\n    flex: 1;\r\n    padding: 0;\r\n    overflow: hidden;\r\n    text-align: center;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n\r\n    &.is-dragging::before {\r\n      content: '';\r\n      display: block;\r\n      position: absolute;\r\n      top: 0;\r\n      left: 0;\r\n      width: 100%;\r\n      height: 100%;\r\n      background: rgba(0, 0, 0, 0);\r\n      z-index: 10;\r\n    }\r\n\r\n    &.is-mobile {\r\n      align-items: flex-start;\r\n      overflow-y: auto;\r\n    }\r\n\r\n    .mobile-box {\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      height: 800px;\r\n      width: 100%;\r\n      padding: 24px 0;\r\n      padding-bottom: 41px;\r\n      overflow: hidden;\r\n    }\r\n\r\n    .pc-box {\r\n      height: 100%;\r\n      width: 100%;\r\n    }\r\n\r\n    .iframe {\r\n      height: 100%;\r\n      width: 100%;\r\n    }\r\n  }\r\n\r\n  .seo-setting-box {\r\n    padding: 0 24px 32px 24px;\r\n  }\r\n}\r\n</style>\r\n\r\n<template>\r\n  <div class=\"home-preview\">\r\n    <div class=\"toolbar-wrapper\">\r\n      <div class=\"toolbar-left\">\r\n        <div class=\"library-info\">\r\n          <div class=\"library-info-content\">\r\n            <wiki-dropdown :libraryInfo=\"libraryInfo\" :libraryList=\"libraryList\"\r\n              @change=\"handleChangeLibrary\"></wiki-dropdown>\r\n\r\n            <div class=\"publish-status\" v-if=\"libraryInfo.access_rights == 0\">\r\n              <ExclamationCircleFilled class=\"status-icon\" />\r\n              <span class=\"status-name\">{{ t('not_published') }}</span>\r\n            </div>\r\n            <div class=\"publish-status  is-publish\" v-if=\"libraryInfo.access_rights == 1\">\r\n              <CheckCircleFilled class=\"status-icon\" />\r\n              <span class=\"status-name\">{{ t('published') }}</span>\r\n            </div>\r\n\r\n            <span class=\"change-home-preview-style-btn\">\r\n              <a-tooltip :title=\"homePreviewTip\">\r\n                <svg-icon name=\"switch-mobile\" style=\"font-size: 14px;color:#595959;\"\r\n                  @click.stop=\"changeHomePreviewStyle(item)\"></svg-icon>\r\n              </a-tooltip>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"toolbar-right\">\r\n        <div class=\"edit-user\" v-if=\"editUser.show && editUser.user_name\">\r\n          <img class=\"user-avatar\" :src=\"editUser.avatar\" alt=\"\" />\r\n          <span class=\"user-name\">{{ editUser.nick_name || editUser.user_name }}</span>\r\n          <span class=\"edit-status-text\">{{ t('editing') }}</span>\r\n        </div>\r\n\r\n        <div class=\"action-item\">\r\n          <a-button type=\"primary\" :loading=\"publishLoading\" @click=\"handlePublish\" v-if=\"isEdit\">\r\n            <CheckOutlined /> <span class=\"action-name\">{{ t('publish') }}</span>\r\n          </a-button>\r\n          <a-button type=\"primary\" @click=\"handleHomeEdit\" v-else>\r\n            <svg-icon class=\"action-icon\" name=\"edit\" style=\"font-size: 16px; color: #fff\"></svg-icon>\r\n            <span class=\"action-name\">{{ t('edit') }}</span>\r\n          </a-button>\r\n        </div>\r\n\r\n        <div class=\"action-item\">\r\n          <a-button @click=\"handleCopyShareUrl\">\r\n            <svg-icon class=\"action-icon\" name=\"link-left\" style=\"font-size: 16px\"></svg-icon>\r\n            <span class=\"action-name\">{{ t('copy_link') }}</span>\r\n          </a-button>\r\n        </div>\r\n\r\n        <div class=\"action-item\">\r\n          <a-button @click=\"handleOpenSeoSetting\">\r\n            <CheckCircleFilled style=\"color: #21a665; font-size: 14px\" class=\"status-icon\" v-if=\"isSetSeo\" />\r\n            <ExclamationCircleFilled  style=\"color: #ccc; font-size: 14px\" class=\"status-icon\" v-else />\r\n            <span class=\"action-name\">{{ t('seo') }}</span>\r\n          </a-button>\r\n        </div>\r\n\r\n        <div class=\"action-item\">\r\n          <a-button @click=\"toSettingPage\">\r\n            <svg-icon name=\"jibenpeizhi\" style=\"font-size: 14px;color: #595959;\"></svg-icon>\r\n            <span class=\"action-name\">{{ t('settings') }}</span>\r\n          </a-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"preview-box\" :class=\"{ 'is-mobile': styleType == 'mobile', 'is-dragging': isDragging }\"\r\n      v-if=\"state.doc_id\">\r\n      <div class=\"mobile-box\" v-if=\"styleType == 'mobile'\">\r\n        <PhoneBox>\r\n          <iframe ref=\"iframeRef\" class=\"iframe\" :src=\"previewUrl\" frameborder=\"0\"\r\n            v-if=\"libraryInfo.library_key\"></iframe>\r\n        </PhoneBox>\r\n      </div>\r\n\r\n      <div class=\"pc-box\" v-else>\r\n        <iframe ref=\"iframeRef\" class=\"iframe\" :src=\"previewUrl\" frameborder=\"0\"\r\n          v-if=\"libraryInfo.library_key\"></iframe>\r\n      </div>\r\n    </div>\r\n    <EditTitle ref=\"editTitleRef\" @ok=\"handleSaveTitle\" :confirm-loading=\"saveTitleLoading\" />\r\n    <EditDesc ref=\"editDescRef\" @ok=\"handleSaveDesc\" :confirm-loading=\"saveDescLoading\" />\r\n    <EditQuestionGuide ref=\"editQuestionGuideRef\" @ok=\"handleSaveQuestionGuide\"\r\n      :confirm-loading=\"saveQuestionGuideLoading\" />\r\n    <SeoSetting ref=\"seoSettingRef\" @ok=\"saveSeoOk\" />\r\n    <ShortcutSelector ref=\"shortcutSelectorRef\" :iconTemplateConfig=\"iconTemplateConfig\" @ok=\"onSelectAddShortcut\" />\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { generateUniqueId } from '@/utils/index'\r\nimport { useCopyShareUrl } from '@/hooks/web/useCopyShareUrl'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\nimport { OPEN_BOC_BASE_URL } from '@/constants/index'\r\nimport {\r\n  saveDraftLibDoc,\r\n  saveQuestionGuide,\r\n  deleteQuestionGuide,\r\n  saveLibDoc,\r\n  getLibDocInfo,\r\n  getLibDocHomeConfig,\r\n  saveLibDocIndexQuickDoc,\r\n  saveLibDocBannerImg\r\n} from '@/api/public-library'\r\nimport { getUser } from '@/api/manage'\r\nimport { uploadFile } from '@/api/app'\r\nimport { useUserStore } from '@/stores/modules/user'\r\nimport { ref, computed, reactive, nextTick, onMounted, onBeforeUnmount, inject } from 'vue'\r\nimport { CheckOutlined, ExclamationCircleFilled, CheckCircleFilled } from '@ant-design/icons-vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { usePublicLibraryStore } from '@/stores/modules/public-library'\r\nimport { message, Modal } from 'ant-design-vue'\r\nimport EditTitle from './components/edit-title.vue'\r\nimport EditDesc from './components/edit-desc.vue'\r\nimport EditQuestionGuide from './components/edit-question-guide.vue'\r\nimport PhoneBox from './components/phone-box.vue'\r\nimport SeoSetting from '../components/seo-setting.vue'\r\nimport WikiDropdown from '../components/wiki-dropdown.vue'\r\nimport ShortcutSelector from './components/shortcut-selector.vue'\r\n\r\nconst { t } = useI18n('views.public-library.home.index')\r\n\r\nconst router = useRouter()\r\n// 接受isDragging\r\nconst isDragging = inject('isDragging')\r\n\r\nconst libraryStore = usePublicLibraryStore()\r\nconst { getToken, user_id } = useUserStore()\r\n\r\nconst libraryInfo = computed(() => libraryStore.libraryInfo)\r\nconst libraryId = computed(() => libraryStore.library_id)\r\nconst libraryKey = computed(() => libraryStore.library_key)\r\nconst iconTemplateConfig = computed(() => libraryStore.iconTemplateConfig)\r\n\r\nconst homePreviewStyle = computed(() => {\r\n  return libraryStore.homePreviewStyle\r\n})\r\n\r\nconst homePreviewTip = computed(() => {\r\n  return homePreviewStyle.value == 'mobile' ? t('switch_to_pc') : t('switch_to_mobile')\r\n})\r\n\r\nconst changeHomePreviewStyle = () => {\r\n  libraryStore.changeHomePreviewStyle()\r\n}\r\n\r\nconst iframeRef = ref(null)\r\nconst time = ref(new Date().getTime())\r\nconst isEdit = ref(false)\r\nconst state = reactive({\r\n  doc_id: '',\r\n  title: '',\r\n  content: '',\r\n  library_intro: '',\r\n  library_name: '',\r\n  library_key: '',\r\n  is_pub: '',\r\n  doc_key: '',\r\n  seo_title: '',\r\n  seo_desc: '',\r\n  seo_keywords: ''\r\n})\r\n\r\nconst isSetSeo = computed(() => { \r\n  return state.seo_title || state.seo_desc || state.seo_keywords\r\n})\r\n\r\n// 打开seo设置\r\nconst seoSettingRef = ref(null);\r\nconst handleOpenSeoSetting = () => {\r\n  seoSettingRef.value.open({ ...state })\r\n}\r\n\r\nconst saveSeoOk = (data) => {\r\n  state.seo_title = data.seo_title\r\n  state.seo_desc = data.seo_desc\r\n  state.seo_keywords = data.seo_keywords\r\n  // time.value = new Date().getTime()\r\n}\r\n\r\nconst editUser = reactive({\r\n  show: false,\r\n  user_name: '',\r\n  avatar: '',\r\n  nick_name: ''\r\n})\r\n\r\nconst getEditUser = async (userId) => {\r\n  let res = await getUser({ id: userId })\r\n  editUser.avatar = res.data.avatar\r\n  editUser.user_name = res.data.user_name\r\n  editUser.nick_name = res.data.nick_name\r\n  return res\r\n}\r\n// 编辑标题\r\nconst editTitleRef = ref(null)\r\nconst saveTitleLoading = ref(false)\r\n\r\nconst handleSaveTitle = (data) => {\r\n  state.title = data.title\r\n  saveTitleLoading.value = true\r\n  handleSaveDraft()\r\n    .then(() => {\r\n      saveTitleLoading.value = false\r\n      editTitleRef.value.close()\r\n    })\r\n    .catch(() => {\r\n      saveTitleLoading.value = false\r\n    })\r\n}\r\n\r\n// 编辑描述\r\nconst editDescRef = ref(null)\r\nconst saveDescLoading = ref(false)\r\nconst handleSaveDesc = (data) => {\r\n  state.content = data.content\r\n  saveDescLoading.value = true\r\n  handleSaveDraft()\r\n    .then(() => {\r\n      saveDescLoading.value = false\r\n      editDescRef.value.close()\r\n    })\r\n    .catch(() => {\r\n      saveDescLoading.value = false\r\n    })\r\n}\r\n\r\n// 添加快捷方式\r\nconst shortcutSelectorRef = ref(null);\r\nconst shortcutList = ref([]);\r\nconst shortcutListValue = ref([]);\r\n\r\nconst handleOpenShortcutSelector = (data) => {\r\n  console.log(data)\r\n  shortcutSelectorRef.value.open({ library_key: libraryInfo.value.library_key, ...data })\r\n}\r\nconst onSelectAddShortcut = (data) => {\r\n  let key = generateUniqueId('shortcutList');\r\n  console.log(data)\r\n  if (!data.old_doc_id) {\r\n    shortcutList.value.push({\r\n      doc_id: data.doc_id,\r\n      key\r\n    })\r\n  } else {\r\n    let index = shortcutList.value.findIndex(item => item.key == data.old_doc_key)\r\n    // 如果key不存在则用id在找一次\r\n    if(index == -1){\r\n      index = shortcutList.value.findIndex(item => item.doc_id == data.old_doc_id)\r\n    }\r\n    \r\n    if (index > -1) {\r\n      shortcutList.value.splice(index, 1, { doc_id: data.doc_id, key})\r\n    } else {\r\n      shortcutList.value.push({ doc_id: data.doc_id, key })\r\n    }\r\n  }\r\n\r\n  saveLibDocIndexQuickDoc({\r\n    library_key: libraryInfo.value.library_key,\r\n    doc_id: state.doc_id,\r\n    quick_doc_content: JSON.stringify(shortcutList.value.filter(item => item.doc_id))\r\n  }).then(() => {\r\n    time.value = new Date().getTime()\r\n    message.success(t('save_success'))\r\n  })\r\n}\r\n\r\nconst handleDeleteShorcut = (data) => {\r\n  let index = shortcutList.value.findIndex(item => item.key == data.key)\r\n\r\n  // 如果key不存在则用id在找一次\r\n  if(index == -1){\r\n    index = shortcutList.value.findIndex(item => item.doc_id == data.doc_id)\r\n  }\r\n\r\n  if (index > -1) {\r\n    shortcutList.value.splice(index, 1)\r\n  }\r\n\r\n  saveLibDocIndexQuickDoc({\r\n    library_key: libraryInfo.value.library_key,\r\n    doc_id: state.doc_id,\r\n    quick_doc_content: JSON.stringify(shortcutList.value.filter(item => item.doc_id))\r\n  }).then(() => {\r\n    time.value = new Date().getTime()\r\n    message.success(t('delete_success'))\r\n  })\r\n}\r\n\r\nconst handleShortcutSort = (data) => { \r\n  shortcutList.value = data.list;\r\n\r\n  saveLibDocIndexQuickDoc({\r\n    library_key: libraryInfo.value.library_key,\r\n    doc_id: state.doc_id,\r\n    quick_doc_content: JSON.stringify(shortcutList.value.filter(item => item.doc_id))\r\n  }).then(() => {\r\n    // time.value = new Date().getTime()\r\n    message.success(t('save_success'))\r\n  })\r\n }\r\n\r\n// 保存\r\nconst saveDraftDoc = async () => {\r\n  let res = await saveDraftLibDoc({\r\n    library_key: libraryInfo.value.library_key,\r\n    doc_id: state.doc_id,\r\n    title: state.title,\r\n    content: state.content,\r\n    is_index: 1\r\n  }).then((res) => {\r\n    state.doc_id = res.data.doc_id\r\n\r\n    time.value = new Date().getTime()\r\n    return res\r\n  })\r\n\r\n  return res\r\n}\r\nconst handleSaveDraft = async () => {\r\n  let res = await saveDraftDoc()\r\n\r\n  if (res) {\r\n    message.success(t('save_success'))\r\n  }\r\n}\r\n// 发布\r\nconst publishLoading = ref(false)\r\nconst handlePublish = () => {\r\n  let data = {\r\n    library_key: libraryInfo.value.library_key,\r\n    doc_id: state.doc_id,\r\n    title: state.title,\r\n    content: state.content,\r\n    is_index: 1\r\n  }\r\n\r\n  publishLoading.value = true\r\n\r\n  saveLibDoc(data)\r\n    .then((res) => {\r\n      state.doc_id = res.data.doc_id\r\n      publishLoading.value = false\r\n      message.success(t('publish_success'))\r\n      setHomeEditStatus(false)\r\n\r\n      time.value = new Date().getTime()\r\n    })\r\n    .catch(() => {\r\n      publishLoading.value = false\r\n    })\r\n}\r\n\r\n// 保存问题引导\r\nconst editQuestionGuideRef = ref(null)\r\nconst saveQuestionGuideLoading = ref(false)\r\nconst questionGuide = reactive({\r\n  id: '',\r\n  question: ''\r\n})\r\n\r\nconst handleSaveQuestionGuide = (data) => {\r\n  questionGuide.question = data.question\r\n  saveQuestionGuideLoading.value = true\r\n  saveQuestionGuide({\r\n    library_key: libraryInfo.value.library_key,\r\n    id: questionGuide.id || '',\r\n    question: questionGuide.question\r\n  })\r\n    .then(() => {\r\n      time.value = new Date().getTime()\r\n      saveQuestionGuideLoading.value = false\r\n      editQuestionGuideRef.value.close()\r\n    })\r\n    .catch(() => {\r\n      saveQuestionGuideLoading.value = false\r\n    })\r\n}\r\n\r\nconst styleType = computed(() => {\r\n  return libraryStore.homePreviewStyle\r\n})\r\n\r\nlet prviewHost = import.meta.env.VITE_OPEN_DOC_HOST || ''\r\n\r\nconst previewUrl = computed(() => {\r\n  let url = ''\r\n  if (import.meta.env.DEV) {\r\n    url = `${prviewHost}/home/${libraryInfo.value.library_key}?&v=${time.value}&token=${getToken}`\r\n  } else {\r\n    url = `${libraryInfo.value.share_url || ''}${OPEN_BOC_BASE_URL}/home/${libraryInfo.value.library_key}?&v=${time.value}&token=${getToken}`\r\n  }\r\n\r\n  return url\r\n})\r\n\r\nconst getHomeInfo = async () => {\r\n  await getLibDocHomeConfig({ library_key: libraryInfo.value.library_key }).then(async (res) => {\r\n    // 如果没有doc_id 则创建一个新的doc_id\r\n    if (!res.data.id) {\r\n      state.title = libraryInfo.value.library_name\r\n      state.content = libraryInfo.value.library_intro\r\n\r\n      await saveDraftDoc()\r\n\r\n      getHomeInfo()\r\n      return\r\n    }\r\n\r\n    state.library_key = libraryInfo.value.library_key;\r\n    state.library_intro = libraryInfo.value.library_intro;\r\n    state.library_name = libraryInfo.value.library_name;\r\n    state.doc_id = res.data.id;\r\n    state.title = res.data.title;\r\n    state.content = res.data.content;\r\n    state.seo_title = res.data.seo_title;\r\n    state.seo_desc = res.data.seo_desc;\r\n    state.seo_keywords = res.data.seo_keywords;\r\n    state.is_pub = res.data.is_pub;\r\n    state.doc_key = res.data.doc_key;\r\n\r\n    if (res.data.quick_doc_content && res.data.quick_doc_content.length) {\r\n      let shortcuts= JSON.parse(res.data.quick_doc_content) || [];\r\n\r\n      shortcutList.value = shortcuts.filter(item => item.doc_id)\r\n    }else{\r\n      shortcutList.value = [];\r\n    }\r\n\r\n    if (res.data.quick_doc_content_value && res.data.quick_doc_content_value.length) {\r\n      shortcutListValue.value = JSON.parse(res.data.quick_doc_content_value) || [];\r\n    }else{\r\n      shortcutListValue.value = []\r\n    }\r\n\r\n    let editStatus = res.data.edit_user && res.data.edit_user != 0;\r\n\r\n    if (editStatus && res.data.edit_user != user_id) {\r\n      editUser.show = true\r\n      getEditUser(res.data.edit_user)\r\n    }\r\n\r\n    nextTick(() => {\r\n      if (editStatus && res.data.edit_user == user_id) {\r\n        setHomeEditStatus(true)\r\n      } else {\r\n        setHomeEditStatus(false)\r\n      }\r\n    })\r\n  })\r\n}\r\n\r\n// 知识库列表\r\nconst libraryList = computed(() => libraryStore.libraryList)\r\n\r\nconst fetchLibraryList = () => {\r\n  libraryStore.getLibraryList()\r\n}\r\n\r\nconst handleHomeEdit = async () => {\r\n  try {\r\n    let doc = await getLibDocInfo({\r\n      doc_id: state.doc_id,\r\n      library_key: libraryInfo.value.library_key\r\n    })\r\n\r\n    let editStatus = doc.data.edit_user && doc.data.edit_user != 0\r\n\r\n    if (editStatus && doc.data.edit_user != user_id) {\r\n      let user = await getEditUser(doc.data.edit_user)\r\n      let name = user.data.nick_name || user.data.user_name\r\n      editUser.show = true\r\n      Modal.warning({\r\n        title: t('editing_warning_title', { name }),\r\n        content: t('editing_warning_content'),\r\n        okText: t('editing_warning_ok')\r\n      })\r\n\r\n      return\r\n    }\r\n\r\n    saveDraftDoc()\r\n\r\n    // setHomeEditStatus(true)\r\n    isEdit.value = true\r\n    editUser.show = false\r\n  } catch (error) {\r\n    return\r\n  }\r\n}\r\n\r\nconst setHomeEditStatus = (type) => {\r\n  if (!iframeRef.value) {\r\n    return\r\n  }\r\n  isEdit.value = type\r\n\r\n  const iframeWindow = iframeRef.value.contentWindow\r\n\r\n  iframeWindow.postMessage({ action: 'setEditStatus', data: { type: isEdit.value } }, '*')\r\n}\r\n\r\nconst { copyShareUrl } = useCopyShareUrl()\r\n\r\nconst handleCopyShareUrl = async () => {\r\n  const docUrl = OPEN_BOC_BASE_URL + '/home/' + libraryInfo.value.library_key\r\n\r\n  await copyShareUrl(docUrl)\r\n}\r\n\r\nconst initHomeDoc = () => {\r\n\r\n}\r\n\r\nconst handleEditTitle = (data) => {\r\n  state.title = data.title\r\n  state.content = data.content\r\n  editTitleRef.value.open(data)\r\n}\r\n\r\nconst handleEditDesc = (data) => {\r\n  state.title = data.title\r\n  state.content = data.content\r\n  editDescRef.value.open(data)\r\n}\r\n\r\nconst handleEditQuestionGuide = (data) => {\r\n  questionGuide.id = data.id\r\n  questionGuide.question = data.question\r\n  editQuestionGuideRef.value.open(data)\r\n}\r\n\r\nconst handleDeleteQuestionGuide = (data) => {\r\n  questionGuide.id = data.id\r\n  questionGuide.question = data.question\r\n\r\n  // 弹窗确认删除\r\n  Modal.confirm({\r\n    title: t('delete_question_guide_title'),\r\n    content: t('delete_question_guide_content'),\r\n    okText: t('delete_question_guide_ok'),\r\n    cancelText: t('delete_question_guide_cancel'),\r\n    onOk() {\r\n      deleteQuestionGuide({\r\n        library_key: libraryInfo.value.library_key,\r\n        id: questionGuide.id\r\n      }).then(() => {\r\n        message.success(t('delete_success'))\r\n        time.value = new Date().getTime()\r\n      })\r\n    }\r\n  })\r\n}\r\n\r\nconst saveBannerImage = (url) => {\r\n  let data = {\r\n    banner_img_url: url,\r\n    doc_id: state.doc_id,\r\n    library_key: libraryInfo.value.library_key,\r\n  }\r\n\r\n  saveLibDocBannerImg(data).then(() => {\r\n    time.value = new Date().getTime()\r\n    message.success(t('save_success'))\r\n  })\r\n}\r\n\r\nconst onQuestionMessage = (message) => {\r\n  if (message.action == 'edit' || message.action == 'add') {\r\n    handleEditQuestionGuide(message.data)\r\n  } else if (message.action == 'delete') {\r\n    handleDeleteQuestionGuide(message.data)\r\n  }\r\n}\r\n\r\nconst onShortcutMessage = (message) => {\r\n  if (message.action == 'edit' || message.action == 'add') {\r\n    handleOpenShortcutSelector(message.data)\r\n  }else if (message.action == 'delete') {\r\n    handleDeleteShorcut(message.data)\r\n  }else if(message.action == 'dragEnd'){\r\n    handleShortcutSort(message.data)\r\n  }\r\n}\r\n\r\nconst onBannerMessage = (message) => {\r\n  let data = message.data;\r\n\r\n  uploadFile({\r\n    file: data.file,\r\n    category: 'library_doc_image'\r\n  }).then((res) => {\r\n    let url = res.data.link;\r\n    saveBannerImage(url)\r\n  })\r\n}\r\n\r\nconst onPreviewPageMessage = (event) => {\r\n  const message = event.data\r\n\r\n  if (message.key == 'init') {\r\n    initHomeDoc(message.data)\r\n\r\n    if (isEdit.value) {\r\n      setHomeEditStatus(true)\r\n    }\r\n  } else if (message.key == 'content') {\r\n    handleEditDesc(message.data);\r\n  } else if (message.key == 'title') {\r\n    handleEditTitle(message.data);\r\n  } else if (message.key == 'banner') {\r\n    onBannerMessage(message);\r\n  } else if (message.key == 'question') {\r\n    onQuestionMessage(message);\r\n  } else if (message.key == 'shortcut') {\r\n    onShortcutMessage(message)\r\n  }\r\n\r\n  // 好像没用了，验证无用后可以删除\r\n  // if (message.action === 'check_preview') {\r\n  //   const iframeWindow = iframeRef.value.contentWindow\r\n\r\n  //   iframeWindow.postMessage({ action: 'setPreview', token: getToken }, '*')\r\n  // }\r\n}\r\n\r\nconst toSettingPage = () => {\r\n  router.push({\r\n    path: '/public-library/config',\r\n    query: {\r\n      library_id: libraryId.value,\r\n      library_key: libraryKey.value\r\n    }\r\n  })\r\n}\r\n\r\nconst handleChangeLibrary = async (data) => {\r\n  await router.replace({\r\n    path: '/public-library/home',\r\n    query: {\r\n      library_id: data.id,\r\n      library_key: data.library_key\r\n    }\r\n  })\r\n\r\n  window.location.reload()\r\n}\r\n\r\nonMounted(async () => {\r\n  window.addEventListener('message', onPreviewPageMessage)\r\n\r\n  await getHomeInfo();\r\n\r\n  fetchLibraryList();\r\n})\r\n\r\nonBeforeUnmount(() => {\r\n  window.removeEventListener('message', onPreviewPageMessage)\r\n})\r\n</script>\r\n"],"names":["t","useI18n","emit","__emit","props","__props","formRef","ref","formState","reactive","rules","show","open","record","close","handleOk","toRaw","error","__expose","_createBlock","_component_a_modal","$event","_unref","_createElementVNode","_hoisted_1","_createVNode","_component_a_form","_component_a_form_item","_component_a_textarea","_cache","_imports_0","_hoisted_2","_hoisted_3","_openBlock","_createElementBlock","_renderSlot","_ctx","visible","libraryKey","expandedKeys","checkedKeys","treeData","oldDocKey","oldDocId","title","computed","getMyDocList","doc","data","res","getDocList","list","item","loadData","treeNode","resolve","onCheck","keys","e","_component_a_tree","_withCtx","level","_toDisplayString","router","useRouter","isDragging","inject","libraryStore","usePublicLibraryStore","getToken","user_id","useUserStore","libraryInfo","libraryId","iconTemplateConfig","homePreviewStyle","homePreviewTip","changeHomePreviewStyle","iframeRef","time","isEdit","state","isSetSeo","seoSettingRef","handleOpenSeoSetting","saveSeoOk","editUser","getEditUser","userId","getUser","editTitleRef","saveTitleLoading","handleSaveTitle","handleSaveDraft","editDescRef","saveDescLoading","handleSaveDesc","shortcutSelectorRef","shortcutList","shortcutListValue","handleOpenShortcutSelector","onSelectAddShortcut","key","generateUniqueId","index","saveLibDocIndexQuickDoc","message","handleDeleteShorcut","handleShortcutSort","saveDraftDoc","saveDraftLibDoc","publishLoading","handlePublish","saveLibDoc","setHomeEditStatus","editQuestionGuideRef","saveQuestionGuideLoading","questionGuide","handleSaveQuestionGuide","saveQuestionGuide","styleType","previewUrl","url","OPEN_BOC_BASE_URL","getHomeInfo","getLibDocHomeConfig","shortcuts","editStatus","nextTick","libraryList","fetchLibraryList","handleHomeEdit","getLibDocInfo","user","name","Modal","type","copyShareUrl","useCopyShareUrl","handleCopyShareUrl","docUrl","initHomeDoc","handleEditTitle","handleEditDesc","handleEditQuestionGuide","handleDeleteQuestionGuide","deleteQuestionGuide","saveBannerImage","saveLibDocBannerImg","onQuestionMessage","onShortcutMessage","onBannerMessage","uploadFile","onPreviewPageMessage","event","toSettingPage","handleChangeLibrary","onMounted","onBeforeUnmount","_hoisted_4","_hoisted_5","WikiDropdown","_hoisted_6","ExclamationCircleFilled","_hoisted_7","_hoisted_8","CheckCircleFilled","_hoisted_9","_hoisted_10","_component_a_tooltip","_component_svg_icon","_withModifiers","_hoisted_11","_hoisted_12","_hoisted_14","_hoisted_15","_hoisted_16","_component_a_button","CheckOutlined","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_normalizeClass","_hoisted_25","PhoneBox","_hoisted_27","EditTitle","EditDesc","EditQuestionGuide","SeoSetting","ShortcutSelector"],"mappings":"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"}