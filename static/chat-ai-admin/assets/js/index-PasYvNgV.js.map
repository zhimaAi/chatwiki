{"version":3,"file":"index-PasYvNgV.js","sources":["../../../../front-end/chat-ai-admin-vue/src/assets/img/default-mcp.png","../../../../front-end/chat-ai-admin-vue/src/api/mcp/index.js","../../../../front-end/chat-ai-admin-vue/src/views/explore/mcp/components/square.vue","../../../../front-end/chat-ai-admin-vue/src/views/explore/mcp/index.vue"],"sourcesContent":["export default \"__VITE_ASSET__Cl9jif8___\"","import request from \"@/utils/http/axios/index.js\";\r\n\r\nexport function getMcpSquareTypeList(params = {}) {\r\n  return request.get({url: '/manage/getMcpSquareTypeList', params})\r\n}\r\n\r\nexport function getMcpSquareList(params = {}) {\r\n  return request.get({url: '/manage/getMcpSquareList', params})\r\n}\r\n","<template>\r\n  <div class=\"_plugin-box\">\r\n    <LoadingBox v-if=\"loading\"/>\r\n    <div v-else-if=\"list.length\" class=\"plugin-list\">\r\n      <div v-for=\"(item, idx) in list\"\r\n             :key=\"item.name\"\r\n             @click=\"linkDetail(item)\"\r\n             class=\"plugin-item\">\r\n        <div class=\"base-info\">\r\n          <img class=\"avatar\" v-if=\"item.icon\" :src=\"item.icon\"/>\r\n          <img class=\"avatar\" v-else src=\"@/assets/img/default-mcp.png\"/>\r\n          <div class=\"info\">\r\n            <div class=\"head\">\r\n              <span class=\"name zm-line1\">{{ item.title }}</span>\r\n              <!-- 来源 -->\r\n              <a class=\"source\" :href=\"item.source_url\" target=\"_blank\">{{ item.source }}</a>\r\n            </div>\r\n            <div class=\"source\">{{ item.author }}</div>\r\n          </div>\r\n        </div>\r\n        <a-tooltip :title=\"getTooltipTitle(item.description, item)\" placement=\"top\">\r\n          <div class=\"desc zm-line1\" :ref=\"el => setDescRef(el, item)\">{{ item.description }}</div>\r\n        </a-tooltip>\r\n        <div class=\"type-box\" :ref=\"el => setTypeBoxRef(idx, el)\">\r\n          <div\r\n            v-for=\"type in renderTypes(item, idx)\"\r\n            :key=\"type\"\r\n            class=\"type-tag\"\r\n          >{{type.type_title}}</div>\r\n          <a-tooltip v-if=\"overflowMap[idx]\" placement=\"top\">\r\n            <template #title>\r\n              <div class=\"popover-type-box\">\r\n                <div\r\n                  v-for=\"type in item.filter_type_list\"\r\n                  :key=\"type\"\r\n                  class=\"type-tag\"\r\n                >{{type.type_title}}</div>\r\n              </div>\r\n            </template>\r\n            <div class=\"type-tag type-more\" @click.stop>{{ t('label_more') }}</div>\r\n          </a-tooltip>\r\n        </div>\r\n      </div>\r\n      <div ref=\"loadMoreRef\" class=\"load-more-sentinel\"></div>\r\n    </div>\r\n    <EmptyBox v-else :title=\"t('msg_no_available_mcp')\"/>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport {onMounted, onUnmounted, ref, watch, nextTick} from 'vue';\r\nimport {useRouter} from 'vue-router';\r\nimport EmptyBox from \"@/components/common/empty-box.vue\";\r\nimport {getMcpSquareList} from \"@/api/mcp/index.js\";\r\nimport LoadingBox from \"@/components/common/loading-box.vue\";\r\nimport { useI18n } from '@/hooks/web/useI18n';\r\n\r\nconst { t } = useI18n('views.explore.mcp.components.square')\r\n\r\nconst props = defineProps({\r\n  filterData: {\r\n    type: Object,\r\n    default: null\r\n  },\r\n  scrollRoot: {\r\n    type: Object,\r\n    default: null\r\n  }\r\n})\r\nconst router = useRouter()\r\n\r\nconst loading = ref(true)\r\nconst list = ref([])\r\nconst typeBoxRefs = ref({})\r\nconst overflowMap = ref({})\r\nconst visibleTagsMap = ref({})\r\nconst page = ref(1)\r\nconst size = ref(50)\r\nconst hasMore = ref(true)\r\nconst loadingMore = ref(false)\r\nconst loadMoreRef = ref(null)\r\nlet observer = null\r\nlet rafId = 0\r\n\r\nonMounted(() => {\r\n  loadData()\r\n  window.addEventListener('resize', handleResize)\r\n  initObserver()\r\n})\r\n\r\nonUnmounted(() => {\r\n  window.removeEventListener('resize', handleResize)\r\n  if (observer) {\r\n    observer.disconnect()\r\n    observer = null\r\n  }\r\n})\r\n\r\n// 获取 tooltip 标题\r\nfunction getTooltipTitle(text, record) {\r\n  if (!text) return null\r\n  const canvas = document.createElement('canvas')\r\n  const context = canvas.getContext('2d')\r\n  context.font = '14px -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif'\r\n  const textWidth = context.measureText(text).width\r\n  const maxWidth = record?.title_width || 120\r\n  return textWidth > maxWidth ? text : null\r\n}\r\n\r\n// watch(() => props.filterData, () => {\r\n//   loadData()\r\n// }, {\r\n//   immediate: true,\r\n//   deep: true\r\n// })\r\n\r\nfunction search() {\r\n  list.value = []\r\n  page.value = 1\r\n  hasMore.value = true\r\n  loadData(true)\r\n}\r\n\r\nasync function loadData(reset = false) {\r\n  loading.value = true\r\n  const params = { ...(props.filterData || {}), page: page.value, size: size.value }\r\n  getMcpSquareList(params).then(res => {\r\n    let _list = res?.data?.data || []\r\n    if (reset || page.value === 1) {\r\n      list.value = _list\r\n    } else {\r\n      list.value = [...list.value, ..._list]\r\n    }\r\n    hasMore.value = Array.isArray(_list) && _list.length >= size.value\r\n    nextTick(() => {\r\n      scheduleCalcOverflow()\r\n    })\r\n  }).finally(() => {\r\n    loading.value = false\r\n    loadingMore.value = false\r\n  })\r\n}\r\n\r\nfunction linkDetail(item) {\r\n  window.open(item.source_url, '_blank')\r\n}\r\n\r\nfunction renderTypes (item, idx) {\r\n  const vis = visibleTagsMap.value[idx]\r\n  return Array.isArray(vis) ? vis : item.filter_type_list\r\n}\r\n\r\nfunction setTypeBoxRef (index, el) {\r\n  if (typeof index === 'undefined') return\r\n  const prev = typeBoxRefs.value[index]\r\n  if (el) {\r\n    if (prev !== el) {\r\n      typeBoxRefs.value[index] = el\r\n      scheduleCalcOverflow()\r\n    }\r\n  } else {\r\n    if (prev) {\r\n      delete typeBoxRefs.value[index]\r\n    }\r\n  }\r\n}\r\n\r\nfunction calcOverflow() {\r\n  const keys = Object.keys(typeBoxRefs.value)\r\n  keys.forEach((idx) => {\r\n    const el = typeBoxRefs.value[idx]\r\n    const item = list.value[Number(idx)]\r\n    if (!el || !item) return\r\n    const containerWidth = el.clientWidth\r\n    const style = getComputedStyle(el)\r\n    const gapStr = style.gap || '0px'\r\n    const gap = parseFloat(gapStr.split(' ')[0]) || 0\r\n\r\n    const temp = document.createElement('div')\r\n    temp.style.position = 'absolute'\r\n    temp.style.visibility = 'hidden'\r\n    temp.style.display = 'flex'\r\n    temp.style.flexWrap = 'nowrap'\r\n    temp.style.gap = gapStr\r\n    el.appendChild(temp)\r\n\r\n    const tagWidths = []\r\n    item.filter_type_list.forEach((t) => {\r\n      const d = document.createElement('div')\r\n      d.className = 'type-tag'\r\n      d.style.whiteSpace = 'nowrap'\r\n      d.textContent = t.type_title\r\n      temp.appendChild(d)\r\n      tagWidths.push(d.getBoundingClientRect().width + gap)\r\n    })\r\n\r\n    const more = document.createElement('div')\r\n    more.className = 'type-tag type-more'\r\n    more.style.whiteSpace = 'nowrap'\r\n    more.textContent = '更多'\r\n    temp.appendChild(more)\r\n    const moreWidth = more.getBoundingClientRect().width + gap\r\n\r\n    el.removeChild(temp)\r\n\r\n    const totalWidth = tagWidths.reduce((s, w, i) => s + w + (i > 0 ? gap : 0), 0)\r\n    const prevVis = visibleTagsMap.value[idx]\r\n    const prevOverflow = !!overflowMap.value[idx]\r\n    if (totalWidth <= containerWidth) {\r\n      const shouldUpdate = prevOverflow || !Array.isArray(prevVis) || prevVis.length !== item.filter_type_list.length\r\n      if (shouldUpdate) {\r\n        visibleTagsMap.value[idx] = item.filter_type_list\r\n        overflowMap.value[idx] = false\r\n      }\r\n      return\r\n    }\r\n\r\n    let sum = 0\r\n    let count = 0\r\n    for (let i = 0; i < tagWidths.length; i++) {\r\n      const require = (count > 0 ? gap : 0) + tagWidths[i]\r\n      const reserve = (count > 0 ? gap : 0) + moreWidth\r\n      if (sum + require + reserve <= containerWidth) {\r\n        sum += require\r\n        count++\r\n      } else {\r\n        break\r\n      }\r\n    }\r\n    const prevLen = Array.isArray(prevVis) ? prevVis.length : 0\r\n    const shouldUpdate = !prevOverflow || prevLen !== count\r\n    if (shouldUpdate) {\r\n      visibleTagsMap.value[idx] = item.filter_type_list.slice(0, count)\r\n      overflowMap.value[idx] = true\r\n    }\r\n  })\r\n}\r\n\r\nfunction handleResize () {\r\n  nextTick(() => scheduleCalcOverflow())\r\n}\r\n\r\nfunction initObserver() {\r\n  observer = new IntersectionObserver((entries) => {\r\n    entries.forEach((entry) => {\r\n      if (entry.isIntersecting) {\r\n        if (!loading.value && !loadingMore.value && hasMore.value && list.value.length > 0) {\r\n          loadingMore.value = true\r\n          page.value += 1\r\n          loadData()\r\n        }\r\n      }\r\n    })\r\n  }, { root: props.scrollRoot || null, threshold: 0.1 })\r\n  nextTick(() => {\r\n    if (loadMoreRef.value) observer.observe(loadMoreRef.value)\r\n  })\r\n}\r\n\r\nfunction scheduleCalcOverflow () {\r\n  if (rafId) {\r\n    cancelAnimationFrame(rafId)\r\n    rafId = 0\r\n  }\r\n  rafId = requestAnimationFrame(() => {\r\n    rafId = 0\r\n    calcOverflow()\r\n  })\r\n}\r\n\r\nfunction setDescRef(el, item) {\r\n  if (el && item) {\r\n    item.title_width = el.offsetWidth\r\n  }\r\n}\r\n\r\ndefineExpose({\r\n  search,\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n._plugin-box {\r\n  width: 100%;\r\n  min-height: 100%;\r\n}\r\n\r\n.plugin-list {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 16px;\r\n  flex-wrap: wrap;\r\n  position: relative;\r\n\r\n  .plugin-item {\r\n    flex: 0 0 calc((100% - 3 * 16px) / 4);\r\n    min-width: 320px;\r\n    padding: 24px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 12px;\r\n    border-radius: 12px;\r\n    border: 1px solid #E4E6EB;\r\n    cursor: pointer;\r\n    position: relative;\r\n\r\n    &:hover {\r\n      box-shadow: 0 4px 16px 0 rgba(0, 0, 0, 0.12);\r\n    }\r\n\r\n    .type-tag {\r\n      white-space: nowrap;\r\n      display: flex;\r\n      padding: 1px 8px;\r\n      flex-direction: column;\r\n      align-items: flex-start;\r\n      gap: 10px;\r\n      border-radius: 6px;\r\n      background: #F2F4F7;\r\n      color: #595959;\r\n      font-size: 12px;\r\n      font-style: normal;\r\n      font-weight: 400;\r\n      line-height: 16px;\r\n    }\r\n\r\n    .base-info {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 12px;\r\n\r\n      .avatar {\r\n        width: 62px;\r\n        height: 62px;\r\n        border-radius: 16px;\r\n        border: 1px solid #F0F0F0;\r\n      }\r\n\r\n      .head {\r\n        display: flex;\r\n        flex-direction: column;\r\n        gap: 4px;\r\n\r\n        .source {\r\n          display: -webkit-box;\r\n          -webkit-box-orient: vertical;\r\n          -webkit-line-clamp: 1;\r\n          overflow: hidden;\r\n          color: #164799;\r\n          text-overflow: ellipsis;\r\n          font-size: 12px;\r\n          font-style: normal;\r\n          font-weight: 400;\r\n          line-height: 20px;\r\n        }\r\n      }\r\n\r\n      .name {\r\n        color: #262626;\r\n        font-size: 16px;\r\n        font-weight: 600;\r\n      }\r\n\r\n      .source {\r\n        color: #8C8C8C;\r\n        font-size: 12px;\r\n        font-weight: 400;\r\n      }\r\n    }\r\n\r\n    .version {\r\n      color: #8C8C8C;\r\n      font-size: 12px;\r\n      font-weight: 400;\r\n      margin-top: -8px;\r\n    }\r\n\r\n    .desc {\r\n      color: #595959;\r\n      font-size: 14px;\r\n      font-weight: 400;\r\n      height: 22px;\r\n      width: 100%;\r\n    }\r\n\r\n    .type-box {\r\n      height: 18px;\r\n      width: 100%;\r\n      display: flex;\r\n      gap: 4px;\r\n      position: relative;\r\n      max-height: 22px;\r\n      overflow: hidden;\r\n      flex-wrap: nowrap;\r\n    }\r\n  }\r\n  \r\n  .trigger-plugin-item {\r\n    cursor: auto;\r\n    \r\n    &:hover {\r\n      box-shadow: none;\r\n    }\r\n  }\r\n  .type-more {}\r\n  .popover-type-box {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    gap: 4px;\r\n    max-width: 480px;\r\n  }\r\n  .load-more-sentinel {\r\n    width: 100%;\r\n    height: 1px;\r\n  }\r\n} \r\n\r\n\r\n/* 大屏幕时：5 列 */\r\n@media (min-width: 1900px) {\r\n  .plugin-list .plugin-item {\r\n    flex: 0 0 calc((100% - 4 * 16px) / 5);\r\n  }\r\n}\r\n\r\n.text-center {\r\n  text-align: center;\r\n}\r\n\r\n.mt24 {\r\n  margin-top: 24px;\r\n}\r\n\r\n.c595959 {\r\n  color: #595959;\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"_container\">\r\n    <div class=\"header\">\r\n      <div class=\"main-tab-box\">\r\n        <MainTab ref=\"tabRef\" @change=\"tabChange\"/>\r\n      </div>\r\n    </div>\r\n    <PublicNetworkCheck v-if=\"!isPublicNetwork\"/>\r\n    <div v-else class=\"content\" ref=\"contentRef\">\r\n      <div class=\"filter-box\">\r\n        <div class=\"radio-tabs\">\r\n          <div @click=\"filterTypeChange(0)\" :class=\"['radio-tab', {active: filterData.filter_type == 0 }]\">\r\n            <!-- <svg-icon name=\"icon-all\"/> -->\r\n            <span>{{ t('label_all') }}</span>\r\n          </div>\r\n          <div v-for=\"type in types\"\r\n               @click=\"filterTypeChange(type.id)\"\r\n               :key=\"type.id\"\r\n               :class=\"['radio-tab', {active: type.id == filterData.filter_type }]\"\r\n          >\r\n            <img v-if=\"type.icon_path\" class=\"icon\" :src=\"type.icon_path\">\r\n            <span>{{ type.type_title }}</span>\r\n          </div>\r\n        </div>\r\n        <a-input\r\n          v-model:value.trim=\"filterData.title\"\r\n          @change=\"filterDataChange\"\r\n          style=\"width: 360px;\"\r\n          allowClear\r\n          :placeholder=\"t('ph_search_mcp')\">\r\n          <template #suffix>\r\n            <SearchOutlined/>\r\n          </template>\r\n        </a-input>\r\n      </div>\r\n      <Square @installReport=\"updateTab\" :filterData=\"filterData\" :scrollRoot=\"contentRef\" ref=\"pluginRef\"/>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted , ref, reactive} from 'vue';\r\nimport {useRoute} from 'vue-router'\r\nimport {SearchOutlined} from '@ant-design/icons-vue';\r\nimport Square from \"./components/square.vue\";\r\nimport MainTab from \"@/views/explore/components/main-tab.vue\";\r\nimport {getMcpSquareTypeList} from \"@/api/mcp/index.js\";\r\nimport PublicNetworkCheck from \"@/components/common/public-network-check.vue\";\r\nimport {usePublicNetworkCheck} from \"@/composables/usePublicNetworkCheck.js\";\r\nimport { useI18n } from '@/hooks/web/useI18n';\r\n\r\nconst { t } = useI18n('views.explore.mcp.index')\r\nconst {isPublicNetwork} = usePublicNetworkCheck()\r\nconst route = useRoute()\r\nconst tabRef = ref(null)\r\nconst pluginRef = ref(null)\r\nconst contentRef = ref(null)\r\nconst active = ref(localStorage.getItem('zm:explore:active') || '5')\r\nconst types = ref([])\r\nconst filterData = reactive({\r\n  title: '',\r\n  filter_type: 0\r\n})\r\n\r\nonMounted(() => {\r\n  if (route.query.active > 1) {\r\n    tabRef.value.change(route.query.active)\r\n  }\r\n  loadTypes()\r\n})\r\n\r\nfunction loadTypes() {\r\n  getMcpSquareTypeList().then(res => {\r\n    types.value = res?.data || []\r\n  })\r\n}\r\n\r\nfunction filterDataChange() {\r\n  pluginRef.value.search()\r\n}\r\n\r\nfunction filterTypeChange(key) {\r\n  filterData.filter_type = key\r\n  filterDataChange()\r\n}\r\n\r\nfunction tabChange(val){\r\n  if (val > 1) active.value = val\r\n}\r\n\r\nfunction updateTab() {\r\n  tabRef.value.update()\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n._container {\r\n  height: 100%;\r\n  padding: 16px 24px 0 0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n}\r\n.header {\r\n  .main-tab-box {\r\n    display: flex;\r\n  }\r\n  .tabs-box {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n\r\n    .tab-item {\r\n      padding: 5px 16px;\r\n      border-radius: 6px;\r\n      background: #EDEFF2;\r\n      color: #595959;\r\n      font-size: 14px;\r\n      font-weight: 400;\r\n      cursor: pointer;\r\n\r\n      &.active {\r\n        color: #2475fc;\r\n        background: #D6E6FF;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.content {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n\r\n  .filter-box {\r\n    display: flex;\r\n    align-items: flex-start;\r\n    justify-content: space-between;\r\n    gap: 16px;\r\n    margin: 10px 0 16px;\r\n\r\n    .radio-tabs {\r\n      display: flex;\r\n      flex-wrap: wrap;\r\n      align-items: center;\r\n      gap: 8px;\r\n\r\n      .radio-tab {\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 4px;\r\n        font-size: 14px;\r\n        font-weight: 400;\r\n        padding: 4px 16px;\r\n        border-radius: 6px;\r\n        cursor: pointer;\r\n        &.active,\r\n        &:hover {\r\n          color: #2475FC;\r\n          background: #D6E6FF;\r\n        }\r\n\r\n        .icon {\r\n          width: 16px;\r\n          height: 16px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"],"names":["_imports_0","getMcpSquareTypeList","params","request","getMcpSquareList","t","useI18n","props","__props","useRouter","loading","ref","list","typeBoxRefs","overflowMap","visibleTagsMap","page","size","hasMore","loadingMore","loadMoreRef","observer","rafId","onMounted","loadData","handleResize","initObserver","onUnmounted","getTooltipTitle","text","record","context","textWidth","maxWidth","search","reset","res","_list","_a","nextTick","scheduleCalcOverflow","linkDetail","item","renderTypes","idx","vis","setTypeBoxRef","index","el","prev","calcOverflow","containerWidth","gapStr","gap","temp","tagWidths","d","more","moreWidth","totalWidth","s","w","i","prevVis","prevOverflow","sum","count","require","reserve","prevLen","entries","entry","setDescRef","__expose","_openBlock","_createElementBlock","_hoisted_1","_createBlock","LoadingBox","_hoisted_2","_Fragment","_renderList","$event","_createElementVNode","_hoisted_4","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_toDisplayString","_hoisted_10","_hoisted_11","_createVNode","_component_a_tooltip","type","_hoisted_12","_unref","EmptyBox","isPublicNetwork","usePublicNetworkCheck","route","useRoute","tabRef","pluginRef","contentRef","active","types","filterData","reactive","loadTypes","filterDataChange","filterTypeChange","key","tabChange","val","updateTab","_hoisted_3","MainTab","_hoisted_5","_normalizeClass","_component_a_input","_cache","SearchOutlined","Square","PublicNetworkCheck"],"mappings":"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"}