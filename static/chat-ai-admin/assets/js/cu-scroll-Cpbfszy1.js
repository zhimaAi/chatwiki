const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/auto-track-CW7s4n7F.js","assets/js/vue-chunks-Ci-XTWEs.js","assets/js/index-Ds5Umk46.js","assets/js/utils-ChQO-_r6.js","index-BLRnoXQj.js","assets/js/ui-antd-BKz8sshA.js","assets/css/index-CoP2w4Sj.css","assets/js/pull-up.esm-D94Swpvl.js","assets/js/observe-dom.esm-CyCedSm-.js","assets/js/index-CgiY5jg2.js","assets/js/index-gm6s6Wda.js","assets/js/is-plan-event-enabled-DS1Agtkw.js","assets/js/index-DGsdK8dr.js","assets/js/index-B9euw0JY.js","assets/js/index-DRvwagQ9.js"])))=>i.map(i=>d[i]);
var CC=Object.defineProperty;var PC=(r,e,t)=>e in r?CC(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Rn=(r,e,t)=>PC(r,typeof e!="symbol"?e+"":e,t);import{K as r0,S as Ky,R as AC,Y as Jg,_ as ey,a5 as td,n as RC,a7 as N1,A as IC,F as kC,a9 as DC,e as MC,k as J0,f as LC,o as NC,y as jC,D as BC,a3 as FC}from"./vue-chunks-Ci-XTWEs.js";import{r as tl}from"./index-Ds5Umk46.js";import{a as $l,b as Hw,d as UC}from"../../index-BLRnoXQj.js";import{B as Rp,M as zC,S as GC,P as VC}from"./pull-up.esm-D94Swpvl.js";import{O as qC}from"./observe-dom.esm-CyCedSm-.js";function bw(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function WC(r){if(Array.isArray(r))return r}function HC(r){if(Array.isArray(r))return bw(r)}function dd(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function YC(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,AS(n.key),n)}}function vd(r,e,t){return e&&YC(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function Gs(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=Yw(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,o=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{o||t.return==null||t.return()}finally{if(s)throw a}}}}function PS(r,e,t){return(e=AS(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function XC(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function KC(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,a,o,s=[],u=!0,l=!1;try{if(a=(t=t.call(r)).next,e===0){if(Object(t)!==t)return;u=!1}else for(;!(u=(n=a.call(t)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}function $C(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZC(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lo(r,e){return WC(r)||KC(r,e)||Yw(r,e)||$C()}function Bm(r){return HC(r)||XC(r)||Yw(r)||ZC()}function QC(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function AS(r){var e=QC(r,"string");return typeof e=="symbol"?e:e+""}function Bo(r){"@babel/helpers - typeof";return Bo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bo(r)}function Yw(r,e){if(r){if(typeof r=="string")return bw(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?bw(r,e):void 0}}var Mo=typeof window>"u"?null:window,j1=Mo?Mo.navigator:null;Mo&&Mo.document;var JC=Bo(""),RS=Bo({}),eP=Bo(function(){}),tP=typeof HTMLElement>"u"?"undefined":Bo(HTMLElement),gy=function(e){return e&&e.instanceString&&Wi(e.instanceString)?e.instanceString():null},yr=function(e){return e!=null&&Bo(e)==JC},Wi=function(e){return e!=null&&Bo(e)===eP},di=function(e){return!Eu(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},wn=function(e){return e!=null&&Bo(e)===RS&&!di(e)&&e.constructor===Object},rP=function(e){return e!=null&&Bo(e)===RS},Gt=function(e){return e!=null&&Bo(e)===Bo(1)&&!isNaN(e)},nP=function(e){return Gt(e)&&Math.floor(e)===e},Fm=function(e){if(tP!=="undefined")return e!=null&&e instanceof HTMLElement},Eu=function(e){return yy(e)||IS(e)},yy=function(e){return gy(e)==="collection"&&e._private.single},IS=function(e){return gy(e)==="collection"&&!e._private.single},Xw=function(e){return gy(e)==="core"},kS=function(e){return gy(e)==="stylesheet"},iP=function(e){return gy(e)==="event"},od=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},oP=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},aP=function(e){return wn(e)&&Gt(e.x1)&&Gt(e.x2)&&Gt(e.y1)&&Gt(e.y2)},sP=function(e){return rP(e)&&Wi(e.then)},uP=function(){return j1&&j1.userAgent.match(/msie|trident|edge/i)},eg=function(e,t){t||(t=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var a=[],o=0;o<arguments.length;o++)a.push(arguments[o]);return a.join("$")});var n=function(){var a=this,o=arguments,s,u=t.apply(a,o),l=n.cache;return(s=l[u])||(s=l[u]=e.apply(a,o)),s};return n.cache={},n},Kw=eg(function(r){return r.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),n0=eg(function(r){return r.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),DS=eg(function(r,e){return r+e[0].toUpperCase()+e.substring(1)},function(r,e){return r+"$"+e}),B1=function(e){return od(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},No="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",lP="rgb[a]?\\(("+No+"[%]?)\\s*,\\s*("+No+"[%]?)\\s*,\\s*("+No+"[%]?)(?:\\s*,\\s*("+No+"))?\\)",cP="rgb[a]?\\((?:"+No+"[%]?)\\s*,\\s*(?:"+No+"[%]?)\\s*,\\s*(?:"+No+"[%]?)(?:\\s*,\\s*(?:"+No+"))?\\)",fP="hsl[a]?\\(("+No+")\\s*,\\s*("+No+"[%])\\s*,\\s*("+No+"[%])(?:\\s*,\\s*("+No+"))?\\)",hP="hsl[a]?\\((?:"+No+")\\s*,\\s*(?:"+No+"[%])\\s*,\\s*(?:"+No+"[%])(?:\\s*,\\s*(?:"+No+"))?\\)",dP="\\#[0-9a-fA-F]{3}",vP="\\#[0-9a-fA-F]{6}",MS=function(e,t){return e<t?-1:e>t?1:0},pP=function(e,t){return-1*MS(e,t)},xr=Object.assign!=null?Object.assign.bind(Object):function(r){for(var e=arguments,t=1;t<e.length;t++){var n=e[t];if(n!=null)for(var i=Object.keys(n),a=0;a<i.length;a++){var o=i[a];r[o]=n[o]}}return r},gP=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var t=e.length===4,n,i,a,o=16;return t?(n=parseInt(e[1]+e[1],o),i=parseInt(e[2]+e[2],o),a=parseInt(e[3]+e[3],o)):(n=parseInt(e[1]+e[2],o),i=parseInt(e[3]+e[4],o),a=parseInt(e[5]+e[6],o)),[n,i,a]}},yP=function(e){var t,n,i,a,o,s,u,l;function c(v,y,w){return w<0&&(w+=1),w>1&&(w-=1),w<1/6?v+(y-v)*6*w:w<1/2?y:w<2/3?v+(y-v)*(2/3-w)*6:v}var f=new RegExp("^"+fP+"$").exec(e);if(f){if(n=parseInt(f[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,i=parseFloat(f[2]),i<0||i>100||(i=i/100,a=parseFloat(f[3]),a<0||a>100)||(a=a/100,o=f[4],o!==void 0&&(o=parseFloat(o),o<0||o>1)))return;if(i===0)s=u=l=Math.round(a*255);else{var h=a<.5?a*(1+i):a+i-a*i,d=2*a-h;s=Math.round(255*c(d,h,n+1/3)),u=Math.round(255*c(d,h,n)),l=Math.round(255*c(d,h,n-1/3))}t=[s,u,l,o]}return t},mP=function(e){var t,n=new RegExp("^"+lP+"$").exec(e);if(n){t=[];for(var i=[],a=1;a<=3;a++){var o=n[a];if(o[o.length-1]==="%"&&(i[a]=!0),o=parseFloat(o),i[a]&&(o=o/100*255),o<0||o>255)return;t.push(Math.floor(o))}var s=i[1]||i[2]||i[3],u=i[1]&&i[2]&&i[3];if(s&&!u)return;var l=n[4];if(l!==void 0){if(l=parseFloat(l),l<0||l>1)return;t.push(l)}}return t},bP=function(e){return _P[e.toLowerCase()]},LS=function(e){return(di(e)?e:null)||bP(e)||gP(e)||mP(e)||yP(e)},_P={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},NS=function(e){for(var t=e.map,n=e.keys,i=n.length,a=0;a<i;a++){var o=n[a];if(wn(o))throw Error("Tried to set map with object key");a<n.length-1?(t[o]==null&&(t[o]={}),t=t[o]):t[o]=e.value}},jS=function(e){for(var t=e.map,n=e.keys,i=n.length,a=0;a<i;a++){var o=n[a];if(wn(o))throw Error("Tried to get map with object key");if(t=t[o],t==null)return t}return t},$y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function my(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var eb,F1;function by(){if(F1)return eb;F1=1;function r(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return eb=r,eb}var tb,U1;function wP(){if(U1)return tb;U1=1;var r=typeof $y=="object"&&$y&&$y.Object===Object&&$y;return tb=r,tb}var rb,z1;function i0(){if(z1)return rb;z1=1;var r=wP(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=r||e||Function("return this")();return rb=t,rb}var nb,G1;function EP(){if(G1)return nb;G1=1;var r=i0(),e=function(){return r.Date.now()};return nb=e,nb}var ib,V1;function xP(){if(V1)return ib;V1=1;var r=/\s/;function e(t){for(var n=t.length;n--&&r.test(t.charAt(n)););return n}return ib=e,ib}var ob,q1;function OP(){if(q1)return ob;q1=1;var r=xP(),e=/^\s+/;function t(n){return n&&n.slice(0,r(n)+1).replace(e,"")}return ob=t,ob}var ab,W1;function $w(){if(W1)return ab;W1=1;var r=i0(),e=r.Symbol;return ab=e,ab}var sb,H1;function SP(){if(H1)return sb;H1=1;var r=$w(),e=Object.prototype,t=e.hasOwnProperty,n=e.toString,i=r?r.toStringTag:void 0;function a(o){var s=t.call(o,i),u=o[i];try{o[i]=void 0;var l=!0}catch{}var c=n.call(o);return l&&(s?o[i]=u:delete o[i]),c}return sb=a,sb}var ub,Y1;function TP(){if(Y1)return ub;Y1=1;var r=Object.prototype,e=r.toString;function t(n){return e.call(n)}return ub=t,ub}var lb,X1;function BS(){if(X1)return lb;X1=1;var r=$w(),e=SP(),t=TP(),n="[object Null]",i="[object Undefined]",a=r?r.toStringTag:void 0;function o(s){return s==null?s===void 0?i:n:a&&a in Object(s)?e(s):t(s)}return lb=o,lb}var cb,K1;function CP(){if(K1)return cb;K1=1;function r(e){return e!=null&&typeof e=="object"}return cb=r,cb}var fb,$1;function _y(){if($1)return fb;$1=1;var r=BS(),e=CP(),t="[object Symbol]";function n(i){return typeof i=="symbol"||e(i)&&r(i)==t}return fb=n,fb}var hb,Z1;function PP(){if(Z1)return hb;Z1=1;var r=OP(),e=by(),t=_y(),n=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt;function u(l){if(typeof l=="number")return l;if(t(l))return n;if(e(l)){var c=typeof l.valueOf=="function"?l.valueOf():l;l=e(c)?c+"":c}if(typeof l!="string")return l===0?l:+l;l=r(l);var f=a.test(l);return f||o.test(l)?s(l.slice(2),f?2:8):i.test(l)?n:+l}return hb=u,hb}var db,Q1;function AP(){if(Q1)return db;Q1=1;var r=by(),e=EP(),t=PP(),n="Expected a function",i=Math.max,a=Math.min;function o(s,u,l){var c,f,h,d,v,y,w=0,b=!1,p=!1,m=!0;if(typeof s!="function")throw new TypeError(n);u=t(u)||0,r(l)&&(b=!!l.leading,p="maxWait"in l,h=p?i(t(l.maxWait)||0,u):h,m="trailing"in l?!!l.trailing:m);function x(z){var W=c,Z=f;return c=f=void 0,w=z,d=s.apply(Z,W),d}function T(z){return w=z,v=setTimeout(R,u),b?x(z):d}function P(z){var W=z-y,Z=z-w,Q=u-W;return p?a(Q,h-Z):Q}function C(z){var W=z-y,Z=z-w;return y===void 0||W>=u||W<0||p&&Z>=h}function R(){var z=e();if(C(z))return D(z);v=setTimeout(R,P(z))}function D(z){return v=void 0,m&&c?x(z):(c=f=void 0,d)}function N(){v!==void 0&&clearTimeout(v),w=0,c=y=f=v=void 0}function j(){return v===void 0?d:D(e())}function B(){var z=e(),W=C(z);if(c=arguments,f=this,y=z,W){if(v===void 0)return T(y);if(p)return clearTimeout(v),v=setTimeout(R,u),x(y)}return v===void 0&&(v=setTimeout(R,u)),d}return B.cancel=N,B.flush=j,B}return db=o,db}var RP=AP(),wy=my(RP),vb=Mo?Mo.performance:null,FS=vb&&vb.now?function(){return vb.now()}:function(){return Date.now()},IP=function(){if(Mo){if(Mo.requestAnimationFrame)return function(r){Mo.requestAnimationFrame(r)};if(Mo.mozRequestAnimationFrame)return function(r){Mo.mozRequestAnimationFrame(r)};if(Mo.webkitRequestAnimationFrame)return function(r){Mo.webkitRequestAnimationFrame(r)};if(Mo.msRequestAnimationFrame)return function(r){Mo.msRequestAnimationFrame(r)}}return function(r){r&&setTimeout(function(){r(FS())},1e3/60)}}(),Um=function(e){return IP(e)},th=FS,Rv=9261,US=65599,Vp=5381,zS=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Rv,n=t,i;i=e.next(),!i.done;)n=n*US+i.value|0;return n},oy=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Rv;return t*US+e|0},ay=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Vp;return(t<<5)+t+e|0},kP=function(e,t){return e*2097152+t},Qh=function(e){return e[0]*2097152+e[1]},Zy=function(e,t){return[oy(e[0],t[0]),ay(e[1],t[1])]},J1=function(e,t){var n={value:0,done:!1},i=0,a=e.length,o={next:function(){return i<a?n.value=e[i++]:n.done=!0,n}};return zS(o,t)},Lv=function(e,t){var n={value:0,done:!1},i=0,a=e.length,o={next:function(){return i<a?n.value=e.charCodeAt(i++):n.done=!0,n}};return zS(o,t)},GS=function(){return DP(arguments)},DP=function(e){for(var t,n=0;n<e.length;n++){var i=e[n];n===0?t=Lv(i):t=Lv(i,t)}return t},eE=!0,MP=console.warn!=null,LP=console.trace!=null,Zw=Number.MAX_SAFE_INTEGER||9007199254740991,VS=function(){return!0},zm=function(){return!1},tE=function(){return 0},Qw=function(){},qi=function(e){throw new Error(e)},qS=function(e){if(e!==void 0)eE=!!e;else return eE},Fn=function(e){qS()&&(MP?console.warn(e):LP&&console.trace())},NP=function(e){return xr({},e)},Yc=function(e){return e==null?e:di(e)?e.slice():wn(e)?NP(e):e},jP=function(e){return e.slice()},WS=function(e,t){for(t=e="";e++<36;t+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return t},BP={},HS=function(){return BP},Oa=function(e){var t=Object.keys(e);return function(n){for(var i={},a=0;a<t.length;a++){var o=t[a],s=n==null?void 0:n[o];i[o]=s===void 0?e[o]:s}return i}},ad=function(e,t,n){for(var i=e.length-1;i>=0;i--)e[i]===t&&e.splice(i,1)},Jw=function(e){e.splice(0,e.length)},FP=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];e.push(i)}},Fs=function(e,t,n){return n&&(t=DS(n,t)),e[t]},$f=function(e,t,n,i){n&&(t=DS(n,t)),e[t]=i},UP=function(){function r(){dd(this,r),this._obj={}}return vd(r,[{key:"set",value:function(t,n){return this._obj[t]=n,this}},{key:"delete",value:function(t){return this._obj[t]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(t){return this._obj[t]!==void 0}},{key:"get",value:function(t){return this._obj[t]}}])}(),Jf=typeof Map<"u"?Map:UP,zP="undefined",GP=function(){function r(e){if(dd(this,r),this._obj=Object.create(null),this.size=0,e!=null){var t;e.instanceString!=null&&e.instanceString()===this.instanceString()?t=e.toArray():t=e;for(var n=0;n<t.length;n++)this.add(t[n])}}return vd(r,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(t){var n=this._obj;n[t]!==1&&(n[t]=1,this.size++)}},{key:"delete",value:function(t){var n=this._obj;n[t]===1&&(n[t]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(t){return this._obj[t]===1}},{key:"toArray",value:function(){var t=this;return Object.keys(this._obj).filter(function(n){return t.has(n)})}},{key:"forEach",value:function(t,n){return this.toArray().forEach(t,n)}}])}(),og=(typeof Set>"u"?"undefined":Bo(Set))!==zP?Set:GP,o0=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||t===void 0||!Xw(e)){qi("An element must have a core reference and parameters set");return}var i=t.group;if(i==null&&(t.data&&t.data.source!=null&&t.data.target!=null?i="edges":i="nodes"),i!=="nodes"&&i!=="edges"){qi("An element must be of type `nodes` or `edges`; you specified `"+i+"`");return}this.length=1,this[0]=this;var a=this._private={cy:e,single:!0,data:t.data||{},position:t.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:i,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!t.selected,selectable:t.selectable===void 0?!0:!!t.selectable,locked:!!t.locked,grabbed:!1,grabbable:t.grabbable===void 0?!0:!!t.grabbable,pannable:t.pannable===void 0?i==="edges":!!t.pannable,active:!1,classes:new og,animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[],parent:t.parent&&t.parent.isNode()?t.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(a.position.x==null&&(a.position.x=0),a.position.y==null&&(a.position.y=0),t.renderedPosition){var o=t.renderedPosition,s=e.pan(),u=e.zoom();a.position={x:(o.x-s.x)/u,y:(o.y-s.y)/u}}var l=[];di(t.classes)?l=t.classes:yr(t.classes)&&(l=t.classes.split(/\s+/));for(var c=0,f=l.length;c<f;c++){var h=l[c];!h||h===""||a.classes.add(h)}this.createEmitter(),(n===void 0||n)&&this.restore();var d=t.style||t.css;d&&(Fn("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(d))},rE=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(n,i,a){var o;wn(n)&&!Eu(n)&&(o=n,n=o.roots||o.root,i=o.visit,a=o.directed),a=arguments.length===2&&!Wi(i)?i:a,i=Wi(i)?i:function(){};for(var s=this._private.cy,u=n=yr(n)?this.filter(n):n,l=[],c=[],f={},h={},d={},v=0,y,w=this.byGroup(),b=w.nodes,p=w.edges,m=0;m<u.length;m++){var x=u[m],T=x.id();x.isNode()&&(l.unshift(x),e.bfs&&(d[T]=!0,c.push(x)),h[T]=0)}for(var P=function(){var z=e.bfs?l.shift():l.pop(),W=z.id();if(e.dfs){if(d[W])return 0;d[W]=!0,c.push(z)}var Z=h[W],Q=f[W],re=Q!=null?Q.source():null,ee=Q!=null?Q.target():null,ue=Q==null?void 0:z.same(re)?ee[0]:re[0],de;if(de=i(z,Q,ue,v++,Z),de===!0)return y=z,1;if(de===!1)return 1;for(var se=z.connectedEdges().filter(function(Ee){return(!a||Ee.source().same(z))&&p.has(Ee)}),me=0;me<se.length;me++){var Me=se[me],he=Me.connectedNodes().filter(function(Ee){return!Ee.same(z)&&b.has(Ee)}),fe=he.id();he.length!==0&&!d[fe]&&(he=he[0],l.push(he),e.bfs&&(d[fe]=!0,c.push(he)),f[fe]=Me,h[fe]=h[W]+1)}},C;l.length!==0&&(C=P(),!(C!==0&&C===1)););for(var R=s.collection(),D=0;D<c.length;D++){var N=c[D],j=f[N.id()];j!=null&&R.push(j),R.push(N)}return{path:s.collection(R),found:s.collection(y)}}},sy={breadthFirstSearch:rE({bfs:!0}),depthFirstSearch:rE({dfs:!0})};sy.bfs=sy.breadthFirstSearch;sy.dfs=sy.depthFirstSearch;var wm={exports:{}},VP=wm.exports,nE;function qP(){return nE||(nE=1,function(r,e){(function(){var t,n,i,a,o,s,u,l,c,f,h,d,v,y,w;i=Math.floor,f=Math.min,n=function(b,p){return b<p?-1:b>p?1:0},c=function(b,p,m,x,T){var P;if(m==null&&(m=0),T==null&&(T=n),m<0)throw new Error("lo must be non-negative");for(x==null&&(x=b.length);m<x;)P=i((m+x)/2),T(p,b[P])<0?x=P:m=P+1;return[].splice.apply(b,[m,m-m].concat(p)),p},s=function(b,p,m){return m==null&&(m=n),b.push(p),y(b,0,b.length-1,m)},o=function(b,p){var m,x;return p==null&&(p=n),m=b.pop(),b.length?(x=b[0],b[0]=m,w(b,0,p)):x=m,x},l=function(b,p,m){var x;return m==null&&(m=n),x=b[0],b[0]=p,w(b,0,m),x},u=function(b,p,m){var x;return m==null&&(m=n),b.length&&m(b[0],p)<0&&(x=[b[0],p],p=x[0],b[0]=x[1],w(b,0,m)),p},a=function(b,p){var m,x,T,P,C,R;for(p==null&&(p=n),P=(function(){R=[];for(var D=0,N=i(b.length/2);0<=N?D<N:D>N;0<=N?D++:D--)R.push(D);return R}).apply(this).reverse(),C=[],x=0,T=P.length;x<T;x++)m=P[x],C.push(w(b,m,p));return C},v=function(b,p,m){var x;if(m==null&&(m=n),x=b.indexOf(p),x!==-1)return y(b,0,x,m),w(b,x,m)},h=function(b,p,m){var x,T,P,C,R;if(m==null&&(m=n),T=b.slice(0,p),!T.length)return T;for(a(T,m),R=b.slice(p),P=0,C=R.length;P<C;P++)x=R[P],u(T,x,m);return T.sort(m).reverse()},d=function(b,p,m){var x,T,P,C,R,D,N,j,B;if(m==null&&(m=n),p*10<=b.length){if(P=b.slice(0,p).sort(m),!P.length)return P;for(T=P[P.length-1],N=b.slice(p),C=0,D=N.length;C<D;C++)x=N[C],m(x,T)<0&&(c(P,x,0,null,m),P.pop(),T=P[P.length-1]);return P}for(a(b,m),B=[],R=0,j=f(p,b.length);0<=j?R<j:R>j;0<=j?++R:--R)B.push(o(b,m));return B},y=function(b,p,m,x){var T,P,C;for(x==null&&(x=n),T=b[m];m>p;){if(C=m-1>>1,P=b[C],x(T,P)<0){b[m]=P,m=C;continue}break}return b[m]=T},w=function(b,p,m){var x,T,P,C,R;for(m==null&&(m=n),T=b.length,R=p,P=b[p],x=2*p+1;x<T;)C=x+1,C<T&&!(m(b[x],b[C])<0)&&(x=C),b[p]=b[x],p=x,x=2*p+1;return b[p]=P,y(b,R,p,m)},t=function(){b.push=s,b.pop=o,b.replace=l,b.pushpop=u,b.heapify=a,b.updateItem=v,b.nlargest=h,b.nsmallest=d;function b(p){this.cmp=p??n,this.nodes=[]}return b.prototype.push=function(p){return s(this.nodes,p,this.cmp)},b.prototype.pop=function(){return o(this.nodes,this.cmp)},b.prototype.peek=function(){return this.nodes[0]},b.prototype.contains=function(p){return this.nodes.indexOf(p)!==-1},b.prototype.replace=function(p){return l(this.nodes,p,this.cmp)},b.prototype.pushpop=function(p){return u(this.nodes,p,this.cmp)},b.prototype.heapify=function(){return a(this.nodes,this.cmp)},b.prototype.updateItem=function(p){return v(this.nodes,p,this.cmp)},b.prototype.clear=function(){return this.nodes=[]},b.prototype.empty=function(){return this.nodes.length===0},b.prototype.size=function(){return this.nodes.length},b.prototype.clone=function(){var p;return p=new b,p.nodes=this.nodes.slice(0),p},b.prototype.toArray=function(){return this.nodes.slice(0)},b.prototype.insert=b.prototype.push,b.prototype.top=b.prototype.peek,b.prototype.front=b.prototype.peek,b.prototype.has=b.prototype.contains,b.prototype.copy=b.prototype.clone,b}(),function(b,p){return r.exports=p()}(this,function(){return t})}).call(VP)}(wm)),wm.exports}var pb,iE;function WP(){return iE||(iE=1,pb=qP()),pb}var HP=WP(),Ey=my(HP),YP=Oa({root:null,weight:function(e){return 1},directed:!1}),XP={dijkstra:function(e){if(!wn(e)){var t=arguments;e={root:t[0],weight:t[1],directed:t[2]}}var n=YP(e),i=n.root,a=n.weight,o=n.directed,s=this,u=a,l=yr(i)?this.filter(i)[0]:i[0],c={},f={},h={},d=this.byGroup(),v=d.nodes,y=d.edges;y.unmergeBy(function(Z){return Z.isLoop()});for(var w=function(Q){return c[Q.id()]},b=function(Q,re){c[Q.id()]=re,p.updateItem(Q)},p=new Ey(function(Z,Q){return w(Z)-w(Q)}),m=0;m<v.length;m++){var x=v[m];c[x.id()]=x.same(l)?0:1/0,p.push(x)}for(var T=function(Q,re){for(var ee=(o?Q.edgesTo(re):Q.edgesWith(re)).intersect(y),ue=1/0,de,se=0;se<ee.length;se++){var me=ee[se],Me=u(me);(Me<ue||!de)&&(ue=Me,de=me)}return{edge:de,dist:ue}};p.size()>0;){var P=p.pop(),C=w(P),R=P.id();if(h[R]=C,C!==1/0)for(var D=P.neighborhood().intersect(v),N=0;N<D.length;N++){var j=D[N],B=j.id(),z=T(P,j),W=C+z.dist;W<w(j)&&(b(j,W),f[B]={node:P,edge:z.edge})}}return{distanceTo:function(Q){var re=yr(Q)?v.filter(Q)[0]:Q[0];return h[re.id()]},pathTo:function(Q){var re=yr(Q)?v.filter(Q)[0]:Q[0],ee=[],ue=re,de=ue.id();if(re.length>0)for(ee.unshift(re);f[de];){var se=f[de];ee.unshift(se.edge),ee.unshift(se.node),ue=se.node,de=ue.id()}return s.spawn(ee)}}}},KP={kruskal:function(e){e=e||function(m){return 1};for(var t=this.byGroup(),n=t.nodes,i=t.edges,a=n.length,o=new Array(a),s=n,u=function(x){for(var T=0;T<o.length;T++){var P=o[T];if(P.has(x))return T}},l=0;l<a;l++)o[l]=this.spawn(n[l]);for(var c=i.sort(function(m,x){return e(m)-e(x)}),f=0;f<c.length;f++){var h=c[f],d=h.source()[0],v=h.target()[0],y=u(d),w=u(v),b=o[y],p=o[w];y!==w&&(s.merge(h),b.merge(p),o.splice(w,1))}return s}},$P=Oa({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),ZP={aStar:function(e){var t=this.cy(),n=$P(e),i=n.root,a=n.goal,o=n.heuristic,s=n.directed,u=n.weight;i=t.collection(i)[0],a=t.collection(a)[0];var l=i.id(),c=a.id(),f={},h={},d={},v=new Ey(function(de,se){return h[de.id()]-h[se.id()]}),y=new og,w={},b={},p=function(se,me){v.push(se),y.add(me)},m,x,T=function(){m=v.pop(),x=m.id(),y.delete(x)},P=function(se){return y.has(se)};p(i,l),f[l]=0,h[l]=o(i);for(var C=0;v.size()>0;){if(T(),C++,x===c){for(var R=[],D=a,N=c,j=b[N];R.unshift(D),j!=null&&R.unshift(j),D=w[N],D!=null;)N=D.id(),j=b[N];return{found:!0,distance:f[x],path:this.spawn(R),steps:C}}d[x]=!0;for(var B=m._private.edges,z=0;z<B.length;z++){var W=B[z];if(this.hasElementWithId(W.id())&&!(s&&W.data("source")!==x)){var Z=W.source(),Q=W.target(),re=Z.id()!==x?Z:Q,ee=re.id();if(this.hasElementWithId(ee)&&!d[ee]){var ue=f[x]+u(W);if(!P(ee)){f[ee]=ue,h[ee]=ue+o(re),p(re,ee),w[ee]=m,b[ee]=W;continue}ue<f[ee]&&(f[ee]=ue,h[ee]=ue+o(re),w[ee]=m,b[ee]=W)}}}}return{found:!1,distance:void 0,path:void 0,steps:C}}},QP=Oa({weight:function(e){return 1},directed:!1}),JP={floydWarshall:function(e){for(var t=this.cy(),n=QP(e),i=n.weight,a=n.directed,o=i,s=this.byGroup(),u=s.nodes,l=s.edges,c=u.length,f=c*c,h=function(Me){return u.indexOf(Me)},d=function(Me){return u[Me]},v=new Array(f),y=0;y<f;y++){var w=y%c,b=(y-w)/c;b===w?v[y]=0:v[y]=1/0}for(var p=new Array(f),m=new Array(f),x=0;x<l.length;x++){var T=l[x],P=T.source()[0],C=T.target()[0];if(P!==C){var R=h(P),D=h(C),N=R*c+D,j=o(T);if(v[N]>j&&(v[N]=j,p[N]=D,m[N]=T),!a){var B=D*c+R;!a&&v[B]>j&&(v[B]=j,p[B]=R,m[B]=T)}}}for(var z=0;z<c;z++)for(var W=0;W<c;W++)for(var Z=W*c+z,Q=0;Q<c;Q++){var re=W*c+Q,ee=z*c+Q;v[Z]+v[ee]<v[re]&&(v[re]=v[Z]+v[ee],p[re]=p[Z])}var ue=function(Me){return(yr(Me)?t.filter(Me):Me)[0]},de=function(Me){return h(ue(Me))},se={distance:function(Me,he){var fe=de(Me),Ee=de(he);return v[fe*c+Ee]},path:function(Me,he){var fe=de(Me),Ee=de(he),Ce=d(fe);if(fe===Ee)return Ce.collection();if(p[fe*c+Ee]==null)return t.collection();var ke=t.collection(),Re=fe,ve;for(ke.merge(Ce);fe!==Ee;)Re=fe,fe=p[fe*c+Ee],ve=m[Re*c+fe],ke.merge(ve),ke.merge(d(fe));return ke}};return se}},eA=Oa({weight:function(e){return 1},directed:!1,root:null}),tA={bellmanFord:function(e){var t=this,n=eA(e),i=n.weight,a=n.directed,o=n.root,s=i,u=this,l=this.cy(),c=this.byGroup(),f=c.edges,h=c.nodes,d=h.length,v=new Jf,y=!1,w=[];o=l.collection(o)[0],f.unmergeBy(function(ct){return ct.isLoop()});for(var b=f.length,p=function(H){var $=v.get(H.id());return $||($={},v.set(H.id(),$)),$},m=function(H){return(yr(H)?l.$(H):H)[0]},x=function(H){return p(m(H)).dist},T=function(H){for(var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,ne=m(H),Ie=[],Le=ne;;){if(Le==null)return t.spawn();var ze=p(Le),Je=ze.edge,Pt=ze.pred;if(Ie.unshift(Le[0]),Le.same($)&&Ie.length>0)break;Je!=null&&Ie.unshift(Je),Le=Pt}return u.spawn(Ie)},P=0;P<d;P++){var C=h[P],R=p(C);C.same(o)?R.dist=0:R.dist=1/0,R.pred=null,R.edge=null}for(var D=!1,N=function(H,$,ne,Ie,Le,ze){var Je=Ie.dist+ze;Je<Le.dist&&!ne.same(Ie.edge)&&(Le.dist=Je,Le.pred=H,Le.edge=ne,D=!0)},j=1;j<d;j++){D=!1;for(var B=0;B<b;B++){var z=f[B],W=z.source(),Z=z.target(),Q=s(z),re=p(W),ee=p(Z);N(W,Z,z,re,ee,Q),a||N(Z,W,z,ee,re,Q)}if(!D)break}if(D)for(var ue=[],de=0;de<b;de++){var se=f[de],me=se.source(),Me=se.target(),he=s(se),fe=p(me).dist,Ee=p(Me).dist;if(fe+he<Ee||!a&&Ee+he<fe)if(y||(Fn("Graph contains a negative weight cycle for Bellman-Ford"),y=!0),e.findNegativeWeightCycles!==!1){var Ce=[];fe+he<Ee&&Ce.push(me),!a&&Ee+he<fe&&Ce.push(Me);for(var ke=Ce.length,Re=0;Re<ke;Re++){var ve=Ce[Re],we=[ve];we.push(p(ve).edge);for(var Oe=p(ve).pred;we.indexOf(Oe)===-1;)we.push(Oe),we.push(p(Oe).edge),Oe=p(Oe).pred;we=we.slice(we.indexOf(Oe));for(var Be=we[0].id(),Ye=0,ht=2;ht<we.length;ht+=2)we[ht].id()<Be&&(Be=we[ht].id(),Ye=ht);we=we.slice(Ye).concat(we.slice(0,Ye)),we.push(we[0]);var Ct=we.map(function(ct){return ct.id()}).join(",");ue.indexOf(Ct)===-1&&(w.push(u.spawn(we)),ue.push(Ct))}}else break}return{distanceTo:x,pathTo:T,hasNegativeWeightCycle:y,negativeWeightCycles:w}}},rA=Math.sqrt(2),nA=function(e,t,n){n.length===0&&qi("Karger-Stein must be run on a connected (sub)graph");for(var i=n[e],a=i[1],o=i[2],s=t[a],u=t[o],l=n,c=l.length-1;c>=0;c--){var f=l[c],h=f[1],d=f[2];(t[h]===s&&t[d]===u||t[h]===u&&t[d]===s)&&l.splice(c,1)}for(var v=0;v<l.length;v++){var y=l[v];y[1]===u?(l[v]=y.slice(),l[v][1]=s):y[2]===u&&(l[v]=y.slice(),l[v][2]=s)}for(var w=0;w<t.length;w++)t[w]===u&&(t[w]=s);return l},gb=function(e,t,n,i){for(;n>i;){var a=Math.floor(Math.random()*t.length);t=nA(a,e,t),n--}return t},iA={kargerStein:function(){var e=this,t=this.byGroup(),n=t.nodes,i=t.edges;i.unmergeBy(function(ee){return ee.isLoop()});var a=n.length,o=i.length,s=Math.ceil(Math.pow(Math.log(a)/Math.LN2,2)),u=Math.floor(a/rA);if(a<2){qi("At least 2 nodes are required for Karger-Stein algorithm");return}for(var l=[],c=0;c<o;c++){var f=i[c];l.push([c,n.indexOf(f.source()),n.indexOf(f.target())])}for(var h=1/0,d=[],v=new Array(a),y=new Array(a),w=new Array(a),b=function(ue,de){for(var se=0;se<a;se++)de[se]=ue[se]},p=0;p<=s;p++){for(var m=0;m<a;m++)y[m]=m;var x=gb(y,l.slice(),a,u),T=x.slice();b(y,w);var P=gb(y,x,u,2),C=gb(w,T,u,2);P.length<=C.length&&P.length<h?(h=P.length,d=P,b(y,v)):C.length<=P.length&&C.length<h&&(h=C.length,d=C,b(w,v))}for(var R=this.spawn(d.map(function(ee){return i[ee[0]]})),D=this.spawn(),N=this.spawn(),j=v[0],B=0;B<v.length;B++){var z=v[B],W=n[B];z===j?D.merge(W):N.merge(W)}var Z=function(ue){var de=e.spawn();return ue.forEach(function(se){de.merge(se),se.connectedEdges().forEach(function(me){e.contains(me)&&!R.contains(me)&&de.merge(me)})}),de},Q=[Z(D),Z(N)],re={cut:R,components:Q,partition1:D,partition2:N};return re}},oA=function(e){return{x:e.x,y:e.y}},a0=function(e,t,n){return{x:e.x*t+n.x,y:e.y*t+n.y}},YS=function(e,t,n){return{x:(e.x-n.x)/t,y:(e.y-n.y)/t}},qp=function(e){return{x:e[0],y:e[1]}},aA=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=1/0,a=t;a<n;a++){var o=e[a];isFinite(o)&&(i=Math.min(o,i))}return i},sA=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=-1/0,a=t;a<n;a++){var o=e[a];isFinite(o)&&(i=Math.max(o,i))}return i},uA=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=0,a=0,o=t;o<n;o++){var s=e[o];isFinite(s)&&(i+=s,a++)}return i/a},lA=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;i?e=e.slice(t,n):(n<e.length&&e.splice(n,e.length-n),t>0&&e.splice(0,t));for(var s=0,u=e.length-1;u>=0;u--){var l=e[u];o?isFinite(l)||(e[u]=-1/0,s++):e.splice(u,1)}a&&e.sort(function(h,d){return h-d});var c=e.length,f=Math.floor(c/2);return c%2!==0?e[f+1+s]:(e[f-1+s]+e[f+s])/2},cA=function(e){return Math.PI*e/180},Qy=function(e,t){return Math.atan2(t,e)-Math.PI/2},e1=Math.log2||function(r){return Math.log(r)/Math.log(2)},t1=function(e){return e>0?1:e<0?-1:0},Nv=function(e,t){return Math.sqrt(Cv(e,t))},Cv=function(e,t){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i},fA=function(e){for(var t=e.length,n=0,i=0;i<t;i++)n+=e[i];for(var a=0;a<t;a++)e[a]=e[a]/n;return e},ea=function(e,t,n,i){return(1-i)*(1-i)*e+2*(1-i)*i*t+i*i*n},Xp=function(e,t,n,i){return{x:ea(e.x,t.x,n.x,i),y:ea(e.y,t.y,n.y,i)}},hA=function(e,t,n,i){var a={x:t.x-e.x,y:t.y-e.y},o=Nv(e,t),s={x:a.x/o,y:a.y/o};return n=n??0,i=i??n*o,{x:e.x+s.x*i,y:e.y+s.y*i}},uy=function(e,t,n){return Math.max(e,Math.min(n,t))},qs=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},dA=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},vA=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},pA=function(e,t,n){return{x1:e.x1+t,x2:e.x2+t,y1:e.y1+n,y2:e.y2+n,w:e.w,h:e.h}},XS=function(e,t){e.x1=Math.min(e.x1,t.x1),e.x2=Math.max(e.x2,t.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,t.y1),e.y2=Math.max(e.y2,t.y2),e.h=e.y2-e.y1},gA=function(e,t,n){e.x1=Math.min(e.x1,t),e.x2=Math.max(e.x2,t),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},Em=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=t,e.x2+=t,e.y1-=t,e.y2+=t,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},xm=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,i,a,o;if(t.length===1)n=i=a=o=t[0];else if(t.length===2)n=a=t[0],o=i=t[1];else if(t.length===4){var s=Lo(t,4);n=s[0],i=s[1],a=s[2],o=s[3]}return e.x1-=o,e.x2+=i,e.y1-=n,e.y2+=a,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},oE=function(e,t){e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},r1=function(e,t){return!(e.x1>t.x2||t.x1>e.x2||e.x2<t.x1||t.x2<e.x1||e.y2<t.y1||t.y2<e.y1||e.y1>t.y2||t.y1>e.y2)},tg=function(e,t,n){return e.x1<=t&&t<=e.x2&&e.y1<=n&&n<=e.y2},yA=function(e,t){return tg(e,t.x,t.y)},mA=function(e,t){return tg(e,t.x1,t.y1)&&tg(e,t.x2,t.y2)},KS=function(e,t,n,i,a,o,s){var u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",l=u==="auto"?sd(a,o):u,c=a/2,f=o/2;l=Math.min(l,c,f);var h=l!==c,d=l!==f,v;if(h){var y=n-c+l-s,w=i-f-s,b=n+c-l+s,p=w;if(v=rd(e,t,n,i,y,w,b,p,!1),v.length>0)return v}if(d){var m=n+c+s,x=i-f+l-s,T=m,P=i+f-l+s;if(v=rd(e,t,n,i,m,x,T,P,!1),v.length>0)return v}if(h){var C=n-c+l-s,R=i+f+s,D=n+c-l+s,N=R;if(v=rd(e,t,n,i,C,R,D,N,!1),v.length>0)return v}if(d){var j=n-c-s,B=i-f+l-s,z=j,W=i+f-l+s;if(v=rd(e,t,n,i,j,B,z,W,!1),v.length>0)return v}var Z;{var Q=n-c+l,re=i-f+l;if(Z=Xg(e,t,n,i,Q,re,l+s),Z.length>0&&Z[0]<=Q&&Z[1]<=re)return[Z[0],Z[1]]}{var ee=n+c-l,ue=i-f+l;if(Z=Xg(e,t,n,i,ee,ue,l+s),Z.length>0&&Z[0]>=ee&&Z[1]<=ue)return[Z[0],Z[1]]}{var de=n+c-l,se=i+f-l;if(Z=Xg(e,t,n,i,de,se,l+s),Z.length>0&&Z[0]>=de&&Z[1]>=se)return[Z[0],Z[1]]}{var me=n-c+l,Me=i+f-l;if(Z=Xg(e,t,n,i,me,Me,l+s),Z.length>0&&Z[0]<=me&&Z[1]>=Me)return[Z[0],Z[1]]}return[]},bA=function(e,t,n,i,a,o,s){var u=s,l=Math.min(n,a),c=Math.max(n,a),f=Math.min(i,o),h=Math.max(i,o);return l-u<=e&&e<=c+u&&f-u<=t&&t<=h+u},_A=function(e,t,n,i,a,o,s,u,l){var c={x1:Math.min(n,s,a)-l,x2:Math.max(n,s,a)+l,y1:Math.min(i,u,o)-l,y2:Math.max(i,u,o)+l};return!(e<c.x1||e>c.x2||t<c.y1||t>c.y2)},wA=function(e,t,n,i){n-=i;var a=t*t-4*e*n;if(a<0)return[];var o=Math.sqrt(a),s=2*e,u=(-t+o)/s,l=(-t-o)/s;return[u,l]},EA=function(e,t,n,i,a){var o=1e-5;e===0&&(e=o),t/=e,n/=e,i/=e;var s,u,l,c,f,h,d,v;if(u=(3*n-t*t)/9,l=-(27*i)+t*(9*n-2*(t*t)),l/=54,s=u*u*u+l*l,a[1]=0,d=t/3,s>0){f=l+Math.sqrt(s),f=f<0?-Math.pow(-f,1/3):Math.pow(f,1/3),h=l-Math.sqrt(s),h=h<0?-Math.pow(-h,1/3):Math.pow(h,1/3),a[0]=-d+f+h,d+=(f+h)/2,a[4]=a[2]=-d,d=Math.sqrt(3)*(-h+f)/2,a[3]=d,a[5]=-d;return}if(a[5]=a[3]=0,s===0){v=l<0?-Math.pow(-l,1/3):Math.pow(l,1/3),a[0]=-d+2*v,a[4]=a[2]=-(v+d);return}u=-u,c=u*u*u,c=Math.acos(l/Math.sqrt(c)),v=2*Math.sqrt(u),a[0]=-d+v*Math.cos(c/3),a[2]=-d+v*Math.cos((c+2*Math.PI)/3),a[4]=-d+v*Math.cos((c+4*Math.PI)/3)},xA=function(e,t,n,i,a,o,s,u){var l=1*n*n-4*n*a+2*n*s+4*a*a-4*a*s+s*s+i*i-4*i*o+2*i*u+4*o*o-4*o*u+u*u,c=1*9*n*a-3*n*n-3*n*s-6*a*a+3*a*s+9*i*o-3*i*i-3*i*u-6*o*o+3*o*u,f=1*3*n*n-6*n*a+n*s-n*e+2*a*a+2*a*e-s*e+3*i*i-6*i*o+i*u-i*t+2*o*o+2*o*t-u*t,h=1*n*a-n*n+n*e-a*e+i*o-i*i+i*t-o*t,d=[];EA(l,c,f,h,d);for(var v=1e-7,y=[],w=0;w<6;w+=2)Math.abs(d[w+1])<v&&d[w]>=0&&d[w]<=1&&y.push(d[w]);y.push(1),y.push(0);for(var b=-1,p,m,x,T=0;T<y.length;T++)p=Math.pow(1-y[T],2)*n+2*(1-y[T])*y[T]*a+y[T]*y[T]*s,m=Math.pow(1-y[T],2)*i+2*(1-y[T])*y[T]*o+y[T]*y[T]*u,x=Math.pow(p-e,2)+Math.pow(m-t,2),b>=0?x<b&&(b=x):b=x;return b},OA=function(e,t,n,i,a,o){var s=[e-n,t-i],u=[a-n,o-i],l=u[0]*u[0]+u[1]*u[1],c=s[0]*s[0]+s[1]*s[1],f=s[0]*u[0]+s[1]*u[1],h=f*f/l;return f<0?c:h>l?(e-a)*(e-a)+(t-o)*(t-o):c-h},Us=function(e,t,n){for(var i,a,o,s,u,l=0,c=0;c<n.length/2;c++)if(i=n[c*2],a=n[c*2+1],c+1<n.length/2?(o=n[(c+1)*2],s=n[(c+1)*2+1]):(o=n[(c+1-n.length/2)*2],s=n[(c+1-n.length/2)*2+1]),!(i==e&&o==e))if(i>=e&&e>=o||i<=e&&e<=o)u=(e-i)/(o-i)*(s-a)+a,u>t&&l++;else continue;return l%2!==0},rh=function(e,t,n,i,a,o,s,u,l){var c=new Array(n.length),f;u[0]!=null?(f=Math.atan(u[1]/u[0]),u[0]<0?f=f+Math.PI/2:f=-f-Math.PI/2):f=u;for(var h=Math.cos(-f),d=Math.sin(-f),v=0;v<c.length/2;v++)c[v*2]=o/2*(n[v*2]*h-n[v*2+1]*d),c[v*2+1]=s/2*(n[v*2+1]*h+n[v*2]*d),c[v*2]+=i,c[v*2+1]+=a;var y;if(l>0){var w=Vm(c,-l);y=Gm(w)}else y=c;return Us(e,t,y)},SA=function(e,t,n,i,a,o,s,u){for(var l=new Array(n.length*2),c=0;c<u.length;c++){var f=u[c];l[c*4+0]=f.startX,l[c*4+1]=f.startY,l[c*4+2]=f.stopX,l[c*4+3]=f.stopY;var h=Math.pow(f.cx-e,2)+Math.pow(f.cy-t,2);if(h<=Math.pow(f.radius,2))return!0}return Us(e,t,l)},Gm=function(e){for(var t=new Array(e.length/2),n,i,a,o,s,u,l,c,f=0;f<e.length/4;f++){n=e[f*4],i=e[f*4+1],a=e[f*4+2],o=e[f*4+3],f<e.length/4-1?(s=e[(f+1)*4],u=e[(f+1)*4+1],l=e[(f+1)*4+2],c=e[(f+1)*4+3]):(s=e[0],u=e[1],l=e[2],c=e[3]);var h=rd(n,i,a,o,s,u,l,c,!0);t[f*2]=h[0],t[f*2+1]=h[1]}return t},Vm=function(e,t){for(var n=new Array(e.length*2),i,a,o,s,u=0;u<e.length/2;u++){i=e[u*2],a=e[u*2+1],u<e.length/2-1?(o=e[(u+1)*2],s=e[(u+1)*2+1]):(o=e[0],s=e[1]);var l=s-a,c=-(o-i),f=Math.sqrt(l*l+c*c),h=l/f,d=c/f;n[u*4]=i+h*t,n[u*4+1]=a+d*t,n[u*4+2]=o+h*t,n[u*4+3]=s+d*t}return n},TA=function(e,t,n,i,a,o){var s=n-e,u=i-t;s/=a,u/=o;var l=Math.sqrt(s*s+u*u),c=l-1;if(c<0)return[];var f=c/l;return[(n-e)*f+e,(i-t)*f+t]},kv=function(e,t,n,i,a,o,s){return e-=a,t-=o,e/=n/2+s,t/=i/2+s,e*e+t*t<=1},Xg=function(e,t,n,i,a,o,s){var u=[n-e,i-t],l=[e-a,t-o],c=u[0]*u[0]+u[1]*u[1],f=2*(l[0]*u[0]+l[1]*u[1]),h=l[0]*l[0]+l[1]*l[1]-s*s,d=f*f-4*c*h;if(d<0)return[];var v=(-f+Math.sqrt(d))/(2*c),y=(-f-Math.sqrt(d))/(2*c),w=Math.min(v,y),b=Math.max(v,y),p=[];if(w>=0&&w<=1&&p.push(w),b>=0&&b<=1&&p.push(b),p.length===0)return[];var m=p[0]*u[0]+e,x=p[0]*u[1]+t;if(p.length>1){if(p[0]==p[1])return[m,x];var T=p[1]*u[0]+e,P=p[1]*u[1]+t;return[m,x,T,P]}else return[m,x]},yb=function(e,t,n){return t<=e&&e<=n||n<=e&&e<=t?e:e<=t&&t<=n||n<=t&&t<=e?t:n},rd=function(e,t,n,i,a,o,s,u,l){var c=e-a,f=n-e,h=s-a,d=t-o,v=i-t,y=u-o,w=h*d-y*c,b=f*d-v*c,p=y*f-h*v;if(p!==0){var m=w/p,x=b/p,T=.001,P=0-T,C=1+T;return P<=m&&m<=C&&P<=x&&x<=C?[e+m*f,t+m*v]:l?[e+m*f,t+m*v]:[]}else return w===0||b===0?yb(e,n,s)===s?[s,u]:yb(e,n,a)===a?[a,o]:yb(a,s,n)===n?[n,i]:[]:[]},ly=function(e,t,n,i,a,o,s,u){var l=[],c,f=new Array(n.length),h=!0;o==null&&(h=!1);var d;if(h){for(var v=0;v<f.length/2;v++)f[v*2]=n[v*2]*o+i,f[v*2+1]=n[v*2+1]*s+a;if(u>0){var y=Vm(f,-u);d=Gm(y)}else d=f}else d=n;for(var w,b,p,m,x=0;x<d.length/2;x++)w=d[x*2],b=d[x*2+1],x<d.length/2-1?(p=d[(x+1)*2],m=d[(x+1)*2+1]):(p=d[0],m=d[1]),c=rd(e,t,i,a,w,b,p,m),c.length!==0&&l.push(c[0],c[1]);return l},CA=function(e,t,n,i,a,o,s,u,l){var c=[],f,h=new Array(n.length*2);l.forEach(function(p,m){m===0?(h[h.length-2]=p.startX,h[h.length-1]=p.startY):(h[m*4-2]=p.startX,h[m*4-1]=p.startY),h[m*4]=p.stopX,h[m*4+1]=p.stopY,f=Xg(e,t,i,a,p.cx,p.cy,p.radius),f.length!==0&&c.push(f[0],f[1])});for(var d=0;d<h.length/4;d++)f=rd(e,t,i,a,h[d*4],h[d*4+1],h[d*4+2],h[d*4+3],!1),f.length!==0&&c.push(f[0],f[1]);if(c.length>2){for(var v=[c[0],c[1]],y=Math.pow(v[0]-e,2)+Math.pow(v[1]-t,2),w=1;w<c.length/2;w++){var b=Math.pow(c[w*2]-e,2)+Math.pow(c[w*2+1]-t,2);b<=y&&(v[0]=c[w*2],v[1]=c[w*2+1],y=b)}return v}return c},Jy=function(e,t,n){var i=[e[0]-t[0],e[1]-t[1]],a=Math.sqrt(i[0]*i[0]+i[1]*i[1]),o=(a-n)/a;return o<0&&(o=1e-5),[t[0]+o*i[0],t[1]+o*i[1]]},ms=function(e,t){var n=_w(e,t);return n=$S(n),n},$S=function(e){for(var t,n,i=e.length/2,a=1/0,o=1/0,s=-1/0,u=-1/0,l=0;l<i;l++)t=e[2*l],n=e[2*l+1],a=Math.min(a,t),s=Math.max(s,t),o=Math.min(o,n),u=Math.max(u,n);for(var c=2/(s-a),f=2/(u-o),h=0;h<i;h++)t=e[2*h]=e[2*h]*c,n=e[2*h+1]=e[2*h+1]*f,a=Math.min(a,t),s=Math.max(s,t),o=Math.min(o,n),u=Math.max(u,n);if(o<-1)for(var d=0;d<i;d++)n=e[2*d+1]=e[2*d+1]+(-1-o);return e},_w=function(e,t){var n=1/e*2*Math.PI,i=e%2===0?Math.PI/2+n/2:Math.PI/2;i+=t;for(var a=new Array(e*2),o,s=0;s<e;s++)o=s*n+i,a[2*s]=Math.cos(o),a[2*s+1]=Math.sin(-o);return a},sd=function(e,t){return Math.min(e/4,t/4,8)},ZS=function(e,t){return Math.min(e/10,t/10,8)},n1=function(){return 8},PA=function(e,t,n){return[e-2*t+n,2*(t-e),e]},ww=function(e,t){return{heightOffset:Math.min(15,.05*t),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}};function AA(r,e){function t(f){for(var h=[],d=0;d<f.length;d++){var v=f[d],y=f[(d+1)%f.length],w={x:y.x-v.x,y:y.y-v.y},b={x:-w.y,y:w.x},p=Math.sqrt(b.x*b.x+b.y*b.y);h.push({x:b.x/p,y:b.y/p})}return h}function n(f,h){var d=1/0,v=-1/0,y=Gs(f),w;try{for(y.s();!(w=y.n()).done;){var b=w.value,p=b.x*h.x+b.y*h.y;d=Math.min(d,p),v=Math.max(v,p)}}catch(m){y.e(m)}finally{y.f()}return{min:d,max:v}}function i(f,h){return!(f.max<h.min||h.max<f.min)}var a=[].concat(Bm(t(r)),Bm(t(e))),o=Gs(a),s;try{for(o.s();!(s=o.n()).done;){var u=s.value,l=n(r,u),c=n(e,u);if(!i(l,c))return!1}}catch(f){o.e(f)}finally{o.f()}return!0}var RA=Oa({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),IA={pageRank:function(e){for(var t=RA(e),n=t.dampingFactor,i=t.precision,a=t.iterations,o=t.weight,s=this._private.cy,u=this.byGroup(),l=u.nodes,c=u.edges,f=l.length,h=f*f,d=c.length,v=new Array(h),y=new Array(f),w=(1-n)/f,b=0;b<f;b++){for(var p=0;p<f;p++){var m=b*f+p;v[m]=0}y[b]=0}for(var x=0;x<d;x++){var T=c[x],P=T.data("source"),C=T.data("target");if(P!==C){var R=l.indexOfId(P),D=l.indexOfId(C),N=o(T),j=D*f+R;v[j]+=N,y[R]+=N}}for(var B=1/f+w,z=0;z<f;z++)if(y[z]===0)for(var W=0;W<f;W++){var Z=W*f+z;v[Z]=B}else for(var Q=0;Q<f;Q++){var re=Q*f+z;v[re]=v[re]/y[z]+w}for(var ee=new Array(f),ue=new Array(f),de,se=0;se<f;se++)ee[se]=1;for(var me=0;me<a;me++){for(var Me=0;Me<f;Me++)ue[Me]=0;for(var he=0;he<f;he++)for(var fe=0;fe<f;fe++){var Ee=he*f+fe;ue[he]+=v[Ee]*ee[fe]}fA(ue),de=ee,ee=ue,ue=de;for(var Ce=0,ke=0;ke<f;ke++){var Re=de[ke]-ee[ke];Ce+=Re*Re}if(Ce<i)break}var ve={rank:function(Oe){return Oe=s.collection(Oe)[0],ee[l.indexOf(Oe)]}};return ve}},aE=Oa({root:null,weight:function(e){return 1},directed:!1,alpha:0}),Kp={degreeCentralityNormalized:function(e){e=aE(e);var t=this.cy(),n=this.nodes(),i=n.length;if(e.directed){for(var c={},f={},h=0,d=0,v=0;v<i;v++){var y=n[v],w=y.id();e.root=y;var b=this.degreeCentrality(e);h<b.indegree&&(h=b.indegree),d<b.outdegree&&(d=b.outdegree),c[w]=b.indegree,f[w]=b.outdegree}return{indegree:function(m){return h==0?0:(yr(m)&&(m=t.filter(m)),c[m.id()]/h)},outdegree:function(m){return d===0?0:(yr(m)&&(m=t.filter(m)),f[m.id()]/d)}}}else{for(var a={},o=0,s=0;s<i;s++){var u=n[s];e.root=u;var l=this.degreeCentrality(e);o<l.degree&&(o=l.degree),a[u.id()]=l.degree}return{degree:function(m){return o===0?0:(yr(m)&&(m=t.filter(m)),a[m.id()]/o)}}}},degreeCentrality:function(e){e=aE(e);var t=this.cy(),n=this,i=e,a=i.root,o=i.weight,s=i.directed,u=i.alpha;if(a=t.collection(a)[0],s){for(var d=a.connectedEdges(),v=d.filter(function(P){return P.target().same(a)&&n.has(P)}),y=d.filter(function(P){return P.source().same(a)&&n.has(P)}),w=v.length,b=y.length,p=0,m=0,x=0;x<v.length;x++)p+=o(v[x]);for(var T=0;T<y.length;T++)m+=o(y[T]);return{indegree:Math.pow(w,1-u)*Math.pow(p,u),outdegree:Math.pow(b,1-u)*Math.pow(m,u)}}else{for(var l=a.connectedEdges().intersection(n),c=l.length,f=0,h=0;h<l.length;h++)f+=o(l[h]);return{degree:Math.pow(c,1-u)*Math.pow(f,u)}}}};Kp.dc=Kp.degreeCentrality;Kp.dcn=Kp.degreeCentralityNormalised=Kp.degreeCentralityNormalized;var sE=Oa({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),$p={closenessCentralityNormalized:function(e){for(var t=sE(e),n=t.harmonic,i=t.weight,a=t.directed,o=this.cy(),s={},u=0,l=this.nodes(),c=this.floydWarshall({weight:i,directed:a}),f=0;f<l.length;f++){for(var h=0,d=l[f],v=0;v<l.length;v++)if(f!==v){var y=c.distance(d,l[v]);n?h+=1/y:h+=y}n||(h=1/h),u<h&&(u=h),s[d.id()]=h}return{closeness:function(b){return u==0?0:(yr(b)?b=o.filter(b)[0].id():b=b.id(),s[b]/u)}}},closenessCentrality:function(e){var t=sE(e),n=t.root,i=t.weight,a=t.directed,o=t.harmonic;n=this.filter(n)[0];for(var s=this.dijkstra({root:n,weight:i,directed:a}),u=0,l=this.nodes(),c=0;c<l.length;c++){var f=l[c];if(!f.same(n)){var h=s.distanceTo(f);o?u+=1/h:u+=h}}return o?u:1/u}};$p.cc=$p.closenessCentrality;$p.ccn=$p.closenessCentralityNormalised=$p.closenessCentralityNormalized;var kA=Oa({weight:null,directed:!1}),Ew={betweennessCentrality:function(e){for(var t=kA(e),n=t.directed,i=t.weight,a=i!=null,o=this.cy(),s=this.nodes(),u={},l={},c=0,f={set:function(m,x){l[m]=x,x>c&&(c=x)},get:function(m){return l[m]}},h=0;h<s.length;h++){var d=s[h],v=d.id();n?u[v]=d.outgoers().nodes():u[v]=d.openNeighborhood().nodes(),f.set(v,0)}for(var y=function(){for(var m=s[w].id(),x=[],T={},P={},C={},R=new Ey(function(he,fe){return C[he]-C[fe]}),D=0;D<s.length;D++){var N=s[D].id();T[N]=[],P[N]=0,C[N]=1/0}for(P[m]=1,C[m]=0,R.push(m);!R.empty();){var j=R.pop();if(x.push(j),a)for(var B=0;B<u[j].length;B++){var z=u[j][B],W=o.getElementById(j),Z=void 0;W.edgesTo(z).length>0?Z=W.edgesTo(z)[0]:Z=z.edgesTo(W)[0];var Q=i(Z);z=z.id(),C[z]>C[j]+Q&&(C[z]=C[j]+Q,R.nodes.indexOf(z)<0?R.push(z):R.updateItem(z),P[z]=0,T[z]=[]),C[z]==C[j]+Q&&(P[z]=P[z]+P[j],T[z].push(j))}else for(var re=0;re<u[j].length;re++){var ee=u[j][re].id();C[ee]==1/0&&(R.push(ee),C[ee]=C[j]+1),C[ee]==C[j]+1&&(P[ee]=P[ee]+P[j],T[ee].push(j))}}for(var ue={},de=0;de<s.length;de++)ue[s[de].id()]=0;for(;x.length>0;){for(var se=x.pop(),me=0;me<T[se].length;me++){var Me=T[se][me];ue[Me]=ue[Me]+P[Me]/P[se]*(1+ue[se])}se!=s[w].id()&&f.set(se,f.get(se)+ue[se])}},w=0;w<s.length;w++)y();var b={betweenness:function(m){var x=o.collection(m).id();return f.get(x)},betweennessNormalized:function(m){if(c==0)return 0;var x=o.collection(m).id();return f.get(x)/c}};return b.betweennessNormalised=b.betweennessNormalized,b}};Ew.bc=Ew.betweennessCentrality;var DA=Oa({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(r){return 1}]}),MA=function(e){return DA(e)},LA=function(e,t){for(var n=0,i=0;i<t.length;i++)n+=t[i](e);return n},NA=function(e,t,n){for(var i=0;i<t;i++)e[i*t+i]=n},QS=function(e,t){for(var n,i=0;i<t;i++){n=0;for(var a=0;a<t;a++)n+=e[a*t+i];for(var o=0;o<t;o++)e[o*t+i]=e[o*t+i]/n}},jA=function(e,t,n){for(var i=new Array(n*n),a=0;a<n;a++){for(var o=0;o<n;o++)i[a*n+o]=0;for(var s=0;s<n;s++)for(var u=0;u<n;u++)i[a*n+u]+=e[a*n+s]*t[s*n+u]}return i},BA=function(e,t,n){for(var i=e.slice(0),a=1;a<n;a++)e=jA(e,i,t);return e},FA=function(e,t,n){for(var i=new Array(t*t),a=0;a<t*t;a++)i[a]=Math.pow(e[a],n);return QS(i,t),i},UA=function(e,t,n,i){for(var a=0;a<n;a++){var o=Math.round(e[a]*Math.pow(10,i))/Math.pow(10,i),s=Math.round(t[a]*Math.pow(10,i))/Math.pow(10,i);if(o!==s)return!1}return!0},zA=function(e,t,n,i){for(var a=[],o=0;o<t;o++){for(var s=[],u=0;u<t;u++)Math.round(e[o*t+u]*1e3)/1e3>0&&s.push(n[u]);s.length!==0&&a.push(i.collection(s))}return a},GA=function(e,t){for(var n=0;n<e.length;n++)if(!t[n]||e[n].id()!==t[n].id())return!1;return!0},VA=function(e){for(var t=0;t<e.length;t++)for(var n=0;n<e.length;n++)t!=n&&GA(e[t],e[n])&&e.splice(n,1);return e},uE=function(e){for(var t=this.nodes(),n=this.edges(),i=this.cy(),a=MA(e),o={},s=0;s<t.length;s++)o[t[s].id()]=s;for(var u=t.length,l=u*u,c=new Array(l),f,h=0;h<l;h++)c[h]=0;for(var d=0;d<n.length;d++){var v=n[d],y=o[v.source().id()],w=o[v.target().id()],b=LA(v,a.attributes);c[y*u+w]+=b,c[w*u+y]+=b}NA(c,u,a.multFactor),QS(c,u);for(var p=!0,m=0;p&&m<a.maxIterations;)p=!1,f=BA(c,u,a.expandFactor),c=FA(f,u,a.inflateFactor),UA(c,f,l,4)||(p=!0),m++;var x=zA(c,u,t,i);return x=VA(x),x},qA={markovClustering:uE,mcl:uE},WA=function(e){return e},JS=function(e,t){return Math.abs(t-e)},lE=function(e,t,n){return e+JS(t,n)},cE=function(e,t,n){return e+Math.pow(n-t,2)},HA=function(e){return Math.sqrt(e)},YA=function(e,t,n){return Math.max(e,JS(t,n))},jg=function(e,t,n,i,a){for(var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:WA,s=i,u,l,c=0;c<e;c++)u=t(c),l=n(c),s=a(s,u,l);return o(s)},rg={euclidean:function(e,t,n){return e>=2?jg(e,t,n,0,cE,HA):jg(e,t,n,0,lE)},squaredEuclidean:function(e,t,n){return jg(e,t,n,0,cE)},manhattan:function(e,t,n){return jg(e,t,n,0,lE)},max:function(e,t,n){return jg(e,t,n,-1/0,YA)}};rg["squared-euclidean"]=rg.squaredEuclidean;rg.squaredeuclidean=rg.squaredEuclidean;function s0(r,e,t,n,i,a){var o;return Wi(r)?o=r:o=rg[r]||rg.euclidean,e===0&&Wi(r)?o(i,a):o(e,t,n,i,a)}var XA=Oa({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),i1=function(e){return XA(e)},qm=function(e,t,n,i,a){var o=a!=="kMedoids",s=o?function(f){return n[f]}:function(f){return i[f](n)},u=function(h){return i[h](t)},l=n,c=t;return s0(e,i.length,s,u,l,c)},mb=function(e,t,n){for(var i=n.length,a=new Array(i),o=new Array(i),s=new Array(t),u=null,l=0;l<i;l++)a[l]=e.min(n[l]).value,o[l]=e.max(n[l]).value;for(var c=0;c<t;c++){u=[];for(var f=0;f<i;f++)u[f]=Math.random()*(o[f]-a[f])+a[f];s[c]=u}return s},eT=function(e,t,n,i,a){for(var o=1/0,s=0,u=0;u<t.length;u++){var l=qm(n,e,t[u],i,a);l<o&&(o=l,s=u)}return s},tT=function(e,t,n){for(var i=[],a=null,o=0;o<t.length;o++)a=t[o],n[a.id()]===e&&i.push(a);return i},KA=function(e,t,n){return Math.abs(t-e)<=n},$A=function(e,t,n){for(var i=0;i<e.length;i++)for(var a=0;a<e[i].length;a++){var o=Math.abs(e[i][a]-t[i][a]);if(o>n)return!1}return!0},ZA=function(e,t,n){for(var i=0;i<n;i++)if(e===t[i])return!0;return!1},fE=function(e,t){var n=new Array(t);if(e.length<50)for(var i=0;i<t;i++){for(var a=e[Math.floor(Math.random()*e.length)];ZA(a,n,i);)a=e[Math.floor(Math.random()*e.length)];n[i]=a}else for(var o=0;o<t;o++)n[o]=e[Math.floor(Math.random()*e.length)];return n},hE=function(e,t,n){for(var i=0,a=0;a<t.length;a++)i+=qm("manhattan",t[a],e,n,"kMedoids");return i},QA=function(e){var t=this.cy(),n=this.nodes(),i=null,a=i1(e),o=new Array(a.k),s={},u;a.testMode?typeof a.testCentroids=="number"?(a.testCentroids,u=mb(n,a.k,a.attributes)):Bo(a.testCentroids)==="object"?u=a.testCentroids:u=mb(n,a.k,a.attributes):u=mb(n,a.k,a.attributes);for(var l=!0,c=0;l&&c<a.maxIterations;){for(var f=0;f<n.length;f++)i=n[f],s[i.id()]=eT(i,u,a.distance,a.attributes,"kMeans");l=!1;for(var h=0;h<a.k;h++){var d=tT(h,n,s);if(d.length!==0){for(var v=a.attributes.length,y=u[h],w=new Array(v),b=new Array(v),p=0;p<v;p++){b[p]=0;for(var m=0;m<d.length;m++)i=d[m],b[p]+=a.attributes[p](i);w[p]=b[p]/d.length,KA(w[p],y[p],a.sensitivityThreshold)||(l=!0)}u[h]=w,o[h]=t.collection(d)}}c++}return o},JA=function(e){var t=this.cy(),n=this.nodes(),i=null,a=i1(e),o=new Array(a.k),s,u={},l,c=new Array(a.k);a.testMode?typeof a.testCentroids=="number"||(Bo(a.testCentroids)==="object"?s=a.testCentroids:s=fE(n,a.k)):s=fE(n,a.k);for(var f=!0,h=0;f&&h<a.maxIterations;){for(var d=0;d<n.length;d++)i=n[d],u[i.id()]=eT(i,s,a.distance,a.attributes,"kMedoids");f=!1;for(var v=0;v<s.length;v++){var y=tT(v,n,u);if(y.length!==0){c[v]=hE(s[v],y,a.attributes);for(var w=0;w<y.length;w++)l=hE(y[w],y,a.attributes),l<c[v]&&(c[v]=l,s[v]=y[w],f=!0);o[v]=t.collection(y)}}h++}return o},eR=function(e,t,n,i,a){for(var o,s,u=0;u<t.length;u++)for(var l=0;l<e.length;l++)i[u][l]=Math.pow(n[u][l],a.m);for(var c=0;c<e.length;c++)for(var f=0;f<a.attributes.length;f++){o=0,s=0;for(var h=0;h<t.length;h++)o+=i[h][c]*a.attributes[f](t[h]),s+=i[h][c];e[c][f]=o/s}},tR=function(e,t,n,i,a){for(var o=0;o<e.length;o++)t[o]=e[o].slice();for(var s,u,l,c=2/(a.m-1),f=0;f<n.length;f++)for(var h=0;h<i.length;h++){s=0;for(var d=0;d<n.length;d++)u=qm(a.distance,i[h],n[f],a.attributes,"cmeans"),l=qm(a.distance,i[h],n[d],a.attributes,"cmeans"),s+=Math.pow(u/l,c);e[h][f]=1/s}},rR=function(e,t,n,i){for(var a=new Array(n.k),o=0;o<a.length;o++)a[o]=[];for(var s,u,l=0;l<t.length;l++){s=-1/0,u=-1;for(var c=0;c<t[0].length;c++)t[l][c]>s&&(s=t[l][c],u=c);a[u].push(e[l])}for(var f=0;f<a.length;f++)a[f]=i.collection(a[f]);return a},dE=function(e){var t=this.cy(),n=this.nodes(),i=i1(e),a,o,s,u,l;u=new Array(n.length);for(var c=0;c<n.length;c++)u[c]=new Array(i.k);s=new Array(n.length);for(var f=0;f<n.length;f++)s[f]=new Array(i.k);for(var h=0;h<n.length;h++){for(var d=0,v=0;v<i.k;v++)s[h][v]=Math.random(),d+=s[h][v];for(var y=0;y<i.k;y++)s[h][y]=s[h][y]/d}o=new Array(i.k);for(var w=0;w<i.k;w++)o[w]=new Array(i.attributes.length);l=new Array(n.length);for(var b=0;b<n.length;b++)l[b]=new Array(i.k);for(var p=!0,m=0;p&&m<i.maxIterations;)p=!1,eR(o,n,s,l,i),tR(s,u,o,n,i),$A(s,u,i.sensitivityThreshold)||(p=!0),m++;return a=rR(n,s,i,t),{clusters:a,degreeOfMembership:s}},nR={kMeans:QA,kMedoids:JA,fuzzyCMeans:dE,fcm:dE},iR=Oa({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),oR={single:"min",complete:"max"},aR=function(e){var t=iR(e),n=oR[t.linkage];return n!=null&&(t.linkage=n),t},vE=function(e,t,n,i,a){for(var o=0,s=1/0,u,l=a.attributes,c=function(D,N){return s0(a.distance,l.length,function(j){return l[j](D)},function(j){return l[j](N)},D,N)},f=0;f<e.length;f++){var h=e[f].key,d=n[h][i[h]];d<s&&(o=h,s=d)}if(a.mode==="threshold"&&s>=a.threshold||a.mode==="dendrogram"&&e.length===1)return!1;var v=t[o],y=t[i[o]],w;a.mode==="dendrogram"?w={left:v,right:y,key:v.key}:w={value:v.value.concat(y.value),key:v.key},e[v.index]=w,e.splice(y.index,1),t[v.key]=w;for(var b=0;b<e.length;b++){var p=e[b];v.key===p.key?u=1/0:a.linkage==="min"?(u=n[v.key][p.key],n[v.key][p.key]>n[y.key][p.key]&&(u=n[y.key][p.key])):a.linkage==="max"?(u=n[v.key][p.key],n[v.key][p.key]<n[y.key][p.key]&&(u=n[y.key][p.key])):a.linkage==="mean"?u=(n[v.key][p.key]*v.size+n[y.key][p.key]*y.size)/(v.size+y.size):a.mode==="dendrogram"?u=c(p.value,v.value):u=c(p.value[0],v.value[0]),n[v.key][p.key]=n[p.key][v.key]=u}for(var m=0;m<e.length;m++){var x=e[m].key;if(i[x]===v.key||i[x]===y.key){for(var T=x,P=0;P<e.length;P++){var C=e[P].key;n[x][C]<n[x][T]&&(T=C)}i[x]=T}e[m].index=m}return v.key=y.key=v.index=y.index=null,!0},Wp=function(e,t,n){e&&(e.value?t.push(e.value):(e.left&&Wp(e.left,t),e.right&&Wp(e.right,t)))},xw=function(e,t){if(!e)return"";if(e.left&&e.right){var n=xw(e.left,t),i=xw(e.right,t),a=t.add({group:"nodes",data:{id:n+","+i}});return t.add({group:"edges",data:{source:n,target:a.id()}}),t.add({group:"edges",data:{source:i,target:a.id()}}),a.id()}else if(e.value)return e.value.id()},Ow=function(e,t,n){if(!e)return[];var i=[],a=[],o=[];return t===0?(e.left&&Wp(e.left,i),e.right&&Wp(e.right,a),o=i.concat(a),[n.collection(o)]):t===1?e.value?[n.collection(e.value)]:(e.left&&Wp(e.left,i),e.right&&Wp(e.right,a),[n.collection(i),n.collection(a)]):e.value?[n.collection(e.value)]:(e.left&&(i=Ow(e.left,t-1,n)),e.right&&(a=Ow(e.right,t-1,n)),i.concat(a))},pE=function(e){for(var t=this.cy(),n=this.nodes(),i=aR(e),a=i.attributes,o=function(m,x){return s0(i.distance,a.length,function(T){return a[T](m)},function(T){return a[T](x)},m,x)},s=[],u=[],l=[],c=[],f=0;f<n.length;f++){var h={value:i.mode==="dendrogram"?n[f]:[n[f]],key:f,index:f};s[f]=h,c[f]=h,u[f]=[],l[f]=0}for(var d=0;d<s.length;d++)for(var v=0;v<=d;v++){var y=void 0;i.mode==="dendrogram"?y=d===v?1/0:o(s[d].value,s[v].value):y=d===v?1/0:o(s[d].value[0],s[v].value[0]),u[d][v]=y,u[v][d]=y,y<u[d][l[d]]&&(l[d]=v)}for(var w=vE(s,c,u,l,i);w;)w=vE(s,c,u,l,i);var b;return i.mode==="dendrogram"?(b=Ow(s[0],i.dendrogramDepth,t),i.addDendrogram&&xw(s[0],t)):(b=new Array(s.length),s.forEach(function(p,m){p.key=p.index=null,b[m]=t.collection(p.value)})),b},sR={hierarchicalClustering:pE,hca:pE},uR=Oa({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),lR=function(e){var t=e.damping,n=e.preference;.5<=t&&t<1||qi("Damping must range on [0.5, 1).  Got: ".concat(t));var i=["median","mean","min","max"];return i.some(function(a){return a===n})||Gt(n)||qi("Preference must be one of [".concat(i.map(function(a){return"'".concat(a,"'")}).join(", "),"] or a number.  Got: ").concat(n)),uR(e)},cR=function(e,t,n,i){var a=function(s,u){return i[u](s)};return-s0(e,i.length,function(o){return a(t,o)},function(o){return a(n,o)},t,n)},fR=function(e,t){var n=null;return t==="median"?n=lA(e):t==="mean"?n=uA(e):t==="min"?n=aA(e):t==="max"?n=sA(e):n=t,n},hR=function(e,t,n){for(var i=[],a=0;a<e;a++)t[a*e+a]+n[a*e+a]>0&&i.push(a);return i},gE=function(e,t,n){for(var i=[],a=0;a<e;a++){for(var o=-1,s=-1/0,u=0;u<n.length;u++){var l=n[u];t[a*e+l]>s&&(o=l,s=t[a*e+l])}o>0&&i.push(o)}for(var c=0;c<n.length;c++)i[n[c]]=n[c];return i},dR=function(e,t,n){for(var i=gE(e,t,n),a=0;a<n.length;a++){for(var o=[],s=0;s<i.length;s++)i[s]===n[a]&&o.push(s);for(var u=-1,l=-1/0,c=0;c<o.length;c++){for(var f=0,h=0;h<o.length;h++)f+=t[o[h]*e+o[c]];f>l&&(u=c,l=f)}n[a]=o[u]}return i=gE(e,t,n),i},yE=function(e){for(var t=this.cy(),n=this.nodes(),i=lR(e),a={},o=0;o<n.length;o++)a[n[o].id()]=o;var s,u,l,c,f,h;s=n.length,u=s*s,l=new Array(u);for(var d=0;d<u;d++)l[d]=-1/0;for(var v=0;v<s;v++)for(var y=0;y<s;y++)v!==y&&(l[v*s+y]=cR(i.distance,n[v],n[y],i.attributes));c=fR(l,i.preference);for(var w=0;w<s;w++)l[w*s+w]=c;f=new Array(u);for(var b=0;b<u;b++)f[b]=0;h=new Array(u);for(var p=0;p<u;p++)h[p]=0;for(var m=new Array(s),x=new Array(s),T=new Array(s),P=0;P<s;P++)m[P]=0,x[P]=0,T[P]=0;for(var C=new Array(s*i.minIterations),R=0;R<C.length;R++)C[R]=0;var D;for(D=0;D<i.maxIterations;D++){for(var N=0;N<s;N++){for(var j=-1/0,B=-1/0,z=-1,W=0,Z=0;Z<s;Z++)m[Z]=f[N*s+Z],W=h[N*s+Z]+l[N*s+Z],W>=j?(B=j,j=W,z=Z):W>B&&(B=W);for(var Q=0;Q<s;Q++)f[N*s+Q]=(1-i.damping)*(l[N*s+Q]-j)+i.damping*m[Q];f[N*s+z]=(1-i.damping)*(l[N*s+z]-B)+i.damping*m[z]}for(var re=0;re<s;re++){for(var ee=0,ue=0;ue<s;ue++)m[ue]=h[ue*s+re],x[ue]=Math.max(0,f[ue*s+re]),ee+=x[ue];ee-=x[re],x[re]=f[re*s+re],ee+=x[re];for(var de=0;de<s;de++)h[de*s+re]=(1-i.damping)*Math.min(0,ee-x[de])+i.damping*m[de];h[re*s+re]=(1-i.damping)*(ee-x[re])+i.damping*m[re]}for(var se=0,me=0;me<s;me++){var Me=h[me*s+me]+f[me*s+me]>0?1:0;C[D%i.minIterations*s+me]=Me,se+=Me}if(se>0&&(D>=i.minIterations-1||D==i.maxIterations-1)){for(var he=0,fe=0;fe<s;fe++){T[fe]=0;for(var Ee=0;Ee<i.minIterations;Ee++)T[fe]+=C[Ee*s+fe];(T[fe]===0||T[fe]===i.minIterations)&&he++}if(he===s)break}}for(var Ce=hR(s,f,h),ke=dR(s,l,Ce),Re={},ve=0;ve<Ce.length;ve++)Re[Ce[ve]]=[];for(var we=0;we<n.length;we++){var Oe=a[n[we].id()],Be=ke[Oe];Be!=null&&Re[Be].push(n[we])}for(var Ye=new Array(Ce.length),ht=0;ht<Ce.length;ht++)Ye[ht]=t.collection(Re[Ce[ht]]);return Ye},vR={affinityPropagation:yE,ap:yE},pR=Oa({root:void 0,directed:!1}),gR={hierholzer:function(e){if(!wn(e)){var t=arguments;e={root:t[0],directed:t[1]}}var n=pR(e),i=n.root,a=n.directed,o=this,s=!1,u,l,c;i&&(c=yr(i)?this.filter(i)[0].id():i[0].id());var f={},h={};a?o.forEach(function(p){var m=p.id();if(p.isNode()){var x=p.indegree(!0),T=p.outdegree(!0),P=x-T,C=T-x;P==1?u?s=!0:u=m:C==1?l?s=!0:l=m:(C>1||P>1)&&(s=!0),f[m]=[],p.outgoers().forEach(function(R){R.isEdge()&&f[m].push(R.id())})}else h[m]=[void 0,p.target().id()]}):o.forEach(function(p){var m=p.id();if(p.isNode()){var x=p.degree(!0);x%2&&(u?l?s=!0:l=m:u=m),f[m]=[],p.connectedEdges().forEach(function(T){return f[m].push(T.id())})}else h[m]=[p.source().id(),p.target().id()]});var d={found:!1,trail:void 0};if(s)return d;if(l&&u)if(a){if(c&&l!=c)return d;c=l}else{if(c&&l!=c&&u!=c)return d;c||(c=l)}else c||(c=o[0].id());var v=function(m){for(var x=m,T=[m],P,C,R;f[x].length;)P=f[x].shift(),C=h[P][0],R=h[P][1],x!=R?(f[R]=f[R].filter(function(D){return D!=P}),x=R):!a&&x!=C&&(f[C]=f[C].filter(function(D){return D!=P}),x=C),T.unshift(P),T.unshift(x);return T},y=[],w=[];for(w=v(c);w.length!=1;)f[w[0]].length==0?(y.unshift(o.getElementById(w.shift())),y.unshift(o.getElementById(w.shift()))):w=v(w.shift()).concat(w);y.unshift(o.getElementById(w.shift()));for(var b in f)if(f[b].length)return d;return d.found=!0,d.trail=this.spawn(y,!0),d}},em=function(){var e=this,t={},n=0,i=0,a=[],o=[],s={},u=function(h,d){for(var v=o.length-1,y=[],w=e.spawn();o[v].x!=h||o[v].y!=d;)y.push(o.pop().edge),v--;y.push(o.pop().edge),y.forEach(function(b){var p=b.connectedNodes().intersection(e);w.merge(b),p.forEach(function(m){var x=m.id(),T=m.connectedEdges().intersection(e);w.merge(m),t[x].cutVertex?w.merge(T.filter(function(P){return P.isLoop()})):w.merge(T)})}),a.push(w)},l=function(h,d,v){h===v&&(i+=1),t[d]={id:n,low:n++,cutVertex:!1};var y=e.getElementById(d).connectedEdges().intersection(e);if(y.size()===0)a.push(e.spawn(e.getElementById(d)));else{var w,b,p,m;y.forEach(function(x){w=x.source().id(),b=x.target().id(),p=w===d?b:w,p!==v&&(m=x.id(),s[m]||(s[m]=!0,o.push({x:d,y:p,edge:x})),p in t?t[d].low=Math.min(t[d].low,t[p].id):(l(h,p,d),t[d].low=Math.min(t[d].low,t[p].low),t[d].id<=t[p].low&&(t[d].cutVertex=!0,u(d,p))))})}};e.forEach(function(f){if(f.isNode()){var h=f.id();h in t||(i=0,l(h,h),t[h].cutVertex=i>1)}});var c=Object.keys(t).filter(function(f){return t[f].cutVertex}).map(function(f){return e.getElementById(f)});return{cut:e.spawn(c),components:a}},yR={hopcroftTarjanBiconnected:em,htbc:em,htb:em,hopcroftTarjanBiconnectedComponents:em},tm=function(){var e=this,t={},n=0,i=[],a=[],o=e.spawn(e),s=function(l){a.push(l),t[l]={index:n,low:n++,explored:!1};var c=e.getElementById(l).connectedEdges().intersection(e);if(c.forEach(function(y){var w=y.target().id();w!==l&&(w in t||s(w),t[w].explored||(t[l].low=Math.min(t[l].low,t[w].low)))}),t[l].index===t[l].low){for(var f=e.spawn();;){var h=a.pop();if(f.merge(e.getElementById(h)),t[h].low=t[l].index,t[h].explored=!0,h===l)break}var d=f.edgesWith(f),v=f.merge(d);i.push(v),o=o.difference(v)}};return e.forEach(function(u){if(u.isNode()){var l=u.id();l in t||s(l)}}),{cut:o,components:i}},mR={tarjanStronglyConnected:tm,tsc:tm,tscc:tm,tarjanStronglyConnectedComponents:tm},rT={};[sy,XP,KP,ZP,JP,tA,iA,IA,Kp,$p,Ew,qA,nR,sR,vR,gR,yR,mR].forEach(function(r){xr(rT,r)});/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var nT=0,iT=1,oT=2,Jl=function(e){if(!(this instanceof Jl))return new Jl(e);this.id="Thenable/1.0.7",this.state=nT,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};Jl.prototype={fulfill:function(e){return mE(this,iT,"fulfillValue",e)},reject:function(e){return mE(this,oT,"rejectReason",e)},then:function(e,t){var n=this,i=new Jl;return n.onFulfilled.push(_E(e,i,"fulfill")),n.onRejected.push(_E(t,i,"reject")),aT(n),i.proxy}};var mE=function(e,t,n,i){return e.state===nT&&(e.state=t,e[n]=i,aT(e)),e},aT=function(e){e.state===iT?bE(e,"onFulfilled",e.fulfillValue):e.state===oT&&bE(e,"onRejected",e.rejectReason)},bE=function(e,t,n){if(e[t].length!==0){var i=e[t];e[t]=[];var a=function(){for(var s=0;s<i.length;s++)i[s](n)};typeof setImmediate=="function"?setImmediate(a):setTimeout(a,0)}},_E=function(e,t,n){return function(i){if(typeof e!="function")t[n].call(t,i);else{var a;try{a=e(i)}catch(o){t.reject(o);return}sT(t,a)}}},sT=function(e,t){if(e===t||e.proxy===t){e.reject(new TypeError("cannot resolve promise with itself"));return}var n;if(Bo(t)==="object"&&t!==null||typeof t=="function")try{n=t.then}catch(a){e.reject(a);return}if(typeof n=="function"){var i=!1;try{n.call(t,function(a){i||(i=!0,a===t?e.reject(new TypeError("circular thenable chain")):sT(e,a))},function(a){i||(i=!0,e.reject(a))})}catch(a){i||e.reject(a)}return}e.fulfill(t)};Jl.all=function(r){return new Jl(function(e,t){for(var n=new Array(r.length),i=0,a=function(u,l){n[u]=l,i++,i===r.length&&e(n)},o=0;o<r.length;o++)(function(s){var u=r[s],l=u!=null&&u.then!=null;if(l)u.then(function(f){a(s,f)},function(f){t(f)});else{var c=u;a(s,c)}})(o)})};Jl.resolve=function(r){return new Jl(function(e,t){e(r)})};Jl.reject=function(r){return new Jl(function(e,t){t(r)})};var ag=typeof Promise<"u"?Promise:Jl,Sw=function(e,t,n){var i=Xw(e),a=!i,o=this._private=xr({duration:1e3},t,n);if(o.target=e,o.style=o.style||o.css,o.started=!1,o.playing=!1,o.hooked=!1,o.applying=!1,o.progress=0,o.completes=[],o.frames=[],o.complete&&Wi(o.complete)&&o.completes.push(o.complete),a){var s=e.position();o.startPosition=o.startPosition||{x:s.x,y:s.y},o.startStyle=o.startStyle||e.cy().style().getAnimationStartStyle(e,o.style)}if(i){var u=e.pan();o.startPan={x:u.x,y:u.y},o.startZoom=e.zoom()}this.length=1,this[0]=this},jv=Sw.prototype;xr(jv,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var t,n=e.target._private.animation;e.queue?t=n.queue:t=n.current,t.push(this),Eu(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var t=this._private;return e===void 0?t.progress*t.duration:this.progress(e/t.duration)},progress:function(e){var t=this._private,n=t.playing;return e===void 0?t.progress:(n&&this.pause(),t.progress=e,t.started=!1,n&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,t=e.playing;t&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(l,c){var f=e[l];f!=null&&(e[l]=e[c],e[c]=f)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var i=0;i<e.style.length;i++){var a=e.style[i],o=a.name,s=e.startStyle[o];e.startStyle[o]=a,e.style[i]=s}return t&&this.play(),this},promise:function(e){var t=this._private,n;switch(e){case"frame":n=t.frames;break;default:case"complete":case"completed":n=t.completes}return new ag(function(i,a){n.push(function(){i()})})}});jv.complete=jv.completed;jv.run=jv.play;jv.running=jv.playing;var bR={animated:function(){return function(){var t=this,n=t.length!==void 0,i=n?t:[t],a=this._private.cy||this;if(!a.styleEnabled())return!1;var o=i[0];if(o)return o._private.animation.current.length>0}},clearQueue:function(){return function(){var t=this,n=t.length!==void 0,i=n?t:[t],a=this._private.cy||this;if(!a.styleEnabled())return this;for(var o=0;o<i.length;o++){var s=i[o];s._private.animation.queue=[]}return this}},delay:function(){return function(t,n){var i=this._private.cy||this;return i.styleEnabled()?this.animate({delay:t,duration:t,complete:n}):this}},delayAnimation:function(){return function(t,n){var i=this._private.cy||this;return i.styleEnabled()?this.animation({delay:t,duration:t,complete:n}):this}},animation:function(){return function(t,n){var i=this,a=i.length!==void 0,o=a?i:[i],s=this._private.cy||this,u=!a,l=!u;if(!s.styleEnabled())return this;var c=s.style();t=xr({},t,n);var f=Object.keys(t).length===0;if(f)return new Sw(o[0],t);switch(t.duration===void 0&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200;break}if(l&&(t.style=c.getPropsList(t.style||t.css),t.css=void 0),l&&t.renderedPosition!=null){var h=t.renderedPosition,d=s.pan(),v=s.zoom();t.position=YS(h,v,d)}if(u&&t.panBy!=null){var y=t.panBy,w=s.pan();t.pan={x:w.x+y.x,y:w.y+y.y}}var b=t.center||t.centre;if(u&&b!=null){var p=s.getCenterPan(b.eles,t.zoom);p!=null&&(t.pan=p)}if(u&&t.fit!=null){var m=t.fit,x=s.getFitViewport(m.eles||m.boundingBox,m.padding);x!=null&&(t.pan=x.pan,t.zoom=x.zoom)}if(u&&wn(t.zoom)){var T=s.getZoomedViewport(t.zoom);T!=null?(T.zoomed&&(t.zoom=T.zoom),T.panned&&(t.pan=T.pan)):t.zoom=null}return new Sw(o[0],t)}},animate:function(){return function(t,n){var i=this,a=i.length!==void 0,o=a?i:[i],s=this._private.cy||this;if(!s.styleEnabled())return this;n&&(t=xr({},t,n));for(var u=0;u<o.length;u++){var l=o[u],c=l.animated()&&(t.queue===void 0||t.queue),f=l.animation(t,c?{queue:!0}:void 0);f.play()}return this}},stop:function(){return function(t,n){var i=this,a=i.length!==void 0,o=a?i:[i],s=this._private.cy||this;if(!s.styleEnabled())return this;for(var u=0;u<o.length;u++){for(var l=o[u],c=l._private,f=c.animation.current,h=0;h<f.length;h++){var d=f[h],v=d._private;n&&(v.duration=0)}t&&(c.animation.queue=[]),n||(c.animation.current=[])}return s.notify("draw"),this}}},bb,wE;function u0(){if(wE)return bb;wE=1;var r=Array.isArray;return bb=r,bb}var _b,EE;function _R(){if(EE)return _b;EE=1;var r=u0(),e=_y(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(a,o){if(r(a))return!1;var s=typeof a;return s=="number"||s=="symbol"||s=="boolean"||a==null||e(a)?!0:n.test(a)||!t.test(a)||o!=null&&a in Object(o)}return _b=i,_b}var wb,xE;function wR(){if(xE)return wb;xE=1;var r=BS(),e=by(),t="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function o(s){if(!e(s))return!1;var u=r(s);return u==n||u==i||u==t||u==a}return wb=o,wb}var Eb,OE;function ER(){if(OE)return Eb;OE=1;var r=i0(),e=r["__core-js_shared__"];return Eb=e,Eb}var xb,SE;function xR(){if(SE)return xb;SE=1;var r=ER(),e=function(){var n=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function t(n){return!!e&&e in n}return xb=t,xb}var Ob,TE;function OR(){if(TE)return Ob;TE=1;var r=Function.prototype,e=r.toString;function t(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return Ob=t,Ob}var Sb,CE;function SR(){if(CE)return Sb;CE=1;var r=wR(),e=xR(),t=by(),n=OR(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,o=Function.prototype,s=Object.prototype,u=o.toString,l=s.hasOwnProperty,c=RegExp("^"+u.call(l).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(h){if(!t(h)||e(h))return!1;var d=r(h)?c:a;return d.test(n(h))}return Sb=f,Sb}var Tb,PE;function TR(){if(PE)return Tb;PE=1;function r(e,t){return e==null?void 0:e[t]}return Tb=r,Tb}var Cb,AE;function o1(){if(AE)return Cb;AE=1;var r=SR(),e=TR();function t(n,i){var a=e(n,i);return r(a)?a:void 0}return Cb=t,Cb}var Pb,RE;function l0(){if(RE)return Pb;RE=1;var r=o1(),e=r(Object,"create");return Pb=e,Pb}var Ab,IE;function CR(){if(IE)return Ab;IE=1;var r=l0();function e(){this.__data__=r?r(null):{},this.size=0}return Ab=e,Ab}var Rb,kE;function PR(){if(kE)return Rb;kE=1;function r(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return Rb=r,Rb}var Ib,DE;function AR(){if(DE)return Ib;DE=1;var r=l0(),e="__lodash_hash_undefined__",t=Object.prototype,n=t.hasOwnProperty;function i(a){var o=this.__data__;if(r){var s=o[a];return s===e?void 0:s}return n.call(o,a)?o[a]:void 0}return Ib=i,Ib}var kb,ME;function RR(){if(ME)return kb;ME=1;var r=l0(),e=Object.prototype,t=e.hasOwnProperty;function n(i){var a=this.__data__;return r?a[i]!==void 0:t.call(a,i)}return kb=n,kb}var Db,LE;function IR(){if(LE)return Db;LE=1;var r=l0(),e="__lodash_hash_undefined__";function t(n,i){var a=this.__data__;return this.size+=this.has(n)?0:1,a[n]=r&&i===void 0?e:i,this}return Db=t,Db}var Mb,NE;function kR(){if(NE)return Mb;NE=1;var r=CR(),e=PR(),t=AR(),n=RR(),i=IR();function a(o){var s=-1,u=o==null?0:o.length;for(this.clear();++s<u;){var l=o[s];this.set(l[0],l[1])}}return a.prototype.clear=r,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=n,a.prototype.set=i,Mb=a,Mb}var Lb,jE;function DR(){if(jE)return Lb;jE=1;function r(){this.__data__=[],this.size=0}return Lb=r,Lb}var Nb,BE;function uT(){if(BE)return Nb;BE=1;function r(e,t){return e===t||e!==e&&t!==t}return Nb=r,Nb}var jb,FE;function c0(){if(FE)return jb;FE=1;var r=uT();function e(t,n){for(var i=t.length;i--;)if(r(t[i][0],n))return i;return-1}return jb=e,jb}var Bb,UE;function MR(){if(UE)return Bb;UE=1;var r=c0(),e=Array.prototype,t=e.splice;function n(i){var a=this.__data__,o=r(a,i);if(o<0)return!1;var s=a.length-1;return o==s?a.pop():t.call(a,o,1),--this.size,!0}return Bb=n,Bb}var Fb,zE;function LR(){if(zE)return Fb;zE=1;var r=c0();function e(t){var n=this.__data__,i=r(n,t);return i<0?void 0:n[i][1]}return Fb=e,Fb}var Ub,GE;function NR(){if(GE)return Ub;GE=1;var r=c0();function e(t){return r(this.__data__,t)>-1}return Ub=e,Ub}var zb,VE;function jR(){if(VE)return zb;VE=1;var r=c0();function e(t,n){var i=this.__data__,a=r(i,t);return a<0?(++this.size,i.push([t,n])):i[a][1]=n,this}return zb=e,zb}var Gb,qE;function BR(){if(qE)return Gb;qE=1;var r=DR(),e=MR(),t=LR(),n=NR(),i=jR();function a(o){var s=-1,u=o==null?0:o.length;for(this.clear();++s<u;){var l=o[s];this.set(l[0],l[1])}}return a.prototype.clear=r,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=n,a.prototype.set=i,Gb=a,Gb}var Vb,WE;function FR(){if(WE)return Vb;WE=1;var r=o1(),e=i0(),t=r(e,"Map");return Vb=t,Vb}var qb,HE;function UR(){if(HE)return qb;HE=1;var r=kR(),e=BR(),t=FR();function n(){this.size=0,this.__data__={hash:new r,map:new(t||e),string:new r}}return qb=n,qb}var Wb,YE;function zR(){if(YE)return Wb;YE=1;function r(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return Wb=r,Wb}var Hb,XE;function f0(){if(XE)return Hb;XE=1;var r=zR();function e(t,n){var i=t.__data__;return r(n)?i[typeof n=="string"?"string":"hash"]:i.map}return Hb=e,Hb}var Yb,KE;function GR(){if(KE)return Yb;KE=1;var r=f0();function e(t){var n=r(this,t).delete(t);return this.size-=n?1:0,n}return Yb=e,Yb}var Xb,$E;function VR(){if($E)return Xb;$E=1;var r=f0();function e(t){return r(this,t).get(t)}return Xb=e,Xb}var Kb,ZE;function qR(){if(ZE)return Kb;ZE=1;var r=f0();function e(t){return r(this,t).has(t)}return Kb=e,Kb}var $b,QE;function WR(){if(QE)return $b;QE=1;var r=f0();function e(t,n){var i=r(this,t),a=i.size;return i.set(t,n),this.size+=i.size==a?0:1,this}return $b=e,$b}var Zb,JE;function HR(){if(JE)return Zb;JE=1;var r=UR(),e=GR(),t=VR(),n=qR(),i=WR();function a(o){var s=-1,u=o==null?0:o.length;for(this.clear();++s<u;){var l=o[s];this.set(l[0],l[1])}}return a.prototype.clear=r,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=n,a.prototype.set=i,Zb=a,Zb}var Qb,ex;function YR(){if(ex)return Qb;ex=1;var r=HR(),e="Expected a function";function t(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var a=function(){var o=arguments,s=i?i.apply(this,o):o[0],u=a.cache;if(u.has(s))return u.get(s);var l=n.apply(this,o);return a.cache=u.set(s,l)||u,l};return a.cache=new(t.Cache||r),a}return t.Cache=r,Qb=t,Qb}var Jb,tx;function XR(){if(tx)return Jb;tx=1;var r=YR(),e=500;function t(n){var i=r(n,function(o){return a.size===e&&a.clear(),o}),a=i.cache;return i}return Jb=t,Jb}var e_,rx;function lT(){if(rx)return e_;rx=1;var r=XR(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,n=r(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(e,function(o,s,u,l){a.push(u?l.replace(t,"$1"):s||o)}),a});return e_=n,e_}var t_,nx;function cT(){if(nx)return t_;nx=1;function r(e,t){for(var n=-1,i=e==null?0:e.length,a=Array(i);++n<i;)a[n]=t(e[n],n,e);return a}return t_=r,t_}var r_,ix;function KR(){if(ix)return r_;ix=1;var r=$w(),e=cT(),t=u0(),n=_y(),i=r?r.prototype:void 0,a=i?i.toString:void 0;function o(s){if(typeof s=="string")return s;if(t(s))return e(s,o)+"";if(n(s))return a?a.call(s):"";var u=s+"";return u=="0"&&1/s==-1/0?"-0":u}return r_=o,r_}var n_,ox;function fT(){if(ox)return n_;ox=1;var r=KR();function e(t){return t==null?"":r(t)}return n_=e,n_}var i_,ax;function hT(){if(ax)return i_;ax=1;var r=u0(),e=_R(),t=lT(),n=fT();function i(a,o){return r(a)?a:e(a,o)?[a]:t(n(a))}return i_=i,i_}var o_,sx;function a1(){if(sx)return o_;sx=1;var r=_y();function e(t){if(typeof t=="string"||r(t))return t;var n=t+"";return n=="0"&&1/t==-1/0?"-0":n}return o_=e,o_}var a_,ux;function $R(){if(ux)return a_;ux=1;var r=hT(),e=a1();function t(n,i){i=r(i,n);for(var a=0,o=i.length;n!=null&&a<o;)n=n[e(i[a++])];return a&&a==o?n:void 0}return a_=t,a_}var s_,lx;function ZR(){if(lx)return s_;lx=1;var r=$R();function e(t,n,i){var a=t==null?void 0:r(t,n);return a===void 0?i:a}return s_=e,s_}var QR=ZR(),JR=my(QR),u_,cx;function eI(){if(cx)return u_;cx=1;var r=o1(),e=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch{}}();return u_=e,u_}var l_,fx;function tI(){if(fx)return l_;fx=1;var r=eI();function e(t,n,i){n=="__proto__"&&r?r(t,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[n]=i}return l_=e,l_}var c_,hx;function rI(){if(hx)return c_;hx=1;var r=tI(),e=uT(),t=Object.prototype,n=t.hasOwnProperty;function i(a,o,s){var u=a[o];(!(n.call(a,o)&&e(u,s))||s===void 0&&!(o in a))&&r(a,o,s)}return c_=i,c_}var f_,dx;function nI(){if(dx)return f_;dx=1;var r=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(n,i){var a=typeof n;return i=i??r,!!i&&(a=="number"||a!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<i}return f_=t,f_}var h_,vx;function iI(){if(vx)return h_;vx=1;var r=rI(),e=hT(),t=nI(),n=by(),i=a1();function a(o,s,u,l){if(!n(o))return o;s=e(s,o);for(var c=-1,f=s.length,h=f-1,d=o;d!=null&&++c<f;){var v=i(s[c]),y=u;if(v==="__proto__"||v==="constructor"||v==="prototype")return o;if(c!=h){var w=d[v];y=l?l(w,v,d):void 0,y===void 0&&(y=n(w)?w:t(s[c+1])?[]:{})}r(d,v,y),d=d[v]}return o}return h_=a,h_}var d_,px;function oI(){if(px)return d_;px=1;var r=iI();function e(t,n,i){return t==null?t:r(t,n,i)}return d_=e,d_}var aI=oI(),sI=my(aI),v_,gx;function uI(){if(gx)return v_;gx=1;function r(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}return v_=r,v_}var p_,yx;function lI(){if(yx)return p_;yx=1;var r=cT(),e=uI(),t=u0(),n=_y(),i=lT(),a=a1(),o=fT();function s(u){return t(u)?r(u,a):n(u)?[u]:e(i(o(u)))}return p_=s,p_}var cI=lI(),fI=my(cI),hI={data:function(e){var t={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(i){},beforeSet:function(i,a){},onSet:function(i){},canSet:function(i){return!0}};return e=xr({},t,e),function(i,a){var o=e,s=this,u=s.length!==void 0,l=u?s:[s],c=u?s[0]:s;if(yr(i)){var f=i.indexOf(".")!==-1,h=f&&fI(i);if(o.allowGetting&&a===void 0){var d;return c&&(o.beforeGet(c),h&&c._private[o.field][i]===void 0?d=JR(c._private[o.field],h):d=c._private[o.field][i]),d}else if(o.allowSetting&&a!==void 0){var v=!o.immutableKeys[i];if(v){var y=PS({},i,a);o.beforeSet(s,y);for(var w=0,b=l.length;w<b;w++){var p=l[w];o.canSet(p)&&(h&&c._private[o.field][i]===void 0?sI(p._private[o.field],h,a):p._private[o.field][i]=a)}o.updateStyle&&s.updateStyle(),o.onSet(s),o.settingTriggersEvent&&s[o.triggerFnName](o.settingEvent)}}}else if(o.allowSetting&&wn(i)){var m=i,x,T,P=Object.keys(m);o.beforeSet(s,m);for(var C=0;C<P.length;C++){x=P[C],T=m[x];var R=!o.immutableKeys[x];if(R)for(var D=0;D<l.length;D++){var N=l[D];o.canSet(N)&&(N._private[o.field][x]=T)}}o.updateStyle&&s.updateStyle(),o.onSet(s),o.settingTriggersEvent&&s[o.triggerFnName](o.settingEvent)}else if(o.allowBinding&&Wi(i)){var j=i;s.on(o.bindingEvent,j)}else if(o.allowGetting&&i===void 0){var B;return c&&(o.beforeGet(c),B=c._private[o.field]),B}return s}},removeData:function(e){var t={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=xr({},t,e),function(i){var a=e,o=this,s=o.length!==void 0,u=s?o:[o];if(yr(i)){for(var l=i.split(/\s+/),c=l.length,f=0;f<c;f++){var h=l[f];if(!od(h)){var d=!a.immutableKeys[h];if(d)for(var v=0,y=u.length;v<y;v++)u[v]._private[a.field][h]=void 0}}a.triggerEvent&&o[a.triggerFnName](a.event)}else if(i===void 0){for(var w=0,b=u.length;w<b;w++)for(var p=u[w]._private[a.field],m=Object.keys(p),x=0;x<m.length;x++){var T=m[x],P=!a.immutableKeys[T];P&&(p[T]=void 0)}a.triggerEvent&&o[a.triggerFnName](a.event)}return o}}},dI={eventAliasesOn:function(e){var t=e;t.addListener=t.listen=t.bind=t.on,t.unlisten=t.unbind=t.off=t.removeListener,t.trigger=t.emit,t.pon=t.promiseOn=function(n,i){var a=this,o=Array.prototype.slice.call(arguments,0);return new ag(function(s,u){var l=function(d){a.off.apply(a,f),s(d)},c=o.concat([l]),f=c.concat([]);a.on.apply(a,c)})}}},Bn={};[bR,hI,dI].forEach(function(r){xr(Bn,r)});var vI={animate:Bn.animate(),animation:Bn.animation(),animated:Bn.animated(),clearQueue:Bn.clearQueue(),delay:Bn.delay(),delayAnimation:Bn.delayAnimation(),stop:Bn.stop()},Om={classes:function(e){var t=this;if(e===void 0){var n=[];return t[0]._private.classes.forEach(function(v){return n.push(v)}),n}else di(e)||(e=(e||"").match(/\S+/g)||[]);for(var i=[],a=new og(e),o=0;o<t.length;o++){for(var s=t[o],u=s._private,l=u.classes,c=!1,f=0;f<e.length;f++){var h=e[f],d=l.has(h);if(!d){c=!0;break}}c||(c=l.size!==e.length),c&&(u.classes=a,i.push(s))}return i.length>0&&this.spawn(i).updateStyle().emit("class"),t},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var t=this[0];return t!=null&&t._private.classes.has(e)},toggleClass:function(e,t){di(e)||(e=e.match(/\S+/g)||[]);for(var n=this,i=t===void 0,a=[],o=0,s=n.length;o<s;o++)for(var u=n[o],l=u._private.classes,c=!1,f=0;f<e.length;f++){var h=e[f],d=l.has(h),v=!1;t||i&&!d?(l.add(h),v=!0):(!t||i&&d)&&(l.delete(h),v=!0),!c&&v&&(a.push(u),c=!0)}return a.length>0&&this.spawn(a).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,t){var n=this;if(t==null)t=250;else if(t===0)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},t),n}};Om.className=Om.classNames=Om.classes;var _n={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:No,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};_n.variable="(?:[\\w-.]|(?:\\\\"+_n.metaChar+"))+";_n.className="(?:[\\w-]|(?:\\\\"+_n.metaChar+"))+";_n.value=_n.string+"|"+_n.number;_n.id=_n.variable;(function(){var r,e,t;for(r=_n.comparatorOp.split("|"),t=0;t<r.length;t++)e=r[t],_n.comparatorOp+="|@"+e;for(r=_n.comparatorOp.split("|"),t=0;t<r.length;t++)e=r[t],!(e.indexOf("!")>=0)&&e!=="="&&(_n.comparatorOp+="|\\!"+e)})();var si=function(){return{checks:[]}},Jt={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},Tw=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(r,e){return pP(r.selector,e.selector)}),pI=function(){for(var r={},e,t=0;t<Tw.length;t++)e=Tw[t],r[e.selector]=e.matches;return r}(),gI=function(e,t){return pI[e](t)},yI="("+Tw.map(function(r){return r.selector}).join("|")+")",Ip=function(e){return e.replace(new RegExp("\\\\("+_n.metaChar+")","g"),function(t,n){return n})},Jh=function(e,t,n){e[e.length-1]=n},Cw=[{name:"group",query:!0,regex:"("+_n.group+")",populate:function(e,t,n){var i=Lo(n,1),a=i[0];t.checks.push({type:Jt.GROUP,value:a==="*"?a:a+"s"})}},{name:"state",query:!0,regex:yI,populate:function(e,t,n){var i=Lo(n,1),a=i[0];t.checks.push({type:Jt.STATE,value:a})}},{name:"id",query:!0,regex:"\\#("+_n.id+")",populate:function(e,t,n){var i=Lo(n,1),a=i[0];t.checks.push({type:Jt.ID,value:Ip(a)})}},{name:"className",query:!0,regex:"\\.("+_n.className+")",populate:function(e,t,n){var i=Lo(n,1),a=i[0];t.checks.push({type:Jt.CLASS,value:Ip(a)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+_n.variable+")\\s*\\]",populate:function(e,t,n){var i=Lo(n,1),a=i[0];t.checks.push({type:Jt.DATA_EXIST,field:Ip(a)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+_n.variable+")\\s*("+_n.comparatorOp+")\\s*("+_n.value+")\\s*\\]",populate:function(e,t,n){var i=Lo(n,3),a=i[0],o=i[1],s=i[2],u=new RegExp("^"+_n.string+"$").exec(s)!=null;u?s=s.substring(1,s.length-1):s=parseFloat(s),t.checks.push({type:Jt.DATA_COMPARE,field:Ip(a),operator:o,value:s})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+_n.boolOp+")\\s*("+_n.variable+")\\s*\\]",populate:function(e,t,n){var i=Lo(n,2),a=i[0],o=i[1];t.checks.push({type:Jt.DATA_BOOL,field:Ip(o),operator:a})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+_n.meta+")\\s*("+_n.comparatorOp+")\\s*("+_n.number+")\\s*\\]\\]",populate:function(e,t,n){var i=Lo(n,3),a=i[0],o=i[1],s=i[2];t.checks.push({type:Jt.META_COMPARE,field:Ip(a),operator:o,value:parseFloat(s)})}},{name:"nextQuery",separator:!0,regex:_n.separator,populate:function(e,t){var n=e.currentSubject,i=e.edgeCount,a=e.compoundCount,o=e[e.length-1];n!=null&&(o.subject=n,e.currentSubject=null),o.edgeCount=i,o.compoundCount=a,e.edgeCount=0,e.compoundCount=0;var s=e[e.length++]=si();return s}},{name:"directedEdge",separator:!0,regex:_n.directedEdge,populate:function(e,t){if(e.currentSubject==null){var n=si(),i=t,a=si();return n.checks.push({type:Jt.DIRECTED_EDGE,source:i,target:a}),Jh(e,t,n),e.edgeCount++,a}else{var o=si(),s=t,u=si();return o.checks.push({type:Jt.NODE_SOURCE,source:s,target:u}),Jh(e,t,o),e.edgeCount++,u}}},{name:"undirectedEdge",separator:!0,regex:_n.undirectedEdge,populate:function(e,t){if(e.currentSubject==null){var n=si(),i=t,a=si();return n.checks.push({type:Jt.UNDIRECTED_EDGE,nodes:[i,a]}),Jh(e,t,n),e.edgeCount++,a}else{var o=si(),s=t,u=si();return o.checks.push({type:Jt.NODE_NEIGHBOR,node:s,neighbor:u}),Jh(e,t,o),u}}},{name:"child",separator:!0,regex:_n.child,populate:function(e,t){if(e.currentSubject==null){var n=si(),i=si(),a=e[e.length-1];return n.checks.push({type:Jt.CHILD,parent:a,child:i}),Jh(e,t,n),e.compoundCount++,i}else if(e.currentSubject===t){var o=si(),s=e[e.length-1],u=si(),l=si(),c=si(),f=si();return o.checks.push({type:Jt.COMPOUND_SPLIT,left:s,right:u,subject:l}),l.checks=t.checks,t.checks=[{type:Jt.TRUE}],f.checks.push({type:Jt.TRUE}),u.checks.push({type:Jt.PARENT,parent:f,child:c}),Jh(e,s,o),e.currentSubject=l,e.compoundCount++,c}else{var h=si(),d=si(),v=[{type:Jt.PARENT,parent:h,child:d}];return h.checks=t.checks,t.checks=v,e.compoundCount++,d}}},{name:"descendant",separator:!0,regex:_n.descendant,populate:function(e,t){if(e.currentSubject==null){var n=si(),i=si(),a=e[e.length-1];return n.checks.push({type:Jt.DESCENDANT,ancestor:a,descendant:i}),Jh(e,t,n),e.compoundCount++,i}else if(e.currentSubject===t){var o=si(),s=e[e.length-1],u=si(),l=si(),c=si(),f=si();return o.checks.push({type:Jt.COMPOUND_SPLIT,left:s,right:u,subject:l}),l.checks=t.checks,t.checks=[{type:Jt.TRUE}],f.checks.push({type:Jt.TRUE}),u.checks.push({type:Jt.ANCESTOR,ancestor:f,descendant:c}),Jh(e,s,o),e.currentSubject=l,e.compoundCount++,c}else{var h=si(),d=si(),v=[{type:Jt.ANCESTOR,ancestor:h,descendant:d}];return h.checks=t.checks,t.checks=v,e.compoundCount++,d}}},{name:"subject",modifier:!0,regex:_n.subject,populate:function(e,t){if(e.currentSubject!=null&&e.currentSubject!==t)return Fn("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=t;var n=e[e.length-1],i=n.checks[0],a=i==null?null:i.type;a===Jt.DIRECTED_EDGE?i.type=Jt.NODE_TARGET:a===Jt.UNDIRECTED_EDGE&&(i.type=Jt.NODE_NEIGHBOR,i.node=i.nodes[1],i.neighbor=i.nodes[0],i.nodes=null)}}];Cw.forEach(function(r){return r.regexObj=new RegExp("^"+r.regex)});var mI=function(e){for(var t,n,i,a=0;a<Cw.length;a++){var o=Cw[a],s=o.name,u=e.match(o.regexObj);if(u!=null){n=u,t=o,i=s;var l=u[0];e=e.substring(l.length);break}}return{expr:t,match:n,name:i,remaining:e}},bI=function(e){var t=e.match(/^\s+/);if(t){var n=t[0];e=e.substring(n.length)}return e},_I=function(e){var t=this,n=t.inputText=e,i=t[0]=si();for(t.length=1,n=bI(n);;){var a=mI(n);if(a.expr==null)return Fn("The selector `"+e+"`is invalid"),!1;var o=a.match.slice(1),s=a.expr.populate(t,i,o);if(s===!1)return!1;if(s!=null&&(i=s),n=a.remaining,n.match(/^\s*$/))break}var u=t[t.length-1];t.currentSubject!=null&&(u.subject=t.currentSubject),u.edgeCount=t.edgeCount,u.compoundCount=t.compoundCount;for(var l=0;l<t.length;l++){var c=t[l];if(c.compoundCount>0&&c.edgeCount>0)return Fn("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(c.edgeCount>1)return Fn("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;c.edgeCount===1&&Fn("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},wI=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(c){return c??""},t=function(c){return yr(c)?'"'+c+'"':e(c)},n=function(c){return" "+c+" "},i=function(c,f){var h=c.type,d=c.value;switch(h){case Jt.GROUP:{var v=e(d);return v.substring(0,v.length-1)}case Jt.DATA_COMPARE:{var y=c.field,w=c.operator;return"["+y+n(e(w))+t(d)+"]"}case Jt.DATA_BOOL:{var b=c.operator,p=c.field;return"["+e(b)+p+"]"}case Jt.DATA_EXIST:{var m=c.field;return"["+m+"]"}case Jt.META_COMPARE:{var x=c.operator,T=c.field;return"[["+T+n(e(x))+t(d)+"]]"}case Jt.STATE:return d;case Jt.ID:return"#"+d;case Jt.CLASS:return"."+d;case Jt.PARENT:case Jt.CHILD:return a(c.parent,f)+n(">")+a(c.child,f);case Jt.ANCESTOR:case Jt.DESCENDANT:return a(c.ancestor,f)+" "+a(c.descendant,f);case Jt.COMPOUND_SPLIT:{var P=a(c.left,f),C=a(c.subject,f),R=a(c.right,f);return P+(P.length>0?" ":"")+C+R}case Jt.TRUE:return""}},a=function(c,f){return c.checks.reduce(function(h,d,v){return h+(f===c&&v===0?"$":"")+i(d,f)},"")},o="",s=0;s<this.length;s++){var u=this[s];o+=a(u,u.subject),this.length>1&&s<this.length-1&&(o+=", ")}return this.toStringCache=o,o},EI={parse:_I,toString:wI},dT=function(e,t,n){var i,a=yr(e),o=Gt(e),s=yr(n),u,l,c=!1,f=!1,h=!1;switch(t.indexOf("!")>=0&&(t=t.replace("!",""),f=!0),t.indexOf("@")>=0&&(t=t.replace("@",""),c=!0),(a||s||c)&&(u=!a&&!o?"":""+e,l=""+n),c&&(e=u=u.toLowerCase(),n=l=l.toLowerCase()),t){case"*=":i=u.indexOf(l)>=0;break;case"$=":i=u.indexOf(l,u.length-l.length)>=0;break;case"^=":i=u.indexOf(l)===0;break;case"=":i=e===n;break;case">":h=!0,i=e>n;break;case">=":h=!0,i=e>=n;break;case"<":h=!0,i=e<n;break;case"<=":h=!0,i=e<=n;break;default:i=!1;break}return f&&(e!=null||!h)&&(i=!i),i},xI=function(e,t){switch(t){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},OI=function(e){return e!==void 0},s1=function(e,t){return e.data(t)},SI=function(e,t){return e[t]()},Ji=[],Ti=function(e,t){return e.checks.every(function(n){return Ji[n.type](n,t)})};Ji[Jt.GROUP]=function(r,e){var t=r.value;return t==="*"||t===e.group()};Ji[Jt.STATE]=function(r,e){var t=r.value;return gI(t,e)};Ji[Jt.ID]=function(r,e){var t=r.value;return e.id()===t};Ji[Jt.CLASS]=function(r,e){var t=r.value;return e.hasClass(t)};Ji[Jt.META_COMPARE]=function(r,e){var t=r.field,n=r.operator,i=r.value;return dT(SI(e,t),n,i)};Ji[Jt.DATA_COMPARE]=function(r,e){var t=r.field,n=r.operator,i=r.value;return dT(s1(e,t),n,i)};Ji[Jt.DATA_BOOL]=function(r,e){var t=r.field,n=r.operator;return xI(s1(e,t),n)};Ji[Jt.DATA_EXIST]=function(r,e){var t=r.field;return r.operator,OI(s1(e,t))};Ji[Jt.UNDIRECTED_EDGE]=function(r,e){var t=r.nodes[0],n=r.nodes[1],i=e.source(),a=e.target();return Ti(t,i)&&Ti(n,a)||Ti(n,i)&&Ti(t,a)};Ji[Jt.NODE_NEIGHBOR]=function(r,e){return Ti(r.node,e)&&e.neighborhood().some(function(t){return t.isNode()&&Ti(r.neighbor,t)})};Ji[Jt.DIRECTED_EDGE]=function(r,e){return Ti(r.source,e.source())&&Ti(r.target,e.target())};Ji[Jt.NODE_SOURCE]=function(r,e){return Ti(r.source,e)&&e.outgoers().some(function(t){return t.isNode()&&Ti(r.target,t)})};Ji[Jt.NODE_TARGET]=function(r,e){return Ti(r.target,e)&&e.incomers().some(function(t){return t.isNode()&&Ti(r.source,t)})};Ji[Jt.CHILD]=function(r,e){return Ti(r.child,e)&&Ti(r.parent,e.parent())};Ji[Jt.PARENT]=function(r,e){return Ti(r.parent,e)&&e.children().some(function(t){return Ti(r.child,t)})};Ji[Jt.DESCENDANT]=function(r,e){return Ti(r.descendant,e)&&e.ancestors().some(function(t){return Ti(r.ancestor,t)})};Ji[Jt.ANCESTOR]=function(r,e){return Ti(r.ancestor,e)&&e.descendants().some(function(t){return Ti(r.descendant,t)})};Ji[Jt.COMPOUND_SPLIT]=function(r,e){return Ti(r.subject,e)&&Ti(r.left,e)&&Ti(r.right,e)};Ji[Jt.TRUE]=function(){return!0};Ji[Jt.COLLECTION]=function(r,e){var t=r.value;return t.has(e)};Ji[Jt.FILTER]=function(r,e){var t=r.value;return t(e)};var TI=function(e){var t=this;if(t.length===1&&t[0].checks.length===1&&t[0].checks[0].type===Jt.ID)return e.getElementById(t[0].checks[0].value).collection();var n=function(a){for(var o=0;o<t.length;o++){var s=t[o];if(Ti(s,a))return!0}return!1};return t.text()==null&&(n=function(){return!0}),e.filter(n)},CI=function(e){for(var t=this,n=0;n<t.length;n++){var i=t[n];if(Ti(i,e))return!0}return!1},PI={matches:CI,filter:TI},ud=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||yr(e)&&e.match(/^\s*$/)||(Eu(e)?this.addQuery({checks:[{type:Jt.COLLECTION,value:e.collection()}]}):Wi(e)?this.addQuery({checks:[{type:Jt.FILTER,value:e}]}):yr(e)?this.parse(e)||(this.invalid=!0):qi("A selector must be created from a string; found "))},ld=ud.prototype;[EI,PI].forEach(function(r){return xr(ld,r)});ld.text=function(){return this.inputText};ld.size=function(){return this.length};ld.eq=function(r){return this[r]};ld.sameText=function(r){return!this.invalid&&!r.invalid&&this.text()===r.text()};ld.addQuery=function(r){this[this.length++]=r};ld.selector=ld.toString;var nd={allAre:function(e){var t=new ud(e);return this.every(function(n){return t.matches(n)})},is:function(e){var t=new ud(e);return this.some(function(n){return t.matches(n)})},some:function(e,t){for(var n=0;n<this.length;n++){var i=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(i)return!0}return!1},every:function(e,t){for(var n=0;n<this.length;n++){var i=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(!i)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var t=this.length,n=e.length;return t!==n?!1:t===1?this[0]===e[0]:this.every(function(i){return e.hasElementWithId(i.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(t){return e.hasElementWithId(t.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var t=this.neighborhood();return e.every(function(n){return t.hasElementWithId(n.id())})},contains:function(e){e=this.cy().collection(e);var t=this;return e.every(function(n){return t.hasElementWithId(n.id())})}};nd.allAreNeighbours=nd.allAreNeighbors;nd.has=nd.contains;nd.equal=nd.equals=nd.same;var el=function(e,t){return function(i,a,o,s){var u=i,l=this,c;if(u==null?c="":Eu(u)&&u.length===1&&(c=u.id()),l.length===1&&c){var f=l[0]._private,h=f.traversalCache=f.traversalCache||{},d=h[t]=h[t]||[],v=Lv(c),y=d[v];return y||(d[v]=e.call(l,i,a,o,s))}else return e.call(l,i,a,o,s)}},ng={parent:function(e){var t=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var i=0;i<this.length;i++){var a=this[i],o=a._private.parent;o&&t.push(o)}return this.spawn(t,!0).filter(e)},parents:function(e){for(var t=[],n=this.parent();n.nonempty();){for(var i=0;i<n.length;i++){var a=n[i];t.push(a)}n=n.parent()}return this.spawn(t,!0).filter(e)},commonAncestors:function(e){for(var t,n=0;n<this.length;n++){var i=this[n],a=i.parents();t=t||a,t=t.intersect(a)}return t.filter(e)},orphans:function(e){return this.stdFilter(function(t){return t.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(t){return t.isChild()}).filter(e)},children:el(function(r){for(var e=[],t=0;t<this.length;t++)for(var n=this[t],i=n._private.children,a=0;a<i.length;a++)e.push(i[a]);return this.spawn(e,!0).filter(r)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var t=[];function n(i){for(var a=0;a<i.length;a++){var o=i[a];t.push(o),o.children().nonempty()&&n(o.children())}}return n(this.children()),this.spawn(t,!0).filter(e)}};function u1(r,e,t,n){for(var i=[],a=new og,o=r.cy(),s=o.hasCompoundNodes(),u=0;u<r.length;u++){var l=r[u];t?i.push(l):s&&n(i,a,l)}for(;i.length>0;){var c=i.shift();e(c),a.add(c.id()),s&&n(i,a,c)}return r}function vT(r,e,t){if(t.isParent())for(var n=t._private.children,i=0;i<n.length;i++){var a=n[i];e.has(a.id())||r.push(a)}}ng.forEachDown=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return u1(this,r,e,vT)};function pT(r,e,t){if(t.isChild()){var n=t._private.parent;e.has(n.id())||r.push(n)}}ng.forEachUp=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return u1(this,r,e,pT)};function AI(r,e,t){pT(r,e,t),vT(r,e,t)}ng.forEachUpAndDown=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return u1(this,r,e,AI)};ng.ancestors=ng.parents;var cy,gT;cy=gT={data:Bn.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:Bn.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:Bn.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Bn.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:Bn.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:Bn.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};cy.attr=cy.data;cy.removeAttr=cy.removeData;var RI=gT,h0={};function g_(r){return function(e){var t=this;if(e===void 0&&(e=!0),t.length!==0)if(t.isNode()&&!t.removed()){for(var n=0,i=t[0],a=i._private.edges,o=0;o<a.length;o++){var s=a[o];!e&&s.isLoop()||(n+=r(i,s))}return n}else return}}xr(h0,{degree:g_(function(r,e){return e.source().same(e.target())?2:1}),indegree:g_(function(r,e){return e.target().same(r)?1:0}),outdegree:g_(function(r,e){return e.source().same(r)?1:0})});function kp(r,e){return function(t){for(var n,i=this.nodes(),a=0;a<i.length;a++){var o=i[a],s=o[r](t);s!==void 0&&(n===void 0||e(s,n))&&(n=s)}return n}}xr(h0,{minDegree:kp("degree",function(r,e){return r<e}),maxDegree:kp("degree",function(r,e){return r>e}),minIndegree:kp("indegree",function(r,e){return r<e}),maxIndegree:kp("indegree",function(r,e){return r>e}),minOutdegree:kp("outdegree",function(r,e){return r<e}),maxOutdegree:kp("outdegree",function(r,e){return r>e})});xr(h0,{totalDegree:function(e){for(var t=0,n=this.nodes(),i=0;i<n.length;i++)t+=n[i].degree(e);return t}});var Ql,yT,mT=function(e,t,n){for(var i=0;i<e.length;i++){var a=e[i];if(!a.locked()){var o=a._private.position,s={x:t.x!=null?t.x-o.x:0,y:t.y!=null?t.y-o.y:0};a.isParent()&&!(s.x===0&&s.y===0)&&a.children().shift(s,n),a.dirtyBoundingBoxCache()}}},mx={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,t){mT(e,t,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};Ql=yT={position:Bn.data(mx),silentPosition:Bn.data(xr({},mx,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,t){mT(e,t,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,t){if(wn(e))t?this.silentPosition(e):this.position(e);else if(Wi(e)){var n=e,i=this.cy();i.startBatch();for(var a=0;a<this.length;a++){var o=this[a],s=void 0;(s=n(o,a))&&(t?o.silentPosition(s):o.position(s))}i.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,t,n){var i;if(wn(e)?(i={x:Gt(e.x)?e.x:0,y:Gt(e.y)?e.y:0},n=t):yr(e)&&Gt(t)&&(i={x:0,y:0},i[e]=t),i!=null){var a=this.cy();a.startBatch();for(var o=0;o<this.length;o++){var s=this[o];if(!(a.hasCompoundNodes()&&s.isChild()&&s.ancestors().anySame(this))){var u=s.position(),l={x:u.x+i.x,y:u.y+i.y};n?s.silentPosition(l):s.position(l)}}a.endBatch()}return this},silentShift:function(e,t){return wn(e)?this.shift(e,!0):yr(e)&&Gt(t)&&this.shift(e,t,!0),this},renderedPosition:function(e,t){var n=this[0],i=this.cy(),a=i.zoom(),o=i.pan(),s=wn(e)?e:void 0,u=s!==void 0||t!==void 0&&yr(e);if(n&&n.isNode())if(u)for(var l=0;l<this.length;l++){var c=this[l];t!==void 0?c.position(e,(t-o[e])/a):s!==void 0&&c.position(YS(s,a,o))}else{var f=n.position();return s=a0(f,a,o),e===void 0?s:s[e]}else if(!u)return;return this},relativePosition:function(e,t){var n=this[0],i=this.cy(),a=wn(e)?e:void 0,o=a!==void 0||t!==void 0&&yr(e),s=i.hasCompoundNodes();if(n&&n.isNode())if(o)for(var u=0;u<this.length;u++){var l=this[u],c=s?l.parent():null,f=c&&c.length>0,h=f;f&&(c=c[0]);var d=h?c.position():{x:0,y:0};t!==void 0?l.position(e,t+d[e]):a!==void 0&&l.position({x:a.x+d.x,y:a.y+d.y})}else{var v=n.position(),y=s?n.parent():null,w=y&&y.length>0,b=w;w&&(y=y[0]);var p=b?y.position():{x:0,y:0};return a={x:v.x-p.x,y:v.y-p.y},e===void 0?a:a[e]}else if(!o)return;return this}};Ql.modelPosition=Ql.point=Ql.position;Ql.modelPositions=Ql.points=Ql.positions;Ql.renderedPoint=Ql.renderedPosition;Ql.relativePoint=Ql.relativePosition;var II=yT,Zp,pd;Zp=pd={};pd.renderedBoundingBox=function(r){var e=this.boundingBox(r),t=this.cy(),n=t.zoom(),i=t.pan(),a=e.x1*n+i.x,o=e.x2*n+i.x,s=e.y1*n+i.y,u=e.y2*n+i.y;return{x1:a,x2:o,y1:s,y2:u,w:o-a,h:u-s}};pd.dirtyCompoundBoundsCache=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(t){if(t.isParent()){var n=t._private;n.compoundBoundsClean=!1,n.bbCache=null,r||t.emitAndNotify("bounds")}}),this)};pd.updateCompoundBounds=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!r&&e.batching())return this;function t(o){if(!o.isParent())return;var s=o._private,u=o.children(),l=o.pstyle("compound-sizing-wrt-labels").value==="include",c={width:{val:o.pstyle("min-width").pfValue,left:o.pstyle("min-width-bias-left"),right:o.pstyle("min-width-bias-right")},height:{val:o.pstyle("min-height").pfValue,top:o.pstyle("min-height-bias-top"),bottom:o.pstyle("min-height-bias-bottom")}},f=u.boundingBox({includeLabels:l,includeOverlays:!1,useCache:!1}),h=s.position;(f.w===0||f.h===0)&&(f={w:o.pstyle("width").pfValue,h:o.pstyle("height").pfValue},f.x1=h.x-f.w/2,f.x2=h.x+f.w/2,f.y1=h.y-f.h/2,f.y2=h.y+f.h/2);function d(D,N,j){var B=0,z=0,W=N+j;return D>0&&W>0&&(B=N/W*D,z=j/W*D),{biasDiff:B,biasComplementDiff:z}}function v(D,N,j,B){if(j.units==="%")switch(B){case"width":return D>0?j.pfValue*D:0;case"height":return N>0?j.pfValue*N:0;case"average":return D>0&&N>0?j.pfValue*(D+N)/2:0;case"min":return D>0&&N>0?D>N?j.pfValue*N:j.pfValue*D:0;case"max":return D>0&&N>0?D>N?j.pfValue*D:j.pfValue*N:0;default:return 0}else return j.units==="px"?j.pfValue:0}var y=c.width.left.value;c.width.left.units==="px"&&c.width.val>0&&(y=y*100/c.width.val);var w=c.width.right.value;c.width.right.units==="px"&&c.width.val>0&&(w=w*100/c.width.val);var b=c.height.top.value;c.height.top.units==="px"&&c.height.val>0&&(b=b*100/c.height.val);var p=c.height.bottom.value;c.height.bottom.units==="px"&&c.height.val>0&&(p=p*100/c.height.val);var m=d(c.width.val-f.w,y,w),x=m.biasDiff,T=m.biasComplementDiff,P=d(c.height.val-f.h,b,p),C=P.biasDiff,R=P.biasComplementDiff;s.autoPadding=v(f.w,f.h,o.pstyle("padding"),o.pstyle("padding-relative-to").value),s.autoWidth=Math.max(f.w,c.width.val),h.x=(-x+f.x1+f.x2+T)/2,s.autoHeight=Math.max(f.h,c.height.val),h.y=(-C+f.y1+f.y2+R)/2}for(var n=0;n<this.length;n++){var i=this[n],a=i._private;(!a.compoundBoundsClean||r)&&(t(i),e.batching()||(a.compoundBoundsClean=!0))}return this};var Ju=function(e){return e===1/0||e===-1/0?0:e},Kl=function(e,t,n,i,a){i-t===0||a-n===0||t==null||n==null||i==null||a==null||(e.x1=t<e.x1?t:e.x1,e.x2=i>e.x2?i:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=a>e.y2?a:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},Pv=function(e,t){return t==null?e:Kl(e,t.x1,t.y1,t.x2,t.y2)},Bg=function(e,t,n){return Fs(e,t,n)},rm=function(e,t,n){if(!t.cy().headless()){var i=t._private,a=i.rstyle,o=a.arrowWidth/2,s=t.pstyle(n+"-arrow-shape").value,u,l;if(s!=="none"){n==="source"?(u=a.srcX,l=a.srcY):n==="target"?(u=a.tgtX,l=a.tgtY):(u=a.midX,l=a.midY);var c=i.arrowBounds=i.arrowBounds||{},f=c[n]=c[n]||{};f.x1=u-o,f.y1=l-o,f.x2=u+o,f.y2=l+o,f.w=f.x2-f.x1,f.h=f.y2-f.y1,Em(f,1),Kl(e,f.x1,f.y1,f.x2,f.y2)}}},y_=function(e,t,n){if(!t.cy().headless()){var i;n?i=n+"-":i="";var a=t._private,o=a.rstyle,s=t.pstyle(i+"label").strValue;if(s){var u=t.pstyle("text-halign"),l=t.pstyle("text-valign"),c=Bg(o,"labelWidth",n),f=Bg(o,"labelHeight",n),h=Bg(o,"labelX",n),d=Bg(o,"labelY",n),v=t.pstyle(i+"text-margin-x").pfValue,y=t.pstyle(i+"text-margin-y").pfValue,w=t.isEdge(),b=t.pstyle(i+"text-rotation"),p=t.pstyle("text-outline-width").pfValue,m=t.pstyle("text-border-width").pfValue,x=m/2,T=t.pstyle("text-background-padding").pfValue,P=2,C=f,R=c,D=R/2,N=C/2,j,B,z,W;if(w)j=h-D,B=h+D,z=d-N,W=d+N;else{switch(u.value){case"left":j=h-R,B=h;break;case"center":j=h-D,B=h+D;break;case"right":j=h,B=h+R;break}switch(l.value){case"top":z=d-C,W=d;break;case"center":z=d-N,W=d+N;break;case"bottom":z=d,W=d+C;break}}var Z=v-Math.max(p,x)-T-P,Q=v+Math.max(p,x)+T+P,re=y-Math.max(p,x)-T-P,ee=y+Math.max(p,x)+T+P;j+=Z,B+=Q,z+=re,W+=ee;var ue=n||"main",de=a.labelBounds,se=de[ue]=de[ue]||{};se.x1=j,se.y1=z,se.x2=B,se.y2=W,se.w=B-j,se.h=W-z,se.leftPad=Z,se.rightPad=Q,se.topPad=re,se.botPad=ee;var me=w&&b.strValue==="autorotate",Me=b.pfValue!=null&&b.pfValue!==0;if(me||Me){var he=me?Bg(a.rstyle,"labelAngle",n):b.pfValue,fe=Math.cos(he),Ee=Math.sin(he),Ce=(j+B)/2,ke=(z+W)/2;if(!w){switch(u.value){case"left":Ce=B;break;case"right":Ce=j;break}switch(l.value){case"top":ke=W;break;case"bottom":ke=z;break}}var Re=function(ct,H){return ct=ct-Ce,H=H-ke,{x:ct*fe-H*Ee+Ce,y:ct*Ee+H*fe+ke}},ve=Re(j,z),we=Re(j,W),Oe=Re(B,z),Be=Re(B,W);j=Math.min(ve.x,we.x,Oe.x,Be.x),B=Math.max(ve.x,we.x,Oe.x,Be.x),z=Math.min(ve.y,we.y,Oe.y,Be.y),W=Math.max(ve.y,we.y,Oe.y,Be.y)}var Ye=ue+"Rot",ht=de[Ye]=de[Ye]||{};ht.x1=j,ht.y1=z,ht.x2=B,ht.y2=W,ht.w=B-j,ht.h=W-z,Kl(e,j,z,B,W),Kl(a.labelBounds.all,j,z,B,W)}return e}},kI=function(e,t){if(!t.cy().headless()){var n=t.pstyle("outline-opacity").value,i=t.pstyle("outline-width").value;if(n>0&&i>0){var a=t.pstyle("outline-offset").value,o=t.pstyle("shape").value,s=i+a,u=(e.w+s*2)/e.w,l=(e.h+s*2)/e.h,c=0,f=0;["diamond","pentagon","round-triangle"].includes(o)?(u=(e.w+s*2.4)/e.w,f=-s/3.6):["concave-hexagon","rhomboid","right-rhomboid"].includes(o)?u=(e.w+s*2.4)/e.w:o==="star"?(u=(e.w+s*2.8)/e.w,l=(e.h+s*2.6)/e.h,f=-s/3.8):o==="triangle"?(u=(e.w+s*2.8)/e.w,l=(e.h+s*2.4)/e.h,f=-s/1.4):o==="vee"&&(u=(e.w+s*4.4)/e.w,l=(e.h+s*3.8)/e.h,f=-s*.5);var h=e.h*l-e.h,d=e.w*u-e.w;if(xm(e,[Math.ceil(h/2),Math.ceil(d/2)]),c!=0||f!==0){var v=pA(e,c,f);XS(e,v)}}}},DI=function(e,t){var n=e._private.cy,i=n.styleEnabled(),a=n.headless(),o=qs(),s=e._private,u=e.isNode(),l=e.isEdge(),c,f,h,d,v,y,w=s.rstyle,b=u&&i?e.pstyle("bounds-expansion").pfValue:[0],p=function(Ct){return Ct.pstyle("display").value!=="none"},m=!i||p(e)&&(!l||p(e.source())&&p(e.target()));if(m){var x=0,T=0;i&&t.includeOverlays&&(x=e.pstyle("overlay-opacity").value,x!==0&&(T=e.pstyle("overlay-padding").value));var P=0,C=0;i&&t.includeUnderlays&&(P=e.pstyle("underlay-opacity").value,P!==0&&(C=e.pstyle("underlay-padding").value));var R=Math.max(T,C),D=0,N=0;if(i&&(D=e.pstyle("width").pfValue,N=D/2),u&&t.includeNodes){var j=e.position();v=j.x,y=j.y;var B=e.outerWidth(),z=B/2,W=e.outerHeight(),Z=W/2;c=v-z,f=v+z,h=y-Z,d=y+Z,Kl(o,c,h,f,d),i&&t.includeOutlines&&kI(o,e)}else if(l&&t.includeEdges)if(i&&!a){var Q=e.pstyle("curve-style").strValue;if(c=Math.min(w.srcX,w.midX,w.tgtX),f=Math.max(w.srcX,w.midX,w.tgtX),h=Math.min(w.srcY,w.midY,w.tgtY),d=Math.max(w.srcY,w.midY,w.tgtY),c-=N,f+=N,h-=N,d+=N,Kl(o,c,h,f,d),Q==="haystack"){var re=w.haystackPts;if(re&&re.length===2){if(c=re[0].x,h=re[0].y,f=re[1].x,d=re[1].y,c>f){var ee=c;c=f,f=ee}if(h>d){var ue=h;h=d,d=ue}Kl(o,c-N,h-N,f+N,d+N)}}else if(Q==="bezier"||Q==="unbundled-bezier"||Q.endsWith("segments")||Q.endsWith("taxi")){var de;switch(Q){case"bezier":case"unbundled-bezier":de=w.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":de=w.linePts;break}if(de!=null)for(var se=0;se<de.length;se++){var me=de[se];c=me.x-N,f=me.x+N,h=me.y-N,d=me.y+N,Kl(o,c,h,f,d)}}}else{var Me=e.source(),he=Me.position(),fe=e.target(),Ee=fe.position();if(c=he.x,f=Ee.x,h=he.y,d=Ee.y,c>f){var Ce=c;c=f,f=Ce}if(h>d){var ke=h;h=d,d=ke}c-=N,f+=N,h-=N,d+=N,Kl(o,c,h,f,d)}if(i&&t.includeEdges&&l&&(rm(o,e,"mid-source"),rm(o,e,"mid-target"),rm(o,e,"source"),rm(o,e,"target")),i){var Re=e.pstyle("ghost").value==="yes";if(Re){var ve=e.pstyle("ghost-offset-x").pfValue,we=e.pstyle("ghost-offset-y").pfValue;Kl(o,o.x1+ve,o.y1+we,o.x2+ve,o.y2+we)}}var Oe=s.bodyBounds=s.bodyBounds||{};oE(Oe,o),xm(Oe,b),Em(Oe,1),i&&(c=o.x1,f=o.x2,h=o.y1,d=o.y2,Kl(o,c-R,h-R,f+R,d+R));var Be=s.overlayBounds=s.overlayBounds||{};oE(Be,o),xm(Be,b),Em(Be,1);var Ye=s.labelBounds=s.labelBounds||{};Ye.all!=null?vA(Ye.all):Ye.all=qs(),i&&t.includeLabels&&(t.includeMainLabels&&y_(o,e,null),l&&(t.includeSourceLabels&&y_(o,e,"source"),t.includeTargetLabels&&y_(o,e,"target")))}return o.x1=Ju(o.x1),o.y1=Ju(o.y1),o.x2=Ju(o.x2),o.y2=Ju(o.y2),o.w=Ju(o.x2-o.x1),o.h=Ju(o.y2-o.y1),o.w>0&&o.h>0&&m&&(xm(o,b),Em(o,1)),o},bT=function(e){var t=0,n=function(o){return(o?1:0)<<t++},i=0;return i+=n(e.incudeNodes),i+=n(e.includeEdges),i+=n(e.includeLabels),i+=n(e.includeMainLabels),i+=n(e.includeSourceLabels),i+=n(e.includeTargetLabels),i+=n(e.includeOverlays),i+=n(e.includeOutlines),i},_T=function(e){var t=function(s){return Math.round(s)};if(e.isEdge()){var n=e.source().position(),i=e.target().position();return J1([t(n.x),t(n.y),t(i.x),t(i.y)])}else{var a=e.position();return J1([t(a.x),t(a.y)])}},bx=function(e,t){var n=e._private,i,a=e.isEdge(),o=t==null?_x:bT(t),s=o===_x;if(n.bbCache==null?(i=DI(e,fy),n.bbCache=i,n.bbCachePosKey=_T(e)):i=n.bbCache,!s){var u=e.isNode();i=qs(),(t.includeNodes&&u||t.includeEdges&&!u)&&(t.includeOverlays?Pv(i,n.overlayBounds):Pv(i,n.bodyBounds)),t.includeLabels&&(t.includeMainLabels&&(!a||t.includeSourceLabels&&t.includeTargetLabels)?Pv(i,n.labelBounds.all):(t.includeMainLabels&&Pv(i,n.labelBounds.mainRot),t.includeSourceLabels&&Pv(i,n.labelBounds.sourceRot),t.includeTargetLabels&&Pv(i,n.labelBounds.targetRot))),i.w=i.x2-i.x1,i.h=i.y2-i.y1}return i},fy={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},_x=bT(fy),wx=Oa(fy);pd.boundingBox=function(r){var e,t=r===void 0||r.useCache===void 0||r.useCache===!0,n=eg(function(c){var f=c._private;return f.bbCache==null||f.styleDirty||f.bbCachePosKey!==_T(c)},function(c){return c.id()});if(t&&this.length===1&&!n(this[0]))r===void 0?r=fy:r=wx(r),e=bx(this[0],r);else{e=qs(),r=r||fy;var i=wx(r),a=this,o=a.cy(),s=o.styleEnabled();this.edges().forEach(n),this.nodes().forEach(n),s&&this.recalculateRenderedStyle(t),this.updateCompoundBounds(!t);for(var u=0;u<a.length;u++){var l=a[u];n(l)&&l.dirtyBoundingBoxCache(),Pv(e,bx(l,i))}}return e.x1=Ju(e.x1),e.y1=Ju(e.y1),e.x2=Ju(e.x2),e.y2=Ju(e.y2),e.w=Ju(e.x2-e.x1),e.h=Ju(e.y2-e.y1),e};pd.dirtyBoundingBoxCache=function(){for(var r=0;r<this.length;r++){var e=this[r]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};pd.boundingBoxAt=function(r){var e=this.nodes(),t=this.cy(),n=t.hasCompoundNodes(),i=t.collection();if(n&&(i=e.filter(function(l){return l.isParent()}),e=e.not(i)),wn(r)){var a=r;r=function(){return a}}var o=function(c,f){return c._private.bbAtOldPos=r(c,f)},s=function(c){return c._private.bbAtOldPos};t.startBatch(),e.forEach(o).silentPositions(r),n&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0));var u=dA(this.boundingBox({useCache:!1}));return e.silentPositions(s),n&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0)),t.endBatch(),u};Zp.boundingbox=Zp.bb=Zp.boundingBox;Zp.renderedBoundingbox=Zp.renderedBoundingBox;var MI=pd,Kg,xy;Kg=xy={};var wT=function(e){e.uppercaseName=B1(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=B1(e.outerName),Kg[e.name]=function(){var n=this[0],i=n._private,a=i.cy,o=a._private.styleEnabled;if(n)if(o){if(n.isParent())return n.updateCompoundBounds(),i[e.autoName]||0;var s=n.pstyle(e.name);switch(s.strValue){case"label":return n.recalculateRenderedStyle(),i.rstyle[e.labelName]||0;default:return s.pfValue}}else return 1},Kg["outer"+e.uppercaseName]=function(){var n=this[0],i=n._private,a=i.cy,o=a._private.styleEnabled;if(n)if(o){var s=n[e.name](),u=n.pstyle("border-position").value,l;u==="center"?l=n.pstyle("border-width").pfValue:u==="outside"?l=2*n.pstyle("border-width").pfValue:l=0;var c=2*n.padding();return s+l+c}else return 1},Kg["rendered"+e.uppercaseName]=function(){var n=this[0];if(n){var i=n[e.name]();return i*this.cy().zoom()}},Kg["rendered"+e.uppercaseOuterName]=function(){var n=this[0];if(n){var i=n[e.outerName]();return i*this.cy().zoom()}}};wT({name:"width"});wT({name:"height"});xy.padding=function(){var r=this[0],e=r._private;return r.isParent()?(r.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:r.pstyle("padding").pfValue):r.pstyle("padding").pfValue};xy.paddedHeight=function(){var r=this[0];return r.height()+2*r.padding()};xy.paddedWidth=function(){var r=this[0];return r.width()+2*r.padding()};var LI=xy,NI=function(e,t){if(e.isEdge()&&e.takesUpSpace())return t(e)},jI=function(e,t){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy();return a0(t(e),n.zoom(),n.pan())}},BI=function(e,t){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy(),i=n.pan(),a=n.zoom();return t(e).map(function(o){return a0(o,a,i)})}},FI=function(e){return e.renderer().getControlPoints(e)},UI=function(e){return e.renderer().getSegmentPoints(e)},zI=function(e){return e.renderer().getSourceEndpoint(e)},GI=function(e){return e.renderer().getTargetEndpoint(e)},VI=function(e){return e.renderer().getEdgeMidpoint(e)},Ex={controlPoints:{get:FI,mult:!0},segmentPoints:{get:UI,mult:!0},sourceEndpoint:{get:zI},targetEndpoint:{get:GI},midpoint:{get:VI}},qI=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},WI=Object.keys(Ex).reduce(function(r,e){var t=Ex[e],n=qI(e);return r[e]=function(){return NI(this,t.get)},t.mult?r[n]=function(){return BI(this,t.get)}:r[n]=function(){return jI(this,t.get)},r},{}),HI=xr({},II,MI,LI,WI);/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var ET=function(e,t){this.recycle(e,t)};function Fg(){return!1}function nm(){return!0}ET.prototype={instanceString:function(){return"event"},recycle:function(e,t){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Fg,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?nm:Fg):e!=null&&e.type?t=e:this.type=e,t!=null&&(this.originalEvent=t.originalEvent,this.type=t.type!=null?t.type:this.type,this.cy=t.cy,this.target=t.target,this.position=t.position,this.renderedPosition=t.renderedPosition,this.namespace=t.namespace,this.layout=t.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,i=this.cy.zoom(),a=this.cy.pan();this.renderedPosition={x:n.x*i+a.x,y:n.y*i+a.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=nm;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=nm;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=nm,this.stopPropagation()},isDefaultPrevented:Fg,isPropagationStopped:Fg,isImmediatePropagationStopped:Fg};var xT=/^([^.]+)(\.(?:[^.]+))?$/,YI=".*",OT={qualifierCompare:function(e,t){return e===t},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},xx=Object.keys(OT),XI={};function d0(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:XI,e=arguments.length>1?arguments[1]:void 0,t=0;t<xx.length;t++){var n=xx[t];this[n]=r[n]||OT[n]}this.context=e||this.context,this.listeners=[],this.emitting=0}var cd=d0.prototype,ST=function(e,t,n,i,a,o,s){Wi(i)&&(a=i,i=null),s&&(o==null?o=s:o=xr({},o,s));for(var u=di(n)?n:n.split(/\s+/),l=0;l<u.length;l++){var c=u[l];if(!od(c)){var f=c.match(xT);if(f){var h=f[1],d=f[2]?f[2]:null,v=t(e,c,h,d,i,a,o);if(v===!1)break}}}},Ox=function(e,t){return e.addEventFields(e.context,t),new ET(t.type,t)},KI=function(e,t,n){if(iP(n)){t(e,n);return}else if(wn(n)){t(e,Ox(e,n));return}for(var i=di(n)?n:n.split(/\s+/),a=0;a<i.length;a++){var o=i[a];if(!od(o)){var s=o.match(xT);if(s){var u=s[1],l=s[2]?s[2]:null,c=Ox(e,{type:u,namespace:l,target:e.context});t(e,c)}}}};cd.on=cd.addListener=function(r,e,t,n,i){return ST(this,function(a,o,s,u,l,c,f){Wi(c)&&a.listeners.push({event:o,callback:c,type:s,namespace:u,qualifier:l,conf:f})},r,e,t,n,i),this};cd.one=function(r,e,t,n){return this.on(r,e,t,n,{one:!0})};cd.removeListener=cd.off=function(r,e,t,n){var i=this;this.emitting!==0&&(this.listeners=jP(this.listeners));for(var a=this.listeners,o=function(l){var c=a[l];ST(i,function(f,h,d,v,y,w){if((c.type===d||r==="*")&&(!v&&c.namespace!==".*"||c.namespace===v)&&(!y||f.qualifierCompare(c.qualifier,y))&&(!w||c.callback===w))return a.splice(l,1),!1},r,e,t,n)},s=a.length-1;s>=0;s--)o(s);return this};cd.removeAllListeners=function(){return this.removeListener("*")};cd.emit=cd.trigger=function(r,e,t){var n=this.listeners,i=n.length;return this.emitting++,di(e)||(e=[e]),KI(this,function(a,o){t!=null&&(n=[{event:o.event,type:o.type,namespace:o.namespace,callback:t}],i=n.length);for(var s=function(){var c=n[u];if(c.type===o.type&&(!c.namespace||c.namespace===o.namespace||c.namespace===YI)&&a.eventMatches(a.context,c,o)){var f=[o];e!=null&&FP(f,e),a.beforeEmit(a.context,c,o),c.conf&&c.conf.one&&(a.listeners=a.listeners.filter(function(v){return v!==c}));var h=a.callbackContext(a.context,c,o),d=c.callback.apply(h,f);a.afterEmit(a.context,c,o),d===!1&&(o.stopPropagation(),o.preventDefault())}},u=0;u<i;u++)s();a.bubble(a.context)&&!o.isPropagationStopped()&&a.parent(a.context).emit(o,e)},r),this.emitting--,this};var $I={qualifierCompare:function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},eventMatches:function(e,t,n){var i=t.qualifier;return i!=null?e!==n.target&&yy(n.target)&&i.matches(n.target):!0},addEventFields:function(e,t){t.cy=e.cy(),t.target=e},callbackContext:function(e,t,n){return t.qualifier!=null?n.target:e},beforeEmit:function(e,t){t.conf&&t.conf.once&&t.conf.onceCollection.removeListener(t.event,t.qualifier,t.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},im=function(e){return yr(e)?new ud(e):e},TT={createEmitter:function(){for(var e=0;e<this.length;e++){var t=this[e],n=t._private;n.emitter||(n.emitter=new d0($I,t))}return this},emitter:function(){return this._private.emitter},on:function(e,t,n){for(var i=im(t),a=0;a<this.length;a++){var o=this[a];o.emitter().on(e,i,n)}return this},removeListener:function(e,t,n){for(var i=im(t),a=0;a<this.length;a++){var o=this[a];o.emitter().removeListener(e,i,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var t=this[e];t.emitter().removeAllListeners()}return this},one:function(e,t,n){for(var i=im(t),a=0;a<this.length;a++){var o=this[a];o.emitter().one(e,i,n)}return this},once:function(e,t,n){for(var i=im(t),a=0;a<this.length;a++){var o=this[a];o.emitter().on(e,i,n,{once:!0,onceCollection:this})}},emit:function(e,t){for(var n=0;n<this.length;n++){var i=this[n];i.emitter().emit(e,t)}return this},emitAndNotify:function(e,t){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,t),this}};Bn.eventAliasesOn(TT);var CT={nodes:function(e){return this.filter(function(t){return t.isNode()}).filter(e)},edges:function(e){return this.filter(function(t){return t.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),t=this.spawn(),n=0;n<this.length;n++){var i=this[n];i.isNode()?e.push(i):t.push(i)}return{nodes:e,edges:t}},filter:function(e,t){if(e===void 0)return this;if(yr(e)||Eu(e))return new ud(e).filter(this);if(Wi(e)){for(var n=this.spawn(),i=this,a=0;a<i.length;a++){var o=i[a],s=t?e.apply(t,[o,a,i]):e(o,a,i);s&&n.push(o)}return n}return this.spawn()},not:function(e){if(e){yr(e)&&(e=this.filter(e));for(var t=this.spawn(),n=0;n<this.length;n++){var i=this[n],a=e.has(i);a||t.push(i)}return t}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(yr(e)){var t=e;return this.filter(t)}for(var n=this.spawn(),i=this,a=e,o=this.length<e.length,s=o?i:a,u=o?a:i,l=0;l<s.length;l++){var c=s[l];u.has(c)&&n.push(c)}return n},xor:function(e){var t=this._private.cy;yr(e)&&(e=t.$(e));var n=this.spawn(),i=this,a=e,o=function(u,l){for(var c=0;c<u.length;c++){var f=u[c],h=f._private.data.id,d=l.hasElementWithId(h);d||n.push(f)}};return o(i,a),o(a,i),n},diff:function(e){var t=this._private.cy;yr(e)&&(e=t.$(e));var n=this.spawn(),i=this.spawn(),a=this.spawn(),o=this,s=e,u=function(c,f,h){for(var d=0;d<c.length;d++){var v=c[d],y=v._private.data.id,w=f.hasElementWithId(y);w?a.merge(v):h.push(v)}};return u(o,s,n),u(s,o,i),{left:n,right:i,both:a}},add:function(e){var t=this._private.cy;if(!e)return this;if(yr(e)){var n=e;e=t.mutableElements().filter(n)}for(var i=this.spawnSelf(),a=0;a<e.length;a++){var o=e[a],s=!this.has(o);s&&i.push(o)}return i},merge:function(e){var t=this._private,n=t.cy;if(!e)return this;if(e&&yr(e)){var i=e;e=n.mutableElements().filter(i)}for(var a=t.map,o=0;o<e.length;o++){var s=e[o],u=s._private.data.id,l=!a.has(u);if(l){var c=this.length++;this[c]=s,a.set(u,{ele:s,index:c})}}return this},unmergeAt:function(e){var t=this[e],n=t.id(),i=this._private,a=i.map;this[e]=void 0,a.delete(n);var o=e===this.length-1;if(this.length>1&&!o){var s=this.length-1,u=this[s],l=u._private.data.id;this[s]=void 0,this[e]=u,a.set(l,{ele:u,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var t=this._private,n=e._private.data.id,i=t.map,a=i.get(n);if(!a)return this;var o=a.index;return this.unmergeAt(o),this},unmerge:function(e){var t=this._private.cy;if(!e)return this;if(e&&yr(e)){var n=e;e=t.mutableElements().filter(n)}for(var i=0;i<e.length;i++)this.unmergeOne(e[i]);return this},unmergeBy:function(e){for(var t=this.length-1;t>=0;t--){var n=this[t];e(n)&&this.unmergeAt(t)}return this},map:function(e,t){for(var n=[],i=this,a=0;a<i.length;a++){var o=i[a],s=t?e.apply(t,[o,a,i]):e(o,a,i);n.push(s)}return n},reduce:function(e,t){for(var n=t,i=this,a=0;a<i.length;a++)n=e(n,i[a],a,i);return n},max:function(e,t){for(var n=-1/0,i,a=this,o=0;o<a.length;o++){var s=a[o],u=t?e.apply(t,[s,o,a]):e(s,o,a);u>n&&(n=u,i=s)}return{value:n,ele:i}},min:function(e,t){for(var n=1/0,i,a=this,o=0;o<a.length;o++){var s=a[o],u=t?e.apply(t,[s,o,a]):e(s,o,a);u<n&&(n=u,i=s)}return{value:n,ele:i}}},Sn=CT;Sn.u=Sn["|"]=Sn["+"]=Sn.union=Sn.or=Sn.add;Sn["\\"]=Sn["!"]=Sn["-"]=Sn.difference=Sn.relativeComplement=Sn.subtract=Sn.not;Sn.n=Sn["&"]=Sn["."]=Sn.and=Sn.intersection=Sn.intersect;Sn["^"]=Sn["(+)"]=Sn["(-)"]=Sn.symmetricDifference=Sn.symdiff=Sn.xor;Sn.fnFilter=Sn.filterFn=Sn.stdFilter=Sn.filter;Sn.complement=Sn.abscomp=Sn.absoluteComplement;var ZI={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},PT=function(e,t){var n=e.cy(),i=n.hasCompoundNodes();function a(c){var f=c.pstyle("z-compound-depth");return f.value==="auto"?i?c.zDepth():0:f.value==="bottom"?-1:f.value==="top"?Zw:0}var o=a(e)-a(t);if(o!==0)return o;function s(c){var f=c.pstyle("z-index-compare");return f.value==="auto"&&c.isNode()?1:0}var u=s(e)-s(t);if(u!==0)return u;var l=e.pstyle("z-index").value-t.pstyle("z-index").value;return l!==0?l:e.poolIndex()-t.poolIndex()},Wm={forEach:function(e,t){if(Wi(e))for(var n=this.length,i=0;i<n;i++){var a=this[i],o=t?e.apply(t,[a,i,this]):e(a,i,this);if(o===!1)break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(e,t){var n=[],i=this.length;t==null&&(t=i),e==null&&(e=0),e<0&&(e=i+e),t<0&&(t=i+t);for(var a=e;a>=0&&a<t&&a<i;a++)n.push(this[a]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!Wi(e))return this;var t=this.toArray().sort(e);return this.spawn(t)},sortByZIndex:function(){return this.sort(PT)},zDepth:function(){var e=this[0];if(e){var t=e._private,n=t.group;if(n==="nodes"){var i=t.data.parent?e.parents().size():0;return e.isParent()?i:Zw-1}else{var a=t.source,o=t.target,s=a.zDepth(),u=o.zDepth();return Math.max(s,u,0)}}}};Wm.each=Wm.forEach;var QI=function(){var e="undefined",t=(typeof Symbol>"u"?"undefined":Bo(Symbol))!=e&&Bo(Symbol.iterator)!=e;t&&(Wm[Symbol.iterator]=function(){var n=this,i={value:void 0,done:!1},a=0,o=this.length;return PS({next:function(){return a<o?i.value=n[a++]:(i.value=void 0,i.done=!0),i}},Symbol.iterator,function(){return this})})};QI();var JI=Oa({nodeDimensionsIncludeLabels:!1}),Sm={layoutDimensions:function(e){e=JI(e);var t;if(!this.takesUpSpace())t={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();t={w:n.w,h:n.h}}else t={w:this.outerWidth(),h:this.outerHeight()};return(t.w===0||t.h===0)&&(t.w=t.h=1),t},layoutPositions:function(e,t,n){var i=this.nodes().filter(function(T){return!T.isParent()}),a=this.cy(),o=t.eles,s=function(P){return P.id()},u=eg(n,s);e.emit({type:"layoutstart",layout:e}),e.animations=[];var l=function(P,C,R){var D={x:C.x1+C.w/2,y:C.y1+C.h/2},N={x:(R.x-D.x)*P,y:(R.y-D.y)*P};return{x:D.x+N.x,y:D.y+N.y}},c=t.spacingFactor&&t.spacingFactor!==1,f=function(){if(!c)return null;for(var P=qs(),C=0;C<i.length;C++){var R=i[C],D=u(R,C);gA(P,D.x,D.y)}return P},h=f(),d=eg(function(T,P){var C=u(T,P);if(c){var R=Math.abs(t.spacingFactor);C=l(R,h,C)}return t.transform!=null&&(C=t.transform(T,C)),C},s);if(t.animate){for(var v=0;v<i.length;v++){var y=i[v],w=d(y,v),b=t.animateFilter==null||t.animateFilter(y,v);if(b){var p=y.animation({position:w,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(p)}else y.position(w)}if(t.fit){var m=a.animation({fit:{boundingBox:o.boundingBoxAt(d),padding:t.padding},duration:t.animationDuration,easing:t.animationEasing});e.animations.push(m)}else if(t.zoom!==void 0&&t.pan!==void 0){var x=a.animation({zoom:t.zoom,pan:t.pan,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(x)}e.animations.forEach(function(T){return T.play()}),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),ag.all(e.animations.map(function(T){return T.promise()})).then(function(){e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e})})}else i.positions(d),t.fit&&a.fit(t.eles,t.padding),t.zoom!=null&&a.zoom(t.zoom),t.pan&&a.pan(t.pan),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var t=this.cy();return t.makeLayout(xr({},e,{eles:this}))}};Sm.createLayout=Sm.makeLayout=Sm.layout;function AT(r,e,t){var n=t._private,i=n.styleCache=n.styleCache||[],a;return(a=i[r])!=null||(a=i[r]=e(t)),a}function v0(r,e){return r=Lv(r),function(n){return AT(r,e,n)}}function p0(r,e){r=Lv(r);var t=function(i){return e.call(i)};return function(){var i=this[0];if(i)return AT(r,t,i)}}var Ea={recalculateRenderedStyle:function(e){var t=this.cy(),n=t.renderer(),i=t.styleEnabled();return n&&i&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),t=function(a){return a._private.styleCache=null};if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(t)}else this.forEach(function(i){t(i),i.connectedEdges().forEach(t)});return this},updateStyle:function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t.batching()){var n=t._private.batchStyleEles;return n.merge(this),this}var i=t.hasCompoundNodes(),a=this;e=!!(e||e===void 0),i&&(a=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var o=a;return e?o.emitAndNotify("style"):o.emit("style"),a.forEach(function(s){return s._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var t=0;t<this.length;t++){var n=this[t];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],i=n.cy();if(i.styleEnabled()&&n){n._private.styleDirty&&(n._private.styleDirty=!1,i.style().apply(n));var a=n._private.style[e];return a??(t?i.style().getDefaultProperty(e):null)}},numericStyle:function(e){var t=this[0];if(t.cy().styleEnabled()&&t){var n=t.pstyle(e);return n.pfValue!==void 0?n.pfValue:n.value}},numericStyleUnits:function(e){var t=this[0];if(t.cy().styleEnabled()&&t)return t.pstyle(e).units},renderedStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=this[0];if(n)return t.style().getRenderedStyle(n,e)},style:function(e,t){var n=this.cy();if(!n.styleEnabled())return this;var i=!1,a=n.style();if(wn(e)){var o=e;a.applyBypass(this,o,i),this.emitAndNotify("style")}else if(yr(e))if(t===void 0){var s=this[0];return s?a.getStylePropertyValue(s,e):void 0}else a.applyBypass(this,e,t,i),this.emitAndNotify("style");else if(e===void 0){var u=this[0];return u?a.getRawStyle(u):void 0}return this},removeStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=!1,i=t.style(),a=this;if(e===void 0)for(var o=0;o<a.length;o++){var s=a[o];i.removeAllBypasses(s,n)}else{e=e.split(/\s+/);for(var u=0;u<a.length;u++){var l=a[u];i.removeBypasses(l,e,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),n=this[0];if(n){var i=n._private,a=n.pstyle("opacity").value;if(!t)return a;var o=i.data.parent?n.parents():null;if(o)for(var s=0;s<o.length;s++){var u=o[s],l=u.pstyle("opacity").value;a=l*a}return a}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0],n=t.cy().hasCompoundNodes();if(t)return n?t.effectiveOpacity()===0:t.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0];return!!t._private.backgrounding}};function m_(r,e){var t=r._private,n=t.data.parent?r.parents():null;if(n)for(var i=0;i<n.length;i++){var a=n[i];if(!e(a))return!1}return!0}function l1(r){var e=r.ok,t=r.edgeOkViaNode||r.ok,n=r.parentOk||r.ok;return function(){var i=this.cy();if(!i.styleEnabled())return!0;var a=this[0],o=i.hasCompoundNodes();if(a){var s=a._private;if(!e(a))return!1;if(a.isNode())return!o||m_(a,n);var u=s.source,l=s.target;return t(u)&&(!o||m_(u,t))&&(u===l||t(l)&&(!o||m_(l,t)))}}}var sg=v0("eleTakesUpSpace",function(r){return r.pstyle("display").value==="element"&&r.width()!==0&&(r.isNode()?r.height()!==0:!0)});Ea.takesUpSpace=p0("takesUpSpace",l1({ok:sg}));var ek=v0("eleInteractive",function(r){return r.pstyle("events").value==="yes"&&r.pstyle("visibility").value==="visible"&&sg(r)}),tk=v0("parentInteractive",function(r){return r.pstyle("visibility").value==="visible"&&sg(r)});Ea.interactive=p0("interactive",l1({ok:ek,parentOk:tk,edgeOkViaNode:sg}));Ea.noninteractive=function(){var r=this[0];if(r)return!r.interactive()};var rk=v0("eleVisible",function(r){return r.pstyle("visibility").value==="visible"&&r.pstyle("opacity").pfValue!==0&&sg(r)}),nk=sg;Ea.visible=p0("visible",l1({ok:rk,edgeOkViaNode:nk}));Ea.hidden=function(){var r=this[0];if(r)return!r.visible()};Ea.isBundledBezier=p0("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});Ea.bypass=Ea.css=Ea.style;Ea.renderedCss=Ea.renderedStyle;Ea.removeBypass=Ea.removeCss=Ea.removeStyle;Ea.pstyle=Ea.parsedStyle;var id={};function Sx(r){return function(){var e=arguments,t=[];if(e.length===2){var n=e[0],i=e[1];this.on(r.event,n,i)}else if(e.length===1&&Wi(e[0])){var a=e[0];this.on(r.event,a)}else if(e.length===0||e.length===1&&di(e[0])){for(var o=e.length===1?e[0]:null,s=0;s<this.length;s++){var u=this[s],l=!r.ableField||u._private[r.ableField],c=u._private[r.field]!=r.value;if(r.overrideAble){var f=r.overrideAble(u);if(f!==void 0&&(l=f,!f))return this}l&&(u._private[r.field]=r.value,c&&t.push(u))}var h=this.spawn(t);h.updateStyle(),h.emit(r.event),o&&h.emit(o)}return this}}function ug(r){id[r.field]=function(){var e=this[0];if(e){if(r.overrideField){var t=r.overrideField(e);if(t!==void 0)return t}return e._private[r.field]}},id[r.on]=Sx({event:r.on,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:!0}),id[r.off]=Sx({event:r.off,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:!1})}ug({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});ug({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});ug({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});ug({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});id.deselect=id.unselect;id.grabbed=function(){var r=this[0];if(r)return r._private.grabbed};ug({field:"active",on:"activate",off:"unactivate"});ug({field:"pannable",on:"panify",off:"unpanify"});id.inactive=function(){var r=this[0];if(r)return!r._private.active};var Ga={},Tx=function(e){return function(n){for(var i=this,a=[],o=0;o<i.length;o++){var s=i[o];if(s.isNode()){for(var u=!1,l=s.connectedEdges(),c=0;c<l.length;c++){var f=l[c],h=f.source(),d=f.target();if(e.noIncomingEdges&&d===s&&h!==s||e.noOutgoingEdges&&h===s&&d!==s){u=!0;break}}u||a.push(s)}}return this.spawn(a,!0).filter(n)}},Cx=function(e){return function(t){for(var n=this,i=[],a=0;a<n.length;a++){var o=n[a];if(o.isNode())for(var s=o.connectedEdges(),u=0;u<s.length;u++){var l=s[u],c=l.source(),f=l.target();e.outgoing&&c===o?(i.push(l),i.push(f)):e.incoming&&f===o&&(i.push(l),i.push(c))}}return this.spawn(i,!0).filter(t)}},Px=function(e){return function(t){for(var n=this,i=[],a={};;){var o=e.outgoing?n.outgoers():n.incomers();if(o.length===0)break;for(var s=!1,u=0;u<o.length;u++){var l=o[u],c=l.id();a[c]||(a[c]=!0,i.push(l),s=!0)}if(!s)break;n=o}return this.spawn(i,!0).filter(t)}};Ga.clearTraversalCache=function(){for(var r=0;r<this.length;r++)this[r]._private.traversalCache=null};xr(Ga,{roots:Tx({noIncomingEdges:!0}),leaves:Tx({noOutgoingEdges:!0}),outgoers:el(Cx({outgoing:!0}),"outgoers"),successors:Px({outgoing:!0}),incomers:el(Cx({incoming:!0}),"incomers"),predecessors:Px({})});xr(Ga,{neighborhood:el(function(r){for(var e=[],t=this.nodes(),n=0;n<t.length;n++)for(var i=t[n],a=i.connectedEdges(),o=0;o<a.length;o++){var s=a[o],u=s.source(),l=s.target(),c=i===u?l:u;c.length>0&&e.push(c[0]),e.push(s[0])}return this.spawn(e,!0).filter(r)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});Ga.neighbourhood=Ga.neighborhood;Ga.closedNeighbourhood=Ga.closedNeighborhood;Ga.openNeighbourhood=Ga.openNeighborhood;xr(Ga,{source:el(function(e){var t=this[0],n;return t&&(n=t._private.source||t.cy().collection()),n&&e?n.filter(e):n},"source"),target:el(function(e){var t=this[0],n;return t&&(n=t._private.target||t.cy().collection()),n&&e?n.filter(e):n},"target"),sources:Ax({attr:"source"}),targets:Ax({attr:"target"})});function Ax(r){return function(t){for(var n=[],i=0;i<this.length;i++){var a=this[i],o=a._private[r.attr];o&&n.push(o)}return this.spawn(n,!0).filter(t)}}xr(Ga,{edgesWith:el(Rx(),"edgesWith"),edgesTo:el(Rx({thisIsSrc:!0}),"edgesTo")});function Rx(r){return function(t){var n=[],i=this._private.cy,a=r||{};yr(t)&&(t=i.$(t));for(var o=0;o<t.length;o++)for(var s=t[o]._private.edges,u=0;u<s.length;u++){var l=s[u],c=l._private.data,f=this.hasElementWithId(c.source)&&t.hasElementWithId(c.target),h=t.hasElementWithId(c.source)&&this.hasElementWithId(c.target),d=f||h;d&&((a.thisIsSrc||a.thisIsTgt)&&(a.thisIsSrc&&!f||a.thisIsTgt&&!h)||n.push(l))}return this.spawn(n,!0)}}xr(Ga,{connectedEdges:el(function(r){for(var e=[],t=this,n=0;n<t.length;n++){var i=t[n];if(i.isNode())for(var a=i._private.edges,o=0;o<a.length;o++){var s=a[o];e.push(s)}}return this.spawn(e,!0).filter(r)},"connectedEdges"),connectedNodes:el(function(r){for(var e=[],t=this,n=0;n<t.length;n++){var i=t[n];i.isEdge()&&(e.push(i.source()[0]),e.push(i.target()[0]))}return this.spawn(e,!0).filter(r)},"connectedNodes"),parallelEdges:el(Ix(),"parallelEdges"),codirectedEdges:el(Ix({codirected:!0}),"codirectedEdges")});function Ix(r){var e={codirected:!1};return r=xr({},e,r),function(n){for(var i=[],a=this.edges(),o=r,s=0;s<a.length;s++)for(var u=a[s],l=u._private,c=l.source,f=c._private.data.id,h=l.data.target,d=c._private.edges,v=0;v<d.length;v++){var y=d[v],w=y._private.data,b=w.target,p=w.source,m=b===h&&p===f,x=f===b&&h===p;(o.codirected&&m||!o.codirected&&(m||x))&&i.push(y)}return this.spawn(i,!0).filter(n)}}xr(Ga,{components:function(e){var t=this,n=t.cy(),i=n.collection(),a=e==null?t.nodes():e.nodes(),o=[];e!=null&&a.empty()&&(a=e.sources());var s=function(c,f){i.merge(c),a.unmerge(c),f.merge(c)};if(a.empty())return t.spawn();var u=function(){var c=n.collection();o.push(c);var f=a[0];s(f,c),t.bfs({directed:!1,roots:f,visit:function(d){return s(d,c)}}),c.forEach(function(h){h.connectedEdges().forEach(function(d){t.has(d)&&c.has(d.source())&&c.has(d.target())&&c.merge(d)})})};do u();while(a.length>0);return o},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});Ga.componentsOf=Ga.components;var xa=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){qi("A collection must have a reference to the core");return}var a=new Jf,o=!1;if(!t)t=[];else if(t.length>0&&wn(t[0])&&!yy(t[0])){o=!0;for(var s=[],u=new og,l=0,c=t.length;l<c;l++){var f=t[l];f.data==null&&(f.data={});var h=f.data;if(h.id==null)h.id=WS();else if(e.hasElementWithId(h.id)||u.has(h.id))continue;var d=new o0(e,f,!1);s.push(d),u.add(h.id)}t=s}this.length=0;for(var v=0,y=t.length;v<y;v++){var w=t[v][0];if(w!=null){var b=w._private.data.id;(!n||!a.has(b))&&(n&&a.set(b,{index:this.length,ele:w}),this[this.length]=w,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(p){this.lazyMap=p},rebuildMap:function(){for(var m=this.lazyMap=new Jf,x=this.eles,T=0;T<x.length;T++){var P=x[T];m.set(P.id(),{index:T,ele:P})}}},n&&(this._private.map=a),o&&!i&&this.restore()},wi=o0.prototype=xa.prototype=Object.create(Array.prototype);wi.instanceString=function(){return"collection"};wi.spawn=function(r,e){return new xa(this.cy(),r,e)};wi.spawnSelf=function(){return this.spawn(this)};wi.cy=function(){return this._private.cy};wi.renderer=function(){return this._private.cy.renderer()};wi.element=function(){return this[0]};wi.collection=function(){return IS(this)?this:new xa(this._private.cy,[this])};wi.unique=function(){return new xa(this._private.cy,this,!0)};wi.hasElementWithId=function(r){return r=""+r,this._private.map.has(r)};wi.getElementById=function(r){r=""+r;var e=this._private.cy,t=this._private.map.get(r);return t?t.ele:new xa(e)};wi.$id=wi.getElementById;wi.poolIndex=function(){var r=this._private.cy,e=r._private.elements,t=this[0]._private.data.id;return e._private.map.get(t).index};wi.indexOf=function(r){var e=r[0]._private.data.id;return this._private.map.get(e).index};wi.indexOfId=function(r){return r=""+r,this._private.map.get(r).index};wi.json=function(r){var e=this.element(),t=this.cy();if(e==null&&r)return this;if(e!=null){var n=e._private;if(wn(r)){if(t.startBatch(),r.data){e.data(r.data);var i=n.data;if(e.isEdge()){var a=!1,o={},s=r.data.source,u=r.data.target;s!=null&&s!=i.source&&(o.source=""+s,a=!0),u!=null&&u!=i.target&&(o.target=""+u,a=!0),a&&(e=e.move(o))}else{var l="parent"in r.data,c=r.data.parent;l&&(c!=null||i.parent!=null)&&c!=i.parent&&(c===void 0&&(c=null),c!=null&&(c=""+c),e=e.move({parent:c}))}}r.position&&e.position(r.position);var f=function(y,w,b){var p=r[y];p!=null&&p!==n[y]&&(p?e[w]():e[b]())};return f("removed","remove","restore"),f("selected","select","unselect"),f("selectable","selectify","unselectify"),f("locked","lock","unlock"),f("grabbable","grabify","ungrabify"),f("pannable","panify","unpanify"),r.classes!=null&&e.classes(r.classes),t.endBatch(),this}else if(r===void 0){var h={data:Yc(n.data),position:Yc(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};h.classes="";var d=0;return n.classes.forEach(function(v){return h.classes+=d++===0?v:" "+v}),h}}};wi.jsons=function(){for(var r=[],e=0;e<this.length;e++){var t=this[e],n=t.json();r.push(n)}return r};wi.clone=function(){for(var r=this.cy(),e=[],t=0;t<this.length;t++){var n=this[t],i=n.json(),a=new o0(r,i,!1);e.push(a)}return new xa(r,e)};wi.copy=wi.clone;wi.restore=function(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this,n=t.cy(),i=n._private,a=[],o=[],s,u=0,l=t.length;u<l;u++){var c=t[u];e&&!c.removed()||(c.isNode()?a.push(c):o.push(c))}s=a.concat(o);var f,h=function(){s.splice(f,1),f--};for(f=0;f<s.length;f++){var d=s[f],v=d._private,y=v.data;if(d.clearTraversalCache(),!(!e&&!v.removed)){if(y.id===void 0)y.id=WS();else if(Gt(y.id))y.id=""+y.id;else if(od(y.id)||!yr(y.id)){qi("Can not create element with invalid string ID `"+y.id+"`"),h();continue}else if(n.hasElementWithId(y.id)){qi("Can not create second element with ID `"+y.id+"`"),h();continue}}var w=y.id;if(d.isNode()){var b=v.position;b.x==null&&(b.x=0),b.y==null&&(b.y=0)}if(d.isEdge()){for(var p=d,m=["source","target"],x=m.length,T=!1,P=0;P<x;P++){var C=m[P],R=y[C];Gt(R)&&(R=y[C]=""+y[C]),R==null||R===""?(qi("Can not create edge `"+w+"` with unspecified "+C),T=!0):n.hasElementWithId(R)||(qi("Can not create edge `"+w+"` with nonexistant "+C+" `"+R+"`"),T=!0)}if(T){h();continue}var D=n.getElementById(y.source),N=n.getElementById(y.target);D.same(N)?D._private.edges.push(p):(D._private.edges.push(p),N._private.edges.push(p)),p._private.source=D,p._private.target=N}v.map=new Jf,v.map.set(w,{ele:d,index:0}),v.removed=!1,e&&n.addToPool(d)}for(var j=0;j<a.length;j++){var B=a[j],z=B._private.data;Gt(z.parent)&&(z.parent=""+z.parent);var W=z.parent,Z=W!=null;if(Z||B._private.parent){var Q=B._private.parent?n.collection().merge(B._private.parent):n.getElementById(W);if(Q.empty())z.parent=void 0;else if(Q[0].removed())Fn("Node added with missing parent, reference to parent removed"),z.parent=void 0,B._private.parent=null;else{for(var re=!1,ee=Q;!ee.empty();){if(B.same(ee)){re=!0,z.parent=void 0;break}ee=ee.parent()}re||(Q[0]._private.children.push(B),B._private.parent=Q[0],i.hasCompoundNodes=!0)}}}if(s.length>0){for(var ue=s.length===t.length?t:new xa(n,s),de=0;de<ue.length;de++){var se=ue[de];se.isNode()||(se.parallelEdges().clearTraversalCache(),se.source().clearTraversalCache(),se.target().clearTraversalCache())}var me;i.hasCompoundNodes?me=n.collection().merge(ue).merge(ue.connectedNodes()).merge(ue.parent()):me=ue,me.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(r),r?ue.emitAndNotify("add"):e&&ue.emit("add")}return t};wi.removed=function(){var r=this[0];return r&&r._private.removed};wi.inside=function(){var r=this[0];return r&&!r._private.removed};wi.remove=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this,n=[],i={},a=t._private.cy;function o(W){for(var Z=W._private.edges,Q=0;Q<Z.length;Q++)u(Z[Q])}function s(W){for(var Z=W._private.children,Q=0;Q<Z.length;Q++)u(Z[Q])}function u(W){var Z=i[W.id()];e&&W.removed()||Z||(i[W.id()]=!0,W.isNode()?(n.push(W),o(W),s(W)):n.unshift(W))}for(var l=0,c=t.length;l<c;l++){var f=t[l];u(f)}function h(W,Z){var Q=W._private.edges;ad(Q,Z),W.clearTraversalCache()}function d(W){W.clearTraversalCache()}var v=[];v.ids={};function y(W,Z){Z=Z[0],W=W[0];var Q=W._private.children,re=W.id();ad(Q,Z),Z._private.parent=null,v.ids[re]||(v.ids[re]=!0,v.push(W))}t.dirtyCompoundBoundsCache(),e&&a.removeFromPool(n);for(var w=0;w<n.length;w++){var b=n[w];if(b.isEdge()){var p=b.source()[0],m=b.target()[0];h(p,b),h(m,b);for(var x=b.parallelEdges(),T=0;T<x.length;T++){var P=x[T];d(P),P.isBundledBezier()&&P.dirtyBoundingBoxCache()}}else{var C=b.parent();C.length!==0&&y(C,b)}e&&(b._private.removed=!0)}var R=a._private.elements;a._private.hasCompoundNodes=!1;for(var D=0;D<R.length;D++){var N=R[D];if(N.isParent()){a._private.hasCompoundNodes=!0;break}}var j=new xa(this.cy(),n);j.size()>0&&(r?j.emitAndNotify("remove"):e&&j.emit("remove"));for(var B=0;B<v.length;B++){var z=v[B];(!e||!z.removed())&&z.updateStyle()}return j};wi.move=function(r){var e=this._private.cy,t=this,n=!1,i=!1,a=function(v){return v==null?v:""+v};if(r.source!==void 0||r.target!==void 0){var o=a(r.source),s=a(r.target),u=o!=null&&e.hasElementWithId(o),l=s!=null&&e.hasElementWithId(s);(u||l)&&(e.batch(function(){t.remove(n,i),t.emitAndNotify("moveout");for(var d=0;d<t.length;d++){var v=t[d],y=v._private.data;v.isEdge()&&(u&&(y.source=o),l&&(y.target=s))}t.restore(n,i)}),t.emitAndNotify("move"))}else if(r.parent!==void 0){var c=a(r.parent),f=c===null||e.hasElementWithId(c);if(f){var h=c===null?void 0:c;e.batch(function(){var d=t.remove(n,i);d.emitAndNotify("moveout");for(var v=0;v<t.length;v++){var y=t[v],w=y._private.data;y.isNode()&&(w.parent=h)}d.restore(n,i)}),t.emitAndNotify("move")}}return this};[rT,vI,Om,nd,ng,RI,h0,HI,TT,CT,ZI,Wm,Sm,Ea,id,Ga].forEach(function(r){xr(wi,r)});var ik={add:function(e){var t,n=this;if(Eu(e)){var i=e;if(i._private.cy===n)t=i.restore();else{for(var a=[],o=0;o<i.length;o++){var s=i[o];a.push(s.json())}t=new xa(n,a)}}else if(di(e)){var u=e;t=new xa(n,u)}else if(wn(e)&&(di(e.nodes)||di(e.edges))){for(var l=e,c=[],f=["nodes","edges"],h=0,d=f.length;h<d;h++){var v=f[h],y=l[v];if(di(y))for(var w=0,b=y.length;w<b;w++){var p=xr({group:v},y[w]);c.push(p)}}t=new xa(n,c)}else{var m=e;t=new o0(n,m).collection()}return t},remove:function(e){if(!Eu(e)){if(yr(e)){var t=e;e=this.$(t)}}return e.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function ok(r,e,t,n){var i=4,a=.001,o=1e-7,s=10,u=11,l=1/(u-1),c=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var f=0;f<4;++f)if(typeof arguments[f]!="number"||isNaN(arguments[f])||!isFinite(arguments[f]))return!1;r=Math.min(r,1),t=Math.min(t,1),r=Math.max(r,0),t=Math.max(t,0);var h=c?new Float32Array(u):new Array(u);function d(N,j){return 1-3*j+3*N}function v(N,j){return 3*j-6*N}function y(N){return 3*N}function w(N,j,B){return((d(j,B)*N+v(j,B))*N+y(j))*N}function b(N,j,B){return 3*d(j,B)*N*N+2*v(j,B)*N+y(j)}function p(N,j){for(var B=0;B<i;++B){var z=b(j,r,t);if(z===0)return j;var W=w(j,r,t)-N;j-=W/z}return j}function m(){for(var N=0;N<u;++N)h[N]=w(N*l,r,t)}function x(N,j,B){var z,W,Z=0;do W=j+(B-j)/2,z=w(W,r,t)-N,z>0?B=W:j=W;while(Math.abs(z)>o&&++Z<s);return W}function T(N){for(var j=0,B=1,z=u-1;B!==z&&h[B]<=N;++B)j+=l;--B;var W=(N-h[B])/(h[B+1]-h[B]),Z=j+W*l,Q=b(Z,r,t);return Q>=a?p(N,Z):Q===0?Z:x(N,j,j+l)}var P=!1;function C(){P=!0,(r!==e||t!==n)&&m()}var R=function(j){return P||C(),r===e&&t===n?j:j===0?0:j===1?1:w(T(j),e,n)};R.getControlPoints=function(){return[{x:r,y:e},{x:t,y:n}]};var D="generateBezier("+[r,e,t,n]+")";return R.toString=function(){return D},R}/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var ak=function(){function r(n){return-n.tension*n.x-n.friction*n.v}function e(n,i,a){var o={x:n.x+a.dx*i,v:n.v+a.dv*i,tension:n.tension,friction:n.friction};return{dx:o.v,dv:r(o)}}function t(n,i){var a={dx:n.v,dv:r(n)},o=e(n,i*.5,a),s=e(n,i*.5,o),u=e(n,i,s),l=1/6*(a.dx+2*(o.dx+s.dx)+u.dx),c=1/6*(a.dv+2*(o.dv+s.dv)+u.dv);return n.x=n.x+l*i,n.v=n.v+c*i,n}return function n(i,a,o){var s={x:-1,v:0,tension:null,friction:null},u=[0],l=0,c=1/1e4,f=16/1e3,h,d,v;for(i=parseFloat(i)||500,a=parseFloat(a)||20,o=o||null,s.tension=i,s.friction=a,h=o!==null,h?(l=n(i,a),d=l/o*f):d=f;v=t(v||s,d),u.push(1+v.x),l+=16,Math.abs(v.x)>c&&Math.abs(v.v)>c;);return h?function(y){return u[y*(u.length-1)|0]}:l}}(),_i=function(e,t,n,i){var a=ok(e,t,n,i);return function(o,s,u){return o+(s-o)*a(u)}},Tm={linear:function(e,t,n){return e+(t-e)*n},ease:_i(.25,.1,.25,1),"ease-in":_i(.42,0,1,1),"ease-out":_i(0,0,.58,1),"ease-in-out":_i(.42,0,.58,1),"ease-in-sine":_i(.47,0,.745,.715),"ease-out-sine":_i(.39,.575,.565,1),"ease-in-out-sine":_i(.445,.05,.55,.95),"ease-in-quad":_i(.55,.085,.68,.53),"ease-out-quad":_i(.25,.46,.45,.94),"ease-in-out-quad":_i(.455,.03,.515,.955),"ease-in-cubic":_i(.55,.055,.675,.19),"ease-out-cubic":_i(.215,.61,.355,1),"ease-in-out-cubic":_i(.645,.045,.355,1),"ease-in-quart":_i(.895,.03,.685,.22),"ease-out-quart":_i(.165,.84,.44,1),"ease-in-out-quart":_i(.77,0,.175,1),"ease-in-quint":_i(.755,.05,.855,.06),"ease-out-quint":_i(.23,1,.32,1),"ease-in-out-quint":_i(.86,0,.07,1),"ease-in-expo":_i(.95,.05,.795,.035),"ease-out-expo":_i(.19,1,.22,1),"ease-in-out-expo":_i(1,0,0,1),"ease-in-circ":_i(.6,.04,.98,.335),"ease-out-circ":_i(.075,.82,.165,1),"ease-in-out-circ":_i(.785,.135,.15,.86),spring:function(e,t,n){if(n===0)return Tm.linear;var i=ak(e,t,n);return function(a,o,s){return a+(o-a)*i(s)}},"cubic-bezier":_i};function kx(r,e,t,n,i){if(n===1||e===t)return t;var a=i(e,t,n);return r==null||((r.roundValue||r.color)&&(a=Math.round(a)),r.min!==void 0&&(a=Math.max(a,r.min)),r.max!==void 0&&(a=Math.min(a,r.max))),a}function Dx(r,e){return r.pfValue!=null||r.value!=null?r.pfValue!=null&&(e==null||e.type.units!=="%")?r.pfValue:r.value:r}function Dp(r,e,t,n,i){var a=i!=null?i.type:null;t<0?t=0:t>1&&(t=1);var o=Dx(r,i),s=Dx(e,i);if(Gt(o)&&Gt(s))return kx(a,o,s,t,n);if(di(o)&&di(s)){for(var u=[],l=0;l<s.length;l++){var c=o[l],f=s[l];if(c!=null&&f!=null){var h=kx(a,c,f,t,n);u.push(h)}else u.push(f)}return u}}function sk(r,e,t,n){var i=!n,a=r._private,o=e._private,s=o.easing,u=o.startTime,l=n?r:r.cy(),c=l.style();if(!o.easingImpl)if(s==null)o.easingImpl=Tm.linear;else{var f;if(yr(s)){var h=c.parse("transition-timing-function",s);f=h.value}else f=s;var d,v;yr(f)?(d=f,v=[]):(d=f[1],v=f.slice(2).map(function(ue){return+ue})),v.length>0?(d==="spring"&&v.push(o.duration),o.easingImpl=Tm[d].apply(null,v)):o.easingImpl=Tm[d]}var y=o.easingImpl,w;if(o.duration===0?w=1:w=(t-u)/o.duration,o.applying&&(w=o.progress),w<0?w=0:w>1&&(w=1),o.delay==null){var b=o.startPosition,p=o.position;if(p&&i&&!r.locked()){var m={};Ug(b.x,p.x)&&(m.x=Dp(b.x,p.x,w,y)),Ug(b.y,p.y)&&(m.y=Dp(b.y,p.y,w,y)),r.position(m)}var x=o.startPan,T=o.pan,P=a.pan,C=T!=null&&n;C&&(Ug(x.x,T.x)&&(P.x=Dp(x.x,T.x,w,y)),Ug(x.y,T.y)&&(P.y=Dp(x.y,T.y,w,y)),r.emit("pan"));var R=o.startZoom,D=o.zoom,N=D!=null&&n;N&&(Ug(R,D)&&(a.zoom=uy(a.minZoom,Dp(R,D,w,y),a.maxZoom)),r.emit("zoom")),(C||N)&&r.emit("viewport");var j=o.style;if(j&&j.length>0&&i){for(var B=0;B<j.length;B++){var z=j[B],W=z.name,Z=z,Q=o.startStyle[W],re=c.properties[Q.name],ee=Dp(Q,Z,w,y,re);c.overrideBypass(r,W,ee)}r.emit("style")}}return o.progress=w,w}function Ug(r,e){return r==null||e==null?!1:Gt(r)&&Gt(e)?!0:!!(r&&e)}function uk(r,e,t,n){var i=e._private;i.started=!0,i.startTime=t-i.progress*i.duration}function Mx(r,e){var t=e._private.aniEles,n=[];function i(c,f){var h=c._private,d=h.animation.current,v=h.animation.queue,y=!1;if(d.length===0){var w=v.shift();w&&d.push(w)}for(var b=function(P){for(var C=P.length-1;C>=0;C--){var R=P[C];R()}P.splice(0,P.length)},p=d.length-1;p>=0;p--){var m=d[p],x=m._private;if(x.stopped){d.splice(p,1),x.hooked=!1,x.playing=!1,x.started=!1,b(x.frames);continue}!x.playing&&!x.applying||(x.playing&&x.applying&&(x.applying=!1),x.started||uk(c,m,r),sk(c,m,r,f),x.applying&&(x.applying=!1),b(x.frames),x.step!=null&&x.step(r),m.completed()&&(d.splice(p,1),x.hooked=!1,x.playing=!1,x.started=!1,b(x.completes)),y=!0)}return!f&&d.length===0&&v.length===0&&n.push(c),y}for(var a=!1,o=0;o<t.length;o++){var s=t[o],u=i(s);a=a||u}var l=i(e,!0);(a||l)&&(t.length>0?e.notify("draw",t):e.notify("draw")),t.unmerge(n),e.emit("step")}var lk={animate:Bn.animate(),animation:Bn.animation(),animated:Bn.animated(),clearQueue:Bn.clearQueue(),delay:Bn.delay(),delayAnimation:Bn.delayAnimation(),stop:Bn.stop(),addToAnimationPool:function(e){var t=this;t.styleEnabled()&&t._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function t(){e._private.animationsRunning&&Um(function(a){Mx(a,e),t()})}var n=e.renderer();n&&n.beforeRender?n.beforeRender(function(a,o){Mx(o,e)},n.beforeRenderPriorities.animations):t()}},ck={qualifierCompare:function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},eventMatches:function(e,t,n){var i=t.qualifier;return i!=null?e!==n.target&&yy(n.target)&&i.matches(n.target):!0},addEventFields:function(e,t){t.cy=e,t.target=e},callbackContext:function(e,t,n){return t.qualifier!=null?n.target:e}},om=function(e){return yr(e)?new ud(e):e},RT={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new d0(ck,this)),this},emitter:function(){return this._private.emitter},on:function(e,t,n){return this.emitter().on(e,om(t),n),this},removeListener:function(e,t,n){return this.emitter().removeListener(e,om(t),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,t,n){return this.emitter().one(e,om(t),n),this},once:function(e,t,n){return this.emitter().one(e,om(t),n),this},emit:function(e,t){return this.emitter().emit(e,t),this},emitAndNotify:function(e,t){return this.emit(e),this.notify(e,t),this}};Bn.eventAliasesOn(RT);var Pw={png:function(e){var t=this._private.renderer;return e=e||{},t.png(e)},jpg:function(e){var t=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",t.jpg(e)}};Pw.jpeg=Pw.jpg;var Cm={layout:function(e){var t=this;if(e==null){qi("Layout options must be specified to make a layout");return}if(e.name==null){qi("A `name` must be specified to make a layout");return}var n=e.name,i=t.extension("layout",n);if(i==null){qi("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var a;yr(e.eles)?a=t.$(e.eles):a=e.eles!=null?e.eles:t.$();var o=new i(xr({},e,{cy:t,eles:a}));return o}};Cm.createLayout=Cm.makeLayout=Cm.layout;var fk={notify:function(e,t){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var i=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();t!=null&&i.merge(t);return}if(n.notificationsEnabled){var a=this.renderer();this.destroyed()||!a||a.notify(e,t)}},notifications:function(e){var t=this._private;return e===void 0?t.notificationsEnabled:(t.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var t=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var i=e.batchNotifications[n];i.empty()?t.notify(n):t.notify(n,i)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var t=this;return this.batch(function(){for(var n=Object.keys(e),i=0;i<n.length;i++){var a=n[i],o=e[a],s=t.getElementById(a);s.data(o)}})}},hk=Oa({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),Aw={renderTo:function(e,t,n,i){var a=this._private.renderer;return a.renderTo(e,t,n,i),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var t=this,n=t.extension("renderer",e.name);if(n==null){qi("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&Fn("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var i=hk(e);i.cy=t,t._private.renderer=new n(i),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var t=e.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var i=n._private;i.rscratch={},i.rstyle={},i.animation.current=[],i.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};Aw.invalidateDimensions=Aw.resize;var Pm={collection:function(e,t){return yr(e)?this.$(e):Eu(e)?e.collection():di(e)?(t||(t={}),new xa(this,e,t.unique,t.removed)):new xa(this)},nodes:function(e){var t=this.$(function(n){return n.isNode()});return e?t.filter(e):t},edges:function(e){var t=this.$(function(n){return n.isEdge()});return e?t.filter(e):t},$:function(e){var t=this._private.elements;return e?t.filter(e):t.spawnSelf()},mutableElements:function(){return this._private.elements}};Pm.elements=Pm.filter=Pm.$;var ra={},ty="t",dk="f";ra.apply=function(r){for(var e=this,t=e._private,n=t.cy,i=n.collection(),a=0;a<r.length;a++){var o=r[a],s=e.getContextMeta(o);if(!s.empty){var u=e.getContextStyle(s),l=e.applyContextStyle(s,u,o);o._private.appliedInitStyle?e.updateTransitions(o,l.diffProps):o._private.appliedInitStyle=!0;var c=e.updateStyleHints(o);c&&i.push(o)}}return i};ra.getPropertiesDiff=function(r,e){var t=this,n=t._private.propDiffs=t._private.propDiffs||{},i=r+"-"+e,a=n[i];if(a)return a;for(var o=[],s={},u=0;u<t.length;u++){var l=t[u],c=r[u]===ty,f=e[u]===ty,h=c!==f,d=l.mappedProperties.length>0;if(h||f&&d){var v=void 0;h&&d||h?v=l.properties:d&&(v=l.mappedProperties);for(var y=0;y<v.length;y++){for(var w=v[y],b=w.name,p=!1,m=u+1;m<t.length;m++){var x=t[m],T=e[m]===ty;if(T&&(p=x.properties[w.name]!=null,p))break}!s[b]&&!p&&(s[b]=!0,o.push(b))}}}return n[i]=o,o};ra.getContextMeta=function(r){for(var e=this,t="",n,i=r._private.styleCxtKey||"",a=0;a<e.length;a++){var o=e[a],s=o.selector&&o.selector.matches(r);s?t+=ty:t+=dk}return n=e.getPropertiesDiff(i,t),r._private.styleCxtKey=t,{key:t,diffPropNames:n,empty:n.length===0}};ra.getContextStyle=function(r){var e=r.key,t=this,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var i={_private:{key:e}},a=0;a<t.length;a++){var o=t[a],s=e[a]===ty;if(s)for(var u=0;u<o.properties.length;u++){var l=o.properties[u];i[l.name]=l}}return n[e]=i,i};ra.applyContextStyle=function(r,e,t){for(var n=this,i=r.diffPropNames,a={},o=n.types,s=0;s<i.length;s++){var u=i[s],l=e[u],c=t.pstyle(u);if(!l)if(c)c.bypass?l={name:u,deleteBypassed:!0}:l={name:u,delete:!0};else continue;if(c!==l){if(l.mapped===o.fn&&c!=null&&c.mapping!=null&&c.mapping.value===l.value){var f=c.mapping,h=f.fnValue=l.value(t);if(h===f.prevFnValue)continue}var d=a[u]={prev:c};n.applyParsedProperty(t,l),d.next=t.pstyle(u),d.next&&d.next.bypass&&(d.next=d.next.bypassed)}}return{diffProps:a}};ra.updateStyleHints=function(r){var e=r._private,t=this,n=t.propertyGroupNames,i=t.propertyGroupKeys,a=function(Oe,Be,Ye){return t.getPropertiesHash(Oe,Be,Ye)},o=e.styleKey;if(r.removed())return!1;var s=e.group==="nodes",u=r._private.style;n=Object.keys(u);for(var l=0;l<i.length;l++){var c=i[l];e.styleKeys[c]=[Rv,Vp]}for(var f=function(Oe,Be){return e.styleKeys[Be][0]=oy(Oe,e.styleKeys[Be][0])},h=function(Oe,Be){return e.styleKeys[Be][1]=ay(Oe,e.styleKeys[Be][1])},d=function(Oe,Be){f(Oe,Be),h(Oe,Be)},v=function(Oe,Be){for(var Ye=0;Ye<Oe.length;Ye++){var ht=Oe.charCodeAt(Ye);f(ht,Be),h(ht,Be)}},y=2e9,w=function(Oe){return-128<Oe&&Oe<128&&Math.floor(Oe)!==Oe?y-(Oe*1024|0):Oe},b=0;b<n.length;b++){var p=n[b],m=u[p];if(m!=null){var x=this.properties[p],T=x.type,P=x.groupKey,C=void 0;x.hashOverride!=null?C=x.hashOverride(r,m):m.pfValue!=null&&(C=m.pfValue);var R=x.enums==null?m.value:null,D=C!=null,N=R!=null,j=D||N,B=m.units;if(T.number&&j&&!T.multiple){var z=D?C:R;d(w(z),P),!D&&B!=null&&v(B,P)}else v(m.strValue,P)}}for(var W=[Rv,Vp],Z=0;Z<i.length;Z++){var Q=i[Z],re=e.styleKeys[Q];W[0]=oy(re[0],W[0]),W[1]=ay(re[1],W[1])}e.styleKey=kP(W[0],W[1]);var ee=e.styleKeys;e.labelDimsKey=Qh(ee.labelDimensions);var ue=a(r,["label"],ee.labelDimensions);if(e.labelKey=Qh(ue),e.labelStyleKey=Qh(Zy(ee.commonLabel,ue)),!s){var de=a(r,["source-label"],ee.labelDimensions);e.sourceLabelKey=Qh(de),e.sourceLabelStyleKey=Qh(Zy(ee.commonLabel,de));var se=a(r,["target-label"],ee.labelDimensions);e.targetLabelKey=Qh(se),e.targetLabelStyleKey=Qh(Zy(ee.commonLabel,se))}if(s){var me=e.styleKeys,Me=me.nodeBody,he=me.nodeBorder,fe=me.nodeOutline,Ee=me.backgroundImage,Ce=me.compound,ke=me.pie,Re=me.stripe,ve=[Me,he,fe,Ee,Ce,ke,Re].filter(function(we){return we!=null}).reduce(Zy,[Rv,Vp]);e.nodeKey=Qh(ve),e.hasPie=ke!=null&&ke[0]!==Rv&&ke[1]!==Vp,e.hasStripe=Re!=null&&Re[0]!==Rv&&Re[1]!==Vp}return o!==e.styleKey};ra.clearStyleHints=function(r){var e=r._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null,e.hasStripe=null};ra.applyParsedProperty=function(r,e){var t=this,n=e,i=r._private.style,a,o=t.types,s=t.properties[n.name].type,u=n.bypass,l=i[n.name],c=l&&l.bypass,f=r._private,h="mapping",d=function(Me){return Me==null?null:Me.pfValue!=null?Me.pfValue:Me.value},v=function(){var Me=d(l),he=d(n);t.checkTriggers(r,n.name,Me,he)};if(e.name==="curve-style"&&r.isEdge()&&(e.value!=="bezier"&&r.isLoop()||e.value==="haystack"&&(r.source().isParent()||r.target().isParent()))&&(n=e=this.parse(e.name,"bezier",u)),n.delete)return i[n.name]=void 0,v(),!0;if(n.deleteBypassed)return l?l.bypass?(l.bypassed=void 0,v(),!0):!1:(v(),!0);if(n.deleteBypass)return l?l.bypass?(i[n.name]=l.bypassed,v(),!0):!1:(v(),!0);var y=function(){Fn("Do not assign mappings to elements without corresponding data (i.e. ele `"+r.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case o.mapData:{for(var w=n.field.split("."),b=f.data,p=0;p<w.length&&b;p++){var m=w[p];b=b[m]}if(b==null)return y(),!1;var x;if(Gt(b)){var T=n.fieldMax-n.fieldMin;T===0?x=0:x=(b-n.fieldMin)/T}else return Fn("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+b+"` for `"+r.id()+"` is non-numeric)"),!1;if(x<0?x=0:x>1&&(x=1),s.color){var P=n.valueMin[0],C=n.valueMax[0],R=n.valueMin[1],D=n.valueMax[1],N=n.valueMin[2],j=n.valueMax[2],B=n.valueMin[3]==null?1:n.valueMin[3],z=n.valueMax[3]==null?1:n.valueMax[3],W=[Math.round(P+(C-P)*x),Math.round(R+(D-R)*x),Math.round(N+(j-N)*x),Math.round(B+(z-B)*x)];a={bypass:n.bypass,name:n.name,value:W,strValue:"rgb("+W[0]+", "+W[1]+", "+W[2]+")"}}else if(s.number){var Z=n.valueMin+(n.valueMax-n.valueMin)*x;a=this.parse(n.name,Z,n.bypass,h)}else return!1;if(!a)return y(),!1;a.mapping=n,n=a;break}case o.data:{for(var Q=n.field.split("."),re=f.data,ee=0;ee<Q.length&&re;ee++){var ue=Q[ee];re=re[ue]}if(re!=null&&(a=this.parse(n.name,re,n.bypass,h)),!a)return y(),!1;a.mapping=n,n=a;break}case o.fn:{var de=n.value,se=n.fnValue!=null?n.fnValue:de(r);if(n.prevFnValue=se,se==null)return Fn("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+r.id()+"` is null)"),!1;if(a=this.parse(n.name,se,n.bypass,h),!a)return Fn("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+r.id()+"` is invalid)"),!1;a.mapping=Yc(n),n=a;break}case void 0:break;default:return!1}return u?(c?n.bypassed=l.bypassed:n.bypassed=l,i[n.name]=n):c?l.bypassed=n:i[n.name]=n,v(),!0};ra.cleanElements=function(r,e){for(var t=0;t<r.length;t++){var n=r[t];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),!e)n._private.style={};else for(var i=n._private.style,a=Object.keys(i),o=0;o<a.length;o++){var s=a[o],u=i[s];u!=null&&(u.bypass?u.bypassed=null:i[s]=null)}}};ra.update=function(){var r=this._private.cy,e=r.mutableElements();e.updateStyle()};ra.updateTransitions=function(r,e){var t=this,n=r._private,i=r.pstyle("transition-property").value,a=r.pstyle("transition-duration").pfValue,o=r.pstyle("transition-delay").pfValue;if(i.length>0&&a>0){for(var s={},u=!1,l=0;l<i.length;l++){var c=i[l],f=r.pstyle(c),h=e[c];if(h){var d=h.prev,v=d,y=h.next!=null?h.next:f,w=!1,b=void 0,p=1e-6;v&&(Gt(v.pfValue)&&Gt(y.pfValue)?(w=y.pfValue-v.pfValue,b=v.pfValue+p*w):Gt(v.value)&&Gt(y.value)?(w=y.value-v.value,b=v.value+p*w):di(v.value)&&di(y.value)&&(w=v.value[0]!==y.value[0]||v.value[1]!==y.value[1]||v.value[2]!==y.value[2],b=v.strValue),w&&(s[c]=y.strValue,this.applyBypass(r,c,b),u=!0))}}if(!u)return;n.transitioning=!0,new ag(function(m){o>0?r.delayAnimation(o).play().promise().then(m):m()}).then(function(){return r.animation({style:s,duration:a,easing:r.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){t.removeBypasses(r,i),r.emitAndNotify("style"),n.transitioning=!1})}else n.transitioning&&(this.removeBypasses(r,i),r.emitAndNotify("style"),n.transitioning=!1)};ra.checkTrigger=function(r,e,t,n,i,a){var o=this.properties[e],s=i(o);r.removed()||s!=null&&s(t,n,r)&&a(o)};ra.checkZOrderTrigger=function(r,e,t,n){var i=this;this.checkTrigger(r,e,t,n,function(a){return a.triggersZOrder},function(){i._private.cy.notify("zorder",r)})};ra.checkBoundsTrigger=function(r,e,t,n){this.checkTrigger(r,e,t,n,function(i){return i.triggersBounds},function(i){r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache()})};ra.checkConnectedEdgesBoundsTrigger=function(r,e,t,n){this.checkTrigger(r,e,t,n,function(i){return i.triggersBoundsOfConnectedEdges},function(i){r.connectedEdges().forEach(function(a){a.dirtyBoundingBoxCache()})})};ra.checkParallelEdgesBoundsTrigger=function(r,e,t,n){this.checkTrigger(r,e,t,n,function(i){return i.triggersBoundsOfParallelEdges},function(i){r.parallelEdges().forEach(function(a){a.dirtyBoundingBoxCache()})})};ra.checkTriggers=function(r,e,t,n){r.dirtyStyleCache(),this.checkZOrderTrigger(r,e,t,n),this.checkBoundsTrigger(r,e,t,n),this.checkConnectedEdgesBoundsTrigger(r,e,t,n),this.checkParallelEdgesBoundsTrigger(r,e,t,n)};var Oy={};Oy.applyBypass=function(r,e,t,n){var i=this,a=[],o=!0;if(e==="*"||e==="**"){if(t!==void 0)for(var s=0;s<i.properties.length;s++){var u=i.properties[s],l=u.name,c=this.parse(l,t,!0);c&&a.push(c)}}else if(yr(e)){var f=this.parse(e,t,!0);f&&a.push(f)}else if(wn(e)){var h=e;n=t;for(var d=Object.keys(h),v=0;v<d.length;v++){var y=d[v],w=h[y];if(w===void 0&&(w=h[n0(y)]),w!==void 0){var b=this.parse(y,w,!0);b&&a.push(b)}}}else return!1;if(a.length===0)return!1;for(var p=!1,m=0;m<r.length;m++){for(var x=r[m],T={},P=void 0,C=0;C<a.length;C++){var R=a[C];if(n){var D=x.pstyle(R.name);P=T[R.name]={prev:D}}p=this.applyParsedProperty(x,Yc(R))||p,n&&(P.next=x.pstyle(R.name))}p&&this.updateStyleHints(x),n&&this.updateTransitions(x,T,o)}return p};Oy.overrideBypass=function(r,e,t){e=Kw(e);for(var n=0;n<r.length;n++){var i=r[n],a=i._private.style[e],o=this.properties[e].type,s=o.color,u=o.mutiple,l=a?a.pfValue!=null?a.pfValue:a.value:null;!a||!a.bypass?this.applyBypass(i,e,t):(a.value=t,a.pfValue!=null&&(a.pfValue=t),s?a.strValue="rgb("+t.join(",")+")":u?a.strValue=t.join(" "):a.strValue=""+t,this.updateStyleHints(i)),this.checkTriggers(i,e,l,t)}};Oy.removeAllBypasses=function(r,e){return this.removeBypasses(r,this.propertyNames,e)};Oy.removeBypasses=function(r,e,t){for(var n=!0,i=0;i<r.length;i++){for(var a=r[i],o={},s=0;s<e.length;s++){var u=e[s],l=this.properties[u],c=a.pstyle(l.name);if(!(!c||!c.bypass)){var f="",h=this.parse(u,f,!0),d=o[l.name]={prev:c};this.applyParsedProperty(a,h),d.next=a.pstyle(l.name)}}this.updateStyleHints(a),t&&this.updateTransitions(a,o,n)}};var c1={};c1.getEmSizeInPixels=function(){var r=this.containerCss("font-size");return r!=null?parseFloat(r):1};c1.containerCss=function(r){var e=this._private.cy,t=e.container(),n=e.window();if(n&&t&&n.getComputedStyle)return n.getComputedStyle(t).getPropertyValue(r)};var Kc={};Kc.getRenderedStyle=function(r,e){return e?this.getStylePropertyValue(r,e,!0):this.getRawStyle(r,!0)};Kc.getRawStyle=function(r,e){var t=this;if(r=r[0],r){for(var n={},i=0;i<t.properties.length;i++){var a=t.properties[i],o=t.getStylePropertyValue(r,a.name,e);o!=null&&(n[a.name]=o,n[n0(a.name)]=o)}return n}};Kc.getIndexedStyle=function(r,e,t,n){var i=r.pstyle(e)[t][n];return i??r.cy().style().getDefaultProperty(e)[t][0]};Kc.getStylePropertyValue=function(r,e,t){var n=this;if(r=r[0],r){var i=n.properties[e];i.alias&&(i=i.pointsTo);var a=i.type,o=r.pstyle(i.name);if(o){var s=o.value,u=o.units,l=o.strValue;if(t&&a.number&&s!=null&&Gt(s)){var c=r.cy().zoom(),f=function(w){return w*c},h=function(w,b){return f(w)+b},d=di(s),v=d?u.every(function(y){return y!=null}):u!=null;return v?d?s.map(function(y,w){return h(y,u[w])}).join(" "):h(s,u):d?s.map(function(y){return yr(y)?y:""+f(y)}).join(" "):""+f(s)}else if(l!=null)return l}return null}};Kc.getAnimationStartStyle=function(r,e){for(var t={},n=0;n<e.length;n++){var i=e[n],a=i.name,o=r.pstyle(a);o!==void 0&&(wn(o)?o=this.parse(a,o.strValue):o=this.parse(a,o)),o&&(t[a]=o)}return t};Kc.getPropsList=function(r){var e=this,t=[],n=r,i=e.properties;if(n)for(var a=Object.keys(n),o=0;o<a.length;o++){var s=a[o],u=n[s],l=i[s]||i[Kw(s)],c=this.parse(l.name,u);c&&t.push(c)}return t};Kc.getNonDefaultPropertiesHash=function(r,e,t){var n=t.slice(),i,a,o,s,u,l;for(u=0;u<e.length;u++)if(i=e[u],a=r.pstyle(i,!1),a!=null)if(a.pfValue!=null)n[0]=oy(s,n[0]),n[1]=ay(s,n[1]);else for(o=a.strValue,l=0;l<o.length;l++)s=o.charCodeAt(l),n[0]=oy(s,n[0]),n[1]=ay(s,n[1]);return n};Kc.getPropertiesHash=Kc.getNonDefaultPropertiesHash;var g0={};g0.appendFromJson=function(r){for(var e=this,t=0;t<r.length;t++){var n=r[t],i=n.selector,a=n.style||n.css,o=Object.keys(a);e.selector(i);for(var s=0;s<o.length;s++){var u=o[s],l=a[u];e.css(u,l)}}return e};g0.fromJson=function(r){var e=this;return e.resetToDefault(),e.appendFromJson(r),e};g0.json=function(){for(var r=[],e=this.defaultLength;e<this.length;e++){for(var t=this[e],n=t.selector,i=t.properties,a={},o=0;o<i.length;o++){var s=i[o];a[s.name]=s.strValue}r.push({selector:n?n.toString():"core",style:a})}return r};var f1={};f1.appendFromString=function(r){var e=this,t=this,n=""+r,i,a,o;n=n.replace(/[/][*](\s|.)+?[*][/]/g,"");function s(){n.length>i.length?n=n.substr(i.length):n=""}function u(){a.length>o.length?a=a.substr(o.length):a=""}for(;;){var l=n.match(/^\s*$/);if(l)break;var c=n.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){Fn("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+n);break}i=c[0];var f=c[1];if(f!=="core"){var h=new ud(f);if(h.invalid){Fn("Skipping parsing of block: Invalid selector found in string stylesheet: "+f),s();continue}}var d=c[2],v=!1;a=d;for(var y=[];;){var w=a.match(/^\s*$/);if(w)break;var b=a.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!b){Fn("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+d),v=!0;break}o=b[0];var p=b[1],m=b[2],x=e.properties[p];if(!x){Fn("Skipping property: Invalid property name in: "+o),u();continue}var T=t.parse(p,m);if(!T){Fn("Skipping property: Invalid property definition in: "+o),u();continue}y.push({name:p,val:m}),u()}if(v){s();break}t.selector(f);for(var P=0;P<y.length;P++){var C=y[P];t.css(C.name,C.val)}s()}return t};f1.fromString=function(r){var e=this;return e.resetToDefault(),e.appendFromString(r),e};var bo={};(function(){var r=No,e=cP,t=hP,n=dP,i=vP,a=function(we){return"^"+we+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},o=function(we){var Oe=r+"|\\w+|"+e+"|"+t+"|"+n+"|"+i;return"^"+we+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+r+")\\s*\\,\\s*("+r+")\\s*,\\s*("+Oe+")\\s*\\,\\s*("+Oe+")\\)$"},s=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];bo.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},axisDirectionExplicit:{enums:["leftward","rightward","upward","downward"]},axisDirectionPrimary:{enums:["horizontal","vertical"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:a("data")},layoutData:{mapping:!0,regex:a("layoutData")},scratch:{mapping:!0,regex:a("scratch")},mapData:{mapping:!0,regex:o("mapData")},mapLayoutData:{mapping:!0,regex:o("mapLayoutData")},mapScratch:{mapping:!0,regex:o("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:s,singleRegexMatchValue:!0},urls:{regexes:s,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(we,Oe){switch(we.length){case 2:return Oe[0]!=="deg"&&Oe[0]!=="rad"&&Oe[1]!=="deg"&&Oe[1]!=="rad";case 1:return yr(we[0])||Oe[0]==="deg"||Oe[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+r+")\\s*,\\s*("+r+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+r+")\\s*,\\s*("+r+")\\s*,\\s*("+r+")\\s*,\\s*("+r+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(we){var Oe=we.length;return Oe===1||Oe===2||Oe===4}}};var u={zeroNonZero:function(we,Oe){return(we==null||Oe==null)&&we!==Oe||we==0&&Oe!=0?!0:we!=0&&Oe==0},any:function(we,Oe){return we!=Oe},emptyNonEmpty:function(we,Oe){var Be=od(we),Ye=od(Oe);return Be&&!Ye||!Be&&Ye}},l=bo.types,c=[{name:"label",type:l.text,triggersBounds:u.any,triggersZOrder:u.emptyNonEmpty},{name:"text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any}],f=[{name:"source-label",type:l.text,triggersBounds:u.any},{name:"source-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"source-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-offset",type:l.size,triggersBounds:u.any}],h=[{name:"target-label",type:l.text,triggersBounds:u.any},{name:"target-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"target-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-offset",type:l.size,triggersBounds:u.any}],d=[{name:"font-family",type:l.fontFamily,triggersBounds:u.any},{name:"font-style",type:l.fontStyle,triggersBounds:u.any},{name:"font-weight",type:l.fontWeight,triggersBounds:u.any},{name:"font-size",type:l.size,triggersBounds:u.any},{name:"text-transform",type:l.textTransform,triggersBounds:u.any},{name:"text-wrap",type:l.textWrap,triggersBounds:u.any},{name:"text-overflow-wrap",type:l.textOverflowWrap,triggersBounds:u.any},{name:"text-max-width",type:l.size,triggersBounds:u.any},{name:"text-outline-width",type:l.size,triggersBounds:u.any},{name:"line-height",type:l.positiveNumber,triggersBounds:u.any}],v=[{name:"text-valign",type:l.valign,triggersBounds:u.any},{name:"text-halign",type:l.halign,triggersBounds:u.any},{name:"color",type:l.color},{name:"text-outline-color",type:l.color},{name:"text-outline-opacity",type:l.zeroOneNumber},{name:"text-background-color",type:l.color},{name:"text-background-opacity",type:l.zeroOneNumber},{name:"text-background-padding",type:l.size,triggersBounds:u.any},{name:"text-border-opacity",type:l.zeroOneNumber},{name:"text-border-color",type:l.color},{name:"text-border-width",type:l.size,triggersBounds:u.any},{name:"text-border-style",type:l.borderStyle,triggersBounds:u.any},{name:"text-background-shape",type:l.textBackgroundShape,triggersBounds:u.any},{name:"text-justification",type:l.justification},{name:"box-select-labels",type:l.bool,triggersBounds:u.any}],y=[{name:"events",type:l.bool,triggersZOrder:u.any},{name:"text-events",type:l.bool,triggersZOrder:u.any}],w=[{name:"display",type:l.display,triggersZOrder:u.any,triggersBounds:u.any,triggersBoundsOfConnectedEdges:u.any,triggersBoundsOfParallelEdges:function(we,Oe,Be){return we===Oe?!1:Be.pstyle("curve-style").value==="bezier"}},{name:"visibility",type:l.visibility,triggersZOrder:u.any},{name:"opacity",type:l.zeroOneNumber,triggersZOrder:u.zeroNonZero},{name:"text-opacity",type:l.zeroOneNumber},{name:"min-zoomed-font-size",type:l.size},{name:"z-compound-depth",type:l.zCompoundDepth,triggersZOrder:u.any},{name:"z-index-compare",type:l.zIndexCompare,triggersZOrder:u.any},{name:"z-index",type:l.number,triggersZOrder:u.any}],b=[{name:"overlay-padding",type:l.size,triggersBounds:u.any},{name:"overlay-color",type:l.color},{name:"overlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"overlay-shape",type:l.overlayShape,triggersBounds:u.any},{name:"overlay-corner-radius",type:l.cornerRadius}],p=[{name:"underlay-padding",type:l.size,triggersBounds:u.any},{name:"underlay-color",type:l.color},{name:"underlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"underlay-shape",type:l.overlayShape,triggersBounds:u.any},{name:"underlay-corner-radius",type:l.cornerRadius}],m=[{name:"transition-property",type:l.propList},{name:"transition-duration",type:l.time},{name:"transition-delay",type:l.time},{name:"transition-timing-function",type:l.easing}],x=function(we,Oe){return Oe.value==="label"?-we.poolIndex():Oe.pfValue},T=[{name:"height",type:l.nodeSize,triggersBounds:u.any,hashOverride:x},{name:"width",type:l.nodeSize,triggersBounds:u.any,hashOverride:x},{name:"shape",type:l.nodeShape,triggersBounds:u.any},{name:"shape-polygon-points",type:l.polygonPointList,triggersBounds:u.any},{name:"corner-radius",type:l.cornerRadius},{name:"background-color",type:l.color},{name:"background-fill",type:l.fill},{name:"background-opacity",type:l.zeroOneNumber},{name:"background-blacken",type:l.nOneOneNumber},{name:"background-gradient-stop-colors",type:l.colors},{name:"background-gradient-stop-positions",type:l.percentages},{name:"background-gradient-direction",type:l.gradientDirection},{name:"padding",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"padding-relative-to",type:l.paddingRelativeTo,triggersBounds:u.any},{name:"bounds-expansion",type:l.boundsExpansion,triggersBounds:u.any}],P=[{name:"border-color",type:l.color},{name:"border-opacity",type:l.zeroOneNumber},{name:"border-width",type:l.size,triggersBounds:u.any},{name:"border-style",type:l.borderStyle},{name:"border-cap",type:l.lineCap},{name:"border-join",type:l.lineJoin},{name:"border-dash-pattern",type:l.numbers},{name:"border-dash-offset",type:l.number},{name:"border-position",type:l.linePosition}],C=[{name:"outline-color",type:l.color},{name:"outline-opacity",type:l.zeroOneNumber},{name:"outline-width",type:l.size,triggersBounds:u.any},{name:"outline-style",type:l.borderStyle},{name:"outline-offset",type:l.size,triggersBounds:u.any}],R=[{name:"background-image",type:l.urls},{name:"background-image-crossorigin",type:l.bgCrossOrigin},{name:"background-image-opacity",type:l.zeroOneNumbers},{name:"background-image-containment",type:l.bgContainment},{name:"background-image-smoothing",type:l.bools},{name:"background-position-x",type:l.bgPos},{name:"background-position-y",type:l.bgPos},{name:"background-width-relative-to",type:l.bgRelativeTo},{name:"background-height-relative-to",type:l.bgRelativeTo},{name:"background-repeat",type:l.bgRepeat},{name:"background-fit",type:l.bgFit},{name:"background-clip",type:l.bgClip},{name:"background-width",type:l.bgWH},{name:"background-height",type:l.bgWH},{name:"background-offset-x",type:l.bgPos},{name:"background-offset-y",type:l.bgPos}],D=[{name:"position",type:l.position,triggersBounds:u.any},{name:"compound-sizing-wrt-labels",type:l.compoundIncludeLabels,triggersBounds:u.any},{name:"min-width",type:l.size,triggersBounds:u.any},{name:"min-width-bias-left",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-width-bias-right",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height",type:l.size,triggersBounds:u.any},{name:"min-height-bias-top",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height-bias-bottom",type:l.sizeMaybePercent,triggersBounds:u.any}],N=[{name:"line-style",type:l.lineStyle},{name:"line-color",type:l.color},{name:"line-fill",type:l.fill},{name:"line-cap",type:l.lineCap},{name:"line-opacity",type:l.zeroOneNumber},{name:"line-dash-pattern",type:l.numbers},{name:"line-dash-offset",type:l.number},{name:"line-outline-width",type:l.size},{name:"line-outline-color",type:l.color},{name:"line-gradient-stop-colors",type:l.colors},{name:"line-gradient-stop-positions",type:l.percentages},{name:"curve-style",type:l.curveStyle,triggersBounds:u.any,triggersBoundsOfParallelEdges:function(we,Oe){return we===Oe?!1:we==="bezier"||Oe==="bezier"}},{name:"haystack-radius",type:l.zeroOneNumber,triggersBounds:u.any},{name:"source-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"target-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"control-point-step-size",type:l.size,triggersBounds:u.any},{name:"control-point-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"control-point-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"segment-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-radii",type:l.numbers,triggersBounds:u.any},{name:"radius-type",type:l.radiusType,triggersBounds:u.any},{name:"taxi-turn",type:l.bidirectionalSizeMaybePercent,triggersBounds:u.any},{name:"taxi-turn-min-distance",type:l.size,triggersBounds:u.any},{name:"taxi-direction",type:l.axisDirection,triggersBounds:u.any},{name:"taxi-radius",type:l.number,triggersBounds:u.any},{name:"edge-distances",type:l.edgeDistances,triggersBounds:u.any},{name:"arrow-scale",type:l.positiveNumber,triggersBounds:u.any},{name:"loop-direction",type:l.angle,triggersBounds:u.any},{name:"loop-sweep",type:l.angle,triggersBounds:u.any},{name:"source-distance-from-node",type:l.size,triggersBounds:u.any},{name:"target-distance-from-node",type:l.size,triggersBounds:u.any}],j=[{name:"ghost",type:l.bool,triggersBounds:u.any},{name:"ghost-offset-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-offset-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-opacity",type:l.zeroOneNumber}],B=[{name:"selection-box-color",type:l.color},{name:"selection-box-opacity",type:l.zeroOneNumber},{name:"selection-box-border-color",type:l.color},{name:"selection-box-border-width",type:l.size},{name:"active-bg-color",type:l.color},{name:"active-bg-opacity",type:l.zeroOneNumber},{name:"active-bg-size",type:l.size},{name:"outside-texture-bg-color",type:l.color},{name:"outside-texture-bg-opacity",type:l.zeroOneNumber}],z=[];bo.pieBackgroundN=16,z.push({name:"pie-size",type:l.sizeMaybePercent}),z.push({name:"pie-hole",type:l.sizeMaybePercent}),z.push({name:"pie-start-angle",type:l.angle});for(var W=1;W<=bo.pieBackgroundN;W++)z.push({name:"pie-"+W+"-background-color",type:l.color}),z.push({name:"pie-"+W+"-background-size",type:l.percent}),z.push({name:"pie-"+W+"-background-opacity",type:l.zeroOneNumber});var Z=[];bo.stripeBackgroundN=16,Z.push({name:"stripe-size",type:l.sizeMaybePercent}),Z.push({name:"stripe-direction",type:l.axisDirectionPrimary});for(var Q=1;Q<=bo.stripeBackgroundN;Q++)Z.push({name:"stripe-"+Q+"-background-color",type:l.color}),Z.push({name:"stripe-"+Q+"-background-size",type:l.percent}),Z.push({name:"stripe-"+Q+"-background-opacity",type:l.zeroOneNumber});var re=[],ee=bo.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:l.arrowShape,triggersBounds:u.any},{name:"arrow-color",type:l.color},{name:"arrow-fill",type:l.arrowFill},{name:"arrow-width",type:l.arrowWidth}].forEach(function(ve){ee.forEach(function(we){var Oe=we+"-"+ve.name,Be=ve.type,Ye=ve.triggersBounds;re.push({name:Oe,type:Be,triggersBounds:Ye})})},{});var ue=bo.properties=[].concat(y,m,w,b,p,j,v,d,c,f,h,T,P,C,R,z,Z,D,N,re,B),de=bo.propertyGroups={behavior:y,transition:m,visibility:w,overlay:b,underlay:p,ghost:j,commonLabel:v,labelDimensions:d,mainLabel:c,sourceLabel:f,targetLabel:h,nodeBody:T,nodeBorder:P,nodeOutline:C,backgroundImage:R,pie:z,stripe:Z,compound:D,edgeLine:N,edgeArrow:re,core:B},se=bo.propertyGroupNames={},me=bo.propertyGroupKeys=Object.keys(de);me.forEach(function(ve){se[ve]=de[ve].map(function(we){return we.name}),de[ve].forEach(function(we){return we.groupKey=ve})});var Me=bo.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];bo.propertyNames=ue.map(function(ve){return ve.name});for(var he=0;he<ue.length;he++){var fe=ue[he];ue[fe.name]=fe}for(var Ee=0;Ee<Me.length;Ee++){var Ce=Me[Ee],ke=ue[Ce.pointsTo],Re={name:Ce.name,alias:!0,pointsTo:ke};ue.push(Re),ue[Ce.name]=Re}})();bo.getDefaultProperty=function(r){return this.getDefaultProperties()[r]};bo.getDefaultProperties=function(){var r=this._private;if(r.defaultProperties!=null)return r.defaultProperties;for(var e=xr({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","box-select-labels":"no","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%","pie-hole":0,"pie-start-angle":"0deg"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(u,l){for(var c=1;c<=bo.pieBackgroundN;c++){var f=l.name.replace("{{i}}",c),h=l.value;u[f]=h}return u},{}),{"stripe-size":"100%","stripe-direction":"horizontal"},[{name:"stripe-{{i}}-background-color",value:"black"},{name:"stripe-{{i}}-background-size",value:"0%"},{name:"stripe-{{i}}-background-opacity",value:1}].reduce(function(u,l){for(var c=1;c<=bo.stripeBackgroundN;c++){var f=l.name.replace("{{i}}",c),h=l.value;u[f]=h}return u},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(u,l){return bo.arrowPrefixes.forEach(function(c){var f=c+"-"+l.name,h=l.value;u[f]=h}),u},{})),t={},n=0;n<this.properties.length;n++){var i=this.properties[n];if(!i.pointsTo){var a=i.name,o=e[a],s=this.parse(a,o);t[a]=s}}return r.defaultProperties=t,r.defaultProperties};bo.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var y0={};y0.parse=function(r,e,t,n){var i=this;if(Wi(e))return i.parseImplWarn(r,e,t,n);var a=n==="mapping"||n===!0||n===!1||n==null?"dontcare":n,o=t?"t":"f",s=""+e,u=GS(r,s,o,a),l=i.propCache=i.propCache||[],c;return(c=l[u])||(c=l[u]=i.parseImplWarn(r,e,t,n)),(t||n==="mapping")&&(c=Yc(c),c&&(c.value=Yc(c.value))),c};y0.parseImplWarn=function(r,e,t,n){var i=this.parseImpl(r,e,t,n);return!i&&e!=null&&Fn("The style property `".concat(r,": ").concat(e,"` is invalid")),i&&(i.name==="width"||i.name==="height")&&e==="label"&&Fn("The style value of `label` is deprecated for `"+i.name+"`"),i};y0.parseImpl=function(r,e,t,n){var i=this;r=Kw(r);var a=i.properties[r],o=e,s=i.types;if(!a||e===void 0)return null;a.alias&&(a=a.pointsTo,r=a.name);var u=yr(e);u&&(e=e.trim());var l=a.type;if(!l)return null;if(t&&(e===""||e===null))return{name:r,value:e,bypass:!0,deleteBypass:!0};if(Wi(e))return{name:r,value:e,strValue:"fn",mapped:s.fn,bypass:t};var c,f;if(!(!u||n||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(c=new RegExp(s.data.regex).exec(e))){if(t)return!1;var h=s.data;return{name:r,value:c,strValue:""+e,mapped:h,field:c[1],bypass:t}}else if(e.length>=10&&e[0]==="m"&&(f=new RegExp(s.mapData.regex).exec(e))){if(t||l.multiple)return!1;var d=s.mapData;if(!(l.color||l.number))return!1;var v=this.parse(r,f[4]);if(!v||v.mapped)return!1;var y=this.parse(r,f[5]);if(!y||y.mapped)return!1;if(v.pfValue===y.pfValue||v.strValue===y.strValue)return Fn("`"+r+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+r+": "+v.strValue+"`"),this.parse(r,v.strValue);if(l.color){var w=v.value,b=y.value,p=w[0]===b[0]&&w[1]===b[1]&&w[2]===b[2]&&(w[3]===b[3]||(w[3]==null||w[3]===1)&&(b[3]==null||b[3]===1));if(p)return!1}return{name:r,value:f,strValue:""+e,mapped:d,field:f[1],fieldMin:parseFloat(f[2]),fieldMax:parseFloat(f[3]),valueMin:v.value,valueMax:y.value,bypass:t}}}if(l.multiple&&n!=="multiple"){var m;if(u?m=e.split(/\s+/):di(e)?m=e:m=[e],l.evenMultiple&&m.length%2!==0)return null;for(var x=[],T=[],P=[],C="",R=!1,D=0;D<m.length;D++){var N=i.parse(r,m[D],t,"multiple");R=R||yr(N.value),x.push(N.value),P.push(N.pfValue!=null?N.pfValue:N.value),T.push(N.units),C+=(D>0?" ":"")+N.strValue}return l.validate&&!l.validate(x,T)?null:l.singleEnum&&R?x.length===1&&yr(x[0])?{name:r,value:x[0],strValue:x[0],bypass:t}:null:{name:r,value:x,pfValue:P,strValue:C,bypass:t,units:T}}var j=function(){for(var Re=0;Re<l.enums.length;Re++){var ve=l.enums[Re];if(ve===e)return{name:r,value:e,strValue:""+e,bypass:t}}return null};if(l.number){var B,z="px";if(l.units&&(B=l.units),l.implicitUnits&&(z=l.implicitUnits),!l.unitless)if(u){var W="px|em"+(l.allowPercent?"|\\%":"");B&&(W=B);var Z=e.match("^("+No+")("+W+")?$");Z&&(e=Z[1],B=Z[2]||z)}else(!B||l.implicitUnits)&&(B=z);if(e=parseFloat(e),isNaN(e)&&l.enums===void 0)return null;if(isNaN(e)&&l.enums!==void 0)return e=o,j();if(l.integer&&!nP(e)||l.min!==void 0&&(e<l.min||l.strictMin&&e===l.min)||l.max!==void 0&&(e>l.max||l.strictMax&&e===l.max))return null;var Q={name:r,value:e,strValue:""+e+(B||""),units:B,bypass:t};return l.unitless||B!=="px"&&B!=="em"?Q.pfValue=e:Q.pfValue=B==="px"||!B?e:this.getEmSizeInPixels()*e,(B==="ms"||B==="s")&&(Q.pfValue=B==="ms"?e:1e3*e),(B==="deg"||B==="rad")&&(Q.pfValue=B==="rad"?e:cA(e)),B==="%"&&(Q.pfValue=e/100),Q}else if(l.propList){var re=[],ee=""+e;if(ee!=="none"){for(var ue=ee.split(/\s*,\s*|\s+/),de=0;de<ue.length;de++){var se=ue[de].trim();i.properties[se]?re.push(se):Fn("`"+se+"` is not a valid property name")}if(re.length===0)return null}return{name:r,value:re,strValue:re.length===0?"none":re.join(" "),bypass:t}}else if(l.color){var me=LS(e);return me?{name:r,value:me,pfValue:me,strValue:"rgb("+me[0]+","+me[1]+","+me[2]+")",bypass:t}:null}else if(l.regex||l.regexes){if(l.enums){var Me=j();if(Me)return Me}for(var he=l.regexes?l.regexes:[l.regex],fe=0;fe<he.length;fe++){var Ee=new RegExp(he[fe]),Ce=Ee.exec(e);if(Ce)return{name:r,value:l.singleRegexMatchValue?Ce[1]:Ce,strValue:""+e,bypass:t}}return null}else return l.string?{name:r,value:""+e,strValue:""+e,bypass:t}:l.enums?j():null};var ta=function(e){if(!(this instanceof ta))return new ta(e);if(!Xw(e)){qi("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},Va=ta.prototype;Va.instanceString=function(){return"style"};Va.clear=function(){for(var r=this._private,e=r.cy,t=e.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,r.contextStyles={},r.propDiffs={},this.cleanElements(t,!0),t.forEach(function(i){var a=i[0]._private;a.styleDirty=!0,a.appliedInitStyle=!1}),this};Va.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};Va.core=function(r){return this._private.coreStyle[r]||this.getDefaultProperty(r)};Va.selector=function(r){var e=r==="core"?null:new ud(r),t=this.length++;return this[t]={selector:e,properties:[],mappedProperties:[],index:t},this};Va.css=function(){var r=this,e=arguments;if(e.length===1)for(var t=e[0],n=0;n<r.properties.length;n++){var i=r.properties[n],a=t[i.name];a===void 0&&(a=t[n0(i.name)]),a!==void 0&&this.cssRule(i.name,a)}else e.length===2&&this.cssRule(e[0],e[1]);return this};Va.style=Va.css;Va.cssRule=function(r,e){var t=this.parse(r,e);if(t){var n=this.length-1;this[n].properties.push(t),this[n].properties[t.name]=t,t.name.match(/pie-(\d+)-background-size/)&&t.value&&(this._private.hasPie=!0),t.name.match(/stripe-(\d+)-background-size/)&&t.value&&(this._private.hasStripe=!0),t.mapped&&this[n].mappedProperties.push(t);var i=!this[n].selector;i&&(this._private.coreStyle[t.name]=t)}return this};Va.append=function(r){return kS(r)?r.appendToStyle(this):di(r)?this.appendFromJson(r):yr(r)&&this.appendFromString(r),this};ta.fromJson=function(r,e){var t=new ta(r);return t.fromJson(e),t};ta.fromString=function(r,e){return new ta(r).fromString(e)};[ra,Oy,c1,Kc,g0,f1,bo,y0].forEach(function(r){xr(Va,r)});ta.types=Va.types;ta.properties=Va.properties;ta.propertyGroups=Va.propertyGroups;ta.propertyGroupNames=Va.propertyGroupNames;ta.propertyGroupKeys=Va.propertyGroupKeys;var vk={style:function(e){if(e){var t=this.setStyle(e);t.update()}return this._private.style},setStyle:function(e){var t=this._private;return kS(e)?t.style=e.generateStyle(this):di(e)?t.style=ta.fromJson(this,e):yr(e)?t.style=ta.fromString(this,e):t.style=ta(this),t.style},updateStyle:function(){this.mutableElements().updateStyle()}},pk="single",Bv={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var t=this._private;if(t.selectionType==null&&(t.selectionType=pk),e!==void 0)(e==="additive"||e==="single")&&(t.selectionType=e);else return t.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,t=this._private.pan,n,i,a,o,s;switch(e.length){case 0:return t;case 1:if(yr(e[0]))return n=e[0],t[n];if(wn(e[0])){if(!this._private.panningEnabled)return this;a=e[0],o=a.x,s=a.y,Gt(o)&&(t.x=o),Gt(s)&&(t.y=s),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],i=e[1],(n==="x"||n==="y")&&Gt(i)&&(t[n]=i),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,t){var n=arguments,i=this._private.pan,a,o,s,u,l;if(!this._private.panningEnabled)return this;switch(n.length){case 1:wn(e)&&(s=n[0],u=s.x,l=s.y,Gt(u)&&(i.x+=u),Gt(l)&&(i.y+=l),this.emit("pan viewport"));break;case 2:a=e,o=t,(a==="x"||a==="y")&&Gt(o)&&(i[a]+=o),this.emit("pan viewport");break}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(e,t){var n=this.getFitViewport(e,t);if(n){var i=this._private;i.zoom=n.zoom,i.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,t){if(Gt(e)&&t===void 0&&(t=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(yr(e)){var i=e;e=this.$(i)}else if(aP(e)){var a=e;n={x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else Eu(e)||(e=this.mutableElements());if(!(Eu(e)&&e.empty())){n=n||e.boundingBox();var o=this.width(),s=this.height(),u;if(t=Gt(t)?t:0,!isNaN(o)&&!isNaN(s)&&o>0&&s>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){u=Math.min((o-2*t)/n.w,(s-2*t)/n.h),u=u>this._private.maxZoom?this._private.maxZoom:u,u=u<this._private.minZoom?this._private.minZoom:u;var l={x:(o-u*(n.x1+n.x2))/2,y:(s-u*(n.y1+n.y2))/2};return{zoom:u,pan:l}}}}},zoomRange:function(e,t){var n=this._private;if(t==null){var i=e;e=i.min,t=i.max}return Gt(e)&&Gt(t)&&e<=t?(n.minZoom=e,n.maxZoom=t):Gt(e)&&t===void 0&&e<=n.maxZoom?n.minZoom=e:Gt(t)&&e===void 0&&t>=n.minZoom&&(n.maxZoom=t),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var t=this._private,n=t.pan,i=t.zoom,a,o,s=!1;if(t.zoomingEnabled||(s=!0),Gt(e)?o=e:wn(e)&&(o=e.level,e.position!=null?a=a0(e.position,i,n):e.renderedPosition!=null&&(a=e.renderedPosition),a!=null&&!t.panningEnabled&&(s=!0)),o=o>t.maxZoom?t.maxZoom:o,o=o<t.minZoom?t.minZoom:o,s||!Gt(o)||o===i||a!=null&&(!Gt(a.x)||!Gt(a.y)))return null;if(a!=null){var u=n,l=i,c=o,f={x:-c/l*(a.x-u.x)+a.x,y:-c/l*(a.y-u.y)+a.y};return{zoomed:!0,panned:!0,zoom:c,pan:f}}else return{zoomed:!0,panned:!1,zoom:o,pan:n}},zoom:function(e){if(e===void 0)return this._private.zoom;var t=this.getZoomedViewport(e),n=this._private;return t==null||!t.zoomed?this:(n.zoom=t.zoom,t.panned&&(n.pan.x=t.pan.x,n.pan.y=t.pan.y),this.emit("zoom"+(t.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var t=this._private,n=!0,i=!0,a=[],o=!1,s=!1;if(!e)return this;if(Gt(e.zoom)||(n=!1),wn(e.pan)||(i=!1),!n&&!i)return this;if(n){var u=e.zoom;u<t.minZoom||u>t.maxZoom||!t.zoomingEnabled?o=!0:(t.zoom=u,a.push("zoom"))}if(i&&(!o||!e.cancelOnFailedZoom)&&t.panningEnabled){var l=e.pan;Gt(l.x)&&(t.pan.x=l.x,s=!1),Gt(l.y)&&(t.pan.y=l.y,s=!1),s||a.push("pan")}return a.length>0&&(a.push("viewport"),this.emit(a.join(" ")),this.notify("viewport")),this},center:function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,t){if(this._private.panningEnabled){if(yr(e)){var n=e;e=this.mutableElements().filter(n)}else Eu(e)||(e=this.mutableElements());if(e.length!==0){var i=e.boundingBox(),a=this.width(),o=this.height();t=t===void 0?this._private.zoom:t;var s={x:(a-t*(i.x1+i.x2))/2,y:(o-t*(i.y1+i.y2))/2};return s}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,t=e.container,n=this;return e.sizeCache=e.sizeCache||(t?function(){var i=n.window().getComputedStyle(t),a=function(s){return parseFloat(i.getPropertyValue(s))};return{width:t.clientWidth-a("padding-left")-a("padding-right"),height:t.clientHeight-a("padding-top")-a("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,t=this._private.zoom,n=this.renderedExtent(),i={x1:(n.x1-e.x)/t,x2:(n.x2-e.x)/t,y1:(n.y1-e.y)/t,y2:(n.y2-e.y)/t};return i.w=i.x2-i.x1,i.h=i.y2-i.y1,i},renderedExtent:function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};Bv.centre=Bv.center;Bv.autolockNodes=Bv.autolock;Bv.autoungrabifyNodes=Bv.autoungrabify;var hy={data:Bn.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:Bn.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:Bn.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Bn.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};hy.attr=hy.data;hy.removeAttr=hy.removeData;var dy=function(e){var t=this;e=xr({},e);var n=e.container;n&&!Fm(n)&&Fm(n[0])&&(n=n[0]);var i=n?n._cyreg:null;i=i||{},i&&i.cy&&(i.cy.destroy(),i={});var a=i.readies=i.readies||[];n&&(n._cyreg=i),i.cy=t;var o=Mo!==void 0&&n!==void 0&&!e.headless,s=e;s.layout=xr({name:o?"grid":"null"},s.layout),s.renderer=xr({name:o?"canvas":"null"},s.renderer);var u=function(v,y,w){return y!==void 0?y:w!==void 0?w:v},l=this._private={container:n,ready:!1,options:s,elements:new xa(this),listeners:[],aniEles:new xa(this),data:s.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:u(!0,s.zoomingEnabled),userZoomingEnabled:u(!0,s.userZoomingEnabled),panningEnabled:u(!0,s.panningEnabled),userPanningEnabled:u(!0,s.userPanningEnabled),boxSelectionEnabled:u(!0,s.boxSelectionEnabled),autolock:u(!1,s.autolock,s.autolockNodes),autoungrabify:u(!1,s.autoungrabify,s.autoungrabifyNodes),autounselectify:u(!1,s.autounselectify),styleEnabled:s.styleEnabled===void 0?o:s.styleEnabled,zoom:Gt(s.zoom)?s.zoom:1,pan:{x:wn(s.pan)&&Gt(s.pan.x)?s.pan.x:0,y:wn(s.pan)&&Gt(s.pan.y)?s.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:u(250,s.multiClickDebounceTime)};this.createEmitter(),this.selectionType(s.selectionType),this.zoomRange({min:s.minZoom,max:s.maxZoom});var c=function(v,y){var w=v.some(sP);if(w)return ag.all(v).then(y);y(v)};l.styleEnabled&&t.setStyle([]);var f=xr({},s,s.renderer);t.initRenderer(f);var h=function(v,y,w){t.notifications(!1);var b=t.mutableElements();b.length>0&&b.remove(),v!=null&&(wn(v)||di(v))&&t.add(v),t.one("layoutready",function(m){t.notifications(!0),t.emit(m),t.one("load",y),t.emitAndNotify("load")}).one("layoutstop",function(){t.one("done",w),t.emit("done")});var p=xr({},t._private.options.layout);p.eles=t.elements(),t.layout(p).run()};c([s.style,s.elements],function(d){var v=d[0],y=d[1];l.styleEnabled&&t.style().append(v),h(y,function(){t.startAnimationLoop(),l.ready=!0,Wi(s.ready)&&t.on("ready",s.ready);for(var w=0;w<a.length;w++){var b=a[w];t.on("ready",b)}i&&(i.readies=[]),t.emit("ready")},s.done)})},Hm=dy.prototype;xr(Hm,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){var e=this._private.container;if(e==null)return Mo;var t=this._private.container.ownerDocument;return t===void 0||t==null?Mo:t.defaultView||Mo},mount:function(e){if(e!=null){var t=this,n=t._private,i=n.options;return!Fm(e)&&Fm(e[0])&&(e=e[0]),t.stopAnimationLoop(),t.destroyRenderer(),n.container=e,n.styleEnabled=!0,t.invalidateSize(),t.initRenderer(xr({},i,i.renderer,{name:i.renderer.name==="null"?"canvas":i.renderer.name})),t.startAnimationLoop(),t.style(i.style),t.emit("mount"),t}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return Yc(this._private.options)},json:function(e){var t=this,n=t._private,i=t.mutableElements(),a=function(x){return t.getElementById(x.id())};if(wn(e)){if(t.startBatch(),e.elements){var o={},s=function(x,T){for(var P=[],C=[],R=0;R<x.length;R++){var D=x[R];if(!D.data.id){Fn("cy.json() cannot handle elements without an ID attribute");continue}var N=""+D.data.id,j=t.getElementById(N);o[N]=!0,j.length!==0?C.push({ele:j,json:D}):(T&&(D.group=T),P.push(D))}t.add(P);for(var B=0;B<C.length;B++){var z=C[B],W=z.ele,Z=z.json;W.json(Z)}};if(di(e.elements))s(e.elements);else for(var u=["nodes","edges"],l=0;l<u.length;l++){var c=u[l],f=e.elements[c];di(f)&&s(f,c)}var h=t.collection();i.filter(function(m){return!o[m.id()]}).forEach(function(m){m.isParent()?h.merge(m):m.remove()}),h.forEach(function(m){return m.children().move({parent:null})}),h.forEach(function(m){return a(m).remove()})}e.style&&t.style(e.style),e.zoom!=null&&e.zoom!==n.zoom&&t.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&t.pan(e.pan),e.data&&t.data(e.data);for(var d=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],v=0;v<d.length;v++){var y=d[v];e[y]!=null&&t[y](e[y])}return t.endBatch(),this}else{var w=!!e,b={};w?b.elements=this.elements().map(function(m){return m.json()}):(b.elements={},i.forEach(function(m){var x=m.group();b.elements[x]||(b.elements[x]=[]),b.elements[x].push(m.json())})),this._private.styleEnabled&&(b.style=t.style().json()),b.data=Yc(t.data());var p=n.options;return b.zoomingEnabled=n.zoomingEnabled,b.userZoomingEnabled=n.userZoomingEnabled,b.zoom=n.zoom,b.minZoom=n.minZoom,b.maxZoom=n.maxZoom,b.panningEnabled=n.panningEnabled,b.userPanningEnabled=n.userPanningEnabled,b.pan=Yc(n.pan),b.boxSelectionEnabled=n.boxSelectionEnabled,b.renderer=Yc(p.renderer),b.hideEdgesOnViewport=p.hideEdgesOnViewport,b.textureOnViewport=p.textureOnViewport,b.wheelSensitivity=p.wheelSensitivity,b.motionBlur=p.motionBlur,b.multiClickDebounceTime=p.multiClickDebounceTime,b}}});Hm.$id=Hm.getElementById;[ik,lk,RT,Pw,Cm,fk,Aw,Pm,vk,Bv,hy].forEach(function(r){xr(Hm,r)});var gk={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}},yk={maximal:!1,acyclic:!1},Mp=function(e){return e.scratch("breadthfirst")},Lx=function(e,t){return e.scratch("breadthfirst",t)};function IT(r){this.options=xr({},gk,yk,r)}IT.prototype.run=function(){var r=this.options,e=r.cy,t=r.eles,n=t.nodes().filter(function(H){return H.isChildless()}),i=t,a=r.directed,o=r.acyclic||r.maximal||r.maximalAdjustments>0,s=!!r.boundingBox,u=e.extent(),l=qs(s?r.boundingBox:{x1:u.x1,y1:u.y1,w:u.w,h:u.h}),c;if(Eu(r.roots))c=r.roots;else if(di(r.roots)){for(var f=[],h=0;h<r.roots.length;h++){var d=r.roots[h],v=e.getElementById(d);f.push(v)}c=e.collection(f)}else if(yr(r.roots))c=e.$(r.roots);else if(a)c=n.roots();else{var y=t.components();c=e.collection();for(var w=function(){var $=y[b],ne=$.maxDegree(!1),Ie=$.filter(function(Le){return Le.degree(!1)===ne});c=c.add(Ie)},b=0;b<y.length;b++)w()}var p=[],m={},x=function($,ne){p[ne]==null&&(p[ne]=[]);var Ie=p[ne].length;p[ne].push($),Lx($,{index:Ie,depth:ne})},T=function($,ne){var Ie=Mp($),Le=Ie.depth,ze=Ie.index;p[Le][ze]=null,$.isChildless()&&x($,ne)};i.bfs({roots:c,directed:r.directed,visit:function($,ne,Ie,Le,ze){var Je=$[0],Pt=Je.id();Je.isChildless()&&x(Je,ze),m[Pt]=!0}});for(var P=[],C=0;C<n.length;C++){var R=n[C];m[R.id()]||P.push(R)}var D=function($){for(var ne=p[$],Ie=0;Ie<ne.length;Ie++){var Le=ne[Ie];if(Le==null){ne.splice(Ie,1),Ie--;continue}Lx(Le,{depth:$,index:Ie})}},N=function($,ne){for(var Ie=Mp($),Le=$.incomers().filter(function(er){return er.isNode()&&t.has(er)}),ze=-1,Je=$.id(),Pt=0;Pt<Le.length;Pt++){var Lt=Le[Pt],Wt=Mp(Lt);ze=Math.max(ze,Wt.depth)}if(Ie.depth<=ze){if(!r.acyclic&&ne[Je])return null;var Bt=ze+1;return T($,Bt),ne[Je]=Bt,!0}return!1};if(a&&o){var j=[],B={},z=function($){return j.push($)},W=function(){return j.shift()};for(n.forEach(function(H){return j.push(H)});j.length>0;){var Z=W(),Q=N(Z,B);if(Q)Z.outgoers().filter(function(H){return H.isNode()&&t.has(H)}).forEach(z);else if(Q===null){Fn("Detected double maximal shift for node `"+Z.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var re=0;if(r.avoidOverlap)for(var ee=0;ee<n.length;ee++){var ue=n[ee],de=ue.layoutDimensions(r),se=de.w,me=de.h;re=Math.max(re,se,me)}var Me={},he=function($){if(Me[$.id()])return Me[$.id()];for(var ne=Mp($).depth,Ie=$.neighborhood(),Le=0,ze=0,Je=0;Je<Ie.length;Je++){var Pt=Ie[Je];if(!(Pt.isEdge()||Pt.isParent()||!n.has(Pt))){var Lt=Mp(Pt);if(Lt!=null){var Wt=Lt.index,Bt=Lt.depth;if(!(Wt==null||Bt==null)){var er=p[Bt].length;Bt<ne&&(Le+=Wt/er,ze++)}}}}return ze=Math.max(1,ze),Le=Le/ze,ze===0&&(Le=0),Me[$.id()]=Le,Le},fe=function($,ne){var Ie=he($),Le=he(ne),ze=Ie-Le;return ze===0?MS($.id(),ne.id()):ze};r.depthSort!==void 0&&(fe=r.depthSort);for(var Ee=p.length,Ce=0;Ce<Ee;Ce++)p[Ce].sort(fe),D(Ce);for(var ke=[],Re=0;Re<P.length;Re++)ke.push(P[Re]);var ve=function(){for(var $=0;$<Ee;$++)D($)};ke.length&&(p.unshift(ke),Ee=p.length,ve());for(var we=0,Oe=0;Oe<Ee;Oe++)we=Math.max(p[Oe].length,we);var Be={x:l.x1+l.w/2,y:l.y1+l.h/2},Ye=n.reduce(function(H,$){return function(ne){return{w:H.w===-1?ne.w:(H.w+ne.w)/2,h:H.h===-1?ne.h:(H.h+ne.h)/2}}($.boundingBox({includeLabels:r.nodeDimensionsIncludeLabels}))},{w:-1,h:-1}),ht=Math.max(Ee===1?0:s?(l.h-r.padding*2-Ye.h)/(Ee-1):(l.h-r.padding*2-Ye.h)/(Ee+1),re),Ct=p.reduce(function(H,$){return Math.max(H,$.length)},0),ct=function($){var ne=Mp($),Ie=ne.depth,Le=ne.index;if(r.circle){var ze=Math.min(l.w/2/Ee,l.h/2/Ee);ze=Math.max(ze,re);var Je=ze*Ie+ze-(Ee>0&&p[0].length<=3?ze/2:0),Pt=2*Math.PI/p[Ie].length*Le;return Ie===0&&p[0].length===1&&(Je=1),{x:Be.x+Je*Math.cos(Pt),y:Be.y+Je*Math.sin(Pt)}}else{var Lt=p[Ie].length,Wt=Math.max(Lt===1?0:s?(l.w-r.padding*2-Ye.w)/((r.grid?Ct:Lt)-1):(l.w-r.padding*2-Ye.w)/((r.grid?Ct:Lt)+1),re),Bt={x:Be.x+(Le+1-(Lt+1)/2)*Wt,y:Be.y+(Ie+1-(Ee+1)/2)*ht};return Bt}};return t.nodes().layoutPositions(this,r,ct),this};var mk={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function kT(r){this.options=xr({},mk,r)}kT.prototype.run=function(){var r=this.options,e=r,t=r.cy,n=e.eles,i=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,a=n.nodes().not(":parent");e.sort&&(a=a.sort(e.sort));for(var o=qs(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},u=e.sweep===void 0?2*Math.PI-2*Math.PI/a.length:e.sweep,l=u/Math.max(1,a.length-1),c,f=0,h=0;h<a.length;h++){var d=a[h],v=d.layoutDimensions(e),y=v.w,w=v.h;f=Math.max(f,y,w)}if(Gt(e.radius)?c=e.radius:a.length<=1?c=0:c=Math.min(o.h,o.w)/2-f,a.length>1&&e.avoidOverlap){f*=1.75;var b=Math.cos(l)-Math.cos(0),p=Math.sin(l)-Math.sin(0),m=Math.sqrt(f*f/(b*b+p*p));c=Math.max(m,c)}var x=function(P,C){var R=e.startAngle+C*l*(i?1:-1),D=c*Math.cos(R),N=c*Math.sin(R),j={x:s.x+D,y:s.y+N};return j};return n.nodes().layoutPositions(this,e,x),this};var bk={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function DT(r){this.options=xr({},bk,r)}DT.prototype.run=function(){for(var r=this.options,e=r,t=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,n=r.cy,i=e.eles,a=i.nodes().not(":parent"),o=qs(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},u=[],l=0,c=0;c<a.length;c++){var f=a[c],h=void 0;h=e.concentric(f),u.push({value:h,node:f}),f._private.scratch.concentric=h}a.updateStyle();for(var d=0;d<a.length;d++){var v=a[d],y=v.layoutDimensions(e);l=Math.max(l,y.w,y.h)}u.sort(function(Ye,ht){return ht.value-Ye.value});for(var w=e.levelWidth(a),b=[[]],p=b[0],m=0;m<u.length;m++){var x=u[m];if(p.length>0){var T=Math.abs(p[0].value-x.value);T>=w&&(p=[],b.push(p))}p.push(x)}var P=l+e.minNodeSpacing;if(!e.avoidOverlap){var C=b.length>0&&b[0].length>1,R=Math.min(o.w,o.h)/2-P,D=R/(b.length+C?1:0);P=Math.min(P,D)}for(var N=0,j=0;j<b.length;j++){var B=b[j],z=e.sweep===void 0?2*Math.PI-2*Math.PI/B.length:e.sweep,W=B.dTheta=z/Math.max(1,B.length-1);if(B.length>1&&e.avoidOverlap){var Z=Math.cos(W)-Math.cos(0),Q=Math.sin(W)-Math.sin(0),re=Math.sqrt(P*P/(Z*Z+Q*Q));N=Math.max(re,N)}B.r=N,N+=P}if(e.equidistant){for(var ee=0,ue=0,de=0;de<b.length;de++){var se=b[de],me=se.r-ue;ee=Math.max(ee,me)}ue=0;for(var Me=0;Me<b.length;Me++){var he=b[Me];Me===0&&(ue=he.r),he.r=ue,ue+=ee}}for(var fe={},Ee=0;Ee<b.length;Ee++)for(var Ce=b[Ee],ke=Ce.dTheta,Re=Ce.r,ve=0;ve<Ce.length;ve++){var we=Ce[ve],Oe=e.startAngle+(t?1:-1)*ke*ve,Be={x:s.x+Re*Math.cos(Oe),y:s.y+Re*Math.sin(Oe)};fe[we.node.id()]=Be}return i.nodes().layoutPositions(this,e,function(Ye){var ht=Ye.id();return fe[ht]}),this};var b_,_k={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,t){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function m0(r){this.options=xr({},_k,r),this.options.layout=this;var e=this.options.eles.nodes(),t=this.options.eles.edges(),n=t.filter(function(i){var a=i.source().data("id"),o=i.target().data("id"),s=e.some(function(l){return l.data("id")===a}),u=e.some(function(l){return l.data("id")===o});return!s||!u});this.options.eles=this.options.eles.not(n)}m0.prototype.run=function(){var r=this.options,e=r.cy,t=this;t.stopped=!1,(r.animate===!0||r.animate===!1)&&t.emit({type:"layoutstart",layout:t}),r.debug===!0?b_=!0:b_=!1;var n=wk(e,t,r);b_&&xk(n),r.randomize&&Ok(n);var i=th(),a=function(){Sk(n,e,r),r.fit===!0&&e.fit(r.padding)},o=function(h){return!(t.stopped||h>=r.numIter||(Tk(n,r),n.temperature=n.temperature*r.coolingFactor,n.temperature<r.minTemp))},s=function(){if(r.animate===!0||r.animate===!1)a(),t.one("layoutstop",r.stop),t.emit({type:"layoutstop",layout:t});else{var h=r.eles.nodes(),d=LT(n,r,h);h.layoutPositions(t,r,d)}},u=0,l=!0;if(r.animate===!0){var c=function(){for(var h=0;l&&h<r.refresh;)l=o(u),u++,h++;if(!l)jx(n,r),s();else{var d=th();d-i>=r.animationThreshold&&a(),Um(c)}};c()}else{for(;l;)l=o(u),u++;jx(n,r),s()}return this};m0.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};m0.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var wk=function(e,t,n){for(var i=n.eles.edges(),a=n.eles.nodes(),o=qs(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),s={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:a.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:i.size(),temperature:n.initialTemp,clientWidth:o.w,clientHeight:o.h,boundingBox:o},u=n.eles.components(),l={},c=0;c<u.length;c++)for(var f=u[c],h=0;h<f.length;h++){var d=f[h];l[d.id()]=c}for(var c=0;c<s.nodeSize;c++){var v=a[c],y=v.layoutDimensions(n),w={};w.isLocked=v.locked(),w.id=v.data("id"),w.parentId=v.data("parent"),w.cmptId=l[v.id()],w.children=[],w.positionX=v.position("x"),w.positionY=v.position("y"),w.offsetX=0,w.offsetY=0,w.height=y.w,w.width=y.h,w.maxX=w.positionX+w.width/2,w.minX=w.positionX-w.width/2,w.maxY=w.positionY+w.height/2,w.minY=w.positionY-w.height/2,w.padLeft=parseFloat(v.style("padding")),w.padRight=parseFloat(v.style("padding")),w.padTop=parseFloat(v.style("padding")),w.padBottom=parseFloat(v.style("padding")),w.nodeRepulsion=Wi(n.nodeRepulsion)?n.nodeRepulsion(v):n.nodeRepulsion,s.layoutNodes.push(w),s.idToIndex[w.id]=c}for(var b=[],p=0,m=-1,x=[],c=0;c<s.nodeSize;c++){var v=s.layoutNodes[c],T=v.parentId;T!=null?s.layoutNodes[s.idToIndex[T]].children.push(v.id):(b[++m]=v.id,x.push(v.id))}for(s.graphSet.push(x);p<=m;){var P=b[p++],C=s.idToIndex[P],d=s.layoutNodes[C],R=d.children;if(R.length>0){s.graphSet.push(R);for(var c=0;c<R.length;c++)b[++m]=R[c]}}for(var c=0;c<s.graphSet.length;c++)for(var D=s.graphSet[c],h=0;h<D.length;h++){var N=s.idToIndex[D[h]];s.indexToGraph[N]=c}for(var c=0;c<s.edgeSize;c++){var j=i[c],B={};B.id=j.data("id"),B.sourceId=j.data("source"),B.targetId=j.data("target");var z=Wi(n.idealEdgeLength)?n.idealEdgeLength(j):n.idealEdgeLength,W=Wi(n.edgeElasticity)?n.edgeElasticity(j):n.edgeElasticity,Z=s.idToIndex[B.sourceId],Q=s.idToIndex[B.targetId],re=s.indexToGraph[Z],ee=s.indexToGraph[Q];if(re!=ee){for(var ue=Ek(B.sourceId,B.targetId,s),de=s.graphSet[ue],se=0,w=s.layoutNodes[Z];de.indexOf(w.id)===-1;)w=s.layoutNodes[s.idToIndex[w.parentId]],se++;for(w=s.layoutNodes[Q];de.indexOf(w.id)===-1;)w=s.layoutNodes[s.idToIndex[w.parentId]],se++;z*=se*n.nestingFactor}B.idealLength=z,B.elasticity=W,s.layoutEdges.push(B)}return s},Ek=function(e,t,n){var i=MT(e,t,0,n);return 2>i.count?0:i.graph},MT=function(e,t,n,i){var a=i.graphSet[n];if(-1<a.indexOf(e)&&-1<a.indexOf(t))return{count:2,graph:n};for(var o=0,s=0;s<a.length;s++){var u=a[s],l=i.idToIndex[u],c=i.layoutNodes[l].children;if(c.length!==0){var f=i.indexToGraph[i.idToIndex[c[0]]],h=MT(e,t,f,i);if(h.count!==0)if(h.count===1){if(o++,o===2)break}else return h}}return{count:o,graph:n}},xk,Ok=function(e,t){for(var n=e.clientWidth,i=e.clientHeight,a=0;a<e.nodeSize;a++){var o=e.layoutNodes[a];o.children.length===0&&!o.isLocked&&(o.positionX=Math.random()*n,o.positionY=Math.random()*i)}},LT=function(e,t,n){var i=e.boundingBox,a={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return t.boundingBox&&(n.forEach(function(o){var s=e.layoutNodes[e.idToIndex[o.data("id")]];a.x1=Math.min(a.x1,s.positionX),a.x2=Math.max(a.x2,s.positionX),a.y1=Math.min(a.y1,s.positionY),a.y2=Math.max(a.y2,s.positionY)}),a.w=a.x2-a.x1,a.h=a.y2-a.y1),function(o,s){var u=e.layoutNodes[e.idToIndex[o.data("id")]];if(t.boundingBox){var l=(u.positionX-a.x1)/a.w,c=(u.positionY-a.y1)/a.h;return{x:i.x1+l*i.w,y:i.y1+c*i.h}}else return{x:u.positionX,y:u.positionY}}},Sk=function(e,t,n){var i=n.layout,a=n.eles.nodes(),o=LT(e,n,a);a.positions(o),e.ready!==!0&&(e.ready=!0,i.one("layoutready",n.ready),i.emit({type:"layoutready",layout:this}))},Tk=function(e,t,n){Ck(e,t),Rk(e),Ik(e,t),kk(e),Dk(e)},Ck=function(e,t){for(var n=0;n<e.graphSet.length;n++)for(var i=e.graphSet[n],a=i.length,o=0;o<a;o++)for(var s=e.layoutNodes[e.idToIndex[i[o]]],u=o+1;u<a;u++){var l=e.layoutNodes[e.idToIndex[i[u]]];Pk(s,l,e,t)}},Nx=function(e){return-1+2*e*Math.random()},Pk=function(e,t,n,i){var a=e.cmptId,o=t.cmptId;if(!(a!==o&&!n.isCompound)){var s=t.positionX-e.positionX,u=t.positionY-e.positionY,l=1;s===0&&u===0&&(s=Nx(l),u=Nx(l));var c=Ak(e,t,s,u);if(c>0)var f=i.nodeOverlap*c,h=Math.sqrt(s*s+u*u),d=f*s/h,v=f*u/h;else var y=Ym(e,s,u),w=Ym(t,-1*s,-1*u),b=w.x-y.x,p=w.y-y.y,m=b*b+p*p,h=Math.sqrt(m),f=(e.nodeRepulsion+t.nodeRepulsion)/m,d=f*b/h,v=f*p/h;e.isLocked||(e.offsetX-=d,e.offsetY-=v),t.isLocked||(t.offsetX+=d,t.offsetY+=v)}},Ak=function(e,t,n,i){if(n>0)var a=e.maxX-t.minX;else var a=t.maxX-e.minX;if(i>0)var o=e.maxY-t.minY;else var o=t.maxY-e.minY;return a>=0&&o>=0?Math.sqrt(a*a+o*o):0},Ym=function(e,t,n){var i=e.positionX,a=e.positionY,o=e.height||1,s=e.width||1,u=n/t,l=o/s,c={};return t===0&&0<n||t===0&&0>n?(c.x=i,c.y=a+o/2,c):0<t&&-1*l<=u&&u<=l?(c.x=i+s/2,c.y=a+s*n/2/t,c):0>t&&-1*l<=u&&u<=l?(c.x=i-s/2,c.y=a-s*n/2/t,c):0<n&&(u<=-1*l||u>=l)?(c.x=i+o*t/2/n,c.y=a+o/2,c):(0>n&&(u<=-1*l||u>=l)&&(c.x=i-o*t/2/n,c.y=a-o/2),c)},Rk=function(e,t){for(var n=0;n<e.edgeSize;n++){var i=e.layoutEdges[n],a=e.idToIndex[i.sourceId],o=e.layoutNodes[a],s=e.idToIndex[i.targetId],u=e.layoutNodes[s],l=u.positionX-o.positionX,c=u.positionY-o.positionY;if(!(l===0&&c===0)){var f=Ym(o,l,c),h=Ym(u,-1*l,-1*c),d=h.x-f.x,v=h.y-f.y,y=Math.sqrt(d*d+v*v),w=Math.pow(i.idealLength-y,2)/i.elasticity;if(y!==0)var b=w*d/y,p=w*v/y;else var b=0,p=0;o.isLocked||(o.offsetX+=b,o.offsetY+=p),u.isLocked||(u.offsetX-=b,u.offsetY-=p)}}},Ik=function(e,t){if(t.gravity!==0)for(var n=1,i=0;i<e.graphSet.length;i++){var a=e.graphSet[i],o=a.length;if(i===0)var s=e.clientHeight/2,u=e.clientWidth/2;else var l=e.layoutNodes[e.idToIndex[a[0]]],c=e.layoutNodes[e.idToIndex[l.parentId]],s=c.positionX,u=c.positionY;for(var f=0;f<o;f++){var h=e.layoutNodes[e.idToIndex[a[f]]];if(!h.isLocked){var d=s-h.positionX,v=u-h.positionY,y=Math.sqrt(d*d+v*v);if(y>n){var w=t.gravity*d/y,b=t.gravity*v/y;h.offsetX+=w,h.offsetY+=b}}}}},kk=function(e,t){var n=[],i=0,a=-1;for(n.push.apply(n,e.graphSet[0]),a+=e.graphSet[0].length;i<=a;){var o=n[i++],s=e.idToIndex[o],u=e.layoutNodes[s],l=u.children;if(0<l.length&&!u.isLocked){for(var c=u.offsetX,f=u.offsetY,h=0;h<l.length;h++){var d=e.layoutNodes[e.idToIndex[l[h]]];d.offsetX+=c,d.offsetY+=f,n[++a]=l[h]}u.offsetX=0,u.offsetY=0}}},Dk=function(e,t){for(var n=0;n<e.nodeSize;n++){var i=e.layoutNodes[n];0<i.children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var i=e.layoutNodes[n];if(!(0<i.children.length||i.isLocked)){var a=Mk(i.offsetX,i.offsetY,e.temperature);i.positionX+=a.x,i.positionY+=a.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,NT(i,e)}}for(var n=0;n<e.nodeSize;n++){var i=e.layoutNodes[n];0<i.children.length&&!i.isLocked&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}},Mk=function(e,t,n){var i=Math.sqrt(e*e+t*t);if(i>n)var a={x:n*e/i,y:n*t/i};else var a={x:e,y:t};return a},NT=function(e,t){var n=e.parentId;if(n!=null){var i=t.layoutNodes[t.idToIndex[n]],a=!1;if((i.maxX==null||e.maxX+i.padRight>i.maxX)&&(i.maxX=e.maxX+i.padRight,a=!0),(i.minX==null||e.minX-i.padLeft<i.minX)&&(i.minX=e.minX-i.padLeft,a=!0),(i.maxY==null||e.maxY+i.padBottom>i.maxY)&&(i.maxY=e.maxY+i.padBottom,a=!0),(i.minY==null||e.minY-i.padTop<i.minY)&&(i.minY=e.minY-i.padTop,a=!0),a)return NT(i,t)}},jx=function(e,t){for(var n=e.layoutNodes,i=[],a=0;a<n.length;a++){var o=n[a],s=o.cmptId,u=i[s]=i[s]||[];u.push(o)}for(var l=0,a=0;a<i.length;a++){var c=i[a];if(c){c.x1=1/0,c.x2=-1/0,c.y1=1/0,c.y2=-1/0;for(var f=0;f<c.length;f++){var h=c[f];c.x1=Math.min(c.x1,h.positionX-h.width/2),c.x2=Math.max(c.x2,h.positionX+h.width/2),c.y1=Math.min(c.y1,h.positionY-h.height/2),c.y2=Math.max(c.y2,h.positionY+h.height/2)}c.w=c.x2-c.x1,c.h=c.y2-c.y1,l+=c.w*c.h}}i.sort(function(p,m){return m.w*m.h-p.w*p.h});for(var d=0,v=0,y=0,w=0,b=Math.sqrt(l)*e.clientWidth/e.clientHeight,a=0;a<i.length;a++){var c=i[a];if(c){for(var f=0;f<c.length;f++){var h=c[f];h.isLocked||(h.positionX+=d-c.x1,h.positionY+=v-c.y1)}d+=c.w+t.componentSpacing,y+=c.w+t.componentSpacing,w=Math.max(w,c.h),y>b&&(v+=w+t.componentSpacing,d=0,y=0,w=0)}}},Lk={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function jT(r){this.options=xr({},Lk,r)}jT.prototype.run=function(){var r=this.options,e=r,t=r.cy,n=e.eles,i=n.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));var a=qs(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()});if(a.h===0||a.w===0)n.nodes().layoutPositions(this,e,function(Me){return{x:a.x1,y:a.y1}});else{var o=i.size(),s=Math.sqrt(o*a.h/a.w),u=Math.round(s),l=Math.round(a.w/a.h*s),c=function(he){if(he==null)return Math.min(u,l);var fe=Math.min(u,l);fe==u?u=he:l=he},f=function(he){if(he==null)return Math.max(u,l);var fe=Math.max(u,l);fe==u?u=he:l=he},h=e.rows,d=e.cols!=null?e.cols:e.columns;if(h!=null&&d!=null)u=h,l=d;else if(h!=null&&d==null)u=h,l=Math.ceil(o/u);else if(h==null&&d!=null)l=d,u=Math.ceil(o/l);else if(l*u>o){var v=c(),y=f();(v-1)*y>=o?c(v-1):(y-1)*v>=o&&f(y-1)}else for(;l*u<o;){var w=c(),b=f();(b+1)*w>=o?f(b+1):c(w+1)}var p=a.w/l,m=a.h/u;if(e.condense&&(p=0,m=0),e.avoidOverlap)for(var x=0;x<i.length;x++){var T=i[x],P=T._private.position;(P.x==null||P.y==null)&&(P.x=0,P.y=0);var C=T.layoutDimensions(e),R=e.avoidOverlapPadding,D=C.w+R,N=C.h+R;p=Math.max(p,D),m=Math.max(m,N)}for(var j={},B=function(he,fe){return!!j["c-"+he+"-"+fe]},z=function(he,fe){j["c-"+he+"-"+fe]=!0},W=0,Z=0,Q=function(){Z++,Z>=l&&(Z=0,W++)},re={},ee=0;ee<i.length;ee++){var ue=i[ee],de=e.position(ue);if(de&&(de.row!==void 0||de.col!==void 0)){var se={row:de.row,col:de.col};if(se.col===void 0)for(se.col=0;B(se.row,se.col);)se.col++;else if(se.row===void 0)for(se.row=0;B(se.row,se.col);)se.row++;re[ue.id()]=se,z(se.row,se.col)}}var me=function(he,fe){var Ee,Ce;if(he.locked()||he.isParent())return!1;var ke=re[he.id()];if(ke)Ee=ke.col*p+p/2+a.x1,Ce=ke.row*m+m/2+a.y1;else{for(;B(W,Z);)Q();Ee=Z*p+p/2+a.x1,Ce=W*m+m/2+a.y1,z(W,Z),Q()}return{x:Ee,y:Ce}};i.layoutPositions(this,e,me)}return this};var Nk={ready:function(){},stop:function(){}};function h1(r){this.options=xr({},Nk,r)}h1.prototype.run=function(){var r=this.options,e=r.eles,t=this;return r.cy,t.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),t.one("layoutready",r.ready),t.emit("layoutready"),t.one("layoutstop",r.stop),t.emit("layoutstop"),this};h1.prototype.stop=function(){return this};var jk={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function BT(r){this.options=xr({},jk,r)}BT.prototype.run=function(){var r=this.options,e=r.eles,t=e.nodes(),n=Wi(r.positions);function i(a){if(r.positions==null)return oA(a.position());if(n)return r.positions(a);var o=r.positions[a._private.data.id];return o??null}return t.layoutPositions(this,r,function(a,o){var s=i(a);return a.locked()||s==null?!1:s}),this};var Bk={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function FT(r){this.options=xr({},Bk,r)}FT.prototype.run=function(){var r=this.options,e=r.cy,t=r.eles,n=qs(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),i=function(o,s){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}};return t.nodes().layoutPositions(this,r,i),this};var Fk=[{name:"breadthfirst",impl:IT},{name:"circle",impl:kT},{name:"concentric",impl:DT},{name:"cose",impl:m0},{name:"grid",impl:jT},{name:"null",impl:h1},{name:"preset",impl:BT},{name:"random",impl:FT}];function UT(r){this.options=r,this.notifications=0}var Bx=function(){},Fx=function(){throw new Error("A headless instance can not render images")};UT.prototype={recalculateRenderedStyle:Bx,notify:function(){this.notifications++},init:Bx,isHeadless:function(){return!0},png:Fx,jpg:Fx};var d1={};d1.arrowShapeWidth=.3;d1.registerArrowShapes=function(){var r=this.arrowShapes={},e=this,t=function(l,c,f,h,d,v,y){var w=d.x-f/2-y,b=d.x+f/2+y,p=d.y-f/2-y,m=d.y+f/2+y,x=w<=l&&l<=b&&p<=c&&c<=m;return x},n=function(l,c,f,h,d){var v=l*Math.cos(h)-c*Math.sin(h),y=l*Math.sin(h)+c*Math.cos(h),w=v*f,b=y*f,p=w+d.x,m=b+d.y;return{x:p,y:m}},i=function(l,c,f,h){for(var d=[],v=0;v<l.length;v+=2){var y=l[v],w=l[v+1];d.push(n(y,w,c,f,h))}return d},a=function(l){for(var c=[],f=0;f<l.length;f++){var h=l[f];c.push(h.x,h.y)}return c},o=function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").pfValue*2},s=function(l,c){yr(c)&&(c=r[c]),r[l]=xr({name:l,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(h,d,v,y,w,b){var p=a(i(this.points,v+2*b,y,w)),m=Us(h,d,p);return m},roughCollide:t,draw:function(h,d,v,y){var w=i(this.points,d,v,y);e.arrowShapeImpl("polygon")(h,w)},spacing:function(h){return 0},gap:o},c)};s("none",{collide:zm,roughCollide:zm,draw:Qw,spacing:tE,gap:tE}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:r.triangle.points,controlPoint:[0,-.15],roughCollide:t,draw:function(l,c,f,h,d){var v=i(this.points,c,f,h),y=this.controlPoint,w=n(y[0],y[1],c,f,h);e.arrowShapeImpl(this.name)(l,v,w)},gap:function(l){return o(l)*.8}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(l,c,f,h,d,v,y){var w=a(i(this.points,f+2*y,h,d)),b=a(i(this.pointsTee,f+2*y,h,d)),p=Us(l,c,w)||Us(l,c,b);return p},draw:function(l,c,f,h,d){var v=i(this.points,c,f,h),y=i(this.pointsTee,c,f,h);e.arrowShapeImpl(this.name)(l,v,y)}}),s("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(l,c,f,h,d,v,y){var w=d,b=Math.pow(w.x-l,2)+Math.pow(w.y-c,2)<=Math.pow((f+2*y)*this.radius,2),p=a(i(this.points,f+2*y,h,d));return Us(l,c,p)||b},draw:function(l,c,f,h,d){var v=i(this.pointsTr,c,f,h);e.arrowShapeImpl(this.name)(l,v,h.x,h.y,this.radius*c)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(l,c){var f=this.baseCrossLinePts.slice(),h=c/l,d=3,v=5;return f[d]=f[d]-h,f[v]=f[v]-h,f},collide:function(l,c,f,h,d,v,y){var w=a(i(this.points,f+2*y,h,d)),b=a(i(this.crossLinePts(f,v),f+2*y,h,d)),p=Us(l,c,w)||Us(l,c,b);return p},draw:function(l,c,f,h,d){var v=i(this.points,c,f,h),y=i(this.crossLinePts(c,d),c,f,h);e.arrowShapeImpl(this.name)(l,v,y)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(l){return o(l)*.525}}),s("circle",{radius:.15,collide:function(l,c,f,h,d,v,y){var w=d,b=Math.pow(w.x-l,2)+Math.pow(w.y-c,2)<=Math.pow((f+2*y)*this.radius,2);return b},draw:function(l,c,f,h,d){e.arrowShapeImpl(this.name)(l,h.x,h.y,this.radius*c)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(l){return 1},gap:function(l){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(l){return .95*l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}})};var zv={};zv.projectIntoViewport=function(r,e){var t=this.cy,n=this.findContainerClientCoords(),i=n[0],a=n[1],o=n[4],s=t.pan(),u=t.zoom(),l=((r-i)/o-s.x)/u,c=((e-a)/o-s.y)/u;return[l,c]};zv.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var r=this.container,e=r.getBoundingClientRect(),t=this.cy.window().getComputedStyle(r),n=function(b){return parseFloat(t.getPropertyValue(b))},i={left:n("padding-left"),right:n("padding-right"),top:n("padding-top"),bottom:n("padding-bottom")},a={left:n("border-left-width"),right:n("border-right-width"),top:n("border-top-width"),bottom:n("border-bottom-width")},o=r.clientWidth,s=r.clientHeight,u=i.left+i.right,l=i.top+i.bottom,c=a.left+a.right,f=e.width/(o+c),h=o-u,d=s-l,v=e.left+i.left+a.left,y=e.top+i.top+a.top;return this.containerBB=[v,y,h,d,f]};zv.invalidateContainerClientCoordsCache=function(){this.containerBB=null};zv.findNearestElement=function(r,e,t,n){return this.findNearestElements(r,e,t,n)[0]};zv.findNearestElements=function(r,e,t,n){var i=this,a=this,o=a.getCachedZSortedEles(),s=[],u=a.cy.zoom(),l=a.cy.hasCompoundNodes(),c=(n?24:8)/u,f=(n?8:2)/u,h=(n?8:2)/u,d=1/0,v,y;t&&(o=o.interactive);function w(C,R){if(C.isNode()){if(y)return;y=C,s.push(C)}if(C.isEdge()&&(R==null||R<d))if(v){if(v.pstyle("z-compound-depth").value===C.pstyle("z-compound-depth").value&&v.pstyle("z-compound-depth").value===C.pstyle("z-compound-depth").value){for(var D=0;D<s.length;D++)if(s[D].isEdge()){s[D]=C,v=C,d=R??d;break}}}else s.push(C),v=C,d=R??d}function b(C){var R=C.outerWidth()+2*f,D=C.outerHeight()+2*f,N=R/2,j=D/2,B=C.position(),z=C.pstyle("corner-radius").value==="auto"?"auto":C.pstyle("corner-radius").pfValue,W=C._private.rscratch;if(B.x-N<=r&&r<=B.x+N&&B.y-j<=e&&e<=B.y+j){var Z=a.nodeShapes[i.getNodeShape(C)];if(Z.checkPoint(r,e,0,R,D,B.x,B.y,z,W))return w(C,0),!0}}function p(C){var R=C._private,D=R.rscratch,N=C.pstyle("width").pfValue,j=C.pstyle("arrow-scale").value,B=N/2+c,z=B*B,W=B*2,ee=R.source,ue=R.target,Z;if(D.edgeType==="segments"||D.edgeType==="straight"||D.edgeType==="haystack"){for(var Q=D.allpts,re=0;re+3<Q.length;re+=2)if(bA(r,e,Q[re],Q[re+1],Q[re+2],Q[re+3],W)&&z>(Z=OA(r,e,Q[re],Q[re+1],Q[re+2],Q[re+3])))return w(C,Z),!0}else if(D.edgeType==="bezier"||D.edgeType==="multibezier"||D.edgeType==="self"||D.edgeType==="compound"){for(var Q=D.allpts,re=0;re+5<D.allpts.length;re+=4)if(_A(r,e,Q[re],Q[re+1],Q[re+2],Q[re+3],Q[re+4],Q[re+5],W)&&z>(Z=xA(r,e,Q[re],Q[re+1],Q[re+2],Q[re+3],Q[re+4],Q[re+5])))return w(C,Z),!0}for(var ee=ee||R.source,ue=ue||R.target,de=i.getArrowWidth(N,j),se=[{name:"source",x:D.arrowStartX,y:D.arrowStartY,angle:D.srcArrowAngle},{name:"target",x:D.arrowEndX,y:D.arrowEndY,angle:D.tgtArrowAngle},{name:"mid-source",x:D.midX,y:D.midY,angle:D.midsrcArrowAngle},{name:"mid-target",x:D.midX,y:D.midY,angle:D.midtgtArrowAngle}],re=0;re<se.length;re++){var me=se[re],Me=a.arrowShapes[C.pstyle(me.name+"-arrow-shape").value],he=C.pstyle("width").pfValue;if(Me.roughCollide(r,e,de,me.angle,{x:me.x,y:me.y},he,c)&&Me.collide(r,e,de,me.angle,{x:me.x,y:me.y},he,c))return w(C),!0}l&&s.length>0&&(b(ee),b(ue))}function m(C,R,D){return Fs(C,R,D)}function x(C,R){var D=C._private,N=h,j;R?j=R+"-":j="",C.boundingBox();var B=D.labelBounds[R||"main"],z=C.pstyle(j+"label").value,W=C.pstyle("text-events").strValue==="yes";if(!(!W||!z)){var Z=m(D.rscratch,"labelX",R),Q=m(D.rscratch,"labelY",R),re=m(D.rscratch,"labelAngle",R),ee=C.pstyle(j+"text-margin-x").pfValue,ue=C.pstyle(j+"text-margin-y").pfValue,de=B.x1-N-ee,se=B.x2+N-ee,me=B.y1-N-ue,Me=B.y2+N-ue;if(re){var he=Math.cos(re),fe=Math.sin(re),Ee=function(Be,Ye){return Be=Be-Z,Ye=Ye-Q,{x:Be*he-Ye*fe+Z,y:Be*fe+Ye*he+Q}},Ce=Ee(de,me),ke=Ee(de,Me),Re=Ee(se,me),ve=Ee(se,Me),we=[Ce.x+ee,Ce.y+ue,Re.x+ee,Re.y+ue,ve.x+ee,ve.y+ue,ke.x+ee,ke.y+ue];if(Us(r,e,we))return w(C),!0}else if(tg(B,r,e))return w(C),!0}}for(var T=o.length-1;T>=0;T--){var P=o[T];P.isNode()?b(P)||x(P):p(P)||x(P)||x(P,"source")||x(P,"target")}return s};zv.getAllInBox=function(r,e,t,n){var i=this.getCachedZSortedEles().interactive,a=this.cy.zoom(),o=2/a,s=[],u=Math.min(r,t),l=Math.max(r,t),c=Math.min(e,n),f=Math.max(e,n);r=u,t=l,e=c,n=f;var h=qs({x1:r,y1:e,x2:t,y2:n});function d(z,W,Z){return Fs(z,W,Z)}function v(z,W){var Z=z._private,Q=o,re="";z.boundingBox();var ee=Z.labelBounds.main,ue=d(Z.rscratch,"labelX",W),de=d(Z.rscratch,"labelY",W),se=d(Z.rscratch,"labelAngle",W),me=z.pstyle(re+"text-margin-x").pfValue,Me=z.pstyle(re+"text-margin-y").pfValue,he=ee.x1-Q-me,fe=ee.x2+Q-me,Ee=ee.y1-Q-Me,Ce=ee.y2+Q-Me;if(se){var ke=Math.cos(se),Re=Math.sin(se),ve=function(Oe,Be){return Oe=Oe-ue,Be=Be-de,{x:Oe*ke-Be*Re+ue,y:Oe*Re+Be*ke+de}};return[ve(he,Ee),ve(fe,Ee),ve(fe,Ce),ve(he,Ce)]}else return[{x:he,y:Ee},{x:fe,y:Ee},{x:fe,y:Ce},{x:he,y:Ce}]}for(var y=0;y<i.length;y++){var w=i[y];if(w.isNode()){var b=w,p=b.pstyle("text-events").strValue==="yes",m=b.pstyle("box-select-labels").strValue==="yes",x=b.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:m&&p});if(r1(h,x)){var T=v(b),P=[{x:h.x1,y:h.y1},{x:h.x2,y:h.y1},{x:h.x2,y:h.y2},{x:h.x1,y:h.y2}];AA(T,P)&&s.push(b)}}else{var C=w,R=C._private,D=R.rscratch;if(D.startX!=null&&D.startY!=null&&!tg(h,D.startX,D.startY)||D.endX!=null&&D.endY!=null&&!tg(h,D.endX,D.endY))continue;if(D.edgeType==="bezier"||D.edgeType==="multibezier"||D.edgeType==="self"||D.edgeType==="compound"||D.edgeType==="segments"||D.edgeType==="haystack"){for(var N=R.rstyle.bezierPts||R.rstyle.linePts||R.rstyle.haystackPts,j=!0,B=0;B<N.length;B++)if(!yA(h,N[B])){j=!1;break}j&&s.push(C)}else(D.edgeType==="haystack"||D.edgeType==="straight")&&s.push(C)}}return s};var Xm={};Xm.calculateArrowAngles=function(r){var e=r._private.rscratch,t=e.edgeType==="haystack",n=e.edgeType==="bezier",i=e.edgeType==="multibezier",a=e.edgeType==="segments",o=e.edgeType==="compound",s=e.edgeType==="self",u,l,c,f,h,d,b,p;if(t?(c=e.haystackPts[0],f=e.haystackPts[1],h=e.haystackPts[2],d=e.haystackPts[3]):(c=e.arrowStartX,f=e.arrowStartY,h=e.arrowEndX,d=e.arrowEndY),b=e.midX,p=e.midY,a)u=c-e.segpts[0],l=f-e.segpts[1];else if(i||o||s||n){var v=e.allpts,y=ea(v[0],v[2],v[4],.1),w=ea(v[1],v[3],v[5],.1);u=c-y,l=f-w}else u=c-b,l=f-p;e.srcArrowAngle=Qy(u,l);var b=e.midX,p=e.midY;if(t&&(b=(c+h)/2,p=(f+d)/2),u=h-c,l=d-f,a){var v=e.allpts;if(v.length/2%2===0){var m=v.length/2,x=m-2;u=v[m]-v[x],l=v[m+1]-v[x+1]}else if(e.isRound)u=e.midVector[1],l=-e.midVector[0];else{var m=v.length/2-1,x=m-2;u=v[m]-v[x],l=v[m+1]-v[x+1]}}else if(i||o||s){var v=e.allpts,T=e.ctrlpts,P,C,R,D;if(T.length/2%2===0){var N=v.length/2-1,j=N+2,B=j+2;P=ea(v[N],v[j],v[B],0),C=ea(v[N+1],v[j+1],v[B+1],0),R=ea(v[N],v[j],v[B],1e-4),D=ea(v[N+1],v[j+1],v[B+1],1e-4)}else{var j=v.length/2-1,N=j-2,B=j+2;P=ea(v[N],v[j],v[B],.4999),C=ea(v[N+1],v[j+1],v[B+1],.4999),R=ea(v[N],v[j],v[B],.5),D=ea(v[N+1],v[j+1],v[B+1],.5)}u=R-P,l=D-C}if(e.midtgtArrowAngle=Qy(u,l),e.midDispX=u,e.midDispY=l,u*=-1,l*=-1,a){var v=e.allpts;if(v.length/2%2!==0){if(!e.isRound){var m=v.length/2-1,z=m+2;u=-(v[z]-v[m]),l=-(v[z+1]-v[m+1])}}}if(e.midsrcArrowAngle=Qy(u,l),a)u=h-e.segpts[e.segpts.length-2],l=d-e.segpts[e.segpts.length-1];else if(i||o||s||n){var v=e.allpts,W=v.length,y=ea(v[W-6],v[W-4],v[W-2],.9),w=ea(v[W-5],v[W-3],v[W-1],.9);u=h-y,l=d-w}else u=h-b,l=d-p;e.tgtArrowAngle=Qy(u,l)};Xm.getArrowWidth=Xm.getArrowHeight=function(r,e){var t=this.arrowWidthCache=this.arrowWidthCache||{},n=t[r+", "+e];return n||(n=Math.max(Math.pow(r*13.37,.9),29)*e,t[r+", "+e]=n,n)};var Rw,Iw,Hc={},Qu={},Ux,zx,Iv,Am,Xf,pv,Av,Vc,Lp,am,zT,GT,kw,Dw,Gx,Vx=function(e,t,n){n.x=t.x-e.x,n.y=t.y-e.y,n.len=Math.sqrt(n.x*n.x+n.y*n.y),n.nx=n.x/n.len,n.ny=n.y/n.len,n.ang=Math.atan2(n.ny,n.nx)},Uk=function(e,t){t.x=e.x*-1,t.y=e.y*-1,t.nx=e.nx*-1,t.ny=e.ny*-1,t.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang},zk=function(e,t,n,i,a){if(e!==Gx?Vx(t,e,Hc):Uk(Qu,Hc),Vx(t,n,Qu),Ux=Hc.nx*Qu.ny-Hc.ny*Qu.nx,zx=Hc.nx*Qu.nx-Hc.ny*-Qu.ny,Xf=Math.asin(Math.max(-1,Math.min(1,Ux))),Math.abs(Xf)<1e-6){Rw=t.x,Iw=t.y,Av=Lp=0;return}Iv=1,Am=!1,zx<0?Xf<0?Xf=Math.PI+Xf:(Xf=Math.PI-Xf,Iv=-1,Am=!0):Xf>0&&(Iv=-1,Am=!0),t.radius!==void 0?Lp=t.radius:Lp=i,pv=Xf/2,am=Math.min(Hc.len/2,Qu.len/2),a?(Vc=Math.abs(Math.cos(pv)*Lp/Math.sin(pv)),Vc>am?(Vc=am,Av=Math.abs(Vc*Math.sin(pv)/Math.cos(pv))):Av=Lp):(Vc=Math.min(am,Lp),Av=Math.abs(Vc*Math.sin(pv)/Math.cos(pv))),kw=t.x+Qu.nx*Vc,Dw=t.y+Qu.ny*Vc,Rw=kw-Qu.ny*Av*Iv,Iw=Dw+Qu.nx*Av*Iv,zT=t.x+Hc.nx*Vc,GT=t.y+Hc.ny*Vc,Gx=t};function VT(r,e){e.radius===0?r.lineTo(e.cx,e.cy):r.arc(e.cx,e.cy,e.radius,e.startAngle,e.endAngle,e.counterClockwise)}function v1(r,e,t,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return n===0||e.radius===0?{cx:e.x,cy:e.y,radius:0,startX:e.x,startY:e.y,stopX:e.x,stopY:e.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(zk(r,e,t,n,i),{cx:Rw,cy:Iw,radius:Av,startX:zT,startY:GT,stopX:kw,stopY:Dw,startAngle:Hc.ang+Math.PI/2*Iv,endAngle:Qu.ang-Math.PI/2*Iv,counterClockwise:Am})}var vy=.01,Gk=Math.sqrt(2*vy),qa={};qa.findMidptPtsEtc=function(r,e){var t=e.posPts,n=e.intersectionPts,i=e.vectorNormInverse,a,o=r.pstyle("source-endpoint"),s=r.pstyle("target-endpoint"),u=o.units!=null&&s.units!=null,l=function(T,P,C,R){var D=R-P,N=C-T,j=Math.sqrt(N*N+D*D);return{x:-D/j,y:N/j}},c=r.pstyle("edge-distances").value;switch(c){case"node-position":a=t;break;case"intersection":a=n;break;case"endpoints":{if(u){var f=this.manualEndptToPx(r.source()[0],o),h=Lo(f,2),d=h[0],v=h[1],y=this.manualEndptToPx(r.target()[0],s),w=Lo(y,2),b=w[0],p=w[1],m={x1:d,y1:v,x2:b,y2:p};i=l(d,v,b,p),a=m}else Fn("Edge ".concat(r.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),a=n;break}}return{midptPts:a,vectorNormInverse:i}};qa.findHaystackPoints=function(r){for(var e=0;e<r.length;e++){var t=r[e],n=t._private,i=n.rscratch;if(!i.haystack){var a=Math.random()*2*Math.PI;i.source={x:Math.cos(a),y:Math.sin(a)},a=Math.random()*2*Math.PI,i.target={x:Math.cos(a),y:Math.sin(a)}}var o=n.source,s=n.target,u=o.position(),l=s.position(),c=o.width(),f=s.width(),h=o.height(),d=s.height(),v=t.pstyle("haystack-radius").value,y=v/2;i.haystackPts=i.allpts=[i.source.x*c*y+u.x,i.source.y*h*y+u.y,i.target.x*f*y+l.x,i.target.y*d*y+l.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType="haystack",i.haystack=!0,this.storeEdgeProjections(t),this.calculateArrowAngles(t),this.recalculateEdgeLabelProjections(t),this.calculateLabelAngles(t)}};qa.findSegmentsPoints=function(r,e){var t=r._private.rscratch,n=r.pstyle("segment-weights"),i=r.pstyle("segment-distances"),a=r.pstyle("segment-radii"),o=r.pstyle("radius-type"),s=Math.min(n.pfValue.length,i.pfValue.length),u=a.pfValue[a.pfValue.length-1],l=o.pfValue[o.pfValue.length-1];t.edgeType="segments",t.segpts=[],t.radii=[],t.isArcRadius=[];for(var c=0;c<s;c++){var f=n.pfValue[c],h=i.pfValue[c],d=1-f,v=f,y=this.findMidptPtsEtc(r,e),w=y.midptPts,b=y.vectorNormInverse,p={x:w.x1*d+w.x2*v,y:w.y1*d+w.y2*v};t.segpts.push(p.x+b.x*h,p.y+b.y*h),t.radii.push(a.pfValue[c]!==void 0?a.pfValue[c]:u),t.isArcRadius.push((o.pfValue[c]!==void 0?o.pfValue[c]:l)==="arc-radius")}};qa.findLoopPoints=function(r,e,t,n){var i=r._private.rscratch,a=e.dirCounts,o=e.srcPos,s=r.pstyle("control-point-distances"),u=s?s.pfValue[0]:void 0,l=r.pstyle("loop-direction").pfValue,c=r.pstyle("loop-sweep").pfValue,f=r.pstyle("control-point-step-size").pfValue;i.edgeType="self";var h=t,d=f;n&&(h=0,d=u);var v=l-Math.PI/2,y=v-c/2,w=v+c/2,b=l+"_"+c;h=a[b]===void 0?a[b]=0:++a[b],i.ctrlpts=[o.x+Math.cos(y)*1.4*d*(h/3+1),o.y+Math.sin(y)*1.4*d*(h/3+1),o.x+Math.cos(w)*1.4*d*(h/3+1),o.y+Math.sin(w)*1.4*d*(h/3+1)]};qa.findCompoundLoopPoints=function(r,e,t,n){var i=r._private.rscratch;i.edgeType="compound";var a=e.srcPos,o=e.tgtPos,s=e.srcW,u=e.srcH,l=e.tgtW,c=e.tgtH,f=r.pstyle("control-point-step-size").pfValue,h=r.pstyle("control-point-distances"),d=h?h.pfValue[0]:void 0,v=t,y=f;n&&(v=0,y=d);var w=50,b={x:a.x-s/2,y:a.y-u/2},p={x:o.x-l/2,y:o.y-c/2},m={x:Math.min(b.x,p.x),y:Math.min(b.y,p.y)},x=.5,T=Math.max(x,Math.log(s*vy)),P=Math.max(x,Math.log(l*vy));i.ctrlpts=[m.x,m.y-(1+Math.pow(w,1.12)/100)*y*(v/3+1)*T,m.x-(1+Math.pow(w,1.12)/100)*y*(v/3+1)*P,m.y]};qa.findStraightEdgePoints=function(r){r._private.rscratch.edgeType="straight"};qa.findBezierPoints=function(r,e,t,n,i){var a=r._private.rscratch,o=r.pstyle("control-point-step-size").pfValue,s=r.pstyle("control-point-distances"),u=r.pstyle("control-point-weights"),l=s&&u?Math.min(s.value.length,u.value.length):1,c=s?s.pfValue[0]:void 0,f=u.value[0],h=n;a.edgeType=h?"multibezier":"bezier",a.ctrlpts=[];for(var d=0;d<l;d++){var v=(.5-e.eles.length/2+t)*o*(i?-1:1),y=void 0,w=t1(v);h&&(c=s?s.pfValue[d]:o,f=u.value[d]),n?y=c:y=c!==void 0?w*c:void 0;var b=y!==void 0?y:v,p=1-f,m=f,x=this.findMidptPtsEtc(r,e),T=x.midptPts,P=x.vectorNormInverse,C={x:T.x1*p+T.x2*m,y:T.y1*p+T.y2*m};a.ctrlpts.push(C.x+P.x*b,C.y+P.y*b)}};qa.findTaxiPoints=function(r,e){var t=r._private.rscratch;t.edgeType="segments";var n="vertical",i="horizontal",a="leftward",o="rightward",s="downward",u="upward",l="auto",c=e.posPts,f=e.srcW,h=e.srcH,d=e.tgtW,v=e.tgtH,y=r.pstyle("edge-distances").value,w=y!=="node-position",b=r.pstyle("taxi-direction").value,p=b,m=r.pstyle("taxi-turn"),x=m.units==="%",T=m.pfValue,P=T<0,C=r.pstyle("taxi-turn-min-distance").pfValue,R=w?(f+d)/2:0,D=w?(h+v)/2:0,N=c.x2-c.x1,j=c.y2-c.y1,B=function(be,it){return be>0?Math.max(be-it,0):Math.min(be+it,0)},z=B(N,R),W=B(j,D),Z=!1;p===l?b=Math.abs(z)>Math.abs(W)?i:n:p===u||p===s?(b=n,Z=!0):(p===a||p===o)&&(b=i,Z=!0);var Q=b===n,re=Q?W:z,ee=Q?j:N,ue=t1(ee),de=!1;!(Z&&(x||P))&&(p===s&&ee<0||p===u&&ee>0||p===a&&ee>0||p===o&&ee<0)&&(ue*=-1,re=ue*Math.abs(re),de=!0);var se;if(x){var me=T<0?1+T:T;se=me*re}else{var Me=T<0?re:0;se=Me+T*ue}var he=function(be){return Math.abs(be)<C||Math.abs(be)>=Math.abs(re)},fe=he(se),Ee=he(Math.abs(re)-Math.abs(se)),Ce=fe||Ee;if(Ce&&!de)if(Q){var ke=Math.abs(ee)<=h/2,Re=Math.abs(N)<=d/2;if(ke){var ve=(c.x1+c.x2)/2,we=c.y1,Oe=c.y2;t.segpts=[ve,we,ve,Oe]}else if(Re){var Be=(c.y1+c.y2)/2,Ye=c.x1,ht=c.x2;t.segpts=[Ye,Be,ht,Be]}else t.segpts=[c.x1,c.y2]}else{var Ct=Math.abs(ee)<=f/2,ct=Math.abs(j)<=v/2;if(Ct){var H=(c.y1+c.y2)/2,$=c.x1,ne=c.x2;t.segpts=[$,H,ne,H]}else if(ct){var Ie=(c.x1+c.x2)/2,Le=c.y1,ze=c.y2;t.segpts=[Ie,Le,Ie,ze]}else t.segpts=[c.x2,c.y1]}else if(Q){var Je=c.y1+se+(w?h/2*ue:0),Pt=c.x1,Lt=c.x2;t.segpts=[Pt,Je,Lt,Je]}else{var Wt=c.x1+se+(w?f/2*ue:0),Bt=c.y1,er=c.y2;t.segpts=[Wt,Bt,Wt,er]}if(t.isRound){var Ar=r.pstyle("taxi-radius").value,Yt=r.pstyle("radius-type").value[0]==="arc-radius";t.radii=new Array(t.segpts.length/2).fill(Ar),t.isArcRadius=new Array(t.segpts.length/2).fill(Yt)}};qa.tryToCorrectInvalidPoints=function(r,e){var t=r._private.rscratch;if(t.edgeType==="bezier"){var n=e.srcPos,i=e.tgtPos,a=e.srcW,o=e.srcH,s=e.tgtW,u=e.tgtH,l=e.srcShape,c=e.tgtShape,f=e.srcCornerRadius,h=e.tgtCornerRadius,d=e.srcRs,v=e.tgtRs,y=!Gt(t.startX)||!Gt(t.startY),w=!Gt(t.arrowStartX)||!Gt(t.arrowStartY),b=!Gt(t.endX)||!Gt(t.endY),p=!Gt(t.arrowEndX)||!Gt(t.arrowEndY),m=3,x=this.getArrowWidth(r.pstyle("width").pfValue,r.pstyle("arrow-scale").value)*this.arrowShapeWidth,T=m*x,P=Nv({x:t.ctrlpts[0],y:t.ctrlpts[1]},{x:t.startX,y:t.startY}),C=P<T,R=Nv({x:t.ctrlpts[0],y:t.ctrlpts[1]},{x:t.endX,y:t.endY}),D=R<T,N=!1;if(y||w||C){N=!0;var j={x:t.ctrlpts[0]-n.x,y:t.ctrlpts[1]-n.y},B=Math.sqrt(j.x*j.x+j.y*j.y),z={x:j.x/B,y:j.y/B},W=Math.max(a,o),Z={x:t.ctrlpts[0]+z.x*2*W,y:t.ctrlpts[1]+z.y*2*W},Q=l.intersectLine(n.x,n.y,a,o,Z.x,Z.y,0,f,d);C?(t.ctrlpts[0]=t.ctrlpts[0]+z.x*(T-P),t.ctrlpts[1]=t.ctrlpts[1]+z.y*(T-P)):(t.ctrlpts[0]=Q[0]+z.x*T,t.ctrlpts[1]=Q[1]+z.y*T)}if(b||p||D){N=!0;var re={x:t.ctrlpts[0]-i.x,y:t.ctrlpts[1]-i.y},ee=Math.sqrt(re.x*re.x+re.y*re.y),ue={x:re.x/ee,y:re.y/ee},de=Math.max(a,o),se={x:t.ctrlpts[0]+ue.x*2*de,y:t.ctrlpts[1]+ue.y*2*de},me=c.intersectLine(i.x,i.y,s,u,se.x,se.y,0,h,v);D?(t.ctrlpts[0]=t.ctrlpts[0]+ue.x*(T-R),t.ctrlpts[1]=t.ctrlpts[1]+ue.y*(T-R)):(t.ctrlpts[0]=me[0]+ue.x*T,t.ctrlpts[1]=me[1]+ue.y*T)}N&&this.findEndpoints(r)}};qa.storeAllpts=function(r){var e=r._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var t=0;t+1<e.ctrlpts.length;t+=2)e.allpts.push(e.ctrlpts[t],e.ctrlpts[t+1]),t+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[t]+e.ctrlpts[t+2])/2,(e.ctrlpts[t+1]+e.ctrlpts[t+3])/2);e.allpts.push(e.endX,e.endY);var n,i;e.ctrlpts.length/2%2===0?(n=e.allpts.length/2-1,e.midX=e.allpts[n],e.midY=e.allpts[n+1]):(n=e.allpts.length/2-3,i=.5,e.midX=ea(e.allpts[n],e.allpts[n+2],e.allpts[n+4],i),e.midY=ea(e.allpts[n+1],e.allpts[n+3],e.allpts[n+5],i))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments"){if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.isRound){e.roundCorners=[];for(var a=2;a+3<e.allpts.length;a+=2){var o=e.radii[a/2-1],s=e.isArcRadius[a/2-1];e.roundCorners.push(v1({x:e.allpts[a-2],y:e.allpts[a-1]},{x:e.allpts[a],y:e.allpts[a+1],radius:o},{x:e.allpts[a+2],y:e.allpts[a+3]},o,s))}}if(e.segpts.length%4===0){var u=e.segpts.length/2,l=u-2;e.midX=(e.segpts[l]+e.segpts[u])/2,e.midY=(e.segpts[l+1]+e.segpts[u+1])/2}else{var c=e.segpts.length/2-1;if(!e.isRound)e.midX=e.segpts[c],e.midY=e.segpts[c+1];else{var f={x:e.segpts[c],y:e.segpts[c+1]},h=e.roundCorners[c/2];if(h.radius===0){var d={x:e.segpts[c+2],y:e.segpts[c+3]};e.midX=f.x,e.midY=f.y,e.midVector=[f.y-d.y,d.x-f.x]}else{var v=[f.x-h.cx,f.y-h.cy],y=h.radius/Math.sqrt(Math.pow(v[0],2)+Math.pow(v[1],2));v=v.map(function(w){return w*y}),e.midX=h.cx+v[0],e.midY=h.cy+v[1],e.midVector=v}}}}};qa.checkForInvalidEdgeWarning=function(r){var e=r[0]._private.rscratch;e.nodesOverlap||Gt(e.startX)&&Gt(e.startY)&&Gt(e.endX)&&Gt(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,Fn("Edge `"+r.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};qa.findEdgeControlPoints=function(r){var e=this;if(!(!r||r.length===0)){for(var t=this,n=t.cy,i=n.hasCompoundNodes(),a=new Jf,o=function(D,N){return[].concat(Bm(D),[N?1:0]).join("-")},s=[],u=[],l=0;l<r.length;l++){var c=r[l],f=c._private,h=c.pstyle("curve-style").value;if(!(c.removed()||!c.takesUpSpace())){if(h==="haystack"){u.push(c);continue}var d=h==="unbundled-bezier"||h.endsWith("segments")||h==="straight"||h==="straight-triangle"||h.endsWith("taxi"),v=h==="unbundled-bezier"||h==="bezier",y=f.source,w=f.target,b=y.poolIndex(),p=w.poolIndex(),m=[b,p].sort(),x=o(m,d),T=a.get(x);T==null&&(T={eles:[]},s.push({pairId:m,edgeIsUnbundled:d}),a.set(x,T)),T.eles.push(c),d&&(T.hasUnbundled=!0),v&&(T.hasBezier=!0)}}for(var P=function(){var D=s[C],N=D.pairId,j=D.edgeIsUnbundled,B=o(N,j),z=a.get(B),W;if(!z.hasUnbundled){var Z=z.eles[0].parallelEdges().filter(function(Yt){return Yt.isBundledBezier()});Jw(z.eles),Z.forEach(function(Yt){return z.eles.push(Yt)}),z.eles.sort(function(Yt,dt){return Yt.poolIndex()-dt.poolIndex()})}var Q=z.eles[0],re=Q.source(),ee=Q.target();if(re.poolIndex()>ee.poolIndex()){var ue=re;re=ee,ee=ue}var de=z.srcPos=re.position(),se=z.tgtPos=ee.position(),me=z.srcW=re.outerWidth(),Me=z.srcH=re.outerHeight(),he=z.tgtW=ee.outerWidth(),fe=z.tgtH=ee.outerHeight(),Ee=z.srcShape=t.nodeShapes[e.getNodeShape(re)],Ce=z.tgtShape=t.nodeShapes[e.getNodeShape(ee)],ke=z.srcCornerRadius=re.pstyle("corner-radius").value==="auto"?"auto":re.pstyle("corner-radius").pfValue,Re=z.tgtCornerRadius=ee.pstyle("corner-radius").value==="auto"?"auto":ee.pstyle("corner-radius").pfValue,ve=z.tgtRs=ee._private.rscratch,we=z.srcRs=re._private.rscratch;z.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var Oe=0;Oe<z.eles.length;Oe++){var Be=z.eles[Oe],Ye=Be[0]._private.rscratch,ht=Be.pstyle("curve-style").value,Ct=ht==="unbundled-bezier"||ht.endsWith("segments")||ht.endsWith("taxi"),ct=!re.same(Be.source());if(!z.calculatedIntersection&&re!==ee&&(z.hasBezier||z.hasUnbundled)){z.calculatedIntersection=!0;var H=Ee.intersectLine(de.x,de.y,me,Me,se.x,se.y,0,ke,we),$=z.srcIntn=H,ne=Ce.intersectLine(se.x,se.y,he,fe,de.x,de.y,0,Re,ve),Ie=z.tgtIntn=ne,Le=z.intersectionPts={x1:H[0],x2:ne[0],y1:H[1],y2:ne[1]},ze=z.posPts={x1:de.x,x2:se.x,y1:de.y,y2:se.y},Je=ne[1]-H[1],Pt=ne[0]-H[0],Lt=Math.sqrt(Pt*Pt+Je*Je);Gt(Lt)&&Lt>=Gk||(Lt=Math.sqrt(Math.max(Pt*Pt,vy)+Math.max(Je*Je,vy)));var Wt=z.vector={x:Pt,y:Je},Bt=z.vectorNorm={x:Wt.x/Lt,y:Wt.y/Lt},er={x:-Bt.y,y:Bt.x};z.nodesOverlap=!Gt(Lt)||Ce.checkPoint(H[0],H[1],0,he,fe,se.x,se.y,Re,ve)||Ee.checkPoint(ne[0],ne[1],0,me,Me,de.x,de.y,ke,we),z.vectorNormInverse=er,W={nodesOverlap:z.nodesOverlap,dirCounts:z.dirCounts,calculatedIntersection:!0,hasBezier:z.hasBezier,hasUnbundled:z.hasUnbundled,eles:z.eles,srcPos:se,srcRs:ve,tgtPos:de,tgtRs:we,srcW:he,srcH:fe,tgtW:me,tgtH:Me,srcIntn:Ie,tgtIntn:$,srcShape:Ce,tgtShape:Ee,posPts:{x1:ze.x2,y1:ze.y2,x2:ze.x1,y2:ze.y1},intersectionPts:{x1:Le.x2,y1:Le.y2,x2:Le.x1,y2:Le.y1},vector:{x:-Wt.x,y:-Wt.y},vectorNorm:{x:-Bt.x,y:-Bt.y},vectorNormInverse:{x:-er.x,y:-er.y}}}var Ar=ct?W:z;Ye.nodesOverlap=Ar.nodesOverlap,Ye.srcIntn=Ar.srcIntn,Ye.tgtIntn=Ar.tgtIntn,Ye.isRound=ht.startsWith("round"),i&&(re.isParent()||re.isChild()||ee.isParent()||ee.isChild())&&(re.parents().anySame(ee)||ee.parents().anySame(re)||re.same(ee)&&re.isParent())?e.findCompoundLoopPoints(Be,Ar,Oe,Ct):re===ee?e.findLoopPoints(Be,Ar,Oe,Ct):ht.endsWith("segments")?e.findSegmentsPoints(Be,Ar):ht.endsWith("taxi")?e.findTaxiPoints(Be,Ar):ht==="straight"||!Ct&&z.eles.length%2===1&&Oe===Math.floor(z.eles.length/2)?e.findStraightEdgePoints(Be):e.findBezierPoints(Be,Ar,Oe,Ct,ct),e.findEndpoints(Be),e.tryToCorrectInvalidPoints(Be,Ar),e.checkForInvalidEdgeWarning(Be),e.storeAllpts(Be),e.storeEdgeProjections(Be),e.calculateArrowAngles(Be),e.recalculateEdgeLabelProjections(Be),e.calculateLabelAngles(Be)}},C=0;C<s.length;C++)P();this.findHaystackPoints(u)}};function qT(r){var e=[];if(r!=null){for(var t=0;t<r.length;t+=2){var n=r[t],i=r[t+1];e.push({x:n,y:i})}return e}}qa.getSegmentPoints=function(r){var e=r[0]._private.rscratch;this.recalculateRenderedStyle(r);var t=e.edgeType;if(t==="segments")return qT(e.segpts)};qa.getControlPoints=function(r){var e=r[0]._private.rscratch;this.recalculateRenderedStyle(r);var t=e.edgeType;if(t==="bezier"||t==="multibezier"||t==="self"||t==="compound")return qT(e.ctrlpts)};qa.getEdgeMidpoint=function(r){var e=r[0]._private.rscratch;return this.recalculateRenderedStyle(r),{x:e.midX,y:e.midY}};var Sy={};Sy.manualEndptToPx=function(r,e){var t=this,n=r.position(),i=r.outerWidth(),a=r.outerHeight(),o=r._private.rscratch;if(e.value.length===2){var s=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(s[0]=s[0]*i),e.units[1]==="%"&&(s[1]=s[1]*a),s[0]+=n.x,s[1]+=n.y,s}else{var u=e.pfValue[0];u=-Math.PI/2+u;var l=2*Math.max(i,a),c=[n.x+Math.cos(u)*l,n.y+Math.sin(u)*l];return t.nodeShapes[this.getNodeShape(r)].intersectLine(n.x,n.y,i,a,c[0],c[1],0,r.pstyle("corner-radius").value==="auto"?"auto":r.pstyle("corner-radius").pfValue,o)}};Sy.findEndpoints=function(r){var e=this,t,n=r.source()[0],i=r.target()[0],a=n.position(),o=i.position(),s=r.pstyle("target-arrow-shape").value,u=r.pstyle("source-arrow-shape").value,l=r.pstyle("target-distance-from-node").pfValue,c=r.pstyle("source-distance-from-node").pfValue,f=n._private.rscratch,h=i._private.rscratch,d=r.pstyle("curve-style").value,v=r._private.rscratch,y=v.edgeType,w=d==="taxi",b=y==="self"||y==="compound",p=y==="bezier"||y==="multibezier"||b,m=y!=="bezier",x=y==="straight"||y==="segments",T=y==="segments",P=p||m||x,C=b||w,R=r.pstyle("source-endpoint"),D=C?"outside-to-node":R.value,N=n.pstyle("corner-radius").value==="auto"?"auto":n.pstyle("corner-radius").pfValue,j=r.pstyle("target-endpoint"),B=C?"outside-to-node":j.value,z=i.pstyle("corner-radius").value==="auto"?"auto":i.pstyle("corner-radius").pfValue;v.srcManEndpt=R,v.tgtManEndpt=j;var W,Z,Q,re;if(p){var ee=[v.ctrlpts[0],v.ctrlpts[1]],ue=m?[v.ctrlpts[v.ctrlpts.length-2],v.ctrlpts[v.ctrlpts.length-1]]:ee;W=ue,Z=ee}else if(x){var de=T?v.segpts.slice(0,2):[o.x,o.y],se=T?v.segpts.slice(v.segpts.length-2):[a.x,a.y];W=se,Z=de}if(B==="inside-to-node")t=[o.x,o.y];else if(j.units)t=this.manualEndptToPx(i,j);else if(B==="outside-to-line")t=v.tgtIntn;else if(B==="outside-to-node"||B==="outside-to-node-or-label"?Q=W:(B==="outside-to-line"||B==="outside-to-line-or-label")&&(Q=[a.x,a.y]),t=e.nodeShapes[this.getNodeShape(i)].intersectLine(o.x,o.y,i.outerWidth(),i.outerHeight(),Q[0],Q[1],0,z,h),B==="outside-to-node-or-label"||B==="outside-to-line-or-label"){var me=i._private.rscratch,Me=me.labelWidth,he=me.labelHeight,fe=me.labelX,Ee=me.labelY,Ce=Me/2,ke=he/2,Re=i.pstyle("text-valign").value;Re==="top"?Ee-=ke:Re==="bottom"&&(Ee+=ke);var ve=i.pstyle("text-halign").value;ve==="left"?fe-=Ce:ve==="right"&&(fe+=Ce);var we=ly(Q[0],Q[1],[fe-Ce,Ee-ke,fe+Ce,Ee-ke,fe+Ce,Ee+ke,fe-Ce,Ee+ke],o.x,o.y);if(we.length>0){var Oe=a,Be=Cv(Oe,qp(t)),Ye=Cv(Oe,qp(we)),ht=Be;if(Ye<Be&&(t=we,ht=Ye),we.length>2){var Ct=Cv(Oe,{x:we[2],y:we[3]});Ct<ht&&(t=[we[2],we[3]])}}}var ct=Jy(t,W,e.arrowShapes[s].spacing(r)+l),H=Jy(t,W,e.arrowShapes[s].gap(r)+l);if(v.endX=H[0],v.endY=H[1],v.arrowEndX=ct[0],v.arrowEndY=ct[1],D==="inside-to-node")t=[a.x,a.y];else if(R.units)t=this.manualEndptToPx(n,R);else if(D==="outside-to-line")t=v.srcIntn;else if(D==="outside-to-node"||D==="outside-to-node-or-label"?re=Z:(D==="outside-to-line"||D==="outside-to-line-or-label")&&(re=[o.x,o.y]),t=e.nodeShapes[this.getNodeShape(n)].intersectLine(a.x,a.y,n.outerWidth(),n.outerHeight(),re[0],re[1],0,N,f),D==="outside-to-node-or-label"||D==="outside-to-line-or-label"){var $=n._private.rscratch,ne=$.labelWidth,Ie=$.labelHeight,Le=$.labelX,ze=$.labelY,Je=ne/2,Pt=Ie/2,Lt=n.pstyle("text-valign").value;Lt==="top"?ze-=Pt:Lt==="bottom"&&(ze+=Pt);var Wt=n.pstyle("text-halign").value;Wt==="left"?Le-=Je:Wt==="right"&&(Le+=Je);var Bt=ly(re[0],re[1],[Le-Je,ze-Pt,Le+Je,ze-Pt,Le+Je,ze+Pt,Le-Je,ze+Pt],a.x,a.y);if(Bt.length>0){var er=o,Ar=Cv(er,qp(t)),Yt=Cv(er,qp(Bt)),dt=Ar;if(Yt<Ar&&(t=[Bt[0],Bt[1]],dt=Yt),Bt.length>2){var be=Cv(er,{x:Bt[2],y:Bt[3]});be<dt&&(t=[Bt[2],Bt[3]])}}}var it=Jy(t,Z,e.arrowShapes[u].spacing(r)+c),st=Jy(t,Z,e.arrowShapes[u].gap(r)+c);v.startX=st[0],v.startY=st[1],v.arrowStartX=it[0],v.arrowStartY=it[1],P&&(!Gt(v.startX)||!Gt(v.startY)||!Gt(v.endX)||!Gt(v.endY)?v.badLine=!0:v.badLine=!1)};Sy.getSourceEndpoint=function(r){var e=r[0]._private.rscratch;switch(this.recalculateRenderedStyle(r),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}};Sy.getTargetEndpoint=function(r){var e=r[0]._private.rscratch;switch(this.recalculateRenderedStyle(r),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var p1={};function Vk(r,e,t){for(var n=function(l,c,f,h){return ea(l,c,f,h)},i=e._private,a=i.rstyle.bezierPts,o=0;o<r.bezierProjPcts.length;o++){var s=r.bezierProjPcts[o];a.push({x:n(t[0],t[2],t[4],s),y:n(t[1],t[3],t[5],s)})}}p1.storeEdgeProjections=function(r){var e=r._private,t=e.rscratch,n=t.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,n==="multibezier"||n==="bezier"||n==="self"||n==="compound"){e.rstyle.bezierPts=[];for(var i=0;i+5<t.allpts.length;i+=4)Vk(this,r,t.allpts.slice(i,i+6))}else if(n==="segments")for(var a=e.rstyle.linePts=[],i=0;i+1<t.allpts.length;i+=2)a.push({x:t.allpts[i],y:t.allpts[i+1]});else if(n==="haystack"){var o=t.haystackPts;e.rstyle.haystackPts=[{x:o[0],y:o[1]},{x:o[2],y:o[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(r.pstyle("width").pfValue,r.pstyle("arrow-scale").value)*this.arrowShapeWidth};p1.recalculateEdgeProjections=function(r){this.findEdgeControlPoints(r)};var $c={};$c.recalculateNodeLabelProjection=function(r){var e=r.pstyle("label").strValue;if(!od(e)){var t,n,i=r._private,a=r.width(),o=r.height(),s=r.padding(),u=r.position(),l=r.pstyle("text-halign").strValue,c=r.pstyle("text-valign").strValue,f=i.rscratch,h=i.rstyle;switch(l){case"left":t=u.x-a/2-s;break;case"right":t=u.x+a/2+s;break;default:t=u.x}switch(c){case"top":n=u.y-o/2-s;break;case"bottom":n=u.y+o/2+s;break;default:n=u.y}f.labelX=t,f.labelY=n,h.labelX=t,h.labelY=n,this.calculateLabelAngles(r),this.applyLabelDimensions(r)}};var WT=function(e,t){var n=Math.atan(t/e);return e===0&&n<0&&(n=n*-1),n},HT=function(e,t){var n=t.x-e.x,i=t.y-e.y;return WT(n,i)},qk=function(e,t,n,i){var a=uy(0,i-.001,1),o=uy(0,i+.001,1),s=Xp(e,t,n,a),u=Xp(e,t,n,o);return HT(s,u)};$c.recalculateEdgeLabelProjections=function(r){var e,t=r._private,n=t.rscratch,i=this,a={mid:r.pstyle("label").strValue,source:r.pstyle("source-label").strValue,target:r.pstyle("target-label").strValue};if(a.mid||a.source||a.target){e={x:n.midX,y:n.midY};var o=function(f,h,d){$f(t.rscratch,f,h,d),$f(t.rstyle,f,h,d)};o("labelX",null,e.x),o("labelY",null,e.y);var s=WT(n.midDispX,n.midDispY);o("labelAutoAngle",null,s);var u=function(){if(u.cache)return u.cache;for(var f=[],h=0;h+5<n.allpts.length;h+=4){var d={x:n.allpts[h],y:n.allpts[h+1]},v={x:n.allpts[h+2],y:n.allpts[h+3]},y={x:n.allpts[h+4],y:n.allpts[h+5]};f.push({p0:d,p1:v,p2:y,startDist:0,length:0,segments:[]})}var w=t.rstyle.bezierPts,b=i.bezierProjPcts.length;function p(C,R,D,N,j){var B=Nv(R,D),z=C.segments[C.segments.length-1],W={p0:R,p1:D,t0:N,t1:j,startDist:z?z.startDist+z.length:0,length:B};C.segments.push(W),C.length+=B}for(var m=0;m<f.length;m++){var x=f[m],T=f[m-1];T&&(x.startDist=T.startDist+T.length),p(x,x.p0,w[m*b],0,i.bezierProjPcts[0]);for(var P=0;P<b-1;P++)p(x,w[m*b+P],w[m*b+P+1],i.bezierProjPcts[P],i.bezierProjPcts[P+1]);p(x,w[m*b+b-1],x.p2,i.bezierProjPcts[b-1],1)}return u.cache=f},l=function(f){var h,d=f==="source";if(a[f]){var v=r.pstyle(f+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var y=u(),w,b=0,p=0,m=0;m<y.length;m++){for(var x=y[d?m:y.length-1-m],T=0;T<x.segments.length;T++){var P=x.segments[d?T:x.segments.length-1-T],C=m===y.length-1&&T===x.segments.length-1;if(b=p,p+=P.length,p>=v||C){w={cp:x,segment:P};break}}if(w)break}var R=w.cp,D=w.segment,N=(v-b)/D.length,j=D.t1-D.t0,B=d?D.t0+j*N:D.t1-j*N;B=uy(0,B,1),e=Xp(R.p0,R.p1,R.p2,B),h=qk(R.p0,R.p1,R.p2,B);break}case"straight":case"segments":case"haystack":{for(var z=0,W,Z,Q,re,ee=n.allpts.length,ue=0;ue+3<ee&&(d?(Q={x:n.allpts[ue],y:n.allpts[ue+1]},re={x:n.allpts[ue+2],y:n.allpts[ue+3]}):(Q={x:n.allpts[ee-2-ue],y:n.allpts[ee-1-ue]},re={x:n.allpts[ee-4-ue],y:n.allpts[ee-3-ue]}),W=Nv(Q,re),Z=z,z+=W,!(z>=v));ue+=2);var de=v-Z,se=de/W;se=uy(0,se,1),e=hA(Q,re,se),h=HT(Q,re);break}}o("labelX",f,e.x),o("labelY",f,e.y),o("labelAutoAngle",f,h)}};l("source"),l("target"),this.applyLabelDimensions(r)}};$c.applyLabelDimensions=function(r){this.applyPrefixedLabelDimensions(r),r.isEdge()&&(this.applyPrefixedLabelDimensions(r,"source"),this.applyPrefixedLabelDimensions(r,"target"))};$c.applyPrefixedLabelDimensions=function(r,e){var t=r._private,n=this.getLabelText(r,e),i=Lv(n,r._private.labelDimsKey);if(Fs(t.rscratch,"prefixedLabelDimsKey",e)!==i){$f(t.rscratch,"prefixedLabelDimsKey",e,i);var a=this.calculateLabelDimensions(r,n),o=r.pstyle("line-height").pfValue,s=r.pstyle("text-wrap").strValue,u=Fs(t.rscratch,"labelWrapCachedLines",e)||[],l=s!=="wrap"?1:Math.max(u.length,1),c=a.height/l,f=c*o,h=a.width,d=a.height+(l-1)*(o-1)*c;$f(t.rstyle,"labelWidth",e,h),$f(t.rscratch,"labelWidth",e,h),$f(t.rstyle,"labelHeight",e,d),$f(t.rscratch,"labelHeight",e,d),$f(t.rscratch,"labelLineHeight",e,f)}};$c.getLabelText=function(r,e){var t=r._private,n=e?e+"-":"",i=r.pstyle(n+"label").strValue,a=r.pstyle("text-transform").value,o=function(Me,he){return he?($f(t.rscratch,Me,e,he),he):Fs(t.rscratch,Me,e)};if(!i)return"";a=="none"||(a=="uppercase"?i=i.toUpperCase():a=="lowercase"&&(i=i.toLowerCase()));var s=r.pstyle("text-wrap").value;if(s==="wrap"){var u=o("labelKey");if(u!=null&&o("labelWrapKey")===u)return o("labelWrapCachedText");for(var l="",c=i.split(`
`),f=r.pstyle("text-max-width").pfValue,h=r.pstyle("text-overflow-wrap").value,d=h==="anywhere",v=[],y=/[\s\u200b]+|$/g,w=0;w<c.length;w++){var b=c[w],p=this.calculateLabelDimensions(r,b),m=p.width;if(d){var x=b.split("").join(l);b=x}if(m>f){var T=b.matchAll(y),P="",C=0,R=Gs(T),D;try{for(R.s();!(D=R.n()).done;){var N=D.value,j=N[0],B=b.substring(C,N.index);C=N.index+j.length;var z=P.length===0?B:P+B+j,W=this.calculateLabelDimensions(r,z),Z=W.width;Z<=f?P+=B+j:(P&&v.push(P),P=B+j)}}catch(me){R.e(me)}finally{R.f()}P.match(/^[\s\u200b]+$/)||v.push(P)}else v.push(b)}o("labelWrapCachedLines",v),i=o("labelWrapCachedText",v.join(`
`)),o("labelWrapKey",u)}else if(s==="ellipsis"){var Q=r.pstyle("text-max-width").pfValue,re="",ee="",ue=!1;if(this.calculateLabelDimensions(r,i).width<Q)return i;for(var de=0;de<i.length;de++){var se=this.calculateLabelDimensions(r,re+i[de]+ee).width;if(se>Q)break;re+=i[de],de===i.length-1&&(ue=!0)}return ue||(re+=ee),re}return i};$c.getLabelJustification=function(r){var e=r.pstyle("text-justification").strValue,t=r.pstyle("text-halign").strValue;if(e==="auto")if(r.isNode())switch(t){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};$c.calculateLabelDimensions=function(r,e){var t=this,n=t.cy.window(),i=n.document,a=0,o=r.pstyle("font-style").strValue,s=r.pstyle("font-size").pfValue,u=r.pstyle("font-family").strValue,l=r.pstyle("font-weight").strValue,c=this.labelCalcCanvas,f=this.labelCalcCanvasContext;if(!c){c=this.labelCalcCanvas=i.createElement("canvas"),f=this.labelCalcCanvasContext=c.getContext("2d");var h=c.style;h.position="absolute",h.left="-9999px",h.top="-9999px",h.zIndex="-1",h.visibility="hidden",h.pointerEvents="none"}f.font="".concat(o," ").concat(l," ").concat(s,"px ").concat(u);for(var d=0,v=0,y=e.split(`
`),w=0;w<y.length;w++){var b=y[w],p=f.measureText(b),m=Math.ceil(p.width),x=s;d=Math.max(m,d),v+=x}return d+=a,v+=a,{width:d,height:v}};$c.calculateLabelAngle=function(r,e){var t=r._private,n=t.rscratch,i=r.isEdge(),a=e?e+"-":"",o=r.pstyle(a+"text-rotation"),s=o.strValue;return s==="none"?0:i&&s==="autorotate"?n.labelAutoAngle:s==="autorotate"?0:o.pfValue};$c.calculateLabelAngles=function(r){var e=this,t=r.isEdge(),n=r._private,i=n.rscratch;i.labelAngle=e.calculateLabelAngle(r),t&&(i.sourceLabelAngle=e.calculateLabelAngle(r,"source"),i.targetLabelAngle=e.calculateLabelAngle(r,"target"))};var YT={},qx=28,Wx=!1;YT.getNodeShape=function(r){var e=this,t=r.pstyle("shape").value;if(t==="cutrectangle"&&(r.width()<qx||r.height()<qx))return Wx||(Fn("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),Wx=!0),"rectangle";if(r.isParent())return t==="rectangle"||t==="roundrectangle"||t==="round-rectangle"||t==="cutrectangle"||t==="cut-rectangle"||t==="barrel"?t:"rectangle";if(t==="polygon"){var n=r.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(n).name}return t};var b0={};b0.registerCalculationListeners=function(){var r=this.cy,e=r.collection(),t=this,n=function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(o),s)for(var u=0;u<o.length;u++){var l=o[u],c=l._private,f=c.rstyle;f.clean=!1,f.cleanConnected=!1}};t.binder(r).on("bounds.* dirty.*",function(o){var s=o.target;n(s)}).on("style.* background.*",function(o){var s=o.target;n(s,!1)});var i=function(o){if(o){var s=t.onUpdateEleCalcsFns;e.cleanStyle();for(var u=0;u<e.length;u++){var l=e[u],c=l._private.rstyle;l.isNode()&&!c.cleanConnected&&(n(l.connectedEdges()),c.cleanConnected=!0)}if(s)for(var f=0;f<s.length;f++){var h=s[f];h(o,e)}t.recalculateRenderedStyle(e),e=r.collection()}};t.flushRenderedStyleQueue=function(){i(!0)},t.beforeRender(i,t.beforeRenderPriorities.eleCalcs)};b0.onUpdateEleCalcs=function(r){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(r)};b0.recalculateRenderedStyle=function(r,e){var t=function(x){return x._private.rstyle.cleanConnected};if(r.length!==0){var n=[],i=[];if(!this.destroyed){e===void 0&&(e=!0);for(var a=0;a<r.length;a++){var o=r[a],s=o._private,u=s.rstyle;o.isEdge()&&(!t(o.source())||!t(o.target()))&&(u.clean=!1),o.isEdge()&&o.isBundledBezier()&&o.parallelEdges().some(function(m){return!m._private.rstyle.clean&&m.isBundledBezier()})&&(u.clean=!1),!(e&&u.clean||o.removed())&&o.pstyle("display").value!=="none"&&(s.group==="nodes"?i.push(o):n.push(o),u.clean=!0)}for(var l=0;l<i.length;l++){var c=i[l],f=c._private,h=f.rstyle,d=c.position();this.recalculateNodeLabelProjection(c),h.nodeX=d.x,h.nodeY=d.y,h.nodeW=c.pstyle("width").pfValue,h.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var v=0;v<n.length;v++){var y=n[v],w=y._private,b=w.rstyle,p=w.rscratch;b.srcX=p.arrowStartX,b.srcY=p.arrowStartY,b.tgtX=p.arrowEndX,b.tgtY=p.arrowEndY,b.midX=p.midX,b.midY=p.midY,b.labelAngle=p.labelAngle,b.sourceLabelAngle=p.sourceLabelAngle,b.targetLabelAngle=p.targetLabelAngle}}}};var _0={};_0.updateCachedGrabbedEles=function(){var r=this.cachedZSortedEles;if(r){r.drag=[],r.nondrag=[];for(var e=[],t=0;t<r.length;t++){var n=r[t],i=n._private.rscratch;n.grabbed()&&!n.isParent()?e.push(n):i.inDragLayer?r.drag.push(n):r.nondrag.push(n)}for(var t=0;t<e.length;t++){var n=e[t];r.drag.push(n)}}};_0.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};_0.getCachedZSortedEles=function(r){if(r||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(PT),e.interactive=e.filter(function(t){return t.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var XT={};[zv,Xm,qa,Sy,p1,$c,YT,b0,_0].forEach(function(r){xr(XT,r)});var KT={};KT.getCachedImage=function(r,e,t){var n=this,i=n.imageCache=n.imageCache||{},a=i[r];if(a)return a.image.complete||a.image.addEventListener("load",t),a.image;a=i[r]=i[r]||{};var o=a.image=new Image;o.addEventListener("load",t),o.addEventListener("error",function(){o.error=!0});var s="data:",u=r.substring(0,s.length).toLowerCase()===s;return u||(e=e==="null"?null:e,o.crossOrigin=e),o.src=r,o};var lg={};lg.registerBinding=function(r,e,t,n){var i=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(r)){for(var a=[],o=0;o<r.length;o++){var s=r[o];if(s!==void 0){var u=this.binder(s);a.push(u.on.apply(u,i))}}return a}var u=this.binder(r);return u.on.apply(u,i)};lg.binder=function(r){var e=this,t=e.cy.window(),n=r===t||r===t.document||r===t.document.body||oP(r);if(e.supportsPassiveEvents==null){var i=!1;try{var a=Object.defineProperty({},"passive",{get:function(){return i=!0,!0}});t.addEventListener("test",null,a)}catch{}e.supportsPassiveEvents=i}var o=function(u,l,c){var f=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(f[2]={capture:c??!1,passive:!1,once:!1}),e.bindings.push({target:r,args:f}),(r.addEventListener||r.on).apply(r,f),this};return{on:o,addEventListener:o,addListener:o,bind:o}};lg.nodeIsDraggable=function(r){return r&&r.isNode()&&!r.locked()&&r.grabbable()};lg.nodeIsGrabbable=function(r){return this.nodeIsDraggable(r)&&r.interactive()};lg.load=function(){var r=this,e=r.cy.window(),t=function(be){return be.selected()},n=function(be){var it=be.getRootNode();if(it&&it.nodeType===11&&it.host!==void 0)return it},i=function(be,it,st,ut){be==null&&(be=r.cy);for(var lt=0;lt<it.length;lt++){var Xt=it[lt];be.emit({originalEvent:st,type:Xt,position:ut})}},a=function(be){return be.shiftKey||be.metaKey||be.ctrlKey},o=function(be,it){var st=!0;if(r.cy.hasCompoundNodes()&&be&&be.pannable())for(var ut=0;it&&ut<it.length;ut++){var be=it[ut];if(be.isNode()&&be.isParent()&&!be.pannable()){st=!1;break}}else st=!0;return st},s=function(be){be[0]._private.grabbed=!0},u=function(be){be[0]._private.grabbed=!1},l=function(be){be[0]._private.rscratch.inDragLayer=!0},c=function(be){be[0]._private.rscratch.inDragLayer=!1},f=function(be){be[0]._private.rscratch.isGrabTarget=!0},h=function(be){be[0]._private.rscratch.isGrabTarget=!1},d=function(be,it){var st=it.addToList,ut=st.has(be);!ut&&be.grabbable()&&!be.locked()&&(st.merge(be),s(be))},v=function(be,it){if(be.cy().hasCompoundNodes()&&!(it.inDragLayer==null&&it.addToList==null)){var st=be.descendants();it.inDragLayer&&(st.forEach(l),st.connectedEdges().forEach(l)),it.addToList&&d(st,it)}},y=function(be,it){it=it||{};var st=be.cy().hasCompoundNodes();it.inDragLayer&&(be.forEach(l),be.neighborhood().stdFilter(function(ut){return!st||ut.isEdge()}).forEach(l)),it.addToList&&be.forEach(function(ut){d(ut,it)}),v(be,it),p(be,{inDragLayer:it.inDragLayer}),r.updateCachedGrabbedEles()},w=y,b=function(be){be&&(r.getCachedZSortedEles().forEach(function(it){u(it),c(it),h(it)}),r.updateCachedGrabbedEles())},p=function(be,it){if(!(it.inDragLayer==null&&it.addToList==null)&&be.cy().hasCompoundNodes()){var st=be.ancestors().orphans();if(!st.same(be)){var ut=st.descendants().spawnSelf().merge(st).unmerge(be).unmerge(be.descendants()),lt=ut.connectedEdges();it.inDragLayer&&(lt.forEach(l),ut.forEach(l)),it.addToList&&ut.forEach(function(Xt){d(Xt,it)})}}},m=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},x=typeof MutationObserver<"u",T=typeof ResizeObserver<"u";x?(r.removeObserver=new MutationObserver(function(dt){for(var be=0;be<dt.length;be++){var it=dt[be],st=it.removedNodes;if(st)for(var ut=0;ut<st.length;ut++){var lt=st[ut];if(lt===r.container){r.destroy();break}}}}),r.container.parentNode&&r.removeObserver.observe(r.container.parentNode,{childList:!0})):r.registerBinding(r.container,"DOMNodeRemoved",function(dt){r.destroy()});var P=wy(function(){r.cy.resize()},100);x&&(r.styleObserver=new MutationObserver(P),r.styleObserver.observe(r.container,{attributes:!0})),r.registerBinding(e,"resize",P),T&&(r.resizeObserver=new ResizeObserver(P),r.resizeObserver.observe(r.container));var C=function(be,it){for(;be!=null;)it(be),be=be.parentNode},R=function(){r.invalidateContainerClientCoordsCache()};C(r.container,function(dt){r.registerBinding(dt,"transitionend",R),r.registerBinding(dt,"animationend",R),r.registerBinding(dt,"scroll",R)}),r.registerBinding(r.container,"contextmenu",function(dt){dt.preventDefault()});var D=function(){return r.selection[4]!==0},N=function(be){for(var it=r.findContainerClientCoords(),st=it[0],ut=it[1],lt=it[2],Xt=it[3],pt=be.touches?be.touches:[be],Qt=!1,mr=0;mr<pt.length;mr++){var Rr=pt[mr];if(st<=Rr.clientX&&Rr.clientX<=st+lt&&ut<=Rr.clientY&&Rr.clientY<=ut+Xt){Qt=!0;break}}if(!Qt)return!1;for(var ar=r.container,nr=be.target,tr=nr.parentNode,lr=!1;tr;){if(tr===ar){lr=!0;break}tr=tr.parentNode}return!!lr};r.registerBinding(r.container,"mousedown",function(be){if(N(be)&&!(r.hoverData.which===1&&be.which!==1)){be.preventDefault(),m(),r.hoverData.capture=!0,r.hoverData.which=be.which;var it=r.cy,st=[be.clientX,be.clientY],ut=r.projectIntoViewport(st[0],st[1]),lt=r.selection,Xt=r.findNearestElements(ut[0],ut[1],!0,!1),pt=Xt[0],Qt=r.dragData.possibleDragElements;r.hoverData.mdownPos=ut,r.hoverData.mdownGPos=st;var mr=function(){r.hoverData.tapholdCancelled=!1,clearTimeout(r.hoverData.tapholdTimeout),r.hoverData.tapholdTimeout=setTimeout(function(){if(!r.hoverData.tapholdCancelled){var Vr=r.hoverData.down;Vr?Vr.emit({originalEvent:be,type:"taphold",position:{x:ut[0],y:ut[1]}}):it.emit({originalEvent:be,type:"taphold",position:{x:ut[0],y:ut[1]}})}},r.tapholdDuration)};if(be.which==3){r.hoverData.cxtStarted=!0;var Rr={originalEvent:be,type:"cxttapstart",position:{x:ut[0],y:ut[1]}};pt?(pt.activate(),pt.emit(Rr),r.hoverData.down=pt):it.emit(Rr),r.hoverData.downTime=new Date().getTime(),r.hoverData.cxtDragged=!1}else if(be.which==1){pt&&pt.activate();{if(pt!=null&&r.nodeIsGrabbable(pt)){var ar=function(Vr){return{originalEvent:be,type:Vr,position:{x:ut[0],y:ut[1]}}},nr=function(Vr){Vr.emit(ar("grab"))};if(f(pt),!pt.selected())Qt=r.dragData.possibleDragElements=it.collection(),w(pt,{addToList:Qt}),pt.emit(ar("grabon")).emit(ar("grab"));else{Qt=r.dragData.possibleDragElements=it.collection();var tr=it.$(function(lr){return lr.isNode()&&lr.selected()&&r.nodeIsGrabbable(lr)});y(tr,{addToList:Qt}),pt.emit(ar("grabon")),tr.forEach(nr)}r.redrawHint("eles",!0),r.redrawHint("drag",!0)}r.hoverData.down=pt,r.hoverData.downs=Xt,r.hoverData.downTime=new Date().getTime()}i(pt,["mousedown","tapstart","vmousedown"],be,{x:ut[0],y:ut[1]}),pt==null?(lt[4]=1,r.data.bgActivePosistion={x:ut[0],y:ut[1]},r.redrawHint("select",!0),r.redraw()):pt.pannable()&&(lt[4]=1),mr()}lt[0]=lt[2]=ut[0],lt[1]=lt[3]=ut[1]}},!1);var j=n(r.container);r.registerBinding([e,j],"mousemove",function(be){var it=r.hoverData.capture;if(!(!it&&!N(be))){var st=!1,ut=r.cy,lt=ut.zoom(),Xt=[be.clientX,be.clientY],pt=r.projectIntoViewport(Xt[0],Xt[1]),Qt=r.hoverData.mdownPos,mr=r.hoverData.mdownGPos,Rr=r.selection,ar=null;!r.hoverData.draggingEles&&!r.hoverData.dragging&&!r.hoverData.selecting&&(ar=r.findNearestElement(pt[0],pt[1],!0,!1));var nr=r.hoverData.last,tr=r.hoverData.down,lr=[pt[0]-Rr[2],pt[1]-Rr[3]],Vr=r.dragData.possibleDragElements,fn;if(mr){var In=Xt[0]-mr[0],Un=In*In,hn=Xt[1]-mr[1],Kn=hn*hn,vn=Un+Kn;r.hoverData.isOverThresholdDrag=fn=vn>=r.desktopTapThreshold2}var Ei=a(be);fn&&(r.hoverData.tapholdCancelled=!0);var Li=function(){var pi=r.hoverData.dragDelta=r.hoverData.dragDelta||[];pi.length===0?(pi.push(lr[0]),pi.push(lr[1])):(pi[0]+=lr[0],pi[1]+=lr[1])};st=!0,i(ar,["mousemove","vmousemove","tapdrag"],be,{x:pt[0],y:pt[1]});var Br=function(){r.data.bgActivePosistion=void 0,r.hoverData.selecting||ut.emit({originalEvent:be,type:"boxstart",position:{x:pt[0],y:pt[1]}}),Rr[4]=1,r.hoverData.selecting=!0,r.redrawHint("select",!0),r.redraw()};if(r.hoverData.which===3){if(fn){var Tn={originalEvent:be,type:"cxtdrag",position:{x:pt[0],y:pt[1]}};tr?tr.emit(Tn):ut.emit(Tn),r.hoverData.cxtDragged=!0,(!r.hoverData.cxtOver||ar!==r.hoverData.cxtOver)&&(r.hoverData.cxtOver&&r.hoverData.cxtOver.emit({originalEvent:be,type:"cxtdragout",position:{x:pt[0],y:pt[1]}}),r.hoverData.cxtOver=ar,ar&&ar.emit({originalEvent:be,type:"cxtdragover",position:{x:pt[0],y:pt[1]}}))}}else if(r.hoverData.dragging){if(st=!0,ut.panningEnabled()&&ut.userPanningEnabled()){var Ni;if(r.hoverData.justStartedPan){var _o=r.hoverData.mdownPos;Ni={x:(pt[0]-_o[0])*lt,y:(pt[1]-_o[1])*lt},r.hoverData.justStartedPan=!1}else Ni={x:lr[0]*lt,y:lr[1]*lt};ut.panBy(Ni),ut.emit("dragpan"),r.hoverData.dragged=!0}pt=r.projectIntoViewport(be.clientX,be.clientY)}else if(Rr[4]==1&&(tr==null||tr.pannable())){if(fn){if(!r.hoverData.dragging&&ut.boxSelectionEnabled()&&(Ei||!ut.panningEnabled()||!ut.userPanningEnabled()))Br();else if(!r.hoverData.selecting&&ut.panningEnabled()&&ut.userPanningEnabled()){var Pi=o(tr,r.hoverData.downs);Pi&&(r.hoverData.dragging=!0,r.hoverData.justStartedPan=!0,Rr[4]=0,r.data.bgActivePosistion=qp(Qt),r.redrawHint("select",!0),r.redraw())}tr&&tr.pannable()&&tr.active()&&tr.unactivate()}}else{if(tr&&tr.pannable()&&tr.active()&&tr.unactivate(),(!tr||!tr.grabbed())&&ar!=nr&&(nr&&i(nr,["mouseout","tapdragout"],be,{x:pt[0],y:pt[1]}),ar&&i(ar,["mouseover","tapdragover"],be,{x:pt[0],y:pt[1]}),r.hoverData.last=ar),tr)if(fn){if(ut.boxSelectionEnabled()&&Ei)tr&&tr.grabbed()&&(b(Vr),tr.emit("freeon"),Vr.emit("free"),r.dragData.didDrag&&(tr.emit("dragfreeon"),Vr.emit("dragfree"))),Br();else if(tr&&tr.grabbed()&&r.nodeIsDraggable(tr)){var vi=!r.dragData.didDrag;vi&&r.redrawHint("eles",!0),r.dragData.didDrag=!0,r.hoverData.draggingEles||y(Vr,{inDragLayer:!0});var un={x:0,y:0};if(Gt(lr[0])&&Gt(lr[1])&&(un.x+=lr[0],un.y+=lr[1],vi)){var zn=r.hoverData.dragDelta;zn&&Gt(zn[0])&&Gt(zn[1])&&(un.x+=zn[0],un.y+=zn[1])}r.hoverData.draggingEles=!0,Vr.silentShift(un).emit("position drag"),r.redrawHint("drag",!0),r.redraw()}}else Li();st=!0}if(Rr[2]=pt[0],Rr[3]=pt[1],st)return be.stopPropagation&&be.stopPropagation(),be.preventDefault&&be.preventDefault(),!1}},!1);var B,z,W;r.registerBinding(e,"mouseup",function(be){if(!(r.hoverData.which===1&&be.which!==1&&r.hoverData.capture)){var it=r.hoverData.capture;if(it){r.hoverData.capture=!1;var st=r.cy,ut=r.projectIntoViewport(be.clientX,be.clientY),lt=r.selection,Xt=r.findNearestElement(ut[0],ut[1],!0,!1),pt=r.dragData.possibleDragElements,Qt=r.hoverData.down,mr=a(be);if(r.data.bgActivePosistion&&(r.redrawHint("select",!0),r.redraw()),r.hoverData.tapholdCancelled=!0,r.data.bgActivePosistion=void 0,Qt&&Qt.unactivate(),r.hoverData.which===3){var Rr={originalEvent:be,type:"cxttapend",position:{x:ut[0],y:ut[1]}};if(Qt?Qt.emit(Rr):st.emit(Rr),!r.hoverData.cxtDragged){var ar={originalEvent:be,type:"cxttap",position:{x:ut[0],y:ut[1]}};Qt?Qt.emit(ar):st.emit(ar)}r.hoverData.cxtDragged=!1,r.hoverData.which=null}else if(r.hoverData.which===1){if(i(Xt,["mouseup","tapend","vmouseup"],be,{x:ut[0],y:ut[1]}),!r.dragData.didDrag&&!r.hoverData.dragged&&!r.hoverData.selecting&&!r.hoverData.isOverThresholdDrag&&(i(Qt,["click","tap","vclick"],be,{x:ut[0],y:ut[1]}),z=!1,be.timeStamp-W<=st.multiClickDebounceTime()?(B&&clearTimeout(B),z=!0,W=null,i(Qt,["dblclick","dbltap","vdblclick"],be,{x:ut[0],y:ut[1]})):(B=setTimeout(function(){z||i(Qt,["oneclick","onetap","voneclick"],be,{x:ut[0],y:ut[1]})},st.multiClickDebounceTime()),W=be.timeStamp)),Qt==null&&!r.dragData.didDrag&&!r.hoverData.selecting&&!r.hoverData.dragged&&!a(be)&&(st.$(t).unselect(["tapunselect"]),pt.length>0&&r.redrawHint("eles",!0),r.dragData.possibleDragElements=pt=st.collection()),Xt==Qt&&!r.dragData.didDrag&&!r.hoverData.selecting&&Xt!=null&&Xt._private.selectable&&(r.hoverData.dragging||(st.selectionType()==="additive"||mr?Xt.selected()?Xt.unselect(["tapunselect"]):Xt.select(["tapselect"]):mr||(st.$(t).unmerge(Xt).unselect(["tapunselect"]),Xt.select(["tapselect"]))),r.redrawHint("eles",!0)),r.hoverData.selecting){var nr=st.collection(r.getAllInBox(lt[0],lt[1],lt[2],lt[3]));r.redrawHint("select",!0),nr.length>0&&r.redrawHint("eles",!0),st.emit({type:"boxend",originalEvent:be,position:{x:ut[0],y:ut[1]}});var tr=function(fn){return fn.selectable()&&!fn.selected()};st.selectionType()==="additive"||mr||st.$(t).unmerge(nr).unselect(),nr.emit("box").stdFilter(tr).select().emit("boxselect"),r.redraw()}if(r.hoverData.dragging&&(r.hoverData.dragging=!1,r.redrawHint("select",!0),r.redrawHint("eles",!0),r.redraw()),!lt[4]){r.redrawHint("drag",!0),r.redrawHint("eles",!0);var lr=Qt&&Qt.grabbed();b(pt),lr&&(Qt.emit("freeon"),pt.emit("free"),r.dragData.didDrag&&(Qt.emit("dragfreeon"),pt.emit("dragfree")))}}lt[4]=0,r.hoverData.down=null,r.hoverData.cxtStarted=!1,r.hoverData.draggingEles=!1,r.hoverData.selecting=!1,r.hoverData.isOverThresholdDrag=!1,r.dragData.didDrag=!1,r.hoverData.dragged=!1,r.hoverData.dragDelta=[],r.hoverData.mdownPos=null,r.hoverData.mdownGPos=null,r.hoverData.which=null}}},!1);var Z=[],Q=4,re,ee=1e5,ue=function(be,it){for(var st=0;st<be.length;st++)if(be[st]%it!==0)return!1;return!0},de=function(be){for(var it=Math.abs(be[0]),st=1;st<be.length;st++)if(Math.abs(be[st])!==it)return!1;return!0},se=function(be){var it=!1,st=be.deltaY;if(st==null&&(be.wheelDeltaY!=null?st=be.wheelDeltaY/4:be.wheelDelta!=null&&(st=be.wheelDelta/4)),re==null)if(Z.length>=Q){var ut=Z;if(re=ue(ut,5),!re){var lt=Math.abs(ut[0]);re=de(ut)&&lt>5}if(re)for(var Xt=0;Xt<ut.length;Xt++)ee=Math.min(Math.abs(ut[Xt]),ee)}else Z.push(st),it=!0;else re&&(ee=Math.min(Math.abs(st),ee));if(!r.scrollingPage){var pt=r.cy,Qt=pt.zoom(),mr=pt.pan(),Rr=r.projectIntoViewport(be.clientX,be.clientY),ar=[Rr[0]*Qt+mr.x,Rr[1]*Qt+mr.y];if(r.hoverData.draggingEles||r.hoverData.dragging||r.hoverData.cxtStarted||D()){be.preventDefault();return}if(pt.panningEnabled()&&pt.userPanningEnabled()&&pt.zoomingEnabled()&&pt.userZoomingEnabled()){be.preventDefault(),r.data.wheelZooming=!0,clearTimeout(r.data.wheelTimeout),r.data.wheelTimeout=setTimeout(function(){r.data.wheelZooming=!1,r.redrawHint("eles",!0),r.redraw()},150);var nr;it&&Math.abs(st)>5&&(st=t1(st)*5),nr=st/-250,re&&(nr/=ee,nr*=3),nr=nr*r.wheelSensitivity;var tr=be.deltaMode===1;tr&&(nr*=33);var lr=pt.zoom()*Math.pow(10,nr);be.type==="gesturechange"&&(lr=r.gestureStartZoom*be.scale),pt.zoom({level:lr,renderedPosition:{x:ar[0],y:ar[1]}}),pt.emit(be.type==="gesturechange"?"pinchzoom":"scrollzoom")}}};r.registerBinding(r.container,"wheel",se,!0),r.registerBinding(e,"scroll",function(be){r.scrollingPage=!0,clearTimeout(r.scrollingPageTimeout),r.scrollingPageTimeout=setTimeout(function(){r.scrollingPage=!1},250)},!0),r.registerBinding(r.container,"gesturestart",function(be){r.gestureStartZoom=r.cy.zoom(),r.hasTouchStarted||be.preventDefault()},!0),r.registerBinding(r.container,"gesturechange",function(dt){r.hasTouchStarted||se(dt)},!0),r.registerBinding(r.container,"mouseout",function(be){var it=r.projectIntoViewport(be.clientX,be.clientY);r.cy.emit({originalEvent:be,type:"mouseout",position:{x:it[0],y:it[1]}})},!1),r.registerBinding(r.container,"mouseover",function(be){var it=r.projectIntoViewport(be.clientX,be.clientY);r.cy.emit({originalEvent:be,type:"mouseover",position:{x:it[0],y:it[1]}})},!1);var me,Me,he,fe,Ee,Ce,ke,Re,ve,we,Oe,Be,Ye,ht=function(be,it,st,ut){return Math.sqrt((st-be)*(st-be)+(ut-it)*(ut-it))},Ct=function(be,it,st,ut){return(st-be)*(st-be)+(ut-it)*(ut-it)},ct;r.registerBinding(r.container,"touchstart",ct=function(be){if(r.hasTouchStarted=!0,!!N(be)){m(),r.touchData.capture=!0,r.data.bgActivePosistion=void 0;var it=r.cy,st=r.touchData.now,ut=r.touchData.earlier;if(be.touches[0]){var lt=r.projectIntoViewport(be.touches[0].clientX,be.touches[0].clientY);st[0]=lt[0],st[1]=lt[1]}if(be.touches[1]){var lt=r.projectIntoViewport(be.touches[1].clientX,be.touches[1].clientY);st[2]=lt[0],st[3]=lt[1]}if(be.touches[2]){var lt=r.projectIntoViewport(be.touches[2].clientX,be.touches[2].clientY);st[4]=lt[0],st[5]=lt[1]}if(be.touches[1]){r.touchData.singleTouchMoved=!0,b(r.dragData.touchDragEles);var Xt=r.findContainerClientCoords();ve=Xt[0],we=Xt[1],Oe=Xt[2],Be=Xt[3],me=be.touches[0].clientX-ve,Me=be.touches[0].clientY-we,he=be.touches[1].clientX-ve,fe=be.touches[1].clientY-we,Ye=0<=me&&me<=Oe&&0<=he&&he<=Oe&&0<=Me&&Me<=Be&&0<=fe&&fe<=Be;var pt=it.pan(),Qt=it.zoom();Ee=ht(me,Me,he,fe),Ce=Ct(me,Me,he,fe),ke=[(me+he)/2,(Me+fe)/2],Re=[(ke[0]-pt.x)/Qt,(ke[1]-pt.y)/Qt];var mr=200,Rr=mr*mr;if(Ce<Rr&&!be.touches[2]){var ar=r.findNearestElement(st[0],st[1],!0,!0),nr=r.findNearestElement(st[2],st[3],!0,!0);ar&&ar.isNode()?(ar.activate().emit({originalEvent:be,type:"cxttapstart",position:{x:st[0],y:st[1]}}),r.touchData.start=ar):nr&&nr.isNode()?(nr.activate().emit({originalEvent:be,type:"cxttapstart",position:{x:st[0],y:st[1]}}),r.touchData.start=nr):it.emit({originalEvent:be,type:"cxttapstart",position:{x:st[0],y:st[1]}}),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!0,r.touchData.cxtDragged=!1,r.data.bgActivePosistion=void 0,r.redraw();return}}if(be.touches[2])it.boxSelectionEnabled()&&be.preventDefault();else if(!be.touches[1]){if(be.touches[0]){var tr=r.findNearestElements(st[0],st[1],!0,!0),lr=tr[0];if(lr!=null&&(lr.activate(),r.touchData.start=lr,r.touchData.starts=tr,r.nodeIsGrabbable(lr))){var Vr=r.dragData.touchDragEles=it.collection(),fn=null;r.redrawHint("eles",!0),r.redrawHint("drag",!0),lr.selected()?(fn=it.$(function(vn){return vn.selected()&&r.nodeIsGrabbable(vn)}),y(fn,{addToList:Vr})):w(lr,{addToList:Vr}),f(lr);var In=function(Ei){return{originalEvent:be,type:Ei,position:{x:st[0],y:st[1]}}};lr.emit(In("grabon")),fn?fn.forEach(function(vn){vn.emit(In("grab"))}):lr.emit(In("grab"))}i(lr,["touchstart","tapstart","vmousedown"],be,{x:st[0],y:st[1]}),lr==null&&(r.data.bgActivePosistion={x:lt[0],y:lt[1]},r.redrawHint("select",!0),r.redraw()),r.touchData.singleTouchMoved=!1,r.touchData.singleTouchStartTime=+new Date,clearTimeout(r.touchData.tapholdTimeout),r.touchData.tapholdTimeout=setTimeout(function(){r.touchData.singleTouchMoved===!1&&!r.pinching&&!r.touchData.selecting&&i(r.touchData.start,["taphold"],be,{x:st[0],y:st[1]})},r.tapholdDuration)}}if(be.touches.length>=1){for(var Un=r.touchData.startPosition=[null,null,null,null,null,null],hn=0;hn<st.length;hn++)Un[hn]=ut[hn]=st[hn];var Kn=be.touches[0];r.touchData.startGPosition=[Kn.clientX,Kn.clientY]}}},!1);var H;r.registerBinding(e,"touchmove",H=function(be){var it=r.touchData.capture;if(!(!it&&!N(be))){var st=r.selection,ut=r.cy,lt=r.touchData.now,Xt=r.touchData.earlier,pt=ut.zoom();if(be.touches[0]){var Qt=r.projectIntoViewport(be.touches[0].clientX,be.touches[0].clientY);lt[0]=Qt[0],lt[1]=Qt[1]}if(be.touches[1]){var Qt=r.projectIntoViewport(be.touches[1].clientX,be.touches[1].clientY);lt[2]=Qt[0],lt[3]=Qt[1]}if(be.touches[2]){var Qt=r.projectIntoViewport(be.touches[2].clientX,be.touches[2].clientY);lt[4]=Qt[0],lt[5]=Qt[1]}var mr=r.touchData.startGPosition,Rr;if(it&&be.touches[0]&&mr){for(var ar=[],nr=0;nr<lt.length;nr++)ar[nr]=lt[nr]-Xt[nr];var tr=be.touches[0].clientX-mr[0],lr=tr*tr,Vr=be.touches[0].clientY-mr[1],fn=Vr*Vr,In=lr+fn;Rr=In>=r.touchTapThreshold2}if(it&&r.touchData.cxt){be.preventDefault();var Un=be.touches[0].clientX-ve,hn=be.touches[0].clientY-we,Kn=be.touches[1].clientX-ve,vn=be.touches[1].clientY-we,Ei=Ct(Un,hn,Kn,vn),Li=Ei/Ce,Br=150,Tn=Br*Br,Ni=1.5,_o=Ni*Ni;if(Li>=_o||Ei>=Tn){r.touchData.cxt=!1,r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var Pi={originalEvent:be,type:"cxttapend",position:{x:lt[0],y:lt[1]}};r.touchData.start?(r.touchData.start.unactivate().emit(Pi),r.touchData.start=null):ut.emit(Pi)}}if(it&&r.touchData.cxt){var Pi={originalEvent:be,type:"cxtdrag",position:{x:lt[0],y:lt[1]}};r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),r.touchData.start?r.touchData.start.emit(Pi):ut.emit(Pi),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxtDragged=!0;var vi=r.findNearestElement(lt[0],lt[1],!0,!0);(!r.touchData.cxtOver||vi!==r.touchData.cxtOver)&&(r.touchData.cxtOver&&r.touchData.cxtOver.emit({originalEvent:be,type:"cxtdragout",position:{x:lt[0],y:lt[1]}}),r.touchData.cxtOver=vi,vi&&vi.emit({originalEvent:be,type:"cxtdragover",position:{x:lt[0],y:lt[1]}}))}else if(it&&be.touches[2]&&ut.boxSelectionEnabled())be.preventDefault(),r.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,r.touchData.selecting||ut.emit({originalEvent:be,type:"boxstart",position:{x:lt[0],y:lt[1]}}),r.touchData.selecting=!0,r.touchData.didSelect=!0,st[4]=1,!st||st.length===0||st[0]===void 0?(st[0]=(lt[0]+lt[2]+lt[4])/3,st[1]=(lt[1]+lt[3]+lt[5])/3,st[2]=(lt[0]+lt[2]+lt[4])/3+1,st[3]=(lt[1]+lt[3]+lt[5])/3+1):(st[2]=(lt[0]+lt[2]+lt[4])/3,st[3]=(lt[1]+lt[3]+lt[5])/3),r.redrawHint("select",!0),r.redraw();else if(it&&be.touches[1]&&!r.touchData.didSelect&&ut.zoomingEnabled()&&ut.panningEnabled()&&ut.userZoomingEnabled()&&ut.userPanningEnabled()){be.preventDefault(),r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var un=r.dragData.touchDragEles;if(un){r.redrawHint("drag",!0);for(var zn=0;zn<un.length;zn++){var Ta=un[zn]._private;Ta.grabbed=!1,Ta.rscratch.inDragLayer=!1}}var pi=r.touchData.start,Un=be.touches[0].clientX-ve,hn=be.touches[0].clientY-we,Kn=be.touches[1].clientX-ve,vn=be.touches[1].clientY-we,Ou=ht(Un,hn,Kn,vn),Ca=Ou/Ee;if(Ye){var Hi=Un-me,Wa=hn-Me,na=Kn-he,kn=vn-fe,ui=(Hi+na)/2,pr=(Wa+kn)/2,Pa=ut.zoom(),lo=Pa*Ca,qr=ut.pan(),Kr=Re[0]*Pa+qr.x,Ha=Re[1]*Pa+qr.y,Hs={x:-lo/Pa*(Kr-qr.x-ui)+Kr,y:-lo/Pa*(Ha-qr.y-pr)+Ha};if(pi&&pi.active()){var un=r.dragData.touchDragEles;b(un),r.redrawHint("drag",!0),r.redrawHint("eles",!0),pi.unactivate().emit("freeon"),un.emit("free"),r.dragData.didDrag&&(pi.emit("dragfreeon"),un.emit("dragfree"))}ut.viewport({zoom:lo,pan:Hs,cancelOnFailedZoom:!0}),ut.emit("pinchzoom"),Ee=Ou,me=Un,Me=hn,he=Kn,fe=vn,r.pinching=!0}if(be.touches[0]){var Qt=r.projectIntoViewport(be.touches[0].clientX,be.touches[0].clientY);lt[0]=Qt[0],lt[1]=Qt[1]}if(be.touches[1]){var Qt=r.projectIntoViewport(be.touches[1].clientX,be.touches[1].clientY);lt[2]=Qt[0],lt[3]=Qt[1]}if(be.touches[2]){var Qt=r.projectIntoViewport(be.touches[2].clientX,be.touches[2].clientY);lt[4]=Qt[0],lt[5]=Qt[1]}}else if(be.touches[0]&&!r.touchData.didSelect){var eo=r.touchData.start,ia=r.touchData.last,vi;if(!r.hoverData.draggingEles&&!r.swipePanning&&(vi=r.findNearestElement(lt[0],lt[1],!0,!0)),it&&eo!=null&&be.preventDefault(),it&&eo!=null&&r.nodeIsDraggable(eo))if(Rr){var un=r.dragData.touchDragEles,Su=!r.dragData.didDrag;Su&&y(un,{inDragLayer:!0}),r.dragData.didDrag=!0;var Dn={x:0,y:0};if(Gt(ar[0])&&Gt(ar[1])&&(Dn.x+=ar[0],Dn.y+=ar[1],Su)){r.redrawHint("eles",!0);var Ai=r.touchData.dragDelta;Ai&&Gt(Ai[0])&&Gt(Ai[1])&&(Dn.x+=Ai[0],Dn.y+=Ai[1])}r.hoverData.draggingEles=!0,un.silentShift(Dn).emit("position drag"),r.redrawHint("drag",!0),r.touchData.startPosition[0]==Xt[0]&&r.touchData.startPosition[1]==Xt[1]&&r.redrawHint("eles",!0),r.redraw()}else{var Ai=r.touchData.dragDelta=r.touchData.dragDelta||[];Ai.length===0?(Ai.push(ar[0]),Ai.push(ar[1])):(Ai[0]+=ar[0],Ai[1]+=ar[1])}if(i(eo||vi,["touchmove","tapdrag","vmousemove"],be,{x:lt[0],y:lt[1]}),(!eo||!eo.grabbed())&&vi!=ia&&(ia&&ia.emit({originalEvent:be,type:"tapdragout",position:{x:lt[0],y:lt[1]}}),vi&&vi.emit({originalEvent:be,type:"tapdragover",position:{x:lt[0],y:lt[1]}})),r.touchData.last=vi,it)for(var zn=0;zn<lt.length;zn++)lt[zn]&&r.touchData.startPosition[zn]&&Rr&&(r.touchData.singleTouchMoved=!0);if(it&&(eo==null||eo.pannable())&&ut.panningEnabled()&&ut.userPanningEnabled()){var Yi=o(eo,r.touchData.starts);Yi&&(be.preventDefault(),r.data.bgActivePosistion||(r.data.bgActivePosistion=qp(r.touchData.startPosition)),r.swipePanning?(ut.panBy({x:ar[0]*pt,y:ar[1]*pt}),ut.emit("dragpan")):Rr&&(r.swipePanning=!0,ut.panBy({x:tr*pt,y:Vr*pt}),ut.emit("dragpan"),eo&&(eo.unactivate(),r.redrawHint("select",!0),r.touchData.start=null)));var Qt=r.projectIntoViewport(be.touches[0].clientX,be.touches[0].clientY);lt[0]=Qt[0],lt[1]=Qt[1]}}for(var nr=0;nr<lt.length;nr++)Xt[nr]=lt[nr];it&&be.touches.length>0&&!r.hoverData.draggingEles&&!r.swipePanning&&r.data.bgActivePosistion!=null&&(r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),r.redraw())}},!1);var $;r.registerBinding(e,"touchcancel",$=function(be){var it=r.touchData.start;r.touchData.capture=!1,it&&it.unactivate()});var ne,Ie,Le,ze;if(r.registerBinding(e,"touchend",ne=function(be){var it=r.touchData.start,st=r.touchData.capture;if(st)be.touches.length===0&&(r.touchData.capture=!1),be.preventDefault();else return;var ut=r.selection;r.swipePanning=!1,r.hoverData.draggingEles=!1;var lt=r.cy,Xt=lt.zoom(),pt=r.touchData.now,Qt=r.touchData.earlier;if(be.touches[0]){var mr=r.projectIntoViewport(be.touches[0].clientX,be.touches[0].clientY);pt[0]=mr[0],pt[1]=mr[1]}if(be.touches[1]){var mr=r.projectIntoViewport(be.touches[1].clientX,be.touches[1].clientY);pt[2]=mr[0],pt[3]=mr[1]}if(be.touches[2]){var mr=r.projectIntoViewport(be.touches[2].clientX,be.touches[2].clientY);pt[4]=mr[0],pt[5]=mr[1]}it&&it.unactivate();var Rr;if(r.touchData.cxt){if(Rr={originalEvent:be,type:"cxttapend",position:{x:pt[0],y:pt[1]}},it?it.emit(Rr):lt.emit(Rr),!r.touchData.cxtDragged){var ar={originalEvent:be,type:"cxttap",position:{x:pt[0],y:pt[1]}};it?it.emit(ar):lt.emit(ar)}r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!1,r.touchData.start=null,r.redraw();return}if(!be.touches[2]&&lt.boxSelectionEnabled()&&r.touchData.selecting){r.touchData.selecting=!1;var nr=lt.collection(r.getAllInBox(ut[0],ut[1],ut[2],ut[3]));ut[0]=void 0,ut[1]=void 0,ut[2]=void 0,ut[3]=void 0,ut[4]=0,r.redrawHint("select",!0),lt.emit({type:"boxend",originalEvent:be,position:{x:pt[0],y:pt[1]}});var tr=function(Tn){return Tn.selectable()&&!Tn.selected()};nr.emit("box").stdFilter(tr).select().emit("boxselect"),nr.nonempty()&&r.redrawHint("eles",!0),r.redraw()}if(it!=null&&it.unactivate(),be.touches[2])r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);else if(!be.touches[1]){if(!be.touches[0]){if(!be.touches[0]){r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var lr=r.dragData.touchDragEles;if(it!=null){var Vr=it._private.grabbed;b(lr),r.redrawHint("drag",!0),r.redrawHint("eles",!0),Vr&&(it.emit("freeon"),lr.emit("free"),r.dragData.didDrag&&(it.emit("dragfreeon"),lr.emit("dragfree"))),i(it,["touchend","tapend","vmouseup","tapdragout"],be,{x:pt[0],y:pt[1]}),it.unactivate(),r.touchData.start=null}else{var fn=r.findNearestElement(pt[0],pt[1],!0,!0);i(fn,["touchend","tapend","vmouseup","tapdragout"],be,{x:pt[0],y:pt[1]})}var In=r.touchData.startPosition[0]-pt[0],Un=In*In,hn=r.touchData.startPosition[1]-pt[1],Kn=hn*hn,vn=Un+Kn,Ei=vn*Xt*Xt;r.touchData.singleTouchMoved||(it||lt.$(":selected").unselect(["tapunselect"]),i(it,["tap","vclick"],be,{x:pt[0],y:pt[1]}),Ie=!1,be.timeStamp-ze<=lt.multiClickDebounceTime()?(Le&&clearTimeout(Le),Ie=!0,ze=null,i(it,["dbltap","vdblclick"],be,{x:pt[0],y:pt[1]})):(Le=setTimeout(function(){Ie||i(it,["onetap","voneclick"],be,{x:pt[0],y:pt[1]})},lt.multiClickDebounceTime()),ze=be.timeStamp)),it!=null&&!r.dragData.didDrag&&it._private.selectable&&Ei<r.touchTapThreshold2&&!r.pinching&&(lt.selectionType()==="single"?(lt.$(t).unmerge(it).unselect(["tapunselect"]),it.select(["tapselect"])):it.selected()?it.unselect(["tapunselect"]):it.select(["tapselect"]),r.redrawHint("eles",!0)),r.touchData.singleTouchMoved=!0}}}for(var Li=0;Li<pt.length;Li++)Qt[Li]=pt[Li];r.dragData.didDrag=!1,be.touches.length===0&&(r.touchData.dragDelta=[],r.touchData.startPosition=[null,null,null,null,null,null],r.touchData.startGPosition=null,r.touchData.didSelect=!1),be.touches.length<2&&(be.touches.length===1&&(r.touchData.startGPosition=[be.touches[0].clientX,be.touches[0].clientY]),r.pinching=!1,r.redrawHint("eles",!0),r.redraw())},!1),typeof TouchEvent>"u"){var Je=[],Pt=function(be){return{clientX:be.clientX,clientY:be.clientY,force:1,identifier:be.pointerId,pageX:be.pageX,pageY:be.pageY,radiusX:be.width/2,radiusY:be.height/2,screenX:be.screenX,screenY:be.screenY,target:be.target}},Lt=function(be){return{event:be,touch:Pt(be)}},Wt=function(be){Je.push(Lt(be))},Bt=function(be){for(var it=0;it<Je.length;it++){var st=Je[it];if(st.event.pointerId===be.pointerId){Je.splice(it,1);return}}},er=function(be){var it=Je.filter(function(st){return st.event.pointerId===be.pointerId})[0];it.event=be,it.touch=Pt(be)},Ar=function(be){be.touches=Je.map(function(it){return it.touch})},Yt=function(be){return be.pointerType==="mouse"||be.pointerType===4};r.registerBinding(r.container,"pointerdown",function(dt){Yt(dt)||(dt.preventDefault(),Wt(dt),Ar(dt),ct(dt))}),r.registerBinding(r.container,"pointerup",function(dt){Yt(dt)||(Bt(dt),Ar(dt),ne(dt))}),r.registerBinding(r.container,"pointercancel",function(dt){Yt(dt)||(Bt(dt),Ar(dt),$(dt))}),r.registerBinding(r.container,"pointermove",function(dt){Yt(dt)||(dt.preventDefault(),er(dt),Ar(dt),H(dt))})}};var nh={};nh.generatePolygon=function(r,e){return this.nodeShapes[r]={renderer:this,name:r,points:e,draw:function(n,i,a,o,s,u){this.renderer.nodeShapeImpl("polygon",n,i,a,o,s,this.points)},intersectLine:function(n,i,a,o,s,u,l,c){return ly(s,u,this.points,n,i,a/2,o/2,l)},checkPoint:function(n,i,a,o,s,u,l,c){return rh(n,i,this.points,u,l,o,s,[0,-1],a)}}};nh.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,t,n,i,a,o){this.renderer.nodeShapeImpl(this.name,e,t,n,i,a)},intersectLine:function(e,t,n,i,a,o,s,u){return TA(a,o,e,t,n/2+s,i/2+s)},checkPoint:function(e,t,n,i,a,o,s,u){return kv(e,t,i,a,o,s,n)}}};nh.generateRoundPolygon=function(r,e){return this.nodeShapes[r]={renderer:this,name:r,points:e,getOrCreateCorners:function(n,i,a,o,s,u,l){if(u[l]!==void 0&&u[l+"-cx"]===n&&u[l+"-cy"]===i)return u[l];u[l]=new Array(e.length/2),u[l+"-cx"]=n,u[l+"-cy"]=i;var c=a/2,f=o/2;s=s==="auto"?ZS(a,o):s;for(var h=new Array(e.length/2),d=0;d<e.length/2;d++)h[d]={x:n+c*e[d*2],y:i+f*e[d*2+1]};var v,y,w,b,p=h.length;for(y=h[p-1],v=0;v<p;v++)w=h[v%p],b=h[(v+1)%p],u[l][v]=v1(y,w,b,s),y=w,w=b;return u[l]},draw:function(n,i,a,o,s,u,l){this.renderer.nodeShapeImpl("round-polygon",n,i,a,o,s,this.points,this.getOrCreateCorners(i,a,o,s,u,l,"drawCorners"))},intersectLine:function(n,i,a,o,s,u,l,c,f){return CA(s,u,this.points,n,i,a,o,l,this.getOrCreateCorners(n,i,a,o,c,f,"corners"))},checkPoint:function(n,i,a,o,s,u,l,c,f){return SA(n,i,this.points,u,l,o,s,this.getOrCreateCorners(u,l,o,s,c,f,"corners"))}}};nh.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:ms(4,0),draw:function(e,t,n,i,a,o){this.renderer.nodeShapeImpl(this.name,e,t,n,i,a,this.points,o)},intersectLine:function(e,t,n,i,a,o,s,u){return KS(a,o,e,t,n,i,s,u)},checkPoint:function(e,t,n,i,a,o,s,u){var l=i/2,c=a/2;u=u==="auto"?sd(i,a):u,u=Math.min(l,c,u);var f=u*2;return!!(rh(e,t,this.points,o,s,i,a-f,[0,-1],n)||rh(e,t,this.points,o,s,i-f,a,[0,-1],n)||kv(e,t,f,f,o-l+u,s-c+u,n)||kv(e,t,f,f,o+l-u,s-c+u,n)||kv(e,t,f,f,o+l-u,s+c-u,n)||kv(e,t,f,f,o-l+u,s+c-u,n))}}};nh.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:n1(),points:ms(4,0),draw:function(e,t,n,i,a,o){this.renderer.nodeShapeImpl(this.name,e,t,n,i,a,null,o)},generateCutTrianglePts:function(e,t,n,i,a){var o=a==="auto"?this.cornerLength:a,s=t/2,u=e/2,l=n-u,c=n+u,f=i-s,h=i+s;return{topLeft:[l,f+o,l+o,f,l+o,f+o],topRight:[c-o,f,c,f+o,c-o,f+o],bottomRight:[c,h-o,c-o,h,c-o,h-o],bottomLeft:[l+o,h,l,h-o,l+o,h-o]}},intersectLine:function(e,t,n,i,a,o,s,u){var l=this.generateCutTrianglePts(n+2*s,i+2*s,e,t,u),c=[].concat.apply([],[l.topLeft.splice(0,4),l.topRight.splice(0,4),l.bottomRight.splice(0,4),l.bottomLeft.splice(0,4)]);return ly(a,o,c,e,t)},checkPoint:function(e,t,n,i,a,o,s,u){var l=u==="auto"?this.cornerLength:u;if(rh(e,t,this.points,o,s,i,a-2*l,[0,-1],n)||rh(e,t,this.points,o,s,i-2*l,a,[0,-1],n))return!0;var c=this.generateCutTrianglePts(i,a,o,s);return Us(e,t,c.topLeft)||Us(e,t,c.topRight)||Us(e,t,c.bottomRight)||Us(e,t,c.bottomLeft)}}};nh.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:ms(4,0),draw:function(e,t,n,i,a,o){this.renderer.nodeShapeImpl(this.name,e,t,n,i,a)},intersectLine:function(e,t,n,i,a,o,s,u){var l=.15,c=.5,f=.85,h=this.generateBarrelBezierPts(n+2*s,i+2*s,e,t),d=function(w){var b=Xp({x:w[0],y:w[1]},{x:w[2],y:w[3]},{x:w[4],y:w[5]},l),p=Xp({x:w[0],y:w[1]},{x:w[2],y:w[3]},{x:w[4],y:w[5]},c),m=Xp({x:w[0],y:w[1]},{x:w[2],y:w[3]},{x:w[4],y:w[5]},f);return[w[0],w[1],b.x,b.y,p.x,p.y,m.x,m.y,w[4],w[5]]},v=[].concat(d(h.topLeft),d(h.topRight),d(h.bottomRight),d(h.bottomLeft));return ly(a,o,v,e,t)},generateBarrelBezierPts:function(e,t,n,i){var a=t/2,o=e/2,s=n-o,u=n+o,l=i-a,c=i+a,f=ww(e,t),h=f.heightOffset,d=f.widthOffset,v=f.ctrlPtOffsetPct*e,y={topLeft:[s,l+h,s+v,l,s+d,l],topRight:[u-d,l,u-v,l,u,l+h],bottomRight:[u,c-h,u-v,c,u-d,c],bottomLeft:[s+d,c,s+v,c,s,c-h]};return y.topLeft.isTop=!0,y.topRight.isTop=!0,y.bottomLeft.isBottom=!0,y.bottomRight.isBottom=!0,y},checkPoint:function(e,t,n,i,a,o,s,u){var l=ww(i,a),c=l.heightOffset,f=l.widthOffset;if(rh(e,t,this.points,o,s,i,a-2*c,[0,-1],n)||rh(e,t,this.points,o,s,i-2*f,a,[0,-1],n))return!0;for(var h=this.generateBarrelBezierPts(i,a,o,s),d=function(R,D,N){var j=N[4],B=N[2],z=N[0],W=N[5],Z=N[1],Q=Math.min(j,z),re=Math.max(j,z),ee=Math.min(W,Z),ue=Math.max(W,Z);if(Q<=R&&R<=re&&ee<=D&&D<=ue){var de=PA(j,B,z),se=wA(de[0],de[1],de[2],R),me=se.filter(function(Me){return 0<=Me&&Me<=1});if(me.length>0)return me[0]}return null},v=Object.keys(h),y=0;y<v.length;y++){var w=v[y],b=h[w],p=d(e,t,b);if(p!=null){var m=b[5],x=b[3],T=b[1],P=ea(m,x,T,p);if(b.isTop&&P<=t||b.isBottom&&t<=P)return!0}}return!1}}};nh.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:ms(4,0),draw:function(e,t,n,i,a,o){this.renderer.nodeShapeImpl(this.name,e,t,n,i,a,this.points,o)},intersectLine:function(e,t,n,i,a,o,s,u){var l=e-(n/2+s),c=t-(i/2+s),f=c,h=e+(n/2+s),d=rd(a,o,e,t,l,c,h,f,!1);return d.length>0?d:KS(a,o,e,t,n,i,s,u)},checkPoint:function(e,t,n,i,a,o,s,u){u=u==="auto"?sd(i,a):u;var l=2*u;if(rh(e,t,this.points,o,s,i,a-l,[0,-1],n)||rh(e,t,this.points,o,s,i-l,a,[0,-1],n))return!0;var c=i/2+2*n,f=a/2+2*n,h=[o-c,s-f,o-c,s,o+c,s,o+c,s-f];return!!(Us(e,t,h)||kv(e,t,l,l,o+i/2-u,s+a/2-u,n)||kv(e,t,l,l,o-i/2+u,s+a/2-u,n))}}};nh.registerNodeShapes=function(){var r=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",ms(3,0)),this.generateRoundPolygon("round-triangle",ms(3,0)),this.generatePolygon("rectangle",ms(4,0)),r.square=r.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var t=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",t),this.generateRoundPolygon("round-diamond",t)}this.generatePolygon("pentagon",ms(5,0)),this.generateRoundPolygon("round-pentagon",ms(5,0)),this.generatePolygon("hexagon",ms(6,0)),this.generateRoundPolygon("round-hexagon",ms(6,0)),this.generatePolygon("heptagon",ms(7,0)),this.generateRoundPolygon("round-heptagon",ms(7,0)),this.generatePolygon("octagon",ms(8,0)),this.generateRoundPolygon("round-octagon",ms(8,0));var n=new Array(20);{var i=_w(5,0),a=_w(5,Math.PI/5),o=.5*(3-Math.sqrt(5));o*=1.57;for(var s=0;s<a.length/2;s++)a[s*2]*=o,a[s*2+1]*=o;for(var s=0;s<20/4;s++)n[s*4]=i[s*2],n[s*4+1]=i[s*2+1],n[s*4+2]=a[s*2],n[s*4+3]=a[s*2+1]}n=$S(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var u=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",u),this.generateRoundPolygon("round-tag",u)}r.makePolygon=function(l){var c=l.join("$"),f="polygon-"+c,h;return(h=this[f])?h:e.generatePolygon(f,l)}};var Ty={};Ty.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};Ty.redraw=function(r){r=r||HS();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=r};Ty.beforeRender=function(r,e){if(!this.destroyed){e==null&&qi("Priority is not optional for beforeRender");var t=this.beforeRenderCallbacks;t.push({fn:r,priority:e}),t.sort(function(n,i){return i.priority-n.priority})}};var Hx=function(e,t,n){for(var i=e.beforeRenderCallbacks,a=0;a<i.length;a++)i[a].fn(t,n)};Ty.startRenderLoop=function(){var r=this,e=r.cy;if(!r.renderLoopStarted){r.renderLoopStarted=!0;var t=function(i){if(!r.destroyed){if(!e.batching())if(r.requestedFrame&&!r.skipFrame){Hx(r,!0,i);var a=th();r.render(r.renderOptions);var o=r.lastDrawTime=th();r.averageRedrawTime===void 0&&(r.averageRedrawTime=o-a),r.redrawCount===void 0&&(r.redrawCount=0),r.redrawCount++,r.redrawTotalTime===void 0&&(r.redrawTotalTime=0);var s=o-a;r.redrawTotalTime+=s,r.lastRedrawTime=s,r.averageRedrawTime=r.averageRedrawTime/2+s/2,r.requestedFrame=!1}else Hx(r,!1,i);r.skipFrame=!1,Um(t)}};Um(t)}};var Wk=function(e){this.init(e)},$T=Wk,cg=$T.prototype;cg.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];cg.init=function(r){var e=this;e.options=r,e.cy=r.cy;var t=e.container=r.cy.container(),n=e.cy.window();if(n){var i=n.document,a=i.head,o="__________cytoscape_stylesheet",s="__________cytoscape_container",u=i.getElementById(o)!=null;if(t.className.indexOf(s)<0&&(t.className=(t.className||"")+" "+s),!u){var l=i.createElement("style");l.id=o,l.textContent="."+s+" { position: relative; }",a.insertBefore(l,a.children[0])}var c=n.getComputedStyle(t),f=c.getPropertyValue("position");f==="static"&&Fn("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=r.showFps,e.debug=r.debug,e.webgl=r.webgl,e.hideEdgesOnViewport=r.hideEdgesOnViewport,e.textureOnViewport=r.textureOnViewport,e.wheelSensitivity=r.wheelSensitivity,e.motionBlurEnabled=r.motionBlur,e.forcedPixelRatio=Gt(r.pixelRatio)?r.pixelRatio:null,e.motionBlur=r.motionBlur,e.motionBlurOpacity=r.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=r.desktopTapThreshold,e.desktopTapThreshold2=r.desktopTapThreshold*r.desktopTapThreshold,e.touchTapThreshold=r.touchTapThreshold,e.touchTapThreshold2=r.touchTapThreshold*r.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};cg.notify=function(r,e){var t=this,n=t.cy;if(!this.destroyed){if(r==="init"){t.load();return}if(r==="destroy"){t.destroy();return}(r==="add"||r==="remove"||r==="move"&&n.hasCompoundNodes()||r==="load"||r==="zorder"||r==="mount")&&t.invalidateCachedZSortedEles(),r==="viewport"&&t.redrawHint("select",!0),r==="gc"&&t.redrawHint("gc",!0),(r==="load"||r==="resize"||r==="mount")&&(t.invalidateContainerClientCoordsCache(),t.matchCanvasSize(t.container)),t.redrawHint("eles",!0),t.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};cg.destroy=function(){var r=this;r.destroyed=!0,r.cy.stopAnimationLoop();for(var e=0;e<r.bindings.length;e++){var t=r.bindings[e],n=t,i=n.target;(i.off||i.removeEventListener).apply(i,n.args)}if(r.bindings=[],r.beforeRenderCallbacks=[],r.onUpdateEleCalcsFns=[],r.removeObserver&&r.removeObserver.disconnect(),r.styleObserver&&r.styleObserver.disconnect(),r.resizeObserver&&r.resizeObserver.disconnect(),r.labelCalcDiv)try{document.body.removeChild(r.labelCalcDiv)}catch{}};cg.isHeadless=function(){return!1};[d1,XT,KT,lg,nh,Ty].forEach(function(r){xr(cg,r)});var __=1e3/60,ZT={setupDequeueing:function(e){return function(){var n=this,i=this.renderer;if(!n.dequeueingSetup){n.dequeueingSetup=!0;var a=wy(function(){i.redrawHint("eles",!0),i.redrawHint("drag",!0),i.redraw()},e.deqRedrawThreshold),o=function(l,c){var f=th(),h=i.averageRedrawTime,d=i.lastRedrawTime,v=[],y=i.cy.extent(),w=i.getPixelRatio();for(l||i.flushRenderedStyleQueue();;){var b=th(),p=b-f,m=b-c;if(d<__){var x=__-(l?h:0);if(m>=e.deqFastCost*x)break}else if(l){if(p>=e.deqCost*d||p>=e.deqAvgCost*h)break}else if(m>=e.deqNoDrawCost*__)break;var T=e.deq(n,w,y);if(T.length>0)for(var P=0;P<T.length;P++)v.push(T[P]);else break}v.length>0&&(e.onDeqd(n,v),!l&&e.shouldRedraw(n,v,w,y)&&a())},s=e.priority||Qw;i.beforeRender(o,s(n))}}}},Hk=function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zm;dd(this,r),this.idsByKey=new Jf,this.keyForId=new Jf,this.cachesByLvl=new Jf,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=t}return vd(r,[{key:"getIdsFor",value:function(t){t==null&&qi("Can not get id list for null key");var n=this.idsByKey,i=this.idsByKey.get(t);return i||(i=new og,n.set(t,i)),i}},{key:"addIdForKey",value:function(t,n){t!=null&&this.getIdsFor(t).add(n)}},{key:"deleteIdForKey",value:function(t,n){t!=null&&this.getIdsFor(t).delete(n)}},{key:"getNumberOfIdsForKey",value:function(t){return t==null?0:this.getIdsFor(t).size}},{key:"updateKeyMappingFor",value:function(t){var n=t.id(),i=this.keyForId.get(n),a=this.getKey(t);this.deleteIdForKey(i,n),this.addIdForKey(a,n),this.keyForId.set(n,a)}},{key:"deleteKeyMappingFor",value:function(t){var n=t.id(),i=this.keyForId.get(n);this.deleteIdForKey(i,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(t){var n=t.id(),i=this.keyForId.get(n),a=this.getKey(t);return i!==a}},{key:"isInvalid",value:function(t){return this.keyHasChangedFor(t)||this.doesEleInvalidateKey(t)}},{key:"getCachesAt",value:function(t){var n=this.cachesByLvl,i=this.lvls,a=n.get(t);return a||(a=new Jf,n.set(t,a),i.push(t)),a}},{key:"getCache",value:function(t,n){return this.getCachesAt(n).get(t)}},{key:"get",value:function(t,n){var i=this.getKey(t),a=this.getCache(i,n);return a!=null&&this.updateKeyMappingFor(t),a}},{key:"getForCachedKey",value:function(t,n){var i=this.keyForId.get(t.id()),a=this.getCache(i,n);return a}},{key:"hasCache",value:function(t,n){return this.getCachesAt(n).has(t)}},{key:"has",value:function(t,n){var i=this.getKey(t);return this.hasCache(i,n)}},{key:"setCache",value:function(t,n,i){i.key=t,this.getCachesAt(n).set(t,i)}},{key:"set",value:function(t,n,i){var a=this.getKey(t);this.setCache(a,n,i),this.updateKeyMappingFor(t)}},{key:"deleteCache",value:function(t,n){this.getCachesAt(n).delete(t)}},{key:"delete",value:function(t,n){var i=this.getKey(t);this.deleteCache(i,n)}},{key:"invalidateKey",value:function(t){var n=this;this.lvls.forEach(function(i){return n.deleteCache(t,i)})}},{key:"invalidate",value:function(t){var n=t.id(),i=this.keyForId.get(n);this.deleteKeyMappingFor(t);var a=this.doesEleInvalidateKey(t);return a&&this.invalidateKey(i),a||this.getNumberOfIdsForKey(i)===0}}])}(),Yx=25,sm=50,Rm=-4,Mw=3,QT=7.99,Yk=8,Xk=1024,Kk=1024,$k=1024,Zk=.2,Qk=.8,Jk=10,eD=.15,tD=.1,rD=.9,nD=.9,iD=100,oD=1,Hp={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},aD=Oa({getKey:null,doesEleInvalidateKey:zm,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:VS,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),$g=function(e,t){var n=this;n.renderer=e,n.onDequeues=[];var i=aD(t);xr(n,i),n.lookup=new Hk(i.getKey,i.doesEleInvalidateKey),n.setupDequeueing()},Fo=$g.prototype;Fo.reasons=Hp;Fo.getTextureQueue=function(r){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[r]=e.eleImgCaches[r]||[]};Fo.getRetiredTextureQueue=function(r){var e=this,t=e.eleImgCaches.retired=e.eleImgCaches.retired||{},n=t[r]=t[r]||[];return n};Fo.getElementQueue=function(){var r=this,e=r.eleCacheQueue=r.eleCacheQueue||new Ey(function(t,n){return n.reqs-t.reqs});return e};Fo.getElementKeyToQueue=function(){var r=this,e=r.eleKeyToCacheQueue=r.eleKeyToCacheQueue||{};return e};Fo.getElement=function(r,e,t,n,i){var a=this,o=this.renderer,s=o.cy.zoom(),u=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!r.visible()||r.removed()||!a.allowEdgeTxrCaching&&r.isEdge()||!a.allowParentTxrCaching&&r.isParent())return null;if(n==null&&(n=Math.ceil(e1(s*t))),n<Rm)n=Rm;else if(s>=QT||n>Mw)return null;var l=Math.pow(2,n),c=e.h*l,f=e.w*l,h=o.eleTextBiggerThanMin(r,l);if(!this.isVisible(r,h))return null;var d=u.get(r,n);if(d&&d.invalidated&&(d.invalidated=!1,d.texture.invalidatedWidth-=d.width),d)return d;var v;if(c<=Yx?v=Yx:c<=sm?v=sm:v=Math.ceil(c/sm)*sm,c>$k||f>Kk)return null;var y=a.getTextureQueue(v),w=y[y.length-2],b=function(){return a.recycleTexture(v,f)||a.addTexture(v,f)};w||(w=y[y.length-1]),w||(w=b()),w.width-w.usedWidth<f&&(w=b());for(var p=function(Q){return Q&&Q.scaledLabelShown===h},m=i&&i===Hp.dequeue,x=i&&i===Hp.highQuality,T=i&&i===Hp.downscale,P,C=n+1;C<=Mw;C++){var R=u.get(r,C);if(R){P=R;break}}var D=P&&P.level===n+1?P:null,N=function(){w.context.drawImage(D.texture.canvas,D.x,0,D.width,D.height,w.usedWidth,0,f,c)};if(w.context.setTransform(1,0,0,1,0,0),w.context.clearRect(w.usedWidth,0,f,v),p(D))N();else if(p(P))if(x){for(var j=P.level;j>n;j--)D=a.getElement(r,e,t,j,Hp.downscale);N()}else return a.queueElement(r,P.level-1),P;else{var B;if(!m&&!x&&!T)for(var z=n-1;z>=Rm;z--){var W=u.get(r,z);if(W){B=W;break}}if(p(B))return a.queueElement(r,n),B;w.context.translate(w.usedWidth,0),w.context.scale(l,l),this.drawElement(w.context,r,e,h,!1),w.context.scale(1/l,1/l),w.context.translate(-w.usedWidth,0)}return d={x:w.usedWidth,texture:w,level:n,scale:l,width:f,height:c,scaledLabelShown:h},w.usedWidth+=Math.ceil(f+Yk),w.eleCaches.push(d),u.set(r,n,d),a.checkTextureFullness(w),d};Fo.invalidateElements=function(r){for(var e=0;e<r.length;e++)this.invalidateElement(r[e])};Fo.invalidateElement=function(r){var e=this,t=e.lookup,n=[],i=t.isInvalid(r);if(i){for(var a=Rm;a<=Mw;a++){var o=t.getForCachedKey(r,a);o&&n.push(o)}var s=t.invalidate(r);if(s)for(var u=0;u<n.length;u++){var l=n[u],c=l.texture;c.invalidatedWidth+=l.width,l.invalidated=!0,e.checkTextureUtility(c)}e.removeFromQueue(r)}};Fo.checkTextureUtility=function(r){r.invalidatedWidth>=Zk*r.width&&this.retireTexture(r)};Fo.checkTextureFullness=function(r){var e=this,t=e.getTextureQueue(r.height);r.usedWidth/r.width>Qk&&r.fullnessChecks>=Jk?ad(t,r):r.fullnessChecks++};Fo.retireTexture=function(r){var e=this,t=r.height,n=e.getTextureQueue(t),i=this.lookup;ad(n,r),r.retired=!0;for(var a=r.eleCaches,o=0;o<a.length;o++){var s=a[o];i.deleteCache(s.key,s.level)}Jw(a);var u=e.getRetiredTextureQueue(t);u.push(r)};Fo.addTexture=function(r,e){var t=this,n=t.getTextureQueue(r),i={};return n.push(i),i.eleCaches=[],i.height=r,i.width=Math.max(Xk,e),i.usedWidth=0,i.invalidatedWidth=0,i.fullnessChecks=0,i.canvas=t.renderer.makeOffscreenCanvas(i.width,i.height),i.context=i.canvas.getContext("2d"),i};Fo.recycleTexture=function(r,e){for(var t=this,n=t.getTextureQueue(r),i=t.getRetiredTextureQueue(r),a=0;a<i.length;a++){var o=i[a];if(o.width>=e)return o.retired=!1,o.usedWidth=0,o.invalidatedWidth=0,o.fullnessChecks=0,Jw(o.eleCaches),o.context.setTransform(1,0,0,1,0,0),o.context.clearRect(0,0,o.width,o.height),ad(i,o),n.push(o),o}};Fo.queueElement=function(r,e){var t=this,n=t.getElementQueue(),i=t.getElementKeyToQueue(),a=this.getKey(r),o=i[a];if(o)o.level=Math.max(o.level,e),o.eles.merge(r),o.reqs++,n.updateItem(o);else{var s={eles:r.spawn().merge(r),level:e,reqs:1,key:a};n.push(s),i[a]=s}};Fo.dequeue=function(r){for(var e=this,t=e.getElementQueue(),n=e.getElementKeyToQueue(),i=[],a=e.lookup,o=0;o<oD&&t.size()>0;o++){var s=t.pop(),u=s.key,l=s.eles[0],c=a.hasCache(l,s.level);if(n[u]=null,c)continue;i.push(s);var f=e.getBoundingBox(l);e.getElement(l,f,r,s.level,Hp.dequeue)}return i};Fo.removeFromQueue=function(r){var e=this,t=e.getElementQueue(),n=e.getElementKeyToQueue(),i=this.getKey(r),a=n[i];a!=null&&(a.eles.length===1?(a.reqs=Zw,t.updateItem(a),t.pop(),n[i]=null):a.eles.unmerge(r))};Fo.onDequeue=function(r){this.onDequeues.push(r)};Fo.offDequeue=function(r){ad(this.onDequeues,r)};Fo.setupDequeueing=ZT.setupDequeueing({deqRedrawThreshold:iD,deqCost:eD,deqAvgCost:tD,deqNoDrawCost:rD,deqFastCost:nD,deq:function(e,t,n){return e.dequeue(t,n)},onDeqd:function(e,t){for(var n=0;n<e.onDequeues.length;n++){var i=e.onDequeues[n];i(t)}},shouldRedraw:function(e,t,n,i){for(var a=0;a<t.length;a++)for(var o=t[a].eles,s=0;s<o.length;s++){var u=o[s].boundingBox();if(r1(u,i))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var sD=1,ry=-4,Km=2,uD=3.99,lD=50,cD=50,fD=.15,hD=.1,dD=.9,vD=.9,pD=1,Xx=250,gD=4e3*4e3,Kx=32767,yD=!0,JT=function(e){var t=this,n=t.renderer=e,i=n.cy;t.layersByLevel={},t.firstGet=!0,t.lastInvalidationTime=th()-2*Xx,t.skipping=!1,t.eleTxrDeqs=i.collection(),t.scheduleElementRefinement=wy(function(){t.refineElementTextures(t.eleTxrDeqs),t.eleTxrDeqs.unmerge(t.eleTxrDeqs)},cD),n.beforeRender(function(o,s){s-t.lastInvalidationTime<=Xx?t.skipping=!0:t.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var a=function(s,u){return u.reqs-s.reqs};t.layersQueue=new Ey(a),t.setupDequeueing()},Sa=JT.prototype,$x=0,mD=Math.pow(2,53)-1;Sa.makeLayer=function(r,e){var t=Math.pow(2,e),n=Math.ceil(r.w*t),i=Math.ceil(r.h*t),a=this.renderer.makeOffscreenCanvas(n,i),o={id:$x=++$x%mD,bb:r,level:e,width:n,height:i,canvas:a,context:a.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=o.context,u=-o.bb.x1,l=-o.bb.y1;return s.scale(t,t),s.translate(u,l),o};Sa.getLayers=function(r,e,t){var n=this,i=n.renderer,a=i.cy,o=a.zoom(),s=n.firstGet;if(n.firstGet=!1,t==null){if(t=Math.ceil(e1(o*e)),t<ry)t=ry;else if(o>=uD||t>Km)return null}n.validateLayersElesOrdering(t,r);var u=n.layersByLevel,l=Math.pow(2,t),c=u[t]=u[t]||[],f,h=n.levelIsComplete(t,r),d,v=function(){var N=function(Z){if(n.validateLayersElesOrdering(Z,r),n.levelIsComplete(Z,r))return d=u[Z],!0},j=function(Z){if(!d)for(var Q=t+Z;ry<=Q&&Q<=Km&&!N(Q);Q+=Z);};j(1),j(-1);for(var B=c.length-1;B>=0;B--){var z=c[B];z.invalid&&ad(c,z)}};if(!h)v();else return c;var y=function(){if(!f){f=qs();for(var N=0;N<r.length;N++)XS(f,r[N].boundingBox())}return f},w=function(N){N=N||{};var j=N.after;y();var B=Math.ceil(f.w*l),z=Math.ceil(f.h*l);if(B>Kx||z>Kx)return null;var W=B*z;if(W>gD)return null;var Z=n.makeLayer(f,t);if(j!=null){var Q=c.indexOf(j)+1;c.splice(Q,0,Z)}else(N.insert===void 0||N.insert)&&c.unshift(Z);return Z};if(n.skipping&&!s)return null;for(var b=null,p=r.length/sD,m=!s,x=0;x<r.length;x++){var T=r[x],P=T._private.rscratch,C=P.imgLayerCaches=P.imgLayerCaches||{},R=C[t];if(R){b=R;continue}if((!b||b.eles.length>=p||!mA(b.bb,T.boundingBox()))&&(b=w({insert:!0,after:b}),!b))return null;d||m?n.queueLayer(b,T):n.drawEleInLayer(b,T,t,e),b.eles.push(T),C[t]=b}return d||(m?null:c)};Sa.getEleLevelForLayerLevel=function(r,e){return r};Sa.drawEleInLayer=function(r,e,t,n){var i=this,a=this.renderer,o=r.context,s=e.boundingBox();s.w===0||s.h===0||!e.visible()||(t=i.getEleLevelForLayerLevel(t,n),a.setImgSmoothing(o,!1),a.drawCachedElement(o,e,null,null,t,yD),a.setImgSmoothing(o,!0))};Sa.levelIsComplete=function(r,e){var t=this,n=t.layersByLevel[r];if(!n||n.length===0)return!1;for(var i=0,a=0;a<n.length;a++){var o=n[a];if(o.reqs>0||o.invalid)return!1;i+=o.eles.length}return i===e.length};Sa.validateLayersElesOrdering=function(r,e){var t=this.layersByLevel[r];if(t)for(var n=0;n<t.length;n++){for(var i=t[n],a=-1,o=0;o<e.length;o++)if(i.eles[0]===e[o]){a=o;break}if(a<0){this.invalidateLayer(i);continue}for(var s=a,o=0;o<i.eles.length;o++)if(i.eles[o]!==e[s+o]){this.invalidateLayer(i);break}}};Sa.updateElementsInLayers=function(r,e){for(var t=this,n=yy(r[0]),i=0;i<r.length;i++)for(var a=n?null:r[i],o=n?r[i]:r[i].ele,s=o._private.rscratch,u=s.imgLayerCaches=s.imgLayerCaches||{},l=ry;l<=Km;l++){var c=u[l];c&&(a&&t.getEleLevelForLayerLevel(c.level)!==a.level||e(c,o,a))}};Sa.haveLayers=function(){for(var r=this,e=!1,t=ry;t<=Km;t++){var n=r.layersByLevel[t];if(n&&n.length>0){e=!0;break}}return e};Sa.invalidateElements=function(r){var e=this;r.length!==0&&(e.lastInvalidationTime=th(),!(r.length===0||!e.haveLayers())&&e.updateElementsInLayers(r,function(n,i,a){e.invalidateLayer(n)}))};Sa.invalidateLayer=function(r){if(this.lastInvalidationTime=th(),!r.invalid){var e=r.level,t=r.eles,n=this.layersByLevel[e];ad(n,r),r.elesQueue=[],r.invalid=!0,r.replacement&&(r.replacement.invalid=!0);for(var i=0;i<t.length;i++){var a=t[i]._private.rscratch.imgLayerCaches;a&&(a[e]=null)}}};Sa.refineElementTextures=function(r){var e=this;e.updateElementsInLayers(r,function(n,i,a){var o=n.replacement;if(o||(o=n.replacement=e.makeLayer(n.bb,n.level),o.replaces=n,o.eles=n.eles),!o.reqs)for(var s=0;s<o.eles.length;s++)e.queueLayer(o,o.eles[s])})};Sa.enqueueElementRefinement=function(r){this.eleTxrDeqs.merge(r),this.scheduleElementRefinement()};Sa.queueLayer=function(r,e){var t=this,n=t.layersQueue,i=r.elesQueue,a=i.hasId=i.hasId||{};if(!r.replacement){if(e){if(a[e.id()])return;i.push(e),a[e.id()]=!0}r.reqs?(r.reqs++,n.updateItem(r)):(r.reqs=1,n.push(r))}};Sa.dequeue=function(r){for(var e=this,t=e.layersQueue,n=[],i=0;i<pD&&t.size()!==0;){var a=t.peek();if(a.replacement){t.pop();continue}if(a.replaces&&a!==a.replaces.replacement){t.pop();continue}if(a.invalid){t.pop();continue}var o=a.elesQueue.shift();o&&(e.drawEleInLayer(a,o,a.level,r),i++),n.length===0&&n.push(!0),a.elesQueue.length===0&&(t.pop(),a.reqs=0,a.replaces&&e.applyLayerReplacement(a),e.requestRedraw())}return n};Sa.applyLayerReplacement=function(r){var e=this,t=e.layersByLevel[r.level],n=r.replaces,i=t.indexOf(n);if(!(i<0||n.invalid)){t[i]=r;for(var a=0;a<r.eles.length;a++){var o=r.eles[a]._private,s=o.imgLayerCaches=o.imgLayerCaches||{};s&&(s[r.level]=r)}e.requestRedraw()}};Sa.requestRedraw=wy(function(){var r=this.renderer;r.redrawHint("eles",!0),r.redrawHint("drag",!0),r.redraw()},100);Sa.setupDequeueing=ZT.setupDequeueing({deqRedrawThreshold:lD,deqCost:fD,deqAvgCost:hD,deqNoDrawCost:dD,deqFastCost:vD,deq:function(e,t){return e.dequeue(t)},onDeqd:Qw,shouldRedraw:VS,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var e2={},Zx;function bD(r,e){for(var t=0;t<e.length;t++){var n=e[t];r.lineTo(n.x,n.y)}}function _D(r,e,t){for(var n,i=0;i<e.length;i++){var a=e[i];i===0&&(n=a),r.lineTo(a.x,a.y)}r.quadraticCurveTo(t.x,t.y,n.x,n.y)}function Qx(r,e,t){r.beginPath&&r.beginPath();for(var n=e,i=0;i<n.length;i++){var a=n[i];r.lineTo(a.x,a.y)}var o=t,s=t[0];r.moveTo(s.x,s.y);for(var i=1;i<o.length;i++){var a=o[i];r.lineTo(a.x,a.y)}r.closePath&&r.closePath()}function wD(r,e,t,n,i){r.beginPath&&r.beginPath(),r.arc(t,n,i,0,Math.PI*2,!1);var a=e,o=a[0];r.moveTo(o.x,o.y);for(var s=0;s<a.length;s++){var u=a[s];r.lineTo(u.x,u.y)}r.closePath&&r.closePath()}function ED(r,e,t,n){r.arc(e,t,n,0,Math.PI*2,!1)}e2.arrowShapeImpl=function(r){return(Zx||(Zx={polygon:bD,"triangle-backcurve":_D,"triangle-tee":Qx,"circle-triangle":wD,"triangle-cross":Qx,circle:ED}))[r]};var Zc={};Zc.drawElement=function(r,e,t,n,i,a){var o=this;e.isNode()?o.drawNode(r,e,t,n,i,a):o.drawEdge(r,e,t,n,i,a)};Zc.drawElementOverlay=function(r,e){var t=this;e.isNode()?t.drawNodeOverlay(r,e):t.drawEdgeOverlay(r,e)};Zc.drawElementUnderlay=function(r,e){var t=this;e.isNode()?t.drawNodeUnderlay(r,e):t.drawEdgeUnderlay(r,e)};Zc.drawCachedElementPortion=function(r,e,t,n,i,a,o,s){var u=this,l=t.getBoundingBox(e);if(!(l.w===0||l.h===0)){var c=t.getElement(e,l,n,i,a);if(c!=null){var f=s(u,e);if(f===0)return;var h=o(u,e),d=l.x1,v=l.y1,y=l.w,w=l.h,b,p,m,x,T;if(h!==0){var P=t.getRotationPoint(e);m=P.x,x=P.y,r.translate(m,x),r.rotate(h),T=u.getImgSmoothing(r),T||u.setImgSmoothing(r,!0);var C=t.getRotationOffset(e);b=C.x,p=C.y}else b=d,p=v;var R;f!==1&&(R=r.globalAlpha,r.globalAlpha=R*f),r.drawImage(c.texture.canvas,c.x,0,c.width,c.height,b,p,y,w),f!==1&&(r.globalAlpha=R),h!==0&&(r.rotate(-h),r.translate(-m,-x),T||u.setImgSmoothing(r,!1))}else t.drawElement(r,e)}};var xD=function(){return 0},OD=function(e,t){return e.getTextAngle(t,null)},SD=function(e,t){return e.getTextAngle(t,"source")},TD=function(e,t){return e.getTextAngle(t,"target")},CD=function(e,t){return t.effectiveOpacity()},w_=function(e,t){return t.pstyle("text-opacity").pfValue*t.effectiveOpacity()};Zc.drawCachedElement=function(r,e,t,n,i,a){var o=this,s=o.data,u=s.eleTxrCache,l=s.lblTxrCache,c=s.slbTxrCache,f=s.tlbTxrCache,h=e.boundingBox(),d=a===!0?u.reasons.highQuality:null;if(!(h.w===0||h.h===0||!e.visible())&&(!n||r1(h,n))){var v=e.isEdge(),y=e.element()._private.rscratch.badLine;o.drawElementUnderlay(r,e),o.drawCachedElementPortion(r,e,u,t,i,d,xD,CD),(!v||!y)&&o.drawCachedElementPortion(r,e,l,t,i,d,OD,w_),v&&!y&&(o.drawCachedElementPortion(r,e,c,t,i,d,SD,w_),o.drawCachedElementPortion(r,e,f,t,i,d,TD,w_)),o.drawElementOverlay(r,e)}};Zc.drawElements=function(r,e){for(var t=this,n=0;n<e.length;n++){var i=e[n];t.drawElement(r,i)}};Zc.drawCachedElements=function(r,e,t,n){for(var i=this,a=0;a<e.length;a++){var o=e[a];i.drawCachedElement(r,o,t,n)}};Zc.drawCachedNodes=function(r,e,t,n){for(var i=this,a=0;a<e.length;a++){var o=e[a];o.isNode()&&i.drawCachedElement(r,o,t,n)}};Zc.drawLayeredElements=function(r,e,t,n){var i=this,a=i.data.lyrTxrCache.getLayers(e,t);if(a)for(var o=0;o<a.length;o++){var s=a[o],u=s.bb;u.w===0||u.h===0||r.drawImage(s.canvas,u.x1,u.y1,u.w,u.h)}else i.drawCachedElements(r,e,t,n)};var ih={};ih.drawEdge=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,s=e._private.rscratch;if(!(a&&!e.visible())&&!(s.badLine||s.allpts==null||isNaN(s.allpts[0]))){var u;t&&(u=t,r.translate(-u.x1,-u.y1));var l=a?e.pstyle("opacity").value:1,c=a?e.pstyle("line-opacity").value:1,f=e.pstyle("curve-style").value,h=e.pstyle("line-style").value,d=e.pstyle("width").pfValue,v=e.pstyle("line-cap").value,y=e.pstyle("line-outline-width").value,w=e.pstyle("line-outline-color").value,b=l*c,p=l*c,m=function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b;f==="straight-triangle"?(o.eleStrokeStyle(r,e,Z),o.drawEdgeTrianglePath(e,r,s.allpts)):(r.lineWidth=d,r.lineCap=v,o.eleStrokeStyle(r,e,Z),o.drawEdgePath(e,r,s.allpts,h),r.lineCap="butt")},x=function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b;if(r.lineWidth=d+y,r.lineCap=v,y>0)o.colorStrokeStyle(r,w[0],w[1],w[2],Z);else{r.lineCap="butt";return}f==="straight-triangle"?o.drawEdgeTrianglePath(e,r,s.allpts):(o.drawEdgePath(e,r,s.allpts,h),r.lineCap="butt")},T=function(){i&&o.drawEdgeOverlay(r,e)},P=function(){i&&o.drawEdgeUnderlay(r,e)},C=function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p;o.drawArrowheads(r,e,Z)},R=function(){o.drawElementText(r,e,null,n)};r.lineJoin="round";var D=e.pstyle("ghost").value==="yes";if(D){var N=e.pstyle("ghost-offset-x").pfValue,j=e.pstyle("ghost-offset-y").pfValue,B=e.pstyle("ghost-opacity").value,z=b*B;r.translate(N,j),m(z),C(z),r.translate(-N,-j)}else x();P(),m(),C(),T(),R(),t&&r.translate(u.x1,u.y1)}};var t2=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n){if(n.visible()){var i=n.pstyle("".concat(e,"-opacity")).value;if(i!==0){var a=this,o=a.usePaths(),s=n._private.rscratch,u=n.pstyle("".concat(e,"-padding")).pfValue,l=2*u,c=n.pstyle("".concat(e,"-color")).value;t.lineWidth=l,s.edgeType==="self"&&!o?t.lineCap="butt":t.lineCap="round",a.colorStrokeStyle(t,c[0],c[1],c[2],i),a.drawEdgePath(n,t,s.allpts,"solid")}}}};ih.drawEdgeOverlay=t2("overlay");ih.drawEdgeUnderlay=t2("underlay");ih.drawEdgePath=function(r,e,t,n){var i=r._private.rscratch,a=e,o,s=!1,u=this.usePaths(),l=r.pstyle("line-dash-pattern").pfValue,c=r.pstyle("line-dash-offset").pfValue;if(u){var f=t.join("$"),h=i.pathCacheKey&&i.pathCacheKey===f;h?(o=e=i.pathCache,s=!0):(o=e=new Path2D,i.pathCacheKey=f,i.pathCache=o)}if(a.setLineDash)switch(n){case"dotted":a.setLineDash([1,1]);break;case"dashed":a.setLineDash(l),a.lineDashOffset=c;break;case"solid":a.setLineDash([]);break}if(!s&&!i.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(t[0],t[1]),i.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var d=2;d+3<t.length;d+=4)e.quadraticCurveTo(t[d],t[d+1],t[d+2],t[d+3]);break;case"straight":case"haystack":for(var v=2;v+1<t.length;v+=2)e.lineTo(t[v],t[v+1]);break;case"segments":if(i.isRound){var y=Gs(i.roundCorners),w;try{for(y.s();!(w=y.n()).done;){var b=w.value;VT(e,b)}}catch(m){y.e(m)}finally{y.f()}e.lineTo(t[t.length-2],t[t.length-1])}else for(var p=2;p+1<t.length;p+=2)e.lineTo(t[p],t[p+1]);break}e=a,u?e.stroke(o):e.stroke(),e.setLineDash&&e.setLineDash([])};ih.drawEdgeTrianglePath=function(r,e,t){e.fillStyle=e.strokeStyle;for(var n=r.pstyle("width").pfValue,i=0;i+1<t.length;i+=2){var a=[t[i+2]-t[i],t[i+3]-t[i+1]],o=Math.sqrt(a[0]*a[0]+a[1]*a[1]),s=[a[1]/o,-a[0]/o],u=[s[0]*n/2,s[1]*n/2];e.beginPath(),e.moveTo(t[i]-u[0],t[i+1]-u[1]),e.lineTo(t[i]+u[0],t[i+1]+u[1]),e.lineTo(t[i+2],t[i+3]),e.closePath(),e.fill()}};ih.drawArrowheads=function(r,e,t){var n=e._private.rscratch,i=n.edgeType==="haystack";i||this.drawArrowhead(r,e,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,t),this.drawArrowhead(r,e,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,t),this.drawArrowhead(r,e,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,t),i||this.drawArrowhead(r,e,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,t)};ih.drawArrowhead=function(r,e,t,n,i,a,o){if(!(isNaN(n)||n==null||isNaN(i)||i==null||isNaN(a)||a==null)){var s=this,u=e.pstyle(t+"-arrow-shape").value;if(u!=="none"){var l=e.pstyle(t+"-arrow-fill").value==="hollow"?"both":"filled",c=e.pstyle(t+"-arrow-fill").value,f=e.pstyle("width").pfValue,h=e.pstyle(t+"-arrow-width"),d=h.value==="match-line"?f:h.pfValue;h.units==="%"&&(d*=f);var v=e.pstyle("opacity").value;o===void 0&&(o=v);var y=r.globalCompositeOperation;(o!==1||c==="hollow")&&(r.globalCompositeOperation="destination-out",s.colorFillStyle(r,255,255,255,1),s.colorStrokeStyle(r,255,255,255,1),s.drawArrowShape(e,r,l,f,u,d,n,i,a),r.globalCompositeOperation=y);var w=e.pstyle(t+"-arrow-color").value;s.colorFillStyle(r,w[0],w[1],w[2],o),s.colorStrokeStyle(r,w[0],w[1],w[2],o),s.drawArrowShape(e,r,c,f,u,d,n,i,a)}}};ih.drawArrowShape=function(r,e,t,n,i,a,o,s,u){var l=this,c=this.usePaths()&&i!=="triangle-cross",f=!1,h,d=e,v={x:o,y:s},y=r.pstyle("arrow-scale").value,w=this.getArrowWidth(n,y),b=l.arrowShapes[i];if(c){var p=l.arrowPathCache=l.arrowPathCache||[],m=Lv(i),x=p[m];x!=null?(h=e=x,f=!0):(h=e=new Path2D,p[m]=h)}f||(e.beginPath&&e.beginPath(),c?b.draw(e,1,0,{x:0,y:0},1):b.draw(e,w,u,v,n),e.closePath&&e.closePath()),e=d,c&&(e.translate(o,s),e.rotate(u),e.scale(w,w)),(t==="filled"||t==="both")&&(c?e.fill(h):e.fill()),(t==="hollow"||t==="both")&&(e.lineWidth=a/(c?w:1),e.lineJoin="miter",c?e.stroke(h):e.stroke()),c&&(e.scale(1/w,1/w),e.rotate(-u),e.translate(-o,-s))};var g1={};g1.safeDrawImage=function(r,e,t,n,i,a,o,s,u,l){if(!(i<=0||a<=0||u<=0||l<=0))try{r.drawImage(e,t,n,i,a,o,s,u,l)}catch(c){Fn(c)}};g1.drawInscribedImage=function(r,e,t,n,i){var a=this,o=t.position(),s=o.x,u=o.y,l=t.cy().style(),c=l.getIndexedStyle.bind(l),f=c(t,"background-fit","value",n),h=c(t,"background-repeat","value",n),d=t.width(),v=t.height(),y=t.padding()*2,w=d+(c(t,"background-width-relative-to","value",n)==="inner"?0:y),b=v+(c(t,"background-height-relative-to","value",n)==="inner"?0:y),p=t._private.rscratch,m=c(t,"background-clip","value",n),x=m==="node",T=c(t,"background-image-opacity","value",n)*i,P=c(t,"background-image-smoothing","value",n),C=t.pstyle("corner-radius").value;C!=="auto"&&(C=t.pstyle("corner-radius").pfValue);var R=e.width||e.cachedW,D=e.height||e.cachedH;(R==null||D==null)&&(document.body.appendChild(e),R=e.cachedW=e.width||e.offsetWidth,D=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var N=R,j=D;if(c(t,"background-width","value",n)!=="auto"&&(c(t,"background-width","units",n)==="%"?N=c(t,"background-width","pfValue",n)*w:N=c(t,"background-width","pfValue",n)),c(t,"background-height","value",n)!=="auto"&&(c(t,"background-height","units",n)==="%"?j=c(t,"background-height","pfValue",n)*b:j=c(t,"background-height","pfValue",n)),!(N===0||j===0)){if(f==="contain"){var B=Math.min(w/N,b/j);N*=B,j*=B}else if(f==="cover"){var B=Math.max(w/N,b/j);N*=B,j*=B}var z=s-w/2,W=c(t,"background-position-x","units",n),Z=c(t,"background-position-x","pfValue",n);W==="%"?z+=(w-N)*Z:z+=Z;var Q=c(t,"background-offset-x","units",n),re=c(t,"background-offset-x","pfValue",n);Q==="%"?z+=(w-N)*re:z+=re;var ee=u-b/2,ue=c(t,"background-position-y","units",n),de=c(t,"background-position-y","pfValue",n);ue==="%"?ee+=(b-j)*de:ee+=de;var se=c(t,"background-offset-y","units",n),me=c(t,"background-offset-y","pfValue",n);se==="%"?ee+=(b-j)*me:ee+=me,p.pathCache&&(z-=s,ee-=u,s=0,u=0);var Me=r.globalAlpha;r.globalAlpha=T;var he=a.getImgSmoothing(r),fe=!1;if(P==="no"&&he?(a.setImgSmoothing(r,!1),fe=!0):P==="yes"&&!he&&(a.setImgSmoothing(r,!0),fe=!0),h==="no-repeat")x&&(r.save(),p.pathCache?r.clip(p.pathCache):(a.nodeShapes[a.getNodeShape(t)].draw(r,s,u,w,b,C,p),r.clip())),a.safeDrawImage(r,e,0,0,R,D,z,ee,N,j),x&&r.restore();else{var Ee=r.createPattern(e,h);r.fillStyle=Ee,a.nodeShapes[a.getNodeShape(t)].draw(r,s,u,w,b,C,p),r.translate(z,ee),r.fill(),r.translate(-z,-ee)}r.globalAlpha=Me,fe&&a.setImgSmoothing(r,he)}};var Gv={};Gv.eleTextBiggerThanMin=function(r,e){if(!e){var t=r.cy().zoom(),n=this.getPixelRatio(),i=Math.ceil(e1(t*n));e=Math.pow(2,i)}var a=r.pstyle("font-size").pfValue*e,o=r.pstyle("min-zoomed-font-size").pfValue;return!(a<o)};Gv.drawElementText=function(r,e,t,n,i){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this;if(n==null){if(a&&!o.eleTextBiggerThanMin(e))return}else if(n===!1)return;if(e.isNode()){var s=e.pstyle("label");if(!s||!s.value)return;var u=o.getLabelJustification(e);r.textAlign=u,r.textBaseline="bottom"}else{var l=e.element()._private.rscratch.badLine,c=e.pstyle("label"),f=e.pstyle("source-label"),h=e.pstyle("target-label");if(l||(!c||!c.value)&&(!f||!f.value)&&(!h||!h.value))return;r.textAlign="center",r.textBaseline="bottom"}var d=!t,v;t&&(v=t,r.translate(-v.x1,-v.y1)),i==null?(o.drawText(r,e,null,d,a),e.isEdge()&&(o.drawText(r,e,"source",d,a),o.drawText(r,e,"target",d,a))):o.drawText(r,e,i,d,a),t&&r.translate(v.x1,v.y1)};Gv.getFontCache=function(r){var e;this.fontCaches=this.fontCaches||[];for(var t=0;t<this.fontCaches.length;t++)if(e=this.fontCaches[t],e.context===r)return e;return e={context:r},this.fontCaches.push(e),e};Gv.setupTextStyle=function(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=e.pstyle("font-style").strValue,i=e.pstyle("font-size").pfValue+"px",a=e.pstyle("font-family").strValue,o=e.pstyle("font-weight").strValue,s=t?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,u=e.pstyle("text-outline-opacity").value*s,l=e.pstyle("color").value,c=e.pstyle("text-outline-color").value;r.font=n+" "+o+" "+i+" "+a,r.lineJoin="round",this.colorFillStyle(r,l[0],l[1],l[2],s),this.colorStrokeStyle(r,c[0],c[1],c[2],u)};function E_(r,e,t,n,i){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,o=arguments.length>6?arguments[6]:void 0;r.beginPath(),r.moveTo(e+a,t),r.lineTo(e+n-a,t),r.quadraticCurveTo(e+n,t,e+n,t+a),r.lineTo(e+n,t+i-a),r.quadraticCurveTo(e+n,t+i,e+n-a,t+i),r.lineTo(e+a,t+i),r.quadraticCurveTo(e,t+i,e,t+i-a),r.lineTo(e,t+a),r.quadraticCurveTo(e,t,e+a,t),r.closePath(),o?r.stroke():r.fill()}Gv.getTextAngle=function(r,e){var t,n=r._private,i=n.rscratch,a=e?e+"-":"",o=r.pstyle(a+"text-rotation");if(o.strValue==="autorotate"){var s=Fs(i,"labelAngle",e);t=r.isEdge()?s:0}else o.strValue==="none"?t=0:t=o.pfValue;return t};Gv.drawText=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=e._private,o=a.rscratch,s=i?e.effectiveOpacity():1;if(!(i&&(s===0||e.pstyle("text-opacity").value===0))){t==="main"&&(t=null);var u=Fs(o,"labelX",t),l=Fs(o,"labelY",t),c,f,h=this.getLabelText(e,t);if(h!=null&&h!==""&&!isNaN(u)&&!isNaN(l)){this.setupTextStyle(r,e,i);var d=t?t+"-":"",v=Fs(o,"labelWidth",t),y=Fs(o,"labelHeight",t),w=e.pstyle(d+"text-margin-x").pfValue,b=e.pstyle(d+"text-margin-y").pfValue,p=e.isEdge(),m=e.pstyle("text-halign").value,x=e.pstyle("text-valign").value;p&&(m="center",x="center"),u+=w,l+=b;var T;switch(n?T=this.getTextAngle(e,t):T=0,T!==0&&(c=u,f=l,r.translate(c,f),r.rotate(T),u=0,l=0),x){case"top":break;case"center":l+=y/2;break;case"bottom":l+=y;break}var P=e.pstyle("text-background-opacity").value,C=e.pstyle("text-border-opacity").value,R=e.pstyle("text-border-width").pfValue,D=e.pstyle("text-background-padding").pfValue,N=e.pstyle("text-background-shape").strValue,j=N.indexOf("round")===0,B=2;if(P>0||R>0&&C>0){var z=u-D;switch(m){case"left":z-=v;break;case"center":z-=v/2;break}var W=l-y-D,Z=v+2*D,Q=y+2*D;if(P>0){var re=r.fillStyle,ee=e.pstyle("text-background-color").value;r.fillStyle="rgba("+ee[0]+","+ee[1]+","+ee[2]+","+P*s+")",j?E_(r,z,W,Z,Q,B):r.fillRect(z,W,Z,Q),r.fillStyle=re}if(R>0&&C>0){var ue=r.strokeStyle,de=r.lineWidth,se=e.pstyle("text-border-color").value,me=e.pstyle("text-border-style").value;if(r.strokeStyle="rgba("+se[0]+","+se[1]+","+se[2]+","+C*s+")",r.lineWidth=R,r.setLineDash)switch(me){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash([4,2]);break;case"double":r.lineWidth=R/4,r.setLineDash([]);break;case"solid":r.setLineDash([]);break}if(j?E_(r,z,W,Z,Q,B,"stroke"):r.strokeRect(z,W,Z,Q),me==="double"){var Me=R/2;j?E_(r,z+Me,W+Me,Z-Me*2,Q-Me*2,B,"stroke"):r.strokeRect(z+Me,W+Me,Z-Me*2,Q-Me*2)}r.setLineDash&&r.setLineDash([]),r.lineWidth=de,r.strokeStyle=ue}}var he=2*e.pstyle("text-outline-width").pfValue;if(he>0&&(r.lineWidth=he),e.pstyle("text-wrap").value==="wrap"){var fe=Fs(o,"labelWrapCachedLines",t),Ee=Fs(o,"labelLineHeight",t),Ce=v/2,ke=this.getLabelJustification(e);switch(ke==="auto"||(m==="left"?ke==="left"?u+=-v:ke==="center"&&(u+=-Ce):m==="center"?ke==="left"?u+=-Ce:ke==="right"&&(u+=Ce):m==="right"&&(ke==="center"?u+=Ce:ke==="right"&&(u+=v))),x){case"top":l-=(fe.length-1)*Ee;break;case"center":case"bottom":l-=(fe.length-1)*Ee;break}for(var Re=0;Re<fe.length;Re++)he>0&&r.strokeText(fe[Re],u,l),r.fillText(fe[Re],u,l),l+=Ee}else he>0&&r.strokeText(h,u,l),r.fillText(h,u,l);T!==0&&(r.rotate(-T),r.translate(-c,-f))}}};var gd={};gd.drawNode=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,s,u,l=e._private,c=l.rscratch,f=e.position();if(!(!Gt(f.x)||!Gt(f.y))&&!(a&&!e.visible())){var h=a?e.effectiveOpacity():1,d=o.usePaths(),v,y=!1,w=e.padding();s=e.width()+2*w,u=e.height()+2*w;var b;t&&(b=t,r.translate(-b.x1,-b.y1));for(var p=e.pstyle("background-image"),m=p.value,x=new Array(m.length),T=new Array(m.length),P=0,C=0;C<m.length;C++){var R=m[C],D=x[C]=R!=null&&R!=="none";if(D){var N=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",C);P++,T[C]=o.getCachedImage(R,N,function(){l.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var j=e.pstyle("background-blacken").value,B=e.pstyle("border-width").pfValue,z=e.pstyle("background-opacity").value*h,W=e.pstyle("border-color").value,Z=e.pstyle("border-style").value,Q=e.pstyle("border-join").value,re=e.pstyle("border-cap").value,ee=e.pstyle("border-position").value,ue=e.pstyle("border-dash-pattern").pfValue,de=e.pstyle("border-dash-offset").pfValue,se=e.pstyle("border-opacity").value*h,me=e.pstyle("outline-width").pfValue,Me=e.pstyle("outline-color").value,he=e.pstyle("outline-style").value,fe=e.pstyle("outline-opacity").value*h,Ee=e.pstyle("outline-offset").value,Ce=e.pstyle("corner-radius").value;Ce!=="auto"&&(Ce=e.pstyle("corner-radius").pfValue);var ke=function(){var Yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:z;o.eleFillStyle(r,e,Yt)},Re=function(){var Yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:se;o.colorStrokeStyle(r,W[0],W[1],W[2],Yt)},ve=function(){var Yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:fe;o.colorStrokeStyle(r,Me[0],Me[1],Me[2],Yt)},we=function(Yt,dt,be,it){var st=o.nodePathCache=o.nodePathCache||[],ut=GS(be==="polygon"?be+","+it.join(","):be,""+dt,""+Yt,""+Ce),lt=st[ut],Xt,pt=!1;return lt!=null?(Xt=lt,pt=!0,c.pathCache=Xt):(Xt=new Path2D,st[ut]=c.pathCache=Xt),{path:Xt,cacheHit:pt}},Oe=e.pstyle("shape").strValue,Be=e.pstyle("shape-polygon-points").pfValue;if(d){r.translate(f.x,f.y);var Ye=we(s,u,Oe,Be);v=Ye.path,y=Ye.cacheHit}var ht=function(){if(!y){var Yt=f;d&&(Yt={x:0,y:0}),o.nodeShapes[o.getNodeShape(e)].draw(v||r,Yt.x,Yt.y,s,u,Ce,c)}d?r.fill(v):r.fill()},Ct=function(){for(var Yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h,dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,be=l.backgrounding,it=0,st=0;st<T.length;st++){var ut=e.cy().style().getIndexedStyle(e,"background-image-containment","value",st);if(dt&&ut==="over"||!dt&&ut==="inside"){it++;continue}x[st]&&T[st].complete&&!T[st].error&&(it++,o.drawInscribedImage(r,T[st],e,st,Yt))}l.backgrounding=it!==P,be!==l.backgrounding&&e.updateStyle(!1)},ct=function(){var Yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h;o.hasPie(e)&&(o.drawPie(r,e,dt),Yt&&(d||o.nodeShapes[o.getNodeShape(e)].draw(r,f.x,f.y,s,u,Ce,c)))},H=function(){var Yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h;o.hasStripe(e)&&(r.save(),d?r.clip(c.pathCache):(o.nodeShapes[o.getNodeShape(e)].draw(r,f.x,f.y,s,u,Ce,c),r.clip()),o.drawStripe(r,e,dt),r.restore(),Yt&&(d||o.nodeShapes[o.getNodeShape(e)].draw(r,f.x,f.y,s,u,Ce,c)))},$=function(){var Yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h,dt=(j>0?j:-j)*Yt,be=j>0?0:255;j!==0&&(o.colorFillStyle(r,be,be,be,dt),d?r.fill(v):r.fill())},ne=function(){if(B>0){if(r.lineWidth=B,r.lineCap=re,r.lineJoin=Q,r.setLineDash)switch(Z){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash(ue),r.lineDashOffset=de;break;case"solid":case"double":r.setLineDash([]);break}if(ee!=="center"){if(r.save(),r.lineWidth*=2,ee==="inside")d?r.clip(v):r.clip();else{var Yt=new Path2D;Yt.rect(-s/2-B,-u/2-B,s+2*B,u+2*B),Yt.addPath(v),r.clip(Yt,"evenodd")}d?r.stroke(v):r.stroke(),r.restore()}else d?r.stroke(v):r.stroke();if(Z==="double"){r.lineWidth=B/3;var dt=r.globalCompositeOperation;r.globalCompositeOperation="destination-out",d?r.stroke(v):r.stroke(),r.globalCompositeOperation=dt}r.setLineDash&&r.setLineDash([])}},Ie=function(){if(me>0){if(r.lineWidth=me,r.lineCap="butt",r.setLineDash)switch(he){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash([4,2]);break;case"solid":case"double":r.setLineDash([]);break}var Yt=f;d&&(Yt={x:0,y:0});var dt=o.getNodeShape(e),be=B;ee==="inside"&&(be=0),ee==="outside"&&(be*=2);var it=(s+be+(me+Ee))/s,st=(u+be+(me+Ee))/u,ut=s*it,lt=u*st,Xt=o.nodeShapes[dt].points,pt;if(d){var Qt=we(ut,lt,dt,Xt);pt=Qt.path}if(dt==="ellipse")o.drawEllipsePath(pt||r,Yt.x,Yt.y,ut,lt);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(dt)){var mr=0,Rr=0,ar=0;dt==="round-diamond"?mr=(be+Ee+me)*1.4:dt==="round-heptagon"?(mr=(be+Ee+me)*1.075,ar=-(be/2+Ee+me)/35):dt==="round-hexagon"?mr=(be+Ee+me)*1.12:dt==="round-pentagon"?(mr=(be+Ee+me)*1.13,ar=-(be/2+Ee+me)/15):dt==="round-tag"?(mr=(be+Ee+me)*1.12,Rr=(be/2+me+Ee)*.07):dt==="round-triangle"&&(mr=(be+Ee+me)*(Math.PI/2),ar=-(be+Ee/2+me)/Math.PI),mr!==0&&(it=(s+mr)/s,ut=s*it,["round-hexagon","round-tag"].includes(dt)||(st=(u+mr)/u,lt=u*st)),Ce=Ce==="auto"?ZS(ut,lt):Ce;for(var nr=ut/2,tr=lt/2,lr=Ce+(be+me+Ee)/2,Vr=new Array(Xt.length/2),fn=new Array(Xt.length/2),In=0;In<Xt.length/2;In++)Vr[In]={x:Yt.x+Rr+nr*Xt[In*2],y:Yt.y+ar+tr*Xt[In*2+1]};var Un,hn,Kn,vn,Ei=Vr.length;for(hn=Vr[Ei-1],Un=0;Un<Ei;Un++)Kn=Vr[Un%Ei],vn=Vr[(Un+1)%Ei],fn[Un]=v1(hn,Kn,vn,lr),hn=Kn,Kn=vn;o.drawRoundPolygonPath(pt||r,Yt.x+Rr,Yt.y+ar,s*it,u*st,Xt,fn)}else if(["roundrectangle","round-rectangle"].includes(dt))Ce=Ce==="auto"?sd(ut,lt):Ce,o.drawRoundRectanglePath(pt||r,Yt.x,Yt.y,ut,lt,Ce+(be+me+Ee)/2);else if(["cutrectangle","cut-rectangle"].includes(dt))Ce=Ce==="auto"?n1():Ce,o.drawCutRectanglePath(pt||r,Yt.x,Yt.y,ut,lt,null,Ce+(be+me+Ee)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(dt))Ce=Ce==="auto"?sd(ut,lt):Ce,o.drawBottomRoundRectanglePath(pt||r,Yt.x,Yt.y,ut,lt,Ce+(be+me+Ee)/2);else if(dt==="barrel")o.drawBarrelPath(pt||r,Yt.x,Yt.y,ut,lt);else if(dt.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(dt)){var Li=(be+me+Ee)/s;Xt=Gm(Vm(Xt,Li)),o.drawPolygonPath(pt||r,Yt.x,Yt.y,s,u,Xt)}else{var Br=(be+me+Ee)/s;Xt=Gm(Vm(Xt,-Br)),o.drawPolygonPath(pt||r,Yt.x,Yt.y,s,u,Xt)}if(d?r.stroke(pt):r.stroke(),he==="double"){r.lineWidth=be/3;var Tn=r.globalCompositeOperation;r.globalCompositeOperation="destination-out",d?r.stroke(pt):r.stroke(),r.globalCompositeOperation=Tn}r.setLineDash&&r.setLineDash([])}},Le=function(){i&&o.drawNodeOverlay(r,e,f,s,u)},ze=function(){i&&o.drawNodeUnderlay(r,e,f,s,u)},Je=function(){o.drawElementText(r,e,null,n)},Pt=e.pstyle("ghost").value==="yes";if(Pt){var Lt=e.pstyle("ghost-offset-x").pfValue,Wt=e.pstyle("ghost-offset-y").pfValue,Bt=e.pstyle("ghost-opacity").value,er=Bt*h;r.translate(Lt,Wt),ve(),Ie(),ke(Bt*z),ht(),Ct(er,!0),Re(Bt*se),ne(),ct(j!==0||B!==0),H(j!==0||B!==0),Ct(er,!1),$(er),r.translate(-Lt,-Wt)}d&&r.translate(-f.x,-f.y),ze(),d&&r.translate(f.x,f.y),ve(),Ie(),ke(),ht(),Ct(h,!0),Re(),ne(),ct(j!==0||B!==0),H(j!==0||B!==0),Ct(h,!1),$(),d&&r.translate(-f.x,-f.y),Je(),Le(),t&&r.translate(b.x1,b.y1)}};var r2=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n,i,a,o){var s=this;if(n.visible()){var u=n.pstyle("".concat(e,"-padding")).pfValue,l=n.pstyle("".concat(e,"-opacity")).value,c=n.pstyle("".concat(e,"-color")).value,f=n.pstyle("".concat(e,"-shape")).value,h=n.pstyle("".concat(e,"-corner-radius")).value;if(l>0){if(i=i||n.position(),a==null||o==null){var d=n.padding();a=n.width()+2*d,o=n.height()+2*d}s.colorFillStyle(t,c[0],c[1],c[2],l),s.nodeShapes[f].draw(t,i.x,i.y,a+u*2,o+u*2,h),t.fill()}}}};gd.drawNodeOverlay=r2("overlay");gd.drawNodeUnderlay=r2("underlay");gd.hasPie=function(r){return r=r[0],r._private.hasPie};gd.hasStripe=function(r){return r=r[0],r._private.hasStripe};gd.drawPie=function(r,e,t,n){e=e[0],n=n||e.position();var i=e.cy().style(),a=e.pstyle("pie-size"),o=e.pstyle("pie-hole"),s=e.pstyle("pie-start-angle").pfValue,u=n.x,l=n.y,c=e.width(),f=e.height(),h=Math.min(c,f)/2,d,v=0,y=this.usePaths();if(y&&(u=0,l=0),a.units==="%"?h=h*a.pfValue:a.pfValue!==void 0&&(h=a.pfValue/2),o.units==="%"?d=h*o.pfValue:o.pfValue!==void 0&&(d=o.pfValue/2),!(d>=h))for(var w=1;w<=i.pieBackgroundN;w++){var b=e.pstyle("pie-"+w+"-background-size").value,p=e.pstyle("pie-"+w+"-background-color").value,m=e.pstyle("pie-"+w+"-background-opacity").value*t,x=b/100;x+v>1&&(x=1-v);var T=1.5*Math.PI+2*Math.PI*v;T+=s;var P=2*Math.PI*x,C=T+P;b===0||v>=1||v+x>1||(d===0?(r.beginPath(),r.moveTo(u,l),r.arc(u,l,h,T,C),r.closePath()):(r.beginPath(),r.arc(u,l,h,T,C),r.arc(u,l,d,C,T,!0),r.closePath()),this.colorFillStyle(r,p[0],p[1],p[2],m),r.fill(),v+=x)}};gd.drawStripe=function(r,e,t,n){e=e[0],n=n||e.position();var i=e.cy().style(),a=n.x,o=n.y,s=e.width(),u=e.height(),l=0,c=this.usePaths();r.save();var f=e.pstyle("stripe-direction").value,h=e.pstyle("stripe-size");switch(f){case"vertical":break;case"righward":r.rotate(-Math.PI/2);break}var d=s,v=u;h.units==="%"?(d=d*h.pfValue,v=v*h.pfValue):h.pfValue!==void 0&&(d=h.pfValue,v=h.pfValue),c&&(a=0,o=0),o-=d/2,a-=v/2;for(var y=1;y<=i.stripeBackgroundN;y++){var w=e.pstyle("stripe-"+y+"-background-size").value,b=e.pstyle("stripe-"+y+"-background-color").value,p=e.pstyle("stripe-"+y+"-background-opacity").value*t,m=w/100;m+l>1&&(m=1-l),!(w===0||l>=1||l+m>1)&&(r.beginPath(),r.rect(a,o+v*l,d,v*m),r.closePath(),this.colorFillStyle(r,b[0],b[1],b[2],p),r.fill(),l+=m)}r.restore()};var bs={},PD=100;bs.getPixelRatio=function(){var r=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=this.cy.window(),t=r.backingStorePixelRatio||r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1;return(e.devicePixelRatio||1)/t};bs.paintCache=function(r){for(var e=this.paintCaches=this.paintCaches||[],t=!0,n,i=0;i<e.length;i++)if(n=e[i],n.context===r){t=!1;break}return t&&(n={context:r},e.push(n)),n};bs.createGradientStyleFor=function(r,e,t,n,i){var a,o=this.usePaths(),s=t.pstyle(e+"-gradient-stop-colors").value,u=t.pstyle(e+"-gradient-stop-positions").pfValue;if(n==="radial-gradient")if(t.isEdge()){var l=t.sourceEndpoint(),c=t.targetEndpoint(),f=t.midpoint(),h=Nv(l,f),d=Nv(c,f);a=r.createRadialGradient(f.x,f.y,0,f.x,f.y,Math.max(h,d))}else{var v=o?{x:0,y:0}:t.position(),y=t.paddedWidth(),w=t.paddedHeight();a=r.createRadialGradient(v.x,v.y,0,v.x,v.y,Math.max(y,w))}else if(t.isEdge()){var b=t.sourceEndpoint(),p=t.targetEndpoint();a=r.createLinearGradient(b.x,b.y,p.x,p.y)}else{var m=o?{x:0,y:0}:t.position(),x=t.paddedWidth(),T=t.paddedHeight(),P=x/2,C=T/2,R=t.pstyle("background-gradient-direction").value;switch(R){case"to-bottom":a=r.createLinearGradient(m.x,m.y-C,m.x,m.y+C);break;case"to-top":a=r.createLinearGradient(m.x,m.y+C,m.x,m.y-C);break;case"to-left":a=r.createLinearGradient(m.x+P,m.y,m.x-P,m.y);break;case"to-right":a=r.createLinearGradient(m.x-P,m.y,m.x+P,m.y);break;case"to-bottom-right":case"to-right-bottom":a=r.createLinearGradient(m.x-P,m.y-C,m.x+P,m.y+C);break;case"to-top-right":case"to-right-top":a=r.createLinearGradient(m.x-P,m.y+C,m.x+P,m.y-C);break;case"to-bottom-left":case"to-left-bottom":a=r.createLinearGradient(m.x+P,m.y-C,m.x-P,m.y+C);break;case"to-top-left":case"to-left-top":a=r.createLinearGradient(m.x+P,m.y+C,m.x-P,m.y-C);break}}if(!a)return null;for(var D=u.length===s.length,N=s.length,j=0;j<N;j++)a.addColorStop(D?u[j]:j/(N-1),"rgba("+s[j][0]+","+s[j][1]+","+s[j][2]+","+i+")");return a};bs.gradientFillStyle=function(r,e,t,n){var i=this.createGradientStyleFor(r,"background",e,t,n);if(!i)return null;r.fillStyle=i};bs.colorFillStyle=function(r,e,t,n,i){r.fillStyle="rgba("+e+","+t+","+n+","+i+")"};bs.eleFillStyle=function(r,e,t){var n=e.pstyle("background-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientFillStyle(r,e,n,t);else{var i=e.pstyle("background-color").value;this.colorFillStyle(r,i[0],i[1],i[2],t)}};bs.gradientStrokeStyle=function(r,e,t,n){var i=this.createGradientStyleFor(r,"line",e,t,n);if(!i)return null;r.strokeStyle=i};bs.colorStrokeStyle=function(r,e,t,n,i){r.strokeStyle="rgba("+e+","+t+","+n+","+i+")"};bs.eleStrokeStyle=function(r,e,t){var n=e.pstyle("line-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientStrokeStyle(r,e,n,t);else{var i=e.pstyle("line-color").value;this.colorStrokeStyle(r,i[0],i[1],i[2],t)}};bs.matchCanvasSize=function(r){var e=this,t=e.data,n=e.findContainerClientCoords(),i=n[2],a=n[3],o=e.getPixelRatio(),s=e.motionBlurPxRatio;(r===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||r===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(o=s);var u=i*o,l=a*o,c;if(!(u===e.canvasWidth&&l===e.canvasHeight)){e.fontCaches=null;var f=t.canvasContainer;f.style.width=i+"px",f.style.height=a+"px";for(var h=0;h<e.CANVAS_LAYERS;h++)c=t.canvases[h],c.width=u,c.height=l,c.style.width=i+"px",c.style.height=a+"px";for(var h=0;h<e.BUFFER_COUNT;h++)c=t.bufferCanvases[h],c.width=u,c.height=l,c.style.width=i+"px",c.style.height=a+"px";e.textureMult=1,o<=1&&(c=t.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,c.width=u*e.textureMult,c.height=l*e.textureMult),e.canvasWidth=u,e.canvasHeight=l,e.pixelRatio=o}};bs.renderTo=function(r,e,t,n){this.render({forcedContext:r,forcedZoom:e,forcedPan:t,drawAllLayers:!0,forcedPxRatio:n})};bs.clearCanvas=function(){var r=this,e=r.data;function t(n){n.clearRect(0,0,r.canvasWidth,r.canvasHeight)}t(e.contexts[r.NODE]),t(e.contexts[r.DRAG])};bs.render=function(r){var e=this;r=r||HS();var t=e.cy,n=r.forcedContext,i=r.drawAllLayers,a=r.drawOnlyNodeLayer,o=r.forcedZoom,s=r.forcedPan,u=r.forcedPxRatio===void 0?this.getPixelRatio():r.forcedPxRatio,l=e.data,c=l.canvasNeedsRedraw,f=e.textureOnViewport&&!n&&(e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming),h=r.motionBlur!==void 0?r.motionBlur:e.motionBlur,d=e.motionBlurPxRatio,v=t.hasCompoundNodes(),y=e.hoverData.draggingEles,w=!!(e.hoverData.selecting||e.touchData.selecting);h=h&&!n&&e.motionBlurEnabled&&!w;var b=h;n||(e.prevPxRatio!==u&&(e.invalidateContainerClientCoordsCache(),e.matchCanvasSize(e.container),e.redrawHint("eles",!0),e.redrawHint("drag",!0)),e.prevPxRatio=u),!n&&e.motionBlurTimeout&&clearTimeout(e.motionBlurTimeout),h&&(e.mbFrames==null&&(e.mbFrames=0),e.mbFrames++,e.mbFrames<3&&(b=!1),e.mbFrames>e.minMbLowQualFrames&&(e.motionBlurPxRatio=e.mbPxRBlurry)),e.clearingMotionBlur&&(e.motionBlurPxRatio=1),e.textureDrawLastFrame&&!f&&(c[e.NODE]=!0,c[e.SELECT_BOX]=!0);var p=t.style(),m=t.zoom(),x=o!==void 0?o:m,T=t.pan(),P={x:T.x,y:T.y},C={zoom:m,pan:{x:T.x,y:T.y}},R=e.prevViewport,D=R===void 0||C.zoom!==R.zoom||C.pan.x!==R.pan.x||C.pan.y!==R.pan.y;!D&&!(y&&!v)&&(e.motionBlurPxRatio=1),s&&(P=s),x*=u,P.x*=u,P.y*=u;var N=e.getCachedZSortedEles();function j(Re,ve,we,Oe,Be){var Ye=Re.globalCompositeOperation;Re.globalCompositeOperation="destination-out",e.colorFillStyle(Re,255,255,255,e.motionBlurTransparency),Re.fillRect(ve,we,Oe,Be),Re.globalCompositeOperation=Ye}function B(Re,ve){var we,Oe,Be,Ye;!e.clearingMotionBlur&&(Re===l.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]||Re===l.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG])?(we={x:T.x*d,y:T.y*d},Oe=m*d,Be=e.canvasWidth*d,Ye=e.canvasHeight*d):(we=P,Oe=x,Be=e.canvasWidth,Ye=e.canvasHeight),Re.setTransform(1,0,0,1,0,0),ve==="motionBlur"?j(Re,0,0,Be,Ye):!n&&(ve===void 0||ve)&&Re.clearRect(0,0,Be,Ye),i||(Re.translate(we.x,we.y),Re.scale(Oe,Oe)),s&&Re.translate(s.x,s.y),o&&Re.scale(o,o)}if(f||(e.textureDrawLastFrame=!1),f){if(e.textureDrawLastFrame=!0,!e.textureCache){e.textureCache={},e.textureCache.bb=t.mutableElements().boundingBox(),e.textureCache.texture=e.data.bufferCanvases[e.TEXTURE_BUFFER];var z=e.data.bufferContexts[e.TEXTURE_BUFFER];z.setTransform(1,0,0,1,0,0),z.clearRect(0,0,e.canvasWidth*e.textureMult,e.canvasHeight*e.textureMult),e.render({forcedContext:z,drawOnlyNodeLayer:!0,forcedPxRatio:u*e.textureMult});var C=e.textureCache.viewport={zoom:t.zoom(),pan:t.pan(),width:e.canvasWidth,height:e.canvasHeight};C.mpan={x:(0-C.pan.x)/C.zoom,y:(0-C.pan.y)/C.zoom}}c[e.DRAG]=!1,c[e.NODE]=!1;var W=l.contexts[e.NODE],Z=e.textureCache.texture,C=e.textureCache.viewport;W.setTransform(1,0,0,1,0,0),h?j(W,0,0,C.width,C.height):W.clearRect(0,0,C.width,C.height);var Q=p.core("outside-texture-bg-color").value,re=p.core("outside-texture-bg-opacity").value;e.colorFillStyle(W,Q[0],Q[1],Q[2],re),W.fillRect(0,0,C.width,C.height);var m=t.zoom();B(W,!1),W.clearRect(C.mpan.x,C.mpan.y,C.width/C.zoom/u,C.height/C.zoom/u),W.drawImage(Z,C.mpan.x,C.mpan.y,C.width/C.zoom/u,C.height/C.zoom/u)}else e.textureOnViewport&&!n&&(e.textureCache=null);var ee=t.extent(),ue=e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming||e.hoverData.draggingEles||e.cy.animated(),de=e.hideEdgesOnViewport&&ue,se=[];if(se[e.NODE]=!c[e.NODE]&&h&&!e.clearedForMotionBlur[e.NODE]||e.clearingMotionBlur,se[e.NODE]&&(e.clearedForMotionBlur[e.NODE]=!0),se[e.DRAG]=!c[e.DRAG]&&h&&!e.clearedForMotionBlur[e.DRAG]||e.clearingMotionBlur,se[e.DRAG]&&(e.clearedForMotionBlur[e.DRAG]=!0),c[e.NODE]||i||a||se[e.NODE]){var me=h&&!se[e.NODE]&&d!==1,W=n||(me?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]:l.contexts[e.NODE]),Me=h&&!me?"motionBlur":void 0;B(W,Me),de?e.drawCachedNodes(W,N.nondrag,u,ee):e.drawLayeredElements(W,N.nondrag,u,ee),e.debug&&e.drawDebugPoints(W,N.nondrag),!i&&!h&&(c[e.NODE]=!1)}if(!a&&(c[e.DRAG]||i||se[e.DRAG])){var me=h&&!se[e.DRAG]&&d!==1,W=n||(me?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG]:l.contexts[e.DRAG]);B(W,h&&!me?"motionBlur":void 0),de?e.drawCachedNodes(W,N.drag,u,ee):e.drawCachedElements(W,N.drag,u,ee),e.debug&&e.drawDebugPoints(W,N.drag),!i&&!h&&(c[e.DRAG]=!1)}if(this.drawSelectionRectangle(r,B),h&&d!==1){var he=l.contexts[e.NODE],fe=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE],Ee=l.contexts[e.DRAG],Ce=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG],ke=function(ve,we,Oe){ve.setTransform(1,0,0,1,0,0),Oe||!b?ve.clearRect(0,0,e.canvasWidth,e.canvasHeight):j(ve,0,0,e.canvasWidth,e.canvasHeight);var Be=d;ve.drawImage(we,0,0,e.canvasWidth*Be,e.canvasHeight*Be,0,0,e.canvasWidth,e.canvasHeight)};(c[e.NODE]||se[e.NODE])&&(ke(he,fe,se[e.NODE]),c[e.NODE]=!1),(c[e.DRAG]||se[e.DRAG])&&(ke(Ee,Ce,se[e.DRAG]),c[e.DRAG]=!1)}e.prevViewport=C,e.clearingMotionBlur&&(e.clearingMotionBlur=!1,e.motionBlurCleared=!0,e.motionBlur=!0),h&&(e.motionBlurTimeout=setTimeout(function(){e.motionBlurTimeout=null,e.clearedForMotionBlur[e.NODE]=!1,e.clearedForMotionBlur[e.DRAG]=!1,e.motionBlur=!1,e.clearingMotionBlur=!f,e.mbFrames=0,c[e.NODE]=!0,c[e.DRAG]=!0,e.redraw()},PD)),n||t.emit("render")};var zg;bs.drawSelectionRectangle=function(r,e){var t=this,n=t.cy,i=t.data,a=n.style(),o=r.drawOnlyNodeLayer,s=r.drawAllLayers,u=i.canvasNeedsRedraw,l=r.forcedContext;if(t.showFps||!o&&u[t.SELECT_BOX]&&!s){var c=l||i.contexts[t.SELECT_BOX];if(e(c),t.selection[4]==1&&(t.hoverData.selecting||t.touchData.selecting)){var f=t.cy.zoom(),h=a.core("selection-box-border-width").value/f;c.lineWidth=h,c.fillStyle="rgba("+a.core("selection-box-color").value[0]+","+a.core("selection-box-color").value[1]+","+a.core("selection-box-color").value[2]+","+a.core("selection-box-opacity").value+")",c.fillRect(t.selection[0],t.selection[1],t.selection[2]-t.selection[0],t.selection[3]-t.selection[1]),h>0&&(c.strokeStyle="rgba("+a.core("selection-box-border-color").value[0]+","+a.core("selection-box-border-color").value[1]+","+a.core("selection-box-border-color").value[2]+","+a.core("selection-box-opacity").value+")",c.strokeRect(t.selection[0],t.selection[1],t.selection[2]-t.selection[0],t.selection[3]-t.selection[1]))}if(i.bgActivePosistion&&!t.hoverData.selecting){var f=t.cy.zoom(),d=i.bgActivePosistion;c.fillStyle="rgba("+a.core("active-bg-color").value[0]+","+a.core("active-bg-color").value[1]+","+a.core("active-bg-color").value[2]+","+a.core("active-bg-opacity").value+")",c.beginPath(),c.arc(d.x,d.y,a.core("active-bg-size").pfValue/f,0,2*Math.PI),c.fill()}var v=t.lastRedrawTime;if(t.showFps&&v){v=Math.round(v);var y=Math.round(1e3/v),w="1 frame = "+v+" ms = "+y+" fps";if(c.setTransform(1,0,0,1,0,0),c.fillStyle="rgba(255, 0, 0, 0.75)",c.strokeStyle="rgba(255, 0, 0, 0.75)",c.font="30px Arial",!zg){var b=c.measureText(w);zg=b.actualBoundingBoxAscent}c.fillText(w,0,zg);var p=60;c.strokeRect(0,zg+10,250,20),c.fillRect(0,zg+10,250*Math.min(y/p,1),20)}s||(u[t.SELECT_BOX]=!1)}};function Jx(r,e,t){var n=r.createShader(e);if(r.shaderSource(n,t),r.compileShader(n),!r.getShaderParameter(n,r.COMPILE_STATUS))throw new Error(r.getShaderInfoLog(n));return n}function AD(r,e,t){var n=Jx(r,r.VERTEX_SHADER,e),i=Jx(r,r.FRAGMENT_SHADER,t),a=r.createProgram();if(r.attachShader(a,n),r.attachShader(a,i),r.linkProgram(a),!r.getProgramParameter(a,r.LINK_STATUS))throw new Error("Could not initialize shaders");return a}function RD(r,e,t){t===void 0&&(t=e);var n=r.makeOffscreenCanvas(e,t),i=n.context=n.getContext("2d");return n.clear=function(){return i.clearRect(0,0,n.width,n.height)},n.clear(),n}function y1(r){var e=r.pixelRatio,t=r.cy.zoom(),n=r.cy.pan();return{zoom:t*e,pan:{x:n.x*e,y:n.y*e}}}function ID(r){var e=r.pixelRatio,t=r.cy.zoom();return t*e}function kD(r,e,t,n,i){var a=n*t+e.x,o=i*t+e.y;return o=Math.round(r.canvasHeight-o),[a,o]}function DD(r){return r.pstyle("background-fill").value!=="solid"||r.pstyle("background-image").strValue!=="none"?!1:r.pstyle("border-width").value===0||r.pstyle("border-opacity").value===0?!0:r.pstyle("border-style").value==="solid"}function MD(r,e){if(r.length!==e.length)return!1;for(var t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}function gv(r,e,t){var n=r[0]/255,i=r[1]/255,a=r[2]/255,o=e,s=t||new Array(4);return s[0]=n*o,s[1]=i*o,s[2]=a*o,s[3]=o,s}function Np(r,e){var t=e||new Array(4);return t[0]=(r>>0&255)/255,t[1]=(r>>8&255)/255,t[2]=(r>>16&255)/255,t[3]=(r>>24&255)/255,t}function LD(r){return r[0]+(r[1]<<8)+(r[2]<<16)+(r[3]<<24)}function ND(r,e){var t=r.createTexture();return t.buffer=function(n){r.bindTexture(r.TEXTURE_2D,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR_MIPMAP_NEAREST),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,n),r.generateMipmap(r.TEXTURE_2D),r.bindTexture(r.TEXTURE_2D,null)},t.deleteTexture=function(){r.deleteTexture(t)},t}function n2(r,e){switch(e){case"float":return[1,r.FLOAT,4];case"vec2":return[2,r.FLOAT,4];case"vec3":return[3,r.FLOAT,4];case"vec4":return[4,r.FLOAT,4];case"int":return[1,r.INT,4];case"ivec2":return[2,r.INT,4]}}function i2(r,e,t){switch(e){case r.FLOAT:return new Float32Array(t);case r.INT:return new Int32Array(t)}}function jD(r,e,t,n,i,a){switch(e){case r.FLOAT:return new Float32Array(t.buffer,a*n,i);case r.INT:return new Int32Array(t.buffer,a*n,i)}}function BD(r,e,t,n){var i=n2(r,e),a=Lo(i,2),o=a[0],s=a[1],u=i2(r,s,n),l=r.createBuffer();return r.bindBuffer(r.ARRAY_BUFFER,l),r.bufferData(r.ARRAY_BUFFER,u,r.STATIC_DRAW),s===r.FLOAT?r.vertexAttribPointer(t,o,s,!1,0,0):s===r.INT&&r.vertexAttribIPointer(t,o,s,0,0),r.enableVertexAttribArray(t),r.bindBuffer(r.ARRAY_BUFFER,null),l}function qc(r,e,t,n){var i=n2(r,t),a=Lo(i,3),o=a[0],s=a[1],u=a[2],l=i2(r,s,e*o),c=o*u,f=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,f),r.bufferData(r.ARRAY_BUFFER,e*c,r.DYNAMIC_DRAW),r.enableVertexAttribArray(n),s===r.FLOAT?r.vertexAttribPointer(n,o,s,!1,c,0):s===r.INT&&r.vertexAttribIPointer(n,o,s,c,0),r.vertexAttribDivisor(n,1),r.bindBuffer(r.ARRAY_BUFFER,null);for(var h=new Array(e),d=0;d<e;d++)h[d]=jD(r,s,l,c,o,d);return f.dataArray=l,f.stride=c,f.size=o,f.getView=function(v){return h[v]},f.setPoint=function(v,y,w){var b=h[v];b[0]=y,b[1]=w},f.bufferSubData=function(v){r.bindBuffer(r.ARRAY_BUFFER,f),v?r.bufferSubData(r.ARRAY_BUFFER,0,l,0,v*o):r.bufferSubData(r.ARRAY_BUFFER,0,l)},f}function FD(r,e,t){for(var n=9,i=new Float32Array(e*n),a=new Array(e),o=0;o<e;o++){var s=o*n*4;a[o]=new Float32Array(i.buffer,s,n)}var u=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,u),r.bufferData(r.ARRAY_BUFFER,i.byteLength,r.DYNAMIC_DRAW);for(var l=0;l<3;l++){var c=t+l;r.enableVertexAttribArray(c),r.vertexAttribPointer(c,3,r.FLOAT,!1,3*12,l*12),r.vertexAttribDivisor(c,1)}return r.bindBuffer(r.ARRAY_BUFFER,null),u.getMatrixView=function(f){return a[f]},u.setData=function(f,h){a[h].set(f,0)},u.bufferSubData=function(){r.bindBuffer(r.ARRAY_BUFFER,u),r.bufferSubData(r.ARRAY_BUFFER,0,i)},u}function UD(r){var e=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,e);var t=r.createTexture();return r.bindTexture(r.TEXTURE_2D,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0),r.bindFramebuffer(r.FRAMEBUFFER,null),e.setFramebufferAttachmentSizes=function(n,i){r.bindTexture(r.TEXTURE_2D,t),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,n,i,0,r.RGBA,r.UNSIGNED_BYTE,null)},e}var eO=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var r=0,e=arguments.length;e--;)r+=arguments[e]*arguments[e];return Math.sqrt(r)});function x_(){var r=new eO(9);return eO!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function tO(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function zD(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=t[0],d=t[1],v=t[2],y=t[3],w=t[4],b=t[5],p=t[6],m=t[7],x=t[8];return r[0]=h*n+d*o+v*l,r[1]=h*i+d*s+v*c,r[2]=h*a+d*u+v*f,r[3]=y*n+w*o+b*l,r[4]=y*i+w*s+b*c,r[5]=y*a+w*u+b*f,r[6]=p*n+m*o+x*l,r[7]=p*i+m*s+x*c,r[8]=p*a+m*u+x*f,r}function Im(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=t[0],d=t[1];return r[0]=n,r[1]=i,r[2]=a,r[3]=o,r[4]=s,r[5]=u,r[6]=h*n+d*o+l,r[7]=h*i+d*s+c,r[8]=h*a+d*u+f,r}function rO(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=Math.sin(t),d=Math.cos(t);return r[0]=d*n+h*o,r[1]=d*i+h*s,r[2]=d*a+h*u,r[3]=d*o-h*n,r[4]=d*s-h*i,r[5]=d*u-h*a,r[6]=l,r[7]=c,r[8]=f,r}function Lw(r,e,t){var n=t[0],i=t[1];return r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=i*e[3],r[4]=i*e[4],r[5]=i*e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r}function GD(r,e,t){return r[0]=2/e,r[1]=0,r[2]=0,r[3]=0,r[4]=-2/t,r[5]=0,r[6]=-1,r[7]=1,r[8]=1,r}var VD=function(){function r(e,t,n,i){dd(this,r),this.debugID=Math.floor(Math.random()*1e4),this.r=e,this.texSize=t,this.texRows=n,this.texHeight=Math.floor(t/n),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=i(e,t,t),this.scratch=i(e,t,this.texHeight,"scratch")}return vd(r,[{key:"lock",value:function(){this.locked=!0}},{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(t){var n=t.w,i=t.h,a=this.texHeight,o=this.texSize,s=a/i,u=n*s,l=i*s;return u>o&&(s=o/n,u=n*s,l=i*s),{scale:s,texW:u,texH:l}}},{key:"draw",value:function(t,n,i){var a=this;if(this.locked)throw new Error("can't draw, atlas is locked");var o=this.texSize,s=this.texRows,u=this.texHeight,l=this.getScale(n),c=l.scale,f=l.texW,h=l.texH,d=function(m,x){if(i&&x){var T=x.context,P=m.x,C=m.row,R=P,D=u*C;T.save(),T.translate(R,D),T.scale(c,c),i(T,n),T.restore()}},v=[null,null],y=function(){d(a.freePointer,a.canvas),v[0]={x:a.freePointer.x,y:a.freePointer.row*u,w:f,h},v[1]={x:a.freePointer.x+f,y:a.freePointer.row*u,w:0,h},a.freePointer.x+=f,a.freePointer.x==o&&(a.freePointer.x=0,a.freePointer.row++)},w=function(){var m=a.scratch,x=a.canvas;m.clear(),d({x:0,row:0},m);var T=o-a.freePointer.x,P=f-T,C=u;{var R=a.freePointer.x,D=a.freePointer.row*u,N=T;x.context.drawImage(m,0,0,N,C,R,D,N,C),v[0]={x:R,y:D,w:N,h}}{var j=T,B=(a.freePointer.row+1)*u,z=P;x&&x.context.drawImage(m,j,0,z,C,0,B,z,C),v[1]={x:0,y:B,w:z,h}}a.freePointer.x=P,a.freePointer.row++},b=function(){a.freePointer.x=0,a.freePointer.row++};if(this.freePointer.x+f<=o)y();else{if(this.freePointer.row>=s-1)return!1;this.freePointer.x===o?(b(),y()):this.enableWrapping?w():(b(),y())}return this.keyToLocation.set(t,v),this.needsBuffer=!0,v}},{key:"getOffsets",value:function(t){return this.keyToLocation.get(t)}},{key:"isEmpty",value:function(){return this.freePointer.x===0&&this.freePointer.row===0}},{key:"canFit",value:function(t){if(this.locked)return!1;var n=this.texSize,i=this.texRows,a=this.getScale(t),o=a.texW;return this.freePointer.x+o>n?this.freePointer.row<i-1:!0}},{key:"bufferIfNeeded",value:function(t){this.texture||(this.texture=ND(t,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0}}])}(),qD=function(){function r(e,t,n,i){dd(this,r),this.r=e,this.texSize=t,this.texRows=n,this.createTextureCanvas=i,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set}return vd(r,[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function(){var t=this.r,n=this.texSize,i=this.texRows,a=this.createTextureCanvas;return new VD(t,n,i,a)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var t=this.r,n=this.texSize,i=this.texRows,a=this.createTextureCanvas,o=Math.floor(n/i);this.scratch=a(t,n,o,"scratch")}return this.scratch}},{key:"draw",value:function(t,n,i){var a=this.styleKeyToAtlas.get(t);return a||(a=this.atlases[this.atlases.length-1],(!a||!a.canFit(n))&&(a&&a.lock(),a=this._createAtlas(),this.atlases.push(a)),a.draw(t,n,i),this.styleKeyToAtlas.set(t,a)),a}},{key:"getAtlas",value:function(t){return this.styleKeyToAtlas.get(t)}},{key:"hasAtlas",value:function(t){return this.styleKeyToAtlas.has(t)}},{key:"markKeyForGC",value:function(t){this.markedKeys.add(t)}},{key:"gc",value:function(){var t=this,n=this.markedKeys;if(n.size!==0){var i=[],a=new Map,o=null,s=Gs(this.atlases),u;try{var l=function(){var f=u.value,h=f.getKeys(),d=WD(n,h);if(d.size===0)return i.push(f),h.forEach(function(T){return a.set(T,f)}),1;o||(o=t._createAtlas(),i.push(o));var v=Gs(h),y;try{for(v.s();!(y=v.n()).done;){var w=y.value;if(!d.has(w)){var b=f.getOffsets(w),p=Lo(b,2),m=p[0],x=p[1];o.canFit({w:m.w+x.w,h:m.h})||(o.lock(),o=t._createAtlas(),i.push(o)),f.canvas&&(t._copyTextureToNewAtlas(w,f,o),a.set(w,o))}}}catch(T){v.e(T)}finally{v.f()}f.dispose()};for(s.s();!(u=s.n()).done;)l()}catch(c){s.e(c)}finally{s.f()}this.atlases=i,this.styleKeyToAtlas=a,this.markedKeys=new Set}}},{key:"_copyTextureToNewAtlas",value:function(t,n,i){var a=n.getOffsets(t),o=Lo(a,2),s=o[0],u=o[1];if(u.w===0)i.draw(t,s,function(h){h.drawImage(n.canvas,s.x,s.y,s.w,s.h,0,0,s.w,s.h)});else{var l=this._getScratchCanvas();l.clear(),l.context.drawImage(n.canvas,s.x,s.y,s.w,s.h,0,0,s.w,s.h),l.context.drawImage(n.canvas,u.x,u.y,u.w,u.h,s.w,0,u.w,u.h);var c=s.w+u.w,f=s.h;i.draw(t,{w:c,h:f},function(h){h.drawImage(l,0,0,c,f,0,0,c,f)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}])}();function WD(r,e){return r.intersection?r.intersection(e):new Set(Bm(r).filter(function(t){return e.has(t)}))}var HD=function(){function r(e,t){dd(this,r),this.r=e,this.globalOptions=t,this.atlasSize=t.webglTexSize,this.maxAtlasesPerBatch=t.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map}return vd(r,[{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"addAtlasCollection",value:function(t,n){var i=this.globalOptions,a=i.webglTexSize,o=i.createTextureCanvas,s=n.texRows,u=this._cacheScratchCanvas(o),l=new qD(this.r,a,s,u);this.collections.set(t,l)}},{key:"addRenderType",value:function(t,n){var i=n.collection;if(!this.collections.has(i))throw new Error("invalid atlas collection name '".concat(i,"'"));var a=this.collections.get(i),o=xr({type:t,atlasCollection:a},n);this.renderTypes.set(t,o)}},{key:"getRenderTypeOpts",value:function(t){return this.renderTypes.get(t)}},{key:"getAtlasCollection",value:function(t){return this.collections.get(t)}},{key:"_cacheScratchCanvas",value:function(t){var n=-1,i=-1,a=null;return function(o,s,u,l){return l?((!a||s!=n||u!=i)&&(n=s,i=u,a=t(o,s,u)),a):t(o,s,u)}}},{key:"_key",value:function(t,n){return"".concat(t,"-").concat(n)}},{key:"invalidate",value:function(t){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.forceRedraw,o=a===void 0?!1:a,s=i.filterEle,u=s===void 0?function(){return!0}:s,l=i.filterType,c=l===void 0?function(){return!0}:l,f=!1,h=!1,d=Gs(t),v;try{for(d.s();!(v=d.n()).done;){var y=v.value;if(u(y)){var w=Gs(this.renderTypes.values()),b;try{var p=function(){var x=b.value,T=x.type;if(c(T)){var P=n.collections.get(x.collection),C=x.getKey(y),R=Array.isArray(C)?C:[C];if(o)R.forEach(function(B){return P.markKeyForGC(B)}),h=!0;else{var D=x.getID?x.getID(y):y.id(),N=n._key(T,D),j=n.typeAndIdToKey.get(N);j!==void 0&&!MD(R,j)&&(f=!0,n.typeAndIdToKey.delete(N),j.forEach(function(B){return P.markKeyForGC(B)}))}}};for(w.s();!(b=w.n()).done;)p()}catch(m){w.e(m)}finally{w.f()}}}}catch(m){d.e(m)}finally{d.f()}return h&&(this.gc(),f=!1),f}},{key:"gc",value:function(){var t=Gs(this.collections.values()),n;try{for(t.s();!(n=t.n()).done;){var i=n.value;i.gc()}}catch(a){t.e(a)}finally{t.f()}}},{key:"getOrCreateAtlas",value:function(t,n,i,a){var o=this.renderTypes.get(n),s=this.collections.get(o.collection),u=!1,l=s.draw(a,i,function(h){o.drawClipped?(h.save(),h.beginPath(),h.rect(0,0,i.w,i.h),h.clip(),o.drawElement(h,t,i,!0,!0),h.restore()):o.drawElement(h,t,i,!0,!0),u=!0});if(u){var c=o.getID?o.getID(t):t.id(),f=this._key(n,c);this.typeAndIdToKey.has(f)?this.typeAndIdToKey.get(f).push(a):this.typeAndIdToKey.set(f,[a])}return l}},{key:"getAtlasInfo",value:function(t,n){var i=this,a=this.renderTypes.get(n),o=a.getKey(t),s=Array.isArray(o)?o:[o];return s.map(function(u){var l=a.getBoundingBox(t,u),c=i.getOrCreateAtlas(t,n,l,u),f=c.getOffsets(u),h=Lo(f,2),d=h[0],v=h[1];return{atlas:c,tex:d,tex1:d,tex2:v,bb:l}})}},{key:"getDebugInfo",value:function(){var t=[],n=Gs(this.collections),i;try{for(n.s();!(i=n.n()).done;){var a=Lo(i.value,2),o=a[0],s=a[1],u=s.getCounts(),l=u.keyCount,c=u.atlasCount;t.push({type:o,keyCount:l,atlasCount:c})}}catch(f){n.e(f)}finally{n.f()}return t}}])}(),YD=function(){function r(e){dd(this,r),this.globalOptions=e,this.atlasSize=e.webglTexSize,this.maxAtlasesPerBatch=e.webglTexPerBatch,this.batchAtlases=[]}return vd(r,[{key:"getMaxAtlasesPerBatch",value:function(){return this.maxAtlasesPerBatch}},{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlasesPerBatch},function(t,n){return n})}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function(t){return this.batchAtlases.length===this.maxAtlasesPerBatch?this.batchAtlases.includes(t):!0}},{key:"getAtlasIndexForBatch",value:function(t){var n=this.batchAtlases.indexOf(t);if(n<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)throw new Error("cannot add more atlases to batch");this.batchAtlases.push(t),n=this.batchAtlases.length-1}return n}}])}(),XD=`
  float circleSD(vec2 p, float r) {
    return distance(vec2(0), p) - r; // signed distance
  }
`,KD=`
  float rectangleSD(vec2 p, vec2 b) {
    vec2 d = abs(p)-b;
    return distance(vec2(0),max(d,0.0)) + min(max(d.x,d.y),0.0);
  }
`,$D=`
  float roundRectangleSD(vec2 p, vec2 b, vec4 cr) {
    cr.xy = (p.x > 0.0) ? cr.xy : cr.zw;
    cr.x  = (p.y > 0.0) ? cr.x  : cr.y;
    vec2 q = abs(p) - b + cr.x;
    return min(max(q.x, q.y), 0.0) + distance(vec2(0), max(q, 0.0)) - cr.x;
  }
`,ZD=`
  float ellipseSD(vec2 p, vec2 ab) {
    p = abs( p ); // symmetry

    // find root with Newton solver
    vec2 q = ab*(p-ab);
    float w = (q.x<q.y)? 1.570796327 : 0.0;
    for( int i=0; i<5; i++ ) {
      vec2 cs = vec2(cos(w),sin(w));
      vec2 u = ab*vec2( cs.x,cs.y);
      vec2 v = ab*vec2(-cs.y,cs.x);
      w = w + dot(p-u,v)/(dot(p-u,u)+dot(v,v));
    }
    
    // compute final point and distance
    float d = length(p-ab*vec2(cos(w),sin(w)));
    
    // return signed distance
    return (dot(p/ab,p/ab)>1.0) ? d : -d;
  }
`,ny={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},$m={IGNORE:1,USE_BB:2},O_=0,nO=1,iO=2,S_=3,jp=4,um=5,Gg=6,Vg=7,QD=function(){function r(e,t,n){dd(this,r),this.r=e,this.gl=t,this.maxInstances=n.webglBatchSize,this.atlasSize=n.webglTexSize,this.bgColor=n.bgColor,this.debug=n.webglDebug,this.batchDebugInfo=[],n.enableWrapping=!0,n.createTextureCanvas=RD,this.atlasManager=new HD(e,n),this.batchManager=new YD(n),this.simpleShapeOptions=new Map,this.program=this._createShaderProgram(ny.SCREEN),this.pickingProgram=this._createShaderProgram(ny.PICKING),this.vao=this._createVAO()}return vd(r,[{key:"addAtlasCollection",value:function(t,n){this.atlasManager.addAtlasCollection(t,n)}},{key:"addTextureAtlasRenderType",value:function(t,n){this.atlasManager.addRenderType(t,n)}},{key:"addSimpleShapeRenderType",value:function(t,n){this.simpleShapeOptions.set(t,n)}},{key:"invalidate",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.type,a=this.atlasManager;return i?a.invalidate(t,{filterType:function(s){return s===i},forceRedraw:!0}):a.invalidate(t)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"_createShaderProgram",value:function(t){var n=this.gl,i=`#version 300 es
      precision highp float;

      uniform mat3 uPanZoomMatrix;
      uniform int  uAtlasSize;
      
      // instanced
      in vec2 aPosition; // a vertex from the unit square
      
      in mat3 aTransform; // used to transform verticies, eg into a bounding box
      in int aVertType; // the type of thing we are rendering

      // the z-index that is output when using picking mode
      in vec4 aIndex;
      
      // For textures
      in int aAtlasId; // which shader unit/atlas to use
      in vec4 aTex; // x/y/w/h of texture in atlas

      // for edges
      in vec4 aPointAPointB;
      in vec4 aPointCPointD;
      in vec2 aLineWidth; // also used for node border width

      // simple shapes
      in vec4 aCornerRadius; // for round-rectangle [top-right, bottom-right, top-left, bottom-left]
      in vec4 aColor; // also used for edges
      in vec4 aBorderColor; // aLineWidth is used for border width

      // output values passed to the fragment shader
      out vec2 vTexCoord;
      out vec4 vColor;
      out vec2 vPosition;
      // flat values are not interpolated
      flat out int vAtlasId; 
      flat out int vVertType;
      flat out vec2 vTopRight;
      flat out vec2 vBotLeft;
      flat out vec4 vCornerRadius;
      flat out vec4 vBorderColor;
      flat out vec2 vBorderWidth;
      flat out vec4 vIndex;
      
      void main(void) {
        int vid = gl_VertexID;
        vec2 position = aPosition; // TODO make this a vec3, simplifies some code below

        if(aVertType == `.concat(O_,`) {
          float texX = aTex.x; // texture coordinates
          float texY = aTex.y;
          float texW = aTex.z;
          float texH = aTex.w;

          if(vid == 1 || vid == 2 || vid == 4) {
            texX += texW;
          }
          if(vid == 2 || vid == 4 || vid == 5) {
            texY += texH;
          }

          float d = float(uAtlasSize);
          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(jp," || aVertType == ").concat(Vg,` 
             || aVertType == `).concat(um," || aVertType == ").concat(Gg,`) { // simple shapes

          // the bounding box is needed by the fragment shader
          vBotLeft  = (aTransform * vec3(0, 0, 1)).xy; // flat
          vTopRight = (aTransform * vec3(1, 1, 1)).xy; // flat
          vPosition = (aTransform * vec3(position, 1)).xy; // will be interpolated

          // calculations are done in the fragment shader, just pass these along
          vColor = aColor;
          vCornerRadius = aCornerRadius;
          vBorderColor = aBorderColor;
          vBorderWidth = aLineWidth;

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(nO,`) {
          vec2 source = aPointAPointB.xy;
          vec2 target = aPointAPointB.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          // stretch the unit square into a long skinny rectangle
          vec2 xBasis = target - source;
          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));
          vec2 point = source + xBasis * position.x + yBasis * aLineWidth[0] * position.y;

          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);
          vColor = aColor;
        } 
        else if(aVertType == `).concat(iO,`) {
          vec2 pointA = aPointAPointB.xy;
          vec2 pointB = aPointAPointB.zw;
          vec2 pointC = aPointCPointD.xy;
          vec2 pointD = aPointCPointD.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 p0, p1, p2, pos;
          if(position.x == 0.0) { // The left side of the unit square
            p0 = pointA;
            p1 = pointB;
            p2 = pointC;
            pos = position;
          } else { // The right side of the unit square, use same approach but flip the geometry upside down
            p0 = pointD;
            p1 = pointC;
            p2 = pointB;
            pos = vec2(0.0, -position.y);
          }

          vec2 p01 = p1 - p0;
          vec2 p12 = p2 - p1;
          vec2 p21 = p1 - p2;

          // Find the normal vector.
          vec2 tangent = normalize(normalize(p12) + normalize(p01));
          vec2 normal = vec2(-tangent.y, tangent.x);

          // Find the vector perpendicular to p0 -> p1.
          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));

          // Determine the bend direction.
          float sigma = sign(dot(p01 + p21, normal));
          float width = aLineWidth[0];

          if(sign(pos.y) == -sigma) {
            // This is an intersecting vertex. Adjust the position so that there's no overlap.
            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          } else {
            // This is a non-intersecting vertex. Treat it like a mitre join.
            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          }

          vColor = aColor;
        } 
        else if(aVertType == `).concat(S_,` && vid < 3) {
          // massage the first triangle into an edge arrow
          if(vid == 0)
            position = vec2(-0.15, -0.3);
          if(vid == 1)
            position = vec2(  0.0,  0.0);
          if(vid == 2)
            position = vec2( 0.15, -0.3);

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
          vColor = aColor;
        }
        else {
          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space
        }

        vAtlasId = aAtlasId;
        vVertType = aVertType;
        vIndex = aIndex;
      }
    `),a=this.batchManager.getIndexArray(),o=`#version 300 es
      precision highp float;

      // declare texture unit for each texture atlas in the batch
      `.concat(a.map(function(l){return"uniform sampler2D uTexture".concat(l,";")}).join(`
	`),`

      uniform vec4 uBGColor;
      uniform float uZoom;

      in vec2 vTexCoord;
      in vec4 vColor;
      in vec2 vPosition; // model coordinates

      flat in int vAtlasId;
      flat in vec4 vIndex;
      flat in int vVertType;
      flat in vec2 vTopRight;
      flat in vec2 vBotLeft;
      flat in vec4 vCornerRadius;
      flat in vec4 vBorderColor;
      flat in vec2 vBorderWidth;

      out vec4 outColor;

      `).concat(XD,`
      `).concat(KD,`
      `).concat($D,`
      `).concat(ZD,`

      vec4 blend(vec4 top, vec4 bot) { // blend colors with premultiplied alpha
        return vec4( 
          top.rgb + (bot.rgb * (1.0 - top.a)),
          top.a   + (bot.a   * (1.0 - top.a)) 
        );
      }

      vec4 distInterp(vec4 cA, vec4 cB, float d) { // interpolate color using Signed Distance
        // scale to the zoom level so that borders don't look blurry when zoomed in
        // note 1.5 is an aribitrary value chosen because it looks good
        return mix(cA, cB, 1.0 - smoothstep(0.0, 1.5 / uZoom, abs(d))); 
      }

      void main(void) {
        if(vVertType == `).concat(O_,`) {
          // look up the texel from the texture unit
          `).concat(a.map(function(l){return"if(vAtlasId == ".concat(l,") outColor = texture(uTexture").concat(l,", vTexCoord);")}).join(`
	else `),`
        } 
        else if(vVertType == `).concat(S_,`) {
          // mimics how canvas renderer uses context.globalCompositeOperation = 'destination-out';
          outColor = blend(vColor, uBGColor);
          outColor.a = 1.0; // make opaque, masks out line under arrow
        }
        else if(vVertType == `).concat(jp,` && vBorderWidth == vec2(0.0)) { // simple rectangle with no border
          outColor = vColor; // unit square is already transformed to the rectangle, nothing else needs to be done
        }
        else if(vVertType == `).concat(jp," || vVertType == ").concat(Vg,` 
          || vVertType == `).concat(um," || vVertType == ").concat(Gg,`) { // use SDF

          float outerBorder = vBorderWidth[0];
          float innerBorder = vBorderWidth[1];
          float borderPadding = outerBorder * 2.0;
          float w = vTopRight.x - vBotLeft.x - borderPadding;
          float h = vTopRight.y - vBotLeft.y - borderPadding;
          vec2 b = vec2(w/2.0, h/2.0); // half width, half height
          vec2 p = vPosition - vec2(vTopRight.x - b[0] - outerBorder, vTopRight.y - b[1] - outerBorder); // translate to center

          float d; // signed distance
          if(vVertType == `).concat(jp,`) {
            d = rectangleSD(p, b);
          } else if(vVertType == `).concat(Vg,` && w == h) {
            d = circleSD(p, b.x); // faster than ellipse
          } else if(vVertType == `).concat(Vg,`) {
            d = ellipseSD(p, b);
          } else {
            d = roundRectangleSD(p, b, vCornerRadius.wzyx);
          }

          // use the distance to interpolate a color to smooth the edges of the shape, doesn't need multisampling
          // we must smooth colors inwards, because we can't change pixels outside the shape's bounding box
          if(d > 0.0) {
            if(d > outerBorder) {
              discard;
            } else {
              outColor = distInterp(vBorderColor, vec4(0), d - outerBorder);
            }
          } else {
            if(d > innerBorder) {
              vec4 outerColor = outerBorder == 0.0 ? vec4(0) : vBorderColor;
              vec4 innerBorderColor = blend(vBorderColor, vColor);
              outColor = distInterp(innerBorderColor, outerColor, d);
            } 
            else {
              vec4 outerColor;
              if(innerBorder == 0.0 && outerBorder == 0.0) {
                outerColor = vec4(0);
              } else if(innerBorder == 0.0) {
                outerColor = vBorderColor;
              } else {
                outerColor = blend(vBorderColor, vColor);
              }
              outColor = distInterp(vColor, outerColor, d - innerBorder);
            }
          }
        }
        else {
          outColor = vColor;
        }

        `).concat(t.picking?`if(outColor.a == 0.0) discard;
             else outColor = vIndex;`:"",`
      }
    `),s=AD(n,i,o);s.aPosition=n.getAttribLocation(s,"aPosition"),s.aIndex=n.getAttribLocation(s,"aIndex"),s.aVertType=n.getAttribLocation(s,"aVertType"),s.aTransform=n.getAttribLocation(s,"aTransform"),s.aAtlasId=n.getAttribLocation(s,"aAtlasId"),s.aTex=n.getAttribLocation(s,"aTex"),s.aPointAPointB=n.getAttribLocation(s,"aPointAPointB"),s.aPointCPointD=n.getAttribLocation(s,"aPointCPointD"),s.aLineWidth=n.getAttribLocation(s,"aLineWidth"),s.aColor=n.getAttribLocation(s,"aColor"),s.aCornerRadius=n.getAttribLocation(s,"aCornerRadius"),s.aBorderColor=n.getAttribLocation(s,"aBorderColor"),s.uPanZoomMatrix=n.getUniformLocation(s,"uPanZoomMatrix"),s.uAtlasSize=n.getUniformLocation(s,"uAtlasSize"),s.uBGColor=n.getUniformLocation(s,"uBGColor"),s.uZoom=n.getUniformLocation(s,"uZoom"),s.uTextures=[];for(var u=0;u<this.batchManager.getMaxAtlasesPerBatch();u++)s.uTextures.push(n.getUniformLocation(s,"uTexture".concat(u)));return s}},{key:"_createVAO",value:function(){var t=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=t.length/2;var n=this.maxInstances,i=this.gl,a=this.program,o=i.createVertexArray();return i.bindVertexArray(o),BD(i,"vec2",a.aPosition,t),this.transformBuffer=FD(i,n,a.aTransform),this.indexBuffer=qc(i,n,"vec4",a.aIndex),this.vertTypeBuffer=qc(i,n,"int",a.aVertType),this.atlasIdBuffer=qc(i,n,"int",a.aAtlasId),this.texBuffer=qc(i,n,"vec4",a.aTex),this.pointAPointBBuffer=qc(i,n,"vec4",a.aPointAPointB),this.pointCPointDBuffer=qc(i,n,"vec4",a.aPointCPointD),this.lineWidthBuffer=qc(i,n,"vec2",a.aLineWidth),this.colorBuffer=qc(i,n,"vec4",a.aColor),this.cornerRadiusBuffer=qc(i,n,"vec4",a.aCornerRadius),this.borderColorBuffer=qc(i,n,"vec4",a.aBorderColor),i.bindVertexArray(null),o}},{key:"buffers",get:function(){var t=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(n){return n.endsWith("Buffer")}).map(function(n){return t[n]})),this._buffers}},{key:"startFrame",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ny.SCREEN;this.panZoomMatrix=t,this.renderTarget=n,this.batchDebugInfo=[],this.wrappedCount=0,this.simpleCount=0,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.batchManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"_isVisible",value:function(t,n){return t.visible()?n&&n.isVisible?n.isVisible(t):!0:!1}},{key:"drawTexture",value:function(t,n,i){var a=this.atlasManager,o=this.batchManager,s=a.getRenderTypeOpts(i);if(this._isVisible(t,s)){if(this.renderTarget.picking&&s.getTexPickingMode){var u=s.getTexPickingMode(t);if(u===$m.IGNORE)return;if(u==$m.USE_BB){this.drawPickingRectangle(t,n,i);return}}var l=a.getAtlasInfo(t,i),c=Gs(l),f;try{for(c.s();!(f=c.n()).done;){var h=f.value,d=h.atlas,v=h.tex1,y=h.tex2;o.canAddToCurrentBatch(d)||this.endBatch();for(var w=o.getAtlasIndexForBatch(d),b=0,p=[[v,!0],[y,!1]];b<p.length;b++){var m=Lo(p[b],2),x=m[0],T=m[1];if(x.w!=0){var P=this.instanceCount;this.vertTypeBuffer.getView(P)[0]=O_;var C=this.indexBuffer.getView(P);Np(n,C);var R=this.atlasIdBuffer.getView(P);R[0]=w;var D=this.texBuffer.getView(P);D[0]=x.x,D[1]=x.y,D[2]=x.w,D[3]=x.h;var N=this.transformBuffer.getMatrixView(P);this.setTransformMatrix(t,N,s,h,T),this.instanceCount++,T||this.wrappedCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}catch(j){c.e(j)}finally{c.f()}}}},{key:"setTransformMatrix",value:function(t,n,i,a){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=0;if(i.shapeProps&&i.shapeProps.padding&&(s=t.pstyle(i.shapeProps.padding).pfValue),a){var u=a.bb,l=a.tex1,c=a.tex2,f=l.w/(l.w+c.w);o||(f=1-f);var h=this._getAdjustedBB(u,s,o,f);this._applyTransformMatrix(n,h,i,t)}else{var d=i.getBoundingBox(t),v=this._getAdjustedBB(d,s,!0,1);this._applyTransformMatrix(n,v,i,t)}}},{key:"_applyTransformMatrix",value:function(t,n,i,a){var o,s;tO(t);var u=i.getRotation?i.getRotation(a):0;if(u!==0){var l=i.getRotationPoint(a),c=l.x,f=l.y;Im(t,t,[c,f]),rO(t,t,u);var h=i.getRotationOffset(a);o=h.x+(n.xOffset||0),s=h.y+(n.yOffset||0)}else o=n.x1,s=n.y1;Im(t,t,[o,s]),Lw(t,t,[n.w,n.h])}},{key:"_getAdjustedBB",value:function(t,n,i,a){var o=t.x1,s=t.y1,u=t.w,l=t.h,c=t.yOffset;n&&(o-=n,s-=n,u+=2*n,l+=2*n);var f=0,h=u*a;return i&&a<1?u=h:!i&&a<1&&(f=u-h,o+=f,u=h),{x1:o,y1:s,w:u,h:l,xOffset:f,yOffset:c}}},{key:"drawPickingRectangle",value:function(t,n,i){var a=this.atlasManager.getRenderTypeOpts(i),o=this.instanceCount;this.vertTypeBuffer.getView(o)[0]=jp;var s=this.indexBuffer.getView(o);Np(n,s);var u=this.colorBuffer.getView(o);gv([0,0,0],1,u);var l=this.transformBuffer.getMatrixView(o);this.setTransformMatrix(t,l,a),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}},{key:"drawNode",value:function(t,n,i){var a=this.simpleShapeOptions.get(i);if(this._isVisible(t,a)){var o=a.shapeProps,s=this._getVertTypeForShape(t,o.shape);if(s===void 0||a.isSimple&&!a.isSimple(t)){this.drawTexture(t,n,i);return}var u=this.instanceCount;if(this.vertTypeBuffer.getView(u)[0]=s,s===um||s===Gg){var l=a.getBoundingBox(t),c=this._getCornerRadius(t,o.radius,l),f=this.cornerRadiusBuffer.getView(u);f[0]=c,f[1]=c,f[2]=c,f[3]=c,s===Gg&&(f[0]=0,f[2]=0)}var h=this.indexBuffer.getView(u);Np(n,h);var d=t.pstyle(o.color).value,v=t.pstyle(o.opacity).value,y=this.colorBuffer.getView(u);gv(d,v,y);var w=this.lineWidthBuffer.getView(u);if(w[0]=0,w[1]=0,o.border){var b=t.pstyle("border-width").value;if(b>0){var p=t.pstyle("border-color").value,m=t.pstyle("border-opacity").value,x=this.borderColorBuffer.getView(u);gv(p,m,x);var T=t.pstyle("border-position").value;if(T==="inside")w[0]=0,w[1]=-b;else if(T==="outside")w[0]=b,w[1]=0;else{var P=b/2;w[0]=P,w[1]=-P}}}var C=this.transformBuffer.getMatrixView(u);this.setTransformMatrix(t,C,a),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"_getVertTypeForShape",value:function(t,n){var i=t.pstyle(n).value;switch(i){case"rectangle":return jp;case"ellipse":return Vg;case"roundrectangle":case"round-rectangle":return um;case"bottom-round-rectangle":return Gg;default:return}}},{key:"_getCornerRadius",value:function(t,n,i){var a=i.w,o=i.h;if(t.pstyle(n).value==="auto")return sd(a,o);var s=t.pstyle(n).pfValue,u=a/2,l=o/2;return Math.min(s,l,u)}},{key:"drawEdgeArrow",value:function(t,n,i){if(t.visible()){var a=t._private.rscratch,o,s,u;if(i==="source"?(o=a.arrowStartX,s=a.arrowStartY,u=a.srcArrowAngle):(o=a.arrowEndX,s=a.arrowEndY,u=a.tgtArrowAngle),!(isNaN(o)||o==null||isNaN(s)||s==null||isNaN(u)||u==null)){var l=t.pstyle(i+"-arrow-shape").value;if(l!=="none"){var c=t.pstyle(i+"-arrow-color").value,f=t.pstyle("opacity").value,h=t.pstyle("line-opacity").value,d=f*h,v=t.pstyle("width").pfValue,y=t.pstyle("arrow-scale").value,w=this.r.getArrowWidth(v,y),b=this.instanceCount,p=this.transformBuffer.getMatrixView(b);tO(p),Im(p,p,[o,s]),Lw(p,p,[w,w]),rO(p,p,u),this.vertTypeBuffer.getView(b)[0]=S_;var m=this.indexBuffer.getView(b);Np(n,m);var x=this.colorBuffer.getView(b);gv(c,d,x),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"drawEdgeLine",value:function(t,n){if(t.visible()){var i=this._getEdgePoints(t);if(i){var a=t.pstyle("opacity").value,o=t.pstyle("line-opacity").value,s=t.pstyle("width").pfValue,u=t.pstyle("line-color").value,l=a*o;if(i.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),i.length==4){var c=this.instanceCount;this.vertTypeBuffer.getView(c)[0]=nO;var f=this.indexBuffer.getView(c);Np(n,f);var h=this.colorBuffer.getView(c);gv(u,l,h);var d=this.lineWidthBuffer.getView(c);d[0]=s;var v=this.pointAPointBBuffer.getView(c);v[0]=i[0],v[1]=i[1],v[2]=i[2],v[3]=i[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var y=0;y<i.length-2;y+=2){var w=this.instanceCount;this.vertTypeBuffer.getView(w)[0]=iO;var b=this.indexBuffer.getView(w);Np(n,b);var p=this.colorBuffer.getView(w);gv(u,l,p);var m=this.lineWidthBuffer.getView(w);m[0]=s;var x=i[y-2],T=i[y-1],P=i[y],C=i[y+1],R=i[y+2],D=i[y+3],N=i[y+4],j=i[y+5];y==0&&(x=2*P-R+.001,T=2*C-D+.001),y==i.length-4&&(N=2*R-P+.001,j=2*D-C+.001);var B=this.pointAPointBBuffer.getView(w);B[0]=x,B[1]=T,B[2]=P,B[3]=C;var z=this.pointCPointDBuffer.getView(w);z[0]=R,z[1]=D,z[2]=N,z[3]=j,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"_getEdgePoints",value:function(t){var n=t._private.rscratch;if(!(n.badLine||n.allpts==null||isNaN(n.allpts[0]))){var i=n.allpts;if(i.length==4)return i;var a=this._getNumSegments(t);return this._getCurveSegmentPoints(i,a)}}},{key:"_getNumSegments",value:function(t){var n=15;return Math.min(Math.max(n,5),this.maxInstances)}},{key:"_getCurveSegmentPoints",value:function(t,n){if(t.length==4)return t;for(var i=Array((n+1)*2),a=0;a<=n;a++)if(a==0)i[0]=t[0],i[1]=t[1];else if(a==n)i[a*2]=t[t.length-2],i[a*2+1]=t[t.length-1];else{var o=a/n;this._setCurvePoint(t,o,i,a*2)}return i}},{key:"_setCurvePoint",value:function(t,n,i,a){if(t.length<=2)i[a]=t[0],i[a+1]=t[1];else{for(var o=Array(t.length-2),s=0;s<o.length;s+=2){var u=(1-n)*t[s]+n*t[s+2],l=(1-n)*t[s+1]+n*t[s+3];o[s]=u,o[s+1]=l}return this._setCurvePoint(o,n,i,a)}}},{key:"endBatch",value:function(){var t=this.gl,n=this.vao,i=this.vertexCount,a=this.instanceCount;if(a!==0){var o=this.renderTarget.picking?this.pickingProgram:this.program;t.useProgram(o),t.bindVertexArray(n);var s=Gs(this.buffers),u;try{for(s.s();!(u=s.n()).done;){var l=u.value;l.bufferSubData(a)}}catch(v){s.e(v)}finally{s.f()}for(var c=this.batchManager.getAtlases(),f=0;f<c.length;f++)c[f].bufferIfNeeded(t);for(var h=0;h<c.length;h++)t.activeTexture(t.TEXTURE0+h),t.bindTexture(t.TEXTURE_2D,c[h].texture),t.uniform1i(o.uTextures[h],h);t.uniform1f(o.uZoom,ID(this.r)),t.uniformMatrix3fv(o.uPanZoomMatrix,!1,this.panZoomMatrix),t.uniform1i(o.uAtlasSize,this.batchManager.getAtlasSize());var d=gv(this.bgColor,1);t.uniform4fv(o.uBGColor,d),t.drawArraysInstanced(t.TRIANGLES,0,i,a),t.bindVertexArray(null),t.bindTexture(t.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:a,atlasCount:c.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){var t=this.atlasManager.getDebugInfo(),n=t.reduce(function(o,s){return o+s.atlasCount},0),i=this.batchDebugInfo,a=i.reduce(function(o,s){return o+s.count},0);return{atlasInfo:t,totalAtlases:n,wrappedCount:this.wrappedCount,simpleCount:this.simpleCount,batchCount:i.length,batchInfo:i,totalInstances:a}}}])}(),o2={};o2.initWebgl=function(r,e){var t=this,n=t.data.contexts[t.WEBGL];r.bgColor=JD(t),r.webglTexSize=Math.min(r.webglTexSize,n.getParameter(n.MAX_TEXTURE_SIZE)),r.webglTexRows=Math.min(r.webglTexRows,54),r.webglTexRowsNodes=Math.min(r.webglTexRowsNodes,54),r.webglBatchSize=Math.min(r.webglBatchSize,16384),r.webglTexPerBatch=Math.min(r.webglTexPerBatch,n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)),t.webglDebug=r.webglDebug,t.webglDebugShowAtlases=r.webglDebugShowAtlases,t.pickingFrameBuffer=UD(n),t.pickingFrameBuffer.needsDraw=!0,t.drawing=new QD(t,n,r);var i=function(f){return function(h){return t.getTextAngle(h,f)}},a=function(f){return function(h){var d=h.pstyle(f);return d&&d.value}},o=function(f){return function(h){return h.pstyle("".concat(f,"-opacity")).value>0}},s=function(f){var h=f.pstyle("text-events").strValue==="yes";return h?$m.USE_BB:$m.IGNORE},u=function(f){var h=f.position(),d=h.x,v=h.y,y=f.outerWidth(),w=f.outerHeight();return{w:y,h:w,x1:d-y/2,y1:v-w/2}};t.drawing.addAtlasCollection("node",{texRows:r.webglTexRowsNodes}),t.drawing.addAtlasCollection("label",{texRows:r.webglTexRows}),t.drawing.addTextureAtlasRenderType("node-body",{collection:"node",getKey:e.getStyleKey,getBoundingBox:e.getElementBox,drawElement:e.drawElement}),t.drawing.addSimpleShapeRenderType("node-body",{getBoundingBox:u,isSimple:DD,shapeProps:{shape:"shape",color:"background-color",opacity:"background-opacity",radius:"corner-radius",border:!0}}),t.drawing.addSimpleShapeRenderType("node-overlay",{getBoundingBox:u,isVisible:o("overlay"),shapeProps:{shape:"overlay-shape",color:"overlay-color",opacity:"overlay-opacity",padding:"overlay-padding",radius:"overlay-corner-radius"}}),t.drawing.addSimpleShapeRenderType("node-underlay",{getBoundingBox:u,isVisible:o("underlay"),shapeProps:{shape:"underlay-shape",color:"underlay-color",opacity:"underlay-opacity",padding:"underlay-padding",radius:"underlay-corner-radius"}}),t.drawing.addTextureAtlasRenderType("label",{collection:"label",getTexPickingMode:s,getKey:T_(e.getLabelKey,null),getBoundingBox:C_(e.getLabelBox,null),drawClipped:!0,drawElement:e.drawLabel,getRotation:i(null),getRotationPoint:e.getLabelRotationPoint,getRotationOffset:e.getLabelRotationOffset,isVisible:a("label")}),t.drawing.addTextureAtlasRenderType("edge-source-label",{collection:"label",getTexPickingMode:s,getKey:T_(e.getSourceLabelKey,"source"),getBoundingBox:C_(e.getSourceLabelBox,"source"),drawClipped:!0,drawElement:e.drawSourceLabel,getRotation:i("source"),getRotationPoint:e.getSourceLabelRotationPoint,getRotationOffset:e.getSourceLabelRotationOffset,isVisible:a("source-label")}),t.drawing.addTextureAtlasRenderType("edge-target-label",{collection:"label",getTexPickingMode:s,getKey:T_(e.getTargetLabelKey,"target"),getBoundingBox:C_(e.getTargetLabelBox,"target"),drawClipped:!0,drawElement:e.drawTargetLabel,getRotation:i("target"),getRotationPoint:e.getTargetLabelRotationPoint,getRotationOffset:e.getTargetLabelRotationOffset,isVisible:a("target-label")});var l=wy(function(){t.data.gc=!0},1e4);t.onUpdateEleCalcs(function(c,f){var h=!1;f&&f.length>0&&(h|=t.drawing.invalidate(f)),h&&l()}),eM(t)};function JD(r){var e=r.cy.container(),t=e&&e.style&&e.style.backgroundColor||"white";return LS(t)}function a2(r,e){var t=r._private.rscratch;return Fs(t,"labelWrapCachedLines",e)||[]}var T_=function(e,t){return function(n){var i=e(n),a=a2(n,t);return a.length>1?a.map(function(o,s){return"".concat(i,"_").concat(s)}):i}},C_=function(e,t){return function(n,i){var a=e(n);if(typeof i=="string"){var o=i.indexOf("_");if(o>0){var s=Number(i.substring(o+1)),u=a2(n,t),l=a.h/u.length,c=l*s,f=a.y1+c;return{x1:a.x1,w:a.w,y1:f,h:l,yOffset:c}}}return a}};function eM(r){{var e=r.render;r.render=function(a){a=a||{};var o=r.cy;r.webgl&&(o.zoom()>QT?(tM(r),e.call(r,a)):(rM(r),u2(r,a,ny.SCREEN)))}}{var t=r.matchCanvasSize;r.matchCanvasSize=function(a){t.call(r,a),r.pickingFrameBuffer.setFramebufferAttachmentSizes(r.canvasWidth,r.canvasHeight),r.pickingFrameBuffer.needsDraw=!0}}r.findNearestElements=function(a,o,s,u){return uM(r,a,o)};{var n=r.invalidateCachedZSortedEles;r.invalidateCachedZSortedEles=function(){n.call(r),r.pickingFrameBuffer.needsDraw=!0}}{var i=r.notify;r.notify=function(a,o){i.call(r,a,o),a==="viewport"||a==="bounds"?r.pickingFrameBuffer.needsDraw=!0:a==="background"&&r.drawing.invalidate(o,{type:"node-body"})}}}function tM(r){var e=r.data.contexts[r.WEBGL];e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}function rM(r){var e=function(n){n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,r.canvasWidth,r.canvasHeight),n.restore()};e(r.data.contexts[r.NODE]),e(r.data.contexts[r.DRAG])}function nM(r){var e=r.canvasWidth,t=r.canvasHeight,n=y1(r),i=n.pan,a=n.zoom,o=x_();Im(o,o,[i.x,i.y]),Lw(o,o,[a,a]);var s=x_();GD(s,e,t);var u=x_();return zD(u,s,o),u}function s2(r,e){var t=r.canvasWidth,n=r.canvasHeight,i=y1(r),a=i.pan,o=i.zoom;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t,n),e.translate(a.x,a.y),e.scale(o,o)}function iM(r,e){r.drawSelectionRectangle(e,function(t){return s2(r,t)})}function oM(r){var e=r.data.contexts[r.NODE];e.save(),s2(r,e),e.strokeStyle="rgba(0, 0, 0, 0.3)",e.beginPath(),e.moveTo(-1e3,0),e.lineTo(1e3,0),e.stroke(),e.beginPath(),e.moveTo(0,-1e3),e.lineTo(0,1e3),e.stroke(),e.restore()}function aM(r){var e=function(i,a,o){for(var s=i.atlasManager.getAtlasCollection(a),u=r.data.contexts[r.NODE],l=s.atlases,c=0;c<l.length;c++){var f=l[c],h=f.canvas;if(h){var d=h.width,v=h.height,y=d*c,w=h.height*o,b=.4;u.save(),u.scale(b,b),u.drawImage(h,y,w),u.strokeStyle="black",u.rect(y,w,d,v),u.stroke(),u.restore()}}},t=0;e(r.drawing,"node",t++),e(r.drawing,"label",t++)}function sM(r,e,t,n,i){var a,o,s,u,l=y1(r),c=l.pan,f=l.zoom;{var h=kD(r,c,f,e,t),d=Lo(h,2),v=d[0],y=d[1],w=6;a=v-w/2,o=y-w/2,s=w,u=w}if(s===0||u===0)return[];var b=r.data.contexts[r.WEBGL];b.bindFramebuffer(b.FRAMEBUFFER,r.pickingFrameBuffer),r.pickingFrameBuffer.needsDraw&&(b.viewport(0,0,b.canvas.width,b.canvas.height),u2(r,null,ny.PICKING),r.pickingFrameBuffer.needsDraw=!1);var p=s*u,m=new Uint8Array(p*4);b.readPixels(a,o,s,u,b.RGBA,b.UNSIGNED_BYTE,m),b.bindFramebuffer(b.FRAMEBUFFER,null);for(var x=new Set,T=0;T<p;T++){var P=m.slice(T*4,T*4+4),C=LD(P)-1;C>=0&&x.add(C)}return x}function uM(r,e,t){var n=sM(r,e,t),i=r.getCachedZSortedEles(),a,o,s=Gs(n),u;try{for(s.s();!(u=s.n()).done;){var l=u.value,c=i[l];if(!a&&c.isNode()&&(a=c),!o&&c.isEdge()&&(o=c),a&&o)break}}catch(f){s.e(f)}finally{s.f()}return[a,o].filter(Boolean)}function P_(r,e,t){var n=r.drawing;e+=1,t.isNode()?(n.drawNode(t,e,"node-underlay"),n.drawNode(t,e,"node-body"),n.drawTexture(t,e,"label"),n.drawNode(t,e,"node-overlay")):(n.drawEdgeLine(t,e),n.drawEdgeArrow(t,e,"source"),n.drawEdgeArrow(t,e,"target"),n.drawTexture(t,e,"label"),n.drawTexture(t,e,"edge-source-label"),n.drawTexture(t,e,"edge-target-label"))}function u2(r,e,t){var n;r.webglDebug&&(n=performance.now());var i=r.drawing,a=0;if(t.screen&&r.data.canvasNeedsRedraw[r.SELECT_BOX]&&iM(r,e),r.data.canvasNeedsRedraw[r.NODE]||t.picking){var o=r.data.contexts[r.WEBGL];t.screen?(o.clearColor(0,0,0,0),o.enable(o.BLEND),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA)):o.disable(o.BLEND),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),o.viewport(0,0,o.canvas.width,o.canvas.height);var s=nM(r),u=r.getCachedZSortedEles();if(a=u.length,i.startFrame(s,t),t.screen){for(var l=0;l<u.nondrag.length;l++)P_(r,l,u.nondrag[l]);for(var c=0;c<u.drag.length;c++)P_(r,c,u.drag[c])}else if(t.picking)for(var f=0;f<u.length;f++)P_(r,f,u[f]);i.endFrame(),t.screen&&r.webglDebugShowAtlases&&(oM(r),aM(r)),r.data.canvasNeedsRedraw[r.NODE]=!1,r.data.canvasNeedsRedraw[r.DRAG]=!1}if(r.webglDebug){var h=performance.now(),d=!1,v=Math.ceil(h-n),y=i.getDebugInfo(),w=["".concat(a," elements"),"".concat(y.totalInstances," instances"),"".concat(y.batchCount," batches"),"".concat(y.totalAtlases," atlases"),"".concat(y.wrappedCount," wrapped textures"),"".concat(y.simpleCount," simple shapes")].join(", ");if(d)"WebGL (".concat(t.name,") - time ").concat(v,"ms, ").concat(w);else{"WebGL (".concat(t.name,") - frame time ").concat(v,"ms"),"  ".concat(w);var b=y.atlasInfo,p=Gs(b),m;try{for(p.s();!(m=p.n()).done;){var x=m.value;"  ".concat(x.type,": ").concat(x.keyCount," keys, ").concat(x.atlasCount," atlases")}}catch(T){p.e(T)}finally{p.f()}}}r.data.gc&&(r.data.gc=!1,i.gc())}var yd={};yd.drawPolygonPath=function(r,e,t,n,i,a){var o=n/2,s=i/2;r.beginPath&&r.beginPath(),r.moveTo(e+o*a[0],t+s*a[1]);for(var u=1;u<a.length/2;u++)r.lineTo(e+o*a[u*2],t+s*a[u*2+1]);r.closePath()};yd.drawRoundPolygonPath=function(r,e,t,n,i,a,o){o.forEach(function(s){return VT(r,s)}),r.closePath()};yd.drawRoundRectanglePath=function(r,e,t,n,i,a){var o=n/2,s=i/2,u=a==="auto"?sd(n,i):Math.min(a,s,o);r.beginPath&&r.beginPath(),r.moveTo(e,t-s),r.arcTo(e+o,t-s,e+o,t,u),r.arcTo(e+o,t+s,e,t+s,u),r.arcTo(e-o,t+s,e-o,t,u),r.arcTo(e-o,t-s,e,t-s,u),r.lineTo(e,t-s),r.closePath()};yd.drawBottomRoundRectanglePath=function(r,e,t,n,i,a){var o=n/2,s=i/2,u=a==="auto"?sd(n,i):a;r.beginPath&&r.beginPath(),r.moveTo(e,t-s),r.lineTo(e+o,t-s),r.lineTo(e+o,t),r.arcTo(e+o,t+s,e,t+s,u),r.arcTo(e-o,t+s,e-o,t,u),r.lineTo(e-o,t-s),r.lineTo(e,t-s),r.closePath()};yd.drawCutRectanglePath=function(r,e,t,n,i,a,o){var s=n/2,u=i/2,l=o==="auto"?n1():o;r.beginPath&&r.beginPath(),r.moveTo(e-s+l,t-u),r.lineTo(e+s-l,t-u),r.lineTo(e+s,t-u+l),r.lineTo(e+s,t+u-l),r.lineTo(e+s-l,t+u),r.lineTo(e-s+l,t+u),r.lineTo(e-s,t+u-l),r.lineTo(e-s,t-u+l),r.closePath()};yd.drawBarrelPath=function(r,e,t,n,i){var a=n/2,o=i/2,s=e-a,u=e+a,l=t-o,c=t+o,f=ww(n,i),h=f.widthOffset,d=f.heightOffset,v=f.ctrlPtOffsetPct*h;r.beginPath&&r.beginPath(),r.moveTo(s,l+d),r.lineTo(s,c-d),r.quadraticCurveTo(s+v,c,s+h,c),r.lineTo(u-h,c),r.quadraticCurveTo(u-v,c,u,c-d),r.lineTo(u,l+d),r.quadraticCurveTo(u-v,l,u-h,l),r.lineTo(s+h,l),r.quadraticCurveTo(s+v,l,s,l+d),r.closePath()};var oO=Math.sin(0),aO=Math.cos(0),Nw={},jw={},l2=Math.PI/40;for(var Bp=0*Math.PI;Bp<2*Math.PI;Bp+=l2)Nw[Bp]=Math.sin(Bp),jw[Bp]=Math.cos(Bp);yd.drawEllipsePath=function(r,e,t,n,i){if(r.beginPath&&r.beginPath(),r.ellipse)r.ellipse(e,t,n/2,i/2,0,0,2*Math.PI);else for(var a,o,s=n/2,u=i/2,l=0*Math.PI;l<2*Math.PI;l+=l2)a=e-s*Nw[l]*oO+s*jw[l]*aO,o=t+u*jw[l]*oO+u*Nw[l]*aO,l===0?r.moveTo(a,o):r.lineTo(a,o);r.closePath()};var Cy={};Cy.createBuffer=function(r,e){var t=document.createElement("canvas");return t.width=r,t.height=e,[t,t.getContext("2d")]};Cy.bufferCanvasImage=function(r){var e=this.cy,t=e.mutableElements(),n=t.boundingBox(),i=this.findContainerClientCoords(),a=r.full?Math.ceil(n.w):i[2],o=r.full?Math.ceil(n.h):i[3],s=Gt(r.maxWidth)||Gt(r.maxHeight),u=this.getPixelRatio(),l=1;if(r.scale!==void 0)a*=r.scale,o*=r.scale,l=r.scale;else if(s){var c=1/0,f=1/0;Gt(r.maxWidth)&&(c=l*r.maxWidth/a),Gt(r.maxHeight)&&(f=l*r.maxHeight/o),l=Math.min(c,f),a*=l,o*=l}s||(a*=u,o*=u,l*=u);var h=document.createElement("canvas");h.width=a,h.height=o,h.style.width=a+"px",h.style.height=o+"px";var d=h.getContext("2d");if(a>0&&o>0){d.clearRect(0,0,a,o),d.globalCompositeOperation="source-over";var v=this.getCachedZSortedEles();if(r.full)d.translate(-n.x1*l,-n.y1*l),d.scale(l,l),this.drawElements(d,v),d.scale(1/l,1/l),d.translate(n.x1*l,n.y1*l);else{var y=e.pan(),w={x:y.x*l,y:y.y*l};l*=e.zoom(),d.translate(w.x,w.y),d.scale(l,l),this.drawElements(d,v),d.scale(1/l,1/l),d.translate(-w.x,-w.y)}r.bg&&(d.globalCompositeOperation="destination-over",d.fillStyle=r.bg,d.rect(0,0,a,o),d.fill())}return h};function lM(r,e){for(var t=atob(r),n=new ArrayBuffer(t.length),i=new Uint8Array(n),a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return new Blob([n],{type:e})}function sO(r){var e=r.indexOf(",");return r.substr(e+1)}function c2(r,e,t){var n=function(){return e.toDataURL(t,r.quality)};switch(r.output){case"blob-promise":return new ag(function(i,a){try{e.toBlob(function(o){o!=null?i(o):a(new Error("`canvas.toBlob()` sent a null value in its callback"))},t,r.quality)}catch(o){a(o)}});case"blob":return lM(sO(n()),t);case"base64":return sO(n());case"base64uri":default:return n()}}Cy.png=function(r){return c2(r,this.bufferCanvasImage(r),"image/png")};Cy.jpg=function(r){return c2(r,this.bufferCanvasImage(r),"image/jpeg")};var f2={};f2.nodeShapeImpl=function(r,e,t,n,i,a,o,s){switch(r){case"ellipse":return this.drawEllipsePath(e,t,n,i,a);case"polygon":return this.drawPolygonPath(e,t,n,i,a,o);case"round-polygon":return this.drawRoundPolygonPath(e,t,n,i,a,o,s);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,t,n,i,a,s);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,t,n,i,a,o,s);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,t,n,i,a,s);case"barrel":return this.drawBarrelPath(e,t,n,i,a)}};var cM=h2,Qr=h2.prototype;Qr.CANVAS_LAYERS=3;Qr.SELECT_BOX=0;Qr.DRAG=1;Qr.NODE=2;Qr.WEBGL=3;Qr.CANVAS_TYPES=["2d","2d","2d","webgl2"];Qr.BUFFER_COUNT=3;Qr.TEXTURE_BUFFER=0;Qr.MOTIONBLUR_BUFFER_NODE=1;Qr.MOTIONBLUR_BUFFER_DRAG=2;function h2(r){var e=this,t=e.cy.window(),n=t.document;r.webgl&&(Qr.CANVAS_LAYERS=e.CANVAS_LAYERS=4),e.data={canvases:new Array(Qr.CANVAS_LAYERS),contexts:new Array(Qr.CANVAS_LAYERS),canvasNeedsRedraw:new Array(Qr.CANVAS_LAYERS),bufferCanvases:new Array(Qr.BUFFER_COUNT),bufferContexts:new Array(Qr.CANVAS_LAYERS)};var i="-webkit-tap-highlight-color",a="rgba(0,0,0,0)";e.data.canvasContainer=n.createElement("div");var o=e.data.canvasContainer.style;e.data.canvasContainer.style[i]=a,o.position="relative",o.zIndex="0",o.overflow="hidden";var s=r.cy.container();s.appendChild(e.data.canvasContainer),s.style[i]=a;var u={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};uP()&&(u["-ms-touch-action"]="none",u["touch-action"]="none");for(var l=0;l<Qr.CANVAS_LAYERS;l++){var c=e.data.canvases[l]=n.createElement("canvas"),f=Qr.CANVAS_TYPES[l];e.data.contexts[l]=c.getContext(f),e.data.contexts[l]||qi("Could not create canvas of type "+f),Object.keys(u).forEach(function(Re){c.style[Re]=u[Re]}),c.style.position="absolute",c.setAttribute("data-id","layer"+l),c.style.zIndex=String(Qr.CANVAS_LAYERS-l),e.data.canvasContainer.appendChild(c),e.data.canvasNeedsRedraw[l]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[Qr.NODE].setAttribute("data-id","layer"+Qr.NODE+"-node"),e.data.canvases[Qr.SELECT_BOX].setAttribute("data-id","layer"+Qr.SELECT_BOX+"-selectbox"),e.data.canvases[Qr.DRAG].setAttribute("data-id","layer"+Qr.DRAG+"-drag"),e.data.canvases[Qr.WEBGL]&&e.data.canvases[Qr.WEBGL].setAttribute("data-id","layer"+Qr.WEBGL+"-webgl");for(var l=0;l<Qr.BUFFER_COUNT;l++)e.data.bufferCanvases[l]=n.createElement("canvas"),e.data.bufferContexts[l]=e.data.bufferCanvases[l].getContext("2d"),e.data.bufferCanvases[l].style.position="absolute",e.data.bufferCanvases[l].setAttribute("data-id","buffer"+l),e.data.bufferCanvases[l].style.zIndex=String(-l-1),e.data.bufferCanvases[l].style.visibility="hidden";e.pathsEnabled=!0;var h=qs(),d=function(ve){return{x:(ve.x1+ve.x2)/2,y:(ve.y1+ve.y2)/2}},v=function(ve){return{x:-ve.w/2,y:-ve.h/2}},y=function(ve){var we=ve[0]._private,Oe=we.oldBackgroundTimestamp===we.backgroundTimestamp;return!Oe},w=function(ve){return ve[0]._private.nodeKey},b=function(ve){return ve[0]._private.labelStyleKey},p=function(ve){return ve[0]._private.sourceLabelStyleKey},m=function(ve){return ve[0]._private.targetLabelStyleKey},x=function(ve,we,Oe,Be,Ye){return e.drawElement(ve,we,Oe,!1,!1,Ye)},T=function(ve,we,Oe,Be,Ye){return e.drawElementText(ve,we,Oe,Be,"main",Ye)},P=function(ve,we,Oe,Be,Ye){return e.drawElementText(ve,we,Oe,Be,"source",Ye)},C=function(ve,we,Oe,Be,Ye){return e.drawElementText(ve,we,Oe,Be,"target",Ye)},R=function(ve){return ve.boundingBox(),ve[0]._private.bodyBounds},D=function(ve){return ve.boundingBox(),ve[0]._private.labelBounds.main||h},N=function(ve){return ve.boundingBox(),ve[0]._private.labelBounds.source||h},j=function(ve){return ve.boundingBox(),ve[0]._private.labelBounds.target||h},B=function(ve,we){return we},z=function(ve){return d(R(ve))},W=function(ve,we,Oe){var Be=ve?ve+"-":"";return{x:we.x+Oe.pstyle(Be+"text-margin-x").pfValue,y:we.y+Oe.pstyle(Be+"text-margin-y").pfValue}},Z=function(ve,we,Oe){var Be=ve[0]._private.rscratch;return{x:Be[we],y:Be[Oe]}},Q=function(ve){return W("",Z(ve,"labelX","labelY"),ve)},re=function(ve){return W("source",Z(ve,"sourceLabelX","sourceLabelY"),ve)},ee=function(ve){return W("target",Z(ve,"targetLabelX","targetLabelY"),ve)},ue=function(ve){return v(R(ve))},de=function(ve){return v(N(ve))},se=function(ve){return v(j(ve))},me=function(ve){var we=D(ve),Oe=v(D(ve));if(ve.isNode()){switch(ve.pstyle("text-halign").value){case"left":Oe.x=-we.w-(we.leftPad||0);break;case"right":Oe.x=-(we.rightPad||0);break}switch(ve.pstyle("text-valign").value){case"top":Oe.y=-we.h-(we.topPad||0);break;case"bottom":Oe.y=-(we.botPad||0);break}}return Oe},Me=e.data.eleTxrCache=new $g(e,{getKey:w,doesEleInvalidateKey:y,drawElement:x,getBoundingBox:R,getRotationPoint:z,getRotationOffset:ue,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),he=e.data.lblTxrCache=new $g(e,{getKey:b,drawElement:T,getBoundingBox:D,getRotationPoint:Q,getRotationOffset:me,isVisible:B}),fe=e.data.slbTxrCache=new $g(e,{getKey:p,drawElement:P,getBoundingBox:N,getRotationPoint:re,getRotationOffset:de,isVisible:B}),Ee=e.data.tlbTxrCache=new $g(e,{getKey:m,drawElement:C,getBoundingBox:j,getRotationPoint:ee,getRotationOffset:se,isVisible:B}),Ce=e.data.lyrTxrCache=new JT(e);e.onUpdateEleCalcs(function(ve,we){Me.invalidateElements(we),he.invalidateElements(we),fe.invalidateElements(we),Ee.invalidateElements(we),Ce.invalidateElements(we);for(var Oe=0;Oe<we.length;Oe++){var Be=we[Oe]._private;Be.oldBackgroundTimestamp=Be.backgroundTimestamp}});var ke=function(ve){for(var we=0;we<ve.length;we++)Ce.enqueueElementRefinement(ve[we].ele)};Me.onDequeue(ke),he.onDequeue(ke),fe.onDequeue(ke),Ee.onDequeue(ke),r.webgl&&e.initWebgl(r,{getStyleKey:w,getLabelKey:b,getSourceLabelKey:p,getTargetLabelKey:m,drawElement:x,drawLabel:T,drawSourceLabel:P,drawTargetLabel:C,getElementBox:R,getLabelBox:D,getSourceLabelBox:N,getTargetLabelBox:j,getElementRotationPoint:z,getElementRotationOffset:ue,getLabelRotationPoint:Q,getSourceLabelRotationPoint:re,getTargetLabelRotationPoint:ee,getLabelRotationOffset:me,getSourceLabelRotationOffset:de,getTargetLabelRotationOffset:se})}Qr.redrawHint=function(r,e){var t=this;switch(r){case"eles":t.data.canvasNeedsRedraw[Qr.NODE]=e;break;case"drag":t.data.canvasNeedsRedraw[Qr.DRAG]=e;break;case"select":t.data.canvasNeedsRedraw[Qr.SELECT_BOX]=e;break;case"gc":t.data.gc=!0;break}};var fM=typeof Path2D<"u";Qr.path2dEnabled=function(r){if(r===void 0)return this.pathsEnabled;this.pathsEnabled=!!r};Qr.usePaths=function(){return fM&&this.pathsEnabled};Qr.setImgSmoothing=function(r,e){r.imageSmoothingEnabled!=null?r.imageSmoothingEnabled=e:(r.webkitImageSmoothingEnabled=e,r.mozImageSmoothingEnabled=e,r.msImageSmoothingEnabled=e)};Qr.getImgSmoothing=function(r){return r.imageSmoothingEnabled!=null?r.imageSmoothingEnabled:r.webkitImageSmoothingEnabled||r.mozImageSmoothingEnabled||r.msImageSmoothingEnabled};Qr.makeOffscreenCanvas=function(r,e){var t;if((typeof OffscreenCanvas>"u"?"undefined":Bo(OffscreenCanvas))!=="undefined")t=new OffscreenCanvas(r,e);else{var n=this.cy.window(),i=n.document;t=i.createElement("canvas"),t.width=r,t.height=e}return t};[e2,Zc,ih,g1,Gv,gd,bs,o2,yd,Cy,f2].forEach(function(r){xr(Qr,r)});var hM=[{name:"null",impl:UT},{name:"base",impl:$T},{name:"canvas",impl:cM}],dM=[{type:"layout",extensions:Fk},{type:"renderer",extensions:hM}],d2={},v2={};function p2(r,e,t){var n=t,i=function(R){Fn("Can not register `"+e+"` for `"+r+"` since `"+R+"` already exists in the prototype and can not be overridden")};if(r==="core"){if(dy.prototype[e])return i(e);dy.prototype[e]=t}else if(r==="collection"){if(xa.prototype[e])return i(e);xa.prototype[e]=t}else if(r==="layout"){for(var a=function(R){this.options=R,t.call(this,R),wn(this._private)||(this._private={}),this._private.cy=R.cy,this._private.listeners=[],this.createEmitter()},o=a.prototype=Object.create(t.prototype),s=[],u=0;u<s.length;u++){var l=s[u];o[l]=o[l]||function(){return this}}o.start&&!o.run?o.run=function(){return this.start(),this}:!o.start&&o.run&&(o.start=function(){return this.run(),this});var c=t.prototype.stop;o.stop=function(){var C=this.options;if(C&&C.animate){var R=this.animations;if(R)for(var D=0;D<R.length;D++)R[D].stop()}return c?c.call(this):this.emit("layoutstop"),this},o.destroy||(o.destroy=function(){return this}),o.cy=function(){return this._private.cy};var f=function(R){return R._private.cy},h={addEventFields:function(R,D){D.layout=R,D.cy=f(R),D.target=R},bubble:function(){return!0},parent:function(R){return f(R)}};xr(o,{createEmitter:function(){return this._private.emitter=new d0(h,this),this},emitter:function(){return this._private.emitter},on:function(R,D){return this.emitter().on(R,D),this},one:function(R,D){return this.emitter().one(R,D),this},once:function(R,D){return this.emitter().one(R,D),this},removeListener:function(R,D){return this.emitter().removeListener(R,D),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(R,D){return this.emitter().emit(R,D),this}}),Bn.eventAliasesOn(o),n=a}else if(r==="renderer"&&e!=="null"&&e!=="base"){var d=g2("renderer","base"),v=d.prototype,y=t,w=t.prototype,b=function(){d.apply(this,arguments),y.apply(this,arguments)},p=b.prototype;for(var m in v){var x=v[m],T=w[m]!=null;if(T)return i(m);p[m]=x}for(var P in w)p[P]=w[P];v.clientFunctions.forEach(function(C){p[C]=p[C]||function(){qi("Renderer does not implement `renderer."+C+"()` on its prototype")}}),n=b}else if(r==="__proto__"||r==="constructor"||r==="prototype")return qi(r+" is an illegal type to be registered, possibly lead to prototype pollutions");return NS({map:d2,keys:[r,e],value:n})}function g2(r,e){return jS({map:d2,keys:[r,e]})}function vM(r,e,t,n,i){return NS({map:v2,keys:[r,e,t,n],value:i})}function pM(r,e,t,n){return jS({map:v2,keys:[r,e,t,n]})}var Bw=function(){if(arguments.length===2)return g2.apply(null,arguments);if(arguments.length===3)return p2.apply(null,arguments);if(arguments.length===4)return pM.apply(null,arguments);if(arguments.length===5)return vM.apply(null,arguments);qi("Invalid extension access syntax")};dy.prototype.extension=Bw;dM.forEach(function(r){r.extensions.forEach(function(e){p2(r.type,e.name,e.impl)})});var Zm=function(){if(!(this instanceof Zm))return new Zm;this.length=0},Fv=Zm.prototype;Fv.instanceString=function(){return"stylesheet"};Fv.selector=function(r){var e=this.length++;return this[e]={selector:r,properties:[]},this};Fv.css=function(r,e){var t=this.length-1;if(yr(r))this[t].properties.push({name:r,value:e});else if(wn(r))for(var n=r,i=Object.keys(n),a=0;a<i.length;a++){var o=i[a],s=n[o];if(s!=null){var u=ta.properties[o]||ta.properties[n0(o)];if(u!=null){var l=u.name,c=s;this[t].properties.push({name:l,value:c})}}}return this};Fv.style=Fv.css;Fv.generateStyle=function(r){var e=new ta(r);return this.appendToStyle(e)};Fv.appendToStyle=function(r){for(var e=0;e<this.length;e++){var t=this[e],n=t.selector,i=t.properties;r.selector(n);for(var a=0;a<i.length;a++){var o=i[a];r.css(o.name,o.value)}}return r};var gM="3.32.0",fd=function(e){if(e===void 0&&(e={}),wn(e))return new dy(e);if(yr(e))return Bw.apply(Bw,arguments)};fd.use=function(r){var e=Array.prototype.slice.call(arguments,1);return e.unshift(fd),r.apply(null,e),this};fd.warnings=function(r){return qS(r)};fd.version=gM;fd.stylesheet=fd.Stylesheet=Zm;var km={exports:{}},Dm={exports:{}},Mm={exports:{}},yM=Mm.exports,uO;function mM(){return uO||(uO=1,function(r,e){(function(n,i){r.exports=i()})(yM,function(){return function(t){var n={};function i(a){if(n[a])return n[a].exports;var o=n[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=n,i.i=function(a){return a},i.d=function(a,o,s){i.o(a,o)||Object.defineProperty(a,o,{configurable:!1,enumerable:!0,get:s})},i.n=function(a){var o=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(o,"a",o),o},i.o=function(a,o){return Object.prototype.hasOwnProperty.call(a,o)},i.p="",i(i.s=26)}([function(t,n,i){function a(){}a.QUALITY=1,a.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,a.DEFAULT_INCREMENTAL=!1,a.DEFAULT_ANIMATION_ON_LAYOUT=!0,a.DEFAULT_ANIMATION_DURING_LAYOUT=!1,a.DEFAULT_ANIMATION_PERIOD=50,a.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,a.DEFAULT_GRAPH_MARGIN=15,a.NODE_DIMENSIONS_INCLUDE_LABELS=!1,a.SIMPLE_NODE_SIZE=40,a.SIMPLE_NODE_HALF_SIZE=a.SIMPLE_NODE_SIZE/2,a.EMPTY_COMPOUND_NODE_SIZE=40,a.MIN_EDGE_LENGTH=1,a.WORLD_BOUNDARY=1e6,a.INITIAL_WORLD_BOUNDARY=a.WORLD_BOUNDARY/1e3,a.WORLD_CENTER_X=1200,a.WORLD_CENTER_Y=900,t.exports=a},function(t,n,i){var a=i(2),o=i(8),s=i(9);function u(c,f,h){a.call(this,h),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=h,this.bendpoints=[],this.source=c,this.target=f}u.prototype=Object.create(a.prototype);for(var l in a)u[l]=a[l];u.prototype.getSource=function(){return this.source},u.prototype.getTarget=function(){return this.target},u.prototype.isInterGraph=function(){return this.isInterGraph},u.prototype.getLength=function(){return this.length},u.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},u.prototype.getBendpoints=function(){return this.bendpoints},u.prototype.getLca=function(){return this.lca},u.prototype.getSourceInLca=function(){return this.sourceInLca},u.prototype.getTargetInLca=function(){return this.targetInLca},u.prototype.getOtherEnd=function(c){if(this.source===c)return this.target;if(this.target===c)return this.source;throw"Node is not incident with this edge"},u.prototype.getOtherEndInGraph=function(c,f){for(var h=this.getOtherEnd(c),d=f.getGraphManager().getRoot();;){if(h.getOwner()==f)return h;if(h.getOwner()==d)break;h=h.getOwner().getParent()}return null},u.prototype.updateLength=function(){var c=new Array(4);this.isOverlapingSourceAndTarget=o.getIntersection(this.target.getRect(),this.source.getRect(),c),this.isOverlapingSourceAndTarget||(this.lengthX=c[0]-c[2],this.lengthY=c[1]-c[3],Math.abs(this.lengthX)<1&&(this.lengthX=s.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=s.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},u.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=s.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=s.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},t.exports=u},function(t,n,i){function a(o){this.vGraphObject=o}t.exports=a},function(t,n,i){var a=i(2),o=i(10),s=i(13),u=i(0),l=i(16),c=i(4);function f(d,v,y,w){y==null&&w==null&&(w=v),a.call(this,w),d.graphManager!=null&&(d=d.graphManager),this.estimatedSize=o.MIN_VALUE,this.inclusionTreeDepth=o.MAX_VALUE,this.vGraphObject=w,this.edges=[],this.graphManager=d,y!=null&&v!=null?this.rect=new s(v.x,v.y,y.width,y.height):this.rect=new s}f.prototype=Object.create(a.prototype);for(var h in a)f[h]=a[h];f.prototype.getEdges=function(){return this.edges},f.prototype.getChild=function(){return this.child},f.prototype.getOwner=function(){return this.owner},f.prototype.getWidth=function(){return this.rect.width},f.prototype.setWidth=function(d){this.rect.width=d},f.prototype.getHeight=function(){return this.rect.height},f.prototype.setHeight=function(d){this.rect.height=d},f.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},f.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},f.prototype.getCenter=function(){return new c(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},f.prototype.getLocation=function(){return new c(this.rect.x,this.rect.y)},f.prototype.getRect=function(){return this.rect},f.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},f.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},f.prototype.setRect=function(d,v){this.rect.x=d.x,this.rect.y=d.y,this.rect.width=v.width,this.rect.height=v.height},f.prototype.setCenter=function(d,v){this.rect.x=d-this.rect.width/2,this.rect.y=v-this.rect.height/2},f.prototype.setLocation=function(d,v){this.rect.x=d,this.rect.y=v},f.prototype.moveBy=function(d,v){this.rect.x+=d,this.rect.y+=v},f.prototype.getEdgeListToNode=function(d){var v=[],y=this;return y.edges.forEach(function(w){if(w.target==d){if(w.source!=y)throw"Incorrect edge source!";v.push(w)}}),v},f.prototype.getEdgesBetween=function(d){var v=[],y=this;return y.edges.forEach(function(w){if(!(w.source==y||w.target==y))throw"Incorrect edge source and/or target";(w.target==d||w.source==d)&&v.push(w)}),v},f.prototype.getNeighborsList=function(){var d=new Set,v=this;return v.edges.forEach(function(y){if(y.source==v)d.add(y.target);else{if(y.target!=v)throw"Incorrect incidency!";d.add(y.source)}}),d},f.prototype.withChildren=function(){var d=new Set,v,y;if(d.add(this),this.child!=null)for(var w=this.child.getNodes(),b=0;b<w.length;b++)v=w[b],y=v.withChildren(),y.forEach(function(p){d.add(p)});return d},f.prototype.getNoOfChildren=function(){var d=0,v;if(this.child==null)d=1;else for(var y=this.child.getNodes(),w=0;w<y.length;w++)v=y[w],d+=v.getNoOfChildren();return d==0&&(d=1),d},f.prototype.getEstimatedSize=function(){if(this.estimatedSize==o.MIN_VALUE)throw"assert failed";return this.estimatedSize},f.prototype.calcEstimatedSize=function(){return this.child==null?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},f.prototype.scatter=function(){var d,v,y=-u.INITIAL_WORLD_BOUNDARY,w=u.INITIAL_WORLD_BOUNDARY;d=u.WORLD_CENTER_X+l.nextDouble()*(w-y)+y;var b=-u.INITIAL_WORLD_BOUNDARY,p=u.INITIAL_WORLD_BOUNDARY;v=u.WORLD_CENTER_Y+l.nextDouble()*(p-b)+b,this.rect.x=d,this.rect.y=v},f.prototype.updateBounds=function(){if(this.getChild()==null)throw"assert failed";if(this.getChild().getNodes().length!=0){var d=this.getChild();if(d.updateBounds(!0),this.rect.x=d.getLeft(),this.rect.y=d.getTop(),this.setWidth(d.getRight()-d.getLeft()),this.setHeight(d.getBottom()-d.getTop()),u.NODE_DIMENSIONS_INCLUDE_LABELS){var v=d.getRight()-d.getLeft(),y=d.getBottom()-d.getTop();this.labelWidth>v&&(this.rect.x-=(this.labelWidth-v)/2,this.setWidth(this.labelWidth)),this.labelHeight>y&&(this.labelPos=="center"?this.rect.y-=(this.labelHeight-y)/2:this.labelPos=="top"&&(this.rect.y-=this.labelHeight-y),this.setHeight(this.labelHeight))}}},f.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==o.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},f.prototype.transform=function(d){var v=this.rect.x;v>u.WORLD_BOUNDARY?v=u.WORLD_BOUNDARY:v<-u.WORLD_BOUNDARY&&(v=-u.WORLD_BOUNDARY);var y=this.rect.y;y>u.WORLD_BOUNDARY?y=u.WORLD_BOUNDARY:y<-u.WORLD_BOUNDARY&&(y=-u.WORLD_BOUNDARY);var w=new c(v,y),b=d.inverseTransformPoint(w);this.setLocation(b.x,b.y)},f.prototype.getLeft=function(){return this.rect.x},f.prototype.getRight=function(){return this.rect.x+this.rect.width},f.prototype.getTop=function(){return this.rect.y},f.prototype.getBottom=function(){return this.rect.y+this.rect.height},f.prototype.getParent=function(){return this.owner==null?null:this.owner.getParent()},t.exports=f},function(t,n,i){function a(o,s){o==null&&s==null?(this.x=0,this.y=0):(this.x=o,this.y=s)}a.prototype.getX=function(){return this.x},a.prototype.getY=function(){return this.y},a.prototype.setX=function(o){this.x=o},a.prototype.setY=function(o){this.y=o},a.prototype.getDifference=function(o){return new DimensionD(this.x-o.x,this.y-o.y)},a.prototype.getCopy=function(){return new a(this.x,this.y)},a.prototype.translate=function(o){return this.x+=o.width,this.y+=o.height,this},t.exports=a},function(t,n,i){var a=i(2),o=i(10),s=i(0),u=i(6),l=i(3),c=i(1),f=i(13),h=i(12),d=i(11);function v(w,b,p){a.call(this,p),this.estimatedSize=o.MIN_VALUE,this.margin=s.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=w,b!=null&&b instanceof u?this.graphManager=b:b!=null&&b instanceof Layout&&(this.graphManager=b.graphManager)}v.prototype=Object.create(a.prototype);for(var y in a)v[y]=a[y];v.prototype.getNodes=function(){return this.nodes},v.prototype.getEdges=function(){return this.edges},v.prototype.getGraphManager=function(){return this.graphManager},v.prototype.getParent=function(){return this.parent},v.prototype.getLeft=function(){return this.left},v.prototype.getRight=function(){return this.right},v.prototype.getTop=function(){return this.top},v.prototype.getBottom=function(){return this.bottom},v.prototype.isConnected=function(){return this.isConnected},v.prototype.add=function(w,b,p){if(b==null&&p==null){var m=w;if(this.graphManager==null)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(m)>-1)throw"Node already in graph!";return m.owner=this,this.getNodes().push(m),m}else{var x=w;if(!(this.getNodes().indexOf(b)>-1&&this.getNodes().indexOf(p)>-1))throw"Source or target not in graph!";if(!(b.owner==p.owner&&b.owner==this))throw"Both owners must be this graph!";return b.owner!=p.owner?null:(x.source=b,x.target=p,x.isInterGraph=!1,this.getEdges().push(x),b.edges.push(x),p!=b&&p.edges.push(x),x)}},v.prototype.remove=function(w){var b=w;if(w instanceof l){if(b==null)throw"Node is null!";if(!(b.owner!=null&&b.owner==this))throw"Owner graph is invalid!";if(this.graphManager==null)throw"Owner graph manager is invalid!";for(var p=b.edges.slice(),m,x=p.length,T=0;T<x;T++)m=p[T],m.isInterGraph?this.graphManager.remove(m):m.source.owner.remove(m);var P=this.nodes.indexOf(b);if(P==-1)throw"Node not in owner node list!";this.nodes.splice(P,1)}else if(w instanceof c){var m=w;if(m==null)throw"Edge is null!";if(!(m.source!=null&&m.target!=null))throw"Source and/or target is null!";if(!(m.source.owner!=null&&m.target.owner!=null&&m.source.owner==this&&m.target.owner==this))throw"Source and/or target owner is invalid!";var C=m.source.edges.indexOf(m),R=m.target.edges.indexOf(m);if(!(C>-1&&R>-1))throw"Source and/or target doesn't know this edge!";m.source.edges.splice(C,1),m.target!=m.source&&m.target.edges.splice(R,1);var P=m.source.owner.getEdges().indexOf(m);if(P==-1)throw"Not in owner's edge list!";m.source.owner.getEdges().splice(P,1)}},v.prototype.updateLeftTop=function(){for(var w=o.MAX_VALUE,b=o.MAX_VALUE,p,m,x,T=this.getNodes(),P=T.length,C=0;C<P;C++){var R=T[C];p=R.getTop(),m=R.getLeft(),w>p&&(w=p),b>m&&(b=m)}return w==o.MAX_VALUE?null:(T[0].getParent().paddingLeft!=null?x=T[0].getParent().paddingLeft:x=this.margin,this.left=b-x,this.top=w-x,new h(this.left,this.top))},v.prototype.updateBounds=function(w){for(var b=o.MAX_VALUE,p=-o.MAX_VALUE,m=o.MAX_VALUE,x=-o.MAX_VALUE,T,P,C,R,D,N=this.nodes,j=N.length,B=0;B<j;B++){var z=N[B];w&&z.child!=null&&z.updateBounds(),T=z.getLeft(),P=z.getRight(),C=z.getTop(),R=z.getBottom(),b>T&&(b=T),p<P&&(p=P),m>C&&(m=C),x<R&&(x=R)}var W=new f(b,m,p-b,x-m);b==o.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),N[0].getParent().paddingLeft!=null?D=N[0].getParent().paddingLeft:D=this.margin,this.left=W.x-D,this.right=W.x+W.width+D,this.top=W.y-D,this.bottom=W.y+W.height+D},v.calculateBounds=function(w){for(var b=o.MAX_VALUE,p=-o.MAX_VALUE,m=o.MAX_VALUE,x=-o.MAX_VALUE,T,P,C,R,D=w.length,N=0;N<D;N++){var j=w[N];T=j.getLeft(),P=j.getRight(),C=j.getTop(),R=j.getBottom(),b>T&&(b=T),p<P&&(p=P),m>C&&(m=C),x<R&&(x=R)}var B=new f(b,m,p-b,x-m);return B},v.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},v.prototype.getEstimatedSize=function(){if(this.estimatedSize==o.MIN_VALUE)throw"assert failed";return this.estimatedSize},v.prototype.calcEstimatedSize=function(){for(var w=0,b=this.nodes,p=b.length,m=0;m<p;m++){var x=b[m];w+=x.calcEstimatedSize()}return w==0?this.estimatedSize=s.EMPTY_COMPOUND_NODE_SIZE:this.estimatedSize=w/Math.sqrt(this.nodes.length),this.estimatedSize},v.prototype.updateConnected=function(){var w=this;if(this.nodes.length==0){this.isConnected=!0;return}var b=new d,p=new Set,m=this.nodes[0],x,T,P=m.withChildren();for(P.forEach(function(B){b.push(B),p.add(B)});b.length!==0;){m=b.shift(),x=m.getEdges();for(var C=x.length,R=0;R<C;R++){var D=x[R];if(T=D.getOtherEndInGraph(m,this),T!=null&&!p.has(T)){var N=T.withChildren();N.forEach(function(B){b.push(B),p.add(B)})}}}if(this.isConnected=!1,p.size>=this.nodes.length){var j=0;p.forEach(function(B){B.owner==w&&j++}),j==this.nodes.length&&(this.isConnected=!0)}},t.exports=v},function(t,n,i){var a,o=i(1);function s(u){a=i(5),this.layout=u,this.graphs=[],this.edges=[]}s.prototype.addRoot=function(){var u=this.layout.newGraph(),l=this.layout.newNode(null),c=this.add(u,l);return this.setRootGraph(c),this.rootGraph},s.prototype.add=function(u,l,c,f,h){if(c==null&&f==null&&h==null){if(u==null)throw"Graph is null!";if(l==null)throw"Parent node is null!";if(this.graphs.indexOf(u)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(u),u.parent!=null)throw"Already has a parent!";if(l.child!=null)throw"Already has a child!";return u.parent=l,l.child=u,u}else{h=c,f=l,c=u;var d=f.getOwner(),v=h.getOwner();if(!(d!=null&&d.getGraphManager()==this))throw"Source not in this graph mgr!";if(!(v!=null&&v.getGraphManager()==this))throw"Target not in this graph mgr!";if(d==v)return c.isInterGraph=!1,d.add(c,f,h);if(c.isInterGraph=!0,c.source=f,c.target=h,this.edges.indexOf(c)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(c),!(c.source!=null&&c.target!=null))throw"Edge source and/or target is null!";if(!(c.source.edges.indexOf(c)==-1&&c.target.edges.indexOf(c)==-1))throw"Edge already in source and/or target incidency list!";return c.source.edges.push(c),c.target.edges.push(c),c}},s.prototype.remove=function(u){if(u instanceof a){var l=u;if(l.getGraphManager()!=this)throw"Graph not in this graph mgr";if(!(l==this.rootGraph||l.parent!=null&&l.parent.graphManager==this))throw"Invalid parent node!";var c=[];c=c.concat(l.getEdges());for(var f,h=c.length,d=0;d<h;d++)f=c[d],l.remove(f);var v=[];v=v.concat(l.getNodes());var y;h=v.length;for(var d=0;d<h;d++)y=v[d],l.remove(y);l==this.rootGraph&&this.setRootGraph(null);var w=this.graphs.indexOf(l);this.graphs.splice(w,1),l.parent=null}else if(u instanceof o){if(f=u,f==null)throw"Edge is null!";if(!f.isInterGraph)throw"Not an inter-graph edge!";if(!(f.source!=null&&f.target!=null))throw"Source and/or target is null!";if(!(f.source.edges.indexOf(f)!=-1&&f.target.edges.indexOf(f)!=-1))throw"Source and/or target doesn't know this edge!";var w=f.source.edges.indexOf(f);if(f.source.edges.splice(w,1),w=f.target.edges.indexOf(f),f.target.edges.splice(w,1),!(f.source.owner!=null&&f.source.owner.getGraphManager()!=null))throw"Edge owner graph or owner graph manager is null!";if(f.source.owner.getGraphManager().edges.indexOf(f)==-1)throw"Not in owner graph manager's edge list!";var w=f.source.owner.getGraphManager().edges.indexOf(f);f.source.owner.getGraphManager().edges.splice(w,1)}},s.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},s.prototype.getGraphs=function(){return this.graphs},s.prototype.getAllNodes=function(){if(this.allNodes==null){for(var u=[],l=this.getGraphs(),c=l.length,f=0;f<c;f++)u=u.concat(l[f].getNodes());this.allNodes=u}return this.allNodes},s.prototype.resetAllNodes=function(){this.allNodes=null},s.prototype.resetAllEdges=function(){this.allEdges=null},s.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},s.prototype.getAllEdges=function(){if(this.allEdges==null){var u=[],l=this.getGraphs();l.length;for(var c=0;c<l.length;c++)u=u.concat(l[c].getEdges());u=u.concat(this.edges),this.allEdges=u}return this.allEdges},s.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},s.prototype.setAllNodesToApplyGravitation=function(u){if(this.allNodesToApplyGravitation!=null)throw"assert failed";this.allNodesToApplyGravitation=u},s.prototype.getRoot=function(){return this.rootGraph},s.prototype.setRootGraph=function(u){if(u.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=u,u.parent==null&&(u.parent=this.layout.newNode("Root node"))},s.prototype.getLayout=function(){return this.layout},s.prototype.isOneAncestorOfOther=function(u,l){if(!(u!=null&&l!=null))throw"assert failed";if(u==l)return!0;var c=u.getOwner(),f;do{if(f=c.getParent(),f==null)break;if(f==l)return!0;if(c=f.getOwner(),c==null)break}while(!0);c=l.getOwner();do{if(f=c.getParent(),f==null)break;if(f==u)return!0;if(c=f.getOwner(),c==null)break}while(!0);return!1},s.prototype.calcLowestCommonAncestors=function(){for(var u,l,c,f,h,d=this.getAllEdges(),v=d.length,y=0;y<v;y++){if(u=d[y],l=u.source,c=u.target,u.lca=null,u.sourceInLca=l,u.targetInLca=c,l==c){u.lca=l.getOwner();continue}for(f=l.getOwner();u.lca==null;){for(u.targetInLca=c,h=c.getOwner();u.lca==null;){if(h==f){u.lca=h;break}if(h==this.rootGraph)break;if(u.lca!=null)throw"assert failed";u.targetInLca=h.getParent(),h=u.targetInLca.getOwner()}if(f==this.rootGraph)break;u.lca==null&&(u.sourceInLca=f.getParent(),f=u.sourceInLca.getOwner())}if(u.lca==null)throw"assert failed"}},s.prototype.calcLowestCommonAncestor=function(u,l){if(u==l)return u.getOwner();var c=u.getOwner();do{if(c==null)break;var f=l.getOwner();do{if(f==null)break;if(f==c)return f;f=f.getParent().getOwner()}while(!0);c=c.getParent().getOwner()}while(!0);return c},s.prototype.calcInclusionTreeDepths=function(u,l){u==null&&l==null&&(u=this.rootGraph,l=1);for(var c,f=u.getNodes(),h=f.length,d=0;d<h;d++)c=f[d],c.inclusionTreeDepth=l,c.child!=null&&this.calcInclusionTreeDepths(c.child,l+1)},s.prototype.includesInvalidEdge=function(){for(var u,l=this.edges.length,c=0;c<l;c++)if(u=this.edges[c],this.isOneAncestorOfOther(u.source,u.target))return!0;return!1},t.exports=s},function(t,n,i){var a=i(0);function o(){}for(var s in a)o[s]=a[s];o.MAX_ITERATIONS=2500,o.DEFAULT_EDGE_LENGTH=50,o.DEFAULT_SPRING_STRENGTH=.45,o.DEFAULT_REPULSION_STRENGTH=4500,o.DEFAULT_GRAVITY_STRENGTH=.4,o.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,o.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,o.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,o.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,o.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,o.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,o.COOLING_ADAPTATION_FACTOR=.33,o.ADAPTATION_LOWER_NODE_LIMIT=1e3,o.ADAPTATION_UPPER_NODE_LIMIT=5e3,o.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,o.MAX_NODE_DISPLACEMENT=o.MAX_NODE_DISPLACEMENT_INCREMENTAL*3,o.MIN_REPULSION_DIST=o.DEFAULT_EDGE_LENGTH/10,o.CONVERGENCE_CHECK_PERIOD=100,o.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,o.MIN_EDGE_LENGTH=1,o.GRID_CALCULATION_CHECK_PERIOD=10,t.exports=o},function(t,n,i){var a=i(12);function o(){}o.calcSeparationAmount=function(s,u,l,c){if(!s.intersects(u))throw"assert failed";var f=new Array(2);this.decideDirectionsForOverlappingNodes(s,u,f),l[0]=Math.min(s.getRight(),u.getRight())-Math.max(s.x,u.x),l[1]=Math.min(s.getBottom(),u.getBottom())-Math.max(s.y,u.y),s.getX()<=u.getX()&&s.getRight()>=u.getRight()?l[0]+=Math.min(u.getX()-s.getX(),s.getRight()-u.getRight()):u.getX()<=s.getX()&&u.getRight()>=s.getRight()&&(l[0]+=Math.min(s.getX()-u.getX(),u.getRight()-s.getRight())),s.getY()<=u.getY()&&s.getBottom()>=u.getBottom()?l[1]+=Math.min(u.getY()-s.getY(),s.getBottom()-u.getBottom()):u.getY()<=s.getY()&&u.getBottom()>=s.getBottom()&&(l[1]+=Math.min(s.getY()-u.getY(),u.getBottom()-s.getBottom()));var h=Math.abs((u.getCenterY()-s.getCenterY())/(u.getCenterX()-s.getCenterX()));u.getCenterY()===s.getCenterY()&&u.getCenterX()===s.getCenterX()&&(h=1);var d=h*l[0],v=l[1]/h;l[0]<v?v=l[0]:d=l[1],l[0]=-1*f[0]*(v/2+c),l[1]=-1*f[1]*(d/2+c)},o.decideDirectionsForOverlappingNodes=function(s,u,l){s.getCenterX()<u.getCenterX()?l[0]=-1:l[0]=1,s.getCenterY()<u.getCenterY()?l[1]=-1:l[1]=1},o.getIntersection2=function(s,u,l){var c=s.getCenterX(),f=s.getCenterY(),h=u.getCenterX(),d=u.getCenterY();if(s.intersects(u))return l[0]=c,l[1]=f,l[2]=h,l[3]=d,!0;var v=s.getX(),y=s.getY(),w=s.getRight(),b=s.getX(),p=s.getBottom(),m=s.getRight(),x=s.getWidthHalf(),T=s.getHeightHalf(),P=u.getX(),C=u.getY(),R=u.getRight(),D=u.getX(),N=u.getBottom(),j=u.getRight(),B=u.getWidthHalf(),z=u.getHeightHalf(),W=!1,Z=!1;if(c===h){if(f>d)return l[0]=c,l[1]=y,l[2]=h,l[3]=N,!1;if(f<d)return l[0]=c,l[1]=p,l[2]=h,l[3]=C,!1}else if(f===d){if(c>h)return l[0]=v,l[1]=f,l[2]=R,l[3]=d,!1;if(c<h)return l[0]=w,l[1]=f,l[2]=P,l[3]=d,!1}else{var Q=s.height/s.width,re=u.height/u.width,ee=(d-f)/(h-c),ue=void 0,de=void 0,se=void 0,me=void 0,Me=void 0,he=void 0;if(-Q===ee?c>h?(l[0]=b,l[1]=p,W=!0):(l[0]=w,l[1]=y,W=!0):Q===ee&&(c>h?(l[0]=v,l[1]=y,W=!0):(l[0]=m,l[1]=p,W=!0)),-re===ee?h>c?(l[2]=D,l[3]=N,Z=!0):(l[2]=R,l[3]=C,Z=!0):re===ee&&(h>c?(l[2]=P,l[3]=C,Z=!0):(l[2]=j,l[3]=N,Z=!0)),W&&Z)return!1;if(c>h?f>d?(ue=this.getCardinalDirection(Q,ee,4),de=this.getCardinalDirection(re,ee,2)):(ue=this.getCardinalDirection(-Q,ee,3),de=this.getCardinalDirection(-re,ee,1)):f>d?(ue=this.getCardinalDirection(-Q,ee,1),de=this.getCardinalDirection(-re,ee,3)):(ue=this.getCardinalDirection(Q,ee,2),de=this.getCardinalDirection(re,ee,4)),!W)switch(ue){case 1:me=y,se=c+-T/ee,l[0]=se,l[1]=me;break;case 2:se=m,me=f+x*ee,l[0]=se,l[1]=me;break;case 3:me=p,se=c+T/ee,l[0]=se,l[1]=me;break;case 4:se=b,me=f+-x*ee,l[0]=se,l[1]=me;break}if(!Z)switch(de){case 1:he=C,Me=h+-z/ee,l[2]=Me,l[3]=he;break;case 2:Me=j,he=d+B*ee,l[2]=Me,l[3]=he;break;case 3:he=N,Me=h+z/ee,l[2]=Me,l[3]=he;break;case 4:Me=D,he=d+-B*ee,l[2]=Me,l[3]=he;break}}return!1},o.getCardinalDirection=function(s,u,l){return s>u?l:1+l%4},o.getIntersection=function(s,u,l,c){if(c==null)return this.getIntersection2(s,u,l);var f=s.x,h=s.y,d=u.x,v=u.y,y=l.x,w=l.y,b=c.x,p=c.y,m=void 0,x=void 0,T=void 0,P=void 0,C=void 0,R=void 0,D=void 0,N=void 0,j=void 0;return T=v-h,C=f-d,D=d*h-f*v,P=p-w,R=y-b,N=b*w-y*p,j=T*R-P*C,j===0?null:(m=(C*N-R*D)/j,x=(P*D-T*N)/j,new a(m,x))},o.angleOfVector=function(s,u,l,c){var f=void 0;return s!==l?(f=Math.atan((c-u)/(l-s)),l<s?f+=Math.PI:c<u&&(f+=this.TWO_PI)):c<u?f=this.ONE_AND_HALF_PI:f=this.HALF_PI,f},o.doIntersect=function(s,u,l,c){var f=s.x,h=s.y,d=u.x,v=u.y,y=l.x,w=l.y,b=c.x,p=c.y,m=(d-f)*(p-w)-(b-y)*(v-h);if(m===0)return!1;var x=((p-w)*(b-f)+(y-b)*(p-h))/m,T=((h-v)*(b-f)+(d-f)*(p-h))/m;return 0<x&&x<1&&0<T&&T<1},o.HALF_PI=.5*Math.PI,o.ONE_AND_HALF_PI=1.5*Math.PI,o.TWO_PI=2*Math.PI,o.THREE_PI=3*Math.PI,t.exports=o},function(t,n,i){function a(){}a.sign=function(o){return o>0?1:o<0?-1:0},a.floor=function(o){return o<0?Math.ceil(o):Math.floor(o)},a.ceil=function(o){return o<0?Math.floor(o):Math.ceil(o)},t.exports=a},function(t,n,i){function a(){}a.MAX_VALUE=2147483647,a.MIN_VALUE=-2147483648,t.exports=a},function(t,n,i){var a=function(){function f(h,d){for(var v=0;v<d.length;v++){var y=d[v];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(h,y.key,y)}}return function(h,d,v){return d&&f(h.prototype,d),v&&f(h,v),h}}();function o(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}var s=function(h){return{value:h,next:null,prev:null}},u=function(h,d,v,y){return h!==null?h.next=d:y.head=d,v!==null?v.prev=d:y.tail=d,d.prev=h,d.next=v,y.length++,d},l=function(h,d){var v=h.prev,y=h.next;return v!==null?v.next=y:d.head=y,y!==null?y.prev=v:d.tail=v,h.prev=h.next=null,d.length--,h},c=function(){function f(h){var d=this;o(this,f),this.length=0,this.head=null,this.tail=null,h!=null&&h.forEach(function(v){return d.push(v)})}return a(f,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(d,v){return u(v.prev,s(d),v,this)}},{key:"insertAfter",value:function(d,v){return u(v,s(d),v.next,this)}},{key:"insertNodeBefore",value:function(d,v){return u(v.prev,d,v,this)}},{key:"insertNodeAfter",value:function(d,v){return u(v,d,v.next,this)}},{key:"push",value:function(d){return u(this.tail,s(d),null,this)}},{key:"unshift",value:function(d){return u(null,s(d),this.head,this)}},{key:"remove",value:function(d){return l(d,this)}},{key:"pop",value:function(){return l(this.tail,this).value}},{key:"popNode",value:function(){return l(this.tail,this)}},{key:"shift",value:function(){return l(this.head,this).value}},{key:"shiftNode",value:function(){return l(this.head,this)}},{key:"get_object_at",value:function(d){if(d<=this.length()){for(var v=1,y=this.head;v<d;)y=y.next,v++;return y.value}}},{key:"set_object_at",value:function(d,v){if(d<=this.length()){for(var y=1,w=this.head;y<d;)w=w.next,y++;w.value=v}}}]),f}();t.exports=c},function(t,n,i){function a(o,s,u){this.x=null,this.y=null,o==null&&s==null&&u==null?(this.x=0,this.y=0):typeof o=="number"&&typeof s=="number"&&u==null?(this.x=o,this.y=s):o.constructor.name=="Point"&&s==null&&u==null&&(u=o,this.x=u.x,this.y=u.y)}a.prototype.getX=function(){return this.x},a.prototype.getY=function(){return this.y},a.prototype.getLocation=function(){return new a(this.x,this.y)},a.prototype.setLocation=function(o,s,u){o.constructor.name=="Point"&&s==null&&u==null?(u=o,this.setLocation(u.x,u.y)):typeof o=="number"&&typeof s=="number"&&u==null&&(parseInt(o)==o&&parseInt(s)==s?this.move(o,s):(this.x=Math.floor(o+.5),this.y=Math.floor(s+.5)))},a.prototype.move=function(o,s){this.x=o,this.y=s},a.prototype.translate=function(o,s){this.x+=o,this.y+=s},a.prototype.equals=function(o){if(o.constructor.name=="Point"){var s=o;return this.x==s.x&&this.y==s.y}return this==o},a.prototype.toString=function(){return new a().constructor.name+"[x="+this.x+",y="+this.y+"]"},t.exports=a},function(t,n,i){function a(o,s,u,l){this.x=0,this.y=0,this.width=0,this.height=0,o!=null&&s!=null&&u!=null&&l!=null&&(this.x=o,this.y=s,this.width=u,this.height=l)}a.prototype.getX=function(){return this.x},a.prototype.setX=function(o){this.x=o},a.prototype.getY=function(){return this.y},a.prototype.setY=function(o){this.y=o},a.prototype.getWidth=function(){return this.width},a.prototype.setWidth=function(o){this.width=o},a.prototype.getHeight=function(){return this.height},a.prototype.setHeight=function(o){this.height=o},a.prototype.getRight=function(){return this.x+this.width},a.prototype.getBottom=function(){return this.y+this.height},a.prototype.intersects=function(o){return!(this.getRight()<o.x||this.getBottom()<o.y||o.getRight()<this.x||o.getBottom()<this.y)},a.prototype.getCenterX=function(){return this.x+this.width/2},a.prototype.getMinX=function(){return this.getX()},a.prototype.getMaxX=function(){return this.getX()+this.width},a.prototype.getCenterY=function(){return this.y+this.height/2},a.prototype.getMinY=function(){return this.getY()},a.prototype.getMaxY=function(){return this.getY()+this.height},a.prototype.getWidthHalf=function(){return this.width/2},a.prototype.getHeightHalf=function(){return this.height/2},t.exports=a},function(t,n,i){var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s};function o(){}o.lastID=0,o.createID=function(s){return o.isPrimitive(s)?s:(s.uniqueID!=null||(s.uniqueID=o.getString(),o.lastID++),s.uniqueID)},o.getString=function(s){return s==null&&(s=o.lastID),"Object#"+s},o.isPrimitive=function(s){var u=typeof s>"u"?"undefined":a(s);return s==null||u!="object"&&u!="function"},t.exports=o},function(t,n,i){function a(y){if(Array.isArray(y)){for(var w=0,b=Array(y.length);w<y.length;w++)b[w]=y[w];return b}else return Array.from(y)}var o=i(0),s=i(6),u=i(3),l=i(1),c=i(5),f=i(4),h=i(17),d=i(27);function v(y){d.call(this),this.layoutQuality=o.QUALITY,this.createBendsAsNeeded=o.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=o.DEFAULT_INCREMENTAL,this.animationOnLayout=o.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=o.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=o.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=o.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new s(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,y!=null&&(this.isRemoteUse=y)}v.RANDOM_SEED=1,v.prototype=Object.create(d.prototype),v.prototype.getGraphManager=function(){return this.graphManager},v.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},v.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},v.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},v.prototype.newGraphManager=function(){var y=new s(this);return this.graphManager=y,y},v.prototype.newGraph=function(y){return new c(null,this.graphManager,y)},v.prototype.newNode=function(y){return new u(this.graphManager,y)},v.prototype.newEdge=function(y){return new l(null,null,y)},v.prototype.checkLayoutSuccess=function(){return this.graphManager.getRoot()==null||this.graphManager.getRoot().getNodes().length==0||this.graphManager.includesInvalidEdge()},v.prototype.runLayout=function(){this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters();var y;return this.checkLayoutSuccess()?y=!1:y=this.layout(),o.ANIMATE==="during"?!1:(y&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,y)},v.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},v.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var y=this.graphManager.getAllEdges(),w=0;w<y.length;w++)y[w];for(var b=this.graphManager.getRoot().getNodes(),w=0;w<b.length;w++)b[w];this.update(this.graphManager.getRoot())}},v.prototype.update=function(y){if(y==null)this.update2();else if(y instanceof u){var w=y;if(w.getChild()!=null)for(var b=w.getChild().getNodes(),p=0;p<b.length;p++)update(b[p]);if(w.vGraphObject!=null){var m=w.vGraphObject;m.update(w)}}else if(y instanceof l){var x=y;if(x.vGraphObject!=null){var T=x.vGraphObject;T.update(x)}}else if(y instanceof c){var P=y;if(P.vGraphObject!=null){var C=P.vGraphObject;C.update(P)}}},v.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=o.QUALITY,this.animationDuringLayout=o.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=o.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=o.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=o.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=o.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=o.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},v.prototype.transform=function(y){if(y==null)this.transform(new f(0,0));else{var w=new h,b=this.graphManager.getRoot().updateLeftTop();if(b!=null){w.setWorldOrgX(y.x),w.setWorldOrgY(y.y),w.setDeviceOrgX(b.x),w.setDeviceOrgY(b.y);for(var p=this.getAllNodes(),m,x=0;x<p.length;x++)m=p[x],m.transform(w)}}},v.prototype.positionNodesRandomly=function(y){if(y==null)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var w,b,p=y.getNodes(),m=0;m<p.length;m++)w=p[m],b=w.getChild(),b==null||b.getNodes().length==0?w.scatter():(this.positionNodesRandomly(b),w.updateBounds())},v.prototype.getFlatForest=function(){for(var y=[],w=!0,b=this.graphManager.getRoot().getNodes(),p=!0,m=0;m<b.length;m++)b[m].getChild()!=null&&(p=!1);if(!p)return y;var x=new Set,T=[],P=new Map,C=[];for(C=C.concat(b);C.length>0&&w;){for(T.push(C[0]);T.length>0&&w;){var R=T[0];T.splice(0,1),x.add(R);for(var D=R.getEdges(),m=0;m<D.length;m++){var N=D[m].getOtherEnd(R);if(P.get(R)!=N)if(!x.has(N))T.push(N),P.set(N,R);else{w=!1;break}}}if(!w)y=[];else{var j=[].concat(a(x));y.push(j);for(var m=0;m<j.length;m++){var B=j[m],z=C.indexOf(B);z>-1&&C.splice(z,1)}x=new Set,P=new Map}}return y},v.prototype.createDummyNodesForBendpoints=function(y){for(var w=[],b=y.source,p=this.graphManager.calcLowestCommonAncestor(y.source,y.target),m=0;m<y.bendpoints.length;m++){var x=this.newNode(null);x.setRect(new Point(0,0),new Dimension(1,1)),p.add(x);var T=this.newEdge(null);this.graphManager.add(T,b,x),w.add(x),b=x}var T=this.newEdge(null);return this.graphManager.add(T,b,y.target),this.edgeToDummyNodes.set(y,w),y.isInterGraph()?this.graphManager.remove(y):p.remove(y),w},v.prototype.createBendpointsFromDummyNodes=function(){var y=[];y=y.concat(this.graphManager.getAllEdges()),y=[].concat(a(this.edgeToDummyNodes.keys())).concat(y);for(var w=0;w<y.length;w++){var b=y[w];if(b.bendpoints.length>0){for(var p=this.edgeToDummyNodes.get(b),m=0;m<p.length;m++){var x=p[m],T=new f(x.getCenterX(),x.getCenterY()),P=b.bendpoints.get(m);P.x=T.x,P.y=T.y,x.getOwner().remove(x)}this.graphManager.add(b,b.source,b.target)}}},v.transform=function(y,w,b,p){if(b!=null&&p!=null){var m=w;if(y<=50){var x=w/b;m-=(w-x)/50*(50-y)}else{var T=w*p;m+=(T-w)/50*(y-50)}return m}else{var P,C;return y<=50?(P=9*w/500,C=w/10):(P=9*w/50,C=-8*w),P*y+C}},v.findCenterOfTree=function(y){var w=[];w=w.concat(y);var b=[],p=new Map,m=!1,x=null;(w.length==1||w.length==2)&&(m=!0,x=w[0]);for(var T=0;T<w.length;T++){var P=w[T],C=P.getNeighborsList().size;p.set(P,P.getNeighborsList().size),C==1&&b.push(P)}var R=[];for(R=R.concat(b);!m;){var D=[];D=D.concat(R),R=[];for(var T=0;T<w.length;T++){var P=w[T],N=w.indexOf(P);N>=0&&w.splice(N,1);var j=P.getNeighborsList();j.forEach(function(W){if(b.indexOf(W)<0){var Z=p.get(W),Q=Z-1;Q==1&&R.push(W),p.set(W,Q)}})}b=b.concat(R),(w.length==1||w.length==2)&&(m=!0,x=w[0])}return x},v.prototype.setGraphManager=function(y){this.graphManager=y},t.exports=v},function(t,n,i){function a(){}a.seed=1,a.x=0,a.nextDouble=function(){return a.x=Math.sin(a.seed++)*1e4,a.x-Math.floor(a.x)},t.exports=a},function(t,n,i){var a=i(4);function o(s,u){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}o.prototype.getWorldOrgX=function(){return this.lworldOrgX},o.prototype.setWorldOrgX=function(s){this.lworldOrgX=s},o.prototype.getWorldOrgY=function(){return this.lworldOrgY},o.prototype.setWorldOrgY=function(s){this.lworldOrgY=s},o.prototype.getWorldExtX=function(){return this.lworldExtX},o.prototype.setWorldExtX=function(s){this.lworldExtX=s},o.prototype.getWorldExtY=function(){return this.lworldExtY},o.prototype.setWorldExtY=function(s){this.lworldExtY=s},o.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},o.prototype.setDeviceOrgX=function(s){this.ldeviceOrgX=s},o.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},o.prototype.setDeviceOrgY=function(s){this.ldeviceOrgY=s},o.prototype.getDeviceExtX=function(){return this.ldeviceExtX},o.prototype.setDeviceExtX=function(s){this.ldeviceExtX=s},o.prototype.getDeviceExtY=function(){return this.ldeviceExtY},o.prototype.setDeviceExtY=function(s){this.ldeviceExtY=s},o.prototype.transformX=function(s){var u=0,l=this.lworldExtX;return l!=0&&(u=this.ldeviceOrgX+(s-this.lworldOrgX)*this.ldeviceExtX/l),u},o.prototype.transformY=function(s){var u=0,l=this.lworldExtY;return l!=0&&(u=this.ldeviceOrgY+(s-this.lworldOrgY)*this.ldeviceExtY/l),u},o.prototype.inverseTransformX=function(s){var u=0,l=this.ldeviceExtX;return l!=0&&(u=this.lworldOrgX+(s-this.ldeviceOrgX)*this.lworldExtX/l),u},o.prototype.inverseTransformY=function(s){var u=0,l=this.ldeviceExtY;return l!=0&&(u=this.lworldOrgY+(s-this.ldeviceOrgY)*this.lworldExtY/l),u},o.prototype.inverseTransformPoint=function(s){var u=new a(this.inverseTransformX(s.x),this.inverseTransformY(s.y));return u},t.exports=o},function(t,n,i){function a(d){if(Array.isArray(d)){for(var v=0,y=Array(d.length);v<d.length;v++)y[v]=d[v];return y}else return Array.from(d)}var o=i(15),s=i(7),u=i(0),l=i(8),c=i(9);function f(){o.call(this),this.useSmartIdealEdgeLengthCalculation=s.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.idealEdgeLength=s.DEFAULT_EDGE_LENGTH,this.springConstant=s.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=s.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=s.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=s.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=s.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=s.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*s.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=s.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=s.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=s.MAX_ITERATIONS}f.prototype=Object.create(o.prototype);for(var h in o)f[h]=o[h];f.prototype.initParameters=function(){o.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=s.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},f.prototype.calcIdealEdgeLengths=function(){for(var d,v,y,w,b,p,m=this.getGraphManager().getAllEdges(),x=0;x<m.length;x++)d=m[x],d.idealLength=this.idealEdgeLength,d.isInterGraph&&(y=d.getSource(),w=d.getTarget(),b=d.getSourceInLca().getEstimatedSize(),p=d.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(d.idealLength+=b+p-2*u.SIMPLE_NODE_SIZE),v=d.getLca().getInclusionTreeDepth(),d.idealLength+=s.DEFAULT_EDGE_LENGTH*s.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(y.getInclusionTreeDepth()+w.getInclusionTreeDepth()-2*v))},f.prototype.initSpringEmbedder=function(){var d=this.getAllNodes().length;this.incremental?(d>s.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*s.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(d-s.ADAPTATION_LOWER_NODE_LIMIT)/(s.ADAPTATION_UPPER_NODE_LIMIT-s.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-s.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=s.MAX_NODE_DISPLACEMENT_INCREMENTAL):(d>s.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(s.COOLING_ADAPTATION_FACTOR,1-(d-s.ADAPTATION_LOWER_NODE_LIMIT)/(s.ADAPTATION_UPPER_NODE_LIMIT-s.ADAPTATION_LOWER_NODE_LIMIT)*(1-s.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=s.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(this.getAllNodes().length*5,this.maxIterations),this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},f.prototype.calcSpringForces=function(){for(var d=this.getAllEdges(),v,y=0;y<d.length;y++)v=d[y],this.calcSpringForce(v,v.idealLength)},f.prototype.calcRepulsionForces=function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,y,w,b,p,m=this.getAllNodes(),x;if(this.useFRGridVariant)for(this.totalIterations%s.GRID_CALCULATION_CHECK_PERIOD==1&&d&&this.updateGrid(),x=new Set,y=0;y<m.length;y++)b=m[y],this.calculateRepulsionForceOfANode(b,x,d,v),x.add(b);else for(y=0;y<m.length;y++)for(b=m[y],w=y+1;w<m.length;w++)p=m[w],b.getOwner()==p.getOwner()&&this.calcRepulsionForce(b,p)},f.prototype.calcGravitationalForces=function(){for(var d,v=this.getAllNodesToApplyGravitation(),y=0;y<v.length;y++)d=v[y],this.calcGravitationalForce(d)},f.prototype.moveNodes=function(){for(var d=this.getAllNodes(),v,y=0;y<d.length;y++)v=d[y],v.move()},f.prototype.calcSpringForce=function(d,v){var y=d.getSource(),w=d.getTarget(),b,p,m,x;if(this.uniformLeafNodeSizes&&y.getChild()==null&&w.getChild()==null)d.updateLengthSimple();else if(d.updateLength(),d.isOverlapingSourceAndTarget)return;b=d.getLength(),b!=0&&(p=this.springConstant*(b-v),m=p*(d.lengthX/b),x=p*(d.lengthY/b),y.springForceX+=m,y.springForceY+=x,w.springForceX-=m,w.springForceY-=x)},f.prototype.calcRepulsionForce=function(d,v){var y=d.getRect(),w=v.getRect(),b=new Array(2),p=new Array(4),m,x,T,P,C,R,D;if(y.intersects(w)){l.calcSeparationAmount(y,w,b,s.DEFAULT_EDGE_LENGTH/2),R=2*b[0],D=2*b[1];var N=d.noOfChildren*v.noOfChildren/(d.noOfChildren+v.noOfChildren);d.repulsionForceX-=N*R,d.repulsionForceY-=N*D,v.repulsionForceX+=N*R,v.repulsionForceY+=N*D}else this.uniformLeafNodeSizes&&d.getChild()==null&&v.getChild()==null?(m=w.getCenterX()-y.getCenterX(),x=w.getCenterY()-y.getCenterY()):(l.getIntersection(y,w,p),m=p[2]-p[0],x=p[3]-p[1]),Math.abs(m)<s.MIN_REPULSION_DIST&&(m=c.sign(m)*s.MIN_REPULSION_DIST),Math.abs(x)<s.MIN_REPULSION_DIST&&(x=c.sign(x)*s.MIN_REPULSION_DIST),T=m*m+x*x,P=Math.sqrt(T),C=this.repulsionConstant*d.noOfChildren*v.noOfChildren/T,R=C*m/P,D=C*x/P,d.repulsionForceX-=R,d.repulsionForceY-=D,v.repulsionForceX+=R,v.repulsionForceY+=D},f.prototype.calcGravitationalForce=function(d){var v,y,w,b,p,m,x,T;v=d.getOwner(),y=(v.getRight()+v.getLeft())/2,w=(v.getTop()+v.getBottom())/2,b=d.getCenterX()-y,p=d.getCenterY()-w,m=Math.abs(b)+d.getWidth()/2,x=Math.abs(p)+d.getHeight()/2,d.getOwner()==this.graphManager.getRoot()?(T=v.getEstimatedSize()*this.gravityRangeFactor,(m>T||x>T)&&(d.gravitationForceX=-this.gravityConstant*b,d.gravitationForceY=-this.gravityConstant*p)):(T=v.getEstimatedSize()*this.compoundGravityRangeFactor,(m>T||x>T)&&(d.gravitationForceX=-this.gravityConstant*b*this.compoundGravityConstant,d.gravitationForceY=-this.gravityConstant*p*this.compoundGravityConstant))},f.prototype.isConverged=function(){var d,v=!1;return this.totalIterations>this.maxIterations/3&&(v=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),d=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,d||v},f.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},f.prototype.calcNoOfChildrenForAllNodes=function(){for(var d,v=this.graphManager.getAllNodes(),y=0;y<v.length;y++)d=v[y],d.noOfChildren=d.getNoOfChildren()},f.prototype.calcGrid=function(d){var v=0,y=0;v=parseInt(Math.ceil((d.getRight()-d.getLeft())/this.repulsionRange)),y=parseInt(Math.ceil((d.getBottom()-d.getTop())/this.repulsionRange));for(var w=new Array(v),b=0;b<v;b++)w[b]=new Array(y);for(var b=0;b<v;b++)for(var p=0;p<y;p++)w[b][p]=new Array;return w},f.prototype.addNodeToGrid=function(d,v,y){var w=0,b=0,p=0,m=0;w=parseInt(Math.floor((d.getRect().x-v)/this.repulsionRange)),b=parseInt(Math.floor((d.getRect().width+d.getRect().x-v)/this.repulsionRange)),p=parseInt(Math.floor((d.getRect().y-y)/this.repulsionRange)),m=parseInt(Math.floor((d.getRect().height+d.getRect().y-y)/this.repulsionRange));for(var x=w;x<=b;x++)for(var T=p;T<=m;T++)this.grid[x][T].push(d),d.setGridCoordinates(w,b,p,m)},f.prototype.updateGrid=function(){var d,v,y=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),d=0;d<y.length;d++)v=y[d],this.addNodeToGrid(v,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},f.prototype.calculateRepulsionForceOfANode=function(d,v,y,w){if(this.totalIterations%s.GRID_CALCULATION_CHECK_PERIOD==1&&y||w){var b=new Set;d.surrounding=new Array;for(var p,m=this.grid,x=d.startX-1;x<d.finishX+2;x++)for(var T=d.startY-1;T<d.finishY+2;T++)if(!(x<0||T<0||x>=m.length||T>=m[0].length)){for(var P=0;P<m[x][T].length;P++)if(p=m[x][T][P],!(d.getOwner()!=p.getOwner()||d==p)&&!v.has(p)&&!b.has(p)){var C=Math.abs(d.getCenterX()-p.getCenterX())-(d.getWidth()/2+p.getWidth()/2),R=Math.abs(d.getCenterY()-p.getCenterY())-(d.getHeight()/2+p.getHeight()/2);C<=this.repulsionRange&&R<=this.repulsionRange&&b.add(p)}}d.surrounding=[].concat(a(b))}for(x=0;x<d.surrounding.length;x++)this.calcRepulsionForce(d,d.surrounding[x])},f.prototype.calcRepulsionRange=function(){return 0},t.exports=f},function(t,n,i){var a=i(1),o=i(7);function s(l,c,f){a.call(this,l,c,f),this.idealLength=o.DEFAULT_EDGE_LENGTH}s.prototype=Object.create(a.prototype);for(var u in a)s[u]=a[u];t.exports=s},function(t,n,i){var a=i(3);function o(u,l,c,f){a.call(this,u,l,c,f),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}o.prototype=Object.create(a.prototype);for(var s in a)o[s]=a[s];o.prototype.setGridCoordinates=function(u,l,c,f){this.startX=u,this.finishX=l,this.startY=c,this.finishY=f},t.exports=o},function(t,n,i){function a(o,s){this.width=0,this.height=0,o!==null&&s!==null&&(this.height=s,this.width=o)}a.prototype.getWidth=function(){return this.width},a.prototype.setWidth=function(o){this.width=o},a.prototype.getHeight=function(){return this.height},a.prototype.setHeight=function(o){this.height=o},t.exports=a},function(t,n,i){var a=i(14);function o(){this.map={},this.keys=[]}o.prototype.put=function(s,u){var l=a.createID(s);this.contains(l)||(this.map[l]=u,this.keys.push(s))},o.prototype.contains=function(s){return a.createID(s),this.map[s]!=null},o.prototype.get=function(s){var u=a.createID(s);return this.map[u]},o.prototype.keySet=function(){return this.keys},t.exports=o},function(t,n,i){var a=i(14);function o(){this.set={}}o.prototype.add=function(s){var u=a.createID(s);this.contains(u)||(this.set[u]=s)},o.prototype.remove=function(s){delete this.set[a.createID(s)]},o.prototype.clear=function(){this.set={}},o.prototype.contains=function(s){return this.set[a.createID(s)]==s},o.prototype.isEmpty=function(){return this.size()===0},o.prototype.size=function(){return Object.keys(this.set).length},o.prototype.addAllTo=function(s){for(var u=Object.keys(this.set),l=u.length,c=0;c<l;c++)s.push(this.set[u[c]])},o.prototype.size=function(){return Object.keys(this.set).length},o.prototype.addAll=function(s){for(var u=s.length,l=0;l<u;l++){var c=s[l];this.add(c)}},t.exports=o},function(t,n,i){var a=function(){function l(c,f){for(var h=0;h<f.length;h++){var d=f[h];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(c,d.key,d)}}return function(c,f,h){return f&&l(c.prototype,f),h&&l(c,h),c}}();function o(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}var s=i(11),u=function(){function l(c,f){o(this,l),(f!==null||f!==void 0)&&(this.compareFunction=this._defaultCompareFunction);var h=void 0;c instanceof s?h=c.size():h=c.length,this._quicksort(c,0,h-1)}return a(l,[{key:"_quicksort",value:function(f,h,d){if(h<d){var v=this._partition(f,h,d);this._quicksort(f,h,v),this._quicksort(f,v+1,d)}}},{key:"_partition",value:function(f,h,d){for(var v=this._get(f,h),y=h,w=d;;){for(;this.compareFunction(v,this._get(f,w));)w--;for(;this.compareFunction(this._get(f,y),v);)y++;if(y<w)this._swap(f,y,w),y++,w--;else return w}}},{key:"_get",value:function(f,h){return f instanceof s?f.get_object_at(h):f[h]}},{key:"_set",value:function(f,h,d){f instanceof s?f.set_object_at(h,d):f[h]=d}},{key:"_swap",value:function(f,h,d){var v=this._get(f,h);this._set(f,h,this._get(f,d)),this._set(f,d,v)}},{key:"_defaultCompareFunction",value:function(f,h){return h>f}}]),l}();t.exports=u},function(t,n,i){var a=function(){function u(l,c){for(var f=0;f<c.length;f++){var h=c[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(l,h.key,h)}}return function(l,c,f){return c&&u(l.prototype,c),f&&u(l,f),l}}();function o(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}var s=function(){function u(l,c){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1;o(this,u),this.sequence1=l,this.sequence2=c,this.match_score=f,this.mismatch_penalty=h,this.gap_penalty=d,this.iMax=l.length+1,this.jMax=c.length+1,this.grid=new Array(this.iMax);for(var v=0;v<this.iMax;v++){this.grid[v]=new Array(this.jMax);for(var y=0;y<this.jMax;y++)this.grid[v][y]=0}this.tracebackGrid=new Array(this.iMax);for(var w=0;w<this.iMax;w++){this.tracebackGrid[w]=new Array(this.jMax);for(var b=0;b<this.jMax;b++)this.tracebackGrid[w][b]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return a(u,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var c=1;c<this.jMax;c++)this.grid[0][c]=this.grid[0][c-1]+this.gap_penalty,this.tracebackGrid[0][c]=[!1,!1,!0];for(var f=1;f<this.iMax;f++)this.grid[f][0]=this.grid[f-1][0]+this.gap_penalty,this.tracebackGrid[f][0]=[!1,!0,!1];for(var h=1;h<this.iMax;h++)for(var d=1;d<this.jMax;d++){var v=void 0;this.sequence1[h-1]===this.sequence2[d-1]?v=this.grid[h-1][d-1]+this.match_score:v=this.grid[h-1][d-1]+this.mismatch_penalty;var y=this.grid[h-1][d]+this.gap_penalty,w=this.grid[h][d-1]+this.gap_penalty,b=[v,y,w],p=this.arrayAllMaxIndexes(b);this.grid[h][d]=b[p[0]],this.tracebackGrid[h][d]=[p.includes(0),p.includes(1),p.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var c=[];for(c.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});c[0];){var f=c[0],h=this.tracebackGrid[f.pos[0]][f.pos[1]];h[0]&&c.push({pos:[f.pos[0]-1,f.pos[1]-1],seq1:this.sequence1[f.pos[0]-1]+f.seq1,seq2:this.sequence2[f.pos[1]-1]+f.seq2}),h[1]&&c.push({pos:[f.pos[0]-1,f.pos[1]],seq1:this.sequence1[f.pos[0]-1]+f.seq1,seq2:"-"+f.seq2}),h[2]&&c.push({pos:[f.pos[0],f.pos[1]-1],seq1:"-"+f.seq1,seq2:this.sequence2[f.pos[1]-1]+f.seq2}),f.pos[0]===0&&f.pos[1]===0&&this.alignments.push({sequence1:f.seq1,sequence2:f.seq2}),c.shift()}return this.alignments}},{key:"getAllIndexes",value:function(c,f){for(var h=[],d=-1;(d=c.indexOf(f,d+1))!==-1;)h.push(d);return h}},{key:"arrayAllMaxIndexes",value:function(c){return this.getAllIndexes(c,Math.max.apply(null,c))}}]),u}();t.exports=s},function(t,n,i){var a=function(){};a.FDLayout=i(18),a.FDLayoutConstants=i(7),a.FDLayoutEdge=i(19),a.FDLayoutNode=i(20),a.DimensionD=i(21),a.HashMap=i(22),a.HashSet=i(23),a.IGeometry=i(8),a.IMath=i(9),a.Integer=i(10),a.Point=i(12),a.PointD=i(4),a.RandomSeed=i(16),a.RectangleD=i(13),a.Transform=i(17),a.UniqueIDGeneretor=i(14),a.Quicksort=i(24),a.LinkedList=i(11),a.LGraphObject=i(2),a.LGraph=i(5),a.LEdge=i(1),a.LGraphManager=i(6),a.LNode=i(3),a.Layout=i(15),a.LayoutConstants=i(0),a.NeedlemanWunsch=i(25),t.exports=a},function(t,n,i){function a(){this.listeners=[]}var o=a.prototype;o.addListener=function(s,u){this.listeners.push({event:s,callback:u})},o.removeListener=function(s,u){for(var l=this.listeners.length;l>=0;l--){var c=this.listeners[l];c.event===s&&c.callback===u&&this.listeners.splice(l,1)}},o.emit=function(s,u){for(var l=0;l<this.listeners.length;l++){var c=this.listeners[l];s===c.event&&c.callback(u)}},t.exports=a}])})}(Mm)),Mm.exports}var bM=Dm.exports,lO;function _M(){return lO||(lO=1,function(r,e){(function(n,i){r.exports=i(mM())})(bM,function(t){return function(n){var i={};function a(o){if(i[o])return i[o].exports;var s=i[o]={i:o,l:!1,exports:{}};return n[o].call(s.exports,s,s.exports,a),s.l=!0,s.exports}return a.m=n,a.c=i,a.i=function(o){return o},a.d=function(o,s,u){a.o(o,s)||Object.defineProperty(o,s,{configurable:!1,enumerable:!0,get:u})},a.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return a.d(s,"a",s),s},a.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)},a.p="",a(a.s=7)}([function(n,i){n.exports=t},function(n,i,a){var o=a(0).FDLayoutConstants;function s(){}for(var u in o)s[u]=o[u];s.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,s.DEFAULT_RADIAL_SEPARATION=o.DEFAULT_EDGE_LENGTH,s.DEFAULT_COMPONENT_SEPERATION=60,s.TILE=!0,s.TILING_PADDING_VERTICAL=10,s.TILING_PADDING_HORIZONTAL=10,s.TREE_REDUCTION_ON_INCREMENTAL=!1,n.exports=s},function(n,i,a){var o=a(0).FDLayoutEdge;function s(l,c,f){o.call(this,l,c,f)}s.prototype=Object.create(o.prototype);for(var u in o)s[u]=o[u];n.exports=s},function(n,i,a){var o=a(0).LGraph;function s(l,c,f){o.call(this,l,c,f)}s.prototype=Object.create(o.prototype);for(var u in o)s[u]=o[u];n.exports=s},function(n,i,a){var o=a(0).LGraphManager;function s(l){o.call(this,l)}s.prototype=Object.create(o.prototype);for(var u in o)s[u]=o[u];n.exports=s},function(n,i,a){var o=a(0).FDLayoutNode,s=a(0).IMath;function u(c,f,h,d){o.call(this,c,f,h,d)}u.prototype=Object.create(o.prototype);for(var l in o)u[l]=o[l];u.prototype.move=function(){var c=this.graphManager.getLayout();this.displacementX=c.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY=c.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren,Math.abs(this.displacementX)>c.coolingFactor*c.maxNodeDisplacement&&(this.displacementX=c.coolingFactor*c.maxNodeDisplacement*s.sign(this.displacementX)),Math.abs(this.displacementY)>c.coolingFactor*c.maxNodeDisplacement&&(this.displacementY=c.coolingFactor*c.maxNodeDisplacement*s.sign(this.displacementY)),this.child==null?this.moveBy(this.displacementX,this.displacementY):this.child.getNodes().length==0?this.moveBy(this.displacementX,this.displacementY):this.propogateDisplacementToChildren(this.displacementX,this.displacementY),c.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},u.prototype.propogateDisplacementToChildren=function(c,f){for(var h=this.getChild().getNodes(),d,v=0;v<h.length;v++)d=h[v],d.getChild()==null?(d.moveBy(c,f),d.displacementX+=c,d.displacementY+=f):d.propogateDisplacementToChildren(c,f)},u.prototype.setPred1=function(c){this.pred1=c},u.prototype.getPred1=function(){return pred1},u.prototype.getPred2=function(){return pred2},u.prototype.setNext=function(c){this.next=c},u.prototype.getNext=function(){return next},u.prototype.setProcessed=function(c){this.processed=c},u.prototype.isProcessed=function(){return processed},n.exports=u},function(n,i,a){var o=a(0).FDLayout,s=a(4),u=a(3),l=a(5),c=a(2),f=a(1),h=a(0).FDLayoutConstants,d=a(0).LayoutConstants,v=a(0).Point,y=a(0).PointD,w=a(0).Layout,b=a(0).Integer,p=a(0).IGeometry,m=a(0).LGraph,x=a(0).Transform;function T(){o.call(this),this.toBeTiled={}}T.prototype=Object.create(o.prototype);for(var P in o)T[P]=o[P];T.prototype.newGraphManager=function(){var C=new s(this);return this.graphManager=C,C},T.prototype.newGraph=function(C){return new u(null,this.graphManager,C)},T.prototype.newNode=function(C){return new l(this.graphManager,C)},T.prototype.newEdge=function(C){return new c(null,null,C)},T.prototype.initParameters=function(){o.prototype.initParameters.call(this,arguments),this.isSubLayout||(f.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=f.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=f.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.springConstant=h.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=h.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=h.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=h.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=h.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=h.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1,this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/h.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=h.CONVERGENCE_CHECK_PERIOD/this.maxIterations,this.coolingAdjuster=1)},T.prototype.layout=function(){var C=d.DEFAULT_CREATE_BENDS_AS_NEEDED;return C&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},T.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(f.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var R=new Set(this.getAllNodes()),D=this.nodesWithGravity.filter(function(B){return R.has(B)});this.graphManager.setAllNodesToApplyGravitation(D)}}else{var C=this.getFlatForest();if(C.length>0)this.positionNodesRadially(C);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var R=new Set(this.getAllNodes()),D=this.nodesWithGravity.filter(function(N){return R.has(N)});this.graphManager.setAllNodesToApplyGravitation(D),this.positionNodesRandomly()}}return this.initSpringEmbedder(),this.runSpringEmbedder(),!0},T.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished)if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;if(this.totalIterations%h.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged())if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;this.coolingCycle++,this.layoutQuality==0?this.coolingAdjuster=this.coolingCycle:this.layoutQuality==1&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var C=new Set(this.getAllNodes()),R=this.nodesWithGravity.filter(function(j){return C.has(j)});this.graphManager.setAllNodesToApplyGravitation(R),this.graphManager.updateBounds(),this.updateGrid(),this.coolingFactor=h.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),this.coolingFactor=h.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var D=!this.isTreeGrowing&&!this.isGrowthFinished,N=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(D,N),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},T.prototype.getPositionsData=function(){for(var C=this.graphManager.getAllNodes(),R={},D=0;D<C.length;D++){var N=C[D].rect,j=C[D].id;R[j]={id:j,x:N.getCenterX(),y:N.getCenterY(),w:N.width,h:N.height}}return R},T.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var C=!1;if(h.ANIMATE==="during")this.emit("layoutstarted");else{for(;!C;)C=this.tick();this.graphManager.updateBounds()}},T.prototype.calculateNodesToApplyGravitationTo=function(){var C=[],R,D=this.graphManager.getGraphs(),N=D.length,j;for(j=0;j<N;j++)R=D[j],R.updateConnected(),R.isConnected||(C=C.concat(R.getNodes()));return C},T.prototype.createBendpoints=function(){var C=[];C=C.concat(this.graphManager.getAllEdges());var R=new Set,D;for(D=0;D<C.length;D++){var N=C[D];if(!R.has(N)){var j=N.getSource(),B=N.getTarget();if(j==B)N.getBendpoints().push(new y),N.getBendpoints().push(new y),this.createDummyNodesForBendpoints(N),R.add(N);else{var z=[];if(z=z.concat(j.getEdgeListToNode(B)),z=z.concat(B.getEdgeListToNode(j)),!R.has(z[0])){if(z.length>1){var W;for(W=0;W<z.length;W++){var Z=z[W];Z.getBendpoints().push(new y),this.createDummyNodesForBendpoints(Z)}}z.forEach(function(Q){R.add(Q)})}}}if(R.size==C.length)break}},T.prototype.positionNodesRadially=function(C){for(var R=new v(0,0),D=Math.ceil(Math.sqrt(C.length)),N=0,j=0,B=0,z=new y(0,0),W=0;W<C.length;W++){W%D==0&&(B=0,j=N,W!=0&&(j+=f.DEFAULT_COMPONENT_SEPERATION),N=0);var Z=C[W],Q=w.findCenterOfTree(Z);R.x=B,R.y=j,z=T.radialLayout(Z,Q,R),z.y>N&&(N=Math.floor(z.y)),B=Math.floor(z.x+f.DEFAULT_COMPONENT_SEPERATION)}this.transform(new y(d.WORLD_CENTER_X-z.x/2,d.WORLD_CENTER_Y-z.y/2))},T.radialLayout=function(C,R,D){var N=Math.max(this.maxDiagonalInTree(C),f.DEFAULT_RADIAL_SEPARATION);T.branchRadialLayout(R,null,0,359,0,N);var j=m.calculateBounds(C),B=new x;B.setDeviceOrgX(j.getMinX()),B.setDeviceOrgY(j.getMinY()),B.setWorldOrgX(D.x),B.setWorldOrgY(D.y);for(var z=0;z<C.length;z++){var W=C[z];W.transform(B)}var Z=new y(j.getMaxX(),j.getMaxY());return B.inverseTransformPoint(Z)},T.branchRadialLayout=function(C,R,D,N,j,B){var z=(N-D+1)/2;z<0&&(z+=180);var W=(z+D)%360,Z=W*p.TWO_PI/360,Q=j*Math.cos(Z),re=j*Math.sin(Z);C.setCenter(Q,re);var ee=[];ee=ee.concat(C.getEdges());var ue=ee.length;R!=null&&ue--;for(var de=0,se=ee.length,me,Me=C.getEdgesBetween(R);Me.length>1;){var he=Me[0];Me.splice(0,1);var fe=ee.indexOf(he);fe>=0&&ee.splice(fe,1),se--,ue--}R!=null?me=(ee.indexOf(Me[0])+1)%se:me=0;for(var Ee=Math.abs(N-D)/ue,Ce=me;de!=ue;Ce=++Ce%se){var ke=ee[Ce].getOtherEnd(C);if(ke!=R){var Re=(D+de*Ee)%360,ve=(Re+Ee)%360;T.branchRadialLayout(ke,C,Re,ve,j+B,B),de++}}},T.maxDiagonalInTree=function(C){for(var R=b.MIN_VALUE,D=0;D<C.length;D++){var N=C[D],j=N.getDiagonal();j>R&&(R=j)}return R},T.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},T.prototype.groupZeroDegreeMembers=function(){var C=this,R={};this.memberGroups={},this.idToDummyNode={};for(var D=[],N=this.graphManager.getAllNodes(),j=0;j<N.length;j++){var B=N[j],z=B.getParent();this.getNodeDegreeWithChildren(B)===0&&(z.id==null||!this.getToBeTiled(z))&&D.push(B)}for(var j=0;j<D.length;j++){var B=D[j],W=B.getParent().id;typeof R[W]>"u"&&(R[W]=[]),R[W]=R[W].concat(B)}Object.keys(R).forEach(function(Z){if(R[Z].length>1){var Q="DummyCompound_"+Z;C.memberGroups[Q]=R[Z];var re=R[Z][0].getParent(),ee=new l(C.graphManager);ee.id=Q,ee.paddingLeft=re.paddingLeft||0,ee.paddingRight=re.paddingRight||0,ee.paddingBottom=re.paddingBottom||0,ee.paddingTop=re.paddingTop||0,C.idToDummyNode[Q]=ee;var ue=C.getGraphManager().add(C.newGraph(),ee),de=re.getChild();de.add(ee);for(var se=0;se<R[Z].length;se++){var me=R[Z][se];de.remove(me),ue.add(me)}}})},T.prototype.clearCompounds=function(){var C={},R={};this.performDFSOnCompounds();for(var D=0;D<this.compoundOrder.length;D++)R[this.compoundOrder[D].id]=this.compoundOrder[D],C[this.compoundOrder[D].id]=[].concat(this.compoundOrder[D].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[D].getChild()),this.compoundOrder[D].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(C,R)},T.prototype.clearZeroDegreeMembers=function(){var C=this,R=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(D){var N=C.idToDummyNode[D];R[D]=C.tileNodes(C.memberGroups[D],N.paddingLeft+N.paddingRight),N.rect.width=R[D].width,N.rect.height=R[D].height})},T.prototype.repopulateCompounds=function(){for(var C=this.compoundOrder.length-1;C>=0;C--){var R=this.compoundOrder[C],D=R.id,N=R.paddingLeft,j=R.paddingTop;this.adjustLocations(this.tiledMemberPack[D],R.rect.x,R.rect.y,N,j)}},T.prototype.repopulateZeroDegreeMembers=function(){var C=this,R=this.tiledZeroDegreePack;Object.keys(R).forEach(function(D){var N=C.idToDummyNode[D],j=N.paddingLeft,B=N.paddingTop;C.adjustLocations(R[D],N.rect.x,N.rect.y,j,B)})},T.prototype.getToBeTiled=function(C){var R=C.id;if(this.toBeTiled[R]!=null)return this.toBeTiled[R];var D=C.getChild();if(D==null)return this.toBeTiled[R]=!1,!1;for(var N=D.getNodes(),j=0;j<N.length;j++){var B=N[j];if(this.getNodeDegree(B)>0)return this.toBeTiled[R]=!1,!1;if(B.getChild()==null){this.toBeTiled[B.id]=!1;continue}if(!this.getToBeTiled(B))return this.toBeTiled[R]=!1,!1}return this.toBeTiled[R]=!0,!0},T.prototype.getNodeDegree=function(C){C.id;for(var R=C.getEdges(),D=0,N=0;N<R.length;N++){var j=R[N];j.getSource().id!==j.getTarget().id&&(D=D+1)}return D},T.prototype.getNodeDegreeWithChildren=function(C){var R=this.getNodeDegree(C);if(C.getChild()==null)return R;for(var D=C.getChild().getNodes(),N=0;N<D.length;N++){var j=D[N];R+=this.getNodeDegreeWithChildren(j)}return R},T.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},T.prototype.fillCompexOrderByDFS=function(C){for(var R=0;R<C.length;R++){var D=C[R];D.getChild()!=null&&this.fillCompexOrderByDFS(D.getChild().getNodes()),this.getToBeTiled(D)&&this.compoundOrder.push(D)}},T.prototype.adjustLocations=function(C,R,D,N,j){R+=N,D+=j;for(var B=R,z=0;z<C.rows.length;z++){var W=C.rows[z];R=B;for(var Z=0,Q=0;Q<W.length;Q++){var re=W[Q];re.rect.x=R,re.rect.y=D,R+=re.rect.width+C.horizontalPadding,re.rect.height>Z&&(Z=re.rect.height)}D+=Z+C.verticalPadding}},T.prototype.tileCompoundMembers=function(C,R){var D=this;this.tiledMemberPack=[],Object.keys(C).forEach(function(N){var j=R[N];D.tiledMemberPack[N]=D.tileNodes(C[N],j.paddingLeft+j.paddingRight),j.rect.width=D.tiledMemberPack[N].width,j.rect.height=D.tiledMemberPack[N].height})},T.prototype.tileNodes=function(C,R){var D=f.TILING_PADDING_VERTICAL,N=f.TILING_PADDING_HORIZONTAL,j={rows:[],rowWidth:[],rowHeight:[],width:0,height:R,verticalPadding:D,horizontalPadding:N};C.sort(function(W,Z){return W.rect.width*W.rect.height>Z.rect.width*Z.rect.height?-1:W.rect.width*W.rect.height<Z.rect.width*Z.rect.height?1:0});for(var B=0;B<C.length;B++){var z=C[B];j.rows.length==0?this.insertNodeToRow(j,z,0,R):this.canAddHorizontal(j,z.rect.width,z.rect.height)?this.insertNodeToRow(j,z,this.getShortestRowIndex(j),R):this.insertNodeToRow(j,z,j.rows.length,R),this.shiftToLastRow(j)}return j},T.prototype.insertNodeToRow=function(C,R,D,N){var j=N;if(D==C.rows.length){var B=[];C.rows.push(B),C.rowWidth.push(j),C.rowHeight.push(0)}var z=C.rowWidth[D]+R.rect.width;C.rows[D].length>0&&(z+=C.horizontalPadding),C.rowWidth[D]=z,C.width<z&&(C.width=z);var W=R.rect.height;D>0&&(W+=C.verticalPadding);var Z=0;W>C.rowHeight[D]&&(Z=C.rowHeight[D],C.rowHeight[D]=W,Z=C.rowHeight[D]-Z),C.height+=Z,C.rows[D].push(R)},T.prototype.getShortestRowIndex=function(C){for(var R=-1,D=Number.MAX_VALUE,N=0;N<C.rows.length;N++)C.rowWidth[N]<D&&(R=N,D=C.rowWidth[N]);return R},T.prototype.getLongestRowIndex=function(C){for(var R=-1,D=Number.MIN_VALUE,N=0;N<C.rows.length;N++)C.rowWidth[N]>D&&(R=N,D=C.rowWidth[N]);return R},T.prototype.canAddHorizontal=function(C,R,D){var N=this.getShortestRowIndex(C);if(N<0)return!0;var j=C.rowWidth[N];if(j+C.horizontalPadding+R<=C.width)return!0;var B=0;C.rowHeight[N]<D&&N>0&&(B=D+C.verticalPadding-C.rowHeight[N]);var z;C.width-j>=R+C.horizontalPadding?z=(C.height+B)/(j+R+C.horizontalPadding):z=(C.height+B)/C.width,B=D+C.verticalPadding;var W;return C.width<R?W=(C.height+B)/R:W=(C.height+B)/C.width,W<1&&(W=1/W),z<1&&(z=1/z),z<W},T.prototype.shiftToLastRow=function(C){var R=this.getLongestRowIndex(C),D=C.rowWidth.length-1,N=C.rows[R],j=N[N.length-1],B=j.width+C.horizontalPadding;if(C.width-C.rowWidth[D]>B&&R!=D){N.splice(-1,1),C.rows[D].push(j),C.rowWidth[R]=C.rowWidth[R]-B,C.rowWidth[D]=C.rowWidth[D]+B,C.width=C.rowWidth[instance.getLongestRowIndex(C)];for(var z=Number.MIN_VALUE,W=0;W<N.length;W++)N[W].height>z&&(z=N[W].height);R>0&&(z+=C.verticalPadding);var Z=C.rowHeight[R]+C.rowHeight[D];C.rowHeight[R]=z,C.rowHeight[D]<j.height+C.verticalPadding&&(C.rowHeight[D]=j.height+C.verticalPadding);var Q=C.rowHeight[R]+C.rowHeight[D];C.height+=Q-Z,this.shiftToLastRow(C)}},T.prototype.tilingPreLayout=function(){f.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},T.prototype.tilingPostLayout=function(){f.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},T.prototype.reduceTrees=function(){for(var C=[],R=!0,D;R;){var N=this.graphManager.getAllNodes(),j=[];R=!1;for(var B=0;B<N.length;B++)D=N[B],D.getEdges().length==1&&!D.getEdges()[0].isInterGraph&&D.getChild()==null&&(j.push([D,D.getEdges()[0],D.getOwner()]),R=!0);if(R==!0){for(var z=[],W=0;W<j.length;W++)j[W][0].getEdges().length==1&&(z.push(j[W]),j[W][0].getOwner().remove(j[W][0]));C.push(z),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=C},T.prototype.growTree=function(C){for(var R=C.length,D=C[R-1],N,j=0;j<D.length;j++)N=D[j],this.findPlaceforPrunedNode(N),N[2].add(N[0]),N[2].add(N[1],N[1].source,N[1].target);C.splice(C.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},T.prototype.findPlaceforPrunedNode=function(C){var R,D,N=C[0];N==C[1].source?D=C[1].target:D=C[1].source;var j=D.startX,B=D.finishX,z=D.startY,W=D.finishY,Z=0,Q=0,re=0,ee=0,ue=[Z,re,Q,ee];if(z>0)for(var de=j;de<=B;de++)ue[0]+=this.grid[de][z-1].length+this.grid[de][z].length-1;if(B<this.grid.length-1)for(var de=z;de<=W;de++)ue[1]+=this.grid[B+1][de].length+this.grid[B][de].length-1;if(W<this.grid[0].length-1)for(var de=j;de<=B;de++)ue[2]+=this.grid[de][W+1].length+this.grid[de][W].length-1;if(j>0)for(var de=z;de<=W;de++)ue[3]+=this.grid[j-1][de].length+this.grid[j][de].length-1;for(var se=b.MAX_VALUE,me,Me,he=0;he<ue.length;he++)ue[he]<se?(se=ue[he],me=1,Me=he):ue[he]==se&&me++;if(me==3&&se==0)ue[0]==0&&ue[1]==0&&ue[2]==0?R=1:ue[0]==0&&ue[1]==0&&ue[3]==0?R=0:ue[0]==0&&ue[2]==0&&ue[3]==0?R=3:ue[1]==0&&ue[2]==0&&ue[3]==0&&(R=2);else if(me==2&&se==0){var fe=Math.floor(Math.random()*2);ue[0]==0&&ue[1]==0?fe==0?R=0:R=1:ue[0]==0&&ue[2]==0?fe==0?R=0:R=2:ue[0]==0&&ue[3]==0?fe==0?R=0:R=3:ue[1]==0&&ue[2]==0?fe==0?R=1:R=2:ue[1]==0&&ue[3]==0?fe==0?R=1:R=3:fe==0?R=2:R=3}else if(me==4&&se==0){var fe=Math.floor(Math.random()*4);R=fe}else R=Me;R==0?N.setCenter(D.getCenterX(),D.getCenterY()-D.getHeight()/2-h.DEFAULT_EDGE_LENGTH-N.getHeight()/2):R==1?N.setCenter(D.getCenterX()+D.getWidth()/2+h.DEFAULT_EDGE_LENGTH+N.getWidth()/2,D.getCenterY()):R==2?N.setCenter(D.getCenterX(),D.getCenterY()+D.getHeight()/2+h.DEFAULT_EDGE_LENGTH+N.getHeight()/2):N.setCenter(D.getCenterX()-D.getWidth()/2-h.DEFAULT_EDGE_LENGTH-N.getWidth()/2,D.getCenterY())},n.exports=T},function(n,i,a){var o={};o.layoutBase=a(0),o.CoSEConstants=a(1),o.CoSEEdge=a(2),o.CoSEGraph=a(3),o.CoSEGraphManager=a(4),o.CoSELayout=a(6),o.CoSENode=a(5),n.exports=o}])})}(Dm)),Dm.exports}var wM=km.exports,cO;function EM(){return cO||(cO=1,function(r,e){(function(n,i){r.exports=i(_M())})(wM,function(t){return function(n){var i={};function a(o){if(i[o])return i[o].exports;var s=i[o]={i:o,l:!1,exports:{}};return n[o].call(s.exports,s,s.exports,a),s.l=!0,s.exports}return a.m=n,a.c=i,a.i=function(o){return o},a.d=function(o,s,u){a.o(o,s)||Object.defineProperty(o,s,{configurable:!1,enumerable:!0,get:u})},a.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return a.d(s,"a",s),s},a.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)},a.p="",a(a.s=1)}([function(n,i){n.exports=t},function(n,i,a){var o=a(0).layoutBase.LayoutConstants,s=a(0).layoutBase.FDLayoutConstants,u=a(0).CoSEConstants,l=a(0).CoSELayout,c=a(0).CoSENode,f=a(0).layoutBase.PointD,h=a(0).layoutBase.DimensionD,d={ready:function(){},stop:function(){},quality:"default",nodeDimensionsIncludeLabels:!1,refresh:30,fit:!0,padding:10,randomize:!0,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",animationDuration:500,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.5};function v(p,m){var x={};for(var T in p)x[T]=p[T];for(var T in m)x[T]=m[T];return x}function y(p){this.options=v(d,p),w(this.options)}var w=function(m){m.nodeRepulsion!=null&&(u.DEFAULT_REPULSION_STRENGTH=s.DEFAULT_REPULSION_STRENGTH=m.nodeRepulsion),m.idealEdgeLength!=null&&(u.DEFAULT_EDGE_LENGTH=s.DEFAULT_EDGE_LENGTH=m.idealEdgeLength),m.edgeElasticity!=null&&(u.DEFAULT_SPRING_STRENGTH=s.DEFAULT_SPRING_STRENGTH=m.edgeElasticity),m.nestingFactor!=null&&(u.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=s.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=m.nestingFactor),m.gravity!=null&&(u.DEFAULT_GRAVITY_STRENGTH=s.DEFAULT_GRAVITY_STRENGTH=m.gravity),m.numIter!=null&&(u.MAX_ITERATIONS=s.MAX_ITERATIONS=m.numIter),m.gravityRange!=null&&(u.DEFAULT_GRAVITY_RANGE_FACTOR=s.DEFAULT_GRAVITY_RANGE_FACTOR=m.gravityRange),m.gravityCompound!=null&&(u.DEFAULT_COMPOUND_GRAVITY_STRENGTH=s.DEFAULT_COMPOUND_GRAVITY_STRENGTH=m.gravityCompound),m.gravityRangeCompound!=null&&(u.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=s.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=m.gravityRangeCompound),m.initialEnergyOnIncremental!=null&&(u.DEFAULT_COOLING_FACTOR_INCREMENTAL=s.DEFAULT_COOLING_FACTOR_INCREMENTAL=m.initialEnergyOnIncremental),m.quality=="draft"?o.QUALITY=0:m.quality=="proof"?o.QUALITY=2:o.QUALITY=1,u.NODE_DIMENSIONS_INCLUDE_LABELS=s.NODE_DIMENSIONS_INCLUDE_LABELS=o.NODE_DIMENSIONS_INCLUDE_LABELS=m.nodeDimensionsIncludeLabels,u.DEFAULT_INCREMENTAL=s.DEFAULT_INCREMENTAL=o.DEFAULT_INCREMENTAL=!m.randomize,u.ANIMATE=s.ANIMATE=o.ANIMATE=m.animate,u.TILE=m.tile,u.TILING_PADDING_VERTICAL=typeof m.tilingPaddingVertical=="function"?m.tilingPaddingVertical.call():m.tilingPaddingVertical,u.TILING_PADDING_HORIZONTAL=typeof m.tilingPaddingHorizontal=="function"?m.tilingPaddingHorizontal.call():m.tilingPaddingHorizontal};y.prototype.run=function(){var p,m,x=this.options;this.idToLNode={};var T=this.layout=new l,P=this;P.stopped=!1,this.cy=this.options.cy,this.cy.trigger({type:"layoutstart",layout:this});var C=T.newGraphManager();this.gm=C;var R=this.options.eles.nodes(),D=this.options.eles.edges();this.root=C.addRoot(),this.processChildrenList(this.root,this.getTopMostNodes(R),T);for(var N=0;N<D.length;N++){var j=D[N],B=this.idToLNode[j.data("source")],z=this.idToLNode[j.data("target")];if(B!==z&&B.getEdgesBetween(z).length==0){var W=C.add(T.newEdge(),B,z);W.id=j.id()}}var Z=function(ee,ue){typeof ee=="number"&&(ee=ue);var de=ee.data("id"),se=P.idToLNode[de];return{x:se.getRect().getCenterX(),y:se.getRect().getCenterY()}},Q=function re(){for(var ee=function(){x.fit&&x.cy.fit(x.eles,x.padding),p||(p=!0,P.cy.one("layoutready",x.ready),P.cy.trigger({type:"layoutready",layout:P}))},ue=P.options.refresh,de,se=0;se<ue&&!de;se++)de=P.stopped||P.layout.tick();if(de){T.checkLayoutSuccess()&&!T.isSubLayout&&T.doPostLayout(),T.tilingPostLayout&&T.tilingPostLayout(),T.isLayoutFinished=!0,P.options.eles.nodes().positions(Z),ee(),P.cy.one("layoutstop",P.options.stop),P.cy.trigger({type:"layoutstop",layout:P}),m&&cancelAnimationFrame(m),p=!1;return}var me=P.layout.getPositionsData();x.eles.nodes().positions(function(Me,he){if(typeof Me=="number"&&(Me=he),!Me.isParent()){for(var fe=Me.id(),Ee=me[fe],Ce=Me;Ee==null&&(Ee=me[Ce.data("parent")]||me["DummyCompound_"+Ce.data("parent")],me[fe]=Ee,Ce=Ce.parent()[0],Ce!=null););return Ee!=null?{x:Ee.x,y:Ee.y}:{x:Me.position("x"),y:Me.position("y")}}}),ee(),m=requestAnimationFrame(re)};return T.addListener("layoutstarted",function(){P.options.animate==="during"&&(m=requestAnimationFrame(Q))}),T.runLayout(),this.options.animate!=="during"&&(P.options.eles.nodes().not(":parent").layoutPositions(P,P.options,Z),p=!1),this},y.prototype.getTopMostNodes=function(p){for(var m={},x=0;x<p.length;x++)m[p[x].id()]=!0;var T=p.filter(function(P,C){typeof P=="number"&&(P=C);for(var R=P.parent()[0];R!=null;){if(m[R.id()])return!1;R=R.parent()[0]}return!0});return T},y.prototype.processChildrenList=function(p,m,x){for(var T=m.length,P=0;P<T;P++){var C=m[P],R=C.children(),D,N=C.layoutDimensions({nodeDimensionsIncludeLabels:this.options.nodeDimensionsIncludeLabels});if(C.outerWidth()!=null&&C.outerHeight()!=null?D=p.add(new c(x.graphManager,new f(C.position("x")-N.w/2,C.position("y")-N.h/2),new h(parseFloat(N.w),parseFloat(N.h)))):D=p.add(new c(this.graphManager)),D.id=C.data("id"),D.paddingLeft=parseInt(C.css("padding")),D.paddingTop=parseInt(C.css("padding")),D.paddingRight=parseInt(C.css("padding")),D.paddingBottom=parseInt(C.css("padding")),this.options.nodeDimensionsIncludeLabels&&C.isParent()){var j=C.boundingBox({includeLabels:!0,includeNodes:!1}).w,B=C.boundingBox({includeLabels:!0,includeNodes:!1}).h,z=C.css("text-halign");D.labelWidth=j,D.labelHeight=B,D.labelPos=z}if(this.idToLNode[C.data("id")]=D,isNaN(D.rect.x)&&(D.rect.x=0),isNaN(D.rect.y)&&(D.rect.y=0),R!=null&&R.length>0){var W;W=x.getGraphManager().add(x.newGraph(),D),this.processChildrenList(W,R,x)}}},y.prototype.stop=function(){return this.stopped=!0,this};var b=function(m){m("layout","cose-bilkent",y)};typeof cytoscape<"u"&&b(cytoscape),n.exports=b}])})}(km)),km.exports}var xM=EM();const OM=r0(xM);fd.use(OM);const SM="cose-bilkent",TM=(r,e)=>{const t=fd({headless:!0,styleEnabled:!1});t.add(r);const n={};return t.layout({name:SM,animate:!1,spacingFactor:e,quality:"default",tile:!1,randomize:!0,stop:()=>{t.nodes().forEach(a=>{n[a.id()]={...a.position()}})}}).run(),{positions:n}};class CM{start(){}postMessage(e){const{elements:t,spacingFactor:n}=e,i=TM(t,n);this.onmessage({data:i})}onmessage(){}close(){}}const PM={port:new CM},AM=()=>new SharedWorker(new URL("/assets/CoseBilkentLayout.worker-DU73nTwu.js",import.meta.url),{type:"module",name:"CoseBilkentLayout"});var Zg={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var RM=Zg.exports,fO;function Ci(){return fO||(fO=1,function(r,e){(function(){var t,n="4.17.21",i=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",s="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",l=500,c="__lodash_placeholder__",f=1,h=2,d=4,v=1,y=2,w=1,b=2,p=4,m=8,x=16,T=32,P=64,C=128,R=256,D=512,N=30,j="...",B=800,z=16,W=1,Z=2,Q=3,re=1/0,ee=9007199254740991,ue=17976931348623157e292,de=NaN,se=4294967295,me=se-1,Me=se>>>1,he=[["ary",C],["bind",w],["bindKey",b],["curry",m],["curryRight",x],["flip",D],["partial",T],["partialRight",P],["rearg",R]],fe="[object Arguments]",Ee="[object Array]",Ce="[object AsyncFunction]",ke="[object Boolean]",Re="[object Date]",ve="[object DOMException]",we="[object Error]",Oe="[object Function]",Be="[object GeneratorFunction]",Ye="[object Map]",ht="[object Number]",Ct="[object Null]",ct="[object Object]",H="[object Promise]",$="[object Proxy]",ne="[object RegExp]",Ie="[object Set]",Le="[object String]",ze="[object Symbol]",Je="[object Undefined]",Pt="[object WeakMap]",Lt="[object WeakSet]",Wt="[object ArrayBuffer]",Bt="[object DataView]",er="[object Float32Array]",Ar="[object Float64Array]",Yt="[object Int8Array]",dt="[object Int16Array]",be="[object Int32Array]",it="[object Uint8Array]",st="[object Uint8ClampedArray]",ut="[object Uint16Array]",lt="[object Uint32Array]",Xt=/\b__p \+= '';/g,pt=/\b(__p \+=) '' \+/g,Qt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,mr=/&(?:amp|lt|gt|quot|#39);/g,Rr=/[&<>"']/g,ar=RegExp(mr.source),nr=RegExp(Rr.source),tr=/<%-([\s\S]+?)%>/g,lr=/<%([\s\S]+?)%>/g,Vr=/<%=([\s\S]+?)%>/g,fn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,In=/^\w*$/,Un=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,hn=/[\\^$.*+?()[\]{}|]/g,Kn=RegExp(hn.source),vn=/^\s+/,Ei=/\s/,Li=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Br=/\{\n\/\* \[wrapped with (.+)\] \*/,Tn=/,? & /,Ni=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,_o=/[()=,{}\[\]\/\s]/,Pi=/\\(\\)?/g,vi=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,un=/\w*$/,zn=/^[-+]0x[0-9a-f]+$/i,Ta=/^0b[01]+$/i,pi=/^\[object .+?Constructor\]$/,Ou=/^0o[0-7]+$/i,Ca=/^(?:0|[1-9]\d*)$/,Hi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Wa=/($^)/,na=/['\n\r\u2028\u2029\\]/g,kn="\\ud800-\\udfff",ui="\\u0300-\\u036f",pr="\\ufe20-\\ufe2f",Pa="\\u20d0-\\u20ff",lo=ui+pr+Pa,qr="\\u2700-\\u27bf",Kr="a-z\\xdf-\\xf6\\xf8-\\xff",Ha="\\xac\\xb1\\xd7\\xf7",Hs="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",eo="\\u2000-\\u206f",ia=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Su="A-Z\\xc0-\\xd6\\xd8-\\xde",Dn="\\ufe0e\\ufe0f",Ai=Ha+Hs+eo+ia,Yi="[']",Tu="["+kn+"]",rl="["+Ai+"]",ji="["+lo+"]",Ya="\\d+",Ys="["+qr+"]",ec="["+Kr+"]",tc="[^"+kn+Ai+Ya+qr+Kr+Su+"]",zr="\\ud83c[\\udffb-\\udfff]",Uo="(?:"+ji+"|"+zr+")",co="[^"+kn+"]",rc="(?:\\ud83c[\\udde6-\\uddff]){2}",qt="[\\ud800-\\udbff][\\udc00-\\udfff]",Xs="["+Su+"]",nc="\\u200d",Aa="(?:"+ec+"|"+tc+")",Cu="(?:"+Xs+"|"+tc+")",wo="(?:"+Yi+"(?:d|ll|m|re|s|t|ve))?",$r="(?:"+Yi+"(?:D|LL|M|RE|S|T|VE))?",oa=Uo+"?",nl="["+Dn+"]?",oh="(?:"+nc+"(?:"+[co,rc,qt].join("|")+")"+nl+oa+")*",ic="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ah="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Qc=nl+oa+oh,il="(?:"+[Ys,rc,qt].join("|")+")"+Qc,Ks="(?:"+[co+ji+"?",ji,rc,qt,Tu].join("|")+")",_s=RegExp(Yi,"g"),Xa=RegExp(ji,"g"),ol=RegExp(zr+"(?="+zr+")|"+Ks+Qc,"g"),oc=RegExp([Xs+"?"+ec+"+"+wo+"(?="+[rl,Xs,"$"].join("|")+")",Cu+"+"+$r+"(?="+[rl,Xs+Aa,"$"].join("|")+")",Xs+"?"+Aa+"+"+wo,Xs+"+"+$r,ah,ic,Ya,il].join("|"),"g"),ac=RegExp("["+nc+kn+lo+Dn+"]"),al=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,$s=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],sl=-1,pn={};pn[er]=pn[Ar]=pn[Yt]=pn[dt]=pn[be]=pn[it]=pn[st]=pn[ut]=pn[lt]=!0,pn[fe]=pn[Ee]=pn[Wt]=pn[ke]=pn[Bt]=pn[Re]=pn[we]=pn[Oe]=pn[Ye]=pn[ht]=pn[ct]=pn[ne]=pn[Ie]=pn[Le]=pn[Pt]=!1;var Dr={};Dr[fe]=Dr[Ee]=Dr[Wt]=Dr[Bt]=Dr[ke]=Dr[Re]=Dr[er]=Dr[Ar]=Dr[Yt]=Dr[dt]=Dr[be]=Dr[Ye]=Dr[ht]=Dr[ct]=Dr[ne]=Dr[Ie]=Dr[Le]=Dr[ze]=Dr[it]=Dr[st]=Dr[ut]=Dr[lt]=!0,Dr[we]=Dr[Oe]=Dr[Pt]=!1;var sc={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Zs={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Jc={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},ws={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ka=parseFloat,sh=parseInt,md=typeof Ky=="object"&&Ky&&Ky.Object===Object&&Ky,Qs=typeof self=="object"&&self&&self.Object===Object&&self,Gn=md||Qs||Function("return this")(),uc=e&&!e.nodeType&&e,to=uc&&!0&&r&&!r.nodeType&&r,Js=to&&to.exports===uc,lc=Js&&md.process,Bi=function(){try{var Qe=to&&to.require&&to.require("util").types;return Qe||lc&&lc.binding&&lc.binding("util")}catch{}}(),$n=Bi&&Bi.isArrayBuffer,Ra=Bi&&Bi.isDate,Ia=Bi&&Bi.isMap,aa=Bi&&Bi.isRegExp,at=Bi&&Bi.isSet,gt=Bi&&Bi.isTypedArray;function yt(Qe,vt,rt){switch(rt.length){case 0:return Qe.call(vt);case 1:return Qe.call(vt,rt[0]);case 2:return Qe.call(vt,rt[0],rt[1]);case 3:return Qe.call(vt,rt[0],rt[1],rt[2])}return Qe.apply(vt,rt)}function Vt(Qe,vt,rt,Kt){for(var br=-1,Yr=Qe==null?0:Qe.length;++br<Yr;){var yi=Qe[br];vt(Kt,yi,rt(yi),Qe)}return Kt}function ir(Qe,vt){for(var rt=-1,Kt=Qe==null?0:Qe.length;++rt<Kt&&vt(Qe[rt],rt,Qe)!==!1;);return Qe}function Jr(Qe,vt){for(var rt=Qe==null?0:Qe.length;rt--&&vt(Qe[rt],rt,Qe)!==!1;);return Qe}function Ri(Qe,vt){for(var rt=-1,Kt=Qe==null?0:Qe.length;++rt<Kt;)if(!vt(Qe[rt],rt,Qe))return!1;return!0}function ro(Qe,vt){for(var rt=-1,Kt=Qe==null?0:Qe.length,br=0,Yr=[];++rt<Kt;){var yi=Qe[rt];vt(yi,rt,Qe)&&(Yr[br++]=yi)}return Yr}function gn(Qe,vt){var rt=Qe==null?0:Qe.length;return!!rt&&Es(Qe,vt,0)>-1}function ef(Qe,vt,rt){for(var Kt=-1,br=Qe==null?0:Qe.length;++Kt<br;)if(rt(vt,Qe[Kt]))return!0;return!1}function Vn(Qe,vt){for(var rt=-1,Kt=Qe==null?0:Qe.length,br=Array(Kt);++rt<Kt;)br[rt]=vt(Qe[rt],rt,Qe);return br}function gi(Qe,vt){for(var rt=-1,Kt=vt.length,br=Qe.length;++rt<Kt;)Qe[br+rt]=vt[rt];return Qe}function cc(Qe,vt,rt,Kt){var br=-1,Yr=Qe==null?0:Qe.length;for(Kt&&Yr&&(rt=Qe[++br]);++br<Yr;)rt=vt(rt,Qe[br],br,Qe);return rt}function Wv(Qe,vt,rt,Kt){var br=Qe==null?0:Qe.length;for(Kt&&br&&(rt=Qe[--br]);br--;)rt=vt(rt,Qe[br],br,Qe);return rt}function Pu(Qe,vt){for(var rt=-1,Kt=Qe==null?0:Qe.length;++rt<Kt;)if(vt(Qe[rt],rt,Qe))return!0;return!1}var ul=xs("length");function Au(Qe){return Qe.split("")}function en(Qe){return Qe.match(Ni)||[]}function fc(Qe,vt,rt){var Kt;return rt(Qe,function(br,Yr,yi){if(vt(br,Yr,yi))return Kt=Yr,!1}),Kt}function eu(Qe,vt,rt,Kt){for(var br=Qe.length,Yr=rt+(Kt?1:-1);Kt?Yr--:++Yr<br;)if(vt(Qe[Yr],Yr,Qe))return Yr;return-1}function Es(Qe,vt,rt){return vt===vt?Kv(Qe,vt,rt):eu(Qe,Ru,rt)}function uh(Qe,vt,rt,Kt){for(var br=rt-1,Yr=Qe.length;++br<Yr;)if(Kt(Qe[br],vt))return br;return-1}function Ru(Qe){return Qe!==Qe}function tf(Qe,vt){var rt=Qe==null?0:Qe.length;return rt?Iu(Qe,vt)/rt:de}function xs(Qe){return function(vt){return vt==null?t:vt[Qe]}}function $a(Qe){return function(vt){return Qe==null?t:Qe[vt]}}function hc(Qe,vt,rt,Kt,br){return br(Qe,function(Yr,yi,pe){rt=Kt?(Kt=!1,Yr):vt(rt,Yr,yi,pe)}),rt}function Hv(Qe,vt){var rt=Qe.length;for(Qe.sort(vt);rt--;)Qe[rt]=Qe[rt].value;return Qe}function Iu(Qe,vt){for(var rt,Kt=-1,br=Qe.length;++Kt<br;){var Yr=vt(Qe[Kt]);Yr!==t&&(rt=rt===t?Yr:rt+Yr)}return rt}function rf(Qe,vt){for(var rt=-1,Kt=Array(Qe);++rt<Qe;)Kt[rt]=vt(rt);return Kt}function bd(Qe,vt){return Vn(vt,function(rt){return[rt,Qe[rt]]})}function nf(Qe){return Qe&&Qe.slice(0,Zn(Qe)+1).replace(vn,"")}function fo(Qe){return function(vt){return Qe(vt)}}function ku(Qe,vt){return Vn(vt,function(rt){return Qe[rt]})}function Za(Qe,vt){return Qe.has(vt)}function of(Qe,vt){for(var rt=-1,Kt=Qe.length;++rt<Kt&&Es(vt,Qe[rt],0)>-1;);return rt}function Yv(Qe,vt){for(var rt=Qe.length;rt--&&Es(vt,Qe[rt],0)>-1;);return rt}function Xv(Qe,vt){for(var rt=Qe.length,Kt=0;rt--;)Qe[rt]===vt&&++Kt;return Kt}var Eo=$a(sc),lh=$a(Zs);function ch(Qe){return"\\"+ws[Qe]}function af(Qe,vt){return Qe==null?t:Qe[vt]}function Du(Qe){return ac.test(Qe)}function _d(Qe){return al.test(Qe)}function xo(Qe){for(var vt,rt=[];!(vt=Qe.next()).done;)rt.push(vt.value);return rt}function no(Qe){var vt=-1,rt=Array(Qe.size);return Qe.forEach(function(Kt,br){rt[++vt]=[br,Kt]}),rt}function Cn(Qe,vt){return function(rt){return Qe(vt(rt))}}function qn(Qe,vt){for(var rt=-1,Kt=Qe.length,br=0,Yr=[];++rt<Kt;){var yi=Qe[rt];(yi===vt||yi===c)&&(Qe[rt]=c,Yr[br++]=rt)}return Yr}function fh(Qe){var vt=-1,rt=Array(Qe.size);return Qe.forEach(function(Kt){rt[++vt]=Kt}),rt}function fg(Qe){var vt=-1,rt=Array(Qe.size);return Qe.forEach(function(Kt){rt[++vt]=[Kt,Kt]}),rt}function Kv(Qe,vt,rt){for(var Kt=rt-1,br=Qe.length;++Kt<br;)if(Qe[Kt]===vt)return Kt;return-1}function $v(Qe,vt,rt){for(var Kt=rt+1;Kt--;)if(Qe[Kt]===vt)return Kt;return Kt}function rr(Qe){return Du(Qe)?dc(Qe):ul(Qe)}function io(Qe){return Du(Qe)?vc(Qe):Au(Qe)}function Zn(Qe){for(var vt=Qe.length;vt--&&Ei.test(Qe.charAt(vt)););return vt}var ll=$a(Jc);function dc(Qe){for(var vt=ol.lastIndex=0;ol.test(Qe);)++vt;return vt}function vc(Qe){return Qe.match(ol)||[]}function sf(Qe){return Qe.match(oc)||[]}var cl=function Qe(vt){vt=vt==null?Gn:fl.defaults(Gn.Object(),vt,fl.pick(Gn,$s));var rt=vt.Array,Kt=vt.Date,br=vt.Error,Yr=vt.Function,yi=vt.Math,pe=vt.Object,Os=vt.RegExp,hh=vt.String,Qn=vt.TypeError,Fr=rt.prototype,tu=Yr.prototype,zo=pe.prototype,Xi=vt["__core-js_shared__"],Qa=tu.toString,Nr=zo.hasOwnProperty,Zv=0,dh=function(){var S=/[^.]+$/.exec(Xi&&Xi.keys&&Xi.keys.IE_PROTO||"");return S?"Symbol(src)_1."+S:""}(),sa=zo.toString,wd=Qa.call(pe),Ed=Gn._,uf=Os("^"+Qa.call(Nr).replace(hn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Mu=Js?vt.Buffer:t,Gr=vt.Symbol,hl=vt.Uint8Array,Ss=Mu?Mu.allocUnsafe:t,dl=Cn(pe.getPrototypeOf,pe),ka=pe.create,Go=zo.propertyIsEnumerable,vl=Fr.splice,lf=Gr?Gr.isConcatSpreadable:t,Ts=Gr?Gr.iterator:t,Vo=Gr?Gr.toStringTag:t,Oo=function(){try{var S=vu(pe,"defineProperty");return S({},"",{}),S}catch{}}(),Qv=vt.clearTimeout!==Gn.clearTimeout&&vt.clearTimeout,cf=Kt&&Kt.now!==Gn.Date.now&&Kt.now,xd=vt.setTimeout!==Gn.setTimeout&&vt.setTimeout,Wn=yi.ceil,pl=yi.floor,vh=pe.getOwnPropertySymbols,Cs=Mu?Mu.isBuffer:t,ff=vt.isFinite,hf=Fr.join,ru=Cn(pe.keys,pe),Ii=yi.max,dn=yi.min,ph=Kt.now,gl=vt.parseInt,gh=yi.random,Lu=Fr.reverse,nu=vu(vt,"DataView"),Da=vu(vt,"Map"),Nu=vu(vt,"Promise"),iu=vu(vt,"Set"),pc=vu(vt,"WeakMap"),yl=vu(pe,"create"),ou=pc&&new pc,Ps={},Jv=ci(nu),Od=ci(Da),gc=ci(Nu),yh=ci(iu),yc=ci(pc),mc=Gr?Gr.prototype:t,ua=mc?mc.valueOf:t,au=mc?mc.toString:t;function _e(S){if(Si(S)&&!Lr(S)&&!(S instanceof jr)){if(S instanceof gr)return S;if(Nr.call(S,"__wrapped__"))return Xd(S)}return new gr(S)}var ju=function(){function S(){}return function(k){if(!Nn(k))return{};if(ka)return ka(k);S.prototype=k;var U=new S;return S.prototype=t,U}}();function Bu(){}function gr(S,k){this.__wrapped__=S,this.__actions__=[],this.__chain__=!!k,this.__index__=0,this.__values__=t}_e.templateSettings={escape:tr,evaluate:lr,interpolate:Vr,variable:"",imports:{_:_e}},_e.prototype=Bu.prototype,_e.prototype.constructor=_e,gr.prototype=ju(Bu.prototype),gr.prototype.constructor=gr;function jr(S){this.__wrapped__=S,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=se,this.__views__=[]}function df(){var S=new jr(this.__wrapped__);return S.__actions__=Ui(this.__actions__),S.__dir__=this.__dir__,S.__filtered__=this.__filtered__,S.__iteratees__=Ui(this.__iteratees__),S.__takeCount__=this.__takeCount__,S.__views__=Ui(this.__views__),S}function ml(){if(this.__filtered__){var S=new jr(this);S.__dir__=-1,S.__filtered__=!0}else S=this.clone(),S.__dir__*=-1;return S}function vf(){var S=this.__wrapped__.value(),k=this.__dir__,U=Lr(S),K=k<0,oe=U?S.length:0,xe=hp(0,oe,this.__views__),Ue=xe.start,We=xe.end,et=We-Ue,Et=K?We:Ue-1,Ot=this.__iteratees__,At=Ot.length,Ht=0,ur=dn(et,this.__takeCount__);if(!U||!K&&oe==et&&ur==et)return Vu(S,this.__actions__);var Cr=[];e:for(;et--&&Ht<ur;){Et+=k;for(var Xr=-1,Pr=S[Et];++Xr<At;){var on=Ot[Xr],cn=on.iteratee,_u=on.type,ys=cn(Pr);if(_u==Z)Pr=ys;else if(!ys){if(_u==W)continue e;break e}}Cr[Ht++]=Pr}return Cr}jr.prototype=ju(Bu.prototype),jr.prototype.constructor=jr;function Ja(S){var k=-1,U=S==null?0:S.length;for(this.clear();++k<U;){var K=S[k];this.set(K[0],K[1])}}function hg(){this.__data__=yl?yl(null):{},this.size=0}function Ma(S){var k=this.has(S)&&delete this.__data__[S];return this.size-=k?1:0,k}function ep(S){var k=this.__data__;if(yl){var U=k[S];return U===u?t:U}return Nr.call(k,S)?k[S]:t}function pf(S){var k=this.__data__;return yl?k[S]!==t:Nr.call(k,S)}function bl(S,k){var U=this.__data__;return this.size+=this.has(S)?0:1,U[S]=yl&&k===t?u:k,this}Ja.prototype.clear=hg,Ja.prototype.delete=Ma,Ja.prototype.get=ep,Ja.prototype.has=pf,Ja.prototype.set=bl;function La(S){var k=-1,U=S==null?0:S.length;for(this.clear();++k<U;){var K=S[k];this.set(K[0],K[1])}}function Sd(){this.__data__=[],this.size=0}function la(S){var k=this.__data__,U=Ec(k,S);if(U<0)return!1;var K=k.length-1;return U==K?k.pop():vl.call(k,U,1),--this.size,!0}function or(S){var k=this.__data__,U=Ec(k,S);return U<0?t:k[U][1]}function mh(S){return Ec(this.__data__,S)>-1}function ho(S,k){var U=this.__data__,K=Ec(U,S);return K<0?(++this.size,U.push([S,k])):U[K][1]=k,this}La.prototype.clear=Sd,La.prototype.delete=la,La.prototype.get=or,La.prototype.has=mh,La.prototype.set=ho;function vo(S){var k=-1,U=S==null?0:S.length;for(this.clear();++k<U;){var K=S[k];this.set(K[0],K[1])}}function ca(){this.size=0,this.__data__={hash:new Ja,map:new(Da||La),string:new Ja}}function gf(S){var k=ga(this,S).delete(S);return this.size-=k?1:0,k}function tp(S){return ga(this,S).get(S)}function _l(S){return ga(this,S).has(S)}function bc(S,k){var U=ga(this,S),K=U.size;return U.set(S,k),this.size+=U.size==K?0:1,this}vo.prototype.clear=ca,vo.prototype.delete=gf,vo.prototype.get=tp,vo.prototype.has=_l,vo.prototype.set=bc;function po(S){var k=-1,U=S==null?0:S.length;for(this.__data__=new vo;++k<U;)this.add(S[k])}function dg(S){return this.__data__.set(S,u),this}function fa(S){return this.__data__.has(S)}po.prototype.add=po.prototype.push=dg,po.prototype.has=fa;function ha(S){var k=this.__data__=new La(S);this.size=k.size}function wl(){this.__data__=new La,this.size=0}function _c(S){var k=this.__data__,U=k.delete(S);return this.size=k.size,U}function yf(S){return this.__data__.get(S)}function rp(S){return this.__data__.has(S)}function wc(S,k){var U=this.__data__;if(U instanceof La){var K=U.__data__;if(!Da||K.length<i-1)return K.push([S,k]),this.size=++U.size,this;U=this.__data__=new vo(K)}return U.set(S,k),this.size=U.size,this}ha.prototype.clear=wl,ha.prototype.delete=_c,ha.prototype.get=yf,ha.prototype.has=rp,ha.prototype.set=wc;function bh(S,k){var U=Lr(S),K=!U&&Bl(S),oe=!U&&!K&&Fl(S),xe=!U&&!K&&!oe&&Gf(S),Ue=U||K||oe||xe,We=Ue?rf(S.length,hh):[],et=We.length;for(var Et in S)(k||Nr.call(S,Et))&&!(Ue&&(Et=="length"||oe&&(Et=="offset"||Et=="parent")||xe&&(Et=="buffer"||Et=="byteLength"||Et=="byteOffset")||pu(Et,et)))&&We.push(Et);return We}function So(S){var k=S.length;return k?S[Al(0,k-1)]:t}function es(S,k){return Lf(Ui(S),ns(k,0,S.length))}function mf(S){return Lf(Ui(S))}function Fu(S,k,U){(U!==t&&!ps(S[k],U)||U===t&&!(k in S))&&rs(S,k,U)}function As(S,k,U){var K=S[k];(!(Nr.call(S,k)&&ps(K,U))||U===t&&!(k in S))&&rs(S,k,U)}function Ec(S,k){for(var U=S.length;U--;)if(ps(S[U][0],k))return U;return-1}function ts(S,k,U,K){return is(S,function(oe,xe,Ue){k(K,oe,U(oe),Ue)}),K}function El(S,k){return S&&ja(k,St(k),S)}function su(S,k){return S&&ja(k,Pe(k),S)}function rs(S,k,U){k=="__proto__"&&Oo?Oo(S,k,{configurable:!0,enumerable:!0,value:U,writable:!0}):S[k]=U}function bf(S,k){for(var U=-1,K=k.length,oe=rt(K),xe=S==null;++U<K;)oe[U]=xe?t:qe(S,k[U]);return oe}function ns(S,k,U){return S===S&&(U!==t&&(S=S<=U?S:U),k!==t&&(S=S>=k?S:k)),S}function qo(S,k,U,K,oe,xe){var Ue,We=k&f,et=k&h,Et=k&d;if(U&&(Ue=oe?U(S,K,oe,xe):U(S)),Ue!==t)return Ue;if(!Nn(S))return S;var Ot=Lr(S);if(Ot){if(Ue=pg(S),!We)return Ui(S,Ue)}else{var At=yo(S),Ht=At==Oe||At==Be;if(Fl(S))return Ld(S,We);if(At==ct||At==fe||Ht&&!oe){if(Ue=et||Ht?{}:vp(S),!We)return et?Af(S,su(Ue,S)):Fd(S,El(Ue,S))}else{if(!Dr[At])return oe?S:{};Ue=pp(S,At,We)}}xe||(xe=new ha);var ur=xe.get(S);if(ur)return ur;xe.set(S,Ue),Dg(S)?S.forEach(function(Pr){Ue.add(qo(Pr,k,U,Pr,S,xe))}):Ft(S)&&S.forEach(function(Pr,on){Ue.set(on,qo(Pr,k,U,on,S,xe))});var Cr=Et?et?Co:kc:et?Pe:St,Xr=Ot?t:Cr(S);return ir(Xr||S,function(Pr,on){Xr&&(on=Pr,Pr=S[on]),As(Ue,on,qo(Pr,k,U,on,S,xe))}),Ue}function _h(S){var k=St(S);return function(U){return _f(U,S,k)}}function _f(S,k,U){var K=U.length;if(S==null)return!K;for(S=pe(S);K--;){var oe=U[K],xe=k[oe],Ue=S[oe];if(Ue===t&&!(oe in S)||!xe(Ue))return!1}return!0}function Wo(S,k,U){if(typeof S!="function")throw new Qn(o);return Hu(function(){S.apply(t,U)},k)}function xc(S,k,U,K){var oe=-1,xe=gn,Ue=!0,We=S.length,et=[],Et=k.length;if(!We)return et;U&&(k=Vn(k,fo(U))),K?(xe=ef,Ue=!1):k.length>=i&&(xe=Za,Ue=!1,k=new po(k));e:for(;++oe<We;){var Ot=S[oe],At=U==null?Ot:U(Ot);if(Ot=K||Ot!==0?Ot:0,Ue&&At===At){for(var Ht=Et;Ht--;)if(k[Ht]===At)continue e;et.push(Ot)}else xe(k,At,K)||et.push(Ot)}return et}var is=fp(Ho),wh=fp(da,!0);function xl(S,k){var U=!0;return is(S,function(K,oe,xe){return U=!!k(K,oe,xe),U}),U}function wf(S,k,U){for(var K=-1,oe=S.length;++K<oe;){var xe=S[K],Ue=k(xe);if(Ue!=null&&(We===t?Ue===Ue&&!gs(Ue):U(Ue,We)))var We=Ue,et=xe}return et}function Td(S,k,U,K){var oe=S.length;for(U=E(U),U<0&&(U=-U>oe?0:oe+U),K=K===t||K>oe?oe:E(K),K<0&&(K+=oe),K=U>K?0:M(K);U<K;)S[U++]=k;return S}function os(S,k){var U=[];return is(S,function(K,oe,xe){k(K,oe,xe)&&U.push(K)}),U}function ki(S,k,U,K,oe){var xe=-1,Ue=S.length;for(U||(U=Vd),oe||(oe=[]);++xe<Ue;){var We=S[xe];k>0&&U(We)?k>1?ki(We,k-1,U,K,oe):gi(oe,We):K||(oe[oe.length]=We)}return oe}var Oc=qu(),Sc=qu(!0);function Ho(S,k){return S&&Oc(S,k,St)}function da(S,k){return S&&Sc(S,k,St)}function Tc(S,k){return ro(k,function(U){return ei(S[U])})}function as(S,k){k=us(k,S);for(var U=0,K=k.length;S!=null&&U<K;)S=S[hs(k[U++])];return U&&U==K?S:t}function Eh(S,k,U){var K=k(S);return Lr(S)?K:gi(K,U(S))}function Ki(S){return S==null?S===t?Je:Ct:Vo&&Vo in pe(S)?ya(S):Gh(S)}function Uu(S,k){return S>k}function _r(S,k){return S!=null&&Nr.call(S,k)}function uu(S,k){return S!=null&&k in pe(S)}function Ef(S,k,U){return S>=dn(k,U)&&S<Ii(k,U)}function lu(S,k,U){for(var K=U?ef:gn,oe=S[0].length,xe=S.length,Ue=xe,We=rt(xe),et=1/0,Et=[];Ue--;){var Ot=S[Ue];Ue&&k&&(Ot=Vn(Ot,fo(k))),et=dn(Ot.length,et),We[Ue]=!U&&(k||oe>=120&&Ot.length>=120)?new po(Ue&&Ot):t}Ot=S[0];var At=-1,Ht=We[0];e:for(;++At<oe&&Et.length<et;){var ur=Ot[At],Cr=k?k(ur):ur;if(ur=U||ur!==0?ur:0,!(Ht?Za(Ht,Cr):K(Et,Cr,U))){for(Ue=xe;--Ue;){var Xr=We[Ue];if(!(Xr?Za(Xr,Cr):K(S[Ue],Cr,U)))continue e}Ht&&Ht.push(Cr),Et.push(ur)}}return Et}function Cd(S,k,U,K){return Ho(S,function(oe,xe,Ue){k(K,U(oe),xe,Ue)}),K}function Ol(S,k,U){k=us(k,S),S=fs(S,k);var K=S==null?S:S[hs(V(k))];return K==null?t:yt(K,S,U)}function Pn(S){return Si(S)&&Ki(S)==fe}function xh(S){return Si(S)&&Ki(S)==Wt}function Sl(S){return Si(S)&&Ki(S)==Re}function Tl(S,k,U,K,oe){return S===k?!0:S==null||k==null||!Si(S)&&!Si(k)?S!==S&&k!==k:$i(S,k,U,K,Tl,oe)}function $i(S,k,U,K,oe,xe){var Ue=Lr(S),We=Lr(k),et=Ue?Ee:yo(S),Et=We?Ee:yo(k);et=et==fe?ct:et,Et=Et==fe?ct:Et;var Ot=et==ct,At=Et==ct,Ht=et==Et;if(Ht&&Fl(S)){if(!Fl(k))return!1;Ue=!0,Ot=!1}if(Ht&&!Ot)return xe||(xe=new ha),Ue||Gf(S)?Nh(S,k,U,K,oe,xe):Ic(S,k,et,U,K,oe,xe);if(!(U&v)){var ur=Ot&&Nr.call(S,"__wrapped__"),Cr=At&&Nr.call(k,"__wrapped__");if(ur||Cr){var Xr=ur?S.value():S,Pr=Cr?k.value():k;return xe||(xe=new ha),oe(Xr,Pr,U,K,xe)}}return Ht?(xe||(xe=new ha),Df(S,k,U,K,oe,xe)):!1}function go(S){return Si(S)&&yo(S)==Ye}function Fi(S,k,U,K){var oe=U.length,xe=oe,Ue=!K;if(S==null)return!xe;for(S=pe(S);oe--;){var We=U[oe];if(Ue&&We[2]?We[1]!==S[We[0]]:!(We[0]in S))return!1}for(;++oe<xe;){We=U[oe];var et=We[0],Et=S[et],Ot=We[1];if(Ue&&We[2]){if(Et===t&&!(et in S))return!1}else{var At=new ha;if(K)var Ht=K(Et,Ot,et,S,k,At);if(!(Ht===t?Tl(Ot,Et,v|y,K,At):Ht))return!1}}return!0}function Cl(S){if(!Nn(S)||Uh(S))return!1;var k=ei(S)?uf:pi;return k.test(ci(S))}function vg(S){return Si(S)&&Ki(S)==ne}function cu(S){return Si(S)&&yo(S)==Ie}function np(S){return Si(S)&&hv(S.length)&&!!pn[Ki(S)]}function Na(S){return typeof S=="function"?S:S==null?ai:typeof S=="object"?Lr(S)?Sh(S[0],S[1]):Pl(S):M1(S)}function xf(S){if(!Po(S))return ru(S);var k=[];for(var U in pe(S))Nr.call(S,U)&&U!="constructor"&&k.push(U);return k}function ip(S){if(!Nn(S))return yu(S);var k=Po(S),U=[];for(var K in S)K=="constructor"&&(k||!Nr.call(S,K))||U.push(K);return U}function fu(S,k){return S<k}function Oh(S,k){var U=-1,K=_a(S)?rt(S.length):[];return is(S,function(oe,xe,Ue){K[++U]=k(oe,xe,Ue)}),K}function Pl(S){var k=kr(S);return k.length==1&&k[0][2]?zh(k[0][0],k[0][1]):function(U){return U===S||Fi(U,S,k)}}function Sh(S,k){return qd(S)&&Mc(k)?zh(hs(S),k):function(U){var K=qe(U,S);return K===t&&K===k?mt(U,S):Tl(k,K,v|y)}}function ss(S,k,U,K,oe){S!==k&&Oc(k,function(xe,Ue){if(oe||(oe=new ha),Nn(xe))Pd(S,k,Ue,U,ss,K,oe);else{var We=K?K(Nl(S,Ue),xe,Ue+"",S,k,oe):t;We===t&&(We=xe),Fu(S,Ue,We)}},Pe)}function Pd(S,k,U,K,oe,xe,Ue){var We=Nl(S,U),et=Nl(k,U),Et=Ue.get(et);if(Et){Fu(S,U,Et);return}var Ot=xe?xe(We,et,U+"",S,k,Ue):t,At=Ot===t;if(At){var Ht=Lr(et),ur=!Ht&&Fl(et),Cr=!Ht&&!ur&&Gf(et);Ot=et,Ht||ur||Cr?Lr(We)?Ot=We:Di(We)?Ot=Ui(We):ur?(At=!1,Ot=Ld(et,!0)):Cr?(At=!1,Ot=jd(et,!0)):Ot=[]:Ul(et)||Bl(et)?(Ot=We,Bl(We)?Ot=F(We):(!Nn(We)||ei(We))&&(Ot=vp(et))):At=!1}At&&(Ue.set(et,Ot),oe(Ot,et,K,xe,Ue),Ue.delete(et)),Fu(S,U,Ot)}function Of(S,k){var U=S.length;if(U)return k+=k<0?U:0,pu(k,U)?S[k]:t}function zu(S,k,U){k.length?k=Vn(k,function(xe){return Lr(xe)?function(Ue){return as(Ue,xe.length===1?xe[0]:xe)}:xe}):k=[ai];var K=-1;k=Vn(k,fo(Tt()));var oe=Oh(S,function(xe,Ue,We){var et=Vn(k,function(Et){return Et(xe)});return{criteria:et,index:++K,value:xe}});return Hv(oe,function(xe,Ue){return kl(xe,Ue,U)})}function Ad(S,k){return Th(S,k,function(U,K){return mt(S,K)})}function Th(S,k,U){for(var K=-1,oe=k.length,xe={};++K<oe;){var Ue=k[K],We=as(S,Ue);U(We,Ue)&&Rl(xe,us(Ue,S),We)}return xe}function xi(S){return function(k){return as(k,S)}}function hu(S,k,U,K){var oe=K?uh:Es,xe=-1,Ue=k.length,We=S;for(S===k&&(k=Ui(k)),U&&(We=Vn(S,fo(U)));++xe<Ue;)for(var et=0,Et=k[xe],Ot=U?U(Et):Et;(et=oe(We,Ot,et,K))>-1;)We!==S&&vl.call(We,et,1),vl.call(S,et,1);return S}function Rd(S,k){for(var U=S?k.length:0,K=U-1;U--;){var oe=k[U];if(U==K||oe!==xe){var xe=oe;pu(oe)?vl.call(S,oe,1):du(S,oe)}}return S}function Al(S,k){return S+pl(gh()*(k-S+1))}function Id(S,k,U,K){for(var oe=-1,xe=Ii(Wn((k-S)/(U||1)),0),Ue=rt(xe);xe--;)Ue[K?xe:++oe]=S,S+=U;return Ue}function kd(S,k){var U="";if(!S||k<1||k>ee)return U;do k%2&&(U+=S),k=pl(k/2),k&&(S+=S);while(k);return U}function Or(S,k){return Hd(ma(S,k,ai),S+"")}function Dd(S){return So(mn(S))}function op(S,k){var U=mn(S);return Lf(U,ns(k,0,U.length))}function Rl(S,k,U,K){if(!Nn(S))return S;k=us(k,S);for(var oe=-1,xe=k.length,Ue=xe-1,We=S;We!=null&&++oe<xe;){var et=hs(k[oe]),Et=U;if(et==="__proto__"||et==="constructor"||et==="prototype")return S;if(oe!=Ue){var Ot=We[et];Et=K?K(Ot,et,We):t,Et===t&&(Et=Nn(Ot)?Ot:pu(k[oe+1])?[]:{})}As(We,et,Et),We=We[et]}return S}var Md=ou?function(S,k){return ou.set(S,k),S}:ai,ap=Oo?function(S,k){return Oo(S,"toString",{configurable:!0,enumerable:!1,value:bi(k),writable:!0})}:ai;function Sf(S){return Lf(mn(S))}function li(S,k,U){var K=-1,oe=S.length;k<0&&(k=-k>oe?0:oe+k),U=U>oe?oe:U,U<0&&(U+=oe),oe=k>U?0:U-k>>>0,k>>>=0;for(var xe=rt(oe);++K<oe;)xe[K]=S[K+k];return xe}function sp(S,k){var U;return is(S,function(K,oe,xe){return U=k(K,oe,xe),!U}),!!U}function Tf(S,k,U){var K=0,oe=S==null?K:S.length;if(typeof k=="number"&&k===k&&oe<=Me){for(;K<oe;){var xe=K+oe>>>1,Ue=S[xe];Ue!==null&&!gs(Ue)&&(U?Ue<=k:Ue<k)?K=xe+1:oe=xe}return oe}return Ch(S,k,ai,U)}function Ch(S,k,U,K){var oe=0,xe=S==null?0:S.length;if(xe===0)return 0;k=U(k);for(var Ue=k!==k,We=k===null,et=gs(k),Et=k===t;oe<xe;){var Ot=pl((oe+xe)/2),At=U(S[Ot]),Ht=At!==t,ur=At===null,Cr=At===At,Xr=gs(At);if(Ue)var Pr=K||Cr;else Et?Pr=Cr&&(K||Ht):We?Pr=Cr&&Ht&&(K||!ur):et?Pr=Cr&&Ht&&!ur&&(K||!Xr):ur||Xr?Pr=!1:Pr=K?At<=k:At<k;Pr?oe=Ot+1:xe=Ot}return dn(xe,me)}function Cf(S,k){for(var U=-1,K=S.length,oe=0,xe=[];++U<K;){var Ue=S[U],We=k?k(Ue):Ue;if(!U||!ps(We,et)){var et=We;xe[oe++]=Ue===0?0:Ue}}return xe}function up(S){return typeof S=="number"?S:gs(S)?de:+S}function va(S){if(typeof S=="string")return S;if(Lr(S))return Vn(S,va)+"";if(gs(S))return au?au.call(S):"";var k=S+"";return k=="0"&&1/S==-re?"-0":k}function Gu(S,k,U){var K=-1,oe=gn,xe=S.length,Ue=!0,We=[],et=We;if(U)Ue=!1,oe=ef;else if(xe>=i){var Et=k?null:Ba(S);if(Et)return fh(Et);Ue=!1,oe=Za,et=new po}else et=k?[]:We;e:for(;++K<xe;){var Ot=S[K],At=k?k(Ot):Ot;if(Ot=U||Ot!==0?Ot:0,Ue&&At===At){for(var Ht=et.length;Ht--;)if(et[Ht]===At)continue e;k&&et.push(At),We.push(Ot)}else oe(et,At,U)||(et!==We&&et.push(At),We.push(Ot))}return We}function du(S,k){return k=us(k,S),S=fs(S,k),S==null||delete S[hs(V(k))]}function Ph(S,k,U,K){return Rl(S,k,U(as(S,k)),K)}function Ah(S,k,U,K){for(var oe=S.length,xe=K?oe:-1;(K?xe--:++xe<oe)&&k(S[xe],xe,S););return U?li(S,K?0:xe,K?xe+1:oe):li(S,K?xe+1:0,K?oe:xe)}function Vu(S,k){var U=S;return U instanceof jr&&(U=U.value()),cc(k,function(K,oe){return oe.func.apply(oe.thisArg,gi([K],oe.args))},U)}function Rh(S,k,U){var K=S.length;if(K<2)return K?Gu(S[0]):[];for(var oe=-1,xe=rt(K);++oe<K;)for(var Ue=S[oe],We=-1;++We<K;)We!=oe&&(xe[oe]=xc(xe[oe]||Ue,S[We],k,U));return Gu(ki(xe,1),k,U)}function Pf(S,k,U){for(var K=-1,oe=S.length,xe=k.length,Ue={};++K<oe;){var We=K<xe?k[K]:t;U(Ue,S[K],We)}return Ue}function Cc(S){return Di(S)?S:[]}function Zi(S){return typeof S=="function"?S:ai}function us(S,k){return Lr(S)?S:qd(S,k)?[S]:jl(G(S))}var Ih=Or;function Rs(S,k,U){var K=S.length;return U=U===t?K:U,!k&&U>=K?S:li(S,k,U)}var lp=Qv||function(S){return Gn.clearTimeout(S)};function Ld(S,k){if(k)return S.slice();var U=S.length,K=Ss?Ss(U):new S.constructor(U);return S.copy(K),K}function Il(S){var k=new S.constructor(S.byteLength);return new hl(k).set(new hl(S)),k}function Pc(S,k){var U=k?Il(S.buffer):S.buffer;return new S.constructor(U,S.byteOffset,S.byteLength)}function Nd(S){var k=new S.constructor(S.source,un.exec(S));return k.lastIndex=S.lastIndex,k}function kh(S){return ua?pe(ua.call(S)):{}}function jd(S,k){var U=k?Il(S.buffer):S.buffer;return new S.constructor(U,S.byteOffset,S.length)}function Dh(S,k){if(S!==k){var U=S!==t,K=S===null,oe=S===S,xe=gs(S),Ue=k!==t,We=k===null,et=k===k,Et=gs(k);if(!We&&!Et&&!xe&&S>k||xe&&Ue&&et&&!We&&!Et||K&&Ue&&et||!U&&et||!oe)return 1;if(!K&&!xe&&!Et&&S<k||Et&&U&&oe&&!K&&!xe||We&&U&&oe||!Ue&&oe||!et)return-1}return 0}function kl(S,k,U){for(var K=-1,oe=S.criteria,xe=k.criteria,Ue=oe.length,We=U.length;++K<Ue;){var et=Dh(oe[K],xe[K]);if(et){if(K>=We)return et;var Et=U[K];return et*(Et=="desc"?-1:1)}}return S.index-k.index}function Bd(S,k,U,K){for(var oe=-1,xe=S.length,Ue=U.length,We=-1,et=k.length,Et=Ii(xe-Ue,0),Ot=rt(et+Et),At=!K;++We<et;)Ot[We]=k[We];for(;++oe<Ue;)(At||oe<xe)&&(Ot[U[oe]]=S[oe]);for(;Et--;)Ot[We++]=S[oe++];return Ot}function cp(S,k,U,K){for(var oe=-1,xe=S.length,Ue=-1,We=U.length,et=-1,Et=k.length,Ot=Ii(xe-We,0),At=rt(Ot+Et),Ht=!K;++oe<Ot;)At[oe]=S[oe];for(var ur=oe;++et<Et;)At[ur+et]=k[et];for(;++Ue<We;)(Ht||oe<xe)&&(At[ur+U[Ue]]=S[oe++]);return At}function Ui(S,k){var U=-1,K=S.length;for(k||(k=rt(K));++U<K;)k[U]=S[U];return k}function ja(S,k,U,K){var oe=!U;U||(U={});for(var xe=-1,Ue=k.length;++xe<Ue;){var We=k[xe],et=K?K(U[We],S[We],We,U,S):t;et===t&&(et=S[We]),oe?rs(U,We,et):As(U,We,et)}return U}function Fd(S,k){return ja(S,Bh(S),k)}function Af(S,k){return ja(S,ln(S),k)}function Rf(S,k){return function(U,K){var oe=Lr(U)?Vt:ts,xe=k?k():{};return oe(U,S,Tt(K,2),xe)}}function Is(S){return Or(function(k,U){var K=-1,oe=U.length,xe=oe>1?U[oe-1]:t,Ue=oe>2?U[2]:t;for(xe=S.length>3&&typeof xe=="function"?(oe--,xe):t,Ue&&ao(U[0],U[1],Ue)&&(xe=oe<3?t:xe,oe=1),k=pe(k);++K<oe;){var We=U[K];We&&S(k,We,K,xe)}return k})}function fp(S,k){return function(U,K){if(U==null)return U;if(!_a(U))return S(U,K);for(var oe=U.length,xe=k?oe:-1,Ue=pe(U);(k?xe--:++xe<oe)&&K(Ue[xe],xe,Ue)!==!1;);return U}}function qu(S){return function(k,U,K){for(var oe=-1,xe=pe(k),Ue=K(k),We=Ue.length;We--;){var et=Ue[S?We:++oe];if(U(xe[et],et,xe)===!1)break}return k}}function ls(S,k,U){var K=k&w,oe=Wu(S);function xe(){var Ue=this&&this!==Gn&&this instanceof xe?oe:S;return Ue.apply(K?U:this,arguments)}return xe}function Ac(S){return function(k){k=G(k);var U=Du(k)?io(k):t,K=U?U[0]:k.charAt(0),oe=U?Rs(U,1).join(""):k.slice(1);return K[S]()+oe}}function Dl(S){return function(k){return cc(Wf(nn(k).replace(_s,"")),S,"")}}function Wu(S){return function(){var k=arguments;switch(k.length){case 0:return new S;case 1:return new S(k[0]);case 2:return new S(k[0],k[1]);case 3:return new S(k[0],k[1],k[2]);case 4:return new S(k[0],k[1],k[2],k[3]);case 5:return new S(k[0],k[1],k[2],k[3],k[4]);case 6:return new S(k[0],k[1],k[2],k[3],k[4],k[5]);case 7:return new S(k[0],k[1],k[2],k[3],k[4],k[5],k[6])}var U=ju(S.prototype),K=S.apply(U,k);return Nn(K)?K:U}}function Mh(S,k,U){var K=Wu(S);function oe(){for(var xe=arguments.length,Ue=rt(xe),We=xe,et=Dc(oe);We--;)Ue[We]=arguments[We];var Et=xe<3&&Ue[0]!==et&&Ue[xe-1]!==et?[]:qn(Ue,et);if(xe-=Et.length,xe<U)return zd(S,k,If,oe.placeholder,t,Ue,Et,t,t,U-xe);var Ot=this&&this!==Gn&&this instanceof oe?K:S;return yt(Ot,this,Ue)}return oe}function Ud(S){return function(k,U,K){var oe=pe(k);if(!_a(k)){var xe=Tt(U,3);k=St(k),U=function(We){return xe(oe[We],We,oe)}}var Ue=S(k,U,K);return Ue>-1?oe[xe?k[Ue]:Ue]:t}}function oo(S){return pa(function(k){var U=k.length,K=U,oe=gr.prototype.thru;for(S&&k.reverse();K--;){var xe=k[K];if(typeof xe!="function")throw new Qn(o);if(oe&&!Ue&&jh(xe)=="wrapper")var Ue=new gr([],!0)}for(K=Ue?K:U;++K<U;){xe=k[K];var We=jh(xe),et=We=="wrapper"?cs(xe):t;et&&Ur(et[0])&&et[1]==(C|m|T|R)&&!et[4].length&&et[9]==1?Ue=Ue[jh(et[0])].apply(Ue,et[3]):Ue=xe.length==1&&Ur(xe)?Ue[We]():Ue.thru(xe)}return function(){var Et=arguments,Ot=Et[0];if(Ue&&Et.length==1&&Lr(Ot))return Ue.plant(Ot).value();for(var At=0,Ht=U?k[At].apply(this,Et):Ot;++At<U;)Ht=k[At].call(this,Ht);return Ht}})}function If(S,k,U,K,oe,xe,Ue,We,et,Et){var Ot=k&C,At=k&w,Ht=k&b,ur=k&(m|x),Cr=k&D,Xr=Ht?t:Wu(S);function Pr(){for(var on=arguments.length,cn=rt(on),_u=on;_u--;)cn[_u]=arguments[_u];if(ur)var ys=Dc(Pr),wu=Xv(cn,ys);if(K&&(cn=Bd(cn,K,oe,ur)),xe&&(cn=cp(cn,xe,Ue,ur)),on-=wu,ur&&on<Et){var uo=qn(cn,ys);return zd(S,k,If,Pr.placeholder,U,cn,uo,We,et,Et-on)}var Xl=At?U:this,Yf=Ht?Xl[S]:S;return on=cn.length,We?cn=gp(cn,We):Cr&&on>1&&cn.reverse(),Ot&&et<on&&(cn.length=et),this&&this!==Gn&&this instanceof Pr&&(Yf=Xr||Wu(Yf)),Yf.apply(Xl,cn)}return Pr}function Ml(S,k){return function(U,K){return Cd(U,S,k(K),{})}}function Yo(S,k){return function(U,K){var oe;if(U===t&&K===t)return k;if(U!==t&&(oe=U),K!==t){if(oe===t)return K;typeof U=="string"||typeof K=="string"?(U=va(U),K=va(K)):(U=up(U),K=up(K)),oe=S(U,K)}return oe}}function Tr(S){return pa(function(k){return k=Vn(k,fo(Tt())),Or(function(U){var K=this;return S(k,function(oe){return yt(oe,K,U)})})})}function kf(S,k){k=k===t?" ":va(k);var U=k.length;if(U<2)return U?kd(k,S):k;var K=kd(k,Wn(S/rr(k)));return Du(k)?Rs(io(K),0,S).join(""):K.slice(0,S)}function To(S,k,U,K){var oe=k&w,xe=Wu(S);function Ue(){for(var We=-1,et=arguments.length,Et=-1,Ot=K.length,At=rt(Ot+et),Ht=this&&this!==Gn&&this instanceof Ue?xe:S;++Et<Ot;)At[Et]=K[Et];for(;et--;)At[Et++]=arguments[++We];return yt(Ht,oe?U:this,At)}return Ue}function Hn(S){return function(k,U,K){return K&&typeof K!="number"&&ao(k,U,K)&&(U=K=t),k=O(k),U===t?(U=k,k=0):U=O(U),K=K===t?k<U?1:-1:O(K),Id(k,U,K,S)}}function Qi(S){return function(k,U){return typeof k=="string"&&typeof U=="string"||(k=I(k),U=I(U)),S(k,U)}}function zd(S,k,U,K,oe,xe,Ue,We,et,Et){var Ot=k&m,At=Ot?Ue:t,Ht=Ot?t:Ue,ur=Ot?xe:t,Cr=Ot?t:xe;k|=Ot?T:P,k&=~(Ot?P:T),k&p||(k&=-4);var Xr=[S,k,oe,ur,At,Cr,Ht,We,et,Et],Pr=U.apply(t,Xr);return Ur(S)&&Mf(Pr,Xr),Pr.placeholder=K,Yd(Pr,S,k)}function Ll(S){var k=yi[S];return function(U,K){if(U=I(U),K=K==null?0:dn(E(K),292),K&&ff(U)){var oe=(G(U)+"e").split("e"),xe=k(oe[0]+"e"+(+oe[1]+K));return oe=(G(xe)+"e").split("e"),+(oe[0]+"e"+(+oe[1]-K))}return k(U)}}var Ba=iu&&1/fh(new iu([,-0]))[1]==re?function(S){return new iu(S)}:Ng;function Rc(S){return function(k){var U=yo(k);return U==Ye?no(k):U==Ie?fg(k):bd(k,S(k))}}function Xo(S,k,U,K,oe,xe,Ue,We){var et=k&b;if(!et&&typeof S!="function")throw new Qn(o);var Et=K?K.length:0;if(Et||(k&=-97,K=oe=t),Ue=Ue===t?Ue:Ii(E(Ue),0),We=We===t?We:E(We),Et-=oe?oe.length:0,k&P){var Ot=K,At=oe;K=oe=t}var Ht=et?t:cs(S),ur=[S,k,U,K,oe,Ot,At,xe,Ue,We];if(Ht&&gu(ur,Ht),S=ur[0],k=ur[1],U=ur[2],K=ur[3],oe=ur[4],We=ur[9]=ur[9]===t?et?0:S.length:Ii(ur[9]-Et,0),!We&&k&(m|x)&&(k&=-25),!k||k==w)var Cr=ls(S,k,U);else k==m||k==x?Cr=Mh(S,k,We):(k==T||k==(w|T))&&!oe.length?Cr=To(S,k,U,K):Cr=If.apply(t,ur);var Xr=Ht?Md:Mf;return Yd(Xr(Cr,ur),S,k)}function Yn(S,k,U,K){return S===t||ps(S,zo[U])&&!Nr.call(K,U)?k:S}function Mn(S,k,U,K,oe,xe){return Nn(S)&&Nn(k)&&(xe.set(k,S),ss(S,k,t,Mn,xe),xe.delete(k)),S}function Lh(S){return Ul(S)?t:S}function Nh(S,k,U,K,oe,xe){var Ue=U&v,We=S.length,et=k.length;if(We!=et&&!(Ue&&et>We))return!1;var Et=xe.get(S),Ot=xe.get(k);if(Et&&Ot)return Et==k&&Ot==S;var At=-1,Ht=!0,ur=U&y?new po:t;for(xe.set(S,k),xe.set(k,S);++At<We;){var Cr=S[At],Xr=k[At];if(K)var Pr=Ue?K(Xr,Cr,At,k,S,xe):K(Cr,Xr,At,S,k,xe);if(Pr!==t){if(Pr)continue;Ht=!1;break}if(ur){if(!Pu(k,function(on,cn){if(!Za(ur,cn)&&(Cr===on||oe(Cr,on,U,K,xe)))return ur.push(cn)})){Ht=!1;break}}else if(!(Cr===Xr||oe(Cr,Xr,U,K,xe))){Ht=!1;break}}return xe.delete(S),xe.delete(k),Ht}function Ic(S,k,U,K,oe,xe,Ue){switch(U){case Bt:if(S.byteLength!=k.byteLength||S.byteOffset!=k.byteOffset)return!1;S=S.buffer,k=k.buffer;case Wt:return!(S.byteLength!=k.byteLength||!xe(new hl(S),new hl(k)));case ke:case Re:case ht:return ps(+S,+k);case we:return S.name==k.name&&S.message==k.message;case ne:case Le:return S==k+"";case Ye:var We=no;case Ie:var et=K&v;if(We||(We=fh),S.size!=k.size&&!et)return!1;var Et=Ue.get(S);if(Et)return Et==k;K|=y,Ue.set(S,k);var Ot=Nh(We(S),We(k),K,oe,xe,Ue);return Ue.delete(S),Ot;case ze:if(ua)return ua.call(S)==ua.call(k)}return!1}function Df(S,k,U,K,oe,xe){var Ue=U&v,We=kc(S),et=We.length,Et=kc(k),Ot=Et.length;if(et!=Ot&&!Ue)return!1;for(var At=et;At--;){var Ht=We[At];if(!(Ue?Ht in k:Nr.call(k,Ht)))return!1}var ur=xe.get(S),Cr=xe.get(k);if(ur&&Cr)return ur==k&&Cr==S;var Xr=!0;xe.set(S,k),xe.set(k,S);for(var Pr=Ue;++At<et;){Ht=We[At];var on=S[Ht],cn=k[Ht];if(K)var _u=Ue?K(cn,on,Ht,k,S,xe):K(on,cn,Ht,S,k,xe);if(!(_u===t?on===cn||oe(on,cn,U,K,xe):_u)){Xr=!1;break}Pr||(Pr=Ht=="constructor")}if(Xr&&!Pr){var ys=S.constructor,wu=k.constructor;ys!=wu&&"constructor"in S&&"constructor"in k&&!(typeof ys=="function"&&ys instanceof ys&&typeof wu=="function"&&wu instanceof wu)&&(Xr=!1)}return xe.delete(S),xe.delete(k),Xr}function pa(S){return Hd(ma(S,t,Wh),S+"")}function kc(S){return Eh(S,St,Bh)}function Co(S){return Eh(S,Pe,ln)}var cs=ou?function(S){return ou.get(S)}:Ng;function jh(S){for(var k=S.name+"",U=Ps[k],K=Nr.call(Ps,k)?U.length:0;K--;){var oe=U[K],xe=oe.func;if(xe==null||xe==S)return oe.name}return k}function Dc(S){var k=Nr.call(_e,"placeholder")?_e:S;return k.placeholder}function Tt(){var S=_e.iteratee||mu;return S=S===mu?Na:S,arguments.length?S(arguments[0],arguments[1]):S}function ga(S,k){var U=S.__data__;return zi(k)?U[typeof k=="string"?"string":"hash"]:U.map}function kr(S){for(var k=St(S),U=k.length;U--;){var K=k[U],oe=S[K];k[U]=[K,oe,Mc(oe)]}return k}function vu(S,k){var U=af(S,k);return Cl(U)?U:t}function ya(S){var k=Nr.call(S,Vo),U=S[Vo];try{S[Vo]=t;var K=!0}catch{}var oe=sa.call(S);return K&&(k?S[Vo]=U:delete S[Vo]),oe}var Bh=vh?function(S){return S==null?[]:(S=pe(S),ro(vh(S),function(k){return Go.call(S,k)}))}:Z0,ln=vh?function(S){for(var k=[];S;)gi(k,Bh(S)),S=dl(S);return k}:Z0,yo=Ki;(nu&&yo(new nu(new ArrayBuffer(1)))!=Bt||Da&&yo(new Da)!=Ye||Nu&&yo(Nu.resolve())!=H||iu&&yo(new iu)!=Ie||pc&&yo(new pc)!=Pt)&&(yo=function(S){var k=Ki(S),U=k==ct?S.constructor:t,K=U?ci(U):"";if(K)switch(K){case Jv:return Bt;case Od:return Ye;case gc:return H;case yh:return Ie;case yc:return Pt}return k});function hp(S,k,U){for(var K=-1,oe=U.length;++K<oe;){var xe=U[K],Ue=xe.size;switch(xe.type){case"drop":S+=Ue;break;case"dropRight":k-=Ue;break;case"take":k=dn(k,S+Ue);break;case"takeRight":S=Ii(S,k-Ue);break}}return{start:S,end:k}}function Fh(S){var k=S.match(Br);return k?k[1].split(Tn):[]}function dp(S,k,U){k=us(k,S);for(var K=-1,oe=k.length,xe=!1;++K<oe;){var Ue=hs(k[K]);if(!(xe=S!=null&&U(S,Ue)))break;S=S[Ue]}return xe||++K!=oe?xe:(oe=S==null?0:S.length,!!oe&&hv(oe)&&pu(Ue,oe)&&(Lr(S)||Bl(S)))}function pg(S){var k=S.length,U=new S.constructor(k);return k&&typeof S[0]=="string"&&Nr.call(S,"index")&&(U.index=S.index,U.input=S.input),U}function vp(S){return typeof S.constructor=="function"&&!Po(S)?ju(dl(S)):{}}function pp(S,k,U){var K=S.constructor;switch(k){case Wt:return Il(S);case ke:case Re:return new K(+S);case Bt:return Pc(S,U);case er:case Ar:case Yt:case dt:case be:case it:case st:case ut:case lt:return jd(S,U);case Ye:return new K;case ht:case Le:return new K(S);case ne:return Nd(S);case Ie:return new K;case ze:return kh(S)}}function Gd(S,k){var U=k.length;if(!U)return S;var K=U-1;return k[K]=(U>1?"& ":"")+k[K],k=k.join(U>2?", ":" "),S.replace(Li,`{
/* [wrapped with `+k+`] */
`)}function Vd(S){return Lr(S)||Bl(S)||!!(lf&&S&&S[lf])}function pu(S,k){var U=typeof S;return k=k??ee,!!k&&(U=="number"||U!="symbol"&&Ca.test(S))&&S>-1&&S%1==0&&S<k}function ao(S,k,U){if(!Nn(U))return!1;var K=typeof k;return(K=="number"?_a(U)&&pu(k,U.length):K=="string"&&k in U)?ps(U[k],S):!1}function qd(S,k){if(Lr(S))return!1;var U=typeof S;return U=="number"||U=="symbol"||U=="boolean"||S==null||gs(S)?!0:In.test(S)||!fn.test(S)||k!=null&&S in pe(k)}function zi(S){var k=typeof S;return k=="string"||k=="number"||k=="symbol"||k=="boolean"?S!=="__proto__":S===null}function Ur(S){var k=jh(S),U=_e[k];if(typeof U!="function"||!(k in jr.prototype))return!1;if(S===U)return!0;var K=cs(U);return!!K&&S===K[0]}function Uh(S){return!!dh&&dh in S}var Ko=Xi?ei:Q0;function Po(S){var k=S&&S.constructor,U=typeof k=="function"&&k.prototype||zo;return S===U}function Mc(S){return S===S&&!Nn(S)}function zh(S,k){return function(U){return U==null?!1:U[S]===k&&(k!==t||S in pe(U))}}function Wd(S){var k=uv(S,function(K){return U.size===l&&U.clear(),K}),U=k.cache;return k}function gu(S,k){var U=S[1],K=k[1],oe=U|K,xe=oe<(w|b|C),Ue=K==C&&U==m||K==C&&U==R&&S[7].length<=k[8]||K==(C|R)&&k[7].length<=k[8]&&U==m;if(!(xe||Ue))return S;K&w&&(S[2]=k[2],oe|=U&w?0:p);var We=k[3];if(We){var et=S[3];S[3]=et?Bd(et,We,k[4]):We,S[4]=et?qn(S[3],c):k[4]}return We=k[5],We&&(et=S[5],S[5]=et?cp(et,We,k[6]):We,S[6]=et?qn(S[5],c):k[6]),We=k[7],We&&(S[7]=We),K&C&&(S[8]=S[8]==null?k[8]:dn(S[8],k[8])),S[9]==null&&(S[9]=k[9]),S[0]=k[0],S[1]=oe,S}function yu(S){var k=[];if(S!=null)for(var U in pe(S))k.push(U);return k}function Gh(S){return sa.call(S)}function ma(S,k,U){return k=Ii(k===t?S.length-1:k,0),function(){for(var K=arguments,oe=-1,xe=Ii(K.length-k,0),Ue=rt(xe);++oe<xe;)Ue[oe]=K[k+oe];oe=-1;for(var We=rt(k+1);++oe<k;)We[oe]=K[oe];return We[k]=U(Ue),yt(S,this,We)}}function fs(S,k){return k.length<2?S:as(S,li(k,0,-1))}function gp(S,k){for(var U=S.length,K=dn(k.length,U),oe=Ui(S);K--;){var xe=k[K];S[K]=pu(xe,U)?oe[xe]:t}return S}function Nl(S,k){if(!(k==="constructor"&&typeof S[k]=="function")&&k!="__proto__")return S[k]}var Mf=Vh(Md),Hu=xd||function(S,k){return Gn.setTimeout(S,k)},Hd=Vh(ap);function Yd(S,k,U){var K=k+"";return Hd(S,Gd(K,Lc(Fh(K),U)))}function Vh(S){var k=0,U=0;return function(){var K=ph(),oe=z-(K-U);if(U=K,oe>0){if(++k>=B)return arguments[0]}else k=0;return S.apply(t,arguments)}}function Lf(S,k){var U=-1,K=S.length,oe=K-1;for(k=k===t?K:k;++U<k;){var xe=Al(U,oe),Ue=S[xe];S[xe]=S[U],S[U]=Ue}return S.length=k,S}var jl=Wd(function(S){var k=[];return S.charCodeAt(0)===46&&k.push(""),S.replace(Un,function(U,K,oe,xe){k.push(oe?xe.replace(Pi,"$1"):K||U)}),k});function hs(S){if(typeof S=="string"||gs(S))return S;var k=S+"";return k=="0"&&1/S==-re?"-0":k}function ci(S){if(S!=null){try{return Qa.call(S)}catch{}try{return S+""}catch{}}return""}function Lc(S,k){return ir(he,function(U){var K="_."+U[0];k&U[1]&&!gn(S,K)&&S.push(K)}),S.sort()}function Xd(S){if(S instanceof jr)return S.clone();var k=new gr(S.__wrapped__,S.__chain__);return k.__actions__=Ui(S.__actions__),k.__index__=S.__index__,k.__values__=S.__values__,k}function $o(S,k,U){(U?ao(S,k,U):k===t)?k=1:k=Ii(E(k),0);var K=S==null?0:S.length;if(!K||k<1)return[];for(var oe=0,xe=0,Ue=rt(Wn(K/k));oe<K;)Ue[xe++]=li(S,oe,oe+=k);return Ue}function so(S){for(var k=-1,U=S==null?0:S.length,K=0,oe=[];++k<U;){var xe=S[k];xe&&(oe[K++]=xe)}return oe}function yp(){var S=arguments.length;if(!S)return[];for(var k=rt(S-1),U=arguments[0],K=S;K--;)k[K-1]=arguments[K];return gi(Lr(U)?Ui(U):[U],ki(k,1))}var Yu=Or(function(S,k){return Di(S)?xc(S,ki(k,1,Di,!0)):[]}),Kd=Or(function(S,k){var U=V(k);return Di(U)&&(U=t),Di(S)?xc(S,ki(k,1,Di,!0),Tt(U,2)):[]}),qh=Or(function(S,k){var U=V(k);return Di(U)&&(U=t),Di(S)?xc(S,ki(k,1,Di,!0),t,U):[]});function Nf(S,k,U){var K=S==null?0:S.length;return K?(k=U||k===t?1:E(k),li(S,k<0?0:k,K)):[]}function mp(S,k,U){var K=S==null?0:S.length;return K?(k=U||k===t?1:E(k),k=K-k,li(S,0,k<0?0:k)):[]}function gg(S,k){return S&&S.length?Ah(S,Tt(k,3),!0,!0):[]}function $d(S,k){return S&&S.length?Ah(S,Tt(k,3),!0):[]}function Fa(S,k,U,K){var oe=S==null?0:S.length;return oe?(U&&typeof U!="number"&&ao(S,k,U)&&(U=0,K=oe),Td(S,k,U,K)):[]}function Zd(S,k,U){var K=S==null?0:S.length;if(!K)return-1;var oe=U==null?0:E(U);return oe<0&&(oe=Ii(K+oe,0)),eu(S,Tt(k,3),oe)}function Ao(S,k,U){var K=S==null?0:S.length;if(!K)return-1;var oe=K-1;return U!==t&&(oe=E(U),oe=U<0?Ii(K+oe,0):dn(oe,K-1)),eu(S,Tt(k,3),oe,!0)}function Wh(S){var k=S==null?0:S.length;return k?ki(S,1):[]}function Qd(S){var k=S==null?0:S.length;return k?ki(S,re):[]}function jf(S,k){var U=S==null?0:S.length;return U?(k=k===t?1:E(k),ki(S,k)):[]}function Jd(S){for(var k=-1,U=S==null?0:S.length,K={};++k<U;){var oe=S[k];K[oe[0]]=oe[1]}return K}function ev(S){return S&&S.length?S[0]:t}function yg(S,k,U){var K=S==null?0:S.length;if(!K)return-1;var oe=U==null?0:E(U);return oe<0&&(oe=Ii(K+oe,0)),Es(S,k,oe)}function Jn(S){var k=S==null?0:S.length;return k?li(S,0,-1):[]}var bp=Or(function(S){var k=Vn(S,Cc);return k.length&&k[0]===S[0]?lu(k):[]}),tv=Or(function(S){var k=V(S),U=Vn(S,Cc);return k===V(U)?k=t:U.pop(),U.length&&U[0]===S[0]?lu(U,Tt(k,2)):[]}),A=Or(function(S){var k=V(S),U=Vn(S,Cc);return k=typeof k=="function"?k:t,k&&U.pop(),U.length&&U[0]===S[0]?lu(U,t,k):[]});function L(S,k){return S==null?"":hf.call(S,k)}function V(S){var k=S==null?0:S.length;return k?S[k-1]:t}function te(S,k,U){var K=S==null?0:S.length;if(!K)return-1;var oe=K;return U!==t&&(oe=E(U),oe=oe<0?Ii(K+oe,0):dn(oe,K-1)),k===k?$v(S,k,oe):eu(S,Ru,oe,!0)}function ae(S,k){return S&&S.length?Of(S,E(k)):t}var Se=Or(Ge);function Ge(S,k){return S&&S.length&&k&&k.length?hu(S,k):S}function He(S,k,U){return S&&S.length&&k&&k.length?hu(S,k,Tt(U,2)):S}function ot(S,k,U){return S&&S.length&&k&&k.length?hu(S,k,t,U):S}var wt=pa(function(S,k){var U=S==null?0:S.length,K=bf(S,k);return Rd(S,Vn(k,function(oe){return pu(oe,U)?+oe:oe}).sort(Dh)),K});function _t(S,k){var U=[];if(!(S&&S.length))return U;var K=-1,oe=[],xe=S.length;for(k=Tt(k,3);++K<xe;){var Ue=S[K];k(Ue,K,S)&&(U.push(Ue),oe.push(K))}return Rd(S,oe),U}function Rt(S){return S==null?S:Lu.call(S)}function $t(S,k,U){var K=S==null?0:S.length;return K?(U&&typeof U!="number"&&ao(S,k,U)?(k=0,U=K):(k=k==null?0:E(k),U=U===t?K:E(U)),li(S,k,U)):[]}function Zt(S,k){return Tf(S,k)}function cr(S,k,U){return Ch(S,k,Tt(U,2))}function xt(S,k){var U=S==null?0:S.length;if(U){var K=Tf(S,k);if(K<U&&ps(S[K],k))return K}return-1}function Dt(S,k){return Tf(S,k,!0)}function vr(S,k,U){return Ch(S,k,Tt(U,2),!0)}function jt(S,k){var U=S==null?0:S.length;if(U){var K=Tf(S,k,!0)-1;if(ps(S[K],k))return K}return-1}function Er(S){return S&&S.length?Cf(S):[]}function wr(S,k){return S&&S.length?Cf(S,Tt(k,2)):[]}function tn(S){var k=S==null?0:S.length;return k?li(S,1,k):[]}function sr(S,k,U){return S&&S.length?(k=U||k===t?1:E(k),li(S,0,k<0?0:k)):[]}function dr(S,k,U){var K=S==null?0:S.length;return K?(k=U||k===t?1:E(k),k=K-k,li(S,k<0?0:k,K)):[]}function Oi(S,k){return S&&S.length?Ah(S,Tt(k,3),!1,!0):[]}function Xn(S,k){return S&&S.length?Ah(S,Tt(k,3)):[]}var Ro=Or(function(S){return Gu(ki(S,1,Di,!0))}),Ln=Or(function(S){var k=V(S);return Di(k)&&(k=t),Gu(ki(S,1,Di,!0),Tt(k,2))}),mo=Or(function(S){var k=V(S);return k=typeof k=="function"?k:t,Gu(ki(S,1,Di,!0),t,k)});function ks(S){return S&&S.length?Gu(S):[]}function Ds(S,k){return S&&S.length?Gu(S,Tt(k,2)):[]}function ds(S,k){return k=typeof k=="function"?k:t,S&&S.length?Gu(S,t,k):[]}function vs(S){if(!(S&&S.length))return[];var k=0;return S=ro(S,function(U){if(Di(U))return k=Ii(U.length,k),!0}),rf(k,function(U){return Vn(S,xs(U))})}function Ms(S,k){if(!(S&&S.length))return[];var U=vs(S);return k==null?U:Vn(U,function(K){return yt(k,t,K)})}var rv=Or(function(S,k){return Di(S)?xc(S,k):[]}),Bf=Or(function(S){return Rh(ro(S,Di))}),nv=Or(function(S){var k=V(S);return Di(k)&&(k=t),Rh(ro(S,Di),Tt(k,2))}),Ls=Or(function(S){var k=V(S);return k=typeof k=="function"?k:t,Rh(ro(S,Di),t,k)}),Nc=Or(vs);function iv(S,k){return Pf(S||[],k||[],As)}function Ff(S,k){return Pf(S||[],k||[],Rl)}var Uf=Or(function(S){var k=S.length,U=k>1?S[k-1]:t;return U=typeof U=="function"?(S.pop(),U):t,Ms(S,U)});function ba(S){var k=_e(S);return k.__chain__=!0,k}function C0(S,k){return k(S),S}function Mr(S,k){return k(S)}var Ay=pa(function(S){var k=S.length,U=k?S[0]:0,K=this.__wrapped__,oe=function(xe){return bf(xe,S)};return k>1||this.__actions__.length||!(K instanceof jr)||!pu(U)?this.thru(oe):(K=K.slice(U,+U+(k?1:0)),K.__actions__.push({func:Mr,args:[oe],thisArg:t}),new gr(K,this.__chain__).thru(function(xe){return k&&!xe.length&&xe.push(t),xe}))});function _p(){return ba(this)}function mg(){return new gr(this.value(),this.__chain__)}function Hh(){this.__values__===t&&(this.__values__=_(this.value()));var S=this.__index__>=this.__values__.length,k=S?t:this.__values__[this.__index__++];return{done:S,value:k}}function Ry(){return this}function Iy(S){for(var k,U=this;U instanceof Bu;){var K=Xd(U);K.__index__=0,K.__values__=t,k?oe.__wrapped__=K:k=K;var oe=K;U=U.__wrapped__}return oe.__wrapped__=S,k}function wp(){var S=this.__wrapped__;if(S instanceof jr){var k=S;return this.__actions__.length&&(k=new jr(this)),k=k.reverse(),k.__actions__.push({func:Mr,args:[Rt],thisArg:t}),new gr(k,this.__chain__)}return this.thru(Rt)}function ov(){return Vu(this.__wrapped__,this.__actions__)}var P0=Rf(function(S,k,U){Nr.call(S,U)?++S[U]:rs(S,U,1)});function av(S,k,U){var K=Lr(S)?Ri:xl;return U&&ao(S,k,U)&&(k=t),K(S,Tt(k,3))}function Ep(S,k){var U=Lr(S)?ro:os;return U(S,Tt(k,3))}var A0=Ud(Zd),xp=Ud(Ao);function R0(S,k){return ki(Sp(S,k),1)}function bg(S,k){return ki(Sp(S,k),re)}function ky(S,k,U){return U=U===t?1:E(U),ki(Sp(S,k),U)}function Dy(S,k){var U=Lr(S)?ir:is;return U(S,Tt(k,3))}function My(S,k){var U=Lr(S)?Jr:wh;return U(S,Tt(k,3))}var Op=Rf(function(S,k,U){Nr.call(S,U)?S[U].push(k):rs(S,U,[k])});function Ly(S,k,U,K){S=_a(S)?S:mn(S),U=U&&!K?E(U):0;var oe=S.length;return U<0&&(U=Ii(oe+U,0)),Ap(S)?U<=oe&&S.indexOf(k,U)>-1:!!oe&&Es(S,k,U)>-1}var I0=Or(function(S,k,U){var K=-1,oe=typeof k=="function",xe=_a(S)?rt(S.length):[];return is(S,function(Ue){xe[++K]=oe?yt(k,Ue,U):Ol(Ue,k,U)}),xe}),k0=Rf(function(S,k,U){rs(S,U,k)});function Sp(S,k){var U=Lr(S)?Vn:Oh;return U(S,Tt(k,3))}function Ny(S,k,U,K){return S==null?[]:(Lr(k)||(k=k==null?[]:[k]),U=K?t:U,Lr(U)||(U=U==null?[]:[U]),zu(S,k,U))}var D0=Rf(function(S,k,U){S[U?0:1].push(k)},function(){return[[],[]]});function M0(S,k,U){var K=Lr(S)?cc:hc,oe=arguments.length<3;return K(S,Tt(k,4),U,oe,is)}function L0(S,k,U){var K=Lr(S)?Wv:hc,oe=arguments.length<3;return K(S,Tt(k,4),U,oe,wh)}function N0(S,k){var U=Lr(S)?ro:os;return U(S,lv(Tt(k,3)))}function j0(S){var k=Lr(S)?So:Dd;return k(S)}function jy(S,k,U){(U?ao(S,k,U):k===t)?k=1:k=E(k);var K=Lr(S)?es:op;return K(S,k)}function By(S){var k=Lr(S)?mf:Sf;return k(S)}function Fy(S){if(S==null)return 0;if(_a(S))return Ap(S)?rr(S):S.length;var k=yo(S);return k==Ye||k==Ie?S.size:xf(S).length}function _g(S,k,U){var K=Lr(S)?Pu:sp;return U&&ao(S,k,U)&&(k=t),K(S,Tt(k,3))}var wg=Or(function(S,k){if(S==null)return[];var U=k.length;return U>1&&ao(S,k[0],k[1])?k=[]:U>2&&ao(k[0],k[1],k[2])&&(k=[k[0]]),zu(S,ki(k,1),[])}),jc=cf||function(){return Gn.Date.now()};function Eg(S,k){if(typeof k!="function")throw new Qn(o);return S=E(S),function(){if(--S<1)return k.apply(this,arguments)}}function xg(S,k,U){return k=U?t:k,k=S&&k==null?S.length:k,Xo(S,C,t,t,t,t,k)}function Tp(S,k){var U;if(typeof k!="function")throw new Qn(o);return S=E(S),function(){return--S>0&&(U=k.apply(this,arguments)),S<=1&&(k=t),U}}var Xu=Or(function(S,k,U){var K=w;if(U.length){var oe=qn(U,Dc(Xu));K|=T}return Xo(S,K,k,U,oe)}),Yh=Or(function(S,k,U){var K=w|b;if(U.length){var oe=qn(U,Dc(Yh));K|=T}return Xo(k,K,S,U,oe)});function Og(S,k,U){k=U?t:k;var K=Xo(S,m,t,t,t,t,t,k);return K.placeholder=Og.placeholder,K}function Sg(S,k,U){k=U?t:k;var K=Xo(S,x,t,t,t,t,t,k);return K.placeholder=Sg.placeholder,K}function Uy(S,k,U){var K,oe,xe,Ue,We,et,Et=0,Ot=!1,At=!1,Ht=!0;if(typeof S!="function")throw new Qn(o);k=I(k)||0,Nn(U)&&(Ot=!!U.leading,At="maxWait"in U,xe=At?Ii(I(U.maxWait)||0,k):xe,Ht="trailing"in U?!!U.trailing:Ht);function ur(uo){var Xl=K,Yf=oe;return K=oe=t,Et=uo,Ue=S.apply(Yf,Xl),Ue}function Cr(uo){return Et=uo,We=Hu(on,k),Ot?ur(uo):Ue}function Xr(uo){var Xl=uo-et,Yf=uo-Et,L1=k-Xl;return At?dn(L1,xe-Yf):L1}function Pr(uo){var Xl=uo-et,Yf=uo-Et;return et===t||Xl>=k||Xl<0||At&&Yf>=xe}function on(){var uo=jc();if(Pr(uo))return cn(uo);We=Hu(on,Xr(uo))}function cn(uo){return We=t,Ht&&K?ur(uo):(K=oe=t,Ue)}function _u(){We!==t&&lp(We),Et=0,K=et=oe=We=t}function ys(){return We===t?Ue:cn(jc())}function wu(){var uo=jc(),Xl=Pr(uo);if(K=arguments,oe=this,et=uo,Xl){if(We===t)return Cr(et);if(At)return lp(We),We=Hu(on,k),ur(et)}return We===t&&(We=Hu(on,k)),Ue}return wu.cancel=_u,wu.flush=ys,wu}var B0=Or(function(S,k){return Wo(S,1,k)}),Cp=Or(function(S,k,U){return Wo(S,I(k)||0,U)});function sv(S){return Xo(S,D)}function uv(S,k){if(typeof S!="function"||k!=null&&typeof k!="function")throw new Qn(o);var U=function(){var K=arguments,oe=k?k.apply(this,K):K[0],xe=U.cache;if(xe.has(oe))return xe.get(oe);var Ue=S.apply(this,K);return U.cache=xe.set(oe,Ue)||xe,Ue};return U.cache=new(uv.Cache||vo),U}uv.Cache=vo;function lv(S){if(typeof S!="function")throw new Qn(o);return function(){var k=arguments;switch(k.length){case 0:return!S.call(this);case 1:return!S.call(this,k[0]);case 2:return!S.call(this,k[0],k[1]);case 3:return!S.call(this,k[0],k[1],k[2])}return!S.apply(this,k)}}function zy(S){return Tp(2,S)}var Tg=Ih(function(S,k){k=k.length==1&&Lr(k[0])?Vn(k[0],fo(Tt())):Vn(ki(k,1),fo(Tt()));var U=k.length;return Or(function(K){for(var oe=-1,xe=dn(K.length,U);++oe<xe;)K[oe]=k[oe].call(this,K[oe]);return yt(S,this,K)})}),cv=Or(function(S,k){var U=qn(k,Dc(cv));return Xo(S,T,t,k,U)}),Cg=Or(function(S,k){var U=qn(k,Dc(Cg));return Xo(S,P,t,k,U)}),F0=pa(function(S,k){return Xo(S,R,t,t,t,k)});function U0(S,k){if(typeof S!="function")throw new Qn(o);return k=k===t?k:E(k),Or(S,k)}function Pg(S,k){if(typeof S!="function")throw new Qn(o);return k=k==null?0:Ii(E(k),0),Or(function(U){var K=U[k],oe=Rs(U,0,k);return K&&gi(oe,K),yt(S,this,oe)})}function z0(S,k,U){var K=!0,oe=!0;if(typeof S!="function")throw new Qn(o);return Nn(U)&&(K="leading"in U?!!U.leading:K,oe="trailing"in U?!!U.trailing:oe),Uy(S,k,{leading:K,maxWait:k,trailing:oe})}function G0(S){return xg(S,1)}function V0(S,k){return cv(Zi(k),S)}function Io(){if(!arguments.length)return[];var S=arguments[0];return Lr(S)?S:[S]}function Ag(S){return qo(S,d)}function q0(S,k){return k=typeof k=="function"?k:t,qo(S,d,k)}function Gy(S){return qo(S,f|d)}function Rg(S,k){return k=typeof k=="function"?k:t,qo(S,f|d,k)}function Ig(S,k){return k==null||_f(S,k,St(k))}function ps(S,k){return S===k||S!==S&&k!==k}var W0=Qi(Uu),zf=Qi(function(S,k){return S>=k}),Bl=Pn(function(){return arguments}())?Pn:function(S){return Si(S)&&Nr.call(S,"callee")&&!Go.call(S,"callee")},Lr=rt.isArray,H0=$n?fo($n):xh;function _a(S){return S!=null&&hv(S.length)&&!ei(S)}function Di(S){return Si(S)&&_a(S)}function Vy(S){return S===!0||S===!1||Si(S)&&Ki(S)==ke}var Fl=Cs||Q0,Y0=Ra?fo(Ra):Sl;function fv(S){return Si(S)&&S.nodeType===1&&!Ul(S)}function X0(S){if(S==null)return!0;if(_a(S)&&(Lr(S)||typeof S=="string"||typeof S.splice=="function"||Fl(S)||Gf(S)||Bl(S)))return!S.length;var k=yo(S);if(k==Ye||k==Ie)return!S.size;if(Po(S))return!xf(S).length;for(var U in S)if(Nr.call(S,U))return!1;return!0}function kg(S,k){return Tl(S,k)}function qy(S,k,U){U=typeof U=="function"?U:t;var K=U?U(S,k):t;return K===t?Tl(S,k,t,U):!!K}function Pp(S){if(!Si(S))return!1;var k=Ki(S);return k==we||k==ve||typeof S.message=="string"&&typeof S.name=="string"&&!Ul(S)}function Wy(S){return typeof S=="number"&&ff(S)}function ei(S){if(!Nn(S))return!1;var k=Ki(S);return k==Oe||k==Be||k==Ce||k==$}function Hy(S){return typeof S=="number"&&S==E(S)}function hv(S){return typeof S=="number"&&S>-1&&S%1==0&&S<=ee}function Nn(S){var k=typeof S;return S!=null&&(k=="object"||k=="function")}function Si(S){return S!=null&&typeof S=="object"}var Ft=Ia?fo(Ia):go;function Xh(S,k){return S===k||Fi(S,k,kr(k))}function Ua(S,k,U){return U=typeof U=="function"?U:t,Fi(S,k,kr(k),U)}function dv(S){return Zo(S)&&S!=+S}function Yy(S){if(Ko(S))throw new br(a);return Cl(S)}function an(S){return S===null}function En(S){return S==null}function Zo(S){return typeof S=="number"||Si(S)&&Ki(S)==ht}function Ul(S){if(!Si(S)||Ki(S)!=ct)return!1;var k=dl(S);if(k===null)return!0;var U=Nr.call(k,"constructor")&&k.constructor;return typeof U=="function"&&U instanceof U&&Qa.call(U)==wd}var wa=aa?fo(aa):vg;function Xy(S){return Hy(S)&&S>=-ee&&S<=ee}var Dg=at?fo(at):cu;function Ap(S){return typeof S=="string"||!Lr(S)&&Si(S)&&Ki(S)==Le}function gs(S){return typeof S=="symbol"||Si(S)&&Ki(S)==ze}var Gf=gt?fo(gt):np;function Mg(S){return S===t}function Lg(S){return Si(S)&&yo(S)==Pt}function K0(S){return Si(S)&&Ki(S)==Lt}var $0=Qi(fu),g=Qi(function(S,k){return S<=k});function _(S){if(!S)return[];if(_a(S))return Ap(S)?io(S):Ui(S);if(Ts&&S[Ts])return xo(S[Ts]());var k=yo(S),U=k==Ye?no:k==Ie?fh:mn;return U(S)}function O(S){if(!S)return S===0?S:0;if(S=I(S),S===re||S===-re){var k=S<0?-1:1;return k*ue}return S===S?S:0}function E(S){var k=O(S),U=k%1;return k===k?U?k-U:k:0}function M(S){return S?ns(E(S),0,se):0}function I(S){if(typeof S=="number")return S;if(gs(S))return de;if(Nn(S)){var k=typeof S.valueOf=="function"?S.valueOf():S;S=Nn(k)?k+"":k}if(typeof S!="string")return S===0?S:+S;S=nf(S);var U=Ta.test(S);return U||Ou.test(S)?sh(S.slice(2),U?2:8):zn.test(S)?de:+S}function F(S){return ja(S,Pe(S))}function q(S){return S?ns(E(S),-ee,ee):S===0?S:0}function G(S){return S==null?"":va(S)}var Y=Is(function(S,k){if(Po(k)||_a(k)){ja(k,St(k),S);return}for(var U in k)Nr.call(k,U)&&As(S,U,k[U])}),X=Is(function(S,k){ja(k,Pe(k),S)}),J=Is(function(S,k,U,K){ja(k,Pe(k),S,K)}),ie=Is(function(S,k,U,K){ja(k,St(k),S,K)}),ce=pa(bf);function ge(S,k){var U=ju(S);return k==null?U:El(U,k)}var le=Or(function(S,k){S=pe(S);var U=-1,K=k.length,oe=K>2?k[2]:t;for(oe&&ao(k[0],k[1],oe)&&(K=1);++U<K;)for(var xe=k[U],Ue=Pe(xe),We=-1,et=Ue.length;++We<et;){var Et=Ue[We],Ot=S[Et];(Ot===t||ps(Ot,zo[Et])&&!Nr.call(S,Et))&&(S[Et]=xe[Et])}return S}),ye=Or(function(S){return S.push(t,Mn),yt(Ze,t,S)});function De(S,k){return fc(S,Tt(k,3),Ho)}function Ne(S,k){return fc(S,Tt(k,3),da)}function Fe(S,k){return S==null?S:Oc(S,Tt(k,3),Pe)}function je(S,k){return S==null?S:Sc(S,Tt(k,3),Pe)}function Xe(S,k){return S&&Ho(S,Tt(k,3))}function Ve(S,k){return S&&da(S,Tt(k,3))}function $e(S){return S==null?[]:Tc(S,St(S))}function Ke(S){return S==null?[]:Tc(S,Pe(S))}function qe(S,k,U){var K=S==null?t:as(S,k);return K===t?U:K}function tt(S,k){return S!=null&&dp(S,k,_r)}function mt(S,k){return S!=null&&dp(S,k,uu)}var It=Ml(function(S,k,U){k!=null&&typeof k.toString!="function"&&(k=sa.call(k)),S[k]=U},bi(ai)),bt=Ml(function(S,k,U){k!=null&&typeof k.toString!="function"&&(k=sa.call(k)),Nr.call(S,k)?S[k].push(U):S[k]=[U]},Tt),Nt=Or(Ol);function St(S){return _a(S)?bh(S):xf(S)}function Pe(S){return _a(S)?bh(S,!0):ip(S)}function Te(S,k){var U={};return k=Tt(k,3),Ho(S,function(K,oe,xe){rs(U,k(K,oe,xe),K)}),U}function Ae(S,k){var U={};return k=Tt(k,3),Ho(S,function(K,oe,xe){rs(U,oe,k(K,oe,xe))}),U}var nt=Is(function(S,k,U){ss(S,k,U)}),Ze=Is(function(S,k,U,K){ss(S,k,U,K)}),ft=pa(function(S,k){var U={};if(S==null)return U;var K=!1;k=Vn(k,function(xe){return xe=us(xe,S),K||(K=xe.length>1),xe}),ja(S,Co(S),U),K&&(U=qo(U,f|h|d,Lh));for(var oe=k.length;oe--;)du(U,k[oe]);return U});function kt(S,k){return zt(S,lv(Tt(k)))}var Ut=pa(function(S,k){return S==null?{}:Ad(S,k)});function zt(S,k){if(S==null)return{};var U=Vn(Co(S),function(K){return[K]});return k=Tt(k),Th(S,U,function(K,oe){return k(K,oe[0])})}function Sr(S,k,U){k=us(k,S);var K=-1,oe=k.length;for(oe||(oe=1,S=t);++K<oe;){var xe=S==null?t:S[hs(k[K])];xe===t&&(K=oe,xe=U),S=ei(xe)?xe.call(S):xe}return S}function Ir(S,k,U){return S==null?S:Rl(S,k,U)}function Wr(S,k,U,K){return K=typeof K=="function"?K:t,S==null?S:Rl(S,k,U,K)}var xn=Rc(St),jn=Rc(Pe);function yn(S,k,U){var K=Lr(S),oe=K||Fl(S)||Gf(S);if(k=Tt(k,4),U==null){var xe=S&&S.constructor;oe?U=K?new xe:[]:Nn(S)?U=ei(xe)?ju(dl(S)):{}:U={}}return(oe?ir:Ho)(S,function(Ue,We,et){return k(U,Ue,We,et)}),U}function Zr(S,k){return S==null?!0:du(S,k)}function Hr(S,k,U){return S==null?S:Ph(S,k,Zi(U))}function sn(S,k,U,K){return K=typeof K=="function"?K:t,S==null?S:Ph(S,k,Zi(U),K)}function mn(S){return S==null?[]:ku(S,St(S))}function ti(S){return S==null?[]:ku(S,Pe(S))}function rn(S,k,U){return U===t&&(U=k,k=t),U!==t&&(U=I(U),U=U===U?U:0),k!==t&&(k=I(k),k=k===k?k:0),ns(I(S),k,U)}function An(S,k,U){return k=O(k),U===t?(U=k,k=0):U=O(U),S=I(S),Ef(S,k,U)}function ri(S,k,U){if(U&&typeof U!="boolean"&&ao(S,k,U)&&(k=U=t),U===t&&(typeof k=="boolean"?(U=k,k=t):typeof S=="boolean"&&(U=S,S=t)),S===t&&k===t?(S=0,k=1):(S=O(S),k===t?(k=S,S=0):k=O(k)),S>k){var K=S;S=k,k=K}if(U||S%1||k%1){var oe=gh();return dn(S+oe*(k-S+Ka("1e-"+((oe+"").length-1))),k)}return Al(S,k)}var ni=Dl(function(S,k,U){return k=k.toLowerCase(),S+(U?fi(k):k)});function fi(S){return ql(G(S).toLowerCase())}function nn(S){return S=G(S),S&&S.replace(Hi,Eo).replace(Xa,"")}function mi(S,k,U){S=G(S),k=va(k);var K=S.length;U=U===t?K:ns(E(U),0,K);var oe=U;return U-=k.length,U>=0&&S.slice(U,oe)==k}function bn(S){return S=G(S),S&&nr.test(S)?S.replace(Rr,lh):S}function ko(S){return S=G(S),S&&Kn.test(S)?S.replace(hn,"\\$&"):S}var Qo=Dl(function(S,k,U){return S+(U?"-":"")+k.toLowerCase()}),Ku=Dl(function(S,k,U){return S+(U?" ":"")+k.toLowerCase()}),zl=Ac("toLowerCase");function $u(S,k,U){S=G(S),k=E(k);var K=k?rr(S):0;if(!k||K>=k)return S;var oe=(k-K)/2;return kf(pl(oe),U)+S+kf(Wn(oe),U)}function za(S,k,U){S=G(S),k=E(k);var K=k?rr(S):0;return k&&K<k?S+kf(k-K,U):S}function ii(S,k,U){S=G(S),k=E(k);var K=k?rr(S):0;return k&&K<k?kf(k-K,U)+S:S}function On(S,k,U){return U||k==null?k=0:k&&(k=+k),gl(G(S).replace(vn,""),k||0)}function Gi(S,k,U){return(U?ao(S,k,U):k===t)?k=1:k=E(k),kd(G(S),k)}function Jo(){var S=arguments,k=G(S[0]);return S.length<3?k:k.replace(S[1],S[2])}var Do=Dl(function(S,k,U){return S+(U?"_":"")+k.toLowerCase()});function Ns(S,k,U){return U&&typeof U!="number"&&ao(S,k,U)&&(k=U=t),U=U===t?se:U>>>0,U?(S=G(S),S&&(typeof k=="string"||k!=null&&!wa(k))&&(k=va(k),!k&&Du(S))?Rs(io(S),0,U):S.split(k,U)):[]}var hi=Dl(function(S,k,U){return S+(U?" ":"")+ql(k)});function Bc(S,k,U){return S=G(S),U=U==null?0:ns(E(U),0,S.length),k=va(k),S.slice(U,U+k.length)==k}function Vf(S,k,U){var K=_e.templateSettings;U&&ao(S,k,U)&&(k=t),S=G(S),k=J({},k,K,Yn);var oe=J({},k.imports,K.imports,Yn),xe=St(oe),Ue=ku(oe,xe),We,et,Et=0,Ot=k.interpolate||Wa,At="__p += '",Ht=Os((k.escape||Wa).source+"|"+Ot.source+"|"+(Ot===Vr?vi:Wa).source+"|"+(k.evaluate||Wa).source+"|$","g"),ur="//# sourceURL="+(Nr.call(k,"sourceURL")?(k.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++sl+"]")+`
`;S.replace(Ht,function(Pr,on,cn,_u,ys,wu){return cn||(cn=_u),At+=S.slice(Et,wu).replace(na,ch),on&&(We=!0,At+=`' +
__e(`+on+`) +
'`),ys&&(et=!0,At+=`';
`+ys+`;
__p += '`),cn&&(At+=`' +
((__t = (`+cn+`)) == null ? '' : __t) +
'`),Et=wu+Pr.length,Pr}),At+=`';
`;var Cr=Nr.call(k,"variable")&&k.variable;if(!Cr)At=`with (obj) {
`+At+`
}
`;else if(_o.test(Cr))throw new br(s);At=(et?At.replace(Xt,""):At).replace(pt,"$1").replace(Qt,"$1;"),At="function("+(Cr||"obj")+`) {
`+(Cr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(We?", __e = _.escape":"")+(et?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+At+`return __p
}`;var Xr=zc(function(){return Yr(xe,ur+"return "+At).apply(t,Ue)});if(Xr.source=At,Pp(Xr))throw Xr;return Xr}function Gl(S){return G(S).toLowerCase()}function vv(S){return G(S).toUpperCase()}function Fc(S,k,U){if(S=G(S),S&&(U||k===t))return nf(S);if(!S||!(k=va(k)))return S;var K=io(S),oe=io(k),xe=of(K,oe),Ue=Yv(K,oe)+1;return Rs(K,xe,Ue).join("")}function Vl(S,k,U){if(S=G(S),S&&(U||k===t))return S.slice(0,Zn(S)+1);if(!S||!(k=va(k)))return S;var K=io(S),oe=Yv(K,io(k))+1;return Rs(K,0,oe).join("")}function Uc(S,k,U){if(S=G(S),S&&(U||k===t))return S.replace(vn,"");if(!S||!(k=va(k)))return S;var K=io(S),oe=of(K,io(k));return Rs(K,oe).join("")}function js(S,k){var U=N,K=j;if(Nn(k)){var oe="separator"in k?k.separator:oe;U="length"in k?E(k.length):U,K="omission"in k?va(k.omission):K}S=G(S);var xe=S.length;if(Du(S)){var Ue=io(S);xe=Ue.length}if(U>=xe)return S;var We=U-rr(K);if(We<1)return K;var et=Ue?Rs(Ue,0,We).join(""):S.slice(0,We);if(oe===t)return et+K;if(Ue&&(We+=et.length-We),wa(oe)){if(S.slice(We).search(oe)){var Et,Ot=et;for(oe.global||(oe=Os(oe.source,G(un.exec(oe))+"g")),oe.lastIndex=0;Et=oe.exec(Ot);)var At=Et.index;et=et.slice(0,At===t?We:At)}}else if(S.indexOf(va(oe),We)!=We){var Ht=et.lastIndexOf(oe);Ht>-1&&(et=et.slice(0,Ht))}return et+K}function Bs(S){return S=G(S),S&&ar.test(S)?S.replace(mr,ll):S}var qf=Dl(function(S,k,U){return S+(U?" ":"")+k.toUpperCase()}),ql=Ac("toUpperCase");function Wf(S,k,U){return S=G(S),k=U?t:k,k===t?_d(S)?sf(S):en(S):S.match(k)||[]}var zc=Or(function(S,k){try{return yt(S,t,k)}catch(U){return Pp(U)?U:new br(U)}}),Kh=pa(function(S,k){return ir(k,function(U){U=hs(U),rs(S,U,Xu(S[U],S))}),S});function Hf(S){var k=S==null?0:S.length,U=Tt();return S=k?Vn(S,function(K){if(typeof K[1]!="function")throw new Qn(o);return[U(K[0]),K[1]]}):[],Or(function(K){for(var oe=-1;++oe<k;){var xe=S[oe];if(yt(xe[0],this,K))return yt(xe[1],this,K)}})}function oi(S){return _h(qo(S,f))}function bi(S){return function(){return S}}function $h(S,k){return S==null||S!==S?k:S}var Wl=oo(),Vi=oo(!0);function ai(S){return S}function mu(S){return Na(typeof S=="function"?S:qo(S,f))}function Zu(S){return Pl(qo(S,f))}function Hl(S,k){return Sh(S,qo(k,f))}var Zh=Or(function(S,k){return function(U){return Ol(U,S,k)}}),Yl=Or(function(S,k){return function(U){return Ol(S,U,k)}});function Gc(S,k,U){var K=St(k),oe=Tc(k,K);U==null&&!(Nn(k)&&(oe.length||!K.length))&&(U=k,k=S,S=this,oe=Tc(k,St(k)));var xe=!(Nn(U)&&"chain"in U)||!!U.chain,Ue=ei(S);return ir(oe,function(We){var et=k[We];S[We]=et,Ue&&(S.prototype[We]=function(){var Et=this.__chain__;if(xe||Et){var Ot=S(this.__wrapped__),At=Ot.__actions__=Ui(this.__actions__);return At.push({func:et,args:arguments,thisArg:S}),Ot.__chain__=Et,Ot}return et.apply(S,gi([this.value()],arguments))})}),S}function bu(){return Gn._===this&&(Gn._=Ed),this}function Ng(){}function J2(S){return S=E(S),Or(function(k){return Of(k,S)})}var eC=Tr(Vn),tC=Tr(Ri),rC=Tr(Pu);function M1(S){return qd(S)?xs(hs(S)):xi(S)}function nC(S){return function(k){return S==null?t:as(S,k)}}var iC=Hn(),oC=Hn(!0);function Z0(){return[]}function Q0(){return!1}function aC(){return{}}function sC(){return""}function uC(){return!0}function lC(S,k){if(S=E(S),S<1||S>ee)return[];var U=se,K=dn(S,se);k=Tt(k),S-=se;for(var oe=rf(K,k);++U<S;)k(U);return oe}function cC(S){return Lr(S)?Vn(S,hs):gs(S)?[S]:Ui(jl(G(S)))}function fC(S){var k=++Zv;return G(S)+k}var hC=Yo(function(S,k){return S+k},0),dC=Ll("ceil"),vC=Yo(function(S,k){return S/k},1),pC=Ll("floor");function gC(S){return S&&S.length?wf(S,ai,Uu):t}function yC(S,k){return S&&S.length?wf(S,Tt(k,2),Uu):t}function mC(S){return tf(S,ai)}function bC(S,k){return tf(S,Tt(k,2))}function _C(S){return S&&S.length?wf(S,ai,fu):t}function wC(S,k){return S&&S.length?wf(S,Tt(k,2),fu):t}var EC=Yo(function(S,k){return S*k},1),xC=Ll("round"),OC=Yo(function(S,k){return S-k},0);function SC(S){return S&&S.length?Iu(S,ai):0}function TC(S,k){return S&&S.length?Iu(S,Tt(k,2)):0}return _e.after=Eg,_e.ary=xg,_e.assign=Y,_e.assignIn=X,_e.assignInWith=J,_e.assignWith=ie,_e.at=ce,_e.before=Tp,_e.bind=Xu,_e.bindAll=Kh,_e.bindKey=Yh,_e.castArray=Io,_e.chain=ba,_e.chunk=$o,_e.compact=so,_e.concat=yp,_e.cond=Hf,_e.conforms=oi,_e.constant=bi,_e.countBy=P0,_e.create=ge,_e.curry=Og,_e.curryRight=Sg,_e.debounce=Uy,_e.defaults=le,_e.defaultsDeep=ye,_e.defer=B0,_e.delay=Cp,_e.difference=Yu,_e.differenceBy=Kd,_e.differenceWith=qh,_e.drop=Nf,_e.dropRight=mp,_e.dropRightWhile=gg,_e.dropWhile=$d,_e.fill=Fa,_e.filter=Ep,_e.flatMap=R0,_e.flatMapDeep=bg,_e.flatMapDepth=ky,_e.flatten=Wh,_e.flattenDeep=Qd,_e.flattenDepth=jf,_e.flip=sv,_e.flow=Wl,_e.flowRight=Vi,_e.fromPairs=Jd,_e.functions=$e,_e.functionsIn=Ke,_e.groupBy=Op,_e.initial=Jn,_e.intersection=bp,_e.intersectionBy=tv,_e.intersectionWith=A,_e.invert=It,_e.invertBy=bt,_e.invokeMap=I0,_e.iteratee=mu,_e.keyBy=k0,_e.keys=St,_e.keysIn=Pe,_e.map=Sp,_e.mapKeys=Te,_e.mapValues=Ae,_e.matches=Zu,_e.matchesProperty=Hl,_e.memoize=uv,_e.merge=nt,_e.mergeWith=Ze,_e.method=Zh,_e.methodOf=Yl,_e.mixin=Gc,_e.negate=lv,_e.nthArg=J2,_e.omit=ft,_e.omitBy=kt,_e.once=zy,_e.orderBy=Ny,_e.over=eC,_e.overArgs=Tg,_e.overEvery=tC,_e.overSome=rC,_e.partial=cv,_e.partialRight=Cg,_e.partition=D0,_e.pick=Ut,_e.pickBy=zt,_e.property=M1,_e.propertyOf=nC,_e.pull=Se,_e.pullAll=Ge,_e.pullAllBy=He,_e.pullAllWith=ot,_e.pullAt=wt,_e.range=iC,_e.rangeRight=oC,_e.rearg=F0,_e.reject=N0,_e.remove=_t,_e.rest=U0,_e.reverse=Rt,_e.sampleSize=jy,_e.set=Ir,_e.setWith=Wr,_e.shuffle=By,_e.slice=$t,_e.sortBy=wg,_e.sortedUniq=Er,_e.sortedUniqBy=wr,_e.split=Ns,_e.spread=Pg,_e.tail=tn,_e.take=sr,_e.takeRight=dr,_e.takeRightWhile=Oi,_e.takeWhile=Xn,_e.tap=C0,_e.throttle=z0,_e.thru=Mr,_e.toArray=_,_e.toPairs=xn,_e.toPairsIn=jn,_e.toPath=cC,_e.toPlainObject=F,_e.transform=yn,_e.unary=G0,_e.union=Ro,_e.unionBy=Ln,_e.unionWith=mo,_e.uniq=ks,_e.uniqBy=Ds,_e.uniqWith=ds,_e.unset=Zr,_e.unzip=vs,_e.unzipWith=Ms,_e.update=Hr,_e.updateWith=sn,_e.values=mn,_e.valuesIn=ti,_e.without=rv,_e.words=Wf,_e.wrap=V0,_e.xor=Bf,_e.xorBy=nv,_e.xorWith=Ls,_e.zip=Nc,_e.zipObject=iv,_e.zipObjectDeep=Ff,_e.zipWith=Uf,_e.entries=xn,_e.entriesIn=jn,_e.extend=X,_e.extendWith=J,Gc(_e,_e),_e.add=hC,_e.attempt=zc,_e.camelCase=ni,_e.capitalize=fi,_e.ceil=dC,_e.clamp=rn,_e.clone=Ag,_e.cloneDeep=Gy,_e.cloneDeepWith=Rg,_e.cloneWith=q0,_e.conformsTo=Ig,_e.deburr=nn,_e.defaultTo=$h,_e.divide=vC,_e.endsWith=mi,_e.eq=ps,_e.escape=bn,_e.escapeRegExp=ko,_e.every=av,_e.find=A0,_e.findIndex=Zd,_e.findKey=De,_e.findLast=xp,_e.findLastIndex=Ao,_e.findLastKey=Ne,_e.floor=pC,_e.forEach=Dy,_e.forEachRight=My,_e.forIn=Fe,_e.forInRight=je,_e.forOwn=Xe,_e.forOwnRight=Ve,_e.get=qe,_e.gt=W0,_e.gte=zf,_e.has=tt,_e.hasIn=mt,_e.head=ev,_e.identity=ai,_e.includes=Ly,_e.indexOf=yg,_e.inRange=An,_e.invoke=Nt,_e.isArguments=Bl,_e.isArray=Lr,_e.isArrayBuffer=H0,_e.isArrayLike=_a,_e.isArrayLikeObject=Di,_e.isBoolean=Vy,_e.isBuffer=Fl,_e.isDate=Y0,_e.isElement=fv,_e.isEmpty=X0,_e.isEqual=kg,_e.isEqualWith=qy,_e.isError=Pp,_e.isFinite=Wy,_e.isFunction=ei,_e.isInteger=Hy,_e.isLength=hv,_e.isMap=Ft,_e.isMatch=Xh,_e.isMatchWith=Ua,_e.isNaN=dv,_e.isNative=Yy,_e.isNil=En,_e.isNull=an,_e.isNumber=Zo,_e.isObject=Nn,_e.isObjectLike=Si,_e.isPlainObject=Ul,_e.isRegExp=wa,_e.isSafeInteger=Xy,_e.isSet=Dg,_e.isString=Ap,_e.isSymbol=gs,_e.isTypedArray=Gf,_e.isUndefined=Mg,_e.isWeakMap=Lg,_e.isWeakSet=K0,_e.join=L,_e.kebabCase=Qo,_e.last=V,_e.lastIndexOf=te,_e.lowerCase=Ku,_e.lowerFirst=zl,_e.lt=$0,_e.lte=g,_e.max=gC,_e.maxBy=yC,_e.mean=mC,_e.meanBy=bC,_e.min=_C,_e.minBy=wC,_e.stubArray=Z0,_e.stubFalse=Q0,_e.stubObject=aC,_e.stubString=sC,_e.stubTrue=uC,_e.multiply=EC,_e.nth=ae,_e.noConflict=bu,_e.noop=Ng,_e.now=jc,_e.pad=$u,_e.padEnd=za,_e.padStart=ii,_e.parseInt=On,_e.random=ri,_e.reduce=M0,_e.reduceRight=L0,_e.repeat=Gi,_e.replace=Jo,_e.result=Sr,_e.round=xC,_e.runInContext=Qe,_e.sample=j0,_e.size=Fy,_e.snakeCase=Do,_e.some=_g,_e.sortedIndex=Zt,_e.sortedIndexBy=cr,_e.sortedIndexOf=xt,_e.sortedLastIndex=Dt,_e.sortedLastIndexBy=vr,_e.sortedLastIndexOf=jt,_e.startCase=hi,_e.startsWith=Bc,_e.subtract=OC,_e.sum=SC,_e.sumBy=TC,_e.template=Vf,_e.times=lC,_e.toFinite=O,_e.toInteger=E,_e.toLength=M,_e.toLower=Gl,_e.toNumber=I,_e.toSafeInteger=q,_e.toString=G,_e.toUpper=vv,_e.trim=Fc,_e.trimEnd=Vl,_e.trimStart=Uc,_e.truncate=js,_e.unescape=Bs,_e.uniqueId=fC,_e.upperCase=qf,_e.upperFirst=ql,_e.each=Dy,_e.eachRight=My,_e.first=ev,Gc(_e,function(){var S={};return Ho(_e,function(k,U){Nr.call(_e.prototype,U)||(S[U]=k)}),S}(),{chain:!1}),_e.VERSION=n,ir(["bind","bindKey","curry","curryRight","partial","partialRight"],function(S){_e[S].placeholder=_e}),ir(["drop","take"],function(S,k){jr.prototype[S]=function(U){U=U===t?1:Ii(E(U),0);var K=this.__filtered__&&!k?new jr(this):this.clone();return K.__filtered__?K.__takeCount__=dn(U,K.__takeCount__):K.__views__.push({size:dn(U,se),type:S+(K.__dir__<0?"Right":"")}),K},jr.prototype[S+"Right"]=function(U){return this.reverse()[S](U).reverse()}}),ir(["filter","map","takeWhile"],function(S,k){var U=k+1,K=U==W||U==Q;jr.prototype[S]=function(oe){var xe=this.clone();return xe.__iteratees__.push({iteratee:Tt(oe,3),type:U}),xe.__filtered__=xe.__filtered__||K,xe}}),ir(["head","last"],function(S,k){var U="take"+(k?"Right":"");jr.prototype[S]=function(){return this[U](1).value()[0]}}),ir(["initial","tail"],function(S,k){var U="drop"+(k?"":"Right");jr.prototype[S]=function(){return this.__filtered__?new jr(this):this[U](1)}}),jr.prototype.compact=function(){return this.filter(ai)},jr.prototype.find=function(S){return this.filter(S).head()},jr.prototype.findLast=function(S){return this.reverse().find(S)},jr.prototype.invokeMap=Or(function(S,k){return typeof S=="function"?new jr(this):this.map(function(U){return Ol(U,S,k)})}),jr.prototype.reject=function(S){return this.filter(lv(Tt(S)))},jr.prototype.slice=function(S,k){S=E(S);var U=this;return U.__filtered__&&(S>0||k<0)?new jr(U):(S<0?U=U.takeRight(-S):S&&(U=U.drop(S)),k!==t&&(k=E(k),U=k<0?U.dropRight(-k):U.take(k-S)),U)},jr.prototype.takeRightWhile=function(S){return this.reverse().takeWhile(S).reverse()},jr.prototype.toArray=function(){return this.take(se)},Ho(jr.prototype,function(S,k){var U=/^(?:filter|find|map|reject)|While$/.test(k),K=/^(?:head|last)$/.test(k),oe=_e[K?"take"+(k=="last"?"Right":""):k],xe=K||/^find/.test(k);oe&&(_e.prototype[k]=function(){var Ue=this.__wrapped__,We=K?[1]:arguments,et=Ue instanceof jr,Et=We[0],Ot=et||Lr(Ue),At=function(on){var cn=oe.apply(_e,gi([on],We));return K&&Ht?cn[0]:cn};Ot&&U&&typeof Et=="function"&&Et.length!=1&&(et=Ot=!1);var Ht=this.__chain__,ur=!!this.__actions__.length,Cr=xe&&!Ht,Xr=et&&!ur;if(!xe&&Ot){Ue=Xr?Ue:new jr(this);var Pr=S.apply(Ue,We);return Pr.__actions__.push({func:Mr,args:[At],thisArg:t}),new gr(Pr,Ht)}return Cr&&Xr?S.apply(this,We):(Pr=this.thru(At),Cr?K?Pr.value()[0]:Pr.value():Pr)})}),ir(["pop","push","shift","sort","splice","unshift"],function(S){var k=Fr[S],U=/^(?:push|sort|unshift)$/.test(S)?"tap":"thru",K=/^(?:pop|shift)$/.test(S);_e.prototype[S]=function(){var oe=arguments;if(K&&!this.__chain__){var xe=this.value();return k.apply(Lr(xe)?xe:[],oe)}return this[U](function(Ue){return k.apply(Lr(Ue)?Ue:[],oe)})}}),Ho(jr.prototype,function(S,k){var U=_e[k];if(U){var K=U.name+"";Nr.call(Ps,K)||(Ps[K]=[]),Ps[K].push({name:k,func:U})}}),Ps[If(t,b).name]=[{name:"wrapper",func:t}],jr.prototype.clone=df,jr.prototype.reverse=ml,jr.prototype.value=vf,_e.prototype.at=Ay,_e.prototype.chain=_p,_e.prototype.commit=mg,_e.prototype.next=Hh,_e.prototype.plant=Iy,_e.prototype.reverse=wp,_e.prototype.toJSON=_e.prototype.valueOf=_e.prototype.value=ov,_e.prototype.first=_e.prototype.head,Ts&&(_e.prototype[Ts]=Ry),_e},fl=cl();to?((to.exports=fl)._=fl,uc._=fl):Gn._=fl}).call(RM)}(Zg,Zg.exports)),Zg.exports}var A_,hO;function IM(){if(hO)return A_;hO=1,A_=r;function r(){var n={};n._next=n._prev=n,this._sentinel=n}r.prototype.dequeue=function(){var n=this._sentinel,i=n._prev;if(i!==n)return e(i),i},r.prototype.enqueue=function(n){var i=this._sentinel;n._prev&&n._next&&e(n),n._next=i._next,i._next._prev=n,i._next=n,n._prev=i},r.prototype.toString=function(){for(var n=[],i=this._sentinel,a=i._prev;a!==i;)n.push(JSON.stringify(a,t)),a=a._prev;return"["+n.join(", ")+"]"};function e(n){n._prev._next=n._next,n._next._prev=n._prev,delete n._next,delete n._prev}function t(n,i){if(n!=="_next"&&n!=="_prev")return i}return A_}var R_,dO;function kM(){if(dO)return R_;dO=1;var r=Ci(),e=tl().Graph,t=IM();R_=i;var n=r.constant(1);function i(l,c){if(l.nodeCount()<=1)return[];var f=s(l,c||n),h=a(f.graph,f.buckets,f.zeroIdx);return r.flatten(r.map(h,function(d){return l.outEdges(d.v,d.w)}),!0)}function a(l,c,f){for(var h=[],d=c[c.length-1],v=c[0],y;l.nodeCount();){for(;y=v.dequeue();)o(l,c,f,y);for(;y=d.dequeue();)o(l,c,f,y);if(l.nodeCount()){for(var w=c.length-2;w>0;--w)if(y=c[w].dequeue(),y){h=h.concat(o(l,c,f,y,!0));break}}}return h}function o(l,c,f,h,d){var v=d?[]:void 0;return r.forEach(l.inEdges(h.v),function(y){var w=l.edge(y),b=l.node(y.v);d&&v.push({v:y.v,w:y.w}),b.out-=w,u(c,f,b)}),r.forEach(l.outEdges(h.v),function(y){var w=l.edge(y),b=y.w,p=l.node(b);p.in-=w,u(c,f,p)}),l.removeNode(h.v),v}function s(l,c){var f=new e,h=0,d=0;r.forEach(l.nodes(),function(w){f.setNode(w,{v:w,in:0,out:0})}),r.forEach(l.edges(),function(w){var b=f.edge(w.v,w.w)||0,p=c(w),m=b+p;f.setEdge(w.v,w.w,m),d=Math.max(d,f.node(w.v).out+=p),h=Math.max(h,f.node(w.w).in+=p)});var v=r.range(d+h+3).map(function(){return new t}),y=h+1;return r.forEach(f.nodes(),function(w){u(v,y,f.node(w))}),{graph:f,buckets:v,zeroIdx:y}}function u(l,c,f){f.out?f.in?l[f.out-f.in+c].enqueue(f):l[l.length-1].enqueue(f):l[0].enqueue(f)}return R_}var I_,vO;function DM(){if(vO)return I_;vO=1;var r=Ci(),e=kM();I_={run:t,undo:i};function t(a){var o=a.graph().acyclicer==="greedy"?e(a,s(a)):n(a);r.forEach(o,function(u){var l=a.edge(u);a.removeEdge(u),l.forwardName=u.name,l.reversed=!0,a.setEdge(u.w,u.v,l,r.uniqueId("rev"))});function s(u){return function(l){return u.edge(l).weight}}}function n(a){var o=[],s={},u={};function l(c){r.has(u,c)||(u[c]=!0,s[c]=!0,r.forEach(a.outEdges(c),function(f){r.has(s,f.w)?o.push(f):l(f.w)}),delete s[c])}return r.forEach(a.nodes(),l),o}function i(a){r.forEach(a.edges(),function(o){var s=a.edge(o);if(s.reversed){a.removeEdge(o);var u=s.forwardName;delete s.reversed,delete s.forwardName,a.setEdge(o.w,o.v,s,u)}})}return I_}var k_,pO;function Vs(){if(pO)return k_;pO=1;var r=Ci(),e=tl().Graph;k_={addDummyNode:t,simplify:n,asNonCompoundGraph:i,successorWeights:a,predecessorWeights:o,intersectRect:s,buildLayerMatrix:u,normalizeRanks:l,removeEmptyRanks:c,addBorderNode:f,maxRank:h,partition:d,time:v,notime:y};function t(w,b,p,m){var x;do x=r.uniqueId(m);while(w.hasNode(x));return p.dummy=b,w.setNode(x,p),x}function n(w){var b=new e().setGraph(w.graph());return r.forEach(w.nodes(),function(p){b.setNode(p,w.node(p))}),r.forEach(w.edges(),function(p){var m=b.edge(p.v,p.w)||{weight:0,minlen:1},x=w.edge(p);b.setEdge(p.v,p.w,{weight:m.weight+x.weight,minlen:Math.max(m.minlen,x.minlen)})}),b}function i(w){var b=new e({multigraph:w.isMultigraph()}).setGraph(w.graph());return r.forEach(w.nodes(),function(p){w.children(p).length||b.setNode(p,w.node(p))}),r.forEach(w.edges(),function(p){b.setEdge(p,w.edge(p))}),b}function a(w){var b=r.map(w.nodes(),function(p){var m={};return r.forEach(w.outEdges(p),function(x){m[x.w]=(m[x.w]||0)+w.edge(x).weight}),m});return r.zipObject(w.nodes(),b)}function o(w){var b=r.map(w.nodes(),function(p){var m={};return r.forEach(w.inEdges(p),function(x){m[x.v]=(m[x.v]||0)+w.edge(x).weight}),m});return r.zipObject(w.nodes(),b)}function s(w,b){var p=w.x,m=w.y,x=b.x-p,T=b.y-m,P=w.width/2,C=w.height/2;if(!x&&!T)throw new Error("Not possible to find intersection inside of the rectangle");var R,D;return Math.abs(T)*P>Math.abs(x)*C?(T<0&&(C=-C),R=C*x/T,D=C):(x<0&&(P=-P),R=P,D=P*T/x),{x:p+R,y:m+D}}function u(w){var b=r.map(r.range(h(w)+1),function(){return[]});return r.forEach(w.nodes(),function(p){var m=w.node(p),x=m.rank;r.isUndefined(x)||(b[x][m.order]=p)}),b}function l(w){var b=r.min(r.map(w.nodes(),function(p){return w.node(p).rank}));r.forEach(w.nodes(),function(p){var m=w.node(p);r.has(m,"rank")&&(m.rank-=b)})}function c(w){var b=r.min(r.map(w.nodes(),function(T){return w.node(T).rank})),p=[];r.forEach(w.nodes(),function(T){var P=w.node(T).rank-b;p[P]||(p[P]=[]),p[P].push(T)});var m=0,x=w.graph().nodeRankFactor;r.forEach(p,function(T,P){r.isUndefined(T)&&P%x!==0?--m:m&&r.forEach(T,function(C){w.node(C).rank+=m})})}function f(w,b,p,m){var x={width:0,height:0};return arguments.length>=4&&(x.rank=p,x.order=m),t(w,"border",x,b)}function h(w){return r.max(r.map(w.nodes(),function(b){var p=w.node(b).rank;if(!r.isUndefined(p))return p}))}function d(w,b){var p={lhs:[],rhs:[]};return r.forEach(w,function(m){b(m)?p.lhs.push(m):p.rhs.push(m)}),p}function v(w,b){var p=r.now();try{return b()}finally{w+""+(r.now()-p)}}function y(w,b){return b()}return k_}var D_,gO;function MM(){if(gO)return D_;gO=1;var r=Ci(),e=Vs();D_={run:t,undo:i};function t(a){a.graph().dummyChains=[],r.forEach(a.edges(),function(o){n(a,o)})}function n(a,o){var s=o.v,u=a.node(s).rank,l=o.w,c=a.node(l).rank,f=o.name,h=a.edge(o),d=h.labelRank;if(c!==u+1){a.removeEdge(o);var v,y,w;for(w=0,++u;u<c;++w,++u)h.points=[],y={width:0,height:0,edgeLabel:h,edgeObj:o,rank:u},v=e.addDummyNode(a,"edge",y,"_d"),u===d&&(y.width=h.width,y.height=h.height,y.dummy="edge-label",y.labelpos=h.labelpos),a.setEdge(s,v,{weight:h.weight},f),w===0&&a.graph().dummyChains.push(v),s=v;a.setEdge(s,l,{weight:h.weight},f)}}function i(a){r.forEach(a.graph().dummyChains,function(o){var s=a.node(o),u=s.edgeLabel,l;for(a.setEdge(s.edgeObj,u);s.dummy;)l=a.successors(o)[0],a.removeNode(o),u.points.push({x:s.x,y:s.y}),s.dummy==="edge-label"&&(u.x=s.x,u.y=s.y,u.width=s.width,u.height=s.height),o=l,s=a.node(o)})}return D_}var M_,yO;function Qm(){if(yO)return M_;yO=1;var r=Ci();M_={longestPath:e,slack:t};function e(n){var i={};function a(o){var s=n.node(o);if(r.has(i,o))return s.rank;i[o]=!0;var u=r.min(r.map(n.outEdges(o),function(l){return a(l.w)-n.edge(l).minlen}));return(u===Number.POSITIVE_INFINITY||u===void 0||u===null)&&(u=0),s.rank=u}r.forEach(n.sources(),a)}function t(n,i){return n.node(i.w).rank-n.node(i.v).rank-n.edge(i).minlen}return M_}var L_,mO;function y2(){if(mO)return L_;mO=1;var r=Ci(),e=tl().Graph,t=Qm().slack;L_=n;function n(s){var u=new e({directed:!1}),l=s.nodes()[0],c=s.nodeCount();u.setNode(l,{});for(var f,h;i(u,s)<c;)f=a(u,s),h=u.hasNode(f.v)?t(s,f):-t(s,f),o(u,s,h);return u}function i(s,u){function l(c){r.forEach(u.nodeEdges(c),function(f){var h=f.v,d=c===h?f.w:h;!s.hasNode(d)&&!t(u,f)&&(s.setNode(d,{}),s.setEdge(c,d,{}),l(d))})}return r.forEach(s.nodes(),l),s.nodeCount()}function a(s,u){return r.minBy(u.edges(),function(l){if(s.hasNode(l.v)!==s.hasNode(l.w))return t(u,l)})}function o(s,u,l){r.forEach(s.nodes(),function(c){u.node(c).rank+=l})}return L_}var N_,bO;function LM(){if(bO)return N_;bO=1;var r=Ci(),e=y2(),t=Qm().slack,n=Qm().longestPath,i=tl().alg.preorder,a=tl().alg.postorder,o=Vs().simplify;N_=s,s.initLowLimValues=f,s.initCutValues=u,s.calcCutValue=c,s.leaveEdge=d,s.enterEdge=v,s.exchangeEdges=y;function s(m){m=o(m),n(m);var x=e(m);f(x),u(x,m);for(var T,P;T=d(x);)P=v(x,m,T),y(x,m,T,P)}function u(m,x){var T=a(m,m.nodes());T=T.slice(0,T.length-1),r.forEach(T,function(P){l(m,x,P)})}function l(m,x,T){var P=m.node(T),C=P.parent;m.edge(T,C).cutvalue=c(m,x,T)}function c(m,x,T){var P=m.node(T),C=P.parent,R=!0,D=x.edge(T,C),N=0;return D||(R=!1,D=x.edge(C,T)),N=D.weight,r.forEach(x.nodeEdges(T),function(j){var B=j.v===T,z=B?j.w:j.v;if(z!==C){var W=B===R,Z=x.edge(j).weight;if(N+=W?Z:-Z,b(m,T,z)){var Q=m.edge(T,z).cutvalue;N+=W?-Q:Q}}}),N}function f(m,x){arguments.length<2&&(x=m.nodes()[0]),h(m,{},1,x)}function h(m,x,T,P,C){var R=T,D=m.node(P);return x[P]=!0,r.forEach(m.neighbors(P),function(N){r.has(x,N)||(T=h(m,x,T,N,P))}),D.low=R,D.lim=T++,C?D.parent=C:delete D.parent,T}function d(m){return r.find(m.edges(),function(x){return m.edge(x).cutvalue<0})}function v(m,x,T){var P=T.v,C=T.w;x.hasEdge(P,C)||(P=T.w,C=T.v);var R=m.node(P),D=m.node(C),N=R,j=!1;R.lim>D.lim&&(N=D,j=!0);var B=r.filter(x.edges(),function(z){return j===p(m,m.node(z.v),N)&&j!==p(m,m.node(z.w),N)});return r.minBy(B,function(z){return t(x,z)})}function y(m,x,T,P){var C=T.v,R=T.w;m.removeEdge(C,R),m.setEdge(P.v,P.w,{}),f(m),u(m,x),w(m,x)}function w(m,x){var T=r.find(m.nodes(),function(C){return!x.node(C).parent}),P=i(m,T);P=P.slice(1),r.forEach(P,function(C){var R=m.node(C).parent,D=x.edge(C,R),N=!1;D||(D=x.edge(R,C),N=!0),x.node(C).rank=x.node(R).rank+(N?D.minlen:-D.minlen)})}function b(m,x,T){return m.hasEdge(x,T)}function p(m,x,T){return T.low<=x.lim&&x.lim<=T.lim}return N_}var j_,_O;function NM(){if(_O)return j_;_O=1;var r=Qm(),e=r.longestPath,t=y2(),n=LM();j_=i;function i(u){switch(u.graph().ranker){case"network-simplex":s(u);break;case"tight-tree":o(u);break;case"longest-path":a(u);break;default:s(u)}}var a=e;function o(u){e(u),t(u)}function s(u){n(u)}return j_}var B_,wO;function jM(){if(wO)return B_;wO=1;var r=Ci();B_=e;function e(i){var a=n(i);r.forEach(i.graph().dummyChains,function(o){for(var s=i.node(o),u=s.edgeObj,l=t(i,a,u.v,u.w),c=l.path,f=l.lca,h=0,d=c[h],v=!0;o!==u.w;){if(s=i.node(o),v){for(;(d=c[h])!==f&&i.node(d).maxRank<s.rank;)h++;d===f&&(v=!1)}if(!v){for(;h<c.length-1&&i.node(d=c[h+1]).minRank<=s.rank;)h++;d=c[h]}i.setParent(o,d),o=i.successors(o)[0]}})}function t(i,a,o,s){var u=[],l=[],c=Math.min(a[o].low,a[s].low),f=Math.max(a[o].lim,a[s].lim),h,d;h=o;do h=i.parent(h),u.push(h);while(h&&(a[h].low>c||f>a[h].lim));for(d=h,h=s;(h=i.parent(h))!==d;)l.push(h);return{path:u.concat(l.reverse()),lca:d}}function n(i){var a={},o=0;function s(u){var l=o;r.forEach(i.children(u),s),a[u]={low:l,lim:o++}}return r.forEach(i.children(),s),a}return B_}var F_,EO;function BM(){if(EO)return F_;EO=1;var r=Ci(),e=Vs();F_={run:t,cleanup:o};function t(s){var u=e.addDummyNode(s,"root",{},"_root"),l=i(s),c=r.max(r.values(l))-1,f=2*c+1;s.graph().nestingRoot=u,r.forEach(s.edges(),function(d){s.edge(d).minlen*=f});var h=a(s)+1;r.forEach(s.children(),function(d){n(s,u,f,h,c,l,d)}),s.graph().nodeRankFactor=f}function n(s,u,l,c,f,h,d){var v=s.children(d);if(!v.length){d!==u&&s.setEdge(u,d,{weight:0,minlen:l});return}var y=e.addBorderNode(s,"_bt"),w=e.addBorderNode(s,"_bb"),b=s.node(d);s.setParent(y,d),b.borderTop=y,s.setParent(w,d),b.borderBottom=w,r.forEach(v,function(p){n(s,u,l,c,f,h,p);var m=s.node(p),x=m.borderTop?m.borderTop:p,T=m.borderBottom?m.borderBottom:p,P=m.borderTop?c:2*c,C=x!==T?1:f-h[d]+1;s.setEdge(y,x,{weight:P,minlen:C,nestingEdge:!0}),s.setEdge(T,w,{weight:P,minlen:C,nestingEdge:!0})}),s.parent(d)||s.setEdge(u,y,{weight:0,minlen:f+h[d]})}function i(s){var u={};function l(c,f){var h=s.children(c);h&&h.length&&r.forEach(h,function(d){l(d,f+1)}),u[c]=f}return r.forEach(s.children(),function(c){l(c,1)}),u}function a(s){return r.reduce(s.edges(),function(u,l){return u+s.edge(l).weight},0)}function o(s){var u=s.graph();s.removeNode(u.nestingRoot),delete u.nestingRoot,r.forEach(s.edges(),function(l){var c=s.edge(l);c.nestingEdge&&s.removeEdge(l)})}return F_}var U_,xO;function FM(){if(xO)return U_;xO=1;var r=Ci(),e=Vs();U_=t;function t(i){function a(o){var s=i.children(o),u=i.node(o);if(s.length&&r.forEach(s,a),r.has(u,"minRank")){u.borderLeft=[],u.borderRight=[];for(var l=u.minRank,c=u.maxRank+1;l<c;++l)n(i,"borderLeft","_bl",o,u,l),n(i,"borderRight","_br",o,u,l)}}r.forEach(i.children(),a)}function n(i,a,o,s,u,l){var c={width:0,height:0,rank:l,borderType:a},f=u[a][l-1],h=e.addDummyNode(i,"border",c,o);u[a][l]=h,i.setParent(h,s),f&&i.setEdge(f,h,{weight:1})}return U_}var z_,OO;function UM(){if(OO)return z_;OO=1;var r=Ci();z_={adjust:e,undo:t};function e(l){var c=l.graph().rankdir.toLowerCase();(c==="lr"||c==="rl")&&n(l)}function t(l){var c=l.graph().rankdir.toLowerCase();(c==="bt"||c==="rl")&&a(l),(c==="lr"||c==="rl")&&(s(l),n(l))}function n(l){r.forEach(l.nodes(),function(c){i(l.node(c))}),r.forEach(l.edges(),function(c){i(l.edge(c))})}function i(l){var c=l.width;l.width=l.height,l.height=c}function a(l){r.forEach(l.nodes(),function(c){o(l.node(c))}),r.forEach(l.edges(),function(c){var f=l.edge(c);r.forEach(f.points,o),r.has(f,"y")&&o(f)})}function o(l){l.y=-l.y}function s(l){r.forEach(l.nodes(),function(c){u(l.node(c))}),r.forEach(l.edges(),function(c){var f=l.edge(c);r.forEach(f.points,u),r.has(f,"x")&&u(f)})}function u(l){var c=l.x;l.x=l.y,l.y=c}return z_}var G_,SO;function zM(){if(SO)return G_;SO=1;var r=Ci();G_=e;function e(t){var n={},i=r.filter(t.nodes(),function(l){return!t.children(l).length}),a=r.max(r.map(i,function(l){return t.node(l).rank})),o=r.map(r.range(a+1),function(){return[]});function s(l){if(!r.has(n,l)){n[l]=!0;var c=t.node(l);o[c.rank].push(l),r.forEach(t.successors(l),s)}}var u=r.sortBy(i,function(l){return t.node(l).rank});return r.forEach(u,s),o}return G_}var V_,TO;function GM(){if(TO)return V_;TO=1;var r=Ci();V_=e;function e(n,i){for(var a=0,o=1;o<i.length;++o)a+=t(n,i[o-1],i[o]);return a}function t(n,i,a){for(var o=r.zipObject(a,r.map(a,function(h,d){return d})),s=r.flatten(r.map(i,function(h){return r.sortBy(r.map(n.outEdges(h),function(d){return{pos:o[d.w],weight:n.edge(d).weight}}),"pos")}),!0),u=1;u<a.length;)u<<=1;var l=2*u-1;u-=1;var c=r.map(new Array(l),function(){return 0}),f=0;return r.forEach(s.forEach(function(h){var d=h.pos+u;c[d]+=h.weight;for(var v=0;d>0;)d%2&&(v+=c[d+1]),d=d-1>>1,c[d]+=h.weight;f+=h.weight*v})),f}return V_}var q_,CO;function VM(){if(CO)return q_;CO=1;var r=Ci();q_=e;function e(t,n){return r.map(n,function(i){var a=t.inEdges(i);if(a.length){var o=r.reduce(a,function(s,u){var l=t.edge(u),c=t.node(u.v);return{sum:s.sum+l.weight*c.order,weight:s.weight+l.weight}},{sum:0,weight:0});return{v:i,barycenter:o.sum/o.weight,weight:o.weight}}else return{v:i}})}return q_}var W_,PO;function qM(){if(PO)return W_;PO=1;var r=Ci();W_=e;function e(i,a){var o={};r.forEach(i,function(u,l){var c=o[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:l};r.isUndefined(u.barycenter)||(c.barycenter=u.barycenter,c.weight=u.weight)}),r.forEach(a.edges(),function(u){var l=o[u.v],c=o[u.w];!r.isUndefined(l)&&!r.isUndefined(c)&&(c.indegree++,l.out.push(o[u.w]))});var s=r.filter(o,function(u){return!u.indegree});return t(s)}function t(i){var a=[];function o(l){return function(c){c.merged||(r.isUndefined(c.barycenter)||r.isUndefined(l.barycenter)||c.barycenter>=l.barycenter)&&n(l,c)}}function s(l){return function(c){c.in.push(l),--c.indegree===0&&i.push(c)}}for(;i.length;){var u=i.pop();a.push(u),r.forEach(u.in.reverse(),o(u)),r.forEach(u.out,s(u))}return r.map(r.filter(a,function(l){return!l.merged}),function(l){return r.pick(l,["vs","i","barycenter","weight"])})}function n(i,a){var o=0,s=0;i.weight&&(o+=i.barycenter*i.weight,s+=i.weight),a.weight&&(o+=a.barycenter*a.weight,s+=a.weight),i.vs=a.vs.concat(i.vs),i.barycenter=o/s,i.weight=s,i.i=Math.min(a.i,i.i),a.merged=!0}return W_}var H_,AO;function WM(){if(AO)return H_;AO=1;var r=Ci(),e=Vs();H_=t;function t(a,o){var s=e.partition(a,function(y){return r.has(y,"barycenter")}),u=s.lhs,l=r.sortBy(s.rhs,function(y){return-y.i}),c=[],f=0,h=0,d=0;u.sort(i(!!o)),d=n(c,l,d),r.forEach(u,function(y){d+=y.vs.length,c.push(y.vs),f+=y.barycenter*y.weight,h+=y.weight,d=n(c,l,d)});var v={vs:r.flatten(c,!0)};return h&&(v.barycenter=f/h,v.weight=h),v}function n(a,o,s){for(var u;o.length&&(u=r.last(o)).i<=s;)o.pop(),a.push(u.vs),s++;return s}function i(a){return function(o,s){return o.barycenter<s.barycenter?-1:o.barycenter>s.barycenter?1:a?s.i-o.i:o.i-s.i}}return H_}var Y_,RO;function HM(){if(RO)return Y_;RO=1;var r=Ci(),e=VM(),t=qM(),n=WM();Y_=i;function i(s,u,l,c){var f=s.children(u),h=s.node(u),d=h?h.borderLeft:void 0,v=h?h.borderRight:void 0,y={};d&&(f=r.filter(f,function(T){return T!==d&&T!==v}));var w=e(s,f);r.forEach(w,function(T){if(s.children(T.v).length){var P=i(s,T.v,l,c);y[T.v]=P,r.has(P,"barycenter")&&o(T,P)}});var b=t(w,l);a(b,y);var p=n(b,c);if(d&&(p.vs=r.flatten([d,p.vs,v],!0),s.predecessors(d).length)){var m=s.node(s.predecessors(d)[0]),x=s.node(s.predecessors(v)[0]);r.has(p,"barycenter")||(p.barycenter=0,p.weight=0),p.barycenter=(p.barycenter*p.weight+m.order+x.order)/(p.weight+2),p.weight+=2}return p}function a(s,u){r.forEach(s,function(l){l.vs=r.flatten(l.vs.map(function(c){return u[c]?u[c].vs:c}),!0)})}function o(s,u){r.isUndefined(s.barycenter)?(s.barycenter=u.barycenter,s.weight=u.weight):(s.barycenter=(s.barycenter*s.weight+u.barycenter*u.weight)/(s.weight+u.weight),s.weight+=u.weight)}return Y_}var X_,IO;function YM(){if(IO)return X_;IO=1;var r=Ci(),e=tl().Graph;X_=t;function t(i,a,o){var s=n(i),u=new e({compound:!0}).setGraph({root:s}).setDefaultNodeLabel(function(l){return i.node(l)});return r.forEach(i.nodes(),function(l){var c=i.node(l),f=i.parent(l);(c.rank===a||c.minRank<=a&&a<=c.maxRank)&&(u.setNode(l),u.setParent(l,f||s),r.forEach(i[o](l),function(h){var d=h.v===l?h.w:h.v,v=u.edge(d,l),y=r.isUndefined(v)?0:v.weight;u.setEdge(d,l,{weight:i.edge(h).weight+y})}),r.has(c,"minRank")&&u.setNode(l,{borderLeft:c.borderLeft[a],borderRight:c.borderRight[a]}))}),u}function n(i){for(var a;i.hasNode(a=r.uniqueId("_root")););return a}return X_}var K_,kO;function XM(){if(kO)return K_;kO=1;var r=Ci();K_=e;function e(t,n,i){var a={},o;r.forEach(i,function(s){for(var u=t.parent(s),l,c;u;){if(l=t.parent(u),l?(c=a[l],a[l]=u):(c=o,o=u),c&&c!==u){n.setEdge(c,u);return}u=l}})}return K_}var $_,DO;function KM(){if(DO)return $_;DO=1;var r=Ci(),e=zM(),t=GM(),n=HM(),i=YM(),a=XM(),o=tl().Graph,s=Vs();$_=u;function u(h){var d=s.maxRank(h),v=l(h,r.range(1,d+1),"inEdges"),y=l(h,r.range(d-1,-1,-1),"outEdges"),w=e(h);f(h,w);for(var b=Number.POSITIVE_INFINITY,p,m=0,x=0;x<4;++m,++x){c(m%2?v:y,m%4>=2),w=s.buildLayerMatrix(h);var T=t(h,w);T<b&&(x=0,p=r.cloneDeep(w),b=T)}f(h,p)}function l(h,d,v){return r.map(d,function(y){return i(h,y,v)})}function c(h,d){var v=new o;r.forEach(h,function(y){var w=y.graph().root,b=n(y,w,v,d);r.forEach(b.vs,function(p,m){y.node(p).order=m}),a(y,v,b.vs)})}function f(h,d){r.forEach(d,function(v){r.forEach(v,function(y,w){h.node(y).order=w})})}return $_}var Z_,MO;function $M(){if(MO)return Z_;MO=1;var r=Ci(),e=tl().Graph,t=Vs();Z_={positionX:v,findType1Conflicts:n,findType2Conflicts:i,addConflict:o,hasConflict:s,verticalAlignment:u,horizontalCompaction:l,alignCoordinates:h,findSmallestWidthAlignment:f,balance:d};function n(b,p){var m={};function x(T,P){var C=0,R=0,D=T.length,N=r.last(P);return r.forEach(P,function(j,B){var z=a(b,j),W=z?b.node(z).order:D;(z||j===N)&&(r.forEach(P.slice(R,B+1),function(Z){r.forEach(b.predecessors(Z),function(Q){var re=b.node(Q),ee=re.order;(ee<C||W<ee)&&!(re.dummy&&b.node(Z).dummy)&&o(m,Q,Z)})}),R=B+1,C=W)}),P}return r.reduce(p,x),m}function i(b,p){var m={};if(b.nodeCount()>1e3)return m;function x(P,C,R,D,N){var j;r.forEach(r.range(C,R),function(B){j=P[B],b.node(j).dummy&&r.forEach(b.predecessors(j),function(z){var W=b.node(z);W.dummy&&(W.order<D||W.order>N)&&o(m,z,j)})})}function T(P,C){var R=-1,D,N=0;return r.forEach(C,function(j,B){if(b.node(j).dummy==="border"){var z=b.predecessors(j);z.length&&(D=b.node(z[0]).order,x(C,N,B,R,D),N=B,R=D)}x(C,N,C.length,D,P.length)}),C}return r.reduce(p,T),m}function a(b,p){if(b.node(p).dummy)return r.find(b.predecessors(p),function(m){return b.node(m).dummy})}function o(b,p,m){if(p>m){var x=p;p=m,m=x}var T=b[p];T||(b[p]=T={}),T[m]=!0}function s(b,p,m){if(p>m){var x=p;p=m,m=x}return r.has(b[p],m)}function u(b,p,m,x){var T={},P={},C={};return r.forEach(p,function(R){r.forEach(R,function(D,N){T[D]=D,P[D]=D,C[D]=N})}),r.forEach(p,function(R){var D=-1;r.forEach(R,function(N){var j=x(N);if(j.length){j=r.sortBy(j,function(Q){return C[Q]});for(var B=(j.length-1)/2,z=Math.floor(B),W=Math.ceil(B);z<=W;++z){var Z=j[z];P[N]===N&&D<C[Z]&&!s(m,N,Z)&&(P[Z]=N,P[N]=T[N]=T[Z],D=C[Z])}}})}),{root:T,align:P}}function l(b,p,m,x,T){var P={},C=c(b,p,m,T),R=T?"borderLeft":"borderRight";function D(B,z){for(var W=C.nodes(),Z=W.pop(),Q={};Z;)Q[Z]?B(Z):(Q[Z]=!0,W.push(Z),W=W.concat(z(Z))),Z=W.pop()}function N(B){P[B]=C.inEdges(B).reduce(function(z,W){return Math.max(z,P[W.v]+C.edge(W))},0)}function j(B){var z=C.outEdges(B).reduce(function(Z,Q){return Math.min(Z,P[Q.w]-C.edge(Q))},Number.POSITIVE_INFINITY),W=b.node(B);z!==Number.POSITIVE_INFINITY&&W.borderType!==R&&(P[B]=Math.max(P[B],z))}return D(N,C.predecessors.bind(C)),D(j,C.successors.bind(C)),r.forEach(x,function(B){P[B]=P[m[B]]}),P}function c(b,p,m,x){var T=new e,P=b.graph(),C=y(P.nodesep,P.edgesep,x);return r.forEach(p,function(R){var D;r.forEach(R,function(N){var j=m[N];if(T.setNode(j),D){var B=m[D],z=T.edge(B,j);T.setEdge(B,j,Math.max(C(b,N,D),z||0))}D=N})}),T}function f(b,p){return r.minBy(r.values(p),function(m){var x=Number.NEGATIVE_INFINITY,T=Number.POSITIVE_INFINITY;return r.forIn(m,function(P,C){var R=w(b,C)/2;x=Math.max(P+R,x),T=Math.min(P-R,T)}),x-T})}function h(b,p){var m=r.values(p),x=r.min(m),T=r.max(m);r.forEach(["u","d"],function(P){r.forEach(["l","r"],function(C){var R=P+C,D=b[R],N;if(D!==p){var j=r.values(D);N=C==="l"?x-r.min(j):T-r.max(j),N&&(b[R]=r.mapValues(D,function(B){return B+N}))}})})}function d(b,p){return r.mapValues(b.ul,function(m,x){if(p)return b[p.toLowerCase()][x];var T=r.sortBy(r.map(b,x));return(T[1]+T[2])/2})}function v(b){var p=t.buildLayerMatrix(b),m=r.merge(n(b,p),i(b,p)),x={},T;r.forEach(["u","d"],function(C){T=C==="u"?p:r.values(p).reverse(),r.forEach(["l","r"],function(R){R==="r"&&(T=r.map(T,function(B){return r.values(B).reverse()}));var D=(C==="u"?b.predecessors:b.successors).bind(b),N=u(b,T,m,D),j=l(b,T,N.root,N.align,R==="r");R==="r"&&(j=r.mapValues(j,function(B){return-B})),x[C+R]=j})});var P=f(b,x);return h(x,P),d(x,b.graph().align)}function y(b,p,m){return function(x,T,P){var C=x.node(T),R=x.node(P),D=0,N;if(D+=C.width/2,r.has(C,"labelpos"))switch(C.labelpos.toLowerCase()){case"l":N=-C.width/2;break;case"r":N=C.width/2;break}if(N&&(D+=m?N:-N),N=0,D+=(C.dummy?p:b)/2,D+=(R.dummy?p:b)/2,D+=R.width/2,r.has(R,"labelpos"))switch(R.labelpos.toLowerCase()){case"l":N=R.width/2;break;case"r":N=-R.width/2;break}return N&&(D+=m?N:-N),N=0,D}}function w(b,p){return b.node(p).width}return Z_}var Q_,LO;function ZM(){if(LO)return Q_;LO=1;var r=Ci(),e=Vs(),t=$M().positionX;Q_=n;function n(a){a=e.asNonCompoundGraph(a),i(a),r.forEach(t(a),function(o,s){a.node(s).x=o})}function i(a){var o=e.buildLayerMatrix(a),s=a.graph().ranksep,u=0;r.forEach(o,function(l){var c=r.max(r.map(l,function(f){return a.node(f).height}));r.forEach(l,function(f){a.node(f).y=u+c/2}),u+=c+s})}return Q_}var J_,NO;function QM(){if(NO)return J_;NO=1;var r=Ci(),e=DM(),t=MM(),n=NM(),i=Vs().normalizeRanks,a=jM(),o=Vs().removeEmptyRanks,s=BM(),u=FM(),l=UM(),c=KM(),f=ZM(),h=Vs(),d=tl().Graph;J_=v;function v(he,fe){var Ee=fe&&fe.debugTiming?h.time:h.notime,Ce=Ee("layout",function(){return Ce=Ee("  buildLayoutGraph",function(){return D(he)}),Ee("  runLayout",function(){y(Ce,Ee)}),Ee("  updateInputGraph",function(){w(he,Ce)}),Ce});return Ce}function y(he,fe){fe("    makeSpaceForEdgeLabels",function(){N(he)}),fe("    removeSelfEdges",function(){ue(he)}),fe("    acyclic",function(){e.run(he)}),fe("    nestingGraph.run",function(){s.run(he)}),fe("    rank",function(){n(h.asNonCompoundGraph(he))}),fe("    injectEdgeLabelProxies",function(){j(he)}),fe("    removeEmptyRanks",function(){o(he)}),fe("    nestingGraph.cleanup",function(){s.cleanup(he)}),fe("    normalizeRanks",function(){i(he)}),fe("    assignRankMinMax",function(){B(he)}),fe("    removeEdgeLabelProxies",function(){z(he)}),fe("    normalize.run",function(){t.run(he)}),fe("    parentDummyChains",function(){a(he)}),fe("    addBorderSegments",function(){u(he)}),fe("    order",function(){c(he)}),fe("    insertSelfEdges",function(){de(he)}),fe("    adjustCoordinateSystem",function(){l.adjust(he)}),fe("    position",function(){f(he)}),fe("    positionSelfEdges",function(){se(he)}),fe("    removeBorderNodes",function(){ee(he)}),fe("    normalize.undo",function(){t.undo(he)}),fe("    fixupEdgeLabelCoords",function(){Q(he)}),fe("    undoCoordinateSystem",function(){l.undo(he)}),fe("    translateGraph",function(){W(he)}),fe("    assignNodeIntersects",function(){Z(he)}),fe("    reversePoints",function(){re(he)}),fe("    acyclic.undo",function(){e.undo(he)})}function w(he,fe){r.forEach(he.nodes(),function(Ee){var Ce=he.node(Ee),ke=fe.node(Ee);Ce&&(Ce.x=ke.x,Ce.y=ke.y,fe.children(Ee).length&&(Ce.width=ke.width,Ce.height=ke.height))}),r.forEach(he.edges(),function(Ee){var Ce=he.edge(Ee),ke=fe.edge(Ee);Ce.points=ke.points,r.has(ke,"x")&&(Ce.x=ke.x,Ce.y=ke.y)}),he.graph().width=fe.graph().width,he.graph().height=fe.graph().height}var b=["nodesep","edgesep","ranksep","marginx","marginy"],p={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},m=["acyclicer","ranker","rankdir","align"],x=["width","height"],T={width:0,height:0},P=["minlen","weight","width","height","labeloffset"],C={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},R=["labelpos"];function D(he){var fe=new d({multigraph:!0,compound:!0}),Ee=Me(he.graph());return fe.setGraph(r.merge({},p,me(Ee,b),r.pick(Ee,m))),r.forEach(he.nodes(),function(Ce){var ke=Me(he.node(Ce));fe.setNode(Ce,r.defaults(me(ke,x),T)),fe.setParent(Ce,he.parent(Ce))}),r.forEach(he.edges(),function(Ce){var ke=Me(he.edge(Ce));fe.setEdge(Ce,r.merge({},C,me(ke,P),r.pick(ke,R)))}),fe}function N(he){var fe=he.graph();fe.ranksep/=2,r.forEach(he.edges(),function(Ee){var Ce=he.edge(Ee);Ce.minlen*=2,Ce.labelpos.toLowerCase()!=="c"&&(fe.rankdir==="TB"||fe.rankdir==="BT"?Ce.width+=Ce.labeloffset:Ce.height+=Ce.labeloffset)})}function j(he){r.forEach(he.edges(),function(fe){var Ee=he.edge(fe);if(Ee.width&&Ee.height){var Ce=he.node(fe.v),ke=he.node(fe.w),Re={rank:(ke.rank-Ce.rank)/2+Ce.rank,e:fe};h.addDummyNode(he,"edge-proxy",Re,"_ep")}})}function B(he){var fe=0;r.forEach(he.nodes(),function(Ee){var Ce=he.node(Ee);Ce.borderTop&&(Ce.minRank=he.node(Ce.borderTop).rank,Ce.maxRank=he.node(Ce.borderBottom).rank,fe=r.max(fe,Ce.maxRank))}),he.graph().maxRank=fe}function z(he){r.forEach(he.nodes(),function(fe){var Ee=he.node(fe);Ee.dummy==="edge-proxy"&&(he.edge(Ee.e).labelRank=Ee.rank,he.removeNode(fe))})}function W(he){var fe=Number.POSITIVE_INFINITY,Ee=0,Ce=Number.POSITIVE_INFINITY,ke=0,Re=he.graph(),ve=Re.marginx||0,we=Re.marginy||0;function Oe(Be){var Ye=Be.x,ht=Be.y,Ct=Be.width,ct=Be.height;fe=Math.min(fe,Ye-Ct/2),Ee=Math.max(Ee,Ye+Ct/2),Ce=Math.min(Ce,ht-ct/2),ke=Math.max(ke,ht+ct/2)}r.forEach(he.nodes(),function(Be){Oe(he.node(Be))}),r.forEach(he.edges(),function(Be){var Ye=he.edge(Be);r.has(Ye,"x")&&Oe(Ye)}),fe-=ve,Ce-=we,r.forEach(he.nodes(),function(Be){var Ye=he.node(Be);Ye.x-=fe,Ye.y-=Ce}),r.forEach(he.edges(),function(Be){var Ye=he.edge(Be);r.forEach(Ye.points,function(ht){ht.x-=fe,ht.y-=Ce}),r.has(Ye,"x")&&(Ye.x-=fe),r.has(Ye,"y")&&(Ye.y-=Ce)}),Re.width=Ee-fe+ve,Re.height=ke-Ce+we}function Z(he){r.forEach(he.edges(),function(fe){var Ee=he.edge(fe),Ce=he.node(fe.v),ke=he.node(fe.w),Re,ve;Ee.points?(Re=Ee.points[0],ve=Ee.points[Ee.points.length-1]):(Ee.points=[],Re=ke,ve=Ce),Ee.points.unshift(h.intersectRect(Ce,Re)),Ee.points.push(h.intersectRect(ke,ve))})}function Q(he){r.forEach(he.edges(),function(fe){var Ee=he.edge(fe);if(r.has(Ee,"x"))switch((Ee.labelpos==="l"||Ee.labelpos==="r")&&(Ee.width-=Ee.labeloffset),Ee.labelpos){case"l":Ee.x-=Ee.width/2+Ee.labeloffset;break;case"r":Ee.x+=Ee.width/2+Ee.labeloffset;break}})}function re(he){r.forEach(he.edges(),function(fe){var Ee=he.edge(fe);Ee.reversed&&Ee.points.reverse()})}function ee(he){r.forEach(he.nodes(),function(fe){if(he.children(fe).length){var Ee=he.node(fe),Ce=he.node(Ee.borderTop),ke=he.node(Ee.borderBottom),Re=he.node(r.last(Ee.borderLeft)),ve=he.node(r.last(Ee.borderRight));Ee.width=Math.abs(ve.x-Re.x),Ee.height=Math.abs(ke.y-Ce.y),Ee.x=Re.x+Ee.width/2,Ee.y=Ce.y+Ee.height/2}}),r.forEach(he.nodes(),function(fe){he.node(fe).dummy==="border"&&he.removeNode(fe)})}function ue(he){r.forEach(he.edges(),function(fe){if(fe.v===fe.w){var Ee=he.node(fe.v);Ee.selfEdges||(Ee.selfEdges=[]),Ee.selfEdges.push({e:fe,label:he.edge(fe)}),he.removeEdge(fe)}})}function de(he){var fe=h.buildLayerMatrix(he);r.forEach(fe,function(Ee){var Ce=0;r.forEach(Ee,function(ke,Re){var ve=he.node(ke);ve.order=Re+Ce,r.forEach(ve.selfEdges,function(we){h.addDummyNode(he,"selfedge",{width:we.label.width,height:we.label.height,rank:ve.rank,order:Re+ ++Ce,e:we.e,label:we.label},"_se")}),delete ve.selfEdges})})}function se(he){r.forEach(he.nodes(),function(fe){var Ee=he.node(fe);if(Ee.dummy==="selfedge"){var Ce=he.node(Ee.e.v),ke=Ce.x+Ce.width/2,Re=Ce.y,ve=Ee.x-ke,we=Ce.height/2;he.setEdge(Ee.e,Ee.label),he.removeNode(fe),Ee.label.points=[{x:ke+2*ve/3,y:Re-we},{x:ke+5*ve/6,y:Re-we},{x:ke+ve,y:Re},{x:ke+5*ve/6,y:Re+we},{x:ke+2*ve/3,y:Re+we}],Ee.label.x=Ee.x,Ee.label.y=Ee.y}})}function me(he,fe){return r.mapValues(r.pick(he,fe),Number)}function Me(he){var fe={};return r.forEach(he,function(Ee,Ce){fe[Ce.toLowerCase()]=Ee}),fe}return J_}var ew,jO;function JM(){if(jO)return ew;jO=1;var r=Ci(),e=Vs(),t=tl().Graph;ew={debugOrdering:n};function n(i){var a=e.buildLayerMatrix(i),o=new t({compound:!0,multigraph:!0}).setGraph({});return r.forEach(i.nodes(),function(s){o.setNode(s,{label:s}),o.setParent(s,"layer"+i.node(s).rank)}),r.forEach(i.edges(),function(s){o.setEdge(s.v,s.w,{},s.name)}),r.forEach(a,function(s,u){var l="layer"+u;o.setNode(l,{rank:"same"}),r.reduce(s,function(c,f){return o.setEdge(c,f,{style:"invis"}),f})}),o}return ew}var tw,BO;function eL(){return BO||(BO=1,tw="0.8.14"),tw}var rw,FO;function tL(){return FO||(FO=1,rw={graphlib:tl(),layout:QM(),debug:JM(),util:{time:Vs().time,notime:Vs().notime},version:eL()}),rw}var rL=tL();const m2=r0(rL);var nw,UO;function nL(){if(UO)return nw;UO=1;var r=function(){};return r.prototype={fit:function(e){var t,n,i,a=e.length,o,s=a>0?e[0].width:0,u=a>0?e[0].height:0;for(this.root={x:0,y:0,width:s,height:u},t=0;t<a;t++)i=e[t],(n=this.findNode(this.root,i.width,i.height))?(o=this.splitNode(n,i.width,i.height),i.x=o.x,i.y=o.y):(o=this.growNode(i.width,i.height),i.x=o.x,i.y=o.y)},findNode:function(e,t,n){return e.used?this.findNode(e.right,t,n)||this.findNode(e.down,t,n):t<=e.width&&n<=e.height?e:null},splitNode:function(e,t,n){return e.used=!0,e.down={x:e.x,y:e.y+n,width:e.width,height:e.height-n},e.right={x:e.x+t,y:e.y,width:e.width-t,height:n},e},growNode:function(e,t){var n=e<=this.root.width,i=t<=this.root.height,a=i&&this.root.height>=this.root.width+e,o=n&&this.root.width>=this.root.height+t;return a?this.growRight(e,t):o?this.growDown(e,t):i?this.growRight(e,t):n?this.growDown(e,t):null},growRight:function(e,t){this.root={used:!0,x:0,y:0,width:this.root.width+e,height:this.root.height,down:this.root,right:{x:this.root.width,y:0,width:e,height:this.root.height}};var n;return(n=this.findNode(this.root,e,t))?this.splitNode(n,e,t):null},growDown:function(e,t){this.root={used:!0,x:0,y:0,width:this.root.width,height:this.root.height+t,down:{x:0,y:this.root.height,width:this.root.width,height:t},right:this.root};var n;return(n=this.findNode(this.root,e,t))?this.splitNode(n,e,t):null}},nw=r,nw}var iw,zO;function iL(){if(zO)return iw;zO=1;var r=nL();return iw=function(e,t){t=t||{};var n=new r,i=t.inPlace||!1,a=e.map(function(l){return i?l:{width:l.width,height:l.height,item:l}});a=a.sort(function(l,c){return c.width*c.height-l.width*l.height}),n.fit(a);var o=a.reduce(function(l,c){return Math.max(l,c.x+c.width)},0),s=a.reduce(function(l,c){return Math.max(l,c.y+c.height)},0),u={width:o,height:s};return i||(u.items=a),u},iw}var oL=iL();const aL=r0(oL);var sL=tl();const uL=r0(sL),lL="tight-tree",Kf=100,b2="up",m1="down",cL="left",_2="right",fL={[b2]:"BT",[m1]:"TB",[cL]:"RL",[_2]:"LR"},hL="bin",dL=25,vL=1/.38,pL=r=>r===b2||r===m1,gL=r=>r===m1||r===_2,ow=r=>{let e=null,t=null,n=null,i=null,a=null,o=null,s=null,u=null;for(const l of r.nodes()){const c=r.node(l);(a===null||c.x<a)&&(a=c.x),(o===null||c.y<o)&&(o=c.y),(s===null||c.x>s)&&(s=c.x),(u===null||c.y>u)&&(u=c.y);const f=Math.ceil(c.width/2);(e===null||c.x-f<e)&&(e=c.x-f),(t===null||c.y-f<t)&&(t=c.y-f),(n===null||c.x+f>n)&&(n=c.x+f),(i===null||c.y+f>i)&&(i=c.y+f)}return{minX:e,minY:t,maxX:n,maxY:i,minCenterX:a,minCenterY:o,maxCenterX:s,maxCenterY:u,width:n-e,height:i-t,xOffset:a-e,yOffset:o-t}},w2=r=>{const e=new m2.graphlib.Graph;return e.setGraph({}),e.setDefaultEdgeLabel(()=>({})),e.graph().nodesep=75*r,e.graph().ranksep=75*r,e},GO=(r,e,t)=>{const{rank:n}=t.node(r);let i=null,a=null;for(const o of e){const{rank:s}=t.node(o);if(!(o===r||s>=n))if(s===n-1){i=s,a=o;break}else(i===null&&a===null||s>i)&&(i=s,a=o)}return a},yL=(r,e)=>{let t=GO(r,e.predecessors(r),e);return t===null&&(t=GO(r,e.successors(r),e)),t},mL=(r,e)=>{const t=[],n=uL.alg.components(r);if(n.length>1)for(const i of n){const a=w2(e);for(const o of i){const s=r.node(o);a.setNode(o,{width:s.width,height:s.height});const u=r.outEdges(o);if(u)for(const l of u)a.setEdge(l.v,l.w)}t.push(a)}else t.push(r);return t},VO=(r,e,t)=>{r.graph().ranker=lL,r.graph().rankdir=fL[e];const n=m2.layout(r);for(const i of n.nodes()){const a=yL(i,n);a!==null&&(t[i]=a)}},aw=(r,e)=>Math.sqrt((r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y)),bL=r=>{const e=[r[0]];let t={p1:r[0],p2:r[1]},n=aw(t.p1,t.p2);for(let i=2;i<r.length;i++){let a={p1:r[i-1],p2:r[i]},o=aw(a.p1,a.p2);const s={p1:t.p1,p2:a.p2},u=aw(s.p1,s.p2);o+n-u<.1&&(e.pop(),a=s,o=u),e.push(a.p1),t=a,n=o}return e.push(r[r.length-1]),e},_L=(r,e,t,n,i,a,o=1)=>{const s=w2(o),u={},l={x:0,y:0},c=r.length;for(const m of r){const x=t[m.id];l.x+=(x==null?void 0:x.x)||0,l.y+=(x==null?void 0:x.y)||0;const T=(m.size||dL)*vL*o;s.setNode(m.id,{width:T,height:T})}const f=c?[l.x/c,l.y/c]:[0,0],h={};for(const m of n)if(e[m.from]&&e[m.to]&&m.from!==m.to){const x=m.from<m.to?`${m.from}-${m.to}`:`${m.to}-${m.from}`;h[x]||(h[x]=1,s.setEdge(m.from,m.to))}const d=mL(s,o);if(d.length>1){d.forEach(C=>VO(C,i,u));const m=pL(i),x=gL(i),T=d.filter(C=>C.nodeCount()===1),P=d.filter(C=>C.nodeCount()!==1);if(a===hL){P.sort((re,ee)=>ee.nodeCount()-re.nodeCount());const D=m?({width:re,height:ee,...ue})=>({...ue,width:re+Kf,height:ee+Kf}):({width:re,height:ee,...ue})=>({...ue,width:ee+Kf,height:re+Kf}),N=P.map(ow).map(D),j=T.map(ow).map(D),B=N.concat(j);aL(B,{inPlace:!0});const z=Math.floor(Kf/2),W=m?"x":"y",Z=m?"y":"x";if(!x){const re=m?"y":"x",ee=m?"height":"width",ue=B.reduce((se,me)=>se===null?me[re]:Math.min(me[re],se[ee]||0),null),de=B.reduce((se,me)=>se===null?me[re]+me[ee]:Math.max(me[re]+me[ee],se[ee]||0),null);B.forEach(se=>{se[re]=ue+(de-(se[re]+se[ee]))})}const Q=(re,ee)=>{for(const ue of re.nodes()){const de=re.node(ue),se=s.node(ue);se.x=de.x-ee.xOffset+ee[W]+z,se.y=de.y-ee.yOffset+ee[Z]+z}};for(let re=0;re<P.length;re++){const ee=P[re],ue=N[re];Q(ee,ue)}for(let re=0;re<T.length;re++){const ee=T[re],ue=j[re];Q(ee,ue)}}else{P.sort(x?(ee,ue)=>ue.nodeCount()-ee.nodeCount():(ee,ue)=>ee.nodeCount()-ue.nodeCount());const C=P.map(ow),R=T.reduce((ee,ue)=>ee+s.node(ue.nodes()[0]).width,0),D=T.reduce((ee,ue)=>Math.max(ee,s.node(ue.nodes()[0]).width),0),N=T.length>0?R+(T.length-1)*Kf:0,j=C.reduce((ee,{width:ue})=>Math.max(ee,ue),0),B=Math.max(j,N),z=C.reduce((ee,{height:ue})=>Math.max(ee,ue),0),W=Math.max(z,N);let Z=0;const Q=()=>{for(let ee=0;ee<P.length;ee++){const ue=P[ee],de=C[ee],se=Math.floor(m?(B-de.width)/2:(W-de.height)/2);for(const me of ue.nodes()){const Me=ue.node(me),he=s.node(me);m?(he.x=Me.x-de.minX+se,he.y=Me.y-de.minY+Z):(he.x=Me.x-de.minX+Z,he.y=Me.y-de.minY+se)}for(const me of ue.edges()){const Me=ue.edge(me),he=s.edge(me);Me.points&&Me.points.length>3&&(he.points=Me.points.map(({x:fe,y:Ee})=>({x:fe-de.minX+(m?se:Z),y:Ee-de.minY+(m?Z:se)})))}Z+=(m?de.height:de.width)+Kf}},re=()=>{const ee=Math.floor(((m?B:W)-N)/2);Z+=Math.floor(D/2);let ue=ee;for(const de of T){const se=de.nodes()[0],me=s.node(se);m?(me.x=ue+Math.floor(me.width/2),me.y=Z):(me.x=Z,me.y=ue+Math.floor(me.width/2)),ue+=Kf+me.width}Z=D+Kf};x?(Q(),re()):(re(),Q())}}else VO(s,i,u);l.x=0,l.y=0;const v={};for(const m of s.nodes()){const x=s.node(m);l.x+=x.x||0,l.y+=x.y||0,v[m]={x:x.x,y:x.y}}const y=c?[l.x/c,l.y/c]:[0,0],w=f[0]-y[0],b=f[1]-y[1];for(const m in v)v[m].x+=w,v[m].y+=b;const p={};for(const m of s.edges()){const x=s.edge(m);if(x.points&&x.points.length>3){const T=bL(x.points);for(const P of T)P.x+=w,P.y+=b;p[`${m.v}-${m.w}`]={points:[...T],from:{x:v[m.v].x,y:v[m.v].y},to:{x:v[m.w].x,y:v[m.w].y}},p[`${m.w}-${m.v}`]={points:T.reverse(),from:{x:v[m.w].x,y:v[m.w].y},to:{x:v[m.v].x,y:v[m.v].y}}}}return{positions:v,parents:u,waypoints:p}};class wL{start(){}postMessage(e){const{nodes:t,nodeIds:n,idToPosition:i,rels:a,direction:o,packing:s,pixelRatio:u,forcedDelay:l=0}=e,c=_L(t,n,i,a,o,s,u);l?setTimeout(()=>{this.onmessage({data:c})},l):this.onmessage({data:c})}onmessage(){}close(){}}const EL={port:new wL},xL=()=>new SharedWorker(new URL("/assets/HierarchicalLayout.worker-BNdYu4o-.js",import.meta.url),{type:"module",name:"HierarchicalLayout"}),OL=Object.freeze(Object.defineProperty({__proto__:null,coseBilkentLayoutFallbackWorker:PM,createCoseBilkentLayoutWorker:AM,createHierarchicalLayoutWorker:xL,hierarchicalLayoutFallbackWorker:EL},Symbol.toStringTag,{value:"Module"}));var Fw=function(r,e){return Fw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},Fw(r,e)};function Ws(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Fw(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Mt=function(){return Mt=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Mt.apply(this,arguments)};function E2(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function fr(r,e,t,n){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(f){o(f)}}function u(c){try{l(n.throw(c))}catch(f){o(f)}}function l(c){c.done?a(c.value):i(c.value).then(s,u)}l((n=n.apply(r,e||[])).next())})}function hr(r,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(c){return u([l,c])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(t=0)),t;)try{if(n=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){t.label=l[1];break}if(l[0]===6&&t.label<a[1]){t.label=a[1],a=l;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(l);break}a[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(c){l=[6,c],i=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function jo(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return r.concat(a||Array.prototype.slice.call(e))}function Uw(r,e,t){e.split&&(e=e.split("."));for(var n=0,i=e.length,a=r,o,s;n<i&&(s=""+e[n++],!(s==="__proto__"||s==="constructor"||s==="prototype"));)a=a[s]=n===i?t:typeof(o=a[s])==typeof e?o:e[n]*0!==0||~(""+e[n]).indexOf(".")?{}:[]}var SL=function(r,e){return Object.keys(r).filter(function(t){return e(t,r[t])}).reduce(function(t,n){return t[n]=r[n],t},{})},Uv=function(r){Ws(e,r);function e(t,n){var i=r.call(this,"".concat(t," ").concat(n))||this;return i.field=t,i}return e}(Error);function hd(r){return typeof r=="string"}function zw(r){return typeof r=="number"}function Qp(r){return typeof r=="function"}function TL(r){return r!=null}function Zl(r){return Object.prototype.toString.call(r).slice(8,-1).toLowerCase()==="object"}var b1="is not a string",_1="is not an object",CL="is nil";function PL(r){if(!TL(r))throw new Uv("Event",CL);if(typeof r!="object")throw new Uv("Event",_1)}function AL(r){if(!hd(r.type))throw new Uv(".type",b1)}function RL(r){if(!hd(r.event))throw new Uv(".event",b1)}function IL(r){if(!Zl(r.properties))throw new Uv(".properties",_1)}function kL(r){if(!Zl(r.traits))throw new Uv(".traits",_1)}function DL(r){if(!hd(r.messageId))throw new Uv(".messageId",b1)}function ML(r){PL(r),AL(r),DL(r),r.type==="track"&&(RL(r),IL(r)),["group","identify"].includes(r.type)&&kL(r)}var LL=function(){function r(e){var t,n;this.settings=e,this.createMessageId=e.createMessageId,this.onEventMethodCall=(t=e.onEventMethodCall)!==null&&t!==void 0?t:function(){},this.onFinishedEvent=(n=e.onFinishedEvent)!==null&&n!==void 0?n:function(){}}return r}(),NL=function(){function r(e){this.settings=new LL(e)}return r.prototype.track=function(e,t,n,i){return this.settings.onEventMethodCall({type:"track",options:n}),this.normalize(Mt(Mt({},this.baseEvent()),{event:e,type:"track",properties:t??{},options:Mt({},n),integrations:Mt({},i)}))},r.prototype.page=function(e,t,n,i,a){var o;this.settings.onEventMethodCall({type:"page",options:i});var s={type:"page",properties:Mt({},n),options:Mt({},i),integrations:Mt({},a)};return e!==null&&(s.category=e,s.properties=(o=s.properties)!==null&&o!==void 0?o:{},s.properties.category=e),t!==null&&(s.name=t),this.normalize(Mt(Mt({},this.baseEvent()),s))},r.prototype.screen=function(e,t,n,i,a){this.settings.onEventMethodCall({type:"screen",options:i});var o={type:"screen",properties:Mt({},n),options:Mt({},i),integrations:Mt({},a)};return e!==null&&(o.category=e),t!==null&&(o.name=t),this.normalize(Mt(Mt({},this.baseEvent()),o))},r.prototype.identify=function(e,t,n,i){return this.settings.onEventMethodCall({type:"identify",options:n}),this.normalize(Mt(Mt({},this.baseEvent()),{type:"identify",userId:e,traits:t??{},options:Mt({},n),integrations:i}))},r.prototype.group=function(e,t,n,i){return this.settings.onEventMethodCall({type:"group",options:n}),this.normalize(Mt(Mt({},this.baseEvent()),{type:"group",traits:t??{},options:Mt({},n),integrations:Mt({},i),groupId:e}))},r.prototype.alias=function(e,t,n,i){this.settings.onEventMethodCall({type:"alias",options:n});var a={userId:e,type:"alias",options:Mt({},n),integrations:Mt({},i)};return t!==null&&(a.previousId=t),e===void 0?this.normalize(Mt(Mt({},a),this.baseEvent())):this.normalize(Mt(Mt({},this.baseEvent()),a))},r.prototype.baseEvent=function(){return{integrations:{},options:{}}},r.prototype.context=function(e){var t,n=["userId","anonymousId","timestamp","messageId"];delete e.integrations;var i=Object.keys(e),a=(t=e.context)!==null&&t!==void 0?t:{},o={};return i.forEach(function(s){s!=="context"&&(n.includes(s)?Uw(o,s,e[s]):Uw(a,s,e[s]))}),[a,o]},r.prototype.normalize=function(e){var t,n,i=Object.keys((t=e.integrations)!==null&&t!==void 0?t:{}).reduce(function(h,d){var v,y;return Mt(Mt({},h),(v={},v[d]=!!(!((y=e.integrations)===null||y===void 0)&&y[d]),v))},{});e.options=SL(e.options||{},function(h,d){return d!==void 0});var a=Mt(Mt({},i),(n=e.options)===null||n===void 0?void 0:n.integrations),o=e.options?this.context(e.options):[],s=o[0],u=o[1],l=e.options,c=E2(e,["options"]),f=Mt(Mt(Mt(Mt({timestamp:new Date},c),{context:s,integrations:a}),u),{messageId:l.messageId||this.settings.createMessageId()});return this.settings.onFinishedEvent(f),ML(f),f},r}();function jL(r,e){return new Promise(function(t,n){var i=setTimeout(function(){n(Error("Promise timed out"))},e);r.then(function(a){return clearTimeout(i),t(a)}).catch(n)})}function BL(r){return new Promise(function(e){return setTimeout(e,r)})}function FL(r,e,t){var n=function(){try{return Promise.resolve(e(r))}catch(i){return Promise.reject(i)}};return BL(t).then(function(){return jL(n(),1e3)}).catch(function(i){r==null||r.log("warn","Callback Error",{error:i}),r==null||r.stats.increment("callback_error")}).then(function(){return r})}var x2=function(){var r,e,t=!1,n=new Promise(function(i,a){r=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];t=!0,i.apply(void 0,o)},e=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];t=!0,a.apply(void 0,o)}});return{resolve:r,reject:e,promise:n,isSettled:function(){return t}}},w1=function(){function r(e){var t;this.callbacks={},this.warned=!1,this.maxListeners=(t=e==null?void 0:e.maxListeners)!==null&&t!==void 0?t:10}return r.prototype.warnIfPossibleMemoryLeak=function(e){this.warned||this.maxListeners&&this.callbacks[e].length>this.maxListeners&&(console.warn("Event Emitter: Possible memory leak detected; ".concat(String(e)," has exceeded ").concat(this.maxListeners," listeners.")),this.warned=!0)},r.prototype.on=function(e,t){return this.callbacks[e]?(this.callbacks[e].push(t),this.warnIfPossibleMemoryLeak(e)):this.callbacks[e]=[t],this},r.prototype.once=function(e,t){var n=this,i=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];n.off(e,i),t.apply(n,a)};return this.on(e,i),this},r.prototype.off=function(e,t){var n,i=(n=this.callbacks[e])!==null&&n!==void 0?n:[],a=i.filter(function(o){return o!==t});return this.callbacks[e]=a,this},r.prototype.emit=function(e){for(var t=this,n,i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];var o=(n=this.callbacks[e])!==null&&n!==void 0?n:[];return o.forEach(function(s){s.apply(t,i)}),this},r}();function UL(r){var e=Math.random()+1,t=r.minTimeout,n=t===void 0?500:t,i=r.factor,a=i===void 0?2:i,o=r.attempt,s=r.maxTimeout,u=s===void 0?1/0:s;return Math.min(e*n*Math.pow(a,o),u)}var O2="onRemoveFromFuture",E1=function(r){Ws(e,r);function e(t,n,i){var a=r.call(this)||this;return a.future=[],a.maxAttempts=t,a.queue=n,a.seen=i??{},a}return e.prototype.push=function(){for(var t=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a=n.map(function(o){var s=t.updateAttempts(o);return s>t.maxAttempts||t.includes(o)?!1:(t.queue.push(o),!0)});return this.queue=this.queue.sort(function(o,s){return t.getAttempts(o)-t.getAttempts(s)}),a},e.prototype.pushWithBackoff=function(t,n){var i=this;if(n===void 0&&(n=0),n==0&&this.getAttempts(t)===0)return this.push(t)[0];var a=this.updateAttempts(t);if(a>this.maxAttempts||this.includes(t))return!1;var o=UL({attempt:a-1});return n>0&&o<n&&(o=n),setTimeout(function(){i.queue.push(t),i.future=i.future.filter(function(s){return s.id!==t.id}),i.emit(O2)},o),this.future.push(t),!0},e.prototype.getAttempts=function(t){var n;return(n=this.seen[t.id])!==null&&n!==void 0?n:0},e.prototype.updateAttempts=function(t){return this.seen[t.id]=this.getAttempts(t)+1,this.getAttempts(t)},e.prototype.includes=function(t){return this.queue.includes(t)||this.future.includes(t)||!!this.queue.find(function(n){return n.id===t.id})||!!this.future.find(function(n){return n.id===t.id})},e.prototype.pop=function(){return this.queue.shift()},Object.defineProperty(e.prototype,"length",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"todo",{get:function(){return this.queue.length+this.future.length},enumerable:!1,configurable:!0}),e}(w1),Dv=256,Lm=[],lm;for(;Dv--;)Lm[Dv]=(Dv+256).toString(16).substring(1);function x1(){var r=0,e,t="";if(!lm||Dv+16>256){for(lm=Array(r=256);r--;)lm[r]=256*Math.random()|0;r=Dv=0}for(;r<16;r++)e=lm[Dv+r],r==6?t+=Lm[e&15|64]:r==8?t+=Lm[e&63|128]:t+=Lm[e],r&1&&r>1&&r<11&&(t+="-");return Dv++,t}var zL=function(){function r(){this._logs=[]}return r.prototype.log=function(e,t,n){var i=new Date;this._logs.push({level:e,message:t,time:i,extras:n})},Object.defineProperty(r.prototype,"logs",{get:function(){return this._logs},enumerable:!1,configurable:!0}),r.prototype.flush=function(){if(this.logs.length>1){var e=this._logs.reduce(function(t,n){var i,a,o,s=Mt(Mt({},n),{json:JSON.stringify(n.extras,null," "),extras:n.extras});delete s.time;var u=(o=(a=n.time)===null||a===void 0?void 0:a.toISOString())!==null&&o!==void 0?o:"";return t[u]&&(u="".concat(u,"-").concat(Math.random())),Mt(Mt({},t),(i={},i[u]=s,i))},{});console.table&&console.table(e)}else this.logs.forEach(function(t){var n=t.level,i=t.message,a=t.extras;n==="info"||n==="debug"||console[n](i,a??"")});this._logs=[]},r}(),GL=function(r){var e={gauge:"g",counter:"c"};return e[r]},S2=function(){function r(){this.metrics=[]}return r.prototype.increment=function(e,t,n){t===void 0&&(t=1),this.metrics.push({metric:e,value:t,tags:n??[],type:"counter",timestamp:Date.now()})},r.prototype.gauge=function(e,t,n){this.metrics.push({metric:e,value:t,tags:n??[],type:"gauge",timestamp:Date.now()})},r.prototype.flush=function(){var e=this.metrics.map(function(t){return Mt(Mt({},t),{tags:t.tags.join(",")})});console.table&&console.table(e),this.metrics=[]},r.prototype.serialize=function(){return this.metrics.map(function(e){return{m:e.metric,v:e.value,t:e.tags,k:GL(e.type),e:e.timestamp}})},r}(),VL=function(r){Ws(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.gauge=function(){},e.prototype.increment=function(){},e.prototype.flush=function(){},e.prototype.serialize=function(){return[]},e}(S2),ig=function(){function r(e){var t,n,i;this.retry=(t=e.retry)!==null&&t!==void 0?t:!0,this.type=(n=e.type)!==null&&n!==void 0?n:"plugin Error",this.reason=(i=e.reason)!==null&&i!==void 0?i:""}return r}(),Jm=function(){function r(e,t,n,i){t===void 0&&(t=x1()),n===void 0&&(n=new VL),i===void 0&&(i=new zL),this.attempts=0,this.event=e,this._id=t,this.logger=i,this.stats=n}return r.system=function(){},r.prototype.isSame=function(e){return e.id===this.id},r.prototype.cancel=function(e){throw e||new ig({reason:"Context Cancel"})},r.prototype.log=function(e,t,n){this.logger.log(e,t,n)},Object.defineProperty(r.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),r.prototype.updateEvent=function(e,t){var n;if(e.split(".")[0]==="integrations"){var i=e.split(".")[1];if(((n=this.event.integrations)===null||n===void 0?void 0:n[i])===!1)return this.event}return Uw(this.event,e,t),this.event},r.prototype.failedDelivery=function(){return this._failedDelivery},r.prototype.setFailedDelivery=function(e){this._failedDelivery=e},r.prototype.logs=function(){return this.logger.logs},r.prototype.flush=function(){this.logger.flush(),this.stats.flush()},r.prototype.toJSON=function(){return{id:this._id,event:this.event,logs:this.logger.logs,metrics:this.stats.metrics}},r}();function qL(r,e){var t={};return r.forEach(function(n){var i,a=void 0;{var o=n[e];a=typeof o!="string"?JSON.stringify(o):o}a!==void 0&&(t[a]=jo(jo([],(i=t[a])!==null&&i!==void 0?i:[],!0),[n],!1))}),t}var WL=function(r){return typeof r=="object"&&r!==null&&"then"in r&&typeof r.then=="function"},HL=function(){var r,e,t=0;return{done:function(){return r},run:function(n){var i=n();return WL(i)&&(++t===1&&(r=new Promise(function(a){return e=a})),i.finally(function(){return--t===0&&e()})),i}}};function YL(r){return fr(this,void 0,void 0,function(){var e;return hr(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,r()];case 1:return[2,t.sent()];case 2:return e=t.sent(),[2,Promise.reject(e)];case 3:return[2]}})})}function iy(r,e){r.log("debug","plugin",{plugin:e.name});var t=new Date().getTime(),n=e[r.event.type];if(n===void 0)return Promise.resolve(r);var i=YL(function(){return n.apply(e,[r])}).then(function(a){var o=new Date().getTime()-t;return a.stats.gauge("plugin_time",o,["plugin:".concat(e.name)]),a}).catch(function(a){if(a instanceof ig&&a.type==="middleware_cancellation")throw a;return a instanceof ig?(r.log("warn",a.type,{plugin:e.name,error:a}),a):(r.log("error","plugin Error",{plugin:e.name,error:a}),r.stats.increment("plugin_error",1,["plugin:".concat(e.name)]),a)});return i}function XL(r,e){return iy(r,e).then(function(t){if(t instanceof Jm)return t;r.log("debug","Context canceled"),r.stats.increment("context_canceled"),r.cancel(t)})}var KL=function(r){Ws(e,r);function e(t){var n=r.call(this)||this;return n.criticalTasks=HL(),n.plugins=[],n.failedInitializations=[],n.flushing=!1,n.queue=t,n.queue.on(O2,function(){n.scheduleFlush(0)}),n}return e.prototype.register=function(t,n,i){return fr(this,void 0,void 0,function(){var a,o,s=this;return hr(this,function(u){switch(u.label){case 0:return this.plugins.push(n),a=function(l){s.failedInitializations.push(n.name),s.emit("initialization_failure",n),console.warn(n.name,l),t.log("warn","Failed to load destination",{plugin:n.name,error:l}),s.plugins=s.plugins.filter(function(c){return c!==n})},n.type==="destination"&&n.name!=="Segment.io"?(n.load(t,i).catch(a),[3,4]):[3,1];case 1:return u.trys.push([1,3,,4]),[4,n.load(t,i)];case 2:return u.sent(),[3,4];case 3:return o=u.sent(),a(o),[3,4];case 4:return[2]}})})},e.prototype.deregister=function(t,n,i){return fr(this,void 0,void 0,function(){var a;return hr(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),n.unload?[4,Promise.resolve(n.unload(t,i))]:[3,2];case 1:o.sent(),o.label=2;case 2:return this.plugins=this.plugins.filter(function(s){return s.name!==n.name}),[3,4];case 3:return a=o.sent(),t.log("warn","Failed to unload destination",{plugin:n.name,error:a}),[3,4];case 4:return[2]}})})},e.prototype.dispatch=function(t){return fr(this,void 0,void 0,function(){var n;return hr(this,function(i){return t.log("debug","Dispatching"),t.stats.increment("message_dispatched"),this.queue.push(t),n=this.subscribeToDelivery(t),this.scheduleFlush(0),[2,n]})})},e.prototype.subscribeToDelivery=function(t){return fr(this,void 0,void 0,function(){var n=this;return hr(this,function(i){return[2,new Promise(function(a){var o=function(s,u){s.isSame(t)&&(n.off("flush",o),a(s))};n.on("flush",o)})]})})},e.prototype.dispatchSingle=function(t){return fr(this,void 0,void 0,function(){var n=this;return hr(this,function(i){return t.log("debug","Dispatching"),t.stats.increment("message_dispatched"),this.queue.updateAttempts(t),t.attempts=1,[2,this.deliver(t).catch(function(a){var o=n.enqueuRetry(a,t);return o?n.subscribeToDelivery(t):(t.setFailedDelivery({reason:a}),t)})]})})},e.prototype.isEmpty=function(){return this.queue.length===0},e.prototype.scheduleFlush=function(t){var n=this;t===void 0&&(t=500),!this.flushing&&(this.flushing=!0,setTimeout(function(){n.flush().then(function(){setTimeout(function(){n.flushing=!1,n.queue.length&&n.scheduleFlush(0)},0)})},t))},e.prototype.deliver=function(t){return fr(this,void 0,void 0,function(){var n,i,a,o;return hr(this,function(s){switch(s.label){case 0:return[4,this.criticalTasks.done()];case 1:s.sent(),n=Date.now(),s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this.flushOne(t)];case 3:return t=s.sent(),i=Date.now()-n,this.emit("delivery_success",t),t.stats.gauge("delivered",i),t.log("debug","Delivered",t.event),[2,t];case 4:throw a=s.sent(),o=a,t.log("error","Failed to deliver",o),this.emit("delivery_failure",t,o),t.stats.increment("delivery_failed"),a;case 5:return[2]}})})},e.prototype.enqueuRetry=function(t,n){var i=!(t instanceof ig)||t.retry;return i?this.queue.pushWithBackoff(n):!1},e.prototype.flush=function(){return fr(this,void 0,void 0,function(){var t,n,i;return hr(this,function(a){switch(a.label){case 0:if(this.queue.length===0)return[2,[]];if(t=this.queue.pop(),!t)return[2,[]];t.attempts=this.queue.getAttempts(t),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.deliver(t)];case 2:return t=a.sent(),this.emit("flush",t,!0),[3,4];case 3:return n=a.sent(),i=this.enqueuRetry(n,t),i||(t.setFailedDelivery({reason:n}),this.emit("flush",t,!1)),[2,[]];case 4:return[2,[t]]}})})},e.prototype.isReady=function(){return!0},e.prototype.availableExtensions=function(t){var n=this.plugins.filter(function(d){var v,y,w;if(d.type!=="destination"&&d.name!=="Segment.io")return!0;var b=void 0;return(v=d.alternativeNames)===null||v===void 0||v.forEach(function(p){t[p]!==void 0&&(b=t[p])}),(w=(y=t[d.name])!==null&&y!==void 0?y:b)!==null&&w!==void 0?w:(d.name==="Segment.io"?!0:t.All)!==!1}),i=qL(n,"type"),a=i.before,o=a===void 0?[]:a,s=i.enrichment,u=s===void 0?[]:s,l=i.destination,c=l===void 0?[]:l,f=i.after,h=f===void 0?[]:f;return{before:o,enrichment:u,destinations:c,after:h}},e.prototype.flushOne=function(t){var n,i;return fr(this,void 0,void 0,function(){var a,o,s,u,l,c,v,f,h,d,v,y,w,b,p;return hr(this,function(m){switch(m.label){case 0:if(!this.isReady())throw new Error("Not ready");t.attempts>1&&this.emit("delivery_retry",t),a=this.availableExtensions((n=t.event.integrations)!==null&&n!==void 0?n:{}),o=a.before,s=a.enrichment,u=0,l=o,m.label=1;case 1:return u<l.length?(c=l[u],[4,XL(t,c)]):[3,4];case 2:v=m.sent(),v instanceof Jm&&(t=v),this.emit("message_enriched",t,c),m.label=3;case 3:return u++,[3,1];case 4:f=0,h=s,m.label=5;case 5:return f<h.length?(d=h[f],[4,iy(t,d)]):[3,8];case 6:v=m.sent(),v instanceof Jm&&(t=v),this.emit("message_enriched",t,d),m.label=7;case 7:return f++,[3,5];case 8:return y=this.availableExtensions((i=t.event.integrations)!==null&&i!==void 0?i:{}),w=y.destinations,b=y.after,[4,new Promise(function(x,T){setTimeout(function(){var P=w.map(function(C){return iy(t,C)});Promise.all(P).then(x).catch(T)},0)})];case 9:return m.sent(),t.stats.increment("message_delivered"),this.emit("message_delivered",t),p=b.map(function(x){return iy(t,x)}),[4,Promise.all(p)];case 10:return m.sent(),[2,t]}})})},e}(w1),$L=function(r,e){var t=Date.now()-r;return Math.max((e??300)-t,0)};function ZL(r,e,t,n){return fr(this,void 0,void 0,function(){var i,a;return hr(this,function(o){switch(o.label){case 0:return t.emit("dispatch_start",r),i=Date.now(),e.isEmpty()?[4,e.dispatchSingle(r)]:[3,2];case 1:return a=o.sent(),[3,4];case 2:return[4,e.dispatch(r)];case 3:a=o.sent(),o.label=4;case 4:return n!=null&&n.callback?[4,FL(a,n.callback,$L(i,n.timeout))]:[3,6];case 5:a=o.sent(),o.label=6;case 6:return n!=null&&n.debug&&a.flush(),[2,a]}})})}function QL(r,e,t,n){var i,a=[r,e,t,n],o=Zl(r)?r.event:r;if(!o||!hd(o))throw new Error("Event missing");var s=Zl(r)?(i=r.properties)!==null&&i!==void 0?i:{}:Zl(e)?e:{},u={};Qp(t)||(u=t??{}),Zl(r)&&!Qp(e)&&(u=e??{});var l=a.find(Qp);return[o,s,u,l]}function qO(r,e,t,n,i){var a,o,s=null,u=null,l=[r,e,t,n,i],c=l.filter(hd);c.length===1?hd(l[1])?(u=l[1],s=null):(u=c[0],s=null):c.length===2&&(typeof l[0]=="string"&&(s=l[0]),typeof l[1]=="string"&&(u=l[1]));var f=l.find(Qp),h=l.filter(Zl);return h.length===1?Zl(l[2])?(o={},a=l[2]):Zl(l[3])?(a={},o=l[3]):(a=h[0],o={}):h.length===2&&(a=h[0],o=h[1]),[s,u,a??(a={}),o??(o={}),f]}var WO=function(r){return function(){for(var e,t,n,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];for(var o={},s=["callback","options","traits","id"],u=0,l=i;u<l.length;u++){var c=l[u],f=s.pop();if(f==="id"){if(hd(c)||zw(c)){o.id=c.toString();continue}if(c==null)continue;f=s.pop()}if((f==="traits"||f==="options")&&(c==null||Zl(c))&&(o[f]=c),Qp(c)){o.callback=c;break}}return[(e=o.id)!==null&&e!==void 0?e:r.id(),(t=o.traits)!==null&&t!==void 0?t:{},(n=o.options)!==null&&n!==void 0?n:{},o.callback]}};function JL(r,e,t,n){zw(r)&&(r=r.toString()),zw(e)&&(e=e.toString());var i=[r,e,t,n],a=i.filter(hd),o=a[0],s=o===void 0?r:o,u=a[1],l=u===void 0?null:u,c=i.filter(Zl)[0],f=c===void 0?{}:c,h=i.find(Qp);return[s,l,f,h]}function O1(){return typeof window<"u"}function jj(){return!O1()}function eN(){return O1()?window.navigator.onLine:!0}function py(){return!eN()}function tN(r,e){return e=e||{},new Promise(function(t,n){var i=new XMLHttpRequest,a=[],o=[],s={},u=function(){return{ok:(i.status/100|0)==2,statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:u,headers:{keys:function(){return a},entries:function(){return o},get:function(c){return s[c.toLowerCase()]},has:function(c){return c.toLowerCase()in s}}}};for(var l in i.open(e.method||"get",r,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(c,f,h){a.push(f=f.toLowerCase()),o.push([f,h]),s[f]=s[f]?s[f]+","+h:h}),t(u())},i.onerror=n,i.withCredentials=e.credentials=="include",e.headers)i.setRequestHeader(l,e.headers[l]);i.send(e.body||null)})}var S1=function(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:null},w0=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=S1();return(t&&t.fetch||tN).apply(void 0,r)},E0="1.81.0",T2="api.segment.io/v1",rN=function(r,e,t){var n=e.reduce(function(i,a){var o=a.split(":"),s=o[0],u=o[1];return i[s]=u,i},{});return{type:"Counter",metric:r,value:1,tags:Mt(Mt({},n),{library:"analytics.js",library_version:"npm:next-".concat(E0)})}};function sw(r){console.error("Error sending segment performance metrics",r)}var nN=function(){function r(e){var t=this,n,i,a,o,s;if(this.host=(n=e==null?void 0:e.host)!==null&&n!==void 0?n:T2,this.sampleRate=(i=e==null?void 0:e.sampleRate)!==null&&i!==void 0?i:1,this.flushTimer=(a=e==null?void 0:e.flushTimer)!==null&&a!==void 0?a:30*1e3,this.maxQueueSize=(o=e==null?void 0:e.maxQueueSize)!==null&&o!==void 0?o:20,this.protocol=(s=e==null?void 0:e.protocol)!==null&&s!==void 0?s:"https",this.queue=[],this.sampleRate>0){var u=!1,l=function(){u||(u=!0,t.flush().catch(sw),u=!1,setTimeout(l,t.flushTimer))};l()}}return r.prototype.increment=function(e,t){if(e.includes("analytics_js.")&&t.length!==0&&!(Math.random()>this.sampleRate)&&!(this.queue.length>=this.maxQueueSize)){var n=rN(e,t);this.queue.push(n),e.includes("error")&&this.flush().catch(sw)}},r.prototype.flush=function(){return fr(this,void 0,void 0,function(){var e=this;return hr(this,function(t){switch(t.label){case 0:return this.queue.length<=0?[2]:[4,this.send().catch(function(n){sw(n),e.sampleRate=0})];case 1:return t.sent(),[2]}})})},r.prototype.send=function(){return fr(this,void 0,void 0,function(){var e,t,n;return hr(this,function(i){return e={series:this.queue},this.queue=[],t={"Content-Type":"text/plain"},n="".concat(this.protocol,"://").concat(this.host,"/m"),[2,w0(n,{headers:t,body:JSON.stringify(e),method:"POST"})]})})},r}(),cm,C2=function(r){Ws(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.initRemoteMetrics=function(t){cm=new nN(t)},e.prototype.increment=function(t,n,i){r.prototype.increment.call(this,t,n,i),cm==null||cm.increment(t,i??[])},e}(S2),eh=function(r){Ws(e,r);function e(t,n){return r.call(this,t,n,new C2)||this}return e.system=function(){return new this({type:"track",event:"system"})},e}(Jm);function iN(r){return Object.prototype.toString.call(r).slice(8,-1).toLowerCase()==="object"}var P2="bpc",A2=function(r,e,t,n,i,a){return{__t:P2,c:e,p:n,u:r,s:t,t:i,r:a}},oN=Object.keys(A2("","","","","",""));function aN(r){if(!iN(r)||r.__t!==P2)return!1;for(var e in r)if(!oN.includes(e))return!1;return!0}var sN=function(r,e){return r.indexOf("?")>-1?r:r+e},uN=function(r){var e=r.indexOf("#");return e===-1?r:r.slice(0,e)},lN=function(r){try{return new URL(r).pathname}catch{return r[0]==="/"?r:"/"+r}},R2=function(r){var e=r.c,t=r.p,n=r.s,i=r.u,a=r.r,o=r.t,s=e?lN(e):t,u=e?sN(e,n):uN(i);return{path:s,referrer:a,search:n,title:o,url:u}},I2=function(){var r=document.querySelector("link[rel='canonical']");return A2(location.href,r&&r.getAttribute("href")||void 0,location.search,location.pathname,document.title,document.referrer)},cN=function(){return R2(I2())};function fN(r,e){return Object.assign.apply(Object,jo([{}],e.map(function(t){var n;if(r&&Object.prototype.hasOwnProperty.call(r,t))return n={},n[t]=r[t],n}),!1))}var Fp=function(r,e){e===void 0&&(e=cN());var t=r.context,n;r.type==="page"&&(n=r.properties&&fN(r.properties,Object.keys(e)),r.properties=Mt(Mt(Mt({},e),r.properties),r.name?{name:r.name}:{})),t.page=Mt(Mt(Mt({},e),n),t.page)},hN=function(r){Ws(e,r);function e(t){var n=r.call(this,{createMessageId:function(){return"ajs-next-".concat(Date.now(),"-").concat(x1())},onEventMethodCall:function(i){var a=i.options;n.maybeUpdateAnonId(a)},onFinishedEvent:function(i){return n.addIdentity(i),i}})||this;return n.user=t,n}return e.prototype.maybeUpdateAnonId=function(t){t!=null&&t.anonymousId&&this.user.anonymousId(t.anonymousId)},e.prototype.addIdentity=function(t){this.user.id()&&(t.userId=this.user.id()),this.user.anonymousId()&&(t.anonymousId=this.user.anonymousId())},e.prototype.track=function(t,n,i,a,o){var s=r.prototype.track.call(this,t,n,i,a);return Fp(s,o),s},e.prototype.page=function(t,n,i,a,o,s){var u=r.prototype.page.call(this,t,n,i,a,o);return Fp(u,s),u},e.prototype.screen=function(t,n,i,a,o,s){var u=r.prototype.screen.call(this,t,n,i,a,o);return Fp(u,s),u},e.prototype.identify=function(t,n,i,a,o){var s=r.prototype.identify.call(this,t,n,i,a);return Fp(s,o),s},e.prototype.group=function(t,n,i,a,o){var s=r.prototype.group.call(this,t,n,i,a);return Fp(s,o),s},e.prototype.alias=function(t,n,i,a,o){var s=r.prototype.alias.call(this,t,n,i,a);return Fp(s,o),s},e}(NL),dN=function(r){return"addMiddleware"in r&&r.type==="destination"},Xc={getItem:function(){},setItem:function(){},removeItem:function(){}};try{Xc=O1()&&window.localStorage?window.localStorage:Xc}catch(r){console.warn("Unable to access localStorage",r)}function k2(r){var e=Xc.getItem(r);return(e?JSON.parse(e):[]).map(function(t){return new eh(t.event,t.id)})}function vN(r,e){var t=k2(r),n=jo(jo([],e,!0),t,!0),i=n.reduce(function(a,o){var s;return Mt(Mt({},a),(s={},s[o.id]=o,s))},{});Xc.setItem(r,JSON.stringify(Object.values(i)))}function D2(r){var e=Xc.getItem(r);return e?JSON.parse(e):{}}function pN(r,e){var t=D2(r);Xc.setItem(r,JSON.stringify(Mt(Mt({},t),e)))}function HO(r){Xc.removeItem(r)}var gN=function(){return new Date().getTime()};function Gw(r,e,t){t===void 0&&(t=0);var n=50,i="persisted-queue:v1:".concat(r,":lock"),a=function(l){return new Date().getTime()>l},o=Xc.getItem(i),s=o?JSON.parse(o):null,u=s===null||a(s);if(u){Xc.setItem(i,JSON.stringify(gN()+n)),e(),Xc.removeItem(i);return}!u&&t<3?setTimeout(function(){Gw(r,e,t+1)},n):console.error("Unable to retrieve lock")}var T1=function(r){Ws(e,r);function e(t,n){var i=r.call(this,t,[])||this,a="persisted-queue:v1:".concat(n,":items"),o="persisted-queue:v1:".concat(n,":seen"),s=[],u={};return Gw(n,function(){try{s=k2(a),u=D2(o),HO(a),HO(o),i.queue=jo(jo([],s,!0),i.queue,!0),i.seen=Mt(Mt({},u),i.seen)}catch(l){console.error(l)}}),window.addEventListener("pagehide",function(){if(i.todo>0){var l=jo(jo([],i.queue,!0),i.future,!0);try{Gw(n,function(){vN(a,l),pN(o,i.seen)})}catch(c){console.error(c)}}}),i}return e}(E1),yN=function(r){Ws(e,r);function e(t){return r.call(this,typeof t=="string"?new T1(4,t):t)||this}return e.prototype.flush=function(){return fr(this,void 0,void 0,function(){return hr(this,function(t){return py()?[2,[]]:[2,r.prototype.flush.call(this)]})})},e}(KL);function C1(r){for(var e=r.constructor.prototype,t=0,n=Object.getOwnPropertyNames(e);t<n.length;t++){var i=n[t];if(i!=="constructor"){var a=Object.getOwnPropertyDescriptor(r.constructor.prototype,i);a&&typeof a.value=="function"&&(r[i]=r[i].bind(r))}}return r}/*! js-cookie v3.0.1 | MIT */function fm(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)r[n]=t[n]}return r}var mN={read:function(r){return r[0]==='"'&&(r=r.slice(1,-1)),r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(r){return encodeURIComponent(r).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function Vw(r,e){function t(i,a,o){if(!(typeof document>"u")){o=fm({},e,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var u in o)o[u]&&(s+="; "+u,o[u]!==!0&&(s+="="+o[u].split(";")[0]));return document.cookie=i+"="+r.write(a,i)+s}}function n(i){if(!(typeof document>"u"||arguments.length&&!i)){for(var a=document.cookie?document.cookie.split("; "):[],o={},s=0;s<a.length;s++){var u=a[s].split("="),l=u.slice(1).join("=");try{var c=decodeURIComponent(u[0]);if(o[c]=r.read(l,c),i===c)break}catch{}}return i?o[i]:o}}return Object.create({set:t,get:n,remove:function(i,a){t(i,"",fm({},a,{expires:-1}))},withAttributes:function(i){return Vw(this.converter,fm({},this.attributes,i))},withConverter:function(i){return Vw(fm({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(r)}})}var Qf=Vw(mN,{path:"/"});function bN(r){var e=r.hostname,t=e.split("."),n=t[t.length-1],i=[];if(t.length===4&&parseInt(n,10)>0||t.length<=1)return i;for(var a=t.length-2;a>=0;--a)i.push(t.slice(a).join("."));return i}function _N(r){try{return new URL(r)}catch{return}}function M2(r){var e=_N(r);if(e)for(var t=bN(e),n=0;n<t.length;++n){var i="__tld__",a=t[n],o={domain:"."+a};try{if(Qf.set(i,"1",o),Qf.get(i))return Qf.remove(i,o),a}catch{return}}}var wN=365,L2=function(){function r(e){e===void 0&&(e=r.defaults),this.options=Mt(Mt({},r.defaults),e)}return Object.defineProperty(r,"defaults",{get:function(){return{maxage:wN,domain:M2(window.location.href),path:"/",sameSite:"Lax"}},enumerable:!1,configurable:!0}),r.prototype.opts=function(){return{sameSite:this.options.sameSite,expires:this.options.maxage,domain:this.options.domain,path:this.options.path,secure:this.options.secure}},r.prototype.get=function(e){var t;try{var n=Qf.get(e);if(n==null)return null;try{return(t=JSON.parse(n))!==null&&t!==void 0?t:null}catch{return n??null}}catch{return null}},r.prototype.set=function(e,t){typeof t=="string"?Qf.set(e,t,this.opts()):t===null?Qf.remove(e,this.opts()):Qf.set(e,JSON.stringify(t),this.opts())},r.prototype.remove=function(e){return Qf.remove(e,this.opts())},r}(),EN=function(){function r(){}return r.prototype.localStorageWarning=function(e,t){console.warn("Unable to access ".concat(e,", localStorage may be ").concat(t))},r.prototype.get=function(e){var t;try{var n=localStorage.getItem(e);if(n===null)return null;try{return(t=JSON.parse(n))!==null&&t!==void 0?t:null}catch{return n??null}}catch{return this.localStorageWarning(e,"unavailable"),null}},r.prototype.set=function(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch{this.localStorageWarning(e,"full")}},r.prototype.remove=function(e){try{return localStorage.removeItem(e)}catch{this.localStorageWarning(e,"unavailable")}},r}(),P1=function(){function r(){this.cache={}}return r.prototype.get=function(e){var t;return(t=this.cache[e])!==null&&t!==void 0?t:null},r.prototype.set=function(e,t){this.cache[e]=t},r.prototype.remove=function(e){delete this.cache[e]},r}(),zs={Cookie:"cookie",LocalStorage:"localStorage",Memory:"memory"};function N2(r){return r&&r.stores&&Array.isArray(r.stores)&&r.stores.every(function(e){return Object.values(zs).includes(e)})}function xN(r){return typeof r=="object"&&r.name!==void 0}var uw=function(r,e,t,n){console.warn("".concat(r.constructor.name,": Can't ").concat(e,' key "').concat(t,'" | Err: ').concat(n))},Mv=function(){function r(e){this.stores=e}return r.prototype.get=function(e){for(var t=null,n=0,i=this.stores;n<i.length;n++){var a=i[n];try{if(t=a.get(e),t!=null)return t}catch(o){uw(a,"get",e,o)}}return null},r.prototype.set=function(e,t){this.stores.forEach(function(n){try{n.set(e,t)}catch(i){uw(n,"set",e,i)}})},r.prototype.clear=function(e){this.stores.forEach(function(t){try{t.remove(e)}catch(n){uw(t,"remove",e,n)}})},r.prototype.getAndSync=function(e){var t=this.get(e),n=typeof t=="number"?t.toString():t;return this.set(e,n),n},r}();function qw(r){var e=r.map(function(t){var n,i;switch(xN(t)?(n=t.name,i=t.settings):n=t,n){case zs.Cookie:return new L2(i);case zs.LocalStorage:return new EN;case zs.Memory:return new P1;default:throw new Error("Unknown Store Type: ".concat(t))}});return e}function j2(r,e){return r.map(function(t){return e&&t===zs.Cookie?{name:t,settings:e}:t})}var yv={persist:!0,cookie:{key:"ajs_user_id",oldKey:"ajs_user"},localStorage:{key:"ajs_user_traits"}},B2=function(){function r(e,t){e===void 0&&(e=yv);var n=this,i,a,o,s;this.options={},this.id=function(l){if(n.options.disable)return null;var c=n.identityStore.getAndSync(n.idKey);if(l!==void 0){n.identityStore.set(n.idKey,l);var f=l!==c&&c!==null&&l!==null;f&&n.anonymousId(null)}var h=n.identityStore.getAndSync(n.idKey);if(h)return h;var d=n.legacyUserStore.get(yv.cookie.oldKey);return d?typeof d=="object"?d.id:d:null},this.anonymousId=function(l){var c,f;if(n.options.disable)return null;if(l===void 0){var h=(c=n.identityStore.getAndSync(n.anonKey))!==null&&c!==void 0?c:(f=n.legacySIO())===null||f===void 0?void 0:f[0];if(h)return h}return l===null?(n.identityStore.set(n.anonKey,null),n.identityStore.getAndSync(n.anonKey)):(n.identityStore.set(n.anonKey,l??x1()),n.identityStore.getAndSync(n.anonKey))},this.traits=function(l){var c;if(!n.options.disable)return l===null&&(l={}),l&&n.traitsStore.set(n.traitsKey,l??{}),(c=n.traitsStore.get(n.traitsKey))!==null&&c!==void 0?c:{}},this.options=Mt(Mt({},yv),e),this.cookieOptions=t,this.idKey=(a=(i=e.cookie)===null||i===void 0?void 0:i.key)!==null&&a!==void 0?a:yv.cookie.key,this.traitsKey=(s=(o=e.localStorage)===null||o===void 0?void 0:o.key)!==null&&s!==void 0?s:yv.localStorage.key,this.anonKey="ajs_anonymous_id",this.identityStore=this.createStorage(this.options,t),this.legacyUserStore=this.createStorage(this.options,t,function(l){return l===zs.Cookie}),this.traitsStore=this.createStorage(this.options,t,function(l){return l!==zs.Cookie});var u=this.legacyUserStore.get(yv.cookie.oldKey);u&&typeof u=="object"&&(u.id&&this.id(u.id),u.traits&&this.traits(u.traits)),C1(this)}return r.prototype.legacySIO=function(){var e=this.legacyUserStore.get("_sio");if(!e)return null;var t=e.split("----"),n=t[0],i=t[1];return[n,i]},r.prototype.identify=function(e,t){if(!this.options.disable){t=t??{};var n=this.id();(n===null||n===e)&&(t=Mt(Mt({},this.traits()),t)),e&&this.id(e),this.traits(t)}},r.prototype.logout=function(){this.anonymousId(null),this.id(null),this.traits({})},r.prototype.reset=function(){this.logout(),this.identityStore.clear(this.idKey),this.identityStore.clear(this.anonKey),this.traitsStore.clear(this.traitsKey)},r.prototype.load=function(){return new r(this.options,this.cookieOptions)},r.prototype.save=function(){return!0},r.prototype.createStorage=function(e,t,n){var i=[zs.LocalStorage,zs.Cookie,zs.Memory];return e.disable?new Mv([]):e.persist?(e.storage!==void 0&&e.storage!==null&&N2(e.storage)&&(i=e.storage.stores),e.localStorageFallbackDisabled&&(i=i.filter(function(a){return a!==zs.LocalStorage})),n&&(i=i.filter(n)),new Mv(qw(j2(i,t)))):new Mv([new P1])},r.defaults=yv,r}(),YO={persist:!0,cookie:{key:"ajs_group_id"},localStorage:{key:"ajs_group_properties"}},ON=function(r){Ws(e,r);function e(t,n){t===void 0&&(t=YO);var i=r.call(this,Mt(Mt({},YO),t),n)||this;return i.anonymousId=function(a){},C1(i),i}return e}(B2),A1="analytics";function F2(){return window[A1]}function SN(r){A1=r}function TN(r){window[A1]=r}var CN=function(r){return typeof r=="object"&&r!==null&&"then"in r&&typeof r.then=="function"},U2=function(r,e,t){t.getAndRemove(r).forEach(function(n){x0(e,n).catch(console.error)})},PN=function(r,e){return fr(void 0,void 0,void 0,function(){var t,n,i;return hr(this,function(a){switch(a.label){case 0:t=0,n=e.getAndRemove("addSourceMiddleware"),a.label=1;case 1:return t<n.length?(i=n[t],[4,x0(r,i).catch(console.error)]):[3,4];case 2:a.sent(),a.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},AN=function(r,e){return fr(void 0,void 0,void 0,function(){var t,n,i;return hr(this,function(a){switch(a.label){case 0:t=0,n=e.getAndRemove("register"),a.label=1;case 1:return t<n.length?(i=n[t],[4,x0(r,i).catch(console.error)]):[3,4];case 2:a.sent(),a.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},RN=U2.bind(void 0,"on"),IN=U2.bind(void 0,"setAnonymousId"),kN=function(r,e){Object.keys(e.calls).forEach(function(t){e.getAndRemove(t).forEach(function(n){setTimeout(function(){x0(r,n).catch(console.error)},0)})})},Up=function(r){if(z2(r)){var e=r.pop();return R2(e)}},z2=function(r){var e=r[r.length-1];return aN(e)},Ww=function(){function r(e,t,n,i){n===void 0&&(n=function(){}),i===void 0&&(i=console.error),this.method=e,this.resolve=n,this.reject=i,this.called=!1,this.args=t}return r}(),DN=function(){function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._callMap={},this.add.apply(this,e)}return Object.defineProperty(r.prototype,"calls",{get:function(){return this._pushSnippetWindowBuffer(),this._callMap},set:function(e){this._callMap=e},enumerable:!1,configurable:!0}),r.prototype.get=function(e){var t;return(t=this.calls[e])!==null&&t!==void 0?t:[]},r.prototype.getAndRemove=function(e){var t=this.get(e);return this.calls[e]=[],t},r.prototype.add=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.forEach(function(i){var a=["track","screen","alias","group","page","identify"];a.includes(i.method)&&!z2(i.args)&&(i.args=jo(jo([],i.args,!0),[I2()],!1)),e.calls[i.method]?e.calls[i.method].push(i):e.calls[i.method]=[i]})},r.prototype.clear=function(){this._pushSnippetWindowBuffer(),this.calls={}},r.prototype.toArray=function(){var e;return(e=[]).concat.apply(e,Object.values(this.calls))},r.prototype._pushSnippetWindowBuffer=function(){},r}();function x0(r,e){return fr(this,void 0,void 0,function(){var t,n;return hr(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),e.called?[2,void 0]:(e.called=!0,t=r[e.method].apply(r,e.args),CN(t)?[4,t]:[3,2]);case 1:i.sent(),i.label=2;case 2:return e.resolve(t),[3,4];case 3:return n=i.sent(),e.reject(n),[3,4];case 4:return[2]}})})}var MN=function(){function r(e){var t=this;this.trackSubmit=this._createMethod("trackSubmit"),this.trackClick=this._createMethod("trackClick"),this.trackLink=this._createMethod("trackLink"),this.pageView=this._createMethod("pageview"),this.identify=this._createMethod("identify"),this.reset=this._createMethod("reset"),this.group=this._createMethod("group"),this.track=this._createMethod("track"),this.ready=this._createMethod("ready"),this.alias=this._createMethod("alias"),this.debug=this._createChainableMethod("debug"),this.page=this._createMethod("page"),this.once=this._createChainableMethod("once"),this.off=this._createChainableMethod("off"),this.on=this._createChainableMethod("on"),this.addSourceMiddleware=this._createMethod("addSourceMiddleware"),this.setAnonymousId=this._createMethod("setAnonymousId"),this.addDestinationMiddleware=this._createMethod("addDestinationMiddleware"),this.screen=this._createMethod("screen"),this.register=this._createMethod("register"),this.deregister=this._createMethod("deregister"),this.user=this._createMethod("user"),this.VERSION=E0,this._preInitBuffer=new DN,this._promise=e(this._preInitBuffer),this._promise.then(function(n){var i=n[0],a=n[1];t.instance=i,t.ctx=a}).catch(function(){})}return r.prototype.then=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._promise).then.apply(e,t)},r.prototype.catch=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._promise).catch.apply(e,t)},r.prototype.finally=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._promise).finally.apply(e,t)},r.prototype._createMethod=function(e){var t=this;return function(){for(var n,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];if(t.instance){var o=(n=t.instance)[e].apply(n,i);return Promise.resolve(o)}return new Promise(function(s,u){t._preInitBuffer.add(new Ww(e,i,s,u))})}},r.prototype._createChainableMethod=function(e){var t=this;return function(){for(var n,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return t.instance?((n=t.instance)[e].apply(n,i),t):(t._preInitBuffer.add(new Ww(e,i)),t)}},r}(),qg={},mv={},zp={},lw={exports:{}},XO;function O0(){return XO||(XO=1,function(r){r.exports=e(t),r.exports.find=r.exports,r.exports.replace=function(s,u,l,c){return e(i).call(this,s,u,l,c),s},r.exports.del=function(s,u,l){return e(n).call(this,s,u,null,l),s};function e(s){return function(u,l,c,f){var h=f&&o(f.normalizer)?f.normalizer:a;l=h(l);for(var d,v=!1;!v;)y();function y(){for(d in u){var w=h(d);if(l.indexOf(w)===0){var b=l.substr(w.length);if(b.charAt(0)==="."||b.length===0){l=b.substr(1);var p=u[d];if(p==null){v=!0;return}if(!l.length){v=!0;return}u=p;return}}}d=void 0,v=!0}if(d)return u==null?u:s(u,d,c)}}function t(s,u){if(s.hasOwnProperty(u))return s[u]}function n(s,u){return s.hasOwnProperty(u)&&delete s[u],s}function i(s,u,l){return s.hasOwnProperty(u)&&(s[u]=l),s}function a(s){return s.replace(/[^a-zA-Z0-9\.]+/g,"").toLowerCase()}function o(s){return typeof s=="function"}}(lw)),lw.exports}var KO;function LN(){if(KO)return zp;KO=1;var r=zp&&zp.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(zp,"__esModule",{value:!0});var e=r(O0());function t(i,a){return function(){var o=this.traits(),s=this.properties?this.properties():{};return e.default(o,"address."+i)||e.default(o,i)||(a?e.default(o,"address."+a):null)||(a?e.default(o,a):null)||e.default(s,"address."+i)||e.default(s,i)||(a?e.default(s,"address."+a):null)||(a?e.default(s,a):null)}}function n(i){i.zip=t("postalCode","zip"),i.country=t("country"),i.street=t("street"),i.state=t("state"),i.city=t("city"),i.region=t("region")}return zp.default=n,zp}var Wg={},$O;function NN(){if($O)return Wg;$O=1,Object.defineProperty(Wg,"__esModule",{value:!0}),Wg.clone=void 0;function r(e){if(typeof e!="object")return e;if(Object.prototype.toString.call(e)==="[object Object]"){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=r(e[n]));return t}else return Array.isArray(e)?e.map(r):e}return Wg.clone=r,Wg}var hm={},ZO;function jN(){if(ZO)return hm;ZO=1,Object.defineProperty(hm,"__esModule",{value:!0});var r={Salesforce:!0};function e(t){return!r[t]}return hm.default=e,hm}var dm={},QO;function G2(){if(QO)return dm;QO=1;var r=/^(\d{4})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:([ T])(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;return dm.parse=function(e){var t=[1,5,6,7,11,12],n=r.exec(e),i=0;if(!n)return new Date(e);for(var a=0,o;o=t[a];a++)n[o]=parseInt(n[o],10)||0;n[2]=parseInt(n[2],10)||1,n[3]=parseInt(n[3],10)||1,n[2]--,n[8]=n[8]?(n[8]+"00").substring(0,3):0,n[4]===" "?i=new Date().getTimezoneOffset():n[9]!=="Z"&&n[10]&&(i=n[11]*60+n[12],n[10]==="+"&&(i=0-i));var s=Date.UTC(n[1],n[2],n[3],n[5],n[6]+i,n[7],n[8]);return new Date(s)},dm.is=function(e,t){return typeof e!="string"||t&&/^\d{4}-\d{2}-\d{2}/.test(e)===!1?!1:r.test(e)},dm}var vm={},JO;function BN(){if(JO)return vm;JO=1;var r=/\d{13}/;return vm.is=function(e){return r.test(e)},vm.parse=function(e){return e=parseInt(e,10),new Date(e)},vm}var pm={},eS;function FN(){if(eS)return pm;eS=1;var r=/\d{10}/;return pm.is=function(e){return r.test(e)},pm.parse=function(e){var t=parseInt(e,10)*1e3;return new Date(t)},pm}var cw,tS;function R1(){if(tS)return cw;tS=1;var r=G2(),e=BN(),t=FN(),n=Object.prototype,i=n.toString;function a(u){return i.call(u)==="[object Date]"}function o(u){return i.call(u)==="[object Number]"}cw=function(l){return a(l)?l:o(l)?new Date(s(l)):r.is(l)?r.parse(l):e.is(l)?e.parse(l):t.is(l)?t.parse(l):new Date(l)};function s(u){return u<315576e5?u*1e3:u}return cw}var fw,rS;function UN(){if(rS)return fw;rS=1;var r=G2();fw=e;function e(i,a){return a===void 0&&(a=!0),i&&typeof i=="object"?t(i,a):Array.isArray(i)?n(i,a):r.is(i,a)?r.parse(i):i}function t(i,a){return Object.keys(i).forEach(function(o){i[o]=e(i[o],a)}),i}function n(i,a){return i.forEach(function(o,s){i[s]=e(o,a)}),i}return fw}var nS;function Vv(){if(nS)return mv;nS=1;var r=mv&&mv.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(mv,"__esModule",{value:!0}),mv.Facade=void 0;var e=r(LN()),t=NN(),n=r(jN()),i=r(R1()),a=r(O0()),o=r(UN());function s(c,f){f=f||{},this.raw=t.clone(c),"clone"in f||(f.clone=!0),f.clone&&(c=t.clone(c)),"traverse"in f||(f.traverse=!0),"timestamp"in c?c.timestamp=i.default(c.timestamp):c.timestamp=new Date,f.traverse&&o.default(c),this.opts=f,this.obj=c}mv.Facade=s;var u=s.prototype;u.proxy=function(c){var f=c.split(".");c=f.shift();var h=this[c]||this.obj[c];return h&&(typeof h=="function"&&(h=h.call(this)||{}),f.length===0?this.opts.clone?l(h):h:(h=a.default(h,f.join(".")),this.opts.clone?l(h):h))},u.field=function(c){var f=this.obj[c];return this.opts.clone?l(f):f},s.proxy=function(c){return function(){return this.proxy(c)}},s.field=function(c){return function(){return this.field(c)}},s.multi=function(c){return function(){var f=this.proxy(c+"s");if(Array.isArray(f))return f;var h=this.proxy(c);return h&&(h=[this.opts.clone?t.clone(h):h]),h||[]}},s.one=function(c){return function(){var f=this.proxy(c);if(f)return f;var h=this.proxy(c+"s");if(Array.isArray(h))return h[0]}},u.json=function(){var c=this.opts.clone?t.clone(this.obj):this.obj;return this.type&&(c.type=this.type()),c},u.rawEvent=function(){return this.raw},u.options=function(c){var f=this.obj.options||this.obj.context||{},h=this.opts.clone?t.clone(f):f;if(!c)return h;if(this.enabled(c)){var d=this.integrations(),v=d[c]||a.default(d,c);return typeof v!="object"&&(v=a.default(this.options(),c)),typeof v=="object"?v:{}}},u.context=u.options,u.enabled=function(c){var f=this.proxy("options.providers.all");typeof f!="boolean"&&(f=this.proxy("options.all")),typeof f!="boolean"&&(f=this.proxy("integrations.all")),typeof f!="boolean"&&(f=!0);var h=f&&n.default(c),d=this.integrations();if(d.providers&&d.providers.hasOwnProperty(c)&&(h=d.providers[c]),d.hasOwnProperty(c)){var v=d[c];typeof v=="boolean"?h=v:h=!0}return!!h},u.integrations=function(){return this.obj.integrations||this.proxy("options.providers")||this.options()},u.active=function(){var c=this.proxy("options.active");return c==null&&(c=!0),c},u.anonymousId=function(){return this.field("anonymousId")||this.field("sessionId")},u.sessionId=u.anonymousId,u.groupId=s.proxy("options.groupId"),u.traits=function(c){var f=this.proxy("options.traits")||{},h=this.userId();c=c||{},h&&(f.id=h);for(var d in c)if(Object.prototype.hasOwnProperty.call(c,d)){var v=this[d]==null?this.proxy("options.traits."+d):this[d]();if(v==null)continue;f[c[d]]=v,delete f[d]}return f},u.library=function(){var c=this.proxy("options.library");return c?typeof c=="string"?{name:c,version:null}:c:{name:"unknown",version:null}},u.device=function(){var c=this.proxy("context.device");(typeof c!="object"||c===null)&&(c={});var f=this.library().name;return c.type||(f.indexOf("ios")>-1&&(c.type="ios"),f.indexOf("android")>-1&&(c.type="android")),c},u.userAgent=s.proxy("context.userAgent"),u.timezone=s.proxy("context.timezone"),u.timestamp=s.field("timestamp"),u.channel=s.field("channel"),u.ip=s.proxy("context.ip"),u.userId=s.field("userId"),e.default(u);function l(c){return t.clone(c)}return mv}var bv={},gm={exports:{}},iS;function qv(){return iS||(iS=1,typeof Object.create=="function"?gm.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:gm.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}),gm.exports}var oS;function zN(){if(oS)return bv;oS=1;var r=bv&&bv.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(bv,"__esModule",{value:!0}),bv.Alias=void 0;var e=r(qv()),t=Vv();function n(i,a){t.Facade.call(this,i,a)}return bv.Alias=n,e.default(n,t.Facade),n.prototype.action=function(){return"alias"},n.prototype.type=n.prototype.action,n.prototype.previousId=function(){return this.field("previousId")||this.field("from")},n.prototype.from=n.prototype.previousId,n.prototype.userId=function(){return this.field("userId")||this.field("to")},n.prototype.to=n.prototype.userId,bv}var _v={},ym={},aS;function S0(){if(aS)return ym;aS=1,Object.defineProperty(ym,"__esModule",{value:!0});var r=/.+\@.+\..+/;function e(t){return r.test(t)}return ym.default=e,ym}var sS;function GN(){if(sS)return _v;sS=1;var r=_v&&_v.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(_v,"__esModule",{value:!0}),_v.Group=void 0;var e=r(qv()),t=r(S0()),n=r(R1()),i=Vv();function a(s,u){i.Facade.call(this,s,u)}_v.Group=a,e.default(a,i.Facade);var o=a.prototype;return o.action=function(){return"group"},o.type=o.action,o.groupId=i.Facade.field("groupId"),o.created=function(){var s=this.proxy("traits.createdAt")||this.proxy("traits.created")||this.proxy("properties.createdAt")||this.proxy("properties.created");if(s)return n.default(s)},o.email=function(){var s=this.proxy("traits.email");if(s)return s;var u=this.groupId();if(t.default(u))return u},o.traits=function(s){var u=this.properties(),l=this.groupId();s=s||{},l&&(u.id=l);for(var c in s)if(Object.prototype.hasOwnProperty.call(s,c)){var f=this[c]==null?this.proxy("traits."+c):this[c]();if(f==null)continue;u[s[c]]=f,delete u[c]}return u},o.name=i.Facade.proxy("traits.name"),o.industry=i.Facade.proxy("traits.industry"),o.employees=i.Facade.proxy("traits.employees"),o.properties=function(){return this.field("traits")||this.field("properties")||{}},_v}var wv={},uS;function V2(){if(uS)return wv;uS=1;var r=wv&&wv.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(wv,"__esModule",{value:!0}),wv.Identify=void 0;var e=Vv(),t=r(O0()),n=r(qv()),i=r(S0()),a=r(R1()),o=function(l){return l.trim()};function s(l,c){e.Facade.call(this,l,c)}wv.Identify=s,n.default(s,e.Facade);var u=s.prototype;return u.action=function(){return"identify"},u.type=u.action,u.traits=function(l){var c=this.field("traits")||{},f=this.userId();l=l||{},f&&(c.id=f);for(var h in l){var d=this[h]==null?this.proxy("traits."+h):this[h]();d!=null&&(c[l[h]]=d,h!==l[h]&&delete c[h])}return c},u.email=function(){var l=this.proxy("traits.email");if(l)return l;var c=this.userId();if(i.default(c))return c},u.created=function(){var l=this.proxy("traits.created")||this.proxy("traits.createdAt");if(l)return a.default(l)},u.companyCreated=function(){var l=this.proxy("traits.company.created")||this.proxy("traits.company.createdAt");if(l)return a.default(l)},u.companyName=function(){return this.proxy("traits.company.name")},u.name=function(){var l=this.proxy("traits.name");if(typeof l=="string")return o(l);var c=this.firstName(),f=this.lastName();if(c&&f)return o(c+" "+f)},u.firstName=function(){var l=this.proxy("traits.firstName");if(typeof l=="string")return o(l);var c=this.proxy("traits.name");if(typeof c=="string")return o(c).split(" ")[0]},u.lastName=function(){var l=this.proxy("traits.lastName");if(typeof l=="string")return o(l);var c=this.proxy("traits.name");if(typeof c=="string"){var f=o(c).indexOf(" ");if(f!==-1)return o(c.substr(f+1))}},u.uid=function(){return this.userId()||this.username()||this.email()},u.description=function(){return this.proxy("traits.description")||this.proxy("traits.background")},u.age=function(){var l=this.birthday(),c=t.default(this.traits(),"age");if(c!=null)return c;if(l instanceof Date){var f=new Date;return f.getFullYear()-l.getFullYear()}},u.avatar=function(){var l=this.traits();return t.default(l,"avatar")||t.default(l,"photoUrl")||t.default(l,"avatarUrl")},u.position=function(){var l=this.traits();return t.default(l,"position")||t.default(l,"jobTitle")},u.username=e.Facade.proxy("traits.username"),u.website=e.Facade.one("traits.website"),u.websites=e.Facade.multi("traits.website"),u.phone=e.Facade.one("traits.phone"),u.phones=e.Facade.multi("traits.phone"),u.address=e.Facade.proxy("traits.address"),u.gender=e.Facade.proxy("traits.gender"),u.birthday=e.Facade.proxy("traits.birthday"),wv}var Ev={},lS;function I1(){if(lS)return Ev;lS=1;var r=Ev&&Ev.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Ev,"__esModule",{value:!0}),Ev.Track=void 0;var e=r(qv()),t=Vv(),n=V2(),i=r(S0()),a=r(O0());function o(l,c){t.Facade.call(this,l,c)}Ev.Track=o,e.default(o,t.Facade);var s=o.prototype;s.action=function(){return"track"},s.type=s.action,s.event=t.Facade.field("event"),s.value=t.Facade.proxy("properties.value"),s.category=t.Facade.proxy("properties.category"),s.id=t.Facade.proxy("properties.id"),s.productId=function(){return this.proxy("properties.product_id")||this.proxy("properties.productId")},s.promotionId=function(){return this.proxy("properties.promotion_id")||this.proxy("properties.promotionId")},s.cartId=function(){return this.proxy("properties.cart_id")||this.proxy("properties.cartId")},s.checkoutId=function(){return this.proxy("properties.checkout_id")||this.proxy("properties.checkoutId")},s.paymentId=function(){return this.proxy("properties.payment_id")||this.proxy("properties.paymentId")},s.couponId=function(){return this.proxy("properties.coupon_id")||this.proxy("properties.couponId")},s.wishlistId=function(){return this.proxy("properties.wishlist_id")||this.proxy("properties.wishlistId")},s.reviewId=function(){return this.proxy("properties.review_id")||this.proxy("properties.reviewId")},s.orderId=function(){return this.proxy("properties.id")||this.proxy("properties.order_id")||this.proxy("properties.orderId")},s.sku=t.Facade.proxy("properties.sku"),s.tax=t.Facade.proxy("properties.tax"),s.name=t.Facade.proxy("properties.name"),s.price=t.Facade.proxy("properties.price"),s.total=t.Facade.proxy("properties.total"),s.repeat=t.Facade.proxy("properties.repeat"),s.coupon=t.Facade.proxy("properties.coupon"),s.shipping=t.Facade.proxy("properties.shipping"),s.discount=t.Facade.proxy("properties.discount"),s.shippingMethod=function(){return this.proxy("properties.shipping_method")||this.proxy("properties.shippingMethod")},s.paymentMethod=function(){return this.proxy("properties.payment_method")||this.proxy("properties.paymentMethod")},s.description=t.Facade.proxy("properties.description"),s.plan=t.Facade.proxy("properties.plan"),s.subtotal=function(){var l=a.default(this.properties(),"subtotal"),c=this.total()||this.revenue();if(l)return l;if(!c)return 0;if(this.total()){var f=this.tax();f&&(c-=f),f=this.shipping(),f&&(c-=f),f=this.discount(),f&&(c+=f)}return c},s.products=function(){var l=this.properties(),c=a.default(l,"products");return Array.isArray(c)?c.filter(function(f){return f!==null}):[]},s.quantity=function(){var l=this.obj.properties||{};return l.quantity||1},s.currency=function(){var l=this.obj.properties||{};return l.currency||"USD"},s.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")},s.query=t.Facade.proxy("options.query"),s.properties=function(l){var c=this.field("properties")||{};l=l||{};for(var f in l)if(Object.prototype.hasOwnProperty.call(l,f)){var h=this[f]==null?this.proxy("properties."+f):this[f]();if(h==null)continue;c[l[f]]=h,delete c[f]}return c},s.username=function(){return this.proxy("traits.username")||this.proxy("properties.username")||this.userId()||this.sessionId()},s.email=function(){var l=this.proxy("traits.email")||this.proxy("properties.email")||this.proxy("options.traits.email");if(l)return l;var c=this.userId();if(i.default(c))return c},s.revenue=function(){var l=this.proxy("properties.revenue"),c=this.event(),f=/^[ _]?completed[ _]?order[ _]?|^[ _]?order[ _]?completed[ _]?$/i;return!l&&c&&c.match(f)&&(l=this.proxy("properties.total")),u(l)},s.cents=function(){var l=this.revenue();return typeof l!="number"?this.value()||0:l*100},s.identify=function(){var l=this.json();return l.traits=this.traits(),new n.Identify(l,this.opts)};function u(l){if(l){if(typeof l=="number")return l;if(typeof l=="string"&&(l=l.replace(/\$/g,""),l=parseFloat(l),!isNaN(l)))return l}}return Ev}var xv={},cS;function q2(){if(cS)return xv;cS=1;var r=xv&&xv.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(xv,"__esModule",{value:!0}),xv.Page=void 0;var e=r(qv()),t=Vv(),n=I1(),i=r(S0());function a(s,u){t.Facade.call(this,s,u)}xv.Page=a,e.default(a,t.Facade);var o=a.prototype;return o.action=function(){return"page"},o.type=o.action,o.category=t.Facade.field("category"),o.name=t.Facade.field("name"),o.title=t.Facade.proxy("properties.title"),o.path=t.Facade.proxy("properties.path"),o.url=t.Facade.proxy("properties.url"),o.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")},o.properties=function(s){var u=this.field("properties")||{},l=this.category(),c=this.name();s=s||{},l&&(u.category=l),c&&(u.name=c);for(var f in s)if(Object.prototype.hasOwnProperty.call(s,f)){var h=this[f]==null?this.proxy("properties."+f):this[f]();if(h==null)continue;u[s[f]]=h,f!==s[f]&&delete u[f]}return u},o.email=function(){var s=this.proxy("context.traits.email")||this.proxy("properties.email");if(s)return s;var u=this.userId();if(i.default(u))return u},o.fullName=function(){var s=this.category(),u=this.name();return u&&s?s+" "+u:u},o.event=function(s){return s?"Viewed "+s+" Page":"Loaded a Page"},o.track=function(s){var u=this.json();return u.event=this.event(s),u.timestamp=this.timestamp(),u.properties=this.properties(),new n.Track(u,this.opts)},xv}var Ov={},fS;function VN(){if(fS)return Ov;fS=1;var r=Ov&&Ov.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Ov,"__esModule",{value:!0}),Ov.Screen=void 0;var e=r(qv()),t=q2(),n=I1();function i(a,o){t.Page.call(this,a,o)}return Ov.Screen=i,e.default(i,t.Page),i.prototype.action=function(){return"screen"},i.prototype.type=i.prototype.action,i.prototype.event=function(a){return a?"Viewed "+a+" Screen":"Loaded a Screen"},i.prototype.track=function(a){var o=this.json();return o.event=this.event(a),o.timestamp=this.timestamp(),o.properties=this.properties(),new n.Track(o,this.opts)},Ov}var Sv={},hS;function qN(){if(hS)return Sv;hS=1;var r=Sv&&Sv.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Sv,"__esModule",{value:!0}),Sv.Delete=void 0;var e=r(qv()),t=Vv();function n(i,a){t.Facade.call(this,i,a)}return Sv.Delete=n,e.default(n,t.Facade),n.prototype.type=function(){return"delete"},Sv}var dS;function WN(){return dS||(dS=1,function(r){var e=qg&&qg.__assign||function(){return e=Object.assign||function(c){for(var f,h=1,d=arguments.length;h<d;h++){f=arguments[h];for(var v in f)Object.prototype.hasOwnProperty.call(f,v)&&(c[v]=f[v])}return c},e.apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0}),r.Delete=r.Screen=r.Page=r.Track=r.Identify=r.Group=r.Alias=r.Facade=void 0;var t=Vv();Object.defineProperty(r,"Facade",{enumerable:!0,get:function(){return t.Facade}});var n=zN();Object.defineProperty(r,"Alias",{enumerable:!0,get:function(){return n.Alias}});var i=GN();Object.defineProperty(r,"Group",{enumerable:!0,get:function(){return i.Group}});var a=V2();Object.defineProperty(r,"Identify",{enumerable:!0,get:function(){return a.Identify}});var o=I1();Object.defineProperty(r,"Track",{enumerable:!0,get:function(){return o.Track}});var s=q2();Object.defineProperty(r,"Page",{enumerable:!0,get:function(){return s.Page}});var u=VN();Object.defineProperty(r,"Screen",{enumerable:!0,get:function(){return u.Screen}});var l=qN();Object.defineProperty(r,"Delete",{enumerable:!0,get:function(){return l.Delete}}),r.default=e(e({},t.Facade),{Alias:n.Alias,Group:i.Group,Identify:a.Identify,Track:o.Track,Page:s.Page,Screen:u.Screen,Delete:l.Delete})}(qg)),qg}var Tv=WN();function e0(r,e){var t=new Tv.Facade(r,e);return r.type==="track"&&(t=new Tv.Track(r,e)),r.type==="identify"&&(t=new Tv.Identify(r,e)),r.type==="page"&&(t=new Tv.Page(r,e)),r.type==="alias"&&(t=new Tv.Alias(r,e)),r.type==="group"&&(t=new Tv.Group(r,e)),r.type==="screen"&&(t=new Tv.Screen(r,e)),Object.defineProperty(t,"obj",{value:r,writable:!0}),t}var HN=function(r){var e=!1;window.addEventListener("pagehide",function(){e||(e=!0,r(e))}),document.addEventListener("visibilitychange",function(){if(document.visibilityState=="hidden"){if(e)return;e=!0}else e=!1;r(e)})},W2=function(r){Ws(e,r);function e(t,n){var i=r.call(this,t)||this;return i.retryTimeout=n,i.name="RateLimitError",i}return e}(Error),H2=function(r){return Mt({"Content-Type":"text/plain"},typeof r=="function"?r():r)},YN=500,XN=64;function k1(r){var e=encodeURI(JSON.stringify(r)).split(/%..|./).length-1;return e/1024}function KN(r){return k1(r)>=YN-50}function $N(r){return k1(r)>=XN-10}function ZN(r){var e=[],t=0;return r.forEach(function(n){var i=k1(e[t]);i>=64&&t++,e[t]?e[t].push(n):e[t]=[n]}),e}function QN(r,e){var t,n,i=[],a=!1,o=(t=e==null?void 0:e.size)!==null&&t!==void 0?t:10,s=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:5e3,u=0;function l(v){var y;if(v.length!==0){var w=(y=v[0])===null||y===void 0?void 0:y.writeKey,b=v.map(function(p){var m=p;m.sentAt;var x=E2(m,["sentAt"]);return x});return w0("https://".concat(r,"/b"),{credentials:e==null?void 0:e.credentials,keepalive:(e==null?void 0:e.keepalive)||a,headers:H2(e==null?void 0:e.headers),method:"post",body:JSON.stringify({writeKey:w,batch:b,sentAt:new Date().toISOString()}),priority:e==null?void 0:e.priority}).then(function(p){var m;if(p.status>=500)throw new Error("Bad response from server: ".concat(p.status));if(p.status===429){var x=(m=p.headers)===null||m===void 0?void 0:m.get("x-ratelimit-reset"),T=typeof x=="string"?parseInt(x)*1e3:s;throw new W2("Rate limit exceeded: ".concat(p.status),T)}})}}function c(v){var y;return v===void 0&&(v=1),fr(this,void 0,void 0,function(){var w;return hr(this,function(b){return i.length?(w=i,i=[],[2,(y=l(w))===null||y===void 0?void 0:y.catch(function(p){var m,x=eh.system();x.log("error","Error sending batch",p),v<=((m=e==null?void 0:e.maxRetries)!==null&&m!==void 0?m:10)&&(p.name==="RateLimitError"&&(u=p.retryTimeout),i.push.apply(i,w),i.map(function(T){if("_metadata"in T){var P=T;P._metadata=Mt(Mt({},P._metadata),{retryCount:v})}}),h(v+1))})]):[2]})})}var f;function h(v){v===void 0&&(v=1),!f&&(f=setTimeout(function(){f=void 0,c(v).catch(console.error)},u||s),u=0)}HN(function(v){if(a=v,a&&i.length){var y=ZN(i).map(l);Promise.all(y).catch(console.error)}});function d(v,y){return fr(this,void 0,void 0,function(){var w;return hr(this,function(b){return i.push(y),w=i.length>=o||KN(i)||(e==null?void 0:e.keepalive)&&$N(i),[2,w||a?c():h()]})})}return{dispatch:d}}function JN(r){function e(t,n){return w0(t,{credentials:r==null?void 0:r.credentials,keepalive:r==null?void 0:r.keepalive,headers:H2(r==null?void 0:r.headers),method:"post",body:JSON.stringify(n),priority:r==null?void 0:r.priority}).then(function(i){var a;if(i.status>=500)throw new Error("Bad response from server: ".concat(i.status));if(i.status===429){var o=(a=i.headers)===null||a===void 0?void 0:a.get("x-ratelimit-reset"),s=o?parseInt(o)*1e3:5e3;throw new W2("Rate limit exceeded: ".concat(i.status),s)}})}return{dispatch:e}}function e5(r,e,t,n,i){var a,o=r.user();delete e.options,e.writeKey=t==null?void 0:t.apiKey,e.userId=e.userId||o.id(),e.anonymousId=e.anonymousId||o.anonymousId(),e.sentAt=new Date;var s=r.queue.failedInitializations||[];s.length>0&&(e._metadata={failedInitializations:s}),i!=null&&(i.attempts>1&&(e._metadata=Mt(Mt({},e._metadata),{retryCount:i.attempts})),i.attempts++);var u=[],l=[];for(var c in n){var f=n[c];c==="Segment.io"&&u.push(c),f.bundlingStatus==="bundled"&&u.push(c),f.bundlingStatus==="unbundled"&&l.push(c)}for(var h=0,d=(t==null?void 0:t.unbundledIntegrations)||[];h<d.length;h++){var v=d[h];l.includes(v)||l.push(v)}var y=(a=t==null?void 0:t.maybeBundledConfigIds)!==null&&a!==void 0?a:{},w=[];return u.sort().forEach(function(b){var p;((p=y[b])!==null&&p!==void 0?p:[]).forEach(function(m){w.push(m)})}),(t==null?void 0:t.addBundledMetadata)!==!1&&(e._metadata=Mt(Mt({},e._metadata),{bundled:u.sort(),unbundled:l.sort(),bundledIds:w})),e}var t5=function(r,e){return fr(void 0,void 0,void 0,function(){var t;return hr(this,function(n){return t=function(i){return fr(void 0,void 0,void 0,function(){var a;return hr(this,function(o){switch(o.label){case 0:return r(i)?(a=t,[4,e()]):[3,2];case 1:return[2,a.apply(void 0,[o.sent()])];case 2:return[2]}})})},[2,t(void 0)]})})};function r5(r,e){return fr(this,void 0,void 0,function(){var t,n=this;return hr(this,function(i){switch(i.label){case 0:return t=[],py()?[2,e]:[4,t5(function(){return e.length>0&&!py()},function(){return fr(n,void 0,void 0,function(){var a,o,s;return hr(this,function(u){switch(u.label){case 0:return a=e.pop(),a?[4,iy(a,r)]:[2];case 1:return o=u.sent(),s=o instanceof eh,s||t.push(a),[2]}})})})];case 1:return i.sent(),t.map(function(a){return e.pushWithBackoff(a)}),[2,e]}})})}function Gp(r,e,t,n){var i=this;r||setTimeout(function(){return fr(i,void 0,void 0,function(){var a,o;return hr(this,function(s){switch(s.label){case 0:return a=!0,[4,r5(t,e)];case 1:return o=s.sent(),a=!1,e.todo>0&&n(a,o,t,n),[2]}})})},Math.random()*5e3)}function n5(r,e){var t,n,i,a,o=r.user();return e.previousId=(i=(n=(t=e.previousId)!==null&&t!==void 0?t:e.from)!==null&&n!==void 0?n:o.id())!==null&&i!==void 0?i:o.anonymousId(),e.userId=(a=e.userId)!==null&&a!==void 0?a:e.to,delete e.from,delete e.to,e}var i5=function(r){return r.name==="Segment.io"};function o5(r,e,t){var n,i,a;window.addEventListener("pagehide",function(){s.push.apply(s,Array.from(u)),u.clear()});var o=(n=e==null?void 0:e.apiKey)!==null&&n!==void 0?n:"",s=r.options.disableClientPersistence?new E1(r.queue.queue.maxAttempts,[]):new T1(r.queue.queue.maxAttempts,"".concat(o,":dest-Segment.io")),u=new Set,l=!1,c=(i=e==null?void 0:e.apiHost)!==null&&i!==void 0?i:T2,f=(a=e==null?void 0:e.protocol)!==null&&a!==void 0?a:"https",h="".concat(f,"://").concat(c),d=e==null?void 0:e.deliveryStrategy,v=d&&"strategy"in d&&d.strategy==="batching"?QN(c,d.config):JN(d==null?void 0:d.config);function y(b){return fr(this,void 0,void 0,function(){var p,m;return hr(this,function(x){return py()?(s.push(b),Gp(l,s,w,Gp),[2,b]):(u.add(b),p=b.event.type.charAt(0),m=e0(b.event).json(),b.event.type==="track"&&delete m.traits,b.event.type==="alias"&&(m=n5(r,m)),s.getAttempts(b)>=s.maxAttempts?(u.delete(b),[2,b]):[2,v.dispatch("".concat(h,"/").concat(p),e5(r,m,e,t,b)).then(function(){return b}).catch(function(T){if(b.log("error","Error sending event",T),T.name==="RateLimitError"){var P=T.retryTimeout;s.pushWithBackoff(b,P)}else s.pushWithBackoff(b);return Gp(l,s,w,Gp),b}).finally(function(){u.delete(b)})])})})}var w={metadata:{writeKey:o,apiHost:c,protocol:f},name:"Segment.io",type:"destination",version:"0.1.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:y,identify:y,page:y,alias:y,group:y,screen:y};return s.todo&&Gp(l,s,w,Gp),w}var ed="This is being deprecated and will be not be available in future releases of Analytics JS",hw=S1(),dw=hw==null?void 0:hw.analytics;function a5(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var n=e?10:1,i=t?new E1(n,[]):new T1(n,r);return new yN(i)}var s5=function(){function r(e,t){var n;this.timeout=300,this._getSegmentPluginMetadata=function(){var a;return(a=t.plugins.find(i5))===null||a===void 0?void 0:a.metadata},this.writeKey=e.writeKey;var i={integrations:{"Segment.io":{apiKey:""}}};this.cdnSettings=(n=e.cdnSettings)!==null&&n!==void 0?n:i,this.cdnURL=e.cdnURL}return Object.defineProperty(r.prototype,"apiHost",{get:function(){var e,t;return(t=(e=this._getSegmentPluginMetadata)===null||e===void 0?void 0:e.call(this))===null||t===void 0?void 0:t.apiHost},enumerable:!1,configurable:!0}),r}();function Wc(){console.warn(ed)}var Y2=function(r){Ws(e,r);function e(t,n,i,a,o){var s=this,u,l;s=r.call(this)||this,s._debug=!1,s.initialized=!1,s.user=function(){return s._user},s.init=s.initialize.bind(s),s.log=Wc,s.addIntegrationMiddleware=Wc,s.listeners=Wc,s.addEventListener=Wc,s.removeAllListeners=Wc,s.removeListener=Wc,s.removeEventListener=Wc,s.hasListeners=Wc,s.add=Wc,s.addIntegration=Wc;var c=n==null?void 0:n.cookie,f=(u=n==null?void 0:n.disableClientPersistence)!==null&&u!==void 0?u:!1;s.queue=i??a5("".concat(t.writeKey,":event-queue"),n==null?void 0:n.retryQueue,f),s.settings=new s5(t,s.queue);var h=n==null?void 0:n.storage;return s._universalStorage=s.createStore(f,h,c),s._user=a??new B2(Mt({persist:!f,storage:n==null?void 0:n.storage},n==null?void 0:n.user),c).load(),s._group=o??new ON(Mt({persist:!f,storage:n==null?void 0:n.storage},n==null?void 0:n.group),c).load(),s.eventFactory=new hN(s._user),s.integrations=(l=n==null?void 0:n.integrations)!==null&&l!==void 0?l:{},s.options=n??{},C1(s),s}return e.prototype.createStore=function(t,n,i){return t?new Mv([new P1]):n&&N2(n)?new Mv(qw(j2(n.stores,i))):new Mv(qw([zs.LocalStorage,{name:zs.Cookie,settings:i},zs.Memory]))},Object.defineProperty(e.prototype,"storage",{get:function(){return this._universalStorage},enumerable:!1,configurable:!0}),e.prototype.track=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return fr(this,void 0,void 0,function(){var i,a,o,s,u,l,c,f=this;return hr(this,function(h){return i=Up(t),a=QL.apply(void 0,t),o=a[0],s=a[1],u=a[2],l=a[3],c=this.eventFactory.track(o,s,u,this.integrations,i),[2,this._dispatch(c,l).then(function(d){return f.emit("track",o,d.event.properties,d.event.options),d})]})})},e.prototype.page=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return fr(this,void 0,void 0,function(){var i,a,o,s,u,l,c,f,h=this;return hr(this,function(d){return i=Up(t),a=qO.apply(void 0,t),o=a[0],s=a[1],u=a[2],l=a[3],c=a[4],f=this.eventFactory.page(o,s,u,l,this.integrations,i),[2,this._dispatch(f,c).then(function(v){return h.emit("page",o,s,v.event.properties,v.event.options),v})]})})},e.prototype.identify=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return fr(this,void 0,void 0,function(){var i,a,o,s,u,l,c,f=this;return hr(this,function(h){return i=Up(t),a=WO(this._user).apply(void 0,t),o=a[0],s=a[1],u=a[2],l=a[3],this._user.identify(o,s),c=this.eventFactory.identify(this._user.id(),this._user.traits(),u,this.integrations,i),[2,this._dispatch(c,l).then(function(d){return f.emit("identify",d.event.userId,d.event.traits,d.event.options),d})]})})},e.prototype.group=function(){for(var t=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a=Up(n);if(n.length===0)return this._group;var o=WO(this._group).apply(void 0,n),s=o[0],u=o[1],l=o[2],c=o[3];this._group.identify(s,u);var f=this._group.id(),h=this._group.traits(),d=this.eventFactory.group(f,h,l,this.integrations,a);return this._dispatch(d,c).then(function(v){return t.emit("group",v.event.groupId,v.event.traits,v.event.options),v})},e.prototype.alias=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return fr(this,void 0,void 0,function(){var i,a,o,s,u,l,c,f=this;return hr(this,function(h){return i=Up(t),a=JL.apply(void 0,t),o=a[0],s=a[1],u=a[2],l=a[3],c=this.eventFactory.alias(o,s,u,this.integrations,i),[2,this._dispatch(c,l).then(function(d){return f.emit("alias",o,s,d.event.options),d})]})})},e.prototype.screen=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return fr(this,void 0,void 0,function(){var i,a,o,s,u,l,c,f,h=this;return hr(this,function(d){return i=Up(t),a=qO.apply(void 0,t),o=a[0],s=a[1],u=a[2],l=a[3],c=a[4],f=this.eventFactory.screen(o,s,u,l,this.integrations,i),[2,this._dispatch(f,c).then(function(v){return h.emit("screen",o,s,v.event.properties,v.event.options),v})]})})},e.prototype.trackClick=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return fr(this,void 0,void 0,function(){var i,a;return hr(this,function(o){switch(o.label){case 0:return[4,$l(()=>import("./auto-track-CW7s4n7F.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))];case 1:return i=o.sent(),[2,(a=i.link).call.apply(a,jo([this],t,!1))]}})})},e.prototype.trackLink=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return fr(this,void 0,void 0,function(){var i,a;return hr(this,function(o){switch(o.label){case 0:return[4,$l(()=>import("./auto-track-CW7s4n7F.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))];case 1:return i=o.sent(),[2,(a=i.link).call.apply(a,jo([this],t,!1))]}})})},e.prototype.trackSubmit=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return fr(this,void 0,void 0,function(){var i,a;return hr(this,function(o){switch(o.label){case 0:return[4,$l(()=>import("./auto-track-CW7s4n7F.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))];case 1:return i=o.sent(),[2,(a=i.form).call.apply(a,jo([this],t,!1))]}})})},e.prototype.trackForm=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return fr(this,void 0,void 0,function(){var i,a;return hr(this,function(o){switch(o.label){case 0:return[4,$l(()=>import("./auto-track-CW7s4n7F.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))];case 1:return i=o.sent(),[2,(a=i.form).call.apply(a,jo([this],t,!1))]}})})},e.prototype.register=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return fr(this,void 0,void 0,function(){var i,a,o=this;return hr(this,function(s){switch(s.label){case 0:return i=eh.system(),a=t.map(function(u){return o.queue.register(i,u,o)}),[4,Promise.all(a)];case 1:return s.sent(),[2,i]}})})},e.prototype.deregister=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return fr(this,void 0,void 0,function(){var i,a,o=this;return hr(this,function(s){switch(s.label){case 0:return i=eh.system(),a=t.map(function(u){var l=o.queue.plugins.find(function(c){return c.name===u});if(l)return o.queue.deregister(i,l,o);i.log("warn","plugin ".concat(u," not found"))}),[4,Promise.all(a)];case 1:return s.sent(),[2,i]}})})},e.prototype.debug=function(t){return t===!1&&localStorage.getItem("debug")&&localStorage.removeItem("debug"),this._debug=t,this},e.prototype.reset=function(){this._user.reset(),this._group.reset(),this.emit("reset")},e.prototype.timeout=function(t){this.settings.timeout=t},e.prototype._dispatch=function(t,n){return fr(this,void 0,void 0,function(){var i;return hr(this,function(a){return i=new eh(t),i.stats.increment("analytics_js.invoke",1,[t.type]),py()&&!this.options.retryQueue?[2,i]:[2,ZL(i,this.queue,this,{callback:n,debug:this._debug,timeout:this.settings.timeout})]})})},e.prototype.addSourceMiddleware=function(t){return fr(this,void 0,void 0,function(){var n=this;return hr(this,function(i){switch(i.label){case 0:return[4,this.queue.criticalTasks.run(function(){return fr(n,void 0,void 0,function(){var a,o,s;return hr(this,function(u){switch(u.label){case 0:return[4,$l(()=>Promise.resolve().then(()=>O5),void 0)];case 1:return a=u.sent().sourceMiddlewarePlugin,o={},this.queue.plugins.forEach(function(l){if(l.type==="destination")return o[l.name]=!0}),s=a(t,o),[4,this.register(s)];case 2:return u.sent(),[2]}})})})];case 1:return i.sent(),[2,this]}})})},e.prototype.addDestinationMiddleware=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return this.queue.plugins.filter(dN).forEach(function(a){(t==="*"||a.name.toLowerCase()===t.toLowerCase())&&a.addMiddleware.apply(a,n)}),Promise.resolve(this)},e.prototype.setAnonymousId=function(t){return this._user.anonymousId(t)},e.prototype.queryString=function(t){return fr(this,void 0,void 0,function(){var n;return hr(this,function(i){switch(i.label){case 0:return this.options.useQueryString===!1?[2,[]]:[4,$l(()=>import("./index-CgiY5jg2.js"),__vite__mapDeps([9,1,2,3,4,5,6,7,8]))];case 1:return n=i.sent().queryString,[2,n(this,t)]}})})},e.prototype.use=function(t){return t(this),this},e.prototype.ready=function(t){return t===void 0&&(t=function(n){return n}),fr(this,void 0,void 0,function(){return hr(this,function(n){return[2,Promise.all(this.queue.plugins.map(function(i){return i.ready?i.ready():Promise.resolve()})).then(function(i){return t(i),i})]})})},e.prototype.noConflict=function(){return console.warn(ed),TN(dw??this),this},e.prototype.normalize=function(t){return console.warn(ed),this.eventFactory.normalize(t)},Object.defineProperty(e.prototype,"failedInitializations",{get:function(){return console.warn(ed),this.queue.failedInitializations},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"VERSION",{get:function(){return E0},enumerable:!1,configurable:!0}),e.prototype.initialize=function(t,n){return fr(this,void 0,void 0,function(){return hr(this,function(i){return console.warn(ed),[2,Promise.resolve(this)]})})},e.prototype.pageview=function(t){return fr(this,void 0,void 0,function(){return hr(this,function(n){switch(n.label){case 0:return console.warn(ed),[4,this.page({path:t})];case 1:return n.sent(),[2,this]}})})},Object.defineProperty(e.prototype,"plugins",{get:function(){var t;return console.warn(ed),(t=this._plugins)!==null&&t!==void 0?t:{}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Integrations",{get:function(){console.warn(ed);var t=this.queue.plugins.filter(function(n){return n.type==="destination"}).reduce(function(n,i){var a="".concat(i.name.toLowerCase().replace(".","").split(" ").join("-"),"Integration"),o=window[a];if(!o)return n;var s=o.Integration;return s?(n[i.name]=s,n):(n[i.name]=o,n)},{});return t},enumerable:!1,configurable:!0}),e.prototype.push=function(t){var n=this,i=t.shift();i&&!n[i]||n[i].apply(this,t)},e}(w1),vS=function(r){Ws(e,r);function e(){var t=r.call(this,{writeKey:""},{disableClientPersistence:!0})||this;return t.initialized=!0,t}return e}(Y2),pS={};function X2(){return typeof process>"u"||!pS?{}:pS}var u5=/(https:\/\/.*)\/analytics\.js\/v1\/(?:.*?)\/(?:platform|analytics.*)?/,l5=function(){var r,e=Array.prototype.slice.call(document.querySelectorAll("script"));return e.forEach(function(t){var n,i=(n=t.getAttribute("src"))!==null&&n!==void 0?n:"",a=u5.exec(i);a&&a[1]&&(r=a[1])}),r},Nm,c5=function(){var r,e=Nm??((r=F2())===null||r===void 0?void 0:r._cdn);return e},f5=function(r){var e=F2();e&&(e._cdn=r),Nm=r},D1=function(){var r=c5();if(r)return r;var e=l5();return e||"https://cdn.segment.com"},Bj=function(){var r=D1();return"".concat(r,"/next-integrations")};function h5(r,e){var t,n=Object.entries((t=e.integrations)!==null&&t!==void 0?t:{}).reduce(function(i,a){var o,s,u=a[0],l=a[1];return typeof l=="object"?Mt(Mt({},i),(o={},o[u]=l,o)):Mt(Mt({},i),(s={},s[u]={},s))},{});return Object.entries(r.integrations).reduce(function(i,a){var o,s=a[0],u=a[1];return Mt(Mt({},i),(o={},o[s]=Mt(Mt({},u),n[s]),o))},{})}function d5(r){try{return decodeURIComponent(r.replace(/\+/g," "))}catch{return r}}function v5(r){return fr(this,void 0,void 0,function(){var e;return hr(this,function(t){return e=navigator.userAgentData,e?r?[2,e.getHighEntropyValues(r).catch(function(){return e.toJSON()})]:[2,e.toJSON()]:[2,void 0]})})}var Hg;function p5(){if(Hg)return Hg;var r=M2(window.location.href);return Hg={expires:31536e6,secure:!1,path:"/"},r&&(Hg.domain=r),Hg}function g5(r){var e={btid:"dataxu",urid:"millennial-media"};r.startsWith("?")&&(r=r.substring(1)),r=r.replace(/\?/g,"&");for(var t=r.split("&"),n=0,i=t;n<i.length;n++){var a=i[n],o=a.split("="),s=o[0],u=o[1];if(e[s])return{id:u,type:e[s]}}}function y5(r){return r.startsWith("?")&&(r=r.substring(1)),r=r.replace(/\?/g,"&"),r.split("&").reduce(function(e,t){var n=t.split("="),i=n[0],a=n[1],o=a===void 0?"":a;if(i.includes("utm_")&&i.length>4){var s=i.slice(4);s==="campaign"&&(s="name"),e[s]=d5(o)}return e},{})}function m5(){var r=Qf.get("_ga");if(r&&r.startsWith("amp"))return r}function b5(r,e,t){var n,i=new Mv(t?[]:[new L2(p5())]),a=i.get("s:context.referrer"),o=(n=g5(r))!==null&&n!==void 0?n:a;o&&(e&&(e.referrer=Mt(Mt({},e.referrer),o)),i.set("s:context.referrer",o))}var _5=function(r){try{var e=new URLSearchParams;return Object.entries(r).forEach(function(t){var n=t[0],i=t[1];Array.isArray(i)?i.forEach(function(a){return e.append(n,a)}):e.append(n,i)}),e.toString()}catch{return""}},w5=function(){function r(){var e=this;this.name="Page Enrichment",this.type="before",this.version="0.1.0",this.isLoaded=function(){return!0},this.load=function(t,n){return fr(e,void 0,void 0,function(){var i;return hr(this,function(a){switch(a.label){case 0:this.instance=n,a.label=1;case 1:return a.trys.push([1,3,,4]),i=this,[4,v5(this.instance.options.highEntropyValuesClientHints)];case 2:return i.userAgentData=a.sent(),[3,4];case 3:return a.sent(),[3,4];case 4:return[2,Promise.resolve()]}})})},this.enrich=function(t){var n,i,a=t.event.context,o=a.page.search||"",s=typeof o=="object"?_5(o):o;a.userAgent=navigator.userAgent,a.userAgentData=e.userAgentData;var u=navigator.userLanguage||navigator.language;typeof a.locale>"u"&&typeof u<"u"&&(a.locale=u),(n=a.library)!==null&&n!==void 0||(a.library={name:"analytics.js",version:"".concat("npm:next","-").concat(E0)}),s&&!a.campaign&&(a.campaign=y5(s));var l=m5();l&&(a.amp={id:l}),b5(s,a,(i=e.instance.options.disableClientPersistence)!==null&&i!==void 0?i:!1);try{a.timezone=Intl.DateTimeFormat().resolvedOptions().timeZone}catch{}return t},this.track=this.enrich,this.identify=this.enrich,this.page=this.enrich,this.group=this.enrich,this.alias=this.enrich,this.screen=this.enrich}return r}(),E5=new w5;function K2(r){var e=Array.prototype.slice.call(window.document.querySelectorAll("script"));return e.find(function(t){return t.src===r})}function vw(r,e){var t=K2(r);if(t!==void 0){var n=t==null?void 0:t.getAttribute("status");if(n==="loaded")return Promise.resolve(t);if(n==="loading")return new Promise(function(i,a){t.addEventListener("load",function(){return i(t)}),t.addEventListener("error",function(o){return a(o)})})}return new Promise(function(i,a){var o,s=window.document.createElement("script");s.type="text/javascript",s.src=r,s.async=!0,s.setAttribute("status","loading");for(var u=0,l=Object.entries({});u<l.length;u++){var c=l[u],f=c[0],h=c[1];s.setAttribute(f,h)}s.onload=function(){s.onerror=s.onload=null,s.setAttribute("status","loaded"),i(s)},s.onerror=function(){s.onerror=s.onload=null,s.setAttribute("status","error"),a(new Error("Failed to load ".concat(r)))};var d=window.document.querySelector("script");d?(o=d.parentElement)===null||o===void 0||o.insertBefore(s,d):window.document.head.appendChild(s)})}function Fj(r){var e=K2(r);return e!==void 0&&e.remove(),Promise.resolve()}function $2(r,e,t){return fr(this,void 0,void 0,function(){function n(l,c){return fr(this,void 0,void 0,function(){var f,h,d;return hr(this,function(v){switch(v.label){case 0:return f=!1,h=null,[4,c({payload:e0(l,{clone:!0,traverse:!1}),integration:r,next:function(y){f=!0,y===null&&(h=null),y&&(h=y.obj)}})];case 1:return v.sent(),!f&&h!==null&&(h=h,h.integrations=Mt(Mt({},l.integrations),(d={},d[r]=!1,d))),[2,h]}})})}var i,a,o,s,u;return hr(this,function(l){switch(l.label){case 0:i=e0(e,{clone:!0,traverse:!1}).rawEvent(),a=0,o=t,l.label=1;case 1:return a<o.length?(s=o[a],[4,n(i,s)]):[3,4];case 2:if(u=l.sent(),u===null)return[2,null];i=u,l.label=3;case 3:return a++,[3,1];case 4:return[2,i]}})})}function x5(r,e){function t(n){return fr(this,void 0,void 0,function(){var i;return hr(this,function(a){switch(a.label){case 0:return i=!1,[4,r({payload:e0(n.event,{clone:!0,traverse:!1}),integrations:e??{},next:function(o){i=!0,o&&(n.event=o.obj)}})];case 1:if(a.sent(),!i)throw new ig({retry:!1,type:"middleware_cancellation",reason:"Middleware `next` function skipped"});return[2,n]}})})}return{name:"Source Middleware ".concat(r.name),type:"before",version:"0.1.0",isLoaded:function(){return!0},load:function(n){return Promise.resolve(n)},track:t,page:t,screen:t,identify:t,alias:t,group:t}}const O5=Object.freeze(Object.defineProperty({__proto__:null,applyDestinationMiddleware:$2,sourceMiddlewarePlugin:x5},Symbol.toStringTag,{value:"Module"}));function mm(r,e){var t=e.methodName,n=e.integrationName,i=e.type,a=e.didError,o=a===void 0?!1:a;r.stats.increment("analytics_js.integration.invoke".concat(o?".error":""),1,["method:".concat(t),"integration_name:".concat(n),"type:".concat(i)])}var S5=function(){function r(e,t){this.version="1.0.0",this.alternativeNames=[],this.loadPromise=x2(),this.middleware=[],this.alias=this._createMethod("alias"),this.group=this._createMethod("group"),this.identify=this._createMethod("identify"),this.page=this._createMethod("page"),this.screen=this._createMethod("screen"),this.track=this._createMethod("track"),this.action=t,this.name=e,this.type=t.type,this.alternativeNames.push(t.name)}return r.prototype.addMiddleware=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.type==="destination"&&(e=this.middleware).push.apply(e,t)},r.prototype.transform=function(e){return fr(this,void 0,void 0,function(){var t;return hr(this,function(n){switch(n.label){case 0:return[4,$2(this.name,e.event,this.middleware)];case 1:return t=n.sent(),t===null&&e.cancel(new ig({retry:!1,reason:"dropped by destination middleware"})),[2,new eh(t)]}})})},r.prototype._createMethod=function(e){var t=this;return function(n){return fr(t,void 0,void 0,function(){var i,a;return hr(this,function(o){switch(o.label){case 0:return this.action[e]?(i=n,this.type!=="destination"?[3,2]:[4,this.transform(n)]):[2,n];case 1:i=o.sent(),o.label=2;case 2:return o.trys.push([2,5,,6]),[4,this.ready()];case 3:if(!o.sent())throw new Error("Something prevented the destination from getting ready");return mm(n,{integrationName:this.action.name,methodName:e,type:"action"}),[4,this.action[e](i)];case 4:return o.sent(),[3,6];case 5:throw a=o.sent(),mm(n,{integrationName:this.action.name,methodName:e,type:"action",didError:!0}),a;case 6:return[2,n]}})})}},r.prototype.isLoaded=function(){return this.action.isLoaded()},r.prototype.ready=function(){return fr(this,void 0,void 0,function(){return hr(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.loadPromise.promise];case 1:return e.sent(),[2,!0];case 2:return e.sent(),[2,!1];case 3:return[2]}})})},r.prototype.load=function(e,t){return fr(this,void 0,void 0,function(){var n,i,a,o;return hr(this,function(s){switch(s.label){case 0:if(this.loadPromise.isSettled())return[2,this.loadPromise.promise];s.label=1;case 1:return s.trys.push([1,3,,4]),mm(e,{integrationName:this.action.name,methodName:"load",type:"action"}),n=this.action.load(e,t),a=(i=this.loadPromise).resolve,[4,n];case 2:return a.apply(i,[s.sent()]),[2,n];case 3:throw o=s.sent(),mm(e,{integrationName:this.action.name,methodName:"load",type:"action",didError:!0}),this.loadPromise.reject(o),o;case 4:return[2]}})})},r.prototype.unload=function(e,t){var n,i;return(i=(n=this.action).unload)===null||i===void 0?void 0:i.call(n,e,t)},r}();function T5(r){if(!Array.isArray(r))throw new Error("Not a valid list of plugins");var e=["load","isLoaded","name","version","type"];return r.forEach(function(t){e.forEach(function(n){var i;if(t[n]===void 0)throw new Error("Plugin: ".concat((i=t.name)!==null&&i!==void 0?i:"unknown"," missing required function ").concat(n))})}),!0}function C5(r,e){var t=r[e.creationName],n=r[e.name];return r.All===!1&&!t&&!n||t===!1||n===!1}function P5(r,e){return fr(this,void 0,void 0,function(){var t,n,i,a,o,s;return hr(this,function(u){switch(u.label){case 0:if(u.trys.push([0,9,,10]),t=new RegExp("https://cdn.segment.(com|build)"),n=D1(),!e)return[3,6];i=r.url.split("/"),a=i[i.length-2],o=r.url.replace(a,btoa(a).replace(/=/g,"")),u.label=1;case 1:return u.trys.push([1,3,,5]),[4,vw(o.replace(t,n))];case 2:return u.sent(),[3,5];case 3:return u.sent(),[4,vw(r.url.replace(t,n))];case 4:return u.sent(),[3,5];case 5:return[3,8];case 6:return[4,vw(r.url.replace(t,n))];case 7:u.sent(),u.label=8;case 8:return typeof window[r.libraryName]=="function"?[2,window[r.libraryName]]:[3,10];case 9:throw s=u.sent(),console.error("Failed to create PluginFactory",r),s;case 10:return[2]}})})}function A5(r,e,t,n,i,a){var o,s,u;return fr(this,void 0,void 0,function(){var l,c,f,h=this;return hr(this,function(d){switch(d.label){case 0:return l=[],c=(s=(o=r.middlewareSettings)===null||o===void 0?void 0:o.routingRules)!==null&&s!==void 0?s:[],f=((u=r.remotePlugins)!==null&&u!==void 0?u:[]).map(function(v){return fr(h,void 0,void 0,function(){var y,w,b,p,m,x,T;return hr(this,function(P){switch(P.label){case 0:if(C5(e,v))return[2];P.label=1;case 1:return P.trys.push([1,6,,7]),w=a==null?void 0:a.find(function(C){var R=C.pluginName;return R===v.name}),w?[3,3]:[4,P5(v,n==null?void 0:n.obfuscate)];case 2:w=P.sent(),P.label=3;case 3:return y=w,y?(b=t[v.name],[4,y(Mt(Mt({},v.settings),b))]):[3,5];case 4:p=P.sent(),m=Array.isArray(p)?p:[p],T5(m),x=c.filter(function(C){return C.destinationName===v.creationName}),m.forEach(function(C){var R=new S5(v.creationName,C);x.length&&i&&R.addMiddleware(i),l.push(R)}),P.label=5;case 5:return[3,7];case 6:return T=P.sent(),console.warn("Failed to load Remote Plugin",T),[3,7];case 7:return[2]}})})}),[4,Promise.all(f)];case 1:return d.sent(),[2,l.filter(Boolean)]}})})}var pw,gS,R5=S1(),yS=(pw=(gS=R5).__SEGMENT_INSPECTOR__)!==null&&pw!==void 0?pw:gS.__SEGMENT_INSPECTOR__={},I5=function(r){var e;return(e=yS.attach)===null||e===void 0?void 0:e.call(yS,r)};function k5(r,e){return w0("".concat(e,"/v1/projects/").concat(r,"/settings")).then(function(t){return t.ok?t.json():t.text().then(function(n){throw new Error(n)})}).catch(function(t){throw console.error(t.message),t})}function D5(r){return X2().NODE_ENV!=="test"&&Object.keys(r.integrations).length>1}function M5(r){var e,t,n;return X2().NODE_ENV!=="test"&&((n=(t=(e=r.middlewareSettings)===null||e===void 0?void 0:e.routingRules)===null||t===void 0?void 0:t.length)!==null&&n!==void 0?n:0)>0}function L5(r,e){IN(r,e),RN(r,e)}function N5(r,e,t){return fr(this,void 0,void 0,function(){return hr(this,function(n){switch(n.label){case 0:return[4,B5(r,e)];case 1:return n.sent(),kN(r,t),[2]}})})}var j5=function(){var r,e,t=(r=window.location.hash)!==null&&r!==void 0?r:"",n=(e=window.location.search)!==null&&e!==void 0?e:"",i=n.length?n:t.replace(/(?=#).*(?=\?)/,"");return i},B5=function(r,e){return fr(void 0,void 0,void 0,function(){return hr(this,function(t){switch(t.label){case 0:return e.includes("ajs_")?[4,r.queryString(e).catch(console.error)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})};function F5(r,e,t,n,i,a,o){var s,u,l;return i===void 0&&(i=[]),fr(this,void 0,void 0,function(){var c,f,h,d,v,y,w,b,p,m,x,T,P,C,R,D=this;return hr(this,function(N){switch(N.label){case 0:return L5(t,o),c=i==null?void 0:i.filter(function(j){return typeof j=="object"}),f=i==null?void 0:i.filter(function(j){return typeof j=="function"&&typeof j.pluginName=="string"}),M5(e)?[4,$l(()=>import("./index-7O0TZzl3.js"),[]).then(function(j){return j.tsubMiddleware(e.middlewareSettings.routingRules)})]:[3,2];case 1:return d=N.sent(),[3,3];case 2:d=void 0,N.label=3;case 3:return h=d,D5(e)||a.length>0?[4,$l(()=>import("./index-gm6s6Wda.js"),__vite__mapDeps([10,11,1,2,3,4,5,6,7,8])).then(function(j){return j.ajsDestinations(r,e,t.integrations,n,h,a)})]:[3,5];case 4:return y=N.sent(),[3,6];case 5:y=[],N.label=6;case 6:return v=y,e.legacyVideoPluginsEnabled?[4,$l(()=>import("./index-DGsdK8dr.js"),__vite__mapDeps([12,4,1,5,3,6,2,7,8])).then(function(j){return j.loadLegacyVideoPlugins(t)})]:[3,8];case 7:N.sent(),N.label=8;case 8:return!((s=n.plan)===null||s===void 0)&&s.track?[4,$l(()=>import("./index-B9euw0JY.js"),__vite__mapDeps([13,11,1,2,3,4,5,6,7,8])).then(function(j){var B;return j.schemaFilter((B=n.plan)===null||B===void 0?void 0:B.track,e)})]:[3,10];case 9:return b=N.sent(),[3,11];case 10:b=void 0,N.label=11;case 11:return w=b,p=h5(e,n),[4,A5(e,t.integrations,p,n,h,f).catch(function(){return[]})];case 12:return m=N.sent(),x=jo(jo([E5],v,!0),m,!0),w&&x.push(w),T=((u=n.integrations)===null||u===void 0?void 0:u.All)===!1&&!n.integrations["Segment.io"]||n.integrations&&n.integrations["Segment.io"]===!1,T?[3,14]:(C=(P=x).push,[4,o5(t,p["Segment.io"],e.integrations)]);case 13:C.apply(P,[N.sent()]),N.label=14;case 14:return[4,t.register.apply(t,jo(jo([],x,!1),c,!1))];case 15:return R=N.sent(),[4,AN(t,o)];case 16:return N.sent(),Object.entries((l=e.enabledMiddleware)!==null&&l!==void 0?l:{}).some(function(j){var B=j[1];return B})?[4,$l(()=>import("./index-DRvwagQ9.js"),__vite__mapDeps([14,1,2,3,4,5,6,7,8])).then(function(j){var B=j.remoteMiddlewares;return fr(D,void 0,void 0,function(){var z,W;return hr(this,function(Z){switch(Z.label){case 0:return[4,B(R,e,n.obfuscate)];case 1:return z=Z.sent(),W=z.map(function(Q){return t.addSourceMiddleware(Q)}),[2,Promise.all(W)]}})})})]:[3,18];case 17:N.sent(),N.label=18;case 18:return[4,PN(t,o)];case 19:return N.sent(),[2,R]}})})}function U5(r,e,t){var n,i,a,o,s,u,l,c,f;return e===void 0&&(e={}),fr(this,void 0,void 0,function(){var h,d,v,y,w,b,p,m,x,T,P;return hr(this,function(C){switch(C.label){case 0:return e.disable===!0?[2,[new vS,eh.system()]]:(e.globalAnalyticsKey&&SN(e.globalAnalyticsKey),r.cdnURL&&f5(r.cdnURL),e.initialPageview&&t.add(new Ww("page",[])),h=j5(),d=(n=r.cdnURL)!==null&&n!==void 0?n:D1(),(i=r.cdnSettings)!==null&&i!==void 0?(y=i,[3,3]):[3,1]);case 1:return[4,k5(r.writeKey,d)];case 2:y=C.sent(),C.label=3;case 3:return v=y,e.updateCDNSettings&&(v=e.updateCDNSettings(v)),typeof e.disable!="function"?[3,5]:[4,e.disable(v)];case 4:if(w=C.sent(),w)return[2,[new vS,eh.system()]];C.label=5;case 5:return b=(o=(a=v.integrations["Segment.io"])===null||a===void 0?void 0:a.retryQueue)!==null&&o!==void 0?o:!0,e=Mt({retryQueue:b},e),p=new Y2(Mt(Mt({},r),{cdnSettings:v,cdnURL:d}),e),I5(p),m=(s=r.plugins)!==null&&s!==void 0?s:[],x=(u=r.classicIntegrations)!==null&&u!==void 0?u:[],T=(l=e.integrations)===null||l===void 0?void 0:l["Segment.io"],C2.initRemoteMetrics(Mt(Mt({},v.metrics),{host:(c=T==null?void 0:T.apiHost)!==null&&c!==void 0?c:(f=v.metrics)===null||f===void 0?void 0:f.host,protocol:T==null?void 0:T.protocol})),[4,F5(r.writeKey,v,p,e,m,x,t)];case 6:return P=C.sent(),p.initialized=!0,p.emit("initialize",r,e),[4,N5(p,h,t)];case 7:return C.sent(),[2,[p,P]]}})})}var z5=function(r){Ws(e,r);function e(){var t=this,n=x2(),i=n.promise,a=n.resolve;return t=r.call(this,function(o){return i.then(function(s){var u=s[0],l=s[1];return U5(u,l,o)})})||this,t._resolveLoadStart=function(o,s){return a([o,s])},t}return e.prototype.load=function(t,n){return n===void 0&&(n={}),this._resolveLoadStart(t,n),this},e.load=function(t,n){return n===void 0&&(n={}),new e().load(t,n)},e.standalone=function(t,n){return e.load({writeKey:t},n).then(function(i){return i[0]})},e}(MN);/*! For license information please see base.mjs.LICENSE.txt */var G5={7991:(r,e)=>{e.byteLength=function(l){var c=s(l),f=c[0],h=c[1];return 3*(f+h)/4-h},e.toByteArray=function(l){var c,f,h=s(l),d=h[0],v=h[1],y=new i(function(p,m,x){return 3*(m+x)/4-x}(0,d,v)),w=0,b=v>0?d-4:d;for(f=0;f<b;f+=4)c=n[l.charCodeAt(f)]<<18|n[l.charCodeAt(f+1)]<<12|n[l.charCodeAt(f+2)]<<6|n[l.charCodeAt(f+3)],y[w++]=c>>16&255,y[w++]=c>>8&255,y[w++]=255&c;return v===2&&(c=n[l.charCodeAt(f)]<<2|n[l.charCodeAt(f+1)]>>4,y[w++]=255&c),v===1&&(c=n[l.charCodeAt(f)]<<10|n[l.charCodeAt(f+1)]<<4|n[l.charCodeAt(f+2)]>>2,y[w++]=c>>8&255,y[w++]=255&c),y},e.fromByteArray=function(l){for(var c,f=l.length,h=f%3,d=[],v=16383,y=0,w=f-h;y<w;y+=v)d.push(u(l,y,y+v>w?w:y+v));return h===1?(c=l[f-1],d.push(t[c>>2]+t[c<<4&63]+"==")):h===2&&(c=(l[f-2]<<8)+l[f-1],d.push(t[c>>10]+t[c>>4&63]+t[c<<2&63]+"=")),d.join("")};for(var t=[],n=[],i=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)t[o]=a[o],n[a.charCodeAt(o)]=o;function s(l){var c=l.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var f=l.indexOf("=");return f===-1&&(f=c),[f,f===c?0:4-f%4]}function u(l,c,f){for(var h,d,v=[],y=c;y<f;y+=3)h=(l[y]<<16&16711680)+(l[y+1]<<8&65280)+(255&l[y+2]),v.push(t[(d=h)>>18&63]+t[d>>12&63]+t[d>>6&63]+t[63&d]);return v.join("")}n[45]=62,n[95]=63},1048:(r,e,t)=>{const n=t(7991),i=t(9318),a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=function(H){return+H!=H&&(H=0),u.alloc(+H)},e.INSPECT_MAX_BYTES=50;const o=2147483647;function s(H){if(H>o)throw new RangeError('The value "'+H+'" is invalid for option "size"');const $=new Uint8Array(H);return Object.setPrototypeOf($,u.prototype),$}function u(H,$,ne){if(typeof H=="number"){if(typeof $=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(H)}return l(H,$,ne)}function l(H,$,ne){if(typeof H=="string")return function(ze,Je){if(typeof Je=="string"&&Je!==""||(Je="utf8"),!u.isEncoding(Je))throw new TypeError("Unknown encoding: "+Je);const Pt=0|y(ze,Je);let Lt=s(Pt);const Wt=Lt.write(ze,Je);return Wt!==Pt&&(Lt=Lt.slice(0,Wt)),Lt}(H,$);if(ArrayBuffer.isView(H))return function(ze){if(Be(ze,Uint8Array)){const Je=new Uint8Array(ze);return d(Je.buffer,Je.byteOffset,Je.byteLength)}return h(ze)}(H);if(H==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof H);if(Be(H,ArrayBuffer)||H&&Be(H.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Be(H,SharedArrayBuffer)||H&&Be(H.buffer,SharedArrayBuffer)))return d(H,$,ne);if(typeof H=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Ie=H.valueOf&&H.valueOf();if(Ie!=null&&Ie!==H)return u.from(Ie,$,ne);const Le=function(ze){if(u.isBuffer(ze)){const Je=0|v(ze.length),Pt=s(Je);return Pt.length===0||ze.copy(Pt,0,0,Je),Pt}return ze.length!==void 0?typeof ze.length!="number"||Ye(ze.length)?s(0):h(ze):ze.type==="Buffer"&&Array.isArray(ze.data)?h(ze.data):void 0}(H);if(Le)return Le;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof H[Symbol.toPrimitive]=="function")return u.from(H[Symbol.toPrimitive]("string"),$,ne);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof H)}function c(H){if(typeof H!="number")throw new TypeError('"size" argument must be of type number');if(H<0)throw new RangeError('The value "'+H+'" is invalid for option "size"')}function f(H){return c(H),s(H<0?0:0|v(H))}function h(H){const $=H.length<0?0:0|v(H.length),ne=s($);for(let Ie=0;Ie<$;Ie+=1)ne[Ie]=255&H[Ie];return ne}function d(H,$,ne){if($<0||H.byteLength<$)throw new RangeError('"offset" is outside of buffer bounds');if(H.byteLength<$+(ne||0))throw new RangeError('"length" is outside of buffer bounds');let Ie;return Ie=$===void 0&&ne===void 0?new Uint8Array(H):ne===void 0?new Uint8Array(H,$):new Uint8Array(H,$,ne),Object.setPrototypeOf(Ie,u.prototype),Ie}function v(H){if(H>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|H}function y(H,$){if(u.isBuffer(H))return H.length;if(ArrayBuffer.isView(H)||Be(H,ArrayBuffer))return H.byteLength;if(typeof H!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof H);const ne=H.length,Ie=arguments.length>2&&arguments[2]===!0;if(!Ie&&ne===0)return 0;let Le=!1;for(;;)switch($){case"ascii":case"latin1":case"binary":return ne;case"utf8":case"utf-8":return ve(H).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*ne;case"hex":return ne>>>1;case"base64":return we(H).length;default:if(Le)return Ie?-1:ve(H).length;$=(""+$).toLowerCase(),Le=!0}}function w(H,$,ne){let Ie=!1;if(($===void 0||$<0)&&($=0),$>this.length||((ne===void 0||ne>this.length)&&(ne=this.length),ne<=0)||(ne>>>=0)<=($>>>=0))return"";for(H||(H="utf8");;)switch(H){case"hex":return W(this,$,ne);case"utf8":case"utf-8":return N(this,$,ne);case"ascii":return B(this,$,ne);case"latin1":case"binary":return z(this,$,ne);case"base64":return D(this,$,ne);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z(this,$,ne);default:if(Ie)throw new TypeError("Unknown encoding: "+H);H=(H+"").toLowerCase(),Ie=!0}}function b(H,$,ne){const Ie=H[$];H[$]=H[ne],H[ne]=Ie}function p(H,$,ne,Ie,Le){if(H.length===0)return-1;if(typeof ne=="string"?(Ie=ne,ne=0):ne>2147483647?ne=2147483647:ne<-2147483648&&(ne=-2147483648),Ye(ne=+ne)&&(ne=Le?0:H.length-1),ne<0&&(ne=H.length+ne),ne>=H.length){if(Le)return-1;ne=H.length-1}else if(ne<0){if(!Le)return-1;ne=0}if(typeof $=="string"&&($=u.from($,Ie)),u.isBuffer($))return $.length===0?-1:m(H,$,ne,Ie,Le);if(typeof $=="number")return $&=255,typeof Uint8Array.prototype.indexOf=="function"?Le?Uint8Array.prototype.indexOf.call(H,$,ne):Uint8Array.prototype.lastIndexOf.call(H,$,ne):m(H,[$],ne,Ie,Le);throw new TypeError("val must be string, number or Buffer")}function m(H,$,ne,Ie,Le){let ze,Je=1,Pt=H.length,Lt=$.length;if(Ie!==void 0&&((Ie=String(Ie).toLowerCase())==="ucs2"||Ie==="ucs-2"||Ie==="utf16le"||Ie==="utf-16le")){if(H.length<2||$.length<2)return-1;Je=2,Pt/=2,Lt/=2,ne/=2}function Wt(Bt,er){return Je===1?Bt[er]:Bt.readUInt16BE(er*Je)}if(Le){let Bt=-1;for(ze=ne;ze<Pt;ze++)if(Wt(H,ze)===Wt($,Bt===-1?0:ze-Bt)){if(Bt===-1&&(Bt=ze),ze-Bt+1===Lt)return Bt*Je}else Bt!==-1&&(ze-=ze-Bt),Bt=-1}else for(ne+Lt>Pt&&(ne=Pt-Lt),ze=ne;ze>=0;ze--){let Bt=!0;for(let er=0;er<Lt;er++)if(Wt(H,ze+er)!==Wt($,er)){Bt=!1;break}if(Bt)return ze}return-1}function x(H,$,ne,Ie){ne=Number(ne)||0;const Le=H.length-ne;Ie?(Ie=Number(Ie))>Le&&(Ie=Le):Ie=Le;const ze=$.length;let Je;for(Ie>ze/2&&(Ie=ze/2),Je=0;Je<Ie;++Je){const Pt=parseInt($.substr(2*Je,2),16);if(Ye(Pt))return Je;H[ne+Je]=Pt}return Je}function T(H,$,ne,Ie){return Oe(ve($,H.length-ne),H,ne,Ie)}function P(H,$,ne,Ie){return Oe(function(Le){const ze=[];for(let Je=0;Je<Le.length;++Je)ze.push(255&Le.charCodeAt(Je));return ze}($),H,ne,Ie)}function C(H,$,ne,Ie){return Oe(we($),H,ne,Ie)}function R(H,$,ne,Ie){return Oe(function(Le,ze){let Je,Pt,Lt;const Wt=[];for(let Bt=0;Bt<Le.length&&!((ze-=2)<0);++Bt)Je=Le.charCodeAt(Bt),Pt=Je>>8,Lt=Je%256,Wt.push(Lt),Wt.push(Pt);return Wt}($,H.length-ne),H,ne,Ie)}function D(H,$,ne){return $===0&&ne===H.length?n.fromByteArray(H):n.fromByteArray(H.slice($,ne))}function N(H,$,ne){ne=Math.min(H.length,ne);const Ie=[];let Le=$;for(;Le<ne;){const ze=H[Le];let Je=null,Pt=ze>239?4:ze>223?3:ze>191?2:1;if(Le+Pt<=ne){let Lt,Wt,Bt,er;switch(Pt){case 1:ze<128&&(Je=ze);break;case 2:Lt=H[Le+1],(192&Lt)==128&&(er=(31&ze)<<6|63&Lt,er>127&&(Je=er));break;case 3:Lt=H[Le+1],Wt=H[Le+2],(192&Lt)==128&&(192&Wt)==128&&(er=(15&ze)<<12|(63&Lt)<<6|63&Wt,er>2047&&(er<55296||er>57343)&&(Je=er));break;case 4:Lt=H[Le+1],Wt=H[Le+2],Bt=H[Le+3],(192&Lt)==128&&(192&Wt)==128&&(192&Bt)==128&&(er=(15&ze)<<18|(63&Lt)<<12|(63&Wt)<<6|63&Bt,er>65535&&er<1114112&&(Je=er))}}Je===null?(Je=65533,Pt=1):Je>65535&&(Je-=65536,Ie.push(Je>>>10&1023|55296),Je=56320|1023&Je),Ie.push(Je),Le+=Pt}return function(ze){const Je=ze.length;if(Je<=j)return String.fromCharCode.apply(String,ze);let Pt="",Lt=0;for(;Lt<Je;)Pt+=String.fromCharCode.apply(String,ze.slice(Lt,Lt+=j));return Pt}(Ie)}e.kMaxLength=o,u.TYPED_ARRAY_SUPPORT=function(){try{const H=new Uint8Array(1),$={foo:function(){return 42}};return Object.setPrototypeOf($,Uint8Array.prototype),Object.setPrototypeOf(H,$),H.foo()===42}catch{return!1}}(),u.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(H,$,ne){return l(H,$,ne)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(H,$,ne){return function(Ie,Le,ze){return c(Ie),Ie<=0?s(Ie):Le!==void 0?typeof ze=="string"?s(Ie).fill(Le,ze):s(Ie).fill(Le):s(Ie)}(H,$,ne)},u.allocUnsafe=function(H){return f(H)},u.allocUnsafeSlow=function(H){return f(H)},u.isBuffer=function(H){return H!=null&&H._isBuffer===!0&&H!==u.prototype},u.compare=function(H,$){if(Be(H,Uint8Array)&&(H=u.from(H,H.offset,H.byteLength)),Be($,Uint8Array)&&($=u.from($,$.offset,$.byteLength)),!u.isBuffer(H)||!u.isBuffer($))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(H===$)return 0;let ne=H.length,Ie=$.length;for(let Le=0,ze=Math.min(ne,Ie);Le<ze;++Le)if(H[Le]!==$[Le]){ne=H[Le],Ie=$[Le];break}return ne<Ie?-1:Ie<ne?1:0},u.isEncoding=function(H){switch(String(H).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(H,$){if(!Array.isArray(H))throw new TypeError('"list" argument must be an Array of Buffers');if(H.length===0)return u.alloc(0);let ne;if($===void 0)for($=0,ne=0;ne<H.length;++ne)$+=H[ne].length;const Ie=u.allocUnsafe($);let Le=0;for(ne=0;ne<H.length;++ne){let ze=H[ne];if(Be(ze,Uint8Array))Le+ze.length>Ie.length?(u.isBuffer(ze)||(ze=u.from(ze)),ze.copy(Ie,Le)):Uint8Array.prototype.set.call(Ie,ze,Le);else{if(!u.isBuffer(ze))throw new TypeError('"list" argument must be an Array of Buffers');ze.copy(Ie,Le)}Le+=ze.length}return Ie},u.byteLength=y,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const H=this.length;if(H%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let $=0;$<H;$+=2)b(this,$,$+1);return this},u.prototype.swap32=function(){const H=this.length;if(H%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let $=0;$<H;$+=4)b(this,$,$+3),b(this,$+1,$+2);return this},u.prototype.swap64=function(){const H=this.length;if(H%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let $=0;$<H;$+=8)b(this,$,$+7),b(this,$+1,$+6),b(this,$+2,$+5),b(this,$+3,$+4);return this},u.prototype.toString=function(){const H=this.length;return H===0?"":arguments.length===0?N(this,0,H):w.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(H){if(!u.isBuffer(H))throw new TypeError("Argument must be a Buffer");return this===H||u.compare(this,H)===0},u.prototype.inspect=function(){let H="";const $=e.INSPECT_MAX_BYTES;return H=this.toString("hex",0,$).replace(/(.{2})/g,"$1 ").trim(),this.length>$&&(H+=" ... "),"<Buffer "+H+">"},a&&(u.prototype[a]=u.prototype.inspect),u.prototype.compare=function(H,$,ne,Ie,Le){if(Be(H,Uint8Array)&&(H=u.from(H,H.offset,H.byteLength)),!u.isBuffer(H))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof H);if($===void 0&&($=0),ne===void 0&&(ne=H?H.length:0),Ie===void 0&&(Ie=0),Le===void 0&&(Le=this.length),$<0||ne>H.length||Ie<0||Le>this.length)throw new RangeError("out of range index");if(Ie>=Le&&$>=ne)return 0;if(Ie>=Le)return-1;if($>=ne)return 1;if(this===H)return 0;let ze=(Le>>>=0)-(Ie>>>=0),Je=(ne>>>=0)-($>>>=0);const Pt=Math.min(ze,Je),Lt=this.slice(Ie,Le),Wt=H.slice($,ne);for(let Bt=0;Bt<Pt;++Bt)if(Lt[Bt]!==Wt[Bt]){ze=Lt[Bt],Je=Wt[Bt];break}return ze<Je?-1:Je<ze?1:0},u.prototype.includes=function(H,$,ne){return this.indexOf(H,$,ne)!==-1},u.prototype.indexOf=function(H,$,ne){return p(this,H,$,ne,!0)},u.prototype.lastIndexOf=function(H,$,ne){return p(this,H,$,ne,!1)},u.prototype.write=function(H,$,ne,Ie){if($===void 0)Ie="utf8",ne=this.length,$=0;else if(ne===void 0&&typeof $=="string")Ie=$,ne=this.length,$=0;else{if(!isFinite($))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");$>>>=0,isFinite(ne)?(ne>>>=0,Ie===void 0&&(Ie="utf8")):(Ie=ne,ne=void 0)}const Le=this.length-$;if((ne===void 0||ne>Le)&&(ne=Le),H.length>0&&(ne<0||$<0)||$>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ie||(Ie="utf8");let ze=!1;for(;;)switch(Ie){case"hex":return x(this,H,$,ne);case"utf8":case"utf-8":return T(this,H,$,ne);case"ascii":case"latin1":case"binary":return P(this,H,$,ne);case"base64":return C(this,H,$,ne);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,H,$,ne);default:if(ze)throw new TypeError("Unknown encoding: "+Ie);Ie=(""+Ie).toLowerCase(),ze=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const j=4096;function B(H,$,ne){let Ie="";ne=Math.min(H.length,ne);for(let Le=$;Le<ne;++Le)Ie+=String.fromCharCode(127&H[Le]);return Ie}function z(H,$,ne){let Ie="";ne=Math.min(H.length,ne);for(let Le=$;Le<ne;++Le)Ie+=String.fromCharCode(H[Le]);return Ie}function W(H,$,ne){const Ie=H.length;(!$||$<0)&&($=0),(!ne||ne<0||ne>Ie)&&(ne=Ie);let Le="";for(let ze=$;ze<ne;++ze)Le+=ht[H[ze]];return Le}function Z(H,$,ne){const Ie=H.slice($,ne);let Le="";for(let ze=0;ze<Ie.length-1;ze+=2)Le+=String.fromCharCode(Ie[ze]+256*Ie[ze+1]);return Le}function Q(H,$,ne){if(H%1!=0||H<0)throw new RangeError("offset is not uint");if(H+$>ne)throw new RangeError("Trying to access beyond buffer length")}function re(H,$,ne,Ie,Le,ze){if(!u.isBuffer(H))throw new TypeError('"buffer" argument must be a Buffer instance');if($>Le||$<ze)throw new RangeError('"value" argument is out of bounds');if(ne+Ie>H.length)throw new RangeError("Index out of range")}function ee(H,$,ne,Ie,Le){Ee($,Ie,Le,H,ne,7);let ze=Number($&BigInt(4294967295));H[ne++]=ze,ze>>=8,H[ne++]=ze,ze>>=8,H[ne++]=ze,ze>>=8,H[ne++]=ze;let Je=Number($>>BigInt(32)&BigInt(4294967295));return H[ne++]=Je,Je>>=8,H[ne++]=Je,Je>>=8,H[ne++]=Je,Je>>=8,H[ne++]=Je,ne}function ue(H,$,ne,Ie,Le){Ee($,Ie,Le,H,ne,7);let ze=Number($&BigInt(4294967295));H[ne+7]=ze,ze>>=8,H[ne+6]=ze,ze>>=8,H[ne+5]=ze,ze>>=8,H[ne+4]=ze;let Je=Number($>>BigInt(32)&BigInt(4294967295));return H[ne+3]=Je,Je>>=8,H[ne+2]=Je,Je>>=8,H[ne+1]=Je,Je>>=8,H[ne]=Je,ne+8}function de(H,$,ne,Ie,Le,ze){if(ne+Ie>H.length)throw new RangeError("Index out of range");if(ne<0)throw new RangeError("Index out of range")}function se(H,$,ne,Ie,Le){return $=+$,ne>>>=0,Le||de(H,0,ne,4),i.write(H,$,ne,Ie,23,4),ne+4}function me(H,$,ne,Ie,Le){return $=+$,ne>>>=0,Le||de(H,0,ne,8),i.write(H,$,ne,Ie,52,8),ne+8}u.prototype.slice=function(H,$){const ne=this.length;(H=~~H)<0?(H+=ne)<0&&(H=0):H>ne&&(H=ne),($=$===void 0?ne:~~$)<0?($+=ne)<0&&($=0):$>ne&&($=ne),$<H&&($=H);const Ie=this.subarray(H,$);return Object.setPrototypeOf(Ie,u.prototype),Ie},u.prototype.readUintLE=u.prototype.readUIntLE=function(H,$,ne){H>>>=0,$>>>=0,ne||Q(H,$,this.length);let Ie=this[H],Le=1,ze=0;for(;++ze<$&&(Le*=256);)Ie+=this[H+ze]*Le;return Ie},u.prototype.readUintBE=u.prototype.readUIntBE=function(H,$,ne){H>>>=0,$>>>=0,ne||Q(H,$,this.length);let Ie=this[H+--$],Le=1;for(;$>0&&(Le*=256);)Ie+=this[H+--$]*Le;return Ie},u.prototype.readUint8=u.prototype.readUInt8=function(H,$){return H>>>=0,$||Q(H,1,this.length),this[H]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(H,$){return H>>>=0,$||Q(H,2,this.length),this[H]|this[H+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(H,$){return H>>>=0,$||Q(H,2,this.length),this[H]<<8|this[H+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(H,$){return H>>>=0,$||Q(H,4,this.length),(this[H]|this[H+1]<<8|this[H+2]<<16)+16777216*this[H+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(H,$){return H>>>=0,$||Q(H,4,this.length),16777216*this[H]+(this[H+1]<<16|this[H+2]<<8|this[H+3])},u.prototype.readBigUInt64LE=Ct(function(H){Ce(H>>>=0,"offset");const $=this[H],ne=this[H+7];$!==void 0&&ne!==void 0||ke(H,this.length-8);const Ie=$+256*this[++H]+65536*this[++H]+this[++H]*2**24,Le=this[++H]+256*this[++H]+65536*this[++H]+ne*2**24;return BigInt(Ie)+(BigInt(Le)<<BigInt(32))}),u.prototype.readBigUInt64BE=Ct(function(H){Ce(H>>>=0,"offset");const $=this[H],ne=this[H+7];$!==void 0&&ne!==void 0||ke(H,this.length-8);const Ie=$*2**24+65536*this[++H]+256*this[++H]+this[++H],Le=this[++H]*2**24+65536*this[++H]+256*this[++H]+ne;return(BigInt(Ie)<<BigInt(32))+BigInt(Le)}),u.prototype.readIntLE=function(H,$,ne){H>>>=0,$>>>=0,ne||Q(H,$,this.length);let Ie=this[H],Le=1,ze=0;for(;++ze<$&&(Le*=256);)Ie+=this[H+ze]*Le;return Le*=128,Ie>=Le&&(Ie-=Math.pow(2,8*$)),Ie},u.prototype.readIntBE=function(H,$,ne){H>>>=0,$>>>=0,ne||Q(H,$,this.length);let Ie=$,Le=1,ze=this[H+--Ie];for(;Ie>0&&(Le*=256);)ze+=this[H+--Ie]*Le;return Le*=128,ze>=Le&&(ze-=Math.pow(2,8*$)),ze},u.prototype.readInt8=function(H,$){return H>>>=0,$||Q(H,1,this.length),128&this[H]?-1*(255-this[H]+1):this[H]},u.prototype.readInt16LE=function(H,$){H>>>=0,$||Q(H,2,this.length);const ne=this[H]|this[H+1]<<8;return 32768&ne?4294901760|ne:ne},u.prototype.readInt16BE=function(H,$){H>>>=0,$||Q(H,2,this.length);const ne=this[H+1]|this[H]<<8;return 32768&ne?4294901760|ne:ne},u.prototype.readInt32LE=function(H,$){return H>>>=0,$||Q(H,4,this.length),this[H]|this[H+1]<<8|this[H+2]<<16|this[H+3]<<24},u.prototype.readInt32BE=function(H,$){return H>>>=0,$||Q(H,4,this.length),this[H]<<24|this[H+1]<<16|this[H+2]<<8|this[H+3]},u.prototype.readBigInt64LE=Ct(function(H){Ce(H>>>=0,"offset");const $=this[H],ne=this[H+7];$!==void 0&&ne!==void 0||ke(H,this.length-8);const Ie=this[H+4]+256*this[H+5]+65536*this[H+6]+(ne<<24);return(BigInt(Ie)<<BigInt(32))+BigInt($+256*this[++H]+65536*this[++H]+this[++H]*2**24)}),u.prototype.readBigInt64BE=Ct(function(H){Ce(H>>>=0,"offset");const $=this[H],ne=this[H+7];$!==void 0&&ne!==void 0||ke(H,this.length-8);const Ie=($<<24)+65536*this[++H]+256*this[++H]+this[++H];return(BigInt(Ie)<<BigInt(32))+BigInt(this[++H]*2**24+65536*this[++H]+256*this[++H]+ne)}),u.prototype.readFloatLE=function(H,$){return H>>>=0,$||Q(H,4,this.length),i.read(this,H,!0,23,4)},u.prototype.readFloatBE=function(H,$){return H>>>=0,$||Q(H,4,this.length),i.read(this,H,!1,23,4)},u.prototype.readDoubleLE=function(H,$){return H>>>=0,$||Q(H,8,this.length),i.read(this,H,!0,52,8)},u.prototype.readDoubleBE=function(H,$){return H>>>=0,$||Q(H,8,this.length),i.read(this,H,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(H,$,ne,Ie){H=+H,$>>>=0,ne>>>=0,Ie||re(this,H,$,ne,Math.pow(2,8*ne)-1,0);let Le=1,ze=0;for(this[$]=255&H;++ze<ne&&(Le*=256);)this[$+ze]=H/Le&255;return $+ne},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(H,$,ne,Ie){H=+H,$>>>=0,ne>>>=0,Ie||re(this,H,$,ne,Math.pow(2,8*ne)-1,0);let Le=ne-1,ze=1;for(this[$+Le]=255&H;--Le>=0&&(ze*=256);)this[$+Le]=H/ze&255;return $+ne},u.prototype.writeUint8=u.prototype.writeUInt8=function(H,$,ne){return H=+H,$>>>=0,ne||re(this,H,$,1,255,0),this[$]=255&H,$+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(H,$,ne){return H=+H,$>>>=0,ne||re(this,H,$,2,65535,0),this[$]=255&H,this[$+1]=H>>>8,$+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(H,$,ne){return H=+H,$>>>=0,ne||re(this,H,$,2,65535,0),this[$]=H>>>8,this[$+1]=255&H,$+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(H,$,ne){return H=+H,$>>>=0,ne||re(this,H,$,4,4294967295,0),this[$+3]=H>>>24,this[$+2]=H>>>16,this[$+1]=H>>>8,this[$]=255&H,$+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(H,$,ne){return H=+H,$>>>=0,ne||re(this,H,$,4,4294967295,0),this[$]=H>>>24,this[$+1]=H>>>16,this[$+2]=H>>>8,this[$+3]=255&H,$+4},u.prototype.writeBigUInt64LE=Ct(function(H,$=0){return ee(this,H,$,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=Ct(function(H,$=0){return ue(this,H,$,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(H,$,ne,Ie){if(H=+H,$>>>=0,!Ie){const Pt=Math.pow(2,8*ne-1);re(this,H,$,ne,Pt-1,-Pt)}let Le=0,ze=1,Je=0;for(this[$]=255&H;++Le<ne&&(ze*=256);)H<0&&Je===0&&this[$+Le-1]!==0&&(Je=1),this[$+Le]=(H/ze>>0)-Je&255;return $+ne},u.prototype.writeIntBE=function(H,$,ne,Ie){if(H=+H,$>>>=0,!Ie){const Pt=Math.pow(2,8*ne-1);re(this,H,$,ne,Pt-1,-Pt)}let Le=ne-1,ze=1,Je=0;for(this[$+Le]=255&H;--Le>=0&&(ze*=256);)H<0&&Je===0&&this[$+Le+1]!==0&&(Je=1),this[$+Le]=(H/ze>>0)-Je&255;return $+ne},u.prototype.writeInt8=function(H,$,ne){return H=+H,$>>>=0,ne||re(this,H,$,1,127,-128),H<0&&(H=255+H+1),this[$]=255&H,$+1},u.prototype.writeInt16LE=function(H,$,ne){return H=+H,$>>>=0,ne||re(this,H,$,2,32767,-32768),this[$]=255&H,this[$+1]=H>>>8,$+2},u.prototype.writeInt16BE=function(H,$,ne){return H=+H,$>>>=0,ne||re(this,H,$,2,32767,-32768),this[$]=H>>>8,this[$+1]=255&H,$+2},u.prototype.writeInt32LE=function(H,$,ne){return H=+H,$>>>=0,ne||re(this,H,$,4,2147483647,-2147483648),this[$]=255&H,this[$+1]=H>>>8,this[$+2]=H>>>16,this[$+3]=H>>>24,$+4},u.prototype.writeInt32BE=function(H,$,ne){return H=+H,$>>>=0,ne||re(this,H,$,4,2147483647,-2147483648),H<0&&(H=4294967295+H+1),this[$]=H>>>24,this[$+1]=H>>>16,this[$+2]=H>>>8,this[$+3]=255&H,$+4},u.prototype.writeBigInt64LE=Ct(function(H,$=0){return ee(this,H,$,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=Ct(function(H,$=0){return ue(this,H,$,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeFloatLE=function(H,$,ne){return se(this,H,$,!0,ne)},u.prototype.writeFloatBE=function(H,$,ne){return se(this,H,$,!1,ne)},u.prototype.writeDoubleLE=function(H,$,ne){return me(this,H,$,!0,ne)},u.prototype.writeDoubleBE=function(H,$,ne){return me(this,H,$,!1,ne)},u.prototype.copy=function(H,$,ne,Ie){if(!u.isBuffer(H))throw new TypeError("argument should be a Buffer");if(ne||(ne=0),Ie||Ie===0||(Ie=this.length),$>=H.length&&($=H.length),$||($=0),Ie>0&&Ie<ne&&(Ie=ne),Ie===ne||H.length===0||this.length===0)return 0;if($<0)throw new RangeError("targetStart out of bounds");if(ne<0||ne>=this.length)throw new RangeError("Index out of range");if(Ie<0)throw new RangeError("sourceEnd out of bounds");Ie>this.length&&(Ie=this.length),H.length-$<Ie-ne&&(Ie=H.length-$+ne);const Le=Ie-ne;return this===H&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin($,ne,Ie):Uint8Array.prototype.set.call(H,this.subarray(ne,Ie),$),Le},u.prototype.fill=function(H,$,ne,Ie){if(typeof H=="string"){if(typeof $=="string"?(Ie=$,$=0,ne=this.length):typeof ne=="string"&&(Ie=ne,ne=this.length),Ie!==void 0&&typeof Ie!="string")throw new TypeError("encoding must be a string");if(typeof Ie=="string"&&!u.isEncoding(Ie))throw new TypeError("Unknown encoding: "+Ie);if(H.length===1){const ze=H.charCodeAt(0);(Ie==="utf8"&&ze<128||Ie==="latin1")&&(H=ze)}}else typeof H=="number"?H&=255:typeof H=="boolean"&&(H=Number(H));if($<0||this.length<$||this.length<ne)throw new RangeError("Out of range index");if(ne<=$)return this;let Le;if($>>>=0,ne=ne===void 0?this.length:ne>>>0,H||(H=0),typeof H=="number")for(Le=$;Le<ne;++Le)this[Le]=H;else{const ze=u.isBuffer(H)?H:u.from(H,Ie),Je=ze.length;if(Je===0)throw new TypeError('The value "'+H+'" is invalid for argument "value"');for(Le=0;Le<ne-$;++Le)this[Le+$]=ze[Le%Je]}return this};const Me={};function he(H,$,ne){Me[H]=class extends ne{constructor(){super(),Object.defineProperty(this,"message",{value:$.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${H}]`,this.stack,delete this.name}get code(){return H}set code(Ie){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ie,writable:!0})}toString(){return`${this.name} [${H}]: ${this.message}`}}}function fe(H){let $="",ne=H.length;const Ie=H[0]==="-"?1:0;for(;ne>=Ie+4;ne-=3)$=`_${H.slice(ne-3,ne)}${$}`;return`${H.slice(0,ne)}${$}`}function Ee(H,$,ne,Ie,Le,ze){if(H>ne||H<$){const Je=typeof $=="bigint"?"n":"";let Pt;throw Pt=$===0||$===BigInt(0)?`>= 0${Je} and < 2${Je} ** ${8*(ze+1)}${Je}`:`>= -(2${Je} ** ${8*(ze+1)-1}${Je}) and < 2 ** ${8*(ze+1)-1}${Je}`,new Me.ERR_OUT_OF_RANGE("value",Pt,H)}(function(Je,Pt,Lt){Ce(Pt,"offset"),Je[Pt]!==void 0&&Je[Pt+Lt]!==void 0||ke(Pt,Je.length-(Lt+1))})(Ie,Le,ze)}function Ce(H,$){if(typeof H!="number")throw new Me.ERR_INVALID_ARG_TYPE($,"number",H)}function ke(H,$,ne){throw Math.floor(H)!==H?(Ce(H,ne),new Me.ERR_OUT_OF_RANGE("offset","an integer",H)):$<0?new Me.ERR_BUFFER_OUT_OF_BOUNDS:new Me.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${$}`,H)}he("ERR_BUFFER_OUT_OF_BOUNDS",function(H){return H?`${H} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),he("ERR_INVALID_ARG_TYPE",function(H,$){return`The "${H}" argument must be of type number. Received type ${typeof $}`},TypeError),he("ERR_OUT_OF_RANGE",function(H,$,ne){let Ie=`The value of "${H}" is out of range.`,Le=ne;return Number.isInteger(ne)&&Math.abs(ne)>2**32?Le=fe(String(ne)):typeof ne=="bigint"&&(Le=String(ne),(ne>BigInt(2)**BigInt(32)||ne<-(BigInt(2)**BigInt(32)))&&(Le=fe(Le)),Le+="n"),Ie+=` It must be ${$}. Received ${Le}`,Ie},RangeError);const Re=/[^+/0-9A-Za-z-_]/g;function ve(H,$){let ne;$=$||1/0;const Ie=H.length;let Le=null;const ze=[];for(let Je=0;Je<Ie;++Je){if(ne=H.charCodeAt(Je),ne>55295&&ne<57344){if(!Le){if(ne>56319){($-=3)>-1&&ze.push(239,191,189);continue}if(Je+1===Ie){($-=3)>-1&&ze.push(239,191,189);continue}Le=ne;continue}if(ne<56320){($-=3)>-1&&ze.push(239,191,189),Le=ne;continue}ne=65536+(Le-55296<<10|ne-56320)}else Le&&($-=3)>-1&&ze.push(239,191,189);if(Le=null,ne<128){if(($-=1)<0)break;ze.push(ne)}else if(ne<2048){if(($-=2)<0)break;ze.push(ne>>6|192,63&ne|128)}else if(ne<65536){if(($-=3)<0)break;ze.push(ne>>12|224,ne>>6&63|128,63&ne|128)}else{if(!(ne<1114112))throw new Error("Invalid code point");if(($-=4)<0)break;ze.push(ne>>18|240,ne>>12&63|128,ne>>6&63|128,63&ne|128)}}return ze}function we(H){return n.toByteArray(function($){if(($=($=$.split("=")[0]).trim().replace(Re,"")).length<2)return"";for(;$.length%4!=0;)$+="=";return $}(H))}function Oe(H,$,ne,Ie){let Le;for(Le=0;Le<Ie&&!(Le+ne>=$.length||Le>=H.length);++Le)$[Le+ne]=H[Le];return Le}function Be(H,$){return H instanceof $||H!=null&&H.constructor!=null&&H.constructor.name!=null&&H.constructor.name===$.name}function Ye(H){return H!=H}const ht=function(){const H="0123456789abcdef",$=new Array(256);for(let ne=0;ne<16;++ne){const Ie=16*ne;for(let Le=0;Le<16;++Le)$[Ie+Le]=H[ne]+H[Le]}return $}();function Ct(H){return typeof BigInt>"u"?ct:H}function ct(){throw new Error("BigInt not supported")}},6931:r=>{r.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},3269:(r,e,t)=>{var n=t(6931),i=t(9975),a=Object.hasOwnProperty,o=Object.create(null);for(var s in n)a.call(n,s)&&(o[n[s]]=s);var u=r.exports={to:{},get:{}};function l(f,h,d){return Math.min(Math.max(h,f),d)}function c(f){var h=Math.round(f).toString(16).toUpperCase();return h.length<2?"0"+h:h}u.get=function(f){var h,d;switch(f.substring(0,3).toLowerCase()){case"hsl":h=u.get.hsl(f),d="hsl";break;case"hwb":h=u.get.hwb(f),d="hwb";break;default:h=u.get.rgb(f),d="rgb"}return h?{model:d,value:h}:null},u.get.rgb=function(f){if(!f)return null;var h,d,v,y=[0,0,0,1];if(h=f.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(v=h[2],h=h[1],d=0;d<3;d++){var w=2*d;y[d]=parseInt(h.slice(w,w+2),16)}v&&(y[3]=parseInt(v,16)/255)}else if(h=f.match(/^#([a-f0-9]{3,4})$/i)){for(v=(h=h[1])[3],d=0;d<3;d++)y[d]=parseInt(h[d]+h[d],16);v&&(y[3]=parseInt(v+v,16)/255)}else if(h=f.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)){for(d=0;d<3;d++)y[d]=parseInt(h[d+1],0);h[4]&&(h[5]?y[3]=.01*parseFloat(h[4]):y[3]=parseFloat(h[4]))}else{if(!(h=f.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(h=f.match(/^(\w+)$/))?h[1]==="transparent"?[0,0,0,0]:a.call(n,h[1])?((y=n[h[1]])[3]=1,y):null:null;for(d=0;d<3;d++)y[d]=Math.round(2.55*parseFloat(h[d+1]));h[4]&&(h[5]?y[3]=.01*parseFloat(h[4]):y[3]=parseFloat(h[4]))}for(d=0;d<3;d++)y[d]=l(y[d],0,255);return y[3]=l(y[3],0,1),y},u.get.hsl=function(f){if(!f)return null;var h=f.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(h){var d=parseFloat(h[4]);return[(parseFloat(h[1])%360+360)%360,l(parseFloat(h[2]),0,100),l(parseFloat(h[3]),0,100),l(isNaN(d)?1:d,0,1)]}return null},u.get.hwb=function(f){if(!f)return null;var h=f.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(h){var d=parseFloat(h[4]);return[(parseFloat(h[1])%360+360)%360,l(parseFloat(h[2]),0,100),l(parseFloat(h[3]),0,100),l(isNaN(d)?1:d,0,1)]}return null},u.to.hex=function(){var f=i(arguments);return"#"+c(f[0])+c(f[1])+c(f[2])+(f[3]<1?c(Math.round(255*f[3])):"")},u.to.rgb=function(){var f=i(arguments);return f.length<4||f[3]===1?"rgb("+Math.round(f[0])+", "+Math.round(f[1])+", "+Math.round(f[2])+")":"rgba("+Math.round(f[0])+", "+Math.round(f[1])+", "+Math.round(f[2])+", "+f[3]+")"},u.to.rgb.percent=function(){var f=i(arguments),h=Math.round(f[0]/255*100),d=Math.round(f[1]/255*100),v=Math.round(f[2]/255*100);return f.length<4||f[3]===1?"rgb("+h+"%, "+d+"%, "+v+"%)":"rgba("+h+"%, "+d+"%, "+v+"%, "+f[3]+")"},u.to.hsl=function(){var f=i(arguments);return f.length<4||f[3]===1?"hsl("+f[0]+", "+f[1]+"%, "+f[2]+"%)":"hsla("+f[0]+", "+f[1]+"%, "+f[2]+"%, "+f[3]+")"},u.to.hwb=function(){var f=i(arguments),h="";return f.length>=4&&f[3]!==1&&(h=", "+f[3]),"hwb("+f[0]+", "+f[1]+"%, "+f[2]+"%"+h+")"},u.to.keyword=function(f){return o[f.slice(0,3)]}},9792:(r,e,t)=>{var n=t(7045),i=t(4360),a=t(6804);r.exports=function(o,s){if(!s)return o;var u=Object.keys(s);if(u.length===0)return o;for(var l=n(o),c=u.length-1;c>=0;c--){var f=u[c],h=String(s[f]);h&&(h=" "+h),a(l,{type:"preprocessor",data:"#define "+f+h})}return i(l)}},6804:r=>{r.exports=function(i,a){Array.isArray(a)||(a=[a]);var o=function(l){for(var c=-1,f=0;f<l.length;f++){var h=l[f];if(h.type==="preprocessor")/^#(extension|version)/.test(h.data)&&(c=Math.max(c,f));else if(h.type==="keyword"&&h.data==="precision"){var d=n(l,f);if(d===-1)throw new Error("precision statement not followed by any semicolons!");c=Math.max(c,d)}}return c+1}(i),s=o>0?i[o-1]:null;s&&t.test(s.data)&&i.splice(o++,0,e),i.splice.apply(i,[o,0].concat(a));var u=o+a.length;return i[u]&&/[^\r\n]$/.test(i[u].data)&&i.splice(u,0,e),i};var e={data:`
`,type:"whitespace"},t=/[^\r\n]$/;function n(i,a){for(var o=a;o<i.length;o++)if(i[o].type==="operator"&&i[o].data===";")return o;return-1}},4360:r=>{r.exports=function(e){for(var t=[],n=0;n<e.length;n++)e[n].type!=="eof"&&t.push(e[n].data);return t.join("")}},3206:(r,e,t)=>{r.exports=function(C){var R,D,N,j=0,B=0,z=u,W=[],Z=[],Q=1,re=0,ee=0,ue=!1,de=!1,se="",me=a,Me=n;(C=C||{}).version==="300 es"&&(me=s,Me=o);var he={},fe={};for(j=0;j<me.length;j++)he[me[j]]=!0;for(j=0;j<Me.length;j++)fe[Me[j]]=!0;return function(ct){return Z=[],ct!==null?function(H){var $;for(j=0,H.toString&&(H=H.toString()),se+=H.replace(/\r\n/g,`
`),N=se.length;R=se[j],j<N;){switch($=j,z){case c:j=ve();break;case f:case h:j=Re();break;case d:j=we();break;case v:j=Ye();break;case T:j=Be();break;case y:j=ht();break;case l:j=Ct();break;case m:j=ke();break;case u:j=Ce()}$!==j&&(se[$]===`
`?(re=0,++Q):++re)}return B+=j,se=se.slice(j),Z}(ct):(W.length&&Ee(W.join("")),z=x,Ee("(eof)"),Z)};function Ee(ct){ct.length&&Z.push({type:P[z],data:ct,position:ee,line:Q,column:re})}function Ce(){return W=W.length?[]:W,D==="/"&&R==="*"?(ee=B+j-1,z=c,D=R,j+1):D==="/"&&R==="/"?(ee=B+j-1,z=f,D=R,j+1):R==="#"?(z=h,ee=B+j,j):/\s/.test(R)?(z=m,ee=B+j,j):(ue=/\d/.test(R),de=/[^\w_]/.test(R),ee=B+j,z=ue?v:de?d:l,j)}function ke(){return/[^\s]/g.test(R)?(Ee(W.join("")),z=u,j):(W.push(R),D=R,j+1)}function Re(){return R!=="\r"&&R!==`
`||D==="\\"?(W.push(R),D=R,j+1):(Ee(W.join("")),z=u,j)}function ve(){return R==="/"&&D==="*"?(W.push(R),Ee(W.join("")),z=u,j+1):(W.push(R),D=R,j+1)}function we(){if(D==="."&&/\d/.test(R))return z=y,j;if(D==="/"&&R==="*")return z=c,j;if(D==="/"&&R==="/")return z=f,j;if(R==="."&&W.length){for(;Oe(W););return z=y,j}if(R===";"||R===")"||R==="("){if(W.length)for(;Oe(W););return Ee(R),z=u,j+1}var ct=W.length===2&&R!=="=";if(/[\w_\d\s]/.test(R)||ct){for(;Oe(W););return z=u,j}return W.push(R),D=R,j+1}function Oe(ct){for(var H,$,ne=0;;){if(H=i.indexOf(ct.slice(0,ct.length+ne).join("")),$=i[H],H===-1){if(ne--+ct.length>0)continue;$=ct.slice(0,1).join("")}return Ee($),ee+=$.length,(W=W.slice($.length)).length}}function Be(){return/[^a-fA-F0-9]/.test(R)?(Ee(W.join("")),z=u,j):(W.push(R),D=R,j+1)}function Ye(){return R==="."||/[eE]/.test(R)?(W.push(R),z=y,D=R,j+1):R==="x"&&W.length===1&&W[0]==="0"?(z=T,W.push(R),D=R,j+1):/[^\d]/.test(R)?(Ee(W.join("")),z=u,j):(W.push(R),D=R,j+1)}function ht(){return R==="f"&&(W.push(R),D=R,j+=1),/[eE]/.test(R)?(W.push(R),D=R,j+1):(R!=="-"&&R!=="+"||!/[eE]/.test(D))&&/[^\d]/.test(R)?(Ee(W.join("")),z=u,j):(W.push(R),D=R,j+1)}function Ct(){if(/[^\d\w_]/.test(R)){var ct=W.join("");return z=fe[ct]?p:he[ct]?b:w,Ee(W.join("")),z=u,j}return W.push(R),D=R,j+1}};var n=t(4704),i=t(2063),a=t(7192),o=t(8784),s=t(5592),u=999,l=9999,c=0,f=1,h=2,d=3,v=4,y=5,w=6,b=7,p=8,m=9,x=10,T=11,P=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},5592:(r,e,t)=>{var n=t(7192);n=n.slice().filter(function(i){return!/^(gl\_|texture)/.test(i)}),r.exports=n.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},7192:r=>{r.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},8784:(r,e,t)=>{var n=t(4704);r.exports=n.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},4704:r=>{r.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},2063:r=>{r.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},7045:(r,e,t)=>{var n=t(3206);r.exports=function(i,a){var o=n(a),s=[];return(s=s.concat(o(i))).concat(o(null))}},9318:(r,e)=>{e.read=function(t,n,i,a,o){var s,u,l=8*o-a-1,c=(1<<l)-1,f=c>>1,h=-7,d=i?o-1:0,v=i?-1:1,y=t[n+d];for(d+=v,s=y&(1<<-h)-1,y>>=-h,h+=l;h>0;s=256*s+t[n+d],d+=v,h-=8);for(u=s&(1<<-h)-1,s>>=-h,h+=a;h>0;u=256*u+t[n+d],d+=v,h-=8);if(s===0)s=1-f;else{if(s===c)return u?NaN:1/0*(y?-1:1);u+=Math.pow(2,a),s-=f}return(y?-1:1)*u*Math.pow(2,s-a)},e.write=function(t,n,i,a,o,s){var u,l,c,f=8*s-o-1,h=(1<<f)-1,d=h>>1,v=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=a?0:s-1,w=a?1:-1,b=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(l=isNaN(n)?1:0,u=h):(u=Math.floor(Math.log(n)/Math.LN2),n*(c=Math.pow(2,-u))<1&&(u--,c*=2),(n+=u+d>=1?v/c:v*Math.pow(2,1-d))*c>=2&&(u++,c/=2),u+d>=h?(l=0,u=h):u+d>=1?(l=(n*c-1)*Math.pow(2,o),u+=d):(l=n*Math.pow(2,d-1)*Math.pow(2,o),u=0));o>=8;t[i+y]=255&l,y+=w,l/=256,o-=8);for(u=u<<o|l,f+=o;f>0;t[i+y]=255&u,y+=w,u/=256,f-=8);t[i+y-w]|=128*b}},5250:function(r,e,t){var n;r=t.nmd(r),(function(){var i,a="Expected a function",o="__lodash_hash_undefined__",s="__lodash_placeholder__",u=32,l=128,c=1/0,f=9007199254740991,h=NaN,d=4294967295,v=[["ary",l],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",u],["partialRight",64],["rearg",256]],y="[object Arguments]",w="[object Array]",b="[object Boolean]",p="[object Date]",m="[object Error]",x="[object Function]",T="[object GeneratorFunction]",P="[object Map]",C="[object Number]",R="[object Object]",D="[object Promise]",N="[object RegExp]",j="[object Set]",B="[object String]",z="[object Symbol]",W="[object WeakMap]",Z="[object ArrayBuffer]",Q="[object DataView]",re="[object Float32Array]",ee="[object Float64Array]",ue="[object Int8Array]",de="[object Int16Array]",se="[object Int32Array]",me="[object Uint8Array]",Me="[object Uint8ClampedArray]",he="[object Uint16Array]",fe="[object Uint32Array]",Ee=/\b__p \+= '';/g,Ce=/\b(__p \+=) '' \+/g,ke=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Re=/&(?:amp|lt|gt|quot|#39);/g,ve=/[&<>"']/g,we=RegExp(Re.source),Oe=RegExp(ve.source),Be=/<%-([\s\S]+?)%>/g,Ye=/<%([\s\S]+?)%>/g,ht=/<%=([\s\S]+?)%>/g,Ct=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ct=/^\w*$/,H=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$=/[\\^$.*+?()[\]{}|]/g,ne=RegExp($.source),Ie=/^\s+/,Le=/\s/,ze=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Je=/\{\n\/\* \[wrapped with (.+)\] \*/,Pt=/,? & /,Lt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Wt=/[()=,{}\[\]\/\s]/,Bt=/\\(\\)?/g,er=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ar=/\w*$/,Yt=/^[-+]0x[0-9a-f]+$/i,dt=/^0b[01]+$/i,be=/^\[object .+?Constructor\]$/,it=/^0o[0-7]+$/i,st=/^(?:0|[1-9]\d*)$/,ut=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,lt=/($^)/,Xt=/['\n\r\u2028\u2029\\]/g,pt="\\ud800-\\udfff",Qt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",mr="\\u2700-\\u27bf",Rr="a-z\\xdf-\\xf6\\xf8-\\xff",ar="A-Z\\xc0-\\xd6\\xd8-\\xde",nr="\\ufe0e\\ufe0f",tr="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",lr="["+pt+"]",Vr="["+tr+"]",fn="["+Qt+"]",In="\\d+",Un="["+mr+"]",hn="["+Rr+"]",Kn="[^"+pt+tr+In+mr+Rr+ar+"]",vn="\\ud83c[\\udffb-\\udfff]",Ei="[^"+pt+"]",Li="(?:\\ud83c[\\udde6-\\uddff]){2}",Br="[\\ud800-\\udbff][\\udc00-\\udfff]",Tn="["+ar+"]",Ni="\\u200d",_o="(?:"+hn+"|"+Kn+")",Pi="(?:"+Tn+"|"+Kn+")",vi="(?:['](?:d|ll|m|re|s|t|ve))?",un="(?:['](?:D|LL|M|RE|S|T|VE))?",zn="(?:"+fn+"|"+vn+")?",Ta="["+nr+"]?",pi=Ta+zn+"(?:"+Ni+"(?:"+[Ei,Li,Br].join("|")+")"+Ta+zn+")*",Ou="(?:"+[Un,Li,Br].join("|")+")"+pi,Ca="(?:"+[Ei+fn+"?",fn,Li,Br,lr].join("|")+")",Hi=RegExp("[']","g"),Wa=RegExp(fn,"g"),na=RegExp(vn+"(?="+vn+")|"+Ca+pi,"g"),kn=RegExp([Tn+"?"+hn+"+"+vi+"(?="+[Vr,Tn,"$"].join("|")+")",Pi+"+"+un+"(?="+[Vr,Tn+_o,"$"].join("|")+")",Tn+"?"+_o+"+"+vi,Tn+"+"+un,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",In,Ou].join("|"),"g"),ui=RegExp("["+Ni+pt+Qt+nr+"]"),pr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Pa=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],lo=-1,qr={};qr[re]=qr[ee]=qr[ue]=qr[de]=qr[se]=qr[me]=qr[Me]=qr[he]=qr[fe]=!0,qr[y]=qr[w]=qr[Z]=qr[b]=qr[Q]=qr[p]=qr[m]=qr[x]=qr[P]=qr[C]=qr[R]=qr[N]=qr[j]=qr[B]=qr[W]=!1;var Kr={};Kr[y]=Kr[w]=Kr[Z]=Kr[Q]=Kr[b]=Kr[p]=Kr[re]=Kr[ee]=Kr[ue]=Kr[de]=Kr[se]=Kr[P]=Kr[C]=Kr[R]=Kr[N]=Kr[j]=Kr[B]=Kr[z]=Kr[me]=Kr[Me]=Kr[he]=Kr[fe]=!0,Kr[m]=Kr[x]=Kr[W]=!1;var Ha={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Hs=parseFloat,eo=parseInt,ia=typeof t.g=="object"&&t.g&&t.g.Object===Object&&t.g,Su=typeof self=="object"&&self&&self.Object===Object&&self,Dn=ia||Su||Function("return this")(),Ai=e&&!e.nodeType&&e,Yi=Ai&&r&&!r.nodeType&&r,Tu=Yi&&Yi.exports===Ai,rl=Tu&&ia.process,ji=function(){try{return Yi&&Yi.require&&Yi.require("util").types||rl&&rl.binding&&rl.binding("util")}catch{}}(),Ya=ji&&ji.isArrayBuffer,Ys=ji&&ji.isDate,ec=ji&&ji.isMap,tc=ji&&ji.isRegExp,zr=ji&&ji.isSet,Uo=ji&&ji.isTypedArray;function co(at,gt,yt){switch(yt.length){case 0:return at.call(gt);case 1:return at.call(gt,yt[0]);case 2:return at.call(gt,yt[0],yt[1]);case 3:return at.call(gt,yt[0],yt[1],yt[2])}return at.apply(gt,yt)}function rc(at,gt,yt,Vt){for(var ir=-1,Jr=at==null?0:at.length;++ir<Jr;){var Ri=at[ir];gt(Vt,Ri,yt(Ri),at)}return Vt}function qt(at,gt){for(var yt=-1,Vt=at==null?0:at.length;++yt<Vt&&gt(at[yt],yt,at)!==!1;);return at}function Xs(at,gt){for(var yt=at==null?0:at.length;yt--&&gt(at[yt],yt,at)!==!1;);return at}function nc(at,gt){for(var yt=-1,Vt=at==null?0:at.length;++yt<Vt;)if(!gt(at[yt],yt,at))return!1;return!0}function Aa(at,gt){for(var yt=-1,Vt=at==null?0:at.length,ir=0,Jr=[];++yt<Vt;){var Ri=at[yt];gt(Ri,yt,at)&&(Jr[ir++]=Ri)}return Jr}function Cu(at,gt){return!(at==null||!at.length)&&Ks(at,gt,0)>-1}function wo(at,gt,yt){for(var Vt=-1,ir=at==null?0:at.length;++Vt<ir;)if(yt(gt,at[Vt]))return!0;return!1}function $r(at,gt){for(var yt=-1,Vt=at==null?0:at.length,ir=Array(Vt);++yt<Vt;)ir[yt]=gt(at[yt],yt,at);return ir}function oa(at,gt){for(var yt=-1,Vt=gt.length,ir=at.length;++yt<Vt;)at[ir+yt]=gt[yt];return at}function nl(at,gt,yt,Vt){var ir=-1,Jr=at==null?0:at.length;for(Vt&&Jr&&(yt=at[++ir]);++ir<Jr;)yt=gt(yt,at[ir],ir,at);return yt}function oh(at,gt,yt,Vt){var ir=at==null?0:at.length;for(Vt&&ir&&(yt=at[--ir]);ir--;)yt=gt(yt,at[ir],ir,at);return yt}function ic(at,gt){for(var yt=-1,Vt=at==null?0:at.length;++yt<Vt;)if(gt(at[yt],yt,at))return!0;return!1}var ah=oc("length");function Qc(at,gt,yt){var Vt;return yt(at,function(ir,Jr,Ri){if(gt(ir,Jr,Ri))return Vt=Jr,!1}),Vt}function il(at,gt,yt,Vt){for(var ir=at.length,Jr=yt+(Vt?1:-1);Vt?Jr--:++Jr<ir;)if(gt(at[Jr],Jr,at))return Jr;return-1}function Ks(at,gt,yt){return gt==gt?function(Vt,ir,Jr){for(var Ri=Jr-1,ro=Vt.length;++Ri<ro;)if(Vt[Ri]===ir)return Ri;return-1}(at,gt,yt):il(at,Xa,yt)}function _s(at,gt,yt,Vt){for(var ir=yt-1,Jr=at.length;++ir<Jr;)if(Vt(at[ir],gt))return ir;return-1}function Xa(at){return at!=at}function ol(at,gt){var yt=at==null?0:at.length;return yt?$s(at,gt)/yt:h}function oc(at){return function(gt){return gt==null?i:gt[at]}}function ac(at){return function(gt){return at==null?i:at[gt]}}function al(at,gt,yt,Vt,ir){return ir(at,function(Jr,Ri,ro){yt=Vt?(Vt=!1,Jr):gt(yt,Jr,Ri,ro)}),yt}function $s(at,gt){for(var yt,Vt=-1,ir=at.length;++Vt<ir;){var Jr=gt(at[Vt]);Jr!==i&&(yt=yt===i?Jr:yt+Jr)}return yt}function sl(at,gt){for(var yt=-1,Vt=Array(at);++yt<at;)Vt[yt]=gt(yt);return Vt}function pn(at){return at&&at.slice(0,Ra(at)+1).replace(Ie,"")}function Dr(at){return function(gt){return at(gt)}}function sc(at,gt){return $r(gt,function(yt){return at[yt]})}function Zs(at,gt){return at.has(gt)}function Jc(at,gt){for(var yt=-1,Vt=at.length;++yt<Vt&&Ks(gt,at[yt],0)>-1;);return yt}function ws(at,gt){for(var yt=at.length;yt--&&Ks(gt,at[yt],0)>-1;);return yt}var Ka=ac({:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"}),sh=ac({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function md(at){return"\\"+Ha[at]}function Qs(at){return ui.test(at)}function Gn(at){var gt=-1,yt=Array(at.size);return at.forEach(function(Vt,ir){yt[++gt]=[ir,Vt]}),yt}function uc(at,gt){return function(yt){return at(gt(yt))}}function to(at,gt){for(var yt=-1,Vt=at.length,ir=0,Jr=[];++yt<Vt;){var Ri=at[yt];Ri!==gt&&Ri!==s||(at[yt]=s,Jr[ir++]=yt)}return Jr}function Js(at){var gt=-1,yt=Array(at.size);return at.forEach(function(Vt){yt[++gt]=Vt}),yt}function lc(at){var gt=-1,yt=Array(at.size);return at.forEach(function(Vt){yt[++gt]=[Vt,Vt]}),yt}function Bi(at){return Qs(at)?function(gt){for(var yt=na.lastIndex=0;na.test(gt);)++yt;return yt}(at):ah(at)}function $n(at){return Qs(at)?function(gt){return gt.match(na)||[]}(at):function(gt){return gt.split("")}(at)}function Ra(at){for(var gt=at.length;gt--&&Le.test(at.charAt(gt)););return gt}var Ia=ac({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),aa=function at(gt){var yt,Vt=(gt=gt==null?Dn:aa.defaults(Dn.Object(),gt,aa.pick(Dn,Pa))).Array,ir=gt.Date,Jr=gt.Error,Ri=gt.Function,ro=gt.Math,gn=gt.Object,ef=gt.RegExp,Vn=gt.String,gi=gt.TypeError,cc=Vt.prototype,Wv=Ri.prototype,Pu=gn.prototype,ul=gt["__core-js_shared__"],Au=Wv.toString,en=Pu.hasOwnProperty,fc=0,eu=(yt=/[^.]+$/.exec(ul&&ul.keys&&ul.keys.IE_PROTO||""))?"Symbol(src)_1."+yt:"",Es=Pu.toString,uh=Au.call(gn),Ru=Dn._,tf=ef("^"+Au.call(en).replace($,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xs=Tu?gt.Buffer:i,$a=gt.Symbol,hc=gt.Uint8Array,Hv=xs?xs.allocUnsafe:i,Iu=uc(gn.getPrototypeOf,gn),rf=gn.create,bd=Pu.propertyIsEnumerable,nf=cc.splice,fo=$a?$a.isConcatSpreadable:i,ku=$a?$a.iterator:i,Za=$a?$a.toStringTag:i,of=function(){try{var A=lu(gn,"defineProperty");return A({},"",{}),A}catch{}}(),Yv=gt.clearTimeout!==Dn.clearTimeout&&gt.clearTimeout,Xv=ir&&ir.now!==Dn.Date.now&&ir.now,Eo=gt.setTimeout!==Dn.setTimeout&&gt.setTimeout,lh=ro.ceil,ch=ro.floor,af=gn.getOwnPropertySymbols,Du=xs?xs.isBuffer:i,_d=gt.isFinite,xo=cc.join,no=uc(gn.keys,gn),Cn=ro.max,qn=ro.min,fh=ir.now,fg=gt.parseInt,Kv=ro.random,$v=cc.reverse,rr=lu(gt,"DataView"),io=lu(gt,"Map"),Zn=lu(gt,"Promise"),ll=lu(gt,"Set"),dc=lu(gt,"WeakMap"),vc=lu(gn,"create"),sf=dc&&new dc,cl={},fl=hu(rr),Qe=hu(io),vt=hu(Zn),rt=hu(ll),Kt=hu(dc),br=$a?$a.prototype:i,Yr=br?br.valueOf:i,yi=br?br.toString:i;function pe(A){if(Mn(A)&&!Tr(A)&&!(A instanceof Fr)){if(A instanceof Qn)return A;if(en.call(A,"__wrapped__"))return Rd(A)}return new Qn(A)}var Os=function(){function A(){}return function(L){if(!Yn(L))return{};if(rf)return rf(L);A.prototype=L;var V=new A;return A.prototype=i,V}}();function hh(){}function Qn(A,L){this.__wrapped__=A,this.__actions__=[],this.__chain__=!!L,this.__index__=0,this.__values__=i}function Fr(A){this.__wrapped__=A,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=d,this.__views__=[]}function tu(A){var L=-1,V=A==null?0:A.length;for(this.clear();++L<V;){var te=A[L];this.set(te[0],te[1])}}function zo(A){var L=-1,V=A==null?0:A.length;for(this.clear();++L<V;){var te=A[L];this.set(te[0],te[1])}}function Xi(A){var L=-1,V=A==null?0:A.length;for(this.clear();++L<V;){var te=A[L];this.set(te[0],te[1])}}function Qa(A){var L=-1,V=A==null?0:A.length;for(this.__data__=new Xi;++L<V;)this.add(A[L])}function Nr(A){var L=this.__data__=new zo(A);this.size=L.size}function Zv(A,L){var V=Tr(A),te=!V&&Yo(A),ae=!V&&!te&&Qi(A),Se=!V&&!te&&!ae&&cs(A),Ge=V||te||ae||Se,He=Ge?sl(A.length,Vn):[],ot=He.length;for(var wt in A)!L&&!en.call(A,wt)||Ge&&(wt=="length"||ae&&(wt=="offset"||wt=="parent")||Se&&(wt=="buffer"||wt=="byteLength"||wt=="byteOffset")||$i(wt,ot))||He.push(wt);return He}function dh(A){var L=A.length;return L?A[ju(0,L-1)]:i}function sa(A,L){return Of(So(A),ka(L,0,A.length))}function wd(A){return Of(So(A))}function Ed(A,L,V){(V!==i&&!oo(A[L],V)||V===i&&!(L in A))&&Ss(A,L,V)}function uf(A,L,V){var te=A[L];en.call(A,L)&&oo(te,V)&&(V!==i||L in A)||Ss(A,L,V)}function Mu(A,L){for(var V=A.length;V--;)if(oo(A[V][0],L))return V;return-1}function Gr(A,L,V,te){return Vo(A,function(ae,Se,Ge){L(te,ae,V(ae),Ge)}),te}function hl(A,L){return A&&es(L,zi(L),A)}function Ss(A,L,V){L=="__proto__"&&of?of(A,L,{configurable:!0,enumerable:!0,value:V,writable:!0}):A[L]=V}function dl(A,L){for(var V=-1,te=L.length,ae=Vt(te),Se=A==null;++V<te;)ae[V]=Se?i:Gd(A,L[V]);return ae}function ka(A,L,V){return A==A&&(V!==i&&(A=A<=V?A:V),L!==i&&(A=A>=L?A:L)),A}function Go(A,L,V,te,ae,Se){var Ge,He=1&L,ot=2&L,wt=4&L;if(V&&(Ge=ae?V(A,te,ae,Se):V(A)),Ge!==i)return Ge;if(!Yn(A))return A;var _t=Tr(A);if(_t){if(Ge=function(xt){var Dt=xt.length,vr=new xt.constructor(Dt);return Dt&&typeof xt[0]=="string"&&en.call(xt,"index")&&(vr.index=xt.index,vr.input=xt.input),vr}(A),!He)return So(A,Ge)}else{var Rt=Pn(A),$t=Rt==x||Rt==T;if(Qi(A))return wl(A,He);if(Rt==R||Rt==y||$t&&!ae){if(Ge=ot||$t?{}:Sl(A),!He)return ot?function(xt,Dt){return es(xt,Ol(xt),Dt)}(A,function(xt,Dt){return xt&&es(Dt,Ur(Dt),xt)}(Ge,A)):function(xt,Dt){return es(xt,Cd(xt),Dt)}(A,hl(Ge,A))}else{if(!Kr[Rt])return ae?A:{};Ge=function(xt,Dt,vr){var jt,Er=xt.constructor;switch(Dt){case Z:return _c(xt);case b:case p:return new Er(+xt);case Q:return function(wr,tn){var sr=tn?_c(wr.buffer):wr.buffer;return new wr.constructor(sr,wr.byteOffset,wr.byteLength)}(xt,vr);case re:case ee:case ue:case de:case se:case me:case Me:case he:case fe:return yf(xt,vr);case P:return new Er;case C:case B:return new Er(xt);case N:return function(wr){var tn=new wr.constructor(wr.source,Ar.exec(wr));return tn.lastIndex=wr.lastIndex,tn}(xt);case j:return new Er;case z:return jt=xt,Yr?gn(Yr.call(jt)):{}}}(A,Rt,He)}}Se||(Se=new Nr);var Zt=Se.get(A);if(Zt)return Zt;Se.set(A,Ge),pa(A)?A.forEach(function(xt){Ge.add(Go(xt,L,V,xt,A,Se))}):Lh(A)&&A.forEach(function(xt,Dt){Ge.set(Dt,Go(xt,L,V,Dt,A,Se))});var cr=_t?i:(wt?ot?as:Tc:ot?Ur:zi)(A);return qt(cr||A,function(xt,Dt){cr&&(xt=A[Dt=xt]),uf(Ge,Dt,Go(xt,L,V,Dt,A,Se))}),Ge}function vl(A,L,V){var te=V.length;if(A==null)return!te;for(A=gn(A);te--;){var ae=V[te],Se=L[ae],Ge=A[ae];if(Ge===i&&!(ae in A)||!Se(Ge))return!1}return!0}function lf(A,L,V){if(typeof A!="function")throw new gi(a);return Pl(function(){A.apply(i,V)},L)}function Ts(A,L,V,te){var ae=-1,Se=Cu,Ge=!0,He=A.length,ot=[],wt=L.length;if(!He)return ot;V&&(L=$r(L,Dr(V))),te?(Se=wo,Ge=!1):L.length>=200&&(Se=Zs,Ge=!1,L=new Qa(L));e:for(;++ae<He;){var _t=A[ae],Rt=V==null?_t:V(_t);if(_t=te||_t!==0?_t:0,Ge&&Rt==Rt){for(var $t=wt;$t--;)if(L[$t]===Rt)continue e;ot.push(_t)}else Se(L,Rt,te)||ot.push(_t)}return ot}pe.templateSettings={escape:Be,evaluate:Ye,interpolate:ht,variable:"",imports:{_:pe}},pe.prototype=hh.prototype,pe.prototype.constructor=pe,Qn.prototype=Os(hh.prototype),Qn.prototype.constructor=Qn,Fr.prototype=Os(hh.prototype),Fr.prototype.constructor=Fr,tu.prototype.clear=function(){this.__data__=vc?vc(null):{},this.size=0},tu.prototype.delete=function(A){var L=this.has(A)&&delete this.__data__[A];return this.size-=L?1:0,L},tu.prototype.get=function(A){var L=this.__data__;if(vc){var V=L[A];return V===o?i:V}return en.call(L,A)?L[A]:i},tu.prototype.has=function(A){var L=this.__data__;return vc?L[A]!==i:en.call(L,A)},tu.prototype.set=function(A,L){var V=this.__data__;return this.size+=this.has(A)?0:1,V[A]=vc&&L===i?o:L,this},zo.prototype.clear=function(){this.__data__=[],this.size=0},zo.prototype.delete=function(A){var L=this.__data__,V=Mu(L,A);return!(V<0||(V==L.length-1?L.pop():nf.call(L,V,1),--this.size,0))},zo.prototype.get=function(A){var L=this.__data__,V=Mu(L,A);return V<0?i:L[V][1]},zo.prototype.has=function(A){return Mu(this.__data__,A)>-1},zo.prototype.set=function(A,L){var V=this.__data__,te=Mu(V,A);return te<0?(++this.size,V.push([A,L])):V[te][1]=L,this},Xi.prototype.clear=function(){this.size=0,this.__data__={hash:new tu,map:new(io||zo),string:new tu}},Xi.prototype.delete=function(A){var L=uu(this,A).delete(A);return this.size-=L?1:0,L},Xi.prototype.get=function(A){return uu(this,A).get(A)},Xi.prototype.has=function(A){return uu(this,A).has(A)},Xi.prototype.set=function(A,L){var V=uu(this,A),te=V.size;return V.set(A,L),this.size+=V.size==te?0:1,this},Qa.prototype.add=Qa.prototype.push=function(A){return this.__data__.set(A,o),this},Qa.prototype.has=function(A){return this.__data__.has(A)},Nr.prototype.clear=function(){this.__data__=new zo,this.size=0},Nr.prototype.delete=function(A){var L=this.__data__,V=L.delete(A);return this.size=L.size,V},Nr.prototype.get=function(A){return this.__data__.get(A)},Nr.prototype.has=function(A){return this.__data__.has(A)},Nr.prototype.set=function(A,L){var V=this.__data__;if(V instanceof zo){var te=V.__data__;if(!io||te.length<199)return te.push([A,L]),this.size=++V.size,this;V=this.__data__=new Xi(te)}return V.set(A,L),this.size=V.size,this};var Vo=As(Cs),Oo=As(ff,!0);function Qv(A,L){var V=!0;return Vo(A,function(te,ae,Se){return V=!!L(te,ae,Se)}),V}function cf(A,L,V){for(var te=-1,ae=A.length;++te<ae;){var Se=A[te],Ge=L(Se);if(Ge!=null&&(He===i?Ge==Ge&&!Co(Ge):V(Ge,He)))var He=Ge,ot=Se}return ot}function xd(A,L){var V=[];return Vo(A,function(te,ae,Se){L(te,ae,Se)&&V.push(te)}),V}function Wn(A,L,V,te,ae){var Se=-1,Ge=A.length;for(V||(V=Tl),ae||(ae=[]);++Se<Ge;){var He=A[Se];L>0&&V(He)?L>1?Wn(He,L-1,V,te,ae):oa(ae,He):te||(ae[ae.length]=He)}return ae}var pl=Ec(),vh=Ec(!0);function Cs(A,L){return A&&pl(A,L,zi)}function ff(A,L){return A&&vh(A,L,zi)}function hf(A,L){return Aa(L,function(V){return Ba(A[V])})}function ru(A,L){for(var V=0,te=(L=po(L,A)).length;A!=null&&V<te;)A=A[xi(L[V++])];return V&&V==te?A:i}function Ii(A,L,V){var te=L(A);return Tr(A)?te:oa(te,V(A))}function dn(A){return A==null?A===i?"[object Undefined]":"[object Null]":Za&&Za in gn(A)?function(L){var V=en.call(L,Za),te=L[Za];try{L[Za]=i;var ae=!0}catch{}var Se=Es.call(L);return ae&&(V?L[Za]=te:delete L[Za]),Se}(A):function(L){return Es.call(L)}(A)}function ph(A,L){return A>L}function gl(A,L){return A!=null&&en.call(A,L)}function gh(A,L){return A!=null&&L in gn(A)}function Lu(A,L,V){for(var te=V?wo:Cu,ae=A[0].length,Se=A.length,Ge=Se,He=Vt(Se),ot=1/0,wt=[];Ge--;){var _t=A[Ge];Ge&&L&&(_t=$r(_t,Dr(L))),ot=qn(_t.length,ot),He[Ge]=!V&&(L||ae>=120&&_t.length>=120)?new Qa(Ge&&_t):i}_t=A[0];var Rt=-1,$t=He[0];e:for(;++Rt<ae&&wt.length<ot;){var Zt=_t[Rt],cr=L?L(Zt):Zt;if(Zt=V||Zt!==0?Zt:0,!($t?Zs($t,cr):te(wt,cr,V))){for(Ge=Se;--Ge;){var xt=He[Ge];if(!(xt?Zs(xt,cr):te(A[Ge],cr,V)))continue e}$t&&$t.push(cr),wt.push(Zt)}}return wt}function nu(A,L,V){var te=(A=ip(A,L=po(L,A)))==null?A:A[xi(li(L))];return te==null?i:co(te,A,V)}function Da(A){return Mn(A)&&dn(A)==y}function Nu(A,L,V,te,ae){return A===L||(A==null||L==null||!Mn(A)&&!Mn(L)?A!=A&&L!=L:function(Se,Ge,He,ot,wt,_t){var Rt=Tr(Se),$t=Tr(Ge),Zt=Rt?w:Pn(Se),cr=$t?w:Pn(Ge),xt=(Zt=Zt==y?R:Zt)==R,Dt=(cr=cr==y?R:cr)==R,vr=Zt==cr;if(vr&&Qi(Se)){if(!Qi(Ge))return!1;Rt=!0,xt=!1}if(vr&&!xt)return _t||(_t=new Nr),Rt||cs(Se)?Ho(Se,Ge,He,ot,wt,_t):function(sr,dr,Oi,Xn,Ro,Ln,mo){switch(Oi){case Q:if(sr.byteLength!=dr.byteLength||sr.byteOffset!=dr.byteOffset)return!1;sr=sr.buffer,dr=dr.buffer;case Z:return!(sr.byteLength!=dr.byteLength||!Ln(new hc(sr),new hc(dr)));case b:case p:case C:return oo(+sr,+dr);case m:return sr.name==dr.name&&sr.message==dr.message;case N:case B:return sr==dr+"";case P:var ks=Gn;case j:var Ds=1&Xn;if(ks||(ks=Js),sr.size!=dr.size&&!Ds)return!1;var ds=mo.get(sr);if(ds)return ds==dr;Xn|=2,mo.set(sr,dr);var vs=Ho(ks(sr),ks(dr),Xn,Ro,Ln,mo);return mo.delete(sr),vs;case z:if(Yr)return Yr.call(sr)==Yr.call(dr)}return!1}(Se,Ge,Zt,He,ot,wt,_t);if(!(1&He)){var jt=xt&&en.call(Se,"__wrapped__"),Er=Dt&&en.call(Ge,"__wrapped__");if(jt||Er){var wr=jt?Se.value():Se,tn=Er?Ge.value():Ge;return _t||(_t=new Nr),wt(wr,tn,He,ot,_t)}}return!!vr&&(_t||(_t=new Nr),function(sr,dr,Oi,Xn,Ro,Ln){var mo=1&Oi,ks=Tc(sr),Ds=ks.length;if(Ds!=Tc(dr).length&&!mo)return!1;for(var ds=Ds;ds--;){var vs=ks[ds];if(!(mo?vs in dr:en.call(dr,vs)))return!1}var Ms=Ln.get(sr),rv=Ln.get(dr);if(Ms&&rv)return Ms==dr&&rv==sr;var Bf=!0;Ln.set(sr,dr),Ln.set(dr,sr);for(var nv=mo;++ds<Ds;){var Ls=sr[vs=ks[ds]],Nc=dr[vs];if(Xn)var iv=mo?Xn(Nc,Ls,vs,dr,sr,Ln):Xn(Ls,Nc,vs,sr,dr,Ln);if(!(iv===i?Ls===Nc||Ro(Ls,Nc,Oi,Xn,Ln):iv)){Bf=!1;break}nv||(nv=vs=="constructor")}if(Bf&&!nv){var Ff=sr.constructor,Uf=dr.constructor;Ff==Uf||!("constructor"in sr)||!("constructor"in dr)||typeof Ff=="function"&&Ff instanceof Ff&&typeof Uf=="function"&&Uf instanceof Uf||(Bf=!1)}return Ln.delete(sr),Ln.delete(dr),Bf}(Se,Ge,He,ot,wt,_t))}(A,L,V,te,Nu,ae))}function iu(A,L,V,te){var ae=V.length,Se=ae,Ge=!te;if(A==null)return!Se;for(A=gn(A);ae--;){var He=V[ae];if(Ge&&He[2]?He[1]!==A[He[0]]:!(He[0]in A))return!1}for(;++ae<Se;){var ot=(He=V[ae])[0],wt=A[ot],_t=He[1];if(Ge&&He[2]){if(wt===i&&!(ot in A))return!1}else{var Rt=new Nr;if(te)var $t=te(wt,_t,ot,A,L,Rt);if(!($t===i?Nu(_t,wt,3,te,Rt):$t))return!1}}return!0}function pc(A){return!(!Yn(A)||(L=A,eu&&eu in L))&&(Ba(A)?tf:be).test(hu(A));var L}function yl(A){return typeof A=="function"?A:A==null?$o:typeof A=="object"?Tr(A)?gc(A[0],A[1]):Od(A):$d(A)}function ou(A){if(!cu(A))return no(A);var L=[];for(var V in gn(A))en.call(A,V)&&V!="constructor"&&L.push(V);return L}function Ps(A,L){return A<L}function Jv(A,L){var V=-1,te=To(A)?Vt(A.length):[];return Vo(A,function(ae,Se,Ge){te[++V]=L(ae,Se,Ge)}),te}function Od(A){var L=Ef(A);return L.length==1&&L[0][2]?Na(L[0][0],L[0][1]):function(V){return V===A||iu(V,A,L)}}function gc(A,L){return Fi(A)&&np(L)?Na(xi(A),L):function(V){var te=Gd(V,A);return te===i&&te===L?Vd(V,A):Nu(L,te,3)}}function yh(A,L,V,te,ae){A!==L&&pl(L,function(Se,Ge){if(ae||(ae=new Nr),Yn(Se))(function(ot,wt,_t,Rt,$t,Zt,cr){var xt=fu(ot,_t),Dt=fu(wt,_t),vr=cr.get(Dt);if(vr)Ed(ot,_t,vr);else{var jt=Zt?Zt(xt,Dt,_t+"",ot,wt,cr):i,Er=jt===i;if(Er){var wr=Tr(Dt),tn=!wr&&Qi(Dt),sr=!wr&&!tn&&cs(Dt);jt=Dt,wr||tn||sr?Tr(xt)?jt=xt:Hn(xt)?jt=So(xt):tn?(Er=!1,jt=wl(Dt,!0)):sr?(Er=!1,jt=yf(Dt,!0)):jt=[]:Ic(Dt)||Yo(Dt)?(jt=xt,Yo(xt)?jt=Bh(xt):Yn(xt)&&!Ba(xt)||(jt=Sl(Dt))):Er=!1}Er&&(cr.set(Dt,jt),$t(jt,Dt,Rt,Zt,cr),cr.delete(Dt)),Ed(ot,_t,jt)}})(A,L,Ge,V,yh,te,ae);else{var He=te?te(fu(A,Ge),Se,Ge+"",A,L,ae):i;He===i&&(He=Se),Ed(A,Ge,He)}},Ur)}function yc(A,L){var V=A.length;if(V)return $i(L+=L<0?V:0,V)?A[L]:i}function mc(A,L,V){L=L.length?$r(L,function(Se){return Tr(Se)?function(Ge){return ru(Ge,Se.length===1?Se[0]:Se)}:Se}):[$o];var te=-1;L=$r(L,Dr(_r()));var ae=Jv(A,function(Se,Ge,He){var ot=$r(L,function(wt){return wt(Se)});return{criteria:ot,index:++te,value:Se}});return function(Se,Ge){var He=Se.length;for(Se.sort(function(ot,wt){return function(_t,Rt,$t){for(var Zt=-1,cr=_t.criteria,xt=Rt.criteria,Dt=cr.length,vr=$t.length;++Zt<Dt;){var jt=rp(cr[Zt],xt[Zt]);if(jt)return Zt>=vr?jt:jt*($t[Zt]=="desc"?-1:1)}return _t.index-Rt.index}(ot,wt,V)});He--;)Se[He]=Se[He].value;return Se}(ae)}function ua(A,L,V){for(var te=-1,ae=L.length,Se={};++te<ae;){var Ge=L[te],He=ru(A,Ge);V(He,Ge)&&ml(Se,po(Ge,A),He)}return Se}function au(A,L,V,te){var ae=te?_s:Ks,Se=-1,Ge=L.length,He=A;for(A===L&&(L=So(L)),V&&(He=$r(A,Dr(V)));++Se<Ge;)for(var ot=0,wt=L[Se],_t=V?V(wt):wt;(ot=ae(He,_t,ot,te))>-1;)He!==A&&nf.call(He,ot,1),nf.call(A,ot,1);return A}function _e(A,L){for(var V=A?L.length:0,te=V-1;V--;){var ae=L[V];if(V==te||ae!==Se){var Se=ae;$i(ae)?nf.call(A,ae,1):mh(A,ae)}}return A}function ju(A,L){return A+ch(Kv()*(L-A+1))}function Bu(A,L){var V="";if(!A||L<1||L>f)return V;do L%2&&(V+=A),(L=ch(L/2))&&(A+=A);while(L);return V}function gr(A,L){return Sh(xf(A,L,$o),A+"")}function jr(A){return dh(yu(A))}function df(A,L){var V=yu(A);return Of(V,ka(L,0,V.length))}function ml(A,L,V,te){if(!Yn(A))return A;for(var ae=-1,Se=(L=po(L,A)).length,Ge=Se-1,He=A;He!=null&&++ae<Se;){var ot=xi(L[ae]),wt=V;if(ot==="__proto__"||ot==="constructor"||ot==="prototype")return A;if(ae!=Ge){var _t=He[ot];(wt=te?te(_t,ot,He):i)===i&&(wt=Yn(_t)?_t:$i(L[ae+1])?[]:{})}uf(He,ot,wt),He=He[ot]}return A}var vf=sf?function(A,L){return sf.set(A,L),A}:$o,Ja=of?function(A,L){return of(A,"toString",{configurable:!0,enumerable:!1,value:ci(L),writable:!0})}:$o;function hg(A){return Of(yu(A))}function Ma(A,L,V){var te=-1,ae=A.length;L<0&&(L=-L>ae?0:ae+L),(V=V>ae?ae:V)<0&&(V+=ae),ae=L>V?0:V-L>>>0,L>>>=0;for(var Se=Vt(ae);++te<ae;)Se[te]=A[te+L];return Se}function ep(A,L){var V;return Vo(A,function(te,ae,Se){return!(V=L(te,ae,Se))}),!!V}function pf(A,L,V){var te=0,ae=A==null?te:A.length;if(typeof L=="number"&&L==L&&ae<=2147483647){for(;te<ae;){var Se=te+ae>>>1,Ge=A[Se];Ge!==null&&!Co(Ge)&&(V?Ge<=L:Ge<L)?te=Se+1:ae=Se}return ae}return bl(A,L,$o,V)}function bl(A,L,V,te){var ae=0,Se=A==null?0:A.length;if(Se===0)return 0;for(var Ge=(L=V(L))!=L,He=L===null,ot=Co(L),wt=L===i;ae<Se;){var _t=ch((ae+Se)/2),Rt=V(A[_t]),$t=Rt!==i,Zt=Rt===null,cr=Rt==Rt,xt=Co(Rt);if(Ge)var Dt=te||cr;else Dt=wt?cr&&(te||$t):He?cr&&$t&&(te||!Zt):ot?cr&&$t&&!Zt&&(te||!xt):!Zt&&!xt&&(te?Rt<=L:Rt<L);Dt?ae=_t+1:Se=_t}return qn(Se,4294967294)}function La(A,L){for(var V=-1,te=A.length,ae=0,Se=[];++V<te;){var Ge=A[V],He=L?L(Ge):Ge;if(!V||!oo(He,ot)){var ot=He;Se[ae++]=Ge===0?0:Ge}}return Se}function Sd(A){return typeof A=="number"?A:Co(A)?h:+A}function la(A){if(typeof A=="string")return A;if(Tr(A))return $r(A,la)+"";if(Co(A))return yi?yi.call(A):"";var L=A+"";return L=="0"&&1/A==-1/0?"-0":L}function or(A,L,V){var te=-1,ae=Cu,Se=A.length,Ge=!0,He=[],ot=He;if(V)Ge=!1,ae=wo;else if(Se>=200){var wt=L?null:wf(A);if(wt)return Js(wt);Ge=!1,ae=Zs,ot=new Qa}else ot=L?[]:He;e:for(;++te<Se;){var _t=A[te],Rt=L?L(_t):_t;if(_t=V||_t!==0?_t:0,Ge&&Rt==Rt){for(var $t=ot.length;$t--;)if(ot[$t]===Rt)continue e;L&&ot.push(Rt),He.push(_t)}else ae(ot,Rt,V)||(ot!==He&&ot.push(Rt),He.push(_t))}return He}function mh(A,L){return(A=ip(A,L=po(L,A)))==null||delete A[xi(li(L))]}function ho(A,L,V,te){return ml(A,L,V(ru(A,L)),te)}function vo(A,L,V,te){for(var ae=A.length,Se=te?ae:-1;(te?Se--:++Se<ae)&&L(A[Se],Se,A););return V?Ma(A,te?0:Se,te?Se+1:ae):Ma(A,te?Se+1:0,te?ae:Se)}function ca(A,L){var V=A;return V instanceof Fr&&(V=V.value()),nl(L,function(te,ae){return ae.func.apply(ae.thisArg,oa([te],ae.args))},V)}function gf(A,L,V){var te=A.length;if(te<2)return te?or(A[0]):[];for(var ae=-1,Se=Vt(te);++ae<te;)for(var Ge=A[ae],He=-1;++He<te;)He!=ae&&(Se[ae]=Ts(Se[ae]||Ge,A[He],L,V));return or(Wn(Se,1),L,V)}function tp(A,L,V){for(var te=-1,ae=A.length,Se=L.length,Ge={};++te<ae;){var He=te<Se?L[te]:i;V(Ge,A[te],He)}return Ge}function _l(A){return Hn(A)?A:[]}function bc(A){return typeof A=="function"?A:$o}function po(A,L){return Tr(A)?A:Fi(A,L)?[A]:Th(ln(A))}var dg=gr;function fa(A,L,V){var te=A.length;return V=V===i?te:V,!L&&V>=te?A:Ma(A,L,V)}var ha=Yv||function(A){return Dn.clearTimeout(A)};function wl(A,L){if(L)return A.slice();var V=A.length,te=Hv?Hv(V):new A.constructor(V);return A.copy(te),te}function _c(A){var L=new A.constructor(A.byteLength);return new hc(L).set(new hc(A)),L}function yf(A,L){var V=L?_c(A.buffer):A.buffer;return new A.constructor(V,A.byteOffset,A.length)}function rp(A,L){if(A!==L){var V=A!==i,te=A===null,ae=A==A,Se=Co(A),Ge=L!==i,He=L===null,ot=L==L,wt=Co(L);if(!He&&!wt&&!Se&&A>L||Se&&Ge&&ot&&!He&&!wt||te&&Ge&&ot||!V&&ot||!ae)return 1;if(!te&&!Se&&!wt&&A<L||wt&&V&&ae&&!te&&!Se||He&&V&&ae||!Ge&&ae||!ot)return-1}return 0}function wc(A,L,V,te){for(var ae=-1,Se=A.length,Ge=V.length,He=-1,ot=L.length,wt=Cn(Se-Ge,0),_t=Vt(ot+wt),Rt=!te;++He<ot;)_t[He]=L[He];for(;++ae<Ge;)(Rt||ae<Se)&&(_t[V[ae]]=A[ae]);for(;wt--;)_t[He++]=A[ae++];return _t}function bh(A,L,V,te){for(var ae=-1,Se=A.length,Ge=-1,He=V.length,ot=-1,wt=L.length,_t=Cn(Se-He,0),Rt=Vt(_t+wt),$t=!te;++ae<_t;)Rt[ae]=A[ae];for(var Zt=ae;++ot<wt;)Rt[Zt+ot]=L[ot];for(;++Ge<He;)($t||ae<Se)&&(Rt[Zt+V[Ge]]=A[ae++]);return Rt}function So(A,L){var V=-1,te=A.length;for(L||(L=Vt(te));++V<te;)L[V]=A[V];return L}function es(A,L,V,te){var ae=!V;V||(V={});for(var Se=-1,Ge=L.length;++Se<Ge;){var He=L[Se],ot=te?te(V[He],A[He],He,V,A):i;ot===i&&(ot=A[He]),ae?Ss(V,He,ot):uf(V,He,ot)}return V}function mf(A,L){return function(V,te){var ae=Tr(V)?rc:Gr,Se=L?L():{};return ae(V,A,_r(te,2),Se)}}function Fu(A){return gr(function(L,V){var te=-1,ae=V.length,Se=ae>1?V[ae-1]:i,Ge=ae>2?V[2]:i;for(Se=A.length>3&&typeof Se=="function"?(ae--,Se):i,Ge&&go(V[0],V[1],Ge)&&(Se=ae<3?i:Se,ae=1),L=gn(L);++te<ae;){var He=V[te];He&&A(L,He,te,Se)}return L})}function As(A,L){return function(V,te){if(V==null)return V;if(!To(V))return A(V,te);for(var ae=V.length,Se=L?ae:-1,Ge=gn(V);(L?Se--:++Se<ae)&&te(Ge[Se],Se,Ge)!==!1;);return V}}function Ec(A){return function(L,V,te){for(var ae=-1,Se=gn(L),Ge=te(L),He=Ge.length;He--;){var ot=Ge[A?He:++ae];if(V(Se[ot],ot,Se)===!1)break}return L}}function ts(A){return function(L){var V=Qs(L=ln(L))?$n(L):i,te=V?V[0]:L.charAt(0),ae=V?fa(V,1).join(""):L.slice(1);return te[A]()+ae}}function El(A){return function(L){return nl(Lf(fs(L).replace(Hi,"")),A,"")}}function su(A){return function(){var L=arguments;switch(L.length){case 0:return new A;case 1:return new A(L[0]);case 2:return new A(L[0],L[1]);case 3:return new A(L[0],L[1],L[2]);case 4:return new A(L[0],L[1],L[2],L[3]);case 5:return new A(L[0],L[1],L[2],L[3],L[4]);case 6:return new A(L[0],L[1],L[2],L[3],L[4],L[5]);case 7:return new A(L[0],L[1],L[2],L[3],L[4],L[5],L[6])}var V=Os(A.prototype),te=A.apply(V,L);return Yn(te)?te:V}}function rs(A){return function(L,V,te){var ae=gn(L);if(!To(L)){var Se=_r(V,3);L=zi(L),V=function(He){return Se(ae[He],He,ae)}}var Ge=A(L,V,te);return Ge>-1?ae[Se?L[Ge]:Ge]:i}}function bf(A){return da(function(L){var V=L.length,te=V,ae=Qn.prototype.thru;for(A&&L.reverse();te--;){var Se=L[te];if(typeof Se!="function")throw new gi(a);if(ae&&!Ge&&Ki(Se)=="wrapper")var Ge=new Qn([],!0)}for(te=Ge?te:V;++te<V;){var He=Ki(Se=L[te]),ot=He=="wrapper"?Eh(Se):i;Ge=ot&&Cl(ot[0])&&ot[1]==424&&!ot[4].length&&ot[9]==1?Ge[Ki(ot[0])].apply(Ge,ot[3]):Se.length==1&&Cl(Se)?Ge[He]():Ge.thru(Se)}return function(){var wt=arguments,_t=wt[0];if(Ge&&wt.length==1&&Tr(_t))return Ge.plant(_t).value();for(var Rt=0,$t=V?L[Rt].apply(this,wt):_t;++Rt<V;)$t=L[Rt].call(this,$t);return $t}})}function ns(A,L,V,te,ae,Se,Ge,He,ot,wt){var _t=L&l,Rt=1&L,$t=2&L,Zt=24&L,cr=512&L,xt=$t?i:su(A);return function Dt(){for(var vr=arguments.length,jt=Vt(vr),Er=vr;Er--;)jt[Er]=arguments[Er];if(Zt)var wr=Uu(Dt),tn=function(Xn,Ro){for(var Ln=Xn.length,mo=0;Ln--;)Xn[Ln]===Ro&&++mo;return mo}(jt,wr);if(te&&(jt=wc(jt,te,ae,Zt)),Se&&(jt=bh(jt,Se,Ge,Zt)),vr-=tn,Zt&&vr<wt){var sr=to(jt,wr);return wh(A,L,ns,Dt.placeholder,V,jt,sr,He,ot,wt-vr)}var dr=Rt?V:this,Oi=$t?dr[A]:A;return vr=jt.length,He?jt=function(Xn,Ro){for(var Ln=Xn.length,mo=qn(Ro.length,Ln),ks=So(Xn);mo--;){var Ds=Ro[mo];Xn[mo]=$i(Ds,Ln)?ks[Ds]:i}return Xn}(jt,He):cr&&vr>1&&jt.reverse(),_t&&ot<vr&&(jt.length=ot),this&&this!==Dn&&this instanceof Dt&&(Oi=xt||su(Oi)),Oi.apply(dr,jt)}}function qo(A,L){return function(V,te){return function(ae,Se,Ge,He){return Cs(ae,function(ot,wt,_t){Se(He,Ge(ot),wt,_t)}),He}(V,A,L(te),{})}}function _h(A,L){return function(V,te){var ae;if(V===i&&te===i)return L;if(V!==i&&(ae=V),te!==i){if(ae===i)return te;typeof V=="string"||typeof te=="string"?(V=la(V),te=la(te)):(V=Sd(V),te=Sd(te)),ae=A(V,te)}return ae}}function _f(A){return da(function(L){return L=$r(L,Dr(_r())),gr(function(V){var te=this;return A(L,function(ae){return co(ae,te,V)})})})}function Wo(A,L){var V=(L=L===i?" ":la(L)).length;if(V<2)return V?Bu(L,A):L;var te=Bu(L,lh(A/Bi(L)));return Qs(L)?fa($n(te),0,A).join(""):te.slice(0,A)}function xc(A){return function(L,V,te){return te&&typeof te!="number"&&go(L,V,te)&&(V=te=i),L=ga(L),V===i?(V=L,L=0):V=ga(V),function(ae,Se,Ge,He){for(var ot=-1,wt=Cn(lh((Se-ae)/(Ge||1)),0),_t=Vt(wt);wt--;)_t[He?wt:++ot]=ae,ae+=Ge;return _t}(L,V,te=te===i?L<V?1:-1:ga(te),A)}}function is(A){return function(L,V){return typeof L=="string"&&typeof V=="string"||(L=ya(L),V=ya(V)),A(L,V)}}function wh(A,L,V,te,ae,Se,Ge,He,ot,wt){var _t=8&L;L|=_t?u:64,4&(L&=~(_t?64:u))||(L&=-4);var Rt=[A,L,ae,_t?Se:i,_t?Ge:i,_t?i:Se,_t?i:Ge,He,ot,wt],$t=V.apply(i,Rt);return Cl(A)&&Oh($t,Rt),$t.placeholder=te,ss($t,A,L)}function xl(A){var L=ro[A];return function(V,te){if(V=ya(V),(te=te==null?0:qn(kr(te),292))&&_d(V)){var ae=(ln(V)+"e").split("e");return+((ae=(ln(L(ae[0]+"e"+(+ae[1]+te)))+"e").split("e"))[0]+"e"+(+ae[1]-te))}return L(V)}}var wf=ll&&1/Js(new ll([,-0]))[1]==c?function(A){return new ll(A)}:qh;function Td(A){return function(L){var V=Pn(L);return V==P?Gn(L):V==j?lc(L):function(te,ae){return $r(ae,function(Se){return[Se,te[Se]]})}(L,A(L))}}function os(A,L,V,te,ae,Se,Ge,He){var ot=2&L;if(!ot&&typeof A!="function")throw new gi(a);var wt=te?te.length:0;if(wt||(L&=-97,te=ae=i),Ge=Ge===i?Ge:Cn(kr(Ge),0),He=He===i?He:kr(He),wt-=ae?ae.length:0,64&L){var _t=te,Rt=ae;te=ae=i}var $t=ot?i:Eh(A),Zt=[A,L,V,te,ae,_t,Rt,Se,Ge,He];if($t&&function(xt,Dt){var vr=xt[1],jt=Dt[1],Er=vr|jt,wr=Er<131,tn=jt==l&&vr==8||jt==l&&vr==256&&xt[7].length<=Dt[8]||jt==384&&Dt[7].length<=Dt[8]&&vr==8;if(!wr&&!tn)return xt;1&jt&&(xt[2]=Dt[2],Er|=1&vr?0:4);var sr=Dt[3];if(sr){var dr=xt[3];xt[3]=dr?wc(dr,sr,Dt[4]):sr,xt[4]=dr?to(xt[3],s):Dt[4]}(sr=Dt[5])&&(dr=xt[5],xt[5]=dr?bh(dr,sr,Dt[6]):sr,xt[6]=dr?to(xt[5],s):Dt[6]),(sr=Dt[7])&&(xt[7]=sr),jt&l&&(xt[8]=xt[8]==null?Dt[8]:qn(xt[8],Dt[8])),xt[9]==null&&(xt[9]=Dt[9]),xt[0]=Dt[0],xt[1]=Er}(Zt,$t),A=Zt[0],L=Zt[1],V=Zt[2],te=Zt[3],ae=Zt[4],!(He=Zt[9]=Zt[9]===i?ot?0:A.length:Cn(Zt[9]-wt,0))&&24&L&&(L&=-25),L&&L!=1)cr=L==8||L==16?function(xt,Dt,vr){var jt=su(xt);return function Er(){for(var wr=arguments.length,tn=Vt(wr),sr=wr,dr=Uu(Er);sr--;)tn[sr]=arguments[sr];var Oi=wr<3&&tn[0]!==dr&&tn[wr-1]!==dr?[]:to(tn,dr);return(wr-=Oi.length)<vr?wh(xt,Dt,ns,Er.placeholder,i,tn,Oi,i,i,vr-wr):co(this&&this!==Dn&&this instanceof Er?jt:xt,this,tn)}}(A,L,He):L!=u&&L!=33||ae.length?ns.apply(i,Zt):function(xt,Dt,vr,jt){var Er=1&Dt,wr=su(xt);return function tn(){for(var sr=-1,dr=arguments.length,Oi=-1,Xn=jt.length,Ro=Vt(Xn+dr),Ln=this&&this!==Dn&&this instanceof tn?wr:xt;++Oi<Xn;)Ro[Oi]=jt[Oi];for(;dr--;)Ro[Oi++]=arguments[++sr];return co(Ln,Er?vr:this,Ro)}}(A,L,V,te);else var cr=function(xt,Dt,vr){var jt=1&Dt,Er=su(xt);return function wr(){return(this&&this!==Dn&&this instanceof wr?Er:xt).apply(jt?vr:this,arguments)}}(A,L,V);return ss(($t?vf:Oh)(cr,Zt),A,L)}function ki(A,L,V,te){return A===i||oo(A,Pu[V])&&!en.call(te,V)?L:A}function Oc(A,L,V,te,ae,Se){return Yn(A)&&Yn(L)&&(Se.set(L,A),yh(A,L,i,Oc,Se),Se.delete(L)),A}function Sc(A){return Ic(A)?i:A}function Ho(A,L,V,te,ae,Se){var Ge=1&V,He=A.length,ot=L.length;if(He!=ot&&!(Ge&&ot>He))return!1;var wt=Se.get(A),_t=Se.get(L);if(wt&&_t)return wt==L&&_t==A;var Rt=-1,$t=!0,Zt=2&V?new Qa:i;for(Se.set(A,L),Se.set(L,A);++Rt<He;){var cr=A[Rt],xt=L[Rt];if(te)var Dt=Ge?te(xt,cr,Rt,L,A,Se):te(cr,xt,Rt,A,L,Se);if(Dt!==i){if(Dt)continue;$t=!1;break}if(Zt){if(!ic(L,function(vr,jt){if(!Zs(Zt,jt)&&(cr===vr||ae(cr,vr,V,te,Se)))return Zt.push(jt)})){$t=!1;break}}else if(cr!==xt&&!ae(cr,xt,V,te,Se)){$t=!1;break}}return Se.delete(A),Se.delete(L),$t}function da(A){return Sh(xf(A,i,op),A+"")}function Tc(A){return Ii(A,zi,Cd)}function as(A){return Ii(A,Ur,Ol)}var Eh=sf?function(A){return sf.get(A)}:qh;function Ki(A){for(var L=A.name+"",V=cl[L],te=en.call(cl,L)?V.length:0;te--;){var ae=V[te],Se=ae.func;if(Se==null||Se==A)return ae.name}return L}function Uu(A){return(en.call(pe,"placeholder")?pe:A).placeholder}function _r(){var A=pe.iteratee||so;return A=A===so?yl:A,arguments.length?A(arguments[0],arguments[1]):A}function uu(A,L){var V,te,ae=A.__data__;return((te=typeof(V=L))=="string"||te=="number"||te=="symbol"||te=="boolean"?V!=="__proto__":V===null)?ae[typeof L=="string"?"string":"hash"]:ae.map}function Ef(A){for(var L=zi(A),V=L.length;V--;){var te=L[V],ae=A[te];L[V]=[te,ae,np(ae)]}return L}function lu(A,L){var V=function(te,ae){return te==null?i:te[ae]}(A,L);return pc(V)?V:i}var Cd=af?function(A){return A==null?[]:(A=gn(A),Aa(af(A),function(L){return bd.call(A,L)}))}:Ao,Ol=af?function(A){for(var L=[];A;)oa(L,Cd(A)),A=Iu(A);return L}:Ao,Pn=dn;function xh(A,L,V){for(var te=-1,ae=(L=po(L,A)).length,Se=!1;++te<ae;){var Ge=xi(L[te]);if(!(Se=A!=null&&V(A,Ge)))break;A=A[Ge]}return Se||++te!=ae?Se:!!(ae=A==null?0:A.length)&&Xo(ae)&&$i(Ge,ae)&&(Tr(A)||Yo(A))}function Sl(A){return typeof A.constructor!="function"||cu(A)?{}:Os(Iu(A))}function Tl(A){return Tr(A)||Yo(A)||!!(fo&&A&&A[fo])}function $i(A,L){var V=typeof A;return!!(L=L??f)&&(V=="number"||V!="symbol"&&st.test(A))&&A>-1&&A%1==0&&A<L}function go(A,L,V){if(!Yn(V))return!1;var te=typeof L;return!!(te=="number"?To(V)&&$i(L,V.length):te=="string"&&L in V)&&oo(V[L],A)}function Fi(A,L){if(Tr(A))return!1;var V=typeof A;return!(V!="number"&&V!="symbol"&&V!="boolean"&&A!=null&&!Co(A))||ct.test(A)||!Ct.test(A)||L!=null&&A in gn(L)}function Cl(A){var L=Ki(A),V=pe[L];if(typeof V!="function"||!(L in Fr.prototype))return!1;if(A===V)return!0;var te=Eh(V);return!!te&&A===te[0]}(rr&&Pn(new rr(new ArrayBuffer(1)))!=Q||io&&Pn(new io)!=P||Zn&&Pn(Zn.resolve())!=D||ll&&Pn(new ll)!=j||dc&&Pn(new dc)!=W)&&(Pn=function(A){var L=dn(A),V=L==R?A.constructor:i,te=V?hu(V):"";if(te)switch(te){case fl:return Q;case Qe:return P;case vt:return D;case rt:return j;case Kt:return W}return L});var vg=ul?Ba:Wh;function cu(A){var L=A&&A.constructor;return A===(typeof L=="function"&&L.prototype||Pu)}function np(A){return A==A&&!Yn(A)}function Na(A,L){return function(V){return V!=null&&V[A]===L&&(L!==i||A in gn(V))}}function xf(A,L,V){return L=Cn(L===i?A.length-1:L,0),function(){for(var te=arguments,ae=-1,Se=Cn(te.length-L,0),Ge=Vt(Se);++ae<Se;)Ge[ae]=te[L+ae];ae=-1;for(var He=Vt(L+1);++ae<L;)He[ae]=te[ae];return He[L]=V(Ge),co(A,this,He)}}function ip(A,L){return L.length<2?A:ru(A,Ma(L,0,-1))}function fu(A,L){if((L!=="constructor"||typeof A[L]!="function")&&L!="__proto__")return A[L]}var Oh=Pd(vf),Pl=Eo||function(A,L){return Dn.setTimeout(A,L)},Sh=Pd(Ja);function ss(A,L,V){var te=L+"";return Sh(A,function(ae,Se){var Ge=Se.length;if(!Ge)return ae;var He=Ge-1;return Se[He]=(Ge>1?"& ":"")+Se[He],Se=Se.join(Ge>2?", ":" "),ae.replace(ze,`{
/* [wrapped with `+Se+`] */
`)}(te,function(ae,Se){return qt(v,function(Ge){var He="_."+Ge[0];Se&Ge[1]&&!Cu(ae,He)&&ae.push(He)}),ae.sort()}(function(ae){var Se=ae.match(Je);return Se?Se[1].split(Pt):[]}(te),V)))}function Pd(A){var L=0,V=0;return function(){var te=fh(),ae=16-(te-V);if(V=te,ae>0){if(++L>=800)return arguments[0]}else L=0;return A.apply(i,arguments)}}function Of(A,L){var V=-1,te=A.length,ae=te-1;for(L=L===i?te:L;++V<L;){var Se=ju(V,ae),Ge=A[Se];A[Se]=A[V],A[V]=Ge}return A.length=L,A}var zu,Ad,Th=(zu=ls(function(A){var L=[];return A.charCodeAt(0)===46&&L.push(""),A.replace(H,function(V,te,ae,Se){L.push(ae?Se.replace(Bt,"$1"):te||V)}),L},function(A){return Ad.size===500&&Ad.clear(),A}),Ad=zu.cache,zu);function xi(A){if(typeof A=="string"||Co(A))return A;var L=A+"";return L=="0"&&1/A==-1/0?"-0":L}function hu(A){if(A!=null){try{return Au.call(A)}catch{}try{return A+""}catch{}}return""}function Rd(A){if(A instanceof Fr)return A.clone();var L=new Qn(A.__wrapped__,A.__chain__);return L.__actions__=So(A.__actions__),L.__index__=A.__index__,L.__values__=A.__values__,L}var Al=gr(function(A,L){return Hn(A)?Ts(A,Wn(L,1,Hn,!0)):[]}),Id=gr(function(A,L){var V=li(L);return Hn(V)&&(V=i),Hn(A)?Ts(A,Wn(L,1,Hn,!0),_r(V,2)):[]}),kd=gr(function(A,L){var V=li(L);return Hn(V)&&(V=i),Hn(A)?Ts(A,Wn(L,1,Hn,!0),i,V):[]});function Or(A,L,V){var te=A==null?0:A.length;if(!te)return-1;var ae=V==null?0:kr(V);return ae<0&&(ae=Cn(te+ae,0)),il(A,_r(L,3),ae)}function Dd(A,L,V){var te=A==null?0:A.length;if(!te)return-1;var ae=te-1;return V!==i&&(ae=kr(V),ae=V<0?Cn(te+ae,0):qn(ae,te-1)),il(A,_r(L,3),ae,!0)}function op(A){return A!=null&&A.length?Wn(A,1):[]}function Rl(A){return A&&A.length?A[0]:i}var Md=gr(function(A){var L=$r(A,_l);return L.length&&L[0]===A[0]?Lu(L):[]}),ap=gr(function(A){var L=li(A),V=$r(A,_l);return L===li(V)?L=i:V.pop(),V.length&&V[0]===A[0]?Lu(V,_r(L,2)):[]}),Sf=gr(function(A){var L=li(A),V=$r(A,_l);return(L=typeof L=="function"?L:i)&&V.pop(),V.length&&V[0]===A[0]?Lu(V,i,L):[]});function li(A){var L=A==null?0:A.length;return L?A[L-1]:i}var sp=gr(Tf);function Tf(A,L){return A&&A.length&&L&&L.length?au(A,L):A}var Ch=da(function(A,L){var V=A==null?0:A.length,te=dl(A,L);return _e(A,$r(L,function(ae){return $i(ae,V)?+ae:ae}).sort(rp)),te});function Cf(A){return A==null?A:$v.call(A)}var up=gr(function(A){return or(Wn(A,1,Hn,!0))}),va=gr(function(A){var L=li(A);return Hn(L)&&(L=i),or(Wn(A,1,Hn,!0),_r(L,2))}),Gu=gr(function(A){var L=li(A);return L=typeof L=="function"?L:i,or(Wn(A,1,Hn,!0),i,L)});function du(A){if(!A||!A.length)return[];var L=0;return A=Aa(A,function(V){if(Hn(V))return L=Cn(V.length,L),!0}),sl(L,function(V){return $r(A,oc(V))})}function Ph(A,L){if(!A||!A.length)return[];var V=du(A);return L==null?V:$r(V,function(te){return co(L,i,te)})}var Ah=gr(function(A,L){return Hn(A)?Ts(A,L):[]}),Vu=gr(function(A){return gf(Aa(A,Hn))}),Rh=gr(function(A){var L=li(A);return Hn(L)&&(L=i),gf(Aa(A,Hn),_r(L,2))}),Pf=gr(function(A){var L=li(A);return L=typeof L=="function"?L:i,gf(Aa(A,Hn),i,L)}),Cc=gr(du),Zi=gr(function(A){var L=A.length,V=L>1?A[L-1]:i;return V=typeof V=="function"?(A.pop(),V):i,Ph(A,V)});function us(A){var L=pe(A);return L.__chain__=!0,L}function Ih(A,L){return L(A)}var Rs=da(function(A){var L=A.length,V=L?A[0]:0,te=this.__wrapped__,ae=function(Se){return dl(Se,A)};return!(L>1||this.__actions__.length)&&te instanceof Fr&&$i(V)?((te=te.slice(V,+V+(L?1:0))).__actions__.push({func:Ih,args:[ae],thisArg:i}),new Qn(te,this.__chain__).thru(function(Se){return L&&!Se.length&&Se.push(i),Se})):this.thru(ae)}),lp=mf(function(A,L,V){en.call(A,V)?++A[V]:Ss(A,V,1)}),Ld=rs(Or),Il=rs(Dd);function Pc(A,L){return(Tr(A)?qt:Vo)(A,_r(L,3))}function Nd(A,L){return(Tr(A)?Xs:Oo)(A,_r(L,3))}var kh=mf(function(A,L,V){en.call(A,V)?A[V].push(L):Ss(A,V,[L])}),jd=gr(function(A,L,V){var te=-1,ae=typeof L=="function",Se=To(A)?Vt(A.length):[];return Vo(A,function(Ge){Se[++te]=ae?co(L,Ge,V):nu(Ge,L,V)}),Se}),Dh=mf(function(A,L,V){Ss(A,V,L)});function kl(A,L){return(Tr(A)?$r:Jv)(A,_r(L,3))}var Bd=mf(function(A,L,V){A[V?0:1].push(L)},function(){return[[],[]]}),cp=gr(function(A,L){if(A==null)return[];var V=L.length;return V>1&&go(A,L[0],L[1])?L=[]:V>2&&go(L[0],L[1],L[2])&&(L=[L[0]]),mc(A,Wn(L,1),[])}),Ui=Xv||function(){return Dn.Date.now()};function ja(A,L,V){return L=V?i:L,L=A&&L==null?A.length:L,os(A,l,i,i,i,i,L)}function Fd(A,L){var V;if(typeof L!="function")throw new gi(a);return A=kr(A),function(){return--A>0&&(V=L.apply(this,arguments)),A<=1&&(L=i),V}}var Af=gr(function(A,L,V){var te=1;if(V.length){var ae=to(V,Uu(Af));te|=u}return os(A,te,L,V,ae)}),Rf=gr(function(A,L,V){var te=3;if(V.length){var ae=to(V,Uu(Rf));te|=u}return os(L,te,A,V,ae)});function Is(A,L,V){var te,ae,Se,Ge,He,ot,wt=0,_t=!1,Rt=!1,$t=!0;if(typeof A!="function")throw new gi(a);function Zt(jt){var Er=te,wr=ae;return te=ae=i,wt=jt,Ge=A.apply(wr,Er)}function cr(jt){var Er=jt-ot;return ot===i||Er>=L||Er<0||Rt&&jt-wt>=Se}function xt(){var jt=Ui();if(cr(jt))return Dt(jt);He=Pl(xt,function(Er){var wr=L-(Er-ot);return Rt?qn(wr,Se-(Er-wt)):wr}(jt))}function Dt(jt){return He=i,$t&&te?Zt(jt):(te=ae=i,Ge)}function vr(){var jt=Ui(),Er=cr(jt);if(te=arguments,ae=this,ot=jt,Er){if(He===i)return function(wr){return wt=wr,He=Pl(xt,L),_t?Zt(wr):Ge}(ot);if(Rt)return ha(He),He=Pl(xt,L),Zt(ot)}return He===i&&(He=Pl(xt,L)),Ge}return L=ya(L)||0,Yn(V)&&(_t=!!V.leading,Se=(Rt="maxWait"in V)?Cn(ya(V.maxWait)||0,L):Se,$t="trailing"in V?!!V.trailing:$t),vr.cancel=function(){He!==i&&ha(He),wt=0,te=ot=ae=He=i},vr.flush=function(){return He===i?Ge:Dt(Ui())},vr}var fp=gr(function(A,L){return lf(A,1,L)}),qu=gr(function(A,L,V){return lf(A,ya(L)||0,V)});function ls(A,L){if(typeof A!="function"||L!=null&&typeof L!="function")throw new gi(a);var V=function(){var te=arguments,ae=L?L.apply(this,te):te[0],Se=V.cache;if(Se.has(ae))return Se.get(ae);var Ge=A.apply(this,te);return V.cache=Se.set(ae,Ge)||Se,Ge};return V.cache=new(ls.Cache||Xi),V}function Ac(A){if(typeof A!="function")throw new gi(a);return function(){var L=arguments;switch(L.length){case 0:return!A.call(this);case 1:return!A.call(this,L[0]);case 2:return!A.call(this,L[0],L[1]);case 3:return!A.call(this,L[0],L[1],L[2])}return!A.apply(this,L)}}ls.Cache=Xi;var Dl=dg(function(A,L){var V=(L=L.length==1&&Tr(L[0])?$r(L[0],Dr(_r())):$r(Wn(L,1),Dr(_r()))).length;return gr(function(te){for(var ae=-1,Se=qn(te.length,V);++ae<Se;)te[ae]=L[ae].call(this,te[ae]);return co(A,this,te)})}),Wu=gr(function(A,L){var V=to(L,Uu(Wu));return os(A,u,i,L,V)}),Mh=gr(function(A,L){var V=to(L,Uu(Mh));return os(A,64,i,L,V)}),Ud=da(function(A,L){return os(A,256,i,i,i,L)});function oo(A,L){return A===L||A!=A&&L!=L}var If=is(ph),Ml=is(function(A,L){return A>=L}),Yo=Da(function(){return arguments}())?Da:function(A){return Mn(A)&&en.call(A,"callee")&&!bd.call(A,"callee")},Tr=Vt.isArray,kf=Ya?Dr(Ya):function(A){return Mn(A)&&dn(A)==Z};function To(A){return A!=null&&Xo(A.length)&&!Ba(A)}function Hn(A){return Mn(A)&&To(A)}var Qi=Du||Wh,zd=Ys?Dr(Ys):function(A){return Mn(A)&&dn(A)==p};function Ll(A){if(!Mn(A))return!1;var L=dn(A);return L==m||L=="[object DOMException]"||typeof A.message=="string"&&typeof A.name=="string"&&!Ic(A)}function Ba(A){if(!Yn(A))return!1;var L=dn(A);return L==x||L==T||L=="[object AsyncFunction]"||L=="[object Proxy]"}function Rc(A){return typeof A=="number"&&A==kr(A)}function Xo(A){return typeof A=="number"&&A>-1&&A%1==0&&A<=f}function Yn(A){var L=typeof A;return A!=null&&(L=="object"||L=="function")}function Mn(A){return A!=null&&typeof A=="object"}var Lh=ec?Dr(ec):function(A){return Mn(A)&&Pn(A)==P};function Nh(A){return typeof A=="number"||Mn(A)&&dn(A)==C}function Ic(A){if(!Mn(A)||dn(A)!=R)return!1;var L=Iu(A);if(L===null)return!0;var V=en.call(L,"constructor")&&L.constructor;return typeof V=="function"&&V instanceof V&&Au.call(V)==uh}var Df=tc?Dr(tc):function(A){return Mn(A)&&dn(A)==N},pa=zr?Dr(zr):function(A){return Mn(A)&&Pn(A)==j};function kc(A){return typeof A=="string"||!Tr(A)&&Mn(A)&&dn(A)==B}function Co(A){return typeof A=="symbol"||Mn(A)&&dn(A)==z}var cs=Uo?Dr(Uo):function(A){return Mn(A)&&Xo(A.length)&&!!qr[dn(A)]},jh=is(Ps),Dc=is(function(A,L){return A<=L});function Tt(A){if(!A)return[];if(To(A))return kc(A)?$n(A):So(A);if(ku&&A[ku])return function(V){for(var te,ae=[];!(te=V.next()).done;)ae.push(te.value);return ae}(A[ku]());var L=Pn(A);return(L==P?Gn:L==j?Js:yu)(A)}function ga(A){return A?(A=ya(A))===c||A===-1/0?17976931348623157e292*(A<0?-1:1):A==A?A:0:A===0?A:0}function kr(A){var L=ga(A),V=L%1;return L==L?V?L-V:L:0}function vu(A){return A?ka(kr(A),0,d):0}function ya(A){if(typeof A=="number")return A;if(Co(A))return h;if(Yn(A)){var L=typeof A.valueOf=="function"?A.valueOf():A;A=Yn(L)?L+"":L}if(typeof A!="string")return A===0?A:+A;A=pn(A);var V=dt.test(A);return V||it.test(A)?eo(A.slice(2),V?2:8):Yt.test(A)?h:+A}function Bh(A){return es(A,Ur(A))}function ln(A){return A==null?"":la(A)}var yo=Fu(function(A,L){if(cu(L)||To(L))es(L,zi(L),A);else for(var V in L)en.call(L,V)&&uf(A,V,L[V])}),hp=Fu(function(A,L){es(L,Ur(L),A)}),Fh=Fu(function(A,L,V,te){es(L,Ur(L),A,te)}),dp=Fu(function(A,L,V,te){es(L,zi(L),A,te)}),pg=da(dl),vp=gr(function(A,L){A=gn(A);var V=-1,te=L.length,ae=te>2?L[2]:i;for(ae&&go(L[0],L[1],ae)&&(te=1);++V<te;)for(var Se=L[V],Ge=Ur(Se),He=-1,ot=Ge.length;++He<ot;){var wt=Ge[He],_t=A[wt];(_t===i||oo(_t,Pu[wt])&&!en.call(A,wt))&&(A[wt]=Se[wt])}return A}),pp=gr(function(A){return A.push(i,Oc),co(Ko,i,A)});function Gd(A,L,V){var te=A==null?i:ru(A,L);return te===i?V:te}function Vd(A,L){return A!=null&&xh(A,L,gh)}var pu=qo(function(A,L,V){L!=null&&typeof L.toString!="function"&&(L=Es.call(L)),A[L]=V},ci($o)),ao=qo(function(A,L,V){L!=null&&typeof L.toString!="function"&&(L=Es.call(L)),en.call(A,L)?A[L].push(V):A[L]=[V]},_r),qd=gr(nu);function zi(A){return To(A)?Zv(A):ou(A)}function Ur(A){return To(A)?Zv(A,!0):function(L){if(!Yn(L))return function(Se){var Ge=[];if(Se!=null)for(var He in gn(Se))Ge.push(He);return Ge}(L);var V=cu(L),te=[];for(var ae in L)(ae!="constructor"||!V&&en.call(L,ae))&&te.push(ae);return te}(A)}var Uh=Fu(function(A,L,V){yh(A,L,V)}),Ko=Fu(function(A,L,V,te){yh(A,L,V,te)}),Po=da(function(A,L){var V={};if(A==null)return V;var te=!1;L=$r(L,function(Se){return Se=po(Se,A),te||(te=Se.length>1),Se}),es(A,as(A),V),te&&(V=Go(V,7,Sc));for(var ae=L.length;ae--;)mh(V,L[ae]);return V}),Mc=da(function(A,L){return A==null?{}:function(V,te){return ua(V,te,function(ae,Se){return Vd(V,Se)})}(A,L)});function zh(A,L){if(A==null)return{};var V=$r(as(A),function(te){return[te]});return L=_r(L),ua(A,V,function(te,ae){return L(te,ae[0])})}var Wd=Td(zi),gu=Td(Ur);function yu(A){return A==null?[]:sc(A,zi(A))}var Gh=El(function(A,L,V){return L=L.toLowerCase(),A+(V?ma(L):L)});function ma(A){return Vh(ln(A).toLowerCase())}function fs(A){return(A=ln(A))&&A.replace(ut,Ka).replace(Wa,"")}var gp=El(function(A,L,V){return A+(V?"-":"")+L.toLowerCase()}),Nl=El(function(A,L,V){return A+(V?" ":"")+L.toLowerCase()}),Mf=ts("toLowerCase"),Hu=El(function(A,L,V){return A+(V?"_":"")+L.toLowerCase()}),Hd=El(function(A,L,V){return A+(V?" ":"")+Vh(L)}),Yd=El(function(A,L,V){return A+(V?" ":"")+L.toUpperCase()}),Vh=ts("toUpperCase");function Lf(A,L,V){return A=ln(A),(L=V?i:L)===i?function(te){return pr.test(te)}(A)?function(te){return te.match(kn)||[]}(A):function(te){return te.match(Lt)||[]}(A):A.match(L)||[]}var jl=gr(function(A,L){try{return co(A,i,L)}catch(V){return Ll(V)?V:new Jr(V)}}),hs=da(function(A,L){return qt(L,function(V){V=xi(V),Ss(A,V,Af(A[V],A))}),A});function ci(A){return function(){return A}}var Lc=bf(),Xd=bf(!0);function $o(A){return A}function so(A){return yl(typeof A=="function"?A:Go(A,1))}var yp=gr(function(A,L){return function(V){return nu(V,A,L)}}),Yu=gr(function(A,L){return function(V){return nu(A,V,L)}});function Kd(A,L,V){var te=zi(L),ae=hf(L,te);V!=null||Yn(L)&&(ae.length||!te.length)||(V=L,L=A,A=this,ae=hf(L,zi(L)));var Se=!(Yn(V)&&"chain"in V&&!V.chain),Ge=Ba(A);return qt(ae,function(He){var ot=L[He];A[He]=ot,Ge&&(A.prototype[He]=function(){var wt=this.__chain__;if(Se||wt){var _t=A(this.__wrapped__);return(_t.__actions__=So(this.__actions__)).push({func:ot,args:arguments,thisArg:A}),_t.__chain__=wt,_t}return ot.apply(A,oa([this.value()],arguments))})}),A}function qh(){}var Nf=_f($r),mp=_f(nc),gg=_f(ic);function $d(A){return Fi(A)?oc(xi(A)):function(L){return function(V){return ru(V,L)}}(A)}var Fa=xc(),Zd=xc(!0);function Ao(){return[]}function Wh(){return!1}var Qd,jf=_h(function(A,L){return A+L},0),Jd=xl("ceil"),ev=_h(function(A,L){return A/L},1),yg=xl("floor"),Jn=_h(function(A,L){return A*L},1),bp=xl("round"),tv=_h(function(A,L){return A-L},0);return pe.after=function(A,L){if(typeof L!="function")throw new gi(a);return A=kr(A),function(){if(--A<1)return L.apply(this,arguments)}},pe.ary=ja,pe.assign=yo,pe.assignIn=hp,pe.assignInWith=Fh,pe.assignWith=dp,pe.at=pg,pe.before=Fd,pe.bind=Af,pe.bindAll=hs,pe.bindKey=Rf,pe.castArray=function(){if(!arguments.length)return[];var A=arguments[0];return Tr(A)?A:[A]},pe.chain=us,pe.chunk=function(A,L,V){L=(V?go(A,L,V):L===i)?1:Cn(kr(L),0);var te=A==null?0:A.length;if(!te||L<1)return[];for(var ae=0,Se=0,Ge=Vt(lh(te/L));ae<te;)Ge[Se++]=Ma(A,ae,ae+=L);return Ge},pe.compact=function(A){for(var L=-1,V=A==null?0:A.length,te=0,ae=[];++L<V;){var Se=A[L];Se&&(ae[te++]=Se)}return ae},pe.concat=function(){var A=arguments.length;if(!A)return[];for(var L=Vt(A-1),V=arguments[0],te=A;te--;)L[te-1]=arguments[te];return oa(Tr(V)?So(V):[V],Wn(L,1))},pe.cond=function(A){var L=A==null?0:A.length,V=_r();return A=L?$r(A,function(te){if(typeof te[1]!="function")throw new gi(a);return[V(te[0]),te[1]]}):[],gr(function(te){for(var ae=-1;++ae<L;){var Se=A[ae];if(co(Se[0],this,te))return co(Se[1],this,te)}})},pe.conforms=function(A){return function(L){var V=zi(L);return function(te){return vl(te,L,V)}}(Go(A,1))},pe.constant=ci,pe.countBy=lp,pe.create=function(A,L){var V=Os(A);return L==null?V:hl(V,L)},pe.curry=function A(L,V,te){var ae=os(L,8,i,i,i,i,i,V=te?i:V);return ae.placeholder=A.placeholder,ae},pe.curryRight=function A(L,V,te){var ae=os(L,16,i,i,i,i,i,V=te?i:V);return ae.placeholder=A.placeholder,ae},pe.debounce=Is,pe.defaults=vp,pe.defaultsDeep=pp,pe.defer=fp,pe.delay=qu,pe.difference=Al,pe.differenceBy=Id,pe.differenceWith=kd,pe.drop=function(A,L,V){var te=A==null?0:A.length;return te?Ma(A,(L=V||L===i?1:kr(L))<0?0:L,te):[]},pe.dropRight=function(A,L,V){var te=A==null?0:A.length;return te?Ma(A,0,(L=te-(L=V||L===i?1:kr(L)))<0?0:L):[]},pe.dropRightWhile=function(A,L){return A&&A.length?vo(A,_r(L,3),!0,!0):[]},pe.dropWhile=function(A,L){return A&&A.length?vo(A,_r(L,3),!0):[]},pe.fill=function(A,L,V,te){var ae=A==null?0:A.length;return ae?(V&&typeof V!="number"&&go(A,L,V)&&(V=0,te=ae),function(Se,Ge,He,ot){var wt=Se.length;for((He=kr(He))<0&&(He=-He>wt?0:wt+He),(ot=ot===i||ot>wt?wt:kr(ot))<0&&(ot+=wt),ot=He>ot?0:vu(ot);He<ot;)Se[He++]=Ge;return Se}(A,L,V,te)):[]},pe.filter=function(A,L){return(Tr(A)?Aa:xd)(A,_r(L,3))},pe.flatMap=function(A,L){return Wn(kl(A,L),1)},pe.flatMapDeep=function(A,L){return Wn(kl(A,L),c)},pe.flatMapDepth=function(A,L,V){return V=V===i?1:kr(V),Wn(kl(A,L),V)},pe.flatten=op,pe.flattenDeep=function(A){return A!=null&&A.length?Wn(A,c):[]},pe.flattenDepth=function(A,L){return A!=null&&A.length?Wn(A,L=L===i?1:kr(L)):[]},pe.flip=function(A){return os(A,512)},pe.flow=Lc,pe.flowRight=Xd,pe.fromPairs=function(A){for(var L=-1,V=A==null?0:A.length,te={};++L<V;){var ae=A[L];te[ae[0]]=ae[1]}return te},pe.functions=function(A){return A==null?[]:hf(A,zi(A))},pe.functionsIn=function(A){return A==null?[]:hf(A,Ur(A))},pe.groupBy=kh,pe.initial=function(A){return A!=null&&A.length?Ma(A,0,-1):[]},pe.intersection=Md,pe.intersectionBy=ap,pe.intersectionWith=Sf,pe.invert=pu,pe.invertBy=ao,pe.invokeMap=jd,pe.iteratee=so,pe.keyBy=Dh,pe.keys=zi,pe.keysIn=Ur,pe.map=kl,pe.mapKeys=function(A,L){var V={};return L=_r(L,3),Cs(A,function(te,ae,Se){Ss(V,L(te,ae,Se),te)}),V},pe.mapValues=function(A,L){var V={};return L=_r(L,3),Cs(A,function(te,ae,Se){Ss(V,ae,L(te,ae,Se))}),V},pe.matches=function(A){return Od(Go(A,1))},pe.matchesProperty=function(A,L){return gc(A,Go(L,1))},pe.memoize=ls,pe.merge=Uh,pe.mergeWith=Ko,pe.method=yp,pe.methodOf=Yu,pe.mixin=Kd,pe.negate=Ac,pe.nthArg=function(A){return A=kr(A),gr(function(L){return yc(L,A)})},pe.omit=Po,pe.omitBy=function(A,L){return zh(A,Ac(_r(L)))},pe.once=function(A){return Fd(2,A)},pe.orderBy=function(A,L,V,te){return A==null?[]:(Tr(L)||(L=L==null?[]:[L]),Tr(V=te?i:V)||(V=V==null?[]:[V]),mc(A,L,V))},pe.over=Nf,pe.overArgs=Dl,pe.overEvery=mp,pe.overSome=gg,pe.partial=Wu,pe.partialRight=Mh,pe.partition=Bd,pe.pick=Mc,pe.pickBy=zh,pe.property=$d,pe.propertyOf=function(A){return function(L){return A==null?i:ru(A,L)}},pe.pull=sp,pe.pullAll=Tf,pe.pullAllBy=function(A,L,V){return A&&A.length&&L&&L.length?au(A,L,_r(V,2)):A},pe.pullAllWith=function(A,L,V){return A&&A.length&&L&&L.length?au(A,L,i,V):A},pe.pullAt=Ch,pe.range=Fa,pe.rangeRight=Zd,pe.rearg=Ud,pe.reject=function(A,L){return(Tr(A)?Aa:xd)(A,Ac(_r(L,3)))},pe.remove=function(A,L){var V=[];if(!A||!A.length)return V;var te=-1,ae=[],Se=A.length;for(L=_r(L,3);++te<Se;){var Ge=A[te];L(Ge,te,A)&&(V.push(Ge),ae.push(te))}return _e(A,ae),V},pe.rest=function(A,L){if(typeof A!="function")throw new gi(a);return gr(A,L=L===i?L:kr(L))},pe.reverse=Cf,pe.sampleSize=function(A,L,V){return L=(V?go(A,L,V):L===i)?1:kr(L),(Tr(A)?sa:df)(A,L)},pe.set=function(A,L,V){return A==null?A:ml(A,L,V)},pe.setWith=function(A,L,V,te){return te=typeof te=="function"?te:i,A==null?A:ml(A,L,V,te)},pe.shuffle=function(A){return(Tr(A)?wd:hg)(A)},pe.slice=function(A,L,V){var te=A==null?0:A.length;return te?(V&&typeof V!="number"&&go(A,L,V)?(L=0,V=te):(L=L==null?0:kr(L),V=V===i?te:kr(V)),Ma(A,L,V)):[]},pe.sortBy=cp,pe.sortedUniq=function(A){return A&&A.length?La(A):[]},pe.sortedUniqBy=function(A,L){return A&&A.length?La(A,_r(L,2)):[]},pe.split=function(A,L,V){return V&&typeof V!="number"&&go(A,L,V)&&(L=V=i),(V=V===i?d:V>>>0)?(A=ln(A))&&(typeof L=="string"||L!=null&&!Df(L))&&!(L=la(L))&&Qs(A)?fa($n(A),0,V):A.split(L,V):[]},pe.spread=function(A,L){if(typeof A!="function")throw new gi(a);return L=L==null?0:Cn(kr(L),0),gr(function(V){var te=V[L],ae=fa(V,0,L);return te&&oa(ae,te),co(A,this,ae)})},pe.tail=function(A){var L=A==null?0:A.length;return L?Ma(A,1,L):[]},pe.take=function(A,L,V){return A&&A.length?Ma(A,0,(L=V||L===i?1:kr(L))<0?0:L):[]},pe.takeRight=function(A,L,V){var te=A==null?0:A.length;return te?Ma(A,(L=te-(L=V||L===i?1:kr(L)))<0?0:L,te):[]},pe.takeRightWhile=function(A,L){return A&&A.length?vo(A,_r(L,3),!1,!0):[]},pe.takeWhile=function(A,L){return A&&A.length?vo(A,_r(L,3)):[]},pe.tap=function(A,L){return L(A),A},pe.throttle=function(A,L,V){var te=!0,ae=!0;if(typeof A!="function")throw new gi(a);return Yn(V)&&(te="leading"in V?!!V.leading:te,ae="trailing"in V?!!V.trailing:ae),Is(A,L,{leading:te,maxWait:L,trailing:ae})},pe.thru=Ih,pe.toArray=Tt,pe.toPairs=Wd,pe.toPairsIn=gu,pe.toPath=function(A){return Tr(A)?$r(A,xi):Co(A)?[A]:So(Th(ln(A)))},pe.toPlainObject=Bh,pe.transform=function(A,L,V){var te=Tr(A),ae=te||Qi(A)||cs(A);if(L=_r(L,4),V==null){var Se=A&&A.constructor;V=ae?te?new Se:[]:Yn(A)&&Ba(Se)?Os(Iu(A)):{}}return(ae?qt:Cs)(A,function(Ge,He,ot){return L(V,Ge,He,ot)}),V},pe.unary=function(A){return ja(A,1)},pe.union=up,pe.unionBy=va,pe.unionWith=Gu,pe.uniq=function(A){return A&&A.length?or(A):[]},pe.uniqBy=function(A,L){return A&&A.length?or(A,_r(L,2)):[]},pe.uniqWith=function(A,L){return L=typeof L=="function"?L:i,A&&A.length?or(A,i,L):[]},pe.unset=function(A,L){return A==null||mh(A,L)},pe.unzip=du,pe.unzipWith=Ph,pe.update=function(A,L,V){return A==null?A:ho(A,L,bc(V))},pe.updateWith=function(A,L,V,te){return te=typeof te=="function"?te:i,A==null?A:ho(A,L,bc(V),te)},pe.values=yu,pe.valuesIn=function(A){return A==null?[]:sc(A,Ur(A))},pe.without=Ah,pe.words=Lf,pe.wrap=function(A,L){return Wu(bc(L),A)},pe.xor=Vu,pe.xorBy=Rh,pe.xorWith=Pf,pe.zip=Cc,pe.zipObject=function(A,L){return tp(A||[],L||[],uf)},pe.zipObjectDeep=function(A,L){return tp(A||[],L||[],ml)},pe.zipWith=Zi,pe.entries=Wd,pe.entriesIn=gu,pe.extend=hp,pe.extendWith=Fh,Kd(pe,pe),pe.add=jf,pe.attempt=jl,pe.camelCase=Gh,pe.capitalize=ma,pe.ceil=Jd,pe.clamp=function(A,L,V){return V===i&&(V=L,L=i),V!==i&&(V=(V=ya(V))==V?V:0),L!==i&&(L=(L=ya(L))==L?L:0),ka(ya(A),L,V)},pe.clone=function(A){return Go(A,4)},pe.cloneDeep=function(A){return Go(A,5)},pe.cloneDeepWith=function(A,L){return Go(A,5,L=typeof L=="function"?L:i)},pe.cloneWith=function(A,L){return Go(A,4,L=typeof L=="function"?L:i)},pe.conformsTo=function(A,L){return L==null||vl(A,L,zi(L))},pe.deburr=fs,pe.defaultTo=function(A,L){return A==null||A!=A?L:A},pe.divide=ev,pe.endsWith=function(A,L,V){A=ln(A),L=la(L);var te=A.length,ae=V=V===i?te:ka(kr(V),0,te);return(V-=L.length)>=0&&A.slice(V,ae)==L},pe.eq=oo,pe.escape=function(A){return(A=ln(A))&&Oe.test(A)?A.replace(ve,sh):A},pe.escapeRegExp=function(A){return(A=ln(A))&&ne.test(A)?A.replace($,"\\$&"):A},pe.every=function(A,L,V){var te=Tr(A)?nc:Qv;return V&&go(A,L,V)&&(L=i),te(A,_r(L,3))},pe.find=Ld,pe.findIndex=Or,pe.findKey=function(A,L){return Qc(A,_r(L,3),Cs)},pe.findLast=Il,pe.findLastIndex=Dd,pe.findLastKey=function(A,L){return Qc(A,_r(L,3),ff)},pe.floor=yg,pe.forEach=Pc,pe.forEachRight=Nd,pe.forIn=function(A,L){return A==null?A:pl(A,_r(L,3),Ur)},pe.forInRight=function(A,L){return A==null?A:vh(A,_r(L,3),Ur)},pe.forOwn=function(A,L){return A&&Cs(A,_r(L,3))},pe.forOwnRight=function(A,L){return A&&ff(A,_r(L,3))},pe.get=Gd,pe.gt=If,pe.gte=Ml,pe.has=function(A,L){return A!=null&&xh(A,L,gl)},pe.hasIn=Vd,pe.head=Rl,pe.identity=$o,pe.includes=function(A,L,V,te){A=To(A)?A:yu(A),V=V&&!te?kr(V):0;var ae=A.length;return V<0&&(V=Cn(ae+V,0)),kc(A)?V<=ae&&A.indexOf(L,V)>-1:!!ae&&Ks(A,L,V)>-1},pe.indexOf=function(A,L,V){var te=A==null?0:A.length;if(!te)return-1;var ae=V==null?0:kr(V);return ae<0&&(ae=Cn(te+ae,0)),Ks(A,L,ae)},pe.inRange=function(A,L,V){return L=ga(L),V===i?(V=L,L=0):V=ga(V),function(te,ae,Se){return te>=qn(ae,Se)&&te<Cn(ae,Se)}(A=ya(A),L,V)},pe.invoke=qd,pe.isArguments=Yo,pe.isArray=Tr,pe.isArrayBuffer=kf,pe.isArrayLike=To,pe.isArrayLikeObject=Hn,pe.isBoolean=function(A){return A===!0||A===!1||Mn(A)&&dn(A)==b},pe.isBuffer=Qi,pe.isDate=zd,pe.isElement=function(A){return Mn(A)&&A.nodeType===1&&!Ic(A)},pe.isEmpty=function(A){if(A==null)return!0;if(To(A)&&(Tr(A)||typeof A=="string"||typeof A.splice=="function"||Qi(A)||cs(A)||Yo(A)))return!A.length;var L=Pn(A);if(L==P||L==j)return!A.size;if(cu(A))return!ou(A).length;for(var V in A)if(en.call(A,V))return!1;return!0},pe.isEqual=function(A,L){return Nu(A,L)},pe.isEqualWith=function(A,L,V){var te=(V=typeof V=="function"?V:i)?V(A,L):i;return te===i?Nu(A,L,i,V):!!te},pe.isError=Ll,pe.isFinite=function(A){return typeof A=="number"&&_d(A)},pe.isFunction=Ba,pe.isInteger=Rc,pe.isLength=Xo,pe.isMap=Lh,pe.isMatch=function(A,L){return A===L||iu(A,L,Ef(L))},pe.isMatchWith=function(A,L,V){return V=typeof V=="function"?V:i,iu(A,L,Ef(L),V)},pe.isNaN=function(A){return Nh(A)&&A!=+A},pe.isNative=function(A){if(vg(A))throw new Jr("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return pc(A)},pe.isNil=function(A){return A==null},pe.isNull=function(A){return A===null},pe.isNumber=Nh,pe.isObject=Yn,pe.isObjectLike=Mn,pe.isPlainObject=Ic,pe.isRegExp=Df,pe.isSafeInteger=function(A){return Rc(A)&&A>=-9007199254740991&&A<=f},pe.isSet=pa,pe.isString=kc,pe.isSymbol=Co,pe.isTypedArray=cs,pe.isUndefined=function(A){return A===i},pe.isWeakMap=function(A){return Mn(A)&&Pn(A)==W},pe.isWeakSet=function(A){return Mn(A)&&dn(A)=="[object WeakSet]"},pe.join=function(A,L){return A==null?"":xo.call(A,L)},pe.kebabCase=gp,pe.last=li,pe.lastIndexOf=function(A,L,V){var te=A==null?0:A.length;if(!te)return-1;var ae=te;return V!==i&&(ae=(ae=kr(V))<0?Cn(te+ae,0):qn(ae,te-1)),L==L?function(Se,Ge,He){for(var ot=He+1;ot--;)if(Se[ot]===Ge)return ot;return ot}(A,L,ae):il(A,Xa,ae,!0)},pe.lowerCase=Nl,pe.lowerFirst=Mf,pe.lt=jh,pe.lte=Dc,pe.max=function(A){return A&&A.length?cf(A,$o,ph):i},pe.maxBy=function(A,L){return A&&A.length?cf(A,_r(L,2),ph):i},pe.mean=function(A){return ol(A,$o)},pe.meanBy=function(A,L){return ol(A,_r(L,2))},pe.min=function(A){return A&&A.length?cf(A,$o,Ps):i},pe.minBy=function(A,L){return A&&A.length?cf(A,_r(L,2),Ps):i},pe.stubArray=Ao,pe.stubFalse=Wh,pe.stubObject=function(){return{}},pe.stubString=function(){return""},pe.stubTrue=function(){return!0},pe.multiply=Jn,pe.nth=function(A,L){return A&&A.length?yc(A,kr(L)):i},pe.noConflict=function(){return Dn._===this&&(Dn._=Ru),this},pe.noop=qh,pe.now=Ui,pe.pad=function(A,L,V){A=ln(A);var te=(L=kr(L))?Bi(A):0;if(!L||te>=L)return A;var ae=(L-te)/2;return Wo(ch(ae),V)+A+Wo(lh(ae),V)},pe.padEnd=function(A,L,V){A=ln(A);var te=(L=kr(L))?Bi(A):0;return L&&te<L?A+Wo(L-te,V):A},pe.padStart=function(A,L,V){A=ln(A);var te=(L=kr(L))?Bi(A):0;return L&&te<L?Wo(L-te,V)+A:A},pe.parseInt=function(A,L,V){return V||L==null?L=0:L&&(L=+L),fg(ln(A).replace(Ie,""),L||0)},pe.random=function(A,L,V){if(V&&typeof V!="boolean"&&go(A,L,V)&&(L=V=i),V===i&&(typeof L=="boolean"?(V=L,L=i):typeof A=="boolean"&&(V=A,A=i)),A===i&&L===i?(A=0,L=1):(A=ga(A),L===i?(L=A,A=0):L=ga(L)),A>L){var te=A;A=L,L=te}if(V||A%1||L%1){var ae=Kv();return qn(A+ae*(L-A+Hs("1e-"+((ae+"").length-1))),L)}return ju(A,L)},pe.reduce=function(A,L,V){var te=Tr(A)?nl:al,ae=arguments.length<3;return te(A,_r(L,4),V,ae,Vo)},pe.reduceRight=function(A,L,V){var te=Tr(A)?oh:al,ae=arguments.length<3;return te(A,_r(L,4),V,ae,Oo)},pe.repeat=function(A,L,V){return L=(V?go(A,L,V):L===i)?1:kr(L),Bu(ln(A),L)},pe.replace=function(){var A=arguments,L=ln(A[0]);return A.length<3?L:L.replace(A[1],A[2])},pe.result=function(A,L,V){var te=-1,ae=(L=po(L,A)).length;for(ae||(ae=1,A=i);++te<ae;){var Se=A==null?i:A[xi(L[te])];Se===i&&(te=ae,Se=V),A=Ba(Se)?Se.call(A):Se}return A},pe.round=bp,pe.runInContext=at,pe.sample=function(A){return(Tr(A)?dh:jr)(A)},pe.size=function(A){if(A==null)return 0;if(To(A))return kc(A)?Bi(A):A.length;var L=Pn(A);return L==P||L==j?A.size:ou(A).length},pe.snakeCase=Hu,pe.some=function(A,L,V){var te=Tr(A)?ic:ep;return V&&go(A,L,V)&&(L=i),te(A,_r(L,3))},pe.sortedIndex=function(A,L){return pf(A,L)},pe.sortedIndexBy=function(A,L,V){return bl(A,L,_r(V,2))},pe.sortedIndexOf=function(A,L){var V=A==null?0:A.length;if(V){var te=pf(A,L);if(te<V&&oo(A[te],L))return te}return-1},pe.sortedLastIndex=function(A,L){return pf(A,L,!0)},pe.sortedLastIndexBy=function(A,L,V){return bl(A,L,_r(V,2),!0)},pe.sortedLastIndexOf=function(A,L){if(A!=null&&A.length){var V=pf(A,L,!0)-1;if(oo(A[V],L))return V}return-1},pe.startCase=Hd,pe.startsWith=function(A,L,V){return A=ln(A),V=V==null?0:ka(kr(V),0,A.length),L=la(L),A.slice(V,V+L.length)==L},pe.subtract=tv,pe.sum=function(A){return A&&A.length?$s(A,$o):0},pe.sumBy=function(A,L){return A&&A.length?$s(A,_r(L,2)):0},pe.template=function(A,L,V){var te=pe.templateSettings;V&&go(A,L,V)&&(L=i),A=ln(A),L=Fh({},L,te,ki);var ae,Se,Ge=Fh({},L.imports,te.imports,ki),He=zi(Ge),ot=sc(Ge,He),wt=0,_t=L.interpolate||lt,Rt="__p += '",$t=ef((L.escape||lt).source+"|"+_t.source+"|"+(_t===ht?er:lt).source+"|"+(L.evaluate||lt).source+"|$","g"),Zt="//# sourceURL="+(en.call(L,"sourceURL")?(L.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++lo+"]")+`
`;A.replace($t,function(Dt,vr,jt,Er,wr,tn){return jt||(jt=Er),Rt+=A.slice(wt,tn).replace(Xt,md),vr&&(ae=!0,Rt+=`' +
__e(`+vr+`) +
'`),wr&&(Se=!0,Rt+=`';
`+wr+`;
__p += '`),jt&&(Rt+=`' +
((__t = (`+jt+`)) == null ? '' : __t) +
'`),wt=tn+Dt.length,Dt}),Rt+=`';
`;var cr=en.call(L,"variable")&&L.variable;if(cr){if(Wt.test(cr))throw new Jr("Invalid `variable` option passed into `_.template`")}else Rt=`with (obj) {
`+Rt+`
}
`;Rt=(Se?Rt.replace(Ee,""):Rt).replace(Ce,"$1").replace(ke,"$1;"),Rt="function("+(cr||"obj")+`) {
`+(cr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ae?", __e = _.escape":"")+(Se?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Rt+`return __p
}`;var xt=jl(function(){return Ri(He,Zt+"return "+Rt).apply(i,ot)});if(xt.source=Rt,Ll(xt))throw xt;return xt},pe.times=function(A,L){if((A=kr(A))<1||A>f)return[];var V=d,te=qn(A,d);L=_r(L),A-=d;for(var ae=sl(te,L);++V<A;)L(V);return ae},pe.toFinite=ga,pe.toInteger=kr,pe.toLength=vu,pe.toLower=function(A){return ln(A).toLowerCase()},pe.toNumber=ya,pe.toSafeInteger=function(A){return A?ka(kr(A),-9007199254740991,f):A===0?A:0},pe.toString=ln,pe.toUpper=function(A){return ln(A).toUpperCase()},pe.trim=function(A,L,V){if((A=ln(A))&&(V||L===i))return pn(A);if(!A||!(L=la(L)))return A;var te=$n(A),ae=$n(L);return fa(te,Jc(te,ae),ws(te,ae)+1).join("")},pe.trimEnd=function(A,L,V){if((A=ln(A))&&(V||L===i))return A.slice(0,Ra(A)+1);if(!A||!(L=la(L)))return A;var te=$n(A);return fa(te,0,ws(te,$n(L))+1).join("")},pe.trimStart=function(A,L,V){if((A=ln(A))&&(V||L===i))return A.replace(Ie,"");if(!A||!(L=la(L)))return A;var te=$n(A);return fa(te,Jc(te,$n(L))).join("")},pe.truncate=function(A,L){var V=30,te="...";if(Yn(L)){var ae="separator"in L?L.separator:ae;V="length"in L?kr(L.length):V,te="omission"in L?la(L.omission):te}var Se=(A=ln(A)).length;if(Qs(A)){var Ge=$n(A);Se=Ge.length}if(V>=Se)return A;var He=V-Bi(te);if(He<1)return te;var ot=Ge?fa(Ge,0,He).join(""):A.slice(0,He);if(ae===i)return ot+te;if(Ge&&(He+=ot.length-He),Df(ae)){if(A.slice(He).search(ae)){var wt,_t=ot;for(ae.global||(ae=ef(ae.source,ln(Ar.exec(ae))+"g")),ae.lastIndex=0;wt=ae.exec(_t);)var Rt=wt.index;ot=ot.slice(0,Rt===i?He:Rt)}}else if(A.indexOf(la(ae),He)!=He){var $t=ot.lastIndexOf(ae);$t>-1&&(ot=ot.slice(0,$t))}return ot+te},pe.unescape=function(A){return(A=ln(A))&&we.test(A)?A.replace(Re,Ia):A},pe.uniqueId=function(A){var L=++fc;return ln(A)+L},pe.upperCase=Yd,pe.upperFirst=Vh,pe.each=Pc,pe.eachRight=Nd,pe.first=Rl,Kd(pe,(Qd={},Cs(pe,function(A,L){en.call(pe.prototype,L)||(Qd[L]=A)}),Qd),{chain:!1}),pe.VERSION="4.17.21",qt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(A){pe[A].placeholder=pe}),qt(["drop","take"],function(A,L){Fr.prototype[A]=function(V){V=V===i?1:Cn(kr(V),0);var te=this.__filtered__&&!L?new Fr(this):this.clone();return te.__filtered__?te.__takeCount__=qn(V,te.__takeCount__):te.__views__.push({size:qn(V,d),type:A+(te.__dir__<0?"Right":"")}),te},Fr.prototype[A+"Right"]=function(V){return this.reverse()[A](V).reverse()}}),qt(["filter","map","takeWhile"],function(A,L){var V=L+1,te=V==1||V==3;Fr.prototype[A]=function(ae){var Se=this.clone();return Se.__iteratees__.push({iteratee:_r(ae,3),type:V}),Se.__filtered__=Se.__filtered__||te,Se}}),qt(["head","last"],function(A,L){var V="take"+(L?"Right":"");Fr.prototype[A]=function(){return this[V](1).value()[0]}}),qt(["initial","tail"],function(A,L){var V="drop"+(L?"":"Right");Fr.prototype[A]=function(){return this.__filtered__?new Fr(this):this[V](1)}}),Fr.prototype.compact=function(){return this.filter($o)},Fr.prototype.find=function(A){return this.filter(A).head()},Fr.prototype.findLast=function(A){return this.reverse().find(A)},Fr.prototype.invokeMap=gr(function(A,L){return typeof A=="function"?new Fr(this):this.map(function(V){return nu(V,A,L)})}),Fr.prototype.reject=function(A){return this.filter(Ac(_r(A)))},Fr.prototype.slice=function(A,L){A=kr(A);var V=this;return V.__filtered__&&(A>0||L<0)?new Fr(V):(A<0?V=V.takeRight(-A):A&&(V=V.drop(A)),L!==i&&(V=(L=kr(L))<0?V.dropRight(-L):V.take(L-A)),V)},Fr.prototype.takeRightWhile=function(A){return this.reverse().takeWhile(A).reverse()},Fr.prototype.toArray=function(){return this.take(d)},Cs(Fr.prototype,function(A,L){var V=/^(?:filter|find|map|reject)|While$/.test(L),te=/^(?:head|last)$/.test(L),ae=pe[te?"take"+(L=="last"?"Right":""):L],Se=te||/^find/.test(L);ae&&(pe.prototype[L]=function(){var Ge=this.__wrapped__,He=te?[1]:arguments,ot=Ge instanceof Fr,wt=He[0],_t=ot||Tr(Ge),Rt=function(vr){var jt=ae.apply(pe,oa([vr],He));return te&&$t?jt[0]:jt};_t&&V&&typeof wt=="function"&&wt.length!=1&&(ot=_t=!1);var $t=this.__chain__,Zt=!!this.__actions__.length,cr=Se&&!$t,xt=ot&&!Zt;if(!Se&&_t){Ge=xt?Ge:new Fr(this);var Dt=A.apply(Ge,He);return Dt.__actions__.push({func:Ih,args:[Rt],thisArg:i}),new Qn(Dt,$t)}return cr&&xt?A.apply(this,He):(Dt=this.thru(Rt),cr?te?Dt.value()[0]:Dt.value():Dt)})}),qt(["pop","push","shift","sort","splice","unshift"],function(A){var L=cc[A],V=/^(?:push|sort|unshift)$/.test(A)?"tap":"thru",te=/^(?:pop|shift)$/.test(A);pe.prototype[A]=function(){var ae=arguments;if(te&&!this.__chain__){var Se=this.value();return L.apply(Tr(Se)?Se:[],ae)}return this[V](function(Ge){return L.apply(Tr(Ge)?Ge:[],ae)})}}),Cs(Fr.prototype,function(A,L){var V=pe[L];if(V){var te=V.name+"";en.call(cl,te)||(cl[te]=[]),cl[te].push({name:L,func:V})}}),cl[ns(i,2).name]=[{name:"wrapper",func:i}],Fr.prototype.clone=function(){var A=new Fr(this.__wrapped__);return A.__actions__=So(this.__actions__),A.__dir__=this.__dir__,A.__filtered__=this.__filtered__,A.__iteratees__=So(this.__iteratees__),A.__takeCount__=this.__takeCount__,A.__views__=So(this.__views__),A},Fr.prototype.reverse=function(){if(this.__filtered__){var A=new Fr(this);A.__dir__=-1,A.__filtered__=!0}else(A=this.clone()).__dir__*=-1;return A},Fr.prototype.value=function(){var A=this.__wrapped__.value(),L=this.__dir__,V=Tr(A),te=L<0,ae=V?A.length:0,Se=function(tn,sr,dr){for(var Oi=-1,Xn=dr.length;++Oi<Xn;){var Ro=dr[Oi],Ln=Ro.size;switch(Ro.type){case"drop":tn+=Ln;break;case"dropRight":sr-=Ln;break;case"take":sr=qn(sr,tn+Ln);break;case"takeRight":tn=Cn(tn,sr-Ln)}}return{start:tn,end:sr}}(0,ae,this.__views__),Ge=Se.start,He=Se.end,ot=He-Ge,wt=te?He:Ge-1,_t=this.__iteratees__,Rt=_t.length,$t=0,Zt=qn(ot,this.__takeCount__);if(!V||!te&&ae==ot&&Zt==ot)return ca(A,this.__actions__);var cr=[];e:for(;ot--&&$t<Zt;){for(var xt=-1,Dt=A[wt+=L];++xt<Rt;){var vr=_t[xt],jt=vr.iteratee,Er=vr.type,wr=jt(Dt);if(Er==2)Dt=wr;else if(!wr){if(Er==1)continue e;break e}}cr[$t++]=Dt}return cr},pe.prototype.at=Rs,pe.prototype.chain=function(){return us(this)},pe.prototype.commit=function(){return new Qn(this.value(),this.__chain__)},pe.prototype.next=function(){this.__values__===i&&(this.__values__=Tt(this.value()));var A=this.__index__>=this.__values__.length;return{done:A,value:A?i:this.__values__[this.__index__++]}},pe.prototype.plant=function(A){for(var L,V=this;V instanceof hh;){var te=Rd(V);te.__index__=0,te.__values__=i,L?ae.__wrapped__=te:L=te;var ae=te;V=V.__wrapped__}return ae.__wrapped__=A,L},pe.prototype.reverse=function(){var A=this.__wrapped__;if(A instanceof Fr){var L=A;return this.__actions__.length&&(L=new Fr(this)),(L=L.reverse()).__actions__.push({func:Ih,args:[Cf],thisArg:i}),new Qn(L,this.__chain__)}return this.thru(Cf)},pe.prototype.toJSON=pe.prototype.valueOf=pe.prototype.value=function(){return ca(this.__wrapped__,this.__actions__)},pe.prototype.first=pe.prototype.head,ku&&(pe.prototype[ku]=function(){return this}),pe}();Dn._=aa,(n=(function(){return aa}).call(e,t,e,r))===i||(r.exports=n)}).call(this)},5880:function(r,e,t){var n,i;n=function(){var a=function(){},o="undefined",s=typeof window!==o&&typeof window.navigator!==o&&/Trident\/|MSIE /.test(window.navigator.userAgent),u=["trace","debug","info","warn","error"],l={},c=null;function f(p,m){var x=p[m];if(typeof x.bind=="function")return x.bind(p);try{return Function.prototype.bind.call(x,p)}catch{return function(){return Function.prototype.apply.apply(x,[p,arguments])}}}function h(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function d(){for(var p=this.getLevel(),m=0;m<u.length;m++){var x=u[m];this[x]=m<p?a:this.methodFactory(x,p,this.name)}if(this.log=this.debug,typeof console===o&&p<this.levels.SILENT)return"No console available for logging"}function v(p){return function(){typeof console!==o&&(d.call(this),this[p].apply(this,arguments))}}function y(p,m,x){return function(T){return T==="debug"&&(T="log"),typeof console!==o&&(T==="trace"&&s?h:console[T]!==void 0?f(console,T):console.log!==void 0?f(console,"log"):a)}(p)||v.apply(this,arguments)}function w(p,m){var x,T,P,C=this,R="loglevel";function D(){var B;if(typeof window!==o&&R){try{B=window.localStorage[R]}catch{}if(typeof B===o)try{var z=window.document.cookie,W=encodeURIComponent(R),Z=z.indexOf(W+"=");Z!==-1&&(B=/^([^;]+)/.exec(z.slice(Z+W.length+1))[1])}catch{}return C.levels[B]===void 0&&(B=void 0),B}}function N(B){var z=B;if(typeof z=="string"&&C.levels[z.toUpperCase()]!==void 0&&(z=C.levels[z.toUpperCase()]),typeof z=="number"&&z>=0&&z<=C.levels.SILENT)return z;throw new TypeError("log.setLevel() called with invalid level: "+B)}typeof p=="string"?R+=":"+p:typeof p=="symbol"&&(R=void 0),C.name=p,C.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},C.methodFactory=m||y,C.getLevel=function(){return P??T??x},C.setLevel=function(B,z){return P=N(B),z!==!1&&function(W){var Z=(u[W]||"silent").toUpperCase();if(typeof window!==o&&R){try{return void(window.localStorage[R]=Z)}catch{}try{window.document.cookie=encodeURIComponent(R)+"="+Z+";"}catch{}}}(P),d.call(C)},C.setDefaultLevel=function(B){T=N(B),D()||C.setLevel(B,!1)},C.resetLevel=function(){P=null,function(){if(typeof window!==o&&R){try{window.localStorage.removeItem(R)}catch{}try{window.document.cookie=encodeURIComponent(R)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}(),d.call(C)},C.enableAll=function(B){C.setLevel(C.levels.TRACE,B)},C.disableAll=function(B){C.setLevel(C.levels.SILENT,B)},C.rebuild=function(){if(c!==C&&(x=N(c.getLevel())),d.call(C),c===C)for(var B in l)l[B].rebuild()},x=N(c?c.getLevel():"WARN");var j=D();j!=null&&(P=N(j)),d.call(C)}(c=new w).getLogger=function(p){if(typeof p!="symbol"&&typeof p!="string"||p==="")throw new TypeError("You must supply a name when creating a logger.");var m=l[p];return m||(m=l[p]=new w(p,c.methodFactory)),m};var b=typeof window!==o?window.log:void 0;return c.noConflict=function(){return typeof window!==o&&window.log===c&&(window.log=b),c},c.getLoggers=function(){return l},c.default=c,c},(i=n.call(e,t,e,r))===void 0||(r.exports=i)},397:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.assertNotificationFilterIsEmpty=e.assertImpersonatedUserIsEmpty=e.assertTxConfigIsEmpty=e.assertDatabaseIsEmpty=void 0;var n=t(9305);t(9014),e.assertTxConfigIsEmpty=function(i,a,o){if(a===void 0&&(a=function(){}),i&&!i.isEmpty()){var s=(0,n.newError)("Driver is connected to the database that does not support transaction configuration. Please upgrade to neo4j 3.5.0 or later in order to use this functionality");throw a(s.message),o.onError(s),s}},e.assertDatabaseIsEmpty=function(i,a,o){if(a===void 0&&(a=function(){}),i){var s=(0,n.newError)("Driver is connected to the database that does not support multiple databases. Please upgrade to neo4j 4.0.0 or later in order to use this functionality");throw a(s.message),o.onError(s),s}},e.assertImpersonatedUserIsEmpty=function(i,a,o){if(a===void 0&&(a=function(){}),i){var s=(0,n.newError)("Driver is connected to the database that does not support user impersonation. Please upgrade to neo4j 4.4.0 or later in order to use this functionality. "+"Trying to impersonate ".concat(i,"."));throw a(s.message),o.onError(s),s}},e.assertNotificationFilterIsEmpty=function(i,a,o){if(a===void 0&&(a=function(){}),i!==void 0){var s=(0,n.newError)("Driver is connected to a database that does not support user notification filters. Please upgrade to Neo4j 5.7.0 or later in order to use this functionality. "+"Trying to set notifications to ".concat(n.json.stringify(i),"."));throw a(s.message),o.onError(s),s}}},8320:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(P){for(var C,R=1,D=arguments.length;R<D;R++)for(var N in C=arguments[R])Object.prototype.hasOwnProperty.call(C,N)&&(P[N]=C[N]);return P},n.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(P,C,R,D){D===void 0&&(D=R);var N=Object.getOwnPropertyDescriptor(C,R);N&&!("get"in N?!C.__esModule:N.writable||N.configurable)||(N={enumerable:!0,get:function(){return C[R]}}),Object.defineProperty(P,D,N)}:function(P,C,R,D){D===void 0&&(D=R),P[D]=C[R]}),a=this&&this.__setModuleDefault||(Object.create?function(P,C){Object.defineProperty(P,"default",{enumerable:!0,value:C})}:function(P,C){P.default=C}),o=this&&this.__importStar||function(P){if(P&&P.__esModule)return P;var C={};if(P!=null)for(var R in P)R!=="default"&&Object.prototype.hasOwnProperty.call(P,R)&&i(C,P,R);return a(C,P),C},s=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(e,"__esModule",{value:!0});var u=t(397),l=(t(7452),t(7168)),c=o(t(7021)),f=t(9014),h=t(9305),d=s(t(6661)),v=s(t(3321)),y=h.internal.bookmarks.Bookmarks,w=h.internal.constants,b=w.ACCESS_MODE_WRITE,p=w.BOLT_PROTOCOL_V1,m=(h.internal.logger.Logger,h.internal.txConfig.TxConfig),x=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),T=function(){function P(C,R,D,N,j,B){var z=D===void 0?{}:D,W=z.disableLosslessIntegers,Z=z.useBigInt;N===void 0&&(N=function(){return null}),this._server=C||{},this._chunker=R,this._packer=this._createPacker(R),this._unpacker=this._createUnpacker(W,Z),this._responseHandler=N(this),this._log=j,this._onProtocolError=B,this._fatalError=null,this._lastMessageSignature=null,this._config={disableLosslessIntegers:W,useBigInt:Z}}return Object.defineProperty(P.prototype,"transformer",{get:function(){var C=this;return this._transformer===void 0&&(this._transformer=new v.default(Object.values(d.default).map(function(R){return R(C._config,C._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"version",{get:function(){return p},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"supportsReAuth",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"initialized",{get:function(){return!!this._initialized},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"authToken",{get:function(){return this._authToken},enumerable:!1,configurable:!0}),P.prototype.packer=function(){return this._packer},P.prototype.packable=function(C){return this._packer.packable(C,this.transformer.toStructure)},P.prototype.unpacker=function(){return this._unpacker},P.prototype.unpack=function(C){return this._unpacker.unpack(C,this.transformer.fromStructure)},P.prototype.transformMetadata=function(C){return C},P.prototype.enrichErrorMetadata=function(C){return n(n({},C),{diagnostic_record:C.diagnostic_record!==null?n(n({},x),C.diagnostic_record):null})},P.prototype.initialize=function(C){var R=this,D=C===void 0?{}:C,N=D.userAgent,j=(D.boltAgent,D.authToken),B=D.notificationFilter,z=D.onError,W=D.onComplete,Z=new f.LoginObserver({onError:function(Q){return R._onLoginError(Q,z)},onCompleted:function(Q){return R._onLoginCompleted(Q,W)}});return(0,u.assertNotificationFilterIsEmpty)(B,this._onProtocolError,Z),this.write(c.default.init(N,j),Z,!0),Z},P.prototype.logoff=function(C){var R=C===void 0?{}:C,D=R.onComplete,N=R.onError,j=(R.flush,new f.LogoffObserver({onCompleted:D,onError:N})),B=(0,h.newError)("Driver is connected to a database that does not support logoff. Please upgrade to Neo4j 5.5.0 or later in order to use this functionality.");throw this._onProtocolError(B.message),j.onError(B),B},P.prototype.logon=function(C){var R=this,D=C===void 0?{}:C,N=D.authToken,j=D.onComplete,B=D.onError,z=(D.flush,new f.LoginObserver({onCompleted:function(){return R._onLoginCompleted({},N,j)},onError:function(Z){return R._onLoginError(Z,B)}})),W=(0,h.newError)("Driver is connected to a database that does not support logon. Please upgrade to Neo4j 5.5.0 or later in order to use this functionality.");throw this._onProtocolError(W.message),z.onError(W),W},P.prototype.prepareToClose=function(){},P.prototype.beginTransaction=function(C){var R=C===void 0?{}:C,D=R.bookmarks,N=R.txConfig,j=R.database,B=R.mode,z=R.impersonatedUser,W=R.notificationFilter,Z=R.beforeError,Q=R.afterError,re=R.beforeComplete,ee=R.afterComplete;return this.run("BEGIN",D?D.asBeginTransactionParameters():{},{bookmarks:D,txConfig:N,database:j,mode:B,impersonatedUser:z,notificationFilter:W,beforeError:Z,afterError:Q,beforeComplete:re,afterComplete:ee,flush:!1})},P.prototype.commitTransaction=function(C){var R=C===void 0?{}:C,D=R.beforeError,N=R.afterError,j=R.beforeComplete,B=R.afterComplete;return this.run("COMMIT",{},{bookmarks:y.empty(),txConfig:m.empty(),mode:b,beforeError:D,afterError:N,beforeComplete:j,afterComplete:B})},P.prototype.rollbackTransaction=function(C){var R=C===void 0?{}:C,D=R.beforeError,N=R.afterError,j=R.beforeComplete,B=R.afterComplete;return this.run("ROLLBACK",{},{bookmarks:y.empty(),txConfig:m.empty(),mode:b,beforeError:D,afterError:N,beforeComplete:j,afterComplete:B})},P.prototype.run=function(C,R,D){var N=D===void 0?{}:D,j=(N.bookmarks,N.txConfig),B=N.database,z=(N.mode,N.impersonatedUser),W=N.notificationFilter,Z=N.beforeKeys,Q=N.afterKeys,re=N.beforeError,ee=N.afterError,ue=N.beforeComplete,de=N.afterComplete,se=N.flush,me=se===void 0||se,Me=N.highRecordWatermark,he=Me===void 0?Number.MAX_VALUE:Me,fe=N.lowRecordWatermark,Ee=fe===void 0?Number.MAX_VALUE:fe,Ce=new f.ResultStreamObserver({server:this._server,beforeKeys:Z,afterKeys:Q,beforeError:re,afterError:ee,beforeComplete:ue,afterComplete:de,highRecordWatermark:he,lowRecordWatermark:Ee});return(0,u.assertTxConfigIsEmpty)(j,this._onProtocolError,Ce),(0,u.assertDatabaseIsEmpty)(B,this._onProtocolError,Ce),(0,u.assertImpersonatedUserIsEmpty)(z,this._onProtocolError,Ce),(0,u.assertNotificationFilterIsEmpty)(W,this._onProtocolError,Ce),this.write(c.default.run(C,R),Ce,!1),this.write(c.default.pullAll(),Ce,me),Ce},Object.defineProperty(P.prototype,"currentFailure",{get:function(){return this._responseHandler.currentFailure},enumerable:!1,configurable:!0}),P.prototype.reset=function(C){var R=C===void 0?{}:C,D=R.onError,N=R.onComplete,j=new f.ResetObserver({onProtocolError:this._onProtocolError,onError:D,onComplete:N});return this.write(c.default.reset(),j,!0),j},P.prototype.telemetry=function(C,R){C.api;var D=R===void 0?{}:R,N=(D.onError,D.onCompleted),j=new f.CompletedObserver;return N&&N(),j},P.prototype._createPacker=function(C){return new l.v1.Packer(C)},P.prototype._createUnpacker=function(C,R){return new l.v1.Unpacker(C,R)},P.prototype.write=function(C,R,D){if(this.queueObserverIfProtocolIsNotBroken(R)){this._log.isDebugEnabled()&&this._log.debug("C: ".concat(C)),this._lastMessageSignature=C.signature;var N=new l.structure.Structure(C.signature,C.fields);this.packable(N)(),this._chunker.messageBoundary(),D&&this._chunker.flush()}},P.prototype.isLastMessageLogon=function(){return this._lastMessageSignature===c.SIGNATURES.HELLO||this._lastMessageSignature===c.SIGNATURES.LOGON},P.prototype.isLastMessageReset=function(){return this._lastMessageSignature===c.SIGNATURES.RESET},P.prototype.notifyFatalError=function(C){return this._fatalError=C,this._responseHandler._notifyErrorToObservers(C)},P.prototype.updateCurrentObserver=function(){return this._responseHandler._updateCurrentObserver()},P.prototype.hasOngoingObservableRequests=function(){return this._responseHandler.hasOngoingObservableRequests()},P.prototype.queueObserverIfProtocolIsNotBroken=function(C){return this.isBroken()?(this.notifyFatalErrorToObserver(C),!1):this._responseHandler._queueObserver(C)},P.prototype.isBroken=function(){return!!this._fatalError},P.prototype.notifyFatalErrorToObserver=function(C){C&&C.onError&&C.onError(this._fatalError)},P.prototype.resetFailure=function(){this._responseHandler._resetFailure()},P.prototype._onLoginCompleted=function(C,R,D){if(this._initialized=!0,this._authToken=R,C){var N=C.server;this._server.version||(this._server.version=N)}D&&D(C)},P.prototype._onLoginError=function(C,R){this._onProtocolError(C.message),R&&R(C)},P}();e.default=T},6661:function(r,e,t){var n=this&&this.__read||function(u,l){var c=typeof Symbol=="function"&&u[Symbol.iterator];if(!c)return u;var f,h,d=c.call(u),v=[];try{for(;(l===void 0||l-- >0)&&!(f=d.next()).done;)v.push(f.value)}catch(y){h={error:y}}finally{try{f&&!f.done&&(c=d.return)&&c.call(d)}finally{if(h)throw h.error}}return v};Object.defineProperty(e,"__esModule",{value:!0});var i=t(9305),a=t(7168),o=t(3321),s=i.error.PROTOCOL_ERROR;e.default={createNodeTransformer:function(){return new o.TypeTransformer({signature:78,isTypeInstance:function(u){return u instanceof i.Node},toStructure:function(u){throw(0,i.newError)("It is not allowed to pass nodes in query parameters, given: ".concat(u),s)},fromStructure:function(u){a.structure.verifyStructSize("Node",3,u.size);var l=n(u.fields,3),c=l[0],f=l[1],h=l[2];return new i.Node(c,f,h)}})},createRelationshipTransformer:function(){return new o.TypeTransformer({signature:82,isTypeInstance:function(u){return u instanceof i.Relationship},toStructure:function(u){throw(0,i.newError)("It is not allowed to pass relationships in query parameters, given: ".concat(u),s)},fromStructure:function(u){a.structure.verifyStructSize("Relationship",5,u.size);var l=n(u.fields,5),c=l[0],f=l[1],h=l[2],d=l[3],v=l[4];return new i.Relationship(c,f,h,d,v)}})},createUnboundRelationshipTransformer:function(){return new o.TypeTransformer({signature:114,isTypeInstance:function(u){return u instanceof i.UnboundRelationship},toStructure:function(u){throw(0,i.newError)("It is not allowed to pass unbound relationships in query parameters, given: ".concat(u),s)},fromStructure:function(u){a.structure.verifyStructSize("UnboundRelationship",3,u.size);var l=n(u.fields,3),c=l[0],f=l[1],h=l[2];return new i.UnboundRelationship(c,f,h)}})},createPathTransformer:function(){return new o.TypeTransformer({signature:80,isTypeInstance:function(u){return u instanceof i.Path},toStructure:function(u){throw(0,i.newError)("It is not allowed to pass paths in query parameters, given: ".concat(u),s)},fromStructure:function(u){a.structure.verifyStructSize("Path",3,u.size);for(var l=n(u.fields,3),c=l[0],f=l[1],h=l[2],d=[],v=c[0],y=0;y<h.length;y+=2){var w=c[h[y+1]],b=(0,i.toNumber)(h[y]),p=void 0;b>0?(p=f[b-1])instanceof i.UnboundRelationship&&(f[b-1]=p=p.bindTo(v,w)):(p=f[-b-1])instanceof i.UnboundRelationship&&(f[-b-1]=p=p.bindTo(w,v)),d.push(new i.PathSegment(v,p,w)),v=w}return new i.Path(c[0],c[c.length-1],d)}})}}},2857:function(r,e,t){var n,i=this&&this.__extends||(n=function(d,v){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,w){y.__proto__=w}||function(y,w){for(var b in w)Object.prototype.hasOwnProperty.call(w,b)&&(y[b]=w[b])},n(d,v)},function(d,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function y(){this.constructor=d}n(d,v),d.prototype=v===null?Object.create(v):(y.prototype=v.prototype,new y)}),a=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0});var o=a(t(8320)),s=a(t(7168)),u=t(9305),l=a(t(3448)),c=a(t(3321)),f=u.internal.constants.BOLT_PROTOCOL_V2,h=function(d){function v(){return d!==null&&d.apply(this,arguments)||this}return i(v,d),v.prototype._createPacker=function(y){return new s.default.Packer(y)},v.prototype._createUnpacker=function(y,w){return new s.default.Unpacker(y,w)},Object.defineProperty(v.prototype,"transformer",{get:function(){var y=this;return this._transformer===void 0&&(this._transformer=new c.default(Object.values(l.default).map(function(w){return w(y._config,y._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"version",{get:function(){return f},enumerable:!1,configurable:!0}),v}(o.default);e.default=h},3448:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(w){for(var b,p=1,m=arguments.length;p<m;p++)for(var x in b=arguments[p])Object.prototype.hasOwnProperty.call(b,x)&&(w[x]=b[x]);return w},n.apply(this,arguments)},i=this&&this.__read||function(w,b){var p=typeof Symbol=="function"&&w[Symbol.iterator];if(!p)return w;var m,x,T=p.call(w),P=[];try{for(;(b===void 0||b-- >0)&&!(m=T.next()).done;)P.push(m.value)}catch(C){x={error:C}}finally{try{m&&!m.done&&(p=T.return)&&p.call(T)}finally{if(x)throw x.error}}return P},a=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(e,"__esModule",{value:!0});var o=t(9305),s=t(7168),u=t(3321),l=t(5973),c=a(t(6661)),f=o.internal.temporalUtil,h=f.dateToEpochDay,d=f.localDateTimeToEpochSecond,v=f.localTimeToNanoOfDay;function y(w,b,p){if(!b&&!p)return w;var m=function(C){return p?C.toBigInt():C.toNumberOrInfinity()},x=Object.create(Object.getPrototypeOf(w));for(var T in w)if(Object.prototype.hasOwnProperty.call(w,T)===!0){var P=w[T];x[T]=(0,o.isInt)(P)?m(P):P}return Object.freeze(x),x}e.default=n(n({},c.default),{createPoint2DTransformer:function(){return new u.TypeTransformer({signature:88,isTypeInstance:function(w){return(0,o.isPoint)(w)&&(w.z===null||w.z===void 0)},toStructure:function(w){return new s.structure.Structure(88,[(0,o.int)(w.srid),w.x,w.y])},fromStructure:function(w){s.structure.verifyStructSize("Point2D",3,w.size);var b=i(w.fields,3),p=b[0],m=b[1],x=b[2];return new o.Point(p,m,x,void 0)}})},createPoint3DTransformer:function(){return new u.TypeTransformer({signature:89,isTypeInstance:function(w){return(0,o.isPoint)(w)&&w.z!==null&&w.z!==void 0},toStructure:function(w){return new s.structure.Structure(89,[(0,o.int)(w.srid),w.x,w.y,w.z])},fromStructure:function(w){s.structure.verifyStructSize("Point3D",4,w.size);var b=i(w.fields,4),p=b[0],m=b[1],x=b[2],T=b[3];return new o.Point(p,m,x,T)}})},createDurationTransformer:function(){return new u.TypeTransformer({signature:69,isTypeInstance:o.isDuration,toStructure:function(w){var b=(0,o.int)(w.months),p=(0,o.int)(w.days),m=(0,o.int)(w.seconds),x=(0,o.int)(w.nanoseconds);return new s.structure.Structure(69,[b,p,m,x])},fromStructure:function(w){s.structure.verifyStructSize("Duration",4,w.size);var b=i(w.fields,4),p=b[0],m=b[1],x=b[2],T=b[3];return new o.Duration(p,m,x,T)}})},createLocalTimeTransformer:function(w){var b=w.disableLosslessIntegers,p=w.useBigInt;return new u.TypeTransformer({signature:116,isTypeInstance:o.isLocalTime,toStructure:function(m){var x=v(m.hour,m.minute,m.second,m.nanosecond);return new s.structure.Structure(116,[x])},fromStructure:function(m){s.structure.verifyStructSize("LocalTime",1,m.size);var x=i(m.fields,1)[0];return y((0,l.nanoOfDayToLocalTime)(x),b,p)}})},createTimeTransformer:function(w){var b=w.disableLosslessIntegers,p=w.useBigInt;return new u.TypeTransformer({signature:84,isTypeInstance:o.isTime,toStructure:function(m){var x=v(m.hour,m.minute,m.second,m.nanosecond),T=(0,o.int)(m.timeZoneOffsetSeconds);return new s.structure.Structure(84,[x,T])},fromStructure:function(m){s.structure.verifyStructSize("Time",2,m.size);var x=i(m.fields,2),T=x[0],P=x[1],C=(0,l.nanoOfDayToLocalTime)(T);return y(new o.Time(C.hour,C.minute,C.second,C.nanosecond,P),b,p)}})},createDateTransformer:function(w){var b=w.disableLosslessIntegers,p=w.useBigInt;return new u.TypeTransformer({signature:68,isTypeInstance:o.isDate,toStructure:function(m){var x=h(m.year,m.month,m.day);return new s.structure.Structure(68,[x])},fromStructure:function(m){s.structure.verifyStructSize("Date",1,m.size);var x=i(m.fields,1)[0];return y((0,l.epochDayToDate)(x),b,p)}})},createLocalDateTimeTransformer:function(w){var b=w.disableLosslessIntegers,p=w.useBigInt;return new u.TypeTransformer({signature:100,isTypeInstance:o.isLocalDateTime,toStructure:function(m){var x=d(m.year,m.month,m.day,m.hour,m.minute,m.second,m.nanosecond),T=(0,o.int)(m.nanosecond);return new s.structure.Structure(100,[x,T])},fromStructure:function(m){s.structure.verifyStructSize("LocalDateTime",2,m.size);var x=i(m.fields,2),T=x[0],P=x[1];return y((0,l.epochSecondAndNanoToLocalDateTime)(T,P),b,p)}})},createDateTimeWithZoneIdTransformer:function(w){var b=w.disableLosslessIntegers,p=w.useBigInt;return new u.TypeTransformer({signature:102,isTypeInstance:function(m){return(0,o.isDateTime)(m)&&m.timeZoneId!=null},toStructure:function(m){var x=d(m.year,m.month,m.day,m.hour,m.minute,m.second,m.nanosecond),T=(0,o.int)(m.nanosecond),P=m.timeZoneId;return new s.structure.Structure(102,[x,T,P])},fromStructure:function(m){s.structure.verifyStructSize("DateTimeWithZoneId",3,m.size);var x=i(m.fields,3),T=x[0],P=x[1],C=x[2],R=(0,l.epochSecondAndNanoToLocalDateTime)(T,P);return y(new o.DateTime(R.year,R.month,R.day,R.hour,R.minute,R.second,R.nanosecond,null,C),b,p)}})},createDateTimeWithOffsetTransformer:function(w){var b=w.disableLosslessIntegers,p=w.useBigInt;return new u.TypeTransformer({signature:70,isTypeInstance:function(m){return(0,o.isDateTime)(m)&&m.timeZoneId==null},toStructure:function(m){var x=d(m.year,m.month,m.day,m.hour,m.minute,m.second,m.nanosecond),T=(0,o.int)(m.nanosecond),P=(0,o.int)(m.timeZoneOffsetSeconds);return new s.structure.Structure(70,[x,T,P])},fromStructure:function(m){s.structure.verifyStructSize("DateTimeWithZoneOffset",3,m.size);var x=i(m.fields,3),T=x[0],P=x[1],C=x[2],R=(0,l.epochSecondAndNanoToLocalDateTime)(T,P);return y(new o.DateTime(R.year,R.month,R.day,R.hour,R.minute,R.second,R.nanosecond,C,null),b,p)}})}})},5642:function(r,e,t){var n,i=this&&this.__extends||(n=function(x,T){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,C){P.__proto__=C}||function(P,C){for(var R in C)Object.prototype.hasOwnProperty.call(C,R)&&(P[R]=C[R])},n(x,T)},function(x,T){if(typeof T!="function"&&T!==null)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");function P(){this.constructor=x}n(x,T),x.prototype=T===null?Object.create(T):(P.prototype=T.prototype,new P)}),a=this&&this.__assign||function(){return a=Object.assign||function(x){for(var T,P=1,C=arguments.length;P<C;P++)for(var R in T=arguments[P])Object.prototype.hasOwnProperty.call(T,R)&&(x[R]=T[R]);return x},a.apply(this,arguments)},o=this&&this.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(e,"__esModule",{value:!0});var s=o(t(2857)),u=o(t(7021)),l=t(397),c=t(9014),f=o(t(1175)),h=o(t(3321)),d=t(9305),v=(d.internal.bookmarks.Bookmarks,d.internal.constants.BOLT_PROTOCOL_V3),y=d.internal.txConfig.TxConfig,w="context",b="CALL dbms.cluster.routing.getRoutingTable($".concat(w,")"),p=new c.StreamObserver,m=function(x){function T(){return x!==null&&x.apply(this,arguments)||this}return i(T,x),Object.defineProperty(T.prototype,"version",{get:function(){return v},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"transformer",{get:function(){var P=this;return this._transformer===void 0&&(this._transformer=new h.default(Object.values(f.default).map(function(C){return C(P._config,P._log)}))),this._transformer},enumerable:!1,configurable:!0}),T.prototype.transformMetadata=function(P){return"t_first"in P&&(P.result_available_after=P.t_first,delete P.t_first),"t_last"in P&&(P.result_consumed_after=P.t_last,delete P.t_last),P},T.prototype.initialize=function(P){var C=this,R=P===void 0?{}:P,D=R.userAgent,N=(R.boltAgent,R.authToken),j=R.notificationFilter,B=R.onError,z=R.onComplete,W=new c.LoginObserver({onError:function(Z){return C._onLoginError(Z,B)},onCompleted:function(Z){return C._onLoginCompleted(Z,N,z)}});return(0,l.assertNotificationFilterIsEmpty)(j,this._onProtocolError,W),this.write(u.default.hello(D,N),W,!0),W},T.prototype.prepareToClose=function(){this.write(u.default.goodbye(),p,!0)},T.prototype.beginTransaction=function(P){var C=P===void 0?{}:P,R=C.bookmarks,D=C.txConfig,N=C.database,j=C.impersonatedUser,B=C.notificationFilter,z=C.mode,W=C.beforeError,Z=C.afterError,Q=C.beforeComplete,re=C.afterComplete,ee=new c.ResultStreamObserver({server:this._server,beforeError:W,afterError:Z,beforeComplete:Q,afterComplete:re});return ee.prepareToHandleSingleResponse(),(0,l.assertDatabaseIsEmpty)(N,this._onProtocolError,ee),(0,l.assertImpersonatedUserIsEmpty)(j,this._onProtocolError,ee),(0,l.assertNotificationFilterIsEmpty)(B,this._onProtocolError,ee),this.write(u.default.begin({bookmarks:R,txConfig:D,mode:z}),ee,!0),ee},T.prototype.commitTransaction=function(P){var C=P===void 0?{}:P,R=C.beforeError,D=C.afterError,N=C.beforeComplete,j=C.afterComplete,B=new c.ResultStreamObserver({server:this._server,beforeError:R,afterError:D,beforeComplete:N,afterComplete:j});return B.prepareToHandleSingleResponse(),this.write(u.default.commit(),B,!0),B},T.prototype.rollbackTransaction=function(P){var C=P===void 0?{}:P,R=C.beforeError,D=C.afterError,N=C.beforeComplete,j=C.afterComplete,B=new c.ResultStreamObserver({server:this._server,beforeError:R,afterError:D,beforeComplete:N,afterComplete:j});return B.prepareToHandleSingleResponse(),this.write(u.default.rollback(),B,!0),B},T.prototype.run=function(P,C,R){var D=R===void 0?{}:R,N=D.bookmarks,j=D.txConfig,B=D.database,z=D.impersonatedUser,W=D.notificationFilter,Z=D.mode,Q=D.beforeKeys,re=D.afterKeys,ee=D.beforeError,ue=D.afterError,de=D.beforeComplete,se=D.afterComplete,me=D.flush,Me=me===void 0||me,he=D.highRecordWatermark,fe=he===void 0?Number.MAX_VALUE:he,Ee=D.lowRecordWatermark,Ce=Ee===void 0?Number.MAX_VALUE:Ee,ke=new c.ResultStreamObserver({server:this._server,beforeKeys:Q,afterKeys:re,beforeError:ee,afterError:ue,beforeComplete:de,afterComplete:se,highRecordWatermark:fe,lowRecordWatermark:Ce});return(0,l.assertDatabaseIsEmpty)(B,this._onProtocolError,ke),(0,l.assertImpersonatedUserIsEmpty)(z,this._onProtocolError,ke),(0,l.assertNotificationFilterIsEmpty)(W,this._onProtocolError,ke),this.write(u.default.runWithMetadata(P,C,{bookmarks:N,txConfig:j,mode:Z}),ke,!1),this.write(u.default.pullAll(),ke,Me),ke},T.prototype.requestRoutingInformation=function(P){var C,R=P.routingContext,D=R===void 0?{}:R,N=P.sessionContext,j=N===void 0?{}:N,B=P.onError,z=P.onCompleted,W=this.run(b,((C={})[w]=D,C),a(a({},j),{txConfig:y.empty()}));return new c.ProcedureRouteObserver({resultObserver:W,onProtocolError:this._onProtocolError,onError:B,onCompleted:z})},T}(s.default);e.default=m},1175:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(o){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(o[c]=s[c]);return o},n.apply(this,arguments)},i=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(t(3448));e.default=n({},a.default)},2539:function(r,e,t){var n,i=this&&this.__extends||(n=function(P,C){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,D){R.__proto__=D}||function(R,D){for(var N in D)Object.prototype.hasOwnProperty.call(D,N)&&(R[N]=D[N])},n(P,C)},function(P,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function R(){this.constructor=P}n(P,C),P.prototype=C===null?Object.create(C):(R.prototype=C.prototype,new R)}),a=this&&this.__assign||function(){return a=Object.assign||function(P){for(var C,R=1,D=arguments.length;R<D;R++)for(var N in C=arguments[R])Object.prototype.hasOwnProperty.call(C,N)&&(P[N]=C[N]);return P},a.apply(this,arguments)},o=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(e,"__esModule",{value:!0});var s=o(t(5642)),u=o(t(7021)),l=t(397),c=t(9014),f=o(t(2066)),h=o(t(3321)),d=t(9305),v=(d.internal.bookmarks.Bookmarks,d.internal.constants),y=v.BOLT_PROTOCOL_V4_0,w=v.FETCH_ALL,b=d.internal.txConfig.TxConfig,p="context",m="database",x="CALL dbms.routing.getRoutingTable($".concat(p,", $").concat(m,")"),T=function(P){function C(){return P!==null&&P.apply(this,arguments)||this}return i(C,P),Object.defineProperty(C.prototype,"version",{get:function(){return y},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"transformer",{get:function(){var R=this;return this._transformer===void 0&&(this._transformer=new h.default(Object.values(f.default).map(function(D){return D(R._config,R._log)}))),this._transformer},enumerable:!1,configurable:!0}),C.prototype.beginTransaction=function(R){var D=R===void 0?{}:R,N=D.bookmarks,j=D.txConfig,B=D.database,z=D.impersonatedUser,W=D.notificationFilter,Z=D.mode,Q=D.beforeError,re=D.afterError,ee=D.beforeComplete,ue=D.afterComplete,de=new c.ResultStreamObserver({server:this._server,beforeError:Q,afterError:re,beforeComplete:ee,afterComplete:ue});return de.prepareToHandleSingleResponse(),(0,l.assertImpersonatedUserIsEmpty)(z,this._onProtocolError,de),(0,l.assertNotificationFilterIsEmpty)(W,this._onProtocolError,de),this.write(u.default.begin({bookmarks:N,txConfig:j,database:B,mode:Z}),de,!0),de},C.prototype.run=function(R,D,N){var j=N===void 0?{}:N,B=j.bookmarks,z=j.txConfig,W=j.database,Z=j.impersonatedUser,Q=j.notificationFilter,re=j.mode,ee=j.beforeKeys,ue=j.afterKeys,de=j.beforeError,se=j.afterError,me=j.beforeComplete,Me=j.afterComplete,he=j.flush,fe=he===void 0||he,Ee=j.reactive,Ce=Ee!==void 0&&Ee,ke=j.fetchSize,Re=ke===void 0?w:ke,ve=j.highRecordWatermark,we=ve===void 0?Number.MAX_VALUE:ve,Oe=j.lowRecordWatermark,Be=Oe===void 0?Number.MAX_VALUE:Oe,Ye=new c.ResultStreamObserver({server:this._server,reactive:Ce,fetchSize:Re,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:ee,afterKeys:ue,beforeError:de,afterError:se,beforeComplete:me,afterComplete:Me,highRecordWatermark:we,lowRecordWatermark:Be});(0,l.assertImpersonatedUserIsEmpty)(Z,this._onProtocolError,Ye),(0,l.assertNotificationFilterIsEmpty)(Q,this._onProtocolError,Ye);var ht=Ce;return this.write(u.default.runWithMetadata(R,D,{bookmarks:B,txConfig:z,database:W,mode:re}),Ye,ht&&fe),Ce||this.write(u.default.pull({n:Re}),Ye,fe),Ye},C.prototype._requestMore=function(R,D,N){this.write(u.default.pull({stmtId:R,n:D}),N,!0)},C.prototype._requestDiscard=function(R,D){this.write(u.default.discard({stmtId:R}),D,!0)},C.prototype._noOp=function(){},C.prototype.requestRoutingInformation=function(R){var D,N=R.routingContext,j=N===void 0?{}:N,B=R.databaseName,z=B===void 0?null:B,W=R.sessionContext,Z=W===void 0?{}:W,Q=R.onError,re=R.onCompleted,ee=this.run(x,((D={})[p]=j,D[m]=z,D),a(a({},Z),{txConfig:b.empty()}));return new c.ProcedureRouteObserver({resultObserver:ee,onProtocolError:this._onProtocolError,onError:Q,onCompleted:re})},C}(s.default);e.default=T},2066:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(o){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(o[c]=s[c]);return o},n.apply(this,arguments)},i=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(t(1175));e.default=n({},a.default)},4596:function(r,e,t){var n,i=this&&this.__extends||(n=function(y,w){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,p){b.__proto__=p}||function(b,p){for(var m in p)Object.prototype.hasOwnProperty.call(p,m)&&(b[m]=p[m])},n(y,w)},function(y,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function b(){this.constructor=y}n(y,w),y.prototype=w===null?Object.create(w):(b.prototype=w.prototype,new b)}),a=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(e,"__esModule",{value:!0});var o=a(t(2539)),s=a(t(7021)),u=t(9014),l=t(9305),c=t(397),f=a(t(7521)),h=a(t(3321)),d=l.internal.constants.BOLT_PROTOCOL_V4_1,v=function(y){function w(b,p,m,x,T,P,C){x===void 0&&(x=function(){return null});var R=y.call(this,b,p,m,x,T,P)||this;return R._serversideRouting=C,R}return i(w,y),Object.defineProperty(w.prototype,"version",{get:function(){return d},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"transformer",{get:function(){var b=this;return this._transformer===void 0&&(this._transformer=new h.default(Object.values(f.default).map(function(p){return p(b._config,b._log)}))),this._transformer},enumerable:!1,configurable:!0}),w.prototype.initialize=function(b){var p=this,m=b===void 0?{}:b,x=m.userAgent,T=(m.boltAgent,m.authToken),P=m.notificationFilter,C=m.onError,R=m.onComplete,D=new u.LoginObserver({onError:function(N){return p._onLoginError(N,C)},onCompleted:function(N){return p._onLoginCompleted(N,T,R)}});return(0,c.assertNotificationFilterIsEmpty)(P,this._onProtocolError,D),this.write(s.default.hello(x,T,this._serversideRouting),D,!0),D},w}(o.default);e.default=v},7521:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(o){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(o[c]=s[c]);return o},n.apply(this,arguments)},i=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(t(2066));e.default=n({},a.default)},6445:function(r,e,t){var n,i=this&&this.__extends||(n=function(h,d){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,y){v.__proto__=y}||function(v,y){for(var w in y)Object.prototype.hasOwnProperty.call(y,w)&&(v[w]=y[w])},n(h,d)},function(h,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function v(){this.constructor=h}n(h,d),h.prototype=d===null?Object.create(d):(v.prototype=d.prototype,new v)}),a=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(e,"__esModule",{value:!0});var o=a(t(4596)),s=t(9305),u=a(t(5348)),l=a(t(3321)),c=s.internal.constants.BOLT_PROTOCOL_V4_2,f=function(h){function d(){return h!==null&&h.apply(this,arguments)||this}return i(d,h),Object.defineProperty(d.prototype,"version",{get:function(){return c},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"transformer",{get:function(){var v=this;return this._transformer===void 0&&(this._transformer=new l.default(Object.values(u.default).map(function(y){return y(v._config,v._log)}))),this._transformer},enumerable:!1,configurable:!0}),d}(o.default);e.default=f},5348:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(o){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(o[c]=s[c]);return o},n.apply(this,arguments)},i=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(t(7521));e.default=n({},a.default)},9054:function(r,e,t){var n,i=this&&this.__extends||(n=function(p,m){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,T){x.__proto__=T}||function(x,T){for(var P in T)Object.prototype.hasOwnProperty.call(T,P)&&(x[P]=T[P])},n(p,m)},function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function x(){this.constructor=p}n(p,m),p.prototype=m===null?Object.create(m):(x.prototype=m.prototype,new x)}),a=this&&this.__assign||function(){return a=Object.assign||function(p){for(var m,x=1,T=arguments.length;x<T;x++)for(var P in m=arguments[x])Object.prototype.hasOwnProperty.call(m,P)&&(p[P]=m[P]);return p},a.apply(this,arguments)},o=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(e,"__esModule",{value:!0});var s=o(t(6445)),u=o(t(7021)),l=t(9014),c=t(397),f=o(t(7331)),h=o(t(5045)),d=o(t(3321)),v=t(9305),y=v.internal.bookmarks.Bookmarks,w=v.internal.constants.BOLT_PROTOCOL_V4_3,b=function(p){function m(){return p!==null&&p.apply(this,arguments)||this}return i(m,p),Object.defineProperty(m.prototype,"version",{get:function(){return w},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"transformer",{get:function(){var x=this;return this._transformer===void 0&&(this._transformer=new d.default(Object.values(f.default).map(function(T){return T(x._config,x._log)}))),this._transformer},enumerable:!1,configurable:!0}),m.prototype.requestRoutingInformation=function(x){var T=x.routingContext,P=T===void 0?{}:T,C=x.databaseName,R=C===void 0?null:C,D=x.sessionContext,N=D===void 0?{}:D,j=x.onError,B=x.onCompleted,z=new l.RouteObserver({onProtocolError:this._onProtocolError,onError:j,onCompleted:B}),W=N.bookmarks||y.empty();return this.write(u.default.route(P,W.values(),R),z,!0),z},m.prototype.initialize=function(x){var T=this,P=x===void 0?{}:x,C=P.userAgent,R=(P.boltAgent,P.authToken),D=P.notificationFilter,N=P.onError,j=P.onComplete,B=new l.LoginObserver({onError:function(z){return T._onLoginError(z,N)},onCompleted:function(z){return z.patch_bolt!==void 0&&T._applyPatches(z.patch_bolt),T._onLoginCompleted(z,R,j)}});return(0,c.assertNotificationFilterIsEmpty)(D,this._onProtocolError,B),this.write(u.default.hello(C,R,this._serversideRouting,["utc"]),B,!0),B},m.prototype._applyPatches=function(x){x.includes("utc")&&this._applyUtcPatch()},m.prototype._applyUtcPatch=function(){var x=this;this._transformer=new d.default(Object.values(a(a({},f.default),h.default)).map(function(T){return T(x._config,x._log)}))},m}(s.default);e.default=b},7331:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(o){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(o[c]=s[c]);return o},n.apply(this,arguments)},i=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(t(5348));e.default=n({},a.default)},1711:function(r,e,t){var n,i=this&&this.__extends||(n=function(x,T){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,C){P.__proto__=C}||function(P,C){for(var R in C)Object.prototype.hasOwnProperty.call(C,R)&&(P[R]=C[R])},n(x,T)},function(x,T){if(typeof T!="function"&&T!==null)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");function P(){this.constructor=x}n(x,T),x.prototype=T===null?Object.create(T):(P.prototype=T.prototype,new P)}),a=this&&this.__assign||function(){return a=Object.assign||function(x){for(var T,P=1,C=arguments.length;P<C;P++)for(var R in T=arguments[P])Object.prototype.hasOwnProperty.call(T,R)&&(x[R]=T[R]);return x},a.apply(this,arguments)},o=this&&this.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(e,"__esModule",{value:!0});var s=o(t(9054)),u=t(9305),l=o(t(7021)),c=t(9014),f=t(397),h=o(t(7518)),d=o(t(5045)),v=o(t(3321)),y=u.internal.constants,w=y.BOLT_PROTOCOL_V4_4,b=y.FETCH_ALL,p=u.internal.bookmarks.Bookmarks,m=function(x){function T(){return x!==null&&x.apply(this,arguments)||this}return i(T,x),Object.defineProperty(T.prototype,"version",{get:function(){return w},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"transformer",{get:function(){var P=this;return this._transformer===void 0&&(this._transformer=new v.default(Object.values(h.default).map(function(C){return C(P._config,P._log)}))),this._transformer},enumerable:!1,configurable:!0}),T.prototype.requestRoutingInformation=function(P){var C=P.routingContext,R=C===void 0?{}:C,D=P.databaseName,N=D===void 0?null:D,j=P.impersonatedUser,B=j===void 0?null:j,z=P.sessionContext,W=z===void 0?{}:z,Z=P.onError,Q=P.onCompleted,re=new c.RouteObserver({onProtocolError:this._onProtocolError,onError:Z,onCompleted:Q}),ee=W.bookmarks||p.empty();return this.write(l.default.routeV4x4(R,ee.values(),{databaseName:N,impersonatedUser:B}),re,!0),re},T.prototype.run=function(P,C,R){var D=R===void 0?{}:R,N=D.bookmarks,j=D.txConfig,B=D.database,z=D.mode,W=D.impersonatedUser,Z=D.notificationFilter,Q=D.beforeKeys,re=D.afterKeys,ee=D.beforeError,ue=D.afterError,de=D.beforeComplete,se=D.afterComplete,me=D.flush,Me=me===void 0||me,he=D.reactive,fe=he!==void 0&&he,Ee=D.fetchSize,Ce=Ee===void 0?b:Ee,ke=D.highRecordWatermark,Re=ke===void 0?Number.MAX_VALUE:ke,ve=D.lowRecordWatermark,we=ve===void 0?Number.MAX_VALUE:ve,Oe=new c.ResultStreamObserver({server:this._server,reactive:fe,fetchSize:Ce,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:Q,afterKeys:re,beforeError:ee,afterError:ue,beforeComplete:de,afterComplete:se,highRecordWatermark:Re,lowRecordWatermark:we});(0,f.assertNotificationFilterIsEmpty)(Z,this._onProtocolError,Oe);var Be=fe;return this.write(l.default.runWithMetadata(P,C,{bookmarks:N,txConfig:j,database:B,mode:z,impersonatedUser:W}),Oe,Be&&Me),fe||this.write(l.default.pull({n:Ce}),Oe,Me),Oe},T.prototype.beginTransaction=function(P){var C=P===void 0?{}:P,R=C.bookmarks,D=C.txConfig,N=C.database,j=C.mode,B=C.impersonatedUser,z=C.notificationFilter,W=C.beforeError,Z=C.afterError,Q=C.beforeComplete,re=C.afterComplete,ee=new c.ResultStreamObserver({server:this._server,beforeError:W,afterError:Z,beforeComplete:Q,afterComplete:re});return ee.prepareToHandleSingleResponse(),(0,f.assertNotificationFilterIsEmpty)(z,this._onProtocolError,ee),this.write(l.default.begin({bookmarks:R,txConfig:D,database:N,mode:j,impersonatedUser:B}),ee,!0),ee},T.prototype._applyUtcPatch=function(){var P=this;this._transformer=new v.default(Object.values(a(a({},h.default),d.default)).map(function(C){return C(P._config,P._log)}))},T}(s.default);e.default=m},7518:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(o){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(o[c]=s[c]);return o},n.apply(this,arguments)},i=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(t(7331));e.default=n({},a.default)},844:function(r,e,t){var n,i=this&&this.__extends||(n=function(v,y){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,b){w.__proto__=b}||function(w,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(w[p]=b[p])},n(v,y)},function(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function w(){this.constructor=v}n(v,y),v.prototype=y===null?Object.create(y):(w.prototype=y.prototype,new w)}),a=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(e,"__esModule",{value:!0});var o=a(t(1711)),s=t(397),u=a(t(7449)),l=a(t(3321)),c=a(t(7021)),f=t(9014),h=t(9305).internal.constants.BOLT_PROTOCOL_V5_0,d=function(v){function y(){return v!==null&&v.apply(this,arguments)||this}return i(y,v),Object.defineProperty(y.prototype,"version",{get:function(){return h},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"transformer",{get:function(){var w=this;return this._transformer===void 0&&(this._transformer=new l.default(Object.values(u.default).map(function(b){return b(w._config,w._log)}))),this._transformer},enumerable:!1,configurable:!0}),y.prototype.initialize=function(w){var b=this,p=w===void 0?{}:w,m=p.userAgent,x=(p.boltAgent,p.authToken),T=p.notificationFilter,P=p.onError,C=p.onComplete,R=new f.LoginObserver({onError:function(D){return b._onLoginError(D,P)},onCompleted:function(D){return b._onLoginCompleted(D,x,C)}});return(0,s.assertNotificationFilterIsEmpty)(T,this._onProtocolError,R),this.write(c.default.hello(m,x,this._serversideRouting),R,!0),R},y}(o.default);e.default=d},7449:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(c){for(var f,h=1,d=arguments.length;h<d;h++)for(var v in f=arguments[h])Object.prototype.hasOwnProperty.call(f,v)&&(c[v]=f[v]);return c},n.apply(this,arguments)},i=this&&this.__read||function(c,f){var h=typeof Symbol=="function"&&c[Symbol.iterator];if(!h)return c;var d,v,y=h.call(c),w=[];try{for(;(f===void 0||f-- >0)&&!(d=y.next()).done;)w.push(d.value)}catch(b){v={error:b}}finally{try{d&&!d.done&&(h=y.return)&&h.call(y)}finally{if(v)throw v.error}}return w},a=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0});var o=t(7168),s=t(9305),u=a(t(7518)),l=a(t(5045));e.default=n(n(n({},u.default),l.default),{createNodeTransformer:function(c){return u.default.createNodeTransformer(c).extendsWith({fromStructure:function(f){o.structure.verifyStructSize("Node",4,f.size);var h=i(f.fields,4),d=h[0],v=h[1],y=h[2],w=h[3];return new s.Node(d,v,y,w)}})},createRelationshipTransformer:function(c){return u.default.createRelationshipTransformer(c).extendsWith({fromStructure:function(f){o.structure.verifyStructSize("Relationship",8,f.size);var h=i(f.fields,8),d=h[0],v=h[1],y=h[2],w=h[3],b=h[4],p=h[5],m=h[6],x=h[7];return new s.Relationship(d,v,y,w,b,p,m,x)}})},createUnboundRelationshipTransformer:function(c){return u.default.createUnboundRelationshipTransformer(c).extendsWith({fromStructure:function(f){o.structure.verifyStructSize("UnboundRelationship",4,f.size);var h=i(f.fields,4),d=h[0],v=h[1],y=h[2],w=h[3];return new s.UnboundRelationship(d,v,y,w)}})}})},5045:function(r,e,t){var n=this&&this.__read||function(v,y){var w=typeof Symbol=="function"&&v[Symbol.iterator];if(!w)return v;var b,p,m=w.call(v),x=[];try{for(;(y===void 0||y-- >0)&&!(b=m.next()).done;)x.push(b.value)}catch(T){p={error:T}}finally{try{b&&!b.done&&(w=m.return)&&w.call(m)}finally{if(p)throw p.error}}return x},i=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(e,"__esModule",{value:!0});var a=t(7168),o=t(9305),s=i(t(7518)),u=t(5973),l=t(6492),c=o.internal.temporalUtil.localDateTimeToEpochSecond,f=new Map;function h(v,y,w){var b=function(T){if(!f.has(T)){var P=new Intl.DateTimeFormat("en-US",{timeZone:T,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1,era:"narrow"});f.set(T,P)}return f.get(T)}(v),p=(0,o.int)(y).multiply(1e3).add((0,o.int)(w).div(1e6)).toNumber(),m=b.formatToParts(p).reduce(function(T,P){return P.type==="era"?T.adjustEra=P.value.toUpperCase()==="B"?function(C){return C.subtract(1).negate()}:l.identity:P.type==="hour"?T.hour=(0,o.int)(P.value).modulo(24):P.type!=="literal"&&(T[P.type]=(0,o.int)(P.value)),T},{});m.year=m.adjustEra(m.year);var x=c(m.year,m.month,m.day,m.hour,m.minute,m.second,m.nanosecond);return m.timeZoneOffsetSeconds=x.subtract(y),m.hour=m.hour.modulo(24),m}function d(v,y,w){if(!y&&!w)return v;var b=function(T){return w?T.toBigInt():T.toNumberOrInfinity()},p=Object.create(Object.getPrototypeOf(v));for(var m in v)if(Object.prototype.hasOwnProperty.call(v,m)===!0){var x=v[m];p[m]=(0,o.isInt)(x)?b(x):x}return Object.freeze(p),p}e.default={createDateTimeWithZoneIdTransformer:function(v,y){var w=v.disableLosslessIntegers,b=v.useBigInt;return s.default.createDateTimeWithZoneIdTransformer(v).extendsWith({signature:105,fromStructure:function(p){a.structure.verifyStructSize("DateTimeWithZoneId",3,p.size);var m=n(p.fields,3),x=m[0],T=m[1],P=m[2],C=h(P,x,T);return d(new o.DateTime(C.year,C.month,C.day,C.hour,C.minute,C.second,(0,o.int)(T),C.timeZoneOffsetSeconds,P),w,b)},toStructure:function(p){var m=c(p.year,p.month,p.day,p.hour,p.minute,p.second,p.nanosecond),x=p.timeZoneOffsetSeconds!=null?p.timeZoneOffsetSeconds:function(R,D,N){var j=h(R,D,N),B=c(j.year,j.month,j.day,j.hour,j.minute,j.second,N).subtract(D),z=D.subtract(B),W=h(R,z,N);return c(W.year,W.month,W.day,W.hour,W.minute,W.second,N).subtract(z)}(p.timeZoneId,m,p.nanosecond);p.timeZoneOffsetSeconds==null&&y.warn('DateTime objects without "timeZoneOffsetSeconds" property are prune to bugs related to ambiguous times. For instance, 2022-10-30T2:30:00[Europe/Berlin] could be GMT+1 or GMT+2.');var T=m.subtract(x),P=(0,o.int)(p.nanosecond),C=p.timeZoneId;return new a.structure.Structure(105,[T,P,C])}})},createDateTimeWithOffsetTransformer:function(v){var y=v.disableLosslessIntegers,w=v.useBigInt;return s.default.createDateTimeWithOffsetTransformer(v).extendsWith({signature:73,toStructure:function(b){var p=c(b.year,b.month,b.day,b.hour,b.minute,b.second,b.nanosecond),m=(0,o.int)(b.nanosecond),x=(0,o.int)(b.timeZoneOffsetSeconds),T=p.subtract(x);return new a.structure.Structure(73,[T,m,x])},fromStructure:function(b){a.structure.verifyStructSize("DateTimeWithZoneOffset",3,b.size);var p=n(b.fields,3),m=p[0],x=p[1],T=p[2],P=(0,o.int)(m).add(T),C=(0,u.epochSecondAndNanoToLocalDateTime)(P,x);return d(new o.DateTime(C.year,C.month,C.day,C.hour,C.minute,C.second,C.nanosecond,T,null),y,w)}})}}},6345:function(r,e,t){var n,i=this&&this.__extends||(n=function(y,w){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,p){b.__proto__=p}||function(b,p){for(var m in p)Object.prototype.hasOwnProperty.call(p,m)&&(b[m]=p[m])},n(y,w)},function(y,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function b(){this.constructor=y}n(y,w),y.prototype=w===null?Object.create(w):(b.prototype=w.prototype,new b)}),a=this&&this.__assign||function(){return a=Object.assign||function(y){for(var w,b=1,p=arguments.length;b<p;b++)for(var m in w=arguments[b])Object.prototype.hasOwnProperty.call(w,m)&&(y[m]=w[m]);return y},a.apply(this,arguments)},o=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(e,"__esModule",{value:!0});var s=o(t(844)),u=t(397),l=o(t(9994)),c=o(t(3321)),f=o(t(7021)),h=t(9014),d=t(9305).internal.constants.BOLT_PROTOCOL_V5_1,v=function(y){function w(){return y!==null&&y.apply(this,arguments)||this}return i(w,y),Object.defineProperty(w.prototype,"version",{get:function(){return d},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"transformer",{get:function(){var b=this;return this._transformer===void 0&&(this._transformer=new c.default(Object.values(l.default).map(function(p){return p(b._config,b._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"supportsReAuth",{get:function(){return!0},enumerable:!1,configurable:!0}),w.prototype.initialize=function(b){var p=this,m=b===void 0?{}:b,x=m.userAgent,T=(m.boltAgent,m.authToken),P=m.notificationFilter,C=m.onError,R=m.onComplete,D={},N=new h.LoginObserver({onError:function(j){return p._onLoginError(j,C)},onCompleted:function(j){return D.metadata=j,p._onLoginCompleted(j)}});return(0,u.assertNotificationFilterIsEmpty)(P,this._onProtocolError,N),this.write(f.default.hello5x1(x,this._serversideRouting),N,!1),this.logon({authToken:T,onComplete:function(j){return R(a(a({},j),D.metadata))},onError:C,flush:!0})},w.prototype.logon=function(b){var p=this,m=b===void 0?{}:b,x=m.authToken,T=m.onComplete,P=m.onError,C=m.flush,R=new h.LoginObserver({onCompleted:function(){return p._onLoginCompleted(null,x,T)},onError:function(D){return p._onLoginError(D,P)}});return this.write(f.default.logon(x),R,C),R},w.prototype.logoff=function(b){var p=b===void 0?{}:b,m=p.onComplete,x=p.onError,T=p.flush,P=new h.LogoffObserver({onCompleted:m,onError:x});return this.write(f.default.logoff(),P,T),P},w}(s.default);e.default=v},9994:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(o){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(o[c]=s[c]);return o},n.apply(this,arguments)},i=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(t(7449));e.default=n({},a.default)},934:function(r,e,t){var n,i=this&&this.__extends||(n=function(w,b){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var x in m)Object.prototype.hasOwnProperty.call(m,x)&&(p[x]=m[x])},n(w,b)},function(w,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function p(){this.constructor=w}n(w,b),w.prototype=b===null?Object.create(b):(p.prototype=b.prototype,new p)}),a=this&&this.__assign||function(){return a=Object.assign||function(w){for(var b,p=1,m=arguments.length;p<m;p++)for(var x in b=arguments[p])Object.prototype.hasOwnProperty.call(b,x)&&(w[x]=b[x]);return w},a.apply(this,arguments)},o=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(e,"__esModule",{value:!0});var s=o(t(6345)),u=o(t(3019)),l=o(t(3321)),c=o(t(7021)),f=t(9014),h=t(9305).internal.constants,d=h.BOLT_PROTOCOL_V5_2,v=h.FETCH_ALL,y=function(w){function b(){return w!==null&&w.apply(this,arguments)||this}return i(b,w),Object.defineProperty(b.prototype,"version",{get:function(){return d},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"transformer",{get:function(){var p=this;return this._transformer===void 0&&(this._transformer=new l.default(Object.values(u.default).map(function(m){return m(p._config,p._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"supportsReAuth",{get:function(){return!0},enumerable:!1,configurable:!0}),b.prototype.initialize=function(p){var m=this,x=p===void 0?{}:p,T=x.userAgent,P=(x.boltAgent,x.authToken),C=x.notificationFilter,R=x.onError,D=x.onComplete,N={},j=new f.LoginObserver({onError:function(B){return m._onLoginError(B,R)},onCompleted:function(B){return N.metadata=B,m._onLoginCompleted(B)}});return this.write(c.default.hello5x2(T,C,this._serversideRouting),j,!1),this.logon({authToken:P,onComplete:function(B){return D(a(a({},B),N.metadata))},onError:R,flush:!0})},b.prototype.beginTransaction=function(p){var m=p===void 0?{}:p,x=m.bookmarks,T=m.txConfig,P=m.database,C=m.mode,R=m.impersonatedUser,D=m.notificationFilter,N=m.beforeError,j=m.afterError,B=m.beforeComplete,z=m.afterComplete,W=new f.ResultStreamObserver({server:this._server,beforeError:N,afterError:j,beforeComplete:B,afterComplete:z});return W.prepareToHandleSingleResponse(),this.write(c.default.begin({bookmarks:x,txConfig:T,database:P,mode:C,impersonatedUser:R,notificationFilter:D}),W,!0),W},b.prototype.run=function(p,m,x){var T=x===void 0?{}:x,P=T.bookmarks,C=T.txConfig,R=T.database,D=T.mode,N=T.impersonatedUser,j=T.notificationFilter,B=T.beforeKeys,z=T.afterKeys,W=T.beforeError,Z=T.afterError,Q=T.beforeComplete,re=T.afterComplete,ee=T.flush,ue=ee===void 0||ee,de=T.reactive,se=de!==void 0&&de,me=T.fetchSize,Me=me===void 0?v:me,he=T.highRecordWatermark,fe=he===void 0?Number.MAX_VALUE:he,Ee=T.lowRecordWatermark,Ce=Ee===void 0?Number.MAX_VALUE:Ee,ke=new f.ResultStreamObserver({server:this._server,reactive:se,fetchSize:Me,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:B,afterKeys:z,beforeError:W,afterError:Z,beforeComplete:Q,afterComplete:re,highRecordWatermark:fe,lowRecordWatermark:Ce}),Re=se;return this.write(c.default.runWithMetadata(p,m,{bookmarks:P,txConfig:C,database:R,mode:D,impersonatedUser:N,notificationFilter:j}),ke,Re&&ue),se||this.write(c.default.pull({n:Me}),ke,ue),ke},b}(s.default);e.default=y},3019:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(o){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(o[c]=s[c]);return o},n.apply(this,arguments)},i=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(t(9994));e.default=n({},a.default)},9125:function(r,e,t){var n,i=this&&this.__extends||(n=function(v,y){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,b){w.__proto__=b}||function(w,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(w[p]=b[p])},n(v,y)},function(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function w(){this.constructor=v}n(v,y),v.prototype=y===null?Object.create(y):(w.prototype=y.prototype,new w)}),a=this&&this.__assign||function(){return a=Object.assign||function(v){for(var y,w=1,b=arguments.length;w<b;w++)for(var p in y=arguments[w])Object.prototype.hasOwnProperty.call(y,p)&&(v[p]=y[p]);return v},a.apply(this,arguments)},o=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(e,"__esModule",{value:!0});var s=o(t(934)),u=o(t(2204)),l=o(t(3321)),c=o(t(7021)),f=t(9014),h=t(9305).internal.constants.BOLT_PROTOCOL_V5_3,d=function(v){function y(){return v!==null&&v.apply(this,arguments)||this}return i(y,v),Object.defineProperty(y.prototype,"version",{get:function(){return h},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"transformer",{get:function(){var w=this;return this._transformer===void 0&&(this._transformer=new l.default(Object.values(u.default).map(function(b){return b(w._config,w._log)}))),this._transformer},enumerable:!1,configurable:!0}),y.prototype.initialize=function(w){var b=this,p=w===void 0?{}:w,m=p.userAgent,x=p.boltAgent,T=p.authToken,P=p.notificationFilter,C=p.onError,R=p.onComplete,D={},N=new f.LoginObserver({onError:function(j){return b._onLoginError(j,C)},onCompleted:function(j){return D.metadata=j,b._onLoginCompleted(j)}});return this.write(c.default.hello5x3(m,x,P,this._serversideRouting),N,!1),this.logon({authToken:T,onComplete:function(j){return R(a(a({},j),D.metadata))},onError:C,flush:!0})},y}(s.default);e.default=d},2204:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(o){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(o[c]=s[c]);return o},n.apply(this,arguments)},i=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(t(3019));e.default=n({},a.default)},9744:function(r,e,t){var n,i=this&&this.__extends||(n=function(d,v){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,w){y.__proto__=w}||function(y,w){for(var b in w)Object.prototype.hasOwnProperty.call(w,b)&&(y[b]=w[b])},n(d,v)},function(d,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function y(){this.constructor=d}n(d,v),d.prototype=v===null?Object.create(v):(y.prototype=v.prototype,new y)}),a=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0});var o=a(t(9125)),s=a(t(4325)),u=a(t(7021)),l=t(9014),c=a(t(3321)),f=t(9305).internal.constants.BOLT_PROTOCOL_V5_4,h=function(d){function v(){return d!==null&&d.apply(this,arguments)||this}return i(v,d),Object.defineProperty(v.prototype,"version",{get:function(){return f},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"transformer",{get:function(){var y=this;return this._transformer===void 0&&(this._transformer=new c.default(Object.values(s.default).map(function(w){return w(y._config,y._log)}))),this._transformer},enumerable:!1,configurable:!0}),v.prototype.telemetry=function(y,w){var b=y.api,p=w===void 0?{}:w,m=p.onError,x=p.onCompleted,T=new l.TelemetryObserver({onCompleted:x,onError:m});return this.write(u.default.telemetry({api:b}),T,!1),T},v}(o.default);e.default=h},4325:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(o){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(o[c]=s[c]);return o},n.apply(this,arguments)},i=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(t(2204));e.default=n({},a.default)},5815:function(r,e,t){var n,i=this&&this.__extends||(n=function(b,p){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,x){m.__proto__=x}||function(m,x){for(var T in x)Object.prototype.hasOwnProperty.call(x,T)&&(m[T]=x[T])},n(b,p)},function(b,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");function m(){this.constructor=b}n(b,p),b.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}),a=this&&this.__assign||function(){return a=Object.assign||function(b){for(var p,m=1,x=arguments.length;m<x;m++)for(var T in p=arguments[m])Object.prototype.hasOwnProperty.call(p,T)&&(b[T]=p[T]);return b},a.apply(this,arguments)},o=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(e,"__esModule",{value:!0});var s=o(t(9744)),u=o(t(9238)),l=o(t(3321)),c=o(t(7021)),f=t(9014),h=t(9305).internal.constants,d=h.BOLT_PROTOCOL_V5_5,v=h.FETCH_ALL,y=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),w=function(b){function p(){return b!==null&&b.apply(this,arguments)||this}return i(p,b),Object.defineProperty(p.prototype,"version",{get:function(){return d},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"transformer",{get:function(){var m=this;return this._transformer===void 0&&(this._transformer=new l.default(Object.values(u.default).map(function(x){return x(m._config,m._log)}))),this._transformer},enumerable:!1,configurable:!0}),p.prototype.initialize=function(m){var x=this,T=m===void 0?{}:m,P=T.userAgent,C=T.boltAgent,R=T.authToken,D=T.notificationFilter,N=T.onError,j=T.onComplete,B={},z=new f.LoginObserver({onError:function(W){return x._onLoginError(W,N)},onCompleted:function(W){return B.metadata=W,x._onLoginCompleted(W)}});return this.write(c.default.hello5x5(P,C,D,this._serversideRouting),z,!1),this.logon({authToken:R,onComplete:function(W){return j(a(a({},W),B.metadata))},onError:N,flush:!0})},p.prototype.beginTransaction=function(m){var x=m===void 0?{}:m,T=x.bookmarks,P=x.txConfig,C=x.database,R=x.mode,D=x.impersonatedUser,N=x.notificationFilter,j=x.beforeError,B=x.afterError,z=x.beforeComplete,W=x.afterComplete,Z=new f.ResultStreamObserver({server:this._server,beforeError:j,afterError:B,beforeComplete:z,afterComplete:W});return Z.prepareToHandleSingleResponse(),this.write(c.default.begin5x5({bookmarks:T,txConfig:P,database:C,mode:R,impersonatedUser:D,notificationFilter:N}),Z,!0),Z},p.prototype.run=function(m,x,T){var P=T===void 0?{}:T,C=P.bookmarks,R=P.txConfig,D=P.database,N=P.mode,j=P.impersonatedUser,B=P.notificationFilter,z=P.beforeKeys,W=P.afterKeys,Z=P.beforeError,Q=P.afterError,re=P.beforeComplete,ee=P.afterComplete,ue=P.flush,de=ue===void 0||ue,se=P.reactive,me=se!==void 0&&se,Me=P.fetchSize,he=Me===void 0?v:Me,fe=P.highRecordWatermark,Ee=fe===void 0?Number.MAX_VALUE:fe,Ce=P.lowRecordWatermark,ke=Ce===void 0?Number.MAX_VALUE:Ce,Re=new f.ResultStreamObserver({server:this._server,reactive:me,fetchSize:he,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:z,afterKeys:W,beforeError:Z,afterError:Q,beforeComplete:re,afterComplete:ee,highRecordWatermark:Ee,lowRecordWatermark:ke,enrichMetadata:this._enrichMetadata}),ve=me;return this.write(c.default.runWithMetadata5x5(m,x,{bookmarks:C,txConfig:R,database:D,mode:N,impersonatedUser:j,notificationFilter:B}),Re,ve&&de),me||this.write(c.default.pull({n:he}),Re,de),Re},p.prototype._enrichMetadata=function(m){return Array.isArray(m.statuses)&&(m.statuses=m.statuses.map(function(x){return a(a({},x),{description:x.neo4j_code!=null?x.status_description:x.description,diagnostic_record:x.diagnostic_record!==null?a(a({},y),x.diagnostic_record):null})})),m},p}(s.default);e.default=w},9238:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(o){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(o[c]=s[c]);return o},n.apply(this,arguments)},i=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(t(4325));e.default=n({},a.default)},6890:function(r,e,t){var n,i=this&&this.__extends||(n=function(d,v){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,w){y.__proto__=w}||function(y,w){for(var b in w)Object.prototype.hasOwnProperty.call(w,b)&&(y[b]=w[b])},n(d,v)},function(d,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function y(){this.constructor=d}n(d,v),d.prototype=v===null?Object.create(v):(y.prototype=v.prototype,new y)}),a=this&&this.__assign||function(){return a=Object.assign||function(d){for(var v,y=1,w=arguments.length;y<w;y++)for(var b in v=arguments[y])Object.prototype.hasOwnProperty.call(v,b)&&(d[b]=v[b]);return d},a.apply(this,arguments)},o=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0});var s=o(t(5815)),u=o(t(9238)),l=o(t(3321)),c=t(9305).internal.constants.BOLT_PROTOCOL_V5_6,f=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),h=function(d){function v(){return d!==null&&d.apply(this,arguments)||this}return i(v,d),Object.defineProperty(v.prototype,"version",{get:function(){return c},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"transformer",{get:function(){var y=this;return this._transformer===void 0&&(this._transformer=new l.default(Object.values(u.default).map(function(w){return w(y._config,y._log)}))),this._transformer},enumerable:!1,configurable:!0}),v.prototype._enrichMetadata=function(y){return Array.isArray(y.statuses)&&(y.statuses=y.statuses.map(function(w){return a(a({},w),{diagnostic_record:w.diagnostic_record!==null?a(a({},f),w.diagnostic_record):null})})),y},v}(s.default);e.default=h},6377:function(r,e,t){var n,i=this&&this.__extends||(n=function(d,v){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,w){y.__proto__=w}||function(y,w){for(var b in w)Object.prototype.hasOwnProperty.call(w,b)&&(y[b]=w[b])},n(d,v)},function(d,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function y(){this.constructor=d}n(d,v),d.prototype=v===null?Object.create(v):(y.prototype=v.prototype,new y)}),a=this&&this.__assign||function(){return a=Object.assign||function(d){for(var v,y=1,w=arguments.length;y<w;y++)for(var b in v=arguments[y])Object.prototype.hasOwnProperty.call(v,b)&&(d[b]=v[b]);return d},a.apply(this,arguments)},o=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0});var s=o(t(6890)),u=o(t(9238)),l=o(t(3321)),c=t(9305).internal.constants.BOLT_PROTOCOL_V5_7,f=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),h=function(d){function v(){return d!==null&&d.apply(this,arguments)||this}return i(v,d),Object.defineProperty(v.prototype,"version",{get:function(){return c},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"transformer",{get:function(){var y=this;return this._transformer===void 0&&(this._transformer=new l.default(Object.values(u.default).map(function(w){return w(y._config,y._log)}))),this._transformer},enumerable:!1,configurable:!0}),v.prototype.enrichErrorMetadata=function(y){return a(a({},y),{cause:y.cause!==null&&y.cause!==void 0?this.enrichErrorMetadata(y.cause):null,code:y.neo4j_code,diagnostic_record:y.diagnostic_record!==null?a(a({},f),y.diagnostic_record):null})},v}(s.default);e.default=h},6544:function(r,e,t){var n=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(e,"__esModule",{value:!0});var i=t(9305),a=n(t(8320)),o=n(t(2857)),s=n(t(5642)),u=n(t(2539)),l=n(t(4596)),c=n(t(6445)),f=n(t(9054)),h=n(t(1711)),d=n(t(844)),v=n(t(6345)),y=n(t(934)),w=n(t(9125)),b=n(t(9744)),p=n(t(5815)),m=n(t(6890)),x=n(t(6377)),T=(t(7452),n(t(2578)));e.default=function(P){var C=P===void 0?{}:P,R=C.version,D=C.chunker,N=C.dechunker,j=C.channel,B=C.disableLosslessIntegers,z=C.useBigInt,W=C.serversideRouting,Z=C.server,Q=C.log,re=C.observer;return function(ee,ue,de,se,me,Me,he,fe){switch(ee){case 1:return new a.default(ue,de,se,Me,fe,he);case 2:return new o.default(ue,de,se,Me,fe,he);case 3:return new s.default(ue,de,se,Me,fe,he);case 4:return new u.default(ue,de,se,Me,fe,he);case 4.1:return new l.default(ue,de,se,Me,fe,he,me);case 4.2:return new c.default(ue,de,se,Me,fe,he,me);case 4.3:return new f.default(ue,de,se,Me,fe,he,me);case 4.4:return new h.default(ue,de,se,Me,fe,he,me);case 5:return new d.default(ue,de,se,Me,fe,he,me);case 5.1:return new v.default(ue,de,se,Me,fe,he,me);case 5.2:return new y.default(ue,de,se,Me,fe,he,me);case 5.3:return new w.default(ue,de,se,Me,fe,he,me);case 5.4:return new b.default(ue,de,se,Me,fe,he,me);case 5.5:return new p.default(ue,de,se,Me,fe,he,me);case 5.6:return new m.default(ue,de,se,Me,fe,he,me);case 5.7:return new x.default(ue,de,se,Me,fe,he,me);default:throw(0,i.newError)("Unknown Bolt protocol version: "+ee)}}(R,Z,D,{disableLosslessIntegers:B,useBigInt:z},W,function(ee){var ue=new T.default({transformMetadata:ee.transformMetadata.bind(ee),enrichErrorMetadata:ee.enrichErrorMetadata.bind(ee),log:Q,observer:re});return j.onerror=re.onError.bind(re),j.onmessage=function(de){return N.write(de)},N.onmessage=function(de){try{ue.handleResponse(ee.unpack(de))}catch(se){return re.onError(se)}},ue},re.onProtocolError.bind(re),Q)}},8731:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=t(7452),i=t(9305);function a(o,s){return{major:o,minor:s}}e.default=function(o,s){var u=this;return new Promise(function(l,c){var f=function(h){c(h)};o.onerror=f.bind(u),o._error&&f(o._error),o.onmessage=function(h){try{var d=function(v,y){var w=[v.readUInt8(),v.readUInt8(),v.readUInt8(),v.readUInt8()];if(w[0]===72&&w[1]===84&&w[2]===84&&w[3]===80)throw y.error("Handshake failed since server responded with HTTP."),(0,i.newError)("Server responded HTTP. Make sure you are not trying to connect to the http endpoint (HTTP defaults to port 7474 whereas BOLT defaults to port 7687)");return+(w[3]+"."+w[2])}(h,s);l({protocolVersion:d,consumeRemainingBuffer:function(v){h.hasRemaining()&&v(h.readSlice(h.remaining()))}})}catch(v){c(v)}},o.write(function(h){if(h.length>4)throw(0,i.newError)("It should not have more than 4 versions of the protocol");var d=(0,n.alloc)(20);return d.writeInt32(1616949271),h.forEach(function(v){if(v instanceof Array){var y=v[0],w=y.major,b=(p=y.minor)-v[1].minor;d.writeInt32(b<<16|p<<8|w)}else{w=v.major;var p=v.minor;d.writeInt32(p<<8|w)}}),d.reset(),d}([[a(5,7),a(5,0)],[a(4,4),a(4,2)],a(4,1),a(3,0)]))})}},7666:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(c,f,h,d){d===void 0&&(d=h);var v=Object.getOwnPropertyDescriptor(f,h);v&&!("get"in v?!f.__esModule:v.writable||v.configurable)||(v={enumerable:!0,get:function(){return f[h]}}),Object.defineProperty(c,d,v)}:function(c,f,h,d){d===void 0&&(d=h),c[d]=f[h]}),i=this&&this.__exportStar||function(c,f){for(var h in c)h==="default"||Object.prototype.hasOwnProperty.call(f,h)||n(f,c,h)},a=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0}),e.RawRoutingTable=e.BoltProtocol=void 0;var o=a(t(8731)),s=a(t(6544)),u=a(t(9054)),l=a(t(7790));i(t(9014),e),e.BoltProtocol=u.default,e.RawRoutingTable=l.default,e.default={handshake:o.default,create:s.default}},7021:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SIGNATURES=void 0;var n=t(9305),i=n.internal.constants,a=i.ACCESS_MODE_READ,o=i.FETCH_ALL,s=n.internal.util.assertString,u=Object.freeze({INIT:1,RESET:15,RUN:16,PULL_ALL:63,HELLO:1,GOODBYE:2,BEGIN:17,COMMIT:18,ROLLBACK:19,TELEMETRY:84,ROUTE:102,LOGON:106,LOGOFF:107,DISCARD:47,PULL:63});e.SIGNATURES=u;var l=function(){function m(x,T,P){this.signature=x,this.fields=T,this.toString=P}return m.init=function(x,T){return new m(1,[x,T],function(){return"INIT ".concat(x," {...}")})},m.run=function(x,T){return new m(16,[x,T],function(){return"RUN ".concat(x," ").concat(n.json.stringify(T))})},m.pullAll=function(){return v},m.reset=function(){return y},m.hello=function(x,T,P,C){P===void 0&&(P=null),C===void 0&&(C=null);var R=Object.assign({user_agent:x},T);return P&&(R.routing=P),C&&(R.patch_bolt=C),new m(1,[R],function(){return"HELLO {user_agent: '".concat(x,"', ...}")})},m.hello5x1=function(x,T){T===void 0&&(T=null);var P={user_agent:x};return T&&(P.routing=T),new m(1,[P],function(){return"HELLO {user_agent: '".concat(x,"', ...}")})},m.hello5x2=function(x,T,P){T===void 0&&(T=null),P===void 0&&(P=null);var C={user_agent:x};return h(C,T),P&&(C.routing=P),new m(1,[C],function(){return"HELLO ".concat(n.json.stringify(C))})},m.hello5x3=function(x,T,P,C){P===void 0&&(P=null),C===void 0&&(C=null);var R={};return x&&(R.user_agent=x),T&&(R.bolt_agent={product:T.product,platform:T.platform,language:T.language,language_details:T.languageDetails}),h(R,P),C&&(R.routing=C),new m(1,[R],function(){return"HELLO ".concat(n.json.stringify(R))})},m.hello5x5=function(x,T,P,C){P===void 0&&(P=null),C===void 0&&(C=null);var R={};return x&&(R.user_agent=x),T&&(R.bolt_agent={product:T.product,platform:T.platform,language:T.language,language_details:T.languageDetails}),d(R,P),C&&(R.routing=C),new m(1,[R],function(){return"HELLO ".concat(n.json.stringify(R))})},m.logon=function(x){return new m(106,[x],function(){return"LOGON { ... }"})},m.logoff=function(){return new m(107,[],function(){return"LOGOFF"})},m.begin=function(x){var T=x===void 0?{}:x,P=c(T.bookmarks,T.txConfig,T.database,T.mode,T.impersonatedUser,T.notificationFilter);return new m(17,[P],function(){return"BEGIN ".concat(n.json.stringify(P))})},m.begin5x5=function(x){var T=x===void 0?{}:x,P=c(T.bookmarks,T.txConfig,T.database,T.mode,T.impersonatedUser,T.notificationFilter,{appendNotificationFilter:d});return new m(17,[P],function(){return"BEGIN ".concat(n.json.stringify(P))})},m.commit=function(){return w},m.rollback=function(){return b},m.runWithMetadata=function(x,T,P){var C=P===void 0?{}:P,R=c(C.bookmarks,C.txConfig,C.database,C.mode,C.impersonatedUser,C.notificationFilter);return new m(16,[x,T,R],function(){return"RUN ".concat(x," ").concat(n.json.stringify(T)," ").concat(n.json.stringify(R))})},m.runWithMetadata5x5=function(x,T,P){var C=P===void 0?{}:P,R=c(C.bookmarks,C.txConfig,C.database,C.mode,C.impersonatedUser,C.notificationFilter,{appendNotificationFilter:d});return new m(16,[x,T,R],function(){return"RUN ".concat(x," ").concat(n.json.stringify(T)," ").concat(n.json.stringify(R))})},m.goodbye=function(){return p},m.pull=function(x){var T=x===void 0?{}:x,P=T.stmtId,C=P===void 0?-1:P,R=T.n,D=f(C??-1,(R===void 0?o:R)||o);return new m(63,[D],function(){return"PULL ".concat(n.json.stringify(D))})},m.discard=function(x){var T=x===void 0?{}:x,P=T.stmtId,C=P===void 0?-1:P,R=T.n,D=f(C??-1,(R===void 0?o:R)||o);return new m(47,[D],function(){return"DISCARD ".concat(n.json.stringify(D))})},m.telemetry=function(x){var T=x.api,P=(0,n.int)(T);return new m(84,[P],function(){return"TELEMETRY ".concat(P.toString())})},m.route=function(x,T,P){return x===void 0&&(x={}),T===void 0&&(T=[]),P===void 0&&(P=null),new m(102,[x,T,P],function(){return"ROUTE ".concat(n.json.stringify(x)," ").concat(n.json.stringify(T)," ").concat(P)})},m.routeV4x4=function(x,T,P){x===void 0&&(x={}),T===void 0&&(T=[]),P===void 0&&(P={});var C={};return P.databaseName&&(C.db=P.databaseName),P.impersonatedUser&&(C.imp_user=P.impersonatedUser),new m(102,[x,T,C],function(){return"ROUTE ".concat(n.json.stringify(x)," ").concat(n.json.stringify(T)," ").concat(n.json.stringify(C))})},m}();function c(m,x,T,P,C,R,D){var N;D===void 0&&(D={});var j={};return m.isEmpty()||(j.bookmarks=m.values()),x.timeout!==null&&(j.tx_timeout=x.timeout),x.metadata&&(j.tx_metadata=x.metadata),T&&(j.db=s(T,"database")),C&&(j.imp_user=s(C,"impersonatedUser")),P===a&&(j.mode="r"),((N=D.appendNotificationFilter)!==null&&N!==void 0?N:h)(j,R),j}function f(m,x){var T={n:(0,n.int)(x)};return m!==-1&&(T.qid=(0,n.int)(m)),T}function h(m,x){x&&(x.minimumSeverityLevel&&(m.notifications_minimum_severity=x.minimumSeverityLevel),x.disabledCategories&&(m.notifications_disabled_categories=x.disabledCategories),x.disabledClassifications&&(m.notifications_disabled_categories=x.disabledClassifications))}function d(m,x){x&&(x.minimumSeverityLevel&&(m.notifications_minimum_severity=x.minimumSeverityLevel),x.disabledCategories&&(m.notifications_disabled_classifications=x.disabledCategories),x.disabledClassifications&&(m.notifications_disabled_classifications=x.disabledClassifications))}e.default=l;var v=new l(63,[],function(){return"PULL_ALL"}),y=new l(15,[],function(){return"RESET"}),w=new l(18,[],function(){return"COMMIT"}),b=new l(19,[],function(){return"ROLLBACK"}),p=new l(2,[],function(){return"GOODBYE"})},2578:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=t(9305);function i(){}function a(u){return u}var o={onNext:i,onCompleted:i,onError:i},s=function(){function u(l){var c=l===void 0?{}:l,f=c.transformMetadata,h=c.enrichErrorMetadata,d=c.log,v=c.observer;this._pendingObservers=[],this._log=d,this._transformMetadata=f||a,this._enrichErrorMetadata=h||a,this._observer=Object.assign({onObserversCountChange:i,onError:i,onFailure:i,onErrorApplyTransformation:a},v)}return Object.defineProperty(u.prototype,"currentFailure",{get:function(){return this._currentFailure},enumerable:!1,configurable:!0}),u.prototype.handleResponse=function(l){var c=l.fields[0];switch(l.signature){case 113:this._log.isDebugEnabled()&&this._log.debug("S: RECORD ".concat(n.json.stringify(l))),this._currentObserver.onNext(c);break;case 112:this._log.isDebugEnabled()&&this._log.debug("S: SUCCESS ".concat(n.json.stringify(l)));try{var f=this._transformMetadata(c);this._currentObserver.onCompleted(f)}finally{this._updateCurrentObserver()}break;case 127:this._log.isDebugEnabled()&&this._log.debug("S: FAILURE ".concat(n.json.stringify(l)));try{this._currentFailure=this._handleErrorPayload(this._enrichErrorMetadata(c)),this._currentObserver.onError(this._currentFailure)}finally{this._updateCurrentObserver(),this._observer.onFailure(this._currentFailure)}break;case 126:this._log.isDebugEnabled()&&this._log.debug("S: IGNORED ".concat(n.json.stringify(l)));try{this._currentFailure&&this._currentObserver.onError?this._currentObserver.onError(this._currentFailure):this._currentObserver.onError&&this._currentObserver.onError((0,n.newError)("Ignored either because of an error or RESET"))}finally{this._updateCurrentObserver()}break;default:this._observer.onError((0,n.newError)("Unknown Bolt protocol message: "+l))}},u.prototype._updateCurrentObserver=function(){this._currentObserver=this._pendingObservers.shift(),this._observer.onObserversCountChange(this._observersCount)},Object.defineProperty(u.prototype,"_observersCount",{get:function(){return this._currentObserver==null?this._pendingObservers.length:this._pendingObservers.length+1},enumerable:!1,configurable:!0}),u.prototype._queueObserver=function(l){return(l=l||o).onCompleted=l.onCompleted||i,l.onError=l.onError||i,l.onNext=l.onNext||i,this._currentObserver===void 0?this._currentObserver=l:this._pendingObservers.push(l),this._observer.onObserversCountChange(this._observersCount),!0},u.prototype._notifyErrorToObservers=function(l){for(this._currentObserver&&this._currentObserver.onError&&this._currentObserver.onError(l);this._pendingObservers.length>0;){var c=this._pendingObservers.shift();c&&c.onError&&c.onError(l)}},u.prototype.hasOngoingObservableRequests=function(){return this._currentObserver!=null||this._pendingObservers.length>0},u.prototype._resetFailure=function(){this._currentFailure=null},u.prototype._handleErrorPayload=function(l){var c,f=(c=l.code)==="Neo.TransientError.Transaction.Terminated"?"Neo.ClientError.Transaction.Terminated":c==="Neo.TransientError.Transaction.LockClientStopped"?"Neo.ClientError.Transaction.LockClientStopped":c,h=l.cause!=null?this._handleErrorCause(l.cause):void 0,d=(0,n.newError)(l.message,f,h,l.gql_status,l.description,l.diagnostic_record);return this._observer.onErrorApplyTransformation(d)},u.prototype._handleErrorCause=function(l){var c=l.cause!=null?this._handleErrorCause(l.cause):void 0,f=(0,n.newGQLError)(l.message,c,l.gql_status,l.description,l.diagnostic_record);return this._observer.onErrorApplyTransformation(f)},u}();e.default=s},7790:function(r,e,t){var n,i=this&&this.__extends||(n=function(c,f){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var v in d)Object.prototype.hasOwnProperty.call(d,v)&&(h[v]=d[v])},n(c,f)},function(c,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function h(){this.constructor=c}n(c,f),c.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)}),a=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0}),a(t(9305));var o=function(){function c(){}return c.ofRecord=function(f){return f===null?c.ofNull():new l(f)},c.ofMessageResponse=function(f){return f===null?c.ofNull():new s(f)},c.ofNull=function(){return new u},Object.defineProperty(c.prototype,"ttl",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"db",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"servers",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"isNull",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),c}();e.default=o;var s=function(c){function f(h){var d=c.call(this)||this;return d._response=h,d}return i(f,c),Object.defineProperty(f.prototype,"ttl",{get:function(){return this._response.rt.ttl},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"servers",{get:function(){return this._response.rt.servers},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"db",{get:function(){return this._response.rt.db},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"isNull",{get:function(){return this._response===null},enumerable:!1,configurable:!0}),f}(o),u=function(c){function f(){return c!==null&&c.apply(this,arguments)||this}return i(f,c),Object.defineProperty(f.prototype,"isNull",{get:function(){return!0},enumerable:!1,configurable:!0}),f}(o),l=function(c){function f(h){var d=c.call(this)||this;return d._record=h,d}return i(f,c),Object.defineProperty(f.prototype,"ttl",{get:function(){return this._record.get("ttl")},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"servers",{get:function(){return this._record.get("servers")},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"db",{get:function(){return this._record.has("db")?this._record.get("db"):null},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"isNull",{get:function(){return this._record===null},enumerable:!1,configurable:!0}),f}(o)},9014:function(r,e,t){var n,i=this&&this.__extends||(n=function(P,C){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,D){R.__proto__=D}||function(R,D){for(var N in D)Object.prototype.hasOwnProperty.call(D,N)&&(R[N]=D[N])},n(P,C)},function(P,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function R(){this.constructor=P}n(P,C),P.prototype=C===null?Object.create(C):(R.prototype=C.prototype,new R)}),a=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetryObserver=e.ProcedureRouteObserver=e.RouteObserver=e.CompletedObserver=e.FailedObserver=e.ResetObserver=e.LogoffObserver=e.LoginObserver=e.ResultStreamObserver=e.StreamObserver=void 0;var o=t(9305),s=a(t(7790)),u=t(6781),l=o.internal.constants.FETCH_ALL,c=o.error.PROTOCOL_ERROR,f=function(){function P(){}return P.prototype.onNext=function(C){},P.prototype.onError=function(C){},P.prototype.onCompleted=function(C){},P}();e.StreamObserver=f;var h=function(P){function C(R){var D=R===void 0?{}:R,N=D.reactive,j=N!==void 0&&N,B=D.moreFunction,z=D.discardFunction,W=D.fetchSize,Z=W===void 0?l:W,Q=D.beforeError,re=D.afterError,ee=D.beforeKeys,ue=D.afterKeys,de=D.beforeComplete,se=D.afterComplete,me=D.server,Me=D.highRecordWatermark,he=Me===void 0?Number.MAX_VALUE:Me,fe=D.lowRecordWatermark,Ee=fe===void 0?Number.MAX_VALUE:fe,Ce=D.enrichMetadata,ke=P.call(this)||this;return ke._fieldKeys=null,ke._fieldLookup=null,ke._head=null,ke._queuedRecords=[],ke._tail=null,ke._error=null,ke._observers=[],ke._meta={},ke._server=me,ke._beforeError=Q,ke._afterError=re,ke._beforeKeys=ee,ke._afterKeys=ue,ke._beforeComplete=de,ke._afterComplete=se,ke._enrichMetadata=Ce||u.functional.identity,ke._queryId=null,ke._moreFunction=B,ke._discardFunction=z,ke._discard=!1,ke._fetchSize=Z,ke._lowRecordWatermark=Ee,ke._highRecordWatermark=he,ke._setState(j?T.READY:T.READY_STREAMING),ke._setupAutoPull(),ke._paused=!1,ke._pulled=!j,ke._haveRecordStreamed=!1,ke}return i(C,P),C.prototype.pause=function(){this._paused=!0},C.prototype.resume=function(){this._paused=!1,this._setupAutoPull(!0),this._state.pull(this)},C.prototype.onNext=function(R){this._haveRecordStreamed=!0;var D=new o.Record(this._fieldKeys,R,this._fieldLookup);this._observers.some(function(N){return N.onNext})?this._observers.forEach(function(N){N.onNext&&N.onNext(D)}):(this._queuedRecords.push(D),this._queuedRecords.length>this._highRecordWatermark&&(this._autoPull=!1))},C.prototype.onCompleted=function(R){this._state.onSuccess(this,R)},C.prototype.onError=function(R){this._state.onError(this,R)},C.prototype.cancel=function(){this._discard=!0},C.prototype.prepareToHandleSingleResponse=function(){this._head=[],this._fieldKeys=[],this._setState(T.STREAMING)},C.prototype.markCompleted=function(){this._head=[],this._fieldKeys=[],this._tail={},this._setState(T.SUCCEEDED)},C.prototype.subscribe=function(R){if(this._head&&R.onKeys&&R.onKeys(this._head),this._queuedRecords.length>0&&R.onNext)for(var D=0;D<this._queuedRecords.length;D++)R.onNext(this._queuedRecords[D]),this._queuedRecords.length-D-1<=this._lowRecordWatermark&&(this._autoPull=!0,this._state===T.READY&&this._handleStreaming());this._tail&&R.onCompleted&&R.onCompleted(this._tail),this._error&&R.onError(this._error),this._observers.push(R),this._state===T.READY&&this._handleStreaming()},C.prototype._handleHasMore=function(R){this._setState(T.READY),this._handleStreaming(),delete R.has_more},C.prototype._handlePullSuccess=function(R){var D=this,N=this._enrichMetadata(Object.assign(this._server?{server:this._server}:{},this._meta,{stream_summary:{have_records_streamed:this._haveRecordStreamed,pulled:this._pulled,has_keys:this._fieldKeys.length>0}},R));if([void 0,null,"r","w","rw","s"].includes(N.type)){this._setState(T.SUCCEEDED);var j=null;this._beforeComplete&&(j=this._beforeComplete(N));var B=function(){D._tail=N,D._observers.some(function(z){return z.onCompleted})&&D._observers.forEach(function(z){z.onCompleted&&z.onCompleted(N)}),D._afterComplete&&D._afterComplete(N)};j?Promise.resolve(j).then(function(){return B()}):B()}else this.onError((0,o.newError)(`Server returned invalid query type. Expected one of [undefined, null, "r", "w", "rw", "s"] but got '`.concat(N.type,"'"),c))},C.prototype._handleRunSuccess=function(R,D){var N=this;if(this._fieldKeys===null){if(this._fieldKeys=[],this._fieldLookup={},R.fields&&R.fields.length>0){this._fieldKeys=R.fields;for(var j=0;j<R.fields.length;j++)this._fieldLookup[R.fields[j]]=j}R.fields!=null&&delete R.fields,R.qid!==null&&R.qid!==void 0&&(this._queryId=R.qid,delete R.qid),this._storeMetadataForCompletion(R);var B=null;this._beforeKeys&&(B=this._beforeKeys(this._fieldKeys));var z=function(){N._head=N._fieldKeys,N._observers.some(function(W){return W.onKeys})&&N._observers.forEach(function(W){W.onKeys&&W.onKeys(N._fieldKeys)}),N._afterKeys&&N._afterKeys(N._fieldKeys),D()};B?Promise.resolve(B).then(function(){return z()}):z()}},C.prototype._handleError=function(R){var D=this;this._setState(T.FAILED),this._error=R;var N=null;this._beforeError&&(N=this._beforeError(R));var j=function(){D._observers.some(function(B){return B.onError})&&D._observers.forEach(function(B){B.onError&&B.onError(R)}),D._afterError&&D._afterError(R)};N?Promise.resolve(N).then(function(){return j()}):j()},C.prototype._handleStreaming=function(){this._head&&this._observers.some(function(R){return R.onNext||R.onCompleted})&&(this._paused||!this._discard&&!this._autoPull||this._more())},C.prototype._more=function(){this._discard?this._discardFunction(this._queryId,this):(this._pulled=!0,this._moreFunction(this._queryId,this._fetchSize,this)),this._setState(T.STREAMING)},C.prototype._storeMetadataForCompletion=function(R){for(var D=Object.keys(R),N=D.length,j="";N--;)j=D[N],this._meta[j]=R[j]},C.prototype._setState=function(R){this._state=R},C.prototype._setupAutoPull=function(){this._autoPull=!0},C}(f);e.ResultStreamObserver=h;var d=function(P){function C(R){var D=R===void 0?{}:R,N=D.onError,j=D.onCompleted,B=P.call(this)||this;return B._onError=N,B._onCompleted=j,B}return i(C,P),C.prototype.onNext=function(R){this.onError((0,o.newError)("Received RECORD when initializing "+o.json.stringify(R)))},C.prototype.onError=function(R){this._onError&&this._onError(R)},C.prototype.onCompleted=function(R){this._onCompleted&&this._onCompleted(R)},C}(f);e.LoginObserver=d;var v=function(P){function C(R){var D=R===void 0?{}:R,N=D.onError,j=D.onCompleted,B=P.call(this)||this;return B._onError=N,B._onCompleted=j,B}return i(C,P),C.prototype.onNext=function(R){this.onError((0,o.newError)("Received RECORD when logging off "+o.json.stringify(R)))},C.prototype.onError=function(R){this._onError&&this._onError(R)},C.prototype.onCompleted=function(R){this._onCompleted&&this._onCompleted(R)},C}(f);e.LogoffObserver=v;var y=function(P){function C(R){var D=R===void 0?{}:R,N=D.onProtocolError,j=D.onError,B=D.onComplete,z=P.call(this)||this;return z._onProtocolError=N,z._onError=j,z._onComplete=B,z}return i(C,P),C.prototype.onNext=function(R){this.onError((0,o.newError)("Received RECORD when resetting: received record is: "+o.json.stringify(R),c))},C.prototype.onError=function(R){R.code===c&&this._onProtocolError&&this._onProtocolError(R.message),this._onError&&this._onError(R)},C.prototype.onCompleted=function(R){this._onComplete&&this._onComplete(R)},C}(f);e.ResetObserver=y;var w=function(P){function C(R){var D=R===void 0?{}:R,N=D.onError,j=D.onCompleted,B=P.call(this)||this;return B._onError=N,B._onCompleted=j,B}return i(C,P),C.prototype.onNext=function(R){this.onError((0,o.newError)("Received RECORD when sending telemetry "+o.json.stringify(R),c))},C.prototype.onError=function(R){this._onError&&this._onError(R)},C.prototype.onCompleted=function(R){this._onCompleted&&this._onCompleted(R)},C}(h);e.TelemetryObserver=w;var b=function(P){function C(R){var D=R.error,N=R.onError,j=P.call(this,{beforeError:N})||this;return j.onError(D),j}return i(C,P),C}(h);e.FailedObserver=b;var p=function(P){function C(){var R=P.call(this)||this;return P.prototype.markCompleted.call(R),R}return i(C,P),C}(h);e.CompletedObserver=p;var m=function(P){function C(R){var D=R.resultObserver,N=R.onProtocolError,j=R.onError,B=R.onCompleted,z=P.call(this)||this;return z._resultObserver=D,z._onError=j,z._onCompleted=B,z._records=[],z._onProtocolError=N,D.subscribe(z),z}return i(C,P),C.prototype.onNext=function(R){this._records.push(R)},C.prototype.onError=function(R){R.code===c&&this._onProtocolError&&this._onProtocolError(R.message),this._onError&&this._onError(R)},C.prototype.onCompleted=function(){this._records===null||this._records.length===1?this._onCompleted&&this._onCompleted(s.default.ofRecord(this._records[0])):this.onError((0,o.newError)("Illegal response from router. Received "+this._records.length+` records but expected only one.
`+o.json.stringify(this._records),c))},C}(f);e.ProcedureRouteObserver=m;var x=function(P){function C(R){var D=R===void 0?{}:R,N=D.onProtocolError,j=D.onError,B=D.onCompleted,z=P.call(this)||this;return z._onProtocolError=N,z._onError=j,z._onCompleted=B,z}return i(C,P),C.prototype.onNext=function(R){this.onError((0,o.newError)("Received RECORD when resetting: received record is: "+o.json.stringify(R),c))},C.prototype.onError=function(R){R.code===c&&this._onProtocolError&&this._onProtocolError(R.message),this._onError&&this._onError(R)},C.prototype.onCompleted=function(R){this._onCompleted&&this._onCompleted(s.default.ofMessageResponse(R))},C}(f);e.RouteObserver=x;var T={READY_STREAMING:{onSuccess:function(P,C){P._handleRunSuccess(C,function(){P._setState(T.STREAMING)})},onError:function(P,C){P._handleError(C)},name:function(){return"READY_STREAMING"},pull:function(){}},READY:{onSuccess:function(P,C){P._handleRunSuccess(C,function(){return P._handleStreaming()})},onError:function(P,C){P._handleError(C)},name:function(){return"READY"},pull:function(P){return P._more()}},STREAMING:{onSuccess:function(P,C){C.has_more?P._handleHasMore(C):P._handlePullSuccess(C)},onError:function(P,C){P._handleError(C)},name:function(){return"STREAMING"},pull:function(){}},FAILED:{onError:function(P){},name:function(){return"FAILED"},pull:function(){}},SUCCEEDED:{name:function(){return"SUCCEEDED"},pull:function(){}}}},5973:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.epochSecondAndNanoToLocalDateTime=e.nanoOfDayToLocalTime=e.epochDayToDate=void 0;var n=t(9305),i=n.internal.temporalUtil,a=i.DAYS_0000_TO_1970,o=i.DAYS_PER_400_YEAR_CYCLE,s=i.NANOS_PER_HOUR,u=i.NANOS_PER_MINUTE,l=i.NANOS_PER_SECOND,c=i.SECONDS_PER_DAY,f=i.floorDiv,h=i.floorMod;function d(y){var w=(y=(0,n.int)(y)).add(a).subtract(60),b=(0,n.int)(0);if(w.lessThan(0)){var p=w.add(1).div(o).subtract(1);b=p.multiply(400),w=w.add(p.multiply(-o))}var m=w.multiply(400).add(591).div(o),x=w.subtract(m.multiply(365).add(m.div(4)).subtract(m.div(100)).add(m.div(400)));x.lessThan(0)&&(m=m.subtract(1),x=w.subtract(m.multiply(365).add(m.div(4)).subtract(m.div(100)).add(m.div(400)))),m=m.add(b);var T=x,P=T.multiply(5).add(2).div(153),C=P.add(2).modulo(12).add(1),R=T.subtract(P.multiply(306).add(5).div(10)).add(1);return m=m.add(P.div(10)),new n.Date(m,C,R)}function v(y){var w=(y=(0,n.int)(y)).div(s),b=(y=y.subtract(w.multiply(s))).div(u),p=(y=y.subtract(b.multiply(u))).div(l),m=y.subtract(p.multiply(l));return new n.LocalTime(w,b,p,m)}e.epochDayToDate=d,e.nanoOfDayToLocalTime=v,e.epochSecondAndNanoToLocalDateTime=function(y,w){var b=f(y,c),p=h(y,c).multiply(l).add(w),m=d(b),x=v(p);return new n.LocalDateTime(m.year,m.month,m.day,x.hour,x.minute,x.second,x.nanosecond)}},3321:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TypeTransformer=void 0;var n=t(7168),i=t(9305).internal.objectUtil,a=function(){function s(u){this._transformers=u,this._transformersPerSignature=new Map(u.map(function(l){return[l.signature,l]})),this.fromStructure=this.fromStructure.bind(this),this.toStructure=this.toStructure.bind(this),Object.freeze(this)}return s.prototype.fromStructure=function(u){try{return u instanceof n.structure.Structure&&this._transformersPerSignature.has(u.signature)?(0,this._transformersPerSignature.get(u.signature).fromStructure)(u):u}catch(l){return i.createBrokenObject(l)}},s.prototype.toStructure=function(u){var l=this._transformers.find(function(c){return(0,c.isTypeInstance)(u)});return l!==void 0?l.toStructure(u):u},s}();e.default=a;var o=function(){function s(u){var l=u.signature,c=u.fromStructure,f=u.toStructure,h=u.isTypeInstance;this.signature=l,this.isTypeInstance=h,this.fromStructure=c,this.toStructure=f,Object.freeze(this)}return s.prototype.extendsWith=function(u){var l=u.signature,c=u.fromStructure,f=u.toStructure,h=u.isTypeInstance;return new s({signature:l||this.signature,fromStructure:c||this.fromStructure,toStructure:f||this.toStructure,isTypeInstance:h||this.isTypeInstance})},s}();e.TypeTransformer=o},45:function(r,e){var t,n=this&&this.__extends||(t=function(o,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},t(o,s)},function(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=o}t(o,s),o.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function o(s){this.position=0,this.length=s}return o.prototype.getUInt8=function(s){throw new Error("Not implemented")},o.prototype.getInt8=function(s){throw new Error("Not implemented")},o.prototype.getFloat64=function(s){throw new Error("Not implemented")},o.prototype.putUInt8=function(s,u){throw new Error("Not implemented")},o.prototype.putInt8=function(s,u){throw new Error("Not implemented")},o.prototype.putFloat64=function(s,u){throw new Error("Not implemented")},o.prototype.getInt16=function(s){return this.getInt8(s)<<8|this.getUInt8(s+1)},o.prototype.getUInt16=function(s){return this.getUInt8(s)<<8|this.getUInt8(s+1)},o.prototype.getInt32=function(s){return this.getInt8(s)<<24|this.getUInt8(s+1)<<16|this.getUInt8(s+2)<<8|this.getUInt8(s+3)},o.prototype.getUInt32=function(s){return this.getUInt8(s)<<24|this.getUInt8(s+1)<<16|this.getUInt8(s+2)<<8|this.getUInt8(s+3)},o.prototype.getInt64=function(s){return this.getInt8(s)<<56|this.getUInt8(s+1)<<48|this.getUInt8(s+2)<<40|this.getUInt8(s+3)<<32|this.getUInt8(s+4)<<24|this.getUInt8(s+5)<<16|this.getUInt8(s+6)<<8|this.getUInt8(s+7)},o.prototype.getSlice=function(s,u){return new a(s,u,this)},o.prototype.putInt16=function(s,u){this.putInt8(s,u>>8),this.putUInt8(s+1,255&u)},o.prototype.putUInt16=function(s,u){this.putUInt8(s,u>>8&255),this.putUInt8(s+1,255&u)},o.prototype.putInt32=function(s,u){this.putInt8(s,u>>24),this.putUInt8(s+1,u>>16&255),this.putUInt8(s+2,u>>8&255),this.putUInt8(s+3,255&u)},o.prototype.putUInt32=function(s,u){this.putUInt8(s,u>>24&255),this.putUInt8(s+1,u>>16&255),this.putUInt8(s+2,u>>8&255),this.putUInt8(s+3,255&u)},o.prototype.putInt64=function(s,u){this.putInt8(s,u>>48),this.putUInt8(s+1,u>>42&255),this.putUInt8(s+2,u>>36&255),this.putUInt8(s+3,u>>30&255),this.putUInt8(s+4,u>>24&255),this.putUInt8(s+5,u>>16&255),this.putUInt8(s+6,u>>8&255),this.putUInt8(s+7,255&u)},o.prototype.putBytes=function(s,u){for(var l=0,c=u.remaining();l<c;l++)this.putUInt8(s+l,u.readUInt8())},o.prototype.readUInt8=function(){return this.getUInt8(this._updatePos(1))},o.prototype.readInt8=function(){return this.getInt8(this._updatePos(1))},o.prototype.readUInt16=function(){return this.getUInt16(this._updatePos(2))},o.prototype.readUInt32=function(){return this.getUInt32(this._updatePos(4))},o.prototype.readInt16=function(){return this.getInt16(this._updatePos(2))},o.prototype.readInt32=function(){return this.getInt32(this._updatePos(4))},o.prototype.readInt64=function(){return this.getInt32(this._updatePos(8))},o.prototype.readFloat64=function(){return this.getFloat64(this._updatePos(8))},o.prototype.writeUInt8=function(s){this.putUInt8(this._updatePos(1),s)},o.prototype.writeInt8=function(s){this.putInt8(this._updatePos(1),s)},o.prototype.writeInt16=function(s){this.putInt16(this._updatePos(2),s)},o.prototype.writeInt32=function(s){this.putInt32(this._updatePos(4),s)},o.prototype.writeUInt32=function(s){this.putUInt32(this._updatePos(4),s)},o.prototype.writeInt64=function(s){this.putInt64(this._updatePos(8),s)},o.prototype.writeFloat64=function(s){this.putFloat64(this._updatePos(8),s)},o.prototype.writeBytes=function(s){this.putBytes(this._updatePos(s.remaining()),s)},o.prototype.readSlice=function(s){return this.getSlice(this._updatePos(s),s)},o.prototype._updatePos=function(s){var u=this.position;return this.position+=s,u},o.prototype.remaining=function(){return this.length-this.position},o.prototype.hasRemaining=function(){return this.remaining()>0},o.prototype.reset=function(){this.position=0},o.prototype.toString=function(){return this.constructor.name+"( position="+this.position+` )
  `+this.toHex()},o.prototype.toHex=function(){for(var s="",u=0;u<this.length;u++){var l=this.getUInt8(u).toString(16);l.length===1&&(l="0"+l),s+=l,u!==this.length-1&&(s+=" ")}return s},o}();e.default=i;var a=function(o){function s(u,l,c){var f=o.call(this,l)||this;return f._start=u,f._inner=c,f}return n(s,o),s.prototype.putUInt8=function(u,l){this._inner.putUInt8(this._start+u,l)},s.prototype.getUInt8=function(u){return this._inner.getUInt8(this._start+u)},s.prototype.putInt8=function(u,l){this._inner.putInt8(this._start+u,l)},s.prototype.putFloat64=function(u,l){this._inner.putFloat64(this._start+u,l)},s.prototype.getInt8=function(u){return this._inner.getInt8(this._start+u)},s.prototype.getFloat64=function(u){return this._inner.getFloat64(this._start+u)},s}(i)},7174:function(r,e,t){var n=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.BaseBuffer=void 0;var i=n(t(45));e.BaseBuffer=i.default,e.default=i.default},6245:function(r,e,t){var n=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(t(5319)),a=t(9305),o=a.internal.util,s=o.ENCRYPTION_OFF,u=o.ENCRYPTION_ON,l=function(){function f(h,d,v){d===void 0&&(d=c),v===void 0&&(v=function(x){return new WebSocket(x)});var y=this;this._open=!0,this._pending=[],this._error=null,this._handleConnectionError=this._handleConnectionError.bind(this),this._config=h,this._receiveTimeout=null,this._receiveTimeoutStarted=!1,this._receiveTimeoutId=null,this._closingPromise=null;var w=function(x,T){var P=function(N){return N.encrypted===!0||N.encrypted===u}(x),C=function(N){return N.encrypted===!1||N.encrypted===s}(x),R=x.trust,D=function(N){var j=typeof N=="function"?N():"";return j&&j.toLowerCase().indexOf("https")>=0}(T);return function(N,j,B){B===null||(N&&!B?console.warn("Neo4j driver is configured to use secure WebSocket on a HTTP web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to not use encryption."):j&&B&&console.warn("Neo4j driver is configured to use insecure WebSocket on a HTTPS web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to use encryption."))}(P,C,D),C?{scheme:"ws",error:null}:D?{scheme:"wss",error:null}:P?R&&R!=="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"?{scheme:null,error:(0,a.newError)("The browser version of this driver only supports one trust strategy, 'TRUST_SYSTEM_CA_SIGNED_CERTIFICATES'. "+R+' is not supported. Please either use TRUST_SYSTEM_CA_SIGNED_CERTIFICATES or disable encryption by setting `encrypted:"'+s+'"` in the driver configuration.')}:{scheme:"wss",error:null}:{scheme:"ws",error:null}}(h,d),b=w.scheme,p=w.error;if(p)this._error=p;else{this._ws=function(x,T,P){var C=x+"://"+T.asHostPort();try{return P(C)}catch(D){if(function(N,j){return N.name==="SyntaxError"&&(B=j.asHostPort()).charAt(0)==="["&&B.indexOf("]")!==-1;var B}(D,T)){var R=function(N,j){var B=j.host().replace(/:/g,"-").replace("%","s")+".ipv6-literal.net";return"".concat(N,"://").concat(B,":").concat(j.port())}(x,T);return P(R)}throw D}}(b,h.address,v),this._ws.binaryType="arraybuffer";var m=this;this._ws.onclose=function(x){x&&!x.wasClean&&m._handleConnectionError(),m._open=!1},this._ws.onopen=function(){m._clearConnectionTimeout();var x=m._pending;m._pending=null;for(var T=0;T<x.length;T++)m.write(x[T])},this._ws.onmessage=function(x){if(y._resetTimeout(),m.onmessage){var T=new i.default(x.data);m.onmessage(T)}},this._ws.onerror=this._handleConnectionError,this._connectionTimeoutFired=!1,this._connectionTimeoutId=this._setupConnectionTimeout()}}return f.prototype._handleConnectionError=function(){if(this._connectionTimeoutFired)return this._error=(0,a.newError)("Failed to establish connection in ".concat(this._config.connectionTimeout,"ms"),this._config.connectionErrorCode),void(this.onerror&&this.onerror(this._error));this._open&&!this._timedout&&(this._error=(0,a.newError)("WebSocket connection failure. Due to security constraints in your web browser, the reason for the failure is not available to this Neo4j Driver. Please use your browsers development console to determine the root cause of the failure. Common reasons include the database being unavailable, using the wrong connection URL or temporary network problems. If you have enabled encryption, ensure your browser is configured to trust the certificate Neo4j is configured to use. WebSocket `readyState` is: "+this._ws.readyState,this._config.connectionErrorCode),this.onerror&&this.onerror(this._error))},f.prototype.write=function(h){if(this._pending!==null)this._pending.push(h);else{if(!(h instanceof i.default))throw(0,a.newError)("Don't know how to send buffer: "+h);try{this._ws.send(h._buffer)}catch(d){if(this._ws.readyState===1)throw d;this._handleConnectionError()}}},f.prototype.close=function(){var h=this;return this._closingPromise===null&&(this._closingPromise=new Promise(function(d,v){h._clearConnectionTimeout(),h._ws&&h._ws.readyState!==3?(h._open=!1,h.stopReceiveTimeout(),h._ws.onclose=function(){d()},h._ws.close()):d()})),this._closingPromise},f.prototype.setupReceiveTimeout=function(h){this._receiveTimeout=h},f.prototype.stopReceiveTimeout=function(){this._receiveTimeout!==null&&this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!1,this._receiveTimeoutId!=null&&clearTimeout(this._receiveTimeoutId),this._receiveTimeoutId=null)},f.prototype.startReceiveTimeout=function(){this._open&&this._receiveTimeout!==null&&!this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!0,this._resetTimeout())},f.prototype._resetTimeout=function(){var h=this;this._receiveTimeoutStarted&&(this._receiveTimeoutId!==null&&clearTimeout(this._receiveTimeoutId),this._receiveTimeoutId=setTimeout(function(){h._receiveTimeoutId=null,h._timedout=!0,h.stopReceiveTimeout(),h._error=(0,a.newError)("Connection lost. Server didn't respond in ".concat(h._receiveTimeout,"ms"),h._config.connectionErrorCode),h.close(),h.onerror&&h.onerror(h._error)},this._receiveTimeout))},f.prototype._setupConnectionTimeout=function(){var h=this,d=this._config.connectionTimeout;if(d){var v=this._ws;return setTimeout(function(){v.readyState!==1&&(h._connectionTimeoutFired=!0,v.close())},d)}return null},f.prototype._clearConnectionTimeout=function(){var h=this._connectionTimeoutId;(h||h===0)&&(this._connectionTimeoutFired=!1,this._connectionTimeoutId=null,clearTimeout(h))},f}();function c(){return typeof window<"u"&&window.location?window.location.protocol:null}e.default=l},614:function(r,e){var t=this&&this.__awaiter||function(i,a,o,s){return new(o||(o=Promise))(function(u,l){function c(d){try{h(s.next(d))}catch(v){l(v)}}function f(d){try{h(s.throw(d))}catch(v){l(v)}}function h(d){var v;d.done?u(d.value):(v=d.value,v instanceof o?v:new o(function(y){y(v)})).then(c,f)}h((s=s.apply(i,a||[])).next())})},n=this&&this.__generator||function(i,a){var o,s,u,l,c={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(h){return function(d){return function(v){if(o)throw new TypeError("Generator is already executing.");for(;l&&(l=0,v[0]&&(c=0)),c;)try{if(o=1,s&&(u=2&v[0]?s.return:v[0]?s.throw||((u=s.return)&&u.call(s),0):s.next)&&!(u=u.call(s,v[1])).done)return u;switch(s=0,u&&(v=[2&v[0],u.value]),v[0]){case 0:case 1:u=v;break;case 4:return c.label++,{value:v[1],done:!1};case 5:c.label++,s=v[1],v=[0];continue;case 7:v=c.ops.pop(),c.trys.pop();continue;default:if(!((u=(u=c.trys).length>0&&u[u.length-1])||v[0]!==6&&v[0]!==2)){c=0;continue}if(v[0]===3&&(!u||v[1]>u[0]&&v[1]<u[3])){c.label=v[1];break}if(v[0]===6&&c.label<u[1]){c.label=u[1],u=v;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(v);break}u[2]&&c.ops.pop(),c.trys.pop();continue}v=a.call(i,c)}catch(y){v=[6,y],s=0}finally{o=u=0}if(5&v[0])throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}([h,d])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.default={load:function(i){return t(this,void 0,void 0,function(){return n(this,function(a){return[2,i]})})}}},2199:function(r,e,t){var n,i=this&&this.__extends||(n=function(o,s){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},n(o,s)},function(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=o}n(o,s),o.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)});Object.defineProperty(e,"__esModule",{value:!0});var a=function(o){function s(){return o!==null&&o.apply(this,arguments)||this}return i(s,o),s.prototype.resolve=function(u){return this._resolveToItself(u)},s}(t(9305).internal.resolver.BaseHostNameResolver);e.default=a},3951:function(r,e,t){var n=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0}),e.ClientCertificatesLoader=e.HostNameResolver=e.Channel=void 0;var i=n(t(6245)),a=n(t(2199)),o=n(t(614));e.Channel=i.default,e.HostNameResolver=a.default,e.ClientCertificatesLoader=o.default},5319:function(r,e,t){var n,i=this&&this.__extends||(n=function(u,l){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(c[h]=f[h])},n(u,l)},function(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function c(){this.constructor=u}n(u,l),u.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)}),a=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.alloc=void 0;var o=a(t(1048)),s=function(u){function l(c){var f=this,h=function(d){return d instanceof o.default.Buffer?d:typeof d=="number"&&typeof o.default.Buffer.alloc=="function"?o.default.Buffer.alloc(d):new o.default.Buffer(d)}(c);return(f=u.call(this,h.length)||this)._buffer=h,f}return i(l,u),l.prototype.getUInt8=function(c){return this._buffer.readUInt8(c)},l.prototype.getInt8=function(c){return this._buffer.readInt8(c)},l.prototype.getFloat64=function(c){return this._buffer.readDoubleBE(c)},l.prototype.putUInt8=function(c,f){this._buffer.writeUInt8(f,c)},l.prototype.putInt8=function(c,f){this._buffer.writeInt8(f,c)},l.prototype.putFloat64=function(c,f){this._buffer.writeDoubleBE(f,c)},l.prototype.putBytes=function(c,f){if(f instanceof l){var h=Math.min(f.length-f.position,this.length-c);f._buffer.copy(this._buffer,c,f.position,f.position+h),f.position+=h}else u.prototype.putBytes.call(this,c,f)},l.prototype.getSlice=function(c,f){return new l(this._buffer.slice(c,c+f))},l}(a(t(7174)).default);e.default=s,e.alloc=function(u){return new s(u)}},2481:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=t(9305),i=n.internal.util,a=i.ENCRYPTION_OFF,o=i.ENCRYPTION_ON,s=n.error.SERVICE_UNAVAILABLE,u=[null,void 0,!0,!1,o,a],l=[null,void 0,"TRUST_ALL_CERTIFICATES","TRUST_CUSTOM_CA_SIGNED_CERTIFICATES","TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"];e.default=function(c,f,h,d){this.address=c,this.encrypted=function(v){var y=v.encrypted;if(u.indexOf(y)===-1)throw(0,n.newError)("Illegal value of the encrypted setting ".concat(y,". Expected one of ").concat(u));return y}(f),this.trust=function(v){var y=v.trust;if(l.indexOf(y)===-1)throw(0,n.newError)("Illegal value of the trust setting ".concat(y,". Expected one of ").concat(l));return y}(f),this.trustedCertificates=function(v){return v.trustedCertificates||[]}(f),this.knownHostsPath=function(v){return v.knownHosts||null}(f),this.connectionErrorCode=h||s,this.connectionTimeout=f.connectionTimeout,this.clientCertificate=d}},373:function(r,e,t){var n,i=this&&this.__extends||(n=function(f,h){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,v){d.__proto__=v}||function(d,v){for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(d[y]=v[y])},n(f,h)},function(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function d(){this.constructor=f}n(f,h),f.prototype=h===null?Object.create(h):(d.prototype=h.prototype,new d)}),a=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(e,"__esModule",{value:!0}),e.Dechunker=e.Chunker=void 0;var o=a(t(45)),s=t(5319),u=a(t(5553)),l=function(f){function h(d,v){var y=f.call(this,0)||this;return y._bufferSize=v||1400,y._ch=d,y._buffer=(0,s.alloc)(y._bufferSize),y._currentChunkStart=0,y._chunkOpen=!1,y}return i(h,f),h.prototype.putUInt8=function(d,v){this._ensure(1),this._buffer.writeUInt8(v)},h.prototype.putInt8=function(d,v){this._ensure(1),this._buffer.writeInt8(v)},h.prototype.putFloat64=function(d,v){this._ensure(8),this._buffer.writeFloat64(v)},h.prototype.putBytes=function(d,v){for(;v.remaining()>0;)this._ensure(1),this._buffer.remaining()>v.remaining()?this._buffer.writeBytes(v):this._buffer.writeBytes(v.readSlice(this._buffer.remaining()));return this},h.prototype.flush=function(){if(this._buffer.position>0){this._closeChunkIfOpen();var d=this._buffer;this._buffer=null,this._ch.write(d.getSlice(0,d.position)),this._buffer=(0,s.alloc)(this._bufferSize),this._chunkOpen=!1}return this},h.prototype.messageBoundary=function(){this._closeChunkIfOpen(),this._buffer.remaining()<2&&this.flush(),this._buffer.writeInt16(0)},h.prototype._ensure=function(d){var v=this._chunkOpen?d:d+2;this._buffer.remaining()<v&&this.flush(),this._chunkOpen||(this._currentChunkStart=this._buffer.position,this._buffer.position=this._buffer.position+2,this._chunkOpen=!0)},h.prototype._closeChunkIfOpen=function(){if(this._chunkOpen){var d=this._buffer.position-(this._currentChunkStart+2);this._buffer.putUInt16(this._currentChunkStart,d),this._chunkOpen=!1}},h}(o.default);e.Chunker=l;var c=function(){function f(){this._currentMessage=[],this._partialChunkHeader=0,this._state=this.AWAITING_CHUNK}return f.prototype.AWAITING_CHUNK=function(h){return h.remaining()>=2?this._onHeader(h.readUInt16()):(this._partialChunkHeader=h.readUInt8()<<8,this.IN_HEADER)},f.prototype.IN_HEADER=function(h){return this._onHeader(65535&(this._partialChunkHeader|h.readUInt8()))},f.prototype.IN_CHUNK=function(h){return this._chunkSize<=h.remaining()?(this._currentMessage.push(h.readSlice(this._chunkSize)),this.AWAITING_CHUNK):(this._chunkSize-=h.remaining(),this._currentMessage.push(h.readSlice(h.remaining())),this.IN_CHUNK)},f.prototype.CLOSED=function(h){},f.prototype._onHeader=function(h){if(h===0){var d=void 0;switch(this._currentMessage.length){case 0:return this.AWAITING_CHUNK;case 1:d=this._currentMessage[0];break;default:d=new u.default(this._currentMessage)}return this._currentMessage=[],this.onmessage(d),this.AWAITING_CHUNK}return this._chunkSize=h,this.IN_CHUNK},f.prototype.write=function(h){for(;h.hasRemaining();)this._state=this._state(h)},f}();e.Dechunker=c},5553:function(r,e,t){var n,i=this&&this.__extends||(n=function(u,l){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(c[h]=f[h])},n(u,l)},function(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function c(){this.constructor=u}n(u,l),u.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)});Object.defineProperty(e,"__esModule",{value:!0});var a=t(7174),o=t(5319),s=function(u){function l(c){for(var f=this,h=0,d=0;d<c.length;d++)h+=c[d].length;return(f=u.call(this,h)||this)._buffers=c,f}return i(l,u),l.prototype.getUInt8=function(c){for(var f=0;f<this._buffers.length;f++){var h=this._buffers[f];if(!(c>=h.length))return h.getUInt8(c);c-=h.length}},l.prototype.getInt8=function(c){for(var f=0;f<this._buffers.length;f++){var h=this._buffers[f];if(!(c>=h.length))return h.getInt8(c);c-=h.length}},l.prototype.getFloat64=function(c){for(var f=(0,o.alloc)(8),h=0;h<8;h++)f.putUInt8(h,this.getUInt8(c+h));return f.getFloat64(0)},l}(a.BaseBuffer);e.default=s},7452:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(l,c,f,h){h===void 0&&(h=f);var d=Object.getOwnPropertyDescriptor(c,f);d&&!("get"in d?!c.__esModule:d.writable||d.configurable)||(d={enumerable:!0,get:function(){return c[f]}}),Object.defineProperty(l,h,d)}:function(l,c,f,h){h===void 0&&(h=f),l[h]=c[f]}),i=this&&this.__exportStar||function(l,c){for(var f in l)f==="default"||Object.prototype.hasOwnProperty.call(c,f)||n(c,l,f)},a=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0}),e.utf8=e.alloc=e.ChannelConfig=void 0,i(t(3951),e),i(t(373),e);var o=t(2481);Object.defineProperty(e,"ChannelConfig",{enumerable:!0,get:function(){return a(o).default}});var s=t(5319);Object.defineProperty(e,"alloc",{enumerable:!0,get:function(){return s.alloc}});var u=t(3473);Object.defineProperty(e,"utf8",{enumerable:!0,get:function(){return a(u).default}})},3473:function(r,e,t){var n=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(t(5319)),a=t(9305),o=n(t(1048)),s=new(t(8888)).StringDecoder("utf8");e.default={encode:function(u){return new i.default(function(l){return typeof o.default.Buffer.from=="function"?o.default.Buffer.from(l,"utf8"):new o.default.Buffer(l,"utf8")}(u))},decode:function(u,l){if(Object.prototype.hasOwnProperty.call(u,"_buffer"))return function(c,f){var h=c.position,d=h+f;return c.position=Math.min(d,c.length),c._buffer.toString("utf8",h,d)}(u,l);if(Object.prototype.hasOwnProperty.call(u,"_buffers"))return function(c,f){return function(h,d,v,y){var w=d,b=h.position;return h._updatePos(Math.min(d,h.length-b)),h._buffers.reduce(function(p,m){if(w<=0)return p;if(b>=m.length)return b-=m.length,"";m._updatePos(b-m.position);var x=Math.min(m.length-b,w),T=m.readSlice(x);return m._updatePos(x),w=Math.max(w-T.length,0),b=0,p+function(P){return s.write(P._buffer)}(T)},"")+s.end()}(c,f)}(u,l);throw(0,a.newError)("Don't know how to decode strings from '".concat(u,"'"))}}},1839:function(r,e,t){var n=this&&this.__awaiter||function(u,l,c,f){return new(c||(c=Promise))(function(h,d){function v(b){try{w(f.next(b))}catch(p){d(p)}}function y(b){try{w(f.throw(b))}catch(p){d(p)}}function w(b){var p;b.done?h(b.value):(p=b.value,p instanceof c?p:new c(function(m){m(p)})).then(v,y)}w((f=f.apply(u,l||[])).next())})},i=this&&this.__generator||function(u,l){var c,f,h,d,v={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return d={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function y(w){return function(b){return function(p){if(c)throw new TypeError("Generator is already executing.");for(;d&&(d=0,p[0]&&(v=0)),v;)try{if(c=1,f&&(h=2&p[0]?f.return:p[0]?f.throw||((h=f.return)&&h.call(f),0):f.next)&&!(h=h.call(f,p[1])).done)return h;switch(f=0,h&&(p=[2&p[0],h.value]),p[0]){case 0:case 1:h=p;break;case 4:return v.label++,{value:p[1],done:!1};case 5:v.label++,f=p[1],p=[0];continue;case 7:p=v.ops.pop(),v.trys.pop();continue;default:if(!((h=(h=v.trys).length>0&&h[h.length-1])||p[0]!==6&&p[0]!==2)){v=0;continue}if(p[0]===3&&(!h||p[1]>h[0]&&p[1]<h[3])){v.label=p[1];break}if(p[0]===6&&v.label<h[1]){v.label=h[1],h=p;break}if(h&&v.label<h[2]){v.label=h[2],v.ops.push(p);break}h[2]&&v.ops.pop(),v.trys.pop();continue}p=l.call(u,v)}catch(m){p=[6,m],f=0}finally{c=h=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}([w,b])}}};Object.defineProperty(e,"__esModule",{value:!0});var a=t(9305),o=t(6781),s=function(){function u(l){var c=l.authTokenManager,f=l.userAgent,h=l.boltAgent;this._authTokenManager=c||(0,a.staticAuthTokenManager)({}),this._userAgent=f,this._boltAgent=h}return u.prototype.authenticate=function(l){var c=l.connection,f=l.auth,h=l.skipReAuth,d=l.waitReAuth,v=l.forceReAuth;return n(this,void 0,void 0,function(){var y,w;return i(this,function(b){switch(b.label){case 0:return f==null?[3,3]:(y=c.supportsReAuth===!0&&(!o.object.equals(c.authToken,f)&&h!==!0||v===!0),c.authToken==null||y?[4,c.connect(this._userAgent,this._boltAgent,f,d||!1)]:[3,2]);case 1:case 5:return[2,b.sent()];case 2:case 6:return[2,c];case 3:return[4,this._authTokenManager.getToken()];case 4:return w=b.sent(),o.object.equals(w,c.authToken)?[3,6]:[4,c.connect(this._userAgent,this._boltAgent,w,!1)]}})})},u.prototype.handleError=function(l){var c=l.connection,f=l.code;return!(!c||!f.startsWith("Neo.ClientError.Security."))&&this._authTokenManager.handleSecurityException(c.authToken,f)},u}();e.default=s},4271:function(r,e,t){var n=this&&this.__awaiter||function(s,u,l,c){return new(l||(l=Promise))(function(f,h){function d(w){try{y(c.next(w))}catch(b){h(b)}}function v(w){try{y(c.throw(w))}catch(b){h(b)}}function y(w){var b;w.done?f(w.value):(b=w.value,b instanceof l?b:new l(function(p){p(b)})).then(d,v)}y((c=c.apply(s,u||[])).next())})},i=this&&this.__generator||function(s,u){var l,c,f,h,d={label:0,sent:function(){if(1&f[0])throw f[1];return f[1]},trys:[],ops:[]};return h={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function v(y){return function(w){return function(b){if(l)throw new TypeError("Generator is already executing.");for(;h&&(h=0,b[0]&&(d=0)),d;)try{if(l=1,c&&(f=2&b[0]?c.return:b[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,b[1])).done)return f;switch(c=0,f&&(b=[2&b[0],f.value]),b[0]){case 0:case 1:f=b;break;case 4:return d.label++,{value:b[1],done:!1};case 5:d.label++,c=b[1],b=[0];continue;case 7:b=d.ops.pop(),d.trys.pop();continue;default:if(!((f=(f=d.trys).length>0&&f[f.length-1])||b[0]!==6&&b[0]!==2)){d=0;continue}if(b[0]===3&&(!f||b[1]>f[0]&&b[1]<f[3])){d.label=b[1];break}if(b[0]===6&&d.label<f[1]){d.label=f[1],f=b;break}if(f&&d.label<f[2]){d.label=f[2],d.ops.push(b);break}f[2]&&d.ops.pop(),d.trys.pop();continue}b=u.call(s,d)}catch(p){b=[6,p],c=0}finally{l=f=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}([y,w])}}};Object.defineProperty(e,"__esModule",{value:!0});var a=t(7452),o=function(){function s(u){var l=u.clientCertificateProvider,c=u.loader;this._clientCertificateProvider=l,this._loader=c||a.ClientCertificatesLoader,this._clientCertificate=null}return s.prototype.getClientCertificate=function(){return n(this,void 0,void 0,function(){var u,l,c=this;return i(this,function(f){switch(f.label){case 0:return(u=this._clientCertificateProvider!=null)?(l=this._clientCertificate==null)?[3,2]:[4,this._clientCertificateProvider.hasUpdate()]:[3,3];case 1:l=f.sent(),f.label=2;case 2:u=l,f.label=3;case 3:return u&&(this._clientCertificate=Promise.resolve(this._clientCertificateProvider.getClientCertificate()).then(this._loader.load).then(function(h){return c._clientCertificate=h,c._clientCertificate}).catch(function(h){throw c._clientCertificate=null,h})),[2,this._clientCertificate]}})})},s}();e.default=o},3545:function(r,e,t){var n,i=this&&this.__extends||(n=function(p,m){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,T){x.__proto__=T}||function(x,T){for(var P in T)Object.prototype.hasOwnProperty.call(T,P)&&(x[P]=T[P])},n(p,m)},function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function x(){this.constructor=p}n(p,m),p.prototype=m===null?Object.create(m):(x.prototype=m.prototype,new x)}),a=this&&this.__awaiter||function(p,m,x,T){return new(x||(x=Promise))(function(P,C){function R(j){try{N(T.next(j))}catch(B){C(B)}}function D(j){try{N(T.throw(j))}catch(B){C(B)}}function N(j){var B;j.done?P(j.value):(B=j.value,B instanceof x?B:new x(function(z){z(B)})).then(R,D)}N((T=T.apply(p,m||[])).next())})},o=this&&this.__generator||function(p,m){var x,T,P,C,R={label:0,sent:function(){if(1&P[0])throw P[1];return P[1]},trys:[],ops:[]};return C={next:D(0),throw:D(1),return:D(2)},typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function D(N){return function(j){return function(B){if(x)throw new TypeError("Generator is already executing.");for(;C&&(C=0,B[0]&&(R=0)),R;)try{if(x=1,T&&(P=2&B[0]?T.return:B[0]?T.throw||((P=T.return)&&P.call(T),0):T.next)&&!(P=P.call(T,B[1])).done)return P;switch(T=0,P&&(B=[2&B[0],P.value]),B[0]){case 0:case 1:P=B;break;case 4:return R.label++,{value:B[1],done:!1};case 5:R.label++,T=B[1],B=[0];continue;case 7:B=R.ops.pop(),R.trys.pop();continue;default:if(!((P=(P=R.trys).length>0&&P[P.length-1])||B[0]!==6&&B[0]!==2)){R=0;continue}if(B[0]===3&&(!P||B[1]>P[0]&&B[1]<P[3])){R.label=B[1];break}if(B[0]===6&&R.label<P[1]){R.label=P[1],P=B;break}if(P&&R.label<P[2]){R.label=P[2],R.ops.push(B);break}P[2]&&R.ops.pop(),R.trys.pop();continue}B=m.call(p,R)}catch(z){B=[6,z],T=0}finally{x=P=0}if(5&B[0])throw B[1];return{value:B[0]?B[1]:void 0,done:!0}}([N,j])}}},s=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(e,"__esModule",{value:!0});var u=s(t(8987)),l=t(7721),c=t(9305),f=c.internal.constants,h=f.BOLT_PROTOCOL_V3,d=f.BOLT_PROTOCOL_V4_0,v=f.BOLT_PROTOCOL_V4_4,y=f.BOLT_PROTOCOL_V5_1,w=c.error.SERVICE_UNAVAILABLE,b=function(p){function m(x){var T=x.id,P=x.config,C=x.log,R=x.address,D=x.userAgent,N=x.boltAgent,j=x.authTokenManager,B=x.newPool,z=p.call(this,{id:T,config:P,log:C,userAgent:D,boltAgent:N,authTokenManager:j,newPool:B})||this;return z._address=R,z}return i(m,p),m.prototype.acquireConnection=function(x){var T=x===void 0?{}:x,P=(T.accessMode,T.database),C=(T.bookmarks,T.auth),R=T.forceReAuth;return a(this,void 0,void 0,function(){var D,N,j=this;return o(this,function(B){switch(B.label){case 0:return D=l.ConnectionErrorHandler.create({errorCode:w,handleSecurityError:function(z,W,Z){return j._handleSecurityError(z,W,Z,P)}}),[4,this._connectionPool.acquire({auth:C,forceReAuth:R},this._address)];case 1:return N=B.sent(),C?[4,this._verifyStickyConnection({auth:C,connection:N,address:this._address})]:[3,3];case 2:return B.sent(),[2,N];case 3:return[2,new l.DelegateConnection(N,D)]}})})},m.prototype._handleSecurityError=function(x,T,P,C){return this._log.warn("Direct driver ".concat(this._id," will close connection to ").concat(T," for database '").concat(C,"' because of an error ").concat(x.code," '").concat(x.message,"'")),p.prototype._handleSecurityError.call(this,x,T,P)},m.prototype._hasProtocolVersion=function(x){return a(this,void 0,void 0,function(){var T,P;return o(this,function(C){switch(C.label){case 0:return[4,this._createChannelConnection(this._address)];case 1:return T=C.sent(),P=T.protocol()?T.protocol().version:null,[4,T.close()];case 2:return C.sent(),P?[2,x(P)]:[2,!1]}})})},m.prototype.supportsMultiDb=function(){return a(this,void 0,void 0,function(){return o(this,function(x){switch(x.label){case 0:return[4,this._hasProtocolVersion(function(T){return T>=d})];case 1:return[2,x.sent()]}})})},m.prototype.getNegotiatedProtocolVersion=function(){var x=this;return new Promise(function(T,P){x._hasProtocolVersion(T).catch(P)})},m.prototype.supportsTransactionConfig=function(){return a(this,void 0,void 0,function(){return o(this,function(x){switch(x.label){case 0:return[4,this._hasProtocolVersion(function(T){return T>=h})];case 1:return[2,x.sent()]}})})},m.prototype.supportsUserImpersonation=function(){return a(this,void 0,void 0,function(){return o(this,function(x){switch(x.label){case 0:return[4,this._hasProtocolVersion(function(T){return T>=v})];case 1:return[2,x.sent()]}})})},m.prototype.supportsSessionAuth=function(){return a(this,void 0,void 0,function(){return o(this,function(x){switch(x.label){case 0:return[4,this._hasProtocolVersion(function(T){return T>=y})];case 1:return[2,x.sent()]}})})},m.prototype.verifyAuthentication=function(x){var T=x.auth;return a(this,void 0,void 0,function(){var P=this;return o(this,function(C){return[2,this._verifyAuthentication({auth:T,getAddress:function(){return P._address}})]})})},m.prototype.verifyConnectivityAndGetServerInfo=function(){return a(this,void 0,void 0,function(){return o(this,function(x){switch(x.label){case 0:return[4,this._verifyConnectivityAndGetServerVersion({address:this._address})];case 1:return[2,x.sent()]}})})},m}(u.default);e.default=b},8987:function(r,e,t){var n,i=this&&this.__extends||(n=function(P,C){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,D){R.__proto__=D}||function(R,D){for(var N in D)Object.prototype.hasOwnProperty.call(D,N)&&(R[N]=D[N])},n(P,C)},function(P,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function R(){this.constructor=P}n(P,C),P.prototype=C===null?Object.create(C):(R.prototype=C.prototype,new R)}),a=this&&this.__awaiter||function(P,C,R,D){return new(R||(R=Promise))(function(N,j){function B(Z){try{W(D.next(Z))}catch(Q){j(Q)}}function z(Z){try{W(D.throw(Z))}catch(Q){j(Q)}}function W(Z){var Q;Z.done?N(Z.value):(Q=Z.value,Q instanceof R?Q:new R(function(re){re(Q)})).then(B,z)}W((D=D.apply(P,C||[])).next())})},o=this&&this.__generator||function(P,C){var R,D,N,j,B={label:0,sent:function(){if(1&N[0])throw N[1];return N[1]},trys:[],ops:[]};return j={next:z(0),throw:z(1),return:z(2)},typeof Symbol=="function"&&(j[Symbol.iterator]=function(){return this}),j;function z(W){return function(Z){return function(Q){if(R)throw new TypeError("Generator is already executing.");for(;j&&(j=0,Q[0]&&(B=0)),B;)try{if(R=1,D&&(N=2&Q[0]?D.return:Q[0]?D.throw||((N=D.return)&&N.call(D),0):D.next)&&!(N=N.call(D,Q[1])).done)return N;switch(D=0,N&&(Q=[2&Q[0],N.value]),Q[0]){case 0:case 1:N=Q;break;case 4:return B.label++,{value:Q[1],done:!1};case 5:B.label++,D=Q[1],Q=[0];continue;case 7:Q=B.ops.pop(),B.trys.pop();continue;default:if(!((N=(N=B.trys).length>0&&N[N.length-1])||Q[0]!==6&&Q[0]!==2)){B=0;continue}if(Q[0]===3&&(!N||Q[1]>N[0]&&Q[1]<N[3])){B.label=Q[1];break}if(Q[0]===6&&B.label<N[1]){B.label=N[1],N=Q;break}if(N&&B.label<N[2]){B.label=N[2],B.ops.push(Q);break}N[2]&&B.ops.pop(),B.trys.pop();continue}Q=C.call(P,B)}catch(re){Q=[6,re],D=0}finally{R=N=0}if(5&Q[0])throw Q[1];return{value:Q[0]?Q[1]:void 0,done:!0}}([W,Z])}}},s=this&&this.__read||function(P,C){var R=typeof Symbol=="function"&&P[Symbol.iterator];if(!R)return P;var D,N,j=R.call(P),B=[];try{for(;(C===void 0||C-- >0)&&!(D=j.next()).done;)B.push(D.value)}catch(z){N={error:z}}finally{try{D&&!D.done&&(R=j.return)&&R.call(j)}finally{if(N)throw N.error}}return B},u=this&&this.__spreadArray||function(P,C,R){if(R||arguments.length===2)for(var D,N=0,j=C.length;N<j;N++)!D&&N in C||(D||(D=Array.prototype.slice.call(C,0,N)),D[N]=C[N]);return P.concat(D||Array.prototype.slice.call(C))},l=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(e,"__esModule",{value:!0});var c=t(7721),f=t(9305),h=l(t(1839)),d=t(6781),v=l(t(4531)),y=l(t(4271)),w=f.error.SERVICE_UNAVAILABLE,b=["Neo.ClientError.Security.CredentialsExpired","Neo.ClientError.Security.Forbidden","Neo.ClientError.Security.TokenExpired","Neo.ClientError.Security.Unauthorized"],p=f.internal.pool,m=p.Pool,x=p.PoolConfig,T=function(P){function C(R,D){var N=R.id,j=R.config,B=R.log,z=R.userAgent,W=R.boltAgent,Z=R.authTokenManager,Q=R.newPool,re=Q===void 0?function(){for(var ue=[],de=0;de<arguments.length;de++)ue[de]=arguments[de];return new(m.bind.apply(m,u([void 0],s(ue),!1)))}:Q;D===void 0&&(D=null);var ee=P.call(this)||this;return ee._id=N,ee._config=j,ee._log=B,ee._clientCertificateHolder=new y.default({clientCertificateProvider:ee._config.clientCertificate}),ee._authenticationProvider=new h.default({authTokenManager:Z,userAgent:z,boltAgent:W}),ee._livenessCheckProvider=new v.default({connectionLivenessCheckTimeout:j.connectionLivenessCheckTimeout}),ee._userAgent=z,ee._boltAgent=W,ee._createChannelConnection=D||function(ue){return a(ee,void 0,void 0,function(){var de,se;return o(this,function(me){switch(me.label){case 0:return de=c.createChannelConnection,se=[ue,this._config,this._createConnectionErrorHandler(),this._log],[4,this._clientCertificateHolder.getClientCertificate()];case 1:return[2,de.apply(void 0,se.concat([me.sent()]))]}})})},ee._connectionPool=re({create:ee._createConnection.bind(ee),destroy:ee._destroyConnection.bind(ee),validateOnAcquire:ee._validateConnectionOnAcquire.bind(ee),validateOnRelease:ee._validateConnectionOnRelease.bind(ee),installIdleObserver:C._installIdleObserverOnConnection.bind(ee),removeIdleObserver:C._removeIdleObserverOnConnection.bind(ee),config:x.fromDriverConfig(j),log:ee._log}),ee._openConnections={},ee}return i(C,P),C.prototype._createConnectionErrorHandler=function(){return new c.ConnectionErrorHandler(w)},C.prototype._getClientCertificate=function(){return a(this,void 0,void 0,function(){return o(this,function(R){return[2,this._config.clientCertificate.getClientCertificate()]})})},C.prototype._createConnection=function(R,D,N){var j=this,B=R.auth;return this._createChannelConnection(D).then(function(z){return z.release=function(){return z.idleTimestamp=Date.now(),N(D,z)},j._openConnections[z.id]=z,j._authenticationProvider.authenticate({connection:z,auth:B}).catch(function(W){throw j._destroyConnection(z),W})})},C.prototype._validateConnectionOnAcquire=function(R,D){var N=R.auth,j=R.skipReAuth;return a(this,void 0,void 0,function(){var B,z;return o(this,function(W){switch(W.label){case 0:if(!this._validateConnection(D))return[2,!1];W.label=1;case 1:return W.trys.push([1,3,,4]),[4,this._livenessCheckProvider.check(D)];case 2:return W.sent(),[3,4];case 3:return B=W.sent(),this._log.debug("The connection ".concat(D.id," is not alive because of an error ").concat(B.code," '").concat(B.message,"'")),[2,!1];case 4:return W.trys.push([4,6,,7]),[4,this._authenticationProvider.authenticate({connection:D,auth:N,skipReAuth:j})];case 5:return W.sent(),[2,!0];case 6:return z=W.sent(),this._log.debug("The connection ".concat(D.id," is not valid because of an error ").concat(z.code," '").concat(z.message,"'")),[2,!1];case 7:return[2]}})})},C.prototype._validateConnectionOnRelease=function(R){return R._sticky!==!0&&this._validateConnection(R)},C.prototype._validateConnection=function(R){if(!R.isOpen())return!1;var D=this._config.maxConnectionLifetime;return!(Date.now()-R.creationTimestamp>D)},C.prototype._destroyConnection=function(R){return delete this._openConnections[R.id],R.close()},C.prototype._verifyConnectivityAndGetServerVersion=function(R){var D=R.address;return a(this,void 0,void 0,function(){var N,j;return o(this,function(B){switch(B.label){case 0:return[4,this._connectionPool.acquire({},D)];case 1:N=B.sent(),j=new f.ServerInfo(N.server,N.protocol().version),B.label=2;case 2:return B.trys.push([2,,5,7]),N.protocol().isLastMessageLogon()?[3,4]:[4,N.resetAndFlush()];case 3:B.sent(),B.label=4;case 4:return[3,7];case 5:return[4,N.release()];case 6:return B.sent(),[7];case 7:return[2,j]}})})},C.prototype._verifyAuthentication=function(R){var D=R.getAddress,N=R.auth;return a(this,void 0,void 0,function(){var j,B,z,W,Z,Q;return o(this,function(re){switch(re.label){case 0:j=[],re.label=1;case 1:return re.trys.push([1,8,9,11]),[4,D()];case 2:return B=re.sent(),[4,this._connectionPool.acquire({auth:N,skipReAuth:!0},B)];case 3:if(z=re.sent(),j.push(z),W=!z.protocol().isLastMessageLogon(),!z.supportsReAuth)throw(0,f.newError)("Driver is connected to a database that does not support user switch.");return W&&z.supportsReAuth?[4,this._authenticationProvider.authenticate({connection:z,auth:N,waitReAuth:!0,forceReAuth:!0})]:[3,5];case 4:return re.sent(),[3,7];case 5:return!W||z.supportsReAuth?[3,7]:[4,this._connectionPool.acquire({auth:N},B,{requireNew:!0})];case 6:(Z=re.sent())._sticky=!0,j.push(Z),re.label=7;case 7:return[2,!0];case 8:if(Q=re.sent(),b.includes(Q.code))return[2,!1];throw Q;case 9:return[4,Promise.all(j.map(function(ee){return ee.release()}))];case 10:return re.sent(),[7];case 11:return[2]}})})},C.prototype._verifyStickyConnection=function(R){var D=R.auth,N=R.connection;return R.address,a(this,void 0,void 0,function(){var j,B;return o(this,function(z){switch(z.label){case 0:return j=d.object.equals(D,N.authToken),B=!j,N._sticky=j&&!N.supportsReAuth,B||N._sticky?[4,N.release()]:[3,2];case 1:throw z.sent(),(0,f.newError)("Driver is connected to a database that does not support user switch.");case 2:return[2]}})})},C.prototype.close=function(){return a(this,void 0,void 0,function(){return o(this,function(R){switch(R.label){case 0:return[4,this._connectionPool.close()];case 1:return R.sent(),[4,Promise.all(Object.values(this._openConnections).map(function(D){return D.close()}))];case 2:return R.sent(),[2]}})})},C._installIdleObserverOnConnection=function(R,D){R._setIdle(D)},C._removeIdleObserverOnConnection=function(R){R._unsetIdle()},C.prototype._handleSecurityError=function(R,D,N){return this._authenticationProvider.handleError({connection:N,code:R.code})&&(R.retriable=!0),R.code==="Neo.ClientError.Security.AuthorizationExpired"&&this._connectionPool.apply(D,function(j){j.authToken=null}),N&&N.close().catch(function(){}),R},C}(f.ConnectionProvider);e.default=T},7428:function(r,e,t){var n,i=this&&this.__extends||(n=function(ke,Re){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ve,we){ve.__proto__=we}||function(ve,we){for(var Oe in we)Object.prototype.hasOwnProperty.call(we,Oe)&&(ve[Oe]=we[Oe])},n(ke,Re)},function(ke,Re){if(typeof Re!="function"&&Re!==null)throw new TypeError("Class extends value "+String(Re)+" is not a constructor or null");function ve(){this.constructor=ke}n(ke,Re),ke.prototype=Re===null?Object.create(Re):(ve.prototype=Re.prototype,new ve)}),a=this&&this.__assign||function(){return a=Object.assign||function(ke){for(var Re,ve=1,we=arguments.length;ve<we;ve++)for(var Oe in Re=arguments[ve])Object.prototype.hasOwnProperty.call(Re,Oe)&&(ke[Oe]=Re[Oe]);return ke},a.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(ke,Re,ve,we){we===void 0&&(we=ve);var Oe=Object.getOwnPropertyDescriptor(Re,ve);Oe&&!("get"in Oe?!Re.__esModule:Oe.writable||Oe.configurable)||(Oe={enumerable:!0,get:function(){return Re[ve]}}),Object.defineProperty(ke,we,Oe)}:function(ke,Re,ve,we){we===void 0&&(we=ve),ke[we]=Re[ve]}),s=this&&this.__setModuleDefault||(Object.create?function(ke,Re){Object.defineProperty(ke,"default",{enumerable:!0,value:Re})}:function(ke,Re){ke.default=Re}),u=this&&this.__importStar||function(ke){if(ke&&ke.__esModule)return ke;var Re={};if(ke!=null)for(var ve in ke)ve!=="default"&&Object.prototype.hasOwnProperty.call(ke,ve)&&o(Re,ke,ve);return s(Re,ke),Re},l=this&&this.__awaiter||function(ke,Re,ve,we){return new(ve||(ve=Promise))(function(Oe,Be){function Ye(ct){try{Ct(we.next(ct))}catch(H){Be(H)}}function ht(ct){try{Ct(we.throw(ct))}catch(H){Be(H)}}function Ct(ct){var H;ct.done?Oe(ct.value):(H=ct.value,H instanceof ve?H:new ve(function($){$(H)})).then(Ye,ht)}Ct((we=we.apply(ke,Re||[])).next())})},c=this&&this.__generator||function(ke,Re){var ve,we,Oe,Be,Ye={label:0,sent:function(){if(1&Oe[0])throw Oe[1];return Oe[1]},trys:[],ops:[]};return Be={next:ht(0),throw:ht(1),return:ht(2)},typeof Symbol=="function"&&(Be[Symbol.iterator]=function(){return this}),Be;function ht(Ct){return function(ct){return function(H){if(ve)throw new TypeError("Generator is already executing.");for(;Be&&(Be=0,H[0]&&(Ye=0)),Ye;)try{if(ve=1,we&&(Oe=2&H[0]?we.return:H[0]?we.throw||((Oe=we.return)&&Oe.call(we),0):we.next)&&!(Oe=Oe.call(we,H[1])).done)return Oe;switch(we=0,Oe&&(H=[2&H[0],Oe.value]),H[0]){case 0:case 1:Oe=H;break;case 4:return Ye.label++,{value:H[1],done:!1};case 5:Ye.label++,we=H[1],H=[0];continue;case 7:H=Ye.ops.pop(),Ye.trys.pop();continue;default:if(!((Oe=(Oe=Ye.trys).length>0&&Oe[Oe.length-1])||H[0]!==6&&H[0]!==2)){Ye=0;continue}if(H[0]===3&&(!Oe||H[1]>Oe[0]&&H[1]<Oe[3])){Ye.label=H[1];break}if(H[0]===6&&Ye.label<Oe[1]){Ye.label=Oe[1],Oe=H;break}if(Oe&&Ye.label<Oe[2]){Ye.label=Oe[2],Ye.ops.push(H);break}Oe[2]&&Ye.ops.pop(),Ye.trys.pop();continue}H=Re.call(ke,Ye)}catch($){H=[6,$],we=0}finally{ve=Oe=0}if(5&H[0])throw H[1];return{value:H[0]?H[1]:void 0,done:!0}}([Ct,ct])}}},f=this&&this.__values||function(ke){var Re=typeof Symbol=="function"&&Symbol.iterator,ve=Re&&ke[Re],we=0;if(ve)return ve.call(ke);if(ke&&typeof ke.length=="number")return{next:function(){return ke&&we>=ke.length&&(ke=void 0),{value:ke&&ke[we++],done:!ke}}};throw new TypeError(Re?"Object is not iterable.":"Symbol.iterator is not defined.")},h=this&&this.__read||function(ke,Re){var ve=typeof Symbol=="function"&&ke[Symbol.iterator];if(!ve)return ke;var we,Oe,Be=ve.call(ke),Ye=[];try{for(;(Re===void 0||Re-- >0)&&!(we=Be.next()).done;)Ye.push(we.value)}catch(ht){Oe={error:ht}}finally{try{we&&!we.done&&(ve=Be.return)&&ve.call(Be)}finally{if(Oe)throw Oe.error}}return Ye},d=this&&this.__importDefault||function(ke){return ke&&ke.__esModule?ke:{default:ke}};Object.defineProperty(e,"__esModule",{value:!0});var v=t(9305),y=u(t(206)),w=t(7452),b=d(t(4132)),p=d(t(8987)),m=t(4455),x=t(7721),T=t(6781),P=v.error.SERVICE_UNAVAILABLE,C=v.error.SESSION_EXPIRED,R=v.internal.bookmarks.Bookmarks,D=v.internal.constants,N=D.ACCESS_MODE_READ,j=D.ACCESS_MODE_WRITE,B=D.BOLT_PROTOCOL_V3,z=D.BOLT_PROTOCOL_V4_0,W=D.BOLT_PROTOCOL_V4_4,Z=D.BOLT_PROTOCOL_V5_1,Q="Neo.ClientError.Database.DatabaseNotFound",re="Neo.ClientError.Transaction.InvalidBookmark",ee="Neo.ClientError.Transaction.InvalidBookmarkMixture",ue="Neo.ClientError.Security.AuthorizationExpired",de="Neo.ClientError.Statement.ArgumentError",se="Neo.ClientError.Request.Invalid",me="Neo.ClientError.Statement.TypeError",Me="N/A",he=null,fe=(0,v.int)(3e4),Ee=function(ke){function Re(ve){var we=ve.id,Oe=ve.address,Be=ve.routingContext,Ye=ve.hostNameResolver,ht=ve.config,Ct=ve.log,ct=ve.userAgent,H=ve.boltAgent,$=ve.authTokenManager,ne=ve.routingTablePurgeDelay,Ie=ve.newPool,Le=ke.call(this,{id:we,config:ht,log:Ct,userAgent:ct,boltAgent:H,authTokenManager:$,newPool:Ie},function(ze){return l(Le,void 0,void 0,function(){var Je,Pt;return c(this,function(Lt){switch(Lt.label){case 0:return Je=x.createChannelConnection,Pt=[ze,this._config,this._createConnectionErrorHandler(),this._log],[4,this._clientCertificateHolder.getClientCertificate()];case 1:return[2,Je.apply(void 0,Pt.concat([Lt.sent(),this._routingContext]))]}})})})||this;return Le._routingContext=a(a({},Be),{address:Oe.toString()}),Le._seedRouter=Oe,Le._rediscovery=new y.default(Le._routingContext),Le._loadBalancingStrategy=new m.LeastConnectedLoadBalancingStrategy(Le._connectionPool),Le._hostNameResolver=Ye,Le._dnsResolver=new w.HostNameResolver,Le._log=Ct,Le._useSeedRouter=!0,Le._routingTableRegistry=new Ce(ne?(0,v.int)(ne):fe),Le._refreshRoutingTable=T.functional.reuseOngoingRequest(Le._refreshRoutingTable,Le),Le}return i(Re,ke),Re.prototype._createConnectionErrorHandler=function(){return new x.ConnectionErrorHandler(C)},Re.prototype._handleUnavailability=function(ve,we,Oe){return this._log.warn("Routing driver ".concat(this._id," will forget ").concat(we," for database '").concat(Oe,"' because of an error ").concat(ve.code," '").concat(ve.message,"'")),this.forget(we,Oe||he),ve},Re.prototype._handleSecurityError=function(ve,we,Oe,Be){return this._log.warn("Routing driver ".concat(this._id," will close connections to ").concat(we," for database '").concat(Be,"' because of an error ").concat(ve.code," '").concat(ve.message,"'")),ke.prototype._handleSecurityError.call(this,ve,we,Oe,Be)},Re.prototype._handleWriteFailure=function(ve,we,Oe){return this._log.warn("Routing driver ".concat(this._id," will forget writer ").concat(we," for database '").concat(Oe,"' because of an error ").concat(ve.code," '").concat(ve.message,"'")),this.forgetWriter(we,Oe||he),(0,v.newError)("No longer possible to write to server at "+we,C,ve)},Re.prototype.acquireConnection=function(ve){var we=ve===void 0?{}:ve,Oe=we.accessMode,Be=we.database,Ye=we.bookmarks,ht=we.impersonatedUser,Ct=we.onDatabaseNameResolved,ct=we.auth;return l(this,void 0,void 0,function(){var H,$,ne,Ie,Le,ze,Je,Pt=this;return c(this,function(Lt){switch(Lt.label){case 0:return ne={database:Be||he},Ie=new x.ConnectionErrorHandler(C,function(Wt,Bt){return Pt._handleUnavailability(Wt,Bt,ne.database)},function(Wt,Bt){return Pt._handleWriteFailure(Wt,Bt,ne.database)},function(Wt,Bt,er){return Pt._handleSecurityError(Wt,Bt,er,ne.database)}),[4,this._freshRoutingTable({accessMode:Oe,database:ne.database,bookmarks:Ye,impersonatedUser:ht,auth:ct,onDatabaseNameResolved:function(Wt){ne.database=ne.database||Wt,Ct&&Ct(Wt)}})];case 1:if(Le=Lt.sent(),Oe===N)$=this._loadBalancingStrategy.selectReader(Le.readers),H="read";else{if(Oe!==j)throw(0,v.newError)("Illegal mode "+Oe);$=this._loadBalancingStrategy.selectWriter(Le.writers),H="write"}if(!$)throw(0,v.newError)("Failed to obtain connection towards ".concat(H," server. Known routing table is: ").concat(Le),C);Lt.label=2;case 2:return Lt.trys.push([2,6,,7]),[4,this._connectionPool.acquire({auth:ct},$)];case 3:return ze=Lt.sent(),ct?[4,this._verifyStickyConnection({auth:ct,connection:ze,address:$})]:[3,5];case 4:return Lt.sent(),[2,ze];case 5:return[2,new x.DelegateConnection(ze,Ie)];case 6:throw Je=Lt.sent(),Ie.handleAndTransformError(Je,$);case 7:return[2]}})})},Re.prototype._hasProtocolVersion=function(ve){return l(this,void 0,void 0,function(){var we,Oe,Be,Ye,ht,Ct;return c(this,function(ct){switch(ct.label){case 0:return[4,this._resolveSeedRouter(this._seedRouter)];case 1:we=ct.sent(),Be=0,ct.label=2;case 2:if(!(Be<we.length))return[3,8];ct.label=3;case 3:return ct.trys.push([3,6,,7]),[4,this._createChannelConnection(we[Be])];case 4:return Ye=ct.sent(),ht=Ye.protocol()?Ye.protocol().version:null,[4,Ye.close()];case 5:return ct.sent(),ht?[2,ve(ht)]:[2,!1];case 6:return Ct=ct.sent(),Oe=Ct,[3,7];case 7:return Be++,[3,2];case 8:if(Oe)throw Oe;return[2,!1]}})})},Re.prototype.supportsMultiDb=function(){return l(this,void 0,void 0,function(){return c(this,function(ve){switch(ve.label){case 0:return[4,this._hasProtocolVersion(function(we){return we>=z})];case 1:return[2,ve.sent()]}})})},Re.prototype.supportsTransactionConfig=function(){return l(this,void 0,void 0,function(){return c(this,function(ve){switch(ve.label){case 0:return[4,this._hasProtocolVersion(function(we){return we>=B})];case 1:return[2,ve.sent()]}})})},Re.prototype.supportsUserImpersonation=function(){return l(this,void 0,void 0,function(){return c(this,function(ve){switch(ve.label){case 0:return[4,this._hasProtocolVersion(function(we){return we>=W})];case 1:return[2,ve.sent()]}})})},Re.prototype.supportsSessionAuth=function(){return l(this,void 0,void 0,function(){return c(this,function(ve){switch(ve.label){case 0:return[4,this._hasProtocolVersion(function(we){return we>=Z})];case 1:return[2,ve.sent()]}})})},Re.prototype.getNegotiatedProtocolVersion=function(){var ve=this;return new Promise(function(we,Oe){ve._hasProtocolVersion(we).catch(Oe)})},Re.prototype.verifyAuthentication=function(ve){var we=ve.database,Oe=ve.accessMode,Be=ve.auth;return l(this,void 0,void 0,function(){var Ye=this;return c(this,function(ht){return[2,this._verifyAuthentication({auth:Be,getAddress:function(){return l(Ye,void 0,void 0,function(){var Ct,ct,H;return c(this,function($){switch($.label){case 0:return Ct={database:we||he},[4,this._freshRoutingTable({accessMode:Oe,database:Ct.database,auth:Be,onDatabaseNameResolved:function(ne){Ct.database=Ct.database||ne}})];case 1:if(ct=$.sent(),(H=Oe===j?ct.writers:ct.readers).length===0)throw(0,v.newError)("No servers available for database '".concat(Ct.database,"' with access mode '").concat(Oe,"'"),P);return[2,H[0]]}})})}})]})})},Re.prototype.verifyConnectivityAndGetServerInfo=function(ve){var we=ve.database,Oe=ve.accessMode;return l(this,void 0,void 0,function(){var Be,Ye,ht,Ct,ct,H,$,ne,Ie,Le,ze;return c(this,function(Je){switch(Je.label){case 0:return Be={database:we||he},[4,this._freshRoutingTable({accessMode:Oe,database:Be.database,onDatabaseNameResolved:function(Pt){Be.database=Be.database||Pt}})];case 1:Ye=Je.sent(),ht=Oe===j?Ye.writers:Ye.readers,Ct=(0,v.newError)("No servers available for database '".concat(Be.database,"' with access mode '").concat(Oe,"'"),P),Je.label=2;case 2:Je.trys.push([2,9,10,11]),ct=f(ht),H=ct.next(),Je.label=3;case 3:if(H.done)return[3,8];$=H.value,Je.label=4;case 4:return Je.trys.push([4,6,,7]),[4,this._verifyConnectivityAndGetServerVersion({address:$})];case 5:return[2,Je.sent()];case 6:return ne=Je.sent(),Ct=ne,[3,7];case 7:return H=ct.next(),[3,3];case 8:return[3,11];case 9:return Ie=Je.sent(),Le={error:Ie},[3,11];case 10:try{H&&!H.done&&(ze=ct.return)&&ze.call(ct)}finally{if(Le)throw Le.error}return[7];case 11:throw Ct}})})},Re.prototype.forget=function(ve,we){this._routingTableRegistry.apply(we,{applyWhenExists:function(Oe){return Oe.forget(ve)}}),this._connectionPool.purge(ve).catch(function(){})},Re.prototype.forgetWriter=function(ve,we){this._routingTableRegistry.apply(we,{applyWhenExists:function(Oe){return Oe.forgetWriter(ve)}})},Re.prototype._freshRoutingTable=function(ve){var we=ve===void 0?{}:ve,Oe=we.accessMode,Be=we.database,Ye=we.bookmarks,ht=we.impersonatedUser,Ct=we.onDatabaseNameResolved,ct=we.auth,H=this._routingTableRegistry.get(Be,function(){return new y.RoutingTable({database:Be})});return H.isStaleFor(Oe)?(this._log.info('Routing table is stale for database: "'.concat(Be,'" and access mode: "').concat(Oe,'": ').concat(H)),this._refreshRoutingTable(H,Ye,ht,ct).then(function($){return Ct($.database),$})):H},Re.prototype._refreshRoutingTable=function(ve,we,Oe,Be){var Ye=ve.routers;return this._useSeedRouter?this._fetchRoutingTableFromSeedRouterFallbackToKnownRouters(Ye,ve,we,Oe,Be):this._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter(Ye,ve,we,Oe,Be)},Re.prototype._fetchRoutingTableFromSeedRouterFallbackToKnownRouters=function(ve,we,Oe,Be,Ye){return l(this,void 0,void 0,function(){var ht,Ct,ct,H,$,ne,Ie;return c(this,function(Le){switch(Le.label){case 0:return ht=[],[4,this._fetchRoutingTableUsingSeedRouter(ht,this._seedRouter,we,Oe,Be,Ye)];case 1:return Ct=h.apply(void 0,[Le.sent(),2]),ct=Ct[0],H=Ct[1],ct?(this._useSeedRouter=!1,[3,4]):[3,2];case 2:return[4,this._fetchRoutingTableUsingKnownRouters(ve,we,Oe,Be,Ye)];case 3:$=h.apply(void 0,[Le.sent(),2]),ne=$[0],Ie=$[1],ct=ne,H=Ie||H,Le.label=4;case 4:return[4,this._applyRoutingTableIfPossible(we,ct,H)];case 5:return[2,Le.sent()]}})})},Re.prototype._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter=function(ve,we,Oe,Be,Ye){return l(this,void 0,void 0,function(){var ht,Ct,ct,H;return c(this,function($){switch($.label){case 0:return[4,this._fetchRoutingTableUsingKnownRouters(ve,we,Oe,Be,Ye)];case 1:return ht=h.apply(void 0,[$.sent(),2]),Ct=ht[0],ct=ht[1],Ct?[3,3]:[4,this._fetchRoutingTableUsingSeedRouter(ve,this._seedRouter,we,Oe,Be,Ye)];case 2:H=h.apply(void 0,[$.sent(),2]),Ct=H[0],ct=H[1],$.label=3;case 3:return[4,this._applyRoutingTableIfPossible(we,Ct,ct)];case 4:return[2,$.sent()]}})})},Re.prototype._fetchRoutingTableUsingKnownRouters=function(ve,we,Oe,Be,Ye){return l(this,void 0,void 0,function(){var ht,Ct,ct,H;return c(this,function($){switch($.label){case 0:return[4,this._fetchRoutingTable(ve,we,Oe,Be,Ye)];case 1:return ht=h.apply(void 0,[$.sent(),2]),Ct=ht[0],ct=ht[1],Ct?[2,[Ct,null]]:(H=ve.length-1,Re._forgetRouter(we,ve,H),[2,[null,ct]])}})})},Re.prototype._fetchRoutingTableUsingSeedRouter=function(ve,we,Oe,Be,Ye,ht){return l(this,void 0,void 0,function(){var Ct,ct;return c(this,function(H){switch(H.label){case 0:return[4,this._resolveSeedRouter(we)];case 1:return Ct=H.sent(),ct=Ct.filter(function($){return ve.indexOf($)<0}),[4,this._fetchRoutingTable(ct,Oe,Be,Ye,ht)];case 2:return[2,H.sent()]}})})},Re.prototype._resolveSeedRouter=function(ve){return l(this,void 0,void 0,function(){var we,Oe,Be=this;return c(this,function(Ye){switch(Ye.label){case 0:return[4,this._hostNameResolver.resolve(ve)];case 1:return we=Ye.sent(),[4,Promise.all(we.map(function(ht){return Be._dnsResolver.resolve(ht)}))];case 2:return Oe=Ye.sent(),[2,[].concat.apply([],Oe)]}})})},Re.prototype._fetchRoutingTable=function(ve,we,Oe,Be,Ye){return l(this,void 0,void 0,function(){var ht=this;return c(this,function(Ct){return[2,ve.reduce(function(ct,H,$){return l(ht,void 0,void 0,function(){var ne,Ie,Le,ze,Je,Pt,Lt;return c(this,function(Wt){switch(Wt.label){case 0:return[4,ct];case 1:return ne=h.apply(void 0,[Wt.sent(),1]),(Ie=ne[0])?[2,[Ie,null]]:(Le=$-1,Re._forgetRouter(we,ve,Le),[4,this._createSessionForRediscovery(H,Oe,Be,Ye)]);case 2:if(ze=h.apply(void 0,[Wt.sent(),2]),Je=ze[0],Pt=ze[1],!Je)return[3,8];Wt.label=3;case 3:return Wt.trys.push([3,5,6,7]),[4,this._rediscovery.lookupRoutingTableOnRouter(Je,we.database,H,Be)];case 4:return[2,[Wt.sent(),null]];case 5:return Lt=Wt.sent(),[2,this._handleRediscoveryError(Lt,H)];case 6:return Je.close(),[7];case 7:return[3,9];case 8:return[2,[null,Pt]];case 9:return[2]}})})},Promise.resolve([null,null]))]})})},Re.prototype._createSessionForRediscovery=function(ve,we,Oe,Be){return l(this,void 0,void 0,function(){var Ye,ht,Ct,ct,H,$=this;return c(this,function(ne){switch(ne.label){case 0:return ne.trys.push([0,4,,5]),[4,this._connectionPool.acquire({auth:Be},ve)];case 1:return Ye=ne.sent(),Be?[4,this._verifyStickyConnection({auth:Be,connection:Ye,address:ve})]:[3,3];case 2:ne.sent(),ne.label=3;case 3:return ht=x.ConnectionErrorHandler.create({errorCode:C,handleSecurityError:function(Ie,Le,ze){return $._handleSecurityError(Ie,Le,ze)}}),Ct=Ye._sticky?new x.DelegateConnection(Ye):new x.DelegateConnection(Ye,ht),ct=new b.default(Ct),Ye.protocol().version<4?[2,[new v.Session({mode:j,bookmarks:R.empty(),connectionProvider:ct}),null]]:[2,[new v.Session({mode:N,database:"system",bookmarks:we,connectionProvider:ct,impersonatedUser:Oe}),null]];case 4:return H=ne.sent(),[2,this._handleRediscoveryError(H,ve)];case 5:return[2]}})})},Re.prototype._handleRediscoveryError=function(ve,we){if(function(Oe){return[Q,re,ee,de,se,me,Me].includes(Oe.code)}(ve)||function(Oe){return Oe.code.startsWith("Neo.ClientError.Security.")&&![ue].includes(Oe.code)}(ve))throw ve;if(ve.code==="Neo.ClientError.Procedure.ProcedureNotFound")throw(0,v.newError)("Server at ".concat(we.asHostPort()," can't perform routing. Make sure you are connecting to a causal cluster"),P,ve);return this._log.warn("unable to fetch routing table because of an error ".concat(ve)),[null,ve]},Re.prototype._applyRoutingTableIfPossible=function(ve,we,Oe){return l(this,void 0,void 0,function(){return c(this,function(Be){switch(Be.label){case 0:if(!we)throw(0,v.newError)("Could not perform discovery. No routing servers available. Known routing table: ".concat(ve),P,Oe);return we.writers.length===0&&(this._useSeedRouter=!0),[4,this._updateRoutingTable(we)];case 1:return Be.sent(),[2,we]}})})},Re.prototype._updateRoutingTable=function(ve){return l(this,void 0,void 0,function(){return c(this,function(we){switch(we.label){case 0:return[4,this._connectionPool.keepAll(ve.allServers())];case 1:return we.sent(),this._routingTableRegistry.removeExpired(),this._routingTableRegistry.register(ve),this._log.info("Updated routing table ".concat(ve)),[2]}})})},Re._forgetRouter=function(ve,we,Oe){var Be=we[Oe];ve&&Be&&ve.forgetRouter(Be)},Re}(p.default);e.default=Ee;var Ce=function(){function ke(Re){this._tables=new Map,this._routingTablePurgeDelay=Re}return ke.prototype.register=function(Re){return this._tables.set(Re.database,Re),this},ke.prototype.apply=function(Re,ve){var we=ve===void 0?{}:ve,Oe=we.applyWhenExists,Be=we.applyWhenDontExists,Ye=Be===void 0?function(){}:Be;return this._tables.has(Re)?Oe(this._tables.get(Re)):typeof Re=="string"||Re===null?Ye():this._forEach(Oe),this},ke.prototype.get=function(Re,ve){return this._tables.has(Re)?this._tables.get(Re):typeof ve=="function"?ve():ve},ke.prototype.removeExpired=function(){var Re=this;return this._removeIf(function(ve){return ve.isExpiredFor(Re._routingTablePurgeDelay)})},ke.prototype._forEach=function(Re){var ve,we;try{for(var Oe=f(this._tables),Be=Oe.next();!Be.done;Be=Oe.next())Re(h(Be.value,2)[1])}catch(Ye){ve={error:Ye}}finally{try{Be&&!Be.done&&(we=Oe.return)&&we.call(Oe)}finally{if(ve)throw ve.error}}return this},ke.prototype._remove=function(Re){return this._tables.delete(Re),this},ke.prototype._removeIf=function(Re){var ve,we;try{for(var Oe=f(this._tables),Be=Oe.next();!Be.done;Be=Oe.next()){var Ye=h(Be.value,2),ht=Ye[0];Re(Ye[1])&&this._remove(ht)}}catch(Ct){ve={error:Ct}}finally{try{Be&&!Be.done&&(we=Oe.return)&&we.call(Oe)}finally{if(ve)throw ve.error}}return this},ke}()},4132:function(r,e,t){var n,i=this&&this.__extends||(n=function(o,s){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},n(o,s)},function(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=o}n(o,s),o.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)});Object.defineProperty(e,"__esModule",{value:!0});var a=function(o){function s(u){var l=o.call(this)||this;return l._connection=u,l}return i(s,o),s.prototype.acquireConnection=function(u){var l=u===void 0?{}:u,c=(l.accessMode,l.database,l.bookmarks,this._connection);return this._connection=null,Promise.resolve(c)},s}(t(9305).ConnectionProvider);e.default=a},9689:function(r,e,t){var n=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.RoutingConnectionProvider=e.DirectConnectionProvider=e.PooledConnectionProvider=e.SingleConnectionProvider=void 0;var i=t(4132);Object.defineProperty(e,"SingleConnectionProvider",{enumerable:!0,get:function(){return n(i).default}});var a=t(8987);Object.defineProperty(e,"PooledConnectionProvider",{enumerable:!0,get:function(){return n(a).default}});var o=t(3545);Object.defineProperty(e,"DirectConnectionProvider",{enumerable:!0,get:function(){return n(o).default}});var s=t(7428);Object.defineProperty(e,"RoutingConnectionProvider",{enumerable:!0,get:function(){return n(s).default}})},4531:function(r,e){var t=this&&this.__awaiter||function(a,o,s,u){return new(s||(s=Promise))(function(l,c){function f(v){try{d(u.next(v))}catch(y){c(y)}}function h(v){try{d(u.throw(v))}catch(y){c(y)}}function d(v){var y;v.done?l(v.value):(y=v.value,y instanceof s?y:new s(function(w){w(y)})).then(f,h)}d((u=u.apply(a,o||[])).next())})},n=this&&this.__generator||function(a,o){var s,u,l,c,f={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(d){return function(v){return function(y){if(s)throw new TypeError("Generator is already executing.");for(;c&&(c=0,y[0]&&(f=0)),f;)try{if(s=1,u&&(l=2&y[0]?u.return:y[0]?u.throw||((l=u.return)&&l.call(u),0):u.next)&&!(l=l.call(u,y[1])).done)return l;switch(u=0,l&&(y=[2&y[0],l.value]),y[0]){case 0:case 1:l=y;break;case 4:return f.label++,{value:y[1],done:!1};case 5:f.label++,u=y[1],y=[0];continue;case 7:y=f.ops.pop(),f.trys.pop();continue;default:if(!((l=(l=f.trys).length>0&&l[l.length-1])||y[0]!==6&&y[0]!==2)){f=0;continue}if(y[0]===3&&(!l||y[1]>l[0]&&y[1]<l[3])){f.label=y[1];break}if(y[0]===6&&f.label<l[1]){f.label=l[1],l=y;break}if(l&&f.label<l[2]){f.label=l[2],f.ops.push(y);break}l[2]&&f.ops.pop(),f.trys.pop();continue}y=o.call(a,f)}catch(w){y=[6,w],u=0}finally{s=l=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([d,v])}}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function a(o){var s=o.connectionLivenessCheckTimeout;this._connectionLivenessCheckTimeout=s}return a.prototype.check=function(o){return t(this,void 0,void 0,function(){var s;return n(this,function(u){switch(u.label){case 0:return this._isCheckDisabled||this._isNewlyCreatedConnection(o)?[2,!0]:(s=Date.now()-o.idleTimestamp,this._connectionLivenessCheckTimeout===0||s>this._connectionLivenessCheckTimeout?[4,o.resetAndFlush().then(function(){return!0})]:[3,2]);case 1:return[2,u.sent()];case 2:return[2,!0]}})})},Object.defineProperty(a.prototype,"_isCheckDisabled",{get:function(){return this._connectionLivenessCheckTimeout==null||this._connectionLivenessCheckTimeout<0},enumerable:!1,configurable:!0}),a.prototype._isNewlyCreatedConnection=function(o){return o.authToken==null},a}();e.default=i},8031:function(r,e,t){var n,i=this&&this.__extends||(n=function(w,b){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var x in m)Object.prototype.hasOwnProperty.call(m,x)&&(p[x]=m[x])},n(w,b)},function(w,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function p(){this.constructor=w}n(w,b),w.prototype=b===null?Object.create(b):(p.prototype=b.prototype,new p)}),a=this&&this.__awaiter||function(w,b,p,m){return new(p||(p=Promise))(function(x,T){function P(D){try{R(m.next(D))}catch(N){T(N)}}function C(D){try{R(m.throw(D))}catch(N){T(N)}}function R(D){var N;D.done?x(D.value):(N=D.value,N instanceof p?N:new p(function(j){j(N)})).then(P,C)}R((m=m.apply(w,b||[])).next())})},o=this&&this.__generator||function(w,b){var p,m,x,T,P={label:0,sent:function(){if(1&x[0])throw x[1];return x[1]},trys:[],ops:[]};return T={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(T[Symbol.iterator]=function(){return this}),T;function C(R){return function(D){return function(N){if(p)throw new TypeError("Generator is already executing.");for(;T&&(T=0,N[0]&&(P=0)),P;)try{if(p=1,m&&(x=2&N[0]?m.return:N[0]?m.throw||((x=m.return)&&x.call(m),0):m.next)&&!(x=x.call(m,N[1])).done)return x;switch(m=0,x&&(N=[2&N[0],x.value]),N[0]){case 0:case 1:x=N;break;case 4:return P.label++,{value:N[1],done:!1};case 5:P.label++,m=N[1],N=[0];continue;case 7:N=P.ops.pop(),P.trys.pop();continue;default:if(!((x=(x=P.trys).length>0&&x[x.length-1])||N[0]!==6&&N[0]!==2)){P=0;continue}if(N[0]===3&&(!x||N[1]>x[0]&&N[1]<x[3])){P.label=N[1];break}if(N[0]===6&&P.label<x[1]){P.label=x[1],x=N;break}if(x&&P.label<x[2]){P.label=x[2],P.ops.push(N);break}x[2]&&P.ops.pop(),P.trys.pop();continue}N=b.call(w,P)}catch(j){N=[6,j],m=0}finally{p=x=0}if(5&N[0])throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}([R,D])}}},s=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(e,"__esModule",{value:!0}),e.createChannelConnection=void 0;var u=t(7452),l=t(9305),c=s(t(6385)),f=s(t(7666)),h=l.error.PROTOCOL_ERROR,d=l.internal.logger.Logger,v=0;e.createChannelConnection=function(w,b,p,m,x,T,P){T===void 0&&(T=null),P===void 0&&(P=function(R){return new u.Channel(R)});var C=P(new u.ChannelConfig(w,b,p.errorCode(),x));return f.default.handshake(C,m).then(function(R){var D=R.protocolVersion,N=R.consumeRemainingBuffer,j=new u.Chunker(C),B=new u.Dechunker,z=new y(C,p,w,m,b.disableLosslessIntegers,T,j,b.notificationFilter,function(W){return f.default.create({version:D,channel:C,chunker:j,dechunker:B,disableLosslessIntegers:b.disableLosslessIntegers,useBigInt:b.useBigInt,serversideRouting:T,server:W.server,log:W.logger,observer:{onObserversCountChange:W._handleOngoingRequestsNumberChange.bind(W),onError:W._handleFatalError.bind(W),onFailure:W._resetOnFailure.bind(W),onProtocolError:W._handleProtocolError.bind(W),onErrorApplyTransformation:function(Z){return W.handleAndTransformError(Z,W._address)}}})},b.telemetryDisabled);return N(function(W){return B.write(W)}),z}).catch(function(R){return C.close().then(function(){throw R})})};var y=function(w){function b(p,m,x,T,P,C,R,D,N,j){P===void 0&&(P=!1),C===void 0&&(C=null);var B,z,W=w.call(this,m)||this;return W._authToken=null,W._idle=!1,W._reseting=!1,W._resetObservers=[],W._id=v++,W._address=x,W._server={address:x.asHostPort()},W._creationTimestamp=Date.now(),W._disableLosslessIntegers=P,W._ch=p,W._chunker=R,W._log=(B=W,new d((z=T)._level,function(Z,Q){return z._loggerFunction(Z,"".concat(B," ").concat(Q))})),W._serversideRouting=C,W._notificationFilter=D,W._telemetryDisabledDriverConfig=j===!0,W._telemetryDisabledConnection=!0,W._dbConnectionId=null,W._protocol=N(W),W._isBroken=!1,W._log.isDebugEnabled()&&W._log.debug("created towards ".concat(x)),W}return i(b,w),b.prototype.beginTransaction=function(p){return this._sendTelemetryIfEnabled(p),this._protocol.beginTransaction(p)},b.prototype.run=function(p,m,x){return this._sendTelemetryIfEnabled(x),this._protocol.run(p,m,x)},b.prototype._sendTelemetryIfEnabled=function(p){this._telemetryDisabledConnection||this._telemetryDisabledDriverConfig||p==null||p.apiTelemetryConfig==null||this._protocol.telemetry({api:p.apiTelemetryConfig.api},{onCompleted:p.apiTelemetryConfig.onTelemetrySuccess,onError:p.beforeError})},b.prototype.commitTransaction=function(p){return this._protocol.commitTransaction(p)},b.prototype.rollbackTransaction=function(p){return this._protocol.rollbackTransaction(p)},b.prototype.getProtocolVersion=function(){return this._protocol.version},Object.defineProperty(b.prototype,"authToken",{get:function(){return this._authToken},set:function(p){this._authToken=p},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"supportsReAuth",{get:function(){return this._protocol.supportsReAuth},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"databaseId",{get:function(){return this._dbConnectionId},set:function(p){this._dbConnectionId=p},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"idleTimestamp",{get:function(){return this._idleTimestamp},set:function(p){this._idleTimestamp=p},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"creationTimestamp",{get:function(){return this._creationTimestamp},enumerable:!1,configurable:!0}),b.prototype.connect=function(p,m,x,T){return a(this,void 0,void 0,function(){var P=this;return o(this,function(C){switch(C.label){case 0:if(this._protocol.initialized&&!this._protocol.supportsReAuth)throw(0,l.newError)("Connection does not support re-auth");return this._authToken=x,this._protocol.initialized?[3,2]:[4,this._initialize(p,m,x)];case 1:case 3:return[2,C.sent()];case 2:return T?[4,new Promise(function(R,D){P._protocol.logoff({onError:D}),P._protocol.logon({authToken:x,onError:D,onComplete:function(){return R(P)},flush:!0})})]:[3,4];case 4:return this._protocol.logoff(),this._protocol.logon({authToken:x,flush:!0}),[2,this]}})})},b.prototype._initialize=function(p,m,x){var T=this,P=this;return new Promise(function(C,R){T._protocol.initialize({userAgent:p,boltAgent:m,authToken:x,notificationFilter:T._notificationFilter,onError:function(D){return R(D)},onComplete:function(D){if(D){var N=D.server;T.version&&!N||(T.version=N);var j=D.connection_id;if(T.databaseId||(T.databaseId=j),D.hints){var B=D.hints["connection.recv_timeout_seconds"];if(B!=null){var z=(0,l.toNumber)(B);Number.isInteger(z)&&z>0?T._ch.setupReceiveTimeout(1e3*z):T._log.info("Server located at ".concat(T._address," supplied an invalid connection receive timeout value (").concat(z,"). ")+"Please, verify the server configuration and status because this can be the symptom of a bigger issue.")}D.hints["telemetry.enabled"]===!0&&(T._telemetryDisabledConnection=!1)}}C(P)}})})},b.prototype.protocol=function(){return this._protocol},Object.defineProperty(b.prototype,"address",{get:function(){return this._address},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"version",{get:function(){return this._server.version},set:function(p){this._server.version=p},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"server",{get:function(){return this._server},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"logger",{get:function(){return this._log},enumerable:!1,configurable:!0}),b.prototype._handleFatalError=function(p){this._isBroken=!0,this._error=this.handleAndTransformError(this._protocol.currentFailure||p,this._address),this._log.isErrorEnabled()&&this._log.error("experienced a fatal error caused by ".concat(this._error," (").concat(l.json.stringify(this._error),")")),this._protocol.notifyFatalError(this._error)},b.prototype._setIdle=function(p){this._idle=!0,this._ch.stopReceiveTimeout(),this._protocol.queueObserverIfProtocolIsNotBroken(p)},b.prototype._unsetIdle=function(){this._idle=!1,this._updateCurrentObserver()},b.prototype._queueObserver=function(p){return this._protocol.queueObserverIfProtocolIsNotBroken(p)},b.prototype.hasOngoingObservableRequests=function(){return!this._idle&&this._protocol.hasOngoingObservableRequests()},b.prototype.resetAndFlush=function(){var p=this;return new Promise(function(m,x){p._reset({onError:function(T){if(p._isBroken)x(T);else{var P=p._handleProtocolError("Received FAILURE as a response for RESET: ".concat(T));x(P)}},onComplete:function(){m()}})})},b.prototype._resetOnFailure=function(){var p=this;this.isOpen()&&this._reset({onError:function(){p._protocol.resetFailure()},onComplete:function(){p._protocol.resetFailure()}})},b.prototype._reset=function(p){var m=this;if(this._reseting)this._protocol.isLastMessageReset()?this._resetObservers.push(p):this._protocol.reset({onError:function(T){p.onError(T)},onComplete:function(){p.onComplete()}});else{this._resetObservers.push(p),this._reseting=!0;var x=function(T){m._reseting=!1;var P=m._resetObservers;m._resetObservers=[],P.forEach(T)};this._protocol.reset({onError:function(T){x(function(P){return P.onError(T)})},onComplete:function(){x(function(T){return T.onComplete()})}})}},b.prototype._updateCurrentObserver=function(){this._protocol.updateCurrentObserver()},b.prototype.isOpen=function(){return!this._isBroken&&this._ch._open},b.prototype._handleOngoingRequestsNumberChange=function(p){this._idle||(p===0?this._ch.stopReceiveTimeout():this._ch.startReceiveTimeout())},b.prototype.close=function(){return a(this,void 0,void 0,function(){return o(this,function(p){switch(p.label){case 0:return this._log.isDebugEnabled()&&this._log.debug("closing"),this._protocol&&this.isOpen()&&this._protocol.prepareToClose(),[4,this._ch.close()];case 1:return p.sent(),this._log.isDebugEnabled()&&this._log.debug("closed"),[2]}})})},b.prototype.toString=function(){return"Connection [".concat(this.id,"][").concat(this.databaseId||"","]")},b.prototype._handleProtocolError=function(p){this._protocol.resetFailure(),this._updateCurrentObserver();var m=(0,l.newError)(p,h);return this._handleFatalError(m),m},b}(c.default);e.default=y},9857:function(r,e,t){var n,i=this&&this.__extends||(n=function(s,u){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(l[f]=c[f])},n(s,u)},function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function l(){this.constructor=s}n(s,u),s.prototype=u===null?Object.create(u):(l.prototype=u.prototype,new l)}),a=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0});var o=function(s){function u(l,c){var f=s.call(this,c)||this;return c&&(f._originalErrorHandler=l._errorHandler,l._errorHandler=f._errorHandler),f._delegate=l,f}return i(u,s),u.prototype.beginTransaction=function(l){return this._delegate.beginTransaction(l)},u.prototype.run=function(l,c,f){return this._delegate.run(l,c,f)},u.prototype.commitTransaction=function(l){return this._delegate.commitTransaction(l)},u.prototype.rollbackTransaction=function(l){return this._delegate.rollbackTransaction(l)},u.prototype.getProtocolVersion=function(){return this._delegate.getProtocolVersion()},Object.defineProperty(u.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"databaseId",{get:function(){return this._delegate.databaseId},set:function(l){this._delegate.databaseId=l},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"server",{get:function(){return this._delegate.server},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"authToken",{get:function(){return this._delegate.authToken},set:function(l){this._delegate.authToken=l},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"supportsReAuth",{get:function(){return this._delegate.supportsReAuth},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"address",{get:function(){return this._delegate.address},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"version",{get:function(){return this._delegate.version},set:function(l){this._delegate.version=l},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"creationTimestamp",{get:function(){return this._delegate.creationTimestamp},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"idleTimestamp",{get:function(){return this._delegate.idleTimestamp},set:function(l){this._delegate.idleTimestamp=l},enumerable:!1,configurable:!0}),u.prototype.isOpen=function(){return this._delegate.isOpen()},u.prototype.protocol=function(){return this._delegate.protocol()},u.prototype.connect=function(l,c,f,h){return this._delegate.connect(l,c,f,h)},u.prototype.write=function(l,c,f){return this._delegate.write(l,c,f)},u.prototype.resetAndFlush=function(){return this._delegate.resetAndFlush()},u.prototype.hasOngoingObservableRequests=function(){return this._delegate.hasOngoingObservableRequests()},u.prototype.close=function(){return this._delegate.close()},u.prototype.release=function(){return this._originalErrorHandler&&(this._delegate._errorHandler=this._originalErrorHandler),this._delegate.release()},u}(a(t(6385)).default);e.default=o},2363:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=t(9305),i=n.error.SERVICE_UNAVAILABLE,a=n.error.SESSION_EXPIRED,o=function(){function u(l,c,f,h){this._errorCode=l,this._handleUnavailability=c||s,this._handleWriteFailure=f||s,this._handleSecurityError=h||s}return u.create=function(l){return new u(l.errorCode,l.handleUnavailability,l.handleWriteFailure,l.handleSecurityError)},u.prototype.errorCode=function(){return this._errorCode},u.prototype.handleAndTransformError=function(l,c,f){return function(h){return h!=null&&h.code!=null&&h.code.startsWith("Neo.ClientError.Security.")}(l)?this._handleSecurityError(l,c,f):function(h){return!!h&&(h.code===a||h.code===i||h.code==="Neo.TransientError.General.DatabaseUnavailable")}(l)?this._handleUnavailability(l,c,f):function(h){return!!h&&(h.code==="Neo.ClientError.Cluster.NotALeader"||h.code==="Neo.ClientError.General.ForbiddenOnReadOnlyDatabase")}(l)?this._handleWriteFailure(l,c,f):l},u}();function s(u){return u}e.default=o},6385:function(r,e,t){var n,i=this&&this.__extends||(n=function(o,s){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},n(o,s)},function(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=o}n(o,s),o.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)});Object.defineProperty(e,"__esModule",{value:!0}),t(7666);var a=function(o){function s(u){var l=o.call(this)||this;return l._errorHandler=u,l}return i(s,o),Object.defineProperty(s.prototype,"id",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"databaseId",{get:function(){throw new Error("not implemented")},set:function(u){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"authToken",{get:function(){throw new Error("not implemented")},set:function(u){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"supportsReAuth",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"creationTimestamp",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"idleTimestamp",{get:function(){throw new Error("not implemented")},set:function(u){throw new Error("not implemented")},enumerable:!1,configurable:!0}),s.prototype.protocol=function(){throw new Error("not implemented")},Object.defineProperty(s.prototype,"address",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"version",{get:function(){throw new Error("not implemented")},set:function(u){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"server",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),s.prototype.connect=function(u,l,c,f){throw new Error("not implemented")},s.prototype.write=function(u,l,c){throw new Error("not implemented")},s.prototype.close=function(){throw new Error("not implemented")},s.prototype.handleAndTransformError=function(u,l){return this._errorHandler?this._errorHandler.handleAndTransformError(u,l,this):u},s}(t(9305).Connection);e.default=a},7721:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(f,h,d,v){v===void 0&&(v=d);var y=Object.getOwnPropertyDescriptor(h,d);y&&!("get"in y?!h.__esModule:y.writable||y.configurable)||(y={enumerable:!0,get:function(){return h[d]}}),Object.defineProperty(f,v,y)}:function(f,h,d,v){v===void 0&&(v=d),f[v]=h[d]}),i=this&&this.__setModuleDefault||(Object.create?function(f,h){Object.defineProperty(f,"default",{enumerable:!0,value:h})}:function(f,h){f.default=h}),a=this&&this.__importStar||function(f){if(f&&f.__esModule)return f;var h={};if(f!=null)for(var d in f)d!=="default"&&Object.prototype.hasOwnProperty.call(f,d)&&n(h,f,d);return i(h,f),h},o=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(e,"__esModule",{value:!0}),e.createChannelConnection=e.ConnectionErrorHandler=e.DelegateConnection=e.ChannelConnection=e.Connection=void 0;var s=o(t(6385));e.Connection=s.default;var u=a(t(8031));e.ChannelConnection=u.default,Object.defineProperty(e,"createChannelConnection",{enumerable:!0,get:function(){return u.createChannelConnection}});var l=o(t(9857));e.DelegateConnection=l.default;var c=o(t(2363));e.ConnectionErrorHandler=c.default,e.default=s.default},6672:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(s,u,l,c){c===void 0&&(c=l);var f=Object.getOwnPropertyDescriptor(u,l);f&&!("get"in f?!u.__esModule:f.writable||f.configurable)||(f={enumerable:!0,get:function(){return u[l]}}),Object.defineProperty(s,c,f)}:function(s,u,l,c){c===void 0&&(c=l),s[c]=u[l]}),i=this&&this.__setModuleDefault||(Object.create?function(s,u){Object.defineProperty(s,"default",{enumerable:!0,value:u})}:function(s,u){s.default=u}),a=this&&this.__importStar||function(s){if(s&&s.__esModule)return s;var u={};if(s!=null)for(var l in s)l!=="default"&&Object.prototype.hasOwnProperty.call(s,l)&&n(u,s,l);return i(u,s),u},o=this&&this.__exportStar||function(s,u){for(var l in s)l==="default"||Object.prototype.hasOwnProperty.call(u,l)||n(u,s,l)};Object.defineProperty(e,"__esModule",{value:!0}),e.packstream=e.channel=e.buf=e.bolt=e.loadBalancing=void 0,e.loadBalancing=a(t(4455)),e.bolt=a(t(7666)),e.buf=a(t(7174)),e.channel=a(t(7452)),e.packstream=a(t(7168)),o(t(9689),e)},6492:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reuseOngoingRequest=e.identity=void 0;var n=t(9305);e.identity=function(i){return i},e.reuseOngoingRequest=function(i,a){a===void 0&&(a=null);var o=new Map;return function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];var l=n.json.stringify(s);if(o.has(l))return o.get(l);var c=i.apply(a,s);return o.set(l,c),c.finally(function(){o.delete(l)})}}},6781:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);c&&!("get"in c?!s.__esModule:c.writable||c.configurable)||(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),i=this&&this.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),a=this&&this.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&n(s,o,u);return i(s,o),s};Object.defineProperty(e,"__esModule",{value:!0}),e.object=e.functional=void 0,e.functional=a(t(6492)),e.object=a(t(6702))},6702:function(r,e){var t=this&&this.__values||function(n){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&n[i],o=0;if(a)return a.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.equals=void 0,e.equals=function(n,i){var a,o;if(n===i)return!0;if(n===null||i===null)return!1;if(typeof n=="object"&&typeof i=="object"){var s=Object.keys(n),u=Object.keys(i);if(s.length!==u.length)return!1;try{for(var l=t(s),c=l.next();!c.done;c=l.next()){var f=c.value;if(n[f]!==i[f])return!1}}catch(h){a={error:h}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(a)throw a.error}}return!0}return!1}},4455:function(r,e,t){var n=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0}),e.LeastConnectedLoadBalancingStrategy=e.LoadBalancingStrategy=void 0;var i=n(t(4311));e.LoadBalancingStrategy=i.default;var a=n(t(2533));e.LeastConnectedLoadBalancingStrategy=a.default,e.default=a.default},2533:function(r,e,t){var n,i=this&&this.__extends||(n=function(u,l){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(c[h]=f[h])},n(u,l)},function(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function c(){this.constructor=u}n(u,l),u.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)}),a=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0});var o=a(t(715)),s=function(u){function l(c){var f=u.call(this)||this;return f._readersIndex=new o.default,f._writersIndex=new o.default,f._connectionPool=c,f}return i(l,u),l.prototype.selectReader=function(c){return this._select(c,this._readersIndex)},l.prototype.selectWriter=function(c){return this._select(c,this._writersIndex)},l.prototype._select=function(c,f){var h=c.length;if(h===0)return null;var d=f.next(h),v=d,y=null,w=Number.MAX_SAFE_INTEGER;do{var b=c[v],p=this._connectionPool.activeResourceCount(b);p<w&&(y=b,w=p),v===h-1?v=0:v++}while(v!==d);return y},l}(a(t(4311)).default);e.default=s},4311:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function n(){}return n.prototype.selectReader=function(i){throw new Error("Abstract function")},n.prototype.selectWriter=function(i){throw new Error("Abstract function")},n}();e.default=t},715:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function n(i){this._offset=i||0}return n.prototype.next=function(i){if(i===0)return-1;var a=this._offset;return this._offset+=1,this._offset===Number.MAX_SAFE_INTEGER&&(this._offset=0),a%i},n}();e.default=t},7168:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(l,c,f,h){h===void 0&&(h=f);var d=Object.getOwnPropertyDescriptor(c,f);d&&!("get"in d?!c.__esModule:d.writable||d.configurable)||(d={enumerable:!0,get:function(){return c[f]}}),Object.defineProperty(l,h,d)}:function(l,c,f,h){h===void 0&&(h=f),l[h]=c[f]}),i=this&&this.__setModuleDefault||(Object.create?function(l,c){Object.defineProperty(l,"default",{enumerable:!0,value:c})}:function(l,c){l.default=c}),a=this&&this.__importStar||function(l){if(l&&l.__esModule)return l;var c={};if(l!=null)for(var f in l)f!=="default"&&Object.prototype.hasOwnProperty.call(l,f)&&n(c,l,f);return i(c,l),c};Object.defineProperty(e,"__esModule",{value:!0}),e.structure=e.v2=e.v1=void 0;var o=a(t(5361));e.v1=o;var s=a(t(2072));e.v2=s;var u=a(t(7665));e.structure=u,e.default=s},5361:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Unpacker=e.Packer=void 0;var n=t(7452),i=t(6781),a=t(7665),o=t(9305),s=o.error.PROTOCOL_ERROR,u=function(){function c(f){this._ch=f,this._byteArraysSupported=!0}return c.prototype.packable=function(f,h){var d,v=this;h===void 0&&(h=i.functional.identity);try{f=h(f)}catch(b){return function(){throw b}}if(f===null)return function(){return v._ch.writeUInt8(192)};if(f===!0)return function(){return v._ch.writeUInt8(195)};if(f===!1)return function(){return v._ch.writeUInt8(194)};if(typeof f=="number")return function(){return v.packFloat(f)};if(typeof f=="string")return function(){return v.packString(f)};if(typeof f=="bigint")return function(){return v.packInteger((0,o.int)(f))};if((0,o.isInt)(f))return function(){return v.packInteger(f)};if(f instanceof Int8Array)return function(){return v.packBytes(f)};if(f instanceof Array)return function(){v.packListHeader(f.length);for(var b=0;b<f.length;b++)v.packable(f[b]===void 0?null:f[b],h)()};if((d=f)!=null&&typeof d[Symbol.iterator]=="function")return this.packableIterable(f,h);if(f instanceof a.Structure){for(var y=[],w=0;w<f.fields.length;w++)y[w]=this.packable(f.fields[w],h);return function(){return v.packStruct(f.signature,y)}}return typeof f=="object"?function(){for(var b=Object.keys(f),p=0,m=0;m<b.length;m++)f[b[m]]!==void 0&&p++;for(v.packMapHeader(p),m=0;m<b.length;m++){var x=b[m];f[x]!==void 0&&(v.packString(x),v.packable(f[x],h)())}}:this._nonPackableValue("Unable to pack the given value: ".concat(f))},c.prototype.packableIterable=function(f,h){try{var d=Array.from(f);return this.packable(d,h)}catch(v){throw(0,o.newError)("Cannot pack given iterable, ".concat(v.message,": ").concat(f))}},c.prototype.packStruct=function(f,h){h=h||[],this.packStructHeader(h.length,f);for(var d=0;d<h.length;d++)h[d]()},c.prototype.packInteger=function(f){var h=f.high,d=f.low;f.greaterThanOrEqual(-16)&&f.lessThan(128)?this._ch.writeInt8(d):f.greaterThanOrEqual(-128)&&f.lessThan(-16)?(this._ch.writeUInt8(200),this._ch.writeInt8(d)):f.greaterThanOrEqual(-32768)&&f.lessThan(32768)?(this._ch.writeUInt8(201),this._ch.writeInt16(d)):f.greaterThanOrEqual(-2147483648)&&f.lessThan(2147483648)?(this._ch.writeUInt8(202),this._ch.writeInt32(d)):(this._ch.writeUInt8(203),this._ch.writeInt32(h),this._ch.writeInt32(d))},c.prototype.packFloat=function(f){this._ch.writeUInt8(193),this._ch.writeFloat64(f)},c.prototype.packString=function(f){var h=n.utf8.encode(f),d=h.length;if(d<16)this._ch.writeUInt8(128|d),this._ch.writeBytes(h);else if(d<256)this._ch.writeUInt8(208),this._ch.writeUInt8(d),this._ch.writeBytes(h);else if(d<65536)this._ch.writeUInt8(209),this._ch.writeUInt8(d/256>>0),this._ch.writeUInt8(d%256),this._ch.writeBytes(h);else{if(!(d<4294967296))throw(0,o.newError)("UTF-8 strings of size "+d+" are not supported");this._ch.writeUInt8(210),this._ch.writeUInt8((d/16777216>>0)%256),this._ch.writeUInt8((d/65536>>0)%256),this._ch.writeUInt8((d/256>>0)%256),this._ch.writeUInt8(d%256),this._ch.writeBytes(h)}},c.prototype.packListHeader=function(f){if(f<16)this._ch.writeUInt8(144|f);else if(f<256)this._ch.writeUInt8(212),this._ch.writeUInt8(f);else if(f<65536)this._ch.writeUInt8(213),this._ch.writeUInt8((f/256>>0)%256),this._ch.writeUInt8(f%256);else{if(!(f<4294967296))throw(0,o.newError)("Lists of size "+f+" are not supported");this._ch.writeUInt8(214),this._ch.writeUInt8((f/16777216>>0)%256),this._ch.writeUInt8((f/65536>>0)%256),this._ch.writeUInt8((f/256>>0)%256),this._ch.writeUInt8(f%256)}},c.prototype.packBytes=function(f){if(!this._byteArraysSupported)throw(0,o.newError)("Byte arrays are not supported by the database this driver is connected to");this.packBytesHeader(f.length);for(var h=0;h<f.length;h++)this._ch.writeInt8(f[h])},c.prototype.packBytesHeader=function(f){if(f<256)this._ch.writeUInt8(204),this._ch.writeUInt8(f);else if(f<65536)this._ch.writeUInt8(205),this._ch.writeUInt8((f/256>>0)%256),this._ch.writeUInt8(f%256);else{if(!(f<4294967296))throw(0,o.newError)("Byte arrays of size "+f+" are not supported");this._ch.writeUInt8(206),this._ch.writeUInt8((f/16777216>>0)%256),this._ch.writeUInt8((f/65536>>0)%256),this._ch.writeUInt8((f/256>>0)%256),this._ch.writeUInt8(f%256)}},c.prototype.packMapHeader=function(f){if(f<16)this._ch.writeUInt8(160|f);else if(f<256)this._ch.writeUInt8(216),this._ch.writeUInt8(f);else if(f<65536)this._ch.writeUInt8(217),this._ch.writeUInt8(f/256>>0),this._ch.writeUInt8(f%256);else{if(!(f<4294967296))throw(0,o.newError)("Maps of size "+f+" are not supported");this._ch.writeUInt8(218),this._ch.writeUInt8((f/16777216>>0)%256),this._ch.writeUInt8((f/65536>>0)%256),this._ch.writeUInt8((f/256>>0)%256),this._ch.writeUInt8(f%256)}},c.prototype.packStructHeader=function(f,h){if(f<16)this._ch.writeUInt8(176|f),this._ch.writeUInt8(h);else if(f<256)this._ch.writeUInt8(220),this._ch.writeUInt8(f),this._ch.writeUInt8(h);else{if(!(f<65536))throw(0,o.newError)("Structures of size "+f+" are not supported");this._ch.writeUInt8(221),this._ch.writeUInt8(f/256>>0),this._ch.writeUInt8(f%256)}},c.prototype.disableByteArrays=function(){this._byteArraysSupported=!1},c.prototype._nonPackableValue=function(f){return function(){throw(0,o.newError)(f,s)}},c}();e.Packer=u;var l=function(){function c(f,h){f===void 0&&(f=!1),h===void 0&&(h=!1),this._disableLosslessIntegers=f,this._useBigInt=h}return c.prototype.unpack=function(f,h){h===void 0&&(h=i.functional.identity);var d=f.readUInt8(),v=240&d,y=15&d;if(d===192)return null;var w=this._unpackBoolean(d);if(w!==null)return w;var b=this._unpackNumberOrInteger(d,f);if(b!==null){if((0,o.isInt)(b)){if(this._useBigInt)return b.toBigInt();if(this._disableLosslessIntegers)return b.toNumberOrInfinity()}return b}var p=this._unpackString(d,v,y,f);if(p!==null)return p;var m=this._unpackList(d,v,y,f,h);if(m!==null)return m;var x=this._unpackByteArray(d,f);if(x!==null)return x;var T=this._unpackMap(d,v,y,f,h);if(T!==null)return T;var P=this._unpackStruct(d,v,y,f,h);if(P!==null)return P;throw(0,o.newError)("Unknown packed value with marker "+d.toString(16))},c.prototype.unpackInteger=function(f){var h=f.readUInt8(),d=this._unpackInteger(h,f);if(d==null)throw(0,o.newError)("Unable to unpack integer value with marker "+h.toString(16));return d},c.prototype._unpackBoolean=function(f){return f===195||f!==194&&null},c.prototype._unpackNumberOrInteger=function(f,h){return f===193?h.readFloat64():this._unpackInteger(f,h)},c.prototype._unpackInteger=function(f,h){if(f>=0&&f<128)return(0,o.int)(f);if(f>=240&&f<256)return(0,o.int)(f-256);if(f===200)return(0,o.int)(h.readInt8());if(f===201)return(0,o.int)(h.readInt16());if(f===202){var d=h.readInt32();return(0,o.int)(d)}if(f===203){var v=h.readInt32(),y=h.readInt32();return new o.Integer(y,v)}return null},c.prototype._unpackString=function(f,h,d,v){return h===128?n.utf8.decode(v,d):f===208?n.utf8.decode(v,v.readUInt8()):f===209?n.utf8.decode(v,v.readUInt16()):f===210?n.utf8.decode(v,v.readUInt32()):null},c.prototype._unpackList=function(f,h,d,v,y){return h===144?this._unpackListWithSize(d,v,y):f===212?this._unpackListWithSize(v.readUInt8(),v,y):f===213?this._unpackListWithSize(v.readUInt16(),v,y):f===214?this._unpackListWithSize(v.readUInt32(),v,y):null},c.prototype._unpackListWithSize=function(f,h,d){for(var v=[],y=0;y<f;y++)v.push(this.unpack(h,d));return v},c.prototype._unpackByteArray=function(f,h){return f===204?this._unpackByteArrayWithSize(h.readUInt8(),h):f===205?this._unpackByteArrayWithSize(h.readUInt16(),h):f===206?this._unpackByteArrayWithSize(h.readUInt32(),h):null},c.prototype._unpackByteArrayWithSize=function(f,h){for(var d=new Int8Array(f),v=0;v<f;v++)d[v]=h.readInt8();return d},c.prototype._unpackMap=function(f,h,d,v,y){return h===160?this._unpackMapWithSize(d,v,y):f===216?this._unpackMapWithSize(v.readUInt8(),v,y):f===217?this._unpackMapWithSize(v.readUInt16(),v,y):f===218?this._unpackMapWithSize(v.readUInt32(),v,y):null},c.prototype._unpackMapWithSize=function(f,h,d){for(var v={},y=0;y<f;y++)v[this.unpack(h,d)]=this.unpack(h,d);return v},c.prototype._unpackStruct=function(f,h,d,v,y){return h===176?this._unpackStructWithSize(d,v,y):f===220?this._unpackStructWithSize(v.readUInt8(),v,y):f===221?this._unpackStructWithSize(v.readUInt16(),v,y):null},c.prototype._unpackStructWithSize=function(f,h,d){for(var v=h.readUInt8(),y=new a.Structure(v,[]),w=0;w<f;w++)y.fields.push(this.unpack(h,d));return d(y)},c}();e.Unpacker=l},2072:function(r,e,t){var n,i=this&&this.__extends||(n=function(f,h){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,v){d.__proto__=v}||function(d,v){for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(d[y]=v[y])},n(f,h)},function(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function d(){this.constructor=f}n(f,h),f.prototype=h===null?Object.create(h):(d.prototype=h.prototype,new d)}),a=this&&this.__createBinding||(Object.create?function(f,h,d,v){v===void 0&&(v=d);var y=Object.getOwnPropertyDescriptor(h,d);y&&!("get"in y?!h.__esModule:y.writable||y.configurable)||(y={enumerable:!0,get:function(){return h[d]}}),Object.defineProperty(f,v,y)}:function(f,h,d,v){v===void 0&&(v=d),f[v]=h[d]}),o=this&&this.__setModuleDefault||(Object.create?function(f,h){Object.defineProperty(f,"default",{enumerable:!0,value:h})}:function(f,h){f.default=h}),s=this&&this.__importStar||function(f){if(f&&f.__esModule)return f;var h={};if(f!=null)for(var d in f)d!=="default"&&Object.prototype.hasOwnProperty.call(f,d)&&a(h,f,d);return o(h,f),h};Object.defineProperty(e,"__esModule",{value:!0}),e.Unpacker=e.Packer=void 0;var u=s(t(5361)),l=function(f){function h(){return f!==null&&f.apply(this,arguments)||this}return i(h,f),h.prototype.disableByteArrays=function(){throw new Error("Bolt V2 should always support byte arrays")},h}(u.Packer);e.Packer=l;var c=function(f){function h(d,v){return d===void 0&&(d=!1),v===void 0&&(v=!1),f.call(this,d,v)||this}return i(h,f),h}(u.Unpacker);e.Unpacker=c},7665:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.verifyStructSize=e.Structure=void 0;var n=t(9305),i=n.error.PROTOCOL_ERROR,a=function(){function o(s,u){this.signature=s,this.fields=u}return Object.defineProperty(o.prototype,"size",{get:function(){return this.fields.length},enumerable:!1,configurable:!0}),o.prototype.toString=function(){for(var s="",u=0;u<this.fields.length;u++)u>0&&(s+=", "),s+=this.fields[u];return"Structure("+this.signature+", ["+s+"])"},o}();e.Structure=a,e.verifyStructSize=function(o,s,u){if(s!==u)throw(0,n.newError)("Wrong struct size for ".concat(o,", expected ").concat(s," but was ").concat(u),i)},e.default=a},206:function(r,e,t){var n=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0}),e.RoutingTable=e.Rediscovery=void 0;var i=n(t(4151));e.Rediscovery=i.default;var a=n(t(9018));e.RoutingTable=a.default,e.default=i.default},4151:function(r,e,t){var n=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(t(9018)),a=(t(9305),function(){function o(s){this._routingContext=s}return o.prototype.lookupRoutingTableOnRouter=function(s,u,l,c){var f=this;return s._acquireConnection(function(h){return f._requestRawRoutingTable(h,s,u,l,c).then(function(d){return d.isNull?null:i.default.fromRawRoutingTable(u,l,d)})})},o.prototype._requestRawRoutingTable=function(s,u,l,c,f){var h=this;return new Promise(function(d,v){s.protocol().requestRoutingInformation({routingContext:h._routingContext,databaseName:l,impersonatedUser:f,sessionContext:{bookmarks:u._lastBookmarks,mode:u._mode,database:u._database,afterComplete:u._onComplete},onCompleted:d,onError:v})})},o}());e.default=a},9018:function(r,e,t){var n=this&&this.__read||function(w,b){var p=typeof Symbol=="function"&&w[Symbol.iterator];if(!p)return w;var m,x,T=p.call(w),P=[];try{for(;(b===void 0||b-- >0)&&!(m=T.next()).done;)P.push(m.value)}catch(C){x={error:C}}finally{try{m&&!m.done&&(p=T.return)&&p.call(T)}finally{if(x)throw x.error}}return P},i=this&&this.__spreadArray||function(w,b,p){if(p||arguments.length===2)for(var m,x=0,T=b.length;x<T;x++)!m&&x in b||(m||(m=Array.prototype.slice.call(b,0,x)),m[x]=b[x]);return w.concat(m||Array.prototype.slice.call(b))};Object.defineProperty(e,"__esModule",{value:!0}),e.createValidRoutingTable=void 0;var a=t(9305),o=a.internal.constants,s=o.ACCESS_MODE_WRITE,u=o.ACCESS_MODE_READ,l=a.internal.serverAddress.ServerAddress,c=a.error.PROTOCOL_ERROR,f=function(){function w(b){var p=b===void 0?{}:b,m=p.database,x=p.routers,T=p.readers,P=p.writers,C=p.expirationTime,R=p.ttl;this.database=m||null,this.databaseName=m||"default database",this.routers=x||[],this.readers=T||[],this.writers=P||[],this.expirationTime=C||(0,a.int)(0),this.ttl=R}return w.fromRawRoutingTable=function(b,p,m){return d(b,p,m)},w.prototype.forget=function(b){this.readers=h(this.readers,b),this.writers=h(this.writers,b)},w.prototype.forgetRouter=function(b){this.routers=h(this.routers,b)},w.prototype.forgetWriter=function(b){this.writers=h(this.writers,b)},w.prototype.isStaleFor=function(b){return this.expirationTime.lessThan(Date.now())||this.routers.length<1||b===u&&this.readers.length===0||b===s&&this.writers.length===0},w.prototype.isExpiredFor=function(b){return this.expirationTime.add(b).lessThan(Date.now())},w.prototype.allServers=function(){return i(i(i([],n(this.routers),!1),n(this.readers),!1),n(this.writers),!1)},w.prototype.toString=function(){return"RoutingTable["+"database=".concat(this.databaseName,", ")+"expirationTime=".concat(this.expirationTime,", ")+"currentTime=".concat(Date.now(),", ")+"routers=[".concat(this.routers,"], ")+"readers=[".concat(this.readers,"], ")+"writers=[".concat(this.writers,"]]")},w}();function h(w,b){return w.filter(function(p){return p.asKey()!==b.asKey()})}function d(w,b,p){var m=p.ttl,x=function(D,N){try{var j=(0,a.int)(Date.now()),B=(0,a.int)(D.ttl).multiply(1e3).add(j);return B.lessThan(j)?a.Integer.MAX_VALUE:B}catch(z){throw(0,a.newError)("Unable to parse TTL entry from router ".concat(N,` from raw routing table:
`).concat(a.json.stringify(D),`
Error message: `).concat(z.message),c)}}(p,b),T=function(D,N){try{var j=[],B=[],z=[];return D.servers.forEach(function(W){var Z=W.role,Q=W.addresses;Z==="ROUTE"?j=y(Q).map(function(re){return l.fromUrl(re)}):Z==="WRITE"?z=y(Q).map(function(re){return l.fromUrl(re)}):Z==="READ"&&(B=y(Q).map(function(re){return l.fromUrl(re)}))}),{routers:j,readers:B,writers:z}}catch(W){throw(0,a.newError)("Unable to parse servers entry from router ".concat(N,` from addresses:
`).concat(a.json.stringify(D.servers),`
Error message: `).concat(W.message),c)}}(p,b),P=T.routers,C=T.readers,R=T.writers;return v(P,"routers",b),v(C,"readers",b),new f({database:w||p.db,routers:P,readers:C,writers:R,expirationTime:x,ttl:m})}function v(w,b,p){if(w.length===0)throw(0,a.newError)("Received no "+b+" from router "+p,c)}function y(w){if(!Array.isArray(w))throw new TypeError("Array expected but got: "+w);return Array.from(w)}e.default=f,e.createValidRoutingTable=d},2069:function(r,e,t){var n=this&&this.__awaiter||function(d,v,y,w){return new(y||(y=Promise))(function(b,p){function m(P){try{T(w.next(P))}catch(C){p(C)}}function x(P){try{T(w.throw(P))}catch(C){p(C)}}function T(P){var C;P.done?b(P.value):(C=P.value,C instanceof y?C:new y(function(R){R(C)})).then(m,x)}T((w=w.apply(d,v||[])).next())})},i=this&&this.__generator||function(d,v){var y,w,b,p,m={label:0,sent:function(){if(1&b[0])throw b[1];return b[1]},trys:[],ops:[]};return p={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function x(T){return function(P){return function(C){if(y)throw new TypeError("Generator is already executing.");for(;p&&(p=0,C[0]&&(m=0)),m;)try{if(y=1,w&&(b=2&C[0]?w.return:C[0]?w.throw||((b=w.return)&&b.call(w),0):w.next)&&!(b=b.call(w,C[1])).done)return b;switch(w=0,b&&(C=[2&C[0],b.value]),C[0]){case 0:case 1:b=C;break;case 4:return m.label++,{value:C[1],done:!1};case 5:m.label++,w=C[1],C=[0];continue;case 7:C=m.ops.pop(),m.trys.pop();continue;default:if(!((b=(b=m.trys).length>0&&b[b.length-1])||C[0]!==6&&C[0]!==2)){m=0;continue}if(C[0]===3&&(!b||C[1]>b[0]&&C[1]<b[3])){m.label=C[1];break}if(C[0]===6&&m.label<b[1]){m.label=b[1],b=C;break}if(b&&m.label<b[2]){m.label=b[2],m.ops.push(C);break}b[2]&&m.ops.pop(),m.trys.pop();continue}C=v.call(d,m)}catch(R){C=[6,R],w=0}finally{y=b=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}([T,P])}}},a=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0}),e.staticAuthTokenManager=e.authTokenManagers=e.AuthTokenAndExpiration=void 0;var o=a(t(1967)),s=t(6995),u=function(){function d(){}return d.prototype.getToken=function(){throw new Error("Not Implemented")},d.prototype.handleSecurityException=function(v,y){throw new Error("Not implemented")},d}();e.default=u,e.AuthTokenAndExpiration=function(){this.token=o.default.none(),this.expiration=void 0};var l=new(function(){function d(){}return d.prototype.bearer=function(v){var y=v.tokenProvider;if(typeof y!="function")throw new TypeError("tokenProvider should be function, but got: ".concat(typeof y));return new f(y,["Neo.ClientError.Security.Unauthorized","Neo.ClientError.Security.TokenExpired"])},d.prototype.basic=function(v){var y=this,w=v.tokenProvider;if(typeof w!="function")throw new TypeError("tokenProvider should be function, but got: ".concat(typeof w));return new f(function(){return n(y,void 0,void 0,function(){var b;return i(this,function(p){switch(p.label){case 0:return b={},[4,w()];case 1:return[2,(b.token=p.sent(),b)]}})})},["Neo.ClientError.Security.Unauthorized"])},d}());e.authTokenManagers=l,Object.freeze(l),e.staticAuthTokenManager=function(d){var v=d.authToken;return new h(v)};var c=function(){function d(v){v===void 0&&(v=[]),this._subscribers=v}return d.prototype.subscribe=function(v){this._subscribers.push(v)},d.prototype.onCompleted=function(v){this._subscribers.forEach(function(y){return y.onCompleted(v)})},d.prototype.onError=function(v){this._subscribers.forEach(function(y){return y.onError(v)})},d}(),f=function(){function d(v,y,w,b){this._tokenProvider=v,this._handledSecurityCodes=y,this._currentAuthData=w,this._refreshObservable=b}return d.prototype.getToken=function(){var v;return n(this,void 0,void 0,function(){return i(this,function(y){switch(y.label){case 0:return this._currentAuthData===void 0||this._currentAuthData.expiration!==void 0&&this._currentAuthData.expiration<new Date?[4,this._refreshAuthToken()]:[3,2];case 1:y.sent(),y.label=2;case 2:return[2,(v=this._currentAuthData)===null||v===void 0?void 0:v.token]}})})},d.prototype.handleSecurityException=function(v,y){var w;return!!this._handledSecurityCodes.includes(y)&&(s.util.equals(v,(w=this._currentAuthData)===null||w===void 0?void 0:w.token)&&this._scheduleRefreshAuthToken(),!0)},d.prototype._scheduleRefreshAuthToken=function(v){var y=this;this._refreshObservable===void 0&&(this._currentAuthData=void 0,this._refreshObservable=new c,Promise.resolve(this._tokenProvider()).then(function(w){var b;y._currentAuthData=w,(b=y._refreshObservable)===null||b===void 0||b.onCompleted(w)}).catch(function(w){var b;(b=y._refreshObservable)===null||b===void 0||b.onError(w)}).finally(function(){y._refreshObservable=void 0})),v!==void 0&&this._refreshObservable.subscribe(v)},d.prototype._refreshAuthToken=function(){return n(this,void 0,void 0,function(){var v=this;return i(this,function(y){switch(y.label){case 0:return[4,new Promise(function(w,b){v._scheduleRefreshAuthToken({onCompleted:w,onError:b})})];case 1:return[2,y.sent()]}})})},d}(),h=function(){function d(v){this._authToken=v}return d.prototype.getToken=function(){return this._authToken},d.prototype.handleSecurityException=function(v,y){return!1},d}()},1967:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var t={basic:function(i,a,o){return o!=null?{scheme:"basic",principal:i,credentials:a,realm:o}:{scheme:"basic",principal:i,credentials:a}},kerberos:function(i){return{scheme:"kerberos",principal:"",credentials:i}},bearer:function(i){return{scheme:"bearer",credentials:i}},none:function(){return{scheme:"none"}},custom:function(i,a,o,s,u){var l={scheme:s,principal:i};return n(a)&&(l.credentials=a),n(o)&&(l.realm=o),n(u)&&(l.parameters=u),l}};function n(i){return!(i==null||i===""||Object.getPrototypeOf(i)===Object.prototype&&Object.keys(i).length===0)}e.default=t},6755:function(r,e){var t=this&&this.__awaiter||function(l,c,f,h){return new(f||(f=Promise))(function(d,v){function y(p){try{b(h.next(p))}catch(m){v(m)}}function w(p){try{b(h.throw(p))}catch(m){v(m)}}function b(p){var m;p.done?d(p.value):(m=p.value,m instanceof f?m:new f(function(x){x(m)})).then(y,w)}b((h=h.apply(l,c||[])).next())})},n=this&&this.__generator||function(l,c){var f,h,d,v,y={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return v={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function w(b){return function(p){return function(m){if(f)throw new TypeError("Generator is already executing.");for(;v&&(v=0,m[0]&&(y=0)),y;)try{if(f=1,h&&(d=2&m[0]?h.return:m[0]?h.throw||((d=h.return)&&d.call(h),0):h.next)&&!(d=d.call(h,m[1])).done)return d;switch(h=0,d&&(m=[2&m[0],d.value]),m[0]){case 0:case 1:d=m;break;case 4:return y.label++,{value:m[1],done:!1};case 5:y.label++,h=m[1],m=[0];continue;case 7:m=y.ops.pop(),y.trys.pop();continue;default:if(!((d=(d=y.trys).length>0&&d[d.length-1])||m[0]!==6&&m[0]!==2)){y=0;continue}if(m[0]===3&&(!d||m[1]>d[0]&&m[1]<d[3])){y.label=m[1];break}if(m[0]===6&&y.label<d[1]){y.label=d[1],d=m;break}if(d&&y.label<d[2]){y.label=d[2],y.ops.push(m);break}d[2]&&y.ops.pop(),y.trys.pop();continue}m=c.call(l,y)}catch(x){m=[6,x],h=0}finally{f=d=0}if(5&m[0])throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}([b,p])}}},i=this&&this.__values||function(l){var c=typeof Symbol=="function"&&Symbol.iterator,f=c&&l[c],h=0;if(f)return f.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&h>=l.length&&(l=void 0),{value:l&&l[h++],done:!l}}};throw new TypeError(c?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(l,c){var f=typeof Symbol=="function"&&l[Symbol.iterator];if(!f)return l;var h,d,v=f.call(l),y=[];try{for(;(c===void 0||c-- >0)&&!(h=v.next()).done;)y.push(h.value)}catch(w){d={error:w}}finally{try{h&&!h.done&&(f=v.return)&&f.call(v)}finally{if(d)throw d.error}}return y},o=this&&this.__spreadArray||function(l,c,f){if(f||arguments.length===2)for(var h,d=0,v=c.length;d<v;d++)!h&&d in c||(h||(h=Array.prototype.slice.call(c,0,d)),h[d]=c[d]);return l.concat(h||Array.prototype.slice.call(c))};Object.defineProperty(e,"__esModule",{value:!0}),e.bookmarkManager=void 0;var s=function(){function l(){throw new Error("Not implemented")}return l.prototype.updateBookmarks=function(c,f){return t(this,void 0,void 0,function(){return n(this,function(h){throw new Error("Not implemented")})})},l.prototype.getBookmarks=function(){return t(this,void 0,void 0,function(){return n(this,function(c){throw new Error("Not implemented")})})},l}();e.default=s,e.bookmarkManager=function(l){l===void 0&&(l={});var c=new Set(l.initialBookmarks);return new u(c,l.bookmarksSupplier,l.bookmarksConsumer)};var u=function(){function l(c,f,h){this._bookmarks=c,this._bookmarksSupplier=f,this._bookmarksConsumer=h}return l.prototype.updateBookmarks=function(c,f){return t(this,void 0,void 0,function(){var h,d,v,y,w,b,p,m,x,T;return n(this,function(P){switch(P.label){case 0:h=this._bookmarks;try{for(d=i(c),v=d.next();!v.done;v=d.next())b=v.value,h.delete(b)}catch(C){p={error:C}}finally{try{v&&!v.done&&(m=d.return)&&m.call(d)}finally{if(p)throw p.error}}try{for(y=i(f),w=y.next();!w.done;w=y.next())b=w.value,h.add(b)}catch(C){x={error:C}}finally{try{w&&!w.done&&(T=y.return)&&T.call(y)}finally{if(x)throw x.error}}return typeof this._bookmarksConsumer!="function"?[3,2]:[4,this._bookmarksConsumer(o([],a(h),!1))];case 1:P.sent(),P.label=2;case 2:return[2]}})})},l.prototype.getBookmarks=function(){var c;return t(this,void 0,void 0,function(){var f,h,d,v,y,w,b;return n(this,function(p){switch(p.label){case 0:return f=new Set(this._bookmarks),typeof this._bookmarksSupplier!="function"?[3,2]:[4,this._bookmarksSupplier()];case 1:h=(c=p.sent())!==null&&c!==void 0?c:[];try{for(d=i(h),v=d.next();!v.done;v=d.next())y=v.value,f.add(y)}catch(m){w={error:m}}finally{try{v&&!v.done&&(b=d.return)&&b.call(d)}finally{if(w)throw w.error}}p.label=2;case 2:return[2,o([],a(f),!1)]}})})},l}()},8264:function(r,e,t){var n,i=this&&this.__extends||(n=function(p,m){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,T){x.__proto__=T}||function(x,T){for(var P in T)Object.prototype.hasOwnProperty.call(T,P)&&(x[P]=T[P])},n(p,m)},function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function x(){this.constructor=p}n(p,m),p.prototype=m===null?Object.create(m):(x.prototype=m.prototype,new x)}),a=this&&this.__assign||function(){return a=Object.assign||function(p){for(var m,x=1,T=arguments.length;x<T;x++)for(var P in m=arguments[x])Object.prototype.hasOwnProperty.call(m,P)&&(p[P]=m[P]);return p},a.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(p,m,x,T){T===void 0&&(T=x);var P=Object.getOwnPropertyDescriptor(m,x);P&&!("get"in P?!m.__esModule:P.writable||P.configurable)||(P={enumerable:!0,get:function(){return m[x]}}),Object.defineProperty(p,T,P)}:function(p,m,x,T){T===void 0&&(T=x),p[T]=m[x]}),s=this&&this.__setModuleDefault||(Object.create?function(p,m){Object.defineProperty(p,"default",{enumerable:!0,value:m})}:function(p,m){p.default=m}),u=this&&this.__importStar||function(p){if(p&&p.__esModule)return p;var m={};if(p!=null)for(var x in p)x!=="default"&&Object.prototype.hasOwnProperty.call(p,x)&&o(m,p,x);return s(m,p),m};Object.defineProperty(e,"__esModule",{value:!0}),e.resolveCertificateProvider=e.clientCertificateProviders=e.RotatingClientCertificateProvider=e.ClientCertificateProvider=void 0;var l=u(t(4027));e.default=function(){this.certfile="",this.keyfile="",this.password=void 0};var c=function(){function p(){}return p.prototype.hasUpdate=function(){throw new Error("Not Implemented")},p.prototype.getClientCertificate=function(){throw new Error("Not Implemented")},p}();e.ClientCertificateProvider=c;var f=function(p){function m(){return p!==null&&p.apply(this,arguments)||this}return i(m,p),m.prototype.updateCertificate=function(x){throw new Error("Not implemented")},m}(c);e.RotatingClientCertificateProvider=f;var h=new(function(){function p(){}return p.prototype.rotating=function(m){var x=m.initialCertificate;if(x==null||!d(x))throw new TypeError("initialCertificate should be ClientCertificate, but got ".concat(l.stringify(x)));var T=a({},x);return new b(T)},p}());function d(p){return p!=null&&typeof p=="object"&&"certfile"in p&&(v(m=p.certfile)||y(m,v))&&"keyfile"in p&&function(x){function T(P){return typeof P=="string"||P!=null&&typeof P=="object"&&"path"in P&&typeof P.path=="string"&&w("password",P)}return T(x)||y(x,T)}(p.keyfile)&&w("password",p);var m}function v(p){return typeof p=="string"}function y(p,m,x){return x===void 0&&(x=!1),Array.isArray(p)&&(x||p.length>0)&&p.filter(m).length===p.length}function w(p,m){return!(p in m)||m[p]==null||typeof m[p]=="string"}e.clientCertificateProviders=h,Object.freeze(h),e.resolveCertificateProvider=function(p){if(p!=null){if(typeof p=="object"&&"hasUpdate"in p&&"getClientCertificate"in p&&typeof p.getClientCertificate=="function"&&typeof p.hasUpdate=="function")return p;if(d(p)){var m=a({},p);return{getClientCertificate:function(){return m},hasUpdate:function(){return!1}}}throw new TypeError("clientCertificate should be configured with ClientCertificate or ClientCertificateProvider, but got ".concat(l.stringify(p)))}};var b=function(){function p(m,x){x===void 0&&(x=!1),this._certificate=m,this._updated=x}return p.prototype.hasUpdate=function(){try{return this._updated}finally{this._updated=!1}},p.prototype.getClientCertificate=function(){return this._certificate},p.prototype.updateCertificate=function(m){if(!d(m))throw new TypeError("certificate should be ClientCertificate, but got ".concat(l.stringify(m)));this._certificate=a({},m),this._updated=!0},p}()},2007:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Releasable=void 0;var t=function(){function i(){}return i.prototype.release=function(){throw new Error("Not implemented")},i}();e.Releasable=t;var n=function(){function i(){}return i.prototype.acquireConnection=function(a){throw Error("Not implemented")},i.prototype.supportsMultiDb=function(){throw Error("Not implemented")},i.prototype.supportsTransactionConfig=function(){throw Error("Not implemented")},i.prototype.supportsUserImpersonation=function(){throw Error("Not implemented")},i.prototype.supportsSessionAuth=function(){throw Error("Not implemented")},i.prototype.verifyConnectivityAndGetServerInfo=function(a){throw Error("Not implemented")},i.prototype.verifyAuthentication=function(a){throw Error("Not implemented")},i.prototype.getNegotiatedProtocolVersion=function(){throw Error("Not Implemented")},i.prototype.close=function(){throw Error("Not implemented")},i}();e.default=n},1409:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function n(){}return n.prototype.beginTransaction=function(i){throw new Error("Not implemented")},n.prototype.run=function(i,a,o){throw new Error("Not implemented")},n.prototype.commitTransaction=function(i){throw new Error("Not implemented")},n.prototype.rollbackTransaction=function(i){throw new Error("Not implemented")},n.prototype.resetAndFlush=function(){throw new Error("Not implemented")},n.prototype.isOpen=function(){throw new Error("Not implemented")},n.prototype.getProtocolVersion=function(){throw new Error("Not implemented")},n.prototype.hasOngoingObservableRequests=function(){throw new Error("Not implemented")},n}();e.default=t},7264:function(r,e,t){var n=this&&this.__awaiter||function(C,R,D,N){return new(D||(D=Promise))(function(j,B){function z(Q){try{Z(N.next(Q))}catch(re){B(re)}}function W(Q){try{Z(N.throw(Q))}catch(re){B(re)}}function Z(Q){var re;Q.done?j(Q.value):(re=Q.value,re instanceof D?re:new D(function(ee){ee(re)})).then(z,W)}Z((N=N.apply(C,R||[])).next())})},i=this&&this.__generator||function(C,R){var D,N,j,B,z={label:0,sent:function(){if(1&j[0])throw j[1];return j[1]},trys:[],ops:[]};return B={next:W(0),throw:W(1),return:W(2)},typeof Symbol=="function"&&(B[Symbol.iterator]=function(){return this}),B;function W(Z){return function(Q){return function(re){if(D)throw new TypeError("Generator is already executing.");for(;B&&(B=0,re[0]&&(z=0)),z;)try{if(D=1,N&&(j=2&re[0]?N.return:re[0]?N.throw||((j=N.return)&&j.call(N),0):N.next)&&!(j=j.call(N,re[1])).done)return j;switch(N=0,j&&(re=[2&re[0],j.value]),re[0]){case 0:case 1:j=re;break;case 4:return z.label++,{value:re[1],done:!1};case 5:z.label++,N=re[1],re=[0];continue;case 7:re=z.ops.pop(),z.trys.pop();continue;default:if(!((j=(j=z.trys).length>0&&j[j.length-1])||re[0]!==6&&re[0]!==2)){z=0;continue}if(re[0]===3&&(!j||re[1]>j[0]&&re[1]<j[3])){z.label=re[1];break}if(re[0]===6&&z.label<j[1]){z.label=j[1],j=re;break}if(j&&z.label<j[2]){z.label=j[2],z.ops.push(re);break}j[2]&&z.ops.pop(),z.trys.pop();continue}re=R.call(C,z)}catch(ee){re=[6,ee],N=0}finally{D=j=0}if(5&re[0])throw re[1];return{value:re[0]?re[1]:void 0,done:!0}}([Z,Q])}}},a=this&&this.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(e,"__esModule",{value:!0}),e.QueryConfig=e.SessionConfig=e.routing=e.WRITE=e.READ=e.Driver=void 0;var o=t(9730),s=a(t(8341)),u=t(326),l=t(4883),c=a(t(5481)),f=t(6587),h=t(6755),d=a(t(1573)),v=a(t(7041)),y=t(9691),w=u.ACCESS_MODE_READ;e.READ=w;var b=u.ACCESS_MODE_WRITE;e.WRITE=b;var p=0;e.SessionConfig=function(){this.defaultAccessMode=b,this.bookmarks=[],this.database="",this.impersonatedUser=void 0,this.auth=void 0,this.fetchSize=void 0,this.bookmarkManager=void 0,this.notificationFilter=void 0};var m={WRITE:"WRITE",READ:"READ"};e.routing=m,Object.freeze(m),e.QueryConfig=function(){this.routing=m.WRITE,this.resultTransformer=void 0,this.database="",this.impersonatedUser=void 0,this.bookmarkManager=void 0,this.transactionConfig=void 0,this.auth=void 0,this.signal=void 0};var x=function(){function C(R,D,N,j,B){D===void 0&&(D={}),j===void 0&&(j=function(W){return new c.default(W)}),B===void 0&&(B=function(W){return new v.default(W)}),function(W){W.maxConnectionLifetime=T(W.maxConnectionLifetime,36e5),W.maxConnectionPoolSize=T(W.maxConnectionPoolSize,u.DEFAULT_POOL_MAX_SIZE),W.connectionAcquisitionTimeout=T(W.connectionAcquisitionTimeout,u.DEFAULT_POOL_ACQUISITION_TIMEOUT),W.fetchSize=P(W.fetchSize,1e3),W.connectionTimeout=function(Z){var Q=parseInt(Z.connectionTimeout,10);return Q===0||!isNaN(Q)&&Q<0?null:isNaN(Q)?u.DEFAULT_CONNECTION_TIMEOUT_MILLIS:Q}(W),W.connectionLivenessCheckTimeout=function(Z){if(Z!=null){var Q=parseInt(Z,10);if(Q<0||Number.isNaN(Q))throw new Error("The connectionLivenessCheckTimeout can only be a positive value or 0 for always. However connectionLivenessCheckTimeout = ".concat(Q));return Q}}(W.connectionLivenessCheckTimeout)}(D);var z=l.Logger.create(D);(function(W,Z){var Q,re,ee=W.resolver;if(ee!=null&&typeof ee!="function")throw new TypeError("Configured resolver should be a function. Got: ".concat(typeof ee));if(W.connectionAcquisitionTimeout<W.connectionTimeout&&Z.warn('Configuration for "connectionAcquisitionTimeout" should be greater than or equal to "connectionTimeout". Otherwise, the connection acquisition timeout will take precedence for over the connection timeout in scenarios where a new connection is created while it is acquired'),((Q=W.notificationFilter)===null||Q===void 0?void 0:Q.disabledCategories)!=null&&((re=W.notificationFilter)===null||re===void 0?void 0:re.disabledClassifications)!=null)throw new Error(`The notificationFilter can't have both "disabledCategories" and  "disabledClassifications" configured at the same time.`)})(D,z),this._id=p++,this._meta=R,this._config=D,this._log=z,this._createConnectionProvider=N,this._createSession=j,this._defaultExecuteQueryBookmarkManager=(0,h.bookmarkManager)(),this._queryExecutor=B(this.session.bind(this)),this._connectionProvider=null,this._afterConstruction()}return Object.defineProperty(C.prototype,"executeQueryBookmarkManager",{get:function(){return this._defaultExecuteQueryBookmarkManager},enumerable:!1,configurable:!0}),C.prototype.executeQuery=function(R,D,N){var j,B,z;return N===void 0&&(N={}),n(this,void 0,void 0,function(){var W,Z,Q;return i(this,function(re){switch(re.label){case 0:if(W=N.bookmarkManager===null?void 0:(j=N.bookmarkManager)!==null&&j!==void 0?j:this.executeQueryBookmarkManager,Z=(B=N.resultTransformer)!==null&&B!==void 0?B:d.default.eagerResultTransformer(),(Q=(z=N.routing)!==null&&z!==void 0?z:m.WRITE)!==m.READ&&Q!==m.WRITE)throw(0,y.newError)('Illegal query routing config: "'.concat(Q,'"'));return[4,this._queryExecutor.execute({resultTransformer:Z,bookmarkManager:W,routing:Q,database:N.database,impersonatedUser:N.impersonatedUser,transactionConfig:N.transactionConfig,auth:N.auth,signal:N.signal},R,D)];case 1:return[2,re.sent()]}})})},C.prototype.verifyConnectivity=function(R){var D=(R===void 0?{}:R).database,N=D===void 0?"":D;return this._getOrCreateConnectionProvider().verifyConnectivityAndGetServerInfo({database:N,accessMode:w})},C.prototype.verifyAuthentication=function(R){var D=R===void 0?{}:R,N=D.database,j=D.auth;return n(this,void 0,void 0,function(){return i(this,function(B){switch(B.label){case 0:return[4,this._getOrCreateConnectionProvider().verifyAuthentication({database:N??"system",auth:j,accessMode:w})];case 1:return[2,B.sent()]}})})},C.prototype.getServerInfo=function(R){var D=(R===void 0?{}:R).database,N=D===void 0?"":D;return this._getOrCreateConnectionProvider().verifyConnectivityAndGetServerInfo({database:N,accessMode:w})},C.prototype.supportsMultiDb=function(){return this._getOrCreateConnectionProvider().supportsMultiDb()},C.prototype.supportsTransactionConfig=function(){return this._getOrCreateConnectionProvider().supportsTransactionConfig()},C.prototype.supportsUserImpersonation=function(){return this._getOrCreateConnectionProvider().supportsUserImpersonation()},C.prototype.supportsSessionAuth=function(){return this._getOrCreateConnectionProvider().supportsSessionAuth()},C.prototype.getNegotiatedProtocolVersion=function(){return this._getOrCreateConnectionProvider().getNegotiatedProtocolVersion()},C.prototype.isEncrypted=function(){return this._isEncrypted()},C.prototype._supportsRouting=function(){return this._meta.routing},C.prototype._isEncrypted=function(){return this._config.encrypted===f.ENCRYPTION_ON||this._config.encrypted===!0},C.prototype._getTrust=function(){return this._config.trust},C.prototype.session=function(R){var D=R===void 0?{}:R,N=D.defaultAccessMode,j=N===void 0?b:N,B=D.bookmarks,z=D.database,W=z===void 0?"":z,Z=D.impersonatedUser,Q=D.fetchSize,re=D.bookmarkManager,ee=D.notificationFilter,ue=D.auth;return this._newSession({defaultAccessMode:j,bookmarkOrBookmarks:B,database:W,reactive:!1,impersonatedUser:Z,fetchSize:P(Q,this._config.fetchSize),bookmarkManager:re,notificationFilter:ee,auth:ue})},C.prototype.close=function(){return this._log.info("Driver ".concat(this._id," closing")),this._connectionProvider!=null?this._connectionProvider.close():Promise.resolve()},C.prototype[Symbol.asyncDispose]=function(){return this.close()},C.prototype._afterConstruction=function(){this._log.info("".concat(this._meta.typename," driver ").concat(this._id," created for server address ").concat(this._meta.address.toString()))},C.prototype._newSession=function(R){var D=R.defaultAccessMode,N=R.bookmarkOrBookmarks,j=R.database,B=R.reactive,z=R.impersonatedUser,W=R.fetchSize,Z=R.bookmarkManager,Q=R.notificationFilter,re=R.auth,ee=c.default._validateSessionMode(D),ue=this._getOrCreateConnectionProvider(),de=N!=null?new o.Bookmarks(N):o.Bookmarks.empty();return this._createSession({mode:ee,database:j??"",connectionProvider:ue,bookmarks:de,config:this._config,reactive:B,impersonatedUser:z,fetchSize:W,bookmarkManager:Z,notificationFilter:Q,auth:re,log:this._log})},C.prototype._getOrCreateConnectionProvider=function(){var R;return this._connectionProvider==null&&(this._connectionProvider=this._createConnectionProvider(this._id,this._config,this._log,(R=this._config,new s.default(R.resolver)))),this._connectionProvider},C}();function T(C,R){var D=parseInt(C,10);return D>0||D===0?D:D<0?Number.MAX_SAFE_INTEGER:R}function P(C,R){var D=parseInt(C,10);if(D>0||D===u.FETCH_ALL)return D;if(D===0||D<0)throw new Error("The fetch size can only be a positive value or ".concat(u.FETCH_ALL," for ALL. However fetchSize = ").concat(D));return R}e.Driver=x,e.default=x},9691:function(r,e,t){var n,i=this&&this.__extends||(n=function(b,p){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,x){m.__proto__=x}||function(m,x){for(var T in x)Object.prototype.hasOwnProperty.call(x,T)&&(m[T]=x[T])},n(b,p)},function(b,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");function m(){this.constructor=b}n(b,p),b.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}),a=this&&this.__createBinding||(Object.create?function(b,p,m,x){x===void 0&&(x=m);var T=Object.getOwnPropertyDescriptor(p,m);T&&!("get"in T?!p.__esModule:T.writable||T.configurable)||(T={enumerable:!0,get:function(){return p[m]}}),Object.defineProperty(b,x,T)}:function(b,p,m,x){x===void 0&&(x=m),b[x]=p[m]}),o=this&&this.__setModuleDefault||(Object.create?function(b,p){Object.defineProperty(b,"default",{enumerable:!0,value:p})}:function(b,p){b.default=p}),s=this&&this.__importStar||function(b){if(b&&b.__esModule)return b;var p={};if(b!=null)for(var m in b)m!=="default"&&Object.prototype.hasOwnProperty.call(b,m)&&a(p,b,m);return o(p,b),p};Object.defineProperty(e,"__esModule",{value:!0}),e.PROTOCOL_ERROR=e.SESSION_EXPIRED=e.SERVICE_UNAVAILABLE=e.GQLError=e.Neo4jError=e.isRetriableError=e.newGQLError=e.newError=void 0;var u=s(t(4027)),l=t(1053),c={DATABASE_ERROR:"DATABASE_ERROR",CLIENT_ERROR:"CLIENT_ERROR",TRANSIENT_ERROR:"TRANSIENT_ERROR",UNKNOWN:"UNKNOWN"};Object.freeze(c);var f=Object.values(c),h="ServiceUnavailable";e.SERVICE_UNAVAILABLE=h;var d="SessionExpired";e.SESSION_EXPIRED=d,e.PROTOCOL_ERROR="ProtocolError";var v=function(b){function p(m,x,T,P,C){var R,D=this;return(D=b.call(this,m,C!=null?{cause:C}:void 0)||this).constructor=p,D.__proto__=p.prototype,D.cause=C??void 0,D.gqlStatus=x,D.gqlStatusDescription=T,D.diagnosticRecord=P,D.classification=function(N){return N===void 0||N._classification===void 0?"UNKNOWN":f.includes(N._classification)?N==null?void 0:N._classification:"UNKNOWN"}(D.diagnosticRecord),D.rawClassification=(R=P==null?void 0:P._classification)!==null&&R!==void 0?R:void 0,D.name="GQLError",D}return i(p,b),Object.defineProperty(p.prototype,"diagnosticRecordAsJsonString",{get:function(){return u.stringify(this.diagnosticRecord,{useCustomToString:!0})},enumerable:!1,configurable:!0}),p}(Error);e.GQLError=v;var y=function(b){function p(m,x,T,P,C,R){var D=b.call(this,m,T,P,C,R)||this;return D.constructor=p,D.__proto__=p.prototype,D.code=x,D.name="Neo4jError",D.retriable=function(N){return N===h||N===d||function(j){return j==="Neo.ClientError.Security.AuthorizationExpired"}(N)||function(j){return(j==null?void 0:j.includes("TransientError"))===!0}(N)}(x),D}return i(p,b),p.isRetriable=function(m){return m!=null&&m instanceof p&&m.retriable},p}(v);e.Neo4jError=y,e.newError=function(b,p,m,x,T,P){return new y(b,p??"N/A",x??"50N42",T??"error: general processing exception - unexpected error. "+b,P??l.rawPolyfilledDiagnosticRecord,m)},e.newGQLError=function(b,p,m,x,T){return new v(b,m??"50N42",x??"error: general processing exception - unexpected error. "+b,T??l.rawPolyfilledDiagnosticRecord,p)};var w=y.isRetriable;e.isRetriableError=w},1053:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.rawPolyfilledDiagnosticRecord=void 0,e.rawPolyfilledDiagnosticRecord={OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"},Object.freeze(e.rawPolyfilledDiagnosticRecord)},1517:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isPathSegment=e.PathSegment=e.isPath=e.Path=e.isUnboundRelationship=e.UnboundRelationship=e.isRelationship=e.Relationship=e.isNode=e.Node=void 0;var n=t(4027),i={value:!0,enumerable:!1,configurable:!1,writable:!1},a="__isNode__",o="__isRelationship__",s="__isUnboundRelationship__",u="__isPath__",l="__isPathSegment__";function c(b,p){return b!=null&&b[p]===!0}var f=function(){function b(p,m,x,T){this.identity=p,this.labels=m,this.properties=x,this.elementId=w(T,function(){return p.toString()})}return b.prototype.toString=function(){for(var p="("+this.elementId,m=0;m<this.labels.length;m++)p+=":"+this.labels[m];var x=Object.keys(this.properties);if(x.length>0){for(p+=" {",m=0;m<x.length;m++)m>0&&(p+=","),p+=x[m]+":"+(0,n.stringify)(this.properties[x[m]]);p+="}"}return p+")"},b}();e.Node=f,Object.defineProperty(f.prototype,a,i),e.isNode=function(b){return c(b,a)};var h=function(){function b(p,m,x,T,P,C,R,D){this.identity=p,this.start=m,this.end=x,this.type=T,this.properties=P,this.elementId=w(C,function(){return p.toString()}),this.startNodeElementId=w(R,function(){return m.toString()}),this.endNodeElementId=w(D,function(){return x.toString()})}return b.prototype.toString=function(){var p="("+this.startNodeElementId+")-[:"+this.type,m=Object.keys(this.properties);if(m.length>0){p+=" {";for(var x=0;x<m.length;x++)x>0&&(p+=","),p+=m[x]+":"+(0,n.stringify)(this.properties[m[x]]);p+="}"}return p+"]->("+this.endNodeElementId+")"},b}();e.Relationship=h,Object.defineProperty(h.prototype,o,i),e.isRelationship=function(b){return c(b,o)};var d=function(){function b(p,m,x,T){this.identity=p,this.type=m,this.properties=x,this.elementId=w(T,function(){return p.toString()})}return b.prototype.bind=function(p,m){return new h(this.identity,p,m,this.type,this.properties,this.elementId)},b.prototype.bindTo=function(p,m){return new h(this.identity,p.identity,m.identity,this.type,this.properties,this.elementId,p.elementId,m.elementId)},b.prototype.toString=function(){var p="-[:"+this.type,m=Object.keys(this.properties);if(m.length>0){p+=" {";for(var x=0;x<m.length;x++)x>0&&(p+=","),p+=m[x]+":"+(0,n.stringify)(this.properties[m[x]]);p+="}"}return p+"]->"},b}();e.UnboundRelationship=d,Object.defineProperty(d.prototype,s,i),e.isUnboundRelationship=function(b){return c(b,s)};var v=function(b,p,m){this.start=b,this.relationship=p,this.end=m};e.PathSegment=v,Object.defineProperty(v.prototype,l,i),e.isPathSegment=function(b){return c(b,l)};var y=function(b,p,m){this.start=b,this.end=p,this.segments=m,this.length=m.length};function w(b,p){return b??p()}e.Path=y,Object.defineProperty(y.prototype,u,i),e.isPath=function(b){return c(b,u)}},9305:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(se,me,Me,he){he===void 0&&(he=Me);var fe=Object.getOwnPropertyDescriptor(me,Me);fe&&!("get"in fe?!me.__esModule:fe.writable||fe.configurable)||(fe={enumerable:!0,get:function(){return me[Me]}}),Object.defineProperty(se,he,fe)}:function(se,me,Me,he){he===void 0&&(he=Me),se[he]=me[Me]}),i=this&&this.__setModuleDefault||(Object.create?function(se,me){Object.defineProperty(se,"default",{enumerable:!0,value:me})}:function(se,me){se.default=me}),a=this&&this.__importStar||function(se){if(se&&se.__esModule)return se;var me={};if(se!=null)for(var Me in se)Me!=="default"&&Object.prototype.hasOwnProperty.call(se,Me)&&n(me,se,Me);return i(me,se),me},o=this&&this.__importDefault||function(se){return se&&se.__esModule?se:{default:se}};Object.defineProperty(e,"__esModule",{value:!0}),e.EagerResult=e.Result=e.Stats=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.GqlStatusObject=e.Notification=e.ServerInfo=e.queryType=e.ResultSummary=e.Record=e.isPathSegment=e.PathSegment=e.isPath=e.Path=e.isUnboundRelationship=e.UnboundRelationship=e.isRelationship=e.Relationship=e.isNode=e.Node=e.Time=e.LocalTime=e.LocalDateTime=e.isTime=e.isLocalTime=e.isLocalDateTime=e.isDuration=e.isDateTime=e.isDate=e.Duration=e.DateTime=e.Date=e.Point=e.isPoint=e.internal=e.toString=e.toNumber=e.inSafeRange=e.isInt=e.int=e.Integer=e.error=e.isRetriableError=e.GQLError=e.newGQLError=e.Neo4jError=e.newError=e.authTokenManagers=void 0,e.resolveCertificateProvider=e.clientCertificateProviders=e.notificationFilterMinimumSeverityLevel=e.notificationFilterDisabledClassification=e.notificationFilterDisabledCategory=e.notificationSeverityLevel=e.notificationClassification=e.notificationCategory=e.resultTransformers=e.routing=e.staticAuthTokenManager=e.bookmarkManager=e.auth=e.json=e.driver=e.types=e.Driver=e.Session=e.TransactionPromise=e.ManagedTransaction=e.Transaction=e.Connection=e.Releasable=e.ConnectionProvider=void 0;var s=t(9691);Object.defineProperty(e,"newError",{enumerable:!0,get:function(){return s.newError}}),Object.defineProperty(e,"Neo4jError",{enumerable:!0,get:function(){return s.Neo4jError}}),Object.defineProperty(e,"newGQLError",{enumerable:!0,get:function(){return s.newGQLError}}),Object.defineProperty(e,"GQLError",{enumerable:!0,get:function(){return s.GQLError}}),Object.defineProperty(e,"isRetriableError",{enumerable:!0,get:function(){return s.isRetriableError}});var u=a(t(3371));e.Integer=u.default,Object.defineProperty(e,"int",{enumerable:!0,get:function(){return u.int}}),Object.defineProperty(e,"isInt",{enumerable:!0,get:function(){return u.isInt}}),Object.defineProperty(e,"inSafeRange",{enumerable:!0,get:function(){return u.inSafeRange}}),Object.defineProperty(e,"toNumber",{enumerable:!0,get:function(){return u.toNumber}}),Object.defineProperty(e,"toString",{enumerable:!0,get:function(){return u.toString}});var l=t(5459);Object.defineProperty(e,"Date",{enumerable:!0,get:function(){return l.Date}}),Object.defineProperty(e,"DateTime",{enumerable:!0,get:function(){return l.DateTime}}),Object.defineProperty(e,"Duration",{enumerable:!0,get:function(){return l.Duration}}),Object.defineProperty(e,"isDate",{enumerable:!0,get:function(){return l.isDate}}),Object.defineProperty(e,"isDateTime",{enumerable:!0,get:function(){return l.isDateTime}}),Object.defineProperty(e,"isDuration",{enumerable:!0,get:function(){return l.isDuration}}),Object.defineProperty(e,"isLocalDateTime",{enumerable:!0,get:function(){return l.isLocalDateTime}}),Object.defineProperty(e,"isLocalTime",{enumerable:!0,get:function(){return l.isLocalTime}}),Object.defineProperty(e,"isTime",{enumerable:!0,get:function(){return l.isTime}}),Object.defineProperty(e,"LocalDateTime",{enumerable:!0,get:function(){return l.LocalDateTime}}),Object.defineProperty(e,"LocalTime",{enumerable:!0,get:function(){return l.LocalTime}}),Object.defineProperty(e,"Time",{enumerable:!0,get:function(){return l.Time}});var c=t(1517);Object.defineProperty(e,"Node",{enumerable:!0,get:function(){return c.Node}}),Object.defineProperty(e,"isNode",{enumerable:!0,get:function(){return c.isNode}}),Object.defineProperty(e,"Relationship",{enumerable:!0,get:function(){return c.Relationship}}),Object.defineProperty(e,"isRelationship",{enumerable:!0,get:function(){return c.isRelationship}}),Object.defineProperty(e,"UnboundRelationship",{enumerable:!0,get:function(){return c.UnboundRelationship}}),Object.defineProperty(e,"isUnboundRelationship",{enumerable:!0,get:function(){return c.isUnboundRelationship}}),Object.defineProperty(e,"Path",{enumerable:!0,get:function(){return c.Path}}),Object.defineProperty(e,"isPath",{enumerable:!0,get:function(){return c.isPath}}),Object.defineProperty(e,"PathSegment",{enumerable:!0,get:function(){return c.PathSegment}}),Object.defineProperty(e,"isPathSegment",{enumerable:!0,get:function(){return c.isPathSegment}});var f=o(t(4820));e.Record=f.default;var h=t(7093);Object.defineProperty(e,"isPoint",{enumerable:!0,get:function(){return h.isPoint}}),Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return h.Point}});var d=a(t(6033));e.ResultSummary=d.default,Object.defineProperty(e,"queryType",{enumerable:!0,get:function(){return d.queryType}}),Object.defineProperty(e,"ServerInfo",{enumerable:!0,get:function(){return d.ServerInfo}}),Object.defineProperty(e,"Plan",{enumerable:!0,get:function(){return d.Plan}}),Object.defineProperty(e,"ProfiledPlan",{enumerable:!0,get:function(){return d.ProfiledPlan}}),Object.defineProperty(e,"QueryStatistics",{enumerable:!0,get:function(){return d.QueryStatistics}}),Object.defineProperty(e,"Stats",{enumerable:!0,get:function(){return d.Stats}});var v=a(t(1866));e.Notification=v.default,Object.defineProperty(e,"GqlStatusObject",{enumerable:!0,get:function(){return v.GqlStatusObject}}),Object.defineProperty(e,"notificationCategory",{enumerable:!0,get:function(){return v.notificationCategory}}),Object.defineProperty(e,"notificationClassification",{enumerable:!0,get:function(){return v.notificationClassification}}),Object.defineProperty(e,"notificationSeverityLevel",{enumerable:!0,get:function(){return v.notificationSeverityLevel}});var y=t(1985);Object.defineProperty(e,"notificationFilterDisabledCategory",{enumerable:!0,get:function(){return y.notificationFilterDisabledCategory}}),Object.defineProperty(e,"notificationFilterDisabledClassification",{enumerable:!0,get:function(){return y.notificationFilterDisabledClassification}}),Object.defineProperty(e,"notificationFilterMinimumSeverityLevel",{enumerable:!0,get:function(){return y.notificationFilterMinimumSeverityLevel}});var w=o(t(9512));e.Result=w.default;var b=o(t(8917));e.EagerResult=b.default;var p=a(t(2007));e.ConnectionProvider=p.default,Object.defineProperty(e,"Releasable",{enumerable:!0,get:function(){return p.Releasable}});var m=o(t(1409));e.Connection=m.default;var x=o(t(9473));e.Transaction=x.default;var T=o(t(5909));e.ManagedTransaction=T.default;var P=o(t(4569));e.TransactionPromise=P.default;var C=o(t(5481));e.Session=C.default;var R=a(t(7264)),D=R;e.Driver=R.default,e.driver=D;var N=o(t(1967));e.auth=N.default;var j=t(6755);Object.defineProperty(e,"bookmarkManager",{enumerable:!0,get:function(){return j.bookmarkManager}});var B=t(2069);Object.defineProperty(e,"authTokenManagers",{enumerable:!0,get:function(){return B.authTokenManagers}}),Object.defineProperty(e,"staticAuthTokenManager",{enumerable:!0,get:function(){return B.staticAuthTokenManager}});var z=t(7264);Object.defineProperty(e,"routing",{enumerable:!0,get:function(){return z.routing}});var W=a(t(6872));e.types=W;var Z=a(t(4027));e.json=Z;var Q=o(t(1573));e.resultTransformers=Q.default;var re=t(8264);Object.defineProperty(e,"clientCertificateProviders",{enumerable:!0,get:function(){return re.clientCertificateProviders}}),Object.defineProperty(e,"resolveCertificateProvider",{enumerable:!0,get:function(){return re.resolveCertificateProvider}});var ee=a(t(6995));e.internal=ee;var ue={SERVICE_UNAVAILABLE:s.SERVICE_UNAVAILABLE,SESSION_EXPIRED:s.SESSION_EXPIRED,PROTOCOL_ERROR:s.PROTOCOL_ERROR};e.error=ue;var de={authTokenManagers:B.authTokenManagers,newError:s.newError,Neo4jError:s.Neo4jError,newGQLError:s.newGQLError,GQLError:s.GQLError,isRetriableError:s.isRetriableError,error:ue,Integer:u.default,int:u.int,isInt:u.isInt,inSafeRange:u.inSafeRange,toNumber:u.toNumber,toString:u.toString,internal:ee,isPoint:h.isPoint,Point:h.Point,Date:l.Date,DateTime:l.DateTime,Duration:l.Duration,isDate:l.isDate,isDateTime:l.isDateTime,isDuration:l.isDuration,isLocalDateTime:l.isLocalDateTime,isLocalTime:l.isLocalTime,isTime:l.isTime,LocalDateTime:l.LocalDateTime,LocalTime:l.LocalTime,Time:l.Time,Node:c.Node,isNode:c.isNode,Relationship:c.Relationship,isRelationship:c.isRelationship,UnboundRelationship:c.UnboundRelationship,isUnboundRelationship:c.isUnboundRelationship,Path:c.Path,isPath:c.isPath,PathSegment:c.PathSegment,isPathSegment:c.isPathSegment,Record:f.default,ResultSummary:d.default,queryType:d.queryType,ServerInfo:d.ServerInfo,Notification:v.default,GqlStatusObject:v.GqlStatusObject,Plan:d.Plan,ProfiledPlan:d.ProfiledPlan,QueryStatistics:d.QueryStatistics,Stats:d.Stats,Result:w.default,EagerResult:b.default,Transaction:x.default,ManagedTransaction:T.default,TransactionPromise:P.default,Session:C.default,Driver:R.default,Connection:m.default,Releasable:p.Releasable,types:W,driver:D,json:Z,auth:N.default,bookmarkManager:j.bookmarkManager,routing:z.routing,resultTransformers:Q.default,notificationCategory:v.notificationCategory,notificationClassification:v.notificationClassification,notificationSeverityLevel:v.notificationSeverityLevel,notificationFilterDisabledCategory:y.notificationFilterDisabledCategory,notificationFilterDisabledClassification:y.notificationFilterDisabledClassification,notificationFilterMinimumSeverityLevel:y.notificationFilterMinimumSeverityLevel,clientCertificateProviders:re.clientCertificateProviders,resolveCertificateProvider:re.resolveCertificateProvider};e.default=de},3371:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.toString=e.toNumber=e.inSafeRange=e.isInt=e.int=void 0;var n=t(9691),i=new Map,a=function(){function y(w,b){this.low=w??0,this.high=b??0}return y.prototype.inSafeRange=function(){return this.greaterThanOrEqual(y.MIN_SAFE_VALUE)&&this.lessThanOrEqual(y.MAX_SAFE_VALUE)},y.prototype.toInt=function(){return this.low},y.prototype.toNumber=function(){return this.high*s+(this.low>>>0)},y.prototype.toBigInt=function(){if(this.isZero())return BigInt(0);if(this.isPositive())return BigInt(this.high>>>0)*BigInt(s)+BigInt(this.low>>>0);var w=this.negate();return BigInt(-1)*(BigInt(w.high>>>0)*BigInt(s)+BigInt(w.low>>>0))},y.prototype.toNumberOrInfinity=function(){return this.lessThan(y.MIN_SAFE_VALUE)?Number.NEGATIVE_INFINITY:this.greaterThan(y.MAX_SAFE_VALUE)?Number.POSITIVE_INFINITY:this.toNumber()},y.prototype.toString=function(w){if((w=w??10)<2||w>36)throw RangeError("radix out of range: "+w.toString());if(this.isZero())return"0";var b;if(this.isNegative()){if(this.equals(y.MIN_VALUE)){var p=y.fromNumber(w),m=this.div(p);return b=m.multiply(p).subtract(this),m.toString(w)+b.toInt().toString(w)}return"-"+this.negate().toString(w)}var x=y.fromNumber(Math.pow(w,6));b=this;for(var T="";;){var P=b.div(x),C=(b.subtract(P.multiply(x)).toInt()>>>0).toString(w);if((b=P).isZero())return C+T;for(;C.length<6;)C="0"+C;T=""+C+T}},y.prototype.valueOf=function(){return this.toBigInt()},y.prototype.getHighBits=function(){return this.high},y.prototype.getLowBits=function(){return this.low},y.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(y.MIN_VALUE)?64:this.negate().getNumBitsAbs();var w=this.high!==0?this.high:this.low,b=0;for(b=31;b>0&&(w&1<<b)==0;b--);return this.high!==0?b+33:b+1},y.prototype.isZero=function(){return this.high===0&&this.low===0},y.prototype.isNegative=function(){return this.high<0},y.prototype.isPositive=function(){return this.high>=0},y.prototype.isOdd=function(){return(1&this.low)==1},y.prototype.isEven=function(){return(1&this.low)==0},y.prototype.equals=function(w){var b=y.fromValue(w);return this.high===b.high&&this.low===b.low},y.prototype.notEquals=function(w){return!this.equals(w)},y.prototype.lessThan=function(w){return this.compare(w)<0},y.prototype.lessThanOrEqual=function(w){return this.compare(w)<=0},y.prototype.greaterThan=function(w){return this.compare(w)>0},y.prototype.greaterThanOrEqual=function(w){return this.compare(w)>=0},y.prototype.compare=function(w){var b=y.fromValue(w);if(this.equals(b))return 0;var p=this.isNegative(),m=b.isNegative();return p&&!m?-1:!p&&m?1:this.subtract(b).isNegative()?-1:1},y.prototype.negate=function(){return this.equals(y.MIN_VALUE)?y.MIN_VALUE:this.not().add(y.ONE)},y.prototype.add=function(w){var b=y.fromValue(w),p=this.high>>>16,m=65535&this.high,x=this.low>>>16,T=65535&this.low,P=b.high>>>16,C=65535&b.high,R=b.low>>>16,D=0,N=0,j=0,B=0;return j+=(B+=T+(65535&b.low))>>>16,B&=65535,N+=(j+=x+R)>>>16,j&=65535,D+=(N+=m+C)>>>16,N&=65535,D+=p+P,D&=65535,y.fromBits(j<<16|B,D<<16|N)},y.prototype.subtract=function(w){var b=y.fromValue(w);return this.add(b.negate())},y.prototype.multiply=function(w){if(this.isZero())return y.ZERO;var b=y.fromValue(w);if(b.isZero())return y.ZERO;if(this.equals(y.MIN_VALUE))return b.isOdd()?y.MIN_VALUE:y.ZERO;if(b.equals(y.MIN_VALUE))return this.isOdd()?y.MIN_VALUE:y.ZERO;if(this.isNegative())return b.isNegative()?this.negate().multiply(b.negate()):this.negate().multiply(b).negate();if(b.isNegative())return this.multiply(b.negate()).negate();if(this.lessThan(l)&&b.lessThan(l))return y.fromNumber(this.toNumber()*b.toNumber());var p=this.high>>>16,m=65535&this.high,x=this.low>>>16,T=65535&this.low,P=b.high>>>16,C=65535&b.high,R=b.low>>>16,D=65535&b.low,N=0,j=0,B=0,z=0;return B+=(z+=T*D)>>>16,z&=65535,j+=(B+=x*D)>>>16,B&=65535,j+=(B+=T*R)>>>16,B&=65535,N+=(j+=m*D)>>>16,j&=65535,N+=(j+=x*R)>>>16,j&=65535,N+=(j+=T*C)>>>16,j&=65535,N+=p*D+m*R+x*C+T*P,N&=65535,y.fromBits(B<<16|z,N<<16|j)},y.prototype.div=function(w){var b,p,m,x=y.fromValue(w);if(x.isZero())throw(0,n.newError)("division by zero");if(this.isZero())return y.ZERO;if(this.equals(y.MIN_VALUE))return x.equals(y.ONE)||x.equals(y.NEG_ONE)?y.MIN_VALUE:x.equals(y.MIN_VALUE)?y.ONE:(b=this.shiftRight(1).div(x).shiftLeft(1)).equals(y.ZERO)?x.isNegative()?y.ONE:y.NEG_ONE:(p=this.subtract(x.multiply(b)),m=b.add(p.div(x)));if(x.equals(y.MIN_VALUE))return y.ZERO;if(this.isNegative())return x.isNegative()?this.negate().div(x.negate()):this.negate().div(x).negate();if(x.isNegative())return this.div(x.negate()).negate();for(m=y.ZERO,p=this;p.greaterThanOrEqual(x);){b=Math.max(1,Math.floor(p.toNumber()/x.toNumber()));for(var T=Math.ceil(Math.log(b)/Math.LN2),P=T<=48?1:Math.pow(2,T-48),C=y.fromNumber(b),R=C.multiply(x);R.isNegative()||R.greaterThan(p);)b-=P,R=(C=y.fromNumber(b)).multiply(x);C.isZero()&&(C=y.ONE),m=m.add(C),p=p.subtract(R)}return m},y.prototype.modulo=function(w){var b=y.fromValue(w);return this.subtract(this.div(b).multiply(b))},y.prototype.not=function(){return y.fromBits(~this.low,~this.high)},y.prototype.and=function(w){var b=y.fromValue(w);return y.fromBits(this.low&b.low,this.high&b.high)},y.prototype.or=function(w){var b=y.fromValue(w);return y.fromBits(this.low|b.low,this.high|b.high)},y.prototype.xor=function(w){var b=y.fromValue(w);return y.fromBits(this.low^b.low,this.high^b.high)},y.prototype.shiftLeft=function(w){var b=y.toNumber(w);return(b&=63)==0?y.ZERO:b<32?y.fromBits(this.low<<b,this.high<<b|this.low>>>32-b):y.fromBits(0,this.low<<b-32)},y.prototype.shiftRight=function(w){var b=y.toNumber(w),p=y.toNumber(w);return(b&=63)==0?y.ZERO:p<32?y.fromBits(this.low>>>b|this.high<<32-b,this.high>>b):y.fromBits(this.high>>b-32,this.high>=0?0:-1)},y.isInteger=function(w){return(w==null?void 0:w.__isInteger__)===!0},y.fromInt=function(w){var b;if((w|=0)>=-128&&w<128&&(b=i.get(w))!=null)return b;var p=new y(w,w<0?-1:0);return w>=-128&&w<128&&i.set(w,p),p},y.fromBits=function(w,b){return new y(w,b)},y.fromNumber=function(w){return isNaN(w)||!isFinite(w)?y.ZERO:w<=-u?y.MIN_VALUE:w+1>=u?y.MAX_VALUE:w<0?y.fromNumber(-w).negate():new y(w%s|0,w/s|0)},y.fromString=function(w,b,p){var m,x=(p===void 0?{}:p).strictStringValidation;if(w.length===0)throw(0,n.newError)("number format error: empty string");if(w==="NaN"||w==="Infinity"||w==="+Infinity"||w==="-Infinity")return y.ZERO;if((b=b??10)<2||b>36)throw(0,n.newError)("radix out of range: "+b.toString());if((m=w.indexOf("-"))>0)throw(0,n.newError)('number format error: interior "-" character: '+w);if(m===0)return y.fromString(w.substring(1),b).negate();for(var T=y.fromNumber(Math.pow(b,8)),P=y.ZERO,C=0;C<w.length;C+=8){var R=Math.min(8,w.length-C),D=w.substring(C,C+R),N=parseInt(D,b);if(x===!0&&!o(D,N,b))throw(0,n.newError)('number format error: "'.concat(D,'" is NaN in radix ').concat(b,": ").concat(w));if(R<8){var j=y.fromNumber(Math.pow(b,R));P=P.multiply(j).add(y.fromNumber(N))}else P=(P=P.multiply(T)).add(y.fromNumber(N))}return P},y.fromValue=function(w,b){return b===void 0&&(b={}),w instanceof y?w:typeof w=="number"?(b.ceilFloat===!0&&(w=Math.ceil(w)),y.fromNumber(w)):typeof w=="string"?y.fromString(w,void 0,b):typeof w=="bigint"?y.fromString(w.toString()):new y(w.low,w.high)},y.toNumber=function(w){switch(typeof w){case"number":return w;case"bigint":return Number(w);default:return y.fromValue(w).toNumber()}},y.toString=function(w,b){return y.fromValue(w).toString(b)},y.inSafeRange=function(w){return y.fromValue(w).inSafeRange()},y.ZERO=y.fromInt(0),y.ONE=y.fromInt(1),y.NEG_ONE=y.fromInt(-1),y.MAX_VALUE=y.fromBits(-1,2147483647),y.MIN_VALUE=y.fromBits(0,-2147483648),y.MIN_SAFE_VALUE=y.fromBits(1,-2097152),y.MAX_SAFE_VALUE=y.fromBits(-1,2097151),y.__isInteger__=!0,y}();function o(y,w,b){return!Number.isNaN(y)&&!Number.isNaN(w)&&function(p,m,x){var T=p.toString(m),P=Math.max(x-T.length,0),C="0".repeat(P);return"".concat(C).concat(T)}(w,b,y.length)===y.toLowerCase()}Object.defineProperty(a.prototype,"__isInteger__",{value:!0,enumerable:!1,configurable:!1});var s=4294967296,u=s*s/2,l=a.fromInt(1<<24),c=a.fromValue;e.int=c;var f=a.isInteger;e.isInt=f;var h=a.inSafeRange;e.inSafeRange=h;var d=a.toNumber;e.toNumber=d;var v=a.toString;e.toString=v,e.default=a},5837:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fromVersion=void 0,e.fromVersion=function(t,n){n===void 0&&(n=function(){return{get userAgent(){}}});var i=n(),a=i.userAgent!=null?i.userAgent.split("(")[1].split(")")[0]:void 0,o=i.userAgent||void 0;return{product:"neo4j-javascript/".concat(t),platform:a,languageDetails:o}}},3488:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);l&&!("get"in l?!o.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),i=this&&this.__exportStar||function(a,o){for(var s in a)s==="default"||Object.prototype.hasOwnProperty.call(o,s)||n(o,a,s)};Object.defineProperty(e,"__esModule",{value:!0}),i(t(5837),e)},9730:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(h,d,v,y){y===void 0&&(y=v);var w=Object.getOwnPropertyDescriptor(d,v);w&&!("get"in w?!d.__esModule:w.writable||w.configurable)||(w={enumerable:!0,get:function(){return d[v]}}),Object.defineProperty(h,y,w)}:function(h,d,v,y){y===void 0&&(y=v),h[y]=d[v]}),i=this&&this.__setModuleDefault||(Object.create?function(h,d){Object.defineProperty(h,"default",{enumerable:!0,value:d})}:function(h,d){h.default=d}),a=this&&this.__importStar||function(h){if(h&&h.__esModule)return h;var d={};if(h!=null)for(var v in h)v!=="default"&&Object.prototype.hasOwnProperty.call(h,v)&&n(d,h,v);return i(d,h),d},o=this&&this.__read||function(h,d){var v=typeof Symbol=="function"&&h[Symbol.iterator];if(!v)return h;var y,w,b=v.call(h),p=[];try{for(;(d===void 0||d-- >0)&&!(y=b.next()).done;)p.push(y.value)}catch(m){w={error:m}}finally{try{y&&!y.done&&(v=b.return)&&v.call(b)}finally{if(w)throw w.error}}return p},s=this&&this.__spreadArray||function(h,d,v){if(v||arguments.length===2)for(var y,w=0,b=d.length;w<b;w++)!y&&w in d||(y||(y=Array.prototype.slice.call(d,0,w)),y[w]=d[w]);return h.concat(y||Array.prototype.slice.call(d))};Object.defineProperty(e,"__esModule",{value:!0}),e.Bookmarks=void 0;var u=a(t(6587)),l=function(){function h(d){this._values=function(v){if(v==null||v==="")return[];if(u.isString(v))return[v];if(Array.isArray(v)){for(var y=new Set,w=f(v),b=0;b<w.length;b++){var p=w[b];if(p!=null){if(!u.isString(p))throw new TypeError("Bookmark value should be a string, given: '".concat(p,"'"));y.add(p)}}return s([],o(y),!1)}throw new TypeError("Bookmarks should either be a string or a string array, given: '".concat(v,"'"))}(d)}return h.empty=function(){return c},h.prototype.isEmpty=function(){return this._values.length===0},h.prototype.values=function(){return this._values},h.prototype[Symbol.iterator]=function(){return this._values[Symbol.iterator]()},h.prototype.asBeginTransactionParameters=function(){var d;return this.isEmpty()?{}:((d={}).bookmarks=this._values,d)},h}();e.Bookmarks=l;var c=new l(null);function f(h){return h.reduce(function(d,v){return Array.isArray(v)?d.concat(f(v)):d.concat(v)},[])}},3618:function(r,e,t){var n,i=this&&this.__extends||(n=function(w,b){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var x in m)Object.prototype.hasOwnProperty.call(m,x)&&(p[x]=m[x])},n(w,b)},function(w,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function p(){this.constructor=w}n(w,b),w.prototype=b===null?Object.create(b):(p.prototype=b.prototype,new p)}),a=this&&this.__awaiter||function(w,b,p,m){return new(p||(p=Promise))(function(x,T){function P(D){try{R(m.next(D))}catch(N){T(N)}}function C(D){try{R(m.throw(D))}catch(N){T(N)}}function R(D){var N;D.done?x(D.value):(N=D.value,N instanceof p?N:new p(function(j){j(N)})).then(P,C)}R((m=m.apply(w,b||[])).next())})},o=this&&this.__generator||function(w,b){var p,m,x,T,P={label:0,sent:function(){if(1&x[0])throw x[1];return x[1]},trys:[],ops:[]};return T={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(T[Symbol.iterator]=function(){return this}),T;function C(R){return function(D){return function(N){if(p)throw new TypeError("Generator is already executing.");for(;T&&(T=0,N[0]&&(P=0)),P;)try{if(p=1,m&&(x=2&N[0]?m.return:N[0]?m.throw||((x=m.return)&&x.call(m),0):m.next)&&!(x=x.call(m,N[1])).done)return x;switch(m=0,x&&(N=[2&N[0],x.value]),N[0]){case 0:case 1:x=N;break;case 4:return P.label++,{value:N[1],done:!1};case 5:P.label++,m=N[1],N=[0];continue;case 7:N=P.ops.pop(),P.trys.pop();continue;default:if(!((x=(x=P.trys).length>0&&x[x.length-1])||N[0]!==6&&N[0]!==2)){P=0;continue}if(N[0]===3&&(!x||N[1]>x[0]&&N[1]<x[3])){P.label=N[1];break}if(N[0]===6&&P.label<x[1]){P.label=x[1],x=N;break}if(x&&P.label<x[2]){P.label=x[2],P.ops.push(N);break}x[2]&&P.ops.pop(),P.trys.pop();continue}N=b.call(w,P)}catch(j){N=[6,j],m=0}finally{p=x=0}if(5&N[0])throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}([R,D])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.EMPTY_CONNECTION_HOLDER=e.ReadOnlyConnectionHolder=e.ConnectionHolder=void 0;var s=t(9691),u=t(6587),l=t(326),c=t(9730),f=t(4883),h=function(){function w(b){var p=b.mode,m=b.database,x=m===void 0?"":m,T=b.bookmarks,P=b.connectionProvider,C=b.impersonatedUser,R=b.onDatabaseNameResolved,D=b.getConnectionAcquistionBookmarks,N=b.auth,j=b.log;this._mode=p??l.ACCESS_MODE_WRITE,this._closed=!1,this._database=x!=null?(0,u.assertString)(x,"database"):"",this._bookmarks=T??c.Bookmarks.empty(),this._connectionProvider=P,this._impersonatedUser=C,this._referenceCount=0,this._connectionPromise=Promise.resolve(null),this._onDatabaseNameResolved=R,this._auth=N,this._log=j,this._logError=this._logError.bind(this),this._getConnectionAcquistionBookmarks=D??function(){return Promise.resolve(c.Bookmarks.empty())}}return w.prototype.mode=function(){return this._mode},w.prototype.database=function(){return this._database},w.prototype.setDatabase=function(b){this._database=b},w.prototype.bookmarks=function(){return this._bookmarks},w.prototype.connectionProvider=function(){return this._connectionProvider},w.prototype.referenceCount=function(){return this._referenceCount},w.prototype.initializeConnection=function(){return this._referenceCount!==0||this._connectionProvider==null?(this._referenceCount++,!1):(this._connectionPromise=this._createConnectionPromise(this._connectionProvider),this._referenceCount++,!0)},w.prototype._createConnectionPromise=function(b){return a(this,void 0,void 0,function(){var p,m,x;return o(this,function(T){switch(T.label){case 0:return m=(p=b).acquireConnection,x={accessMode:this._mode,database:this._database},[4,this._getBookmarks()];case 1:return[4,m.apply(p,[(x.bookmarks=T.sent(),x.impersonatedUser=this._impersonatedUser,x.onDatabaseNameResolved=this._onDatabaseNameResolved,x.auth=this._auth,x)])];case 2:return[2,T.sent()]}})})},w.prototype._getBookmarks=function(){return a(this,void 0,void 0,function(){return o(this,function(b){switch(b.label){case 0:return[4,this._getConnectionAcquistionBookmarks()];case 1:return[2,b.sent()]}})})},w.prototype.getConnection=function(){return this._connectionPromise},w.prototype.releaseConnection=function(){return this._referenceCount===0?this._connectionPromise:(this._referenceCount--,this._referenceCount===0?this._releaseConnection():this._connectionPromise)},w.prototype.close=function(b){return this._closed=!0,this._referenceCount===0?this._connectionPromise:(this._referenceCount=0,this._releaseConnection(b))},w.prototype.log=function(){return this._log},w.prototype._releaseConnection=function(b){return this._connectionPromise=this._connectionPromise.then(function(p){return p!=null?p.isOpen()&&(p.hasOngoingObservableRequests()||b===!0)?p.resetAndFlush().catch(y).then(function(){return p.release().then(function(){return null})}):p.release().then(function(){return null}):Promise.resolve(null)}).catch(this._logError),this._connectionPromise},w.prototype._logError=function(b){return this._log.isWarnEnabled()&&this._log.warn("ConnectionHolder got an error while releasing the connection. Error ".concat(b,". Stacktrace: ").concat(b.stack)),null},w}();e.ConnectionHolder=h;var d=function(w){function b(p){var m=w.call(this,{mode:p.mode(),database:p.database(),bookmarks:p.bookmarks(),getConnectionAcquistionBookmarks:p._getConnectionAcquistionBookmarks,connectionProvider:p.connectionProvider(),log:p.log()})||this;return m._connectionHolder=p,m}return i(b,w),b.prototype.initializeConnection=function(){return this._connectionHolder.referenceCount()!==0},b.prototype.getConnection=function(){return this._connectionHolder.getConnection()},b.prototype.releaseConnection=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve(null)})},b.prototype.close=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve(null)})},b}(h);e.ReadOnlyConnectionHolder=d,e.default=d;var v=new(function(w){function b(){return w.call(this,{log:f.Logger.create({})})||this}return i(b,w),b.prototype.mode=function(){},b.prototype.database=function(){},b.prototype.initializeConnection=function(){return!0},b.prototype.getConnection=function(){return a(this,void 0,void 0,function(){return o(this,function(p){switch(p.label){case 0:return[4,Promise.reject((0,s.newError)("This connection holder does not serve connections"))];case 1:return[2,p.sent()]}})})},b.prototype.releaseConnection=function(){return a(this,void 0,void 0,function(){return o(this,function(p){switch(p.label){case 0:return[4,Promise.resolve(null)];case 1:return[2,p.sent()]}})})},b.prototype.close=function(){return a(this,void 0,void 0,function(){return o(this,function(p){switch(p.label){case 0:return[4,Promise.resolve(null)];case 1:return[2,p.sent()]}})})},b}(h));function y(w){return null}e.EMPTY_CONNECTION_HOLDER=v},326:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TELEMETRY_APIS=e.BOLT_PROTOCOL_V5_7=e.BOLT_PROTOCOL_V5_6=e.BOLT_PROTOCOL_V5_5=e.BOLT_PROTOCOL_V5_4=e.BOLT_PROTOCOL_V5_3=e.BOLT_PROTOCOL_V5_2=e.BOLT_PROTOCOL_V5_1=e.BOLT_PROTOCOL_V5_0=e.BOLT_PROTOCOL_V4_4=e.BOLT_PROTOCOL_V4_3=e.BOLT_PROTOCOL_V4_2=e.BOLT_PROTOCOL_V4_1=e.BOLT_PROTOCOL_V4_0=e.BOLT_PROTOCOL_V3=e.BOLT_PROTOCOL_V2=e.BOLT_PROTOCOL_V1=e.DEFAULT_POOL_MAX_SIZE=e.DEFAULT_POOL_ACQUISITION_TIMEOUT=e.DEFAULT_CONNECTION_TIMEOUT_MILLIS=e.ACCESS_MODE_WRITE=e.ACCESS_MODE_READ=e.FETCH_ALL=void 0,e.FETCH_ALL=-1,e.DEFAULT_POOL_ACQUISITION_TIMEOUT=6e4,e.DEFAULT_POOL_MAX_SIZE=100,e.DEFAULT_CONNECTION_TIMEOUT_MILLIS=3e4,e.ACCESS_MODE_READ="READ",e.ACCESS_MODE_WRITE="WRITE",e.BOLT_PROTOCOL_V1=1,e.BOLT_PROTOCOL_V2=2,e.BOLT_PROTOCOL_V3=3,e.BOLT_PROTOCOL_V4_0=4,e.BOLT_PROTOCOL_V4_1=4.1,e.BOLT_PROTOCOL_V4_2=4.2,e.BOLT_PROTOCOL_V4_3=4.3,e.BOLT_PROTOCOL_V4_4=4.4,e.BOLT_PROTOCOL_V5_0=5,e.BOLT_PROTOCOL_V5_1=5.1,e.BOLT_PROTOCOL_V5_2=5.2,e.BOLT_PROTOCOL_V5_3=5.3,e.BOLT_PROTOCOL_V5_4=5.4,e.BOLT_PROTOCOL_V5_5=5.5,e.BOLT_PROTOCOL_V5_6=5.6,e.BOLT_PROTOCOL_V5_7=5.7,e.TELEMETRY_APIS={MANAGED_TRANSACTION:0,UNMANAGED_TRANSACTION:1,AUTO_COMMIT_TRANSACTION:2,EXECUTE_QUERY:3}},6995:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(T,P,C,R){R===void 0&&(R=C);var D=Object.getOwnPropertyDescriptor(P,C);D&&!("get"in D?!P.__esModule:D.writable||D.configurable)||(D={enumerable:!0,get:function(){return P[C]}}),Object.defineProperty(T,R,D)}:function(T,P,C,R){R===void 0&&(R=C),T[R]=P[C]}),i=this&&this.__setModuleDefault||(Object.create?function(T,P){Object.defineProperty(T,"default",{enumerable:!0,value:P})}:function(T,P){T.default=P}),a=this&&this.__importStar||function(T){if(T&&T.__esModule)return T;var P={};if(T!=null)for(var C in T)C!=="default"&&Object.prototype.hasOwnProperty.call(T,C)&&n(P,T,C);return i(P,T),P};Object.defineProperty(e,"__esModule",{value:!0}),e.pool=e.boltAgent=e.objectUtil=e.resolver=e.serverAddress=e.urlUtil=e.logger=e.transactionExecutor=e.txConfig=e.connectionHolder=e.constants=e.bookmarks=e.observer=e.temporalUtil=e.util=void 0;var o=a(t(6587));e.util=o;var s=a(t(5022));e.temporalUtil=s;var u=a(t(2696));e.observer=u;var l=a(t(9730));e.bookmarks=l;var c=a(t(326));e.constants=c;var f=a(t(3618));e.connectionHolder=f;var h=a(t(754));e.txConfig=h;var d=a(t(6189));e.transactionExecutor=d;var v=a(t(4883));e.logger=v;var y=a(t(407));e.urlUtil=y;var w=a(t(7509));e.serverAddress=w;var b=a(t(9470));e.resolver=b;var p=a(t(93));e.objectUtil=p;var m=a(t(3488));e.boltAgent=m;var x=a(t(2906));e.pool=x},4883:function(r,e,t){var n,i,a=this&&this.__extends||(n=function(w,b){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var x in m)Object.prototype.hasOwnProperty.call(m,x)&&(p[x]=m[x])},n(w,b)},function(w,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function p(){this.constructor=w}n(w,b),w.prototype=b===null?Object.create(b):(p.prototype=b.prototype,new p)});Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=void 0;var o=t(9691),s="error",u="warn",l="info",c="debug",f=l,h=((i={})[s]=0,i[u]=1,i[l]=2,i[c]=3,i),d=function(){function w(b,p){this._level=b,this._loggerFunction=p}return w.create=function(b){if((b==null?void 0:b.logging)!=null){var p=b.logging,m=function(T){if((T==null?void 0:T.level)!=null){var P=T.level,C=h[P];if(C==null&&C!==0)throw(0,o.newError)("Illegal logging level: ".concat(P,". Supported levels are: ").concat(Object.keys(h).toString()));return P}return f}(p),x=function(T){var P,C;if((T==null?void 0:T.logger)!=null){var R=T.logger;if(R!=null&&typeof R=="function")return R}throw(0,o.newError)("Illegal logger function: ".concat((C=(P=T==null?void 0:T.logger)===null||P===void 0?void 0:P.toString())!==null&&C!==void 0?C:"undefined"))}(p);return new w(m,x)}return this.noOp()},w.noOp=function(){return v},w.prototype.isErrorEnabled=function(){return y(this._level,s)},w.prototype.error=function(b){this.isErrorEnabled()&&this._loggerFunction(s,b)},w.prototype.isWarnEnabled=function(){return y(this._level,u)},w.prototype.warn=function(b){this.isWarnEnabled()&&this._loggerFunction(u,b)},w.prototype.isInfoEnabled=function(){return y(this._level,l)},w.prototype.info=function(b){this.isInfoEnabled()&&this._loggerFunction(l,b)},w.prototype.isDebugEnabled=function(){return y(this._level,c)},w.prototype.debug=function(b){this.isDebugEnabled()&&this._loggerFunction(c,b)},w}();e.Logger=d;var v=new(function(w){function b(){return w.call(this,l,function(p,m){})||this}return a(b,w),b.prototype.isErrorEnabled=function(){return!1},b.prototype.error=function(p){},b.prototype.isWarnEnabled=function(){return!1},b.prototype.warn=function(p){},b.prototype.isInfoEnabled=function(){return!1},b.prototype.info=function(p){},b.prototype.isDebugEnabled=function(){return!1},b.prototype.debug=function(p){},b}(d));function y(w,b){return h[w]>=h[b]}},93:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getBrokenObjectReason=e.isBrokenObject=e.createBrokenObject=void 0;var t="__isBrokenObject__",n="__reason__";e.createBrokenObject=function(i,a){a===void 0&&(a={});var o=function(){throw i};return new Proxy(a,{get:function(s,u){return u===t||(u===n?i:void(u!=="toJSON"&&o()))},set:o,apply:o,construct:o,defineProperty:o,deleteProperty:o,getOwnPropertyDescriptor:o,getPrototypeOf:o,has:o,isExtensible:o,ownKeys:o,preventExtensions:o,setPrototypeOf:o})},e.isBrokenObject=function(i){return i!==null&&typeof i=="object"&&i[t]===!0},e.getBrokenObjectReason=function(i){return i[n]}},2696:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FailedObserver=e.CompletedObserver=void 0;var t=function(){function a(){}return a.prototype.subscribe=function(o){i(o,o.onKeys,[]),i(o,o.onCompleted,{})},a.prototype.cancel=function(){},a.prototype.pause=function(){},a.prototype.resume=function(){},a.prototype.prepareToHandleSingleResponse=function(){},a.prototype.markCompleted=function(){},a.prototype.onError=function(o){throw new Error("CompletedObserver not supposed to call onError",{cause:o})},a}();e.CompletedObserver=t;var n=function(){function a(o){var s=o.error,u=o.onError;this._error=s,this._beforeError=u,this._observers=[],this.onError(s)}return a.prototype.subscribe=function(o){i(o,o.onError,this._error),this._observers.push(o)},a.prototype.onError=function(o){i(this,this._beforeError,o),this._observers.forEach(function(s){return i(s,s.onError,o)})},a.prototype.cancel=function(){},a.prototype.pause=function(){},a.prototype.resume=function(){},a.prototype.markCompleted=function(){},a.prototype.prepareToHandleSingleResponse=function(){},a}();function i(a,o,s){o!=null&&o.bind(a)(s)}e.FailedObserver=n},2906:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(l,c,f,h){h===void 0&&(h=f);var d=Object.getOwnPropertyDescriptor(c,f);d&&!("get"in d?!c.__esModule:d.writable||d.configurable)||(d={enumerable:!0,get:function(){return c[f]}}),Object.defineProperty(l,h,d)}:function(l,c,f,h){h===void 0&&(h=f),l[h]=c[f]}),i=this&&this.__setModuleDefault||(Object.create?function(l,c){Object.defineProperty(l,"default",{enumerable:!0,value:c})}:function(l,c){l.default=c}),a=this&&this.__importStar||function(l){if(l&&l.__esModule)return l;var c={};if(l!=null)for(var f in l)f!=="default"&&Object.prototype.hasOwnProperty.call(l,f)&&n(c,l,f);return i(c,l),c},o=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_MAX_SIZE=e.DEFAULT_ACQUISITION_TIMEOUT=e.PoolConfig=e.Pool=void 0;var s=a(t(7589));e.PoolConfig=s.default,Object.defineProperty(e,"DEFAULT_ACQUISITION_TIMEOUT",{enumerable:!0,get:function(){return s.DEFAULT_ACQUISITION_TIMEOUT}}),Object.defineProperty(e,"DEFAULT_MAX_SIZE",{enumerable:!0,get:function(){return s.DEFAULT_MAX_SIZE}});var u=o(t(6842));e.Pool=u.default,e.default=u.default},7589:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_ACQUISITION_TIMEOUT=e.DEFAULT_MAX_SIZE=void 0;var t=100;e.DEFAULT_MAX_SIZE=t;var n=6e4;e.DEFAULT_ACQUISITION_TIMEOUT=n;var i=function(){function s(u,l){this.maxSize=a(u,t),this.acquisitionTimeout=a(l,n)}return s.defaultConfig=function(){return new s(t,n)},s.fromDriverConfig=function(u){return new s(o(u.maxConnectionPoolSize)?u.maxConnectionPoolSize:t,o(u.connectionAcquisitionTimeout)?u.connectionAcquisitionTimeout:n)},s}();function a(s,u){return o(s)?s:u}function o(s){return s===0||s!=null}e.default=i},6842:function(r,e,t){var n=this&&this.__awaiter||function(v,y,w,b){return new(w||(w=Promise))(function(p,m){function x(C){try{P(b.next(C))}catch(R){m(R)}}function T(C){try{P(b.throw(C))}catch(R){m(R)}}function P(C){var R;C.done?p(C.value):(R=C.value,R instanceof w?R:new w(function(D){D(R)})).then(x,T)}P((b=b.apply(v,y||[])).next())})},i=this&&this.__generator||function(v,y){var w,b,p,m,x={label:0,sent:function(){if(1&p[0])throw p[1];return p[1]},trys:[],ops:[]};return m={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function T(P){return function(C){return function(R){if(w)throw new TypeError("Generator is already executing.");for(;m&&(m=0,R[0]&&(x=0)),x;)try{if(w=1,b&&(p=2&R[0]?b.return:R[0]?b.throw||((p=b.return)&&p.call(b),0):b.next)&&!(p=p.call(b,R[1])).done)return p;switch(b=0,p&&(R=[2&R[0],p.value]),R[0]){case 0:case 1:p=R;break;case 4:return x.label++,{value:R[1],done:!1};case 5:x.label++,b=R[1],R=[0];continue;case 7:R=x.ops.pop(),x.trys.pop();continue;default:if(!((p=(p=x.trys).length>0&&p[p.length-1])||R[0]!==6&&R[0]!==2)){x=0;continue}if(R[0]===3&&(!p||R[1]>p[0]&&R[1]<p[3])){x.label=R[1];break}if(R[0]===6&&x.label<p[1]){x.label=p[1],p=R;break}if(p&&x.label<p[2]){x.label=p[2],x.ops.push(R);break}p[2]&&x.ops.pop(),x.trys.pop();continue}R=y.call(v,x)}catch(D){R=[6,D],b=0}finally{w=p=0}if(5&R[0])throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}([P,C])}}},a=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(e,"__esModule",{value:!0});var o=a(t(7589)),s=t(9691),u=t(4883),l=function(){function v(y){var w=y.create,b=w===void 0?function(re,ee,ue){return n(Q,void 0,void 0,function(){return i(this,function(de){switch(de.label){case 0:return[4,Promise.reject(new Error("Not implemented"))];case 1:return[2,de.sent()]}})})}:w,p=y.destroy,m=p===void 0?function(re){return n(Q,void 0,void 0,function(){return i(this,function(ee){switch(ee.label){case 0:return[4,Promise.resolve()];case 1:return[2,ee.sent()]}})})}:p,x=y.validateOnAcquire,T=x===void 0?function(re,ee){return!0}:x,P=y.validateOnRelease,C=P===void 0?function(re){return!0}:P,R=y.installIdleObserver,D=R===void 0?function(re,ee){}:R,N=y.removeIdleObserver,j=N===void 0?function(re){}:N,B=y.config,z=B===void 0?o.default.defaultConfig():B,W=y.log,Z=W===void 0?u.Logger.noOp():W,Q=this;this._create=b,this._destroy=m,this._validateOnAcquire=T,this._validateOnRelease=C,this._installIdleObserver=D,this._removeIdleObserver=j,this._maxSize=z.maxSize,this._acquisitionTimeout=z.acquisitionTimeout,this._pools={},this._pendingCreates={},this._acquireRequests={},this._activeResourceCounts={},this._release=this._release.bind(this),this._log=Z,this._closed=!1}return v.prototype.acquire=function(y,w,b){return n(this,void 0,void 0,function(){var p,m,x=this;return i(this,function(T){switch(T.label){case 0:return p=w.asKey(),(m=this._acquireRequests)[p]==null&&(m[p]=[]),[4,new Promise(function(P,C){var R=setTimeout(function(){var N=m[p];if(N!=null&&(m[p]=N.filter(function(z){return z!==D})),!D.isCompleted()){var j=x.activeResourceCount(w),B=x.has(w)?x._pools[p].length:0;D.reject((0,s.newError)("Connection acquisition timed out in ".concat(x._acquisitionTimeout," ms. Pool status: Active conn count = ").concat(j,", Idle conn count = ").concat(B,".")))}},x._acquisitionTimeout);typeof R=="object"&&R.unref();var D=new h(p,y,b,P,C,R,x._log);m[p].push(D),x._processPendingAcquireRequests(w)})];case 1:return[2,T.sent()]}})})},v.prototype.purge=function(y){return n(this,void 0,void 0,function(){return i(this,function(w){switch(w.label){case 0:return[4,this._purgeKey(y.asKey())];case 1:return[2,w.sent()]}})})},v.prototype.apply=function(y,w){var b=y.asKey();b in this._pools&&this._pools[b].apply(w)},v.prototype.close=function(){return n(this,void 0,void 0,function(){var y=this;return i(this,function(w){switch(w.label){case 0:return this._closed=!0,[4,Promise.all(Object.keys(this._pools).map(function(b){return n(y,void 0,void 0,function(){return i(this,function(p){switch(p.label){case 0:return[4,this._purgeKey(b)];case 1:return[2,p.sent()]}})})})).then()];case 1:return[2,w.sent()]}})})},v.prototype.keepAll=function(y){return n(this,void 0,void 0,function(){var w,b,p,m=this;return i(this,function(x){switch(x.label){case 0:return w=y.map(function(T){return T.asKey()}),b=Object.keys(this._pools),p=b.filter(function(T){return!w.includes(T)}),[4,Promise.all(p.map(function(T){return n(m,void 0,void 0,function(){return i(this,function(P){switch(P.label){case 0:return[4,this._purgeKey(T)];case 1:return[2,P.sent()]}})})})).then()];case 1:return[2,x.sent()]}})})},v.prototype.has=function(y){return y.asKey()in this._pools},v.prototype.activeResourceCount=function(y){var w;return(w=this._activeResourceCounts[y.asKey()])!==null&&w!==void 0?w:0},v.prototype._getOrInitializePoolFor=function(y){var w=this._pools[y];return w==null&&(w=new d,this._pools[y]=w,this._pendingCreates[y]=0),w},v.prototype._acquire=function(y,w,b){return n(this,void 0,void 0,function(){var p,m,x,T,P,C,R,D=this;return i(this,function(N){switch(N.label){case 0:if(this._closed)throw(0,s.newError)("Pool is closed, it is no more able to serve requests.");if(p=w.asKey(),m=this._getOrInitializePoolFor(p),b)return[3,10];N.label=1;case 1:if(!(m.length>0))return[3,10];if((x=m.pop())==null)return[3,1];c(p,this._activeResourceCounts),this._removeIdleObserver!=null&&this._removeIdleObserver(x),T=!1,N.label=2;case 2:return N.trys.push([2,4,,6]),[4,this._validateOnAcquire(y,x)];case 3:return T=N.sent(),[3,6];case 4:return P=N.sent(),f(p,this._activeResourceCounts),m.removeInUse(x),[4,this._destroy(x)];case 5:throw N.sent(),P;case 6:return T?(this._log.isDebugEnabled()&&this._log.debug("".concat(x," acquired from the pool ").concat(p)),[2,{resource:x,pool:m}]):[3,7];case 7:return f(p,this._activeResourceCounts),m.removeInUse(x),[4,this._destroy(x)];case 8:N.sent(),N.label=9;case 9:return[3,1];case 10:if(this._maxSize>0&&this.activeResourceCount(w)+this._pendingCreates[p]>=this._maxSize)return[2,{resource:null,pool:m}];this._pendingCreates[p]=this._pendingCreates[p]+1,N.label=11;case 11:return N.trys.push([11,,15,16]),this.activeResourceCount(w)+m.length>=this._maxSize&&b?(R=m.pop())==null?[3,13]:(this._removeIdleObserver!=null&&this._removeIdleObserver(R),m.removeInUse(R),[4,this._destroy(R)]):[3,13];case 12:N.sent(),N.label=13;case 13:return[4,this._create(y,w,function(j,B){return n(D,void 0,void 0,function(){return i(this,function(z){switch(z.label){case 0:return[4,this._release(j,B,m)];case 1:return[2,z.sent()]}})})})];case 14:return C=N.sent(),m.pushInUse(C),c(p,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug("".concat(C," created for the pool ").concat(p)),[3,16];case 15:return this._pendingCreates[p]=this._pendingCreates[p]-1,[7];case 16:return[2,{resource:C,pool:m}]}})})},v.prototype._release=function(y,w,b){return n(this,void 0,void 0,function(){var p,m=this;return i(this,function(x){switch(x.label){case 0:p=y.asKey(),x.label=1;case 1:return x.trys.push([1,,9,10]),b.isActive()?[4,this._validateOnRelease(w)]:[3,6];case 2:return x.sent()?[3,4]:(this._log.isDebugEnabled()&&this._log.debug("".concat(w," destroyed and can't be released to the pool ").concat(p," because it is not functional")),b.removeInUse(w),[4,this._destroy(w)]);case 3:return x.sent(),[3,5];case 4:this._installIdleObserver!=null&&this._installIdleObserver(w,{onError:function(T){m._log.debug("Idle connection ".concat(w," destroyed because of error: ").concat(T));var P=m._pools[p];P!=null&&(m._pools[p]=P.filter(function(C){return C!==w}),P.removeInUse(w)),m._destroy(w).catch(function(){})}}),b.push(w),this._log.isDebugEnabled()&&this._log.debug("".concat(w," released to the pool ").concat(p)),x.label=5;case 5:return[3,8];case 6:return this._log.isDebugEnabled()&&this._log.debug("".concat(w," destroyed and can't be released to the pool ").concat(p," because pool has been purged")),b.removeInUse(w),[4,this._destroy(w)];case 7:x.sent(),x.label=8;case 8:return[3,10];case 9:return f(p,this._activeResourceCounts),this._processPendingAcquireRequests(y),[7];case 10:return[2]}})})},v.prototype._purgeKey=function(y){return n(this,void 0,void 0,function(){var w,b,p;return i(this,function(m){switch(m.label){case 0:if(w=this._pools[y],b=[],w==null)return[3,2];for(;w.length>0;)(p=w.pop())!=null&&(this._removeIdleObserver!=null&&this._removeIdleObserver(p),b.push(this._destroy(p)));return w.close(),delete this._pools[y],[4,Promise.all(b)];case 1:m.sent(),m.label=2;case 2:return[2]}})})},v.prototype._processPendingAcquireRequests=function(y){var w=this,b=y.asKey(),p=this._acquireRequests[b];if(p!=null){var m=p.shift();m!=null?this._acquire(m.context,y,m.requireNew).catch(function(x){return m.reject(x),{resource:null,pool:null}}).then(function(x){var T=x.resource,P=x.pool;T!=null&&P!=null?m.isCompleted()?w._release(y,T,P).catch(function(C){w._log.isDebugEnabled()&&w._log.debug("".concat(T," could not be release back to the pool. Cause: ").concat(C))}):m.resolve(T):m.isCompleted()||(w._acquireRequests[b]==null&&(w._acquireRequests[b]=[]),w._acquireRequests[b].unshift(m))}).catch(function(x){return m.reject(x)}):delete this._acquireRequests[b]}},v}();function c(v,y){var w,b=(w=y[v])!==null&&w!==void 0?w:0;y[v]=b+1}function f(v,y){var w,b=((w=y[v])!==null&&w!==void 0?w:0)-1;b>0?y[v]=b:delete y[v]}var h=function(){function v(y,w,b,p,m,x,T){this._key=y,this._context=w,this._resolve=p,this._reject=m,this._timeoutId=x,this._log=T,this._completed=!1,this._config=b??{}}return Object.defineProperty(v.prototype,"context",{get:function(){return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"requireNew",{get:function(){var y;return(y=this._config.requireNew)!==null&&y!==void 0&&y},enumerable:!1,configurable:!0}),v.prototype.isCompleted=function(){return this._completed},v.prototype.resolve=function(y){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._log.isDebugEnabled()&&this._log.debug("".concat(y," acquired from the pool ").concat(this._key)),this._resolve(y))},v.prototype.reject=function(y){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._reject(y))},v}(),d=function(){function v(){this._active=!0,this._elements=[],this._elementsInUse=new Set}return v.prototype.isActive=function(){return this._active},v.prototype.close=function(){this._active=!1,this._elements=[],this._elementsInUse=new Set},v.prototype.filter=function(y){return this._elements=this._elements.filter(y),this},v.prototype.apply=function(y){this._elements.forEach(y),this._elementsInUse.forEach(y)},Object.defineProperty(v.prototype,"length",{get:function(){return this._elements.length},enumerable:!1,configurable:!0}),v.prototype.pop=function(){var y=this._elements.pop();return y!=null&&this._elementsInUse.add(y),y},v.prototype.push=function(y){return this._elementsInUse.delete(y),this._elements.push(y)},v.prototype.pushInUse=function(y){this._elementsInUse.add(y)},v.prototype.removeInUse=function(y){this._elementsInUse.delete(y)},v}();e.default=l},7041:function(r,e,t){var n=this&&this.__awaiter||function(s,u,l,c){return new(l||(l=Promise))(function(f,h){function d(w){try{y(c.next(w))}catch(b){h(b)}}function v(w){try{y(c.throw(w))}catch(b){h(b)}}function y(w){var b;w.done?f(w.value):(b=w.value,b instanceof l?b:new l(function(p){p(b)})).then(d,v)}y((c=c.apply(s,u||[])).next())})},i=this&&this.__generator||function(s,u){var l,c,f,h,d={label:0,sent:function(){if(1&f[0])throw f[1];return f[1]},trys:[],ops:[]};return h={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function v(y){return function(w){return function(b){if(l)throw new TypeError("Generator is already executing.");for(;h&&(h=0,b[0]&&(d=0)),d;)try{if(l=1,c&&(f=2&b[0]?c.return:b[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,b[1])).done)return f;switch(c=0,f&&(b=[2&b[0],f.value]),b[0]){case 0:case 1:f=b;break;case 4:return d.label++,{value:b[1],done:!1};case 5:d.label++,c=b[1],b=[0];continue;case 7:b=d.ops.pop(),d.trys.pop();continue;default:if(!((f=(f=d.trys).length>0&&f[f.length-1])||b[0]!==6&&b[0]!==2)){d=0;continue}if(b[0]===3&&(!f||b[1]>f[0]&&b[1]<f[3])){d.label=b[1];break}if(b[0]===6&&d.label<f[1]){d.label=f[1],f=b;break}if(f&&d.label<f[2]){d.label=f[2],d.ops.push(b);break}f[2]&&d.ops.pop(),d.trys.pop();continue}b=u.call(s,d)}catch(p){b=[6,p],c=0}finally{l=f=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}([y,w])}}};Object.defineProperty(e,"__esModule",{value:!0});var a=t(326),o=function(){function s(u){this._createSession=u}return s.prototype.execute=function(u,l,c){return n(this,void 0,void 0,function(){var f,h,d=this;return i(this,function(v){switch(v.label){case 0:f=this._createSession({database:u.database,bookmarkManager:u.bookmarkManager,impersonatedUser:u.impersonatedUser,auth:u.auth}),y=u.signal,w="abort",b=function(){return n(d,void 0,void 0,function(){return i(this,function(p){switch(p.label){case 0:return[4,f.close()];case 1:return[2,p.sent()]}})})},typeof(y==null?void 0:y.addEventListener)=="function"&&y.addEventListener(w,b),h={uninstall:function(){typeof(y==null?void 0:y.removeEventListener)=="function"&&y.removeEventListener(w,b)}},f._configureTransactionExecutor(!0,a.TELEMETRY_APIS.EXECUTE_QUERY),v.label=1;case 1:return v.trys.push([1,,3,5]),[4,(u.routing==="READ"?f.executeRead.bind(f):f.executeWrite.bind(f))(function(p){return n(d,void 0,void 0,function(){var m;return i(this,function(x){switch(x.label){case 0:return m=p.run(l,c),[4,u.resultTransformer(m)];case 1:return[2,x.sent()]}})})},u.transactionConfig)];case 2:return[2,v.sent()];case 3:return h.uninstall(),[4,f.close()];case 4:return v.sent(),[7];case 5:return[2]}var y,w,b})})},s}();e.default=o},3389:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function n(){}return n.prototype.resolve=function(){throw new Error("Abstract function")},n.prototype._resolveToItself=function(i){return Promise.resolve([i])},n}();e.default=t},8341:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=t(7509);function i(o){return Promise.resolve([o])}var a=function(){function o(s){this._resolverFunction=s??i}return o.prototype.resolve=function(s){var u=this;return new Promise(function(l){return l(u._resolverFunction(s.asHostPort()))}).then(function(l){if(!Array.isArray(l))throw new TypeError("Configured resolver function should either return an array of addresses or a Promise resolved with an array of addresses."+"Each address is '<host>:<port>'. Got: ".concat(l));return l.map(function(c){return n.ServerAddress.fromUrl(c)})})},o}();e.default=a},9470:function(r,e,t){var n=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0}),e.ConfiguredCustomResolver=e.BaseHostNameResolver=void 0;var i=n(t(3389));e.BaseHostNameResolver=i.default;var a=n(t(8341));e.ConfiguredCustomResolver=a.default},7509:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(l,c,f,h){h===void 0&&(h=f);var d=Object.getOwnPropertyDescriptor(c,f);d&&!("get"in d?!c.__esModule:d.writable||d.configurable)||(d={enumerable:!0,get:function(){return c[f]}}),Object.defineProperty(l,h,d)}:function(l,c,f,h){h===void 0&&(h=f),l[h]=c[f]}),i=this&&this.__setModuleDefault||(Object.create?function(l,c){Object.defineProperty(l,"default",{enumerable:!0,value:c})}:function(l,c){l.default=c}),a=this&&this.__importStar||function(l){if(l&&l.__esModule)return l;var c={};if(l!=null)for(var f in l)f!=="default"&&Object.prototype.hasOwnProperty.call(l,f)&&n(c,l,f);return i(c,l),c};Object.defineProperty(e,"__esModule",{value:!0}),e.ServerAddress=void 0;var o=t(6587),s=a(t(407)),u=function(){function l(c,f,h,d){this._host=(0,o.assertString)(c,"host"),this._resolved=f!=null?(0,o.assertString)(f,"resolved"):null,this._port=(0,o.assertNumber)(h,"port"),this._hostPort=d,this._stringValue=f!=null?"".concat(d,"(").concat(f,")"):"".concat(d)}return l.prototype.host=function(){return this._host},l.prototype.resolvedHost=function(){return this._resolved!=null?this._resolved:this._host},l.prototype.port=function(){return this._port},l.prototype.resolveWith=function(c){return new l(this._host,c,this._port,this._hostPort)},l.prototype.asHostPort=function(){return this._hostPort},l.prototype.asKey=function(){return this._hostPort},l.prototype.toString=function(){return this._stringValue},l.fromUrl=function(c){var f=s.parseDatabaseUrl(c);return new l(f.host,null,f.port,f.hostAndPort)},l}();e.ServerAddress=u},5022:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(p,m,x,T){T===void 0&&(T=x);var P=Object.getOwnPropertyDescriptor(m,x);P&&!("get"in P?!m.__esModule:P.writable||P.configurable)||(P={enumerable:!0,get:function(){return m[x]}}),Object.defineProperty(p,T,P)}:function(p,m,x,T){T===void 0&&(T=x),p[T]=m[x]}),i=this&&this.__setModuleDefault||(Object.create?function(p,m){Object.defineProperty(p,"default",{enumerable:!0,value:m})}:function(p,m){p.default=m}),a=this&&this.__importStar||function(p){if(p&&p.__esModule)return p;var m={};if(p!=null)for(var x in p)x!=="default"&&Object.prototype.hasOwnProperty.call(p,x)&&n(m,p,x);return i(m,p),m};Object.defineProperty(e,"__esModule",{value:!0}),e.floorMod=e.floorDiv=e.assertValidZoneId=e.assertValidNanosecond=e.assertValidSecond=e.assertValidMinute=e.assertValidHour=e.assertValidDay=e.assertValidMonth=e.assertValidYear=e.timeZoneOffsetInSeconds=e.totalNanoseconds=e.newDate=e.toStandardDate=e.isoStringToStandardDate=e.dateToIsoString=e.timeZoneOffsetToIsoString=e.timeToIsoString=e.durationToIsoString=e.dateToEpochDay=e.localDateTimeToEpochSecond=e.localTimeToNanoOfDay=e.normalizeNanosecondsForDuration=e.normalizeSecondsForDuration=e.SECONDS_PER_DAY=e.DAYS_PER_400_YEAR_CYCLE=e.DAYS_0000_TO_1970=e.NANOS_PER_HOUR=e.NANOS_PER_MINUTE=e.NANOS_PER_MILLISECOND=e.NANOS_PER_SECOND=e.SECONDS_PER_HOUR=e.SECONDS_PER_MINUTE=e.MINUTES_PER_HOUR=e.NANOSECOND_OF_SECOND_RANGE=e.SECOND_OF_MINUTE_RANGE=e.MINUTE_OF_HOUR_RANGE=e.HOUR_OF_DAY_RANGE=e.DAY_OF_MONTH_RANGE=e.MONTH_OF_YEAR_RANGE=e.YEAR_RANGE=void 0;var o=a(t(3371)),s=t(9691),u=t(6587),l=function(){function p(m,x){this._minNumber=m,this._maxNumber=x,this._minInteger=(0,o.int)(m),this._maxInteger=(0,o.int)(x)}return p.prototype.contains=function(m){if((0,o.isInt)(m)&&m instanceof o.default)return m.greaterThanOrEqual(this._minInteger)&&m.lessThanOrEqual(this._maxInteger);if(typeof m=="bigint"){var x=(0,o.int)(m);return x.greaterThanOrEqual(this._minInteger)&&x.lessThanOrEqual(this._maxInteger)}return m>=this._minNumber&&m<=this._maxNumber},p.prototype.toString=function(){return"[".concat(this._minNumber,", ").concat(this._maxNumber,"]")},p}();function c(p,m,x){p=(0,o.int)(p),m=(0,o.int)(m),x=(0,o.int)(x);var T=p.multiply(365);return T=(T=(T=p.greaterThanOrEqual(0)?T.add(p.add(3).div(4).subtract(p.add(99).div(100)).add(p.add(399).div(400))):T.subtract(p.div(-4).subtract(p.div(-100)).add(p.div(-400)))).add(m.multiply(367).subtract(362).div(12))).add(x.subtract(1)),m.greaterThan(2)&&(T=T.subtract(1),function(P){return!(!(P=(0,o.int)(P)).modulo(4).equals(0)||P.modulo(100).equals(0)&&!P.modulo(400).equals(0))}(p)||(T=T.subtract(1))),T.subtract(e.DAYS_0000_TO_1970)}e.YEAR_RANGE=new l(-999999999,999999999),e.MONTH_OF_YEAR_RANGE=new l(1,12),e.DAY_OF_MONTH_RANGE=new l(1,31),e.HOUR_OF_DAY_RANGE=new l(0,23),e.MINUTE_OF_HOUR_RANGE=new l(0,59),e.SECOND_OF_MINUTE_RANGE=new l(0,59),e.NANOSECOND_OF_SECOND_RANGE=new l(0,999999999),e.MINUTES_PER_HOUR=60,e.SECONDS_PER_MINUTE=60,e.SECONDS_PER_HOUR=e.SECONDS_PER_MINUTE*e.MINUTES_PER_HOUR,e.NANOS_PER_SECOND=1e9,e.NANOS_PER_MILLISECOND=1e6,e.NANOS_PER_MINUTE=e.NANOS_PER_SECOND*e.SECONDS_PER_MINUTE,e.NANOS_PER_HOUR=e.NANOS_PER_MINUTE*e.MINUTES_PER_HOUR,e.DAYS_0000_TO_1970=719528,e.DAYS_PER_400_YEAR_CYCLE=146097,e.SECONDS_PER_DAY=86400,e.normalizeSecondsForDuration=function(p,m){return(0,o.int)(p).add(v(m,e.NANOS_PER_SECOND))},e.normalizeNanosecondsForDuration=function(p){return y(p,e.NANOS_PER_SECOND)},e.localTimeToNanoOfDay=function(p,m,x,T){p=(0,o.int)(p),m=(0,o.int)(m),x=(0,o.int)(x),T=(0,o.int)(T);var P=p.multiply(e.NANOS_PER_HOUR);return(P=(P=P.add(m.multiply(e.NANOS_PER_MINUTE))).add(x.multiply(e.NANOS_PER_SECOND))).add(T)},e.localDateTimeToEpochSecond=function(p,m,x,T,P,C,R){var D=c(p,m,x),N=function(j,B,z){j=(0,o.int)(j),B=(0,o.int)(B),z=(0,o.int)(z);var W=j.multiply(e.SECONDS_PER_HOUR);return(W=W.add(B.multiply(e.SECONDS_PER_MINUTE))).add(z)}(T,P,C);return D.multiply(e.SECONDS_PER_DAY).add(N)},e.dateToEpochDay=c,e.durationToIsoString=function(p,m,x,T){var P=b(p),C=b(m),R=function(D,N){var j,B;D=(0,o.int)(D),N=(0,o.int)(N);var z=D.isNegative(),W=N.greaterThan(0);return j=z&&W?D.equals(-1)?"-0":D.add(1).toString():D.toString(),W&&(B=w(z?N.negate().add(2*e.NANOS_PER_SECOND).modulo(e.NANOS_PER_SECOND):N.add(e.NANOS_PER_SECOND).modulo(e.NANOS_PER_SECOND))),B!=null?j+B:j}(x,T);return"P".concat(P,"M").concat(C,"DT").concat(R,"S")},e.timeToIsoString=function(p,m,x,T){var P=b(p,2),C=b(m,2),R=b(x,2),D=w(T);return"".concat(P,":").concat(C,":").concat(R).concat(D)},e.timeZoneOffsetToIsoString=function(p){if((p=(0,o.int)(p)).equals(0))return"Z";var m=p.isNegative();m&&(p=p.multiply(-1));var x=m?"-":"+",T=b(p.div(e.SECONDS_PER_HOUR),2),P=b(p.div(e.SECONDS_PER_MINUTE).modulo(e.MINUTES_PER_HOUR),2),C=p.modulo(e.SECONDS_PER_MINUTE),R=C.equals(0)?null:b(C,2);return R!=null?"".concat(x).concat(T,":").concat(P,":").concat(R):"".concat(x).concat(T,":").concat(P)},e.dateToIsoString=function(p,m,x){var T=function(R){var D=(0,o.int)(R);return D.isNegative()||D.greaterThan(9999)?b(D,6,{usePositiveSign:!0}):b(D,4)}(p),P=b(m,2),C=b(x,2);return"".concat(T,"-").concat(P,"-").concat(C)},e.isoStringToStandardDate=function(p){return new Date(p)},e.toStandardDate=function(p){return new Date(p)},e.newDate=function(p){return new Date(p)},e.totalNanoseconds=function(p,m){return x=m=m??0,T=p.getMilliseconds()*e.NANOS_PER_MILLISECOND,x instanceof o.default?x.add(T):typeof x=="bigint"?x+BigInt(T):x+T;var x,T},e.timeZoneOffsetInSeconds=function(p){var m=p.getSeconds()>=p.getUTCSeconds()?p.getSeconds()-p.getUTCSeconds():p.getSeconds()-p.getUTCSeconds()+60,x=p.getTimezoneOffset();return x===0?0+m:-1*x*e.SECONDS_PER_MINUTE+m},e.assertValidYear=function(p){return d(p,e.YEAR_RANGE,"Year")},e.assertValidMonth=function(p){return d(p,e.MONTH_OF_YEAR_RANGE,"Month")},e.assertValidDay=function(p){return d(p,e.DAY_OF_MONTH_RANGE,"Day")},e.assertValidHour=function(p){return d(p,e.HOUR_OF_DAY_RANGE,"Hour")},e.assertValidMinute=function(p){return d(p,e.MINUTE_OF_HOUR_RANGE,"Minute")},e.assertValidSecond=function(p){return d(p,e.SECOND_OF_MINUTE_RANGE,"Second")},e.assertValidNanosecond=function(p){return d(p,e.NANOSECOND_OF_SECOND_RANGE,"Nanosecond")};var f=new Map,h=function(p,m){return(0,s.newError)("".concat(m,' is expected to be a valid ZoneId but was: "').concat(p,'"'))};function d(p,m,x){if((0,u.assertNumberOrInteger)(p,x),!m.contains(p))throw(0,s.newError)("".concat(x," is expected to be in range ").concat(m.toString()," but was: ").concat(p.toString()));return p}function v(p,m){p=(0,o.int)(p),m=(0,o.int)(m);var x=p.div(m);return p.isPositive()!==m.isPositive()&&x.multiply(m).notEquals(p)&&(x=x.subtract(1)),x}function y(p,m){return p=(0,o.int)(p),m=(0,o.int)(m),p.subtract(v(p,m).multiply(m))}function w(p){return(p=(0,o.int)(p)).equals(0)?"":"."+b(p,9)}function b(p,m,x){var T=(p=(0,o.int)(p)).isNegative();T&&(p=p.negate());var P=p.toString();if(m!=null)for(;P.length<m;)P="0"+P;return T?"-"+P:(x==null?void 0:x.usePositiveSign)===!0?"+"+P:P}e.assertValidZoneId=function(p,m){var x=f.get(m);if(x!==!0){if(x===!1)throw h(m,p);try{Intl.DateTimeFormat(void 0,{timeZone:m}),f.set(m,!0)}catch{throw f.set(m,!1),h(m,p)}}},e.floorDiv=v,e.floorMod=y},6189:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(v){for(var y,w=1,b=arguments.length;w<b;w++)for(var p in y=arguments[w])Object.prototype.hasOwnProperty.call(y,p)&&(v[p]=y[p]);return v},n.apply(this,arguments)},i=this&&this.__awaiter||function(v,y,w,b){return new(w||(w=Promise))(function(p,m){function x(C){try{P(b.next(C))}catch(R){m(R)}}function T(C){try{P(b.throw(C))}catch(R){m(R)}}function P(C){var R;C.done?p(C.value):(R=C.value,R instanceof w?R:new w(function(D){D(R)})).then(x,T)}P((b=b.apply(v,y||[])).next())})},a=this&&this.__generator||function(v,y){var w,b,p,m,x={label:0,sent:function(){if(1&p[0])throw p[1];return p[1]},trys:[],ops:[]};return m={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function T(P){return function(C){return function(R){if(w)throw new TypeError("Generator is already executing.");for(;m&&(m=0,R[0]&&(x=0)),x;)try{if(w=1,b&&(p=2&R[0]?b.return:R[0]?b.throw||((p=b.return)&&p.call(b),0):b.next)&&!(p=p.call(b,R[1])).done)return p;switch(b=0,p&&(R=[2&R[0],p.value]),R[0]){case 0:case 1:p=R;break;case 4:return x.label++,{value:R[1],done:!1};case 5:x.label++,b=R[1],R=[0];continue;case 7:R=x.ops.pop(),x.trys.pop();continue;default:if(!((p=(p=x.trys).length>0&&p[p.length-1])||R[0]!==6&&R[0]!==2)){x=0;continue}if(R[0]===3&&(!p||R[1]>p[0]&&R[1]<p[3])){x.label=R[1];break}if(R[0]===6&&x.label<p[1]){x.label=p[1],p=R;break}if(p&&x.label<p[2]){x.label=p[2],x.ops.push(R);break}p[2]&&x.ops.pop(),x.trys.pop();continue}R=y.call(v,x)}catch(D){R=[6,D],b=0}finally{w=p=0}if(5&R[0])throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}([P,C])}}},o=this&&this.__read||function(v,y){var w=typeof Symbol=="function"&&v[Symbol.iterator];if(!w)return v;var b,p,m=w.call(v),x=[];try{for(;(y===void 0||y-- >0)&&!(b=m.next()).done;)x.push(b.value)}catch(T){p={error:T}}finally{try{b&&!b.done&&(w=m.return)&&w.call(m)}finally{if(p)throw p.error}}return x},s=this&&this.__spreadArray||function(v,y,w){if(w||arguments.length===2)for(var b,p=0,m=y.length;p<m;p++)!b&&p in y||(b||(b=Array.prototype.slice.call(y,0,p)),b[p]=y[p]);return v.concat(b||Array.prototype.slice.call(y))};Object.defineProperty(e,"__esModule",{value:!0}),e.TransactionExecutor=void 0;var u=t(9691),l=t(326);function c(v,y){for(var w=[],b=2;b<arguments.length;b++)w[b-2]=arguments[b];return setTimeout.apply(void 0,s([v,y],o(w),!1))}function f(v){return clearTimeout(v)}var h=function(){function v(y,w,b,p,m){m===void 0&&(m={setTimeout:c,clearTimeout:f}),this._maxRetryTimeMs=d(y,3e4),this._initialRetryDelayMs=d(w,1e3),this._multiplier=d(b,2),this._jitterFactor=d(p,.2),this._setTimeout=m.setTimeout,this._clearTimeout=m.clearTimeout,this._inFlightTimeoutIds=[],this.pipelineBegin=!1,this.telemetryApi=l.TELEMETRY_APIS.MANAGED_TRANSACTION,this._verifyAfterConstruction()}return v.prototype.execute=function(y,w,b){var p=this,m={apiTransactionConfig:{api:this.telemetryApi,onTelemetrySuccess:function(){m.apiTransactionConfig=void 0}}};return new Promise(function(x,T){p._executeTransactionInsidePromise(y,w,x,T,b,m).catch(T)}).catch(function(x){var T=Date.now(),P=p._initialRetryDelayMs;return p._retryTransactionPromise(y,w,x,T,P,b,m)})},v.prototype.close=function(){var y=this;this._inFlightTimeoutIds.forEach(function(w){return y._clearTimeout(w)}),this._inFlightTimeoutIds=[]},v.prototype._retryTransactionPromise=function(y,w,b,p,m,x,T){var P=this;return Date.now()-p>this._maxRetryTimeMs||!(0,u.isRetriableError)(b)?Promise.reject(b):new Promise(function(C,R){var D=P._computeDelayWithJitter(m),N=P._setTimeout(function(){P._inFlightTimeoutIds=P._inFlightTimeoutIds.filter(function(j){return j!==N}),P._executeTransactionInsidePromise(y,w,C,R,x,T).catch(R)},D);P._inFlightTimeoutIds.push(N)}).catch(function(C){var R=m*P._multiplier;return P._retryTransactionPromise(y,w,C,p,R,x,T)})},v.prototype._executeTransactionInsidePromise=function(y,w,b,p,m,x){return i(this,void 0,void 0,function(){var T,P,C,R,D,N,j=this;return a(this,function(B){switch(B.label){case 0:return B.trys.push([0,4,,5]),P=y((x==null?void 0:x.apiTransactionConfig)!=null?n({},x==null?void 0:x.apiTransactionConfig):void 0),this.pipelineBegin?(C=P,[3,3]):[3,1];case 1:return[4,P];case 2:C=B.sent(),B.label=3;case 3:return T=C,[3,5];case 4:return R=B.sent(),p(R),[2];case 5:return D=m??function(z){return z},N=D(T),this._safeExecuteTransactionWork(N,w).then(function(z){return j._handleTransactionWorkSuccess(z,T,b,p)}).catch(function(z){return j._handleTransactionWorkFailure(z,T,p)}),[2]}})})},v.prototype._safeExecuteTransactionWork=function(y,w){try{var b=w(y);return Promise.resolve(b)}catch(p){return Promise.reject(p)}},v.prototype._handleTransactionWorkSuccess=function(y,w,b,p){w.isOpen()?w.commit().then(function(){b(y)}).catch(function(m){p(m)}):b(y)},v.prototype._handleTransactionWorkFailure=function(y,w,b){w.isOpen()?w.rollback().catch(function(p){}).then(function(){return b(y)}).catch(b):b(y)},v.prototype._computeDelayWithJitter=function(y){var w=y*this._jitterFactor,b=y-w,p=y+w;return Math.random()*(p-b)+b},v.prototype._verifyAfterConstruction=function(){if(this._maxRetryTimeMs<0)throw(0,u.newError)("Max retry time should be >= 0: "+this._maxRetryTimeMs.toString());if(this._initialRetryDelayMs<0)throw(0,u.newError)("Initial retry delay should >= 0: "+this._initialRetryDelayMs.toString());if(this._multiplier<1)throw(0,u.newError)("Multiplier should be >= 1.0: "+this._multiplier.toString());if(this._jitterFactor<0||this._jitterFactor>1)throw(0,u.newError)("Jitter factor should be in [0.0, 1.0]: "+this._jitterFactor.toFixed())},v}();function d(v,y){return v??y}e.TransactionExecutor=h},754:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(f,h,d,v){v===void 0&&(v=d);var y=Object.getOwnPropertyDescriptor(h,d);y&&!("get"in y?!h.__esModule:y.writable||y.configurable)||(y={enumerable:!0,get:function(){return h[d]}}),Object.defineProperty(f,v,y)}:function(f,h,d,v){v===void 0&&(v=d),f[v]=h[d]}),i=this&&this.__setModuleDefault||(Object.create?function(f,h){Object.defineProperty(f,"default",{enumerable:!0,value:h})}:function(f,h){f.default=h}),a=this&&this.__importStar||function(f){if(f&&f.__esModule)return f;var h={};if(f!=null)for(var d in f)d!=="default"&&Object.prototype.hasOwnProperty.call(f,d)&&n(h,f,d);return i(h,f),h};Object.defineProperty(e,"__esModule",{value:!0}),e.TxConfig=void 0;var o=a(t(6587)),s=t(9691),u=t(3371),l=function(){function f(h,d){(function(v){v!=null&&o.assertObject(v,"Transaction config")})(h),this.timeout=function(v,y){if(o.isObject(v)&&v.timeout!=null){o.assertNumberOrInteger(v.timeout,"Transaction timeout"),function(b){return typeof b.timeout=="number"&&!Number.isInteger(b.timeout)}(v)&&(y==null?void 0:y.isInfoEnabled())===!0&&(y==null||y.info("Transaction timeout expected to be an integer, got: ".concat(v.timeout,". The value will be rounded up.")));var w=(0,u.int)(v.timeout,{ceilFloat:!0});if(w.isNegative())throw(0,s.newError)("Transaction timeout should not be negative");return w}return null}(h,d),this.metadata=function(v){if(o.isObject(v)&&v.metadata!=null){var y=v.metadata;if(o.assertObject(y,"config.metadata"),Object.keys(y).length!==0)return y}return null}(h)}return f.empty=function(){return c},f.prototype.isEmpty=function(){return Object.values(this).every(function(h){return h==null})},f}();e.TxConfig=l;var c=new l({})},407:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(c){for(var f,h=1,d=arguments.length;h<d;h++)for(var v in f=arguments[h])Object.prototype.hasOwnProperty.call(f,v)&&(c[v]=f[v]);return c},n.apply(this,arguments)},i=this&&this.__read||function(c,f){var h=typeof Symbol=="function"&&c[Symbol.iterator];if(!h)return c;var d,v,y=h.call(c),w=[];try{for(;(f===void 0||f-- >0)&&!(d=y.next()).done;)w.push(d.value)}catch(b){v={error:b}}finally{try{d&&!d.done&&(h=y.return)&&h.call(y)}finally{if(v)throw v.error}}return w};Object.defineProperty(e,"__esModule",{value:!0}),e.Url=e.formatIPv6Address=e.formatIPv4Address=e.defaultPortForScheme=e.parseDatabaseUrl=void 0;var a=t(6587),o=function(c,f,h,d,v){this.scheme=c,this.host=f,this.port=h,this.hostAndPort=d,this.query=v};function s(c,f,h){if((c=(c??"").trim())==="")throw new Error("Illegal empty ".concat(f," in URL query '").concat(h,"'"));return c}function u(c){var f=c.charAt(0)==="[",h=c.charAt(c.length-1)==="]";if(f||h){if(f&&h)return c;throw new Error("Illegal IPv6 address ".concat(c))}return"[".concat(c,"]")}function l(c){return c==="http"?7474:c==="https"?7473:7687}e.Url=o,e.parseDatabaseUrl=function(c){var f;(0,a.assertString)(c,"URL");var h,d=function(T){return(T=T.trim()).includes("://")?{schemeMissing:!1,url:T}:{schemeMissing:!0,url:"none://".concat(T)}}(c),v=function(T){function P(D,N){var j=D.indexOf(N);return j>=0?[D.substring(0,j),D[j],D.substring(j+1)]:[D,"",""]}var C,R={};return(C=P(T,":"))[1]===":"&&(R.scheme=decodeURIComponent(C[0]),T=C[2]),(C=P(T,"#"))[1]==="#"&&(R.fragment=decodeURIComponent(C[2]),T=C[0]),(C=P(T,"?"))[1]==="?"&&(R.query=C[2],T=C[0]),T.startsWith("//")?(C=P(T.substr(2),"/"),(R=n(n({},R),function(D){var N,j,B,z,W={};(j=D,B="@",z=j.lastIndexOf(B),N=z>=0?[j.substring(0,z),j[z],j.substring(z+1)]:["","",j])[1]==="@"&&(W.userInfo=decodeURIComponent(N[0]),D=N[2]);var Z=i(function(ee,ue,de){var se=P(ee,ue),me=P(se[2],de);return[me[0],me[2]]}(D,"[","]"),2),Q=Z[0],re=Z[1];return Q!==""?(W.host=Q,N=P(re,":")):(N=P(D,":"),W.host=N[0]),N[1]===":"&&(W.port=N[2]),W}(C[0]))).path=C[1]+C[2]):R.path=T,R}(d.url),y=d.schemeMissing?null:function(T){return T!=null?((T=T.trim()).charAt(T.length-1)===":"&&(T=T.substring(0,T.length-1)),T):null}(v.scheme),w=function(T,P){if(T==null)throw new Error("Unable to extract host from null or undefined URL");return T.trim()}(v.host),b=function(T){if(T===""||T==null)throw new Error("Illegal host ".concat(T));return T.includes(":")?u(T):T}(w),p=function(T,P){var C=typeof T=="string"?parseInt(T,10):T;return C==null||isNaN(C)?l(P):C}(v.port,y),m="".concat(b,":").concat(p),x=function(T,P){var C=T!=null?function(D){return((D=(D??"").trim())==null?void 0:D.charAt(0))==="?"&&(D=D.substring(1,D.length)),D}(T):null,R={};return C!=null&&C.split("&").forEach(function(D){var N=D.split("=");if(N.length!==2)throw new Error("Invalid parameters: '".concat(N.toString(),"' in URL '").concat(P,"'."));var j=s(N[0],"key",P),B=s(N[1],"value",P);if(R[j]!==void 0)throw new Error("Duplicated query parameters with key '".concat(j,"' in URL '").concat(P,"'"));R[j]=B}),R}((f=v.query)!==null&&f!==void 0?f:typeof(h=v.resourceName)!="string"?null:i(h.split("?"),2)[1],c);return new o(y,w,p,m,x)},e.formatIPv4Address=function(c,f){return"".concat(c,":").concat(f)},e.formatIPv6Address=function(c,f){var h=u(c);return"".concat(h,":").concat(f)},e.defaultPortForScheme=l},6587:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(h,d,v,y){y===void 0&&(y=v);var w=Object.getOwnPropertyDescriptor(d,v);w&&!("get"in w?!d.__esModule:w.writable||w.configurable)||(w={enumerable:!0,get:function(){return d[v]}}),Object.defineProperty(h,y,w)}:function(h,d,v,y){y===void 0&&(y=v),h[y]=d[v]}),i=this&&this.__setModuleDefault||(Object.create?function(h,d){Object.defineProperty(h,"default",{enumerable:!0,value:d})}:function(h,d){h.default=d}),a=this&&this.__importStar||function(h){if(h&&h.__esModule)return h;var d={};if(h!=null)for(var v in h)v!=="default"&&Object.prototype.hasOwnProperty.call(h,v)&&n(d,h,v);return i(d,h),d},o=this&&this.__values||function(h){var d=typeof Symbol=="function"&&Symbol.iterator,v=d&&h[d],y=0;if(v)return v.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&y>=h.length&&(h=void 0),{value:h&&h[y++],done:!h}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.ENCRYPTION_OFF=e.ENCRYPTION_ON=e.equals=e.validateQueryAndParameters=e.toNumber=e.assertValidDate=e.assertNumberOrInteger=e.assertNumber=e.assertString=e.assertObject=e.isString=e.isObject=e.isEmptyObjectOrNull=void 0;var s=a(t(3371)),u=t(4027);function l(h){return typeof h=="object"&&!Array.isArray(h)&&h!==null}function c(h,d){if(!f(h))throw new TypeError((0,u.stringify)(d)+" expected to be string but was: "+(0,u.stringify)(h));return h}function f(h){return Object.prototype.toString.call(h)==="[object String]"}e.ENCRYPTION_ON="ENCRYPTION_ON",e.ENCRYPTION_OFF="ENCRYPTION_OFF",e.isEmptyObjectOrNull=function(h){if(h===null)return!0;if(!l(h))return!1;for(var d in h)if(h[d]!==void 0)return!1;return!0},e.isObject=l,e.validateQueryAndParameters=function(h,d,v){var y,w,b="",p=d??{},m=(y=v==null?void 0:v.skipAsserts)!==null&&y!==void 0&&y;return typeof h=="string"?b=h:h instanceof String?b=h.toString():typeof h=="object"&&h.text!=null&&(b=h.text,p=(w=h.parameters)!==null&&w!==void 0?w:{}),m||(function(x){if(c(x,"Cypher query"),x.trim().length===0)throw new TypeError("Cypher query is expected to be a non-empty string.")}(b),function(x){if(!l(x)){var T=x.constructor!=null?" "+x.constructor.name:"";throw new TypeError("Query parameters are expected to either be undefined/null or an object, given:".concat(T," ").concat(JSON.stringify(x)))}}(p)),{validatedQuery:b,params:p}},e.assertObject=function(h,d){if(!l(h))throw new TypeError(d+" expected to be an object but was: "+(0,u.stringify)(h));return h},e.assertString=c,e.assertNumber=function(h,d){if(typeof h!="number")throw new TypeError(d+" expected to be a number but was: "+(0,u.stringify)(h));return h},e.assertNumberOrInteger=function(h,d){if(typeof h!="number"&&typeof h!="bigint"&&!(0,s.isInt)(h))throw new TypeError(d+" expected to be either a number or an Integer object but was: "+(0,u.stringify)(h));return h},e.assertValidDate=function(h,d){if(Object.prototype.toString.call(h)!=="[object Date]")throw new TypeError(d+" expected to be a standard JavaScript Date but was: "+(0,u.stringify)(h));if(Number.isNaN(h.getTime()))throw new TypeError(d+" expected to be valid JavaScript Date but its time was NaN: "+(0,u.stringify)(h));return h},e.isString=f,e.equals=function h(d,v){var y,w;if(d===v)return!0;if(d===null||v===null)return!1;if(typeof d=="object"&&typeof v=="object"){var b=Object.keys(d),p=Object.keys(v);if(b.length!==p.length)return!1;try{for(var m=o(b),x=m.next();!x.done;x=m.next()){var T=x.value;if(!h(d[T],v[T]))return!1}}catch(P){y={error:P}}finally{try{x&&!x.done&&(w=m.return)&&w.call(m)}finally{if(y)throw y.error}}return!0}return!1},e.toNumber=function(h){return h instanceof s.default?h.toNumber():typeof h=="bigint"?(0,s.int)(h).toNumber():h}},4027:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.stringify=void 0;var n=t(93);e.stringify=function(i,a){return JSON.stringify(i,function(o,s){return(0,n.isBrokenObject)(s)?{__isBrokenObject__:!0,__reason__:(0,n.getBrokenObjectReason)(s)}:typeof s=="bigint"?"".concat(s,"n"):(a==null?void 0:a.useCustomToString)!==!0||typeof s!="object"||Array.isArray(s)||typeof s.toString!="function"||s.toString===Object.prototype.toString?s:s==null?void 0:s.toString()})}},1985:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.notificationFilterDisabledClassification=e.notificationFilterDisabledCategory=e.notificationFilterMinimumSeverityLevel=void 0;var t={OFF:"OFF",WARNING:"WARNING",INFORMATION:"INFORMATION"};e.notificationFilterMinimumSeverityLevel=t,Object.freeze(t);var n={HINT:"HINT",UNRECOGNIZED:"UNRECOGNIZED",UNSUPPORTED:"UNSUPPORTED",PERFORMANCE:"PERFORMANCE",TOPOLOGY:"TOPOLOGY",SECURITY:"SECURITY",DEPRECATION:"DEPRECATION",GENERIC:"GENERIC",SCHEMA:"SCHEMA"};e.notificationFilterDisabledCategory=n,Object.freeze(n);var i=n;e.notificationFilterDisabledClassification=i,e.default=function(){throw this.minimumSeverityLevel=void 0,this.disabledCategories=void 0,this.disabledClassifications=void 0,new Error("Not implemented")}},1866:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(B){for(var z,W=1,Z=arguments.length;W<Z;W++)for(var Q in z=arguments[W])Object.prototype.hasOwnProperty.call(z,Q)&&(B[Q]=z[Q]);return B},n.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(B,z,W,Z){Z===void 0&&(Z=W);var Q=Object.getOwnPropertyDescriptor(z,W);Q&&!("get"in Q?!z.__esModule:Q.writable||Q.configurable)||(Q={enumerable:!0,get:function(){return z[W]}}),Object.defineProperty(B,Z,Q)}:function(B,z,W,Z){Z===void 0&&(Z=W),B[Z]=z[W]}),a=this&&this.__setModuleDefault||(Object.create?function(B,z){Object.defineProperty(B,"default",{enumerable:!0,value:z})}:function(B,z){B.default=z}),o=this&&this.__importStar||function(B){if(B&&B.__esModule)return B;var z={};if(B!=null)for(var W in B)W!=="default"&&Object.prototype.hasOwnProperty.call(B,W)&&i(z,B,W);return a(z,B),z},s=this&&this.__read||function(B,z){var W=typeof Symbol=="function"&&B[Symbol.iterator];if(!W)return B;var Z,Q,re=W.call(B),ee=[];try{for(;(z===void 0||z-- >0)&&!(Z=re.next()).done;)ee.push(Z.value)}catch(ue){Q={error:ue}}finally{try{Z&&!Z.done&&(W=re.return)&&W.call(re)}finally{if(Q)throw Q.error}}return ee},u=this&&this.__spreadArray||function(B,z,W){if(W||arguments.length===2)for(var Z,Q=0,re=z.length;Q<re;Q++)!Z&&Q in z||(Z||(Z=Array.prototype.slice.call(z,0,Q)),Z[Q]=z[Q]);return B.concat(Z||Array.prototype.slice.call(z))};Object.defineProperty(e,"__esModule",{value:!0}),e.buildNotificationsFromMetadata=e.buildGqlStatusObjectFromMetadata=e.polyfillNotification=e.polyfillGqlStatusObject=e.GqlStatusObject=e.Notification=e.notificationClassification=e.notificationCategory=e.notificationSeverityLevel=void 0;var l=o(t(4027)),c=t(6995),f=t(1053),h={WARNING:{gql_status:"01N42",status_description:"warn: unknown warning"},NO_DATA:{gql_status:"02N42",status_description:"note: no data - unknown subcondition"},INFORMATION:{gql_status:"03N42",status_description:"info: unknown notification"}},d={WARNING:"WARNING",INFORMATION:"INFORMATION",UNKNOWN:"UNKNOWN"};e.notificationSeverityLevel=d,Object.freeze(d);var v=Object.values(d),y={HINT:"HINT",UNRECOGNIZED:"UNRECOGNIZED",UNSUPPORTED:"UNSUPPORTED",PERFORMANCE:"PERFORMANCE",DEPRECATION:"DEPRECATION",TOPOLOGY:"TOPOLOGY",SECURITY:"SECURITY",GENERIC:"GENERIC",SCHEMA:"SCHEMA",UNKNOWN:"UNKNOWN"};e.notificationCategory=y,Object.freeze(y);var w=Object.values(y),b=y;e.notificationClassification=b;var p=function(B){this.code=B.code,this.title=B.title,this.description=B.description,this.severity=B.severity,this.position=D(B.position),this.severityLevel=N(B.severity),this.rawSeverityLevel=B.severity,this.category=j(B.category),this.rawCategory=B.category};e.Notification=p;var m=function(){function B(z){var W;this.gqlStatus=z.gql_status,this.statusDescription=z.status_description,this.diagnosticRecord=(W=z.diagnostic_record)!==null&&W!==void 0?W:{},this.position=this.diagnosticRecord._position!=null?D(this.diagnosticRecord._position):void 0,this.severity=N(this.diagnosticRecord._severity),this.rawSeverity=this.diagnosticRecord._severity,this.classification=j(this.diagnosticRecord._classification),this.rawClassification=this.diagnosticRecord._classification,this.isNotification=z.neo4j_code!=null,Object.freeze(this)}return Object.defineProperty(B.prototype,"diagnosticRecordAsJsonString",{get:function(){return l.stringify(this.diagnosticRecord,{useCustomToString:!0})},enumerable:!1,configurable:!0}),B}();function x(B){var z,W,Z;if(B.neo4j_code!=null)return new p({code:B.neo4j_code,title:B.title,description:B.description,severity:(z=B.diagnostic_record)===null||z===void 0?void 0:z._severity,category:(W=B.diagnostic_record)===null||W===void 0?void 0:W._classification,position:(Z=B.diagnostic_record)===null||Z===void 0?void 0:Z._position})}function T(B){var z,W=B.severity===d.WARNING?h.WARNING:h.INFORMATION,Z={gql_status:W.gql_status,status_description:(z=B.description)!==null&&z!==void 0?z:W.status_description,neo4j_code:B.code,title:B.title,diagnostic_record:n({},f.rawPolyfilledDiagnosticRecord)};return B.severity!=null&&(Z.diagnostic_record._severity=B.severity),B.category!=null&&(Z.diagnostic_record._classification=B.category),B.position!=null&&(Z.diagnostic_record._position=B.position),new m(Z)}e.GqlStatusObject=m,e.polyfillNotification=x,e.polyfillGqlStatusObject=T;var P={SUCCESS:new m({gql_status:"00000",status_description:"note: successful completion",diagnostic_record:f.rawPolyfilledDiagnosticRecord}),NO_DATA:new m({gql_status:"02000",status_description:"note: no data",diagnostic_record:f.rawPolyfilledDiagnosticRecord}),NO_DATA_UNKNOWN_SUBCONDITION:new m(n(n({},h.NO_DATA),{diagnostic_record:f.rawPolyfilledDiagnosticRecord})),OMITTED_RESULT:new m({gql_status:"00001",status_description:"note: successful completion - omitted result",diagnostic_record:f.rawPolyfilledDiagnosticRecord})};Object.freeze(P),e.buildGqlStatusObjectFromMetadata=function(B){var z,W;if(B.statuses!=null)return B.statuses.map(function(re){return new m(re)});var Z,Q=((Z=B.stream_summary)==null?void 0:Z.have_records_streamed)===!0?P.SUCCESS:(Z==null?void 0:Z.has_keys)===!1?P.OMITTED_RESULT:(Z==null?void 0:Z.pulled)===!0?P.NO_DATA:P.NO_DATA_UNKNOWN_SUBCONDITION;return u([Q],s((W=(z=B.notifications)===null||z===void 0?void 0:z.map(T))!==null&&W!==void 0?W:[]),!1).sort(function(re,ee){return R(re)-R(ee)})};var C=Object.freeze({"02":0,"01":1,"00":2});function R(B){var z,W,Z=(z=B.gqlStatus)===null||z===void 0?void 0:z.slice(0,2);return(W=C[Z])!==null&&W!==void 0?W:9999}function D(B){return B==null?{}:{offset:c.util.toNumber(B.offset),line:c.util.toNumber(B.line),column:c.util.toNumber(B.column)}}function N(B){return v.includes(B)?B:d.UNKNOWN}function j(B){return w.includes(B)?B:b.UNKNOWN}e.buildNotificationsFromMetadata=function(B){return B.notifications!=null?B.notifications.map(function(z){return new p(z)}):B.statuses!=null?B.statuses.map(x).filter(function(z){return z!=null}):[]},e.default=p},4820:function(r,e,t){var n=this&&this.__generator||function(u,l){var c,f,h,d,v={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return d={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function y(w){return function(b){return function(p){if(c)throw new TypeError("Generator is already executing.");for(;d&&(d=0,p[0]&&(v=0)),v;)try{if(c=1,f&&(h=2&p[0]?f.return:p[0]?f.throw||((h=f.return)&&h.call(f),0):f.next)&&!(h=h.call(f,p[1])).done)return h;switch(f=0,h&&(p=[2&p[0],h.value]),p[0]){case 0:case 1:h=p;break;case 4:return v.label++,{value:p[1],done:!1};case 5:v.label++,f=p[1],p=[0];continue;case 7:p=v.ops.pop(),v.trys.pop();continue;default:if(!((h=(h=v.trys).length>0&&h[h.length-1])||p[0]!==6&&p[0]!==2)){v=0;continue}if(p[0]===3&&(!h||p[1]>h[0]&&p[1]<h[3])){v.label=p[1];break}if(p[0]===6&&v.label<h[1]){v.label=h[1],h=p;break}if(h&&v.label<h[2]){v.label=h[2],v.ops.push(p);break}h[2]&&v.ops.pop(),v.trys.pop();continue}p=l.call(u,v)}catch(m){p=[6,m],f=0}finally{c=h=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}([w,b])}}},i=this&&this.__values||function(u){var l=typeof Symbol=="function"&&Symbol.iterator,c=l&&u[l],f=0;if(c)return c.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&f>=u.length&&(u=void 0),{value:u&&u[f++],done:!u}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(u,l){var c=typeof Symbol=="function"&&u[Symbol.iterator];if(!c)return u;var f,h,d=c.call(u),v=[];try{for(;(l===void 0||l-- >0)&&!(f=d.next()).done;)v.push(f.value)}catch(y){h={error:y}}finally{try{f&&!f.done&&(c=d.return)&&c.call(d)}finally{if(h)throw h.error}}return v};Object.defineProperty(e,"__esModule",{value:!0});var o=t(9691),s=function(){function u(l,c,f){this.keys=l,this.length=l.length,this._fields=c,this._fieldLookup=f??function(h){var d={};return h.forEach(function(v,y){d[v]=y}),d}(l)}return u.prototype.forEach=function(l){var c,f;try{for(var h=i(this.entries()),d=h.next();!d.done;d=h.next()){var v=a(d.value,2),y=v[0];l(v[1],y,this)}}catch(w){c={error:w}}finally{try{d&&!d.done&&(f=h.return)&&f.call(h)}finally{if(c)throw c.error}}},u.prototype.map=function(l){var c,f,h=[];try{for(var d=i(this.entries()),v=d.next();!v.done;v=d.next()){var y=a(v.value,2),w=y[0],b=y[1];h.push(l(b,w,this))}}catch(p){c={error:p}}finally{try{v&&!v.done&&(f=d.return)&&f.call(d)}finally{if(c)throw c.error}}return h},u.prototype.entries=function(){var l;return n(this,function(c){switch(c.label){case 0:l=0,c.label=1;case 1:return l<this.keys.length?[4,[this.keys[l],this._fields[l]]]:[3,4];case 2:c.sent(),c.label=3;case 3:return l++,[3,1];case 4:return[2]}})},u.prototype.values=function(){var l;return n(this,function(c){switch(c.label){case 0:l=0,c.label=1;case 1:return l<this.keys.length?[4,this._fields[l]]:[3,4];case 2:c.sent(),c.label=3;case 3:return l++,[3,1];case 4:return[2]}})},u.prototype[Symbol.iterator]=function(){var l;return n(this,function(c){switch(c.label){case 0:l=0,c.label=1;case 1:return l<this.keys.length?[4,this._fields[l]]:[3,4];case 2:c.sent(),c.label=3;case 3:return l++,[3,1];case 4:return[2]}})},u.prototype.toObject=function(){var l,c,f={};try{for(var h=i(this.entries()),d=h.next();!d.done;d=h.next()){var v=a(d.value,2),y=v[0],w=v[1];f[y]=w}}catch(b){l={error:b}}finally{try{d&&!d.done&&(c=h.return)&&c.call(h)}finally{if(l)throw l.error}}return f},u.prototype.get=function(l){var c;if(typeof l!="number"){if((c=this._fieldLookup[l])===void 0)throw(0,o.newError)("This record has no field with key '".concat(l.toString(),"', available keys are: [")+this.keys.toString()+"].")}else c=l;if(c>this._fields.length-1||c<0)throw(0,o.newError)("This record has no field with index '"+c.toString()+"'. Remember that indexes start at `0`, and make sure your query returns records in the shape you meant it to.");return this._fields[c]},u.prototype.has=function(l){return typeof l=="number"?l>=0&&l<this._fields.length:this._fieldLookup[l]!==void 0},u}();e.default=s},8917:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,n,i){this.keys=t,this.records=n,this.summary=i}},6033:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Stats=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.ServerInfo=e.queryType=void 0;var n=t(6995),i=t(1866),a=function(){function f(h,d,v,y){var w,b,p;this.query={text:h,parameters:d},this.queryType=v.type,this.counters=new u((w=v.stats)!==null&&w!==void 0?w:{}),this.updateStatistics=this.counters,this.plan=(v.plan!=null||v.profile!=null)&&new o((b=v.plan)!==null&&b!==void 0?b:v.profile),this.profile=v.profile!=null&&new s(v.profile),this.notifications=(0,i.buildNotificationsFromMetadata)(v),this.gqlStatusObjects=(0,i.buildGqlStatusObjectFromMetadata)(v),this.server=new l(v.server,y),this.resultConsumedAfter=v.result_consumed_after,this.resultAvailableAfter=v.result_available_after,this.database={name:(p=v.db)!==null&&p!==void 0?p:null}}return f.prototype.hasPlan=function(){return this.plan instanceof o},f.prototype.hasProfile=function(){return this.profile instanceof s},f}(),o=function f(h){this.operatorType=h.operatorType,this.identifiers=h.identifiers,this.arguments=h.args,this.children=h.children!=null?h.children.map(function(d){return new f(d)}):[]};e.Plan=o;var s=function(){function f(h){this.operatorType=h.operatorType,this.identifiers=h.identifiers,this.arguments=h.args,this.dbHits=c("dbHits",h),this.rows=c("rows",h),this.pageCacheMisses=c("pageCacheMisses",h),this.pageCacheHits=c("pageCacheHits",h),this.pageCacheHitRatio=c("pageCacheHitRatio",h),this.time=c("time",h),this.children=h.children!=null?h.children.map(function(d){return new f(d)}):[]}return f.prototype.hasPageCacheStats=function(){return this.pageCacheMisses>0||this.pageCacheHits>0||this.pageCacheHitRatio>0},f}();e.ProfiledPlan=s,e.Stats=function(){this.nodesCreated=0,this.nodesDeleted=0,this.relationshipsCreated=0,this.relationshipsDeleted=0,this.propertiesSet=0,this.labelsAdded=0,this.labelsRemoved=0,this.indexesAdded=0,this.indexesRemoved=0,this.constraintsAdded=0,this.constraintsRemoved=0};var u=function(){function f(h){var d=this;this._stats={nodesCreated:0,nodesDeleted:0,relationshipsCreated:0,relationshipsDeleted:0,propertiesSet:0,labelsAdded:0,labelsRemoved:0,indexesAdded:0,indexesRemoved:0,constraintsAdded:0,constraintsRemoved:0},this._systemUpdates=0,Object.keys(h).forEach(function(v){var y=v.replace(/(-\w)/g,function(w){return w[1].toUpperCase()});y in d._stats?d._stats[y]=n.util.toNumber(h[v]):y==="systemUpdates"?d._systemUpdates=n.util.toNumber(h[v]):y==="containsSystemUpdates"?d._containsSystemUpdates=h[v]:y==="containsUpdates"&&(d._containsUpdates=h[v])}),this._stats=Object.freeze(this._stats)}return f.prototype.containsUpdates=function(){var h=this;return this._containsUpdates!==void 0?this._containsUpdates:Object.keys(this._stats).reduce(function(d,v){return d+h._stats[v]},0)>0},f.prototype.updates=function(){return this._stats},f.prototype.containsSystemUpdates=function(){return this._containsSystemUpdates!==void 0?this._containsSystemUpdates:this._systemUpdates>0},f.prototype.systemUpdates=function(){return this._systemUpdates},f}();e.QueryStatistics=u;var l=function(f,h){f!=null&&(this.address=f.address,this.agent=f.version),this.protocolVersion=h};function c(f,h,d){if(d===void 0&&(d=0),h!==!1&&f in h){var v=h[f];return n.util.toNumber(v)}return d}e.ServerInfo=l,e.queryType={READ_ONLY:"r",READ_WRITE:"rw",WRITE_ONLY:"w",SCHEMA_WRITE:"s"},e.default=a},1573:function(r,e,t){var n=this&&this.__awaiter||function(d,v,y,w){return new(y||(y=Promise))(function(b,p){function m(P){try{T(w.next(P))}catch(C){p(C)}}function x(P){try{T(w.throw(P))}catch(C){p(C)}}function T(P){var C;P.done?b(P.value):(C=P.value,C instanceof y?C:new y(function(R){R(C)})).then(m,x)}T((w=w.apply(d,v||[])).next())})},i=this&&this.__generator||function(d,v){var y,w,b,p,m={label:0,sent:function(){if(1&b[0])throw b[1];return b[1]},trys:[],ops:[]};return p={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function x(T){return function(P){return function(C){if(y)throw new TypeError("Generator is already executing.");for(;p&&(p=0,C[0]&&(m=0)),m;)try{if(y=1,w&&(b=2&C[0]?w.return:C[0]?w.throw||((b=w.return)&&b.call(w),0):w.next)&&!(b=b.call(w,C[1])).done)return b;switch(w=0,b&&(C=[2&C[0],b.value]),C[0]){case 0:case 1:b=C;break;case 4:return m.label++,{value:C[1],done:!1};case 5:m.label++,w=C[1],C=[0];continue;case 7:C=m.ops.pop(),m.trys.pop();continue;default:if(!((b=(b=m.trys).length>0&&b[b.length-1])||C[0]!==6&&C[0]!==2)){m=0;continue}if(C[0]===3&&(!b||C[1]>b[0]&&C[1]<b[3])){m.label=C[1];break}if(C[0]===6&&m.label<b[1]){m.label=b[1],b=C;break}if(b&&m.label<b[2]){m.label=b[2],m.ops.push(C);break}b[2]&&m.ops.pop(),m.trys.pop();continue}C=v.call(d,m)}catch(R){C=[6,R],w=0}finally{y=b=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}([T,P])}}},a=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0});var o=a(t(8917)),s=t(9691),u=new(function(){function d(){}return d.prototype.eagerResultTransformer=function(){return l},d.prototype.eager=function(){return l},d.prototype.mappedResultTransformer=function(v){return c(v)},d.prototype.mapped=function(v){return c(v)},d.prototype.first=function(){return f},d.prototype.summary=function(){return h},d}());function l(d){return n(this,void 0,void 0,function(){var v,y,w,b;return i(this,function(p){switch(p.label){case 0:return[4,d];case 1:return v=p.sent(),y=v.summary,w=v.records,[4,d.keys()];case 2:return b=p.sent(),[2,new o.default(b,w,y)]}})})}function c(d){var v=this;if(d==null||d.collect==null&&d.map==null)throw(0,s.newError)("Requires a map or/and a collect functions.");return function(y){return n(v,void 0,void 0,function(){return i(this,function(w){switch(w.label){case 0:return[4,new Promise(function(b,p){var m={records:[],keys:[]};y.subscribe({onKeys:function(x){m.keys=x},onNext:function(x){if(d.map!=null){var T=d.map(x);T!==void 0&&m.records.push(T)}else m.records.push(x)},onCompleted:function(x){if(d.collect!=null)b(d.collect(m.records,x,m.keys));else{var T={records:m.records,summary:x,keys:m.keys};b(T)}},onError:function(x){p(x)}})})];case 1:return[2,w.sent()]}})})}}function f(d){return n(this,void 0,void 0,function(){var v,y,w,b;return i(this,function(p){switch(p.label){case 0:return[4,(v=d[Symbol.asyncIterator]()).next()];case 1:y=p.sent(),w=y.value,b=y.done,p.label=2;case 2:return p.trys.push([2,,3,6]),b===!0?[2,void 0]:[2,w];case 3:return v.return==null?[3,5]:[4,v.return()];case 4:p.sent(),p.label=5;case 5:return[7];case 6:return[2]}})})}function h(d){return n(this,void 0,void 0,function(){return i(this,function(v){switch(v.label){case 0:return[4,d.summary()];case 1:return[2,v.sent()]}})})}Object.freeze(u),e.default=u},9512:function(r,e,t){var n,i=this&&this.__awaiter||function(y,w,b,p){return new(b||(b=Promise))(function(m,x){function T(R){try{C(p.next(R))}catch(D){x(D)}}function P(R){try{C(p.throw(R))}catch(D){x(D)}}function C(R){var D;R.done?m(R.value):(D=R.value,D instanceof b?D:new b(function(N){N(D)})).then(T,P)}C((p=p.apply(y,w||[])).next())})},a=this&&this.__generator||function(y,w){var b,p,m,x,T={label:0,sent:function(){if(1&m[0])throw m[1];return m[1]},trys:[],ops:[]};return x={next:P(0),throw:P(1),return:P(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function P(C){return function(R){return function(D){if(b)throw new TypeError("Generator is already executing.");for(;x&&(x=0,D[0]&&(T=0)),T;)try{if(b=1,p&&(m=2&D[0]?p.return:D[0]?p.throw||((m=p.return)&&m.call(p),0):p.next)&&!(m=m.call(p,D[1])).done)return m;switch(p=0,m&&(D=[2&D[0],m.value]),D[0]){case 0:case 1:m=D;break;case 4:return T.label++,{value:D[1],done:!1};case 5:T.label++,p=D[1],D=[0];continue;case 7:D=T.ops.pop(),T.trys.pop();continue;default:if(!((m=(m=T.trys).length>0&&m[m.length-1])||D[0]!==6&&D[0]!==2)){T=0;continue}if(D[0]===3&&(!m||D[1]>m[0]&&D[1]<m[3])){T.label=D[1];break}if(D[0]===6&&T.label<m[1]){T.label=m[1],m=D;break}if(m&&T.label<m[2]){T.label=m[2],T.ops.push(D);break}m[2]&&T.ops.pop(),T.trys.pop();continue}D=w.call(y,T)}catch(N){D=[6,N],p=0}finally{b=m=0}if(5&D[0])throw D[1];return{value:D[0]?D[1]:void 0,done:!0}}([C,R])}}},o=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(e,"__esModule",{value:!0});var s=o(t(6033)),u=t(6995),l=t(9691),c=u.connectionHolder.EMPTY_CONNECTION_HOLDER,f=function(y){""+y},h=function(y){},d=function(y){},v=function(){function y(w,b,p,m,x){var T;x===void 0&&(x={high:Number.MAX_VALUE,low:Number.MAX_VALUE}),this[n]="Result",this._stack=(T=new Error("")).stack!=null?T.stack.replace(/^Error(\n\r)*/,""):null,this._streamObserverPromise=w,this._p=null,this._query=b,this._parameters=p??{},this._connectionHolder=m??c,this._keys=null,this._summary=null,this._error=null,this._watermarks=x}return y.prototype.keys=function(){var w=this;return this._keys!==null?Promise.resolve(this._keys):this._error!==null?Promise.reject(this._error):new Promise(function(b,p){w._streamObserverPromise.then(function(m){return m.subscribe(w._decorateObserver({onKeys:function(x){return b(x)},onError:function(x){return p(x)}}))}).catch(p)})},y.prototype.summary=function(){var w=this;return this._summary!==null?Promise.resolve(this._summary):this._error!==null?Promise.reject(this._error):new Promise(function(b,p){w._streamObserverPromise.then(function(m){m.cancel(),m.subscribe(w._decorateObserver({onCompleted:function(x){return b(x)},onError:function(x){return p(x)}}))}).catch(p)})},y.prototype._getOrCreatePromise=function(){var w=this;return this._p==null&&(this._p=new Promise(function(b,p){var m=[],x={onNext:function(T){m.push(T)},onCompleted:function(T){b({records:m,summary:T})},onError:function(T){p(T)}};w.subscribe(x)})),this._p},y.prototype[Symbol.asyncIterator]=function(){var w=this;if(!this.isOpen()){var b=(0,l.newError)("Result is already consumed");return{next:function(){return Promise.reject(b)},peek:function(){return Promise.reject(b)}}}var p={paused:!0,firstRun:!0,finished:!1},m=function(){var P,C;if(p.streaming!=null){var R=(C=(P=p.queuedObserver)===null||P===void 0?void 0:P.size)!==null&&C!==void 0?C:0,D=R>=w._watermarks.high,N=R<=w._watermarks.low;D&&!p.paused?(p.paused=!0,p.streaming.pause()):(N&&p.paused||p.firstRun&&!D)&&(p.firstRun=!1,p.paused=!1,p.streaming.resume())}},x=function(){return i(w,void 0,void 0,function(){var P;return a(this,function(C){switch(C.label){case 0:return p.queuedObserver!==void 0?[3,2]:(p.queuedObserver=this._createQueuedResultObserver(m),P=p,[4,this._subscribe(p.queuedObserver,!0).catch(function(){})]);case 1:P.streaming=C.sent(),m(),C.label=2;case 2:return[2,p.queuedObserver]}})})},T=function(P){if(P===void 0)throw(0,l.newError)("InvalidState: Result stream finished without Summary",l.PROTOCOL_ERROR);return!0};return{next:function(){return i(w,void 0,void 0,function(){var P;return a(this,function(C){switch(C.label){case 0:return p.finished&&T(p.summary)?[2,{done:!0,value:p.summary}]:[4,x()];case 1:return[4,C.sent().dequeue()];case 2:return(P=C.sent()).done===!0&&(p.finished=P.done,p.summary=P.value),[2,P]}})})},return:function(P){return i(w,void 0,void 0,function(){var C,R;return a(this,function(D){switch(D.label){case 0:return p.finished&&T(p.summary)?[2,{done:!0,value:P??p.summary}]:((R=p.streaming)===null||R===void 0||R.cancel(),[4,x()]);case 1:return[4,D.sent().dequeueUntilDone()];case 2:return C=D.sent(),p.finished=!0,C.value=P??C.value,p.summary=C.value,[2,C]}})})},peek:function(){return i(w,void 0,void 0,function(){return a(this,function(P){switch(P.label){case 0:return p.finished&&T(p.summary)?[2,{done:!0,value:p.summary}]:[4,x()];case 1:return[4,P.sent().head()];case 2:return[2,P.sent()]}})})}}},y.prototype.then=function(w,b){return this._getOrCreatePromise().then(w,b)},y.prototype.catch=function(w){return this._getOrCreatePromise().catch(w)},y.prototype.finally=function(w){return this._getOrCreatePromise().finally(w)},y.prototype.subscribe=function(w){this._subscribe(w).catch(function(){})},y.prototype.isOpen=function(){return this._summary===null&&this._error===null},y.prototype._subscribe=function(w,b){b===void 0&&(b=!1);var p=this._decorateObserver(w);return this._streamObserverPromise.then(function(m){return b&&m.pause(),m.subscribe(p),m}).catch(function(m){return p.onError!=null&&p.onError(m),Promise.reject(m)})},y.prototype._decorateObserver=function(w){var b,p,m,x=this,T=(b=w.onCompleted)!==null&&b!==void 0?b:h,P=(p=w.onError)!==null&&p!==void 0?p:f,C=(m=w.onKeys)!==null&&m!==void 0?m:d;return{onNext:w.onNext!=null?w.onNext.bind(w):void 0,onKeys:function(R){return x._keys=R,C.call(w,R)},onCompleted:function(R){x._releaseConnectionAndGetSummary(R).then(function(D){return x._summary!==null?T.call(w,x._summary):(x._summary=D,T.call(w,D))}).catch(P)},onError:function(R){x._connectionHolder.releaseConnection().then(function(){(function(D,N){N!=null&&(D.stack=D.toString()+`
`+N)})(R,x._stack),x._error=R,P.call(w,R)}).catch(P)}}},y.prototype._cancel=function(){this._summary===null&&this._error===null&&this._streamObserverPromise.then(function(w){return w.cancel()}).catch(function(){})},y.prototype._releaseConnectionAndGetSummary=function(w){var b=u.util.validateQueryAndParameters(this._query,this._parameters,{skipAsserts:!0}),p=b.validatedQuery,m=b.params,x=this._connectionHolder;return x.getConnection().then(function(T){return x.releaseConnection().then(function(){return T==null?void 0:T.getProtocolVersion()})},function(T){}).then(function(T){return new s.default(p,m,w,T)})},y.prototype._createQueuedResultObserver=function(w){var b=this;function p(){var R={};return R.promise=new Promise(function(D,N){R.resolve=D,R.reject=N}),R}function m(R){return R instanceof Error}function x(){var R;return i(this,void 0,void 0,function(){var D;return a(this,function(N){switch(N.label){case 0:if(T.length>0){if(D=(R=T.shift())!==null&&R!==void 0?R:(0,l.newError)("Unexpected empty buffer",l.PROTOCOL_ERROR),w(),m(D))throw D;return[2,D]}return P.resolvable=p(),[4,P.resolvable.promise];case 1:return[2,N.sent()]}})})}var T=[],P={resolvable:null},C={onNext:function(R){C._push({done:!1,value:R})},onCompleted:function(R){C._push({done:!0,value:R})},onError:function(R){C._push(R)},_push:function(R){if(P.resolvable!==null){var D=P.resolvable;P.resolvable=null,m(R)?D.reject(R):D.resolve(R)}else T.push(R),w()},dequeue:x,dequeueUntilDone:function(){return i(b,void 0,void 0,function(){var R;return a(this,function(D){switch(D.label){case 0:return[4,x()];case 1:return(R=D.sent()).done===!0?[2,R]:[3,0];case 2:return[2]}})})},head:function(){return i(b,void 0,void 0,function(){var R,D;return a(this,function(N){switch(N.label){case 0:if(T.length>0){if(m(R=T[0]))throw R;return[2,R]}P.resolvable=p(),N.label=1;case 1:return N.trys.push([1,3,4,5]),[4,P.resolvable.promise];case 2:return R=N.sent(),T.unshift(R),[2,R];case 3:throw D=N.sent(),T.unshift(D),D;case 4:return w(),[7];case 5:return[2]}})})},get size(){return T.length}};return C},y}();n=Symbol.toStringTag,e.default=v},5481:function(r,e,t){var n=this&&this.__awaiter||function(x,T,P,C){return new(P||(P=Promise))(function(R,D){function N(z){try{B(C.next(z))}catch(W){D(W)}}function j(z){try{B(C.throw(z))}catch(W){D(W)}}function B(z){var W;z.done?R(z.value):(W=z.value,W instanceof P?W:new P(function(Z){Z(W)})).then(N,j)}B((C=C.apply(x,T||[])).next())})},i=this&&this.__generator||function(x,T){var P,C,R,D,N={label:0,sent:function(){if(1&R[0])throw R[1];return R[1]},trys:[],ops:[]};return D={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(D[Symbol.iterator]=function(){return this}),D;function j(B){return function(z){return function(W){if(P)throw new TypeError("Generator is already executing.");for(;D&&(D=0,W[0]&&(N=0)),N;)try{if(P=1,C&&(R=2&W[0]?C.return:W[0]?C.throw||((R=C.return)&&R.call(C),0):C.next)&&!(R=R.call(C,W[1])).done)return R;switch(C=0,R&&(W=[2&W[0],R.value]),W[0]){case 0:case 1:R=W;break;case 4:return N.label++,{value:W[1],done:!1};case 5:N.label++,C=W[1],W=[0];continue;case 7:W=N.ops.pop(),N.trys.pop();continue;default:if(!((R=(R=N.trys).length>0&&R[R.length-1])||W[0]!==6&&W[0]!==2)){N=0;continue}if(W[0]===3&&(!R||W[1]>R[0]&&W[1]<R[3])){N.label=W[1];break}if(W[0]===6&&N.label<R[1]){N.label=R[1],R=W;break}if(R&&N.label<R[2]){N.label=R[2],N.ops.push(W);break}R[2]&&N.ops.pop(),N.trys.pop();continue}W=T.call(x,N)}catch(Z){W=[6,Z],C=0}finally{P=R=0}if(5&W[0])throw W[1];return{value:W[0]?W[1]:void 0,done:!0}}([B,z])}}},a=this&&this.__read||function(x,T){var P=typeof Symbol=="function"&&x[Symbol.iterator];if(!P)return x;var C,R,D=P.call(x),N=[];try{for(;(T===void 0||T-- >0)&&!(C=D.next()).done;)N.push(C.value)}catch(j){R={error:j}}finally{try{C&&!C.done&&(P=D.return)&&P.call(D)}finally{if(R)throw R.error}}return N},o=this&&this.__spreadArray||function(x,T,P){if(P||arguments.length===2)for(var C,R=0,D=T.length;R<D;R++)!C&&R in T||(C||(C=Array.prototype.slice.call(T,0,R)),C[R]=T[R]);return x.concat(C||Array.prototype.slice.call(T))},s=this&&this.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(e,"__esModule",{value:!0});var u=t(2696),l=t(6587),c=t(326),f=t(9691),h=s(t(9512)),d=t(3618),v=t(6189),y=t(9730),w=t(754),b=s(t(4569)),p=s(t(5909)),m=function(){function x(T){var P=T.mode,C=T.connectionProvider,R=T.bookmarks,D=T.database,N=T.config,j=T.reactive,B=T.fetchSize,z=T.impersonatedUser,W=T.bookmarkManager,Z=T.notificationFilter,Q=T.auth,re=T.log;this._mode=P,this._database=D,this._reactive=j,this._fetchSize=B,this._onDatabaseNameResolved=this._onDatabaseNameResolved.bind(this),this._getConnectionAcquistionBookmarks=this._getConnectionAcquistionBookmarks.bind(this),this._readConnectionHolder=new d.ConnectionHolder({mode:c.ACCESS_MODE_READ,auth:Q,database:D,bookmarks:R,connectionProvider:C,impersonatedUser:z,onDatabaseNameResolved:this._onDatabaseNameResolved,getConnectionAcquistionBookmarks:this._getConnectionAcquistionBookmarks,log:re}),this._writeConnectionHolder=new d.ConnectionHolder({mode:c.ACCESS_MODE_WRITE,auth:Q,database:D,bookmarks:R,connectionProvider:C,impersonatedUser:z,onDatabaseNameResolved:this._onDatabaseNameResolved,getConnectionAcquistionBookmarks:this._getConnectionAcquistionBookmarks,log:re}),this._open=!0,this._hasTx=!1,this._impersonatedUser=z,this._lastBookmarks=R??y.Bookmarks.empty(),this._configuredBookmarks=this._lastBookmarks,this._transactionExecutor=function(ue){var de,se=(de=ue==null?void 0:ue.maxTransactionRetryTime)!==null&&de!==void 0?de:null;return new v.TransactionExecutor(se)}(N),this._databaseNameResolved=this._database!=="";var ee=this._calculateWatermaks();this._lowRecordWatermark=ee.low,this._highRecordWatermark=ee.high,this._results=[],this._bookmarkManager=W,this._notificationFilter=Z,this._log=re}return x.prototype.run=function(T,P,C){var R=this,D=(0,l.validateQueryAndParameters)(T,P),N=D.validatedQuery,j=D.params,B=C!=null?new w.TxConfig(C,this._log):w.TxConfig.empty(),z=this._run(N,j,function(W){return n(R,void 0,void 0,function(){var Z,Q=this;return i(this,function(re){switch(re.label){case 0:return[4,this._bookmarks()];case 1:return Z=re.sent(),this._assertSessionIsOpen(),[2,W.run(N,j,{bookmarks:Z,txConfig:B,mode:this._mode,database:this._database,apiTelemetryConfig:{api:c.TELEMETRY_APIS.AUTO_COMMIT_TRANSACTION},impersonatedUser:this._impersonatedUser,afterComplete:function(ee){return Q._onCompleteCallback(ee,Z)},reactive:this._reactive,fetchSize:this._fetchSize,lowRecordWatermark:this._lowRecordWatermark,highRecordWatermark:this._highRecordWatermark,notificationFilter:this._notificationFilter})]}})})});return this._results.push(z),z},x.prototype._run=function(T,P,C){var R=this._acquireAndConsumeConnection(C),D=R.connectionHolder,N=R.resultPromise.catch(function(B){return Promise.resolve(new u.FailedObserver({error:B}))}),j={high:this._highRecordWatermark,low:this._lowRecordWatermark};return new h.default(N,T,P,D,j)},x.prototype._acquireConnection=function(T){var P=this,C=this._acquireAndConsumeConnection(T),R=C.connectionHolder;return C.resultPromise.then(function(D){return n(P,void 0,void 0,function(){return i(this,function(N){switch(N.label){case 0:return[4,R.releaseConnection()];case 1:return N.sent(),[2,D]}})})})},x.prototype._acquireAndConsumeConnection=function(T){var P,C=this._connectionHolderWithMode(this._mode);return P=this._open?!this._hasTx&&C.initializeConnection()?C.getConnection().then(function(R){return T(R)}):Promise.reject((0,f.newError)("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")):Promise.reject((0,f.newError)("Cannot run query in a closed session.")),{connectionHolder:C,resultPromise:P}},x.prototype.beginTransaction=function(T){var P=T,C=w.TxConfig.empty();return P!=null&&(C=new w.TxConfig(P,this._log)),this._beginTransaction(this._mode,C,{api:c.TELEMETRY_APIS.UNMANAGED_TRANSACTION})},x.prototype._beginTransaction=function(T,P,C){var R=this;if(!this._open)throw(0,f.newError)("Cannot begin a transaction on a closed session.");if(this._hasTx)throw(0,f.newError)("You cannot begin a transaction on a session with an open transaction; either run from within the transaction or use a different session.");var D=x._validateSessionMode(T),N=this._connectionHolderWithMode(D);N.initializeConnection(),this._hasTx=!0;var j=new b.default({connectionHolder:N,impersonatedUser:this._impersonatedUser,onClose:this._transactionClosed.bind(this),onBookmarks:function(B,z,W){return R._updateBookmarks(B,z,W)},onConnection:this._assertSessionIsOpen.bind(this),reactive:this._reactive,fetchSize:this._fetchSize,lowRecordWatermark:this._lowRecordWatermark,highRecordWatermark:this._highRecordWatermark,notificationFilter:this._notificationFilter,apiTelemetryConfig:C});return j._begin(function(){return R._bookmarks()},P),j},x.prototype._assertSessionIsOpen=function(){if(!this._open)throw(0,f.newError)("You cannot run more transactions on a closed session.")},x.prototype._transactionClosed=function(){this._hasTx=!1},x.prototype.lastBookmark=function(){return this.lastBookmarks()},x.prototype.lastBookmarks=function(){return this._lastBookmarks.values()},x.prototype._bookmarks=function(){var T;return n(this,void 0,void 0,function(){var P;return i(this,function(C){switch(C.label){case 0:return[4,(T=this._bookmarkManager)===null||T===void 0?void 0:T.getBookmarks()];case 1:return(P=C.sent())===void 0?[2,this._lastBookmarks]:[2,new y.Bookmarks(o(o([],a(P),!1),a(this._configuredBookmarks),!1))]}})})},x.prototype.readTransaction=function(T,P){var C=new w.TxConfig(P,this._log);return this._runTransaction(c.ACCESS_MODE_READ,C,T)},x.prototype.writeTransaction=function(T,P){var C=new w.TxConfig(P,this._log);return this._runTransaction(c.ACCESS_MODE_WRITE,C,T)},x.prototype._runTransaction=function(T,P,C){var R=this;return this._transactionExecutor.execute(function(D){return R._beginTransaction(T,P,D)},C)},x.prototype.executeRead=function(T,P){var C=new w.TxConfig(P,this._log);return this._executeInTransaction(c.ACCESS_MODE_READ,C,T)},x.prototype.executeWrite=function(T,P){var C=new w.TxConfig(P,this._log);return this._executeInTransaction(c.ACCESS_MODE_WRITE,C,T)},x.prototype._executeInTransaction=function(T,P,C){var R=this;return this._transactionExecutor.execute(function(D){return R._beginTransaction(T,P,D)},C,p.default.fromTransaction)},x.prototype._onDatabaseNameResolved=function(T){if(!this._databaseNameResolved){var P=T??"";this._database=P,this._readConnectionHolder.setDatabase(P),this._writeConnectionHolder.setDatabase(P),this._databaseNameResolved=!0}},x.prototype._getConnectionAcquistionBookmarks=function(){var T;return n(this,void 0,void 0,function(){var P;return i(this,function(C){switch(C.label){case 0:return[4,(T=this._bookmarkManager)===null||T===void 0?void 0:T.getBookmarks()];case 1:return(P=C.sent())===void 0?[2,this._lastBookmarks]:[2,new y.Bookmarks(o(o([],a(this._configuredBookmarks),!1),a(P),!1))]}})})},x.prototype._updateBookmarks=function(T,P,C){var R,D,N;T==null||T.isEmpty()||((R=this._bookmarkManager)===null||R===void 0||R.updateBookmarks((D=P==null?void 0:P.values())!==null&&D!==void 0?D:[],(N=T==null?void 0:T.values())!==null&&N!==void 0?N:[]).catch(function(){}),this._lastBookmarks=T,this._configuredBookmarks=y.Bookmarks.empty())},x.prototype.close=function(){return n(this,void 0,void 0,function(){return i(this,function(T){switch(T.label){case 0:return this._open?(this._open=!1,this._results.forEach(function(P){return P._cancel()}),this._transactionExecutor.close(),[4,this._readConnectionHolder.close(this._hasTx)]):[3,3];case 1:return T.sent(),[4,this._writeConnectionHolder.close(this._hasTx)];case 2:T.sent(),T.label=3;case 3:return[2]}})})},x.prototype[Symbol.asyncDispose]=function(){return this.close()},x.prototype._connectionHolderWithMode=function(T){if(T===c.ACCESS_MODE_READ)return this._readConnectionHolder;if(T===c.ACCESS_MODE_WRITE)return this._writeConnectionHolder;throw(0,f.newError)("Unknown access mode: "+T)},x.prototype._onCompleteCallback=function(T,P){this._updateBookmarks(new y.Bookmarks(T.bookmark),P,T.db)},x.prototype._calculateWatermaks=function(){return this._fetchSize===c.FETCH_ALL?{low:Number.MAX_VALUE,high:Number.MAX_VALUE}:{low:.3*this._fetchSize,high:.7*this._fetchSize}},x.prototype._configureTransactionExecutor=function(T,P){this._transactionExecutor.pipelineBegin=T,this._transactionExecutor.telemetryApi=P},x._validateSessionMode=function(T){var P=T??c.ACCESS_MODE_WRITE;if(P!==c.ACCESS_MODE_READ&&P!==c.ACCESS_MODE_WRITE)throw(0,f.newError)("Illegal session mode "+P);return P},x}();e.default=m},7093:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isPoint=e.Point=void 0;var n=t(6587),i="__isPoint__",a=function(){function s(u,l,c,f){this.srid=(0,n.assertNumberOrInteger)(u,"SRID"),this.x=(0,n.assertNumber)(l,"X coordinate"),this.y=(0,n.assertNumber)(c,"Y coordinate"),this.z=f==null?f:(0,n.assertNumber)(f,"Z coordinate"),Object.freeze(this)}return s.prototype.toString=function(){return this.z==null||isNaN(this.z)?"Point{srid=".concat(o(this.srid),", x=").concat(o(this.x),", y=").concat(o(this.y),"}"):"Point{srid=".concat(o(this.srid),", x=").concat(o(this.x),", y=").concat(o(this.y),", z=").concat(o(this.z),"}")},s}();function o(s){return Number.isInteger(s)?s.toString()+".0":s.toString()}e.Point=a,Object.defineProperty(a.prototype,i,{value:!0,enumerable:!1,configurable:!1,writable:!1}),e.isPoint=function(s){return s!=null&&s[i]===!0}},5459:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(j,B,z,W){W===void 0&&(W=z);var Z=Object.getOwnPropertyDescriptor(B,z);Z&&!("get"in Z?!B.__esModule:Z.writable||Z.configurable)||(Z={enumerable:!0,get:function(){return B[z]}}),Object.defineProperty(j,W,Z)}:function(j,B,z,W){W===void 0&&(W=z),j[W]=B[z]}),i=this&&this.__setModuleDefault||(Object.create?function(j,B){Object.defineProperty(j,"default",{enumerable:!0,value:B})}:function(j,B){j.default=B}),a=this&&this.__importStar||function(j){if(j&&j.__esModule)return j;var B={};if(j!=null)for(var z in j)z!=="default"&&Object.prototype.hasOwnProperty.call(j,z)&&n(B,j,z);return i(B,j),B},o=this&&this.__read||function(j,B){var z=typeof Symbol=="function"&&j[Symbol.iterator];if(!z)return j;var W,Z,Q=z.call(j),re=[];try{for(;(B===void 0||B-- >0)&&!(W=Q.next()).done;)re.push(W.value)}catch(ee){Z={error:ee}}finally{try{W&&!W.done&&(z=Q.return)&&z.call(Q)}finally{if(Z)throw Z.error}}return re};Object.defineProperty(e,"__esModule",{value:!0}),e.isDateTime=e.DateTime=e.isLocalDateTime=e.LocalDateTime=e.isDate=e.Date=e.isTime=e.Time=e.isLocalTime=e.LocalTime=e.isDuration=e.Duration=void 0;var s=a(t(5022)),u=t(6587),l=t(9691),c=a(t(3371)),f={value:!0,enumerable:!1,configurable:!1,writable:!1},h="__isDuration__",d="__isLocalTime__",v="__isTime__",y="__isDate__",w="__isLocalDateTime__",b="__isDateTime__",p=function(){function j(B,z,W,Z){this.months=(0,u.assertNumberOrInteger)(B,"Months"),this.days=(0,u.assertNumberOrInteger)(z,"Days"),(0,u.assertNumberOrInteger)(W,"Seconds"),(0,u.assertNumberOrInteger)(Z,"Nanoseconds"),this.seconds=s.normalizeSecondsForDuration(W,Z),this.nanoseconds=s.normalizeNanosecondsForDuration(Z),Object.freeze(this)}return j.prototype.toString=function(){return s.durationToIsoString(this.months,this.days,this.seconds,this.nanoseconds)},j}();e.Duration=p,Object.defineProperty(p.prototype,h,f),e.isDuration=function(j){return R(j,h)};var m=function(){function j(B,z,W,Z){this.hour=s.assertValidHour(B),this.minute=s.assertValidMinute(z),this.second=s.assertValidSecond(W),this.nanosecond=s.assertValidNanosecond(Z),Object.freeze(this)}return j.fromStandardDate=function(B,z){N(B,z);var W=s.totalNanoseconds(B,z);return new j(B.getHours(),B.getMinutes(),B.getSeconds(),W instanceof c.default?W.toInt():typeof W=="bigint"?(0,c.int)(W).toInt():W)},j.prototype.toString=function(){return s.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)},j}();e.LocalTime=m,Object.defineProperty(m.prototype,d,f),e.isLocalTime=function(j){return R(j,d)};var x=function(){function j(B,z,W,Z,Q){this.hour=s.assertValidHour(B),this.minute=s.assertValidMinute(z),this.second=s.assertValidSecond(W),this.nanosecond=s.assertValidNanosecond(Z),this.timeZoneOffsetSeconds=(0,u.assertNumberOrInteger)(Q,"Time zone offset in seconds"),Object.freeze(this)}return j.fromStandardDate=function(B,z){return N(B,z),new j(B.getHours(),B.getMinutes(),B.getSeconds(),(0,c.toNumber)(s.totalNanoseconds(B,z)),s.timeZoneOffsetInSeconds(B))},j.prototype.toString=function(){return s.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)+s.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds)},j}();e.Time=x,Object.defineProperty(x.prototype,v,f),e.isTime=function(j){return R(j,v)};var T=function(){function j(B,z,W){this.year=s.assertValidYear(B),this.month=s.assertValidMonth(z),this.day=s.assertValidDay(W),Object.freeze(this)}return j.fromStandardDate=function(B){return N(B),new j(B.getFullYear(),B.getMonth()+1,B.getDate())},j.prototype.toStandardDate=function(){return s.isoStringToStandardDate(this.toString())},j.prototype.toString=function(){return s.dateToIsoString(this.year,this.month,this.day)},j}();e.Date=T,Object.defineProperty(T.prototype,y,f),e.isDate=function(j){return R(j,y)};var P=function(){function j(B,z,W,Z,Q,re,ee){this.year=s.assertValidYear(B),this.month=s.assertValidMonth(z),this.day=s.assertValidDay(W),this.hour=s.assertValidHour(Z),this.minute=s.assertValidMinute(Q),this.second=s.assertValidSecond(re),this.nanosecond=s.assertValidNanosecond(ee),Object.freeze(this)}return j.fromStandardDate=function(B,z){return N(B,z),new j(B.getFullYear(),B.getMonth()+1,B.getDate(),B.getHours(),B.getMinutes(),B.getSeconds(),(0,c.toNumber)(s.totalNanoseconds(B,z)))},j.prototype.toStandardDate=function(){return s.isoStringToStandardDate(this.toString())},j.prototype.toString=function(){return D(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)},j}();e.LocalDateTime=P,Object.defineProperty(P.prototype,w,f),e.isLocalDateTime=function(j){return R(j,w)};var C=function(){function j(B,z,W,Z,Q,re,ee,ue,de){this.year=s.assertValidYear(B),this.month=s.assertValidMonth(z),this.day=s.assertValidDay(W),this.hour=s.assertValidHour(Z),this.minute=s.assertValidMinute(Q),this.second=s.assertValidSecond(re),this.nanosecond=s.assertValidNanosecond(ee);var se=o(function(he,fe){var Ee=he!=null,Ce=fe!=null&&fe!=="";if(!Ee&&!Ce)throw(0,l.newError)("Unable to create DateTime without either time zone offset or id. Please specify either of them. Given offset: ".concat(he," and id: ").concat(fe));var ke=[void 0,void 0];return Ee&&((0,u.assertNumberOrInteger)(he,"Time zone offset in seconds"),ke[0]=he),Ce&&((0,u.assertString)(fe,"Time zone ID"),s.assertValidZoneId("Time zone ID",fe),ke[1]=fe),ke}(ue,de),2),me=se[0],Me=se[1];this.timeZoneOffsetSeconds=me,this.timeZoneId=Me??void 0,Object.freeze(this)}return j.fromStandardDate=function(B,z){return N(B,z),new j(B.getFullYear(),B.getMonth()+1,B.getDate(),B.getHours(),B.getMinutes(),B.getSeconds(),(0,c.toNumber)(s.totalNanoseconds(B,z)),s.timeZoneOffsetInSeconds(B),null)},j.prototype.toStandardDate=function(){return s.toStandardDate(this._toUTC())},j.prototype.toString=function(){var B;return D(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)+(this.timeZoneOffsetSeconds!=null?s.timeZoneOffsetToIsoString((B=this.timeZoneOffsetSeconds)!==null&&B!==void 0?B:0):"")+(this.timeZoneId!=null?"[".concat(this.timeZoneId,"]"):"")},j.prototype._toUTC=function(){var B;if(this.timeZoneOffsetSeconds===void 0)throw new Error("Requires DateTime created with time zone offset");var z=s.localDateTimeToEpochSecond(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond).subtract((B=this.timeZoneOffsetSeconds)!==null&&B!==void 0?B:0);return(0,c.int)(z).multiply(1e3).add((0,c.int)(this.nanosecond).div(1e6)).toNumber()},j}();function R(j,B){return j!=null&&j[B]===!0}function D(j,B,z,W,Z,Q,re){return s.dateToIsoString(j,B,z)+"T"+s.timeToIsoString(W,Z,Q,re)}function N(j,B){(0,u.assertValidDate)(j,"Standard date"),B!=null&&(0,u.assertNumberOrInteger)(B,"Nanosecond")}e.DateTime=C,Object.defineProperty(C.prototype,b,f),e.isDateTime=function(j){return R(j,b)}},5909:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function n(i){var a=i.run;this._run=a}return n.fromTransaction=function(i){return new n({run:i.run.bind(i)})},n.prototype.run=function(i,a){return this._run(i,a)},n}();e.default=t},4569:function(r,e,t){var n,i,a=this&&this.__extends||(n=function(l,c){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(f[d]=h[d])},n(l,c)},function(l,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function f(){this.constructor=l}n(l,c),l.prototype=c===null?Object.create(c):(f.prototype=c.prototype,new f)}),o=this&&this.__assign||function(){return o=Object.assign||function(l){for(var c,f=1,h=arguments.length;f<h;f++)for(var d in c=arguments[f])Object.prototype.hasOwnProperty.call(c,d)&&(l[d]=c[d]);return l},o.apply(this,arguments)},s=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0});var u=function(l){function c(f){var h=f.connectionHolder,d=f.onClose,v=f.onBookmarks,y=f.onConnection,w=f.reactive,b=f.fetchSize,p=f.impersonatedUser,m=f.highRecordWatermark,x=f.lowRecordWatermark,T=f.notificationFilter,P=f.apiTelemetryConfig,C=l.call(this,{connectionHolder:h,onClose:d,onBookmarks:v,onConnection:y,reactive:w,fetchSize:b,impersonatedUser:p,highRecordWatermark:m,lowRecordWatermark:x,notificationFilter:T,apiTelemetryConfig:P})||this;return C[i]="TransactionPromise",C}return a(c,l),c.prototype.then=function(f,h){return this._getOrCreateBeginPromise().then(f,h)},c.prototype.catch=function(f){return this._getOrCreateBeginPromise().catch(f)},c.prototype.finally=function(f){return this._getOrCreateBeginPromise().finally(f)},c.prototype._getOrCreateBeginPromise=function(){var f=this;return this._beginPromise==null&&(this._beginPromise=new Promise(function(h,d){f._resolve=h,f._reject=d,f._beginError!=null&&d(f._beginError),f._beginMetadata!=null&&h(f._toTransaction())})),this._beginPromise},c.prototype._toTransaction=function(){return o(o({},this),{run:l.prototype.run.bind(this),commit:l.prototype.commit.bind(this),rollback:l.prototype.rollback.bind(this),close:l.prototype.close.bind(this),isOpen:l.prototype.isOpen.bind(this),_begin:this._begin.bind(this)})},c.prototype._begin=function(f,h){return l.prototype._begin.call(this,f,h,{onError:this._onBeginError.bind(this),onComplete:this._onBeginMetadata.bind(this)})},c.prototype._onBeginError=function(f){this._beginError=f,this._reject!=null&&this._reject(f)},c.prototype._onBeginMetadata=function(f){this._beginMetadata=f??{},this._resolve!=null&&this._resolve(this._toTransaction())},c}(s(t(9473)).default);i=Symbol.toStringTag,e.default=u},9473:function(r,e,t){var n=this&&this.__awaiter||function(b,p,m,x){return new(m||(m=Promise))(function(T,P){function C(N){try{D(x.next(N))}catch(j){P(j)}}function R(N){try{D(x.throw(N))}catch(j){P(j)}}function D(N){var j;N.done?T(N.value):(j=N.value,j instanceof m?j:new m(function(B){B(j)})).then(C,R)}D((x=x.apply(b,p||[])).next())})},i=this&&this.__generator||function(b,p){var m,x,T,P,C={label:0,sent:function(){if(1&T[0])throw T[1];return T[1]},trys:[],ops:[]};return P={next:R(0),throw:R(1),return:R(2)},typeof Symbol=="function"&&(P[Symbol.iterator]=function(){return this}),P;function R(D){return function(N){return function(j){if(m)throw new TypeError("Generator is already executing.");for(;P&&(P=0,j[0]&&(C=0)),C;)try{if(m=1,x&&(T=2&j[0]?x.return:j[0]?x.throw||((T=x.return)&&T.call(x),0):x.next)&&!(T=T.call(x,j[1])).done)return T;switch(x=0,T&&(j=[2&j[0],T.value]),j[0]){case 0:case 1:T=j;break;case 4:return C.label++,{value:j[1],done:!1};case 5:C.label++,x=j[1],j=[0];continue;case 7:j=C.ops.pop(),C.trys.pop();continue;default:if(!((T=(T=C.trys).length>0&&T[T.length-1])||j[0]!==6&&j[0]!==2)){C=0;continue}if(j[0]===3&&(!T||j[1]>T[0]&&j[1]<T[3])){C.label=j[1];break}if(j[0]===6&&C.label<T[1]){C.label=T[1],T=j;break}if(T&&C.label<T[2]){C.label=T[2],C.ops.push(j);break}T[2]&&C.ops.pop(),C.trys.pop();continue}j=p.call(b,C)}catch(B){j=[6,B],x=0}finally{m=T=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}([D,N])}}},a=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(e,"__esModule",{value:!0});var o=t(6587),s=t(3618),u=t(9730),l=t(754),c=t(2696),f=t(9691),h=a(t(9512)),d=function(){function b(p){var m=p.connectionHolder,x=p.onClose,T=p.onBookmarks,P=p.onConnection,C=p.reactive,R=p.fetchSize,D=p.impersonatedUser,N=p.highRecordWatermark,j=p.lowRecordWatermark,B=p.notificationFilter,z=p.apiTelemetryConfig,W=this;this._connectionHolder=m,this._reactive=C,this._state=v.ACTIVE,this._onClose=x,this._onBookmarks=T,this._onConnection=P,this._onError=this._onErrorCallback.bind(this),this._fetchSize=R,this._onComplete=this._onCompleteCallback.bind(this),this._results=[],this._impersonatedUser=D,this._lowRecordWatermak=j,this._highRecordWatermark=N,this._bookmarks=u.Bookmarks.empty(),this._notificationFilter=B,this._apiTelemetryConfig=z,this._acceptActive=function(){},this._activePromise=new Promise(function(Z,Q){W._acceptActive=Z})}return b.prototype._begin=function(p,m,x){var T=this;this._connectionHolder.getConnection().then(function(P){return n(T,void 0,void 0,function(){var C,R=this;return i(this,function(D){switch(D.label){case 0:return this._onConnection(),P==null?[3,2]:(C=this,[4,p()]);case 1:return C._bookmarks=D.sent(),[2,P.beginTransaction({bookmarks:this._bookmarks,txConfig:m,mode:this._connectionHolder.mode(),database:this._connectionHolder.database(),impersonatedUser:this._impersonatedUser,notificationFilter:this._notificationFilter,apiTelemetryConfig:this._apiTelemetryConfig,beforeError:function(N){x!=null&&x.onError(N),R._onError(N).catch(function(){})},afterComplete:function(N){x!=null&&x.onComplete(N),R._onComplete(N)}})];case 2:throw(0,f.newError)("No connection available")}})})}).catch(function(P){x!=null&&x.onError(P),T._onError(P).catch(function(){})}).finally(function(){return T._acceptActive()})},b.prototype.run=function(p,m){var x=(0,o.validateQueryAndParameters)(p,m),T=x.validatedQuery,P=x.params,C=this._state.run(T,P,{connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,reactive:this._reactive,fetchSize:this._fetchSize,highRecordWatermark:this._highRecordWatermark,lowRecordWatermark:this._lowRecordWatermak,preparationJob:this._activePromise});return this._results.push(C),C},b.prototype.commit=function(){var p=this,m=this._state.commit({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:function(x){return p._onCompleteCallback(x,p._bookmarks)},onConnection:this._onConnection,pendingResults:this._results,preparationJob:this._activePromise});return this._state=m.state,this._onClose(),new Promise(function(x,T){m.result.subscribe({onCompleted:function(){return x()},onError:function(P){return T(P)}})})},b.prototype.rollback=function(){var p=this._state.rollback({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results,preparationJob:this._activePromise});return this._state=p.state,this._onClose(),new Promise(function(m,x){p.result.subscribe({onCompleted:function(){return m()},onError:function(T){return x(T)}})})},b.prototype.isOpen=function(){return this._state===v.ACTIVE},b.prototype.close=function(){return n(this,void 0,void 0,function(){return i(this,function(p){switch(p.label){case 0:return this.isOpen()?[4,this.rollback()]:[3,2];case 1:p.sent(),p.label=2;case 2:return[2]}})})},b.prototype[Symbol.asyncDispose]=function(){return this.close()},b.prototype._onErrorCallback=function(p){return this._state===v.FAILED?Promise.resolve(null):(this._state=v.FAILED,this._onClose(),this._results.forEach(function(m){m.isOpen()&&m._streamObserverPromise.then(function(x){return x.onError(p)}).catch(function(x){})}),this._connectionHolder.releaseConnection())},b.prototype._onCompleteCallback=function(p,m){this._onBookmarks(new u.Bookmarks(p==null?void 0:p.bookmark),m??u.Bookmarks.empty(),p==null?void 0:p.db)},b}(),v={ACTIVE:{commit:function(b){return{result:y(!0,b.connectionHolder,b.onError,b.onComplete,b.onConnection,b.pendingResults,b.preparationJob),state:v.SUCCEEDED}},rollback:function(b){return{result:y(!1,b.connectionHolder,b.onError,b.onComplete,b.onConnection,b.pendingResults,b.preparationJob),state:v.ROLLED_BACK}},run:function(b,p,m){var x=m.connectionHolder,T=m.onError,P=m.onComplete,C=m.onConnection,R=m.reactive,D=m.fetchSize,N=m.highRecordWatermark,j=m.lowRecordWatermark,B=m.preparationJob,z=B??Promise.resolve();return w(x.getConnection().then(function(W){return z.then(function(){return W})}).then(function(W){if(C(),W!=null)return W.run(b,p,{bookmarks:u.Bookmarks.empty(),txConfig:l.TxConfig.empty(),beforeError:T,afterComplete:P,reactive:R,fetchSize:D,highRecordWatermark:N,lowRecordWatermark:j});throw(0,f.newError)("No connection available")}).catch(function(W){return new c.FailedObserver({error:W,onError:T})}),b,p,x,N,j)}},FAILED:{commit:function(b){var p=b.connectionHolder,m=b.onError;return b.onComplete,{result:w(new c.FailedObserver({error:(0,f.newError)("Cannot commit this transaction, because it has been rolled back either because of an error or explicit termination."),onError:m}),"COMMIT",{},p,0,0),state:v.FAILED}},rollback:function(b){var p=b.connectionHolder;return b.onError,b.onComplete,{result:w(new c.CompletedObserver,"ROLLBACK",{},p,0,0),state:v.FAILED}},run:function(b,p,m){var x=m.connectionHolder,T=m.onError;return m.onComplete,w(new c.FailedObserver({error:(0,f.newError)("Cannot run query in this transaction, because it has been rolled back either because of an error or explicit termination."),onError:T}),b,p,x,0,0)}},SUCCEEDED:{commit:function(b){var p=b.connectionHolder,m=b.onError;return b.onComplete,{result:w(new c.FailedObserver({error:(0,f.newError)("Cannot commit this transaction, because it has already been committed."),onError:m}),"COMMIT",{},s.EMPTY_CONNECTION_HOLDER,0,0),state:v.SUCCEEDED,connectionHolder:p}},rollback:function(b){var p=b.connectionHolder,m=b.onError;return b.onComplete,{result:w(new c.FailedObserver({error:(0,f.newError)("Cannot rollback this transaction, because it has already been committed."),onError:m}),"ROLLBACK",{},s.EMPTY_CONNECTION_HOLDER,0,0),state:v.SUCCEEDED,connectionHolder:p}},run:function(b,p,m){var x=m.connectionHolder,T=m.onError;return m.onComplete,w(new c.FailedObserver({error:(0,f.newError)("Cannot run query in this transaction, because it has already been committed."),onError:T}),b,p,x,0,0)}},ROLLED_BACK:{commit:function(b){var p=b.connectionHolder,m=b.onError;return b.onComplete,{result:w(new c.FailedObserver({error:(0,f.newError)("Cannot commit this transaction, because it has already been rolled back."),onError:m}),"COMMIT",{},p,0,0),state:v.ROLLED_BACK}},rollback:function(b){var p=b.connectionHolder;return b.onError,b.onComplete,{result:w(new c.FailedObserver({error:(0,f.newError)("Cannot rollback this transaction, because it has already been rolled back.")}),"ROLLBACK",{},p,0,0),state:v.ROLLED_BACK}},run:function(b,p,m){var x=m.connectionHolder,T=m.onError;return m.onComplete,w(new c.FailedObserver({error:(0,f.newError)("Cannot run query in this transaction, because it has already been rolled back."),onError:T}),b,p,x,0,0)}}};function y(b,p,m,x,T,P,C){var R=C??Promise.resolve(),D=p.getConnection().then(function(N){return R.then(function(){return N})}).then(function(N){return T(),P.forEach(function(j){return j._cancel()}),Promise.all(P.map(function(j){return j.summary()})).then(function(j){if(N!=null)return b?N.commitTransaction({beforeError:m,afterComplete:x}):N.rollbackTransaction({beforeError:m,afterComplete:x});throw(0,f.newError)("No connection available")})}).catch(function(N){return new c.FailedObserver({error:N,onError:m})});return new h.default(D,b?"COMMIT":"ROLLBACK",{},p,{high:Number.MAX_VALUE,low:Number.MAX_VALUE})}function w(b,p,m,x,T,P){return x===void 0&&(x=s.EMPTY_CONNECTION_HOLDER),new h.default(Promise.resolve(b),p,m,new s.ReadOnlyConnectionHolder(x??s.EMPTY_CONNECTION_HOLDER),{low:P,high:T})}e.default=d},6872:function(r,e){var t,n=this&&this.__extends||(t=function(o,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},t(o,s)},function(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=o}t(o,s),o.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)});Object.defineProperty(e,"__esModule",{value:!0}),e.InternalConfig=e.Config=void 0;var i=function(){this.encrypted=void 0,this.trust=void 0,this.trustedCertificates=[],this.maxConnectionPoolSize=100,this.maxConnectionLifetime=36e5,this.connectionAcquisitionTimeout=6e4,this.maxTransactionRetryTime=3e4,this.connectionLivenessCheckTimeout=void 0,this.connectionTimeout=3e4,this.disableLosslessIntegers=!1,this.useBigInt=!1,this.logging=void 0,this.resolver=void 0,this.notificationFilter=void 0,this.userAgent=void 0,this.telemetryDisabled=!1,this.clientCertificate=void 0};e.Config=i;var a=function(o){function s(){return o!==null&&o.apply(this,arguments)||this}return n(s,o),s}(i);e.InternalConfig=a},7857:function(r,e,t){var n,i=this&&this.__extends||(n=function(d,v){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,w){y.__proto__=w}||function(y,w){for(var b in w)Object.prototype.hasOwnProperty.call(w,b)&&(y[b]=w[b])},n(d,v)},function(d,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function y(){this.constructor=d}n(d,v),d.prototype=v===null?Object.create(v):(y.prototype=v.prototype,new y)}),a=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0}),e.WRITE=e.READ=e.Driver=void 0;var o=t(9305),s=a(t(3466)),u=o.internal.constants.FETCH_ALL,l=o.driver.READ,c=o.driver.WRITE;e.READ=l,e.WRITE=c;var f=function(d){function v(){return d!==null&&d.apply(this,arguments)||this}return i(v,d),v.prototype.rxSession=function(y){var w=y===void 0?{}:y,b=w.defaultAccessMode,p=b===void 0?c:b,m=w.bookmarks,x=w.database,T=x===void 0?"":x,P=w.fetchSize,C=w.impersonatedUser,R=w.bookmarkManager,D=w.notificationFilter,N=w.auth;return new s.default({session:this._newSession({defaultAccessMode:p,bookmarkOrBookmarks:m,database:T,impersonatedUser:C,auth:N,reactive:!1,fetchSize:h(P,this._config.fetchSize),bookmarkManager:R,notificationFilter:D,log:this._log}),config:this._config,log:this._log})},v}(o.Driver);function h(d,v){var y=parseInt(d,10);if(y>0||y===u)return y;if(y===0||y<0)throw new Error("The fetch size can only be a positive value or ".concat(u," for ALL. However fetchSize = ").concat(y));return v}e.Driver=f,e.default=f},1187:function(r,e,t){var n=this&&this.__awaiter||function(Z,Q,re,ee){return new(re||(re=Promise))(function(ue,de){function se(he){try{Me(ee.next(he))}catch(fe){de(fe)}}function me(he){try{Me(ee.throw(he))}catch(fe){de(fe)}}function Me(he){var fe;he.done?ue(he.value):(fe=he.value,fe instanceof re?fe:new re(function(Ee){Ee(fe)})).then(se,me)}Me((ee=ee.apply(Z,Q||[])).next())})},i=this&&this.__generator||function(Z,Q){var re,ee,ue,de,se={label:0,sent:function(){if(1&ue[0])throw ue[1];return ue[1]},trys:[],ops:[]};return de={next:me(0),throw:me(1),return:me(2)},typeof Symbol=="function"&&(de[Symbol.iterator]=function(){return this}),de;function me(Me){return function(he){return function(fe){if(re)throw new TypeError("Generator is already executing.");for(;de&&(de=0,fe[0]&&(se=0)),se;)try{if(re=1,ee&&(ue=2&fe[0]?ee.return:fe[0]?ee.throw||((ue=ee.return)&&ue.call(ee),0):ee.next)&&!(ue=ue.call(ee,fe[1])).done)return ue;switch(ee=0,ue&&(fe=[2&fe[0],ue.value]),fe[0]){case 0:case 1:ue=fe;break;case 4:return se.label++,{value:fe[1],done:!1};case 5:se.label++,ee=fe[1],fe=[0];continue;case 7:fe=se.ops.pop(),se.trys.pop();continue;default:if(!((ue=(ue=se.trys).length>0&&ue[ue.length-1])||fe[0]!==6&&fe[0]!==2)){se=0;continue}if(fe[0]===3&&(!ue||fe[1]>ue[0]&&fe[1]<ue[3])){se.label=fe[1];break}if(fe[0]===6&&se.label<ue[1]){se.label=ue[1],ue=fe;break}if(ue&&se.label<ue[2]){se.label=ue[2],se.ops.push(fe);break}ue[2]&&se.ops.pop(),se.trys.pop();continue}fe=Q.call(Z,se)}catch(Ee){fe=[6,Ee],ee=0}finally{re=ue=0}if(5&fe[0])throw fe[1];return{value:fe[0]?fe[1]:void 0,done:!0}}([Me,he])}}},a=this&&this.__importDefault||function(Z){return Z&&Z.__esModule?Z:{default:Z}};Object.defineProperty(e,"__esModule",{value:!0}),e.UnboundRelationship=e.Relationship=e.Node=e.Record=e.ServerInfo=e.GqlStatusObject=e.Notification=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.ResultSummary=e.RxResult=e.RxManagedTransaction=e.RxTransaction=e.RxSession=e.EagerResult=e.Result=e.ManagedTransaction=e.Transaction=e.Session=e.Driver=e.temporal=e.spatial=e.graph=e.error=e.routing=e.session=e.types=e.logging=e.auth=e.isRetryableError=e.Neo4jError=e.integer=e.isUnboundRelationship=e.isRelationship=e.isPathSegment=e.isPath=e.isNode=e.isDateTime=e.isLocalDateTime=e.isDate=e.isTime=e.isLocalTime=e.isDuration=e.isPoint=e.isInt=e.int=e.hasReachableServer=e.driver=e.authTokenManagers=void 0,e.clientCertificateProviders=e.notificationFilterMinimumSeverityLevel=e.notificationFilterDisabledClassification=e.notificationFilterDisabledCategory=e.notificationSeverityLevel=e.notificationClassification=e.notificationCategory=e.resultTransformers=e.bookmarkManager=e.DateTime=e.LocalDateTime=e.Date=e.Time=e.LocalTime=e.Duration=e.Integer=e.Point=e.PathSegment=e.Path=void 0;var o=t(7857);Object.defineProperty(e,"Driver",{enumerable:!0,get:function(){return o.Driver}});var s=a(t(3659)),u=t(9305);Object.defineProperty(e,"authTokenManagers",{enumerable:!0,get:function(){return u.authTokenManagers}}),Object.defineProperty(e,"Neo4jError",{enumerable:!0,get:function(){return u.Neo4jError}}),Object.defineProperty(e,"isRetryableError",{enumerable:!0,get:function(){return u.isRetryableError}}),Object.defineProperty(e,"error",{enumerable:!0,get:function(){return u.error}}),Object.defineProperty(e,"Integer",{enumerable:!0,get:function(){return u.Integer}}),Object.defineProperty(e,"int",{enumerable:!0,get:function(){return u.int}}),Object.defineProperty(e,"isInt",{enumerable:!0,get:function(){return u.isInt}}),Object.defineProperty(e,"isPoint",{enumerable:!0,get:function(){return u.isPoint}}),Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return u.Point}}),Object.defineProperty(e,"Date",{enumerable:!0,get:function(){return u.Date}}),Object.defineProperty(e,"DateTime",{enumerable:!0,get:function(){return u.DateTime}}),Object.defineProperty(e,"Duration",{enumerable:!0,get:function(){return u.Duration}}),Object.defineProperty(e,"isDate",{enumerable:!0,get:function(){return u.isDate}}),Object.defineProperty(e,"isDateTime",{enumerable:!0,get:function(){return u.isDateTime}}),Object.defineProperty(e,"isDuration",{enumerable:!0,get:function(){return u.isDuration}}),Object.defineProperty(e,"isLocalDateTime",{enumerable:!0,get:function(){return u.isLocalDateTime}}),Object.defineProperty(e,"isLocalTime",{enumerable:!0,get:function(){return u.isLocalTime}}),Object.defineProperty(e,"isNode",{enumerable:!0,get:function(){return u.isNode}}),Object.defineProperty(e,"isPath",{enumerable:!0,get:function(){return u.isPath}}),Object.defineProperty(e,"isPathSegment",{enumerable:!0,get:function(){return u.isPathSegment}}),Object.defineProperty(e,"isRelationship",{enumerable:!0,get:function(){return u.isRelationship}}),Object.defineProperty(e,"isTime",{enumerable:!0,get:function(){return u.isTime}}),Object.defineProperty(e,"isUnboundRelationship",{enumerable:!0,get:function(){return u.isUnboundRelationship}}),Object.defineProperty(e,"LocalDateTime",{enumerable:!0,get:function(){return u.LocalDateTime}}),Object.defineProperty(e,"LocalTime",{enumerable:!0,get:function(){return u.LocalTime}}),Object.defineProperty(e,"Time",{enumerable:!0,get:function(){return u.Time}}),Object.defineProperty(e,"Node",{enumerable:!0,get:function(){return u.Node}}),Object.defineProperty(e,"Path",{enumerable:!0,get:function(){return u.Path}}),Object.defineProperty(e,"PathSegment",{enumerable:!0,get:function(){return u.PathSegment}}),Object.defineProperty(e,"Relationship",{enumerable:!0,get:function(){return u.Relationship}}),Object.defineProperty(e,"UnboundRelationship",{enumerable:!0,get:function(){return u.UnboundRelationship}}),Object.defineProperty(e,"Record",{enumerable:!0,get:function(){return u.Record}}),Object.defineProperty(e,"ResultSummary",{enumerable:!0,get:function(){return u.ResultSummary}}),Object.defineProperty(e,"Plan",{enumerable:!0,get:function(){return u.Plan}}),Object.defineProperty(e,"ProfiledPlan",{enumerable:!0,get:function(){return u.ProfiledPlan}}),Object.defineProperty(e,"QueryStatistics",{enumerable:!0,get:function(){return u.QueryStatistics}}),Object.defineProperty(e,"Notification",{enumerable:!0,get:function(){return u.Notification}}),Object.defineProperty(e,"GqlStatusObject",{enumerable:!0,get:function(){return u.GqlStatusObject}}),Object.defineProperty(e,"ServerInfo",{enumerable:!0,get:function(){return u.ServerInfo}}),Object.defineProperty(e,"Result",{enumerable:!0,get:function(){return u.Result}}),Object.defineProperty(e,"EagerResult",{enumerable:!0,get:function(){return u.EagerResult}}),Object.defineProperty(e,"auth",{enumerable:!0,get:function(){return u.auth}}),Object.defineProperty(e,"Session",{enumerable:!0,get:function(){return u.Session}}),Object.defineProperty(e,"Transaction",{enumerable:!0,get:function(){return u.Transaction}}),Object.defineProperty(e,"ManagedTransaction",{enumerable:!0,get:function(){return u.ManagedTransaction}}),Object.defineProperty(e,"bookmarkManager",{enumerable:!0,get:function(){return u.bookmarkManager}}),Object.defineProperty(e,"routing",{enumerable:!0,get:function(){return u.routing}}),Object.defineProperty(e,"resultTransformers",{enumerable:!0,get:function(){return u.resultTransformers}}),Object.defineProperty(e,"notificationCategory",{enumerable:!0,get:function(){return u.notificationCategory}}),Object.defineProperty(e,"notificationClassification",{enumerable:!0,get:function(){return u.notificationClassification}}),Object.defineProperty(e,"notificationSeverityLevel",{enumerable:!0,get:function(){return u.notificationSeverityLevel}}),Object.defineProperty(e,"notificationFilterDisabledCategory",{enumerable:!0,get:function(){return u.notificationFilterDisabledCategory}}),Object.defineProperty(e,"notificationFilterDisabledClassification",{enumerable:!0,get:function(){return u.notificationFilterDisabledClassification}}),Object.defineProperty(e,"notificationFilterMinimumSeverityLevel",{enumerable:!0,get:function(){return u.notificationFilterMinimumSeverityLevel}}),Object.defineProperty(e,"clientCertificateProviders",{enumerable:!0,get:function(){return u.clientCertificateProviders}});var l=t(6672),c=a(t(3466));e.RxSession=c.default;var f=a(t(5742));e.RxTransaction=f.default;var h=a(t(1530));e.RxManagedTransaction=h.default;var d=a(t(3057));e.RxResult=d.default;var v=u.internal.util,y=v.ENCRYPTION_ON,w=v.assertString,b=v.isEmptyObjectOrNull,p=u.internal.serverAddress.ServerAddress,m=u.internal.urlUtil,x="neo4j-javascript/"+s.default;function T(Z,Q,re){re===void 0&&(re={}),w(Z,"Bolt URL");var ee,ue=m.parseDatabaseUrl(Z),de=!1,se=!1;switch(ue.scheme){case"bolt":break;case"bolt+s":se=!0,ee="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES";break;case"bolt+ssc":se=!0,ee="TRUST_ALL_CERTIFICATES";break;case"neo4j":de=!0;break;case"neo4j+s":se=!0,ee="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES",de=!0;break;case"neo4j+ssc":se=!0,ee="TRUST_ALL_CERTIFICATES",de=!0;break;default:throw new Error("Unknown scheme: ".concat(ue.scheme))}if(se){if("encrypted"in re||"trust"in re)throw new Error("Encryption/trust can only be configured either through URL or config, not both");re.encrypted=y,re.trust=ee,re.clientCertificate=(0,u.resolveCertificateProvider)(re.clientCertificate)}var me=function(fe){if(typeof(Ee=fe)=="object"&&Ee!=null&&"getToken"in Ee&&"handleSecurityException"in Ee&&typeof Ee.getToken=="function"&&typeof Ee.handleSecurityException=="function")return fe;var Ee,Ce=fe;return(Ce=Ce||{}).scheme=Ce.scheme||"none",(0,u.staticAuthTokenManager)({authToken:Ce})}(Q);re.userAgent=re.userAgent||x,re.boltAgent=u.internal.boltAgent.fromVersion(s.default);var Me=p.fromUrl(ue.hostAndPort),he={address:Me,typename:de?"Routing":"Direct",routing:de};return new o.Driver(he,re,function(){if(de)return function(fe,Ee,Ce,ke){return new l.RoutingConnectionProvider({id:fe,config:Ee,log:Ce,hostNameResolver:ke,authTokenManager:me,address:Me,userAgent:Ee.userAgent,boltAgent:Ee.boltAgent,routingContext:ue.query})};if(!b(ue.query))throw new Error("Parameters are not supported with none routed scheme. Given URL: '".concat(Z,"'"));return function(fe,Ee,Ce){return new l.DirectConnectionProvider({id:fe,config:Ee,log:Ce,authTokenManager:me,address:Me,userAgent:Ee.userAgent,boltAgent:Ee.boltAgent})}}())}function P(Z,Q){return n(this,void 0,void 0,function(){var re;return i(this,function(ee){switch(ee.label){case 0:re=T(Z,{scheme:"none",principal:"",credentials:""},Q),ee.label=1;case 1:return ee.trys.push([1,,3,5]),[4,re.getNegotiatedProtocolVersion()];case 2:return ee.sent(),[2,!0];case 3:return[4,re.close()];case 4:return ee.sent(),[7];case 5:return[2]}})})}e.driver=T,e.hasReachableServer=P;var C={console:function(Z){return{level:Z,logger:function(Q,re){return console.log("".concat(t.g.Date.now()," ").concat(Q.toUpperCase()," ").concat(re))}}}};e.logging=C;var R={Node:u.Node,Relationship:u.Relationship,UnboundRelationship:u.UnboundRelationship,PathSegment:u.PathSegment,Path:u.Path,Result:u.Result,EagerResult:u.EagerResult,ResultSummary:u.ResultSummary,Record:u.Record,Point:u.Point,Date:u.Date,DateTime:u.DateTime,Duration:u.Duration,LocalDateTime:u.LocalDateTime,LocalTime:u.LocalTime,Time:u.Time,Integer:u.Integer};e.types=R;var D={READ:o.READ,WRITE:o.WRITE};e.session=D;var N={toNumber:u.toNumber,toString:u.toString,inSafeRange:u.inSafeRange};e.integer=N;var j={isPoint:u.isPoint};e.spatial=j;var B={isDuration:u.isDuration,isLocalTime:u.isLocalTime,isTime:u.isTime,isDate:u.isDate,isLocalDateTime:u.isLocalDateTime,isDateTime:u.isDateTime};e.temporal=B;var z={isNode:u.isNode,isPath:u.isPath,isPathSegment:u.isPathSegment,isRelationship:u.isRelationship,isUnboundRelationship:u.isUnboundRelationship};e.graph=z;var W={authTokenManagers:u.authTokenManagers,driver:T,hasReachableServer:P,int:u.int,isInt:u.isInt,isPoint:u.isPoint,isDuration:u.isDuration,isLocalTime:u.isLocalTime,isTime:u.isTime,isDate:u.isDate,isLocalDateTime:u.isLocalDateTime,isDateTime:u.isDateTime,isNode:u.isNode,isPath:u.isPath,isPathSegment:u.isPathSegment,isRelationship:u.isRelationship,isUnboundRelationship:u.isUnboundRelationship,integer:N,Neo4jError:u.Neo4jError,isRetryableError:u.isRetryableError,auth:u.auth,logging:C,types:R,session:D,routing:u.routing,error:u.error,graph:z,spatial:j,temporal:B,Driver:o.Driver,Session:u.Session,Transaction:u.Transaction,ManagedTransaction:u.ManagedTransaction,Result:u.Result,EagerResult:u.EagerResult,RxSession:c.default,RxTransaction:f.default,RxManagedTransaction:h.default,RxResult:d.default,ResultSummary:u.ResultSummary,Plan:u.Plan,ProfiledPlan:u.ProfiledPlan,QueryStatistics:u.QueryStatistics,Notification:u.Notification,GqlStatusObject:u.GqlStatusObject,ServerInfo:u.ServerInfo,Record:u.Record,Node:u.Node,Relationship:u.Relationship,UnboundRelationship:u.UnboundRelationship,Path:u.Path,PathSegment:u.PathSegment,Point:u.Point,Integer:u.Integer,Duration:u.Duration,LocalTime:u.LocalTime,Time:u.Time,Date:u.Date,LocalDateTime:u.LocalDateTime,DateTime:u.DateTime,bookmarkManager:u.bookmarkManager,resultTransformers:u.resultTransformers,notificationCategory:u.notificationCategory,notificationSeverityLevel:u.notificationSeverityLevel,notificationFilterDisabledCategory:u.notificationFilterDisabledCategory,notificationFilterMinimumSeverityLevel:u.notificationFilterMinimumSeverityLevel,clientCertificateProviders:u.clientCertificateProviders};e.default=W},9823:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=t(9305),i=t(8813),a=t(9419),o=(n.internal.logger.Logger,n.error.SERVICE_UNAVAILABLE),s=function(){function l(c){var f=c===void 0?{}:c,h=f.maxRetryTimeout,d=h===void 0?3e4:h,v=f.initialDelay,y=v===void 0?1e3:v,w=f.delayMultiplier,b=w===void 0?2:w,p=f.delayJitter,m=p===void 0?.2:p,x=f.logger,T=x===void 0?null:x;this._maxRetryTimeout=u(d,3e4),this._initialDelay=u(y,1e3),this._delayMultiplier=u(b,2),this._delayJitter=u(m,.2),this._logger=T}return l.prototype.retry=function(c){var f=this;return c.pipe((0,a.retryWhen)(function(h){var d=[],v=Date.now(),y=1,w=f._initialDelay;return h.pipe((0,a.mergeMap)(function(b){if(!(0,n.isRetriableError)(b))return(0,i.throwError)(function(){return b});if(d.push(b),y>=2&&Date.now()-v>=f._maxRetryTimeout){var p=(0,n.newError)("Failed after retried for ".concat(y," times in ").concat(f._maxRetryTimeout," ms. Make sure that your database is online and retry again."),o);return p.seenErrors=d,(0,i.throwError)(function(){return p})}var m=f._computeNextDelay(w);return w*=f._delayMultiplier,y++,f._logger&&f._logger.warn("Transaction failed and will be retried in ".concat(m)),(0,i.of)(1).pipe((0,a.delay)(m))}))}))},l.prototype._computeNextDelay=function(c){var f=c*this._delayJitter;return c-f+2*f*Math.random()},l}();function u(l,c){return l||l===0?l:c}e.default=s},3057:function(r,e,t){var n=this&&this.__awaiter||function(c,f,h,d){return new(h||(h=Promise))(function(v,y){function w(m){try{p(d.next(m))}catch(x){y(x)}}function b(m){try{p(d.throw(m))}catch(x){y(x)}}function p(m){var x;m.done?v(m.value):(x=m.value,x instanceof h?x:new h(function(T){T(x)})).then(w,b)}p((d=d.apply(c,f||[])).next())})},i=this&&this.__generator||function(c,f){var h,d,v,y,w={label:0,sent:function(){if(1&v[0])throw v[1];return v[1]},trys:[],ops:[]};return y={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function b(p){return function(m){return function(x){if(h)throw new TypeError("Generator is already executing.");for(;y&&(y=0,x[0]&&(w=0)),w;)try{if(h=1,d&&(v=2&x[0]?d.return:x[0]?d.throw||((v=d.return)&&v.call(d),0):d.next)&&!(v=v.call(d,x[1])).done)return v;switch(d=0,v&&(x=[2&x[0],v.value]),x[0]){case 0:case 1:v=x;break;case 4:return w.label++,{value:x[1],done:!1};case 5:w.label++,d=x[1],x=[0];continue;case 7:x=w.ops.pop(),w.trys.pop();continue;default:if(!((v=(v=w.trys).length>0&&v[v.length-1])||x[0]!==6&&x[0]!==2)){w=0;continue}if(x[0]===3&&(!v||x[1]>v[0]&&x[1]<v[3])){w.label=x[1];break}if(x[0]===6&&w.label<v[1]){w.label=v[1],v=x;break}if(v&&w.label<v[2]){w.label=v[2],w.ops.push(x);break}v[2]&&w.ops.pop(),w.trys.pop();continue}x=f.call(c,w)}catch(T){x=[6,T],d=0}finally{h=v=0}if(5&x[0])throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}([p,m])}}};Object.defineProperty(e,"__esModule",{value:!0});var a=t(9305),o=t(8813),s=t(9419),u=function(){function c(f,h){var d=f.pipe((0,s.publishReplay)(1),(0,s.refCount)());this._result=d,this._keys=d.pipe((0,s.mergeMap)(function(v){return(0,o.from)(v.keys())}),(0,s.publishReplay)(1),(0,s.refCount)()),this._records=void 0,this._controls=new l,this._summary=new o.ReplaySubject,this._state=h||0}return c.prototype.keys=function(){return this._keys},c.prototype.records=function(){var f=this,h=this._result.pipe((0,s.mergeMap)(function(d){return new o.Observable(function(v){return f._startStreaming({result:d,recordsObserver:v})})}));return h.push=function(){return f._push()},h},c.prototype.consume=function(){var f=this;return this._result.pipe((0,s.mergeMap)(function(h){return new o.Observable(function(d){return f._startStreaming({result:h,summaryObserver:d})})}))},c.prototype.pause=function(){this._controls.pause()},c.prototype.resume=function(){return this._controls.resume()},c.prototype.push=function(){return this._controls.push()},c.prototype._startStreaming=function(f){var h=f===void 0?{}:f,d=h.result,v=h.recordsObserver,y=v===void 0?null:v,w=h.summaryObserver,b=w===void 0?null:w,p=[];return b&&p.push(this._summary.subscribe(b)),this._state<1?(this._state=1,this._setupRecordsStream(d),y?p.push(this._records.subscribe(y)):d._cancel(),p.push({unsubscribe:function(){d._cancel&&d._cancel()}})):y&&y.error((0,a.newError)("Streaming has already started/consumed with a previous records or summary subscription.")),function(){p.forEach(function(m){return m.unsubscribe()})}},c.prototype._toObservable=function(){var f=this;return new o.Observable(function(h){f._result.subscribe({complete:function(){return h.complete()},next:function(d){return h.next(new c(function(v){return new o.Observable(function(y){y.next(v),y.complete()})}(d)),f._state)},error:function(d){return h.error(d)}})})},c.prototype._setupRecordsStream=function(f){var h=this;return this._records||(this._records=function(d,v,y){var w=this;y===void 0&&(y=new l);var b=new o.Subject,p=function(x){return n(w,void 0,void 0,function(){var T,P,C,R;return i(this,function(D){switch(D.label){case 0:return D.trys.push([0,2,3,4]),y.pushing=!0,[4,x];case 1:return T=D.sent(),P=T.done,C=T.value,P?(b.complete(),v.complete()):(b.next(C),y.paused||p(d.next()).catch(function(){})),[3,4];case 2:return R=D.sent(),b.error(R),v.error(R),[3,4];case 3:return y.pushing=!1,[7];case 4:return[2]}})})};function m(x){return n(this,void 0,void 0,function(){return i(this,function(T){switch(T.label){case 0:return[4,p(d.next(x))];case 1:return T.sent(),[2]}})})}return y.pusher=m,m(),b}(f[Symbol.asyncIterator](),{complete:function(){return n(h,void 0,void 0,function(){var d,v;return i(this,function(y){switch(y.label){case 0:return this._state=2,v=(d=this._summary).next,[4,f.summary()];case 1:return v.apply(d,[y.sent()]),this._summary.complete(),[2]}})})},error:function(d){h._state=2,h._summary.error(d)}},this._controls)),this._records},c}();e.default=u;var l=function(){function c(f){f===void 0&&(f=function(){return n(h,void 0,void 0,function(){return i(this,function(d){return[2]})})});var h=this;this._paused=!1,this._pushing=!1,this._push=f}return c.prototype.pause=function(){this._paused=!0},Object.defineProperty(c.prototype,"paused",{get:function(){return this._paused},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"pushing",{get:function(){return this._pushing},set:function(f){this._pushing=f},enumerable:!1,configurable:!0}),c.prototype.resume=function(){return n(this,void 0,void 0,function(){var f;return i(this,function(h){switch(h.label){case 0:return f=this._paused,this._paused=!1,!f||this._pushing?[3,2]:[4,this._push()];case 1:h.sent(),h.label=2;case 2:return[2]}})})},c.prototype.push=function(){return n(this,void 0,void 0,function(){return i(this,function(f){switch(f.label){case 0:return this.pause(),[4,this._push()];case 1:return[2,f.sent()]}})})},Object.defineProperty(c.prototype,"pusher",{get:function(){return this._push},set:function(f){this._push=f},enumerable:!1,configurable:!0}),c}()},3466:function(r,e,t){var n=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(e,"__esModule",{value:!0});var i=t(8813),a=t(9419),o=n(t(3057)),s=t(9305),u=n(t(5742)),l=n(t(1530)),c=n(t(9823)),f=s.internal.constants,h=f.ACCESS_MODE_READ,d=f.ACCESS_MODE_WRITE,v=f.TELEMETRY_APIS,y=s.internal.txConfig.TxConfig,w=function(){function b(p){var m=p===void 0?{}:p,x=m.session,T=m.config,P=m.log;this._session=x,this._retryLogic=function(C){var R=C&&C.maxTransactionRetryTime?C.maxTransactionRetryTime:null;return new c.default({maxRetryTimeout:R})}(T),this._log=P}return b.prototype.run=function(p,m,x){var T=this;return new o.default(new i.Observable(function(P){try{P.next(T._session.run(p,m,x)),P.complete()}catch(C){P.error(C)}return function(){}}))},b.prototype.beginTransaction=function(p){return this._beginTransaction(this._session._mode,p,{api:v.UNMANAGED_TRANSACTION})},b.prototype.readTransaction=function(p,m){return this._runTransaction(h,p,m)},b.prototype.writeTransaction=function(p,m){return this._runTransaction(d,p,m)},b.prototype.executeRead=function(p,m){return this._executeInTransaction(h,p,m)},b.prototype.executeWrite=function(p,m){return this._executeInTransaction(d,p,m)},b.prototype._executeInTransaction=function(p,m,x){return this._runTransaction(p,m,x,function(T){return new l.default({run:T.run.bind(T)})})},b.prototype.close=function(){var p=this;return new i.Observable(function(m){p._session.close().then(function(){m.complete()}).catch(function(x){return m.error(x)})})},b.prototype[Symbol.asyncDispose]=function(){return this.close()},b.prototype.lastBookmark=function(){return this.lastBookmarks()},b.prototype.lastBookmarks=function(){return this._session.lastBookmarks()},b.prototype._beginTransaction=function(p,m,x){var T=this,P=y.empty();return m&&(P=new y(m,this._log)),new i.Observable(function(C){try{T._session._beginTransaction(p,P,x).then(function(R){C.next(new u.default(R)),C.complete()}).catch(function(R){return C.error(R)})}catch(R){C.error(R)}return function(){}})},b.prototype._runTransaction=function(p,m,x,T){var P=this;T===void 0&&(T=function(D){return D});var C=y.empty();x&&(C=new y(x));var R={apiTelemetryConfig:{api:v.MANAGED_TRANSACTION,onTelemetrySuccess:function(){R.apiTelemetryConfig=void 0}}};return this._retryLogic.retry((0,i.of)(1).pipe((0,a.mergeMap)(function(){return P._beginTransaction(p,C,R.apiTelemetryConfig)}),(0,a.mergeMap)(function(D){return(0,i.defer)(function(){try{return m(T(D))}catch(N){return(0,i.throwError)(function(){return N})}}).pipe((0,a.catchError)(function(N){return D.rollback().pipe((0,a.concatWith)((0,i.throwError)(function(){return N})))}),(0,a.concatWith)(D.commit()))})))},b}();e.default=w},1530:function(r,e,t){var n=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),n(t(3057)),n(t(5742));var i=function(){function a(o){var s=o.run;this._run=s}return a.fromTransaction=function(o){return new a({run:o.run.bind(o)})},a.prototype.run=function(o,s){return this._run(o,s)},a}();e.default=i},5742:function(r,e,t){var n=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0});var i=t(8813),a=n(t(3057)),o=(n(t(9305)),function(){function s(u){this._txc=u}return s.prototype.run=function(u,l){var c=this;return new a.default(new i.Observable(function(f){try{f.next(c._txc.run(u,l)),f.complete()}catch(h){f.error(h)}return function(){}}))},s.prototype.commit=function(){var u=this;return new i.Observable(function(l){u._txc.commit().then(function(){l.complete()}).catch(function(c){return l.error(c)})})},s.prototype.rollback=function(){var u=this;return new i.Observable(function(l){u._txc.rollback().then(function(){l.complete()}).catch(function(c){return l.error(c)})})},s.prototype.isOpen=function(){return this._txc.isOpen()},s.prototype.close=function(){var u=this;return new i.Observable(function(l){u._txc.close().then(function(){l.complete()}).catch(function(c){return l.error(c)})})},s}());e.default=o},3659:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default="5.26.0"},481:(r,e,t)=>{r.exports=t(137)},137:r=>{r.exports=class{constructor(e,t,n,i){let a;if(typeof e=="object"){let o=e;e=o.k_p,t=o.k_i,n=o.k_d,i=o.dt,a=o.i_max}this.k_p=typeof e=="number"?e:1,this.k_i=t||0,this.k_d=n||0,this.dt=i||0,this.i_max=a||0,this.sumError=0,this.lastError=0,this.lastTime=0,this.target=0}setTarget(e){this.target=e}update(e){this.currentValue=e;let t=this.dt;if(!t){let a=Date.now();t=this.lastTime===0?0:(a-this.lastTime)/1e3,this.lastTime=a}typeof t=="number"&&t!==0||(t=1);let n=this.target-this.currentValue;if(this.sumError=this.sumError+n*t,this.i_max>0&&Math.abs(this.sumError)>this.i_max){let a=this.sumError>0?1:-1;this.sumError=a*this.i_max}let i=(n-this.lastError)/t;return this.lastError=n,this.k_p*n+this.k_i*this.sumError+this.k_d*i}reset(){this.sumError=0,this.lastError=0,this.lastTime=0}}},1803:r=>{var e,t,n=document.attachEvent,i=!1;function a(m){var x=m.__resizeTriggers__,T=x.firstElementChild,P=x.lastElementChild,C=T.firstElementChild;P.scrollLeft=P.scrollWidth,P.scrollTop=P.scrollHeight,C.style.width=T.offsetWidth+1+"px",C.style.height=T.offsetHeight+1+"px",T.scrollLeft=T.scrollWidth,T.scrollTop=T.scrollHeight}function o(m){var x=this;a(this),this.__resizeRAF__&&u(this.__resizeRAF__),this.__resizeRAF__=s(function(){(function(T){return T.offsetWidth!=T.__resizeLast__.width||T.offsetHeight!=T.__resizeLast__.height})(x)&&(x.__resizeLast__.width=x.offsetWidth,x.__resizeLast__.height=x.offsetHeight,x.__resizeListeners__.forEach(function(T){T.call(x,m)}))})}if(!n){var s=(t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(m){return window.setTimeout(m,20)},function(m){return t(m)}),u=(e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout,function(m){return e(m)}),l=!1,c="",f="animationstart",h="Webkit Moz O ms".split(" "),d="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),v=document.createElement("fakeelement");if(v.style.animationName!==void 0&&(l=!0),l===!1){for(var y=0;y<h.length;y++)if(v.style[h[y]+"AnimationName"]!==void 0){c="-"+h[y].toLowerCase()+"-",f=d[y],l=!0;break}}var w="resizeanim",b="@"+c+"keyframes "+w+" { from { opacity: 0; } to { opacity: 0; } } ",p=c+"animation: 1ms "+w+"; "}r.exports=function(m,x){return n?m.attachEvent("onresize",x):(m.__resizeTriggers__||(getComputedStyle(m).position=="static"&&(m.style.position="relative"),function(){if(!i){var T=(b||"")+".resize-triggers { "+(p||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',P=document.head||document.getElementsByTagName("head")[0],C=document.createElement("style");C.type="text/css",C.styleSheet?C.styleSheet.cssText=T:C.appendChild(document.createTextNode(T)),P.appendChild(C),i=!0}}(),m.__resizeLast__={},m.__resizeListeners__=[],(m.__resizeTriggers__=document.createElement("div")).className="resize-triggers",m.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',m.appendChild(m.__resizeTriggers__),a(m),m.addEventListener("scroll",o,!0),f&&m.__resizeTriggers__.addEventListener(f,function(T){T.animationName==w&&a(m)})),m.__resizeListeners__.push(x)),function(){n?m.detachEvent("onresize",x):(m.__resizeListeners__.splice(m.__resizeListeners__.indexOf(x),1),m.__resizeListeners__.length||(m.removeEventListener("scroll",o),m.__resizeTriggers__=!m.removeChild(m.__resizeTriggers__)))}}},8813:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function($n,Ra,Ia,aa){aa===void 0&&(aa=Ia),Object.defineProperty($n,aa,{enumerable:!0,get:function(){return Ra[Ia]}})}:function($n,Ra,Ia,aa){aa===void 0&&(aa=Ia),$n[aa]=Ra[Ia]}),i=this&&this.__exportStar||function($n,Ra){for(var Ia in $n)Ia==="default"||Object.prototype.hasOwnProperty.call(Ra,Ia)||n(Ra,$n,Ia)};Object.defineProperty(e,"__esModule",{value:!0}),e.interval=e.iif=e.generate=e.fromEventPattern=e.fromEvent=e.from=e.forkJoin=e.empty=e.defer=e.connectable=e.concat=e.combineLatest=e.bindNodeCallback=e.bindCallback=e.UnsubscriptionError=e.TimeoutError=e.SequenceError=e.ObjectUnsubscribedError=e.NotFoundError=e.EmptyError=e.ArgumentOutOfRangeError=e.firstValueFrom=e.lastValueFrom=e.isObservable=e.identity=e.noop=e.pipe=e.NotificationKind=e.Notification=e.Subscriber=e.Subscription=e.Scheduler=e.VirtualAction=e.VirtualTimeScheduler=e.animationFrameScheduler=e.animationFrame=e.queueScheduler=e.queue=e.asyncScheduler=e.async=e.asapScheduler=e.asap=e.AsyncSubject=e.ReplaySubject=e.BehaviorSubject=e.Subject=e.animationFrames=e.observable=e.ConnectableObservable=e.Observable=void 0,e.filter=e.expand=e.exhaustMap=e.exhaustAll=e.exhaust=e.every=e.endWith=e.elementAt=e.distinctUntilKeyChanged=e.distinctUntilChanged=e.distinct=e.dematerialize=e.delayWhen=e.delay=e.defaultIfEmpty=e.debounceTime=e.debounce=e.count=e.connect=e.concatWith=e.concatMapTo=e.concatMap=e.concatAll=e.combineLatestWith=e.combineLatestAll=e.combineAll=e.catchError=e.bufferWhen=e.bufferToggle=e.bufferTime=e.bufferCount=e.buffer=e.auditTime=e.audit=e.config=e.NEVER=e.EMPTY=e.scheduled=e.zip=e.using=e.timer=e.throwError=e.range=e.race=e.partition=e.pairs=e.onErrorResumeNext=e.of=e.never=e.merge=void 0,e.switchMap=e.switchAll=e.subscribeOn=e.startWith=e.skipWhile=e.skipUntil=e.skipLast=e.skip=e.single=e.shareReplay=e.share=e.sequenceEqual=e.scan=e.sampleTime=e.sample=e.refCount=e.retryWhen=e.retry=e.repeatWhen=e.repeat=e.reduce=e.raceWith=e.publishReplay=e.publishLast=e.publishBehavior=e.publish=e.pluck=e.pairwise=e.onErrorResumeNextWith=e.observeOn=e.multicast=e.min=e.mergeWith=e.mergeScan=e.mergeMapTo=e.mergeMap=e.flatMap=e.mergeAll=e.max=e.materialize=e.mapTo=e.map=e.last=e.isEmpty=e.ignoreElements=e.groupBy=e.first=e.findIndex=e.find=e.finalize=void 0,e.zipWith=e.zipAll=e.withLatestFrom=e.windowWhen=e.windowToggle=e.windowTime=e.windowCount=e.window=e.toArray=e.timestamp=e.timeoutWith=e.timeout=e.timeInterval=e.throwIfEmpty=e.throttleTime=e.throttle=e.tap=e.takeWhile=e.takeUntil=e.takeLast=e.take=e.switchScan=e.switchMapTo=void 0;var a=t(4662);Object.defineProperty(e,"Observable",{enumerable:!0,get:function(){return a.Observable}});var o=t(8918);Object.defineProperty(e,"ConnectableObservable",{enumerable:!0,get:function(){return o.ConnectableObservable}});var s=t(3327);Object.defineProperty(e,"observable",{enumerable:!0,get:function(){return s.observable}});var u=t(3110);Object.defineProperty(e,"animationFrames",{enumerable:!0,get:function(){return u.animationFrames}});var l=t(2483);Object.defineProperty(e,"Subject",{enumerable:!0,get:function(){return l.Subject}});var c=t(1637);Object.defineProperty(e,"BehaviorSubject",{enumerable:!0,get:function(){return c.BehaviorSubject}});var f=t(1242);Object.defineProperty(e,"ReplaySubject",{enumerable:!0,get:function(){return f.ReplaySubject}});var h=t(95);Object.defineProperty(e,"AsyncSubject",{enumerable:!0,get:function(){return h.AsyncSubject}});var d=t(3692);Object.defineProperty(e,"asap",{enumerable:!0,get:function(){return d.asap}}),Object.defineProperty(e,"asapScheduler",{enumerable:!0,get:function(){return d.asapScheduler}});var v=t(7961);Object.defineProperty(e,"async",{enumerable:!0,get:function(){return v.async}}),Object.defineProperty(e,"asyncScheduler",{enumerable:!0,get:function(){return v.asyncScheduler}});var y=t(2886);Object.defineProperty(e,"queue",{enumerable:!0,get:function(){return y.queue}}),Object.defineProperty(e,"queueScheduler",{enumerable:!0,get:function(){return y.queueScheduler}});var w=t(3862);Object.defineProperty(e,"animationFrame",{enumerable:!0,get:function(){return w.animationFrame}}),Object.defineProperty(e,"animationFrameScheduler",{enumerable:!0,get:function(){return w.animationFrameScheduler}});var b=t(182);Object.defineProperty(e,"VirtualTimeScheduler",{enumerable:!0,get:function(){return b.VirtualTimeScheduler}}),Object.defineProperty(e,"VirtualAction",{enumerable:!0,get:function(){return b.VirtualAction}});var p=t(8986);Object.defineProperty(e,"Scheduler",{enumerable:!0,get:function(){return p.Scheduler}});var m=t(8014);Object.defineProperty(e,"Subscription",{enumerable:!0,get:function(){return m.Subscription}});var x=t(5);Object.defineProperty(e,"Subscriber",{enumerable:!0,get:function(){return x.Subscriber}});var T=t(7800);Object.defineProperty(e,"Notification",{enumerable:!0,get:function(){return T.Notification}}),Object.defineProperty(e,"NotificationKind",{enumerable:!0,get:function(){return T.NotificationKind}});var P=t(2706);Object.defineProperty(e,"pipe",{enumerable:!0,get:function(){return P.pipe}});var C=t(1342);Object.defineProperty(e,"noop",{enumerable:!0,get:function(){return C.noop}});var R=t(6640);Object.defineProperty(e,"identity",{enumerable:!0,get:function(){return R.identity}});var D=t(1751);Object.defineProperty(e,"isObservable",{enumerable:!0,get:function(){return D.isObservable}});var N=t(6894);Object.defineProperty(e,"lastValueFrom",{enumerable:!0,get:function(){return N.lastValueFrom}});var j=t(9060);Object.defineProperty(e,"firstValueFrom",{enumerable:!0,get:function(){return j.firstValueFrom}});var B=t(7057);Object.defineProperty(e,"ArgumentOutOfRangeError",{enumerable:!0,get:function(){return B.ArgumentOutOfRangeError}});var z=t(2823);Object.defineProperty(e,"EmptyError",{enumerable:!0,get:function(){return z.EmptyError}});var W=t(1759);Object.defineProperty(e,"NotFoundError",{enumerable:!0,get:function(){return W.NotFoundError}});var Z=t(9686);Object.defineProperty(e,"ObjectUnsubscribedError",{enumerable:!0,get:function(){return Z.ObjectUnsubscribedError}});var Q=t(1505);Object.defineProperty(e,"SequenceError",{enumerable:!0,get:function(){return Q.SequenceError}});var re=t(1554);Object.defineProperty(e,"TimeoutError",{enumerable:!0,get:function(){return re.TimeoutError}});var ee=t(5788);Object.defineProperty(e,"UnsubscriptionError",{enumerable:!0,get:function(){return ee.UnsubscriptionError}});var ue=t(2713);Object.defineProperty(e,"bindCallback",{enumerable:!0,get:function(){return ue.bindCallback}});var de=t(8561);Object.defineProperty(e,"bindNodeCallback",{enumerable:!0,get:function(){return de.bindNodeCallback}});var se=t(3247);Object.defineProperty(e,"combineLatest",{enumerable:!0,get:function(){return se.combineLatest}});var me=t(3865);Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return me.concat}});var Me=t(7579);Object.defineProperty(e,"connectable",{enumerable:!0,get:function(){return Me.connectable}});var he=t(9353);Object.defineProperty(e,"defer",{enumerable:!0,get:function(){return he.defer}});var fe=t(8616);Object.defineProperty(e,"empty",{enumerable:!0,get:function(){return fe.empty}});var Ee=t(9105);Object.defineProperty(e,"forkJoin",{enumerable:!0,get:function(){return Ee.forkJoin}});var Ce=t(4917);Object.defineProperty(e,"from",{enumerable:!0,get:function(){return Ce.from}});var ke=t(5337);Object.defineProperty(e,"fromEvent",{enumerable:!0,get:function(){return ke.fromEvent}});var Re=t(347);Object.defineProperty(e,"fromEventPattern",{enumerable:!0,get:function(){return Re.fromEventPattern}});var ve=t(7610);Object.defineProperty(e,"generate",{enumerable:!0,get:function(){return ve.generate}});var we=t(4209);Object.defineProperty(e,"iif",{enumerable:!0,get:function(){return we.iif}});var Oe=t(6472);Object.defineProperty(e,"interval",{enumerable:!0,get:function(){return Oe.interval}});var Be=t(2833);Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return Be.merge}});var Ye=t(8655);Object.defineProperty(e,"never",{enumerable:!0,get:function(){return Ye.never}});var ht=t(1004);Object.defineProperty(e,"of",{enumerable:!0,get:function(){return ht.of}});var Ct=t(6102);Object.defineProperty(e,"onErrorResumeNext",{enumerable:!0,get:function(){return Ct.onErrorResumeNext}});var ct=t(7740);Object.defineProperty(e,"pairs",{enumerable:!0,get:function(){return ct.pairs}});var H=t(1699);Object.defineProperty(e,"partition",{enumerable:!0,get:function(){return H.partition}});var $=t(5584);Object.defineProperty(e,"race",{enumerable:!0,get:function(){return $.race}});var ne=t(9376);Object.defineProperty(e,"range",{enumerable:!0,get:function(){return ne.range}});var Ie=t(1103);Object.defineProperty(e,"throwError",{enumerable:!0,get:function(){return Ie.throwError}});var Le=t(4092);Object.defineProperty(e,"timer",{enumerable:!0,get:function(){return Le.timer}});var ze=t(7853);Object.defineProperty(e,"using",{enumerable:!0,get:function(){return ze.using}});var Je=t(7286);Object.defineProperty(e,"zip",{enumerable:!0,get:function(){return Je.zip}});var Pt=t(1656);Object.defineProperty(e,"scheduled",{enumerable:!0,get:function(){return Pt.scheduled}});var Lt=t(8616);Object.defineProperty(e,"EMPTY",{enumerable:!0,get:function(){return Lt.EMPTY}});var Wt=t(8655);Object.defineProperty(e,"NEVER",{enumerable:!0,get:function(){return Wt.NEVER}}),i(t(6038),e);var Bt=t(3413);Object.defineProperty(e,"config",{enumerable:!0,get:function(){return Bt.config}});var er=t(3146);Object.defineProperty(e,"audit",{enumerable:!0,get:function(){return er.audit}});var Ar=t(3231);Object.defineProperty(e,"auditTime",{enumerable:!0,get:function(){return Ar.auditTime}});var Yt=t(8015);Object.defineProperty(e,"buffer",{enumerable:!0,get:function(){return Yt.buffer}});var dt=t(5572);Object.defineProperty(e,"bufferCount",{enumerable:!0,get:function(){return dt.bufferCount}});var be=t(7210);Object.defineProperty(e,"bufferTime",{enumerable:!0,get:function(){return be.bufferTime}});var it=t(8995);Object.defineProperty(e,"bufferToggle",{enumerable:!0,get:function(){return it.bufferToggle}});var st=t(8831);Object.defineProperty(e,"bufferWhen",{enumerable:!0,get:function(){return st.bufferWhen}});var ut=t(8118);Object.defineProperty(e,"catchError",{enumerable:!0,get:function(){return ut.catchError}});var lt=t(6625);Object.defineProperty(e,"combineAll",{enumerable:!0,get:function(){return lt.combineAll}});var Xt=t(6728);Object.defineProperty(e,"combineLatestAll",{enumerable:!0,get:function(){return Xt.combineLatestAll}});var pt=t(8239);Object.defineProperty(e,"combineLatestWith",{enumerable:!0,get:function(){return pt.combineLatestWith}});var Qt=t(8158);Object.defineProperty(e,"concatAll",{enumerable:!0,get:function(){return Qt.concatAll}});var mr=t(9135);Object.defineProperty(e,"concatMap",{enumerable:!0,get:function(){return mr.concatMap}});var Rr=t(9938);Object.defineProperty(e,"concatMapTo",{enumerable:!0,get:function(){return Rr.concatMapTo}});var ar=t(9669);Object.defineProperty(e,"concatWith",{enumerable:!0,get:function(){return ar.concatWith}});var nr=t(1483);Object.defineProperty(e,"connect",{enumerable:!0,get:function(){return nr.connect}});var tr=t(1038);Object.defineProperty(e,"count",{enumerable:!0,get:function(){return tr.count}});var lr=t(4461);Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return lr.debounce}});var Vr=t(8079);Object.defineProperty(e,"debounceTime",{enumerable:!0,get:function(){return Vr.debounceTime}});var fn=t(378);Object.defineProperty(e,"defaultIfEmpty",{enumerable:!0,get:function(){return fn.defaultIfEmpty}});var In=t(914);Object.defineProperty(e,"delay",{enumerable:!0,get:function(){return In.delay}});var Un=t(8766);Object.defineProperty(e,"delayWhen",{enumerable:!0,get:function(){return Un.delayWhen}});var hn=t(7441);Object.defineProperty(e,"dematerialize",{enumerable:!0,get:function(){return hn.dematerialize}});var Kn=t(5365);Object.defineProperty(e,"distinct",{enumerable:!0,get:function(){return Kn.distinct}});var vn=t(8937);Object.defineProperty(e,"distinctUntilChanged",{enumerable:!0,get:function(){return vn.distinctUntilChanged}});var Ei=t(9612);Object.defineProperty(e,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return Ei.distinctUntilKeyChanged}});var Li=t(4520);Object.defineProperty(e,"elementAt",{enumerable:!0,get:function(){return Li.elementAt}});var Br=t(1776);Object.defineProperty(e,"endWith",{enumerable:!0,get:function(){return Br.endWith}});var Tn=t(5510);Object.defineProperty(e,"every",{enumerable:!0,get:function(){return Tn.every}});var Ni=t(1551);Object.defineProperty(e,"exhaust",{enumerable:!0,get:function(){return Ni.exhaust}});var _o=t(2752);Object.defineProperty(e,"exhaustAll",{enumerable:!0,get:function(){return _o.exhaustAll}});var Pi=t(4753);Object.defineProperty(e,"exhaustMap",{enumerable:!0,get:function(){return Pi.exhaustMap}});var vi=t(7661);Object.defineProperty(e,"expand",{enumerable:!0,get:function(){return vi.expand}});var un=t(783);Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return un.filter}});var zn=t(3555);Object.defineProperty(e,"finalize",{enumerable:!0,get:function(){return zn.finalize}});var Ta=t(7714);Object.defineProperty(e,"find",{enumerable:!0,get:function(){return Ta.find}});var pi=t(9756);Object.defineProperty(e,"findIndex",{enumerable:!0,get:function(){return pi.findIndex}});var Ou=t(8275);Object.defineProperty(e,"first",{enumerable:!0,get:function(){return Ou.first}});var Ca=t(7815);Object.defineProperty(e,"groupBy",{enumerable:!0,get:function(){return Ca.groupBy}});var Hi=t(490);Object.defineProperty(e,"ignoreElements",{enumerable:!0,get:function(){return Hi.ignoreElements}});var Wa=t(9356);Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return Wa.isEmpty}});var na=t(8669);Object.defineProperty(e,"last",{enumerable:!0,get:function(){return na.last}});var kn=t(5471);Object.defineProperty(e,"map",{enumerable:!0,get:function(){return kn.map}});var ui=t(3218);Object.defineProperty(e,"mapTo",{enumerable:!0,get:function(){return ui.mapTo}});var pr=t(2360);Object.defineProperty(e,"materialize",{enumerable:!0,get:function(){return pr.materialize}});var Pa=t(1415);Object.defineProperty(e,"max",{enumerable:!0,get:function(){return Pa.max}});var lo=t(7302);Object.defineProperty(e,"mergeAll",{enumerable:!0,get:function(){return lo.mergeAll}});var qr=t(6902);Object.defineProperty(e,"flatMap",{enumerable:!0,get:function(){return qr.flatMap}});var Kr=t(983);Object.defineProperty(e,"mergeMap",{enumerable:!0,get:function(){return Kr.mergeMap}});var Ha=t(6586);Object.defineProperty(e,"mergeMapTo",{enumerable:!0,get:function(){return Ha.mergeMapTo}});var Hs=t(4408);Object.defineProperty(e,"mergeScan",{enumerable:!0,get:function(){return Hs.mergeScan}});var eo=t(8253);Object.defineProperty(e,"mergeWith",{enumerable:!0,get:function(){return eo.mergeWith}});var ia=t(2669);Object.defineProperty(e,"min",{enumerable:!0,get:function(){return ia.min}});var Su=t(9247);Object.defineProperty(e,"multicast",{enumerable:!0,get:function(){return Su.multicast}});var Dn=t(5184);Object.defineProperty(e,"observeOn",{enumerable:!0,get:function(){return Dn.observeOn}});var Ai=t(1226);Object.defineProperty(e,"onErrorResumeNextWith",{enumerable:!0,get:function(){return Ai.onErrorResumeNextWith}});var Yi=t(1518);Object.defineProperty(e,"pairwise",{enumerable:!0,get:function(){return Yi.pairwise}});var Tu=t(4912);Object.defineProperty(e,"pluck",{enumerable:!0,get:function(){return Tu.pluck}});var rl=t(766);Object.defineProperty(e,"publish",{enumerable:!0,get:function(){return rl.publish}});var ji=t(7220);Object.defineProperty(e,"publishBehavior",{enumerable:!0,get:function(){return ji.publishBehavior}});var Ya=t(6106);Object.defineProperty(e,"publishLast",{enumerable:!0,get:function(){return Ya.publishLast}});var Ys=t(8157);Object.defineProperty(e,"publishReplay",{enumerable:!0,get:function(){return Ys.publishReplay}});var ec=t(5600);Object.defineProperty(e,"raceWith",{enumerable:!0,get:function(){return ec.raceWith}});var tc=t(9139);Object.defineProperty(e,"reduce",{enumerable:!0,get:function(){return tc.reduce}});var zr=t(8522);Object.defineProperty(e,"repeat",{enumerable:!0,get:function(){return zr.repeat}});var Uo=t(6566);Object.defineProperty(e,"repeatWhen",{enumerable:!0,get:function(){return Uo.repeatWhen}});var co=t(7835);Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return co.retry}});var rc=t(9843);Object.defineProperty(e,"retryWhen",{enumerable:!0,get:function(){return rc.retryWhen}});var qt=t(7561);Object.defineProperty(e,"refCount",{enumerable:!0,get:function(){return qt.refCount}});var Xs=t(1731);Object.defineProperty(e,"sample",{enumerable:!0,get:function(){return Xs.sample}});var nc=t(6086);Object.defineProperty(e,"sampleTime",{enumerable:!0,get:function(){return nc.sampleTime}});var Aa=t(8624);Object.defineProperty(e,"scan",{enumerable:!0,get:function(){return Aa.scan}});var Cu=t(582);Object.defineProperty(e,"sequenceEqual",{enumerable:!0,get:function(){return Cu.sequenceEqual}});var wo=t(8977);Object.defineProperty(e,"share",{enumerable:!0,get:function(){return wo.share}});var $r=t(3133);Object.defineProperty(e,"shareReplay",{enumerable:!0,get:function(){return $r.shareReplay}});var oa=t(3001);Object.defineProperty(e,"single",{enumerable:!0,get:function(){return oa.single}});var nl=t(3982);Object.defineProperty(e,"skip",{enumerable:!0,get:function(){return nl.skip}});var oh=t(9098);Object.defineProperty(e,"skipLast",{enumerable:!0,get:function(){return oh.skipLast}});var ic=t(7372);Object.defineProperty(e,"skipUntil",{enumerable:!0,get:function(){return ic.skipUntil}});var ah=t(4721);Object.defineProperty(e,"skipWhile",{enumerable:!0,get:function(){return ah.skipWhile}});var Qc=t(269);Object.defineProperty(e,"startWith",{enumerable:!0,get:function(){return Qc.startWith}});var il=t(8960);Object.defineProperty(e,"subscribeOn",{enumerable:!0,get:function(){return il.subscribeOn}});var Ks=t(8774);Object.defineProperty(e,"switchAll",{enumerable:!0,get:function(){return Ks.switchAll}});var _s=t(3879);Object.defineProperty(e,"switchMap",{enumerable:!0,get:function(){return _s.switchMap}});var Xa=t(3274);Object.defineProperty(e,"switchMapTo",{enumerable:!0,get:function(){return Xa.switchMapTo}});var ol=t(8712);Object.defineProperty(e,"switchScan",{enumerable:!0,get:function(){return ol.switchScan}});var oc=t(846);Object.defineProperty(e,"take",{enumerable:!0,get:function(){return oc.take}});var ac=t(8330);Object.defineProperty(e,"takeLast",{enumerable:!0,get:function(){return ac.takeLast}});var al=t(4780);Object.defineProperty(e,"takeUntil",{enumerable:!0,get:function(){return al.takeUntil}});var $s=t(2129);Object.defineProperty(e,"takeWhile",{enumerable:!0,get:function(){return $s.takeWhile}});var sl=t(3964);Object.defineProperty(e,"tap",{enumerable:!0,get:function(){return sl.tap}});var pn=t(8941);Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return pn.throttle}});var Dr=t(7640);Object.defineProperty(e,"throttleTime",{enumerable:!0,get:function(){return Dr.throttleTime}});var sc=t(4869);Object.defineProperty(e,"throwIfEmpty",{enumerable:!0,get:function(){return sc.throwIfEmpty}});var Zs=t(489);Object.defineProperty(e,"timeInterval",{enumerable:!0,get:function(){return Zs.timeInterval}});var Jc=t(1554);Object.defineProperty(e,"timeout",{enumerable:!0,get:function(){return Jc.timeout}});var ws=t(4862);Object.defineProperty(e,"timeoutWith",{enumerable:!0,get:function(){return ws.timeoutWith}});var Ka=t(6505);Object.defineProperty(e,"timestamp",{enumerable:!0,get:function(){return Ka.timestamp}});var sh=t(2343);Object.defineProperty(e,"toArray",{enumerable:!0,get:function(){return sh.toArray}});var md=t(5477);Object.defineProperty(e,"window",{enumerable:!0,get:function(){return md.window}});var Qs=t(6746);Object.defineProperty(e,"windowCount",{enumerable:!0,get:function(){return Qs.windowCount}});var Gn=t(8208);Object.defineProperty(e,"windowTime",{enumerable:!0,get:function(){return Gn.windowTime}});var uc=t(6637);Object.defineProperty(e,"windowToggle",{enumerable:!0,get:function(){return uc.windowToggle}});var to=t(1141);Object.defineProperty(e,"windowWhen",{enumerable:!0,get:function(){return to.windowWhen}});var Js=t(5442);Object.defineProperty(e,"withLatestFrom",{enumerable:!0,get:function(){return Js.withLatestFrom}});var lc=t(187);Object.defineProperty(e,"zipAll",{enumerable:!0,get:function(){return lc.zipAll}});var Bi=t(8538);Object.defineProperty(e,"zipWith",{enumerable:!0,get:function(){return Bi.zipWith}})},95:function(r,e,t){var n,i=this&&this.__extends||(n=function(o,s){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},n(o,s)},function(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=o}n(o,s),o.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)});Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncSubject=void 0;var a=function(o){function s(){var u=o!==null&&o.apply(this,arguments)||this;return u._value=null,u._hasValue=!1,u._isComplete=!1,u}return i(s,o),s.prototype._checkFinalizedStatuses=function(u){var l=this,c=l.hasError,f=l._hasValue,h=l._value,d=l.thrownError,v=l.isStopped,y=l._isComplete;c?u.error(d):(v||y)&&(f&&u.next(h),u.complete())},s.prototype.next=function(u){this.isStopped||(this._value=u,this._hasValue=!0)},s.prototype.complete=function(){var u=this,l=u._hasValue,c=u._value;u._isComplete||(this._isComplete=!0,l&&o.prototype.next.call(this,c),o.prototype.complete.call(this))},s}(t(2483).Subject);e.AsyncSubject=a},1637:function(r,e,t){var n,i=this&&this.__extends||(n=function(o,s){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},n(o,s)},function(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=o}n(o,s),o.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)});Object.defineProperty(e,"__esModule",{value:!0}),e.BehaviorSubject=void 0;var a=function(o){function s(u){var l=o.call(this)||this;return l._value=u,l}return i(s,o),Object.defineProperty(s.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),s.prototype._subscribe=function(u){var l=o.prototype._subscribe.call(this,u);return!l.closed&&u.next(this._value),l},s.prototype.getValue=function(){var u=this,l=u.hasError,c=u.thrownError,f=u._value;if(l)throw c;return this._throwIfClosed(),f},s.prototype.next=function(u){o.prototype.next.call(this,this._value=u)},s}(t(2483).Subject);e.BehaviorSubject=a},7800:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.observeNotification=e.Notification=e.NotificationKind=void 0;var n,i=t(8616),a=t(1004),o=t(1103),s=t(1018);(n=e.NotificationKind||(e.NotificationKind={})).NEXT="N",n.ERROR="E",n.COMPLETE="C";var u=function(){function c(f,h,d){this.kind=f,this.value=h,this.error=d,this.hasValue=f==="N"}return c.prototype.observe=function(f){return l(this,f)},c.prototype.do=function(f,h,d){var v=this,y=v.kind,w=v.value,b=v.error;return y==="N"?f==null?void 0:f(w):y==="E"?h==null?void 0:h(b):d==null?void 0:d()},c.prototype.accept=function(f,h,d){var v;return s.isFunction((v=f)===null||v===void 0?void 0:v.next)?this.observe(f):this.do(f,h,d)},c.prototype.toObservable=function(){var f=this,h=f.kind,d=f.value,v=f.error,y=h==="N"?a.of(d):h==="E"?o.throwError(function(){return v}):h==="C"?i.EMPTY:0;if(!y)throw new TypeError("Unexpected notification kind "+h);return y},c.createNext=function(f){return new c("N",f)},c.createError=function(f){return new c("E",void 0,f)},c.createComplete=function(){return c.completeNotification},c.completeNotification=new c("C"),c}();function l(c,f){var h,d,v,y=c,w=y.kind,b=y.value,p=y.error;if(typeof w!="string")throw new TypeError('Invalid notification, missing "kind"');w==="N"?(h=f.next)===null||h===void 0||h.call(f,b):w==="E"?(d=f.error)===null||d===void 0||d.call(f,p):(v=f.complete)===null||v===void 0||v.call(f)}e.Notification=u,e.observeNotification=l},9052:(r,e)=>{function t(n,i,a){return{kind:n,value:i,error:a}}Object.defineProperty(e,"__esModule",{value:!0}),e.createNotification=e.nextNotification=e.errorNotification=e.COMPLETE_NOTIFICATION=void 0,e.COMPLETE_NOTIFICATION=t("C",void 0,void 0),e.errorNotification=function(n){return t("E",void 0,n)},e.nextNotification=function(n){return t("N",n,void 0)},e.createNotification=t},4662:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Observable=void 0;var n=t(5),i=t(8014),a=t(3327),o=t(2706),s=t(3413),u=t(1018),l=t(9223),c=function(){function h(d){d&&(this._subscribe=d)}return h.prototype.lift=function(d){var v=new h;return v.source=this,v.operator=d,v},h.prototype.subscribe=function(d,v,y){var w,b=this,p=(w=d)&&w instanceof n.Subscriber||function(m){return m&&u.isFunction(m.next)&&u.isFunction(m.error)&&u.isFunction(m.complete)}(w)&&i.isSubscription(w)?d:new n.SafeSubscriber(d,v,y);return l.errorContext(function(){var m=b,x=m.operator,T=m.source;p.add(x?x.call(p,T):T?b._subscribe(p):b._trySubscribe(p))}),p},h.prototype._trySubscribe=function(d){try{return this._subscribe(d)}catch(v){d.error(v)}},h.prototype.forEach=function(d,v){var y=this;return new(v=f(v))(function(w,b){var p=new n.SafeSubscriber({next:function(m){try{d(m)}catch(x){b(x),p.unsubscribe()}},error:b,complete:w});y.subscribe(p)})},h.prototype._subscribe=function(d){var v;return(v=this.source)===null||v===void 0?void 0:v.subscribe(d)},h.prototype[a.observable]=function(){return this},h.prototype.pipe=function(){for(var d=[],v=0;v<arguments.length;v++)d[v]=arguments[v];return o.pipeFromArray(d)(this)},h.prototype.toPromise=function(d){var v=this;return new(d=f(d))(function(y,w){var b;v.subscribe(function(p){return b=p},function(p){return w(p)},function(){return y(b)})})},h.create=function(d){return new h(d)},h}();function f(h){var d;return(d=h??s.config.Promise)!==null&&d!==void 0?d:Promise}e.Observable=c},1242:function(r,e,t){var n,i=this&&this.__extends||(n=function(u,l){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(c[h]=f[h])},n(u,l)},function(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function c(){this.constructor=u}n(u,l),u.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)});Object.defineProperty(e,"__esModule",{value:!0}),e.ReplaySubject=void 0;var a=t(2483),o=t(9568),s=function(u){function l(c,f,h){c===void 0&&(c=1/0),f===void 0&&(f=1/0),h===void 0&&(h=o.dateTimestampProvider);var d=u.call(this)||this;return d._bufferSize=c,d._windowTime=f,d._timestampProvider=h,d._buffer=[],d._infiniteTimeWindow=!0,d._infiniteTimeWindow=f===1/0,d._bufferSize=Math.max(1,c),d._windowTime=Math.max(1,f),d}return i(l,u),l.prototype.next=function(c){var f=this,h=f.isStopped,d=f._buffer,v=f._infiniteTimeWindow,y=f._timestampProvider,w=f._windowTime;h||(d.push(c),!v&&d.push(y.now()+w)),this._trimBuffer(),u.prototype.next.call(this,c)},l.prototype._subscribe=function(c){this._throwIfClosed(),this._trimBuffer();for(var f=this._innerSubscribe(c),h=this._infiniteTimeWindow,d=this._buffer.slice(),v=0;v<d.length&&!c.closed;v+=h?1:2)c.next(d[v]);return this._checkFinalizedStatuses(c),f},l.prototype._trimBuffer=function(){var c=this,f=c._bufferSize,h=c._timestampProvider,d=c._buffer,v=c._infiniteTimeWindow,y=(v?1:2)*f;if(f<1/0&&y<d.length&&d.splice(0,d.length-y),!v){for(var w=h.now(),b=0,p=1;p<d.length&&d[p]<=w;p+=2)b=p;b&&d.splice(0,b+1)}},l}(a.Subject);e.ReplaySubject=s},8986:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Scheduler=void 0;var n=t(9568),i=function(){function a(o,s){s===void 0&&(s=a.now),this.schedulerActionCtor=o,this.now=s}return a.prototype.schedule=function(o,s,u){return s===void 0&&(s=0),new this.schedulerActionCtor(this,o).schedule(u,s)},a.now=n.dateTimestampProvider.now,a}();e.Scheduler=i},2483:function(r,e,t){var n,i=this&&this.__extends||(n=function(d,v){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,w){y.__proto__=w}||function(y,w){for(var b in w)Object.prototype.hasOwnProperty.call(w,b)&&(y[b]=w[b])},n(d,v)},function(d,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function y(){this.constructor=d}n(d,v),d.prototype=v===null?Object.create(v):(y.prototype=v.prototype,new y)}),a=this&&this.__values||function(d){var v=typeof Symbol=="function"&&Symbol.iterator,y=v&&d[v],w=0;if(y)return y.call(d);if(d&&typeof d.length=="number")return{next:function(){return d&&w>=d.length&&(d=void 0),{value:d&&d[w++],done:!d}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.AnonymousSubject=e.Subject=void 0;var o=t(4662),s=t(8014),u=t(9686),l=t(7479),c=t(9223),f=function(d){function v(){var y=d.call(this)||this;return y.closed=!1,y.currentObservers=null,y.observers=[],y.isStopped=!1,y.hasError=!1,y.thrownError=null,y}return i(v,d),v.prototype.lift=function(y){var w=new h(this,this);return w.operator=y,w},v.prototype._throwIfClosed=function(){if(this.closed)throw new u.ObjectUnsubscribedError},v.prototype.next=function(y){var w=this;c.errorContext(function(){var b,p;if(w._throwIfClosed(),!w.isStopped){w.currentObservers||(w.currentObservers=Array.from(w.observers));try{for(var m=a(w.currentObservers),x=m.next();!x.done;x=m.next())x.value.next(y)}catch(T){b={error:T}}finally{try{x&&!x.done&&(p=m.return)&&p.call(m)}finally{if(b)throw b.error}}}})},v.prototype.error=function(y){var w=this;c.errorContext(function(){if(w._throwIfClosed(),!w.isStopped){w.hasError=w.isStopped=!0,w.thrownError=y;for(var b=w.observers;b.length;)b.shift().error(y)}})},v.prototype.complete=function(){var y=this;c.errorContext(function(){if(y._throwIfClosed(),!y.isStopped){y.isStopped=!0;for(var w=y.observers;w.length;)w.shift().complete()}})},v.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(v.prototype,"observed",{get:function(){var y;return((y=this.observers)===null||y===void 0?void 0:y.length)>0},enumerable:!1,configurable:!0}),v.prototype._trySubscribe=function(y){return this._throwIfClosed(),d.prototype._trySubscribe.call(this,y)},v.prototype._subscribe=function(y){return this._throwIfClosed(),this._checkFinalizedStatuses(y),this._innerSubscribe(y)},v.prototype._innerSubscribe=function(y){var w=this,b=this,p=b.hasError,m=b.isStopped,x=b.observers;return p||m?s.EMPTY_SUBSCRIPTION:(this.currentObservers=null,x.push(y),new s.Subscription(function(){w.currentObservers=null,l.arrRemove(x,y)}))},v.prototype._checkFinalizedStatuses=function(y){var w=this,b=w.hasError,p=w.thrownError,m=w.isStopped;b?y.error(p):m&&y.complete()},v.prototype.asObservable=function(){var y=new o.Observable;return y.source=this,y},v.create=function(y,w){return new h(y,w)},v}(o.Observable);e.Subject=f;var h=function(d){function v(y,w){var b=d.call(this)||this;return b.destination=y,b.source=w,b}return i(v,d),v.prototype.next=function(y){var w,b;(b=(w=this.destination)===null||w===void 0?void 0:w.next)===null||b===void 0||b.call(w,y)},v.prototype.error=function(y){var w,b;(b=(w=this.destination)===null||w===void 0?void 0:w.error)===null||b===void 0||b.call(w,y)},v.prototype.complete=function(){var y,w;(w=(y=this.destination)===null||y===void 0?void 0:y.complete)===null||w===void 0||w.call(y)},v.prototype._subscribe=function(y){var w,b;return(b=(w=this.source)===null||w===void 0?void 0:w.subscribe(y))!==null&&b!==void 0?b:s.EMPTY_SUBSCRIPTION},v}(f);e.AnonymousSubject=h},5:function(r,e,t){var n,i=this&&this.__extends||(n=function(x,T){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,C){P.__proto__=C}||function(P,C){for(var R in C)Object.prototype.hasOwnProperty.call(C,R)&&(P[R]=C[R])},n(x,T)},function(x,T){if(typeof T!="function"&&T!==null)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");function P(){this.constructor=x}n(x,T),x.prototype=T===null?Object.create(T):(P.prototype=T.prototype,new P)});Object.defineProperty(e,"__esModule",{value:!0}),e.EMPTY_OBSERVER=e.SafeSubscriber=e.Subscriber=void 0;var a=t(1018),o=t(8014),s=t(3413),u=t(7315),l=t(1342),c=t(9052),f=t(9155),h=t(9223),d=function(x){function T(P){var C=x.call(this)||this;return C.isStopped=!1,P?(C.destination=P,o.isSubscription(P)&&P.add(C)):C.destination=e.EMPTY_OBSERVER,C}return i(T,x),T.create=function(P,C,R){return new b(P,C,R)},T.prototype.next=function(P){this.isStopped?m(c.nextNotification(P),this):this._next(P)},T.prototype.error=function(P){this.isStopped?m(c.errorNotification(P),this):(this.isStopped=!0,this._error(P))},T.prototype.complete=function(){this.isStopped?m(c.COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())},T.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,x.prototype.unsubscribe.call(this),this.destination=null)},T.prototype._next=function(P){this.destination.next(P)},T.prototype._error=function(P){try{this.destination.error(P)}finally{this.unsubscribe()}},T.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},T}(o.Subscription);e.Subscriber=d;var v=Function.prototype.bind;function y(x,T){return v.call(x,T)}var w=function(){function x(T){this.partialObserver=T}return x.prototype.next=function(T){var P=this.partialObserver;if(P.next)try{P.next(T)}catch(C){p(C)}},x.prototype.error=function(T){var P=this.partialObserver;if(P.error)try{P.error(T)}catch(C){p(C)}else p(T)},x.prototype.complete=function(){var T=this.partialObserver;if(T.complete)try{T.complete()}catch(P){p(P)}},x}(),b=function(x){function T(P,C,R){var D,N,j=x.call(this)||this;return a.isFunction(P)||!P?D={next:P??void 0,error:C??void 0,complete:R??void 0}:j&&s.config.useDeprecatedNextContext?((N=Object.create(P)).unsubscribe=function(){return j.unsubscribe()},D={next:P.next&&y(P.next,N),error:P.error&&y(P.error,N),complete:P.complete&&y(P.complete,N)}):D=P,j.destination=new w(D),j}return i(T,x),T}(d);function p(x){s.config.useDeprecatedSynchronousErrorHandling?h.captureError(x):u.reportUnhandledError(x)}function m(x,T){var P=s.config.onStoppedNotification;P&&f.timeoutProvider.setTimeout(function(){return P(x,T)})}e.SafeSubscriber=b,e.EMPTY_OBSERVER={closed:!0,next:l.noop,error:function(x){throw x},complete:l.noop}},8014:function(r,e,t){var n=this&&this.__values||function(f){var h=typeof Symbol=="function"&&Symbol.iterator,d=h&&f[h],v=0;if(d)return d.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&v>=f.length&&(f=void 0),{value:f&&f[v++],done:!f}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(f,h){var d=typeof Symbol=="function"&&f[Symbol.iterator];if(!d)return f;var v,y,w=d.call(f),b=[];try{for(;(h===void 0||h-- >0)&&!(v=w.next()).done;)b.push(v.value)}catch(p){y={error:p}}finally{try{v&&!v.done&&(d=w.return)&&d.call(w)}finally{if(y)throw y.error}}return b},a=this&&this.__spreadArray||function(f,h){for(var d=0,v=h.length,y=f.length;d<v;d++,y++)f[y]=h[d];return f};Object.defineProperty(e,"__esModule",{value:!0}),e.isSubscription=e.EMPTY_SUBSCRIPTION=e.Subscription=void 0;var o=t(1018),s=t(5788),u=t(7479),l=function(){function f(d){this.initialTeardown=d,this.closed=!1,this._parentage=null,this._finalizers=null}var h;return f.prototype.unsubscribe=function(){var d,v,y,w,b;if(!this.closed){this.closed=!0;var p=this._parentage;if(p)if(this._parentage=null,Array.isArray(p))try{for(var m=n(p),x=m.next();!x.done;x=m.next())x.value.remove(this)}catch(N){d={error:N}}finally{try{x&&!x.done&&(v=m.return)&&v.call(m)}finally{if(d)throw d.error}}else p.remove(this);var T=this.initialTeardown;if(o.isFunction(T))try{T()}catch(N){b=N instanceof s.UnsubscriptionError?N.errors:[N]}var P=this._finalizers;if(P){this._finalizers=null;try{for(var C=n(P),R=C.next();!R.done;R=C.next()){var D=R.value;try{c(D)}catch(N){b=b??[],N instanceof s.UnsubscriptionError?b=a(a([],i(b)),i(N.errors)):b.push(N)}}}catch(N){y={error:N}}finally{try{R&&!R.done&&(w=C.return)&&w.call(C)}finally{if(y)throw y.error}}}if(b)throw new s.UnsubscriptionError(b)}},f.prototype.add=function(d){var v;if(d&&d!==this)if(this.closed)c(d);else{if(d instanceof f){if(d.closed||d._hasParent(this))return;d._addParent(this)}(this._finalizers=(v=this._finalizers)!==null&&v!==void 0?v:[]).push(d)}},f.prototype._hasParent=function(d){var v=this._parentage;return v===d||Array.isArray(v)&&v.includes(d)},f.prototype._addParent=function(d){var v=this._parentage;this._parentage=Array.isArray(v)?(v.push(d),v):v?[v,d]:d},f.prototype._removeParent=function(d){var v=this._parentage;v===d?this._parentage=null:Array.isArray(v)&&u.arrRemove(v,d)},f.prototype.remove=function(d){var v=this._finalizers;v&&u.arrRemove(v,d),d instanceof f&&d._removeParent(this)},f.EMPTY=((h=new f).closed=!0,h),f}();function c(f){o.isFunction(f)?f():f.unsubscribe()}e.Subscription=l,e.EMPTY_SUBSCRIPTION=l.EMPTY,e.isSubscription=function(f){return f instanceof l||f&&"closed"in f&&o.isFunction(f.remove)&&o.isFunction(f.add)&&o.isFunction(f.unsubscribe)}},3413:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.config=void 0,e.config={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9060:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.firstValueFrom=void 0;var n=t(2823),i=t(5);e.firstValueFrom=function(a,o){var s=typeof o=="object";return new Promise(function(u,l){var c=new i.SafeSubscriber({next:function(f){u(f),c.unsubscribe()},error:l,complete:function(){s?u(o.defaultValue):l(new n.EmptyError)}});a.subscribe(c)})}},6894:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.lastValueFrom=void 0;var n=t(2823);e.lastValueFrom=function(i,a){var o=typeof a=="object";return new Promise(function(s,u){var l,c=!1;i.subscribe({next:function(f){l=f,c=!0},error:u,complete:function(){c?s(l):o?s(a.defaultValue):u(new n.EmptyError)}})})}},8918:function(r,e,t){var n,i=this&&this.__extends||(n=function(f,h){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,v){d.__proto__=v}||function(d,v){for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(d[y]=v[y])},n(f,h)},function(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function d(){this.constructor=f}n(f,h),f.prototype=h===null?Object.create(h):(d.prototype=h.prototype,new d)});Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectableObservable=void 0;var a=t(4662),o=t(8014),s=t(7561),u=t(3111),l=t(7843),c=function(f){function h(d,v){var y=f.call(this)||this;return y.source=d,y.subjectFactory=v,y._subject=null,y._refCount=0,y._connection=null,l.hasLift(d)&&(y.lift=d.lift),y}return i(h,f),h.prototype._subscribe=function(d){return this.getSubject().subscribe(d)},h.prototype.getSubject=function(){var d=this._subject;return d&&!d.isStopped||(this._subject=this.subjectFactory()),this._subject},h.prototype._teardown=function(){this._refCount=0;var d=this._connection;this._subject=this._connection=null,d==null||d.unsubscribe()},h.prototype.connect=function(){var d=this,v=this._connection;if(!v){v=this._connection=new o.Subscription;var y=this.getSubject();v.add(this.source.subscribe(u.createOperatorSubscriber(y,void 0,function(){d._teardown(),y.complete()},function(w){d._teardown(),y.error(w)},function(){return d._teardown()}))),v.closed&&(this._connection=null,v=o.Subscription.EMPTY)}return v},h.prototype.refCount=function(){return s.refCount()(this)},h}(a.Observable);e.ConnectableObservable=c},2713:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.bindCallback=void 0;var n=t(1439);e.bindCallback=function(i,a,o){return n.bindCallbackInternals(!1,i,a,o)}},1439:function(r,e,t){var n=this&&this.__read||function(f,h){var d=typeof Symbol=="function"&&f[Symbol.iterator];if(!d)return f;var v,y,w=d.call(f),b=[];try{for(;(h===void 0||h-- >0)&&!(v=w.next()).done;)b.push(v.value)}catch(p){y={error:p}}finally{try{v&&!v.done&&(d=w.return)&&d.call(w)}finally{if(y)throw y.error}}return b},i=this&&this.__spreadArray||function(f,h){for(var d=0,v=h.length,y=f.length;d<v;d++,y++)f[y]=h[d];return f};Object.defineProperty(e,"__esModule",{value:!0}),e.bindCallbackInternals=void 0;var a=t(8613),o=t(4662),s=t(8960),u=t(1251),l=t(5184),c=t(95);e.bindCallbackInternals=function f(h,d,v,y){if(v){if(!a.isScheduler(v))return function(){for(var w=[],b=0;b<arguments.length;b++)w[b]=arguments[b];return f(h,d,y).apply(this,w).pipe(u.mapOneOrManyArgs(v))};y=v}return y?function(){for(var w=[],b=0;b<arguments.length;b++)w[b]=arguments[b];return f(h,d).apply(this,w).pipe(s.subscribeOn(y),l.observeOn(y))}:function(){for(var w=this,b=[],p=0;p<arguments.length;p++)b[p]=arguments[p];var m=new c.AsyncSubject,x=!0;return new o.Observable(function(T){var P=m.subscribe(T);if(x){x=!1;var C=!1,R=!1;d.apply(w,i(i([],n(b)),[function(){for(var D=[],N=0;N<arguments.length;N++)D[N]=arguments[N];if(h){var j=D.shift();if(j!=null)return void m.error(j)}m.next(1<D.length?D:D[0]),R=!0,C&&m.complete()}])),R&&m.complete(),C=!0}return P})}}},8561:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.bindNodeCallback=void 0;var n=t(1439);e.bindNodeCallback=function(i,a,o){return n.bindCallbackInternals(!0,i,a,o)}},3247:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.combineLatestInit=e.combineLatest=void 0;var n=t(4662),i=t(7360),a=t(4917),o=t(6640),s=t(1251),u=t(1107),l=t(6013),c=t(3111),f=t(7110);function h(v,y,w){return w===void 0&&(w=o.identity),function(b){d(y,function(){for(var p=v.length,m=new Array(p),x=p,T=p,P=function(R){d(y,function(){var D=a.from(v[R],y),N=!1;D.subscribe(c.createOperatorSubscriber(b,function(j){m[R]=j,N||(N=!0,T--),T||b.next(w(m.slice()))},function(){--x||b.complete()}))},b)},C=0;C<p;C++)P(C)},b)}}function d(v,y,w){v?f.executeSchedule(w,v,y):y()}e.combineLatest=function(){for(var v=[],y=0;y<arguments.length;y++)v[y]=arguments[y];var w=u.popScheduler(v),b=u.popResultSelector(v),p=i.argsArgArrayOrObject(v),m=p.args,x=p.keys;if(m.length===0)return a.from([],w);var T=new n.Observable(h(m,w,x?function(P){return l.createObject(x,P)}:o.identity));return b?T.pipe(s.mapOneOrManyArgs(b)):T},e.combineLatestInit=h},3865:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.concat=void 0;var n=t(8158),i=t(1107),a=t(4917);e.concat=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return n.concatAll()(a.from(o,i.popScheduler(o)))}},7579:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.connectable=void 0;var n=t(2483),i=t(4662),a=t(9353),o={connector:function(){return new n.Subject},resetOnDisconnect:!0};e.connectable=function(s,u){u===void 0&&(u=o);var l=null,c=u.connector,f=u.resetOnDisconnect,h=f===void 0||f,d=c(),v=new i.Observable(function(y){return d.subscribe(y)});return v.connect=function(){return l&&!l.closed||(l=a.defer(function(){return s}).subscribe(d),h&&l.add(function(){return d=c()})),l},v}},9353:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.defer=void 0;var n=t(4662),i=t(9445);e.defer=function(a){return new n.Observable(function(o){i.innerFrom(a()).subscribe(o)})}},3110:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrames=void 0;var n=t(4662),i=t(4746),a=t(9507);function o(u){return new n.Observable(function(l){var c=u||i.performanceTimestampProvider,f=c.now(),h=0,d=function(){l.closed||(h=a.animationFrameProvider.requestAnimationFrame(function(v){h=0;var y=c.now();l.next({timestamp:u?y:v,elapsed:y-f}),d()}))};return d(),function(){h&&a.animationFrameProvider.cancelAnimationFrame(h)}})}e.animationFrames=function(u){return u?o(u):s};var s=o()},8616:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.empty=e.EMPTY=void 0;var n=t(4662);e.EMPTY=new n.Observable(function(i){return i.complete()}),e.empty=function(i){return i?function(a){return new n.Observable(function(o){return a.schedule(function(){return o.complete()})})}(i):e.EMPTY}},9105:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.forkJoin=void 0;var n=t(4662),i=t(7360),a=t(9445),o=t(1107),s=t(3111),u=t(1251),l=t(6013);e.forkJoin=function(){for(var c=[],f=0;f<arguments.length;f++)c[f]=arguments[f];var h=o.popResultSelector(c),d=i.argsArgArrayOrObject(c),v=d.args,y=d.keys,w=new n.Observable(function(b){var p=v.length;if(p)for(var m=new Array(p),x=p,T=p,P=function(R){var D=!1;a.innerFrom(v[R]).subscribe(s.createOperatorSubscriber(b,function(N){D||(D=!0,T--),m[R]=N},function(){return x--},void 0,function(){x&&D||(T||b.next(y?l.createObject(y,m):m),b.complete())}))},C=0;C<p;C++)P(C);else b.complete()});return h?w.pipe(u.mapOneOrManyArgs(h)):w}},4917:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.from=void 0;var n=t(1656),i=t(9445);e.from=function(a,o){return o?n.scheduled(a,o):i.innerFrom(a)}},5337:function(r,e,t){var n=this&&this.__read||function(v,y){var w=typeof Symbol=="function"&&v[Symbol.iterator];if(!w)return v;var b,p,m=w.call(v),x=[];try{for(;(y===void 0||y-- >0)&&!(b=m.next()).done;)x.push(b.value)}catch(T){p={error:T}}finally{try{b&&!b.done&&(w=m.return)&&w.call(m)}finally{if(p)throw p.error}}return x};Object.defineProperty(e,"__esModule",{value:!0}),e.fromEvent=void 0;var i=t(9445),a=t(4662),o=t(983),s=t(8046),u=t(1018),l=t(1251),c=["addListener","removeListener"],f=["addEventListener","removeEventListener"],h=["on","off"];function d(v,y){return function(w){return function(b){return v[w](y,b)}}}e.fromEvent=function v(y,w,b,p){if(u.isFunction(b)&&(p=b,b=void 0),p)return v(y,w,b).pipe(l.mapOneOrManyArgs(p));var m=n(function(P){return u.isFunction(P.addEventListener)&&u.isFunction(P.removeEventListener)}(y)?f.map(function(P){return function(C){return y[P](w,C,b)}}):function(P){return u.isFunction(P.addListener)&&u.isFunction(P.removeListener)}(y)?c.map(d(y,w)):function(P){return u.isFunction(P.on)&&u.isFunction(P.off)}(y)?h.map(d(y,w)):[],2),x=m[0],T=m[1];if(!x&&s.isArrayLike(y))return o.mergeMap(function(P){return v(P,w,b)})(i.innerFrom(y));if(!x)throw new TypeError("Invalid event target");return new a.Observable(function(P){var C=function(){for(var R=[],D=0;D<arguments.length;D++)R[D]=arguments[D];return P.next(1<R.length?R:R[0])};return x(C),function(){return T(C)}})}},347:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fromEventPattern=void 0;var n=t(4662),i=t(1018),a=t(1251);e.fromEventPattern=function o(s,u,l){return l?o(s,u).pipe(a.mapOneOrManyArgs(l)):new n.Observable(function(c){var f=function(){for(var d=[],v=0;v<arguments.length;v++)d[v]=arguments[v];return c.next(d.length===1?d[0]:d)},h=s(f);return i.isFunction(u)?function(){return u(f,h)}:void 0})}},6824:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fromSubscribable=void 0;var n=t(4662);e.fromSubscribable=function(i){return new n.Observable(function(a){return i.subscribe(a)})}},7610:function(r,e,t){var n=this&&this.__generator||function(u,l){var c,f,h,d,v={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return d={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function y(w){return function(b){return function(p){if(c)throw new TypeError("Generator is already executing.");for(;v;)try{if(c=1,f&&(h=2&p[0]?f.return:p[0]?f.throw||((h=f.return)&&h.call(f),0):f.next)&&!(h=h.call(f,p[1])).done)return h;switch(f=0,h&&(p=[2&p[0],h.value]),p[0]){case 0:case 1:h=p;break;case 4:return v.label++,{value:p[1],done:!1};case 5:v.label++,f=p[1],p=[0];continue;case 7:p=v.ops.pop(),v.trys.pop();continue;default:if(!((h=(h=v.trys).length>0&&h[h.length-1])||p[0]!==6&&p[0]!==2)){v=0;continue}if(p[0]===3&&(!h||p[1]>h[0]&&p[1]<h[3])){v.label=p[1];break}if(p[0]===6&&v.label<h[1]){v.label=h[1],h=p;break}if(h&&v.label<h[2]){v.label=h[2],v.ops.push(p);break}h[2]&&v.ops.pop(),v.trys.pop();continue}p=l.call(u,v)}catch(m){p=[6,m],f=0}finally{c=h=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}([w,b])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.generate=void 0;var i=t(6640),a=t(8613),o=t(9353),s=t(8808);e.generate=function(u,l,c,f,h){var d,v,y,w;function b(){var p;return n(this,function(m){switch(m.label){case 0:p=w,m.label=1;case 1:return l&&!l(p)?[3,4]:[4,y(p)];case 2:m.sent(),m.label=3;case 3:return p=c(p),[3,1];case 4:return[2]}})}return arguments.length===1?(w=(d=u).initialState,l=d.condition,c=d.iterate,v=d.resultSelector,y=v===void 0?i.identity:v,h=d.scheduler):(w=u,!f||a.isScheduler(f)?(y=i.identity,h=f):y=f),o.defer(h?function(){return s.scheduleIterable(b(),h)}:b)}},4209:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.iif=void 0;var n=t(9353);e.iif=function(i,a,o){return n.defer(function(){return i()?a:o})}},9445:function(r,e,t){var n=this&&this.__awaiter||function(R,D,N,j){return new(N||(N=Promise))(function(B,z){function W(re){try{Q(j.next(re))}catch(ee){z(ee)}}function Z(re){try{Q(j.throw(re))}catch(ee){z(ee)}}function Q(re){var ee;re.done?B(re.value):(ee=re.value,ee instanceof N?ee:new N(function(ue){ue(ee)})).then(W,Z)}Q((j=j.apply(R,D||[])).next())})},i=this&&this.__generator||function(R,D){var N,j,B,z,W={label:0,sent:function(){if(1&B[0])throw B[1];return B[1]},trys:[],ops:[]};return z={next:Z(0),throw:Z(1),return:Z(2)},typeof Symbol=="function"&&(z[Symbol.iterator]=function(){return this}),z;function Z(Q){return function(re){return function(ee){if(N)throw new TypeError("Generator is already executing.");for(;W;)try{if(N=1,j&&(B=2&ee[0]?j.return:ee[0]?j.throw||((B=j.return)&&B.call(j),0):j.next)&&!(B=B.call(j,ee[1])).done)return B;switch(j=0,B&&(ee=[2&ee[0],B.value]),ee[0]){case 0:case 1:B=ee;break;case 4:return W.label++,{value:ee[1],done:!1};case 5:W.label++,j=ee[1],ee=[0];continue;case 7:ee=W.ops.pop(),W.trys.pop();continue;default:if(!((B=(B=W.trys).length>0&&B[B.length-1])||ee[0]!==6&&ee[0]!==2)){W=0;continue}if(ee[0]===3&&(!B||ee[1]>B[0]&&ee[1]<B[3])){W.label=ee[1];break}if(ee[0]===6&&W.label<B[1]){W.label=B[1],B=ee;break}if(B&&W.label<B[2]){W.label=B[2],W.ops.push(ee);break}B[2]&&W.ops.pop(),W.trys.pop();continue}ee=D.call(R,W)}catch(ue){ee=[6,ue],j=0}finally{N=B=0}if(5&ee[0])throw ee[1];return{value:ee[0]?ee[1]:void 0,done:!0}}([Q,re])}}},a=this&&this.__asyncValues||function(R){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var D,N=R[Symbol.asyncIterator];return N?N.call(R):(R=typeof o=="function"?o(R):R[Symbol.iterator](),D={},j("next"),j("throw"),j("return"),D[Symbol.asyncIterator]=function(){return this},D);function j(B){D[B]=R[B]&&function(z){return new Promise(function(W,Z){(function(Q,re,ee,ue){Promise.resolve(ue).then(function(de){Q({value:de,done:ee})},re)})(W,Z,(z=R[B](z)).done,z.value)})}}},o=this&&this.__values||function(R){var D=typeof Symbol=="function"&&Symbol.iterator,N=D&&R[D],j=0;if(N)return N.call(R);if(R&&typeof R.length=="number")return{next:function(){return R&&j>=R.length&&(R=void 0),{value:R&&R[j++],done:!R}}};throw new TypeError(D?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.fromReadableStreamLike=e.fromAsyncIterable=e.fromIterable=e.fromPromise=e.fromArrayLike=e.fromInteropObservable=e.innerFrom=void 0;var s=t(8046),u=t(7629),l=t(4662),c=t(1116),f=t(1358),h=t(7614),d=t(6368),v=t(9137),y=t(1018),w=t(7315),b=t(3327);function p(R){return new l.Observable(function(D){var N=R[b.observable]();if(y.isFunction(N.subscribe))return N.subscribe(D);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function m(R){return new l.Observable(function(D){for(var N=0;N<R.length&&!D.closed;N++)D.next(R[N]);D.complete()})}function x(R){return new l.Observable(function(D){R.then(function(N){D.closed||(D.next(N),D.complete())},function(N){return D.error(N)}).then(null,w.reportUnhandledError)})}function T(R){return new l.Observable(function(D){var N,j;try{for(var B=o(R),z=B.next();!z.done;z=B.next()){var W=z.value;if(D.next(W),D.closed)return}}catch(Z){N={error:Z}}finally{try{z&&!z.done&&(j=B.return)&&j.call(B)}finally{if(N)throw N.error}}D.complete()})}function P(R){return new l.Observable(function(D){(function(N,j){var B,z,W,Z;return n(this,void 0,void 0,function(){var Q,re;return i(this,function(ee){switch(ee.label){case 0:ee.trys.push([0,5,6,11]),B=a(N),ee.label=1;case 1:return[4,B.next()];case 2:if((z=ee.sent()).done)return[3,4];if(Q=z.value,j.next(Q),j.closed)return[2];ee.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return re=ee.sent(),W={error:re},[3,11];case 6:return ee.trys.push([6,,9,10]),z&&!z.done&&(Z=B.return)?[4,Z.call(B)]:[3,8];case 7:ee.sent(),ee.label=8;case 8:return[3,10];case 9:if(W)throw W.error;return[7];case 10:return[7];case 11:return j.complete(),[2]}})})})(R,D).catch(function(N){return D.error(N)})})}function C(R){return P(v.readableStreamLikeToAsyncGenerator(R))}e.innerFrom=function(R){if(R instanceof l.Observable)return R;if(R!=null){if(c.isInteropObservable(R))return p(R);if(s.isArrayLike(R))return m(R);if(u.isPromise(R))return x(R);if(f.isAsyncIterable(R))return P(R);if(d.isIterable(R))return T(R);if(v.isReadableStreamLike(R))return C(R)}throw h.createInvalidObservableTypeError(R)},e.fromInteropObservable=p,e.fromArrayLike=m,e.fromPromise=x,e.fromIterable=T,e.fromAsyncIterable=P,e.fromReadableStreamLike=C},6472:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.interval=void 0;var n=t(7961),i=t(4092);e.interval=function(a,o){return a===void 0&&(a=0),o===void 0&&(o=n.asyncScheduler),a<0&&(a=0),i.timer(a,a,o)}},2833:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.merge=void 0;var n=t(7302),i=t(9445),a=t(8616),o=t(1107),s=t(4917);e.merge=function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];var c=o.popScheduler(u),f=o.popNumber(u,1/0),h=u;return h.length?h.length===1?i.innerFrom(h[0]):n.mergeAll(f)(s.from(h,c)):a.EMPTY}},8655:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.never=e.NEVER=void 0;var n=t(4662),i=t(1342);e.NEVER=new n.Observable(i.noop),e.never=function(){return e.NEVER}},1004:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.of=void 0;var n=t(1107),i=t(4917);e.of=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];var s=n.popScheduler(a);return i.from(a,s)}},6102:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.onErrorResumeNext=void 0;var n=t(4662),i=t(8535),a=t(3111),o=t(1342),s=t(9445);e.onErrorResumeNext=function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];var c=i.argsOrArgArray(u);return new n.Observable(function(f){var h=0,d=function(){if(h<c.length){var v=void 0;try{v=s.innerFrom(c[h++])}catch{return void d()}var y=new a.OperatorSubscriber(f,void 0,o.noop,o.noop);v.subscribe(y),y.add(d)}else f.complete()};d()})}},7740:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.pairs=void 0;var n=t(4917);e.pairs=function(i,a){return n.from(Object.entries(i),a)}},1699:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.partition=void 0;var n=t(245),i=t(783),a=t(9445);e.partition=function(o,s,u){return[i.filter(s,u)(a.innerFrom(o)),i.filter(n.not(s,u))(a.innerFrom(o))]}},5584:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.raceInit=e.race=void 0;var n=t(4662),i=t(9445),a=t(8535),o=t(3111);function s(u){return function(l){for(var c=[],f=function(d){c.push(i.innerFrom(u[d]).subscribe(o.createOperatorSubscriber(l,function(v){if(c){for(var y=0;y<c.length;y++)y!==d&&c[y].unsubscribe();c=null}l.next(v)})))},h=0;c&&!l.closed&&h<u.length;h++)f(h)}}e.race=function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];return(u=a.argsOrArgArray(u)).length===1?i.innerFrom(u[0]):new n.Observable(s(u))},e.raceInit=s},9376:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.range=void 0;var n=t(4662),i=t(8616);e.range=function(a,o,s){if(o==null&&(o=a,a=0),o<=0)return i.EMPTY;var u=o+a;return new n.Observable(s?function(l){var c=a;return s.schedule(function(){c<u?(l.next(c++),this.schedule()):l.complete()})}:function(l){for(var c=a;c<u&&!l.closed;)l.next(c++);l.complete()})}},1103:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.throwError=void 0;var n=t(4662),i=t(1018);e.throwError=function(a,o){var s=i.isFunction(a)?a:function(){return a},u=function(l){return l.error(s())};return new n.Observable(o?function(l){return o.schedule(u,0,l)}:u)}},4092:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.timer=void 0;var n=t(4662),i=t(7961),a=t(8613),o=t(1074);e.timer=function(s,u,l){s===void 0&&(s=0),l===void 0&&(l=i.async);var c=-1;return u!=null&&(a.isScheduler(u)?l=u:c=u),new n.Observable(function(f){var h=o.isValidDate(s)?+s-l.now():s;h<0&&(h=0);var d=0;return l.schedule(function(){f.closed||(f.next(d++),0<=c?this.schedule(void 0,c):f.complete())},h)})}},7853:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.using=void 0;var n=t(4662),i=t(9445),a=t(8616);e.using=function(o,s){return new n.Observable(function(u){var l=o(),c=s(l);return(c?i.innerFrom(c):a.EMPTY).subscribe(u),function(){l&&l.unsubscribe()}})}},7286:function(r,e,t){var n=this&&this.__read||function(f,h){var d=typeof Symbol=="function"&&f[Symbol.iterator];if(!d)return f;var v,y,w=d.call(f),b=[];try{for(;(h===void 0||h-- >0)&&!(v=w.next()).done;)b.push(v.value)}catch(p){y={error:p}}finally{try{v&&!v.done&&(d=w.return)&&d.call(w)}finally{if(y)throw y.error}}return b},i=this&&this.__spreadArray||function(f,h){for(var d=0,v=h.length,y=f.length;d<v;d++,y++)f[y]=h[d];return f};Object.defineProperty(e,"__esModule",{value:!0}),e.zip=void 0;var a=t(4662),o=t(9445),s=t(8535),u=t(8616),l=t(3111),c=t(1107);e.zip=function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];var d=c.popResultSelector(f),v=s.argsOrArgArray(f);return v.length?new a.Observable(function(y){var w=v.map(function(){return[]}),b=v.map(function(){return!1});y.add(function(){w=b=null});for(var p=function(x){o.innerFrom(v[x]).subscribe(l.createOperatorSubscriber(y,function(T){if(w[x].push(T),w.every(function(C){return C.length})){var P=w.map(function(C){return C.shift()});y.next(d?d.apply(void 0,i([],n(P))):P),w.some(function(C,R){return!C.length&&b[R]})&&y.complete()}},function(){b[x]=!0,!w[x].length&&y.complete()}))},m=0;!y.closed&&m<v.length;m++)p(m);return function(){w=b=null}}):u.EMPTY}},3111:function(r,e,t){var n,i=this&&this.__extends||(n=function(s,u){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(l[f]=c[f])},n(s,u)},function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function l(){this.constructor=s}n(s,u),s.prototype=u===null?Object.create(u):(l.prototype=u.prototype,new l)});Object.defineProperty(e,"__esModule",{value:!0}),e.OperatorSubscriber=e.createOperatorSubscriber=void 0;var a=t(5);e.createOperatorSubscriber=function(s,u,l,c,f){return new o(s,u,l,c,f)};var o=function(s){function u(l,c,f,h,d,v){var y=s.call(this,l)||this;return y.onFinalize=d,y.shouldUnsubscribe=v,y._next=c?function(w){try{c(w)}catch(b){l.error(b)}}:s.prototype._next,y._error=h?function(w){try{h(w)}catch(b){l.error(b)}finally{this.unsubscribe()}}:s.prototype._error,y._complete=f?function(){try{f()}catch(w){l.error(w)}finally{this.unsubscribe()}}:s.prototype._complete,y}return i(u,s),u.prototype.unsubscribe=function(){var l;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var c=this.closed;s.prototype.unsubscribe.call(this),!c&&((l=this.onFinalize)===null||l===void 0||l.call(this))}},u}(a.Subscriber);e.OperatorSubscriber=o},3146:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.audit=void 0;var n=t(7843),i=t(9445),a=t(3111);e.audit=function(o){return n.operate(function(s,u){var l=!1,c=null,f=null,h=!1,d=function(){if(f==null||f.unsubscribe(),f=null,l){l=!1;var y=c;c=null,u.next(y)}h&&u.complete()},v=function(){f=null,h&&u.complete()};s.subscribe(a.createOperatorSubscriber(u,function(y){l=!0,c=y,f||i.innerFrom(o(y)).subscribe(f=a.createOperatorSubscriber(u,d,v))},function(){h=!0,(!l||!f||f.closed)&&u.complete()}))})}},3231:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.auditTime=void 0;var n=t(7961),i=t(3146),a=t(4092);e.auditTime=function(o,s){return s===void 0&&(s=n.asyncScheduler),i.audit(function(){return a.timer(o,s)})}},8015:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.buffer=void 0;var n=t(7843),i=t(1342),a=t(3111),o=t(9445);e.buffer=function(s){return n.operate(function(u,l){var c=[];return u.subscribe(a.createOperatorSubscriber(l,function(f){return c.push(f)},function(){l.next(c),l.complete()})),o.innerFrom(s).subscribe(a.createOperatorSubscriber(l,function(){var f=c;c=[],l.next(f)},i.noop)),function(){c=null}})}},5572:function(r,e,t){var n=this&&this.__values||function(s){var u=typeof Symbol=="function"&&Symbol.iterator,l=u&&s[u],c=0;if(l)return l.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&c>=s.length&&(s=void 0),{value:s&&s[c++],done:!s}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.bufferCount=void 0;var i=t(7843),a=t(3111),o=t(7479);e.bufferCount=function(s,u){return u===void 0&&(u=null),u=u??s,i.operate(function(l,c){var f=[],h=0;l.subscribe(a.createOperatorSubscriber(c,function(d){var v,y,w,b,p=null;h++%u==0&&f.push([]);try{for(var m=n(f),x=m.next();!x.done;x=m.next())(C=x.value).push(d),s<=C.length&&(p=p??[]).push(C)}catch(R){v={error:R}}finally{try{x&&!x.done&&(y=m.return)&&y.call(m)}finally{if(v)throw v.error}}if(p)try{for(var T=n(p),P=T.next();!P.done;P=T.next()){var C=P.value;o.arrRemove(f,C),c.next(C)}}catch(R){w={error:R}}finally{try{P&&!P.done&&(b=T.return)&&b.call(T)}finally{if(w)throw w.error}}},function(){var d,v;try{for(var y=n(f),w=y.next();!w.done;w=y.next()){var b=w.value;c.next(b)}}catch(p){d={error:p}}finally{try{w&&!w.done&&(v=y.return)&&v.call(y)}finally{if(d)throw d.error}}c.complete()},void 0,function(){f=null}))})}},7210:function(r,e,t){var n=this&&this.__values||function(f){var h=typeof Symbol=="function"&&Symbol.iterator,d=h&&f[h],v=0;if(d)return d.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&v>=f.length&&(f=void 0),{value:f&&f[v++],done:!f}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.bufferTime=void 0;var i=t(8014),a=t(7843),o=t(3111),s=t(7479),u=t(7961),l=t(1107),c=t(7110);e.bufferTime=function(f){for(var h,d,v=[],y=1;y<arguments.length;y++)v[y-1]=arguments[y];var w=(h=l.popScheduler(v))!==null&&h!==void 0?h:u.asyncScheduler,b=(d=v[0])!==null&&d!==void 0?d:null,p=v[1]||1/0;return a.operate(function(m,x){var T=[],P=!1,C=function(N){var j=N.buffer;N.subs.unsubscribe(),s.arrRemove(T,N),x.next(j),P&&R()},R=function(){if(T){var N=new i.Subscription;x.add(N);var j={buffer:[],subs:N};T.push(j),c.executeSchedule(N,w,function(){return C(j)},f)}};b!==null&&b>=0?c.executeSchedule(x,w,R,b,!0):P=!0,R();var D=o.createOperatorSubscriber(x,function(N){var j,B,z=T.slice();try{for(var W=n(z),Z=W.next();!Z.done;Z=W.next()){var Q=Z.value,re=Q.buffer;re.push(N),p<=re.length&&C(Q)}}catch(ee){j={error:ee}}finally{try{Z&&!Z.done&&(B=W.return)&&B.call(W)}finally{if(j)throw j.error}}},function(){for(;T!=null&&T.length;)x.next(T.shift().buffer);D==null||D.unsubscribe(),x.complete(),x.unsubscribe()},void 0,function(){return T=null});m.subscribe(D)})}},8995:function(r,e,t){var n=this&&this.__values||function(c){var f=typeof Symbol=="function"&&Symbol.iterator,h=f&&c[f],d=0;if(h)return h.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&d>=c.length&&(c=void 0),{value:c&&c[d++],done:!c}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.bufferToggle=void 0;var i=t(8014),a=t(7843),o=t(9445),s=t(3111),u=t(1342),l=t(7479);e.bufferToggle=function(c,f){return a.operate(function(h,d){var v=[];o.innerFrom(c).subscribe(s.createOperatorSubscriber(d,function(y){var w=[];v.push(w);var b=new i.Subscription;b.add(o.innerFrom(f(y)).subscribe(s.createOperatorSubscriber(d,function(){l.arrRemove(v,w),d.next(w),b.unsubscribe()},u.noop)))},u.noop)),h.subscribe(s.createOperatorSubscriber(d,function(y){var w,b;try{for(var p=n(v),m=p.next();!m.done;m=p.next())m.value.push(y)}catch(x){w={error:x}}finally{try{m&&!m.done&&(b=p.return)&&b.call(p)}finally{if(w)throw w.error}}},function(){for(;v.length>0;)d.next(v.shift());d.complete()}))})}},8831:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.bufferWhen=void 0;var n=t(7843),i=t(1342),a=t(3111),o=t(9445);e.bufferWhen=function(s){return n.operate(function(u,l){var c=null,f=null,h=function(){f==null||f.unsubscribe();var d=c;c=[],d&&l.next(d),o.innerFrom(s()).subscribe(f=a.createOperatorSubscriber(l,h,i.noop))};h(),u.subscribe(a.createOperatorSubscriber(l,function(d){return c==null?void 0:c.push(d)},function(){c&&l.next(c),l.complete()},void 0,function(){return c=f=null}))})}},8118:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.catchError=void 0;var n=t(9445),i=t(3111),a=t(7843);e.catchError=function o(s){return a.operate(function(u,l){var c,f=null,h=!1;f=u.subscribe(i.createOperatorSubscriber(l,void 0,void 0,function(d){c=n.innerFrom(s(d,o(s)(u))),f?(f.unsubscribe(),f=null,c.subscribe(l)):h=!0})),h&&(f.unsubscribe(),f=null,c.subscribe(l))})}},6625:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.combineAll=void 0;var n=t(6728);e.combineAll=n.combineLatestAll},2551:function(r,e,t){var n=this&&this.__read||function(f,h){var d=typeof Symbol=="function"&&f[Symbol.iterator];if(!d)return f;var v,y,w=d.call(f),b=[];try{for(;(h===void 0||h-- >0)&&!(v=w.next()).done;)b.push(v.value)}catch(p){y={error:p}}finally{try{v&&!v.done&&(d=w.return)&&d.call(w)}finally{if(y)throw y.error}}return b},i=this&&this.__spreadArray||function(f,h){for(var d=0,v=h.length,y=f.length;d<v;d++,y++)f[y]=h[d];return f};Object.defineProperty(e,"__esModule",{value:!0}),e.combineLatest=void 0;var a=t(3247),o=t(7843),s=t(8535),u=t(1251),l=t(2706),c=t(1107);e.combineLatest=function f(){for(var h=[],d=0;d<arguments.length;d++)h[d]=arguments[d];var v=c.popResultSelector(h);return v?l.pipe(f.apply(void 0,i([],n(h))),u.mapOneOrManyArgs(v)):o.operate(function(y,w){a.combineLatestInit(i([y],n(s.argsOrArgArray(h))))(w)})}},6728:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.combineLatestAll=void 0;var n=t(3247),i=t(3638);e.combineLatestAll=function(a){return i.joinAllInternals(n.combineLatest,a)}},8239:function(r,e,t){var n=this&&this.__read||function(o,s){var u=typeof Symbol=="function"&&o[Symbol.iterator];if(!u)return o;var l,c,f=u.call(o),h=[];try{for(;(s===void 0||s-- >0)&&!(l=f.next()).done;)h.push(l.value)}catch(d){c={error:d}}finally{try{l&&!l.done&&(u=f.return)&&u.call(f)}finally{if(c)throw c.error}}return h},i=this&&this.__spreadArray||function(o,s){for(var u=0,l=s.length,c=o.length;u<l;u++,c++)o[c]=s[u];return o};Object.defineProperty(e,"__esModule",{value:!0}),e.combineLatestWith=void 0;var a=t(2551);e.combineLatestWith=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return a.combineLatest.apply(void 0,i([],n(o)))}},7601:function(r,e,t){var n=this&&this.__read||function(l,c){var f=typeof Symbol=="function"&&l[Symbol.iterator];if(!f)return l;var h,d,v=f.call(l),y=[];try{for(;(c===void 0||c-- >0)&&!(h=v.next()).done;)y.push(h.value)}catch(w){d={error:w}}finally{try{h&&!h.done&&(f=v.return)&&f.call(v)}finally{if(d)throw d.error}}return y},i=this&&this.__spreadArray||function(l,c){for(var f=0,h=c.length,d=l.length;f<h;f++,d++)l[d]=c[f];return l};Object.defineProperty(e,"__esModule",{value:!0}),e.concat=void 0;var a=t(7843),o=t(8158),s=t(1107),u=t(4917);e.concat=function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];var f=s.popScheduler(l);return a.operate(function(h,d){o.concatAll()(u.from(i([h],n(l)),f)).subscribe(d)})}},8158:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.concatAll=void 0;var n=t(7302);e.concatAll=function(){return n.mergeAll(1)}},9135:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.concatMap=void 0;var n=t(983),i=t(1018);e.concatMap=function(a,o){return i.isFunction(o)?n.mergeMap(a,o,1):n.mergeMap(a,1)}},9938:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.concatMapTo=void 0;var n=t(9135),i=t(1018);e.concatMapTo=function(a,o){return i.isFunction(o)?n.concatMap(function(){return a},o):n.concatMap(function(){return a})}},9669:function(r,e,t){var n=this&&this.__read||function(o,s){var u=typeof Symbol=="function"&&o[Symbol.iterator];if(!u)return o;var l,c,f=u.call(o),h=[];try{for(;(s===void 0||s-- >0)&&!(l=f.next()).done;)h.push(l.value)}catch(d){c={error:d}}finally{try{l&&!l.done&&(u=f.return)&&u.call(f)}finally{if(c)throw c.error}}return h},i=this&&this.__spreadArray||function(o,s){for(var u=0,l=s.length,c=o.length;u<l;u++,c++)o[c]=s[u];return o};Object.defineProperty(e,"__esModule",{value:!0}),e.concatWith=void 0;var a=t(7601);e.concatWith=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return a.concat.apply(void 0,i([],n(o)))}},1483:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.connect=void 0;var n=t(2483),i=t(9445),a=t(7843),o=t(6824),s={connector:function(){return new n.Subject}};e.connect=function(u,l){l===void 0&&(l=s);var c=l.connector;return a.operate(function(f,h){var d=c();i.innerFrom(u(o.fromSubscribable(d))).subscribe(h),h.add(f.subscribe(d))})}},1038:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.count=void 0;var n=t(9139);e.count=function(i){return n.reduce(function(a,o,s){return!i||i(o,s)?a+1:a},0)}},4461:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.debounce=void 0;var n=t(7843),i=t(1342),a=t(3111),o=t(9445);e.debounce=function(s){return n.operate(function(u,l){var c=!1,f=null,h=null,d=function(){if(h==null||h.unsubscribe(),h=null,c){c=!1;var v=f;f=null,l.next(v)}};u.subscribe(a.createOperatorSubscriber(l,function(v){h==null||h.unsubscribe(),c=!0,f=v,h=a.createOperatorSubscriber(l,d,i.noop),o.innerFrom(s(v)).subscribe(h)},function(){d(),l.complete()},void 0,function(){f=h=null}))})}},8079:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.debounceTime=void 0;var n=t(7961),i=t(7843),a=t(3111);e.debounceTime=function(o,s){return s===void 0&&(s=n.asyncScheduler),i.operate(function(u,l){var c=null,f=null,h=null,d=function(){if(c){c.unsubscribe(),c=null;var y=f;f=null,l.next(y)}};function v(){var y=h+o,w=s.now();if(w<y)return c=this.schedule(void 0,y-w),void l.add(c);d()}u.subscribe(a.createOperatorSubscriber(l,function(y){f=y,h=s.now(),c||(c=s.schedule(v,o),l.add(c))},function(){d(),l.complete()},void 0,function(){f=c=null}))})}},378:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.defaultIfEmpty=void 0;var n=t(7843),i=t(3111);e.defaultIfEmpty=function(a){return n.operate(function(o,s){var u=!1;o.subscribe(i.createOperatorSubscriber(s,function(l){u=!0,s.next(l)},function(){u||s.next(a),s.complete()}))})}},914:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.delay=void 0;var n=t(7961),i=t(8766),a=t(4092);e.delay=function(o,s){s===void 0&&(s=n.asyncScheduler);var u=a.timer(o,s);return i.delayWhen(function(){return u})}},8766:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.delayWhen=void 0;var n=t(3865),i=t(846),a=t(490),o=t(3218),s=t(983),u=t(9445);e.delayWhen=function l(c,f){return f?function(h){return n.concat(f.pipe(i.take(1),a.ignoreElements()),h.pipe(l(c)))}:s.mergeMap(function(h,d){return u.innerFrom(c(h,d)).pipe(i.take(1),o.mapTo(h))})}},7441:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.dematerialize=void 0;var n=t(7800),i=t(7843),a=t(3111);e.dematerialize=function(){return i.operate(function(o,s){o.subscribe(a.createOperatorSubscriber(s,function(u){return n.observeNotification(u,s)}))})}},5365:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.distinct=void 0;var n=t(7843),i=t(3111),a=t(1342),o=t(9445);e.distinct=function(s,u){return n.operate(function(l,c){var f=new Set;l.subscribe(i.createOperatorSubscriber(c,function(h){var d=s?s(h):h;f.has(d)||(f.add(d),c.next(h))})),u&&o.innerFrom(u).subscribe(i.createOperatorSubscriber(c,function(){return f.clear()},a.noop))})}},8937:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.distinctUntilChanged=void 0;var n=t(6640),i=t(7843),a=t(3111);function o(s,u){return s===u}e.distinctUntilChanged=function(s,u){return u===void 0&&(u=n.identity),s=s??o,i.operate(function(l,c){var f,h=!0;l.subscribe(a.createOperatorSubscriber(c,function(d){var v=u(d);!h&&s(f,v)||(h=!1,f=v,c.next(d))}))})}},9612:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.distinctUntilKeyChanged=void 0;var n=t(8937);e.distinctUntilKeyChanged=function(i,a){return n.distinctUntilChanged(function(o,s){return a?a(o[i],s[i]):o[i]===s[i]})}},4520:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.elementAt=void 0;var n=t(7057),i=t(783),a=t(4869),o=t(378),s=t(846);e.elementAt=function(u,l){if(u<0)throw new n.ArgumentOutOfRangeError;var c=arguments.length>=2;return function(f){return f.pipe(i.filter(function(h,d){return d===u}),s.take(1),c?o.defaultIfEmpty(l):a.throwIfEmpty(function(){return new n.ArgumentOutOfRangeError}))}}},1776:function(r,e,t){var n=this&&this.__read||function(s,u){var l=typeof Symbol=="function"&&s[Symbol.iterator];if(!l)return s;var c,f,h=l.call(s),d=[];try{for(;(u===void 0||u-- >0)&&!(c=h.next()).done;)d.push(c.value)}catch(v){f={error:v}}finally{try{c&&!c.done&&(l=h.return)&&l.call(h)}finally{if(f)throw f.error}}return d},i=this&&this.__spreadArray||function(s,u){for(var l=0,c=u.length,f=s.length;l<c;l++,f++)s[f]=u[l];return s};Object.defineProperty(e,"__esModule",{value:!0}),e.endWith=void 0;var a=t(3865),o=t(1004);e.endWith=function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];return function(l){return a.concat(l,o.of.apply(void 0,i([],n(s))))}}},5510:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.every=void 0;var n=t(7843),i=t(3111);e.every=function(a,o){return n.operate(function(s,u){var l=0;s.subscribe(i.createOperatorSubscriber(u,function(c){a.call(o,c,l++,s)||(u.next(!1),u.complete())},function(){u.next(!0),u.complete()}))})}},1551:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.exhaust=void 0;var n=t(2752);e.exhaust=n.exhaustAll},2752:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.exhaustAll=void 0;var n=t(4753),i=t(6640);e.exhaustAll=function(){return n.exhaustMap(i.identity)}},4753:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.exhaustMap=void 0;var n=t(5471),i=t(9445),a=t(7843),o=t(3111);e.exhaustMap=function s(u,l){return l?function(c){return c.pipe(s(function(f,h){return i.innerFrom(u(f,h)).pipe(n.map(function(d,v){return l(f,d,h,v)}))}))}:a.operate(function(c,f){var h=0,d=null,v=!1;c.subscribe(o.createOperatorSubscriber(f,function(y){d||(d=o.createOperatorSubscriber(f,void 0,function(){d=null,v&&f.complete()}),i.innerFrom(u(y,h++)).subscribe(d))},function(){v=!0,!d&&f.complete()}))})}},7661:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.expand=void 0;var n=t(7843),i=t(1983);e.expand=function(a,o,s){return o===void 0&&(o=1/0),o=(o||0)<1?1/0:o,n.operate(function(u,l){return i.mergeInternals(u,l,a,o,void 0,!0,s)})}},783:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.filter=void 0;var n=t(7843),i=t(3111);e.filter=function(a,o){return n.operate(function(s,u){var l=0;s.subscribe(i.createOperatorSubscriber(u,function(c){return a.call(o,c,l++)&&u.next(c)}))})}},3555:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.finalize=void 0;var n=t(7843);e.finalize=function(i){return n.operate(function(a,o){try{a.subscribe(o)}finally{o.add(i)}})}},7714:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createFind=e.find=void 0;var n=t(7843),i=t(3111);function a(o,s,u){var l=u==="index";return function(c,f){var h=0;c.subscribe(i.createOperatorSubscriber(f,function(d){var v=h++;o.call(s,d,v,c)&&(f.next(l?v:d),f.complete())},function(){f.next(l?-1:void 0),f.complete()}))}}e.find=function(o,s){return n.operate(a(o,s,"value"))},e.createFind=a},9756:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.findIndex=void 0;var n=t(7843),i=t(7714);e.findIndex=function(a,o){return n.operate(i.createFind(a,o,"index"))}},8275:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.first=void 0;var n=t(2823),i=t(783),a=t(846),o=t(378),s=t(4869),u=t(6640);e.first=function(l,c){var f=arguments.length>=2;return function(h){return h.pipe(l?i.filter(function(d,v){return l(d,v,h)}):u.identity,a.take(1),f?o.defaultIfEmpty(c):s.throwIfEmpty(function(){return new n.EmptyError}))}}},6902:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.flatMap=void 0;var n=t(983);e.flatMap=n.mergeMap},7815:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.groupBy=void 0;var n=t(4662),i=t(9445),a=t(2483),o=t(7843),s=t(3111);e.groupBy=function(u,l,c,f){return o.operate(function(h,d){var v;l&&typeof l!="function"?(c=l.duration,v=l.element,f=l.connector):v=l;var y=new Map,w=function(T){y.forEach(T),T(d)},b=function(T){return w(function(P){return P.error(T)})},p=0,m=!1,x=new s.OperatorSubscriber(d,function(T){try{var P=u(T),C=y.get(P);if(!C){y.set(P,C=f?f():new a.Subject);var R=(N=P,j=C,(B=new n.Observable(function(z){p++;var W=j.subscribe(z);return function(){W.unsubscribe(),--p==0&&m&&x.unsubscribe()}})).key=N,B);if(d.next(R),c){var D=s.createOperatorSubscriber(C,function(){C.complete(),D==null||D.unsubscribe()},void 0,void 0,function(){return y.delete(P)});x.add(i.innerFrom(c(R)).subscribe(D))}}C.next(v?v(T):T)}catch(z){b(z)}var N,j,B},function(){return w(function(T){return T.complete()})},b,function(){return y.clear()},function(){return m=!0,p===0});h.subscribe(x)})}},490:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ignoreElements=void 0;var n=t(7843),i=t(3111),a=t(1342);e.ignoreElements=function(){return n.operate(function(o,s){o.subscribe(i.createOperatorSubscriber(s,a.noop))})}},9356:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isEmpty=void 0;var n=t(7843),i=t(3111);e.isEmpty=function(){return n.operate(function(a,o){a.subscribe(i.createOperatorSubscriber(o,function(){o.next(!1),o.complete()},function(){o.next(!0),o.complete()}))})}},3638:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.joinAllInternals=void 0;var n=t(6640),i=t(1251),a=t(2706),o=t(983),s=t(2343);e.joinAllInternals=function(u,l){return a.pipe(s.toArray(),o.mergeMap(function(c){return u(c)}),l?i.mapOneOrManyArgs(l):n.identity)}},8669:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.last=void 0;var n=t(2823),i=t(783),a=t(8330),o=t(4869),s=t(378),u=t(6640);e.last=function(l,c){var f=arguments.length>=2;return function(h){return h.pipe(l?i.filter(function(d,v){return l(d,v,h)}):u.identity,a.takeLast(1),f?s.defaultIfEmpty(c):o.throwIfEmpty(function(){return new n.EmptyError}))}}},5471:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.map=void 0;var n=t(7843),i=t(3111);e.map=function(a,o){return n.operate(function(s,u){var l=0;s.subscribe(i.createOperatorSubscriber(u,function(c){u.next(a.call(o,c,l++))}))})}},3218:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mapTo=void 0;var n=t(5471);e.mapTo=function(i){return n.map(function(){return i})}},2360:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.materialize=void 0;var n=t(7800),i=t(7843),a=t(3111);e.materialize=function(){return i.operate(function(o,s){o.subscribe(a.createOperatorSubscriber(s,function(u){s.next(n.Notification.createNext(u))},function(){s.next(n.Notification.createComplete()),s.complete()},function(u){s.next(n.Notification.createError(u)),s.complete()}))})}},1415:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.max=void 0;var n=t(9139),i=t(1018);e.max=function(a){return n.reduce(i.isFunction(a)?function(o,s){return a(o,s)>0?o:s}:function(o,s){return o>s?o:s})}},361:function(r,e,t){var n=this&&this.__read||function(c,f){var h=typeof Symbol=="function"&&c[Symbol.iterator];if(!h)return c;var d,v,y=h.call(c),w=[];try{for(;(f===void 0||f-- >0)&&!(d=y.next()).done;)w.push(d.value)}catch(b){v={error:b}}finally{try{d&&!d.done&&(h=y.return)&&h.call(y)}finally{if(v)throw v.error}}return w},i=this&&this.__spreadArray||function(c,f){for(var h=0,d=f.length,v=c.length;h<d;h++,v++)c[v]=f[h];return c};Object.defineProperty(e,"__esModule",{value:!0}),e.merge=void 0;var a=t(7843),o=t(8535),s=t(7302),u=t(1107),l=t(4917);e.merge=function(){for(var c=[],f=0;f<arguments.length;f++)c[f]=arguments[f];var h=u.popScheduler(c),d=u.popNumber(c,1/0);return c=o.argsOrArgArray(c),a.operate(function(v,y){s.mergeAll(d)(l.from(i([v],n(c)),h)).subscribe(y)})}},7302:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mergeAll=void 0;var n=t(983),i=t(6640);e.mergeAll=function(a){return a===void 0&&(a=1/0),n.mergeMap(i.identity,a)}},1983:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mergeInternals=void 0;var n=t(9445),i=t(7110),a=t(3111);e.mergeInternals=function(o,s,u,l,c,f,h,d){var v=[],y=0,w=0,b=!1,p=function(){!b||v.length||y||s.complete()},m=function(T){return y<l?x(T):v.push(T)},x=function(T){f&&s.next(T),y++;var P=!1;n.innerFrom(u(T,w++)).subscribe(a.createOperatorSubscriber(s,function(C){c==null||c(C),f?m(C):s.next(C)},function(){P=!0},void 0,function(){if(P)try{y--;for(var C=function(){var R=v.shift();h?i.executeSchedule(s,h,function(){return x(R)}):x(R)};v.length&&y<l;)C();p()}catch(R){s.error(R)}}))};return o.subscribe(a.createOperatorSubscriber(s,m,function(){b=!0,p()})),function(){d==null||d()}}},983:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mergeMap=void 0;var n=t(5471),i=t(9445),a=t(7843),o=t(1983),s=t(1018);e.mergeMap=function u(l,c,f){return f===void 0&&(f=1/0),s.isFunction(c)?u(function(h,d){return n.map(function(v,y){return c(h,v,d,y)})(i.innerFrom(l(h,d)))},f):(typeof c=="number"&&(f=c),a.operate(function(h,d){return o.mergeInternals(h,d,l,f)}))}},6586:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mergeMapTo=void 0;var n=t(983),i=t(1018);e.mergeMapTo=function(a,o,s){return s===void 0&&(s=1/0),i.isFunction(o)?n.mergeMap(function(){return a},o,s):(typeof o=="number"&&(s=o),n.mergeMap(function(){return a},s))}},4408:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mergeScan=void 0;var n=t(7843),i=t(1983);e.mergeScan=function(a,o,s){return s===void 0&&(s=1/0),n.operate(function(u,l){var c=o;return i.mergeInternals(u,l,function(f,h){return a(c,f,h)},s,function(f){c=f},!1,void 0,function(){return c=null})})}},8253:function(r,e,t){var n=this&&this.__read||function(o,s){var u=typeof Symbol=="function"&&o[Symbol.iterator];if(!u)return o;var l,c,f=u.call(o),h=[];try{for(;(s===void 0||s-- >0)&&!(l=f.next()).done;)h.push(l.value)}catch(d){c={error:d}}finally{try{l&&!l.done&&(u=f.return)&&u.call(f)}finally{if(c)throw c.error}}return h},i=this&&this.__spreadArray||function(o,s){for(var u=0,l=s.length,c=o.length;u<l;u++,c++)o[c]=s[u];return o};Object.defineProperty(e,"__esModule",{value:!0}),e.mergeWith=void 0;var a=t(361);e.mergeWith=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return a.merge.apply(void 0,i([],n(o)))}},2669:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.min=void 0;var n=t(9139),i=t(1018);e.min=function(a){return n.reduce(i.isFunction(a)?function(o,s){return a(o,s)<0?o:s}:function(o,s){return o<s?o:s})}},9247:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.multicast=void 0;var n=t(8918),i=t(1018),a=t(1483);e.multicast=function(o,s){var u=i.isFunction(o)?o:function(){return o};return i.isFunction(s)?a.connect(s,{connector:u}):function(l){return new n.ConnectableObservable(l,u)}}},5184:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.observeOn=void 0;var n=t(7110),i=t(7843),a=t(3111);e.observeOn=function(o,s){return s===void 0&&(s=0),i.operate(function(u,l){u.subscribe(a.createOperatorSubscriber(l,function(c){return n.executeSchedule(l,o,function(){return l.next(c)},s)},function(){return n.executeSchedule(l,o,function(){return l.complete()},s)},function(c){return n.executeSchedule(l,o,function(){return l.error(c)},s)}))})}},1226:function(r,e,t){var n=this&&this.__read||function(u,l){var c=typeof Symbol=="function"&&u[Symbol.iterator];if(!c)return u;var f,h,d=c.call(u),v=[];try{for(;(l===void 0||l-- >0)&&!(f=d.next()).done;)v.push(f.value)}catch(y){h={error:y}}finally{try{f&&!f.done&&(c=d.return)&&c.call(d)}finally{if(h)throw h.error}}return v},i=this&&this.__spreadArray||function(u,l){for(var c=0,f=l.length,h=u.length;c<f;c++,h++)u[h]=l[c];return u};Object.defineProperty(e,"__esModule",{value:!0}),e.onErrorResumeNext=e.onErrorResumeNextWith=void 0;var a=t(8535),o=t(6102);function s(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];var c=a.argsOrArgArray(u);return function(f){return o.onErrorResumeNext.apply(void 0,i([f],n(c)))}}e.onErrorResumeNextWith=s,e.onErrorResumeNext=s},1518:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.pairwise=void 0;var n=t(7843),i=t(3111);e.pairwise=function(){return n.operate(function(a,o){var s,u=!1;a.subscribe(i.createOperatorSubscriber(o,function(l){var c=s;s=l,u&&o.next([c,l]),u=!0}))})}},2171:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.partition=void 0;var n=t(245),i=t(783);e.partition=function(a,o){return function(s){return[i.filter(a,o)(s),i.filter(n.not(a,o))(s)]}}},4912:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.pluck=void 0;var n=t(5471);e.pluck=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var o=i.length;if(o===0)throw new Error("list of properties cannot be empty.");return n.map(function(s){for(var u=s,l=0;l<o;l++){var c=u==null?void 0:u[i[l]];if(c===void 0)return;u=c}return u})}},766:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.publish=void 0;var n=t(2483),i=t(9247),a=t(1483);e.publish=function(o){return o?function(s){return a.connect(o)(s)}:function(s){return i.multicast(new n.Subject)(s)}}},7220:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.publishBehavior=void 0;var n=t(1637),i=t(8918);e.publishBehavior=function(a){return function(o){var s=new n.BehaviorSubject(a);return new i.ConnectableObservable(o,function(){return s})}}},6106:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.publishLast=void 0;var n=t(95),i=t(8918);e.publishLast=function(){return function(a){var o=new n.AsyncSubject;return new i.ConnectableObservable(a,function(){return o})}}},8157:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.publishReplay=void 0;var n=t(1242),i=t(9247),a=t(1018);e.publishReplay=function(o,s,u,l){u&&!a.isFunction(u)&&(l=u);var c=a.isFunction(u)?u:void 0;return function(f){return i.multicast(new n.ReplaySubject(o,s,l),c)(f)}}},4440:function(r,e,t){var n=this&&this.__read||function(s,u){var l=typeof Symbol=="function"&&s[Symbol.iterator];if(!l)return s;var c,f,h=l.call(s),d=[];try{for(;(u===void 0||u-- >0)&&!(c=h.next()).done;)d.push(c.value)}catch(v){f={error:v}}finally{try{c&&!c.done&&(l=h.return)&&l.call(h)}finally{if(f)throw f.error}}return d},i=this&&this.__spreadArray||function(s,u){for(var l=0,c=u.length,f=s.length;l<c;l++,f++)s[f]=u[l];return s};Object.defineProperty(e,"__esModule",{value:!0}),e.race=void 0;var a=t(8535),o=t(5600);e.race=function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];return o.raceWith.apply(void 0,i([],n(a.argsOrArgArray(s))))}},5600:function(r,e,t){var n=this&&this.__read||function(u,l){var c=typeof Symbol=="function"&&u[Symbol.iterator];if(!c)return u;var f,h,d=c.call(u),v=[];try{for(;(l===void 0||l-- >0)&&!(f=d.next()).done;)v.push(f.value)}catch(y){h={error:y}}finally{try{f&&!f.done&&(c=d.return)&&c.call(d)}finally{if(h)throw h.error}}return v},i=this&&this.__spreadArray||function(u,l){for(var c=0,f=l.length,h=u.length;c<f;c++,h++)u[h]=l[c];return u};Object.defineProperty(e,"__esModule",{value:!0}),e.raceWith=void 0;var a=t(5584),o=t(7843),s=t(6640);e.raceWith=function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];return u.length?o.operate(function(c,f){a.raceInit(i([c],n(u)))(f)}):s.identity}},9139:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reduce=void 0;var n=t(6384),i=t(7843);e.reduce=function(a,o){return i.operate(n.scanInternals(a,o,arguments.length>=2,!1,!0))}},7561:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.refCount=void 0;var n=t(7843),i=t(3111);e.refCount=function(){return n.operate(function(a,o){var s=null;a._refCount++;var u=i.createOperatorSubscriber(o,void 0,void 0,void 0,function(){if(!a||a._refCount<=0||0<--a._refCount)s=null;else{var l=a._connection,c=s;s=null,!l||c&&l!==c||l.unsubscribe(),o.unsubscribe()}});a.subscribe(u),u.closed||(s=a.connect())})}},8522:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.repeat=void 0;var n=t(8616),i=t(7843),a=t(3111),o=t(9445),s=t(4092);e.repeat=function(u){var l,c,f=1/0;return u!=null&&(typeof u=="object"?(l=u.count,f=l===void 0?1/0:l,c=u.delay):f=u),f<=0?function(){return n.EMPTY}:i.operate(function(h,d){var v,y=0,w=function(){if(v==null||v.unsubscribe(),v=null,c!=null){var p=typeof c=="number"?s.timer(c):o.innerFrom(c(y)),m=a.createOperatorSubscriber(d,function(){m.unsubscribe(),b()});p.subscribe(m)}else b()},b=function(){var p=!1;v=h.subscribe(a.createOperatorSubscriber(d,void 0,function(){++y<f?v?w():p=!0:d.complete()})),p&&w()};b()})}},6566:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.repeatWhen=void 0;var n=t(9445),i=t(2483),a=t(7843),o=t(3111);e.repeatWhen=function(s){return a.operate(function(u,l){var c,f,h=!1,d=!1,v=!1,y=function(){return v&&d&&(l.complete(),!0)},w=function(){v=!1,c=u.subscribe(o.createOperatorSubscriber(l,void 0,function(){v=!0,!y()&&(f||(f=new i.Subject,n.innerFrom(s(f)).subscribe(o.createOperatorSubscriber(l,function(){c?w():h=!0},function(){d=!0,y()}))),f).next()})),h&&(c.unsubscribe(),c=null,h=!1,w())};w()})}},7835:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.retry=void 0;var n=t(7843),i=t(3111),a=t(6640),o=t(4092),s=t(9445);e.retry=function(u){var l;u===void 0&&(u=1/0);var c=(l=u&&typeof u=="object"?u:{count:u}).count,f=c===void 0?1/0:c,h=l.delay,d=l.resetOnSuccess,v=d!==void 0&&d;return f<=0?a.identity:n.operate(function(y,w){var b,p=0,m=function(){var x=!1;b=y.subscribe(i.createOperatorSubscriber(w,function(T){v&&(p=0),w.next(T)},void 0,function(T){if(p++<f){var P=function(){b?(b.unsubscribe(),b=null,m()):x=!0};if(h!=null){var C=typeof h=="number"?o.timer(h):s.innerFrom(h(T,p)),R=i.createOperatorSubscriber(w,function(){R.unsubscribe(),P()},function(){w.complete()});C.subscribe(R)}else P()}else w.error(T)})),x&&(b.unsubscribe(),b=null,m())};m()})}},9843:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.retryWhen=void 0;var n=t(9445),i=t(2483),a=t(7843),o=t(3111);e.retryWhen=function(s){return a.operate(function(u,l){var c,f,h=!1,d=function(){c=u.subscribe(o.createOperatorSubscriber(l,void 0,void 0,function(v){f||(f=new i.Subject,n.innerFrom(s(f)).subscribe(o.createOperatorSubscriber(l,function(){return c?d():h=!0}))),f&&f.next(v)})),h&&(c.unsubscribe(),c=null,h=!1,d())};d()})}},1731:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sample=void 0;var n=t(9445),i=t(7843),a=t(1342),o=t(3111);e.sample=function(s){return i.operate(function(u,l){var c=!1,f=null;u.subscribe(o.createOperatorSubscriber(l,function(h){c=!0,f=h})),n.innerFrom(s).subscribe(o.createOperatorSubscriber(l,function(){if(c){c=!1;var h=f;f=null,l.next(h)}},a.noop))})}},6086:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sampleTime=void 0;var n=t(7961),i=t(1731),a=t(6472);e.sampleTime=function(o,s){return s===void 0&&(s=n.asyncScheduler),i.sample(a.interval(o,s))}},8624:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scan=void 0;var n=t(7843),i=t(6384);e.scan=function(a,o){return n.operate(i.scanInternals(a,o,arguments.length>=2,!0))}},6384:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scanInternals=void 0;var n=t(3111);e.scanInternals=function(i,a,o,s,u){return function(l,c){var f=o,h=a,d=0;l.subscribe(n.createOperatorSubscriber(c,function(v){var y=d++;h=f?i(h,v,y):(f=!0,v),s&&c.next(h)},u&&function(){f&&c.next(h),c.complete()}))}}},582:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sequenceEqual=void 0;var n=t(7843),i=t(3111),a=t(9445);e.sequenceEqual=function(o,s){return s===void 0&&(s=function(u,l){return u===l}),n.operate(function(u,l){var c={buffer:[],complete:!1},f={buffer:[],complete:!1},h=function(v){l.next(v),l.complete()},d=function(v,y){var w=i.createOperatorSubscriber(l,function(b){var p=y.buffer,m=y.complete;p.length===0?m?h(!1):v.buffer.push(b):!s(b,p.shift())&&h(!1)},function(){v.complete=!0;var b=y.complete,p=y.buffer;b&&h(p.length===0),w==null||w.unsubscribe()});return w};u.subscribe(d(c,f)),a.innerFrom(o).subscribe(d(f,c))})}},8977:function(r,e,t){var n=this&&this.__read||function(c,f){var h=typeof Symbol=="function"&&c[Symbol.iterator];if(!h)return c;var d,v,y=h.call(c),w=[];try{for(;(f===void 0||f-- >0)&&!(d=y.next()).done;)w.push(d.value)}catch(b){v={error:b}}finally{try{d&&!d.done&&(h=y.return)&&h.call(y)}finally{if(v)throw v.error}}return w},i=this&&this.__spreadArray||function(c,f){for(var h=0,d=f.length,v=c.length;h<d;h++,v++)c[v]=f[h];return c};Object.defineProperty(e,"__esModule",{value:!0}),e.share=void 0;var a=t(9445),o=t(2483),s=t(5),u=t(7843);function l(c,f){for(var h=[],d=2;d<arguments.length;d++)h[d-2]=arguments[d];if(f!==!0){if(f!==!1){var v=new s.SafeSubscriber({next:function(){v.unsubscribe(),c()}});return a.innerFrom(f.apply(void 0,i([],n(h)))).subscribe(v)}}else c()}e.share=function(c){c===void 0&&(c={});var f=c.connector,h=f===void 0?function(){return new o.Subject}:f,d=c.resetOnError,v=d===void 0||d,y=c.resetOnComplete,w=y===void 0||y,b=c.resetOnRefCountZero,p=b===void 0||b;return function(m){var x,T,P,C=0,R=!1,D=!1,N=function(){T==null||T.unsubscribe(),T=void 0},j=function(){N(),x=P=void 0,R=D=!1},B=function(){var z=x;j(),z==null||z.unsubscribe()};return u.operate(function(z,W){C++,D||R||N();var Z=P=P??h();W.add(function(){--C!=0||D||R||(T=l(B,p))}),Z.subscribe(W),!x&&C>0&&(x=new s.SafeSubscriber({next:function(Q){return Z.next(Q)},error:function(Q){D=!0,N(),T=l(j,v,Q),Z.error(Q)},complete:function(){R=!0,N(),T=l(j,w),Z.complete()}}),a.innerFrom(z).subscribe(x))})(m)}}},3133:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.shareReplay=void 0;var n=t(1242),i=t(8977);e.shareReplay=function(a,o,s){var u,l,c,f,h=!1;return a&&typeof a=="object"?(u=a.bufferSize,f=u===void 0?1/0:u,l=a.windowTime,o=l===void 0?1/0:l,h=(c=a.refCount)!==void 0&&c,s=a.scheduler):f=a??1/0,i.share({connector:function(){return new n.ReplaySubject(f,o,s)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:h})}},3001:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.single=void 0;var n=t(2823),i=t(1505),a=t(1759),o=t(7843),s=t(3111);e.single=function(u){return o.operate(function(l,c){var f,h=!1,d=!1,v=0;l.subscribe(s.createOperatorSubscriber(c,function(y){d=!0,u&&!u(y,v++,l)||(h&&c.error(new i.SequenceError("Too many matching values")),h=!0,f=y)},function(){h?(c.next(f),c.complete()):c.error(d?new a.NotFoundError("No matching values"):new n.EmptyError)}))})}},3982:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.skip=void 0;var n=t(783);e.skip=function(i){return n.filter(function(a,o){return i<=o})}},9098:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.skipLast=void 0;var n=t(6640),i=t(7843),a=t(3111);e.skipLast=function(o){return o<=0?n.identity:i.operate(function(s,u){var l=new Array(o),c=0;return s.subscribe(a.createOperatorSubscriber(u,function(f){var h=c++;if(h<o)l[h]=f;else{var d=h%o,v=l[d];l[d]=f,u.next(v)}})),function(){l=null}})}},7372:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.skipUntil=void 0;var n=t(7843),i=t(3111),a=t(9445),o=t(1342);e.skipUntil=function(s){return n.operate(function(u,l){var c=!1,f=i.createOperatorSubscriber(l,function(){f==null||f.unsubscribe(),c=!0},o.noop);a.innerFrom(s).subscribe(f),u.subscribe(i.createOperatorSubscriber(l,function(h){return c&&l.next(h)}))})}},4721:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.skipWhile=void 0;var n=t(7843),i=t(3111);e.skipWhile=function(a){return n.operate(function(o,s){var u=!1,l=0;o.subscribe(i.createOperatorSubscriber(s,function(c){return(u||(u=!a(c,l++)))&&s.next(c)}))})}},269:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.startWith=void 0;var n=t(3865),i=t(1107),a=t(7843);e.startWith=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var u=i.popScheduler(o);return a.operate(function(l,c){(u?n.concat(o,l,u):n.concat(o,l)).subscribe(c)})}},8960:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.subscribeOn=void 0;var n=t(7843);e.subscribeOn=function(i,a){return a===void 0&&(a=0),n.operate(function(o,s){s.add(i.schedule(function(){return o.subscribe(s)},a))})}},8774:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.switchAll=void 0;var n=t(3879),i=t(6640);e.switchAll=function(){return n.switchMap(i.identity)}},3879:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.switchMap=void 0;var n=t(9445),i=t(7843),a=t(3111);e.switchMap=function(o,s){return i.operate(function(u,l){var c=null,f=0,h=!1,d=function(){return h&&!c&&l.complete()};u.subscribe(a.createOperatorSubscriber(l,function(v){c==null||c.unsubscribe();var y=0,w=f++;n.innerFrom(o(v,w)).subscribe(c=a.createOperatorSubscriber(l,function(b){return l.next(s?s(v,b,w,y++):b)},function(){c=null,d()}))},function(){h=!0,d()}))})}},3274:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.switchMapTo=void 0;var n=t(3879),i=t(1018);e.switchMapTo=function(a,o){return i.isFunction(o)?n.switchMap(function(){return a},o):n.switchMap(function(){return a})}},8712:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.switchScan=void 0;var n=t(3879),i=t(7843);e.switchScan=function(a,o){return i.operate(function(s,u){var l=o;return n.switchMap(function(c,f){return a(l,c,f)},function(c,f){return l=f,f})(s).subscribe(u),function(){l=null}})}},846:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.take=void 0;var n=t(8616),i=t(7843),a=t(3111);e.take=function(o){return o<=0?function(){return n.EMPTY}:i.operate(function(s,u){var l=0;s.subscribe(a.createOperatorSubscriber(u,function(c){++l<=o&&(u.next(c),o<=l&&u.complete())}))})}},8330:function(r,e,t){var n=this&&this.__values||function(s){var u=typeof Symbol=="function"&&Symbol.iterator,l=u&&s[u],c=0;if(l)return l.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&c>=s.length&&(s=void 0),{value:s&&s[c++],done:!s}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.takeLast=void 0;var i=t(8616),a=t(7843),o=t(3111);e.takeLast=function(s){return s<=0?function(){return i.EMPTY}:a.operate(function(u,l){var c=[];u.subscribe(o.createOperatorSubscriber(l,function(f){c.push(f),s<c.length&&c.shift()},function(){var f,h;try{for(var d=n(c),v=d.next();!v.done;v=d.next()){var y=v.value;l.next(y)}}catch(w){f={error:w}}finally{try{v&&!v.done&&(h=d.return)&&h.call(d)}finally{if(f)throw f.error}}l.complete()},void 0,function(){c=null}))})}},4780:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.takeUntil=void 0;var n=t(7843),i=t(3111),a=t(9445),o=t(1342);e.takeUntil=function(s){return n.operate(function(u,l){a.innerFrom(s).subscribe(i.createOperatorSubscriber(l,function(){return l.complete()},o.noop)),!l.closed&&u.subscribe(l)})}},2129:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.takeWhile=void 0;var n=t(7843),i=t(3111);e.takeWhile=function(a,o){return o===void 0&&(o=!1),n.operate(function(s,u){var l=0;s.subscribe(i.createOperatorSubscriber(u,function(c){var f=a(c,l++);(f||o)&&u.next(c),!f&&u.complete()}))})}},3964:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tap=void 0;var n=t(1018),i=t(7843),a=t(3111),o=t(6640);e.tap=function(s,u,l){var c=n.isFunction(s)||u||l?{next:s,error:u,complete:l}:s;return c?i.operate(function(f,h){var d;(d=c.subscribe)===null||d===void 0||d.call(c);var v=!0;f.subscribe(a.createOperatorSubscriber(h,function(y){var w;(w=c.next)===null||w===void 0||w.call(c,y),h.next(y)},function(){var y;v=!1,(y=c.complete)===null||y===void 0||y.call(c),h.complete()},function(y){var w;v=!1,(w=c.error)===null||w===void 0||w.call(c,y),h.error(y)},function(){var y,w;v&&((y=c.unsubscribe)===null||y===void 0||y.call(c)),(w=c.finalize)===null||w===void 0||w.call(c)}))}):o.identity}},8941:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.throttle=void 0;var n=t(7843),i=t(3111),a=t(9445);e.throttle=function(o,s){return n.operate(function(u,l){var c=s??{},f=c.leading,h=f===void 0||f,d=c.trailing,v=d!==void 0&&d,y=!1,w=null,b=null,p=!1,m=function(){b==null||b.unsubscribe(),b=null,v&&(P(),p&&l.complete())},x=function(){b=null,p&&l.complete()},T=function(C){return b=a.innerFrom(o(C)).subscribe(i.createOperatorSubscriber(l,m,x))},P=function(){if(y){y=!1;var C=w;w=null,l.next(C),!p&&T(C)}};u.subscribe(i.createOperatorSubscriber(l,function(C){y=!0,w=C,(!b||b.closed)&&(h?P():T(C))},function(){p=!0,(!(v&&y&&b)||b.closed)&&l.complete()}))})}},7640:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.throttleTime=void 0;var n=t(7961),i=t(8941),a=t(4092);e.throttleTime=function(o,s,u){s===void 0&&(s=n.asyncScheduler);var l=a.timer(o,s);return i.throttle(function(){return l},u)}},4869:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.throwIfEmpty=void 0;var n=t(2823),i=t(7843),a=t(3111);function o(){return new n.EmptyError}e.throwIfEmpty=function(s){return s===void 0&&(s=o),i.operate(function(u,l){var c=!1;u.subscribe(a.createOperatorSubscriber(l,function(f){c=!0,l.next(f)},function(){return c?l.complete():l.error(s())}))})}},489:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TimeInterval=e.timeInterval=void 0;var n=t(7961),i=t(7843),a=t(3111);e.timeInterval=function(s){return s===void 0&&(s=n.asyncScheduler),i.operate(function(u,l){var c=s.now();u.subscribe(a.createOperatorSubscriber(l,function(f){var h=s.now(),d=h-c;c=h,l.next(new o(f,d))}))})};var o=function(s,u){this.value=s,this.interval=u};e.TimeInterval=o},1554:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.timeout=e.TimeoutError=void 0;var n=t(7961),i=t(1074),a=t(7843),o=t(9445),s=t(5568),u=t(3111),l=t(7110);function c(f){throw new e.TimeoutError(f)}e.TimeoutError=s.createErrorClass(function(f){return function(h){h===void 0&&(h=null),f(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=h}}),e.timeout=function(f,h){var d=i.isValidDate(f)?{first:f}:typeof f=="number"?{each:f}:f,v=d.first,y=d.each,w=d.with,b=w===void 0?c:w,p=d.scheduler,m=p===void 0?h??n.asyncScheduler:p,x=d.meta,T=x===void 0?null:x;if(v==null&&y==null)throw new TypeError("No timeout provided.");return a.operate(function(P,C){var R,D,N=null,j=0,B=function(z){D=l.executeSchedule(C,m,function(){try{R.unsubscribe(),o.innerFrom(b({meta:T,lastValue:N,seen:j})).subscribe(C)}catch(W){C.error(W)}},z)};R=P.subscribe(u.createOperatorSubscriber(C,function(z){D==null||D.unsubscribe(),j++,C.next(N=z),y>0&&B(y)},void 0,void 0,function(){D!=null&&D.closed||D==null||D.unsubscribe(),N=null})),!j&&B(v!=null?typeof v=="number"?v:+v-m.now():y)})}},4862:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.timeoutWith=void 0;var n=t(7961),i=t(1074),a=t(1554);e.timeoutWith=function(o,s,u){var l,c,f;if(u=u??n.async,i.isValidDate(o)?l=o:typeof o=="number"&&(c=o),!s)throw new TypeError("No observable provided to switch to");if(f=function(){return s},l==null&&c==null)throw new TypeError("No timeout provided.");return a.timeout({first:l,each:c,scheduler:u,with:f})}},6505:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.timestamp=void 0;var n=t(9568),i=t(5471);e.timestamp=function(a){return a===void 0&&(a=n.dateTimestampProvider),i.map(function(o){return{value:o,timestamp:a.now()}})}},2343:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.toArray=void 0;var n=t(9139),i=t(7843),a=function(o,s){return o.push(s),o};e.toArray=function(){return i.operate(function(o,s){n.reduce(a,[])(o).subscribe(s)})}},5477:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.window=void 0;var n=t(2483),i=t(7843),a=t(3111),o=t(1342),s=t(9445);e.window=function(u){return i.operate(function(l,c){var f=new n.Subject;c.next(f.asObservable());var h=function(d){f.error(d),c.error(d)};return l.subscribe(a.createOperatorSubscriber(c,function(d){return f==null?void 0:f.next(d)},function(){f.complete(),c.complete()},h)),s.innerFrom(u).subscribe(a.createOperatorSubscriber(c,function(){f.complete(),c.next(f=new n.Subject)},o.noop,h)),function(){f==null||f.unsubscribe(),f=null}})}},6746:function(r,e,t){var n=this&&this.__values||function(s){var u=typeof Symbol=="function"&&Symbol.iterator,l=u&&s[u],c=0;if(l)return l.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&c>=s.length&&(s=void 0),{value:s&&s[c++],done:!s}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.windowCount=void 0;var i=t(2483),a=t(7843),o=t(3111);e.windowCount=function(s,u){u===void 0&&(u=0);var l=u>0?u:s;return a.operate(function(c,f){var h=[new i.Subject],d=0;f.next(h[0].asObservable()),c.subscribe(o.createOperatorSubscriber(f,function(v){var y,w;try{for(var b=n(h),p=b.next();!p.done;p=b.next())p.value.next(v)}catch(T){y={error:T}}finally{try{p&&!p.done&&(w=b.return)&&w.call(b)}finally{if(y)throw y.error}}var m=d-s+1;if(m>=0&&m%l==0&&h.shift().complete(),++d%l==0){var x=new i.Subject;h.push(x),f.next(x.asObservable())}},function(){for(;h.length>0;)h.shift().complete();f.complete()},function(v){for(;h.length>0;)h.shift().error(v);f.error(v)},function(){h=null}))})}},8208:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.windowTime=void 0;var n=t(2483),i=t(7961),a=t(8014),o=t(7843),s=t(3111),u=t(7479),l=t(1107),c=t(7110);e.windowTime=function(f){for(var h,d,v=[],y=1;y<arguments.length;y++)v[y-1]=arguments[y];var w=(h=l.popScheduler(v))!==null&&h!==void 0?h:i.asyncScheduler,b=(d=v[0])!==null&&d!==void 0?d:null,p=v[1]||1/0;return o.operate(function(m,x){var T=[],P=!1,C=function(j){var B=j.window,z=j.subs;B.complete(),z.unsubscribe(),u.arrRemove(T,j),P&&R()},R=function(){if(T){var j=new a.Subscription;x.add(j);var B=new n.Subject,z={window:B,subs:j,seen:0};T.push(z),x.next(B.asObservable()),c.executeSchedule(j,w,function(){return C(z)},f)}};b!==null&&b>=0?c.executeSchedule(x,w,R,b,!0):P=!0,R();var D=function(j){return T.slice().forEach(j)},N=function(j){D(function(B){var z=B.window;return j(z)}),j(x),x.unsubscribe()};return m.subscribe(s.createOperatorSubscriber(x,function(j){D(function(B){B.window.next(j),p<=++B.seen&&C(B)})},function(){return N(function(j){return j.complete()})},function(j){return N(function(B){return B.error(j)})})),function(){T=null}})}},6637:function(r,e,t){var n=this&&this.__values||function(f){var h=typeof Symbol=="function"&&Symbol.iterator,d=h&&f[h],v=0;if(d)return d.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&v>=f.length&&(f=void 0),{value:f&&f[v++],done:!f}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.windowToggle=void 0;var i=t(2483),a=t(8014),o=t(7843),s=t(9445),u=t(3111),l=t(1342),c=t(7479);e.windowToggle=function(f,h){return o.operate(function(d,v){var y=[],w=function(b){for(;0<y.length;)y.shift().error(b);v.error(b)};s.innerFrom(f).subscribe(u.createOperatorSubscriber(v,function(b){var p=new i.Subject;y.push(p);var m,x=new a.Subscription;try{m=s.innerFrom(h(b))}catch(T){return void w(T)}v.next(p.asObservable()),x.add(m.subscribe(u.createOperatorSubscriber(v,function(){c.arrRemove(y,p),p.complete(),x.unsubscribe()},l.noop,w)))},l.noop)),d.subscribe(u.createOperatorSubscriber(v,function(b){var p,m,x=y.slice();try{for(var T=n(x),P=T.next();!P.done;P=T.next())P.value.next(b)}catch(C){p={error:C}}finally{try{P&&!P.done&&(m=T.return)&&m.call(T)}finally{if(p)throw p.error}}},function(){for(;0<y.length;)y.shift().complete();v.complete()},w,function(){for(;0<y.length;)y.shift().unsubscribe()}))})}},1141:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.windowWhen=void 0;var n=t(2483),i=t(7843),a=t(3111),o=t(9445);e.windowWhen=function(s){return i.operate(function(u,l){var c,f,h=function(v){c.error(v),l.error(v)},d=function(){var v;f==null||f.unsubscribe(),c==null||c.complete(),c=new n.Subject,l.next(c.asObservable());try{v=o.innerFrom(s())}catch(y){return void h(y)}v.subscribe(f=a.createOperatorSubscriber(l,d,d,h))};d(),u.subscribe(a.createOperatorSubscriber(l,function(v){return c.next(v)},function(){c.complete(),l.complete()},h,function(){f==null||f.unsubscribe(),c=null}))})}},5442:function(r,e,t){var n=this&&this.__read||function(f,h){var d=typeof Symbol=="function"&&f[Symbol.iterator];if(!d)return f;var v,y,w=d.call(f),b=[];try{for(;(h===void 0||h-- >0)&&!(v=w.next()).done;)b.push(v.value)}catch(p){y={error:p}}finally{try{v&&!v.done&&(d=w.return)&&d.call(w)}finally{if(y)throw y.error}}return b},i=this&&this.__spreadArray||function(f,h){for(var d=0,v=h.length,y=f.length;d<v;d++,y++)f[y]=h[d];return f};Object.defineProperty(e,"__esModule",{value:!0}),e.withLatestFrom=void 0;var a=t(7843),o=t(3111),s=t(9445),u=t(6640),l=t(1342),c=t(1107);e.withLatestFrom=function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];var d=c.popResultSelector(f);return a.operate(function(v,y){for(var w=f.length,b=new Array(w),p=f.map(function(){return!1}),m=!1,x=function(P){s.innerFrom(f[P]).subscribe(o.createOperatorSubscriber(y,function(C){b[P]=C,m||p[P]||(p[P]=!0,(m=p.every(u.identity))&&(p=null))},l.noop))},T=0;T<w;T++)x(T);v.subscribe(o.createOperatorSubscriber(y,function(P){if(m){var C=i([P],n(b));y.next(d?d.apply(void 0,i([],n(C))):C)}}))})}},5918:function(r,e,t){var n=this&&this.__read||function(s,u){var l=typeof Symbol=="function"&&s[Symbol.iterator];if(!l)return s;var c,f,h=l.call(s),d=[];try{for(;(u===void 0||u-- >0)&&!(c=h.next()).done;)d.push(c.value)}catch(v){f={error:v}}finally{try{c&&!c.done&&(l=h.return)&&l.call(h)}finally{if(f)throw f.error}}return d},i=this&&this.__spreadArray||function(s,u){for(var l=0,c=u.length,f=s.length;l<c;l++,f++)s[f]=u[l];return s};Object.defineProperty(e,"__esModule",{value:!0}),e.zip=void 0;var a=t(7286),o=t(7843);e.zip=function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];return o.operate(function(l,c){a.zip.apply(void 0,i([l],n(s))).subscribe(c)})}},187:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.zipAll=void 0;var n=t(7286),i=t(3638);e.zipAll=function(a){return i.joinAllInternals(n.zip,a)}},8538:function(r,e,t){var n=this&&this.__read||function(o,s){var u=typeof Symbol=="function"&&o[Symbol.iterator];if(!u)return o;var l,c,f=u.call(o),h=[];try{for(;(s===void 0||s-- >0)&&!(l=f.next()).done;)h.push(l.value)}catch(d){c={error:d}}finally{try{l&&!l.done&&(u=f.return)&&u.call(f)}finally{if(c)throw c.error}}return h},i=this&&this.__spreadArray||function(o,s){for(var u=0,l=s.length,c=o.length;u<l;u++,c++)o[c]=s[u];return o};Object.defineProperty(e,"__esModule",{value:!0}),e.zipWith=void 0;var a=t(5918);e.zipWith=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return a.zip.apply(void 0,i([],n(o)))}},6985:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scheduleArray=void 0;var n=t(4662);e.scheduleArray=function(i,a){return new n.Observable(function(o){var s=0;return a.schedule(function(){s===i.length?o.complete():(o.next(i[s++]),o.closed||this.schedule())})})}},854:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scheduleAsyncIterable=void 0;var n=t(4662),i=t(7110);e.scheduleAsyncIterable=function(a,o){if(!a)throw new Error("Iterable cannot be null");return new n.Observable(function(s){i.executeSchedule(s,o,function(){var u=a[Symbol.asyncIterator]();i.executeSchedule(s,o,function(){u.next().then(function(l){l.done?s.complete():s.next(l.value)})},0,!0)})})}},8808:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scheduleIterable=void 0;var n=t(4662),i=t(1964),a=t(1018),o=t(7110);e.scheduleIterable=function(s,u){return new n.Observable(function(l){var c;return o.executeSchedule(l,u,function(){c=s[i.iterator](),o.executeSchedule(l,u,function(){var f,h,d;try{h=(f=c.next()).value,d=f.done}catch(v){return void l.error(v)}d?l.complete():l.next(h)},0,!0)}),function(){return a.isFunction(c==null?void 0:c.return)&&c.return()}})}},9567:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scheduleObservable=void 0;var n=t(9445),i=t(5184),a=t(8960);e.scheduleObservable=function(o,s){return n.innerFrom(o).pipe(a.subscribeOn(s),i.observeOn(s))}},9589:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.schedulePromise=void 0;var n=t(9445),i=t(5184),a=t(8960);e.schedulePromise=function(o,s){return n.innerFrom(o).pipe(a.subscribeOn(s),i.observeOn(s))}},4953:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scheduleReadableStreamLike=void 0;var n=t(854),i=t(9137);e.scheduleReadableStreamLike=function(a,o){return n.scheduleAsyncIterable(i.readableStreamLikeToAsyncGenerator(a),o)}},1656:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scheduled=void 0;var n=t(9567),i=t(9589),a=t(6985),o=t(8808),s=t(854),u=t(1116),l=t(7629),c=t(8046),f=t(6368),h=t(1358),d=t(7614),v=t(9137),y=t(4953);e.scheduled=function(w,b){if(w!=null){if(u.isInteropObservable(w))return n.scheduleObservable(w,b);if(c.isArrayLike(w))return a.scheduleArray(w,b);if(l.isPromise(w))return i.schedulePromise(w,b);if(h.isAsyncIterable(w))return s.scheduleAsyncIterable(w,b);if(f.isIterable(w))return o.scheduleIterable(w,b);if(v.isReadableStreamLike(w))return y.scheduleReadableStreamLike(w,b)}throw d.createInvalidObservableTypeError(w)}},4671:function(r,e,t){var n,i=this&&this.__extends||(n=function(o,s){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},n(o,s)},function(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=o}n(o,s),o.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)});Object.defineProperty(e,"__esModule",{value:!0}),e.Action=void 0;var a=function(o){function s(u,l){return o.call(this)||this}return i(s,o),s.prototype.schedule=function(u,l){return this},s}(t(8014).Subscription);e.Action=a},2628:function(r,e,t){var n,i=this&&this.__extends||(n=function(u,l){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(c[h]=f[h])},n(u,l)},function(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function c(){this.constructor=u}n(u,l),u.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)});Object.defineProperty(e,"__esModule",{value:!0}),e.AnimationFrameAction=void 0;var a=t(5267),o=t(9507),s=function(u){function l(c,f){var h=u.call(this,c,f)||this;return h.scheduler=c,h.work=f,h}return i(l,u),l.prototype.requestAsyncId=function(c,f,h){return h===void 0&&(h=0),h!==null&&h>0?u.prototype.requestAsyncId.call(this,c,f,h):(c.actions.push(this),c._scheduled||(c._scheduled=o.animationFrameProvider.requestAnimationFrame(function(){return c.flush(void 0)})))},l.prototype.recycleAsyncId=function(c,f,h){var d;if(h===void 0&&(h=0),h!=null?h>0:this.delay>0)return u.prototype.recycleAsyncId.call(this,c,f,h);var v=c.actions;f!=null&&((d=v[v.length-1])===null||d===void 0?void 0:d.id)!==f&&(o.animationFrameProvider.cancelAnimationFrame(f),c._scheduled=void 0)},l}(a.AsyncAction);e.AnimationFrameAction=s},3229:function(r,e,t){var n,i=this&&this.__extends||(n=function(o,s){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},n(o,s)},function(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=o}n(o,s),o.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)});Object.defineProperty(e,"__esModule",{value:!0}),e.AnimationFrameScheduler=void 0;var a=function(o){function s(){return o!==null&&o.apply(this,arguments)||this}return i(s,o),s.prototype.flush=function(u){this._active=!0;var l=this._scheduled;this._scheduled=void 0;var c,f=this.actions;u=u||f.shift();do if(c=u.execute(u.state,u.delay))break;while((u=f[0])&&u.id===l&&f.shift());if(this._active=!1,c){for(;(u=f[0])&&u.id===l&&f.shift();)u.unsubscribe();throw c}},s}(t(5648).AsyncScheduler);e.AnimationFrameScheduler=a},5006:function(r,e,t){var n,i=this&&this.__extends||(n=function(u,l){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(c[h]=f[h])},n(u,l)},function(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function c(){this.constructor=u}n(u,l),u.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)});Object.defineProperty(e,"__esModule",{value:!0}),e.AsapAction=void 0;var a=t(5267),o=t(6293),s=function(u){function l(c,f){var h=u.call(this,c,f)||this;return h.scheduler=c,h.work=f,h}return i(l,u),l.prototype.requestAsyncId=function(c,f,h){return h===void 0&&(h=0),h!==null&&h>0?u.prototype.requestAsyncId.call(this,c,f,h):(c.actions.push(this),c._scheduled||(c._scheduled=o.immediateProvider.setImmediate(c.flush.bind(c,void 0))))},l.prototype.recycleAsyncId=function(c,f,h){var d;if(h===void 0&&(h=0),h!=null?h>0:this.delay>0)return u.prototype.recycleAsyncId.call(this,c,f,h);var v=c.actions;f!=null&&((d=v[v.length-1])===null||d===void 0?void 0:d.id)!==f&&(o.immediateProvider.clearImmediate(f),c._scheduled===f&&(c._scheduled=void 0))},l}(a.AsyncAction);e.AsapAction=s},827:function(r,e,t){var n,i=this&&this.__extends||(n=function(o,s){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},n(o,s)},function(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=o}n(o,s),o.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)});Object.defineProperty(e,"__esModule",{value:!0}),e.AsapScheduler=void 0;var a=function(o){function s(){return o!==null&&o.apply(this,arguments)||this}return i(s,o),s.prototype.flush=function(u){this._active=!0;var l=this._scheduled;this._scheduled=void 0;var c,f=this.actions;u=u||f.shift();do if(c=u.execute(u.state,u.delay))break;while((u=f[0])&&u.id===l&&f.shift());if(this._active=!1,c){for(;(u=f[0])&&u.id===l&&f.shift();)u.unsubscribe();throw c}},s}(t(5648).AsyncScheduler);e.AsapScheduler=a},5267:function(r,e,t){var n,i=this&&this.__extends||(n=function(l,c){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(f[d]=h[d])},n(l,c)},function(l,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function f(){this.constructor=l}n(l,c),l.prototype=c===null?Object.create(c):(f.prototype=c.prototype,new f)});Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncAction=void 0;var a=t(4671),o=t(5649),s=t(7479),u=function(l){function c(f,h){var d=l.call(this,f,h)||this;return d.scheduler=f,d.work=h,d.pending=!1,d}return i(c,l),c.prototype.schedule=function(f,h){var d;if(h===void 0&&(h=0),this.closed)return this;this.state=f;var v=this.id,y=this.scheduler;return v!=null&&(this.id=this.recycleAsyncId(y,v,h)),this.pending=!0,this.delay=h,this.id=(d=this.id)!==null&&d!==void 0?d:this.requestAsyncId(y,this.id,h),this},c.prototype.requestAsyncId=function(f,h,d){return d===void 0&&(d=0),o.intervalProvider.setInterval(f.flush.bind(f,this),d)},c.prototype.recycleAsyncId=function(f,h,d){if(d===void 0&&(d=0),d!=null&&this.delay===d&&this.pending===!1)return h;h!=null&&o.intervalProvider.clearInterval(h)},c.prototype.execute=function(f,h){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var d=this._execute(f,h);if(d)return d;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},c.prototype._execute=function(f,h){var d,v=!1;try{this.work(f)}catch(y){v=!0,d=y||new Error("Scheduled action threw falsy error")}if(v)return this.unsubscribe(),d},c.prototype.unsubscribe=function(){if(!this.closed){var f=this.id,h=this.scheduler,d=h.actions;this.work=this.state=this.scheduler=null,this.pending=!1,s.arrRemove(d,this),f!=null&&(this.id=this.recycleAsyncId(h,f,null)),this.delay=null,l.prototype.unsubscribe.call(this)}},c}(a.Action);e.AsyncAction=u},5648:function(r,e,t){var n,i=this&&this.__extends||(n=function(s,u){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(l[f]=c[f])},n(s,u)},function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function l(){this.constructor=s}n(s,u),s.prototype=u===null?Object.create(u):(l.prototype=u.prototype,new l)});Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncScheduler=void 0;var a=t(8986),o=function(s){function u(l,c){c===void 0&&(c=a.Scheduler.now);var f=s.call(this,l,c)||this;return f.actions=[],f._active=!1,f}return i(u,s),u.prototype.flush=function(l){var c=this.actions;if(this._active)c.push(l);else{var f;this._active=!0;do if(f=l.execute(l.state,l.delay))break;while(l=c.shift());if(this._active=!1,f){for(;l=c.shift();)l.unsubscribe();throw f}}},u}(a.Scheduler);e.AsyncScheduler=o},4212:function(r,e,t){var n,i=this&&this.__extends||(n=function(o,s){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},n(o,s)},function(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=o}n(o,s),o.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)});Object.defineProperty(e,"__esModule",{value:!0}),e.QueueAction=void 0;var a=function(o){function s(u,l){var c=o.call(this,u,l)||this;return c.scheduler=u,c.work=l,c}return i(s,o),s.prototype.schedule=function(u,l){return l===void 0&&(l=0),l>0?o.prototype.schedule.call(this,u,l):(this.delay=l,this.state=u,this.scheduler.flush(this),this)},s.prototype.execute=function(u,l){return l>0||this.closed?o.prototype.execute.call(this,u,l):this._execute(u,l)},s.prototype.requestAsyncId=function(u,l,c){return c===void 0&&(c=0),c!=null&&c>0||c==null&&this.delay>0?o.prototype.requestAsyncId.call(this,u,l,c):(u.flush(this),0)},s}(t(5267).AsyncAction);e.QueueAction=a},1293:function(r,e,t){var n,i=this&&this.__extends||(n=function(o,s){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},n(o,s)},function(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=o}n(o,s),o.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)});Object.defineProperty(e,"__esModule",{value:!0}),e.QueueScheduler=void 0;var a=function(o){function s(){return o!==null&&o.apply(this,arguments)||this}return i(s,o),s}(t(5648).AsyncScheduler);e.QueueScheduler=a},182:function(r,e,t){var n,i=this&&this.__extends||(n=function(l,c){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(f[d]=h[d])},n(l,c)},function(l,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function f(){this.constructor=l}n(l,c),l.prototype=c===null?Object.create(c):(f.prototype=c.prototype,new f)});Object.defineProperty(e,"__esModule",{value:!0}),e.VirtualAction=e.VirtualTimeScheduler=void 0;var a=t(5267),o=t(8014),s=function(l){function c(f,h){f===void 0&&(f=u),h===void 0&&(h=1/0);var d=l.call(this,f,function(){return d.frame})||this;return d.maxFrames=h,d.frame=0,d.index=-1,d}return i(c,l),c.prototype.flush=function(){for(var f,h,d=this.actions,v=this.maxFrames;(h=d[0])&&h.delay<=v&&(d.shift(),this.frame=h.delay,!(f=h.execute(h.state,h.delay))););if(f){for(;h=d.shift();)h.unsubscribe();throw f}},c.frameTimeFactor=10,c}(t(5648).AsyncScheduler);e.VirtualTimeScheduler=s;var u=function(l){function c(f,h,d){d===void 0&&(d=f.index+=1);var v=l.call(this,f,h)||this;return v.scheduler=f,v.work=h,v.index=d,v.active=!0,v.index=f.index=d,v}return i(c,l),c.prototype.schedule=function(f,h){if(h===void 0&&(h=0),Number.isFinite(h)){if(!this.id)return l.prototype.schedule.call(this,f,h);this.active=!1;var d=new c(this.scheduler,this.work);return this.add(d),d.schedule(f,h)}return o.Subscription.EMPTY},c.prototype.requestAsyncId=function(f,h,d){d===void 0&&(d=0),this.delay=f.frame+d;var v=f.actions;return v.push(this),v.sort(c.sortActions),1},c.prototype.recycleAsyncId=function(f,h,d){},c.prototype._execute=function(f,h){if(this.active===!0)return l.prototype._execute.call(this,f,h)},c.sortActions=function(f,h){return f.delay===h.delay?f.index===h.index?0:f.index>h.index?1:-1:f.delay>h.delay?1:-1},c}(a.AsyncAction);e.VirtualAction=u},3862:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrame=e.animationFrameScheduler=void 0;var n=t(2628),i=t(3229);e.animationFrameScheduler=new i.AnimationFrameScheduler(n.AnimationFrameAction),e.animationFrame=e.animationFrameScheduler},9507:function(r,e,t){var n=this&&this.__read||function(o,s){var u=typeof Symbol=="function"&&o[Symbol.iterator];if(!u)return o;var l,c,f=u.call(o),h=[];try{for(;(s===void 0||s-- >0)&&!(l=f.next()).done;)h.push(l.value)}catch(d){c={error:d}}finally{try{l&&!l.done&&(u=f.return)&&u.call(f)}finally{if(c)throw c.error}}return h},i=this&&this.__spreadArray||function(o,s){for(var u=0,l=s.length,c=o.length;u<l;u++,c++)o[c]=s[u];return o};Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrameProvider=void 0;var a=t(8014);e.animationFrameProvider={schedule:function(o){var s=requestAnimationFrame,u=cancelAnimationFrame,l=e.animationFrameProvider.delegate;l&&(s=l.requestAnimationFrame,u=l.cancelAnimationFrame);var c=s(function(f){u=void 0,o(f)});return new a.Subscription(function(){return u==null?void 0:u(c)})},requestAnimationFrame:function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var u=e.animationFrameProvider.delegate;return((u==null?void 0:u.requestAnimationFrame)||requestAnimationFrame).apply(void 0,i([],n(o)))},cancelAnimationFrame:function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var u=e.animationFrameProvider.delegate;return((u==null?void 0:u.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,i([],n(o)))},delegate:void 0}},3692:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.asap=e.asapScheduler=void 0;var n=t(5006),i=t(827);e.asapScheduler=new i.AsapScheduler(n.AsapAction),e.asap=e.asapScheduler},7961:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.async=e.asyncScheduler=void 0;var n=t(5267),i=t(5648);e.asyncScheduler=new i.AsyncScheduler(n.AsyncAction),e.async=e.asyncScheduler},9568:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.dateTimestampProvider=void 0,e.dateTimestampProvider={now:function(){return(e.dateTimestampProvider.delegate||Date).now()},delegate:void 0}},6293:function(r,e,t){var n=this&&this.__read||function(u,l){var c=typeof Symbol=="function"&&u[Symbol.iterator];if(!c)return u;var f,h,d=c.call(u),v=[];try{for(;(l===void 0||l-- >0)&&!(f=d.next()).done;)v.push(f.value)}catch(y){h={error:y}}finally{try{f&&!f.done&&(c=d.return)&&c.call(d)}finally{if(h)throw h.error}}return v},i=this&&this.__spreadArray||function(u,l){for(var c=0,f=l.length,h=u.length;c<f;c++,h++)u[h]=l[c];return u};Object.defineProperty(e,"__esModule",{value:!0}),e.immediateProvider=void 0;var a=t(7245),o=a.Immediate.setImmediate,s=a.Immediate.clearImmediate;e.immediateProvider={setImmediate:function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];var c=e.immediateProvider.delegate;return((c==null?void 0:c.setImmediate)||o).apply(void 0,i([],n(u)))},clearImmediate:function(u){var l=e.immediateProvider.delegate;return((l==null?void 0:l.clearImmediate)||s)(u)},delegate:void 0}},5649:function(r,e){var t=this&&this.__read||function(i,a){var o=typeof Symbol=="function"&&i[Symbol.iterator];if(!o)return i;var s,u,l=o.call(i),c=[];try{for(;(a===void 0||a-- >0)&&!(s=l.next()).done;)c.push(s.value)}catch(f){u={error:f}}finally{try{s&&!s.done&&(o=l.return)&&o.call(l)}finally{if(u)throw u.error}}return c},n=this&&this.__spreadArray||function(i,a){for(var o=0,s=a.length,u=i.length;o<s;o++,u++)i[u]=a[o];return i};Object.defineProperty(e,"__esModule",{value:!0}),e.intervalProvider=void 0,e.intervalProvider={setInterval:function(i,a){for(var o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];var u=e.intervalProvider.delegate;return u!=null&&u.setInterval?u.setInterval.apply(u,n([i,a],t(o))):setInterval.apply(void 0,n([i,a],t(o)))},clearInterval:function(i){var a=e.intervalProvider.delegate;return((a==null?void 0:a.clearInterval)||clearInterval)(i)},delegate:void 0}},4746:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.performanceTimestampProvider=void 0,e.performanceTimestampProvider={now:function(){return(e.performanceTimestampProvider.delegate||performance).now()},delegate:void 0}},2886:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.queue=e.queueScheduler=void 0;var n=t(4212),i=t(1293);e.queueScheduler=new i.QueueScheduler(n.QueueAction),e.queue=e.queueScheduler},9155:function(r,e){var t=this&&this.__read||function(i,a){var o=typeof Symbol=="function"&&i[Symbol.iterator];if(!o)return i;var s,u,l=o.call(i),c=[];try{for(;(a===void 0||a-- >0)&&!(s=l.next()).done;)c.push(s.value)}catch(f){u={error:f}}finally{try{s&&!s.done&&(o=l.return)&&o.call(l)}finally{if(u)throw u.error}}return c},n=this&&this.__spreadArray||function(i,a){for(var o=0,s=a.length,u=i.length;o<s;o++,u++)i[u]=a[o];return i};Object.defineProperty(e,"__esModule",{value:!0}),e.timeoutProvider=void 0,e.timeoutProvider={setTimeout:function(i,a){for(var o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];var u=e.timeoutProvider.delegate;return u!=null&&u.setTimeout?u.setTimeout.apply(u,n([i,a],t(o))):setTimeout.apply(void 0,n([i,a],t(o)))},clearTimeout:function(i){var a=e.timeoutProvider.delegate;return((a==null?void 0:a.clearTimeout)||clearTimeout)(i)},delegate:void 0}},1964:(r,e)=>{function t(){return typeof Symbol=="function"&&Symbol.iterator?Symbol.iterator:"@@iterator"}Object.defineProperty(e,"__esModule",{value:!0}),e.iterator=e.getSymbolIterator=void 0,e.getSymbolIterator=t,e.iterator=t()},3327:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.observable=void 0,e.observable=typeof Symbol=="function"&&Symbol.observable||"@@observable"},6038:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},7057:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ArgumentOutOfRangeError=void 0;var n=t(5568);e.ArgumentOutOfRangeError=n.createErrorClass(function(i){return function(){i(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}})},2823:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.EmptyError=void 0;var n=t(5568);e.EmptyError=n.createErrorClass(function(i){return function(){i(this),this.name="EmptyError",this.message="no elements in sequence"}})},7245:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TestTools=e.Immediate=void 0;var t,n=1,i={};function a(o){return o in i&&(delete i[o],!0)}e.Immediate={setImmediate:function(o){var s=n++;return i[s]=!0,t||(t=Promise.resolve()),t.then(function(){return a(s)&&o()}),s},clearImmediate:function(o){a(o)}},e.TestTools={pending:function(){return Object.keys(i).length}}},1759:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NotFoundError=void 0;var n=t(5568);e.NotFoundError=n.createErrorClass(function(i){return function(a){i(this),this.name="NotFoundError",this.message=a}})},9686:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectUnsubscribedError=void 0;var n=t(5568);e.ObjectUnsubscribedError=n.createErrorClass(function(i){return function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})},1505:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SequenceError=void 0;var n=t(5568);e.SequenceError=n.createErrorClass(function(i){return function(a){i(this),this.name="SequenceError",this.message=a}})},5788:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.UnsubscriptionError=void 0;var n=t(5568);e.UnsubscriptionError=n.createErrorClass(function(i){return function(a){i(this),this.message=a?a.length+` errors occurred during unsubscription:
`+a.map(function(o,s){return s+1+") "+o.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=a}})},1107:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.popNumber=e.popScheduler=e.popResultSelector=void 0;var n=t(1018),i=t(8613);function a(o){return o[o.length-1]}e.popResultSelector=function(o){return n.isFunction(a(o))?o.pop():void 0},e.popScheduler=function(o){return i.isScheduler(a(o))?o.pop():void 0},e.popNumber=function(o,s){return typeof a(o)=="number"?o.pop():s}},7360:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.argsArgArrayOrObject=void 0;var t=Array.isArray,n=Object.getPrototypeOf,i=Object.prototype,a=Object.keys;e.argsArgArrayOrObject=function(o){if(o.length===1){var s=o[0];if(t(s))return{args:s,keys:null};if((l=s)&&typeof l=="object"&&n(l)===i){var u=a(s);return{args:u.map(function(c){return s[c]}),keys:u}}}var l;return{args:o,keys:null}}},8535:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.argsOrArgArray=void 0;var t=Array.isArray;e.argsOrArgArray=function(n){return n.length===1&&t(n[0])?n[0]:n}},7479:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.arrRemove=void 0,e.arrRemove=function(t,n){if(t){var i=t.indexOf(n);0<=i&&t.splice(i,1)}}},5568:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createErrorClass=void 0,e.createErrorClass=function(t){var n=t(function(i){Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}},6013:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createObject=void 0,e.createObject=function(t,n){return t.reduce(function(i,a,o){return i[a]=n[o],i},{})}},9223:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.captureError=e.errorContext=void 0;var n=t(3413),i=null;e.errorContext=function(a){if(n.config.useDeprecatedSynchronousErrorHandling){var o=!i;if(o&&(i={errorThrown:!1,error:null}),a(),o){var s=i,u=s.errorThrown,l=s.error;if(i=null,u)throw l}}else a()},e.captureError=function(a){n.config.useDeprecatedSynchronousErrorHandling&&i&&(i.errorThrown=!0,i.error=a)}},7110:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.executeSchedule=void 0,e.executeSchedule=function(t,n,i,a,o){a===void 0&&(a=0),o===void 0&&(o=!1);var s=n.schedule(function(){i(),o?t.add(this.schedule(null,a)):this.unsubscribe()},a);if(t.add(s),!o)return s}},6640:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.identity=void 0,e.identity=function(t){return t}},8046:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isArrayLike=void 0,e.isArrayLike=function(t){return t&&typeof t.length=="number"&&typeof t!="function"}},1358:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isAsyncIterable=void 0;var n=t(1018);e.isAsyncIterable=function(i){return Symbol.asyncIterator&&n.isFunction(i==null?void 0:i[Symbol.asyncIterator])}},1074:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isValidDate=void 0,e.isValidDate=function(t){return t instanceof Date&&!isNaN(t)}},1018:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isFunction=void 0,e.isFunction=function(t){return typeof t=="function"}},1116:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isInteropObservable=void 0;var n=t(3327),i=t(1018);e.isInteropObservable=function(a){return i.isFunction(a[n.observable])}},6368:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isIterable=void 0;var n=t(1964),i=t(1018);e.isIterable=function(a){return i.isFunction(a==null?void 0:a[n.iterator])}},1751:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isObservable=void 0;var n=t(4662),i=t(1018);e.isObservable=function(a){return!!a&&(a instanceof n.Observable||i.isFunction(a.lift)&&i.isFunction(a.subscribe))}},7629:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isPromise=void 0;var n=t(1018);e.isPromise=function(i){return n.isFunction(i==null?void 0:i.then)}},9137:function(r,e,t){var n=this&&this.__generator||function(s,u){var l,c,f,h,d={label:0,sent:function(){if(1&f[0])throw f[1];return f[1]},trys:[],ops:[]};return h={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function v(y){return function(w){return function(b){if(l)throw new TypeError("Generator is already executing.");for(;d;)try{if(l=1,c&&(f=2&b[0]?c.return:b[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,b[1])).done)return f;switch(c=0,f&&(b=[2&b[0],f.value]),b[0]){case 0:case 1:f=b;break;case 4:return d.label++,{value:b[1],done:!1};case 5:d.label++,c=b[1],b=[0];continue;case 7:b=d.ops.pop(),d.trys.pop();continue;default:if(!((f=(f=d.trys).length>0&&f[f.length-1])||b[0]!==6&&b[0]!==2)){d=0;continue}if(b[0]===3&&(!f||b[1]>f[0]&&b[1]<f[3])){d.label=b[1];break}if(b[0]===6&&d.label<f[1]){d.label=f[1],f=b;break}if(f&&d.label<f[2]){d.label=f[2],d.ops.push(b);break}f[2]&&d.ops.pop(),d.trys.pop();continue}b=u.call(s,d)}catch(p){b=[6,p],c=0}finally{l=f=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}([y,w])}}},i=this&&this.__await||function(s){return this instanceof i?(this.v=s,this):new i(s)},a=this&&this.__asyncGenerator||function(s,u,l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c,f=l.apply(s,u||[]),h=[];return c={},d("next"),d("throw"),d("return"),c[Symbol.asyncIterator]=function(){return this},c;function d(p){f[p]&&(c[p]=function(m){return new Promise(function(x,T){h.push([p,m,x,T])>1||v(p,m)})})}function v(p,m){try{(x=f[p](m)).value instanceof i?Promise.resolve(x.value.v).then(y,w):b(h[0][2],x)}catch(T){b(h[0][3],T)}var x}function y(p){v("next",p)}function w(p){v("throw",p)}function b(p,m){p(m),h.shift(),h.length&&v(h[0][0],h[0][1])}};Object.defineProperty(e,"__esModule",{value:!0}),e.isReadableStreamLike=e.readableStreamLikeToAsyncGenerator=void 0;var o=t(1018);e.readableStreamLikeToAsyncGenerator=function(s){return a(this,arguments,function(){var u,l,c;return n(this,function(f){switch(f.label){case 0:u=s.getReader(),f.label=1;case 1:f.trys.push([1,,9,10]),f.label=2;case 2:return[4,i(u.read())];case 3:return l=f.sent(),c=l.value,l.done?[4,i(void 0)]:[3,5];case 4:return[2,f.sent()];case 5:return[4,i(c)];case 6:return[4,f.sent()];case 7:return f.sent(),[3,2];case 8:return[3,10];case 9:return u.releaseLock(),[7];case 10:return[2]}})})},e.isReadableStreamLike=function(s){return o.isFunction(s==null?void 0:s.getReader)}},8613:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isScheduler=void 0;var n=t(1018);e.isScheduler=function(i){return i&&n.isFunction(i.schedule)}},7843:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.operate=e.hasLift=void 0;var n=t(1018);function i(a){return n.isFunction(a==null?void 0:a.lift)}e.hasLift=i,e.operate=function(a){return function(o){if(i(o))return o.lift(function(s){try{return a(s,this)}catch(u){this.error(u)}});throw new TypeError("Unable to lift unknown Observable type")}}},1251:function(r,e,t){var n=this&&this.__read||function(s,u){var l=typeof Symbol=="function"&&s[Symbol.iterator];if(!l)return s;var c,f,h=l.call(s),d=[];try{for(;(u===void 0||u-- >0)&&!(c=h.next()).done;)d.push(c.value)}catch(v){f={error:v}}finally{try{c&&!c.done&&(l=h.return)&&l.call(h)}finally{if(f)throw f.error}}return d},i=this&&this.__spreadArray||function(s,u){for(var l=0,c=u.length,f=s.length;l<c;l++,f++)s[f]=u[l];return s};Object.defineProperty(e,"__esModule",{value:!0}),e.mapOneOrManyArgs=void 0;var a=t(5471),o=Array.isArray;e.mapOneOrManyArgs=function(s){return a.map(function(u){return function(l,c){return o(c)?l.apply(void 0,i([],n(c))):l(c)}(s,u)})}},1342:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.noop=void 0,e.noop=function(){}},245:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.not=void 0,e.not=function(t,n){return function(i,a){return!t.call(n,i,a)}}},2706:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.pipeFromArray=e.pipe=void 0;var n=t(6640);function i(a){return a.length===0?n.identity:a.length===1?a[0]:function(o){return a.reduce(function(s,u){return u(s)},o)}}e.pipe=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return i(a)},e.pipeFromArray=i},7315:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reportUnhandledError=void 0;var n=t(3413),i=t(9155);e.reportUnhandledError=function(a){i.timeoutProvider.setTimeout(function(){var o=n.config.onUnhandledError;if(!o)throw a;o(a)})}},7614:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createInvalidObservableTypeError=void 0,e.createInvalidObservableTypeError=function(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}},9419:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mergeAll=e.merge=e.max=e.materialize=e.mapTo=e.map=e.last=e.isEmpty=e.ignoreElements=e.groupBy=e.first=e.findIndex=e.find=e.finalize=e.filter=e.expand=e.exhaustMap=e.exhaustAll=e.exhaust=e.every=e.endWith=e.elementAt=e.distinctUntilKeyChanged=e.distinctUntilChanged=e.distinct=e.dematerialize=e.delayWhen=e.delay=e.defaultIfEmpty=e.debounceTime=e.debounce=e.count=e.connect=e.concatWith=e.concatMapTo=e.concatMap=e.concatAll=e.concat=e.combineLatestWith=e.combineLatest=e.combineLatestAll=e.combineAll=e.catchError=e.bufferWhen=e.bufferToggle=e.bufferTime=e.bufferCount=e.buffer=e.auditTime=e.audit=void 0,e.timeInterval=e.throwIfEmpty=e.throttleTime=e.throttle=e.tap=e.takeWhile=e.takeUntil=e.takeLast=e.take=e.switchScan=e.switchMapTo=e.switchMap=e.switchAll=e.subscribeOn=e.startWith=e.skipWhile=e.skipUntil=e.skipLast=e.skip=e.single=e.shareReplay=e.share=e.sequenceEqual=e.scan=e.sampleTime=e.sample=e.refCount=e.retryWhen=e.retry=e.repeatWhen=e.repeat=e.reduce=e.raceWith=e.race=e.publishReplay=e.publishLast=e.publishBehavior=e.publish=e.pluck=e.partition=e.pairwise=e.onErrorResumeNext=e.observeOn=e.multicast=e.min=e.mergeWith=e.mergeScan=e.mergeMapTo=e.mergeMap=e.flatMap=void 0,e.zipWith=e.zipAll=e.zip=e.withLatestFrom=e.windowWhen=e.windowToggle=e.windowTime=e.windowCount=e.window=e.toArray=e.timestamp=e.timeoutWith=e.timeout=void 0;var n=t(3146);Object.defineProperty(e,"audit",{enumerable:!0,get:function(){return n.audit}});var i=t(3231);Object.defineProperty(e,"auditTime",{enumerable:!0,get:function(){return i.auditTime}});var a=t(8015);Object.defineProperty(e,"buffer",{enumerable:!0,get:function(){return a.buffer}});var o=t(5572);Object.defineProperty(e,"bufferCount",{enumerable:!0,get:function(){return o.bufferCount}});var s=t(7210);Object.defineProperty(e,"bufferTime",{enumerable:!0,get:function(){return s.bufferTime}});var u=t(8995);Object.defineProperty(e,"bufferToggle",{enumerable:!0,get:function(){return u.bufferToggle}});var l=t(8831);Object.defineProperty(e,"bufferWhen",{enumerable:!0,get:function(){return l.bufferWhen}});var c=t(8118);Object.defineProperty(e,"catchError",{enumerable:!0,get:function(){return c.catchError}});var f=t(6625);Object.defineProperty(e,"combineAll",{enumerable:!0,get:function(){return f.combineAll}});var h=t(6728);Object.defineProperty(e,"combineLatestAll",{enumerable:!0,get:function(){return h.combineLatestAll}});var d=t(2551);Object.defineProperty(e,"combineLatest",{enumerable:!0,get:function(){return d.combineLatest}});var v=t(8239);Object.defineProperty(e,"combineLatestWith",{enumerable:!0,get:function(){return v.combineLatestWith}});var y=t(7601);Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return y.concat}});var w=t(8158);Object.defineProperty(e,"concatAll",{enumerable:!0,get:function(){return w.concatAll}});var b=t(9135);Object.defineProperty(e,"concatMap",{enumerable:!0,get:function(){return b.concatMap}});var p=t(9938);Object.defineProperty(e,"concatMapTo",{enumerable:!0,get:function(){return p.concatMapTo}});var m=t(9669);Object.defineProperty(e,"concatWith",{enumerable:!0,get:function(){return m.concatWith}});var x=t(1483);Object.defineProperty(e,"connect",{enumerable:!0,get:function(){return x.connect}});var T=t(1038);Object.defineProperty(e,"count",{enumerable:!0,get:function(){return T.count}});var P=t(4461);Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return P.debounce}});var C=t(8079);Object.defineProperty(e,"debounceTime",{enumerable:!0,get:function(){return C.debounceTime}});var R=t(378);Object.defineProperty(e,"defaultIfEmpty",{enumerable:!0,get:function(){return R.defaultIfEmpty}});var D=t(914);Object.defineProperty(e,"delay",{enumerable:!0,get:function(){return D.delay}});var N=t(8766);Object.defineProperty(e,"delayWhen",{enumerable:!0,get:function(){return N.delayWhen}});var j=t(7441);Object.defineProperty(e,"dematerialize",{enumerable:!0,get:function(){return j.dematerialize}});var B=t(5365);Object.defineProperty(e,"distinct",{enumerable:!0,get:function(){return B.distinct}});var z=t(8937);Object.defineProperty(e,"distinctUntilChanged",{enumerable:!0,get:function(){return z.distinctUntilChanged}});var W=t(9612);Object.defineProperty(e,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return W.distinctUntilKeyChanged}});var Z=t(4520);Object.defineProperty(e,"elementAt",{enumerable:!0,get:function(){return Z.elementAt}});var Q=t(1776);Object.defineProperty(e,"endWith",{enumerable:!0,get:function(){return Q.endWith}});var re=t(5510);Object.defineProperty(e,"every",{enumerable:!0,get:function(){return re.every}});var ee=t(1551);Object.defineProperty(e,"exhaust",{enumerable:!0,get:function(){return ee.exhaust}});var ue=t(2752);Object.defineProperty(e,"exhaustAll",{enumerable:!0,get:function(){return ue.exhaustAll}});var de=t(4753);Object.defineProperty(e,"exhaustMap",{enumerable:!0,get:function(){return de.exhaustMap}});var se=t(7661);Object.defineProperty(e,"expand",{enumerable:!0,get:function(){return se.expand}});var me=t(783);Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return me.filter}});var Me=t(3555);Object.defineProperty(e,"finalize",{enumerable:!0,get:function(){return Me.finalize}});var he=t(7714);Object.defineProperty(e,"find",{enumerable:!0,get:function(){return he.find}});var fe=t(9756);Object.defineProperty(e,"findIndex",{enumerable:!0,get:function(){return fe.findIndex}});var Ee=t(8275);Object.defineProperty(e,"first",{enumerable:!0,get:function(){return Ee.first}});var Ce=t(7815);Object.defineProperty(e,"groupBy",{enumerable:!0,get:function(){return Ce.groupBy}});var ke=t(490);Object.defineProperty(e,"ignoreElements",{enumerable:!0,get:function(){return ke.ignoreElements}});var Re=t(9356);Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return Re.isEmpty}});var ve=t(8669);Object.defineProperty(e,"last",{enumerable:!0,get:function(){return ve.last}});var we=t(5471);Object.defineProperty(e,"map",{enumerable:!0,get:function(){return we.map}});var Oe=t(3218);Object.defineProperty(e,"mapTo",{enumerable:!0,get:function(){return Oe.mapTo}});var Be=t(2360);Object.defineProperty(e,"materialize",{enumerable:!0,get:function(){return Be.materialize}});var Ye=t(1415);Object.defineProperty(e,"max",{enumerable:!0,get:function(){return Ye.max}});var ht=t(361);Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return ht.merge}});var Ct=t(7302);Object.defineProperty(e,"mergeAll",{enumerable:!0,get:function(){return Ct.mergeAll}});var ct=t(6902);Object.defineProperty(e,"flatMap",{enumerable:!0,get:function(){return ct.flatMap}});var H=t(983);Object.defineProperty(e,"mergeMap",{enumerable:!0,get:function(){return H.mergeMap}});var $=t(6586);Object.defineProperty(e,"mergeMapTo",{enumerable:!0,get:function(){return $.mergeMapTo}});var ne=t(4408);Object.defineProperty(e,"mergeScan",{enumerable:!0,get:function(){return ne.mergeScan}});var Ie=t(8253);Object.defineProperty(e,"mergeWith",{enumerable:!0,get:function(){return Ie.mergeWith}});var Le=t(2669);Object.defineProperty(e,"min",{enumerable:!0,get:function(){return Le.min}});var ze=t(9247);Object.defineProperty(e,"multicast",{enumerable:!0,get:function(){return ze.multicast}});var Je=t(5184);Object.defineProperty(e,"observeOn",{enumerable:!0,get:function(){return Je.observeOn}});var Pt=t(1226);Object.defineProperty(e,"onErrorResumeNext",{enumerable:!0,get:function(){return Pt.onErrorResumeNext}});var Lt=t(1518);Object.defineProperty(e,"pairwise",{enumerable:!0,get:function(){return Lt.pairwise}});var Wt=t(2171);Object.defineProperty(e,"partition",{enumerable:!0,get:function(){return Wt.partition}});var Bt=t(4912);Object.defineProperty(e,"pluck",{enumerable:!0,get:function(){return Bt.pluck}});var er=t(766);Object.defineProperty(e,"publish",{enumerable:!0,get:function(){return er.publish}});var Ar=t(7220);Object.defineProperty(e,"publishBehavior",{enumerable:!0,get:function(){return Ar.publishBehavior}});var Yt=t(6106);Object.defineProperty(e,"publishLast",{enumerable:!0,get:function(){return Yt.publishLast}});var dt=t(8157);Object.defineProperty(e,"publishReplay",{enumerable:!0,get:function(){return dt.publishReplay}});var be=t(4440);Object.defineProperty(e,"race",{enumerable:!0,get:function(){return be.race}});var it=t(5600);Object.defineProperty(e,"raceWith",{enumerable:!0,get:function(){return it.raceWith}});var st=t(9139);Object.defineProperty(e,"reduce",{enumerable:!0,get:function(){return st.reduce}});var ut=t(8522);Object.defineProperty(e,"repeat",{enumerable:!0,get:function(){return ut.repeat}});var lt=t(6566);Object.defineProperty(e,"repeatWhen",{enumerable:!0,get:function(){return lt.repeatWhen}});var Xt=t(7835);Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return Xt.retry}});var pt=t(9843);Object.defineProperty(e,"retryWhen",{enumerable:!0,get:function(){return pt.retryWhen}});var Qt=t(7561);Object.defineProperty(e,"refCount",{enumerable:!0,get:function(){return Qt.refCount}});var mr=t(1731);Object.defineProperty(e,"sample",{enumerable:!0,get:function(){return mr.sample}});var Rr=t(6086);Object.defineProperty(e,"sampleTime",{enumerable:!0,get:function(){return Rr.sampleTime}});var ar=t(8624);Object.defineProperty(e,"scan",{enumerable:!0,get:function(){return ar.scan}});var nr=t(582);Object.defineProperty(e,"sequenceEqual",{enumerable:!0,get:function(){return nr.sequenceEqual}});var tr=t(8977);Object.defineProperty(e,"share",{enumerable:!0,get:function(){return tr.share}});var lr=t(3133);Object.defineProperty(e,"shareReplay",{enumerable:!0,get:function(){return lr.shareReplay}});var Vr=t(3001);Object.defineProperty(e,"single",{enumerable:!0,get:function(){return Vr.single}});var fn=t(3982);Object.defineProperty(e,"skip",{enumerable:!0,get:function(){return fn.skip}});var In=t(9098);Object.defineProperty(e,"skipLast",{enumerable:!0,get:function(){return In.skipLast}});var Un=t(7372);Object.defineProperty(e,"skipUntil",{enumerable:!0,get:function(){return Un.skipUntil}});var hn=t(4721);Object.defineProperty(e,"skipWhile",{enumerable:!0,get:function(){return hn.skipWhile}});var Kn=t(269);Object.defineProperty(e,"startWith",{enumerable:!0,get:function(){return Kn.startWith}});var vn=t(8960);Object.defineProperty(e,"subscribeOn",{enumerable:!0,get:function(){return vn.subscribeOn}});var Ei=t(8774);Object.defineProperty(e,"switchAll",{enumerable:!0,get:function(){return Ei.switchAll}});var Li=t(3879);Object.defineProperty(e,"switchMap",{enumerable:!0,get:function(){return Li.switchMap}});var Br=t(3274);Object.defineProperty(e,"switchMapTo",{enumerable:!0,get:function(){return Br.switchMapTo}});var Tn=t(8712);Object.defineProperty(e,"switchScan",{enumerable:!0,get:function(){return Tn.switchScan}});var Ni=t(846);Object.defineProperty(e,"take",{enumerable:!0,get:function(){return Ni.take}});var _o=t(8330);Object.defineProperty(e,"takeLast",{enumerable:!0,get:function(){return _o.takeLast}});var Pi=t(4780);Object.defineProperty(e,"takeUntil",{enumerable:!0,get:function(){return Pi.takeUntil}});var vi=t(2129);Object.defineProperty(e,"takeWhile",{enumerable:!0,get:function(){return vi.takeWhile}});var un=t(3964);Object.defineProperty(e,"tap",{enumerable:!0,get:function(){return un.tap}});var zn=t(8941);Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return zn.throttle}});var Ta=t(7640);Object.defineProperty(e,"throttleTime",{enumerable:!0,get:function(){return Ta.throttleTime}});var pi=t(4869);Object.defineProperty(e,"throwIfEmpty",{enumerable:!0,get:function(){return pi.throwIfEmpty}});var Ou=t(489);Object.defineProperty(e,"timeInterval",{enumerable:!0,get:function(){return Ou.timeInterval}});var Ca=t(1554);Object.defineProperty(e,"timeout",{enumerable:!0,get:function(){return Ca.timeout}});var Hi=t(4862);Object.defineProperty(e,"timeoutWith",{enumerable:!0,get:function(){return Hi.timeoutWith}});var Wa=t(6505);Object.defineProperty(e,"timestamp",{enumerable:!0,get:function(){return Wa.timestamp}});var na=t(2343);Object.defineProperty(e,"toArray",{enumerable:!0,get:function(){return na.toArray}});var kn=t(5477);Object.defineProperty(e,"window",{enumerable:!0,get:function(){return kn.window}});var ui=t(6746);Object.defineProperty(e,"windowCount",{enumerable:!0,get:function(){return ui.windowCount}});var pr=t(8208);Object.defineProperty(e,"windowTime",{enumerable:!0,get:function(){return pr.windowTime}});var Pa=t(6637);Object.defineProperty(e,"windowToggle",{enumerable:!0,get:function(){return Pa.windowToggle}});var lo=t(1141);Object.defineProperty(e,"windowWhen",{enumerable:!0,get:function(){return lo.windowWhen}});var qr=t(5442);Object.defineProperty(e,"withLatestFrom",{enumerable:!0,get:function(){return qr.withLatestFrom}});var Kr=t(5918);Object.defineProperty(e,"zip",{enumerable:!0,get:function(){return Kr.zip}});var Ha=t(187);Object.defineProperty(e,"zipAll",{enumerable:!0,get:function(){return Ha.zipAll}});var Hs=t(8538);Object.defineProperty(e,"zipWith",{enumerable:!0,get:function(){return Hs.zipWith}})},5636:(r,e,t)=>{var n=t(1048),i=n.Buffer;function a(s,u){for(var l in s)u[l]=s[l]}function o(s,u,l){return i(s,u,l)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?r.exports=n:(a(n,e),e.Buffer=o),o.prototype=Object.create(i.prototype),a(i,o),o.from=function(s,u,l){if(typeof s=="number")throw new TypeError("Argument must not be a number");return i(s,u,l)},o.alloc=function(s,u,l){if(typeof s!="number")throw new TypeError("Argument must be a number");var c=i(s);return u!==void 0?typeof l=="string"?c.fill(u,l):c.fill(u):c.fill(0),c},o.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return i(s)},o.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(s)}},9975:(r,e,t)=>{var n=t(7101),i=Array.prototype.concat,a=Array.prototype.slice,o=r.exports=function(s){for(var u=[],l=0,c=s.length;l<c;l++){var f=s[l];n(f)?u=i.call(u,a.call(f)):u.push(f)}return u};o.wrap=function(s){return function(){return s(o(arguments))}}},7101:r=>{r.exports=function(e){return!(!e||typeof e=="string")&&(e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String"))}},8888:(r,e,t)=>{var n=t(5636).Buffer,i=n.isEncoding||function(v){switch((v=""+v)&&v.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(v){var y;switch(this.encoding=function(w){var b=function(p){if(!p)return"utf8";for(var m;;)switch(p){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return p;default:if(m)return;p=(""+p).toLowerCase(),m=!0}}(w);if(typeof b!="string"&&(n.isEncoding===i||!i(w)))throw new Error("Unknown encoding: "+w);return b||w}(v),this.encoding){case"utf16le":this.text=u,this.end=l,y=4;break;case"utf8":this.fillLast=s,y=4;break;case"base64":this.text=c,this.end=f,y=3;break;default:return this.write=h,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(y)}function o(v){return v<=127?0:v>>5==6?2:v>>4==14?3:v>>3==30?4:v>>6==2?-1:-2}function s(v){var y=this.lastTotal-this.lastNeed,w=function(b,p,m){if((192&p[0])!=128)return b.lastNeed=0,"";if(b.lastNeed>1&&p.length>1){if((192&p[1])!=128)return b.lastNeed=1,"";if(b.lastNeed>2&&p.length>2&&(192&p[2])!=128)return b.lastNeed=2,""}}(this,v);return w!==void 0?w:this.lastNeed<=v.length?(v.copy(this.lastChar,y,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(v.copy(this.lastChar,y,0,v.length),void(this.lastNeed-=v.length))}function u(v,y){if((v.length-y)%2==0){var w=v.toString("utf16le",y);if(w){var b=w.charCodeAt(w.length-1);if(b>=55296&&b<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=v[v.length-2],this.lastChar[1]=v[v.length-1],w.slice(0,-1)}return w}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=v[v.length-1],v.toString("utf16le",y,v.length-1)}function l(v){var y=v&&v.length?this.write(v):"";if(this.lastNeed){var w=this.lastTotal-this.lastNeed;return y+this.lastChar.toString("utf16le",0,w)}return y}function c(v,y){var w=(v.length-y)%3;return w===0?v.toString("base64",y):(this.lastNeed=3-w,this.lastTotal=3,w===1?this.lastChar[0]=v[v.length-1]:(this.lastChar[0]=v[v.length-2],this.lastChar[1]=v[v.length-1]),v.toString("base64",y,v.length-w))}function f(v){var y=v&&v.length?this.write(v):"";return this.lastNeed?y+this.lastChar.toString("base64",0,3-this.lastNeed):y}function h(v){return v.toString(this.encoding)}function d(v){return v&&v.length?this.write(v):""}e.StringDecoder=a,a.prototype.write=function(v){if(v.length===0)return"";var y,w;if(this.lastNeed){if((y=this.fillLast(v))===void 0)return"";w=this.lastNeed,this.lastNeed=0}else w=0;return w<v.length?y?y+this.text(v,w):this.text(v,w):y||""},a.prototype.end=function(v){var y=v&&v.length?this.write(v):"";return this.lastNeed?y+"":y},a.prototype.text=function(v,y){var w=function(p,m,x){var T=m.length-1;if(T<x)return 0;var P=o(m[T]);return P>=0?(P>0&&(p.lastNeed=P-1),P):--T<x||P===-2?0:(P=o(m[T]))>=0?(P>0&&(p.lastNeed=P-2),P):--T<x||P===-2?0:(P=o(m[T]))>=0?(P>0&&(P===2?P=0:p.lastNeed=P-3),P):0}(this,v,y);if(!this.lastNeed)return v.toString("utf8",y);this.lastTotal=w;var b=v.length-(w-this.lastNeed);return v.copy(this.lastChar,0,b),v.toString("utf8",y,b)},a.prototype.fillLast=function(v){if(this.lastNeed<=v.length)return v.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);v.copy(this.lastChar,this.lastTotal-this.lastNeed,0,v.length),this.lastNeed-=v.length}}},mS={};function Mi(r){var e=mS[r];if(e!==void 0)return e.exports;var t=mS[r]={id:r,loaded:!1,exports:{}};return G5[r].call(t.exports,t,t.exports,Mi),t.loaded=!0,t.exports}Mi.n=r=>{var e=r&&r.__esModule?()=>r.default:()=>r;return Mi.d(e,{a:e}),e},Mi.d=(r,e)=>{for(var t in e)Mi.o(e,t)&&!Mi.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:e[t]})},Mi.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),Mi.o=(r,e)=>Object.prototype.hasOwnProperty.call(r,e),Mi.nmd=r=>(r.paths=[],r.children||(r.children=[]),r);var xu={};(()=>{Mi.d(xu,{RL:()=>ml,wK:()=>wh,x_:()=>Td,lv:()=>wf,YQ:()=>xl,BP:()=>Xy,GZ:()=>K0,Vw:()=>os,Ay:()=>$0,_G:()=>Ac,Wy:()=>sr,h4:()=>F0});var r=Mi(5250);function e(g){return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},e(g)}function t(g,_){for(var O=0;O<_.length;O++){var E=_[O];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,n(E.key),E)}}function n(g){var _=function(O,E){if(e(O)!="object"||!O)return O;var M=O[Symbol.toPrimitive];if(M!==void 0){var I=M.call(O,"string");if(e(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(O)}(g);return e(_)=="symbol"?_:String(_)}var i=["onLayoutDone","onLayoutStep","onError","onLayoutComputing","onWebGLContextLost","onZoomTransitionDone","restart"],a=function(){function g(){var E,M,I,F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(function(q,G){if(!(q instanceof G))throw new TypeError("Cannot call a class as a function")})(this,g),E=this,I=void 0,(M=n(M="callbacks"))in E?Object.defineProperty(E,M,{value:I,enumerable:!0,configurable:!0,writable:!0}):E[M]=I,this.callbacks=F}var _,O;return _=g,O=[{key:"onZoomTransitionDone",value:function(){this.isValidFunction(this.callbacks.onZoomTransitionDone)&&this.callbacks.onZoomTransitionDone()}},{key:"onLayoutDone",value:function(){this.isValidFunction(this.callbacks.onLayoutDone)&&this.callbacks.onLayoutDone()}},{key:"onLayoutStep",value:function(E){this.isValidFunction(this.callbacks.onLayoutStep)&&this.callbacks.onLayoutStep(E)}},{key:"onLayoutComputing",value:function(E){this.isValidFunction(this.callbacks.onLayoutComputing)&&this.callbacks.onLayoutComputing(E)}},{key:"onError",value:function(E){this.isValidFunction(this.callbacks.onError)&&this.callbacks.onError(E)}},{key:"onWebGLContextLost",value:function(E){this.isValidFunction(this.callbacks.onWebGLContextLost)&&this.callbacks.onWebGLContextLost(E)}},{key:"isValidFunction",value:function(E){return E!==void 0&&typeof E=="function"}}],O&&t(_.prototype,O),Object.defineProperty(_,"prototype",{writable:!1}),g}(),o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,_){g.__proto__=_}||function(g,_){for(var O in _)_.hasOwnProperty(O)&&(g[O]=_[O])};function s(g,_){function O(){this.constructor=g}o(g,_),g.prototype=_===null?Object.create(_):(O.prototype=_.prototype,new O)}var u=function(){function g(_){_===void 0&&(_="Atom@"+kn()),this.name=_,this.isPendingUnobservation=!0,this.observers=[],this.observersIndexes={},this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=zr.NOT_TRACKING}return g.prototype.onBecomeUnobserved=function(){},g.prototype.reportObserved=function(){ol(this)},g.prototype.reportChanged=function(){_s(),function(_){if(_.lowestObserverState!==zr.STALE){_.lowestObserverState=zr.STALE;for(var O=_.observers,E=O.length;E--;){var M=O[E];M.dependenciesState===zr.UP_TO_DATE&&(M.isTracing!==Uo.NONE&&oc(M,_),M.onBecomeStale()),M.dependenciesState=zr.STALE}}}(this),Xa()},g.prototype.toString=function(){return this.name},g}(),l=function(g){function _(O,E,M){O===void 0&&(O="Atom@"+kn()),E===void 0&&(E=Kr),M===void 0&&(M=Kr);var I=g.call(this,O)||this;return I.name=O,I.onBecomeObservedHandler=E,I.onBecomeUnobservedHandler=M,I.isPendingUnobservation=!1,I.isBeingTracked=!1,I}return s(_,g),_.prototype.reportObserved=function(){return _s(),g.prototype.reportObserved.call(this),this.isBeingTracked||(this.isBeingTracked=!0,this.onBecomeObservedHandler()),Xa(),!!qt.trackingDerivation},_.prototype.onBecomeUnobserved=function(){this.isBeingTracked=!1,this.onBecomeUnobservedHandler()},_}(u),c=Ya("Atom",u);function f(g){return g.interceptors&&g.interceptors.length>0}function h(g,_){var O=g.interceptors||(g.interceptors=[]);return O.push(_),qr(function(){var E=O.indexOf(_);E!==-1&&O.splice(E,1)})}function d(g,_){var O=ws();try{var E=g.interceptors;if(E)for(var M=0,I=E.length;M<I&&(pr(!(_=E[M](_))||_.type,"Intercept handlers should return nothing or a change object"),_);M++);return _}finally{Ka(O)}}function v(g){return g.changeListeners&&g.changeListeners.length>0}function y(g,_){var O=g.changeListeners||(g.changeListeners=[]);return O.push(_),qr(function(){var E=O.indexOf(_);E!==-1&&O.splice(E,1)})}function w(g,_){var O=ws(),E=g.changeListeners;if(E){for(var M=0,I=(E=E.slice()).length;M<I;M++)E[M](_);Ka(O)}}function b(){return!!qt.spyListeners.length}function p(g){if(qt.spyListeners.length)for(var _=qt.spyListeners,O=0,E=_.length;O<E;O++)_[O](g)}function m(g){p(Su({},g,{spyReportStart:!0}))}var x={spyReportEnd:!0};function T(g){p(g?Su({},g,x):x)}function P(g){return qt.spyListeners.push(g),qr(function(){var _=qt.spyListeners.indexOf(g);_!==-1&&qt.spyListeners.splice(_,1)})}var C="__$$iterating";function R(g){pr(g[C]!==!0,"Illegal state: cannot recycle array as iterator"),Tu(g,C,!0);var _=-1;return Tu(g,"next",function(){return{done:++_>=this.length,value:_<this.length?this[_]:void 0}}),g}function D(g,_){Tu(g,typeof Symbol=="function"&&Symbol.iterator||"@@iterator",_)}var N,j,B=function(){var g=!1,_={};return Object.defineProperty(_,"0",{set:function(){g=!0}}),Object.create(_)[0]=1,g===!1}(),z=0,W=function(){};N=W,j=Array.prototype,Object.setPrototypeOf!==void 0?Object.setPrototypeOf(N.prototype,j):N.prototype.__proto__!==void 0?N.prototype.__proto__=j:N.prototype=j,Object.isFrozen(Array)&&["constructor","push","shift","concat","pop","unshift","replace","find","findIndex","splice","reverse","sort"].forEach(function(g){Object.defineProperty(W.prototype,g,{configurable:!0,writable:!0,value:Array.prototype[g]})});var Z=function(){function g(_,O,E,M){this.array=E,this.owned=M,this.values=[],this.lastKnownLength=0,this.interceptors=null,this.changeListeners=null,this.atom=new u(_||"ObservableArray@"+kn()),this.enhancer=function(I,F){return O(I,F,_+"[..]")}}return g.prototype.dehanceValue=function(_){return this.dehancer!==void 0?this.dehancer(_):_},g.prototype.dehanceValues=function(_){return this.dehancer!==void 0?_.map(this.dehancer):_},g.prototype.intercept=function(_){return h(this,_)},g.prototype.observe=function(_,O){return O===void 0&&(O=!1),O&&_({object:this.array,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),y(this,_)},g.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},g.prototype.setArrayLength=function(_){if(typeof _!="number"||_<0)throw new Error("[mobx.array] Out of range: "+_);var O=this.values.length;if(_!==O)if(_>O){for(var E=new Array(_-O),M=0;M<_-O;M++)E[M]=void 0;this.spliceWithArray(O,0,E)}else this.spliceWithArray(_,O-_)},g.prototype.updateArrayLength=function(_,O){if(_!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed. Did you use peek() to change it?");this.lastKnownLength+=O,O>0&&_+O+1>z&&de(_+O+1)},g.prototype.spliceWithArray=function(_,O,E){var M=this;Dr(this.atom);var I=this.values.length;if(_===void 0?_=0:_>I?_=I:_<0&&(_=Math.max(0,I+_)),O=arguments.length===1?I-_:O==null?0:Math.max(0,Math.min(O,I-_)),E===void 0&&(E=[]),f(this)){var F=d(this,{object:this.array,type:"splice",index:_,removedCount:O,added:E});if(!F)return Wa;O=F.removedCount,E=F.added}var q=(E=E.map(function(Y){return M.enhancer(Y,void 0)})).length-O;this.updateArrayLength(I,q);var G=this.spliceItemsIntoValues(_,O,E);return O===0&&E.length===0||this.notifyArraySplice(_,E,G),this.dehanceValues(G)},g.prototype.spliceItemsIntoValues=function(_,O,E){if(E.length<1e4)return(M=this.values).splice.apply(M,[_,O].concat(E));var M,I=this.values.slice(_,_+O);return this.values=this.values.slice(0,_).concat(E,this.values.slice(_+O)),I},g.prototype.notifyArrayChildUpdate=function(_,O,E){var M=!this.owned&&b(),I=v(this),F=I||M?{object:this.array,type:"update",index:_,newValue:O,oldValue:E}:null;M&&m(F),this.atom.reportChanged(),I&&w(this,F),M&&T()},g.prototype.notifyArraySplice=function(_,O,E){var M=!this.owned&&b(),I=v(this),F=I||M?{object:this.array,type:"splice",index:_,removed:E,added:O,removedCount:E.length,addedCount:O.length}:null;M&&m(F),this.atom.reportChanged(),I&&w(this,F),M&&T()},g}(),Q=function(g){function _(O,E,M,I){M===void 0&&(M="ObservableArray@"+kn()),I===void 0&&(I=!1);var F=g.call(this)||this,q=new Z(M,E,F,I);return Tu(F,"$mobx",q),O&&O.length&&F.spliceWithArray(0,0,O),B&&Object.defineProperty(q.array,"0",re),F}return s(_,g),_.prototype.intercept=function(O){return this.$mobx.intercept(O)},_.prototype.observe=function(O,E){return E===void 0&&(E=!1),this.$mobx.observe(O,E)},_.prototype.clear=function(){return this.splice(0)},_.prototype.concat=function(){for(var O=[],E=0;E<arguments.length;E++)O[E]=arguments[E];return this.$mobx.atom.reportObserved(),Array.prototype.concat.apply(this.peek(),O.map(function(M){return me(M)?M.peek():M}))},_.prototype.replace=function(O){return this.$mobx.spliceWithArray(0,this.$mobx.values.length,O)},_.prototype.toJS=function(){return this.slice()},_.prototype.toJSON=function(){return this.toJS()},_.prototype.peek=function(){return this.$mobx.atom.reportObserved(),this.$mobx.dehanceValues(this.$mobx.values)},_.prototype.find=function(O,E,M){M===void 0&&(M=0);var I=this.findIndex.apply(this,arguments);return I===-1?void 0:this.get(I)},_.prototype.findIndex=function(O,E,M){M===void 0&&(M=0);for(var I=this.peek(),F=I.length,q=M;q<F;q++)if(O.call(E,I[q],q,this))return q;return-1},_.prototype.splice=function(O,E){for(var M=[],I=2;I<arguments.length;I++)M[I-2]=arguments[I];switch(arguments.length){case 0:return[];case 1:return this.$mobx.spliceWithArray(O);case 2:return this.$mobx.spliceWithArray(O,E)}return this.$mobx.spliceWithArray(O,E,M)},_.prototype.spliceWithArray=function(O,E,M){return this.$mobx.spliceWithArray(O,E,M)},_.prototype.push=function(){for(var O=[],E=0;E<arguments.length;E++)O[E]=arguments[E];var M=this.$mobx;return M.spliceWithArray(M.values.length,0,O),M.values.length},_.prototype.pop=function(){return this.splice(Math.max(this.$mobx.values.length-1,0),1)[0]},_.prototype.shift=function(){return this.splice(0,1)[0]},_.prototype.unshift=function(){for(var O=[],E=0;E<arguments.length;E++)O[E]=arguments[E];var M=this.$mobx;return M.spliceWithArray(0,0,O),M.values.length},_.prototype.reverse=function(){var O=this.slice();return O.reverse.apply(O,arguments)},_.prototype.sort=function(O){var E=this.slice();return E.sort.apply(E,arguments)},_.prototype.remove=function(O){var E=this.$mobx.dehanceValues(this.$mobx.values).indexOf(O);return E>-1&&(this.splice(E,1),!0)},_.prototype.move=function(O,E){function M(q){if(q<0)throw new Error("[mobx.array] Index out of bounds: "+q+" is negative");var G=this.$mobx.values.length;if(q>=G)throw new Error("[mobx.array] Index out of bounds: "+q+" is not smaller than "+G)}if(M.call(this,O),M.call(this,E),O!==E){var I,F=this.$mobx.values;I=O<E?F.slice(0,O).concat(F.slice(O+1,E+1),[F[O]],F.slice(E+1)):F.slice(0,E).concat([F[O]],F.slice(E,O),F.slice(O+1)),this.replace(I)}},_.prototype.get=function(O){var E=this.$mobx;if(E){if(O<E.values.length)return E.atom.reportObserved(),E.dehanceValue(E.values[O]);console.warn("[mobx.array] Attempt to read an array index ("+O+") that is out of bounds ("+E.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},_.prototype.set=function(O,E){var M=this.$mobx,I=M.values;if(O<I.length){Dr(M.atom);var F=I[O];if(f(M)){var q=d(M,{type:"update",object:this,index:O,newValue:E});if(!q)return;E=q.newValue}(E=M.enhancer(E,F))!==F&&(I[O]=E,M.notifyArrayChildUpdate(O,E,F))}else{if(O!==I.length)throw new Error("[mobx.array] Index out of bounds, "+O+" is larger than "+I.length);M.spliceWithArray(O,0,[E])}},_}(W);D(Q.prototype,function(){return R(this.slice())}),Object.defineProperty(Q.prototype,"length",{enumerable:!1,configurable:!0,get:function(){return this.$mobx.getArrayLength()},set:function(g){this.$mobx.setArrayLength(g)}}),["every","filter","forEach","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toString","toLocaleString"].forEach(function(g){var _=Array.prototype[g];pr(typeof _=="function","Base function not defined on Array prototype: '"+g+"'"),Yi(Q.prototype,g,function(){return _.apply(this.peek(),arguments)})}),function(g,_){for(var O=0;O<_.length;O++)Yi(g,_[O],g[_[O]])}(Q.prototype,["constructor","intercept","observe","clear","concat","get","replace","toJS","toJSON","peek","find","findIndex","splice","spliceWithArray","push","pop","set","shift","unshift","reverse","sort","remove","move","toString","toLocaleString"]);var re=ee(0);function ee(g){return{enumerable:!1,configurable:!1,get:function(){return this.get(g)},set:function(_){this.set(g,_)}}}function ue(g){Object.defineProperty(Q.prototype,""+g,ee(g))}function de(g){for(var _=z;_<g;_++)ue(_);z=g}de(1e3);var se=Ya("ObservableArrayAdministration",Z);function me(g){return eo(g)&&se(g.$mobx)}var Me={},he=function(g){function _(O,E,M,I){M===void 0&&(M="ObservableValue@"+kn()),I===void 0&&(I=!0);var F=g.call(this,M)||this;return F.enhancer=E,F.hasUnreportedChange=!1,F.dehancer=void 0,F.value=E(O,void 0,M),I&&b()&&p({type:"create",object:F,newValue:F.value}),F}return s(_,g),_.prototype.dehanceValue=function(O){return this.dehancer!==void 0?this.dehancer(O):O},_.prototype.set=function(O){var E=this.value;if((O=this.prepareNewValue(O))!==Me){var M=b();M&&m({type:"update",object:this,newValue:O,oldValue:E}),this.setNewValue(O),M&&T()}},_.prototype.prepareNewValue=function(O){if(Dr(this),f(this)){var E=d(this,{object:this,type:"update",newValue:O});if(!E)return Me;O=E.newValue}return O=this.enhancer(O,this.value,this.name),this.value!==O?O:Me},_.prototype.setNewValue=function(O){var E=this.value;this.value=O,this.reportChanged(),v(this)&&w(this,{type:"update",object:this,newValue:O,oldValue:E})},_.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},_.prototype.intercept=function(O){return h(this,O)},_.prototype.observe=function(O,E){return E&&O({object:this,type:"update",newValue:this.value,oldValue:void 0}),y(this,O)},_.prototype.toJSON=function(){return this.get()},_.prototype.toString=function(){return this.name+"["+this.value+"]"},_.prototype.valueOf=function(){return tc(this.get())},_}(u);he.prototype[ec()]=he.prototype.valueOf;var fe=Ya("ObservableValue",he),Ee={m001:"It is not allowed to assign new values to @action fields",m002:"`runInAction` expects a function",m003:"`runInAction` expects a function without arguments",m004:"autorun expects a function",m005:"Warning: attempted to pass an action to autorun. Actions are untracked and will not trigger on state changes. Use `reaction` or wrap only your state modification code in an action.",m006:"Warning: attempted to pass an action to autorunAsync. Actions are untracked and will not trigger on state changes. Use `reaction` or wrap only your state modification code in an action.",m007:"reaction only accepts 2 or 3 arguments. If migrating from MobX 2, please provide an options object",m008:"wrapping reaction expression in `asReference` is no longer supported, use options object instead",m009:"@computed can only be used on getter functions, like: '@computed get myProps() { return ...; }'. It looks like it was used on a property.",m010:"@computed can only be used on getter functions, like: '@computed get myProps() { return ...; }'",m011:"First argument to `computed` should be an expression. If using computed as decorator, don't pass it arguments",m012:"computed takes one or two arguments if used as function",m013:"[mobx.expr] 'expr' should only be used inside other reactive functions.",m014:"extendObservable expected 2 or more arguments",m015:"extendObservable expects an object as first argument",m016:"extendObservable should not be used on maps, use map.merge instead",m017:"all arguments of extendObservable should be objects",m018:"extending an object with another observable (object) is not supported. Please construct an explicit propertymap, using `toJS` if need. See issue #540",m019:"[mobx.isObservable] isObservable(object, propertyName) is not supported for arrays and maps. Use map.has or array.length instead.",m020:"modifiers can only be used for individual object properties",m021:"observable expects zero or one arguments",m022:"@observable can not be used on getters, use @computed instead",m024:"whyRun() can only be used if a derivation is active, or by passing an computed value / reaction explicitly. If you invoked whyRun from inside a computation; the computation is currently suspended but re-evaluating because somebody requested its value.",m025:"whyRun can only be used on reactions and computed values",m026:"`action` can only be invoked on functions",m028:"It is not allowed to set `useStrict` when a derivation is running",m029:"INTERNAL ERROR only onBecomeUnobserved shouldn't be called twice in a row",m030a:"Since strict-mode is enabled, changing observed observable values outside actions is not allowed. Please wrap the code in an `action` if this change is intended. Tried to modify: ",m030b:"Side effects like changing state are not allowed at this point. Are you trying to modify state from, for example, the render function of a React component? Tried to modify: ",m031:"Computed values are not allowed to cause side effects by changing observables that are already being observed. Tried to modify: ",m032:`* This computation is suspended (not in use by any reaction) and won't run automatically.
	Didn't expect this computation to be suspended at this point?
	  1. Make sure this computation is used by a reaction (reaction, autorun, observer).
	  2. Check whether you are using this computation synchronously (in the same stack as they reaction that needs it).`,m033:"`observe` doesn't support the fire immediately property for observable maps.",m034:"`mobx.map` is deprecated, use `new ObservableMap` or `mobx.observable.map` instead",m035:"Cannot make the designated object observable; it is not extensible",m036:"It is not possible to get index atoms from arrays",m037:`Hi there! I'm sorry you have just run into an exception.
If your debugger ends up here, know that some reaction (like the render() of an observer component, autorun or reaction)
threw an exception and that mobx caught it, to avoid that it brings the rest of your application down.
The original cause of the exception (the code that caused this reaction to run (again)), is still in the stack.

However, more interesting is the actual stack trace of the error itself.
Hopefully the error is an instanceof Error, because in that case you can inspect the original stack of the error from where it was thrown.
See \`error.stack\` property, or press the very subtle "(...)" link you see near the console.error message that probably brought you here.
That stack is more interesting than the stack of this console.error itself.

If the exception you see is an exception you created yourself, make sure to use \`throw new Error("Oops")\` instead of \`throw "Oops"\`,
because the javascript environment will only preserve the original stack trace in the first form.

You can also make sure the debugger pauses the next time this very same exception is thrown by enabling "Pause on caught exception".
(Note that it might pause on many other, unrelated exception as well).

If that all doesn't help you out, feel free to open an issue https://github.com/mobxjs/mobx/issues!
`,m038:`Missing items in this list?
    1. Check whether all used values are properly marked as observable (use isObservable to verify)
    2. Make sure you didn't dereference values too early. MobX observes props, not primitives. E.g: use 'person.name' instead of 'name' in your computation.
`};function Ce(g){return Ee[g]}function ke(g,_){pr(typeof _=="function",Ce("m026")),pr(typeof g=="string"&&g.length>0,"actions should have valid names, got: '"+g+"'");var O=function(){return Re(g,_,this,arguments)};return O.originalFn=_,O.isMobxAction=!0,O}function Re(g,_,O,E){var M=function(I,F,q,G){var Y=b()&&!!I,X=0;if(Y){X=Date.now();var J=G&&G.length||0,ie=new Array(J);if(J>0)for(var ce=0;ce<J;ce++)ie[ce]=G[ce];m({type:"action",name:I,fn:F,object:q,arguments:ie})}var ge=ws();return _s(),{prevDerivation:ge,prevAllowStateChanges:we(!0),notifySpy:Y,startTime:X}}(g,_,O,E);try{return _.apply(O,E)}finally{(function(I){Oe(I.prevAllowStateChanges),Xa(),Ka(I.prevDerivation),I.notifySpy&&T({time:Date.now()-I.startTime})})(M)}}function ve(g){pr(qt.trackingDerivation===null,Ce("m028")),qt.strictMode=g,qt.allowStateChanges=!g}function we(g){var _=qt.allowStateChanges;return qt.allowStateChanges=g,_}function Oe(g){qt.allowStateChanges=g}function Be(g,_,O,E,M){function I(F,q,G,Y,X){if(X===void 0&&(X=0),pr(M||Ct(arguments),"This function is a decorator, but it wasn't invoked like a decorator"),G){Ai(F,"__mobxLazyInitializers")||Yi(F,"__mobxLazyInitializers",F.__mobxLazyInitializers&&F.__mobxLazyInitializers.slice()||[]);var J=G.value,ie=G.initializer;return F.__mobxLazyInitializers.push(function(ge){g(ge,q,ie?ie.call(ge):J,Y,G)}),{enumerable:E,configurable:!0,get:function(){return this.__mobxDidRunLazyInitializers!==!0&&ht(this),_.call(this,q)},set:function(ge){this.__mobxDidRunLazyInitializers!==!0&&ht(this),O.call(this,q,ge)}}}var ce={enumerable:E,configurable:!0,get:function(){return this.__mobxInitializedProps&&this.__mobxInitializedProps[q]===!0||Ye(this,q,void 0,g,Y,G),_.call(this,q)},set:function(ge){this.__mobxInitializedProps&&this.__mobxInitializedProps[q]===!0?O.call(this,q,ge):Ye(this,q,ge,g,Y,G)}};return(arguments.length<3||arguments.length===5&&X<3)&&Object.defineProperty(F,q,ce),ce}return M?function(){if(Ct(arguments))return I.apply(null,arguments);var F=arguments,q=arguments.length;return function(G,Y,X){return I(G,Y,X,F,q)}}:I}function Ye(g,_,O,E,M,I){Ai(g,"__mobxInitializedProps")||Yi(g,"__mobxInitializedProps",{}),g.__mobxInitializedProps[_]=!0,E(g,_,O,M,I)}function ht(g){g.__mobxDidRunLazyInitializers!==!0&&g.__mobxLazyInitializers&&(Yi(g,"__mobxDidRunLazyInitializers",!0),g.__mobxDidRunLazyInitializers&&g.__mobxLazyInitializers.forEach(function(_){return _(g)}))}function Ct(g){return(g.length===2||g.length===3)&&typeof g[1]=="string"}var ct=Be(function(g,_,O,E,M){var I=E&&E.length===1?E[0]:O.name||_||"<unnamed action>";Yi(g,_,$(I,O))},function(g){return this[g]},function(){pr(!1,Ce("m001"))},!1,!0),H=Be(function(g,_,O){Le(g,_,O)},function(g){return this[g]},function(){pr(!1,Ce("m001"))},!1,!1),$=function(g,_,O,E){return arguments.length===1&&typeof g=="function"?ke(g.name||"<unnamed action>",g):arguments.length===2&&typeof _=="function"?ke(g,_):arguments.length===1&&typeof g=="string"?ne(g):ne(_).apply(null,arguments)};function ne(g){return function(_,O,E){if(E&&typeof E.value=="function")return E.value=ke(g,E.value),E.enumerable=!1,E.configurable=!0,E;if(E!==void 0&&E.get!==void 0)throw new Error("[mobx] action is not expected to be used with getters");return ct(g).apply(this,arguments)}}function Ie(g){return typeof g=="function"&&g.isMobxAction===!0}function Le(g,_,O){var E=function(){return Re(_,O,g,arguments)};E.isMobxAction=!0,Yi(g,_,E)}$.bound=function(g,_,O){if(typeof g=="function"){var E=ke("<not yet bound action>",g);return E.autoBind=!0,E}return H.apply(null,arguments)};var ze=Object.prototype.toString;function Je(g,_){return Pt(g,_)}function Pt(g,_,O,E){if(g===_)return g!==0||1/g==1/_;if(g==null||_==null)return!1;if(g!=g)return _!=_;var M=typeof g;return(M==="function"||M==="object"||typeof _=="object")&&function(I,F,q,G){I=Lt(I),F=Lt(F);var Y=ze.call(I);if(Y!==ze.call(F))return!1;switch(Y){case"[object RegExp]":case"[object String]":return""+I==""+F;case"[object Number]":return+I!=+I?+F!=+F:+I==0?1/+I==1/F:+I==+F;case"[object Date]":case"[object Boolean]":return+I==+F;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(I)===Symbol.valueOf.call(F)}var X=Y==="[object Array]";if(!X){if(typeof I!="object"||typeof F!="object")return!1;var J=I.constructor,ie=F.constructor;if(J!==ie&&!(typeof J=="function"&&J instanceof J&&typeof ie=="function"&&ie instanceof ie)&&"constructor"in I&&"constructor"in F)return!1}G=G||[];for(var ce=(q=q||[]).length;ce--;)if(q[ce]===I)return G[ce]===F;if(q.push(I),G.push(F),X){if((ce=I.length)!==F.length)return!1;for(;ce--;)if(!Pt(I[ce],F[ce],q,G))return!1}else{var ge,le=Object.keys(I);if(ce=le.length,Object.keys(F).length!==ce)return!1;for(;ce--;)if(!Wt(F,ge=le[ce])||!Pt(I[ge],F[ge],q,G))return!1}return q.pop(),G.pop(),!0}(g,_,O,E)}function Lt(g){return me(g)?g.peek():Hi(g)?g.entries():Ys(g)?function(_){for(var O=[];;){var E=_.next();if(E.done)break;O.push(E.value)}return O}(g.entries()):g}function Wt(g,_){return Object.prototype.hasOwnProperty.call(g,_)}function Bt(g,_){return g===_}var er={identity:Bt,structural:function(g,_){return Je(g,_)},default:function(g,_){return function(O,E){return typeof O=="number"&&typeof E=="number"&&isNaN(O)&&isNaN(E)}(g,_)||Bt(g,_)}};function Ar(g,_,O){var E,M,I;typeof g=="string"?(E=g,M=_,I=O):(E=g.name||"Autorun@"+kn(),M=g,I=_),pr(typeof M=="function",Ce("m004")),pr(Ie(M)===!1,Ce("m005")),I&&(M=M.bind(I));var F=new Gn(E,function(){this.track(q)});function q(){M(F)}return F.schedule(),F.getDisposer()}function Yt(g,_,O){var E;arguments.length>3&&ui(Ce("m007")),Ni(g)&&ui(Ce("m008")),(E=typeof O=="object"?O:{}).name=E.name||g.name||_.name||"Reaction@"+kn(),E.fireImmediately=O===!0||E.fireImmediately===!0,E.delay=E.delay||0,E.compareStructural=E.compareStructural||E.struct||!1,_=$(E.name,E.context?_.bind(E.context):_),E.context&&(g=g.bind(E.context));var M,I=!0,F=!1,q=E.equals?E.equals:E.compareStructural||E.struct?er.structural:er.default,G=new Gn(E.name,function(){I||E.delay<1?Y():F||(F=!0,setTimeout(function(){F=!1,Y()},E.delay))});function Y(){if(!G.isDisposed){var X=!1;G.track(function(){var J=g(G);X=I||!q(M,J),M=J}),I&&E.fireImmediately&&_(M,G),I||X!==!0||_(M,G),I&&(I=!1)}}return G.schedule(),G.getDisposer()}var dt=function(){function g(_,O,E,M,I){this.derivation=_,this.scope=O,this.equals=E,this.dependenciesState=zr.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isPendingUnobservation=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=zr.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+kn(),this.value=new al(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=Uo.NONE,this.name=M||"ComputedValue@"+kn(),I&&(this.setter=ke(M+"-setter",I))}return g.prototype.onBecomeStale=function(){(function(_){if(_.lowestObserverState===zr.UP_TO_DATE){_.lowestObserverState=zr.POSSIBLY_STALE;for(var O=_.observers,E=O.length;E--;){var M=O[E];M.dependenciesState===zr.UP_TO_DATE&&(M.dependenciesState=zr.POSSIBLY_STALE,M.isTracing!==Uo.NONE&&oc(M,_),M.onBecomeStale())}}})(this)},g.prototype.onBecomeUnobserved=function(){Zs(this),this.value=void 0},g.prototype.get=function(){pr(!this.isComputing,"Cycle detected in computation "+this.name,this.derivation),qt.inBatch===0?(_s(),sl(this)&&(this.isTracing!==Uo.NONE&&""+this.name,this.value=this.computeValue(!1)),Xa()):(ol(this),sl(this)&&this.trackAndCompute()&&function(O){if(O.lowestObserverState!==zr.STALE){O.lowestObserverState=zr.STALE;for(var E=O.observers,M=E.length;M--;){var I=E[M];I.dependenciesState===zr.POSSIBLY_STALE?I.dependenciesState=zr.STALE:I.dependenciesState===zr.UP_TO_DATE&&(O.lowestObserverState=zr.UP_TO_DATE)}}}(this));var _=this.value;if($s(_))throw _.cause;return _},g.prototype.peek=function(){var _=this.computeValue(!1);if($s(_))throw _.cause;return _},g.prototype.set=function(_){if(this.setter){pr(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,_)}finally{this.isRunningSetter=!1}}else pr(!1,"[ComputedValue '"+this.name+"'] It is not possible to assign a new value to a computed value.")},g.prototype.trackAndCompute=function(){b()&&p({object:this.scope,type:"compute",fn:this.derivation});var _=this.value,O=this.dependenciesState===zr.NOT_TRACKING,E=this.value=this.computeValue(!0);return O||$s(_)||$s(E)||!this.equals(_,E)},g.prototype.computeValue=function(_){var O;if(this.isComputing=!0,qt.computationDepth++,_)O=sc(this,this.derivation,this.scope);else try{O=this.derivation.call(this.scope)}catch(E){O=new al(E)}return qt.computationDepth--,this.isComputing=!1,O},g.prototype.observe=function(_,O){var E=this,M=!0,I=void 0;return Ar(function(){var F=E.get();if(!M||O){var q=ws();_({type:"update",object:E,newValue:F,oldValue:I}),Ka(q)}M=!1,I=F})},g.prototype.toJSON=function(){return this.get()},g.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},g.prototype.valueOf=function(){return tc(this.get())},g.prototype.whyRun=function(){var _=!!qt.trackingDerivation,O=Ha(this.isComputing?this.newObserving:this.observing).map(function(M){return M.name}),E=Ha(ah(this).map(function(M){return M.name}));return`
WhyRun? computation '`+this.name+`':
 * Running because: `+(_?"[active] the value of this computation is needed by a reaction":this.isComputing?"[get] The value of this computed was requested outside a reaction":"[idle] not running at the moment")+`
`+(this.dependenciesState===zr.NOT_TRACKING?Ce("m032"):` * This computation will re-run if any of the following observables changes:
    `+Hs(O)+`
    `+(this.isComputing&&_?" (... or any observable accessed during the remainder of the current run)":"")+`
    `+Ce("m038")+`

  * If the outcome of this computation changes, the following observers will be re-run:
    `+Hs(E)+`
`)},g}();dt.prototype[ec()]=dt.prototype.valueOf;var be=Ya("ComputedValue",dt),it=function(){function g(_,O){this.target=_,this.name=O,this.values={},this.changeListeners=null,this.interceptors=null}return g.prototype.observe=function(_,O){return pr(O!==!0,"`observe` doesn't support the fire immediately property for observable objects."),y(this,_)},g.prototype.intercept=function(_){return h(this,_)},g}();function st(g,_){if(nr(g)&&g.hasOwnProperty("$mobx"))return g.$mobx;pr(Object.isExtensible(g),Ce("m035")),ia(g)||(_=(g.constructor.name||"ObservableObject")+"@"+kn()),_||(_="ObservableObject@"+kn());var O=new it(g,_);return Tu(g,"$mobx",O),O}function ut(g,_,O,E){if(g.values[_]&&!be(g.values[_]))return pr("value"in O,"The property "+_+" in "+g.name+" is already observable, cannot redefine it as computed property"),void(g.target[_]=O.value);if("value"in O)if(Ni(O.value)){var M=O.value;lt(g,_,M.initialValue,M.enhancer)}else Ie(O.value)&&O.value.autoBind===!0?Le(g.target,_,O.value.originalFn):be(O.value)?function(I,F,q){var G=I.name+"."+F;q.name=G,q.scope||(q.scope=I.target),I.values[F]=q,Object.defineProperty(I.target,F,mr(F))}(g,_,O.value):lt(g,_,O.value,E);else Xt(g,_,O.get,O.set,er.default,!0)}function lt(g,_,O,E){if(ji(g.target,_),f(g)){var M=d(g,{object:g.target,name:_,type:"add",newValue:O});if(!M)return;O=M.newValue}O=(g.values[_]=new he(O,E,g.name+"."+_,!1)).value,Object.defineProperty(g.target,_,function(I){return pt[I]||(pt[I]={configurable:!0,enumerable:!0,get:function(){return this.$mobx.values[I].get()},set:function(F){Rr(this,I,F)}})}(_)),function(I,F,q,G){var Y=v(I),X=b(),J=Y||X?{type:"add",object:F,name:q,newValue:G}:null;X&&m(J),Y&&w(I,J),X&&T()}(g,g.target,_,O)}function Xt(g,_,O,E,M,I){I&&ji(g.target,_),g.values[_]=new dt(O,g.target,M,g.name+"."+_,E),I&&Object.defineProperty(g.target,_,mr(_))}var pt={},Qt={};function mr(g){return Qt[g]||(Qt[g]={configurable:!0,enumerable:!1,get:function(){return this.$mobx.values[g].get()},set:function(_){return this.$mobx.values[g].set(_)}})}function Rr(g,_,O){var E=g.$mobx,M=E.values[_];if(f(E)){if(!(q=d(E,{type:"update",object:g,name:_,newValue:O})))return;O=q.newValue}if((O=M.prepareNewValue(O))!==Me){var I=v(E),F=b(),q=I||F?{type:"update",object:g,oldValue:M.value,name:_,newValue:O}:null;F&&m(q),M.setNewValue(O),I&&w(E,q),F&&T()}}var ar=Ya("ObservableObjectAdministration",it);function nr(g){return!!eo(g)&&(ht(g),ar(g.$mobx))}function tr(g,_){if(g==null)return!1;if(_!==void 0){if(me(g)||Hi(g))throw new Error(Ce("m019"));if(nr(g)){var O=g.$mobx;return O.values&&!!O.values[_]}return!1}return nr(g)||!!g.$mobx||c(g)||$n(g)||be(g)}function lr(g){return pr(!!g,":("),Be(function(_,O,E,M,I){ji(_,O),pr(!I||!I.get,Ce("m022")),lt(st(_,void 0),O,E,g)},function(_){var O=this.$mobx.values[_];if(O!==void 0)return O.get()},function(_,O){Rr(this,_,O)},!0,!1)}function Vr(g){for(var _=[],O=1;O<arguments.length;O++)_[O-1]=arguments[O];return In(g,Pi,_)}function fn(g){for(var _=[],O=1;O<arguments.length;O++)_[O-1]=arguments[O];return In(g,un,_)}function In(g,_,O){pr(arguments.length>=2,Ce("m014")),pr(typeof g=="object",Ce("m015")),pr(!Hi(g),Ce("m016")),O.forEach(function(G){pr(typeof G=="object",Ce("m017")),pr(!tr(G),Ce("m018"))});for(var E=st(g),M={},I=O.length-1;I>=0;I--){var F=O[I];for(var q in F)if(M[q]!==!0&&Ai(F,q)){if(M[q]=!0,g===F&&!rl(g,q))continue;ut(E,q,Object.getOwnPropertyDescriptor(F,q),_)}}return g}var Un=lr(Pi),hn=lr(vi),Kn=lr(un),vn=lr(zn),Ei=lr(Ta),Li={box:function(g,_){return arguments.length>2&&Tn("box"),new he(g,Pi,_)},shallowBox:function(g,_){return arguments.length>2&&Tn("shallowBox"),new he(g,un,_)},array:function(g,_){return arguments.length>2&&Tn("array"),new Q(g,Pi,_)},shallowArray:function(g,_){return arguments.length>2&&Tn("shallowArray"),new Q(g,un,_)},map:function(g,_){return arguments.length>2&&Tn("map"),new Ca(g,Pi,_)},shallowMap:function(g,_){return arguments.length>2&&Tn("shallowMap"),new Ca(g,un,_)},object:function(g,_){arguments.length>2&&Tn("object");var O={};return st(O,_),Vr(O,g),O},shallowObject:function(g,_){arguments.length>2&&Tn("shallowObject");var O={};return st(O,_),fn(O,g),O},ref:function(){return arguments.length<2?_o(un,arguments[0]):Kn.apply(null,arguments)},shallow:function(){return arguments.length<2?_o(vi,arguments[0]):hn.apply(null,arguments)},deep:function(){return arguments.length<2?_o(Pi,arguments[0]):Un.apply(null,arguments)},struct:function(){return arguments.length<2?_o(zn,arguments[0]):vn.apply(null,arguments)}},Br=function(g){if(g===void 0&&(g=void 0),typeof arguments[1]=="string")return Un.apply(null,arguments);if(pr(arguments.length<=1,Ce("m021")),pr(!Ni(g),Ce("m020")),tr(g))return g;var _=Pi(g,0,void 0);return _!==g?_:Br.box(g)};function Tn(g){ui("Expected one or two arguments to observable."+g+". Did you accidentally try to use observable."+g+" as decorator?")}function Ni(g){return typeof g=="object"&&g!==null&&g.isMobxModifierDescriptor===!0}function _o(g,_){return pr(!Ni(_),"Modifiers cannot be nested"),{isMobxModifierDescriptor:!0,initialValue:_,enhancer:g}}function Pi(g,_,O){return Ni(g)&&ui("You tried to assign a modifier wrapped value to a collection, please define modifiers when creating the collection, not when modifying it"),tr(g)?g:Array.isArray(g)?Br.array(g,O):ia(g)?Br.object(g,O):Ys(g)?Br.map(g,O):g}function vi(g,_,O){return Ni(g)&&ui("You tried to assign a modifier wrapped value to a collection, please define modifiers when creating the collection, not when modifying it"),g==null||nr(g)||me(g)||Hi(g)?g:Array.isArray(g)?Br.shallowArray(g,O):ia(g)?Br.shallowObject(g,O):Ys(g)?Br.shallowMap(g,O):ui("The shallow modifier / decorator can only used in combination with arrays, objects and maps")}function un(g){return g}function zn(g,_,O){if(Je(g,_))return _;if(tr(g))return g;if(Array.isArray(g))return new Q(g,zn,O);if(Ys(g))return new Ca(g,zn,O);if(ia(g)){var E={};return st(E,O),In(E,zn,[g]),E}return g}function Ta(g,_,O){return Je(g,_)?_:g}function pi(g,_){_===void 0&&(_=void 0),_s();try{return g.apply(_)}finally{Xa()}}Object.keys(Li).forEach(function(g){return Br[g]=Li[g]}),Br.deep.struct=Br.struct,Br.ref.struct=function(){return arguments.length<2?_o(Ta,arguments[0]):Ei.apply(null,arguments)};var Ou={},Ca=function(){function g(_,O,E){O===void 0&&(O=Pi),E===void 0&&(E="ObservableMap@"+kn()),this.enhancer=O,this.name=E,this.$mobx=Ou,this._data=Object.create(null),this._hasMap=Object.create(null),this._keys=new Q(void 0,un,this.name+".keys()",!0),this.interceptors=null,this.changeListeners=null,this.dehancer=void 0,this.merge(_)}return g.prototype._has=function(_){return this._data[_]!==void 0},g.prototype.has=function(_){return!!this.isValidKey(_)&&(_=""+_,this._hasMap[_]?this._hasMap[_].get():this._updateHasMapEntry(_,!1).get())},g.prototype.set=function(_,O){this.assertValidKey(_),_=""+_;var E=this._has(_);if(f(this)){var M=d(this,{type:E?"update":"add",object:this,newValue:O,name:_});if(!M)return this;O=M.newValue}return E?this._updateValue(_,O):this._addValue(_,O),this},g.prototype.delete=function(_){var O=this;if(this.assertValidKey(_),_=""+_,f(this)&&!(I=d(this,{type:"delete",object:this,name:_})))return!1;if(this._has(_)){var E=b(),M=v(this),I=M||E?{type:"delete",object:this,oldValue:this._data[_].value,name:_}:null;return E&&m(I),pi(function(){O._keys.remove(_),O._updateHasMapEntry(_,!1),O._data[_].setNewValue(void 0),O._data[_]=void 0}),M&&w(this,I),E&&T(),!0}return!1},g.prototype._updateHasMapEntry=function(_,O){var E=this._hasMap[_];return E?E.setNewValue(O):E=this._hasMap[_]=new he(O,un,this.name+"."+_+"?",!1),E},g.prototype._updateValue=function(_,O){var E=this._data[_];if((O=E.prepareNewValue(O))!==Me){var M=b(),I=v(this),F=I||M?{type:"update",object:this,oldValue:E.value,name:_,newValue:O}:null;M&&m(F),E.setNewValue(O),I&&w(this,F),M&&T()}},g.prototype._addValue=function(_,O){var E=this;pi(function(){var q=E._data[_]=new he(O,E.enhancer,E.name+"."+_,!1);O=q.value,E._updateHasMapEntry(_,!0),E._keys.push(_)});var M=b(),I=v(this),F=I||M?{type:"add",object:this,name:_,newValue:O}:null;M&&m(F),I&&w(this,F),M&&T()},g.prototype.get=function(_){return _=""+_,this.has(_)?this.dehanceValue(this._data[_].get()):this.dehanceValue(void 0)},g.prototype.dehanceValue=function(_){return this.dehancer!==void 0?this.dehancer(_):_},g.prototype.keys=function(){return R(this._keys.slice())},g.prototype.values=function(){return R(this._keys.map(this.get,this))},g.prototype.entries=function(){var _=this;return R(this._keys.map(function(O){return[O,_.get(O)]}))},g.prototype.forEach=function(_,O){var E=this;this.keys().forEach(function(M){return _.call(O,E.get(M),M,E)})},g.prototype.merge=function(_){var O=this;return Hi(_)&&(_=_.toJS()),pi(function(){ia(_)?Object.keys(_).forEach(function(E){return O.set(E,_[E])}):Array.isArray(_)?_.forEach(function(E){var M=E[0],I=E[1];return O.set(M,I)}):Ys(_)?_.forEach(function(E,M){return O.set(M,E)}):_!=null&&ui("Cannot initialize map from "+_)}),this},g.prototype.clear=function(){var _=this;pi(function(){Jc(function(){_.keys().forEach(_.delete,_)})})},g.prototype.replace=function(_){var O=this;return pi(function(){var E,M=ia(E=_)?Object.keys(E):Array.isArray(E)?E.map(function(I){return I[0]}):Ys(E)?Array.from(E.keys()):Hi(E)?E.keys():ui("Cannot get keys from "+E);O.keys().filter(function(I){return M.indexOf(I)===-1}).forEach(function(I){return O.delete(I)}),O.merge(_)}),this},Object.defineProperty(g.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),g.prototype.toJS=function(){var _=this,O={};return this.keys().forEach(function(E){return O[E]=_.get(E)}),O},g.prototype.toJSON=function(){return this.toJS()},g.prototype.isValidKey=function(_){return _!=null&&(typeof _=="string"||typeof _=="number"||typeof _=="boolean")},g.prototype.assertValidKey=function(_){if(!this.isValidKey(_))throw new Error("[mobx.map] Invalid key: '"+_+"', only strings, numbers and booleans are accepted as key in observable maps.")},g.prototype.toString=function(){var _=this;return this.name+"[{ "+this.keys().map(function(O){return O+": "+_.get(O)}).join(", ")+" }]"},g.prototype.observe=function(_,O){return pr(O!==!0,Ce("m033")),y(this,_)},g.prototype.intercept=function(_){return h(this,_)},g}();D(Ca.prototype,function(){return this.entries()});var Hi=Ya("ObservableMap",Ca),Wa=[];function na(){return typeof window<"u"?window:Mi.g}function kn(){return++qt.mobxGuid}function ui(g,_){throw pr(!1,g,_),"X"}function pr(g,_,O){if(!g)throw new Error("[mobx] Invariant failed: "+_+(O?" in '"+O+"'":""))}Object.freeze(Wa);var Pa=[];function lo(g){return Pa.indexOf(g)===-1&&(Pa.push(g),console.error("[mobx] Deprecated: "+g),!0)}function qr(g){var _=!1;return function(){if(!_)return _=!0,g.apply(this,arguments)}}var Kr=function(){};function Ha(g){var _=[];return g.forEach(function(O){_.indexOf(O)===-1&&_.push(O)}),_}function Hs(g,_,O){return _===void 0&&(_=100),O===void 0&&(O=" - "),g?g.slice(0,_).join(O)+(g.length>_?" (... and "+(g.length-_)+"more)":""):""}function eo(g){return g!==null&&typeof g=="object"}function ia(g){if(g===null||typeof g!="object")return!1;var _=Object.getPrototypeOf(g);return _===Object.prototype||_===null}function Su(){for(var g=arguments[0],_=1,O=arguments.length;_<O;_++){var E=arguments[_];for(var M in E)Ai(E,M)&&(g[M]=E[M])}return g}var Dn=Object.prototype.hasOwnProperty;function Ai(g,_){return Dn.call(g,_)}function Yi(g,_,O){Object.defineProperty(g,_,{enumerable:!1,writable:!0,configurable:!0,value:O})}function Tu(g,_,O){Object.defineProperty(g,_,{enumerable:!1,writable:!1,configurable:!0,value:O})}function rl(g,_){var O=Object.getOwnPropertyDescriptor(g,_);return!O||O.configurable!==!1&&O.writable!==!1}function ji(g,_){pr(rl(g,_),"Cannot make property '"+_+"' observable, it is not configurable and writable in the target object")}function Ya(g,_){var O="isMobX"+g;return _.prototype[O]=!0,function(E){return eo(E)&&E[O]===!0}}function Ys(g){return na().Map!==void 0&&g instanceof na().Map}function ec(){return typeof Symbol=="function"&&Symbol.toPrimitive||"@@toPrimitive"}function tc(g){return g===null?null:typeof g=="object"?""+g:g}var zr,Uo,co=["mobxGuid","resetId","spyListeners","strictMode","runId"],rc=function(){this.version=5,this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.strictMode=!1,this.resetId=0,this.spyListeners=[],this.globalReactionErrorHandlers=[]},qt=new rc,Xs=!1,nc=!1,Aa=!1,Cu=na();function wo(g,_){if(typeof g=="object"&&g!==null){if(me(g))return pr(_===void 0,Ce("m036")),g.$mobx.atom;if(Hi(g)){var O=g;return _===void 0?wo(O._keys):(pr(!!(E=O._data[_]||O._hasMap[_]),"the entry '"+_+"' does not exist in the observable map '"+oa(g)+"'"),E)}var E;if(ht(g),_&&!g.$mobx&&g[_],nr(g))return _?(pr(!!(E=g.$mobx.values[_]),"no observable property '"+_+"' found on the observable object '"+oa(g)+"'"),E):ui("please specify a property");if(c(g)||be(g)||$n(g))return g}else if(typeof g=="function"&&$n(g.$mobx))return g.$mobx;return ui("Cannot obtain atom from "+g)}function $r(g,_){return pr(g,"Expecting some object"),_!==void 0?$r(wo(g,_)):c(g)||be(g)||$n(g)||Hi(g)?g:(ht(g),g.$mobx?g.$mobx:void pr(!1,"Cannot obtain administration from "+g))}function oa(g,_){return(_!==void 0?wo(g,_):nr(g)||Hi(g)?$r(g):wo(g)).name}function nl(g,_){return oh(wo(g,_))}function oh(g){var _={name:g.name};return g.observing&&g.observing.length>0&&(_.dependencies=Ha(g.observing).map(oh)),_}function ic(g){var _={name:g.name};return function(O){return O.observers&&O.observers.length>0}(g)&&(_.observers=ah(g).map(ic)),_}function ah(g){return g.observers}function Qc(g,_){var O=g.observers.length;O&&(g.observersIndexes[_.__mapid]=O),g.observers[O]=_,g.lowestObserverState>_.dependenciesState&&(g.lowestObserverState=_.dependenciesState)}function il(g,_){if(g.observers.length===1)g.observers.length=0,Ks(g);else{var O=g.observers,E=g.observersIndexes,M=O.pop();if(M!==_){var I=E[_.__mapid]||0;I?E[M.__mapid]=I:delete E[M.__mapid],O[I]=M}delete E[_.__mapid]}}function Ks(g){g.isPendingUnobservation||(g.isPendingUnobservation=!0,qt.pendingUnobservations.push(g))}function _s(){qt.inBatch++}function Xa(){if(--qt.inBatch==0){lc();for(var g=qt.pendingUnobservations,_=0;_<g.length;_++){var O=g[_];O.isPendingUnobservation=!1,O.observers.length===0&&O.onBecomeUnobserved()}qt.pendingUnobservations=[]}}function ol(g){var _=qt.trackingDerivation;_!==null?_.runId!==g.lastAccessedBy&&(g.lastAccessedBy=_.runId,_.newObserving[_.unboundDepsCount++]=g):g.observers.length===0&&Ks(g)}function oc(g,_){if(""+g.name+_.name,g.isTracing===Uo.BREAK){var O=[];ac(nl(g),O,1),new Function(`debugger;
/*
Tracing '`+g.name+`'

You are entering this break point because derivation '`+g.name+"' is being traced and '"+_.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(g instanceof dt?g.derivation.toString():"")+`

The dependencies for this derivation are:

`+O.join(`
`)+`
*/
    `)()}}function ac(g,_,O){_.length>=1e3?_.push("(and many more)"):(_.push(""+new Array(O).join("	")+g.name),g.dependencies&&g.dependencies.forEach(function(E){return ac(E,_,O+1)}))}Cu.__mobxInstanceCount?(Cu.__mobxInstanceCount++,setTimeout(function(){Xs||nc||Aa||(Aa=!0,console.warn("[mobx] Warning: there are multiple mobx instances active. This might lead to unexpected results. See https://github.com/mobxjs/mobx/issues/1082 for details."))},1)):Cu.__mobxInstanceCount=1,function(g){g[g.NOT_TRACKING=-1]="NOT_TRACKING",g[g.UP_TO_DATE=0]="UP_TO_DATE",g[g.POSSIBLY_STALE=1]="POSSIBLY_STALE",g[g.STALE=2]="STALE"}(zr||(zr={})),function(g){g[g.NONE=0]="NONE",g[g.LOG=1]="LOG",g[g.BREAK=2]="BREAK"}(Uo||(Uo={}));var al=function(g){this.cause=g};function $s(g){return g instanceof al}function sl(g){switch(g.dependenciesState){case zr.UP_TO_DATE:return!1;case zr.NOT_TRACKING:case zr.STALE:return!0;case zr.POSSIBLY_STALE:for(var _=ws(),O=g.observing,E=O.length,M=0;M<E;M++){var I=O[M];if(be(I)){try{I.get()}catch{return Ka(_),!0}if(g.dependenciesState===zr.STALE)return Ka(_),!0}}return sh(g),Ka(_),!1}}function pn(){return qt.trackingDerivation!==null}function Dr(g){var _=g.observers.length>0;qt.computationDepth>0&&_&&ui(Ce("m031")+g.name),!qt.allowStateChanges&&_&&ui(Ce(qt.strictMode?"m030a":"m030b")+g.name)}function sc(g,_,O){sh(g),g.newObserving=new Array(g.observing.length+100),g.unboundDepsCount=0,g.runId=++qt.runId;var E,M=qt.trackingDerivation;qt.trackingDerivation=g;try{E=_.call(O)}catch(I){E=new al(I)}return qt.trackingDerivation=M,function(I){for(var F=I.observing,q=I.observing=I.newObserving,G=zr.UP_TO_DATE,Y=0,X=I.unboundDepsCount,J=0;J<X;J++)(ie=q[J]).diffValue===0&&(ie.diffValue=1,Y!==J&&(q[Y]=ie),Y++),ie.dependenciesState>G&&(G=ie.dependenciesState);for(q.length=Y,I.newObserving=null,X=F.length;X--;)(ie=F[X]).diffValue===0&&il(ie,I),ie.diffValue=0;for(;Y--;){var ie;(ie=q[Y]).diffValue===1&&(ie.diffValue=0,Qc(ie,I))}G!==zr.UP_TO_DATE&&(I.dependenciesState=G,I.onBecomeStale())}(g),E}function Zs(g){var _=g.observing;g.observing=[];for(var O=_.length;O--;)il(_[O],g);g.dependenciesState=zr.NOT_TRACKING}function Jc(g){var _=ws(),O=g();return Ka(_),O}function ws(){var g=qt.trackingDerivation;return qt.trackingDerivation=null,g}function Ka(g){qt.trackingDerivation=g}function sh(g){if(g.dependenciesState!==zr.UP_TO_DATE){g.dependenciesState=zr.UP_TO_DATE;for(var _=g.observing,O=_.length;O--;)_[O].lowestObserverState=zr.UP_TO_DATE}}function md(g){return g}function Qs(g){switch(g.length){case 0:return qt.trackingDerivation;case 1:return wo(g[0]);case 2:return wo(g[0],g[1])}}var Gn=function(){function g(_,O){_===void 0&&(_="Reaction@"+kn()),this.name=_,this.onInvalidate=O,this.observing=[],this.newObserving=[],this.dependenciesState=zr.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+kn(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=Uo.NONE}return g.prototype.onBecomeStale=function(){this.schedule()},g.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,qt.pendingReactions.push(this),lc())},g.prototype.isScheduled=function(){return this._isScheduled},g.prototype.runReaction=function(){this.isDisposed||(_s(),this._isScheduled=!1,sl(this)&&(this._isTrackPending=!0,this.onInvalidate(),this._isTrackPending&&b()&&p({object:this,type:"scheduled-reaction"})),Xa())},g.prototype.track=function(_){_s();var O,E=b();E&&(O=Date.now(),m({object:this,type:"reaction",fn:_})),this._isRunning=!0;var M=sc(this,_,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&Zs(this),$s(M)&&this.reportExceptionInDerivation(M.cause),E&&T({time:Date.now()-O}),Xa()},g.prototype.reportExceptionInDerivation=function(_){var O=this;if(this.errorHandler)this.errorHandler(_,this);else{var E="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this,M=Ce("m037");console.error(E||M,_),b()&&p({type:"error",message:E,error:_,object:this}),qt.globalReactionErrorHandlers.forEach(function(I){return I(_,O)})}},g.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(_s(),Zs(this),Xa()))},g.prototype.getDisposer=function(){var _=this.dispose.bind(this);return _.$mobx=this,_.onError=uc,_},g.prototype.toString=function(){return"Reaction["+this.name+"]"},g.prototype.whyRun=function(){var _=Ha(this._isRunning?this.newObserving:this.observing).map(function(O){return O.name});return`
WhyRun? reaction '`+this.name+`':
 * Status: [`+(this.isDisposed?"stopped":this._isRunning?"running":this.isScheduled()?"scheduled":"idle")+`]
 * This reaction will re-run if any of the following observables changes:
    `+Hs(_)+`
    `+(this._isRunning?" (... or any observable accessed during the remainder of the current run)":"")+`
	`+Ce("m038")+`
`},g.prototype.trace=function(_){_===void 0&&(_=!1),function(){for(var O=[],E=0;E<arguments.length;E++)O[E]=arguments[E];var M=!1;typeof O[O.length-1]=="boolean"&&(M=O.pop());var I=Qs(O);if(!I)return ui("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");I.isTracing===Uo.NONE&&""+I.name,I.isTracing=M?Uo.BREAK:Uo.LOG}(this,_)},g}();function uc(g){pr(this&&this.$mobx&&$n(this.$mobx),"Invalid `this`"),pr(!this.$mobx.errorHandler,"Only one onErrorHandler can be registered"),this.$mobx.errorHandler=g}var to=100,Js=function(g){return g()};function lc(){qt.inBatch>0||qt.isRunningReactions||Js(Bi)}function Bi(){qt.isRunningReactions=!0;for(var g=qt.pendingReactions,_=0;g.length>0;){++_===to&&(console.error("Reaction doesn't converge to a stable state after "+to+" iterations. Probably there is a cycle in the reactive function: "+g[0]),g.splice(0));for(var O=g.splice(0),E=0,M=O.length;E<M;E++)O[E].runReaction()}qt.isRunningReactions=!1}var $n=Ya("Reaction",Gn);function Ra(g){return Be(function(_,O,E,M,I){pr(I!==void 0,Ce("m009")),pr(typeof I.get=="function",Ce("m010")),Xt(st(_,""),O,I.get,I.set,g,!1)},function(_){var O=this.$mobx.values[_];if(O!==void 0)return O.get()},function(_,O){this.$mobx.values[_].set(O)},!1,!1)}var Ia=Ra(er.default),aa=Ra(er.structural),at=function(g,_,O){if(typeof _=="string")return Ia.apply(null,arguments);pr(typeof g=="function",Ce("m011")),pr(arguments.length<3,Ce("m012"));var E=typeof _=="object"?_:{};E.setter=typeof _=="function"?_:E.setter;var M=E.equals?E.equals:E.compareStructural||E.struct?er.structural:er.default;return new dt(g,E.context,M,E.name||g.name||"",E.setter)};function gt(g,_,O){function E(X){return _&&O.push([g,X]),X}if(_===void 0&&(_=!0),O===void 0&&(O=[]),tr(g)){if(_&&O===null&&(O=[]),_&&g!==null&&typeof g=="object"){for(var M=0,I=O.length;M<I;M++)if(O[M][0]===g)return O[M][1]}if(me(g)){var F=E([]),q=g.map(function(X){return gt(X,_,O)});for(F.length=q.length,M=0,I=q.length;M<I;M++)F[M]=q[M];return F}if(nr(g)){for(var G in F=E({}),g)F[G]=gt(g[G],_,O);return F}if(Hi(g)){var Y=E({});return g.forEach(function(X,J){return Y[J]=gt(X,_,O)}),Y}if(fe(g))return gt(g.get(),_,O)}return g}at.struct=aa,at.equals=Ra;var yt={allowStateChanges:function(g,_){var O,E=we(g);try{O=_()}finally{Oe(E)}return O},deepEqual:Je,getAtom:wo,getDebugName:oa,getDependencyTree:nl,getAdministration:$r,getGlobalState:function(){return qt},getObserverTree:function(g,_){return ic(wo(g,_))},interceptReads:function(g,_,O){var E;if(Hi(g)||me(g)||fe(g))E=$r(g);else{if(!nr(g))return ui("Expected observable map, object or array as first array");if(typeof _!="string")return ui("InterceptReads can only be used with a specific property, not with an object in general");E=$r(g,_)}return E.dehancer!==void 0?ui("An intercept reader was already established"):(E.dehancer=typeof _=="function"?_:O,function(){E.dehancer=void 0})},isComputingDerivation:pn,isSpyEnabled:b,onReactionError:function(g){return qt.globalReactionErrorHandlers.push(g),function(){var _=qt.globalReactionErrorHandlers.indexOf(g);_>=0&&qt.globalReactionErrorHandlers.splice(_,1)}},reserveArrayBuffer:de,resetGlobalState:function(){qt.resetId++;var g=new rc;for(var _ in g)co.indexOf(_)===-1&&(qt[_]=g[_]);qt.allowStateChanges=!qt.strictMode},isolateGlobalState:function(){nc=!0,na().__mobxInstanceCount--},shareGlobalState:function(){lo("Using `shareGlobalState` is not recommended, use peer dependencies instead. See https://github.com/mobxjs/mobx/issues/1082 for details."),Xs=!0;var g=na(),_=qt;if(g.__mobservableTrackingStack||g.__mobservableViewStack)throw new Error("[mobx] An incompatible version of mobservable is already loaded.");if(g.__mobxGlobal&&g.__mobxGlobal.version!==_.version)throw new Error("[mobx] An incompatible version of mobx is already loaded.");g.__mobxGlobal?qt=g.__mobxGlobal:g.__mobxGlobal=_},spyReport:p,spyReportEnd:T,spyReportStart:m,setReactionScheduler:function(g){var _=Js;Js=function(O){return g(function(){return _(O)})}}},Vt={Reaction:Gn,untracked:Jc,Atom:l,BaseAtom:u,useStrict:ve,isStrictModeEnabled:function(){return qt.strictMode},spy:P,comparer:er,asReference:function(g){return lo("asReference is deprecated, use observable.ref instead"),Br.ref(g)},asFlat:function(g){return lo("asFlat is deprecated, use observable.shallow instead"),Br.shallow(g)},asStructure:function(g){return lo("asStructure is deprecated. Use observable.struct, computed.struct or reaction options instead."),Br.struct(g)},asMap:function(g){return lo("asMap is deprecated, use observable.map or observable.shallowMap instead"),Br.map(g||{})},isModifierDescriptor:Ni,isObservableObject:nr,isBoxedObservable:fe,isObservableArray:me,ObservableMap:Ca,isObservableMap:Hi,map:function(g){return lo("`mobx.map` is deprecated, use `new ObservableMap` or `mobx.observable.map` instead"),Br.map(g)},transaction:pi,observable:Br,computed:at,isObservable:tr,isComputed:function(g,_){if(g==null)return!1;if(_!==void 0){if(nr(g)===!1||!g.$mobx.values[_])return!1;var O=wo(g,_);return be(O)}return be(g)},extendObservable:Vr,extendShallowObservable:fn,observe:function(g,_,O,E){return typeof O=="function"?function(M,I,F,q){return $r(M,I).observe(F,q)}(g,_,O,E):function(M,I,F){return $r(M).observe(I,F)}(g,_,O)},intercept:function(g,_,O){return typeof O=="function"?function(E,M,I){return $r(E,M).intercept(I)}(g,_,O):function(E,M){return $r(E).intercept(M)}(g,_)},autorun:Ar,autorunAsync:function(g,_,O,E){var M,I,F,q;typeof g=="string"?(M=g,I=_,F=O,q=E):(M=g.name||"AutorunAsync@"+kn(),I=g,F=_,q=O),pr(Ie(I)===!1,Ce("m006")),F===void 0&&(F=1),q&&(I=I.bind(q));var G=!1,Y=new Gn(M,function(){G||(G=!0,setTimeout(function(){G=!1,Y.isDisposed||Y.track(X)},F))});function X(){I(Y)}return Y.schedule(),Y.getDisposer()},when:function(g,_,O,E){var M,I,F,q;return typeof g=="string"?(M=g,I=_,F=O,q=E):(M="When@"+kn(),I=g,F=_,q=O),Ar(M,function(G){if(I.call(q)){G.dispose();var Y=ws();F.call(q),Ka(Y)}})},reaction:Yt,action:$,isAction:Ie,runInAction:function(g,_,O){var E=typeof g=="string"?g:g.name||"<unnamed action>",M=typeof g=="function"?g:_,I=typeof g=="function"?_:O;return pr(typeof M=="function",Ce("m002")),pr(M.length===0,Ce("m003")),pr(typeof E=="string"&&E.length>0,"actions should have valid names, got: '"+E+"'"),Re(E,M,I,void 0)},expr:function(g,_){return pn()||console.warn(Ce("m013")),at(g,{context:_}).get()},toJS:gt,createTransformer:function(g,_){pr(typeof g=="function"&&g.length<2,"createTransformer expects a function that accepts one argument");var O={},E=qt.resetId,M=function(I){function F(q,G){var Y=I.call(this,function(){return g(G)},void 0,er.default,"Transformer-"+g.name+"-"+q,void 0)||this;return Y.sourceIdentifier=q,Y.sourceObject=G,Y}return s(F,I),F.prototype.onBecomeUnobserved=function(){var q=this.value;I.prototype.onBecomeUnobserved.call(this),delete O[this.sourceIdentifier],_&&_(q,this.sourceObject)},F}(dt);return function(I){E!==qt.resetId&&(O={},E=qt.resetId);var F=function(G){if(typeof G=="string"||typeof G=="number")return G;if(G===null||typeof G!="object")throw new Error("[mobx] transform expected some kind of object or primitive value, got: "+G);var Y=G.$transformId;return Y===void 0&&Yi(G,"$transformId",Y=kn()),Y}(I),q=O[F];return q?q.get():(q=O[F]=new M(F,I)).get()}},whyRun:function(g,_){return lo("`whyRun` is deprecated in favor of `trace`"),(g=Qs(arguments))?be(g)||$n(g)?g.whyRun():ui(Ce("m025")):Ce("m024")},isArrayLike:function(g){return Array.isArray(g)||me(g)},extras:yt},ir=!1,Jr=function(g){var _=Vt[g];Object.defineProperty(Vt,g,{get:function(){return ir||(ir=!0,console.warn("Using default export (`import mobx from 'mobx'`) is deprecated and wont work in mobx@4.0.0\nUse `import * as mobx from 'mobx'` instead")),_}})};for(var Ri in Vt)Jr(Ri);typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:P,extras:yt});var ro=Mi(1803),gn=Mi.n(ro),ef={value:()=>{}};function Vn(){for(var g,_=0,O=arguments.length,E={};_<O;++_){if(!(g=arguments[_]+"")||g in E||/[\s.]/.test(g))throw new Error("illegal type: "+g);E[g]=[]}return new gi(E)}function gi(g){this._=g}function cc(g,_){for(var O,E=0,M=g.length;E<M;++E)if((O=g[E]).name===_)return O.value}function Wv(g,_,O){for(var E=0,M=g.length;E<M;++E)if(g[E].name===_){g[E]=ef,g=g.slice(0,E).concat(g.slice(E+1));break}return O!=null&&g.push({name:_,value:O}),g}gi.prototype=Vn.prototype={constructor:gi,on:function(g,_){var O,E,M=this._,I=(E=M,(g+"").trim().split(/^|\s+/).map(function(G){var Y="",X=G.indexOf(".");if(X>=0&&(Y=G.slice(X+1),G=G.slice(0,X)),G&&!E.hasOwnProperty(G))throw new Error("unknown type: "+G);return{type:G,name:Y}})),F=-1,q=I.length;if(!(arguments.length<2)){if(_!=null&&typeof _!="function")throw new Error("invalid callback: "+_);for(;++F<q;)if(O=(g=I[F]).type)M[O]=Wv(M[O],g.name,_);else if(_==null)for(O in M)M[O]=Wv(M[O],g.name,null);return this}for(;++F<q;)if((O=(g=I[F]).type)&&(O=cc(M[O],g.name)))return O},copy:function(){var g={},_=this._;for(var O in _)g[O]=_[O].slice();return new gi(g)},call:function(g,_){if((O=arguments.length-2)>0)for(var O,E,M=new Array(O),I=0;I<O;++I)M[I]=arguments[I+2];if(!this._.hasOwnProperty(g))throw new Error("unknown type: "+g);for(I=0,O=(E=this._[g]).length;I<O;++I)E[I].value.apply(_,M)},apply:function(g,_,O){if(!this._.hasOwnProperty(g))throw new Error("unknown type: "+g);for(var E=this._[g],M=0,I=E.length;M<I;++M)E[M].value.apply(_,O)}};const Pu=Vn;var ul,Au,en=0,fc=0,eu=0,Es=1e3,uh=0,Ru=0,tf=0,xs=typeof performance=="object"&&performance.now?performance:Date,$a=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(g){setTimeout(g,17)};function hc(){return Ru||($a(Hv),Ru=xs.now()+tf)}function Hv(){Ru=0}function Iu(){this._call=this._time=this._next=null}function rf(g,_,O){var E=new Iu;return E.restart(g,_,O),E}function bd(){Ru=(uh=xs.now())+tf,en=fc=0;try{(function(){hc(),++en;for(var g,_=ul;_;)(g=Ru-_._time)>=0&&_._call.call(void 0,g),_=_._next;--en})()}finally{en=0,function(){for(var g,_,O=ul,E=1/0;O;)O._call?(E>O._time&&(E=O._time),g=O,O=O._next):(_=O._next,O._next=null,O=g?g._next=_:ul=_);Au=g,fo(E)}(),Ru=0}}function nf(){var g=xs.now(),_=g-uh;_>Es&&(tf-=_,uh=g)}function fo(g){en||(fc&&(fc=clearTimeout(fc)),g-Ru>24?(g<1/0&&(fc=setTimeout(bd,g-xs.now()-tf)),eu&&(eu=clearInterval(eu))):(eu||(uh=xs.now(),eu=setInterval(nf,Es)),en=1,$a(bd)))}Iu.prototype=rf.prototype={constructor:Iu,restart:function(g,_,O){if(typeof g!="function")throw new TypeError("callback is not a function");O=(O==null?hc():+O)+(_==null?0:+_),this._next||Au===this||(Au?Au._next=this:ul=this,Au=this),this._call=g,this._time=O,fo()},stop:function(){this._call&&(this._call=null,this._time=1/0,fo())}};const ku=4294967296;function Za(g){return g.x}function of(g){return g.y}var Yv=Math.PI*(3-Math.sqrt(5));function Xv(g,_,O,E){if(isNaN(_)||isNaN(O))return g;var M,I,F,q,G,Y,X,J,ie,ce=g._root,ge={data:E},le=g._x0,ye=g._y0,De=g._x1,Ne=g._y1;if(!ce)return g._root=ge,g;for(;ce.length;)if((Y=_>=(I=(le+De)/2))?le=I:De=I,(X=O>=(F=(ye+Ne)/2))?ye=F:Ne=F,M=ce,!(ce=ce[J=X<<1|Y]))return M[J]=ge,g;if(q=+g._x.call(null,ce.data),G=+g._y.call(null,ce.data),_===q&&O===G)return ge.next=ce,M?M[J]=ge:g._root=ge,g;do M=M?M[J]=new Array(4):g._root=new Array(4),(Y=_>=(I=(le+De)/2))?le=I:De=I,(X=O>=(F=(ye+Ne)/2))?ye=F:Ne=F;while((J=X<<1|Y)==(ie=(G>=F)<<1|q>=I));return M[ie]=ce,M[J]=ge,g}function Eo(g,_,O,E,M){this.node=g,this.x0=_,this.y0=O,this.x1=E,this.y1=M}function lh(g){return g[0]}function ch(g){return g[1]}function af(g,_,O){var E=new Du(_??lh,O??ch,NaN,NaN,NaN,NaN);return g==null?E:E.addAll(g)}function Du(g,_,O,E,M,I){this._x=g,this._y=_,this._x0=O,this._y0=E,this._x1=M,this._y1=I,this._root=void 0}function _d(g){for(var _={data:g.data},O=_;g=g.next;)O=O.next={data:g.data};return _}var xo=af.prototype=Du.prototype;function no(g){return function(){return g}}function Cn(g){return 1e-6*(g()-.5)}function qn(){var g,_,O,E,M,I=no(-30),F=1,q=1/0,G=.81;function Y(ce){var ge,le=g.length,ye=af(g,Za,of).visitAfter(J);for(E=ce,ge=0;ge<le;++ge)_=g[ge],ye.visit(ie)}function X(){if(g){var ce,ge,le=g.length;for(M=new Array(le),ce=0;ce<le;++ce)ge=g[ce],M[ge.index]=+I(ge,ce,g)}}function J(ce){var ge,le,ye,De,Ne,Fe=0,je=0;if(ce.length){for(ye=De=Ne=0;Ne<4;++Ne)(ge=ce[Ne])&&(le=Math.abs(ge.value))&&(Fe+=ge.value,je+=le,ye+=le*ge.x,De+=le*ge.y);ce.x=ye/je,ce.y=De/je}else{(ge=ce).x=ge.data.x,ge.y=ge.data.y;do Fe+=M[ge.data.index];while(ge=ge.next)}ce.value=Fe}function ie(ce,ge,le,ye){if(!ce.value)return!0;var De=ce.x-_.x,Ne=ce.y-_.y,Fe=ye-ge,je=De*De+Ne*Ne;if(Fe*Fe/G<je)return je<q&&(De===0&&(je+=(De=Cn(O))*De),Ne===0&&(je+=(Ne=Cn(O))*Ne),je<F&&(je=Math.sqrt(F*je)),_.vx+=De*ce.value*E/je,_.vy+=Ne*ce.value*E/je),!0;if(!(ce.length||je>=q)){(ce.data!==_||ce.next)&&(De===0&&(je+=(De=Cn(O))*De),Ne===0&&(je+=(Ne=Cn(O))*Ne),je<F&&(je=Math.sqrt(F*je)));do ce.data!==_&&(Fe=M[ce.data.index]*E/je,_.vx+=De*Fe,_.vy+=Ne*Fe);while(ce=ce.next)}}return Y.initialize=function(ce,ge){g=ce,O=ge,X()},Y.strength=function(ce){return arguments.length?(I=typeof ce=="function"?ce:no(+ce),X(),Y):I},Y.distanceMin=function(ce){return arguments.length?(F=ce*ce,Y):Math.sqrt(F)},Y.distanceMax=function(ce){return arguments.length?(q=ce*ce,Y):Math.sqrt(q)},Y.theta=function(ce){return arguments.length?(G=ce*ce,Y):Math.sqrt(G)},Y}function fh(g){return g.x+g.vx}function fg(g){return g.y+g.vy}function Kv(g){return g.index}function $v(g,_){var O=g.get(_);if(!O)throw new Error("node not found: "+_);return O}xo.copy=function(){var g,_,O=new Du(this._x,this._y,this._x0,this._y0,this._x1,this._y1),E=this._root;if(!E)return O;if(!E.length)return O._root=_d(E),O;for(g=[{source:E,target:O._root=new Array(4)}];E=g.pop();)for(var M=0;M<4;++M)(_=E.source[M])&&(_.length?g.push({source:_,target:E.target[M]=new Array(4)}):E.target[M]=_d(_));return O},xo.add=function(g){const _=+this._x.call(null,g),O=+this._y.call(null,g);return Xv(this.cover(_,O),_,O,g)},xo.addAll=function(g){var _,O,E,M,I=g.length,F=new Array(I),q=new Array(I),G=1/0,Y=1/0,X=-1/0,J=-1/0;for(O=0;O<I;++O)isNaN(E=+this._x.call(null,_=g[O]))||isNaN(M=+this._y.call(null,_))||(F[O]=E,q[O]=M,E<G&&(G=E),E>X&&(X=E),M<Y&&(Y=M),M>J&&(J=M));if(G>X||Y>J)return this;for(this.cover(G,Y).cover(X,J),O=0;O<I;++O)Xv(this,F[O],q[O],g[O]);return this},xo.cover=function(g,_){if(isNaN(g=+g)||isNaN(_=+_))return this;var O=this._x0,E=this._y0,M=this._x1,I=this._y1;if(isNaN(O))M=(O=Math.floor(g))+1,I=(E=Math.floor(_))+1;else{for(var F,q,G=M-O||1,Y=this._root;O>g||g>=M||E>_||_>=I;)switch(q=(_<E)<<1|g<O,(F=new Array(4))[q]=Y,Y=F,G*=2,q){case 0:M=O+G,I=E+G;break;case 1:O=M-G,I=E+G;break;case 2:M=O+G,E=I-G;break;case 3:O=M-G,E=I-G}this._root&&this._root.length&&(this._root=Y)}return this._x0=O,this._y0=E,this._x1=M,this._y1=I,this},xo.data=function(){var g=[];return this.visit(function(_){if(!_.length)do g.push(_.data);while(_=_.next)}),g},xo.extent=function(g){return arguments.length?this.cover(+g[0][0],+g[0][1]).cover(+g[1][0],+g[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},xo.find=function(g,_,O){var E,M,I,F,q,G,Y,X=this._x0,J=this._y0,ie=this._x1,ce=this._y1,ge=[],le=this._root;for(le&&ge.push(new Eo(le,X,J,ie,ce)),O==null?O=1/0:(X=g-O,J=_-O,ie=g+O,ce=_+O,O*=O);G=ge.pop();)if(!(!(le=G.node)||(M=G.x0)>ie||(I=G.y0)>ce||(F=G.x1)<X||(q=G.y1)<J))if(le.length){var ye=(M+F)/2,De=(I+q)/2;ge.push(new Eo(le[3],ye,De,F,q),new Eo(le[2],M,De,ye,q),new Eo(le[1],ye,I,F,De),new Eo(le[0],M,I,ye,De)),(Y=(_>=De)<<1|g>=ye)&&(G=ge[ge.length-1],ge[ge.length-1]=ge[ge.length-1-Y],ge[ge.length-1-Y]=G)}else{var Ne=g-+this._x.call(null,le.data),Fe=_-+this._y.call(null,le.data),je=Ne*Ne+Fe*Fe;if(je<O){var Xe=Math.sqrt(O=je);X=g-Xe,J=_-Xe,ie=g+Xe,ce=_+Xe,E=le.data}}return E},xo.remove=function(g){if(isNaN(I=+this._x.call(null,g))||isNaN(F=+this._y.call(null,g)))return this;var _,O,E,M,I,F,q,G,Y,X,J,ie,ce=this._root,ge=this._x0,le=this._y0,ye=this._x1,De=this._y1;if(!ce)return this;if(ce.length)for(;;){if((Y=I>=(q=(ge+ye)/2))?ge=q:ye=q,(X=F>=(G=(le+De)/2))?le=G:De=G,_=ce,!(ce=ce[J=X<<1|Y]))return this;if(!ce.length)break;(_[J+1&3]||_[J+2&3]||_[J+3&3])&&(O=_,ie=J)}for(;ce.data!==g;)if(E=ce,!(ce=ce.next))return this;return(M=ce.next)&&delete ce.next,E?(M?E.next=M:delete E.next,this):_?(M?_[J]=M:delete _[J],(ce=_[0]||_[1]||_[2]||_[3])&&ce===(_[3]||_[2]||_[1]||_[0])&&!ce.length&&(O?O[ie]=ce:this._root=ce),this):(this._root=M,this)},xo.removeAll=function(g){for(var _=0,O=g.length;_<O;++_)this.remove(g[_]);return this},xo.root=function(){return this._root},xo.size=function(){var g=0;return this.visit(function(_){if(!_.length)do++g;while(_=_.next)}),g},xo.visit=function(g){var _,O,E,M,I,F,q=[],G=this._root;for(G&&q.push(new Eo(G,this._x0,this._y0,this._x1,this._y1));_=q.pop();)if(!g(G=_.node,E=_.x0,M=_.y0,I=_.x1,F=_.y1)&&G.length){var Y=(E+I)/2,X=(M+F)/2;(O=G[3])&&q.push(new Eo(O,Y,X,I,F)),(O=G[2])&&q.push(new Eo(O,E,X,Y,F)),(O=G[1])&&q.push(new Eo(O,Y,M,I,X)),(O=G[0])&&q.push(new Eo(O,E,M,Y,X))}return this},xo.visitAfter=function(g){var _,O=[],E=[];for(this._root&&O.push(new Eo(this._root,this._x0,this._y0,this._x1,this._y1));_=O.pop();){var M=_.node;if(M.length){var I,F=_.x0,q=_.y0,G=_.x1,Y=_.y1,X=(F+G)/2,J=(q+Y)/2;(I=M[0])&&O.push(new Eo(I,F,q,X,J)),(I=M[1])&&O.push(new Eo(I,X,q,G,J)),(I=M[2])&&O.push(new Eo(I,F,J,X,Y)),(I=M[3])&&O.push(new Eo(I,X,J,G,Y))}E.push(_)}for(;_=E.pop();)g(_.node,_.x0,_.y0,_.x1,_.y1);return this},xo.x=function(g){return arguments.length?(this._x=g,this):this._x},xo.y=function(g){return arguments.length?(this._y=g,this):this._y};var rr=256,io=4096,Zn=25,ll="#FFDF81",dc="#818790",vc="#EDEDED",sf="#CFD1D4",cl="#F5F6F6",fl="#8FE3E8",Qe="#1A1B1D",vt={position:"absolute",top:0,bottom:0,left:0,right:0},rt=function(){return window.devicePixelRatio||1},Kt=["NVL_basic-wrapper","NVL_interactive-wrapper"];function br(g,_){var O=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!O){if(Array.isArray(g)||(O=function(G,Y){if(G){if(typeof G=="string")return Yr(G,Y);var X=Object.prototype.toString.call(G).slice(8,-1);return X==="Object"&&G.constructor&&(X=G.constructor.name),X==="Map"||X==="Set"?Array.from(G):X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X)?Yr(G,Y):void 0}}(g))||_){O&&(g=O);var E=0,M=function(){};return{s:M,n:function(){return E>=g.length?{done:!0}:{done:!1,value:g[E++]}},e:function(G){throw G},f:M}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I,F=!0,q=!1;return{s:function(){O=O.call(g)},n:function(){var G=O.next();return F=G.done,G},e:function(G){q=!0,I=G},f:function(){try{F||O.return==null||O.return()}finally{if(q)throw I}}}}function Yr(g,_){(_==null||_>g.length)&&(_=g.length);for(var O=0,E=new Array(_);O<_;O++)E[O]=g[O];return E}var yi=function(g){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:vc,O=new Map;return g.forEach(function(E){var M=E.id,I=E.from,F=E.to,q=E.color,G=E.width,Y=E.disabled,X=[I,F].sort(),J="".concat(X[0],".").concat(X[1]),ie=O.get(J);ie?ie.bundledRels.push({id:M,color:q??void 0,disabled:Y!=null&&Y,width:G??1}):O.set(J,{bundledRels:[{id:M,color:q??void 0,disabled:Y!=null&&Y,width:G??1}],key:J,from:I,to:F,color:q??void 0,disabled:Y!=null&&Y,width:0})}),O.forEach(function(E){var M=(0,r.uniqBy)(E.bundledRels,"disabled"),I=M.length===1&&M[0].disabled===!0,F=M.length===1&&M[0].disabled!==!0;if(I)E.color=_,E.width=1;else{var q=E.bundledRels.filter(function(Y){return Y.disabled!==!0}),G=(0,r.uniqBy)(q,"color");F?(E.color=G.length>1?void 0:E.bundledRels[0].color,E.bundledRels.forEach(function(Y){E.width+=Y.width})):(E.color=G.length===1?G[0].color:void 0,E.disabled=!1,E.bundledRels.forEach(function(Y){E.width+=Y.disabled!==!0?Y.width:0}))}}),Array.from(O.values())},pe=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).find(function(g){return"size"in g})!==void 0};function Os(g){return Os=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},Os(g)}var hh=function(g){var _,O;return typeof g.source=="number"||typeof g.target=="number"||typeof g.source=="string"||typeof g.target=="string"?45*devicePixelRatio:((_=g.source.size)!==null&&_!==void 0?_:Zn)+((O=g.target.size)!==null&&O!==void 0?O:Zn)+90*devicePixelRatio};function Qn(g){return Os(g)==="object"}var Fr=function(g){var _;return((_=g.size)!==null&&_!==void 0?_:Zn)+25*devicePixelRatio},tu=function(){return-400*Math.pow(devicePixelRatio,2)},zo=function(){return 2*tu()};function Xi(g){return Xi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},Xi(g)}function Qa(g,_){(_==null||_>g.length)&&(_=g.length);for(var O=0,E=new Array(_);O<_;O++)E[O]=g[O];return E}function Nr(g,_){var O=Object.keys(g);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(g);_&&(E=E.filter(function(M){return Object.getOwnPropertyDescriptor(g,M).enumerable})),O.push.apply(O,E)}return O}function Zv(g,_){for(var O=0;O<_.length;O++){var E=_[O];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,dh(E.key),E)}}function dh(g){var _=function(O,E){if(Xi(O)!="object"||!O)return O;var M=O[Symbol.toPrimitive];if(M!==void 0){var I=M.call(O,"string");if(Xi(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(O)}(g);return Xi(_)=="symbol"?_:String(_)}var sa="d3ForceLayout",wd=function(g){return g&&gt(g)},Ed=function(){function g(E){var M=this;(function(Y,X){if(!(Y instanceof X))throw new TypeError("Cannot call a class as a function")})(this,g);var I=E.state;this.state=I,this.d3Nodes={},this.d3RelList={},this.computing=!0,this.center={x:0,y:0},this.nodeRelCount=[];var F=this.state,q=F.nodes,G=F.rels;q.addChannel(sa),G.addChannel(sa),this.simulation=function(Y){var X,J=1,ie=.001,ce=1-Math.pow(ie,1/300),ge=0,le=.6,ye=new Map,De=rf(je),Ne=Pu("tick","end"),Fe=function(){let Ke=1;return()=>(Ke=(1664525*Ke+1013904223)%ku)/ku}();function je(){Xe(),Ne.call("tick",X),J<ie&&(De.stop(),Ne.call("end",X))}function Xe(Ke){var qe,tt,mt=Y.length;Ke===void 0&&(Ke=1);for(var It=0;It<Ke;++It)for(J+=(ge-J)*ce,ye.forEach(function(bt){bt(J)}),qe=0;qe<mt;++qe)(tt=Y[qe]).fx==null?tt.x+=tt.vx*=le:(tt.x=tt.fx,tt.vx=0),tt.fy==null?tt.y+=tt.vy*=le:(tt.y=tt.fy,tt.vy=0);return X}function Ve(){for(var Ke,qe=0,tt=Y.length;qe<tt;++qe){if((Ke=Y[qe]).index=qe,Ke.fx!=null&&(Ke.x=Ke.fx),Ke.fy!=null&&(Ke.y=Ke.fy),isNaN(Ke.x)||isNaN(Ke.y)){var mt=10*Math.sqrt(.5+qe),It=qe*Yv;Ke.x=mt*Math.cos(It),Ke.y=mt*Math.sin(It)}(isNaN(Ke.vx)||isNaN(Ke.vy))&&(Ke.vx=Ke.vy=0)}}function $e(Ke){return Ke.initialize&&Ke.initialize(Y,Fe),Ke}return Y==null&&(Y=[]),Ve(),X={tick:Xe,restart:function(){return De.restart(je),X},stop:function(){return De.stop(),X},nodes:function(Ke){return arguments.length?(Y=Ke,Ve(),ye.forEach($e),X):Y},alpha:function(Ke){return arguments.length?(J=+Ke,X):J},alphaMin:function(Ke){return arguments.length?(ie=+Ke,X):ie},alphaDecay:function(Ke){return arguments.length?(ce=+Ke,X):+ce},alphaTarget:function(Ke){return arguments.length?(ge=+Ke,X):ge},velocityDecay:function(Ke){return arguments.length?(le=1-Ke,X):1-le},randomSource:function(Ke){return arguments.length?(Fe=Ke,ye.forEach($e),X):Fe},force:function(Ke,qe){return arguments.length>1?(qe==null?ye.delete(Ke):ye.set(Ke,$e(qe)),X):ye.get(Ke)},find:function(Ke,qe,tt){var mt,It,bt,Nt,St,Pe=0,Te=Y.length;for(tt==null?tt=1/0:tt*=tt,Pe=0;Pe<Te;++Pe)(bt=(mt=Ke-(Nt=Y[Pe]).x)*mt+(It=qe-Nt.y)*It)<tt&&(St=Nt,tt=bt);return St},on:function(Ke,qe){return arguments.length>1?(Ne.on(Ke,qe),X):Ne.on(Ke)}}}().velocityDecay(.4).force("charge",qn().strength(tu)).force("centerX",function(Y){var X,J,ie,ce=no(.1);function ge(ye){for(var De,Ne=0,Fe=X.length;Ne<Fe;++Ne)(De=X[Ne]).vx+=(ie[Ne]-De.x)*J[Ne]*ye}function le(){if(X){var ye,De=X.length;for(J=new Array(De),ie=new Array(De),ye=0;ye<De;++ye)J[ye]=isNaN(ie[ye]=+Y(X[ye],ye,X))?0:+ce(X[ye],ye,X)}}return typeof Y!="function"&&(Y=no(Y==null?0:+Y)),ge.initialize=function(ye){X=ye,le()},ge.strength=function(ye){return arguments.length?(ce=typeof ye=="function"?ye:no(+ye),le(),ge):ce},ge.x=function(ye){return arguments.length?(Y=typeof ye=="function"?ye:no(+ye),le(),ge):Y},ge}(0).strength(.03)).force("centerY",function(Y){var X,J,ie,ce=no(.1);function ge(ye){for(var De,Ne=0,Fe=X.length;Ne<Fe;++Ne)(De=X[Ne]).vy+=(ie[Ne]-De.y)*J[Ne]*ye}function le(){if(X){var ye,De=X.length;for(J=new Array(De),ie=new Array(De),ye=0;ye<De;++ye)J[ye]=isNaN(ie[ye]=+Y(X[ye],ye,X))?0:+ce(X[ye],ye,X)}}return typeof Y!="function"&&(Y=no(Y==null?0:+Y)),ge.initialize=function(ye){X=ye,le()},ge.strength=function(ye){return arguments.length?(ce=typeof ye=="function"?ye:no(+ye),le(),ge):ce},ge.y=function(ye){return arguments.length?(Y=typeof ye=="function"?ye:no(+ye),le(),ge):Y},ge}(0).strength(.03)).alpha(1).alphaMin(.05).on("end",function(){M.simulationStopped=!0,M.shouldUpdate=!1,M.shouldReheatNodes=!1,M.shouldCountNodeRels=!1}).stop(),this.simulationStopped=!0,this.shouldUpdate=!0,this.shouldReheatNodes=!1,this.shouldCountNodeRels=!0,this.stateDisposers=[],this.stateDisposers.push(this.state.reaction(function(){return M.state.graphUpdates},function(){var Y=q.channels[sa];if(q.version!==void 0&&Y){var X=Object.values(Y.adds).length>0,J=Object.values(Y.removes).length>0,ie=Object.values(Y.updates),ce=pe(ie);X||J||ce?(M.shouldUpdate=!0,M.shouldReheatNodes=!0,M.shouldCountNodeRels=!0):M.shouldReheatNodes=!1}var ge=G.channels[sa];if(G.version!==void 0&&ge){var le=Object.values(ge.adds).length>0,ye=Object.values(ge.removes).length>0;(le||ye)&&(M.shouldUpdate=!0,M.shouldReheatNodes=!0,M.shouldCountNodeRels=!0)}}))}var _,O;return _=g,O=[{key:"setOptions",value:function(E){}},{key:"updateNodes",value:function(E){var M=this;E.forEach(function(I){M.d3Nodes[I.id]===void 0&&(M.d3Nodes[I.id]={id:I.id}),I!=null&&I.pinned?(M.d3Nodes[I.id].fx=I.x,M.d3Nodes[I.id].fy=I.y):(M.d3Nodes[I.id].x=I.x,M.d3Nodes[I.id].y=I.y),M.d3Nodes[I.id].vy=0,M.d3Nodes[I.id].vx=0}),this.shouldUpdate=!0,this.simulation.tick().alpha(.2)}},{key:"update",value:function(){var E,M=this,I=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.shouldUpdate||I){var F=this.state,q=F.nodes,G=F.rels,Y=q.channels[sa],X=G.channels[sa],J=Object.values(Y.adds).length>0,ie=Object.values(X.adds).length>0,ce=Object.values(Y.removes).length>0,ge=Object.values(X.removes).length>0,le=Object.values(Y.updates).length>0;if(J||ie||ce||ge||le){var ye=J&&Object.keys(this.d3Nodes).length===0,De=wd(Y.removes);Object.keys(De).forEach(function(je){delete M.d3Nodes[je]});var Ne=wd(Y.adds);if(Object.keys(Ne).forEach(function(je){M.d3Nodes[je]=function(Xe){for(var Ve=1;Ve<arguments.length;Ve++){var $e=arguments[Ve]!=null?arguments[Ve]:{};Ve%2?Nr(Object($e),!0).forEach(function(Ke){var qe,tt,mt;qe=Xe,tt=Ke,mt=$e[Ke],(tt=dh(tt))in qe?Object.defineProperty(qe,tt,{value:mt,enumerable:!0,configurable:!0,writable:!0}):qe[tt]=mt}):Object.getOwnPropertyDescriptors?Object.defineProperties(Xe,Object.getOwnPropertyDescriptors($e)):Nr(Object($e)).forEach(function(Ke){Object.defineProperty(Xe,Ke,Object.getOwnPropertyDescriptor($e,Ke))})}return Xe}({},Ne[je])}),le&&Object.values(Y.updates).forEach(function(je){je.pinned===!0?(M.d3Nodes[je.id].fx=M.d3Nodes[je.id].x,M.d3Nodes[je.id].fy=M.d3Nodes[je.id].y):je.pinned===!1&&(M.d3Nodes[je.id].fx=null,M.d3Nodes[je.id].fy=null),je.size!==void 0&&(M.d3Nodes[je.id].size=je.size)}),(ie||ge)&&(this.d3RelList=yi(wd(G.items)).filter(function(je){return je.from!==je.to}).map(function(je,Xe){return{source:je.from,target:je.to,index:Xe}})),ye){var Fe=Object.values(this.d3Nodes);(function(je,Xe,Ve){var $e=je.filter(function(Ke){return Ke.x===void 0&&Ke.y===void 0});$e.forEach(function(Ke,qe){Ke.x=Xe.x+Ve*Math.sin(2*Math.PI*qe/$e.length),Ke.y=Xe.y+Ve*Math.cos(2*Math.PI*qe/$e.length)})})(Fe,this.center,(E=Fe.length,45*E/(2*Math.PI)))}this.layout(q.items,G.items,ye)}q.clearChannel(sa),G.clearChannel(sa),this.shouldUpdate=!1,this.simulation.alpha()>this.simulation.alphaMin()&&(this.shouldUpdate=!0,this.simulationStopped&&(this.simulation.restart(),this.simulationStopped=!1))}}},{key:"layout",value:function(E,M,I){var F=this;if(!(0,r.isEmpty)(this.d3Nodes)){if(this.simulation.stop(),this.simulation.nodes(Object.values(this.d3Nodes)).force("collide",function(X){var J,ie,ce,ge=1,le=1;function ye(){for(var Fe,je,Xe,Ve,$e,Ke,qe,tt=J.length,mt=0;mt<le;++mt)for(je=af(J,fh,fg).visitAfter(De),Fe=0;Fe<tt;++Fe)Xe=J[Fe],Ke=ie[Xe.index],qe=Ke*Ke,Ve=Xe.x+Xe.vx,$e=Xe.y+Xe.vy,je.visit(It);function It(bt,Nt,St,Pe,Te){var Ae=bt.data,nt=bt.r,Ze=Ke+nt;if(!Ae)return Nt>Ve+Ze||Pe<Ve-Ze||St>$e+Ze||Te<$e-Ze;if(Ae.index>Xe.index){var ft=Ve-Ae.x-Ae.vx,kt=$e-Ae.y-Ae.vy,Ut=ft*ft+kt*kt;Ut<Ze*Ze&&(ft===0&&(Ut+=(ft=Cn(ce))*ft),kt===0&&(Ut+=(kt=Cn(ce))*kt),Ut=(Ze-(Ut=Math.sqrt(Ut)))/Ut*ge,Xe.vx+=(ft*=Ut)*(Ze=(nt*=nt)/(qe+nt)),Xe.vy+=(kt*=Ut)*Ze,Ae.vx-=ft*(Ze=1-Ze),Ae.vy-=kt*Ze)}}}function De(Fe){if(Fe.data)return Fe.r=ie[Fe.data.index];for(var je=Fe.r=0;je<4;++je)Fe[je]&&Fe[je].r>Fe.r&&(Fe.r=Fe[je].r)}function Ne(){if(J){var Fe,je,Xe=J.length;for(ie=new Array(Xe),Fe=0;Fe<Xe;++Fe)je=J[Fe],ie[je.index]=+X(je,Fe,J)}}return typeof X!="function"&&(X=no(X==null?1:+X)),ye.initialize=function(Fe,je){J=Fe,ce=je,Ne()},ye.iterations=function(Fe){return arguments.length?(le=+Fe,ye):le},ye.strength=function(Fe){return arguments.length?(ge=+Fe,ye):ge},ye.radius=function(Fe){return arguments.length?(X=typeof Fe=="function"?Fe:no(+Fe),Ne(),ye):X},ye}().radius(Fr)),this.shouldCountNodeRels&&(this.nodeRelCount=this.countNodeRels()),this.simulation.force("link",function(X){var J,ie,ce,ge,le,ye,De=Kv,Ne=function(qe){return 1/Math.min(ge[qe.source.index],ge[qe.target.index])},Fe=no(30),je=1;function Xe(qe){for(var tt=0,mt=X.length;tt<je;++tt)for(var It,bt,Nt,St,Pe,Te,Ae,nt=0;nt<mt;++nt)bt=(It=X[nt]).source,St=(Nt=It.target).x+Nt.vx-bt.x-bt.vx||Cn(ye),Pe=Nt.y+Nt.vy-bt.y-bt.vy||Cn(ye),St*=Te=((Te=Math.sqrt(St*St+Pe*Pe))-ie[nt])/Te*qe*J[nt],Pe*=Te,Nt.vx-=St*(Ae=le[nt]),Nt.vy-=Pe*Ae,bt.vx+=St*(Ae=1-Ae),bt.vy+=Pe*Ae}function Ve(){if(ce){var qe,tt,mt=ce.length,It=X.length,bt=new Map(ce.map((Nt,St)=>[De(Nt,St,ce),Nt]));for(qe=0,ge=new Array(mt);qe<It;++qe)(tt=X[qe]).index=qe,typeof tt.source!="object"&&(tt.source=$v(bt,tt.source)),typeof tt.target!="object"&&(tt.target=$v(bt,tt.target)),ge[tt.source.index]=(ge[tt.source.index]||0)+1,ge[tt.target.index]=(ge[tt.target.index]||0)+1;for(qe=0,le=new Array(It);qe<It;++qe)tt=X[qe],le[qe]=ge[tt.source.index]/(ge[tt.source.index]+ge[tt.target.index]);J=new Array(It),$e(),ie=new Array(It),Ke()}}function $e(){if(ce)for(var qe=0,tt=X.length;qe<tt;++qe)J[qe]=+Ne(X[qe],qe,X)}function Ke(){if(ce)for(var qe=0,tt=X.length;qe<tt;++qe)ie[qe]=+Fe(X[qe],qe,X)}return X==null&&(X=[]),Xe.initialize=function(qe,tt){ce=qe,ye=tt,Ve()},Xe.links=function(qe){return arguments.length?(X=qe,Ve(),Xe):X},Xe.id=function(qe){return arguments.length?(De=qe,Xe):De},Xe.iterations=function(qe){return arguments.length?(je=+qe,Xe):je},Xe.strength=function(qe){return arguments.length?(Ne=typeof qe=="function"?qe:no(+qe),$e(),Xe):Ne},Xe.distance=function(qe){return arguments.length?(Fe=typeof qe=="function"?qe:no(+qe),Ke(),Xe):Fe},Xe}(this.d3RelList).id(function(X){return X.id}).distance(hh).strength(function(X){return function(J,ie){if(!Qn(J.source)||!Qn(J.target))return 1;var ce=1.2/(Math.min(ie[J.source.index],ie[J.target.index])+(Math.max(ie[J.source.index],ie[J.target.index])-1)/100);return Math.max(Math.min(ce,1),.06)}(X,F.nodeRelCount)})),I){var q=0;this.simulation.force("charge",qn().strength(zo));for(var G=performance.now();performance.now()-G<300&&q<200;)this.simulation.alpha(1),this.simulation.tick(1),q+=1;this.simulation.force("charge",qn().strength(tu));for(var Y=performance.now();performance.now()-Y<100&&this.simulation.alpha()>=this.simulation.alphaMin();)this.simulation.tick(1);return this.computing=!1,void this.simulation.restart()}this.shouldReheatNodes?this.simulation.alpha(1).restart():this.simulation.restart()}}},{key:"getNodePositions",value:function(E){var M,I=[],F=function(X,J){var ie=typeof Symbol<"u"&&X[Symbol.iterator]||X["@@iterator"];if(!ie){if(Array.isArray(X)||(ie=function(Ne,Fe){if(Ne){if(typeof Ne=="string")return Qa(Ne,Fe);var je=Object.prototype.toString.call(Ne).slice(8,-1);return je==="Object"&&Ne.constructor&&(je=Ne.constructor.name),je==="Map"||je==="Set"?Array.from(Ne):je==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(je)?Qa(Ne,Fe):void 0}}(X))||J){ie&&(X=ie);var ce=0,ge=function(){};return{s:ge,n:function(){return ce>=X.length?{done:!0}:{done:!1,value:X[ce++]}},e:function(Ne){throw Ne},f:ge}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var le,ye=!0,De=!1;return{s:function(){ie=ie.call(X)},n:function(){var Ne=ie.next();return ye=Ne.done,Ne},e:function(Ne){De=!0,le=Ne},f:function(){try{ye||ie.return==null||ie.return()}finally{if(De)throw le}}}}(E);try{for(F.s();!(M=F.n()).done;){var q=M.value,G=this.d3Nodes[q.id];if(G!==void 0){var Y={id:G.id,x:G.x,y:G.y};I.push(Y)}}}catch(X){F.e(X)}finally{F.f()}return I}},{key:"getShouldUpdate",value:function(){return this.shouldUpdate}},{key:"getComputing",value:function(){return this.computing}},{key:"terminateUpdate",value:function(){this.simulation.alpha(this.simulation.alphaMin()).stop(),this.simulationStopped=!0}},{key:"destroy",value:function(){this.stateDisposers.forEach(function(E){E()}),this.state.nodes.removeChannel(sa),this.state.rels.removeChannel(sa),this.simulation.stop()}},{key:"setAlpha",value:function(E){this.simulation.alpha(E),this.simulation.restart(),this.simulation.shouldUpdate=!0}},{key:"countNodeRels",value:function(){for(var E=new Map(Object.entries(this.d3Nodes)),M=Object.values(this.d3RelList),I=new Array(E.length),F=0;F<M.length;++F){var q=M[F];q.index=F,Xi(q.source)!=="object"&&(q.source=E.get(q.source)),Xi(q.target)!=="object"&&(q.target=E.get(q.target)),I[q.source.index]=(I[q.source.index]||0)+1,I[q.target.index]=(I[q.target.index]||0)+1}return I}}],O&&Zv(_.prototype,O),Object.defineProperty(_,"prototype",{writable:!1}),g}(),uf=Mi(5880),Mu=Mi.n(uf),Gr=Mu().getLogger("NVL");const hl=OL;var Ss={CoseBilkentLayout:{standard:"createCoseBilkentLayoutWorker",fallback:"coseBilkentLayoutFallbackWorker"},HierarchicalLayout:{standard:"createHierarchicalLayoutWorker",fallback:"hierarchicalLayoutFallbackWorker"}},dl=function(g){var _,O=arguments.length>1&&arguments[1]!==void 0&&arguments[1],E=Ss[g],M=E.standard,I=E.fallback;if(O)_=hl[I];else try{_=hl[M]()}catch(F){console.warn("Failed to initialise ".concat(g,' worker: "').concat(JSON.stringify(F),'". Falling back to syncronous code.')),_=hl[I]}if(_===void 0)throw"".concat(g," code could not be initialized.");return _.port.start(),_};function ka(g){return ka=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},ka(g)}function Go(g,_){var O=Object.keys(g);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(g);_&&(E=E.filter(function(M){return Object.getOwnPropertyDescriptor(g,M).enumerable})),O.push.apply(O,E)}return O}function vl(g){for(var _=1;_<arguments.length;_++){var O=arguments[_]!=null?arguments[_]:{};_%2?Go(Object(O),!0).forEach(function(E){Oo(g,E,O[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(O)):Go(Object(O)).forEach(function(E){Object.defineProperty(g,E,Object.getOwnPropertyDescriptor(O,E))})}return g}function lf(g,_){var O=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!O){if(Array.isArray(g)||(O=function(G,Y){if(G){if(typeof G=="string")return Ts(G,Y);var X=Object.prototype.toString.call(G).slice(8,-1);return X==="Object"&&G.constructor&&(X=G.constructor.name),X==="Map"||X==="Set"?Array.from(G):X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X)?Ts(G,Y):void 0}}(g))||_){O&&(g=O);var E=0,M=function(){};return{s:M,n:function(){return E>=g.length?{done:!0}:{done:!1,value:g[E++]}},e:function(G){throw G},f:M}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I,F=!0,q=!1;return{s:function(){O=O.call(g)},n:function(){var G=O.next();return F=G.done,G},e:function(G){q=!0,I=G},f:function(){try{F||O.return==null||O.return()}finally{if(q)throw I}}}}function Ts(g,_){(_==null||_>g.length)&&(_=g.length);for(var O=0,E=new Array(_);O<_;O++)E[O]=g[O];return E}function Vo(g,_){for(var O=0;O<_.length;O++){var E=_[O];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,Qv(E.key),E)}}function Oo(g,_,O){return(_=Qv(_))in g?Object.defineProperty(g,_,{value:O,enumerable:!0,configurable:!0,writable:!0}):g[_]=O,g}function Qv(g){var _=function(O,E){if(ka(O)!="object"||!O)return O;var M=O[Symbol.toPrimitive];if(M!==void 0){var I=M.call(O,"string");if(ka(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(O)}(g);return ka(_)=="symbol"?_:String(_)}var cf=function(g,_,O){return g+(_-g)*function(E){return E*E*(3-2*E)}(O)},xd=function(){function g(E){(function(I,F){if(!(I instanceof F))throw new TypeError("Cannot call a class as a function")})(this,g),Oo(this,"positions",void 0),Oo(this,"oldPositions",void 0),Oo(this,"startTime",void 0),Oo(this,"t",void 0),Oo(this,"currentT",void 0),Oo(this,"state",void 0),Oo(this,"shouldUpdateAnimator",void 0),Oo(this,"parents",void 0),Oo(this,"animationCompleteCallback",void 0),Oo(this,"shouldUpdate",void 0);var M=E.state;this.positions={},this.oldPositions={},this.startTime=0,this.t=1,this.currentT=1,this.state=M,this.shouldUpdateAnimator=!1,this.parents={},this.animationCompleteCallback=E.animationCompleteCallback}var _,O;return _=g,O=[{key:"getPositionMapFromState",value:function(){var E,M=this.state.nodes,I=M.idToPosition,F={},q=lf(M.items);try{for(q.s();!(E=q.n()).done;){var G=E.value,Y=I[G.id];Y!==void 0&&(F[G.id]={id:G.id,x:Y.x,y:Y.y})}}catch(X){q.e(X)}finally{q.f()}return F}},{key:"updatePositionsFromState",value:function(){this.positions=vl({},this.getPositionMapFromState())}},{key:"updateOldPositionFromState",value:function(){this.oldPositions=vl({},this.getPositionMapFromState())}},{key:"startAnimation",value:function(){this.updateOldPositionFromState(),this.startTime=Date.now(),this.t=0,this.currentT=0,this.shouldUpdateAnimator=!0}},{key:"update",value:function(){var E=this.shouldUpdateAnimator,M=(Date.now()-this.startTime)/400;this.t=Math.min(M,1),this.currentT<1?this.shouldUpdateAnimator=!0:(this.shouldUpdateAnimator=!1,E&&!this.shouldUpdateAnimator&&this.animationCompleteCallback!==void 0&&this.animationCompleteCallback(),this.shouldUpdateAnimator||this.updatePositionsFromState())}},{key:"updateNodes",value:function(E){var M,I=lf(E);try{for(I.s();!(M=I.n()).done;){var F=M.value;F.x!==void 0&&F.y!==void 0&&(this.positions[F.id]={id:F.id,x:F.x,y:F.y}),this.shouldUpdate=!0}}catch(q){I.e(q)}finally{I.f()}}},{key:"getNodePositions",value:function(E){var M,I=this.parents,F=this.state.nodes.idToPosition,q=function(je,Xe){for(var Ve={x:0,y:0},$e=je.length,Ke=0,qe=0;qe<$e;qe++){var tt=Xe[je[qe].id];tt===void 0||isNaN(tt.x)||isNaN(tt.y)||tt.x===0||tt.y===0||(Ve.x+=tt.x,Ve.y+=tt.y,Ke+=1)}return Ke>0?[Ve.x/Ke,Ve.y/Ke]:[0,0]}(E,F),G={x:q[0],y:q[1]},Y=[],X=lf(E);try{for(X.s();!(M=X.n()).done;){var J=M.value,ie=this.positions[J.id],ce=F[J.id],ge={id:J.id};if(ie!==void 0){for(var le,ye,De,Ne=J.id,Fe=(le=this.oldPositions[J.id])!==null&&le!==void 0?le:vl({},G);Fe===void 0&&I[Ne]!==void 0;)Ne=I[Ne],Fe=this.oldPositions[Ne];Fe.x=(ye=Fe.x)!==null&&ye!==void 0?ye:G.x,Fe.y=(De=Fe.y)!==null&&De!==void 0?De:G.y,ge.x=cf(Fe.x,ie.x,this.t),ge.y=cf(Fe.y,ie.y,this.t)}else ce!==void 0&&(ge.x=ce.x||G.x,ge.y=ce.y||G.y);Y.push(ge)}}catch(je){X.e(je)}finally{X.f()}return this.currentT=this.t,Y}}],O&&Vo(_.prototype,O),Object.defineProperty(_,"prototype",{writable:!1}),g}();function Wn(g){return Wn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},Wn(g)}function pl(g,_){var O=Object.keys(g);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(g);_&&(E=E.filter(function(M){return Object.getOwnPropertyDescriptor(g,M).enumerable})),O.push.apply(O,E)}return O}function vh(g){for(var _=1;_<arguments.length;_++){var O=arguments[_]!=null?arguments[_]:{};_%2?pl(Object(O),!0).forEach(function(E){Da(g,E,O[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(O)):pl(Object(O)).forEach(function(E){Object.defineProperty(g,E,Object.getOwnPropertyDescriptor(O,E))})}return g}function Cs(g,_){return function(O){if(Array.isArray(O))return O}(g)||function(O,E){var M=O==null?null:typeof Symbol<"u"&&O[Symbol.iterator]||O["@@iterator"];if(M!=null){var I,F,q,G,Y=[],X=!0,J=!1;try{if(q=(M=M.call(O)).next,E!==0)for(;!(X=(I=q.call(M)).done)&&(Y.push(I.value),Y.length!==E);X=!0);}catch(ie){J=!0,F=ie}finally{try{if(!X&&M.return!=null&&(G=M.return(),Object(G)!==G))return}finally{if(J)throw F}}return Y}}(g,_)||hf(g,_)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ff(g){return function(_){if(Array.isArray(_))return ru(_)}(g)||function(_){if(typeof Symbol<"u"&&_[Symbol.iterator]!=null||_["@@iterator"]!=null)return Array.from(_)}(g)||hf(g)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function hf(g,_){if(g){if(typeof g=="string")return ru(g,_);var O=Object.prototype.toString.call(g).slice(8,-1);return O==="Object"&&g.constructor&&(O=g.constructor.name),O==="Map"||O==="Set"?Array.from(g):O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O)?ru(g,_):void 0}}function ru(g,_){(_==null||_>g.length)&&(_=g.length);for(var O=0,E=new Array(_);O<_;O++)E[O]=g[O];return E}function Ii(g,_){for(var O=0;O<_.length;O++){var E=_[O];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,Nu(E.key),E)}}function dn(g,_,O){return _=Lu(_),function(E,M){if(M&&(Wn(M)==="object"||typeof M=="function"))return M;if(M!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gl(E)}(g,ph()?Reflect.construct(_,O||[],Lu(g).constructor):_.apply(g,O))}function ph(){try{var g=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ph=function(){return!!g})()}function gl(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function gh(){return gh=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(g,_,O){var E=function(I,F){for(;!Object.prototype.hasOwnProperty.call(I,F)&&(I=Lu(I))!==null;);return I}(g,_);if(E){var M=Object.getOwnPropertyDescriptor(E,_);return M.get?M.get.call(arguments.length<3?g:O):M.value}},gh.apply(this,arguments)}function Lu(g){return Lu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(_){return _.__proto__||Object.getPrototypeOf(_)},Lu(g)}function nu(g,_){return nu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(O,E){return O.__proto__=E,O},nu(g,_)}function Da(g,_,O){return(_=Nu(_))in g?Object.defineProperty(g,_,{value:O,enumerable:!0,configurable:!0,writable:!0}):g[_]=O,g}function Nu(g){var _=function(O,E){if(Wn(O)!="object"||!O)return O;var M=O[Symbol.toPrimitive];if(M!==void 0){var I=M.call(O,"string");if(Wn(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(O)}(g);return Wn(_)=="symbol"?_:String(_)}var iu=function(g){return g!==void 0?gt(g):g},pc=function(g){function _(M){var I;return function(F,q){if(!(F instanceof q))throw new TypeError("Cannot call a class as a function")}(this,_),Da(gl(I=dn(this,_,[M])),"stateDisposers",void 0),Da(gl(I),"cytoCompleteCallback",void 0),Da(gl(I),"computing",void 0),Da(gl(I),"pendingLayoutData",void 0),Da(gl(I),"worker",void 0),Da(gl(I),"workersDisabled",void 0),I.stateDisposers=[],I.stateDisposers.push(I.state.reaction(function(){return I.state.graphUpdates},function(){I.state.nodes.version!==void 0&&(I.shouldUpdate=!0),I.state.rels.version!==void 0&&(I.shouldUpdate=!0)})),I.cytoCompleteCallback=M.cytoCompleteCallback,I.shouldUpdate=!0,I.computing=!1,I.workersDisabled=M.state.disableWebWorkers,I.setOptions(),I.worker=dl("CoseBilkentLayout",I.workersDisabled),I.pendingLayoutData=null,I}var O,E;return function(M,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(I&&I.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),Object.defineProperty(M,"prototype",{writable:!1}),I&&nu(M,I)}(_,g),O=_,E=[{key:"setOptions",value:function(){this.shouldUpdate=!0}},{key:"update",value:function(){var M=arguments.length>0&&arguments[0]!==void 0&&arguments[0],I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(this.shouldUpdate||M){var q=iu(I),G=iu(F);(q.length>0||G.length>0)&&(this.updatePositionsFromState(),this.layout(q,G))}gh(Lu(_.prototype),"update",this).call(this),this.shouldUpdate=!1}},{key:"getShouldUpdate",value:function(){return this.shouldUpdate||this.shouldUpdateAnimator}},{key:"getComputing",value:function(){return this.computing}},{key:"layout",value:function(M,I){var F=this;if(this.worker){if(M.length){var q=M.map(function(X){return{group:"nodes",data:{id:X.id}}}),G=I.map(function(X){return{group:"edges",data:{id:"rel".concat(X.id),source:X.from,target:X.to}}}),Y={elements:[].concat(ff(q),ff(G)),spacingFactor:M.reduce(function(X,J){var ie;return X+((ie=J.size)!==null&&ie!==void 0?ie:Zn)},0)/M.length*4.5/50*rt()};this.computing?this.pendingLayoutData=Y:(this.computing=!0,this.worker.port.onmessage=function(X){var J=X.data.positions;if(F.computing){for(var ie=0,ce=Object.entries(J);ie<ce.length;ie++){var ge=Cs(ce[ie],2),le=ge[0],ye=ge[1];F.positions[le]=vh({id:le},ye)}F.cytoCompleteCallback(),F.startAnimation()}F.computing=!1,F.shouldUpdate=!0},setTimeout(function(){F.computing&&F.worker.port.postMessage(Y)},0))}}else Gr.info("Cose-Bilkent layout code not yet initialised.")}},{key:"terminateUpdate",value:function(){this.computing=!1}},{key:"destroy",value:function(){var M;this.stateDisposers.forEach(function(I){I()}),(M=this.worker)===null||M===void 0||M.port.close()}}],E&&Ii(O.prototype,E),Object.defineProperty(O,"prototype",{writable:!1}),_}(xd),yl=typeof Float32Array<"u"?Float32Array:Array;function ou(){var g=new yl(16);return yl!=Float32Array&&(g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[11]=0,g[12]=0,g[13]=0,g[14]=0),g[0]=1,g[5]=1,g[10]=1,g[15]=1,g}Math.hypot||(Math.hypot=function(){for(var g=0,_=arguments.length;_--;)g+=arguments[_]*arguments[_];return Math.sqrt(g)});var Ps=function(g,_,O,E,M,I,F){var q=1/(_-O),G=1/(E-M),Y=1/(I-F);return g[0]=-2*q,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=-2*G,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=2*Y,g[11]=0,g[12]=(_+O)*q,g[13]=(M+E)*G,g[14]=(F+I)*Y,g[15]=1,g},Jv=Mi(9792),Od=Mi.n(Jv);function gc(g){return gc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},gc(g)}function yh(g,_){for(var O=0;O<_.length;O++){var E=_[O];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,mc(E.key),E)}}function yc(g,_,O){return(_=mc(_))in g?Object.defineProperty(g,_,{value:O,enumerable:!0,configurable:!0,writable:!0}):g[_]=O,g}function mc(g){var _=function(O,E){if(gc(O)!="object"||!O)return O;var M=O[Symbol.toPrimitive];if(M!==void 0){var I=M.call(O,"string");if(gc(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(O)}(g);return gc(_)=="symbol"?_:String(_)}var ua=function(){function g(E,M,I){var F=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};(function(J,ie){if(!(J instanceof ie))throw new TypeError("Cannot call a class as a function")})(this,g),yc(this,"shaderProgram",void 0),yc(this,"gl",void 0),yc(this,"curTexture",void 0),yc(this,"attributeInfo",void 0),yc(this,"uniformInfo",void 0);var q=E.createShader(E.FRAGMENT_SHADER);if(!E.isShader(q))throw new Error("Could not create shader object");var G=Od()(I,F);E.shaderSource(q,G),E.compileShader(q),(0,r.isNil)(E.getShaderParameter(q,E.COMPILE_STATUS))&&Gr.info(E.getShaderInfoLog(q));var Y=E.createShader(E.VERTEX_SHADER);if(!E.isShader(Y))throw new Error("Could not create shader object");var X=Od()(M,F);if(E.shaderSource(Y,X),E.compileShader(Y),(0,r.isNil)(E.getShaderParameter(Y,E.COMPILE_STATUS))&&Gr.info(E.getShaderInfoLog(Y)),this.shaderProgram=E.createProgram(),E.attachShader(this.shaderProgram,q),E.attachShader(this.shaderProgram,Y),E.linkProgram(this.shaderProgram),(0,r.isNil)(E.getProgramParameter(this.shaderProgram,E.LINK_STATUS)))throw new Error("Could not initialise shader");this.gl=E,this.curTexture=0,this.scanUniforms(),this.scanAttributes()}var _,O;return _=g,O=[{key:"setUniform",value:function(E,M){var I=this.gl,F=this.uniformInfo[E];if(F===void 0)throw new Error("Shader.setUniform - Uniform ".concat(E," not found in shader"));switch(F.type){case I.INT:I.uniform1i(F.location,M);break;case I.INT_VEC2:I.uniform2iv(F.location,M);break;case I.INT_VEC3:I.uniform3iv(F.location,M);break;case I.INT_VEC4:I.uniform4iv(F.location,M);break;case I.SAMPLER_2D:I.activeTexture(I.TEXTURE0+F.texture),I.bindTexture(I.TEXTURE_2D,M),I.uniform1i(F.location,F.texture);break;case I.SAMPLER_CUBE:case I.FLOAT:I.uniform1f(F.location,M);break;case I.FLOAT_VEC2:I.uniform2fv(F.location,M);break;case I.FLOAT_VEC3:I.uniform3fv(F.location,M);break;case I.FLOAT_VEC4:I.uniform4fv(F.location,M);break;case I.FLOAT_MAT2:I.uniformMatrix2fv(F.location,!1,M);break;case I.FLOAT_MAT3:I.uniformMatrix3fv(F.location,!1,M);break;case I.FLOAT_MAT4:I.uniformMatrix4fv(F.location,!1,M)}}},{key:"setAttributePointer",value:function(E,M,I,F){var q=this.gl,G=this.attributeInfo[E],Y=I*Float32Array.BYTES_PER_ELEMENT,X=F*Float32Array.BYTES_PER_ELEMENT;q.enableVertexAttribArray(G.position),q.vertexAttribPointer(G.position,M,q.FLOAT,!1,X,Y)}},{key:"setAttributePointerFloat",value:function(E,M,I,F){var q=this.gl,G=this.attributeInfo[E];q.enableVertexAttribArray(G.position),q.vertexAttribPointer(G.position,M,q.FLOAT,!1,F,I)}},{key:"setAttributePointerUShort",value:function(E,M,I,F){var q=this.gl,G=this.attributeInfo[E];q.enableVertexAttribArray(G.position),q.vertexAttribPointer(G.position,M,q.UNSIGNED_SHORT,!1,F,I)}},{key:"setAttributePointerByteNorm",value:function(E,M,I,F){var q=this.gl,G=this.attributeInfo[E];q.enableVertexAttribArray(G.position),q.vertexAttribPointer(G.position,M,q.UNSIGNED_BYTE,!0,F,I)}},{key:"setAttributePointerByte",value:function(E,M,I,F){var q=this.gl,G=this.attributeInfo[E];q.enableVertexAttribArray(G.position),q.vertexAttribPointer(G.position,M,q.UNSIGNED_BYTE,!1,F,I)}},{key:"use",value:function(){this.gl.useProgram(this.shaderProgram)}},{key:"remove",value:function(){this.gl.deleteProgram(this.shaderProgram)}},{key:"scanAttributes",value:function(){var E=this.gl;this.attributeInfo={};for(var M,I,F=E.getProgramParameter(this.shaderProgram,E.ACTIVE_ATTRIBUTES),q=0;q<F;q++)M=E.getActiveAttrib(this.shaderProgram,q),I=E.getAttribLocation(this.shaderProgram,M.name),this.attributeInfo[M.name]={type:M.type,position:I}}},{key:"scanUniforms",value:function(){var E=this.gl;this.uniformInfo={};for(var M,I=E.getProgramParameter(this.shaderProgram,E.ACTIVE_UNIFORMS),F=0;F<I;F++){M=E.getActiveUniform(this.shaderProgram,F);var q=E.getUniformLocation(this.shaderProgram,M.name),G={type:M.type,location:q};M.type===E.SAMPLER_2D&&(G.texture=this.curTexture,this.curTexture+=1),this.uniformInfo[M.name]=G}}}],O&&yh(_.prototype,O),Object.defineProperty(_,"prototype",{writable:!1}),g}();function au(g){return au=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},au(g)}function _e(g,_){for(var O=0;O<_.length;O++){var E=_[O];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,ju(E.key),E)}}function ju(g){var _=function(O,E){if(au(O)!="object"||!O)return O;var M=O[Symbol.toPrimitive];if(M!==void 0){var I=M.call(O,"string");if(au(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(O)}(g);return au(_)=="symbol"?_:String(_)}function Bu(g){var _=typeof Map=="function"?new Map:void 0;return Bu=function(O){if(O===null||!function(M){try{return Function.toString.call(M).indexOf("[native code]")!==-1}catch{return typeof M=="function"}}(O))return O;if(typeof O!="function")throw new TypeError("Super expression must either be null or a function");if(_!==void 0){if(_.has(O))return _.get(O);_.set(O,E)}function E(){return function(M,I,F){if(gr())return Reflect.construct.apply(null,arguments);var q=[null];q.push.apply(q,I);var G=new(M.bind.apply(M,q));return F&&jr(G,F.prototype),G}(O,arguments,df(this).constructor)}return E.prototype=Object.create(O.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),jr(E,O)},Bu(g)}function gr(){try{var g=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gr=function(){return!!g})()}function jr(g,_){return jr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(O,E){return O.__proto__=E,O},jr(g,_)}function df(g){return df=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(_){return _.__proto__||Object.getPrototypeOf(_)},df(g)}var ml=function(g){function _(){return function(q,G){if(!(q instanceof G))throw new TypeError("Cannot call a class as a function")}(this,_),M=this,F=arguments,I=df(I=_),function(q,G){if(G&&(au(G)==="object"||typeof G=="function"))return G;if(G!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Y){if(Y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Y}(q)}(M,gr()?Reflect.construct(I,F||[],df(M).constructor):I.apply(M,F));var M,I,F}var O,E;return function(M,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(I&&I.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),Object.defineProperty(M,"prototype",{writable:!1}),I&&jr(M,I)}(_,g),O=_,(E=[{key:"toString",value:function(){return this.message}}])&&_e(O.prototype,E),Object.defineProperty(O,"prototype",{writable:!1}),_}(Bu(Error));const vf=`uniform mat4 u_projection;

attribute vec2 a_position;
//attribute float a_index;

//varying highp float index;

void main() {
//  index = a_index;
  gl_Position = u_projection * vec4(a_position, 0.0, 1.0);
}`;function Ja(g){return Ja=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},Ja(g)}function hg(g,_){for(var O=0;O<_.length;O++){var E=_[O];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,Ma(E.key),E)}}function Ma(g){var _=function(O,E){if(Ja(O)!="object"||!O)return O;var M=O[Symbol.toPrimitive];if(M!==void 0){var I=M.call(O,"string");if(Ja(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(O)}(g);return Ja(_)=="symbol"?_:String(_)}var ep=function(){function g(E,M){(function(I,F){if(!(I instanceof F))throw new TypeError("Cannot call a class as a function")})(this,g),this.graph=this.constructGraphObjects(E,M),this.subGraphs=[],this.sunMap={}}var _,O;return _=g,O=[{key:"constructGraphObjects",value:function(E,M){var I=new Array(E.nodes.length),F=new Array(E.rels.length),q={},G=[];return E.nodes.forEach(function(Y,X){I[X]=[],F[X]=[],G.push(Y)}),E.rels.forEach(function(Y){var X=M[Y.from],J=M[Y.to];X!==void 0&&J!==void 0&&(I[X].push(J),I[J].push(X),F[X].push(Y.id),F[J].push(Y.id),q[Y.id]=Y)}),this.relIdMap=F,{nodes:G,relationships:I,idToRel:q}}},{key:"coarsenTo",value:function(E){for(var M=this.graph,I=M.nodes.length,F=0;M.nodes.length>E&&M.relationships.some(function(G){return G.length>0});){var q=this.coarsen(M,F===0);if(F===0&&(this.nodeSortMap=q.nodeSortMap),this.subGraphs.push(q.sortedInput),(M=q.output).relationships.length===0||M.relationships.every(function(G){return G.length===0})||I===M.nodes.length)break;I=M.nodes.length,F+=1}return this.subGraphs.push(M),M}},{key:"coarsenBy",value:function(E){for(var M=E,I=this.graph,F=I.nodes.length,q=M;M>0;){var G=this.coarsen(I,M===q);if(this.subGraphs.push(G.sortedInput),(I=G.output).relationships.length===0||I.relationships.every(function(Y){return Y.length===0})||F===I.nodes.length)break;F=I.nodes.length,M-=1}return this.subGraphs.push(I),I}},{key:"coarsen",value:function(E,M){var I=this,F=E.nodes,q=E.relationships,G=F.map(function(Ve,$e){return $e}),Y={},X={};F.forEach(function(Ve,$e){Y[$e]=Ve,X[Ve.id]=$e});for(var J=q.map(function(Ve){return Ve.slice()}),ie={suns:{},planets:{},moons:{}},ce=[],ge=[],le=function(){var Ve=G[0];G.splice(G.indexOf(Ve),1),q[Ve].forEach(function(qe){var tt=G.indexOf(qe);tt>=0&&G.splice(tt,1);var mt=-1,It=J[qe];It.forEach(function(bt,Nt){var St=G.indexOf(bt);St>=0?G.splice(St,1):bt===Ve&&(mt=Nt)}),It.splice(mt,1)});var $e={id:Ve};if(M)$e.originalId=Y[Ve].id;else{var Ke=Y[Ve];$e.finestIndex=Ke.finestIndex,$e.originalId=Ke.originalId}ce.push($e),ie.suns[Ve]=$e};G.length>0;)le();ce.forEach(function(Ve,$e){ge[$e]=[]}),ce.forEach(function(Ve,$e){var Ke={},qe=[];q[Ve.id].forEach(function(tt){if(tt!==Ve.id&&!Ke[tt]){var mt={id:tt,parent:Ve,sunId:$e,moons:[]},It=Y[tt];mt.size=function(){return mt.moons.length+1},mt.weight=It.weight||1,mt.children=function(){return mt.moons},M?mt.originalId=It.id:(mt.finestIndex=It.finestIndex,mt.originalId=It.originalId),qe.push(mt),Ke[tt]=!0}}),qe.forEach(function(tt){ie.planets[tt.id]=tt}),Ve.planets=qe,Ve.children=function(){return Ve.planets},Ve.weight=Ve.planets.reduce(function(tt,mt){return tt+(mt.weight||1)},0)+(Y[Ve.id].weight||1),Ve.size=function(){return Ve.planets.reduce(function(tt,mt){return tt+mt.size()},0)+1}});var ye=F.filter(function(Ve,$e){return!ce.find(function(Ke){return Ke.id===$e})&&!ie.planets[$e]});ye.forEach(function(Ve){for(var $e=X[Ve.id],Ke=J[$e],qe=null,tt=-1,mt=0;mt<Ke.length;mt++){var It=Ke[mt];if(It!==$e&&(qe=ie.planets[It])){tt=mt;break}}if(Ke.splice(tt,1),qe){var bt={id:$e,size:function(){return 0}};bt.weight=Y[$e].weight||1,bt.parent=qe,bt.sunId=qe.sunId,M?bt.originalId=Ve.id:(bt.finestIndex=Ve.finestIndex,bt.originalId=Ve.originalId),ie.moons[$e]=bt,qe.moons.push(bt),qe.weight+=bt.weight,qe.parent.weight+=bt.weight;var Nt=J[qe.id];Nt.splice(Nt.indexOf($e),1)}}),J.forEach(function(Ve,$e){if(!ie.suns[$e]){var Ke=ie.planets[$e]||ie.moons[$e];J[$e].forEach(function(qe){var tt=ie.planets[qe];if(tt||(tt=ie.moons[qe]),Ke.sunId!==tt.sunId){var mt=ge[Ke.sunId];mt.includes(tt.sunId)||mt.push(tt.sunId)}})}});var De=[],Ne=0,Fe={};ce.forEach(function(Ve,$e){var Ke=F[Ve.id];Fe[Ve.id]=Ne,Ve.previousIndex=$e,Ve.id=Ne,Ne+=1,M&&(Ke.finestIndex=Ve.id,Ve.finestIndex=Ve.id),De.push(Ke),Ve.planets.forEach(function(qe){var tt=F[qe.id];Fe[qe.id]=Ne,qe.id=Ne,Ne+=1,qe.sunId=Ve.id,M&&(tt.finestIndex=qe.id),I.sunMap[qe.originalId]=Ve.originalId,De.push(tt),qe.moons.forEach(function(mt){var It=F[mt.id];Fe[mt.id]=Ne,mt.id=Ne,Ne+=1,mt.sunId=Ve.id,M&&(It.finestIndex=mt.id),I.sunMap[mt.originalId]=Ve.originalId,De.push(It)})})});var je=[],Xe=[];return q.forEach(function(Ve,$e){var Ke=Fe[$e];je[Ke]=Ve.map(function(qe){return Fe[qe]}),M&&(Xe[Ke]=Ve.map(function(qe,tt){return I.relIdMap[$e][tt]}))}),Xe&&Xe.length>0&&(this.relIdMap=Xe),{output:{nodes:ce,relationships:ge},sortedInput:{nodes:De,relationships:je},nodeSortMap:Fe}}}],O&&hg(_.prototype,O),Object.defineProperty(_,"prototype",{writable:!1}),g}(),pf=function(g,_,O){for(var E=2*Math.PI/O,M=[],I=0;I<O;I++){var F=E*I;M.push({x:g.x+_*Math.cos(F),y:g.y+_*Math.sin(F)})}return M};function bl(g){return bl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},bl(g)}function La(g,_){var O=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!O){if(Array.isArray(g)||(O=function(G,Y){if(G){if(typeof G=="string")return Sd(G,Y);var X=Object.prototype.toString.call(G).slice(8,-1);return X==="Object"&&G.constructor&&(X=G.constructor.name),X==="Map"||X==="Set"?Array.from(G):X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X)?Sd(G,Y):void 0}}(g))||_){O&&(g=O);var E=0,M=function(){};return{s:M,n:function(){return E>=g.length?{done:!0}:{done:!1,value:g[E++]}},e:function(G){throw G},f:M}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I,F=!0,q=!1;return{s:function(){O=O.call(g)},n:function(){var G=O.next();return F=G.done,G},e:function(G){q=!0,I=G},f:function(){try{F||O.return==null||O.return()}finally{if(q)throw I}}}}function Sd(g,_){(_==null||_>g.length)&&(_=g.length);for(var O=0,E=new Array(_);O<_;O++)E[O]=g[O];return E}function la(g,_){for(var O=0;O<_.length;O++){var E=_[O];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,mh(E.key),E)}}function or(g,_,O){return(_=mh(_))in g?Object.defineProperty(g,_,{value:O,enumerable:!0,configurable:!0,writable:!0}):g[_]=O,g}function mh(g){var _=function(O,E){if(bl(O)!="object"||!O)return O;var M=O[Symbol.toPrimitive];if(M!==void 0){var I=M.call(O,"string");if(bl(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(O)}(g);return bl(_)=="symbol"?_:String(_)}var ho="PhysLayout",vo=new Float32Array(4),ca=256,gf=function(g){for(var _={},O={},E=0;E<g.length;E++)_[g[E].id]=E,O[E]=g[E].id;return{nodeIdToIndex:_,nodeIndexToId:O}},tp=function(){function g(E){var M=this;(function(ie,ce){if(!(ie instanceof ce))throw new TypeError("Cannot call a class as a function")})(this,g),or(this,"physVbo",void 0),or(this,"physSmallVbo",void 0),or(this,"physProjection",void 0),or(this,"physSmallProjection",void 0),or(this,"gl",void 0),or(this,"useReadpixelWorkaround",void 0),or(this,"averageNodeSize",void 0),or(this,"shouldUpdate",void 0),or(this,"iterationCount",void 0),or(this,"lastSpeedValues",void 0),or(this,"rollingAvgGraphSpeed",void 0),or(this,"nodeVariation",void 0),or(this,"nodeCenterPoint",void 0),or(this,"peakIterationMultiplier",void 0),or(this,"stateDisposers",void 0),or(this,"state",void 0),or(this,"dpr",void 0),or(this,"intelWorkaround",void 0),or(this,"simulationStopVelocitySquared",void 0),or(this,"gravity",void 0),or(this,"force",void 0),or(this,"nodeIdToIndex",void 0),or(this,"nodeIndexToId",void 0),or(this,"numNodes",void 0),or(this,"solarMerger",void 0),or(this,"subGraphs",void 0),or(this,"nodeSortMap",void 0),or(this,"firstUpdate",void 0),or(this,"curPhysData",void 0),or(this,"apprxRepForceShader",void 0),or(this,"levelsClusterTexture",void 0),or(this,"levelsFinestIndexTexture",void 0),or(this,"initalLevelTexture",void 0),or(this,"levelsData",void 0),or(this,"collisionDetectionMultiplier",void 0),or(this,"physShader",void 0),or(this,"physData",void 0),or(this,"workaroundData",void 0),or(this,"pinData",void 0),or(this,"updateData",void 0),or(this,"updateShader",void 0),or(this,"workaroundShader",void 0),or(this,"physPositions",void 0),or(this,"springTexture",void 0),or(this,"sizeTexture",void 0),or(this,"offsetTexture",void 0),or(this,"pinTexture",void 0),or(this,"addedNodes",void 0),or(this,"updateTexture",void 0),or(this,"enableVerlet",void 0);var I=E.state,F=E.webGLContext;if(Gr.info("layout - webGLContext",!!F),E.webGLContext===void 0)throw new Error("PhysLayout missing options: webGLContext - webgl context");if(E.state===void 0)throw new Error("PhysLayout missing options: state - state object");var q=F;this.checkCompatibility(q),this.printGlStats(q),this.physVbo=q.createBuffer(),q.bindBuffer(q.ARRAY_BUFFER,this.physVbo);var G=new Float32Array([0,0,rr,0,0,rr,rr,rr]);q.bufferData(q.ARRAY_BUFFER,G,q.STATIC_DRAW),this.physSmallVbo=q.createBuffer(),q.bindBuffer(q.ARRAY_BUFFER,this.physSmallVbo);var Y=new Float32Array([0,0,ca,0,0,ca,ca,ca]);q.bufferData(q.ARRAY_BUFFER,Y,q.STATIC_DRAW),this.physProjection=ou(),Ps(this.physProjection,0,rr,rr,0,0,1e6),this.physSmallProjection=ou(),Ps(this.physSmallProjection,0,ca,ca,0,0,1e6),q.disable(q.DEPTH_TEST),this.gl=q,this.useReadpixelWorkaround&&this.setupReadpixelWorkaround(),this.setupUpdates(),this.averageNodeSize=Zn,this.shouldUpdate=!0,this.iterationCount=0,this.lastSpeedValues=[],this.rollingAvgGraphSpeed=0,this.nodeVariation=0,this.nodeCenterPoint=[0,0],this.peakIterationMultiplier=160,this.setOptions(E,!0),this.definePhysicsArrays();var X=I.nodes,J=I.rels;X.addChannel(ho),J.addChannel(ho),this.stateDisposers=[],this.stateDisposers.push(I.reaction(function(){return I.graphUpdates},function(){var ie=X.channels[ho];if(X.version!==void 0&&ie){var ce=Object.values(ie.adds).length>0,ge=Object.values(ie.removes).length>0,le=Object.values(ie.updates),ye=pe(le);(ce||ge||ye)&&(M.shouldUpdate=!0,M.checkForUpdates())}var De=J.channels[ho];if(J.version!==void 0&&De){var Ne=Object.values(De.adds).length>0,Fe=Object.values(De.removes).length>0;(Ne||Fe)&&(M.shouldUpdate=!0,M.checkForUpdates())}})),this.setData({nodes:X.items,rels:J.items}),this.state=I,this.dpr=window.devicePixelRatio||1}var _,O;return _=g,O=[{key:"setOptions",value:function(E){var M=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(E){var I=E.intelWorkaround,F=E.simulationStopVelocity,q=E.gravity,G=E.enableVerlet,Y=G!==void 0&&G;M&&(this.intelWorkaround=I,this.enableVerlet=Y);var X=this.enableVerlet?.25:F??100;this.simulationStopVelocitySquared=X*X,this.gravity=q??100,this.force=0}}},{key:"setData",value:function(E){var M=gf(E.nodes),I=M.nodeIdToIndex,F=M.nodeIndexToId;return this.nodeIdToIndex=I,this.nodeIndexToId=F,this.numNodes=E.nodes.length,this.solarMerger=new ep(E,I),this.solarMerger.coarsenTo(1),this.subGraphs=this.solarMerger.subGraphs,this.nodeSortMap=this.solarMerger.nodeSortMap,this.setupSprings(this.subGraphs[0]),this.setupSize(this.subGraphs[0]),this.setupPhysics(),this.firstUpdate=!0,this.curPhysData=0,this.shouldUpdate=!0,this.iterationCount=0,this.subGraphs[0]}},{key:"update",value:function(){var E=arguments.length>0&&arguments[0]!==void 0&&arguments[0],M=this.gl;if(this.checkForUpdates(E),!this.shouldUpdate)return M.bindFramebuffer(M.FRAMEBUFFER,this.getPhysData(0).frameBuffer),M.readPixels(0,0,rr,rr,M.RGBA,M.FLOAT,this.physPositions),!1;M.disable(M.BLEND);for(var I=this.nodeVariation/(this.numNodes||1)>.3,F=this.getScaleNumber(this.iterationCount),q=this.subGraphs?this.subGraphs.length:0,G=this.getPhysData(0).texture,Y=q-1;Y>0;Y--){var X=this.subGraphs[Y].nodes.length,J=Y===q-1;this.apprxRepForceShader.use(),this.apprxRepForceShader.setUniform("u_physData",G),this.apprxRepForceShader.setUniform("u_clusterData",this.levelsClusterTexture[Y]),this.apprxRepForceShader.setUniform("u_finestIndexes",this.levelsFinestIndexTexture[Y]),this.apprxRepForceShader.setUniform("u_prevForce",J?this.initalLevelTexture:this.levelsData[Y+1].texture),this.apprxRepForceShader.setUniform("u_numNodes",X),this.apprxRepForceShader.setUniform("u_iterationMultiplier",F),this.apprxRepForceShader.setUniform("u_baseLength",this.getBaseLength(X)),this.apprxRepForceShader.setUniform("u_isTopLevel",J?1:0),M.bindBuffer(M.ARRAY_BUFFER,this.physSmallVbo),this.apprxRepForceShader.setAttributePointer("a_position",2,0,2),M.bindFramebuffer(M.FRAMEBUFFER,this.levelsData[Y].frameBuffer),M.viewport(0,0,ca,ca),M.drawArrays(M.TRIANGLE_STRIP,0,4)}if(this.collisionDetectionMultiplier=0,this.collisionDetectionMultiplier=I?Math.min(this.iterationCount/Math.min(this.numNodes,300),1):1,this.force=q<=1?this.initalLevelTexture:this.levelsData[1].texture,this.physShader.use(),this.physShader.setUniform("u_prevForce",q<=1?this.initalLevelTexture:this.levelsData[1].texture),this.physShader.setUniform("u_connections",this.springTexture),this.physShader.setUniform("u_sizeTexture",this.sizeTexture),this.physShader.setUniform("u_connectionOffsets",this.offsetTexture),this.physShader.setUniform("u_physData",G),this.physShader.setUniform("u_pinnedNodes",this.pinTexture),this.physShader.setUniform("u_iterationMultiplier",F),this.physShader.setUniform("u_curIteration",this.iterationCount),this.physShader.setUniform("u_numNodes",this.numNodes),this.physShader.setUniform("u_clusterData",this.levelsClusterTexture[0]),this.physShader.setUniform("u_collisionMultiplier",this.collisionDetectionMultiplier),this.physShader.setUniform("u_baseLength",this.getBaseLength()),this.firstUpdate=!1,M.bindBuffer(M.ARRAY_BUFFER,this.physVbo),this.physShader.setAttributePointer("a_position",2,0,2),M.bindFramebuffer(M.FRAMEBUFFER,this.getPhysData(1).frameBuffer),M.viewport(0,0,rr,rr),M.drawArrays(M.TRIANGLE_STRIP,0,4),this.useReadpixelWorkaround?this.doReadpixelWorkaround():(M.bindFramebuffer(M.FRAMEBUFFER,this.getPhysData(0).frameBuffer),M.readPixels(0,0,rr,rr,M.RGBA,M.FLOAT,this.physPositions)),this.curPhysData=(this.curPhysData+1)%this.physData.length,this.iterationCount+=1,this.numNodes<2)this.shouldUpdate=!1,this.iterationCount=0;else if(this.iterationCount%5==0){var ie=this.iterationCount<300,ce=ie?this.getMaxSpeedSquared():this.getMedianSpeedSquared(this.addedNodes);this.lastSpeedValues.push(ce),this.rollingAvgGraphSpeed=this.lastSpeedValues.reduce(function(ye,De){return ye+De},0)/this.lastSpeedValues.length;var ge=ie&&ce>=this.rollingAvgGraphSpeed,le=this.simulationStopVelocitySquared&&this.rollingAvgGraphSpeed<this.simulationStopVelocitySquared;this.lastSpeedValues.length>20&&this.lastSpeedValues.shift(),!ge&&le===!0&&this.iterationCount>2&&this.terminateUpdate()}return this.shouldUpdate}},{key:"terminateUpdate",value:function(){Gr.info("Cooling down after ".concat(this.iterationCount," iterations at graph speed of ").concat(Math.sqrt(this.rollingAvgGraphSpeed))),this.shouldUpdate=!1,this.iterationCount=0,this.rollingAvgGraphSpeed=0,this.lastSpeedValues=[],this.addedNodes=null,this.nodeVariation=0}},{key:"getShouldUpdate",value:function(){return this.shouldUpdate}},{key:"getComputing",value:function(){return!1}},{key:"getNodePositions",value:function(E){var M=[];if(this.useReadpixelWorkaround){var I,F=La(E);try{for(F.s();!(I=F.n()).done;){var q=I.value,G=this.nodeIdToIndex[q.id],Y=q.id,X=void 0,J=void 0;G!==void 0&&(X=this.workaroundData[0].dataFloat[G],J=this.workaroundData[1].dataFloat[G]),M.push({id:Y,x:X,y:J})}}catch(Fe){F.e(Fe)}finally{F.f()}}else{var ie,ce=La(E);try{for(ce.s();!(ie=ce.n()).done;){var ge=ie.value,le=this.nodeIdToIndex[ge.id],ye=ge.id,De=void 0,Ne=void 0;le!==void 0&&(De=this.physPositions[4*le+0],Ne=this.physPositions[4*le+1]),M.push({id:ye,x:De,y:Ne})}}catch(Fe){ce.e(Fe)}finally{ce.f()}}return M}},{key:"reheat",value:function(E){this.setupSize(this.subGraphs[0]),this.shouldUpdate=!0,this.iterationCount=0,this.nodeVariation=E.nodes.length}},{key:"updateNodes",value:function(E){var M=this.gl,I=new Set;M.bindTexture(M.TEXTURE_2D,this.getPhysData().texture);var F,q=La(E);try{for(q.s();!(F=q.n()).done;){var G=F.value,Y=this.nodeIdToIndex[G.id];if(G.x!==void 0&&G.y!==void 0){vo[0]=G.x,vo[1]=G.y,vo[2]=0,vo[3]=0;var X=Y%rr,J=(Y-X)/rr;M.texSubImage2D(M.TEXTURE_2D,0,X,J,1,1,M.RGBA,M.FLOAT,vo),this.useReadpixelWorkaround?(this.workaroundData[0].dataFloat[Y]=G.x,this.workaroundData[1].dataFloat[Y]=G.y):(this.physPositions[4*Y+0]=G.x,this.physPositions[4*Y+1]=G.y)}G.pinned!==void 0&&(this.pinData[Y]=G.pinned?255:0),Object.keys(G).forEach(function(ie){return I.add(ie)})}}catch(ie){q.e(ie)}finally{q.f()}I.has("pinned")&&(M.bindTexture(M.TEXTURE_2D,this.pinTexture),M.texImage2D(M.TEXTURE_2D,0,M.ALPHA,rr,rr,0,M.ALPHA,M.UNSIGNED_BYTE,this.pinData)),(I.has("x")||I.has("y")||I.has("size"))&&(this.shouldUpdate=!0,this.iterationCount=0)}},{key:"addRemoveData",value:function(E,M){var I=this.gl;this.numNodes=E.nodes.length,this.physShader.use(),this.physShader.setUniform("u_numNodes",this.numNodes),this.physShader.setUniform("u_baseLength",this.getBaseLength());var F=gf(E.nodes).nodeIdToIndex,q=new ep(E,F);q.coarsenTo(1);var G=q.subGraphs[0],Y=this.subGraphs[0],X=function(St){return Y.nodes.findIndex(function(Pe){return Pe.id===St})},J=Object.values(M.adds),ie=Object.values(M.removes);this.addedNodes=J.length>0?{}:null,this.nodeVariation=J.length+ie.length;for(var ce,ge=3*Math.sqrt(E.nodes.length),le={x:0,y:0},ye=G.nodes.length,De=new Uint8Array(65536),Ne=0;Ne<ye;Ne++){var Fe=0,je=0,Xe=G.nodes[Ne];if(ce=Xe.id,!!M.adds[ce]){if(this.addedNodes[Ne]=Xe.id,Fe=Xe.position?Xe.position.x:void 0,je=Xe.position?Xe.position.y:void 0,Fe===void 0||je===void 0){var Ve=q.sunMap,$e=void 0;for($e=Ve[Xe.id];$e!==void 0;$e=Ve[$e]){var Ke=X($e);if(Ke!==-1){var qe=this.getNodePosition(Ke);Fe=qe.x+10*(Math.random()-.5),je=qe.y+10*(Math.random()-.5);break}}$e===void 0&&(Fe=this.nodeCenterPoint[0]+ge*(Math.random()-.5),je=this.nodeCenterPoint[1]+ge*(Math.random()-.5))}this.updateData[2*Ne]=Fe,this.updateData[2*Ne+1]=je,De[Ne]=Xe.pinned?255:0}else{var tt=X(Xe.id),mt=this.getNodePosition(tt);Fe=mt.x,je=mt.y,this.updateData[2*Ne]=tt,this.updateData[2*Ne+1]=999999,De[Ne]=this.pinData[tt]}le.x+=Fe||0,le.y+=je||0}this.nodeCenterPoint=ye?[le.x/ye,le.y/ye]:[0,0],this.pinData=De,this.subGraphs=q.subGraphs,this.nodeSortMap=q.nodeSortMap,this.setupSprings(this.subGraphs[0]),this.setupSize(this.subGraphs[0]);var It=gf(this.subGraphs[0].nodes),bt=It.nodeIdToIndex,Nt=It.nodeIndexToId;return this.nodeIdToIndex=bt,this.nodeIndexToId=Nt,I.bindTexture(I.TEXTURE_2D,this.updateTexture),I.texImage2D(I.TEXTURE_2D,0,I.ALPHA,rr,rr,0,I.ALPHA,I.FLOAT,this.updateData),Gr.info("Setting gravity center to ",this.nodeCenterPoint),this.physShader.setUniform("u_gravityCenter",this.nodeCenterPoint),this.updateShader.use(),this.updateShader.setUniform("u_numNodesNew",G.nodes.length),this.updateShader.setUniform("u_physData",this.getPhysData(0).texture),this.updateShader.setUniform("u_updateData",this.updateTexture),I.disable(I.BLEND),I.bindBuffer(I.ARRAY_BUFFER,this.physVbo),this.updateShader.setAttributePointer("a_position",2,0,2),I.bindFramebuffer(I.FRAMEBUFFER,this.getPhysData(1).frameBuffer),I.viewport(0,0,rr,rr),I.drawArrays(I.TRIANGLE_STRIP,0,4),this.curPhysData=(this.curPhysData+1)%this.physData.length,this.useReadpixelWorkaround?this.doReadpixelWorkaround():(I.bindFramebuffer(I.FRAMEBUFFER,this.getPhysData().frameBuffer),I.readPixels(0,0,rr,rr,I.RGBA,I.FLOAT,this.physPositions)),(J.length>0||ie.length>0)&&(I.bindTexture(I.TEXTURE_2D,this.pinTexture),I.texImage2D(I.TEXTURE_2D,0,I.ALPHA,rr,rr,0,I.ALPHA,I.UNSIGNED_BYTE,this.pinData)),this.shouldUpdate=!0,this.iterationCount=0,this.setupPhysicsForCoarse(),this.subGraphs[0]}},{key:"destroy",value:function(){var E=this;this.gl.deleteBuffer(this.physVbo),this.gl.deleteBuffer(this.physSmallVbo),this.physData.forEach(function(M){E.gl.deleteFramebuffer(M.frameBuffer),E.gl.deleteTexture(M.texture)}),this.levelsData.forEach(function(M){E.gl.deleteFramebuffer(M.frameBuffer),E.gl.deleteTexture(M.texture)}),this.levelsClusterTexture.forEach(function(M){E.gl.deleteTexture(M)}),this.levelsFinestIndexTexture.forEach(function(M){E.gl.deleteTexture(M)}),this.gl.deleteTexture(this.initalLevelTexture),this.gl.deleteTexture(this.sizeTexture),this.gl.deleteTexture(this.offsetTexture),this.gl.deleteTexture(this.springTexture),this.gl.deleteTexture(this.pinTexture),this.gl.deleteTexture(this.updateTexture),this.apprxRepForceShader!==void 0&&this.apprxRepForceShader.remove(),this.updateShader!==void 0&&this.updateShader.remove(),this.physShader!==void 0&&this.physShader.remove(),this.physPositions=null,this.gl=null,this.stateDisposers.forEach(function(M){M()}),this.state.nodes.removeChannel(ho),this.state.rels.removeChannel(ho)}},{key:"dumpTexture",value:function(E,M,I){var F=this.gl;Gr.info("--- Dumping texture ",I),F.bindFramebuffer(F.FRAMEBUFFER,E),F.readPixels(0,0,rr,rr,F.RGBA,F.FLOAT,this.physPositions);for(var q=0;q<M;q++)Gr.info(q,": ",this.physPositions[4*q+0],this.physPositions[4*q+1],this.physPositions[4*q+2],this.physPositions[4*q+3])}},{key:"getScaleNumber",value:function(E){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(I,F,q){return q+Math.pow(10,6)*Math.pow(I-120,-1.7)};return E===0?0:E<300?200+-1/Math.pow(10,5)*3*Math.pow(Math.abs(E-200+12),3):M(E,200,10)}},{key:"getBaseLength",value:function(E){if(E===void 0||E===this.numNodes)return 100*this.dpr;var M=Math.pow(this.averageNodeSize/2,2)*Math.PI,I=this.numNodes/E*M;return(100+Math.sqrt(I/Math.PI)/2/E)*this.dpr}},{key:"checkForUpdates",value:function(){var E=arguments.length>0&&arguments[0]!==void 0&&arguments[0],M=this.state,I=M.nodes,F=M.rels,q={nodes:I.items,rels:F.items},G=Object.values(I.channels[ho].adds).length>0,Y=Object.values(F.channels[ho].adds).length>0,X=Object.values(I.channels[ho].removes).length>0,J=Object.values(F.channels[ho].removes).length>0,ie=Object.values(I.channels[ho].updates);(G||Y||X||J)&&this.addRemoveData(q,{adds:I.channels[ho].adds,removes:I.channels[ho].removes}),E?(this.updateNodes(q.nodes),this.reheat(q)):ie.length>0&&(this.updateNodes(ie),pe(ie)&&this.reheat(q)),I.clearChannel(ho),F.clearChannel(ho)}},{key:"getNodePosition",value:function(E){return this.useReadpixelWorkaround?{x:this.workaroundData[0].dataFloat[E],y:this.workaroundData[1].dataFloat[E]}:{x:this.physPositions[4*E+0],y:this.physPositions[4*E+1]}}},{key:"getMaxSpeedSquared",value:function(){var E=0;if(this.useReadpixelWorkaround)for(var M=0;M<this.numNodes;M++){var I=this.workaroundData[2].dataFloat[M],F=this.workaroundData[3].dataFloat[M],q=I*I+F*F;q>E&&(E=q)}else for(var G=0;G<this.numNodes;G++){var Y=this.physPositions[4*G+2],X=this.physPositions[4*G+3],J=Y*Y+X*X;J>E&&(E=J)}return E}},{key:"getMedianSpeedSquared",value:function(E){var M=[];if(this.useReadpixelWorkaround)for(var I=0;I<this.numNodes;I++){var F=this.workaroundData[2].dataFloat[I],q=this.workaroundData[3].dataFloat[I],G=F*F+q*q;M[I]=G}else for(var Y=0;Y<this.numNodes;Y++)if(!E||E[Y]){var X=this.physPositions[4*Y+2],J=this.physPositions[4*Y+3],ie=X*X+J*J;M.push(ie)}return M.sort(function(ce,ge){return ce-ge}),M[Math.floor(M.length/2)]}},{key:"getPhysData",value:function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.physData[(this.curPhysData+E)%this.physData.length]}},{key:"newTexture",value:function(E,M,I){var F=arguments.length>3&&arguments[3]!==void 0?arguments[3]:E.FLOAT,q=arguments.length>4&&arguments[4]!==void 0?arguments[4]:E.RGBA,G=E.createTexture();return E.bindTexture(E.TEXTURE_2D,G),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.NEAREST),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,E.NEAREST),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),E.texImage2D(E.TEXTURE_2D,0,q,I,I,0,q,F,M),G}},{key:"newFramebuffer",value:function(E,M){var I=E.createFramebuffer();return E.bindFramebuffer(E.FRAMEBUFFER,I),E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_2D,M,0),I}},{key:"checkCompatibility",value:function(E){function M(X){throw new ml(X)}E||M("Could not initialize WebGL"),E.getParameter(E.MAX_VERTEX_TEXTURE_IMAGE_UNITS)===0&&M("Vertex shader texture access not available"),E.getExtension("OES_texture_float")||M("OES_texture_float extension not available"),E.getExtension("WEBGL_color_buffer_float")||(Gr.info("gl.readPixels doesnt work for float texture, activating workaround"),this.useReadpixelWorkaround=!0);var I=E.getParameter(E.MAX_TEXTURE_SIZE),F=Math.max(rr,io);if(I<F&&M("Need larger WebGL texture support. Avaliable: ".concat(I," needed: ").concat(F)),!this.useReadpixelWorkaround){var q=new Float32Array(4),G=this.newTexture(E,q,1),Y=this.newFramebuffer(E,G);E.bindFramebuffer(E.FRAMEBUFFER,Y),E.readPixels(0,0,1,1,E.RGBA,E.FLOAT,q),E.getError()!==E.NO_ERROR&&(Gr.info("gl.readPixels doesnt work for float texture, activating workaround"),this.useReadpixelWorkaround=!0),E.bindFramebuffer(E.FRAMEBUFFER,null),E.deleteFramebuffer(Y),E.deleteTexture(G)}}},{key:"printGlStats",value:function(E){var M="?",I="?";if(E.getParameter(E.RENDERER))I=E.getParameter(E.RENDERER),M=E.getParameter(E.VENDOR);else{var F=E.getExtension("WEBGL_debug_renderer_info");F&&(M=E.getParameter(F.UNMASKED_VENDOR_WEBGL),I=E.getParameter(F.UNMASKED_RENDERER_WEBGL))}Gr.trace("Vendor: ".concat(M)),Gr.trace("Renderer: ".concat(I));var q=E.getParameter(E.ALIASED_LINE_WIDTH_RANGE);Gr.trace("Line width range: ".concat(q));var G=E.getSupportedExtensions();Gr.trace("Extentions:"),G.length>0&&G.forEach(function(Y){return Gr.trace(Y)})}},{key:"adjustToGlSize",value:function(E){return E*this.dpr*2.5}},{key:"setupSize",value:function(){for(var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{nodes:[]},M=new Float32Array(65536),I=E.nodes,F=I.length,q=0,G=0;G<F;G++){var Y,X=parseInt((Y=I[G].size)!==null&&Y!==void 0?Y:Zn,10);M[G]=this.adjustToGlSize(X),q+=X}this.averageNodeSize=F?q/F:Zn;var J=this.gl;this.sizeTexture===void 0&&(this.sizeTexture=J.createTexture()),J.bindTexture(J.TEXTURE_2D,this.sizeTexture),J.texImage2D(J.TEXTURE_2D,0,J.ALPHA,rr,rr,0,J.ALPHA,J.FLOAT,M),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MAG_FILTER,J.NEAREST),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MIN_FILTER,J.NEAREST),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_S,J.CLAMP_TO_EDGE),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_T,J.CLAMP_TO_EDGE)}},{key:"setupSprings",value:function(E){var M,I,F=this.gl,q=E.relationships,G=new Float32Array(16777216),Y=new Float32Array(65536),X=0;for(M=0;M<E.nodes.length;M++)for(Y[M]=X,G[X]=q[M].length,X+=1,I=0;I<q[M].length;I++)G[X]=q[M][I],X+=1;for(I=X;I<G.length;I++)G[I]=1;for(I=M;I<Y.length;I++)Y[I]=0;this.offsetTexture===void 0&&(this.offsetTexture=F.createTexture()),F.bindTexture(F.TEXTURE_2D,this.offsetTexture),F.texImage2D(F.TEXTURE_2D,0,F.ALPHA,rr,rr,0,F.ALPHA,F.FLOAT,Y),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MAG_FILTER,F.NEAREST),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MIN_FILTER,F.NEAREST),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_S,F.CLAMP_TO_EDGE),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_T,F.CLAMP_TO_EDGE),this.springTexture===void 0&&(this.springTexture=F.createTexture()),F.bindTexture(F.TEXTURE_2D,this.springTexture),F.texImage2D(F.TEXTURE_2D,0,F.ALPHA,io,io,0,F.ALPHA,F.FLOAT,G),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MAG_FILTER,F.NEAREST),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MIN_FILTER,F.NEAREST),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_S,F.CLAMP_TO_EDGE),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_T,F.CLAMP_TO_EDGE)}},{key:"setupPhysics",value:function(){this.setupPhysicsForCoarse(),this.setupPhysicsForNodes(),this.physPositions=new Float32Array(262144),this.setupPinData()}},{key:"setupPhysicsForNodes",value:function(){var E=this.gl,M=this.subGraphs.length,I=this.subGraphs[0].nodes,F=3*Math.sqrt(I.length),q=new Float32Array(262144),G=new Float32Array(262144);this.numNodes=I.length;for(var Y=0;Y<262144;Y++)q[Y]=0,G[Y]=0;for(var X=function(De,Ne,Fe,je){je[4*De+0]=Ne,je[4*De+1]=Fe,je[4*De+2]=0,je[4*De+3]=0},J=M-1;J>=0;J--){var ie=J===M-1?[]:this.subGraphs[J+1].nodes;ie.length===0?this.subGraphs[J].nodes.forEach(function(De,Ne){var Fe=De.placement?De.placement.x:F*(Math.random()-.5),je=De.placement?De.placement.y:F*(Math.random()-.5);X(De.finestIndex===void 0?Ne:De.finestIndex,Fe,je,q)}):ie.forEach(function(De){var Ne=De.finestIndex,Fe=q[4*De.finestIndex],je=q[4*De.finestIndex+1],Xe=pf({x:Fe,y:je},10,De.planets.length+1);Ne+=1,De.planets.forEach(function(Ve,$e){var Ke=Xe[$e];X(Ne+=1,Ke.x,Ke.y,q);var qe=pf({x:Ke.x,y:Ke.y},10,Ve.moons.length+1);Ve.moons.forEach(function(tt,mt){var It=qe[mt];X(Ne+=1,It.x,It.y,q)})})})}this.physData=[];for(var ce=0;ce<2;ce++){var ge=this.newTexture(E,ce===0?q:G,rr),le=this.newFramebuffer(E,ge);this.physData.push({texture:ge,frameBuffer:le})}var ye=this.enableVerlet?`precision mediump float;

uniform sampler2D u_physData;
uniform sampler2D u_connections;
uniform sampler2D u_connectionOffsets;
uniform sampler2D u_pinnedNodes;
uniform sampler2D u_sizeTexture;
uniform float u_baseLength;
uniform float u_curIteration;
uniform float u_iterationMultiplier;
uniform vec2 u_gravityCenter;
uniform float u_numNodes;
uniform float u_gravity;

uniform sampler2D u_clusterData;
uniform sampler2D u_prevForce;
uniform float u_collisionMultiplier;


float DAMP = 0.6;
float COOL = 0.99998;
float TEMP = max(0.02, pow(COOL, u_curIteration));
float TIMESTEP = 1.0 / 30.0;
float VELOCITYDECAY = 0.6;
float accLimitLow = 500000.0;
float accLimitHigh = 750000.0;
float accLimitPosHigh = 10000000.0;

const float denseNodeThreshold = 1000.0;
const float MIN_DISTANCE = 0.00000001;
const float MAX_DISTANCE = 1000000000.0;
const float MAX_ACCELERATION = 50000.0;

vec4 getTextureData(sampler2D texture, float index, float base) {
  float x = mod(index, base);
  float y = (index - x) / base;
  return texture2D(texture, vec2(x + 0.5, y + 0.5) / base);
}

bool isNan(float val) {
  return (val < 0.0 || 0.0 < val || val == 0.0) ? false : true;
}

const float BIG_NUMBER = 999999999999999999.0;
bool isInf(float val) {
  return val > BIG_NUMBER || val < -BIG_NUMBER;
}

vec2 getDelta(vec2 v1, vec2 v2) {
  vec2 delta = v1 - v2;
  float dist = length(delta);
  if (dist < MIN_DISTANCE || isNan(dist)) {
    return vec2(MIN_DISTANCE, MIN_DISTANCE);
  }
  if (dist > MAX_DISTANCE) {
    vec2 normDelta = delta / dist;
    return normDelta * MAX_DISTANCE;
  }
  return delta;
}

vec4 getOtherNodePosition(float i) {
  return getTextureData(u_physData, i, 256.0);
}

float getCombinedNodeSize(float i, float nodeSize) {
  float otherNodeSize = getTextureData(u_sizeTexture, i, 256.0).a;
  return nodeSize + otherNodeSize;
}

vec2 getSpringForce(float curConnection, float numConnections, float springFScale, vec4 myPosition, float i) {
  float curSpring = getTextureData(u_connections, curConnection + i, 4096.0).a;

  vec4 otherPosition = getTextureData(u_physData, curSpring, 256.0);
  float otherDataPosition = getTextureData(u_connectionOffsets, curSpring, 256.0).a;
  float avgDegree;
#if INTEL_WORKAROUND
    avgDegree = max(numConnections, 4.0);
#else
    float otherNumConnections = getTextureData(u_connections, otherDataPosition, 4096.0).a;
    avgDegree = max((otherNumConnections + numConnections * 3.0) / 4.0, 4.0);
#endif

  vec2 delta = getDelta(myPosition.xy, otherPosition.xy);
  float dist = length(delta);

  float F = (dist * dist * springFScale) / (u_baseLength * avgDegree);
  if (u_collisionMultiplier > 0.0) {
    F *= u_collisionMultiplier;
  }
  return (-delta / dist) * F;
}

vec2 getCollisionForce(float combinedNodeSize, float dist, float fScale, vec2 delta) {
  float collisionForce = (combinedNodeSize - dist) / (dist);
  if (u_collisionMultiplier > 0.0) {
    collisionForce *= u_collisionMultiplier;
  }
  return (delta * collisionForce * fScale * combinedNodeSize) / (combinedNodeSize + 1.0);
}

vec2 getRepulsionForce(float dist, float fScale, vec2 delta) {
  float F = (u_baseLength * u_baseLength * fScale) / (dist);
  return (delta / dist) * F * 0.05;
}

void main(void) {
  float textureSide = 256.0; //#TEXTURE_SIDE#;
  float index = (gl_FragCoord.x - 0.5) + (gl_FragCoord.y - 0.5) * textureSide;

  if (index >= u_numNodes) {
    discard;
  }

  vec4 clusterData = getTextureData(u_clusterData, index, 256.0);

  float clusterIndex = clusterData.x;
  float clusterStartIndex = clusterData.y;
  float clusterSize = clusterData.z;
  float clusterWeight = clusterData.w;

  vec4 myPosition = getTextureData(u_physData, index, 256.0);
  vec4 previousForce = getTextureData(u_prevForce, clusterIndex, 256.0);

  vec2 acceleration = previousForce.xy;

  float isPinned = getTextureData(u_pinnedNodes, index, 256.0).a;
  float nodeSize = getTextureData(u_sizeTexture, index, 256.0).a;

  if (isPinned > 0.5) {
    gl_FragColor = vec4(myPosition.xy, 0.0, 0.0);
    return;
  }

  float curConnection = getTextureData(u_connectionOffsets, index, 256.0).a;
  float numConnections = getTextureData(u_connections, curConnection, 4096.0).a;

  float fScale = 1.0 + sqrt(u_iterationMultiplier);
  float springFScale = fScale;

  if (numConnections > denseNodeThreshold) {
    springFScale = sqrt(fScale);
  }

  float numOfRels = 0.0;

  // Springs
  for (float i = 1.0; i <= 256.0 * 256.0; i++) {
    if (numOfRels >= numConnections) {
      break;
    }
    acceleration += getSpringForce(curConnection, numConnections, springFScale, myPosition, i);
    numOfRels += 1.0;
  }

  // Repulsion && collision detection
  if (u_collisionMultiplier > 0.0) {
    float number_of_collisions = 0.0;
    for (float i = 0.0; i < 256.0 * 256.0; i++) {
      if (i >= u_numNodes) {
        break;
      }

      if (i == index) {
        continue;
      }

      vec4 otherPosition = getOtherNodePosition(i);
      vec2 delta = getDelta(myPosition.xy, otherPosition.xy);
      float dist = length(delta);
      float combinedNodeSize = getCombinedNodeSize(i, nodeSize) * 2.0;

      if (dist < combinedNodeSize && number_of_collisions < 40.0) {
        number_of_collisions++;
        acceleration += getCollisionForce(combinedNodeSize, dist, fScale, delta);
      }

      if (i >= clusterStartIndex && i < clusterStartIndex + clusterSize) {
        acceleration += getRepulsionForce(dist, fScale, delta);
      }
    }
  } else {
    for (float i = 0.0; i < 256.0 * 256.0; i++) {
      if (i >= clusterStartIndex + clusterSize || i >= u_numNodes) {
        break;
      }

      if (i < clusterStartIndex || i == index) {
        continue;
      }

      vec4 otherPosition = getOtherNodePosition(i);
      vec2 delta = getDelta(myPosition.xy, otherPosition.xy);
      float dist = length(delta);
      float combinedNodeSize = getCombinedNodeSize(i, nodeSize);

      if (dist < combinedNodeSize) {
        acceleration += getCollisionForce(combinedNodeSize, dist, fScale, delta);
      }

      acceleration += getRepulsionForce(dist, fScale, delta);
    }
  }

  // Gravity
  vec2 delta = getDelta(u_gravityCenter, myPosition.xy);
  float dist = length(delta);

  vec2 grav = (delta / dist) * u_gravity * fScale;
  acceleration += grav * smoothstep(0.0, 500.0, dist);

  float accMagnitude = length(acceleration);
  acceleration *= min(MAX_ACCELERATION, accMagnitude) / accMagnitude;

  float iterationFrictionThreshold = 1000.0;

  if (u_curIteration > iterationFrictionThreshold) {
    float friction = 1.0 + pow((u_curIteration - iterationFrictionThreshold), 2.0) / 100.0;
    acceleration *= 1.0 / friction;
  }

  if (u_curIteration == 0.0) {
    gl_FragColor = vec4(myPosition.xy, myPosition.zw);
  } else {
    vec2 prevVelocity = myPosition.zw;
    vec2 currentPos = myPosition.xy;
    vec2 prevPos = currentPos - prevVelocity;

    vec2 newPos = currentPos + TEMP * ( DAMP * (prevVelocity) + acceleration * TIMESTEP * TIMESTEP);
    vec2 newVelocity = newPos - currentPos;
    gl_FragColor = vec4(newPos, newVelocity);
  }
}`:`precision mediump float;

uniform sampler2D u_physData;
uniform sampler2D u_connections;
uniform sampler2D u_connectionOffsets;
uniform sampler2D u_pinnedNodes;
uniform sampler2D u_sizeTexture;
uniform float u_baseLength;
uniform float u_curIteration;
uniform float u_iterationMultiplier;
uniform vec2 u_gravityCenter;
uniform float u_numNodes;
uniform float u_gravity;

uniform sampler2D u_clusterData;
uniform sampler2D u_prevForce;
uniform float u_collisionMultiplier;

float TIMESTEP = 1.0 / 30.0;
float VELOCITYDECAY = 0.6;
float accLimitLow = 500000.0;
float accLimitHigh = 750000.0;
float accLimitPosHigh = 10000000.0;

const float denseNodeThreshold = 1000.0;
const float MIN_DISTANCE = 0.00000001;
const float MAX_DISTANCE = 1000000000.0;
const float MAX_ACCELERATION = 500000.0;

vec4 getTextureData(sampler2D texture, float index, float base) {
  float x = mod(index, base);
  float y = (index - x) / base;
  return texture2D(texture, vec2(x + 0.5, y + 0.5) / base);
}

bool isNan(float val) {
  return (val < 0.0 || 0.0 < val || val == 0.0) ? false : true;
}

const float BIG_NUMBER = 999999999999999999.0;
bool isInf(float val) {
  return val > BIG_NUMBER || val < -BIG_NUMBER;
}

vec2 getDelta(vec2 v1, vec2 v2) {
  vec2 delta = v1 - v2;
  float dist = length(delta);
  if (dist < MIN_DISTANCE || isNan(dist)) {
    return vec2(MIN_DISTANCE, MIN_DISTANCE);
  }
  if (dist > MAX_DISTANCE) {
    vec2 normDelta = delta / dist;
    return normDelta * MAX_DISTANCE;
  }
  return delta;
}

vec4 getOtherNodePosition(float i) {
  return getTextureData(u_physData, i, 256.0);
}

float getCombinedNodeSize(float i, float nodeSize) {
  float otherNodeSize = getTextureData(u_sizeTexture, i, 256.0).a;
  return nodeSize + otherNodeSize;
}

vec2 getSpringForce(float curConnection,  float numConnections, float springFScale, vec4 myPosition, float i) {
  float curSpring = getTextureData(u_connections, curConnection + i, 4096.0).a;

  vec4 otherPosition = getTextureData(u_physData, curSpring, 256.0);
  float otherDataPosition = getTextureData(u_connectionOffsets, curSpring, 256.0).a;
  float avgDegree;
#if INTEL_WORKAROUND
    avgDegree = max(numConnections, 4.0);
#else
    float otherNumConnections = getTextureData(u_connections, otherDataPosition, 4096.0).a;
    avgDegree = max((otherNumConnections + numConnections * 3.0) / 4.0, 4.0);
#endif

  vec2 delta = getDelta(myPosition.xy, otherPosition.xy);
  float dist = length(delta);

  float F = (dist * dist * springFScale) / (u_baseLength * avgDegree);
  if (u_collisionMultiplier > 0.0) {
    F *= u_collisionMultiplier;
  }
  return (-delta / dist) * F;
}

vec2 getCollisionForce(float combinedNodeSize, float dist, float fScale, vec2 delta) {
  float collisionForce = ((combinedNodeSize - dist) / dist);
  if (u_collisionMultiplier > 0.0) {
    collisionForce *= u_collisionMultiplier;
  }
  return (delta * collisionForce * fScale * combinedNodeSize) / (combinedNodeSize + 1.0);
}

vec2 getRepulsionForce(float dist, float fScale, vec2 delta) {
  float F = (u_baseLength * u_baseLength * (fScale / 1.5)) / dist;
  return (delta / dist) * F * 0.05;
}

void main(void) {
  float textureSide = 256.0; //#TEXTURE_SIDE#;
  float index = (gl_FragCoord.x - 0.5) + (gl_FragCoord.y - 0.5) * textureSide;

  if (index >= u_numNodes) {
    discard;
  }

  vec4 clusterData = getTextureData(u_clusterData, index, 256.0);

  float clusterIndex = clusterData.x;
  float clusterStartIndex = clusterData.y;
  float clusterSize = clusterData.z;
  float clusterWeight = clusterData.w;

  vec4 myPosition = getTextureData(u_physData, index, 256.0);
  vec4 previousForce = getTextureData(u_prevForce, clusterIndex, 256.0);

  vec2 acceleration = previousForce.xy;

  float isPinned = getTextureData(u_pinnedNodes, index, 256.0).a;
  float nodeSize = getTextureData(u_sizeTexture, index, 256.0).a;

  if (isPinned > 0.5) {
    gl_FragColor = vec4(myPosition.xy, 0.0, 0.0);
    return;
  }

  float curConnection = getTextureData(u_connectionOffsets, index, 256.0).a;
  float numConnections = getTextureData(u_connections, curConnection, 4096.0).a;

  float fScale = 1.0 + sqrt(u_iterationMultiplier);
  float springFScale = fScale;

  if (numConnections > denseNodeThreshold) {
    springFScale = sqrt(fScale);
  }

  float numOfRels = 0.0;

  // Springs
  for (float i = 1.0; i <= 256.0 * 256.0; i++) {
    if (numOfRels >= numConnections) {
      break;
    }
    acceleration += getSpringForce(curConnection, numConnections, springFScale, myPosition, i);
    numOfRels += 1.0;
  }

  // Repulsion && collision detection
  if (u_collisionMultiplier > 0.0) {
    float number_of_collisions = 0.0;
    for (float i = 0.0; i < 256.0 * 256.0; i++) {
      if (i >= u_numNodes) {
        break;
      }

      if (i == index) {
        continue;
      }

      vec4 otherPosition = getOtherNodePosition(i);
      vec2 delta = getDelta(myPosition.xy, otherPosition.xy);
      float dist = length(delta);
      float combinedNodeSize = getCombinedNodeSize(i, nodeSize) * 2.0;

      if (dist < combinedNodeSize && number_of_collisions < 40.0) {
        number_of_collisions++;
        acceleration += getCollisionForce(combinedNodeSize, dist, fScale, delta);
      }

      if (i >= clusterStartIndex && i < clusterStartIndex + clusterSize) {
        acceleration += getRepulsionForce(dist, fScale, delta);
      }
    }
  } else {
    for (float i = 0.0; i < 256.0 * 256.0; i++) {
      if (i >= clusterStartIndex + clusterSize || i >= u_numNodes) {
        break;
      }

      if (i < clusterStartIndex || i == index) {
        continue;
      }

      vec4 otherPosition = getOtherNodePosition(i);
      vec2 delta = getDelta(myPosition.xy, otherPosition.xy);
      float dist = length(delta);
      float combinedNodeSize = getCombinedNodeSize(i, nodeSize);

      if (dist < combinedNodeSize) {
        acceleration += getCollisionForce(combinedNodeSize, dist, fScale, delta);
      }

      acceleration += getRepulsionForce(dist, fScale, delta);
    }
  }

  // Gravity
  vec2 delta = getDelta(u_gravityCenter, myPosition.xy);
  float dist = length(delta);

  vec2 grav = (delta / dist) * u_gravity * fScale;
  acceleration += grav * smoothstep(0.0, 500.0, dist);

  float accMagnitude = length(acceleration);
  acceleration *= min(MAX_ACCELERATION, accMagnitude) / accMagnitude;

  float iterationFrictionThreshold = 1000.0;

  if (u_curIteration > iterationFrictionThreshold) {
    float friction = 1.0 + pow((u_curIteration - iterationFrictionThreshold), 2.0) / 100.0;
    acceleration *= 1.0 / friction;
  }

  if (u_curIteration == 0.0) {
    gl_FragColor = vec4(myPosition.xy, acceleration * TIMESTEP * 0.5);
  } else {
    myPosition.zw = myPosition.zw * VELOCITYDECAY;
    gl_FragColor = vec4(myPosition.xy + myPosition.zw * TIMESTEP, myPosition.zw + acceleration * TIMESTEP);
  }
}`;this.physShader=new ua(E,vf,ye,{INTEL_WORKAROUND:this.intelWorkaround?1:0}),this.physShader.use(),this.physShader.setUniform("u_projection",this.physProjection),this.physShader.setUniform("u_baseLength",this.getBaseLength()),this.physShader.setUniform("u_connections",this.springTexture),this.physShader.setUniform("u_sizeTexture",this.sizeTexture),this.physShader.setUniform("u_connectionOffsets",this.offsetTexture),this.physShader.setUniform("u_pinnedNodes",this.pinTexture),this.physShader.setUniform("u_gravityCenter",this.nodeCenterPoint),this.physShader.setUniform("u_numNodes",this.numNodes),this.physShader.setUniform("u_gravity",this.gravity)}},{key:"setupPhysicsForCoarse",value:function(){var E=this,M=this.gl;this.levelsData=[],this.levelsClusterTexture=[],this.levelsFinestIndexTexture=[];var I,F,q=this.subGraphs.length,G=function(le,ye,De,Ne,Fe){I[4*le+0]=ye,I[4*le+1]=De,I[4*le+2]=Fe.size(),I[4*le+3]=Ne||1};if(q===1){I=new Float32Array(262144);var Y=this.subGraphs[0].nodes;Y.forEach(function(le,ye){G(ye,0,0,le.weight,{size:function(){return Y.length}})}),this.levelsClusterTexture[0]=this.newTexture(M,I,ca)}else for(var X=function(){var le=E.subGraphs[J].nodes,ye=J===E.subGraphs.length-1?[]:E.subGraphs[J+1].nodes;I=new Float32Array(262144),F=new Float32Array(65536);var De=0;if(ye.length>0){var Ne=ye.slice();Ne.sort(function(Xe,Ve){return Xe.previousIndex-Ve.previousIndex}),Ne.forEach(function(Xe,Ve){var $e=De,Ke=ye.indexOf(Xe);G(De,Ke,$e,le[Xe.id].weight,Xe),F[De]=le[De].finestIndex,De+=1,Xe.planets.forEach(function(qe){G(De,Ke,$e,qe.weight,Xe),F[De]=le[De].finestIndex,De+=1,qe.moons.forEach(function(tt){G(De,Ke,$e,tt.weight,Xe),F[De]=le[De].finestIndex,De+=1})})})}else le.forEach(function(Xe,Ve){G(Ve,0,0,Xe.weight,{size:function(){return le.length}}),F[Ve]=le[Ve].finestIndex});var Fe=E.newTexture(M,null,ca),je=E.newFramebuffer(M,Fe);E.levelsData[J]={texture:Fe,frameBuffer:je},E.levelsClusterTexture[J]=E.newTexture(M,I,ca),E.levelsFinestIndexTexture[J]=E.newTexture(M,F,rr,M.FLOAT,M.ALPHA)},J=this.subGraphs.length-1;J>=0;J--)X();for(var ie=new Float32Array(262144),ce=0;ce<ie.length;ce++)ie[ce]=0;this.initalLevelTexture=this.newTexture(M,ie,ca);var ge=this.enableVerlet?`precision mediump float;
uniform sampler2D u_physData;
uniform sampler2D u_clusterData;
uniform sampler2D u_finestIndexes;
uniform sampler2D u_prevForce;

uniform float u_baseLength;
uniform float u_numNodes;
uniform float u_iterationMultiplier;
uniform float u_isTopLevel;

float PI = 3.1415926535897932384626433832795;
float TIMESTEP = 1.0 / 30.0;
float VELOCITYDECAY = 1.0;

vec4 getTextureData(sampler2D texture, float index, float base) {
  float x = mod(index, base);
  float y = (index - x) / base;
  return texture2D(texture, vec2(x + 0.5, y + 0.5) / base);
}

float getSquaredLogClusterWeight(float value) {
  return pow(log(value), 2.0);
}

void main(void) {
  float index = (gl_FragCoord.x - 0.5) + (gl_FragCoord.y - 0.5) * 256.0;

  if (index >= u_numNodes) {
    discard;
  }

  vec4 clusterData = getTextureData(u_clusterData, index, 256.0);

  float clusterIndex = clusterData.x;
  float clusterStartIndex = clusterData.y;
  float clusterSize = clusterData.z;
  float clusterArea = pow(clusterSize + u_baseLength * 2.0, 2.0);

  float finestIndex = getTextureData(u_finestIndexes, index, 256.0).a;
  vec4 myPosition = getTextureData(u_physData, finestIndex, 256.0);
  vec4 previousForce = getTextureData(u_prevForce, clusterIndex, 256.0);
  float fScale = 1.0 + sqrt(u_iterationMultiplier);

  vec2 acceleration = previousForce.xy;

  // Repulsion & Collision Detection
  for (float i = 0.0; i < 256.0 * 256.0; i++) {
    if (i >= clusterStartIndex + clusterSize || i >= u_numNodes) {
      break;
    }
    if (i < clusterStartIndex || i == index) {
      continue;
    }

    vec4 otherClusterData = getTextureData(u_clusterData, i, 256.0);
    float otherClusterWeight = getSquaredLogClusterWeight(otherClusterData.w);

    float otherFinestIndex = getTextureData(u_finestIndexes, i, 256.0).a;
    vec4 otherPosition = getTextureData(u_physData, otherFinestIndex, 256.0);

    vec2 delta = myPosition.xy - otherPosition.xy;
    float dist = max(length(delta), 0.0000001);
    float maxDist = 25.0;
    float repulsionForceScale = 0.1;

    float F = (clusterArea * fScale) / (dist * dist);

    if (u_isTopLevel == 1.0) {
      repulsionForceScale = 0.2;
    }

    acceleration += ((delta / sqrt(dist)) * F) * repulsionForceScale * otherClusterWeight;

    if (dist < maxDist) {
      float collide = (maxDist - dist) / (dist * dist);
      acceleration += delta * collide * fScale * maxDist / (maxDist + 1.0);
    }
  }

  gl_FragColor = vec4(acceleration, vec2(finestIndex, 0));
}`:`precision mediump float;
uniform sampler2D u_physData;
uniform sampler2D u_clusterData;
uniform sampler2D u_finestIndexes;
uniform sampler2D u_prevForce;

uniform float u_baseLength;
uniform float u_numNodes;
uniform float u_iterationMultiplier;
uniform float u_isTopLevel;

float TIMESTEP = 1.0 / 30.0;
float VELOCITYDECAY = 0.6;

vec4 getTextureData(sampler2D texture, float index, float base) {
  float x = mod(index, base);
  float y = (index - x) / base;
  return texture2D(texture, vec2(x + 0.5, y + 0.5) / base);
}

float getLogClusterWeight(float value) {
  return value / max(log(value), 1.0);
}

void main(void) {
  float index = (gl_FragCoord.x - 0.5) + (gl_FragCoord.y - 0.5) * 256.0;

  if (index >= u_numNodes) {
    discard;
  }

  vec4 clusterData = getTextureData(u_clusterData, index, 256.0);

  float clusterIndex = clusterData.x;
  float clusterStartIndex = clusterData.y;
  float clusterSize = clusterData.z;

  float finestIndex = getTextureData(u_finestIndexes, index, 256.0).a;
  vec4 myPosition = getTextureData(u_physData, finestIndex, 256.0);
  vec4 previousForce = getTextureData(u_prevForce, clusterIndex, 256.0);
  float fScale = 1.0 + sqrt(u_iterationMultiplier);

  vec2 acceleration = previousForce.xy;

  // Repulsion & Collision Detection
  for (float i = 0.0; i < 256.0 * 256.0; i++) {
    if (i >= clusterStartIndex + clusterSize || i >= u_numNodes) {
      break;
    }
    if (i < clusterStartIndex || i == index) {
      continue;
    }

    vec4 otherClusterData = getTextureData(u_clusterData, i, 256.0);
    float otherClusterWeight = getLogClusterWeight(otherClusterData.w);

    float otherFinestIndex = getTextureData(u_finestIndexes, i, 256.0).a;
    vec4 otherPosition = getTextureData(u_physData, otherFinestIndex, 256.0);

    vec2 delta = myPosition.xy - otherPosition.xy;
    float dist = max(length(delta), 0.0000001);
    float maxDist = 25.0;
    float repulsionForceScale = 0.1;

    float F = ((u_baseLength * u_baseLength) * (fScale / 1.5)) / dist;

    if (u_isTopLevel == 1.0) {
      repulsionForceScale = 0.3;
    }

    acceleration += ((delta / dist) * F) * repulsionForceScale * otherClusterWeight;

    if (dist < maxDist) {
      float collide = (maxDist - dist) / dist;
      acceleration += delta * collide * fScale * maxDist / (maxDist + 1.0);
    }
  }

  gl_FragColor = vec4(acceleration, vec2(finestIndex, 0));
}`;this.apprxRepForceShader=new ua(M,vf,ge),this.apprxRepForceShader.use(),this.apprxRepForceShader.setUniform("u_projection",this.physSmallProjection)}},{key:"setupPinData",value:function(){var E=this.gl;this.pinTexture=E.createTexture(),this.pinData=new Uint8Array(65536);for(var M=0;M<65536;M++)this.pinData[M]=0;E.bindTexture(E.TEXTURE_2D,this.pinTexture),E.texImage2D(E.TEXTURE_2D,0,E.ALPHA,rr,rr,0,E.ALPHA,E.UNSIGNED_BYTE,this.pinData),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,E.NEAREST),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.NEAREST),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE)}},{key:"setupUpdates",value:function(){var E=this.gl;this.updateData=new Float32Array(65536),this.updateTexture=E.createTexture(),E.bindTexture(E.TEXTURE_2D,this.updateTexture),E.texImage2D(E.TEXTURE_2D,0,E.ALPHA,rr,rr,0,E.ALPHA,E.FLOAT,this.updateData),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,E.NEAREST),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.NEAREST),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),this.updateShader=new ua(E,vf,`precision mediump float;

uniform sampler2D u_physData;
uniform sampler2D u_updateData;
uniform float u_numNodesNew;

const float INDEX_FLAG = 999999.0;

vec4 getTextureData(sampler2D texture, float index, float base) {
  float x = mod(index, base);
  float y = (index - x) / base;
  return texture2D(texture, vec2(x + 0.5, y + 0.5) / base);
}

void main(void) {
  float textureSide = 256.0; //#TEXTURE_SIDE#;
  float index = (gl_FragCoord.x - 0.5) + (gl_FragCoord.y - 0.5)*textureSide;

  if (index >= u_numNodesNew) {
    discard;
  }

  float firstValue = getTextureData(u_updateData, index * 2.0, 256.0).a;
  float secondValue = getTextureData(u_updateData, index * 2.0 + 1.0, 256.0).a;

  if (secondValue == INDEX_FLAG) {
    vec4 myPosition = getTextureData(u_physData, firstValue, 256.0);
    gl_FragColor = myPosition;
  } else {
    gl_FragColor = vec4(firstValue, secondValue, 0.0, 0.0);
  }
}
`),this.updateShader.use(),this.updateShader.setUniform("u_projection",this.physProjection)}},{key:"setupReadpixelWorkaround",value:function(){var E=this.gl;this.workaroundShader=new ua(E,vf,`precision lowp float;

uniform sampler2D u_physData;
uniform float u_index;

float shift_right (float v, float amt) { 
    v = floor(v) + 0.5; 
    return floor(v / exp2(amt)); 
}

float shift_left (float v, float amt) { 
    return floor(v * exp2(amt) + 0.5); 
}

float mask_last (float v, float bits) { 
    return mod(v, shift_left(1.0, bits)); 
}

float extract_bits (float num, float from, float to) { 
    from = floor(from + 0.5); to = floor(to + 0.5); 
    return mask_last(shift_right(num, from), to - from); 
}

// From https://stackoverflow.com/questions/17981163/webgl-read-pixels-from-floating-point-render-target
vec4 encode_float (float val) { 
    if (val == 0.0) return vec4(0, 0, 0, 0); 
    float sign = val > 0.0 ? 0.0 : 1.0; 
    val = abs(val); 
    float exponent = floor(log2(val)); 
    float biased_exponent = exponent + 127.0; 
    float fraction = ((val / exp2(exponent)) - 1.0) * 8388608.0; 
    float t = biased_exponent / 2.0; 
    float last_bit_of_biased_exponent = fract(t) * 2.0; 
    float remaining_bits_of_biased_exponent = floor(t); 
    float byte4 = extract_bits(fraction, 0.0, 8.0) / 255.0; 
    float byte3 = extract_bits(fraction, 8.0, 16.0) / 255.0; 
    float byte2 = (last_bit_of_biased_exponent * 128.0 + extract_bits(fraction, 16.0, 23.0)) / 255.0; 
    float byte1 = (sign * 128.0 + remaining_bits_of_biased_exponent) / 255.0; 
    return vec4(byte4, byte3, byte2, byte1); 
}

void main(void) {
  vec4 texData = texture2D(u_physData, gl_FragCoord.xy / 255.0);
  float data;
  if (u_index == 0.0) {
    data = texData.x;
  } else if (u_index == 1.0) {
    data = texData.y;
  } else if (u_index == 2.0) {
    data = texData.z;
  } else if (u_index == 3.0) {
    data = texData.w;
  }

  gl_FragColor = encode_float(data);
}
`),this.workaroundShader.use(),this.workaroundShader.setUniform("u_projection",this.physProjection),this.workaroundData=[];for(var M=0;M<4;M++){var I=new Uint8Array(262144),F=this.newTexture(E,null,rr,E.UNSIGNED_BYTE),q=this.newFramebuffer(E,F);this.workaroundData.push({dataByte:I,dataFloat:new Float32Array(I.buffer),texture:F,frameBuffer:q})}}},{key:"doReadpixelWorkaround",value:function(){for(var E=this.gl,M=0;M<4;M++){var I=this.workaroundData[M];E.bindFramebuffer(E.FRAMEBUFFER,I.frameBuffer),E.viewport(0,0,rr,rr),this.workaroundShader.use(),this.workaroundShader.setUniform("u_index",M),this.workaroundShader.setUniform("u_physData",this.getPhysData(0).texture),E.bindBuffer(E.ARRAY_BUFFER,this.physVbo),this.workaroundShader.setAttributePointer("a_position",2,0,2),E.drawArrays(E.TRIANGLE_STRIP,0,4),E.readPixels(0,0,rr,rr,E.RGBA,E.UNSIGNED_BYTE,I.dataByte)}}},{key:"definePhysicsArrays",value:function(){this.physData=[],this.levelsData=[],this.levelsClusterTexture=[],this.levelsFinestIndexTexture=[]}}],O&&la(_.prototype,O),Object.defineProperty(_,"prototype",{writable:!1}),g}();function _l(g){return _l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},_l(g)}function bc(g){return function(_){if(Array.isArray(_))return po(_)}(g)||function(_){if(typeof Symbol<"u"&&_[Symbol.iterator]!=null||_["@@iterator"]!=null)return Array.from(_)}(g)||function(_,O){if(_){if(typeof _=="string")return po(_,O);var E=Object.prototype.toString.call(_).slice(8,-1);return E==="Object"&&_.constructor&&(E=_.constructor.name),E==="Map"||E==="Set"?Array.from(_):E==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(E)?po(_,O):void 0}}(g)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function po(g,_){(_==null||_>g.length)&&(_=g.length);for(var O=0,E=new Array(_);O<_;O++)E[O]=g[O];return E}function dg(g,_){for(var O=0;O<_.length;O++){var E=_[O];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,ha(E.key),E)}}function fa(g,_,O){return(_=ha(_))in g?Object.defineProperty(g,_,{value:O,enumerable:!0,configurable:!0,writable:!0}):g[_]=O,g}function ha(g){var _=function(O,E){if(_l(O)!="object"||!O)return O;var M=O[Symbol.toPrimitive];if(M!==void 0){var I=M.call(O,"string");if(_l(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(O)}(g);return _l(_)=="symbol"?_:String(_)}var wl="ForceCytoLayout",_c="forceDirected",yf="coseBilkent",rp=function(){function g(E){var M=this;(function(Y,X){if(!(Y instanceof X))throw new TypeError("Cannot call a class as a function")})(this,g),fa(this,"physLayout",void 0),fa(this,"coseBilkentLayout",void 0),fa(this,"state",void 0),fa(this,"currentLayoutType",void 0),fa(this,"enableCytoscape",void 0),fa(this,"currentLayout",void 0);var I=E.state,F=E.enableCytoscape;this.enableCytoscape=F==null||F,this.physLayout=new tp(E),this.coseBilkentLayout=new pc({state:I,cytoCompleteCallback:function(){for(M.physLayout.update(!0),M.copyLayoutPositions(M.state.nodes.items,M.coseBilkentLayout,M.physLayout);M.physLayout.update(!1););M.copyLayoutPositions(M.state.nodes.items,M.physLayout,M.coseBilkentLayout)},animationCompleteCallback:function(){M.currentLayoutType===yf&&setTimeout(function(){return M.setLayout(_c)},50)}}),this.currentLayout=this.physLayout,this.currentLayoutType=_c;var q=I.nodes,G=I.rels;q.addChannel(wl),G.addChannel(wl),this.state=I}var _,O;return _=g,O=[{key:"setOptions",value:function(E){E!==void 0&&(this.currentLayout.setOptions(E),this.enableCytoscape=E.enableCytoscape)}},{key:"getLayout",value:function(E){return E===yf?this.coseBilkentLayout:this.physLayout}},{key:"setLayout",value:function(E){if(E!==this.currentLayoutType){Gr.info("Switching to layout: ".concat(E," in ForceCyto"));var M=this.getLayout(E);this.currentLayout=M,this.currentLayoutType=E}}},{key:"copyLayoutPositions",value:function(E,M,I){var F=M.getNodePositions(E);I.updateNodes(F)}},{key:"update",value:function(){var E=arguments.length>0&&arguments[0]!==void 0&&arguments[0],M=this.state,I=M.nodes,F=M.rels,q=I.channels[wl],G=F.channels[wl],Y=Object.values(q.adds).length,X=Object.values(G.adds).length,J=Object.values(q.adds).map(function(tt){return tt.id}),ie=Object.values(G.adds).map(function(tt){return tt.id}),ce=new Set(Object.keys(q.adds)),ge=new Set(Object.keys(G.adds));if(I.clearChannel(wl),F.clearChannel(wl),this.currentLayoutType===_c&&this.enableCytoscape&&I.items.length<=100&&Y<100&&Y>0&&X>0){var le=I.items.map(function(tt){return tt.id}),ye=new Set([].concat(bc(le),bc(J))),De=F.items.map(function(tt){return tt.id}),Ne=new Set([].concat(bc(De),bc(ie)));if(ye.size<=100&&Ne.size<=300){var Fe=function(tt,mt,It,bt){var Nt,St=new Set(tt),Pe=br(new Set(mt));try{for(Pe.s();!(Nt=Pe.n()).done;){var Te=Nt.value,Ae=bt.idToItem[Te];if(Ae){var nt=Ae.from,Ze=Ae.to;St.add(nt),St.add(Ze)}}}catch(jn){Pe.e(jn)}finally{Pe.f()}var ft,kt=function(jn){var yn,Zr={},Hr={},sn=br(jn);try{for(sn.s();!(yn=sn.n()).done;){for(var mn=yn.value,ti=mn.from,rn=mn.to,An="".concat(ti,"-").concat(rn),ri="".concat(rn,"-").concat(ti),ni=0,fi=[An,ri];ni<fi.length;ni++){var nn=fi[ni];Hr[nn]!==void 0?Hr[nn].push(mn):Hr[nn]=[mn]}Zr[ti]||(Zr[ti]=new Set),Zr[rn]||(Zr[rn]=new Set),Zr[ti].add(rn),Zr[rn].add(ti)}}catch(mi){sn.e(mi)}finally{sn.f()}return{adjNodesMap:Zr,relMap:Hr}}(bt.items),Ut=kt.adjNodesMap,zt=kt.relMap,Sr={},Ir={},Wr=function(jn){var yn=[];for(Sr[jn]||yn.push(jn);yn.length>0;){var Zr=yn.shift();if(Sr[Zr]=It.idToItem[Zr],Ut[Zr]!==void 0){var Hr,sn=br(Ut[Zr]);try{for(sn.s();!(Hr=sn.n()).done;){var mn=Hr.value;if(!Sr[mn]){yn.push(mn);var ti=zt["".concat(Zr,"-").concat(mn)];if(ti){var rn,An=br(ti);try{for(An.s();!(rn=An.n()).done;){var ri=rn.value;Ir[ri.id]||(Ir[ri.id]=ri)}}catch(ni){An.e(ni)}finally{An.f()}}}}}catch(ni){sn.e(ni)}finally{sn.f()}}}},xn=br(St);try{for(xn.s();!(ft=xn.n()).done;)Wr(ft.value)}catch(jn){xn.e(jn)}finally{xn.f()}return{connectedNodes:Sr,connectedRels:Ir}}(ce,ge,I,F),je=Fe.connectedNodes,Xe=Fe.connectedRels,Ve=Object.values(je),$e=Object.values(Xe),Ke=Ve.length,qe=$e.length;Ke===ce.size&&qe===ge.size&&(ge.size>0||ce.size>0)?(this.setLayout(yf),this.coseBilkentLayout.update(!0,I.items,F.items)):qe>0&&ge.size/qe>.25&&(this.setLayout(yf),this.coseBilkentLayout.update(!0,Ve,$e))}}this.physLayout.update(E),this.coseBilkentLayout.update(E)}},{key:"getShouldUpdate",value:function(){return this.currentLayout.getShouldUpdate()}},{key:"getComputing",value:function(){return this.currentLayout.getComputing()}},{key:"updateNodes",value:function(E){this.setLayout(_c),this.physLayout.updateNodes(E)}},{key:"getNodePositions",value:function(E){return this.currentLayout.getNodePositions(E)}},{key:"terminateUpdate",value:function(){this.physLayout.terminateUpdate(),this.coseBilkentLayout.terminateUpdate()}},{key:"destroy",value:function(){this.physLayout.destroy(),this.coseBilkentLayout.destroy()}}],O&&dg(_.prototype,O),Object.defineProperty(_,"prototype",{writable:!1}),g}();function wc(g){return wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},wc(g)}function bh(g,_){var O=Object.keys(g);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(g);_&&(E=E.filter(function(M){return Object.getOwnPropertyDescriptor(g,M).enumerable})),O.push.apply(O,E)}return O}function So(g){for(var _=1;_<arguments.length;_++){var O=arguments[_]!=null?arguments[_]:{};_%2?bh(Object(O),!0).forEach(function(E){As(g,E,O[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(O)):bh(Object(O)).forEach(function(E){Object.defineProperty(g,E,Object.getOwnPropertyDescriptor(O,E))})}return g}function es(g,_){var O=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!O){if(Array.isArray(g)||(O=function(G,Y){if(G){if(typeof G=="string")return mf(G,Y);var X=Object.prototype.toString.call(G).slice(8,-1);return X==="Object"&&G.constructor&&(X=G.constructor.name),X==="Map"||X==="Set"?Array.from(G):X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X)?mf(G,Y):void 0}}(g))||_){O&&(g=O);var E=0,M=function(){};return{s:M,n:function(){return E>=g.length?{done:!0}:{done:!1,value:g[E++]}},e:function(G){throw G},f:M}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I,F=!0,q=!1;return{s:function(){O=O.call(g)},n:function(){var G=O.next();return F=G.done,G},e:function(G){q=!0,I=G},f:function(){try{F||O.return==null||O.return()}finally{if(q)throw I}}}}function mf(g,_){(_==null||_>g.length)&&(_=g.length);for(var O=0,E=new Array(_);O<_;O++)E[O]=g[O];return E}function Fu(g,_){for(var O=0;O<_.length;O++){var E=_[O];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,Ec(E.key),E)}}function As(g,_,O){return(_=Ec(_))in g?Object.defineProperty(g,_,{value:O,enumerable:!0,configurable:!0,writable:!0}):g[_]=O,g}function Ec(g){var _=function(O,E){if(wc(O)!="object"||!O)return O;var M=O[Symbol.toPrimitive];if(M!==void 0){var I=M.call(O,"string");if(wc(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(O)}(g);return wc(_)=="symbol"?_:String(_)}var ts="FreeLayout",El=function(){function g(E){var M=this;(function(Y,X){if(!(Y instanceof X))throw new TypeError("Cannot call a class as a function")})(this,g),As(this,"state",void 0),As(this,"positions",void 0),As(this,"shouldUpdate",void 0),As(this,"stateDisposers",void 0);var I=E.state;this.state=I,this.positions={},this.stateDisposers=[],this.stateDisposers.push(this.state.reaction(function(){return M.state.graphUpdates},function(){M.state.nodes.version!==void 0&&(M.shouldUpdate=!0),M.state.rels.version!==void 0&&(M.shouldUpdate=!0)}));var F=this.state,q=F.nodes,G=F.rels;q.addChannel(ts),G.addChannel(ts),this.shouldUpdate=!0,this.setOptions(),this.layout(q.items,q.idToItem,q.idToPosition)}var _,O;return _=g,O=[{key:"setOptions",value:function(){}},{key:"updateNodes",value:function(E){var M,I=es(E);try{for(I.s();!(M=I.n()).done;){var F=M.value;F.x!==void 0&&F.y!==void 0&&(this.positions[F.id]={x:F.x,y:F.y}),this.shouldUpdate=!0}}catch(q){I.e(q)}finally{I.f()}}},{key:"update",value:function(){var E=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.shouldUpdate||E){var M=this.state,I=M.nodes,F=M.rels,q=Object.values(I.channels[ts].adds).length>0,G=Object.values(F.channels[ts].adds).length>0,Y=Object.values(I.channels[ts].removes).length>0,X=Object.values(F.channels[ts].removes).length>0;(q||G||Y||X)&&this.layout(I.items,I.idToItem,I.idToPosition),I.clearChannel(ts),F.clearChannel(ts)}this.shouldUpdate=!1}},{key:"layout",value:function(E,M,I){var F,q=(F=E)!==void 0?gt(F):F;if(!(0,r.isEmpty)(q)){for(var G={},Y=0;Y<q.length;++Y){var X,J=q[Y].id,ie=(X=I[J])!==null&&X!==void 0?X:{},ce=ie.x,ge=ce===void 0?0:ce,le=ie.y,ye=le===void 0?0:le;G[J]={id:J,x:ge,y:ye}}this.positions=G,this.shouldUpdate=!1}}},{key:"setNodePositions",value:function(E){this.positions=E}},{key:"getNodePositions",value:function(E){var M,I=[],F=es(E);try{for(F.s();!(M=F.n()).done;){var q=M.value,G=this.positions[q.id],Y=So({id:q.id},G);I.push(Y)}}catch(X){F.e(X)}finally{F.f()}return I}},{key:"getShouldUpdate",value:function(){return this.shouldUpdate}},{key:"getComputing",value:function(){return!1}},{key:"terminateUpdate",value:function(){}},{key:"destroy",value:function(){this.state.nodes.removeChannel(ts),this.state.rels.removeChannel(ts)}}],O&&Fu(_.prototype,O),Object.defineProperty(_,"prototype",{writable:!1}),g}();function su(g){return su=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},su(g)}function rs(g,_){var O=Object.keys(g);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(g);_&&(E=E.filter(function(M){return Object.getOwnPropertyDescriptor(g,M).enumerable})),O.push.apply(O,E)}return O}function bf(g){for(var _=1;_<arguments.length;_++){var O=arguments[_]!=null?arguments[_]:{};_%2?rs(Object(O),!0).forEach(function(E){var M,I,F;M=g,I=E,F=O[E],(I=_f(I))in M?Object.defineProperty(M,I,{value:F,enumerable:!0,configurable:!0,writable:!0}):M[I]=F}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(O)):rs(Object(O)).forEach(function(E){Object.defineProperty(g,E,Object.getOwnPropertyDescriptor(O,E))})}return g}function ns(g,_){var O=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!O){if(Array.isArray(g)||(O=function(G,Y){if(G){if(typeof G=="string")return qo(G,Y);var X=Object.prototype.toString.call(G).slice(8,-1);return X==="Object"&&G.constructor&&(X=G.constructor.name),X==="Map"||X==="Set"?Array.from(G):X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X)?qo(G,Y):void 0}}(g))||_){O&&(g=O);var E=0,M=function(){};return{s:M,n:function(){return E>=g.length?{done:!0}:{done:!1,value:g[E++]}},e:function(G){throw G},f:M}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I,F=!0,q=!1;return{s:function(){O=O.call(g)},n:function(){var G=O.next();return F=G.done,G},e:function(G){q=!0,I=G},f:function(){try{F||O.return==null||O.return()}finally{if(q)throw I}}}}function qo(g,_){(_==null||_>g.length)&&(_=g.length);for(var O=0,E=new Array(_);O<_;O++)E[O]=g[O];return E}function _h(g,_){for(var O=0;O<_.length;O++){var E=_[O];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,_f(E.key),E)}}function _f(g){var _=function(O,E){if(su(O)!="object"||!O)return O;var M=O[Symbol.toPrimitive];if(M!==void 0){var I=M.call(O,"string");if(su(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(O)}(g);return su(_)=="symbol"?_:String(_)}var Wo="GridLayout",xc=function(){function g(E){var M=this;(function(Y,X){if(!(Y instanceof X))throw new TypeError("Cannot call a class as a function")})(this,g);var I=E.state;this.state=I,this.positions={},this.stateDisposers=[],this.stateDisposers.push(this.state.reaction(function(){return M.state.graphUpdates},function(){M.state.nodes.version!==void 0&&(M.shouldUpdate=!0),M.state.rels.version!==void 0&&(M.shouldUpdate=!0)}));var F=this.state,q=F.nodes,G=F.rels;q.addChannel(Wo),G.addChannel(Wo),this.shouldUpdate=!0,this.setOptions(E),this.layout(q.items,q.idToItem,q.idToPosition,G.items)}var _,O;return _=g,O=[{key:"setOptions",value:function(E){}},{key:"updateNodes",value:function(E){var M,I=ns(E);try{for(I.s();!(M=I.n()).done;){var F=M.value;F.x!==void 0&&F.y!==void 0&&(this.positions[F.id]={x:F.x,y:F.y}),this.shouldUpdate=!0}}catch(q){I.e(q)}finally{I.f()}}},{key:"update",value:function(){var E=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.shouldUpdate||E){var M=this.state,I=M.nodes,F=M.rels,q=Object.values(I.channels[Wo].adds).length>0,G=Object.values(F.channels[Wo].adds).length>0,Y=Object.values(I.channels[Wo].removes).length>0,X=Object.values(F.channels[Wo].removes).length>0;(q||G||Y||X)&&(this.layout(I.items,I.idToItem,I.idToPosition,F.items),I.idToPosition=this.positions),I.clearChannel(Wo),F.clearChannel(Wo)}this.shouldUpdate=!1}},{key:"layout",value:function(E,M,I,F){var q,G=(q=E)?gt(q):q;if(!(0,r.isEmpty)(G)){for(var Y=G.length,X=Math.ceil(Math.sqrt(Y)),J=new Array(Y),ie=0,ce=0;ce<X;++ce){for(var ge=0;ge<X&&(J[ie]={y:0+150*ce,x:0+150*ge},(ie+=1)!==Y);++ge);if(ie===Y)break}for(var le=G.sort(),ye={},De=0;De<Y;++De){var Ne=le[De],Fe=J[De];Ne.x===Fe.x&&Ne.y===Fe.y||(ye[Ne.id]=bf({id:Ne.id},Fe))}this.positions=ye,this.shouldUpdate=!1}}},{key:"getNodePositions",value:function(E){var M,I=[],F=ns(E);try{for(F.s();!(M=F.n()).done;){var q=M.value,G=this.positions[q.id],Y=bf({id:q.id},G);I.push(Y)}}catch(X){F.e(X)}finally{F.f()}return I}},{key:"getShouldUpdate",value:function(){return this.shouldUpdate}},{key:"getComputing",value:function(){return!1}},{key:"terminateUpdate",value:function(){this.shouldUpdate=!1}},{key:"destroy",value:function(){this.state.nodes.removeChannel(Wo),this.state.rels.removeChannel(Wo)}}],O&&_h(_.prototype,O),Object.defineProperty(_,"prototype",{writable:!1}),g}(),is=new Set(["direction","packing"]),wh="forceDirected",xl="hierarchical",wf="grid",Td="free",os="d3Force",ki="webgl",Oc="canvas";function Sc(g){return Sc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},Sc(g)}function Ho(g,_,O){return _=function(E){var M=function(I,F){if(Sc(I)!="object"||!I)return I;var q=I[Symbol.toPrimitive];if(q!==void 0){var G=q.call(I,"string");if(Sc(G)!="object")return G;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(I)}(E);return Sc(M)=="symbol"?M:String(M)}(_),_ in g?Object.defineProperty(g,_,{value:O,enumerable:!0,configurable:!0,writable:!0}):g[_]=O,g}var da="down",Tc=Ho(Ho(Ho(Ho({},"up","BT"),da,"TB"),"left","RL"),"right","LR"),as="bin",Eh=[as,"stack"],Ki=["html"],Uu=["html"],_r=["captionHtml"];function uu(g){return uu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},uu(g)}function Ef(g,_){if(g==null)return{};var O,E,M=function(F,q){if(F==null)return{};var G,Y,X={},J=Object.keys(F);for(Y=0;Y<J.length;Y++)G=J[Y],q.indexOf(G)>=0||(X[G]=F[G]);return X}(g,_);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(g);for(E=0;E<I.length;E++)O=I[E],_.indexOf(O)>=0||Object.prototype.propertyIsEnumerable.call(g,O)&&(M[O]=g[O])}return M}function lu(g,_){for(var O=0;O<_.length;O++){var E=_[O];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,go(E.key),E)}}function Cd(g,_,O){return _=Sl(_),function(E,M){if(M&&(uu(M)==="object"||typeof M=="function"))return M;if(M!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pn(E)}(g,Ol()?Reflect.construct(_,O||[],Sl(g).constructor):_.apply(g,O))}function Ol(){try{var g=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ol=function(){return!!g})()}function Pn(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function xh(){return xh=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(g,_,O){var E=function(I,F){for(;!Object.prototype.hasOwnProperty.call(I,F)&&(I=Sl(I))!==null;);return I}(g,_);if(E){var M=Object.getOwnPropertyDescriptor(E,_);return M.get?M.get.call(arguments.length<3?g:O):M.value}},xh.apply(this,arguments)}function Sl(g){return Sl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(_){return _.__proto__||Object.getPrototypeOf(_)},Sl(g)}function Tl(g,_){return Tl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(O,E){return O.__proto__=E,O},Tl(g,_)}function $i(g,_,O){return(_=go(_))in g?Object.defineProperty(g,_,{value:O,enumerable:!0,configurable:!0,writable:!0}):g[_]=O,g}function go(g){var _=function(O,E){if(uu(O)!="object"||!O)return O;var M=O[Symbol.toPrimitive];if(M!==void 0){var I=M.call(O,"string");if(uu(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(O)}(g);return uu(_)=="symbol"?_:String(_)}var Fi="HierarchicalLayout",Cl=function(g){return g!==void 0?gt(g):g},vg=function(g){function _(M){var I;(function(Y,X){if(!(Y instanceof X))throw new TypeError("Cannot call a class as a function")})(this,_),$i(Pn(I=Cd(this,_,[M])),"direction",void 0),$i(Pn(I),"packing",void 0),$i(Pn(I),"stateDisposers",void 0),$i(Pn(I),"oldComputing",void 0),$i(Pn(I),"computing",void 0),$i(Pn(I),"pendingLayoutData",void 0),$i(Pn(I),"worker",void 0),$i(Pn(I),"directionChanged",void 0),$i(Pn(I),"packingChanged",void 0),$i(Pn(I),"workersDisabled",void 0),I.direction=da,I.packing=as;var F=I.state,q=F.nodes,G=F.rels;return q.addChannel(Fi),G.addChannel(Fi),I.stateDisposers=[I.state.reaction(function(){return I.state.graphUpdates},function(){if(q.version!==void 0){var Y=q.channels[Fi],X=Object.values(Y.adds).length>0,J=Object.values(Y.removes).length>0,ie=Object.values(Y.updates),ce=pe(ie);I.shouldUpdate=I.shouldUpdate||X||J||ce}if(G.version!==void 0){var ge=G.channels[Fi],le=Object.values(ge.adds).length>0,ye=Object.values(ge.removes).length>0;I.shouldUpdate=I.shouldUpdate||le||ye}})],I.shouldUpdate=!0,I.oldComputing=!1,I.computing=!1,I.workersDisabled=M.state.disableWebWorkers,I.setOptions(M),I.worker=dl("HierarchicalLayout",I.workersDisabled),I.pendingLayoutData=null,I.layout(q.items,q.idToItem,q.idToPosition,G.items),I}var O,E;return function(M,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(I&&I.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),Object.defineProperty(M,"prototype",{writable:!1}),I&&Tl(M,I)}(_,g),O=_,E=[{key:"setOptions",value:function(M){if(M!==void 0&&function(Y){return Object.keys(Y).every(function(X){return is.has(X)})}(M)){var I=M.direction,F=I===void 0?da:I,q=M.packing,G=q===void 0?as:q;Object.keys(Tc).includes(F)&&(this.directionChanged=this.direction&&this.direction!==F,this.direction=F),Eh.includes(G)&&(this.packingChanged=this.packing&&this.packing!==G,this.packing=G),this.shouldUpdate=this.shouldUpdate||this.directionChanged||this.packingChanged}}},{key:"update",value:function(){var M=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.shouldUpdate||M){var I=this.state,F=I.nodes,q=I.rels,G=this.directionChanged,Y=this.packingChanged,X=Object.values(F.channels[Fi].adds).length>0,J=Object.values(q.channels[Fi].adds).length>0,ie=Object.values(F.channels[Fi].removes).length>0,ce=Object.values(q.channels[Fi].removes).length>0,ge=Object.values(F.channels[Fi].updates),le=pe(ge);(M||X||J||ie||ce||G||Y||le)&&this.layout(F.items,F.idToItem,F.idToPosition,q.items),F.clearChannel(Fi),q.clearChannel(Fi),this.directionChanged=!1,this.packingChanged=!1}xh(Sl(_.prototype),"update",this).call(this),this.shouldUpdate=!1,this.oldComputing=this.computing}},{key:"getShouldUpdate",value:function(){return this.shouldUpdate||this.shouldUpdateAnimator}},{key:"getComputing",value:function(){return this.computing}},{key:"layout",value:function(M,I,F,q){var G=this;if(this.worker){var Y=Cl(M).map(function(Ne){return Ne.html,Ef(Ne,Ki)}),X=Cl(I),J={};Object.keys(X).forEach(function(Ne){var Fe=X[Ne],je=(Fe.html,Ef(Fe,Uu));J[Ne]=je});var ie=Cl(q).map(function(Ne){return Ne.captionHtml,Ef(Ne,_r)}),ce=Cl(F),ge=this.direction,le=this.packing,ye=window.devicePixelRatio,De={nodes:Y,nodeIds:J,idToPosition:ce,rels:ie,direction:ge,packing:le,pixelRatio:ye,forcedDelay:0};this.computing?this.pendingLayoutData=De:(this.worker.port.onmessage=function(Ne){var Fe=Ne.data,je=Fe.positions,Xe=Fe.parents,Ve=Fe.waypoints;G.computing&&(G.positions=je),G.parents=Xe,G.state.setWaypoints(Ve),G.pendingLayoutData!==null?(G.worker.port.postMessage(G.pendingLayoutData),G.pendingLayoutData=null):G.computing=!1,G.shouldUpdate=!0,G.startAnimation()},this.computing=!0,this.worker.port.postMessage(De))}else Gr.info("Hierarchical layout code not yet initialised.")}},{key:"terminateUpdate",value:function(){var M,I;this.computing=!1,this.shouldUpdate=!1,(M=this.state.nodes)===null||M===void 0||M.clearChannel(Fi),(I=this.state.rels)===null||I===void 0||I.clearChannel(Fi)}},{key:"destroy",value:function(){var M;this.stateDisposers.forEach(function(I){I()}),this.state.nodes.removeChannel(Fi),this.state.rels.removeChannel(Fi),(M=this.worker)===null||M===void 0||M.port.close()}}],E&&lu(O.prototype,E),Object.defineProperty(O,"prototype",{writable:!1}),_}(xd);function cu(g){return cu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},cu(g)}function np(g,_){for(var O=0;O<_.length;O++){var E=_[O];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,xf(E.key),E)}}function Na(g,_,O){return(_=xf(_))in g?Object.defineProperty(g,_,{value:O,enumerable:!0,configurable:!0,writable:!0}):g[_]=O,g}function xf(g){var _=function(O,E){if(cu(O)!="object"||!O)return O;var M=O[Symbol.toPrimitive];if(M!==void 0){var I=M.call(O,"string");if(cu(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(O)}(g);return cu(_)=="symbol"?_:String(_)}var ip=function(){function g(E,M){(function(I,F){if(!(I instanceof F))throw new TypeError("Cannot call a class as a function")})(this,g),Na(this,"elementId",void 0),Na(this,"currentValue",void 0),Na(this,"startValue",void 0),Na(this,"currentTime",void 0),Na(this,"duration",void 0),Na(this,"status",void 0),Na(this,"endValue",void 0),Na(this,"startTime",void 0),Na(this,"endTime",void 0),Na(this,"hasNextAnimation",void 0),this.elementId=E,this.startValue=M,this.status=0,this.currentValue=M,this.duration=0}var _,O;return _=g,(O=[{key:"setDuration",value:function(E){this.duration=E,this.setEndTime(this.startTime+this.duration)}},{key:"getStatus",value:function(){return this.status}},{key:"advance",value:function(){if(this.status!==1)return!1;this.currentTime=new Date().getTime();var E,M=this.endTime-this.startTime;return(E=M>0?(this.currentTime-this.startTime)/M:1)>=1?(this.currentValue=this.endValue,this.status=2):(this.currentValue=this.startValue+E*(this.endValue-this.startValue),this.hasNextAnimation=!0),this.hasNextAnimation}},{key:"setEndValue",value:function(E){this.endValue!==E&&(E-this.currentValue!=0?(this.currentTime=new Date().getTime(),this.status=1,this.startValue=this.currentValue,this.endValue=E,this.startTime=this.currentTime,this.setEndTime(this.startTime+this.duration)):this.endValue=E)}},{key:"setEndTime",value:function(E){this.endTime=Math.max(E,this.startTime)}}])&&np(_.prototype,O),Object.defineProperty(_,"prototype",{writable:!1}),g}();function fu(g){return fu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},fu(g)}function Oh(g,_){var O=Object.keys(g);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(g);_&&(E=E.filter(function(M){return Object.getOwnPropertyDescriptor(g,M).enumerable})),O.push.apply(O,E)}return O}function Pl(g){for(var _=1;_<arguments.length;_++){var O=arguments[_]!=null?arguments[_]:{};_%2?Oh(Object(O),!0).forEach(function(E){ss(g,E,O[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(O)):Oh(Object(O)).forEach(function(E){Object.defineProperty(g,E,Object.getOwnPropertyDescriptor(O,E))})}return g}function Sh(g,_){for(var O=0;O<_.length;O++){var E=_[O];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,Pd(E.key),E)}}function ss(g,_,O){return(_=Pd(_))in g?Object.defineProperty(g,_,{value:O,enumerable:!0,configurable:!0,writable:!0}):g[_]=O,g}function Pd(g){var _=function(O,E){if(fu(O)!="object"||!O)return O;var M=O[Symbol.toPrimitive];if(M!==void 0){var I=M.call(O,"string");if(fu(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(O)}(g);return fu(_)=="symbol"?_:String(_)}var Of=function(){function g(){(function(E,M){if(!(E instanceof M))throw new TypeError("Cannot call a class as a function")})(this,g),ss(this,"animations",void 0),ss(this,"durations",void 0),ss(this,"defaultDuration",void 0),ss(this,"hasNextAnimation",void 0),ss(this,"ignoreAnimationsFlag",void 0),this.animations=new Map,this.durations=[],this.durations[0]=0,this.durations[1]=0,this.defaultDuration=150,this.hasNextAnimation=!1,this.ignoreAnimationsFlag=!1}var _,O;return _=g,O=[{key:"advance",value:function(){var E=this;return this.hasNextAnimation=!1,this.animations.forEach(function(M){Object.values(M).forEach(function(I){I.advance()&&(E.hasNextAnimation=!0)})}),this.hasNextAnimation}},{key:"ignoreAnimations",value:function(E){this.ignoreAnimationsFlag=E}},{key:"setOptions",value:function(E){E.fadeDuration!==void 0&&(this.durations[0]=E.fadeDuration),E.sizeDuration!==void 0&&(this.durations[1]=E.sizeDuration)}},{key:"needsToRun",value:function(){return this.hasNextAnimation}},{key:"getValueForAnimationName",value:function(E,M,I){var F,q,G=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;if(this.ignoreAnimationsFlag)return I;var Y=(F=this.getById(E))!==null&&F!==void 0?F:{};if(Y[M]===void 0){var X=G===1?this.createSizeAnimation(0,E,M):this.createFadeAnimation(0,E,M);X.setEndValue(I),q=X.currentValue}else{var J=Y[M];if(J.currentValue===I)return I;J.setEndValue(I),q=J.currentValue}return this.hasNextAnimation=!0,q}},{key:"createAnimation",value:function(E,M,I){var F,q=new ip(M,E),G=(F=this.animations.get(M))!==null&&F!==void 0?F:{};return this.animations.set(M,Pl(Pl({},G),{},ss({},I,q))),q}},{key:"getById",value:function(E){return this.animations.get(E)}},{key:"createFadeAnimation",value:function(E,M,I){var F,q=this.createAnimation(E,M,I);return q.setDuration((F=this.durations[0])!==null&&F!==void 0?F:this.defaultDuration),q}},{key:"createSizeAnimation",value:function(E,M,I){var F,q=this.createAnimation(E,M,I);return q.setDuration((F=this.durations[1])!==null&&F!==void 0?F:this.defaultDuration),q}}],O&&Sh(_.prototype,O),Object.defineProperty(_,"prototype",{writable:!1}),g}();function zu(g){return zu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},zu(g)}function Ad(g,_){for(var O=0;O<_.length;O++){var E=_[O];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,Th(E.key),E)}}function Th(g){var _=function(O,E){if(zu(O)!="object"||!O)return O;var M=O[Symbol.toPrimitive];if(M!==void 0){var I=M.call(O,"string");if(zu(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(O)}(g);return zu(_)=="symbol"?_:String(_)}var xi=64,hu=function(){function g(){var E,M,I;(function(F,q){if(!(F instanceof q))throw new TypeError("Cannot call a class as a function")})(this,g),E=this,I=void 0,(M=Th(M="cache"))in E?Object.defineProperty(E,M,{value:I,enumerable:!0,configurable:!0,writable:!0}):E[M]=I,this.cache={}}var _,O;return _=g,O=[{key:"getImage",value:function(E){var M=arguments.length>1&&arguments[1]!==void 0&&arguments[1],I=this.getOrCreateEntry(E),F=M?"inverted":"image",q=I[F];return q===void 0&&(q=this.loadImage(E),I[F]=q),this.drawIfNeeded(q,M),q.canvas}},{key:"getOrCreateEntry",value:function(E){return this.cache[E]===void 0&&(this.cache[E]={}),this.cache[E]}},{key:"invertCanvas",value:function(E){for(var M=E.getImageData(0,0,xi,xi),I=M.data,F=0;F<4096;F++){var q=4*F;I[q]^=255,I[q+1]^=255,I[q+2]^=255}E.putImageData(M,0,0)}},{key:"loadImage",value:function(E){var M=document.createElement("canvas");M.width=xi,M.height=xi;var I=new Image;return I.src=E,I.crossOrigin="anonymous",{canvas:M,image:I,drawn:!1}}},{key:"drawIfNeeded",value:function(E,M){var I=E.image,F=E.canvas;if(!E.drawn&&I.complete){var q=F.getContext("2d");try{q.drawImage(I,0,0,xi,xi)}catch(G){Gr.error("Failed to draw image",I.src,G),q.beginPath(),q.strokeStyle="black",q.rect(0,0,xi,xi),q.moveTo(0,0),q.lineTo(xi,xi),q.moveTo(0,xi),q.lineTo(xi,0),q.stroke(),q.closePath()}M&&this.invertCanvas(q),E.drawn=!0}}}],O&&Ad(_.prototype,O),Object.defineProperty(_,"prototype",{writable:!1}),g}();const Rd=hu;function Al(g){return Al=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},Al(g)}function Id(g,_){(_==null||_>g.length)&&(_=g.length);for(var O=0,E=new Array(_);O<_;O++)E[O]=g[O];return E}function kd(g,_){for(var O=0;O<_.length;O++){var E=_[O];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,Dd(E.key),E)}}function Or(g,_,O){return(_=Dd(_))in g?Object.defineProperty(g,_,{value:O,enumerable:!0,configurable:!0,writable:!0}):g[_]=O,g}function Dd(g){var _=function(O,E){if(Al(O)!="object"||!O)return O;var M=O[Symbol.toPrimitive];if(M!==void 0){var I=M.call(O,"string");if(Al(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(O)}(g);return Al(_)=="symbol"?_:String(_)}var op=function(){function g(E,M,I){(function(F,q){if(!(F instanceof q))throw new TypeError("Cannot call a class as a function")})(this,g),Or(this,"key",void 0),Or(this,"rels",void 0),Or(this,"waypointPath",void 0),Or(this,"selfReferring",void 0),Or(this,"fromId",void 0),Or(this,"toId",void 0),Or(this,"angles",void 0),Or(this,"labelInfo",void 0),this.key=E,this.rels=[],this.selfReferring=M===I,this.fromId=M,this.toId=I,this.labelInfo={},this.angles=[]}var _,O;return _=g,O=[{key:"insert",value:function(E){this.rels.push({rel:E})}},{key:"setLabelInfo",value:function(E,M){this.labelInfo[E]=M}},{key:"remove",value:function(E){var M=E.id,I=this.rels,F=I.findIndex(function(X){return X.rel.id===M});if(F!==-1&&(I.splice(F,1),F===0&&I.length>0)){var q=I[0].rel,G=q.from,Y=q.to;this.fromId=G,this.toId=Y}}},{key:"size",value:function(){return this.rels.length}},{key:"maxFontSize",value:function(){return Math.max.apply(Math,function(M){if(Array.isArray(M))return Id(M)}(E=this.rels.map(function(M){var I=M.rel;return(0,r.isNumber)(I.captionSize)?I.captionSize:1}))||function(M){if(typeof Symbol<"u"&&M[Symbol.iterator]!=null||M["@@iterator"]!=null)return Array.from(M)}(E)||function(M,I){if(M){if(typeof M=="string")return Id(M,I);var F=Object.prototype.toString.call(M).slice(8,-1);return F==="Object"&&M.constructor&&(F=M.constructor.name),F==="Map"||F==="Set"?Array.from(M):F==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(F)?Id(M,I):void 0}}(E)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}());var E}},{key:"relIsOppositeDirection",value:function(E){var M=E.from,I=E.to,F=this.fromId,q=this.toId;return M!==F&&I!==q||M===q&&I===F}},{key:"indexOf",value:function(E){var M=E.id;return this.rels.findIndex(function(I){return I.rel.id===M})}},{key:"getRel",value:function(E){var M=this.rels;return E<0||E>=M.length?null:M[E].rel}},{key:"setWaypoints",value:function(E){this.waypointPath=E}},{key:"setAngles",value:function(E){this.angles=E}}],O&&kd(_.prototype,O),Object.defineProperty(_,"prototype",{writable:!1}),g}(),Rl=dc,Md=2*Math.PI/50,ap=.1*Math.PI;function Sf(g){return Sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},Sf(g)}function li(g,_){var O=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!O){if(Array.isArray(g)||(O=function(G,Y){if(G){if(typeof G=="string")return sp(G,Y);var X=Object.prototype.toString.call(G).slice(8,-1);return X==="Object"&&G.constructor&&(X=G.constructor.name),X==="Map"||X==="Set"?Array.from(G):X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X)?sp(G,Y):void 0}}(g))||_){O&&(g=O);var E=0,M=function(){};return{s:M,n:function(){return E>=g.length?{done:!0}:{done:!1,value:g[E++]}},e:function(G){throw G},f:M}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I,F=!0,q=!1;return{s:function(){O=O.call(g)},n:function(){var G=O.next();return F=G.done,G},e:function(G){q=!0,I=G},f:function(){try{F||O.return==null||O.return()}finally{if(q)throw I}}}}function sp(g,_){(_==null||_>g.length)&&(_=g.length);for(var O=0,E=new Array(_);O<_;O++)E[O]=g[O];return E}function Tf(g,_){for(var O=0;O<_.length;O++){var E=_[O];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,Cf(E.key),E)}}function Ch(g,_,O){return(_=Cf(_))in g?Object.defineProperty(g,_,{value:O,enumerable:!0,configurable:!0,writable:!0}):g[_]=O,g}function Cf(g){var _=function(O,E){if(Sf(O)!="object"||!O)return O;var M=O[Symbol.toPrimitive];if(M!==void 0){var I=M.call(O,"string");if(Sf(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(O)}(g);return Sf(_)=="symbol"?_:String(_)}var up=function(g){var _=[];if(g.length===0)_.push({size:2*Math.PI,start:0});else{for(var O=g.length-1;O>=0;O--){var E=void 0,M=void 0;O===0?(M=g[g.length-1],E=g[O]-g[g.length-1]+2*Math.PI):(M=g[O-1],E=g[O]-g[O-1]),_.push({size:E,start:M})}_.sort(function(I,F){return F.size-I.size})}return _},va=function(g,_){for(;_>g.length||g[0].size>2*g[_-1].size;)g.push({size:g[0].size/2,start:g[0].start}),g.push({size:g[0].size/2,start:g[0].start+g[0].size/2}),g.shift(),g.sort(function(O,E){return E.size-O.size});return g},Gu=function(){function g(E,M){(function(F,q){if(!(F instanceof q))throw new TypeError("Cannot call a class as a function")})(this,g),Ch(this,"bundles",void 0),Ch(this,"nodeToBundles",void 0),this.bundles={},this.nodeToBundles={};var I=E.reduce(function(F,q){return F[q.id]=q,F},{});this.updateData(I,{},M)}var _,O;return _=g,O=[{key:"getBundle",value:function(E){var M=this.bundles,I=this.nodeToBundles,F=this.generatePairId(E.from,E.to),q=M[F];return q===void 0&&(q=new op(F,E.from,E.to),M[F]=q,I[E.from]===void 0&&(I[E.from]=[]),I[E.to]===void 0&&(I[E.to]=[]),I[E.from].push(q),I[E.to].push(q)),q}},{key:"updateData",value:function(E,M,I){for(var F=this.bundles,q=this.nodeToBundles,G=function(Xe,Ve){var $e=q[Ve].findIndex(function(Ke){return Ke===Xe});$e!==-1&&q[Ve].splice($e,1),q[Ve].length===0&&delete q[Ve]},Y=Object.values(E),X=Object.values(M),J=0,ie=Y;J<ie.length;J++){var ce=ie[J];this.getBundle(ce).insert(ce)}for(var ge=0,le=X;ge<le.length;ge++){var ye=le[ge],De=this.getBundle(ye);De.remove(ye),De.size()===0&&(delete F[De.key],G(De,ye.from),G(De,ye.to))}for(var Ne=0,Fe=Object.keys(F);Ne<Fe.length;Ne++){var je=F[Fe[Ne]];je.setWaypoints(I["".concat(je.fromId,"-").concat(je.toId)])}}},{key:"updatePositions",value:function(E){for(var M=this.nodeToBundles,I=0,F=Object.keys(E);I<F.length;I++){var q,G=F[I],Y=(q=M[G])!==null&&q!==void 0?q:[];if(Y.length!==0){var X=Y.find(function(qe){return qe.selfReferring}),J=Y.filter(function(qe){return!qe.selfReferring});if(X!==void 0){var ie,ce=[],ge=li(J);try{for(ge.s();!(ie=ge.n()).done;){var le=ie.value,ye=E[le.fromId],De=E[le.toId];if(ye!==void 0&&De!==void 0)for(var Ne=Md*le.size(),Fe=ye.id===G?Math.atan2(De.y-ye.y,De.x-ye.x):Math.atan2(ye.y-De.y,ye.x-De.x),je=0;je<le.size();je++)ce.push(Fe+Ne/2-je*Md);else{var Xe=ye===void 0?le.fromId:le.toId;Gr.warn("Arrowbundler: Node with id ".concat(Xe," is not in position map"))}}}catch(qe){ge.e(qe)}finally{ge.f()}var Ve=ce.map(function(qe){return(qe+2*Math.PI)%(2*Math.PI)}).sort(),$e=up(Ve);va($e,X.size());var Ke=$e.map(function(qe){return qe.start+qe.size/2}).slice(0,X.size());X.setAngles(Ke)}}}}},{key:"generatePairId",value:function(E,M){return[E.toString(),M.toString()].sort(function(I,F){return I.localeCompare(F)}).join("-")}}],O&&Tf(_.prototype,O),Object.defineProperty(_,"prototype",{writable:!1}),g}();function du(g){return du=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},du(g)}function Ph(g,_){var O=Object.keys(g);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(g);_&&(E=E.filter(function(M){return Object.getOwnPropertyDescriptor(g,M).enumerable})),O.push.apply(O,E)}return O}function Ah(g,_){for(var O=0;O<_.length;O++){var E=_[O];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,Rh(E.key),E)}}function Vu(g,_,O){return(_=Rh(_))in g?Object.defineProperty(g,_,{value:O,enumerable:!0,configurable:!0,writable:!0}):g[_]=O,g}function Rh(g){var _=function(O,E){if(du(O)!="object"||!O)return O;var M=O[Symbol.toPrimitive];if(M!==void 0){var I=M.call(O,"string");if(du(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(O)}(g);return du(_)=="symbol"?_:String(_)}var Pf=function(g,_){return(0,r.isFinite)(g.x)&&(0,r.isFinite)(g.y)&&(0,r.isFinite)(_.x)&&(0,r.isFinite)(_.y)},Cc=function(g,_){if(g===void 0||_===void 0||!Pf(g,_))return!1;var O=_.x-g.x,E=_.y-g.y,M=rt();return O*O+E*E<100*M*M},Zi=function(){function g(E,M){(function(I,F){if(!(I instanceof F))throw new TypeError("Cannot call a class as a function")})(this,g),Vu(this,"p1",void 0),Vu(this,"p2",void 0),Vu(this,"unit",void 0),Vu(this,"norm",void 0),Vu(this,"length",void 0),Vu(this,"vector",void 0),this.p1=E,this.p2=M,this.vector=this.getVector(),this.length=this.getLength(),this.unit=this.getUnitVector(),this.norm=this.getUnitNormalVector()}var _,O;return _=g,O=[{key:"getVector",value:function(){return{x:this.p2.x-this.p1.x,y:this.p2.y-this.p1.y}}},{key:"getLength",value:function(){var E=this.vector,M=E.x,I=E.y;return Math.sqrt(M*M+I*I)}},{key:"getUnitVector",value:function(){var E=this.vector,M=this.length;return{x:E.x/M,y:E.y/M}}},{key:"getUnitNormalVector",value:function(){return{x:this.unit.y,y:-this.unit.x}}}],O&&Ah(_.prototype,O),Object.defineProperty(_,"prototype",{writable:!1}),g}(),us=function(g,_,O){var E={x:_.x-g.x,y:_.y-g.y},M=function(Y,X){var J=(Y.x*X.x+Y.y*X.y)/(X.x*X.x+X.y*X.y);return(0,r.clamp)(J,0,1)}({x:O.x-g.x,y:O.y-g.y},E),I=g.x+M*E.x,F=g.y+M*E.y,q=I-O.x,G=F-O.y;return Math.sqrt(q*q+G*G)},Ih=function(g,_,O,E){if(_.x===O.x&&_.y===O.y)return _;var M=_.y-g.y,I=g.x-_.x,F=M*g.x+I*g.y,q=E.y-O.y,G=O.x-E.x,Y=q*O.x+G*O.y,X=M*G-q*I;return X===0?null:{x:(G*F-I*Y)/X,y:(M*Y-q*F)/X}},Rs=function(g,_,O,E){var M,I,F,q=1e9,G=function(X){for(var J=1;J<arguments.length;J++){var ie=arguments[J]!=null?arguments[J]:{};J%2?Ph(Object(ie),!0).forEach(function(ce){Vu(X,ce,ie[ce])}):Object.getOwnPropertyDescriptors?Object.defineProperties(X,Object.getOwnPropertyDescriptors(ie)):Ph(Object(ie)).forEach(function(ce){Object.defineProperty(X,ce,Object.getOwnPropertyDescriptor(ie,ce))})}return X}({},g),Y={x:0,y:0};for(I=1;I<10;I++)F=.1*I,Y.x=Math.pow(1-F,2)*g.x+2*F*(1-F)*O.x+Math.pow(F,2)*_.x,Y.y=Math.pow(1-F,2)*g.y+2*F*(1-F)*O.y+Math.pow(F,2)*_.y,I>0&&(q=(M=us(G,Y,E))<q?M:q),G.x=Y.x,G.y=Y.y;return q},lp=Mi(3269),Ld=Mi.n(lp);function Il(g){return Il=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},Il(g)}function Pc(g){return function(_){if(Array.isArray(_))return Dh(_)}(g)||function(_){if(typeof Symbol<"u"&&_[Symbol.iterator]!=null||_["@@iterator"]!=null)return Array.from(_)}(g)||jd(g)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Nd(g,_){var O=Object.keys(g);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(g);_&&(E=E.filter(function(M){return Object.getOwnPropertyDescriptor(g,M).enumerable})),O.push.apply(O,E)}return O}function kh(g){for(var _=1;_<arguments.length;_++){var O=arguments[_]!=null?arguments[_]:{};_%2?Nd(Object(O),!0).forEach(function(E){var M,I,F;M=g,I=E,F=O[E],I=function(q){var G=function(Y,X){if(Il(Y)!="object"||!Y)return Y;var J=Y[Symbol.toPrimitive];if(J!==void 0){var ie=J.call(Y,"string");if(Il(ie)!="object")return ie;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Y)}(q);return Il(G)=="symbol"?G:String(G)}(I),I in M?Object.defineProperty(M,I,{value:F,enumerable:!0,configurable:!0,writable:!0}):M[I]=F}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(O)):Nd(Object(O)).forEach(function(E){Object.defineProperty(g,E,Object.getOwnPropertyDescriptor(O,E))})}return g}function jd(g,_){if(g){if(typeof g=="string")return Dh(g,_);var O=Object.prototype.toString.call(g).slice(8,-1);return O==="Object"&&g.constructor&&(O=g.constructor.name),O==="Map"||O==="Set"?Array.from(g):O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O)?Dh(g,_):void 0}}function Dh(g,_){(_==null||_>g.length)&&(_=g.length);for(var O=0,E=new Array(_);O<_;O++)E[O]=g[O];return E}var kl="",Bd=function(g){return!(!g||!isNaN(Number(g))||g.toLowerCase()===g.toUpperCase())&&g===g.toUpperCase()},cp=function(g){var _=g[g.length-1],O=g[g.length-2];return!(!_||!isNaN(Number(_))||_.toLowerCase()===_.toUpperCase())&&!(!O||!isNaN(Number(O))||O.toLowerCase()===O.toUpperCase())&&Bd(_)&&!Bd(O)},Ui=function(g,_,O,E){for(var M,I=arguments.length>4&&arguments[4]!==void 0&&arguments[4],F=[],q=[],G=0,Y=0,X=!1,J=!1,ie=0;ie<E;ie++)F[ie]=O(ie,E);for(var ce,ge=function(){M=g.slice(G,le);var ye,De,Ne=_(M),Fe=F[Y];if(Ne>Fe||(De=g[le-1],`
\r\v`.includes(De))){if(!(Y<E-1)){if(I)return{v:[]};for(var je=le;Ne>Fe;){for(je-=1;ye=g[je-1],` 	
\r\v`.includes(ye);)je-=1;if(!(je-G>1)){M="",J=!0,X=!1;break}M=g.slice(G,je),Ne=_(M),J=!0,X=!1}return q[Y]={text:M,hasEllipsisChar:J,hasHyphenChar:X},{v:q}}X=!1,J=!1;var Xe=function($e){var Ke=$e.length,qe=Math.min(Ke-1,3);if(Ke===1)return{hyphen:!1,cnt:0};for(var tt=0;tt<qe;tt++){var mt=$e[$e.length-(tt+1)];if(mt===" "||mt.toLowerCase()===mt.toUpperCase())return{hyphen:!1,cnt:tt+1};var It=$e.slice(0,$e.length-tt);if(cp(It))return{hyphen:!1,cnt:tt+1}}return{hyphen:!0,cnt:1}}(M),Ve=le-Xe.cnt;if(Xe.hyphen)for(M=g.slice(G,Ve),Ne=_(M),X=!0;Ne>Fe;){if(!(Ve-G>1)){M=g[G],Ve=G+1,Ne=_(M),X=!1;break}Ve-=1,M=g.slice(G,Ve),Ne=_(M),X=!0}else M=(M=g.slice(G,Ve)).trim();q[Y]={text:M,hasEllipsisChar:J,hasHyphenChar:X},G=Ve,Y+=1}},le=1;le<=g.length;le++)if(ce=ge())return ce.v;return M=g.slice(G,g.length),q[Y]={text:M,hasEllipsisChar:J,hasHyphenChar:!1},q},ja=function(g,_,O,E,M,I,F,q){g.font="bold ".concat(E,"px ").concat(O).replace(/"/g,"");for(var G=function(ge){var le;return(le=g.measureText(ge))===null||le===void 0?void 0:le.width},Y=I?(F<4?["",""]:[""]).length:0,X=function(ge,le){return function(ye,De,Ne){var Fe=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"top",je=.98*Ne,Xe=.89*Ne,Ve=.95*Ne;return De===1?je:De===2?Ve:De===3&&Fe==="top"?ye===0||ye===2?Xe:je:De===4&&Fe==="top"?ye===0||ye===3?.78*Ne:Ve:De===5&&Fe==="top"?ye===0||ye===4?.65*Ne:ye===1||ye===3?Xe:Ve:je}(ge+Y,le+Y,M)},J=1,ie=[],ce=function(){if((ie=function(le,ye,De,Ne){var Fe,je=le.split(/\s/g).filter(function(bt){return bt.length>0}),Xe=[],Ve=null,$e=function(bt){return ye(bt)>De(Xe.length,Ne)},Ke=function(bt,Nt){var St=typeof Symbol<"u"&&bt[Symbol.iterator]||bt["@@iterator"];if(!St){if(Array.isArray(bt)||(St=jd(bt))){St&&(bt=St);var Pe=0,Te=function(){};return{s:Te,n:function(){return Pe>=bt.length?{done:!0}:{done:!1,value:bt[Pe++]}},e:function(ft){throw ft},f:Te}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ae,nt=!0,Ze=!1;return{s:function(){St=St.call(bt)},n:function(){var ft=St.next();return nt=ft.done,ft},e:function(ft){Ze=!0,Ae=ft},f:function(){try{nt||St.return==null||St.return()}finally{if(Ze)throw Ae}}}}(je);try{for(Ke.s();!(Fe=Ke.n()).done;){var qe=Fe.value,tt=Ve?"".concat(Ve," ").concat(qe):qe;if(ye(tt)<De(Xe.length,Ne))Ve=tt;else{if(Ve!==null){var mt=$e(Ve);Xe.push({text:Ve,overflowed:mt})}if(Ve=qe,Xe.length>Ne)return[]}}}catch(bt){Ke.e(bt)}finally{Ke.f()}if(Ve){var It=$e(Ve);Xe.push({text:Ve,overflowed:It})}return Xe.length<=Ne?Xe:[]}(_,G,X,J)).length===0)ie=Ui(_,G,X,J,F>J);else if(ie.some(function(le){return le.overflowed})){var ge=J;ie=ie.reduce(function(le,ye){var De=F-le.length;if(De===0){var Ne=le[le.length-1];return Ne.text.endsWith(kl)||(G(Ne.text)+G(kl)>X(le.length,ge)?(le[le.length-1].text=Ne.text.slice(0,-2),le[le.length-1].hasEllipsisChar=!0):(le[le.length-1].text=Ne.text,le[le.length-1].hasEllipsisChar=!0)),le}if(ye.overflowed){var Fe=Ui(ye.text,G,X,De);le=le.concat(Fe)}else le.push({text:ye.text,hasEllipsisChar:!1,hasHyphenChar:!1});return le},[])}else ie=ie.map(function(le){return kh(kh({},le),{},{hasEllipsisChar:!1,hasHyphenChar:!1})});J+=1};ie.length===0;)ce();return Array.from(ie)},Fd=function(){var g=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).reduce(function(_,O,E){var M=O.value;if(M){var I="".concat(E>0&&_.length?", ":"").concat(M);return[].concat(Pc(_),[kh(kh({},O),{},{value:I,chars:I.split("").map(function(F,q){var G,Y;return E!==0&&_.length?q<2?null:Pc((G=O.styles)!==null&&G!==void 0?G:[]):Pc((Y=O.styles)!==null&&Y!==void 0?Y:[])})})])}return[]},[]);return{stylesPerChar:g.reduce(function(_,O){return[].concat(Pc(_),Pc(O.chars))},[]),fullCaption:g.map(function(_){return _.value}).join("")}};function Af(g,_){(_==null||_>g.length)&&(_=g.length);for(var O=0,E=new Array(_);O<_;O++)E[O]=g[O];return E}var Rf=[[.04,1],[100,2]],Is=[[.8,1.1],[3,1.6],[8,2.5]],fp=[[Is[0][0],1],[100,1.25]],qu=function(g,_){if(g.includes("rgba"))return g;if(g.includes("rgb")){var O=g.substr(g.indexOf("(")+1).replace(")","").split(",");return"rgba(".concat(O[0],",").concat(O[1],",").concat(O[2],",").concat(_,")")}var E=Ld().get.rgb(g);return E===null?g:"rgba(".concat(E[0],",").concat(E[1],",").concat(E[2],",").concat(_,")")},ls=function(g,_,O,E){var M=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],I=arguments.length>5&&arguments[5]!==void 0&&arguments[5],F=E.headPosition,q=E.headAngle,G=E.headHeight,Y=E.headChinHeight,X=E.headWidth,J=Math.cos(q),ie=Math.sin(q),ce=function(ye,De){return{x:F.x+ye*J-De*ie,y:F.y+ye*ie+De*J}},ge=[ce(Y-G,0),ce(-G,X/2),ce(0,0),ce(-G,-X/2)],le={lineWidth:g.lineWidth,strokeStyle:g.strokeStyle,fillStyle:g.fillStyle};g.lineWidth=_,g.strokeStyle=O,g.fillStyle=O,function(ye,De,Ne,Fe){if(ye.beginPath(),De.length>0){var je=De[0];ye.moveTo(je.x,je.y)}for(var Xe=1;Xe<De.length;Xe++){var Ve=De[Xe];ye.lineTo(Ve.x,Ve.y)}ye.closePath(),Ne&&ye.fill(),Fe&&ye.stroke()}(g,ge,M,I),g.lineWidth=le.lineWidth,g.strokeStyle=le.strokeStyle,g.fillStyle=le.fillStyle},Ac=function(g,_,O,E,M){var I=E;M.forEach(function(F){var q=F.width,G=F.color,Y=I+q;g.beginPath(),g.fillStyle=G,g.arc(_,O,Y,0,2*Math.PI,!1),g.arc(_,O,I,2*Math.PI,0,!0),g.fill(),g.closePath(),I=Y})},Dl=function(g,_,O,E){g.beginPath(),g.arc(_,O,E,0,2*Math.PI,!1),g.closePath()},Wu=function(g,_,O,E,M){g.beginPath(),g.fillStyle=E,Dl(g,_,O,M),g.fill(),g.closePath()};function Mh(g,_){var O=_.find(function(M){return g<M[0]}),E=_[_.length-1][1];return O!==void 0?O[1]:E}var Ud=function(g,_,O,E,M,I,F,q,G,Y){var X=E,J=0,ie=0,ce="".concat(M,"px ").concat(I),ge="normal ".concat(ce);_.forEach(function(le){var ye;g.font=ge;var De,Ne=-((ye=g.measureText(le.text))===null||ye===void 0?void 0:ye.width)/2,Fe=le.text?function(je){if(Array.isArray(je))return Af(je)}(De=le.text)||function(je){if(typeof Symbol<"u"&&je[Symbol.iterator]!=null||je["@@iterator"]!=null)return Array.from(je)}(De)||function(je,Xe){if(je){if(typeof je=="string")return Af(je,Xe);var Ve=Object.prototype.toString.call(je).slice(8,-1);return Ve==="Object"&&je.constructor&&(Ve=je.constructor.name),Ve==="Map"||Ve==="Set"?Array.from(je):Ve==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ve)?Af(je,Xe):void 0}}(De)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}():[];le.hasHyphenChar||le.hasEllipsisChar||Fe.push(" "),Fe.forEach(function(je){var Xe,Ve=g.measureText(je).width,$e=(Xe=O[ie])!==null&&Xe!==void 0?Xe:[],Ke=$e.includes("bold"),qe=$e.includes("italic");g.font=Ke&&qe?"italic 600 ".concat(ce):qe?"italic 400 ".concat(ce):Ke?"bold ".concat(ce):ge,$e.includes("underline")&&g.fillRect(q+Ne+J,G+X+.2,Ve,.2),le.hasEllipsisChar?g.fillText(je,q+Ne+J-Y/2,G+X):g.fillText(je,q+Ne+J,G+X),J+=Ve,ie+=1}),g.font=ge,le.hasHyphenChar&&g.fillText("",q+Ne+J,G+X),le.hasEllipsisChar&&g.fillText(kl,q+Ne+J-Y/2,G+X),J=0,X+=F})},oo=function(g,_){return{x:g.x+_.x,y:g.y+_.y}},If=function(g,_){return{x:g.x-_.x,y:g.y-_.y}},Ml=function(g,_){return{x:g.x*_,y:g.y*_}},Yo=function(g,_){return function(O){return Math.sqrt(O.x*O.x+O.y*O.y)}(If(g,_))},Tr=function(g,_){return{x:Math.cos(g)*_,y:Math.sin(g)*_}};function kf(g,_){var O=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!O){if(Array.isArray(g)||(O=function(G,Y){if(G){if(typeof G=="string")return To(G,Y);var X=Object.prototype.toString.call(G).slice(8,-1);return X==="Object"&&G.constructor&&(X=G.constructor.name),X==="Map"||X==="Set"?Array.from(G):X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X)?To(G,Y):void 0}}(g))||_){O&&(g=O);var E=0,M=function(){};return{s:M,n:function(){return E>=g.length?{done:!0}:{done:!1,value:g[E++]}},e:function(G){throw G},f:M}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I,F=!0,q=!1;return{s:function(){O=O.call(g)},n:function(){var G=O.next();return F=G.done,G},e:function(G){q=!0,I=G},f:function(){try{F||O.return==null||O.return()}finally{if(q)throw I}}}}function To(g,_){(_==null||_>g.length)&&(_=g.length);for(var O=0,E=new Array(_);O<_;O++)E[O]=g[O];return E}var Hn=2*Math.PI,Qi=Math.PI/2,zd=function(g,_,O,E,M,I){var F={x:(g.x+_.x)/2,y:(g.y+_.y)/2},q={x:g.x,y:g.y},G={x:_.x,y:_.y},Y=new Zi(G,q),X=function(ie,ce){var ge=0;return ie&&(ge+=ie),ce&&(ge-=ce),ge}(E,O);F.x+=X/2*Y.unit.x,F.y+=X/2*Y.unit.y;var J=I.size()/2-I.indexOf(M);return F.x+=J*Y.unit.x,F.y+=J*Y.unit.y,F},Ll=function(g){var _=rt(),O=g.size,E=g.selected;return((O??Zn)+4+(E===!0?4:0))*_},Ba=function(g,_){var O=rt();g.shadowColor=_.color,g.shadowBlur=_.width*O,g.shadowOffsetX=0,g.shadowOffsetY=0},Rc=function(g){g.shadowColor="rgba(0,0,0,0)",g.shadowBlur=0,g.shadowOffsetX=0,g.shadowOffsetY=0},Xo=function(g,_,O,E,M){var I,F,q=arguments.length>5&&arguments[5]!==void 0&&arguments[5],G=function(Te){var Ae=arguments.length>1&&arguments[1]!==void 0&&arguments[1],nt=Te.norm.x,Ze=Te.norm.y;return Ae?{x:-nt,y:-Ze}:Te.norm},Y=rt(),X=_.indexOf(g),J=(_.size()-1)/2,ie=X>J,ce=Math.abs(X-J),ge=M?17*_.maxFontSize():8,le=(_.size()-1)*ge*Y,ye=function(Te,Ae,nt,Ze,ft,kt,Ut){var zt,Sr=arguments.length>7&&arguments[7]!==void 0&&arguments[7],Ir=rt(),Wr=Te.size(),xn=Wr>1,jn=Te.relIsOppositeDirection(kt),yn=jn?nt:Ae,Zr=jn?Ae:nt,Hr=Te.waypointPath,sn=Hr==null?void 0:Hr.points,mn=Hr==null?void 0:Hr.from,ti=Hr==null?void 0:Hr.to,rn=Cc(yn,mn)&&Cc(Zr,ti)||Cc(Zr,mn)&&Cc(yn,ti),An=rn?sn[1]:null,ri=rn?sn[sn.length-2]:null,ni=Ll(yn),fi=Ll(Zr),nn=function(oi,bi){return Math.atan2(oi.y-bi.y,oi.x-bi.x)},mi=Math.max(Math.PI,Hn/(Wr/2)),bn=xn?Ze*mi*(Ut?1:-1)/((zt=yn.size)!==null&&zt!==void 0?zt:Zn):0,ko=nn(rn?An:Zr,yn),Qo=rn?nn(Zr,ri):ko,Ku=function(oi,bi,$h,Wl){return{x:oi.x+Math.cos(bi)*$h*(Wl?-1:1),y:oi.y+Math.sin(bi)*$h*(Wl?-1:1)}},zl=function(oi,bi){return Ku(yn,ko+oi,bi,!1)},$u=function(oi,bi){return Ku(Zr,Qo-oi,bi,!0)},za=function(oi,bi){return{x:oi.x+(bi.x-oi.x)/2,y:oi.y+(bi.y-oi.y)/2}},ii=function(oi,bi){return Math.sqrt((oi.x-bi.x)*(oi.x-bi.x)+(oi.y-bi.y)*(oi.y-bi.y))*Ir},On=zl(bn,ni),Gi=$u(bn,fi),Jo=xn?zl(0,ni):null,Do=xn?$u(0,fi):null,Ns=200*Ir,hi=[];if(rn){var Bc=ii(On,An)<Ns;if(xn&&!Bc){var Vf=za(Jo,An);hi.push(new Zi(On,Vf)),hi.push(new Zi(Vf,An))}else hi.push(new Zi(On,An));for(var Gl=2;Gl<sn.length-1;Gl++)hi.push(new Zi(sn[Gl-1],sn[Gl]));var vv=ii(Gi,ri)<Ns;if(xn&&!vv){var Fc=za(Do,ri);hi.push(new Zi(ri,Fc)),hi.push(new Zi(Fc,Gi))}else hi.push(new Zi(ri,Gi))}else{var Vl=xn?ii(Jo,Do):0;if(xn&&Vl>2*(30*Ir+Math.min(ni,fi)))if(Sr){var Uc=zd(yn,Zr,ni,fi,kt,Te);hi.push(new Zi(On,Uc)),hi.push(new Zi(Uc,Gi))}else{var js=Ze*ft,Bs=30+ni,qf=Math.sqrt(Bs*Bs+js*js),ql=30+fi,Wf=Math.sqrt(ql*ql+js*js),zc=zl(0,qf),Kh=$u(0,Wf);hi.push(new Zi(On,zc)),hi.push(new Zi(zc,Kh)),hi.push(new Zi(Kh,Gi))}else if(Vl>(ni+fi)/2){var Hf=zd(yn,Zr,ni,fi,kt,Te);hi.push(new Zi(On,Hf)),hi.push(new Zi(Hf,Gi))}else hi.push(new Zi(On,Gi))}return hi}(_,O,E,ce,ge,g,ie,q),De=[],Ne=ye[0],Fe=G(Ne,ie);De.push({x:Ne.p1.x+Fe.x,y:Ne.p1.y+Fe.y});for(var je=1;je<ye.length;je++)if(_.size()===1)De.push(ye[je-1].p2);else{var Xe=ye[je-1],Ve=ye[je],$e=G(Xe,ie),Ke=G(Ve,ie),qe=oo(Xe.p1,Ml($e,le/2)),tt=oo(Xe.p2,Ml($e,le/2)),mt=oo(Ve.p1,Ml(Ke,le/2)),It=oo(Ve.p2,Ml(Ke,le/2)),bt=null;F=Ke,(I=$e).x*F.x+I.y*F.y<.99&&(bt=Ih(qe,tt,mt,It));var Nt=bt!==null?If(bt,Xe.p2):Ml($e,le/2);De.push(oo(Xe.p2,Ml(Nt,ce/J)))}var St=ye[ye.length-1],Pe=G(St,ie);return De.push({x:St.p2.x+Pe.x,y:St.p2.y+Pe.y}),_.relIsOppositeDirection(g)?De.reverse():De},Yn=function(g,_,O,E,M,I,F,q){var G,Y=arguments.length>8&&arguments[8]!==void 0&&arguments[8],X=rt(),J=M.selected,ie=M.captions,ce=ie===void 0?[]:ie,ge=M.caption,le=ge===void 0?"":ge,ye=M.width,De=M.disabled,Ne=M.captionAlign,Fe=Ne===void 0?"top":Ne,je=M.captionSize,Xe=je===void 0?1:je,Ve=ce.length>0?(G=Fd(ce))===null||G===void 0?void 0:G.fullCaption:le;if(Ve!==void 0){var $e=6*Xe*X,Ke=J===!0?"bold":"normal",qe=Ve;g.fillStyle=De===!0?F.fontColor:q,g.font="".concat(Ke," ").concat($e,"px ").concat('"Open Sans", sans-serif');var tt=function(Sr){return g.measureText(Sr).width},mt=(ye??1)*(J===!0?1.5:1),It=tt(qe);if(It>E){var bt=Ui(qe,tt,function(){return E},1,!1)[0];qe=bt.hasEllipsisChar===!0?"".concat(bt.text,"..."):qe,It=E}var Nt=Math.cos(O),St=Math.sin(O),Pe={x:_.x,y:_.y},Te=Pe.x,Ae=Pe.y,nt=O;Y&&(nt=O-Qi,Te+=2*$e*Nt,Ae+=2*$e*St,nt-=Qi);var Ze=(1+Xe)*X,ft=Fe==="bottom"?$e/2+mt+Ze:-(mt+Ze);g.translate(Te,Ae),g.rotate(nt),g.fillText(qe,-It/2,ft),g.rotate(-nt),g.translate(-Te,-Ae);var kt=2*ft*Math.sin(O),Ut=2*ft*Math.cos(O),zt={position:{x:_.x-kt,y:_.y+Ut},rotation:Y?O-Math.PI:O,width:E/X,height:($e+Ze)/X};I.setLabelInfo(M.id,zt)}},Mn=function(g,_,O,E,M){if(g.beginPath(),g.moveTo(_[0].x,_[0].y),M&&_.length>2){for(var I=1;I<_.length-2;){var F=(_[I].x+_[I+1].x)/2,q=(_[I].y+_[I+1].y)/2;g.quadraticCurveTo(_[I].x,_[I].y,F,q),I+=1}g.quadraticCurveTo(_[I].x,_[I].y,_[I+1].x,_[I+1].y)}else for(var G=1;G<_.length;G++)g.lineTo(_[G].x,_[G].y);g.lineWidth=O,g.strokeStyle=E,g.lineCap="round",g.stroke()},Lh=function(g){return g.rings[0].width*rt()*1.5},Nh=function(g){return 6*g*rt()},Ic=function(g,_,O){var E,M;return{widthAlign:_/2*((E=g[0])!==null&&E!==void 0?E:0),heightAlign:O/2*((M=g[1])!==null&&M!==void 0?M:0)}},Df=function(g,_,O){var E,M,I=O.indexOf(g),F=(E=O.angles[I])!==null&&E!==void 0?E:0,q=F-ap/2,G=F+ap/2,Y=(M=g.width)!==null&&M!==void 0?M:1,X=rt(),J=Ll(_),ie={x:_.x+Math.cos(q)*(J+Y/2),y:_.y+Math.sin(q)*(J+Y/2)},ce={x:_.x+Math.cos(G)*(J+Y/2),y:_.y+Math.sin(G)*(J+Y/2)},ge={x:_.x+Math.cos(F)*(J+35*X),y:_.y+Math.sin(F)*(J+35*X)};return{startAngle:q,endAngle:G,startPoint:ie,endPoint:ce,apexPoint:ge,control1Point:{x:ge.x+25*Math.cos(F-Qi)*X/2,y:ge.y+25*Math.sin(F-Qi)*X/2},control2Point:{x:ge.x+25*Math.cos(F+Qi)*X/2,y:ge.y+25*Math.sin(F+Qi)*X/2}}},pa=function(g,_,O,E,M,I){g.beginPath(),g.moveTo(_.x,_.y),g.quadraticCurveTo(M.x,M.y,E.x,E.y),g.quadraticCurveTo(I.x,I.y,O.x,O.y),g.stroke()},kc=function(g,_,O,E,M,I,F,q,G,Y){var X=!(arguments.length>10&&arguments[10]!==void 0)||arguments[10];Pf(O,E)&&(O.id===E.id?function(J,ie,ce,ge,le,ye,De,Ne){var Fe=arguments.length>8&&arguments[8]!==void 0?arguments[8]:Rl,je=ie.overlayIcon,Xe=ie.selected,Ve=ie.width,$e=ie.hovered,Ke=ie.disabled,qe=ie.color,tt=Df(ie,ce,ge),mt=tt.startPoint,It=tt.endPoint,bt=tt.apexPoint,Nt=tt.control1Point,St=tt.control2Point,Pe=De.rings,Te=De.shadow,Ae=rt(),nt=Pe[0].color,Ze=Pe[1].color,ft=Pe[0].width*Ae,kt=Pe[1].width*Ae,Ut=40*Ae,zt=(Ve??1)*Ae,Sr=zt>1?zt/2:1,Ir=9*Sr,Wr=2*Sr,xn=7*Sr,jn=Xe===!0,yn=Ke===!0,Zr=je!==void 0,Hr=Math.atan2(It.y-St.y,It.x-St.x),sn=jn?ft*Math.sqrt(1+2*Ir/xn*(2*Ir/xn)):0,mn={x:It.x-Math.cos(Hr)*(.5*Ir-Wr+sn),y:It.y-Math.sin(Hr)*(.5*Ir-Wr+sn)},ti={headPosition:{x:It.x+Math.cos(Hr)*(.5*Ir-Wr-sn),y:It.y+Math.sin(Hr)*(.5*Ir-Wr-sn)},headAngle:Hr,headHeight:Ir,headChinHeight:Wr,headWidth:xn};if(J.save(),J.lineCap="round",jn&&(Ba(J,Te),J.lineWidth=zt+kt,J.strokeStyle=Ze,pa(J,mt,mn,bt,Nt,St),ls(J,kt,Ze,ti,!1,!0),Rc(J),J.lineWidth=zt+ft,J.strokeStyle=nt,pa(J,mt,mn,bt,Nt,St),ls(J,ft,nt,ti,!1,!0)),J.lineWidth=zt,$e===!0&&!jn&&!yn){var rn=Te.color;Ba(J,Te),J.strokeStyle=rn,J.fillStyle=rn,pa(J,mt,mn,bt,Nt,St),ls(J,zt,rn,ti),Rc(J)}var An=yn?Ne.color:qe??Fe;if(J.fillStyle=An,J.strokeStyle=An,pa(J,mt,mn,bt,Nt,St),ls(J,zt,An,ti),ye||Zr){var ri,ni=ge.indexOf(ie),fi=(ri=ge.angles[ni])!==null&&ri!==void 0?ri:0,nn=bt.x-Math.cos(Hr)*(sn/4),mi=bt.y-Math.sin(Hr)*(sn/4),bn=(fi+Qi)%Hn,ko=(fi+Hn)%Hn<Math.PI;if(ye&&Yn(J,{x:nn,y:mi},bn,Ut,ie,ge,Ne,Fe,ko),Zr){var Qo=je.position,Ku=Qo===void 0?[0,0]:Qo,zl=je.url,$u=je.size,za=Nh($u===void 0?1:$u),ii=Ic(Ku,Ut,za),On=ii.widthAlign,Gi=ii.heightAlign+(jn?Lh(De):0)*(Ku[1]<0?-1:1);J.save(),J.translate(nn,mi),ko?(J.rotate(bn-Math.PI),J.translate(2*-On,2*-Gi)):J.rotate(bn);var Jo=za/2,Do=-Jo+On,Ns=-Jo+Gi;J.drawImage(le.getImage(zl),Do,Ns,za,za),J.restore()}}J.restore()}(g,_,O,M,I,F,q,G,Y):function(J,ie,ce,ge,le,ye,De,Ne,Fe,je){var Xe=arguments.length>10&&arguments[10]!==void 0?arguments[10]:Rl,Ve=ie.overlayIcon,$e=ie.color,Ke=ie.disabled,qe=ie.selected,tt=ie.width,mt=ie.hovered,It=ie.captionAlign,bt=qe===!0,Nt=Ke===!0,St=Ve!==void 0,Pe=Fe.rings,Te=Fe.shadow,Ae=Xo(ie,le,ce,ge,De,Ne),nt=rt(),Ze=function(Wl){var Vi,ai=Wl.selected===!0?1.5:1;return((Vi=Wl.width)!==null&&Vi!==void 0?Vi:1)*ai*rt()}(ie),ft=Nt?je.color:$e??Xe,kt=Pe[0].width*nt,Ut=Pe[1].width*nt,zt=nt*(tt>1?tt/2:1),Sr=9*zt,Ir=2*zt,Wr=7*zt,xn=Yo(Ae[Ae.length-2],Ae[Ae.length-1]),jn=2*Sr,yn=bt?kt*Math.sqrt(1+jn/Wr*(jn/Wr)):0,Zr=2-yn,Hr=Math.floor(Ae.length/2);Ae.length>2&&bt&&xn<Sr+yn-Ir&&(Zr+=xn,yn-=xn/2+Ir,Ae.pop(),Hr=Math.floor(Ae.length/2));var sn,mn,ti=Ae[Ae.length-2],rn=Ae[Ae.length-1],An=(sn=ti,mn=rn,Math.atan2(mn.y-sn.y,mn.x-sn.x)),ri=Sr/2+yn,ni=Math.cos(An),fi=Math.sin(An);Ae[Ae.length-1]={x:rn.x-ni*ri,y:rn.y-fi*ri};var nn,mi={headPosition:{x:rn.x+ni*Zr,y:rn.y+fi*Zr},headAngle:An,headHeight:Sr,headChinHeight:Ir,headWidth:Wr},bn=kf(Ae);try{for(bn.s();!(nn=bn.n()).done;){var ko=nn.value;ko.x=Math.round(ko.x),ko.y=Math.round(ko.y)}}catch(Wl){bn.e(Wl)}finally{bn.f()}if(J.save(),bt){var Qo=Pe[0].color,Ku=Pe[1].color,zl=Math.atan2(Ae[1].y-Ae[0].y,Ae[1].x-Ae[0].x),$u=Tr(zl,Lh(Fe));Ae[0]=oo(Ae[0],$u),Ba(J,Te),Mn(J,Ae,Ze+Ut,Ku,Ne),ls(J,Ut,Ku,mi,!1,!0),Rc(J),Mn(J,Ae,Ze+kt,Qo,Ne),ls(J,kt,Qo,mi,!1,!0)}if(mt===!0&&!bt&&!Nt){var za=Te.color;Ba(J,Te),Mn(J,Ae,Ze,za,Ne),ls(J,Ze,za,mi),Rc(J)}if(Mn(J,Ae,Ze,ft,Ne),ls(J,Ze,ft,mi),De||St){var ii,On,Gi,Jo,Do,Ns=ce.x>ge.x,hi=Ae[Hr];(1&Ae.length)==1?(ii=Ae[Ns?Hr+1:Hr-1],On=Ae[Ns?Hr-1:Hr+1],Ne?(Gi=(hi.x+(ii.x+On.x)/2)/2,Jo=(hi.y+(ii.y+On.y)/2)/2,Do=Ns?Math.atan2(ce.y-ge.y,ce.x-ge.x):Math.atan2(ge.y-ce.y,ge.x-ce.x)):(Yo(hi,ii)>Yo(hi,On)?On=hi:ii=hi,Gi=(ii.x+On.x)/2,Jo=(ii.y+On.y)/2,Do=Math.atan2(On.y-ii.y,On.x-ii.x))):(ii=Ae[Ns?Hr:Hr-1],On=Ae[Ns?Hr-1:Hr],Gi=(ii.x+On.x)/2,Jo=(ii.y+On.y)/2,Do=Math.atan2(On.y-ii.y,On.x-ii.x));var Bc=bt?Tr(Do+Qi,Lh(Fe)):{x:0,y:0},Vf=Yo(ii,On);if(De){var Gl=It==="bottom"?1:-1,vv={x:Gi+Bc.x*Gl,y:Jo+Bc.y*Gl};Yn(J,vv,Do,Vf,ie,le,je,Xe)}if(St){var Fc=Ve.position,Vl=Fc===void 0?[0,0]:Fc,Uc=Ve.url,js=Ve.size,Bs=Nh(js===void 0?1:js),qf=Ic(Vl,Vf,Bs),ql=qf.widthAlign,Wf=qf.heightAlign,zc=Vl[1]<0?-1:1,Kh=Bc.x*zc,Hf=Bc.y*zc,oi=Bs/2;J.translate(Gi,Jo),J.rotate(Do);var bi=-oi+Kh+ql,$h=-oi+Hf+Wf;J.drawImage(ye.getImage(Uc),bi,$h,Bs,Bs),J.rotate(-Do),J.translate(-Gi,-Jo)}}J.restore()}(g,_,O,E,M,I,F,X,q,G,Y))},Co=function(g,_,O,E){var M=arguments.length>4&&arguments[4]!==void 0&&arguments[4],I=arguments.length>5&&arguments[5]!==void 0&&arguments[5];return Pf(O,E)?O.id===E.id?function(F,q,G){for(var Y=Df(F,q,G),X={left:1/0,top:1/0,right:-1/0,bottom:-1/0},J=["startPoint","endPoint","apexPoint","control1Point","control2Point"],ie=0;ie<J.length;ie++){var ce=Y[J[ie]],ge=ce.x,le=ce.y;ge<X.left&&(X.left=ge),ge>X.right&&(X.right=ge),le<X.top&&(X.top=le),le>X.bottom&&(X.bottom=le)}return X}(g,O,_):function(F,q,G,Y,X,J){var ie,ce={left:1/0,top:1/0,right:-1/0,bottom:-1/0},ge=kf(Xo(F,q,G,Y,X,J));try{for(ge.s();!(ie=ge.n()).done;){var le=ie.value,ye=le.x,De=le.y;ye<ce.left&&(ce.left=ye),ye>ce.right&&(ce.right=ye),De<ce.top&&(ce.top=De),De>ce.bottom&&(ce.bottom=De)}}catch(Ne){ge.e(Ne)}finally{ge.f()}return ce}(g,_,O,E,M,I):null};function cs(g){return cs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},cs(g)}var jh=/^\s+/,Dc=/\s+$/;function Tt(g,_){if(_=_||{},(g=g||"")instanceof Tt)return g;if(!(this instanceof Tt))return new Tt(g,_);var O=function(E){var M,I,F,q={r:0,g:0,b:0},G=1,Y=null,X=null,J=null,ie=!1,ce=!1;return typeof E=="string"&&(E=function(ge){ge=ge.replace(jh,"").replace(Dc,"").toLowerCase();var le,ye=!1;if(ao[ge])ge=ao[ge],ye=!0;else if(ge=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(le=ma.rgb.exec(ge))?{r:le[1],g:le[2],b:le[3]}:(le=ma.rgba.exec(ge))?{r:le[1],g:le[2],b:le[3],a:le[4]}:(le=ma.hsl.exec(ge))?{h:le[1],s:le[2],l:le[3]}:(le=ma.hsla.exec(ge))?{h:le[1],s:le[2],l:le[3],a:le[4]}:(le=ma.hsv.exec(ge))?{h:le[1],s:le[2],v:le[3]}:(le=ma.hsva.exec(ge))?{h:le[1],s:le[2],v:le[3],a:le[4]}:(le=ma.hex8.exec(ge))?{r:Ko(le[1]),g:Ko(le[2]),b:Ko(le[3]),a:Wd(le[4]),format:ye?"name":"hex8"}:(le=ma.hex6.exec(ge))?{r:Ko(le[1]),g:Ko(le[2]),b:Ko(le[3]),format:ye?"name":"hex"}:(le=ma.hex4.exec(ge))?{r:Ko(le[1]+""+le[1]),g:Ko(le[2]+""+le[2]),b:Ko(le[3]+""+le[3]),a:Wd(le[4]+""+le[4]),format:ye?"name":"hex8"}:!!(le=ma.hex3.exec(ge))&&{r:Ko(le[1]+""+le[1]),g:Ko(le[2]+""+le[2]),b:Ko(le[3]+""+le[3]),format:ye?"name":"hex"}}(E)),cs(E)=="object"&&(fs(E.r)&&fs(E.g)&&fs(E.b)?(M=E.r,I=E.g,F=E.b,q={r:255*Ur(M,255),g:255*Ur(I,255),b:255*Ur(F,255)},ie=!0,ce=String(E.r).substr(-1)==="%"?"prgb":"rgb"):fs(E.h)&&fs(E.s)&&fs(E.v)?(Y=Mc(E.s),X=Mc(E.v),q=function(ge,le,ye){ge=6*Ur(ge,360),le=Ur(le,100),ye=Ur(ye,100);var De=Math.floor(ge),Ne=ge-De,Fe=ye*(1-le),je=ye*(1-Ne*le),Xe=ye*(1-(1-Ne)*le),Ve=De%6;return{r:255*[ye,je,Fe,Fe,Xe,ye][Ve],g:255*[Xe,ye,ye,je,Fe,Fe][Ve],b:255*[Fe,Fe,Xe,ye,ye,je][Ve]}}(E.h,Y,X),ie=!0,ce="hsv"):fs(E.h)&&fs(E.s)&&fs(E.l)&&(Y=Mc(E.s),J=Mc(E.l),q=function(ge,le,ye){var De,Ne,Fe;function je($e,Ke,qe){return qe<0&&(qe+=1),qe>1&&(qe-=1),qe<1/6?$e+6*(Ke-$e)*qe:qe<.5?Ke:qe<2/3?$e+(Ke-$e)*(2/3-qe)*6:$e}if(ge=Ur(ge,360),le=Ur(le,100),ye=Ur(ye,100),le===0)De=Ne=Fe=ye;else{var Xe=ye<.5?ye*(1+le):ye+le-ye*le,Ve=2*ye-Xe;De=je(Ve,Xe,ge+1/3),Ne=je(Ve,Xe,ge),Fe=je(Ve,Xe,ge-1/3)}return{r:255*De,g:255*Ne,b:255*Fe}}(E.h,Y,J),ie=!0,ce="hsl"),E.hasOwnProperty("a")&&(G=E.a)),G=zi(G),{ok:ie,format:E.format||ce,r:Math.min(255,Math.max(q.r,0)),g:Math.min(255,Math.max(q.g,0)),b:Math.min(255,Math.max(q.b,0)),a:G}}(g);this._originalInput=g,this._r=O.r,this._g=O.g,this._b=O.b,this._a=O.a,this._roundA=Math.round(100*this._a)/100,this._format=_.format||O.format,this._gradientType=_.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=O.ok}function ga(g,_,O){g=Ur(g,255),_=Ur(_,255),O=Ur(O,255);var E,M,I=Math.max(g,_,O),F=Math.min(g,_,O),q=(I+F)/2;if(I==F)E=M=0;else{var G=I-F;switch(M=q>.5?G/(2-I-F):G/(I+F),I){case g:E=(_-O)/G+(_<O?6:0);break;case _:E=(O-g)/G+2;break;case O:E=(g-_)/G+4}E/=6}return{h:E,s:M,l:q}}function kr(g,_,O){g=Ur(g,255),_=Ur(_,255),O=Ur(O,255);var E,M,I=Math.max(g,_,O),F=Math.min(g,_,O),q=I,G=I-F;if(M=I===0?0:G/I,I==F)E=0;else{switch(I){case g:E=(_-O)/G+(_<O?6:0);break;case _:E=(O-g)/G+2;break;case O:E=(g-_)/G+4}E/=6}return{h:E,s:M,v:q}}function vu(g,_,O,E){var M=[Po(Math.round(g).toString(16)),Po(Math.round(_).toString(16)),Po(Math.round(O).toString(16))];return E&&M[0].charAt(0)==M[0].charAt(1)&&M[1].charAt(0)==M[1].charAt(1)&&M[2].charAt(0)==M[2].charAt(1)?M[0].charAt(0)+M[1].charAt(0)+M[2].charAt(0):M.join("")}function ya(g,_,O,E){return[Po(zh(E)),Po(Math.round(g).toString(16)),Po(Math.round(_).toString(16)),Po(Math.round(O).toString(16))].join("")}function Bh(g,_){_=_===0?0:_||10;var O=Tt(g).toHsl();return O.s-=_/100,O.s=Uh(O.s),Tt(O)}function ln(g,_){_=_===0?0:_||10;var O=Tt(g).toHsl();return O.s+=_/100,O.s=Uh(O.s),Tt(O)}function yo(g){return Tt(g).desaturate(100)}function hp(g,_){_=_===0?0:_||10;var O=Tt(g).toHsl();return O.l+=_/100,O.l=Uh(O.l),Tt(O)}function Fh(g,_){_=_===0?0:_||10;var O=Tt(g).toRgb();return O.r=Math.max(0,Math.min(255,O.r-Math.round(-_/100*255))),O.g=Math.max(0,Math.min(255,O.g-Math.round(-_/100*255))),O.b=Math.max(0,Math.min(255,O.b-Math.round(-_/100*255))),Tt(O)}function dp(g,_){_=_===0?0:_||10;var O=Tt(g).toHsl();return O.l-=_/100,O.l=Uh(O.l),Tt(O)}function pg(g,_){var O=Tt(g).toHsl(),E=(O.h+_)%360;return O.h=E<0?360+E:E,Tt(O)}function vp(g){var _=Tt(g).toHsl();return _.h=(_.h+180)%360,Tt(_)}function pp(g,_){if(isNaN(_)||_<=0)throw new Error("Argument to polyad must be a positive number");for(var O=Tt(g).toHsl(),E=[Tt(g)],M=360/_,I=1;I<_;I++)E.push(Tt({h:(O.h+I*M)%360,s:O.s,l:O.l}));return E}function Gd(g){var _=Tt(g).toHsl(),O=_.h;return[Tt(g),Tt({h:(O+72)%360,s:_.s,l:_.l}),Tt({h:(O+216)%360,s:_.s,l:_.l})]}function Vd(g,_,O){_=_||6,O=O||30;var E=Tt(g).toHsl(),M=360/O,I=[Tt(g)];for(E.h=(E.h-(M*_>>1)+720)%360;--_;)E.h=(E.h+M)%360,I.push(Tt(E));return I}function pu(g,_){_=_||6;for(var O=Tt(g).toHsv(),E=O.h,M=O.s,I=O.v,F=[],q=1/_;_--;)F.push(Tt({h:E,s:M,v:I})),I=(I+q)%1;return F}Tt.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var g=this.toRgb();return(299*g.r+587*g.g+114*g.b)/1e3},getLuminance:function(){var g,_,O,E=this.toRgb();return g=E.r/255,_=E.g/255,O=E.b/255,.2126*(g<=.03928?g/12.92:Math.pow((g+.055)/1.055,2.4))+.7152*(_<=.03928?_/12.92:Math.pow((_+.055)/1.055,2.4))+.0722*(O<=.03928?O/12.92:Math.pow((O+.055)/1.055,2.4))},setAlpha:function(g){return this._a=zi(g),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var g=kr(this._r,this._g,this._b);return{h:360*g.h,s:g.s,v:g.v,a:this._a}},toHsvString:function(){var g=kr(this._r,this._g,this._b),_=Math.round(360*g.h),O=Math.round(100*g.s),E=Math.round(100*g.v);return this._a==1?"hsv("+_+", "+O+"%, "+E+"%)":"hsva("+_+", "+O+"%, "+E+"%, "+this._roundA+")"},toHsl:function(){var g=ga(this._r,this._g,this._b);return{h:360*g.h,s:g.s,l:g.l,a:this._a}},toHslString:function(){var g=ga(this._r,this._g,this._b),_=Math.round(360*g.h),O=Math.round(100*g.s),E=Math.round(100*g.l);return this._a==1?"hsl("+_+", "+O+"%, "+E+"%)":"hsla("+_+", "+O+"%, "+E+"%, "+this._roundA+")"},toHex:function(g){return vu(this._r,this._g,this._b,g)},toHexString:function(g){return"#"+this.toHex(g)},toHex8:function(g){return function(_,O,E,M,I){var F=[Po(Math.round(_).toString(16)),Po(Math.round(O).toString(16)),Po(Math.round(E).toString(16)),Po(zh(M))];return I&&F[0].charAt(0)==F[0].charAt(1)&&F[1].charAt(0)==F[1].charAt(1)&&F[2].charAt(0)==F[2].charAt(1)&&F[3].charAt(0)==F[3].charAt(1)?F[0].charAt(0)+F[1].charAt(0)+F[2].charAt(0)+F[3].charAt(0):F.join("")}(this._r,this._g,this._b,this._a,g)},toHex8String:function(g){return"#"+this.toHex8(g)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*Ur(this._r,255))+"%",g:Math.round(100*Ur(this._g,255))+"%",b:Math.round(100*Ur(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(100*Ur(this._r,255))+"%, "+Math.round(100*Ur(this._g,255))+"%, "+Math.round(100*Ur(this._b,255))+"%)":"rgba("+Math.round(100*Ur(this._r,255))+"%, "+Math.round(100*Ur(this._g,255))+"%, "+Math.round(100*Ur(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(qd[vu(this._r,this._g,this._b,!0)]||!1)},toFilter:function(g){var _="#"+ya(this._r,this._g,this._b,this._a),O=_,E=this._gradientType?"GradientType = 1, ":"";if(g){var M=Tt(g);O="#"+ya(M._r,M._g,M._b,M._a)}return"progid:DXImageTransform.Microsoft.gradient("+E+"startColorstr="+_+",endColorstr="+O+")"},toString:function(g){var _=!!g;g=g||this._format;var O=!1,E=this._a<1&&this._a>=0;return _||!E||g!=="hex"&&g!=="hex6"&&g!=="hex3"&&g!=="hex4"&&g!=="hex8"&&g!=="name"?(g==="rgb"&&(O=this.toRgbString()),g==="prgb"&&(O=this.toPercentageRgbString()),g!=="hex"&&g!=="hex6"||(O=this.toHexString()),g==="hex3"&&(O=this.toHexString(!0)),g==="hex4"&&(O=this.toHex8String(!0)),g==="hex8"&&(O=this.toHex8String()),g==="name"&&(O=this.toName()),g==="hsl"&&(O=this.toHslString()),g==="hsv"&&(O=this.toHsvString()),O||this.toHexString()):g==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return Tt(this.toString())},_applyModification:function(g,_){var O=g.apply(null,[this].concat([].slice.call(_)));return this._r=O._r,this._g=O._g,this._b=O._b,this.setAlpha(O._a),this},lighten:function(){return this._applyModification(hp,arguments)},brighten:function(){return this._applyModification(Fh,arguments)},darken:function(){return this._applyModification(dp,arguments)},desaturate:function(){return this._applyModification(Bh,arguments)},saturate:function(){return this._applyModification(ln,arguments)},greyscale:function(){return this._applyModification(yo,arguments)},spin:function(){return this._applyModification(pg,arguments)},_applyCombination:function(g,_){return g.apply(null,[this].concat([].slice.call(_)))},analogous:function(){return this._applyCombination(Vd,arguments)},complement:function(){return this._applyCombination(vp,arguments)},monochromatic:function(){return this._applyCombination(pu,arguments)},splitcomplement:function(){return this._applyCombination(Gd,arguments)},triad:function(){return this._applyCombination(pp,[3])},tetrad:function(){return this._applyCombination(pp,[4])}},Tt.fromRatio=function(g,_){if(cs(g)=="object"){var O={};for(var E in g)g.hasOwnProperty(E)&&(O[E]=E==="a"?g[E]:Mc(g[E]));g=O}return Tt(g,_)},Tt.equals=function(g,_){return!(!g||!_)&&Tt(g).toRgbString()==Tt(_).toRgbString()},Tt.random=function(){return Tt.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},Tt.mix=function(g,_,O){O=O===0?0:O||50;var E=Tt(g).toRgb(),M=Tt(_).toRgb(),I=O/100;return Tt({r:(M.r-E.r)*I+E.r,g:(M.g-E.g)*I+E.g,b:(M.b-E.b)*I+E.b,a:(M.a-E.a)*I+E.a})},Tt.readability=function(g,_){var O=Tt(g),E=Tt(_);return(Math.max(O.getLuminance(),E.getLuminance())+.05)/(Math.min(O.getLuminance(),E.getLuminance())+.05)},Tt.isReadable=function(g,_,O){var E,M,I,F,q,G=Tt.readability(g,_);switch(M=!1,(F=((I=(I=O)||{level:"AA",size:"small"}).level||"AA").toUpperCase())!=="AA"&&F!=="AAA"&&(F="AA"),(q=(I.size||"small").toLowerCase())!=="small"&&q!=="large"&&(q="small"),(E={level:F,size:q}).level+E.size){case"AAsmall":case"AAAlarge":M=G>=4.5;break;case"AAlarge":M=G>=3;break;case"AAAsmall":M=G>=7}return M},Tt.mostReadable=function(g,_,O){var E,M,I,F,q=null,G=0;M=(O=O||{}).includeFallbackColors,I=O.level,F=O.size;for(var Y=0;Y<_.length;Y++)(E=Tt.readability(g,_[Y]))>G&&(G=E,q=Tt(_[Y]));return Tt.isReadable(g,q,{level:I,size:F})||!M?q:(O.includeFallbackColors=!1,Tt.mostReadable(g,["#fff","#000"],O))};var ao=Tt.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},qd=Tt.hexNames=function(g){var _={};for(var O in g)g.hasOwnProperty(O)&&(_[g[O]]=O);return _}(ao);function zi(g){return g=parseFloat(g),(isNaN(g)||g<0||g>1)&&(g=1),g}function Ur(g,_){(function(E){return typeof E=="string"&&E.indexOf(".")!=-1&&parseFloat(E)===1})(g)&&(g="100%");var O=function(E){return typeof E=="string"&&E.indexOf("%")!=-1}(g);return g=Math.min(_,Math.max(0,parseFloat(g))),O&&(g=parseInt(g*_,10)/100),Math.abs(g-_)<1e-6?1:g%_/parseFloat(_)}function Uh(g){return Math.min(1,Math.max(0,g))}function Ko(g){return parseInt(g,16)}function Po(g){return g.length==1?"0"+g:""+g}function Mc(g){return g<=1&&(g=100*g+"%"),g}function zh(g){return Math.round(255*parseFloat(g)).toString(16)}function Wd(g){return Ko(g)/255}var gu,yu,Gh,ma=(yu="[\\s|\\(]+("+(gu="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+gu+")[,|\\s]+("+gu+")\\s*\\)?",Gh="[\\s|\\(]+("+gu+")[,|\\s]+("+gu+")[,|\\s]+("+gu+")[,|\\s]+("+gu+")\\s*\\)?",{CSS_UNIT:new RegExp(gu),rgb:new RegExp("rgb"+yu),rgba:new RegExp("rgba"+Gh),hsl:new RegExp("hsl"+yu),hsla:new RegExp("hsla"+Gh),hsv:new RegExp("hsv"+yu),hsva:new RegExp("hsva"+Gh),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function fs(g){return!!ma.CSS_UNIT.exec(g)}var gp=function(g){return Tt.mostReadable(g,[Qe,"#FFFFFF"]).toString()},Nl=function(g){return Ld().get.rgb(g)},Mf=function(g){var _=new ArrayBuffer(4),O=new Uint32Array(_),E=new Uint8Array(_),M=Nl(g);return E[0]=M[0],E[1]=M[1],E[2]=M[2],E[3]=255*M[3],O[0]},Hu=function(g){return[(_=Nl(g))[0]/255,_[1]/255,_[2]/255];var _};function Hd(g,_){return function(O){if(Array.isArray(O))return O}(g)||function(O,E){var M=O==null?null:typeof Symbol<"u"&&O[Symbol.iterator]||O["@@iterator"];if(M!=null){var I,F,q,G,Y=[],X=!0,J=!1;try{if(q=(M=M.call(O)).next,E!==0)for(;!(X=(I=q.call(M)).done)&&(Y.push(I.value),Y.length!==E);X=!0);}catch(ie){J=!0,F=ie}finally{try{if(!X&&M.return!=null&&(G=M.return(),Object(G)!==G))return}finally{if(J)throw F}}return Y}}(g,_)||function(O,E){if(O){if(typeof O=="string")return Yd(O,E);var M=Object.prototype.toString.call(O).slice(8,-1);return M==="Object"&&O.constructor&&(M=O.constructor.name),M==="Map"||M==="Set"?Array.from(O):M==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(M)?Yd(O,E):void 0}}(g,_)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Yd(g,_){(_==null||_>g.length)&&(_=g.length);for(var O=0,E=new Array(_);O<_;O++)E[O]=g[O];return E}var Vh=function(g){var _=g.x,O=_===void 0?0:_,E=g.y,M=E===void 0?0:E,I=g.size,F=I===void 0?Zn:I;return{top:M-F,left:O-F,right:O+F,bottom:M+F}},Lf=function(g,_,O,E,M,I){var F=arguments.length>6&&arguments[6]!==void 0?arguments[6]:ll,q=arguments.length>7&&arguments[7]!==void 0?arguments[7]:1,G=arguments.length>8&&arguments[8]!==void 0?arguments[8]:1,Y=_.x,X=Y===void 0?0:Y,J=_.y,ie=J===void 0?0:J,ce=_.size,ge=ce===void 0?Zn:ce,le=_.caption,ye=le===void 0?"":le,De=_.captions,Ne=De===void 0?[]:De,Fe=_.captionAlign,je=Fe===void 0?"center":Fe,Xe=_.captionSize,Ve=Xe===void 0?1:Xe,$e=_.disabled,Ke=_.activated,qe=_.selected,tt=_.hovered,mt=_.id,It=_.icon,bt=_.overlayIcon,Nt=rt(),St=function(Vi,ai,mu){var Zu=Vi.selected?mu.selected.rings:mu.default.rings;if(!Zu.length){var Hl=ai.getById(Vi.id);return Hl!==void 0&&Object.entries(Hl).forEach(function(Zh){var Yl=Hd(Zh,2),Gc=Yl[0],bu=Yl[1];Gc.startsWith("ring-")&&bu.setEndValue(0)}),[{width:0,color:""}]}return Zu.map(function(Zh,Yl){var Gc=Zh.widthFactor,bu=Zh.color,Ng=(Vi.size||Zn)*Gc*rt();return{width:ai.getValueForAnimationName(Vi.id,"ring-".concat(Yl),Ng),color:bu}})}(_,E,M),Pe=St.reduce(function(Vi,ai){return Vi+ai.width},0),Te=ge*Nt,Ae=2*Te,nt=function(Vi,ai){if(!Vi||!ai)return{nodeInfoLevel:0,fontInfoLevel:1.25,iconInfoLevel:1};var mu=rt(),Zu=1600*mu*(1200*mu),Hl=Math.pow(Vi,2)*Math.PI*Math.pow(ai,2)/(Zu/100);return{nodeInfoLevel:Mh(Hl,Rf),fontInfoLevel:Mh(Hl,Is),iconInfoLevel:Mh(Hl,fp)}}(Te,G),Ze=nt.nodeInfoLevel,ft=nt.fontInfoLevel,kt=nt.iconInfoLevel,Ut=_.color||F,zt=function(Vi){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zn)/({1:3.5,2:2.75,3:2}[arguments.length>2&&arguments[2]!==void 0?arguments[2]:1]+(arguments.length>3&&arguments[3]!==void 0&&arguments[3]?1:0))/Vi}(ft,Te,Ve,!!It),Sr=gp(Ut),Ir=Te;if(Pe>0&&(Ir=Te+Pe),$e)Ut=I.color,Sr=I.fontColor;else{var Wr;if(Ke){var xn=Date.now()%1e3/1e3,jn=xn<.7?xn/.7:0,yn=qu(Ut,.4-.4*jn);Wu(g,X,ie,yn,Te+.88*Te*jn)}var Zr=(Wr=M.selected.shadow)!==null&&Wr!==void 0?Wr:{width:0,opacity:0,color:""},Hr=Zr.width*Nt,sn=Zr.opacity,mn=Zr.color,ti=qe||tt?Hr:0,rn=E.getValueForAnimationName(mt,"shadowWidth",ti);rn>0&&function(Vi,ai,mu,Zu,Hl,Zh){var Yl=arguments.length>6&&arguments[6]!==void 0?arguments[6]:1,Gc=Hl+Zh,bu=Vi.createRadialGradient(ai,mu,Hl,ai,mu,Gc);bu.addColorStop(0,"transparent"),bu.addColorStop(.01,qu(Zu,.5*Yl)),bu.addColorStop(.05,qu(Zu,.5*Yl)),bu.addColorStop(.5,qu(Zu,.12*Yl)),bu.addColorStop(.75,qu(Zu,.03*Yl)),bu.addColorStop(1,qu(Zu,0)),Vi.fillStyle=bu,Dl(Vi,ai,mu,Gc),Vi.fill()}(g,X,ie,mn,Ir,rn,sn)}Wu(g,X,ie,Ut,Te),Pe>0&&Ac(g,X,ie,Te,St);var An=!!ye.length,ri=!!Ne.length,ni=!!It;if(It){var fi=Ze<2||!(An||ri),nn=Ze>0?1:0,mi=fi?1*Te:.75*Te;mi/=kt;var bn=fi?.5*mi:mi*(kt===1?je==="center"?1.3:je==="bottom"||fi?1.1:0:je==="center"?1.35:je==="bottom"||fi?1.1:0),ko=mi/2;mi=E.getValueForAnimationName(mt,"iconSize",mi),ko=E.getValueForAnimationName(mt,"iconXPos",ko),bn=E.getValueForAnimationName(mt,"iconYPos",bn);var Qo=g.globalAlpha,Ku=$e?.1:nn;g.globalAlpha=E.getValueForAnimationName(mt,"iconOpacity",Ku);var zl=Sr==="#ffffff",$u=O.getImage(It,zl);g.drawImage($u,X-ko,ie-bn,Math.floor(mi),Math.floor(mi)),g.globalAlpha=Qo}if(bt!==void 0){var za,ii,On,Gi,Jo,Do=Ae*((za=bt.size)!==null&&za!==void 0?za:1),Ns=Do/2-Te*((ii=(On=bt.position)===null||On===void 0?void 0:On[1])!==null&&ii!==void 0?ii:0),hi=Do/2-Te*((Gi=(Jo=bt.position)===null||Jo===void 0?void 0:Jo[0])!==null&&Gi!==void 0?Gi:0),Bc=g.globalAlpha,Vf=$e?.1:1;g.globalAlpha=E.getValueForAnimationName(mt,"iconOpacity",Vf);var Gl=O.getImage(bt.url);g.drawImage(Gl,X-hi,ie-Ns,Do,Do),g.globalAlpha=Bc}if(An||ri){var vv=Ze<2?0:1,Fc=E.getValueForAnimationName(mt,"textOpacity",vv,0);if(Fc>0){var Vl,Uc,js='"Open Sans", sans-serif',Bs=2;ft===((Vl=Is[1])===null||Vl===void 0?void 0:Vl[1])?Bs=3:ft===((Uc=Is[2])===null||Uc===void 0?void 0:Uc[1])&&(Bs=4);var qf=je==="center"?.7*Ae:2*Math.sqrt(Math.pow(Ae/2,2)-Math.pow(Ae/3,2));if(g.fillStyle=qu(Sr,Fc),ri){var ql,Wf=Fd(Ne),zc=Wf.stylesPerChar,Kh=Wf.fullCaption,Hf=ja(g,Kh,js,zt,qf,ni,Bs,_==null||_.captionAlign),oi=-(Hf.length-2)*zt/2;ql=je&&je!=="center"?je==="bottom"?oi+Te/Math.PI:oi-Te/Math.PI:oi,Ud(g,Hf,zc,ql,zt,js,zt,X,ie,q)}else if(An){var bi=ja(g,ye,js,zt,qf,ni,Bs,_==null||_.captionAlign),$h=-(bi.length-2)*zt/2,Wl=ye.split("").map(function(Vi){return[]});Ud(g,bi,Wl,$h,zt,js,zt,X,ie,q)}}}};function jl(g){return jl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},jl(g)}function hs(g,_){var O=Object.keys(g);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(g);_&&(E=E.filter(function(M){return Object.getOwnPropertyDescriptor(g,M).enumerable})),O.push.apply(O,E)}return O}function ci(g){for(var _=1;_<arguments.length;_++){var O=arguments[_]!=null?arguments[_]:{};_%2?hs(Object(O),!0).forEach(function(E){so(g,E,O[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(O)):hs(Object(O)).forEach(function(E){Object.defineProperty(g,E,Object.getOwnPropertyDescriptor(O,E))})}return g}function Lc(g,_){var O=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!O){if(Array.isArray(g)||(O=function(G,Y){if(G){if(typeof G=="string")return Xd(G,Y);var X=Object.prototype.toString.call(G).slice(8,-1);return X==="Object"&&G.constructor&&(X=G.constructor.name),X==="Map"||X==="Set"?Array.from(G):X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X)?Xd(G,Y):void 0}}(g))||_){O&&(g=O);var E=0,M=function(){};return{s:M,n:function(){return E>=g.length?{done:!0}:{done:!1,value:g[E++]}},e:function(G){throw G},f:M}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I,F=!0,q=!1;return{s:function(){O=O.call(g)},n:function(){var G=O.next();return F=G.done,G},e:function(G){q=!0,I=G},f:function(){try{F||O.return==null||O.return()}finally{if(q)throw I}}}}function Xd(g,_){(_==null||_>g.length)&&(_=g.length);for(var O=0,E=new Array(_);O<_;O++)E[O]=g[O];return E}function $o(g,_){for(var O=0;O<_.length;O++){var E=_[O];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,yp(E.key),E)}}function so(g,_,O){return(_=yp(_))in g?Object.defineProperty(g,_,{value:O,enumerable:!0,configurable:!0,writable:!0}):g[_]=O,g}function yp(g){var _=function(O,E){if(jl(O)!="object"||!O)return O;var M=O[Symbol.toPrimitive];if(M!==void 0){var I=M.call(O,"string");if(jl(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(O)}(g);return jl(_)=="symbol"?_:String(_)}var Yu="canvasRenderer",Kd=function(){function g(E,M,I){var F=this,q=(arguments.length>3&&arguments[3]!==void 0?arguments[3]:{}).relationshipThreshold,G=q===void 0?0:q;(function(Y,X){if(!(Y instanceof X))throw new TypeError("Cannot call a class as a function")})(this,g),so(this,"arrowBundler",void 0),so(this,"activeNodes",void 0),so(this,"canvas",void 0),so(this,"context",void 0),so(this,"state",void 0),so(this,"stateDisposers",void 0),so(this,"relationshipThreshold",void 0),so(this,"animationHandler",void 0),so(this,"imageCache",void 0),so(this,"needsRun",void 0),so(this,"nodeVersion",void 0),so(this,"relVersion",void 0),so(this,"waypointVersion",void 0),so(this,"ellipsisWidth",void 0),M!==null&&(this.activeNodes=new Set,this.canvas=E,this.context=M,this.state=I,this.stateDisposers=[],this.stateDisposers.push(I.autorun(function(){I.zoom!==void 0&&(F.needsRun=!0),I.panX!==void 0&&(F.needsRun=!0),I.panY!==void 0&&(F.needsRun=!0),I.nodes.version!==void 0&&(F.needsRun=!0),I.rels.version!==void 0&&(F.needsRun=!0),I.waypoints.counter>0&&(F.needsRun=!0),I.layout!==void 0&&(F.needsRun=!0)})),I.nodes.addChannel(Yu),I.rels.addChannel(Yu),this.relationshipThreshold=G,this.nodeVersion=I.nodes.version,this.relVersion=I.rels.version,this.waypointVersion=I.waypoints.counter,this.animationHandler=new Of,this.animationHandler.setOptions({fadeDuration:150,sizeDuration:150}),this.arrowBundler=new Gu(I.rels.items,I.waypoints.data),this.imageCache=new Rd,this.needsRun=!0,this.ellipsisWidth=M.measureText(kl).width)}var _,O;return _=g,O=[{key:"needsToRun",value:function(){return this.needsRun||this.animationHandler.needsToRun()||this.activeNodes.size>0}},{key:"processUpdates",value:function(){var E=this.state,M=!1,I=E.nodes.channels[Yu],F=E.rels.channels[Yu],q=I.adds,G=I.removes,Y=F.adds,X=F.removes;this.nodeVersion<E.nodes.version&&(Object.keys(q).length>0||Object.keys(G).length,this.handleChannelUpdate(I,E.nodes,!0),this.nodeVersion=E.nodes.version,E.nodes.clearChannel(Yu)),this.relVersion<E.rels.version&&(M=Object.keys(Y).length>0||Object.keys(X).length>0,E.rels.clearChannel(Yu),this.relVersion=E.rels.version),(M||this.waypointVersion<E.waypoints.counter)&&(this.arrowBundler.updateData(Y,X,E.waypoints.data),this.waypointVersion=E.waypoints.counter)}},{key:"render",value:function(E){var M,I,F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},q=this.state,G=this.animationHandler,Y=this.arrowBundler,X=q.zoom,J=q.layout,ie=q.nodes.idToPosition,ce=(M=F.canvas)!==null&&M!==void 0?M:this.canvas,ge=(I=F.context)!==null&&I!==void 0?I:this.context,le=rt(),ye=ce.clientWidth*le,De=ce.clientHeight*le;ge.save(),F.backgroundColor!==void 0?(ge.fillStyle=F.backgroundColor,ge.fillRect(0,0,ye,De)):ge.clearRect(0,0,ye,De),this.zoomAndPan(ge,ce),G.ignoreAnimations(!!F.ignoreAnimations),F.ignoreAnimations!==!0&&G.advance(),Y.updatePositions(ie);var Ne=this.getRelationshipsToRender(F.showCaptions,ye,De);this.renderRelationships(Ne,ge,J!==xl);var Fe=this.getNodesToRender(E,ye,De);this.renderNodes(Fe,ge,X),ge.restore(),this.needsRun=!1}},{key:"getRelationshipsToRender",value:function(E,M,I){var F,q=[],G=[],Y=[],X=this.arrowBundler,J=this.state,ie=this.relationshipThreshold,ce=J.layout,ge=J.zoom,le=J.rels,ye=J.nodes,De=ye.idToItem,Ne=ye.idToPosition,Fe=Lc(le.items);try{for(Fe.s();!(F=Fe.n()).done;){var je=F.value,Xe=X.getBundle(je),Ve=ci(ci({},De[je.from]),Ne[je.from]),$e=ci(ci({},De[je.to]),Ne[je.to]),Ke=E||ge>ie||je.captionHtml!==void 0,qe=Co(je,Xe,Ve,$e,Ke,ce!==xl);if(qe!==null){var tt,mt,It,bt,Nt,St,Pe=this.isBoundingBoxOffScreen(qe,M,I),Te=Yo({x:(tt=Ve.x)!==null&&tt!==void 0?tt:0,y:(mt=Ve.y)!==null&&mt!==void 0?mt:0},{x:(It=$e.x)!==null&&It!==void 0?It:0,y:(bt=$e.y)!==null&&bt!==void 0?bt:0}),Ae=(((Nt=Ve.size)!==null&&Nt!==void 0?Nt:Zn)+((St=$e.size)!==null&&St!==void 0?St:Zn))*devicePixelRatio,nt=Ve.id!==$e.id&&Ae>Te;Pe||nt||(je.disabled===!0?G.push(ci(ci({},je),{},{fromNode:Ve,toNode:$e,showLabel:Ke})):je.selected===!0?q.push(ci(ci({},je),{},{fromNode:Ve,toNode:$e,showLabel:Ke})):Y.push(ci(ci({},je),{},{fromNode:Ve,toNode:$e,showLabel:Ke})))}}}catch(Ze){Fe.e(Ze)}finally{Fe.f()}return[].concat(G,Y,q)}},{key:"getNodesToRender",value:function(E,M,I){var F,q=[],G=[],Y=[],X=this.state.nodes.idToItem,J=Lc(E);try{for(J.s();!(F=J.n()).done;){var ie,ce,ge=F.value,le=Vh(ge);this.isBoundingBoxOffScreen(le,M,I)||(((ie=X[ge.id])===null||ie===void 0?void 0:ie.disabled)===!0?q.push(ci({},ge)):((ce=X[ge.id])===null||ce===void 0?void 0:ce.selected)===!0?G.push(ci({},ge)):Y.push(ci({},ge)))}}catch(ye){J.e(ye)}finally{J.f()}return[].concat(q,Y,G)}},{key:"renderNodes",value:function(E,M,I){var F,q=this.imageCache,G=this.animationHandler,Y=this.state,X=this.ellipsisWidth,J=Y.nodes.idToItem,ie=Y.nodeBorderStyles,ce=Y.disabledItemStyles,ge=Y.defaultNodeColor,le=Lc(E);try{for(le.s();!(F=le.n()).done;){var ye=F.value;Lf(M,ci(ci({},J[ye.id]),ye),q,G,ie,ce,ge,X,I)}}catch(De){le.e(De)}finally{le.f()}}},{key:"renderRelationships",value:function(E,M,I){var F,q=this.state.relationshipBorderStyles.selected,G=this.arrowBundler,Y=this.imageCache,X=this.state,J=X.disabledItemStyles,ie=X.defaultRelationshipColor,ce=Lc(E);try{for(ce.s();!(F=ce.n()).done;){var ge=F.value,le=G.getBundle(ge),ye=ge.fromNode,De=ge.toNode,Ne=ge.showLabel;kc(M,ge,ye,De,le,Y,Ne,q,J,ie,I)}}catch(Fe){ce.e(Fe)}finally{ce.f()}}},{key:"getNodesAt",value:function(E){var M,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,F=[],q=this.state.nodes,G=q.items,Y=q.idToPosition,X=rt(),J=Lc(G);try{var ie=function(){var ce=M.value,ge=ce.id,le=ce.size,ye=le===void 0?Zn:le,De=Y[ge],Ne=De.x,Fe=De.y,je=Math.sqrt(Math.pow(E.x-Ne,2)+Math.pow(E.y-Fe,2));if(je<=(ye+I)*X){var Xe=F.findIndex(function(Ve){return Ve.distance>je});F.splice(Xe!==-1?Xe:F.length,0,{data:ce,targetCoordinates:{x:Ne,y:Fe},pointerCoordinates:E,distanceVector:{x:E.x-Ne,y:E.y-Fe},insideNode:je<=ye*X,distance:je})}};for(J.s();!(M=J.n()).done;)ie()}catch(ce){J.e(ce)}finally{J.f()}return F}},{key:"getRelsAt",value:function(E){var M,I=[],F=this.state,q=this.arrowBundler,G=this.relationshipThreshold,Y=F.zoom,X=F.rels.items,J=F.nodes.idToPosition,ie=F.layout,ce=Y>G,ge=Lc(X);try{var le=function(){var ye=M.value,De=q.getBundle(ye),Ne=J[ye.from],Fe=J[ye.to];if(Ne!==void 0&&Fe!==void 0&&De.indexOf(ye)!==-1){var je=function(Ve,$e,Ke,qe,tt,mt){var It=arguments.length>6&&arguments[6]!==void 0&&arguments[6];if(!Pf(Ke,qe))return 1/0;var bt=Ke===qe?function(Nt,St,Pe,Te){var Ae=Df(St,Pe,Te),nt=Ae.startPoint,Ze=Ae.endPoint,ft=Ae.apexPoint,kt=Ae.control1Point,Ut=Ae.control2Point,zt=Rs(nt,ft,kt,Nt),Sr=Rs(ft,Ze,Ut,Nt);return Math.min(zt,Sr)}(Ve,$e,Ke,tt):function(Nt,St,Pe,Te,Ae,nt,Ze){var ft=Xo(St,Pe,Te,Ae,nt,Ze),kt=1/0;if(Ze&&ft.length===3)kt=Rs(ft[0],ft[2],ft[1],Nt);else for(var Ut=1;Ut<ft.length;Ut++){var zt=ft[Ut-1],Sr=ft[Ut],Ir=us(zt,Sr,Nt);kt=Ir<kt?Ir:kt}return kt}(Ve,$e,tt,Ke,qe,mt,It);return bt}(E,ye,Ne,Fe,De,ce,ie!==xl);if(je<10){var Xe=I.findIndex(function(Ve){return Ve.distance>je});I.splice(Xe!==-1?Xe:I.length,0,{data:ye,fromTargetCoordinates:Ne,toTargetCoordinates:Fe,pointerCoordinates:E,distance:je})}}};for(ge.s();!(M=ge.n()).done;)le()}catch(ye){ge.e(ye)}finally{ge.f()}return I}},{key:"destroy",value:function(){this.stateDisposers.forEach(function(E){E()}),this.state.nodes.removeChannel(Yu),this.state.rels.removeChannel(Yu)}},{key:"isBoundingBoxOffScreen",value:function(E,M,I){var F=this.state,q=F.zoom,G=M/q,Y=I/q,X=F.panX-G/2,J=F.panY-Y/2,ie=E.right<X,ce=E.bottom<J,ge=E.left>X+G,le=E.top>J+Y;return ie||ge||ce||le}},{key:"handleChannelUpdate",value:function(E,M,I){for(var F=Object.keys(E.adds),q=0;q<F.length;q++){var G=F[q];E.adds[G].activated&&this.activeNodes.add(G)}for(var Y=Object.keys(E.removes),X=0;X<Y.length;X++){var J=Y[X];this.activeNodes.delete(J)}if(I)for(var ie=Object.keys(E.updates),ce=0;ce<ie.length;ce++){var ge=ie[ce];M.idToItem[ge].activated?this.activeNodes.add(ge):this.activeNodes.delete(ge)}}},{key:"zoomAndPan",value:function(E,M){var I=M.width,F=M.height,q=this.state,G=q.zoom,Y=q.panX,X=q.panY;E.translate(-I/2*G,-F/2*G),E.translate(-Y*G,-X*G),E.scale(G,G),E.translate(I/2/G,F/2/G),E.translate(I/2,F/2)}}],O&&$o(_.prototype,O),Object.defineProperty(_,"prototype",{writable:!1}),g}(),qh=function(g,_){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,M=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,I=function(F,q){if((0,r.isNil)(F)||(0,r.isNil)(q))return{offsetX:0,offsetY:0};var G=q.getBoundingClientRect(),Y=window.devicePixelRatio||1;return{offsetX:Y*(F.clientX-G.left-.5*G.width),offsetY:Y*(F.clientY-G.top-.5*G.height)}}(g,_);return{x:E+I.offsetX/O,y:M+I.offsetY/O}};function Nf(g){return Nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},Nf(g)}function mp(g,_){if(!(g instanceof _))throw new TypeError("Cannot call a class as a function")}function gg(g,_){for(var O=0;O<_.length;O++){var E=_[O];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,Zd(E.key),E)}}function $d(g,_,O){return _&&gg(g.prototype,_),Object.defineProperty(g,"prototype",{writable:!1}),g}function Fa(g,_,O){return(_=Zd(_))in g?Object.defineProperty(g,_,{value:O,enumerable:!0,configurable:!0,writable:!0}):g[_]=O,g}function Zd(g){var _=function(O,E){if(Nf(O)!="object"||!O)return O;var M=O[Symbol.toPrimitive];if(M!==void 0){var I=M.call(O,"string");if(Nf(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(O)}(g);return Nf(_)=="symbol"?_:String(_)}var Ao="WebGLRenderer",Wh=function(){function g(_){var O=this;if(mp(this,g),Fa(this,"mainSceneRenderer",void 0),Fa(this,"minimapRenderer",void 0),Fa(this,"needsRun",void 0),Fa(this,"minimapMouseDown",void 0),Fa(this,"stateDisposers",void 0),Fa(this,"state",void 0),_.state===void 0)throw new Error("Renderer missing options: state - state object");var E=_.state,M=_.mainSceneRenderer,I=_.minimapRenderer,F=E.nodes,q=E.rels;this.mainSceneRenderer=M,this.minimapRenderer=I,this.needsRun=!1,this.minimapMouseDown=!1,this.stateDisposers=[],this.stateDisposers.push(E.autorun(function(){O.updateMainViewport(E.zoom,E.panX,E.panY)})),this.stateDisposers.push(E.autorun(function(){O.updateMinimapViewport(E.minimapZoom,E.minimapPanX,E.minimapPanY)})),this.stateDisposers.push(E.autorun(function(){E.nodes.version!==void 0&&(O.needsRun=!0),E.rels.version!==void 0&&(O.needsRun=!0)})),F.addChannel(Ao),q.addChannel(Ao),this.state=E,this.setupMinimapInteractions()}return $d(g,[{key:"needsToRun",value:function(){return this.needsRun||Object.keys(this.mainSceneRenderer.activeNodes).length>0}},{key:"renderMainScene",value:function(_){var O=this.state,E=O.nodes,M=O.rels;this.checkForUpdates(E,M),this.mainSceneRenderer.render(_,E,M),this.needsRun=!1}},{key:"renderMinimap",value:function(_){var O=this.state,E=O.nodes,M=O.rels;this.checkForUpdates(E,M),this.minimapRenderer.render(_,E,M),this.minimapRenderer.renderViewbox(),this.needsRun=!1}},{key:"checkForUpdates",value:function(_,O){var E=Object.values(_.channels[Ao].adds).length>0,M=Object.values(O.channels[Ao].adds).length>0,I=Object.values(_.channels[Ao].removes).length>0,F=Object.values(O.channels[Ao].removes).length>0,q=Object.values(_.channels[Ao].updates),G=Object.values(O.channels[Ao].updates);E||M||I||F?(this.mainSceneRenderer.setData({nodes:_.items,rels:O.items}),this.minimapRenderer.setData({nodes:_.items,rels:O.items})):(q.length>0&&(this.mainSceneRenderer.updateNodes(q),this.minimapRenderer.updateNodes(q)),G.length>0&&(this.mainSceneRenderer.updateRelationships(O.items),this.minimapRenderer.updateRelationships(O.items))),_.clearChannel(Ao),O.clearChannel(Ao)}},{key:"onResize",value:function(){var _=this.state,O=_.zoom,E=_.panX,M=_.panY,I=_.minimapZoom,F=_.minimapPanX,q=_.minimapPanY;this.updateMainViewport(O,E,M),this.updateMinimapViewport(I,F,q)}},{key:"updateMainViewport",value:function(_,O,E){this.mainSceneRenderer.updateViewport(_,O,E);var M=this.mainSceneRenderer.canvas.clientWidth,I=this.mainSceneRenderer.canvas.clientHeight;this.minimapRenderer.updateViewportBox(_,O,E,M,I),this.needsRun=!0}},{key:"updateMinimapViewport",value:function(_,O,E){this.minimapRenderer.updateViewport(_,O,E),this.needsRun=!0}},{key:"handleMinimapDrag",value:function(_){var O=this.state,E=this.minimapRenderer,M=qh(_,E.canvas,O.minimapZoom,O.minimapPanX,O.minimapPanY),I=M.x,F=M.y;O.setPan(I,F)}},{key:"handleMinimapWheel",value:function(_){var O=this.state,E=this.mainSceneRenderer;O.setZoom(function(M){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return(0,r.isNil)(M)||isNaN(M.deltaY)?I:I-M.deltaY/500*Math.min(1,I)}(_,O.zoom),E.canvas),_.preventDefault()}},{key:"setupMinimapInteractions",value:function(){var _=this,O=this.minimapRenderer.canvas;O.addEventListener("mousedown",function(E){_.handleMinimapDrag(E),_.minimapMouseDown=!0}),O.addEventListener("mousemove",function(E){_.minimapMouseDown&&_.handleMinimapDrag(E)}),O.addEventListener("mouseup",function(){_.minimapMouseDown=!1}),O.addEventListener("mouseleave",function(){_.minimapMouseDown=!1}),O.addEventListener("wheel",function(E){_.handleMinimapWheel(E)})}},{key:"destroy",value:function(){this.stateDisposers.forEach(function(_){_()}),this.state.nodes.removeChannel(Ao),this.state.rels.removeChannel(Ao),this.mainSceneRenderer.destroy(),this.minimapRenderer.destroy()}}]),g}(),Qd=function(){function g(){mp(this,g),Fa(this,"mainSceneRenderer",void 0),Fa(this,"minimapRenderer",void 0),Fa(this,"needsRun",void 0),Fa(this,"minimapMouseDown",void 0),Fa(this,"stateDisposers",void 0),Fa(this,"state",void 0)}return $d(g,[{key:"renderMainScene",value:function(_){}},{key:"renderMinimap",value:function(_){}},{key:"checkForUpdates",value:function(_,O){}},{key:"onResize",value:function(){}},{key:"updateMainViewport",value:function(_,O,E){}},{key:"updateMinimapViewport",value:function(_,O,E){}},{key:"handleMinimapDrag",value:function(_){}},{key:"handleMinimapWheel",value:function(_){}},{key:"setupMinimapInteractions",value:function(){}},{key:"destroy",value:function(){}},{key:"needsToRun",value:function(){return!1}}]),g}();function jf(g){return jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},jf(g)}function Jd(g,_){var O=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!O){if(Array.isArray(g)||(O=function(G,Y){if(G){if(typeof G=="string")return ev(G,Y);var X=Object.prototype.toString.call(G).slice(8,-1);return X==="Object"&&G.constructor&&(X=G.constructor.name),X==="Map"||X==="Set"?Array.from(G):X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X)?ev(G,Y):void 0}}(g))||_){O&&(g=O);var E=0,M=function(){};return{s:M,n:function(){return E>=g.length?{done:!0}:{done:!1,value:g[E++]}},e:function(G){throw G},f:M}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I,F=!0,q=!1;return{s:function(){O=O.call(g)},n:function(){var G=O.next();return F=G.done,G},e:function(G){q=!0,I=G},f:function(){try{F||O.return==null||O.return()}finally{if(q)throw I}}}}function ev(g,_){(_==null||_>g.length)&&(_=g.length);for(var O=0,E=new Array(_);O<_;O++)E[O]=g[O];return E}function yg(g,_){for(var O=0;O<_.length;O++){var E=_[O];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,bp(E.key),E)}}function Jn(g,_,O){return(_=bp(_))in g?Object.defineProperty(g,_,{value:O,enumerable:!0,configurable:!0,writable:!0}):g[_]=O,g}function bp(g){var _=function(O,E){if(jf(O)!="object"||!O)return O;var M=O[Symbol.toPrimitive];if(M!==void 0){var I=M.call(O,"string");if(jf(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(O)}(g);return jf(_)=="symbol"?_:String(_)}var tv,A=24,L=function(){function g(E,M,I,F){var q;if(function(G,Y){if(!(G instanceof Y))throw new TypeError("Cannot call a class as a function")}(this,g),Jn(this,"nodeShader",void 0),Jn(this,"nodeAnimShader",void 0),Jn(this,"relShader",void 0),Jn(this,"relDataBuffer",void 0),Jn(this,"viewportBoxShader",void 0),Jn(this,"defaultRelColor",void 0),Jn(this,"defaultNodeColor",void 0),Jn(this,"disableRelColor",void 0),Jn(this,"disableNodeColor",void 0),Jn(this,"gl",void 0),Jn(this,"activeNodes",void 0),Jn(this,"canvas",void 0),Jn(this,"projection",void 0),Jn(this,"idToIndex",void 0),Jn(this,"posBuffer",void 0),Jn(this,"numRels",void 0),Jn(this,"numNodes",void 0),Jn(this,"nodeDataByte",void 0),Jn(this,"relIdToIndex",void 0),Jn(this,"relData",void 0),Jn(this,"viewportBoxBuffer",void 0),Jn(this,"relBuffer",void 0),Jn(this,"nodeBuffer",void 0),Jn(this,"posTexture",void 0),((q=E.getExtension("OES_texture_float"))!==null&&q!==void 0?q:void 0)===void 0)throw new Error("Renderer needs floating point texture support");this.nodeShader=new ua(E,`uniform mat4 u_projection;
uniform sampler2D u_positions;
uniform mediump float u_zoom;
uniform mediump float u_glAdjust;
uniform lowp vec3 u_nodeBorderColor;
uniform lowp vec3 u_selectedBorderColor;
uniform lowp vec3 u_selectedInnerBorderColor;
uniform lowp vec3 u_shadowColor;
uniform lowp float u_drawDefaultBorder;

attribute float a_size;
attribute lowp vec2 a_index;
attribute lowp vec4 a_color;
attribute lowp float a_selected;
attribute lowp float a_hovered;

varying lowp float window;
varying lowp vec4 color;
varying lowp float selected;
varying lowp float hovered;
varying lowp float varNodeSize;
varying lowp vec3 nodeBorderColor;
varying lowp vec3 selectedBorderColor;
varying lowp vec3 selectedInnerBorderColor;
varying lowp vec3 shadowColor;
varying lowp float drawDefaultBorder;

lowp float MinNodeSize = 5.0;

void main(void) {
  vec4 data = texture2D(u_positions, a_index);
  gl_Position = u_projection * vec4(data.xy, 0.0, 1.0);

  lowp float nodeSize = a_size * u_zoom * u_glAdjust;
  if (nodeSize < MinNodeSize) {
   gl_PointSize = MinNodeSize;
   varNodeSize = MinNodeSize;
  } else {
    gl_PointSize = nodeSize;
    varNodeSize = nodeSize;
  }

  color = a_color;
  selected = a_selected;
  hovered = a_hovered;
  nodeBorderColor = u_nodeBorderColor;
  selectedBorderColor = u_selectedBorderColor;
  selectedInnerBorderColor = u_selectedInnerBorderColor;
  shadowColor = u_shadowColor;
  drawDefaultBorder = u_drawDefaultBorder;
}`,`uniform mediump float u_zoom;
uniform mediump float u_glAdjust;

varying lowp vec4 color;
varying lowp float drawDefaultBorder;
varying lowp vec3 nodeBorderColor;
varying lowp vec3 selectedBorderColor;
varying lowp vec3 selectedInnerBorderColor;
varying lowp vec3 shadowColor;
varying lowp float selected;
varying lowp float hovered;
varying lowp float varNodeSize;

mediump float circleSize = 0.40;
mediump float defaultBoderSize = 0.42;
mediump float innerSelectedRingSize = 0.43;
mediump float outerSelectedRingSize = 0.47;
mediump float shadowSize = 0.51;

lowp float getShadowAlpha(lowp float size, lowp float dist) {
  return (1.0 - smoothstep(size, shadowSize, dist)) * 0.25;
}

lowp float getCircleAlpha(lowp float ringSize, lowp float nodeSize, lowp float dist) {
  return color.w - smoothstep(ringSize - nodeSize, ringSize, dist);
}

void main() {
  lowp float dist = distance(gl_PointCoord, vec2(0.5));

  if (dist > 0.51) {
    discard;
  }
  else {
    lowp float nodeSize = 1.0 / varNodeSize;
    lowp float nodeAlpha = getCircleAlpha(circleSize, nodeSize, dist);
    lowp float borderAlpha = getCircleAlpha(defaultBoderSize, nodeSize, dist);
    lowp float ringAlpha = getCircleAlpha(innerSelectedRingSize, nodeSize, dist);
    lowp vec3 finalColor = color.xyz;
    lowp float finalAlpha = nodeAlpha;

    if (selected > 0.0) {
      lowp float shadowAlpha = getShadowAlpha(outerSelectedRingSize, dist);
      lowp float ringAlpha2 = getCircleAlpha(outerSelectedRingSize, nodeSize, dist);

      if (drawDefaultBorder > 0.0) {
        finalColor = mix(nodeBorderColor, finalColor, nodeAlpha);
        finalColor = mix(selectedInnerBorderColor, finalColor, borderAlpha);
        finalColor = mix(selectedBorderColor, finalColor, ringAlpha);
        finalColor = mix(shadowColor, finalColor, ringAlpha2);
        finalAlpha = max(shadowAlpha, max(nodeAlpha, max(borderAlpha, ringAlpha2)));
      } else {
        finalColor = mix(selectedInnerBorderColor, finalColor, nodeAlpha);
        finalColor = mix(selectedBorderColor, finalColor, ringAlpha);
        finalColor = mix(shadowColor, finalColor, ringAlpha2);
        finalAlpha = max(shadowAlpha, max(nodeAlpha, max(ringAlpha, ringAlpha2)));
      }
    } else if (hovered > 0.0) {
      if (drawDefaultBorder > 0.0) {
        lowp float shadowAlpha = getShadowAlpha(defaultBoderSize, dist);
  
        finalColor = mix(nodeBorderColor, finalColor, nodeAlpha);
        finalColor = mix(shadowColor, finalColor, borderAlpha);
        finalAlpha = max(shadowAlpha, max(nodeAlpha, ringAlpha));
      } else {
        lowp float shadowAlpha = getShadowAlpha(circleSize, dist);

        finalColor = mix(shadowColor, finalColor, nodeAlpha);
        finalAlpha = max(shadowAlpha, nodeAlpha);
      }
    } else {
      if (drawDefaultBorder > 0.0) {
        finalColor = mix(nodeBorderColor, finalColor, nodeAlpha);
        finalAlpha = borderAlpha;
      }
    }
    gl_FragColor = vec4(finalColor, 1.0) * finalAlpha;
  }
}
`),this.nodeAnimShader=new ua(E,`uniform mat4 u_projection;
uniform sampler2D u_positions;
uniform lowp float u_animPos;
uniform mediump float u_zoom;
uniform mediump float u_glAdjust;

attribute float a_size;
attribute lowp vec2 a_index;
attribute lowp vec4 a_color;
attribute lowp float a_active;

varying lowp float varNodeSize;
varying lowp vec4 color;

void main(void) {
  vec4 data = texture2D(u_positions, a_index);

  gl_Position = u_projection * vec4(data.xy, 0.0, 1.0);

  float nodeSize = a_size * u_zoom * u_glAdjust;
  nodeSize = nodeSize * (0.4 / 0.5); // Remove extra space added for shadow and selection ring

  gl_PointSize = a_active > 0.5
    ? nodeSize + 0.88 * nodeSize * u_animPos
    : 0.0;

  color = a_color;
  varNodeSize = a_size;
}`,`uniform mediump float u_zoom;
uniform lowp float u_animPos;
uniform mediump float u_glAdjust;

varying lowp vec4 color;
varying lowp float varNodeSize;
mediump float circleSize = 0.50;

void main(void) {

  lowp float dist = distance(gl_PointCoord, vec2(0.5));

  if (dist > 0.51) {
    discard;
  }
  else {
    lowp float alpha = 1.0 - smoothstep(circleSize - (1.0 / (varNodeSize * 2.0 * u_zoom * u_glAdjust)), circleSize, dist);
    lowp float pulseAlpha = 0.9 - 0.9 * u_animPos;
    gl_FragColor = vec4(color.xyz, 1.0) * alpha * pulseAlpha;
  }
}
`),this.relShader=new ua(E,`uniform mat4 u_projection;
uniform sampler2D u_positions;
uniform mediump float u_glAdjust;

attribute vec2 a_from;
attribute vec2 a_to;
attribute lowp vec4 a_color;
attribute lowp float a_triside;
attribute float a_width;

varying lowp vec4 color;

void main(void) {
  vec4 from = texture2D(u_positions, a_from);
  vec4 to = texture2D(u_positions, a_to);
  vec2 direction = normalize(to.xy - from.xy);
  direction = vec2(-direction.y, direction.x);

  float width = a_width * u_glAdjust * 0.5;

  if (a_triside == 0.0) {
    from.y += (width / 2.0) * direction.y;
    from.x += (width / 2.0) * direction.x;
  } else {
    from.y -= (width / 2.0) * direction.y;
    from.x -= (width / 2.0) * direction.x;
  }

  color = a_color;
  gl_Position = u_projection * vec4(from.xy, 0.0, 1.0);
}
`,`varying lowp vec4 color;

void main(void) {
  gl_FragColor = vec4(color.xyz, 1.0) * color.w;
}
`),this.viewportBoxShader=new ua(E,`
attribute vec2 coordinates;
uniform mat4 u_projection;
uniform lowp vec4 u_minimapViewportBoxColor;

varying lowp vec4 minimapViewportBoxColor;

void main(void) {
  gl_Position = u_projection * vec4(coordinates, 0.0, 1.0);
  minimapViewportBoxColor = u_minimapViewportBoxColor;
}
`,`
varying lowp vec4 minimapViewportBoxColor;

void main(void) {
 gl_FragColor = minimapViewportBoxColor;
}
`),this.setShaderUniforms(F),E.clearColor(0,0,0,0),E.disable(E.DEPTH_TEST),this.defaultRelColor=F.defaultRelationshipColor,this.defaultNodeColor=F.defaultNodeColor,this.disableRelColor=F.disabledItemStyles.color,this.disableNodeColor=F.disabledItemStyles.color,E.blendFunc(E.ONE,E.ONE_MINUS_SRC_ALPHA),this.gl=E,this.activeNodes={},this.canvas=E.canvas,this.projection=ou(),this.setData({nodes:M.items,rels:I.items}),this.createPositionTexture(),this.setupViewportRendering(F.minimapViewportBoxColor)}var _,O;return _=g,O=[{key:"setShaderUniforms",value:function(E){var M,I,F,q,G,Y=E.nodeBorderStyles,X=null;((M=Y.default)===null||M===void 0?void 0:M.rings.length)>0&&(X=(G=Y.default.rings[0])===null||G===void 0?void 0:G.color);var J,ie,ce=null,ge=null,le=(I=(F=Y.selected)===null||F===void 0?void 0:F.rings)!==null&&I!==void 0?I:[],ye=le.length;ye>1&&(ge=(J=le[ye-2])===null||J===void 0?void 0:J.color,ce=(ie=le[ye-1])===null||ie===void 0?void 0:ie.color);var De=null;(q=Y.selected)!==null&&q!==void 0&&q.shadow&&(De=Y.selected.shadow.color),this.nodeShader.use(),(0,r.isNil)(X)?this.nodeShader.setUniform("u_drawDefaultBorder",0):(this.nodeShader.setUniform("u_nodeBorderColor",Hu(X)),this.nodeShader.setUniform("u_drawDefaultBorder",1));var Ne=Hu(ce),Fe=Hu(ge),je=Hu(De);this.nodeShader.setUniform("u_selectedBorderColor",Ne),this.nodeShader.setUniform("u_selectedInnerBorderColor",Fe),this.nodeShader.setUniform("u_shadowColor",je)}},{key:"setData",value:function(E){var M=yi(E.rels,this.disableRelColor);this.setupNodeRendering(E.nodes),this.setupRelationshipRendering(M)}},{key:"render",value:function(E,M,I){var F,q=this.gl,G=this.idToIndex,Y=Jd(E);try{for(Y.s();!(F=Y.n()).done;){var X=F.value,J=G[X.id];this.posBuffer[4*J+0]=X.x,this.posBuffer[4*J+1]=X.y}}catch(ie){Y.e(ie)}finally{Y.f()}q.bindTexture(q.TEXTURE_2D,this.posTexture),q.texImage2D(q.TEXTURE_2D,0,q.RGBA,rr,rr,0,q.RGBA,q.FLOAT,this.posBuffer),q.enable(q.BLEND),q.bindFramebuffer(q.FRAMEBUFFER,null),q.clear(q.COLOR_BUFFER_BIT),q.viewport(0,0,q.drawingBufferWidth,q.drawingBufferHeight),this.renderAnimations(this.posTexture),this.numRels>0&&(this.relShader.use(),this.relShader.setUniform("u_positions",this.posTexture),q.bindBuffer(q.ARRAY_BUFFER,this.relBuffer),this.relShader.setAttributePointerByteNorm("a_color",4,0,16),this.relShader.setAttributePointerByteNorm("a_from",2,4,16),this.relShader.setAttributePointerByteNorm("a_to",2,6,16),this.relShader.setAttributePointerByteNorm("a_triside",1,8,16),this.relShader.setAttributePointerFloat("a_width",1,12,16),q.drawArrays(q.TRIANGLES,0,6*this.numRels)),this.numNodes>0&&(this.nodeShader.use(),this.nodeShader.setUniform("u_positions",this.posTexture),q.bindBuffer(q.ARRAY_BUFFER,this.nodeBuffer),this.nodeShader.setAttributePointerByteNorm("a_color",4,0,12),this.nodeShader.setAttributePointerByteNorm("a_selected",1,4,12),this.nodeShader.setAttributePointerByteNorm("a_index",2,5,12),this.nodeShader.setAttributePointerByte("a_size",4,8,12),this.nodeShader.setAttributePointerByteNorm("a_hovered",1,9,12),q.drawArrays(q.POINTS,0,this.numNodes))}},{key:"renderViewbox",value:function(){var E=this.gl,M=this.projection,I=this.viewportBoxBuffer;this.viewportBoxShader.use(),this.viewportBoxShader.setUniform("u_projection",M),E.bindBuffer(E.ARRAY_BUFFER,I),this.viewportBoxShader.setAttributePointerFloat("coordinates",2,0,0),E.drawArrays(E.LINES,0,8)}},{key:"updateNodes",value:function(E){var M,I=this.gl,F=this.idToIndex,q=this.disableNodeColor,G=this.nodeBuffer,Y=this.nodeDataByte,X=!1,J=Jd(E);try{for(J.s();!(M=J.n()).done;){var ie=M.value,ce=F[ie.id];if(!(0,r.isNil)(ie.color)||ie.disabled===!0){var ge=Nl(ie.disabled===!0?q:ie.color);this.nodeDataByte[3*ce*4+0]=ge[0],this.nodeDataByte[3*ce*4+1]=ge[1],this.nodeDataByte[3*ce*4+2]=ge[2],this.nodeDataByte[3*ce*4+3]=255*ge[3],X=!0}if(ie.selected!==void 0){var le=ie.selected;this.nodeDataByte[3*ce*4+4]=le?255:0,X=!0}if(ie.activated!==void 0&&(this.nodeDataByte[3*ce*4+7]=ie.activated?255:0,X=!0,ie.activated?this.activeNodes[ie.id]=!0:delete this.activeNodes[ie.id]),ie.hovered!==void 0){var ye=ie.disabled!==!0&&ie.hovered;this.nodeDataByte[3*ce*4+9]=ye?255:0,X=!0}if(ie.size!==void 0){var De=ie.size;this.nodeDataByte[3*ce*4+8]=De||Zn,X=!0}}}catch(Ne){J.e(Ne)}finally{J.f()}X&&(I.bindBuffer(I.ARRAY_BUFFER,G),I.bufferData(I.ARRAY_BUFFER,Y,I.DYNAMIC_DRAW))}},{key:"updateRelationships",value:function(E){var M,I=yi(E,this.disableRelColor),F=this.gl,q=!1,G=Jd(I);try{for(G.s();!(M=G.n()).done;){var Y=M.value,X=Y.key,J=Y.width,ie=Y.color,ce=Y.disabled,ge=this.relIdToIndex[X],le=(0,r.isNil)(ie)?this.defaultRelColor:ie,ye=Mf(ce?this.disableRelColor:le);this.relData.positionsAndColors[ge*A+0]=ye,this.relData.positionsAndColors[ge*A+4]=ye,this.relData.positionsAndColors[ge*A+8]=ye,this.relData.positionsAndColors[ge*A+12]=ye,this.relData.positionsAndColors[ge*A+16]=ye,this.relData.positionsAndColors[ge*A+20]=ye,q=!0,J!==void 0&&(this.relData.widths[ge*A+3]=J,this.relData.widths[ge*A+7]=J,this.relData.widths[ge*A+11]=J,this.relData.widths[ge*A+15]=J,this.relData.widths[ge*A+19]=J,this.relData.widths[ge*A+23]=J,q=!0)}}catch(De){G.e(De)}finally{G.f()}q&&(F.bindBuffer(F.ARRAY_BUFFER,this.relBuffer),F.bufferData(F.ARRAY_BUFFER,this.relDataBuffer,F.DYNAMIC_DRAW))}},{key:"createPositionTexture",value:function(){var E=this.gl,M=E.createTexture(),I=new Float32Array(262144);E.bindTexture(E.TEXTURE_2D,M),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.NEAREST),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,E.NEAREST),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),E.texImage2D(E.TEXTURE_2D,0,E.RGBA,rr,rr,0,E.RGBA,E.FLOAT,I),this.posTexture=M,this.posBuffer=I}},{key:"updateViewportBox",value:function(E,M,I,F,q){var G=this.gl,Y=rt(),X=F*Y,J=q*Y,ie=(.5*X+M*E)/E,ce=(.5*J+I*E)/E,ge=(.5*-X+M*E)/E,le=(.5*-J+I*E)/E,ye=[ie,ce,ge,ce,ge,ce,ge,le,ge,le,ie,le,ie,le,ie,ce];G.bindBuffer(G.ARRAY_BUFFER,this.viewportBoxBuffer),G.bufferData(G.ARRAY_BUFFER,new Float32Array(ye),G.DYNAMIC_DRAW)}},{key:"updateViewport",value:function(E,M,I){var F=this.gl,q=1/E,G=M-F.drawingBufferWidth*q*.5,Y=I-F.drawingBufferHeight*q*.5,X=F.drawingBufferWidth*q,J=F.drawingBufferHeight*q,ie=ou(),ce=2.6315789473684212*rt();Ps(ie,G,G+X,Y+J,Y,0,1e6),this.nodeShader.use(),this.nodeShader.setUniform("u_zoom",E),this.nodeShader.setUniform("u_glAdjust",ce),this.nodeShader.setUniform("u_projection",ie),this.nodeAnimShader.use(),this.nodeAnimShader.setUniform("u_zoom",E),this.nodeAnimShader.setUniform("u_glAdjust",ce),this.nodeAnimShader.setUniform("u_projection",ie),this.relShader.use(),this.relShader.setUniform("u_glAdjust",ce),this.relShader.setUniform("u_projection",ie),this.projection=ie}},{key:"setupViewportRendering",value:function(){var E,M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Qe;this.viewportBoxBuffer=this.gl.createBuffer(),this.viewportBoxShader.use(),this.viewportBoxShader.setUniform("u_minimapViewportBoxColor",[(E=Nl(M))[0]/255,E[1]/255,E[2]/255,E[3]])}},{key:"setupNodeRendering",value:function(E){var M=this.gl,I=new ArrayBuffer(8),F=new Uint32Array(I),q=new Uint8Array(I);this.nodeBuffer===void 0&&(this.nodeBuffer=M.createBuffer()),this.numNodes=E.length;var G=new ArrayBuffer(3*E.length*8),Y=new Uint32Array(G),X={};this.activeNodes={};for(var J=0;J<E.length;J++){var ie=E[J],ce=ie.selected,ge=ie.hovered,le=ie.color,ye=ie.activated,De=ie.size,Ne=ie.id,Fe=ie.disabled,je=Mf((0,r.isNil)(le)?this.defaultNodeColor:le);Y[3*J+0]=Fe?Mf(this.disableNodeColor):je,q[0]=ce?255:0,q[1]=J%rr,q[2]=Math.floor(J/rr),q[3]=ye?255:0,q[4]=!Fe&&ge?255:0,ye&&(this.activeNodes[Ne]=!0),Y[3*J+1]=F[0],Y[3*J+2]=De??Zn,Y[3*J+3]=F[1],X[Ne]=J}M.bindBuffer(M.ARRAY_BUFFER,this.nodeBuffer),M.bufferData(M.ARRAY_BUFFER,Y,M.DYNAMIC_DRAW),this.numNodes=E.length,this.nodeDataByte=new Uint8Array(G),this.idToIndex=X}},{key:"setupRelationshipRendering",value:function(E){var M=this,I=this.gl,F=new ArrayBuffer(4),q=new Uint32Array(F),G=new Uint8Array(F),Y={};this.relBuffer===void 0&&(this.relBuffer=I.createBuffer());for(var X=new ArrayBuffer(E.length*A*4),J=new Uint32Array(X),ie=new Float32Array(X),ce=function(le){var ye=E[le],De=ye.from,Ne=ye.to,Fe=ye.color,je=ye.width,Xe=je===void 0?1:je,Ve=ye.key,$e=ye.disabled,Ke=M.idToIndex[De],qe=M.idToIndex[Ne],tt=Ke%rr,mt=Math.floor(Ke/rr),It=qe%rr,bt=Math.floor(qe/rr),Nt=[tt,mt,It,bt],St=[It,bt,tt,mt],Pe=(0,r.isNil)(Fe)?M.defaultRelColor:Fe,Te=Mf($e?M.disableRelColor:Pe);Y[Ve]=le;var Ae=0,nt=function(Ze,ft,kt,Ut){J[le*A+Ae]=Ze,Ae+=1;for(var zt=0;zt<ft.length;zt++)G[zt]=ft[zt];J[le*A+Ae]=q[0],Ae+=1,G[0]=kt,J[le*A+Ae]=q[0],ie[le*A+(Ae+=1)]=Ut,Ae+=1};nt(Te,Nt,255,Xe),nt(Te,St,0,Xe),nt(Te,Nt,0,Xe),nt(Te,St,0,Xe),nt(Te,Nt,0,Xe),nt(Te,St,255,Xe)},ge=0;ge<E.length;ge++)ce(ge);I.bindBuffer(I.ARRAY_BUFFER,this.relBuffer),I.bufferData(I.ARRAY_BUFFER,X,I.DYNAMIC_DRAW),this.numRels=E.length,this.relDataBuffer=X,this.relData={positionsAndColors:J,widths:ie},this.relIdToIndex=Y}},{key:"renderAnimations",value:function(E){var M=this.gl,I=this.nodeBuffer,F=this.numNodes,q=Date.now()%1e3/1e3,G=q<.7?q/.7:0;this.nodeAnimShader.use(),this.nodeAnimShader.setUniform("u_positions",E),this.nodeAnimShader.setUniform("u_animPos",G),M.bindBuffer(M.ARRAY_BUFFER,I),this.nodeAnimShader.setAttributePointerByteNorm("a_color",4,0,12),this.nodeAnimShader.setAttributePointerByteNorm("a_active",1,7,12),this.nodeAnimShader.setAttributePointerByteNorm("a_index",2,5,12),this.nodeAnimShader.setAttributePointerByte("a_size",4,8,12),M.drawArrays(M.POINTS,0,F)}},{key:"destroy",value:function(){this.gl.deleteBuffer(this.nodeBuffer),this.gl.deleteBuffer(this.relBuffer),this.nodeShader.remove(),this.nodeAnimShader.remove(),this.relShader.remove()}}],O&&yg(_.prototype,O),Object.defineProperty(_,"prototype",{writable:!1}),g}(),V=function(g,_,O){var E=rt();g.width=_*E,g.height=O*E,g.style.width="".concat(_,"px"),g.style.height="".concat(O,"px")},te=function(g){Gr.warn("Error: WebGL context lost - visualization will stop working!",g),tv!==void 0&&tv(g)},ae=function(g){var _=g.parentElement.getBoundingClientRect(),O=_.width,E=_.height;V(g,O,E)},Se=function(g,_){var O=document.createElement("canvas");return document.body.appendChild(O),V(O,g,_),O},Ge=function(g,_){var O=document.createElement("canvas");return Object.assign(O.style,vt),g!==void 0&&(g.appendChild(O),ae(O)),function(E,M){tv=M,E.addEventListener("webglcontextlost",te)}(O,_),O},He=function(g){g.width=0,g.height=0,g.remove()},ot=function(g){return g.getContext("2d")},wt=function(g){var _={antialias:!0},O=g.getContext("webgl",_);return O===null&&(O=g.getContext("experimental-webgl",_)),function(E){return E instanceof WebGLRenderingContext}(O)?O:null},_t=function(g){g.canvas.removeEventListener("webglcontextlost",te);var _=g.getExtension("WEBGL_lose_context");_==null||_.loseContext()};function Rt(g){return function(_){if(Array.isArray(_))return cr(_)}(g)||function(_){if(typeof Symbol<"u"&&_[Symbol.iterator]!=null||_["@@iterator"]!=null)return Array.from(_)}(g)||Zt(g)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function $t(g,_){var O=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!O){if(Array.isArray(g)||(O=Zt(g))||_){O&&(g=O);var E=0,M=function(){};return{s:M,n:function(){return E>=g.length?{done:!0}:{done:!1,value:g[E++]}},e:function(G){throw G},f:M}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I,F=!0,q=!1;return{s:function(){O=O.call(g)},n:function(){var G=O.next();return F=G.done,G},e:function(G){q=!0,I=G},f:function(){try{F||O.return==null||O.return()}finally{if(q)throw I}}}}function Zt(g,_){if(g){if(typeof g=="string")return cr(g,_);var O=Object.prototype.toString.call(g).slice(8,-1);return O==="Object"&&g.constructor&&(O=g.constructor.name),O==="Map"||O==="Set"?Array.from(g):O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O)?cr(g,_):void 0}}function cr(g,_){(_==null||_>g.length)&&(_=g.length);for(var O=0,E=new Array(_);O<_;O++)E[O]=g[O];return E}var xt=Zn*rt();function Dt(g){return Dt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},Dt(g)}function vr(g,_){var O=Object.keys(g);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(g);_&&(E=E.filter(function(M){return Object.getOwnPropertyDescriptor(g,M).enumerable})),O.push.apply(O,E)}return O}function jt(g){for(var _=1;_<arguments.length;_++){var O=arguments[_]!=null?arguments[_]:{};_%2?vr(Object(O),!0).forEach(function(E){var M,I,F;M=g,I=E,F=O[E],I=function(q){var G=function(Y,X){if(Dt(Y)!="object"||!Y)return Y;var J=Y[Symbol.toPrimitive];if(J!==void 0){var ie=J.call(Y,"string");if(Dt(ie)!="object")return ie;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Y)}(q);return Dt(G)=="symbol"?G:String(G)}(I),I in M?Object.defineProperty(M,I,{value:F,enumerable:!0,configurable:!0,writable:!0}):M[I]=F}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(O)):vr(Object(O)).forEach(function(E){Object.defineProperty(g,E,Object.getOwnPropertyDescriptor(O,E))})}return g}var Er=function(){for(var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:50,O={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},E=0;E<g.length;E++)O.minX>g[E].x&&(O.minX=g[E].x),O.minY>g[E].y&&(O.minY=g[E].y),O.maxX<g[E].x&&(O.maxX=g[E].x),O.maxY<g[E].y&&(O.maxY=g[E].y);var M=(O.minX+O.maxX)/2,I=(O.minY+O.maxY)/2,F=2*_,q=rt()*F;return{centerX:M,centerY:I,nodesWidth:O.maxX-O.minX+F+q,nodesHeight:O.maxY-O.minY+F+q}},wr=function(g,_,O,E){var M=1/0,I=1/0;return g>1&&(M=O/g),_>1&&(I=E/_),{zoomX:M,zoomY:I}},tn=function(g,_){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1/0,M=Math.min(g,_);return Math.min(E,Math.max(O,M))},sr=function(g,_,O){var E=Er(g,arguments.length>3&&arguments[3]!==void 0?arguments[3]:50),M=E.nodesWidth,I=E.nodesHeight,F=_*rt(),q=O*rt(),G=wr(M,I,F,q),Y=G.zoomX,X=G.zoomY;return tn(Y,X)},dr=function(g,_,O,E){return Math.max(Math.min(_,O),Math.min(g,E))},Oi=function(g,_,O,E,M,I){var F=_;return function(q,G,Y){return q<G&&q<Y}(M,I,_)&&g.length>1?(F=function(q,G,Y){var X=function(le){var ye=new Array(4).fill(le[0]);return le.forEach(function(De){ye[0]=De.x<ye[0].x?ye[0]:jt({},De),ye[1]=De.y<ye[1].y?ye[1]:jt({},De),ye[2]=De.x<ye[2].x?jt({},De):ye[2],ye[3]=De.y<ye[3].y?jt({},De):ye[3]}),ye}(q),J=function(){for(var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],ye=0,De=0,Ne=0;Ne<le.length;Ne++)for(var Fe=Ne+1;Fe<le.length;Fe++)ye=Math.hypot(Math.abs(le[Ne].x-le[Fe].x),Math.abs(le[Ne].y-le[Fe].y)),De=Math.max(De,ye);return De}(X),ie=2*Y,ce=rt()*ie,ge=G.height<=G.width?G.height-ie-ce:G.width-ie-ce;return J>ge?.9*ge/J:.9*J/ge}(g,E,25),dr(M,I,Math.min(_,F),O)):dr(M,I,_,O)};function Xn(g){return Xn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},Xn(g)}function Ro(g,_){for(var O=0;O<_.length;O++){var E=_[O];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,Ln(E.key),E)}}function Ln(g){var _=function(O,E){if(Xn(O)!="object"||!O)return O;var M=O[Symbol.toPrimitive];if(M!==void 0){var I=M.call(O,"string");if(Xn(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(O)}(g);return Xn(_)=="symbol"?_:String(_)}var mo=function(){function g(){var E,M,I;(function(F,q){if(!(F instanceof q))throw new TypeError("Cannot call a class as a function")})(this,g),E=this,I=void 0,(M=Ln(M="callbacks"))in E?Object.defineProperty(E,M,{value:I,enumerable:!0,configurable:!0,writable:!0}):E[M]=I,this.callbacks={}}var _,O;return _=g,O=[{key:"register",value:function(E,M){this.isCallbackRegistered(E)||(this.callbacks[E]=[]),this.callbacks[E].push(M)}},{key:"isCallbackRegistered",value:function(E){return this.callbacks[E]!==void 0}},{key:"callIfRegistered",value:function(){var E,M=arguments,I=Array.prototype.slice.call(arguments)[0];E=I,i.includes(E)&&this.isCallbackRegistered(I)&&this.callbacks[I].slice(0).forEach(function(F){return F.apply(null,Array.prototype.slice.call(M,1))})}}],O&&Ro(_.prototype,O),Object.defineProperty(_,"prototype",{writable:!1}),g}(),ks=Mi(481),Ds=Mi.n(ks);function ds(g){return ds=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},ds(g)}function vs(g,_){for(var O=0;O<_.length;O++){var E=_[O];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,rv(E.key),E)}}function Ms(g,_,O){return(_=rv(_))in g?Object.defineProperty(g,_,{value:O,enumerable:!0,configurable:!0,writable:!0}):g[_]=O,g}function rv(g){var _=function(O,E){if(ds(O)!="object"||!O)return O;var M=O[Symbol.toPrimitive];if(M!==void 0){var I=M.call(O,"string");if(ds(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(O)}(g);return ds(_)=="symbol"?_:String(_)}var Bf=5e-5,nv=function(){function g(E){var M,I=this,F=E.state,q=E.getNodePositions,G=E.canvas;(function(Y,X){if(!(Y instanceof X))throw new TypeError("Cannot call a class as a function")})(this,g),Ms(this,"xCtrl",void 0),Ms(this,"yCtrl",void 0),Ms(this,"zoomCtrl",void 0),Ms(this,"getNodePositions",void 0),Ms(this,"firstUpdate",void 0),Ms(this,"state",void 0),Ms(this,"canvas",void 0),Ms(this,"stateDisposers",void 0),this.state=F,this.getNodePositions=q,this.canvas=G,this.xCtrl=new(Ds())(.35,Bf,.05,1),this.yCtrl=new(Ds())(.35,Bf,.05,1),this.zoomCtrl=new(Ds())(.3,1e-5,.01,1),this.stateDisposers=[],this.stateDisposers.push(F.autorun(function(){F.fitNodeIds===null&&(I.xCtrl.reset(),I.yCtrl.reset(),I.zoomCtrl.reset())})),this.stateDisposers.push(F.autorun(function(){M!==F.fitNodeIds&&(M=F.fitNodeIds,I.firstUpdate=!0)})),this.stateDisposers.push(F.autorun(function(){F.resetZoom&&(I.firstUpdate=!0)}))}var _,O;return _=g,O=[{key:"needsToRun",value:function(){var E=this.state,M=E.fitNodeIds,I=E.resetZoom;return M.length>0||I}},{key:"update",value:function(E,M){var I=this.state,F=I.fitNodeIds,q=I.resetZoom;F.length>0?this.fitNodes(F,E,M):q&&this.reset(E,M)}},{key:"destroy",value:function(){this.stateDisposers.forEach(function(E){return E()})}},{key:"recalculateTarget",value:function(E,M,I,F){for(var q=this.xCtrl,G=this.yCtrl,Y=this.zoomCtrl,X=this.state,J=[],ie=0;ie<E.length;ie++)J.push({id:E[ie]});var ce=X.zoom,ge=X.panX,le=X.panY,ye=X.maxNodeRadius,De=X.nodes,Ne=X.defaultZoomLevel,Fe=this.getNodePositions(J);De.updatePositions(Fe);var je=Er(Fe,ye),Xe=je.centerX,Ve=je.centerY,$e=je.nodesWidth,Ke=je.nodesHeight;if(isNaN(Xe)||isNaN(Ve))return Gr.info("fit() function couldn't calculate center point, not updating viewport"),!1;var qe=M.noPan,tt=M.outOnly,mt=M.minZoom,It=M.maxZoom;q.setTarget(qe?ge:Xe),G.setTarget(qe?le:Ve);var bt=wr($e,Ke,I,F),Nt=bt.zoomX,St=bt.zoomY;if(Nt===1/0&&St===1/0)Y.setTarget(Ne);else{var Pe=tn(Nt,St,mt,It);tt&&ce<Pe?Y.setTarget(ce):Y.setTarget(Pe)}return!0}},{key:"allNodesAreVisible",value:function(E,M,I){var F=wr(M,I,this.canvas.width,this.canvas.height),q=F.zoomX,G=F.zoomY;return E<q&&E<G}},{key:"reset",value:function(E,M){var I=this.xCtrl,F=this.yCtrl,q=this.zoomCtrl,G=this.state,Y=this.firstUpdate,X=this.canvas,J=G.zoom,ie=G.panX,ce=G.panY,ge=G.nodes,le=G.maxNodeRadius,ye=G.defaultZoomLevel;if(Y||E){q.setTarget(ye);var De=Er(Object.values(ge.idToPosition),le),Ne=De.centerX,Fe=De.centerY,je=De.nodesWidth,Xe=De.nodesHeight;this.allNodesAreVisible(J,je,Xe)?(I.setTarget(Ne),F.setTarget(Fe)):(I.setTarget(ie),F.setTarget(ce)),this.firstUpdate=!1}var Ve=J+q.update(J),$e=ie+I.update(ie),Ke=ce+F.update(ce);G.updateZoomToFit(Ve,$e,Ke,X),Math.abs(q.target-Ve)<.01&&(G.updateZoomToFit(ye,$e,Ke,X),G.clearReset(),M!==void 0&&M())}},{key:"fitNodes",value:function(E,M,I){var F=this.state,q=this.firstUpdate,G=this.canvas,Y=this.xCtrl,X=this.yCtrl,J=this.zoomCtrl,ie=F.zoomOptions,ce=ie===void 0?{}:ie,ge=F.zoom,le=F.panX,ye=F.panY,De=!0;if(q||M){var Ne=G.width,Fe=G.height;De=this.recalculateTarget(E,ce,Ne,Fe),this.firstUpdate=!1}if(De){if(!ce.animated)return F.setZoomPan(J.target,Y.target,X.target,G),void F.clearFit();var je=le+Y.update(le),Xe=ye+X.update(ye),Ve=ge+J.update(ge);F.updateZoomToFit(Ve,je,Xe,G);var $e=Math.max(5,10/J.target),Ke=Math.min(.01,.01*J.target);!M&&Math.abs(J.target-Ve)<Ke&&Math.abs(Y.target-je)<$e&&Math.abs(X.target-Xe)<$e&&(F.setZoom(J.target,G),F.clearFit(),I!==void 0&&I())}}}],O&&vs(_.prototype,O),Object.defineProperty(_,"prototype",{writable:!1}),g}();function Ls(g){return Ls=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},Ls(g)}function Nc(){Nc=function(){return _};var g,_={},O=Object.prototype,E=O.hasOwnProperty,M=Object.defineProperty||function(Pe,Te,Ae){Pe[Te]=Ae.value},I=typeof Symbol=="function"?Symbol:{},F=I.iterator||"@@iterator",q=I.asyncIterator||"@@asyncIterator",G=I.toStringTag||"@@toStringTag";function Y(Pe,Te,Ae){return Object.defineProperty(Pe,Te,{value:Ae,enumerable:!0,configurable:!0,writable:!0}),Pe[Te]}try{Y({},"")}catch{Y=function(Te,Ae,nt){return Te[Ae]=nt}}function X(Pe,Te,Ae,nt){var Ze=Te&&Te.prototype instanceof De?Te:De,ft=Object.create(Ze.prototype),kt=new Nt(nt||[]);return M(ft,"_invoke",{value:tt(Pe,Ae,kt)}),ft}function J(Pe,Te,Ae){try{return{type:"normal",arg:Pe.call(Te,Ae)}}catch(nt){return{type:"throw",arg:nt}}}_.wrap=X;var ie="suspendedStart",ce="suspendedYield",ge="executing",le="completed",ye={};function De(){}function Ne(){}function Fe(){}var je={};Y(je,F,function(){return this});var Xe=Object.getPrototypeOf,Ve=Xe&&Xe(Xe(St([])));Ve&&Ve!==O&&E.call(Ve,F)&&(je=Ve);var $e=Fe.prototype=De.prototype=Object.create(je);function Ke(Pe){["next","throw","return"].forEach(function(Te){Y(Pe,Te,function(Ae){return this._invoke(Te,Ae)})})}function qe(Pe,Te){function Ae(Ze,ft,kt,Ut){var zt=J(Pe[Ze],Pe,ft);if(zt.type!=="throw"){var Sr=zt.arg,Ir=Sr.value;return Ir&&Ls(Ir)=="object"&&E.call(Ir,"__await")?Te.resolve(Ir.__await).then(function(Wr){Ae("next",Wr,kt,Ut)},function(Wr){Ae("throw",Wr,kt,Ut)}):Te.resolve(Ir).then(function(Wr){Sr.value=Wr,kt(Sr)},function(Wr){return Ae("throw",Wr,kt,Ut)})}Ut(zt.arg)}var nt;M(this,"_invoke",{value:function(Ze,ft){function kt(){return new Te(function(Ut,zt){Ae(Ze,ft,Ut,zt)})}return nt=nt?nt.then(kt,kt):kt()}})}function tt(Pe,Te,Ae){var nt=ie;return function(Ze,ft){if(nt===ge)throw new Error("Generator is already running");if(nt===le){if(Ze==="throw")throw ft;return{value:g,done:!0}}for(Ae.method=Ze,Ae.arg=ft;;){var kt=Ae.delegate;if(kt){var Ut=mt(kt,Ae);if(Ut){if(Ut===ye)continue;return Ut}}if(Ae.method==="next")Ae.sent=Ae._sent=Ae.arg;else if(Ae.method==="throw"){if(nt===ie)throw nt=le,Ae.arg;Ae.dispatchException(Ae.arg)}else Ae.method==="return"&&Ae.abrupt("return",Ae.arg);nt=ge;var zt=J(Pe,Te,Ae);if(zt.type==="normal"){if(nt=Ae.done?le:ce,zt.arg===ye)continue;return{value:zt.arg,done:Ae.done}}zt.type==="throw"&&(nt=le,Ae.method="throw",Ae.arg=zt.arg)}}}function mt(Pe,Te){var Ae=Te.method,nt=Pe.iterator[Ae];if(nt===g)return Te.delegate=null,Ae==="throw"&&Pe.iterator.return&&(Te.method="return",Te.arg=g,mt(Pe,Te),Te.method==="throw")||Ae!=="return"&&(Te.method="throw",Te.arg=new TypeError("The iterator does not provide a '"+Ae+"' method")),ye;var Ze=J(nt,Pe.iterator,Te.arg);if(Ze.type==="throw")return Te.method="throw",Te.arg=Ze.arg,Te.delegate=null,ye;var ft=Ze.arg;return ft?ft.done?(Te[Pe.resultName]=ft.value,Te.next=Pe.nextLoc,Te.method!=="return"&&(Te.method="next",Te.arg=g),Te.delegate=null,ye):ft:(Te.method="throw",Te.arg=new TypeError("iterator result is not an object"),Te.delegate=null,ye)}function It(Pe){var Te={tryLoc:Pe[0]};1 in Pe&&(Te.catchLoc=Pe[1]),2 in Pe&&(Te.finallyLoc=Pe[2],Te.afterLoc=Pe[3]),this.tryEntries.push(Te)}function bt(Pe){var Te=Pe.completion||{};Te.type="normal",delete Te.arg,Pe.completion=Te}function Nt(Pe){this.tryEntries=[{tryLoc:"root"}],Pe.forEach(It,this),this.reset(!0)}function St(Pe){if(Pe||Pe===""){var Te=Pe[F];if(Te)return Te.call(Pe);if(typeof Pe.next=="function")return Pe;if(!isNaN(Pe.length)){var Ae=-1,nt=function Ze(){for(;++Ae<Pe.length;)if(E.call(Pe,Ae))return Ze.value=Pe[Ae],Ze.done=!1,Ze;return Ze.value=g,Ze.done=!0,Ze};return nt.next=nt}}throw new TypeError(Ls(Pe)+" is not iterable")}return Ne.prototype=Fe,M($e,"constructor",{value:Fe,configurable:!0}),M(Fe,"constructor",{value:Ne,configurable:!0}),Ne.displayName=Y(Fe,G,"GeneratorFunction"),_.isGeneratorFunction=function(Pe){var Te=typeof Pe=="function"&&Pe.constructor;return!!Te&&(Te===Ne||(Te.displayName||Te.name)==="GeneratorFunction")},_.mark=function(Pe){return Object.setPrototypeOf?Object.setPrototypeOf(Pe,Fe):(Pe.__proto__=Fe,Y(Pe,G,"GeneratorFunction")),Pe.prototype=Object.create($e),Pe},_.awrap=function(Pe){return{__await:Pe}},Ke(qe.prototype),Y(qe.prototype,q,function(){return this}),_.AsyncIterator=qe,_.async=function(Pe,Te,Ae,nt,Ze){Ze===void 0&&(Ze=Promise);var ft=new qe(X(Pe,Te,Ae,nt),Ze);return _.isGeneratorFunction(Te)?ft:ft.next().then(function(kt){return kt.done?kt.value:ft.next()})},Ke($e),Y($e,G,"Generator"),Y($e,F,function(){return this}),Y($e,"toString",function(){return"[object Generator]"}),_.keys=function(Pe){var Te=Object(Pe),Ae=[];for(var nt in Te)Ae.push(nt);return Ae.reverse(),function Ze(){for(;Ae.length;){var ft=Ae.pop();if(ft in Te)return Ze.value=ft,Ze.done=!1,Ze}return Ze.done=!0,Ze}},_.values=St,Nt.prototype={constructor:Nt,reset:function(Pe){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(bt),!Pe)for(var Te in this)Te.charAt(0)==="t"&&E.call(this,Te)&&!isNaN(+Te.slice(1))&&(this[Te]=g)},stop:function(){this.done=!0;var Pe=this.tryEntries[0].completion;if(Pe.type==="throw")throw Pe.arg;return this.rval},dispatchException:function(Pe){if(this.done)throw Pe;var Te=this;function Ae(zt,Sr){return ft.type="throw",ft.arg=Pe,Te.next=zt,Sr&&(Te.method="next",Te.arg=g),!!Sr}for(var nt=this.tryEntries.length-1;nt>=0;--nt){var Ze=this.tryEntries[nt],ft=Ze.completion;if(Ze.tryLoc==="root")return Ae("end");if(Ze.tryLoc<=this.prev){var kt=E.call(Ze,"catchLoc"),Ut=E.call(Ze,"finallyLoc");if(kt&&Ut){if(this.prev<Ze.catchLoc)return Ae(Ze.catchLoc,!0);if(this.prev<Ze.finallyLoc)return Ae(Ze.finallyLoc)}else if(kt){if(this.prev<Ze.catchLoc)return Ae(Ze.catchLoc,!0)}else{if(!Ut)throw new Error("try statement without catch or finally");if(this.prev<Ze.finallyLoc)return Ae(Ze.finallyLoc)}}}},abrupt:function(Pe,Te){for(var Ae=this.tryEntries.length-1;Ae>=0;--Ae){var nt=this.tryEntries[Ae];if(nt.tryLoc<=this.prev&&E.call(nt,"finallyLoc")&&this.prev<nt.finallyLoc){var Ze=nt;break}}Ze&&(Pe==="break"||Pe==="continue")&&Ze.tryLoc<=Te&&Te<=Ze.finallyLoc&&(Ze=null);var ft=Ze?Ze.completion:{};return ft.type=Pe,ft.arg=Te,Ze?(this.method="next",this.next=Ze.finallyLoc,ye):this.complete(ft)},complete:function(Pe,Te){if(Pe.type==="throw")throw Pe.arg;return Pe.type==="break"||Pe.type==="continue"?this.next=Pe.arg:Pe.type==="return"?(this.rval=this.arg=Pe.arg,this.method="return",this.next="end"):Pe.type==="normal"&&Te&&(this.next=Te),ye},finish:function(Pe){for(var Te=this.tryEntries.length-1;Te>=0;--Te){var Ae=this.tryEntries[Te];if(Ae.finallyLoc===Pe)return this.complete(Ae.completion,Ae.afterLoc),bt(Ae),ye}},catch:function(Pe){for(var Te=this.tryEntries.length-1;Te>=0;--Te){var Ae=this.tryEntries[Te];if(Ae.tryLoc===Pe){var nt=Ae.completion;if(nt.type==="throw"){var Ze=nt.arg;bt(Ae)}return Ze}}throw new Error("illegal catch attempt")},delegateYield:function(Pe,Te,Ae){return this.delegate={iterator:St(Pe),resultName:Te,nextLoc:Ae},this.method==="next"&&(this.arg=g),ye}},_}function iv(g,_,O,E,M,I,F){try{var q=g[I](F),G=q.value}catch(Y){return void O(Y)}q.done?_(G):Promise.resolve(G).then(E,M)}function Ff(g,_){(_==null||_>g.length)&&(_=g.length);for(var O=0,E=new Array(_);O<_;O++)E[O]=g[O];return E}function Uf(g,_){var O=Object.keys(g);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(g);_&&(E=E.filter(function(M){return Object.getOwnPropertyDescriptor(g,M).enumerable})),O.push.apply(O,E)}return O}function ba(g){for(var _=1;_<arguments.length;_++){var O=arguments[_]!=null?arguments[_]:{};_%2?Uf(Object(O),!0).forEach(function(E){Mr(g,E,O[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(O)):Uf(Object(O)).forEach(function(E){Object.defineProperty(g,E,Object.getOwnPropertyDescriptor(O,E))})}return g}function C0(g,_){for(var O=0;O<_.length;O++){var E=_[O];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,Ay(E.key),E)}}function Mr(g,_,O){return(_=Ay(_))in g?Object.defineProperty(g,_,{value:O,enumerable:!0,configurable:!0,writable:!0}):g[_]=O,g}function Ay(g){var _=function(O,E){if(Ls(O)!="object"||!O)return O;var M=O[Symbol.toPrimitive];if(M!==void 0){var I=M.call(O,"string");if(Ls(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(O)}(g);return Ls(_)=="symbol"?_:String(_)}var _p="NvlController",mg={filename:"visualisation.png",backgroundColor:"rgba(0,0,0,0)"},Hh="onError",Ry="onLayoutDone",Iy="onLayoutStep",wp={},ov=function(){var g;return(g=wp[arguments.length>0&&arguments[0]!==void 0?arguments[0]:"default"])!==null&&g!==void 0?g:Object.values(wp).pop()},P0=function(){function g(I,F){var q,G,Y,X=this;(function(Te,Ae){if(!(Te instanceof Ae))throw new TypeError("Cannot call a class as a function")})(this,g),Mr(this,"destroyed",void 0),Mr(this,"state",void 0),Mr(this,"callbacks",void 0),Mr(this,"instanceId",void 0),Mr(this,"glController",void 0),Mr(this,"webGLContext",void 0),Mr(this,"webGLMinimapContext",void 0),Mr(this,"htmlOverlay",void 0),Mr(this,"hasResized",void 0),Mr(this,"hierarchicalLayout",void 0),Mr(this,"gridLayout",void 0),Mr(this,"freeLayout",void 0),Mr(this,"d3ForceLayout",void 0),Mr(this,"forceLayout",void 0),Mr(this,"canvasRenderer",void 0),Mr(this,"glCanvas",void 0),Mr(this,"canvasRect",void 0),Mr(this,"glMinimapCanvas",void 0),Mr(this,"c2dCanvas",void 0),Mr(this,"isInRenderSwitchAnimation",void 0),Mr(this,"justSwitchedRenderer",void 0),Mr(this,"justSwitchedLayout",void 0),Mr(this,"layoutUpdating",void 0),Mr(this,"layoutComputing",void 0),Mr(this,"isRenderingDisabled",void 0),Mr(this,"setRenderSwitchAnimation",void 0),Mr(this,"stateDisposers",void 0),Mr(this,"zoomTransitionHandler",void 0),Mr(this,"currentLayout",void 0),Mr(this,"layoutTimeLimit",void 0),Mr(this,"pixelRatio",void 0),Mr(this,"removeResizeListener",void 0),Mr(this,"removeMinimapResizeListener",void 0),Mr(this,"pendingZoomOperation",void 0),Mr(this,"layoutRunner",void 0),Mr(this,"animationRequestId",void 0),Mr(this,"layoutDoneCallback",void 0),Mr(this,"layoutComputingCallback",void 0),Mr(this,"currentLayoutType",void 0),Mr(this,"descriptionElement",void 0),this.destroyed=!1;var J=F.frame,ie=F.minimapContainer,ce=ie===void 0?document.createElement("span"):ie,ge=F.layoutOptions,le=F.layout,ye=F.instanceId,De=ye===void 0?"default":ye,Ne=F.disableAria,Fe=Ne!==void 0&&Ne,je=I.nodes,Xe=I.rels,Ve=I.webGLVisible,$e=I.disableWebGL;this.state=I,this.callbacks=new mo,this.instanceId=De;var Ke=J;Ke.setAttribute("instanceId",De),Ke.setAttribute("data-testid","nvl-parent"),(q=Ke.style.height)!==null&&q!==void 0&&q.length||Object.assign(Ke.style,{height:"100%"}),(G=Ke.style.outline)!==null&&G!==void 0&&G.length||Object.assign(Ke.style,{outline:"none"}),this.descriptionElement=Fe?document.createElement("div"):function(Te,Ae){var nt;Te.setAttribute("role","img"),Te.setAttribute("aria-label","Graph visualization");var Ze="nvl-".concat(Ae,"-description"),ft=(nt=document.getElementById(Ze))!==null&&nt!==void 0?nt:document.createElement("div");return ft.innerHTML="",ft.id="nvl-".concat(Ae,"-description"),ft.setAttribute("role","status"),ft.setAttribute("aria-live","polite"),ft.setAttribute("aria-atomic","false"),ft.style.display="none",Te.appendChild(ft),Te.setAttribute("aria-describedby",ft.id),ft}(Ke,De);var qe=Ge(Ke,this.onWebGLContextLost.bind(this)),tt=Ge(ce,this.onWebGLContextLost.bind(this));if(qe.setAttribute("data-testid","nvl-gl-canvas"),$e)this.glController=new Qd;else{var mt=wt(qe),It=wt(tt);this.glController=new Wh({mainSceneRenderer:new L(mt,je,Xe,this.state),minimapRenderer:new L(It,je,Xe,this.state),state:I}),this.webGLContext=mt,this.webGLMinimapContext=It}var bt=Ge(Ke,this.onWebGLContextLost.bind(this));bt.setAttribute("data-testid","nvl-c2d-canvas");var Nt=bt.getContext("2d"),St=document.createElement("div");Object.assign(St.style,ba(ba({},vt),{},{overflow:"hidden"})),Ke.appendChild(St),this.htmlOverlay=St,this.hasResized=!0,this.hierarchicalLayout=new vg(ba(ba({},ge),{},{state:this.state})),this.gridLayout=new xc({state:this.state}),this.freeLayout=new El({state:this.state}),this.d3ForceLayout=new Ed({state:this.state}),this.forceLayout=$e?this.d3ForceLayout:new rp(ba(ba({},ge),{},{webGLContext:this.webGLContext,state:this.state})),this.state.setLayout(le),this.state.setLayoutOptions(ge);var Pe=new Kd(bt,Nt,I,F);this.canvasRenderer=Pe,this.glCanvas=qe,this.canvasRect=qe.getBoundingClientRect(),this.glMinimapCanvas=tt,this.c2dCanvas=bt,this.glCanvas.style.opacity=Ve?"1":"0",this.c2dCanvas.style.opacity=Ve?"0":"1",this.isInRenderSwitchAnimation=!1,this.justSwitchedRenderer=!1,this.justSwitchedLayout=!1,this.hasResized=!1,this.layoutUpdating=!1,this.layoutComputing=!1,this.isRenderingDisabled=!1,je.addChannel(_p),Xe.addChannel(_p),this.setRenderSwitchAnimation=function(){X.isInRenderSwitchAnimation=!1},this.stateDisposers=[],this.stateDisposers.push(I.autorun(function(){X.callIfRegistered("zoom",I.zoom)})),this.stateDisposers.push(I.autorun(function(){X.callIfRegistered("pan",{panX:I.panX,panY:I.panY})})),this.stateDisposers.push(I.autorun(function(){X.setLayout(I.layout)})),this.stateDisposers.push(I.autorun(function(){X.setLayoutOptions(I.layoutOptions)})),Fe||this.stateDisposers.push(I.autorun(function(){(function(Te,Ae){var nt=Te.nodes,Ze=Te.rels,ft=Te.layout,kt=nt.items.length,Ut=Ze.items.length;if(kt!==0||Ut!==0){var zt="".concat(kt," node").concat(kt!==1?"s":""),Sr="".concat(Ut," relationship").concat(Ut!==1?"s":""),Ir="displayed using a ".concat(ft??"forceDirected"," layout");Ae.innerHTML="A graph visualization with ".concat(zt," and ").concat(Sr,", ").concat(Ir,".")}else Ae.innerHTML="An empty graph visualization."})(I,X.descriptionElement)})),this.stateDisposers.push(I.autorun(function(){var Te=I.webGLVisible?"1":"0";Te!==X.glCanvas.style.opacity&&(X.justSwitchedRenderer=!0,X.glCanvas.style.opacity=Te,X.c2dCanvas.style.opacity=I.webGLVisible?"0":"1")})),this.startMainLoop(),this.zoomTransitionHandler=new nv({state:I,getNodePositions:function(Te){return X.currentLayout.getNodePositions(Te)},canvas:qe}),this.layoutTimeLimit=(Y=F.layoutTimeLimit)!==null&&Y!==void 0?Y:16,this.pixelRatio=rt(),this.removeResizeListener=gn()(Ke,function(){ae(qe),ae(bt),X.canvasRect=qe.getBoundingClientRect(),X.hasResized=!0}),this.removeMinimapResizeListener=gn()(ce,function(){ae(tt)}),wp[De]=this,window.__Nvl_dumpNodes=function(Te){var Ae;return(Ae=ov(Te))===null||Ae===void 0?void 0:Ae.dumpNodes()},window.__Nvl_dumpRelationships=function(Te){var Ae;return(Ae=ov(Te))===null||Ae===void 0?void 0:Ae.dumpRelationships()},window.__Nvl_registerDoneCallback=function(Te,Ae){var nt;return(nt=ov(Ae))===null||nt===void 0?void 0:nt.on(Ry,Te)},window.__Nvl_getNodesOnScreen=function(Te){var Ae;return(Ae=ov(Te))===null||Ae===void 0?void 0:Ae.getNodesOnScreen()},window.__Nvl_getZoomLevel=function(Te){var Ae;return(Ae=ov(Te))===null||Ae===void 0?void 0:Ae.getScale()},this.pendingZoomOperation=null}var _,O,E,M;return _=g,O=[{key:"onWebGLContextLost",value:function(I){this.callIfRegistered("onWebGLContextLost",I)}},{key:"updateMinimapZoom",value:function(){var I=this.state,F=I.nodes,q=I.maxNodeRadius,G=I.maxMinimapZoom,Y=I.minMinimapZoom,X=Er(Object.values(F.idToPosition),q),J=X.centerX,ie=X.centerY,ce=X.nodesWidth,ge=X.nodesHeight,le=wr(ce,ge,this.glMinimapCanvas.width,this.glMinimapCanvas.height),ye=le.zoomX,De=le.zoomY,Ne=tn(ye,De,Y,G);this.state.updateMinimapZoomToFit(Ne,J,ie)}},{key:"startMainLoop",value:function(){var I=this,F=this.state,q=F.nodes,G=F.rels;this.currentLayout.update();var Y=this.currentLayout.getNodePositions(q.items);q.updatePositions(Y),this.isRenderingDisabled||(this.glController.renderMainScene(Y),this.glController.renderMinimap(Y),this.canvasRenderer.processUpdates(),this.canvasRenderer.render(Y)),this.layoutRunner=setInterval(function(){try{(function(){var X=I.currentLayout.getShouldUpdate(),J=X||I.justSwitchedLayout,ie=J&&!I.layoutUpdating&&!I.justSwitchedLayout;if(J)for(var ce=window.performance.now(),ge=ie?0:50,le=0;le<ge;le++){I.currentLayout.update(I.justSwitchedLayout),I.justSwitchedLayout=!1;var ye=window.performance.now();if(!X||ye-ce>I.layoutTimeLimit)break}})()}catch(X){if(!I.callbacks.isCallbackRegistered(Hh))throw X;I.callIfRegistered(Hh,X)}},13),this.animationRequestId=window.requestAnimationFrame(function X(){try{(function(J){if(I.destroyed)Gr.info("STEP IN A DESTROYED STRIP");else{var ie=rt();if(ie!==I.pixelRatio)return I.pixelRatio=ie,void I.callIfRegistered("restart");var ce=I.currentLayout.getShouldUpdate(),ge=ce||I.justSwitchedLayout,le=I.currentLayout.getComputing(),ye=I.zoomTransitionHandler.needsToRun(),De=ge&&!I.layoutUpdating&&!I.justSwitchedLayout,Ne=I.layoutComputing&&!le,Fe=I.state.webGLVisible&&I.glController.needsToRun(),je=!I.state.webGLVisible&&I.canvasRenderer.needsToRun(),Xe=I.isInRenderSwitchAnimation||I.justSwitchedRenderer,Ve=I.hasResized,$e=I.pendingZoomOperation!==null,Ke=I.glController.minimapMouseDown;if(q.clearChannel(_p),G.clearChannel(_p),ye||ge||Ne||Xe||Fe||je||Ke||Ve||$e){!$e||De||I.currentLayout.getComputing()||(I.pendingZoomOperation(),I.pendingZoomOperation=null);var qe=ce||le||Ne;I.zoomTransitionHandler.update(qe,function(){return I.callIfRegistered("onZoomTransitionDone")}),Ve&&I.glController.onResize();var tt=I.currentLayout.getNodePositions(q.items);if(q.updatePositions(tt),I.callbacks.isCallbackRegistered(Iy)&&I.callIfRegistered(Iy,I.dumpNodes()),I.updateMinimapZoom(),I.glController.renderMinimap(tt),!I.isRenderingDisabled){if((I.state.webGLVisible||Xe)&&I.glController.renderMainScene(tt),!I.state.webGLVisible||Xe){I.canvasRenderer.processUpdates(),I.canvasRenderer.render(tt);for(var mt=0;mt<G.items.length;mt++){var It=G.items[mt].id,bt=I.canvasRenderer.arrowBundler.getBundle(G.items[mt]),Nt=G.idToHtmlOverlay[It],St=bt.labelInfo[It];if(Nt&&St){var Pe=St.rotation,Te=St.position,Ae=St.width,nt=St.height,Ze=I.mapCanvasSpaceToRelativePosition(Te.x,Te.y),ft=Ze.x,kt=Ze.y,Ut=Ae>5&&!I.state.webGLVisible;Object.assign(Nt.style,{top:"".concat(kt,"px"),left:"".concat(ft,"px"),width:"".concat(Ae,"px"),height:"".concat(nt,"px"),display:Ut?"block":"none",transform:"translate(-50%, -50%) scale(".concat(Number(I.state.zoom),") rotate(").concat(Pe,"rad")})}}}for(var zt=0;zt<q.items.length;zt++){var Sr=q.items[zt],Ir=Sr.id,Wr=Sr.size,xn=q.idToHtmlOverlay[Ir];if(xn){var jn=I.state.nodes.idToPosition[Ir],yn=I.mapCanvasSpaceToRelativePosition(jn.x,jn.y),Zr=yn.x,Hr=yn.y,sn="".concat(2*(Wr??Zn),"px");Object.assign(xn.style,{top:"".concat(Hr,"px"),left:"".concat(Zr,"px"),width:sn,height:sn,transform:"translate(-50%, -50%) scale(".concat(Number(I.state.zoom),")")})}}}}var mn=!ge&&I.layoutUpdating,ti=le!==I.layoutComputing;I.layoutComputing=le,I.layoutUpdating=ge,mn&&I.callIfRegistered(Ry),ti&&I.callIfRegistered("onLayoutComputing",le),I.justSwitchedRenderer=!1,I.hasResized=!1,J!==void 0&&J()}})(function(){I.animationRequestId=window.requestAnimationFrame(X)})}catch(J){if(!I.callbacks.isCallbackRegistered(Hh))throw J;I.callIfRegistered(Hh,J)}})}},{key:"updateHtmlOverlay",value:function(){this.state.nodes.updateHtmlOverlay(this.htmlOverlay),this.state.rels.updateHtmlOverlay(this.htmlOverlay)}},{key:"dumpNodes",value:function(){var I,F=this.state.nodes.items,q=this.state.nodes.idToPosition,G=[],Y=function(ce,ge){var le=typeof Symbol<"u"&&ce[Symbol.iterator]||ce["@@iterator"];if(!le){if(Array.isArray(ce)||(le=function(Xe,Ve){if(Xe){if(typeof Xe=="string")return Ff(Xe,Ve);var $e=Object.prototype.toString.call(Xe).slice(8,-1);return $e==="Object"&&Xe.constructor&&($e=Xe.constructor.name),$e==="Map"||$e==="Set"?Array.from(Xe):$e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($e)?Ff(Xe,Ve):void 0}}(ce))||ge){le&&(ce=le);var ye=0,De=function(){};return{s:De,n:function(){return ye>=ce.length?{done:!0}:{done:!1,value:ce[ye++]}},e:function(Xe){throw Xe},f:De}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ne,Fe=!0,je=!1;return{s:function(){le=le.call(ce)},n:function(){var Xe=le.next();return Fe=Xe.done,Xe},e:function(Xe){je=!0,Ne=Xe},f:function(){try{Fe||le.return==null||le.return()}finally{if(je)throw Ne}}}}(F);try{for(Y.s();!(I=Y.n()).done;){var X=I.value,J=q[X.id],ie=this.mapCanvasSpaceToRelativePosition(J.x,J.y);G.push(ba(ba({},X),{},{x:ie.x,y:ie.y}))}}catch(ce){Y.e(ce)}finally{Y.f()}return G}},{key:"dumpRelationships",value:function(){return gt(this.state.rels.items)}},{key:"mapCanvasSpaceToRelativePosition",value:function(I,F){var q=this.canvasRect,G=window.devicePixelRatio||1,Y=(I-this.state.panX)*this.state.zoom/G,X=(F-this.state.panY)*this.state.zoom/G;return{x:Y+.5*q.width,y:X+.5*q.height}}},{key:"mapRelativePositionToCanvasSpace",value:function(I,F){var q=this.glCanvas.getBoundingClientRect(),G=window.devicePixelRatio||1,Y=G*(I-.5*q.width),X=G*(F-.5*q.height);return{x:this.state.panX+Y/this.state.zoom,y:this.state.panY+X/this.state.zoom}}},{key:"getNodePositions",value:function(){return Object.values(gt(this.state.nodes.idToPosition))}},{key:"setNodePositions",value:function(I){var F=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.state.nodes.updatePositions(I),this.currentLayout.updateNodes(I),F||this.currentLayout.terminateUpdate(),this.hasResized=!0,this.getNodesOnScreen().nodes.length===0&&this.state.setPan(0,0),this.state.clearFit()}},{key:"isLayoutMoving",value:function(){return this.layoutUpdating}},{key:"getNodesOnScreen",value:function(){var I=this.glCanvas.getBoundingClientRect(),F=this.mapRelativePositionToCanvasSpace(0,0),q=F.x,G=F.y,Y=this.mapRelativePositionToCanvasSpace(I.width,I.height);return function(X,J,ie,ce,ge){var le=arguments.length>5&&arguments[5]!==void 0?arguments[5]:["node"],ye=ge.nodes,De=ge.rels,Ne=Math.min(X,ie),Fe=Math.max(X,ie),je=Math.min(J,ce),Xe=Math.max(J,ce),Ve=[],$e=[];if(le.includes("node"))for(var Ke=0,qe=Object.values(ye.idToPosition);Ke<qe.length;Ke++){var tt=qe[Ke],mt=tt.x,It=tt.y;mt!==void 0&&It!==void 0&&mt>Ne&&mt<Fe&&It>je&&It<Xe&&Ve.push(tt)}if(le.includes("relationship")){var bt,Nt=$t(De.items);try{for(Nt.s();!(bt=Nt.n()).done;){var St=bt.value,Pe=St.from,Te=St.to,Ae=ye.idToPosition[Pe],nt=ye.idToPosition[Te];if(Ae.x!==void 0&&Ae.y!==void 0&&nt.x!==void 0&&nt.y!==void 0){var Ze=Ae.x>Ne&&Ae.x<Fe&&Ae.y>je&&Ae.y<Xe,ft=nt.x>Ne&&nt.x<Fe&&nt.y>je&&nt.y<Xe;Ze&&ft&&$e.push(St)}}}catch(kt){Nt.e(kt)}finally{Nt.f()}}return{nodes:Ve,rels:$e}}(q,G,Y.x,Y.y,this.state,["node"])}},{key:"registerDoneCallback",value:function(I){this.layoutDoneCallback=I}},{key:"registerComputingCallback",value:function(I){this.layoutComputingCallback=I}},{key:"getPosition",value:function(I){return this.currentLayout.getNodePositions([{id:I}])[0]}},{key:"getScale",value:function(){return this.state.zoom}},{key:"getPan",value:function(){return{x:this.state.panX,y:this.state.panY}}},{key:"setZoomLevel",value:function(I){var F=this;this.pendingZoomOperation=function(){return F.state.setZoom(I,F.glCanvas)}}},{key:"setPanCoordinates",value:function(I,F){this.state.setPan(I,F)}},{key:"setZoomAndPan",value:function(I,F,q){var G=this;this.pendingZoomOperation=function(){return G.state.setZoomPan(I,F,q,G.glCanvas)}}},{key:"fit",value:function(I,F){var q=this;this.pendingZoomOperation=function(){return q.state.fitNodes(I,F)}}},{key:"resetZoom",value:function(){var I=this;this.pendingZoomOperation=function(){return I.state.setZoomReset()}}},{key:"setRenderer",value:function(I){this.state.setRenderer(I)}},{key:"on",value:function(I,F){this.callbacks.register(I,F)}},{key:"isDestroyed",value:function(){return this.destroyed}},{key:"destroy",value:function(){var I;this.destroyed||(this.animationRequestId&&window.cancelAnimationFrame(this.animationRequestId),this.layoutRunner!==void 0&&window.clearInterval(this.layoutRunner),this.glController.destroy(),this.glCanvas.removeEventListener("transitionend",this.setRenderSwitchAnimation),this.webGLContext!==void 0&&_t(this.webGLContext),this.webGLMinimapContext!==void 0&&_t(this.webGLMinimapContext),He(this.glCanvas),He(this.glMinimapCanvas),this.canvasRenderer.destroy(),He(this.c2dCanvas),this.removeResizeListener(),this.removeMinimapResizeListener(),this.forceLayout.destroy(),this.hierarchicalLayout.destroy(),this.gridLayout.destroy(),this.freeLayout.destroy(),this.htmlOverlay.remove(),this.descriptionElement.remove(),this.zoomTransitionHandler.destroy(),this.stateDisposers.forEach(function(F){F()}),I=this.instanceId,delete wp[I],this.destroyed=!0)}},{key:"callIfRegistered",value:function(){for(var I=arguments.length,F=new Array(I),q=0;q<I;q++)F[q]=arguments[q];this.callbacks.callIfRegistered.apply(this.callbacks,arguments)}},{key:"getCanvasRelsAt",value:function(I){return this.canvasRenderer.getRelsAt(I)}},{key:"getCanvasNodesAt",value:function(I){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this.canvasRenderer.getNodesAt(I,F)}},{key:"getLayout",value:function(I){return I===xl?this.hierarchicalLayout:I===wh?this.forceLayout:I===wf?this.gridLayout:I===Td?this.freeLayout:I===os?this.d3ForceLayout:this.forceLayout}},{key:"setLayout",value:function(I){Gr.info("Switching to layout: ".concat(I));var F=this.currentLayoutType,q=this.getLayout(I);I==="free"&&q.setNodePositions(this.state.nodes.idToPosition),this.currentLayout=q,this.currentLayoutType=I,F&&F!==this.currentLayoutType&&(this.justSwitchedLayout=!0)}},{key:"setLayoutOptions",value:function(I){this.getLayout(this.state.layout).setOptions(I)}},{key:"createDownloadLink",value:function(I,F){var q=document.createElement("a");q.style.display="none",q.setAttribute("download",I);var G=F.toDataURL("image/png").replace(/^data:image\/png/,"data:application/octet-stream");return q.setAttribute("href",G),q}},{key:"saveToFile",value:function(I){var F=ba(ba({},mg),I),q=F.filename,G=F.backgroundColor,Y=this.state.nodes.items;this.currentLayout.update(this.justSwitchedLayout),this.justSwitchedLayout=!1;var X=this.currentLayout.getNodePositions(Y);this.state.nodes.updatePositions(X);var J=Se(this.c2dCanvas.width,this.c2dCanvas.height),ie=ot(J);this.canvasRenderer.processUpdates(),this.canvasRenderer.render(X,{canvas:J,context:ie,backgroundColor:G,ignoreAnimations:!0}),this.createDownloadLink(q,J).click(),He(J),J=null,ie=null}},{key:"prepareLargeFileForDownload",value:function(I){var F=this,q=ba(ba({},mg),I),G=this.state.nodes.items,Y=q.filename,X=q.backgroundColor,J=this.currentLayout.getNodePositions(G),ie=Er(J,100),ce=ie.nodesWidth,ge=ie.nodesHeight,le=ie.centerX,ye=ie.centerY,De=Math.max(Math.min(ce+100,15e3),5e3),Ne=Math.max(Math.min(ge+100,15e3),5e3);return this.isRenderingDisabled=!0,new Promise(function(Fe,je){try{F.setPanCoordinates(le,ye);var Xe=Math.max(De/ce-.02,F.state.minZoom),Ve=Math.max(Ne/ge-.02,F.state.minZoom);F.setZoomLevel(Math.min(Xe,Ve))}catch($e){return Gr.error("An error occurred while downloading the file"),void je($e)}setTimeout(function(){try{F.currentLayout.update(F.justSwitchedLayout),F.justSwitchedLayout=!1,F.state.nodes.updatePositions(J);var $e=Se(De,Ne),Ke=ot($e);F.canvasRenderer.processUpdates(),F.canvasRenderer.render(J,{canvas:$e,context:Ke,backgroundColor:X,ignoreAnimations:!0,showCaptions:!0}),F.createDownloadLink(Y,$e).click(),He($e),$e=null,Ke=null,Fe(!0)}catch(qe){je(qe)}},500)})}},{key:"saveFullGraphToLargeFile",value:(E=Nc().mark(function I(F){var q,G,Y,X;return Nc().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return q=ba(ba({},mg),F),G=this.state.zoom,Y=this.state.panX,X=this.state.panY,J.prev=4,J.next=7,this.prepareLargeFileForDownload(q);case 7:J.next=17;break;case 9:if(J.prev=9,J.t0=J.catch(4),Gr.error("An error occurred while downloading the image"),!this.callbacks.isCallbackRegistered(Hh)){J.next=16;break}this.callIfRegistered(Hh,J.t0),J.next=17;break;case 16:throw J.t0;case 17:return J.prev=17,this.isRenderingDisabled=!1,this.setZoomLevel(G),this.setPanCoordinates(Y,X),J.finish(17);case 22:case"end":return J.stop()}},I,this,[[4,9,17,22]])}),M=function(){var I=this,F=arguments;return new Promise(function(q,G){var Y=E.apply(I,F);function X(ie){iv(Y,q,G,X,J,"next",ie)}function J(ie){iv(Y,q,G,X,J,"throw",ie)}X(void 0)})},function(I){return M.apply(this,arguments)})}],O&&C0(_.prototype,O),Object.defineProperty(_,"prototype",{writable:!1}),g}();function av(g){return av=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},av(g)}function Ep(g,_){if(!(g instanceof _))throw new TypeError("Cannot call a class as a function")}function A0(g,_){for(var O=0;O<_.length;O++){var E=_[O];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,R0(E.key),E)}}function xp(g,_,O){return _&&A0(g.prototype,_),Object.defineProperty(g,"prototype",{writable:!1}),g}function R0(g){var _=function(O,E){if(av(O)!="object"||!O)return O;var M=O[Symbol.toPrimitive];if(M!==void 0){var I=M.call(O,"string");if(av(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(O)}(g);return av(_)=="symbol"?_:String(_)}var bg=function(){function g(_,O){if(Ep(this,g),!_)throw new Error("Tried to create a node with no data");this.data=_,this.parent=O,this.children=[]}return xp(g,[{key:"addChild",value:function(_){this.children.push(_)}},{key:"isRoot",value:function(){return this.parent===null}},{key:"print",value:function(){var _=this.data.name;this.isRoot()||(_="".concat(_,"		").concat(function(M){for(var I=(Math.round(1e3*M)/1e3).toFixed(3);I.length<6;)I=" ".concat(I);return I}(this.data._timeSpent())," ms"),this.parent.isRoot()||(_="".concat(_,"	").concat(this._percentageOfParentSpent(),"%")));var O=this.noOfChildren()>0;for(var E in O&&(_="".concat(_,"	 Children: ").concat(this.noOfChildren()),console.groupCollapsed(_)),this.children)this.children[E].print();O&&console.groupEnd()}},{key:"noOfChildren",value:function(){return this.children.length}},{key:"_percentageOfParentSpent",value:function(){return Math.round(this.data._timeSpent()/this.parent.data._timeSpent()*100)}}]),g}(),ky=function(){function g(_){Ep(this,g),this.name=_,this.startTime=performance.now(),this.endTime=null}return xp(g,[{key:"close",value:function(){this.endTime=performance.now()}},{key:"_timeSpent",value:function(){if(this.startTime===null||this.endTime===null)throw new Error("You have an error in your performance measurements that makes the whole tree unreliable. You probably forgot to call performanceTestEnd on ".concat(this.name));return this.endTime-this.startTime}}]),g}(),Dy=function(){function g(){Ep(this,g),this.root=new bg(new ky("Performance Tree"),null),this.current=this.root}return xp(g,[{key:"clear",value:function(){this.root.children=[],this.current=this.root}},{key:"add",value:function(_){if(this.current){var O=new bg(_,this.current);this.current.addChild(O),this.current=O}else{if(this.root)throw new Error("Performance tree is screwed up");this.root=new bg(_,null),this.current=this.root}}},{key:"close",value:function(){if(this.current.isRoot())throw new Error("Tried to close performance tree root. You probably have one too many Performance.endTest() in your code.");this.current.data.close(),this.current=this.current.parent}},{key:"getCurrentData",value:function(){return this.current.data}},{key:"print",value:function(){this.root.noOfChildren()>0&&this.root.print()}}]),g}(),My=function(){function g(){Ep(this,g),window.performance?(this.disabled=!1,this.tree=new Dy):(this.disabled=!0,this.tree=null)}return xp(g,[{key:"startTest",value:function(_){if(!this.disabled){var O,E=_||(O=(O=new Error().stack.split(`
`)[3].trim()).split(" ")[0]==="at"?O.split(" ")[1]:O.split("@")[0]),M=new ky(E);this.tree.add(M)}}},{key:"endTest",value:function(){this.disabled||this.tree.close()}},{key:"reset",value:function(){this.disabled||this.tree.clear()}},{key:"print",value:function(){this.disabled||this.tree.print()}}]),g}();function Op(g,_){var O=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!O){if(Array.isArray(g)||(O=function(G,Y){if(G){if(typeof G=="string")return Ly(G,Y);var X=Object.prototype.toString.call(G).slice(8,-1);return X==="Object"&&G.constructor&&(X=G.constructor.name),X==="Map"||X==="Set"?Array.from(G):X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X)?Ly(G,Y):void 0}}(g))||_){O&&(g=O);var E=0,M=function(){};return{s:M,n:function(){return E>=g.length?{done:!0}:{done:!1,value:g[E++]}},e:function(G){throw G},f:M}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I,F=!0,q=!1;return{s:function(){O=O.call(g)},n:function(){var G=O.next();return F=G.done,G},e:function(G){q=!0,I=G},f:function(){try{F||O.return==null||O.return()}finally{if(q)throw I}}}}function Ly(g,_){(_==null||_>g.length)&&(_=g.length);for(var O=0,E=new Array(_);O<_;O++)E[O]=g[O];return E}function I0(g){this.channels[g]={adds:{},updates:{},removes:{}}}function k0(g){delete this.channels[g]}function Sp(g){this.channels[g].adds={},this.channels[g].updates={},this.channels[g].removes={}}var Ny=function(g){return"html"in g?g.html:"captionHtml"in g?g.captionHtml:void 0};function D0(g,_){var O,E=!1,M=Op(g);try{for(M.s();!(O=M.n()).done;){var I=O.value,F=I.id;if(this.idToItem[F]===void 0){if(I=(0,r.cloneDeep)(I),this.items.push(I),this.idToItem[F]=I,this.idToPosition[F]={id:F,x:0,y:0},"x"in I&&"y"in I){var q=I,G=q.x,Y=q.y;isNaN(G)||isNaN(Y)||(this.idToPosition[F].x=G,this.idToPosition[F].y=Y)}var X=Ny(I);if(X instanceof HTMLElement){var J=document.createElement("div");Object.assign(J.style,{position:"absolute"}),J.appendChild(X),this.idToHtmlOverlay[F]=J}for(var ie=Object.values(this.channels),ce=0,ge=ie;ce<ge.length;ce++){var le=ge[ce];le.removes[F]===void 0?le.adds[F]=I:(delete le.removes[F],le.updates[F]=I)}E=!0}}}catch(ye){M.e(ye)}finally{M.f()}E&&(this.version+=1,_!==void 0&&(_.added=!0))}function M0(g,_){var O,E=!1,M=Op(g);try{for(M.s();!(O=M.n()).done;){var I=O.value,F=I.id,q=this.idToItem[F];if(q!==void 0){Object.assign(q,I);var G=Ny(I);if(G instanceof HTMLElement){var Y;(Y=this.idToHtmlOverlay[F])===null||Y===void 0||Y.remove(),delete this.idToHtmlOverlay[F];var X=document.createElement("div");Object.assign(X.style,{position:"absolute"}),X.appendChild(G),this.idToHtmlOverlay[F]=X}for(var J=Object.values(this.channels),ie=0,ce=J;ie<ce.length;ie++){var ge=ce[ie];if(ge.adds[F]===void 0){var le=ge.updates[F];le===void 0&&(le={id:F},ge.updates[F]=le),Object.assign(le,I)}}_!==void 0&&(_.updated=!0)}E=!0}}catch(ye){M.e(ye)}finally{M.f()}E&&(this.version+=1)}function L0(g,_){var O,E=!1,M=Op(g);try{for(M.s();!(O=M.n()).done;){var I=O.value,F=this.idToItem[I];if(F!==void 0){var q;E=!0,delete this.idToItem[F.id],delete this.idToPosition[F.id],(q=this.idToHtmlOverlay[F.id])===null||q===void 0||q.remove(),delete this.idToHtmlOverlay[F.id],this.items.splice(this.items.indexOf(F),1);for(var G=Object.values(this.channels),Y=0,X=G;Y<X.length;Y++){var J=X[Y];J.adds[I]!==void 0?delete J.adds[I]:(delete J.updates[I],J.removes[I]=F)}}}}catch(ie){M.e(ie)}finally{M.f()}E&&(_!==void 0&&(_.removed=!0),this.version+=1)}function N0(g){var _,O=Op(g);try{for(O.s();!(_=O.n()).done;){var E=_.value;if(this.idToPosition[E.id]!==void 0){var M=this.idToPosition[E.id];Object.assign(M,E)}else this.idToPosition[E.id]={id:E.id,x:E.x,y:E.y,pinned:E.pinned}}}catch(I){O.e(I)}finally{O.f()}}function j0(g){for(var _ in this.idToHtmlOverlay){var O=this.idToHtmlOverlay[_];g.appendChild(O)}}var jy=function(){return{idToItem:Br.shallow({}),items:Br.shallow([]),channels:Br.shallow({}),idToPosition:Br.shallow({}),idToHtmlOverlay:Br.shallow({}),version:0,addChannel:$(I0),removeChannel:$(k0),clearChannel:$(Sp),add:$(D0),update:$(M0),remove:$(L0),updatePositions:$(N0),updateHtmlOverlay:$(j0)}},By={selected:{rings:[{widthFactor:.05,color:cl},{widthFactor:.1,color:fl}],shadow:{width:10,opacity:1,color:sf}},default:{rings:[]}},Fy={selected:{rings:[{color:cl,width:2},{color:fl,width:4}],shadow:{width:18,opacity:1,color:sf}},default:{rings:[]}},_g=.75,wg={noPan:!1,outOnly:!1,animated:!0};function jc(g){return jc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},jc(g)}function Eg(g,_){(_==null||_>g.length)&&(_=g.length);for(var O=0,E=new Array(_);O<_;O++)E[O]=g[O];return E}function xg(g,_){var O=Object.keys(g);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(g);_&&(E=E.filter(function(M){return Object.getOwnPropertyDescriptor(g,M).enumerable})),O.push.apply(O,E)}return O}function Tp(g){for(var _=1;_<arguments.length;_++){var O=arguments[_]!=null?arguments[_]:{};_%2?xg(Object(O),!0).forEach(function(E){var M,I,F;M=g,I=E,F=O[E],I=function(q){var G=function(Y,X){if(jc(Y)!="object"||!Y)return Y;var J=Y[Symbol.toPrimitive];if(J!==void 0){var ie=J.call(Y,"string");if(jc(ie)!="object")return ie;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Y)}(q);return jc(G)=="symbol"?G:String(G)}(I),I in M?Object.defineProperty(M,I,{value:F,enumerable:!0,configurable:!0,writable:!0}):M[I]=F}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(O)):xg(Object(O)).forEach(function(E){Object.defineProperty(g,E,Object.getOwnPropertyDescriptor(O,E))})}return g}var Xu=function(g,_,O){(0,r.isNil)(g)||(function(E){return typeof E=="string"&&Nl(E)!==null}(g)?_(g):Mu().warn("Invalid color string for ".concat(O,":"),g))};function Yh(g){return Yh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},Yh(g)}function Og(g,_){var O=Object.keys(g);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(g);_&&(E=E.filter(function(M){return Object.getOwnPropertyDescriptor(g,M).enumerable})),O.push.apply(O,E)}return O}function Sg(g){for(var _=1;_<arguments.length;_++){var O=arguments[_]!=null?arguments[_]:{};_%2?Og(Object(O),!0).forEach(function(E){var M,I,F;M=g,I=E,F=O[E],I=function(q){var G=function(Y,X){if(Yh(Y)!="object"||!Y)return Y;var J=Y[Symbol.toPrimitive];if(J!==void 0){var ie=J.call(Y,"string");if(Yh(ie)!="object")return ie;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Y)}(q);return Yh(G)=="symbol"?G:String(G)}(I),I in M?Object.defineProperty(M,I,{value:F,enumerable:!0,configurable:!0,writable:!0}):M[I]=F}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(O)):Og(Object(O)).forEach(function(E){Object.defineProperty(g,E,Object.getOwnPropertyDescriptor(O,E))})}return g}var Uy=function(g){var _=g.minZoom,O=g.maxZoom,E=g.allowDynamicMinZoom,M=E===void 0||E,I=g.layout,F=g.layoutOptions,q=g.styling,G=q===void 0?{}:q,Y=g.panX,X=Y===void 0?0:Y,J=g.panY,ie=J===void 0?0:J,ce=g.initialZoom,ge=g.renderer,le=ge===void 0?g.useWebGL===!0?ki:Oc:ge,ye=g.disableWebGL,De=ye!==void 0&&ye,Ne=g.disableWebWorkers,Fe=Ne!==void 0&&Ne,je=g.disableTelemetry,Xe=je!==void 0&&je;ve(!0),yt.isolateGlobalState();var Ve=(0,r.isNil)(_)?.075:_,$e=(0,r.isNil)(O)?10:O,Ke=function(Pe,Te){var Ae=Te.legacyNodeDefaultBorderColor,nt=Te.legacySelectedBorderColor,Ze=Te.legacyDisabledItemColor,ft=Te.legacyDisabledItemFontColor,kt=Pe.nodeDefaultBorderColor,Ut=kt===void 0?Ae:kt,zt=Pe.selectedBorderColor,Sr=zt===void 0?nt:zt,Ir=Pe.disabledItemColor,Wr=Ir===void 0?Ze:Ir,xn=Pe.disabledItemFontColor,jn=xn===void 0?ft:xn,yn=Pe.selectedInnerBorderColor,Zr=Pe.dropShadowColor,Hr=Pe.defaultNodeColor,sn=Pe.defaultRelationshipColor,mn=Pe.minimapViewportBoxColor,ti=Tp({},By.default),rn=Tp({},By.selected),An=Tp({},Fy.selected),ri={color:vc,fontColor:"#DDDDDD"},ni=dc,fi=ll;return Xu(yn,function(nn){rn.rings[0].color=nn,An.rings[0].color=nn},"selectedInnerBorderColor"),Xu(Sr,function(nn){rn.rings[1].color=nn,An.rings[1].color=nn},"selectedBorderColor"),Xu(Ut,function(nn){var mi;ti.rings=[{color:nn,widthFactor:.05}],rn.rings=[{color:nn,widthFactor:.05}].concat(function(bn){if(Array.isArray(bn))return Eg(bn)}(mi=rn.rings)||function(bn){if(typeof Symbol<"u"&&bn[Symbol.iterator]!=null||bn["@@iterator"]!=null)return Array.from(bn)}(mi)||function(bn,ko){if(bn){if(typeof bn=="string")return Eg(bn,ko);var Qo=Object.prototype.toString.call(bn).slice(8,-1);return Qo==="Object"&&bn.constructor&&(Qo=bn.constructor.name),Qo==="Map"||Qo==="Set"?Array.from(bn):Qo==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Qo)?Eg(bn,ko):void 0}}(mi)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}())},"nodeDefaultBorderColor"),Xu(Zr,function(nn){rn.shadow.color=nn,An.shadow.color=nn},"dropShadowColor"),Xu(Wr,function(nn){ri.color=nn},"disabledItemColor"),Xu(jn,function(nn){ri.fontColor=nn},"disabledItemFontColor"),Xu(Hr,function(nn){fi=nn},"defaultNodeColor"),Xu(sn,function(nn){ni=nn},"defaultRelationshipColor"),{nodeBorderStyles:{default:ti,selected:rn},relationshipBorderStyles:{default:Fy.default,selected:An},disabledItemStyles:ri,defaultNodeColor:fi,defaultRelationshipColor:ni,minimapViewportBoxColor:mn||Qe}}(G,{legacyNodeDefaultBorderColor:g.nodeDefaultBorderColor,legacySelectedBorderColor:g.selectedBorderColor,legacyDisabledItemColor:g.disabledItemColor,legacyDisabledItemFontColor:g.disabledItemFontColor}),qe=Ke.nodeBorderStyles,tt=Ke.relationshipBorderStyles,mt=Ke.disabledItemStyles,It=Ke.defaultNodeColor,bt=Ke.defaultRelationshipColor,Nt=Ke.minimapViewportBoxColor,St=Br({zoom:ce||_g,minimapZoom:_g,defaultZoomLevel:_g,panX:X,panY:ie,minimapPanX:0,minimapPanY:0,fitNodeIds:[],resetZoom:!1,zoomOptions:wg,forceWebGL:!1,renderer:le,disableWebGL:De,disableWebWorkers:Fe,disableTelemetry:Xe,fitMovement:0,layout:I,layoutOptions:F,maxDistance:0,maxNodeRadius:50,nodeBorderStyles:qe,relationshipBorderStyles:tt,disabledItemStyles:mt,defaultNodeColor:It,defaultRelationshipColor:bt,minimapViewportBoxColor:Nt,get minZoom(){return Ve},get maxZoom(){return $e},get minMinimapZoom(){return 0},get maxMinimapZoom(){return .2},get webGLVisible(){var Pe=this.fitMovement>50;return this.renderer===ki||Pe},nodes:jy(),rels:jy(),graphUpdates:0,waypoints:{data:Br.shallow({}),counter:0},setGraphUpdated:$(function(){this.graphUpdates+=1}),setRenderer:$(function(Pe){$(function(){this.graphUpdates+=1}),this.renderer=Pe}),setWaypoints:$(function(Pe){this.waypoints.data=Pe,this.waypoints.counter+=1}),setZoomPan:$(function(Pe,Te,Ae,nt){if(M){var Ze=Object.values(this.nodes.idToPosition),ft=Oi(Ze,Ve,$e,nt,Pe,this.zoom);ft!==this.zoom&&(this.zoom=ft,Pe===ft&&(this.panX=Te,this.panY=Ae))}else{var kt=dr(Pe,this.zoom,Ve,$e);kt!==this.zoom&&(this.zoom=kt,this.panX=Te,this.panY=Ae)}this.fitNodeIds=[],this.resetZoom=!1,this.forceWebGL=!1}),setZoom:$(function(Pe,Te){if(M){var Ae=Object.values(this.nodes.idToPosition);this.zoom=Oi(Ae,Ve,$e,Te,Pe,this.zoom)}else this.zoom=dr(Pe,this.zoom,Ve,$e);this.fitNodeIds=[],this.fitMovement=0,this.resetZoom=!1,this.forceWebGL=!1}),setPan:$(function(Pe,Te){this.panX=Pe,this.panY=Te,this.fitNodeIds=[],this.resetZoom=!1,this.forceWebGL=!1}),setLayout:$(function(Pe){this.layout=Pe}),setLayoutOptions:$(function(Pe){this.layoutOptions=Pe}),fitNodes:$(function(Pe){var Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.fitNodeIds=(0,r.intersection)(Pe,(0,r.map)(this.nodes.items,"id")),this.zoomOptions=Sg(Sg({},wg),Te)}),setZoomReset:$(function(){this.resetZoom=!0}),clearFit:$(function(){this.fitNodeIds=[],this.forceWebGL=!1,this.fitMovement=0,this.zoomOptions=wg}),clearReset:$(function(){this.resetZoom=!1,this.fitMovement=0}),updateZoomToFit:$(function(Pe,Te,Ae,nt){var Ze;if(this.fitMovement=Math.abs(Pe-this.zoom)+Math.abs(Te-this.panX)+Math.abs(Ae-this.panY),M){var ft=Object.values(this.nodes.idToPosition);Ze=Oi(ft,Ve,$e,nt,Pe,this.zoom)}else Ze=dr(Pe,this.zoom,Ve,$e);this.zoom=Ze,this.panX=Te,this.panY=Ae}),updateMinimapZoomToFit:$(function(Pe,Te,Ae){this.minimapZoom=Pe,this.minimapPanX=Te,this.minimapPanY=Ae}),autorun:Ar,reaction:Yt});return St},B0=function(g){return!!g&&typeof g.id=="string"&&g.id.length>0},Cp=Mi(1187);function sv(g){return sv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},sv(g)}function uv(g,_){var O=Object.keys(g);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(g);_&&(E=E.filter(function(M){return Object.getOwnPropertyDescriptor(g,M).enumerable})),O.push.apply(O,E)}return O}function lv(g){for(var _=1;_<arguments.length;_++){var O=arguments[_]!=null?arguments[_]:{};_%2?uv(Object(O),!0).forEach(function(E){var M,I,F;M=g,I=E,F=O[E],I=function(q){var G=function(Y,X){if(sv(Y)!="object"||!Y)return Y;var J=Y[Symbol.toPrimitive];if(J!==void 0){var ie=J.call(Y,"string");if(sv(ie)!="object")return ie;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Y)}(q);return sv(G)=="symbol"?G:String(G)}(I),I in M?Object.defineProperty(M,I,{value:F,enumerable:!0,configurable:!0,writable:!0}):M[I]=F}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(O)):uv(Object(O)).forEach(function(E){Object.defineProperty(g,E,Object.getOwnPropertyDescriptor(O,E))})}return g}function zy(g){return function(_){if(Array.isArray(_))return Tg(_)}(g)||function(_){if(typeof Symbol<"u"&&_[Symbol.iterator]!=null||_["@@iterator"]!=null)return Array.from(_)}(g)||function(_,O){if(_){if(typeof _=="string")return Tg(_,O);var E=Object.prototype.toString.call(_).slice(8,-1);return E==="Object"&&_.constructor&&(E=_.constructor.name),E==="Map"||E==="Set"?Array.from(_):E==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(E)?Tg(_,O):void 0}}(g)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Tg(g,_){(_==null||_>g.length)&&(_=g.length);for(var O=0,E=new Array(_);O<_;O++)E[O]=g[O];return E}var cv=function(g){return{id:g.elementId}},Cg=function(g){return{id:g.elementId,from:g.startNodeElementId,to:g.endNodeElementId}},F0=Cp.resultTransformers.mappedResultTransformer({map:function(g){return Object.values(g.toObject())},collect:function(g){var _={nodes:[],relationships:[]},O=new Map;return function(E){for(var M=zy(E),I=[];M.length;){var F=M.pop();Array.isArray(F)?M.push.apply(M,zy(F)):I.push(F)}return I}(g).forEach(function(E){(0,Cp.isNode)(E)?(_.nodes.push(cv(E)),O.set(E.elementId,E)):(0,Cp.isPath)(E)?E.segments.forEach(function(M){_.nodes.push(cv(M.start)),_.nodes.push(cv(M.end)),_.relationships.push(Cg(M.relationship)),O.set(M.start.elementId,M.start),O.set(M.end.elementId,M.end),O.set(M.relationship.elementId,M.relationship)}):(0,Cp.isRelationship)(E)&&(_.relationships.push(Cg(E)),O.set(E.elementId,E))}),lv(lv({},_),{},{recordObjectMap:O})}});const U0=(g=>{var _={};return Mi.d(_,g),_})({AnalyticsBrowser:()=>z5});var Pg,z0=new Uint8Array(16);function G0(){if(!Pg&&!(Pg=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Pg(z0)}const V0=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var Io=[],Ag=0;Ag<256;++Ag)Io.push((Ag+256).toString(16).substr(1));const q0=function(g){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,O=(Io[g[_+0]]+Io[g[_+1]]+Io[g[_+2]]+Io[g[_+3]]+"-"+Io[g[_+4]]+Io[g[_+5]]+"-"+Io[g[_+6]]+Io[g[_+7]]+"-"+Io[g[_+8]]+Io[g[_+9]]+"-"+Io[g[_+10]]+Io[g[_+11]]+Io[g[_+12]]+Io[g[_+13]]+Io[g[_+14]]+Io[g[_+15]]).toLowerCase();if(!function(E){return typeof E=="string"&&V0.test(E)}(O))throw TypeError("Stringified UUID is invalid");return O};var Gy,Rg,Ig=0,ps=0;const W0=function(g,_,O){var E=0,M=new Array(16),I=(g=g||{}).node||Gy,F=g.clockseq!==void 0?g.clockseq:Rg;if(I==null||F==null){var q=g.random||(g.rng||G0)();I==null&&(I=Gy=[1|q[0],q[1],q[2],q[3],q[4],q[5]]),F==null&&(F=Rg=16383&(q[6]<<8|q[7]))}var G=g.msecs!==void 0?g.msecs:Date.now(),Y=g.nsecs!==void 0?g.nsecs:ps+1,X=G-Ig+(Y-ps)/1e4;if(X<0&&g.clockseq===void 0&&(F=F+1&16383),(X<0||G>Ig)&&g.nsecs===void 0&&(Y=0),Y>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Ig=G,ps=Y,Rg=F;var J=(1e4*(268435455&(G+=122192928e5))+Y)%4294967296;M[E++]=J>>>24&255,M[E++]=J>>>16&255,M[E++]=J>>>8&255,M[E++]=255&J;var ie=G/4294967296*1e4&268435455;M[E++]=ie>>>8&255,M[E++]=255&ie,M[E++]=ie>>>24&15|16,M[E++]=ie>>>16&255,M[E++]=F>>>8|128,M[E++]=255&F;for(var ce=0;ce<6;++ce)M[E+ce]=I[ce];return _||q0(M)};function zf(g){return zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},zf(g)}function Bl(){Bl=function(){return _};var g,_={},O=Object.prototype,E=O.hasOwnProperty,M=Object.defineProperty||function(Pe,Te,Ae){Pe[Te]=Ae.value},I=typeof Symbol=="function"?Symbol:{},F=I.iterator||"@@iterator",q=I.asyncIterator||"@@asyncIterator",G=I.toStringTag||"@@toStringTag";function Y(Pe,Te,Ae){return Object.defineProperty(Pe,Te,{value:Ae,enumerable:!0,configurable:!0,writable:!0}),Pe[Te]}try{Y({},"")}catch{Y=function(Te,Ae,nt){return Te[Ae]=nt}}function X(Pe,Te,Ae,nt){var Ze=Te&&Te.prototype instanceof De?Te:De,ft=Object.create(Ze.prototype),kt=new Nt(nt||[]);return M(ft,"_invoke",{value:tt(Pe,Ae,kt)}),ft}function J(Pe,Te,Ae){try{return{type:"normal",arg:Pe.call(Te,Ae)}}catch(nt){return{type:"throw",arg:nt}}}_.wrap=X;var ie="suspendedStart",ce="suspendedYield",ge="executing",le="completed",ye={};function De(){}function Ne(){}function Fe(){}var je={};Y(je,F,function(){return this});var Xe=Object.getPrototypeOf,Ve=Xe&&Xe(Xe(St([])));Ve&&Ve!==O&&E.call(Ve,F)&&(je=Ve);var $e=Fe.prototype=De.prototype=Object.create(je);function Ke(Pe){["next","throw","return"].forEach(function(Te){Y(Pe,Te,function(Ae){return this._invoke(Te,Ae)})})}function qe(Pe,Te){function Ae(Ze,ft,kt,Ut){var zt=J(Pe[Ze],Pe,ft);if(zt.type!=="throw"){var Sr=zt.arg,Ir=Sr.value;return Ir&&zf(Ir)=="object"&&E.call(Ir,"__await")?Te.resolve(Ir.__await).then(function(Wr){Ae("next",Wr,kt,Ut)},function(Wr){Ae("throw",Wr,kt,Ut)}):Te.resolve(Ir).then(function(Wr){Sr.value=Wr,kt(Sr)},function(Wr){return Ae("throw",Wr,kt,Ut)})}Ut(zt.arg)}var nt;M(this,"_invoke",{value:function(Ze,ft){function kt(){return new Te(function(Ut,zt){Ae(Ze,ft,Ut,zt)})}return nt=nt?nt.then(kt,kt):kt()}})}function tt(Pe,Te,Ae){var nt=ie;return function(Ze,ft){if(nt===ge)throw new Error("Generator is already running");if(nt===le){if(Ze==="throw")throw ft;return{value:g,done:!0}}for(Ae.method=Ze,Ae.arg=ft;;){var kt=Ae.delegate;if(kt){var Ut=mt(kt,Ae);if(Ut){if(Ut===ye)continue;return Ut}}if(Ae.method==="next")Ae.sent=Ae._sent=Ae.arg;else if(Ae.method==="throw"){if(nt===ie)throw nt=le,Ae.arg;Ae.dispatchException(Ae.arg)}else Ae.method==="return"&&Ae.abrupt("return",Ae.arg);nt=ge;var zt=J(Pe,Te,Ae);if(zt.type==="normal"){if(nt=Ae.done?le:ce,zt.arg===ye)continue;return{value:zt.arg,done:Ae.done}}zt.type==="throw"&&(nt=le,Ae.method="throw",Ae.arg=zt.arg)}}}function mt(Pe,Te){var Ae=Te.method,nt=Pe.iterator[Ae];if(nt===g)return Te.delegate=null,Ae==="throw"&&Pe.iterator.return&&(Te.method="return",Te.arg=g,mt(Pe,Te),Te.method==="throw")||Ae!=="return"&&(Te.method="throw",Te.arg=new TypeError("The iterator does not provide a '"+Ae+"' method")),ye;var Ze=J(nt,Pe.iterator,Te.arg);if(Ze.type==="throw")return Te.method="throw",Te.arg=Ze.arg,Te.delegate=null,ye;var ft=Ze.arg;return ft?ft.done?(Te[Pe.resultName]=ft.value,Te.next=Pe.nextLoc,Te.method!=="return"&&(Te.method="next",Te.arg=g),Te.delegate=null,ye):ft:(Te.method="throw",Te.arg=new TypeError("iterator result is not an object"),Te.delegate=null,ye)}function It(Pe){var Te={tryLoc:Pe[0]};1 in Pe&&(Te.catchLoc=Pe[1]),2 in Pe&&(Te.finallyLoc=Pe[2],Te.afterLoc=Pe[3]),this.tryEntries.push(Te)}function bt(Pe){var Te=Pe.completion||{};Te.type="normal",delete Te.arg,Pe.completion=Te}function Nt(Pe){this.tryEntries=[{tryLoc:"root"}],Pe.forEach(It,this),this.reset(!0)}function St(Pe){if(Pe||Pe===""){var Te=Pe[F];if(Te)return Te.call(Pe);if(typeof Pe.next=="function")return Pe;if(!isNaN(Pe.length)){var Ae=-1,nt=function Ze(){for(;++Ae<Pe.length;)if(E.call(Pe,Ae))return Ze.value=Pe[Ae],Ze.done=!1,Ze;return Ze.value=g,Ze.done=!0,Ze};return nt.next=nt}}throw new TypeError(zf(Pe)+" is not iterable")}return Ne.prototype=Fe,M($e,"constructor",{value:Fe,configurable:!0}),M(Fe,"constructor",{value:Ne,configurable:!0}),Ne.displayName=Y(Fe,G,"GeneratorFunction"),_.isGeneratorFunction=function(Pe){var Te=typeof Pe=="function"&&Pe.constructor;return!!Te&&(Te===Ne||(Te.displayName||Te.name)==="GeneratorFunction")},_.mark=function(Pe){return Object.setPrototypeOf?Object.setPrototypeOf(Pe,Fe):(Pe.__proto__=Fe,Y(Pe,G,"GeneratorFunction")),Pe.prototype=Object.create($e),Pe},_.awrap=function(Pe){return{__await:Pe}},Ke(qe.prototype),Y(qe.prototype,q,function(){return this}),_.AsyncIterator=qe,_.async=function(Pe,Te,Ae,nt,Ze){Ze===void 0&&(Ze=Promise);var ft=new qe(X(Pe,Te,Ae,nt),Ze);return _.isGeneratorFunction(Te)?ft:ft.next().then(function(kt){return kt.done?kt.value:ft.next()})},Ke($e),Y($e,G,"Generator"),Y($e,F,function(){return this}),Y($e,"toString",function(){return"[object Generator]"}),_.keys=function(Pe){var Te=Object(Pe),Ae=[];for(var nt in Te)Ae.push(nt);return Ae.reverse(),function Ze(){for(;Ae.length;){var ft=Ae.pop();if(ft in Te)return Ze.value=ft,Ze.done=!1,Ze}return Ze.done=!0,Ze}},_.values=St,Nt.prototype={constructor:Nt,reset:function(Pe){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(bt),!Pe)for(var Te in this)Te.charAt(0)==="t"&&E.call(this,Te)&&!isNaN(+Te.slice(1))&&(this[Te]=g)},stop:function(){this.done=!0;var Pe=this.tryEntries[0].completion;if(Pe.type==="throw")throw Pe.arg;return this.rval},dispatchException:function(Pe){if(this.done)throw Pe;var Te=this;function Ae(zt,Sr){return ft.type="throw",ft.arg=Pe,Te.next=zt,Sr&&(Te.method="next",Te.arg=g),!!Sr}for(var nt=this.tryEntries.length-1;nt>=0;--nt){var Ze=this.tryEntries[nt],ft=Ze.completion;if(Ze.tryLoc==="root")return Ae("end");if(Ze.tryLoc<=this.prev){var kt=E.call(Ze,"catchLoc"),Ut=E.call(Ze,"finallyLoc");if(kt&&Ut){if(this.prev<Ze.catchLoc)return Ae(Ze.catchLoc,!0);if(this.prev<Ze.finallyLoc)return Ae(Ze.finallyLoc)}else if(kt){if(this.prev<Ze.catchLoc)return Ae(Ze.catchLoc,!0)}else{if(!Ut)throw new Error("try statement without catch or finally");if(this.prev<Ze.finallyLoc)return Ae(Ze.finallyLoc)}}}},abrupt:function(Pe,Te){for(var Ae=this.tryEntries.length-1;Ae>=0;--Ae){var nt=this.tryEntries[Ae];if(nt.tryLoc<=this.prev&&E.call(nt,"finallyLoc")&&this.prev<nt.finallyLoc){var Ze=nt;break}}Ze&&(Pe==="break"||Pe==="continue")&&Ze.tryLoc<=Te&&Te<=Ze.finallyLoc&&(Ze=null);var ft=Ze?Ze.completion:{};return ft.type=Pe,ft.arg=Te,Ze?(this.method="next",this.next=Ze.finallyLoc,ye):this.complete(ft)},complete:function(Pe,Te){if(Pe.type==="throw")throw Pe.arg;return Pe.type==="break"||Pe.type==="continue"?this.next=Pe.arg:Pe.type==="return"?(this.rval=this.arg=Pe.arg,this.method="return",this.next="end"):Pe.type==="normal"&&Te&&(this.next=Te),ye},finish:function(Pe){for(var Te=this.tryEntries.length-1;Te>=0;--Te){var Ae=this.tryEntries[Te];if(Ae.finallyLoc===Pe)return this.complete(Ae.completion,Ae.afterLoc),bt(Ae),ye}},catch:function(Pe){for(var Te=this.tryEntries.length-1;Te>=0;--Te){var Ae=this.tryEntries[Te];if(Ae.tryLoc===Pe){var nt=Ae.completion;if(nt.type==="throw"){var Ze=nt.arg;bt(Ae)}return Ze}}throw new Error("illegal catch attempt")},delegateYield:function(Pe,Te,Ae){return this.delegate={iterator:St(Pe),resultName:Te,nextLoc:Ae},this.method==="next"&&(this.arg=g),ye}},_}function Lr(g,_,O,E,M,I,F){try{var q=g[I](F),G=q.value}catch(Y){return void O(Y)}q.done?_(G):Promise.resolve(G).then(E,M)}function H0(g,_){for(var O=0;O<_.length;O++){var E=_[O];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,_a(E.key),E)}}function _a(g){var _=function(O,E){if(zf(O)!="object"||!O)return O;var M=O[Symbol.toPrimitive];if(M!==void 0){var I=M.call(O,"string");if(zf(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(O)}(g);return zf(_)=="symbol"?_:String(_)}var Di=window.localStorage,Vy="neo4j.nvl.sTid",Fl=!1,Y0=function(){function g(){var I,F,q;(function(Y,X){if(!(Y instanceof X))throw new TypeError("Cannot call a class as a function")})(this,g),I=this,q=void 0,(F=_a(F="analytics"))in I?Object.defineProperty(I,F,{value:q,enumerable:!0,configurable:!0,writable:!0}):I[F]=q;var G=new U0.AnalyticsBrowser;this.analytics=G}var _,O,E,M;return E=g,M=[{key:"init",value:function(I){this.analytics.load({writeKey:I}),this.analytics.addSourceMiddleware(function(F){var q=F.payload,G=F.next,Y=q.obj.context.page;Y!==void 0&&(Y.url="",Y.title="",Y.search="",Y.referrer="",Y.path=""),G(q)})}},{key:"trackEvent",value:(_=Bl().mark(function I(F){var q;return Bl().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,this.ready();case 2:q="".concat(F.eventPrefix?F.eventPrefix:"NVL_core","-").concat(F.event),this.analytics.track(q,F.properties).catch(function(Y){Gr.warn("TRACKING: Event tracking is failed. err: ".concat(Y))});case 4:case"end":return G.stop()}},I,this)}),O=function(){var I=this,F=arguments;return new Promise(function(q,G){var Y=_.apply(I,F);function X(ie){Lr(Y,q,G,X,J,"next",ie)}function J(ie){Lr(Y,q,G,X,J,"throw",ie)}X(void 0)})},function(I){return O.apply(this,arguments)})},{key:"identify",value:function(){if(!Fl){var I=this.getSegmentTrackingId();this.analytics.identify(I).catch(function(F){Gr.debug("TRACKING: Identifying user for Segment tracking failed. err: ".concat(F))}),Fl=!0}}},{key:"loadSavedSegmentId",value:function(){try{var I=Di.getItem(Vy);return typeof I=="string"?I:null}catch(F){return Gr.debug("TRACKING: Retrieving tracking Id failed. err: ".concat(F)),null}}},{key:"getSegmentTrackingId",value:function(){var I=this.loadSavedSegmentId(),F=I??W0();return this.saveTrackingId(F),F}},{key:"saveTrackingId",value:function(I){Di.setItem(Vy,I)}},{key:"ready",value:function(){return this.analytics.ready().catch(function(I){Gr.debug("TRACKING: segment track instance not ready. err: ".concat(I))})}}],M&&H0(E.prototype,M),Object.defineProperty(E,"prototype",{writable:!1}),g}();function fv(g){return fv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},fv(g)}function X0(g,_){return function(O){if(Array.isArray(O))return O}(g)||function(O,E){var M=O==null?null:typeof Symbol<"u"&&O[Symbol.iterator]||O["@@iterator"];if(M!=null){var I,F,q,G,Y=[],X=!0,J=!1;try{if(q=(M=M.call(O)).next,E!==0)for(;!(X=(I=q.call(M)).done)&&(Y.push(I.value),Y.length!==E);X=!0);}catch(ie){J=!0,F=ie}finally{try{if(!X&&M.return!=null&&(G=M.return(),Object(G)!==G))return}finally{if(J)throw F}}return Y}}(g,_)||qy(g,_)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function kg(g,_){var O=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!O){if(Array.isArray(g)||(O=qy(g))||_){O&&(g=O);var E=0,M=function(){};return{s:M,n:function(){return E>=g.length?{done:!0}:{done:!1,value:g[E++]}},e:function(G){throw G},f:M}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I,F=!0,q=!1;return{s:function(){O=O.call(g)},n:function(){var G=O.next();return F=G.done,G},e:function(G){q=!0,I=G},f:function(){try{F||O.return==null||O.return()}finally{if(q)throw I}}}}function qy(g,_){if(g){if(typeof g=="string")return Pp(g,_);var O=Object.prototype.toString.call(g).slice(8,-1);return O==="Object"&&g.constructor&&(O=g.constructor.name),O==="Map"||O==="Set"?Array.from(g):O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O)?Pp(g,_):void 0}}function Pp(g,_){(_==null||_>g.length)&&(_=g.length);for(var O=0,E=new Array(_);O<_;O++)E[O]=g[O];return E}function Wy(g,_){var O=Object.keys(g);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(g);_&&(E=E.filter(function(M){return Object.getOwnPropertyDescriptor(g,M).enumerable})),O.push.apply(O,E)}return O}function ei(g){for(var _=1;_<arguments.length;_++){var O=arguments[_]!=null?arguments[_]:{};_%2?Wy(Object(O),!0).forEach(function(E){var M,I,F;M=g,I=E,F=O[E],(I=hv(I))in M?Object.defineProperty(M,I,{value:F,enumerable:!0,configurable:!0,writable:!0}):M[I]=F}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(O)):Wy(Object(O)).forEach(function(E){Object.defineProperty(g,E,Object.getOwnPropertyDescriptor(O,E))})}return g}function Hy(g,_){for(var O=0;O<_.length;O++){var E=_[O];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,hv(E.key),E)}}function hv(g){var _=function(O,E){if(fv(O)!="object"||!O)return O;var M=O[Symbol.toPrimitive];if(M!==void 0){var I=M.call(O,"string");if(fv(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(O)}(g);return fv(_)=="symbol"?_:String(_)}function Nn(g,_,O){Si(g,_),_.set(g,O)}function Si(g,_){if(_.has(g))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ft(g,_){return g.get(Ua(g,_))}function Xh(g,_,O){return g.set(Ua(g,_),O),O}function Ua(g,_,O){if(typeof g=="function"?g===_:g.has(_))return arguments.length<3?_:O;throw new TypeError("Private element is not present on this object")}var dv=new WeakMap,Yy=new WeakMap,an=new WeakMap,En=new WeakMap,Zo=new WeakMap,Ul=new WeakMap,wa=new WeakSet,Xy=function(){function g(E){var M,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],q=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},G=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};(function(Y,X){if(!(Y instanceof X))throw new TypeError("Cannot call a class as a function")})(this,g),Si(this,M=wa),M.add(this),Nn(this,dv,void 0),Nn(this,Yy,void 0),Nn(this,an,void 0),Nn(this,En,void 0),Nn(this,Zo,void 0),Nn(this,Ul,void 0),q.disableTelemetry!==!0&&(Xh(Ul,this,new Y0),Ft(Ul,this).init("4SGwdwzuDm5WkFvQtz7D6ATQlo14yjmW"),Ft(Ul,this).identify()),Ua(wa,this,Ap).call(this,q),Xh(dv,this,new a(G)),Xh(Yy,this,new My),Xh(Zo,this,q),Ft(Zo,this).frame=E,this.checkWebGLCompatibility(),Ua(wa,this,Dg).call(this,I,F,q)}var _,O;return _=g,O=[{key:"restart",value:function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},M=arguments.length>1&&arguments[1]!==void 0&&arguments[1],I=this.getNodePositions(),F=Ft(an,this),q=F.zoom,G=F.layout,Y=F.layoutOptions,X=F.nodes,J=F.rels;Ft(En,this).destroy(),Object.assign(Ft(Zo,this),E),Ua(wa,this,Dg).call(this,X.items,J.items,Ft(Zo,this)),this.setZoom(q),this.setLayout(G),this.setLayoutOptions(Y),this.addAndUpdateElementsInGraph(X.items,J.items),M&&this.setNodePositions(I)}},{key:"addAndUpdateElementsInGraph",value:function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];Ua(wa,this,Mg).call(this,E),Ua(wa,this,Lg).call(this,M,E);var I={added:!1,updated:!1};Ft(an,this).nodes.update(E,ei({},I)),Ft(an,this).rels.update(M,ei({},I)),Ft(an,this).nodes.add(E,ei({},I)),Ft(an,this).rels.add(M,ei({},I)),Ft(an,this).setGraphUpdated(),Ft(En,this).updateHtmlOverlay()}},{key:"getSelectedNodes",value:function(){var E=this;return Ft(an,this).nodes.items.filter(function(M){return M.selected}).map(function(M){return ei(ei({},M),Ft(an,E).nodes.idToPosition[M.id])})}},{key:"getSelectedRelationships",value:function(){return Ft(an,this).rels.items.filter(function(E){return E.selected})}},{key:"updateElementsInGraph",value:function(E,M){var I={added:!1,updated:!1};Ua(wa,this,Mg).call(this,E),Ua(wa,this,Lg).call(this,M,E),Ft(an,this).nodes.update(E,ei({},I)),Ft(an,this).rels.update(M,ei({},I)),Ft(En,this).updateHtmlOverlay()}},{key:"addElementsToGraph",value:function(E,M){Ua(wa,this,Mg).call(this,E),Ua(wa,this,Lg).call(this,M,E);var I={added:!1,updated:!1};Ft(an,this).nodes.add(E,ei({},I)),Ft(an,this).rels.add(M,ei({},I)),Ft(En,this).updateHtmlOverlay()}},{key:"removeNodesWithIds",value:function(E){if(Array.isArray(E)&&!(0,r.isEmpty)(E)){var M,I={},F=kg(E);try{for(F.s();!(M=F.n()).done;)I[M.value]=!0}catch(J){F.e(J)}finally{F.f()}var q,G=[],Y=kg(Ft(an,this).rels.items);try{for(Y.s();!(q=Y.n()).done;){var X=q.value;I[X.from]!==!0&&I[X.to]!==!0||G.push(X.id)}}catch(J){Y.e(J)}finally{Y.f()}G.length>0&&Ua(wa,this,Gf).call(this,G),Ua(wa,this,gs).call(this,E),Ft(an,this).setGraphUpdated(),Ft(En,this).updateHtmlOverlay()}}},{key:"removeRelationshipsWithIds",value:function(E){Array.isArray(E)&&!(0,r.isEmpty)(E)&&(Ua(wa,this,Gf).call(this,E),Ft(an,this).setGraphUpdated(),Ft(En,this).updateHtmlOverlay())}},{key:"getNodes",value:function(){return Ft(En,this).dumpNodes()}},{key:"getRelationships",value:function(){return Ft(En,this).dumpRelationships()}},{key:"getNodeById",value:function(E){return Ft(an,this).nodes.idToItem[E]}},{key:"getRelationshipById",value:function(E){return Ft(an,this).rels.idToItem[E]}},{key:"getPositionById",value:function(E){return Ft(an,this).nodes.idToPosition[E]}},{key:"getCurrentOptions",value:function(){return Ft(Zo,this)}},{key:"destroy",value:function(){Ft(En,this).destroy()}},{key:"deselectAll",value:function(){this.updateElementsInGraph(Ft(an,this).nodes.items.map(function(E){return ei(ei({},E),{},{selected:!1})}),Ft(an,this).rels.items.map(function(E){return ei(ei({},E),{},{selected:!1})}))}},{key:"fit",value:function(E,M){Ft(En,this).fit(E,M)}},{key:"resetZoom",value:function(){Ft(En,this).resetZoom()}},{key:"setUseWebGLRenderer",value:function(E){Ft(En,this).setRenderer(E?ki:Oc)}},{key:"setRenderer",value:function(E){Ft(En,this).setRenderer(E)}},{key:"setDisableWebGL",value:function(){var E=arguments.length>0&&arguments[0]!==void 0&&arguments[0];Ft(Zo,this).disableWebGL!==E&&(Ft(Zo,this).disableWebGL=E,this.restart())}},{key:"pinNode",value:function(E){Ft(an,this).nodes.update([{id:E,pinned:!0}],{})}},{key:"unPinNode",value:function(E){Ft(an,this).nodes.update(E.map(function(M){return{id:M,pinned:!1}}),{})}},{key:"setLayout",value:function(E){Ft(an,this).setLayout(E)}},{key:"setLayoutOptions",value:function(E){Ft(an,this).setLayoutOptions(E)}},{key:"getNodesOnScreen",value:function(){return Ft(En,this).getNodesOnScreen()}},{key:"getNodePositions",value:function(){return Ft(En,this).getNodePositions()}},{key:"setNodePositions",value:function(E){var M=arguments.length>1&&arguments[1]!==void 0&&arguments[1];Ft(En,this).setNodePositions(E,M)}},{key:"isLayoutMoving",value:function(){return Ft(En,this).isLayoutMoving()}},{key:"saveToFile",value:function(E){Ft(En,this).saveToFile(E)}},{key:"saveFullGraphToLargeFile",value:function(E){Ft(En,this).saveFullGraphToLargeFile(E)}},{key:"setZoom",value:function(E){Ft(En,this).setZoomLevel(E)}},{key:"setPan",value:function(E,M){Ft(En,this).setPanCoordinates(E,M)}},{key:"setZoomAndPan",value:function(E,M,I){Ft(En,this).setZoomAndPan(E,M,I)}},{key:"getScale",value:function(){return Ft(En,this).getScale()}},{key:"getPan",value:function(){return Ft(En,this).getPan()}},{key:"getHits",value:function(E){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["node","relationship"],I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{hitNodeMarginWidth:0},F=Ft(an,this),q=F.zoom,G=F.panX,Y=F.panY,X=F.webGLVisible,J=qh(E,Ft(Zo,this).frame,q,G,Y),ie=J.x,ce=J.y,ge=X?function(le,ye,De){var Ne=arguments.length>3&&arguments[3]!==void 0?arguments[3]:["node","relationship"],Fe=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},je=[],Xe=[],Ve=De.nodes,$e=De.rels;return Ne.includes("node")&&je.push.apply(je,Rt(function(Ke,qe){var tt,mt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},It=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,bt=[],Nt=$t(arguments.length>2&&arguments[2]!==void 0?arguments[2]:[]);try{var St=function(){var Pe,Te=tt.value,Ae=mt[Te.id];if((Ae==null?void 0:Ae.x)===void 0||Ae.y===void 0)return 1;var nt=((Pe=Te.size)!==null&&Pe!==void 0?Pe:Zn)*rt(),Ze={x:Ae.x-Ke,y:Ae.y-qe},ft=Math.pow(nt,2),kt=Math.pow(nt+It,2),Ut=Math.pow(Ze.x,2)+Math.pow(Ze.y,2),zt=Math.sqrt(Ut);if(Ut<kt){var Sr=bt.findIndex(function(Ir){return Ir.distance>zt});bt.splice(Sr!==-1?Sr:bt.length,0,{data:Te,targetCoordinates:{x:Ae.x,y:Ae.y},pointerCoordinates:{x:Ke,y:qe},distanceVector:Ze,distance:zt,insideNode:Ut<ft})}};for(Nt.s();!(tt=Nt.n()).done;)St()}catch(Pe){Nt.e(Pe)}finally{Nt.f()}return bt}(le,ye,Ve.items,Ve.idToPosition,Fe.hitNodeMarginWidth))),Ne.includes("relationship")&&Xe.push.apply(Xe,Rt(function(Ke,qe){var tt,mt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},It=[],bt={},Nt=$t(arguments.length>2&&arguments[2]!==void 0?arguments[2]:[]);try{var St=function(){var Pe=tt.value,Te=Pe.from,Ae=Pe.to;if(bt["".concat(Te,".").concat(Ae)]===void 0){var nt=mt[Te],Ze=mt[Ae];if((nt==null?void 0:nt.x)===void 0||nt.y===void 0||(Ze==null?void 0:Ze.x)===void 0||Ze.y===void 0)return 0;var ft=us({x:nt.x,y:nt.y},{x:Ze.x,y:Ze.y},{x:Ke,y:qe});if(ft<=xt){var kt=It.findIndex(function(Ut){return Ut.distance>ft});It.splice(kt!==-1?kt:It.length,0,{data:Pe,fromTargetCoordinates:{x:nt.x,y:nt.y},toTargetCoordinates:{x:Ze.x,y:Ze.y},pointerCoordinates:{x:Ke,y:qe},distance:ft})}bt["".concat(Te,".").concat(Ae)]=1,bt["".concat(Ae,".").concat(Te)]=1}};for(Nt.s();!(tt=Nt.n()).done;)St()}catch(Pe){Nt.e(Pe)}finally{Nt.f()}return It}(le,ye,$e.items,Ve.idToPosition))),{nodes:je,relationships:Xe}}(ie,ce,Ft(an,this),M,I):function(le,ye,De){var Ne=arguments.length>3&&arguments[3]!==void 0?arguments[3]:["node","relationship"],Fe=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},je=[],Xe=[];return Ne.includes("node")&&je.push.apply(je,Rt(De.getCanvasNodesAt({x:le,y:ye},Fe.hitNodeMarginWidth))),Ne.includes("relationship")&&Xe.push.apply(Xe,Rt(De.getCanvasRelsAt({x:le,y:ye}))),{nodes:je,relationships:Xe}}(ie,ce,Ft(En,this),M,I);return ei(ei({},E),{},{nvlTargets:ge})}},{key:"getContainer",value:function(){return Ft(Zo,this).frame}},{key:"checkWebGLCompatibility",value:function(){var E=Ft(Zo,this).disableWebGL;if(E===void 0||!E){var M=function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document.createElement("canvas");try{return window.WebGLRenderingContext!==void 0&&(I.getContext("webgl")!==null||I.getContext("experimental-webgl")!==null)}catch{return!1}}();if(!M){if(E!==void 0)throw new ml("Could not initialize WebGL");Ft(Zo,this).renderer=Oc,console.warn("GPU acceleration is not available on your browser. Falling back to CPU layout and rendering. You can disable this warning by setting the disableWebGL option to true.")}E===void 0&&(Ft(Zo,this).disableWebGL=!M)}}}],O&&Hy(_.prototype,O),Object.defineProperty(_,"prototype",{writable:!1}),g}();function Dg(){var g,_=this,O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Xh(an,this,Uy(M)),M.minimapContainer instanceof HTMLElement||delete M.minimapContainer,Xh(En,this,new P0(Ft(an,this),M)),this.addAndUpdateElementsInGraph(O,E),Ft(En,this).on("restart",this.restart.bind(this));var I,F,q=kg((I=Ft(dv,this).callbacks,Object.entries(I)));try{for(q.s();!(F=q.n()).done;){var G=X0(F.value,2),Y=G[0];G[1]!==void 0&&Ft(En,this).on(Y,Ft(dv,this)[Y].bind(Ft(dv,this)))}}catch(J){q.e(J)}finally{q.f()}var X=(g=Ft(Zo,this).frame)===null||g===void 0?void 0:g.getAttribute("id");Ft(Zo,this).disableTelemetry!==!0&&setTimeout(function(){Ft(En,_).isDestroyed()||Ft(Ul,_).trackEvent({eventPrefix:Kt.includes(X)?X:null,event:"instantiated",properties:{}})},200)}function Ap(g){var _,O=g.logging;(O==null?void 0:O.level)!==void 0&&(_=O.level,Gr.setLevel(_),function(E,M){var I=E.methodFactory;E.methodFactory=function(F,q,G){var Y=I(F,q,G);return function(){for(var X=arguments.length,J=new Array(X),ie=0;ie<X;ie++)J[ie]=arguments[ie];typeof M.logger=="function"?M.logger.apply(M,[F].concat(J)):Y.apply(void 0,J)}},E.setLevel(E.getLevel())}(Gr,O))}function gs(g){var _=Array.isArray(g)?g:[g],O=Ft(an,this),E=O.nodes,M=O.fitNodeIds;E.remove(_,{removed:!1}),M.length&&_.find(function(I){return M.includes(I)})!==void 0&&Ft(an,this).fitNodes(M.filter(function(I){return!_.includes(I)}))}function Gf(g){var _=Array.isArray(g)?g:[g];Ft(an,this).rels.remove(_,{removed:!1})}function Mg(g){var _=g.find(function(E){return!function(M){return!!M&&typeof M.id=="string"&&M.id.length>0}(E)});if(_){var O="";throw/^\d+$/.test(_.id)||(O=" Node ids need to be numeric strings. Strings that contain anything other than numbers are not yet supported."),new TypeError("Invalid node provided: ".concat(JSON.stringify(_),".").concat(O))}}function Lg(g){for(var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],O="",E=null,M=Ft(an,this),I=M.nodes,F=M.rels,q={},G=0;G<_.length;G++){var Y=_[G];q[Y.id]=Y}for(var X=ei(ei({},I.idToItem),q),J=F.idToItem,ie=0;ie<g.length;ie++){var ce=g[ie];if(!B0(ce)){E=ce,/^\d+$/.test(ce.id)&&(O=" Node ids need to be numeric strings. Strings that contain anything other than numbers are not yet supported.");break}if(J[ce.id]===void 0){var ge=X[ce.from],le=X[ce.to];if(ge===void 0){O=' Node with id "'.concat(ce.from,'" does not exist.'),E=ce;break}if(le===void 0){O=' Node with id "'.concat(ce.to,'" does not exist.'),E=ce;break}}}if(E!==null)throw new TypeError("Invalid relationship provided: ".concat(JSON.stringify(E),".").concat(O))}var K0={textColorForBackground:gp};const $0=Xy})();xu.RL;xu.wK;xu.x_;xu.lv;xu.YQ;var Uj=xu.BP;xu.GZ;xu.Vw;xu.Ay;xu._G;xu.Wy;xu.h4;const V5=10,gw=10;class T0{constructor(e,t){Rn(this,"nvl");Rn(this,"options");Rn(this,"container");Rn(this,"callbackMap");Rn(this,"addEventListener",(e,t,n)=>{var i;(i=this.container)==null||i.addEventListener(e,t,n)});Rn(this,"removeEventListener",(e,t,n)=>{var i;(i=this.container)==null||i.removeEventListener(e,t,n)});Rn(this,"callCallbackIfRegistered",(e,...t)=>{const n=this.callbackMap.get(e);typeof n=="function"&&n(...t)});Rn(this,"updateCallback",(e,t)=>{this.callbackMap.set(e,t)});Rn(this,"removeCallback",e=>{this.callbackMap.delete(e)});this.nvl=e,this.options=t,this.container=this.nvl.getContainer(),this.callbackMap=new Map}get nvlInstance(){return this.nvl}get currentOptions(){return this.options}get containerInstance(){return this.container}}const q5=(r,e)=>{const t=Math.abs(r.clientX-e.x),n=Math.abs(r.clientY-e.y);return t>gw||n>gw?!0:Math.pow(t,2)+Math.pow(n,2)>gw},W5=(r,e)=>{const t=r.getBoundingClientRect(),n=window.devicePixelRatio||1;return{x:(e.clientX-t.left-t.width*.5)*n,y:(e.clientY-t.top-t.height*.5)*n}};class zj extends T0{constructor(t,n={selectOnClick:!1}){super(t,n);Rn(this,"moved");Rn(this,"mousePosition");Rn(this,"handleMouseDown",t=>{this.mousePosition={x:t.clientX,y:t.clientY}});Rn(this,"handleRightClick",t=>{var o,s;t.preventDefault();const{nvlTargets:n}=this.nvlInstance.getHits(t),{nodes:i=[],relationships:a=[]}=n;if(i.length===0&&a.length===0){this.callCallbackIfRegistered("onCanvasRightClick",t);return}i.length>0?this.callCallbackIfRegistered("onNodeRightClick",(o=i[0])==null?void 0:o.data,n,t):a.length>0&&this.callCallbackIfRegistered("onRelationshipRightClick",(s=a[0])==null?void 0:s.data,n,t)});Rn(this,"handleDoubleClick",t=>{var o,s;const{nvlTargets:n}=this.nvlInstance.getHits(t),{nodes:i=[],relationships:a=[]}=n;if(i.length===0&&a.length===0){this.callCallbackIfRegistered("onCanvasDoubleClick",t);return}i.length>0?this.callCallbackIfRegistered("onNodeDoubleClick",(o=i[0])==null?void 0:o.data,n,t):a.length>0&&this.callCallbackIfRegistered("onRelationshipDoubleClick",(s=a[0])==null?void 0:s.data,n,t)});Rn(this,"handleClick",t=>{var o,s;if(q5(t,this.mousePosition)||t.button!==0)return;const{nvlTargets:n}=this.nvlInstance.getHits(t),{nodes:i=[],relationships:a=[]}=n;if(i.length===0&&a.length===0){this.currentOptions.selectOnClick===!0&&this.nvlInstance.deselectAll(),this.callCallbackIfRegistered("onCanvasClick",t);return}if(i.length>0){const u=i.map(l=>l.data);if(this.currentOptions.selectOnClick===!0){const l=this.nvlInstance.getSelectedNodes(),c=this.nvlInstance.getSelectedRelationships(),h=[...u[0]?[{id:u[0].id,selected:!0}]:[],...l.map(v=>({id:v.id,selected:!1}))],d=c.map(v=>({...v,selected:!1}));this.nvlInstance.updateElementsInGraph(h,d)}this.callCallbackIfRegistered("onNodeClick",(o=i[0])==null?void 0:o.data,n,t)}else if(a.length>0){const u=a.map(l=>l.data);if(this.currentOptions.selectOnClick===!0){const l=this.nvlInstance.getSelectedNodes(),c=this.nvlInstance.getSelectedRelationships(),f=l.map(v=>({id:v.id,selected:!1})),d=[...u[0]?[{id:u[0].id,selected:!0}]:[],...c.map(v=>({...v,selected:!1}))];this.nvlInstance.updateElementsInGraph(f,d)}this.callCallbackIfRegistered("onRelationshipClick",(s=a[0])==null?void 0:s.data,n,t)}});Rn(this,"destroy",()=>{this.removeEventListener("mousedown",this.handleMouseDown,!0),this.removeEventListener("click",this.handleClick,!0),this.removeEventListener("dblclick",this.handleDoubleClick,!0),this.removeEventListener("contextmenu",this.handleRightClick,!0)});this.mousePosition={x:0,y:0},this.addEventListener("mousedown",this.handleMouseDown,!0),this.addEventListener("click",this.handleClick,!0),this.addEventListener("dblclick",this.handleDoubleClick,!0),this.addEventListener("contextmenu",this.handleRightClick,!0)}}class Gj extends T0{constructor(t,n={drawShadowOnHover:!1}){super(t,n);Rn(this,"currentHoveredElement");Rn(this,"currentHoveredElementIsNode");Rn(this,"updates");Rn(this,"handleHover",t=>{const{nvlTargets:n}=this.nvlInstance.getHits(t),{nodes:i=[],relationships:a=[]}=n,o=i[0]??a[0],s=o==null?void 0:o.data;if(this.currentElementNeedsUnHover(s==null?void 0:s.id)&&this.unHoverCurrentElement(),s!==void 0&&i[0]!==void 0)this.updates.nodes.push({id:s.id,hovered:!0}),this.currentHoveredElement=s,this.currentHoveredElementIsNode=!0;else if(o!==void 0){const{id:l,from:c,to:f}=s;this.updates.relationships.push({id:l,from:c,to:f,hovered:!0}),this.currentHoveredElement=s,this.currentHoveredElementIsNode=!1}else this.currentHoveredElement=void 0,this.currentHoveredElementIsNode=void 0;this.callCallbackIfRegistered("onHover",this.currentHoveredElement,n,t),this.currentOptions.drawShadowOnHover===!0&&this.nvlInstance.getNodes().length>0&&this.nvlInstance.updateElementsInGraph(this.updates.nodes,this.updates.relationships),this.clearUpdates()});this.updates={nodes:[],relationships:[]},this.addEventListener("mousemove",this.handleHover,!0)}clearUpdates(){this.updates.nodes=[],this.updates.relationships=[]}currentElementNeedsUnHover(t){return this.currentHoveredElement!==void 0&&this.currentHoveredElement.id!==t}unHoverCurrentElement(){if(this.currentHoveredElement===void 0)return;const t={id:this.currentHoveredElement.id,hovered:!1};if(this.currentHoveredElementIsNode===!0)this.updates.nodes.push(t);else{const{from:n,to:i}=this.currentHoveredElement;this.updates.relationships.push({...t,from:n,to:i})}}destroy(){this.removeEventListener("mousemove",this.handleHover,!0)}}var bm={exports:{}},jm={exports:{}},H5=jm.exports,bS;function Y5(){return bS||(bS=1,function(r,e){(function(t,n){r.exports=n()})(H5,function(){function t(p,m,x,T,P){(function C(R,D,N,j,B){for(;j>N;){if(j-N>600){var z=j-N+1,W=D-N+1,Z=Math.log(z),Q=.5*Math.exp(2*Z/3),re=.5*Math.sqrt(Z*Q*(z-Q)/z)*(W-z/2<0?-1:1),ee=Math.max(N,Math.floor(D-W*Q/z+re)),ue=Math.min(j,Math.floor(D+(z-W)*Q/z+re));C(R,D,ee,ue,B)}var de=R[D],se=N,me=j;for(n(R,N,D),B(R[j],de)>0&&n(R,N,j);se<me;){for(n(R,se,me),se++,me--;B(R[se],de)<0;)se++;for(;B(R[me],de)>0;)me--}B(R[N],de)===0?n(R,N,me):n(R,++me,j),me<=D&&(N=me+1),D<=me&&(j=me-1)}})(p,m,x||0,T||p.length-1,P||i)}function n(p,m,x){var T=p[m];p[m]=p[x],p[x]=T}function i(p,m){return p<m?-1:p>m?1:0}var a=function(p){p===void 0&&(p=9),this._maxEntries=Math.max(4,p),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function o(p,m,x){if(!x)return m.indexOf(p);for(var T=0;T<m.length;T++)if(x(p,m[T]))return T;return-1}function s(p,m){u(p,0,p.children.length,m,p)}function u(p,m,x,T,P){P||(P=w(null)),P.minX=1/0,P.minY=1/0,P.maxX=-1/0,P.maxY=-1/0;for(var C=m;C<x;C++){var R=p.children[C];l(P,p.leaf?T(R):R)}return P}function l(p,m){return p.minX=Math.min(p.minX,m.minX),p.minY=Math.min(p.minY,m.minY),p.maxX=Math.max(p.maxX,m.maxX),p.maxY=Math.max(p.maxY,m.maxY),p}function c(p,m){return p.minX-m.minX}function f(p,m){return p.minY-m.minY}function h(p){return(p.maxX-p.minX)*(p.maxY-p.minY)}function d(p){return p.maxX-p.minX+(p.maxY-p.minY)}function v(p,m){return p.minX<=m.minX&&p.minY<=m.minY&&m.maxX<=p.maxX&&m.maxY<=p.maxY}function y(p,m){return m.minX<=p.maxX&&m.minY<=p.maxY&&m.maxX>=p.minX&&m.maxY>=p.minY}function w(p){return{children:p,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function b(p,m,x,T,P){for(var C=[m,x];C.length;)if(!((x=C.pop())-(m=C.pop())<=T)){var R=m+Math.ceil((x-m)/T/2)*T;t(p,R,m,x,P),C.push(m,R,R,x)}}return a.prototype.all=function(){return this._all(this.data,[])},a.prototype.search=function(p){var m=this.data,x=[];if(!y(p,m))return x;for(var T=this.toBBox,P=[];m;){for(var C=0;C<m.children.length;C++){var R=m.children[C],D=m.leaf?T(R):R;y(p,D)&&(m.leaf?x.push(R):v(p,D)?this._all(R,x):P.push(R))}m=P.pop()}return x},a.prototype.collides=function(p){var m=this.data;if(!y(p,m))return!1;for(var x=[];m;){for(var T=0;T<m.children.length;T++){var P=m.children[T],C=m.leaf?this.toBBox(P):P;if(y(p,C)){if(m.leaf||v(p,C))return!0;x.push(P)}}m=x.pop()}return!1},a.prototype.load=function(p){if(!p||!p.length)return this;if(p.length<this._minEntries){for(var m=0;m<p.length;m++)this.insert(p[m]);return this}var x=this._build(p.slice(),0,p.length-1,0);if(this.data.children.length)if(this.data.height===x.height)this._splitRoot(this.data,x);else{if(this.data.height<x.height){var T=this.data;this.data=x,x=T}this._insert(x,this.data.height-x.height-1,!0)}else this.data=x;return this},a.prototype.insert=function(p){return p&&this._insert(p,this.data.height-1),this},a.prototype.clear=function(){return this.data=w([]),this},a.prototype.remove=function(p,m){if(!p)return this;for(var x,T,P,C=this.data,R=this.toBBox(p),D=[],N=[];C||D.length;){if(C||(C=D.pop(),T=D[D.length-1],x=N.pop(),P=!0),C.leaf){var j=o(p,C.children,m);if(j!==-1)return C.children.splice(j,1),D.push(C),this._condense(D),this}P||C.leaf||!v(C,R)?T?(x++,C=T.children[x],P=!1):C=null:(D.push(C),N.push(x),x=0,T=C,C=C.children[0])}return this},a.prototype.toBBox=function(p){return p},a.prototype.compareMinX=function(p,m){return p.minX-m.minX},a.prototype.compareMinY=function(p,m){return p.minY-m.minY},a.prototype.toJSON=function(){return this.data},a.prototype.fromJSON=function(p){return this.data=p,this},a.prototype._all=function(p,m){for(var x=[];p;)p.leaf?m.push.apply(m,p.children):x.push.apply(x,p.children),p=x.pop();return m},a.prototype._build=function(p,m,x,T){var P,C=x-m+1,R=this._maxEntries;if(C<=R)return s(P=w(p.slice(m,x+1)),this.toBBox),P;T||(T=Math.ceil(Math.log(C)/Math.log(R)),R=Math.ceil(C/Math.pow(R,T-1))),(P=w([])).leaf=!1,P.height=T;var D=Math.ceil(C/R),N=D*Math.ceil(Math.sqrt(R));b(p,m,x,N,this.compareMinX);for(var j=m;j<=x;j+=N){var B=Math.min(j+N-1,x);b(p,j,B,D,this.compareMinY);for(var z=j;z<=B;z+=D){var W=Math.min(z+D-1,B);P.children.push(this._build(p,z,W,T-1))}}return s(P,this.toBBox),P},a.prototype._chooseSubtree=function(p,m,x,T){for(;T.push(m),!m.leaf&&T.length-1!==x;){for(var P=1/0,C=1/0,R=void 0,D=0;D<m.children.length;D++){var N=m.children[D],j=h(N),B=(z=p,W=N,(Math.max(W.maxX,z.maxX)-Math.min(W.minX,z.minX))*(Math.max(W.maxY,z.maxY)-Math.min(W.minY,z.minY))-j);B<C?(C=B,P=j<P?j:P,R=N):B===C&&j<P&&(P=j,R=N)}m=R||m.children[0]}var z,W;return m},a.prototype._insert=function(p,m,x){var T=x?p:this.toBBox(p),P=[],C=this._chooseSubtree(T,this.data,m,P);for(C.children.push(p),l(C,T);m>=0&&P[m].children.length>this._maxEntries;)this._split(P,m),m--;this._adjustParentBBoxes(T,P,m)},a.prototype._split=function(p,m){var x=p[m],T=x.children.length,P=this._minEntries;this._chooseSplitAxis(x,P,T);var C=this._chooseSplitIndex(x,P,T),R=w(x.children.splice(C,x.children.length-C));R.height=x.height,R.leaf=x.leaf,s(x,this.toBBox),s(R,this.toBBox),m?p[m-1].children.push(R):this._splitRoot(x,R)},a.prototype._splitRoot=function(p,m){this.data=w([p,m]),this.data.height=p.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},a.prototype._chooseSplitIndex=function(p,m,x){for(var T,P,C,R,D,N,j,B=1/0,z=1/0,W=m;W<=x-m;W++){var Z=u(p,0,W,this.toBBox),Q=u(p,W,x,this.toBBox),re=(P=Z,C=Q,R=void 0,D=void 0,N=void 0,j=void 0,R=Math.max(P.minX,C.minX),D=Math.max(P.minY,C.minY),N=Math.min(P.maxX,C.maxX),j=Math.min(P.maxY,C.maxY),Math.max(0,N-R)*Math.max(0,j-D)),ee=h(Z)+h(Q);re<B?(B=re,T=W,z=ee<z?ee:z):re===B&&ee<z&&(z=ee,T=W)}return T||x-m},a.prototype._chooseSplitAxis=function(p,m,x){var T=p.leaf?this.compareMinX:c,P=p.leaf?this.compareMinY:f;this._allDistMargin(p,m,x,T)<this._allDistMargin(p,m,x,P)&&p.children.sort(T)},a.prototype._allDistMargin=function(p,m,x,T){p.children.sort(T);for(var P=this.toBBox,C=u(p,0,m,P),R=u(p,x-m,x,P),D=d(C)+d(R),N=m;N<x-m;N++){var j=p.children[N];l(C,p.leaf?P(j):j),D+=d(C)}for(var B=x-m-1;B>=m;B--){var z=p.children[B];l(R,p.leaf?P(z):z),D+=d(R)}return D},a.prototype._adjustParentBBoxes=function(p,m,x){for(var T=x;T>=0;T--)l(m[T],p)},a.prototype._condense=function(p){for(var m=p.length-1,x=void 0;m>=0;m--)p[m].children.length===0?m>0?(x=p[m-1].children).splice(x.indexOf(p[m]),1):this.clear():s(p[m],this.toBBox)},a})}(jm)),jm.exports}class X5{constructor(e=[],t=K5){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:n}=this,i=t[e];for(;e>0;){const a=e-1>>1,o=t[a];if(n(i,o)>=0)break;t[e]=o,e=a}t[e]=i}_down(e){const{data:t,compare:n}=this,i=this.length>>1,a=t[e];for(;e<i;){let o=(e<<1)+1,s=t[o];const u=o+1;if(u<this.length&&n(t[u],s)<0&&(o=u,s=t[u]),n(s,a)>=0)break;t[e]=s,e=o}t[e]=a}}function K5(r,e){return r<e?-1:r>e?1:0}const $5=Object.freeze(Object.defineProperty({__proto__:null,default:X5},Symbol.toStringTag,{value:"Module"})),Z5=AC($5);var Yg={exports:{}},yw,_S;function Q5(){return _S||(_S=1,yw=function(e,t,n,i){var a=e[0],o=e[1],s=!1;n===void 0&&(n=0),i===void 0&&(i=t.length);for(var u=(i-n)/2,l=0,c=u-1;l<u;c=l++){var f=t[n+l*2+0],h=t[n+l*2+1],d=t[n+c*2+0],v=t[n+c*2+1],y=h>o!=v>o&&a<(d-f)*(o-h)/(v-h)+f;y&&(s=!s)}return s}),yw}var mw,wS;function J5(){return wS||(wS=1,mw=function(e,t,n,i){var a=e[0],o=e[1],s=!1;n===void 0&&(n=0),i===void 0&&(i=t.length);for(var u=i-n,l=0,c=u-1;l<u;c=l++){var f=t[l+n][0],h=t[l+n][1],d=t[c+n][0],v=t[c+n][1],y=h>o!=v>o&&a<(d-f)*(o-h)/(v-h)+f;y&&(s=!s)}return s}),mw}var ES;function ej(){if(ES)return Yg.exports;ES=1;var r=Q5(),e=J5();return Yg.exports=function(n,i,a,o){return i.length>0&&Array.isArray(i[0])?e(n,i,a,o):r(n,i,a,o)},Yg.exports.nested=e,Yg.exports.flat=r,Yg.exports}var Qg={exports:{}},tj=Qg.exports,xS;function rj(){return xS||(xS=1,function(r,e){(function(t,n){n(e)})(tj,function(t){const i=33306690738754706e-32;function a(y,w,b,p,m){let x,T,P,C,R=w[0],D=p[0],N=0,j=0;D>R==D>-R?(x=R,R=w[++N]):(x=D,D=p[++j]);let B=0;if(N<y&&j<b)for(D>R==D>-R?(P=x-((T=R+x)-R),R=w[++N]):(P=x-((T=D+x)-D),D=p[++j]),x=T,P!==0&&(m[B++]=P);N<y&&j<b;)D>R==D>-R?(P=x-((T=x+R)-(C=T-x))+(R-C),R=w[++N]):(P=x-((T=x+D)-(C=T-x))+(D-C),D=p[++j]),x=T,P!==0&&(m[B++]=P);for(;N<y;)P=x-((T=x+R)-(C=T-x))+(R-C),R=w[++N],x=T,P!==0&&(m[B++]=P);for(;j<b;)P=x-((T=x+D)-(C=T-x))+(D-C),D=p[++j],x=T,P!==0&&(m[B++]=P);return x===0&&B!==0||(m[B++]=x),B}function o(y){return new Float64Array(y)}const s=33306690738754716e-32,u=22204460492503146e-32,l=11093356479670487e-47,c=o(4),f=o(8),h=o(12),d=o(16),v=o(4);t.orient2d=function(y,w,b,p,m,x){const T=(w-x)*(b-m),P=(y-m)*(p-x),C=T-P;if(T===0||P===0||T>0!=P>0)return C;const R=Math.abs(T+P);return Math.abs(C)>=s*R?C:-function(D,N,j,B,z,W,Z){let Q,re,ee,ue,de,se,me,Me,he,fe,Ee,Ce,ke,Re,ve,we,Oe,Be;const Ye=D-z,ht=j-z,Ct=N-W,ct=B-W;de=(ve=(Me=Ye-(me=(se=134217729*Ye)-(se-Ye)))*(fe=ct-(he=(se=134217729*ct)-(se-ct)))-((Re=Ye*ct)-me*he-Me*he-me*fe))-(Ee=ve-(Oe=(Me=Ct-(me=(se=134217729*Ct)-(se-Ct)))*(fe=ht-(he=(se=134217729*ht)-(se-ht)))-((we=Ct*ht)-me*he-Me*he-me*fe))),c[0]=ve-(Ee+de)+(de-Oe),de=(ke=Re-((Ce=Re+Ee)-(de=Ce-Re))+(Ee-de))-(Ee=ke-we),c[1]=ke-(Ee+de)+(de-we),de=(Be=Ce+Ee)-Ce,c[2]=Ce-(Be-de)+(Ee-de),c[3]=Be;let H=function(ze,Je){let Pt=Je[0];for(let Lt=1;Lt<ze;Lt++)Pt+=Je[Lt];return Pt}(4,c),$=u*Z;if(H>=$||-H>=$||(Q=D-(Ye+(de=D-Ye))+(de-z),ee=j-(ht+(de=j-ht))+(de-z),re=N-(Ct+(de=N-Ct))+(de-W),ue=B-(ct+(de=B-ct))+(de-W),Q===0&&re===0&&ee===0&&ue===0)||($=l*Z+i*Math.abs(H),(H+=Ye*ue+ct*Q-(Ct*ee+ht*re))>=$||-H>=$))return H;de=(ve=(Me=Q-(me=(se=134217729*Q)-(se-Q)))*(fe=ct-(he=(se=134217729*ct)-(se-ct)))-((Re=Q*ct)-me*he-Me*he-me*fe))-(Ee=ve-(Oe=(Me=re-(me=(se=134217729*re)-(se-re)))*(fe=ht-(he=(se=134217729*ht)-(se-ht)))-((we=re*ht)-me*he-Me*he-me*fe))),v[0]=ve-(Ee+de)+(de-Oe),de=(ke=Re-((Ce=Re+Ee)-(de=Ce-Re))+(Ee-de))-(Ee=ke-we),v[1]=ke-(Ee+de)+(de-we),de=(Be=Ce+Ee)-Ce,v[2]=Ce-(Be-de)+(Ee-de),v[3]=Be;const ne=a(4,c,4,v,f);de=(ve=(Me=Ye-(me=(se=134217729*Ye)-(se-Ye)))*(fe=ue-(he=(se=134217729*ue)-(se-ue)))-((Re=Ye*ue)-me*he-Me*he-me*fe))-(Ee=ve-(Oe=(Me=Ct-(me=(se=134217729*Ct)-(se-Ct)))*(fe=ee-(he=(se=134217729*ee)-(se-ee)))-((we=Ct*ee)-me*he-Me*he-me*fe))),v[0]=ve-(Ee+de)+(de-Oe),de=(ke=Re-((Ce=Re+Ee)-(de=Ce-Re))+(Ee-de))-(Ee=ke-we),v[1]=ke-(Ee+de)+(de-we),de=(Be=Ce+Ee)-Ce,v[2]=Ce-(Be-de)+(Ee-de),v[3]=Be;const Ie=a(ne,f,4,v,h);de=(ve=(Me=Q-(me=(se=134217729*Q)-(se-Q)))*(fe=ue-(he=(se=134217729*ue)-(se-ue)))-((Re=Q*ue)-me*he-Me*he-me*fe))-(Ee=ve-(Oe=(Me=re-(me=(se=134217729*re)-(se-re)))*(fe=ee-(he=(se=134217729*ee)-(se-ee)))-((we=re*ee)-me*he-Me*he-me*fe))),v[0]=ve-(Ee+de)+(de-Oe),de=(ke=Re-((Ce=Re+Ee)-(de=Ce-Re))+(Ee-de))-(Ee=ke-we),v[1]=ke-(Ee+de)+(de-we),de=(Be=Ce+Ee)-Ce,v[2]=Ce-(Be-de)+(Ee-de),v[3]=Be;const Le=a(Ie,h,4,v,d);return d[Le-1]}(y,w,b,p,m,x,R)},t.orient2dfast=function(y,w,b,p,m,x){return(w-x)*(b-m)-(y-m)*(p-x)},Object.defineProperty(t,"__esModule",{value:!0})})}(Qg,Qg.exports)),Qg.exports}var OS;function nj(){if(OS)return bm.exports;OS=1;var r=Y5(),e=Z5,t=ej(),n=rj().orient2d;e.default&&(e=e.default),bm.exports=i,bm.exports.default=i;function i(x,T,P){T=Math.max(0,T===void 0?2:T),P=P||0;var C=d(x),R=new r(16);R.toBBox=function(me){return{minX:me[0],minY:me[1],maxX:me[0],maxY:me[1]}},R.compareMinX=function(me,Me){return me[0]-Me[0]},R.compareMinY=function(me,Me){return me[1]-Me[1]},R.load(x);for(var D=[],N=0,j;N<C.length;N++){var B=C[N];R.remove(B),j=v(B,j),D.push(j)}var z=new r(16);for(N=0;N<D.length;N++)z.insert(h(D[N]));for(var W=T*T,Z=P*P;D.length;){var Q=D.shift(),re=Q.p,ee=Q.next.p,ue=y(re,ee);if(!(ue<Z)){var de=ue/W;B=a(R,Q.prev.p,re,ee,Q.next.next.p,de,z),B&&Math.min(y(B,re),y(B,ee))<=de&&(D.push(Q),D.push(v(B,Q)),R.remove(B),z.remove(Q),z.insert(h(Q)),z.insert(h(Q.next)))}}Q=j;var se=[];do se.push(Q.p),Q=Q.next;while(Q!==j);return se.push(Q.p),se}function a(x,T,P,C,R,D,N){for(var j=new e([],o),B=x.data;B;){for(var z=0;z<B.children.length;z++){var W=B.children[z],Z=B.leaf?w(W,P,C):s(P,C,W);Z>D||j.push({node:W,dist:Z})}for(;j.length&&!j.peek().node.children;){var Q=j.pop(),re=Q.node,ee=w(re,T,P),ue=w(re,C,R);if(Q.dist<ee&&Q.dist<ue&&l(P,re,N)&&l(C,re,N))return re}B=j.pop(),B&&(B=B.node)}return null}function o(x,T){return x.dist-T.dist}function s(x,T,P){if(u(x,P)||u(T,P))return 0;var C=b(x[0],x[1],T[0],T[1],P.minX,P.minY,P.maxX,P.minY);if(C===0)return 0;var R=b(x[0],x[1],T[0],T[1],P.minX,P.minY,P.minX,P.maxY);if(R===0)return 0;var D=b(x[0],x[1],T[0],T[1],P.maxX,P.minY,P.maxX,P.maxY);if(D===0)return 0;var N=b(x[0],x[1],T[0],T[1],P.minX,P.maxY,P.maxX,P.maxY);return N===0?0:Math.min(C,R,D,N)}function u(x,T){return x[0]>=T.minX&&x[0]<=T.maxX&&x[1]>=T.minY&&x[1]<=T.maxY}function l(x,T,P){for(var C=Math.min(x[0],T[0]),R=Math.min(x[1],T[1]),D=Math.max(x[0],T[0]),N=Math.max(x[1],T[1]),j=P.search({minX:C,minY:R,maxX:D,maxY:N}),B=0;B<j.length;B++)if(f(j[B].p,j[B].next.p,x,T))return!1;return!0}function c(x,T,P){return n(x[0],x[1],T[0],T[1],P[0],P[1])}function f(x,T,P,C){return x!==C&&T!==P&&c(x,T,P)>0!=c(x,T,C)>0&&c(P,C,x)>0!=c(P,C,T)>0}function h(x){var T=x.p,P=x.next.p;return x.minX=Math.min(T[0],P[0]),x.minY=Math.min(T[1],P[1]),x.maxX=Math.max(T[0],P[0]),x.maxY=Math.max(T[1],P[1]),x}function d(x){for(var T=x[0],P=x[0],C=x[0],R=x[0],D=0;D<x.length;D++){var N=x[D];N[0]<T[0]&&(T=N),N[0]>C[0]&&(C=N),N[1]<P[1]&&(P=N),N[1]>R[1]&&(R=N)}var j=[T,P,C,R],B=j.slice();for(D=0;D<x.length;D++)t(x[D],j)||B.push(x[D]);return m(B)}function v(x,T){var P={p:x,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return T?(P.next=T.next,P.prev=T,T.next.prev=P,T.next=P):(P.prev=P,P.next=P),P}function y(x,T){var P=x[0]-T[0],C=x[1]-T[1];return P*P+C*C}function w(x,T,P){var C=T[0],R=T[1],D=P[0]-C,N=P[1]-R;if(D!==0||N!==0){var j=((x[0]-C)*D+(x[1]-R)*N)/(D*D+N*N);j>1?(C=P[0],R=P[1]):j>0&&(C+=D*j,R+=N*j)}return D=x[0]-C,N=x[1]-R,D*D+N*N}function b(x,T,P,C,R,D,N,j){var B=P-x,z=C-T,W=N-R,Z=j-D,Q=x-R,re=T-D,ee=B*B+z*z,ue=B*W+z*Z,de=W*W+Z*Z,se=B*Q+z*re,me=W*Q+Z*re,Me=ee*de-ue*ue,he,fe,Ee,Ce,ke=Me,Re=Me;Me===0?(fe=0,ke=1,Ce=me,Re=de):(fe=ue*me-de*se,Ce=ee*me-ue*se,fe<0?(fe=0,Ce=me,Re=de):fe>ke&&(fe=ke,Ce=me+ue,Re=de)),Ce<0?(Ce=0,-se<0?fe=0:-se>ee?fe=ke:(fe=-se,ke=ee)):Ce>Re&&(Ce=Re,-se+ue<0?fe=0:-se+ue>ee?fe=ke:(fe=-se+ue,ke=ee)),he=fe===0?0:fe/ke,Ee=Ce===0?0:Ce/Re;var ve=(1-he)*x+he*P,we=(1-he)*T+he*C,Oe=(1-Ee)*R+Ee*N,Be=(1-Ee)*D+Ee*j,Ye=Oe-ve,ht=Be-we;return Ye*Ye+ht*ht}function p(x,T){return x[0]===T[0]?x[1]-T[1]:x[0]-T[0]}function m(x){x.sort(p);for(var T=[],P=0;P<x.length;P++){for(;T.length>=2&&c(T[T.length-2],T[T.length-1],x[P])<=0;)T.pop();T.push(x[P])}for(var C=[],R=x.length-1;R>=0;R--){for(;C.length>=2&&c(C[C.length-2],C[C.length-1],x[R])<=0;)C.pop();C.push(x[R])}return C.pop(),T.pop(),T.concat(C)}return bm.exports}nj();var Z2=Ci();class Vj extends T0{constructor(t,n={excludeNodeMargin:!1}){super(t,n);Rn(this,"mousePosition");Rn(this,"targets");Rn(this,"shouldPan");Rn(this,"updateTargets",(t,n)=>{this.targets=t,this.currentOptions.excludeNodeMargin=n});Rn(this,"handleMouseDown",t=>{const n=this.nvlInstance.getHits(t,Z2.difference(["node","relationship"],this.targets),{hitNodeMarginWidth:this.currentOptions.excludeNodeMargin===!0?V5:0});n.nvlTargets.nodes.length>0||n.nvlTargets.relationships.length>0?this.shouldPan=!1:(this.mousePosition={x:t.clientX,y:t.clientY},this.shouldPan=!0)});Rn(this,"handleMouseMove",t=>{if(!this.shouldPan||t.buttons!==1)return;const n=this.nvlInstance.getScale(),{x:i,y:a}=this.nvlInstance.getPan(),o=(t.clientX-this.mousePosition.x)/n*window.devicePixelRatio,s=(t.clientY-this.mousePosition.y)/n*window.devicePixelRatio;this.nvlInstance.setPan(i-o,a-s),this.callCallbackIfRegistered("onPan",{x:i-o,y:a-s},t),this.mousePosition={x:t.clientX,y:t.clientY}});Rn(this,"handleMouseUp",()=>{this.shouldPan=!1});this.mousePosition={x:0,y:0},this.targets=[],this.shouldPan=!1,this.addEventListener("mousedown",this.handleMouseDown,!0),this.addEventListener("mousemove",this.handleMouseMove,!0),this.addEventListener("mouseup",this.handleMouseUp,!0)}destroy(){this.removeEventListener("mousedown",this.handleMouseDown,!0),this.removeEventListener("mousemove",this.handleMouseMove,!0),this.removeEventListener("mouseup",this.handleMouseUp,!0)}}class qj extends T0{constructor(t,n={}){super(t,n);Rn(this,"throttledZoom",Z2.throttle(t=>{const n=this.nvlInstance.getScale(),{x:i,y:a}=this.nvlInstance.getPan(),o=t.deltaY/500,s=n-o*Math.min(1,n),u=W5(this.containerInstance,t),l=i+(u.x/n-u.x/s),c=a+(u.y/n-u.y/s);this.nvlInstance.setZoomAndPan(s,l,c),this.callCallbackIfRegistered("onZoom",s,t)},25,{leading:!0}));Rn(this,"handleWheel",t=>{t.preventDefault(),this.throttledZoom(t)});Rn(this,"destroy",()=>{this.removeEventListener("wheel",this.handleWheel)});this.addEventListener("wheel",this.handleWheel)}}const ij={name:"NodeCommon",props:{title:{type:String,default:""}},data(){return{isShowMenu:!1,menus:[{label:"10%",value:.1},{label:"50%",value:.5},{label:"100%",value:1},{label:"200%",value:2},{label:"300%",value:3},{label:"400%",value:4},{label:"500%",value:5}]}},mounted(){document.addEventListener("click",this.documentClick)},beforeUnmount(){document.removeEventListener("click",this.documentClick)},methods:{handleMenu(r){this.$emit("change",r)},showMenu(){this.isShowMenu=!this.isShowMenu},documentClick(r){this.isShowMenu&&!this.$el.querySelector(".zoom-select-options").contains(r.target)&&r.target!==this.$el.querySelector(".zoom-select-label")&&(this.isShowMenu=!1)}}},oj={class:"zoom-select"},aj={class:"zoom-select-options"},sj=["onClick"];function uj(r,e,t,n,i,a){return ey(),Jg("div",oj,[td("div",{class:"zoom-select-label",onClick:e[0]||(e[0]=(...o)=>a.showMenu&&a.showMenu(...o))},N1(t.title),1),RC(td("div",aj,[(ey(!0),Jg(kC,null,DC(i.menus,o=>(ey(),Jg("div",{class:"zoom-select-option",key:o.value,onClick:s=>a.handleMenu(o)},N1(o.label),9,sj))),128)),e[2]||(e[2]=td("div",{class:"option-line"},null,-1)),td("div",{class:"zoom-select-option",onClick:e[1]||(e[1]=o=>a.handleMenu({label:"5%",value:5}))},"")],512),[[IC,i.isShowMenu]])])}const lj=Hw(ij,[["render",uj],["__scopeId","data-v-223f6542"]]),cj={class:"custom-control-warpper"},fj={class:"custom-control"},hj={__name:"index",props:{value:{type:Number,default:1}},emits:["change"],setup(r,{emit:e}){const t=e,n=r,i=MC(()=>`${(n.value*100).toFixed(0)}%`),a=({value:l})=>{u(l)},o=()=>{let l=n.value-.1;l<.1&&(l=.1),u(l)},s=()=>{let l=n.value+.1;l>5&&(l=5),u(l)},u=l=>{l=Number(l.toFixed(1)),t("change",l)};return(l,c)=>{const f=UC;return ey(),Jg("div",cj,[td("div",fj,[td("div",{class:"action-btn zoom-btn",onClick:o},[J0(f,{name:"minus",size:"16"})]),J0(lj,{onChange:a,title:i.value},null,8,["title"]),td("div",{class:"action-btn zoom-btn",onClick:s},[J0(f,{name:"plus",size:"16"})])])])}}},Wj=Hw(hj,[["__scopeId","data-v-f2e37dca"]]);/*!
 * better-scroll / nested-scroll
 * (c) 2016-2023 ustbhuangyi
 * Released under the MIT License.
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function SS(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n}function dj(r){console.error("[BScroll warn]: "+r)}var Py=typeof window<"u",t0=Py&&navigator.userAgent.toLowerCase();t0&&t0.indexOf("android")>0;(function(){if(typeof t0=="string"){var r=/os (\d\d?_\d(_\d)?)/,e=r.exec(t0);if(!e)return!1;var t=e[1].split("_").map(function(n){return parseInt(n,10)});return t[0]===13&&t[1]>=4}return!1})();var vj=!1;if(Py){var pj="test-passive";try{var TS={};Object.defineProperty(TS,"passive",{get:function(){vj=!0}}),window.addEventListener(pj,function(){},TS)}catch{}}var gj=function(r,e){for(var t in e)r[t]=e[t];return r};function Yp(r,e){if(r.findIndex)return r.findIndex(e);var t=-1;return r.some(function(n,i,a){var o=e(n,i,a);if(o)return t=i,o}),t}var Q2=Py&&document.createElement("div").style,Jp=function(){if(!Py)return!1;for(var r=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}],e=0,t=r;e<t.length;e++){var n=t[e];if(Q2[n.value]!==void 0)return n.key}return!1}();function Zf(r){return Jp===!1?r:Jp==="standard"?r==="transitionEnd"?"transitionend":r:Jp+r.charAt(0).toUpperCase()+r.substr(1)}Jp&&Jp!=="standard"&&""+Jp.toLowerCase();Zf("transform");Zf("transition");Py&&Zf("perspective")in Q2;Zf("transitionTimingFunction"),Zf("transitionDuration"),Zf("transitionDelay"),Zf("transformOrigin"),Zf("transitionEnd"),Zf("transitionProperty");var yj=function(){function r(e){this.ancestors=[],this.descendants=[],this.hooksManager=[],this.analyzed=!1,this.selfScroll=e}return r.create=function(e){return new r(e)},r.prototype.hasAncestors=function(e){var t=Yp(this.ancestors,function(n){var i=n[0];return i===e});return t>-1},r.prototype.hasDescendants=function(e){var t=Yp(this.descendants,function(n){var i=n[0];return i===e});return t>-1},r.prototype.addAncestor=function(e,t){var n=this.ancestors;n.push([e,t]),n.sort(function(i,a){return i[1]-a[1]})},r.prototype.addDescendant=function(e,t){var n=this.descendants;n.push([e,t]),n.sort(function(i,a){return i[1]-a[1]})},r.prototype.removeAncestor=function(e){var t=this.ancestors;if(t.length){var n=Yp(this.ancestors,function(i){var a=i[0];return a===e});if(n>-1)return t.splice(n,1)}},r.prototype.removeDescendant=function(e){var t=this.descendants;if(t.length){var n=Yp(this.descendants,function(i){var a=i[0];return a===e});if(n>-1)return t.splice(n,1)}},r.prototype.registerHooks=function(e,t,n){e.on(t,n),this.hooksManager.push([e,t,n])},r.prototype.setAnalyzed=function(e){e===void 0&&(e=!1),this.analyzed=e},r.prototype.purge=function(){var e=this;this.ancestors.forEach(function(t){var n=t[0];n.removeDescendant(e)}),this.descendants.forEach(function(t){var n=t[0];n.removeAncestor(e)}),this.hooksManager.forEach(function(t){var n=t[0],i=t[1],a=t[2];n.off(i,a)}),this.hooksManager=[]},r}(),mj="plugins.nestedScroll",bj=[{key:"purgeNestedScroll",name:"purgeNestedScroll"}],_j=bj.map(function(r){return{key:r.key,sourceKey:mj+"."+r.name}}),wj="INTERNAL_NESTED_SCROLL",Ej=function(r){r.forEach(function(e){e.pending&&(e.stop(),e.resetPosition())})},CS=function(r){r.forEach(function(e){e.enable()})},_m=function(r,e){r.forEach(function(t){(t.hasHorizontalScroll===e.hasHorizontalScroll||t.hasVerticalScroll===e.hasVerticalScroll)&&t.disable()})},xj=function(r){r.forEach(function(e){var t=e.scroller,n=t.actions,i=t.scrollBehaviorX,a=t.scrollBehaviorY;n.fingerMoved=!0,n.contentMoved=!1,n.directionLockAction.reset(),i.start(),a.start(),i.resetStartPos(),a.resetStartPos(),n.startTime=+new Date})},Oj=function(r){var e=r.hasHorizontalScroll,t=r.hasVerticalScroll,n=r.x,i=r.y,a=r.minScrollX,o=r.maxScrollX,s=r.minScrollY,u=r.maxScrollY,l=r.movingDirectionX,c=r.movingDirectionY,f=!1,h=n>=a&&l===-1,d=n<=o&&l===1,v=i>=s&&c===-1,y=i<=u&&c===1;return t?f=v||y:e&&(f=h||d),f},Sj=function(r){var e=r.hasHorizontalScroll,t=r.hasVerticalScroll,n=r.x,i=r.y,a=r.minScrollX,o=r.maxScrollX,s=r.minScrollY,u=r.maxScrollY,l=!1,c=n>a,f=n<o,h=i>s,d=i<u;return t?l=h||d:e&&(l=c||f),l},Tj=function(r){r.scroller.reflow(),r.resetPosition(0)},Cj=function(r,e){for(var t=0,n=r.parentNode;n&&n!==e;)t++,n=n.parentNode;return t},Pj=function(){function r(e){var t=this.handleOptions(e),n=r.instancesMap[t];return n||(n=r.instancesMap[t]=this,n.store=[],n.hooksFn=[]),n.init(e),n}return r.getAllNestedScrolls=function(){var e=r.instancesMap;return Object.keys(e).map(function(t){return e[t]})},r.purgeAllNestedScrolls=function(){var e=r.getAllNestedScrolls();e.forEach(function(t){return t.purgeNestedScroll()})},r.prototype.handleOptions=function(e){var t=e.options.nestedScroll===!0?{}:e.options.nestedScroll,n={groupId:wj};this.options=gj(n,t);var i=typeof this.options.groupId;return i!=="string"&&i!=="number"&&dj("groupId must be string or number for NestedScroll plugin"),this.options.groupId},r.prototype.init=function(e){e.proxy(_j),this.addBScroll(e),this.buildBScrollGraph(),this.analyzeBScrollGraph(),this.ensureEventInvokeSequence(),this.handleHooks(e)},r.prototype.handleHooks=function(e){var t=this;this.registerHooks(e.hooks,e.hooks.eventTypes.destroy,function(){t.deleteScroll(e)})},r.prototype.deleteScroll=function(e){var t=e.wrapper;t.isBScrollContainer=void 0;var n=this.store,i=this.hooksFn,a=Yp(n,function(h){return h.selfScroll===e});if(a>-1){var o=n[a];o.purge(),n.splice(a,1)}var s=Yp(i,function(h){var d=h[0];return d===e.hooks});if(s>-1){var u=i[s],l=u[0],c=u[1],f=u[2];l.off(c,f),i.splice(s,1)}},r.prototype.addBScroll=function(e){this.store.push(yj.create(e))},r.prototype.buildBScrollGraph=function(){for(var e=this.store,t,n,i,a,o=this.store.length,s=0;s<o;s++){t=e[s],i=t.selfScroll.wrapper;for(var u=0;u<o;u++)if(n=e[u],a=n.selfScroll.wrapper,t!==n&&i.contains(a)){var l=Cj(a,i);t.hasDescendants(n)||t.addDescendant(n,l),n.hasAncestors(t)||n.addAncestor(t,l)}}},r.prototype.analyzeBScrollGraph=function(){this.store.forEach(function(e){if(!e.analyzed){var t=e.ancestors,n=e.descendants,i=e.selfScroll,a=function(){var u=t.map(function(c){var f=c[0];return f.selfScroll}),l=n.map(function(c){var f=c[0];return f.selfScroll});Ej(SS(u,l)),Sj(i)&&Tj(i),xj(u),_m(u,i)},o=function(){var u=t.map(function(c){var f=c[0];return f.selfScroll}),l=n.map(function(c){var f=c[0];return f.selfScroll});CS(SS(u,l))};e.registerHooks(i,i.eventTypes.beforeScrollStart,a),e.registerHooks(i,i.eventTypes.touchEnd,o);var s=i.scroller.actions.hooks;e.registerHooks(s,s.eventTypes.detectMovingDirection,function(){var u=t.map(function(d){var v=d[0];return v.selfScroll}),l=u[0],c=u.slice(1),f=i.scroller.actions.contentMoved,h=u.length===0;if(f)_m(u,i);else if(!h&&Oj(i))return _m([i],i),l&&CS([l]),_m(c,i),!0}),e.setAnalyzed(!0)}})},r.prototype.ensureEventInvokeSequence=function(){var e=this.store.slice(),t=e.sort(function(n,i){return n.descendants.length-i.descendants.length});t.forEach(function(n){var i=n.selfScroll;i.scroller.actionsHandler.rebindDOMEvents()})},r.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},r.prototype.purgeNestedScroll=function(){var e=this.options.groupId;this.store.forEach(function(t){t.purge()}),this.store=[],this.hooksFn.forEach(function(t){var n=t[0],i=t[1],a=t[2];n.off(i,a)}),this.hooksFn=[],delete r.instancesMap[e]},r.pluginName="nestedScroll",r.instancesMap={},r}();const Aj={class:"scroll-content"},Rj={__name:"cu-scroll",props:{scrollX:{type:Boolean,default:!1},scrollY:{type:Boolean,default:!0},scrollbar:{type:[Boolean,Object],default:null},pullUpLoad:{type:[Boolean,Object],default:!0},groupId:{type:String,default:""}},emits:["onScrollEnd","scroll"],setup(r,{expose:e,emit:t}){Rp.use(zC),Rp.use(GC),Rp.use(qC),Rp.use(VC),Rp.use(Pj);const n=t,i=r,a=LC(null);let o=null;const s=()=>{o.refresh()},u=f=>{let{el:h,time:d,offsetX:v,offsetY:y,easing:w}=f;o.scrollToElement(h,d,v,y,w)},l=()=>{o.enable()},c=()=>{o.disable()};return NC(()=>{let f={scrollX:i.scrollX,scrollY:i.scrollY,scrollbar:i.scrollbar||{},observeDOM:!0,pullUpLoad:i.pullUpLoad,probeType:0,mouseWheel:{speed:20,invert:!1,easeTime:300},preventDefault:!1,bounce:!1,click:!0};i.groupId&&(f.nestedScroll={groupId:i.groupId}),o=new Rp(a.value,f),o.on("pullingUp",()=>{n("onScrollEnd"),jC(()=>{o.finishPullUp()})}),o.on("scroll",h=>{n("scroll",h)})}),BC(()=>{o&&o.destroy()}),e({refresh:s,scrollToElement:u,enable:l,disable:c}),(f,h)=>(ey(),Jg("div",{class:"scroll-wrapper",ref_key:"scroller",ref:a},[td("div",Aj,[FC(f.$slots,"default",{},void 0,!0)])],512))}},Hj=Hw(Rj,[["__scopeId","data-v-feb19931"]]);export{zj as C,Gj as H,Vj as P,Wj as Z,fr as _,qj as a,Hj as b,hr as c,jo as d,Mt as e,Uj as f,Bj as g,ig as h,py as i,$2 as j,Tv as k,vw as l,jj as m,h5 as n,Zl as o,x2 as p,E1 as q,mm as r,T1 as s,t5 as t,Fj as u,iy as v,eh as w,eN as x,jL as y,d5 as z};
