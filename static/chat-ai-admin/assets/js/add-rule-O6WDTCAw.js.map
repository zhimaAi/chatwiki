{"version":3,"file":"add-rule-O6WDTCAw.js","sources":["../../../../front-end/chat-ai-admin-vue/src/assets/img/robot/smart-menu-rule.png","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-config/smart-menu/add-rule.vue"],"sourcesContent":["export default \"__VITE_ASSET__CPvdXQWo__\"","<template>\r\n  <div class=\"subManage-edit\">\r\n    <a-breadcrumb class=\"subManage-breadcrumb\">\r\n      <a-breadcrumb-item><a :href=\"autoReplyUrl\">{{ t('title_smart_menu') }}</a></a-breadcrumb-item>\r\n      <a-breadcrumb-item>{{ t('title_add_rule') }}</a-breadcrumb-item>\r\n    </a-breadcrumb>\r\n\r\n    <div class=\"main\">\r\n      <div class=\"left-pane\">\r\n        <a-form ref=\"formRef\" :model=\"form\" :rules=\"rules\" layout=\"vertical\">\r\n          <a-form-item name=\"menu_title\" :label=\"t('label_menu_name')\" :rules=\"[{ required: true, message: t('msg_input_menu_name') }]\">\r\n            <a-input v-model:value=\"form.menu_title\" :placeholder=\"t('ph_input')\" />\r\n          </a-form-item>\r\n\r\n          <a-form-item name=\"menu_description\" :label=\"t('label_menu_content')\" :rules=\"[{ required: true, message: t('msg_input_menu_content') }]\">\r\n            <div class=\"menu-content-box\">\r\n              <a-textarea ref=\"menuContentRef\" v-model:value=\"form.menu_description\" :rows=\"6\"\r\n                :placeholder=\"t('ph_menu_content')\" />\r\n              <div class=\"insert-row\">\r\n                <span class=\"insert-label\">{{ t('label_insert') }}</span>\r\n                <a-dropdown>\r\n                  <a class=\"insert-btn\" @click.prevent>{{ t('btn_time') }}</a>\r\n                  <template #overlay>\r\n                    <a-menu>\r\n                      <a-menu-item v-for=\"fmt in timeFormats\" :key=\"fmt\">\r\n                        <a-tooltip :title=\"formatNow(fmt)\">\r\n                          <a @click.prevent=\"insertTime(fmt)\">{{ fmt }}</a>\r\n                        </a-tooltip>\r\n                      </a-menu-item>\r\n                    </a-menu>\r\n                  </template>\r\n                </a-dropdown>\r\n                <a-popover v-model:open=\"emojiOpen\" placement=\"bottomLeft\" trigger=\"click\"\r\n                  :getPopupContainer=\"getPopup\">\r\n                  <template #content>\r\n                    <Picker :data=\"emojiIndex\" :emojiSize=\"18\" :showPreview=\"false\" set=\"apple\"\r\n                      @select=\"onEmojiSelect\" />\r\n                  </template>\r\n                  <a class=\"insert-btn\">{{ t('btn_emoji') }}</a>\r\n                </a-popover>\r\n              </div>\r\n            </div>\r\n          </a-form-item>\r\n\r\n          <a-form-item name=\"menu_content\" :label=\"t('label_menu_title')\" :rules=\"[{ validator: validateMenuContent }]\">\r\n            <a-input v-model:value=\"hiddenMenuContent\" style=\"display:none\" />\r\n            <a-form-item-rest>\r\n              <div class=\"title-list\">\r\n                <div class=\"title-row\" v-for=\"(it, idx) in titleItems\" :key=\"it.id\"\r\n                  :class=\"{ 'drag-over': dragOverIndex === idx }\" draggable=\"true\" @dragstart=\"onDragStart(idx)\"\r\n                  @dragover.prevent @dragenter.prevent=\"onDragEnter(idx)\" @dragleave=\"onDragLeave(idx)\"\r\n                  @drop.prevent=\"onDrop(idx)\" @dragend=\"onDragEnd\">\r\n                  <div class=\"title-item\">\r\n                    <div class=\"drag-handle\">\r\n                      <HolderOutlined />\r\n                    </div>\r\n                    <div v-if=\"!it.isPure && !it.linkType\" class=\"index-badge\" v-show=\"!it.editingIndex\"\r\n                      @click=\"startEditOrder(idx)\">\r\n                      {{ it.orderDisplay }}</div>\r\n                    <input v-if=\"!it.isPure && !it.linkType && it.editingIndex\" class=\"index-input-edit\" type=\"number\" min=\"1\" max=\"10\"\r\n                      inputmode=\"numeric\" autofocus v-model=\"it.orderDisplayStr\" @blur=\"endEditOrder(idx)\"\r\n                      @keyup.enter=\"endEditOrder(idx)\" />\r\n                    <div class=\"input-box\" :class=\"{ focused: focusedId === it.id }\">\r\n                      <a-input v-model:value=\"it.text\" :disabled=\"it.isNewline === true\" :placeholder=\"t('ph_menu_title')\"\r\n                        maxLength=\"40\" @focus=\"onFocusTitle(idx, $event)\" @blur=\"onBlurTitle(idx)\">\r\n                        <template #suffix>\r\n                          <a v-if=\"!it.isPure && !it.linkType && (!!(it.replyConfig?.rule_id) || !!it.rule_id || !!it.replyConfig)\" class=\"suffix-action\" @click=\"openReplyModal(idx)\">{{ t('btn_edit') }}</a>\r\n                          <a-tooltip v-else-if=\"!it.isPure && !it.linkType && !keywordReplyStatus\">\r\n                            <template #title>{{ t('tip_need_auto_reply') }}</template>\r\n                            <a class=\"suffix-action disabled\" @click.prevent>{{ t('btn_add_reply') }}</a>\r\n                          </a-tooltip>\r\n                          <a v-else-if=\"!it.isPure && !it.linkType\" class=\"suffix-action\" @click=\"openReplyModal(idx)\">{{ t('btn_add_reply') }}</a>\r\n                        </template>\r\n                      </a-input>\r\n                      <div v-if=\"focusedId === it.id\" class=\"float-toolbar\" @mousedown.stop=\"onToolbarMouseDown\">\r\n                        <a @mousedown.prevent.stop=\"openMiniLinkModal(idx)\">{{ t('btn_insert_mini_link') }}</a>\r\n                        <a @mousedown.prevent.stop=\"openUrlLinkModal(idx)\">{{ t('btn_insert_url_link') }}</a>\r\n                        <a v-if=\"!it.isPure && !it.linkType\" @mousedown.prevent.stop=\"convertToPure(idx)\">{{ t('btn_to_plain_text') }}</a>\r\n                        <a v-if=\"!it.isPure && !it.linkType\" @mousedown.prevent.stop=\"insertNewline(idx)\">{{ t('btn_newline') }}</a>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"row-icons\">\r\n                    <svg-icon @click=\"addTitleAfter(idx)\" name=\"smart-add\" size=\"16\"\r\n                      style=\"color: #8C8C8C; cursor: pointer;\"></svg-icon>\r\n                    <svg-icon @click=\"removeTitle(idx)\" name=\"smart-delete\" size=\"16\"\r\n                      style=\"color: #8C8C8C; cursor: pointer;\"></svg-icon>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </a-form-item-rest>\r\n          </a-form-item>\r\n\r\n          <div class=\"btn-container\">\r\n            <a-button type=\"primary\" @click=\"onSubmit\">{{ t('btn_save') }}</a-button>\r\n          </div>\r\n        </a-form>\r\n      </div>\r\n      <div class=\"right-pane\">\r\n        <img :src=\"smartMenuRuleImgSrc\" alt=\"smart-menu-preview\" class=\"preview-smart-img\" />\r\n      </div>\r\n    </div>\r\n\r\n    <a-modal v-model:open=\"replyModalOpen\" :title=\"`${replyForm.rule_id ? t('title_edit_menu_reply') : t('title_add_menu_reply')}`\" :width=\"720\" @ok=\"onReplyModalOk\"\r\n      @cancel=\"onReplyModalCancel\">\r\n      <a-form :model=\"replyForm\" layout=\"vertical\" class=\"reply-modal-form\">\r\n        <a-form-item :label=\"t('label_rule_name')\" name=\"rule_name\" :rules=\"[{ required: true, message: t('msg_input_rule_name') }]\">\r\n          <a-input v-model:value=\"replyForm.rule_name\" />\r\n        </a-form-item>\r\n        <a-form-item :label=\"t('label_keyword')\" name=\"keyword\" :rules=\"[{ required: true, message: t('msg_input_keyword') }]\">\r\n          <a-input v-model:value=\"replyForm.keyword\" :maxlength=\"30\" :placeholder=\"t('ph_keyword')\" @focus=\"onKeywordFocus\" @pressEnter=\"onKeywordFocus\" @blur=\"onKeywordFocus\">\r\n            <template #addonBefore>\r\n              <a-select v-model:value=\"replyForm.match_type\" style=\"width: 120px\">\r\n                <a-select-option value=\"full\">{{ t('select_full_match') }}</a-select-option>\r\n                <a-select-option value=\"partial\">{{ t('select_partial_match') }}</a-select-option>\r\n              </a-select>\r\n            </template>\r\n          </a-input>\r\n          <div class=\"tip-box\" style=\"margin-top: 4px;\">{{ t('tip_keyword_max_length') }}</div>\r\n        </a-form-item>\r\n\r\n        <a-form-item name=\"replyList\" :label=\"t('label_reply_content')\" :rules=\"[{ required: true, message: '' }]\">\r\n          <div class=\"item-box\">\r\n            <MultiReply v-for=\"(it, idx) in replyForm.replyList\" :key=\"idx\" ref=\"replyRefs\" v-model:value=\"replyForm.replyList[idx]\"\r\n              :reply_index=\"idx\" :show_smart=\"true\" @change=\"onReplyContentChange\" @del=\"onReplyDelItem\" />\r\n            <a-button type=\"dashed\" style=\"width: 100%;\" :disabled=\"replyForm.replyList.length >= 5\"\r\n              @click=\"addReplyContent\">\r\n              <template #icon>\r\n                <PlusOutlined />\r\n              </template>\r\n              {{ t('btn_add_reply_content') }}({{ replyForm.replyList.length }}/5)\r\n            </a-button>\r\n          </div>\r\n        </a-form-item>\r\n      </a-form>\r\n    </a-modal>\r\n\r\n    <a-modal v-model:open=\"miniLinkModalOpen\"  :title=\"t('title_edit_mini_card')\" :width=\"720\" @ok=\"onMiniLinkOk\"\r\n      @cancel=\"onMiniLinkCancel\">\r\n      <a-form :model=\"miniLinkForm\" layout=\"vertical\">\r\n        <a-form-item :label=\"t('label_card_title')\" name=\"title\" :rules=\"[{ required: true, message: t('msg_input_card_title') }]\">\r\n          <a-input v-model:value=\"miniLinkForm.title\" :placeholder=\"t('ph_card_title')\" />\r\n        </a-form-item>\r\n        <a-form-item :label=\"t('label_appid')\" name=\"appid\"\r\n          :rules=\"[{ required: true, message: t('msg_input_appid') }, { validator: appidValidator }]\">\r\n          <a-input v-model:value=\"miniLinkForm.appid\" :placeholder=\"t('ph_appid')\" />\r\n          <div class=\"tips-box\">\r\n            <div>{{ t('tip_appid_1') }}<a @click=\"openDocs('appid')\">{{ t('btn_find_appid') }}</a></div>\r\n            <div>{{ t('tip_appid_2') }}<a @click=\"openDocs('assoc')\">{{ t('btn_view_assoc') }}</a></div>\r\n          </div>\r\n        </a-form-item>\r\n        <a-form-item :label=\"t('label_mini_path')\" name=\"path\" :rules=\"[{ required: true, message: t('msg_input_mini_path') }]\">\r\n          <a-input v-model:value=\"miniLinkForm.path\" :placeholder=\"t('ph_mini_path')\" />\r\n          <div class=\"tips-box\">\r\n            <div>{{ t('tip_mini_path') }}</div>\r\n          </div>\r\n        </a-form-item>\r\n      </a-form>\r\n    </a-modal>\r\n\r\n    <a-modal v-model:open=\"urlLinkModalOpen\" :title=\"t('title_edit_link')\" :width=\"720\" @ok=\"onUrlLinkOk\" @cancel=\"onUrlLinkCancel\">\r\n      <a-form :model=\"urlLinkForm\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\">\r\n        <a-form-item :label=\"t('label_title')\" name=\"title\" :rules=\"[{ required: true, message: t('msg_input_title') }]\">\r\n          <a-input v-model:value=\"urlLinkForm.title\" :placeholder=\"t('ph_title')\" />\r\n        </a-form-item>\r\n        <a-form-item :label=\"t('label_open_link')\" name=\"url\"\r\n          :rules=\"[{ required: true, message: t('msg_input_open_link') }, { validator: urlHttpValidator }]\">\r\n          <a-input v-model:value=\"urlLinkForm.url\" :placeholder=\"t('ph_open_link')\" />\r\n        </a-form-item>\r\n      </a-form>\r\n    </a-modal>\r\n  </div>\r\n</template>\r\n<script setup>\r\nimport { PlusOutlined, HolderOutlined } from '@ant-design/icons-vue'\r\nimport { onMounted, ref, reactive, computed, watch, nextTick } from 'vue'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport { message } from 'ant-design-vue'\r\nimport MultiReply from '@/components/replay-card/multi-reply.vue'\r\nimport { getSmartMenu, saveSmartMenu, checkKeyWordRepeat, saveRobotKeywordReply, getRobotKeywordReply } from '@/api/explore/index.js'\r\nimport dayjs from 'dayjs'\r\nimport emojiDataJson from 'emoji-mart-vue-fast/data/all.json'\r\nimport { Picker, EmojiIndex } from 'emoji-mart-vue-fast/src'\r\nimport smartMenuRuleImgSrc from '@/assets/img/robot/smart-menu-rule.png'\r\nimport { useRobotStore } from '@/stores/modules/robot'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.robot.robot-config.smart-menu.add-rule')\r\nconst labelCol = { span: 3 }\r\nconst wrapperCol = { span: 21 }\r\nconst query = useRoute().query\r\nconst ruleId = ref(+query.rule_id || +query['rule-id'] || 0)\r\nconst router = useRouter()\r\nconst autoReplyUrl = computed(() => `/#/robot/ability/smart-menu?id=${query.id}&robot_key=${query.robot_key}`)\r\nconst robotStore = useRobotStore()\r\nconst keywordReplyStatus = computed(() => robotStore.keywordReplySwitchStatus === '1')\r\nconst formRef = ref(null)\r\nconst form = reactive({\r\n  menu_title: '',\r\n  menu_description: '',\r\n})\r\nconst rules = {}\r\nconst replyRefs = ref([])\r\nconst emojiIndex = new EmojiIndex(emojiDataJson)\r\nconst emojiOpen = ref(false)\r\nconst menuContentRef = ref(null)\r\nconst MAX_TITLES = 10\r\nconst timeFormats = [\r\n  'yyyy-MM-dd hh:mm:ss',\r\n  'MM-dd hh:mm:ss',\r\n  'yyyy-MM-dd hh:mm',\r\n  'MM-dd hh:mm',\r\n  'yyyy-MM-dd',\r\n  'MM月dd日'\r\n]\r\nfunction formatNow (fmt) {\r\n  const map = {\r\n    'yyyy-MM-dd hh:mm:ss': 'YYYY-MM-DD HH:mm:ss',\r\n    'MM-dd hh:mm:ss': 'MM-DD HH:mm:ss',\r\n    'yyyy-MM-dd hh:mm': 'YYYY-MM-DD HH:mm',\r\n    'MM-dd hh:mm': 'MM-DD HH:mm',\r\n    'yyyy-MM-dd': 'YYYY-MM-DD',\r\n    'MM月dd日': 'MM月DD日'\r\n  }\r\n  return dayjs().format(map[fmt] || 'YYYY-MM-DD HH:mm:ss')\r\n}\r\nfunction insertAtCaretInMenuContent (text) {\r\n  const el = menuContentRef.value?.$el?.querySelector('textarea')\r\n  if (el && typeof el.selectionStart === 'number') {\r\n    const start = el.selectionStart\r\n    const end = el.selectionEnd\r\n    const val = form.menu_description || ''\r\n    form.menu_description = val.slice(0, start) + text + val.slice(end)\r\n    nextTick(() => {\r\n      el.focus()\r\n      const pos = Math.min(start + text.length, (form.menu_description || '').length)\r\n      el.setSelectionRange(pos, pos)\r\n    })\r\n  } else {\r\n    form.menu_description = (form.menu_description || '') + text\r\n  }\r\n}\r\nfunction insertTime (fmt) {\r\n  insertAtCaretInMenuContent(`{{${fmt}}}`)\r\n}\r\nfunction onEmojiSelect (emoji) {\r\n  const char = emoji?.native || '';\r\n  if (!char) return;\r\n  insertAtCaretInMenuContent(char);\r\n  emojiOpen.value = false\r\n}\r\nfunction getPopup () {\r\n  return document.body\r\n}\r\n\r\nfunction urlHttpValidator (_rule, value) {\r\n  if (!value) return Promise.resolve()\r\n  return /^https?:\\/\\//.test(String(value)) ? Promise.resolve() : Promise.reject(t('msg_link_http_error'))\r\n}\r\n\r\nfunction appidValidator (_rule, value) {\r\n  if (!value) return Promise.resolve()\r\n  return /^wx/.test(String(value)) ? Promise.resolve() : Promise.reject(t('msg_appid_error'))\r\n}\r\n\r\nfunction onKeywordFocus () {\r\n  const kw = String(replyForm.keyword || '').trim()\r\n  if (!kw) return\r\n  checkKeyWordRepeat({ id: replyForm.rule_id || 0, robot_id: query.id, keyword: kw })\r\n    .then((res) => {\r\n      const repeat = res?.data?.is_repeat\r\n      const ruleName = res?.data?.rule_name || ''\r\n      if (repeat) message.error(t('msg_keyword_repeat', { ruleName }))\r\n    })\r\n}\r\n\r\nfunction serializeReplyContent (list) { return (list || []).map((it) => ({ ...it, status: '1' })) }\r\nfunction serializeReplyTypeCodes (list) { const map = { text: '2', image: '4', card: '3', imageText: '1', url: '5', smartMenu: '6' }; return (list || []).map((it) => map[it.type] || '').filter(Boolean) }\r\n\r\nfunction validateMenuContent (_rule, _value) {\r\n  const ok = Array.isArray(titleItems.value) && titleItems.value.length > 0\r\n  return ok ? Promise.resolve() : Promise.reject(t('msg_add_menu_title'))\r\n}\r\n\r\nconst titleItems = ref([\r\n  {\r\n    id: Date.now(),\r\n    text: '',\r\n    isPure: false,\r\n    orderDisplay: 1,\r\n    replyConfig: null,\r\n    editingIndex: false,\r\n    orderDisplayStr: ''\r\n  }\r\n])\r\nconst hiddenMenuContent = ref('')\r\nconst focusedId = ref(null)\r\nconst toolbarInteracting = ref(false)\r\nlet draggingIndex = -1\r\nconst dragOverIndex = ref(-1)\r\nfunction onDragStart (idx) { draggingIndex = idx }\r\nfunction onDragEnter (idx) {\r\n  if (draggingIndex === -1 || draggingIndex === idx) {\r\n    dragOverIndex.value = idx; return\r\n  }\r\n  const list = [...titleItems.value]\r\n  const [moved] = list.splice(draggingIndex, 1)\r\n  list.splice(idx, 0, moved)\r\n  titleItems.value = list\r\n  draggingIndex = idx\r\n  dragOverIndex.value = idx\r\n}\r\nfunction onDragLeave (idx) {\r\n  if (dragOverIndex.value === idx) dragOverIndex.value = -1\r\n}\r\nfunction onDrop (idx) {\r\n  if (draggingIndex === idx || draggingIndex < 0) return\r\n  const list = [...titleItems.value]\r\n  const [moved] = list.splice(draggingIndex, 1)\r\n  list.splice(idx, 0, moved)\r\n  titleItems.value = list\r\n  draggingIndex = -1\r\n  dragOverIndex.value = -1\r\n}\r\nfunction onDragEnd () {\r\n  draggingIndex = -1;\r\n  dragOverIndex.value = -1\r\n}\r\nfunction onFocusTitle (idx) {\r\n  const it = titleItems.value[idx];\r\n  focusedId.value = it?.id ?? null\r\n}\r\nfunction onBlurTitle (idx) {\r\n  const it = titleItems.value[idx]\r\n  setTimeout(() => {\r\n    if (toolbarInteracting.value) {\r\n      toolbarInteracting.value = false; return\r\n    }\r\n    if ((focusedId.value ?? null) === (it?.id ?? null)) focusedId.value = null\r\n  }, 0)\r\n}\r\nfunction onToolbarMouseDown () {\r\n  toolbarInteracting.value = true\r\n}\r\nfunction insertNewline (idx) {\r\n  const it = titleItems.value[idx]\r\n  it.text = t('text_newline')\r\n  it.isPure = true\r\n  it.isNewline = true\r\n  it.replyConfig = null\r\n  focusedId.value = null\r\n}\r\nfunction convertToPure (idx) {\r\n  const it = titleItems.value[idx];\r\n  it.isPure = true; it.replyConfig = null\r\n}\r\nfunction addTitleAfter (idx) {\r\n  const count = titleItems.value.length\r\n  if (count >= MAX_TITLES) { message.warning(t('msg_menu_title_max')); return }\r\n  const nextOrder = count + 1\r\n  titleItems.value.splice(idx + 1, 0, { id: Date.now() + Math.random(), text: '', isPure: false, orderDisplay: nextOrder, replyConfig: null, editingIndex: false, orderDisplayStr: '' })\r\n}\r\nfunction removeTitle (idx) {\r\n  if (titleItems.value.length <= 1) { message.warning(t('msg_menu_title_min')); return }\r\n  titleItems.value.splice(idx, 1)\r\n}\r\nfunction startEditOrder (idx) {\r\n  const it = titleItems.value[idx];\r\n  it.orderDisplayStr = String(it.orderDisplay || '');\r\n  it.editingIndex = true;\r\n  nextTick(() => {\r\n\r\n  })\r\n}\r\nfunction endEditOrder (idx) {\r\n  const it = titleItems.value[idx];\r\n  const n = parseInt(String(it.orderDisplayStr || '').replace(/\\D+/g, ''), 10);\r\n  it.orderDisplay = isNaN(n) ? it.orderDisplay : Math.max(1, Math.min(10, n));\r\n  it.editingIndex = false\r\n}\r\n\r\nwatch(titleItems, (list) => {\r\n  try {\r\n    const payload = (list || []).map((it) => ({ menu_type: it.isPure ? '0' : '1', content: String(it.text || '') }))\r\n    hiddenMenuContent.value = JSON.stringify(payload)\r\n  } catch (_) {\r\n    hiddenMenuContent.value = String((list || []).length || '')\r\n  }\r\n}, { deep: true, immediate: true })\r\n\r\nconst replyModalOpen = ref(false)\r\nconst replyForm = reactive({\r\n  rule_name: '',\r\n  match_type: 'full',\r\n  keyword: '',\r\n  replyList: [\r\n    {\r\n      type: 'text', description: ''\r\n    }\r\n  ]\r\n})\r\nlet editingTitleIndex = -1\r\nfunction openReplyModal (idx) {\r\n  if (!titleItems.value[idx].text) { message.error(t('msg_input_menu_title')); return }\r\n  editingTitleIndex = idx\r\n  const it = titleItems.value[idx]\r\n  replyForm.rule_name = it.replyConfig?.rule_name || String(it.text || '')\r\n  replyForm.keyword = it.replyConfig?.keyword || String(it.text || '')\r\n  replyForm.match_type = it.replyConfig?.match_type || 'full'\r\n  replyForm.replyList = Array.isArray(it.replyConfig?.replyList) ? JSON.parse(JSON.stringify(it.replyConfig.replyList)) : [{ type: 'text', description: '' }]\r\n  replyForm.rule_id = it.replyConfig?.rule_id || it.rule_id || ''\r\n  if (replyForm.rule_id) {\r\n    getRobotKeywordReply({ id: replyForm.rule_id })\r\n      .then((res) => {\r\n        const data = res?.data || {}\r\n        replyForm.rule_name = data?.name || replyForm.rule_name\r\n        const fk = Array.isArray(data?.full_keyword) ? data.full_keyword : []\r\n        const hk = Array.isArray(data?.half_keyword) ? data.half_keyword : []\r\n        if (fk.length > 0) {\r\n          replyForm.match_type = 'full'\r\n          replyForm.keyword = String(fk[0] || '')\r\n        } else if (hk.length > 0) {\r\n          replyForm.match_type = 'partial'\r\n          replyForm.keyword = String(hk[0] || '')\r\n        }\r\n        const list = Array.isArray(data?.reply_content) ? data.reply_content : []\r\n        replyForm.replyList = list.map((rc) => ({\r\n          type: (rc?.type || rc?.reply_type || 'text'),\r\n          description: rc?.description || '',\r\n          thumb_url: rc?.thumb_url || rc?.pic || '',\r\n          title: rc?.title || '',\r\n          url: rc?.url || '',\r\n          appid: rc?.appid || '',\r\n          page_path: rc?.page_path || '',\r\n          smart_menu_id: rc?.smart_menu_id || '',\r\n          smart_menu: rc?.smart_menu || {},\r\n        }))\r\n      })\r\n      .catch(() => {})\r\n  }\r\n  replyModalOpen.value = true\r\n}\r\nasync function onReplyModalOk () {\r\n  if (editingTitleIndex < 0) { replyModalOpen.value = false; return }\r\n  const name = String(replyForm.rule_name || '').trim()\r\n  const kw = String(replyForm.keyword || '').trim()\r\n  if (!name || !kw) { message.warning(t('msg_complete_rule_keyword')); return }\r\n  if (!Array.isArray(replyForm.replyList) || replyForm.replyList.length === 0) { message.warning(t('msg_add_reply_item')); return }\r\n  for (const comp of replyRefs.value) {\r\n    if (comp && comp.validate) {\r\n      const ok = await comp.validate()\r\n      if (!ok) { return }\r\n    }\r\n  }\r\n  checkKeyWordRepeat({ id: replyForm.rule_id || 0, robot_id: query.id, keyword: kw })\r\n    .then((res) => {\r\n      const repeat = res?.data?.is_repeat\r\n      const ruleName = res?.data?.rule_name || ''\r\n      if (repeat) { message.error(t('msg_keyword_repeat', { ruleName })); return Promise.reject('repeat') }\r\n      const payload = {\r\n        robot_id: query.id,\r\n        name,\r\n        full_keyword: replyForm.match_type === 'full' ? [kw] : [],\r\n        half_keyword: replyForm.match_type === 'partial' ? [kw] : [],\r\n        reply_content: JSON.stringify(serializeReplyContent(replyForm.replyList)),\r\n        reply_type: serializeReplyTypeCodes(replyForm.replyList),\r\n        reply_num: '0',\r\n        forced_enable: 1\r\n      }\r\n      if (replyForm.rule_id) payload.id = replyForm.rule_id\r\n      return saveRobotKeywordReply(payload)\r\n    })\r\n    .then((res) => {\r\n      if (!(res && res.res == 0)) { message.error(t('msg_save_failed')); return }\r\n      const newId = (res?.data?.id) || ''\r\n      const cfg = {\r\n        rule_name: replyForm.rule_name,\r\n        keyword: replyForm.keyword,\r\n        match_type: replyForm.match_type,\r\n        replyList: JSON.parse(JSON.stringify(replyForm.replyList)),\r\n        rule_id: String(newId || replyForm.rule_id || '')\r\n      }\r\n      titleItems.value[editingTitleIndex].replyConfig = cfg\r\n      replyForm.rule_id = cfg.rule_id\r\n      replyModalOpen.value = false\r\n      message.success(t('msg_save_success'))\r\n    })\r\n    .catch((e) => { if (e !== 'repeat') { /* ignore */ } })\r\n}\r\nfunction onReplyModalCancel () { replyModalOpen.value = false }\r\nfunction addReplyContent () {\r\n  if (replyForm.replyList.length >= 5) return;\r\n  replyForm.replyList.push({ type: 'text', description: '' })\r\n}\r\nfunction onReplyDelItem (idx) { replyForm.replyList.splice(idx, 1) }\r\nfunction onReplyContentChange ({ reply_index, ...rest }) {\r\n  if (reply_index >= 0 && reply_index < replyForm.replyList.length) replyForm.replyList[reply_index] = rest\r\n}\r\n\r\nconst miniLinkModalOpen = ref(false)\r\nconst miniLinkForm = reactive({ title: '', appid: '', path: '' })\r\nconst urlLinkModalOpen = ref(false)\r\nconst urlLinkForm = reactive({ title: '', url: '' })\r\nfunction openDocs (t) {\r\n  if (t === 'appid') {\r\n    window.open('https://www.kancloud.cn/wikizhima/wikixkf/1011121', '_blank')\r\n  } else {\r\n    window.open('https://www.kancloud.cn/wikizhima/wikixkf/1010959', '_blank')\r\n  }\r\n}\r\nfunction openMiniLinkModal (idx) {\r\n  editingTitleIndex = idx;\r\n  const it = titleItems.value[idx];\r\n  const raw = String(it.text || '');\r\n  let title = raw;\r\n  let appid = '';\r\n  let path = '';\r\n  if (/<a[\\s\\S]*?<\\/a>/i.test(raw)) {\r\n    const inner = raw.match(/<a[\\s\\S]*?>([\\s\\S]*?)<\\/a>/i)\r\n    const am = raw.match(/data-miniprogram-appid=['\"][\\s\\S]*?['\"]/i)\r\n    const pm = raw.match(/data-miniprogram-path=['\"][\\s\\S]*?['\"]/i)\r\n    if (inner && inner[1] != null) title = inner[1]\r\n    if (am) {\r\n      const m = String(am[0] || '').match(/data-miniprogram-appid=['\"]\\s*([^'\"]+)\\s*['\"]/i)\r\n      if (m && m[1] != null) appid = m[1]\r\n    }\r\n    if (pm) {\r\n      const m = String(pm[0] || '').match(/data-miniprogram-path=['\"]\\s*([^'\"]+)\\s*['\"]/i)\r\n      if (m && m[1] != null) path = m[1]\r\n    }\r\n  }\r\n  miniLinkForm.title = String(title || '')\r\n  miniLinkForm.appid = String(appid || '')\r\n  miniLinkForm.path = String(path || '')\r\n  miniLinkModalOpen.value = true\r\n}\r\nfunction onMiniLinkOk () {\r\n  const t = String(miniLinkForm.title || '').trim()\r\n  const a = String(miniLinkForm.appid || '').trim()\r\n  const p = String(miniLinkForm.path || '').trim()\r\n  if (!t || !a || !p) {\r\n    message.warning(t('msg_complete_mini_card')); return\r\n  }\r\n  if (!/^wx/.test(a)) {\r\n    message.warning(t('msg_appid_error')); return\r\n  }\r\n  if (editingTitleIndex < 0) {\r\n    miniLinkModalOpen.value = false; return\r\n  }\r\n  const it = titleItems.value[editingTitleIndex]\r\n  it.text = `<a  href='#' data-miniprogram-path='${p}' data-miniprogram-appid='${a}'  >${t}</a>`\r\n  it.linkType = 'mini'\r\n  it.replyConfig = null\r\n  miniLinkModalOpen.value = false\r\n}\r\nfunction onMiniLinkCancel () {\r\n  miniLinkModalOpen.value = false\r\n}\r\nfunction openUrlLinkModal (idx) {\r\n  editingTitleIndex = idx;\r\n  const it = titleItems.value[idx];\r\n  const raw = String(it.text || '')\r\n  let title = raw\r\n  let url = ''\r\n  if (/<a[\\s\\S]*?<\\/a>/i.test(raw)) {\r\n    const inner = raw.match(/<a[\\s\\S]*?>([\\s\\S]*?)<\\/a>/i)\r\n    const hm = raw.match(/href\\s*=\\s*['\"][\\s\\S]*?['\"]/i)\r\n    if (inner && inner[1] != null) title = inner[1]\r\n    if (hm) {\r\n      const m = String(hm[0] || '').match(/href\\s*=\\s*['\"]\\s*([^'\"]+)\\s*['\"]/i)\r\n      if (m && m[1] != null) url = m[1]\r\n    }\r\n    if (url) url = url.replace(/`/g, '').trim()\r\n  }\r\n  urlLinkForm.title = String(title || '')\r\n  urlLinkForm.url = String(url || '')\r\n  urlLinkModalOpen.value = true\r\n}\r\nfunction onUrlLinkOk () {\r\n  const t = String(urlLinkForm.title || '').trim()\r\n  const u = String(urlLinkForm.url || '').trim()\r\n  if (!t || !u) { message.warning(t('msg_complete_link')); return }\r\n  if (!/^https?:\\/\\//.test(u)) { message.warning(t('msg_link_http_error')); return }\r\n  if (editingTitleIndex < 0) { urlLinkModalOpen.value = false; return }\r\n  const it = titleItems.value[editingTitleIndex]\r\n  it.text = `<a href=\"${u}\">${t}</a>`\r\n  it.linkType = 'url'\r\n  it.replyConfig = null\r\n  urlLinkModalOpen.value = false\r\n}\r\nfunction onUrlLinkCancel () {\r\n  urlLinkModalOpen.value = false\r\n}\r\n\r\nwatch(() => form.duration_type, (val) => {\r\n  if (val === 'week') {\r\n    if (!Array.isArray(form.week_day) || form.week_day.length === 0) {\r\n      form.week_day = ['1']\r\n    }\r\n    form.week_duration = Array.isArray(form.week_day) ? form.week_day : [form.week_day]\r\n  } else if (val === 'time_range') {\r\n    if (Array.isArray(form.date_range) && form.date_range.length === 2 && form.date_range[0] && form.date_range[1]) {\r\n      form.start_day = dayjs(form.date_range[0]).format('YYYY-MM-DD')\r\n      form.end_day = dayjs(form.date_range[1]).format('YYYY-MM-DD')\r\n    } else {\r\n      form.start_day = ''\r\n      form.end_day = ''\r\n    }\r\n  } else {\r\n    form.start_day = ''\r\n    form.end_day = ''\r\n  }\r\n})\r\n\r\nwatch(() => form.week_day, (v) => {\r\n  if (form.duration_type === 'week') {\r\n    form.week_duration = Array.isArray(v) ? v : [v]\r\n  }\r\n})\r\n\r\nwatch(() => form.date_range, (v) => {\r\n  if (form.duration_type === 'time_range' && Array.isArray(v) && v.length === 2 && v[0] && v[1]) {\r\n    form.start_day = dayjs(v[0]).format('YYYY-MM-DD')\r\n    form.end_day = dayjs(v[1]).format('YYYY-MM-DD')\r\n  }\r\n})\r\n\r\nconst onSubmit = () => {\r\n  formRef.value?.validate().then(async () => {\r\n    if (!form.menu_title || !form.menu_description) { message.warning(t('msg_complete_menu_content')); return }\r\n    const menu_content = titleItems.value.map((it) => {\r\n      const hasLink = !!it.linkType\r\n      const isPure = !!it.isPure\r\n      const isNewline = it.isNewline === true\r\n      const text = String(it.text || '')\r\n      if (isNewline || text === '') { return { menu_type: '0', serial_no: '', content: '', rule_id: '' } }\r\n      if (hasLink) { return { menu_type: '0', serial_no: '', content: text, rule_id: '' } }\r\n      if (isPure) { return { menu_type: '0', serial_no: '', content: text, rule_id: '' } }\r\n      const rid = String(it.replyConfig?.id || it.replyConfig?.rule_id || '')\r\n      const sno = String(it.orderDisplay || '')\r\n      return { menu_type: '1', serial_no: sno, content: text, rule_id: rid }\r\n    })\r\n    const payload = {\r\n      robot_id: query.id,\r\n      menu_title: form.menu_title,\r\n      menu_description: form.menu_description,\r\n      menu_content: JSON.stringify(menu_content)\r\n    }\r\n    if (ruleId.value) payload.id = ruleId.value\r\n    try {\r\n      const res = await saveSmartMenu(payload)\r\n      if (res && res.res == 0) {\r\n        message.success(t('msg_save_success'))\r\n        router.push({ path: '/robot/ability/smart-menu', query: { id: query.id, robot_key: query.robot_key } })\r\n      }\r\n    } catch (e) {\r\n      message.error(t('msg_save_failed'))\r\n    }\r\n  })\r\n}\r\n\r\nonMounted(async () => {\r\n  const copyId = +(query.copy_id || 0)\r\n  const fetchOne = async (rid) => {\r\n    const res = await getSmartMenu({ id: rid, robot_id: query.id })\r\n    const data = res?.data || {}\r\n    form.menu_title = data.menu_title || ''\r\n    form.menu_description = data.menu_description || data.menu_content || ''\r\n    if (Array.isArray(data.menu_content)) {\r\n      const arr = data.menu_content\r\n      titleItems.value = arr.map((mc, i) => {\r\n        const t = String(mc?.menu_type || '')\r\n        const txt = String(mc?.content || '')\r\n        const isAnchor = /<a[\\s\\S]*?<\\/a>/.test(txt)\r\n        const isMini = isAnchor && /data-miniprogram-appid/i.test(txt)\r\n        return {\r\n          id: Date.now() + i,\r\n          text: (t === '0' && txt === '') ? t('text_newline') : txt,\r\n          isPure: t === '0',\r\n          isNewline: (t === '0' && txt === ''),\r\n          orderDisplay: ((mc && mc.serial_no !== undefined && String(mc.serial_no).trim() !== '') ? Number(mc.serial_no) : (i + 1)),\r\n          editingIndex: false,\r\n          orderDisplayStr: '',\r\n          replyConfig: null,\r\n          linkType: isAnchor ? (isMini ? 'mini' : 'url') : '',\r\n          rule_id: String(mc?.rule_id || '')\r\n        }\r\n      })\r\n\r\n      const needLoad = titleItems.value\r\n        .map((it, idx) => ({ idx, rid: String(it.rule_id || '') }))\r\n        .filter((x) => !!x.rid)\r\n      for (const item of needLoad) {\r\n        try {\r\n          const resOne = await getRobotKeywordReply({ id: item.rid })\r\n          const dataOne = resOne?.data || {}\r\n          const list = Array.isArray(dataOne?.reply_content) ? dataOne.reply_content : []\r\n          titleItems.value[item.idx].replyConfig = {\r\n            rule_name: dataOne?.name || String(titleItems.value[item.idx].text || ''),\r\n            keyword: String(titleItems.value[item.idx].text || ''),\r\n            match_type: 'full',\r\n            replyList: list.map((rc) => ({\r\n              type: (rc?.type || rc?.reply_type || 'text'),\r\n              description: rc?.description || '',\r\n              thumb_url: rc?.thumb_url || rc?.pic || '',\r\n              title: rc?.title || '',\r\n              url: rc?.url || '',\r\n              appid: rc?.appid || '',\r\n              page_path: rc?.page_path || '',\r\n              smart_menu_id: rc?.smart_menu_id || '',\r\n              smart_menu: rc?.smart_menu || {},\r\n            })),\r\n            rule_id: item.rid\r\n          }\r\n        } catch (_) {}\r\n      }\r\n    }\r\n  }\r\n  try {\r\n    if (!ruleId.value && copyId) { await fetchOne(copyId); return }\r\n    if (!ruleId.value) return\r\n    await fetchOne(ruleId.value)\r\n  } catch (e) { message.error(t('msg_load_failed')) }\r\n})\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.subManage-edit {\r\n  padding: 16px 24px;\r\n  width: 100%;\r\n  height: 100%;\r\n  border-bottom: 1px solid #fff;\r\n  border-right: 1px solid #fff;\r\n  background-color: #fff;\r\n  overflow-x: hidden;\r\n  overflow-y: auto;\r\n\r\n  .subManage-breadcrumb {\r\n    display: flex;\r\n    align-items: center;\r\n    color: #000000;\r\n    font-family: \"PingFang SC\";\r\n    font-size: 14px;\r\n    font-style: normal;\r\n    line-height: 22px;\r\n    padding-bottom: 16px;\r\n  }\r\n\r\n  .main {\r\n    padding: 0 8px;\r\n    border-radius: 6px;\r\n    background-color: white;\r\n    padding-bottom: 24px;\r\n    display: flex;\r\n    align-items: flex-start;\r\n    justify-content: space-between;\r\n\r\n    .title {\r\n      border-radius: 6px;\r\n      padding: 12px 0 12px 24px;\r\n      align-items: flex-start;\r\n      border-bottom: 1px solid var(--07, #F0F0F0);\r\n      background: #FFF;\r\n      display: flex;\r\n      align-items: center;\r\n      color: #262626;\r\n      font-family: \"PingFang SC\";\r\n      font-size: 14px;\r\n      font-style: normal;\r\n      font-weight: 600;\r\n      line-height: 22px;\r\n      gap: 8px;\r\n      margin-bottom: 24px;\r\n    }\r\n  }\r\n\r\n  .left-pane {\r\n    width: 650px;\r\n  }\r\n\r\n  .right-pane {\r\n    width: 240px;\r\n    display: flex;\r\n    justify-content: center;\r\n  }\r\n\r\n  .preview-smart-img {\r\n    width: 240px;\r\n    height: 520px;\r\n    object-fit: contain;\r\n    border-radius: 6px;\r\n  }\r\n\r\n  .left-pane ::v-deep(.ant-form-item) {\r\n    margin-bottom: 16px;\r\n  }\r\n\r\n  .mr-8 {\r\n    margin-right: 8px;\r\n  }\r\n\r\n  .mr16 {\r\n    margin-right: 16px;\r\n  }\r\n\r\n  .nav-box {\r\n    color: #262626;\r\n    font-size: 14px;\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    line-height: 22px;\r\n    margin-bottom: 4px;\r\n  }\r\n\r\n  .flex {\r\n    display: flex;\r\n  }\r\n\r\n  .btn-container {\r\n    position: fixed;\r\n    bottom: 0;\r\n    right: 16px;\r\n    display: flex;\r\n    width: calc(100% - 270px);\r\n    padding: 16px 1055px 16px 32px;\r\n    align-items: center;\r\n    border-radius: 0 0 2px 2px;\r\n    background: #FFF;\r\n    box-shadow: 0 -8px 4px 0 #0000000a;\r\n  }\r\n\r\n  .flex-center {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n\r\n  .ml4 {\r\n    margin-left: 4px;\r\n  }\r\n\r\n  .tip-box {\r\n    color: #8c8c8c;\r\n    font-size: 14px;\r\n    font-style: normal;\r\n    font-weight: 400;\r\n    line-height: 22px;\r\n    white-space: wrap;\r\n    max-width: 624px;\r\n  }\r\n}\r\n/* 移除全局 ::v-deep(.ant-form-item-label) 以避免影响子组件（例如 MultiReply） */\r\n\r\n.interval-item ::v-deep(.ant-form-item-label) {\r\n  width: 130px;\r\n  min-width: 130px;\r\n  flex: 0 0 130px;\r\n}\r\n\r\n.message-type-item {\r\n  margin-bottom: 0;\r\n}\r\n\r\n/* 避免影响 MultiReply 内部表单项的间距 */\r\n\r\n.menu-content-box {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 4px;\r\n  padding: 16px;\r\n  background: #F2F4F7;\r\n  border-radius: 6px;\r\n}\r\n\r\n.menu-content-box ::v-deep(.ant-input) {\r\n  background: #fff;\r\n  border-color: #D9D9D9;\r\n  border-radius: 6px;\r\n}\r\n\r\n.menu-content-box ::v-deep(.ant-input:focus),\r\n.menu-content-box ::v-deep(.ant-input-focused) {\r\n  border-color: #2475FC;\r\n  box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.1);\r\n}\r\n\r\n.insert-row {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n}\r\n\r\n.insert-label {\r\n  color: #262626;\r\n}\r\n\r\n.insert-btn {\r\n  color: #595959;\r\n  border: 1px solid #D9D9D9;\r\n  background: #fff;\r\n  border-radius: 6px;\r\n  padding: 2px 10px;\r\n  display: inline-block;\r\n}\r\n\r\n.insert-btn:hover {\r\n  border-color: #C9CED6;\r\n  background: #fff;\r\n}\r\n\r\n.title-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n}\r\n\r\n.title-row {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.title-item {\r\n  box-sizing: border-box;\r\n  height: 30px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  padding: 4px;\r\n  border: 1px solid #d9d9d9;\r\n  border-radius: 6px;\r\n  background: #fff;\r\n  flex: 1;\r\n}\r\n\r\n.title-row.drag-over .title-item {\r\n  border-color: #2475FC;\r\n  background: rgba(24, 144, 255, 0.04);\r\n}\r\n\r\n.drag-handle {\r\n  color: #8c8c8c;\r\n  cursor: grab;\r\n}\r\n\r\n.index-input {\r\n  width: 60px;\r\n}\r\n\r\n.index-badge {\r\n  width: 20px;\r\n  height: 18px;\r\n  border-radius: 6px;\r\n  background: #D8DDE5;\r\n  color: #242933;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 12px;\r\n  cursor: pointer;\r\n}\r\n\r\n.index-input-edit {\r\n  width: 20px;\r\n  height: 18px;\r\n  border-radius: 6px;\r\n  background: #D8DDE5;\r\n  border: none;\r\n  text-align: center;\r\n  font-size: 12px;\r\n  outline: none;\r\n  padding: 0;\r\n}\r\n\r\n.input-box {\r\n  position: relative;\r\n  flex: 1;\r\n}\r\n\r\n.float-toolbar {\r\n  position: absolute;\r\n  top: -34px;\r\n  left: 0;\r\n  display: flex;\r\n  gap: 12px;\r\n  background: #fff;\r\n  border: 1px solid #F0F0F0;\r\n  border-radius: 6px;\r\n  padding: 4px 8px;\r\n}\r\n\r\n.suffix-action {\r\n  color: #2475FC;\r\n}\r\n.suffix-action.disabled {\r\n  color: #bfbfbf;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.actions {\r\n  width: 80px;\r\n  text-align: right;\r\n}\r\n\r\n.row-icons {\r\n  display: flex;\r\n  gap: 18px;\r\n}\r\n\r\n.input-box ::v-deep(.ant-input-affix-wrapper),\r\n.input-box ::v-deep(.ant-input) {\r\n  height: 22px;\r\n  line-height: 22px;\r\n  border: none;\r\n  box-shadow: none;\r\n  background: transparent;\r\n  padding: 0 4px;\r\n}\r\n\r\n.input-box ::v-deep(.ant-input-affix-wrapper:hover),\r\n.input-box ::v-deep(.ant-input:hover),\r\n.input-box ::v-deep(.ant-input-affix-wrapper-focused),\r\n.input-box ::v-deep(.ant-input:focus),\r\n.input-box ::v-deep(.ant-input-focused) {\r\n  border: none;\r\n  box-shadow: none;\r\n}\r\n\r\n.tips-box {\r\n  margin-top: 4px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  color: #8c8c8c;\r\n  font-size: 14px;\r\n  font-style: normal;\r\n  font-weight: 400;\r\n  line-height: 22px;\r\n}\r\n\r\n::v-deep(.ant-form-vertical .ant-form-item-label) {\r\n  width: 100%;\r\n  min-width: 0;\r\n  flex: initial;\r\n  padding-bottom: 4px;\r\n}\r\n\r\n.reply-modal-form ::v-deep(.ant-form-item-label) {\r\n  width: 100%;\r\n  min-width: 0;\r\n  flex: initial;\r\n  padding-bottom: 4px;\r\n}\r\n\r\n.reply-modal-form ::v-deep(.ant-form-item) {\r\n  margin-bottom: 16px;\r\n}\r\n</style>"],"names":["smartMenuRuleImgSrc","MAX_TITLES","t","useI18n","labelCol","wrapperCol","query","useRoute","ruleId","ref","router","useRouter","autoReplyUrl","computed","robotStore","useRobotStore","keywordReplyStatus","formRef","form","reactive","rules","replyRefs","emojiIndex","EmojiIndex","emojiDataJson","emojiOpen","menuContentRef","timeFormats","formatNow","fmt","map","dayjs","insertAtCaretInMenuContent","text","el","_b","_a","start","end","val","nextTick","pos","insertTime","onEmojiSelect","emoji","char","getPopup","urlHttpValidator","_rule","value","appidValidator","onKeywordFocus","kw","replyForm","checkKeyWordRepeat","res","repeat","ruleName","message","serializeReplyContent","list","it","serializeReplyTypeCodes","validateMenuContent","_value","titleItems","hiddenMenuContent","focusedId","toolbarInteracting","draggingIndex","dragOverIndex","onDragStart","idx","onDragEnter","moved","onDragLeave","onDrop","onDragEnd","onFocusTitle","onBlurTitle","onToolbarMouseDown","insertNewline","convertToPure","addTitleAfter","count","nextOrder","removeTitle","startEditOrder","endEditOrder","n","watch","payload","replyModalOpen","editingTitleIndex","openReplyModal","_c","_d","_e","getRobotKeywordReply","data","fk","hk","rc","onReplyModalOk","name","comp","saveRobotKeywordReply","newId","cfg","e","onReplyModalCancel","addReplyContent","onReplyDelItem","onReplyContentChange","reply_index","rest","miniLinkModalOpen","miniLinkForm","urlLinkModalOpen","urlLinkForm","openDocs","openMiniLinkModal","raw","title","appid","path","inner","am","pm","m","onMiniLinkOk","a","p","onMiniLinkCancel","openUrlLinkModal","url","hm","onUrlLinkOk","u","onUrlLinkCancel","v","onSubmit","menu_content","hasLink","isPure","isNewline","rid","saveSmartMenu","onMounted","copyId","fetchOne","getSmartMenu","arr","mc","i","txt","isAnchor","isMini","needLoad","x","item","resOne","dataOne","_openBlock","_createElementBlock","_hoisted_1","_createVNode","_component_a_breadcrumb","_component_a_breadcrumb_item","_createElementVNode","_unref","_hoisted_2","_hoisted_3","_hoisted_4","_component_a_form","_component_a_form_item","_component_a_input","_cache","$event","_hoisted_5","_component_a_textarea","_hoisted_6","_hoisted_7","_toDisplayString","_component_a_dropdown","_component_a_menu","_Fragment","_renderList","_component_a_menu_item","_component_a_tooltip","_withModifiers","_hoisted_8","_component_a_popover","Picker","_hoisted_9","_component_a_form_item_rest","_hoisted_10","_normalizeClass","_hoisted_12","_hoisted_13","HolderOutlined","_hoisted_14","_vShow","_withKeys","_vModelText","_hoisted_16","_createBlock","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_component_svg_icon","_hoisted_23","_component_a_button","_hoisted_24","_component_a_modal","_component_a_select","_component_a_select_option","_hoisted_26","_hoisted_27","MultiReply","PlusOutlined","_hoisted_28","_hoisted_29"],"mappings":"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"}