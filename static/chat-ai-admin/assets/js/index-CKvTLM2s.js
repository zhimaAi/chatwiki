import{_ as L}from"./cu-scroll-C6Q1olgl.js";import{Y as h,_ as d,F as I,a9 as M,a5 as s,k as u,a7 as k,G as p,a2 as m,B as E,a6 as N,a3 as R,f as g,o as q,ab as U,aa as V,a1 as A,l as O}from"./vue-chunks-Ci-XTWEs.js";import{g as T,f as D,s as B}from"./index-M-GWJz6_.js";import{b as S,d as z}from"../../index-BLRnoXQj.js";import{X as G,ag as H,k as W,B as X,a as $,M as Y,H as j}from"./ui-antd-BKz8sshA.js";import"./pull-up.esm-D94Swpvl.js";import"./observe-dom.esm-CyCedSm-.js";import"./utils-ChQO-_r6.js";const J={class:"list-box"},K=["onClick"],P={class:"explore-info"},Q={class:"explore-info-content"},Z={class:"explore-title"},tt={class:"item-body"},et={class:"explore-desc"},ot={class:"support-box"},st={class:"item-footer"},nt={__name:"index",props:{list:{type:Array,default:()=>[]}},emits:["switchChange","fixedMenuChange","clickItem"],setup(v,{emit:f}){const _=f,y=v,b=(c,n)=>_("switchChange",c,n),w=(c,n)=>_("fixedMenuChange",c,n),l=(c,n)=>{try{const r=c==null?void 0:c.target;if(r&&typeof r.closest=="function"&&r.closest(".no-bubble"))return}catch{}_("clickItem",n)};return(c,n)=>{const r=z,x=G,C=H;return d(),h("div",J,[(d(!0),h(I,null,M(y.list,a=>{var t,o;return d(),h("div",{class:"list-item-wrapper",key:a.id},[s("div",{class:"list-item",onClick:e=>l(e,a)},[s("div",P,[u(r,{class:"explore-icon",name:a.ability_type,style:{"font-size":"62px",color:"white"}},null,8,["name"]),s("div",Q,[s("div",Z,k(a.explore_name||a.name),1),n[2]||(n[2]=s("div",{class:"explore-type"},"ChatWiki",-1))])]),s("div",tt,[s("div",et,k(a.explore_intro||a.introduction),1),s("span",ot,[(d(!0),h(I,null,M(a.support_channels_list,e=>(d(),h("span",{key:e,class:"support-item"},[u(r,{name:"support",class:"icon"}),p(" "+k(e),1)]))),128))])]),s("div",st,[u(x,{checked:((t=a.robot_config)==null?void 0:t.switch_status)=="1","checked-children":"开","un-checked-children":"关",class:"no-bubble",onChange:e=>b(a,e)},null,8,["checked","onChange"]),u(C,{class:"fixed-menu-box no-bubble",checked:((o=a.robot_config)==null?void 0:o.fixed_menu)=="1",onClick:n[0]||(n[0]=E(()=>{},["stop"])),onMousedown:n[1]||(n[1]=E(()=>{},["stop"])),onChange:e=>{var i;return w(a,((i=e==null?void 0:e.target)==null?void 0:i.checked)===!0)}},{default:m(()=>n[3]||(n[3]=[p(" 固定菜单 ")])),_:2,__:[3]},1032,["checked","onChange"])])],8,K)])}),128))])}}},at=S(nt,[["__scopeId","data-v-f7a7a14f"]]),it={class:"no-data"},lt={class:"no-data-text"},ct={__name:"list-empty",props:{text:{type:String,default:"暂无数据"},size:{type:[Number,String],default:100}},setup(v){const f=v;return(_,y)=>{const b=z;return d(),h("div",it,[u(b,{name:"empty",style:N({"font-size":`${f.size}px`})},null,8,["style"]),s("div",lt,[R(_.$slots,"default",{},()=>[p(k(f.text),1)],!0)])])}}},rt=S(ct,[["__scopeId","data-v-72019f28"]]),dt={class:"user-model-page"},_t={class:"list-wrapper"},pt={class:"content-wrapper"},ut={"bg-color":"#f5f9ff",class:"explore-page"},bt={class:"explore-page-body"},ht={class:"list-group-box"},ft={class:"empty-content"},yt={__name:"index",setup(v){const f=g([{title:"功能",value:"1"},{title:"插件",value:"2"}]),_=U(),y=V(),b=g([]),w=()=>{f.value=[{title:"功能",value:"1"},{title:"插件",value:"2"}]},l=g("");let c=g([]);const n=()=>{T({robot_id:l.value}).then(t=>{const o=((t==null?void 0:t.data)||[]).map(e=>({...e,explore_name:e.name,explore_intro:e.introduction}));b.value=o,c.value=(t==null?void 0:t.data)||[],w()})},r=(t,o)=>{const e=o?"1":"0";if(e=="0"){Y.confirm({title:"确认关闭吗？",icon:O(j),content:"关闭后，触发了关键词不会再回复指定内容",onOk:()=>{B({robot_id:l.value,ability_type:t.ability_type,switch_status:e}).then(i=>{i&&i.res==0&&($.success("操作成功"),t.robot_config&&(t.robot_config.switch_status=e),window.dispatchEvent(new CustomEvent("robotAbilityUpdated",{detail:{robotId:l.value}})))})}});return}B({robot_id:l.value,ability_type:t.ability_type,switch_status:e}).then(i=>{i&&i.res==0&&($.success("操作成功"),t.robot_config&&(t.robot_config.switch_status=e),window.dispatchEvent(new CustomEvent("robotAbilityUpdated",{detail:{robotId:l.value}})))})},x=(t,o)=>{const e=o?"1":"0";D({robot_id:l.value,ability_type:t.ability_type,fixed_menu:e}).then(i=>{i&&i.res==0&&($.success("操作成功"),t.robot_config&&(t.robot_config.fixed_menu=e),window.dispatchEvent(new CustomEvent("robotAbilityUpdated",{detail:{robotId:l.value}})))})},C=t=>{let o;t.ability_type=="robot_auto_reply"&&(o=y.resolve({path:"/robot/ability/auto-reply",query:{id:l.value,robot_key:_.query.robot_key}})),window.open(o.href,"_blank")},a=()=>{const t=y.resolve({path:"/explore/index",query:{tab:"1"}});window.open(t.href,"_blank")};return q(()=>{l.value=_.query.id,n()}),(t,o)=>{const e=W,i=X,F=L;return d(),h("div",dt,[o[4]||(o[4]=s("div",{class:"page-title"},"功能中心",-1)),s("div",_t,[s("div",pt,[u(e,{"show-icon":"",style:{"align-items":"baseline"}},{message:m(()=>o[0]||(o[0]=[s("div",null,[p(" 查询已经启用的功能，可选择在一级菜单中固定，快捷开启和关闭功能 更多功能可到 "),s("a",{href:"#/explore/index",target:"_blank"},"探索>功能中心"),p(" 中添加 ")],-1)])),_:1}),s("div",ut,[s("div",bt,[s("div",ht,[u(F,{style:{"padding-right":"16px",flex:"1"}},{default:m(()=>[b.value.length==0?(d(),A(rt,{key:0,size:"250",class:"empty-box"},{default:m(()=>[s("div",ft,[o[2]||(o[2]=s("p",{class:"empty-title"},"暂未添加功能",-1)),o[3]||(o[3]=s("p",{class:"empty-desc"},[p("更多功能可到 "),s("a",{href:"#/explore/index",target:"_blank"},"探索>功能中心"),p(" 去添加")],-1)),u(i,{type:"primary",onClick:a},{default:m(()=>o[1]||(o[1]=[p("去添加")])),_:1,__:[1]})])]),_:1})):(d(),A(at,{key:1,list:b.value,onSwitchChange:r,onFixedMenuChange:x,onClickItem:C},null,8,["list"]))]),_:1})])])])])])])}}},St=S(yt,[["__scopeId","data-v-50a848ac"]]);export{St as default};
