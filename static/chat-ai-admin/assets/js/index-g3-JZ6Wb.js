import{_ as j}from"./cu-scroll-CpIj948h.js";import{s as q,g as A,a as D,b as E,d as U}from"./index-Cg7-0swo.js";import{r as h,a as p,b as l,y as r,t as _,p as a,_ as x,v as s,u,q as L,F as M,l as F,Y as H,ah as P,E as Q,e as I}from"./vue-chunks-BdaA73Wf.js";import{u as R}from"../../index-DSFcP5NQ.js";import{_ as V}from"./emoji-mart-BBMRoEa3.js";import{V as Y,r as G,s as K,N as X,M as W,b as B,a1 as Z,B as ee,x as te,q as oe,H as se,J as ae,O as ne}from"./ui-antd-Dl1wwwCD.js";import"./pull-up.esm-DIiTC7VE.js";import"./observe-dom.esm-B25JyVKH.js";import"./editor-cherry-CFIsbKoN.js";import"./neo4j-MWxXN7EM.js";import"./lodash-Bm5sK6rN.js";import"./elkjs-BN8GIjVH.js";import"./utils-CvB22N-W.js";import"./other-LrIFyvU9.js";const ie={class:"form-modal-box"},le={class:"form-item"},de={class:"form-label"},_e={class:"form-content"},ce={class:"form-item"},re={class:"form-label"},ue={class:"form-content"},pe={key:0,class:"robot-list"},ve={class:"robot-name-text"},me={__name:"add-sensitive-modal",props:{robotList:{type:Array,default:()=>[]}},emits:["ok"],setup(J,{expose:n,emit:N}){const{t:e}=R("views.user.sensitive-words.components.add-sensitive-modal"),T=N,k=J,C=h(!1),z=h(e("title_add")),S=h(""),b=h(""),m=h(0),v=h([]),o=t=>{C.value=!0,z.value=t.id?e("title_edit"):e("title_add"),S.value=t.id||"",b.value=t.words||"",m.value=+t.trigger_type||0,v.value=t.robot_ids||[]},f=t=>{v.value.includes(t.id)?v.value=v.value.filter(c=>c!==t.id):v.value.push(t.id)},g=()=>{if(!b.value)return B.error(e("error_no_words"));if(m.value==1&&v.value.length==0)return B.error(e("error_no_robot"));q({id:S.value,words:b.value,trigger_type:m.value,robot_ids:v.value.join(",")}).then(t=>{B.success(S.value?e("success_edit"):e("success_add")),C.value=!1,T("ok")})};return n({show:o}),(t,c)=>{const O=Y,$=K,y=G,w=X,i=W;return l(),p("div",null,[r(i,{open:C.value,"onUpdate:open":c[2]||(c[2]=d=>C.value=d),title:z.value,onOk:g,width:620},{default:_(()=>[a("div",ie,[a("div",le,[a("div",de,[x(s(u(e)("sensitive_words_label")),1),a("span",null,s(u(e)("sensitive_words_tip")),1)]),a("div",_e,[r(O,{value:b.value,"onUpdate:value":c[0]||(c[0]=d=>b.value=d),placeholder:u(e)("placeholder"),style:{height:"160px"}},null,8,["value","placeholder"])])]),a("div",ce,[a("div",re,s(u(e)("effective_robots")),1),a("div",ue,[r(y,{value:m.value,"onUpdate:value":c[1]||(c[1]=d=>m.value=d)},{default:_(()=>[r($,{value:0},{default:_(()=>[x(s(u(e)("all_robots")),1)]),_:1}),r($,{value:1},{default:_(()=>[x(s(u(e)("specific_robots")),1)]),_:1})]),_:1},8,["value"]),m.value==1?(l(),p("div",pe,[(l(!0),p(M,null,F(k.robotList,d=>(l(),p("div",{class:"checked-item",key:d.id},[r(w,{onClick:H(ze=>f(d),["stop"]),checked:v.value.includes(d.id)},{default:_(()=>[a("div",ve,s(d.robot_name),1)]),_:2},1032,["onClick","checked"])]))),128))])):L("",!0)])])])]),_:1},8,["open","title"])])}}},he=V(me,[["__scopeId","data-v-c1f00bc8"]]),be={class:"user-model-page"},fe={class:"page-title"},ke={class:"add-block"},ge={class:"list-wrapper"},ye={class:"content-box"},we={class:"text-over-box"},xe={key:1,class:"text-over-box"},Ce={key:0},Se={class:"text-over-box"},$e={key:1,class:"text-over-box"},Oe=["onClick"],Le=["onClick"],Ne={__name:"index",setup(J){const{t:n}=R("views.user.sensitive-words.index");P().query;const N=h([]),e=Q({page:1,size:20,total:0}),T=o=>{e.page=o.current,e.size=o.pageSize,k()},k=()=>{D({...e}).then(o=>{let f=o.data.list||[];N.value=f.map(g=>{let t=JSON.parse(g.robot_data),c=t.map(y=>y.robot_name).join(";"),O=t.map(y=>y.id),$=g.words.split(`
`).join("ï¼›");return{...g,robot_data:t,robot_name_desc:c,robot_ids:O,words_desc:$}}),e.total=o.data.total})};k();const C=o=>{E({id:o.id}).then(f=>{k()})},z=o=>{W.confirm({title:n("delete_confirm"),icon:r(ne),content:n("delete_confirm_content",{words:o.words_desc}),okText:n("delete"),okType:"danger",cancelText:n("cancel"),onOk(){U({id:o.id}).then(f=>{B.success(n("delete_success")),k()})},onCancel(){}})},S=h(null),b=(o={})=>{S.value.show(JSON.parse(JSON.stringify(o)))},m=h([]);A().then(o=>{m.value=o.data||[]});const v=[{title:n("sensitive_words"),dataIndex:"words_desc",key:"words_desc",ellipsis:!0,width:300},{title:n("effective_robots"),dataIndex:"robot_name_desc",key:"robot_name_desc",ellipsis:!0,width:300},{title:n("enable_status"),key:"status",dataIndex:"status",width:150},{title:n("action"),key:"action",width:120}];return(o,f)=>{const g=ee,t=oe,c=se,O=ae,$=te,y=j;return l(),p("div",be,[a("div",fe,[x(s(u(n)("title"))+" ",1),a("div",ke,[r(g,{type:"primary",onClick:f[0]||(f[0]=w=>b()),icon:r(u(Z))},{default:_(()=>[x(s(u(n)("add_btn")),1)]),_:1},8,["icon"])])]),a("div",ge,[r(y,null,{default:_(()=>[a("div",ye,[r($,{columns:v,"data-source":N.value,pagination:{current:e.page,total:e.total,pageSize:e.size,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"]},onChange:T},{bodyCell:_(({column:w,record:i})=>[w.key==="words_desc"?(l(),p(M,{key:0},[i.words_desc.length>20?(l(),I(t,{key:0,overlayStyle:{"max-width":"500px"}},{title:_(()=>[x(s(i.words_desc),1)]),default:_(()=>[a("div",we,s(i.words_desc),1)]),_:2},1024)):(l(),p("div",xe,s(i.words_desc),1))],64)):L("",!0),w.key==="robot_name_desc"?(l(),p(M,{key:1},[i.trigger_type==0?(l(),p("div",Ce,s(u(n)("all_robots")),1)):(l(),p(M,{key:1},[i.robot_name_desc.length>20?(l(),I(t,{key:0,overlayStyle:{"max-width":"500px"}},{title:_(()=>[x(s(i.robot_name_desc),1)]),default:_(()=>[a("div",Se,s(i.robot_name_desc),1)]),_:2},1024)):(l(),p("div",$e,s(i.robot_name_desc),1))],64))],64)):L("",!0),w.key==="status"?(l(),I(c,{key:2,onChange:d=>C(i),checked:i.status==1},null,8,["onChange","checked"])):L("",!0),w.key==="action"?(l(),I(O,{key:3,gap:12,style:{"white-space":"nowrap"}},{default:_(()=>[a("a",{onClick:d=>b(i)},s(u(n)("edit")),9,Oe),a("a",{onClick:d=>z(i)},s(u(n)("delete")),9,Le)]),_:2},1024)):L("",!0)]),_:1},8,["data-source","pagination"])])]),_:1}),r(he,{onOk:k,robotList:m.value,ref_key:"addaddSensitiveModalRef",ref:S},null,8,["robotList"])])])}}},Fe=V(Ne,[["__scopeId","data-v-34137b72"]]);export{Fe as default};
//# sourceMappingURL=index-g3-JZ6Wb.js.map
