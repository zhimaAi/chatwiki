{"version":3,"file":"add-data-sheet-B3OukkAC.js","sources":["../../../../front-end/chat-ai-admin-vue/src/assets/img/database/base-icon.svg","../../../../front-end/chat-ai-admin-vue/src/views/database/database-list/components/add-data-sheet.vue"],"sourcesContent":["export default \"data:image/svg+xml,%3csvg%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2062%2062'%20class='design-iconfont'%3e%3cpath%20d='M0%2014.5882C0%206.53137%206.53137%200%2014.5882%200H47.4118C55.4686%200%2062%206.53137%2062%2014.5882V47.4118C62%2055.4686%2055.4686%2062%2047.4118%2062H14.5882C6.53137%2062%200%2055.4686%200%2047.4118V14.5882Z'%20fill='%234876FF'/%3e%3cg%20clip-path='url(%23yi8ty4pxs__clip0_7802_38770)'%20filter='url(%23yi8ty4pxs__filter0_d_7802_38770)'%3e%3cpath%20d='M30.4027%2033.1084C30.7927%2032.9941%2031.2073%2032.9941%2031.5973%2033.1084L46.079%2037.35C48.1159%2037.9466%2048.1159%2040.832%2046.079%2041.4286L31.5973%2045.6702C31.2073%2045.7844%2030.7927%2045.7844%2030.4027%2045.6702L15.921%2041.4286C13.8841%2040.832%2013.8841%2037.9466%2015.921%2037.35L30.4027%2033.1084Z'%20fill='%23C2D1FF'/%3e%3cpath%20d='M30.4027%2024.4677C30.7927%2024.3535%2031.2073%2024.3535%2031.5973%2024.4677L46.079%2028.7093C48.1159%2029.3059%2048.1159%2032.1914%2046.079%2032.788L31.5973%2037.0296C31.2073%2037.1438%2030.7927%2037.1438%2030.4027%2037.0296L15.921%2032.788C13.8841%2032.1914%2013.8841%2029.3059%2015.921%2028.7093L30.4027%2024.4677Z'%20fill='%23D6E0FF'/%3e%3cpath%20d='M30.4027%2016.3271C30.7927%2016.2129%2031.2073%2016.2129%2031.5973%2016.3271L46.079%2020.5687C48.1159%2021.1653%2048.1159%2024.0508%2046.079%2024.6474L31.5973%2028.889C31.2073%2029.0032%2030.7927%2029.0032%2030.4027%2028.889L15.921%2024.6474C13.8841%2024.0508%2013.8841%2021.1653%2015.921%2020.5687L30.4027%2016.3271Z'%20fill='%23EBF0FF'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='yi8ty4pxs__clip0_7802_38770'%3e%3cpath%20fill='%23fff'%20transform='translate(14%2014)'%20d='M0%200H34V34H0z'/%3e%3c/clipPath%3e%3cfilter%20id='yi8ty4pxs__filter0_d_7802_38770'%20x='9.75'%20y='14'%20width='42.5'%20height='42.5'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeColorMatrix%20in='SourceAlpha'%20values='0%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%20127%200'%20result='hardAlpha'/%3e%3cfeOffset%20dy='4.25'/%3e%3cfeGaussianBlur%20stdDeviation='2.125'/%3e%3cfeColorMatrix%20values='0%200%200%200%200.0886636%200%200%200%200%200.388241%200%200%200%200%200.413084%200%200%200%200.14%200'/%3e%3cfeBlend%20in2='BackgroundImageFix'%20result='effect1_dropShadow_7802_38770'/%3e%3cfeBlend%20in='SourceGraphic'%20in2='effect1_dropShadow_7802_38770'%20result='shape'/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e\"","<template>\r\n  <div class=\"add-data-sheet\">\r\n    <a-modal v-model:open=\"open\" :title=\"t(modalTitle)\" @ok=\"handleOk\" :width=\"540\">\r\n      <a-form layout=\"vertical\">\r\n        <a-form-item :label=\"t('data_table_name_label')\" v-bind=\"validateInfos.name\">\r\n          <a-input :maxLength=\"64\" v-model:value=\"formState.name\" :placeholder=\"t('data_table_name_placeholder')\" />\r\n          <div class=\"form-tip\">{{ t('data_table_name_tip') }}</div>\r\n        </a-form-item>\r\n        <a-form-item :label=\"t('data_table_description_label')\" v-bind=\"validateInfos.description\">\r\n          <a-textarea\r\n            :maxLength=\"500\"\r\n            style=\"height: 80px\"\r\n            v-model:value=\"formState.description\"\r\n            :placeholder=\"t('data_table_description_placeholder')\"\r\n          />\r\n        </a-form-item>\r\n      </a-form>\r\n    </a-modal>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { reactive, ref } from 'vue'\r\nimport { Form, message } from 'ant-design-vue'\r\nimport { addForm, editForm } from '@/api/database'\r\nimport { useRouter } from 'vue-router'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.database.database-list.components.add-data-sheet')\r\nconst router = useRouter()\r\nconst emit = defineEmits(['ok'])\r\nconst open = ref(false)\r\nconst modalTitle = ref('create_data_table')\r\nconst formState = reactive({\r\n  name: '',\r\n  description: '',\r\n  id: ''\r\n})\r\nconst show = (data = {}) => {\r\n  open.value = true\r\n  resetFields()\r\n  formState.name = data.name || ''\r\n  formState.description = data.description || ''\r\n  formState.id = data.id || ''\r\n  modalTitle.value = data.id ? 'edit_data_table' : 'create_data_table'\r\n}\r\nconst formRules = reactive({\r\n  name: [\r\n    {\r\n      required: true,\r\n      validator: async (rule, value) => {\r\n        if (!/^[a-z][a-z0-9_]*$/.test(value)) {\r\n          return Promise.reject(t('name_validation_error'))\r\n        }\r\n        return Promise.resolve()\r\n      }\r\n    }\r\n  ],\r\n  description: [\r\n    {\r\n      required: true,\r\n      message: t('description_required_error')\r\n    }\r\n  ]\r\n})\r\nconst useForm = Form.useForm\r\nconst { resetFields, validate, validateInfos } = useForm(formState, formRules)\r\nconst handleOk = () => {\r\n  validate().then((res) => {\r\n    if (formState.id) {\r\n      editForm(formState).then(() => {\r\n        postCallback(t('edit_success'))\r\n      })\r\n    } else {\r\n      addForm(formState).then((res) => {\r\n        postCallback(t('create_success'))\r\n        router.push({\r\n          path: '/database/details/field-manage',\r\n          query: {\r\n            form_id: res.data.id,\r\n          }\r\n        })\r\n      })\r\n    }\r\n  })\r\n}\r\nfunction postCallback(tip) {\r\n  message.success(tip)\r\n  open.value = false\r\n  emit('ok')\r\n}\r\ndefineExpose({\r\n  show\r\n})\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.form-tip {\r\n  color: #8c8c8c;\r\n  margin-top: 8px;\r\n}\r\n</style>\r\n"],"names":["_imports_0","useI18n","router","useRouter","emit","__emit","open","ref","modalTitle","formState","reactive","show","data","resetFields","formRules","rule","value","useForm","Form","validate","validateInfos","handleOk","res","editForm","postCallback","addForm","tip","message","__expose","_openBlock","_createElementBlock","_hoisted_1","_createVNode","_component_a_modal","$event","_unref","_component_a_form","_component_a_form_item","_mergeProps","_component_a_input","_cache","_createElementVNode","_hoisted_2","_toDisplayString","_component_a_textarea"],"mappings":"yUAAA,MAAAA,GAAe,ikFC4Bf,KAAM,CAAE,CAAC,EAAKC,EAAQ,wDAAwD,EACxEC,EAASC,EAAS,EAClBC,EAAOC,EACPC,EAAOC,EAAI,EAAK,EAChBC,EAAaD,EAAI,mBAAmB,EACpCE,EAAYC,EAAS,CACzB,KAAM,GACN,YAAa,GACb,GAAI,EACN,CAAC,EACKC,EAAO,CAACC,EAAO,KAAO,CAC1BN,EAAK,MAAQ,GACbO,EAAW,EACXJ,EAAU,KAAOG,EAAK,MAAQ,GAC9BH,EAAU,YAAcG,EAAK,aAAe,GAC5CH,EAAU,GAAKG,EAAK,IAAM,GAC1BJ,EAAW,MAAQI,EAAK,GAAK,kBAAoB,mBACnD,EACME,EAAYJ,EAAS,CACzB,KAAM,CACJ,CACE,SAAU,GACV,UAAW,MAAOK,EAAMC,IACjB,oBAAoB,KAAKA,CAAK,EAG5B,QAAQ,QAAO,EAFb,QAAQ,OAAO,EAAE,uBAAuB,CAAC,CAI1D,CACA,EACE,YAAa,CACX,CACE,SAAU,GACV,QAAS,EAAE,4BAA4B,CAC7C,CACA,CACA,CAAC,EACKC,EAAUC,EAAK,QACf,CAAE,YAAAL,EAAa,SAAAM,EAAU,cAAAC,CAAa,EAAKH,EAAQR,EAAWK,CAAS,EACvEO,EAAW,IAAM,CACrBF,EAAQ,EAAG,KAAMG,GAAQ,CACnBb,EAAU,GACZc,EAASd,CAAS,EAAE,KAAK,IAAM,CAC7Be,EAAa,EAAE,cAAc,CAAC,CAChC,CAAC,EAEDC,EAAQhB,CAAS,EAAE,KAAMa,GAAQ,CAC/BE,EAAa,EAAE,gBAAgB,CAAC,EAChCtB,EAAO,KAAK,CACV,KAAM,iCACN,MAAO,CACL,QAASoB,EAAI,KAAK,EAC9B,CACA,CAAS,CACH,CAAC,CAEL,CAAC,CACH,EACA,SAASE,EAAaE,EAAK,CACzBC,EAAQ,QAAQD,CAAG,EACnBpB,EAAK,MAAQ,GACbF,EAAK,IAAI,CACX,CACA,OAAAwB,EAAa,CACX,KAAAjB,CACF,CAAC,oCA5FC,OAAAkB,EAAA,EAAAC,EAiBM,MAjBNC,EAiBM,CAhBJC,EAeUC,EAAA,CAfO,KAAM3B,EAAA,qCAAAA,EAAI,MAAA4B,GAAG,MAAOC,EAAA,CAAA,EAAE3B,EAAA,KAAU,EAAI,KAAIa,EAAW,MAAO,gBACzE,IAaS,CAbTW,EAaSI,EAAA,CAbD,OAAO,UAAU,EAAA,WACvB,IAGc,CAHdJ,EAGcK,EAHdC,EAGc,CAHA,MAAOH,EAAA,CAAA,EAAC,uBAAA,CAAmC,EAAAA,EAAAf,CAAA,EAAc,IAAI,EAAA,WACzE,IAA0G,CAA1GY,EAA0GO,EAAA,CAAhG,UAAW,GAAY,MAAO9B,EAAU,KAAV,iBAAA+B,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAN,GAAAzB,EAAU,KAAIyB,GAAG,YAAaC,EAAA,CAAA,EAAC,6BAAA,mCACvEM,EAA0D,MAA1DC,EAA0DC,EAAjCR,EAAA,CAAA,EAAC,qBAAA,CAAA,EAAA,CAAA,uBAE5BH,EAOcK,EAPdC,EAOc,CAPA,MAAOH,EAAA,CAAA,EAAC,8BAAA,CAA0C,EAAAA,EAAAf,CAAA,EAAc,WAAW,EAAA,WACvF,IAKE,CALFY,EAKEY,EAAA,CAJC,UAAW,IACZ,MAAA,CAAA,OAAA,MAAA,EACQ,MAAOnC,EAAU,YAAV,iBAAA+B,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAN,GAAAzB,EAAU,YAAWyB,GACnC,YAAaC,EAAA,CAAA,EAAC,oCAAA"}