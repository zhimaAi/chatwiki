import{b as Y,h as Ye,aa as ne,ab as Oe,ac as Ue,ad as ue,ae as Le,k as Qe,w as Xe,x as et,af as tt,d as ot,ag as st}from"../../index-BLRnoXQj.js";import{_ as nt}from"./cu-scroll-C6Q1olgl.js";import{f as p,a1 as q,_ as n,a2 as o,a5 as e,k as t,G as A,u as I,r as Ae,Y as v,F as z,a9 as Z,a7 as M,ae as ee,ad as de,o as he,l as _e,B as E,ab as Fe,e as Te}from"./vue-chunks-Ci-XTWEs.js";import{i as lt,j as De,k as at,g as Ge,l as it,m as ut,n as dt}from"./index-DxRFb1rg.js";import{A as Be,a as ct,b as rt}from"./add-group-B7FKjxkw.js";import{k as Ee,as as _t,at as pt,M as W,a as S,o as vt,u as ft,v as mt,F as Ne,e as qe,I as be,Q as ze,ag as kt,a3 as We,ah as ge,ac as ht,X as bt,z as ke,B as ve,an as pe,b as ye,c as $e,D as Ce,x as gt,W as yt,ao as $t,a8 as Ct,au as xt,av as wt,aw as Mt,O as Tt,ap as Rt,p as Pt,T as St,ax as Ot,ay as Ut,aj as At,H as Re}from"./ui-antd-BKz8sshA.js";import{_ as It}from"./page-alert-CpFeTUfc.js";import{L as Lt}from"./list-tabs-C0XXpC5J.js";import{_ as Pe}from"./empty-BFmzY9bl.js";import{_ as Ft}from"./no-permission-DtJ3NYHG.js";import{a as Se,g as Dt,s as Gt,b as Bt,d as Et}from"./thirdMcp-oOvjWmUE.js";import"./utils-ChQO-_r6.js";import"./pull-up.esm-D94Swpvl.js";import"./observe-dom.esm-CyCedSm-.js";import"./index-DyZ-tGAB.js";import"./robot-qyZOqvMH.js";const Nt={class:"form-box"},qt={class:"tip-box"},zt={class:"ant-upload-drag-icon"},Wt={__name:"import-csl-alert",emits:["ok"],setup(O,{expose:D,emit:w}){const y=w,m=p(!1),a=p(!1),b=p([]),c=()=>{m.value=!0},r=()=>{m.value=!1,b.value=[]},R=()=>{if(b.value.length===0){S.error("请上传csl文件");return}a.value=!0,lt({file:b.value[0].originFileObj}).then(h=>{a.value=!1,m.value=!1,S.success("导入成功"),b.value=[],y("ok",h.data)}).catch(()=>{a.value=!1})},C=h=>h.name.endsWith(".csl")?!1:(S.error("只能上传csl格式的文件"),vt.LIST_IGNORE),l=h=>{const{status:i}=h.file;i!=="uploading"&&(h.file,h.fileList)};return D({open:c}),(h,i)=>{const k=Ee,s=pt,g=W;return n(),q(g,{width:"600px",open:m.value,"onUpdate:open":i[1]||(i[1]=P=>m.value=P),confirmLoading:a.value,title:"导入csl文件创建机器人",onOk:R,onCancel:r},{default:o(()=>[e("div",Nt,[e("div",qt,[t(k,{type:"info"},{description:o(()=>i[2]||(i[2]=[A(" 您可以将您编排好的机器人导出为csl文件,共享给他人使用。也可以从他人处获取导出的csl文件,通过导入形式创建机器人。 ")])),_:1})]),t(s,{fileList:b.value,"onUpdate:fileList":i[0]||(i[0]=P=>b.value=P),name:"file",multiple:!1,maxCount:1,accept:".csl","before-upload":C,onChange:l},{default:o(()=>[e("p",zt,[t(I(_t),{class:"upload-icon"})]),i[3]||(i[3]=e("p",{class:"upload-text"},"点击或将文件拖拽到这里上传",-1)),i[4]||(i[4]=e("p",{class:"upload-hint"},"仅支持从chatwiki导出生成的csl文件",-1))]),_:1,__:[3,4]},8,["fileList"])])]),_:1},8,["open","confirmLoading"])}}},Vt=Y(Wt,[["__scopeId","data-v-5b3f5182"]]),jt={class:"form-item"},Ht={class:"form-content"},Kt={__name:"edit-group",emits:["ok"],setup(O,{expose:D,emit:w}){const y=p(!1),m=w,a=p("修改分组"),b=Ae({group_id:"",robot_id:""}),c=p([]),r=l=>{b.group_id=l.group_id||"0",b.robot_id=l.id||"",C(),y.value=!0},R=()=>{if(!b.group_id)return S.error("请选择分组");at({...b}).then(l=>{S.success(`${a.value}成功`),y.value=!1,m("ok")})},C=()=>{De().then(l=>{c.value=l.data||[]})};return D({show:r}),(l,h)=>{const i=mt,k=ft,s=W;return n(),v("div",null,[t(s,{open:y.value,"onUpdate:open":h[1]||(h[1]=g=>y.value=g),title:a.value,onOk:R},{default:o(()=>[e("div",jt,[h[2]||(h[2]=e("div",{class:"form-label"},"分组名称：",-1)),e("div",Ht,[t(k,{value:b.group_id,"onUpdate:value":h[0]||(h[0]=g=>b.group_id=g),style:{width:"100%"},placeholder:"请选择分组"},{default:o(()=>[(n(!0),v(z,null,Z(c.value,g=>(n(),q(i,{value:g.id},{default:o(()=>[A(M(g.group_name),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"])])])]),_:1},8,["open","title"])])}}},Zt=Y(Kt,[["__scopeId","data-v-5ebd311c"]]),Jt=()=>{const O=Ye();return{openUrlWithToken:w=>{const y=O.getToken;if(!y){console.warn("Token is missing");return}if(!w){console.warn("URL is missing");return}const m=w.includes("?")?"&":"?",a=`${w}${m}token=${y}`;window.open(a,"_blank")}}};function Yt(O={}){return ne.get({url:"/manage/getMcpServerList",params:O})}function Qt(O={}){return ne.post({headers:{"Content-Type":"multipart/form-data"},url:"/manage/saveMcpServer",data:O})}function Xt(O={}){return ne.post({url:"/manage/deleteMcpServer",data:O})}function eo(O={}){return ne.post({url:"/manage/updateMcpServerPublishStatus",data:O})}function to(O={}){return ne.post({url:"/manage/saveMcpTool",data:O})}function oo(O={}){return ne.post({url:"/manage/editMcpTool",data:O})}function so(O={}){return ne.post({url:"/manage/deleteMcpTool",data:O})}const no={class:"avatar-box"},lo={__name:"mcp-store",emits:["ok"],setup(O,{expose:D,emit:w}){const y=w,m=p(!1),a=p(!1),b=p(null),c={avatar:Oe,name:"",description:"",server_id:""},r=Ae({});function R(h=null){Object.assign(r,h||c),b.value=null,m.value=!0}function C(h){b.value=h}function l(){var h;try{if(a.value=!0,r.name=r.name.trim(),r.description=r.description.trim(),!r.name)throw"请输入MCP插件名称";if(!r.description)throw"请输入MCP插件描述";let i={...r};b.value&&(i.avatar=(h=b.value)==null?void 0:h.file),Qt(i).then(k=>{y("ok",r),S.success("已保存"),m.value=!1}).finally(()=>{a.value=!1})}catch(i){a.value=!1,S.error(i)}}return D({show:R}),(h,i)=>{const k=be,s=qe,g=ze,P=Ne,V=W;return n(),q(V,{open:m.value,"onUpdate:open":i[3]||(i[3]=x=>m.value=x),title:r.server_id?"编辑MCP":"添加MCP",width:"472px","confirm-loading":a.value,onOk:l},{default:o(()=>[e("div",no,[t(Be,{value:r.avatar,"onUpdate:value":i[0]||(i[0]=x=>r.avatar=x),onChange:C},null,8,["value"]),i[4]||(i[4]=e("div",{class:"tip-info"},"点击替换，建议尺寸为100*100px，大小不超过100kb",-1))]),t(P,{class:"form-box",labelAlign:"left"},{default:o(()=>[t(s,{label:"MCP插件名称",required:"",colon:!1},{default:o(()=>[t(k,{value:r.name,"onUpdate:value":i[1]||(i[1]=x=>r.name=x),placeholder:"请输入MCP插件名称，最多20个字",maxlength:20},null,8,["value"])]),_:1}),t(s,{label:"描述",colon:!1},{default:o(()=>[t(g,{value:r.description,"onUpdate:value":i[2]||(i[2]=x=>r.description=x),"auto-size":{minRows:2,maxRows:5},placeholder:"请输入描述",maxlength:20},null,8,["value"])]),_:1}),r.server_id?ee("",!0):(n(),v(z,{key:0},[i[5]||(i[5]=e("div",{class:"tit-box"},[A("配置信息 "),e("span",{class:"desc"},"以下配置创建完成后自动生成")],-1)),t(s,{label:"插件URL",colon:!1},{default:o(()=>[t(k,{disabled:"",placeholder:"创建完成后默认生成"})]),_:1}),t(s,{label:"授权方式",colon:!1},{default:o(()=>[t(k,{disabled:"",placeholder:"Service token / API key"})]),_:1}),t(s,{label:"请求头",colon:!1},{default:o(()=>[t(k,{disabled:"",placeholder:"Authorization"})]),_:1}),t(s,{label:"API KEY",colon:!1},{default:o(()=>[t(k,{disabled:"",placeholder:"创建完成后默认生成"})]),_:1})],64))]),_:1})]),_:1},8,["open","title","confirm-loading"])}}},ao=Y(lo,[["__scopeId","data-v-6f6a3691"]]),io={class:"data-list"},uo=["onClick"],co=["src"],ro={class:"info"},_o={class:"tit"},po={class:"desc"},vo={key:1,class:"status-tag waiting"},fo={__name:"select-workflow-modal",emits:["ok"],setup(O,{expose:D,emit:w}){const y=w,m=p(!1),a=p([]),b=p([]);function c(C=[]){b.value=C,m.value=!0,r()}function r(){Ge({application_type:1}).then(C=>{a.value=C.data||[],a.value.forEach(l=>{l.checked=b.value.includes(l.id)})})}function R(){m.value=!1,y("ok",a.value.filter(C=>C.checked).map(C=>C.id),a)}return D({show:c}),(C,l)=>{const h=Ee,i=kt,k=W;return n(),q(k,{open:m.value,"onUpdate:open":l[0]||(l[0]=s=>m.value=s),title:"关联工作流",width:"669px",onOk:R},{default:o(()=>[t(h,{class:"zm-alert-info mt24",type:"info",message:"选择工作流后，会自动生成唯一标识符，可修改","show-icon":""}),e("div",io,[(n(!0),v(z,null,Z(a.value,(s,g)=>(n(),v("div",{key:g,class:de(["data-item",{disabled:s.has_published!=1}]),onClick:P=>s.checked=!s.checked},[e("img",{class:"avatar",src:s.robot_avatar},null,8,co),e("div",ro,[e("div",null,[e("div",_o,M(s.robot_name),1),e("div",po,M(s.robot_intro),1)]),s.has_published==1?(n(),q(i,{key:0,checked:s.checked,"onUpdate:checked":P=>s.checked=P},null,8,["checked","onUpdate:checked"])):(n(),v("span",vo,[t(I(We)),l[1]||(l[1]=A(" 未发布"))]))])],10,uo))),128))])]),_:1},8,["open"])}}},mo=Y(fo,[["__scopeId","data-v-2ea00b78"]]),ko={class:"_mcp-box"},ho={key:0,class:"loading-box"},bo={class:"base-info-box"},go={class:"app-info"},yo=["src"],$o={class:"info-box"},Co={class:"left-box"},xo={class:"name"},wo={key:0,class:"status-tag finished"},Mo={key:1,class:"status-tag waiting"},To={class:"desc"},Ro={class:"right-box"},Po={class:"app-data"},So={class:"data-item"},Oo={class:"title"},Uo={class:"value"},Ao={class:"tools-box"},Io={class:"head-box"},Lo={key:0,class:"tools-list"},Fo={class:"left"},Do={class:"tit"},Go={class:"key"},Bo={class:"desc"},Eo={class:"params"},No={class:"params-box"},qo={class:"field"},zo={class:"name"},Wo={class:"type"},Vo={key:0,class:"required"},jo={class:"desc"},Ho={key:1,class:"empty-box"},Ko={key:2,class:"empty-box"},Zo={class:"mt4"},Jo={__name:"mcp-box",setup(O){const D=p(null),w=p(null),y=p(!0),m=p(!1),a=p(null),b=p([]),c=p([]),r=p(!1),R=p(!1),C=p(""),l=p(null);he(()=>{h()});function h(){y.value=!0,i()}function i(){Yt().then($=>{var f,Q,te;a.value=((f=$==null?void 0:$.data)==null?void 0:f.info)||{},c.value=((Q=$==null?void 0:$.data)==null?void 0:Q.tool_list)||{},a.value.status_bool=((te=a.value)==null?void 0:te.publish_status)==1,c.value.forEach(j=>{j.params=Ue(j.params,[])}),s()}).finally(()=>{y.value=!1})}function k(){const $=()=>{a.value.status_bool=!a.value.status_bool},f=()=>{m.value=!0,eo({server_id:a.value.id,publish_status:Number(a.value.status_bool)}).then(Q=>{S.success("操作完成")}).finally(()=>{m.value=!1}).catch(()=>{$()})};a.value.status_bool?f():W.confirm({title:"确认关闭MCP服务？",content:"关闭后，其他应用的位置都不可使用！确认关闭？",okText:"确定",cancelText:"取消",onOk:()=>f(),onCancel:()=>$()})}function s(){var $;b.value=[{title:"URL",value:`${window.location.origin}/mcp`},{title:"请求方式",value:"POST"},{title:"授权方式",value:"Service token / API key"},{title:"请求参数名",value:"Authorization"},{title:"API key",value:`Bearer ${($=a.value)==null?void 0:$.api_key}`}]}function g(){var f;let $=null;((f=a.value)==null?void 0:f.id)>0&&($={avatar:a.value.avatar,name:a.value.name,description:a.value.description,server_id:a.value.id}),D.value.show($)}function P(){W.confirm({title:"确认删除MCP服务？",content:"删除后，其他应用的位置都不可使用！确认删除？",okText:"确定",cancelText:"取消",onOk:()=>{Xt({server_id:a.value.id}).then(()=>{S.success("已删除"),i()})}})}function V(){w.value.show(c.value.map($=>$.robot_id))}function x($){l.value=$,C.value=$.name,r.value=!0}const u=$=>{$.target.value=$.target.value.replace(/[^a-zA-Z0-9_]/g,""),C.value=$.target.value};function U(){if(!C.value)return S.warning("请输入标识符");R.value=!0,oo({tool_id:l.value.id,name:C.value}).then($=>{l.value.name=C.value,r.value=!1,S.success("已保存")}).finally(()=>{R.value=!1})}function L($){W.confirm({title:"确认删除该工具？",okText:"确定",cancelText:"取消",onOk:()=>{so({tool_id:$.id}).then(()=>{S.success("已删除"),i()})}})}function H($){to({server_id:a.value.id,robot_id:$.toString()}).then(f=>{i(),S.success("已保存")})}return($,f)=>{const Q=ge,te=bt,j=ve,F=$e,se=ye,X=Ce,xe=gt,ce=$t,fe=Ct,we=be,le=W;return n(),v("div",ko,[y.value?(n(),v("div",ho,[t(Q)])):a.value.id>0?(n(),v(z,{key:1},[e("div",bo,[e("div",go,[e("img",{class:"avatar",src:a.value.avatar},null,8,yo),e("div",$o,[e("div",Co,[e("div",xo,[A(M(a.value.name)+" ",1),a.value.status_bool?(n(),v("span",wo,[t(I(ht)),f[3]||(f[3]=A(" 已发布"))])):(n(),v("span",Mo,[t(I(We)),f[4]||(f[4]=A(" 未发布"))]))]),e("div",To,M(a.value.description),1)]),e("div",Ro,[t(te,{checked:a.value.status_bool,"onUpdate:checked":f[0]||(f[0]=B=>a.value.status_bool=B),onChange:k,loading:m.value,"checked-children":"开","un-checked-children":"关"},null,8,["checked","loading"]),t(j,{onClick:V,type:"primary",ghost:"",icon:_e(I(ke))},{default:o(()=>f[5]||(f[5]=[A("添加工作流")])),_:1,__:[5]},8,["icon"]),t(X,null,{overlay:o(()=>[t(se,null,{default:o(()=>[t(F,{onClick:g},{default:o(()=>f[6]||(f[6]=[A("编辑")])),_:1,__:[6]}),t(F,{onClick:P},{default:o(()=>f[7]||(f[7]=[e("span",{class:"cFB363F"},"删除",-1)])),_:1,__:[7]})]),_:1})]),default:o(()=>[t(j,{icon:_e(I(pe))},null,8,["icon"])]),_:1})])])]),e("div",Po,[(n(!0),v(z,null,Z(b.value,(B,ae)=>(n(),v(z,{key:ae},[e("div",So,[e("div",Oo,M(B.title),1),e("div",Uo,M(B.value),1)]),t(xe,{type:"vertical",style:{height:"24px"}})],64))),128))])]),e("div",Ao,[e("div",Io,[t(I(yt),{class:"icon"}),A(" 工具列表（"+M(c.value.length||0)+"） ",1)]),c.value.length?(n(),v("div",Lo,[(n(!0),v(z,null,Z(c.value,(B,ae)=>(n(),v("div",{key:ae,class:"tools-item"},[e("div",Fo,[e("div",Do,M(B.robot_name),1),e("div",Go,"唯一标识符号："+M(B.name),1),e("div",Bo,M(B.robot_intro),1),e("div",Eo,[(n(!0),v(z,null,Z(B.params.slice(0,5),(K,ie)=>(n(),q(ce,{key:ie,bordered:!1},{default:o(()=>[A(M(K.key),1)]),_:2},1024))),128)),t(fe,{placement:"right"},{content:o(()=>[e("div",No,[(n(!0),v(z,null,Z(B.params,(K,ie)=>(n(),v("div",{key:ie,class:"param-item"},[e("div",qo,[e("span",zo,M(K.key),1),e("span",Wo,M(K.typ),1),K.required?(n(),v("span",Vo,"必填")):ee("",!0)]),e("div",jo,M(K.desc),1)]))),128))])]),default:o(()=>[f[8]||(f[8]=e("a",null,"参数",-1))]),_:2,__:[8]},1024)])]),t(X,null,{overlay:o(()=>[t(se,null,{default:o(()=>[t(F,{onClick:K=>x(B)},{default:o(()=>f[9]||(f[9]=[A("编辑标识符")])),_:2,__:[9]},1032,["onClick"]),t(F,{onClick:K=>L(B)},{default:o(()=>f[10]||(f[10]=[e("span",{class:"cFB363F"},"删除",-1)])),_:2,__:[10]},1032,["onClick"])]),_:2},1024)]),default:o(()=>[t(j,{size:"small",icon:_e(I(pe))},null,8,["icon"])]),_:2},1024)]))),128))])):(n(),v("div",Ho,[f[12]||(f[12]=e("img",{src:Pe},null,-1)),f[13]||(f[13]=e("div",{class:"title"},"暂未绑定工作流",-1)),t(j,{onClick:V,class:"btn",type:"primary"},{default:o(()=>f[11]||(f[11]=[A("立即绑定")])),_:1,__:[11]})]))])],64)):(n(),v("div",Ko,[f[15]||(f[15]=e("img",{src:Pe},null,-1)),f[16]||(f[16]=e("div",{class:"title"},"暂未添加工作流MCP插件",-1)),t(j,{onClick:g,class:"btn",type:"primary"},{default:o(()=>f[14]||(f[14]=[A("立即添加")])),_:1,__:[14]})])),t(ao,{ref_key:"mcpRef",ref:D,onOk:i},null,512),t(mo,{ref_key:"workflowRef",ref:w,onOk:H},null,512),t(le,{open:r.value,"onUpdate:open":f[2]||(f[2]=B=>r.value=B),"confirm-loading":R.value,title:"编辑标识符",onOk:U},{default:o(()=>[f[17]||(f[17]=e("div",null,"标识符",-1)),e("div",Zo,[t(we,{value:C.value,"onUpdate:value":f[1]||(f[1]=B=>C.value=B),onInput:u,placeholder:"请输入标识符",maxlength:32},null,8,["value"])])]),_:1,__:[17]},8,["open","confirm-loading"])])}}},Yo=Y(Jo,[["__scopeId","data-v-7299b4db"]]),Qo="data:image/svg+xml,%3csvg%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20class='design-iconfont'%3e%3crect%20width='32'%20height='32'%20rx='6'%20fill='%23E6EFFF'/%3e%3cpath%20d='M20.3753%2014.3385C21.8711%2014.3385%2023.0837%2013.126%2023.0837%2011.6302C23.0837%2010.1344%2021.8711%208.92188%2020.3753%208.92188C18.8796%208.92188%2017.667%2010.1344%2017.667%2011.6302C17.667%2013.126%2018.8796%2014.3385%2020.3753%2014.3385Z'%20stroke='%232475FC'%20stroke-width='1.66667'/%3e%3cpath%20d='M20.3753%2023.0885C21.8711%2023.0885%2023.0837%2021.876%2023.0837%2020.3802C23.0837%2018.8844%2021.8711%2017.6719%2020.3753%2017.6719C18.8796%2017.6719%2017.667%2018.8844%2017.667%2020.3802C17.667%2021.876%2018.8796%2023.0885%2020.3753%2023.0885Z'%20stroke='%232475FC'%20stroke-width='1.66667'/%3e%3cpath%20d='M11.6253%2014.3385C13.1211%2014.3385%2014.3337%2013.126%2014.3337%2011.6302C14.3337%2010.1344%2013.1211%208.92188%2011.6253%208.92188C10.1296%208.92188%208.91699%2010.1344%208.91699%2011.6302C8.91699%2013.126%2010.1296%2014.3385%2011.6253%2014.3385Z'%20stroke='%232475FC'%20stroke-width='1.66667'/%3e%3cpath%20d='M11.6253%2023.0885C13.1211%2023.0885%2014.3337%2021.876%2014.3337%2020.3802C14.3337%2018.8844%2013.1211%2017.6719%2011.6253%2017.6719C10.1296%2017.6719%208.91699%2018.8844%208.91699%2020.3802C8.91699%2021.876%2010.1296%2023.0885%2011.6253%2023.0885Z'%20stroke='%232475FC'%20stroke-width='1.66667'/%3e%3c/svg%3e",Xo={key:0,class:"checking-box"},es={class:"cont"},ts={class:"head-box"},os={class:"base-info-box"},ss=["src"],ns={class:"info-box"},ls={class:"left"},as={class:"name zm-line1"},is={key:0,class:"auth-tag"},us={key:1,class:"auth-tag fail"},ds={class:"right"},cs={class:"link"},rs={class:"link"},_s={class:"body-box"},ps={key:0,class:"no-auth-box"},vs={class:"main-tit"},fs={class:"extra-box"},ms={class:"update-time"},ks={class:"tools-box"},hs={class:"info"},bs={class:"tit"},gs={class:"desc"},ys={__name:"third-mcp-detail",emits:["del","edit","auth"],setup(O,{expose:D,emit:w}){const y=w,m=p(!1),a=p(!1),b=p(!1),c=p({});function r(k){c.value=k,m.value=!0}function R(){m.value=!1}function C(k){const s=()=>{a.value=!0,ue(!1),Se({provider_id:c.value.id}).then(g=>{setTimeout(()=>{a.value=!1,c.value.has_auth=1,i(),S.success("已验证，授权完成")},2e3)}).catch(g=>{c.value.has_auth=0,S.warning("授权失败："+g.message),a.value=!1}).finally(()=>{y("auth",c.value.has_auth),setTimeout(()=>{ue(!0)},500)})};k==2?W.confirm({title:"提示",content:"授权或者刷新应用列表都可能会影响已有工具的调用，确认继续操作吗？",onOk:()=>{s()}}):s()}function l(){y("edit",c.value)}function h(){y("del",c.value)}function i(k=!1){const s=()=>{Dt({provider_id:c.value.id}).then(g=>{let P=(g==null?void 0:g.data)||{};P.tools=Ue(P.tools,[]),P.up_time_text=Le(P.update_time),c.value=P,k&&S.success("刷新完成")}).finally(()=>{b.value=!1})};if(k){if(b.value)return;W.confirm({title:"提示",content:"刷新应用列表或者授权都可能会影响已有工具的调用，确认继续操作吗？",onOk:()=>{b.value=!0,ue(!1),Se({provider_id:c.value.id}).then(g=>{c.value.has_auth=1,s()}).catch(g=>{c.value.has_auth=0,S.warning("验证授权失败："+g.message),b.value=!1}).finally(()=>{y("auth",c.value.has_auth),ue(!0)})}})}else s()}return D({show:r,hide:R,refresh:i}),(k,s)=>{const g=ge,P=$e,V=ye,x=Ce,u=ve,U=Mt;return n(),q(U,{open:m.value,"onUpdate:open":s[5]||(s[5]=L=>m.value=L),placement:"right",width:"400px",headerStyle:{display:"none"},bodyStyle:{padding:0}},{default:o(()=>[a.value?(n(),v("div",Xo,[e("div",es,[t(g),s[6]||(s[6]=A(" 正在验证... "))])])):ee("",!0),e("div",ts,[e("div",os,[e("img",{class:"avatar",src:c.value.avatar},null,8,ss),e("div",ns,[e("div",ls,[e("div",as,M(c.value.name),1),e("div",null,[c.value.has_auth==1?(n(),v("div",is,"已授权")):(n(),v("div",us,"未授权"))])]),e("div",ds,[t(x,null,{overlay:o(()=>[t(V,null,{default:o(()=>[t(P,{onClick:E(l,["stop"])},{default:o(()=>s[7]||(s[7]=[A("编辑")])),_:1,__:[7]}),t(P,{onClick:E(h,["stop"])},{default:o(()=>s[8]||(s[8]=[e("span",{class:"cFB363F"},"删除",-1)])),_:1,__:[8]})]),_:1})]),default:o(()=>[t(I(pe),{class:"icon"})]),_:1}),t(I(xt),{onClick:s[0]||(s[0]=L=>m.value=!1),class:"icon"})])])]),e("div",cs,M(c.value.description),1),e("div",rs,M(c.value.url),1),c.value.has_auth==1?(n(),q(u,{key:0,class:"auth-btn",onClick:s[1]||(s[1]=L=>C(2))},{default:o(()=>s[9]||(s[9]=[A("重新授权")])),_:1,__:[9]})):(n(),q(u,{key:1,type:"primary",class:"auth-btn",onClick:s[2]||(s[2]=L=>C(1))},{default:o(()=>s[10]||(s[10]=[A("授 权")])),_:1,__:[10]}))]),e("div",_s,[c.value.has_auth!=1?(n(),v("div",ps,[s[11]||(s[11]=e("img",{src:Ft},null,-1)),s[12]||(s[12]=e("div",{class:"tit"},"需要授权",-1)),s[13]||(s[13]=e("div",{class:"desc"},"授权后，MCP工具将显示在这里",-1)),e("a",{class:"link",onClick:s[3]||(s[3]=L=>C(1))},"立即授权")])):(n(),v(z,{key:1},[e("div",vs,[e("span",null,M(c.value.tools.length)+"个可用工具",1),e("div",fs,[e("div",ms,M(c.value.up_time_text)+"更新",1),e("a",{class:"refresh-btn",onClick:s[4]||(s[4]=L=>i(!0))},[t(I(wt),{spin:b.value},null,8,["spin"]),s[14]||(s[14]=A(" 刷新 "))])])]),e("div",ks,[(n(!0),v(z,null,Z(c.value.tools,(L,H)=>(n(),v("div",{key:H,class:"tool-item"},[s[15]||(s[15]=e("img",{class:"cover",src:Qo},null,-1)),e("div",hs,[e("div",bs,M(L.name),1),e("div",gs,M(L.description),1)])]))),128))])],64))])]),_:1},8,["open"])}}},$s=Y(ys,[["__scopeId","data-v-bcef20f5"]]),Cs={key:0,class:"checking-box"},xs={class:"cont"},ws={class:"avatar-box"},Ms={key:0,class:"cFB363F"},Ts={class:"req-head-box"},Rs={__name:"third-mcp-store",emits:["ok"],setup(O,{expose:D,emit:w}){const y=w,m=p(0),a=p(!1),b=p(!1),c=p(!1),r=p(null),R=p(""),C={avatar:Oe,name:"",description:"",provider_id:"",url:"",request_timeout:"30",headers:[]},l=Ae({});function h(x=null){if(Object.assign(l,x||C),r.value=null,l.headers=[],x){m.value=x.id,l.provider_id=x.id;let u=JSON.parse(x.headers);for(let U in u)l.headers.push({key:U,value:u[U]})}R.value=JSON.stringify({headers:l.headers,url:l.url}),a.value=!0}function i(x){r.value=x}function k(){l.headers.push({key:"",value:""})}function s(x){l.headers.splice(x,1)}function g(){return R.value!=JSON.stringify({headers:l.headers,url:l.url})}function P(){const x=S.loading("保存完成，正在进行授权验证...",0);b.value=!0,setTimeout(()=>{ue(!1),Se({provider_id:m.value}).then(u=>{S.success("授权完成！")}).catch(u=>{S.warning("授权失败："+u.message)}).finally(()=>{x(),b.value=!1,a.value=!1,y("ok",l),setTimeout(()=>{ue(!0)},500)})},1800)}function V(){var x;try{if(c.value=!0,l.name=l.name.trim(),l.description=l.description.trim(),!l.name)throw"请输入MCP插件名称";if(!l.description)throw"请输入MCP插件描述";if(!l.url)throw"请输入服务端点的URL";if(!l.request_timeout)throw"请输入超时时间";let u={...l};r.value&&(u.avatar=(x=r.value)==null?void 0:x.file),u.headers={};for(let U of l.headers)U.key=U.key.trim(),U.value=U.value.trim(),U.key&&U.value&&(u.headers[U.key]=U.value);u.headers=JSON.stringify(u.headers),delete u.toools,Gt(u).then(U=>{let{provider_id:L}=(U==null?void 0:U.data)||{};m.value=L,g()?P():(y("ok",l),S.success("已保存"),a.value=!1)}).finally(()=>{c.value=!1})}catch(u){c.value=!1,S.error(u)}}return D({show:h}),(x,u)=>{const U=ge,L=be,H=qe,$=ze,f=Tt,Q=ve,te=Ne,j=W;return n(),q(j,{open:a.value,"onUpdate:open":u[5]||(u[5]=F=>a.value=F),zIndex:1002,title:l.provider_id?"编辑MCP":"添加MCP",width:"472px","confirm-loading":c.value,onOk:V},{default:o(()=>[b.value?(n(),v("div",Cs,[e("div",xs,[t(U),u[6]||(u[6]=A(" 正在验证... "))])])):ee("",!0),e("div",ws,[t(Be,{value:l.avatar,"onUpdate:value":u[0]||(u[0]=F=>l.avatar=F),onChange:i},null,8,["value"]),u[7]||(u[7]=e("div",{class:"tip-info"},"点击替换，建议尺寸为100*100px，大小不超过100kb",-1))]),t(te,{class:"form-box",labelAlign:"left"},{default:o(()=>[t(H,{label:"MCP插件名称",required:"",colon:!1},{default:o(()=>[t(L,{value:l.name,"onUpdate:value":u[1]||(u[1]=F=>l.name=F),placeholder:"请输入MCP插件名称，最多20个字",maxlength:20},null,8,["value"])]),_:1}),t(H,{label:"描述",colon:!1},{default:o(()=>[t($,{value:l.description,"onUpdate:value":u[2]||(u[2]=F=>l.description=F),"auto-size":{minRows:2,maxRows:5},placeholder:"请输入描述",maxlength:120},null,8,["value"])]),_:1}),u[11]||(u[11]=e("div",{class:"tit-box"},"配置信息",-1)),t(H,{label:"插件URL",colon:!1},{default:o(()=>[t(L,{value:l.url,"onUpdate:value":u[3]||(u[3]=F=>l.url=F),placeholder:"服务端点的URL"},null,8,["value"]),l.provider_id?(n(),v("div",Ms,"修改服务端点 URL 可能会影响使用当前 MCP的应用")):ee("",!0)]),_:1}),t(H,{label:"超时时间",colon:!1},{default:o(()=>[t(f,{value:l.request_timeout,"onUpdate:value":u[4]||(u[4]=F=>l.request_timeout=F),precision:0,style:{width:"100%"},placeholder:"请输入超时时间"},null,8,["value"])]),_:1}),t(H,{label:"请求头",colon:!1},{default:o(()=>[u[10]||(u[10]=e("div",{class:"tip-info"},"发送到 MCP 服务器的额外 HTTP 请求头",-1)),e("div",Ts,[u[9]||(u[9]=e("div",{class:"req-head-item"},[e("div",{class:"tit"},"请求头名称"),e("div",{class:"tit"},"请求头值")],-1)),(n(!0),v(z,null,Z(l.headers,(F,se)=>(n(),v("div",{key:se,class:"req-head-item"},[t(L,{value:F.key,"onUpdate:value":X=>F.key=X,placeholder:"请输入"},null,8,["value","onUpdate:value"]),t(L,{value:F.value,"onUpdate:value":X=>F.value=X,placeholder:"请输入"},null,8,["value","onUpdate:value"]),t(I(Rt),{onClick:X=>s(se)},null,8,["onClick"])]))),128)),t(Q,{class:"add-btn",type:"dashed",icon:_e(I(ke)),onClick:k},{default:o(()=>u[8]||(u[8]=[A("添加请求头")])),_:1,__:[8]},8,["icon"])])]),_:1,__:[10]})]),_:1,__:[11]})]),_:1},8,["open","title","confirm-loading"])}}},Ve=Y(Rs,[["__scopeId","data-v-cdb4e5ed"]]),Ps={class:"_mcp-box"},Ss={key:0,class:"loading-box"},Os={key:1,class:"list-box"},Us=["onClick"],As={class:"base-info-box"},Is=["src"],Ls={class:"info-box"},Fs={class:"name zm-line1"},Ds={key:0,class:"auth-tag"},Gs={key:1,class:"auth-tag fail"},Bs={class:"zm-line1"},Es={class:"bottom"},Ns={class:"extra-box"},qs={class:"extra-item"},zs={class:"extra-item"},Ws={key:2,class:"empty-box"},Vs={__name:"third-mcp-box",setup(O,{expose:D}){const w=p(null),y=p(null),m=p(!0),a=p([]);he(()=>{b()});function b(){m.value=!0,r()}function c(){r(),w.value&&w.value.refresh()}function r(){Bt().then(i=>{let k=(i==null?void 0:i.data)||[];k.forEach(s=>{s.tools=Ue(s.tools,[]),s.up_time_text=Le(s.update_time)}),a.value=k}).finally(()=>{m.value=!1})}function R(i){w.value.show(i)}function C(){y.value.show()}function l(i){y.value.show(i)}function h(i){W.confirm({title:"确认删除该MCP插件？",content:"删除后，其他应用的位置都不可使用！确认删除？",okText:"确定",cancelText:"取消",onOk:()=>{Et({provider_id:i.id}).then(()=>{S.success("已删除"),r(),w.value&&w.value.hide()})}})}return D({update:c}),(i,k)=>{const s=ge,g=ve,P=$e,V=ye,x=Ce;return n(),v("div",Ps,[m.value?(n(),v("div",Ss,[t(s)])):a.value.length?(n(),v("div",Os,[(n(!0),v(z,null,Z(a.value,(u,U)=>(n(),v("div",{onClick:L=>R(u),key:U,class:"app-item"},[e("div",As,[e("img",{class:"avatar",src:u.avatar},null,8,Is),e("div",Ls,[e("div",Fs,M(u.name),1),e("div",null,[u.has_auth==1?(n(),v("div",Ds,"已授权")):(n(),v("div",Gs,"未授权"))])])]),e("div",Bs,M(u.url),1),e("div",Es,[e("div",Ns,[e("div",qs,"可用工具："+M(u.tools.length),1),e("div",zs,M(u.up_time_text)+"更新",1)]),t(x,null,{overlay:o(()=>[t(V,null,{default:o(()=>[t(P,{onClick:E(L=>l(u),["stop"])},{default:o(()=>k[1]||(k[1]=[A("编辑")])),_:2,__:[1]},1032,["onClick"]),t(P,{onClick:E(L=>h(u),["stop"])},{default:o(()=>k[2]||(k[2]=[e("span",{class:"cFB363F"},"删除",-1)])),_:2,__:[2]},1032,["onClick"])]),_:2},1024)]),default:o(()=>[t(g,{onClick:k[0]||(k[0]=E(()=>{},["stop"])),size:"small",icon:_e(I(pe))},null,8,["icon"])]),_:2},1024)])],8,Us))),128))])):(n(),v("div",Ws,[k[4]||(k[4]=e("img",{src:Pe},null,-1)),k[5]||(k[5]=e("div",{class:"title"},"暂未添加外部MCP插件",-1)),t(g,{onClick:C,class:"btn",type:"primary"},{default:o(()=>k[3]||(k[3]=[A("立即添加")])),_:1,__:[3]})])),t($s,{ref_key:"mcpDetailRef",ref:w,onDel:h,onEdit:l,onAuth:r},null,512),t(Ve,{ref_key:"mcpStoreRef",ref:y,onOk:c},null,512)])}}},js=Y(Vs,[["__scopeId","data-v-5a0db352"]]),Hs={class:"_mcp_container"},Ks={class:"tabs-box"},Zs={__name:"mcp-panel",setup(O,{expose:D}){const w=Fe(),y=p(null),m=p(Number(localStorage.getItem("zm:chatwiki:mcp:active")||1));he(()=>{w.query.mcp>0&&a(Number(w.query.mcp))});function a(c){m.value=c,localStorage.setItem("zm:chatwiki:mcp:active",c)}function b(){m.value==2&&y.value.update()}return D({update:b}),(c,r)=>(n(),v("div",Hs,[e("div",Ks,[e("div",{class:de(["tab-item",{active:m.value==1}]),onClick:r[0]||(r[0]=R=>a(1))},"工作流MCP",2),e("div",{class:de(["tab-item",{active:m.value==2}]),onClick:r[1]||(r[1]=R=>a(2))},"外部MCP",2)]),m.value==1?(n(),q(Yo,{key:0,ref_key:"mcpRef",ref:y},null,512)):(n(),q(js,{key:1,ref_key:"mcpRef",ref:y},null,512))]))}},Js=Y(Zs,[["__scopeId","data-v-9c2db965"]]),Ys={class:"robot-page"},Qs={class:"list-toolbar"},Xs={class:"toolbar-box"},en={class:"toolbar-box"},tn={class:"create-action"},on=["src"],sn={class:"create-action"},nn=["src"],ln={class:"create-action"},an=["src"],un={class:"create-action"},dn=["src"],cn={key:1,class:"list-group-box"},rn={key:0,class:"group-head-box"},_n={class:"head-title"},pn={class:"search-box"},vn={class:"classify-box"},fn=["onClick"],mn={class:"classify-title"},kn={class:"right-content"},hn={key:0,class:"btn-box"},bn={class:"hover-btn-wrap"},gn=["onClick"],yn=["onClick"],$n={class:"robot-scroll-box"},Cn={class:"list-box"},xn={key:0,class:"empty-box"},wn=["onClick"],Mn={class:"list-item"},Tn={class:"robot-info"},Rn=["src"],Pn={class:"robot-info-content"},Sn={class:"robot-name"},On={class:"robot-type-tag"},Un={class:"robot-desc"},An=["onClick"],In=["onClick"],Ln=["onClick"],Fn=["onClick"],Dn=["onClick"],Gn=["onClick"],Bn={__name:"robot-list",setup(O){const D=Fe(),w=p([{title:"全部 (0)",value:"2"},{title:"聊天机器人 (0)",value:"0"},{title:"工作流 (0)",value:"1"},{title:"MCP插件",value:"3"}]),y=Qe();let{role_permission:m,role_type:a}=y;const b=Te(()=>a==1||m.includes("RobotCreate")),c=p(null),r=p("2"),R=p(""),C=p([]);let l="robot-list-hide-group-key";const h=p(localStorage.getItem(l)==1),i=()=>{h.value=!h.value,localStorage.setItem(l,h.value?1:0)},k=Te(()=>{let _=C.value;return R.value!=""&&(_=_.filter(d=>d.group_id==R.value)),r.value==2?_:_.filter(d=>d.application_type==r.value)}),s=()=>{g(),le()},g=()=>{Ge().then(_=>{let d=0,N=0,G=0;_.data.forEach(oe=>{oe.application_type==0?N++:G++,d++}),w.value=[{title:"全部 ("+d+")",value:"2"},{title:"聊天机器人 ("+N+")",value:"0"},{title:"工作流 ("+G+")",value:"1"},{title:"MCP插件",value:"3"}],C.value=_.data}).catch(()=>{})},P=p(null),V=p(null),x=p(null),u=_=>{P.value.open(_),P.value.setGroupId(R.value)},U=()=>{x.value.show()},L=()=>{V.value.open()},H=_=>{g(),$(_)},$=({id:_,robot_key:d,application_type:N})=>{localStorage.setItem("last_local_robot_id",_),N==0?window.open(`/#/robot/config/basic-config?id=${_}&robot_key=${d}`,"_blank","noopener"):window.open(`/#/robot/config/workflow?id=${_}&robot_key=${d}`,"_blank","noopener")},f=_=>{if(st(_.id)!=4)return S.error("您没有删除机器人的权限");let N=3,G=W.confirm({title:`删除机器人${_.robot_name}`,icon:t(Re),content:"您确定要删除此机器人吗？",okText:N+" 确 定",okType:"danger",cancelText:"取 消",okButtonProps:{disabled:!0},onOk(){Q(_)},onCancel(){}}),oe=setInterval(()=>{N==1?(G.update({okText:"确 定",okButtonProps:{disabled:!1}}),clearInterval(oe),oe=void 0):(N-=1,G.update({okText:N+" 确 定",okButtonProps:{disabled:!0}}))},1e3)},Q=({id:_})=>{ut({id:_}).then(()=>{S.success("删除成功"),g()})},te=_=>{let d=3,N=W.confirm({title:`复制机器人${_.robot_name}`,icon:t(Re),content:"您确定要复制此机器人吗？",okText:d+" 确 定",okType:"danger",cancelText:"取 消",okButtonProps:{disabled:!0},onOk(){j(_)},onCancel(){}}),G=setInterval(()=>{d==1?(N.update({okText:"确 定",okButtonProps:{disabled:!1}}),clearInterval(G),G=void 0):(d-=1,N.update({okText:d+" 确 定",okButtonProps:{disabled:!0}}))},1e3)},j=({id:_})=>{dt({id:_}).then(()=>{S.success("复制成功"),g()})},F=_=>{const{openUrlWithToken:d}=Jt();d(`/manage/robotExport?id=${_.id}`)},se=_=>{window.open(`#/robot/test?robot_key=${_.robot_key}&id=${_.id}`)},X=_=>{window.open(`#/robot/config/session-record?robot_key=${_.robot_key}&id=${_.id}`)},xe=_=>{window.open(`#/robot/config/statistical_analysis?robot_key=${_.robot_key}&id=${_.id}`)},ce=p(""),fe=p([]),we=Te(()=>fe.value.filter(_=>_.group_name.includes(ce.value))),le=()=>{De({application_type:r.value==2?null:r.value}).then(_=>{let d=_.data||[],N=0;d.forEach(G=>{N+=+G.total}),fe.value=[{group_name:"全部",total:N,id:""},...d]})},B=_=>{R.value=_.id,g()},ae=p(null),K=_=>{ae.value.show({..._})},ie=p(null),je=_=>{ie.value.show({..._})},He=_=>{W.confirm({title:`确认删除分组${_.group_name}`,icon:t(Re),content:"",okText:"确认",okType:"danger",cancelText:"取消",onOk(){it({id:_.id}).then(()=>{S.success("删除成功"),le(),R.value==_.id&&(R.value="",g())})}})},Ke=()=>{c.value&&c.value.update()};return he(()=>{r.value=D.query.active||"2",g(),le()}),(_,d)=>{const N=ve,G=$e,oe=ye,Me=Ce,re=Pt,Ze=be,Ie=nt,Je=At,me=ot;return n(),v("div",Ys,[d[17]||(d[17]=e("h3",{class:"page-title"},"应用",-1)),t(It,{class:"mb-16",title:"使用说明"},{default:o(()=>d[9]||(d[9]=[e("div",null,[e("p",null," 1、应用包括两种类型：聊天机器人、工作流。聊天机器人适合新手用户，关联知识库后只需简单配置，即可创建一个基于私有知识库的问答机器人。工作流适合高级用户，利用系统预制节点自定义任务流程，适合解决复杂任务。 "),e("p",null,"2、发现模块也提供了丰富模版，可以根据需要选择适合模版快速创建应用。")],-1)])),_:1,__:[9]}),e("div",Qs,[e("div",Xs,[t(Lt,{tabs:w.value,onChange:le,value:r.value,"onUpdate:value":d[0]||(d[0]=T=>r.value=T)},null,8,["tabs","value"])]),e("div",en,[b.value?(n(),q(Me,{key:0},{overlay:o(()=>[t(oe,null,{default:o(()=>[t(G,{onClick:d[2]||(d[2]=E(T=>u(0),["prevent"]))},{default:o(()=>[e("span",tn,[e("img",{class:"icon",src:I(Xe),alt:""},null,8,on),d[11]||(d[11]=e("span",null,"聊天机器人",-1))])]),_:1}),t(G,{onClick:d[3]||(d[3]=E(T=>u(1),["prevent"]))},{default:o(()=>[e("span",sn,[e("img",{class:"icon",src:I(et),alt:""},null,8,nn),d[12]||(d[12]=e("span",null,"工作流",-1))])]),_:1}),t(G,{onClick:E(U,["prevent"])},{default:o(()=>[e("span",ln,[e("img",{class:"icon",src:I(Oe),alt:""},null,8,an),d[13]||(d[13]=e("span",null,"外部MCP",-1))])]),_:1}),t(G,{onClick:L},{default:o(()=>[e("span",un,[e("img",{class:"icon",src:I(tt),alt:""},null,8,dn),d[14]||(d[14]=e("span",null,"导入csl创建",-1))])]),_:1})]),_:1})]),default:o(()=>[t(N,{type:"primary",onClick:d[1]||(d[1]=E(()=>{},["prevent"]))},{icon:o(()=>[t(I(ke))]),default:o(()=>[d[10]||(d[10]=A(" 创建应用 "))]),_:1,__:[10]})]),_:1})):ee("",!0)])]),r.value==3?(n(),q(Js,{key:0,ref_key:"mcpPanelRef",ref:c},null,512)):(n(),v("div",cn,[e("div",{class:de(["group-list-box",{"hide-group":h.value}])},[t(Ie,{style:{"padding-right":"16px"}},{default:o(()=>[h.value?ee("",!0):(n(),v("div",rn,[e("div",_n,[d[15]||(d[15]=e("div",null,"机器人分组",-1)),t(re,{title:"新建分组"},{default:o(()=>[e("div",{class:"hover-btn-wrap",onClick:d[4]||(d[4]=T=>K({}))},[t(I(ke))])]),_:1})]),e("div",pn,[t(Ze,{value:ce.value,"onUpdate:value":d[6]||(d[6]=T=>ce.value=T),allowClear:"",placeholder:"搜索分组",style:{width:"100%"}},{suffix:o(()=>[t(I(St),{onClick:d[5]||(d[5]=E(()=>{},["stop"]))})]),_:1},8,["value"])])])),e("div",vn,[(n(!0),v(z,null,Z(we.value,T=>(n(),v("div",{class:de(["classify-item",{active:T.id==R.value}]),onClick:J=>B(T),key:T.id},[e("div",mn,M(T.group_name),1),e("div",kn,[e("div",{class:de(["num",{"num-block":T.id<=0}])},M(T.total),3),T.id>0?(n(),v("div",hn,[t(Me,{placement:"bottomRight"},{overlay:o(()=>[t(oe,null,{default:o(()=>[t(G,null,{default:o(()=>[e("div",{onClick:E(J=>K(T),["stop"])},"重命名",8,gn)]),_:2},1024),t(G,null,{default:o(()=>[e("div",{onClick:E(J=>He(T),["stop"])},"删 除",8,yn)]),_:2},1024)]),_:2},1024)]),default:o(()=>[e("div",bn,[t(I(pe))])]),_:2},1024)])):ee("",!0)])],10,fn))),128))])]),_:1}),t(re,{placement:"right",title:h.value?"展开分组":"收起分组"},{default:o(()=>[e("div",{class:"hide-group-box",onClick:i},[h.value?(n(),q(I(Ut),{key:1})):(n(),q(I(Ot),{key:0}))])]),_:1},8,["title"])],2),e("div",$n,[t(Ie,{style:{"padding-right":"16px"}},{default:o(()=>[e("div",Cn,[k.value.length==0?(n(),v("div",xn,[t(Je)])):ee("",!0),(n(!0),v(z,null,Z(k.value,T=>(n(),v("div",{class:"list-item-wrapper",key:T.id,onClick:J=>$(T)},[e("div",Mn,[e("div",Tn,[e("img",{class:"robot-avatar",src:T.robot_avatar,alt:""},null,8,Rn),e("div",Pn,[e("div",Sn,M(T.robot_name),1),e("div",On,M(T.application_type==0?"聊天机器人":"工作流"),1)])]),e("div",Un,M(T.robot_intro),1),e("div",{class:"robot-action",onClick:d[8]||(d[8]=E(()=>{},["stop"]))},[t(re,{title:"聊天测试"},{default:o(()=>[e("div",{class:"robot-action-item",onClick:E(J=>se(T),["stop"])},[t(me,{class:"action-icon",name:"chat"})],8,An)]),_:2},1024),t(re,{title:"会话记录"},{default:o(()=>[e("div",{class:"robot-action-item",onClick:E(J=>X(T),["stop"])},[t(me,{class:"action-icon",name:"session"})],8,In)]),_:2},1024),t(re,{title:"统计分析"},{default:o(()=>[e("div",{class:"robot-action-item",onClick:E(J=>xe(T),["stop"])},[t(me,{class:"action-icon",name:"analysis"})],8,Ln)]),_:2},1024),t(Me,null,{overlay:o(()=>[t(oe,null,{default:o(()=>[t(G,null,{default:o(()=>[e("a",{class:"delete-text-color",href:"javascript:;",onClick:J=>f(T)},"删 除",8,Fn)]),_:2},1024),t(G,null,{default:o(()=>[e("div",{onClick:E(J=>je(T),["stop"])},"修改分组",8,Dn)]),_:2},1024),t(G,null,{default:o(()=>[e("a",{class:"copy-text-color",href:"javascript:;",onClick:J=>te(T)},"复 制",8,Gn)]),_:2},1024),t(G,{onClick:J=>F(T)},{default:o(()=>d[16]||(d[16]=[e("span",null,"导出为csl",-1)])),_:2,__:[16]},1032,["onClick"])]),_:2},1024)]),default:o(()=>[e("div",{class:"robot-action-item",onClick:d[7]||(d[7]=E(()=>{},["stop"]))},[t(me,{class:"action-icon",name:"point-h"})])]),_:2},1024)])])],8,wn))),128))])]),_:1})])])),t(ct,{ref_key:"addRobotAlertRef",ref:P,onOk:s},null,512),t(rt,{ref_key:"addGroupRef",ref:ae,onOk:s},null,512),t(Zt,{ref_key:"editGroupRef",ref:ie,onOk:s},null,512),t(Vt,{ref_key:"importCslAlertRef",ref:V,onOk:H},null,512),t(Ve,{ref_key:"thirdMcpRef",ref:x,onOk:Ke},null,512)])}}},ol=Y(Bn,[["__scopeId","data-v-a04449ef"]]);export{ol as default};
