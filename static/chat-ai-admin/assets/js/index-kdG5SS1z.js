import{b as L,aa as M,e as X,cq as H,d as K}from"../../index-CuFGOJXl.js";import{f as p,r as N,a1 as I,_ as d,a2 as i,k as e,a5 as t,u as C,Y as v,F as S,a9 as B,G as f,ae as j,e as Q,o as W,ab as Z,ad as V,a7 as w,aa as tt,l as A}from"./vue-chunks-yZ4gwLzA.js";import{_ as et}from"./main-tab-Bc5qv-6k.js";import{E as at}from"./empty-box-BtBuqm69.js";import{L as ot}from"./loading-box-Bi7OKboQ.js";/* empty css                                                                     */import{k as st,F as nt,e as lt,D as it,g as dt,b as ct,c as ut,u as rt,v as _t,I as Y,M as D,x as pt,ae as mt,aN as vt,a5 as ft,p as gt,B as bt,X as yt,bF as kt,O as U,a as xt}from"./ui-antd-BKjlZQNA.js";import"./utils-smNh_pj2.js";import"./list-tabs-BFnVvZDT.js";import"./index-DhTdak07.js";import"./empty-BFmzY9bl.js";const ht={class:"app-box"},wt={class:"info"},Ct={class:"right"},Tt={__name:"release-modal",setup(b){const y=p(!1),T=N({appid:void 0});return($,o)=>{const m=st,n=ut,k=ct,u=it,r=lt,h=_t,_=rt,R=Y,E=nt,F=D;return d(),I(F,{open:y.value,"onUpdate:open":o[1]||(o[1]=g=>y.value=g),title:"请选择需要上架的应用",width:"660px"},{default:i(()=>[e(m,{type:"info",class:"zm-alert-info mt16",message:"上架工作流时请提前清除工作流中引用的apikey等授权、密钥信息，避免个人资产损失已上架应用再次上架时，会覆盖上次上架的内容"}),e(E,{class:"mt24",layout:"vertical"},{default:i(()=>[e(r,{label:"上架应用",required:""},{default:i(()=>[e(u,null,{overlay:i(()=>[e(k,null,{default:i(()=>[(d(),v(S,null,B(5,g=>e(n,{key:g},{default:i(()=>[...o[4]||(o[4]=[t("div",{class:"app-item"},[t("img",{class:"avatar",src:"https://xkf-upload.oss-cn-hangzhou.aliyuncs.com/dev/p/chat_wiki_plugin/1/0/202511/45/6b83aca346be5415bdfd349bb49111.jpg"}),t("span",null,"小红书账号拆解神器")],-1)])]),_:1})),64))]),_:1})]),default:i(()=>[t("div",ht,[o[3]||(o[3]=t("img",{class:"avatar",src:"https://xkf-upload.oss-cn-hangzhou.aliyuncs.com/dev/p/chat_wiki_plugin/1/0/202511/45/6b83aca346be5415bdfd349bb49111.jpg"},null,-1)),t("div",wt,[o[2]||(o[2]=t("div",{class:"left"},[t("div",{class:"name"},"同程旅行规划师"),t("div",{class:"desc zm-line2"}," “深度解析八字命理，精准预测人生运势。为您揭开八字中隐藏的能量与未来机遇，更能绘制八字意象图文，具象呈现命运密.“深度解析八字命理，精准预测人生运势。为您揭开八字中隐藏的能量与未来机遇，更能绘制八字意象图文，具象呈现命运密. ")],-1)),t("div",Ct,[e(C(dt),{class:"zm-pointer"})])])])]),_:1}),o[5]||(o[5]=t("div",{class:"last-time"},"上次上架时间：2025-10-11 15:00，上传后会覆盖原有模板",-1))]),_:1}),e(r,{label:"上架分类"},{default:i(()=>[e(_,{value:T.appid,"onUpdate:value":o[0]||(o[0]=g=>T.appid=g),placeholder:"请选择上架分类"},{default:i(()=>[e(h,{value:"jack"},{default:i(()=>[...o[6]||(o[6]=[f("Jack",-1)])]),_:1}),e(h,{value:"lucy"},{default:i(()=>[...o[7]||(o[7]=[f("Lucy",-1)])]),_:1}),e(h,{value:"Yiminghe"},{default:i(()=>[...o[8]||(o[8]=[f("yiminghe",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),e(r,{label:"模板作者",required:""},{default:i(()=>[e(R,{placeholder:"请输入模板作者名称"})]),_:1})]),_:1})]),_:1},8,["open"])}}},$t=L(Tt,[["__scopeId","data-v-acd432f7"]]),zt={key:0,class:"app-item"},It={class:"status-tag ok"},Rt={class:"status-tag fail"},St={class:"status-tag waiting"},Dt={__name:"apply-modal",setup(b){const y=p(!1),T=p(!1),$=p([]),o=p([{title:"应用名称",dataIndex:"name",width:200},{title:"应用类型",dataIndex:"type",width:100},{title:"提交时间",dataIndex:"ctrate_time",width:160},{title:"审核状态",dataIndex:"status",width:100},{title:"操作",dataIndex:"operate",width:100}]);for(let m=0;m<5;m++)$.value.push({id:m+1,type:"工作流",ctrate_time:"22-11-28 17:07"});return(m,n)=>{const k=gt,u=bt,r=pt,h=D;return d(),I(h,{open:y.value,"onUpdate:open":n[0]||(n[0]=_=>y.value=_),title:"模板审核结果",width:"730px"},{default:i(()=>[e(r,{loading:T.value,"data-source":$.value,columns:o.value,pagination:!1},{bodyCell:i(({column:_,record:R})=>[_.dataIndex==="name"?(d(),v("div",zt,[...n[1]||(n[1]=[t("img",{class:"avatar",src:"https://xkf-upload.oss-cn-hangzhou.aliyuncs.com/dev/p/chat_wiki_plugin/1/0/202511/45/6b83aca346be5415bdfd349bb49111.jpg"},null,-1),t("span",null,"小红书账号拆解神器",-1)])])):_.dataIndex==="status"?(d(),v(S,{key:1},[t("span",It,[e(C(mt)),n[2]||(n[2]=f(" 审核通过",-1))]),t("span",Rt,[e(C(vt)),n[3]||(n[3]=f(" 审核拒绝",-1))]),t("span",St,[e(C(ft)),n[4]||(n[4]=f(" 审核中",-1))]),e(k,null,{default:i(()=>[...n[5]||(n[5]=[t("div",{class:"tip-info zm-line1"},"（提示词不合规,提示词不合规提示词不合规提示词不合规",-1)])]),_:1})],64)):_.dataIndex==="operate"?(d(),I(u,{key:2,type:"link",class:"pd0"},{default:i(()=>[...n[6]||(n[6]=[f("撤回",-1)])]),_:1})):j("",!0)]),_:1},8,["loading","data-source","columns"])]),_:1},8,["open"])}}},Et=L(Dt,[["__scopeId","data-v-a8411eed"]]),Ft=(b={})=>M.get({url:"/manage/getRobotTemplateCategoryList",params:b}),Nt=(b={})=>M.get({url:"/manage/getRobotTemplateList",params:b}),Bt=(b={})=>M.post({url:"/manage/useRobotTemplate",data:b}),Lt={class:"_container"},Mt={class:"header"},Ot={class:"main-tab-box"},qt={class:"content"},Vt={class:"left-box hide-scrollbar"},At={class:"cate-box"},Ut={key:0,class:"count"},jt=["onClick"],Yt={class:"count"},Gt={class:"right-box"},Jt={class:"filter-box"},Pt={class:"_plugin-box"},Xt={key:1,class:"plugin-list"},Ht={class:"base-info"},Kt=["src"],Qt={class:"info"},Wt={class:"head"},Zt={class:"name zm-line1"},te={class:"source"},ee=["src"],ae={class:"desc zm-line"},oe={class:"action-box"},se={class:"left"},ne={class:"right"},le=["onClick"],ie={__name:"index",setup(b){const y=Z(),T=tt(),$=p(null);p(localStorage.getItem("zm:explore:active")||"4");const o=p(!0),m=p([]),n=p([]),k=p(0),u=N({keyword:"",category:null}),r=N({current:1,pageSize:50,total:0}),h=X(),{companyInfo:_}=h,R=Q(()=>_==null?void 0:_.version);W(()=>{y.query.active>1&&$.value.change(y.query.active),E()});function E(){F(),g()}function F(){Ft().then(l=>{let a=(l==null?void 0:l.data)||[];k.value=0,a.map(c=>k.value+=Number((c==null?void 0:c.template_count)||0)),n.value=a})}async function g(){var a;o.value=!0;let l={page:r.current,size:r.pageSize};u.keyword&&(l.keyword=u.keyword),u.category&&(l.category_id=(a=u.category)==null?void 0:a.id),Nt(l).then(c=>{var s,x;let z=((s=c==null?void 0:c.data)==null?void 0:s.data)||[];z.forEach(P=>{}),m.value=z,r.total=Number(((x=c==null?void 0:c.data)==null?void 0:x.total)||0)}).finally(()=>{o.value=!1})}function O(){r.current=1,r.total=0,g()}function q(l){u.category=l,O()}function G(l,a){return l=Number(l.replace(/\D/g,"")),a=Number(a.replace(/\D/g,"")),l>=a}function J(l){const a=()=>{Bt({template_id:l.id,csl_url:l.csl_url}).then(c=>{xt.success("使用成功"),g();const{id:z,robot_key:s}=c.data,x=T.resolve({path:"/robot/config/workflow",query:{id:z,robot_key:s}});window.open(x.href,"_blank")})};G(R.value,l.version)?D.confirm({title:"提示",content:`确定使用模板【${l.name}】创建应用吗?`,icon:A(U),okText:"确 认",cancelText:"取 消",onOk:a}):D.confirm({title:"提示",content:"当前系统版本过低，可能无法使用此模板；请您升级到最新版本后使用！",icon:A(U),okText:"继续使用",cancelText:"取 消",onOk:a})}return(l,a)=>{const c=Y,z=K;return d(),v("div",Lt,[t("div",Mt,[t("div",Ot,[e(et,{ref_key:"tabRef",ref:$},null,512)])]),t("div",qt,[t("div",Vt,[a[3]||(a[3]=t("div",{class:"title"},"模板分类",-1)),t("div",At,[t("div",{class:V(["cate-item",{active:!u.category}]),onClick:a[0]||(a[0]=s=>q(null))},[a[2]||(a[2]=t("div",null,"全部",-1)),k.value>0?(d(),v("span",Ut,w(k.value),1)):j("",!0)],2),(d(!0),v(S,null,B(n.value,s=>{var x;return d(),v("div",{key:s.id,class:V(["cate-item",{active:s.id==((x=u.category)==null?void 0:x.id)}]),onClick:P=>q(s)},[t("div",null,w(s.name),1),t("span",Yt,w(s.template_count||0),1)],10,jt)}),128))])]),t("div",Gt,[t("div",Jt,[e(c,{value:u.keyword,"onUpdate:value":a[1]||(a[1]=s=>u.keyword=s),valueModifiers:{trim:!0},onChange:O,style:{width:"360px"},allowClear:"",placeholder:"输入名称、描述搜索"},{suffix:i(()=>[e(C(yt))]),_:1},8,["value"]),a[4]||(a[4]=t("div",null,null,-1))]),t("div",Pt,[o.value?(d(),I(ot,{key:0})):m.value.length?(d(),v("div",Xt,[(d(!0),v(S,null,B(m.value,s=>(d(),v("div",{key:s.id,class:"plugin-item"},[t("div",Ht,[t("img",{class:"avatar",src:s.avatar||C(H)},null,8,Kt),t("div",Qt,[t("div",Wt,[t("span",Zt,w(s.name),1)]),t("div",te,[t("img",{class:"author-avatar",src:s.account_avatar},null,8,ee),f(" "+w(s.author),1)])])]),t("div",ae,w(s.description),1),t("div",oe,[t("div",se,[e(C(kt)),f(" "+w(s.use_count||0),1)]),t("div",ne,[t("a",{onClick:x=>J(s)},[e(z,{name:"icon-rocket"}),a[5]||(a[5]=f(" 使用模板",-1))],8,le)])])]))),128))])):(d(),I(at,{key:2,title:"暂无可用插件"}))])])]),e($t),e(Et)])}}},ye=L(ie,[["__scopeId","data-v-e893dbfb"]]);export{ye as default};
