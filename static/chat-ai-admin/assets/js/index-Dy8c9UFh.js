import{c as u,ah as H,r as N,w as te,a as _,p as o,F as R,l as F,ag as O,b as a,q as I,u as b,h as U,y as e,v as g,t as s,_ as j,e as D,x as J,aj as oe,Y as ae,E as V,m as z,a1 as se,j as ne,C as re,n as E}from"./vue-chunks-BdaA73Wf.js";import{u as le}from"./global-Dp85OI1C.js";import{u as A,c as K,e as Q,_ as G,d as q,r as ie,f as ce}from"../../index-DSFcP5NQ.js";import{a as ue,L as _e}from"./locale-dropdown-Dfe_qzHJ.js";import{g as de}from"./index-Cg7-0swo.js";import{_ as T}from"./emoji-mart-BBMRoEa3.js";import{D as pe,f as X,g as Z,h as W,i as ee,j as me,k as ve,U as be,F as Y,m as he,c as ye,d as fe,M as ge,b as ke}from"./ui-antd-Dl1wwwCD.js";import{v as we}from"./validate-8MtiUsxW.js";import{u as Ce}from"./guide-fGvKwZr_.js";import"./editor-cherry-CFIsbKoN.js";import"./neo4j-MWxXN7EM.js";import"./lodash-Bm5sK6rN.js";import"./elkjs-BN8GIjVH.js";import"./utils-CvB22N-W.js";import"./other-LrIFyvU9.js";const $e={class:"navbar-wrapper"},Se={class:"navbar"},xe=["onClick"],Le={class:"nav-name"},Me={class:"down-icon"},Pe=["onClick"],Re={class:"nav-name"},Ie={__name:"layout-navbar",setup(B){const{t}=A("layout.navbar"),n=K(),h=O(),m=H(),y=u(()=>m.meta.activeMenu||""),d=u(()=>m.path.split("/")[1]),l=N(localStorage.getItem("local__robot_menu_key")||"robot_detail"),S=u(()=>[{id:0,key:"explore",label:"explore",title:t("explore"),icon:"nav-explore",path:"/explore/index",permission:["AbilityCenter"]},{id:1,key:"robot",label:"robot",title:t("robot"),icon:"nav-robot",path:"/robot/list",permission:["RobotManage"]},{id:2,key:"library",label:"library",title:t("knowledge_base"),icon:"nav-library",path:"/library/list",permission:["LibraryManage"]},{id:3,key:"PublicLibrary-new",label:"PublicLibrary",title:t("document"),icon:"nav-doc",path:"/public-library/list",permission:["OpenLibDocManage"]},{id:4,key:"library-search-new",label:"library-search",title:t("search"),icon:"search",path:"/library-search/index",permission:["SearchManage"]},{id:5,key:"chat-monitor",label:"chat-monitor",title:t("session"),icon:"nav-chat",path:"/chat-monitor/index",permission:["ChatSessionManage"]}]),C=u(()=>n.top_navigate),$=u(()=>C.value.filter(v=>v.open).map(v=>S.value.find(c=>c.key===v.id)).filter(Boolean)),P=p=>{h.push(p.path)},k=(p,v)=>{localStorage.setItem("local__robot_menu_key",p),l.value=p,x(v)},x=p=>{l.value=="robot_detail"?i():P(p)},i=async()=>{try{const{data:p=[]}=await de();if(p.length===0){h.push("/robot/list");return}const v=localStorage.getItem("last_local_robot_id");let c;v&&(c=p.find(r=>r.id==v)),c=c||p[0];const{id:f,robot_key:L,application_type:w}=c;h.push({path:`/robot/config/${w==1?"workflow":"basic-config"}`,query:{id:f,robot_key:L}})}catch{h.push("/robot/list")}};return te(()=>m.path,()=>{},{immediate:!0}),(p,v)=>{const c=G,f=Z,L=X,w=ee;return a(),_("div",$e,[o("div",Se,[(a(!0),_(R,null,F($.value,r=>(a(),_(R,{key:r.key},[b(Q)(r.permission)?(a(),_(R,{key:0},[r.key==="robot"?(a(),_("div",{key:0,class:U(["nav-menu",{active:r.key===d.value||r.key===y.value}]),onClick:M=>x(r)},[e(c,{class:"nav-icon",name:r.icon},null,8,["name"]),o("span",Le,g(r.title),1),e(w,null,{overlay:s(()=>[e(L,null,{default:s(()=>[e(f,{key:"1",onClick:M=>k("robot_detail",r)},{default:s(()=>[o("div",{class:U(["robot-ment-item",{"robot-active-item":l.value=="robot_detail"}])},[e(b(W),{class:"anticon-check"}),j(" "+g(b(t)("enter_robot_detail")),1)],2)]),_:1},8,["onClick"]),e(f,{key:"2",onClick:M=>k("robot_list",r)},{default:s(()=>[o("div",{class:U(["robot-ment-item",{"robot-active-item":l.value=="robot_list"}])},[e(b(W)),j(" "+g(b(t)("enter_robot_manage")),1)],2)]),_:1},8,["onClick"])]),_:2},1024)]),default:s(()=>[o("div",Me,[e(b(pe))])]),_:2},1024)],10,xe)):(a(),_("div",{key:1,class:U(["nav-menu",{active:r.key===d.value||r.key===y.value||r.label==y.value}]),onClick:M=>P(r)},[e(c,{class:"nav-icon",name:r.icon},null,8,["name"]),o("span",Re,g(r.title),1)],10,Pe))],64)):I("",!0)],64))),128))])])}}},Be=T(Ie,[["__scopeId","data-v-99e5de9e"]]),Te={class:"layout-breadcrumb"},De={key:1,class:"page-title"},Ue={__name:"layout-breadcrumb",props:{title:{type:[String,Boolean],default:""},items:{type:[Array,Boolean],default:()=>[]}},setup(B){const t=B;return(n,h)=>{const m=J("router-link"),y=ve,d=me;return a(),_("div",Te,[t.items.length>0?(a(),D(d,{key:0},{default:s(()=>[(a(!0),_(R,null,F(t.items,(l,S)=>(a(),_(R,{key:l.title},[S!==t.items.length-1?(a(),D(y,{key:0},{default:s(()=>[e(m,{to:l.path},{default:s(()=>[j(g(l.title),1)]),_:2},1032,["to"])]),_:2},1024)):(a(),D(y,{key:1},{default:s(()=>[j(g(l.title),1)]),_:2},1024))],64))),128))]),_:1})):(a(),_("div",De,g(t.title),1))])}}},je=T(Ue,[["__scopeId","data-v-3def9f41"]]),Ne={key:0,class:"user-dropdown"},Fe=["src"],Oe={class:"menu-name"},Ae={class:"menu-name"},Ge=["onClick"],qe={class:"menu-name"},Ve={class:"menu-name"},ze={__name:"user-dropdown",setup(B){const{t}=A(),n=K(),h=O(),m=q(),{userInfo:y,avatar:d,user_name:l}=oe(m),S=u(()=>l.value.length>11?l.value.substring(0,11)+"...":l.value),C=()=>{m.logoutConfirm(!0)},$=()=>{window.open("/#/user/model","_blank","noopener")},P=()=>{window.open("/#/user/account","_blank","noopener")},k=u(()=>[{id:1,key:"robot",label:"robot",title:t("layout.navbar.application"),icon:"nav-robot",path:"/robot/list",permission:["RobotManage"]},{id:2,key:"library",label:"library",title:t("layout.navbar.knowledge_base"),icon:"nav-library",path:"/library/list",permission:["LibraryManage"]},{id:3,key:"PublicLibrary-new",label:"PublicLibrary",title:t("layout.navbar.document"),icon:"nav-doc",path:"/public-library/list",permission:["OpenLibDocManage"]},{id:4,key:"library-search-new",label:"library-search",title:t("layout.navbar.search"),icon:"search",path:"/library-search/index",permission:["SearchManage"]},{id:5,key:"chat-monitor",label:"chat-monitor",title:t("layout.navbar.session"),icon:"nav-chat",path:"/chat-monitor/index",permission:["ChatSessionManage"]}]),x=u(()=>n.top_navigate),i=u(()=>x.value.filter(c=>!c.open).map(c=>k.value.find(f=>f.key===c.id)).filter(Boolean)),p=v=>{h.push(v.path)};return(v,c)=>{const f=Z,L=G,w=X,r=ee;return b(y)?(a(),_("div",Ne,[e(r,null,{overlay:s(()=>[e(w,null,{default:s(()=>[e(f,null,{default:s(()=>[o("a",{class:"menu-item",href:"javascript:;",onClick:P},[e(b(be),{class:"menu-icon"}),o("span",Oe,g(S.value),1)])]),_:1}),e(f,null,{default:s(()=>[o("a",{class:"menu-item",href:"javascript:;",onClick:$},[e(L,{class:"menu-icon",name:"system-setting"}),o("span",Ae,g(b(t)("layout.navbar.system_manage")),1)])]),_:1}),(a(!0),_(R,null,F(i.value,M=>(a(),_(R,{key:M.id},[b(Q)(M.permission)?(a(),D(f,{key:0},{default:s(()=>[o("a",{class:"menu-item",href:"javascript:;",onClick:it=>p(M)},[e(L,{class:"menu-icon",name:M.icon},null,8,["name"]),o("span",qe,g(M.title),1)],8,Ge)]),_:2},1024)):I("",!0)],64))),128)),e(f,null,{default:s(()=>[e(ue)]),_:1}),e(f,null,{default:s(()=>[o("a",{class:"menu-item",href:"javascript:;",onClick:C},[e(L,{class:"menu-icon",name:"logout"}),o("span",Ve,g(b(t)("layout.navbar.logout")),1)])]),_:1})]),_:1})]),default:s(()=>[o("div",{class:"user-dropdown-link",onClick:c[0]||(c[0]=ae(()=>{},["prevent"]))},[o("img",{class:"user-avatar",src:b(d),alt:""},null,8,Fe)])]),_:1})])):I("",!0)}}},Ee=T(ze,[["__scopeId","data-v-6dd5e635"]]),We={class:"form-box"},Ye={__name:"reset-password",setup(B,{expose:t}){const n=q(),h=Y.useForm,m=N(!0),y=N("重置登录密码"),d=V({password:"",check_password:"",id:n.userInfo.user_id}),l=V({password:[{message:"请输入登录密码",required:!0},{validator:async(x,i)=>!we(i)&&i?Promise.reject("密码必须包含字母、数字或者字符中的两种，6-32位"):Promise.resolve()}],check_password:[{message:"请输入确认密码",required:!0},{validator:async(x,i)=>i!=d.password&&i?Promise.reject("两次输入的密码不一致"):Promise.resolve()}]}),{resetFields:S,validate:C,validateInfos:$}=h(d,l),P=()=>{C().then(()=>{ie({...se(d)}).then(x=>{ke.success("修改成功"),m.value=!1,n.reset(!0)})})},k=()=>{n.setResetPassModal()};return t({open}),(x,i)=>{const p=he,v=fe,c=ye,f=Y,L=ge;return a(),_("div",null,[e(L,{open:m.value,"onUpdate:open":i[2]||(i[2]=w=>m.value=w),title:y.value,onOk:P,width:"520px",onCancel:k},{default:s(()=>[e(p,{class:"alert-box",message:"您还未修改初始密码，为了保障您的数据安全，请您尽快重置密码。",type:"info","show-icon":""}),o("div",We,[e(f,{layout:"vertical"},{default:s(()=>[e(c,z({label:"登录密码"},b($).password),{default:s(()=>[e(v,{value:d.password,"onUpdate:value":i[0]||(i[0]=w=>d.password=w),placeholder:"密码必须包含字母、数字或者字符中的两种，6-32位"},null,8,["value"])]),_:1},16),e(c,z({label:"确认密码"},b($).check_password),{default:s(()=>[e(v,{value:d.check_password,"onUpdate:value":i[1]||(i[1]=w=>d.check_password=w),placeholder:"请重新输入密码"},null,8,["value"])]),_:1},16)]),_:1})])]),_:1},8,["open","title"])])}}},He=T(Ye,[["__scopeId","data-v-40aed5c2"]]),Je={class:"nav-name"},Ke={__name:"beginner-guide-tag",setup(B){const{t}=A("layouts.AdminLayout.compoents.beginner-guide-tag"),n=Ce(),h=ce(),m=u(()=>h.role_type),y=u(()=>+n.total_process),d=O(),l=()=>{n.getUseGuideProcess(),d.push("/guide")};return ne(()=>{n.getUseGuideProcess()}),(S,C)=>{const $=G;return m.value==1&&y.value!=100?(a(),_("div",{key:0,class:"beginner-guide-tag",onClick:l},[C[0]||(C[0]=o("span",{class:"red-dot"},null,-1)),e($,{class:"nav-icon",name:"guide"}),o("span",Je,g(b(t)("title_beginner_guide")),1)])):I("",!0)}}},Qe=T(Ke,[["__scopeId","data-v-136f017f"]]),Xe={class:"admin-layout"},Ze={key:0,class:"layout-header-wrapper"},et={class:"layout-header"},tt={class:"header-left"},ot={class:"header-body"},at={class:"header-right"},st={class:"item-box"},nt={class:"layout-body"},rt={key:0,class:"layout-breadcrumb-wrapper"},lt={__name:"index",setup(B){const t=le(),n=H(),h=q(),m=u(()=>n.name!="robotWorkflow"?!1:t.hideLayoutTopAndBottom||!1),y=u(()=>n.meta.isCustomPage||!1),d=u(()=>n.meta.pageStyle||{}),l=u(()=>n.meta.bgColor||"#ffffff"),S=u(()=>n.meta.breadcrumb||[]),C=u(()=>n.meta.hideTitle||!1),$=u(()=>n.meta.title||!1),P=u(()=>{var k;return((k=h.userInfo)==null?void 0:k.d_pass)==1&&h.isShowResetPassModal});return(k,x)=>{const i=J("router-view");return a(),_("div",Xe,[m.value?I("",!0):(a(),_("div",Ze,[o("div",et,[o("div",tt,[e(_e),e(Qe)]),o("div",ot,[e(Be)]),o("div",at,[o("div",st,[e(Ee)])])])])),o("div",nt,[y.value?re(k.$slots,"default",{key:0},()=>[e(i)],!0):(a(),_("div",{key:1,class:"page-wrapper",style:E({"background-color":l.value})},[C.value?I("",!0):(a(),_("div",rt,[e(je,{items:S.value,title:$.value},null,8,["items","title"])])),o("div",{class:"page-container",style:E({...d.value})},[e(i)],4)],4))]),P.value?(a(),D(He,{key:1})):I("",!0)])}}},$t=T(lt,[["__scopeId","data-v-ff62b8d1"]]);export{$t as default};
//# sourceMappingURL=index-Dy8c9UFh.js.map
