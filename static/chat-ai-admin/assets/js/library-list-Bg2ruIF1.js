import{b as w,$ as S,r as B,L as d,M as c,V as t,j as a,u as m,a8 as D,F as I,a1 as P,a7 as p,Y as _,Q as r,a3 as T,a4 as $}from"./vue-chunks-XoCroLmQ.js";import{g as z,d as E}from"./index-CbAgVi9e.js";import{_ as O,d as V,bl as j,M as F,E as N,e as q}from"../../index-BokOG9ZU.js";import{_ as A,M as G}from"./index-CvsTLiPQ.js";import"./index-mOJL8w2K.js";import{D as Q}from"./dropdown-_4lkCpvo.js";import{P as R}from"./PlusCircleOutlined-CnpFxBqO.js";import{M as Y}from"./MoreOutlined-VR11ODEV.js";import"./dayjs-D8VPPBbu.js";import"./axios-Cm0UX6qg.js";import"./qs-D73tJGQG.js";import"./crypto-js-D323TfIu.js";import"./shallowequal-BeorLzKa.js";import"./colors-Cfqlh7qR.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./collapseMotion-DWwsCVG2.js";import"./slide-BpJSAeCl.js";import"./index-CnyiohbP.js";import"./index-BOYSy9Pq.js";import"./Dropdown-aJrAR27s.js";import"./RightOutlined-CViLB99g.js";import"./move-ChusaJh2.js";const H=l=>(T("data-v-060dd5f6"),l=l(),$(),l),J={"bg-color":"#f5f9ff",class:"library-page"},K={class:"library-page-body"},U={class:"list-box"},W={key:0,class:"list-item-wrapper"},X=H(()=>t("span",{class:"add-library-text"},"新增知识库",-1)),Z=["onClick"],tt={class:"item-header"},et={class:"library-title"},st=["onClick"],ot=["onClick"],at={class:"library-desc"},it={class:"library-size"},rt={class:"file-size"},lt={__name:"library-list",setup(l){const h=V();let{role_permission:k}=h;const C=w(()=>k.includes("LibraryCreate")),u=S(),f=B([]),b=()=>{z({}).then(e=>{f.value=e.data||[]})};b();const x=()=>{u.push({name:"addLibrary"})},v=e=>{u.push({name:"libraryDetails",query:{id:e.id}})},g=e=>{let s=3,i=F.confirm({title:`删除${e.library_name}`,icon:a(N),content:"您确定要删除此知识库吗？",okText:s+" 确 定",okType:"danger",okButtonProps:{disabled:!0},cancelText:"取 消",onOk(){L(e)},onCancel(){}}),n=setInterval(()=>{s==1?(i.update({okText:"确 定",okButtonProps:{disabled:!1}}),clearInterval(n),n=void 0):(s-=1,i.update({okText:s+" 确 定",okButtonProps:{disabled:!0}}))},1e3)},L=({id:e})=>{E({id:e}).then(()=>{q.success("删除成功"),b()})};return(e,s)=>{const i=A,n=G,M=Q;return d(),c("div",J,[t("div",K,[t("div",U,[C.value?(d(),c("div",W,[t("div",{class:"list-item add-library",onClick:x},[a(m(R),{class:"add-library-icon"}),X])])):D("",!0),(d(!0),c(I,null,P(f.value,o=>(d(),c("div",{class:"list-item-wrapper",key:o.id},[t("div",{class:"list-item",onClick:p(y=>v(o),["stop"])},[t("div",tt,[t("div",et,_(o.library_name),1),t("span",{class:"item-action",onClick:s[1]||(s[1]=p(()=>{},["stop"]))},[a(M,null,{overlay:r(()=>[a(n,null,{default:r(()=>[a(i,null,{default:r(()=>[t("a",{href:"javascript:;",onClick:p(y=>v(o),["stop"])},"管 理",8,st)]),_:2},1024),a(i,null,{default:r(()=>[t("a",{class:"delete-text-color",href:"javascript:;",onClick:y=>g(o)},"删 除",8,ot)]),_:2},1024)]),_:2},1024)]),default:r(()=>[t("span",{class:"menu-btn",onClick:s[0]||(s[0]=p(()=>{},["prevent"]))},[a(m(Y))])]),_:2},1024)])]),t("div",at,_(o.library_intro),1),t("div",it,[t("span",null,"文档数："+_(o.file_total),1),t("span",rt,"文档大小："+_(m(j)(o.file_size)),1)])],8,Z)]))),128))])])])}}},It=O(lt,[["__scopeId","data-v-060dd5f6"]]);export{It as default};
