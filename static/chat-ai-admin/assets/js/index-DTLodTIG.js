var no=Object.defineProperty;var oo=(c,l,s)=>l in c?no(c,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):c[l]=s;var le=(c,l,s)=>oo(c,typeof l!="symbol"?l+"":l,s);import{f as K,l as He,Y as G,_ as q,k as d,a2 as v,G as W,K as xn,a5 as r,ae as ee,a3 as Ve,a7 as ae,o as Re,ab as ao,ag as ze,w as Ie,r as ce,u as ne,a4 as zt,a1 as Z,J as he,e as ve,aa as En,F as pe,a9 as Ce,ad as at,c as ge,af as Kt,p as so,ah as io}from"./vue-chunks-Ci-XTWEs.js";import{u as Ke}from"./robot-DHvU2P3E.js";import{b as se,a8 as ro,d as Tt,a9 as Pe,k as lo}from"../../index-OnalErht.js";import{b as In,I as ye,F as me,a9 as co,ap as uo,X as Bn,B as fe,a8 as po,ab as fo,e as ke,q as Rn,R as Pn,Q as Mt,M as ue,a as oe,H as Te,p as _o,u as Nt,v as Lt,ay as ho,z as Ut,O as mo,bi as go,ac as vo,a3 as yo,E as bo,an as wo,c as ko,D as Co,k as be,ag as $o,ai as Ao,bj as So}from"./ui-antd-BgeWxFcI.js";import{H as xo,I as Eo,J as Io,K as Bo,L as Ro,M as Tn,N as Po,e as Me,O as Mn,r as Dt,c as We,f as Je}from"./index-DGyn5jM5.js";import{u as Nn}from"./index-BdOGHXRM.js";import{C as Ln}from"./cu-upload-DXdRnFGI.js";import{i as To}from"./validate-8MtiUsxW.js";import{d as Mo}from"./vuedraggable.umd-DJBjom-v.js";import{L as Un}from"./loading-box-DcpHkn5J.js";import{E as Dn}from"./empty-box-1VHyC8l6.js";import"./utils-ChQO-_r6.js";import"./empty-BFmzY9bl.js";const No={class:"top-menu-box"},Lo={__name:"top-meun",props:{value:{type:String,default:""}},emits:["change","update:value"],setup(c,{emit:l}){const s=l,e=K([c.value]),t=K([{key:"WebAPP",id:"WebAPP",label:"WebAPP",title:"WebAPP"},{key:"EmbedWebsite",id:"EmbedWebsite",label:"嵌入网站",title:"嵌入网站"},{key:"WeChatOfficialAccount",id:"WeChatOfficialAccount",label:He("div",{class:"tag-text-box"},[He("span",{},"微信公众号"),He("span",{class:"text-xs"},"支持未认证")])},{key:"WeChatMiniProgram",id:"WeChatMiniProgram",label:"微信小程序",title:"微信小程序"},{key:"WeChatCustomerService",id:"WeChatCustomerService",label:"微信客服",title:"微信客服"},{key:"FeishuRobot",id:"FeishuRobot",label:"飞书机器人",title:"飞书机器人"},{key:"DingDingRobot",id:"DingDingRobot",label:"钉钉机器人",title:"钉钉机器人"}]),o=({item:u})=>{e.value.includes(u.id)||(s("update:value",u.id),s("change",u))};return(u,a)=>{const f=In;return q(),G("div",No,[d(f,{class:"top-menu",items:t.value,selectedKeys:e.value,"onUpdate:selectedKeys":a[0]||(a[0]=_=>e.value=_),mode:"horizontal",onClick:o},{title:v(()=>a[1]||(a[1]=[W(" 11 ")])),_:1},8,["items","selectedKeys"])])}}},Uo=se(Lo,[["__scopeId","data-v-774edbe3"]]);var Ee={},st,Wt;function Do(){return Wt||(Wt=1,st=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),st}var it={},we={},Jt;function $e(){if(Jt)return we;Jt=1;let c;const l=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return we.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17},we.getSymbolTotalCodewords=function(n){return l[n]},we.getBCHDigit=function(s){let n=0;for(;s!==0;)n++,s>>>=1;return n},we.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');c=n},we.isKanjiModeEnabled=function(){return typeof c<"u"},we.toSJIS=function(n){return c(n)},we}var rt={},Gt;function qt(){return Gt||(Gt=1,function(c){c.L={bit:1},c.M={bit:0},c.Q={bit:3},c.H={bit:2};function l(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"l":case"low":return c.L;case"m":case"medium":return c.M;case"q":case"quartile":return c.Q;case"h":case"high":return c.H;default:throw new Error("Unknown EC Level: "+s)}}c.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},c.from=function(n,e){if(c.isValid(n))return n;try{return l(n)}catch{return e}}}(rt)),rt}var lt,Yt;function qo(){if(Yt)return lt;Yt=1;function c(){this.buffer=[],this.length=0}return c.prototype={get:function(l){const s=Math.floor(l/8);return(this.buffer[s]>>>7-l%8&1)===1},put:function(l,s){for(let n=0;n<s;n++)this.putBit((l>>>s-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(l){const s=Math.floor(this.length/8);this.buffer.length<=s&&this.buffer.push(0),l&&(this.buffer[s]|=128>>>this.length%8),this.length++}},lt=c,lt}var ct,Qt;function Fo(){if(Qt)return ct;Qt=1;function c(l){if(!l||l<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=l,this.data=new Uint8Array(l*l),this.reservedBit=new Uint8Array(l*l)}return c.prototype.set=function(l,s,n,e){const t=l*this.size+s;this.data[t]=n,e&&(this.reservedBit[t]=!0)},c.prototype.get=function(l,s){return this.data[l*this.size+s]},c.prototype.xor=function(l,s,n){this.data[l*this.size+s]^=n},c.prototype.isReserved=function(l,s){return this.reservedBit[l*this.size+s]},ct=c,ct}var ut={},Xt;function Oo(){return Xt||(Xt=1,function(c){const l=$e().getSymbolSize;c.getRowColCoords=function(n){if(n===1)return[];const e=Math.floor(n/7)+2,t=l(n),o=t===145?26:Math.ceil((t-13)/(2*e-2))*2,u=[t-7];for(let a=1;a<e-1;a++)u[a]=u[a-1]-o;return u.push(6),u.reverse()},c.getPositions=function(n){const e=[],t=c.getRowColCoords(n),o=t.length;for(let u=0;u<o;u++)for(let a=0;a<o;a++)u===0&&a===0||u===0&&a===o-1||u===o-1&&a===0||e.push([t[u],t[a]]);return e}}(ut)),ut}var dt={},Zt;function Vo(){if(Zt)return dt;Zt=1;const c=$e().getSymbolSize,l=7;return dt.getPositions=function(n){const e=c(n);return[[0,0],[e-l,0],[0,e-l]]},dt}var pt={},en;function jo(){return en||(en=1,function(c){c.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const l={N1:3,N2:3,N3:40,N4:10};c.isValid=function(e){return e!=null&&e!==""&&!isNaN(e)&&e>=0&&e<=7},c.from=function(e){return c.isValid(e)?parseInt(e,10):void 0},c.getPenaltyN1=function(e){const t=e.size;let o=0,u=0,a=0,f=null,_=null;for(let g=0;g<t;g++){u=a=0,f=_=null;for(let k=0;k<t;k++){let b=e.get(g,k);b===f?u++:(u>=5&&(o+=l.N1+(u-5)),f=b,u=1),b=e.get(k,g),b===_?a++:(a>=5&&(o+=l.N1+(a-5)),_=b,a=1)}u>=5&&(o+=l.N1+(u-5)),a>=5&&(o+=l.N1+(a-5))}return o},c.getPenaltyN2=function(e){const t=e.size;let o=0;for(let u=0;u<t-1;u++)for(let a=0;a<t-1;a++){const f=e.get(u,a)+e.get(u,a+1)+e.get(u+1,a)+e.get(u+1,a+1);(f===4||f===0)&&o++}return o*l.N2},c.getPenaltyN3=function(e){const t=e.size;let o=0,u=0,a=0;for(let f=0;f<t;f++){u=a=0;for(let _=0;_<t;_++)u=u<<1&2047|e.get(f,_),_>=10&&(u===1488||u===93)&&o++,a=a<<1&2047|e.get(_,f),_>=10&&(a===1488||a===93)&&o++}return o*l.N3},c.getPenaltyN4=function(e){let t=0;const o=e.data.length;for(let a=0;a<o;a++)t+=e.data[a];return Math.abs(Math.ceil(t*100/o/5)-10)*l.N4};function s(n,e,t){switch(n){case c.Patterns.PATTERN000:return(e+t)%2===0;case c.Patterns.PATTERN001:return e%2===0;case c.Patterns.PATTERN010:return t%3===0;case c.Patterns.PATTERN011:return(e+t)%3===0;case c.Patterns.PATTERN100:return(Math.floor(e/2)+Math.floor(t/3))%2===0;case c.Patterns.PATTERN101:return e*t%2+e*t%3===0;case c.Patterns.PATTERN110:return(e*t%2+e*t%3)%2===0;case c.Patterns.PATTERN111:return(e*t%3+(e+t)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}c.applyMask=function(e,t){const o=t.size;for(let u=0;u<o;u++)for(let a=0;a<o;a++)t.isReserved(a,u)||t.xor(a,u,s(e,a,u))},c.getBestMask=function(e,t){const o=Object.keys(c.Patterns).length;let u=0,a=1/0;for(let f=0;f<o;f++){t(f),c.applyMask(f,e);const _=c.getPenaltyN1(e)+c.getPenaltyN2(e)+c.getPenaltyN3(e)+c.getPenaltyN4(e);c.applyMask(f,e),_<a&&(a=_,u=f)}return u}}(pt)),pt}var je={},tn;function qn(){if(tn)return je;tn=1;const c=qt(),l=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],s=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return je.getBlocksCount=function(e,t){switch(t){case c.L:return l[(e-1)*4+0];case c.M:return l[(e-1)*4+1];case c.Q:return l[(e-1)*4+2];case c.H:return l[(e-1)*4+3];default:return}},je.getTotalCodewordsCount=function(e,t){switch(t){case c.L:return s[(e-1)*4+0];case c.M:return s[(e-1)*4+1];case c.Q:return s[(e-1)*4+2];case c.H:return s[(e-1)*4+3];default:return}},je}var ft={},qe={},nn;function Ho(){if(nn)return qe;nn=1;const c=new Uint8Array(512),l=new Uint8Array(256);return function(){let n=1;for(let e=0;e<255;e++)c[e]=n,l[n]=e,n<<=1,n&256&&(n^=285);for(let e=255;e<512;e++)c[e]=c[e-255]}(),qe.log=function(n){if(n<1)throw new Error("log("+n+")");return l[n]},qe.exp=function(n){return c[n]},qe.mul=function(n,e){return n===0||e===0?0:c[l[n]+l[e]]},qe}var on;function zo(){return on||(on=1,function(c){const l=Ho();c.mul=function(n,e){const t=new Uint8Array(n.length+e.length-1);for(let o=0;o<n.length;o++)for(let u=0;u<e.length;u++)t[o+u]^=l.mul(n[o],e[u]);return t},c.mod=function(n,e){let t=new Uint8Array(n);for(;t.length-e.length>=0;){const o=t[0];for(let a=0;a<e.length;a++)t[a]^=l.mul(e[a],o);let u=0;for(;u<t.length&&t[u]===0;)u++;t=t.slice(u)}return t},c.generateECPolynomial=function(n){let e=new Uint8Array([1]);for(let t=0;t<n;t++)e=c.mul(e,new Uint8Array([1,l.exp(t)]));return e}}(ft)),ft}var _t,an;function Ko(){if(an)return _t;an=1;const c=zo();function l(s){this.genPoly=void 0,this.degree=s,this.degree&&this.initialize(this.degree)}return l.prototype.initialize=function(n){this.degree=n,this.genPoly=c.generateECPolynomial(this.degree)},l.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");const e=new Uint8Array(n.length+this.degree);e.set(n);const t=c.mod(e,this.genPoly),o=this.degree-t.length;if(o>0){const u=new Uint8Array(this.degree);return u.set(t,o),u}return t},_t=l,_t}var ht={},mt={},gt={},sn;function Fn(){return sn||(sn=1,gt.isValid=function(l){return!isNaN(l)&&l>=1&&l<=40}),gt}var _e={},rn;function On(){if(rn)return _e;rn=1;const c="[0-9]+",l="[A-Z $%*+\\-./:]+";let s="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";s=s.replace(/u/g,"\\u");const n="(?:(?![A-Z0-9 $%*+\\-./:]|"+s+`)(?:.|[\r
]))+`;_e.KANJI=new RegExp(s,"g"),_e.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),_e.BYTE=new RegExp(n,"g"),_e.NUMERIC=new RegExp(c,"g"),_e.ALPHANUMERIC=new RegExp(l,"g");const e=new RegExp("^"+s+"$"),t=new RegExp("^"+c+"$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return _e.testKanji=function(a){return e.test(a)},_e.testNumeric=function(a){return t.test(a)},_e.testAlphanumeric=function(a){return o.test(a)},_e}var ln;function Ae(){return ln||(ln=1,function(c){const l=Fn(),s=On();c.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},c.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},c.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},c.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},c.MIXED={bit:-1},c.getCharCountIndicator=function(t,o){if(!t.ccBits)throw new Error("Invalid mode: "+t);if(!l.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?t.ccBits[0]:o<27?t.ccBits[1]:t.ccBits[2]},c.getBestModeForData=function(t){return s.testNumeric(t)?c.NUMERIC:s.testAlphanumeric(t)?c.ALPHANUMERIC:s.testKanji(t)?c.KANJI:c.BYTE},c.toString=function(t){if(t&&t.id)return t.id;throw new Error("Invalid mode")},c.isValid=function(t){return t&&t.bit&&t.ccBits};function n(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return c.NUMERIC;case"alphanumeric":return c.ALPHANUMERIC;case"kanji":return c.KANJI;case"byte":return c.BYTE;default:throw new Error("Unknown mode: "+e)}}c.from=function(t,o){if(c.isValid(t))return t;try{return n(t)}catch{return o}}}(mt)),mt}var cn;function Wo(){return cn||(cn=1,function(c){const l=$e(),s=qn(),n=qt(),e=Ae(),t=Fn(),o=7973,u=l.getBCHDigit(o);function a(k,b,R){for(let D=1;D<=40;D++)if(b<=c.getCapacity(D,R,k))return D}function f(k,b){return e.getCharCountIndicator(k,b)+4}function _(k,b){let R=0;return k.forEach(function(D){const C=f(D.mode,b);R+=C+D.getBitsLength()}),R}function g(k,b){for(let R=1;R<=40;R++)if(_(k,R)<=c.getCapacity(R,b,e.MIXED))return R}c.from=function(b,R){return t.isValid(b)?parseInt(b,10):R},c.getCapacity=function(b,R,D){if(!t.isValid(b))throw new Error("Invalid QR Code version");typeof D>"u"&&(D=e.BYTE);const C=l.getSymbolTotalCodewords(b),E=s.getTotalCodewordsCount(b,R),j=(C-E)*8;if(D===e.MIXED)return j;const L=j-f(D,b);switch(D){case e.NUMERIC:return Math.floor(L/10*3);case e.ALPHANUMERIC:return Math.floor(L/11*2);case e.KANJI:return Math.floor(L/13);case e.BYTE:default:return Math.floor(L/8)}},c.getBestVersionForData=function(b,R){let D;const C=n.from(R,n.M);if(Array.isArray(b)){if(b.length>1)return g(b,C);if(b.length===0)return 1;D=b[0]}else D=b;return a(D.mode,D.getLength(),C)},c.getEncodedBits=function(b){if(!t.isValid(b)||b<7)throw new Error("Invalid QR Code version");let R=b<<12;for(;l.getBCHDigit(R)-u>=0;)R^=o<<l.getBCHDigit(R)-u;return b<<12|R}}(ht)),ht}var vt={},un;function Jo(){if(un)return vt;un=1;const c=$e(),l=1335,s=21522,n=c.getBCHDigit(l);return vt.getEncodedBits=function(t,o){const u=t.bit<<3|o;let a=u<<10;for(;c.getBCHDigit(a)-n>=0;)a^=l<<c.getBCHDigit(a)-n;return(u<<10|a)^s},vt}var yt={},bt,dn;function Go(){if(dn)return bt;dn=1;const c=Ae();function l(s){this.mode=c.NUMERIC,this.data=s.toString()}return l.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)},l.prototype.getLength=function(){return this.data.length},l.prototype.getBitsLength=function(){return l.getBitsLength(this.data.length)},l.prototype.write=function(n){let e,t,o;for(e=0;e+3<=this.data.length;e+=3)t=this.data.substr(e,3),o=parseInt(t,10),n.put(o,10);const u=this.data.length-e;u>0&&(t=this.data.substr(e),o=parseInt(t,10),n.put(o,u*3+1))},bt=l,bt}var wt,pn;function Yo(){if(pn)return wt;pn=1;const c=Ae(),l=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function s(n){this.mode=c.ALPHANUMERIC,this.data=n}return s.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let o=l.indexOf(this.data[t])*45;o+=l.indexOf(this.data[t+1]),e.put(o,11)}this.data.length%2&&e.put(l.indexOf(this.data[t]),6)},wt=s,wt}var kt,fn;function Qo(){if(fn)return kt;fn=1;const c=Ae();function l(s){this.mode=c.BYTE,typeof s=="string"?this.data=new TextEncoder().encode(s):this.data=new Uint8Array(s)}return l.getBitsLength=function(n){return n*8},l.prototype.getLength=function(){return this.data.length},l.prototype.getBitsLength=function(){return l.getBitsLength(this.data.length)},l.prototype.write=function(s){for(let n=0,e=this.data.length;n<e;n++)s.put(this.data[n],8)},kt=l,kt}var Ct,_n;function Xo(){if(_n)return Ct;_n=1;const c=Ae(),l=$e();function s(n){this.mode=c.KANJI,this.data=n}return s.getBitsLength=function(e){return e*13},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(n){let e;for(e=0;e<this.data.length;e++){let t=l.toSJIS(this.data[e]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),n.put(t,13)}},Ct=s,Ct}var $t={exports:{}},hn;function Zo(){return hn||(hn=1,function(c){var l={single_source_shortest_paths:function(s,n,e){var t={},o={};o[n]=0;var u=l.PriorityQueue.make();u.push(n,0);for(var a,f,_,g,k,b,R,D,C;!u.empty();){a=u.pop(),f=a.value,g=a.cost,k=s[f]||{};for(_ in k)k.hasOwnProperty(_)&&(b=k[_],R=g+b,D=o[_],C=typeof o[_]>"u",(C||D>R)&&(o[_]=R,u.push(_,R),t[_]=f))}if(typeof e<"u"&&typeof o[e]>"u"){var E=["Could not find a path from ",n," to ",e,"."].join("");throw new Error(E)}return t},extract_shortest_path_from_predecessor_list:function(s,n){for(var e=[],t=n;t;)e.push(t),s[t],t=s[t];return e.reverse(),e},find_path:function(s,n,e){var t=l.single_source_shortest_paths(s,n,e);return l.extract_shortest_path_from_predecessor_list(t,e)},PriorityQueue:{make:function(s){var n=l.PriorityQueue,e={},t;s=s||{};for(t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.queue=[],e.sorter=s.sorter||n.default_sorter,e},default_sorter:function(s,n){return s.cost-n.cost},push:function(s,n){var e={value:s,cost:n};this.queue.push(e),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};c.exports=l}($t)),$t.exports}var mn;function ea(){return mn||(mn=1,function(c){const l=Ae(),s=Go(),n=Yo(),e=Qo(),t=Xo(),o=On(),u=$e(),a=Zo();function f(E){return unescape(encodeURIComponent(E)).length}function _(E,j,L){const w=[];let A;for(;(A=E.exec(L))!==null;)w.push({data:A[0],index:A.index,mode:j,length:A[0].length});return w}function g(E){const j=_(o.NUMERIC,l.NUMERIC,E),L=_(o.ALPHANUMERIC,l.ALPHANUMERIC,E);let w,A;return u.isKanjiModeEnabled()?(w=_(o.BYTE,l.BYTE,E),A=_(o.KANJI,l.KANJI,E)):(w=_(o.BYTE_KANJI,l.BYTE,E),A=[]),j.concat(L,w,A).sort(function(O,U){return O.index-U.index}).map(function(O){return{data:O.data,mode:O.mode,length:O.length}})}function k(E,j){switch(j){case l.NUMERIC:return s.getBitsLength(E);case l.ALPHANUMERIC:return n.getBitsLength(E);case l.KANJI:return t.getBitsLength(E);case l.BYTE:return e.getBitsLength(E)}}function b(E){return E.reduce(function(j,L){const w=j.length-1>=0?j[j.length-1]:null;return w&&w.mode===L.mode?(j[j.length-1].data+=L.data,j):(j.push(L),j)},[])}function R(E){const j=[];for(let L=0;L<E.length;L++){const w=E[L];switch(w.mode){case l.NUMERIC:j.push([w,{data:w.data,mode:l.ALPHANUMERIC,length:w.length},{data:w.data,mode:l.BYTE,length:w.length}]);break;case l.ALPHANUMERIC:j.push([w,{data:w.data,mode:l.BYTE,length:w.length}]);break;case l.KANJI:j.push([w,{data:w.data,mode:l.BYTE,length:f(w.data)}]);break;case l.BYTE:j.push([{data:w.data,mode:l.BYTE,length:f(w.data)}])}}return j}function D(E,j){const L={},w={start:{}};let A=["start"];for(let $=0;$<E.length;$++){const O=E[$],U=[];for(let M=0;M<O.length;M++){const P=O[M],h=""+$+M;U.push(h),L[h]={node:P,lastCount:0},w[h]={};for(let F=0;F<A.length;F++){const T=A[F];L[T]&&L[T].node.mode===P.mode?(w[T][h]=k(L[T].lastCount+P.length,P.mode)-k(L[T].lastCount,P.mode),L[T].lastCount+=P.length):(L[T]&&(L[T].lastCount=P.length),w[T][h]=k(P.length,P.mode)+4+l.getCharCountIndicator(P.mode,j))}}A=U}for(let $=0;$<A.length;$++)w[A[$]].end=0;return{map:w,table:L}}function C(E,j){let L;const w=l.getBestModeForData(E);if(L=l.from(j,w),L!==l.BYTE&&L.bit<w.bit)throw new Error('"'+E+'" cannot be encoded with mode '+l.toString(L)+`.
 Suggested mode is: `+l.toString(w));switch(L===l.KANJI&&!u.isKanjiModeEnabled()&&(L=l.BYTE),L){case l.NUMERIC:return new s(E);case l.ALPHANUMERIC:return new n(E);case l.KANJI:return new t(E);case l.BYTE:return new e(E)}}c.fromArray=function(j){return j.reduce(function(L,w){return typeof w=="string"?L.push(C(w,null)):w.data&&L.push(C(w.data,w.mode)),L},[])},c.fromString=function(j,L){const w=g(j,u.isKanjiModeEnabled()),A=R(w),$=D(A,L),O=a.find_path($.map,"start","end"),U=[];for(let M=1;M<O.length-1;M++)U.push($.table[O[M]].node);return c.fromArray(b(U))},c.rawSplit=function(j){return c.fromArray(g(j,u.isKanjiModeEnabled()))}}(yt)),yt}var gn;function ta(){if(gn)return it;gn=1;const c=$e(),l=qt(),s=qo(),n=Fo(),e=Oo(),t=Vo(),o=jo(),u=qn(),a=Ko(),f=Wo(),_=Jo(),g=Ae(),k=ea();function b($,O){const U=$.size,M=t.getPositions(O);for(let P=0;P<M.length;P++){const h=M[P][0],F=M[P][1];for(let T=-1;T<=7;T++)if(!(h+T<=-1||U<=h+T))for(let J=-1;J<=7;J++)F+J<=-1||U<=F+J||(T>=0&&T<=6&&(J===0||J===6)||J>=0&&J<=6&&(T===0||T===6)||T>=2&&T<=4&&J>=2&&J<=4?$.set(h+T,F+J,!0,!0):$.set(h+T,F+J,!1,!0))}}function R($){const O=$.size;for(let U=8;U<O-8;U++){const M=U%2===0;$.set(U,6,M,!0),$.set(6,U,M,!0)}}function D($,O){const U=e.getPositions(O);for(let M=0;M<U.length;M++){const P=U[M][0],h=U[M][1];for(let F=-2;F<=2;F++)for(let T=-2;T<=2;T++)F===-2||F===2||T===-2||T===2||F===0&&T===0?$.set(P+F,h+T,!0,!0):$.set(P+F,h+T,!1,!0)}}function C($,O){const U=$.size,M=f.getEncodedBits(O);let P,h,F;for(let T=0;T<18;T++)P=Math.floor(T/3),h=T%3+U-8-3,F=(M>>T&1)===1,$.set(P,h,F,!0),$.set(h,P,F,!0)}function E($,O,U){const M=$.size,P=_.getEncodedBits(O,U);let h,F;for(h=0;h<15;h++)F=(P>>h&1)===1,h<6?$.set(h,8,F,!0):h<8?$.set(h+1,8,F,!0):$.set(M-15+h,8,F,!0),h<8?$.set(8,M-h-1,F,!0):h<9?$.set(8,15-h-1+1,F,!0):$.set(8,15-h-1,F,!0);$.set(M-8,8,1,!0)}function j($,O){const U=$.size;let M=-1,P=U-1,h=7,F=0;for(let T=U-1;T>0;T-=2)for(T===6&&T--;;){for(let J=0;J<2;J++)if(!$.isReserved(P,T-J)){let te=!1;F<O.length&&(te=(O[F]>>>h&1)===1),$.set(P,T-J,te),h--,h===-1&&(F++,h=7)}if(P+=M,P<0||U<=P){P-=M,M=-M;break}}}function L($,O,U){const M=new s;U.forEach(function(J){M.put(J.mode.bit,4),M.put(J.getLength(),g.getCharCountIndicator(J.mode,$)),J.write(M)});const P=c.getSymbolTotalCodewords($),h=u.getTotalCodewordsCount($,O),F=(P-h)*8;for(M.getLengthInBits()+4<=F&&M.put(0,4);M.getLengthInBits()%8!==0;)M.putBit(0);const T=(F-M.getLengthInBits())/8;for(let J=0;J<T;J++)M.put(J%2?17:236,8);return w(M,$,O)}function w($,O,U){const M=c.getSymbolTotalCodewords(O),P=u.getTotalCodewordsCount(O,U),h=M-P,F=u.getBlocksCount(O,U),T=M%F,J=F-T,te=Math.floor(M/F),N=Math.floor(h/F),i=N+1,m=te-N,y=new a(m);let I=0;const p=new Array(F),S=new Array(F);let x=0;const B=new Uint8Array($.buffer);for(let Q=0;Q<F;Q++){const X=Q<J?N:i;p[Q]=B.slice(I,I+X),S[Q]=y.encode(p[Q]),I+=X,x=Math.max(x,X)}const V=new Uint8Array(M);let H=0,z,Y;for(z=0;z<x;z++)for(Y=0;Y<F;Y++)z<p[Y].length&&(V[H++]=p[Y][z]);for(z=0;z<m;z++)for(Y=0;Y<F;Y++)V[H++]=S[Y][z];return V}function A($,O,U,M){let P;if(Array.isArray($))P=k.fromArray($);else if(typeof $=="string"){let te=O;if(!te){const N=k.rawSplit($);te=f.getBestVersionForData(N,U)}P=k.fromString($,te||40)}else throw new Error("Invalid data");const h=f.getBestVersionForData(P,U);if(!h)throw new Error("The amount of data is too big to be stored in a QR Code");if(!O)O=h;else if(O<h)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+h+`.
`);const F=L(O,U,P),T=c.getSymbolSize(O),J=new n(T);return b(J,O),R(J),D(J,O),E(J,U,0),O>=7&&C(J,O),j(J,F),isNaN(M)&&(M=o.getBestMask(J,E.bind(null,J,U))),o.applyMask(M,J),E(J,U,M),{modules:J,version:O,errorCorrectionLevel:U,maskPattern:M,segments:P}}return it.create=function(O,U){if(typeof O>"u"||O==="")throw new Error("No input text");let M=l.M,P,h;return typeof U<"u"&&(M=l.from(U.errorCorrectionLevel,l.M),P=f.from(U.version),h=o.from(U.maskPattern),U.toSJISFunc&&c.setToSJISFunction(U.toSJISFunc)),A(O,P,M,h)},it}var At={},St={},vn;function Vn(){return vn||(vn=1,function(c){function l(s){if(typeof s=="number"&&(s=s.toString()),typeof s!="string")throw new Error("Color should be defined as hex string");let n=s.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+s);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(t){return[t,t]}))),n.length===6&&n.push("F","F");const e=parseInt(n.join(""),16);return{r:e>>24&255,g:e>>16&255,b:e>>8&255,a:e&255,hex:"#"+n.slice(0,6).join("")}}c.getOptions=function(n){n||(n={}),n.color||(n.color={});const e=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,t=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:t,scale:t?4:o,margin:e,color:{dark:l(n.color.dark||"#000000ff"),light:l(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},c.getScale=function(n,e){return e.width&&e.width>=n+e.margin*2?e.width/(n+e.margin*2):e.scale},c.getImageWidth=function(n,e){const t=c.getScale(n,e);return Math.floor((n+e.margin*2)*t)},c.qrToImageData=function(n,e,t){const o=e.modules.size,u=e.modules.data,a=c.getScale(o,t),f=Math.floor((o+t.margin*2)*a),_=t.margin*a,g=[t.color.light,t.color.dark];for(let k=0;k<f;k++)for(let b=0;b<f;b++){let R=(k*f+b)*4,D=t.color.light;if(k>=_&&b>=_&&k<f-_&&b<f-_){const C=Math.floor((k-_)/a),E=Math.floor((b-_)/a);D=g[u[C*o+E]?1:0]}n[R++]=D.r,n[R++]=D.g,n[R++]=D.b,n[R]=D.a}}}(St)),St}var yn;function na(){return yn||(yn=1,function(c){const l=Vn();function s(e,t,o){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=o,t.width=o,t.style.height=o+"px",t.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}c.render=function(t,o,u){let a=u,f=o;typeof a>"u"&&(!o||!o.getContext)&&(a=o,o=void 0),o||(f=n()),a=l.getOptions(a);const _=l.getImageWidth(t.modules.size,a),g=f.getContext("2d"),k=g.createImageData(_,_);return l.qrToImageData(k.data,t,a),s(g,f,_),g.putImageData(k,0,0),f},c.renderToDataURL=function(t,o,u){let a=u;typeof a>"u"&&(!o||!o.getContext)&&(a=o,o=void 0),a||(a={});const f=c.render(t,o,a),_=a.type||"image/png",g=a.rendererOpts||{};return f.toDataURL(_,g.quality)}}(At)),At}var xt={},bn;function oa(){if(bn)return xt;bn=1;const c=Vn();function l(e,t){const o=e.a/255,u=t+'="'+e.hex+'"';return o<1?u+" "+t+'-opacity="'+o.toFixed(2).slice(1)+'"':u}function s(e,t,o){let u=e+t;return typeof o<"u"&&(u+=" "+o),u}function n(e,t,o){let u="",a=0,f=!1,_=0;for(let g=0;g<e.length;g++){const k=Math.floor(g%t),b=Math.floor(g/t);!k&&!f&&(f=!0),e[g]?(_++,g>0&&k>0&&e[g-1]||(u+=f?s("M",k+o,.5+b+o):s("m",a,0),a=0,f=!1),k+1<t&&e[g+1]||(u+=s("h",_),_=0)):a++}return u}return xt.render=function(t,o,u){const a=c.getOptions(o),f=t.modules.size,_=t.modules.data,g=f+a.margin*2,k=a.color.light.a?"<path "+l(a.color.light,"fill")+' d="M0 0h'+g+"v"+g+'H0z"/>':"",b="<path "+l(a.color.dark,"stroke")+' d="'+n(_,f,a.margin)+'"/>',R='viewBox="0 0 '+g+" "+g+'"',C='<svg xmlns="http://www.w3.org/2000/svg" '+(a.width?'width="'+a.width+'" height="'+a.width+'" ':"")+R+' shape-rendering="crispEdges">'+k+b+`</svg>
`;return typeof u=="function"&&u(null,C),C},xt}var wn;function aa(){if(wn)return Ee;wn=1;const c=Do(),l=ta(),s=na(),n=oa();function e(t,o,u,a,f){const _=[].slice.call(arguments,1),g=_.length,k=typeof _[g-1]=="function";if(!k&&!c())throw new Error("Callback required as last argument");if(k){if(g<2)throw new Error("Too few arguments provided");g===2?(f=u,u=o,o=a=void 0):g===3&&(o.getContext&&typeof f>"u"?(f=a,a=void 0):(f=a,a=u,u=o,o=void 0))}else{if(g<1)throw new Error("Too few arguments provided");return g===1?(u=o,o=a=void 0):g===2&&!o.getContext&&(a=u,u=o,o=void 0),new Promise(function(b,R){try{const D=l.create(u,a);b(t(D,o,a))}catch(D){R(D)}})}try{const b=l.create(u,a);f(null,t(b,o,a))}catch(b){f(b)}}return Ee.create=l.create,Ee.toCanvas=e.bind(null,s.render),Ee.toDataURL=e.bind(null,s.renderToDataURL),Ee.toString=e.bind(null,function(t,o,u){return n.render(t,u)}),Ee}var sa=aa();const kn=xn(sa),ia={class:"card-box"},ra={class:"card-box-header"},la={class:"card-title"},ca={key:0,class:"card-icon"},ua={class:"title-text"},da={class:"title-text"},pa={class:"action"},fa={class:"card-box-body"},_a={__name:"card-box",props:{title:{type:String,default:""}},setup(c){const l=c;return(s,n)=>(q(),G("div",ia,[r("div",ra,[r("div",la,[s.$slots.icon?(q(),G("span",ca,[Ve(s.$slots,"icon",{},void 0,!0)])):ee("",!0),r("span",ua,ae(l.title),1),r("span",da,[Ve(s.$slots,"title",{},void 0,!0)])]),r("div",pa,[Ve(s.$slots,"action",{},void 0,!0)])]),r("div",fa,[Ve(s.$slots,"default",{},void 0,!0)])]))}},Be=se(_a,[["__scopeId","data-v-13417dcd"]]),ha={class:"page-title-input"},ma={class:"upload-logo"},ga=["src"],va={__name:"page-title-input",props:{avatar:{type:String,default:""},value:{type:String,default:""},placeholder:{type:String,default:"请输入标题"},autoUpload:{type:Boolean,default:!0}},emits:["update:value","update:avatar","changeAvatar"],setup(c,{emit:l}){const s=l,n=c,e=o=>{s("update:value",o.srcElement.value)},t=o=>{let u={file:o[0],category:"icon"};n.autoUpload&&Nn(u).then(a=>{s("update:avatar",a.data.link)}),ro(o[0]).then(a=>{s("changeAvatar",{file:o[0],url:a})})};return(o,u)=>{const a=ye;return q(),G("div",ha,[r("div",ma,[d(Ln,{onChange:t},{default:v(()=>[r("img",{class:"avatar",src:n.avatar},null,8,ga)]),_:1})]),d(a,{size:"large",value:n.value,placeholder:c.placeholder,onInput:e},null,8,["value","placeholder"])])}}},Ne=se(va,[["__scopeId","data-v-1a1bdb06"]]);var Et={exports:{}};/*! Pickr 1.9.1 MIT | https://github.com/Simonwep/pickr */var Cn;function ya(){return Cn||(Cn=1,function(c,l){(function(s,n){c.exports=n()})(self,()=>(()=>{var s={d:(N,i)=>{for(var m in i)s.o(i,m)&&!s.o(N,m)&&Object.defineProperty(N,m,{enumerable:!0,get:i[m]})},o:(N,i)=>Object.prototype.hasOwnProperty.call(N,i),r:N=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(N,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(N,"__esModule",{value:!0})}},n={};s.d(n,{default:()=>J});var e={};function t(N,i,m,y,I={}){i instanceof HTMLCollection||i instanceof NodeList?i=Array.from(i):Array.isArray(i)||(i=[i]),Array.isArray(m)||(m=[m]);for(const p of i)for(const S of m)p[N](S,y,{capture:!1,...I});return Array.prototype.slice.call(arguments,1)}s.r(e),s.d(e,{adjustableInputNumbers:()=>k,createElementFromString:()=>a,createFromTemplate:()=>f,eventPath:()=>_,off:()=>u,on:()=>o,resolveElement:()=>g});const o=t.bind(null,"addEventListener"),u=t.bind(null,"removeEventListener");function a(N){const i=document.createElement("div");return i.innerHTML=N.trim(),i.firstElementChild}function f(N){const i=(y,I)=>{const p=y.getAttribute(I);return y.removeAttribute(I),p},m=(y,I={})=>{const p=i(y,":obj"),S=i(y,":ref"),x=p?I[p]={}:I;S&&(I[S]=y);for(const B of Array.from(y.children)){const V=i(B,":arr"),H=m(B,V?{}:x);V&&(x[V]||(x[V]=[])).push(Object.keys(H).length?H:B)}return I};return m(a(N))}function _(N){let i=N.path||N.composedPath&&N.composedPath();if(i)return i;let m=N.target.parentElement;for(i=[N.target,m];m=m.parentElement;)i.push(m);return i.push(document,window),i}function g(N){return N instanceof Element?N:typeof N=="string"?N.split(/>>/g).reduce((i,m,y,I)=>(i=i.querySelector(m),y<I.length-1?i.shadowRoot:i),document):null}function k(N,i=m=>m){function m(y){const I=[.001,.01,.1][Number(y.shiftKey||2*y.ctrlKey)]*(y.deltaY<0?1:-1);let p=0,S=N.selectionStart;N.value=N.value.replace(/[\d.]+/g,(x,B)=>B<=S&&B+x.length>=S?(S=B,i(Number(x),I,p)):(p++,x)),N.focus(),N.setSelectionRange(S,S),y.preventDefault(),N.dispatchEvent(new Event("input"))}o(N,"focus",()=>o(window,"wheel",m,{passive:!1})),o(N,"blur",()=>u(window,"wheel",m))}const{min:b,max:R,floor:D,round:C}=Math;function E(N,i,m){i/=100,m/=100;const y=D(N=N/360*6),I=N-y,p=m*(1-i),S=m*(1-I*i),x=m*(1-(1-I)*i),B=y%6;return[255*[m,S,p,p,x,m][B],255*[x,m,m,S,p,p][B],255*[p,p,x,m,m,S][B]]}function j(N,i,m){const y=(2-(i/=100))*(m/=100)/2;return y!==0&&(i=y===1?0:y<.5?i*m/(2*y):i*m/(2-2*y)),[N,100*i,100*y]}function L(N,i,m){const y=b(N/=255,i/=255,m/=255),I=R(N,i,m),p=I-y;let S,x;if(p===0)S=x=0;else{x=p/I;const B=((I-N)/6+p/2)/p,V=((I-i)/6+p/2)/p,H=((I-m)/6+p/2)/p;N===I?S=H-V:i===I?S=1/3+B-H:m===I&&(S=2/3+V-B),S<0?S+=1:S>1&&(S-=1)}return[360*S,100*x,100*I]}function w(N,i,m,y){return i/=100,m/=100,[...L(255*(1-b(1,(N/=100)*(1-(y/=100))+y)),255*(1-b(1,i*(1-y)+y)),255*(1-b(1,m*(1-y)+y)))]}function A(N,i,m){i/=100;const y=2*(i*=(m/=100)<.5?m:1-m)/(m+i)*100,I=100*(m+i);return[N,isNaN(y)?0:y,I]}function $(N){return L(...N.match(/.{2}/g).map(i=>parseInt(i,16)))}function O(N){N=N.match(/^[a-zA-Z]+$/)?function(I){if(I.toLowerCase()==="black")return"#000";const p=document.createElement("canvas").getContext("2d");return p.fillStyle=I,p.fillStyle==="#000"?null:p.fillStyle}(N):N;const i={cmyk:/^cmyk\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)/i,rgba:/^rgba?\D+([\d.]+)(%?)\D+([\d.]+)(%?)\D+([\d.]+)(%?)\D*?(([\d.]+)(%?)|$)/i,hsla:/^hsla?\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D*?(([\d.]+)(%?)|$)/i,hsva:/^hsva?\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D*?(([\d.]+)(%?)|$)/i,hexa:/^#?(([\dA-Fa-f]{3,4})|([\dA-Fa-f]{6})|([\dA-Fa-f]{8}))$/i},m=I=>I.map(p=>/^(|\d+)\.\d+|\d+$/.test(p)?Number(p):void 0);let y;e:for(const I in i)if(y=i[I].exec(N))switch(I){case"cmyk":{const[,p,S,x,B]=m(y);if(p>100||S>100||x>100||B>100)break e;return{values:w(p,S,x,B),type:I}}case"rgba":{let[,p,,S,,x,,,B]=m(y);if(p=y[2]==="%"?p/100*255:p,S=y[4]==="%"?S/100*255:S,x=y[6]==="%"?x/100*255:x,B=y[9]==="%"?B/100:B,p>255||S>255||x>255||B<0||B>1)break e;return{values:[...L(p,S,x),B],a:B,type:I}}case"hexa":{let[,p]=y;p.length!==4&&p.length!==3||(p=p.split("").map(B=>B+B).join(""));const S=p.substring(0,6);let x=p.substring(6);return x=x?parseInt(x,16)/255:void 0,{values:[...$(S),x],a:x,type:I}}case"hsla":{let[,p,S,x,,B]=m(y);if(B=y[6]==="%"?B/100:B,p>360||S>100||x>100||B<0||B>1)break e;return{values:[...A(p,S,x),B],a:B,type:I}}case"hsva":{let[,p,S,x,,B]=m(y);if(B=y[6]==="%"?B/100:B,p>360||S>100||x>100||B<0||B>1)break e;return{values:[p,S,x,B],a:B,type:I}}}return{values:null,type:null}}function U(N=0,i=0,m=0,y=1){const I=(S,x)=>(B=-1)=>x(~B?S.map(V=>Number(V.toFixed(B))):S),p={h:N,s:i,v:m,a:y,toHSVA(){const S=[p.h,p.s,p.v,p.a];return S.toString=I(S,x=>`hsva(${x[0]}, ${x[1]}%, ${x[2]}%, ${p.a})`),S},toHSLA(){const S=[...j(p.h,p.s,p.v),p.a];return S.toString=I(S,x=>`hsla(${x[0]}, ${x[1]}%, ${x[2]}%, ${p.a})`),S},toRGBA(){const S=[...E(p.h,p.s,p.v),p.a];return S.toString=I(S,x=>`rgba(${x[0]}, ${x[1]}, ${x[2]}, ${p.a})`),S},toCMYK(){const S=function(x,B,V){const H=E(x,B,V),z=H[0]/255,Y=H[1]/255,Q=H[2]/255,X=b(1-z,1-Y,1-Q);return[100*(X===1?0:(1-z-X)/(1-X)),100*(X===1?0:(1-Y-X)/(1-X)),100*(X===1?0:(1-Q-X)/(1-X)),100*X]}(p.h,p.s,p.v);return S.toString=I(S,x=>`cmyk(${x[0]}%, ${x[1]}%, ${x[2]}%, ${x[3]}%)`),S},toHEXA(){const S=function(B,V,H){return E(B,V,H).map(z=>C(z).toString(16).padStart(2,"0"))}(p.h,p.s,p.v),x=p.a>=1?"":Number((255*p.a).toFixed(0)).toString(16).toUpperCase().padStart(2,"0");return x&&S.push(x),S.toString=()=>`#${S.join("").toUpperCase()}`,S},clone:()=>U(p.h,p.s,p.v,p.a)};return p}const M=N=>Math.max(Math.min(N,1),0);function P(N){const i={options:Object.assign({lock:null,onchange:()=>0,onstop:()=>0},N),_keyboard(p){const{options:S}=i,{type:x,key:B}=p;if(document.activeElement===S.wrapper){const{lock:V}=i.options,H=B==="ArrowUp",z=B==="ArrowRight",Y=B==="ArrowDown",Q=B==="ArrowLeft";if(x==="keydown"&&(H||z||Y||Q)){let X=0,ie=0;V==="v"?X=H||z?1:-1:V==="h"?X=H||z?-1:1:(ie=H?-1:Y?1:0,X=Q?-1:z?1:0),i.update(M(i.cache.x+.01*X),M(i.cache.y+.01*ie)),p.preventDefault()}else B.startsWith("Arrow")&&(i.options.onstop(),p.preventDefault())}},_tapstart(p){o(document,["mouseup","touchend","touchcancel"],i._tapstop),o(document,["mousemove","touchmove"],i._tapmove),p.cancelable&&p.preventDefault(),i._tapmove(p)},_tapmove(p){const{options:S,cache:x}=i,{lock:B,element:V,wrapper:H}=S,z=H.getBoundingClientRect();let Y=0,Q=0;if(p){const Se=p&&p.touches&&p.touches[0];Y=p?(Se||p).clientX:0,Q=p?(Se||p).clientY:0,Y<z.left?Y=z.left:Y>z.left+z.width&&(Y=z.left+z.width),Q<z.top?Q=z.top:Q>z.top+z.height&&(Q=z.top+z.height),Y-=z.left,Q-=z.top}else x&&(Y=x.x*z.width,Q=x.y*z.height);B!=="h"&&(V.style.left=`calc(${Y/z.width*100}% - ${V.offsetWidth/2}px)`),B!=="v"&&(V.style.top=`calc(${Q/z.height*100}% - ${V.offsetHeight/2}px)`),i.cache={x:Y/z.width,y:Q/z.height};const X=M(Y/z.width),ie=M(Q/z.height);switch(B){case"v":return S.onchange(X);case"h":return S.onchange(ie);default:return S.onchange(X,ie)}},_tapstop(){i.options.onstop(),u(document,["mouseup","touchend","touchcancel"],i._tapstop),u(document,["mousemove","touchmove"],i._tapmove)},trigger(){i._tapmove()},update(p=0,S=0){const{left:x,top:B,width:V,height:H}=i.options.wrapper.getBoundingClientRect();i.options.lock==="h"&&(S=p),i._tapmove({clientX:x+V*p,clientY:B+H*S})},destroy(){const{options:p,_tapstart:S,_keyboard:x}=i;u(document,["keydown","keyup"],x),u([p.wrapper,p.element],"mousedown",S),u([p.wrapper,p.element],"touchstart",S,{passive:!1})}},{options:m,_tapstart:y,_keyboard:I}=i;return o([m.wrapper,m.element],"mousedown",y),o([m.wrapper,m.element],"touchstart",y,{passive:!1}),o(document,["keydown","keyup"],I),i}function h(N={}){N=Object.assign({onchange:()=>0,className:"",elements:[]},N);const i=o(N.elements,"click",m=>{N.elements.forEach(y=>y.classList[m.target===y?"add":"remove"](N.className)),N.onchange(m),m.stopPropagation()});return{destroy:()=>u(...i)}}const F={variantFlipOrder:{start:"sme",middle:"mse",end:"ems"},positionFlipOrder:{top:"tbrl",right:"rltb",bottom:"btrl",left:"lrbt"},position:"bottom",margin:8,padding:0},T=(N,i,m)=>{const y=typeof N!="object"||N instanceof HTMLElement?{reference:N,popper:i,...m}:N;return{update(I=y){const{reference:p,popper:S}=Object.assign(y,I);if(!S||!p)throw new Error("Popper- or reference-element missing.");return((x,B,V)=>{const{container:H,arrow:z,margin:Y,padding:Q,position:X,variantFlipOrder:ie,positionFlipOrder:Se}={container:document.documentElement.getBoundingClientRect(),...F,...V},{left:Ye,top:Qe}=B.style;B.style.left="0",B.style.top="0";const re=x.getBoundingClientRect(),de=B.getBoundingClientRect(),Hn={t:re.top-de.height-Y,b:re.bottom+Y,r:re.right+Y,l:re.left-de.width-Y},zn={vs:re.left,vm:re.left+re.width/2-de.width/2,ve:re.left+re.width-de.width,hs:re.top,hm:re.bottom-re.height/2-de.height/2,he:re.bottom-de.height},[Kn,Wn="middle"]=X.split("-"),Jn=Se[Kn],Gn=ie[Wn],{top:Ft,left:Ot,bottom:Vt,right:jt}=H;for(const Le of Jn){const xe=Le==="t"||Le==="b";let Ue=Hn[Le];const[Xe,Ze]=xe?["top","left"]:["left","top"],[et,tt]=xe?[de.height,de.width]:[de.width,de.height],[Yn,Qn]=xe?[Vt,jt]:[jt,Vt],[Xn,Zn]=xe?[Ft,Ot]:[Ot,Ft];if(!(Ue<Xn||Ue+et+Q>Yn))for(const nt of Gn){let De=zn[(xe?"v":"h")+nt];if(!(De<Zn||De+tt+Q>Qn)){if(De-=de[Ze],Ue-=de[Xe],B.style[Ze]=`${De}px`,B.style[Xe]=`${Ue}px`,z){const ot=xe?re.width/2:re.height/2,Oe=tt/2,Ht=ot>Oe,eo=De+{s:Ht?Oe:ot,m:Oe,e:Ht?Oe:tt-ot}[nt],to=Ue+{t:et,b:0,r:0,l:et}[Le];z.style[Ze]=`${eo}px`,z.style[Xe]=`${to}px`}return Le+nt}}}return B.style.left=Ye,B.style.top=Qe,null})(p,S,y)}}},te=class te{constructor(i){le(this,"_initializingActive",!0);le(this,"_recalc",!0);le(this,"_nanopop",null);le(this,"_root",null);le(this,"_color",U());le(this,"_lastColor",U());le(this,"_swatchColors",[]);le(this,"_setupAnimationFrame",null);le(this,"_eventListener",{init:[],save:[],hide:[],show:[],clear:[],change:[],changestop:[],cancel:[],swatchselect:[]});this.options=i=Object.assign({...te.DEFAULT_OPTIONS},i);const{swatches:m,components:y,theme:I,sliders:p,lockOpacity:S,padding:x}=i;["nano","monolith"].includes(I)&&!p&&(i.sliders="h"),y.interaction||(y.interaction={});const{preview:B,opacity:V,hue:H,palette:z}=y;y.opacity=!S&&V,y.palette=z||B||V||H,this._preBuild(),this._buildComponents(),this._bindEvents(),this._finalBuild(),m&&m.length&&m.forEach(ie=>this.addSwatch(ie));const{button:Y,app:Q}=this._root;this._nanopop=T(Y,Q,{margin:x}),Y.setAttribute("role","button"),Y.setAttribute("aria-label",this._t("btn:toggle"));const X=this;this._setupAnimationFrame=requestAnimationFrame(function ie(){if(!Q.offsetWidth)return requestAnimationFrame(ie);X.setColor(i.default),X._rePositioningPicker(),i.defaultRepresentation&&(X._representation=i.defaultRepresentation,X.setColorRepresentation(X._representation)),i.showAlways&&X.show(),X._initializingActive=!1,X._emit("init")})}_preBuild(){const{options:i}=this;for(const m of["el","container"])i[m]=g(i[m]);this._root=(m=>{const{components:y,useAsButton:I,inline:p,appClass:S,theme:x,lockOpacity:B}=m.options,V=Q=>Q?"":'style="display:none" hidden',H=Q=>m._t(Q),z=f(`
      <div :ref="root" class="pickr">

        ${I?"":'<button type="button" :ref="button" class="pcr-button"></button>'}

        <div :ref="app" class="pcr-app ${S||""}" data-theme="${x}" ${p?'style="position: unset"':""} aria-label="${H("ui:dialog")}" role="window">
          <div class="pcr-selection" ${V(y.palette)}>
            <div :obj="preview" class="pcr-color-preview" ${V(y.preview)}>
              <button type="button" :ref="lastColor" class="pcr-last-color" aria-label="${H("btn:last-color")}"></button>
              <div :ref="currentColor" class="pcr-current-color"></div>
            </div>

            <div :obj="palette" class="pcr-color-palette">
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="palette" class="pcr-palette" tabindex="0" aria-label="${H("aria:palette")}" role="listbox"></div>
            </div>

            <div :obj="hue" class="pcr-color-chooser" ${V(y.hue)}>
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="slider" class="pcr-hue pcr-slider" tabindex="0" aria-label="${H("aria:hue")}" role="slider"></div>
            </div>

            <div :obj="opacity" class="pcr-color-opacity" ${V(y.opacity)}>
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="slider" class="pcr-opacity pcr-slider" tabindex="0" aria-label="${H("aria:opacity")}" role="slider"></div>
            </div>
          </div>

          <div class="pcr-swatches ${y.palette?"":"pcr-last"}" :ref="swatches"></div>

          <div :obj="interaction" class="pcr-interaction" ${V(Object.keys(y.interaction).length)}>
            <input :ref="result" class="pcr-result" type="text" spellcheck="false" ${V(y.interaction.input)} aria-label="${H("aria:input")}">

            <input :arr="options" class="pcr-type" data-type="HEXA" value="${B?"HEX":"HEXA"}" type="button" ${V(y.interaction.hex)}>
            <input :arr="options" class="pcr-type" data-type="RGBA" value="${B?"RGB":"RGBA"}" type="button" ${V(y.interaction.rgba)}>
            <input :arr="options" class="pcr-type" data-type="HSLA" value="${B?"HSL":"HSLA"}" type="button" ${V(y.interaction.hsla)}>
            <input :arr="options" class="pcr-type" data-type="HSVA" value="${B?"HSV":"HSVA"}" type="button" ${V(y.interaction.hsva)}>
            <input :arr="options" class="pcr-type" data-type="CMYK" value="CMYK" type="button" ${V(y.interaction.cmyk)}>

            <input :ref="save" class="pcr-save" value="${H("btn:save")}" type="button" ${V(y.interaction.save)} aria-label="${H("aria:btn:save")}">
            <input :ref="cancel" class="pcr-cancel" value="${H("btn:cancel")}" type="button" ${V(y.interaction.cancel)} aria-label="${H("aria:btn:cancel")}">
            <input :ref="clear" class="pcr-clear" value="${H("btn:clear")}" type="button" ${V(y.interaction.clear)} aria-label="${H("aria:btn:clear")}">
          </div>
        </div>
      </div>
    `),Y=z.interaction;return Y.options.find(Q=>!Q.hidden&&!Q.classList.add("active")),Y.type=()=>Y.options.find(Q=>Q.classList.contains("active")),z})(this),i.useAsButton&&(this._root.button=i.el),i.container.appendChild(this._root.root)}_finalBuild(){const i=this.options,m=this._root;if(i.container.removeChild(m.root),i.inline){const y=i.el.parentElement;i.el.nextSibling?y.insertBefore(m.app,i.el.nextSibling):y.appendChild(m.app)}else i.container.appendChild(m.app);i.useAsButton?i.inline&&i.el.remove():i.el.parentNode.replaceChild(m.root,i.el),i.disabled&&this.disable(),i.comparison||(m.button.style.transition="none",i.useAsButton||(m.preview.lastColor.style.transition="none")),this.hide()}_buildComponents(){const i=this,m=this.options.components,y=(i.options.sliders||"v").repeat(2),[I,p]=y.match(/^[vh]+$/g)?y:[],S=()=>this._color||(this._color=this._lastColor.clone()),x={palette:P({element:i._root.palette.picker,wrapper:i._root.palette.palette,onstop:()=>i._emit("changestop","slider",i),onchange(B,V){if(!m.palette)return;const H=S(),{_root:z,options:Y}=i,{lastColor:Q,currentColor:X}=z.preview;i._recalc&&(H.s=100*B,H.v=100-100*V,H.v<0&&(H.v=0),i._updateOutput("slider"));const ie=H.toRGBA().toString(0);this.element.style.background=ie,this.wrapper.style.background=`
                        linear-gradient(to top, rgba(0, 0, 0, ${H.a}), transparent),
                        linear-gradient(to left, hsla(${H.h}, 100%, 50%, ${H.a}), rgba(255, 255, 255, ${H.a}))
                    `,Y.comparison?Y.useAsButton||i._lastColor||Q.style.setProperty("--pcr-color",ie):(z.button.style.setProperty("--pcr-color",ie),z.button.classList.remove("clear"));const Se=H.toHEXA().toString();for(const{el:Ye,color:Qe}of i._swatchColors)Ye.classList[Se===Qe.toHEXA().toString()?"add":"remove"]("pcr-active");X.style.setProperty("--pcr-color",ie)}}),hue:P({lock:p==="v"?"h":"v",element:i._root.hue.picker,wrapper:i._root.hue.slider,onstop:()=>i._emit("changestop","slider",i),onchange(B){if(!m.hue||!m.palette)return;const V=S();i._recalc&&(V.h=360*B),this.element.style.backgroundColor=`hsl(${V.h}, 100%, 50%)`,x.palette.trigger()}}),opacity:P({lock:I==="v"?"h":"v",element:i._root.opacity.picker,wrapper:i._root.opacity.slider,onstop:()=>i._emit("changestop","slider",i),onchange(B){if(!m.opacity||!m.palette)return;const V=S();i._recalc&&(V.a=Math.round(100*B)/100),this.element.style.background=`rgba(0, 0, 0, ${V.a})`,x.palette.trigger()}}),selectable:h({elements:i._root.interaction.options,className:"active",onchange(B){i._representation=B.target.getAttribute("data-type").toUpperCase(),i._recalc&&i._updateOutput("swatch")}})};this._components=x}_bindEvents(){const{_root:i,options:m}=this,y=[o(i.interaction.clear,"click",()=>this._clearColor()),o([i.interaction.cancel,i.preview.lastColor],"click",()=>{this.setHSVA(...(this._lastColor||this._color).toHSVA(),!0),this._emit("cancel")}),o(i.interaction.save,"click",()=>{!this.applyColor()&&!m.showAlways&&this.hide()}),o(i.interaction.result,["keyup","input"],I=>{this.setColor(I.target.value,!0)&&!this._initializingActive&&(this._emit("change",this._color,"input",this),this._emit("changestop","input",this)),I.stopImmediatePropagation()}),o(i.interaction.result,["focus","blur"],I=>{this._recalc=I.type==="blur",this._recalc&&this._updateOutput(null)}),o([i.palette.palette,i.palette.picker,i.hue.slider,i.hue.picker,i.opacity.slider,i.opacity.picker],["mousedown","touchstart"],()=>this._recalc=!0,{passive:!0})];if(!m.showAlways){const I=m.closeWithKey;y.push(o(i.button,"click",()=>this.isOpen()?this.hide():this.show()),o(document,"keyup",p=>this.isOpen()&&(p.key===I||p.code===I)&&this.hide()),o(document,["touchstart","mousedown"],p=>{this.isOpen()&&!_(p).some(S=>S===i.app||S===i.button)&&this.hide()},{capture:!0}))}if(m.adjustableNumbers){const I={rgba:[255,255,255,1],hsva:[360,100,100,1],hsla:[360,100,100,1],cmyk:[100,100,100,100]};k(i.interaction.result,(p,S,x)=>{const B=I[this.getColorRepresentation().toLowerCase()];if(B){const V=B[x],H=p+(V>=100?1e3*S:S);return H<=0?0:Number((H<V?H:V).toPrecision(3))}return p})}if(m.autoReposition&&!m.inline){let I=null;const p=this;y.push(o(window,["scroll","resize"],()=>{p.isOpen()&&(m.closeOnScroll&&p.hide(),I===null?(I=setTimeout(()=>I=null,100),requestAnimationFrame(function S(){p._rePositioningPicker(),I!==null&&requestAnimationFrame(S)})):(clearTimeout(I),I=setTimeout(()=>I=null,100)))},{capture:!0}))}this._eventBindings=y}_rePositioningPicker(){const{options:i}=this;if(!i.inline&&!this._nanopop.update({container:document.body.getBoundingClientRect(),position:i.position})){const m=this._root.app,y=m.getBoundingClientRect();m.style.top=(window.innerHeight-y.height)/2+"px",m.style.left=(window.innerWidth-y.width)/2+"px"}}_updateOutput(i){const{_root:m,_color:y,options:I}=this;if(m.interaction.type()){const p=`to${m.interaction.type().getAttribute("data-type")}`;m.interaction.result.value=typeof y[p]=="function"?y[p]().toString(I.outputPrecision):""}!this._initializingActive&&this._recalc&&this._emit("change",y,i,this)}_clearColor(i=!1){const{_root:m,options:y}=this;y.useAsButton||m.button.style.setProperty("--pcr-color","rgba(0, 0, 0, 0.15)"),m.button.classList.add("clear"),y.showAlways||this.hide(),this._lastColor=null,this._initializingActive||i||(this._emit("save",null),this._emit("clear"))}_parseLocalColor(i){const{values:m,type:y,a:I}=O(i),{lockOpacity:p}=this.options,S=I!==void 0&&I!==1;return m&&m.length===3&&(m[3]=void 0),{values:!m||p&&S?null:m,type:y}}_t(i){return this.options.i18n[i]||te.I18N_DEFAULTS[i]}_emit(i,...m){this._eventListener[i].forEach(y=>y(...m,this))}on(i,m){return this._eventListener[i].push(m),this}off(i,m){const y=this._eventListener[i]||[],I=y.indexOf(m);return~I&&y.splice(I,1),this}addSwatch(i){const{values:m}=this._parseLocalColor(i);if(m){const{_swatchColors:y,_root:I}=this,p=U(...m),S=a(`<button type="button" style="--pcr-color: ${p.toRGBA().toString(0)}" aria-label="${this._t("btn:swatch")}"/>`);return I.swatches.appendChild(S),y.push({el:S,color:p}),this._eventBindings.push(o(S,"click",()=>{this.setHSVA(...p.toHSVA(),!0),this._emit("swatchselect",p),this._emit("change",p,"swatch",this)})),!0}return!1}removeSwatch(i){const m=this._swatchColors[i];if(m){const{el:y}=m;return this._root.swatches.removeChild(y),this._swatchColors.splice(i,1),!0}return!1}applyColor(i=!1){const{preview:m,button:y}=this._root,I=this._color.toRGBA().toString(0);return m.lastColor.style.setProperty("--pcr-color",I),this.options.useAsButton||y.style.setProperty("--pcr-color",I),y.classList.remove("clear"),this._lastColor=this._color.clone(),this._initializingActive||i||this._emit("save",this._color),this}destroy(){cancelAnimationFrame(this._setupAnimationFrame),this._eventBindings.forEach(i=>u(...i)),Object.keys(this._components).forEach(i=>this._components[i].destroy())}destroyAndRemove(){this.destroy();const{root:i,app:m}=this._root;i.parentElement&&i.parentElement.removeChild(i),m.parentElement.removeChild(m),Object.keys(this).forEach(y=>this[y]=null)}hide(){return!!this.isOpen()&&(this._root.app.classList.remove("visible"),this._emit("hide"),!0)}show(){return!this.options.disabled&&!this.isOpen()&&(this._root.app.classList.add("visible"),this._rePositioningPicker(),this._emit("show",this._color),this)}isOpen(){return this._root.app.classList.contains("visible")}setHSVA(i=360,m=0,y=0,I=1,p=!1){const S=this._recalc;if(this._recalc=!1,i<0||i>360||m<0||m>100||y<0||y>100||I<0||I>1)return!1;this._color=U(i,m,y,I);const{hue:x,opacity:B,palette:V}=this._components;return x.update(i/360),B.update(I),V.update(m/100,1-y/100),p||this.applyColor(),S&&this._updateOutput(),this._recalc=S,!0}setColor(i,m=!1){if(i===null)return this._clearColor(m),!0;const{values:y,type:I}=this._parseLocalColor(i);if(y){const p=I.toUpperCase(),{options:S}=this._root.interaction,x=S.find(B=>B.getAttribute("data-type")===p);if(x&&!x.hidden)for(const B of S)B.classList[B===x?"add":"remove"]("active");return!!this.setHSVA(...y,m)&&this.setColorRepresentation(p)}return!1}setColorRepresentation(i){return i=i.toUpperCase(),!!this._root.interaction.options.find(m=>m.getAttribute("data-type").startsWith(i)&&!m.click())}getColorRepresentation(){return this._representation}getColor(){return this._color}getSelectedColor(){return this._lastColor}getRoot(){return this._root}disable(){return this.hide(),this.options.disabled=!0,this._root.button.classList.add("disabled"),this}enable(){return this.options.disabled=!1,this._root.button.classList.remove("disabled"),this}};le(te,"utils",e),le(te,"version","1.9.1"),le(te,"I18N_DEFAULTS",{"ui:dialog":"color picker dialog","btn:toggle":"toggle color picker dialog","btn:swatch":"color swatch","btn:last-color":"use previous color","btn:save":"Save","btn:cancel":"Cancel","btn:clear":"Clear","aria:btn:save":"save and close","aria:btn:cancel":"cancel and close","aria:btn:clear":"clear and close","aria:input":"color input field","aria:palette":"color selection area","aria:hue":"hue selection slider","aria:opacity":"selection slider"}),le(te,"DEFAULT_OPTIONS",{appClass:null,theme:"classic",useAsButton:!1,padding:8,disabled:!1,comparison:!0,closeOnScroll:!1,outputPrecision:0,lockOpacity:!1,autoReposition:!0,container:"body",components:{interaction:{}},i18n:{},swatches:null,inline:!1,sliders:null,default:"#42445a",defaultRepresentation:null,position:"bottom-middle",adjustableNumbers:!0,showAlways:!1,closeWithKey:"Escape"}),le(te,"create",i=>new te(i));let J=te;return n=n.default})())}(Et)),Et.exports}var ba=ya();const wa=xn(ba),ka={class:"color-picker-wrapper"},Ca={class:"color-picker-action"},$a={__name:"index",props:{value:{type:String,default:"#000000"}},emits:["update:value","change"],setup(c,{emit:l}){const s=l,n=c,e=K(null);return Re(()=>{const t=wa.create({el:e.value,container:"body",theme:"nano",default:n.value,defaultRepresentation:"HEX",swatches:["rgba(244, 67, 54, 1)","rgba(233, 30, 99, 0.95)","rgba(156, 39, 176, 0.9)","rgba(103, 58, 183, 0.85)","rgba(63, 81, 181, 0.8)","rgba(33, 150, 243, 0.75)","rgba(3, 169, 244, 0.7)","rgba(0, 188, 212, 0.7)","rgba(0, 150, 136, 0.75)","rgba(76, 175, 80, 0.8)","rgba(139, 195, 74, 0.85)","rgba(205, 220, 57, 0.9)","rgba(255, 235, 59, 0.95)","rgba(255, 193, 7, 1)"],components:{preview:!0,opacity:!0,hue:!0,interaction:{hex:!1,rgba:!1,hsla:!1,hsva:!1,cmyk:!1,input:!0,clear:!1,save:!0}}});t.on("save",(o,u)=>{let a=o.toHEXA().toString();s("update:value",a),s("change",a),u.hide()}),t.on("show",()=>{const o=document.querySelectorAll(".pcr-save");o&&o.length&&o.forEach(function(u){u.tagName.toLowerCase()==="input"&&(u.value="保存")})})}),(t,o)=>{const u=ye;return q(),G("div",ka,[d(u,{value:n.value,readonly:!0,placeholder:"Basic usage"},null,8,["value"]),r("span",Ca,[r("span",{ref_key:"colorPicker",ref:e},null,512)])])}}},Pt=se($a,[["__scopeId","data-v-f2a9e7d0"]]),Aa="/assets/img/quick-help-BZ3Cu-IE.png",Sa={class:"quick-instructions-box"},xa={class:"quick-action-right"},Ea={class:"quick-list-box"},Ia={class:"list-box-wrap"},Ba={class:"drag-btn"},Ra={class:"left-box"},Pa={class:"title"},Ta={class:"content"},Ma={class:"opration-box"},Na={class:"form-box"},La={__name:"quick-instruction",props:{type:{type:Number,default:void 0}},emits:["updata"],setup(c,{emit:l}){const s=c,n=l,e=ao(),t=Ke(),{robotInfo:o}=ze(t),{getRobot:u}=t,a=K([]),f=K(parseInt(s.type==-1?o.value.fast_command_switch:o.value.yunpc_fast_command_switch)||0);Ie(a,P=>{n("updata",{comand_list:P,fast_command_switch:f.value})});const _=()=>{xo({robot_key:o.value.robot_key,app_id:s.type}).then(P=>{a.value=P.data||[],t.setQuickCommand(P.data)})};_();const g=me.useForm,k=K(!1),b=K("添加快捷指令"),R=ce({robot_id:e.query.id,app_id:s.type,title:"",typ:1,content:"",id:""}),D=P=>{const{id:h}=o.value;Bo({robot_key:o.value.robot_key,app_id:s.type}).then(F=>{f.value=P,n("updata",{comand_list:a.value,fast_command_switch:f.value}),u(h),oe.success("修改成功")}).catch(F=>{f.value=!f.value})},C=()=>{R.content="",A(["content"])},E=P=>{k.value=!0,L(),b.value=P.id?"编辑快捷指令":"添加快捷指令",R.title=P.title||"",R.content=P.content||"",R.id=P.id||"",R.typ=+P.typ||1},j=ce({title:[{message:"请输入指令标题",required:!0}],content:[{message:"",required:!0},{validator:async(P,h)=>h==""?Promise.reject(new Error(`请输入${R.typ==1?"内容":"网址"}`)):R.typ==1||To(h)?Promise.resolve():Promise.reject(new Error("请输入合法网页链接"))}]}),{resetFields:L,validate:w,clearValidate:A,validateInfos:$}=g(R,j),O=()=>{w().then(()=>{Ro({...he(R)}).then(P=>{oe.success("修改成功"),k.value=!1,_()})})},U=P=>{ue.confirm({title:"提醒",icon:d(Te),content:"确定要删除该快捷指令吗?",okText:"确定",okType:"danger",cancelText:"取消",onOk(){Io({id:P}).then(h=>{oe.success("删除成功"),_()})},onCancel(){}})},M=P=>{let h=a.value.map((F,T)=>({id:+F.id,sort:T+1}));Eo({data:h}).then(F=>{oe.success("保存成功"),_()})};return(P,h)=>{const F=po,T=Tt,J=Bn,te=fe,N=ye,i=ke,m=Pn,y=Rn,I=Mt,p=me,S=ue;return q(),G("div",Sa,[d(Be,null,{title:v(()=>[h[9]||(h[9]=W(" 快捷指令设置 ")),d(F,{placement:"top"},{content:v(()=>h[8]||(h[8]=[r("div",{class:"help-box"},[r("div",null,"快捷指令是对话输入框上方的按钮,配置完成后,用户可以快速发起预设对话"),r("img",{src:Aa,alt:""})],-1)])),default:v(()=>[d(ne(fo),{class:"help-icon"})]),_:1})]),icon:v(()=>[d(T,{name:"quick-Instruction",style:{"font-size":"16px",color:"#262626"}})]),action:v(()=>[r("div",xa,[d(J,{onChange:D,class:"switch-item",checkedValue:1,unCheckedValue:0,checked:f.value,"onUpdate:checked":h[0]||(h[0]=x=>f.value=x),"checked-children":"开","un-checked-children":"关"},null,8,["checked"]),d(te,{onClick:E,size:"small",type:"primary"},{default:v(()=>h[10]||(h[10]=[W("添加")])),_:1,__:[10]})])]),default:v(()=>[r("div",Ea,[d(ne(Mo),{modelValue:a.value,"onUpdate:modelValue":h[1]||(h[1]=x=>a.value=x),"item-key":"id",onEnd:h[2]||(h[2]=x=>M(x)),handle:".drag-btn"},{item:v(({element:x,index:B})=>[r("div",Ia,[(q(),G("div",{class:"list-item",key:x.id},[r("div",Ba,[d(T,{name:"drag"})]),r("div",Ra,[r("div",Pa,ae(x.title),1),r("div",Ta,ae(x.content),1)]),r("div",Ma,[d(ne(co),{onClick:V=>E(x)},null,8,["onClick"]),d(ne(uo),{onClick:V=>U(x.id)},null,8,["onClick"])])]))])]),_:1},8,["modelValue"])])]),_:1}),d(S,{open:k.value,"onUpdate:open":h[7]||(h[7]=x=>k.value=x),title:b.value,onOk:O,width:"576px"},{default:v(()=>[r("div",Na,[d(p,{layout:"vertical"},{default:v(()=>[d(i,zt({label:"指令标题"},ne($).title),{default:v(()=>[d(N,{placeholder:"请输入指令标题",maxLength:20,value:R.title,"onUpdate:value":h[3]||(h[3]=x=>R.title=x)},null,8,["value"])]),_:1},16),d(i,{label:"指令类型",required:""},{default:v(()=>[d(y,{value:R.typ,"onUpdate:value":h[4]||(h[4]=x=>R.typ=x),onChange:C},{default:v(()=>[d(m,{value:1},{default:v(()=>h[11]||(h[11]=[W("输入内容")])),_:1,__:[11]}),d(m,{value:2},{default:v(()=>h[12]||(h[12]=[W("跳转网页")])),_:1,__:[12]})]),_:1},8,["value"])]),_:1}),d(i,zt({label:R.typ==1?"指令内容":"网页链接",required:""},ne($).content),{default:v(()=>[R.typ==1?(q(),Z(I,{key:0,style:{height:"100px"},value:R.content,"onUpdate:value":h[5]||(h[5]=x=>R.content=x),placeholder:"请输入指令内容"},null,8,["value"])):(q(),Z(N,{key:1,placeholder:"请输入网页链接",value:R.content,"onUpdate:value":h[6]||(h[6]=x=>R.content=x)},null,8,["value"]))]),_:1},16,["label"])]),_:1})])]),_:1},8,["open","title"])])}}},jn=se(La,[["__scopeId","data-v-9444f65b"]]),Ua={class:"web-app-box"},Da={class:"box-left"},qa={class:"box-wrapper"},Fa={class:"web-app-info"},Oa={class:"web-app-link"},Va=["href"],ja={class:"link-action"},Ha=["src"],za={class:"card-title"},Ka={class:"web-app-link"},Wa=["href"],Ja={class:"link-action"},Ga=["src"],Ya={class:"access-restrictions form-box"},Qa={class:"form-item"},Xa={class:"form-item-body"},Za={class:"box-wrapper"},es={class:"web-app-style form-box"},ts={class:"box-wrapper"},ns={class:"box-right"},os={class:"demo-box"},as=["src"],ss={__name:"web-app",setup(c){const l=En(),s=Ke(),{robotInfo:n,external_config_h5:e}=ze(s),{h5_website:t,h5_domain:o,robot_key:u}=n.value,{getRobot:a}=s,f=K(""),_=K(""),g=K(),k=ce({logo:e.value.logo,pageTitle:e.value.pageTitle,navbarShow:e.value.navbarShow,lang:e.value.lang,pageStyle:e.value.pageStyle}),b=ve(()=>`${o}/#/chat/pc?robot_key=${u}`),R=ve(()=>`${o}/#/chat/h5?robot_key=${u}`),D=ve(()=>t);Ie(k,P=>{E(P)});const C=P=>{E(P,"updataQuickComand")},E=(P,h)=>{document.getElementById("mobile-preview").contentWindow.postMessage({type:h||"onPreview",data:JSON.parse(JSON.stringify(P))},"*")},j={lang:[{required:!0,message:"请选择语言",trigger:"change"}],pageTitle:[{required:!0,message:"请输入标题",trigger:"input"},{trigger:"input",validator:()=>k.logo?Promise.resolve():Promise.reject("请上传logo")}],navbarShow:[{required:!0,message:"请选择是否显示标题栏",trigger:"change"}],pageStyle:{navbarBackgroundColor:[{required:!0,message:"请选择标题栏颜色",trigger:"change"}]}},L=K(e.value.accessRestrictionsType||1),w=()=>{let P={...he(e.value)};P.accessRestrictionsType=L.value,A(P)},A=P=>{const{id:h}=n.value;Tn({id:h,external_config_h5:JSON.stringify(P)}).then(()=>{a(h),oe.success("保存成功"),l.go(0)})},$=()=>{g.value.validate().then(()=>{let P={...he(k)};P.accessRestrictionsType=L.value,A(P)}).catch(P=>{})},O=P=>{window.open(P)},U=P=>{Pe(P),oe.success("复制成功")},M=async()=>{try{f.value=await kn.toDataURL(b.value),_.value=await kn.toDataURL(R.value)}catch(P){console.error(P)}};return setTimeout(()=>{M()},300),(P,h)=>{const F=Tt,T=fe,J=_o,te=Pn,N=Rn,i=ke,m=Lt,y=Nt,I=me;return q(),G("div",Ua,[r("div",Da,[r("div",qa,[d(Be,{title:"H5链接"},{icon:v(()=>[d(F,{name:"phone",style:{"font-size":"16px",color:"#262626"}})]),default:v(()=>[r("div",Fa,[r("div",Oa,[r("a",{href:R.value,target:"_blank"},ae(R.value),9,Va)]),r("div",ja,[d(T,{class:"action-btn",type:"primary",ghost:"",onClick:h[0]||(h[0]=p=>U(R.value))},{default:v(()=>h[10]||(h[10]=[W("复 制")])),_:1,__:[10]}),d(T,{class:"action-btn",onClick:h[1]||(h[1]=p=>O(R.value))},{default:v(()=>h[11]||(h[11]=[W("预 览")])),_:1,__:[11]}),d(J,{color:"#fff",placement:"top"},{title:v(()=>[r("img",{style:{width:"180px"},src:_.value,alt:""},null,8,Ha)]),default:v(()=>[d(T,{class:"action-btn"},{default:v(()=>h[12]||(h[12]=[W("二维码")])),_:1,__:[12]})]),_:1})]),r("div",za,[d(F,{name:"circularNeedle",style:{"font-size":"16px",color:"#262626"}}),h[13]||(h[13]=r("div",{class:"title-text"},"pc网页链接",-1))]),r("div",Ka,[r("a",{href:b.value,target:"_blank"},ae(b.value),9,Wa)]),r("div",Ja,[d(T,{class:"action-btn",type:"primary",ghost:"",onClick:h[2]||(h[2]=p=>U(b.value))},{default:v(()=>h[14]||(h[14]=[W("复 制")])),_:1,__:[14]}),d(T,{class:"action-btn",onClick:h[3]||(h[3]=p=>O(b.value))},{default:v(()=>h[15]||(h[15]=[W("预 览")])),_:1,__:[15]}),d(J,{color:"#fff",placement:"top"},{title:v(()=>[r("img",{style:{width:"180px"},src:f.value,alt:""},null,8,Ga)]),default:v(()=>[d(T,{class:"action-btn"},{default:v(()=>h[16]||(h[16]=[W("二维码")])),_:1,__:[16]})]),_:1})]),r("div",Ya,[r("div",Qa,[h[20]||(h[20]=r("div",{class:"form-item-label"},"访问限制",-1)),r("div",Xa,[d(N,{value:L.value,"onUpdate:value":h[4]||(h[4]=p=>L.value=p),onChange:w},{default:v(()=>[d(te,{value:1},{default:v(()=>h[17]||(h[17]=[r("span",{class:"default-text-color"},"无限制",-1)])),_:1,__:[17]}),d(te,{value:2},{default:v(()=>h[18]||(h[18]=[r("span",{class:"default-text-color"},"登录后才可访问",-1)])),_:1,__:[18]}),ee("",!0)]),_:1},8,["value"])])])])])]),_:1})]),r("div",Za,[d(Be,{title:"样式设置"},{icon:v(()=>[d(F,{name:"phone",style:{"font-size":"16px",color:"#262626"}})]),action:v(()=>[d(T,{onClick:$,size:"small",type:"primary"},{default:v(()=>h[21]||(h[21]=[W("保存")])),_:1,__:[21]})]),default:v(()=>[r("div",es,[d(I,{ref_key:"formRef",ref:g,layout:"vertical",model:k,rules:j},{default:v(()=>[d(i,{class:"form-item",label:"是否显示标题栏",name:"navbarShow"},{default:v(()=>[d(N,{value:k.navbarShow,"onUpdate:value":h[5]||(h[5]=p=>k.navbarShow=p),name:"navbarShow"},{default:v(()=>[d(te,{value:1},{default:v(()=>h[22]||(h[22]=[W("显示")])),_:1,__:[22]}),d(te,{value:2},{default:v(()=>h[23]||(h[23]=[W("不显示")])),_:1,__:[23]})]),_:1},8,["value"])]),_:1}),d(i,{class:"form-item",label:"页面标题",name:"pageTitle"},{default:v(()=>[d(Ne,{avatar:k.logo,"onUpdate:avatar":h[6]||(h[6]=p=>k.logo=p),value:k.pageTitle,"onUpdate:value":h[7]||(h[7]=p=>k.pageTitle=p)},null,8,["avatar","value"])]),_:1}),d(i,{class:"form-item",label:"标题栏颜色",name:["pageStyle","navbarBackgroundColor"]},{default:v(()=>[d(Pt,{value:k.pageStyle.navbarBackgroundColor,"onUpdate:value":h[8]||(h[8]=p=>k.pageStyle.navbarBackgroundColor=p)},null,8,["value"])]),_:1}),d(i,{class:"form-item",label:"语言",name:"lang"},{default:v(()=>[d(y,{style:{width:"180px"},value:k.lang,"onUpdate:value":h[9]||(h[9]=p=>k.lang=p),placeholder:"请选择语言"},{default:v(()=>[d(m,{value:"zh-CN"},{default:v(()=>h[24]||(h[24]=[W("简体中文")])),_:1,__:[24]}),d(m,{value:"en-US"},{default:v(()=>h[25]||(h[25]=[W("English")])),_:1,__:[25]})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])])]),_:1})]),r("div",ts,[d(jn,{type:ne(n).app_id,onUpdata:C},null,8,["type"])])]),r("div",ns,[r("div",os,[r("iframe",{id:"mobile-preview",src:D.value,frameborder:"0"},null,8,as)])])])}}},is=se(ss,[["__scopeId","data-v-2faed53d"]]);function rs({pc_domain:c,robot_key:l}){var s=`<script>
  (function (z, h, i, m, a, j, s) {
    z[m] = z[m] || function () {
      (z[m].a = z[m].a || []).push(arguments);
    };
    (j = h.createElement(i)), (s = h.getElementsByTagName(i)[0]);
    j.async = true;
    j.charset = "UTF-8";
    j.setAttribute(
      "data-json",
      JSON.stringify({
        robot_key: "${l}",
        language: "zh-CN",
      })
    );
    j.id = "ai_chat_js";
    j.src = '${c}/sdk/ai-chat-sdk.umd.cjs';
    s.parentNode.insertBefore(j, s);
  })(window, document, "script", "_ai_chat");
<\/script>`;return s}const ls={class:"gradient-color-picker"},cs={class:"color-picker-box"},us={class:"gradient-type-select"},ds={class:"color-item"},ps={class:"right-arrow"},fs={class:"color-item"},_s={__name:"gradient-color-picker",props:{value:{type:String,default:""}},emits:["update:value"],setup(c,{emit:l}){const s=l,n=c,e=me.useInjectFormItemContext(),t=K([{key:1,label:"单色",value:"color",type:"color"},{key:2,label:"线性渐变（横向）",value:"to right",type:"linear-gradient"},{key:3,label:"线性渐变（竖向）",value:"to bottom",type:"linear-gradient"},{key:4,label:"径向渐变",value:"circle",type:"radial-gradient"}]),o=K("linear-gradient"),u=K("to right"),a=K("#2435E7"),f=K("#01A0FB"),_=ve(()=>o.value=="color"?a.value:`${o.value}(${u.value}, ${a.value}, ${f.value})`);Ie(()=>_.value,()=>{let k=[o.value,u.value,a.value,f.value].join(",");s("update:value",k),e.onFieldChange()}),Ie(()=>n.value,()=>{const k=n.value.split(","),[b,R,D,C]=k;o.value=b,u.value=R,a.value=D,f.value=C},{immediate:!0});const g=(k,b)=>{o.value=b.type,u.value=k,e.onFieldChange()};return(k,b)=>{const R=Lt,D=Nt;return q(),G("div",ls,[r("div",cs,[r("div",us,[d(D,{value:u.value,style:{width:"180px"},onChange:g},{default:v(()=>[(q(!0),G(pe,null,Ce(t.value,C=>(q(),Z(R,{value:C.value,type:C.type,key:C.key},{default:v(()=>[W(ae(C.label),1)]),_:2},1032,["value","type"]))),128))]),_:1},8,["value"])]),r("div",ds,[d(Pt,{value:a.value,"onUpdate:value":b[0]||(b[0]=C=>a.value=C)},null,8,["value"])]),o.value!="color"?(q(),G(pe,{key:0},[r("div",ps,[d(ne(ho))]),r("div",fs,[d(Pt,{value:f.value,"onUpdate:value":b[1]||(b[1]=C=>f.value=C)},null,8,["value"])])],64)):ee("",!0)])])}}},hs=se(_s,[["__scopeId","data-v-dfea777d"]]),ms="data:image/svg+xml,%3csvg%20width='56'%20height='56'%20viewBox='0%200%2056%2056'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='56'%20height='56'%20fill='white'/%3e%3crect%20x='14'%20y='14'%20width='28'%20height='28'%20rx='14'%20fill='%232475FC'/%3e%3crect%20x='14.5'%20y='14.5'%20width='27'%20height='27'%20rx='13.5'%20stroke='black'%20stroke-opacity='0.04'/%3e%3cg%20clip-path='url(%23clip0_2269_42995)'%3e%3cpath%20d='M31.5%2030.3385C32.7887%2030.3385%2033.8333%2029.2939%2033.8333%2028.0052C33.8333%2026.7165%2032.7887%2025.6719%2031.5%2025.6719'%20stroke='white'%20stroke-width='1.16667'%20stroke-linejoin='round'/%3e%3cpath%20d='M24.5013%2025.6719C23.2126%2025.6719%2022.168%2026.7165%2022.168%2028.0052C22.168%2029.2939%2023.2126%2030.3385%2024.5013%2030.3385'%20stroke='white'%20stroke-width='1.16667'%20stroke-linejoin='round'/%3e%3cpath%20d='M24.5%2030.3385V30.1927V29.4635V28.0052V25.6719C24.5%2023.7389%2026.067%2022.1719%2028%2022.1719C29.933%2022.1719%2031.5%2023.7389%2031.5%2025.6719V30.3385C31.5%2032.2715%2029.933%2033.8385%2028%2033.8385'%20stroke='white'%20stroke-width='1.16667'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_2269_42995'%3e%3crect%20width='14'%20height='14'%20fill='white'%20transform='translate(21%2021)'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",gs="data:image/svg+xml,%3csvg%20width='56'%20height='56'%20viewBox='0%200%2056%2056'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='56'%20height='56'%20fill='white'/%3e%3crect%20y='14'%20width='56'%20height='28'%20rx='14'%20fill='%232475FC'/%3e%3cg%20clip-path='url(%23clip0_2269_42985)'%3e%3cpath%20d='M19.5%2030.3385C20.7887%2030.3385%2021.8333%2029.2939%2021.8333%2028.0052C21.8333%2026.7165%2020.7887%2025.6719%2019.5%2025.6719'%20stroke='white'%20stroke-width='1.16667'%20stroke-linejoin='round'/%3e%3cpath%20d='M12.5013%2025.6719C11.2126%2025.6719%2010.168%2026.7165%2010.168%2028.0052C10.168%2029.2939%2011.2126%2030.3385%2012.5013%2030.3385'%20stroke='white'%20stroke-width='1.16667'%20stroke-linejoin='round'/%3e%3cpath%20d='M12.5%2030.3385V30.1927V29.4635V28.0052V25.6719C12.5%2023.7389%2014.067%2022.1719%2016%2022.1719C17.933%2022.1719%2019.5%2023.7389%2019.5%2025.6719V30.3385C19.5%2032.2715%2017.933%2033.8385%2016%2033.8385'%20stroke='white'%20stroke-width='1.16667'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3cpath%20d='M24.5414%2024.224V25.088H26.3894C26.9294%2026.936%2027.8894%2028.544%2029.2814%2029.912C27.9854%2031.088%2026.3294%2031.94%2024.3134%2032.48L24.7694%2033.236C26.8094%2032.648%2028.5134%2031.724%2029.8814%2030.464C31.1774%2031.58%2032.8094%2032.504%2034.8014%2033.248L35.2694%2032.528C33.3494%2031.82%2031.7534%2030.932%2030.4814%2029.852C31.6574%2028.58%2032.5454%2026.984%2033.1334%2025.088H35.0054V24.224H30.4214C30.0374%2023.396%2029.6294%2022.688%2029.1734%2022.112L28.3094%2022.424C28.7894%2022.988%2029.1854%2023.588%2029.5094%2024.224H24.5414ZM27.2414%2025.088H32.2334C31.7294%2026.744%2030.9494%2028.148%2029.8814%2029.312C28.6334%2028.112%2027.7574%2026.708%2027.2414%2025.088ZM40.9574%2024.116C40.7174%2024.452%2040.4534%2024.8%2040.1774%2025.148H37.0094V25.844H39.6134C39.3254%2026.18%2039.0254%2026.516%2038.7134%2026.876C39.5414%2027.032%2040.3694%2027.212%2041.2094%2027.428C40.1534%2027.764%2038.7134%2027.932%2036.8894%2027.932L37.3574%2028.64C39.3974%2028.616%2041.0414%2028.304%2042.3014%2027.716C43.5134%2028.04%2044.7254%2028.412%2045.9254%2028.844L46.4294%2028.184C45.3134%2027.812%2044.2214%2027.488%2043.1654%2027.224C43.6574%2026.864%2044.1134%2026.408%2044.5454%2025.844H46.5614V25.148H41.1254C41.3174%2024.896%2041.5214%2024.632%2041.7374%2024.344L40.9574%2024.116ZM42.2054%2026.984C41.4494%2026.792%2040.7054%2026.636%2039.9734%2026.516C40.1534%2026.324%2040.3574%2026.096%2040.5734%2025.844H43.6214C43.2614%2026.276%2042.7814%2026.648%2042.2054%2026.984ZM46.5974%2023.144H42.2414C42.0974%2022.784%2041.9534%2022.448%2041.7854%2022.148L40.8854%2022.292C41.0654%2022.556%2041.2334%2022.832%2041.3894%2023.144H36.9494V24.836H37.7654V23.876H45.7814V24.836H46.5974V23.144ZM36.6374%2029.336V30.104H40.5854C39.8414%2030.872%2038.4734%2031.556%2036.4814%2032.156L36.9614%2032.924C39.1214%2032.132%2040.5854%2031.196%2041.3534%2030.116V33.176H42.2414V30.152C43.1294%2031.256%2044.6174%2032.156%2046.7054%2032.84L47.0774%2032.084C45.2414%2031.592%2043.8854%2030.932%2043.0214%2030.104H46.9214V29.336H42.2414V28.4H41.3534V29.336H36.6374Z'%20fill='white'/%3e%3cdefs%3e%3cclipPath%20id='clip0_2269_42985'%3e%3crect%20width='14'%20height='14'%20fill='white'%20transform='translate(9%2021)'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",vs={class:"float-icon-setting"},ys={class:"form-box"},bs={class:"form-item"},ws={class:"form-content"},ks={class:"display-types"},Cs={class:"type-icon"},$s=["src"],As={key:1,class:"display-type"},Ss={class:"type-icon"},xs={class:"type-name"},Es={key:0,class:"form-item"},Is={class:"form-content"},Bs={class:"form-item"},Rs={class:"form-content"},Ps={class:"number-input"},Ts={class:"form-item"},Ms={class:"form-content"},Ns={class:"number-input"},Ls={class:"form-item"},Us={class:"form-content"},Ds={class:"form-item"},qs={class:"form-content"},Fs={class:"form-item"},Os={class:"form-content"},Vs={__name:"float-icon-setting",props:{saveLoading:{type:Boolean,default:!1},form:{type:Object,default:()=>{}}},emits:["save"],setup(c,{expose:l,emit:s}){const n=c,e=s,t=ce({displayType:1,buttonText:"快来聊聊吧~",buttonIcon:"",bottomMargin:32,rightMargin:32,showUnreadCount:1,showNewMessageTip:1}),o=_=>{t.displayType=_},u=ve(()=>t.buttonIcon?t.displayType==3:!0),a=_=>{let g=_[0];o(3),Nn({file:g,category:"icon"}).then(k=>{t.buttonIcon=k.data.link})},f=()=>{t.rightMargin,(t.rightMargin==""||t.rightMargin==null)&&(t.rightMargin=0),(t.bottomMargin==""||t.rightMargin==null)&&(t.bottomMargin=0),e("save",he(t))};return Ie(()=>n.form,_=>{Object.assign(t,_.floatBtn)},{immediate:!0}),l({handleSubmit:f}),(_,g)=>{const k=ye,b=mo,R=Bn,D=fe;return q(),Z(Be,{title:"悬浮图标设置"},{icon:v(()=>[d(ne(go),{name:"quick-Instruction",style:{"font-size":"16px",color:"#262626"}})]),default:v(()=>[r("div",vs,[W(ae(n.title)+" ",1),r("div",ys,[r("div",bs,[g[11]||(g[11]=r("div",{class:"form-item-label"},"展示形式：",-1)),r("div",ws,[r("div",ks,[r("div",{class:at(["display-type",{"is-checked":t.displayType==1}]),onClick:g[0]||(g[0]=C=>o(1))},g[8]||(g[8]=[r("div",{class:"type-icon"},[r("img",{src:ms,alt:""})],-1),r("div",{class:"type-name"},"简洁",-1)]),2),r("div",{class:at(["display-type",{"is-checked":t.displayType==2}]),onClick:g[1]||(g[1]=C=>o(2))},g[9]||(g[9]=[r("div",{class:"type-icon"},[r("img",{src:gs,alt:""})],-1),r("div",{class:"type-name"},"加文案",-1)]),2),t.buttonIcon?(q(),G("div",{key:0,class:at(["display-type",{"is-checked":t.displayType==3}]),onClick:g[2]||(g[2]=C=>o(3))},[r("div",Cs,[r("img",{src:t.buttonIcon,alt:"",title:""},null,8,$s)]),g[10]||(g[10]=r("div",{class:"type-name"},"自定义",-1))],2)):ee("",!0),u.value?(q(),G("div",As,[d(Ln,{onChange:a},{default:v(()=>[r("div",Ss,[d(ne(Ut),{style:{"font-size":"20px"}})])]),_:1}),r("div",xs,ae(t.buttonIcon?"上传图片":"自定义"),1)])):ee("",!0)])])]),t.displayType==2?(q(),G("div",Es,[g[12]||(g[12]=r("div",{class:"form-item-label"},"按钮文案：",-1)),r("div",Is,[d(k,{placeholder:"请输入按钮文案",maxlength:15,style:{width:"315px"},value:t.buttonText,"onUpdate:value":g[3]||(g[3]=C=>t.buttonText=C)},null,8,["value"])])])):ee("",!0),r("div",Bs,[g[14]||(g[14]=r("div",{class:"form-item-label"},"底边距：",-1)),r("div",Rs,[r("div",Ps,[d(b,{class:"input",value:t.bottomMargin,"onUpdate:value":g[4]||(g[4]=C=>t.bottomMargin=C)},null,8,["value"]),g[13]||(g[13]=r("span",{class:"unit"},"PX",-1))])])]),r("div",Ts,[g[16]||(g[16]=r("div",{class:"form-item-label"},"右边距：",-1)),r("div",Ms,[r("div",Ns,[d(b,{class:"input",value:t.rightMargin,"onUpdate:value":g[5]||(g[5]=C=>t.rightMargin=C)},null,8,["value"]),g[15]||(g[15]=r("span",{class:"unit"},"PX",-1))])])]),r("div",Ls,[g[17]||(g[17]=r("div",{class:"form-item-label"},"显示未读消息数：",-1)),r("div",Us,[d(R,{checked:t.showUnreadCount,"onUpdate:checked":g[6]||(g[6]=C=>t.showUnreadCount=C),unCheckedValue:0,checkedValue:1},null,8,["checked"])])]),r("div",Ds,[g[18]||(g[18]=r("div",{class:"form-item-label"},"显示新消息提示：",-1)),r("div",qs,[d(R,{checked:t.showNewMessageTip,"onUpdate:checked":g[7]||(g[7]=C=>t.showNewMessageTip=C),unCheckedValue:0,checkedValue:1},null,8,["checked"])])]),r("div",Fs,[g[20]||(g[20]=r("div",{class:"form-item-label"},null,-1)),r("div",Os,[d(D,{type:"primary",loading:n.saveLoading,onClick:f},{default:v(()=>g[19]||(g[19]=[W("保存")])),_:1,__:[19]},8,["loading"])])])])])]),_:1})}}},js=se(Vs,[["__scopeId","data-v-a4615484"]]),Hs={class:"web-app-box"},zs={class:"box-left"},Ks={class:"box-wrapper"},Ws={class:"web-app-style form-box"},Js={class:"box-wrapper"},Gs={class:"sdk-code"},Ys={class:"box-wrapper"},Qs={class:"box-wrapper"},Xs={class:"box-right"},Zs={class:"demo-box"},ei=["src"],ti={__name:"embed-website",setup(c){const l=Ke(),{robotInfo:s,external_config_pc:n}=ze(l),{getRobot:e}=l,t=rs(s.value),o=()=>{Pe(t),oe.success("复制成功")},u=K(),a=ce({headTitle:n.value.headTitle,headSubTitle:n.value.headSubTitle,headImage:n.value.headImage,lang:n.value.lang,pageStyle:n.value.pageStyle,floatBtn:n.value.floatBtn}),f=ve(()=>{let{pc_domain:C,robot_key:E}=s.value;return`${C}/web/#/chat?robot_key=${E}&language=zh-CN`});Ie(a,C=>{g(C)});const _=C=>{g(C,"updataQuickComand")},g=(C,E)=>{document.getElementById("web-preview").contentWindow.postMessage({type:E||"onPreview",data:JSON.parse(JSON.stringify(C))},"*")},k={lang:[{required:!0,message:"请选择语言",trigger:"change"}],headTitle:[{required:!0,message:"请输入标题",trigger:"input"},{trigger:"input",validator:()=>a.headImage?Promise.resolve():Promise.reject("请上传logo")}],pageStyle:{headBackgroundColor:[{required:!0,message:"请选择颜色",trigger:"change"}]}},b=()=>{const{id:C}=s.value;let E={...he(a)};Tn({id:C,external_config_pc:JSON.stringify(E)}).then(()=>{e(C),oe.success("保存成功")})},R=()=>{u.value.validate().then(()=>{b()}).catch(C=>{})},D=C=>{a.floatBtn={...C},R()};return(C,E)=>{const j=Tt,L=fe,w=ke,A=Mt,$=Lt,O=Nt,U=me;return q(),G("div",Hs,[r("div",zs,[r("div",Ks,[d(Be,{title:"样式设置"},{icon:v(()=>[d(j,{name:"pc",style:{"font-size":"16px",color:"#262626"}})]),action:v(()=>[d(L,{onClick:R,size:"small",type:"primary"},{default:v(()=>E[5]||(E[5]=[W("保存")])),_:1,__:[5]})]),default:v(()=>[r("div",Ws,[d(U,{ref_key:"formRef",ref:u,layout:"vertical",model:a,rules:k},{default:v(()=>[d(w,{class:"form-item",label:"页面标题",name:"headTitle"},{default:v(()=>[d(Ne,{avatar:a.headImage,"onUpdate:avatar":E[0]||(E[0]=M=>a.headImage=M),value:a.headTitle,"onUpdate:value":E[1]||(E[1]=M=>a.headTitle=M)},null,8,["avatar","value"])]),_:1}),d(w,{class:"form-item",label:"简介",name:"headSubTitle"},{default:v(()=>[d(A,{value:a.headSubTitle,"onUpdate:value":E[2]||(E[2]=M=>a.headSubTitle=M),placeholder:"简介将展示在客户端，不超过100个字符"},null,8,["value"])]),_:1}),d(w,{class:"form-item",label:"颜色",name:["pageStyle","headBackgroundColor"]},{default:v(()=>[d(hs,{value:a.pageStyle.headBackgroundColor,"onUpdate:value":E[3]||(E[3]=M=>a.pageStyle.headBackgroundColor=M)},null,8,["value"])]),_:1}),d(w,{class:"form-item",label:"语言",name:"lang"},{default:v(()=>[d(O,{style:{width:"180px"},value:a.lang,"onUpdate:value":E[4]||(E[4]=M=>a.lang=M),placeholder:"请选择语言"},{default:v(()=>[d($,{value:"zh-CN"},{default:v(()=>E[6]||(E[6]=[W("简体中文")])),_:1,__:[6]}),d($,{value:"en-US"},{default:v(()=>E[7]||(E[7]=[W("English")])),_:1,__:[7]})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])])]),_:1})]),r("div",Js,[d(Be,{title:"将以下代码复制到网站代码的< /body>标签之前"},{icon:v(()=>[d(j,{name:"sdk",style:{"font-size":"16px",color:"#262626"}})]),action:v(()=>[d(L,{onClick:o,size:"small"},{default:v(()=>E[8]||(E[8]=[W("复制")])),_:1,__:[8]})]),default:v(()=>[r("div",Gs,[r("pre",null,[r("code",null,ae(ne(t)),1)])])]),_:1})]),r("div",Ys,[d(jn,{type:ne(s).app_id_embed,onUpdata:_},null,8,["type"])]),r("div",Qs,[d(js,{form:a,onSave:D},null,8,["form"])])]),r("div",Xs,[r("div",Zs,[r("iframe",{id:"web-preview",src:f.value,frameborder:"0"},null,8,ei)])])])}}},ni=se(ti,[["__scopeId","data-v-7e0969d7"]]),oi={class:"wechat-app-item"},ai={class:"item-body"},si=["src"],ii={class:"app-info"},ri={class:"app-name"},li={class:"app-desc"},ci={class:"ext-info-list"},ui={class:"ext-content"},di={class:"ext-info-list"},pi={key:0,class:"status-block status-success"},fi={class:"status-block status-warning"},_i={class:"btn-wrapper-box"},hi={__name:"wechat-app-item",props:{item:{type:Object,default:()=>({})},app_type:{type:String,default:""},showMenu:{type:Array,default:["edit","del"]}},emits:["edit","delete","refresh"],setup(c,{emit:l}){const s=l,n=["mini_program","official_account"],e=c;function t(){s("edit",{...e.item})}function o(){s("delete",{...e.item})}function u(){s("refresh",{...e.item})}return(a,f)=>{const _=bo,g=ko,k=In,b=Co;return q(),G("div",oi,[r("div",ai,[r("img",{class:"app-avatar",src:c.item.app_avatar,alt:""},null,8,si),r("div",ii,[r("div",ri,ae(c.item.app_name),1),r("div",li,"Appid："+ae(c.item.app_id),1)])]),n.includes(e.app_type)?(q(),G(pe,{key:0},[r("div",ci,[r("div",ui,ae(c.item.wechat_reply_type),1)]),r("div",di,[c.item.account_is_verify=="true"?(q(),G("div",pi,[d(ne(vo)),f[0]||(f[0]=W(" 已认证 "))])):(q(),Z(_,{key:1,gap:8},{default:v(()=>[r("div",fi,[d(ne(yo)),f[1]||(f[1]=W(" 未认证 "))]),r("a",{onClick:u},"刷新状态")]),_:1}))])],64)):ee("",!0),c.showMenu&&c.showMenu.length?(q(),Z(b,{key:1},{overlay:v(()=>[d(k,null,{default:v(()=>[c.showMenu.includes("edit")?(q(),Z(g,{key:0,onClick:t},{default:v(()=>f[2]||(f[2]=[r("a",null,"编 辑",-1)])),_:1,__:[2]})):ee("",!0),c.showMenu.includes("del")?(q(),Z(g,{key:1,onClick:o},{default:v(()=>f[3]||(f[3]=[r("a",{style:{color:"#fb363f"}},"删 除",-1)])),_:1,__:[3]})):ee("",!0)]),_:1})]),default:v(()=>[r("div",_i,[d(ne(wo))])]),_:1})):ee("",!0)])}}},Fe=se(hi,[["__scopeId","data-v-663452b6"]]),mi={class:"form-content-box"},gi={class:"left-box"},vi={class:"form-body"},yi={class:"footer-box"},It=`正在思考中，请稍后点击下方蓝字\r
获取回复👇👇👇`,Bt="👉👉点我获取回复👈👈",Rt="内容较多，点此查看下文",bi={__name:"add-unverified-alert",emits:["ok"],setup(c,{expose:l,emit:s}){const n=s,{robotInfo:e,getRobot:t}=ge("robotInfo"),o=K(!1),u=K(),a=ce({id:e.id,wechat_not_verify_hand_get_reply:It,wechat_not_verify_hand_get_word:Bt,wechat_not_verify_hand_get_next:Rt}),f=()=>{a.wechat_not_verify_hand_get_reply=a.wechat_not_verify_hand_get_reply||It,a.wechat_not_verify_hand_get_word=a.wechat_not_verify_hand_get_word||Bt,a.wechat_not_verify_hand_get_next=a.wechat_not_verify_hand_get_next||Rt,u.value.clearValidate()},_={wechat_not_verify_hand_get_reply:[{required:!0,message:"请输入手动获取回复提示语",trigger:"change"}],wechat_not_verify_hand_get_word:[{required:!0,message:"请输入手动获取回复蓝字文案",trigger:"change"}],wechat_not_verify_hand_get_next:[{required:!0,message:"请输入内容超500字截断，获取下文蓝字文案",trigger:"change"}]},g=()=>{let D={...he(a)};Po(D).then(C=>{oe.success("保存成功"),b(),t(e.id),n("ok")})},k=()=>{u.value.validate().then(()=>{g()}).catch(D=>{})},b=()=>{u.value.clearValidate(),u.value.resetFields(),o.value=!1};return l({open:()=>{a.wechat_not_verify_hand_get_reply=e.wechat_not_verify_hand_get_reply||It,a.wechat_not_verify_hand_get_word=e.wechat_not_verify_hand_get_word||Bt,a.wechat_not_verify_hand_get_next=e.wechat_not_verify_hand_get_next||Rt,o.value=!0}}),(D,C)=>{const E=be,j=Mt,L=ke,w=ye,A=me,$=fe,O=ue;return q(),Z(O,{width:749,open:o.value,"onUpdate:open":C[3]||(C[3]=U=>o.value=U),title:null,wrapClassName:"remove-model-padding",footer:null},{default:v(()=>[r("div",mi,[r("div",gi,[r("div",vi,[C[4]||(C[4]=r("div",{class:"model-title"},"未认证公众号回复设置",-1)),d(E,{class:"zm-alert-info",message:"由于微信接口限制,未认证公众号只能在用户提问后立即回复答案。若答案生成较慢,系统将提示用户手动获取回复",type:"info"}),d(A,{style:{"margin-top":"24px"},ref_key:"formRef",ref:u,layout:"vertical",model:a,rules:_},{default:v(()=>[d(L,{label:"手动获取回复提示语",name:"wechat_not_verify_hand_get_reply"},{default:v(()=>[d(j,{value:a.wechat_not_verify_hand_get_reply,"onUpdate:value":C[0]||(C[0]=U=>a.wechat_not_verify_hand_get_reply=U),placeholder:"请输入",maxLength:100,onBlur:f,"auto-size":{minRows:3,maxRows:3}},null,8,["value"])]),_:1}),d(L,{label:"手动获取回复蓝字文案",name:"wechat_not_verify_hand_get_word"},{default:v(()=>[d(w,{maxLength:100,onBlur:f,value:a.wechat_not_verify_hand_get_word,"onUpdate:value":C[1]||(C[1]=U=>a.wechat_not_verify_hand_get_word=U),placeholder:"请输入"},null,8,["value"])]),_:1}),d(L,{label:"内容超500字截断，获取下文蓝字文案",name:"wechat_not_verify_hand_get_next"},{default:v(()=>[d(w,{maxLength:100,onBlur:f,value:a.wechat_not_verify_hand_get_next,"onUpdate:value":C[2]||(C[2]=U=>a.wechat_not_verify_hand_get_next=U),placeholder:"请输入"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),r("div",yi,[d($,{onClick:b},{default:v(()=>C[5]||(C[5]=[W("取 消")])),_:1,__:[5]}),d($,{type:"primary",onClick:k},{default:v(()=>C[6]||(C[6]=[W("确 定")])),_:1,__:[6]})])]),C[7]||(C[7]=r("div",{class:"preview-box"},[r("img",{src:"https://xkf-upload-oss.xiaokefu.com.cn/static/chat-wiki/wechat-app/guide1.png",alt:""})],-1))])]),_:1},8,["open"])}}},wi=se(bi,[["__scopeId","data-v-9f9ceef9"]]),ki={__name:"demo-preview-modal",setup(c,{expose:l}){const s=K(!1);return l({show:()=>{s.value=!0}}),(e,t)=>{const o=ue;return q(),G("div",null,[d(o,{open:s.value,"onUpdate:open":t[0]||(t[0]=u=>s.value=u),width:746,title:"未认证公众号回复效果示例",footer:null},{default:v(()=>t[1]||(t[1]=[r("div",{class:"content-block"},[r("div",{class:"img-wrapper-box"},[r("div",{class:"title"},"用户咨询自动回复效果示例"),r("img",{src:"https://xkf-upload-oss.xiaokefu.com.cn/static/chat-wiki/wechat-app/guide1.png",alt:""})]),r("div",{class:"img-wrapper-box"},[r("div",{class:"title"},"回复内容超长自动分段效果示例"),r("img",{src:"https://xkf-upload-oss.xiaokefu.com.cn/static/chat-wiki/wechat-app/guide2.png",alt:""})])],-1)])),_:1,__:[1]},8,["open"])])}}},Ci=se(ki,[["__scopeId","data-v-dc6850a3"]]),$i={class:"action-box"},Ai={class:"wechat-app-list"},Si={class:"item-body"},xi=["src"],Ei={class:"app-info"},Ii={class:"app-name"},Bi={class:"app-desc"},Ri={class:"ext-info-list"},Pi={key:0,class:"status-block status-success"},Ti={key:1,class:"status-block status-warning"},Mi={__name:"select-wechat-app",emits:["change"],setup(c,{expose:l,emit:s}){const n=s,e=En(),t=lo(),o=K(!1),u=K(!1),a=K(!1),f=K({}),_=K([]);ve(()=>{let{role_permission:D,role_type:C}=t;return C==1||D.includes("OfficialAccountMange")});function g(D,C){f.value=D,k(C),o.value=!0}function k(D){D=Array.isArray(D)?D:[],u.value=!0,Me({app_type:"official_account",app_name:""}).then(C=>{let E=C.data||[];E.forEach(j=>{j.checked=D.includes(j.app_id)}),_.value=E}).finally(()=>{u.value=!1})}function b(){a.value=!0;let D=_.value.filter(E=>E.checked),C=D.map(E=>E.app_id).toString();Mn({robot_id:f.value.id,app_id_list:C}).then(()=>{o.value=!1,n("change",D,C)}).finally(()=>{a.value=!1})}function R(){const D=e.resolve({path:"/user/official-account"});window.open(D.href,"_blank")}return l({open:g}),(D,C)=>{const E=fe,j=Kt("CheckCircleFilled"),L=Kt("ExclamationCircleFilled"),w=$o,A=ue;return q(),Z(A,{open:o.value,"onUpdate:open":C[0]||(C[0]=$=>o.value=$),title:"关联公众号","confirm-loading":a.value,width:"626px",onOk:b},{default:v(()=>[u.value?(q(),Z(Un,{key:0,style:{margin:"10vh 0"}})):_.value.length?(q(),G(pe,{key:1},[r("div",$i,[d(E,{type:"primary",ghost:"",icon:He(ne(Ut)),onClick:R},{default:v(()=>C[1]||(C[1]=[W("添加公众号")])),_:1,__:[1]},8,["icon"])]),r("div",Ai,[(q(!0),G(pe,null,Ce(_.value,$=>(q(),G("div",{key:$.id,class:"wechat-app-item"},[r("div",Si,[r("img",{class:"app-avatar",src:$.app_avatar,alt:""},null,8,xi),r("div",Ei,[r("div",Ii,ae($.app_name),1),r("div",Bi,"Appid："+ae($.app_id),1)])]),r("div",Ri,[$.account_is_verify=="true"?(q(),G("div",Pi,[d(j),C[2]||(C[2]=W(" 已认证 "))])):(q(),G("div",Ti,[d(L),C[3]||(C[3]=W(" 未认证 "))])),d(w,{checked:$.checked,"onUpdate:checked":O=>$.checked=O},null,8,["checked","onUpdate:checked"])])]))),128))])],64)):(q(),Z(Dn,{key:2,title:"暂未绑定公众号"},{desc:v(()=>[d(E,{type:"primary",onClick:R},{default:v(()=>C[4]||(C[4]=[W("绑定公众号")])),_:1,__:[4]})]),_:1}))]),_:1},8,["open","confirm-loading"])}}},Ni=se(Mi,[["__scopeId","data-v-9bf110ee"]]),Li={class:"add-btn-block"},Ui={class:"wechat-app-list"},Di={__name:"wechat-official-account",setup(c){const{robotInfo:l}=ge("robotInfo"),s=K(),n=K(!0),e=K([]);Re(()=>{t()});const t=()=>{Me({robot_id:l.id,app_type:"official_account",app_name:""}).then(b=>{e.value=b.data}).finally(()=>{n.value=!1})},o=()=>{s.value.open(l,e.value.map(b=>b.app_id))},u=b=>{Dt({id:b.id}).then(()=>{oe.success("刷新成功"),t()})},a=b=>{ue.confirm({title:`确定移除${b.app_name}吗?`,icon:d(Te),content:"移除后，机器人无法继续回复用户消息。",okText:"确定",cancelText:"取消",onOk(){let D=e.value.filter(C=>C.app_id!=b.app_id).map(C=>C.app_id).toString();Mn({robot_id:l.id,app_id_list:D}).then(()=>{t(),oe.success("删除成功")})}})},f=K(null),_=()=>{f.value.open()},g=K(null),k=()=>{g.value.show()};return(b,R)=>{const D=be,C=fe;return q(),G("div",null,[d(D,{banner:""},{message:v(()=>[R[0]||(R[0]=W(" 支持接入未认证公众号，")),r("a",{onClick:k},"查看效果示例")]),_:1}),n.value?(q(),Z(Un,{key:0})):e.value.length?(q(),G(pe,{key:1},[r("div",Li,[d(C,{onClick:o,type:"primary"},{default:v(()=>R[1]||(R[1]=[W("关联公众号")])),_:1,__:[1]}),d(C,{onClick:_,icon:d(ne(Ao))},{default:v(()=>R[2]||(R[2]=[W("未认证公众号回复设置")])),_:1,__:[2]},8,["icon"])]),r("div",Ui,[(q(!0),G(pe,null,Ce(e.value,E=>(q(),Z(Fe,{key:E.id,item:E,showMenu:["del"],app_type:"official_account",onDelete:a,onRefresh:u},null,8,["item"]))),128))])],64)):(q(),Z(Dn,{key:2,style:{"margin-top":"20vh"},title:"暂未关联公众号"},{desc:v(()=>[d(C,{onClick:o,type:"primary"},{default:v(()=>R[3]||(R[3]=[W("关联公众号")])),_:1,__:[3]})]),_:1})),d(Ni,{ref_key:"selectAppRef",ref:s,onChange:t},null,512),d(wi,{ref_key:"addUnverifiedAlertRef",ref:f},null,512),d(Ci,{ref_key:"demoPreviewModalRef",ref:g},null,512)])}}},qi=se(Di,[["__scopeId","data-v-40e4fd10"]]),Fi={class:"add-label"},Oi={__name:"add-wechat-app",props:{label:{type:String,default:""}},emits:["click"],setup(c,{emit:l}){const s=l,n=c,e=()=>{s("click")};return(t,o)=>(q(),G("div",{class:"add-wechat-app",onClick:e},[d(ne(Ut),{class:"add-icon"}),r("span",Fi,ae(n.label),1)]))}},Ge=se(Oi,[["__scopeId","data-v-e5fa0910"]]),Vi="/assets/img/preview_02-B1rWR-NK.png",ji="/assets/img/config_preview_02-BdpKevei.png",Hi={key:0,class:"add-wechat-app-alert"},zi={class:"alert-body"},Ki={class:"form-box"},Wi={class:"my-ip"},Ji={class:"ip-text"},Gi={key:1,class:"add-wechat-app-alert"},Yi={class:"config-preview-box"},Qi={class:"config-items"},Xi={class:"config-item"},Zi={class:"config-value"},er={class:"config-item"},tr={class:"config-value"},nr={class:"config-item"},or={class:"config-value"},$n="/upload/default/mini_program_avatar.png",ar={__name:"add-wechat-mini-program-alert",emits:["ok"],setup(c,{expose:l,emit:s}){const n=s,{robotInfo:e}=ge("robotInfo"),t=K(!1),o=K(1),u=K(!1),a=K(),f=ce({id:void 0,robot_id:e.id,app_name:"",app_id:"",app_secret:"",app_avatar:"",app_avatar_url:$n,app_type:"mini_program"}),_={app_name:[{required:!0,message:"请输入您的公众号名称",trigger:"change"},{trigger:"change",validator:()=>f.app_avatar_url?Promise.resolve():Promise.reject("请上传公众号头像")}],app_id:[{required:!0,message:"请输入您的AppId",trigger:"change"}],app_secret:[{required:!0,message:"请输入您的AppSecret",trigger:"change"}]},g=ve(()=>{let A=f.id?"编辑微信小程序":"添加微信小程序",$=o.value==1?"-填写小程序开发信息":"-服务器配置";return A+$}),k=({file:A,url:$})=>{f.app_avatar=A,f.app_avatar_url=$},b=ce({push_aeskey:"",push_token:"",push_url:""}),R=()=>{let A={...he(f)};delete A.app_avatar_url,We(A).then($=>{Object.assign(b,$.data),o.value=2,oe.success("保存成功"),n("ok")})},D=()=>{a.value.validate().then(()=>{R()}).catch(A=>{})},C=()=>{t.value=!1},E=()=>{a.value.clearValidate(),a.value.resetFields(),t.value=!1},j=A=>{Pe(A),oe.success("复制成功")},L=()=>{j(e.wechat_ip)};return l({open:A=>{A?(A.app_avatar_url=A.app_avatar,A.app_avatar=""):A={id:void 0,robot_id:e.id,app_name:"",app_id:"",app_secret:"",app_avatar:"",app_avatar_url:$n,app_type:"mini_program",wechat_ip:e.wechat_ip},o.value=1,Object.assign(f,A),t.value=!0}}),(A,$)=>{const O=fe,U=be,M=ke,P=ye,h=me,F=ue;return q(),Z(F,{width:"1168px",open:t.value,"onUpdate:open":$[7]||($[7]=T=>t.value=T),title:g.value,onCancel:E},{footer:v(()=>[o.value===1?(q(),Z(O,{key:"back",onClick:E},{default:v(()=>$[8]||($[8]=[W("取 消")])),_:1,__:[8]})):ee("",!0),o.value===1?(q(),Z(O,{key:"submit",type:"primary",loading:u.value,onClick:D},{default:v(()=>$[9]||($[9]=[W("保存并进入下一步")])),_:1,__:[9]},8,["loading"])):ee("",!0),o.value===2?(q(),Z(O,{key:"submit",type:"primary",loading:u.value,onClick:C},{default:v(()=>$[10]||($[10]=[W("已完成配置")])),_:1,__:[10]},8,["loading"])):ee("",!0)]),default:v(()=>[o.value===1?(q(),G("div",Hi,[d(U,{class:"tip-alert",message:"进入微信小程序后台（mp.weixin.qq.com），在【开发-开发管理-开发设置】中获取开发者信息",type:"info","show-icon":""}),r("div",zi,[r("div",Ki,[d(h,{ref_key:"formRef",ref:a,layout:"vertical",model:f,rules:_},{default:v(()=>[d(M,{label:"小程序头像/名称",name:"app_name"},{default:v(()=>[d(Ne,{autoUpload:!1,avatar:f.app_avatar_url,"onUpdate:avatar":$[0]||($[0]=T=>f.app_avatar_url=T),value:f.app_name,"onUpdate:value":$[1]||($[1]=T=>f.app_name=T),valueModifiers:{trim:!0},placeholder:"请输入您的小程序名称",onChangeAvatar:k},null,8,["avatar","value"])]),_:1}),d(M,{label:"AppId",name:"app_id"},{default:v(()=>[d(P,{value:f.app_id,"onUpdate:value":$[2]||($[2]=T=>f.app_id=T),valueModifiers:{trim:!0},placeholder:"请输入您的AppId"},null,8,["value"])]),_:1}),d(M,{label:"AppSecret",name:"app_secret"},{default:v(()=>[d(P,{value:f.app_secret,"onUpdate:value":$[3]||($[3]=T=>f.app_secret=T),valueModifiers:{trim:!0},placeholder:"请输入您的AppSecret"},null,8,["value"])]),_:1}),d(M,{label:"将以下IP添加到小程序IP白名单中，如未开启ip白名单保护可不添加",name:"wechat_ip",required:""},{default:v(()=>[r("div",Wi,[r("span",Ji,ae(ne(e).wechat_ip),1),r("a",{class:"copy-btn",onClick:L},"复 制")])]),_:1})]),_:1},8,["model"])]),$[11]||($[11]=r("div",{class:"preview-box"},[r("img",{class:"preview-img",src:Vi})],-1))])])):ee("",!0),o.value===2?(q(),G("div",Gi,[d(U,{class:"tip-alert",message:"进入微信小程序后台（mp.weixin.qq.com），在【开发-开发管理-开发设置】中配置并启用消息推送。请按照下图配置。",type:"info","show-icon":""}),r("div",Yi,[r("div",Qi,[r("div",Xi,[r("span",Zi,ae(b.push_url),1),r("span",{class:"copy-btn",onClick:$[4]||($[4]=T=>j(b.push_url))},"复制")]),r("div",er,[r("span",tr,ae(b.push_token),1),r("span",{class:"copy-btn",onClick:$[5]||($[5]=T=>j(b.push_token))},"复制")]),r("div",nr,[r("span",or,ae(b.push_aeskey),1),r("span",{class:"copy-btn",onClick:$[6]||($[6]=T=>j(b.push_aeskey))},"复制")])]),$[12]||($[12]=r("img",{class:"config-preview-img",src:ji},null,-1))])])):ee("",!0)]),_:1},8,["open","title"])}}},sr=se(ar,[["__scopeId","data-v-7bbe77a3"]]),ir={class:""},rr={class:"wechat-app-list"},lr={__name:"wechat-mini-program",setup(c){const{robotInfo:l}=ge("robotInfo"),s=K(),n=K([]),e=()=>{Me({robot_id:l.id,app_type:"mini_program",app_name:""}).then(_=>{n.value=_.data})},t=()=>{s.value.open()},o=_=>{let g=3;const k=ue.confirm({title:`确定移除${_.app_name}吗?`,icon:d(Te),content:"移除后，机器人无法继续回复用户消息。",okText:g+" 确 定",okType:"danger",cancelText:"取消",okButtonProps:{disabled:!0},onOk(){Je({id:_.id}).then(()=>{e(),oe.success("删除成功")})},onCancel(){}});let b=setInterval(()=>{g==1?(k.update({okText:"确 定",okButtonProps:{disabled:!1}}),clearInterval(b),b=void 0):(g-=1,k.update({okText:g+" 确 定",okButtonProps:{disabled:!0}}))},1e3)},u=_=>{_.wechat_ip=l.wechat_ip,s.value.open({..._})},a=_=>{Dt({id:_.id}).then(()=>{oe.success("刷新成功"),e()})},f=()=>{e()};return Re(()=>{e()}),(_,g)=>(q(),G("div",ir,[r("div",rr,[d(Ge,{label:"绑定微信小程序",onClick:t}),(q(!0),G(pe,null,Ce(n.value,k=>(q(),Z(Fe,{key:k.id,app_type:"mini_program",item:k,onEdit:u,onDelete:o,onRefresh:a},null,8,["item"]))),128))]),d(sr,{ref_key:"addAppAlertRef",ref:s,onOk:f},null,512)]))}},cr=se(lr,[["__scopeId","data-v-2a1a93ca"]]),ur="/assets/img/preview_03-DXz9-3qW.png",dr="/assets/img/config_preview_03-DN1fPWUm.png",pr={key:0,class:"add-wechat-app-alert"},fr={class:"alert-body"},_r={class:"form-box"},hr={key:1,class:"add-wechat-app-alert"},mr={class:"config-preview-box"},gr={class:"config-items"},vr={class:"config-item"},yr={class:"config-value"},br={class:"config-item"},wr={class:"config-value"},kr={class:"config-item"},Cr={class:"config-value"},An="/upload/default/wechat_kefu_avatar.png",$r={__name:"add-wechat-customer-service-alert",emits:["ok"],setup(c,{expose:l,emit:s}){const n=s,{robotInfo:e}=ge("robotInfo"),t=K(!1),o=K(1),u=K(!1),a=K(),f=ce({id:void 0,robot_id:e.id,app_name:"",app_id:"",app_secret:"",app_avatar:"",app_avatar_url:An,app_type:"wechat_kefu"}),_={app_name:[{required:!0,message:"请输入您的公众号名称",trigger:"change"},{trigger:"change",validator:()=>f.app_avatar_url?Promise.resolve():Promise.reject("请上传公众号头像")}],app_id:[{required:!0,message:"请输入您的AppId",trigger:"change"}],app_secret:[{required:!0,message:"请输入您的AppSecret",trigger:"change"}]},g=ve(()=>{let L=f.id?"编辑微信客服":"添加微信客服",w=o.value==1?"-服务器配置":"-填写微信客服开发信息";return L+w}),k=({file:L,url:w})=>{f.app_avatar=L,f.app_avatar_url=w},b=ce({push_aeskey:"",push_token:"",push_url:""}),R=()=>{let L={...he(f)};delete L.app_avatar_url,We(L).then(w=>{Object.assign(b,w.data),o.value=2,oe.success("保存成功"),n("ok"),t.value=!1})},D=()=>{a.value.validate().then(()=>{R()}).catch(L=>{})},C=()=>{a.value&&(a.value.clearValidate(),a.value.resetFields()),t.value=!1},E=L=>{Pe(L),oe.success("复制成功")};return l({open:L=>{L?(L.app_avatar_url=L.app_avatar,L.app_avatar=""):L={id:void 0,robot_id:e.id,app_name:"",app_id:"",app_secret:"",app_avatar:"",app_avatar_url:An,app_type:"wechat_kefu",wechat_ip:e.wechat_ip},o.value=1,Object.assign(f,L),t.value=!0}}),(L,w)=>{const A=fe,$=be,O=ke,U=ye,M=me,P=ue;return q(),Z(P,{width:"1168px",open:t.value,"onUpdate:open":w[8]||(w[8]=h=>t.value=h),title:g.value,onCancel:C},{footer:v(()=>[d(A,{key:"back",onClick:C},{default:v(()=>w[9]||(w[9]=[W("取 消")])),_:1,__:[9]}),o.value===1?(q(),Z(A,{key:"submit",type:"primary",loading:u.value,onClick:w[0]||(w[0]=h=>o.value=2)},{default:v(()=>w[10]||(w[10]=[W("保存并进入下一步")])),_:1,__:[10]},8,["loading"])):ee("",!0),o.value===2?(q(),Z(A,{key:"submit",type:"primary",loading:u.value,onClick:D},{default:v(()=>w[11]||(w[11]=[W("已完成配置")])),_:1,__:[11]},8,["loading"])):ee("",!0)]),default:v(()=>[o.value===2?(q(),G("div",pr,[d($,{class:"tip-alert",message:"进入微信客服后台（kf.weixin.qq.com），在【开发配置】中启用企业内部接入后获取开发者信息",type:"info","show-icon":""}),r("div",fr,[r("div",_r,[d(M,{ref_key:"formRef",ref:a,layout:"vertical",model:f,rules:_},{default:v(()=>[d(O,{label:"企业头像/名称",name:"app_name"},{default:v(()=>[d(Ne,{autoUpload:!1,avatar:f.app_avatar_url,"onUpdate:avatar":w[1]||(w[1]=h=>f.app_avatar_url=h),value:f.app_name,"onUpdate:value":w[2]||(w[2]=h=>f.app_name=h),valueModifiers:{trim:!0},placeholder:"请输入您的企业名称",onChangeAvatar:k},null,8,["avatar","value"])]),_:1}),d(O,{label:"企业id",name:"app_id"},{default:v(()=>[d(U,{value:f.app_id,"onUpdate:value":w[3]||(w[3]=h=>f.app_id=h),valueModifiers:{trim:!0},placeholder:"请输入您的AppId"},null,8,["value"])]),_:1}),d(O,{label:"企业Secret",name:"app_secret"},{default:v(()=>[d(U,{value:f.app_secret,"onUpdate:value":w[4]||(w[4]=h=>f.app_secret=h),valueModifiers:{trim:!0},placeholder:"请输入您的AppSecret"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),w[12]||(w[12]=r("div",{class:"preview-box"},[r("img",{class:"preview-img",src:ur})],-1))])])):ee("",!0),o.value===1?(q(),G("div",hr,[d($,{class:"tip-alert",message:"进入微信客服后台（kf.weixin.qq.com），在【开发配置】中启用企业内部接入。请按照下图配置",type:"info","show-icon":""}),r("div",mr,[r("div",gr,[r("div",vr,[r("span",yr,ae(ne(e).push_wechat_kefu),1),r("span",{class:"copy-btn",onClick:w[5]||(w[5]=h=>E(ne(e).push_wechat_kefu))},"复制")]),r("div",br,[r("span",wr,ae(ne(e).push_token),1),r("span",{class:"copy-btn",onClick:w[6]||(w[6]=h=>E(ne(e).push_token))},"复制")]),r("div",kr,[r("span",Cr,ae(ne(e).push_aeskey),1),r("span",{class:"copy-btn",onClick:w[7]||(w[7]=h=>E(ne(e).push_aeskey))},"复制")])]),w[13]||(w[13]=r("img",{class:"config-preview-img",src:dr},null,-1))])])):ee("",!0)]),_:1},8,["open","title"])}}},Ar=se($r,[["__scopeId","data-v-732d0ea4"]]),Sr={class:""},xr={class:"wechat-app-list"},Er={__name:"wechat-customer-service",setup(c){const{robotInfo:l}=ge("robotInfo"),s=K(),n=K([]),e=()=>{Me({robot_id:l.id,app_type:"wechat_kefu",app_name:""}).then(_=>{n.value=_.data})},t=()=>{s.value.open()},o=_=>{let g=3;const k=ue.confirm({title:`确定移除${_.app_name}吗?`,icon:d(Te),content:"移除后，机器人无法继续回复用户消息。",okText:g+" 确 定",okType:"danger",cancelText:"取消",okButtonProps:{disabled:!0},onOk(){Je({id:_.id}).then(()=>{e(),oe.success("删除成功")})},onCancel(){}});let b=setInterval(()=>{g==1?(k.update({okText:"确 定",okButtonProps:{disabled:!1}}),clearInterval(b),b=void 0):(g-=1,k.update({okText:g+" 确 定",okButtonProps:{disabled:!0}}))},1e3)},u=_=>{_.wechat_ip=l.wechat_ip,s.value.open({..._})},a=_=>{Dt({id:_.id}).then(()=>{oe.success("刷新成功"),e()})},f=()=>{e()};return Re(()=>{e()}),(_,g)=>{const k=be;return q(),G("div",Sr,[d(k,{class:"tip-alert",message:"绑定微信客服，用户通过微信客服咨询时由机器人自动回复",type:"info","show-icon":""}),r("div",xr,[d(Ge,{label:"绑定微信客服",onClick:t}),(q(!0),G(pe,null,Ce(n.value,b=>(q(),Z(Fe,{key:b.id,item:b,app_type:"wechat_kefu",onEdit:u,onDelete:o,onRefresh:a},null,8,["item"]))),128))]),d(Ar,{ref_key:"addAppAlertRef",ref:s,onOk:f},null,512)])}}},Ir=se(Er,[["__scopeId","data-v-f5702e86"]]),Br="/assets/img/feishu-example01-B-07FRqg.png",Rr="/assets/img/feishu-example02-CpOIEbAr.png",Pr="/assets/img/feishu-example03--Ub5FK6L.png",Tr={key:0,class:"add-wechat-app-alert"},Mr={class:"alert-body"},Nr={class:"form-box"},Lr={class:"preview-box"},Ur={key:1,class:"add-wechat-app-alert"},Dr={class:"config-items"},qr={class:"config-item"},Fr={class:"config-value"},Or="/upload/default/feishu_robot_avatar.png",Vr={__name:"add-feishu-alert",emits:["ok"],setup(c,{expose:l,emit:s}){const n=s,{robotInfo:e}=ge("robotInfo"),t=K(!1),o=K(1),u=K(!1),a=K(),f={id:void 0,robot_id:e.id,app_type:"feishu_robot",app_avatar:"",app_avatar_url:Or,app_name:"",app_id:"",app_secret:"",encrypt_key:"",verification_token:""},_=ce({}),g={app_name:[{required:!0,message:"请输入您的机器人名称",trigger:"change"},{trigger:"change",validator:()=>_.app_avatar_url?Promise.resolve():Promise.reject("请上传机器人头像")}],app_id:[{required:!0,message:"请输入您的AppId",trigger:"change"}],app_secret:[{required:!0,message:"请输入您的Api Secret",trigger:"change"}],encrypt_key:[{required:!0,message:"请输入您的Encrypt Key",trigger:"change"}],verification_token:[{required:!0,message:"请输入您的Verification Token",trigger:"change"}]},k=({file:w,url:A})=>{_.app_avatar=w,_.app_avatar_url=A},b=ce({push_aeskey:"",push_token:"",push_url:""}),R=()=>{let w={...he(_)};delete w.app_avatar_url,We(w).then(A=>{Object.assign(b,A.data),o.value=2,oe.success("保存成功"),n("ok")})},D=()=>{a.value.validate().then(()=>{R()}).catch(w=>{})},C=()=>{t.value=!1},E=()=>{a.value.clearValidate(),a.value.resetFields(),t.value=!1},j=w=>{Pe(w),oe.success("复制成功")};return l({open:w=>{w?(w.app_avatar_url=w.app_avatar,w.app_avatar=""):w=JSON.parse(JSON.stringify(f)),o.value=1,Object.assign(_,w),t.value=!0}}),(w,A)=>{const $=fe,O=be,U=ke,M=ye,P=me,h=So,F=ue;return q(),Z(F,{width:"1000px",open:t.value,"onUpdate:open":A[7]||(A[7]=T=>t.value=T),title:"配置飞书机器人",onCancel:E},{footer:v(()=>[o.value===1?(q(),Z($,{key:"back",onClick:E},{default:v(()=>A[8]||(A[8]=[W("取 消")])),_:1,__:[8]})):ee("",!0),o.value===1?(q(),Z($,{key:"submit",type:"primary",loading:u.value,onClick:D},{default:v(()=>A[9]||(A[9]=[W("保存并进入下一步 ")])),_:1,__:[9]},8,["loading"])):ee("",!0),o.value===2?(q(),Z($,{key:"submit",type:"primary",loading:u.value,onClick:C},{default:v(()=>A[10]||(A[10]=[W("已完成配置")])),_:1,__:[10]},8,["loading"])):ee("",!0)]),default:v(()=>[o.value===1?(q(),G("div",Tr,[d(O,{class:"tip-alert",type:"info","show-icon":""},{message:v(()=>A[11]||(A[11]=[r("div",null,[W("登录飞书开放后台，按照文档完成配置井发布应用 "),r("a",{href:"https://open.feishu.cn",target:"_blank"},"登录后台"),W("，"),r("a",{href:"https://www.yuque.com/zhimaxiaoshiwangluo/pggco1/cpoq2kmobhgap70p?singleDoc#",target:"_blank"},"如何配置？")],-1),r("div",null,"应用添加完成后，复制APPID 和API sercet,加密信息：Encrypt Key , Verification Token，填写到以下配置中",-1)])),_:1}),r("div",Mr,[r("div",Nr,[d(P,{ref_key:"formRef",ref:a,layout:"vertical",model:_,rules:g},{default:v(()=>[d(U,{label:"机器人头像/名称",name:"app_name"},{default:v(()=>[d(Ne,{autoUpload:!1,avatar:_.app_avatar_url,"onUpdate:avatar":A[0]||(A[0]=T=>_.app_avatar_url=T),value:_.app_name,"onUpdate:value":A[1]||(A[1]=T=>_.app_name=T),valueModifiers:{trim:!0},placeholder:"请输入您的机器人名称",onChangeAvatar:k},null,8,["avatar","value"])]),_:1}),d(U,{label:"APPID",name:"app_id"},{default:v(()=>[d(M,{value:_.app_id,"onUpdate:value":A[2]||(A[2]=T=>_.app_id=T),valueModifiers:{trim:!0},placeholder:"请输入您的AppId"},null,8,["value"])]),_:1}),d(U,{label:"API Secret",name:"app_secret"},{default:v(()=>[d(M,{value:_.app_secret,"onUpdate:value":A[3]||(A[3]=T=>_.app_secret=T),valueModifiers:{trim:!0},placeholder:"请输入您的APP Secret"},null,8,["value"])]),_:1}),d(U,{label:"Encrypt Key",name:"encrypt_key"},{default:v(()=>[d(M,{value:_.encrypt_key,"onUpdate:value":A[4]||(A[4]=T=>_.encrypt_key=T),valueModifiers:{trim:!0},placeholder:"请输入您的Encrypt Key"},null,8,["value"])]),_:1}),d(U,{label:"Verification Token",name:"verification_token"},{default:v(()=>[d(M,{value:_.verification_token,"onUpdate:value":A[5]||(A[5]=T=>_.verification_token=T),valueModifiers:{trim:!0},placeholder:"请输入您的Verification Token"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),r("div",Lr,[d(h,null,{default:v(()=>A[12]||(A[12]=[r("div",null,[r("img",{class:"preview-img",src:Br})],-1),r("div",null,[r("img",{class:"preview-img",src:Rr})],-1)])),_:1,__:[12]})])])])):ee("",!0),o.value===2?(q(),G("div",Ur,[d(O,{class:"tip-alert",message:"复制以下htp地址到应用-事件与回调>订阅方式-选择梅事件发送开发者服务器的请求地址中",type:"info","show-icon":""}),r("div",Dr,[r("div",qr,[r("span",Fr,ae(b.push_url),1),r("span",{class:"copy-btn",onClick:A[6]||(A[6]=T=>j(b.push_url))},"复制")])]),A[13]||(A[13]=r("div",{class:"config-preview-box"},[r("img",{class:"config-preview-img",src:Pr})],-1))])):ee("",!0)]),_:1},8,["open"])}}},jr=se(Vr,[["__scopeId","data-v-1a967884"]]),Hr={class:""},zr={class:"wechat-app-list"},Kr={__name:"feishu-robot",setup(c){const{robotInfo:l}=ge("robotInfo"),s=K(),n=K([]),e=()=>{Me({robot_id:l.id,app_type:"feishu_robot",app_name:""}).then(f=>{n.value=f.data})},t=()=>{s.value.open()},o=f=>{let _=3;const g=ue.confirm({title:`确定移除${f.app_name}吗?`,icon:d(Te),content:"移除后，机器人无法继续回复用户消息。",okText:_+" 确 定",okType:"danger",cancelText:"取消",okButtonProps:{disabled:!0},onOk(){Je({id:f.id}).then(()=>{e(),oe.success("删除成功")})},onCancel(){}});let k=setInterval(()=>{_==1?(g.update({okText:"确 定",okButtonProps:{disabled:!1}}),clearInterval(k),k=void 0):(_-=1,g.update({okText:_+" 确 定",okButtonProps:{disabled:!0}}))},1e3)},u=f=>{f.wechat_ip=l.wechat_ip,s.value.open({...f})},a=()=>{e()};return Re(()=>{e()}),(f,_)=>{const g=be;return q(),G("div",Hr,[d(g,{class:"tip-alert",type:"info","show-icon":""},{message:v(()=>_[0]||(_[0]=[W("绑定飞书智能机器人，员工可在飞书单聊或者群聊给飞书机器人发送消息时由机器人自动回复")])),_:1}),r("div",zr,[d(Ge,{label:"绑定飞书智能机器人",onClick:t}),(q(!0),G(pe,null,Ce(n.value,k=>(q(),Z(Fe,{key:k.id,item:k,onEdit:u,onDelete:o},null,8,["item"]))),128))]),d(jr,{ref_key:"addAppAlertRef",ref:s,onOk:a},null,512)])}}},Wr=se(Kr,[["__scopeId","data-v-a5805f01"]]),Jr="/assets/img/ding-example01-DNWGJGuL.png",Gr="/assets/img/ding-example02-CveyoALn.png",Yr={key:0,class:"add-wechat-app-alert"},Qr={class:"alert-body"},Xr={class:"form-box"},Zr={key:1,class:"add-wechat-app-alert"},el={class:"config-items"},tl={class:"config-item"},nl={class:"config-value"},ol="/upload/default/dingtalk_robot_avatar.png",al={__name:"add-dingding-alert",emits:["ok"],setup(c,{expose:l,emit:s}){const n=s,{robotInfo:e}=ge("robotInfo"),t=K(!1),o=K(1),u=K(!1),a=K(),f={id:void 0,robot_id:e.id,app_type:"dingtalk_robot",app_avatar:"",app_avatar_url:ol,app_name:"",app_id:"",app_secret:""},_=ce({}),g={app_name:[{required:!0,message:"请输入您的机器人名称",trigger:"change"},{trigger:"change",validator:()=>_.app_avatar_url?Promise.resolve():Promise.reject("请上传机器人头像")}],app_id:[{required:!0,message:"请输入您的AppId",trigger:"change"}],app_secret:[{required:!0,message:"请输入您的Api Secret",trigger:"change"}]},k=({file:w,url:A})=>{_.app_avatar=w,_.app_avatar_url=A},b=ce({push_aeskey:"",push_token:"",push_url:""}),R=()=>{let w={...he(_)};delete w.app_avatar_url,We(w).then(A=>{Object.assign(b,A.data),o.value=2,oe.success("保存成功"),n("ok")})},D=()=>{a.value.validate().then(()=>{R()}).catch(w=>{})},C=()=>{t.value=!1},E=()=>{a.value.clearValidate(),a.value.resetFields(),t.value=!1},j=w=>{Pe(w),oe.success("复制成功")};return l({open:w=>{w?(w.app_avatar_url=w.app_avatar,w.app_avatar=""):w=JSON.parse(JSON.stringify(f)),o.value=1,Object.assign(_,w),t.value=!0}}),(w,A)=>{const $=fe,O=be,U=ke,M=ye,P=me,h=ue;return q(),Z(h,{width:"1000px",open:t.value,"onUpdate:open":A[5]||(A[5]=F=>t.value=F),title:"配置钉钉机器人",onCancel:E},{footer:v(()=>[o.value===1?(q(),Z($,{key:"back",onClick:E},{default:v(()=>A[6]||(A[6]=[W("取 消")])),_:1,__:[6]})):ee("",!0),o.value===1?(q(),Z($,{key:"submit",type:"primary",loading:u.value,onClick:D},{default:v(()=>A[7]||(A[7]=[W("保存并进入下一步 ")])),_:1,__:[7]},8,["loading"])):ee("",!0),o.value===2?(q(),Z($,{key:"submit",type:"primary",loading:u.value,onClick:C},{default:v(()=>A[8]||(A[8]=[W("已完成配置")])),_:1,__:[8]},8,["loading"])):ee("",!0)]),default:v(()=>[o.value===1?(q(),G("div",Yr,[d(O,{class:"tip-alert",type:"info","show-icon":""},{message:v(()=>A[9]||(A[9]=[r("div",null,[W("登录钉钉开放后台，按照文档完成配置井发布应用 "),r("a",{href:"https://open.dingtalk.com/",target:"_blank"},"登录后台"),W("，"),r("a",{href:"https://www.yuque.com/zhimaxiaoshiwangluo/pggco1/cou9iaitt0v2pe5v?singleDoc#",target:"_blank"},"如何配置？")],-1),r("div",null,"应用添加完成后，复制Client ID 和API Client Secret填写到以下配置中",-1)])),_:1}),r("div",Qr,[r("div",Xr,[d(P,{ref_key:"formRef",ref:a,layout:"vertical",model:_,rules:g},{default:v(()=>[d(U,{label:"机器人头像/名称",name:"app_name"},{default:v(()=>[d(Ne,{autoUpload:!1,avatar:_.app_avatar_url,"onUpdate:avatar":A[0]||(A[0]=F=>_.app_avatar_url=F),value:_.app_name,"onUpdate:value":A[1]||(A[1]=F=>_.app_name=F),valueModifiers:{trim:!0},placeholder:"请输入您的机器人名称",onChangeAvatar:k},null,8,["avatar","value"])]),_:1}),d(U,{label:"Client ID",name:"app_id"},{default:v(()=>[d(M,{value:_.app_id,"onUpdate:value":A[2]||(A[2]=F=>_.app_id=F),valueModifiers:{trim:!0},placeholder:"请输入您的Client ID"},null,8,["value"])]),_:1}),d(U,{label:"Client Secret",name:"app_secret"},{default:v(()=>[d(M,{value:_.app_secret,"onUpdate:value":A[3]||(A[3]=F=>_.app_secret=F),valueModifiers:{trim:!0},placeholder:"请输入您的Client Secret"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),A[10]||(A[10]=r("div",{class:"preview-box"},[r("img",{class:"preview-img",src:Jr})],-1))])])):ee("",!0),o.value===2?(q(),G("div",Zr,[d(O,{class:"tip-alert",message:"复制以下http地址，填写钉钉应用详情>应用能力>机器人配置中的消息接收模式-选择HTTP模式的消息接收地址",type:"info","show-icon":""}),r("div",el,[r("div",tl,[r("span",nl,ae(b.push_url),1),r("span",{class:"copy-btn",onClick:A[4]||(A[4]=F=>j(b.push_url))},"复制")])]),A[11]||(A[11]=r("div",{class:"config-preview-box"},[r("img",{class:"config-preview-img",src:Gr})],-1))])):ee("",!0)]),_:1},8,["open"])}}},sl=se(al,[["__scopeId","data-v-22893492"]]),il={class:""},rl={class:"wechat-app-list"},ll={__name:"dingding-robot",setup(c){const{robotInfo:l}=ge("robotInfo"),s=K(),n=K([]),e=()=>{Me({robot_id:l.id,app_type:"dingtalk_robot",app_name:""}).then(f=>{n.value=f.data})},t=()=>{s.value.open()},o=f=>{let _=3;const g=ue.confirm({title:`确定移除${f.app_name}吗?`,icon:d(Te),content:"移除后，机器人无法继续回复用户消息。",okText:_+" 确 定",okType:"danger",cancelText:"取消",okButtonProps:{disabled:!0},onOk(){Je({id:f.id}).then(()=>{e(),oe.success("删除成功")})},onCancel(){}});let k=setInterval(()=>{_==1?(g.update({okText:"确 定",okButtonProps:{disabled:!1}}),clearInterval(k),k=void 0):(_-=1,g.update({okText:_+" 确 定",okButtonProps:{disabled:!0}}))},1e3)},u=f=>{f.wechat_ip=l.wechat_ip,s.value.open({...f})},a=()=>{e()};return Re(()=>{e()}),(f,_)=>{const g=be;return q(),G("div",il,[d(g,{class:"tip-alert",type:"info","show-icon":""},{message:v(()=>_[0]||(_[0]=[W("绑定钉钉机器人后，客户通过单聊或者群聊和钉钉机器人聊天，可使用当前机器人回答的内容自动回复")])),_:1}),r("div",rl,[d(Ge,{label:"绑定钉钉机器人",onClick:t}),(q(!0),G(pe,null,Ce(n.value,k=>(q(),Z(Fe,{key:k.id,item:k,onEdit:u,onDelete:o},null,8,["item"]))),128))]),d(sl,{ref_key:"addAppAlertRef",ref:s,onOk:a},null,512)])}}},cl=se(ll,[["__scopeId","data-v-b8c3d6d6"]]),ul={class:"external-services-page"},dl={class:"page-header"},pl={class:"page-body"},fl={class:"scroll-box"},Sn="/robot/config/external-services/activeKey",_l={__name:"index",setup(c){const l=Ke(),{robotInfo:s}=ze(l),{getRobot:n}=l,e={WebAPP:is,EmbedWebsite:ni,WeChatOfficialAccount:qi,WeChatMiniProgram:cr,WeChatCustomerService:Ir,FeishuRobot:Wr,DingDingRobot:cl},t=K(localStorage.getItem(Sn)||"WebAPP"),o=u=>{t.value=u.id,localStorage.setItem(Sn,t.value)};return so("robotInfo",{robotInfo:s.value,getRobot:n}),(u,a)=>(q(),G("div",ul,[r("div",dl,[d(Uo,{onChange:o,value:t.value,"onUpdate:value":a[0]||(a[0]=f=>t.value=f)},null,8,["value"])]),r("div",pl,[r("div",fl,[(q(),Z(io(e[t.value])))])])]))}},Il=se(_l,[["__scopeId","data-v-b148fd84"]]);export{Il as default};
