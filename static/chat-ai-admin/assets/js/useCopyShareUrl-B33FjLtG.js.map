{"version":3,"file":"useCopyShareUrl-B33FjLtG.js","sources":["../../../../front-end/chat-ai-admin-vue/src/hooks/web/useCopyShareUrl.js"],"sourcesContent":["import { message, Modal } from 'ant-design-vue'\r\nimport useClipboard from 'vue-clipboard3'\r\nimport { usePublicLibraryStore } from '@/stores/modules/public-library'\r\nimport { useRouter } from 'vue-router'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nexport const useCopyShareUrl = () => {\r\n  const libraryStore = usePublicLibraryStore()\r\n  const router = useRouter()\r\n  const { t } = useI18n('hooks.web.use-copy-share-url')\r\n\r\n  const copyShareUrl = async (docUrl) => {\r\n    const { access_rights, share_url, id, library_key } = libraryStore.libraryInfo\r\n\r\n    // 提取公共的跳转到权限配置页面的方法\r\n    const navigateToPermissions = () => {\r\n      router.push({\r\n        path: '/public-library/permissions',\r\n        query: { library_id: id, library_key }\r\n      })\r\n    }\r\n\r\n    // 提取公共的确认弹窗方法\r\n    const showConfigModal = (content) => {\r\n      Modal.confirm({\r\n        title: t('prompt'),\r\n        content,\r\n        okText: t('configure_now'),\r\n        cancelText: t('cancel'),\r\n        onOk: navigateToPermissions\r\n      })\r\n    }\r\n\r\n    // 检查是否有自定义域名\r\n    if (!share_url) {\r\n      showConfigModal(t('need_custom_domain'))\r\n      return\r\n    }\r\n\r\n    // 检查访问权限是否为公开\r\n    if (access_rights != 1) {\r\n      showConfigModal(t('only_public_doc'))\r\n      return\r\n    }\r\n\r\n    // 执行复制操作\r\n    const { toClipboard } = useClipboard()\r\n    const url = share_url + docUrl\r\n\r\n    try {\r\n      await toClipboard(url)\r\n      message.success(t('copy_success'))\r\n    } catch (err) {\r\n      console.error('复制失败:', err)\r\n      message.error(t('copy_failed'))\r\n    }\r\n  }\r\n\r\n  return {\r\n    copyShareUrl\r\n  }\r\n}\r\n"],"names":["useCopyShareUrl","libraryStore","usePublicLibraryStore","router","useRouter","t","useI18n","docUrl","access_rights","share_url","id","library_key","navigateToPermissions","showConfigModal","content","Modal","toClipboard","useClipboard","url","message","err"],"mappings":"2JAMY,MAACA,EAAkB,IAAM,CACnC,MAAMC,EAAeC,EAAqB,EACpCC,EAASC,EAAS,EAClB,CAAE,EAAAC,CAAC,EAAKC,EAAQ,8BAA8B,EAiDpD,MAAO,CACL,aAhDmB,MAAOC,GAAW,CACrC,KAAM,CAAE,cAAAC,EAAe,UAAAC,EAAW,GAAAC,EAAI,YAAAC,CAAW,EAAKV,EAAa,YAG7DW,EAAwB,IAAM,CAClCT,EAAO,KAAK,CACV,KAAM,8BACN,MAAO,CAAE,WAAYO,EAAI,YAAAC,CAAW,CAC5C,CAAO,CACH,EAGME,EAAmBC,GAAY,CACnCC,EAAM,QAAQ,CACZ,MAAOV,EAAE,QAAQ,EACjB,QAAAS,EACA,OAAQT,EAAE,eAAe,EACzB,WAAYA,EAAE,QAAQ,EACtB,KAAMO,CACd,CAAO,CACH,EAGA,GAAI,CAACH,EAAW,CACdI,EAAgBR,EAAE,oBAAoB,CAAC,EACvC,MACF,CAGA,GAAIG,GAAiB,EAAG,CACtBK,EAAgBR,EAAE,iBAAiB,CAAC,EACpC,MACF,CAGA,KAAM,CAAE,YAAAW,CAAW,EAAKC,EAAY,EAC9BC,EAAMT,EAAYF,EAExB,GAAI,CACF,MAAMS,EAAYE,CAAG,EACrBC,EAAQ,QAAQd,EAAE,cAAc,CAAC,CACnC,OAASe,EAAK,CACZ,QAAQ,MAAM,QAASA,CAAG,EAC1BD,EAAQ,MAAMd,EAAE,aAAa,CAAC,CAChC,CACF,CAIF,CACA"}