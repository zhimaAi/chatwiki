{"version":3,"file":"index-CagQpuvQ.js","sources":["../../../../front-end/chat-ai-admin-vue/src/views/public-library/permissions/components/permissions-form.vue","../../../../front-end/chat-ai-admin-vue/src/views/public-library/permissions/components/add-collaborator.vue","../../../../front-end/chat-ai-admin-vue/src/views/public-library/permissions/components/collaborator-list.vue","../../../../front-end/chat-ai-admin-vue/src/views/public-library/permissions/index.vue"],"sourcesContent":["<style lang=\"less\" scoped>\r\n.form-box {\r\n  overflow: hidden;\r\n  border-radius: 6px;\r\n  background: #f2f4f7;\r\n  .form-item-tip {\r\n    color: #999;\r\n  }\r\n\r\n  .form-box-header {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    padding: 0 16px;\r\n    height: 56px;\r\n\r\n    .form-box-label {\r\n      display: flex;\r\n      align-items: center;\r\n\r\n      .form-box-label-icon {\r\n        width: 16px;\r\n        height: 16px;\r\n        font-size: 16px;\r\n      }\r\n      .form-box-label-text {\r\n        padding-left: 4px;\r\n        font-size: 16px;\r\n        font-weight: 600;\r\n        color: #262626;\r\n      }\r\n    }\r\n  }\r\n  .share-url-box {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n  .copy-btn {\r\n    margin-left: 8px;\r\n  }\r\n}\r\n</style>\r\n\r\n<template>\r\n  <div class=\"form-box\">\r\n    <div class=\"form-box-header\">\r\n      <div class=\"form-box-label\">\r\n        <svg-icon name=\"auth\" style=\"font-size: 14px; color: #333\"></svg-icon>\r\n        <span class=\"form-box-label-text\">{{ t('access_rights') }}</span>\r\n      </div>\r\n      <div>\r\n        <!-- <a-button type=\"primary\" size=\"small\" style=\"margin-left: 8px\" @click.prevent=\"onSubmit\"\r\n          >保存</a-button\r\n        > -->\r\n      </div>\r\n    </div>\r\n\r\n    <a-form :label-col=\"{ span: 4 }\" style=\"width: 750px\">\r\n      <a-form-item :label=\"t('access_rights')\">\r\n        <a-radio-group v-model:value=\"formState.access_rights\" @change=\"onSubmit\">\r\n          <a-radio value=\"0\">{{ t('private_option') }}</a-radio>\r\n          <a-radio value=\"1\">{{ t('public_option') }}</a-radio>\r\n        </a-radio-group>\r\n      </a-form-item>\r\n\r\n      <a-form-item :label=\"t('copy_link')\" v-if=\"formState.access_rights == 1\">\r\n        <div class=\"share-url-box\">\r\n          <a-input-group compact style=\"width: 600px;display: flex;\">\r\n            <a-select\r\n              style=\"width: 250px\"\r\n              v-model:value=\"formState.share_url\"\r\n              :placeholder=\"t('select_domain_placeholder')\"\r\n              @change=\"onSubmit\"\r\n            >\r\n              <a-select-option :value=\"item.url\" v-for=\"item in domainList\" :key=\"item.id\">{{\r\n                item.url\r\n              }}</a-select-option>\r\n            </a-select>\r\n            <a-input\r\n              :disabled=\"true\"\r\n              :value=\"OPEN_BOC_BASE_URL + '/home/' + formState.library_key\"\r\n              style=\"width: 350px\"\r\n            />\r\n          </a-input-group>\r\n\r\n          <a-button class=\"copy-btn\" @click=\"copyText\">{{ t('copy') }}</a-button>\r\n        </div>\r\n        <div><a href=\"/#/user/domain\">{{ t('add_custom_domain') }}</a></div>\r\n      </a-form-item>\r\n    </a-form>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport useClipboard from 'vue-clipboard3'\r\nimport { getDomainList } from '@/api/user/index'\r\nimport { reactive, ref, onMounted, watch, computed } from 'vue'\r\nimport { message } from 'ant-design-vue'\r\nimport { OPEN_BOC_BASE_URL } from '@/constants/index'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.public-library.permissions.components.permissions-form')\r\n\r\nconst { toClipboard } = useClipboard()\r\n\r\nconst emit = defineEmits(['submit', 'update:value'])\r\n\r\nconst props = defineProps({\r\n  value: {\r\n    type: Object,\r\n    default: () => {\r\n      return {}\r\n    }\r\n  },\r\n  saveLoading: {\r\n    type: Boolean,\r\n    default: false\r\n  }\r\n})\r\n\r\n// 访问权限\r\nconst formState = reactive({\r\n  access_rights: '0',\r\n  share_url: undefined,\r\n  library_key: ''\r\n})\r\n\r\nconst shareUrl = computed(() => {\r\n  return formState.share_url + OPEN_BOC_BASE_URL + '/home/' + formState.library_key\r\n})\r\n\r\nconst onSubmit = () => {\r\n  emit('submit', formState)\r\n}\r\n\r\nconst domainList = ref([])\r\nconst getMyDomainList = () => {\r\n  getDomainList().then((res) => {\r\n    domainList.value = res.data || []\r\n    if (!formState.share_url) {\r\n      if (domainList.value.length > 0) {\r\n        formState.share_url = domainList.value[0].url\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\nconst setFormState = (val) => {\r\n  formState.access_rights = val.access_rights\r\n  formState.share_url = val.share_url\r\n  formState.library_key = val.library_key\r\n\r\n  if (domainList.value.length == 0 || !formState.share_url) {\r\n    getMyDomainList()\r\n  }\r\n}\r\n\r\nconst copyText = async () => {\r\n  if (!formState.share_url) {\r\n    message.error(t('please_select_domain'))\r\n\r\n    return\r\n  }\r\n\r\n  let text = shareUrl.value\r\n\r\n  try {\r\n    await toClipboard(text)\r\n    message.success(t('copy_success'))\r\n  } catch (e) {\r\n    message.error(t('copy_failed'))\r\n  }\r\n}\r\n\r\nwatch(props.value, (val) => {\r\n  setFormState({ ...val })\r\n})\r\n\r\nonMounted(() => {\r\n  getMyDomainList()\r\n})\r\n</script>\r\n","<template>\r\n  <a-modal\r\n    v-model:open=\"visible\"\r\n    :title=\"t('title')\"\r\n    width=\"760px\"\r\n    :confirmLoading=\"confirmLoading\"\r\n    @ok=\"handleOk\"\r\n    @cancel=\"handleCancel\"\r\n  >\r\n    <div class=\"form-box\">\r\n      <a-form layout=\"vertical\" :model=\"formState\" :rules=\"rules\" ref=\"formRef\">\r\n        <a-form-item name=\"permission\" :label=\"t('permission_label')\">\r\n          <a-radio-group v-model:value=\"formState.permission\">\r\n            <a-radio value=\"4\">{{ t('can_manage') }}</a-radio>\r\n            <a-radio value=\"2\">{{ t('can_edit') }}</a-radio>\r\n          </a-radio-group>\r\n        </a-form-item>\r\n\r\n        <a-form-item name=\"collaborators\" :label=\"t('collaborator_label')\">\r\n          <div class=\"collaborator-list-tip\">\r\n            {{ t('tip_text') }}\r\n            <RouterLink to=\"/user/manage\" target=\"_blank\">{{ t('go_add') }}</RouterLink>\r\n          </div>\r\n\r\n          <div class=\"collaborator-list\" ref=\"listRef\">\r\n            <div class=\"list-content\">\r\n              <div class=\"collaborator-grid\">\r\n                <div\r\n                  class=\"collaborator-item\"\r\n                  v-for=\"user in dataSource\"\r\n                  :key=\"user.id\"\r\n                  :class=\"{ active: formState.collaborators.includes(user.id) }\"\r\n                  @click=\"onSelectUser(user)\"\r\n                >\r\n                  <svg-icon\r\n                    name=\"check-arrow-filled\"\r\n                    class=\"check-icon\"\r\n                    v-show=\"formState.collaborators.includes(user.id)\"\r\n                  ></svg-icon>\r\n                  <div class=\"user-info\">\r\n                    <a-avatar class=\"user-avatar\" :src=\"user.avatar || defaultAvatar\" />\r\n                    <div class=\"user-details\">\r\n                      <div class=\"user-name\">{{ user.user_name }}</div>\r\n                      <div class=\"user-nickname\">{{ user.nick_name }}</div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div v-if=\"loading\" class=\"loading-more\">{{ t('loading') }}</div>\r\n              <div v-if=\"noMore\" class=\"no-more\">{{ t('no_more') }}</div>\r\n            </div>\r\n          </div>\r\n        </a-form-item>\r\n      </a-form>\r\n    </div>\r\n  </a-modal>\r\n</template>\r\n\r\n<script setup>\r\nimport { getUserList } from '@/api/manage'\r\nimport { saveLibDocPartner } from '@/api/public-library'\r\nimport { ref, reactive, inject, nextTick, computed } from 'vue'\r\nimport { message } from 'ant-design-vue'\r\nimport BScroll from '@better-scroll/core'\r\nimport MouseWheel from '@better-scroll/mouse-wheel'\r\nimport ScrollBar from '@better-scroll/scroll-bar'\r\nimport Pullup from '@better-scroll/pull-up'\r\nimport defaultAvatar from '@/assets/img/role_avatar.png'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.public-library.permissions.components.add-collaborator')\r\n\r\nBScroll.use(Pullup)\r\nBScroll.use(ScrollBar)\r\nBScroll.use(MouseWheel)\r\n\r\nconst emit = defineEmits(['ok'])\r\nconst props = defineProps({\r\n  excludedIds: {\r\n    type: Array,\r\n    default: () => []\r\n  }\r\n})\r\n\r\nconst libraryState = inject('libraryState', {})\r\n\r\nconst visible = ref(false)\r\nconst formRef = ref(null)\r\nconst confirmLoading = ref(false)\r\n\r\n// 表单数据\r\nconst formState = reactive({\r\n  permission: '2',\r\n  collaborators: []\r\n})\r\n\r\n// 表单验证规则\r\nconst rules = {\r\n  permission: [{ required: true, message: t('permission_required') }],\r\n  collaborators: [{ required: true, message: t('collaborator_required'), type: 'array', min: 1 }]\r\n}\r\n\r\nconst onSelectUser = (user) => {\r\n  // 处理用户选择逻辑\r\n  let index = formState.collaborators.indexOf(user.id)\r\n  if (index > -1) {\r\n    formState.collaborators.splice(index, 1)\r\n  } else {\r\n    formState.collaborators.push(user.id)\r\n  }\r\n}\r\n\r\n// 模拟用户数据\r\nconst userList = ref([])\r\nconst dataSource = computed(() => {\r\n  // 过滤掉需要排除的用户\r\n  return userList.value.filter((user) => !props.excludedIds.includes(user.id))\r\n})\r\n\r\nconst pagination = reactive({\r\n  page: 1,\r\n  size: 20,\r\n  total: 0,\r\n  search: ''\r\n})\r\nconst listRef = ref(null)\r\nconst loading = ref(false)\r\nconst noMore = ref(false)\r\nlet scroll = ref(null)\r\n\r\nconst initScroll = () => {\r\n  if (scroll.value) {\r\n    scroll.value.refresh()\r\n    return\r\n  }\r\n\r\n  scroll.value = new BScroll(listRef.value, {\r\n    probeType: 2,\r\n    click: true,\r\n    scrollY: true,\r\n    bounce: false,\r\n    pullUpLoad: true,\r\n    scrollbar: {\r\n      fade: false,\r\n      interactive: true\r\n    },\r\n    mouseWheel: {\r\n      speed: 20,\r\n      invert: false,\r\n      easeTime: 300\r\n    }\r\n  })\r\n\r\n  scroll.value.on('pullingUp', pullingUpHandler)\r\n}\r\n\r\nconst pullingUpHandler = async () => {\r\n  if (loading.value || noMore.value) return\r\n\r\n  pagination.page = pagination.page + 1\r\n  loading.value = true\r\n\r\n  await getList()\r\n\r\n  scroll.value.finishPullUp()\r\n\r\n  loading.value = false\r\n}\r\n\r\nconst getList = async () => {\r\n  // 获取用户列表\r\n  let parmas = {\r\n    page: pagination.page,\r\n    size: pagination.size,\r\n    search: pagination.search\r\n  }\r\n\r\n  return getUserList(parmas).then((res) => {\r\n    let lists = res.data.list || []\r\n\r\n    if (pagination.page == 1) {\r\n      userList.value = userList.value = lists\r\n    } else {\r\n      userList.value = userList.value.concat(lists)\r\n    }\r\n\r\n    pagination.total = +res.data.total\r\n\r\n    if (userList.value.length >= pagination.total) {\r\n      noMore.value = true\r\n    }\r\n\r\n    nextTick(() => {\r\n      if (scroll.value) {\r\n        scroll.value.refresh()\r\n      }\r\n    })\r\n    return res\r\n  })\r\n}\r\n\r\nconst handleSave = () => {\r\n  let data = {\r\n    operate_rights: formState.permission,\r\n    user_ids: formState.collaborators.join(','),\r\n    type: 1,\r\n    library_key: libraryState.library_key\r\n  }\r\n\r\n  confirmLoading.value = true\r\n\r\n  saveLibDocPartner(data)\r\n    .then(() => {\r\n      visible.value = false\r\n      confirmLoading.value = false\r\n      emit('ok', data)\r\n      message.success(t('add_success'))\r\n    })\r\n    .catch(() => {\r\n      confirmLoading.value = false\r\n    })\r\n}\r\n\r\n// 确认按钮处理\r\nconst handleOk = async () => {\r\n  try {\r\n    await formRef.value?.validate()\r\n    handleSave()\r\n  } catch (error) {\r\n    console.error('表单验证失败:', error)\r\n  }\r\n}\r\n\r\n// 取消按钮处理\r\nconst handleCancel = () => {\r\n  formRef.value?.resetFields()\r\n  visible.value = false\r\n}\r\n\r\n// 打开弹窗方法\r\nconst open = () => {\r\n  visible.value = true\r\n\r\n  formRef.value?.resetFields()\r\n  pagination.page = 1\r\n  getList()\r\n\r\n  setTimeout(() => {\r\n    initScroll()\r\n  }, 200)\r\n}\r\n\r\ndefineExpose({\r\n  open\r\n})\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.form-box {\r\n  padding-top: 16px;\r\n}\r\n.loading-more,\r\n.no-more {\r\n  text-align: center;\r\n  padding: 12px 0;\r\n  color: #999;\r\n  font-size: 14px;\r\n}\r\n.collaborator-list-tip {\r\n  line-height: 22px;\r\n  margin-bottom: 8px;\r\n  color: #595959;\r\n}\r\n.collaborator-list {\r\n  position: relative;\r\n  height: 300px;\r\n  overflow: hidden;\r\n}\r\n.collaborator-grid {\r\n}\r\n.collaborator-item {\r\n  display: inline-block;\r\n  width: 48%;\r\n  margin: 0 1% 1% 0;\r\n  cursor: pointer;\r\n  position: relative;\r\n  border-radius: 6px;\r\n  padding: 16px;\r\n\r\n  &::before {\r\n    content: '';\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    border-radius: 6px;\r\n    border: 1px solid #e8e8e8;\r\n  }\r\n  &:hover::before {\r\n    border: 1px solid #2475fc;\r\n  }\r\n  &.active::before {\r\n    border: 2px solid #2475fc;\r\n  }\r\n  .check-icon {\r\n    position: absolute;\r\n    right: 0;\r\n    bottom: 0;\r\n    font-size: 24px;\r\n    color: #fff;\r\n  }\r\n}\r\n\r\n.user-info {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 8px;\r\n  border-radius: 6px;\r\n  transition: background-color 0.3s;\r\n}\r\n\r\n.user-details {\r\n  margin-left: 18px;\r\n}\r\n.user-avatar {\r\n  width: 40px;\r\n  height: 40px;\r\n  border-radius: 8px;\r\n}\r\n.user-name {\r\n  height: 22px;\r\n  line-height: 22px;\r\n  font-size: 14px;\r\n  font-weight: 400;\r\n  color: #262626;\r\n}\r\n\r\n.user-nickname {\r\n  height: 20px;\r\n  line-height: 20px;\r\n  font-size: 12px;\r\n  color: #8c8c8c;\r\n}\r\n.user-name,\r\n.user-nickname {\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"collaborator-list-box\">\r\n    <div class=\"list-tools-box\">\r\n      <div class=\"list-label\">\r\n        <svg-icon name=\"collaborator\"></svg-icon>\r\n        <span class=\"label-text\">{{ t('collaborator_permissions') }} ({{ pagination.total }})</span>\r\n      </div>\r\n\r\n      <div class=\"tools-box-right\">\r\n        <a-button type=\"primary\" size=\"small\" @click=\"handleAdd\"\r\n          ><PlusOutlined /> {{ t('add_collaborator') }}</a-button\r\n        >\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"list-box\">\r\n      <a-table\r\n        :columns=\"columns\"\r\n        :data-source=\"dataSource\"\r\n        :pagination=\"pagination\"\r\n        @change=\"onListChange\"\r\n      >\r\n        <template #bodyCell=\"{ column, record }\">\r\n          <!-- 姓名列 -->\r\n          <template v-if=\"column.key === 'name'\">\r\n            <div class=\"name-cell\">\r\n              <a-avatar class=\"avatar\" :src=\"record.avatar || defaultAvatar\" />\r\n              <div class=\"user-info\">\r\n                <div class=\"username\">{{ record.user_name }}</div>\r\n                <div class=\"nickname\">{{ record.nick_name }}</div>\r\n              </div>\r\n            </div>\r\n          </template>\r\n          <template v-if=\"column.key === 'role'\">\r\n            <div class=\"role-cell\" v-if=\"record.showDelete\">\r\n              <a-dropdown>\r\n                <a class=\"dropdown-label\" @click.prevent>\r\n                  {{ record.operate_rights_label }}\r\n                  <DownOutlined style=\"font-size: 12px\" />\r\n                </a>\r\n                <template #overlay>\r\n                  <a-menu @click=\"handleRoleChange($event, record)\">\r\n                    <a-menu-item :key=\"4\">{{ t('can_manage') }}</a-menu-item>\r\n                    <a-menu-item :key=\"2\">{{ t('can_edit') }}</a-menu-item>\r\n                  </a-menu>\r\n                </template>\r\n              </a-dropdown>\r\n            </div>\r\n            <div class=\"role-cell\" v-else>\r\n              <a class=\"dropdown-label disabled\" @click.prevent>\r\n                {{ record.operate_rights_label }}\r\n              </a>\r\n            </div>\r\n          </template>\r\n          <!-- 操作列 -->\r\n          <template v-if=\"column.key === 'action'\">\r\n            <a-space v-if=\"record.showDelete\">\r\n              <a-popconfirm\r\n                :title=\"t('confirm_remove')\"\r\n                :ok-text=\"t('confirm')\"\r\n                :cancel-text=\"t('cancel')\"\r\n                @confirm=\"handleDel(record)\"\r\n              >\r\n                <a href=\"#\">{{ t('remove') }}</a>\r\n              </a-popconfirm>\r\n            </a-space>\r\n            <span v-else>\r\n              <a-button style=\"padding: 0\" type=\"link\" disabled>{{ t('remove') }}</a-button>\r\n            </span>\r\n          </template>\r\n        </template>\r\n      </a-table>\r\n    </div>\r\n    <AddCollaborator :excludedIds=\"allUserId\" ref=\"addCollaboratorRef\" @ok=\"onAddSuccess\" />\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { getLibDocPartnerList, saveLibDocPartner, deleteLibDocPartner } from '@/api/public-library'\r\nimport { useUserStore } from '@/stores/modules/user'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\nimport { ref, reactive, onMounted, inject, computed } from 'vue'\r\nimport { PlusOutlined, DownOutlined } from '@ant-design/icons-vue'\r\nimport { message } from 'ant-design-vue'\r\nimport AddCollaborator from './add-collaborator.vue'\r\nimport defaultAvatar from '@/assets/img/role_avatar.png'\r\n\r\nconst { t } = useI18n('views.public-library.permissions.components.collaborator-list')\r\n\r\nconst userStore = useUserStore()\r\n\r\nconst libraryState = inject('libraryState', {})\r\nconst addCollaboratorRef = ref(null)\r\nconst columns = [\r\n  {\r\n    title: t('name'),\r\n    key: 'name',\r\n    width: '40%'\r\n  },\r\n  {\r\n    title: t('role'),\r\n    dataIndex: 'role',\r\n    key: 'role',\r\n    width: '40%'\r\n  },\r\n  {\r\n    title: t('actions'),\r\n    key: 'action',\r\n    width: '20%'\r\n  }\r\n]\r\n\r\nconst roleMap = {\r\n  4: {\r\n    label: t('can_manage'),\r\n    value: '4'\r\n  },\r\n  2: {\r\n    label: t('can_edit'),\r\n    value: '2'\r\n  }\r\n}\r\n\r\nconst pagination = reactive({\r\n  current: 1,\r\n  pageSize: 999,\r\n  total: 0\r\n})\r\n\r\nconst dataSource = ref([])\r\n// 计算所有协作者的用户ID\r\nconst allUserId = computed(() => {\r\n  return dataSource.value.map((item) => item.user_id)\r\n})\r\n\r\nconst handleRoleChange = (event, record) => {\r\n  record.operate_rights = event.key * 1\r\n  record.operate_rights_label = roleMap[record.operate_rights].label || ''\r\n  saveRole(record)\r\n}\r\nconst saveRole = (record) => {\r\n  let data = {\r\n    operate_rights: record.operate_rights,\r\n    user_ids: record.user_id,\r\n    type: 2,\r\n    library_key: libraryState.library_key\r\n  }\r\n\r\n  saveLibDocPartner(data)\r\n    .then(() => {\r\n      message.success(t('modify_success'))\r\n    })\r\n    .catch(() => {})\r\n}\r\nconst handleAdd = () => {\r\n  addCollaboratorRef.value.open()\r\n}\r\n\r\nconst handleDel = (record) => {\r\n  let data = {\r\n    id: record.id,\r\n    library_key: libraryState.library_key\r\n  }\r\n\r\n  deleteLibDocPartner(data)\r\n    .then(() => {\r\n      message.success(t('remove_success'))\r\n      getList()\r\n    })\r\n    .catch(() => {})\r\n}\r\n\r\nconst onAddSuccess = () => {\r\n  getList()\r\n}\r\n\r\nconst onListChange = (paginationData) => {\r\n  Object.assign(pagination, paginationData)\r\n\r\n  getList()\r\n}\r\n\r\nconst getList = () => {\r\n  getLibDocPartnerList({\r\n    library_key: libraryState.library_key,\r\n    page: pagination.current,\r\n    size: pagination.pageSize\r\n  }).then((res) => {\r\n    let list = res.data.list || []\r\n    let { user_id } = userStore.userInfo\r\n\r\n    pagination.total = res.data.total\r\n\r\n    list.forEach((item) => {\r\n      item.showDelete = true\r\n\r\n      if (user_id == item.user_id) {\r\n        item.showDelete = false\r\n      }\r\n\r\n      if (item.role_type == 1) {\r\n        item.showDelete = false\r\n      }\r\n\r\n      item.operate_rights = item.operate_rights * 1\r\n      item.operate_rights_label = t('no_permission')\r\n      if (roleMap[item.operate_rights]) {\r\n        item.operate_rights_label = roleMap[item.operate_rights].label\r\n      }\r\n    })\r\n    dataSource.value = list\r\n  })\r\n}\r\n\r\nonMounted(() => {\r\n  getList()\r\n})\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.collaborator-list-box {\r\n  padding: 16px;\r\n  border-radius: 6px;\r\n  background-color: #f2f4f7;\r\n  .list-tools-box {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    margin-bottom: 16px;\r\n  }\r\n  .list-label {\r\n    display: flex;\r\n    .label-text {\r\n      line-height: 24px;\r\n      padding-left: 4px;\r\n      font-size: 16px;\r\n      font-weight: 600;\r\n      color: #262626;\r\n    }\r\n  }\r\n  .list-box {\r\n    .name-cell {\r\n      display: flex;\r\n      align-items: center;\r\n      .avatar {\r\n        width: 40px;\r\n        height: 40px;\r\n        border-radius: 8px;\r\n      }\r\n      .user-info {\r\n        margin-left: 8px;\r\n        .username {\r\n          font-size: 14px;\r\n          color: #595959;\r\n        }\r\n        .nickname {\r\n          margin-top: 2px;\r\n          font-size: 12px;\r\n          color: #8c8c8c;\r\n        }\r\n      }\r\n    }\r\n    .role-cell {\r\n      .dropdown-label {\r\n        display: inline-block;\r\n        line-height: 22px;\r\n        padding: 1px 8px;\r\n        font-size: 14px;\r\n        font-weight: 400;\r\n        border-radius: 6px;\r\n        color: #595959;\r\n        &:hover {\r\n          background-color: #e4e6eb;\r\n        }\r\n        &.disabled:hover {\r\n          cursor: not-allowed;\r\n          background: none;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"permissions-page\">\r\n    <ConfigPageMenu />\r\n    <div class=\"page-container\">\r\n      <div class=\"form-box-wrapper\">\r\n        <PermissionsForm\r\n          v-model:value=\"state\"\r\n          :saveLoading=\"saveLoading2\"\r\n          @submit=\"handleSavePermissions\"\r\n        />\r\n      </div>\r\n      <div class=\"collaborator-list-wrapper\">\r\n        <CollaboratorList v-if=\"state.library_key\" />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { getLibraryInfo, editLibrary } from '@/api/library/index'\r\nimport { useRoute } from 'vue-router'\r\nimport { reactive, ref, toRaw, onMounted, computed, provide } from 'vue'\r\nimport { message } from 'ant-design-vue'\r\nimport ConfigPageMenu from '../components/config-page-menu.vue'\r\nimport PermissionsForm from './components/permissions-form.vue'\r\nimport CollaboratorList from './components/collaborator-list.vue'\r\nimport { usePublicLibraryStore } from '@/stores/modules/public-library'\r\n\r\nconst libraryStore = usePublicLibraryStore()\r\n\r\nconst route = useRoute()\r\n\r\nconst id = computed(() => route.query.library_id)\r\n\r\nconst state = reactive({\r\n  type: 1,\r\n  library_intro: '',\r\n  library_name: '',\r\n  model_config_id: '',\r\n  model_define: '',\r\n  use_model: '',\r\n  is_offline: false,\r\n  access_rights: '0',\r\n  share_url: '',\r\n  library_key: '',\r\n  avatar: '',\r\n  avatar_file: ''\r\n})\r\n\r\n// 使用provide向子组件提供响应式state\r\nprovide('libraryState', state)\r\n\r\n// 提供更新state的方法\r\nprovide('updateState', (newState) => {\r\n  Object.assign(state, newState)\r\n})\r\n\r\nconst saveLoading2 = ref(false)\r\n\r\nconst handleSavePermissions = (data) => {\r\n  Object.assign(state, data)\r\n\r\n  saveLoading2.value = true\r\n\r\n  submit()\r\n    .then(() => {\r\n      saveLoading2.value = false\r\n    })\r\n    .catch(() => {\r\n      saveLoading2.value = false\r\n    })\r\n}\r\n\r\nconst submit = async () => {\r\n  let data = { ...toRaw(state) }\r\n\r\n  delete data.library_key\r\n\r\n  if (data.avatar_file) {\r\n    data.avatar = data.avatar_file\r\n    delete data.avatar_file\r\n  } else {\r\n    delete data.avatar\r\n    delete data.avatar_file\r\n  }\r\n\r\n  await editLibrary(data)\r\n\r\n  libraryStore.getLibraryInfo()\r\n  \r\n  message.success('修改成功')\r\n}\r\n\r\nconst getData = () => {\r\n  getLibraryInfo({ id: id.value }).then((res) => {\r\n    Object.assign(state, res.data)\r\n  })\r\n}\r\n\r\nonMounted(() => {\r\n  getData()\r\n})\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.page-container {\r\n  padding: 0 24px 24px;\r\n\r\n  .form-box-wrapper {\r\n    margin-bottom: 16px;\r\n  }\r\n}\r\n</style>\r\n"],"names":["t","useI18n","toClipboard","useClipboard","emit","__emit","props","__props","formState","reactive","shareUrl","computed","OPEN_BOC_BASE_URL","onSubmit","domainList","ref","getMyDomainList","getDomainList","res","setFormState","val","copyText","message","text","watch","onMounted","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_createVNode","_component_svg_icon","_hoisted_4","_toDisplayString","_unref","_component_a_form","_component_a_form_item","_component_a_radio_group","_cache","$event","_component_a_radio","_createBlock","_hoisted_5","_component_a_input_group","_component_a_select","_Fragment","_renderList","item","_component_a_select_option","_createTextVNode","_component_a_input","_component_a_button","_hoisted_6","BScroll","Pullup","ScrollBar","MouseWheel","libraryState","inject","visible","formRef","confirmLoading","rules","onSelectUser","user","index","userList","dataSource","pagination","listRef","loading","noMore","scroll","initScroll","pullingUpHandler","getList","parmas","getUserList","lists","nextTick","handleSave","data","saveLibDocPartner","handleOk","_a","error","handleCancel","__expose","_component_a_modal","_component_RouterLink","_normalizeClass","_vShow","_component_a_avatar","defaultAvatar","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","userStore","useUserStore","addCollaboratorRef","columns","roleMap","allUserId","handleRoleChange","event","record","saveRole","handleAdd","handleDel","deleteLibDocPartner","onAddSuccess","onListChange","paginationData","getLibDocPartnerList","list","user_id","PlusOutlined","_component_a_table","_withCtx","column","_component_a_dropdown","_component_a_menu","_component_a_menu_item","DownOutlined","_hoisted_12","_component_a_space","_component_a_popconfirm","_hoisted_13","_hoisted_14","AddCollaborator","libraryStore","usePublicLibraryStore","route","useRoute","id","state","provide","newState","saveLoading2","handleSavePermissions","submit","toRaw","editLibrary","getData","getLibraryInfo","ConfigPageMenu","PermissionsForm","CollaboratorList"],"mappings":"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"}