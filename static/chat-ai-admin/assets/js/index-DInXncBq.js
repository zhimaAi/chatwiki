var uo=Object.defineProperty;var po=(d,t,s)=>t in d?uo(d,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[t]=s;var ue=(d,t,s)=>po(d,typeof t!="symbol"?t+"":t,s);import{r as K,G as We,a as Q,b as F,y as c,p as i,q as ne,C as ze,v as x,t as f,j as Te,ah as _o,aj as Ke,w as Be,E as de,u as l,am as fo,_ as G,m as Qt,e as ee,a1 as me,c as be,ag as Pn,F as fe,l as Ae,h as lt,O as ve,P as ho,f as mo}from"./vue-chunks-BdaA73Wf.js";import{u as Ge}from"./robot-CIzNpArp.js";import{u as ie,a4 as go,_ as Ut,a5 as Me,f as vo}from"../../index-DSFcP5NQ.js";import{_ as se}from"./emoji-mart-BBMRoEa3.js";import{f as Tn,I as ye,F as ge,aa as bo,ao as yo,H as Je,B as _e,a9 as wo,ac as xe,c as Ce,r as Nt,s as Lt,V as qt,M as le,b as oe,O as Ue,q as Ye,u as Dt,v as Ot,J as Ft,G as Vt,aC as Mn,R as ko,a1 as jt,aV as Co,ad as Un,a4 as Nn,am as xo,g as Ao,i as $o,m as we,N as So,ah as Tt,aL as Eo}from"./ui-antd-Dl1wwwCD.js";import{g as Ln}from"./editor-cherry-CFIsbKoN.js";import{T as Io,U as Ro,V as Bo,W as Po,X as To,Y as qn,Z as Mo,e as Ne,_ as Dn,$ as On,r as zt,c as Qe,f as Xe}from"./index-Cg7-0swo.js";import{u as Fn}from"./index-B_UHbFfL.js";import{C as Vn}from"./cu-upload-Y6kcDw7r.js";import{i as Uo}from"./validate-8MtiUsxW.js";import{L as jn}from"./loading-box-CQ9Pukre.js";import{E as zn}from"./empty-box-DAN5iPDv.js";import"./neo4j-MWxXN7EM.js";import"./lodash-Bm5sK6rN.js";import"./elkjs-BN8GIjVH.js";import"./utils-CvB22N-W.js";import"./other-LrIFyvU9.js";import"./empty-BFmzY9bl.js";const No={class:"top-menu-box"},Lo={__name:"top-meun",props:{value:{type:String,default:""}},emits:["change","update:value"],setup(d,{emit:t}){const{t:s}=ie("views.robot.robot-config.external-service.components.top-meun"),e=t,a=K([d.value]),n=K([{key:"WebAPP",id:"WebAPP",label:"WebAPP",title:"WebAPP"},{key:"EmbedWebsite",id:"EmbedWebsite",label:s("menu_embed_website"),title:s("menu_embed_website")},{key:"WeChatOfficialAccount",id:"WeChatOfficialAccount",label:We("div",{class:"tag-text-box"},[We("span",{},s("menu_wechat_official_account")),We("span",{class:"text-xs"},s("tip_unverified_supported"))])},{key:"WeChatMiniProgram",id:"WeChatMiniProgram",label:s("menu_wechat_mini_program"),title:s("menu_wechat_mini_program")},{key:"WeChatCustomerService",id:"WeChatCustomerService",label:s("menu_wechat_customer_service"),title:s("menu_wechat_customer_service")},{key:"FeishuRobot",id:"FeishuRobot",label:s("menu_feishu_robot"),title:s("menu_feishu_robot")},{key:"DingDingRobot",id:"DingDingRobot",label:s("menu_dingtalk_robot"),title:s("menu_dingtalk_robot")}]),r=({item:p})=>{a.value.includes(p.id)||(e("update:value",p.id),e("change",p))};return(p,m)=>{const v=Tn;return F(),Q("div",No,[c(v,{class:"top-menu",items:n.value,selectedKeys:a.value,"onUpdate:selectedKeys":m[0]||(m[0]=h=>a.value=h),mode:"horizontal",onClick:r},null,8,["items","selectedKeys"])])}}},qo=se(Lo,[["__scopeId","data-v-5aebe5a0"]]);var Re={},ct,Xt;function Do(){return Xt||(Xt=1,ct=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),ct}var ut={},ke={},Zt;function $e(){if(Zt)return ke;Zt=1;let d;const t=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return ke.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17},ke.getSymbolTotalCodewords=function(e){return t[e]},ke.getBCHDigit=function(s){let e=0;for(;s!==0;)e++,s>>>=1;return e},ke.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');d=e},ke.isKanjiModeEnabled=function(){return typeof d<"u"},ke.toSJIS=function(e){return d(e)},ke}var dt={},en;function Ht(){return en||(en=1,(function(d){d.L={bit:1},d.M={bit:0},d.Q={bit:3},d.H={bit:2};function t(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"l":case"low":return d.L;case"m":case"medium":return d.M;case"q":case"quartile":return d.Q;case"h":case"high":return d.H;default:throw new Error("Unknown EC Level: "+s)}}d.isValid=function(e){return e&&typeof e.bit<"u"&&e.bit>=0&&e.bit<4},d.from=function(e,o){if(d.isValid(e))return e;try{return t(e)}catch{return o}}})(dt)),dt}var pt,tn;function Oo(){if(tn)return pt;tn=1;function d(){this.buffer=[],this.length=0}return d.prototype={get:function(t){const s=Math.floor(t/8);return(this.buffer[s]>>>7-t%8&1)===1},put:function(t,s){for(let e=0;e<s;e++)this.putBit((t>>>s-e-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const s=Math.floor(this.length/8);this.buffer.length<=s&&this.buffer.push(0),t&&(this.buffer[s]|=128>>>this.length%8),this.length++}},pt=d,pt}var _t,nn;function Fo(){if(nn)return _t;nn=1;function d(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}return d.prototype.set=function(t,s,e,o){const a=t*this.size+s;this.data[a]=e,o&&(this.reservedBit[a]=!0)},d.prototype.get=function(t,s){return this.data[t*this.size+s]},d.prototype.xor=function(t,s,e){this.data[t*this.size+s]^=e},d.prototype.isReserved=function(t,s){return this.reservedBit[t*this.size+s]},_t=d,_t}var ft={},on;function Vo(){return on||(on=1,(function(d){const t=$e().getSymbolSize;d.getRowColCoords=function(e){if(e===1)return[];const o=Math.floor(e/7)+2,a=t(e),n=a===145?26:Math.ceil((a-13)/(2*o-2))*2,r=[a-7];for(let p=1;p<o-1;p++)r[p]=r[p-1]-n;return r.push(6),r.reverse()},d.getPositions=function(e){const o=[],a=d.getRowColCoords(e),n=a.length;for(let r=0;r<n;r++)for(let p=0;p<n;p++)r===0&&p===0||r===0&&p===n-1||r===n-1&&p===0||o.push([a[r],a[p]]);return o}})(ft)),ft}var ht={},an;function jo(){if(an)return ht;an=1;const d=$e().getSymbolSize,t=7;return ht.getPositions=function(e){const o=d(e);return[[0,0],[o-t,0],[0,o-t]]},ht}var mt={},sn;function zo(){return sn||(sn=1,(function(d){d.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};d.isValid=function(o){return o!=null&&o!==""&&!isNaN(o)&&o>=0&&o<=7},d.from=function(o){return d.isValid(o)?parseInt(o,10):void 0},d.getPenaltyN1=function(o){const a=o.size;let n=0,r=0,p=0,m=null,v=null;for(let h=0;h<a;h++){r=p=0,m=v=null;for(let _=0;_<a;_++){let b=o.get(h,_);b===m?r++:(r>=5&&(n+=t.N1+(r-5)),m=b,r=1),b=o.get(_,h),b===v?p++:(p>=5&&(n+=t.N1+(p-5)),v=b,p=1)}r>=5&&(n+=t.N1+(r-5)),p>=5&&(n+=t.N1+(p-5))}return n},d.getPenaltyN2=function(o){const a=o.size;let n=0;for(let r=0;r<a-1;r++)for(let p=0;p<a-1;p++){const m=o.get(r,p)+o.get(r,p+1)+o.get(r+1,p)+o.get(r+1,p+1);(m===4||m===0)&&n++}return n*t.N2},d.getPenaltyN3=function(o){const a=o.size;let n=0,r=0,p=0;for(let m=0;m<a;m++){r=p=0;for(let v=0;v<a;v++)r=r<<1&2047|o.get(m,v),v>=10&&(r===1488||r===93)&&n++,p=p<<1&2047|o.get(v,m),v>=10&&(p===1488||p===93)&&n++}return n*t.N3},d.getPenaltyN4=function(o){let a=0;const n=o.data.length;for(let p=0;p<n;p++)a+=o.data[p];return Math.abs(Math.ceil(a*100/n/5)-10)*t.N4};function s(e,o,a){switch(e){case d.Patterns.PATTERN000:return(o+a)%2===0;case d.Patterns.PATTERN001:return o%2===0;case d.Patterns.PATTERN010:return a%3===0;case d.Patterns.PATTERN011:return(o+a)%3===0;case d.Patterns.PATTERN100:return(Math.floor(o/2)+Math.floor(a/3))%2===0;case d.Patterns.PATTERN101:return o*a%2+o*a%3===0;case d.Patterns.PATTERN110:return(o*a%2+o*a%3)%2===0;case d.Patterns.PATTERN111:return(o*a%3+(o+a)%2)%2===0;default:throw new Error("bad maskPattern:"+e)}}d.applyMask=function(o,a){const n=a.size;for(let r=0;r<n;r++)for(let p=0;p<n;p++)a.isReserved(p,r)||a.xor(p,r,s(o,p,r))},d.getBestMask=function(o,a){const n=Object.keys(d.Patterns).length;let r=0,p=1/0;for(let m=0;m<n;m++){a(m),d.applyMask(m,o);const v=d.getPenaltyN1(o)+d.getPenaltyN2(o)+d.getPenaltyN3(o)+d.getPenaltyN4(o);d.applyMask(m,o),v<p&&(p=v,r=m)}return r}})(mt)),mt}var He={},rn;function Hn(){if(rn)return He;rn=1;const d=Ht(),t=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],s=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return He.getBlocksCount=function(o,a){switch(a){case d.L:return t[(o-1)*4+0];case d.M:return t[(o-1)*4+1];case d.Q:return t[(o-1)*4+2];case d.H:return t[(o-1)*4+3];default:return}},He.getTotalCodewordsCount=function(o,a){switch(a){case d.L:return s[(o-1)*4+0];case d.M:return s[(o-1)*4+1];case d.Q:return s[(o-1)*4+2];case d.H:return s[(o-1)*4+3];default:return}},He}var gt={},Fe={},ln;function Ho(){if(ln)return Fe;ln=1;const d=new Uint8Array(512),t=new Uint8Array(256);return(function(){let e=1;for(let o=0;o<255;o++)d[o]=e,t[e]=o,e<<=1,e&256&&(e^=285);for(let o=255;o<512;o++)d[o]=d[o-255]})(),Fe.log=function(e){if(e<1)throw new Error("log("+e+")");return t[e]},Fe.exp=function(e){return d[e]},Fe.mul=function(e,o){return e===0||o===0?0:d[t[e]+t[o]]},Fe}var cn;function Wo(){return cn||(cn=1,(function(d){const t=Ho();d.mul=function(e,o){const a=new Uint8Array(e.length+o.length-1);for(let n=0;n<e.length;n++)for(let r=0;r<o.length;r++)a[n+r]^=t.mul(e[n],o[r]);return a},d.mod=function(e,o){let a=new Uint8Array(e);for(;a.length-o.length>=0;){const n=a[0];for(let p=0;p<o.length;p++)a[p]^=t.mul(o[p],n);let r=0;for(;r<a.length&&a[r]===0;)r++;a=a.slice(r)}return a},d.generateECPolynomial=function(e){let o=new Uint8Array([1]);for(let a=0;a<e;a++)o=d.mul(o,new Uint8Array([1,t.exp(a)]));return o}})(gt)),gt}var vt,un;function Ko(){if(un)return vt;un=1;const d=Wo();function t(s){this.genPoly=void 0,this.degree=s,this.degree&&this.initialize(this.degree)}return t.prototype.initialize=function(e){this.degree=e,this.genPoly=d.generateECPolynomial(this.degree)},t.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const o=new Uint8Array(e.length+this.degree);o.set(e);const a=d.mod(o,this.genPoly),n=this.degree-a.length;if(n>0){const r=new Uint8Array(this.degree);return r.set(a,n),r}return a},vt=t,vt}var bt={},yt={},wt={},dn;function Wn(){return dn||(dn=1,wt.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}),wt}var he={},pn;function Kn(){if(pn)return he;pn=1;const d="[0-9]+",t="[A-Z $%*+\\-./:]+";let s="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";s=s.replace(/u/g,"\\u");const e="(?:(?![A-Z0-9 $%*+\\-./:]|"+s+`)(?:.|[\r
]))+`;he.KANJI=new RegExp(s,"g"),he.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),he.BYTE=new RegExp(e,"g"),he.NUMERIC=new RegExp(d,"g"),he.ALPHANUMERIC=new RegExp(t,"g");const o=new RegExp("^"+s+"$"),a=new RegExp("^"+d+"$"),n=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return he.testKanji=function(p){return o.test(p)},he.testNumeric=function(p){return a.test(p)},he.testAlphanumeric=function(p){return n.test(p)},he}var _n;function Se(){return _n||(_n=1,(function(d){const t=Wn(),s=Kn();d.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},d.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},d.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},d.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},d.MIXED={bit:-1},d.getCharCountIndicator=function(a,n){if(!a.ccBits)throw new Error("Invalid mode: "+a);if(!t.isValid(n))throw new Error("Invalid version: "+n);return n>=1&&n<10?a.ccBits[0]:n<27?a.ccBits[1]:a.ccBits[2]},d.getBestModeForData=function(a){return s.testNumeric(a)?d.NUMERIC:s.testAlphanumeric(a)?d.ALPHANUMERIC:s.testKanji(a)?d.KANJI:d.BYTE},d.toString=function(a){if(a&&a.id)return a.id;throw new Error("Invalid mode")},d.isValid=function(a){return a&&a.bit&&a.ccBits};function e(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"numeric":return d.NUMERIC;case"alphanumeric":return d.ALPHANUMERIC;case"kanji":return d.KANJI;case"byte":return d.BYTE;default:throw new Error("Unknown mode: "+o)}}d.from=function(a,n){if(d.isValid(a))return a;try{return e(a)}catch{return n}}})(yt)),yt}var fn;function Go(){return fn||(fn=1,(function(d){const t=$e(),s=Hn(),e=Ht(),o=Se(),a=Wn(),n=7973,r=t.getBCHDigit(n);function p(_,b,T){for(let P=1;P<=40;P++)if(b<=d.getCapacity(P,T,_))return P}function m(_,b){return o.getCharCountIndicator(_,b)+4}function v(_,b){let T=0;return _.forEach(function(P){const j=m(P.mode,b);T+=j+P.getBitsLength()}),T}function h(_,b){for(let T=1;T<=40;T++)if(v(_,T)<=d.getCapacity(T,b,o.MIXED))return T}d.from=function(b,T){return a.isValid(b)?parseInt(b,10):T},d.getCapacity=function(b,T,P){if(!a.isValid(b))throw new Error("Invalid QR Code version");typeof P>"u"&&(P=o.BYTE);const j=t.getSymbolTotalCodewords(b),$=s.getTotalCodewordsCount(b,T),E=(j-$)*8;if(P===o.MIXED)return E;const H=E-m(P,b);switch(P){case o.NUMERIC:return Math.floor(H/10*3);case o.ALPHANUMERIC:return Math.floor(H/11*2);case o.KANJI:return Math.floor(H/13);case o.BYTE:default:return Math.floor(H/8)}},d.getBestVersionForData=function(b,T){let P;const j=e.from(T,e.M);if(Array.isArray(b)){if(b.length>1)return h(b,j);if(b.length===0)return 1;P=b[0]}else P=b;return p(P.mode,P.getLength(),j)},d.getEncodedBits=function(b){if(!a.isValid(b)||b<7)throw new Error("Invalid QR Code version");let T=b<<12;for(;t.getBCHDigit(T)-r>=0;)T^=n<<t.getBCHDigit(T)-r;return b<<12|T}})(bt)),bt}var kt={},hn;function Jo(){if(hn)return kt;hn=1;const d=$e(),t=1335,s=21522,e=d.getBCHDigit(t);return kt.getEncodedBits=function(a,n){const r=a.bit<<3|n;let p=r<<10;for(;d.getBCHDigit(p)-e>=0;)p^=t<<d.getBCHDigit(p)-e;return(r<<10|p)^s},kt}var Ct={},xt,mn;function Yo(){if(mn)return xt;mn=1;const d=Se();function t(s){this.mode=d.NUMERIC,this.data=s.toString()}return t.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(e){let o,a,n;for(o=0;o+3<=this.data.length;o+=3)a=this.data.substr(o,3),n=parseInt(a,10),e.put(n,10);const r=this.data.length-o;r>0&&(a=this.data.substr(o),n=parseInt(a,10),e.put(n,r*3+1))},xt=t,xt}var At,gn;function Qo(){if(gn)return At;gn=1;const d=Se(),t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function s(e){this.mode=d.ALPHANUMERIC,this.data=e}return s.getBitsLength=function(o){return 11*Math.floor(o/2)+6*(o%2)},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(o){let a;for(a=0;a+2<=this.data.length;a+=2){let n=t.indexOf(this.data[a])*45;n+=t.indexOf(this.data[a+1]),o.put(n,11)}this.data.length%2&&o.put(t.indexOf(this.data[a]),6)},At=s,At}var $t,vn;function Xo(){if(vn)return $t;vn=1;const d=Se();function t(s){this.mode=d.BYTE,typeof s=="string"?this.data=new TextEncoder().encode(s):this.data=new Uint8Array(s)}return t.getBitsLength=function(e){return e*8},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(s){for(let e=0,o=this.data.length;e<o;e++)s.put(this.data[e],8)},$t=t,$t}var St,bn;function Zo(){if(bn)return St;bn=1;const d=Se(),t=$e();function s(e){this.mode=d.KANJI,this.data=e}return s.getBitsLength=function(o){return o*13},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(e){let o;for(o=0;o<this.data.length;o++){let a=t.toSJIS(this.data[o]);if(a>=33088&&a<=40956)a-=33088;else if(a>=57408&&a<=60351)a-=49472;else throw new Error("Invalid SJIS character: "+this.data[o]+`
Make sure your charset is UTF-8`);a=(a>>>8&255)*192+(a&255),e.put(a,13)}},St=s,St}var Et={exports:{}},yn;function ea(){return yn||(yn=1,(function(d){var t={single_source_shortest_paths:function(s,e,o){var a={},n={};n[e]=0;var r=t.PriorityQueue.make();r.push(e,0);for(var p,m,v,h,_,b,T,P,j;!r.empty();){p=r.pop(),m=p.value,h=p.cost,_=s[m]||{};for(v in _)_.hasOwnProperty(v)&&(b=_[v],T=h+b,P=n[v],j=typeof n[v]>"u",(j||P>T)&&(n[v]=T,r.push(v,T),a[v]=m))}if(typeof o<"u"&&typeof n[o]>"u"){var $=["Could not find a path from ",e," to ",o,"."].join("");throw new Error($)}return a},extract_shortest_path_from_predecessor_list:function(s,e){for(var o=[],a=e;a;)o.push(a),s[a],a=s[a];return o.reverse(),o},find_path:function(s,e,o){var a=t.single_source_shortest_paths(s,e,o);return t.extract_shortest_path_from_predecessor_list(a,o)},PriorityQueue:{make:function(s){var e=t.PriorityQueue,o={},a;s=s||{};for(a in e)e.hasOwnProperty(a)&&(o[a]=e[a]);return o.queue=[],o.sorter=s.sorter||e.default_sorter,o},default_sorter:function(s,e){return s.cost-e.cost},push:function(s,e){var o={value:s,cost:e};this.queue.push(o),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};d.exports=t})(Et)),Et.exports}var wn;function ta(){return wn||(wn=1,(function(d){const t=Se(),s=Yo(),e=Qo(),o=Xo(),a=Zo(),n=Kn(),r=$e(),p=ea();function m($){return unescape(encodeURIComponent($)).length}function v($,E,H){const N=[];let I;for(;(I=$.exec(H))!==null;)N.push({data:I[0],index:I.index,mode:E,length:I[0].length});return N}function h($){const E=v(n.NUMERIC,t.NUMERIC,$),H=v(n.ALPHANUMERIC,t.ALPHANUMERIC,$);let N,I;return r.isKanjiModeEnabled()?(N=v(n.BYTE,t.BYTE,$),I=v(n.KANJI,t.KANJI,$)):(N=v(n.BYTE_KANJI,t.BYTE,$),I=[]),E.concat(H,N,I).sort(function(U,z){return U.index-z.index}).map(function(U){return{data:U.data,mode:U.mode,length:U.length}})}function _($,E){switch(E){case t.NUMERIC:return s.getBitsLength($);case t.ALPHANUMERIC:return e.getBitsLength($);case t.KANJI:return a.getBitsLength($);case t.BYTE:return o.getBitsLength($)}}function b($){return $.reduce(function(E,H){const N=E.length-1>=0?E[E.length-1]:null;return N&&N.mode===H.mode?(E[E.length-1].data+=H.data,E):(E.push(H),E)},[])}function T($){const E=[];for(let H=0;H<$.length;H++){const N=$[H];switch(N.mode){case t.NUMERIC:E.push([N,{data:N.data,mode:t.ALPHANUMERIC,length:N.length},{data:N.data,mode:t.BYTE,length:N.length}]);break;case t.ALPHANUMERIC:E.push([N,{data:N.data,mode:t.BYTE,length:N.length}]);break;case t.KANJI:E.push([N,{data:N.data,mode:t.BYTE,length:m(N.data)}]);break;case t.BYTE:E.push([{data:N.data,mode:t.BYTE,length:m(N.data)}])}}return E}function P($,E){const H={},N={start:{}};let I=["start"];for(let k=0;k<$.length;k++){const U=$[k],z=[];for(let q=0;q<U.length;q++){const W=U[q],R=""+k+q;z.push(R),H[R]={node:W,lastCount:0},N[R]={};for(let w=0;w<I.length;w++){const V=I[w];H[V]&&H[V].node.mode===W.mode?(N[V][R]=_(H[V].lastCount+W.length,W.mode)-_(H[V].lastCount,W.mode),H[V].lastCount+=W.length):(H[V]&&(H[V].lastCount=W.length),N[V][R]=_(W.length,W.mode)+4+t.getCharCountIndicator(W.mode,E))}}I=z}for(let k=0;k<I.length;k++)N[I[k]].end=0;return{map:N,table:H}}function j($,E){let H;const N=t.getBestModeForData($);if(H=t.from(E,N),H!==t.BYTE&&H.bit<N.bit)throw new Error('"'+$+'" cannot be encoded with mode '+t.toString(H)+`.
 Suggested mode is: `+t.toString(N));switch(H===t.KANJI&&!r.isKanjiModeEnabled()&&(H=t.BYTE),H){case t.NUMERIC:return new s($);case t.ALPHANUMERIC:return new e($);case t.KANJI:return new a($);case t.BYTE:return new o($)}}d.fromArray=function(E){return E.reduce(function(H,N){return typeof N=="string"?H.push(j(N,null)):N.data&&H.push(j(N.data,N.mode)),H},[])},d.fromString=function(E,H){const N=h(E,r.isKanjiModeEnabled()),I=T(N),k=P(I,H),U=p.find_path(k.map,"start","end"),z=[];for(let q=1;q<U.length-1;q++)z.push(k.table[U[q]].node);return d.fromArray(b(z))},d.rawSplit=function(E){return d.fromArray(h(E,r.isKanjiModeEnabled()))}})(Ct)),Ct}var kn;function na(){if(kn)return ut;kn=1;const d=$e(),t=Ht(),s=Oo(),e=Fo(),o=Vo(),a=jo(),n=zo(),r=Hn(),p=Ko(),m=Go(),v=Jo(),h=Se(),_=ta();function b(k,U){const z=k.size,q=a.getPositions(U);for(let W=0;W<q.length;W++){const R=q[W][0],w=q[W][1];for(let V=-1;V<=7;V++)if(!(R+V<=-1||z<=R+V))for(let D=-1;D<=7;D++)w+D<=-1||z<=w+D||(V>=0&&V<=6&&(D===0||D===6)||D>=0&&D<=6&&(V===0||V===6)||V>=2&&V<=4&&D>=2&&D<=4?k.set(R+V,w+D,!0,!0):k.set(R+V,w+D,!1,!0))}}function T(k){const U=k.size;for(let z=8;z<U-8;z++){const q=z%2===0;k.set(z,6,q,!0),k.set(6,z,q,!0)}}function P(k,U){const z=o.getPositions(U);for(let q=0;q<z.length;q++){const W=z[q][0],R=z[q][1];for(let w=-2;w<=2;w++)for(let V=-2;V<=2;V++)w===-2||w===2||V===-2||V===2||w===0&&V===0?k.set(W+w,R+V,!0,!0):k.set(W+w,R+V,!1,!0)}}function j(k,U){const z=k.size,q=m.getEncodedBits(U);let W,R,w;for(let V=0;V<18;V++)W=Math.floor(V/3),R=V%3+z-8-3,w=(q>>V&1)===1,k.set(W,R,w,!0),k.set(R,W,w,!0)}function $(k,U,z){const q=k.size,W=v.getEncodedBits(U,z);let R,w;for(R=0;R<15;R++)w=(W>>R&1)===1,R<6?k.set(R,8,w,!0):R<8?k.set(R+1,8,w,!0):k.set(q-15+R,8,w,!0),R<8?k.set(8,q-R-1,w,!0):R<9?k.set(8,15-R-1+1,w,!0):k.set(8,15-R-1,w,!0);k.set(q-8,8,1,!0)}function E(k,U){const z=k.size;let q=-1,W=z-1,R=7,w=0;for(let V=z-1;V>0;V-=2)for(V===6&&V--;;){for(let D=0;D<2;D++)if(!k.isReserved(W,V-D)){let ae=!1;w<U.length&&(ae=(U[w]>>>R&1)===1),k.set(W,V-D,ae),R--,R===-1&&(w++,R=7)}if(W+=q,W<0||z<=W){W-=q,q=-q;break}}}function H(k,U,z){const q=new s;z.forEach(function(D){q.put(D.mode.bit,4),q.put(D.getLength(),h.getCharCountIndicator(D.mode,k)),D.write(q)});const W=d.getSymbolTotalCodewords(k),R=r.getTotalCodewordsCount(k,U),w=(W-R)*8;for(q.getLengthInBits()+4<=w&&q.put(0,4);q.getLengthInBits()%8!==0;)q.putBit(0);const V=(w-q.getLengthInBits())/8;for(let D=0;D<V;D++)q.put(D%2?17:236,8);return N(q,k,U)}function N(k,U,z){const q=d.getSymbolTotalCodewords(U),W=r.getTotalCodewordsCount(U,z),R=q-W,w=r.getBlocksCount(U,z),V=q%w,D=w-V,ae=Math.floor(q/w),B=Math.floor(R/w),u=B+1,g=ae-B,C=new p(g);let M=0;const y=new Array(w),S=new Array(w);let L=0;const A=new Uint8Array(k.buffer);for(let Z=0;Z<w;Z++){const te=Z<D?B:u;y[Z]=A.slice(M,M+te),S[Z]=C.encode(y[Z]),M+=te,L=Math.max(L,te)}const O=new Uint8Array(q);let J=0,Y,X;for(Y=0;Y<L;Y++)for(X=0;X<w;X++)Y<y[X].length&&(O[J++]=y[X][Y]);for(Y=0;Y<g;Y++)for(X=0;X<w;X++)O[J++]=S[X][Y];return O}function I(k,U,z,q){let W;if(Array.isArray(k))W=_.fromArray(k);else if(typeof k=="string"){let ae=U;if(!ae){const B=_.rawSplit(k);ae=m.getBestVersionForData(B,z)}W=_.fromString(k,ae||40)}else throw new Error("Invalid data");const R=m.getBestVersionForData(W,z);if(!R)throw new Error("The amount of data is too big to be stored in a QR Code");if(!U)U=R;else if(U<R)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+R+`.
`);const w=H(U,z,W),V=d.getSymbolSize(U),D=new e(V);return b(D,U),T(D),P(D,U),$(D,z,0),U>=7&&j(D,U),E(D,w),isNaN(q)&&(q=n.getBestMask(D,$.bind(null,D,z))),n.applyMask(q,D),$(D,z,q),{modules:D,version:U,errorCorrectionLevel:z,maskPattern:q,segments:W}}return ut.create=function(U,z){if(typeof U>"u"||U==="")throw new Error("No input text");let q=t.M,W,R;return typeof z<"u"&&(q=t.from(z.errorCorrectionLevel,t.M),W=m.from(z.version),R=n.from(z.maskPattern),z.toSJISFunc&&d.setToSJISFunction(z.toSJISFunc)),I(U,W,q,R)},ut}var It={},Rt={},Cn;function Gn(){return Cn||(Cn=1,(function(d){function t(s){if(typeof s=="number"&&(s=s.toString()),typeof s!="string")throw new Error("Color should be defined as hex string");let e=s.slice().replace("#","").split("");if(e.length<3||e.length===5||e.length>8)throw new Error("Invalid hex color: "+s);(e.length===3||e.length===4)&&(e=Array.prototype.concat.apply([],e.map(function(a){return[a,a]}))),e.length===6&&e.push("F","F");const o=parseInt(e.join(""),16);return{r:o>>24&255,g:o>>16&255,b:o>>8&255,a:o&255,hex:"#"+e.slice(0,6).join("")}}d.getOptions=function(e){e||(e={}),e.color||(e.color={});const o=typeof e.margin>"u"||e.margin===null||e.margin<0?4:e.margin,a=e.width&&e.width>=21?e.width:void 0,n=e.scale||4;return{width:a,scale:a?4:n,margin:o,color:{dark:t(e.color.dark||"#000000ff"),light:t(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},d.getScale=function(e,o){return o.width&&o.width>=e+o.margin*2?o.width/(e+o.margin*2):o.scale},d.getImageWidth=function(e,o){const a=d.getScale(e,o);return Math.floor((e+o.margin*2)*a)},d.qrToImageData=function(e,o,a){const n=o.modules.size,r=o.modules.data,p=d.getScale(n,a),m=Math.floor((n+a.margin*2)*p),v=a.margin*p,h=[a.color.light,a.color.dark];for(let _=0;_<m;_++)for(let b=0;b<m;b++){let T=(_*m+b)*4,P=a.color.light;if(_>=v&&b>=v&&_<m-v&&b<m-v){const j=Math.floor((_-v)/p),$=Math.floor((b-v)/p);P=h[r[j*n+$]?1:0]}e[T++]=P.r,e[T++]=P.g,e[T++]=P.b,e[T]=P.a}}})(Rt)),Rt}var xn;function oa(){return xn||(xn=1,(function(d){const t=Gn();function s(o,a,n){o.clearRect(0,0,a.width,a.height),a.style||(a.style={}),a.height=n,a.width=n,a.style.height=n+"px",a.style.width=n+"px"}function e(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}d.render=function(a,n,r){let p=r,m=n;typeof p>"u"&&(!n||!n.getContext)&&(p=n,n=void 0),n||(m=e()),p=t.getOptions(p);const v=t.getImageWidth(a.modules.size,p),h=m.getContext("2d"),_=h.createImageData(v,v);return t.qrToImageData(_.data,a,p),s(h,m,v),h.putImageData(_,0,0),m},d.renderToDataURL=function(a,n,r){let p=r;typeof p>"u"&&(!n||!n.getContext)&&(p=n,n=void 0),p||(p={});const m=d.render(a,n,p),v=p.type||"image/png",h=p.rendererOpts||{};return m.toDataURL(v,h.quality)}})(It)),It}var Bt={},An;function aa(){if(An)return Bt;An=1;const d=Gn();function t(o,a){const n=o.a/255,r=a+'="'+o.hex+'"';return n<1?r+" "+a+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function s(o,a,n){let r=o+a;return typeof n<"u"&&(r+=" "+n),r}function e(o,a,n){let r="",p=0,m=!1,v=0;for(let h=0;h<o.length;h++){const _=Math.floor(h%a),b=Math.floor(h/a);!_&&!m&&(m=!0),o[h]?(v++,h>0&&_>0&&o[h-1]||(r+=m?s("M",_+n,.5+b+n):s("m",p,0),p=0,m=!1),_+1<a&&o[h+1]||(r+=s("h",v),v=0)):p++}return r}return Bt.render=function(a,n,r){const p=d.getOptions(n),m=a.modules.size,v=a.modules.data,h=m+p.margin*2,_=p.color.light.a?"<path "+t(p.color.light,"fill")+' d="M0 0h'+h+"v"+h+'H0z"/>':"",b="<path "+t(p.color.dark,"stroke")+' d="'+e(v,m,p.margin)+'"/>',T='viewBox="0 0 '+h+" "+h+'"',j='<svg xmlns="http://www.w3.org/2000/svg" '+(p.width?'width="'+p.width+'" height="'+p.width+'" ':"")+T+' shape-rendering="crispEdges">'+_+b+`</svg>
`;return typeof r=="function"&&r(null,j),j},Bt}var $n;function sa(){if($n)return Re;$n=1;const d=Do(),t=na(),s=oa(),e=aa();function o(a,n,r,p,m){const v=[].slice.call(arguments,1),h=v.length,_=typeof v[h-1]=="function";if(!_&&!d())throw new Error("Callback required as last argument");if(_){if(h<2)throw new Error("Too few arguments provided");h===2?(m=r,r=n,n=p=void 0):h===3&&(n.getContext&&typeof m>"u"?(m=p,p=void 0):(m=p,p=r,r=n,n=void 0))}else{if(h<1)throw new Error("Too few arguments provided");return h===1?(r=n,n=p=void 0):h===2&&!n.getContext&&(p=r,r=n,n=void 0),new Promise(function(b,T){try{const P=t.create(r,p);b(a(P,n,p))}catch(P){T(P)}})}try{const b=t.create(r,p);m(null,a(b,n,p))}catch(b){m(b)}}return Re.create=t.create,Re.toCanvas=o.bind(null,s.render),Re.toDataURL=o.bind(null,s.renderToDataURL),Re.toString=o.bind(null,function(a,n,r){return e.render(a,r)}),Re}var ia=sa();const Sn=Ln(ia),ra={class:"card-box"},la={class:"card-box-header"},ca={class:"card-title"},ua={key:0,class:"card-icon"},da={class:"title-text"},pa={class:"title-text"},_a={class:"action"},fa={class:"card-box-body"},ha={__name:"card-box",props:{title:{type:String,default:""}},setup(d){const t=d;return(s,e)=>(F(),Q("div",ra,[i("div",la,[i("div",ca,[s.$slots.icon?(F(),Q("span",ua,[ze(s.$slots,"icon",{},void 0,!0)])):ne("",!0),i("span",da,x(t.title),1),i("span",pa,[ze(s.$slots,"title",{},void 0,!0)])]),i("div",_a,[ze(s.$slots,"action",{},void 0,!0)])]),i("div",fa,[ze(s.$slots,"default",{},void 0,!0)])]))}},Pe=se(ha,[["__scopeId","data-v-3163046b"]]),ma={class:"page-title-input"},ga={class:"upload-logo"},va=["src"],ba={__name:"page-title-input",props:{avatar:{type:String,default:""},value:{type:String,default:""},placeholder:{type:String,default:"请输入标题"},autoUpload:{type:Boolean,default:!0}},emits:["update:value","update:avatar","changeAvatar"],setup(d,{emit:t}){const s=t,e=d,o=n=>{s("update:value",n.srcElement.value)},a=n=>{let r={file:n[0],category:"icon"};e.autoUpload&&Fn(r).then(p=>{s("update:avatar",p.data.link)}),go(n[0]).then(p=>{s("changeAvatar",{file:n[0],url:p})})};return(n,r)=>{const p=ye;return F(),Q("div",ma,[i("div",ga,[c(Vn,{onChange:a},{default:f(()=>[i("img",{class:"avatar",src:e.avatar},null,8,va)]),_:1})]),c(p,{size:"large",value:e.value,placeholder:d.placeholder,onInput:o},null,8,["value","placeholder"])])}}},Le=se(ba,[["__scopeId","data-v-33c7eb3d"]]);var Pt={exports:{}};/*! Pickr 1.9.1 MIT | https://github.com/Simonwep/pickr */var En;function ya(){return En||(En=1,(function(d,t){(function(s,e){d.exports=e()})(self,(()=>(()=>{var s={d:(B,u)=>{for(var g in u)s.o(u,g)&&!s.o(B,g)&&Object.defineProperty(B,g,{enumerable:!0,get:u[g]})},o:(B,u)=>Object.prototype.hasOwnProperty.call(B,u),r:B=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(B,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(B,"__esModule",{value:!0})}},e={};s.d(e,{default:()=>D});var o={};function a(B,u,g,C,M={}){u instanceof HTMLCollection||u instanceof NodeList?u=Array.from(u):Array.isArray(u)||(u=[u]),Array.isArray(g)||(g=[g]);for(const y of u)for(const S of g)y[B](S,C,{capture:!1,...M});return Array.prototype.slice.call(arguments,1)}s.r(o),s.d(o,{adjustableInputNumbers:()=>_,createElementFromString:()=>p,createFromTemplate:()=>m,eventPath:()=>v,off:()=>r,on:()=>n,resolveElement:()=>h});const n=a.bind(null,"addEventListener"),r=a.bind(null,"removeEventListener");function p(B){const u=document.createElement("div");return u.innerHTML=B.trim(),u.firstElementChild}function m(B){const u=(C,M)=>{const y=C.getAttribute(M);return C.removeAttribute(M),y},g=(C,M={})=>{const y=u(C,":obj"),S=u(C,":ref"),L=y?M[y]={}:M;S&&(M[S]=C);for(const A of Array.from(C.children)){const O=u(A,":arr"),J=g(A,O?{}:L);O&&(L[O]||(L[O]=[])).push(Object.keys(J).length?J:A)}return M};return g(p(B))}function v(B){let u=B.path||B.composedPath&&B.composedPath();if(u)return u;let g=B.target.parentElement;for(u=[B.target,g];g=g.parentElement;)u.push(g);return u.push(document,window),u}function h(B){return B instanceof Element?B:typeof B=="string"?B.split(/>>/g).reduce(((u,g,C,M)=>(u=u.querySelector(g),C<M.length-1?u.shadowRoot:u)),document):null}function _(B,u=(g=>g)){function g(C){const M=[.001,.01,.1][Number(C.shiftKey||2*C.ctrlKey)]*(C.deltaY<0?1:-1);let y=0,S=B.selectionStart;B.value=B.value.replace(/[\d.]+/g,((L,A)=>A<=S&&A+L.length>=S?(S=A,u(Number(L),M,y)):(y++,L))),B.focus(),B.setSelectionRange(S,S),C.preventDefault(),B.dispatchEvent(new Event("input"))}n(B,"focus",(()=>n(window,"wheel",g,{passive:!1}))),n(B,"blur",(()=>r(window,"wheel",g)))}const{min:b,max:T,floor:P,round:j}=Math;function $(B,u,g){u/=100,g/=100;const C=P(B=B/360*6),M=B-C,y=g*(1-u),S=g*(1-M*u),L=g*(1-(1-M)*u),A=C%6;return[255*[g,S,y,y,L,g][A],255*[L,g,g,S,y,y][A],255*[y,y,L,g,g,S][A]]}function E(B,u,g){const C=(2-(u/=100))*(g/=100)/2;return C!==0&&(u=C===1?0:C<.5?u*g/(2*C):u*g/(2-2*C)),[B,100*u,100*C]}function H(B,u,g){const C=b(B/=255,u/=255,g/=255),M=T(B,u,g),y=M-C;let S,L;if(y===0)S=L=0;else{L=y/M;const A=((M-B)/6+y/2)/y,O=((M-u)/6+y/2)/y,J=((M-g)/6+y/2)/y;B===M?S=J-O:u===M?S=1/3+A-J:g===M&&(S=2/3+O-A),S<0?S+=1:S>1&&(S-=1)}return[360*S,100*L,100*M]}function N(B,u,g,C){return u/=100,g/=100,[...H(255*(1-b(1,(B/=100)*(1-(C/=100))+C)),255*(1-b(1,u*(1-C)+C)),255*(1-b(1,g*(1-C)+C)))]}function I(B,u,g){u/=100;const C=2*(u*=(g/=100)<.5?g:1-g)/(g+u)*100,M=100*(g+u);return[B,isNaN(C)?0:C,M]}function k(B){return H(...B.match(/.{2}/g).map((u=>parseInt(u,16))))}function U(B){B=B.match(/^[a-zA-Z]+$/)?(function(M){if(M.toLowerCase()==="black")return"#000";const y=document.createElement("canvas").getContext("2d");return y.fillStyle=M,y.fillStyle==="#000"?null:y.fillStyle})(B):B;const u={cmyk:/^cmyk\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)/i,rgba:/^rgba?\D+([\d.]+)(%?)\D+([\d.]+)(%?)\D+([\d.]+)(%?)\D*?(([\d.]+)(%?)|$)/i,hsla:/^hsla?\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D*?(([\d.]+)(%?)|$)/i,hsva:/^hsva?\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D*?(([\d.]+)(%?)|$)/i,hexa:/^#?(([\dA-Fa-f]{3,4})|([\dA-Fa-f]{6})|([\dA-Fa-f]{8}))$/i},g=M=>M.map((y=>/^(|\d+)\.\d+|\d+$/.test(y)?Number(y):void 0));let C;e:for(const M in u)if(C=u[M].exec(B))switch(M){case"cmyk":{const[,y,S,L,A]=g(C);if(y>100||S>100||L>100||A>100)break e;return{values:N(y,S,L,A),type:M}}case"rgba":{let[,y,,S,,L,,,A]=g(C);if(y=C[2]==="%"?y/100*255:y,S=C[4]==="%"?S/100*255:S,L=C[6]==="%"?L/100*255:L,A=C[9]==="%"?A/100:A,y>255||S>255||L>255||A<0||A>1)break e;return{values:[...H(y,S,L),A],a:A,type:M}}case"hexa":{let[,y]=C;y.length!==4&&y.length!==3||(y=y.split("").map((A=>A+A)).join(""));const S=y.substring(0,6);let L=y.substring(6);return L=L?parseInt(L,16)/255:void 0,{values:[...k(S),L],a:L,type:M}}case"hsla":{let[,y,S,L,,A]=g(C);if(A=C[6]==="%"?A/100:A,y>360||S>100||L>100||A<0||A>1)break e;return{values:[...I(y,S,L),A],a:A,type:M}}case"hsva":{let[,y,S,L,,A]=g(C);if(A=C[6]==="%"?A/100:A,y>360||S>100||L>100||A<0||A>1)break e;return{values:[y,S,L,A],a:A,type:M}}}return{values:null,type:null}}function z(B=0,u=0,g=0,C=1){const M=(S,L)=>(A=-1)=>L(~A?S.map((O=>Number(O.toFixed(A)))):S),y={h:B,s:u,v:g,a:C,toHSVA(){const S=[y.h,y.s,y.v,y.a];return S.toString=M(S,(L=>`hsva(${L[0]}, ${L[1]}%, ${L[2]}%, ${y.a})`)),S},toHSLA(){const S=[...E(y.h,y.s,y.v),y.a];return S.toString=M(S,(L=>`hsla(${L[0]}, ${L[1]}%, ${L[2]}%, ${y.a})`)),S},toRGBA(){const S=[...$(y.h,y.s,y.v),y.a];return S.toString=M(S,(L=>`rgba(${L[0]}, ${L[1]}, ${L[2]}, ${y.a})`)),S},toCMYK(){const S=(function(L,A,O){const J=$(L,A,O),Y=J[0]/255,X=J[1]/255,Z=J[2]/255,te=b(1-Y,1-X,1-Z);return[100*(te===1?0:(1-Y-te)/(1-te)),100*(te===1?0:(1-X-te)/(1-te)),100*(te===1?0:(1-Z-te)/(1-te)),100*te]})(y.h,y.s,y.v);return S.toString=M(S,(L=>`cmyk(${L[0]}%, ${L[1]}%, ${L[2]}%, ${L[3]}%)`)),S},toHEXA(){const S=(function(A,O,J){return $(A,O,J).map((Y=>j(Y).toString(16).padStart(2,"0")))})(y.h,y.s,y.v),L=y.a>=1?"":Number((255*y.a).toFixed(0)).toString(16).toUpperCase().padStart(2,"0");return L&&S.push(L),S.toString=()=>`#${S.join("").toUpperCase()}`,S},clone:()=>z(y.h,y.s,y.v,y.a)};return y}const q=B=>Math.max(Math.min(B,1),0);function W(B){const u={options:Object.assign({lock:null,onchange:()=>0,onstop:()=>0},B),_keyboard(y){const{options:S}=u,{type:L,key:A}=y;if(document.activeElement===S.wrapper){const{lock:O}=u.options,J=A==="ArrowUp",Y=A==="ArrowRight",X=A==="ArrowDown",Z=A==="ArrowLeft";if(L==="keydown"&&(J||Y||X||Z)){let te=0,re=0;O==="v"?te=J||Y?1:-1:O==="h"?te=J||Y?-1:1:(re=J?-1:X?1:0,te=Z?-1:Y?1:0),u.update(q(u.cache.x+.01*te),q(u.cache.y+.01*re)),y.preventDefault()}else A.startsWith("Arrow")&&(u.options.onstop(),y.preventDefault())}},_tapstart(y){n(document,["mouseup","touchend","touchcancel"],u._tapstop),n(document,["mousemove","touchmove"],u._tapmove),y.cancelable&&y.preventDefault(),u._tapmove(y)},_tapmove(y){const{options:S,cache:L}=u,{lock:A,element:O,wrapper:J}=S,Y=J.getBoundingClientRect();let X=0,Z=0;if(y){const Ee=y&&y.touches&&y.touches[0];X=y?(Ee||y).clientX:0,Z=y?(Ee||y).clientY:0,X<Y.left?X=Y.left:X>Y.left+Y.width&&(X=Y.left+Y.width),Z<Y.top?Z=Y.top:Z>Y.top+Y.height&&(Z=Y.top+Y.height),X-=Y.left,Z-=Y.top}else L&&(X=L.x*Y.width,Z=L.y*Y.height);A!=="h"&&(O.style.left=`calc(${X/Y.width*100}% - ${O.offsetWidth/2}px)`),A!=="v"&&(O.style.top=`calc(${Z/Y.height*100}% - ${O.offsetHeight/2}px)`),u.cache={x:X/Y.width,y:Z/Y.height};const te=q(X/Y.width),re=q(Z/Y.height);switch(A){case"v":return S.onchange(te);case"h":return S.onchange(re);default:return S.onchange(te,re)}},_tapstop(){u.options.onstop(),r(document,["mouseup","touchend","touchcancel"],u._tapstop),r(document,["mousemove","touchmove"],u._tapmove)},trigger(){u._tapmove()},update(y=0,S=0){const{left:L,top:A,width:O,height:J}=u.options.wrapper.getBoundingClientRect();u.options.lock==="h"&&(S=y),u._tapmove({clientX:L+O*y,clientY:A+J*S})},destroy(){const{options:y,_tapstart:S,_keyboard:L}=u;r(document,["keydown","keyup"],L),r([y.wrapper,y.element],"mousedown",S),r([y.wrapper,y.element],"touchstart",S,{passive:!1})}},{options:g,_tapstart:C,_keyboard:M}=u;return n([g.wrapper,g.element],"mousedown",C),n([g.wrapper,g.element],"touchstart",C,{passive:!1}),n(document,["keydown","keyup"],M),u}function R(B={}){B=Object.assign({onchange:()=>0,className:"",elements:[]},B);const u=n(B.elements,"click",(g=>{B.elements.forEach((C=>C.classList[g.target===C?"add":"remove"](B.className))),B.onchange(g),g.stopPropagation()}));return{destroy:()=>r(...u)}}const w={variantFlipOrder:{start:"sme",middle:"mse",end:"ems"},positionFlipOrder:{top:"tbrl",right:"rltb",bottom:"btrl",left:"lrbt"},position:"bottom",margin:8,padding:0},V=(B,u,g)=>{const C=typeof B!="object"||B instanceof HTMLElement?{reference:B,popper:u,...g}:B;return{update(M=C){const{reference:y,popper:S}=Object.assign(C,M);if(!S||!y)throw new Error("Popper- or reference-element missing.");return((L,A,O)=>{const{container:J,arrow:Y,margin:X,padding:Z,position:te,variantFlipOrder:re,positionFlipOrder:Ee}={container:document.documentElement.getBoundingClientRect(),...w,...O},{left:et,top:tt}=A.style;A.style.left="0",A.style.top="0";const ce=L.getBoundingClientRect(),pe=A.getBoundingClientRect(),Xn={t:ce.top-pe.height-X,b:ce.bottom+X,r:ce.right+X,l:ce.left-pe.width-X},Zn={vs:ce.left,vm:ce.left+ce.width/2-pe.width/2,ve:ce.left+ce.width-pe.width,hs:ce.top,hm:ce.bottom-ce.height/2-pe.height/2,he:ce.bottom-pe.height},[eo,to="middle"]=te.split("-"),no=Ee[eo],oo=re[to],{top:Wt,left:Kt,bottom:Gt,right:Jt}=J;for(const qe of no){const Ie=qe==="t"||qe==="b";let De=Xn[qe];const[nt,ot]=Ie?["top","left"]:["left","top"],[at,st]=Ie?[pe.height,pe.width]:[pe.width,pe.height],[ao,so]=Ie?[Gt,Jt]:[Jt,Gt],[io,ro]=Ie?[Wt,Kt]:[Kt,Wt];if(!(De<io||De+at+Z>ao))for(const it of oo){let Oe=Zn[(Ie?"v":"h")+it];if(!(Oe<ro||Oe+st+Z>so)){if(Oe-=pe[ot],De-=pe[nt],A.style[ot]=`${Oe}px`,A.style[nt]=`${De}px`,Y){const rt=Ie?ce.width/2:ce.height/2,je=st/2,Yt=rt>je,lo=Oe+{s:Yt?je:rt,m:je,e:Yt?je:st-rt}[it],co=De+{t:at,b:0,r:0,l:at}[qe];Y.style[ot]=`${lo}px`,Y.style[nt]=`${co}px`}return qe+it}}}return A.style.left=et,A.style.top=tt,null})(y,S,C)}}},ae=class ae{constructor(u){ue(this,"_initializingActive",!0);ue(this,"_recalc",!0);ue(this,"_nanopop",null);ue(this,"_root",null);ue(this,"_color",z());ue(this,"_lastColor",z());ue(this,"_swatchColors",[]);ue(this,"_setupAnimationFrame",null);ue(this,"_eventListener",{init:[],save:[],hide:[],show:[],clear:[],change:[],changestop:[],cancel:[],swatchselect:[]});this.options=u=Object.assign({...ae.DEFAULT_OPTIONS},u);const{swatches:g,components:C,theme:M,sliders:y,lockOpacity:S,padding:L}=u;["nano","monolith"].includes(M)&&!y&&(u.sliders="h"),C.interaction||(C.interaction={});const{preview:A,opacity:O,hue:J,palette:Y}=C;C.opacity=!S&&O,C.palette=Y||A||O||J,this._preBuild(),this._buildComponents(),this._bindEvents(),this._finalBuild(),g&&g.length&&g.forEach((re=>this.addSwatch(re)));const{button:X,app:Z}=this._root;this._nanopop=V(X,Z,{margin:L}),X.setAttribute("role","button"),X.setAttribute("aria-label",this._t("btn:toggle"));const te=this;this._setupAnimationFrame=requestAnimationFrame((function re(){if(!Z.offsetWidth)return requestAnimationFrame(re);te.setColor(u.default),te._rePositioningPicker(),u.defaultRepresentation&&(te._representation=u.defaultRepresentation,te.setColorRepresentation(te._representation)),u.showAlways&&te.show(),te._initializingActive=!1,te._emit("init")}))}_preBuild(){const{options:u}=this;for(const g of["el","container"])u[g]=h(u[g]);this._root=(g=>{const{components:C,useAsButton:M,inline:y,appClass:S,theme:L,lockOpacity:A}=g.options,O=Z=>Z?"":'style="display:none" hidden',J=Z=>g._t(Z),Y=m(`
      <div :ref="root" class="pickr">

        ${M?"":'<button type="button" :ref="button" class="pcr-button"></button>'}

        <div :ref="app" class="pcr-app ${S||""}" data-theme="${L}" ${y?'style="position: unset"':""} aria-label="${J("ui:dialog")}" role="window">
          <div class="pcr-selection" ${O(C.palette)}>
            <div :obj="preview" class="pcr-color-preview" ${O(C.preview)}>
              <button type="button" :ref="lastColor" class="pcr-last-color" aria-label="${J("btn:last-color")}"></button>
              <div :ref="currentColor" class="pcr-current-color"></div>
            </div>

            <div :obj="palette" class="pcr-color-palette">
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="palette" class="pcr-palette" tabindex="0" aria-label="${J("aria:palette")}" role="listbox"></div>
            </div>

            <div :obj="hue" class="pcr-color-chooser" ${O(C.hue)}>
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="slider" class="pcr-hue pcr-slider" tabindex="0" aria-label="${J("aria:hue")}" role="slider"></div>
            </div>

            <div :obj="opacity" class="pcr-color-opacity" ${O(C.opacity)}>
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="slider" class="pcr-opacity pcr-slider" tabindex="0" aria-label="${J("aria:opacity")}" role="slider"></div>
            </div>
          </div>

          <div class="pcr-swatches ${C.palette?"":"pcr-last"}" :ref="swatches"></div>

          <div :obj="interaction" class="pcr-interaction" ${O(Object.keys(C.interaction).length)}>
            <input :ref="result" class="pcr-result" type="text" spellcheck="false" ${O(C.interaction.input)} aria-label="${J("aria:input")}">

            <input :arr="options" class="pcr-type" data-type="HEXA" value="${A?"HEX":"HEXA"}" type="button" ${O(C.interaction.hex)}>
            <input :arr="options" class="pcr-type" data-type="RGBA" value="${A?"RGB":"RGBA"}" type="button" ${O(C.interaction.rgba)}>
            <input :arr="options" class="pcr-type" data-type="HSLA" value="${A?"HSL":"HSLA"}" type="button" ${O(C.interaction.hsla)}>
            <input :arr="options" class="pcr-type" data-type="HSVA" value="${A?"HSV":"HSVA"}" type="button" ${O(C.interaction.hsva)}>
            <input :arr="options" class="pcr-type" data-type="CMYK" value="CMYK" type="button" ${O(C.interaction.cmyk)}>

            <input :ref="save" class="pcr-save" value="${J("btn:save")}" type="button" ${O(C.interaction.save)} aria-label="${J("aria:btn:save")}">
            <input :ref="cancel" class="pcr-cancel" value="${J("btn:cancel")}" type="button" ${O(C.interaction.cancel)} aria-label="${J("aria:btn:cancel")}">
            <input :ref="clear" class="pcr-clear" value="${J("btn:clear")}" type="button" ${O(C.interaction.clear)} aria-label="${J("aria:btn:clear")}">
          </div>
        </div>
      </div>
    `),X=Y.interaction;return X.options.find((Z=>!Z.hidden&&!Z.classList.add("active"))),X.type=()=>X.options.find((Z=>Z.classList.contains("active"))),Y})(this),u.useAsButton&&(this._root.button=u.el),u.container.appendChild(this._root.root)}_finalBuild(){const u=this.options,g=this._root;if(u.container.removeChild(g.root),u.inline){const C=u.el.parentElement;u.el.nextSibling?C.insertBefore(g.app,u.el.nextSibling):C.appendChild(g.app)}else u.container.appendChild(g.app);u.useAsButton?u.inline&&u.el.remove():u.el.parentNode.replaceChild(g.root,u.el),u.disabled&&this.disable(),u.comparison||(g.button.style.transition="none",u.useAsButton||(g.preview.lastColor.style.transition="none")),this.hide()}_buildComponents(){const u=this,g=this.options.components,C=(u.options.sliders||"v").repeat(2),[M,y]=C.match(/^[vh]+$/g)?C:[],S=()=>this._color||(this._color=this._lastColor.clone()),L={palette:W({element:u._root.palette.picker,wrapper:u._root.palette.palette,onstop:()=>u._emit("changestop","slider",u),onchange(A,O){if(!g.palette)return;const J=S(),{_root:Y,options:X}=u,{lastColor:Z,currentColor:te}=Y.preview;u._recalc&&(J.s=100*A,J.v=100-100*O,J.v<0&&(J.v=0),u._updateOutput("slider"));const re=J.toRGBA().toString(0);this.element.style.background=re,this.wrapper.style.background=`
                        linear-gradient(to top, rgba(0, 0, 0, ${J.a}), transparent),
                        linear-gradient(to left, hsla(${J.h}, 100%, 50%, ${J.a}), rgba(255, 255, 255, ${J.a}))
                    `,X.comparison?X.useAsButton||u._lastColor||Z.style.setProperty("--pcr-color",re):(Y.button.style.setProperty("--pcr-color",re),Y.button.classList.remove("clear"));const Ee=J.toHEXA().toString();for(const{el:et,color:tt}of u._swatchColors)et.classList[Ee===tt.toHEXA().toString()?"add":"remove"]("pcr-active");te.style.setProperty("--pcr-color",re)}}),hue:W({lock:y==="v"?"h":"v",element:u._root.hue.picker,wrapper:u._root.hue.slider,onstop:()=>u._emit("changestop","slider",u),onchange(A){if(!g.hue||!g.palette)return;const O=S();u._recalc&&(O.h=360*A),this.element.style.backgroundColor=`hsl(${O.h}, 100%, 50%)`,L.palette.trigger()}}),opacity:W({lock:M==="v"?"h":"v",element:u._root.opacity.picker,wrapper:u._root.opacity.slider,onstop:()=>u._emit("changestop","slider",u),onchange(A){if(!g.opacity||!g.palette)return;const O=S();u._recalc&&(O.a=Math.round(100*A)/100),this.element.style.background=`rgba(0, 0, 0, ${O.a})`,L.palette.trigger()}}),selectable:R({elements:u._root.interaction.options,className:"active",onchange(A){u._representation=A.target.getAttribute("data-type").toUpperCase(),u._recalc&&u._updateOutput("swatch")}})};this._components=L}_bindEvents(){const{_root:u,options:g}=this,C=[n(u.interaction.clear,"click",(()=>this._clearColor())),n([u.interaction.cancel,u.preview.lastColor],"click",(()=>{this.setHSVA(...(this._lastColor||this._color).toHSVA(),!0),this._emit("cancel")})),n(u.interaction.save,"click",(()=>{!this.applyColor()&&!g.showAlways&&this.hide()})),n(u.interaction.result,["keyup","input"],(M=>{this.setColor(M.target.value,!0)&&!this._initializingActive&&(this._emit("change",this._color,"input",this),this._emit("changestop","input",this)),M.stopImmediatePropagation()})),n(u.interaction.result,["focus","blur"],(M=>{this._recalc=M.type==="blur",this._recalc&&this._updateOutput(null)})),n([u.palette.palette,u.palette.picker,u.hue.slider,u.hue.picker,u.opacity.slider,u.opacity.picker],["mousedown","touchstart"],(()=>this._recalc=!0),{passive:!0})];if(!g.showAlways){const M=g.closeWithKey;C.push(n(u.button,"click",(()=>this.isOpen()?this.hide():this.show())),n(document,"keyup",(y=>this.isOpen()&&(y.key===M||y.code===M)&&this.hide())),n(document,["touchstart","mousedown"],(y=>{this.isOpen()&&!v(y).some((S=>S===u.app||S===u.button))&&this.hide()}),{capture:!0}))}if(g.adjustableNumbers){const M={rgba:[255,255,255,1],hsva:[360,100,100,1],hsla:[360,100,100,1],cmyk:[100,100,100,100]};_(u.interaction.result,((y,S,L)=>{const A=M[this.getColorRepresentation().toLowerCase()];if(A){const O=A[L],J=y+(O>=100?1e3*S:S);return J<=0?0:Number((J<O?J:O).toPrecision(3))}return y}))}if(g.autoReposition&&!g.inline){let M=null;const y=this;C.push(n(window,["scroll","resize"],(()=>{y.isOpen()&&(g.closeOnScroll&&y.hide(),M===null?(M=setTimeout((()=>M=null),100),requestAnimationFrame((function S(){y._rePositioningPicker(),M!==null&&requestAnimationFrame(S)}))):(clearTimeout(M),M=setTimeout((()=>M=null),100)))}),{capture:!0}))}this._eventBindings=C}_rePositioningPicker(){const{options:u}=this;if(!u.inline&&!this._nanopop.update({container:document.body.getBoundingClientRect(),position:u.position})){const g=this._root.app,C=g.getBoundingClientRect();g.style.top=(window.innerHeight-C.height)/2+"px",g.style.left=(window.innerWidth-C.width)/2+"px"}}_updateOutput(u){const{_root:g,_color:C,options:M}=this;if(g.interaction.type()){const y=`to${g.interaction.type().getAttribute("data-type")}`;g.interaction.result.value=typeof C[y]=="function"?C[y]().toString(M.outputPrecision):""}!this._initializingActive&&this._recalc&&this._emit("change",C,u,this)}_clearColor(u=!1){const{_root:g,options:C}=this;C.useAsButton||g.button.style.setProperty("--pcr-color","rgba(0, 0, 0, 0.15)"),g.button.classList.add("clear"),C.showAlways||this.hide(),this._lastColor=null,this._initializingActive||u||(this._emit("save",null),this._emit("clear"))}_parseLocalColor(u){const{values:g,type:C,a:M}=U(u),{lockOpacity:y}=this.options,S=M!==void 0&&M!==1;return g&&g.length===3&&(g[3]=void 0),{values:!g||y&&S?null:g,type:C}}_t(u){return this.options.i18n[u]||ae.I18N_DEFAULTS[u]}_emit(u,...g){this._eventListener[u].forEach((C=>C(...g,this)))}on(u,g){return this._eventListener[u].push(g),this}off(u,g){const C=this._eventListener[u]||[],M=C.indexOf(g);return~M&&C.splice(M,1),this}addSwatch(u){const{values:g}=this._parseLocalColor(u);if(g){const{_swatchColors:C,_root:M}=this,y=z(...g),S=p(`<button type="button" style="--pcr-color: ${y.toRGBA().toString(0)}" aria-label="${this._t("btn:swatch")}"/>`);return M.swatches.appendChild(S),C.push({el:S,color:y}),this._eventBindings.push(n(S,"click",(()=>{this.setHSVA(...y.toHSVA(),!0),this._emit("swatchselect",y),this._emit("change",y,"swatch",this)}))),!0}return!1}removeSwatch(u){const g=this._swatchColors[u];if(g){const{el:C}=g;return this._root.swatches.removeChild(C),this._swatchColors.splice(u,1),!0}return!1}applyColor(u=!1){const{preview:g,button:C}=this._root,M=this._color.toRGBA().toString(0);return g.lastColor.style.setProperty("--pcr-color",M),this.options.useAsButton||C.style.setProperty("--pcr-color",M),C.classList.remove("clear"),this._lastColor=this._color.clone(),this._initializingActive||u||this._emit("save",this._color),this}destroy(){cancelAnimationFrame(this._setupAnimationFrame),this._eventBindings.forEach((u=>r(...u))),Object.keys(this._components).forEach((u=>this._components[u].destroy()))}destroyAndRemove(){this.destroy();const{root:u,app:g}=this._root;u.parentElement&&u.parentElement.removeChild(u),g.parentElement.removeChild(g),Object.keys(this).forEach((C=>this[C]=null))}hide(){return!!this.isOpen()&&(this._root.app.classList.remove("visible"),this._emit("hide"),!0)}show(){return!this.options.disabled&&!this.isOpen()&&(this._root.app.classList.add("visible"),this._rePositioningPicker(),this._emit("show",this._color),this)}isOpen(){return this._root.app.classList.contains("visible")}setHSVA(u=360,g=0,C=0,M=1,y=!1){const S=this._recalc;if(this._recalc=!1,u<0||u>360||g<0||g>100||C<0||C>100||M<0||M>1)return!1;this._color=z(u,g,C,M);const{hue:L,opacity:A,palette:O}=this._components;return L.update(u/360),A.update(M),O.update(g/100,1-C/100),y||this.applyColor(),S&&this._updateOutput(),this._recalc=S,!0}setColor(u,g=!1){if(u===null)return this._clearColor(g),!0;const{values:C,type:M}=this._parseLocalColor(u);if(C){const y=M.toUpperCase(),{options:S}=this._root.interaction,L=S.find((A=>A.getAttribute("data-type")===y));if(L&&!L.hidden)for(const A of S)A.classList[A===L?"add":"remove"]("active");return!!this.setHSVA(...C,g)&&this.setColorRepresentation(y)}return!1}setColorRepresentation(u){return u=u.toUpperCase(),!!this._root.interaction.options.find((g=>g.getAttribute("data-type").startsWith(u)&&!g.click()))}getColorRepresentation(){return this._representation}getColor(){return this._color}getSelectedColor(){return this._lastColor}getRoot(){return this._root}disable(){return this.hide(),this.options.disabled=!0,this._root.button.classList.add("disabled"),this}enable(){return this.options.disabled=!1,this._root.button.classList.remove("disabled"),this}};ue(ae,"utils",o),ue(ae,"version","1.9.1"),ue(ae,"I18N_DEFAULTS",{"ui:dialog":"color picker dialog","btn:toggle":"toggle color picker dialog","btn:swatch":"color swatch","btn:last-color":"use previous color","btn:save":"Save","btn:cancel":"Cancel","btn:clear":"Clear","aria:btn:save":"save and close","aria:btn:cancel":"cancel and close","aria:btn:clear":"clear and close","aria:input":"color input field","aria:palette":"color selection area","aria:hue":"hue selection slider","aria:opacity":"selection slider"}),ue(ae,"DEFAULT_OPTIONS",{appClass:null,theme:"classic",useAsButton:!1,padding:8,disabled:!1,comparison:!0,closeOnScroll:!1,outputPrecision:0,lockOpacity:!1,autoReposition:!0,container:"body",components:{interaction:{}},i18n:{},swatches:null,inline:!1,sliders:null,default:"#42445a",defaultRepresentation:null,position:"bottom-middle",adjustableNumbers:!0,showAlways:!1,closeWithKey:"Escape"}),ue(ae,"create",u=>new ae(u));let D=ae;return e=e.default})()))})(Pt)),Pt.exports}var wa=ya();const ka=Ln(wa),Ca={class:"color-picker-wrapper"},xa={class:"color-picker-action"},Aa={__name:"index",props:{value:{type:String,default:"#000000"}},emits:["update:value","change"],setup(d,{emit:t}){const s=t,e=d,o=K(null);return Te(()=>{const a=ka.create({el:o.value,container:"body",theme:"nano",default:e.value,defaultRepresentation:"HEX",swatches:["rgba(244, 67, 54, 1)","rgba(233, 30, 99, 0.95)","rgba(156, 39, 176, 0.9)","rgba(103, 58, 183, 0.85)","rgba(63, 81, 181, 0.8)","rgba(33, 150, 243, 0.75)","rgba(3, 169, 244, 0.7)","rgba(0, 188, 212, 0.7)","rgba(0, 150, 136, 0.75)","rgba(76, 175, 80, 0.8)","rgba(139, 195, 74, 0.85)","rgba(205, 220, 57, 0.9)","rgba(255, 235, 59, 0.95)","rgba(255, 193, 7, 1)"],components:{preview:!0,opacity:!0,hue:!0,interaction:{hex:!1,rgba:!1,hsla:!1,hsva:!1,cmyk:!1,input:!0,clear:!1,save:!0}}});a.on("save",(n,r)=>{let p=n.toHEXA().toString();s("update:value",p),s("change",p),r.hide()}),a.on("show",()=>{const n=document.querySelectorAll(".pcr-save");n&&n.length&&n.forEach(function(r){r.tagName.toLowerCase()==="input"&&(r.value="保存")})})}),(a,n)=>{const r=ye;return F(),Q("div",Ca,[c(r,{value:e.value,readonly:!0,placeholder:"Basic usage"},null,8,["value"]),i("span",xa,[i("span",{ref_key:"colorPicker",ref:o},null,512)])])}}},Mt=se(Aa,[["__scopeId","data-v-ad5f6f69"]]),$a="/assets/img/quick-help-BZ3Cu-IE.png",Sa={class:"quick-instructions-box"},Ea={class:"help-box"},Ia={class:"quick-action-right"},Ra={class:"quick-list-box"},Ba={class:"list-box-wrap"},Pa={class:"drag-btn"},Ta={class:"left-box"},Ma={class:"title"},Ua={class:"content"},Na={class:"opration-box"},La={class:"form-box"},qa={__name:"quick-instruction",props:{type:{type:Number,default:void 0}},emits:["updata"],setup(d,{emit:t}){const{t:s}=ie("views.robot.robot-config.external-service.components.quick-instruction"),e=d,o=t,a=_o(),n=Ge(),{robotInfo:r}=Ke(n),{getRobot:p}=n,m=K([]),v=K(parseInt(e.type==-1?r.value.fast_command_switch:r.value.yunpc_fast_command_switch)||0);Be(m,R=>{o("updata",{comand_list:R,fast_command_switch:v.value})});const h=()=>{Io({robot_key:r.value.robot_key,app_id:e.type}).then(R=>{m.value=R.data||[],n.setQuickCommand(R.data)})};h();const _=ge.useForm,b=K(!1),T=K(""),P=de({robot_id:a.query.id,app_id:e.type,title:"",typ:1,content:"",id:""}),j=R=>{const{id:w}=r.value;Po({robot_key:r.value.robot_key,app_id:e.type}).then(V=>{v.value=R,o("updata",{comand_list:m.value,fast_command_switch:v.value}),p(w),oe.success(s("modify_success"))}).catch(V=>{v.value=!v.value})},$=()=>{P.content="",k(["content"])},E=R=>{b.value=!0,N(),T.value=R.id?s("edit_quick_instruction"):s("add_quick_instruction"),P.title=R.title||"",P.content=R.content||"",P.id=R.id||"",P.typ=+R.typ||1},H=de({title:[{message:s("title_required"),required:!0}],content:[{message:"",required:!0},{validator:async(R,w)=>w==""?Promise.reject(new Error(s("content_required",{param:P.typ==1?s("input_content"):s("jump_webpage")}))):P.typ==1||Uo(w)?Promise.resolve():Promise.reject(new Error(s("invalid_url")))}]}),{resetFields:N,validate:I,clearValidate:k,validateInfos:U}=_(P,H),z=()=>{I().then(()=>{To({...me(P)}).then(R=>{oe.success(s("modify_success")),b.value=!1,h()})})},q=R=>{le.confirm({title:s("reminder"),icon:c(Ue),content:s("delete_confirm"),okText:s("confirm_btn"),okType:"danger",cancelText:s("cancel_btn"),onOk(){Bo({id:R}).then(w=>{oe.success(s("delete_success")),h()})},onCancel(){}})},W=R=>{let w=m.value.map((V,D)=>({id:+V.id,sort:D+1}));Ro({data:w}).then(V=>{oe.success(s("save_success")),h()})};return(R,w)=>{const V=wo,D=Ut,ae=Je,B=_e,u=ye,g=Ce,C=Lt,M=Nt,y=qt,S=ge,L=le;return F(),Q("div",Sa,[c(Pe,null,{title:f(()=>[G(x(l(s)("quick_instruction_settings"))+" ",1),c(V,{placement:"top"},{content:f(()=>[i("div",Ea,[i("div",null,x(l(s)("quick_instruction_help")),1),w[8]||(w[8]=i("img",{src:$a,alt:""},null,-1))])]),default:f(()=>[c(l(xe),{class:"help-icon"})]),_:1})]),icon:f(()=>[c(D,{name:"quick-Instruction",style:{"font-size":"16px",color:"#262626"}})]),action:f(()=>[i("div",Ia,[c(ae,{onChange:j,class:"switch-item",checkedValue:1,unCheckedValue:0,checked:v.value,"onUpdate:checked":w[0]||(w[0]=A=>v.value=A),"checked-children":l(s)("switch_on"),"un-checked-children":l(s)("switch_off")},null,8,["checked","checked-children","un-checked-children"]),c(B,{onClick:E,size:"small",type:"primary"},{default:f(()=>[G(x(l(s)("add_btn")),1)]),_:1})])]),default:f(()=>[i("div",Ra,[c(l(fo),{modelValue:m.value,"onUpdate:modelValue":w[1]||(w[1]=A=>m.value=A),"item-key":"id",onEnd:w[2]||(w[2]=A=>W(A)),handle:".drag-btn"},{item:f(({element:A,index:O})=>[i("div",Ba,[(F(),Q("div",{class:"list-item",key:A.id},[i("div",Pa,[c(D,{name:"drag"})]),i("div",Ta,[i("div",Ma,x(A.title),1),i("div",Ua,x(A.content),1)]),i("div",Na,[c(l(bo),{onClick:J=>E(A)},null,8,["onClick"]),c(l(yo),{onClick:J=>q(A.id)},null,8,["onClick"])])]))])]),_:1},8,["modelValue"])])]),_:1}),c(L,{open:b.value,"onUpdate:open":w[7]||(w[7]=A=>b.value=A),title:T.value,onOk:z,width:"576px"},{default:f(()=>[i("div",La,[c(S,{layout:"vertical"},{default:f(()=>[c(g,Qt({label:l(s)("instruction_title_label")},l(U).title),{default:f(()=>[c(u,{placeholder:l(s)("instruction_title_placeholder"),maxLength:20,value:P.title,"onUpdate:value":w[3]||(w[3]=A=>P.title=A)},null,8,["placeholder","value"])]),_:1},16,["label"]),c(g,{label:l(s)("instruction_type_label"),required:""},{default:f(()=>[c(M,{value:P.typ,"onUpdate:value":w[4]||(w[4]=A=>P.typ=A),onChange:$},{default:f(()=>[c(C,{value:1},{default:f(()=>[G(x(l(s)("input_content")),1)]),_:1}),c(C,{value:2},{default:f(()=>[G(x(l(s)("jump_webpage")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),c(g,Qt({label:P.typ==1?l(s)("instruction_content_label"):l(s)("webpage_link_label"),required:""},l(U).content),{default:f(()=>[P.typ==1?(F(),ee(y,{key:0,style:{height:"100px"},value:P.content,"onUpdate:value":w[5]||(w[5]=A=>P.content=A),placeholder:l(s)("instruction_content_placeholder")},null,8,["value","placeholder"])):(F(),ee(u,{key:1,placeholder:l(s)("webpage_link_placeholder"),value:P.content,"onUpdate:value":w[6]||(w[6]=A=>P.content=A)},null,8,["placeholder","value"]))]),_:1},16,["label"])]),_:1})])]),_:1},8,["open","title"])])}}},Jn=se(qa,[["__scopeId","data-v-baa8d5a8"]]),Da={class:"web-app-box"},Oa={class:"box-left"},Fa={class:"box-wrapper"},Va={class:"web-app-info"},ja={class:"web-app-link"},za=["href"],Ha={class:"link-action"},Wa=["src"],Ka={class:"card-title"},Ga={class:"title-text"},Ja={class:"web-app-link"},Ya=["href"],Qa={class:"link-action"},Xa=["src"],Za={class:"access-restrictions form-box"},es={class:"form-item"},ts={class:"form-item-label"},ns={class:"form-item-body"},os={class:"default-text-color"},as={class:"default-text-color"};const ss={class:"box-wrapper"},is={class:"web-app-style form-box"},rs={class:"window-size-box"},ls={class:"box-wrapper"},cs={class:"box-right"},us={class:"demo-box"},ds=["src"],ps={__name:"web-app",setup(d){const{t}=ie("views.robot.robot-config.external-service.components.web-app"),s=Pn(),e=Ge(),{robotInfo:o,external_config_h5:a}=Ke(e),{h5_website:n,h5_domain:r,robot_key:p}=o.value,{getRobot:m}=e,v=K(""),h=K(""),_=K(),b=de({logo:a.value.logo,pageTitle:a.value.pageTitle,navbarShow:a.value.navbarShow,lang:a.value.lang,pageStyle:a.value.pageStyle,open_type:a.value.open_type,window_width:a.value.window_width,window_height:a.value.window_height,new_session_btn_show:a.value.new_session_btn_show}),T=be(()=>`${r}/#/chat/pc?robot_key=${p}`),P=be(()=>`${r}/#/chat/h5?robot_key=${p}`),j=be(()=>n);Be(b,R=>{E(R)});const $=R=>{E(R,"updataQuickComand")},E=(R,w)=>{document.getElementById("mobile-preview").contentWindow.postMessage({type:w||"onPreview",data:JSON.parse(JSON.stringify(R))},"*")},H={lang:[{required:!0,message:t("please_select_language"),trigger:"change"}],pageTitle:[{required:!0,message:t("please_input_title"),trigger:"input"},{trigger:"input",validator:()=>b.logo?Promise.resolve():Promise.reject(t("please_upload_logo"))}],navbarShow:[{required:!0,message:t("please_select_navbar_show"),trigger:"change"}],pageStyle:{navbarBackgroundColor:[{required:!0,message:t("please_select_navbar_color"),trigger:"change"}]}},N=K(a.value.accessRestrictionsType||1),I=()=>{let R={...me(a.value)};R.accessRestrictionsType=N.value,k(R)},k=R=>{const{id:w}=o.value;qn({id:w,external_config_h5:JSON.stringify(R)}).then(()=>{m(w),oe.success(t("save_success")),s.go(0)})},U=()=>{_.value.validate().then(()=>{let R={...me(b)};R.window_width=+R.window_width||1200,R.window_height=+R.window_height||650,R.accessRestrictionsType=N.value,k(R)}).catch(R=>{})},z=R=>{window.open(R)},q=R=>{Me(R),oe.success(t("copy_success"))},W=async()=>{try{v.value=await Sn.toDataURL(T.value),h.value=await Sn.toDataURL(P.value)}catch(R){console.error(R)}};return setTimeout(()=>{W()},300),(R,w)=>{const V=Ut,D=_e,ae=Ye,B=Lt,u=Nt,g=Ce,C=Ot,M=Dt,y=Vt,S=Ft,L=Mn,A=ge;return F(),Q("div",Da,[i("div",Oa,[i("div",Fa,[c(Pe,{title:l(t)("h5_link_title")},{icon:f(()=>[c(V,{name:"phone",style:{"font-size":"16px",color:"#262626"}})]),default:f(()=>[i("div",Va,[i("div",ja,[i("a",{href:P.value,target:"_blank"},x(P.value),9,za)]),i("div",Ha,[c(D,{class:"action-btn",type:"primary",ghost:"",onClick:w[0]||(w[0]=O=>q(P.value))},{default:f(()=>[G(x(l(t)("copy_btn")),1)]),_:1}),c(D,{class:"action-btn",onClick:w[1]||(w[1]=O=>z(P.value))},{default:f(()=>[G(x(l(t)("preview_btn")),1)]),_:1}),c(ae,{color:"#fff",placement:"top"},{title:f(()=>[i("img",{style:{width:"180px"},src:h.value,alt:""},null,8,Wa)]),default:f(()=>[c(D,{class:"action-btn"},{default:f(()=>[G(x(l(t)("qrcode_btn")),1)]),_:1})]),_:1})]),i("div",Ka,[c(V,{name:"circularNeedle",style:{"font-size":"16px",color:"#262626"}}),i("div",Ga,x(l(t)("pc_web_link_title")),1)]),i("div",Ja,[i("a",{href:T.value,target:"_blank"},x(T.value),9,Ya)]),i("div",Qa,[c(D,{class:"action-btn",type:"primary",ghost:"",onClick:w[2]||(w[2]=O=>q(T.value))},{default:f(()=>[G(x(l(t)("copy_btn")),1)]),_:1}),c(D,{class:"action-btn",onClick:w[3]||(w[3]=O=>z(T.value))},{default:f(()=>[G(x(l(t)("preview_btn")),1)]),_:1}),c(ae,{color:"#fff",placement:"top"},{title:f(()=>[i("img",{style:{width:"180px"},src:v.value,alt:""},null,8,Xa)]),default:f(()=>[c(D,{class:"action-btn"},{default:f(()=>[G(x(l(t)("qrcode_btn")),1)]),_:1})]),_:1})]),i("div",Za,[i("div",es,[i("div",ts,x(l(t)("access_restrictions_label")),1),i("div",ns,[c(u,{value:N.value,"onUpdate:value":w[4]||(w[4]=O=>N.value=O),onChange:I},{default:f(()=>[c(B,{value:1},{default:f(()=>[i("span",os,x(l(t)("no_restriction")),1)]),_:1}),c(B,{value:2},{default:f(()=>[i("span",as,x(l(t)("login_required")),1)]),_:1}),ne("",!0)]),_:1},8,["value"])])])])])]),_:1},8,["title"])]),i("div",ss,[c(Pe,{title:l(t)("style_settings_title")},{icon:f(()=>[c(V,{name:"phone",style:{"font-size":"16px",color:"#262626"}})]),action:f(()=>[c(D,{onClick:U,size:"small",type:"primary"},{default:f(()=>[G(x(l(t)("save_btn")),1)]),_:1})]),default:f(()=>[i("div",is,[c(A,{ref_key:"formRef",ref:_,layout:"vertical",model:b,rules:H},{default:f(()=>[c(g,{class:"form-item",label:l(t)("show_navbar_label"),name:"navbarShow"},{default:f(()=>[c(u,{value:b.navbarShow,"onUpdate:value":w[5]||(w[5]=O=>b.navbarShow=O),name:"navbarShow"},{default:f(()=>[c(B,{value:1},{default:f(()=>[G(x(l(t)("show_navbar_yes")),1)]),_:1}),c(B,{value:2},{default:f(()=>[G(x(l(t)("show_navbar_no")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),c(g,{class:"form-item",label:l(t)("show_history_and_new_session_btn_label"),name:"new_session_btn_show"},{default:f(()=>[c(u,{value:b.new_session_btn_show,"onUpdate:value":w[6]||(w[6]=O=>b.new_session_btn_show=O),name:"new_session_btn_show"},{default:f(()=>[c(B,{value:1},{default:f(()=>[G(x(l(t)("show_navbar_yes")),1)]),_:1}),c(B,{value:2},{default:f(()=>[G(x(l(t)("show_navbar_no")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),c(g,{class:"form-item",label:l(t)("page_title_label"),name:"pageTitle"},{default:f(()=>[c(Le,{avatar:b.logo,"onUpdate:avatar":w[7]||(w[7]=O=>b.logo=O),value:b.pageTitle,"onUpdate:value":w[8]||(w[8]=O=>b.pageTitle=O)},null,8,["avatar","value"])]),_:1},8,["label"]),c(g,{class:"form-item",label:l(t)("navbar_color_label"),name:["pageStyle","navbarBackgroundColor"]},{default:f(()=>[c(Mt,{value:b.pageStyle.navbarBackgroundColor,"onUpdate:value":w[9]||(w[9]=O=>b.pageStyle.navbarBackgroundColor=O)},null,8,["value"])]),_:1},8,["label"]),c(g,{class:"form-item",label:l(t)("language_label"),name:"lang"},{default:f(()=>[c(M,{style:{width:"180px"},value:b.lang,"onUpdate:value":w[10]||(w[10]=O=>b.lang=O),placeholder:l(t)("language_placeholder")},{default:f(()=>[c(C,{value:"zh-CN"},{default:f(()=>[G(x(l(t)("language_zh_cn")),1)]),_:1}),c(C,{value:"en-US"},{default:f(()=>[G(x(l(t)("language_en_us")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label"]),c(g,{class:"form-item",label:l(t)("url_open_type_label"),name:"open_type",required:""},{default:f(()=>[c(u,{value:b.open_type,"onUpdate:value":w[11]||(w[11]=O=>b.open_type=O)},{default:f(()=>[c(B,{value:1},{default:f(()=>[G(x(l(t)("open_new_tab")),1)]),_:1}),c(B,{value:2},{default:f(()=>[G(x(l(t)("open_new_window"))+" ",1),c(ae,{title:l(t)("open_new_window_tooltip")},{title:f(()=>[...w[14]||(w[14]=[G("prompt text",-1)])]),default:f(()=>[c(l(xe))]),_:1},8,["title"])]),_:1})]),_:1},8,["value"]),b.open_type==2?(F(),ee(L,{key:0},{default:f(()=>[i("div",rs,[c(S,{align:"center",gap:8},{default:f(()=>[i("div",null,x(l(t)("window_height_label")),1),c(y,{value:b.window_height,"onUpdate:value":w[12]||(w[12]=O=>b.window_height=O),min:500,max:2e3},null,8,["value"]),w[15]||(w[15]=G(" PX ",-1))]),_:1}),c(S,{align:"center",gap:8},{default:f(()=>[i("div",null,x(l(t)("window_width_label")),1),c(y,{value:b.window_width,"onUpdate:value":w[13]||(w[13]=O=>b.window_width=O),min:500,max:2e3},null,8,["value"]),w[16]||(w[16]=G(" PX ",-1))]),_:1})])]),_:1})):ne("",!0)]),_:1},8,["label"])]),_:1},8,["model"])])]),_:1},8,["title"])]),i("div",ls,[c(Jn,{type:l(o).app_id,onUpdata:$},null,8,["type"])])]),i("div",cs,[i("div",us,[i("iframe",{id:"mobile-preview",src:j.value,frameborder:"0"},null,8,ds)])])])}}},_s=se(ps,[["__scopeId","data-v-b1ef6041"]]);function fs({pc_domain:d,robot_key:t,language:s="zh-CN"}){var e=`<script>
  (function (z, h, i, m, a, j, s) {
    z[m] = z[m] || function () {
      (z[m].a = z[m].a || []).push(arguments);
    };
    (j = h.createElement(i)), (s = h.getElementsByTagName(i)[0]);
    j.async = true;
    j.charset = "UTF-8";
    j.setAttribute(
      "data-json",
      JSON.stringify({
        robot_key: "${t}",
        language: "${s}",
      })
    );
    j.id = "ai_chat_js";
    j.src = '${d}/sdk/ai-chat-sdk.umd.cjs';
    s.parentNode.insertBefore(j, s);
  })(window, document, "script", "_ai_chat");
<\/script>`;return e}const hs={class:"gradient-color-picker"},ms={class:"color-picker-box"},gs={class:"gradient-type-select"},vs={class:"color-item"},bs={class:"right-arrow"},ys={class:"color-item"},ws={__name:"gradient-color-picker",props:{value:{type:String,default:""}},emits:["update:value"],setup(d,{emit:t}){const{t:s}=ie("views.robot.robot-config.external-service.components.gradient-color-picker"),e=t,o=d,a=ge.useInjectFormItemContext(),n=K([{key:1,label:"label_solid_color",value:"color",type:"color"},{key:2,label:"label_linear_gradient_horizontal",value:"to right",type:"linear-gradient"},{key:3,label:"label_linear_gradient_vertical",value:"to bottom",type:"linear-gradient"},{key:4,label:"label_radial_gradient",value:"circle",type:"radial-gradient"}]),r=K("linear-gradient"),p=K("to right"),m=K("#2435E7"),v=K("#01A0FB"),h=be(()=>r.value=="color"?m.value:`${r.value}(${p.value}, ${m.value}, ${v.value})`);Be(()=>h.value,()=>{let b=[r.value,p.value,m.value,v.value].join(",");e("update:value",b),a.onFieldChange()}),Be(()=>o.value,()=>{const b=o.value.split(","),[T,P,j,$]=b;r.value=T,p.value=P,m.value=j,v.value=$},{immediate:!0});const _=(b,T)=>{r.value=T.type,p.value=b,a.onFieldChange()};return(b,T)=>{const P=Ot,j=Dt;return F(),Q("div",hs,[i("div",ms,[i("div",gs,[c(j,{value:p.value,style:{width:"230px"},onChange:_},{default:f(()=>[(F(!0),Q(fe,null,Ae(n.value,$=>(F(),ee(P,{value:$.value,type:$.type,key:$.key},{default:f(()=>[G(x(l(s)($.label)),1)]),_:2},1032,["value","type"]))),128))]),_:1},8,["value"])]),i("div",vs,[c(Mt,{value:m.value,"onUpdate:value":T[0]||(T[0]=$=>m.value=$)},null,8,["value"])]),r.value!="color"?(F(),Q(fe,{key:0},[i("div",bs,[c(l(ko))]),i("div",ys,[c(Mt,{value:v.value,"onUpdate:value":T[1]||(T[1]=$=>v.value=$)},null,8,["value"])])],64)):ne("",!0)])])}}},ks=se(ws,[["__scopeId","data-v-452e0c8c"]]),Cs="data:image/svg+xml,%3csvg%20width='56'%20height='56'%20viewBox='0%200%2056%2056'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='56'%20height='56'%20fill='white'/%3e%3crect%20x='14'%20y='14'%20width='28'%20height='28'%20rx='14'%20fill='%232475FC'/%3e%3crect%20x='14.5'%20y='14.5'%20width='27'%20height='27'%20rx='13.5'%20stroke='black'%20stroke-opacity='0.04'/%3e%3cg%20clip-path='url(%23clip0_2269_42995)'%3e%3cpath%20d='M31.5%2030.3385C32.7887%2030.3385%2033.8333%2029.2939%2033.8333%2028.0052C33.8333%2026.7165%2032.7887%2025.6719%2031.5%2025.6719'%20stroke='white'%20stroke-width='1.16667'%20stroke-linejoin='round'/%3e%3cpath%20d='M24.5013%2025.6719C23.2126%2025.6719%2022.168%2026.7165%2022.168%2028.0052C22.168%2029.2939%2023.2126%2030.3385%2024.5013%2030.3385'%20stroke='white'%20stroke-width='1.16667'%20stroke-linejoin='round'/%3e%3cpath%20d='M24.5%2030.3385V30.1927V29.4635V28.0052V25.6719C24.5%2023.7389%2026.067%2022.1719%2028%2022.1719C29.933%2022.1719%2031.5%2023.7389%2031.5%2025.6719V30.3385C31.5%2032.2715%2029.933%2033.8385%2028%2033.8385'%20stroke='white'%20stroke-width='1.16667'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_2269_42995'%3e%3crect%20width='14'%20height='14'%20fill='white'%20transform='translate(21%2021)'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",xs="data:image/svg+xml,%3csvg%20width='56'%20height='56'%20viewBox='0%200%2056%2056'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='56'%20height='56'%20fill='white'/%3e%3crect%20y='14'%20width='56'%20height='28'%20rx='14'%20fill='%232475FC'/%3e%3cg%20clip-path='url(%23clip0_2269_42985)'%3e%3cpath%20d='M19.5%2030.3385C20.7887%2030.3385%2021.8333%2029.2939%2021.8333%2028.0052C21.8333%2026.7165%2020.7887%2025.6719%2019.5%2025.6719'%20stroke='white'%20stroke-width='1.16667'%20stroke-linejoin='round'/%3e%3cpath%20d='M12.5013%2025.6719C11.2126%2025.6719%2010.168%2026.7165%2010.168%2028.0052C10.168%2029.2939%2011.2126%2030.3385%2012.5013%2030.3385'%20stroke='white'%20stroke-width='1.16667'%20stroke-linejoin='round'/%3e%3cpath%20d='M12.5%2030.3385V30.1927V29.4635V28.0052V25.6719C12.5%2023.7389%2014.067%2022.1719%2016%2022.1719C17.933%2022.1719%2019.5%2023.7389%2019.5%2025.6719V30.3385C19.5%2032.2715%2017.933%2033.8385%2016%2033.8385'%20stroke='white'%20stroke-width='1.16667'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3cpath%20d='M24.5414%2024.224V25.088H26.3894C26.9294%2026.936%2027.8894%2028.544%2029.2814%2029.912C27.9854%2031.088%2026.3294%2031.94%2024.3134%2032.48L24.7694%2033.236C26.8094%2032.648%2028.5134%2031.724%2029.8814%2030.464C31.1774%2031.58%2032.8094%2032.504%2034.8014%2033.248L35.2694%2032.528C33.3494%2031.82%2031.7534%2030.932%2030.4814%2029.852C31.6574%2028.58%2032.5454%2026.984%2033.1334%2025.088H35.0054V24.224H30.4214C30.0374%2023.396%2029.6294%2022.688%2029.1734%2022.112L28.3094%2022.424C28.7894%2022.988%2029.1854%2023.588%2029.5094%2024.224H24.5414ZM27.2414%2025.088H32.2334C31.7294%2026.744%2030.9494%2028.148%2029.8814%2029.312C28.6334%2028.112%2027.7574%2026.708%2027.2414%2025.088ZM40.9574%2024.116C40.7174%2024.452%2040.4534%2024.8%2040.1774%2025.148H37.0094V25.844H39.6134C39.3254%2026.18%2039.0254%2026.516%2038.7134%2026.876C39.5414%2027.032%2040.3694%2027.212%2041.2094%2027.428C40.1534%2027.764%2038.7134%2027.932%2036.8894%2027.932L37.3574%2028.64C39.3974%2028.616%2041.0414%2028.304%2042.3014%2027.716C43.5134%2028.04%2044.7254%2028.412%2045.9254%2028.844L46.4294%2028.184C45.3134%2027.812%2044.2214%2027.488%2043.1654%2027.224C43.6574%2026.864%2044.1134%2026.408%2044.5454%2025.844H46.5614V25.148H41.1254C41.3174%2024.896%2041.5214%2024.632%2041.7374%2024.344L40.9574%2024.116ZM42.2054%2026.984C41.4494%2026.792%2040.7054%2026.636%2039.9734%2026.516C40.1534%2026.324%2040.3574%2026.096%2040.5734%2025.844H43.6214C43.2614%2026.276%2042.7814%2026.648%2042.2054%2026.984ZM46.5974%2023.144H42.2414C42.0974%2022.784%2041.9534%2022.448%2041.7854%2022.148L40.8854%2022.292C41.0654%2022.556%2041.2334%2022.832%2041.3894%2023.144H36.9494V24.836H37.7654V23.876H45.7814V24.836H46.5974V23.144ZM36.6374%2029.336V30.104H40.5854C39.8414%2030.872%2038.4734%2031.556%2036.4814%2032.156L36.9614%2032.924C39.1214%2032.132%2040.5854%2031.196%2041.3534%2030.116V33.176H42.2414V30.152C43.1294%2031.256%2044.6174%2032.156%2046.7054%2032.84L47.0774%2032.084C45.2414%2031.592%2043.8854%2030.932%2043.0214%2030.104H46.9214V29.336H42.2414V28.4H41.3534V29.336H36.6374Z'%20fill='white'/%3e%3cdefs%3e%3cclipPath%20id='clip0_2269_42985'%3e%3crect%20width='14'%20height='14'%20fill='white'%20transform='translate(9%2021)'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",As={class:"float-icon-setting"},$s={class:"form-box"},Ss={class:"form-item"},Es={class:"form-item-label"},Is={class:"form-content"},Rs={class:"display-types"},Bs={class:"type-name"},Ps={class:"type-name"},Ts={class:"type-icon"},Ms=["src"],Us={class:"type-name"},Ns={key:1,class:"display-type"},Ls={class:"type-icon"},qs={class:"type-name"},Ds={key:0,class:"form-item"},Os={class:"form-item-label"},Fs={class:"form-content"},Vs={class:"form-item"},js={class:"form-item-label"},zs={class:"form-content"},Hs={class:"number-input"},Ws={class:"form-item"},Ks={class:"form-item-label"},Gs={class:"form-content"},Js={class:"number-input"},Ys={class:"form-item"},Qs={class:"form-item-label"},Xs={class:"form-content"},Zs={class:"form-item"},ei={class:"form-item-label"},ti={class:"form-content"},ni={class:"form-item"},oi={class:"form-content"},ai={__name:"float-icon-setting",props:{saveLoading:{type:Boolean,default:!1},form:{type:Object,default:()=>{}}},emits:["save"],setup(d,{expose:t,emit:s}){const{t:e}=ie("views.robot.robot-config.external-service.components.float-icon-setting"),o=d,a=s,n=de({displayType:1,buttonText:e("default_button_text"),buttonIcon:"",bottomMargin:32,rightMargin:32,showUnreadCount:1,showNewMessageTip:1}),r=h=>{n.displayType=h},p=be(()=>n.buttonIcon?n.displayType==3:!0),m=h=>{let _=h[0];r(3),Fn({file:_,category:"icon"}).then(b=>{n.buttonIcon=b.data.link})},v=()=>{n.rightMargin,(n.rightMargin==""||n.rightMargin==null)&&(n.rightMargin=0),(n.bottomMargin==""||n.rightMargin==null)&&(n.bottomMargin=0),a("save",me(n))};return Be(()=>o.form,h=>{Object.assign(n,h.floatBtn)},{immediate:!0}),t({handleSubmit:v}),(h,_)=>{const b=ye,T=Vt,P=Je,j=_e;return F(),ee(Pe,{title:l(e)("title_float_icon_setting")},{icon:f(()=>[c(l(Co),{name:"quick-Instruction",style:{"font-size":"16px",color:"#262626"}})]),default:f(()=>[i("div",As,[G(x(o.title)+" ",1),i("div",$s,[i("div",Ss,[i("div",Es,x(l(e)("label_display_type")),1),i("div",Is,[i("div",Rs,[i("div",{class:lt(["display-type",{"is-checked":n.displayType==1}]),onClick:_[0]||(_[0]=$=>r(1))},[_[8]||(_[8]=i("div",{class:"type-icon"},[i("img",{src:Cs,alt:""})],-1)),i("div",Bs,x(l(e)("type_simple")),1)],2),i("div",{class:lt(["display-type",{"is-checked":n.displayType==2}]),onClick:_[1]||(_[1]=$=>r(2))},[_[9]||(_[9]=i("div",{class:"type-icon"},[i("img",{src:xs,alt:""})],-1)),i("div",Ps,x(l(e)("type_with_text")),1)],2),n.buttonIcon?(F(),Q("div",{key:0,class:lt(["display-type",{"is-checked":n.displayType==3}]),onClick:_[2]||(_[2]=$=>r(3))},[i("div",Ts,[i("img",{src:n.buttonIcon,alt:"",title:""},null,8,Ms)]),i("div",Us,x(l(e)("type_custom")),1)],2)):ne("",!0),p.value?(F(),Q("div",Ns,[c(Vn,{onChange:m},{default:f(()=>[i("div",Ls,[c(l(jt),{style:{"font-size":"20px"}})])]),_:1}),i("div",qs,x(n.buttonIcon?l(e)("label_upload_image"):l(e)("type_custom")),1)])):ne("",!0)])])]),n.displayType==2?(F(),Q("div",Ds,[i("div",Os,x(l(e)("label_button_text")),1),i("div",Fs,[c(b,{placeholder:l(e)("ph_input_button_text"),maxlength:15,style:{width:"315px"},value:n.buttonText,"onUpdate:value":_[3]||(_[3]=$=>n.buttonText=$)},null,8,["placeholder","value"])])])):ne("",!0),i("div",Vs,[i("div",js,x(l(e)("label_bottom_margin")),1),i("div",zs,[i("div",Hs,[c(T,{class:"input",value:n.bottomMargin,"onUpdate:value":_[4]||(_[4]=$=>n.bottomMargin=$)},null,8,["value"]),_[10]||(_[10]=i("span",{class:"unit"},"PX",-1))])])]),i("div",Ws,[i("div",Ks,x(l(e)("label_right_margin")),1),i("div",Gs,[i("div",Js,[c(T,{class:"input",value:n.rightMargin,"onUpdate:value":_[5]||(_[5]=$=>n.rightMargin=$)},null,8,["value"]),_[11]||(_[11]=i("span",{class:"unit"},"PX",-1))])])]),i("div",Ys,[i("div",Qs,x(l(e)("label_show_unread_count")),1),i("div",Xs,[c(P,{checked:n.showUnreadCount,"onUpdate:checked":_[6]||(_[6]=$=>n.showUnreadCount=$),unCheckedValue:0,checkedValue:1},null,8,["checked"])])]),i("div",Zs,[i("div",ei,x(l(e)("label_show_new_message_tip")),1),i("div",ti,[c(P,{checked:n.showNewMessageTip,"onUpdate:checked":_[7]||(_[7]=$=>n.showNewMessageTip=$),unCheckedValue:0,checkedValue:1},null,8,["checked"])])]),i("div",ni,[_[12]||(_[12]=i("div",{class:"form-item-label"},null,-1)),i("div",oi,[c(j,{type:"primary",loading:o.saveLoading,onClick:v},{default:f(()=>[G(x(l(e)("btn_save")),1)]),_:1},8,["loading"])])])])])]),_:1},8,["title"])}}},si=se(ai,[["__scopeId","data-v-f37dab39"]]),ii={class:"web-app-box"},ri={class:"box-left"},li={class:"box-wrapper"},ci={class:"web-app-style form-box"},ui={class:"window-size-box"},di={class:"box-wrapper"},pi={class:"sdk-code"},_i={class:"box-wrapper"},fi={class:"box-wrapper"},hi={class:"box-right"},mi={class:"demo-box"},gi=["src"],vi={__name:"embed-website",setup(d){const{t}=ie("views.robot.robot-config.external-service.components.embed-website"),s=Ge(),{robotInfo:e,external_config_pc:o}=Ke(s),{getRobot:a}=s,n=fs(e.value),r=()=>{Me(n),oe.success(t("copy_success"))},p=K(),m=de({headTitle:o.value.headTitle,headSubTitle:o.value.headSubTitle,headImage:o.value.headImage,lang:o.value.lang,pageStyle:o.value.pageStyle,floatBtn:o.value.floatBtn,open_type:o.value.open_type,window_width:o.value.window_width,window_height:o.value.window_height,new_session_btn_show:o.value.new_session_btn_show}),v=be(()=>{let{pc_domain:$,robot_key:E}=e.value;return`${$}/web/#/chat?robot_key=${E}&language=${m.lang||"zh-CN"}`});Be(m,$=>{_($)});const h=$=>{_($,"updataQuickComand")},_=($,E)=>{document.getElementById("web-preview").contentWindow.postMessage({type:E||"onPreview",data:JSON.parse(JSON.stringify($))},"*")},b={lang:[{required:!0,message:t("please_select_language"),trigger:"change"}],headTitle:[{required:!0,message:t("please_input_title"),trigger:"input"},{trigger:"input",validator:()=>m.headImage?Promise.resolve():Promise.reject(t("please_upload_logo"))}],pageStyle:{headBackgroundColor:[{required:!0,message:t("please_select_color"),trigger:"change"}]}},T=()=>{const{id:$}=e.value;m.window_width=+m.window_width||1200,m.window_height=+m.window_height||650;let E={...me(m)};qn({id:$,external_config_pc:JSON.stringify(E)}).then(()=>{a($),oe.success(t("save_success"))})},P=()=>{p.value.validate().then(()=>{T()}).catch($=>{})},j=$=>{m.floatBtn={...$},P()};return($,E)=>{const H=Ut,N=_e,I=Ce,k=qt,U=Ot,z=Dt,q=Lt,W=Ye,R=Nt,w=Vt,V=Ft,D=Mn,ae=ge;return F(),Q("div",ii,[i("div",ri,[i("div",li,[c(Pe,{title:l(t)("style_settings_title")},{icon:f(()=>[c(H,{name:"pc",style:{"font-size":"16px",color:"#262626"}})]),action:f(()=>[c(N,{onClick:P,size:"small",type:"primary"},{default:f(()=>[G(x(l(t)("save_btn")),1)]),_:1})]),default:f(()=>[i("div",ci,[c(ae,{ref_key:"formRef",ref:p,layout:"vertical",model:m,rules:b},{default:f(()=>[c(I,{class:"form-item",label:l(t)("page_title_label"),name:"headTitle"},{default:f(()=>[c(Le,{avatar:m.headImage,"onUpdate:avatar":E[0]||(E[0]=B=>m.headImage=B),value:m.headTitle,"onUpdate:value":E[1]||(E[1]=B=>m.headTitle=B)},null,8,["avatar","value"])]),_:1},8,["label"]),c(I,{class:"form-item",label:l(t)("subtitle_label"),name:"headSubTitle"},{default:f(()=>[c(k,{value:m.headSubTitle,"onUpdate:value":E[2]||(E[2]=B=>m.headSubTitle=B),placeholder:l(t)("subtitle_placeholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),c(I,{class:"form-item",label:l(t)("color_label"),name:["pageStyle","headBackgroundColor"]},{default:f(()=>[c(ks,{value:m.pageStyle.headBackgroundColor,"onUpdate:value":E[3]||(E[3]=B=>m.pageStyle.headBackgroundColor=B)},null,8,["value"])]),_:1},8,["label"]),c(I,{class:"form-item",label:l(t)("language_label"),name:"lang"},{default:f(()=>[c(z,{style:{width:"180px"},value:m.lang,"onUpdate:value":E[4]||(E[4]=B=>m.lang=B),placeholder:l(t)("language_placeholder")},{default:f(()=>[c(U,{value:"zh-CN"},{default:f(()=>[G(x(l(t)("language_zh_cn")),1)]),_:1}),c(U,{value:"en-US"},{default:f(()=>[G(x(l(t)("language_en_us")),1)]),_:1})]),_:1},8,["value","placeholder"])]),_:1},8,["label"]),c(I,{class:"form-item",label:l(t)("url_open_type_label"),name:"open_type",required:""},{default:f(()=>[c(R,{value:m.open_type,"onUpdate:value":E[5]||(E[5]=B=>m.open_type=B)},{default:f(()=>[c(q,{value:1},{default:f(()=>[G(x(l(t)("open_new_tab")),1)]),_:1}),c(q,{value:2},{default:f(()=>[G(x(l(t)("open_new_window"))+" ",1),c(W,{title:l(t)("open_new_window_tooltip")},{title:f(()=>[...E[9]||(E[9]=[G("prompt text",-1)])]),default:f(()=>[c(l(xe))]),_:1},8,["title"])]),_:1})]),_:1},8,["value"]),m.open_type==2?(F(),ee(D,{key:0},{default:f(()=>[i("div",ui,[c(V,{align:"center",gap:8},{default:f(()=>[i("div",null,x(l(t)("window_height_label")),1),c(w,{value:m.window_height,"onUpdate:value":E[6]||(E[6]=B=>m.window_height=B),min:500,max:2e3},null,8,["value"]),E[10]||(E[10]=G(" PX ",-1))]),_:1}),c(V,{align:"center",gap:8},{default:f(()=>[i("div",null,x(l(t)("window_width_label")),1),c(w,{value:m.window_width,"onUpdate:value":E[7]||(E[7]=B=>m.window_width=B),min:500,max:2e3},null,8,["value"]),E[11]||(E[11]=G(" PX ",-1))]),_:1})])]),_:1})):ne("",!0)]),_:1},8,["label"]),c(I,{class:"form-item",label:l(t)("label_show_history_and_new_session_btn"),name:"new_session_btn_show",required:""},{default:f(()=>[c(R,{value:m.new_session_btn_show,"onUpdate:value":E[8]||(E[8]=B=>m.new_session_btn_show=B),name:"new_session_btn_show"},{default:f(()=>[c(q,{value:1},{default:f(()=>[G(x(l(t)("label_show")),1)]),_:1}),c(q,{value:2},{default:f(()=>[G(x(l(t)("label_hide")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label"])]),_:1},8,["model"])])]),_:1},8,["title"])]),i("div",di,[c(Pe,{title:l(t)("copy_sdk_code_title")},{icon:f(()=>[c(H,{name:"sdk",style:{"font-size":"16px",color:"#262626"}})]),action:f(()=>[c(N,{onClick:r,size:"small"},{default:f(()=>[G(x(l(t)("copy_btn")),1)]),_:1})]),default:f(()=>[i("div",pi,[i("pre",null,[i("code",null,x(l(n)),1)])])]),_:1},8,["title"])]),i("div",_i,[c(Jn,{type:l(e).app_id_embed,onUpdata:h},null,8,["type"])]),i("div",fi,[c(si,{form:m,onSave:j},null,8,["form"])])]),i("div",hi,[i("div",mi,[i("iframe",{id:"web-preview",src:v.value,frameborder:"0"},null,8,gi)])])])}}},bi=se(vi,[["__scopeId","data-v-4917326f"]]),yi={class:"wechat-app-item"},wi={class:"item-body"},ki=["src"],Ci={class:"app-info"},xi={class:"app-name"},Ai={class:"app-desc"},$i={class:"ext-info-list"},Si={class:"ext-content"},Ei={class:"ext-info-list"},Ii={key:0,class:"status-block status-success"},Ri={class:"status-block status-warning"},Bi={class:"btn-wrapper-box"},Pi={style:{color:"#fb363f"}},Ti={__name:"wechat-app-item",props:{item:{type:Object,default:()=>({})},app_type:{type:String,default:""},showMenu:{type:Array,default:["edit","del"]}},emits:["edit","delete","refresh"],setup(d,{emit:t}){const s=t,e=["mini_program","official_account"],{t:o}=ie("views.robot.robot-config.external-service.components.wechat-app-item"),a=d;function n(){s("edit",{...a.item})}function r(){s("delete",{...a.item})}function p(){s("refresh",{...a.item})}return(m,v)=>{const h=Ft,_=Ao,b=Tn,T=$o;return F(),Q("div",yi,[i("div",wi,[i("img",{class:"app-avatar",src:d.item.app_avatar,alt:""},null,8,ki),i("div",Ci,[i("div",xi,x(d.item.app_name),1),i("div",Ai,x(l(o)("appid"))+x(d.item.app_id),1)])]),e.includes(a.app_type)?(F(),Q(fe,{key:0},[i("div",$i,[i("div",Si,x(d.item.wechat_reply_type),1)]),i("div",Ei,[d.item.account_is_verify=="true"?(F(),Q("div",Ii,[c(l(Un)),G(" "+x(l(o)("verified")),1)])):(F(),ee(h,{key:1,gap:8},{default:f(()=>[i("div",Ri,[c(l(Nn)),G(" "+x(l(o)("unverified")),1)]),i("a",{onClick:p},x(l(o)("refresh_status")),1)]),_:1}))])],64)):ne("",!0),d.showMenu&&d.showMenu.length?(F(),ee(T,{key:1},{overlay:f(()=>[c(b,null,{default:f(()=>[d.showMenu.includes("edit")?(F(),ee(_,{key:0,onClick:n},{default:f(()=>[i("a",null,x(l(o)("edit")),1)]),_:1})):ne("",!0),d.showMenu.includes("del")?(F(),ee(_,{key:1,onClick:r},{default:f(()=>[i("a",Pi,x(l(o)("delete")),1)]),_:1})):ne("",!0)]),_:1})]),default:f(()=>[i("div",Bi,[c(l(xo))])]),_:1})):ne("",!0)])}}},Ve=se(Ti,[["__scopeId","data-v-b64fe0f8"]]),Mi={class:"form-content-box"},Ui={class:"left-box"},Ni={class:"form-body"},Li={class:"model-title"},qi={class:"footer-box"},Di={__name:"add-unverified-alert",emits:["ok"],setup(d,{expose:t,emit:s}){const e=s,{robotInfo:o,getRobot:a}=ve("robotInfo"),{t:n}=ie("views.robot.robot-config.external-service.components.add-unverified-alert"),r=K(!1),p=K(),m=n("default_prompt"),v=n("default_reply_text"),h=n("default_continue_text"),_=de({id:o.id,wechat_not_verify_hand_get_reply:m,wechat_not_verify_hand_get_word:v,wechat_not_verify_hand_get_next:h}),b=()=>{_.wechat_not_verify_hand_get_reply=_.wechat_not_verify_hand_get_reply||m,_.wechat_not_verify_hand_get_word=_.wechat_not_verify_hand_get_word||v,_.wechat_not_verify_hand_get_next=_.wechat_not_verify_hand_get_next||h,p.value.clearValidate()},T={wechat_not_verify_hand_get_reply:[{required:!0,message:n("error_prompt"),trigger:"change"}],wechat_not_verify_hand_get_word:[{required:!0,message:n("error_reply_text"),trigger:"change"}],wechat_not_verify_hand_get_next:[{required:!0,message:n("error_continue_text"),trigger:"change"}]},P=()=>{let H={...me(_)};Mo(H).then(N=>{oe.success(n("save_success")),$(),a(o.id),e("ok")})},j=()=>{p.value.validate().then(()=>{P()}).catch(H=>{})},$=()=>{p.value.clearValidate(),p.value.resetFields(),r.value=!1};return t({open:()=>{_.wechat_not_verify_hand_get_reply=o.wechat_not_verify_hand_get_reply||m,_.wechat_not_verify_hand_get_word=o.wechat_not_verify_hand_get_word||v,_.wechat_not_verify_hand_get_next=o.wechat_not_verify_hand_get_next||h,r.value=!0}}),(H,N)=>{const I=we,k=qt,U=Ce,z=ye,q=ge,W=_e,R=le;return F(),ee(R,{width:749,open:r.value,"onUpdate:open":N[3]||(N[3]=w=>r.value=w),title:null,wrapClassName:"remove-model-padding",footer:null},{default:f(()=>[i("div",Mi,[i("div",Ui,[i("div",Ni,[i("div",Li,x(l(n)("unverified_account_reply_settings")),1),c(I,{class:"zm-alert-info",message:l(n)("api_limit_notice"),type:"info"},null,8,["message"]),c(q,{style:{"margin-top":"24px"},ref_key:"formRef",ref:p,layout:"vertical",model:_,rules:T},{default:f(()=>[c(U,{label:l(n)("manual_reply_prompt"),name:"wechat_not_verify_hand_get_reply"},{default:f(()=>[c(k,{value:_.wechat_not_verify_hand_get_reply,"onUpdate:value":N[0]||(N[0]=w=>_.wechat_not_verify_hand_get_reply=w),placeholder:l(n)("please_input"),maxLength:100,onBlur:b,"auto-size":{minRows:3,maxRows:3}},null,8,["value","placeholder"])]),_:1},8,["label"]),c(U,{label:l(n)("manual_reply_text"),name:"wechat_not_verify_hand_get_word"},{default:f(()=>[c(z,{maxLength:100,onBlur:b,value:_.wechat_not_verify_hand_get_word,"onUpdate:value":N[1]||(N[1]=w=>_.wechat_not_verify_hand_get_word=w),placeholder:l(n)("please_input")},null,8,["value","placeholder"])]),_:1},8,["label"]),c(U,{label:l(n)("continue_reading_text"),name:"wechat_not_verify_hand_get_next"},{default:f(()=>[c(z,{maxLength:100,onBlur:b,value:_.wechat_not_verify_hand_get_next,"onUpdate:value":N[2]||(N[2]=w=>_.wechat_not_verify_hand_get_next=w),placeholder:l(n)("please_input")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),i("div",qi,[c(W,{onClick:$},{default:f(()=>[G(x(l(n)("cancel")),1)]),_:1}),c(W,{type:"primary",onClick:j},{default:f(()=>[G(x(l(n)("confirm")),1)]),_:1})])]),N[4]||(N[4]=i("div",{class:"preview-box"},[i("img",{src:"https://xkf-upload-oss.xiaokefu.com.cn/static/chat-wiki/wechat-app/guide1.png",alt:""})],-1))])]),_:1},8,["open"])}}},Oi=se(Di,[["__scopeId","data-v-a5eb6fa9"]]),Fi={class:"content-block"},Vi={class:"img-wrapper-box"},ji={class:"title"},zi={class:"img-wrapper-box"},Hi={class:"title"},Wi={__name:"demo-preview-modal",setup(d,{expose:t}){const{t:s}=ie("views.robot.robot-config.external-service.components.demo-preview-modal"),e=K(!1);return t({show:()=>{e.value=!0}}),(a,n)=>{const r=le;return F(),Q("div",null,[c(r,{open:e.value,"onUpdate:open":n[0]||(n[0]=p=>e.value=p),width:746,title:l(s)("title_unauthorized_public_account_reply"),footer:null},{default:f(()=>[i("div",Fi,[i("div",Vi,[i("div",ji,x(l(s)("title_user_consultation_reply")),1),n[1]||(n[1]=i("img",{src:"https://xkf-upload-oss.xiaokefu.com.cn/static/chat-wiki/wechat-app/guide1.png",alt:""},null,-1))]),i("div",zi,[i("div",Hi,x(l(s)("title_long_content_segmentation")),1),n[2]||(n[2]=i("img",{src:"https://xkf-upload-oss.xiaokefu.com.cn/static/chat-wiki/wechat-app/guide2.png",alt:""},null,-1))])])]),_:1},8,["open","title"])])}}},Ki=se(Wi,[["__scopeId","data-v-681a3946"]]),Gi={class:"action-box"},Ji={class:"wechat-app-list"},Yi={class:"item-body"},Qi=["src"],Xi={class:"app-info"},Zi={class:"app-name"},er={class:"app-desc"},tr={class:"ext-info-list"},nr={key:0,class:"status-block status-success"},or={key:1,class:"status-block status-warning"},ar={__name:"select-wechat-app",emits:["change"],setup(d,{expose:t,emit:s}){const{t:e}=ie("views.robot.robot-config.external-service.components.select-wechat-app"),o=s,a=Pn(),n=vo(),r=K(!1),p=K(!1),m=K(!1),v=K({}),h=K([]);be(()=>{let{role_permission:j,role_type:$}=n;return $==1||j.includes("OfficialAccountManage")});function _(j,$){v.value=j,b($),r.value=!0}function b(j){j=Array.isArray(j)?j:[],p.value=!0,Ne({app_type:"official_account",app_name:""}).then($=>{let E=$.data||[];E.forEach(H=>{H.checked=j.includes(H.app_id)}),h.value=E}).finally(()=>{p.value=!1})}function T(){m.value=!0;let j=h.value.filter(E=>E.checked),$=j.map(E=>E.app_id).toString();Dn({robot_id:v.value.id,app_id_list:$}).then(()=>{r.value=!1,o("change",j,$)}).finally(()=>{m.value=!1})}function P(){const j=a.resolve({path:"/user/official-account"});window.open(j.href,"_blank")}return t({open:_}),(j,$)=>{const E=_e,H=So,N=le;return F(),ee(N,{open:r.value,"onUpdate:open":$[0]||($[0]=I=>r.value=I),title:l(e)("title_link_official_account"),"confirm-loading":m.value,width:"626px",onOk:T},{default:f(()=>[p.value?(F(),ee(jn,{key:0,style:{margin:"10vh 0"}})):h.value.length?(F(),Q(fe,{key:1},[i("div",Gi,[c(E,{type:"primary",ghost:"",icon:We(l(jt)),onClick:P},{default:f(()=>[G(x(l(e)("btn_add_official_account")),1)]),_:1},8,["icon"])]),i("div",Ji,[(F(!0),Q(fe,null,Ae(h.value,I=>(F(),Q("div",{key:I.id,class:"wechat-app-item"},[i("div",Yi,[i("img",{class:"app-avatar",src:I.app_avatar,alt:""},null,8,Qi),i("div",Xi,[i("div",Zi,x(I.app_name),1),i("div",er,x(l(e)("label_appid"))+x(I.app_id),1)])]),i("div",tr,[I.account_is_verify=="true"?(F(),Q("div",nr,[c(l(Un)),G(" "+x(l(e)("status_verified")),1)])):(F(),Q("div",or,[c(l(Nn)),G(" "+x(l(e)("status_unverified")),1)])),c(H,{checked:I.checked,"onUpdate:checked":k=>I.checked=k},null,8,["checked","onUpdate:checked"])])]))),128))])],64)):(F(),ee(zn,{key:2,title:l(e)("title_no_bound_official_account")},{desc:f(()=>[c(E,{type:"primary",onClick:P},{default:f(()=>[G(x(l(e)("btn_bind_official_account")),1)]),_:1})]),_:1},8,["title"]))]),_:1},8,["open","title","confirm-loading"])}}},sr=se(ar,[["__scopeId","data-v-315801ca"]]),Yn="/assets/img/official_account_reply_config01-BMOrAtW5.png",Qn="/assets/img/official_account_reply_config02-DZsowVVX.png",ir={class:"reply-config-content"},rr={class:"setting-item"},lr={class:"setting-label"},cr={class:"switch-wrapper"},ur={class:"switch-text"},dr={class:"setting-item"},pr={class:"setting-label"},_r={class:"switch-wrapper"},fr={class:"switch-text"},hr={__name:"official-account-reply-config",emits:["change"],setup(d,{expose:t,emit:s}){const{t:e}=ie("views.robot.robot-config.external-service.components.official-account-reply-config"),o=s,a=K(!1),n=K(!0),r=K(!0),p=K(null),m=(h={})=>{h.aiGenerated!==void 0&&(n.value=h.aiGenerated==1),h.typingIndicator!==void 0&&(r.value=h.typingIndicator==1),p.value=h.robotId,a.value=!0},v=async(h,_)=>{try{(await On({id:p.value,key:h,val:_?1:0})).code==0&&(oe.success(e("msg_save_success")),o("change"))}catch(b){console.error("保存失败:",b),oe.error(e("msg_save_failed"))}};return t({open:m}),(h,_)=>{const b=Ye,T=Je,P=le;return F(),ee(P,{open:a.value,"onUpdate:open":_[4]||(_[4]=j=>a.value=j),title:l(e)("title_official_account_reply_settings"),width:480,footer:null},{default:f(()=>[i("div",ir,[i("div",rr,[i("div",lr,[i("span",null,x(l(e)("label_ai_generated_content")),1),c(b,null,{title:f(()=>[..._[5]||(_[5]=[i("img",{class:"tip-img",src:Yn,alt:""},null,-1)])]),default:f(()=>[c(l(xe),{class:"info-icon"})]),_:1})]),i("div",cr,[c(T,{checked:n.value,"onUpdate:checked":_[0]||(_[0]=j=>n.value=j),onChange:_[1]||(_[1]=()=>v("show_ai_msg_gzh",n.value))},null,8,["checked"]),i("span",ur,x(n.value?l(e)("status_on"):l(e)("status_off")),1)])]),i("div",dr,[i("div",pr,[i("span",null,x(l(e)("label_show_typing_indicator")),1),c(b,null,{title:f(()=>[..._[6]||(_[6]=[i("img",{class:"tip-img",src:Qn,alt:""},null,-1)])]),default:f(()=>[c(l(xe),{class:"info-icon"})]),_:1})]),i("div",_r,[c(T,{checked:r.value,"onUpdate:checked":_[2]||(_[2]=j=>r.value=j),onChange:_[3]||(_[3]=()=>v("show_typing_gzh",r.value))},null,8,["checked"]),i("span",fr,x(r.value?l(e)("status_on"):l(e)("status_off")),1)])])])]),_:1},8,["open","title"])}}},mr=se(hr,[["__scopeId","data-v-4471aaea"]]),gr={class:"add-btn-block"},vr={class:"wechat-app-list"},br={__name:"wechat-official-account",setup(d){const{t}=ie("views.robot.robot-config.external-service.components.wechat-official-account"),{robotInfo:s,getRobot:e}=ve("robotInfo"),o=K(),a=K(!0),n=K([]);Te(()=>{r()});const r=()=>{Ne({robot_id:s.id,app_type:"official_account",app_name:""}).then(E=>{n.value=E.data}).finally(()=>{a.value=!1})},p=()=>{o.value.open(s,n.value.map(E=>E.app_id))},m=E=>{zt({id:E.id}).then(()=>{oe.success(t("refresh_success")),r()})},v=E=>{le.confirm({title:t("confirm_remove",{app_name:E.app_name}),icon:c(Ue),content:t("remove_warning"),okText:t("confirm"),cancelText:t("cancel"),onOk(){let N=n.value.filter(I=>I.app_id!=E.app_id).map(I=>I.app_id).toString();Dn({robot_id:s.id,app_id_list:N}).then(()=>{r(),oe.success(t("delete_success"))})}})},h=K(null),_=()=>{h.value.open()},b=K(null),T=()=>{let E={robotId:s.id,aiGenerated:s.show_ai_msg_gzh,typingIndicator:s.show_typing_gzh};b.value.open(E)},P=()=>{e(s.id)},j=K(null),$=()=>{j.value.show()};return(E,H)=>{const N=we,I=_e;return F(),Q("div",null,[c(N,{banner:""},{message:f(()=>[G(x(l(t)("support_unverified_account"))+"，",1),i("a",{onClick:$},x(l(t)("view_demo")),1)]),_:1}),a.value?(F(),ee(jn,{key:0})):n.value.length?(F(),Q(fe,{key:1},[i("div",gr,[c(I,{onClick:p,type:"primary"},{default:f(()=>[G(x(l(t)("associate_official_account")),1)]),_:1}),c(I,{onClick:_,icon:c(l(Tt))},{default:f(()=>[G(x(l(t)("unverified_account_reply_settings")),1)]),_:1},8,["icon"]),c(I,{onClick:T,icon:c(l(Tt))},{default:f(()=>[G(x(l(t)("verified_account_reply_settings")),1)]),_:1},8,["icon"])]),i("div",vr,[(F(!0),Q(fe,null,Ae(n.value,k=>(F(),ee(Ve,{key:k.id,item:k,showMenu:["del"],app_type:"official_account",onDelete:v,onRefresh:m},null,8,["item"]))),128))])],64)):(F(),ee(zn,{key:2,style:{"margin-top":"20vh"},title:l(t)("no_official_account_associated")},{desc:f(()=>[c(I,{onClick:p,type:"primary"},{default:f(()=>[G(x(l(t)("associate_official_account")),1)]),_:1})]),_:1},8,["title"])),c(sr,{ref_key:"selectAppRef",ref:o,onChange:r},null,512),c(Oi,{ref_key:"addUnverifiedAlertRef",ref:h},null,512),c(Ki,{ref_key:"demoPreviewModalRef",ref:j},null,512),c(mr,{ref_key:"replyConfigRef",ref:b,onChange:P},null,512)])}}},yr=se(br,[["__scopeId","data-v-8e790b4b"]]),wr={class:"add-label"},kr={__name:"add-wechat-app",props:{label:{type:String,default:""}},emits:["click"],setup(d,{emit:t}){const s=t,e=d,o=()=>{s("click")};return(a,n)=>(F(),Q("div",{class:"add-wechat-app",onClick:o},[c(l(jt),{class:"add-icon"}),i("span",wr,x(e.label),1)]))}},Ze=se(kr,[["__scopeId","data-v-b80a6309"]]),Cr="/assets/img/preview_02-5R4OUtDh.png",xr="/assets/img/config_preview_02-D7tQWjG-.png",Ar={key:0,class:"add-wechat-app-alert"},$r={class:"alert-body"},Sr={class:"form-box"},Er={class:"my-ip"},Ir={class:"ip-text"},Rr={key:1,class:"add-wechat-app-alert"},Br={class:"config-preview-box"},Pr={class:"config-items"},Tr={class:"config-item"},Mr={class:"config-value"},Ur={class:"config-item"},Nr={class:"config-value"},Lr={class:"config-item"},qr={class:"config-value"},In="/upload/default/mini_program_avatar.png",Dr={__name:"add-wechat-mini-program-alert",emits:["ok"],setup(d,{expose:t,emit:s}){const{t:e}=ie("views.robot.robot-config.external-service.components.add-wechat-mini-program-alert"),o=s,{robotInfo:a}=ve("robotInfo"),n=K(!1),r=K(1),p=K(!1),m=K(),v=de({id:void 0,robot_id:a.id,app_name:"",app_id:"",app_secret:"",app_avatar:"",app_avatar_url:In,app_type:"mini_program"}),h={app_name:[{required:!0,message:e("msg_enter_official_account_name"),trigger:"change"},{trigger:"change",validator:()=>v.app_avatar_url?Promise.resolve():Promise.reject(e("msg_upload_official_account_avatar"))}],app_id:[{required:!0,message:e("msg_enter_app_id"),trigger:"change"}],app_secret:[{required:!0,message:e("msg_enter_app_secret"),trigger:"change"}]},_=be(()=>{let k=v.id?e("title_edit_wechat_mini_program"):e("title_add_wechat_mini_program"),U=r.value==1?e("title_step1"):e("title_step2");return k+U}),b=({file:k,url:U})=>{v.app_avatar=k,v.app_avatar_url=U},T=de({push_aeskey:"",push_token:"",push_url:""}),P=()=>{let k={...me(v)};delete k.app_avatar_url,Qe(k).then(U=>{Object.assign(T,U.data),r.value=2,oe.success(e("msg_save_success")),o("ok")})},j=()=>{m.value.validate().then(()=>{P()}).catch(k=>{})},$=()=>{n.value=!1},E=()=>{m.value.clearValidate(),m.value.resetFields(),n.value=!1},H=k=>{Me(k),oe.success(e("msg_copy_success"))},N=()=>{H(a.wechat_ip)};return t({open:k=>{k?(k.app_avatar_url=k.app_avatar,k.app_avatar=""):k={id:void 0,robot_id:a.id,app_name:"",app_id:"",app_secret:"",app_avatar:"",app_avatar_url:In,app_type:"mini_program",wechat_ip:a.wechat_ip},r.value=1,Object.assign(v,k),n.value=!0}}),(k,U)=>{const z=_e,q=we,W=Ce,R=ye,w=ge,V=le;return F(),ee(V,{width:"1168px",open:n.value,"onUpdate:open":U[7]||(U[7]=D=>n.value=D),title:_.value,onCancel:E},{footer:f(()=>[r.value===1?(F(),ee(z,{key:"back",onClick:E},{default:f(()=>[G(x(l(e)("btn_cancel")),1)]),_:1})):ne("",!0),r.value===1?(F(),ee(z,{key:"submit",type:"primary",loading:p.value,onClick:j},{default:f(()=>[G(x(l(e)("btn_save_and_next")),1)]),_:1},8,["loading"])):ne("",!0),r.value===2?(F(),ee(z,{key:"submit",type:"primary",loading:p.value,onClick:$},{default:f(()=>[G(x(l(e)("btn_config_completed")),1)]),_:1},8,["loading"])):ne("",!0)]),default:f(()=>[r.value===1?(F(),Q("div",Ar,[c(q,{class:"tip-alert",message:l(e)("tip_step1"),type:"info","show-icon":""},null,8,["message"]),i("div",$r,[i("div",Sr,[c(w,{ref_key:"formRef",ref:m,layout:"vertical",model:v,rules:h},{default:f(()=>[c(W,{label:l(e)("label_mini_program_avatar_name"),name:"app_name"},{default:f(()=>[c(Le,{autoUpload:!1,avatar:v.app_avatar_url,"onUpdate:avatar":U[0]||(U[0]=D=>v.app_avatar_url=D),value:v.app_name,"onUpdate:value":U[1]||(U[1]=D=>v.app_name=D),valueModifiers:{trim:!0},placeholder:l(e)("ph_enter_mini_program_name"),onChangeAvatar:b},null,8,["avatar","value","placeholder"])]),_:1},8,["label"]),c(W,{label:l(e)("label_app_id"),name:"app_id"},{default:f(()=>[c(R,{value:v.app_id,"onUpdate:value":U[2]||(U[2]=D=>v.app_id=D),valueModifiers:{trim:!0},placeholder:l(e)("ph_enter_app_id")},null,8,["value","placeholder"])]),_:1},8,["label"]),c(W,{label:l(e)("label_app_secret"),name:"app_secret"},{default:f(()=>[c(R,{value:v.app_secret,"onUpdate:value":U[3]||(U[3]=D=>v.app_secret=D),valueModifiers:{trim:!0},placeholder:l(e)("ph_enter_app_secret")},null,8,["value","placeholder"])]),_:1},8,["label"]),c(W,{label:l(e)("label_add_ip_to_whitelist"),name:"wechat_ip",required:""},{default:f(()=>[i("div",Er,[i("span",Ir,x(l(a).wechat_ip),1),i("a",{class:"copy-btn",onClick:N},x(l(e)("btn_copy")),1)])]),_:1},8,["label"])]),_:1},8,["model"])]),U[8]||(U[8]=i("div",{class:"preview-box"},[i("img",{class:"preview-img",src:Cr})],-1))])])):ne("",!0),r.value===2?(F(),Q("div",Rr,[c(q,{class:"tip-alert",message:l(e)("tip_step2"),type:"info","show-icon":""},null,8,["message"]),i("div",Br,[i("div",Pr,[i("div",Tr,[i("span",Mr,x(T.push_url),1),i("span",{class:"copy-btn",onClick:U[4]||(U[4]=D=>H(T.push_url))},x(l(e)("btn_copy")),1)]),i("div",Ur,[i("span",Nr,x(T.push_token),1),i("span",{class:"copy-btn",onClick:U[5]||(U[5]=D=>H(T.push_token))},x(l(e)("btn_copy")),1)]),i("div",Lr,[i("span",qr,x(T.push_aeskey),1),i("span",{class:"copy-btn",onClick:U[6]||(U[6]=D=>H(T.push_aeskey))},x(l(e)("btn_copy")),1)])]),U[9]||(U[9]=i("img",{class:"config-preview-img",src:xr},null,-1))])])):ne("",!0)]),_:1},8,["open","title"])}}},Or=se(Dr,[["__scopeId","data-v-512fc2f9"]]),Fr={class:"reply-config-content"},Vr={class:"setting-item"},jr={class:"setting-label"},zr={class:"switch-wrapper"},Hr={class:"switch-text"},Wr={class:"setting-item"},Kr={class:"setting-label"},Gr={class:"switch-wrapper"},Jr={class:"switch-text"},Yr={__name:"mini-program-reply-config",emits:["change"],setup(d,{expose:t,emit:s}){const{t:e}=ie("views.robot.robot-config.external-service.components.mini-program-reply-config"),o=s,a=K(!1),n=K(!0),r=K(!0),p=K(null),m=(h={})=>{h.aiGenerated!==void 0&&(n.value=h.aiGenerated==1),h.typingIndicator!==void 0&&(r.value=h.typingIndicator==1),p.value=h.robotId,a.value=!0},v=async(h,_)=>{try{(await On({id:p.value,key:h,val:_?1:0})).code==0&&(oe.success(e("msg_save_success")),o("change"))}catch(b){console.error(e("msg_save_failed"),b),oe.error(e("msg_save_failed"))}};return t({open:m}),(h,_)=>{const b=Ye,T=Je,P=le;return F(),ee(P,{open:a.value,"onUpdate:open":_[4]||(_[4]=j=>a.value=j),title:l(e)("title_mini_program_reply_settings"),width:480,footer:null},{default:f(()=>[i("div",Fr,[i("div",Vr,[i("div",jr,[i("span",null,x(l(e)("label_ai_generated_content")),1),c(b,null,{title:f(()=>[..._[5]||(_[5]=[i("img",{class:"tip-img",src:Yn,alt:""},null,-1)])]),default:f(()=>[c(l(xe),{class:"info-icon"})]),_:1})]),i("div",zr,[c(T,{checked:n.value,"onUpdate:checked":_[0]||(_[0]=j=>n.value=j),onChange:_[1]||(_[1]=()=>v("show_ai_msg_mini",n.value))},null,8,["checked"]),i("span",Hr,x(n.value?l(e)("switch_on"):l(e)("switch_off")),1)])]),i("div",Wr,[i("div",Kr,[i("span",null,x(l(e)("label_typing_indicator")),1),c(b,null,{title:f(()=>[..._[6]||(_[6]=[i("img",{class:"tip-img",src:Qn,alt:""},null,-1)])]),default:f(()=>[c(l(xe),{class:"info-icon"})]),_:1})]),i("div",Gr,[c(T,{checked:r.value,"onUpdate:checked":_[2]||(_[2]=j=>r.value=j),onChange:_[3]||(_[3]=()=>v("show_typing_mini",r.value))},null,8,["checked"]),i("span",Jr,x(r.value?l(e)("switch_on"):l(e)("switch_off")),1)])])])]),_:1},8,["open","title"])}}},Qr=se(Yr,[["__scopeId","data-v-c30cbf63"]]),Xr={class:""},Zr={class:"add-btn-block"},el={class:"wechat-app-list"},tl={__name:"wechat-mini-program",setup(d){const{t}=ie("views.robot.robot-config.external-service.components.wechat-mini-program"),{robotInfo:s,getRobot:e}=ve("robotInfo"),o=K(),a=K([]),n=()=>{Ne({robot_id:s.id,app_type:"mini_program",app_name:""}).then(P=>{a.value=P.data})},r=()=>{o.value.open()},p=P=>{let j=3;const $=le.confirm({title:t("title_confirm_remove",{app_name:P.app_name}),icon:c(Ue),content:t("msg_remove_warning"),okText:j+" "+t("btn_confirm"),okType:"danger",cancelText:t("btn_cancel"),okButtonProps:{disabled:!0},onOk(){Xe({id:P.id}).then(()=>{n(),oe.success(t("msg_delete_success"))})},onCancel(){}});let E=setInterval(()=>{j==1?($.update({okText:t("btn_confirm"),okButtonProps:{disabled:!1}}),clearInterval(E),E=void 0):(j-=1,$.update({okText:j+" "+t("btn_confirm"),okButtonProps:{disabled:!0}}))},1e3)},m=P=>{P.wechat_ip=s.wechat_ip,o.value.open({...P})},v=P=>{zt({id:P.id}).then(()=>{oe.success(t("msg_refresh_success")),n()})},h=()=>{n()},_=K(null),b=()=>{let P={robotId:s.id,aiGenerated:s.show_ai_msg_mini,typingIndicator:s.show_typing_mini};_.value.open(P)},T=()=>{e(s.id)};return Te(()=>{n()}),(P,j)=>{const $=_e;return F(),Q("div",Xr,[i("div",Zr,[c($,{onClick:b,icon:c(l(Tt))},{default:f(()=>[G(x(l(t)("btn_mini_program_reply_settings")),1)]),_:1},8,["icon"])]),i("div",el,[c(Ze,{label:l(t)("label_bind_wechat_mini_program"),onClick:r},null,8,["label"]),(F(!0),Q(fe,null,Ae(a.value,E=>(F(),ee(Ve,{key:E.id,app_type:"mini_program",item:E,onEdit:m,onDelete:p,onRefresh:v},null,8,["item"]))),128))]),c(Or,{ref_key:"addAppAlertRef",ref:o,onOk:h},null,512),c(Qr,{ref_key:"replyConfigRef",ref:_,onChange:T},null,512)])}}},nl=se(tl,[["__scopeId","data-v-17098a73"]]),ol="/assets/img/preview_03-DXz9-3qW.png",al="/assets/img/config_preview_03-DN1fPWUm.png",sl={key:0,class:"add-wechat-app-alert"},il={class:"alert-body"},rl={class:"form-box"},ll={key:1,class:"add-wechat-app-alert"},cl={class:"config-preview-box"},ul={class:"config-items"},dl={class:"config-item"},pl={class:"config-value"},_l={class:"config-item"},fl={class:"config-value"},hl={class:"config-item"},ml={class:"config-value"},Rn="/upload/default/wechat_kefu_avatar.png",gl={__name:"add-wechat-customer-service-alert",emits:["ok"],setup(d,{expose:t,emit:s}){const{t:e}=ie("views.robot.robot-config.external-service.components.add-wechat-customer-service-alert"),o=s,{robotInfo:a}=ve("robotInfo"),n=K(!1),r=K(1),p=K(!1),m=K(),v=de({id:void 0,robot_id:a.id,app_name:"",app_id:"",app_secret:"",app_avatar:"",app_avatar_url:Rn,app_type:"wechat_kefu"}),h={app_name:[{required:!0,message:e("rule_app_name"),trigger:"change"},{trigger:"change",validator:()=>v.app_avatar_url?Promise.resolve():Promise.reject(e("rule_app_avatar"))}],app_id:[{required:!0,message:e("rule_app_id"),trigger:"change"}],app_secret:[{required:!0,message:e("rule_app_secret"),trigger:"change"}]},_=be(()=>{let N=v.id?e("title_edit_wechat"):e("title_add_wechat"),I=r.value==1?e("title_step1"):e("title_step2");return N+I}),b=({file:N,url:I})=>{v.app_avatar=N,v.app_avatar_url=I},T=de({push_aeskey:"",push_token:"",push_url:""}),P=()=>{let N={...me(v)};delete N.app_avatar_url,Qe(N).then(I=>{Object.assign(T,I.data),r.value=2,oe.success(e("msg_save_success")),o("ok"),n.value=!1})},j=()=>{m.value.validate().then(()=>{P()}).catch(N=>{})},$=()=>{m.value&&(m.value.clearValidate(),m.value.resetFields()),n.value=!1},E=N=>{Me(N),oe.success(e("msg_copy_success"))};return t({open:N=>{N?(N.app_avatar_url=N.app_avatar,N.app_avatar=""):N={id:void 0,robot_id:a.id,app_name:"",app_id:"",app_secret:"",app_avatar:"",app_avatar_url:Rn,app_type:"wechat_kefu",wechat_ip:a.wechat_ip},r.value=1,Object.assign(v,N),n.value=!0}}),(N,I)=>{const k=_e,U=we,z=Ce,q=ye,W=ge,R=le;return F(),ee(R,{width:"1168px",open:n.value,"onUpdate:open":I[8]||(I[8]=w=>n.value=w),title:_.value,onCancel:$},{footer:f(()=>[c(k,{key:"back",onClick:$},{default:f(()=>[G(x(l(e)("btn_cancel")),1)]),_:1}),r.value===1?(F(),ee(k,{key:"submit",type:"primary",loading:p.value,onClick:I[0]||(I[0]=w=>r.value=2)},{default:f(()=>[G(x(l(e)("btn_save_next")),1)]),_:1},8,["loading"])):ne("",!0),r.value===2?(F(),ee(k,{key:"submit",type:"primary",loading:p.value,onClick:j},{default:f(()=>[G(x(l(e)("btn_config_complete")),1)]),_:1},8,["loading"])):ne("",!0)]),default:f(()=>[r.value===2?(F(),Q("div",sl,[c(U,{class:"tip-alert",message:l(e)("tip_config_step2"),type:"info","show-icon":""},null,8,["message"]),i("div",il,[i("div",rl,[c(W,{ref_key:"formRef",ref:m,layout:"vertical",model:v,rules:h},{default:f(()=>[c(z,{label:l(e)("label_company_info"),name:"app_name"},{default:f(()=>[c(Le,{autoUpload:!1,avatar:v.app_avatar_url,"onUpdate:avatar":I[1]||(I[1]=w=>v.app_avatar_url=w),value:v.app_name,"onUpdate:value":I[2]||(I[2]=w=>v.app_name=w),valueModifiers:{trim:!0},placeholder:l(e)("placeholder_company_name"),onChangeAvatar:b},null,8,["avatar","value","placeholder"])]),_:1},8,["label"]),c(z,{label:l(e)("label_company_id"),name:"app_id"},{default:f(()=>[c(q,{value:v.app_id,"onUpdate:value":I[3]||(I[3]=w=>v.app_id=w),valueModifiers:{trim:!0},placeholder:l(e)("placeholder_app_id")},null,8,["value","placeholder"])]),_:1},8,["label"]),c(z,{label:l(e)("label_company_secret"),name:"app_secret"},{default:f(()=>[c(q,{value:v.app_secret,"onUpdate:value":I[4]||(I[4]=w=>v.app_secret=w),valueModifiers:{trim:!0},placeholder:l(e)("placeholder_app_secret")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),I[9]||(I[9]=i("div",{class:"preview-box"},[i("img",{class:"preview-img",src:ol})],-1))])])):ne("",!0),r.value===1?(F(),Q("div",ll,[c(U,{class:"tip-alert",message:l(e)("tip_config_step1"),type:"info","show-icon":""},null,8,["message"]),i("div",cl,[i("div",ul,[i("div",dl,[i("span",pl,x(l(a).push_wechat_kefu),1),i("span",{class:"copy-btn",onClick:I[5]||(I[5]=w=>E(l(a).push_wechat_kefu))},x(l(e)("btn_copy")),1)]),i("div",_l,[i("span",fl,x(l(a).push_token),1),i("span",{class:"copy-btn",onClick:I[6]||(I[6]=w=>E(l(a).push_token))},x(l(e)("btn_copy")),1)]),i("div",hl,[i("span",ml,x(l(a).push_aeskey),1),i("span",{class:"copy-btn",onClick:I[7]||(I[7]=w=>E(l(a).push_aeskey))},x(l(e)("btn_copy")),1)])]),I[10]||(I[10]=i("img",{class:"config-preview-img",src:al},null,-1))])])):ne("",!0)]),_:1},8,["open","title"])}}},vl=se(gl,[["__scopeId","data-v-da7729a6"]]),bl={class:""},yl={class:"wechat-app-list"},wl={__name:"wechat-customer-service",setup(d){const{t}=ie("views.robot.robot-config.external-service.components.wechat-customer-service"),{robotInfo:s}=ve("robotInfo"),e=K(),o=K([]),a=()=>{Ne({robot_id:s.id,app_type:"wechat_kefu",app_name:""}).then(h=>{o.value=h.data})},n=()=>{e.value.open()},r=h=>{let _=3;const b=le.confirm({title:t("title_confirm_remove",{app_name:h.app_name}),icon:c(Ue),content:t("msg_remove_warning"),okText:_+" "+t("btn_confirm"),okType:"danger",cancelText:t("btn_cancel"),okButtonProps:{disabled:!0},onOk(){Xe({id:h.id}).then(()=>{a(),oe.success(t("msg_delete_success"))})},onCancel(){}});let T=setInterval(()=>{_==1?(b.update({okText:t("btn_confirm"),okButtonProps:{disabled:!1}}),clearInterval(T),T=void 0):(_-=1,b.update({okText:_+" "+t("btn_confirm"),okButtonProps:{disabled:!0}}))},1e3)},p=h=>{h.wechat_ip=s.wechat_ip,e.value.open({...h})},m=h=>{zt({id:h.id}).then(()=>{oe.success(t("msg_refresh_success")),a()})},v=()=>{a()};return Te(()=>{a()}),(h,_)=>{const b=we;return F(),Q("div",bl,[c(b,{class:"tip-alert",message:l(t)("tip_bind_wechat"),type:"info","show-icon":""},null,8,["message"]),i("div",yl,[c(Ze,{label:l(t)("label_bind_wechat"),onClick:n},null,8,["label"]),(F(!0),Q(fe,null,Ae(o.value,T=>(F(),ee(Ve,{key:T.id,item:T,app_type:"wechat_kefu",onEdit:p,onDelete:r,onRefresh:m},null,8,["item"]))),128))]),c(vl,{ref_key:"addAppAlertRef",ref:e,onOk:v},null,512)])}}},kl=se(wl,[["__scopeId","data-v-bc74ec57"]]),Cl="/assets/img/feishu-example01-B-07FRqg.png",xl="/assets/img/feishu-example02-CpOIEbAr.png",Al="/assets/img/feishu-example03--Ub5FK6L.png",$l={key:0,class:"add-wechat-app-alert"},Sl=["innerHTML"],El={class:"alert-body"},Il={class:"form-box"},Rl={class:"preview-box"},Bl={key:1,class:"add-wechat-app-alert"},Pl={class:"config-items"},Tl={class:"config-item"},Ml={class:"config-value"},Ul="/upload/default/feishu_robot_avatar.png",Nl={__name:"add-feishu-alert",emits:["ok"],setup(d,{expose:t,emit:s}){const{t:e}=ie("views.robot.robot-config.external-service.components.add-feishu-alert"),o=s,{robotInfo:a}=ve("robotInfo"),n=K(!1),r=K(1),p=K(!1),m=K(),v={id:void 0,robot_id:a.id,app_type:"feishu_robot",app_avatar:"",app_avatar_url:Ul,app_name:"",app_id:"",app_secret:"",encrypt_key:"",verification_token:""},h=de({}),_={app_name:[{required:!0,message:e("error_enter_robot_name"),trigger:"change"},{trigger:"change",validator:()=>h.app_avatar_url?Promise.resolve():Promise.reject(e("error_upload_robot_avatar"))}],app_id:[{required:!0,message:e("error_enter_app_id"),trigger:"change"}],app_secret:[{required:!0,message:e("error_enter_api_secret"),trigger:"change"}],encrypt_key:[{required:!0,message:e("error_enter_encrypt_key"),trigger:"change"}],verification_token:[{required:!0,message:e("error_enter_verification_token"),trigger:"change"}]},b=({file:I,url:k})=>{h.app_avatar=I,h.app_avatar_url=k},T=de({push_aeskey:"",push_token:"",push_url:""}),P=()=>{let I={...me(h)};delete I.app_avatar_url,Qe(I).then(k=>{Object.assign(T,k.data),r.value=2,oe.success(e("msg_save_success")),o("ok")})},j=()=>{m.value.validate().then(()=>{P()}).catch(I=>{})},$=()=>{n.value=!1},E=()=>{m.value.clearValidate(),m.value.resetFields(),n.value=!1},H=I=>{Me(I),oe.success(e("msg_copy_success"))};return t({open:I=>{I?(I.app_avatar_url=I.app_avatar,I.app_avatar=""):I=JSON.parse(JSON.stringify(v)),r.value=1,Object.assign(h,I),n.value=!0}}),(I,k)=>{const U=_e,z=we,q=Ce,W=ye,R=ge,w=Eo,V=le;return F(),ee(V,{width:"1000px",open:n.value,"onUpdate:open":k[7]||(k[7]=D=>n.value=D),title:l(e)("title_config_feishu_robot"),onCancel:E},{footer:f(()=>[r.value===1?(F(),ee(U,{key:"back",onClick:E},{default:f(()=>[G(x(l(e)("btn_cancel")),1)]),_:1})):ne("",!0),r.value===1?(F(),ee(U,{key:"submit",type:"primary",loading:p.value,onClick:j},{default:f(()=>[G(x(l(e)("btn_save_and_next")),1)]),_:1},8,["loading"])):ne("",!0),r.value===2?(F(),ee(U,{key:"submit",type:"primary",loading:p.value,onClick:$},{default:f(()=>[G(x(l(e)("btn_complete_config")),1)]),_:1},8,["loading"])):ne("",!0)]),default:f(()=>[r.value===1?(F(),Q("div",$l,[c(z,{class:"tip-alert",type:"info","show-icon":""},{message:f(()=>[i("div",{innerHTML:l(e)("tip_feishu_config")},null,8,Sl),i("div",null,x(l(e)("tip_feishu_config_detail")),1)]),_:1}),i("div",El,[i("div",Il,[c(R,{ref_key:"formRef",ref:m,layout:"vertical",model:h,rules:_},{default:f(()=>[c(q,{label:l(e)("label_robot_avatar_name"),name:"app_name"},{default:f(()=>[c(Le,{autoUpload:!1,avatar:h.app_avatar_url,"onUpdate:avatar":k[0]||(k[0]=D=>h.app_avatar_url=D),value:h.app_name,"onUpdate:value":k[1]||(k[1]=D=>h.app_name=D),valueModifiers:{trim:!0},placeholder:l(e)("ph_enter_robot_name"),onChangeAvatar:b},null,8,["avatar","value","placeholder"])]),_:1},8,["label"]),c(q,{label:l(e)("label_app_id"),name:"app_id"},{default:f(()=>[c(W,{value:h.app_id,"onUpdate:value":k[2]||(k[2]=D=>h.app_id=D),valueModifiers:{trim:!0},placeholder:l(e)("ph_enter_app_id")},null,8,["value","placeholder"])]),_:1},8,["label"]),c(q,{label:l(e)("label_api_secret"),name:"app_secret"},{default:f(()=>[c(W,{value:h.app_secret,"onUpdate:value":k[3]||(k[3]=D=>h.app_secret=D),valueModifiers:{trim:!0},placeholder:l(e)("ph_enter_api_secret")},null,8,["value","placeholder"])]),_:1},8,["label"]),c(q,{label:l(e)("label_encrypt_key"),name:"encrypt_key"},{default:f(()=>[c(W,{value:h.encrypt_key,"onUpdate:value":k[4]||(k[4]=D=>h.encrypt_key=D),valueModifiers:{trim:!0},placeholder:l(e)("ph_enter_encrypt_key")},null,8,["value","placeholder"])]),_:1},8,["label"]),c(q,{label:l(e)("label_verification_token"),name:"verification_token"},{default:f(()=>[c(W,{value:h.verification_token,"onUpdate:value":k[5]||(k[5]=D=>h.verification_token=D),valueModifiers:{trim:!0},placeholder:l(e)("ph_enter_verification_token")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),i("div",Rl,[c(w,null,{default:f(()=>[...k[8]||(k[8]=[i("div",null,[i("img",{class:"preview-img",src:Cl})],-1),i("div",null,[i("img",{class:"preview-img",src:xl})],-1)])]),_:1})])])])):ne("",!0),r.value===2?(F(),Q("div",Bl,[c(z,{class:"tip-alert",message:l(e)("tip_copy_url"),type:"info","show-icon":""},null,8,["message"]),i("div",Pl,[i("div",Tl,[i("span",Ml,x(T.push_url),1),i("span",{class:"copy-btn",onClick:k[6]||(k[6]=D=>H(T.push_url))},x(l(e)("btn_copy")),1)])]),k[9]||(k[9]=i("div",{class:"config-preview-box"},[i("img",{class:"config-preview-img",src:Al})],-1))])):ne("",!0)]),_:1},8,["open","title"])}}},Ll=se(Nl,[["__scopeId","data-v-584f1e43"]]),ql={class:""},Dl={class:"wechat-app-list"},Ol={__name:"feishu-robot",setup(d){const{t}=ie("views.robot.robot-config.external-service.components.feishu-robot"),{robotInfo:s}=ve("robotInfo"),e=K(),o=K([]),a=()=>{Ne({robot_id:s.id,app_type:"feishu_robot",app_name:""}).then(v=>{o.value=v.data})},n=()=>{e.value.open()},r=v=>{let h=3;const _=le.confirm({title:t("title_confirm_remove",{app_name:v.app_name}),icon:c(Ue),content:t("msg_remove_warning"),okText:h+" "+t("btn_confirm"),okType:"danger",cancelText:t("btn_cancel"),okButtonProps:{disabled:!0},onOk(){Xe({id:v.id}).then(()=>{a(),oe.success(t("msg_delete_success"))})},onCancel(){}});let b=setInterval(()=>{h==1?(_.update({okText:t("btn_confirm"),okButtonProps:{disabled:!1}}),clearInterval(b),b=void 0):(h-=1,_.update({okText:h+" "+t("btn_confirm"),okButtonProps:{disabled:!0}}))},1e3)},p=v=>{v.wechat_ip=s.wechat_ip,e.value.open({...v})},m=()=>{a()};return Te(()=>{a()}),(v,h)=>{const _=we;return F(),Q("div",ql,[c(_,{class:"tip-alert",type:"info","show-icon":""},{message:f(()=>[G(x(l(t)("tip_bind_feishu_robot")),1)]),_:1}),i("div",Dl,[c(Ze,{label:l(t)("label_bind_feishu_robot"),onClick:n},null,8,["label"]),(F(!0),Q(fe,null,Ae(o.value,b=>(F(),ee(Ve,{key:b.id,item:b,onEdit:p,onDelete:r},null,8,["item"]))),128))]),c(Ll,{ref_key:"addAppAlertRef",ref:e,onOk:m},null,512)])}}},Fl=se(Ol,[["__scopeId","data-v-93e7ff34"]]),Vl="/assets/img/ding-example01-DNWGJGuL.png",jl="/assets/img/ding-example02-CveyoALn.png",zl={key:0,class:"add-wechat-app-alert"},Hl={class:"alert-body"},Wl={class:"form-box"},Kl={key:1,class:"add-wechat-app-alert"},Gl={class:"config-items"},Jl={class:"config-item"},Yl={class:"config-value"},Ql="/upload/default/dingtalk_robot_avatar.png",Xl={__name:"add-dingding-alert",emits:["ok"],setup(d,{expose:t,emit:s}){const{t:e}=ie("views.robot.robot-config.external-service.components.add-dingding-alert"),o=s,{robotInfo:a}=ve("robotInfo"),n=K(!1),r=K(1),p=K(!1),m=K(),v={id:void 0,robot_id:a.id,app_type:"dingtalk_robot",app_avatar:"",app_avatar_url:Ql,app_name:"",app_id:"",app_secret:""},h=de({}),_={app_name:[{required:!0,message:e("rule_required_robot_name"),trigger:"change"},{trigger:"change",validator:()=>h.app_avatar_url?Promise.resolve():Promise.reject(e("rule_required_avatar"))}],app_id:[{required:!0,message:e("rule_required_app_id"),trigger:"change"}],app_secret:[{required:!0,message:e("rule_required_api_secret"),trigger:"change"}]},b=({file:I,url:k})=>{h.app_avatar=I,h.app_avatar_url=k},T=de({push_aeskey:"",push_token:"",push_url:""}),P=()=>{let I={...me(h)};delete I.app_avatar_url,Qe(I).then(k=>{Object.assign(T,k.data),r.value=2,oe.success(e("msg_save_success")),o("ok")})},j=()=>{m.value.validate().then(()=>{P()}).catch(I=>{})},$=()=>{n.value=!1},E=()=>{m.value.clearValidate(),m.value.resetFields(),n.value=!1},H=I=>{Me(I),oe.success(e("msg_copy_success"))};return t({open:I=>{I?(I.app_avatar_url=I.app_avatar,I.app_avatar=""):I=JSON.parse(JSON.stringify(v)),r.value=1,Object.assign(h,I),n.value=!0}}),(I,k)=>{const U=_e,z=we,q=Ce,W=ye,R=ge,w=le;return F(),ee(w,{width:"1000px",open:n.value,"onUpdate:open":k[5]||(k[5]=V=>n.value=V),title:l(e)("title_config_dingding"),onCancel:E},{footer:f(()=>[r.value===1?(F(),ee(U,{key:"back",onClick:E},{default:f(()=>[G(x(l(e)("btn_cancel")),1)]),_:1})):ne("",!0),r.value===1?(F(),ee(U,{key:"submit",type:"primary",loading:p.value,onClick:j},{default:f(()=>[G(x(l(e)("btn_save_next")),1)]),_:1},8,["loading"])):ne("",!0),r.value===2?(F(),ee(U,{key:"submit",type:"primary",loading:p.value,onClick:$},{default:f(()=>[G(x(l(e)("btn_config_completed")),1)]),_:1},8,["loading"])):ne("",!0)]),default:f(()=>[r.value===1?(F(),Q("div",zl,[c(z,{class:"tip-alert",type:"info","show-icon":""},{message:f(()=>[...k[6]||(k[6]=[])]),_:1}),i("div",Hl,[i("div",Wl,[c(R,{ref_key:"formRef",ref:m,layout:"vertical",model:h,rules:_},{default:f(()=>[c(q,{label:l(e)("label_robot_avatar_name"),name:"app_name"},{default:f(()=>[c(Le,{autoUpload:!1,avatar:h.app_avatar_url,"onUpdate:avatar":k[0]||(k[0]=V=>h.app_avatar_url=V),value:h.app_name,"onUpdate:value":k[1]||(k[1]=V=>h.app_name=V),valueModifiers:{trim:!0},placeholder:l(e)("ph_enter_robot_name"),onChangeAvatar:b},null,8,["avatar","value","placeholder"])]),_:1},8,["label"]),c(q,{label:l(e)("label_client_id"),name:"app_id"},{default:f(()=>[c(W,{value:h.app_id,"onUpdate:value":k[2]||(k[2]=V=>h.app_id=V),valueModifiers:{trim:!0},placeholder:l(e)("ph_enter_client_id")},null,8,["value","placeholder"])]),_:1},8,["label"]),c(q,{label:l(e)("label_client_secret"),name:"app_secret"},{default:f(()=>[c(W,{value:h.app_secret,"onUpdate:value":k[3]||(k[3]=V=>h.app_secret=V),valueModifiers:{trim:!0},placeholder:l(e)("ph_enter_client_secret")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),k[7]||(k[7]=i("div",{class:"preview-box"},[i("img",{class:"preview-img",src:Vl})],-1))])])):ne("",!0),r.value===2?(F(),Q("div",Kl,[c(z,{class:"tip-alert",message:l(e)("tip_copy_http_url"),type:"info","show-icon":""},null,8,["message"]),i("div",Gl,[i("div",Jl,[i("span",Yl,x(T.push_url),1),i("span",{class:"copy-btn",onClick:k[4]||(k[4]=V=>H(T.push_url))},x(l(e)("btn_copy")),1)])]),k[8]||(k[8]=i("div",{class:"config-preview-box"},[i("img",{class:"config-preview-img",src:jl})],-1))])):ne("",!0)]),_:1},8,["open","title"])}}},Zl=se(Xl,[["__scopeId","data-v-62275121"]]),ec={class:""},tc={class:"wechat-app-list"},nc={__name:"dingding-robot",setup(d){const{t}=ie("views.robot.robot-config.external-service.components.dingding-robot"),{robotInfo:s}=ve("robotInfo"),e=K(),o=K([]),a=()=>{Ne({robot_id:s.id,app_type:"dingtalk_robot",app_name:""}).then(v=>{o.value=v.data})},n=()=>{e.value.open()},r=v=>{let h=3;const _=le.confirm({title:t("title_confirm_remove",{app_name:v.app_name}),icon:c(Ue),content:t("msg_remove_warning"),okText:h+" "+t("btn_confirm"),okType:"danger",cancelText:t("btn_cancel"),okButtonProps:{disabled:!0},onOk(){Xe({id:v.id}).then(()=>{a(),oe.success(t("msg_delete_success"))})},onCancel(){}});let b=setInterval(()=>{h==1?(_.update({okText:t("btn_confirm"),okButtonProps:{disabled:!1}}),clearInterval(b),b=void 0):(h-=1,_.update({okText:h+" "+t("btn_confirm"),okButtonProps:{disabled:!0}}))},1e3)},p=v=>{v.wechat_ip=s.wechat_ip,e.value.open({...v})},m=()=>{a()};return Te(()=>{a()}),(v,h)=>{const _=we;return F(),Q("div",ec,[c(_,{class:"tip-alert",type:"info","show-icon":""},{message:f(()=>[G(x(l(t)("tip_bind_dingding")),1)]),_:1}),i("div",tc,[c(Ze,{label:l(t)("label_bind_dingding"),onClick:n},null,8,["label"]),(F(!0),Q(fe,null,Ae(o.value,b=>(F(),ee(Ve,{key:b.id,item:b,onEdit:p,onDelete:r},null,8,["item"]))),128))]),c(Zl,{ref_key:"addAppAlertRef",ref:e,onOk:m},null,512)])}}},oc=se(nc,[["__scopeId","data-v-4ab8b22f"]]),ac={class:"external-services-page"},sc={class:"page-header"},ic={class:"page-body"},rc={class:"scroll-box"},Bn="/robot/config/external-services/activeKey",lc={__name:"index",setup(d){const t=Ge(),{robotInfo:s}=Ke(t),{getRobot:e}=t,o={WebAPP:_s,EmbedWebsite:bi,WeChatOfficialAccount:yr,WeChatMiniProgram:nl,WeChatCustomerService:kl,FeishuRobot:Fl,DingDingRobot:oc},a=K(localStorage.getItem(Bn)||"WebAPP"),n=r=>{a.value=r.id,localStorage.setItem(Bn,a.value)};return ho("robotInfo",{robotInfo:s.value,getRobot:e}),(r,p)=>(F(),Q("div",ac,[i("div",sc,[c(qo,{onChange:n,value:a.value,"onUpdate:value":p[0]||(p[0]=m=>a.value=m)},null,8,["value"])]),i("div",ic,[i("div",rc,[(F(),ee(mo(o[a.value])))])])]))}},Ec=se(lc,[["__scopeId","data-v-1a410b0d"]]);export{Ec as default};
//# sourceMappingURL=index-DInXncBq.js.map
