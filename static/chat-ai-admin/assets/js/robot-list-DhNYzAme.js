import{u as le,d as It,a6 as $e,a7 as Pe,a8 as Ge,a9 as Ce,aa as He,ab as tt,_ as it,ac as dt,ad as ut,f as Mt,ae as ot,o as Et,p as Lt,af as Nt,ag as Pt}from"../../index-DSFcP5NQ.js";import{_ as Dt}from"./cu-scroll-CpIj948h.js";import{r as h,e as H,b as d,t as n,p as e,y as o,_ as O,v as s,u as t,E as Se,a as f,F as K,l as Z,q as W,h as ke,j as Me,G as ie,Y as V,ag as rt,ah as ct,w as qt,i as _t,c as De,z as at,D as lt,am as zt}from"./vue-chunks-BdaA73Wf.js";import{i as Bt,j as pt,k as Jt,g as vt,l as st,m as Ft,n as jt,o as Gt,p as Ht,q as Kt,t as Vt}from"./index-Cg7-0swo.js";import{A as mt,a as Wt,b as Yt}from"./add-group-BYEOdPBe.js";import{_ as se}from"./emoji-mart-BBMRoEa3.js";import{m as qe,ar as Qt,as as Zt,M as Y,b as J,p as ft,u as Ke,v as Ve,F as Ee,c as ze,I as we,V as Be,N as ht,a4 as bt,ag as Le,ad as Xt,H as eo,a1 as _e,B as me,am as he,f as Te,g as Ae,i as Oe,z as yt,Y as gt,an as We,a9 as kt,at as to,au as oo,_ as ao,G as $t,ao as xe,a0 as lo,x as so,av as no,aw as io,r as uo,s as ro,q as Je,ac as co,ax as _o,O as Ne,ai as po,W as vo,e as mo,R as fo}from"./ui-antd-Dl1wwwCD.js";import{_ as ho}from"./page-alert-DLppgA58.js";import{L as bo}from"./list-tabs-Dv38O5dh.js";import{_ as Ie}from"./empty-BFmzY9bl.js";import{d as yo}from"./utils-CvB22N-W.js";import{_ as go}from"./no-permission-DtJ3NYHG.js";import{_ as ko}from"./tool-icon-IWVrYlVb.js";import{a as je,g as $o,s as wo,b as xo,d as Co}from"./thirdMcp-CLnTK-fz.js";import{s as So,S as To,P as Ao,d as wt,a as nt,g as Oo,b as Ro}from"./subs-key-dcCZfb9g.js";import{u as Uo}from"./index-B_UHbFfL.js";import"./neo4j-MWxXN7EM.js";import"./editor-cherry-CFIsbKoN.js";import"./lodash-Bm5sK6rN.js";import"./elkjs-BN8GIjVH.js";import"./other-LrIFyvU9.js";import"./pull-up.esm-DIiTC7VE.js";import"./observe-dom.esm-B25JyVKH.js";import"./index-MT9fcN3v.js";import"./robot-CIzNpArp.js";const Io={class:"form-box"},Mo={class:"tip-box"},Eo={class:"ant-upload-drag-icon"},Lo={class:"upload-text"},No={class:"upload-hint"},Po={__name:"import-csl-alert",emits:["ok"],setup(B,{expose:i,emit:w}){const{t:l}=le("views.robot.robot-list.components.import-csl-alert"),E=w,x=h(!1),u=h(!1),b=h([]),_=()=>{x.value=!0},C=()=>{x.value=!1,b.value=[]},U=()=>{if(b.value.length===0){J.error(l("msg_upload_csl"));return}u.value=!0,Bt({file:b.value[0].originFileObj}).then(y=>{u.value=!1,x.value=!1,J.success(l("msg_import_success")),b.value=[],E("ok",y.data)}).catch(()=>{u.value=!1})},c=y=>y.name.endsWith(".csl")?!1:(J.error(l("msg_only_csl_format")),ft.LIST_IGNORE),a=y=>{const{status:S}=y.file;S!=="uploading"&&(y.file,y.fileList)};return i({open:_}),(y,S)=>{const $=qe,m=Zt,T=Y;return d(),H(T,{width:"600px",open:x.value,"onUpdate:open":S[1]||(S[1]=v=>x.value=v),confirmLoading:u.value,title:t(l)("title_import_csl"),onOk:U,onCancel:C},{default:n(()=>[e("div",Io,[e("div",Mo,[o($,{type:"info"},{description:n(()=>[O(s(t(l)("tip_description")),1)]),_:1})]),o(m,{fileList:b.value,"onUpdate:fileList":S[0]||(S[0]=v=>b.value=v),name:"file",multiple:!1,maxCount:1,accept:".csl","before-upload":c,onChange:a},{default:n(()=>[e("p",Eo,[o(t(Qt),{class:"upload-icon"})]),e("p",Lo,s(t(l)("upload_text")),1),e("p",No,s(t(l)("upload_hint")),1)]),_:1},8,["fileList"])])]),_:1},8,["open","confirmLoading","title"])}}},Do=se(Po,[["__scopeId","data-v-776f5be3"]]),qo={class:"form-item"},zo={class:"form-label"},Bo={class:"form-content"},Jo={__name:"edit-group",emits:["ok"],setup(B,{expose:i,emit:w}){const{t:l}=le("views.robot.robot-list.components.edit-group"),E=h(!1),x=w,u=h("title_edit_group"),b=Se({group_id:"",robot_id:""}),_=h([]),C=a=>{b.group_id=a.group_id||"0",b.robot_id=a.id||"",c(),E.value=!0},U=()=>{if(!b.group_id)return J.error(l("msg_select_group"));Jt({...b}).then(a=>{J.success(l("msg_operation_success",{title:l(u.value)})),E.value=!1,x("ok")})},c=()=>{pt().then(a=>{_.value=a.data||[]})};return i({show:C}),(a,y)=>{const S=Ve,$=Ke,m=Y;return d(),f("div",null,[o(m,{open:E.value,"onUpdate:open":y[1]||(y[1]=T=>E.value=T),title:t(l)(u.value),onOk:U},{default:n(()=>[e("div",qo,[e("div",zo,s(t(l)("label_group_name"))+"：",1),e("div",Bo,[o($,{value:b.group_id,"onUpdate:value":y[0]||(y[0]=T=>b.group_id=T),style:{width:"100%"},placeholder:t(l)("ph_select_group")},{default:n(()=>[(d(!0),f(K,null,Z(_.value,T=>(d(),H(S,{value:T.id},{default:n(()=>[O(s(T.group_name),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value","placeholder"])])])]),_:1},8,["open","title"])])}}},Fo=se(Jo,[["__scopeId","data-v-5c6d1243"]]),jo=()=>{const B=It();return{openUrlWithToken:w=>{const l=B.getToken;if(!l){console.warn("Token is missing");return}if(!w){console.warn("URL is missing");return}const E=w.includes("?")?"&":"?",x=`${w}${E}token=${l}`;window.open(x,"_blank")}}};function Go(B={}){return $e.get({url:"/manage/getMcpServerList",params:B})}function Ho(B={}){return $e.post({headers:{"Content-Type":"multipart/form-data"},url:"/manage/saveMcpServer",data:B})}function Ko(B={}){return $e.post({url:"/manage/deleteMcpServer",data:B})}function Vo(B={}){return $e.post({url:"/manage/updateMcpServerPublishStatus",data:B})}function Wo(B={}){return $e.post({url:"/manage/saveMcpTool",data:B})}function Yo(B={}){return $e.post({url:"/manage/editMcpTool",data:B})}function Qo(B={}){return $e.post({url:"/manage/deleteMcpTool",data:B})}const Zo={class:"avatar-box"},Xo={class:"tip-info"},ea={class:"tit-box"},ta={class:"desc"},oa={__name:"mcp-store",emits:["ok"],setup(B,{expose:i,emit:w}){const{t:l}=le("views.robot.robot-list.components.mcp-store"),E=w,x=h(!1),u=h(!1),b=h(null),_={avatar:Pe,name:"",description:"",server_id:""},C=Se({});function U(y=null){Object.assign(C,y||_),b.value=null,x.value=!0}function c(y){b.value=y}function a(){var y;try{if(u.value=!0,C.name=C.name.trim(),C.description=C.description.trim(),!C.name)throw l("msg_input_mcp_plugin_name");if(!C.description)throw l("msg_input_mcp_plugin_description");let S={...C};b.value&&(S.avatar=(y=b.value)==null?void 0:y.file),Ho(S).then($=>{E("ok",C),J.success(l("msg_saved")),x.value=!1}).finally(()=>{u.value=!1})}catch(S){u.value=!1,J.error(S)}}return i({show:U}),(y,S)=>{const $=we,m=ze,T=Be,v=Ee,I=Y;return d(),H(I,{open:x.value,"onUpdate:open":S[3]||(S[3]=p=>x.value=p),title:C.server_id?t(l)("title_edit_mcp"):t(l)("title_add_mcp"),width:"472px","confirm-loading":u.value,onOk:a},{default:n(()=>[e("div",Zo,[o(mt,{value:C.avatar,"onUpdate:value":S[0]||(S[0]=p=>C.avatar=p),onChange:c},null,8,["value"]),e("div",Xo,s(t(l)("tip_avatar_replace")),1)]),o(v,{class:"form-box",labelAlign:"left"},{default:n(()=>[o(m,{label:t(l)("label_mcp_plugin_name"),required:"",colon:!1},{default:n(()=>[o($,{value:C.name,"onUpdate:value":S[1]||(S[1]=p=>C.name=p),placeholder:t(l)("ph_mcp_plugin_name"),maxlength:20},null,8,["value","placeholder"])]),_:1},8,["label"]),o(m,{label:t(l)("label_description"),colon:!1},{default:n(()=>[o(T,{value:C.description,"onUpdate:value":S[2]||(S[2]=p=>C.description=p),"auto-size":{minRows:2,maxRows:5},placeholder:t(l)("ph_description"),maxlength:20},null,8,["value","placeholder"])]),_:1},8,["label"]),C.server_id?W("",!0):(d(),f(K,{key:0},[e("div",ea,[O(s(t(l)("title_config_info"))+" ",1),e("span",ta,s(t(l)("desc_config_auto_generate")),1)]),o(m,{label:t(l)("label_plugin_url"),colon:!1},{default:n(()=>[o($,{disabled:"",placeholder:t(l)("ph_plugin_url_default")},null,8,["placeholder"])]),_:1},8,["label"]),o(m,{label:t(l)("label_auth_method"),colon:!1},{default:n(()=>[o($,{disabled:"",placeholder:t(l)("ph_auth_method_default")},null,8,["placeholder"])]),_:1},8,["label"]),o(m,{label:t(l)("label_request_header"),colon:!1},{default:n(()=>[o($,{disabled:"",placeholder:t(l)("ph_request_header_default")},null,8,["placeholder"])]),_:1},8,["label"]),o(m,{label:t(l)("label_api_key"),colon:!1},{default:n(()=>[o($,{disabled:"",placeholder:t(l)("ph_api_key_default")},null,8,["placeholder"])]),_:1},8,["label"])],64))]),_:1})]),_:1},8,["open","title","confirm-loading"])}}},aa=se(oa,[["__scopeId","data-v-f3e97d84"]]),la={class:"data-list"},sa=["onClick"],na=["src"],ia={class:"info"},da={class:"tit"},ua={class:"desc"},ra={key:1,class:"status-tag waiting"},ca={__name:"select-workflow-modal",emits:["ok"],setup(B,{expose:i,emit:w}){const{t:l}=le("views.robot.robot-list.components.select-workflow-modal"),E=w,x=h(!1),u=h([]),b=h([]);function _(c=[]){b.value=c,x.value=!0,C()}function C(){vt({application_type:1}).then(c=>{u.value=c.data||[],u.value.forEach(a=>{a.checked=b.value.includes(a.id)})})}function U(){x.value=!1,E("ok",u.value.filter(c=>c.checked).map(c=>c.id),u)}return i({show:_}),(c,a)=>{const y=qe,S=ht,$=Y;return d(),H($,{open:x.value,"onUpdate:open":a[0]||(a[0]=m=>x.value=m),title:t(l)("title_associate_workflow"),width:"669px",onOk:U},{default:n(()=>[o(y,{class:"zm-alert-info mt24",type:"info",message:t(l)("msg_workflow_identifier_hint"),"show-icon":""},null,8,["message"]),e("div",la,[(d(!0),f(K,null,Z(u.value,(m,T)=>(d(),f("div",{key:T,class:ke(["data-item",{disabled:m.has_published!=1}]),onClick:v=>m.checked=!m.checked},[e("img",{class:"avatar",src:m.robot_avatar},null,8,na),e("div",ia,[e("div",null,[e("div",da,s(m.robot_name),1),e("div",ua,s(m.robot_intro),1)]),m.has_published==1?(d(),H(S,{key:0,checked:m.checked,"onUpdate:checked":v=>m.checked=v},null,8,["checked","onUpdate:checked"])):(d(),f("span",ra,[o(t(bt)),O(" "+s(t(l)("status_unpublished")),1)]))])],10,sa))),128))])]),_:1},8,["open","title"])}}},_a=se(ca,[["__scopeId","data-v-3e474942"]]),pa={class:"_mcp-box"},va={key:0,class:"loading-box"},ma={class:"base-info-box"},fa={class:"app-info"},ha=["src"],ba={class:"info-box"},ya={class:"left-box"},ga={class:"name"},ka={key:0,class:"status-tag finished"},$a={key:1,class:"status-tag waiting"},wa={class:"desc"},xa={class:"right-box"},Ca={class:"cFB363F"},Sa={class:"app-data"},Ta={class:"data-item"},Aa={class:"title"},Oa={class:"value"},Ra={class:"tools-box"},Ua={class:"head-box"},Ia={key:0,class:"tools-list"},Ma={class:"left"},Ea={class:"tit"},La={class:"key"},Na={class:"desc"},Pa={class:"params"},Da={class:"params-box"},qa={class:"field"},za={class:"name"},Ba={class:"type"},Ja={key:0,class:"required"},Fa={class:"desc"},ja={class:"cFB363F"},Ga={key:1,class:"empty-box"},Ha={class:"title"},Ka={key:2,class:"empty-box"},Va={class:"title"},Wa={class:"mt4"},Ya={__name:"mcp-box",setup(B){const{t:i}=le("views.robot.robot-list.components.mcp-box"),w=h(null),l=h(null),E=h(!0),x=h(!1),u=h(null),b=h([]),_=h([]),C=h(!1),U=h(!1),c=h(""),a=h(null);Me(()=>{y()});function y(){E.value=!0,S()}function S(){Go().then(L=>{var z,R,r;u.value=((z=L==null?void 0:L.data)==null?void 0:z.info)||{},_.value=((R=L==null?void 0:L.data)==null?void 0:R.tool_list)||{},u.value.status_bool=((r=u.value)==null?void 0:r.publish_status)==1,_.value.forEach(q=>{q.params=Ge(q.params,[])}),m()}).finally(()=>{E.value=!1})}function $(){const L=()=>{u.value.status_bool=!u.value.status_bool},z=()=>{x.value=!0,Vo({server_id:u.value.id,publish_status:Number(u.value.status_bool)}).then(R=>{J.success(i("msg_operation_completed"))}).finally(()=>{x.value=!1}).catch(()=>{L()})};u.value.status_bool?z():Y.confirm({title:i("title_confirm_close_mcp"),content:i("msg_close_mcp_warning"),okText:i("btn_confirm"),cancelText:i("btn_cancel"),onOk:()=>z(),onCancel:()=>L()})}function m(){var L;b.value=[{title:"label_url",value:`${window.location.origin}/mcp`},{title:"label_request_method",value:"POST"},{title:"label_auth_method",value:"Service token / API key"},{title:"label_request_param_name",value:"Authorization"},{title:"label_api_key",value:`Bearer ${(L=u.value)==null?void 0:L.api_key}`}]}function T(){var z;let L=null;((z=u.value)==null?void 0:z.id)>0&&(L={avatar:u.value.avatar,name:u.value.name,description:u.value.description,server_id:u.value.id}),w.value.show(L)}function v(){Y.confirm({title:i("title_confirm_delete_mcp"),content:i("msg_delete_mcp_warning"),okText:i("btn_confirm"),cancelText:i("btn_cancel"),onOk:()=>{Ko({server_id:u.value.id}).then(()=>{J.success(i("msg_deleted")),S()})}})}function I(){l.value.show(_.value.map(L=>L.robot_id))}function p(L){a.value=L,c.value=L.name,C.value=!0}const g=L=>{L.target.value=L.target.value.replace(/[^a-zA-Z0-9_]/g,""),c.value=L.target.value};function D(){if(!c.value)return J.warning(i("msg_input_identifier_warning"));U.value=!0,Yo({tool_id:a.value.id,name:c.value}).then(L=>{a.value.name=c.value,C.value=!1,J.success(i("msg_saved"))}).finally(()=>{U.value=!1})}function j(L){Y.confirm({title:i("title_confirm_delete_tool"),okText:i("btn_confirm"),cancelText:i("btn_cancel"),onOk:()=>{Qo({tool_id:L.id}).then(()=>{J.success(i("msg_deleted")),S()})}})}function X(L){Wo({server_id:u.value.id,robot_id:L.toString()}).then(z=>{S(),J.success(i("msg_saved"))})}return(L,z)=>{const R=Le,r=eo,q=me,k=Ae,P=Te,ee=Oe,ue=yt,re=We,ne=kt,pe=we,de=Y;return d(),f("div",pa,[E.value?(d(),f("div",va,[o(R)])):u.value.id>0?(d(),f(K,{key:1},[e("div",ma,[e("div",fa,[e("img",{class:"avatar",src:u.value.avatar},null,8,ha),e("div",ba,[e("div",ya,[e("div",ga,[O(s(u.value.name)+" ",1),u.value.status_bool?(d(),f("span",ka,[o(t(Xt)),O(" "+s(t(i)("status_published")),1)])):(d(),f("span",$a,[o(t(bt)),O(" "+s(t(i)("status_unpublished")),1)]))]),e("div",wa,s(u.value.description),1)]),e("div",xa,[o(r,{checked:u.value.status_bool,"onUpdate:checked":z[0]||(z[0]=te=>u.value.status_bool=te),onChange:$,loading:x.value,"checked-children":t(i)("switch_on"),"un-checked-children":t(i)("switch_off")},null,8,["checked","loading","checked-children","un-checked-children"]),o(q,{onClick:I,type:"primary",ghost:"",icon:ie(t(_e))},{default:n(()=>[O(s(t(i)("btn_add_workflow")),1)]),_:1},8,["icon"]),o(ee,null,{overlay:n(()=>[o(P,null,{default:n(()=>[o(k,{onClick:T},{default:n(()=>[O(s(t(i)("btn_edit")),1)]),_:1}),o(k,{onClick:v},{default:n(()=>[e("span",Ca,s(t(i)("btn_delete")),1)]),_:1})]),_:1})]),default:n(()=>[o(q,{icon:ie(t(he))},null,8,["icon"])]),_:1})])])]),e("div",Sa,[(d(!0),f(K,null,Z(b.value,(te,be)=>(d(),f(K,{key:be},[e("div",Ta,[e("div",Aa,s(t(i)(te.title)),1),e("div",Oa,s(te.value),1)]),o(ue,{type:"vertical",style:{height:"24px"}})],64))),128))])]),e("div",Ra,[e("div",Ua,[o(t(gt),{class:"icon"}),O(" "+s(t(i)("label_tools_list"))+"（"+s(_.value.length||0)+"） ",1)]),_.value.length?(d(),f("div",Ia,[(d(!0),f(K,null,Z(_.value,(te,be)=>(d(),f("div",{key:be,class:"tools-item"},[e("div",Ma,[e("div",Ea,s(te.robot_name),1),e("div",La,s(t(i)("label_unique_identifier"))+"："+s(te.name),1),e("div",Na,s(te.robot_intro),1),e("div",Pa,[(d(!0),f(K,null,Z(te.params.slice(0,5),(ce,ye)=>(d(),H(re,{key:ye,bordered:!1},{default:n(()=>[O(s(ce.key),1)]),_:2},1024))),128)),o(ne,{placement:"right"},{content:n(()=>[e("div",Da,[(d(!0),f(K,null,Z(te.params,(ce,ye)=>(d(),f("div",{key:ye,class:"param-item"},[e("div",qa,[e("span",za,s(ce.key),1),e("span",Ba,s(ce.typ),1),ce.required?(d(),f("span",Ja,s(t(i)("label_required")),1)):W("",!0)]),e("div",Fa,s(ce.desc),1)]))),128))])]),default:n(()=>[e("a",null,s(t(i)("label_params")),1)]),_:2},1024)])]),o(ee,null,{overlay:n(()=>[o(P,null,{default:n(()=>[o(k,{onClick:ce=>p(te)},{default:n(()=>[O(s(t(i)("btn_edit_identifier")),1)]),_:1},8,["onClick"]),o(k,{onClick:ce=>j(te)},{default:n(()=>[e("span",ja,s(t(i)("btn_delete")),1)]),_:1},8,["onClick"])]),_:2},1024)]),default:n(()=>[o(q,{size:"small",icon:ie(t(he))},null,8,["icon"])]),_:2},1024)]))),128))])):(d(),f("div",Ga,[z[3]||(z[3]=e("img",{src:Ie},null,-1)),e("div",Ha,s(t(i)("msg_no_workflow_bound")),1),o(q,{onClick:I,class:"btn",type:"primary"},{default:n(()=>[O(s(t(i)("btn_bind_now")),1)]),_:1})]))])],64)):(d(),f("div",Ka,[z[4]||(z[4]=e("img",{src:Ie},null,-1)),e("div",Va,s(t(i)("msg_no_mcp_added")),1),o(q,{onClick:T,class:"btn",type:"primary"},{default:n(()=>[O(s(t(i)("btn_add_now")),1)]),_:1})])),o(aa,{ref_key:"mcpRef",ref:w,onOk:S},null,512),o(_a,{ref_key:"workflowRef",ref:l,onOk:X},null,512),o(de,{open:C.value,"onUpdate:open":z[2]||(z[2]=te=>C.value=te),"confirm-loading":U.value,title:t(i)("title_edit_identifier"),onOk:D},{default:n(()=>[e("div",null,s(t(i)("label_identifier")),1),e("div",Wa,[o(pe,{value:c.value,"onUpdate:value":z[1]||(z[1]=te=>c.value=te),onInput:g,placeholder:t(i)("ph_input_identifier"),maxlength:32},null,8,["value","placeholder"])])]),_:1},8,["open","confirm-loading","title"])])}}},Qa=se(Ya,[["__scopeId","data-v-8405eddf"]]),Za={key:0,class:"checking-box"},Xa={class:"cont"},el={class:"head-box"},tl={class:"base-info-box"},ol=["src"],al={class:"info-box"},ll={class:"left"},sl={class:"name zm-line1"},nl={key:0,class:"auth-tag"},il={key:1,class:"auth-tag fail"},dl={class:"right"},ul={class:"cFB363F"},rl={class:"link"},cl={class:"link"},_l={class:"body-box"},pl={key:0,class:"no-auth-box"},vl={class:"tit"},ml={class:"desc"},fl={class:"main-tit"},hl={class:"extra-box"},bl={class:"update-time"},yl={class:"tools-box"},gl={class:"info"},kl={class:"tit"},$l={class:"desc"},wl={__name:"third-mcp-detail",emits:["del","edit","auth"],setup(B,{expose:i,emit:w}){const{t:l}=le("views.robot.robot-list.components.third-mcp-detail"),E=w,x=h(!1),u=h(!1),b=h(!1),_=h({});function C($){_.value=$,x.value=!0}function U(){x.value=!1}function c($){const m=()=>{u.value=!0,Ce(!1),je({provider_id:_.value.id}).then(T=>{setTimeout(()=>{u.value=!1,_.value.has_auth=1,S(),J.success(l("msg_verify_success"))},2e3)}).catch(T=>{_.value.has_auth=0,J.warning(l("msg_auth_failed",{error:T.message})),u.value=!1}).finally(()=>{E("auth",_.value.has_auth),setTimeout(()=>{Ce(!0)},500)})};$==2?Y.confirm({title:l("title_confirm"),content:l("msg_reauth_confirm"),onOk:()=>{m()}}):m()}function a(){E("edit",_.value)}function y(){E("del",_.value)}function S($=!1){const m=()=>{$o({provider_id:_.value.id}).then(T=>{let v=(T==null?void 0:T.data)||{};v.tools=Ge(v.tools,[]),v.up_time_text=He(v.update_time),_.value=v,$&&J.success(l("msg_refresh_complete"))}).finally(()=>{b.value=!1})};if($){if(b.value)return;Y.confirm({title:l("title_confirm"),content:l("msg_refresh_confirm"),onOk:()=>{b.value=!0,Ce(!1),je({provider_id:_.value.id}).then(T=>{_.value.has_auth=1,m()}).catch(T=>{_.value.has_auth=0,J.warning(l("msg_verify_auth_failed",{error:T.message})),b.value=!1}).finally(()=>{E("auth",_.value.has_auth),Ce(!0)})}})}else m()}return i({show:C,hide:U,refresh:S}),($,m)=>{const T=Le,v=Ae,I=Te,p=Oe,g=me,D=ao;return d(),H(D,{open:x.value,"onUpdate:open":m[5]||(m[5]=j=>x.value=j),placement:"right",width:"400px",headerStyle:{display:"none"},bodyStyle:{padding:0}},{default:n(()=>[u.value?(d(),f("div",Za,[e("div",Xa,[o(T),O(" "+s(t(l)("msg_checking")),1)])])):W("",!0),e("div",el,[e("div",tl,[e("img",{class:"avatar",src:_.value.avatar},null,8,ol),e("div",al,[e("div",ll,[e("div",sl,s(_.value.name),1),e("div",null,[_.value.has_auth==1?(d(),f("div",nl,s(t(l)("label_authorized")),1)):(d(),f("div",il,s(t(l)("label_unauthorized")),1))])]),e("div",dl,[o(p,null,{overlay:n(()=>[o(I,null,{default:n(()=>[o(v,{onClick:V(a,["stop"])},{default:n(()=>[O(s(t(l)("btn_edit")),1)]),_:1}),o(v,{onClick:V(y,["stop"])},{default:n(()=>[e("span",ul,s(t(l)("btn_delete")),1)]),_:1})]),_:1})]),default:n(()=>[o(t(he),{class:"icon"})]),_:1}),o(t(to),{onClick:m[0]||(m[0]=j=>x.value=!1),class:"icon"})])])]),e("div",rl,s(_.value.description),1),e("div",cl,s(_.value.url),1),_.value.has_auth==1?(d(),H(g,{key:0,class:"auth-btn",onClick:m[1]||(m[1]=j=>c(2))},{default:n(()=>[O(s(t(l)("btn_reauthorize")),1)]),_:1})):(d(),H(g,{key:1,type:"primary",class:"auth-btn",onClick:m[2]||(m[2]=j=>c(1))},{default:n(()=>[O(s(t(l)("btn_authorize")),1)]),_:1}))]),e("div",_l,[_.value.has_auth!=1?(d(),f("div",pl,[m[6]||(m[6]=e("img",{src:go},null,-1)),e("div",vl,s(t(l)("title_need_auth")),1),e("div",ml,s(t(l)("msg_need_auth_desc")),1),e("a",{class:"link",onClick:m[3]||(m[3]=j=>c(1))},s(t(l)("btn_authorize_now")),1)])):(d(),f(K,{key:1},[e("div",fl,[e("span",null,s(t(l)("msg_available_tools",{count:_.value.tools.length})),1),e("div",hl,[e("div",bl,s(t(l)("msg_updated",{time:_.value.up_time_text})),1),e("a",{class:"refresh-btn",onClick:m[4]||(m[4]=j=>S(!0))},[o(t(oo),{spin:b.value},null,8,["spin"]),O(" "+s(t(l)("btn_refresh")),1)])])]),e("div",yl,[(d(!0),f(K,null,Z(_.value.tools,(j,X)=>(d(),f("div",{key:X,class:"tool-item"},[m[7]||(m[7]=e("img",{class:"cover",src:ko},null,-1)),e("div",gl,[e("div",kl,s(j.name),1),e("div",$l,s(j.description),1)])]))),128))])],64))])]),_:1},8,["open"])}}},xl=se(wl,[["__scopeId","data-v-baa924b8"]]),Cl={key:0,class:"checking-box"},Sl={class:"cont"},Tl={class:"avatar-box"},Al={class:"tip-info"},Ol={class:"tit-box"},Rl={key:0,class:"cFB363F"},Ul={class:"tip-info"},Il={class:"req-head-box"},Ml={class:"req-head-item"},El={class:"tit"},Ll={class:"tit"},Nl={__name:"third-mcp-store",emits:["ok"],setup(B,{expose:i,emit:w}){const{t:l}=le("views.robot.robot-list.components.third-mcp-store"),E=w,x=h(0),u=h(!1),b=h(!1),_=h(!1),C=h(null),U=h(""),c={avatar:Pe,name:"",description:"",provider_id:"",url:"",request_timeout:"30",headers:[]},a=Se({});function y(p=null){if(Object.assign(a,p||c),C.value=null,a.headers=[],p){x.value=p.id,a.provider_id=p.id;let g=JSON.parse(p.headers);for(let D in g)a.headers.push({key:D,value:g[D]})}U.value=JSON.stringify({headers:a.headers,url:a.url}),u.value=!0}function S(p){C.value=p}function $(){a.headers.push({key:"",value:""})}function m(p){a.headers.splice(p,1)}function T(){return U.value!=JSON.stringify({headers:a.headers,url:a.url})}function v(){const p=J.loading(l("msg_saving_auth"),0);b.value=!0,setTimeout(()=>{Ce(!1),je({provider_id:x.value}).then(g=>{J.success(l("msg_auth_success"))}).catch(g=>{J.warning(l("msg_auth_failed")+g.message)}).finally(()=>{p(),b.value=!1,u.value=!1,E("ok",a),setTimeout(()=>{Ce(!0)},500)})},1800)}function I(){var p;try{if(_.value=!0,a.name=a.name.trim(),a.description=a.description.trim(),!a.name)throw l("err_plugin_name_required");if(!a.description)throw l("err_plugin_desc_required");if(!a.url)throw l("err_url_required");if(!a.request_timeout)throw l("err_timeout_required");let g={...a};C.value&&(g.avatar=(p=C.value)==null?void 0:p.file),g.headers={};for(let D of a.headers)D.key=D.key.trim(),D.value=D.value.trim(),D.key&&D.value&&(g.headers[D.key]=D.value);g.headers=JSON.stringify(g.headers),delete g.toools,wo(g).then(D=>{let{provider_id:j}=(D==null?void 0:D.data)||{};x.value=j,T()?v():(E("ok",a),J.success(l("msg_saved")),u.value=!1)}).finally(()=>{_.value=!1})}catch(g){_.value=!1,J.error(g)}}return i({show:y}),(p,g)=>{const D=Le,j=we,X=ze,L=Be,z=$t,R=me,r=Ee,q=Y;return d(),H(q,{open:u.value,"onUpdate:open":g[5]||(g[5]=k=>u.value=k),zIndex:1002,title:a.provider_id?t(l)("title_edit_mcp"):t(l)("title_add_mcp"),width:"472px","confirm-loading":_.value,onOk:I},{default:n(()=>[b.value?(d(),f("div",Cl,[e("div",Sl,[o(D),O(" "+s(t(l)("msg_checking")),1)])])):W("",!0),e("div",Tl,[o(mt,{value:a.avatar,"onUpdate:value":g[0]||(g[0]=k=>a.avatar=k),onChange:S},null,8,["value"]),e("div",Al,s(t(l)("tip_avatar")),1)]),o(r,{class:"form-box",labelAlign:"left"},{default:n(()=>[o(X,{label:t(l)("label_mcp_plugin_name"),required:"",colon:!1},{default:n(()=>[o(j,{value:a.name,"onUpdate:value":g[1]||(g[1]=k=>a.name=k),placeholder:t(l)("ph_mcp_plugin_name"),maxlength:20},null,8,["value","placeholder"])]),_:1},8,["label"]),o(X,{label:t(l)("label_description"),colon:!1},{default:n(()=>[o(L,{value:a.description,"onUpdate:value":g[2]||(g[2]=k=>a.description=k),"auto-size":{minRows:2,maxRows:5},placeholder:t(l)("ph_description"),maxlength:120},null,8,["value","placeholder"])]),_:1},8,["label"]),e("div",Ol,s(t(l)("title_config_info")),1),o(X,{label:t(l)("label_plugin_url"),colon:!1},{default:n(()=>[o(j,{value:a.url,"onUpdate:value":g[3]||(g[3]=k=>a.url=k),placeholder:t(l)("ph_plugin_url")},null,8,["value","placeholder"]),a.provider_id?(d(),f("div",Rl,s(t(l)("msg_url_warning")),1)):W("",!0)]),_:1},8,["label"]),o(X,{label:t(l)("label_timeout"),colon:!1},{default:n(()=>[o(z,{value:a.request_timeout,"onUpdate:value":g[4]||(g[4]=k=>a.request_timeout=k),precision:0,style:{width:"100%"},placeholder:t(l)("ph_timeout")},null,8,["value","placeholder"])]),_:1},8,["label"]),o(X,{label:t(l)("label_headers"),colon:!1},{default:n(()=>[e("div",Ul,s(t(l)("tip_headers")),1),e("div",Il,[e("div",Ml,[e("div",El,s(t(l)("label_header_name")),1),e("div",Ll,s(t(l)("label_header_value")),1)]),(d(!0),f(K,null,Z(a.headers,(k,P)=>(d(),f("div",{key:P,class:"req-head-item"},[o(j,{value:k.key,"onUpdate:value":ee=>k.key=ee,placeholder:t(l)("ph_input")},null,8,["value","onUpdate:value","placeholder"]),o(j,{value:k.value,"onUpdate:value":ee=>k.value=ee,placeholder:t(l)("ph_input")},null,8,["value","onUpdate:value","placeholder"]),o(t(xe),{onClick:ee=>m(P)},null,8,["onClick"])]))),128)),o(R,{class:"add-btn",type:"dashed",icon:ie(t(_e)),onClick:$},{default:n(()=>[O(s(t(l)("btn_add_header")),1)]),_:1},8,["icon"])])]),_:1},8,["label"])]),_:1})]),_:1},8,["open","title","confirm-loading"])}}},xt=se(Nl,[["__scopeId","data-v-1d3c201a"]]),Pl={class:"_mcp-box"},Dl={key:0,class:"loading-box"},ql={key:1,class:"list-box"},zl=["onClick"],Bl={class:"base-info-box"},Jl=["src"],Fl={class:"info-box"},jl={class:"name zm-line1"},Gl={key:0,class:"auth-tag"},Hl={key:1,class:"auth-tag fail"},Kl={class:"zm-line1"},Vl={class:"bottom"},Wl={class:"extra-box"},Yl={class:"extra-item"},Ql={class:"extra-item"},Zl={class:"cFB363F"},Xl={key:2,class:"empty-box"},es={class:"title"},ts={class:"desc-box"},os={__name:"third-mcp-box",emits:["listLoaded"],setup(B,{expose:i,emit:w}){const{t:l}=le("views.robot.robot-list.components.third-mcp-box"),E=rt(),x=h(null),u=h(null),b=h(!0),_=h([]),C=w;Me(()=>{U()});function U(){b.value=!0,a()}function c(){a(),x.value&&x.value.refresh()}function a(){xo().then(v=>{let I=(v==null?void 0:v.data)||[];I.forEach(p=>{p.tools=Ge(p.tools,[]),p.up_time_text=He(p.update_time)}),_.value=I,C("listLoaded",_.value.length)}).finally(()=>{b.value=!1})}function y(v){x.value.show(v)}function S(){u.value.show()}function $(v){u.value.show(v)}function m(){const v=E.resolve({path:"/mcp/index"}).href;window.open(v,"_blank")}function T(v){Y.confirm({title:l("modal_confirm_delete_title"),content:l("modal_confirm_delete_content"),okText:l("btn_confirm"),cancelText:l("btn_cancel"),onOk:()=>{Co({provider_id:v.id}).then(()=>{J.success(l("msg_deleted")),a(),x.value&&x.value.hide()})}})}return i({update:c}),(v,I)=>{const p=Le,g=me,D=Ae,j=Te,X=Oe;return d(),f("div",Pl,[b.value?(d(),f("div",Dl,[o(p)])):_.value.length?(d(),f("div",ql,[(d(!0),f(K,null,Z(_.value,(L,z)=>(d(),f("div",{onClick:R=>y(L),key:z,class:"app-item"},[e("div",Bl,[e("img",{class:"avatar",src:L.avatar},null,8,Jl),e("div",Fl,[e("div",jl,s(L.name),1),e("div",null,[L.has_auth==1?(d(),f("div",Gl,s(t(l)("tag_authorized")),1)):(d(),f("div",Hl,s(t(l)("tag_unauthorized")),1))])])]),e("div",Kl,s(L.url),1),e("div",Vl,[e("div",Wl,[e("div",Yl,s(t(l)("label_available_tools"))+s(L.tools.length),1),e("div",Ql,s(L.up_time_text)+" "+s(t(l)("label_updated")),1)]),o(X,null,{overlay:n(()=>[o(j,null,{default:n(()=>[o(D,{onClick:V(R=>$(L),["stop"])},{default:n(()=>[O(s(t(l)("btn_edit")),1)]),_:1},8,["onClick"]),o(D,{onClick:V(R=>T(L),["stop"])},{default:n(()=>[e("span",Zl,s(t(l)("btn_delete")),1)]),_:1},8,["onClick"])]),_:2},1024)]),default:n(()=>[o(g,{onClick:I[0]||(I[0]=V(()=>{},["stop"])),size:"small",icon:ie(t(he))},null,8,["icon"])]),_:2},1024)])],8,zl))),128))])):(d(),f("div",Xl,[I[1]||(I[1]=e("img",{src:Ie},null,-1)),e("div",es,s(t(l)("title_no_mcp_added")),1),e("div",ts,[e("div",{class:"link",onClick:m},s(t(l)("link_more_mcp")),1)]),o(g,{onClick:S,class:"btn",type:"primary"},{default:n(()=>[O(s(t(l)("btn_add_now")),1)]),_:1})])),o(xl,{ref_key:"mcpDetailRef",ref:x,onDel:T,onEdit:$,onAuth:a},null,512),o(xt,{ref_key:"mcpStoreRef",ref:u,onOk:c},null,512)])}}},as=se(os,[["__scopeId","data-v-fb9990e8"]]),ls={class:"_mcp_container"},ss={class:"tabs-box"},ns={__name:"mcp-panel",emits:["thirdMcpListEmpty"],setup(B,{expose:i,emit:w}){const{t:l}=le("views.robot.robot-list.components.mcp-panel"),E=ct(),x=h(null),u=h(Number(localStorage.getItem("zm:chatwiki:mcp:active")||1)),b=w;Me(()=>{E.query.mcp>0&&_(Number(E.query.mcp))});function _(c){u.value=c,localStorage.setItem("zm:chatwiki:mcp:active",c)}function C(){u.value==2&&x.value.update()}function U(c){b("thirdMcpListEmpty",c===0)}return i({update:C}),(c,a)=>(d(),f("div",ls,[e("div",ss,[e("div",{class:ke(["tab-item",{active:u.value==1}]),onClick:a[0]||(a[0]=y=>_(1))},s(t(l)("tab_workflow_mcp")),3),e("div",{class:ke(["tab-item",{active:u.value==2}]),onClick:a[1]||(a[1]=y=>_(2))},s(t(l)("tab_external_mcp")),3)]),u.value==1?(d(),H(Qa,{key:0,ref_key:"mcpRef",ref:x},null,512)):(d(),H(as,{key:1,ref_key:"mcpRef",ref:x,onListLoaded:U},null,512))]))}},is=se(ns,[["__scopeId","data-v-b52b643d"]]),ds={class:"avatar-uploader"},us=["src"],rs={class:"ant-upload-text"},cs=["src"],_s={__name:"http-tool-avatar-input",props:{value:{type:String,default:""}},emits:["update:value"],setup(B,{emit:i}){const{t:w}=le("views.robot.robot-list.components.http-tool-avatar-input"),l=i,E=B,x=h([]),u=h(!1),b=h("");qt(()=>E.value,m=>{b.value=m||""},{immediate:!0});const _=Ee.useInjectFormItemContext(),C=m=>{b.value=m,l("update:value",b.value),_.onFieldChange()},U=m=>m.type==="image/jpeg"||m.type==="image/png"?m.size/1024<1024*2?(x.value=[m],u.value=!0,Uo({file:m,category:"http_tool_avatar"}).then(I=>{var g;const p=((g=I==null?void 0:I.data)==null?void 0:g.link)||"";if(!p){J.error(w("msg_upload_failed")),u.value=!1;return}u.value=!1,C(p)}).catch(()=>{u.value=!1,J.error(w("msg_upload_failed"))}),!1):(J.error(w("msg_image_size_limit")),!1):(J.error(w("msg_only_jpg_png")),!1),c=h(!1),a=h(""),y=h(""),S=()=>{c.value=!1,y.value=""},$=async m=>{a.value=m.url||b.value,c.value=!0,y.value=m.name||(a.value?a.value.substring(a.value.lastIndexOf("/")+1):"")};return(m,T)=>{const v=ft,I=Y;return d(),f("div",ds,[b.value?(d(),f("img",{key:0,class:"avatar",src:b.value,alt:"avatar"},null,8,us)):W("",!0),o(v,{"file-list":x.value,"onUpdate:fileList":T[0]||(T[0]=p=>x.value=p),"list-type":"picture-card","show-upload-list":!1,"before-upload":U,accept:".jpg,.png,.jpeg",onPreview:$},{default:n(()=>[e("div",null,[u.value?(d(),H(t(lo),{key:0})):(d(),H(t(_e),{key:1})),e("div",rs,s(t(w)("label_upload_photo")),1)])]),_:1},8,["file-list"]),o(I,{open:c.value,title:y.value,footer:null,onCancel:S},{default:n(()=>[e("img",{alt:"example",style:{width:"100%"},src:a.value},null,8,cs)]),_:1},8,["open","title"])])}}},ps=se(_s,[["__scopeId","data-v-17ea49dc"]]),vs={class:"form-item-tip"},ms={__name:"http-tool-store",emits:["ok"],setup(B,{expose:i,emit:w}){const{t:l}=le("views.robot.robot-list.components.http-tool-store"),E=w,x=h(!1),u=h(!1),b={id:"",avatar:"/upload/default/http-node.png",name:"",description:""},_=Se({});function C(c=null){const a=JSON.parse(JSON.stringify(b)),y=c||{};a.id=y.id||"",a.name=y.name||"",a.description=y.description||"",y.avatar&&(a.avatar=y.avatar),Object.assign(_,a),x.value=!0}function U(){try{if(u.value=!0,_.name=String(_.name||"").trim(),_.description=String(_.description||"").trim(),!_.name)throw l("msg_input_name");let c={..._};const a=String(_.avatar||"");a&&(c.avatar=a),So(c).then(()=>{E("ok",_),J.success(l("msg_saved")),x.value=!1}).finally(()=>{u.value=!1})}catch(c){u.value=!1,J.error(c)}}return i({show:C}),(c,a)=>{const y=ze,S=Ee,$=we,m=Be,T=Y;return d(),H(T,{open:x.value,"onUpdate:open":a[3]||(a[3]=v=>x.value=v),title:_.id?t(l)("title_edit_http_tool"):t(l)("title_add_http_tool"),width:"472px","confirm-loading":u.value,onOk:U},{default:n(()=>[o(S,{class:"form-box",labelAlign:"left"},{default:n(()=>[o(y,{label:t(l)("label_tool_cover"),colon:!1},{default:n(()=>[o(ps,{value:_.avatar,"onUpdate:value":a[0]||(a[0]=v=>_.avatar=v)},null,8,["value"]),e("div",vs,s(t(l)("tip_cover_size")),1)]),_:1},8,["label"])]),_:1}),o(S,{class:"form-box",labelAlign:"left"},{default:n(()=>[o(y,{label:t(l)("label_name"),required:"",colon:!1},{default:n(()=>[o($,{value:_.name,"onUpdate:value":a[1]||(a[1]=v=>_.name=v),placeholder:t(l)("ph_input_name"),maxlength:20},null,8,["value","placeholder"])]),_:1},8,["label"]),o(y,{label:t(l)("label_description"),colon:!1},{default:n(()=>[o(m,{value:_.description,"onUpdate:value":a[2]||(a[2]=v=>_.description=v),"auto-size":{minRows:2,maxRows:5},placeholder:t(l)("ph_input_desc"),maxlength:60},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1},8,["open","title","confirm-loading"])}}},fs=se(ms,[["__scopeId","data-v-cf4fc7a4"]]),hs={class:"mt24"},bs={class:"add-btn-block"},ys={class:"list-box"},gs={__name:"add-authentication-modal",emits:["ok"],setup(B,{expose:i,emit:w}){const{t:l}=le("views.robot.robot-list.components.add-authentication-modal"),E=h(!1),x=h([]),u=h([]),b=w,_=[{title:"Key",dataIndex:"auth_key"},{title:"Value",dataIndex:"auth_value"},{title:"Add To",dataIndex:"auth_value_addto"},{title:l("label_remark"),dataIndex:"auth_remark"},{title:l("label_action"),dataIndex:"action",width:80}],C=Se({selectedRowKeys:[]}),U=v=>{C.selectedRowKeys=v},c=(v=[])=>{E.value=!0,x.value=Array.isArray(v)?v:[],C.selectedRowKeys=[],S()},a=()=>{if(u.value.length>=100)return J.error(l("msg_max_limit"));u.value.push({auth_key:"",auth_value:"",auth_value_addto:"HEADERS",auth_remark:"",uni_key:tt(16)})},y=v=>{u.value=u.value.filter(I=>I.uni_key!==v.uni_key)},S=()=>{Ft().then(v=>{let I=v.data||[];u.value=I.map(g=>({...g,uni_key:tt(16)}));const p=new Set(x.value.map(g=>`${String(g.key)}::${String(g.add_to||g.addTo||g.auth_value_addto||"")}`));C.selectedRowKeys=u.value.filter(g=>p.has(`${String(g.auth_key)}::${String(g.auth_value_addto)}`)).map(g=>g.uni_key)})};function $(){let v=[],I=[];return u.value.forEach((p,g)=>{I.push({auth_key:p.auth_key,auth_value:p.auth_value,auth_value_addto:p.auth_value_addto,auth_remark:p.auth_remark}),(p.auth_key==""||p.auth_value=="")&&v.push(g+1)}),v.length>0?(J.error(l("msg_fill_row",{val:v.join(",")})),!1):I.length==0?(J.error(l("msg_add_parameter")),!1):I}const m=()=>{let v=$();if(v==!1)return;let I=[];C.selectedRowKeys.forEach(p=>{I.push(u.value.find(g=>g.uni_key==p))}),b("ok",I),st({http_auth_config_list:JSON.stringify(v)}).then(()=>{J.success(l("msg_save_success"))}).finally(()=>{C.selectedRowKeys=[],E.value=!1})},T=()=>{let v=$();v!=!1&&st({http_auth_config_list:JSON.stringify(v)}).then(()=>{J.success(l("msg_save_success"))})};return i({show:c}),(v,I)=>{const p=qe,g=me,D=we,j=Ve,X=Ke,L=no,z=so,R=Y;return d(),f("div",null,[o(R,{open:E.value,"onUpdate:open":I[1]||(I[1]=r=>E.value=r),title:t(l)("title_auth_parameters"),width:700},{footer:n(()=>[o(g,{onClick:I[0]||(I[0]=r=>E.value=!1)},{default:n(()=>[O(s(t(l)("btn_cancel")),1)]),_:1}),o(g,{onClick:T},{default:n(()=>[O(s(t(l)("btn_save_only")),1)]),_:1}),o(g,{type:"primary",onClick:m},{default:n(()=>[O(s(t(l)("btn_save_and_add")),1)]),_:1})]),default:n(()=>[e("div",hs,[o(p,{class:"zm-alert-info",message:t(l)("msg_auth_info"),type:"info"},null,8,["message"])]),e("div",bs,[o(g,{type:"primary",icon:ie(t(_e)),ghost:"",onClick:a},{default:n(()=>[O(s(t(l)("btn_add_parameter")),1)]),_:1},8,["icon"])]),e("div",ys,[o(z,{"row-selection":{selectedRowKeys:C.selectedRowKeys,onChange:U},columns:_,pagination:!1,"data-source":u.value,"row-key":"uni_key",scroll:{y:550}},{bodyCell:n(({column:r,record:q})=>[r.dataIndex==="auth_key"?(d(),H(D,{key:0,value:q.auth_key,"onUpdate:value":k=>q.auth_key=k,placeholder:t(l)("ph_input")},null,8,["value","onUpdate:value","placeholder"])):W("",!0),r.dataIndex==="auth_value"?(d(),H(D,{key:1,value:q.auth_value,"onUpdate:value":k=>q.auth_value=k,placeholder:t(l)("ph_input")},null,8,["value","onUpdate:value","placeholder"])):W("",!0),r.dataIndex==="auth_value_addto"?(d(),H(X,{key:2,value:q.auth_value_addto,"onUpdate:value":k=>q.auth_value_addto=k,style:{width:"100%"}},{default:n(()=>[o(j,{value:"HEADERS"},{default:n(()=>[...I[2]||(I[2]=[O("HEADERS",-1)])]),_:1}),o(j,{value:"PARAMS"},{default:n(()=>[...I[3]||(I[3]=[O("PARAMS",-1)])]),_:1}),o(j,{value:"BODY"},{default:n(()=>[...I[4]||(I[4]=[O("BODY",-1)])]),_:1})]),_:1},8,["value","onUpdate:value"])):W("",!0),r.dataIndex==="auth_remark"?(d(),H(D,{key:3,maxLength:10,value:q.auth_remark,"onUpdate:value":k=>q.auth_remark=k,placeholder:t(l)("ph_input")},null,8,["value","onUpdate:value","placeholder"])):W("",!0),r.dataIndex==="action"?(d(),H(L,{key:4,title:t(l)("msg_confirm_delete"),"ok-text":t(l)("btn_confirm"),"cancel-text":t(l)("btn_cancel"),onConfirm:k=>y(q)},{default:n(()=>[e("a",null,s(t(l)("btn_delete")),1)]),_:1},8,["title","ok-text","cancel-text","onConfirm"])):W("",!0)]),_:1},8,["row-selection","data-source"])])]),_:1},8,["open","title"])])}}},ks=se(gs,[["__scopeId","data-v-11f04d72"]]),$s={class:"gray-block",style:{background:"#FFF"}},ws={class:"gray-block-title-left",style:{"margin-bottom":"16px"}},xs={class:"form-tips"},Cs={class:"form-tips"},Ss={class:"form-tips"},Ts={class:"gray-block"},As={class:"gray-block-title"},Os={class:"gray-block-title-left"},Rs={class:"flex-block-item"},Us={class:"array-form-box"},Is={class:"form-item-label"},Ms={class:"flex-block-item"},Es=["onClick"],Ls={class:"array-form-box"},Ns={class:"form-item-label"},Ps={class:"flex-block-item"},Ds=["onClick"],qs={key:0,class:"array-form-box mt12"},zs={key:0},Bs={class:"flex-block-item"},Js=["onClick"],Fs={class:"array-form-box timeout-form-item"},js={class:"gray-block"},Gs={class:"gray-block-title"},Hs={class:"gray-block-title-left"},Ks={class:"output-box"},Vs={class:"flex-block-item",style:{gap:"12px"}},Ws=["onClick"],Ys={class:"gray-block"},Qs={class:"gray-block-title"},Zs={class:"gray-block-title-left"},Xs={class:"output-box"},en={class:"output-block"},tn={class:"output-item",style:{width:"33%"}},on={class:"output-item",style:{width:"33%"}},an={class:"array-form-box"},ln={class:"flex-block-item",style:{gap:"12px"}},sn=["onClick"],nn=["onClick"],dn={key:0,class:"sub-field-box"},un={__name:"add-http-tool-modal",props:{toolId:{type:Number,default:0}},emits:["ok"],setup(B,{expose:i,emit:w}){const{t:l}=le("views.robot.robot-list.components.add-http-tool-modal"),E=w,x=B,u=h(!1),b=h(!1),_=h(null),C=h(null),U=h(null),c=h(null),a=Se({title:"",description:"",node_name_en:"",method:"GET",url:"",auth:[],headers:[],params:[],body_type:0,body:[],body_raw:"",output:[{key:"",typ:"string",subs:[]}],timeout:30}),y=h(0),S=[{lable:"string",value:"string"},{lable:"number",value:"number"},{lable:"boole",value:"boole"},{lable:"float",value:"float"},{lable:"object",value:"object"},{lable:"array<string>",value:"array<string>"},{lable:"array<number>",value:"array<number>"},{lable:"array<boole>",value:"array<boole>"},{lable:"array<float>",value:"array<float>"},{lable:"array<object>",value:"array<object>"}],$={node_name_en:[{required:!0,message:l("msg_input_name")},{validator:(R,r)=>/^[a-zA-Z0-9_.-]+$/.test(r)?Promise.resolve():Promise.reject(l("msg_name_format"))}],title:[{required:!0,message:l("msg_input_remark")}],description:[{required:!0,message:l("msg_input_desc")}]},m={auth:[{validator:(R,r)=>{const q=Array.isArray(r)?r:[];return q.length?q.every(P=>String(P.key||"").trim().length>0)?Promise.resolve():Promise.reject(l("msg_fill_auth_key")):Promise.reject(l("msg_add_auth_param"))}}]};function T(R=null){var r,q;if(R&&R.id)if(y.value=R.id,(r=R.node_params)!=null&&r.curl||R.data_raw){const k=R.http_tool_info||{};a.node_name_en=k.http_tool_node_name_en||R.node_name_en||"",a.title=k.http_tool_node_name||R.node_name||"",a.description=R.node_description||k.http_tool_node_description||"";let P=(q=R.node_params)==null?void 0:q.curl;if(!P&&R.data_raw)try{P=JSON.parse(R.data_raw||"{}").curl||{}}catch{P={}}a.method=P.method||"GET",a.url=String(P.rawurl||"").replace(/[`"]/g,"").trim(),a.headers=Array.isArray(P.headers)?JSON.parse(JSON.stringify(P.headers)):[],a.params=Array.isArray(P.params)?JSON.parse(JSON.stringify(P.params)):[],a.body_type=P.type??0,a.body=Array.isArray(P.body)?JSON.parse(JSON.stringify(P.body)):[],a.body_raw=P.body_raw||"",a.output=Array.isArray(P.output)?JSON.parse(JSON.stringify(P.output)):[{key:"",typ:"string",subs:[]}];const ee=P.http_auth||[];a.auth=Array.isArray(ee)?ee.map(ue=>({key:ue.key,value:ue.value,add_to:ue.add_to||"HEADERS"})):[],a.timeout=Number(P.timeout??30)}else{a.node_name_en=R.node_name_en||"",a.title=R.robot_name||R.name||"",a.description=R.robot_intro||"";const k=R.raw||{};a.method=k.method||"GET",a.url=k.url||"",a.headers=Array.isArray(k.headers)?JSON.parse(JSON.stringify(k.headers)):[],a.params=Array.isArray(k.params)?JSON.parse(JSON.stringify(k.params)):[],a.body_type=k.body_type??0,a.body=Array.isArray(k.body)?JSON.parse(JSON.stringify(k.body)):[],a.body_raw=k.body_raw||"",a.output=Array.isArray(k.output)?JSON.parse(JSON.stringify(k.output)):[{key:"",typ:"string",subs:[]}],a.timeout=30}else y.value=0,Object.assign(a,{node_name_en:"",title:"",description:"",method:"GET",url:"",headers:[],params:[],body_type:0,body:[],body_raw:"",output:[{key:"",typ:"string",subs:[]}],timeout:30});u.value=!0}function v(R){const r=k=>typeof k=="string"?k:JSON.stringify(k);let q=!1;if(a.method=R.method||a.method,a.url=R.url||a.url,R.header&&typeof R.header=="object"){const k=Object.keys(R.header).map(P=>{const ee=R.header[P];return String(P).toLowerCase()==="content-type"&&String(ee).toLowerCase().includes("application/json")&&(q=!0),{key:P,value:r(ee)}}).filter(P=>String(P.key).toLowerCase()!=="content-type");a.headers=k}if(R.params&&typeof R.params=="object"){const k=Object.keys(R.params).map(P=>({key:P,value:r(R.params[P])}));a.params=k}if(R.data&&typeof R.data=="object"){const k=Object.keys(R.data).map(P=>({key:P,value:r(R.data[P])}));a.body=k,a.body_raw=JSON.stringify(R.data)}else a.body=[],a.body_raw="";["POST","PUT","PATCH"].includes(a.method)?a.body_type=q?2:1:a.body_type=0,_.value&&_.value.hide()}function I(){_.value&&_.value.show()}function p(){C.value&&C.value.show(a.auth)}function g(R){const r=(R||[]).map(q=>({key:q.auth_key,value:q.auth_value,add_to:q.auth_value_addto}));a.auth=r,_t(()=>{var q;(q=c.value)==null||q.validate()})}function D(R){a.auth.splice(R,1)}function j(R){R.subs=[]}function X(R){const r=a.output[R];Array.isArray(r.subs)||(r.subs=[]),r.subs.push({key:"",value:"",subs:[]})}async function L(){var ne,pe;try{await((ne=U.value)==null?void 0:ne.validate()),await((pe=c.value)==null?void 0:pe.validate())}catch{return}const R=Array.isArray(a.headers)?JSON.parse(JSON.stringify(a.headers)):[],r=Array.isArray(a.params)?JSON.parse(JSON.stringify(a.params)):[],q=Array.isArray(a.body)?JSON.parse(JSON.stringify(a.body)):[],k=String(a.body_raw||""),P=(Array.isArray(a.auth)?a.auth:[]).filter(de=>String(de.key||"").trim()).map(de=>({key:String(de.key||""),value:String(de.value||""),add_to:String(de.add_to||"HEADERS")})),ee={curl:{method:a.method||"GET",rawurl:String(a.url||"").replace(/[`"]/g,"").trim(),headers:R,params:r,type:a.body_type??0,body:q,body_raw:k,output:Array.isArray(a.output)?JSON.parse(JSON.stringify(a.output)):[],http_auth:P,timeout:Number(a.timeout||30)}},ue={http_tool_id:x.toolId,node_name_en:a.node_name_en||"",node_name:a.title||"",node_description:a.description||"",node_remark:"",data_raw:JSON.stringify(ee)},re=()=>(b.value=!0,(y.value?nt({id:y.value,...ue}):nt(ue)).then(()=>{J.success(l("msg_operation_success")),E("ok"),u.value=!1}).finally(()=>{b.value=!1}));y.value?Y.confirm({title:l("msg_confirm_save"),content:l("msg_save_confirm"),okText:l("btn_confirm"),cancelText:l("btn_cancel"),onOk(){return re()}}):re()}function z(R){wt(R.id).then(()=>{J.success(l("msg_operation_success")),E("ok"),u.value=!1}).finally(()=>b.value=!1)}return i({show:T,del:z}),(R,r)=>{const q=it,k=we,P=ze,ee=Be,ue=Ee,re=me,ne=Ve,pe=Ke,de=ro,te=uo,be=$t,ce=Je,ye=Y;return d(),H(ye,{open:u.value,"onUpdate:open":r[13]||(r[13]=M=>u.value=M),width:"720px","confirm-loading":b.value,title:y.value?t(l)("title_edit_tool"):t(l)("title_add_tool"),onOk:L},{default:n(()=>[e("div",$s,[e("div",ws,[o(q,{name:"jibenpeizhi",size:"16"}),r[14]||(r[14]=O()),e("span",null,s(t(l)("label_basic_info")),1)]),o(ue,{ref_key:"formRef",ref:U,model:a,rules:$,layout:"vertical"},{default:n(()=>[o(P,{name:"node_name_en",label:t(l)("label_name"),required:""},{default:n(()=>[o(k,{value:a.node_name_en,"onUpdate:value":r[0]||(r[0]=M=>a.node_name_en=M),placeholder:t(l)("ph_input_name"),maxlength:50},null,8,["value","placeholder"]),e("div",xs,s(t(l)("tip_name_format")),1)]),_:1},8,["label"]),o(P,{name:"title",label:t(l)("label_remark_name"),required:""},{default:n(()=>[o(k,{value:a.title,"onUpdate:value":r[1]||(r[1]=M=>a.title=M),placeholder:t(l)("ph_input_remark"),maxlength:20},null,8,["value","placeholder"]),e("div",Cs,s(t(l)("tip_remark_length")),1)]),_:1},8,["label"]),o(P,{name:"description",label:t(l)("label_description"),required:""},{default:n(()=>[o(ee,{value:a.description,"onUpdate:value":r[2]||(r[2]=M=>a.description=M),"auto-size":{minRows:2,maxRows:4},placeholder:t(l)("ph_input_desc"),maxlength:500},null,8,["value","placeholder"]),e("div",Ss,s(t(l)("tip_desc_length",{count:500-(a.description?a.description.length:0)})),1)]),_:1},8,["label"])]),_:1},8,["model"])]),e("div",Ts,[e("div",As,[e("div",Os,[o(q,{name:"input",size:"16"}),r[15]||(r[15]=O()),e("span",null,s(t(l)("label_input")),1)]),o(re,{ghost:"",type:"primary",size:"small",onClick:I},{default:n(()=>[o(t(io)),O(" "+s(t(l)("btn_import_curl")),1)]),_:1})]),o(ue,{class:"form-box",ref_key:"inputFormRef",ref:c,model:a,rules:m,layout:"vertical"},{default:n(()=>[o(P,{label:t(l)("label_request_url"),required:""},{default:n(()=>[e("div",Rs,[o(pe,{value:a.method,"onUpdate:value":r[3]||(r[3]=M=>a.method=M),style:{width:"120px"}},{default:n(()=>[o(ne,{value:"GET"},{default:n(()=>[...r[16]||(r[16]=[O("GET",-1)])]),_:1}),o(ne,{value:"POST"},{default:n(()=>[...r[17]||(r[17]=[O("POST",-1)])]),_:1}),o(ne,{value:"PUT"},{default:n(()=>[...r[18]||(r[18]=[O("PUT",-1)])]),_:1}),o(ne,{value:"DELETE"},{default:n(()=>[...r[19]||(r[19]=[O("DELETE",-1)])]),_:1}),o(ne,{value:"PATCH"},{default:n(()=>[...r[20]||(r[20]=[O("PATCH",-1)])]),_:1})]),_:1},8,["value"]),o(k,{class:"flex1",value:a.url,"onUpdate:value":r[4]||(r[4]=M=>a.url=M),placeholder:t(l)("ph_input_url")},null,8,["value","placeholder"])])]),_:1},8,["label"]),e("div",Us,[e("div",Is,s(t(l)("label_headers")),1),(d(!0),f(K,null,Z(a.headers,(M,ae)=>(d(),f("div",{class:"form-item-list",key:ae},[e("div",Ms,[o(k,{style:{width:"120px"},value:M.key,"onUpdate:value":G=>M.key=G,placeholder:"Key"},null,8,["value","onUpdate:value"]),o(k,{class:"flex1",value:M.value,"onUpdate:value":G=>M.value=G,placeholder:"value"},null,8,["value","onUpdate:value"]),e("div",{class:"btn-hover-wrap",onClick:G=>a.headers.splice(ae,1)},[o(t(xe))],8,Es)])]))),128)),o(re,{block:"",type:"dashed",icon:ie(t(_e)),onClick:r[5]||(r[5]=M=>a.headers.push({key:"",value:""}))},{default:n(()=>[O(s(t(l)("btn_add_param")),1)]),_:1},8,["icon"])]),e("div",Ls,[e("div",Ns,s(t(l)("label_params")),1),(d(!0),f(K,null,Z(a.params,(M,ae)=>(d(),f("div",{class:"form-item-list",key:ae},[e("div",Ps,[o(k,{style:{width:"120px"},value:M.key,"onUpdate:value":G=>M.key=G,placeholder:"Key"},null,8,["value","onUpdate:value"]),o(k,{class:"flex1",value:M.value,"onUpdate:value":G=>M.value=G,placeholder:"value"},null,8,["value","onUpdate:value"]),e("div",{class:"btn-hover-wrap",onClick:G=>a.params.splice(ae,1)},[o(t(xe))],8,Ds)])]))),128)),o(re,{block:"",type:"dashed",icon:ie(t(_e)),onClick:r[6]||(r[6]=M=>a.params.push({key:"",value:""}))},{default:n(()=>[O(s(t(l)("btn_add_param")),1)]),_:1},8,["icon"])]),["POST","PUT","PATCH"].includes(a.method)?(d(),f("div",qs,[o(P,{label:t(l)("label_body"),class:"body-form-item"},{default:n(()=>[o(te,{value:a.body_type,"onUpdate:value":r[7]||(r[7]=M=>a.body_type=M)},{default:n(()=>[o(de,{value:0},{default:n(()=>[...r[21]||(r[21]=[O("none",-1)])]),_:1}),o(de,{value:1},{default:n(()=>[...r[22]||(r[22]=[O("x-www-form-urlencoded",-1)])]),_:1}),o(de,{value:2},{default:n(()=>[...r[23]||(r[23]=[O("JSON",-1)])]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),a.body_type==1?(d(),f("div",zs,[(d(!0),f(K,null,Z(a.body,(M,ae)=>(d(),f("div",{class:"form-item-list",key:ae},[e("div",Bs,[o(k,{style:{width:"120px"},value:M.key,"onUpdate:value":G=>M.key=G,placeholder:"Key"},null,8,["value","onUpdate:value"]),o(k,{class:"flex1",value:M.value,"onUpdate:value":G=>M.value=G,placeholder:"value"},null,8,["value","onUpdate:value"]),e("div",{class:"btn-hover-wrap",onClick:G=>a.body.splice(ae,1)},[o(t(xe))],8,Js)])]))),128)),o(re,{block:"",type:"dashed",icon:ie(t(_e)),onClick:r[8]||(r[8]=M=>a.body.push({key:"",value:""}))},{default:n(()=>[O(s(t(l)("btn_add_param")),1)]),_:1},8,["icon"])])):W("",!0),a.body_type==2?(d(),H(P,{key:1},{default:n(()=>[o(ee,{value:a.body_raw,"onUpdate:value":r[9]||(r[9]=M=>a.body_raw=M),"auto-size":{minRows:4,maxRows:10},placeholder:'{ "foo": "bar" }'},null,8,["value"])]),_:1})):W("",!0)])):W("",!0),e("div",Fs,[o(P,{label:t(l)("label_timeout")},{default:n(()=>[o(be,{value:a.timeout,"onUpdate:value":r[10]||(r[10]=M=>a.timeout=M),min:1,max:600,style:{width:"160px"}},null,8,["value"])]),_:1},8,["label"])])]),_:1},8,["model"])]),e("div",js,[e("div",Gs,[e("div",Hs,[e("span",null,s(t(l)("label_auth")),1),o(ce,null,{title:n(()=>[O(s(t(l)("tip_auth")),1)]),default:n(()=>[o(t(co))]),_:1})])]),e("div",Ks,[r[27]||(r[27]=e("div",{class:"output-block"},[e("div",{class:"output-item",style:{width:"33%"}},"Key"),e("div",{class:"output-item",style:{width:"33%"}},"Value"),e("div",{class:"output-item",style:{width:"33%"}},"Add To")],-1)),e("div",{class:"array-form-box",onMousedown:r[11]||(r[11]=V(()=>{},["stop"]))},[(d(!0),f(K,null,Z(a.auth,(M,ae)=>(d(),f("div",{class:"form-item-list",key:ae},[e("div",Vs,[o(k,{style:{width:"33%"},value:M.key,"onUpdate:value":G=>M.key=G,placeholder:t(l)("ph_input_key")},null,8,["value","onUpdate:value","placeholder"]),o(k,{style:{width:"33%"},value:M.value,"onUpdate:value":G=>M.value=G,placeholder:t(l)("ph_input_key")},null,8,["value","onUpdate:value","placeholder"]),o(pe,{value:M.add_to,"onUpdate:value":G=>M.add_to=G,style:{width:"33%"}},{default:n(()=>[o(ne,{value:"HEADERS"},{default:n(()=>[...r[24]||(r[24]=[O("HEADERS",-1)])]),_:1}),o(ne,{value:"PARAMS"},{default:n(()=>[...r[25]||(r[25]=[O("PARAMS",-1)])]),_:1}),o(ne,{value:"BODY"},{default:n(()=>[...r[26]||(r[26]=[O("BODY",-1)])]),_:1})]),_:1},8,["value","onUpdate:value"]),e("div",{class:"btn-hover-wrap",onClick:G=>D(ae)},[o(t(xe))],8,Ws)])]))),128)),o(re,{onClick:p,icon:ie(t(_e)),block:"",type:"dashed"},{default:n(()=>[O(s(t(l)("btn_add_param")),1)]),_:1},8,["icon"])],32)])]),e("div",Ys,[e("div",Qs,[e("div",Zs,[o(q,{name:"output",size:"16"}),r[28]||(r[28]=O()),e("span",null,s(t(l)("label_output")),1)])]),e("div",Xs,[e("div",en,[e("div",tn,s(t(l)("label_param_key")),1),e("div",on,s(t(l)("label_type")),1)]),e("div",an,[(d(!0),f(K,null,Z(a.output,(M,ae)=>(d(),f("div",{class:"form-item-list",key:ae},[e("div",ln,[o(k,{style:{width:"214px"},value:M.key,"onUpdate:value":G=>M.key=G,placeholder:t(l)("ph_input_key")},null,8,["value","onUpdate:value","placeholder"]),o(pe,{onChange:G=>j(M),value:M.typ,"onUpdate:value":G=>M.typ=G,style:{width:"214px"},placeholder:t(l)("ph_select_type")},{default:n(()=>[(d(),f(K,null,Z(S,G=>o(ne,{key:G.value,value:G.value},{default:n(()=>[O(s(G.value),1)]),_:2},1032,["value"])),64))]),_:1},8,["onChange","value","onUpdate:value","placeholder"]),M.typ=="object"?(d(),f("div",{key:0,class:"btn-hover-wrap",onClick:G=>X(ae)},[o(t(_o))],8,sn)):W("",!0),e("div",{class:"btn-hover-wrap",onClick:G=>a.output.splice(ae,1)},[o(t(xe))],8,nn)]),M.subs&&M.subs.length>0?(d(),f("div",dn,[o(To,{data:M.subs,level:2,typOptions:S},null,8,["data"])])):W("",!0)]))),128)),o(re,{block:"",type:"dashed",icon:ie(t(_e)),onClick:r[12]||(r[12]=M=>a.output.push({key:"",typ:"string",subs:[]}))},{default:n(()=>[O(s(t(l)("btn_add_param")),1)]),_:1},8,["icon"])])])]),o(Ao,{ref_key:"parseCurlModalRef",ref:_,onParse:v},null,512),o(ks,{ref_key:"addAuthModalRef",ref:C,onOk:g},null,512)]),_:1},8,["open","confirm-loading","title"])}}},rn=se(un,[["__scopeId","data-v-356887c8"]]),cn={class:"_http_detail_box"},_n={class:"base-info-box"},pn={class:"app-info"},vn=["src"],mn={class:"info-box"},fn={class:"left-box"},hn={class:"name"},bn={class:"desc"},yn={class:"right-box"},gn={class:"cFB363F"},kn={class:"app-data"},$n={class:"data-item"},wn={class:"title"},xn={class:"value"},Cn={class:"data-item"},Sn={class:"title"},Tn={class:"value"},An={class:"tools-box"},On={class:"head-box"},Rn={key:0,class:"tools-list"},Un={class:"left"},In={class:"tit"},Mn={class:"key"},En={class:"params"},Ln={class:"params-box"},Nn={class:"field"},Pn={class:"name"},Dn={class:"type"},qn={key:0,class:"required"},zn={class:"desc"},Bn={class:"cFB363F"},Jn={key:1,class:"empty-box"},Fn={class:"title"},jn={__name:"http-tool-detail",props:{tool:{type:Object,default:()=>({})}},emits:["addTool","editTool","ok","editBase","deleteBase"],setup(B,{emit:i}){const{t:w}=le("views.robot.robot-list.components.http-tool-detail"),l=B,E=i;function x(U){Y.confirm({title:w("btn_delete"),icon:ie(Ne),content:w("msg_delete_confirm"),okText:w("btn_confirm_delete"),cancelText:w("btn_cancel"),onOk(){return wt({id:U.id}).then(()=>{E("ok")})}})}const u=De(()=>{var c;return String(((c=l.tool)==null?void 0:c.avatar)||"").trim().replace(/[`"']/g,"")||"/src/assets/img/workflow/node-service.svg"});function b(U){const c=Number(U||0);if(!c)return"—";const a=c>1e12?c:c*1e3;return yo(a).format("YYYY-MM-DD HH:mm")}const _=De(()=>{var c;return(Array.isArray((c=l.tool)==null?void 0:c.nodes)?l.tool.nodes:[]).map(a=>{const y=a.http_tool_info||{},$=(a.node_params||{}).curl||{},m=Array.isArray($.params)?$.params:[],T=Array.isArray($.body)?$.body:[],I=[...m,...T].filter(p=>String((p==null?void 0:p.key)||"").trim().length>0).map(p=>({key:p.key,typ:p.value}));return{id:Number(a.id||0),displayTitle:y.http_tool_node_name||a.node_name||"",displayIdent:a.node_key||y.http_tool_node_key||"",displayDesc:a.node_description||y.http_tool_node_description||"",rawurl:$.rawurl||"",displayParams:I,originNode:a}})});function C(U,c){if(!U)return null;const y=document.createElement("canvas").getContext("2d");y.font='14px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif';const S=y.measureText(U).width,$=document.querySelector(`.titleRef_${c.create_time}`);$&&(c.title_width=$.offsetWidth);const m=(c==null?void 0:c.title_width)||1250;return S>m?U:null}return(U,c)=>{const a=me,y=Ae,S=Te,$=Oe,m=yt,T=Je,v=We,I=kt;return d(),f("div",cn,[e("div",_n,[e("div",pn,[e("img",{class:"avatar",src:u.value},null,8,vn),e("div",mn,[e("div",fn,[e("div",hn,s(B.tool.name),1),e("div",bn,s(B.tool.description),1)]),e("div",yn,[o(a,{onClick:c[0]||(c[0]=p=>U.$emit("addTool",B.tool)),type:"primary",ghost:"",icon:ie(t(_e))},{default:n(()=>[O(s(t(w)("btn_add_tool")),1)]),_:1},8,["icon"]),o($,null,{overlay:n(()=>[o(S,null,{default:n(()=>[o(y,{onClick:c[1]||(c[1]=p=>U.$emit("editBase",B.tool))},{default:n(()=>[O(s(t(w)("btn_edit")),1)]),_:1}),o(y,{onClick:c[2]||(c[2]=p=>U.$emit("deleteBase",B.tool))},{default:n(()=>[e("span",gn,s(t(w)("btn_delete")),1)]),_:1})]),_:1})]),default:n(()=>[o(a,{icon:ie(t(he))},null,8,["icon"])]),_:1})])])]),e("div",kn,[e("div",$n,[e("div",wn,s(t(w)("label_create_time")),1),e("div",xn,s(b(B.tool.create_time)),1)]),o(m,{type:"vertical",style:{height:"24px"}}),e("div",Cn,[e("div",Sn,s(t(w)("label_update_time")),1),e("div",Tn,s(b(B.tool.update_time)),1)])])]),e("div",An,[e("div",On,[o(t(gt),{class:"icon"}),O(" "+s(t(w)("title_tool_list"))+"（"+s(_.value.length||0)+"） ",1)]),_.value.length?(d(),f("div",Rn,[(d(!0),f(K,null,Z(_.value,(p,g)=>(d(),f("div",{key:g,class:"tools-item"},[e("div",Un,[e("div",In,s(p.displayTitle),1),e("div",Mn,s(t(w)("label_request_url"))+s(p.rawurl),1),o(T,{title:C(p.displayDesc,p),placement:"top"},{default:n(()=>[e("div",{class:ke(["desc",`titleRef_${p.id}`])},s(p.displayDesc),3)]),_:2},1032,["title"]),e("div",En,[(d(!0),f(K,null,Z((p.displayParams||[]).slice(0,5),D=>(d(),H(v,{key:D.key,bordered:!1},{default:n(()=>[O(s(D.key),1)]),_:2},1024))),128)),o(I,{placement:"right"},{content:n(()=>[e("div",Ln,[(d(!0),f(K,null,Z(p.displayParams||[],D=>(d(),f("div",{key:D.key,class:"param-item"},[e("div",Nn,[e("span",Pn,s(D.key),1),e("span",Dn,s(D.typ),1),D.required?(d(),f("span",qn,s(t(w)("label_required")),1)):W("",!0)]),e("div",zn,s(D.desc),1)]))),128))])]),default:n(()=>[e("a",null,s(t(w)("label_params")),1)]),_:2},1024)])]),o($,null,{overlay:n(()=>[o(S,null,{default:n(()=>[o(y,{onClick:D=>U.$emit("editTool",p.originNode)},{default:n(()=>[O(s(t(w)("btn_edit")),1)]),_:1},8,["onClick"]),o(y,{onClick:D=>x(p.originNode)},{default:n(()=>[e("span",Bn,s(t(w)("btn_delete")),1)]),_:1},8,["onClick"])]),_:2},1024)]),default:n(()=>[o(a,{size:"small",icon:ie(t(he))},null,8,["icon"])]),_:2},1024)]))),128))])):(d(),f("div",Jn,[c[4]||(c[4]=e("img",{src:Ie},null,-1)),e("div",Fn,s(t(w)("title_no_tool")),1),o(a,{onClick:c[3]||(c[3]=p=>U.$emit("addTool",B.tool)),class:"btn",type:"primary"},{default:n(()=>[O(s(t(w)("btn_add_now")),1)]),_:1})]))])])}}},Gn=se(jn,[["__scopeId","data-v-ee793337"]]),Hn={class:"_http_tool_box"},Kn={key:0,class:"loading-box"},Vn={class:"list-head"},Wn={class:"title"},Yn={key:0,class:"list-box"},Qn=["onClick"],Zn={class:"base-info-box"},Xn=["src"],ei={class:"info-box"},ti={class:"name zm-line1"},oi={class:"bottom"},ai={class:"extra-box"},li={key:0,class:"extra-item"},si={key:1,class:"extra-item"},ni={class:"bottom-right"},ii={class:"update-time"},di={class:"cFB363F"},ui={key:1,class:"empty-box"},ri={class:"title"},ci={class:"breadcrumb"},_i={class:"cur"},pi={__name:"http-tool-box",setup(B,{expose:i}){const{t:w}=le("views.robot.robot-list.components.http-tool-box"),l=h(null),E=h(null),x=h(!0),u=h([]),b=h(null);Me(()=>{_()});function _(){x.value=!0,Oo({page:1,size:9999,with_nodes:1}).then(v=>{var p;const I=(((p=v==null?void 0:v.data)==null?void 0:p.list)||[]).map(g=>({...g,up_time_text:He(g.update_time),avatar:m(g.avatar)}));if(u.value=I,b.value){const g=I.find(D=>D.id===b.value.id);g&&(b.value=g)}}).finally(()=>{x.value=!1})}function C(){l.value.show()}function U(T){b.value=T}function c(){b.value=null}function a(T){l.value.show({id:T.id,name:T.name,description:T.description,avatar:T.avatar})}function y(T){E.value&&E.value.show()}function S(T){E.value&&E.value.show(T)}function $(T){Y.confirm({title:w("btn_delete"),content:w("msg_delete_confirm"),okText:w("btn_confirm"),cancelText:w("btn_cancel"),onOk:()=>{Ro({id:T.id}).then(()=>{J.success(w("msg_deleted")),b.value&&b.value.id===T.id&&(b.value=null),_()})}})}function m(T){return String(T||"").trim().replace(/[`"']/g,"")||"/src/assets/img/workflow/node-service.svg"}return i({showStore:C}),(T,v)=>{var L;const I=Le,p=Je,g=me,D=Ae,j=Te,X=Oe;return d(),f("div",Hn,[x.value?(d(),f("div",Kn,[o(I)])):(d(),f(K,{key:1},[b.value?(d(),f(K,{key:1},[e("div",ci,[e("a",{onClick:c},s(t(w)("title_http_tool")),1),v[2]||(v[2]=O()),v[3]||(v[3]=e("span",null,"/",-1)),v[4]||(v[4]=O()),e("span",_i,s(b.value.name),1)]),o(Gn,{tool:b.value,onBack:c,onEditTool:S,onOk:_,onAddTool:y,onEditBase:a,onDeleteBase:$},null,8,["tool"])],64)):(d(),f(K,{key:0},[e("div",Vn,[e("div",Wn,s(t(w)("title_http_tool")),1)]),u.value.length?(d(),f("div",Yn,[(d(!0),f(K,null,Z(u.value,(z,R)=>(d(),f("div",{key:R,onClick:r=>U(z),class:"app-item"},[e("div",Zn,[e("img",{class:"avatar",src:m(z.avatar)},null,8,Xn),e("div",ei,[e("div",ti,s(z.name),1),o(p,{title:t(ut)(z.description,z,14,2,10),placement:"top"},{default:n(()=>[e("div",{class:"description",ref_for:!0,ref:r=>t(dt)(r,z)},s(z.description),513)]),_:2},1032,["title"])])]),e("div",oi,[e("div",ai,[z.node_count>0?(d(),f("div",li,s(z.node_count)+s(t(w)("label_available_tools")),1)):(d(),f("div",si,s(t(w)("label_no_available_tools")),1))]),e("div",ni,[e("div",ii,s(z.up_time_text)+s(t(w)("label_update")),1),o(X,null,{overlay:n(()=>[o(j,null,{default:n(()=>[o(D,{onClick:V(r=>a(z),["stop"])},{default:n(()=>[O(s(t(w)("btn_edit")),1)]),_:1},8,["onClick"]),o(D,{onClick:V(r=>$(z),["stop"])},{default:n(()=>[e("span",di,s(t(w)("btn_delete")),1)]),_:1},8,["onClick"])]),_:2},1024)]),default:n(()=>[o(g,{onClick:v[0]||(v[0]=V(()=>{},["stop"])),size:"small",icon:ie(t(he))},null,8,["icon"])]),_:2},1024)])])],8,Qn))),128))])):(d(),f("div",ui,[v[1]||(v[1]=e("img",{src:Ie},null,-1)),e("div",ri,s(t(w)("title_no_http_tool")),1),o(g,{onClick:C,class:"btn",type:"primary"},{default:n(()=>[O(s(t(w)("btn_add_now")),1)]),_:1})]))],64)),o(fs,{ref_key:"storeRef",ref:l,onOk:_},null,512),o(rn,{toolId:((L=b.value)==null?void 0:L.id)||0,ref_key:"addToolRef",ref:E,onOk:_},null,8,["toolId"])],64))])}}},vi=se(pi,[["__scopeId","data-v-61d245fe"]]),mi={class:"main"},fi={key:0,class:"item"},hi={class:"list"},bi={key:1,class:"item"},yi={class:"list"},gi={__name:"workflow-export-modal",emits:["ok"],setup(B,{expose:i,emit:w}){const{t:l}=le("views.robot.robot-list.components.workflow-export-modal"),E=w,x=h(!1),u=h({}),b=h(!1),_=h(!1),C=h([]),U=h([]);function c(S={}){a(),u.value=S,jt({id:S==null?void 0:S.id}).then($=>{let m=($==null?void 0:$.data)||{};C.value=(m==null?void 0:m.databaseList)||[],U.value=(m==null?void 0:m.library)||[],!U.value.length&&!C.value.length?E("ok",u.value):x.value=!0})}function a(){U.value=[],C.value=[],b.value=!1,_.value=!1}function y(){let S={};b.value&&U.value.length&&(S.library_id=U.value.map($=>$.id).toString()),_.value&&C.value.length&&(S.form_id=C.value.map($=>$.form_id).toString()),x.value=!1,E("ok",u.value,S)}return i({handle:c}),(S,$)=>{const m=qe,T=ht,v=We,I=Y;return d(),H(I,{open:x.value,"onUpdate:open":$[2]||($[2]=p=>x.value=p),title:t(l)("title_export_confirm"),width:"746px",onOk:y},{default:n(()=>[o(m,{class:"zm-alert-info mt24",type:"info",message:t(l)("msg_export_info")},null,8,["message"]),e("div",mi,[U.value.length?(d(),f("div",fi,[o(T,{checked:b.value,"onUpdate:checked":$[0]||($[0]=p=>b.value=p)},{default:n(()=>[O(s(t(l)("label_library_content")),1)]),_:1},8,["checked"]),e("div",hi,[(d(!0),f(K,null,Z(U.value,p=>(d(),H(v,{key:p.id},{default:n(()=>[O(s(p.library_name),1)]),_:2},1024))),128))]),at(e("div",{class:"warning"},s(t(l)("msg_library_warning")),513),[[lt,b.value]])])):W("",!0),C.value.length?(d(),f("div",bi,[o(T,{checked:_.value,"onUpdate:checked":$[1]||($[1]=p=>_.value=p)},{default:n(()=>[O(s(t(l)("label_database_content")),1)]),_:1},8,["checked"]),e("div",yi,[(d(!0),f(K,null,Z(C.value,p=>(d(),H(v,{key:p.form_id},{default:n(()=>[O(s(p.form_name),1)]),_:2},1024))),128))]),at(e("div",{class:"warning"},s(t(l)("msg_database_warning")),513),[[lt,_.value]])])):W("",!0)])]),_:1},8,["open","title"])}}},ki=se(gi,[["__scopeId","data-v-f4e52055"]]),$i={class:"robot-page"},wi={class:"list-toolbar mt16"},xi={class:"toolbar-box"},Ci={class:"toolbar-box",style:{"text-align":"right"}},Si={class:"create-action"},Ti=["src"],Ai={class:"create-action"},Oi=["src"],Ri={class:"create-action"},Ui=["src"],Ii={class:"create-action"},Mi=["src"],Ei={class:"create-action"},Li=["src"],Ni={key:1,class:"desc-box"},Pi={key:2,class:"list-group-box"},Di={key:0,class:"group-head-box"},qi={class:"head-title"},zi={class:"search-box"},Bi={class:"classify-box"},Ji=["onClick"],Fi={class:"classify-title"},ji={class:"right-content"},Gi={key:0,class:"btn-box"},Hi={class:"hover-btn-wrap"},Ki=["onClick"],Vi=["onClick"],Wi={class:"robot-scroll-box"},Yi={key:0,class:"empty-box"},Qi=["onClick"],Zi={class:"list-item"},Xi={class:"robot-info"},ed=["src"],td={class:"robot-info-content"},od={class:"robot-name"},ad={class:"robot-type-tag"},ld=["onClick"],sd=["onClick"],nd=["onClick"],id=["onClick"],dd=["onClick"],ud=["onClick"],rd={__name:"robot-list",setup(B){const{t:i}=le("views.robot.robot-list.robot-list"),w=rt(),l=ct(),E=h([{title:`${i("tab_all")} (0)`,value:"2"},{title:`${i("label_chat_bot")} (0)`,value:"0"},{title:`${i("label_workflow")} (0)`,value:"1"},{title:i("tab_mcp_plugin"),value:"3"},{title:i("tab_http_tool"),value:"6"}]),x=Mt();let{role_permission:u,role_type:b}=x;const _=De(()=>b==1||u.includes("RobotCreate")),C=h(null),U=h(null),c=h("2"),a=h(null),y=h(""),S=h([]),$=h([]),m=h(!1);let T="robot-list-hide-group-key";const v=h(localStorage.getItem(T)==1),I=()=>{v.value=!v.value,localStorage.setItem(T,v.value?1:0)},p=()=>{j(),Ye()},g=()=>{let A=S.value;y.value!=""&&(A=A.filter(N=>N.group_id==y.value)),c.value!=2&&(A=A.filter(N=>N.application_type==c.value)),$.value=A};function D(){const A=w.resolve({path:"/mcp/index"}).href;window.open(A,"_blank")}const j=()=>{vt().then(A=>{let N=0,oe=0,Q=0;A.data.forEach(fe=>{fe.application_type==0?oe++:Q++,N++}),E.value=[{title:`${i("tab_all")} (${N})`,value:"2"},{title:`${i("label_chat_bot")} (${oe})`,value:"0"},{title:`${i("label_workflow")} (${Q})`,value:"1"},{title:i("tab_mcp_plugin"),value:"3"},{title:i("tab_http_tool"),value:"6"}],S.value=A.data,g()}).catch(()=>{})},X=h(null),L=h(null),z=h(null),R=A=>{X.value.open(A),X.value.setGroupId(y.value)},r=()=>{z.value.show()},q=()=>{L.value.open()},k=A=>{j(),P(A)},P=({id:A,robot_key:N,application_type:oe})=>{localStorage.setItem("last_local_robot_id",A),oe==0?window.open(`/#/robot/config/basic-config?id=${A}&robot_key=${N}`,"_blank","noopener"):window.open(`/#/robot/config/workflow?id=${A}&robot_key=${N}`,"_blank","noopener")},ee=()=>{c.value="6",_t(()=>{const A=typeof a.value<"u"?a.value:null;A&&A.showStore&&A.showStore()})},ue=A=>{if(Pt(A.id)!=4)return J.error(i("msg_no_delete_permission"));let oe=3,Q=Y.confirm({title:`${i("title_delete_robot")}${A.robot_name}`,icon:o(Ne),content:i("msg_confirm_delete_robot"),okText:oe+" "+i("btn_confirm"),okType:"danger",cancelText:i("btn_cancel"),okButtonProps:{disabled:!0},onOk(){re(A)},onCancel(){}}),fe=setInterval(()=>{oe==1?(Q.update({okText:i("btn_confirm"),okButtonProps:{disabled:!1}}),clearInterval(fe),fe=void 0):(oe-=1,Q.update({okText:oe+" "+i("btn_confirm"),okButtonProps:{disabled:!0}}))},1e3)},re=({id:A})=>{Kt({id:A}).then(()=>{J.success(i("msg_delete_success")),j()})},ne=A=>{let N=3,oe=Y.confirm({title:`${i("title_copy_robot")}${A.robot_name}`,icon:o(Ne),content:i("msg_confirm_copy_robot"),okText:N+" "+i("btn_confirm"),okType:"danger",cancelText:i("btn_cancel"),okButtonProps:{disabled:!0},onOk(){pe(A)},onCancel(){}}),Q=setInterval(()=>{N==1?(oe.update({okText:i("btn_confirm"),okButtonProps:{disabled:!1}}),clearInterval(Q),Q=void 0):(N-=1,oe.update({okText:N+" "+i("btn_confirm"),okButtonProps:{disabled:!0}}))},1e3)},pe=({id:A})=>{Vt({id:A}).then(()=>{J.success(i("msg_copy_success")),j()})},de=A=>{C.value.handle(A)},te=(A,N=null)=>{const{openUrlWithToken:oe}=jo();N=N||{},N.id=A.id,`${ot(N)}`,oe(`/manage/robotExport?${ot(N)}`)},be=A=>{window.open(`#/robot/test?robot_key=${A.robot_key}&id=${A.id}`)},ce=A=>{window.open(`#/robot/config/session-record?robot_key=${A.robot_key}&id=${A.id}`)},ye=A=>{window.open(`#/robot/config/statistical_analysis?robot_key=${A.robot_key}&id=${A.id}`)},M=h(""),ae=h([]),G=De(()=>ae.value.filter(A=>A.group_name.includes(M.value))),Ye=()=>{pt({application_type:c.value==2?null:c.value}).then(A=>{let N=A.data||[],oe=0;N.forEach(Q=>{oe+=+Q.total}),ae.value=[{group_name:i("tab_all"),total:oe,id:""},...N]})},Ct=A=>{y.value=A.id,j()},Qe=h(null),Ze=A=>{Qe.value.show({...A})},Xe=h(null),St=A=>{Xe.value.show({...A})},Tt=A=>{Y.confirm({title:`${i("title_delete_group")}${A.group_name}`,icon:o(Ne),content:"",okText:i("btn_confirm_delete_group"),okType:"danger",cancelText:i("btn_cancel"),onOk(){Gt({id:A.id}).then(()=>{J.success(i("msg_delete_success")),Ye(),y.value==A.id&&(y.value="",j())})}})},At=()=>{U.value&&U.value.update()},Ot=A=>{if(A.newIndex===A.oldIndex)return;m.value=!0;let N={move_robot_id:$.value[A.newIndex].id,to_robot_id:0};A.newIndex>0&&(N.to_robot_id=$.value[A.newIndex-1].id),Ht(N).then(oe=>{J.success(i("msg_operation_complete"))}).finally(()=>{m.value=!1})};return Me(()=>{c.value=l.query.active||"2",p()}),(A,N)=>{const oe=me,Q=Ae,fe=Te,Fe=Oe,ge=Je,Rt=we,et=Dt,Ut=po,Re=it;return d(),f("div",$i,[o(ho,{class:"mt16",title:t(i)("title_usage_guide")},{default:n(()=>[e("div",null,[e("p",null,s(t(i)("usage_guide_content_1")),1),e("p",null,s(t(i)("usage_guide_content_2")),1)])]),_:1},8,["title"]),e("div",wi,[e("div",xi,[o(bo,{tabs:E.value,onChange:p,value:c.value,"onUpdate:value":N[0]||(N[0]=F=>c.value=F)},null,8,["tabs","value"])]),e("div",Ci,[_.value?(d(),H(Fe,{key:0},{overlay:n(()=>[o(fe,null,{default:n(()=>[o(Q,{onClick:N[2]||(N[2]=V(F=>R(0),["prevent"]))},{default:n(()=>[e("span",Si,[e("img",{class:"icon",src:t(Et),alt:""},null,8,Ti),e("span",null,s(t(i)("label_chat_bot")),1)])]),_:1}),o(Q,{onClick:N[3]||(N[3]=V(F=>R(1),["prevent"]))},{default:n(()=>[e("span",Ai,[e("img",{class:"icon",src:t(Lt),alt:""},null,8,Oi),e("span",null,s(t(i)("label_workflow")),1)])]),_:1}),o(Q,{onClick:V(r,["prevent"])},{default:n(()=>[e("span",Ri,[e("img",{class:"icon",src:t(Pe),alt:""},null,8,Ui),e("span",null,s(t(i)("label_external_mcp")),1)])]),_:1}),o(Q,{onClick:V(ee,["prevent"])},{default:n(()=>[e("span",Ii,[e("img",{class:"icon",src:t(Pe),alt:""},null,8,Mi),e("span",null,s(t(i)("label_http_tool")),1)])]),_:1}),o(Q,{onClick:q},{default:n(()=>[e("span",Ei,[e("img",{class:"icon",src:t(Nt),alt:""},null,8,Li),e("span",null,s(t(i)("label_import_csl_create")),1)])]),_:1})]),_:1})]),default:n(()=>[o(oe,{type:"primary",onClick:N[1]||(N[1]=V(()=>{},["prevent"]))},{icon:n(()=>[o(t(_e))]),default:n(()=>[O(" "+s(t(i)("btn_create_app")),1)]),_:1})]),_:1})):W("",!0),_.value&&c.value=="3"?(d(),f("div",Ni,[e("div",{class:"link",onClick:D},s(t(i)("link_more_mcp_square")),1)])):W("",!0)])]),c.value==3?(d(),H(is,{key:0,ref_key:"mcpPanelRef",ref:U},null,512)):c.value==6?(d(),H(vi,{key:1,ref_key:"httpToolBoxRef",ref:a},null,512)):(d(),f("div",Pi,[e("div",{class:ke(["group-list-box",{"hide-group":v.value}])},[o(et,{style:{"padding-right":"16px"}},{default:n(()=>[v.value?W("",!0):(d(),f("div",Di,[e("div",qi,[e("div",null,s(t(i)("title_robot_group")),1),o(ge,{title:t(i)("tooltip_new_group")},{default:n(()=>[e("div",{class:"hover-btn-wrap",onClick:N[4]||(N[4]=F=>Ze({}))},[o(t(_e))])]),_:1},8,["title"])]),e("div",zi,[o(Rt,{value:M.value,"onUpdate:value":N[6]||(N[6]=F=>M.value=F),allowClear:"",placeholder:t(i)("ph_search_group"),style:{width:"100%"}},{suffix:n(()=>[o(t(vo),{onClick:N[5]||(N[5]=V(()=>{},["stop"]))})]),_:1},8,["value","placeholder"])])])),e("div",Bi,[(d(!0),f(K,null,Z(G.value,F=>(d(),f("div",{class:ke(["classify-item",{active:F.id==y.value}]),onClick:Ue=>Ct(F),key:F.id},[e("div",Fi,s(F.group_name),1),e("div",ji,[e("div",{class:ke(["num",{"num-block":F.id<=0}])},s(F.total),3),F.id>0?(d(),f("div",Gi,[o(Fe,{placement:"bottomRight"},{overlay:n(()=>[o(fe,null,{default:n(()=>[o(Q,null,{default:n(()=>[e("div",{onClick:V(Ue=>Ze(F),["stop"])},s(t(i)("btn_rename")),9,Ki)]),_:2},1024),o(Q,null,{default:n(()=>[e("div",{onClick:V(Ue=>Tt(F),["stop"])},s(t(i)("btn_delete")),9,Vi)]),_:2},1024)]),_:2},1024)]),default:n(()=>[e("div",Hi,[o(t(he))])]),_:2},1024)])):W("",!0)])],10,Ji))),128))])]),_:1}),o(ge,{placement:"right",title:v.value?t(i)("tooltip_expand_group"):t(i)("tooltip_collapse_group")},{default:n(()=>[e("div",{class:"hide-group-box",onClick:I},[v.value?(d(),H(t(fo),{key:1})):(d(),H(t(mo),{key:0}))])]),_:1},8,["title"])],2),e("div",Wi,[$.value.length==0?(d(),f("div",Yi,[o(Ut)])):W("",!0),o(et,{style:{"padding-right":"16px"}},{default:n(()=>[o(t(zt),{modelValue:$.value,"onUpdate:modelValue":N[10]||(N[10]=F=>$.value=F),handle:".drag-btn","item-key":"id",disabled:m.value,class:"list-box",onEnd:Ot},{item:n(({element:F,index:Ue})=>[(d(),f("div",{class:"list-item-wrapper",key:F.id,onClick:ve=>P(F)},[e("div",Zi,[e("div",Xi,[e("img",{class:"robot-avatar",src:F.robot_avatar,alt:""},null,8,ed),e("div",td,[e("div",od,s(F.robot_name),1),e("div",ad,s(F.application_type==0?t(i)("label_chat_bot"):t(i)("label_workflow")),1)])]),o(ge,{title:t(ut)(F.robot_intro,F,14,2,10),placement:"top"},{default:n(()=>[e("div",{class:"robot-desc",ref:ve=>t(dt)(ve,F)},s(F.robot_intro),513)]),_:2},1032,["title"]),e("div",{class:"robot-action",onClick:N[9]||(N[9]=V(()=>{},["stop"]))},[o(ge,{title:t(i)("tooltip_drag_sort")},{default:n(()=>[e("div",{class:"robot-action-item drag-btn",onClick:N[7]||(N[7]=V(()=>{},["stop"]))},[o(Re,{class:"action-icon",name:"dragv2"})])]),_:1},8,["title"]),o(ge,{title:t(i)("tooltip_chat_test")},{default:n(()=>[e("div",{class:"robot-action-item",onClick:V(ve=>be(F),["stop"])},[o(Re,{class:"action-icon",name:"chat"})],8,ld)]),_:2},1032,["title"]),o(ge,{title:t(i)("tooltip_session_record")},{default:n(()=>[e("div",{class:"robot-action-item",onClick:V(ve=>ce(F),["stop"])},[o(Re,{class:"action-icon",name:"session"})],8,sd)]),_:2},1032,["title"]),o(ge,{title:t(i)("tooltip_statistics")},{default:n(()=>[e("div",{class:"robot-action-item",onClick:V(ve=>ye(F),["stop"])},[o(Re,{class:"action-icon",name:"analysis"})],8,nd)]),_:2},1032,["title"]),o(Fe,null,{overlay:n(()=>[o(fe,null,{default:n(()=>[o(Q,null,{default:n(()=>[e("a",{class:"delete-text-color",href:"javascript:;",onClick:ve=>ue(F)},s(t(i)("btn_delete")),9,id)]),_:2},1024),o(Q,null,{default:n(()=>[e("div",{onClick:V(ve=>St(F),["stop"])},s(t(i)("btn_edit_group")),9,dd)]),_:2},1024),o(Q,null,{default:n(()=>[e("a",{class:"copy-text-color",href:"javascript:;",onClick:ve=>ne(F)},s(t(i)("btn_copy")),9,ud)]),_:2},1024),o(Q,{onClick:ve=>de(F)},{default:n(()=>[e("span",null,s(t(i)("btn_export_csl")),1)]),_:1},8,["onClick"])]),_:2},1024)]),default:n(()=>[e("div",{class:"robot-action-item",onClick:N[8]||(N[8]=V(()=>{},["stop"]))},[o(Re,{class:"action-icon",name:"point-h"})])]),_:2},1024)])])],8,Qi))]),_:1},8,["modelValue","disabled"])]),_:1})])])),o(Wt,{ref_key:"addRobotAlertRef",ref:X,onOk:p},null,512),o(Yt,{ref_key:"addGroupRef",ref:Qe,onOk:p},null,512),o(Fo,{ref_key:"editGroupRef",ref:Xe,onOk:p},null,512),o(Do,{ref_key:"importCslAlertRef",ref:L,onOk:k},null,512),o(xt,{ref_key:"thirdMcpRef",ref:z,onOk:At},null,512),o(ki,{ref_key:"exportRef",ref:C,onOk:N[11]||(N[11]=(F,Ue)=>te(F,Ue))},null,512)])}}},Nd=se(rd,[["__scopeId","data-v-b8d4ca9b"]]);export{Nd as default};
//# sourceMappingURL=robot-list-DhNYzAme.js.map
