import{a6 as N,u as te}from"../../index-DSFcP5NQ.js";import{g as re}from"./editor-cherry-CFIsbKoN.js";import{_ as oe}from"./emoji-mart-BBMRoEa3.js";import{m as ae,c as se,V as le,M as ie,I as ue,v as ce,u as pe,ax as de,ao as fe}from"./ui-antd-Dl1wwwCD.js";import{r as U,e as K,b as F,t as B,p as I,y as x,a as R,q as W,u as q,c as J,x as me,l as z,h as ve,n as j,F as G,_ as he,v as _e}from"./vue-chunks-BdaA73Wf.js";function Ne(p={}){return N.get({url:"/manage/httpTool/getHttpToolList",params:p})}const $e=(p={})=>N.post({headers:{"Content-Type":"multipart/form-data"},url:"/manage/httpTool/saveHttpTool",data:p}),Be=(p={})=>N.post({url:"/manage/httpTool/deleteHttpTool",data:p}),Me=(p={})=>N.post({url:"/manage/httpTool/saveHttpToolNode",data:p}),Le=(p={})=>N.post({url:"/manage/httpTool/deleteHttpToolNode",data:p});var $={exports:{}},M,Q;function be(){if(Q)return M;Q=1;function p(r,o){var e=r;o.slice(0,-1).forEach(function(m){e=e[m]||{}});var l=o[o.length-1];return l in e}function w(r){return typeof r=="number"||/^0x[0-9a-f]+$/i.test(r)?!0:/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(r)}function f(r,o){return o==="constructor"&&typeof r[o]=="function"||o==="__proto__"}return M=function(r,o){o||(o={});var e={bools:{},strings:{},unknownFn:null};typeof o.unknown=="function"&&(e.unknownFn=o.unknown),typeof o.boolean=="boolean"&&o.boolean?e.allBools=!0:[].concat(o.boolean).filter(Boolean).forEach(function(a){e.bools[a]=!0});var l={};function m(a){return l[a].some(function(_){return e.bools[_]})}Object.keys(o.alias||{}).forEach(function(a){l[a]=[].concat(o.alias[a]),l[a].forEach(function(_){l[_]=[a].concat(l[a].filter(function(C){return _!==C}))})}),[].concat(o.string).filter(Boolean).forEach(function(a){e.strings[a]=!0,l[a]&&[].concat(l[a]).forEach(function(_){e.strings[_]=!0})});var i=o.default||{},s={_:[]};function g(a,_){return e.allBools&&/^--[^=]+$/.test(_)||e.strings[a]||e.bools[a]||l[a]}function y(a,_,C){for(var c=a,H=0;H<_.length-1;H++){var T=_[H];if(f(c,T))return;c[T]===void 0&&(c[T]={}),(c[T]===Object.prototype||c[T]===Number.prototype||c[T]===String.prototype)&&(c[T]={}),c[T]===Array.prototype&&(c[T]=[]),c=c[T]}var O=_[_.length-1];f(c,O)||((c===Object.prototype||c===Number.prototype||c===String.prototype)&&(c={}),c===Array.prototype&&(c=[]),c[O]===void 0||e.bools[O]||typeof c[O]=="boolean"?c[O]=C:Array.isArray(c[O])?c[O].push(C):c[O]=[c[O],C])}function v(a,_,C){if(!(C&&e.unknownFn&&!g(a,C)&&e.unknownFn(C)===!1)){var c=!e.strings[a]&&w(_)?Number(_):_;y(s,a.split("."),c),(l[a]||[]).forEach(function(H){y(s,H.split("."),c)})}}Object.keys(e.bools).forEach(function(a){v(a,i[a]===void 0?!1:i[a])});var A=[];r.indexOf("--")!==-1&&(A=r.slice(r.indexOf("--")+1),r=r.slice(0,r.indexOf("--")));for(var h=0;h<r.length;h++){var t=r[h],u,n;if(/^--.+=/.test(t)){var E=t.match(/^--([^=]+)=([\s\S]*)$/);u=E[1];var S=E[2];e.bools[u]&&(S=S!=="false"),v(u,S,t)}else if(/^--no-.+/.test(t))u=t.match(/^--no-(.+)/)[1],v(u,!1,t);else if(/^--.+/.test(t))u=t.match(/^--(.+)/)[1],n=r[h+1],n!==void 0&&!/^(-|--)[^-]/.test(n)&&!e.bools[u]&&!e.allBools&&(!l[u]||!m(u))?(v(u,n,t),h+=1):/^(true|false)$/.test(n)?(v(u,n==="true",t),h+=1):v(u,e.strings[u]?"":!0,t);else if(/^-[^-]+/.test(t)){for(var d=t.slice(1,-1).split(""),P=!1,b=0;b<d.length;b++){if(n=t.slice(b+2),n==="-"){v(d[b],n,t);continue}if(/[A-Za-z]/.test(d[b])&&n[0]==="="){v(d[b],n.slice(1),t),P=!0;break}if(/[A-Za-z]/.test(d[b])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(n)){v(d[b],n,t),P=!0;break}if(d[b+1]&&d[b+1].match(/\W/)){v(d[b],t.slice(b+2),t),P=!0;break}else v(d[b],e.strings[d[b]]?"":!0,t)}u=t.slice(-1)[0],!P&&u!=="-"&&(r[h+1]&&!/^(-|--)[^-]/.test(r[h+1])&&!e.bools[u]&&(!l[u]||!m(u))?(v(u,r[h+1],t),h+=1):r[h+1]&&/^(true|false)$/.test(r[h+1])?(v(u,r[h+1]==="true",t),h+=1):v(u,e.strings[u]?"":!0,t))}else if((!e.unknownFn||e.unknownFn(t)!==!1)&&s._.push(e.strings._||!w(t)?t:Number(t)),o.stopEarly){s._.push.apply(s._,r.slice(h+1));break}}return Object.keys(i).forEach(function(a){p(s,a.split("."))||(y(s,a.split("."),i[a]),(l[a]||[]).forEach(function(_){y(s,_.split("."),i[a])}))}),o["--"]?s["--"]=A.slice():A.forEach(function(a){s._.push(a)}),s},M}var L,Z;function ne(){if(Z)return L;Z=1;function p(o){return o.split(/:(.+)/).map(e=>e.trim())}function w(o){return o.split(/=(.+)/)}function f(o,e=p){let l={};var m=e(o);return l[m[0]]=m[1],l}function r(o){if(o==="")return null;let e={};return o.split(/&/).forEach(m=>{const i=m.split(/=/);e[i[0]]=i[1]}),e}return L={header:o=>{let e={};if(typeof o=="string")e=f(o);else return o.forEach(l=>{e={...e,...f(l,p)}}),e;return e},body:o=>{if(typeof o=="string")try{return JSON.parse(o)}catch{try{return r(o)}catch{return o}}else{let e={};return o.forEach(l=>{e={...e,...f(l,w)}}),e}},parseParamsField:r},L}var V,X;function we(){if(X)return V;X=1;const p=ne();return V=[{name:"url",alias:["url","curl"],description:"Url request",convertor:null},{name:"cookie",alias:["b","cookie"],description:"<name=data> Supply cookie with request. If no =, then specifies the cookie file to use (see -c).",convertor:null},{name:"cookie-jar",alias:["c","cookie-jar"],description:"<file name> File to save response cookies to.",convertor:null},{name:"data",alias:["d","data","data-raw","data-urlencode","data-binary"],description:"<data> Send specified data in POST request. Details provided below.",convertor:p.body},{name:"fail",alias:["f","fail"],description:"Fail silently (don't output HTML error form if returned).",convertor:null},{name:"form",alias:["F","form"],description:"<name=content> Submit form data.",convertor:null},{name:"header",alias:["H","header"],description:"<header> Headers to supply with request.",convertor:p.header},{name:"include",alias:["i","include"],description:"Include HTTP headers in the output.",convertor:null},{name:"head",alias:["I","head"],description:"Fetch headers only.",convertor:null},{name:"insecure",alias:["k","insecure"],description:"Allow insecure connections to succeed.",convertor:null},{name:"location",alias:["L","location"],description:"v",convertor:null},{name:"output",alias:["o","output"],description:"<file> Write output to . Can use --create-dirs in conjunction with this to create any directories specified in the -o path.",convertor:null},{name:"remote-name",alias:["remote-name","O"],description:"Write output to file named like the remote file (only writes to current directory).",convertor:null},{name:"silent",alias:["s","silent"],description:"Silent (quiet) mode. Use with -S to force it to show errors.",convertor:null},{name:"verbose",alias:["v","verbose"],description:"Provide more information (useful for debugging).",convertor:null},{name:"write-out",alias:["write-out","w"],description:`<format> Make curl display information on stdout after a completed transfer. See man page for more details on available variables. Convenient way to force curl to append a newline to output: -w "
" (can add to ~/.curlrc).`,convertor:null},{name:"method",alias:["X","request"],description:"The request method to use.",convertor:null},{name:"user-agent",alias:["A","user-agent"],description:"Specify the User-Agent send to the HTTP server.",convertor:null},{name:"referer",alias:["e","referer"],description:'Sends the "Referrer Page" information to the HTTP server.',convertor:null}],V}var D,Y;function ge(){return Y||(Y=1,D={matchArgv:function(p){return p.replace(/\\\n/g," ").match(/"([^"\\]*(?:\\.[^"\\]*)*)"|'([^'\\]*(?:\\.[^'\\]*)*)'|[^\s]+/g).map(w=>w.startsWith("'")&&w.endsWith("'")||w.startsWith('"')&&w.endsWith('"')?w.substring(1,w.length-1):w)}}),D}var k;function ye(){return k||(k=1,(function(p,w){const f=be(),r=ne(),o=we(),e=ge();p.exports=w.default=function(l){(typeof l=="string"||l instanceof String)&&(l=e.matchArgv(l));const m=f(l);let i={};if(m._[1]&&(i.url=m._[1].replace(/'/g,"")),o.forEach(s=>{let y=s.alias.map(v=>m[v]).filter(v=>v)[0];y&&(s.convertor?i[s.name]=s.convertor(y):i[s.name]=y)}),i.url){let s=new URL(i.url);i.url=s.origin+s.pathname;let g=new URLSearchParams(s.search);Array.from(g).length&&(i.params=r.parseParamsField(g.toString()))}return i.method||(i.method=i.data?"POST":"GET"),i}})($,$.exports)),$.exports}var Te=ye();const Ce=re(Te),Oe={class:"parse-curl-modal"},Ee={key:0,class:"parse-error"},Se={__name:"parse-curl-modal",emits:["parse","close"],setup(p,{expose:w,emit:f}){const{t:r}=te("views.workflow.components.node-form-drawer.http-node.parse-curl-modal"),o=f,e=U(!1),l=U(!1),m=U(""),i=U(""),s=U(r("ph_curl_example",{data:`'{"key":"value"}'`})),g=()=>{e.value=!0,m.value="",i.value="",l.value=!1},y=()=>{e.value=!1,m.value="",i.value="",o("close")},v=()=>{e.value=!1},A=async()=>{if(!m.value.trim()){i.value=r("msg_input_curl");return}i.value="";try{let h=m.value.trim();const t="__SINGLE_QUOTE_PLACEHOLDER__";let u=h.replace(/'\\''/g,t);u=u.replace(/\\\n/g," ").replace(/\\/g,"");let n=Ce(decodeURIComponent(u));if(n.params){const E={};for(const[S,d]of Object.entries(n.params)){const P=decodeURIComponent(S),b=typeof d=="string"?decodeURIComponent(d):d;E[P]=b}n.params=E}if(n.data&&(n.header&&n.header["Content-Type"]?n.header["Content-Type"].toLowerCase():"").includes("application/x-www-form-urlencoded")&&typeof n.data=="object"){const d={};for(const[P,b]of Object.entries(n.data)){const a=decodeURIComponent(P),_=typeof b=="string"?decodeURIComponent(b):b;d[a]=_}n.data=d}if(n=JSON.stringify(n).split(t).join("'"),n=JSON.parse(n),n.method!=="GET"&&n.method!=="POST"){i.value=r("msg_only_get_post");return}o("parse",n)}catch(h){i.value=h.message}};return w({show:g,hide:v,handleClose:y}),(h,t)=>{const u=ae,n=le,E=se,S=ie;return F(),K(S,{open:e.value,"onUpdate:open":t[2]||(t[2]=d=>e.value=d),title:q(r)("title_parse_curl"),width:680,"confirm-loading":l.value,onOk:A,onCancel:y,okText:q(r)("btn_parse"),cancelText:q(r)("btn_cancel")},{default:B(()=>[I("div",Oe,[x(u,{message:q(r)("msg_parse_curl_tip"),type:"info","show-icon":"",class:"mb16"},null,8,["message"]),x(E,{label:""},{default:B(()=>[x(n,{class:"curl-textarea",value:m.value,"onUpdate:value":t[0]||(t[0]=d=>m.value=d),placeholder:s.value,"auto-size":{minRows:8,maxRows:8},maxlength:5e4,"show-count":""},null,8,["value","placeholder"])]),_:1}),i.value?(F(),R("div",Ee,[x(u,{message:i.value,type:"error","show-icon":"",closable:"",onClose:t[1]||(t[1]=d=>i.value="")},null,8,["message"])])):W("",!0)])]),_:1},8,["open","title","confirm-loading","okText","cancelText"])}}},Ve=oe(Se,[["__scopeId","data-v-8f2710c4"]]),ee="data:image/svg+xml,%3csvg%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2032%2032'%20class='design-iconfont'%3e%3cpath%20d='M10%200V16M10%2032V16M10%2016H23'%20stroke='%23BFBFBF'%20stroke-linejoin='round'/%3e%3c/svg%3e",Pe={class:"sub-field-item"},Fe=["onClick"],xe=["onClick"],qe={__name:"subs-key",props:{data:{},level:{type:Number},typOptions:{type:Array}},setup(p){const{t:w}=te("views.workflow.components.node-form-drawer.http-node.subs-key"),f=p,r=J(()=>f.level>2?f.typOptions.filter(s=>s.value!="object"):f.typOptions),o=J(()=>f.level==2?"180px":"146px"),e=(s,g)=>{g[s].subs.push({key:"",value:"",subs:[],cu_key:Math.random()*1e4})},l=(s,g)=>{g.splice(s,1)},m=s=>{s.subs=[]},i=s=>s.typ=="object"&&f.level<=2;return(s,g)=>{const y=ue,v=ce,A=pe,h=me("SubsKey",!0);return F(!0),R(G,null,z(f.data,(t,u)=>(F(),R("div",{class:ve(["sub-field-item-box",`sub-field-item-box_${f.level}`]),key:t.cu_key},[I("div",Pe,[g[0]||(g[0]=I("img",{class:"fork-icon",src:ee,alt:""},null,-1)),x(y,{class:"mr12",style:j({width:o.value}),value:t.key,"onUpdate:value":n=>t.key=n,placeholder:q(w)("ph_input")},null,8,["style","value","onUpdate:value","placeholder"]),g[1]||(g[1]=I("img",{class:"fork-icon",src:ee,alt:""},null,-1)),x(A,{class:"mr12",onChange:n=>m(t),value:t.typ,"onUpdate:value":n=>t.typ=n,placeholder:q(w)("ph_select"),style:j({width:o.value})},{default:B(()=>[(F(!0),R(G,null,z(r.value,n=>(F(),K(v,{value:n.value},{default:B(()=>[he(_e(n.value),1)]),_:2},1032,["value"]))),256))]),_:1},8,["onChange","value","onUpdate:value","placeholder","style"]),i(t)?(F(),R("div",{key:0,class:"btn-hover-wrap mr12",onClick:n=>e(u,f.data)},[x(q(de))],8,Fe)):W("",!0),I("div",{class:"btn-hover-wrap",onClick:n=>l(u,f.data)},[x(q(fe))],8,xe)]),t.subs&&t.subs.length>0?(F(),K(h,{key:0,level:f.level+1,typOptions:f.typOptions,data:t.subs},null,8,["level","typOptions","data"])):W("",!0)],2))),128)}}},De=oe(qe,[["__scopeId","data-v-170ed0f0"]]);export{Ve as P,De as S,ee as _,Me as a,Be as b,Le as d,Ne as g,Ce as p,$e as s};
//# sourceMappingURL=subs-key-dcCZfb9g.js.map
