import{_ as R}from"./cu-scroll-BxmqGNDQ.js";import{i as V,e as $,f as U}from"./index-0buuOCvT.js";import{A as F}from"./add-collaborator-pMVAqT69.js";import{b as Y,h as z,bN as G}from"../../index-CuFGOJXl.js";import{e as J,ab as L,f as r,r as H,a1 as g,a2 as c,a5 as s,k as i,Y as o,ae as n,G as K,l as Q,u as l,a7 as P,F as f,_ as a}from"./vue-chunks-yZ4gwLzA.js";import{a2 as W,B as X,Y as Z,U as B,aa as tt,g as et,h as x,ab as st,ac as at,x as ot,M as D,a as M,O as N}from"./ui-antd-BKjlZQNA.js";import"./pull-up.esm-DIiTC7VE.js";import"./observe-dom.esm-B25JyVKH.js";import"./utils-smNh_pj2.js";const nt={class:"content-box"},it={key:0,class:"add-btn-block"},_t={class:"list-content"},lt={key:0,class:"user-block"},ct={class:"name-box"},dt={class:"name"},rt={class:"remark-text"},ut={key:0,class:"hover-btn-box"},pt={key:0},mt={key:1},yt={key:2},kt={key:1,class:"hover-btn-box"},vt={class:"role-menu-box"},ht=["onClick"],bt={class:"menu-header"},gt={key:0,class:"check-box"},ft=["onClick"],xt={class:"menu-header"},Ct={key:0,class:"check-box"},jt=["onClick"],Ot={class:"menu-header"},Pt={key:0,class:"check-box"},Bt={class:"hover-btn-box"},Dt={key:0},Mt={key:1},Nt={key:2},St=["onClick"],Tt={__name:"index",setup(It){const S=z(),C=J(()=>S.user_name),u=L().query,p=r(G(u.form_id)),m=r([]),T=H({object_id:u.form_id,object_type:3}),d=()=>{V({...T}).then(_=>{let t=_.data||[];m.value=t})};d();const j=r(null),I=()=>{j.value.show(m.value,[{object_id:+u.form_id,object_type:3,operate_rights:4}])},y=(_,t)=>{let k=t==4?"管理":t==2?"编辑":"查看";D.confirm({title:"提示?",icon:i(N),content:"确认修改该协作者权限为【"+k+"】",okText:"确认",cancelText:"取消",onOk:()=>{let v=[{object_id:+_.object_id,object_type:+_.object_type,operate_rights:+t}];$({identity_ids:_.identity_id,identity_type:_.identity_type,object_array:JSON.stringify(v)}).then(O=>{M.success("修改成功"),d()})},onCancel(){}})},q=_=>{D.confirm({title:"提示?",icon:i(N),content:"确认删除该条数据",okText:"确认",okType:"danger",cancelText:"取消",onOk:()=>{U({identity_id:_.identity_id,identity_type:_.identity_type,object_id:_.object_id,object_type:_.object_type}).then(t=>{M.success("删除成功"),d()})},onCancel(){}})},w=r([{title:"姓名",dataIndex:"name",key:"name"},{title:"权限",dataIndex:"operate_rights",key:"operate_rights"},{title:"操作",dataIndex:"action",key:"action",width:80}]);return(_,t)=>{const k=X,v=Z,O=tt,A=ot,E=R;return a(),g(E,null,{default:c(()=>[s("div",nt,[t[7]||(t[7]=s("div",{class:"page-title"},"权限管理",-1)),p.value==4?(a(),o("div",it,[i(k,{type:"primary",onClick:I,icon:Q(l(W))},{default:c(()=>[...t[0]||(t[0]=[K("添加协助者",-1)])]),_:1},8,["icon"])])):n("",!0),s("div",_t,[i(A,{columns:w.value,"data-source":m.value,pagination:!1},{bodyCell:c(({column:h,record:e})=>[h.key==="name"?(a(),o("div",lt,[i(v,{shape:"square",src:e.avatar,size:40},{icon:c(()=>[e.avatar?n("",!0):(a(),g(l(B),{key:0}))]),_:2},1032,["src"]),s("div",ct,[s("div",dt,P(e.user_name),1),s("div",rt,P(e.name),1)])])):n("",!0),h.key==="operate_rights"?(a(),o(f,{key:1},[p.value==2||e.user_name==C.value?(a(),o("div",ut,[e.operate_rights==4?(a(),o("span",pt,"管理")):n("",!0),e.operate_rights==2?(a(),o("span",mt,"编辑")):n("",!0),e.operate_rights==1?(a(),o("span",yt,"查看")):n("",!0)])):e.role_type==1||e.is_creator==1?(a(),o("div",kt,"管理")):(a(),g(O,{key:2,placement:"bottomRight",title:null,overlayInnerStyle:{padding:"2px"}},{content:c(()=>[s("div",vt,[s("div",{class:"role-menu",onClick:b=>y(e,4)},[s("div",bt,[i(l(B)),t[1]||(t[1]=s("span",{class:"title"},"管理",-1))]),t[2]||(t[2]=s("div",{class:"desc"},"可编辑，可删除，可查看",-1)),e.operate_rights==4?(a(),o("div",gt,[i(l(x))])):n("",!0)],8,ht),s("div",{class:"role-menu",onClick:b=>y(e,2)},[s("div",xt,[i(l(st)),t[3]||(t[3]=s("span",{class:"title"},"编辑",-1))]),t[4]||(t[4]=s("div",{class:"desc"},"可编辑，可查看",-1)),e.operate_rights==2?(a(),o("div",Ct,[i(l(x))])):n("",!0)],8,ft),s("div",{class:"role-menu",onClick:b=>y(e,1)},[s("div",Ot,[i(l(at)),t[5]||(t[5]=s("span",{class:"title"},"查看",-1))]),t[6]||(t[6]=s("div",{class:"desc"},"仅查看",-1)),e.operate_rights==1?(a(),o("div",Pt,[i(l(x))])):n("",!0)],8,jt)])]),default:c(()=>[s("div",Bt,[e.operate_rights==4?(a(),o("span",Dt,"管理")):n("",!0),e.operate_rights==2?(a(),o("span",Mt,"编辑")):n("",!0),e.operate_rights==1?(a(),o("span",Nt,"查看")):n("",!0),i(l(et))])]),_:2},1024))],64)):n("",!0),h.key==="action"?(a(),o(f,{key:2},[p.value==4&&e.user_name!=C.value?(a(),o(f,{key:0},[e.role_type!=1&&e.is_creator!=1?(a(),o("a",{key:0,onClick:b=>q(e)},"移除",8,St)):n("",!0)],64)):n("",!0)],64)):n("",!0)]),_:1},8,["columns","data-source"])])]),i(F,{onOk:d,ref_key:"addCollaboratorRef",ref:j},null,512)]),_:1})}}},Yt=Y(Tt,[["__scopeId","data-v-943909d0"]]);export{Yt as default};
