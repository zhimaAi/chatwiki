{"version":3,"file":"update-modal-D3ZNMX09.js","sources":["../../../../front-end/chat-ai-admin-vue/src/views/explore/plugins/components/update-modal.vue"],"sourcesContent":["<template>\r\n  <a-modal\r\n    v-model:open=\"open\"\r\n    :title=\"statusInput.title\"\r\n    :ok-text=\"statusInput.text\"\r\n    :confirm-loading=\"installing\"\r\n    @ok=\"install\"\r\n  >\r\n    <div class=\"plugin-box\">\r\n      <div class=\"base-info\">\r\n        <img class=\"avatar\" :src=\"plug.icon\"/>\r\n        <div class=\"info\">\r\n          <div class=\"head\">\r\n            <span class=\"name zm-line1\">\r\n              {{ plug.title }}\r\n              <span v-if=\"local\" class=\"version-tag\">v{{ local.version }} â†’ v{{ plug.latest_version }}</span>\r\n              <span v-else class=\"version-tag\">v{{ plug.latest_version }}</span>\r\n            </span>\r\n          </div>\r\n          <div class=\"source\">{{ plug.author }}</div>\r\n        </div>\r\n      </div>\r\n      <div class=\"desc zm-line2\">{{ plug.description }}</div>\r\n    </div>\r\n  </a-modal>\r\n</template>\r\n\r\n<script setup>\r\nimport {ref, computed} from 'vue';\r\nimport {message} from 'ant-design-vue';\r\nimport {downloadPlugin} from \"@/api/plugins/index.js\";\r\nimport { useI18n } from '@/hooks/web/useI18n';\r\n\r\nconst { t } = useI18n('views.explore.plugins.components.update-modal');\r\n\r\nconst emit = defineEmits(['ok'])\r\nconst open = ref(false)\r\nconst installing = ref(false)\r\nconst plug = ref({})\r\nconst version = ref({})\r\nconst local = ref(null)\r\n\r\nconst statusInput = computed(() => {\r\n  if (!local.value) {\r\n    return {\r\n      title: t('title_install_plugin'),\r\n      text: t('btn_install'),\r\n    }\r\n  } else {\r\n    return {\r\n      title: t('title_update_plugin'),\r\n      text: t('btn_update'),\r\n    }\r\n  }\r\n})\r\n\r\nfunction show(p, v, l = null) {\r\n  plug.value = p\r\n  version.value = v\r\n  local.value = l\r\n  open.value = true\r\n}\r\n\r\nfunction install() {\r\n  installing.value = true\r\n  downloadPlugin({\r\n    download_data: JSON.stringify([{\r\n      url: version.value.download_url,\r\n      version_id: version.value.id\r\n    }])\r\n  }).then(() => {\r\n    emit('ok')\r\n    open.value = false\r\n    message.success(t('msg_operation_completed', { operation: statusInput.value.text }))\r\n  }).finally(() => {\r\n    installing.value = false\r\n  })\r\n}\r\n\r\ndefineExpose({\r\n  show,\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.plugin-box {\r\n  padding: 24px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  gap: 12px;\r\n  border-radius: 12px;\r\n  border: 1px solid #E4E6EB;\r\n\r\n  .base-info {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 12px;\r\n\r\n    .avatar {\r\n      width: 62px;\r\n      height: 62px;\r\n      border-radius: 16px;\r\n      border: 1px solid #F0F0F0;\r\n    }\r\n\r\n    .head {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 4px;\r\n    }\r\n\r\n    .name {\r\n      color: #262626;\r\n      font-size: 16px;\r\n      font-weight: 600;\r\n    }\r\n\r\n    .source {\r\n      color: #8C8C8C;\r\n      font-size: 12px;\r\n      font-weight: 400;\r\n    }\r\n  }\r\n\r\n  .desc {\r\n    color: #595959;\r\n    font-size: 14px;\r\n    font-weight: 400;\r\n  }\r\n}\r\n\r\n.version-tag {\r\n  color: #ED744A;\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n}\r\n</style>\r\n"],"names":["t","useI18n","emit","__emit","open","ref","installing","plug","version","local","statusInput","computed","show","v","l","install","downloadPlugin","message","__expose","_createBlock","_component_a_modal","$event","_createElementVNode","_hoisted_1","_hoisted_2","_hoisted_4","_hoisted_5","_hoisted_6","_openBlock","_createElementBlock","_hoisted_7","_toDisplayString","_hoisted_8","_hoisted_9","_hoisted_10"],"mappings":"6oBAiCA,KAAM,CAAE,EAAAA,CAAC,EAAKC,EAAQ,+CAA+C,EAE/DC,EAAOC,EACPC,EAAOC,EAAI,EAAK,EAChBC,EAAaD,EAAI,EAAK,EACtBE,EAAOF,EAAI,EAAE,EACbG,EAAUH,EAAI,EAAE,EAChBI,EAAQJ,EAAI,IAAI,EAEhBK,EAAcC,EAAS,IACtBF,EAAM,MAMF,CACL,MAAOT,EAAE,qBAAqB,EAC9B,KAAMA,EAAE,YAAY,CAC1B,EARW,CACL,MAAOA,EAAE,sBAAsB,EAC/B,KAAMA,EAAE,aAAa,CAC3B,CAOC,EAED,SAASY,EAAK,EAAGC,EAAGC,EAAI,KAAM,CAC5BP,EAAK,MAAQ,EACbC,EAAQ,MAAQK,EAChBJ,EAAM,MAAQK,EACdV,EAAK,MAAQ,EACf,CAEA,SAASW,GAAU,CACjBT,EAAW,MAAQ,GACnBU,EAAe,CACb,cAAe,KAAK,UAAU,CAAC,CAC7B,IAAKR,EAAQ,MAAM,aACnB,WAAYA,EAAQ,MAAM,EAChC,CAAK,CAAC,CACN,CAAG,EAAE,KAAK,IAAM,CACZN,EAAK,IAAI,EACTE,EAAK,MAAQ,GACba,EAAQ,QAAQjB,EAAE,0BAA2B,CAAE,UAAWU,EAAY,MAAM,IAAI,CAAE,CAAC,CACrF,CAAC,EAAE,QAAQ,IAAM,CACfJ,EAAW,MAAQ,EACrB,CAAC,CACH,CAEA,OAAAY,EAAa,CACX,KAAAN,CACF,CAAC,+BAhFCO,EAuBUC,EAAA,CAtBA,KAAMhB,EAAA,qCAAAA,EAAI,MAAAiB,GACjB,MAAOX,EAAA,MAAY,MACnB,UAASA,EAAA,MAAY,KACrB,kBAAiBJ,EAAA,MACjB,KAAIS,cAEL,IAeM,CAfNO,EAeM,MAfNC,EAeM,CAdJD,EAYM,MAZNE,EAYM,CAXJF,EAAsC,MAAA,CAAjC,MAAM,SAAU,IAAKf,EAAA,MAAK,gBAC/Be,EASM,MATNG,EASM,CARJH,EAMM,MANNI,EAMM,CALJJ,EAIO,OAJPK,EAIO,KAHFpB,EAAA,MAAK,KAAK,EAAG,IAChB,CAAA,EAAYE,EAAA,OAAZmB,EAAA,EAAAC,EAA+F,OAA/FC,EAAuC,IAACC,EAAGtB,EAAA,MAAM,OAAO,EAAG,OAAIsB,EAAGxB,EAAA,MAAK,cAAc,EAAA,CAAA,IACrFqB,IAAAC,EAAkE,OAAlEG,EAAiC,IAACD,EAAGxB,EAAA,MAAK,cAAc,EAAA,CAAA,OAG5De,EAA2C,MAA3CW,EAA2CF,EAApBxB,EAAA,MAAK,MAAM,EAAA,CAAA,MAGtCe,EAAuD,MAAvDY,EAAuDH,EAAzBxB,EAAA,MAAK,WAAW,EAAA,CAAA"}