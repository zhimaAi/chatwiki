import{_ as M}from"./cu-scroll-BmUgdtgQ.js";import{b as U,a1 as A,a5 as J}from"../../index-OnalErht.js";import{p as T,am as Y,B as q,av as K,ah as Q,g as R,ar as W,bg as X,aj as Z,M as N,H as tt}from"./ui-antd-BgeWxFcI.js";import{f as p,Y as r,_ as o,k as i,a2 as l,a5 as s,F as v,a9 as j,ad as st,a1 as h,ae as a,a7 as n,u as k,G as u,l as ot}from"./vue-chunks-Ci-XTWEs.js";const et={class:"prompt-wrapper"},nt={class:"group-box"},rt={class:"group-list-box"},ct=["onClick"],it={class:"group-name"},lt={class:"name-text"},at={class:"content-box"},dt={class:"opration-btn-block"},ut={class:"content-scroll-box"},_t={key:0,class:"loading-box"},pt={class:"prompt-list-box"},vt={class:"prompt-header"},ht={class:"prompt-title"},kt={key:0,class:"prompt-type diy"},mt={key:1,class:"prompt-type"},yt={class:"title"},gt={class:"right-btn-box"},bt=["onClick"],ft=["onClick"],Ct={class:"prompt-content-box"},xt={key:0,class:"prompt-content"},Ht=["onClick"],jt={key:1,class:"structure-list-box"},Lt={class:"structure-list"},wt={class:"structure-title"},Ot={class:"structure-content"},Bt={class:"structure-list"},Nt={class:"structure-title"},It={class:"structure-content"},$t=["onClick"],Gt={class:"structure-list"},St={class:"structure-title"},Vt={class:"structure-content"},Pt={key:0,class:"structure-list"},zt={class:"structure-title"},Dt={class:"structure-content"},Et={class:"structure-list"},Ft={class:"structure-title"},Mt={class:"structure-content"},Ut={class:"structure-list"},At={class:"structure-title"},Jt={class:"structure-content"},Tt={class:"structure-title"},Yt={class:"structure-content"},qt={class:"empty-content"},Kt={__name:"index",emits:["ok"],setup(Qt,{expose:I,emit:$}){const m=p(!1),G=$,S=()=>{m.value=!0,w(),C()},V=c=>{N.confirm({title:"导入确认",icon:ot(tt),content:"确定将该条提示导入",onOk(){G("ok",c),m.value=!1},onCancel(){}})},g=p(-1),L=p([]),w=()=>{A().then(c=>{L.value=[{id:-1,group_name:"全部"},{id:0,group_name:"默认分组"},...c.data]})},P=c=>{g.value=c.id,C()},b=p([]),f=p(!1),y=p(!1),z=()=>{y.value=!0,C(),w()},C=()=>{f.value=!0,J({group_id:g.value,page:1,size:9999}).then(c=>{let e=c.data.list||[];e=e.map(_=>({..._,isHide:!0,prompt_struct:_.prompt_struct?JSON.parse(_.prompt_struct):{}})),b.value=e}).finally(()=>{f.value=!1,y.value=!1})},x=c=>{c.isHide=!c.isHide},O=()=>{window.open("#/user/prompt-library")};return I({show:S}),(c,e)=>{const _=T,B=M,H=q,D=Q,E=Z,F=N;return o(),r("div",null,[i(F,{open:m.value,"onUpdate:open":e[0]||(e[0]=t=>m.value=t),title:null,width:950,footer:null,wrapClassName:"add-prommpt-modal"},{default:l(()=>[s("div",et,[s("div",nt,[e[1]||(e[1]=s("div",{class:"main-title"},"导入提示词",-1)),i(B,{style:{height:"480px"}},{default:l(()=>[s("div",rt,[(o(!0),r(v,null,j(L.value,t=>(o(),r("div",{class:st(["group-list",{active:t.id==g.value}]),onClick:d=>P(t),key:t.id},[s("div",it,[s("div",lt,n(t.group_name),1),t.group_desc?(o(),h(_,{key:0},{title:l(()=>[u(n(t.group_desc),1)]),default:l(()=>[i(k(Y))]),_:2},1024)):a("",!0)])],10,ct))),128))])]),_:1})]),s("div",at,[s("div",dt,[i(H,{loading:y.value,onClick:z},{default:l(()=>[y.value?a("",!0):(o(),h(k(K),{key:0})),e[2]||(e[2]=u("刷新列表"))]),_:1,__:[2]},8,["loading"]),i(H,{onClick:O},{default:l(()=>e[3]||(e[3]=[u("管理知识库")])),_:1,__:[3]})]),s("div",ut,[i(B,{style:{padding:"0 24px"}},{default:l(()=>[f.value?(o(),r("div",_t,[i(D)])):a("",!0),s("div",pt,[(o(!0),r(v,null,j(b.value,t=>(o(),r("div",{class:"prompt-list",key:t.id},[s("div",vt,[s("div",ht,[t.prompt_type==0?(o(),r("div",kt,"自定义")):a("",!0),t.prompt_type==1?(o(),r("div",mt,"结构化")):a("",!0),s("div",yt,n(t.title),1)]),s("div",gt,[i(_,{title:t.isHide?"展开":"收起"},{default:l(()=>[s("div",{class:"hover-btn-box",onClick:d=>x(t)},[t.isHide?(o(),h(k(R),{key:0})):(o(),h(k(W),{key:1}))],8,bt)]),_:2},1032,["title"]),s("div",{class:"hover-btn-box primary",onClick:d=>V(t)},[i(k(X)),e[4]||(e[4]=u("导入 "))],8,ft)])]),s("div",Ct,[t.prompt_type==0?(o(),r("div",xt,[t.isHide?(o(),r(v,{key:0},[u(n(t.prompt.slice(0,200))+" ",1),t.prompt.length>200?(o(),r("span",{key:0,onClick:d=>x(t),style:{cursor:"pointer"}},"...",8,Ht)):a("",!0)],64)):(o(),r(v,{key:1},[u(n(t.prompt),1)],64))])):(o(),r("div",jt,[s("div",Lt,[s("div",wt,n(t.prompt_struct.role.subject),1),s("div",Ot,n(t.prompt_struct.role.describe),1)]),s("div",Bt,[s("div",Nt,n(t.prompt_struct.task.subject),1),s("div",It,[u(n(t.prompt_struct.task.describe)+" ",1),t.isHide?(o(),r("span",{key:0,onClick:d=>x(t),style:{cursor:"pointer"}},"...",8,$t)):a("",!0)])]),t.isHide?a("",!0):(o(),r(v,{key:0},[s("div",Gt,[s("div",St,n(t.prompt_struct.constraints.subject),1),s("div",Vt,n(t.prompt_struct.constraints.describe),1)]),t.prompt_struct.skill?(o(),r("div",Pt,[s("div",zt,n(t.prompt_struct.skill.subject),1),s("div",Dt,n(t.prompt_struct.skill.describe),1)])):a("",!0),s("div",Et,[s("div",Ft,n(t.prompt_struct.output.subject),1),s("div",Mt,n(t.prompt_struct.output.describe),1)]),s("div",Ut,[s("div",At,n(t.prompt_struct.tone.subject),1),s("div",Jt,n(t.prompt_struct.tone.describe),1)]),(o(!0),r(v,null,j(t.prompt_struct.custom,d=>(o(),r("div",{class:"structure-list",key:d.subject},[s("div",Tt,n(d.subject),1),s("div",Yt,n(d.describe),1)]))),128))],64))]))])]))),128))]),b.value.length==0?(o(),h(E,{key:1,style:{"padding-top":"100px"}},{description:l(()=>[s("div",qt,[e[6]||(e[6]=s("div",{class:"title"},"你还没有添加任何提示词",-1)),e[7]||(e[7]=s("div",{class:"desc"}," 可以在系统设置-提示词库中维护提示词模板，然后再聊天机器人和工作流中引用 ",-1)),s("div",null,[i(H,{type:"primary",onClick:O},{default:l(()=>e[5]||(e[5]=[u("立即添加")])),_:1,__:[5]})])])]),_:1})):a("",!0)]),_:1})])])])]),_:1},8,["open"])])}}},ts=U(Kt,[["__scopeId","data-v-1a540f46"]]);export{ts as _};
