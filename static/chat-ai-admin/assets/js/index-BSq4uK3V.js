import{_ as A}from"./cu-scroll-CpIj948h.js";import{i as V,e as $,f as U}from"./index-o_l8g-wS.js";import{A as F}from"./add-collaborator-Ww1-CyL9.js";import{d as z,bR as G}from"../../index-DSFcP5NQ.js";import{c as J,ah as L,r as d,E as X,e as g,t as c,p as s,y as i,a,q as n,_ as H,G as K,u as l,v as D,F as f,b as o}from"./vue-chunks-BdaA73Wf.js";import{_ as Q}from"./emoji-mart-BBMRoEa3.js";import{a1 as W,B as Y,X as Z,U as P,a9 as tt,D as et,h as x,aa as st,ab as ot,x as at,M as B,b as M,O as S}from"./ui-antd-Dl1wwwCD.js";import"./pull-up.esm-DIiTC7VE.js";import"./observe-dom.esm-B25JyVKH.js";import"./neo4j-MWxXN7EM.js";import"./editor-cherry-CFIsbKoN.js";import"./lodash-Bm5sK6rN.js";import"./elkjs-BN8GIjVH.js";import"./utils-CvB22N-W.js";import"./other-LrIFyvU9.js";const nt={class:"content-box"},it={key:0,class:"add-btn-block"},_t={class:"list-content"},lt={key:0,class:"user-block"},ct={class:"name-box"},rt={class:"name"},dt={class:"remark-text"},ut={key:0,class:"hover-btn-box"},pt={key:0},mt={key:1},yt={key:2},kt={key:1,class:"hover-btn-box"},vt={class:"role-menu-box"},ht=["onClick"],bt={class:"menu-header"},gt={key:0,class:"check-box"},ft=["onClick"],xt={class:"menu-header"},Ct={key:0,class:"check-box"},jt=["onClick"],Ot={class:"menu-header"},Dt={key:0,class:"check-box"},Pt={class:"hover-btn-box"},Bt={key:0},Mt={key:1},St={key:2},Tt=["onClick"],qt={__name:"index",setup(Et){const T=z(),C=J(()=>T.user_name),u=L().query,p=d(G(u.form_id)),m=d([]),q=X({object_id:u.form_id,object_type:3}),r=()=>{V({...q}).then(_=>{let t=_.data||[];m.value=t})};r();const j=d(null),E=()=>{j.value.show(m.value,[{object_id:+u.form_id,object_type:3,operate_rights:4}])},y=(_,t)=>{let k=t==4?"管理":t==2?"编辑":"查看";B.confirm({title:"提示?",icon:i(S),content:"确认修改该协作者权限为【"+k+"】",okText:"确认",cancelText:"取消",onOk:()=>{let v=[{object_id:+_.object_id,object_type:+_.object_type,operate_rights:+t}];$({identity_ids:_.identity_id,identity_type:_.identity_type,object_array:JSON.stringify(v)}).then(O=>{M.success("修改成功"),r()})},onCancel(){}})},I=_=>{B.confirm({title:"提示?",icon:i(S),content:"确认删除该条数据",okText:"确认",okType:"danger",cancelText:"取消",onOk:()=>{U({identity_id:_.identity_id,identity_type:_.identity_type,object_id:_.object_id,object_type:_.object_type}).then(t=>{M.success("删除成功"),r()})},onCancel(){}})},N=d([{title:"姓名",dataIndex:"name",key:"name"},{title:"权限",dataIndex:"operate_rights",key:"operate_rights"},{title:"操作",dataIndex:"action",key:"action",width:80}]);return(_,t)=>{const k=Y,v=Z,O=tt,R=at,w=A;return o(),g(w,null,{default:c(()=>[s("div",nt,[t[7]||(t[7]=s("div",{class:"page-title"},"权限管理",-1)),p.value==4?(o(),a("div",it,[i(k,{type:"primary",onClick:E,icon:K(l(W))},{default:c(()=>[...t[0]||(t[0]=[H("添加协助者",-1)])]),_:1},8,["icon"])])):n("",!0),s("div",_t,[i(R,{columns:N.value,"data-source":m.value,pagination:!1},{bodyCell:c(({column:h,record:e})=>[h.key==="name"?(o(),a("div",lt,[i(v,{shape:"square",src:e.avatar,size:40},{icon:c(()=>[e.avatar?n("",!0):(o(),g(l(P),{key:0}))]),_:2},1032,["src"]),s("div",ct,[s("div",rt,D(e.user_name),1),s("div",dt,D(e.name),1)])])):n("",!0),h.key==="operate_rights"?(o(),a(f,{key:1},[p.value==2||e.user_name==C.value?(o(),a("div",ut,[e.operate_rights==4?(o(),a("span",pt,"管理")):n("",!0),e.operate_rights==2?(o(),a("span",mt,"编辑")):n("",!0),e.operate_rights==1?(o(),a("span",yt,"查看")):n("",!0)])):e.role_type==1||e.is_creator==1?(o(),a("div",kt,"管理")):(o(),g(O,{key:2,placement:"bottomRight",title:null,overlayInnerStyle:{padding:"2px"}},{content:c(()=>[s("div",vt,[s("div",{class:"role-menu",onClick:b=>y(e,4)},[s("div",bt,[i(l(P)),t[1]||(t[1]=s("span",{class:"title"},"管理",-1))]),t[2]||(t[2]=s("div",{class:"desc"},"可编辑，可删除，可查看",-1)),e.operate_rights==4?(o(),a("div",gt,[i(l(x))])):n("",!0)],8,ht),s("div",{class:"role-menu",onClick:b=>y(e,2)},[s("div",xt,[i(l(st)),t[3]||(t[3]=s("span",{class:"title"},"编辑",-1))]),t[4]||(t[4]=s("div",{class:"desc"},"可编辑，可查看",-1)),e.operate_rights==2?(o(),a("div",Ct,[i(l(x))])):n("",!0)],8,ft),s("div",{class:"role-menu",onClick:b=>y(e,1)},[s("div",Ot,[i(l(ot)),t[5]||(t[5]=s("span",{class:"title"},"查看",-1))]),t[6]||(t[6]=s("div",{class:"desc"},"仅查看",-1)),e.operate_rights==1?(o(),a("div",Dt,[i(l(x))])):n("",!0)],8,jt)])]),default:c(()=>[s("div",Pt,[e.operate_rights==4?(o(),a("span",Bt,"管理")):n("",!0),e.operate_rights==2?(o(),a("span",Mt,"编辑")):n("",!0),e.operate_rights==1?(o(),a("span",St,"查看")):n("",!0),i(l(et))])]),_:2},1024))],64)):n("",!0),h.key==="action"?(o(),a(f,{key:2},[p.value==4&&e.user_name!=C.value?(o(),a(f,{key:0},[e.role_type!=1&&e.is_creator!=1?(o(),a("a",{key:0,onClick:b=>I(e)},"移除",8,Tt)):n("",!0)],64)):n("",!0)],64)):n("",!0)]),_:1},8,["columns","data-source"])])]),i(F,{onOk:r,ref_key:"addCollaboratorRef",ref:j},null,512)]),_:1})}}},Kt=Q(qt,[["__scopeId","data-v-943909d0"]]);export{Kt as default};
//# sourceMappingURL=index-BSq4uK3V.js.map
