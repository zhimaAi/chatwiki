import{b as N,d as O}from"../../index-CPkdGIiL.js";import{f as _,a1 as f,_ as a,a2 as h,k as i,o as T,ab as U,Y as p,a5 as t,u as b,aa as $,a7 as o,ae as D,G as l,F}from"./vue-chunks-Ci-XTWEs.js";import{y as j,M as q,d as L,ax as z,B as E,x as G,ay as K}from"./ui-antd-Bw8cEW5z.js";import{U as P}from"./update-modal-jnPLYoyk.js";import{L as S}from"./loading-box-B8yVBXxh.js";import{g as A}from"./index-DNepwrz3.js";import"./utils-ChQO-_r6.js";/* empty css                                                                     */const J={__name:"version-modal",setup(V,{expose:w}){const u=_(!1),r=_([]),c=[{title:"版本",dataIndex:"version",width:100},{title:"更新时间",dataIndex:"update_time_text",width:160},{title:"发布者",dataIndex:"author",width:100}];function y(v=[]){r.value=v,u.value=!0}return w({show:y}),(v,s)=>{const k=j,M=q;return a(),f(M,{title:"版本历史",open:u.value,"onUpdate:open":s[0]||(s[0]=x=>u.value=x),width:"500px",footer:null},{default:h(()=>[i(k,{columns:c,"data-source":r.value},null,8,["data-source"])]),_:1},8,["open"])}}},Q={class:"_container _plugin-detail-cont"},W={class:"header"},X={key:1,class:"content"},Z={class:"base-info"},tt={class:"top"},et=["src"],st={class:"info"},ot={class:"left"},at={class:"name zm-line1"},nt={class:"source"},lt={class:"right"},it=["href"],dt={class:"desc"},_t={class:"action-box"},ut={class:"left"},rt={class:"detail-info"},ct={class:"left"},vt={key:0,class:"main-block"},mt={class:"text-cont"},pt={class:"main-block"},ft=["innerHTML"],ht={class:"right"},yt={class:"main-block"},kt={class:"text-cont flex-center"},xt=["src"],gt={class:"main-block"},bt={class:"version-info"},wt={class:"text-cont"},Mt={class:"main-block"},Yt={class:"text-cont"},Bt={__name:"detail",setup(V){const w=$(),u=U(),r=_(!0),c=_(!0),y=_(null),v=_(null),s=_({});T(()=>{var n;y.value=(n=u.query)==null?void 0:n.name,k()});function k(){c.value=!0,A({name:y.value}).then(n=>{var d,g;let e=(n==null?void 0:n.data)||{};s.value=e.remote,s.value.local=e.local,s.value.has_update=((d=e.local)==null?void 0:d.version)!=((g=e.remote)==null?void 0:g.latest_version),s.value.latest_version_history.map(m=>{m.update_time_text=L.unix(m.update_time).format("YYYY-MM-DD HH:mm"),m.author=s.value.author})}).finally(()=>{c.value=!1})}function M(){v.value.show(s.value.latest_version_history||[])}function x(){let{latest_version_detail:n,local:e}=s.value;r.value.show(s.value,n,e)}return(n,e)=>{var Y,B,H,R,C,I;const d=E,g=O,m=G;return a(),p("div",Q,[t("div",W,[i(b(z),{onClick:e[0]||(e[0]=Ht=>b(w).back()),class:"back-icon"}),e[1]||(e[1]=t("span",{class:"title"},"插件详情",-1))]),c.value?(a(),f(S,{key:0})):(a(),p("div",X,[t("div",Z,[t("div",tt,[t("img",{class:"avatar",src:s.value.icon},null,8,et),t("div",st,[t("div",ot,[t("div",at,o(s.value.title),1),t("div",nt,o(s.value.author),1)]),t("div",lt,[s.value.help_url?(a(),p("a",{key:0,href:s.value.help_url,target:"_blank"},[i(d,{type:"primary",ghost:""},{default:h(()=>e[2]||(e[2]=[l("使用说明")])),_:1,__:[2]})],8,it)):D("",!0),s.value.local?(a(),p(F,{key:1},[s.value.has_update?(a(),f(d,{key:0,type:"primary",onClick:x},{default:h(()=>e[3]||(e[3]=[l("更 新")])),_:1,__:[3]})):(a(),f(d,{key:1},{default:h(()=>e[4]||(e[4]=[l("已安装")])),_:1,__:[4]}))],64)):(a(),f(d,{key:2,type:"primary",onClick:x},{default:h(()=>e[5]||(e[5]=[l("安 装")])),_:1,__:[5]}))])])]),t("div",dt,o(s.value.description),1),t("div",_t,[t("div",ut,[i(g,{name:"download"}),l(" "+o(s.value.installed_count||0),1)]),e[6]||(e[6]=t("div",{class:"right"},null,-1))])]),t("div",rt,[t("div",ct,[s.value.overview?(a(),p("div",vt,[e[7]||(e[7]=t("div",{class:"main-tit"},"插件概叙",-1)),t("pre",mt,o(s.value.overview),1)])):D("",!0),t("div",pt,[e[8]||(e[8]=t("div",{class:"main-tit"},"使用说明",-1)),t("pre",{class:"text-cont",innerHTML:s.value.introduction},null,8,ft)])]),t("div",ht,[t("div",yt,[e[9]||(e[9]=t("div",{class:"main-tit"},"类别",-1)),t("div",kt,[t("img",{class:"cate-icon",src:s.value.filter_type_icon},null,8,xt),l(" "+o(s.value.filter_type_title),1)])]),t("div",gt,[e[11]||(e[11]=t("div",{class:"main-tit"},"版本",-1)),t("div",bt,[l(" v"+o(s.value.latest_version)+" ",1),i(m,{type:"vertical"}),l(" "+o(s.value.author)+" "+o(b(L).unix((B=(Y=s.value)==null?void 0:Y.latest_version_detail)==null?void 0:B.update_time).format("YYYY-MM-DD HH:mm")),1)]),t("div",wt,o((R=(H=s.value)==null?void 0:H.latest_version_detail)==null?void 0:R.upgrade_description),1),t("div",null,[t("a",{onClick:M},[e[10]||(e[10]=l("版本历史 ")),i(b(K))])])]),t("div",Mt,[e[12]||(e[12]=t("div",{class:"main-tit"},"权限列表",-1)),t("div",Yt,"最大内存 "+o((I=(C=s.value)==null?void 0:C.latest_version_detail)==null?void 0:I.memory)+"MB",1)])])])])),i(J,{ref_key:"versionRef",ref:v},null,512),i(P,{ref_key:"updateRef",ref:r,onOk:k},null,512)])}}},Tt=N(Bt,[["__scopeId","data-v-08309446"]]);export{Tt as default};
