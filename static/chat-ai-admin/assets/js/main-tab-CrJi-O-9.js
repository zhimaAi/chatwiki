import{aa as h,f as i,o as v,a1 as x,_ as b}from"./vue-chunks-Ci-XTWEs.js";import{L as f}from"./list-tabs-Bu_nGTVN.js";import{b as d}from"./index-DNepwrz3.js";const z={__name:"main-tab",emits:["change"],setup(_,{expose:c,emit:r}){const p=r,a=h(),l=i(localStorage.getItem("zm:explore:active")||"1"),o=i([{title:"模板广场",value:"4"},{title:"功能",value:"1"},{title:`插件(${localStorage.getItem("zm:explore:plugins:count")||"0"})`,value:"2"},{title:"插件广场",value:"3"}]);v(()=>{u()});function s(e){switch(l.value=e.toString(),localStorage.setItem("zm:explore:active",e),p("change",e),Number(e)){case 1:a.push({path:"/explore/index"});break;case 2:case 3:a.push({path:"/plugins/index",query:{active:e}});break;case 4:a.push({path:"/templates/index"});break}}function u(){d().then(e=>{let t=(e==null?void 0:e.data)||[],n=o.value.find(g=>g.value==2);n.title=`插件(${t.length})`,localStorage.setItem("zm:explore:plugins:count",t.length)})}function m(){u()}return c({change:s,update:m}),(e,t)=>(b(),x(f,{tabs:o.value,value:l.value,"onUpdate:value":t[0]||(t[0]=n=>l.value=n),onChange:s},null,8,["tabs","value"]))}};export{z as _};
