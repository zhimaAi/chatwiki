import{_ as F}from"./cu-scroll-4Aau5PhQ.js";import{Y as b,_ as r,F as $,a9 as q,a5 as s,k as h,a7 as M,G as d,ad as N,a1 as x,ae as S,a2 as y,B as A,f as v,o as R,ab as V,aa as z,l as U}from"./vue-chunks-Ci-XTWEs.js";import{g as O,i as T,s as B}from"./index-BWYmMYOg.js";import{b as L,d as D}from"../../index-CuuB1UbP.js";import{X as G,p as H,ag as W,k as X,B as Y,a as E,M as j,H as J}from"./ui-antd-DhoCz7ZP.js";import{L as K}from"./list-empty-C7rcwnui.js";import"./pull-up.esm-D94Swpvl.js";import"./observe-dom.esm-CyCedSm-.js";import"./utils-ChQO-_r6.js";const P={class:"list-box"},Q=["onClick"],Z={class:"explore-info"},tt={class:"explore-info-content"},et={class:"explore-title"},ot={class:"item-body"},st={class:"explore-desc"},nt={class:"support-box"},it={__name:"index",props:{list:{type:Array,default:()=>[]}},emits:["switchChange","fixedMenuChange","clickItem"],setup(I,{emit:g}){const _=g,u=I,f=(l,i)=>_("switchChange",l,i),k=(l,i)=>_("fixedMenuChange",l,i),a=(l,i)=>{try{const c=l==null?void 0:l.target;if(c&&typeof c.closest=="function"&&c.closest(".no-bubble"))return}catch{}_("clickItem",i)};return(l,i)=>{const c=D,m=G,w=H,C=W;return r(),b("div",P,[(r(!0),b($,null,q(u.list,t=>{var e,n;return r(),b("div",{class:"list-item-wrapper",key:t.id},[s("div",{class:"list-item",onClick:o=>a(o,t)},[s("div",Z,[h(c,{class:"explore-icon",name:t.ability_type,style:{"font-size":"62px",color:"white"}},null,8,["name"]),s("div",tt,[s("div",et,M(t.explore_name||t.name),1),i[2]||(i[2]=s("div",{class:"explore-type"},"ChatWiki",-1))])]),s("div",ot,[s("div",st,M(t.explore_intro||t.introduction),1),s("span",nt,[(r(!0),b($,null,q(t.support_channels_list,o=>(r(),b("span",{key:o,class:"support-item"},[h(c,{name:"support",class:"icon"}),d(" "+M(o),1)]))),128))])]),s("div",{class:N(["item-footer",{"no-footer":t.ability_type=="robot_subscribe_reply"}])},[t.ability_type!="robot_subscribe_reply"?(r(),x(m,{key:0,checked:((e=t.robot_config)==null?void 0:e.switch_status)=="1","checked-children":"开","un-checked-children":"关",class:"no-bubble",onChange:o=>f(t,o)},null,8,["checked","onChange"])):S("",!0),t.ability_type!="robot_subscribe_reply"?(r(),x(C,{key:1,class:"fixed-menu-box no-bubble",checked:((n=t.robot_config)==null?void 0:n.fixed_menu)=="1",onClick:i[0]||(i[0]=A(()=>{},["stop"])),onMousedown:i[1]||(i[1]=A(()=>{},["stop"])),onChange:o=>{var p;return k(t,((p=o==null?void 0:o.target)==null?void 0:p.checked)===!0)}},{default:y(()=>[h(w,{title:"勾选后增加机器人—级菜单固定显示"},{default:y(()=>i[3]||(i[3]=[d(" 固定菜单 ")])),_:1,__:[3]})]),_:2},1032,["checked","onChange"])):S("",!0)],2)],8,Q)])}),128))])}}},at=L(it,[["__scopeId","data-v-fc69e5d3"]]),lt={class:"user-model-page"},rt={class:"list-wrapper"},ct={class:"content-wrapper"},_t={"bg-color":"#f5f9ff",class:"explore-page"},pt={class:"explore-page-body"},dt={class:"list-group-box"},ut={class:"empty-content"},bt={__name:"index",setup(I){const g=v([{title:"功能",value:"1"},{title:"插件",value:"2"}]),_=V(),u=z(),f=v([]),k=()=>{g.value=[{title:"功能",value:"1"},{title:"插件",value:"2"}]},a=v("");let l=v([]);const i=()=>{O({robot_id:a.value}).then(t=>{const e=((t==null?void 0:t.data)||[]).map(n=>({...n,explore_name:n.name,explore_intro:n.introduction}));f.value=e,l.value=(t==null?void 0:t.data)||[],k()})},c=(t,e)=>{const n=e?"1":"0";if(n=="0"){let o="关闭后，触发了关键词不会再回复指定内容";t.ability_type=="robot_smart_menu"&&(o="关闭后，其他回复智能菜单的规则触发后都不再回复"),t.ability_type=="robot_auto_reply"&&(o="关闭后，触发了关键词以及收到消息回复都不会再回复指定的内容"),j.confirm({title:"确认关闭吗？",icon:U(J),content:o,onOk:()=>{B({robot_id:a.value,ability_type:t.ability_type,switch_status:n}).then(p=>{p&&p.res==0&&(E.success("操作成功"),t.robot_config&&(t.robot_config.switch_status=n),t.ability_type!="robot_subscribe_reply"&&window.dispatchEvent(new CustomEvent("robotAbilityUpdated",{detail:{robotId:a.value}})))})}});return}B({robot_id:a.value,ability_type:t.ability_type,switch_status:n}).then(o=>{o&&o.res==0&&(E.success("操作成功"),t.robot_config&&(t.robot_config.switch_status=n),window.dispatchEvent(new CustomEvent("robotAbilityUpdated",{detail:{robotId:a.value}})))})},m=(t,e)=>{const n=e?"1":"0";T({robot_id:a.value,ability_type:t.ability_type,fixed_menu:n}).then(o=>{o&&o.res==0&&(E.success("操作成功"),t.robot_config&&(t.robot_config.fixed_menu=n),window.dispatchEvent(new CustomEvent("robotAbilityUpdated",{detail:{robotId:a.value}})))})},w=t=>{let e;if(t.ability_type=="robot_auto_reply")e=u.resolve({path:"/robot/ability/auto-reply",query:{id:a.value,robot_key:_.query.robot_key}});else if(t.ability_type=="robot_subscribe_reply"){u.push({path:"/explore/index/subscribe-reply",query:{id:a.value,robot_key:_.query.robot_key}});return}else t.ability_type=="robot_smart_menu"&&(e=u.resolve({path:"/robot/ability/smart-menu",query:{id:a.value,robot_key:_.query.robot_key}}));window.open(e.href,"_blank")},C=()=>{const t=u.resolve({path:"/explore/index",query:{tab:"1"}});window.open(t.href,"_blank")};return R(()=>{a.value=_.query.id,i()}),(t,e)=>{const n=X,o=Y,p=F;return r(),b("div",lt,[e[4]||(e[4]=s("div",{class:"page-title"},"功能中心",-1)),s("div",rt,[s("div",ct,[h(n,{"show-icon":"",style:{"align-items":"baseline"}},{message:y(()=>e[0]||(e[0]=[s("div",null,[d(" 查询已经启用的功能，可选择在一级菜单中固定，快捷开启和关闭功能 更多功能可到 "),s("a",{href:"#/explore/index",target:"_blank"},"探索>功能中心"),d(" 中添加 ")],-1)])),_:1}),s("div",_t,[s("div",pt,[s("div",dt,[h(p,{style:{"padding-right":"16px",flex:"1"}},{default:y(()=>[f.value.length==0?(r(),x(K,{key:0,size:"250",class:"empty-box"},{default:y(()=>[s("div",ut,[e[2]||(e[2]=s("p",{class:"empty-title"},"暂未添加功能",-1)),e[3]||(e[3]=s("p",{class:"empty-desc"},[d("更多功能可到 "),s("a",{href:"#/explore/index",target:"_blank"},"探索>功能中心"),d(" 去添加")],-1)),h(o,{type:"primary",onClick:C},{default:y(()=>e[1]||(e[1]=[d("去添加")])),_:1,__:[1]})])]),_:1})):(r(),x(at,{key:1,list:f.value,onSwitchChange:c,onFixedMenuChange:m,onClickItem:w},null,8,["list"]))]),_:1})])])])])])])}}},Ct=L(bt,[["__scopeId","data-v-a514b274"]]);export{Ct as default};
