import{s as w}from"./index-BsqRrb1q.js";import{_ as I}from"../../index-C1Xsov4S.js";import{k as x,F as S,b as k,I as y,M as D,a as f}from"./ui-antd-D64OvTpt.js";import{f as m,r as M,a1 as O,_ as C,a2 as l,k as t,a5 as c}from"./vue-chunks-DCKTEHpB.js";const F={__name:"feishu-config-modal",emits:["change"],setup(U,{expose:d,emit:_}){const v=_,n=m({}),r=m(!1),i=m(!1),e=M({});function g(s={}){n.value=s,Object.assign(e,{name:"",appid:"",app_secret:"",is_default:!1}),(!n.value||!Object.keys(n.value).length)&&(e.is_default=!0),r.value=!0}function P(){try{if(i.value=!0,!e.name)throw"请输入凭证名称";if(n.value[e.name])throw"凭证名称已存在";if(!e.appid)throw"请输入APP ID";if(!e.app_secret)throw"请输入APP Secret";w({name:"feishu_bitable",data:JSON.stringify({...n.value,[e.name]:e})}).then(s=>{v("change"),r.value=!1,f.success("已保存")}).finally(()=>{i.value=!1})}catch(s){i.value=!1,f.error(s)}}return d({show:g}),(s,a)=>{const A=x,u=y,p=k,b=S,h=D;return C(),O(h,{open:r.value,"onUpdate:open":a[3]||(a[3]=o=>r.value=o),"confirm-loading":i.value,title:"API Key授权配置",width:"620px",onOk:P},{default:l(()=>[t(A,{type:"info","show-icon":"",message:"配置凭据后，工作流可直接调用此插件"}),t(b,{class:"mt16",model:e,"label-col":{span:4},"wrapper-col":{span:20}},{default:l(()=>[t(p,{label:"凭证名称",name:"name",rules:[{required:!0,message:"请输入凭证名称!"}]},{default:l(()=>[t(u,{value:e.name,"onUpdate:value":a[0]||(a[0]=o=>e.name=o),valueModifiers:{trim:!0},maxlength:16,placeholder:"请输入凭证名称"},null,8,["value"]),a[4]||(a[4]=c("div",{class:"tip-desc"},"仅用于区分多个授权配置的名称，不用于接口调用",-1))]),_:1}),t(p,{label:"APP ID",name:"appid",rules:[{required:!0,message:"请输入APP ID!"}]},{default:l(()=>[t(u,{value:e.appid,"onUpdate:value":a[1]||(a[1]=o=>e.appid=o),valueModifiers:{trim:!0},placeholder:"请输入APP ID"},null,8,["value"])]),_:1}),t(p,{label:"APP Secret",name:"app_secret",rules:[{required:!0,message:"请输入APP Secret!"}]},{default:l(()=>[t(u,{value:e.app_secret,"onUpdate:value":a[2]||(a[2]=o=>e.app_secret=o),valueModifiers:{trim:!0},placeholder:"请输入APP Secret"},null,8,["value"]),a[5]||(a[5]=c("div",{class:"tip-desc"},"如何获取APP ID和APP Secret",-1))]),_:1})]),_:1},8,["model"])]),_:1},8,["open","confirm-loading"])}}},V=I(F,[["__scopeId","data-v-0c7a191f"]]);export{V as F};
