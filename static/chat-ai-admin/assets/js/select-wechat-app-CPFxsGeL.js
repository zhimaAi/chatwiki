import{c as g,r as u,e as y,b as c,t as d,C as j,a as v,y as p,_,p as o,v as n,u as i,F as B,l as q,h as G,Y as H,ag as J,i as Q,a1 as S}from"./vue-chunks-BdaA73Wf.js";import{L as X}from"./loading-box-CQ9Pukre.js";import{E as Z}from"./empty-box-DAN5iPDv.js";import{e as ee}from"./index-Cg7-0swo.js";import{u as ae,f as te}from"../../index-DSFcP5NQ.js";import{_ as se}from"./emoji-mart-BBMRoEa3.js";import{m as le,N as oe,ad as ne,a4 as ie,E as ce,B as de,M as pe}from"./ui-antd-Dl1wwwCD.js";const ue={style:{"margin-bottom":"12px"}},re={class:"wechat-app-list"},_e=["onClick"],fe={class:"item-body"},ve=["src"],me={class:"app-info"},he={class:"app-name"},ke={class:"app-desc"},be={class:"ext-info-list"},ge={key:0,class:"status-block status-success"},ye={key:1,class:"status-block status-warning"},xe={__name:"select-wechat-app",props:{title:{type:String,default:""},okText:{type:String,default:""},disabledAppIds:{type:Array,default:()=>[]}},emits:["ok"],setup(k,{expose:E,emit:T}){const{t:l}=ae("components.common.select-wechat-app"),F=T,f=k,L=g(()=>f.title||l("select_official_account")),N=g(()=>f.okText||l("confirm_button")),M=J();te();const m=u(!1),b=u(!1),R=u(!1),h=u(!1),U=u({}),r=u([]),s=u([]),x=g(()=>r.value.filter(e=>!f.disabledAppIds.includes(e.app_id)));function V(e,a){U.value=e,s.value=Array.isArray(a)?a:[],D(),m.value=!0}function z(){m.value=!1}function D(){b.value=!0,ee({app_type:"official_account",app_name:""}).then(e=>{r.value=e.data||[]}).finally(()=>{b.value=!1})}function O(){let e=r.value.filter(a=>s.value.includes(a.app_id));F("ok",S(s.value),S(e))}function C(){const e=M.resolve({path:"/user/official-account"});window.open(e.href,"_blank")}function W(e){if(f.disabledAppIds.includes(e.app_id))return;let a=s.value.indexOf(e.app_id);a>-1?s.value.splice(a,1):s.value.push(e.app_id),w()}function w(){Q(()=>{h.value=s.value.length===x.value.length})}function $(){h.value?(s.value=[],r.value.map(e=>{f.disabledAppIds.includes(e.app_id)||s.value.push(e.app_id)})):s.value=[]}return E({open:V,close:z}),(e,a)=>{const K=le,A=oe,P=ce,I=de,Y=pe;return c(),y(Y,{open:m.value,"onUpdate:open":a[3]||(a[3]=t=>m.value=t),title:L.value,"confirm-loading":R.value,width:"626px"},{footer:d(()=>[p(I,{type:"primary",disabled:!s.value.length,onClick:O},{default:d(()=>[_(n(N.value),1)]),_:1},8,["disabled"])]),default:d(()=>[j(e.$slots,"alert",{},()=>[p(K,{type:"info",class:"zm-alert-info mt12"},{message:d(()=>[_(n(i(l)("official_account_list_source")),1),o("a",{onClick:C},n(i(l)("link_edit_add_official_account")),1)]),_:1})],!0),b.value?(c(),y(X,{key:0,style:{margin:"10vh 0"}})):r.value.length?(c(),v(B,{key:1},[o("div",ue,[p(A,{checked:h.value,"onUpdate:checked":a[0]||(a[0]=t=>h.value=t),disabled:!x.value.length,onChange:$},{default:d(()=>[_(n(i(l)("select_all")),1)]),_:1},8,["checked","disabled"])]),p(P,{value:s.value,"onUpdate:value":a[2]||(a[2]=t=>s.value=t)},{default:d(()=>[o("div",re,[(c(!0),v(B,null,q(r.value,t=>(c(),v("div",{key:t.id,class:G(["wechat-app-item",{disabled:k.disabledAppIds.includes(t.app_id)}]),onClick:Ce=>W(t)},[o("div",fe,[o("img",{class:"app-avatar",src:t.app_avatar,alt:""},null,8,ve),o("div",me,[o("div",he,n(t.app_name),1),o("div",ke,n(i(l)("appid_label"))+n(t.app_id),1)])]),o("div",be,[t.account_is_verify=="true"?(c(),v("div",ge,[p(i(ne)),_(" "+n(i(l)("verified")),1)])):(c(),v("div",ye,[p(i(ie)),_(" "+n(i(l)("unverified")),1)])),o("span",{onClick:a[1]||(a[1]=H(()=>{},["stop"]))},[p(A,{value:t.app_id,disabled:k.disabledAppIds.includes(t.app_id),onChange:w},null,8,["value","disabled"])])])],10,_e))),128))])]),_:1},8,["value"])],64)):(c(),y(Z,{key:2,title:i(l)("no_official_account_bound")},{desc:d(()=>[p(I,{type:"primary",onClick:C},{default:d(()=>[_(n(i(l)("bind_official_account")),1)]),_:1})]),_:1},8,["title"]))]),_:3},8,["open","title","confirm-loading"])}}},Fe=se(xe,[["__scopeId","data-v-62814d5c"]]);export{Fe as S};
//# sourceMappingURL=select-wechat-app-CPFxsGeL.js.map
