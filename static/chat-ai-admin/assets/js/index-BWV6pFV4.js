import{e as i,aw as W,f as j,w as oe,ac as c,as as t,F as R,ax as F,av as G,ad as a,az as I,u as f,ai as U,k as e,at as C,ar as s,G as N,ae as D,aA as H,aB as te,B as ae,r as V,af as q,J as se,o as ne,ak as re,ah as z}from"./vue-chunks-CGLjTDrY.js";import{u as le}from"./global-CNyN0DwS.js";import{_ as T,b as K,a as Q,e as X,d as O,c as A,r as ie,f as ce}from"../../index-CB2DywzJ.js";import{a as ue,L as _e}from"./locale-dropdown-B557wEdX.js";import{g as de}from"./index-CoChppVN.js";import{D as pe,h as Y,i as Z,j as E,k as ee,m as me,n as ve,U as be,F as J,o as he,e as ye,f as fe,M as ke,b as ge}from"./ui-antd-BHaxN-GS.js";import{v as we}from"./validate-8MtiUsxW.js";import{u as Ce}from"./guide-gdK2-F0v.js";import"./neo4j-CSfpjqgw.js";import"./utils-pAinW4BS.js";import"./other-BrZCAsTs.js";const $e={class:"navbar-wrapper"},Se={class:"navbar"},xe=["onClick"],Le={class:"nav-name"},Me={class:"down-icon"},Pe=["onClick"],Re={class:"nav-name"},Ie={__name:"layout-navbar",setup(B){const{t:o}=K("layout.navbar"),u=Q(),b=G(),m=W(),h=i(()=>m.meta.activeMenu||""),_=i(()=>m.path.split("/")[1]),d=j(localStorage.getItem("local__robot_menu_key")||"robot_detail"),k=i(()=>[{id:0,key:"explore",label:"explore",title:o("explore"),icon:"nav-explore",path:"/explore/index",permission:["AbilityCenter"]},{id:1,key:"robot",label:"robot",title:o("robot"),icon:"nav-robot",path:"/robot/list",permission:["RobotManage"]},{id:2,key:"library",label:"library",title:o("knowledge_base"),icon:"nav-library",path:"/library/list",permission:["LibraryManage"]},{id:3,key:"PublicLibrary-new",label:"PublicLibrary",title:o("document"),icon:"nav-doc",path:"/public-library/list",permission:["OpenLibDocManage"]},{id:4,key:"library-search-new",label:"library-search",title:o("search"),icon:"search",path:"/library-search/index",permission:["SearchManage"]},{id:5,key:"chat-monitor",label:"chat-monitor",title:o("session"),icon:"nav-chat",path:"/chat-monitor/index",permission:["ChatSessionManage"]}]),$=i(()=>u.top_navigate),M=i(()=>$.value.filter(v=>v.open).map(v=>k.value.find(l=>l.key===v.id)).filter(Boolean)),P=p=>{b.push(p.path)},g=(p,v)=>{localStorage.setItem("local__robot_menu_key",p),d.value=p,S(v)},S=p=>{d.value=="robot_detail"?r():P(p)},r=async()=>{try{const{data:p=[]}=await de();if(p.length===0){b.push("/robot/list");return}const v=localStorage.getItem("last_local_robot_id");let l;v&&(l=p.find(n=>n.id==v)),l=l||p[0];const{id:y,robot_key:x,application_type:w}=l;b.push({path:`/robot/config/${w==1?"workflow":"basic-config"}`,query:{id:y,robot_key:x}})}catch{b.push("/robot/list")}};return oe(()=>m.path,()=>{},{immediate:!0}),(p,v)=>{const l=O,y=Z,x=Y,w=ee;return a(),c("div",$e,[t("div",Se,[(a(!0),c(R,null,F(M.value,n=>(a(),c(R,{key:n.key},[f(X)(n.permission)?(a(),c(R,{key:0},[n.key==="robot"?(a(),c("div",{key:0,class:U(["nav-menu",{active:n.key===_.value||n.key===h.value}]),onClick:L=>S(n)},[e(l,{class:"nav-icon",name:n.icon},null,8,["name"]),t("span",Le,C(n.title),1),e(w,null,{overlay:s(()=>[e(x,null,{default:s(()=>[e(y,{key:"1",onClick:L=>g("robot_detail",n)},{default:s(()=>[t("div",{class:U(["robot-ment-item",{"robot-active-item":d.value=="robot_detail"}])},[e(f(E),{class:"anticon-check"}),N(" "+C(f(o)("enter_robot_detail")),1)],2)]),_:1},8,["onClick"]),e(y,{key:"2",onClick:L=>g("robot_list",n)},{default:s(()=>[t("div",{class:U(["robot-ment-item",{"robot-active-item":d.value=="robot_list"}])},[e(f(E)),N(" "+C(f(o)("enter_robot_manage")),1)],2)]),_:1},8,["onClick"])]),_:2},1024)]),default:s(()=>[t("div",Me,[e(f(pe))])]),_:2},1024)],10,xe)):(a(),c("div",{key:1,class:U(["nav-menu",{active:n.key===_.value||n.key===h.value||n.label==h.value}]),onClick:L=>P(n)},[e(l,{class:"nav-icon",name:n.icon},null,8,["name"]),t("span",Re,C(n.title),1)],10,Pe))],64)):I("",!0)],64))),128))])])}}},Be=T(Ie,[["__scopeId","data-v-55149283"]]),Te={class:"layout-breadcrumb"},De={key:1,class:"page-title"},Ue={__name:"layout-breadcrumb",props:{title:{type:[String,Boolean],default:""},items:{type:[Array,Boolean],default:()=>[]}},setup(B){const o=B;return(u,b)=>{const m=H("router-link"),h=ve,_=me;return a(),c("div",Te,[o.items.length>0?(a(),D(_,{key:0},{default:s(()=>[(a(!0),c(R,null,F(o.items,(d,k)=>(a(),c(R,{key:d.title},[k!==o.items.length-1?(a(),D(h,{key:0},{default:s(()=>[e(m,{to:d.path},{default:s(()=>[N(C(d.title),1)]),_:2},1032,["to"])]),_:2},1024)):(a(),D(h,{key:1},{default:s(()=>[N(C(d.title),1)]),_:2},1024))],64))),128))]),_:1})):(a(),c("div",De,C(o.title),1))])}}},Ne=T(Ue,[["__scopeId","data-v-c69a461d"]]),je={key:0,class:"user-dropdown"},Fe=["src"],Ge={class:"menu-name"},Oe={class:"menu-name"},Ae=["onClick"],Ve={class:"menu-name"},qe={class:"menu-name"},ze={__name:"user-dropdown",setup(B){const{t:o}=K(),u=Q(),b=G(),m=A(),{userInfo:h,avatar:_,user_name:d}=te(m),k=i(()=>d.value.length>11?d.value.substring(0,11)+"...":d.value),$=()=>{m.logoutConfirm(!0)},M=()=>{window.open("/#/user/model","_blank","noopener")},P=()=>{window.open("/#/user/account","_blank","noopener")},g=i(()=>[{id:1,key:"robot",label:"robot",title:o("layout.navbar.application"),icon:"nav-robot",path:"/robot/list",permission:["RobotManage"]},{id:2,key:"library",label:"library",title:o("layout.navbar.knowledge_base"),icon:"nav-library",path:"/library/list",permission:["LibraryManage"]},{id:3,key:"PublicLibrary",label:"PublicLibrary",title:o("layout.navbar.document"),icon:"nav-doc",path:"/public-library/list",permission:["OpenLibDocManage"]},{id:4,key:"library-search",label:"library-search",title:o("layout.navbar.search"),icon:"search",path:"/library-search/index",permission:["SearchManage"]},{id:5,key:"chat-monitor",label:"chat-monitor",title:o("layout.navbar.session"),icon:"nav-chat",path:"/chat-monitor/index",permission:["ChatSessionManage"]}]),S=i(()=>u.top_navigate),r=i(()=>S.value.filter(l=>!l.open).map(l=>g.value.find(y=>y.key===l.id)).filter(Boolean)),p=v=>{b.push(v.path)};return(v,l)=>{const y=Z,x=O,w=Y,n=ee;return f(h)?(a(),c("div",je,[e(n,null,{overlay:s(()=>[e(w,null,{default:s(()=>[e(y,null,{default:s(()=>[t("a",{class:"menu-item",href:"javascript:;",onClick:P},[e(f(be),{class:"menu-icon"}),t("span",Ge,C(k.value),1)])]),_:1}),e(y,null,{default:s(()=>[t("a",{class:"menu-item",href:"javascript:;",onClick:M},[e(x,{class:"menu-icon",name:"system-setting"}),t("span",Oe,C(f(o)("layout.navbar.system_manage")),1)])]),_:1}),(a(!0),c(R,null,F(r.value,L=>(a(),c(R,{key:L.id},[f(X)(L.permission)?(a(),D(y,{key:0},{default:s(()=>[t("a",{class:"menu-item",href:"javascript:;",onClick:lo=>p(L)},[e(x,{class:"menu-icon",name:L.icon},null,8,["name"]),t("span",Ve,C(L.title),1)],8,Ae)]),_:2},1024)):I("",!0)],64))),128)),e(y,null,{default:s(()=>[e(ue)]),_:1}),e(y,null,{default:s(()=>[t("a",{class:"menu-item",href:"javascript:;",onClick:$},[e(x,{class:"menu-icon",name:"logout"}),t("span",qe,C(f(o)("layout.navbar.logout")),1)])]),_:1})]),_:1})]),default:s(()=>[t("div",{class:"user-dropdown-link",onClick:l[0]||(l[0]=ae(()=>{},["prevent"]))},[t("img",{class:"user-avatar",src:f(_),alt:""},null,8,Fe)])]),_:1})])):I("",!0)}}},Ee=T(ze,[["__scopeId","data-v-e2b35ee4"]]),Je={class:"form-box"},We={__name:"reset-password",setup(B,{expose:o}){const u=A(),b=J.useForm,m=j(!0),h=j("重置登录密码"),_=V({password:"",check_password:"",id:u.userInfo.user_id}),d=V({password:[{message:"请输入登录密码",required:!0},{validator:async(S,r)=>!we(r)&&r?Promise.reject("密码必须包含字母、数字或者字符中的两种，6-32位"):Promise.resolve()}],check_password:[{message:"请输入确认密码",required:!0},{validator:async(S,r)=>r!=_.password&&r?Promise.reject("两次输入的密码不一致"):Promise.resolve()}]}),{resetFields:k,validate:$,validateInfos:M}=b(_,d),P=()=>{$().then(()=>{ie({...se(_)}).then(S=>{ge.success("修改成功"),m.value=!1,u.reset(!0)})})},g=()=>{u.setResetPassModal()};return o({open}),(S,r)=>{const p=he,v=fe,l=ye,y=J,x=ke;return a(),c("div",null,[e(x,{open:m.value,"onUpdate:open":r[2]||(r[2]=w=>m.value=w),title:h.value,onOk:P,width:"520px",onCancel:g},{default:s(()=>[e(p,{class:"alert-box",message:"您还未修改初始密码，为了保障您的数据安全，请您尽快重置密码。",type:"info","show-icon":""}),t("div",Je,[e(y,{layout:"vertical"},{default:s(()=>[e(l,q({label:"登录密码"},f(M).password),{default:s(()=>[e(v,{value:_.password,"onUpdate:value":r[0]||(r[0]=w=>_.password=w),placeholder:"密码必须包含字母、数字或者字符中的两种，6-32位"},null,8,["value"])]),_:1},16),e(l,q({label:"确认密码"},f(M).check_password),{default:s(()=>[e(v,{value:_.check_password,"onUpdate:value":r[1]||(r[1]=w=>_.check_password=w),placeholder:"请重新输入密码"},null,8,["value"])]),_:1},16)]),_:1})])]),_:1},8,["open","title"])])}}},He=T(We,[["__scopeId","data-v-9de4c189"]]),Ke={__name:"beginner-guide-tag",setup(B){const o=Ce(),u=ce(),b=i(()=>u.role_type),m=i(()=>+o.total_process),h=G(),_=()=>{o.getUseGuideProcess(),h.push("/guide")};return ne(()=>{o.getUseGuideProcess()}),(d,k)=>{const $=O;return b.value==1&&m.value!=100?(a(),c("div",{key:0,class:"beginner-guide-tag",onClick:_},[k[0]||(k[0]=t("span",{class:"red-dot"},null,-1)),e($,{class:"nav-icon",name:"guide"}),k[1]||(k[1]=t("span",{class:"nav-name"},"新手指引",-1))])):I("",!0)}}},Qe=T(Ke,[["__scopeId","data-v-1513d0a8"]]),Xe={class:"admin-layout"},Ye={key:0,class:"layout-header-wrapper"},Ze={class:"layout-header"},eo={class:"header-left"},oo={class:"header-body"},to={class:"header-right"},ao={class:"item-box"},so={class:"layout-body"},no={key:0,class:"layout-breadcrumb-wrapper"},ro={__name:"index",setup(B){const o=le(),u=W(),b=A(),m=i(()=>u.name!="robotWorkflow"?!1:o.hideLayoutTopAndBottom||!1),h=i(()=>u.meta.isCustomPage||!1),_=i(()=>u.meta.pageStyle||{}),d=i(()=>u.meta.bgColor||"#ffffff"),k=i(()=>u.meta.breadcrumb||[]),$=i(()=>u.meta.hideTitle||!1),M=i(()=>u.meta.title||!1),P=i(()=>{var g;return((g=b.userInfo)==null?void 0:g.d_pass)==1&&b.isShowResetPassModal});return(g,S)=>{const r=H("router-view");return a(),c("div",Xe,[m.value?I("",!0):(a(),c("div",Ye,[t("div",Ze,[t("div",eo,[e(_e),e(Qe)]),t("div",oo,[e(Be)]),t("div",to,[t("div",ao,[e(Ee)])])])])),t("div",so,[h.value?re(g.$slots,"default",{key:0},()=>[e(r)],!0):(a(),c("div",{key:1,class:"page-wrapper",style:z({"background-color":d.value})},[$.value?I("",!0):(a(),c("div",no,[e(Ne,{items:k.value,title:M.value},null,8,["items","title"])])),t("div",{class:"page-container",style:z({..._.value})},[e(r)],4)],4))]),P.value?(a(),D(He,{key:1})):I("",!0)])}}},ko=T(ro,[["__scopeId","data-v-34eaef87"]]);export{ko as default};
