import{_ as j}from"./cu-scroll-BmJNJRCz.js";import{s as A,g as D,a as U,b as q,d as E}from"./index-DLEjqKv8.js";import{f as h,Y as p,_ as l,k as r,a2 as _,a5 as a,G as x,a7 as o,u,ae as L,F as I,ab as F,B as Q,aa as G,r as P,a1 as B}from"./vue-chunks-DCKTEHpB.js";import{_ as R,b as V}from"../../index-C1Xsov4S.js";import{X,q as Y,u as H,O as K,M as W,a as M,a3 as Z,B as ee,y as te,p as se,J as oe,N as ae,Q as ne}from"./ui-antd-D64OvTpt.js";import"./pull-up.esm-DIiTC7VE.js";import"./observe-dom.esm-B25JyVKH.js";import"./utils-D9NMMoMR.js";const ie={class:"form-modal-box"},le={class:"form-item"},de={class:"form-label"},_e={class:"form-content"},ce={class:"form-item"},re={class:"form-label"},ue={class:"form-content"},pe={key:0,class:"robot-list"},ve={class:"robot-name-text"},me={__name:"add-sensitive-modal",props:{robotList:{type:Array,default:()=>[]}},emits:["ok"],setup(J,{expose:n,emit:N}){const{t:e}=V("views.user.sensitive-words.components.add-sensitive-modal"),T=N,k=J,C=h(!1),z=h(e("title_add")),S=h(""),b=h(""),m=h(0),v=h([]),s=t=>{C.value=!0,z.value=t.id?e("title_edit"):e("title_add"),S.value=t.id||"",b.value=t.words||"",m.value=+t.trigger_type||0,v.value=t.robot_ids||[]},f=t=>{v.value.includes(t.id)?v.value=v.value.filter(c=>c!==t.id):v.value.push(t.id)},g=()=>{if(!b.value)return M.error(e("error_no_words"));if(m.value==1&&v.value.length==0)return M.error(e("error_no_robot"));A({id:S.value,words:b.value,trigger_type:m.value,robot_ids:v.value.join(",")}).then(t=>{M.success(S.value?e("success_edit"):e("success_add")),C.value=!1,T("ok")})};return n({show:s}),(t,c)=>{const O=X,$=H,y=Y,w=K,i=W;return l(),p("div",null,[r(i,{open:C.value,"onUpdate:open":c[2]||(c[2]=d=>C.value=d),title:z.value,onOk:g,width:620},{default:_(()=>[a("div",ie,[a("div",le,[a("div",de,[x(o(u(e)("sensitive_words_label")),1),a("span",null,o(u(e)("sensitive_words_tip")),1)]),a("div",_e,[r(O,{value:b.value,"onUpdate:value":c[0]||(c[0]=d=>b.value=d),placeholder:u(e)("placeholder"),style:{height:"160px"}},null,8,["value","placeholder"])])]),a("div",ce,[a("div",re,o(u(e)("effective_robots")),1),a("div",ue,[r(y,{value:m.value,"onUpdate:value":c[1]||(c[1]=d=>m.value=d)},{default:_(()=>[r($,{value:0},{default:_(()=>[x(o(u(e)("all_robots")),1)]),_:1}),r($,{value:1},{default:_(()=>[x(o(u(e)("specific_robots")),1)]),_:1})]),_:1},8,["value"]),m.value==1?(l(),p("div",pe,[(l(!0),p(I,null,F(k.robotList,d=>(l(),p("div",{class:"checked-item",key:d.id},[r(w,{onClick:Q(ze=>f(d),["stop"]),checked:v.value.includes(d.id)},{default:_(()=>[a("div",ve,o(d.robot_name),1)]),_:2},1032,["onClick","checked"])]))),128))])):L("",!0)])])])]),_:1},8,["open","title"])])}}},he=R(me,[["__scopeId","data-v-fdc78eef"]]),be={class:"user-model-page"},fe={class:"page-title"},ke={class:"add-block"},ge={class:"list-wrapper"},ye={class:"content-box"},we={class:"text-over-box"},xe={key:1,class:"text-over-box"},Ce={key:0},Se={class:"text-over-box"},$e={key:1,class:"text-over-box"},Oe=["onClick"],Le=["onClick"],Ne={__name:"index",setup(J){const{t:n}=V("views.user.sensitive-words.index");G().query;const N=h([]),e=P({page:1,size:20,total:0}),T=s=>{e.page=s.current,e.size=s.pageSize,k()},k=()=>{U({...e}).then(s=>{let f=s.data.list||[];N.value=f.map(g=>{let t=JSON.parse(g.robot_data),c=t.map(y=>y.robot_name).join(";"),O=t.map(y=>y.id),$=g.words.split(`
`).join("ï¼›");return{...g,robot_data:t,robot_name_desc:c,robot_ids:O,words_desc:$}}),e.total=s.data.total})};k();const C=s=>{q({id:s.id}).then(f=>{k()})},z=s=>{W.confirm({title:n("delete_confirm"),icon:r(ne),content:n("delete_confirm_content",{words:s.words_desc}),okText:n("delete"),okType:"danger",cancelText:n("cancel"),onOk(){E({id:s.id}).then(f=>{M.success(n("delete_success")),k()})},onCancel(){}})},S=h(null),b=(s={})=>{S.value.show(JSON.parse(JSON.stringify(s)))},m=h([]);D().then(s=>{m.value=s.data||[]});const v=[{title:n("sensitive_words"),dataIndex:"words_desc",key:"words_desc",ellipsis:!0,width:300},{title:n("effective_robots"),dataIndex:"robot_name_desc",key:"robot_name_desc",ellipsis:!0,width:300},{title:n("enable_status"),key:"status",dataIndex:"status",width:150},{title:n("action"),key:"action",width:120}];return(s,f)=>{const g=ee,t=se,c=oe,O=ae,$=te,y=j;return l(),p("div",be,[a("div",fe,[x(o(u(n)("title"))+" ",1),a("div",ke,[r(g,{type:"primary",onClick:f[0]||(f[0]=w=>b()),icon:r(u(Z))},{default:_(()=>[x(o(u(n)("add_btn")),1)]),_:1},8,["icon"])])]),a("div",ge,[r(y,null,{default:_(()=>[a("div",ye,[r($,{columns:v,"data-source":N.value,pagination:{current:e.page,total:e.total,pageSize:e.size,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"]},onChange:T},{bodyCell:_(({column:w,record:i})=>[w.key==="words_desc"?(l(),p(I,{key:0},[i.words_desc.length>20?(l(),B(t,{key:0,overlayStyle:{"max-width":"500px"}},{title:_(()=>[x(o(i.words_desc),1)]),default:_(()=>[a("div",we,o(i.words_desc),1)]),_:2},1024)):(l(),p("div",xe,o(i.words_desc),1))],64)):L("",!0),w.key==="robot_name_desc"?(l(),p(I,{key:1},[i.trigger_type==0?(l(),p("div",Ce,o(u(n)("all_robots")),1)):(l(),p(I,{key:1},[i.robot_name_desc.length>20?(l(),B(t,{key:0,overlayStyle:{"max-width":"500px"}},{title:_(()=>[x(o(i.robot_name_desc),1)]),default:_(()=>[a("div",Se,o(i.robot_name_desc),1)]),_:2},1024)):(l(),p("div",$e,o(i.robot_name_desc),1))],64))],64)):L("",!0),w.key==="status"?(l(),B(c,{key:2,onChange:d=>C(i),checked:i.status==1},null,8,["onChange","checked"])):L("",!0),w.key==="action"?(l(),B(O,{key:3,gap:12,style:{"white-space":"nowrap"}},{default:_(()=>[a("a",{onClick:d=>b(i)},o(u(n)("edit")),9,Oe),a("a",{onClick:d=>z(i)},o(u(n)("delete")),9,Le)]),_:2},1024)):L("",!0)]),_:1},8,["data-source","pagination"])])]),_:1}),r(he,{onOk:k,robotList:m.value,ref_key:"addaddSensitiveModalRef",ref:S},null,8,["robotList"])])])}}},je=R(Ne,[["__scopeId","data-v-d7901bad"]]);export{je as default};
