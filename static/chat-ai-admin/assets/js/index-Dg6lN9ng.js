import{_ as O,b as T,bW as L,au as U,aW as D}from"../../index-CB2DywzJ.js";import{e as J,aw as q,f as g,r as E,o as R,ac as F,k as t,as as h,ar as s,ad as c,ae as k,az as v,G as n,at as i,u as l,J as G}from"./vue-chunks-CGLjTDrY.js";import{C as P}from"./config-page-menu-BfwwzioQ.js";import{M as w}from"./model-select-h2ELC74y.js";import{F as W,e as $,Q as j,v as z,aq as N,B as Q,M as X,b as A}from"./ui-antd-BHaxN-GS.js";import"./neo4j-CSfpjqgw.js";import"./utils-pAinW4BS.js";import"./other-BrZCAsTs.js";import"./index-BcMVDew1.js";const H={class:"ai-config-page"},K={class:"page-container"},Y={class:"ai-config-form"},Z={__name:"index",setup(ee){const{t:o}=T("views.public-library.ai.index"),I=L(),S=q(),x=J(()=>S.query.library_id),p=g(),_=g(!1);let u={};const e=E({library_name:"",library_intro:"",ai_summary:"",ai_summary_model:"",access_rights:"",model_config_id:"",use_model:"",use_model_switch:"",statistics_set:"",summary_model_config_id:""}),C=async()=>{try{await p.value.validate(),u.use_model!=e.use_model?X.confirm({title:o("confirm_switch_model",{model:e.use_model}),content:o("switch_model_warning"),okText:o("confirm"),cancelText:o("cancel"),onOk(){f()}}):f()}catch(d){console.error(o("form_validation_failed"),d)}},f=()=>{let d={...G(e)};_.value=!0,D(d).then(()=>{A.success(o("save_success")),_.value=!1,u=JSON.parse(JSON.stringify(d)),I.getLibraryInfo()}).catch(()=>{_.value=!1})},M=()=>{U({id:x.value}).then(d=>{let a=d.data||{};a.use_model=a.use_model||void 0,a.ai_summary_model=a.ai_summary_model||void 0,u=JSON.parse(JSON.stringify(a)),Object.assign(e,a)})};return R(()=>{M()}),(d,a)=>{const y=z,b=j,r=$,V=Q,B=W;return c(),F("div",H,[t(P),h("div",K,[h("div",Y,[t(B,{ref_key:"formRef",ref:p,model:e,"label-col":{span:4},"wrapper-col":{span:8}},{default:s(()=>[t(r,null,{label:s(()=>[n(i(l(o)("embed"))+"  ",1),t(y,null,{title:s(()=>[n(i(l(o)("embed_tooltip")),1)]),default:s(()=>[t(l(N))]),_:1})]),default:s(()=>[t(b,{checked:e.use_model_switch,"onUpdate:checked":a[0]||(a[0]=m=>e.use_model_switch=m),unCheckedValue:"0",checkedValue:"1"},null,8,["checked"])]),_:1}),e.use_model_switch==1?(c(),k(r,{key:0,label:l(o)("embed_model"),name:"use_model",rules:[{required:!0,message:l(o)("select_embed_model")}]},{default:s(()=>[t(w,{modelType:"TEXT EMBEDDING",placeholder:l(o)("select_embed_model"),modeName:e.use_model,"onUpdate:modeName":a[1]||(a[1]=m=>e.use_model=m),modeId:e.model_config_id,"onUpdate:modeId":a[2]||(a[2]=m=>e.model_config_id=m)},null,8,["placeholder","modeName","modeId"])]),_:1},8,["label","rules"])):v("",!0),t(r,null,{label:s(()=>[n(i(l(o)("ai_summary"))+"  ",1),t(y,null,{title:s(()=>[n(i(l(o)("ai_summary_tooltip")),1)]),default:s(()=>[t(l(N))]),_:1})]),default:s(()=>[t(b,{checked:e.ai_summary,"onUpdate:checked":a[3]||(a[3]=m=>e.ai_summary=m),unCheckedValue:"0",checkedValue:"1"},null,8,["checked"])]),_:1}),e.ai_summary==1?(c(),k(r,{key:1,label:l(o)("summary_model"),name:"ai_summary_model",rules:[{required:!0,message:l(o)("select_summary_model")}]},{default:s(()=>[t(w,{modelType:"LLM",modeName:e.ai_summary_model,"onUpdate:modeName":a[4]||(a[4]=m=>e.ai_summary_model=m),modeId:e.summary_model_config_id,"onUpdate:modeId":a[5]||(a[5]=m=>e.summary_model_config_id=m)},null,8,["modeName","modeId"])]),_:1},8,["label","rules"])):v("",!0),t(r,{"wrapper-col":{offset:4,span:8}},{default:s(()=>[t(V,{type:"primary",loading:_.value,onClick:C},{default:s(()=>[n(i(l(o)("save")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])])])}}},ie=O(Z,[["__scopeId","data-v-4f9cbc70"]]);export{ie as default};
