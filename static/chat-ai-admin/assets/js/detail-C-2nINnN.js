import{_ as O,d as T}from"../../index-C1Xsov4S.js";import{f as _,a1 as f,_ as a,a2 as h,k as l,o as U,aa as q,Y as p,a5 as t,u as b,a9 as E,a7 as o,ae as I,G as i,F,n as $,q as j}from"./vue-chunks-DCKTEHpB.js";import{y as z,M as G,d as L,ay as K,B as P,E as S,R as A}from"./ui-antd-D64OvTpt.js";import{U as J}from"./update-modal-ThPT_f13.js";import{L as Q}from"./loading-box-CyUSXD2F.js";import{g as W}from"./index-BsqRrb1q.js";import"./utils-D9NMMoMR.js";/* empty css                                                                     */const X={__name:"version-modal",setup(V,{expose:w}){const r=_(!1),u=_([]),c=[{title:"版本",dataIndex:"version",width:100},{title:"更新时间",dataIndex:"update_time_text",width:160},{title:"发布者",dataIndex:"author",width:100}];function y(v=[]){u.value=v,r.value=!0}return w({show:y}),(v,s)=>{const k=z,M=G;return a(),f(M,{title:"版本历史",open:r.value,"onUpdate:open":s[0]||(s[0]=x=>r.value=x),width:"500px",footer:null},{default:h(()=>[l(k,{columns:c,"data-source":u.value},null,8,["data-source"])]),_:1},8,["open"])}}},Z={class:"_container _plugin-detail-cont"},tt={class:"header"},et={key:1,class:"content"},st={class:"base-info"},ot={class:"top"},at=["src"],nt={class:"info"},it={class:"left"},lt={class:"name zm-line1"},dt={class:"source"},_t={class:"right"},rt=["href"],ut={class:"desc"},ct={class:"action-box"},vt={class:"left"},mt={class:"detail-info"},pt={class:"left"},ft={key:0,class:"main-block"},ht={class:"text-cont"},yt={class:"main-block"},kt=["innerHTML"],xt={class:"right"},gt={class:"main-block"},bt={class:"text-cont flex-center"},wt=["src"],Mt={class:"main-block"},Yt={class:"version-info"},Bt={class:"text-cont"},Rt={class:"main-block"},Dt={class:"text-cont"},Ht={__name:"detail",setup(V){const w=E(),r=q(),u=_(!0),c=_(!0),y=_(null),v=_(null),s=_({});U(()=>{var n;y.value=(n=r.query)==null?void 0:n.name,k()});function k(){c.value=!0,W({name:y.value}).then(n=>{var d,g;let e=(n==null?void 0:n.data)||{};s.value=e.remote,s.value.local=e.local,s.value.has_update=((d=e.local)==null?void 0:d.version)!=((g=e.remote)==null?void 0:g.latest_version),s.value.latest_version_history.map(m=>{m.update_time_text=L.unix(m.update_time).format("YYYY-MM-DD HH:mm"),m.author=s.value.author})}).finally(()=>{c.value=!1})}function M(){v.value.show(s.value.latest_version_history||[])}function x(){let{latest_version_detail:n,local:e}=s.value;u.value.show(s.value,n,e)}return(n,e)=>{var Y,B,R,D,H,C;const d=P,g=T,m=S,N=j("viewer");return a(),p("div",Z,[t("div",tt,[l(b(K),{onClick:e[0]||(e[0]=Ct=>b(w).back()),class:"back-icon"}),e[1]||(e[1]=t("span",{class:"title"},"插件详情",-1))]),c.value?(a(),f(Q,{key:0})):(a(),p("div",et,[t("div",st,[t("div",ot,[t("img",{class:"avatar",src:s.value.icon},null,8,at),t("div",nt,[t("div",it,[t("div",lt,o(s.value.title),1),t("div",dt,o(s.value.author),1)]),t("div",_t,[s.value.help_url?(a(),p("a",{key:0,href:s.value.help_url,target:"_blank"},[l(d,{type:"primary",ghost:""},{default:h(()=>[...e[2]||(e[2]=[i("使用说明",-1)])]),_:1})],8,rt)):I("",!0),s.value.local?(a(),p(F,{key:1},[s.value.has_update?(a(),f(d,{key:0,type:"primary",onClick:x},{default:h(()=>[...e[3]||(e[3]=[i("更 新",-1)])]),_:1})):(a(),f(d,{key:1},{default:h(()=>[...e[4]||(e[4]=[i("已安装",-1)])]),_:1}))],64)):(a(),f(d,{key:2,type:"primary",onClick:x},{default:h(()=>[...e[5]||(e[5]=[i("安 装",-1)])]),_:1}))])])]),t("div",ut,o(s.value.description),1),t("div",ct,[t("div",vt,[l(g,{name:"download"}),i(" "+o(s.value.installed_count||0),1)]),e[6]||(e[6]=t("div",{class:"right"},null,-1))])]),t("div",mt,[t("div",pt,[s.value.overview?(a(),p("div",ft,[e[7]||(e[7]=t("div",{class:"main-tit"},"插件概叙",-1)),t("pre",ht,o(s.value.overview),1)])):I("",!0),t("div",yt,[e[8]||(e[8]=t("div",{class:"main-tit"},"使用说明",-1)),$(t("pre",{class:"text-cont",innerHTML:s.value.introduction},null,8,kt),[[N]])])]),t("div",xt,[t("div",gt,[e[9]||(e[9]=t("div",{class:"main-tit"},"类别",-1)),t("div",bt,[t("img",{class:"cate-icon",src:s.value.filter_type_icon},null,8,wt),i(" "+o(s.value.filter_type_title),1)])]),t("div",Mt,[e[11]||(e[11]=t("div",{class:"main-tit"},"版本",-1)),t("div",Yt,[i(" v"+o(s.value.latest_version)+" ",1),l(m,{type:"vertical"}),i(" "+o(s.value.author)+" "+o(b(L).unix((B=(Y=s.value)==null?void 0:Y.latest_version_detail)==null?void 0:B.update_time).format("YYYY-MM-DD HH:mm")),1)]),t("div",Bt,o((D=(R=s.value)==null?void 0:R.latest_version_detail)==null?void 0:D.upgrade_description),1),t("div",null,[t("a",{onClick:M},[e[10]||(e[10]=i("版本历史 ",-1)),l(b(A))])])]),t("div",Rt,[e[12]||(e[12]=t("div",{class:"main-tit"},"权限列表",-1)),t("div",Dt,"最大内存 "+o((C=(H=s.value)==null?void 0:H.latest_version_detail)==null?void 0:C.memory)+"MB",1)])])])])),l(X,{ref_key:"versionRef",ref:v},null,512),l(J,{ref_key:"updateRef",ref:u,onOk:k},null,512)])}}},Et=O(Ht,[["__scopeId","data-v-bbd6836b"]]);export{Et as default};
