{"version":3,"file":"logicflow-DKG0_Fp4.js","sources":["../../../../front-end/chat-ai-admin-vue/node_modules/preact/dist/preact.module.js","../../../../front-end/chat-ai-admin-vue/node_modules/mobx/lib/mobx.module.js","../../../../front-end/chat-ai-admin-vue/node_modules/mobx-preact/lib/index.module.js","../../../../front-end/chat-ai-admin-vue/node_modules/preact/hooks/dist/hooks.module.js","../../../../front-end/chat-ai-admin-vue/node_modules/preact/compat/dist/compat.module.js","../../../../front-end/chat-ai-admin-vue/node_modules/preact/jsx-runtime/dist/jsxRuntime.module.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/options.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/util/animation.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/util/browser.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/util/compatible.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/constant/index.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/util/drag.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/algorithm/outline.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/algorithm/edge.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/algorithm/index.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/util/edge.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/util/geometry.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/util/graph.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/util/vector.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/util/matrix.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/util/mobx.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/util/node.js","../../../../front-end/chat-ai-admin-vue/node_modules/uuid/dist/esm-browser/rng.js","../../../../front-end/chat-ai-admin-vue/node_modules/uuid/dist/esm-browser/stringify.js","../../../../front-end/chat-ai-admin-vue/node_modules/uuid/dist/esm-browser/native.js","../../../../front-end/chat-ai-admin-vue/node_modules/uuid/dist/esm-browser/v4.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/util/uuid.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/util/raf.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/view/shape/Text.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/view/shape/Line.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/view/shape/Rect.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/view/shape/Path.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/view/shape/Circle.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/view/shape/Ellipse.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/view/shape/Polygon.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/view/shape/Polyline.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/view/Control.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/algorithm/rotate.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/util/resize.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/util/sampling.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/util/theme.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/util/zIndex.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/model/edge/BaseEdgeModel.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/model/edge/BezierEdgeModel.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/model/edge/LineEdgeModel.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/model/edge/PolylineEdgeModel.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/model/node/BaseNodeModel.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/model/node/CircleNodeModel.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/model/node/DiamondNodeModel.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/model/node/EllipseNodeModel.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/model/node/PolygonNodeModel.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/model/node/RectNodeModel.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/model/node/TextNodeModel.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/model/node/HtmlNodeModel.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/model/EditConfigModel.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/event/eventEmitter.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/view/overlay/CanvasOverlay.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/view/overlay/BezierAdjustOverlay.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/view/overlay/BackgroundOverlay.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/view/overlay/Grid.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/view/overlay/ModificationOverlay.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/view/overlay/OutlineOverlay.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/view/overlay/SnaplineOverlay.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/view/overlay/ToolOverlay.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/model/TransformModel.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/model/NestedTransformModel.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/model/GraphModel.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/model/SnaplineModel.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/view/Graph.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/view/Anchor.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/view/Rotate.js","../../../../front-end/chat-ai-admin-vue/node_modules/classnames/index.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/view/text/BaseText.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/view/text/LineText.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/view/node/BaseNode.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/view/node/RectNode.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/view/node/CircleNode.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/view/node/PolygonNode.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/view/node/DiamondNode.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/view/node/EllipseNode.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/view/node/TextNode.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/view/node/HtmlNode.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/view/edge/AdjustPoint.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/view/edge/Arrow.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/view/edge/BaseEdge.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/view/edge/BezierEdge.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/view/edge/LineEdge.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/view/edge/PolylineEdge.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/view/behavior/dnd.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/view/behavior/snapline.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/tool/TextEditTool.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/tool/MultipleSelectTool.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/tool/index.js","../../../../front-end/chat-ai-admin-vue/node_modules/mobx-utils/mobx-utils.module.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/history/index.js","../../../../front-end/chat-ai-admin-vue/node_modules/mousetrap/mousetrap.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/keyboard/shortcut.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/keyboard/index.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/LogicFlow.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/core/es/index.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/bpmn/constant.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/bpmn/getBpmnId.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/bpmn/events/StartEvent.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/bpmn/events/EndEvent.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/bpmn/flow/SequenceFlow.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/bpmn/gateways/ExclusiveGateway.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/bpmn/tasks/ServiceTask.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/bpmn/tasks/UserTask.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/bpmn-adapter/bpmnIds.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/bpmn-adapter/json2xml.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/bpmn-adapter/xml2json.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/bpmn-adapter/index.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/bpmn-elements/utils.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/bpmn-elements/presets/icons.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/NodeResize/control/Control.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/NodeResize/control/ControlGroup.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/NodeResize/node/EllipseResize.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/NodeResize/node/DiamondResize.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/NodeResize/node/HtmlResize.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/NodeResize/node/RectResize.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/materials/group/GroupNode.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/bpmn-elements/presets/Flow/sequenceFlow.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/bpmn-elements/presets/Flow/index.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/bpmn-elements-adapter/constant.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/bpmn-elements-adapter/xml2json.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/bpmn-elements-adapter/json2xml.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/bpmn-elements-adapter/index.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/tools/label/utils.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/dynamic-group/node.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/dynamic-group/model.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/dynamic-group/utils.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/dynamic-group/index.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/insert-node-in-polyline/edge.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/tools/label/Label.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/tools/label/LabelModel.js","../../../../front-end/chat-ai-admin-vue/node_modules/vanilla-picker/dist/vanilla-picker.mjs","../../../../front-end/chat-ai-admin-vue/node_modules/rangy/lib/rangy-core.js","../../../../front-end/chat-ai-admin-vue/node_modules/rangy/lib/rangy-classapplier.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/tools/label/mediumEditor.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/tools/label/LabelOverlay.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/components/dnd-panel/index.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/components/mini-map/index.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/components/selection-select/index.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/materials/curved-edge/index.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/materials/node-selection/index.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/extension/es/rect-label-node/RectLabelNodeView.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/vue-node-registry/es/model.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/vue-node-registry/es/registry.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/vue-node-registry/es/teleport.js","../../../../front-end/chat-ai-admin-vue/node_modules/@logicflow/vue-node-registry/es/view.js"],"sourcesContent":["var n,l,u,t,i,r,o,e,f,c,s,a,h,p={},v=[],y=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,w=Array.isArray;function d(n,l){for(var u in l)n[u]=l[u];return n}function g(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function _(l,u,t){var i,r,o,e={};for(o in u)\"key\"==o?i=u[o]:\"ref\"==o?r=u[o]:e[o]=u[o];if(arguments.length>2&&(e.children=arguments.length>3?n.call(arguments,2):t),\"function\"==typeof l&&null!=l.defaultProps)for(o in l.defaultProps)void 0===e[o]&&(e[o]=l.defaultProps[o]);return m(l,e,i,r,null)}function m(n,t,i,r,o){var e={type:n,props:t,key:i,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==o?++u:o,__i:-1,__u:0};return null==o&&null!=l.vnode&&l.vnode(e),e}function b(){return{current:null}}function k(n){return n.children}function x(n,l){this.props=n,this.context=l}function S(n,l){if(null==l)return n.__?S(n.__,n.__i+1):null;for(var u;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e)return u.__e;return\"function\"==typeof n.type?S(n):null}function C(n){var l,u;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,l=0;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e){n.__e=n.__c.base=u.__e;break}return C(n)}}function M(n){(!n.__d&&(n.__d=!0)&&i.push(n)&&!$.__r++||r!=l.debounceRendering)&&((r=l.debounceRendering)||o)($)}function $(){for(var n,u,t,r,o,f,c,s=1;i.length;)i.length>s&&i.sort(e),n=i.shift(),s=i.length,n.__d&&(t=void 0,r=void 0,o=(r=(u=n).__v).__e,f=[],c=[],u.__P&&((t=d({},r)).__v=r.__v+1,l.vnode&&l.vnode(t),O(u.__P,t,r,u.__n,u.__P.namespaceURI,32&r.__u?[o]:null,f,null==o?S(r):o,!!(32&r.__u),c),t.__v=r.__v,t.__.__k[t.__i]=t,N(f,t,c),r.__e=r.__=null,t.__e!=o&&C(t)));$.__r=0}function I(n,l,u,t,i,r,o,e,f,c,s){var a,h,y,w,d,g,_,m=t&&t.__k||v,b=l.length;for(f=P(u,l,m,f,b),a=0;a<b;a++)null!=(y=u.__k[a])&&(h=-1==y.__i?p:m[y.__i]||p,y.__i=a,g=O(n,y,h,i,r,o,e,f,c,s),w=y.__e,y.ref&&h.ref!=y.ref&&(h.ref&&B(h.ref,null,y),s.push(y.ref,y.__c||w,y)),null==d&&null!=w&&(d=w),(_=!!(4&y.__u))||h.__k===y.__k?f=A(y,f,n,_):\"function\"==typeof y.type&&void 0!==g?f=g:w&&(f=w.nextSibling),y.__u&=-7);return u.__e=d,f}function P(n,l,u,t,i){var r,o,e,f,c,s=u.length,a=s,h=0;for(n.__k=new Array(i),r=0;r<i;r++)null!=(o=l[r])&&\"boolean\"!=typeof o&&\"function\"!=typeof o?(\"string\"==typeof o||\"number\"==typeof o||\"bigint\"==typeof o||o.constructor==String?o=n.__k[r]=m(null,o,null,null,null):w(o)?o=n.__k[r]=m(k,{children:o},null,null,null):null==o.constructor&&o.__b>0?o=n.__k[r]=m(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):n.__k[r]=o,f=r+h,o.__=n,o.__b=n.__b+1,-1!=(c=o.__i=L(o,u,f,a))&&(a--,(e=u[c])&&(e.__u|=2)),null==e||null==e.__v?(-1==c&&(i>s?h--:i<s&&h++),\"function\"!=typeof o.type&&(o.__u|=4)):c!=f&&(c==f-1?h--:c==f+1?h++:(c>f?h--:h++,o.__u|=4))):n.__k[r]=null;if(a)for(r=0;r<s;r++)null!=(e=u[r])&&0==(2&e.__u)&&(e.__e==t&&(t=S(e)),D(e,e));return t}function A(n,l,u,t){var i,r;if(\"function\"==typeof n.type){for(i=n.__k,r=0;i&&r<i.length;r++)i[r]&&(i[r].__=n,l=A(i[r],l,u,t));return l}n.__e!=l&&(t&&(l&&n.type&&!l.parentNode&&(l=S(n)),u.insertBefore(n.__e,l||null)),l=n.__e);do{l=l&&l.nextSibling}while(null!=l&&8==l.nodeType);return l}function H(n,l){return l=l||[],null==n||\"boolean\"==typeof n||(w(n)?n.some(function(n){H(n,l)}):l.push(n)),l}function L(n,l,u,t){var i,r,o,e=n.key,f=n.type,c=l[u],s=null!=c&&0==(2&c.__u);if(null===c&&null==e||s&&e==c.key&&f==c.type)return u;if(t>(s?1:0))for(i=u-1,r=u+1;i>=0||r<l.length;)if(null!=(c=l[o=i>=0?i--:r++])&&0==(2&c.__u)&&e==c.key&&f==c.type)return o;return-1}function T(n,l,u){\"-\"==l[0]?n.setProperty(l,null==u?\"\":u):n[l]=null==u?\"\":\"number\"!=typeof u||y.test(l)?u:u+\"px\"}function j(n,l,u,t,i){var r,o;n:if(\"style\"==l)if(\"string\"==typeof u)n.style.cssText=u;else{if(\"string\"==typeof t&&(n.style.cssText=t=\"\"),t)for(l in t)u&&l in u||T(n.style,l,\"\");if(u)for(l in u)t&&u[l]==t[l]||T(n.style,l,u[l])}else if(\"o\"==l[0]&&\"n\"==l[1])r=l!=(l=l.replace(f,\"$1\")),o=l.toLowerCase(),l=o in n||\"onFocusOut\"==l||\"onFocusIn\"==l?o.slice(2):l.slice(2),n.l||(n.l={}),n.l[l+r]=u,u?t?u.u=t.u:(u.u=c,n.addEventListener(l,r?a:s,r)):n.removeEventListener(l,r?a:s,r);else{if(\"http://www.w3.org/2000/svg\"==i)l=l.replace(/xlink(H|:h)/,\"h\").replace(/sName$/,\"s\");else if(\"width\"!=l&&\"height\"!=l&&\"href\"!=l&&\"list\"!=l&&\"form\"!=l&&\"tabIndex\"!=l&&\"download\"!=l&&\"rowSpan\"!=l&&\"colSpan\"!=l&&\"role\"!=l&&\"popover\"!=l&&l in n)try{n[l]=null==u?\"\":u;break n}catch(n){}\"function\"==typeof u||(null==u||!1===u&&\"-\"!=l[4]?n.removeAttribute(l):n.setAttribute(l,\"popover\"==l&&1==u?\"\":u))}}function F(n){return function(u){if(this.l){var t=this.l[u.type+n];if(null==u.t)u.t=c++;else if(u.t<t.u)return;return t(l.event?l.event(u):u)}}}function O(n,u,t,i,r,o,e,f,c,s){var a,h,p,v,y,_,m,b,S,C,M,$,P,A,H,L,T,j=u.type;if(null!=u.constructor)return null;128&t.__u&&(c=!!(32&t.__u),o=[f=u.__e=t.__e]),(a=l.__b)&&a(u);n:if(\"function\"==typeof j)try{if(b=u.props,S=\"prototype\"in j&&j.prototype.render,C=(a=j.contextType)&&i[a.__c],M=a?C?C.props.value:a.__:i,t.__c?m=(h=u.__c=t.__c).__=h.__E:(S?u.__c=h=new j(b,M):(u.__c=h=new x(b,M),h.constructor=j,h.render=E),C&&C.sub(h),h.state||(h.state={}),h.__n=i,p=h.__d=!0,h.__h=[],h._sb=[]),S&&null==h.__s&&(h.__s=h.state),S&&null!=j.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=d({},h.__s)),d(h.__s,j.getDerivedStateFromProps(b,h.__s))),v=h.props,y=h.state,h.__v=u,p)S&&null==j.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),S&&null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(S&&null==j.getDerivedStateFromProps&&b!==v&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(b,M),u.__v==t.__v||!h.__e&&null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(b,h.__s,M)){for(u.__v!=t.__v&&(h.props=b,h.state=h.__s,h.__d=!1),u.__e=t.__e,u.__k=t.__k,u.__k.some(function(n){n&&(n.__=u)}),$=0;$<h._sb.length;$++)h.__h.push(h._sb[$]);h._sb=[],h.__h.length&&e.push(h);break n}null!=h.componentWillUpdate&&h.componentWillUpdate(b,h.__s,M),S&&null!=h.componentDidUpdate&&h.__h.push(function(){h.componentDidUpdate(v,y,_)})}if(h.context=M,h.props=b,h.__P=n,h.__e=!1,P=l.__r,A=0,S){for(h.state=h.__s,h.__d=!1,P&&P(u),a=h.render(h.props,h.state,h.context),H=0;H<h._sb.length;H++)h.__h.push(h._sb[H]);h._sb=[]}else do{h.__d=!1,P&&P(u),a=h.render(h.props,h.state,h.context),h.state=h.__s}while(h.__d&&++A<25);h.state=h.__s,null!=h.getChildContext&&(i=d(d({},i),h.getChildContext())),S&&!p&&null!=h.getSnapshotBeforeUpdate&&(_=h.getSnapshotBeforeUpdate(v,y)),L=a,null!=a&&a.type===k&&null==a.key&&(L=V(a.props.children)),f=I(n,w(L)?L:[L],u,t,i,r,o,e,f,c,s),h.base=u.__e,u.__u&=-161,h.__h.length&&e.push(h),m&&(h.__E=h.__=null)}catch(n){if(u.__v=null,c||null!=o)if(n.then){for(u.__u|=c?160:128;f&&8==f.nodeType&&f.nextSibling;)f=f.nextSibling;o[o.indexOf(f)]=null,u.__e=f}else{for(T=o.length;T--;)g(o[T]);z(u)}else u.__e=t.__e,u.__k=t.__k,n.then||z(u);l.__e(n,u,t)}else null==o&&u.__v==t.__v?(u.__k=t.__k,u.__e=t.__e):f=u.__e=q(t.__e,u,t,i,r,o,e,c,s);return(a=l.diffed)&&a(u),128&u.__u?void 0:f}function z(n){n&&n.__c&&(n.__c.__e=!0),n&&n.__k&&n.__k.forEach(z)}function N(n,u,t){for(var i=0;i<t.length;i++)B(t[i],t[++i],t[++i]);l.__c&&l.__c(u,n),n.some(function(u){try{n=u.__h,u.__h=[],n.some(function(n){n.call(u)})}catch(n){l.__e(n,u.__v)}})}function V(n){return\"object\"!=typeof n||null==n||n.__b&&n.__b>0?n:w(n)?n.map(V):d({},n)}function q(u,t,i,r,o,e,f,c,s){var a,h,v,y,d,_,m,b=i.props||p,k=t.props,x=t.type;if(\"svg\"==x?o=\"http://www.w3.org/2000/svg\":\"math\"==x?o=\"http://www.w3.org/1998/Math/MathML\":o||(o=\"http://www.w3.org/1999/xhtml\"),null!=e)for(a=0;a<e.length;a++)if((d=e[a])&&\"setAttribute\"in d==!!x&&(x?d.localName==x:3==d.nodeType)){u=d,e[a]=null;break}if(null==u){if(null==x)return document.createTextNode(k);u=document.createElementNS(o,x,k.is&&k),c&&(l.__m&&l.__m(t,e),c=!1),e=null}if(null==x)b===k||c&&u.data==k||(u.data=k);else{if(e=e&&n.call(u.childNodes),!c&&null!=e)for(b={},a=0;a<u.attributes.length;a++)b[(d=u.attributes[a]).name]=d.value;for(a in b)if(d=b[a],\"children\"==a);else if(\"dangerouslySetInnerHTML\"==a)v=d;else if(!(a in k)){if(\"value\"==a&&\"defaultValue\"in k||\"checked\"==a&&\"defaultChecked\"in k)continue;j(u,a,null,d,o)}for(a in k)d=k[a],\"children\"==a?y=d:\"dangerouslySetInnerHTML\"==a?h=d:\"value\"==a?_=d:\"checked\"==a?m=d:c&&\"function\"!=typeof d||b[a]===d||j(u,a,d,b[a],o);if(h)c||v&&(h.__html==v.__html||h.__html==u.innerHTML)||(u.innerHTML=h.__html),t.__k=[];else if(v&&(u.innerHTML=\"\"),I(\"template\"==t.type?u.content:u,w(y)?y:[y],t,i,r,\"foreignObject\"==x?\"http://www.w3.org/1999/xhtml\":o,e,f,e?e[0]:i.__k&&S(i,0),c,s),null!=e)for(a=e.length;a--;)g(e[a]);c||(a=\"value\",\"progress\"==x&&null==_?u.removeAttribute(\"value\"):null!=_&&(_!==u[a]||\"progress\"==x&&!_||\"option\"==x&&_!=b[a])&&j(u,a,_,b[a],o),a=\"checked\",null!=m&&m!=u[a]&&j(u,a,m,b[a],o))}return u}function B(n,u,t){try{if(\"function\"==typeof n){var i=\"function\"==typeof n.__u;i&&n.__u(),i&&null==u||(n.__u=n(u))}else n.current=u}catch(n){l.__e(n,t)}}function D(n,u,t){var i,r;if(l.unmount&&l.unmount(n),(i=n.ref)&&(i.current&&i.current!=n.__e||B(i,null,u)),null!=(i=n.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(n){l.__e(n,u)}i.base=i.__P=null}if(i=n.__k)for(r=0;r<i.length;r++)i[r]&&D(i[r],u,t||\"function\"!=typeof n.type);t||g(n.__e),n.__c=n.__=n.__e=void 0}function E(n,l,u){return this.constructor(n,u)}function G(u,t,i){var r,o,e,f;t==document&&(t=document.documentElement),l.__&&l.__(u,t),o=(r=\"function\"==typeof i)?null:i&&i.__k||t.__k,e=[],f=[],O(t,u=(!r&&i||t).__k=_(k,null,[u]),o||p,p,t.namespaceURI,!r&&i?[i]:o?null:t.firstChild?n.call(t.childNodes):null,e,!r&&i?i:o?o.__e:t.firstChild,r,f),N(e,u,f)}function J(n,l){G(n,l,J)}function K(l,u,t){var i,r,o,e,f=d({},l.props);for(o in l.type&&l.type.defaultProps&&(e=l.type.defaultProps),u)\"key\"==o?i=u[o]:\"ref\"==o?r=u[o]:f[o]=void 0===u[o]&&null!=e?e[o]:u[o];return arguments.length>2&&(f.children=arguments.length>3?n.call(arguments,2):t),m(l.type,f,i||l.key,r||l.ref,null)}function Q(n){function l(n){var u,t;return this.getChildContext||(u=new Set,(t={})[l.__c]=this,this.getChildContext=function(){return t},this.componentWillUnmount=function(){u=null},this.shouldComponentUpdate=function(n){this.props.value!=n.value&&u.forEach(function(n){n.__e=!0,M(n)})},this.sub=function(n){u.add(n);var l=n.componentWillUnmount;n.componentWillUnmount=function(){u&&u.delete(n),l&&l.call(n)}}),n.children}return l.__c=\"__cC\"+h++,l.__=n,l.Provider=l.__l=(l.Consumer=function(n,l){return n.children(l)}).contextType=l,l}n=v.slice,l={__e:function(n,l,u,t){for(var i,r,o;l=l.__;)if((i=l.__c)&&!i.__)try{if((r=i.constructor)&&null!=r.getDerivedStateFromError&&(i.setState(r.getDerivedStateFromError(n)),o=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(n,t||{}),o=i.__d),o)return i.__E=i}catch(l){n=l}throw n}},u=0,t=function(n){return null!=n&&null==n.constructor},x.prototype.setState=function(n,l){var u;u=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=d({},this.state),\"function\"==typeof n&&(n=n(d({},u),this.props)),n&&d(u,n),null!=n&&this.__v&&(l&&this._sb.push(l),M(this))},x.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),M(this))},x.prototype.render=k,i=[],o=\"function\"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,e=function(n,l){return n.__v.__b-l.__v.__b},$.__r=0,f=/(PointerCapture)$|Capture$/i,c=0,s=F(!1),a=F(!0),h=0;export{x as Component,k as Fragment,K as cloneElement,Q as createContext,_ as createElement,b as createRef,_ as h,J as hydrate,t as isValidElement,l as options,G as render,H as toChildArray};\n//# sourceMappingURL=preact.module.js.map\n","/** MobX - (c) Michel Weststrate 2015 - 2020 - MIT Licensed */\nvar OBFUSCATED_ERROR = \"An invariant failed, however the error is obfuscated because this is a production build.\";\nvar EMPTY_ARRAY = [];\nObject.freeze(EMPTY_ARRAY);\nvar EMPTY_OBJECT = {};\nObject.freeze(EMPTY_OBJECT);\nfunction getNextId() {\n    return ++globalState.mobxGuid;\n}\nfunction fail(message) {\n    invariant(false, message);\n    throw \"X\"; // unreachable\n}\nfunction invariant(check, message) {\n    if (!check)\n        throw new Error(\"[mobx] \" + (message || OBFUSCATED_ERROR));\n}\n/**\n * Prints a deprecation message, but only one time.\n * Returns false if the deprecated message was already printed before\n */\nvar deprecatedMessages = [];\nfunction deprecated(msg, thing) {\n    if (process.env.NODE_ENV === \"production\")\n        return false;\n    if (thing) {\n        return deprecated(\"'\" + msg + \"', use '\" + thing + \"' instead.\");\n    }\n    if (deprecatedMessages.indexOf(msg) !== -1)\n        return false;\n    deprecatedMessages.push(msg);\n    console.error(\"[mobx] Deprecated: \" + msg);\n    return true;\n}\n/**\n * Makes sure that the provided function is invoked at most once.\n */\nfunction once(func) {\n    var invoked = false;\n    return function () {\n        if (invoked)\n            return;\n        invoked = true;\n        return func.apply(this, arguments);\n    };\n}\nvar noop = function () { };\nfunction unique(list) {\n    var res = [];\n    list.forEach(function (item) {\n        if (res.indexOf(item) === -1)\n            res.push(item);\n    });\n    return res;\n}\nfunction isObject(value) {\n    return value !== null && typeof value === \"object\";\n}\nfunction isPlainObject(value) {\n    if (value === null || typeof value !== \"object\")\n        return false;\n    var proto = Object.getPrototypeOf(value);\n    return proto === Object.prototype || proto === null;\n}\nfunction convertToMap(dataStructure) {\n    if (isES6Map(dataStructure) || isObservableMap(dataStructure)) {\n        return dataStructure;\n    }\n    else if (Array.isArray(dataStructure)) {\n        return new Map(dataStructure);\n    }\n    else if (isPlainObject(dataStructure)) {\n        var map = new Map();\n        for (var key in dataStructure) {\n            map.set(key, dataStructure[key]);\n        }\n        return map;\n    }\n    else {\n        return fail(\"Cannot convert to map from '\" + dataStructure + \"'\");\n    }\n}\nfunction addHiddenProp(object, propName, value) {\n    Object.defineProperty(object, propName, {\n        enumerable: false,\n        writable: true,\n        configurable: true,\n        value: value\n    });\n}\nfunction addHiddenFinalProp(object, propName, value) {\n    Object.defineProperty(object, propName, {\n        enumerable: false,\n        writable: false,\n        configurable: true,\n        value: value\n    });\n}\nfunction isPropertyConfigurable(object, prop) {\n    var descriptor = Object.getOwnPropertyDescriptor(object, prop);\n    return !descriptor || (descriptor.configurable !== false && descriptor.writable !== false);\n}\nfunction assertPropertyConfigurable(object, prop) {\n    if (process.env.NODE_ENV !== \"production\" && !isPropertyConfigurable(object, prop))\n        fail(\"Cannot make property '\" + prop.toString() + \"' observable, it is not configurable and writable in the target object\");\n}\nfunction createInstanceofPredicate(name, clazz) {\n    var propName = \"isMobX\" + name;\n    clazz.prototype[propName] = true;\n    return function (x) {\n        return isObject(x) && x[propName] === true;\n    };\n}\n/**\n * Returns whether the argument is an array, disregarding observability.\n */\nfunction isArrayLike(x) {\n    return Array.isArray(x) || isObservableArray(x);\n}\nfunction isES6Map(thing) {\n    return thing instanceof Map;\n}\nfunction isES6Set(thing) {\n    return thing instanceof Set;\n}\n/**\n * Returns the following: own keys, prototype keys & own symbol keys, if they are enumerable.\n */\nfunction getPlainObjectKeys(object) {\n    var enumerables = new Set();\n    for (var key in object)\n        enumerables.add(key); // *all* enumerables\n    Object.getOwnPropertySymbols(object).forEach(function (k) {\n        if (Object.getOwnPropertyDescriptor(object, k).enumerable)\n            enumerables.add(k);\n    }); // *own* symbols\n    // Note: this implementation is missing enumerable, inherited, symbolic property names! That would however pretty expensive to add,\n    // as there is no efficient iterator that returns *all* properties\n    return Array.from(enumerables);\n}\nfunction stringifyKey(key) {\n    if (key && key.toString)\n        return key.toString();\n    else\n        return new String(key).toString();\n}\nfunction toPrimitive(value) {\n    return value === null ? null : typeof value === \"object\" ? \"\" + value : value;\n}\nvar ownKeys = typeof Reflect !== \"undefined\" && Reflect.ownKeys\n    ? Reflect.ownKeys\n    : Object.getOwnPropertySymbols\n        ? function (obj) { return Object.getOwnPropertyNames(obj).concat(Object.getOwnPropertySymbols(obj)); }\n        : /* istanbul ignore next */ Object.getOwnPropertyNames;\n\nvar $mobx = Symbol(\"mobx administration\");\nvar Atom = /** @class */ (function () {\n    /**\n     * Create a new atom. For debugging purposes it is recommended to give it a name.\n     * The onBecomeObserved and onBecomeUnobserved callbacks can be used for resource management.\n     */\n    function Atom(name) {\n        if (name === void 0) { name = \"Atom@\" + getNextId(); }\n        this.name = name;\n        this.isPendingUnobservation = false; // for effective unobserving. BaseAtom has true, for extra optimization, so its onBecomeUnobserved never gets called, because it's not needed\n        this.isBeingObserved = false;\n        this.observers = new Set();\n        this.diffValue = 0;\n        this.lastAccessedBy = 0;\n        this.lowestObserverState = IDerivationState.NOT_TRACKING;\n    }\n    Atom.prototype.onBecomeObserved = function () {\n        if (this.onBecomeObservedListeners) {\n            this.onBecomeObservedListeners.forEach(function (listener) { return listener(); });\n        }\n    };\n    Atom.prototype.onBecomeUnobserved = function () {\n        if (this.onBecomeUnobservedListeners) {\n            this.onBecomeUnobservedListeners.forEach(function (listener) { return listener(); });\n        }\n    };\n    /**\n     * Invoke this method to notify mobx that your atom has been used somehow.\n     * Returns true if there is currently a reactive context.\n     */\n    Atom.prototype.reportObserved = function () {\n        return reportObserved(this);\n    };\n    /**\n     * Invoke this method _after_ this method has changed to signal mobx that all its observers should invalidate.\n     */\n    Atom.prototype.reportChanged = function () {\n        startBatch();\n        propagateChanged(this);\n        endBatch();\n    };\n    Atom.prototype.toString = function () {\n        return this.name;\n    };\n    return Atom;\n}());\nvar isAtom = createInstanceofPredicate(\"Atom\", Atom);\nfunction createAtom(name, onBecomeObservedHandler, onBecomeUnobservedHandler) {\n    if (onBecomeObservedHandler === void 0) { onBecomeObservedHandler = noop; }\n    if (onBecomeUnobservedHandler === void 0) { onBecomeUnobservedHandler = noop; }\n    var atom = new Atom(name);\n    // default `noop` listener will not initialize the hook Set\n    if (onBecomeObservedHandler !== noop) {\n        onBecomeObserved(atom, onBecomeObservedHandler);\n    }\n    if (onBecomeUnobservedHandler !== noop) {\n        onBecomeUnobserved(atom, onBecomeUnobservedHandler);\n    }\n    return atom;\n}\n\nfunction identityComparer(a, b) {\n    return a === b;\n}\nfunction structuralComparer(a, b) {\n    return deepEqual(a, b);\n}\nfunction shallowComparer(a, b) {\n    return deepEqual(a, b, 1);\n}\nfunction defaultComparer(a, b) {\n    return Object.is(a, b);\n}\nvar comparer = {\n    identity: identityComparer,\n    structural: structuralComparer,\n    default: defaultComparer,\n    shallow: shallowComparer\n};\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nfunction __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nfunction __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\n\nvar mobxDidRunLazyInitializersSymbol = Symbol(\"mobx did run lazy initializers\");\nvar mobxPendingDecorators = Symbol(\"mobx pending decorators\");\nvar enumerableDescriptorCache = {};\nvar nonEnumerableDescriptorCache = {};\nfunction createPropertyInitializerDescriptor(prop, enumerable) {\n    var cache = enumerable ? enumerableDescriptorCache : nonEnumerableDescriptorCache;\n    return (cache[prop] ||\n        (cache[prop] = {\n            configurable: true,\n            enumerable: enumerable,\n            get: function () {\n                initializeInstance(this);\n                return this[prop];\n            },\n            set: function (value) {\n                initializeInstance(this);\n                this[prop] = value;\n            }\n        }));\n}\nfunction initializeInstance(target) {\n    var e_1, _a;\n    if (target[mobxDidRunLazyInitializersSymbol] === true)\n        return;\n    var decorators = target[mobxPendingDecorators];\n    if (decorators) {\n        addHiddenProp(target, mobxDidRunLazyInitializersSymbol, true);\n        // Build property key array from both strings and symbols\n        var keys = __spread(Object.getOwnPropertySymbols(decorators), Object.keys(decorators));\n        try {\n            for (var keys_1 = __values(keys), keys_1_1 = keys_1.next(); !keys_1_1.done; keys_1_1 = keys_1.next()) {\n                var key = keys_1_1.value;\n                var d = decorators[key];\n                d.propertyCreator(target, d.prop, d.descriptor, d.decoratorTarget, d.decoratorArguments);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (keys_1_1 && !keys_1_1.done && (_a = keys_1.return)) _a.call(keys_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    }\n}\nfunction createPropDecorator(propertyInitiallyEnumerable, propertyCreator) {\n    return function decoratorFactory() {\n        var decoratorArguments;\n        var decorator = function decorate(target, prop, descriptor, applyImmediately\n        // This is a special parameter to signal the direct application of a decorator, allow extendObservable to skip the entire type decoration part,\n        // as the instance to apply the decorator to equals the target\n        ) {\n            if (applyImmediately === true) {\n                propertyCreator(target, prop, descriptor, target, decoratorArguments);\n                return null;\n            }\n            if (process.env.NODE_ENV !== \"production\" && !quacksLikeADecorator(arguments))\n                fail(\"This function is a decorator, but it wasn't invoked like a decorator\");\n            if (!Object.prototype.hasOwnProperty.call(target, mobxPendingDecorators)) {\n                var inheritedDecorators = target[mobxPendingDecorators];\n                addHiddenProp(target, mobxPendingDecorators, __assign({}, inheritedDecorators));\n            }\n            target[mobxPendingDecorators][prop] = {\n                prop: prop,\n                propertyCreator: propertyCreator,\n                descriptor: descriptor,\n                decoratorTarget: target,\n                decoratorArguments: decoratorArguments\n            };\n            return createPropertyInitializerDescriptor(prop, propertyInitiallyEnumerable);\n        };\n        if (quacksLikeADecorator(arguments)) {\n            // @decorator\n            decoratorArguments = EMPTY_ARRAY;\n            return decorator.apply(null, arguments);\n        }\n        else {\n            // @decorator(args)\n            decoratorArguments = Array.prototype.slice.call(arguments);\n            return decorator;\n        }\n    };\n}\nfunction quacksLikeADecorator(args) {\n    return (((args.length === 2 || args.length === 3) &&\n        (typeof args[1] === \"string\" || typeof args[1] === \"symbol\")) ||\n        (args.length === 4 && args[3] === true));\n}\n\nfunction deepEnhancer(v, _, name) {\n    // it is an observable already, done\n    if (isObservable(v))\n        return v;\n    // something that can be converted and mutated?\n    if (Array.isArray(v))\n        return observable.array(v, { name: name });\n    if (isPlainObject(v))\n        return observable.object(v, undefined, { name: name });\n    if (isES6Map(v))\n        return observable.map(v, { name: name });\n    if (isES6Set(v))\n        return observable.set(v, { name: name });\n    return v;\n}\nfunction shallowEnhancer(v, _, name) {\n    if (v === undefined || v === null)\n        return v;\n    if (isObservableObject(v) || isObservableArray(v) || isObservableMap(v) || isObservableSet(v))\n        return v;\n    if (Array.isArray(v))\n        return observable.array(v, { name: name, deep: false });\n    if (isPlainObject(v))\n        return observable.object(v, undefined, { name: name, deep: false });\n    if (isES6Map(v))\n        return observable.map(v, { name: name, deep: false });\n    if (isES6Set(v))\n        return observable.set(v, { name: name, deep: false });\n    return fail(process.env.NODE_ENV !== \"production\" &&\n        \"The shallow modifier / decorator can only used in combination with arrays, objects, maps and sets\");\n}\nfunction referenceEnhancer(newValue) {\n    // never turn into an observable\n    return newValue;\n}\nfunction refStructEnhancer(v, oldValue, name) {\n    if (process.env.NODE_ENV !== \"production\" && isObservable(v))\n        throw \"observable.struct should not be used with observable values\";\n    if (deepEqual(v, oldValue))\n        return oldValue;\n    return v;\n}\n\nfunction createDecoratorForEnhancer(enhancer) {\n    invariant(enhancer);\n    var decorator = createPropDecorator(true, function (target, propertyName, descriptor, _decoratorTarget, decoratorArgs) {\n        if (process.env.NODE_ENV !== \"production\") {\n            invariant(!descriptor || !descriptor.get, \"@observable cannot be used on getter (property \\\"\" + stringifyKey(propertyName) + \"\\\"), use @computed instead.\");\n        }\n        var initialValue = descriptor\n            ? descriptor.initializer\n                ? descriptor.initializer.call(target)\n                : descriptor.value\n            : undefined;\n        asObservableObject(target).addObservableProp(propertyName, initialValue, enhancer);\n    });\n    var res = \n    // Extra process checks, as this happens during module initialization\n    typeof process !== \"undefined\" && process.env && process.env.NODE_ENV !== \"production\"\n        ? function observableDecorator() {\n            // This wrapper function is just to detect illegal decorator invocations, deprecate in a next version\n            // and simply return the created prop decorator\n            if (arguments.length < 2)\n                return fail(\"Incorrect decorator invocation. @observable decorator doesn't expect any arguments\");\n            return decorator.apply(null, arguments);\n        }\n        : decorator;\n    res.enhancer = enhancer;\n    return res;\n}\n\n// Predefined bags of create observable options, to avoid allocating temporarily option objects\n// in the majority of cases\nvar defaultCreateObservableOptions = {\n    deep: true,\n    name: undefined,\n    defaultDecorator: undefined,\n    proxy: true\n};\nObject.freeze(defaultCreateObservableOptions);\nfunction assertValidOption(key) {\n    if (!/^(deep|name|equals|defaultDecorator|proxy)$/.test(key))\n        fail(\"invalid option for (extend)observable: \" + key);\n}\nfunction asCreateObservableOptions(thing) {\n    if (thing === null || thing === undefined)\n        return defaultCreateObservableOptions;\n    if (typeof thing === \"string\")\n        return { name: thing, deep: true, proxy: true };\n    if (process.env.NODE_ENV !== \"production\") {\n        if (typeof thing !== \"object\")\n            return fail(\"expected options object\");\n        Object.keys(thing).forEach(assertValidOption);\n    }\n    return thing;\n}\nvar deepDecorator = createDecoratorForEnhancer(deepEnhancer);\nvar shallowDecorator = createDecoratorForEnhancer(shallowEnhancer);\nvar refDecorator = createDecoratorForEnhancer(referenceEnhancer);\nvar refStructDecorator = createDecoratorForEnhancer(refStructEnhancer);\nfunction getEnhancerFromOptions(options) {\n    return options.defaultDecorator\n        ? options.defaultDecorator.enhancer\n        : options.deep === false\n            ? referenceEnhancer\n            : deepEnhancer;\n}\n/**\n * Turns an object, array or function into a reactive structure.\n * @param v the value which should become observable.\n */\nfunction createObservable(v, arg2, arg3) {\n    // @observable someProp;\n    if (typeof arguments[1] === \"string\" || typeof arguments[1] === \"symbol\") {\n        return deepDecorator.apply(null, arguments);\n    }\n    // it is an observable already, done\n    if (isObservable(v))\n        return v;\n    // something that can be converted and mutated?\n    var res = isPlainObject(v)\n        ? observable.object(v, arg2, arg3)\n        : Array.isArray(v)\n            ? observable.array(v, arg2)\n            : isES6Map(v)\n                ? observable.map(v, arg2)\n                : isES6Set(v)\n                    ? observable.set(v, arg2)\n                    : v;\n    // this value could be converted to a new observable data structure, return it\n    if (res !== v)\n        return res;\n    // otherwise, just box it\n    fail(process.env.NODE_ENV !== \"production\" &&\n        \"The provided value could not be converted into an observable. If you want just create an observable reference to the object use 'observable.box(value)'\");\n}\nvar observableFactories = {\n    box: function (value, options) {\n        if (arguments.length > 2)\n            incorrectlyUsedAsDecorator(\"box\");\n        var o = asCreateObservableOptions(options);\n        return new ObservableValue(value, getEnhancerFromOptions(o), o.name, true, o.equals);\n    },\n    array: function (initialValues, options) {\n        if (arguments.length > 2)\n            incorrectlyUsedAsDecorator(\"array\");\n        var o = asCreateObservableOptions(options);\n        return createObservableArray(initialValues, getEnhancerFromOptions(o), o.name);\n    },\n    map: function (initialValues, options) {\n        if (arguments.length > 2)\n            incorrectlyUsedAsDecorator(\"map\");\n        var o = asCreateObservableOptions(options);\n        return new ObservableMap(initialValues, getEnhancerFromOptions(o), o.name);\n    },\n    set: function (initialValues, options) {\n        if (arguments.length > 2)\n            incorrectlyUsedAsDecorator(\"set\");\n        var o = asCreateObservableOptions(options);\n        return new ObservableSet(initialValues, getEnhancerFromOptions(o), o.name);\n    },\n    object: function (props, decorators, options) {\n        if (typeof arguments[1] === \"string\")\n            incorrectlyUsedAsDecorator(\"object\");\n        var o = asCreateObservableOptions(options);\n        if (o.proxy === false) {\n            return extendObservable({}, props, decorators, o);\n        }\n        else {\n            var defaultDecorator = getDefaultDecoratorFromObjectOptions(o);\n            var base = extendObservable({}, undefined, undefined, o);\n            var proxy = createDynamicObservableObject(base);\n            extendObservableObjectWithProperties(proxy, props, decorators, defaultDecorator);\n            return proxy;\n        }\n    },\n    ref: refDecorator,\n    shallow: shallowDecorator,\n    deep: deepDecorator,\n    struct: refStructDecorator\n};\nvar observable = createObservable;\n// weird trick to keep our typings nicely with our funcs, and still extend the observable function\nObject.keys(observableFactories).forEach(function (name) { return (observable[name] = observableFactories[name]); });\nfunction incorrectlyUsedAsDecorator(methodName) {\n    fail(\n    // process.env.NODE_ENV !== \"production\" &&\n    \"Expected one or two arguments to observable.\" + methodName + \". Did you accidentally try to use observable.\" + methodName + \" as decorator?\");\n}\n\nvar computedDecorator = createPropDecorator(false, function (instance, propertyName, descriptor, decoratorTarget, decoratorArgs) {\n    if (process.env.NODE_ENV !== \"production\") {\n        invariant(descriptor && descriptor.get, \"Trying to declare a computed value for unspecified getter '\" + stringifyKey(propertyName) + \"'\");\n    }\n    var get = descriptor.get, set = descriptor.set; // initialValue is the descriptor for get / set props\n    // Optimization: faster on decorator target or instance? Assuming target\n    // Optimization: find out if declaring on instance isn't just faster. (also makes the property descriptor simpler). But, more memory usage..\n    // Forcing instance now, fixes hot reloadig issues on React Native:\n    var options = decoratorArgs[0] || {};\n    asObservableObject(instance).addComputedProp(instance, propertyName, __assign({ get: get,\n        set: set, context: instance }, options));\n});\nvar computedStructDecorator = computedDecorator({ equals: comparer.structural });\n/**\n * Decorator for class properties: @computed get value() { return expr; }.\n * For legacy purposes also invokable as ES5 observable created: `computed(() => expr)`;\n */\nvar computed = function computed(arg1, arg2, arg3) {\n    if (typeof arg2 === \"string\") {\n        // @computed\n        return computedDecorator.apply(null, arguments);\n    }\n    if (arg1 !== null && typeof arg1 === \"object\" && arguments.length === 1) {\n        // @computed({ options })\n        return computedDecorator.apply(null, arguments);\n    }\n    // computed(expr, options?)\n    if (process.env.NODE_ENV !== \"production\") {\n        invariant(typeof arg1 === \"function\", \"First argument to `computed` should be an expression.\");\n        invariant(arguments.length < 3, \"Computed takes one or two arguments if used as function\");\n    }\n    var opts = typeof arg2 === \"object\" ? arg2 : {};\n    opts.get = arg1;\n    opts.set = typeof arg2 === \"function\" ? arg2 : opts.set;\n    opts.name = opts.name || arg1.name || \"\"; /* for generated name */\n    return new ComputedValue(opts);\n};\ncomputed.struct = computedStructDecorator;\n\nvar IDerivationState;\n(function (IDerivationState) {\n    // before being run or (outside batch and not being observed)\n    // at this point derivation is not holding any data about dependency tree\n    IDerivationState[IDerivationState[\"NOT_TRACKING\"] = -1] = \"NOT_TRACKING\";\n    // no shallow dependency changed since last computation\n    // won't recalculate derivation\n    // this is what makes mobx fast\n    IDerivationState[IDerivationState[\"UP_TO_DATE\"] = 0] = \"UP_TO_DATE\";\n    // some deep dependency changed, but don't know if shallow dependency changed\n    // will require to check first if UP_TO_DATE or POSSIBLY_STALE\n    // currently only ComputedValue will propagate POSSIBLY_STALE\n    //\n    // having this state is second big optimization:\n    // don't have to recompute on every dependency change, but only when it's needed\n    IDerivationState[IDerivationState[\"POSSIBLY_STALE\"] = 1] = \"POSSIBLY_STALE\";\n    // A shallow dependency has changed since last computation and the derivation\n    // will need to recompute when it's needed next.\n    IDerivationState[IDerivationState[\"STALE\"] = 2] = \"STALE\";\n})(IDerivationState || (IDerivationState = {}));\nvar TraceMode;\n(function (TraceMode) {\n    TraceMode[TraceMode[\"NONE\"] = 0] = \"NONE\";\n    TraceMode[TraceMode[\"LOG\"] = 1] = \"LOG\";\n    TraceMode[TraceMode[\"BREAK\"] = 2] = \"BREAK\";\n})(TraceMode || (TraceMode = {}));\nvar CaughtException = /** @class */ (function () {\n    function CaughtException(cause) {\n        this.cause = cause;\n        // Empty\n    }\n    return CaughtException;\n}());\nfunction isCaughtException(e) {\n    return e instanceof CaughtException;\n}\n/**\n * Finds out whether any dependency of the derivation has actually changed.\n * If dependenciesState is 1 then it will recalculate dependencies,\n * if any dependency changed it will propagate it by changing dependenciesState to 2.\n *\n * By iterating over the dependencies in the same order that they were reported and\n * stopping on the first change, all the recalculations are only called for ComputedValues\n * that will be tracked by derivation. That is because we assume that if the first x\n * dependencies of the derivation doesn't change then the derivation should run the same way\n * up until accessing x-th dependency.\n */\nfunction shouldCompute(derivation) {\n    switch (derivation.dependenciesState) {\n        case IDerivationState.UP_TO_DATE:\n            return false;\n        case IDerivationState.NOT_TRACKING:\n        case IDerivationState.STALE:\n            return true;\n        case IDerivationState.POSSIBLY_STALE: {\n            // state propagation can occur outside of action/reactive context #2195\n            var prevAllowStateReads = allowStateReadsStart(true);\n            var prevUntracked = untrackedStart(); // no need for those computeds to be reported, they will be picked up in trackDerivedFunction.\n            var obs = derivation.observing, l = obs.length;\n            for (var i = 0; i < l; i++) {\n                var obj = obs[i];\n                if (isComputedValue(obj)) {\n                    if (globalState.disableErrorBoundaries) {\n                        obj.get();\n                    }\n                    else {\n                        try {\n                            obj.get();\n                        }\n                        catch (e) {\n                            // we are not interested in the value *or* exception at this moment, but if there is one, notify all\n                            untrackedEnd(prevUntracked);\n                            allowStateReadsEnd(prevAllowStateReads);\n                            return true;\n                        }\n                    }\n                    // if ComputedValue `obj` actually changed it will be computed and propagated to its observers.\n                    // and `derivation` is an observer of `obj`\n                    // invariantShouldCompute(derivation)\n                    if (derivation.dependenciesState === IDerivationState.STALE) {\n                        untrackedEnd(prevUntracked);\n                        allowStateReadsEnd(prevAllowStateReads);\n                        return true;\n                    }\n                }\n            }\n            changeDependenciesStateTo0(derivation);\n            untrackedEnd(prevUntracked);\n            allowStateReadsEnd(prevAllowStateReads);\n            return false;\n        }\n    }\n}\n// function invariantShouldCompute(derivation: IDerivation) {\n//     const newDepState = (derivation as any).dependenciesState\n//     if (\n//         process.env.NODE_ENV === \"production\" &&\n//         (newDepState === IDerivationState.POSSIBLY_STALE ||\n//             newDepState === IDerivationState.NOT_TRACKING)\n//     )\n//         fail(\"Illegal dependency state\")\n// }\nfunction isComputingDerivation() {\n    return globalState.trackingDerivation !== null; // filter out actions inside computations\n}\nfunction checkIfStateModificationsAreAllowed(atom) {\n    var hasObservers = atom.observers.size > 0;\n    // Should never be possible to change an observed observable from inside computed, see #798\n    if (globalState.computationDepth > 0 && hasObservers)\n        fail(process.env.NODE_ENV !== \"production\" &&\n            \"Computed values are not allowed to cause side effects by changing observables that are already being observed. Tried to modify: \" + atom.name);\n    // Should not be possible to change observed state outside strict mode, except during initialization, see #563\n    if (!globalState.allowStateChanges && (hasObservers || globalState.enforceActions === \"strict\"))\n        fail(process.env.NODE_ENV !== \"production\" &&\n            (globalState.enforceActions\n                ? \"Since strict-mode is enabled, changing observed observable values outside actions is not allowed. Please wrap the code in an `action` if this change is intended. Tried to modify: \"\n                : \"Side effects like changing state are not allowed at this point. Are you trying to modify state from, for example, the render function of a React component? Tried to modify: \") +\n                atom.name);\n}\nfunction checkIfStateReadsAreAllowed(observable) {\n    if (process.env.NODE_ENV !== \"production\" &&\n        !globalState.allowStateReads &&\n        globalState.observableRequiresReaction) {\n        console.warn(\"[mobx] Observable \" + observable.name + \" being read outside a reactive context\");\n    }\n}\n/**\n * Executes the provided function `f` and tracks which observables are being accessed.\n * The tracking information is stored on the `derivation` object and the derivation is registered\n * as observer of any of the accessed observables.\n */\nfunction trackDerivedFunction(derivation, f, context) {\n    var prevAllowStateReads = allowStateReadsStart(true);\n    // pre allocate array allocation + room for variation in deps\n    // array will be trimmed by bindDependencies\n    changeDependenciesStateTo0(derivation);\n    derivation.newObserving = new Array(derivation.observing.length + 100);\n    derivation.unboundDepsCount = 0;\n    derivation.runId = ++globalState.runId;\n    var prevTracking = globalState.trackingDerivation;\n    globalState.trackingDerivation = derivation;\n    var result;\n    if (globalState.disableErrorBoundaries === true) {\n        result = f.call(context);\n    }\n    else {\n        try {\n            result = f.call(context);\n        }\n        catch (e) {\n            result = new CaughtException(e);\n        }\n    }\n    globalState.trackingDerivation = prevTracking;\n    bindDependencies(derivation);\n    warnAboutDerivationWithoutDependencies(derivation);\n    allowStateReadsEnd(prevAllowStateReads);\n    return result;\n}\nfunction warnAboutDerivationWithoutDependencies(derivation) {\n    if (process.env.NODE_ENV === \"production\")\n        return;\n    if (derivation.observing.length !== 0)\n        return;\n    if (globalState.reactionRequiresObservable || derivation.requiresObservable) {\n        console.warn(\"[mobx] Derivation \" + derivation.name + \" is created/updated without reading any observable value\");\n    }\n}\n/**\n * diffs newObserving with observing.\n * update observing to be newObserving with unique observables\n * notify observers that become observed/unobserved\n */\nfunction bindDependencies(derivation) {\n    // invariant(derivation.dependenciesState !== IDerivationState.NOT_TRACKING, \"INTERNAL ERROR bindDependencies expects derivation.dependenciesState !== -1\");\n    var prevObserving = derivation.observing;\n    var observing = (derivation.observing = derivation.newObserving);\n    var lowestNewObservingDerivationState = IDerivationState.UP_TO_DATE;\n    // Go through all new observables and check diffValue: (this list can contain duplicates):\n    //   0: first occurrence, change to 1 and keep it\n    //   1: extra occurrence, drop it\n    var i0 = 0, l = derivation.unboundDepsCount;\n    for (var i = 0; i < l; i++) {\n        var dep = observing[i];\n        if (dep.diffValue === 0) {\n            dep.diffValue = 1;\n            if (i0 !== i)\n                observing[i0] = dep;\n            i0++;\n        }\n        // Upcast is 'safe' here, because if dep is IObservable, `dependenciesState` will be undefined,\n        // not hitting the condition\n        if (dep.dependenciesState > lowestNewObservingDerivationState) {\n            lowestNewObservingDerivationState = dep.dependenciesState;\n        }\n    }\n    observing.length = i0;\n    derivation.newObserving = null; // newObserving shouldn't be needed outside tracking (statement moved down to work around FF bug, see #614)\n    // Go through all old observables and check diffValue: (it is unique after last bindDependencies)\n    //   0: it's not in new observables, unobserve it\n    //   1: it keeps being observed, don't want to notify it. change to 0\n    l = prevObserving.length;\n    while (l--) {\n        var dep = prevObserving[l];\n        if (dep.diffValue === 0) {\n            removeObserver(dep, derivation);\n        }\n        dep.diffValue = 0;\n    }\n    // Go through all new observables and check diffValue: (now it should be unique)\n    //   0: it was set to 0 in last loop. don't need to do anything.\n    //   1: it wasn't observed, let's observe it. set back to 0\n    while (i0--) {\n        var dep = observing[i0];\n        if (dep.diffValue === 1) {\n            dep.diffValue = 0;\n            addObserver(dep, derivation);\n        }\n    }\n    // Some new observed derivations may become stale during this derivation computation\n    // so they have had no chance to propagate staleness (#916)\n    if (lowestNewObservingDerivationState !== IDerivationState.UP_TO_DATE) {\n        derivation.dependenciesState = lowestNewObservingDerivationState;\n        derivation.onBecomeStale();\n    }\n}\nfunction clearObserving(derivation) {\n    // invariant(globalState.inBatch > 0, \"INTERNAL ERROR clearObserving should be called only inside batch\");\n    var obs = derivation.observing;\n    derivation.observing = [];\n    var i = obs.length;\n    while (i--)\n        removeObserver(obs[i], derivation);\n    derivation.dependenciesState = IDerivationState.NOT_TRACKING;\n}\nfunction untracked(action) {\n    var prev = untrackedStart();\n    try {\n        return action();\n    }\n    finally {\n        untrackedEnd(prev);\n    }\n}\nfunction untrackedStart() {\n    var prev = globalState.trackingDerivation;\n    globalState.trackingDerivation = null;\n    return prev;\n}\nfunction untrackedEnd(prev) {\n    globalState.trackingDerivation = prev;\n}\nfunction allowStateReadsStart(allowStateReads) {\n    var prev = globalState.allowStateReads;\n    globalState.allowStateReads = allowStateReads;\n    return prev;\n}\nfunction allowStateReadsEnd(prev) {\n    globalState.allowStateReads = prev;\n}\n/**\n * needed to keep `lowestObserverState` correct. when changing from (2 or 1) to 0\n *\n */\nfunction changeDependenciesStateTo0(derivation) {\n    if (derivation.dependenciesState === IDerivationState.UP_TO_DATE)\n        return;\n    derivation.dependenciesState = IDerivationState.UP_TO_DATE;\n    var obs = derivation.observing;\n    var i = obs.length;\n    while (i--)\n        obs[i].lowestObserverState = IDerivationState.UP_TO_DATE;\n}\n\n// we don't use globalState for these in order to avoid possible issues with multiple\n// mobx versions\nvar currentActionId = 0;\nvar nextActionId = 1;\nvar functionNameDescriptor = Object.getOwnPropertyDescriptor(function () { }, \"name\");\nvar isFunctionNameConfigurable = functionNameDescriptor && functionNameDescriptor.configurable;\nfunction createAction(actionName, fn, ref) {\n    if (process.env.NODE_ENV !== \"production\") {\n        invariant(typeof fn === \"function\", \"`action` can only be invoked on functions\");\n        if (typeof actionName !== \"string\" || !actionName)\n            fail(\"actions should have valid names, got: '\" + actionName + \"'\");\n    }\n    var res = function () {\n        return executeAction(actionName, fn, ref || this, arguments);\n    };\n    res.isMobxAction = true;\n    if (process.env.NODE_ENV !== \"production\") {\n        if (isFunctionNameConfigurable) {\n            Object.defineProperty(res, \"name\", { value: actionName });\n        }\n    }\n    return res;\n}\nfunction executeAction(actionName, fn, scope, args) {\n    var runInfo = _startAction(actionName, scope, args);\n    try {\n        return fn.apply(scope, args);\n    }\n    catch (err) {\n        runInfo.error = err;\n        throw err;\n    }\n    finally {\n        _endAction(runInfo);\n    }\n}\nfunction _startAction(actionName, scope, args) {\n    var notifySpy = isSpyEnabled() && !!actionName;\n    var startTime = 0;\n    if (notifySpy && process.env.NODE_ENV !== \"production\") {\n        startTime = Date.now();\n        var l = (args && args.length) || 0;\n        var flattendArgs = new Array(l);\n        if (l > 0)\n            for (var i = 0; i < l; i++)\n                flattendArgs[i] = args[i];\n        spyReportStart({\n            type: \"action\",\n            name: actionName,\n            object: scope,\n            arguments: flattendArgs\n        });\n    }\n    var prevDerivation = untrackedStart();\n    startBatch();\n    var prevAllowStateChanges = allowStateChangesStart(true);\n    var prevAllowStateReads = allowStateReadsStart(true);\n    var runInfo = {\n        prevDerivation: prevDerivation,\n        prevAllowStateChanges: prevAllowStateChanges,\n        prevAllowStateReads: prevAllowStateReads,\n        notifySpy: notifySpy,\n        startTime: startTime,\n        actionId: nextActionId++,\n        parentActionId: currentActionId\n    };\n    currentActionId = runInfo.actionId;\n    return runInfo;\n}\nfunction _endAction(runInfo) {\n    if (currentActionId !== runInfo.actionId) {\n        fail(\"invalid action stack. did you forget to finish an action?\");\n    }\n    currentActionId = runInfo.parentActionId;\n    if (runInfo.error !== undefined) {\n        globalState.suppressReactionErrors = true;\n    }\n    allowStateChangesEnd(runInfo.prevAllowStateChanges);\n    allowStateReadsEnd(runInfo.prevAllowStateReads);\n    endBatch();\n    untrackedEnd(runInfo.prevDerivation);\n    if (runInfo.notifySpy && process.env.NODE_ENV !== \"production\") {\n        spyReportEnd({ time: Date.now() - runInfo.startTime });\n    }\n    globalState.suppressReactionErrors = false;\n}\nfunction allowStateChanges(allowStateChanges, func) {\n    var prev = allowStateChangesStart(allowStateChanges);\n    var res;\n    try {\n        res = func();\n    }\n    finally {\n        allowStateChangesEnd(prev);\n    }\n    return res;\n}\nfunction allowStateChangesStart(allowStateChanges) {\n    var prev = globalState.allowStateChanges;\n    globalState.allowStateChanges = allowStateChanges;\n    return prev;\n}\nfunction allowStateChangesEnd(prev) {\n    globalState.allowStateChanges = prev;\n}\nfunction allowStateChangesInsideComputed(func) {\n    var prev = globalState.computationDepth;\n    globalState.computationDepth = 0;\n    var res;\n    try {\n        res = func();\n    }\n    finally {\n        globalState.computationDepth = prev;\n    }\n    return res;\n}\n\nvar ObservableValue = /** @class */ (function (_super) {\n    __extends(ObservableValue, _super);\n    function ObservableValue(value, enhancer, name, notifySpy, equals) {\n        if (name === void 0) { name = \"ObservableValue@\" + getNextId(); }\n        if (notifySpy === void 0) { notifySpy = true; }\n        if (equals === void 0) { equals = comparer.default; }\n        var _this = _super.call(this, name) || this;\n        _this.enhancer = enhancer;\n        _this.name = name;\n        _this.equals = equals;\n        _this.hasUnreportedChange = false;\n        _this.value = enhancer(value, undefined, name);\n        if (notifySpy && isSpyEnabled() && process.env.NODE_ENV !== \"production\") {\n            // only notify spy if this is a stand-alone observable\n            spyReport({ type: \"create\", name: _this.name, newValue: \"\" + _this.value });\n        }\n        return _this;\n    }\n    ObservableValue.prototype.dehanceValue = function (value) {\n        if (this.dehancer !== undefined)\n            return this.dehancer(value);\n        return value;\n    };\n    ObservableValue.prototype.set = function (newValue) {\n        var oldValue = this.value;\n        newValue = this.prepareNewValue(newValue);\n        if (newValue !== globalState.UNCHANGED) {\n            var notifySpy = isSpyEnabled();\n            if (notifySpy && process.env.NODE_ENV !== \"production\") {\n                spyReportStart({\n                    type: \"update\",\n                    name: this.name,\n                    newValue: newValue,\n                    oldValue: oldValue\n                });\n            }\n            this.setNewValue(newValue);\n            if (notifySpy && process.env.NODE_ENV !== \"production\")\n                spyReportEnd();\n        }\n    };\n    ObservableValue.prototype.prepareNewValue = function (newValue) {\n        checkIfStateModificationsAreAllowed(this);\n        if (hasInterceptors(this)) {\n            var change = interceptChange(this, {\n                object: this,\n                type: \"update\",\n                newValue: newValue\n            });\n            if (!change)\n                return globalState.UNCHANGED;\n            newValue = change.newValue;\n        }\n        // apply modifier\n        newValue = this.enhancer(newValue, this.value, this.name);\n        return this.equals(this.value, newValue) ? globalState.UNCHANGED : newValue;\n    };\n    ObservableValue.prototype.setNewValue = function (newValue) {\n        var oldValue = this.value;\n        this.value = newValue;\n        this.reportChanged();\n        if (hasListeners(this)) {\n            notifyListeners(this, {\n                type: \"update\",\n                object: this,\n                newValue: newValue,\n                oldValue: oldValue\n            });\n        }\n    };\n    ObservableValue.prototype.get = function () {\n        this.reportObserved();\n        return this.dehanceValue(this.value);\n    };\n    ObservableValue.prototype.intercept = function (handler) {\n        return registerInterceptor(this, handler);\n    };\n    ObservableValue.prototype.observe = function (listener, fireImmediately) {\n        if (fireImmediately)\n            listener({\n                object: this,\n                type: \"update\",\n                newValue: this.value,\n                oldValue: undefined\n            });\n        return registerListener(this, listener);\n    };\n    ObservableValue.prototype.toJSON = function () {\n        return this.get();\n    };\n    ObservableValue.prototype.toString = function () {\n        return this.name + \"[\" + this.value + \"]\";\n    };\n    ObservableValue.prototype.valueOf = function () {\n        return toPrimitive(this.get());\n    };\n    ObservableValue.prototype[Symbol.toPrimitive] = function () {\n        return this.valueOf();\n    };\n    return ObservableValue;\n}(Atom));\nvar isObservableValue = createInstanceofPredicate(\"ObservableValue\", ObservableValue);\n\n/**\n * A node in the state dependency root that observes other nodes, and can be observed itself.\n *\n * ComputedValue will remember the result of the computation for the duration of the batch, or\n * while being observed.\n *\n * During this time it will recompute only when one of its direct dependencies changed,\n * but only when it is being accessed with `ComputedValue.get()`.\n *\n * Implementation description:\n * 1. First time it's being accessed it will compute and remember result\n *    give back remembered result until 2. happens\n * 2. First time any deep dependency change, propagate POSSIBLY_STALE to all observers, wait for 3.\n * 3. When it's being accessed, recompute if any shallow dependency changed.\n *    if result changed: propagate STALE to all observers, that were POSSIBLY_STALE from the last step.\n *    go to step 2. either way\n *\n * If at any point it's outside batch and it isn't observed: reset everything and go to 1.\n */\nvar ComputedValue = /** @class */ (function () {\n    /**\n     * Create a new computed value based on a function expression.\n     *\n     * The `name` property is for debug purposes only.\n     *\n     * The `equals` property specifies the comparer function to use to determine if a newly produced\n     * value differs from the previous value. Two comparers are provided in the library; `defaultComparer`\n     * compares based on identity comparison (===), and `structualComparer` deeply compares the structure.\n     * Structural comparison can be convenient if you always produce a new aggregated object and\n     * don't want to notify observers if it is structurally the same.\n     * This is useful for working with vectors, mouse coordinates etc.\n     */\n    function ComputedValue(options) {\n        this.dependenciesState = IDerivationState.NOT_TRACKING;\n        this.observing = []; // nodes we are looking at. Our value depends on these nodes\n        this.newObserving = null; // during tracking it's an array with new observed observers\n        this.isBeingObserved = false;\n        this.isPendingUnobservation = false;\n        this.observers = new Set();\n        this.diffValue = 0;\n        this.runId = 0;\n        this.lastAccessedBy = 0;\n        this.lowestObserverState = IDerivationState.UP_TO_DATE;\n        this.unboundDepsCount = 0;\n        this.__mapid = \"#\" + getNextId();\n        this.value = new CaughtException(null);\n        this.isComputing = false; // to check for cycles\n        this.isRunningSetter = false;\n        this.isTracing = TraceMode.NONE;\n        invariant(options.get, \"missing option for computed: get\");\n        this.derivation = options.get;\n        this.name = options.name || \"ComputedValue@\" + getNextId();\n        if (options.set)\n            this.setter = createAction(this.name + \"-setter\", options.set);\n        this.equals =\n            options.equals ||\n                (options.compareStructural || options.struct\n                    ? comparer.structural\n                    : comparer.default);\n        this.scope = options.context;\n        this.requiresReaction = !!options.requiresReaction;\n        this.keepAlive = !!options.keepAlive;\n    }\n    ComputedValue.prototype.onBecomeStale = function () {\n        propagateMaybeChanged(this);\n    };\n    ComputedValue.prototype.onBecomeObserved = function () {\n        if (this.onBecomeObservedListeners) {\n            this.onBecomeObservedListeners.forEach(function (listener) { return listener(); });\n        }\n    };\n    ComputedValue.prototype.onBecomeUnobserved = function () {\n        if (this.onBecomeUnobservedListeners) {\n            this.onBecomeUnobservedListeners.forEach(function (listener) { return listener(); });\n        }\n    };\n    /**\n     * Returns the current value of this computed value.\n     * Will evaluate its computation first if needed.\n     */\n    ComputedValue.prototype.get = function () {\n        if (this.isComputing)\n            fail(\"Cycle detected in computation \" + this.name + \": \" + this.derivation);\n        if (globalState.inBatch === 0 && this.observers.size === 0 && !this.keepAlive) {\n            if (shouldCompute(this)) {\n                this.warnAboutUntrackedRead();\n                startBatch(); // See perf test 'computed memoization'\n                this.value = this.computeValue(false);\n                endBatch();\n            }\n        }\n        else {\n            reportObserved(this);\n            if (shouldCompute(this))\n                if (this.trackAndCompute())\n                    propagateChangeConfirmed(this);\n        }\n        var result = this.value;\n        if (isCaughtException(result))\n            throw result.cause;\n        return result;\n    };\n    ComputedValue.prototype.peek = function () {\n        var res = this.computeValue(false);\n        if (isCaughtException(res))\n            throw res.cause;\n        return res;\n    };\n    ComputedValue.prototype.set = function (value) {\n        if (this.setter) {\n            invariant(!this.isRunningSetter, \"The setter of computed value '\" + this.name + \"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?\");\n            this.isRunningSetter = true;\n            try {\n                this.setter.call(this.scope, value);\n            }\n            finally {\n                this.isRunningSetter = false;\n            }\n        }\n        else\n            invariant(false, process.env.NODE_ENV !== \"production\" &&\n                \"[ComputedValue '\" + this.name + \"'] It is not possible to assign a new value to a computed value.\");\n    };\n    ComputedValue.prototype.trackAndCompute = function () {\n        if (isSpyEnabled() && process.env.NODE_ENV !== \"production\") {\n            spyReport({\n                object: this.scope,\n                type: \"compute\",\n                name: this.name\n            });\n        }\n        var oldValue = this.value;\n        var wasSuspended = \n        /* see #1208 */ this.dependenciesState === IDerivationState.NOT_TRACKING;\n        var newValue = this.computeValue(true);\n        var changed = wasSuspended ||\n            isCaughtException(oldValue) ||\n            isCaughtException(newValue) ||\n            !this.equals(oldValue, newValue);\n        if (changed) {\n            this.value = newValue;\n        }\n        return changed;\n    };\n    ComputedValue.prototype.computeValue = function (track) {\n        this.isComputing = true;\n        globalState.computationDepth++;\n        var res;\n        if (track) {\n            res = trackDerivedFunction(this, this.derivation, this.scope);\n        }\n        else {\n            if (globalState.disableErrorBoundaries === true) {\n                res = this.derivation.call(this.scope);\n            }\n            else {\n                try {\n                    res = this.derivation.call(this.scope);\n                }\n                catch (e) {\n                    res = new CaughtException(e);\n                }\n            }\n        }\n        globalState.computationDepth--;\n        this.isComputing = false;\n        return res;\n    };\n    ComputedValue.prototype.suspend = function () {\n        if (!this.keepAlive) {\n            clearObserving(this);\n            this.value = undefined; // don't hold on to computed value!\n        }\n    };\n    ComputedValue.prototype.observe = function (listener, fireImmediately) {\n        var _this = this;\n        var firstTime = true;\n        var prevValue = undefined;\n        return autorun(function () {\n            var newValue = _this.get();\n            if (!firstTime || fireImmediately) {\n                var prevU = untrackedStart();\n                listener({\n                    type: \"update\",\n                    object: _this,\n                    newValue: newValue,\n                    oldValue: prevValue\n                });\n                untrackedEnd(prevU);\n            }\n            firstTime = false;\n            prevValue = newValue;\n        });\n    };\n    ComputedValue.prototype.warnAboutUntrackedRead = function () {\n        if (process.env.NODE_ENV === \"production\")\n            return;\n        if (this.requiresReaction === true) {\n            fail(\"[mobx] Computed value \" + this.name + \" is read outside a reactive context\");\n        }\n        if (this.isTracing !== TraceMode.NONE) {\n            console.log(\"[mobx.trace] '\" + this.name + \"' is being read outside a reactive context. Doing a full recompute\");\n        }\n        if (globalState.computedRequiresReaction) {\n            console.warn(\"[mobx] Computed value \" + this.name + \" is being read outside a reactive context. Doing a full recompute\");\n        }\n    };\n    ComputedValue.prototype.toJSON = function () {\n        return this.get();\n    };\n    ComputedValue.prototype.toString = function () {\n        return this.name + \"[\" + this.derivation.toString() + \"]\";\n    };\n    ComputedValue.prototype.valueOf = function () {\n        return toPrimitive(this.get());\n    };\n    ComputedValue.prototype[Symbol.toPrimitive] = function () {\n        return this.valueOf();\n    };\n    return ComputedValue;\n}());\nvar isComputedValue = createInstanceofPredicate(\"ComputedValue\", ComputedValue);\n\n/**\n * These values will persist if global state is reset\n */\nvar persistentKeys = [\n    \"mobxGuid\",\n    \"spyListeners\",\n    \"enforceActions\",\n    \"computedRequiresReaction\",\n    \"reactionRequiresObservable\",\n    \"observableRequiresReaction\",\n    \"allowStateReads\",\n    \"disableErrorBoundaries\",\n    \"runId\",\n    \"UNCHANGED\"\n];\nvar MobXGlobals = /** @class */ (function () {\n    function MobXGlobals() {\n        /**\n         * MobXGlobals version.\n         * MobX compatiblity with other versions loaded in memory as long as this version matches.\n         * It indicates that the global state still stores similar information\n         *\n         * N.B: this version is unrelated to the package version of MobX, and is only the version of the\n         * internal state storage of MobX, and can be the same across many different package versions\n         */\n        this.version = 5;\n        /**\n         * globally unique token to signal unchanged\n         */\n        this.UNCHANGED = {};\n        /**\n         * Currently running derivation\n         */\n        this.trackingDerivation = null;\n        /**\n         * Are we running a computation currently? (not a reaction)\n         */\n        this.computationDepth = 0;\n        /**\n         * Each time a derivation is tracked, it is assigned a unique run-id\n         */\n        this.runId = 0;\n        /**\n         * 'guid' for general purpose. Will be persisted amongst resets.\n         */\n        this.mobxGuid = 0;\n        /**\n         * Are we in a batch block? (and how many of them)\n         */\n        this.inBatch = 0;\n        /**\n         * Observables that don't have observers anymore, and are about to be\n         * suspended, unless somebody else accesses it in the same batch\n         *\n         * @type {IObservable[]}\n         */\n        this.pendingUnobservations = [];\n        /**\n         * List of scheduled, not yet executed, reactions.\n         */\n        this.pendingReactions = [];\n        /**\n         * Are we currently processing reactions?\n         */\n        this.isRunningReactions = false;\n        /**\n         * Is it allowed to change observables at this point?\n         * In general, MobX doesn't allow that when running computations and React.render.\n         * To ensure that those functions stay pure.\n         */\n        this.allowStateChanges = true;\n        /**\n         * Is it allowed to read observables at this point?\n         * Used to hold the state needed for `observableRequiresReaction`\n         */\n        this.allowStateReads = true;\n        /**\n         * If strict mode is enabled, state changes are by default not allowed\n         */\n        this.enforceActions = false;\n        /**\n         * Spy callbacks\n         */\n        this.spyListeners = [];\n        /**\n         * Globally attached error handlers that react specifically to errors in reactions\n         */\n        this.globalReactionErrorHandlers = [];\n        /**\n         * Warn if computed values are accessed outside a reactive context\n         */\n        this.computedRequiresReaction = false;\n        /**\n         * (Experimental)\n         * Warn if you try to create to derivation / reactive context without accessing any observable.\n         */\n        this.reactionRequiresObservable = false;\n        /**\n         * (Experimental)\n         * Warn if observables are accessed outside a reactive context\n         */\n        this.observableRequiresReaction = false;\n        /**\n         * Allows overwriting of computed properties, useful in tests but not prod as it can cause\n         * memory leaks. See https://github.com/mobxjs/mobx/issues/1867\n         */\n        this.computedConfigurable = false;\n        /*\n         * Don't catch and rethrow exceptions. This is useful for inspecting the state of\n         * the stack when an exception occurs while debugging.\n         */\n        this.disableErrorBoundaries = false;\n        /*\n         * If true, we are already handling an exception in an action. Any errors in reactions should be suppressed, as\n         * they are not the cause, see: https://github.com/mobxjs/mobx/issues/1836\n         */\n        this.suppressReactionErrors = false;\n    }\n    return MobXGlobals;\n}());\nvar mockGlobal = {};\nfunction getGlobal() {\n    if (typeof window !== \"undefined\") {\n        return window;\n    }\n    if (typeof global !== \"undefined\") {\n        return global;\n    }\n    if (typeof self !== \"undefined\") {\n        return self;\n    }\n    return mockGlobal;\n}\nvar canMergeGlobalState = true;\nvar isolateCalled = false;\nvar globalState = (function () {\n    var global = getGlobal();\n    if (global.__mobxInstanceCount > 0 && !global.__mobxGlobals)\n        canMergeGlobalState = false;\n    if (global.__mobxGlobals && global.__mobxGlobals.version !== new MobXGlobals().version)\n        canMergeGlobalState = false;\n    if (!canMergeGlobalState) {\n        setTimeout(function () {\n            if (!isolateCalled) {\n                fail(\"There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`\");\n            }\n        }, 1);\n        return new MobXGlobals();\n    }\n    else if (global.__mobxGlobals) {\n        global.__mobxInstanceCount += 1;\n        if (!global.__mobxGlobals.UNCHANGED)\n            global.__mobxGlobals.UNCHANGED = {}; // make merge backward compatible\n        return global.__mobxGlobals;\n    }\n    else {\n        global.__mobxInstanceCount = 1;\n        return (global.__mobxGlobals = new MobXGlobals());\n    }\n})();\nfunction isolateGlobalState() {\n    if (globalState.pendingReactions.length ||\n        globalState.inBatch ||\n        globalState.isRunningReactions)\n        fail(\"isolateGlobalState should be called before MobX is running any reactions\");\n    isolateCalled = true;\n    if (canMergeGlobalState) {\n        if (--getGlobal().__mobxInstanceCount === 0)\n            getGlobal().__mobxGlobals = undefined;\n        globalState = new MobXGlobals();\n    }\n}\nfunction getGlobalState() {\n    return globalState;\n}\n/**\n * For testing purposes only; this will break the internal state of existing observables,\n * but can be used to get back at a stable state after throwing errors\n */\nfunction resetGlobalState() {\n    var defaultGlobals = new MobXGlobals();\n    for (var key in defaultGlobals)\n        if (persistentKeys.indexOf(key) === -1)\n            globalState[key] = defaultGlobals[key];\n    globalState.allowStateChanges = !globalState.enforceActions;\n}\n\nfunction hasObservers(observable) {\n    return observable.observers && observable.observers.size > 0;\n}\nfunction getObservers(observable) {\n    return observable.observers;\n}\n// function invariantObservers(observable: IObservable) {\n//     const list = observable.observers\n//     const map = observable.observersIndexes\n//     const l = list.length\n//     for (let i = 0; i < l; i++) {\n//         const id = list[i].__mapid\n//         if (i) {\n//             invariant(map[id] === i, \"INTERNAL ERROR maps derivation.__mapid to index in list\") // for performance\n//         } else {\n//             invariant(!(id in map), \"INTERNAL ERROR observer on index 0 shouldn't be held in map.\") // for performance\n//         }\n//     }\n//     invariant(\n//         list.length === 0 || Object.keys(map).length === list.length - 1,\n//         \"INTERNAL ERROR there is no junk in map\"\n//     )\n// }\nfunction addObserver(observable, node) {\n    // invariant(node.dependenciesState !== -1, \"INTERNAL ERROR, can add only dependenciesState !== -1\");\n    // invariant(observable._observers.indexOf(node) === -1, \"INTERNAL ERROR add already added node\");\n    // invariantObservers(observable);\n    observable.observers.add(node);\n    if (observable.lowestObserverState > node.dependenciesState)\n        observable.lowestObserverState = node.dependenciesState;\n    // invariantObservers(observable);\n    // invariant(observable._observers.indexOf(node) !== -1, \"INTERNAL ERROR didn't add node\");\n}\nfunction removeObserver(observable, node) {\n    // invariant(globalState.inBatch > 0, \"INTERNAL ERROR, remove should be called only inside batch\");\n    // invariant(observable._observers.indexOf(node) !== -1, \"INTERNAL ERROR remove already removed node\");\n    // invariantObservers(observable);\n    observable.observers.delete(node);\n    if (observable.observers.size === 0) {\n        // deleting last observer\n        queueForUnobservation(observable);\n    }\n    // invariantObservers(observable);\n    // invariant(observable._observers.indexOf(node) === -1, \"INTERNAL ERROR remove already removed node2\");\n}\nfunction queueForUnobservation(observable) {\n    if (observable.isPendingUnobservation === false) {\n        // invariant(observable._observers.length === 0, \"INTERNAL ERROR, should only queue for unobservation unobserved observables\");\n        observable.isPendingUnobservation = true;\n        globalState.pendingUnobservations.push(observable);\n    }\n}\n/**\n * Batch starts a transaction, at least for purposes of memoizing ComputedValues when nothing else does.\n * During a batch `onBecomeUnobserved` will be called at most once per observable.\n * Avoids unnecessary recalculations.\n */\nfunction startBatch() {\n    globalState.inBatch++;\n}\nfunction endBatch() {\n    if (--globalState.inBatch === 0) {\n        runReactions();\n        // the batch is actually about to finish, all unobserving should happen here.\n        var list = globalState.pendingUnobservations;\n        for (var i = 0; i < list.length; i++) {\n            var observable = list[i];\n            observable.isPendingUnobservation = false;\n            if (observable.observers.size === 0) {\n                if (observable.isBeingObserved) {\n                    // if this observable had reactive observers, trigger the hooks\n                    observable.isBeingObserved = false;\n                    observable.onBecomeUnobserved();\n                }\n                if (observable instanceof ComputedValue) {\n                    // computed values are automatically teared down when the last observer leaves\n                    // this process happens recursively, this computed might be the last observable of another, etc..\n                    observable.suspend();\n                }\n            }\n        }\n        globalState.pendingUnobservations = [];\n    }\n}\nfunction reportObserved(observable) {\n    checkIfStateReadsAreAllowed(observable);\n    var derivation = globalState.trackingDerivation;\n    if (derivation !== null) {\n        /**\n         * Simple optimization, give each derivation run an unique id (runId)\n         * Check if last time this observable was accessed the same runId is used\n         * if this is the case, the relation is already known\n         */\n        if (derivation.runId !== observable.lastAccessedBy) {\n            observable.lastAccessedBy = derivation.runId;\n            // Tried storing newObserving, or observing, or both as Set, but performance didn't come close...\n            derivation.newObserving[derivation.unboundDepsCount++] = observable;\n            if (!observable.isBeingObserved) {\n                observable.isBeingObserved = true;\n                observable.onBecomeObserved();\n            }\n        }\n        return true;\n    }\n    else if (observable.observers.size === 0 && globalState.inBatch > 0) {\n        queueForUnobservation(observable);\n    }\n    return false;\n}\n// function invariantLOS(observable: IObservable, msg: string) {\n//     // it's expensive so better not run it in produciton. but temporarily helpful for testing\n//     const min = getObservers(observable).reduce((a, b) => Math.min(a, b.dependenciesState), 2)\n//     if (min >= observable.lowestObserverState) return // <- the only assumption about `lowestObserverState`\n//     throw new Error(\n//         \"lowestObserverState is wrong for \" +\n//             msg +\n//             \" because \" +\n//             min +\n//             \" < \" +\n//             observable.lowestObserverState\n//     )\n// }\n/**\n * NOTE: current propagation mechanism will in case of self reruning autoruns behave unexpectedly\n * It will propagate changes to observers from previous run\n * It's hard or maybe impossible (with reasonable perf) to get it right with current approach\n * Hopefully self reruning autoruns aren't a feature people should depend on\n * Also most basic use cases should be ok\n */\n// Called by Atom when its value changes\nfunction propagateChanged(observable) {\n    // invariantLOS(observable, \"changed start\");\n    if (observable.lowestObserverState === IDerivationState.STALE)\n        return;\n    observable.lowestObserverState = IDerivationState.STALE;\n    // Ideally we use for..of here, but the downcompiled version is really slow...\n    observable.observers.forEach(function (d) {\n        if (d.dependenciesState === IDerivationState.UP_TO_DATE) {\n            if (d.isTracing !== TraceMode.NONE) {\n                logTraceInfo(d, observable);\n            }\n            d.onBecomeStale();\n        }\n        d.dependenciesState = IDerivationState.STALE;\n    });\n    // invariantLOS(observable, \"changed end\");\n}\n// Called by ComputedValue when it recalculate and its value changed\nfunction propagateChangeConfirmed(observable) {\n    // invariantLOS(observable, \"confirmed start\");\n    if (observable.lowestObserverState === IDerivationState.STALE)\n        return;\n    observable.lowestObserverState = IDerivationState.STALE;\n    observable.observers.forEach(function (d) {\n        if (d.dependenciesState === IDerivationState.POSSIBLY_STALE)\n            d.dependenciesState = IDerivationState.STALE;\n        else if (d.dependenciesState === IDerivationState.UP_TO_DATE // this happens during computing of `d`, just keep lowestObserverState up to date.\n        )\n            observable.lowestObserverState = IDerivationState.UP_TO_DATE;\n    });\n    // invariantLOS(observable, \"confirmed end\");\n}\n// Used by computed when its dependency changed, but we don't wan't to immediately recompute.\nfunction propagateMaybeChanged(observable) {\n    // invariantLOS(observable, \"maybe start\");\n    if (observable.lowestObserverState !== IDerivationState.UP_TO_DATE)\n        return;\n    observable.lowestObserverState = IDerivationState.POSSIBLY_STALE;\n    observable.observers.forEach(function (d) {\n        if (d.dependenciesState === IDerivationState.UP_TO_DATE) {\n            d.dependenciesState = IDerivationState.POSSIBLY_STALE;\n            if (d.isTracing !== TraceMode.NONE) {\n                logTraceInfo(d, observable);\n            }\n            d.onBecomeStale();\n        }\n    });\n    // invariantLOS(observable, \"maybe end\");\n}\nfunction logTraceInfo(derivation, observable) {\n    console.log(\"[mobx.trace] '\" + derivation.name + \"' is invalidated due to a change in: '\" + observable.name + \"'\");\n    if (derivation.isTracing === TraceMode.BREAK) {\n        var lines = [];\n        printDepTree(getDependencyTree(derivation), lines, 1);\n        // prettier-ignore\n        new Function(\"debugger;\\n/*\\nTracing '\" + derivation.name + \"'\\n\\nYou are entering this break point because derivation '\" + derivation.name + \"' is being traced and '\" + observable.name + \"' is now forcing it to update.\\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\\n\\n\" + (derivation instanceof ComputedValue ? derivation.derivation.toString().replace(/[*]\\//g, \"/\") : \"\") + \"\\n\\nThe dependencies for this derivation are:\\n\\n\" + lines.join(\"\\n\") + \"\\n*/\\n    \")();\n    }\n}\nfunction printDepTree(tree, lines, depth) {\n    if (lines.length >= 1000) {\n        lines.push(\"(and many more)\");\n        return;\n    }\n    lines.push(\"\" + new Array(depth).join(\"\\t\") + tree.name); // MWE: not the fastest, but the easiest way :)\n    if (tree.dependencies)\n        tree.dependencies.forEach(function (child) { return printDepTree(child, lines, depth + 1); });\n}\n\nvar Reaction = /** @class */ (function () {\n    function Reaction(name, onInvalidate, errorHandler, requiresObservable) {\n        if (name === void 0) { name = \"Reaction@\" + getNextId(); }\n        if (requiresObservable === void 0) { requiresObservable = false; }\n        this.name = name;\n        this.onInvalidate = onInvalidate;\n        this.errorHandler = errorHandler;\n        this.requiresObservable = requiresObservable;\n        this.observing = []; // nodes we are looking at. Our value depends on these nodes\n        this.newObserving = [];\n        this.dependenciesState = IDerivationState.NOT_TRACKING;\n        this.diffValue = 0;\n        this.runId = 0;\n        this.unboundDepsCount = 0;\n        this.__mapid = \"#\" + getNextId();\n        this.isDisposed = false;\n        this._isScheduled = false;\n        this._isTrackPending = false;\n        this._isRunning = false;\n        this.isTracing = TraceMode.NONE;\n    }\n    Reaction.prototype.onBecomeStale = function () {\n        this.schedule();\n    };\n    Reaction.prototype.schedule = function () {\n        if (!this._isScheduled) {\n            this._isScheduled = true;\n            globalState.pendingReactions.push(this);\n            runReactions();\n        }\n    };\n    Reaction.prototype.isScheduled = function () {\n        return this._isScheduled;\n    };\n    /**\n     * internal, use schedule() if you intend to kick off a reaction\n     */\n    Reaction.prototype.runReaction = function () {\n        if (!this.isDisposed) {\n            startBatch();\n            this._isScheduled = false;\n            if (shouldCompute(this)) {\n                this._isTrackPending = true;\n                try {\n                    this.onInvalidate();\n                    if (this._isTrackPending &&\n                        isSpyEnabled() &&\n                        process.env.NODE_ENV !== \"production\") {\n                        // onInvalidate didn't trigger track right away..\n                        spyReport({\n                            name: this.name,\n                            type: \"scheduled-reaction\"\n                        });\n                    }\n                }\n                catch (e) {\n                    this.reportExceptionInDerivation(e);\n                }\n            }\n            endBatch();\n        }\n    };\n    Reaction.prototype.track = function (fn) {\n        if (this.isDisposed) {\n            return;\n            // console.warn(\"Reaction already disposed\") // Note: Not a warning / error in mobx 4 either\n        }\n        startBatch();\n        var notify = isSpyEnabled();\n        var startTime;\n        if (notify && process.env.NODE_ENV !== \"production\") {\n            startTime = Date.now();\n            spyReportStart({\n                name: this.name,\n                type: \"reaction\"\n            });\n        }\n        this._isRunning = true;\n        var result = trackDerivedFunction(this, fn, undefined);\n        this._isRunning = false;\n        this._isTrackPending = false;\n        if (this.isDisposed) {\n            // disposed during last run. Clean up everything that was bound after the dispose call.\n            clearObserving(this);\n        }\n        if (isCaughtException(result))\n            this.reportExceptionInDerivation(result.cause);\n        if (notify && process.env.NODE_ENV !== \"production\") {\n            spyReportEnd({\n                time: Date.now() - startTime\n            });\n        }\n        endBatch();\n    };\n    Reaction.prototype.reportExceptionInDerivation = function (error) {\n        var _this = this;\n        if (this.errorHandler) {\n            this.errorHandler(error, this);\n            return;\n        }\n        if (globalState.disableErrorBoundaries)\n            throw error;\n        var message = \"[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '\" + this + \"'\";\n        if (globalState.suppressReactionErrors) {\n            console.warn(\"[mobx] (error in reaction '\" + this.name + \"' suppressed, fix error of causing action below)\"); // prettier-ignore\n        }\n        else {\n            console.error(message, error);\n            /** If debugging brought you here, please, read the above message :-). Tnx! */\n        }\n        if (isSpyEnabled()) {\n            spyReport({\n                type: \"error\",\n                name: this.name,\n                message: message,\n                error: \"\" + error\n            });\n        }\n        globalState.globalReactionErrorHandlers.forEach(function (f) { return f(error, _this); });\n    };\n    Reaction.prototype.dispose = function () {\n        if (!this.isDisposed) {\n            this.isDisposed = true;\n            if (!this._isRunning) {\n                // if disposed while running, clean up later. Maybe not optimal, but rare case\n                startBatch();\n                clearObserving(this);\n                endBatch();\n            }\n        }\n    };\n    Reaction.prototype.getDisposer = function () {\n        var r = this.dispose.bind(this);\n        r[$mobx] = this;\n        return r;\n    };\n    Reaction.prototype.toString = function () {\n        return \"Reaction[\" + this.name + \"]\";\n    };\n    Reaction.prototype.trace = function (enterBreakPoint) {\n        if (enterBreakPoint === void 0) { enterBreakPoint = false; }\n        trace(this, enterBreakPoint);\n    };\n    return Reaction;\n}());\nfunction onReactionError(handler) {\n    globalState.globalReactionErrorHandlers.push(handler);\n    return function () {\n        var idx = globalState.globalReactionErrorHandlers.indexOf(handler);\n        if (idx >= 0)\n            globalState.globalReactionErrorHandlers.splice(idx, 1);\n    };\n}\n/**\n * Magic number alert!\n * Defines within how many times a reaction is allowed to re-trigger itself\n * until it is assumed that this is gonna be a never ending loop...\n */\nvar MAX_REACTION_ITERATIONS = 100;\nvar reactionScheduler = function (f) { return f(); };\nfunction runReactions() {\n    // Trampolining, if runReactions are already running, new reactions will be picked up\n    if (globalState.inBatch > 0 || globalState.isRunningReactions)\n        return;\n    reactionScheduler(runReactionsHelper);\n}\nfunction runReactionsHelper() {\n    globalState.isRunningReactions = true;\n    var allReactions = globalState.pendingReactions;\n    var iterations = 0;\n    // While running reactions, new reactions might be triggered.\n    // Hence we work with two variables and check whether\n    // we converge to no remaining reactions after a while.\n    while (allReactions.length > 0) {\n        if (++iterations === MAX_REACTION_ITERATIONS) {\n            console.error(\"Reaction doesn't converge to a stable state after \" + MAX_REACTION_ITERATIONS + \" iterations.\" +\n                (\" Probably there is a cycle in the reactive function: \" + allReactions[0]));\n            allReactions.splice(0); // clear reactions\n        }\n        var remainingReactions = allReactions.splice(0);\n        for (var i = 0, l = remainingReactions.length; i < l; i++)\n            remainingReactions[i].runReaction();\n    }\n    globalState.isRunningReactions = false;\n}\nvar isReaction = createInstanceofPredicate(\"Reaction\", Reaction);\nfunction setReactionScheduler(fn) {\n    var baseScheduler = reactionScheduler;\n    reactionScheduler = function (f) { return fn(function () { return baseScheduler(f); }); };\n}\n\nfunction isSpyEnabled() {\n    return process.env.NODE_ENV !== \"production\" && !!globalState.spyListeners.length;\n}\nfunction spyReport(event) {\n    if (process.env.NODE_ENV === \"production\")\n        return; // dead code elimination can do the rest\n    if (!globalState.spyListeners.length)\n        return;\n    var listeners = globalState.spyListeners;\n    for (var i = 0, l = listeners.length; i < l; i++)\n        listeners[i](event);\n}\nfunction spyReportStart(event) {\n    if (process.env.NODE_ENV === \"production\")\n        return;\n    var change = __assign(__assign({}, event), { spyReportStart: true });\n    spyReport(change);\n}\nvar END_EVENT = { spyReportEnd: true };\nfunction spyReportEnd(change) {\n    if (process.env.NODE_ENV === \"production\")\n        return;\n    if (change)\n        spyReport(__assign(__assign({}, change), { spyReportEnd: true }));\n    else\n        spyReport(END_EVENT);\n}\nfunction spy(listener) {\n    if (process.env.NODE_ENV === \"production\") {\n        console.warn(\"[mobx.spy] Is a no-op in production builds\");\n        return function () { };\n    }\n    else {\n        globalState.spyListeners.push(listener);\n        return once(function () {\n            globalState.spyListeners = globalState.spyListeners.filter(function (l) { return l !== listener; });\n        });\n    }\n}\n\nfunction dontReassignFields() {\n    fail(process.env.NODE_ENV !== \"production\" && \"@action fields are not reassignable\");\n}\nfunction namedActionDecorator(name) {\n    return function (target, prop, descriptor) {\n        if (descriptor) {\n            if (process.env.NODE_ENV !== \"production\" && descriptor.get !== undefined) {\n                return fail(\"@action cannot be used with getters\");\n            }\n            // babel / typescript\n            // @action method() { }\n            if (descriptor.value) {\n                // typescript\n                return {\n                    value: createAction(name, descriptor.value),\n                    enumerable: false,\n                    configurable: true,\n                    writable: true // for typescript, this must be writable, otherwise it cannot inherit :/ (see inheritable actions test)\n                };\n            }\n            // babel only: @action method = () => {}\n            var initializer_1 = descriptor.initializer;\n            return {\n                enumerable: false,\n                configurable: true,\n                writable: true,\n                initializer: function () {\n                    // N.B: we can't immediately invoke initializer; this would be wrong\n                    return createAction(name, initializer_1.call(this));\n                }\n            };\n        }\n        // bound instance methods\n        return actionFieldDecorator(name).apply(this, arguments);\n    };\n}\nfunction actionFieldDecorator(name) {\n    // Simple property that writes on first invocation to the current instance\n    return function (target, prop, descriptor) {\n        Object.defineProperty(target, prop, {\n            configurable: true,\n            enumerable: false,\n            get: function () {\n                return undefined;\n            },\n            set: function (value) {\n                addHiddenProp(this, prop, action(name, value));\n            }\n        });\n    };\n}\nfunction boundActionDecorator(target, propertyName, descriptor, applyToInstance) {\n    if (applyToInstance === true) {\n        defineBoundAction(target, propertyName, descriptor.value);\n        return null;\n    }\n    if (descriptor) {\n        // if (descriptor.value)\n        // Typescript / Babel: @action.bound method() { }\n        // also: babel @action.bound method = () => {}\n        return {\n            configurable: true,\n            enumerable: false,\n            get: function () {\n                defineBoundAction(this, propertyName, descriptor.value || descriptor.initializer.call(this));\n                return this[propertyName];\n            },\n            set: dontReassignFields\n        };\n    }\n    // field decorator Typescript @action.bound method = () => {}\n    return {\n        enumerable: false,\n        configurable: true,\n        set: function (v) {\n            defineBoundAction(this, propertyName, v);\n        },\n        get: function () {\n            return undefined;\n        }\n    };\n}\n\nvar action = function action(arg1, arg2, arg3, arg4) {\n    // action(fn() {})\n    if (arguments.length === 1 && typeof arg1 === \"function\")\n        return createAction(arg1.name || \"<unnamed action>\", arg1);\n    // action(\"name\", fn() {})\n    if (arguments.length === 2 && typeof arg2 === \"function\")\n        return createAction(arg1, arg2);\n    // @action(\"name\") fn() {}\n    if (arguments.length === 1 && typeof arg1 === \"string\")\n        return namedActionDecorator(arg1);\n    // @action fn() {}\n    if (arg4 === true) {\n        // apply to instance immediately\n        addHiddenProp(arg1, arg2, createAction(arg1.name || arg2, arg3.value, this));\n    }\n    else {\n        return namedActionDecorator(arg2).apply(null, arguments);\n    }\n};\naction.bound = boundActionDecorator;\nfunction runInAction(arg1, arg2) {\n    var actionName = typeof arg1 === \"string\" ? arg1 : arg1.name || \"<unnamed action>\";\n    var fn = typeof arg1 === \"function\" ? arg1 : arg2;\n    if (process.env.NODE_ENV !== \"production\") {\n        invariant(typeof fn === \"function\" && fn.length === 0, \"`runInAction` expects a function without arguments\");\n        if (typeof actionName !== \"string\" || !actionName)\n            fail(\"actions should have valid names, got: '\" + actionName + \"'\");\n    }\n    return executeAction(actionName, fn, this, undefined);\n}\nfunction isAction(thing) {\n    return typeof thing === \"function\" && thing.isMobxAction === true;\n}\nfunction defineBoundAction(target, propertyName, fn) {\n    addHiddenProp(target, propertyName, createAction(propertyName, fn.bind(target)));\n}\n\n/**\n * Creates a named reactive view and keeps it alive, so that the view is always\n * updated if one of the dependencies changes, even when the view is not further used by something else.\n * @param view The reactive view\n * @returns disposer function, which can be used to stop the view from being updated in the future.\n */\nfunction autorun(view, opts) {\n    if (opts === void 0) { opts = EMPTY_OBJECT; }\n    if (process.env.NODE_ENV !== \"production\") {\n        invariant(typeof view === \"function\", \"Autorun expects a function as first argument\");\n        invariant(isAction(view) === false, \"Autorun does not accept actions since actions are untrackable\");\n    }\n    var name = (opts && opts.name) || view.name || \"Autorun@\" + getNextId();\n    var runSync = !opts.scheduler && !opts.delay;\n    var reaction;\n    if (runSync) {\n        // normal autorun\n        reaction = new Reaction(name, function () {\n            this.track(reactionRunner);\n        }, opts.onError, opts.requiresObservable);\n    }\n    else {\n        var scheduler_1 = createSchedulerFromOptions(opts);\n        // debounced autorun\n        var isScheduled_1 = false;\n        reaction = new Reaction(name, function () {\n            if (!isScheduled_1) {\n                isScheduled_1 = true;\n                scheduler_1(function () {\n                    isScheduled_1 = false;\n                    if (!reaction.isDisposed)\n                        reaction.track(reactionRunner);\n                });\n            }\n        }, opts.onError, opts.requiresObservable);\n    }\n    function reactionRunner() {\n        view(reaction);\n    }\n    reaction.schedule();\n    return reaction.getDisposer();\n}\nvar run = function (f) { return f(); };\nfunction createSchedulerFromOptions(opts) {\n    return opts.scheduler\n        ? opts.scheduler\n        : opts.delay\n            ? function (f) { return setTimeout(f, opts.delay); }\n            : run;\n}\nfunction reaction(expression, effect, opts) {\n    if (opts === void 0) { opts = EMPTY_OBJECT; }\n    if (process.env.NODE_ENV !== \"production\") {\n        invariant(typeof expression === \"function\", \"First argument to reaction should be a function\");\n        invariant(typeof opts === \"object\", \"Third argument of reactions should be an object\");\n    }\n    var name = opts.name || \"Reaction@\" + getNextId();\n    var effectAction = action(name, opts.onError ? wrapErrorHandler(opts.onError, effect) : effect);\n    var runSync = !opts.scheduler && !opts.delay;\n    var scheduler = createSchedulerFromOptions(opts);\n    var firstTime = true;\n    var isScheduled = false;\n    var value;\n    var equals = opts.compareStructural\n        ? comparer.structural\n        : opts.equals || comparer.default;\n    var r = new Reaction(name, function () {\n        if (firstTime || runSync) {\n            reactionRunner();\n        }\n        else if (!isScheduled) {\n            isScheduled = true;\n            scheduler(reactionRunner);\n        }\n    }, opts.onError, opts.requiresObservable);\n    function reactionRunner() {\n        isScheduled = false; // Q: move into reaction runner?\n        if (r.isDisposed)\n            return;\n        var changed = false;\n        r.track(function () {\n            var nextValue = expression(r);\n            changed = firstTime || !equals(value, nextValue);\n            value = nextValue;\n        });\n        if (firstTime && opts.fireImmediately)\n            effectAction(value, r);\n        if (!firstTime && changed === true)\n            effectAction(value, r);\n        if (firstTime)\n            firstTime = false;\n    }\n    r.schedule();\n    return r.getDisposer();\n}\nfunction wrapErrorHandler(errorHandler, baseFn) {\n    return function () {\n        try {\n            return baseFn.apply(this, arguments);\n        }\n        catch (e) {\n            errorHandler.call(this, e);\n        }\n    };\n}\n\nfunction onBecomeObserved(thing, arg2, arg3) {\n    return interceptHook(\"onBecomeObserved\", thing, arg2, arg3);\n}\nfunction onBecomeUnobserved(thing, arg2, arg3) {\n    return interceptHook(\"onBecomeUnobserved\", thing, arg2, arg3);\n}\nfunction interceptHook(hook, thing, arg2, arg3) {\n    var atom = typeof arg3 === \"function\" ? getAtom(thing, arg2) : getAtom(thing);\n    var cb = typeof arg3 === \"function\" ? arg3 : arg2;\n    var listenersKey = hook + \"Listeners\";\n    if (atom[listenersKey]) {\n        atom[listenersKey].add(cb);\n    }\n    else {\n        atom[listenersKey] = new Set([cb]);\n    }\n    var orig = atom[hook];\n    if (typeof orig !== \"function\")\n        return fail(process.env.NODE_ENV !== \"production\" && \"Not an atom that can be (un)observed\");\n    return function () {\n        var hookListeners = atom[listenersKey];\n        if (hookListeners) {\n            hookListeners.delete(cb);\n            if (hookListeners.size === 0) {\n                delete atom[listenersKey];\n            }\n        }\n    };\n}\n\nfunction configure(options) {\n    var enforceActions = options.enforceActions, computedRequiresReaction = options.computedRequiresReaction, computedConfigurable = options.computedConfigurable, disableErrorBoundaries = options.disableErrorBoundaries, reactionScheduler = options.reactionScheduler, reactionRequiresObservable = options.reactionRequiresObservable, observableRequiresReaction = options.observableRequiresReaction;\n    if (options.isolateGlobalState === true) {\n        isolateGlobalState();\n    }\n    if (enforceActions !== undefined) {\n        if (typeof enforceActions === \"boolean\" || enforceActions === \"strict\")\n            deprecated(\"Deprecated value for 'enforceActions', use 'false' => '\\\"never\\\"', 'true' => '\\\"observed\\\"', '\\\"strict\\\"' => \\\"'always'\\\" instead\");\n        var ea = void 0;\n        switch (enforceActions) {\n            case true:\n            case \"observed\":\n                ea = true;\n                break;\n            case false:\n            case \"never\":\n                ea = false;\n                break;\n            case \"strict\":\n            case \"always\":\n                ea = \"strict\";\n                break;\n            default:\n                fail(\"Invalid value for 'enforceActions': '\" + enforceActions + \"', expected 'never', 'always' or 'observed'\");\n        }\n        globalState.enforceActions = ea;\n        globalState.allowStateChanges = ea === true || ea === \"strict\" ? false : true;\n    }\n    if (computedRequiresReaction !== undefined) {\n        globalState.computedRequiresReaction = !!computedRequiresReaction;\n    }\n    if (reactionRequiresObservable !== undefined) {\n        globalState.reactionRequiresObservable = !!reactionRequiresObservable;\n    }\n    if (observableRequiresReaction !== undefined) {\n        globalState.observableRequiresReaction = !!observableRequiresReaction;\n        globalState.allowStateReads = !globalState.observableRequiresReaction;\n    }\n    if (computedConfigurable !== undefined) {\n        globalState.computedConfigurable = !!computedConfigurable;\n    }\n    if (disableErrorBoundaries !== undefined) {\n        if (disableErrorBoundaries === true)\n            console.warn(\"WARNING: Debug feature only. MobX will NOT recover from errors when `disableErrorBoundaries` is enabled.\");\n        globalState.disableErrorBoundaries = !!disableErrorBoundaries;\n    }\n    if (reactionScheduler) {\n        setReactionScheduler(reactionScheduler);\n    }\n}\n\nfunction decorate(thing, decorators) {\n    process.env.NODE_ENV !== \"production\" &&\n        invariant(isPlainObject(decorators), \"Decorators should be a key value map\");\n    var target = typeof thing === \"function\" ? thing.prototype : thing;\n    var _loop_1 = function (prop) {\n        var propertyDecorators = decorators[prop];\n        if (!Array.isArray(propertyDecorators)) {\n            propertyDecorators = [propertyDecorators];\n        }\n        process.env.NODE_ENV !== \"production\" &&\n            invariant(propertyDecorators.every(function (decorator) { return typeof decorator === \"function\"; }), \"Decorate: expected a decorator function or array of decorator functions for '\" + prop + \"'\");\n        var descriptor = Object.getOwnPropertyDescriptor(target, prop);\n        var newDescriptor = propertyDecorators.reduce(function (accDescriptor, decorator) { return decorator(target, prop, accDescriptor); }, descriptor);\n        if (newDescriptor)\n            Object.defineProperty(target, prop, newDescriptor);\n    };\n    for (var prop in decorators) {\n        _loop_1(prop);\n    }\n    return thing;\n}\n\nfunction extendObservable(target, properties, decorators, options) {\n    if (process.env.NODE_ENV !== \"production\") {\n        invariant(arguments.length >= 2 && arguments.length <= 4, \"'extendObservable' expected 2-4 arguments\");\n        invariant(typeof target === \"object\", \"'extendObservable' expects an object as first argument\");\n        invariant(!isObservableMap(target), \"'extendObservable' should not be used on maps, use map.merge instead\");\n    }\n    options = asCreateObservableOptions(options);\n    var defaultDecorator = getDefaultDecoratorFromObjectOptions(options);\n    initializeInstance(target); // Fixes #1740\n    asObservableObject(target, options.name, defaultDecorator.enhancer); // make sure object is observable, even without initial props\n    if (properties)\n        extendObservableObjectWithProperties(target, properties, decorators, defaultDecorator);\n    return target;\n}\nfunction getDefaultDecoratorFromObjectOptions(options) {\n    return options.defaultDecorator || (options.deep === false ? refDecorator : deepDecorator);\n}\nfunction extendObservableObjectWithProperties(target, properties, decorators, defaultDecorator) {\n    var e_1, _a, e_2, _b;\n    if (process.env.NODE_ENV !== \"production\") {\n        invariant(!isObservable(properties), \"Extending an object with another observable (object) is not supported. Please construct an explicit propertymap, using `toJS` if need. See issue #540\");\n        if (decorators) {\n            var keys = getPlainObjectKeys(decorators);\n            try {\n                for (var keys_1 = __values(keys), keys_1_1 = keys_1.next(); !keys_1_1.done; keys_1_1 = keys_1.next()) {\n                    var key = keys_1_1.value;\n                    if (!(key in properties))\n                        fail(\"Trying to declare a decorator for unspecified property '\" + stringifyKey(key) + \"'\");\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (keys_1_1 && !keys_1_1.done && (_a = keys_1.return)) _a.call(keys_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        }\n    }\n    startBatch();\n    try {\n        var keys = ownKeys(properties);\n        try {\n            for (var keys_2 = __values(keys), keys_2_1 = keys_2.next(); !keys_2_1.done; keys_2_1 = keys_2.next()) {\n                var key = keys_2_1.value;\n                var descriptor = Object.getOwnPropertyDescriptor(properties, key);\n                if (process.env.NODE_ENV !== \"production\") {\n                    if (!isPlainObject(properties))\n                        fail(\"'extendObservable' only accepts plain objects as second argument\");\n                    if (isComputed(descriptor.value))\n                        fail(\"Passing a 'computed' as initial property value is no longer supported by extendObservable. Use a getter or decorator instead\");\n                }\n                var decorator = decorators && key in decorators\n                    ? decorators[key]\n                    : descriptor.get\n                        ? computedDecorator\n                        : defaultDecorator;\n                if (process.env.NODE_ENV !== \"production\" && typeof decorator !== \"function\")\n                    fail(\"Not a valid decorator for '\" + stringifyKey(key) + \"', got: \" + decorator);\n                var resultDescriptor = decorator(target, key, descriptor, true);\n                if (resultDescriptor // otherwise, assume already applied, due to `applyToInstance`\n                )\n                    Object.defineProperty(target, key, resultDescriptor);\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (keys_2_1 && !keys_2_1.done && (_b = keys_2.return)) _b.call(keys_2);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n    }\n    finally {\n        endBatch();\n    }\n}\n\nfunction getDependencyTree(thing, property) {\n    return nodeToDependencyTree(getAtom(thing, property));\n}\nfunction nodeToDependencyTree(node) {\n    var result = {\n        name: node.name\n    };\n    if (node.observing && node.observing.length > 0)\n        result.dependencies = unique(node.observing).map(nodeToDependencyTree);\n    return result;\n}\nfunction getObserverTree(thing, property) {\n    return nodeToObserverTree(getAtom(thing, property));\n}\nfunction nodeToObserverTree(node) {\n    var result = {\n        name: node.name\n    };\n    if (hasObservers(node))\n        result.observers = Array.from(getObservers(node)).map(nodeToObserverTree);\n    return result;\n}\n\nvar generatorId = 0;\nfunction FlowCancellationError() {\n    this.message = \"FLOW_CANCELLED\";\n}\nFlowCancellationError.prototype = Object.create(Error.prototype);\nfunction isFlowCancellationError(error) {\n    return error instanceof FlowCancellationError;\n}\nfunction flow(generator) {\n    if (arguments.length !== 1)\n        fail(!!process.env.NODE_ENV && \"Flow expects 1 argument and cannot be used as decorator\");\n    var name = generator.name || \"<unnamed flow>\";\n    // Implementation based on https://github.com/tj/co/blob/master/index.js\n    return function () {\n        var ctx = this;\n        var args = arguments;\n        var runId = ++generatorId;\n        var gen = action(name + \" - runid: \" + runId + \" - init\", generator).apply(ctx, args);\n        var rejector;\n        var pendingPromise = undefined;\n        var promise = new Promise(function (resolve, reject) {\n            var stepId = 0;\n            rejector = reject;\n            function onFulfilled(res) {\n                pendingPromise = undefined;\n                var ret;\n                try {\n                    ret = action(name + \" - runid: \" + runId + \" - yield \" + stepId++, gen.next).call(gen, res);\n                }\n                catch (e) {\n                    return reject(e);\n                }\n                next(ret);\n            }\n            function onRejected(err) {\n                pendingPromise = undefined;\n                var ret;\n                try {\n                    ret = action(name + \" - runid: \" + runId + \" - yield \" + stepId++, gen.throw).call(gen, err);\n                }\n                catch (e) {\n                    return reject(e);\n                }\n                next(ret);\n            }\n            function next(ret) {\n                if (ret && typeof ret.then === \"function\") {\n                    // an async iterator\n                    ret.then(next, reject);\n                    return;\n                }\n                if (ret.done)\n                    return resolve(ret.value);\n                pendingPromise = Promise.resolve(ret.value);\n                return pendingPromise.then(onFulfilled, onRejected);\n            }\n            onFulfilled(undefined); // kick off the process\n        });\n        promise.cancel = action(name + \" - runid: \" + runId + \" - cancel\", function () {\n            try {\n                if (pendingPromise)\n                    cancelPromise(pendingPromise);\n                // Finally block can return (or yield) stuff..\n                var res = gen.return(undefined);\n                // eat anything that promise would do, it's cancelled!\n                var yieldedPromise = Promise.resolve(res.value);\n                yieldedPromise.then(noop, noop);\n                cancelPromise(yieldedPromise); // maybe it can be cancelled :)\n                // reject our original promise\n                rejector(new FlowCancellationError());\n            }\n            catch (e) {\n                rejector(e); // there could be a throwing finally block\n            }\n        });\n        return promise;\n    };\n}\nfunction cancelPromise(promise) {\n    if (typeof promise.cancel === \"function\")\n        promise.cancel();\n}\n\nfunction interceptReads(thing, propOrHandler, handler) {\n    var target;\n    if (isObservableMap(thing) || isObservableArray(thing) || isObservableValue(thing)) {\n        target = getAdministration(thing);\n    }\n    else if (isObservableObject(thing)) {\n        if (typeof propOrHandler !== \"string\")\n            return fail(process.env.NODE_ENV !== \"production\" &&\n                \"InterceptReads can only be used with a specific property, not with an object in general\");\n        target = getAdministration(thing, propOrHandler);\n    }\n    else {\n        return fail(process.env.NODE_ENV !== \"production\" &&\n            \"Expected observable map, object or array as first array\");\n    }\n    if (target.dehancer !== undefined)\n        return fail(process.env.NODE_ENV !== \"production\" && \"An intercept reader was already established\");\n    target.dehancer = typeof propOrHandler === \"function\" ? propOrHandler : handler;\n    return function () {\n        target.dehancer = undefined;\n    };\n}\n\nfunction intercept(thing, propOrHandler, handler) {\n    if (typeof handler === \"function\")\n        return interceptProperty(thing, propOrHandler, handler);\n    else\n        return interceptInterceptable(thing, propOrHandler);\n}\nfunction interceptInterceptable(thing, handler) {\n    return getAdministration(thing).intercept(handler);\n}\nfunction interceptProperty(thing, property, handler) {\n    return getAdministration(thing, property).intercept(handler);\n}\n\nfunction _isComputed(value, property) {\n    if (value === null || value === undefined)\n        return false;\n    if (property !== undefined) {\n        if (isObservableObject(value) === false)\n            return false;\n        if (!value[$mobx].values.has(property))\n            return false;\n        var atom = getAtom(value, property);\n        return isComputedValue(atom);\n    }\n    return isComputedValue(value);\n}\nfunction isComputed(value) {\n    if (arguments.length > 1)\n        return fail(process.env.NODE_ENV !== \"production\" &&\n            \"isComputed expects only 1 argument. Use isObservableProp to inspect the observability of a property\");\n    return _isComputed(value);\n}\nfunction isComputedProp(value, propName) {\n    if (typeof propName !== \"string\")\n        return fail(process.env.NODE_ENV !== \"production\" &&\n            \"isComputed expected a property name as second argument\");\n    return _isComputed(value, propName);\n}\n\nfunction _isObservable(value, property) {\n    if (value === null || value === undefined)\n        return false;\n    if (property !== undefined) {\n        if (process.env.NODE_ENV !== \"production\" &&\n            (isObservableMap(value) || isObservableArray(value)))\n            return fail(\"isObservable(object, propertyName) is not supported for arrays and maps. Use map.has or array.length instead.\");\n        if (isObservableObject(value)) {\n            return value[$mobx].values.has(property);\n        }\n        return false;\n    }\n    // For first check, see #701\n    return (isObservableObject(value) ||\n        !!value[$mobx] ||\n        isAtom(value) ||\n        isReaction(value) ||\n        isComputedValue(value));\n}\nfunction isObservable(value) {\n    if (arguments.length !== 1)\n        fail(process.env.NODE_ENV !== \"production\" &&\n            \"isObservable expects only 1 argument. Use isObservableProp to inspect the observability of a property\");\n    return _isObservable(value);\n}\nfunction isObservableProp(value, propName) {\n    if (typeof propName !== \"string\")\n        return fail(process.env.NODE_ENV !== \"production\" && \"expected a property name as second argument\");\n    return _isObservable(value, propName);\n}\n\nfunction keys(obj) {\n    if (isObservableObject(obj)) {\n        return obj[$mobx].getKeys();\n    }\n    if (isObservableMap(obj)) {\n        return Array.from(obj.keys());\n    }\n    if (isObservableSet(obj)) {\n        return Array.from(obj.keys());\n    }\n    if (isObservableArray(obj)) {\n        return obj.map(function (_, index) { return index; });\n    }\n    return fail(process.env.NODE_ENV !== \"production\" &&\n        \"'keys()' can only be used on observable objects, arrays, sets and maps\");\n}\nfunction values(obj) {\n    if (isObservableObject(obj)) {\n        return keys(obj).map(function (key) { return obj[key]; });\n    }\n    if (isObservableMap(obj)) {\n        return keys(obj).map(function (key) { return obj.get(key); });\n    }\n    if (isObservableSet(obj)) {\n        return Array.from(obj.values());\n    }\n    if (isObservableArray(obj)) {\n        return obj.slice();\n    }\n    return fail(process.env.NODE_ENV !== \"production\" &&\n        \"'values()' can only be used on observable objects, arrays, sets and maps\");\n}\nfunction entries(obj) {\n    if (isObservableObject(obj)) {\n        return keys(obj).map(function (key) { return [key, obj[key]]; });\n    }\n    if (isObservableMap(obj)) {\n        return keys(obj).map(function (key) { return [key, obj.get(key)]; });\n    }\n    if (isObservableSet(obj)) {\n        return Array.from(obj.entries());\n    }\n    if (isObservableArray(obj)) {\n        return obj.map(function (key, index) { return [index, key]; });\n    }\n    return fail(process.env.NODE_ENV !== \"production\" &&\n        \"'entries()' can only be used on observable objects, arrays and maps\");\n}\nfunction set(obj, key, value) {\n    if (arguments.length === 2 && !isObservableSet(obj)) {\n        startBatch();\n        var values_1 = key;\n        try {\n            for (var key_1 in values_1)\n                set(obj, key_1, values_1[key_1]);\n        }\n        finally {\n            endBatch();\n        }\n        return;\n    }\n    if (isObservableObject(obj)) {\n        var adm = obj[$mobx];\n        var existingObservable = adm.values.get(key);\n        if (existingObservable) {\n            adm.write(key, value);\n        }\n        else {\n            adm.addObservableProp(key, value, adm.defaultEnhancer);\n        }\n    }\n    else if (isObservableMap(obj)) {\n        obj.set(key, value);\n    }\n    else if (isObservableSet(obj)) {\n        obj.add(key);\n    }\n    else if (isObservableArray(obj)) {\n        if (typeof key !== \"number\")\n            key = parseInt(key, 10);\n        invariant(key >= 0, \"Not a valid index: '\" + key + \"'\");\n        startBatch();\n        if (key >= obj.length)\n            obj.length = key + 1;\n        obj[key] = value;\n        endBatch();\n    }\n    else {\n        return fail(process.env.NODE_ENV !== \"production\" &&\n            \"'set()' can only be used on observable objects, arrays and maps\");\n    }\n}\nfunction remove(obj, key) {\n    if (isObservableObject(obj)) {\n        obj[$mobx].remove(key);\n    }\n    else if (isObservableMap(obj)) {\n        obj.delete(key);\n    }\n    else if (isObservableSet(obj)) {\n        obj.delete(key);\n    }\n    else if (isObservableArray(obj)) {\n        if (typeof key !== \"number\")\n            key = parseInt(key, 10);\n        invariant(key >= 0, \"Not a valid index: '\" + key + \"'\");\n        obj.splice(key, 1);\n    }\n    else {\n        return fail(process.env.NODE_ENV !== \"production\" &&\n            \"'remove()' can only be used on observable objects, arrays and maps\");\n    }\n}\nfunction has(obj, key) {\n    if (isObservableObject(obj)) {\n        // return keys(obj).indexOf(key) >= 0\n        var adm = getAdministration(obj);\n        return adm.has(key);\n    }\n    else if (isObservableMap(obj)) {\n        return obj.has(key);\n    }\n    else if (isObservableSet(obj)) {\n        return obj.has(key);\n    }\n    else if (isObservableArray(obj)) {\n        return key >= 0 && key < obj.length;\n    }\n    else {\n        return fail(process.env.NODE_ENV !== \"production\" &&\n            \"'has()' can only be used on observable objects, arrays and maps\");\n    }\n}\nfunction get(obj, key) {\n    if (!has(obj, key))\n        return undefined;\n    if (isObservableObject(obj)) {\n        return obj[key];\n    }\n    else if (isObservableMap(obj)) {\n        return obj.get(key);\n    }\n    else if (isObservableArray(obj)) {\n        return obj[key];\n    }\n    else {\n        return fail(process.env.NODE_ENV !== \"production\" &&\n            \"'get()' can only be used on observable objects, arrays and maps\");\n    }\n}\n\nfunction observe(thing, propOrCb, cbOrFire, fireImmediately) {\n    if (typeof cbOrFire === \"function\")\n        return observeObservableProperty(thing, propOrCb, cbOrFire, fireImmediately);\n    else\n        return observeObservable(thing, propOrCb, cbOrFire);\n}\nfunction observeObservable(thing, listener, fireImmediately) {\n    return getAdministration(thing).observe(listener, fireImmediately);\n}\nfunction observeObservableProperty(thing, property, listener, fireImmediately) {\n    return getAdministration(thing, property).observe(listener, fireImmediately);\n}\n\nvar defaultOptions = {\n    detectCycles: true,\n    exportMapsAsObjects: true,\n    recurseEverything: false\n};\nfunction cache(map, key, value, options) {\n    if (options.detectCycles)\n        map.set(key, value);\n    return value;\n}\nfunction toJSHelper(source, options, __alreadySeen) {\n    if (!options.recurseEverything && !isObservable(source))\n        return source;\n    if (typeof source !== \"object\")\n        return source;\n    // Directly return null if source is null\n    if (source === null)\n        return null;\n    // Directly return the Date object itself if contained in the observable\n    if (source instanceof Date)\n        return source;\n    if (isObservableValue(source))\n        return toJSHelper(source.get(), options, __alreadySeen);\n    // make sure we track the keys of the object\n    if (isObservable(source))\n        keys(source);\n    var detectCycles = options.detectCycles === true;\n    if (detectCycles && source !== null && __alreadySeen.has(source)) {\n        return __alreadySeen.get(source);\n    }\n    if (isObservableArray(source) || Array.isArray(source)) {\n        var res_1 = cache(__alreadySeen, source, [], options);\n        var toAdd = source.map(function (value) { return toJSHelper(value, options, __alreadySeen); });\n        res_1.length = toAdd.length;\n        for (var i = 0, l = toAdd.length; i < l; i++)\n            res_1[i] = toAdd[i];\n        return res_1;\n    }\n    if (isObservableSet(source) || Object.getPrototypeOf(source) === Set.prototype) {\n        if (options.exportMapsAsObjects === false) {\n            var res_2 = cache(__alreadySeen, source, new Set(), options);\n            source.forEach(function (value) {\n                res_2.add(toJSHelper(value, options, __alreadySeen));\n            });\n            return res_2;\n        }\n        else {\n            var res_3 = cache(__alreadySeen, source, [], options);\n            source.forEach(function (value) {\n                res_3.push(toJSHelper(value, options, __alreadySeen));\n            });\n            return res_3;\n        }\n    }\n    if (isObservableMap(source) || Object.getPrototypeOf(source) === Map.prototype) {\n        if (options.exportMapsAsObjects === false) {\n            var res_4 = cache(__alreadySeen, source, new Map(), options);\n            source.forEach(function (value, key) {\n                res_4.set(key, toJSHelper(value, options, __alreadySeen));\n            });\n            return res_4;\n        }\n        else {\n            var res_5 = cache(__alreadySeen, source, {}, options);\n            source.forEach(function (value, key) {\n                res_5[key] = toJSHelper(value, options, __alreadySeen);\n            });\n            return res_5;\n        }\n    }\n    // Fallback to the situation that source is an ObservableObject or a plain object\n    var res = cache(__alreadySeen, source, {}, options);\n    getPlainObjectKeys(source).forEach(function (key) {\n        res[key] = toJSHelper(source[key], options, __alreadySeen);\n    });\n    return res;\n}\nfunction toJS(source, options) {\n    // backward compatibility\n    if (typeof options === \"boolean\")\n        options = { detectCycles: options };\n    if (!options)\n        options = defaultOptions;\n    options.detectCycles =\n        options.detectCycles === undefined\n            ? options.recurseEverything === true\n            : options.detectCycles === true;\n    var __alreadySeen;\n    if (options.detectCycles)\n        __alreadySeen = new Map();\n    return toJSHelper(source, options, __alreadySeen);\n}\n\nfunction trace() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var enterBreakPoint = false;\n    if (typeof args[args.length - 1] === \"boolean\")\n        enterBreakPoint = args.pop();\n    var derivation = getAtomFromArgs(args);\n    if (!derivation) {\n        return fail(process.env.NODE_ENV !== \"production\" &&\n            \"'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly\");\n    }\n    if (derivation.isTracing === TraceMode.NONE) {\n        console.log(\"[mobx.trace] '\" + derivation.name + \"' tracing enabled\");\n    }\n    derivation.isTracing = enterBreakPoint ? TraceMode.BREAK : TraceMode.LOG;\n}\nfunction getAtomFromArgs(args) {\n    switch (args.length) {\n        case 0:\n            return globalState.trackingDerivation;\n        case 1:\n            return getAtom(args[0]);\n        case 2:\n            return getAtom(args[0], args[1]);\n    }\n}\n\n/**\n * During a transaction no views are updated until the end of the transaction.\n * The transaction will be run synchronously nonetheless.\n *\n * @param action a function that updates some reactive state\n * @returns any value that was returned by the 'action' parameter.\n */\nfunction transaction(action, thisArg) {\n    if (thisArg === void 0) { thisArg = undefined; }\n    startBatch();\n    try {\n        return action.apply(thisArg);\n    }\n    finally {\n        endBatch();\n    }\n}\n\nfunction when(predicate, arg1, arg2) {\n    if (arguments.length === 1 || (arg1 && typeof arg1 === \"object\"))\n        return whenPromise(predicate, arg1);\n    return _when(predicate, arg1, arg2 || {});\n}\nfunction _when(predicate, effect, opts) {\n    var timeoutHandle;\n    if (typeof opts.timeout === \"number\") {\n        timeoutHandle = setTimeout(function () {\n            if (!disposer[$mobx].isDisposed) {\n                disposer();\n                var error = new Error(\"WHEN_TIMEOUT\");\n                if (opts.onError)\n                    opts.onError(error);\n                else\n                    throw error;\n            }\n        }, opts.timeout);\n    }\n    opts.name = opts.name || \"When@\" + getNextId();\n    var effectAction = createAction(opts.name + \"-effect\", effect);\n    var disposer = autorun(function (r) {\n        if (predicate()) {\n            r.dispose();\n            if (timeoutHandle)\n                clearTimeout(timeoutHandle);\n            effectAction();\n        }\n    }, opts);\n    return disposer;\n}\nfunction whenPromise(predicate, opts) {\n    if (process.env.NODE_ENV !== \"production\" && opts && opts.onError)\n        return fail(\"the options 'onError' and 'promise' cannot be combined\");\n    var cancel;\n    var res = new Promise(function (resolve, reject) {\n        var disposer = _when(predicate, resolve, __assign(__assign({}, opts), { onError: reject }));\n        cancel = function () {\n            disposer();\n            reject(\"WHEN_CANCELLED\");\n        };\n    });\n    res.cancel = cancel;\n    return res;\n}\n\nfunction getAdm(target) {\n    return target[$mobx];\n}\nfunction isPropertyKey(val) {\n    return typeof val === \"string\" || typeof val === \"number\" || typeof val === \"symbol\";\n}\n// Optimization: we don't need the intermediate objects and could have a completely custom administration for DynamicObjects,\n// and skip either the internal values map, or the base object with its property descriptors!\nvar objectProxyTraps = {\n    has: function (target, name) {\n        if (name === $mobx || name === \"constructor\" || name === mobxDidRunLazyInitializersSymbol)\n            return true;\n        var adm = getAdm(target);\n        // MWE: should `in` operator be reactive? If not, below code path will be faster / more memory efficient\n        // TODO: check performance stats!\n        // if (adm.values.get(name as string)) return true\n        if (isPropertyKey(name))\n            return adm.has(name);\n        return name in target;\n    },\n    get: function (target, name) {\n        if (name === $mobx || name === \"constructor\" || name === mobxDidRunLazyInitializersSymbol)\n            return target[name];\n        var adm = getAdm(target);\n        var observable = adm.values.get(name);\n        if (observable instanceof Atom) {\n            var result = observable.get();\n            if (result === undefined) {\n                // This fixes #1796, because deleting a prop that has an\n                // undefined value won't retrigger a observer (no visible effect),\n                // the autorun wouldn't subscribe to future key changes (see also next comment)\n                adm.has(name);\n            }\n            return result;\n        }\n        // make sure we start listening to future keys\n        // note that we only do this here for optimization\n        if (isPropertyKey(name))\n            adm.has(name);\n        return target[name];\n    },\n    set: function (target, name, value) {\n        if (!isPropertyKey(name))\n            return false;\n        set(target, name, value);\n        return true;\n    },\n    deleteProperty: function (target, name) {\n        if (!isPropertyKey(name))\n            return false;\n        var adm = getAdm(target);\n        adm.remove(name);\n        return true;\n    },\n    ownKeys: function (target) {\n        var adm = getAdm(target);\n        adm.keysAtom.reportObserved();\n        return Reflect.ownKeys(target);\n    },\n    preventExtensions: function (target) {\n        fail(\"Dynamic observable objects cannot be frozen\");\n        return false;\n    }\n};\nfunction createDynamicObservableObject(base) {\n    var proxy = new Proxy(base, objectProxyTraps);\n    base[$mobx].proxy = proxy;\n    return proxy;\n}\n\nfunction hasInterceptors(interceptable) {\n    return interceptable.interceptors !== undefined && interceptable.interceptors.length > 0;\n}\nfunction registerInterceptor(interceptable, handler) {\n    var interceptors = interceptable.interceptors || (interceptable.interceptors = []);\n    interceptors.push(handler);\n    return once(function () {\n        var idx = interceptors.indexOf(handler);\n        if (idx !== -1)\n            interceptors.splice(idx, 1);\n    });\n}\nfunction interceptChange(interceptable, change) {\n    var prevU = untrackedStart();\n    try {\n        // Interceptor can modify the array, copy it to avoid concurrent modification, see #1950\n        var interceptors = __spread((interceptable.interceptors || []));\n        for (var i = 0, l = interceptors.length; i < l; i++) {\n            change = interceptors[i](change);\n            invariant(!change || change.type, \"Intercept handlers should return nothing or a change object\");\n            if (!change)\n                break;\n        }\n        return change;\n    }\n    finally {\n        untrackedEnd(prevU);\n    }\n}\n\nfunction hasListeners(listenable) {\n    return listenable.changeListeners !== undefined && listenable.changeListeners.length > 0;\n}\nfunction registerListener(listenable, handler) {\n    var listeners = listenable.changeListeners || (listenable.changeListeners = []);\n    listeners.push(handler);\n    return once(function () {\n        var idx = listeners.indexOf(handler);\n        if (idx !== -1)\n            listeners.splice(idx, 1);\n    });\n}\nfunction notifyListeners(listenable, change) {\n    var prevU = untrackedStart();\n    var listeners = listenable.changeListeners;\n    if (!listeners)\n        return;\n    listeners = listeners.slice();\n    for (var i = 0, l = listeners.length; i < l; i++) {\n        listeners[i](change);\n    }\n    untrackedEnd(prevU);\n}\n\nvar MAX_SPLICE_SIZE = 10000; // See e.g. https://github.com/mobxjs/mobx/issues/859\nvar arrayTraps = {\n    get: function (target, name) {\n        if (name === $mobx)\n            return target[$mobx];\n        if (name === \"length\")\n            return target[$mobx].getArrayLength();\n        if (typeof name === \"number\") {\n            return arrayExtensions.get.call(target, name);\n        }\n        if (typeof name === \"string\" && !isNaN(name)) {\n            return arrayExtensions.get.call(target, parseInt(name));\n        }\n        if (arrayExtensions.hasOwnProperty(name)) {\n            return arrayExtensions[name];\n        }\n        return target[name];\n    },\n    set: function (target, name, value) {\n        if (name === \"length\") {\n            target[$mobx].setArrayLength(value);\n        }\n        if (typeof name === \"number\") {\n            arrayExtensions.set.call(target, name, value);\n        }\n        if (typeof name === \"symbol\" || isNaN(name)) {\n            target[name] = value;\n        }\n        else {\n            // numeric string\n            arrayExtensions.set.call(target, parseInt(name), value);\n        }\n        return true;\n    },\n    preventExtensions: function (target) {\n        fail(\"Observable arrays cannot be frozen\");\n        return false;\n    }\n};\nfunction createObservableArray(initialValues, enhancer, name, owned) {\n    if (name === void 0) { name = \"ObservableArray@\" + getNextId(); }\n    if (owned === void 0) { owned = false; }\n    var adm = new ObservableArrayAdministration(name, enhancer, owned);\n    addHiddenFinalProp(adm.values, $mobx, adm);\n    var proxy = new Proxy(adm.values, arrayTraps);\n    adm.proxy = proxy;\n    if (initialValues && initialValues.length) {\n        var prev = allowStateChangesStart(true);\n        adm.spliceWithArray(0, 0, initialValues);\n        allowStateChangesEnd(prev);\n    }\n    return proxy;\n}\nvar ObservableArrayAdministration = /** @class */ (function () {\n    function ObservableArrayAdministration(name, enhancer, owned) {\n        this.owned = owned;\n        this.values = [];\n        this.proxy = undefined;\n        this.lastKnownLength = 0;\n        this.atom = new Atom(name || \"ObservableArray@\" + getNextId());\n        this.enhancer = function (newV, oldV) { return enhancer(newV, oldV, name + \"[..]\"); };\n    }\n    ObservableArrayAdministration.prototype.dehanceValue = function (value) {\n        if (this.dehancer !== undefined)\n            return this.dehancer(value);\n        return value;\n    };\n    ObservableArrayAdministration.prototype.dehanceValues = function (values) {\n        if (this.dehancer !== undefined && values.length > 0)\n            return values.map(this.dehancer);\n        return values;\n    };\n    ObservableArrayAdministration.prototype.intercept = function (handler) {\n        return registerInterceptor(this, handler);\n    };\n    ObservableArrayAdministration.prototype.observe = function (listener, fireImmediately) {\n        if (fireImmediately === void 0) { fireImmediately = false; }\n        if (fireImmediately) {\n            listener({\n                object: this.proxy,\n                type: \"splice\",\n                index: 0,\n                added: this.values.slice(),\n                addedCount: this.values.length,\n                removed: [],\n                removedCount: 0\n            });\n        }\n        return registerListener(this, listener);\n    };\n    ObservableArrayAdministration.prototype.getArrayLength = function () {\n        this.atom.reportObserved();\n        return this.values.length;\n    };\n    ObservableArrayAdministration.prototype.setArrayLength = function (newLength) {\n        if (typeof newLength !== \"number\" || newLength < 0)\n            throw new Error(\"[mobx.array] Out of range: \" + newLength);\n        var currentLength = this.values.length;\n        if (newLength === currentLength)\n            return;\n        else if (newLength > currentLength) {\n            var newItems = new Array(newLength - currentLength);\n            for (var i = 0; i < newLength - currentLength; i++)\n                newItems[i] = undefined; // No Array.fill everywhere...\n            this.spliceWithArray(currentLength, 0, newItems);\n        }\n        else\n            this.spliceWithArray(newLength, currentLength - newLength);\n    };\n    ObservableArrayAdministration.prototype.updateArrayLength = function (oldLength, delta) {\n        if (oldLength !== this.lastKnownLength)\n            throw new Error(\"[mobx] Modification exception: the internal structure of an observable array was changed.\");\n        this.lastKnownLength += delta;\n    };\n    ObservableArrayAdministration.prototype.spliceWithArray = function (index, deleteCount, newItems) {\n        var _this = this;\n        checkIfStateModificationsAreAllowed(this.atom);\n        var length = this.values.length;\n        if (index === undefined)\n            index = 0;\n        else if (index > length)\n            index = length;\n        else if (index < 0)\n            index = Math.max(0, length + index);\n        if (arguments.length === 1)\n            deleteCount = length - index;\n        else if (deleteCount === undefined || deleteCount === null)\n            deleteCount = 0;\n        else\n            deleteCount = Math.max(0, Math.min(deleteCount, length - index));\n        if (newItems === undefined)\n            newItems = EMPTY_ARRAY;\n        if (hasInterceptors(this)) {\n            var change = interceptChange(this, {\n                object: this.proxy,\n                type: \"splice\",\n                index: index,\n                removedCount: deleteCount,\n                added: newItems\n            });\n            if (!change)\n                return EMPTY_ARRAY;\n            deleteCount = change.removedCount;\n            newItems = change.added;\n        }\n        newItems = newItems.length === 0 ? newItems : newItems.map(function (v) { return _this.enhancer(v, undefined); });\n        if (process.env.NODE_ENV !== \"production\") {\n            var lengthDelta = newItems.length - deleteCount;\n            this.updateArrayLength(length, lengthDelta); // checks if internal array wasn't modified\n        }\n        var res = this.spliceItemsIntoValues(index, deleteCount, newItems);\n        if (deleteCount !== 0 || newItems.length !== 0)\n            this.notifyArraySplice(index, newItems, res);\n        return this.dehanceValues(res);\n    };\n    ObservableArrayAdministration.prototype.spliceItemsIntoValues = function (index, deleteCount, newItems) {\n        var _a;\n        if (newItems.length < MAX_SPLICE_SIZE) {\n            return (_a = this.values).splice.apply(_a, __spread([index, deleteCount], newItems));\n        }\n        else {\n            var res = this.values.slice(index, index + deleteCount);\n            this.values = this.values\n                .slice(0, index)\n                .concat(newItems, this.values.slice(index + deleteCount));\n            return res;\n        }\n    };\n    ObservableArrayAdministration.prototype.notifyArrayChildUpdate = function (index, newValue, oldValue) {\n        var notifySpy = !this.owned && isSpyEnabled();\n        var notify = hasListeners(this);\n        var change = notify || notifySpy\n            ? {\n                object: this.proxy,\n                type: \"update\",\n                index: index,\n                newValue: newValue,\n                oldValue: oldValue\n            }\n            : null;\n        // The reason why this is on right hand side here (and not above), is this way the uglifier will drop it, but it won't\n        // cause any runtime overhead in development mode without NODE_ENV set, unless spying is enabled\n        if (notifySpy && process.env.NODE_ENV !== \"production\")\n            spyReportStart(__assign(__assign({}, change), { name: this.atom.name }));\n        this.atom.reportChanged();\n        if (notify)\n            notifyListeners(this, change);\n        if (notifySpy && process.env.NODE_ENV !== \"production\")\n            spyReportEnd();\n    };\n    ObservableArrayAdministration.prototype.notifyArraySplice = function (index, added, removed) {\n        var notifySpy = !this.owned && isSpyEnabled();\n        var notify = hasListeners(this);\n        var change = notify || notifySpy\n            ? {\n                object: this.proxy,\n                type: \"splice\",\n                index: index,\n                removed: removed,\n                added: added,\n                removedCount: removed.length,\n                addedCount: added.length\n            }\n            : null;\n        if (notifySpy && process.env.NODE_ENV !== \"production\")\n            spyReportStart(__assign(__assign({}, change), { name: this.atom.name }));\n        this.atom.reportChanged();\n        // conform: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/observe\n        if (notify)\n            notifyListeners(this, change);\n        if (notifySpy && process.env.NODE_ENV !== \"production\")\n            spyReportEnd();\n    };\n    return ObservableArrayAdministration;\n}());\nvar arrayExtensions = {\n    intercept: function (handler) {\n        return this[$mobx].intercept(handler);\n    },\n    observe: function (listener, fireImmediately) {\n        if (fireImmediately === void 0) { fireImmediately = false; }\n        var adm = this[$mobx];\n        return adm.observe(listener, fireImmediately);\n    },\n    clear: function () {\n        return this.splice(0);\n    },\n    replace: function (newItems) {\n        var adm = this[$mobx];\n        return adm.spliceWithArray(0, adm.values.length, newItems);\n    },\n    /**\n     * Converts this array back to a (shallow) javascript structure.\n     * For a deep clone use mobx.toJS\n     */\n    toJS: function () {\n        return this.slice();\n    },\n    toJSON: function () {\n        // Used by JSON.stringify\n        return this.toJS();\n    },\n    /*\n     * functions that do alter the internal structure of the array, (based on lib.es6.d.ts)\n     * since these functions alter the inner structure of the array, the have side effects.\n     * Because the have side effects, they should not be used in computed function,\n     * and for that reason the do not call dependencyState.notifyObserved\n     */\n    splice: function (index, deleteCount) {\n        var newItems = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            newItems[_i - 2] = arguments[_i];\n        }\n        var adm = this[$mobx];\n        switch (arguments.length) {\n            case 0:\n                return [];\n            case 1:\n                return adm.spliceWithArray(index);\n            case 2:\n                return adm.spliceWithArray(index, deleteCount);\n        }\n        return adm.spliceWithArray(index, deleteCount, newItems);\n    },\n    spliceWithArray: function (index, deleteCount, newItems) {\n        var adm = this[$mobx];\n        return adm.spliceWithArray(index, deleteCount, newItems);\n    },\n    push: function () {\n        var items = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            items[_i] = arguments[_i];\n        }\n        var adm = this[$mobx];\n        adm.spliceWithArray(adm.values.length, 0, items);\n        return adm.values.length;\n    },\n    pop: function () {\n        return this.splice(Math.max(this[$mobx].values.length - 1, 0), 1)[0];\n    },\n    shift: function () {\n        return this.splice(0, 1)[0];\n    },\n    unshift: function () {\n        var items = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            items[_i] = arguments[_i];\n        }\n        var adm = this[$mobx];\n        adm.spliceWithArray(0, 0, items);\n        return adm.values.length;\n    },\n    reverse: function () {\n        // reverse by default mutates in place before returning the result\n        // which makes it both a 'derivation' and a 'mutation'.\n        // so we deviate from the default and just make it an dervitation\n        if (process.env.NODE_ENV !== \"production\") {\n            console.warn(\"[mobx] `observableArray.reverse()` will not update the array in place. Use `observableArray.slice().reverse()` to suppress this warning and perform the operation on a copy, or `observableArray.replace(observableArray.slice().reverse())` to reverse & update in place\");\n        }\n        var clone = this.slice();\n        return clone.reverse.apply(clone, arguments);\n    },\n    sort: function (compareFn) {\n        // sort by default mutates in place before returning the result\n        // which goes against all good practices. Let's not change the array in place!\n        if (process.env.NODE_ENV !== \"production\") {\n            console.warn(\"[mobx] `observableArray.sort()` will not update the array in place. Use `observableArray.slice().sort()` to suppress this warning and perform the operation on a copy, or `observableArray.replace(observableArray.slice().sort())` to sort & update in place\");\n        }\n        var clone = this.slice();\n        return clone.sort.apply(clone, arguments);\n    },\n    remove: function (value) {\n        var adm = this[$mobx];\n        var idx = adm.dehanceValues(adm.values).indexOf(value);\n        if (idx > -1) {\n            this.splice(idx, 1);\n            return true;\n        }\n        return false;\n    },\n    get: function (index) {\n        var adm = this[$mobx];\n        if (adm) {\n            if (index < adm.values.length) {\n                adm.atom.reportObserved();\n                return adm.dehanceValue(adm.values[index]);\n            }\n            console.warn(\"[mobx.array] Attempt to read an array index (\" + index + \") that is out of bounds (\" + adm.values.length + \"). Please check length first. Out of bound indices will not be tracked by MobX\");\n        }\n        return undefined;\n    },\n    set: function (index, newValue) {\n        var adm = this[$mobx];\n        var values = adm.values;\n        if (index < values.length) {\n            // update at index in range\n            checkIfStateModificationsAreAllowed(adm.atom);\n            var oldValue = values[index];\n            if (hasInterceptors(adm)) {\n                var change = interceptChange(adm, {\n                    type: \"update\",\n                    object: adm.proxy,\n                    index: index,\n                    newValue: newValue\n                });\n                if (!change)\n                    return;\n                newValue = change.newValue;\n            }\n            newValue = adm.enhancer(newValue, oldValue);\n            var changed = newValue !== oldValue;\n            if (changed) {\n                values[index] = newValue;\n                adm.notifyArrayChildUpdate(index, newValue, oldValue);\n            }\n        }\n        else if (index === values.length) {\n            // add a new item\n            adm.spliceWithArray(index, 0, [newValue]);\n        }\n        else {\n            // out of bounds\n            throw new Error(\"[mobx.array] Index out of bounds, \" + index + \" is larger than \" + values.length);\n        }\n    }\n};\n[\n    \"concat\",\n    \"flat\",\n    \"includes\",\n    \"indexOf\",\n    \"join\",\n    \"lastIndexOf\",\n    \"slice\",\n    \"toString\",\n    \"toLocaleString\"\n].forEach(function (funcName) {\n    // Feature detection (eg flat may not be available)\n    if (typeof Array.prototype[funcName] !== \"function\") {\n        return;\n    }\n    arrayExtensions[funcName] = function () {\n        var adm = this[$mobx];\n        adm.atom.reportObserved();\n        var dehancedValues = adm.dehanceValues(adm.values);\n        return dehancedValues[funcName].apply(dehancedValues, arguments);\n    };\n});\n[\"every\", \"filter\", \"find\", \"findIndex\", \"flatMap\", \"forEach\", \"map\", \"some\"].forEach(function (funcName) {\n    // Feature detection (eg flatMap may not be available)\n    if (typeof Array.prototype[funcName] !== \"function\") {\n        return;\n    }\n    arrayExtensions[funcName] = function (callback, thisArg) {\n        var _this = this;\n        var adm = this[$mobx];\n        adm.atom.reportObserved();\n        var dehancedValues = adm.dehanceValues(adm.values);\n        return dehancedValues[funcName](function (element, index) {\n            return callback.call(thisArg, element, index, _this);\n        }, thisArg);\n    };\n});\n[\"reduce\", \"reduceRight\"].forEach(function (funcName) {\n    arrayExtensions[funcName] = function () {\n        var _this = this;\n        var adm = this[$mobx];\n        adm.atom.reportObserved();\n        // #2432 - reduce behavior depends on arguments.length\n        var callback = arguments[0];\n        arguments[0] = function (accumulator, currentValue, index) {\n            currentValue = adm.dehanceValue(currentValue);\n            return callback(accumulator, currentValue, index, _this);\n        };\n        return adm.values[funcName].apply(adm.values, arguments);\n    };\n});\nvar isObservableArrayAdministration = createInstanceofPredicate(\"ObservableArrayAdministration\", ObservableArrayAdministration);\nfunction isObservableArray(thing) {\n    return isObject(thing) && isObservableArrayAdministration(thing[$mobx]);\n}\n\nvar _a;\nvar ObservableMapMarker = {};\n// just extend Map? See also https://gist.github.com/nestharus/13b4d74f2ef4a2f4357dbd3fc23c1e54\n// But: https://github.com/mobxjs/mobx/issues/1556\nvar ObservableMap = /** @class */ (function () {\n    function ObservableMap(initialData, enhancer, name) {\n        if (enhancer === void 0) { enhancer = deepEnhancer; }\n        if (name === void 0) { name = \"ObservableMap@\" + getNextId(); }\n        this.enhancer = enhancer;\n        this.name = name;\n        this[_a] = ObservableMapMarker;\n        this._keysAtom = createAtom(this.name + \".keys()\");\n        this[Symbol.toStringTag] = \"Map\";\n        if (typeof Map !== \"function\") {\n            throw new Error(\"mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js\");\n        }\n        this._data = new Map();\n        this._hasMap = new Map();\n        this.merge(initialData);\n    }\n    ObservableMap.prototype._has = function (key) {\n        return this._data.has(key);\n    };\n    ObservableMap.prototype.has = function (key) {\n        var _this = this;\n        if (!globalState.trackingDerivation)\n            return this._has(key);\n        var entry = this._hasMap.get(key);\n        if (!entry) {\n            // todo: replace with atom (breaking change)\n            var newEntry = (entry = new ObservableValue(this._has(key), referenceEnhancer, this.name + \".\" + stringifyKey(key) + \"?\", false));\n            this._hasMap.set(key, newEntry);\n            onBecomeUnobserved(newEntry, function () { return _this._hasMap.delete(key); });\n        }\n        return entry.get();\n    };\n    ObservableMap.prototype.set = function (key, value) {\n        var hasKey = this._has(key);\n        if (hasInterceptors(this)) {\n            var change = interceptChange(this, {\n                type: hasKey ? \"update\" : \"add\",\n                object: this,\n                newValue: value,\n                name: key\n            });\n            if (!change)\n                return this;\n            value = change.newValue;\n        }\n        if (hasKey) {\n            this._updateValue(key, value);\n        }\n        else {\n            this._addValue(key, value);\n        }\n        return this;\n    };\n    ObservableMap.prototype.delete = function (key) {\n        var _this = this;\n        checkIfStateModificationsAreAllowed(this._keysAtom);\n        if (hasInterceptors(this)) {\n            var change = interceptChange(this, {\n                type: \"delete\",\n                object: this,\n                name: key\n            });\n            if (!change)\n                return false;\n        }\n        if (this._has(key)) {\n            var notifySpy = isSpyEnabled();\n            var notify = hasListeners(this);\n            var change = notify || notifySpy\n                ? {\n                    type: \"delete\",\n                    object: this,\n                    oldValue: this._data.get(key).value,\n                    name: key\n                }\n                : null;\n            if (notifySpy && process.env.NODE_ENV !== \"production\")\n                spyReportStart(__assign(__assign({}, change), { name: this.name, key: key }));\n            transaction(function () {\n                _this._keysAtom.reportChanged();\n                _this._updateHasMapEntry(key, false);\n                var observable = _this._data.get(key);\n                observable.setNewValue(undefined);\n                _this._data.delete(key);\n            });\n            if (notify)\n                notifyListeners(this, change);\n            if (notifySpy && process.env.NODE_ENV !== \"production\")\n                spyReportEnd();\n            return true;\n        }\n        return false;\n    };\n    ObservableMap.prototype._updateHasMapEntry = function (key, value) {\n        var entry = this._hasMap.get(key);\n        if (entry) {\n            entry.setNewValue(value);\n        }\n    };\n    ObservableMap.prototype._updateValue = function (key, newValue) {\n        var observable = this._data.get(key);\n        newValue = observable.prepareNewValue(newValue);\n        if (newValue !== globalState.UNCHANGED) {\n            var notifySpy = isSpyEnabled();\n            var notify = hasListeners(this);\n            var change = notify || notifySpy\n                ? {\n                    type: \"update\",\n                    object: this,\n                    oldValue: observable.value,\n                    name: key,\n                    newValue: newValue\n                }\n                : null;\n            if (notifySpy && process.env.NODE_ENV !== \"production\")\n                spyReportStart(__assign(__assign({}, change), { name: this.name, key: key }));\n            observable.setNewValue(newValue);\n            if (notify)\n                notifyListeners(this, change);\n            if (notifySpy && process.env.NODE_ENV !== \"production\")\n                spyReportEnd();\n        }\n    };\n    ObservableMap.prototype._addValue = function (key, newValue) {\n        var _this = this;\n        checkIfStateModificationsAreAllowed(this._keysAtom);\n        transaction(function () {\n            var observable = new ObservableValue(newValue, _this.enhancer, _this.name + \".\" + stringifyKey(key), false);\n            _this._data.set(key, observable);\n            newValue = observable.value; // value might have been changed\n            _this._updateHasMapEntry(key, true);\n            _this._keysAtom.reportChanged();\n        });\n        var notifySpy = isSpyEnabled();\n        var notify = hasListeners(this);\n        var change = notify || notifySpy\n            ? {\n                type: \"add\",\n                object: this,\n                name: key,\n                newValue: newValue\n            }\n            : null;\n        if (notifySpy && process.env.NODE_ENV !== \"production\")\n            spyReportStart(__assign(__assign({}, change), { name: this.name, key: key }));\n        if (notify)\n            notifyListeners(this, change);\n        if (notifySpy && process.env.NODE_ENV !== \"production\")\n            spyReportEnd();\n    };\n    ObservableMap.prototype.get = function (key) {\n        if (this.has(key))\n            return this.dehanceValue(this._data.get(key).get());\n        return this.dehanceValue(undefined);\n    };\n    ObservableMap.prototype.dehanceValue = function (value) {\n        if (this.dehancer !== undefined) {\n            return this.dehancer(value);\n        }\n        return value;\n    };\n    ObservableMap.prototype.keys = function () {\n        this._keysAtom.reportObserved();\n        return this._data.keys();\n    };\n    ObservableMap.prototype.values = function () {\n        var self = this;\n        var keys = this.keys();\n        return makeIterable({\n            next: function () {\n                var _b = keys.next(), done = _b.done, value = _b.value;\n                return {\n                    done: done,\n                    value: done ? undefined : self.get(value)\n                };\n            }\n        });\n    };\n    ObservableMap.prototype.entries = function () {\n        var self = this;\n        var keys = this.keys();\n        return makeIterable({\n            next: function () {\n                var _b = keys.next(), done = _b.done, value = _b.value;\n                return {\n                    done: done,\n                    value: done ? undefined : [value, self.get(value)]\n                };\n            }\n        });\n    };\n    ObservableMap.prototype[(_a = $mobx, Symbol.iterator)] = function () {\n        return this.entries();\n    };\n    ObservableMap.prototype.forEach = function (callback, thisArg) {\n        var e_1, _b;\n        try {\n            for (var _c = __values(this), _d = _c.next(); !_d.done; _d = _c.next()) {\n                var _e = __read(_d.value, 2), key = _e[0], value = _e[1];\n                callback.call(thisArg, value, key, this);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_d && !_d.done && (_b = _c.return)) _b.call(_c);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    };\n    /** Merge another object into this object, returns this. */\n    ObservableMap.prototype.merge = function (other) {\n        var _this = this;\n        if (isObservableMap(other)) {\n            other = other.toJS();\n        }\n        transaction(function () {\n            var prev = allowStateChangesStart(true);\n            try {\n                if (isPlainObject(other))\n                    getPlainObjectKeys(other).forEach(function (key) {\n                        return _this.set(key, other[key]);\n                    });\n                else if (Array.isArray(other))\n                    other.forEach(function (_b) {\n                        var _c = __read(_b, 2), key = _c[0], value = _c[1];\n                        return _this.set(key, value);\n                    });\n                else if (isES6Map(other)) {\n                    if (other.constructor !== Map)\n                        fail(\"Cannot initialize from classes that inherit from Map: \" + other.constructor.name); // prettier-ignore\n                    other.forEach(function (value, key) { return _this.set(key, value); });\n                }\n                else if (other !== null && other !== undefined)\n                    fail(\"Cannot initialize map from \" + other);\n            }\n            finally {\n                allowStateChangesEnd(prev);\n            }\n        });\n        return this;\n    };\n    ObservableMap.prototype.clear = function () {\n        var _this = this;\n        transaction(function () {\n            untracked(function () {\n                var e_2, _b;\n                try {\n                    for (var _c = __values(_this.keys()), _d = _c.next(); !_d.done; _d = _c.next()) {\n                        var key = _d.value;\n                        _this.delete(key);\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (_d && !_d.done && (_b = _c.return)) _b.call(_c);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n            });\n        });\n    };\n    ObservableMap.prototype.replace = function (values) {\n        var _this = this;\n        // Implementation requirements:\n        // - respect ordering of replacement map\n        // - allow interceptors to run and potentially prevent individual operations\n        // - don't recreate observables that already exist in original map (so we don't destroy existing subscriptions)\n        // - don't _keysAtom.reportChanged if the keys of resulting map are indentical (order matters!)\n        // - note that result map may differ from replacement map due to the interceptors\n        transaction(function () {\n            var e_3, _b, e_4, _c;\n            // Convert to map so we can do quick key lookups\n            var replacementMap = convertToMap(values);\n            var orderedData = new Map();\n            // Used for optimization\n            var keysReportChangedCalled = false;\n            try {\n                // Delete keys that don't exist in replacement map\n                // if the key deletion is prevented by interceptor\n                // add entry at the beginning of the result map\n                for (var _d = __values(_this._data.keys()), _e = _d.next(); !_e.done; _e = _d.next()) {\n                    var key = _e.value;\n                    // Concurrently iterating/deleting keys\n                    // iterator should handle this correctly\n                    if (!replacementMap.has(key)) {\n                        var deleted = _this.delete(key);\n                        // Was the key removed?\n                        if (deleted) {\n                            // _keysAtom.reportChanged() was already called\n                            keysReportChangedCalled = true;\n                        }\n                        else {\n                            // Delete prevented by interceptor\n                            var value = _this._data.get(key);\n                            orderedData.set(key, value);\n                        }\n                    }\n                }\n            }\n            catch (e_3_1) { e_3 = { error: e_3_1 }; }\n            finally {\n                try {\n                    if (_e && !_e.done && (_b = _d.return)) _b.call(_d);\n                }\n                finally { if (e_3) throw e_3.error; }\n            }\n            try {\n                // Merge entries\n                for (var _f = __values(replacementMap.entries()), _g = _f.next(); !_g.done; _g = _f.next()) {\n                    var _h = __read(_g.value, 2), key = _h[0], value = _h[1];\n                    // We will want to know whether a new key is added\n                    var keyExisted = _this._data.has(key);\n                    // Add or update value\n                    _this.set(key, value);\n                    // The addition could have been prevent by interceptor\n                    if (_this._data.has(key)) {\n                        // The update could have been prevented by interceptor\n                        // and also we want to preserve existing values\n                        // so use value from _data map (instead of replacement map)\n                        var value_1 = _this._data.get(key);\n                        orderedData.set(key, value_1);\n                        // Was a new key added?\n                        if (!keyExisted) {\n                            // _keysAtom.reportChanged() was already called\n                            keysReportChangedCalled = true;\n                        }\n                    }\n                }\n            }\n            catch (e_4_1) { e_4 = { error: e_4_1 }; }\n            finally {\n                try {\n                    if (_g && !_g.done && (_c = _f.return)) _c.call(_f);\n                }\n                finally { if (e_4) throw e_4.error; }\n            }\n            // Check for possible key order change\n            if (!keysReportChangedCalled) {\n                if (_this._data.size !== orderedData.size) {\n                    // If size differs, keys are definitely modified\n                    _this._keysAtom.reportChanged();\n                }\n                else {\n                    var iter1 = _this._data.keys();\n                    var iter2 = orderedData.keys();\n                    var next1 = iter1.next();\n                    var next2 = iter2.next();\n                    while (!next1.done) {\n                        if (next1.value !== next2.value) {\n                            _this._keysAtom.reportChanged();\n                            break;\n                        }\n                        next1 = iter1.next();\n                        next2 = iter2.next();\n                    }\n                }\n            }\n            // Use correctly ordered map\n            _this._data = orderedData;\n        });\n        return this;\n    };\n    Object.defineProperty(ObservableMap.prototype, \"size\", {\n        get: function () {\n            this._keysAtom.reportObserved();\n            return this._data.size;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Returns a plain object that represents this map.\n     * Note that all the keys being stringified.\n     * If there are duplicating keys after converting them to strings, behaviour is undetermined.\n     */\n    ObservableMap.prototype.toPOJO = function () {\n        var e_5, _b;\n        var res = {};\n        try {\n            for (var _c = __values(this), _d = _c.next(); !_d.done; _d = _c.next()) {\n                var _e = __read(_d.value, 2), key = _e[0], value = _e[1];\n                // We lie about symbol key types due to https://github.com/Microsoft/TypeScript/issues/1863\n                res[typeof key === \"symbol\" ? key : stringifyKey(key)] = value;\n            }\n        }\n        catch (e_5_1) { e_5 = { error: e_5_1 }; }\n        finally {\n            try {\n                if (_d && !_d.done && (_b = _c.return)) _b.call(_c);\n            }\n            finally { if (e_5) throw e_5.error; }\n        }\n        return res;\n    };\n    /**\n     * Returns a shallow non observable object clone of this map.\n     * Note that the values migth still be observable. For a deep clone use mobx.toJS.\n     */\n    ObservableMap.prototype.toJS = function () {\n        return new Map(this);\n    };\n    ObservableMap.prototype.toJSON = function () {\n        // Used by JSON.stringify\n        return this.toPOJO();\n    };\n    ObservableMap.prototype.toString = function () {\n        var _this = this;\n        return (this.name +\n            \"[{ \" +\n            Array.from(this.keys())\n                .map(function (key) { return stringifyKey(key) + \": \" + (\"\" + _this.get(key)); })\n                .join(\", \") +\n            \" }]\");\n    };\n    /**\n     * Observes this object. Triggers for the events 'add', 'update' and 'delete'.\n     * See: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/observe\n     * for callback details\n     */\n    ObservableMap.prototype.observe = function (listener, fireImmediately) {\n        process.env.NODE_ENV !== \"production\" &&\n            invariant(fireImmediately !== true, \"`observe` doesn't support fireImmediately=true in combination with maps.\");\n        return registerListener(this, listener);\n    };\n    ObservableMap.prototype.intercept = function (handler) {\n        return registerInterceptor(this, handler);\n    };\n    return ObservableMap;\n}());\n/* 'var' fixes small-build issue */\nvar isObservableMap = createInstanceofPredicate(\"ObservableMap\", ObservableMap);\n\nvar _a$1;\nvar ObservableSetMarker = {};\nvar ObservableSet = /** @class */ (function () {\n    function ObservableSet(initialData, enhancer, name) {\n        if (enhancer === void 0) { enhancer = deepEnhancer; }\n        if (name === void 0) { name = \"ObservableSet@\" + getNextId(); }\n        this.name = name;\n        this[_a$1] = ObservableSetMarker;\n        this._data = new Set();\n        this._atom = createAtom(this.name);\n        this[Symbol.toStringTag] = \"Set\";\n        if (typeof Set !== \"function\") {\n            throw new Error(\"mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js\");\n        }\n        this.enhancer = function (newV, oldV) { return enhancer(newV, oldV, name); };\n        if (initialData) {\n            this.replace(initialData);\n        }\n    }\n    ObservableSet.prototype.dehanceValue = function (value) {\n        if (this.dehancer !== undefined) {\n            return this.dehancer(value);\n        }\n        return value;\n    };\n    ObservableSet.prototype.clear = function () {\n        var _this = this;\n        transaction(function () {\n            untracked(function () {\n                var e_1, _b;\n                try {\n                    for (var _c = __values(_this._data.values()), _d = _c.next(); !_d.done; _d = _c.next()) {\n                        var value = _d.value;\n                        _this.delete(value);\n                    }\n                }\n                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                finally {\n                    try {\n                        if (_d && !_d.done && (_b = _c.return)) _b.call(_c);\n                    }\n                    finally { if (e_1) throw e_1.error; }\n                }\n            });\n        });\n    };\n    ObservableSet.prototype.forEach = function (callbackFn, thisArg) {\n        var e_2, _b;\n        try {\n            for (var _c = __values(this), _d = _c.next(); !_d.done; _d = _c.next()) {\n                var value = _d.value;\n                callbackFn.call(thisArg, value, value, this);\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (_d && !_d.done && (_b = _c.return)) _b.call(_c);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n    };\n    Object.defineProperty(ObservableSet.prototype, \"size\", {\n        get: function () {\n            this._atom.reportObserved();\n            return this._data.size;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ObservableSet.prototype.add = function (value) {\n        var _this = this;\n        checkIfStateModificationsAreAllowed(this._atom);\n        if (hasInterceptors(this)) {\n            var change = interceptChange(this, {\n                type: \"add\",\n                object: this,\n                newValue: value\n            });\n            if (!change)\n                return this;\n            // TODO: ideally, value = change.value would be done here, so that values can be\n            // changed by interceptor. Same applies for other Set and Map api's.\n        }\n        if (!this.has(value)) {\n            transaction(function () {\n                _this._data.add(_this.enhancer(value, undefined));\n                _this._atom.reportChanged();\n            });\n            var notifySpy = isSpyEnabled();\n            var notify = hasListeners(this);\n            var change = notify || notifySpy\n                ? {\n                    type: \"add\",\n                    object: this,\n                    newValue: value\n                }\n                : null;\n            if (notifySpy && process.env.NODE_ENV !== \"production\")\n                spyReportStart(change);\n            if (notify)\n                notifyListeners(this, change);\n            if (notifySpy && process.env.NODE_ENV !== \"production\")\n                spyReportEnd();\n        }\n        return this;\n    };\n    ObservableSet.prototype.delete = function (value) {\n        var _this = this;\n        if (hasInterceptors(this)) {\n            var change = interceptChange(this, {\n                type: \"delete\",\n                object: this,\n                oldValue: value\n            });\n            if (!change)\n                return false;\n        }\n        if (this.has(value)) {\n            var notifySpy = isSpyEnabled();\n            var notify = hasListeners(this);\n            var change = notify || notifySpy\n                ? {\n                    type: \"delete\",\n                    object: this,\n                    oldValue: value\n                }\n                : null;\n            if (notifySpy && process.env.NODE_ENV !== \"production\")\n                spyReportStart(__assign(__assign({}, change), { name: this.name }));\n            transaction(function () {\n                _this._atom.reportChanged();\n                _this._data.delete(value);\n            });\n            if (notify)\n                notifyListeners(this, change);\n            if (notifySpy && process.env.NODE_ENV !== \"production\")\n                spyReportEnd();\n            return true;\n        }\n        return false;\n    };\n    ObservableSet.prototype.has = function (value) {\n        this._atom.reportObserved();\n        return this._data.has(this.dehanceValue(value));\n    };\n    ObservableSet.prototype.entries = function () {\n        var nextIndex = 0;\n        var keys = Array.from(this.keys());\n        var values = Array.from(this.values());\n        return makeIterable({\n            next: function () {\n                var index = nextIndex;\n                nextIndex += 1;\n                return index < values.length\n                    ? { value: [keys[index], values[index]], done: false }\n                    : { done: true };\n            }\n        });\n    };\n    ObservableSet.prototype.keys = function () {\n        return this.values();\n    };\n    ObservableSet.prototype.values = function () {\n        this._atom.reportObserved();\n        var self = this;\n        var nextIndex = 0;\n        var observableValues = Array.from(this._data.values());\n        return makeIterable({\n            next: function () {\n                return nextIndex < observableValues.length\n                    ? { value: self.dehanceValue(observableValues[nextIndex++]), done: false }\n                    : { done: true };\n            }\n        });\n    };\n    ObservableSet.prototype.replace = function (other) {\n        var _this = this;\n        if (isObservableSet(other)) {\n            other = other.toJS();\n        }\n        transaction(function () {\n            var prev = allowStateChangesStart(true);\n            try {\n                if (Array.isArray(other)) {\n                    _this.clear();\n                    other.forEach(function (value) { return _this.add(value); });\n                }\n                else if (isES6Set(other)) {\n                    _this.clear();\n                    other.forEach(function (value) { return _this.add(value); });\n                }\n                else if (other !== null && other !== undefined) {\n                    fail(\"Cannot initialize set from \" + other);\n                }\n            }\n            finally {\n                allowStateChangesEnd(prev);\n            }\n        });\n        return this;\n    };\n    ObservableSet.prototype.observe = function (listener, fireImmediately) {\n        // TODO 'fireImmediately' can be true?\n        process.env.NODE_ENV !== \"production\" &&\n            invariant(fireImmediately !== true, \"`observe` doesn't support fireImmediately=true in combination with sets.\");\n        return registerListener(this, listener);\n    };\n    ObservableSet.prototype.intercept = function (handler) {\n        return registerInterceptor(this, handler);\n    };\n    ObservableSet.prototype.toJS = function () {\n        return new Set(this);\n    };\n    ObservableSet.prototype.toString = function () {\n        return this.name + \"[ \" + Array.from(this).join(\", \") + \" ]\";\n    };\n    ObservableSet.prototype[(_a$1 = $mobx, Symbol.iterator)] = function () {\n        return this.values();\n    };\n    return ObservableSet;\n}());\nvar isObservableSet = createInstanceofPredicate(\"ObservableSet\", ObservableSet);\n\nvar ObservableObjectAdministration = /** @class */ (function () {\n    function ObservableObjectAdministration(target, values, name, defaultEnhancer) {\n        if (values === void 0) { values = new Map(); }\n        this.target = target;\n        this.values = values;\n        this.name = name;\n        this.defaultEnhancer = defaultEnhancer;\n        this.keysAtom = new Atom(name + \".keys\");\n    }\n    ObservableObjectAdministration.prototype.read = function (key) {\n        return this.values.get(key).get();\n    };\n    ObservableObjectAdministration.prototype.write = function (key, newValue) {\n        var instance = this.target;\n        var observable = this.values.get(key);\n        if (observable instanceof ComputedValue) {\n            observable.set(newValue);\n            return;\n        }\n        // intercept\n        if (hasInterceptors(this)) {\n            var change = interceptChange(this, {\n                type: \"update\",\n                object: this.proxy || instance,\n                name: key,\n                newValue: newValue\n            });\n            if (!change)\n                return;\n            newValue = change.newValue;\n        }\n        newValue = observable.prepareNewValue(newValue);\n        // notify spy & observers\n        if (newValue !== globalState.UNCHANGED) {\n            var notify = hasListeners(this);\n            var notifySpy = isSpyEnabled();\n            var change = notify || notifySpy\n                ? {\n                    type: \"update\",\n                    object: this.proxy || instance,\n                    oldValue: observable.value,\n                    name: key,\n                    newValue: newValue\n                }\n                : null;\n            if (notifySpy && process.env.NODE_ENV !== \"production\")\n                spyReportStart(__assign(__assign({}, change), { name: this.name, key: key }));\n            observable.setNewValue(newValue);\n            if (notify)\n                notifyListeners(this, change);\n            if (notifySpy && process.env.NODE_ENV !== \"production\")\n                spyReportEnd();\n        }\n    };\n    ObservableObjectAdministration.prototype.has = function (key) {\n        var map = this.pendingKeys || (this.pendingKeys = new Map());\n        var entry = map.get(key);\n        if (entry)\n            return entry.get();\n        else {\n            var exists = !!this.values.get(key);\n            // Possible optimization: Don't have a separate map for non existing keys,\n            // but store them in the values map instead, using a special symbol to denote \"not existing\"\n            entry = new ObservableValue(exists, referenceEnhancer, this.name + \".\" + stringifyKey(key) + \"?\", false);\n            map.set(key, entry);\n            return entry.get(); // read to subscribe\n        }\n    };\n    ObservableObjectAdministration.prototype.addObservableProp = function (propName, newValue, enhancer) {\n        if (enhancer === void 0) { enhancer = this.defaultEnhancer; }\n        var target = this.target;\n        assertPropertyConfigurable(target, propName);\n        if (hasInterceptors(this)) {\n            var change = interceptChange(this, {\n                object: this.proxy || target,\n                name: propName,\n                type: \"add\",\n                newValue: newValue\n            });\n            if (!change)\n                return;\n            newValue = change.newValue;\n        }\n        var observable = new ObservableValue(newValue, enhancer, this.name + \".\" + stringifyKey(propName), false);\n        this.values.set(propName, observable);\n        newValue = observable.value; // observableValue might have changed it\n        Object.defineProperty(target, propName, generateObservablePropConfig(propName));\n        this.notifyPropertyAddition(propName, newValue);\n    };\n    ObservableObjectAdministration.prototype.addComputedProp = function (propertyOwner, // where is the property declared?\n    propName, options) {\n        var target = this.target;\n        options.name = options.name || this.name + \".\" + stringifyKey(propName);\n        this.values.set(propName, new ComputedValue(options));\n        if (propertyOwner === target || isPropertyConfigurable(propertyOwner, propName))\n            Object.defineProperty(propertyOwner, propName, generateComputedPropConfig(propName));\n    };\n    ObservableObjectAdministration.prototype.remove = function (key) {\n        if (!this.values.has(key))\n            return;\n        var target = this.target;\n        if (hasInterceptors(this)) {\n            var change = interceptChange(this, {\n                object: this.proxy || target,\n                name: key,\n                type: \"remove\"\n            });\n            if (!change)\n                return;\n        }\n        try {\n            startBatch();\n            var notify = hasListeners(this);\n            var notifySpy = isSpyEnabled();\n            var oldObservable = this.values.get(key);\n            var oldValue = oldObservable && oldObservable.get();\n            oldObservable && oldObservable.set(undefined);\n            // notify key and keyset listeners\n            this.keysAtom.reportChanged();\n            this.values.delete(key);\n            if (this.pendingKeys) {\n                var entry = this.pendingKeys.get(key);\n                if (entry)\n                    entry.set(false);\n            }\n            // delete the prop\n            delete this.target[key];\n            var change = notify || notifySpy\n                ? {\n                    type: \"remove\",\n                    object: this.proxy || target,\n                    oldValue: oldValue,\n                    name: key\n                }\n                : null;\n            if (notifySpy && process.env.NODE_ENV !== \"production\")\n                spyReportStart(__assign(__assign({}, change), { name: this.name, key: key }));\n            if (notify)\n                notifyListeners(this, change);\n            if (notifySpy && process.env.NODE_ENV !== \"production\")\n                spyReportEnd();\n        }\n        finally {\n            endBatch();\n        }\n    };\n    ObservableObjectAdministration.prototype.illegalAccess = function (owner, propName) {\n        /**\n         * This happens if a property is accessed through the prototype chain, but the property was\n         * declared directly as own property on the prototype.\n         *\n         * E.g.:\n         * class A {\n         * }\n         * extendObservable(A.prototype, { x: 1 })\n         *\n         * classB extens A {\n         * }\n         * console.log(new B().x)\n         *\n         * It is unclear whether the property should be considered 'static' or inherited.\n         * Either use `console.log(A.x)`\n         * or: decorate(A, { x: observable })\n         *\n         * When using decorate, the property will always be redeclared as own property on the actual instance\n         */\n        console.warn(\"Property '\" + propName + \"' of '\" + owner + \"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner\");\n    };\n    /**\n     * Observes this object. Triggers for the events 'add', 'update' and 'delete'.\n     * See: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/observe\n     * for callback details\n     */\n    ObservableObjectAdministration.prototype.observe = function (callback, fireImmediately) {\n        process.env.NODE_ENV !== \"production\" &&\n            invariant(fireImmediately !== true, \"`observe` doesn't support the fire immediately property for observable objects.\");\n        return registerListener(this, callback);\n    };\n    ObservableObjectAdministration.prototype.intercept = function (handler) {\n        return registerInterceptor(this, handler);\n    };\n    ObservableObjectAdministration.prototype.notifyPropertyAddition = function (key, newValue) {\n        var notify = hasListeners(this);\n        var notifySpy = isSpyEnabled();\n        var change = notify || notifySpy\n            ? {\n                type: \"add\",\n                object: this.proxy || this.target,\n                name: key,\n                newValue: newValue\n            }\n            : null;\n        if (notifySpy && process.env.NODE_ENV !== \"production\")\n            spyReportStart(__assign(__assign({}, change), { name: this.name, key: key }));\n        if (notify)\n            notifyListeners(this, change);\n        if (notifySpy && process.env.NODE_ENV !== \"production\")\n            spyReportEnd();\n        if (this.pendingKeys) {\n            var entry = this.pendingKeys.get(key);\n            if (entry)\n                entry.set(true);\n        }\n        this.keysAtom.reportChanged();\n    };\n    ObservableObjectAdministration.prototype.getKeys = function () {\n        var e_1, _a;\n        this.keysAtom.reportObserved();\n        // return Reflect.ownKeys(this.values) as any\n        var res = [];\n        try {\n            for (var _b = __values(this.values), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var _d = __read(_c.value, 2), key = _d[0], value = _d[1];\n                if (value instanceof ObservableValue)\n                    res.push(key);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return res;\n    };\n    return ObservableObjectAdministration;\n}());\nfunction asObservableObject(target, name, defaultEnhancer) {\n    if (name === void 0) { name = \"\"; }\n    if (defaultEnhancer === void 0) { defaultEnhancer = deepEnhancer; }\n    if (Object.prototype.hasOwnProperty.call(target, $mobx))\n        return target[$mobx];\n    process.env.NODE_ENV !== \"production\" &&\n        invariant(Object.isExtensible(target), \"Cannot make the designated object observable; it is not extensible\");\n    if (!isPlainObject(target))\n        name = (target.constructor.name || \"ObservableObject\") + \"@\" + getNextId();\n    if (!name)\n        name = \"ObservableObject@\" + getNextId();\n    var adm = new ObservableObjectAdministration(target, new Map(), stringifyKey(name), defaultEnhancer);\n    addHiddenProp(target, $mobx, adm);\n    return adm;\n}\nvar observablePropertyConfigs = Object.create(null);\nvar computedPropertyConfigs = Object.create(null);\nfunction generateObservablePropConfig(propName) {\n    return (observablePropertyConfigs[propName] ||\n        (observablePropertyConfigs[propName] = {\n            configurable: true,\n            enumerable: true,\n            get: function () {\n                return this[$mobx].read(propName);\n            },\n            set: function (v) {\n                this[$mobx].write(propName, v);\n            }\n        }));\n}\nfunction getAdministrationForComputedPropOwner(owner) {\n    var adm = owner[$mobx];\n    if (!adm) {\n        // because computed props are declared on proty,\n        // the current instance might not have been initialized yet\n        initializeInstance(owner);\n        return owner[$mobx];\n    }\n    return adm;\n}\nfunction generateComputedPropConfig(propName) {\n    return (computedPropertyConfigs[propName] ||\n        (computedPropertyConfigs[propName] = {\n            configurable: globalState.computedConfigurable,\n            enumerable: false,\n            get: function () {\n                return getAdministrationForComputedPropOwner(this).read(propName);\n            },\n            set: function (v) {\n                getAdministrationForComputedPropOwner(this).write(propName, v);\n            }\n        }));\n}\nvar isObservableObjectAdministration = createInstanceofPredicate(\"ObservableObjectAdministration\", ObservableObjectAdministration);\nfunction isObservableObject(thing) {\n    if (isObject(thing)) {\n        // Initializers run lazily when transpiling to babel, so make sure they are run...\n        initializeInstance(thing);\n        return isObservableObjectAdministration(thing[$mobx]);\n    }\n    return false;\n}\n\nfunction getAtom(thing, property) {\n    if (typeof thing === \"object\" && thing !== null) {\n        if (isObservableArray(thing)) {\n            if (property !== undefined)\n                fail(process.env.NODE_ENV !== \"production\" &&\n                    \"It is not possible to get index atoms from arrays\");\n            return thing[$mobx].atom;\n        }\n        if (isObservableSet(thing)) {\n            return thing[$mobx];\n        }\n        if (isObservableMap(thing)) {\n            var anyThing = thing;\n            if (property === undefined)\n                return anyThing._keysAtom;\n            var observable = anyThing._data.get(property) || anyThing._hasMap.get(property);\n            if (!observable)\n                fail(process.env.NODE_ENV !== \"production\" &&\n                    \"the entry '\" + property + \"' does not exist in the observable map '\" + getDebugName(thing) + \"'\");\n            return observable;\n        }\n        // Initializers run lazily when transpiling to babel, so make sure they are run...\n        initializeInstance(thing);\n        if (property && !thing[$mobx])\n            thing[property]; // See #1072\n        if (isObservableObject(thing)) {\n            if (!property)\n                return fail(process.env.NODE_ENV !== \"production\" && \"please specify a property\");\n            var observable = thing[$mobx].values.get(property);\n            if (!observable)\n                fail(process.env.NODE_ENV !== \"production\" &&\n                    \"no observable property '\" + property + \"' found on the observable object '\" + getDebugName(thing) + \"'\");\n            return observable;\n        }\n        if (isAtom(thing) || isComputedValue(thing) || isReaction(thing)) {\n            return thing;\n        }\n    }\n    else if (typeof thing === \"function\") {\n        if (isReaction(thing[$mobx])) {\n            // disposer function\n            return thing[$mobx];\n        }\n    }\n    return fail(process.env.NODE_ENV !== \"production\" && \"Cannot obtain atom from \" + thing);\n}\nfunction getAdministration(thing, property) {\n    if (!thing)\n        fail(\"Expecting some object\");\n    if (property !== undefined)\n        return getAdministration(getAtom(thing, property));\n    if (isAtom(thing) || isComputedValue(thing) || isReaction(thing))\n        return thing;\n    if (isObservableMap(thing) || isObservableSet(thing))\n        return thing;\n    // Initializers run lazily when transpiling to babel, so make sure they are run...\n    initializeInstance(thing);\n    if (thing[$mobx])\n        return thing[$mobx];\n    fail(process.env.NODE_ENV !== \"production\" && \"Cannot obtain administration from \" + thing);\n}\nfunction getDebugName(thing, property) {\n    var named;\n    if (property !== undefined)\n        named = getAtom(thing, property);\n    else if (isObservableObject(thing) || isObservableMap(thing) || isObservableSet(thing))\n        named = getAdministration(thing);\n    else\n        named = getAtom(thing); // valid for arrays as well\n    return named.name;\n}\n\nvar toString = Object.prototype.toString;\nfunction deepEqual(a, b, depth) {\n    if (depth === void 0) { depth = -1; }\n    return eq(a, b, depth);\n}\n// Copied from https://github.com/jashkenas/underscore/blob/5c237a7c682fb68fd5378203f0bf22dce1624854/underscore.js#L1186-L1289\n// Internal recursive comparison function for `isEqual`.\nfunction eq(a, b, depth, aStack, bStack) {\n    // Identical objects are equal. `0 === -0`, but they aren't identical.\n    // See the [Harmony `egal` proposal](http://wiki.ecmascript.org/doku.php?id=harmony:egal).\n    if (a === b)\n        return a !== 0 || 1 / a === 1 / b;\n    // `null` or `undefined` only equal to itself (strict comparison).\n    if (a == null || b == null)\n        return false;\n    // `NaN`s are equivalent, but non-reflexive.\n    if (a !== a)\n        return b !== b;\n    // Exhaust primitive checks\n    var type = typeof a;\n    if (type !== \"function\" && type !== \"object\" && typeof b != \"object\")\n        return false;\n    // Compare `[[Class]]` names.\n    var className = toString.call(a);\n    if (className !== toString.call(b))\n        return false;\n    switch (className) {\n        // Strings, numbers, regular expressions, dates, and booleans are compared by value.\n        case \"[object RegExp]\":\n        // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')\n        case \"[object String]\":\n            // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\n            // equivalent to `new String(\"5\")`.\n            return \"\" + a === \"\" + b;\n        case \"[object Number]\":\n            // `NaN`s are equivalent, but non-reflexive.\n            // Object(NaN) is equivalent to NaN.\n            if (+a !== +a)\n                return +b !== +b;\n            // An `egal` comparison is performed for other numeric values.\n            return +a === 0 ? 1 / +a === 1 / b : +a === +b;\n        case \"[object Date]\":\n        case \"[object Boolean]\":\n            // Coerce dates and booleans to numeric primitive values. Dates are compared by their\n            // millisecond representations. Note that invalid dates with millisecond representations\n            // of `NaN` are not equivalent.\n            return +a === +b;\n        case \"[object Symbol]\":\n            return (typeof Symbol !== \"undefined\" && Symbol.valueOf.call(a) === Symbol.valueOf.call(b));\n        case \"[object Map]\":\n        case \"[object Set]\":\n            // Maps and Sets are unwrapped to arrays of entry-pairs, adding an incidental level.\n            // Hide this extra level by increasing the depth.\n            if (depth >= 0) {\n                depth++;\n            }\n            break;\n    }\n    // Unwrap any wrapped objects.\n    a = unwrap(a);\n    b = unwrap(b);\n    var areArrays = className === \"[object Array]\";\n    if (!areArrays) {\n        if (typeof a != \"object\" || typeof b != \"object\")\n            return false;\n        // Objects with different constructors are not equivalent, but `Object`s or `Array`s\n        // from different frames are.\n        var aCtor = a.constructor, bCtor = b.constructor;\n        if (aCtor !== bCtor &&\n            !(typeof aCtor === \"function\" &&\n                aCtor instanceof aCtor &&\n                typeof bCtor === \"function\" &&\n                bCtor instanceof bCtor) &&\n            (\"constructor\" in a && \"constructor\" in b)) {\n            return false;\n        }\n    }\n    if (depth === 0) {\n        return false;\n    }\n    else if (depth < 0) {\n        depth = -1;\n    }\n    // Assume equality for cyclic structures. The algorithm for detecting cyclic\n    // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\n    // Initializing stack of traversed objects.\n    // It's done here since we only need them for objects and arrays comparison.\n    aStack = aStack || [];\n    bStack = bStack || [];\n    var length = aStack.length;\n    while (length--) {\n        // Linear search. Performance is inversely proportional to the number of\n        // unique nested structures.\n        if (aStack[length] === a)\n            return bStack[length] === b;\n    }\n    // Add the first object to the stack of traversed objects.\n    aStack.push(a);\n    bStack.push(b);\n    // Recursively compare objects and arrays.\n    if (areArrays) {\n        // Compare array lengths to determine if a deep comparison is necessary.\n        length = a.length;\n        if (length !== b.length)\n            return false;\n        // Deep compare the contents, ignoring non-numeric properties.\n        while (length--) {\n            if (!eq(a[length], b[length], depth - 1, aStack, bStack))\n                return false;\n        }\n    }\n    else {\n        // Deep compare objects.\n        var keys = Object.keys(a);\n        var key = void 0;\n        length = keys.length;\n        // Ensure that both objects contain the same number of properties before comparing deep equality.\n        if (Object.keys(b).length !== length)\n            return false;\n        while (length--) {\n            // Deep compare each member\n            key = keys[length];\n            if (!(has$1(b, key) && eq(a[key], b[key], depth - 1, aStack, bStack)))\n                return false;\n        }\n    }\n    // Remove the first object from the stack of traversed objects.\n    aStack.pop();\n    bStack.pop();\n    return true;\n}\nfunction unwrap(a) {\n    if (isObservableArray(a))\n        return a.slice();\n    if (isES6Map(a) || isObservableMap(a))\n        return Array.from(a.entries());\n    if (isES6Set(a) || isObservableSet(a))\n        return Array.from(a.entries());\n    return a;\n}\nfunction has$1(a, key) {\n    return Object.prototype.hasOwnProperty.call(a, key);\n}\n\nfunction makeIterable(iterator) {\n    iterator[Symbol.iterator] = getSelf;\n    return iterator;\n}\nfunction getSelf() {\n    return this;\n}\n\n/**\n * (c) Michel Weststrate 2015 - 2018\n * MIT Licensed\n *\n * Welcome to the mobx sources! To get an global overview of how MobX internally works,\n * this is a good place to start:\n * https://medium.com/@mweststrate/becoming-fully-reactive-an-in-depth-explanation-of-mobservable-55995262a254#.xvbh6qd74\n *\n * Source folders:\n * ===============\n *\n * - api/     Most of the public static methods exposed by the module can be found here.\n * - core/    Implementation of the MobX algorithm; atoms, derivations, reactions, dependency trees, optimizations. Cool stuff can be found here.\n * - types/   All the magic that is need to have observable objects, arrays and values is in this folder. Including the modifiers like `asFlat`.\n * - utils/   Utility stuff.\n *\n */\nif (typeof Proxy === \"undefined\" || typeof Symbol === \"undefined\") {\n    throw new Error(\"[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.\");\n}\ntry {\n    // define process.env if needed\n    // if this is not a production build in the first place\n    // (in which case the expression below would be substituted with 'production')\n    process.env.NODE_ENV;\n}\ncatch (e) {\n    var g = getGlobal();\n    if (typeof process === \"undefined\")\n        g.process = {};\n    g.process.env = {};\n}\n(function () {\n    function testCodeMinification() { }\n    if (testCodeMinification.name !== \"testCodeMinification\" &&\n        process.env.NODE_ENV !== \"production\" &&\n        typeof process !== 'undefined' && process.env.IGNORE_MOBX_MINIFY_WARNING !== \"true\") {\n        // trick so it doesn't get replaced\n        var varName = [\"process\", \"env\", \"NODE_ENV\"].join(\".\");\n        console.warn(\"[mobx] you are running a minified build, but '\" + varName + \"' was not set to 'production' in your bundler. This results in an unnecessarily large and slow bundle\");\n    }\n})();\nif (typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__ === \"object\") {\n    // See: https://github.com/andykog/mobx-devtools/\n    __MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({\n        spy: spy,\n        extras: {\n            getDebugName: getDebugName\n        },\n        $mobx: $mobx\n    });\n}\n\nexport { $mobx, FlowCancellationError, IDerivationState, ObservableMap, ObservableSet, Reaction, allowStateChanges as _allowStateChanges, allowStateChangesInsideComputed as _allowStateChangesInsideComputed, allowStateReadsEnd as _allowStateReadsEnd, allowStateReadsStart as _allowStateReadsStart, _endAction, getAdministration as _getAdministration, getGlobalState as _getGlobalState, interceptReads as _interceptReads, isComputingDerivation as _isComputingDerivation, resetGlobalState as _resetGlobalState, _startAction, action, autorun, comparer, computed, configure, createAtom, decorate, entries, extendObservable, flow, get, getAtom, getDebugName, getDependencyTree, getObserverTree, has, intercept, isAction, isArrayLike, isObservableValue as isBoxedObservable, isComputed, isComputedProp, isFlowCancellationError, isObservable, isObservableArray, isObservableMap, isObservableObject, isObservableProp, isObservableSet, keys, observable, observe, onBecomeObserved, onBecomeUnobserved, onReactionError, reaction, remove, runInAction, set, spy, toJS, trace, transaction, untracked, values, when };\n","import { Component, h } from 'preact';\nimport { createAtom, Reaction, _getGlobalState } from 'mobx';\n\nfunction isStateless(component) {\n    // `function() {}` has prototype, but `() => {}` doesn't\n    // `() => {}` via Babel has prototype too.\n    return !(component.prototype && component.prototype.render) && !Component.isPrototypeOf(component);\n}\n\nfunction makeDisplayName(component) {\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        _ref$prefix = _ref.prefix,\n        prefix = _ref$prefix === undefined ? '' : _ref$prefix,\n        _ref$suffix = _ref.suffix,\n        suffix = _ref$suffix === undefined ? '' : _ref$suffix;\n\n    var displayName = component.displayName || component.name || component.constructor && component.constructor.name || '<component>';\n    return prefix + displayName + suffix;\n}\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\nvar isUsingStaticRendering = false;\n\nvar logger = console; // eslint-disable-line no-console\n\nfunction useStaticRendering(useStaticRendering) {\n    isUsingStaticRendering = useStaticRendering;\n}\n\n/**\n Workaround\n\n allowStateChanges from mobX must be patched so that props, state and args are passed to the render() function\n */\n\nfunction allowStateChangesStart(allowStateChanges) {\n    var prev = _getGlobalState().allowStateChanges;\n    _getGlobalState().allowStateChanges = allowStateChanges;\n    return prev;\n}\nfunction allowStateChangesEnd(prev) {\n    _getGlobalState().allowStateChanges = prev;\n}\n\nfunction allowStateChanges(allowStateChanges, func, props, state, context) {\n    var prev = allowStateChangesStart(allowStateChanges);\n    var res = void 0;\n    try {\n        res = func(props, state, context);\n    } finally {\n        allowStateChangesEnd(prev);\n    }\n    return res;\n}\n\n/**\n * Utilities\n */\n\nfunction patch(target, funcName) {\n    var runMixinFirst = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n    var base = target[funcName];\n    var mixinFunc = reactiveMixin[funcName];\n    var f = !base ? mixinFunc : runMixinFirst === true ? function () {\n        mixinFunc.apply(this, arguments);\n        base.apply(this, arguments);\n    } : function () {\n        base.apply(this, arguments);\n        mixinFunc.apply(this, arguments);\n    };\n\n    // MWE: ideally we freeze here to protect against accidental overwrites in component instances, see #195\n    // ...but that breaks react-hot-loader, see #231...\n    target[funcName] = f;\n}\n\nfunction isObjectShallowModified(prev, next) {\n    if (null == prev || null == next || (typeof prev === 'undefined' ? 'undefined' : _typeof(prev)) !== 'object' || (typeof next === 'undefined' ? 'undefined' : _typeof(next)) !== 'object') {\n        return prev !== next;\n    }\n    var keys = Object.keys(prev);\n    if (keys.length !== Object.keys(next).length) {\n        return true;\n    }\n    var key = void 0;\n    for (var i = keys.length - 1; key = keys[i]; i--) {\n        if (next[key] !== prev[key]) {\n            return true;\n        }\n    }\n    return false;\n}\n\n/**\n * ReactiveMixin\n */\nvar reactiveMixin = {\n    componentWillMount: function componentWillMount() {\n        var _this = this;\n\n        if (isUsingStaticRendering === true) {\n            return;\n        }\n        // Generate friendly name for debugging\n        var initialName = makeDisplayName(this);\n\n        /**\n         * If props are shallowly modified, react will render anyway,\n         * so atom.reportChanged() should not result in yet another re-render\n         */\n        var skipRender = false;\n        /**\n         * forceUpdate will re-assign this.props. We don't want that to cause a loop,\n         * so detect these changes\n         */\n        var isForcingUpdate = false;\n\n        function makePropertyObservableReference(propName) {\n            var valueHolder = this[propName];\n            var atom = createAtom('reactive ' + propName);\n            Object.defineProperty(this, propName, {\n                configurable: true,\n                enumerable: true,\n                get: function get$$1() {\n                    atom.reportObserved();\n                    return valueHolder;\n                },\n                set: function set$$1(v) {\n                    if (!isForcingUpdate && isObjectShallowModified(valueHolder, v)) {\n                        valueHolder = v;\n                        skipRender = true;\n                        atom.reportChanged();\n                        skipRender = false;\n                    } else {\n                        valueHolder = v;\n                    }\n                }\n            });\n        }\n\n        // make this.props an observable reference, see #124\n        makePropertyObservableReference.call(this, 'props');\n        // make state an observable reference\n        makePropertyObservableReference.call(this, 'state');\n\n        // wire up reactive render\n        var baseRender = this.render.bind(this);\n        var reaction = null;\n        var isRenderingPending = false;\n\n        var initialRender = function initialRender() {\n            reaction = new Reaction(initialName + '.render()', function () {\n                if (!isRenderingPending) {\n                    // N.B. Getting here *before mounting* means that a component constructor has side effects (see the relevant test in misc.js)\n                    // This unidiomatic React usage but React will correctly warn about this so we continue as usual\n                    // See #85 / Pull #44\n                    isRenderingPending = true;\n                    if (typeof _this.componentWillReact === 'function') {\n                        _this.componentWillReact();\n                    } // TODO: wrap in action?\n                    if (_this.__$mobxIsUnmounted !== true) {\n                        // If we are unmounted at this point, componentWillReact() had a side effect causing the component to unmounted\n                        // TODO: remove this check? Then react will properly warn about the fact that this should not happen? See #73\n                        // However, people also claim this migth happen during unit tests..\n                        var hasError = true;\n                        try {\n                            isForcingUpdate = true;\n                            if (!skipRender) {\n                                Component.prototype.forceUpdate.call(_this);\n                            }\n                            hasError = false;\n                        } finally {\n                            isForcingUpdate = false;\n                            if (hasError) {\n                                reaction.dispose();\n                            }\n                        }\n                    }\n                }\n            });\n            reaction.reactComponent = _this;\n            reactiveRender.$mobx = reaction;\n            _this.render = reactiveRender;\n            return reactiveRender(_this.props, _this.state, _this.context);\n        };\n\n        var reactiveRender = function reactiveRender(props, state, context) {\n            isRenderingPending = false;\n            var exception = undefined;\n            var rendering = undefined;\n            reaction.track(function () {\n                try {\n                    rendering = allowStateChanges(false, baseRender, props, state, context);\n                } catch (e) {\n                    exception = e;\n                }\n            });\n            if (exception) {\n                throw exception;\n            }\n            return rendering;\n        };\n\n        this.render = initialRender;\n    },\n\n    componentWillUnmount: function componentWillUnmount() {\n        if (isUsingStaticRendering === true) {\n            return;\n        }\n        this.render.$mobx && this.render.$mobx.dispose();\n        this.__$mobxIsUnmounted = true;\n    },\n\n    componentDidMount: function componentDidMount() {},\n\n    componentDidUpdate: function componentDidUpdate() {},\n\n    shouldComponentUpdate: function shouldComponentUpdate(nextProps, nextState) {\n        if (isUsingStaticRendering) {\n            logger.warn('[mobx-preact] It seems that a re-rendering of a React component is triggered while in static (server-side) mode. Please make sure components are rendered only once server-side.');\n        }\n        // update on any state changes (as is the default)\n        if (this.state !== nextState) {\n            return true;\n        }\n        // update if props are shallowly not equal, inspired by PureRenderMixin\n        // we could return just 'false' here, and avoid the `skipRender` checks etc\n        // however, it is nicer if lifecycle events are triggered like usually,\n        // so we return true here if props are shallowly modified.\n        return isObjectShallowModified(this.props, nextProps);\n    }\n};\n\n/**\n * Observer function / decorator\n */\nfunction observer(componentClass) {\n    if (arguments.length > 1) {\n        logger.warn('Mobx observer: Using observer to inject stores is not supported. Use `@connect([\"store1\", \"store2\"]) ComponentClass instead or preferably, use `@inject(\"store1\", \"store2\") @observer ComponentClass` or `inject(\"store1\", \"store2\")(observer(componentClass))``');\n    }\n\n    if (componentClass.isMobxInjector === true) {\n        logger.warn('Mobx observer: You are trying to use \\'observer\\' on a component that already has \\'inject\\'. Please apply \\'observer\\' before applying \\'inject\\'');\n    }\n\n    // Stateless function component:\n    if (isStateless(componentClass)) {\n        var _class, _temp;\n\n        return observer((_temp = _class = function (_Component) {\n            inherits(_class, _Component);\n\n            function _class() {\n                classCallCheck(this, _class);\n                return possibleConstructorReturn(this, (_class.__proto__ || Object.getPrototypeOf(_class)).apply(this, arguments));\n            }\n\n            createClass(_class, [{\n                key: 'render',\n                value: function render() {\n                    return componentClass.call(this, this.props, this.context);\n                }\n            }]);\n            return _class;\n        }(Component), _class.displayName = makeDisplayName(componentClass), _temp));\n    }\n\n    if (!componentClass) {\n        throw new Error('Please pass a valid component to \\'observer\\'');\n    }\n\n    var target = componentClass.prototype || componentClass;\n    mixinLifecycleEvents(target);\n    componentClass.isMobXReactObserver = true;\n    return componentClass;\n}\n\nfunction mixinLifecycleEvents(target) {\n    patch(target, 'componentWillMount', true);\n    patch(target, 'componentDidMount');\n\n    if (!target.shouldComponentUpdate) {\n        target.shouldComponentUpdate = reactiveMixin.shouldComponentUpdate;\n    }\n}\n\nvar Observer = observer(function (_ref) {\n    var children = _ref.children;\n    return children[0]();\n});\n\nObserver.displayName = 'Observer';\n\nvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar hoistNonReactStatics = createCommonjsModule(function (module, exports) {\n/**\n * Copyright 2015, Yahoo! Inc.\n * Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.\n */\n(function (global, factory) {\n    module.exports = factory();\n}(commonjsGlobal, (function () {\n    \n    var REACT_STATICS = {\n        childContextTypes: true,\n        contextTypes: true,\n        defaultProps: true,\n        displayName: true,\n        getDefaultProps: true,\n        getDerivedStateFromProps: true,\n        mixins: true,\n        propTypes: true,\n        type: true\n    };\n    \n    var KNOWN_STATICS = {\n        name: true,\n        length: true,\n        prototype: true,\n        caller: true,\n        callee: true,\n        arguments: true,\n        arity: true\n    };\n    \n    var defineProperty = Object.defineProperty;\n    var getOwnPropertyNames = Object.getOwnPropertyNames;\n    var getOwnPropertySymbols = Object.getOwnPropertySymbols;\n    var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n    var getPrototypeOf = Object.getPrototypeOf;\n    var objectPrototype = getPrototypeOf && getPrototypeOf(Object);\n    \n    return function hoistNonReactStatics(targetComponent, sourceComponent, blacklist) {\n        if (typeof sourceComponent !== 'string') { // don't hoist over string (html) components\n            \n            if (objectPrototype) {\n                var inheritedComponent = getPrototypeOf(sourceComponent);\n                if (inheritedComponent && inheritedComponent !== objectPrototype) {\n                    hoistNonReactStatics(targetComponent, inheritedComponent, blacklist);\n                }\n            }\n            \n            var keys = getOwnPropertyNames(sourceComponent);\n            \n            if (getOwnPropertySymbols) {\n                keys = keys.concat(getOwnPropertySymbols(sourceComponent));\n            }\n            \n            for (var i = 0; i < keys.length; ++i) {\n                var key = keys[i];\n                if (!REACT_STATICS[key] && !KNOWN_STATICS[key] && (!blacklist || !blacklist[key])) {\n                    var descriptor = getOwnPropertyDescriptor(sourceComponent, key);\n                    try { // Avoid failures from read-only properties\n                        defineProperty(targetComponent, key, descriptor);\n                    } catch (e) {}\n                }\n            }\n            \n            return targetComponent;\n        }\n        \n        return targetComponent;\n    };\n})));\n});\n\nvar proxiedInjectorProps = {\n    isMobxInjector: {\n        value: true,\n        writable: true,\n        configurable: true,\n        enumerable: true\n    }\n};\n\n/**\n * Store Injection\n */\nfunction createStoreInjector(grabStoresFn, component, injectNames) {\n    var _class, _temp;\n\n    var prefix = 'inject-';\n    var suffix = injectNames ? '-with-' + injectNames : '';\n    var displayName = makeDisplayName(component, { prefix: prefix, suffix: suffix });\n\n    var Injector = (_temp = _class = function (_Component) {\n        inherits(Injector, _Component);\n\n        function Injector() {\n            classCallCheck(this, Injector);\n            return possibleConstructorReturn(this, (Injector.__proto__ || Object.getPrototypeOf(Injector)).apply(this, arguments));\n        }\n\n        createClass(Injector, [{\n            key: 'render',\n            value: function render() {\n                // Optimization: it might be more efficient to apply the mapper function *outside* the render method\n                // (if the mapper is a function), that could avoid expensive(?) re-rendering of the injector component\n                // See this test: 'using a custom injector is not too reactive' in inject.js\n                var newProps = {};\n                for (var key in this.props) {\n                    if (this.props.hasOwnProperty(key)) {\n                        newProps[key] = this.props[key];\n                    }\n                }\n                var additionalProps = grabStoresFn(this.context.mobxStores || {}, newProps, this.context) || {};\n                for (var _key in additionalProps) {\n                    newProps[_key] = additionalProps[_key];\n                }\n\n                return h(component, newProps);\n            }\n        }]);\n        return Injector;\n    }(Component), _class.displayName = displayName, _temp);\n\n    // Static fields from component should be visible on the generated Injector\n\n    hoistNonReactStatics(Injector, component);\n\n    Injector.wrappedComponent = component;\n    Object.defineProperties(Injector, proxiedInjectorProps);\n\n    return Injector;\n}\n\nfunction grabStoresByName(storeNames) {\n    return function (baseStores, nextProps) {\n        storeNames.forEach(function (storeName) {\n            // prefer props over stores\n            if (storeName in nextProps) {\n                return;\n            }\n            if (!(storeName in baseStores)) {\n                throw new Error('MobX injector: Store \\'' + storeName + '\\' is not available! Make sure it is provided by some Provider');\n            }\n            nextProps[storeName] = baseStores[storeName];\n        });\n        return nextProps;\n    };\n}\n\n/**\n * higher order component that injects stores to a child.\n * takes either a varargs list of strings, which are stores read from the context,\n * or a function that manually maps the available stores from the context to props:\n * storesToProps(mobxStores, props, context) => newProps\n */\nfunction inject() /* fn(stores, nextProps) or ...storeNames */{\n    var grabStoresFn = void 0;\n    if (typeof arguments[0] === 'function') {\n        grabStoresFn = arguments[0];\n        return function (componentClass) {\n            var injected = createStoreInjector(grabStoresFn, componentClass);\n            injected.isMobxInjector = false; // suppress warning\n            // mark the Injector as observer, to make it react to expressions in `grabStoresFn`,\n            // see #111\n            injected = observer(injected);\n            injected.isMobxInjector = true; // restore warning\n            return injected;\n        };\n    } else {\n        var storeNames = [];\n        for (var i = 0; i < arguments.length; i++) {\n            storeNames[i] = arguments[i];\n        }\n        grabStoresFn = grabStoresByName(storeNames);\n        return function (componentClass) {\n            return createStoreInjector(grabStoresFn, componentClass, storeNames.join('-'));\n        };\n    }\n}\n\nfunction connect(arg1, arg2) {\n    if (typeof arg1 === 'string') {\n        throw new Error('Store names should be provided as array');\n    }\n    if (Array.isArray(arg1)) {\n        if (!arg2) {\n            // invoked as decorator\n            return function (componentClass) {\n                return connect(arg1, componentClass);\n            };\n        } else {\n            return inject.apply(null, arg1)(connect(arg2));\n        }\n    }\n    return observer(arg1);\n}\n\nvar specialReactKeys = { children: true, key: true, ref: true };\n\nvar logger$1 = console; // eslint-disable-line no-console\n\nvar Provider = function (_Component) {\n    inherits(Provider, _Component);\n\n    function Provider() {\n        classCallCheck(this, Provider);\n        return possibleConstructorReturn(this, (Provider.__proto__ || Object.getPrototypeOf(Provider)).apply(this, arguments));\n    }\n\n    createClass(Provider, [{\n        key: 'render',\n        value: function render(_ref) {\n            var children = _ref.children;\n\n            return children.length > 1 ? h(\n                'div',\n                null,\n                ' ',\n                children,\n                ' '\n            ) : children[0];\n        }\n    }, {\n        key: 'getChildContext',\n        value: function getChildContext() {\n            var stores = {};\n            // inherit stores\n            var baseStores = this.context.mobxStores;\n            if (baseStores) {\n                for (var key in baseStores) {\n                    stores[key] = baseStores[key];\n                }\n            }\n            // add own stores\n            for (var _key in this.props) {\n                if (!specialReactKeys[_key] && _key !== 'suppressChangedStoreWarning') {\n                    stores[_key] = this.props[_key];\n                }\n            }\n\n            return {\n                mobxStores: stores\n            };\n        }\n    }, {\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(nextProps) {\n            // Maybe this warning is too aggressive?\n            if (Object.keys(nextProps).length !== Object.keys(this.props).length) {\n                logger$1.warn('MobX Provider: The set of provided stores has changed. Please avoid changing stores as the change might not propagate to all children');\n            }\n            if (!nextProps.suppressChangedStoreWarning) {\n                for (var key in nextProps) {\n                    if (!specialReactKeys[key] && this.props[key] !== nextProps[key]) {\n                        logger$1.warn('MobX Provider: Provided store \\'' + key + '\\' has changed. Please avoid replacing stores as the change might not propagate to all children');\n                    }\n                }\n            }\n        }\n    }]);\n    return Provider;\n}(Component);\n\nif (!Component) {\n    throw new Error('mobx-preact requires Preact to be available');\n}\n\nexport { observer, Observer, useStaticRendering, connect, inject, Provider };\n","import{options as n}from\"preact\";var t,r,u,i,o=0,f=[],c=n,e=c.__b,a=c.__r,v=c.diffed,l=c.__c,m=c.unmount,s=c.__;function p(n,t){c.__h&&c.__h(r,n,o||t),o=0;var u=r.__H||(r.__H={__:[],__h:[]});return n>=u.__.length&&u.__.push({}),u.__[n]}function d(n){return o=1,h(D,n)}function h(n,u,i){var o=p(t++,2);if(o.t=n,!o.__c&&(o.__=[i?i(u):D(void 0,u),function(n){var t=o.__N?o.__N[0]:o.__[0],r=o.t(t,n);t!==r&&(o.__N=[r,o.__[1]],o.__c.setState({}))}],o.__c=r,!r.__f)){var f=function(n,t,r){if(!o.__c.__H)return!0;var u=o.__c.__H.__.filter(function(n){return!!n.__c});if(u.every(function(n){return!n.__N}))return!c||c.call(this,n,t,r);var i=o.__c.props!==n;return u.forEach(function(n){if(n.__N){var t=n.__[0];n.__=n.__N,n.__N=void 0,t!==n.__[0]&&(i=!0)}}),c&&c.call(this,n,t,r)||i};r.__f=!0;var c=r.shouldComponentUpdate,e=r.componentWillUpdate;r.componentWillUpdate=function(n,t,r){if(this.__e){var u=c;c=void 0,f(n,t,r),c=u}e&&e.call(this,n,t,r)},r.shouldComponentUpdate=f}return o.__N||o.__}function y(n,u){var i=p(t++,3);!c.__s&&C(i.__H,u)&&(i.__=n,i.u=u,r.__H.__h.push(i))}function _(n,u){var i=p(t++,4);!c.__s&&C(i.__H,u)&&(i.__=n,i.u=u,r.__h.push(i))}function A(n){return o=5,T(function(){return{current:n}},[])}function F(n,t,r){o=6,_(function(){if(\"function\"==typeof n){var r=n(t());return function(){n(null),r&&\"function\"==typeof r&&r()}}if(n)return n.current=t(),function(){return n.current=null}},null==r?r:r.concat(n))}function T(n,r){var u=p(t++,7);return C(u.__H,r)&&(u.__=n(),u.__H=r,u.__h=n),u.__}function q(n,t){return o=8,T(function(){return n},t)}function x(n){var u=r.context[n.__c],i=p(t++,9);return i.c=n,u?(null==i.__&&(i.__=!0,u.sub(r)),u.props.value):n.__}function P(n,t){c.useDebugValue&&c.useDebugValue(t?t(n):n)}function b(n){var u=p(t++,10),i=d();return u.__=n,r.componentDidCatch||(r.componentDidCatch=function(n,t){u.__&&u.__(n,t),i[1](n)}),[i[0],function(){i[1](void 0)}]}function g(){var n=p(t++,11);if(!n.__){for(var u=r.__v;null!==u&&!u.__m&&null!==u.__;)u=u.__;var i=u.__m||(u.__m=[0,0]);n.__=\"P\"+i[0]+\"-\"+i[1]++}return n.__}function j(){for(var n;n=f.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(z),n.__H.__h.forEach(B),n.__H.__h=[]}catch(t){n.__H.__h=[],c.__e(t,n.__v)}}c.__b=function(n){r=null,e&&e(n)},c.__=function(n,t){n&&t.__k&&t.__k.__m&&(n.__m=t.__k.__m),s&&s(n,t)},c.__r=function(n){a&&a(n),t=0;var i=(r=n.__c).__H;i&&(u===r?(i.__h=[],r.__h=[],i.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(i.__h.forEach(z),i.__h.forEach(B),i.__h=[],t=0)),u=r},c.diffed=function(n){v&&v(n);var t=n.__c;t&&t.__H&&(t.__H.__h.length&&(1!==f.push(t)&&i===c.requestAnimationFrame||((i=c.requestAnimationFrame)||w)(j)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),u=r=null},c.__c=function(n,t){t.some(function(n){try{n.__h.forEach(z),n.__h=n.__h.filter(function(n){return!n.__||B(n)})}catch(r){t.some(function(n){n.__h&&(n.__h=[])}),t=[],c.__e(r,n.__v)}}),l&&l(n,t)},c.unmount=function(n){m&&m(n);var t,r=n.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{z(n)}catch(n){t=n}}),r.__H=void 0,t&&c.__e(t,r.__v))};var k=\"function\"==typeof requestAnimationFrame;function w(n){var t,r=function(){clearTimeout(u),k&&cancelAnimationFrame(t),setTimeout(n)},u=setTimeout(r,35);k&&(t=requestAnimationFrame(r))}function z(n){var t=r,u=n.__c;\"function\"==typeof u&&(n.__c=void 0,u()),r=t}function B(n){var t=r;n.__c=n.__(),r=t}function C(n,t){return!n||n.length!==t.length||t.some(function(t,r){return t!==n[r]})}function D(n,t){return\"function\"==typeof t?t(n):t}export{q as useCallback,x as useContext,P as useDebugValue,y as useEffect,b as useErrorBoundary,g as useId,F as useImperativeHandle,_ as useLayoutEffect,T as useMemo,h as useReducer,A as useRef,d as useState};\n//# sourceMappingURL=hooks.module.js.map\n","import{Component as n,createElement as t,options as e,toChildArray as r,Fragment as u,render as o,hydrate as i,createContext as l,createRef as c,cloneElement as f}from\"preact\";export{Component,Fragment,createContext,createElement,createRef}from\"preact\";import{useState as a,useLayoutEffect as s,useEffect as h,useCallback as v,useContext as d,useDebugValue as m,useId as p,useImperativeHandle as y,useMemo as _,useReducer as b,useRef as S}from\"preact/hooks\";export*from\"preact/hooks\";function g(n,t){for(var e in t)n[e]=t[e];return n}function E(n,t){for(var e in n)if(\"__source\"!==e&&!(e in t))return!0;for(var r in t)if(\"__source\"!==r&&n[r]!==t[r])return!0;return!1}function C(n,t){var e=t(),r=a({t:{__:e,u:t}}),u=r[0].t,o=r[1];return s(function(){u.__=e,u.u=t,x(u)&&o({t:u})},[n,e,t]),h(function(){return x(u)&&o({t:u}),n(function(){x(u)&&o({t:u})})},[n]),e}function x(n){var t,e,r=n.u,u=n.__;try{var o=r();return!((t=u)===(e=o)&&(0!==t||1/t==1/e)||t!=t&&e!=e)}catch(n){return!0}}function R(n){n()}function w(n){return n}function k(){return[!1,R]}var I=s;function N(n,t){this.props=n,this.context=t}function M(n,e){function r(n){var t=this.props.ref,r=t==n.ref;return!r&&t&&(t.call?t(null):t.current=null),e?!e(this.props,n)||!r:E(this.props,n)}function u(e){return this.shouldComponentUpdate=r,t(n,e)}return u.displayName=\"Memo(\"+(n.displayName||n.name)+\")\",u.prototype.isReactComponent=!0,u.__f=!0,u.type=n,u}(N.prototype=new n).isPureReactComponent=!0,N.prototype.shouldComponentUpdate=function(n,t){return E(this.props,n)||E(this.state,t)};var T=e.__b;e.__b=function(n){n.type&&n.type.__f&&n.ref&&(n.props.ref=n.ref,n.ref=null),T&&T(n)};var A=\"undefined\"!=typeof Symbol&&Symbol.for&&Symbol.for(\"react.forward_ref\")||3911;function D(n){function t(t){var e=g({},t);return delete e.ref,n(e,t.ref||null)}return t.$$typeof=A,t.render=n,t.prototype.isReactComponent=t.__f=!0,t.displayName=\"ForwardRef(\"+(n.displayName||n.name)+\")\",t}var L=function(n,t){return null==n?null:r(r(n).map(t))},O={map:L,forEach:L,count:function(n){return n?r(n).length:0},only:function(n){var t=r(n);if(1!==t.length)throw\"Children.only\";return t[0]},toArray:r},F=e.__e;e.__e=function(n,t,e,r){if(n.then)for(var u,o=t;o=o.__;)if((u=o.__c)&&u.__c)return null==t.__e&&(t.__e=e.__e,t.__k=e.__k),u.__c(n,t);F(n,t,e,r)};var U=e.unmount;function V(n,t,e){return n&&(n.__c&&n.__c.__H&&(n.__c.__H.__.forEach(function(n){\"function\"==typeof n.__c&&n.__c()}),n.__c.__H=null),null!=(n=g({},n)).__c&&(n.__c.__P===e&&(n.__c.__P=t),n.__c.__e=!0,n.__c=null),n.__k=n.__k&&n.__k.map(function(n){return V(n,t,e)})),n}function W(n,t,e){return n&&e&&(n.__v=null,n.__k=n.__k&&n.__k.map(function(n){return W(n,t,e)}),n.__c&&n.__c.__P===t&&(n.__e&&e.appendChild(n.__e),n.__c.__e=!0,n.__c.__P=e)),n}function P(){this.__u=0,this.o=null,this.__b=null}function j(n){var t=n.__.__c;return t&&t.__a&&t.__a(n)}function z(n){var e,r,u,o=null;function i(i){if(e||(e=n()).then(function(n){n&&(o=n.default||n),u=!0},function(n){r=n,u=!0}),r)throw r;if(!u)throw e;return o?t(o,i):null}return i.displayName=\"Lazy\",i.__f=!0,i}function B(){this.i=null,this.l=null}e.unmount=function(n){var t=n.__c;t&&t.__R&&t.__R(),t&&32&n.__u&&(n.type=null),U&&U(n)},(P.prototype=new n).__c=function(n,t){var e=t.__c,r=this;null==r.o&&(r.o=[]),r.o.push(e);var u=j(r.__v),o=!1,i=function(){o||(o=!0,e.__R=null,u?u(l):l())};e.__R=i;var l=function(){if(!--r.__u){if(r.state.__a){var n=r.state.__a;r.__v.__k[0]=W(n,n.__c.__P,n.__c.__O)}var t;for(r.setState({__a:r.__b=null});t=r.o.pop();)t.forceUpdate()}};r.__u++||32&t.__u||r.setState({__a:r.__b=r.__v.__k[0]}),n.then(i,i)},P.prototype.componentWillUnmount=function(){this.o=[]},P.prototype.render=function(n,e){if(this.__b){if(this.__v.__k){var r=document.createElement(\"div\"),o=this.__v.__k[0].__c;this.__v.__k[0]=V(this.__b,r,o.__O=o.__P)}this.__b=null}var i=e.__a&&t(u,null,n.fallback);return i&&(i.__u&=-33),[t(u,null,e.__a?null:n.children),i]};var H=function(n,t,e){if(++e[1]===e[0]&&n.l.delete(t),n.props.revealOrder&&(\"t\"!==n.props.revealOrder[0]||!n.l.size))for(e=n.i;e;){for(;e.length>3;)e.pop()();if(e[1]<e[0])break;n.i=e=e[2]}};function Z(n){return this.getChildContext=function(){return n.context},n.children}function Y(n){var e=this,r=n.h;if(e.componentWillUnmount=function(){o(null,e.v),e.v=null,e.h=null},e.h&&e.h!==r&&e.componentWillUnmount(),!e.v){for(var u=e.__v;null!==u&&!u.__m&&null!==u.__;)u=u.__;e.h=r,e.v={nodeType:1,parentNode:r,childNodes:[],__k:{__m:u.__m},contains:function(){return!0},insertBefore:function(n,t){this.childNodes.push(n),e.h.insertBefore(n,t)},removeChild:function(n){this.childNodes.splice(this.childNodes.indexOf(n)>>>1,1),e.h.removeChild(n)}}}o(t(Z,{context:e.context},n.__v),e.v)}function $(n,e){var r=t(Y,{__v:n,h:e});return r.containerInfo=e,r}(B.prototype=new n).__a=function(n){var t=this,e=j(t.__v),r=t.l.get(n);return r[0]++,function(u){var o=function(){t.props.revealOrder?(r.push(u),H(t,n,r)):u()};e?e(o):o()}},B.prototype.render=function(n){this.i=null,this.l=new Map;var t=r(n.children);n.revealOrder&&\"b\"===n.revealOrder[0]&&t.reverse();for(var e=t.length;e--;)this.l.set(t[e],this.i=[1,0,this.i]);return n.children},B.prototype.componentDidUpdate=B.prototype.componentDidMount=function(){var n=this;this.l.forEach(function(t,e){H(n,e,t)})};var q=\"undefined\"!=typeof Symbol&&Symbol.for&&Symbol.for(\"react.element\")||60103,G=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,J=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,K=/[A-Z0-9]/g,Q=\"undefined\"!=typeof document,X=function(n){return(\"undefined\"!=typeof Symbol&&\"symbol\"==typeof Symbol()?/fil|che|rad/:/fil|che|ra/).test(n)};function nn(n,t,e){return null==t.__k&&(t.textContent=\"\"),o(n,t),\"function\"==typeof e&&e(),n?n.__c:null}function tn(n,t,e){return i(n,t),\"function\"==typeof e&&e(),n?n.__c:null}n.prototype.isReactComponent={},[\"componentWillMount\",\"componentWillReceiveProps\",\"componentWillUpdate\"].forEach(function(t){Object.defineProperty(n.prototype,t,{configurable:!0,get:function(){return this[\"UNSAFE_\"+t]},set:function(n){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:n})}})});var en=e.event;function rn(){}function un(){return this.cancelBubble}function on(){return this.defaultPrevented}e.event=function(n){return en&&(n=en(n)),n.persist=rn,n.isPropagationStopped=un,n.isDefaultPrevented=on,n.nativeEvent=n};var ln,cn={enumerable:!1,configurable:!0,get:function(){return this.class}},fn=e.vnode;e.vnode=function(n){\"string\"==typeof n.type&&function(n){var t=n.props,e=n.type,u={},o=-1===e.indexOf(\"-\");for(var i in t){var l=t[i];if(!(\"value\"===i&&\"defaultValue\"in t&&null==l||Q&&\"children\"===i&&\"noscript\"===e||\"class\"===i||\"className\"===i)){var c=i.toLowerCase();\"defaultValue\"===i&&\"value\"in t&&null==t.value?i=\"value\":\"download\"===i&&!0===l?l=\"\":\"translate\"===c&&\"no\"===l?l=!1:\"o\"===c[0]&&\"n\"===c[1]?\"ondoubleclick\"===c?i=\"ondblclick\":\"onchange\"!==c||\"input\"!==e&&\"textarea\"!==e||X(t.type)?\"onfocus\"===c?i=\"onfocusin\":\"onblur\"===c?i=\"onfocusout\":J.test(i)&&(i=c):c=i=\"oninput\":o&&G.test(i)?i=i.replace(K,\"-$&\").toLowerCase():null===l&&(l=void 0),\"oninput\"===c&&u[i=c]&&(i=\"oninputCapture\"),u[i]=l}}\"select\"==e&&u.multiple&&Array.isArray(u.value)&&(u.value=r(t.children).forEach(function(n){n.props.selected=-1!=u.value.indexOf(n.props.value)})),\"select\"==e&&null!=u.defaultValue&&(u.value=r(t.children).forEach(function(n){n.props.selected=u.multiple?-1!=u.defaultValue.indexOf(n.props.value):u.defaultValue==n.props.value})),t.class&&!t.className?(u.class=t.class,Object.defineProperty(u,\"className\",cn)):(t.className&&!t.class||t.class&&t.className)&&(u.class=u.className=t.className),n.props=u}(n),n.$$typeof=q,fn&&fn(n)};var an=e.__r;e.__r=function(n){an&&an(n),ln=n.__c};var sn=e.diffed;e.diffed=function(n){sn&&sn(n);var t=n.props,e=n.__e;null!=e&&\"textarea\"===n.type&&\"value\"in t&&t.value!==e.value&&(e.value=null==t.value?\"\":t.value),ln=null};var hn={ReactCurrentDispatcher:{current:{readContext:function(n){return ln.__n[n.__c].props.value},useCallback:v,useContext:d,useDebugValue:m,useDeferredValue:w,useEffect:h,useId:p,useImperativeHandle:y,useInsertionEffect:I,useLayoutEffect:s,useMemo:_,useReducer:b,useRef:S,useState:a,useSyncExternalStore:C,useTransition:k}}},vn=\"18.3.1\";function dn(n){return t.bind(null,n)}function mn(n){return!!n&&n.$$typeof===q}function pn(n){return mn(n)&&n.type===u}function yn(n){return!!n&&!!n.displayName&&(\"string\"==typeof n.displayName||n.displayName instanceof String)&&n.displayName.startsWith(\"Memo(\")}function _n(n){return mn(n)?f.apply(null,arguments):n}function bn(n){return!!n.__k&&(o(null,n),!0)}function Sn(n){return n&&(n.base||1===n.nodeType&&n)||null}var gn=function(n,t){return n(t)},En=function(n,t){return n(t)},Cn=u,xn=mn,Rn={useState:a,useId:p,useReducer:b,useEffect:h,useLayoutEffect:s,useInsertionEffect:I,useTransition:k,useDeferredValue:w,useSyncExternalStore:C,startTransition:R,useRef:S,useImperativeHandle:y,useMemo:_,useCallback:v,useContext:d,useDebugValue:m,version:\"18.3.1\",Children:O,render:nn,hydrate:tn,unmountComponentAtNode:bn,createPortal:$,createElement:t,createContext:l,createFactory:dn,cloneElement:_n,createRef:c,Fragment:u,isValidElement:mn,isElement:xn,isFragment:pn,isMemo:yn,findDOMNode:Sn,Component:n,PureComponent:N,memo:M,forwardRef:D,flushSync:En,unstable_batchedUpdates:gn,StrictMode:Cn,Suspense:P,SuspenseList:B,lazy:z,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:hn};export{O as Children,N as PureComponent,Cn as StrictMode,P as Suspense,B as SuspenseList,hn as __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_n as cloneElement,dn as createFactory,$ as createPortal,Rn as default,Sn as findDOMNode,En as flushSync,D as forwardRef,tn as hydrate,xn as isElement,pn as isFragment,yn as isMemo,mn as isValidElement,z as lazy,M as memo,nn as render,R as startTransition,bn as unmountComponentAtNode,gn as unstable_batchedUpdates,w as useDeferredValue,I as useInsertionEffect,C as useSyncExternalStore,k as useTransition,vn as version};\n//# sourceMappingURL=compat.module.js.map\n","import{options as r,Fragment as e}from\"preact\";export{Fragment}from\"preact\";var t=/[\"&<]/;function n(r){if(0===r.length||!1===t.test(r))return r;for(var e=0,n=0,o=\"\",f=\"\";n<r.length;n++){switch(r.charCodeAt(n)){case 34:f=\"&quot;\";break;case 38:f=\"&amp;\";break;case 60:f=\"&lt;\";break;default:continue}n!==e&&(o+=r.slice(e,n)),o+=f,e=n+1}return n!==e&&(o+=r.slice(e,n)),o}var o=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,f=0,i=Array.isArray;function u(e,t,n,o,i,u){t||(t={});var a,c,p=t;if(\"ref\"in p)for(c in p={},t)\"ref\"==c?a=t[c]:p[c]=t[c];var l={type:e,props:p,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--f,__i:-1,__u:0,__source:i,__self:u};if(\"function\"==typeof e&&(a=e.defaultProps))for(c in a)void 0===p[c]&&(p[c]=a[c]);return r.vnode&&r.vnode(l),l}function a(r){var t=u(e,{tpl:r,exprs:[].slice.call(arguments,1)});return t.key=t.__v,t}var c={},p=/[A-Z]/g;function l(e,t){if(r.attr){var f=r.attr(e,t);if(\"string\"==typeof f)return f}if(t=function(r){return null!==r&&\"object\"==typeof r&&\"function\"==typeof r.valueOf?r.valueOf():r}(t),\"ref\"===e||\"key\"===e)return\"\";if(\"style\"===e&&\"object\"==typeof t){var i=\"\";for(var u in t){var a=t[u];if(null!=a&&\"\"!==a){var l=\"-\"==u[0]?u:c[u]||(c[u]=u.replace(p,\"-$&\").toLowerCase()),s=\";\";\"number\"!=typeof a||l.startsWith(\"--\")||o.test(l)||(s=\"px;\"),i=i+l+\":\"+a+s}}return e+'=\"'+n(i)+'\"'}return null==t||!1===t||\"function\"==typeof t||\"object\"==typeof t?\"\":!0===t?e:e+'=\"'+n(\"\"+t)+'\"'}function s(r){if(null==r||\"boolean\"==typeof r||\"function\"==typeof r)return null;if(\"object\"==typeof r){if(void 0===r.constructor)return r;if(i(r)){for(var e=0;e<r.length;e++)r[e]=s(r[e]);return r}}return n(\"\"+r)}export{u as jsx,l as jsxAttr,u as jsxDEV,s as jsxEscape,a as jsxTemplate,u as jsxs};\n//# sourceMappingURL=jsxRuntime.module.js.map\n","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { assign } from 'lodash-es';\nexport var Options;\n(function (Options) {\n    function get(options) {\n        var others = __rest(options, []);\n        var container = options.container;\n        if (!container) {\n            throw new Error('Ensure the container of LogicFlow is specified and valid.');\n        }\n        return assign({}, Options.defaults, others);\n    }\n    Options.get = get;\n})(Options || (Options = {}));\n(function (Options) {\n    Options.defaults = {\n        background: false,\n        grid: false,\n        textEdit: true,\n        snapline: true,\n        outline: false,\n        disabledTools: [],\n    };\n})(Options || (Options = {}));\n","import { cloneDeep, merge } from 'lodash-es';\nexport var defaultAnimationOffConfig = {\n    node: false,\n    edge: false,\n};\nexport var defaultAnimationOnConfig = {\n    node: true,\n    edge: true,\n};\nexport var setupAnimation = function (config) {\n    if (!config || typeof config === 'boolean') {\n        return config === true\n            ? cloneDeep(defaultAnimationOnConfig)\n            : cloneDeep(defaultAnimationOffConfig);\n    }\n    // \n    return merge(cloneDeep(defaultAnimationOffConfig), config);\n};\nexport var updateAnimation = setupAnimation;\n","import { get } from 'lodash-es';\nexport var isIe = function () {\n    return get(window, 'navigator.userAgent', '').match(/MSIE|Trident/) !== null;\n};\n","// import { cloneDeep } from 'lodash-es'\n/**\n * \n *\n * Vue  data  Observe\n */\nexport function formatData(data) {\n    try {\n        // WARNING: cloneDeepObserveplainJSON.parseundefined\n        // pickpick\n        return JSON.parse(JSON.stringify(data));\n    }\n    catch (_a) {\n        return data;\n    }\n}\n","export var DEFAULT_VISIBLE_SPACE = 200;\nexport var ELEMENT_MAX_Z_INDEX = 9999;\nexport var DEFAULT_GRID_SIZE = 10;\nexport var ElementState;\n(function (ElementState) {\n    ElementState[ElementState[\"DEFAULT\"] = 1] = \"DEFAULT\";\n    ElementState[ElementState[\"TEXT_EDIT\"] = 2] = \"TEXT_EDIT\";\n    ElementState[ElementState[\"SHOW_MENU\"] = 3] = \"SHOW_MENU\";\n    ElementState[ElementState[\"ALLOW_CONNECT\"] = 4] = \"ALLOW_CONNECT\";\n    ElementState[ElementState[\"NOT_ALLOW_CONNECT\"] = 5] = \"NOT_ALLOW_CONNECT\";\n})(ElementState || (ElementState = {}));\nexport var ElementType;\n(function (ElementType) {\n    ElementType[\"NODE\"] = \"node\";\n    ElementType[\"EDGE\"] = \"edge\";\n    ElementType[\"GRAPH\"] = \"graph\";\n})(ElementType || (ElementType = {}));\nexport var ModelType;\n(function (ModelType) {\n    ModelType[\"NODE\"] = \"node\";\n    ModelType[\"CIRCLE_NODE\"] = \"circle-node\";\n    ModelType[\"POLYGON_NODE\"] = \"polygon-node\";\n    ModelType[\"RECT_NODE\"] = \"rect-node\";\n    ModelType[\"TEXT_NODE\"] = \"text-node\";\n    ModelType[\"ELLIPSE_NODE\"] = \"ellipse-node\";\n    ModelType[\"DIAMOND_NODE\"] = \"diamond-node\";\n    ModelType[\"HTML_NODE\"] = \"html-node\";\n    ModelType[\"CUSTOM_HTML_NODE\"] = \"custom-html-node\";\n    ModelType[\"EDGE\"] = \"edge\";\n    ModelType[\"LINE_EDGE\"] = \"line-edge\";\n    ModelType[\"POLYLINE_EDGE\"] = \"polyline-edge\";\n    ModelType[\"BEZIER_EDGE\"] = \"bezier-edge\";\n    ModelType[\"GRAPH\"] = \"graph\";\n})(ModelType || (ModelType = {}));\nexport var EventType;\n(function (EventType) {\n    EventType[\"ELEMENT_CLICK\"] = \"element:click\";\n    // Node events\n    EventType[\"NODE_ADD\"] = \"node:add\";\n    EventType[\"NODE_DELETE\"] = \"node:delete\";\n    EventType[\"NODE_CLICK\"] = \"node:click\";\n    EventType[\"NODE_DBCLICK\"] = \"node:dbclick\";\n    EventType[\"NODE_GROUP_COPY\"] = \"node:group-copy-add\";\n    EventType[\"NODE_DND_ADD\"] = \"node:dnd-add\";\n    EventType[\"NODE_DND_DRAG\"] = \"node:dnd-drag\";\n    EventType[\"NODE_MOUSEDOWN\"] = \"node:mousedown\";\n    EventType[\"NODE_DRAGSTART\"] = \"node:dragstart\";\n    EventType[\"NODE_DRAG\"] = \"node:drag\";\n    EventType[\"NODE_DROP\"] = \"node:drop\";\n    EventType[\"NODE_MOUSEUP\"] = \"node:mouseup\";\n    EventType[\"NODE_MOUSEMOVE\"] = \"node:mousemove\";\n    EventType[\"NODE_MOUSEENTER\"] = \"node:mouseenter\";\n    EventType[\"NODE_MOUSELEAVE\"] = \"node:mouseleave\";\n    EventType[\"NODE_CONTEXTMENU\"] = \"node:contextmenu\";\n    EventType[\"NODE_ROTATE\"] = \"node:rotate\";\n    EventType[\"NODE_RESIZE\"] = \"node:resize\";\n    EventType[\"NODE_FOCUS\"] = \"node:focus\";\n    EventType[\"NODE_BLUR\"] = \"node:blur\";\n    //  properties \n    EventType[\"NODE_PROPERTIES_CHANGE\"] = \"node:properties-change\";\n    EventType[\"NODE_PROPERTIES_DELETE\"] = \"node:properties-delete\";\n    // Edge events\n    EventType[\"EDGE_ADD\"] = \"edge:add\";\n    EventType[\"EDGE_DELETE\"] = \"edge:delete\";\n    EventType[\"EDGE_CLICK\"] = \"edge:click\";\n    EventType[\"EDGE_DBCLICK\"] = \"edge:dbclick\";\n    EventType[\"EDGE_FOCUS\"] = \"edge:focus\";\n    EventType[\"EDGE_BLUR\"] = \"edge:blur\";\n    EventType[\"EDGE_MOUSEENTER\"] = \"edge:mouseenter\";\n    EventType[\"EDGE_MOUSELEAVE\"] = \"edge:mouseleave\";\n    EventType[\"EDGE_CONTEXTMENU\"] = \"edge:contextmenu\";\n    EventType[\"EDGE_ADJUST\"] = \"edge:adjust\";\n    EventType[\"EDGE_EXCHANGE_NODE\"] = \"edge:exchange-node\";\n    // Anchor events\n    EventType[\"ANCHOR_CLICK\"] = \"anchor:click\";\n    EventType[\"ANCHOR_MOUSEDOWN\"] = \"anchor:mousedown\";\n    EventType[\"ANCHOR_DRAGSTART\"] = \"anchor:dragstart\";\n    EventType[\"ANCHOR_DRAG\"] = \"anchor:drag\";\n    EventType[\"ANCHOR_DROP\"] = \"anchor:drop\";\n    EventType[\"ANCHOR_DRAGEND\"] = \"anchor:dragend\";\n    // Adjust point events\n    EventType[\"ADJUST_POINT_MOUSEDOWN\"] = \"adjustPoint:mousedown\";\n    EventType[\"ADJUST_POINT_MOUSEUP\"] = \"adjustPoint:mouseup\";\n    EventType[\"ADJUST_POINT_MOUSEMOVE\"] = \"adjustPoint:mousemove\";\n    EventType[\"ADJUST_POINT_DRAGSTART\"] = \"adjustPoint:dragstart\";\n    EventType[\"ADJUST_POINT_DRAG\"] = \"adjustPoint:drag\";\n    EventType[\"ADJUST_POINT_DROP\"] = \"adjustPoint:drop\";\n    EventType[\"ADJUST_POINT_DRAGEND\"] = \"adjustPoint:dragend\";\n    // Blank events\n    EventType[\"BLANK_MOUSEDOWN\"] = \"blank:mousedown\";\n    EventType[\"BLANK_DRAGSTART\"] = \"blank:dragstart\";\n    EventType[\"BLANK_DRAG\"] = \"blank:drag\";\n    EventType[\"BLANK_DROP\"] = \"blank:drop\";\n    EventType[\"BLANK_MOUSEMOVE\"] = \"blank:mousemove\";\n    EventType[\"BLANK_CANVAS_MOUSEMOVE\"] = \"blank:canvas-mousemove\";\n    EventType[\"BLANK_MOUSEUP\"] = \"blank:mouseup\";\n    EventType[\"BLANK_CLICK\"] = \"blank:click\";\n    EventType[\"BLANK_CONTEXTMENU\"] = \"blank:contextmenu\";\n    // Selection events\n    EventType[\"SELECTION_MOUSEDOWN\"] = \"selection:mousedown\";\n    EventType[\"SELECTION_DRAGSTART\"] = \"selection:dragstart\";\n    EventType[\"SELECTION_DRAG\"] = \"selection:drag\";\n    EventType[\"SELECTION_DROP\"] = \"selection:drop\";\n    EventType[\"SELECTION_MOUSEMOVE\"] = \"selection:mousemove\";\n    EventType[\"SELECTION_MOUSEUP\"] = \"selection:mouseup\";\n    EventType[\"SELECTION_CONTEXTMENU\"] = \"selection:contextmenu\";\n    EventType[\"CONNECTION_NOT_ALLOWED\"] = \"connection:not-allowed\";\n    // Text events\n    EventType[\"TEXT_MOUSEDOWN\"] = \"text:mousedown\";\n    EventType[\"TEXT_DRAGSTART\"] = \"text:dragstart\";\n    EventType[\"TEXT_DRAG\"] = \"text:drag\";\n    EventType[\"TEXT_DROP\"] = \"text:drop\";\n    EventType[\"TEXT_CLICK\"] = \"text:click\";\n    EventType[\"TEXT_DBCLICK\"] = \"text:dbclick\";\n    EventType[\"TEXT_BLUR\"] = \"text:blur\";\n    EventType[\"TEXT_MOUSEMOVE\"] = \"text:mousemove\";\n    EventType[\"TEXT_MOUSEUP\"] = \"text:mouseup\";\n    EventType[\"TEXT_FOCUS\"] = \"text:focus\";\n    EventType[\"TEXT_ADD\"] = \"text:add\";\n    EventType[\"TEXT_UPDATE\"] = \"text:update\";\n    EventType[\"TEXT_CLEAR\"] = \"text:clear\";\n    // label events\n    EventType[\"LABEL_MOUSEDOWN\"] = \"label:mousedown\";\n    EventType[\"LABEL_DRAGSTART\"] = \"label:dragstart\";\n    EventType[\"LABEL_DRAG\"] = \"label:drag\";\n    EventType[\"LABEL_DROP\"] = \"label:drop\";\n    EventType[\"LABEL_CLICK\"] = \"label:click\";\n    EventType[\"LABEL_DBCLICK\"] = \"label:dbclick\";\n    EventType[\"LABEL_BLUR\"] = \"label:blur\";\n    EventType[\"LABEL_MOUSEMOVE\"] = \"label:mousemove\";\n    EventType[\"LABEL_MOUSEUP\"] = \"label:mouseup\";\n    EventType[\"LABEL_FOCUS\"] = \"label:focus\";\n    EventType[\"LABEL_ADD\"] = \"label:add\";\n    EventType[\"LABEL_UPDATE\"] = \"label:update\";\n    EventType[\"LABEL_CLEAR\"] = \"label:clear\";\n    EventType[\"LABEL_DELETE\"] = \"label:delete\";\n    EventType[\"LABEL_SHOULD_ADD\"] = \"label:should-add\";\n    EventType[\"LABEL_BATCH_ADD\"] = \"label:batch-add\";\n    EventType[\"LABEL_SHOULD_UPDATE\"] = \"label:should-update\";\n    EventType[\"LABEL_SHOULD_DELETE\"] = \"label:should-delete\";\n    EventType[\"LABEL_BATCH_DELETE\"] = \"label:batch-delete\";\n    EventType[\"LABEL_NOT_ALLOWED_ADD\"] = \"label:not-allowed-add\";\n    // Other events\n    EventType[\"HISTORY_CHANGE\"] = \"history:change\";\n    EventType[\"GRAPH_TRANSFORM\"] = \"graph:transform\";\n    EventType[\"GRAPH_RENDERED\"] = \"graph:rendered\";\n    EventType[\"GRAPH_UPDATED\"] = \"graph:updated\";\n    EventType[\"EDIT_CONFIG_CHANGED\"] = \"editConfig:changed\";\n})(EventType || (EventType = {}));\nexport var OverlapMode;\n(function (OverlapMode) {\n    OverlapMode[OverlapMode[\"STATIC\"] = -1] = \"STATIC\";\n    OverlapMode[OverlapMode[\"DEFAULT\"] = 0] = \"DEFAULT\";\n    OverlapMode[OverlapMode[\"INCREASE\"] = 1] = \"INCREASE\";\n    OverlapMode[OverlapMode[\"EDGE_TOP\"] = 2] = \"EDGE_TOP\";\n})(OverlapMode || (OverlapMode = {}));\nexport var SegmentDirection;\n(function (SegmentDirection) {\n    SegmentDirection[\"HORIZONTAL\"] = \"horizontal\";\n    SegmentDirection[\"VERTICAL\"] = \"vertical\";\n})(SegmentDirection || (SegmentDirection = {}));\nexport var TextMode;\n(function (TextMode) {\n    TextMode[\"TEXT\"] = \"text\";\n    TextMode[\"LABEL\"] = \"label\";\n})(TextMode || (TextMode = {}));\n","import { noop } from 'lodash-es';\nimport { EventType } from '../constant';\n// TODO\n// const DOC: any = window?.document\nvar LEFT_MOUSE_BUTTON_CODE = 0;\n// step\n// step\nvar StepDrag = /** @class */ (function () {\n    function StepDrag(_a) {\n        var _b = _a.onDragStart, onDragStart = _b === void 0 ? noop : _b, _c = _a.onDragging, onDragging = _c === void 0 ? noop : _c, _d = _a.onDragEnd, onDragEnd = _d === void 0 ? noop : _d, _e = _a.eventType, eventType = _e === void 0 ? '' : _e, eventCenter = _a.eventCenter, _f = _a.step, step = _f === void 0 ? 1 : _f, _g = _a.isStopPropagation, isStopPropagation = _g === void 0 ? true : _g, model = _a.model, data = _a.data;\n        var _this = this;\n        // \n        this.isDragging = false;\n        this.isStartDragging = false;\n        this.startX = 0;\n        this.startY = 0;\n        this.sumDeltaX = 0;\n        this.sumDeltaY = 0;\n        this.handleMouseDown = function (e) {\n            var _a, _b;\n            var DOC = window === null || window === void 0 ? void 0 : window.document;\n            if (e.button !== LEFT_MOUSE_BUTTON_CODE)\n                return;\n            if (_this.isStopPropagation)\n                e.stopPropagation();\n            e.preventDefault();\n            _this.isStartDragging = true;\n            _this.startX = e.clientX;\n            _this.startY = e.clientY;\n            DOC.addEventListener('pointermove', _this.handleMouseMove, false);\n            DOC.addEventListener('pointerup', _this.handleMouseUp, false);\n            var elementData = (_a = _this.model) === null || _a === void 0 ? void 0 : _a.getData();\n            (_b = _this.eventCenter) === null || _b === void 0 ? void 0 : _b.emit(EventType[\"\".concat(_this.eventType, \"_MOUSEDOWN\")], {\n                e: e,\n                data: _this.data || elementData,\n            });\n            _this.startTime = new Date().getTime();\n        };\n        this.handleMouseMove = function (e) {\n            var _a, _b;\n            if (_this.isStopPropagation)\n                e.stopPropagation();\n            e.preventDefault();\n            if (!_this.isStartDragging)\n                return;\n            _this.sumDeltaX += e.clientX - _this.startX;\n            _this.sumDeltaY += e.clientY - _this.startY;\n            _this.startX = e.clientX;\n            _this.startY = e.clientY;\n            if (_this.step <= 1 ||\n                Math.abs(_this.sumDeltaX) > _this.step ||\n                Math.abs(_this.sumDeltaY) > _this.step) {\n                var remainderX = _this.sumDeltaX % _this.step;\n                var remainderY = _this.sumDeltaY % _this.step;\n                var deltaX_1 = _this.sumDeltaX - remainderX;\n                var deltaY_1 = _this.sumDeltaY - remainderY;\n                _this.sumDeltaX = remainderX;\n                _this.sumDeltaY = remainderY;\n                var elementData_1 = (_a = _this.model) === null || _a === void 0 ? void 0 : _a.getData();\n                /**\n                 * dragstart\n                 */\n                if (!_this.isDragging) {\n                    (_b = _this.eventCenter) === null || _b === void 0 ? void 0 : _b.emit(EventType[\"\".concat(_this.eventType, \"_DRAGSTART\")], {\n                        e: e,\n                        data: _this.data || elementData_1,\n                    });\n                    _this.onDragStart({ event: e });\n                }\n                _this.isDragging = true;\n                // dragstartdragdrag\n                // TODO: \n                // dragstartdrag\n                Promise.resolve().then(function () {\n                    var _a, _b;\n                    _this.onDragging({\n                        deltaX: deltaX_1,\n                        deltaY: deltaY_1,\n                        event: e,\n                    });\n                    (_a = _this.eventCenter) === null || _a === void 0 ? void 0 : _a.emit(EventType[\"\".concat(_this.eventType, \"_MOUSEMOVE\")], {\n                        deltaX: deltaX_1,\n                        deltaY: deltaY_1,\n                        e: e,\n                        data: _this.data || elementData_1,\n                    });\n                    (_b = _this.eventCenter) === null || _b === void 0 ? void 0 : _b.emit(EventType[\"\".concat(_this.eventType, \"_DRAG\")], {\n                        e: e,\n                        data: _this.data || elementData_1,\n                    });\n                });\n            }\n        };\n        this.handleMouseUp = function (e) {\n            var DOC = window.document;\n            _this.isStartDragging = false;\n            if (_this.isStopPropagation)\n                e.stopPropagation();\n            var target = e.target;\n            if (target && typeof target.releasePointerCapture === 'function') {\n                target.releasePointerCapture(e.pointerId);\n            }\n            // fix #568: onDraggingdrop\n            Promise.resolve().then(function () {\n                var _a, _b, _c;\n                DOC.removeEventListener('pointermove', _this.handleMouseMove, false);\n                DOC.removeEventListener('pointerup', _this.handleMouseUp, false);\n                var elementData = (_a = _this.model) === null || _a === void 0 ? void 0 : _a.getData();\n                (_b = _this.eventCenter) === null || _b === void 0 ? void 0 : _b.emit(EventType[\"\".concat(_this.eventType, \"_MOUSEUP\")], {\n                    e: e,\n                    data: _this.data || elementData,\n                });\n                if (!_this.isDragging)\n                    return;\n                _this.isDragging = false;\n                _this.onDragEnd({ event: e });\n                (_c = _this.eventCenter) === null || _c === void 0 ? void 0 : _c.emit(EventType[\"\".concat(_this.eventType, \"_DROP\")], {\n                    e: e,\n                    data: _this.data || elementData,\n                });\n            });\n        };\n        this.cancelDrag = function () {\n            var DOC = window === null || window === void 0 ? void 0 : window.document;\n            DOC.removeEventListener('pointermove', _this.handleMouseMove, false);\n            DOC.removeEventListener('pointerup', _this.handleMouseUp, false);\n            _this.onDragEnd({ event: undefined });\n            _this.isDragging = false;\n        };\n        this.destroy = function () {\n            if (_this.isStartDragging) {\n                // https://github.com/didi/LogicFlow/issues/1934\n                // https://github.com/didi/LogicFlow/issues/1926\n                // cancelDrag()->onDragEnd()->updateEdgePointByAnchors()\n                // mousemovemouseup\n                // if(this.isStartDragging)isStartDragging=truehandleMouseUp()\n                // (isStartDragging=true)cancelDrag\n                _this.cancelDrag();\n            }\n        };\n        this.onDragStart = onDragStart;\n        this.onDragging = onDragging;\n        this.onDragEnd = onDragEnd;\n        this.step = step;\n        this.isStopPropagation = isStopPropagation;\n        this.eventType = eventType;\n        this.eventCenter = eventCenter;\n        this.model = model;\n        this.data = data;\n    }\n    StepDrag.prototype.setStep = function (step) {\n        this.step = step;\n    };\n    StepDrag.prototype.setModel = function (model) {\n        this.model = model;\n    };\n    return StepDrag;\n}());\nexport { StepDrag };\n","import { ModelType } from '../constant';\nimport { points2PointsList, getBBoxOfPoints, getBezierPoints } from '../util';\n// out\nexport var getNodeOutline = function (node) {\n    var x = node.x, y = node.y, width = node.width, height = node.height;\n    return {\n        x: x - width / 2,\n        y: y - height / 2,\n        x1: x + width / 2,\n        y1: y + height / 2,\n    };\n};\nexport var getLineOutline = function (edge) {\n    var startPoint = edge.startPoint, endPoint = edge.endPoint;\n    var x = (startPoint.x + endPoint.x) / 2;\n    var y = (startPoint.y + endPoint.y) / 2;\n    var width = Math.abs(startPoint.x - endPoint.x) + 10;\n    var height = Math.abs(startPoint.y - endPoint.y) + 10;\n    return {\n        x: x - width / 2,\n        y: y - height / 2,\n        x1: x + width / 2,\n        y1: y + height / 2,\n    };\n};\nexport var getPolylineOutline = function (edge) {\n    var points = edge.points;\n    var pointsList = points2PointsList(points);\n    var bbox = getBBoxOfPoints(pointsList, 8);\n    var x = bbox.x, y = bbox.y, width = bbox.width, height = bbox.height;\n    return {\n        x: x - width / 2,\n        y: y - height / 2,\n        x1: x + width / 2,\n        y1: y + height / 2,\n    };\n};\nexport var getBezierOutline = function (edge) {\n    var path = edge.path;\n    var pointsList = getBezierPoints(path);\n    var bbox = getBBoxOfPoints(pointsList, 8);\n    var x = bbox.x, y = bbox.y, width = bbox.width, height = bbox.height;\n    return {\n        x: x - width / 2,\n        y: y - height / 2,\n        x1: x + width / 2,\n        y1: y + height / 2,\n    };\n};\nexport var getEdgeOutline = function (edge) {\n    if (edge.modelType === ModelType.LINE_EDGE) {\n        return getLineOutline(edge);\n    }\n    if (edge.modelType === ModelType.POLYLINE_EDGE) {\n        return getPolylineOutline(edge);\n    }\n    if (edge.modelType === ModelType.BEZIER_EDGE) {\n        return getBezierOutline(edge);\n    }\n};\n","/**\n * 1: ab, 2 cd,\n * @param a\n * @param b\n * @param c\n * @param d\n * @return Pointfalse\n */\nexport var getCrossPointOfLine = function (a, b, c, d) {\n    /** 1 , . * */\n    // 0 , \n    var denominator = (b.y - a.y) * (d.x - c.x) - (a.x - b.x) * (c.y - d.y);\n    if (denominator === 0) {\n        return false;\n    }\n    //  (x , y)\n    var x = ((b.x - a.x) * (d.x - c.x) * (c.y - a.y) +\n        (b.y - a.y) * (d.x - c.x) * a.x -\n        (d.y - c.y) * (b.x - a.x) * c.x) /\n        denominator;\n    var y = -((b.y - a.y) * (d.y - c.y) * (c.x - a.x) +\n        (b.x - a.x) * (d.y - c.y) * a.y -\n        (d.x - c.x) * (b.y - a.y) * c.y) / denominator;\n    /** 2  * */\n    if (\n    // 1\n    (x - a.x) * (x - b.x) <= 0 &&\n        (y - a.y) * (y - b.y) <= 0 &&\n        // 2\n        (x - c.x) * (x - d.x) <= 0 &&\n        (y - c.y) * (y - d.y) <= 0) {\n        // p\n        return {\n            x: x,\n            y: y,\n        };\n    }\n    // \n    return false;\n};\n/* \npoint, start,end,\n truefalse\n*/\nexport var isInSegment = function (point, start, end) {\n    var x = point.x, y = point.y;\n    var startX = start.x, startY = start.y;\n    var endX = end.x, endY = end.y;\n    var k = (endY - startY) / (endX - startX);\n    var b = startY - k * startX;\n    return (((x >= startX && x <= endX) || (x <= startX && x >= endX)) &&\n        ((y >= startY && y <= endY) || (y <= startY && y >= endY)) &&\n        Math.abs(y - k * x - b) < Number.EPSILON);\n};\n","// \nexport * from './outline';\nexport * from './edge';\n/*\n * \n * \n */\nexport var getVerticalPointOfLine = function (config) {\n    /*\n     ** offset: \n     ** verticalLength: \n     ** type: /\n     */\n    var start = config.start, end = config.end, offset = config.offset, verticalLength = config.verticalLength, type = config.type;\n    var pointPosition = {\n        leftX: 0,\n        leftY: 0,\n        rightX: 0,\n        rightY: 0,\n    };\n    // // \n    var angleOfHorizontal = Math.atan((end.y - start.y) / (end.x - start.x));\n    // \n    var angleOfPoints = Math.atan(offset / verticalLength);\n    // \n    var len = Math.sqrt(verticalLength * verticalLength + offset * offset);\n    if (type === 'start') {\n        if (end.x >= start.x) {\n            pointPosition.leftX =\n                start.x + len * Math.sin(angleOfHorizontal + angleOfPoints);\n            pointPosition.leftY =\n                start.y - len * Math.cos(angleOfHorizontal + angleOfPoints);\n            pointPosition.rightX =\n                start.x - len * Math.sin(angleOfHorizontal - angleOfPoints);\n            pointPosition.rightY =\n                start.y + len * Math.cos(angleOfHorizontal - angleOfPoints);\n        }\n        else {\n            pointPosition.leftX =\n                start.x - len * Math.sin(angleOfHorizontal + angleOfPoints);\n            pointPosition.leftY =\n                start.y + len * Math.cos(angleOfHorizontal + angleOfPoints);\n            pointPosition.rightX =\n                start.x + len * Math.sin(angleOfHorizontal - angleOfPoints);\n            pointPosition.rightY =\n                start.y - len * Math.cos(angleOfHorizontal - angleOfPoints);\n        }\n    }\n    else if (type === 'end') {\n        if (end.x >= start.x) {\n            pointPosition.leftX =\n                end.x + len * Math.sin(angleOfHorizontal - angleOfPoints);\n            pointPosition.leftY =\n                end.y - len * Math.cos(angleOfHorizontal - angleOfPoints);\n            pointPosition.rightX =\n                end.x - len * Math.sin(angleOfHorizontal + angleOfPoints);\n            pointPosition.rightY =\n                end.y + len * Math.cos(angleOfHorizontal + angleOfPoints);\n        }\n        else {\n            pointPosition.leftX =\n                end.x - len * Math.sin(angleOfHorizontal - angleOfPoints);\n            pointPosition.leftY =\n                end.y + len * Math.cos(angleOfHorizontal - angleOfPoints);\n            pointPosition.rightX =\n                end.x + len * Math.sin(angleOfHorizontal + angleOfPoints);\n            pointPosition.rightY =\n                end.y - len * Math.cos(angleOfHorizontal + angleOfPoints);\n        }\n    }\n    return pointPosition;\n};\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { pick, forEach } from 'lodash-es';\nimport { getNodeBBox, isInNode, distance, sampleCubic } from '.';\nimport { SegmentDirection } from '../constant';\nimport { getVerticalPointOfLine, getCrossPointOfLine, isInSegment, } from '../algorithm';\nimport { LineEdgeModel, PolylineEdgeModel, } from '../model';\n/*  edge -> edgeModel */\nexport var setupEdgeModel = function (edge, graphModel) {\n    var model;\n    switch (edge.type) {\n        case 'line':\n            model = new LineEdgeModel(edge, graphModel);\n            break;\n        case 'polyline':\n            model = new PolylineEdgeModel(edge, graphModel);\n            break;\n        default:\n            model = new LineEdgeModel(edge, graphModel);\n            break;\n    }\n    return model;\n};\n/* Bbox */\nexport var isBboxOverLapping = function (b1, b2) {\n    return Math.abs(b1.centerX - b2.centerX) * 2 < b1.width + b2.width &&\n        Math.abs(b1.centerY - b2.centerY) * 2 < b1.height + b2.height;\n};\n/* x,y */\nexport var filterRepeatPoints = function (points) {\n    var result = [];\n    var pointsMap = {};\n    points.forEach(function (p) {\n        var id = \"\".concat(p.x, \"-\").concat(p.y);\n        p.id = id;\n        pointsMap[id] = p;\n    });\n    Object.keys(pointsMap).forEach(function (p) {\n        result.push(pointsMap[p]);\n    });\n    return result;\n};\n/* :1 */\nexport var getSimplePolyline = function (sPoint, tPoint) {\n    var points = [\n        sPoint,\n        {\n            x: sPoint.x,\n            y: tPoint.y,\n        },\n        tPoint,\n    ];\n    return filterRepeatPoints(points);\n};\n/* bbox,node, offset */\nexport var getExpandedBBox = function (bbox, offset) {\n    if (bbox.width === 0 && bbox.height === 0) {\n        return bbox;\n    }\n    return {\n        x: bbox.x,\n        y: bbox.y,\n        centerX: bbox.centerX,\n        centerY: bbox.centerY,\n        minX: bbox.minX - offset,\n        minY: bbox.minY - offset,\n        maxX: bbox.maxX + offset,\n        maxY: bbox.maxY + offset,\n        height: bbox.height + 2 * offset,\n        width: bbox.width + 2 * offset,\n    };\n};\n/* truefalse */\nexport var pointDirection = function (point, bbox) {\n    var dx = Math.abs(point.x - bbox.centerX);\n    var dy = Math.abs(point.y - bbox.centerY);\n    return dx / bbox.width > dy / bbox.height\n        ? SegmentDirection.HORIZONTAL\n        : SegmentDirection.VERTICAL;\n};\n/*  */\nexport var getExpandedBBoxPoint = function (expendBBox, bbox, point) {\n    // https://github.com/didi/LogicFlow/issues/817\n    // bboxexpendBBox\n    // pointDirectiondx / bbox.width > dy / bbox.height\n    // bbox.widthoffsetbbox.height\n    // ()\n    var direction = pointDirection(point, bbox);\n    if (direction === SegmentDirection.HORIZONTAL) {\n        return {\n            x: point.x > expendBBox.centerX ? expendBBox.maxX : expendBBox.minX,\n            y: point.y,\n        };\n    }\n    return {\n        x: point.x,\n        y: point.y > expendBBox.centerY ? expendBBox.maxY : expendBBox.minY,\n    };\n};\n/* 2box */\nexport var mergeBBox = function (b1, b2) {\n    var minX = Math.min(b1.minX, b2.minX);\n    var minY = Math.min(b1.minY, b2.minY);\n    var maxX = Math.max(b1.maxX, b2.maxX);\n    var maxY = Math.max(b1.maxY, b2.maxY);\n    return {\n        x: (minX + maxX) / 2,\n        y: (minY + maxY) / 2,\n        centerX: (minX + maxX) / 2,\n        centerY: (minY + maxY) / 2,\n        minX: minX,\n        minY: minY,\n        maxX: maxX,\n        maxY: maxY,\n        height: maxY - minY,\n        width: maxX - minX,\n    };\n};\n/* bbox\n * \n * 1(expendBboxPoint)bbox\n * 2polylineEdge, bezierEdgeoutlineoffset\n */\nexport var getBBoxOfPoints = function (points, offset) {\n    if (points === void 0) { points = []; }\n    var xList = [];\n    var yList = [];\n    points.forEach(function (p) {\n        xList.push(p.x);\n        yList.push(p.y);\n    });\n    var minX = Math.min.apply(Math, __spreadArray([], __read(xList), false));\n    var maxX = Math.max.apply(Math, __spreadArray([], __read(xList), false));\n    var minY = Math.min.apply(Math, __spreadArray([], __read(yList), false));\n    var maxY = Math.max.apply(Math, __spreadArray([], __read(yList), false));\n    var width = maxX - minX;\n    var height = maxY - minY;\n    if (offset) {\n        width += offset;\n        height += offset;\n    }\n    return {\n        centerX: (minX + maxX) / 2,\n        centerY: (minY + maxY) / 2,\n        maxX: maxX,\n        maxY: maxY,\n        minX: minX,\n        minY: minY,\n        x: (minX + maxX) / 2,\n        y: (minY + maxY) / 2,\n        height: height,\n        width: width,\n    };\n};\n/* box */\nexport var getPointsFromBBox = function (bbox) {\n    var minX = bbox.minX, minY = bbox.minY, maxX = bbox.maxX, maxY = bbox.maxY;\n    return [\n        {\n            x: minX,\n            y: minY,\n        },\n        {\n            x: maxX,\n            y: minY,\n        },\n        {\n            x: maxX,\n            y: maxY,\n        },\n        {\n            x: minX,\n            y: maxY,\n        },\n    ];\n};\n/* box */\nexport var isPointOutsideBBox = function (point, bbox) {\n    var x = point.x, y = point.y;\n    return x < bbox.minX || x > bbox.maxX || y < bbox.minY || y > bbox.maxY;\n};\n/* xbox */\nexport var getBBoxXCrossPoints = function (bbox, x) {\n    if (x < bbox.minX || x > bbox.maxX) {\n        return [];\n    }\n    return [\n        {\n            x: x,\n            y: bbox.minY,\n        },\n        {\n            x: x,\n            y: bbox.maxY,\n        },\n    ];\n};\n/* ybox */\nexport var getBBoxYCrossPoints = function (bbox, y) {\n    if (y < bbox.minY || y > bbox.maxY) {\n        return [];\n    }\n    return [\n        {\n            x: bbox.minX,\n            y: y,\n        },\n        {\n            x: bbox.maxX,\n            y: y,\n        },\n    ];\n};\n/* x,ybox */\nexport var getBBoxCrossPointsByPoint = function (bbox, point) { return __spreadArray(__spreadArray([], __read(getBBoxXCrossPoints(bbox, point.x)), false), __read(getBBoxYCrossPoints(bbox, point.y)), false); };\n/* () */\nexport var estimateDistance = function (p1, p2) {\n    return Math.abs(p1.x - p2.x) + Math.abs(p1.y - p2.y);\n};\n/*  */\nexport var costByPoints = function (p, points) {\n    var offset = -2;\n    var result = 0;\n    points.forEach(function (point) {\n        if (point) {\n            if (p.x === point.x) {\n                result += offset;\n            }\n            if (p.y === point.y) {\n                result += offset;\n            }\n        }\n    });\n    return result;\n};\n/*  */\nexport var heuristicCostEstimate = function (p, ps, pt, source, target) {\n    return estimateDistance(p, ps) +\n        estimateDistance(p, pt) +\n        costByPoints(p, [ps, pt, source, target]);\n};\n/* cameFrom */\nexport var rebuildPath = function (pathPoints, pointById, cameFrom, currentId, iterator) {\n    if (!iterator) {\n        iterator = 0;\n    }\n    pathPoints.unshift(pointById[currentId]);\n    if (cameFrom[currentId] &&\n        cameFrom[currentId] !== currentId &&\n        iterator <= 100) {\n        rebuildPath(pathPoints, pointById, cameFrom, cameFrom[currentId], iterator + 1);\n    }\n};\n/*  */\nexport var removeClosePointFromOpenList = function (arr, item) {\n    var index = arr.indexOf(item);\n    if (index > -1) {\n        arr.splice(index, 1);\n    }\n};\n/*  */\nexport var isSegmentsIntersected = function (p0, p1, p2, p3) {\n    var s1x = p1.x - p0.x;\n    var s1y = p1.y - p0.y;\n    var s2x = p3.x - p2.x;\n    var s2y = p3.y - p2.y;\n    var s = (-s1y * (p0.x - p2.x) + s1x * (p0.y - p2.y)) / (-s2x * s1y + s1x * s2y);\n    var t = (s2x * (p0.y - p2.y) - s2y * (p0.x - p2.x)) / (-s2x * s1y + s1x * s2y);\n    return s >= 0 && s <= 1 && t >= 0 && t <= 1;\n};\n/* bbox */\nexport var isSegmentCrossingBBox = function (p1, p2, bbox) {\n    if (bbox.width === 0 && bbox.height === 0) {\n        return false;\n    }\n    var _a = __read(getPointsFromBBox(bbox), 4), pa = _a[0], pb = _a[1], pc = _a[2], pd = _a[3];\n    return (isSegmentsIntersected(p1, p2, pa, pb) ||\n        isSegmentsIntersected(p1, p2, pa, pd) ||\n        isSegmentsIntersected(p1, p2, pb, pc) ||\n        isSegmentsIntersected(p1, p2, pc, pd));\n};\n/*  */\nexport var getNextNeighborPoints = function (points, point, bbox1, bbox2) {\n    var neighbors = [];\n    points.forEach(function (p) {\n        if (p !== point) {\n            if (p.x === point.x || p.y === point.y) {\n                if (!isSegmentCrossingBBox(p, point, bbox1) &&\n                    !isSegmentCrossingBBox(p, point, bbox2)) {\n                    neighbors.push(p);\n                }\n            }\n        }\n    });\n    return filterRepeatPoints(neighbors);\n};\n/* ,AStar+\n * wiki:https://zh.wikipedia.org/wiki/A*%E6%90%9C%E5%B0%8B%E6%BC%94%E7%AE%97%E6%B3%95\n * polylinesrc/algorithm\n */\nexport var pathFinder = function (points, start, goal, sBBox, tBBox, os, ot) {\n    // \n    var closedSet = [];\n    // \n    var openSet = [start];\n    // \n    var cameFrom = {};\n    var gScore = {};\n    var fScore = {};\n    if (start.id) {\n        gScore[start.id] = 0;\n        fScore[start.id] = heuristicCostEstimate(start, goal, start);\n    }\n    var pointById = {};\n    points.forEach(function (p) {\n        if (p.id) {\n            pointById[p.id] = p;\n        }\n    });\n    var _loop_1 = function () {\n        var current;\n        var lowestFScore = Infinity;\n        openSet.forEach(function (p) {\n            if (p.id && fScore[p.id] < lowestFScore) {\n                lowestFScore = fScore[p.id];\n                current = p;\n            }\n        });\n        if (current === goal && goal.id) {\n            var pathPoints = [];\n            rebuildPath(pathPoints, pointById, cameFrom, goal.id);\n            return { value: pathPoints };\n        }\n        if (!current) {\n            return { value: [start, goal] };\n        }\n        removeClosePointFromOpenList(openSet, current);\n        closedSet.push(current);\n        getNextNeighborPoints(points, current, sBBox, tBBox).forEach(function (neighbor) {\n            if (closedSet.indexOf(neighbor) !== -1) {\n                return;\n            }\n            if (openSet.indexOf(neighbor) === -1) {\n                openSet.push(neighbor);\n            }\n            if ((current === null || current === void 0 ? void 0 : current.id) && (neighbor === null || neighbor === void 0 ? void 0 : neighbor.id)) {\n                var tentativeGScore = fScore[current.id] + estimateDistance(current, neighbor);\n                if (gScore[neighbor.id] && tentativeGScore >= gScore[neighbor.id]) {\n                    return;\n                }\n                cameFrom[neighbor.id] = current.id;\n                gScore[neighbor.id] = tentativeGScore;\n                fScore[neighbor.id] =\n                    gScore[neighbor.id] +\n                        heuristicCostEstimate(neighbor, goal, start, os, ot);\n            }\n        });\n    };\n    while (openSet.length) {\n        var state_1 = _loop_1();\n        if (typeof state_1 === \"object\")\n            return state_1.value;\n    }\n    return [start, goal];\n};\nexport var getBoxByOriginNode = function (node) {\n    return getNodeBBox(node);\n};\n/* 2 x/y */\nexport var pointFilter = function (points) {\n    var i = 1;\n    while (i < points.length - 1) {\n        var pre = points[i - 1];\n        var current = points[i];\n        var next = points[i + 1];\n        if ((pre.x === current.x && current.x === next.x) ||\n            (pre.y === current.y && current.y === next.y)) {\n            points.splice(i, 1);\n        }\n        else {\n            i++;\n        }\n    }\n    return points;\n};\n/*  */\nexport var getPolylinePoints = function (start, end, sNode, tNode, offset) {\n    var sBBox = getBoxByOriginNode(sNode);\n    var tBBox = getBoxByOriginNode(tNode);\n    var sxBBox = getExpandedBBox(sBBox, offset);\n    var txBBox = getExpandedBBox(tBBox, offset);\n    var sPoint = getExpandedBBoxPoint(sxBBox, sBBox, start);\n    var tPoint = getExpandedBBoxPoint(txBBox, tBBox, end);\n    // offsetbbox\n    if (isBboxOverLapping(sxBBox, txBBox)) {\n        var points = getSimplePoints(start, end, sPoint, tPoint);\n        return __spreadArray(__spreadArray([start, sPoint], __read(points), false), [tPoint, end], false);\n    }\n    var lineBBox = getBBoxOfPoints([sPoint, tPoint]);\n    var sMixBBox = mergeBBox(sxBBox, lineBBox);\n    var tMixBBox = mergeBBox(txBBox, lineBBox);\n    var connectPoints = [];\n    connectPoints = connectPoints.concat(getPointsFromBBox(sMixBBox));\n    connectPoints = connectPoints.concat(getPointsFromBBox(tMixBBox));\n    // \n    var centerPoint = {\n        x: (start.x + end.x) / 2,\n        y: (start.y + end.y) / 2,\n    };\n    [lineBBox, sMixBBox, tMixBBox].forEach(function (bbox) {\n        connectPoints = connectPoints.concat(getBBoxCrossPointsByPoint(bbox, centerPoint).filter(function (p) { return isPointOutsideBBox(p, sxBBox) && isPointOutsideBBox(p, txBBox); }));\n    });\n    [\n        {\n            x: sPoint.x,\n            y: tPoint.y,\n        },\n        {\n            x: tPoint.x,\n            y: sPoint.y,\n        },\n    ].forEach(function (p) {\n        if (isPointOutsideBBox(p, sxBBox) && isPointOutsideBBox(p, txBBox)) {\n            connectPoints.push(p);\n        }\n    });\n    connectPoints.unshift(sPoint);\n    connectPoints.push(tPoint);\n    connectPoints = filterRepeatPoints(connectPoints);\n    // -\n    var pathPoints = pathFinder(connectPoints, sPoint, tPoint, sBBox, tBBox, start, end);\n    pathPoints.unshift(start);\n    pathPoints.push(end);\n    // \n    if (pathPoints.length > 2) {\n        pathPoints = pointFilter(pathPoints);\n    }\n    return filterRepeatPoints(pathPoints);\n};\n/**\n * \n * @param pointsList \n */\nexport var getLongestEdge = function (pointsList) {\n    if (pointsList.length === 1) {\n        var _a = __read(pointsList, 1), point = _a[0];\n        return [point, point];\n    }\n    else {\n        var point1 = pointsList[0];\n        var point2 = pointsList[1];\n        var edgeLength = distance(point1.x, point1.y, point2.x, point2.y);\n        for (var i = 1; i < pointsList.length - 1; i++) {\n            var newPoint1 = pointsList[i];\n            var newPoint2 = pointsList[i + 1];\n            var newEdgeLength = distance(newPoint1.x, newPoint1.y, newPoint2.x, newPoint2.y);\n            if (newEdgeLength > edgeLength) {\n                edgeLength = newEdgeLength;\n                point1 = newPoint1;\n                point2 = newPoint2;\n            }\n        }\n        return [point1, point2];\n    }\n};\n/*  */\nexport var isSegmentsInNode = function (start, end, node) {\n    var startInNode = isInNode(start, node);\n    var endInNode = isInNode(end, node);\n    return startInNode && endInNode;\n};\n/*  */\nexport var isSegmentsCrossNode = function (start, end, node) {\n    var startInNode = isInNode(start, node);\n    var endInNode = isInNode(end, node);\n    // bothInNode\n    var bothInNode = startInNode && endInNode;\n    // cross\n    var inNode = startInNode || endInNode;\n    // \n    return !bothInNode && inNode;\n};\n/* \n */\nexport var getCrossPointInRect = function (start, end, node) {\n    var crossSegments = undefined;\n    var nodeBox = getNodeBBox(node);\n    var points = getPointsFromBBox(nodeBox);\n    for (var i = 0; i < points.length; i++) {\n        var isCross = isSegmentsIntersected(start, end, points[i], points[(i + 1) % points.length]);\n        if (isCross) {\n            crossSegments = [points[i], points[(i + 1) % points.length]];\n        }\n    }\n    if (crossSegments) {\n        return getCrossPointOfLine(start, end, crossSegments[0], crossSegments[1]);\n    }\n};\n/*  */\nexport var segmentDirection = function (start, end) {\n    var direction = undefined;\n    if (start.x === end.x) {\n        direction = SegmentDirection.VERTICAL;\n    }\n    else if (start.y === end.y) {\n        direction = SegmentDirection.HORIZONTAL;\n    }\n    return direction;\n};\nexport var points2PointsList = function (points) {\n    var currentPositionList = points.split(' ');\n    var pointsList = [];\n    currentPositionList &&\n        currentPositionList.forEach(function (item) {\n            var _a = __read(item.split(','), 2), x = _a[0], y = _a[1];\n            pointsList.push({\n                x: Number(x),\n                y: Number(y),\n            });\n        });\n    return pointsList;\n};\nexport var getSimplePoints = function (start, end, sPoint, tPoint) {\n    var points = [];\n    // start,sPoint\n    var startDirection = segmentDirection(start, sPoint);\n    // end,tPoint\n    var endDirection = segmentDirection(end, tPoint);\n    // \n    // \n    if (startDirection === endDirection) {\n        if (start.y === sPoint.y) {\n            points.push({\n                x: sPoint.x,\n                y: (sPoint.y + tPoint.y) / 2,\n            });\n            points.push({\n                x: tPoint.x,\n                y: (sPoint.y + tPoint.y) / 2,\n            });\n        }\n        else {\n            points.push({\n                x: (sPoint.x + tPoint.x) / 2,\n                y: sPoint.y,\n            });\n            points.push({\n                x: (sPoint.x + tPoint.x) / 2,\n                y: tPoint.y,\n            });\n        }\n    }\n    else {\n        // ()\n        var point = {\n            x: sPoint.x,\n            y: tPoint.y,\n        };\n        var inStart = isInSegment(point, start, sPoint);\n        var inEnd = isInSegment(point, end, tPoint);\n        if (inStart || inEnd) {\n            point = {\n                x: tPoint.x,\n                y: sPoint.y,\n            };\n        }\n        else {\n            var onStart = isOnLine(point, start, sPoint);\n            var onEnd = isOnLine(point, end, tPoint);\n            if (onStart && onEnd) {\n                point = {\n                    x: tPoint.x,\n                    y: sPoint.y,\n                };\n            }\n        }\n        points.push(point);\n    }\n    return points;\n};\nvar isOnLine = function (point, start, end) {\n    return (point.x === start.x && point.x === end.x) ||\n        (point.y === start.y && point.y === end.y);\n};\n/*  */\nexport var getBytesLength = function (word) {\n    if (!word) {\n        return 0;\n    }\n    var totalLength = 0;\n    for (var i = 0; i < word.length; i++) {\n        var c = word.charCodeAt(i);\n        if (word.match(/[A-Z]/)) {\n            totalLength += 1.5;\n        }\n        else if ((c >= 0x0001 && c <= 0x007e) || (c >= 0xff60 && c <= 0xff9f)) {\n            totalLength += 1;\n        }\n        else {\n            totalLength += 2;\n        }\n    }\n    return totalLength;\n};\n/**\n * Uses canvas.measureText to compute\n * and return the width of the given text of given font in pixels.\n * @param {String} text The text to be rendered.\n * @param {String} font The css font descriptor\n * that text is to be rendered with (e.g. \"bold 14px verdana\").\n * @see https://stackoverflow.com/questions/118241/calculate-text-width-with-javascript/21015393#21015393\n */\nvar canvas = undefined;\nexport var getTextWidth = function (text, font) {\n    if (!canvas) {\n        canvas = document.createElement('canvas');\n    }\n    var context = canvas.getContext('2d');\n    context.font = font;\n    var metrics = context.measureText(text);\n    return metrics.width;\n};\n// append\nexport var getAppendAttributes = function (appendInfo) {\n    var start = appendInfo.start, end = appendInfo.end;\n    var d;\n    if (start.x === end.x && start.y === end.y) {\n        // append\n        d = '';\n    }\n    else {\n        var config = {\n            start: start,\n            end: end,\n            offset: 10,\n            verticalLength: 5,\n        };\n        var startPosition = getVerticalPointOfLine(__assign(__assign({}, config), { type: 'start' }));\n        var endPosition = getVerticalPointOfLine(__assign(__assign({}, config), { type: 'end' }));\n        d = \"M\".concat(startPosition.leftX, \" \").concat(startPosition.leftY, \"\\n    L\").concat(startPosition.rightX, \" \").concat(startPosition.rightY, \"\\n    L\").concat(endPosition.rightX, \" \").concat(endPosition.rightY, \"\\n    L\").concat(endPosition.leftX, \" \").concat(endPosition.leftY, \" z\");\n    }\n    return {\n        d: d,\n        fill: 'transparent',\n        stroke: 'transparent',\n        strokeWidth: 1,\n        strokeDasharray: '4, 4',\n    };\n};\n// bezier\nexport var getBezierControlPoints = function (_a) {\n    var start = _a.start, end = _a.end, sourceNode = _a.sourceNode, targetNode = _a.targetNode, offset = _a.offset;\n    var sBBox = getNodeBBox(sourceNode);\n    var tBBox = getNodeBBox(targetNode);\n    var sExpendBBox = getExpandedBBox(sBBox, offset);\n    var tExpendBBox = getExpandedBBox(tBBox, offset);\n    var sNext = getExpandedBBoxPoint(sExpendBBox, sBBox, start);\n    var ePre = getExpandedBBoxPoint(tExpendBBox, tBBox, end);\n    return {\n        sNext: sNext,\n        ePre: ePre,\n    };\n};\n// bezierpathPoints\nexport var getBezierPoints = function (path) {\n    var list = path.replace(/M/g, '').replace(/C/g, ',').split(',');\n    var start = getBezierPoint(list[0]);\n    var sNext = getBezierPoint(list[1]);\n    var ePre = getBezierPoint(list[2]);\n    var end = getBezierPoint(list[3]);\n    return [start, sNext, ePre, end];\n};\n// bezierpathPoint\nvar getBezierPoint = function (positionStr) {\n    var _a = __read(positionStr.replace(/(^\\s*)/g, '').split(' '), 2), x = _a[0], y = _a[1];\n    return {\n        x: +x,\n        y: +y,\n    };\n};\n// bezierpath\nexport var getEndTangent = function (pointsList, offset) {\n    // const bezierPoints = getBezierPoints(path)\n    var _a = __read(pointsList, 4), p1 = _a[0], cp1 = _a[1], cp2 = _a[2], p2 = _a[3];\n    var start = sampleCubic(p1, cp1, cp2, p2, offset);\n    return [start, pointsList[3]];\n};\n/**\n * \n * @param point \n * @param points \n * TODO: Label\n */\nexport var getClosestPointOfPolyline = function (point, points) {\n    var x = point.x, y = point.y;\n    var pointsPosition = points2PointsList(points);\n    var minDistance = Number.MAX_SAFE_INTEGER;\n    var crossPoint;\n    var segments = [];\n    for (var i = 0; i < pointsPosition.length; i++) {\n        segments.push({\n            start: pointsPosition[i],\n            end: pointsPosition[(i + 1) % pointsPosition.length],\n        });\n    }\n    segments.forEach(function (item) {\n        var start = item.start, end = item.end;\n        // crossPoint\n        if (start.x === end.x) {\n            var pointXY = {\n                x: start.x,\n                y: y,\n            };\n            var inSegment = isInSegment(pointXY, start, end);\n            if (inSegment) {\n                var currentDistance = Math.abs(start.x - x);\n                if (currentDistance < minDistance) {\n                    minDistance = currentDistance;\n                    crossPoint = pointXY;\n                }\n            }\n        }\n        else if (start.y === end.y) {\n            var pointXY = {\n                x: x,\n                y: start.y,\n            };\n            var inSegment = isInSegment(pointXY, start, end);\n            if (inSegment) {\n                var currentDistance = Math.abs(start.y - y);\n                if (currentDistance < minDistance) {\n                    minDistance = currentDistance;\n                    crossPoint = pointXY;\n                }\n            }\n        }\n    });\n    // \n    if (!crossPoint) {\n        var _a = segments[0], start = _a.start, end = _a.end;\n        crossPoint = {\n            x: start.x + (end.x - start.x) / 2,\n            y: start.y + (end.y - start.y) / 2,\n        };\n    }\n    return crossPoint;\n};\n// \nexport var pickEdgeConfig = function (data) {\n    return pick(data, [\n        'id',\n        'type',\n        'sourceNodeId',\n        'sourceAnchorId',\n        'targetNodeId',\n        'targetAnchorId',\n        'pointsList',\n        'startPoint',\n        'endPoint',\n        'properties',\n    ]);\n};\nexport var twoPointDistance = function (source, target) {\n    // fix: \n    // const source = {\n    //   x: p1.x,\n    //   y: Math.abs(p1.y),\n    // }\n    // const target = {\n    //   x: Math.abs(p2.x),\n    //   y: Math.abs(p2.y),\n    // }\n    return Math.sqrt(Math.pow((source.x - target.x), 2) + Math.pow((source.y - target.y), 2));\n};\n/**\n * \n * @param graphModel graph model\n * @param generator \n */\nexport function createEdgeGenerator(graphModel, generator) {\n    // TODO:  GraphModel \n    if (typeof generator !== 'function') {\n        return function (_sourceNode, _targetNode, currentEdge) { return Object.assign({ type: graphModel.edgeType }, currentEdge); };\n    }\n    return function (sourceNode, targetNode, currentEdge) {\n        var result = generator(sourceNode, targetNode, currentEdge);\n        // \n        if (!result)\n            return { type: graphModel.edgeType };\n        if (typeof result === 'string') {\n            return Object.assign({}, currentEdge, { type: result });\n        }\n        return Object.assign({ type: result }, currentEdge);\n    };\n}\nexport var getSvgTextSize = function (_a) {\n    var rows = _a.rows, rowsLength = _a.rowsLength, fontSize = _a.fontSize;\n    var longestBytes = 0;\n    forEach(rows, function (row) {\n        var rowBytesLength = getBytesLength(row);\n        longestBytes = rowBytesLength > longestBytes ? rowBytesLength : longestBytes;\n    });\n    // /2 * fontsize + 2\n    //   * fontsize + 2\n    return {\n        width: Math.ceil(longestBytes / 2) * fontSize + fontSize / 4,\n        height: rowsLength * (fontSize + 2) + fontSize / 4,\n    };\n};\n","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nexport function snapToGrid(point, gridSize, snapGrid) {\n    // \n    if (!snapGrid)\n        return point;\n    //  x, y  gridSize \n    return gridSize * Math.round(point / gridSize) || point;\n}\n// gridSize\n// \nexport function getGridOffset(distance, gridSize) {\n    return distance % gridSize;\n}\n/**\n *  points    widthheight \n * @param points\n * @param width\n * @param height\n */\nexport function normalizePolygon(points, width, height) {\n    if (!points)\n        return [];\n    // \n    var minX = Math.min.apply(Math, __spreadArray([], __read(points.map(function (p) { return p[0]; })), false));\n    var maxX = Math.max.apply(Math, __spreadArray([], __read(points.map(function (p) { return p[0]; })), false));\n    var minY = Math.min.apply(Math, __spreadArray([], __read(points.map(function (p) { return p[1]; })), false));\n    var maxY = Math.max.apply(Math, __spreadArray([], __read(points.map(function (p) { return p[1]; })), false));\n    // \n    var dx = -minX;\n    var dy = -minY;\n    var translatedPoints = points.map(function (_a) {\n        var _b = __read(_a, 2), x = _b[0], y = _b[1];\n        return [\n            x + dx,\n            y + dy,\n        ];\n    });\n    // \n    var bboxWidth = maxX - minX;\n    var bboxHeight = maxY - minY;\n    // \n    var scaleX = width ? width / bboxWidth : 1;\n    var scaleY = height ? height / bboxHeight : 1;\n    var scaleFactor = Math.min(scaleX, scaleY);\n    // \n    return translatedPoints.map(function (_a) {\n        var _b = __read(_a, 2), x = _b[0], y = _b[1];\n        return [x * scaleFactor, y * scaleFactor];\n    });\n}\n","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\n/**\n * \n * @param point \n * @param leftTopPoint \n * @param rightBottomPoint \n */\nexport var isPointInArea = function (_a, _b, _c) {\n    var _d = __read(_a, 2), x = _d[0], y = _d[1];\n    var _e = __read(_b, 2), leftTopX = _e[0], leftTopY = _e[1];\n    var _f = __read(_c, 2), rightBottomX = _f[0], rightBottomY = _f[1];\n    return x > leftTopX && x < rightBottomX && y > leftTopY && y < rightBottomY;\n};\n/**\n * \n */\nexport var isMultipleSelect = function (e, editConfigModel) {\n    var multipleSelectKey = editConfigModel.multipleSelectKey;\n    var isMultiple = false;\n    switch (multipleSelectKey) {\n        case 'meta':\n            isMultiple = e.metaKey;\n            break;\n        case 'alt':\n            isMultiple = e.altKey;\n            break;\n        case 'shift':\n            isMultiple = e.shiftKey;\n            break;\n        case 'ctrl':\n            isMultiple = e.ctrlKey; // Macctrl + ctrlMac\n            break;\n        default:\n            isMultiple = false;\n            break;\n    }\n    return isMultiple;\n};\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nfunction isVector(a1, a2) {\n    return !!(a1 instanceof Vector && a2 instanceof Vector);\n}\nvar Base = /** @class */ (function (_super) {\n    __extends(Base, _super);\n    function Base(x, y, z) {\n        var _this = _super.call(this, 3) || this;\n        _this[0] = x;\n        _this[1] = y;\n        _this[2] = z;\n        _this.x = x;\n        _this.y = y;\n        _this.z = z;\n        Object.setPrototypeOf(_this, Base.prototype);\n        return _this;\n    }\n    Base.prototype.add = function (v1) {\n        if (isVector(this, v1)) {\n            return new Vector(this.x + v1.x, this.y + v1.y);\n        }\n        var z = this.z + v1.z;\n        return new Point((this.x + v1.x) / z, (this.y + v1.y) / z);\n    };\n    Base.prototype.subtract = function (v1) {\n        if (isVector(this, v1)) {\n            return new Vector(this.x - v1.x, this.y - v1.y);\n        }\n        var z = this.z - v1.z;\n        return z === 0\n            ? new Vector(this.x - v1.x, this.y - v1.y)\n            : new Point((this.x - v1.x) / z, (this.y - v1.y) / z);\n    };\n    return Base;\n}(Array));\nvar Vector = /** @class */ (function (_super) {\n    __extends(Vector, _super);\n    function Vector(x, y, z) {\n        var _this = _super.call(this, x, y, z !== null && z !== void 0 ? z : 0) || this;\n        Object.setPrototypeOf(_this, Vector.prototype);\n        return _this;\n    }\n    Vector.prototype.toString = function () {\n        return 'Vector';\n    };\n    Vector.prototype.dot = function (v1) {\n        var _this = this;\n        return v1.reduce(function (prev, cur, index) { return prev + cur * _this[index]; });\n    };\n    Vector.prototype.cross = function (v1) {\n        return new Vector(this.y * v1.z - this.z * v1.y, this.z * v1.x - this.x * v1.z, this.x * v1.y - this.y * v1.x);\n    };\n    Vector.prototype.getLength = function () {\n        return Math.hypot(this.x, this.y);\n    };\n    Vector.prototype.normalize = function () {\n        var len = this.getLength();\n        return new Vector(this.x / len, this.y / len);\n    };\n    Vector.prototype.crossZ = function (v1) {\n        return this.x * v1.y - this.y * v1.x;\n    };\n    Vector.prototype.angle = function (v1) {\n        var negative = this.crossZ(v1);\n        var r = Math.acos(this.normalize().dot(v1.normalize()));\n        return negative >= 0 ? r : -r;\n    };\n    return Vector;\n}(Base));\nvar Point = /** @class */ (function (_super) {\n    __extends(Point, _super);\n    function Point(x, y) {\n        var _this = _super.call(this, x, y, 1) || this;\n        Object.setPrototypeOf(_this, Point.prototype);\n        return _this;\n    }\n    Point.prototype.toString = function () {\n        return 'Point';\n    };\n    return Point;\n}(Base));\nexport { Vector, Point };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { Vector, Point } from './vector';\nvar Matrix = /** @class */ (function (_super) {\n    __extends(Matrix, _super);\n    function Matrix() {\n        var vectors = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            vectors[_i] = arguments[_i];\n        }\n        var _this = _super.call(this, vectors.length) || this;\n        _this.fill(new Array(3));\n        vectors.forEach(function (v, index) {\n            _this[index] = v;\n        });\n        _this.columns = vectors[0].length;\n        _this.rows = vectors.length;\n        Object.setPrototypeOf(_this, Matrix.prototype);\n        return _this;\n    }\n    Matrix.prototype.getRow = function (index) {\n        return this[index];\n    };\n    Matrix.prototype.getColumn = function (index) {\n        return __spreadArray([], __read(this.map(function (row) { return row[index]; })), false);\n    };\n    // \n    Matrix.prototype.transpose = function () {\n        var vectors = [];\n        for (var i = 0; i < this.columns; i++) {\n            vectors.push(this.getColumn(i));\n        }\n        return new (Matrix.bind.apply(Matrix, __spreadArray([void 0], __read(vectors), false)))();\n    };\n    // \n    Matrix.prototype.cross = function (m1) {\n        var arr = new Array(this.rows).fill('').map(function () { return []; });\n        if (this.columns === m1.rows) {\n            for (var i = 0; i < this.rows; i++) {\n                var row = this.getRow(i);\n                var _loop_1 = function (j) {\n                    var column = m1.getColumn(j);\n                    // eslint-disable-next-line max-len\n                    arr[i][j] = row.reduce(function (prev, r, index) {\n                        return prev + r * column[index];\n                    }, 0);\n                };\n                for (var j = 0; j < m1.columns; j++) {\n                    _loop_1(j);\n                }\n            }\n        }\n        return new (Matrix.bind.apply(Matrix, __spreadArray([void 0], __read(arr), false)))();\n    };\n    // \n    Matrix.prototype.to2D = function () {\n        return this.map(function (item) { return [item[0], item[1]]; });\n    };\n    Matrix.prototype.toPoints = function () {\n        return this.map(function (item) { return new Point(item[0], item[1]); });\n    };\n    Matrix.prototype.toString = function () {\n        var _a = __read(this[0], 2), a = _a[0], b = _a[1];\n        var _b = __read(this[1], 2), c = _b[0], d = _b[1];\n        var _c = __read(this[2], 2), e = _c[0], f = _c[1];\n        return \"matrix(\".concat(a, \" \").concat(b, \" \").concat(c, \" \").concat(d, \" \").concat(e, \" \").concat(f, \")\");\n    };\n    Matrix.prototype.translate = function (tx, ty) {\n        return this.cross(new TranslateMatrix(tx, ty));\n    };\n    Matrix.prototype.rotate = function (angle) {\n        return this.cross(new RotateMatrix(angle));\n    };\n    Matrix.prototype.scale = function (sx, sy) {\n        return this.cross(new ScaleMatrix(sx, sy));\n    };\n    return Matrix;\n}(Array));\nexport { Matrix };\nvar RotateMatrix = /** @class */ (function (_super) {\n    __extends(RotateMatrix, _super);\n    function RotateMatrix(theta) {\n        var _this = _super.call(this, new Vector(+Math.cos(theta).toFixed(2), +Math.sin(theta).toFixed(2), 0), new Vector(-Math.sin(theta).toFixed(2), +Math.cos(theta).toFixed(2), 0), new Vector(0, 0, 1)) || this;\n        Object.setPrototypeOf(_this, RotateMatrix.prototype);\n        return _this;\n    }\n    RotateMatrix.prototype.inverse = function () {\n        return this.transpose();\n    };\n    return RotateMatrix;\n}(Matrix));\nexport { RotateMatrix };\nvar ScaleMatrix = /** @class */ (function (_super) {\n    __extends(ScaleMatrix, _super);\n    function ScaleMatrix(sx, sy) {\n        var _this = _super.call(this, new Vector(sx, 0, 0), new Vector(0, sy, 0), new Vector(0, 0, 1)) || this;\n        _this.sx = sx;\n        _this.sy = sy;\n        Object.setPrototypeOf(_this, ScaleMatrix.prototype);\n        return _this;\n    }\n    ScaleMatrix.prototype.inverse = function () {\n        return new ScaleMatrix(1 / this.sx, 1 / this.sy);\n    };\n    return ScaleMatrix;\n}(Matrix));\nexport { ScaleMatrix };\nvar TranslateMatrix = /** @class */ (function (_super) {\n    __extends(TranslateMatrix, _super);\n    function TranslateMatrix(tx, ty) {\n        var _this = _super.call(this, new Vector(1, 0, 0), new Vector(0, 1, 0), new Vector(tx, ty, 1)) || this;\n        _this.tx = tx;\n        _this.ty = ty;\n        Object.setPrototypeOf(_this, TranslateMatrix.prototype);\n        return _this;\n    }\n    TranslateMatrix.prototype.inverse = function () {\n        return new TranslateMatrix(-this.tx, -this.ty);\n    };\n    return TranslateMatrix;\n}(Matrix));\nexport { TranslateMatrix };\n","import { action, observable, computed, toJS, isObservable, configure, reaction, } from 'mobx';\nconfigure({ isolateGlobalState: true });\nexport { action, observable, computed, isObservable, toJS, configure, reaction, };\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { pick } from 'lodash-es';\nimport { getBytesLength } from './edge';\nimport { SegmentDirection } from '../constant';\nimport { isInSegment } from '../algorithm/edge';\nimport { Matrix } from './matrix';\n/*  */\nexport var getAnchors = function (data) {\n    var anchors = data.anchors;\n    return anchors;\n};\n/* index */\nexport var targetNodeInfo = function (position, graphModel) {\n    var nodes = graphModel.nodes;\n    var nodeInfo;\n    for (var i = nodes.length - 1; i >= 0; i--) {\n        var targetNode = nodes[i];\n        var inNode = isInNodeBbox(position, targetNode);\n        if (inNode) {\n            var anchorInfo = targetNode.getTargetAnchor(position);\n            if (anchorInfo) {\n                // \n                var currentNodeInfo = {\n                    node: targetNode,\n                    anchorIndex: anchorInfo.index,\n                    anchor: anchorInfo.anchor,\n                };\n                // fix: 489 \n                if (!nodeInfo || isNodeHigher(targetNode, nodeInfo.node, graphModel)) {\n                    nodeInfo = currentNodeInfo;\n                }\n            }\n        }\n    }\n    return nodeInfo;\n};\n/**\n * \n */\nvar isNodeHigher = function (node1, node2, graphModel) {\n    if (node1.zIndex > node2.zIndex) {\n        return true;\n    }\n    return (graphModel.nodesMap[node1.id].index > graphModel.nodesMap[node2.id].index);\n};\n/*  */\nexport var getClosestAnchor = function (position, node) {\n    var anchors = getAnchors(node);\n    var closest;\n    var minDistance = Number.MAX_SAFE_INTEGER;\n    for (var i = 0; i < anchors.length; i++) {\n        var len = distance(position.x, position.y, anchors[i].x, anchors[i].y);\n        if (len < minDistance) {\n            minDistance = len;\n            closest = {\n                index: i,\n                anchor: __assign(__assign({}, anchors[i]), { x: anchors[i].x, y: anchors[i].y, id: anchors[i].id }),\n            };\n        }\n    }\n    return closest;\n};\n/*  */\nexport var distance = function (x1, y1, x2, y2) { return Math.hypot(x1 - x2, y1 - y2); };\n/* offsetoutline */\nexport var isInNode = function (position, node, offset) {\n    if (offset === void 0) { offset = 0; }\n    var inNode = false;\n    var bBox = getNodeBBox(node);\n    var _a = __read(new Matrix([position.x, position.y, 1])\n        .translate(-node.x, -node.y)\n        .rotate(-node.rotate)\n        .translate(node.x, node.y)[0], 2), x = _a[0], y = _a[1];\n    var reverseRotatedPosition = {\n        x: x,\n        y: y,\n    };\n    if (reverseRotatedPosition.x >= bBox.minX - offset &&\n        reverseRotatedPosition.x <= bBox.maxX + offset &&\n        reverseRotatedPosition.y >= bBox.minY - offset &&\n        reverseRotatedPosition.y <= bBox.maxY + offset) {\n        inNode = true;\n    }\n    return inNode;\n};\nexport var isInNodeBbox = function (position, node) {\n    return isInNode(position, node, 5);\n};\n/* bbox */\nexport var getNodeBBox = function (node) {\n    var x = node.x, y = node.y, width = node.width, height = node.height;\n    return {\n        minX: x - width / 2,\n        minY: y - height / 2,\n        maxX: x + width / 2,\n        maxY: y + height / 2,\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        centerX: x,\n        centerY: y,\n    };\n};\nexport var getRectRadiusCircle = function (node) {\n    var _a = node, x = _a.x, y = _a.y, width = _a.width, height = _a.height, radius = _a.radius;\n    return [\n        {\n            x: x - width / 2 + radius,\n            y: y - height / 2 + radius,\n            r: radius,\n        },\n        {\n            x: x + width / 2 - radius,\n            y: y - height / 2 + radius,\n            r: radius,\n        },\n        {\n            x: x - width / 2 + radius,\n            y: y + height / 2 - radius,\n            r: radius,\n        },\n        {\n            x: x + width / 2 - radius,\n            y: y + height / 2 - radius,\n            r: radius,\n        },\n    ];\n};\nexport var getClosestRadiusCenter = function (point, direction, node) {\n    var radiusCenter = getRectRadiusCircle(node);\n    var closestRadiusPoint;\n    var minDistance = Number.MAX_SAFE_INTEGER;\n    radiusCenter.forEach(function (item) {\n        var radiusDistance = distance(point.x, point.y, item.x, item.y);\n        if (radiusDistance < minDistance) {\n            minDistance = radiusDistance;\n            closestRadiusPoint = item;\n        }\n    });\n    return getCrossPointWithCircle(point, direction, closestRadiusPoint);\n};\n/*  */\nexport var getCrossPointWithCircle = function (point, direction, node) {\n    var crossPoint;\n    var x = node.x, y = node.y, r = node.r;\n    if (direction === SegmentDirection.HORIZONTAL) {\n        // x\n        var crossLeft = x - Math.sqrt(r * r - (point.y - y) * (point.y - y));\n        var crossRight = x + Math.sqrt(r * r - (point.y - y) * (point.y - y));\n        var crossX = Math.abs(crossLeft - point.x) < Math.abs(crossRight - point.x)\n            ? crossLeft\n            : crossRight;\n        crossPoint = {\n            x: crossX,\n            y: point.y,\n        };\n    }\n    else if (direction === SegmentDirection.VERTICAL) {\n        // y\n        var crossTop = y - Math.sqrt(r * r - (point.x - x) * (point.x - x));\n        var crossBottom = y + Math.sqrt(r * r - (point.x - x) * (point.x - x));\n        var crossY = Math.abs(crossTop - point.y) < Math.abs(crossBottom - point.y)\n            ? crossTop\n            : crossBottom;\n        crossPoint = {\n            x: point.x,\n            y: crossY,\n        };\n    }\n    return crossPoint;\n};\n/*  */\nexport var pointEdgeDirection = function (point, node) {\n    var dx = Math.abs(point.x - node.x);\n    var dy = Math.abs(point.y - node.y);\n    return dx / node.width > dy / node.height\n        ? SegmentDirection.VERTICAL\n        : SegmentDirection.HORIZONTAL;\n};\n// \nexport var inStraightLineOfRect = function (point, node) {\n    var rect = node;\n    var isInStraight = false;\n    var x = rect.x, y = rect.y, width = rect.width, height = rect.height, radius = rect.radius;\n    var rectBox = {\n        minX: x - width / 2 + radius,\n        maxX: x + width / 2 - radius,\n        minY: y - height / 2 + radius,\n        maxY: y + height / 2 - radius,\n    };\n    if (point.y === y + height / 2 || point.y === y - height / 2) {\n        isInStraight = point.x > rectBox.minX && point.x < rectBox.maxX;\n    }\n    else if (point.x === x + width / 2 || point.x === x - width / 2) {\n        isInStraight = point.y > rectBox.minY && point.y < rectBox.maxY;\n    }\n    return isInStraight;\n};\n/*  */\nexport var getCrossPointWithEllipse = function (point, direction, node) {\n    var crossPoint;\n    var _a = node, x = _a.x, y = _a.y, rx = _a.rx, ry = _a.ry;\n    if (direction === SegmentDirection.HORIZONTAL) {\n        // \n        var crossLeft = x -\n            Math.sqrt(rx * rx - ((point.y - y) * (point.y - y) * rx * rx) / (ry * ry));\n        var crossRight = x +\n            Math.sqrt(rx * rx - ((point.y - y) * (point.y - y) * rx * rx) / (ry * ry));\n        var crossX = Math.abs(crossLeft - point.x) < Math.abs(crossRight - point.x)\n            ? crossLeft\n            : crossRight;\n        crossPoint = {\n            x: crossX,\n            y: point.y,\n        };\n    }\n    else if (direction === SegmentDirection.VERTICAL) {\n        // \n        var crossTop = y -\n            Math.sqrt(ry * ry - ((point.x - x) * (point.x - x) * ry * ry) / (rx * rx));\n        var crossBottom = y +\n            Math.sqrt(ry * ry - ((point.x - x) * (point.x - x) * ry * ry) / (rx * rx));\n        var crossY = Math.abs(crossTop - point.y) < Math.abs(crossBottom - point.y)\n            ? crossTop\n            : crossBottom;\n        crossPoint = {\n            x: point.x,\n            y: crossY,\n        };\n    }\n    return crossPoint;\n};\n/*  */\nexport var getCrossPointWithPolygon = function (point, direction, node) {\n    var pointsPosition = node.pointsPosition;\n    var minDistance = Number.MAX_SAFE_INTEGER;\n    var crossPoint;\n    var segments = [];\n    for (var i = 0; i < pointsPosition.length; i++) {\n        segments.push({\n            start: pointsPosition[i],\n            end: pointsPosition[(i + 1) % pointsPosition.length],\n        });\n    }\n    segments.forEach(function (item) {\n        var start = item.start, end = item.end;\n        var a = start;\n        var b = end;\n        if (start.x > end.x) {\n            a = end;\n            b = start;\n        }\n        var pointXY = {\n            x: point.x,\n            y: point.y,\n        };\n        // ,\n        if (a.x === b.x && direction === SegmentDirection.HORIZONTAL) {\n            pointXY = {\n                x: a.x,\n                y: point.y,\n            };\n        }\n        // ,\n        if (a.y === b.y && direction === SegmentDirection.VERTICAL) {\n            pointXY = {\n                x: point.x,\n                y: a.y,\n            };\n        }\n        // , \n        if (a.x !== b.x && a.y !== b.y) {\n            var k = (b.y - a.y) / (b.x - a.x);\n            var m = (a.x * b.y - b.x * a.y) / (a.x - b.x);\n            if (direction === SegmentDirection.HORIZONTAL) {\n                pointXY = {\n                    x: (point.y - m) / k,\n                    y: point.y,\n                };\n            }\n            else if (direction === SegmentDirection.VERTICAL) {\n                pointXY = {\n                    x: point.x,\n                    y: k * point.x + m,\n                };\n            }\n        }\n        // \n        var inSegment = isInSegment(pointXY, start, end);\n        if (inSegment) {\n            var currentDistance = distance(pointXY.x, pointXY.y, point.x, point.y);\n            if (currentDistance < minDistance) {\n                minDistance = currentDistance;\n                crossPoint = pointXY;\n            }\n        }\n    });\n    return crossPoint;\n};\n// \nexport var pickNodeConfig = function (data) {\n    var nodeData = pick(data, [\n        'id',\n        'type',\n        'x',\n        'y',\n        'text',\n        'label',\n        'properties',\n        'virtual', // dnd\n        'rotate',\n        // TODO: \n        'resizable',\n        'rotatable',\n    ]);\n    return nodeData;\n};\n/**\n * \n */\nexport var getNodeAnchorPosition = function (center, point, width, height) {\n    var x = center.x, y = center.y;\n    if (point.x > center.x) {\n        x = center.x + width / 2;\n    }\n    else if (point.x < center.x) {\n        x = center.x - width / 2;\n    }\n    if (point.y > center.y) {\n        y = center.y + height / 2;\n    }\n    else if (point.y < center.y) {\n        y = center.y - height / 2;\n    }\n    return {\n        x: x,\n        y: y,\n    };\n};\n/*********************************************************\n * Text \n ********************************************************/\n// Text \n// TODO:  dom \n// function getTextHeight(text: string, font: string): number {\n//   const span = document.createElement('span');\n//   span.textContent = text;\n//   span.style.font = font;\n//   const range = document.createRange();\n//   range.selectNodeContents(span);\n//   const rect = range.getBoundingClientRect();\n//   const height = rect.height;\n//   return height;\n// }\n//  dom \nexport var getHtmlTextHeight = function (_a) {\n    var rows = _a.rows, style = _a.style, rowsLength = _a.rowsLength, className = _a.className;\n    var dom = document.createElement('div');\n    dom.className = className;\n    dom.style.fontSize = \"\".concat(style.fontSize);\n    dom.style.width = \"\".concat(style.width);\n    dom.style.lineHeight = \"\".concat(style.lineHeight);\n    dom.style.padding = \"\".concat(style.padding);\n    if (style.fontFamily) {\n        dom.style.fontFamily = \"\".concat(style.fontFamily);\n    }\n    if (rowsLength > 1) {\n        rows.forEach(function (row) {\n            var rowDom = document.createElement('div');\n            rowDom.textContent = row;\n            dom.appendChild(rowDom);\n        });\n    }\n    else {\n        dom.textContent = rows[0];\n    }\n    document.body.appendChild(dom);\n    var height = dom.clientHeight;\n    document.body.removeChild(dom);\n    return height;\n};\n// dom\nexport var getSvgTextWidthHeight = function (_a) {\n    var rows = _a.rows, rowsLength = _a.rowsLength, fontSize = _a.fontSize;\n    var longestBytes = 0;\n    rows &&\n        rows.forEach(function (item) {\n            var rowByteLength = getBytesLength(item);\n            longestBytes = rowByteLength > longestBytes ? rowByteLength : longestBytes;\n        });\n    // /2 * fontsize + 2\n    //   * fontsize + 2\n    return {\n        width: Math.ceil(longestBytes / 2) * fontSize + fontSize / 4,\n        height: rowsLength * (fontSize + 2) + fontSize / 4,\n    };\n};\n/**\n * @description \n */\nexport var formatAnchorConnectValidateData = function (data) {\n    if (typeof data !== 'object') {\n        return {\n            isAllPass: !!data,\n            msg: data ? '' : '',\n        };\n    }\n    return data;\n};\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","import { v4 as uuidV4 } from 'uuid';\nexport var createUuid = function () { return uuidV4(); };\n/**\n * id\n */\nexport var refreshGraphId = function (graphData, prefix) {\n    if (prefix === void 0) { prefix = ''; }\n    var nodeIdMap = graphData.nodes.reduce(function (nMap, node) {\n        nMap[node.id] = prefix + uuidV4();\n        node.id = nMap[node.id];\n        return nMap;\n    }, {});\n    graphData.edges.forEach(function (edge) {\n        edge.id = prefix + uuidV4();\n        edge.sourceNodeId = nodeIdMap[edge.sourceNodeId];\n        edge.targetNodeId = nodeIdMap[edge.targetNodeId];\n    });\n    return graphData;\n};\n","import { createUuid } from './uuid';\nvar rafIdMap = new Map();\nexport var createRaf = function (callback) {\n    var rafId = createUuid();\n    function run() {\n        callback();\n        var eId = rafIdMap.get(rafId);\n        if (eId) {\n            var nId = window.requestAnimationFrame(run);\n            rafIdMap.set(rafId, nId);\n        }\n    }\n    var id = window.requestAnimationFrame(run);\n    rafIdMap.set(rafId, id);\n    return rafId;\n};\nexport var cancelRaf = function (rafId) {\n    var eId = rafIdMap.get(rafId);\n    if (eId) {\n        window.cancelAnimationFrame(eId);\n        rafIdMap.delete(rafId);\n    }\n};\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { jsx as _jsx } from \"preact/jsx-runtime\";\nimport { ElementType, ModelType } from '../../constant';\nimport { getHtmlTextHeight } from '../../util';\nimport { forEach, toPairs } from 'lodash-es';\nexport function Text(props) {\n    var _a = props.x, x = _a === void 0 ? 0 : _a, _b = props.y, y = _b === void 0 ? 0 : _b, value = props.value, _c = props.fontSize, fontSize = _c === void 0 ? 12 : _c, _d = props.fill, fill = _d === void 0 ? 'currentColor' : _d, _e = props.overflowMode, overflowMode = _e === void 0 ? 'default' : _e, \n    // TODO:  textWidth  '' \n    _f = props.textWidth, \n    // TODO:  textWidth  '' \n    textWidth = _f === void 0 ? undefined : _f, model = props.model;\n    var attrs = {\n        x: x,\n        y: y,\n        fill: fill,\n        fontSize: fontSize,\n        textAnchor: 'middle',\n        dominantBaseline: 'central',\n        // ...props,\n    };\n    forEach(toPairs(props), function (_a) {\n        var _b = __read(_a, 2), k = _b[0], v = _b[1];\n        if (typeof v !== 'object') {\n            attrs[k] = v;\n        }\n    });\n    if (value) {\n        // String(value)\n        // TODO:  value  \\n \\r \n        var rows = String(value).split(/[\\r\\n]/g);\n        var rowsLength_1 = rows.length;\n        if (overflowMode !== 'default') {\n            //  textWidth\n            var BaseType = model.BaseType, modelType = model.modelType;\n            if ((BaseType === ElementType.NODE && modelType !== ModelType.TEXT_NODE) ||\n                (BaseType === ElementType.EDGE && textWidth)) {\n                return renderHtmlText(props);\n            }\n        }\n        if (rowsLength_1 > 1) {\n            var tSpans = rows.map(function (row, idx) {\n                //  Y  * \n                var tSpanLineHeight = fontSize + 2;\n                var offsetY = (idx - (rowsLength_1 - 1) / 2) * tSpanLineHeight;\n                return (_jsx(\"tspan\", { className: \"lf-text-tspan\", x: x, y: y + offsetY, children: row }));\n            });\n            return _jsx(\"text\", __assign({}, attrs, { children: tSpans }));\n        }\n        return _jsx(\"text\", __assign({}, attrs, { children: value }));\n    }\n    return null;\n}\nexport function renderHtmlText(props) {\n    var x = props.x, y = props.y, value = props.value, model = props.model, textWidth = props.textWidth, _a = props.fontSize, fontSize = _a === void 0 ? 12 : _a, lineHeight = props.lineHeight, _b = props.fontFamily, fontFamily = _b === void 0 ? '' : _b, _c = props.wrapPadding, wrapPadding = _c === void 0 ? '0, 0' : _c, overflowMode = props.overflowMode;\n    var width = model.width, height = model.height, textHeight = model.textHeight;\n    // TODO:  textWidth  \n    var textRealWidth = textWidth || width;\n    var rows = String(value).split(/[\\r\\n]/g);\n    var rowsLength = rows.length;\n    var textRealHeight = getHtmlTextHeight({\n        rows: rows,\n        style: {\n            fontSize: \"\".concat(fontSize, \"px\"),\n            width: \"\".concat(textRealWidth, \"px\"),\n            fontFamily: fontFamily,\n            lineHeight: lineHeight,\n            padding: wrapPadding,\n        },\n        rowsLength: rowsLength,\n        className: 'lf-get-text-height',\n    });\n    // \n    var foreignObjectHeight = height > textRealHeight ? height : textRealHeight;\n    // \n    if (textHeight) {\n        foreignObjectHeight = textHeight;\n    }\n    var isEllipsis = overflowMode === 'ellipsis';\n    if (isEllipsis) {\n        foreignObjectHeight = fontSize + 2;\n    }\n    return (_jsx(\"g\", { children: _jsx(\"foreignObject\", { width: textRealWidth, height: foreignObjectHeight, x: x - textRealWidth / 2, y: y - foreignObjectHeight / 2, style: { overflow: 'visible', textAlign: 'left' }, children: _jsx(\"div\", { className: \"lf-node-text-auto-wrap\", style: {\n                    minHeight: foreignObjectHeight,\n                    width: textRealWidth,\n                    padding: wrapPadding,\n                }, children: _jsx(\"div\", { className: isEllipsis\n                        ? 'lf-node-text-ellipsis-content'\n                        : 'lf-node-text-auto-wrap-content', title: isEllipsis ? rows.join('') : '', style: __assign({}, props), children: rows.map(function (row) { return (_jsx(\"div\", { className: \"lf-node-text--auto-wrap-inner\", children: row })); }) }) }) }) }));\n}\nexport default Text;\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { jsx as _jsx } from \"preact/jsx-runtime\";\nimport { forEach, toPairs } from 'lodash-es';\nexport function Line(props) {\n    var attrs = {\n        // default\n        x1: 10,\n        y1: 10,\n        x2: 20,\n        y2: 20,\n        stroke: 'black',\n        // ...props\n    };\n    forEach(toPairs(props), function (_a) {\n        var _b = __read(_a, 2), k = _b[0], v = _b[1];\n        if (k === 'style') {\n            attrs[k] = v;\n        }\n        else if (typeof v !== 'object') {\n            attrs[k] = v;\n        }\n    });\n    return _jsx(\"line\", __assign({}, attrs));\n}\nexport default Line;\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { jsx as _jsx } from \"preact/jsx-runtime\";\nimport { forEach, toPairs } from 'lodash-es';\nexport function Rect(props) {\n    var x = props.x, y = props.y, width = props.width, height = props.height, className = props.className, strokeWidth = props.strokeWidth, _a = props.radius, radius = _a === void 0 ? 0 : _a;\n    var leftTopX = x - width / 2;\n    var leftTopY = y - height / 2;\n    var attrs = {};\n    attrs['stroke-width'] = strokeWidth;\n    forEach(toPairs(props), function (_a) {\n        var _b = __read(_a, 2), k = _b[0], v = _b[1];\n        if (typeof v !== 'object') {\n            attrs[k] = v;\n        }\n    });\n    if (className) {\n        attrs.className = \"lf-basic-shape \".concat(className);\n    }\n    else {\n        attrs.className = 'lf-basic-shape';\n    }\n    if (radius) {\n        attrs.rx = radius;\n        attrs.ry = radius;\n    }\n    attrs.x = leftTopX;\n    attrs.y = leftTopY;\n    return _jsx(\"rect\", __assign({}, attrs));\n}\nexport default Rect;\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { jsx as _jsx } from \"preact/jsx-runtime\";\nimport { forEach, toPairs } from 'lodash-es';\nexport function Path(props) {\n    var attrs = {\n        d: '',\n    };\n    forEach(toPairs(props), function (_a) {\n        var _b = __read(_a, 2), k = _b[0], v = _b[1];\n        if (k === 'style' || typeof v !== 'object') {\n            attrs[k] = v;\n        }\n    });\n    return _jsx(\"path\", __assign({}, attrs));\n}\nexport default Path;\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { jsx as _jsx } from \"preact/jsx-runtime\";\nimport { forEach, toPairs } from 'lodash-es';\nexport function Circle(props) {\n    var _a = props.x, x = _a === void 0 ? 0 : _a, _b = props.y, y = _b === void 0 ? 0 : _b, _c = props.r, r = _c === void 0 ? 4 : _c, className = props.className;\n    var attrs = {\n        cx: x,\n        cy: y,\n        r: r,\n        fill: 'transparent',\n        fillOpacity: 1,\n        strokeWidth: 1,\n        stroke: '#000',\n        strokeOpacity: 1,\n    };\n    forEach(toPairs(props), function (_a) {\n        var _b = __read(_a, 2), k = _b[0], v = _b[1];\n        if (typeof v !== 'object') {\n            attrs[k] = v;\n        }\n    });\n    if (className) {\n        attrs.className = \"lf-basic-shape \".concat(className);\n    }\n    else {\n        attrs.className = \"lf-basic-shape\";\n    }\n    return _jsx(\"circle\", __assign({}, attrs));\n}\nexport default Circle;\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { jsx as _jsx } from \"preact/jsx-runtime\";\nimport { forEach, toPairs } from 'lodash-es';\nexport function Ellipse(props) {\n    var _a = props.x, x = _a === void 0 ? 0 : _a, _b = props.y, y = _b === void 0 ? 0 : _b, _c = props.rx, rx = _c === void 0 ? 4 : _c, _d = props.ry, ry = _d === void 0 ? 4 : _d, className = props.className;\n    var attrs = {\n        cx: x,\n        cy: y,\n        rx: rx,\n        ry: ry,\n        fill: 'transparent',\n        fillOpacity: 1,\n        strokeWidth: 1,\n        stroke: '#000',\n        strokeOpacity: 1,\n    };\n    forEach(toPairs(props), function (_a) {\n        var _b = __read(_a, 2), k = _b[0], v = _b[1];\n        if (typeof v !== 'object') {\n            attrs[k] = v;\n        }\n    });\n    if (className) {\n        attrs.className = \"lf-basic-shape \".concat(className);\n    }\n    else {\n        attrs.className = \"lf-basic-shape\";\n    }\n    return _jsx(\"ellipse\", __assign({}, attrs));\n}\nexport default Ellipse;\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { jsx as _jsx } from \"preact/jsx-runtime\";\nimport { forEach, toPairs } from 'lodash-es';\n/**\n * \n * @param points \n * @param radius \n * @returns SVG \n */\nexport function createRoundedPolygonPath(points, radius) {\n    var pointList = points.map(function (point) { return ({ x: point[0], y: point[1] }); });\n    var len = pointList.length;\n    if (len < 3)\n        return '';\n    var r = Math.abs(radius);\n    var path = '';\n    for (var i = 0; i < len; i++) {\n        var prev = pointList[(i - 1 + len) % len];\n        var curr = pointList[i];\n        var next = pointList[(i + 1) % len];\n        // \n        var v1 = { x: curr.x - prev.x, y: curr.y - prev.y };\n        var v2 = { x: next.x - curr.x, y: next.y - curr.y };\n        // \n        var len1 = Math.hypot(v1.x, v1.y);\n        var len2 = Math.hypot(v2.x, v2.y);\n        var u1 = { x: v1.x / len1, y: v1.y / len1 };\n        var u2 = { x: v2.x / len2, y: v2.y / len2 };\n        //  = curr - u1 * r = curr + u2 * r\n        var start = { x: curr.x - u1.x * r, y: curr.y - u1.y * r };\n        var end = { x: curr.x + u2.x * r, y: curr.y + u2.y * r };\n        if (i === 0) {\n            path += \"M \".concat(start.x, \" \").concat(start.y, \" \");\n        }\n        else {\n            path += \"L \".concat(start.x, \" \").concat(start.y, \" \");\n        }\n        // Q \n        path += \"Q \".concat(curr.x, \" \").concat(curr.y, \" \").concat(end.x, \" \").concat(end.y, \" \");\n    }\n    path += 'Z';\n    return path;\n}\nexport function Polygon(props) {\n    var _a = props.points, points = _a === void 0 ? [] : _a, className = props.className, radius = props.radius;\n    var attrs = {\n        fill: 'transparent',\n        fillOpacity: 1,\n        strokeWidth: 1,\n        stroke: '#000',\n        strokeOpacity: 1,\n        points: '',\n    };\n    forEach(toPairs(props), function (_a) {\n        var _b = __read(_a, 2), k = _b[0], v = _b[1];\n        if (typeof v !== 'object') {\n            attrs[k] = v;\n        }\n    });\n    if (className) {\n        attrs.classNmae = \"lf-basic-shape \".concat(className);\n    }\n    else {\n        attrs.className = 'lf-basic-shape';\n    }\n    if (radius) {\n        var path = createRoundedPolygonPath(points, radius);\n        attrs.d = path;\n        return _jsx(\"path\", __assign({}, attrs));\n    }\n    else {\n        attrs.points = points.map(function (point) { return point.join(','); }).join(' ');\n        return _jsx(\"polygon\", __assign({}, attrs));\n    }\n}\nexport default Polygon;\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { jsx as _jsx } from \"preact/jsx-runtime\";\nimport { forEach, toPairs } from 'lodash-es';\nexport function Polyline(props) {\n    var className = props.className;\n    var attrs = {\n        points: '',\n        fill: 'none',\n    };\n    forEach(toPairs(props), function (_a) {\n        var _b = __read(_a, 2), k = _b[0], v = _b[1];\n        if (k === 'style') {\n            attrs[k] = v;\n        }\n        else if (typeof v !== 'object') {\n            attrs[k] = v;\n        }\n    });\n    if (className) {\n        attrs.className = \"\".concat(className);\n    }\n    return _jsx(\"polyline\", __assign({}, attrs));\n}\nexport default Polyline;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { Component } from 'preact/compat';\nimport { find, forEach, map, cloneDeep } from 'lodash-es';\nimport { Rect } from './shape';\nimport { getNodeBBox, StepDrag, handleResize } from '../util';\nimport { EventType } from '../constant';\nexport var ResizeControlIndex;\n(function (ResizeControlIndex) {\n    ResizeControlIndex[ResizeControlIndex[\"LEFT_TOP\"] = 0] = \"LEFT_TOP\";\n    ResizeControlIndex[ResizeControlIndex[\"RIGHT_TOP\"] = 1] = \"RIGHT_TOP\";\n    ResizeControlIndex[ResizeControlIndex[\"RIGHT_BOTTOM\"] = 2] = \"RIGHT_BOTTOM\";\n    ResizeControlIndex[ResizeControlIndex[\"LEFT_BOTTOM\"] = 3] = \"LEFT_BOTTOM\";\n})(ResizeControlIndex || (ResizeControlIndex = {}));\nvar ResizeControl = /** @class */ (function (_super) {\n    __extends(ResizeControl, _super);\n    function ResizeControl(props) {\n        var _this = _super.call(this) || this;\n        //Shift\n        _this.isShiftPressed = false;\n        //\n        _this.bindKeyboardEvents = function () {\n            document.addEventListener('keydown', _this.handleKeyDown);\n            document.addEventListener('keyup', _this.handleKeyUp);\n        };\n        //\n        _this.handleKeyDown = function (event) {\n            if (event.key === 'Shift') {\n                _this.isShiftPressed = true;\n            }\n        };\n        _this.handleKeyUp = function (event) {\n            if (event.key === 'Shift') {\n                _this.isShiftPressed = false;\n            }\n        };\n        _this.updateEdgePointByAnchors = function () {\n            // https://github.com/didi/LogicFlow/issues/807\n            // https://github.com/didi/LogicFlow/issues/875\n            // RectgetRectResizeEdgePoint()point\n            // getRectResizeEdgePoint()4\n            // \n            // const pct = (y - beforeNode.y) / (beforeNode.height / 2 - radius)\n            // afterPoint.y = afterNode.y + (afterNode.height / 2 - radius) * pct\n            // getDefaultAnchor()\n            //  x: x + 20x20\n            // \n            var _a = _this.nodeModel, id = _a.id, anchors = _a.anchors;\n            var edges = _this.graphModel.getNodeEdges(id);\n            // \n            forEach(edges, function (edge) {\n                if (edge.sourceNodeId === id) {\n                    //  sourceNode \n                    var anchorItem = find(anchors, function (anchor) { return anchor.id === edge.sourceAnchorId; });\n                    if (anchorItem) {\n                        edge.updateStartPoint({\n                            x: anchorItem.x,\n                            y: anchorItem.y,\n                        });\n                    }\n                }\n                else if (edge.targetNodeId === id) {\n                    //  targetNode \n                    var anchorItem = find(anchors, function (anchor) { return anchor.id === edge.targetAnchorId; });\n                    if (anchorItem) {\n                        edge.updateEndPoint({\n                            x: anchorItem.x,\n                            y: anchorItem.y,\n                        });\n                    }\n                }\n            });\n        };\n        _this.triggerResizeEvent = function (preNodeData, curNodeData, deltaX, deltaY, index, nodeModel) {\n            _this.graphModel.eventCenter.emit(EventType.NODE_RESIZE, {\n                preData: preNodeData,\n                data: curNodeData,\n                deltaX: deltaX,\n                deltaY: deltaY,\n                index: index,\n                model: nodeModel,\n            });\n        };\n        /**\n         *  Control \n         * @param index\n         * @param resizeInfo\n         * @param pct\n         * @param freezeWidth\n         * @param freezeHeight\n         */\n        _this.recalcResizeInfo = function (index, resizeInfo, pct, freezeWidth, freezeHeight) {\n            if (pct === void 0) { pct = 1; }\n            if (freezeWidth === void 0) { freezeWidth = false; }\n            if (freezeHeight === void 0) { freezeHeight = false; }\n            var nextResizeInfo = cloneDeep(resizeInfo);\n            var deltaX = nextResizeInfo.deltaX, deltaY = nextResizeInfo.deltaY;\n            var width = nextResizeInfo.width, height = nextResizeInfo.height, PCTResizeInfo = nextResizeInfo.PCTResizeInfo;\n            if (PCTResizeInfo) {\n                var sensitivity = 4; // \n                var deltaScale = 0;\n                var combineDelta = 0;\n                switch (index) {\n                    case ResizeControlIndex.LEFT_TOP:\n                        combineDelta = (deltaX * -1 - deltaY) / sensitivity;\n                        break;\n                    case ResizeControlIndex.RIGHT_TOP:\n                        combineDelta = (deltaX - deltaY) / sensitivity;\n                        break;\n                    case ResizeControlIndex.RIGHT_BOTTOM:\n                        combineDelta = (deltaX + deltaY) / sensitivity;\n                        break;\n                    case ResizeControlIndex.LEFT_BOTTOM:\n                        combineDelta = (deltaX * -1 + deltaY) / sensitivity;\n                        break;\n                    default:\n                        break;\n                }\n                if (combineDelta !== 0) {\n                    deltaScale =\n                        Math.round((combineDelta / PCTResizeInfo.ResizeBasis.basisHeight) * 100000) / 1000;\n                }\n                PCTResizeInfo.ResizePCT.widthPCT = Math.max(Math.min(PCTResizeInfo.ResizePCT.widthPCT + deltaScale, PCTResizeInfo.ScaleLimit.maxScaleLimit), PCTResizeInfo.ScaleLimit.minScaleLimit);\n                PCTResizeInfo.ResizePCT.heightPCT = Math.max(Math.min(PCTResizeInfo.ResizePCT.heightPCT + deltaScale, PCTResizeInfo.ScaleLimit.maxScaleLimit), PCTResizeInfo.ScaleLimit.minScaleLimit);\n                var spcWidth = Math.round((PCTResizeInfo.ResizePCT.widthPCT *\n                    PCTResizeInfo.ResizeBasis.basisWidth) /\n                    100);\n                var spcHeight = Math.round((PCTResizeInfo.ResizePCT.heightPCT *\n                    PCTResizeInfo.ResizeBasis.basisHeight) /\n                    100);\n                switch (index) {\n                    case ResizeControlIndex.LEFT_TOP:\n                        deltaX = width - spcWidth;\n                        deltaY = height - spcHeight;\n                        break;\n                    case ResizeControlIndex.RIGHT_TOP:\n                        deltaX = spcWidth - width;\n                        deltaY = height - spcHeight;\n                        break;\n                    case ResizeControlIndex.RIGHT_BOTTOM:\n                        deltaX = spcWidth - width;\n                        deltaY = spcHeight - height;\n                        break;\n                    case ResizeControlIndex.LEFT_BOTTOM:\n                        deltaX = width - spcWidth;\n                        deltaY = spcHeight - height;\n                        break;\n                    default:\n                        break;\n                }\n                return nextResizeInfo;\n            }\n            // / width/height \n            switch (index) {\n                case ResizeControlIndex.LEFT_TOP:\n                    nextResizeInfo.width = freezeWidth ? width : width - deltaX * pct;\n                    nextResizeInfo.height = freezeHeight ? height : height - deltaY * pct;\n                    break;\n                case ResizeControlIndex.RIGHT_TOP:\n                    nextResizeInfo.width = freezeWidth ? width : width + deltaX * pct;\n                    nextResizeInfo.height = freezeHeight ? height : height - deltaY * pct;\n                    break;\n                case ResizeControlIndex.RIGHT_BOTTOM:\n                    nextResizeInfo.width = freezeWidth ? width : width + deltaX * pct;\n                    nextResizeInfo.height = freezeHeight ? height : height + deltaY * pct;\n                    break;\n                case ResizeControlIndex.LEFT_BOTTOM:\n                    nextResizeInfo.width = freezeWidth ? width : width - deltaX * pct;\n                    nextResizeInfo.height = freezeHeight ? height : height + deltaY * pct;\n                    break;\n                default:\n                    break;\n            }\n            return nextResizeInfo;\n        };\n        _this.resizeNode = function (_a) {\n            var deltaX = _a.deltaX, deltaY = _a.deltaY;\n            var index = _this.index;\n            var _b = _this.props, model = _b.model, graphModel = _b.graphModel, x = _b.x, y = _b.y;\n            // DONE:  updateNode \n            handleResize({\n                x: x,\n                y: y,\n                deltaX: deltaX,\n                deltaY: deltaY,\n                index: index,\n                nodeModel: model,\n                graphModel: graphModel,\n                forceProportional: _this.isShiftPressed,\n                cancelCallback: function () {\n                    _this.dragHandler.cancelDrag();\n                },\n            });\n            // 1.  Control \n            // const {\n            //   r, // circle\n            //   rx, // ellipse/diamond\n            //   ry,\n            //   width, // rect/html\n            //   height,\n            //   PCTResizeInfo,\n            //\n            //   minWidth,\n            //   minHeight,\n            //   maxWidth,\n            //   maxHeight,\n            // } = this.nodeModel\n            // const isFreezeWidth = minWidth === maxWidth\n            // const isFreezeHeight = minHeight === maxHeight\n            //\n            // const resizeInfo = {\n            //   width: r || rx || width,\n            //   height: r || ry || height,\n            //   deltaX,\n            //   deltaY,\n            //   PCTResizeInfo,\n            // }\n            //\n            // const pct = r || (rx && ry) ? 1 / 2 : 1\n            // const nextSize = this.recalcResizeInfo(\n            //   this.index,\n            //   resizeInfo,\n            //   pct,\n            //   isFreezeWidth,\n            //   isFreezeHeight,\n            // )\n            //\n            // // \n            // if (\n            //   nextSize.width < minWidth ||\n            //   nextSize.width > maxWidth ||\n            //   nextSize.height < minHeight ||\n            //   nextSize.height > maxHeight\n            // ) {\n            //   this.dragHandler.cancelDrag()\n            //   return\n            // }\n            // //  x/y \n            // nextSize.deltaX = isFreezeWidth ? 0 : nextSize.deltaX\n            // nextSize.deltaY = isFreezeWidth ? 0 : nextSize.deltaY\n            //\n            // const preNodeData = this.nodeModel.getData()\n            // const curNodeData = this.nodeModel.resize(nextSize)\n            //\n            // // \n            // this.updateEdgePointByAnchors()\n            // //  resize \n            // this.triggerResizeEvent(preNodeData, curNodeData, deltaX, deltaY, this.index, this.nodeModel)\n        };\n        _this.onDragStart = function () {\n            _this.graphModel.selectNodeById(_this.nodeModel.id);\n        };\n        _this.onDragging = function (_a) {\n            var deltaX = _a.deltaX, deltaY = _a.deltaY;\n            var transformModel = _this.graphModel.transformModel;\n            var _b = __read(transformModel.fixDeltaXY(deltaX, deltaY), 2), dx = _b[0], dy = _b[1];\n            _this.resizeNode({\n                deltaX: dx,\n                deltaY: dy,\n            });\n        };\n        //  grid \n        _this.onDragEnd = function () {\n            // TODO:  gridSize \n            // const { gridSize = 1 } = this.graphModel\n            // const x = gridSize * Math.round(this.nodeModel.x / gridSize)\n            // const y = gridSize * Math.round(this.nodeModel.y / gridSize)\n            var x = _this.nodeModel.x;\n            var y = _this.nodeModel.y;\n            _this.nodeModel.moveTo(x, y);\n            //  onDragging() ->  ->  getDefaultAnchor() onDragging()\n            //  anchors  Point \n            //  anchors \n            _this.updateEdgePointByAnchors();\n        };\n        var index = props.index, model = props.model, graphModel = props.graphModel;\n        _this.index = index;\n        _this.nodeModel = model;\n        _this.graphModel = graphModel;\n        _this.dragHandler = new StepDrag({\n            onDragStart: _this.onDragStart,\n            onDragging: _this.onDragging,\n            onDragEnd: _this.onDragEnd,\n            step: graphModel.gridSize,\n        });\n        _this.bindKeyboardEvents();\n        return _this;\n    }\n    ResizeControl.prototype.componentWillUnmount = function () {\n        this.dragHandler.destroy();\n        document.removeEventListener('keydown', this.handleKeyDown);\n        document.removeEventListener('keyup', this.handleKeyUp);\n    };\n    ResizeControl.prototype.render = function () {\n        var _a = this.props, x = _a.x, y = _a.y, direction = _a.direction, model = _a.model;\n        var _b = model.getResizeControlStyle(), width = _b.width, height = _b.height, restStyle = __rest(_b, [\"width\", \"height\"]);\n        return (_jsxs(\"g\", { className: \"lf-resize-control lf-resize-control-\".concat(direction), children: [_jsx(Rect, __assign({ className: \"lf-resize-control-content\", x: x, y: y, width: width !== null && width !== void 0 ? width : 7, height: height !== null && height !== void 0 ? height : 7 }, restStyle)), _jsx(Rect, { className: \"lf-resize-control-content\", x: x, y: y, width: 25, height: 25, fill: \"transparent\", stroke: \"transparent\", onPointerDown: this.dragHandler.handleMouseDown })] }));\n    };\n    return ResizeControl;\n}(Component));\nexport { ResizeControl };\nvar ResizeControlGroup = /** @class */ (function (_super) {\n    __extends(ResizeControlGroup, _super);\n    function ResizeControlGroup() {\n        return _super.call(this) || this;\n    }\n    ResizeControlGroup.prototype.getResizeControl = function () {\n        var _a = this.props, model = _a.model, graphModel = _a.graphModel;\n        var _b = getNodeBBox(model), minX = _b.minX, minY = _b.minY, maxX = _b.maxX, maxY = _b.maxY;\n        var controlList = [\n            {\n                index: ResizeControlIndex.LEFT_TOP,\n                direction: 'nw',\n                x: minX,\n                y: minY,\n            }, // \n            {\n                index: ResizeControlIndex.RIGHT_TOP,\n                direction: 'ne',\n                x: maxX,\n                y: minY,\n            }, // \n            {\n                index: ResizeControlIndex.RIGHT_BOTTOM,\n                direction: 'se',\n                x: maxX,\n                y: maxY,\n            }, // \n            {\n                index: ResizeControlIndex.LEFT_BOTTOM,\n                direction: 'sw',\n                x: minX,\n                y: maxY,\n            }, // \n        ];\n        return map(controlList, function (control) { return (_jsx(ResizeControl, __assign({}, control, { model: model, graphModel: graphModel }))); });\n    };\n    ResizeControlGroup.prototype.getResizeOutline = function () {\n        var model = this.props.model;\n        var x = model.x, y = model.y, width = model.width, height = model.height;\n        var style = model.getResizeOutlineStyle();\n        return _jsx(Rect, __assign({}, style, { x: x, y: y, width: width, height: height }));\n    };\n    ResizeControlGroup.prototype.render = function () {\n        return (_jsxs(\"g\", { className: \"lf-resize-control-group\", children: [this.getResizeOutline(), this.getResizeControl()] }));\n    };\n    return ResizeControlGroup;\n}(Component));\nexport { ResizeControlGroup };\nexport default ResizeControlGroup;\n","/**\n * \n */\nexport function getNewCenter(startPoint, endPoint) {\n    var x1 = startPoint.x, y1 = startPoint.y;\n    var x2 = endPoint.x, y2 = endPoint.y;\n    var newCenter = {\n        x: x1 + (x2 - x1) / 2,\n        y: y1 + (y2 - y1) / 2,\n    };\n    return newCenter;\n}\n/**\n * angle\n * @param p \n * @param center \n * @param angle \n */\nexport function calculatePointAfterRotateAngle(p, center, angle) {\n    var radian = angleToRadian(angle);\n    var dx = p.x - center.x;\n    var dy = p.y - center.y;\n    var x = dx * Math.cos(radian) - dy * Math.sin(radian) + center.x;\n    var y = dx * Math.sin(radian) + dy * Math.cos(radian) + center.y;\n    return {\n        x: x,\n        y: y,\n    };\n}\n/**\n * \n * @param angle \n */\nexport function angleToRadian(angle) {\n    return (angle * Math.PI) / 180;\n}\n/**\n * \n * @param radian \n */\nexport function radianToAngle(radian) {\n    return (radian / Math.PI) * 180;\n}\n","import { ResizeControlIndex } from '../view/Control';\nimport { cloneDeep, find, forEach } from 'lodash-es';\nimport { EventType } from '../constant';\nimport { calculatePointAfterRotateAngle, getNewCenter, radianToAngle, } from '../algorithm/rotate';\nexport function calculateWidthAndHeight(startRotatedTouchControlPoint, endRotatedTouchControlPoint, oldCenter, angle, freezeWidth, freezeHeight, oldWidth, oldHeight) {\n    if (freezeWidth === void 0) { freezeWidth = false; }\n    if (freezeHeight === void 0) { freezeHeight = false; }\n    // control\n    // controlresizecontrol\n    var freezePoint = {\n        x: oldCenter.x - (startRotatedTouchControlPoint.x - oldCenter.x),\n        y: oldCenter.y - (startRotatedTouchControlPoint.y - oldCenter.y),\n    };\n    // touchEndPoint + freezePoint \n    var newCenter = getNewCenter(freezePoint, endRotatedTouchControlPoint);\n    // touchEndPoint-transform\n    var endZeroTouchControlPoint = calculatePointAfterRotateAngle(endRotatedTouchControlPoint, newCenter, -angle);\n    // ---------- transformwidthheight ----------\n    // ---transform\n    var zeroFreezePoint = calculatePointAfterRotateAngle(freezePoint, newCenter, -angle);\n    if (freezeWidth) {\n        // widthendZeroTouchControlPoint.x=startZeroTouchControlPoint.x\n        // transformtransform\n        var newWidth = Math.abs(endZeroTouchControlPoint.x - zeroFreezePoint.x);\n        var widthDx = newWidth - oldWidth;\n        // +widthDx/2-widthDx/2\n        if (newCenter.x > endZeroTouchControlPoint.x) {\n            // \n            newCenter.x = newCenter.x + widthDx / 2;\n        }\n        else {\n            // \n            newCenter.x = newCenter.x - widthDx / 2;\n        }\n    }\n    if (freezeHeight) {\n        var newHeight = Math.abs(endZeroTouchControlPoint.y - zeroFreezePoint.y);\n        var heightDy = newHeight - oldHeight;\n        if (newCenter.y > endZeroTouchControlPoint.y) {\n            // \n            newCenter.y = newCenter.y + heightDy / 2;\n        }\n        else {\n            newCenter.y = newCenter.y - heightDy / 2;\n        }\n    }\n    if (freezeWidth || freezeHeight) {\n        // transformtransformnewCenter\n        // rotatetransform\n        var nowFreezePoint = calculatePointAfterRotateAngle(zeroFreezePoint, newCenter, angle);\n        // recttransform\n        var dx = nowFreezePoint.x - freezePoint.x;\n        var dy = nowFreezePoint.y - freezePoint.y;\n        // transform: center\n        newCenter.x = newCenter.x - dx;\n        newCenter.y = newCenter.y - dy;\n        zeroFreezePoint = calculatePointAfterRotateAngle(freezePoint, newCenter, -angle);\n        endZeroTouchControlPoint = {\n            x: newCenter.x - (zeroFreezePoint.x - newCenter.x),\n            y: newCenter.y - (zeroFreezePoint.y - newCenter.y),\n        };\n    }\n    // transform+\n    var width = Math.abs(endZeroTouchControlPoint.x - zeroFreezePoint.x);\n    var height = Math.abs(endZeroTouchControlPoint.y - zeroFreezePoint.y);\n    // ---------- transformwidthheight ----------\n    if (freezeWidth) {\n        // widtholdWidth\n        // oldWidth = 100; newWidth=100.000000000001\n        // handleResize()\n        width = oldWidth;\n    }\n    if (freezeHeight) {\n        height = oldHeight;\n    }\n    return {\n        width: width,\n        height: height,\n        center: newCenter,\n    };\n}\nfunction recalcRotatedResizeInfo(pct, resizeInfo, rotate, controlX, controlY, oldCenterX, oldCenterY, freezeWidth, freezeHeight) {\n    if (freezeWidth === void 0) { freezeWidth = false; }\n    if (freezeHeight === void 0) { freezeHeight = false; }\n    // control\n    var deltaX = resizeInfo.deltaX, deltaY = resizeInfo.deltaY, oldWidth = resizeInfo.width, oldHeight = resizeInfo.height;\n    var angle = radianToAngle(rotate);\n    // control\n    var startZeroTouchControlPoint = {\n        x: controlX, // controlx\n        y: controlY, // controly\n    };\n    var oldCenter = { x: oldCenterX, y: oldCenterY };\n    // controltransform-touchStartPoint\n    var startRotatedTouchControlPoint = calculatePointAfterRotateAngle(startZeroTouchControlPoint, oldCenter, angle);\n    // controltransform-touchEndPoint\n    var endRotatedTouchControlPoint = {\n        x: startRotatedTouchControlPoint.x + deltaX,\n        y: startRotatedTouchControlPoint.y + deltaY,\n    };\n    // \n    var _a = calculateWidthAndHeight(startRotatedTouchControlPoint, endRotatedTouchControlPoint, oldCenter, angle, freezeWidth, freezeHeight, oldWidth, oldHeight), newWidth = _a.width, newHeight = _a.height, newCenter = _a.center;\n    // calculateWidthAndHeight()pct=0.5,newWidth\n    resizeInfo.width = newWidth * pct;\n    resizeInfo.height = newHeight * pct;\n    // BaseNodeModel.resize(deltaX/2, deltaY/2)*2\n    resizeInfo.deltaX = (newCenter.x - oldCenter.x) * 2;\n    resizeInfo.deltaY = (newCenter.y - oldCenter.y) * 2;\n    return resizeInfo;\n}\n/**\n *  Control \n * @param index\n * @param resizeInfo\n * @param pct\n * @param freezeWidth\n * @param freezeHeight\n */\nexport var recalcResizeInfo = function (index, resizeInfo, pct, freezeWidth, freezeHeight, rotate, controlX, controlY, oldCenterX, oldCenterY, forceProportional) {\n    if (pct === void 0) { pct = 1; }\n    if (freezeWidth === void 0) { freezeWidth = false; }\n    if (freezeHeight === void 0) { freezeHeight = false; }\n    if (rotate === void 0) { rotate = 0; }\n    if (forceProportional === void 0) { forceProportional = false; }\n    var nextResizeInfo = cloneDeep(resizeInfo);\n    var deltaX = nextResizeInfo.deltaX, deltaY = nextResizeInfo.deltaY;\n    var width = nextResizeInfo.width, height = nextResizeInfo.height, PCTResizeInfo = nextResizeInfo.PCTResizeInfo;\n    if (PCTResizeInfo) {\n        var sensitivity = 4; // \n        var deltaScale = 0;\n        var combineDelta = 0;\n        switch (index) {\n            case ResizeControlIndex.LEFT_TOP:\n                combineDelta = (deltaX * -1 - deltaY) / sensitivity;\n                break;\n            case ResizeControlIndex.RIGHT_TOP:\n                combineDelta = (deltaX - deltaY) / sensitivity;\n                break;\n            case ResizeControlIndex.RIGHT_BOTTOM:\n                combineDelta = (deltaX + deltaY) / sensitivity;\n                break;\n            case ResizeControlIndex.LEFT_BOTTOM:\n                combineDelta = (deltaX * -1 + deltaY) / sensitivity;\n                break;\n            default:\n                break;\n        }\n        if (combineDelta !== 0) {\n            deltaScale =\n                Math.round((combineDelta / PCTResizeInfo.ResizeBasis.basisHeight) * 100000) / 1000;\n        }\n        PCTResizeInfo.ResizePCT.widthPCT = Math.max(Math.min(PCTResizeInfo.ResizePCT.widthPCT + deltaScale, PCTResizeInfo.ScaleLimit.maxScaleLimit), PCTResizeInfo.ScaleLimit.minScaleLimit);\n        PCTResizeInfo.ResizePCT.heightPCT = Math.max(Math.min(PCTResizeInfo.ResizePCT.heightPCT + deltaScale, PCTResizeInfo.ScaleLimit.maxScaleLimit), PCTResizeInfo.ScaleLimit.minScaleLimit);\n        var spcWidth = Math.round((PCTResizeInfo.ResizePCT.widthPCT *\n            PCTResizeInfo.ResizeBasis.basisWidth) /\n            100);\n        var spcHeight = Math.round((PCTResizeInfo.ResizePCT.heightPCT *\n            PCTResizeInfo.ResizeBasis.basisHeight) /\n            100);\n        switch (index) {\n            case ResizeControlIndex.LEFT_TOP:\n                deltaX = width - spcWidth;\n                deltaY = height - spcHeight;\n                break;\n            case ResizeControlIndex.RIGHT_TOP:\n                deltaX = spcWidth - width;\n                deltaY = height - spcHeight;\n                break;\n            case ResizeControlIndex.RIGHT_BOTTOM:\n                deltaX = spcWidth - width;\n                deltaY = spcHeight - height;\n                break;\n            case ResizeControlIndex.LEFT_BOTTOM:\n                deltaX = width - spcWidth;\n                deltaY = spcHeight - height;\n                break;\n            default:\n                break;\n        }\n        return nextResizeInfo;\n    }\n    if (rotate % (2 * Math.PI) !== 0 &&\n        controlX !== undefined &&\n        controlY !== undefined) {\n        // rotate0resizedeltaXdeltaY\n        // rotate0\n        // rotate0resizeInfo.deltaX\n        return recalcRotatedResizeInfo(pct, nextResizeInfo, rotate, controlX, controlY, oldCenterX, oldCenterY, freezeWidth, freezeHeight);\n    }\n    //Shift\n    if (forceProportional) {\n        // \n        var aspectRatio = width / height;\n        // \n        var primaryDelta = 0;\n        var newWidth = width;\n        var newHeight = height;\n        switch (index) {\n            case ResizeControlIndex.LEFT_TOP:\n                // delta\n                primaryDelta = Math.abs(deltaX) > Math.abs(deltaY) ? -deltaX : -deltaY;\n                if (aspectRatio >= 1) {\n                    // \n                    newWidth = width + primaryDelta;\n                    newHeight = newWidth / aspectRatio;\n                }\n                else {\n                    // \n                    newHeight = height + primaryDelta;\n                    newWidth = newHeight * aspectRatio;\n                }\n                nextResizeInfo.width = newWidth;\n                nextResizeInfo.height = newHeight;\n                nextResizeInfo.deltaX = width - newWidth;\n                nextResizeInfo.deltaY = height - newHeight;\n                break;\n            case ResizeControlIndex.RIGHT_TOP:\n                primaryDelta = Math.abs(deltaX) > Math.abs(deltaY) ? deltaX : -deltaY;\n                if (aspectRatio >= 1) {\n                    newWidth = width + primaryDelta;\n                    newHeight = newWidth / aspectRatio;\n                }\n                else {\n                    newHeight = height - primaryDelta;\n                    newWidth = newHeight * aspectRatio;\n                }\n                nextResizeInfo.width = newWidth;\n                nextResizeInfo.height = newHeight;\n                nextResizeInfo.deltaX = newWidth - width;\n                nextResizeInfo.deltaY = height - newHeight;\n                break;\n            case ResizeControlIndex.RIGHT_BOTTOM:\n                primaryDelta = Math.abs(deltaX) > Math.abs(deltaY) ? deltaX : deltaY;\n                if (aspectRatio >= 1) {\n                    newWidth = width + primaryDelta;\n                    newHeight = newWidth / aspectRatio;\n                }\n                else {\n                    newHeight = height + primaryDelta;\n                    newWidth = newHeight * aspectRatio;\n                }\n                nextResizeInfo.width = newWidth;\n                nextResizeInfo.height = newHeight;\n                nextResizeInfo.deltaX = newWidth - width;\n                nextResizeInfo.deltaY = newHeight - height;\n                break;\n            case ResizeControlIndex.LEFT_BOTTOM:\n                primaryDelta = Math.abs(deltaX) > Math.abs(deltaY) ? -deltaX : deltaY;\n                if (aspectRatio >= 1) {\n                    newWidth = width - primaryDelta;\n                    newHeight = newWidth / aspectRatio;\n                }\n                else {\n                    newHeight = height + primaryDelta;\n                    newWidth = newHeight * aspectRatio;\n                }\n                nextResizeInfo.width = newWidth;\n                nextResizeInfo.height = newHeight;\n                nextResizeInfo.deltaX = width - newWidth;\n                nextResizeInfo.deltaY = newHeight - height;\n                break;\n            default:\n                break;\n        }\n        return nextResizeInfo;\n    }\n    // \n    switch (index) {\n        case ResizeControlIndex.LEFT_TOP:\n            nextResizeInfo.width = freezeWidth ? width : width - deltaX * pct;\n            nextResizeInfo.height = freezeHeight ? height : height - deltaY * pct;\n            break;\n        case ResizeControlIndex.RIGHT_TOP:\n            nextResizeInfo.width = freezeWidth ? width : width + deltaX * pct;\n            nextResizeInfo.height = freezeHeight ? height : height - deltaY * pct;\n            break;\n        case ResizeControlIndex.RIGHT_BOTTOM:\n            nextResizeInfo.width = freezeWidth ? width : width + deltaX * pct;\n            nextResizeInfo.height = freezeHeight ? height : height + deltaY * pct;\n            break;\n        case ResizeControlIndex.LEFT_BOTTOM:\n            nextResizeInfo.width = freezeWidth ? width : width - deltaX * pct;\n            nextResizeInfo.height = freezeHeight ? height : height + deltaY * pct;\n            break;\n        default:\n            break;\n    }\n    return nextResizeInfo;\n};\nexport var updateEdgePointByAnchors = function (nodeModel, graphModel) {\n    // https://github.com/didi/LogicFlow/issues/807\n    // https://github.com/didi/LogicFlow/issues/875\n    // RectgetRectResizeEdgePoint()point\n    // getRectResizeEdgePoint()4\n    // \n    // const pct = (y - beforeNode.y) / (beforeNode.height / 2 - radius)\n    // afterPoint.y = afterNode.y + (afterNode.height / 2 - radius) * pct\n    // getDefaultAnchor()\n    //  x: x + 20x20\n    // \n    var id = nodeModel.id, anchors = nodeModel.anchors;\n    var edges = graphModel.getNodeEdges(id);\n    // \n    forEach(edges, function (edge) {\n        if (edge.sourceNodeId === id) {\n            //  sourceNode \n            var anchorItem = find(anchors, function (anchor) { return anchor.id === edge.sourceAnchorId; });\n            if (anchorItem) {\n                edge.updateStartPoint({\n                    x: anchorItem.x,\n                    y: anchorItem.y,\n                });\n            }\n        }\n        else if (edge.targetNodeId === id) {\n            //  targetNode \n            var anchorItem = find(anchors, function (anchor) { return anchor.id === edge.targetAnchorId; });\n            if (anchorItem) {\n                edge.updateEndPoint({\n                    x: anchorItem.x,\n                    y: anchorItem.y,\n                });\n            }\n        }\n    });\n};\nexport var triggerResizeEvent = function (preNodeData, curNodeData, deltaX, deltaY, index, nodeModel, graphModel) {\n    graphModel.eventCenter.emit(EventType.NODE_RESIZE, {\n        preData: preNodeData,\n        data: curNodeData,\n        deltaX: deltaX,\n        deltaY: deltaY,\n        index: index,\n        model: nodeModel,\n    });\n};\n/**\n *  resize  utils extension\n * @param x\n * @param y\n * @param deltaX\n * @param deltaY\n * @param index\n * @param nodeModel\n * @param graphModel\n * @param cancelCallback\n * @param forceProportional\n */\nexport var handleResize = function (_a) {\n    var x = _a.x, y = _a.y, deltaX = _a.deltaX, deltaY = _a.deltaY, index = _a.index, nodeModel = _a.nodeModel, graphModel = _a.graphModel, cancelCallback = _a.cancelCallback, _b = _a.forceProportional, forceProportional = _b === void 0 ? false : _b;\n    var r = nodeModel.r, // circle\n    rx = nodeModel.rx, // ellipse/diamond\n    ry = nodeModel.ry, width = nodeModel.width, // rect/html\n    height = nodeModel.height, PCTResizeInfo = nodeModel.PCTResizeInfo, minWidth = nodeModel.minWidth, minHeight = nodeModel.minHeight, maxWidth = nodeModel.maxWidth, maxHeight = nodeModel.maxHeight, rotate = nodeModel.rotate, oldCenterX = nodeModel.x, oldCenterY = nodeModel.y;\n    var isFreezeWidth = minWidth === maxWidth;\n    var isFreezeHeight = minHeight === maxHeight;\n    var resizeInfo = {\n        width: r || rx || width,\n        height: r || ry || height,\n        deltaX: deltaX,\n        deltaY: deltaY,\n        PCTResizeInfo: PCTResizeInfo,\n    };\n    var pct = r || (rx && ry) ? 1 / 2 : 1;\n    var controlX = x;\n    var controlY = y;\n    var nextSize = recalcResizeInfo(index, resizeInfo, pct, isFreezeWidth, isFreezeHeight, rotate, controlX, controlY, oldCenterX, oldCenterY, forceProportional);\n    // \n    if (nextSize.width < minWidth ||\n        nextSize.width > maxWidth ||\n        nextSize.height < minHeight ||\n        nextSize.height > maxHeight) {\n        // this.dragHandler.cancelDrag()\n        cancelCallback === null || cancelCallback === void 0 ? void 0 : cancelCallback();\n        return;\n    }\n    if (rotate % (2 * Math.PI) == 0 ||\n        PCTResizeInfo ||\n        controlX === undefined ||\n        controlY === undefined) {\n        // rotate!==0PCTResizeInfoisFreezeWidth||isFreezeHeight\n        // recalcRotatedResizeInfo()\n        //  x/y \n        nextSize.deltaX = isFreezeWidth ? 0 : nextSize.deltaX;\n        nextSize.deltaY = isFreezeHeight ? 0 : nextSize.deltaY;\n    }\n    var preNodeData = nodeModel.getData();\n    var curNodeData = nodeModel.resize(nextSize);\n    // preNodeDatacurNodeData\n    if (preNodeData.x === curNodeData.x && preNodeData.y === curNodeData.y) {\n        // xyresizeresizeemit\n        return;\n    }\n    // \n    updateEdgePointByAnchors(nodeModel, graphModel);\n    //  resize \n    triggerResizeEvent(preNodeData, curNodeData, deltaX, deltaY, index, nodeModel, graphModel);\n};\n","import { distance } from './node';\nvar SAMPLING_FREQUENCY = 100;\nvar normal = {\n    x: 1,\n    y: 0,\n    z: 0,\n};\n// , SAMPLING_FREQUENCY, 1-6/SAMPLING_FREQUENCYt=1-6/SAMPLING_FREQUENCY\nexport function sampleCubic(p1, cp1, cp2, p2, offset) {\n    var program = function (t) {\n        if (t < 0 || t > 1) {\n            throw new RangeError('The value range of parameter \"t\" is [0,1]');\n        }\n        return {\n            x: p1.x * Math.pow((1 - t), 3) +\n                3 * cp1.x * t * Math.pow((1 - t), 2) +\n                3 * cp2.x * Math.pow(t, 2) * (1 - t) +\n                p2.x * Math.pow(t, 3),\n            y: p1.y * Math.pow((1 - t), 3) +\n                3 * cp1.y * t * Math.pow((1 - t), 2) +\n                3 * cp2.y * Math.pow(t, 2) * (1 - t) +\n                p2.y * Math.pow(t, 3),\n        };\n    };\n    // fix: https://github.com/didi/LogicFlow/issues/951\n    // offset\n    var arrowDistance = 0;\n    var t = 2;\n    var x1 = p2.x, y1 = p2.y;\n    var point = p2;\n    while (arrowDistance < offset && t < 50) {\n        point = program(1 - t / SAMPLING_FREQUENCY);\n        var x2 = point.x, y2 = point.y;\n        arrowDistance = distance(x1, y1, x2, y2);\n        t++;\n    }\n    return point;\n}\nfunction crossByZ(v, v1) {\n    return v.x * v1.y - v.y * v1.x;\n}\nfunction dot(v, w) {\n    var v1 = [v.x, v.y, v.z];\n    var v2 = [w.x, w.y, w.z];\n    return v2.reduce(function (prev, cur, index) { return prev + cur * v1[index]; });\n}\nfunction angle(v1, v2) {\n    var negative = crossByZ(v1, v2);\n    var r = Math.acos(dot(normalize(v1), normalize(v2)));\n    return negative >= 0 ? r : -r;\n}\nfunction normalize(v) {\n    var len = Math.hypot(v.x, v.y);\n    return {\n        x: v.x / len,\n        y: v.y / len,\n        z: 0,\n    };\n}\nexport function getThetaOfVector(v) {\n    return angle(normal, v);\n}\nexport function degrees(radians) {\n    return radians * (180 / Math.PI);\n}\n","import { cloneDeep, merge, assign } from 'lodash-es';\nexport var defaultTheme = {\n    baseNode: {\n        fill: '#fff',\n        stroke: '#000',\n        strokeWidth: 2,\n    },\n    baseEdge: {\n        stroke: '#000',\n        strokeWidth: 2,\n    },\n    rect: {},\n    circle: {},\n    diamond: {},\n    ellipse: {},\n    polygon: {},\n    text: {\n        color: '#000',\n        stroke: 'none',\n        fontSize: 12,\n        background: {\n            fill: 'transparent',\n        },\n    },\n    anchor: {\n        stroke: '#000',\n        fill: '#fff',\n        r: 4,\n        hover: {\n            r: 10,\n            fill: '#949494',\n            fillOpacity: 0.5,\n            stroke: '#949494',\n        },\n    },\n    anchorLine: {\n        stroke: '#000',\n        strokeWidth: 2,\n        strokeDasharray: '3,2',\n    },\n    nodeText: {\n        color: '#000',\n        overflowMode: 'default',\n        fontSize: 12,\n        lineHeight: 1.2,\n    },\n    edgeText: {\n        textWidth: 100,\n        overflowMode: 'default',\n        fontSize: 12,\n        background: {\n            fill: '#fff',\n        },\n    },\n    line: {},\n    polyline: {},\n    bezier: {\n        fill: 'none',\n        adjustLine: {\n            stroke: '#949494',\n        },\n        adjustAnchor: {\n            r: 4,\n            fill: '#949494',\n            fillOpacity: 1,\n            stroke: '#949494',\n        },\n    },\n    arrow: {\n        offset: 10,\n        verticalLength: 5, // \n    },\n    snapline: {\n        stroke: '#949494',\n        strokeWidth: 1,\n    },\n    edgeAdjust: {\n        r: 4,\n        fill: '#fff',\n        stroke: '#949494',\n        strokeWidth: 2,\n    },\n    outline: {\n        fill: 'transparent',\n        stroke: '#949494',\n        strokeDasharray: '3,3',\n        hover: {\n            stroke: '#949494',\n        },\n    },\n    edgeAnimation: {\n        stroke: 'red',\n        strokeDasharray: '10,10',\n        strokeDashoffset: '100%',\n        animationName: 'lf_animate_dash',\n        animationDuration: '20s',\n        animationIterationCount: 'infinite',\n        animationTimingFunction: 'linear',\n        animationDirection: 'normal',\n    },\n    rotateControl: {\n        stroke: '#000',\n        fill: '#fff',\n        strokeWidth: 1.5,\n    },\n    resizeControl: {\n        width: 7,\n        height: 7,\n        fill: '#fff',\n        stroke: '#000',\n    },\n    resizeOutline: {\n        fill: 'none',\n        stroke: 'transparent', // \n        strokeWidth: 1,\n        strokeDasharray: '3,3',\n    },\n};\nexport var radiusMode = {\n    rect: { radius: 8 },\n    diamond: { radius: 8 },\n    polygon: { radius: 8 },\n    polyline: { radius: 8 },\n    arrow: {\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n        offset: 10,\n        verticalLength: 5, // \n    },\n    snapline: {\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n        stroke: '#949494',\n        strokeWidth: 1,\n    },\n    outline: {\n        radius: 8,\n        fill: 'transparent',\n        stroke: '#949494',\n        strokeDasharray: '3,3',\n        hover: {\n            stroke: '#949494',\n        },\n    },\n    resizeOutline: {\n        radius: 8,\n        fill: 'none',\n        stroke: 'transparent', // \n        strokeWidth: 1,\n        strokeDasharray: '3,3',\n    },\n};\nexport var darkMode = {\n    baseNode: {\n        fill: '#23272e',\n        stroke: '#fefeff',\n    },\n    baseEdge: {\n        stroke: '#fefeff',\n    },\n    rect: { radius: 8 },\n    diamond: { radius: 8 },\n    polygon: { radius: 8 },\n    polyline: { radius: 8 },\n    nodeText: {\n        color: '#fefeff',\n        overflowMode: 'default',\n        fontSize: 12,\n        lineHeight: 1.2,\n    },\n    arrow: {\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n        offset: 10,\n        verticalLength: 5, // \n    },\n    snapline: {\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n        stroke: '#949494',\n        strokeWidth: 1,\n    },\n    outline: {\n        radius: 8,\n        fill: 'transparent',\n        stroke: '#949494',\n        strokeDasharray: '3,3',\n        hover: {\n            stroke: '#949494',\n        },\n    },\n    resizeOutline: {\n        radius: 8,\n        fill: 'none',\n        stroke: 'transparent', // \n        strokeWidth: 1,\n        strokeDasharray: '3,3',\n    },\n};\nexport var colorfulMode = {\n    rect: { fill: '#72CBFF', stroke: '#3ABDF9', radius: 8 },\n    circle: { fill: '#FFE075', stroke: '#F9CE3A', radius: 8 },\n    ellipse: { fill: '#FFA8A8', stroke: '#FF6B66', radius: 8 },\n    text: { fill: '#72CBFF', radius: 8 },\n    diamond: { fill: '#96F7AF', stroke: '#40EF7E', radius: 8 },\n    polygon: { fill: '#E0A8FF', stroke: '#C271FF', radius: 8 },\n    polyline: { radius: 8 },\n    arrow: {\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n        offset: 10,\n        verticalLength: 5, // \n    },\n    snapline: {\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n        stroke: '#949494',\n        strokeWidth: 1,\n    },\n    outline: {\n        radius: 8,\n        fill: 'transparent',\n        stroke: '#949494',\n        strokeDasharray: '3,3',\n        hover: {\n            stroke: '#949494',\n        },\n    },\n    resizeOutline: {\n        radius: 8,\n        fill: 'none',\n        stroke: 'transparent', // \n        strokeWidth: 1,\n        strokeDasharray: '3,3',\n    },\n};\nexport var themeModeMap = {\n    colorful: colorfulMode,\n    dark: darkMode,\n    radius: radiusMode,\n    default: defaultTheme,\n};\n// \nexport var darkBackground = {\n    background: '#23272e',\n};\nexport var colorfulBackground = {\n    background: '#fefeff',\n};\nexport var defaultBackground = {\n    background: '#ffffff',\n};\nexport var backgroundModeMap = {\n    colorful: colorfulBackground,\n    dark: darkBackground,\n    radius: defaultBackground,\n    default: defaultBackground,\n};\n// \nexport var darkGrid = {\n    color: '#66676a',\n    thickness: 1,\n};\nexport var colorfulGrid = {\n    color: '#dadada',\n    thickness: 1,\n};\nexport var defaultGrid = {\n    color: '#acacac',\n    thickness: 1,\n};\nexport var gridModeMap = {\n    colorful: colorfulGrid,\n    dark: darkGrid,\n    radius: defaultGrid,\n    default: defaultGrid,\n};\n/*  */\nexport var setupTheme = function (customTheme, themeMode) {\n    var theme = cloneDeep(defaultTheme);\n    if (themeMode) {\n        theme = merge(theme, themeModeMap[themeMode]);\n    }\n    if (customTheme) {\n        /**\n         *  merge \n         * @docs https://lodash.com/docs/4.17.15#merge\n         *  hover ->\n         * lf.setTheme({\n         *   anchor: {\n         *     fill: 'red'\n         *   }\n         * })\n         *\n         * \n         * {\n         *   // ...\n         *   anchor: {\n         *     stroke: '#000',\n         *     fill: 'red',\n         *     r: 4,\n         *     hover: {\n         *       r: 10,\n         *       fill: '#949494',\n         *       fillOpacity: 0.5,\n         *       stroke: '#949494',\n         *     },\n         *   },\n         *   // ...\n         * }\n         */\n        theme = merge(theme, customTheme);\n    }\n    return theme;\n};\nexport var addThemeMode = function (themeMode, style) {\n    if (themeModeMap[themeMode]) {\n        console.warn(\"theme mode \".concat(themeMode, \" already exists\"));\n        return;\n    }\n    themeModeMap[themeMode] = style;\n    backgroundModeMap[themeMode] = style.background || defaultBackground;\n    gridModeMap[themeMode] = style.grid || defaultGrid;\n};\nexport var removeThemeMode = function (themeMode) {\n    delete themeModeMap[themeMode];\n    delete backgroundModeMap[themeMode];\n    delete gridModeMap[themeMode];\n};\nexport var clearThemeMode = function () {\n    var resetTheme = {\n        colorful: {},\n        dark: {},\n        radius: {},\n        default: {},\n    };\n    assign(themeModeMap, resetTheme);\n    assign(backgroundModeMap, resetTheme);\n    assign(gridModeMap, resetTheme);\n};\n/*  theme  */\nexport var updateTheme = setupTheme;\n","var maxIndex = 1000;\nvar minIndex = 999;\nexport var getZIndex = function () { return ++maxIndex; };\nexport var getMinIndex = function () { return --minIndex; };\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { assign, cloneDeep, find, isUndefined } from 'lodash-es';\nimport { action, computed, isObservable, observable, set, toJS } from 'mobx';\nimport { createUuid, formatData, getAnchors, getZIndex, pickEdgeConfig, twoPointDistance, } from '../../util';\nimport { ElementState, ElementType, ModelType, OverlapMode, TextMode, } from '../../constant';\nvar BaseEdgeModel = /** @class */ (function () {\n    function BaseEdgeModel(data, graphModel) {\n        var _a;\n        this.BaseType = ElementType.EDGE;\n        // \n        this.id = '';\n        this.type = '';\n        this.sourceNodeId = '';\n        this.targetNodeId = '';\n        this.textMode = TextMode.TEXT;\n        this.text = {\n            value: '',\n            x: 0,\n            y: 0,\n            draggable: false,\n            editable: true,\n        };\n        this.points = '';\n        this.pointsList = [];\n        // \n        this.virtual = false;\n        this.isSelected = false;\n        this.isHovered = false;\n        this.isHitable = true; // \n        this.isHittable = true; // \n        this.draggable = true;\n        this.visible = true;\n        // \n        this.isAnimation = false;\n        this.isShowAdjustPoint = false; // \n        this.zIndex = 0;\n        this.state = ElementState.DEFAULT;\n        this.modelType = ModelType.EDGE;\n        this.customTextPosition = false; // \n        this.style = {}; // \n        // TODO: marker\n        // \n        this.arrowConfig = {\n            markerEnd: \"url(#marker-end-\".concat(this.id, \")\"),\n            markerStart: \"url(#marker-start-\".concat(this.id, \")\"),\n        };\n        this.graphModel = graphModel;\n        this.properties = (_a = data.properties) !== null && _a !== void 0 ? _a : {};\n        this.initEdgeData(data);\n        this.setAttributes();\n    }\n    /**\n     * \n     * @overridable \n     * initNodeDatasetAttributes\n     * initNodeData\n     * setAttributesproperties\n     */\n    BaseEdgeModel.prototype.initEdgeData = function (data) {\n        var _this = this;\n        if (!data.properties) {\n            data.properties = {};\n        }\n        if (!data.id) {\n            // id > id > \n            var idGenerator = this.graphModel.idGenerator;\n            var globalId = idGenerator && idGenerator(data.type);\n            var nodeId = this.createId();\n            data.id = nodeId || globalId || createUuid();\n        }\n        this.arrowConfig.markerEnd = \"url(#marker-end-\".concat(data.id, \")\");\n        this.arrowConfig.markerStart = \"url(#marker-start-\".concat(data.id, \")\");\n        var adjustEdgeStartAndEnd = this.graphModel.editConfigModel.adjustEdgeStartAndEnd;\n        this.isShowAdjustPoint = adjustEdgeStartAndEnd;\n        assign(this, pickEdgeConfig(data));\n        var _a = this.graphModel, overlapMode = _a.overlapMode, eventCenter = _a.eventCenter;\n        this.updateZIndexByOverlap(overlapMode, data.zIndex || getZIndex());\n        //  anchors\n        //  edgeData  sourceNode  targetNode\n        this.setAnchors();\n        // \n        this.initPoints();\n        // \n        this.formatText(data);\n        eventCenter.on('overlap:change', function (data) {\n            var newMode = data.overlapMode;\n            _this.updateZIndexByOverlap(newMode, _this.zIndex || getZIndex());\n        });\n    };\n    /**\n     * model\n     * @overridable \n     * properties\n     */\n    BaseEdgeModel.prototype.setAttributes = function () { };\n    BaseEdgeModel.prototype.createId = function () {\n        return null;\n    };\n    /**\n     * \n     *\n     * @overridable \n     * @returns \n     */\n    BaseEdgeModel.prototype.getEdgeStyle = function () {\n        return __assign(__assign({}, this.graphModel.theme.baseEdge), this.style);\n    };\n    /**\n     * \n     *\n     * @overridable \n     * isShowAdjustPointtrue\n     */\n    BaseEdgeModel.prototype.getAdjustPointStyle = function () {\n        return __assign({}, this.graphModel.theme.edgeAdjust);\n    };\n    /**\n     * \n     *\n     * @overridable \n     */\n    BaseEdgeModel.prototype.getTextStyle = function () {\n        //  edgeText\n        var edgeText = this.graphModel.theme.edgeText;\n        return cloneDeep(edgeText);\n    };\n    /**\n     * \n     *\n     * @overridable \n     * @example\n     * getEdgeAnimationStyle() {\n     *   const style = super.getEdgeAnimationStyle()\n     *   style.stroke = 'blue'\n     *   style.animationDuration = '30s'\n     *   style.animationDirection = 'reverse'\n     *   return style\n     * }\n     */\n    BaseEdgeModel.prototype.getEdgeAnimationStyle = function () {\n        var edgeAnimation = this.graphModel.theme.edgeAnimation;\n        return cloneDeep(edgeAnimation);\n    };\n    /**\n     * \n     *\n     * @overridable \n     * @example\n     * getArrowStyle() {\n     *   const style = super.getArrowStyle()\n     *   style.stroke = 'green'\n     *   return style\n     * }\n     */\n    BaseEdgeModel.prototype.getArrowStyle = function () {\n        var edgeStyle = this.getEdgeStyle();\n        var edgeAnimationStyle = this.getEdgeAnimationStyle();\n        var arrow = this.graphModel.theme.arrow;\n        var stroke = this.isAnimation\n            ? edgeAnimationStyle.stroke\n            : edgeStyle.stroke;\n        return __assign(__assign(__assign({}, edgeStyle), { fill: stroke, stroke: stroke }), arrow);\n    };\n    /**\n     * \n     *\n     * @overridable \n     * @example\n     * // outline\n     * getOutlineStyle() {\n     *   const style = super.getOutlineStyle()\n     *   style.stroke = \"none\"\n     *   style.hover.stroke = \"none\"\n     *   return style\n     * }\n     */\n    BaseEdgeModel.prototype.getOutlineStyle = function () {\n        var graphModel = this.graphModel;\n        var outline = graphModel.theme.outline;\n        return cloneDeep(outline);\n    };\n    /**\n     * \n     *\n     * @overridable \n     */\n    BaseEdgeModel.prototype.getTextPosition = function () {\n        return {\n            x: 0,\n            y: 0,\n        };\n    };\n    Object.defineProperty(BaseEdgeModel.prototype, \"sourceNode\", {\n        /**\n         * \n         */\n        get: function () {\n            var _a, _b;\n            return (_b = (_a = this.graphModel) === null || _a === void 0 ? void 0 : _a.nodesMap[this.sourceNodeId]) === null || _b === void 0 ? void 0 : _b.model;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BaseEdgeModel.prototype, \"targetNode\", {\n        /**\n         * \n         */\n        get: function () {\n            var _a, _b;\n            return (_b = (_a = this.graphModel) === null || _a === void 0 ? void 0 : _a.nodesMap[this.targetNodeId]) === null || _b === void 0 ? void 0 : _b.model;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BaseEdgeModel.prototype, \"textPosition\", {\n        get: function () {\n            return this.getTextPosition();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * \n     */\n    BaseEdgeModel.prototype.getBeginAnchor = function (sourceNode, targetNode, sourceAnchorId) {\n        // https://github.com/didi/LogicFlow/issues/1077\n        // sourceAnchorspositionundefined\n        var position;\n        var minDistance;\n        var sourceAnchors = getAnchors(sourceNode);\n        if (sourceAnchorId) {\n            position = find(sourceAnchors, function (anchor) { return anchor.id === sourceAnchorId; });\n            // \n            if (position) {\n                return position;\n            }\n            console.warn(\"\\u672A\\u5728\\u8282\\u70B9\\u4E0A\\u627E\\u5230\\u6307\\u5B9A\\u7684\\u8D77\\u70B9\\u951A\\u70B9\".concat(sourceAnchorId, \"\\uFF0C\\u5DF2\\u4F7F\\u7528\\u9ED8\\u8BA4\\u951A\\u70B9\\u4F5C\\u4E3A\\u8D77\\u70B9\"));\n        }\n        sourceAnchors.forEach(function (anchor) {\n            var distance = twoPointDistance(anchor, targetNode);\n            if (minDistance === undefined) {\n                minDistance = distance;\n                position = anchor;\n            }\n            else if (distance < minDistance) {\n                minDistance = distance;\n                position = anchor;\n            }\n        });\n        return position;\n    };\n    /**\n     * \n     */\n    BaseEdgeModel.prototype.getEndAnchor = function (targetNode, targetAnchorId) {\n        var _this = this;\n        // https://github.com/didi/LogicFlow/issues/1077\n        // targetAnchorspositionundefined\n        var position;\n        var minDistance;\n        var targetAnchors = getAnchors(targetNode);\n        if (targetAnchorId) {\n            position = find(targetAnchors, function (anchor) { return anchor.id === targetAnchorId; });\n            // \n            if (position) {\n                return position;\n            }\n            console.warn(\"\\u672A\\u5728\\u8282\\u70B9\\u4E0A\\u627E\\u5230\\u6307\\u5B9A\\u7684\\u7EC8\\u70B9\\u951A\\u70B9\".concat(targetAnchorId, \"\\uFF0C\\u5DF2\\u4F7F\\u7528\\u9ED8\\u8BA4\\u951A\\u70B9\\u4F5C\\u4E3A\\u7EC8\\u70B9\"));\n        }\n        targetAnchors.forEach(function (anchor) {\n            if (!_this.startPoint)\n                return; //  this.startPoint  undefined\n            var distance = twoPointDistance(anchor, _this.startPoint);\n            if (minDistance === undefined) {\n                minDistance = distance;\n                position = anchor;\n            }\n            else if (distance < minDistance) {\n                minDistance = distance;\n                position = anchor;\n            }\n        });\n        return position;\n    };\n    /**\n     * properties\n     */\n    BaseEdgeModel.prototype.getProperties = function () {\n        return toJS(this.properties);\n    };\n    /**\n     * \n     *\n     * @overridable \n     */\n    BaseEdgeModel.prototype.getData = function () {\n        var properties = this.properties;\n        if (isObservable(properties)) {\n            properties = toJS(properties);\n        }\n        var data = {\n            id: this.id,\n            type: this.type,\n            properties: properties,\n            sourceNodeId: this.sourceNodeId,\n            targetNodeId: this.targetNodeId,\n            sourceAnchorId: this.sourceAnchorId,\n            targetAnchorId: this.targetAnchorId,\n            startPoint: assign({}, this.startPoint),\n            endPoint: assign({}, this.endPoint),\n        };\n        // zIndex\n        // zIndex\n        if ([OverlapMode.INCREASE, OverlapMode.STATIC].includes(this.graphModel.overlapMode)) {\n            data.zIndex = this.zIndex;\n        }\n        var _a = this.text, x = _a.x, y = _a.y, value = _a.value;\n        if (value) {\n            data.text = {\n                x: x,\n                y: y,\n                value: value,\n            };\n        }\n        return data;\n    };\n    /**\n     * \n     *\n     * @overridable \n     * \n     * history\n     * \n     */\n    BaseEdgeModel.prototype.getHistoryData = function () {\n        return this.getData();\n    };\n    /**\n     * \n     * @param key \n     * @param val \n     */\n    BaseEdgeModel.prototype.setProperty = function (key, val) {\n        set(this.properties, key, formatData(val));\n        this.setAttributes();\n    };\n    /**\n     * \n     * @param key \n     */\n    BaseEdgeModel.prototype.deleteProperty = function (key) {\n        delete this.properties[key];\n        this.setAttributes();\n    };\n    /**\n     * \n     * @param properties  properties\n     */\n    BaseEdgeModel.prototype.setProperties = function (properties) {\n        this.properties = __assign(__assign({}, toJS(this.properties)), formatData(properties));\n        this.setAttributes();\n    };\n    /**\n     * id\n     */\n    BaseEdgeModel.prototype.changeEdgeId = function (id) {\n        var _a = this.arrowConfig, markerEnd = _a.markerEnd, markerStart = _a.markerStart;\n        if (markerStart && markerStart === \"url(#marker-start-\".concat(this.id, \")\")) {\n            this.arrowConfig.markerStart = \"url(#marker-start-\".concat(id, \")\");\n        }\n        if (markerEnd && markerEnd === \"url(#marker-end-\".concat(this.id, \")\")) {\n            this.arrowConfig.markerEnd = \"url(#marker-end-\".concat(id, \")\");\n        }\n        this.id = id;\n    };\n    /**\n     * \n     *  getEdgeStyle \n     */\n    BaseEdgeModel.prototype.setStyle = function (key, val) {\n        var _a;\n        this.style = __assign(__assign({}, this.style), (_a = {}, _a[key] = formatData(val), _a));\n    };\n    /**\n     * \n     *  getEdgeStyle \n     */\n    BaseEdgeModel.prototype.setStyles = function (styles) {\n        this.style = __assign(__assign({}, this.style), formatData(styles));\n    };\n    /**\n     * \n     *  getEdgeStyle \n     */\n    BaseEdgeModel.prototype.updateStyles = function (styles) {\n        this.style = __assign({}, formatData(styles));\n    };\n    /**\n     * \n     * @param mode\n     */\n    BaseEdgeModel.prototype.setTextMode = function (mode) {\n        this.textMode = mode;\n    };\n    /**\n     * \n     */\n    BaseEdgeModel.prototype.formatText = function (data) {\n        var _a, _b, _c;\n        var _d = this.graphModel.editConfigModel, edgeTextDraggable = _d.edgeTextDraggable, edgeTextEdit = _d.edgeTextEdit;\n        var _e = this.textPosition, x = _e.x, y = _e.y;\n        var text = data.text;\n        var textConfig = {\n            value: '',\n            x: x,\n            y: y,\n            draggable: edgeTextDraggable,\n            editable: edgeTextEdit,\n        };\n        if (text) {\n            if (typeof text === 'string') {\n                textConfig = __assign(__assign({}, textConfig), { value: text });\n            }\n            else {\n                textConfig = __assign(__assign({}, textConfig), { x: (_a = text.x) !== null && _a !== void 0 ? _a : x, y: (_b = text.y) !== null && _b !== void 0 ? _b : y, value: (_c = text.value) !== null && _c !== void 0 ? _c : '' });\n                if (!isUndefined(text.draggable)) {\n                    textConfig.draggable = text.draggable;\n                }\n                if (!isUndefined(text.editable)) {\n                    textConfig.editable = text.editable;\n                }\n            }\n        }\n        this.text = textConfig;\n    };\n    /**\n     * \n     */\n    BaseEdgeModel.prototype.resetTextPosition = function () {\n        var _a = this.textPosition, x = _a.x, y = _a.y;\n        this.text.x = x;\n        this.text.y = y;\n    };\n    /**\n     * \n     */\n    BaseEdgeModel.prototype.moveText = function (deltaX, deltaY) {\n        var _a = this.text, x = _a.x, y = _a.y, value = _a.value, draggable = _a.draggable, editable = _a.editable;\n        this.text = {\n            value: value,\n            editable: editable,\n            draggable: draggable,\n            x: x + deltaX,\n            y: y + deltaY,\n        };\n    };\n    /**\n     * \n     */\n    BaseEdgeModel.prototype.setText = function (textConfig) {\n        if (textConfig) {\n            assign(this.text, textConfig);\n        }\n    };\n    /**\n     * \n     */\n    BaseEdgeModel.prototype.updateText = function (value) {\n        this.text = __assign(__assign({}, toJS(this.text)), { value: value });\n    };\n    /**\n     * Id\n     */\n    BaseEdgeModel.prototype.setAnchors = function () {\n        if (!this.sourceAnchorId || !this.startPoint) {\n            var anchor = this.getBeginAnchor(this.sourceNode, this.targetNode, this.sourceAnchorId);\n            if (!anchor) {\n                // https://github.com/didi/LogicFlow/issues/1077\n                // getDefaultAnchor(){return []}\n                // anchor=undefined\n                throw new Error('beginAnchoranchorsanchors');\n            }\n            if (!this.startPoint) {\n                this.startPoint = {\n                    x: anchor.x,\n                    y: anchor.y,\n                };\n            }\n            if (!this.sourceAnchorId) {\n                this.sourceAnchorId = anchor.id;\n            }\n        }\n        if (!this.targetAnchorId || !this.endPoint) {\n            var anchor = this.getEndAnchor(this.targetNode, this.targetAnchorId);\n            if (!anchor) {\n                // https://github.com/didi/LogicFlow/issues/1077\n                // getDefaultAnchor(){return []}\n                // anchor=undefined\n                throw new Error('endAnchoranchorsanchors');\n            }\n            if (!this.endPoint) {\n                this.endPoint = {\n                    x: anchor.x,\n                    y: anchor.y,\n                };\n            }\n            if (!this.targetAnchorId) {\n                this.targetAnchorId = anchor.id;\n            }\n        }\n    };\n    BaseEdgeModel.prototype.setSelected = function (flag) {\n        if (flag === void 0) { flag = true; }\n        this.isSelected = flag;\n    };\n    BaseEdgeModel.prototype.setHovered = function (flag) {\n        if (flag === void 0) { flag = true; }\n        this.isHovered = flag;\n    };\n    BaseEdgeModel.prototype.setHitable = function (flag) {\n        if (flag === void 0) { flag = true; }\n        this.isHitable = flag;\n    };\n    BaseEdgeModel.prototype.setHittable = function (flag) {\n        if (flag === void 0) { flag = true; }\n        this.isHittable = flag;\n    };\n    BaseEdgeModel.prototype.openEdgeAnimation = function () {\n        this.isAnimation = true;\n    };\n    BaseEdgeModel.prototype.closeEdgeAnimation = function () {\n        this.isAnimation = false;\n    };\n    BaseEdgeModel.prototype.setElementState = function (state, additionStateData) {\n        this.state = state;\n        this.additionStateData = additionStateData;\n    };\n    BaseEdgeModel.prototype.updateStartPoint = function (anchor) {\n        this.startPoint = anchor;\n    };\n    BaseEdgeModel.prototype.moveStartPoint = function (deltaX, deltaY) {\n        if (this.startPoint) {\n            this.startPoint.x += deltaX;\n            this.startPoint.y += deltaY;\n        }\n    };\n    BaseEdgeModel.prototype.updateEndPoint = function (anchor) {\n        this.endPoint = anchor;\n    };\n    BaseEdgeModel.prototype.moveEndPoint = function (deltaX, deltaY) {\n        if (this.endPoint) {\n            this.endPoint.x += deltaX;\n            this.endPoint.y += deltaY;\n        }\n    };\n    BaseEdgeModel.prototype.setZIndex = function (zIndex) {\n        if (zIndex === void 0) { zIndex = 0; }\n        this.zIndex = zIndex;\n    };\n    BaseEdgeModel.prototype.initPoints = function () { };\n    BaseEdgeModel.prototype.updateAttributes = function (attributes) {\n        assign(this, attributes);\n    };\n    // \n    BaseEdgeModel.prototype.getAdjustStart = function () {\n        return this.startPoint;\n    };\n    // \n    BaseEdgeModel.prototype.getAdjustEnd = function () {\n        return this.endPoint;\n    };\n    // \n    BaseEdgeModel.prototype.updateAfterAdjustStartAndEnd = function (_a) {\n        var startPoint = _a.startPoint, endPoint = _a.endPoint;\n        this.updateStartPoint({ x: startPoint.x, y: startPoint.y });\n        this.updateEndPoint({ x: endPoint.x, y: endPoint.y });\n    };\n    // zIndex\n    BaseEdgeModel.prototype.updateZIndexByOverlap = function (overlapMode, defaultZIndex) {\n        switch (overlapMode) {\n            case OverlapMode.DEFAULT:\n                this.zIndex = 0;\n                break;\n            case OverlapMode.EDGE_TOP:\n                this.zIndex = 1;\n                break;\n            case OverlapMode.INCREASE:\n                this.zIndex = defaultZIndex;\n                break;\n            default:\n                break;\n        }\n    };\n    BaseEdgeModel.BaseType = ElementType.EDGE;\n    __decorate([\n        observable\n    ], BaseEdgeModel.prototype, \"type\", void 0);\n    __decorate([\n        observable\n    ], BaseEdgeModel.prototype, \"sourceNodeId\", void 0);\n    __decorate([\n        observable\n    ], BaseEdgeModel.prototype, \"targetNodeId\", void 0);\n    __decorate([\n        observable\n    ], BaseEdgeModel.prototype, \"startPoint\", void 0);\n    __decorate([\n        observable\n    ], BaseEdgeModel.prototype, \"endPoint\", void 0);\n    __decorate([\n        observable\n    ], BaseEdgeModel.prototype, \"textMode\", void 0);\n    __decorate([\n        observable\n    ], BaseEdgeModel.prototype, \"text\", void 0);\n    __decorate([\n        observable\n    ], BaseEdgeModel.prototype, \"properties\", void 0);\n    __decorate([\n        observable\n    ], BaseEdgeModel.prototype, \"points\", void 0);\n    __decorate([\n        observable\n    ], BaseEdgeModel.prototype, \"pointsList\", void 0);\n    __decorate([\n        observable\n    ], BaseEdgeModel.prototype, \"isSelected\", void 0);\n    __decorate([\n        observable\n    ], BaseEdgeModel.prototype, \"isHovered\", void 0);\n    __decorate([\n        observable\n    ], BaseEdgeModel.prototype, \"isHitable\", void 0);\n    __decorate([\n        observable\n    ], BaseEdgeModel.prototype, \"isHittable\", void 0);\n    __decorate([\n        observable\n    ], BaseEdgeModel.prototype, \"draggable\", void 0);\n    __decorate([\n        observable\n    ], BaseEdgeModel.prototype, \"visible\", void 0);\n    __decorate([\n        observable\n    ], BaseEdgeModel.prototype, \"isAnimation\", void 0);\n    __decorate([\n        observable\n    ], BaseEdgeModel.prototype, \"isShowAdjustPoint\", void 0);\n    __decorate([\n        observable\n    ], BaseEdgeModel.prototype, \"zIndex\", void 0);\n    __decorate([\n        observable\n    ], BaseEdgeModel.prototype, \"state\", void 0);\n    __decorate([\n        observable\n    ], BaseEdgeModel.prototype, \"style\", void 0);\n    __decorate([\n        observable\n    ], BaseEdgeModel.prototype, \"arrowConfig\", void 0);\n    __decorate([\n        computed\n    ], BaseEdgeModel.prototype, \"sourceNode\", null);\n    __decorate([\n        computed\n    ], BaseEdgeModel.prototype, \"targetNode\", null);\n    __decorate([\n        computed\n    ], BaseEdgeModel.prototype, \"textPosition\", null);\n    __decorate([\n        action\n    ], BaseEdgeModel.prototype, \"setProperty\", null);\n    __decorate([\n        action\n    ], BaseEdgeModel.prototype, \"deleteProperty\", null);\n    __decorate([\n        action\n    ], BaseEdgeModel.prototype, \"setProperties\", null);\n    __decorate([\n        action\n    ], BaseEdgeModel.prototype, \"changeEdgeId\", null);\n    __decorate([\n        action\n    ], BaseEdgeModel.prototype, \"setStyle\", null);\n    __decorate([\n        action\n    ], BaseEdgeModel.prototype, \"setStyles\", null);\n    __decorate([\n        action\n    ], BaseEdgeModel.prototype, \"updateStyles\", null);\n    __decorate([\n        action\n    ], BaseEdgeModel.prototype, \"setTextMode\", null);\n    __decorate([\n        action\n    ], BaseEdgeModel.prototype, \"formatText\", null);\n    __decorate([\n        action\n    ], BaseEdgeModel.prototype, \"resetTextPosition\", null);\n    __decorate([\n        action\n    ], BaseEdgeModel.prototype, \"moveText\", null);\n    __decorate([\n        action\n    ], BaseEdgeModel.prototype, \"setText\", null);\n    __decorate([\n        action\n    ], BaseEdgeModel.prototype, \"updateText\", null);\n    __decorate([\n        action\n    ], BaseEdgeModel.prototype, \"setAnchors\", null);\n    __decorate([\n        action\n    ], BaseEdgeModel.prototype, \"setSelected\", null);\n    __decorate([\n        action\n    ], BaseEdgeModel.prototype, \"setHovered\", null);\n    __decorate([\n        action\n    ], BaseEdgeModel.prototype, \"setHitable\", null);\n    __decorate([\n        action\n    ], BaseEdgeModel.prototype, \"setHittable\", null);\n    __decorate([\n        action\n    ], BaseEdgeModel.prototype, \"openEdgeAnimation\", null);\n    __decorate([\n        action\n    ], BaseEdgeModel.prototype, \"closeEdgeAnimation\", null);\n    __decorate([\n        action\n    ], BaseEdgeModel.prototype, \"setElementState\", null);\n    __decorate([\n        action\n    ], BaseEdgeModel.prototype, \"updateStartPoint\", null);\n    __decorate([\n        action\n    ], BaseEdgeModel.prototype, \"moveStartPoint\", null);\n    __decorate([\n        action\n    ], BaseEdgeModel.prototype, \"updateEndPoint\", null);\n    __decorate([\n        action\n    ], BaseEdgeModel.prototype, \"moveEndPoint\", null);\n    __decorate([\n        action\n    ], BaseEdgeModel.prototype, \"setZIndex\", null);\n    __decorate([\n        action\n    ], BaseEdgeModel.prototype, \"initPoints\", null);\n    __decorate([\n        action\n    ], BaseEdgeModel.prototype, \"updateAttributes\", null);\n    __decorate([\n        action\n    ], BaseEdgeModel.prototype, \"getAdjustStart\", null);\n    __decorate([\n        action\n    ], BaseEdgeModel.prototype, \"getAdjustEnd\", null);\n    __decorate([\n        action\n    ], BaseEdgeModel.prototype, \"updateAfterAdjustStartAndEnd\", null);\n    __decorate([\n        action\n    ], BaseEdgeModel.prototype, \"updateZIndexByOverlap\", null);\n    return BaseEdgeModel;\n}());\nexport { BaseEdgeModel };\nexport default BaseEdgeModel;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { get, assign, cloneDeep } from 'lodash-es';\nimport { action, observable } from 'mobx';\nimport BaseEdgeModel from './BaseEdgeModel';\nimport { ModelType } from '../../constant';\nimport { getBezierControlPoints } from '../../util';\nvar BezierEdgeModel = /** @class */ (function (_super) {\n    __extends(BezierEdgeModel, _super);\n    function BezierEdgeModel(data, graphModel) {\n        var _this = _super.call(this, data, graphModel) || this;\n        _this.modelType = ModelType.BEZIER_EDGE;\n        _this.path = '';\n        _this.initEdgeData(data);\n        _this.setAttributes();\n        return _this;\n    }\n    BezierEdgeModel.prototype.initEdgeData = function (data) {\n        this.offset = get(data, 'properties.offset', 100);\n        _super.prototype.initEdgeData.call(this, data);\n    };\n    BezierEdgeModel.prototype.getEdgeStyle = function () {\n        var bezier = this.graphModel.theme.bezier;\n        var style = _super.prototype.getEdgeStyle.call(this);\n        var _a = this.properties.style, customStyle = _a === void 0 ? {} : _a;\n        return __assign(__assign(__assign({}, style), cloneDeep(bezier)), cloneDeep(customStyle));\n    };\n    BezierEdgeModel.prototype.getTextPosition = function () {\n        if (this.pointsList && this.pointsList.length > 0) {\n            var pointsXSum_1 = 0;\n            var pointsYSum_1 = 0;\n            this.pointsList.forEach(function (_a) {\n                var x = _a.x, y = _a.y;\n                pointsXSum_1 += x;\n                pointsYSum_1 += y;\n            });\n            return {\n                x: pointsXSum_1 / this.pointsList.length,\n                y: pointsYSum_1 / this.pointsList.length,\n            };\n        }\n        return {\n            x: (this.startPoint.x + this.endPoint.x) / 2,\n            y: (this.startPoint.y + this.endPoint.y) / 2,\n        };\n    };\n    BezierEdgeModel.prototype.getData = function () {\n        var data = _super.prototype.getData.call(this);\n        var pointsList = this.pointsList.map(function (_a) {\n            var x = _a.x, y = _a.y;\n            return ({ x: x, y: y });\n        });\n        return __assign(__assign({}, data), { pointsList: pointsList });\n    };\n    /*  */\n    BezierEdgeModel.prototype.getControls = function () {\n        var start = this.startPoint;\n        var end = this.endPoint;\n        var points = getBezierControlPoints({\n            start: start,\n            end: end,\n            sourceNode: this.sourceNode,\n            targetNode: this.targetNode,\n            offset: this.offset,\n        });\n        return points;\n    };\n    /* path */\n    BezierEdgeModel.prototype.getPath = function (points) {\n        var _a = __read(points, 4), start = _a[0], sNext = _a[1], ePre = _a[2], end = _a[3];\n        return \"M \".concat(start.x, \" \").concat(start.y, \"\\n    C \").concat(sNext.x, \" \").concat(sNext.y, \",\\n    \").concat(ePre.x, \" \").concat(ePre.y, \",\\n    \").concat(end.x, \" \").concat(end.y);\n    };\n    BezierEdgeModel.prototype.initPoints = function () {\n        if (this.pointsList.length > 0) {\n            this.path = this.getPath(this.pointsList);\n        }\n        else {\n            this.updatePoints();\n        }\n    };\n    BezierEdgeModel.prototype.updatePoints = function () {\n        var _a = this.getControls(), sNext = _a.sNext, ePre = _a.ePre;\n        this.updatePath(sNext, ePre);\n    };\n    BezierEdgeModel.prototype.updatePath = function (sNext, ePre) {\n        sNext = cloneDeep(sNext);\n        ePre = cloneDeep(ePre);\n        var start = {\n            x: this.startPoint.x,\n            y: this.startPoint.y,\n        };\n        var end = {\n            x: this.endPoint.x,\n            y: this.endPoint.y,\n        };\n        if (!sNext || !ePre) {\n            var control = this.getControls();\n            sNext = control.sNext;\n            ePre = control.ePre;\n        }\n        this.pointsList = [start, sNext, ePre, end];\n        this.path = this.getPath(this.pointsList);\n    };\n    BezierEdgeModel.prototype.updateStartPoint = function (anchor) {\n        this.startPoint = Object.assign({}, anchor);\n        this.updatePoints();\n    };\n    BezierEdgeModel.prototype.updateEndPoint = function (anchor) {\n        this.endPoint = Object.assign({}, anchor);\n        this.updatePoints();\n    };\n    BezierEdgeModel.prototype.moveStartPoint = function (deltaX, deltaY) {\n        this.startPoint.x += deltaX;\n        this.startPoint.y += deltaY;\n        var _a = __read(this.pointsList, 3), sNext = _a[1], ePre = _a[2];\n        // \n        sNext.x += deltaX;\n        sNext.y += deltaY;\n        this.updatePath(sNext, ePre);\n    };\n    BezierEdgeModel.prototype.moveEndPoint = function (deltaX, deltaY) {\n        this.endPoint.x += deltaX;\n        this.endPoint.y += deltaY;\n        var _a = __read(this.pointsList, 3), sNext = _a[1], ePre = _a[2];\n        // \n        ePre.x += deltaX;\n        ePre.y += deltaY;\n        this.updatePath(sNext, ePre);\n    };\n    BezierEdgeModel.prototype.updateAdjustAnchor = function (anchor, type) {\n        var _a;\n        if (type === 'sNext') {\n            this.pointsList[1] = anchor;\n        }\n        else if (type === 'ePre') {\n            this.pointsList[2] = anchor;\n        }\n        this.path = this.getPath(this.pointsList);\n        if ((_a = this.text) === null || _a === void 0 ? void 0 : _a.value) {\n            this.setText(assign({}, this.text, this.textPosition));\n        }\n    };\n    // \n    BezierEdgeModel.prototype.getAdjustStart = function () {\n        return this.pointsList[0] || this.startPoint;\n    };\n    // \n    BezierEdgeModel.prototype.getAdjustEnd = function () {\n        var pointsList = this.pointsList;\n        return pointsList[pointsList.length - 1] || this.endPoint;\n    };\n    // \n    BezierEdgeModel.prototype.updateAfterAdjustStartAndEnd = function (_a) {\n        var startPoint = _a.startPoint, endPoint = _a.endPoint, sourceNode = _a.sourceNode, targetNode = _a.targetNode;\n        var _b = getBezierControlPoints({\n            start: startPoint,\n            end: endPoint,\n            sourceNode: sourceNode,\n            targetNode: targetNode,\n            offset: this.offset,\n        }), sNext = _b.sNext, ePre = _b.ePre;\n        this.pointsList = [startPoint, sNext, ePre, endPoint];\n        this.initPoints();\n    };\n    __decorate([\n        observable\n    ], BezierEdgeModel.prototype, \"offset\", void 0);\n    __decorate([\n        observable\n    ], BezierEdgeModel.prototype, \"path\", void 0);\n    __decorate([\n        action\n    ], BezierEdgeModel.prototype, \"initPoints\", null);\n    __decorate([\n        action\n    ], BezierEdgeModel.prototype, \"updatePoints\", null);\n    __decorate([\n        action\n    ], BezierEdgeModel.prototype, \"updateStartPoint\", null);\n    __decorate([\n        action\n    ], BezierEdgeModel.prototype, \"updateEndPoint\", null);\n    __decorate([\n        action\n    ], BezierEdgeModel.prototype, \"moveStartPoint\", null);\n    __decorate([\n        action\n    ], BezierEdgeModel.prototype, \"moveEndPoint\", null);\n    __decorate([\n        action\n    ], BezierEdgeModel.prototype, \"updateAdjustAnchor\", null);\n    __decorate([\n        action\n    ], BezierEdgeModel.prototype, \"getAdjustStart\", null);\n    __decorate([\n        action\n    ], BezierEdgeModel.prototype, \"getAdjustEnd\", null);\n    __decorate([\n        action\n    ], BezierEdgeModel.prototype, \"updateAfterAdjustStartAndEnd\", null);\n    return BezierEdgeModel;\n}(BaseEdgeModel));\nexport { BezierEdgeModel };\nexport default BezierEdgeModel;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { cloneDeep } from 'lodash-es';\nimport BaseEdgeModel from './BaseEdgeModel';\nimport { ModelType } from '../../constant';\nvar LineEdgeModel = /** @class */ (function (_super) {\n    __extends(LineEdgeModel, _super);\n    function LineEdgeModel() {\n        var _this = _super.apply(this, __spreadArray([], __read(arguments), false)) || this;\n        _this.modelType = ModelType.LINE_EDGE;\n        return _this;\n    }\n    LineEdgeModel.prototype.getEdgeStyle = function () {\n        var line = this.graphModel.theme.line;\n        var style = _super.prototype.getEdgeStyle.call(this);\n        var _a = this.properties.style, customStyle = _a === void 0 ? {} : _a;\n        return __assign(__assign(__assign({}, style), cloneDeep(line)), cloneDeep(customStyle));\n    };\n    LineEdgeModel.prototype.initEdgeData = function (data) {\n        _super.prototype.initEdgeData.call(this, data);\n        this.points = this.getPath([this.startPoint, this.endPoint]);\n    };\n    LineEdgeModel.prototype.getPath = function (points) {\n        var _a = __read(points, 2), start = _a[0], end = _a[1];\n        return \"\".concat(start.x, \",\").concat(start.y, \" \").concat(end.x, \",\").concat(end.y);\n    };\n    LineEdgeModel.prototype.getTextPosition = function () {\n        return {\n            x: (this.startPoint.x + this.endPoint.x) / 2,\n            y: (this.startPoint.y + this.endPoint.y) / 2,\n        };\n    };\n    return LineEdgeModel;\n}(BaseEdgeModel));\nexport { LineEdgeModel };\nexport default LineEdgeModel;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { get, assign, cloneDeep } from 'lodash-es';\nimport { observable, action } from 'mobx';\nimport { BaseEdgeModel } from '.';\nimport { ModelType, SegmentDirection } from '../../constant';\nimport { isInNode, distance, getClosestRadiusCenter, inStraightLineOfRect, getCrossPointWithCircle, getCrossPointWithEllipse, getCrossPointWithPolygon, getPolylinePoints, getLongestEdge, getCrossPointInRect, isSegmentsInNode, isSegmentsCrossNode, segmentDirection, points2PointsList, pointFilter, } from '../../util';\nvar PolylineEdgeModel = /** @class */ (function (_super) {\n    __extends(PolylineEdgeModel, _super);\n    function PolylineEdgeModel() {\n        var _this = _super.apply(this, __spreadArray([], __read(arguments), false)) || this;\n        _this.modelType = ModelType.POLYLINE_EDGE;\n        _this.draggingPointList = [];\n        return _this;\n    }\n    PolylineEdgeModel.prototype.initEdgeData = function (data) {\n        this.offset = get(data, 'properties.offset', 30);\n        if (data.pointsList) {\n            this.pointsList = data.pointsList;\n        }\n        _super.prototype.initEdgeData.call(this, data);\n    };\n    PolylineEdgeModel.prototype.getEdgeStyle = function () {\n        var polyline = this.graphModel.theme.polyline;\n        var style = _super.prototype.getEdgeStyle.call(this);\n        var _a = this.properties.style, customStyle = _a === void 0 ? {} : _a;\n        return __assign(__assign(__assign({}, style), cloneDeep(polyline)), cloneDeep(customStyle));\n    };\n    PolylineEdgeModel.prototype.getTextPosition = function () {\n        var _a;\n        // \n        var textValue = (_a = this.text) === null || _a === void 0 ? void 0 : _a.value;\n        if (this.dbClickPosition && !textValue) {\n            var _b = this.dbClickPosition, x = _b.x, y = _b.y;\n            return { x: x, y: y };\n        }\n        // \n        var currentPositionList = points2PointsList(this.points);\n        var _c = __read(getLongestEdge(currentPositionList), 2), p1 = _c[0], p2 = _c[1];\n        return {\n            x: (p1.x + p2.x) / 2,\n            y: (p1.y + p2.y) / 2,\n        };\n    };\n    // \n    PolylineEdgeModel.prototype.getAfterAnchor = function (direction, position, anchorList) {\n        var anchor;\n        var minDistance;\n        anchorList.forEach(function (item) {\n            var distanceX;\n            if (direction === SegmentDirection.HORIZONTAL) {\n                distanceX = Math.abs(position.y - item.y);\n            }\n            else if (direction === SegmentDirection.VERTICAL) {\n                distanceX = Math.abs(position.x - item.x);\n            }\n            if (!minDistance || minDistance > distanceX) {\n                minDistance = distanceX;\n                anchor = item;\n            }\n        });\n        return anchor;\n    };\n    /*  */\n    PolylineEdgeModel.prototype.getCrossPoint = function (direction, start, end) {\n        var position;\n        if (direction === SegmentDirection.HORIZONTAL) {\n            position = {\n                x: end.x,\n                y: start.y,\n            };\n        }\n        else if (direction === SegmentDirection.VERTICAL) {\n            position = {\n                x: start.x,\n                y: end.y,\n            };\n        }\n        return position;\n    };\n    // \n    PolylineEdgeModel.prototype.removeCrossPoints = function (startIndex, endIndex, pointList) {\n        var list = pointList.map(function (i) { return i; });\n        if (startIndex === 1) {\n            var start_1 = list[startIndex];\n            var end = list[endIndex];\n            var pre_1 = list[startIndex - 1];\n            var isInStartNode = isSegmentsInNode(pre_1, start_1, this.sourceNode);\n            if (isInStartNode) {\n                var isSegmentsCrossStartNode = isSegmentsCrossNode(start_1, end, this.sourceNode);\n                if (isSegmentsCrossStartNode) {\n                    var point = getCrossPointInRect(start_1, end, this.sourceNode);\n                    if (point) {\n                        list[startIndex] = point;\n                        list.splice(startIndex - 1, 1);\n                        startIndex--;\n                        endIndex--;\n                    }\n                }\n            }\n            else {\n                var anchorList = this.sourceNode.anchors;\n                anchorList.forEach(function (item) {\n                    if ((item.x === pre_1.x && item.x === start_1.x) ||\n                        (item.y === pre_1.y && item.y === start_1.y)) {\n                        var distance1 = distance(item.x, item.y, start_1.x, start_1.y);\n                        var distance2 = distance(pre_1.x, pre_1.y, start_1.x, start_1.y);\n                        if (distance1 < distance2) {\n                            list[startIndex - 1] = item;\n                        }\n                    }\n                });\n            }\n        }\n        if (endIndex === pointList.length - 2) {\n            var start = list[startIndex];\n            var end_1 = list[endIndex];\n            var next_1 = list[endIndex + 1];\n            var isInEndNode = isSegmentsInNode(end_1, next_1, this.targetNode);\n            if (isInEndNode) {\n                var isSegmentsCrossStartNode = isSegmentsCrossNode(start, end_1, this.targetNode);\n                if (isSegmentsCrossStartNode) {\n                    var point = getCrossPointInRect(start, end_1, this.targetNode);\n                    if (point) {\n                        list[endIndex] = point;\n                        list.splice(endIndex + 1, 1);\n                    }\n                }\n            }\n            else {\n                var anchorList = this.targetNode.anchors;\n                anchorList.forEach(function (item) {\n                    if ((item.x === next_1.x && item.x === end_1.x) ||\n                        (item.y === next_1.y && item.y === end_1.y)) {\n                        var distance1 = distance(item.x, item.y, end_1.x, end_1.y);\n                        var distance2 = distance(next_1.x, next_1.y, end_1.x, end_1.y);\n                        if (distance1 < distance2) {\n                            list[endIndex + 1] = item;\n                        }\n                    }\n                });\n            }\n        }\n        return list;\n    };\n    // \n    PolylineEdgeModel.prototype.getDraggingPoints = function (direction, positionType, position, anchorList, draggingPointList) {\n        var pointList = draggingPointList.map(function (i) { return i; });\n        var anchor = this.getAfterAnchor(direction, position, anchorList);\n        var crossPoint = this.getCrossPoint(direction, position, anchor);\n        if (positionType === 'start') {\n            pointList.unshift(crossPoint);\n            pointList.unshift(anchor);\n        }\n        else {\n            pointList.push(crossPoint);\n            pointList.push(anchor);\n        }\n        return pointList;\n    };\n    // [], observableaction\n    PolylineEdgeModel.prototype.updateCrossPoints = function (pointList) {\n        var list = pointList.map(function (i) { return i; });\n        var start = pointList[0];\n        var next = pointList[1];\n        var pre = pointList[list.length - 2];\n        var end = pointList[list.length - 1];\n        var _a = this, sourceNode = _a.sourceNode, targetNode = _a.targetNode;\n        var sourceModelType = sourceNode.modelType;\n        var targetModelType = targetNode.modelType;\n        var startPointDirection = segmentDirection(start, next);\n        var startCrossPoint = list[0];\n        switch (sourceModelType) {\n            case ModelType.RECT_NODE:\n                if (sourceNode.radius !== 0) {\n                    var inInnerNode = inStraightLineOfRect(start, sourceNode);\n                    if (!inInnerNode) {\n                        startCrossPoint = getClosestRadiusCenter(start, startPointDirection, sourceNode);\n                    }\n                }\n                break;\n            case ModelType.CIRCLE_NODE:\n                startCrossPoint = getCrossPointWithCircle(start, startPointDirection, sourceNode);\n                break;\n            case ModelType.ELLIPSE_NODE:\n                startCrossPoint = getCrossPointWithEllipse(start, startPointDirection, sourceNode);\n                break;\n            case ModelType.DIAMOND_NODE:\n                startCrossPoint = getCrossPointWithPolygon(start, startPointDirection, sourceNode);\n                break;\n            case ModelType.POLYGON_NODE:\n                startCrossPoint = getCrossPointWithPolygon(start, startPointDirection, sourceNode);\n                break;\n            default:\n                break;\n        }\n        // startCrossPointundefined\n        if (startCrossPoint) {\n            list[0] = startCrossPoint;\n        }\n        var endPointDirection = segmentDirection(pre, end);\n        var endCrossPoint = list[list.length - 1];\n        switch (targetModelType) {\n            case ModelType.RECT_NODE:\n                if (targetNode.radius !== 0) {\n                    var inInnerNode = inStraightLineOfRect(end, targetNode);\n                    if (!inInnerNode) {\n                        endCrossPoint = getClosestRadiusCenter(end, endPointDirection, targetNode);\n                    }\n                }\n                break;\n            case ModelType.CIRCLE_NODE:\n                endCrossPoint = getCrossPointWithCircle(end, endPointDirection, targetNode);\n                break;\n            case ModelType.ELLIPSE_NODE:\n                endCrossPoint = getCrossPointWithEllipse(end, endPointDirection, targetNode);\n                break;\n            case ModelType.DIAMOND_NODE:\n                endCrossPoint = getCrossPointWithPolygon(end, endPointDirection, targetNode);\n                break;\n            case ModelType.POLYGON_NODE:\n                endCrossPoint = getCrossPointWithPolygon(end, endPointDirection, targetNode);\n                break;\n            default:\n                break;\n        }\n        // startCrossPointundefined\n        if (endCrossPoint) {\n            list[list.length - 1] = endCrossPoint;\n        }\n        return list;\n    };\n    PolylineEdgeModel.prototype.updatePath = function (pointList) {\n        this.pointsList = pointList;\n        this.points = this.getPath(this.pointsList);\n    };\n    PolylineEdgeModel.prototype.getData = function () {\n        var data = _super.prototype.getData.call(this);\n        var pointsList = this.pointsList.map(function (_a) {\n            var x = _a.x, y = _a.y;\n            return ({\n                x: x,\n                y: y,\n            });\n        });\n        return Object.assign({}, data, {\n            pointsList: pointsList,\n        });\n    };\n    PolylineEdgeModel.prototype.getPath = function (points) {\n        return points.map(function (point) { return \"\".concat(point.x, \",\").concat(point.y); }).join(' ');\n    };\n    PolylineEdgeModel.prototype.initPoints = function () {\n        if (this.pointsList.length > 0) {\n            this.points = this.getPath(this.pointsList);\n        }\n        else {\n            this.updatePoints();\n        }\n    };\n    PolylineEdgeModel.prototype.updatePoints = function () {\n        var pointsList = getPolylinePoints({\n            x: this.startPoint.x,\n            y: this.startPoint.y,\n        }, {\n            x: this.endPoint.x,\n            y: this.endPoint.y,\n        }, this.sourceNode, this.targetNode, this.offset || 0);\n        this.pointsList = pointsList;\n        this.points = pointsList.map(function (point) { return \"\".concat(point.x, \",\").concat(point.y); }).join(' ');\n    };\n    PolylineEdgeModel.prototype.updateStartPoint = function (anchor) {\n        this.startPoint = Object.assign({}, anchor);\n        this.updatePoints();\n    };\n    PolylineEdgeModel.prototype.moveStartPoint = function (deltaX, deltaY) {\n        this.startPoint.x += deltaX;\n        this.startPoint.y += deltaY;\n        this.updatePoints();\n        // todo: , deltaXdeltaYpointsList\n    };\n    PolylineEdgeModel.prototype.updateEndPoint = function (anchor) {\n        this.endPoint = Object.assign({}, anchor);\n        this.updatePoints();\n    };\n    PolylineEdgeModel.prototype.moveEndPoint = function (deltaX, deltaY) {\n        this.endPoint.x += deltaX;\n        this.endPoint.y += deltaY;\n        this.updatePoints();\n    };\n    PolylineEdgeModel.prototype.updatePointsList = function (deltaX, deltaY) {\n        this.pointsList.forEach(function (item) {\n            item.x += deltaX;\n            item.y += deltaY;\n        });\n        var startPoint = this.pointsList[0];\n        this.startPoint = Object.assign({}, startPoint);\n        var endPoint = this.pointsList[this.pointsList.length - 1];\n        this.endPoint = Object.assign({}, endPoint);\n        this.initPoints();\n    };\n    PolylineEdgeModel.prototype.dragAppendStart = function () {\n        // mobx observer iterator\n        this.draggingPointList = this.pointsList.map(function (i) { return i; });\n    };\n    PolylineEdgeModel.prototype.dragAppendSimple = function (appendInfo, dragInfo) {\n        var _a;\n        // dragmouseDownisDragging\n        // dragStartdragEndisDragginghistory\n        this.isDragging = true;\n        var start = appendInfo.start, end = appendInfo.end, startIndex = appendInfo.startIndex, endIndex = appendInfo.endIndex, direction = appendInfo.direction;\n        var pointsList = this.pointsList;\n        var draggingPointList = pointsList;\n        if (direction === SegmentDirection.HORIZONTAL) {\n            // y\n            pointsList[startIndex] = {\n                x: start.x,\n                y: start.y + dragInfo.y,\n            };\n            pointsList[endIndex] = {\n                x: end.x,\n                y: end.y + dragInfo.y,\n            };\n            draggingPointList = this.pointsList.map(function (i) { return i; });\n        }\n        else if (direction === SegmentDirection.VERTICAL) {\n            // x \n            pointsList[startIndex] = {\n                x: start.x + dragInfo.x,\n                y: start.y,\n            };\n            pointsList[endIndex] = {\n                x: end.x + dragInfo.x,\n                y: end.y,\n            };\n            draggingPointList = this.pointsList.map(function (i) { return i; });\n        }\n        this.updatePointsAfterDrag(draggingPointList);\n        this.draggingPointList = draggingPointList;\n        // TODO: \n        if ((_a = this.text) === null || _a === void 0 ? void 0 : _a.value) {\n            this.setText(assign({}, this.text, this.textPosition));\n        }\n        return {\n            start: assign({}, pointsList[startIndex]),\n            end: assign({}, pointsList[endIndex]),\n            startIndex: startIndex,\n            endIndex: endIndex,\n            direction: direction,\n        };\n    };\n    PolylineEdgeModel.prototype.dragAppend = function (appendInfo, dragInfo) {\n        var _a;\n        this.isDragging = true;\n        var start = appendInfo.start, end = appendInfo.end, startIndex = appendInfo.startIndex, endIndex = appendInfo.endIndex, direction = appendInfo.direction;\n        var pointsList = this.pointsList;\n        if (direction === SegmentDirection.HORIZONTAL) {\n            // y\n            // step1: \n            pointsList[startIndex] = {\n                x: start.x,\n                y: start.y + dragInfo.y,\n            };\n            pointsList[endIndex] = {\n                x: end.x,\n                y: end.y + dragInfo.y,\n            };\n            // step2: ,\n            // list\n            var draggingPointList = this.pointsList.map(function (i) { return i; });\n            if (startIndex !== 0 && endIndex !== this.pointsList.length - 1) {\n                // 2.1)\n                draggingPointList = this.removeCrossPoints(startIndex, endIndex, draggingPointList);\n            }\n            if (startIndex === 0) {\n                // 2.2), \n                var startPosition = {\n                    x: start.x,\n                    y: start.y + dragInfo.y,\n                };\n                var inNode = isInNode(startPosition, this.sourceNode);\n                if (!inNode) {\n                    // \n                    var anchorList = this.sourceNode.anchors;\n                    draggingPointList = this.getDraggingPoints(direction, 'start', startPosition, anchorList, draggingPointList);\n                }\n            }\n            if (endIndex === this.pointsList.length - 1) {\n                // 2.2), \n                var endPosition = {\n                    x: end.x,\n                    y: end.y + dragInfo.y,\n                };\n                var inNode = isInNode(endPosition, this.targetNode);\n                if (!inNode) {\n                    // \n                    var anchorList = this.targetNode.anchors;\n                    draggingPointList = this.getDraggingPoints(direction, 'end', endPosition, anchorList, draggingPointList);\n                }\n            }\n            this.updatePointsAfterDrag(draggingPointList);\n            // step3: updatePointsAfterDrag\n            this.draggingPointList = draggingPointList;\n        }\n        else if (direction === SegmentDirection.VERTICAL) {\n            // x \n            pointsList[startIndex] = {\n                x: start.x + dragInfo.x,\n                y: start.y,\n            };\n            pointsList[endIndex] = {\n                x: end.x + dragInfo.x,\n                y: end.y,\n            };\n            var draggingPointList = this.pointsList.map(function (i) { return i; });\n            if (startIndex !== 0 && endIndex !== this.pointsList.length - 1) {\n                draggingPointList = this.removeCrossPoints(startIndex, endIndex, draggingPointList);\n            }\n            if (startIndex === 0) {\n                var startPosition = {\n                    x: start.x + dragInfo.x,\n                    y: start.y,\n                };\n                var inNode = isInNode(startPosition, this.sourceNode);\n                if (!inNode) {\n                    var anchorList = this.sourceNode.anchors;\n                    draggingPointList = this.getDraggingPoints(direction, 'start', startPosition, anchorList, draggingPointList);\n                }\n            }\n            if (endIndex === this.pointsList.length - 1) {\n                var endPosition = {\n                    x: end.x + dragInfo.x,\n                    y: end.y,\n                };\n                var inNode = isInNode(endPosition, this.targetNode);\n                if (!inNode) {\n                    var anchorList = this.targetNode.anchors;\n                    draggingPointList = this.getDraggingPoints(direction, 'end', endPosition, anchorList, draggingPointList);\n                }\n            }\n            this.updatePointsAfterDrag(draggingPointList);\n            this.draggingPointList = draggingPointList;\n        }\n        // TODO: \n        if ((_a = this.text) === null || _a === void 0 ? void 0 : _a.value) {\n            this.setText(assign({}, this.text, this.textPosition));\n        }\n        return {\n            start: assign({}, pointsList[startIndex]),\n            end: assign({}, pointsList[endIndex]),\n            startIndex: startIndex,\n            endIndex: endIndex,\n            direction: direction,\n        };\n    };\n    PolylineEdgeModel.prototype.dragAppendEnd = function () {\n        if (this.draggingPointList) {\n            var pointsList = pointFilter(points2PointsList(this.points));\n            // pointsListappendWidth\n            this.pointsList = pointsList.map(function (i) { return i; });\n            // draggingPointList\n            this.draggingPointList = [];\n            // \n            var startPoint = pointsList[0];\n            this.startPoint = assign({}, startPoint);\n            var endPoint = pointsList[pointsList.length - 1];\n            this.endPoint = assign({}, endPoint);\n        }\n        this.isDragging = false;\n    };\n    /* pointspointsList\n       appendWidthpointsList,pointsListappendWidth\n       pointsList\n    */\n    PolylineEdgeModel.prototype.updatePointsAfterDrag = function (pointsList) {\n        // ,points, points\n        var list = this.updateCrossPoints(pointsList);\n        this.points = list.map(function (point) { return \"\".concat(point.x, \",\").concat(point.y); }).join(' ');\n    };\n    // \n    PolylineEdgeModel.prototype.getAdjustStart = function () {\n        return this.pointsList[0] || this.startPoint;\n    };\n    // \n    PolylineEdgeModel.prototype.getAdjustEnd = function () {\n        var pointsList = this.pointsList;\n        return pointsList[pointsList.length - 1] || this.endPoint;\n    };\n    // \n    PolylineEdgeModel.prototype.updateAfterAdjustStartAndEnd = function (_a) {\n        var startPoint = _a.startPoint, endPoint = _a.endPoint, sourceNode = _a.sourceNode, targetNode = _a.targetNode;\n        this.pointsList = getPolylinePoints({\n            x: startPoint.x,\n            y: startPoint.y,\n        }, {\n            x: endPoint.x,\n            y: endPoint.y,\n        }, sourceNode, targetNode, this.offset || 0);\n        this.initPoints();\n    };\n    __decorate([\n        observable\n    ], PolylineEdgeModel.prototype, \"offset\", void 0);\n    __decorate([\n        observable\n    ], PolylineEdgeModel.prototype, \"dbClickPosition\", void 0);\n    __decorate([\n        action\n    ], PolylineEdgeModel.prototype, \"initPoints\", null);\n    __decorate([\n        action\n    ], PolylineEdgeModel.prototype, \"updatePoints\", null);\n    __decorate([\n        action\n    ], PolylineEdgeModel.prototype, \"updateStartPoint\", null);\n    __decorate([\n        action\n    ], PolylineEdgeModel.prototype, \"moveStartPoint\", null);\n    __decorate([\n        action\n    ], PolylineEdgeModel.prototype, \"updateEndPoint\", null);\n    __decorate([\n        action\n    ], PolylineEdgeModel.prototype, \"moveEndPoint\", null);\n    __decorate([\n        action\n    ], PolylineEdgeModel.prototype, \"updatePointsList\", null);\n    __decorate([\n        action\n    ], PolylineEdgeModel.prototype, \"dragAppendStart\", null);\n    __decorate([\n        action\n    ], PolylineEdgeModel.prototype, \"dragAppendSimple\", null);\n    __decorate([\n        action\n    ], PolylineEdgeModel.prototype, \"dragAppend\", null);\n    __decorate([\n        action\n    ], PolylineEdgeModel.prototype, \"dragAppendEnd\", null);\n    __decorate([\n        action\n    ], PolylineEdgeModel.prototype, \"updatePointsAfterDrag\", null);\n    __decorate([\n        action\n    ], PolylineEdgeModel.prototype, \"getAdjustStart\", null);\n    __decorate([\n        action\n    ], PolylineEdgeModel.prototype, \"getAdjustEnd\", null);\n    __decorate([\n        action\n    ], PolylineEdgeModel.prototype, \"updateAfterAdjustStartAndEnd\", null);\n    return PolylineEdgeModel;\n}(BaseEdgeModel));\nexport { PolylineEdgeModel };\nexport default PolylineEdgeModel;\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { action, computed, isObservable, observable, toJS } from 'mobx';\nimport { assign, cloneDeep, has, isNil, mapKeys, isUndefined, set, } from 'lodash-es';\nimport { createUuid, formatData, getClosestAnchor, getZIndex, Matrix, pickNodeConfig, TranslateMatrix, } from '../../util';\nimport { ElementState, ElementType, EventType, ModelType, OverlapMode, TextMode, } from '../../constant';\nvar BaseNodeModel = /** @class */ (function () {\n    function BaseNodeModel(data, graphModel) {\n        var _a;\n        this.BaseType = ElementType.NODE;\n        // \n        this.id = '';\n        this.type = '';\n        this.x = 0;\n        this.y = 0;\n        this.textMode = TextMode.TEXT;\n        this.text = {\n            value: '',\n            x: 0,\n            y: 0,\n            draggable: false,\n            editable: true,\n        };\n        // \n        this._width = 100;\n        this._height = 80;\n        this.minWidth = 30;\n        this.minHeight = 30;\n        this.maxWidth = 2000;\n        this.maxHeight = 2000;\n        //  (x, y)  anchors \n        this.anchorsOffset = [];\n        // \n        this.virtual = false;\n        this.isSelected = false;\n        this.isHovered = false;\n        this.isShowAnchor = false;\n        this.isDragging = false;\n        this.isHitable = true; // TODO:  Remove\n        this.isHittable = true; // \n        this.draggable = true;\n        this.visible = true;\n        this.rotatable = true; // \n        this.resizable = true; // \n        this.zIndex = 1;\n        this.state = ElementState.DEFAULT;\n        this.autoToFront = true; // true.\n        this.style = {}; // \n        this._rotate = 0;\n        this.modelType = ModelType.NODE;\n        this.additionStateData = {};\n        // \n        this.targetRules = [];\n        this.sourceRules = [];\n        this.moveRules = []; // hook\n        this.resizeRules = []; // resizehook\n        this.hasSetTargetRules = false; // rules\n        this.hasSetSourceRules = false; // rules\n        this.graphModel = graphModel;\n        this.properties = (_a = data.properties) !== null && _a !== void 0 ? _a : {};\n        this.initNodeData(data);\n        this.setAttributes();\n    }\n    Object.defineProperty(BaseNodeModel.prototype, \"width\", {\n        get: function () {\n            return this._width;\n        },\n        set: function (value) {\n            this._width = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BaseNodeModel.prototype, \"height\", {\n        get: function () {\n            return this._height;\n        },\n        set: function (value) {\n            this._height = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BaseNodeModel.prototype, \"rotate\", {\n        get: function () {\n            return this._rotate;\n        },\n        set: function (value) {\n            this._rotate = value;\n            var _a = this, _b = _a.x, x = _b === void 0 ? 0 : _b, _c = _a.y, y = _c === void 0 ? 0 : _c;\n            this.transform = new TranslateMatrix(-x, -y)\n                .rotate(value)\n                .translate(x, y)\n                .toString();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BaseNodeModel.prototype, \"incoming\", {\n        /**\n         * \n         */\n        get: function () {\n            return {\n                nodes: this.graphModel.getNodeIncomingNode(this.id),\n                edges: this.graphModel.getNodeIncomingEdge(this.id),\n            };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BaseNodeModel.prototype, \"outgoing\", {\n        /*\n         * \n         */\n        get: function () {\n            return {\n                nodes: this.graphModel.getNodeOutgoingNode(this.id),\n                edges: this.graphModel.getNodeOutgoingEdge(this.id),\n            };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * @overridable \n     * \n     * initNodeData  setAttributes \n     * initNodeData \n     * setAttributes  properties \n     */\n    BaseNodeModel.prototype.initNodeData = function (data) {\n        var _this = this;\n        if (!data.properties) {\n            data.properties = {};\n        }\n        if (!data.id) {\n            // id > id > \n            var idGenerator = this.graphModel.idGenerator;\n            var globalId = idGenerator && idGenerator(data.type);\n            var nodeId = this.createId();\n            data.id = nodeId || globalId || createUuid();\n        }\n        this.formatText(data);\n        //  NodeConfig  this setAttributes\n        // TODO:  constructor  properties  NodeConfig  this rotaterotatableresizable \n        assign(this, pickNodeConfig(data));\n        var _a = this.graphModel, overlapMode = _a.overlapMode, eventCenter = _a.eventCenter;\n        this.updateZIndexByOverlap(overlapMode, data.zIndex || getZIndex());\n        eventCenter.on('overlap:change', function (data) {\n            var newMode = data.overlapMode;\n            _this.updateZIndexByOverlap(newMode, _this.zIndex || getZIndex());\n        });\n    };\n    /**\n     * modelproperties\n     * \n     * @example\n     *\n     * setAttributes () {\n     *   this.width = 300\n     *   this.height = 200\n     * }\n     *\n     * @overridable \n     */\n    BaseNodeModel.prototype.setAttributes = function () { };\n    /**\n     * @overridable \n     * @returns string | null\n     */\n    BaseNodeModel.prototype.createId = function () {\n        return null;\n    };\n    /**\n     * \n     * @param mode\n     */\n    BaseNodeModel.prototype.setTextMode = function (mode) {\n        this.textMode = mode;\n    };\n    /**\n     * \n     */\n    BaseNodeModel.prototype.formatText = function (data) {\n        var _a, _b, _c;\n        var _d = this.graphModel.editConfigModel, nodeTextDraggable = _d.nodeTextDraggable, nodeTextEdit = _d.nodeTextEdit;\n        var x = data.x, y = data.y, text = data.text;\n        var textConfig = {\n            value: '',\n            x: x,\n            y: y,\n            draggable: nodeTextDraggable,\n            editable: nodeTextEdit,\n        };\n        if (text) {\n            if (typeof text === 'string') {\n                textConfig.value = text;\n            }\n            else {\n                textConfig = __assign(__assign({}, textConfig), { x: (_a = text.x) !== null && _a !== void 0 ? _a : x, y: (_b = text.y) !== null && _b !== void 0 ? _b : y, value: (_c = text.value) !== null && _c !== void 0 ? _c : '' });\n                if (!isUndefined(text.draggable)) {\n                    textConfig.draggable = text.draggable;\n                }\n                if (!isUndefined(text.editable)) {\n                    textConfig.editable = text.editable;\n                }\n            }\n        }\n        data.text = textConfig;\n    };\n    /**\n     * @overridable \n     *  resize \n     */\n    BaseNodeModel.prototype.resize = function (resizeInfo) {\n        var width = resizeInfo.width, height = resizeInfo.height, deltaX = resizeInfo.deltaX, deltaY = resizeInfo.deltaY;\n        var isAllowResize = this.isAllowResizeNode(deltaX, deltaY, width, height);\n        if (!isAllowResize) {\n            return this.getData();\n        }\n        // \n        this.move(deltaX / 2, deltaY / 2);\n        this.width = width;\n        this.height = height;\n        this.setProperties({\n            width: width,\n            height: height,\n        });\n        return this.getData();\n    };\n    // TODO: \n    BaseNodeModel.prototype.proportionalResize = function () { };\n    /**\n     * \n     * @overridable \n     */\n    BaseNodeModel.prototype.getData = function () {\n        var _a = this.text, x = _a.x, y = _a.y, value = _a.value;\n        var properties = this.properties;\n        if (isObservable(properties)) {\n            properties = toJS(properties);\n        }\n        if (isNil(properties.width)) {\n            // resize()this.setProperties({width,height})\n            // getData()propertieswidth\n            // propertieswidthgetData()propertieswidth\n            properties.width = this.width;\n        }\n        if (isNil(properties.height)) {\n            // resize()this.setProperties({width,height})\n            // getData()propertiesheight\n            // propertiesheightgetData()propertieswidth\n            properties.height = this.height;\n        }\n        var data = {\n            id: this.id,\n            type: this.type,\n            x: this.x,\n            y: this.y,\n            properties: properties,\n        };\n        if (this.rotate) {\n            data.rotate = this.rotate;\n        }\n        // zIndex\n        // zIndex\n        if ([OverlapMode.INCREASE, OverlapMode.STATIC].includes(this.graphModel.overlapMode)) {\n            data.zIndex = this.zIndex;\n        }\n        if (value) {\n            data.text = {\n                x: x,\n                y: y,\n                value: value,\n            };\n        }\n        return data;\n    };\n    /**\n     * \n     * history\n     * \n     */\n    BaseNodeModel.prototype.getHistoryData = function () {\n        return this.getData();\n    };\n    /**\n     * properties\n     */\n    BaseNodeModel.prototype.getProperties = function () {\n        return toJS(this.properties);\n    };\n    /**\n     * @overridable \n     * gAttributes,  className\n     * @returns \n     */\n    BaseNodeModel.prototype.getOuterGAttributes = function () {\n        return {\n            className: '',\n        };\n    };\n    /**\n     * @overridable \n     * \n     * @returns \n     */\n    BaseNodeModel.prototype.getNodeStyle = function () {\n        return __assign(__assign({}, this.graphModel.theme.baseNode), this.style);\n    };\n    /**\n     * @overridable \n     * \n     */\n    BaseNodeModel.prototype.getTextStyle = function () {\n        //  nodeText\n        var nodeText = this.graphModel.theme.nodeText;\n        var _a = this.properties.textStyle, textStyle = _a === void 0 ? {} : _a;\n        return __assign(__assign({}, cloneDeep(nodeText)), cloneDeep(textStyle));\n    };\n    /**\n     * @overridable \n     * \n     */\n    BaseNodeModel.prototype.getRotateControlStyle = function () {\n        var rotateControl = this.graphModel.theme.rotateControl;\n        return cloneDeep(rotateControl);\n    };\n    /**\n     * @overrideable \n     * \n     */\n    BaseNodeModel.prototype.getResizeControlStyle = function () {\n        var resizeControl = this.graphModel.theme.resizeControl;\n        return cloneDeep(resizeControl);\n    };\n    BaseNodeModel.prototype.getResizeOutlineStyle = function () {\n        var resizeOutline = this.graphModel.theme.resizeOutline;\n        return cloneDeep(resizeOutline);\n    };\n    /**\n     * @overridable \n     * \n     * @returns \n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    BaseNodeModel.prototype.getAnchorStyle = function (_anchorInfo) {\n        var anchor = this.graphModel.theme.anchor;\n        // \n        return cloneDeep(anchor);\n    };\n    /**\n     * @overridable \n     * \n     * @returns \n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    BaseNodeModel.prototype.getAnchorLineStyle = function (_anchorInfo) {\n        var anchorLine = this.graphModel.theme.anchorLine;\n        return cloneDeep(anchorLine);\n    };\n    /**\n     * @overridable \n     * outlineoutline \n     * @returns outline\n     */\n    BaseNodeModel.prototype.getOutlineStyle = function () {\n        var outline = this.graphModel.theme.outline;\n        return cloneDeep(outline);\n    };\n    /**\n     * @overridable  source  target \n     * @param target \n     * @param sourceAnchor \n     * @param targetAnchor \n     * @param edgeId  id adjustEdgeStartAndEnd \n     * https://github.com/didi/LogicFlow/issues/926#issuecomment-1371823306\n     */\n    BaseNodeModel.prototype.isAllowConnectedAsSource = function (target, sourceAnchor, targetAnchor, edgeId) {\n        var rules = !this.hasSetSourceRules\n            ? this.getConnectedSourceRules()\n            : this.sourceRules;\n        this.hasSetSourceRules = true;\n        var isAllPass = true;\n        var msg = '';\n        for (var i = 0; i < rules.length; i++) {\n            var rule = rules[i];\n            if (!rule.validate.call(this, this, target, sourceAnchor, targetAnchor, edgeId)) {\n                isAllPass = false;\n                msg = rule.message;\n                break;\n            }\n        }\n        return {\n            isAllPass: isAllPass,\n            msg: msg,\n        };\n    };\n    /**\n     * \n     */\n    BaseNodeModel.prototype.getConnectedSourceRules = function () {\n        return this.sourceRules;\n    };\n    /**\n     * @overridable  target \n     * @param source \n     * @param sourceAnchor \n     * @param targetAnchor \n     * @param edgeId  id adjustEdgeStartAndEnd \n     * https://github.com/didi/LogicFlow/issues/926#issuecomment-1371823306\n     */\n    BaseNodeModel.prototype.isAllowConnectedAsTarget = function (source, sourceAnchor, targetAnchor, edgeId) {\n        var rules = !this.hasSetTargetRules\n            ? this.getConnectedTargetRules()\n            : this.targetRules;\n        this.hasSetTargetRules = true;\n        var isAllPass = true;\n        var msg = '';\n        for (var i = 0; i < rules.length; i++) {\n            var rule = rules[i];\n            if (!rule.validate.call(this, source, this, sourceAnchor, targetAnchor, edgeId)) {\n                isAllPass = false;\n                msg = rule.message;\n                break;\n            }\n        }\n        return {\n            isAllPass: isAllPass,\n            msg: msg,\n        };\n    };\n    /**\n     * \n     * \n     */\n    BaseNodeModel.prototype.isAllowMoveNode = function (deltaX, deltaY) {\n        var e_1, _a;\n        var isAllowMoveX = true;\n        var isAllowMoveY = true;\n        var rules = this.moveRules.concat(this.graphModel.nodeMoveRules);\n        try {\n            for (var rules_1 = __values(rules), rules_1_1 = rules_1.next(); !rules_1_1.done; rules_1_1 = rules_1.next()) {\n                var rule = rules_1_1.value;\n                var r = rule(this, deltaX, deltaY);\n                if (!r)\n                    return false;\n                if (typeof r === 'object') {\n                    var r1 = r;\n                    if (!r1.x && !r1.y) {\n                        return false;\n                    }\n                    isAllowMoveX = isAllowMoveX && r1.x;\n                    isAllowMoveY = isAllowMoveY && r1.y;\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (rules_1_1 && !rules_1_1.done && (_a = rules_1.return)) _a.call(rules_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return {\n            x: isAllowMoveX,\n            y: isAllowMoveY,\n        };\n    };\n    /**\n     * \n     */\n    BaseNodeModel.prototype.getConnectedTargetRules = function () {\n        return this.targetRules;\n    };\n    /**\n     * @returns Point[] \n     */\n    BaseNodeModel.prototype.getAnchorsByOffset = function () {\n        var _a = this, anchorsOffset = _a.anchorsOffset, id = _a.id, x = _a.x, y = _a.y;\n        if (anchorsOffset && anchorsOffset.length > 0) {\n            return anchorsOffset.map(function (el, idx) {\n                if (el.length) {\n                    el = el; // \n                    return {\n                        id: \"\".concat(id, \"_\").concat(idx),\n                        x: x + el[0],\n                        y: y + el[1],\n                    };\n                }\n                el = el;\n                return __assign(__assign({}, el), { x: x + el.x, y: y + el.y, id: el.id || \"\".concat(id, \"_\").concat(idx) });\n            });\n        }\n        return this.getDefaultAnchor();\n    };\n    /**\n     * @overridable \n     * \n     */\n    BaseNodeModel.prototype.getDefaultAnchor = function () {\n        return [];\n    };\n    /**\n     * @overridable \n     * \n     */\n    BaseNodeModel.prototype.getTargetAnchor = function (position) {\n        return getClosestAnchor(position, this);\n    };\n    /**\n     * BBox\n     */\n    BaseNodeModel.prototype.getBounds = function () {\n        return {\n            minX: this.x - this.width / 2,\n            minY: this.y - this.height / 2,\n            maxX: this.x + this.width / 2,\n            maxY: this.y + this.height / 2,\n        };\n    };\n    Object.defineProperty(BaseNodeModel.prototype, \"anchors\", {\n        get: function () {\n            var anchors = this.getAnchorsByOffset();\n            var _a = this, x = _a.x, y = _a.y, rotate = _a.rotate;\n            anchors.forEach(function (anchor) {\n                var anchorX = anchor.x, anchorY = anchor.y;\n                var _a = __read(new Matrix([anchorX, anchorY, 1])\n                    .translate(-x, -y)\n                    .rotate(rotate)\n                    .translate(x, y)[0], 2), e = _a[0], f = _a[1];\n                anchor.x = e;\n                anchor.y = f;\n            });\n            return anchors;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    BaseNodeModel.prototype.getAnchorInfo = function (anchorId) {\n        if (isNil(anchorId))\n            return undefined;\n        for (var i = 0; i < this.anchors.length; i++) {\n            var anchor = this.anchors[i];\n            if (anchor.id === anchorId) {\n                return anchor;\n            }\n        }\n    };\n    BaseNodeModel.prototype.addNodeMoveRules = function (fn) {\n        if (!this.moveRules.includes(fn)) {\n            this.moveRules.push(fn);\n        }\n    };\n    BaseNodeModel.prototype.isAllowMoveByXORY = function (deltaX, deltaY, isIgnoreRule) {\n        var isAllowMoveX;\n        var isAllowMoveY;\n        if (isIgnoreRule) {\n            isAllowMoveX = true;\n            isAllowMoveY = true;\n        }\n        else {\n            var r = this.isAllowMoveNode(deltaX, deltaY);\n            if (typeof r === 'boolean') {\n                isAllowMoveX = r;\n                isAllowMoveY = r;\n            }\n            else {\n                isAllowMoveX = r.x;\n                isAllowMoveY = r.y;\n            }\n        }\n        return {\n            isAllowMoveX: isAllowMoveX,\n            isAllowMoveY: isAllowMoveY,\n        };\n    };\n    BaseNodeModel.prototype.move = function (deltaX, deltaY, isIgnoreRule) {\n        if (isIgnoreRule === void 0) { isIgnoreRule = false; }\n        var _a = this.isAllowMoveByXORY(deltaX, deltaY, isIgnoreRule), isAllowMoveX = _a.isAllowMoveX, isAllowMoveY = _a.isAllowMoveY;\n        if (isAllowMoveX) {\n            this.x = this.x + deltaX;\n            this.text && this.moveText(deltaX, 0);\n        }\n        if (isAllowMoveY) {\n            this.y = this.y + deltaY;\n            this.text && this.moveText(0, deltaY);\n        }\n        if (isAllowMoveX || isAllowMoveY) {\n            // xytransformxy)\n            this.rotate = this._rotate;\n        }\n        return isAllowMoveX || isAllowMoveY;\n    };\n    BaseNodeModel.prototype.getMoveDistance = function (deltaX, deltaY, isIgnoreRule) {\n        if (isIgnoreRule === void 0) { isIgnoreRule = false; }\n        var _a = this.isAllowMoveByXORY(deltaX, deltaY, isIgnoreRule), isAllowMoveX = _a.isAllowMoveX, isAllowMoveY = _a.isAllowMoveY;\n        var moveX = 0;\n        var moveY = 0;\n        if (isAllowMoveX && deltaX) {\n            this.x = this.x + deltaX;\n            this.text && this.moveText(deltaX, 0);\n            moveX = deltaX;\n        }\n        if (isAllowMoveY && deltaY) {\n            this.y = this.y + deltaY;\n            this.text && this.moveText(0, deltaY);\n            moveY = deltaY;\n        }\n        this.transform = new TranslateMatrix(-this.x, -this.y)\n            .rotate(this.rotate)\n            .translate(this.x, this.y)\n            .toString();\n        return [moveX, moveY];\n    };\n    BaseNodeModel.prototype.moveTo = function (x, y, isIgnoreRule) {\n        if (isIgnoreRule === void 0) { isIgnoreRule = false; }\n        var deltaX = x - this.x;\n        var deltaY = y - this.y;\n        if (!isIgnoreRule && !this.isAllowMoveNode(deltaX, deltaY))\n            return false;\n        this.text && this.moveText(deltaX, deltaY);\n        this.x = x;\n        this.y = y;\n        return true;\n    };\n    BaseNodeModel.prototype.moveText = function (deltaX, deltaY) {\n        var _a = this.text, x = _a.x, y = _a.y, value = _a.value, draggable = _a.draggable, editable = _a.editable;\n        this.text = {\n            value: value,\n            editable: editable,\n            draggable: draggable,\n            x: x + deltaX,\n            y: y + deltaY,\n        };\n    };\n    BaseNodeModel.prototype.updateText = function (value) {\n        this.text = __assign(__assign({}, toJS(this.text)), { value: value });\n    };\n    BaseNodeModel.prototype.addNodeResizeRules = function (fn) {\n        if (!this.resizeRules.includes(fn)) {\n            this.resizeRules.push(fn);\n        }\n    };\n    /**\n     * \n     * resize\n     */\n    BaseNodeModel.prototype.isAllowResizeNode = function (deltaX, deltaY, width, height) {\n        var e_2, _a;\n        var rules = this.resizeRules.concat(this.graphModel.nodeResizeRules);\n        try {\n            for (var rules_2 = __values(rules), rules_2_1 = rules_2.next(); !rules_2_1.done; rules_2_1 = rules_2.next()) {\n                var rule = rules_2_1.value;\n                var r = rule(this, deltaX, deltaY, width, height);\n                if (!r)\n                    return false;\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (rules_2_1 && !rules_2_1.done && (_a = rules_2.return)) _a.call(rules_2);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n        return true;\n    };\n    BaseNodeModel.prototype.setSelected = function (flag) {\n        if (flag === void 0) { flag = true; }\n        this.isSelected = flag;\n    };\n    BaseNodeModel.prototype.setHovered = function (flag) {\n        if (flag === void 0) { flag = true; }\n        this.isHovered = flag;\n        this.setIsShowAnchor(flag);\n    };\n    BaseNodeModel.prototype.setIsShowAnchor = function (flag) {\n        if (flag === void 0) { flag = true; }\n        this.isShowAnchor = flag;\n    };\n    BaseNodeModel.prototype.setRotatable = function (flag) {\n        if (flag === void 0) { flag = true; }\n        this.rotatable = flag;\n    };\n    BaseNodeModel.prototype.setResizable = function (flag) {\n        if (flag === void 0) { flag = true; }\n        this.resizable = flag;\n    };\n    BaseNodeModel.prototype.setHitable = function (flag) {\n        if (flag === void 0) { flag = true; }\n        this.isHitable = flag;\n    };\n    BaseNodeModel.prototype.setHittable = function (flag) {\n        if (flag === void 0) { flag = true; }\n        this.isHittable = flag;\n    };\n    BaseNodeModel.prototype.setElementState = function (state, additionStateData) {\n        this.state = state;\n        this.additionStateData = additionStateData;\n    };\n    BaseNodeModel.prototype.updateProperties = function (nextProperties, updateKeys) {\n        var preProperties = toJS(this.properties);\n        this.properties = nextProperties;\n        this.setAttributes();\n        //  node:properties-change \n        this.graphModel.eventCenter.emit(EventType.NODE_PROPERTIES_CHANGE, {\n            id: this.id,\n            keys: updateKeys,\n            preProperties: preProperties,\n            properties: nextProperties,\n        });\n    };\n    BaseNodeModel.prototype.setProperty = function (key, val) {\n        var preProperties = toJS(this.properties);\n        var nextProperties = cloneDeep(preProperties);\n        // https://lodash.com/docs/4.17.15#set\n        //  lodash  set  key  'a.b.c' \n        set(nextProperties, key, formatData(val));\n        this.updateProperties(nextProperties, [key]);\n    };\n    BaseNodeModel.prototype.setProperties = function (properties) {\n        var preProperties = toJS(this.properties);\n        var nextProperties = __assign(__assign({}, preProperties), formatData(properties));\n        var updateKeys = [];\n        mapKeys(properties, function (val, key) {\n            // key  properties   key  properties\n            if ((has(preProperties, key) && preProperties[key] !== val) ||\n                !has(preProperties, key)) {\n                updateKeys.push(key);\n            }\n        });\n        this.updateProperties(nextProperties, updateKeys);\n    };\n    BaseNodeModel.prototype.deleteProperty = function (key) {\n        delete this.properties[key];\n        this.setAttributes();\n    };\n    BaseNodeModel.prototype.setStyle = function (key, val) {\n        var _a;\n        this.style = __assign(__assign({}, this.style), (_a = {}, _a[key] = formatData(val), _a));\n    };\n    BaseNodeModel.prototype.setStyles = function (styles) {\n        this.style = __assign(__assign({}, this.style), formatData(styles));\n    };\n    BaseNodeModel.prototype.updateStyles = function (styles) {\n        this.style = __assign({}, formatData(styles));\n    };\n    BaseNodeModel.prototype.setZIndex = function (zIndex) {\n        if (zIndex === void 0) { zIndex = 1; }\n        this.zIndex = zIndex;\n    };\n    BaseNodeModel.prototype.updateAttributes = function (attributes) {\n        assign(this, attributes);\n    };\n    // zIndex\n    BaseNodeModel.prototype.updateZIndexByOverlap = function (overlapMode, defaultZIndex) {\n        switch (overlapMode) {\n            case OverlapMode.DEFAULT:\n                this.zIndex = 1;\n                break;\n            case OverlapMode.EDGE_TOP:\n                this.zIndex = 0;\n                break;\n            case OverlapMode.INCREASE:\n                this.zIndex = defaultZIndex;\n                break;\n            default:\n                break;\n        }\n    };\n    BaseNodeModel.BaseType = ElementType.NODE;\n    __decorate([\n        observable\n    ], BaseNodeModel.prototype, \"type\", void 0);\n    __decorate([\n        observable\n    ], BaseNodeModel.prototype, \"x\", void 0);\n    __decorate([\n        observable\n    ], BaseNodeModel.prototype, \"y\", void 0);\n    __decorate([\n        observable\n    ], BaseNodeModel.prototype, \"textMode\", void 0);\n    __decorate([\n        observable\n    ], BaseNodeModel.prototype, \"text\", void 0);\n    __decorate([\n        observable\n    ], BaseNodeModel.prototype, \"properties\", void 0);\n    __decorate([\n        observable\n    ], BaseNodeModel.prototype, \"_width\", void 0);\n    __decorate([\n        observable\n    ], BaseNodeModel.prototype, \"_height\", void 0);\n    __decorate([\n        observable\n    ], BaseNodeModel.prototype, \"anchorsOffset\", void 0);\n    __decorate([\n        observable\n    ], BaseNodeModel.prototype, \"isSelected\", void 0);\n    __decorate([\n        observable\n    ], BaseNodeModel.prototype, \"isHovered\", void 0);\n    __decorate([\n        observable\n    ], BaseNodeModel.prototype, \"isShowAnchor\", void 0);\n    __decorate([\n        observable\n    ], BaseNodeModel.prototype, \"isDragging\", void 0);\n    __decorate([\n        observable\n    ], BaseNodeModel.prototype, \"isHitable\", void 0);\n    __decorate([\n        observable\n    ], BaseNodeModel.prototype, \"isHittable\", void 0);\n    __decorate([\n        observable\n    ], BaseNodeModel.prototype, \"draggable\", void 0);\n    __decorate([\n        observable\n    ], BaseNodeModel.prototype, \"visible\", void 0);\n    __decorate([\n        observable\n    ], BaseNodeModel.prototype, \"rotatable\", void 0);\n    __decorate([\n        observable\n    ], BaseNodeModel.prototype, \"resizable\", void 0);\n    __decorate([\n        observable\n    ], BaseNodeModel.prototype, \"zIndex\", void 0);\n    __decorate([\n        observable\n    ], BaseNodeModel.prototype, \"state\", void 0);\n    __decorate([\n        observable\n    ], BaseNodeModel.prototype, \"autoToFront\", void 0);\n    __decorate([\n        observable\n    ], BaseNodeModel.prototype, \"style\", void 0);\n    __decorate([\n        observable\n    ], BaseNodeModel.prototype, \"transform\", void 0);\n    __decorate([\n        observable\n    ], BaseNodeModel.prototype, \"_rotate\", void 0);\n    __decorate([\n        computed\n    ], BaseNodeModel.prototype, \"incoming\", null);\n    __decorate([\n        computed\n    ], BaseNodeModel.prototype, \"outgoing\", null);\n    __decorate([\n        action\n    ], BaseNodeModel.prototype, \"setTextMode\", null);\n    __decorate([\n        action\n    ], BaseNodeModel.prototype, \"addNodeMoveRules\", null);\n    __decorate([\n        action\n    ], BaseNodeModel.prototype, \"move\", null);\n    __decorate([\n        action\n    ], BaseNodeModel.prototype, \"getMoveDistance\", null);\n    __decorate([\n        action\n    ], BaseNodeModel.prototype, \"moveTo\", null);\n    __decorate([\n        action\n    ], BaseNodeModel.prototype, \"moveText\", null);\n    __decorate([\n        action\n    ], BaseNodeModel.prototype, \"updateText\", null);\n    __decorate([\n        action\n    ], BaseNodeModel.prototype, \"addNodeResizeRules\", null);\n    __decorate([\n        action\n    ], BaseNodeModel.prototype, \"setSelected\", null);\n    __decorate([\n        action\n    ], BaseNodeModel.prototype, \"setHovered\", null);\n    __decorate([\n        action\n    ], BaseNodeModel.prototype, \"setIsShowAnchor\", null);\n    __decorate([\n        action\n    ], BaseNodeModel.prototype, \"setRotatable\", null);\n    __decorate([\n        action\n    ], BaseNodeModel.prototype, \"setResizable\", null);\n    __decorate([\n        action\n    ], BaseNodeModel.prototype, \"setHitable\", null);\n    __decorate([\n        action\n    ], BaseNodeModel.prototype, \"setHittable\", null);\n    __decorate([\n        action\n    ], BaseNodeModel.prototype, \"setElementState\", null);\n    __decorate([\n        action\n    ], BaseNodeModel.prototype, \"setProperty\", null);\n    __decorate([\n        action\n    ], BaseNodeModel.prototype, \"setProperties\", null);\n    __decorate([\n        action\n    ], BaseNodeModel.prototype, \"deleteProperty\", null);\n    __decorate([\n        action\n    ], BaseNodeModel.prototype, \"setStyle\", null);\n    __decorate([\n        action\n    ], BaseNodeModel.prototype, \"setStyles\", null);\n    __decorate([\n        action\n    ], BaseNodeModel.prototype, \"updateStyles\", null);\n    __decorate([\n        action\n    ], BaseNodeModel.prototype, \"setZIndex\", null);\n    __decorate([\n        action\n    ], BaseNodeModel.prototype, \"updateAttributes\", null);\n    __decorate([\n        action\n    ], BaseNodeModel.prototype, \"updateZIndexByOverlap\", null);\n    return BaseNodeModel;\n}());\nexport { BaseNodeModel };\nexport default BaseNodeModel;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { cloneDeep } from 'lodash-es';\nimport { computed, observable } from 'mobx';\nimport BaseNodeModel from './BaseNodeModel';\nimport { ModelType } from '../../constant';\nvar CircleNodeModel = /** @class */ (function (_super) {\n    __extends(CircleNodeModel, _super);\n    function CircleNodeModel(data, graphModel) {\n        var _this = _super.call(this, data, graphModel) || this;\n        _this.modelType = ModelType.CIRCLE_NODE;\n        // @observable properties: ICircleNodeProperties = {}\n        _this.r = 50;\n        // this.properties = data.properties || {}\n        _this.initNodeData(data);\n        _this.setAttributes();\n        return _this;\n    }\n    Object.defineProperty(CircleNodeModel.prototype, \"width\", {\n        get: function () {\n            return this.r * 2;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(CircleNodeModel.prototype, \"height\", {\n        get: function () {\n            return this.r * 2;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    CircleNodeModel.prototype.setAttributes = function () {\n        _super.prototype.setAttributes.call(this);\n        var r = this.properties.r;\n        if (r) {\n            this.r = r;\n        }\n    };\n    CircleNodeModel.prototype.getNodeStyle = function () {\n        var style = _super.prototype.getNodeStyle.call(this);\n        var circle = this.graphModel.theme.circle;\n        var _a = this.properties.style, customStyle = _a === void 0 ? {} : _a;\n        return __assign(__assign(__assign({}, style), cloneDeep(circle)), cloneDeep(customStyle));\n    };\n    CircleNodeModel.prototype.getDefaultAnchor = function () {\n        var _a = this, x = _a.x, y = _a.y, r = _a.r;\n        return [\n            { x: x, y: y - r, id: \"\".concat(this.id, \"_0\") },\n            { x: x + r, y: y, id: \"\".concat(this.id, \"_1\") },\n            { x: x, y: y + r, id: \"\".concat(this.id, \"_2\") },\n            { x: x - r, y: y, id: \"\".concat(this.id, \"_3\") },\n        ];\n    };\n    CircleNodeModel.prototype.resize = function (resizeInfo) {\n        var width = resizeInfo.width, deltaX = resizeInfo.deltaX, deltaY = resizeInfo.deltaY;\n        // \n        this.move(deltaX / 2, deltaY / 2);\n        this.r = width;\n        this.setProperties({\n            r: width,\n        });\n        return this.getData();\n    };\n    __decorate([\n        observable\n    ], CircleNodeModel.prototype, \"r\", void 0);\n    __decorate([\n        computed\n    ], CircleNodeModel.prototype, \"width\", null);\n    __decorate([\n        computed\n    ], CircleNodeModel.prototype, \"height\", null);\n    return CircleNodeModel;\n}(BaseNodeModel));\nexport { CircleNodeModel };\nexport default CircleNodeModel;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { cloneDeep, forEach, map } from 'lodash-es';\nimport { computed, observable } from 'mobx';\nimport BaseNodeModel from './BaseNodeModel';\nimport { ModelType } from '../../constant';\nvar DiamondNodeModel = /** @class */ (function (_super) {\n    __extends(DiamondNodeModel, _super);\n    // @observable properties: IDiamondNodeProperties = {}\n    function DiamondNodeModel(data, graphModel) {\n        var _this = _super.call(this, data, graphModel) || this;\n        _this.modelType = ModelType.DIAMOND_NODE;\n        _this.rx = 30;\n        _this.ry = 50;\n        // this.properties = data.properties || {}\n        _this.initNodeData(data);\n        _this.setAttributes();\n        return _this;\n    }\n    DiamondNodeModel.prototype.setAttributes = function () {\n        _super.prototype.setAttributes.call(this);\n        var _a = this.properties, rx = _a.rx, ry = _a.ry;\n        if (rx) {\n            this.rx = rx;\n        }\n        if (ry) {\n            this.ry = ry;\n        }\n    };\n    DiamondNodeModel.prototype.getNodeStyle = function () {\n        var style = _super.prototype.getNodeStyle.call(this);\n        var diamond = this.graphModel.theme.diamond;\n        var _a = this.properties.style, customStyle = _a === void 0 ? {} : _a;\n        return __assign(__assign(__assign({}, style), cloneDeep(diamond)), cloneDeep(customStyle));\n    };\n    Object.defineProperty(DiamondNodeModel.prototype, \"points\", {\n        get: function () {\n            var _a = this, x = _a.x, y = _a.y, rx = _a.rx, ry = _a.ry;\n            return [\n                [x, y - ry],\n                [x + rx, y],\n                [x, y + ry],\n                [x - rx, y],\n            ];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(DiamondNodeModel.prototype, \"pointsPosition\", {\n        get: function () {\n            return map(this.points, function (_a) {\n                var _b = __read(_a, 2), x = _b[0], y = _b[1];\n                return ({ x: x, y: y });\n            });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(DiamondNodeModel.prototype, \"width\", {\n        get: function () {\n            var min = Number.MAX_SAFE_INTEGER;\n            var max = Number.MIN_SAFE_INTEGER;\n            forEach(this.points, function (_a) {\n                var _b = __read(_a, 1), x = _b[0];\n                if (x < min) {\n                    min = x;\n                }\n                if (x > max) {\n                    max = x;\n                }\n            });\n            return max - min;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(DiamondNodeModel.prototype, \"height\", {\n        get: function () {\n            var min = Number.MAX_SAFE_INTEGER;\n            var max = Number.MIN_SAFE_INTEGER;\n            forEach(this.points, function (_a) {\n                var _b = __read(_a, 2), y = _b[1];\n                if (y < min) {\n                    min = y;\n                }\n                if (y > max) {\n                    max = y;\n                }\n            });\n            return max - min;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    DiamondNodeModel.prototype.getDefaultAnchor = function () {\n        var _this = this;\n        return map(this.points, function (_a, idx) {\n            var _b = __read(_a, 2), x = _b[0], y = _b[1];\n            return ({\n                x: x,\n                y: y,\n                id: \"\".concat(_this.id, \"_\").concat(idx),\n            });\n        });\n    };\n    DiamondNodeModel.prototype.resize = function (resizeInfo) {\n        var width = resizeInfo.width, height = resizeInfo.height, deltaX = resizeInfo.deltaX, deltaY = resizeInfo.deltaY;\n        // \n        this.move(deltaX / 2, deltaY / 2);\n        this.rx = width;\n        this.ry = height;\n        this.setProperties({\n            rx: width,\n            ry: height,\n        });\n        return this.getData();\n    };\n    __decorate([\n        observable\n    ], DiamondNodeModel.prototype, \"rx\", void 0);\n    __decorate([\n        observable\n    ], DiamondNodeModel.prototype, \"ry\", void 0);\n    __decorate([\n        computed\n    ], DiamondNodeModel.prototype, \"points\", null);\n    __decorate([\n        computed\n    ], DiamondNodeModel.prototype, \"pointsPosition\", null);\n    __decorate([\n        computed\n    ], DiamondNodeModel.prototype, \"width\", null);\n    __decorate([\n        computed\n    ], DiamondNodeModel.prototype, \"height\", null);\n    return DiamondNodeModel;\n}(BaseNodeModel));\nexport { DiamondNodeModel };\nexport default DiamondNodeModel;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { cloneDeep } from 'lodash-es';\nimport { computed, observable } from 'mobx';\nimport BaseNodeModel from './BaseNodeModel';\nimport { ModelType } from '../../constant';\nvar EllipseNodeModel = /** @class */ (function (_super) {\n    __extends(EllipseNodeModel, _super);\n    // @observable properties: IEllipseNodeProperties = {}\n    function EllipseNodeModel(data, graphModel) {\n        var _this = _super.call(this, data, graphModel) || this;\n        _this.modelType = ModelType.ELLIPSE_NODE;\n        _this.rx = 30;\n        _this.ry = 45;\n        // this.properties = data.properties || {}\n        _this.initNodeData(data);\n        _this.setAttributes();\n        return _this;\n    }\n    EllipseNodeModel.prototype.setAttributes = function () {\n        _super.prototype.setAttributes.call(this);\n        var _a = this.properties, rx = _a.rx, ry = _a.ry;\n        if (rx) {\n            this.rx = rx;\n        }\n        if (ry) {\n            this.ry = ry;\n        }\n    };\n    EllipseNodeModel.prototype.getNodeStyle = function () {\n        var style = _super.prototype.getNodeStyle.call(this);\n        var ellipse = this.graphModel.theme.ellipse;\n        var _a = this.properties.style, customStyle = _a === void 0 ? {} : _a;\n        return __assign(__assign(__assign({}, style), cloneDeep(ellipse)), cloneDeep(customStyle));\n    };\n    Object.defineProperty(EllipseNodeModel.prototype, \"width\", {\n        get: function () {\n            return this.rx * 2;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EllipseNodeModel.prototype, \"height\", {\n        get: function () {\n            return this.ry * 2;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    EllipseNodeModel.prototype.getDefaultAnchor = function () {\n        var _a = this, x = _a.x, y = _a.y, rx = _a.rx, ry = _a.ry;\n        return [\n            { x: x, y: y - ry, id: \"\".concat(this.id, \"_0\") },\n            { x: x + rx, y: y, id: \"\".concat(this.id, \"_1\") },\n            { x: x, y: y + ry, id: \"\".concat(this.id, \"_2\") },\n            { x: x - rx, y: y, id: \"\".concat(this.id, \"_3\") },\n        ];\n    };\n    EllipseNodeModel.prototype.resize = function (resizeInfo) {\n        var width = resizeInfo.width, height = resizeInfo.height, deltaX = resizeInfo.deltaX, deltaY = resizeInfo.deltaY;\n        // \n        this.move(deltaX / 2, deltaY / 2);\n        this.rx = width;\n        this.ry = height;\n        this.setProperties({\n            rx: width,\n            ry: height,\n        });\n        return this.getData();\n    };\n    __decorate([\n        observable\n    ], EllipseNodeModel.prototype, \"rx\", void 0);\n    __decorate([\n        observable\n    ], EllipseNodeModel.prototype, \"ry\", void 0);\n    __decorate([\n        computed\n    ], EllipseNodeModel.prototype, \"width\", null);\n    __decorate([\n        computed\n    ], EllipseNodeModel.prototype, \"height\", null);\n    return EllipseNodeModel;\n}(BaseNodeModel));\nexport { EllipseNodeModel };\nexport default EllipseNodeModel;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { cloneDeep, map } from 'lodash-es';\nimport { computed, observable } from 'mobx';\nimport BaseNodeModel from './BaseNodeModel';\nimport { ModelType } from '../../constant';\nimport { normalizePolygon } from '../../util';\nvar PolygonNodeModel = /** @class */ (function (_super) {\n    __extends(PolygonNodeModel, _super);\n    // @observable properties: IPolygonNodeProperties = {}\n    function PolygonNodeModel(data, graphModel) {\n        var _this = _super.call(this, data, graphModel) || this;\n        _this.modelType = ModelType.POLYGON_NODE;\n        _this.points = [\n            [50, 0],\n            [100, 50],\n            [50, 100],\n            [0, 50], // \n            // [0,100], [50,25], [50,75], [100,0] // \n            // [100, 10],\n            // [40, 198],\n            // [190, 78],\n            // [10, 78],\n            // [160, 198], // \n        ];\n        // this.properties = data.properties || {}\n        _this.initNodeData(data);\n        _this.setAttributes();\n        return _this;\n    }\n    PolygonNodeModel.prototype.setAttributes = function () {\n        _super.prototype.setAttributes.call(this);\n        var _a = this.properties, points = _a.points, width = _a.width, height = _a.height;\n        // DONE:  points\n        // 1.  points  points  x,y \n        // 2.  points\n        // if (points) {\n        //   this.points = points\n        // }\n        var nextPoints = points || this.points;\n        this.points = normalizePolygon(nextPoints, width, height);\n    };\n    PolygonNodeModel.prototype.getNodeStyle = function () {\n        var style = _super.prototype.getNodeStyle.call(this);\n        var polygon = this.graphModel.theme.polygon;\n        var _a = this.properties.style, customStyle = _a === void 0 ? {} : _a;\n        return __assign(__assign(__assign({}, style), cloneDeep(polygon)), cloneDeep(customStyle));\n    };\n    Object.defineProperty(PolygonNodeModel.prototype, \"pointsPosition\", {\n        /**\n         * svg\n         * logicflowpoints\n         * \n         */\n        get: function () {\n            var _a = this, x = _a.x, y = _a.y, width = _a.width, height = _a.height;\n            return this.points.map(function (item) { return ({\n                x: item[0] + x - width / 2,\n                y: item[1] + y - height / 2,\n            }); });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(PolygonNodeModel.prototype, \"width\", {\n        get: function () {\n            var min = Number.MAX_SAFE_INTEGER;\n            var max = Number.MIN_SAFE_INTEGER;\n            this.points.forEach(function (_a) {\n                var _b = __read(_a, 1), x = _b[0];\n                if (x < min) {\n                    min = x;\n                }\n                if (x > max) {\n                    max = x;\n                }\n            });\n            return max - min;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(PolygonNodeModel.prototype, \"height\", {\n        get: function () {\n            var min = Number.MAX_SAFE_INTEGER;\n            var max = Number.MIN_SAFE_INTEGER;\n            this.points.forEach(function (_a) {\n                var _b = __read(_a, 2), y = _b[1];\n                if (y < min) {\n                    min = y;\n                }\n                if (y > max) {\n                    max = y;\n                }\n            });\n            return max - min;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    PolygonNodeModel.prototype.getDefaultAnchor = function () {\n        var _this = this;\n        var _a = this, x = _a.x, y = _a.y, width = _a.width, height = _a.height, points = _a.points;\n        return points.map(function (_a, idx) {\n            var _b = __read(_a, 2), x1 = _b[0], y1 = _b[1];\n            return ({\n                x: x + x1 - width / 2,\n                y: y + y1 - height / 2,\n                id: \"\".concat(_this.id, \"_\").concat(idx),\n            });\n        });\n    };\n    PolygonNodeModel.prototype.resize = function (resizeInfo) {\n        var _this = this;\n        var width = resizeInfo.width, height = resizeInfo.height, deltaX = resizeInfo.deltaX, deltaY = resizeInfo.deltaY;\n        // \n        this.move(deltaX / 2, deltaY / 2);\n        var nextPoints = map(this.points, function (_a) {\n            var _b = __read(_a, 2), x = _b[0], y = _b[1];\n            return [\n                (x * width) / _this.width,\n                (y * height) / _this.height,\n            ];\n        });\n        this.points = nextPoints;\n        this.properties.points = nextPoints;\n        // this.setProperties({\n        //   points: toJS(nextPoints),\n        // })\n        return this.getData();\n    };\n    __decorate([\n        observable\n    ], PolygonNodeModel.prototype, \"points\", void 0);\n    __decorate([\n        computed\n    ], PolygonNodeModel.prototype, \"pointsPosition\", null);\n    __decorate([\n        computed\n    ], PolygonNodeModel.prototype, \"width\", null);\n    __decorate([\n        computed\n    ], PolygonNodeModel.prototype, \"height\", null);\n    return PolygonNodeModel;\n}(BaseNodeModel));\nexport { PolygonNodeModel };\nexport default PolygonNodeModel;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { cloneDeep, isNil } from 'lodash-es';\nimport { observable } from 'mobx';\nimport BaseNodeModel from './BaseNodeModel';\nimport { ModelType } from '../../constant';\nvar RectNodeModel = /** @class */ (function (_super) {\n    __extends(RectNodeModel, _super);\n    // @observable properties: P\n    function RectNodeModel(data, graphModel) {\n        var _this = _super.call(this, data, graphModel) || this;\n        _this.modelType = ModelType.RECT_NODE;\n        _this.radius = 0;\n        // TODO supersetAttributes \n        // this.properties = data.properties || {}\n        // TODO: bug here,  properties  setAttributes\n        _this.initNodeData(data);\n        _this.setAttributes();\n        return _this;\n    }\n    RectNodeModel.prototype.setAttributes = function () {\n        _super.prototype.setAttributes.call(this);\n        var _a = this.properties, width = _a.width, height = _a.height, radius = _a.radius;\n        var styleRadius = this.getNodeStyle().radius;\n        if (!isNil(width))\n            this.width = width;\n        if (!isNil(height))\n            this.height = height;\n        // \n        if (!isNil(radius))\n            this.radius = radius;\n        if (!isNil(styleRadius))\n            this.radius = styleRadius;\n    };\n    RectNodeModel.prototype.getDefaultAnchor = function () {\n        var _a = this, x = _a.x, y = _a.y, width = _a.width, height = _a.height;\n        return [\n            { x: x, y: y - height / 2, id: \"\".concat(this.id, \"_0\") },\n            { x: x + width / 2, y: y, id: \"\".concat(this.id, \"_1\") },\n            { x: x, y: y + height / 2, id: \"\".concat(this.id, \"_2\") },\n            { x: x - width / 2, y: y, id: \"\".concat(this.id, \"_3\") },\n        ];\n    };\n    RectNodeModel.prototype.getNodeStyle = function () {\n        var style = _super.prototype.getNodeStyle.call(this);\n        var rect = this.graphModel.theme.rect;\n        var _a = this.properties.style, customStyle = _a === void 0 ? {} : _a;\n        return __assign(__assign(__assign({}, style), cloneDeep(rect)), cloneDeep(customStyle));\n    };\n    __decorate([\n        observable\n    ], RectNodeModel.prototype, \"radius\", void 0);\n    return RectNodeModel;\n}(BaseNodeModel));\nexport { RectNodeModel };\nexport default RectNodeModel;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { cloneDeep } from 'lodash-es';\nimport { computed } from 'mobx';\nimport BaseNodeModel from './BaseNodeModel';\nimport { ModelType } from '../../constant';\nimport { getSvgTextWidthHeight } from '../../util';\nvar TextNodeModel = /** @class */ (function (_super) {\n    __extends(TextNodeModel, _super);\n    function TextNodeModel() {\n        var _this = _super.apply(this, __spreadArray([], __read(arguments), false)) || this;\n        _this.modelType = ModelType.TEXT_NODE;\n        return _this;\n    }\n    TextNodeModel.prototype.getTextStyle = function () {\n        var style = _super.prototype.getTextStyle.call(this);\n        var text = this.graphModel.theme.text;\n        var textStyle = this.properties.textStyle;\n        return __assign(__assign(__assign({}, style), cloneDeep(text)), cloneDeep(textStyle));\n    };\n    Object.defineProperty(TextNodeModel.prototype, \"width\", {\n        get: function () {\n            var rows = String(this.text.value).split(/[\\r\\n]/g);\n            var fontSize = this.getTextStyle().fontSize;\n            var width = getSvgTextWidthHeight({\n                rows: rows,\n                fontSize: fontSize,\n                rowsLength: rows.length,\n            }).width;\n            return width;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TextNodeModel.prototype, \"height\", {\n        get: function () {\n            var rows = String(this.text.value).split(/[\\r\\n]/g);\n            var fontSize = this.getTextStyle().fontSize;\n            var height = getSvgTextWidthHeight({\n                rows: rows,\n                fontSize: fontSize,\n                rowsLength: rows.length,\n            }).height;\n            return height;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    __decorate([\n        computed\n    ], TextNodeModel.prototype, \"width\", null);\n    __decorate([\n        computed\n    ], TextNodeModel.prototype, \"height\", null);\n    return TextNodeModel;\n}(BaseNodeModel));\nexport { TextNodeModel };\nexport default TextNodeModel;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport BaseNodeModel from './BaseNodeModel';\nimport { ModelType } from '../../constant';\nvar HtmlNodeModel = /** @class */ (function (_super) {\n    __extends(HtmlNodeModel, _super);\n    // @observable properties: IHtmlNodeProperties = {}\n    function HtmlNodeModel(data, graphModel) {\n        var _this = _super.call(this, data, graphModel) || this;\n        _this.modelType = ModelType.HTML_NODE;\n        // this.properties = data.properties || {}\n        _this.setAttributes();\n        return _this;\n    }\n    HtmlNodeModel.prototype.setAttributes = function () {\n        _super.prototype.setAttributes.call(this);\n        var _a = this.properties, width = _a.width, height = _a.height;\n        if (width)\n            this.width = width;\n        if (height)\n            this.height = height;\n    };\n    HtmlNodeModel.prototype.getDefaultAnchor = function () {\n        var _a = this, x = _a.x, y = _a.y, width = _a.width, height = _a.height;\n        return [\n            { x: x, y: y - height / 2, id: \"\".concat(this.id, \"_0\") },\n            { x: x + width / 2, y: y, id: \"\".concat(this.id, \"_1\") },\n            { x: x, y: y + height / 2, id: \"\".concat(this.id, \"_2\") },\n            { x: x - width / 2, y: y, id: \"\".concat(this.id, \"_3\") },\n        ];\n    };\n    return HtmlNodeModel;\n}(BaseNodeModel));\nexport { HtmlNodeModel };\nexport default HtmlNodeModel;\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { assign, isBoolean, isUndefined, pick } from 'lodash-es';\nimport { observable, action } from 'mobx';\nimport { TextMode } from '../constant';\nvar silentModeConfig = {\n    // SilentMode \n    stopZoomGraph: false,\n    stopScrollGraph: false,\n    stopMoveGraph: false,\n    //  & \n    adjustEdge: false,\n    adjustEdgeStartAndEnd: false,\n    adjustNodePosition: false,\n    hideAnchors: true,\n    allowRotate: false,\n    allowResize: false,\n    nodeSelectedOutline: true,\n    // \n    textEdit: false,\n    nodeTextEdit: false,\n    edgeTextEdit: false,\n    textDraggable: false,\n    nodeTextDraggable: false,\n    edgeTextDraggable: false,\n};\nvar allKeys = [\n    'isSilentMode', // \n    'stopZoomGraph', // \n    'stopScrollGraph', // \n    'stopMoveGraph', // \n    'snapGrid', // \n    'adjustEdge', // \n    'adjustEdgeMiddle', // \n    'adjustEdgeStartAndEnd', // \n    'adjustEdgeStart', // \n    'adjustEdgeEnd', // \n    'adjustNodePosition', // \n    'hideAnchors', // \n    'allowRotate', // \n    'allowResize', // \n    'autoExpand', // \n    'hoverOutline', // \n    'nodeSelectedOutline', //  outline\n    'edgeSelectedOutline', //  outline\n    'textEdit', // \n    'nodeTextEdit', // \n    'edgeTextEdit', // \n    'textDraggable', // \n    'nodeTextDraggable', // \n    'edgeTextDraggable', // \n    'multipleSelectKey', // \n    // 2.0.0 \n    'textMode', // \n    'nodeTextMode', // \n    'edgeTextMode', // \n    'nodeTextMultiple', // \n    'edgeTextMultiple', // \n    'nodeTextVertical', // \n    'edgeTextVertical', // \n    'isPinching', //\n];\n/**\n * \n */\nvar EditConfigModel = /** @class */ (function () {\n    function EditConfigModel(config) {\n        /*********************************************************\n         * \n         ********************************************************/\n        this.isSilentMode = false;\n        this.stopZoomGraph = false;\n        this.stopMoveGraph = false;\n        this.stopScrollGraph = false;\n        this.snapGrid = false;\n        this.isPinching = false;\n        /*********************************************************\n         * \n         ********************************************************/\n        this.textMode = TextMode.TEXT; //  textMode \n        this.textEdit = true;\n        this.textDraggable = false;\n        // \n        this.nodeTextEdit = true;\n        this.nodeTextDraggable = false;\n        this.nodeTextMultiple = false; // \n        this.nodeTextVertical = false; // \n        this.nodeTextMode = TextMode.TEXT; // \n        // \n        this.edgeTextMode = TextMode.TEXT; // \n        this.edgeTextEdit = true;\n        this.edgeTextDraggable = false;\n        this.edgeTextMultiple = false; // \n        this.edgeTextVertical = false; // \n        /*********************************************************\n         * \n         ********************************************************/\n        this.hideAnchors = false;\n        this.allowRotate = false;\n        this.allowResize = false;\n        this.hoverOutline = true;\n        this.nodeSelectedOutline = true;\n        this.adjustNodePosition = true;\n        this.autoExpand = false;\n        /*********************************************************\n         * \n         ********************************************************/\n        this.adjustEdge = true;\n        this.adjustEdgeMiddle = false;\n        this.adjustEdgeStartAndEnd = false;\n        this.adjustEdgeStart = false;\n        this.adjustEdgeEnd = false;\n        this.edgeSelectedOutline = true;\n        /*********************************************************\n         * \n         ********************************************************/\n        this.multipleSelectKey = '';\n        assign(this, this.computeConfig(config));\n    }\n    EditConfigModel.prototype.updateEditConfig = function (config) {\n        var newConfig = this.computeConfig(config);\n        assign(this, newConfig);\n    };\n    // TODO: \n    EditConfigModel.prototype.computeConfig = function (config) {\n        var isSilentMode = config.isSilentMode, textDraggable = config.textDraggable, textMode = config.textMode, textEdit = config.textEdit, adjustEdgeStartAndEnd = config.adjustEdgeStartAndEnd;\n        var conf = {};\n        // false \n        if (isSilentMode === false) {\n            assign(conf, this.stagedConfig);\n        }\n        //  undefined \n        if (isSilentMode === true && isSilentMode !== this.isSilentMode) {\n            // https://github.com/didi/LogicFlow/issues/1180\n            //  isSilentMode=true  this.stagedConfig  Config\n            //  true config.isSilentMode !== this.isSilentMode\n            var silentConfig = pick(silentModeConfig, allKeys);\n            // \n            this.stagedConfig = pick(this, allKeys);\n            assign(conf, silentConfig);\n        }\n        // undefined\n        if (!isUndefined(textEdit)) {\n            assign(conf, {\n                nodeTextEdit: textEdit,\n                edgeTextEdit: textEdit,\n            });\n        }\n        if (!isUndefined(textDraggable)) {\n            assign(conf, {\n                nodeTextDraggable: textDraggable,\n                edgeTextDraggable: textDraggable,\n            });\n        }\n        if (textMode) {\n            assign(conf, {\n                nodeTextMode: textMode,\n                edgeTextMode: textMode,\n            });\n        }\n        if (isBoolean(adjustEdgeStartAndEnd)) {\n            assign(conf, {\n                adjustEdgeStart: adjustEdgeStartAndEnd,\n                adjustEdgeEnd: adjustEdgeStartAndEnd,\n            });\n        }\n        var userConfig = pick(config, allKeys);\n        return assign(conf, userConfig);\n    };\n    EditConfigModel.prototype.updateTextMode = function (textMode) {\n        //  textMode textMode\n        this.textMode = textMode;\n        this.edgeTextMode = textMode;\n        this.nodeTextMode = textMode;\n    };\n    EditConfigModel.prototype.getConfig = function () {\n        return pick(this, allKeys);\n    };\n    __decorate([\n        observable\n    ], EditConfigModel.prototype, \"isSilentMode\", void 0);\n    __decorate([\n        observable\n    ], EditConfigModel.prototype, \"stopZoomGraph\", void 0);\n    __decorate([\n        observable\n    ], EditConfigModel.prototype, \"stopMoveGraph\", void 0);\n    __decorate([\n        observable\n    ], EditConfigModel.prototype, \"stopScrollGraph\", void 0);\n    __decorate([\n        observable\n    ], EditConfigModel.prototype, \"snapGrid\", void 0);\n    __decorate([\n        observable\n    ], EditConfigModel.prototype, \"isPinching\", void 0);\n    __decorate([\n        observable\n    ], EditConfigModel.prototype, \"textMode\", void 0);\n    __decorate([\n        observable\n    ], EditConfigModel.prototype, \"textEdit\", void 0);\n    __decorate([\n        observable\n    ], EditConfigModel.prototype, \"textDraggable\", void 0);\n    __decorate([\n        observable\n    ], EditConfigModel.prototype, \"nodeTextEdit\", void 0);\n    __decorate([\n        observable\n    ], EditConfigModel.prototype, \"nodeTextDraggable\", void 0);\n    __decorate([\n        observable\n    ], EditConfigModel.prototype, \"nodeTextMultiple\", void 0);\n    __decorate([\n        observable\n    ], EditConfigModel.prototype, \"nodeTextVertical\", void 0);\n    __decorate([\n        observable\n    ], EditConfigModel.prototype, \"nodeTextMode\", void 0);\n    __decorate([\n        observable\n    ], EditConfigModel.prototype, \"edgeTextMode\", void 0);\n    __decorate([\n        observable\n    ], EditConfigModel.prototype, \"edgeTextEdit\", void 0);\n    __decorate([\n        observable\n    ], EditConfigModel.prototype, \"edgeTextDraggable\", void 0);\n    __decorate([\n        observable\n    ], EditConfigModel.prototype, \"edgeTextMultiple\", void 0);\n    __decorate([\n        observable\n    ], EditConfigModel.prototype, \"edgeTextVertical\", void 0);\n    __decorate([\n        observable\n    ], EditConfigModel.prototype, \"hideAnchors\", void 0);\n    __decorate([\n        observable\n    ], EditConfigModel.prototype, \"allowRotate\", void 0);\n    __decorate([\n        observable\n    ], EditConfigModel.prototype, \"allowResize\", void 0);\n    __decorate([\n        observable\n    ], EditConfigModel.prototype, \"hoverOutline\", void 0);\n    __decorate([\n        observable\n    ], EditConfigModel.prototype, \"nodeSelectedOutline\", void 0);\n    __decorate([\n        observable\n    ], EditConfigModel.prototype, \"adjustNodePosition\", void 0);\n    __decorate([\n        observable\n    ], EditConfigModel.prototype, \"autoExpand\", void 0);\n    __decorate([\n        observable\n    ], EditConfigModel.prototype, \"adjustEdge\", void 0);\n    __decorate([\n        observable\n    ], EditConfigModel.prototype, \"adjustEdgeMiddle\", void 0);\n    __decorate([\n        observable\n    ], EditConfigModel.prototype, \"adjustEdgeStartAndEnd\", void 0);\n    __decorate([\n        observable\n    ], EditConfigModel.prototype, \"adjustEdgeStart\", void 0);\n    __decorate([\n        observable\n    ], EditConfigModel.prototype, \"adjustEdgeEnd\", void 0);\n    __decorate([\n        observable\n    ], EditConfigModel.prototype, \"edgeSelectedOutline\", void 0);\n    __decorate([\n        action\n    ], EditConfigModel.prototype, \"updateEditConfig\", null);\n    __decorate([\n        action\n    ], EditConfigModel.prototype, \"updateTextMode\", null);\n    return EditConfigModel;\n}());\nexport { EditConfigModel };\nexport default EditConfigModel;\n","var WILDCARD = '*';\n/* event-emitter */\nvar EventEmitter = /** @class */ (function () {\n    function EventEmitter() {\n        this._events = {};\n    }\n    EventEmitter.prototype.on = function (evt, callback, once) {\n        var _this = this;\n        evt === null || evt === void 0 ? void 0 : evt.split(',').forEach(function (evKey) {\n            evKey = evKey.trim();\n            if (!_this._events[evKey]) {\n                _this._events[evKey] = [];\n            }\n            _this._events[evKey].push({\n                callback: callback,\n                once: !!once,\n            });\n        });\n    };\n    EventEmitter.prototype.once = function (evt, callback) {\n        var _this = this;\n        evt === null || evt === void 0 ? void 0 : evt.split(',').forEach(function (evKey) {\n            evKey = evKey.trim();\n            _this.on(evKey, callback, true);\n        });\n    };\n    EventEmitter.prototype.emit = function (evts, eventArgs) {\n        var _this = this;\n        evts === null || evts === void 0 ? void 0 : evts.split(',').forEach(function (evt) {\n            var events = _this._events[evt] || [];\n            var wildcardEvents = _this._events[WILDCARD] || [];\n            //  emit \n            var doEmit = function (es) {\n                var length = es.length;\n                for (var i = 0; i < length; i++) {\n                    if (!es[i]) {\n                        continue;\n                    }\n                    var _a = es[i], callback = _a.callback, once = _a.once;\n                    if (once) {\n                        es.splice(i, 1);\n                        if (es.length === 0) {\n                            delete _this._events[evt];\n                        }\n                        length--;\n                        i--;\n                    }\n                    callback.apply(_this, [eventArgs]);\n                }\n            };\n            doEmit(events);\n            doEmit(wildcardEvents);\n        });\n    };\n    EventEmitter.prototype.off = function (evts, callback) {\n        var _this = this;\n        if (!evts) {\n            // evt \n            this._events = {};\n        }\n        evts.split(',').forEach(function (evt) {\n            if (!callback) {\n                // evt callback \n                delete _this._events[evt];\n            }\n            else {\n                // evt callback \n                var events = _this._events[evt] || [];\n                var length_1 = events.length;\n                for (var i = 0; i < length_1; i++) {\n                    if (events[i].callback === callback) {\n                        events.splice(i, 1);\n                        length_1--;\n                        i--;\n                    }\n                }\n                if (events.length === 0) {\n                    delete _this._events[evt];\n                }\n            }\n        });\n    };\n    /*  */\n    EventEmitter.prototype.getEvents = function () {\n        return this._events;\n    };\n    EventEmitter.prototype.destroy = function () {\n        this._events = {};\n    };\n    return EventEmitter;\n}());\nexport default EventEmitter;\nexport { EventEmitter };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { jsx as _jsx } from \"preact/jsx-runtime\";\nimport { Component } from 'preact/compat';\nimport { observer } from '../..';\nimport { EventType } from '../../constant';\nimport { StepDrag } from '../../util';\nvar CanvasOverlay = /** @class */ (function (_super) {\n    __extends(CanvasOverlay, _super);\n    function CanvasOverlay(props) {\n        var _this = _super.call(this) || this;\n        _this.stepScrollX = 0;\n        _this.stepScrollY = 0;\n        _this.pointers = new Map();\n        // get InjectedProps() {\n        //   return this.props as InjectedProps;\n        // }\n        _this.onDragging = function (_a) {\n            var deltaX = _a.deltaX, deltaY = _a.deltaY;\n            if (_this.longPressTimer) {\n                clearTimeout(_this.longPressTimer);\n                _this.longPressTimer = undefined;\n            }\n            _this.setState({\n                isDragging: true,\n            });\n            var _b = _this.props.graphModel, transformModel = _b.transformModel, editConfigModel = _b.editConfigModel;\n            if (editConfigModel.stopMoveGraph === true) {\n                return;\n            }\n            transformModel.translate(deltaX, deltaY);\n        };\n        _this.onDragEnd = function () {\n            _this.setState({\n                isDragging: false,\n            });\n        };\n        _this.zoomHandler = function (ev) {\n            var _a = _this.props, _b = _a.graphModel, editConfigModel = _b.editConfigModel, transformModel = _b.transformModel, gridSize = _b.gridSize, graphModel = _a.graphModel;\n            var eX = ev.deltaX, eY = ev.deltaY;\n            var stopScrollGraph = editConfigModel.stopScrollGraph, stopZoomGraph = editConfigModel.stopZoomGraph;\n            // , ctrlcmd, \n            if (!stopScrollGraph && !ev.ctrlKey && !ev.metaKey) {\n                ev.preventDefault();\n                _this.stepScrollX += eX;\n                _this.stepScrollY += eY;\n                if (Math.abs(_this.stepScrollX) >= gridSize) {\n                    var remainderX = _this.stepScrollX % gridSize;\n                    var moveDistance = _this.stepScrollX - remainderX;\n                    transformModel.translate(-moveDistance * transformModel.SCALE_X, 0);\n                    _this.stepScrollX = remainderX;\n                }\n                if (Math.abs(_this.stepScrollY) >= gridSize) {\n                    var remainderY = _this.stepScrollY % gridSize;\n                    var moveDistanceY = _this.stepScrollY - remainderY;\n                    transformModel.translate(0, -moveDistanceY * transformModel.SCALE_Y);\n                    _this.stepScrollY = remainderY;\n                }\n                return;\n            }\n            // .  ctrlcmd \n            if (!stopZoomGraph) {\n                ev.preventDefault();\n                var position = graphModel.getPointByClient({\n                    x: ev.clientX,\n                    y: ev.clientY,\n                });\n                var _c = position.canvasOverlayPosition, x = _c.x, y = _c.y;\n                transformModel.zoom(ev.deltaY < 0, [x, y]);\n            }\n        };\n        _this.clickHandler = function (ev) {\n            // , \n            var target = ev.target;\n            if (target.getAttribute('name') === 'canvas-overlay') {\n                var graphModel = _this.props.graphModel;\n                var selectElements = graphModel.selectElements;\n                if (selectElements.size > 0) {\n                    graphModel.clearSelectElements();\n                }\n                graphModel.eventCenter.emit(EventType.BLANK_CLICK, { e: ev });\n            }\n        };\n        _this.handleContextMenu = function (ev) {\n            var target = ev.target;\n            if (target.getAttribute('name') === 'canvas-overlay') {\n                ev.preventDefault();\n                var graphModel = _this.props.graphModel;\n                var position = graphModel.getPointByClient({\n                    x: ev.clientX,\n                    y: ev.clientY,\n                });\n                // graphModel.setElementState(ElementState.SHOW_MENU, position.domOverlayPosition);\n                graphModel.eventCenter.emit(EventType.BLANK_CONTEXTMENU, {\n                    e: ev,\n                    position: position,\n                });\n            }\n        };\n        //  \n        _this.pointerDownHandler = function (ev) {\n            var _a = _this.props.graphModel, eventCenter = _a.eventCenter, editConfigModel = _a.editConfigModel, SCALE_X = _a.transformModel.SCALE_X, gridSize = _a.gridSize;\n            _this.pointers.set(ev.pointerId, { x: ev.clientX, y: ev.clientY });\n            if (_this.longPressTimer) {\n                clearTimeout(_this.longPressTimer);\n            }\n            if (ev.pointerType === 'touch') {\n                _this.longPressTimer = window.setTimeout(function () {\n                    _this.handleContextMenu(ev);\n                }, 500);\n            }\n            // \n            if (_this.pointers.size === 2) {\n                var _b = _this.props.graphModel, transformModel = _b.transformModel, editConfigModel_1 = _b.editConfigModel;\n                // \n                var pts = Array.from(_this.pointers.values());\n                var dx = pts[0].x - pts[1].x;\n                var dy = pts[0].y - pts[1].y;\n                var cx = (pts[0].x + pts[1].x) / 2;\n                var cy = (pts[0].y + pts[1].y) / 2;\n                // \n                _this.pinchStartDistance = Math.hypot(dx, dy);\n                _this.pinchStartScale = transformModel.SCALE_X;\n                // \n                _this.stepDrag.cancelDrag();\n                _this.pinchLastCenterX = cx;\n                _this.pinchLastCenterY = cy;\n                editConfigModel_1.updateEditConfig({ isPinching: true });\n                return;\n            }\n            var adjustEdge = editConfigModel.adjustEdge, adjustNodePosition = editConfigModel.adjustNodePosition, stopMoveGraph = editConfigModel.stopMoveGraph;\n            var target = ev.target;\n            var isFrozenElement = !adjustEdge && !adjustNodePosition;\n            if (target.getAttribute('name') === 'canvas-overlay' || isFrozenElement) {\n                if (stopMoveGraph !== true) {\n                    _this.stepDrag.setStep(gridSize * SCALE_X);\n                    _this.stepDrag.handleMouseDown(ev);\n                }\n                else {\n                    eventCenter.emit(EventType.BLANK_MOUSEDOWN, { e: ev });\n                }\n                // \n                _this.clickHandler(ev);\n            }\n        };\n        _this.pointerMoveHandler = function (ev) {\n            var _a;\n            //  pointerId\n            _this.pointers.set(ev.pointerId, { x: ev.clientX, y: ev.clientY });\n            // \n            if (_this.pinchStartDistance && _this.pointers.size >= 2) {\n                var _b = _this.props, graphModel = _b.graphModel, _c = _b.graphModel, editConfigModel = _c.editConfigModel, transformModel = _c.transformModel;\n                if (editConfigModel.stopZoomGraph)\n                    return;\n                // \n                if (_this.longPressTimer) {\n                    clearTimeout(_this.longPressTimer);\n                }\n                // \n                var pts = Array.from(_this.pointers.values());\n                var dx = pts[0].x - pts[1].x;\n                var dy = pts[0].y - pts[1].y;\n                var dist = Math.hypot(dx, dy);\n                // \n                var scale = ((_a = _this.pinchStartScale) !== null && _a !== void 0 ? _a : transformModel.SCALE_X) *\n                    (dist / _this.pinchStartDistance);\n                // \n                var cx = (pts[0].x + pts[1].x) / 2;\n                var cy = (pts[0].y + pts[1].y) / 2;\n                var pos = graphModel.getPointByClient({ x: cx, y: cy });\n                var _d = pos.canvasOverlayPosition, x = _d.x, y = _d.y;\n                transformModel.zoom(scale, [x, y]);\n                // \n                if (!editConfigModel.stopMoveGraph || editConfigModel.isPinching) {\n                    var deltaX = _this.pinchLastCenterX === undefined ? 0 : cx - _this.pinchLastCenterX;\n                    var deltaY = _this.pinchLastCenterY === undefined ? 0 : cy - _this.pinchLastCenterY;\n                    transformModel.translate(deltaX, deltaY);\n                    _this.pinchLastCenterX = cx;\n                    _this.pinchLastCenterY = cy;\n                }\n                ev.preventDefault();\n            }\n        };\n        _this.pointerUpHandler = function (ev) {\n            _this.pointers.delete(ev.pointerId);\n            if (_this.longPressTimer) {\n                clearTimeout(_this.longPressTimer);\n                _this.longPressTimer = undefined;\n            }\n            // \n            if (_this.pointers.size < 2) {\n                // \n                _this.pinchStartDistance = undefined;\n                _this.pinchStartScale = undefined;\n                // \n                _this.pinchLastCenterX = undefined;\n                _this.pinchLastCenterY = undefined;\n                var editConfigModel = _this.props.graphModel.editConfigModel;\n                // \n                editConfigModel.updateEditConfig({ isPinching: false });\n            }\n        };\n        var _a = props.graphModel, gridSize = _a.gridSize, eventCenter = _a.eventCenter;\n        _this.stepDrag = new StepDrag({\n            onDragging: _this.onDragging,\n            onDragEnd: _this.onDragEnd,\n            step: gridSize,\n            eventType: 'BLANK',\n            isStopPropagation: false,\n            eventCenter: eventCenter,\n            model: undefined,\n        });\n        //  ctrlcmd \n        _this.state = {\n            isDragging: false,\n        };\n        return _this;\n    }\n    CanvasOverlay.prototype.render = function () {\n        var transformModel = this.props.graphModel.transformModel;\n        var transform = transformModel.getTransformStyle().transform;\n        var children = this.props.children;\n        var isDragging = this.state.isDragging;\n        return (_jsx(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: \"100%\", height: \"100%\", name: \"canvas-overlay\", onWheel: this.zoomHandler, onPointerDown: this.pointerDownHandler, onPointerMove: this.pointerMoveHandler, onPointerUp: this.pointerUpHandler, onPointerCancel: this.pointerUpHandler, onContextMenu: this.handleContextMenu, style: { touchAction: 'none', WebkitUserSelect: 'none' }, className: isDragging\n                ? 'lf-canvas-overlay lf-dragging'\n                : 'lf-canvas-overlay lf-drag-able', children: _jsx(\"g\", { transform: transform, children: children }) }));\n    };\n    CanvasOverlay = __decorate([\n        observer\n    ], CanvasOverlay);\n    return CanvasOverlay;\n}(Component));\nexport { CanvasOverlay };\nexport default CanvasOverlay;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { jsx as _jsx } from \"preact/jsx-runtime\";\nimport { Component } from 'preact/compat';\nimport { Circle, Line } from '../shape';\nimport { observer } from '../..';\nimport { EventType, ModelType } from '../../constant';\nimport { StepDrag, getBezierPoints } from '../../util';\n// bezier\nvar BezierAdjustAnchor = /** @class */ (function (_super) {\n    __extends(BezierAdjustAnchor, _super);\n    function BezierAdjustAnchor() {\n        var _this = _super.call(this) || this;\n        _this.onDragging = function (_a) {\n            var event = _a.event;\n            var _b = _this.props, graphModel = _b.graphModel, bezierModel = _b.bezierModel, type = _b.type;\n            var _c = graphModel.getPointByClient({\n                x: event.clientX,\n                y: event.clientY,\n            }).canvasOverlayPosition, x = _c.x, y = _c.y;\n            bezierModel.updateAdjustAnchor({\n                x: x,\n                y: y,\n            }, type);\n            graphModel.eventCenter.emit(EventType.EDGE_ADJUST, {\n                data: bezierModel.getData(),\n            });\n        };\n        _this.onDragEnd = function () {\n            var bezierModel = _this.props.bezierModel;\n            bezierModel.isDragging = false;\n        };\n        _this.dragHandler = new StepDrag({\n            onDragging: _this.onDragging,\n            onDragEnd: _this.onDragEnd,\n        });\n        return _this;\n    }\n    BezierAdjustAnchor.prototype.render = function () {\n        var _this = this;\n        var position = this.props.position;\n        var x = position.x, y = position.y;\n        var bezierModel = this.props.bezierModel;\n        var adjustAnchor = bezierModel.getEdgeStyle().adjustAnchor;\n        return (_jsx(Circle, __assign({ className: \"lf-bezier-adjust-anchor\", x: x, y: y }, adjustAnchor, { onPointerDown: function (ev) {\n                // if (edgeAddable !== false) {\n                _this.dragHandler.handleMouseDown(ev);\n                // }\n            } })));\n    };\n    return BezierAdjustAnchor;\n}(Component));\nexport { BezierAdjustAnchor };\nvar BezierAdjustOverlay = /** @class */ (function (_super) {\n    __extends(BezierAdjustOverlay, _super);\n    function BezierAdjustOverlay() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    BezierAdjustOverlay.prototype.getBezierAdjust = function (bezier, graphModel) {\n        var path = bezier.path, id = bezier.id;\n        var pointsList = getBezierPoints(path);\n        var _a = __read(pointsList, 4), start = _a[0], sNext = _a[1], ePre = _a[2], end = _a[3];\n        var adjustLine = bezier.getEdgeStyle().adjustLine;\n        var result = []; // TODO: \n        result.push(_jsx(Line, __assign({ x1: start.x, y1: start.y, x2: sNext.x, y2: sNext.y }, adjustLine)));\n        result.push(_jsx(BezierAdjustAnchor, { position: sNext, bezierModel: bezier, graphModel: graphModel, type: \"sNext\" }, \"\".concat(id, \"_ePre\")));\n        result.push(_jsx(Line, __assign({ x1: end.x, y1: end.y, x2: ePre.x, y2: ePre.y }, adjustLine)));\n        result.push(_jsx(BezierAdjustAnchor, { position: ePre, bezierModel: bezier, graphModel: graphModel, type: \"ePre\" }, \"\".concat(id, \"_sNext\")));\n        return result;\n    };\n    // bezier\n    BezierAdjustOverlay.prototype.selectedBezierEdge = function () {\n        var graphModel = this.props.graphModel;\n        var edgeList = graphModel.edges;\n        var edgeAdjust = []; // TODO\n        for (var i = 0; i < edgeList.length; i++) {\n            var edge = edgeList[i];\n            if (edge.isSelected &&\n                edge.modelType === ModelType.BEZIER_EDGE &&\n                edge.draggable) {\n                edgeAdjust.push(this.getBezierAdjust(edge, graphModel));\n            }\n        }\n        return edgeAdjust;\n    };\n    BezierAdjustOverlay.prototype.render = function () {\n        return _jsx(\"g\", { className: \"lf-bezier-adjust\", children: this.selectedBezierEdge() });\n    };\n    BezierAdjustOverlay = __decorate([\n        observer\n    ], BezierAdjustOverlay);\n    return BezierAdjustOverlay;\n}(Component));\nexport { BezierAdjustOverlay };\nexport default BezierAdjustOverlay;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { jsx as _jsx } from \"preact/jsx-runtime\";\nimport { Component } from 'preact/compat';\nimport { isObject } from 'lodash-es';\nimport { observer } from '../..';\nvar BackgroundOverlay = /** @class */ (function (_super) {\n    __extends(BackgroundOverlay, _super);\n    function BackgroundOverlay() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    BackgroundOverlay.prototype.render = function () {\n        var background = this.props.background;\n        return (_jsx(\"div\", { className: \"lf-background\", children: _jsx(\"div\", { style: isObject(background) ? background : {}, className: \"lf-background-area\" }) }));\n    };\n    BackgroundOverlay = __decorate([\n        observer\n    ], BackgroundOverlay);\n    return BackgroundOverlay;\n}(Component));\nexport { BackgroundOverlay };\nexport default BackgroundOverlay;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { Component } from 'preact/compat';\nimport { cloneDeep, assign } from 'lodash-es';\nimport { observer } from '../..';\nimport { createUuid } from '../../util';\nimport { DEFAULT_GRID_SIZE } from '../../constant';\nvar Grid = /** @class */ (function (_super) {\n    __extends(Grid, _super);\n    function Grid(props) {\n        var _this = _super.call(this, props) || this;\n        _this.id = createUuid();\n        _this.gridOptions = _this.props.graphModel.grid;\n        return _this;\n    }\n    // \n    Grid.prototype.renderDot = function () {\n        var _a = this.gridOptions, config = _a.config, _b = _a.size, size = _b === void 0 ? 1 : _b, visible = _a.visible;\n        var _c = config !== null && config !== void 0 ? config : {}, color = _c.color, _d = _c.thickness, thickness = _d === void 0 ? 2 : _d;\n        // \n        var radius = Math.min(Math.max(2, thickness), size / 4);\n        var opacity = visible ? 1 : 0;\n        return (_jsxs(\"g\", { fill: color, opacity: opacity, children: [_jsx(\"circle\", { cx: 0, cy: 0, r: radius / 2 }), _jsx(\"circle\", { cx: 0, cy: size, r: radius / 2 }), _jsx(\"circle\", { cx: size, cy: 0, r: radius / 2 }), _jsx(\"circle\", { cx: size, cy: size, r: radius / 2 })] }));\n    };\n    // \n    // todo: \n    Grid.prototype.renderMesh = function () {\n        var _a = this.gridOptions, config = _a.config, _b = _a.size, size = _b === void 0 ? 1 : _b, visible = _a.visible;\n        var _c = config !== null && config !== void 0 ? config : {}, color = _c.color, _d = _c.thickness, thickness = _d === void 0 ? 1 : _d;\n        // \n        var strokeWidth = Math.min(Math.max(1, thickness), size / 2);\n        var d = \"M 0 0 H \".concat(size, \" V \").concat(size, \" H 0 Z\");\n        var opacity = visible ? 1 : 0;\n        return (_jsx(\"path\", { d: d, stroke: color, strokeWidth: strokeWidth / 2, opacity: opacity, fill: \"transparent\" }));\n    };\n    Grid.prototype.render = function () {\n        var _a = this.props.graphModel, transformModel = _a.transformModel, grid = _a.grid;\n        this.gridOptions = grid;\n        var _b = this.gridOptions, type = _b.type, _c = _b.size, size = _c === void 0 ? 1 : _c;\n        var SCALE_X = transformModel.SCALE_X, SKEW_Y = transformModel.SKEW_Y, SKEW_X = transformModel.SKEW_X, SCALE_Y = transformModel.SCALE_Y, TRANSLATE_X = transformModel.TRANSLATE_X, TRANSLATE_Y = transformModel.TRANSLATE_Y;\n        var matrixString = [\n            SCALE_X,\n            SKEW_Y,\n            SKEW_X,\n            SCALE_Y,\n            TRANSLATE_X,\n            TRANSLATE_Y,\n        ].join(',');\n        var transform = \"matrix(\".concat(matrixString, \")\");\n        // const transitionStyle = {\n        //   transition: 'all 0.1s ease',\n        // };\n        return (_jsx(\"div\", { className: \"lf-grid\", children: _jsxs(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", version: \"1.1\", width: \"100%\", height: \"100%\", children: [_jsx(\"defs\", { children: _jsxs(\"pattern\", { id: this.id, patternUnits: \"userSpaceOnUse\", patternTransform: transform, x: \"0\", y: \"0\", width: size, height: size, children: [type === 'dot' && this.renderDot(), type === 'mesh' && this.renderMesh()] }) }), _jsx(\"rect\", { width: \"100%\", height: \"100%\", fill: \"url(#\".concat(this.id, \")\") })] }) }));\n    };\n    Grid = __decorate([\n        observer\n    ], Grid);\n    return Grid;\n}(Component));\nexport { Grid };\n(function (Grid) {\n    Grid.defaultProps = {\n        size: DEFAULT_GRID_SIZE,\n        visible: true,\n        type: 'dot',\n        config: {\n            color: '#ababab',\n            thickness: 1,\n        },\n    };\n    function getGridOptions(options) {\n        var defaultOptions = cloneDeep(Grid.defaultProps);\n        if (typeof options === 'number') {\n            return assign(defaultOptions, { size: options });\n        }\n        else if (typeof options === 'boolean') {\n            return assign(defaultOptions, { visible: options });\n        }\n        else {\n            return assign(defaultOptions, options);\n        }\n    }\n    Grid.getGridOptions = getGridOptions;\n})(Grid || (Grid = {}));\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { jsx as _jsx } from \"preact/jsx-runtime\";\nimport { Component } from 'preact/compat';\nimport { observer } from '../..';\nvar ModificationOverlay = /** @class */ (function (_super) {\n    __extends(ModificationOverlay, _super);\n    function ModificationOverlay() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ModificationOverlay.prototype.render = function () {\n        var transformModel = this.props.graphModel.transformModel;\n        var transform = transformModel.getTransformStyle().transform;\n        var children = this.props.children;\n        return (_jsx(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", version: \"1.1\", width: \"100%\", height: \"100%\", className: \"modification-overlay\", children: _jsx(\"g\", { transform: transform, children: children }) }));\n    };\n    ModificationOverlay = __decorate([\n        observer\n    ], ModificationOverlay);\n    return ModificationOverlay;\n}(Component));\nexport { ModificationOverlay };\nexport default ModificationOverlay;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { Component } from 'preact/compat';\nimport { Rect } from '../shape';\nimport { observer } from '../..';\nimport { ModelType } from '../../constant';\nimport { points2PointsList, getBezierPoints, getBBoxOfPoints } from '../../util';\nvar OutlineOverlay = /** @class */ (function (_super) {\n    __extends(OutlineOverlay, _super);\n    function OutlineOverlay() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    // outline\n    OutlineOverlay.prototype.getNodesOutline = function () {\n        var graphModel = this.props.graphModel;\n        var nodes = graphModel.nodes, _a = graphModel.editConfigModel, hoverOutline = _a.hoverOutline, nodeSelectedOutline = _a.nodeSelectedOutline;\n        var nodeOutline = [];\n        nodes.forEach(function (element) {\n            if (element.isHovered || element.isSelected) {\n                var isHovered = element.isHovered, isSelected = element.isSelected, x = element.x, y = element.y, width = element.width, height = element.height;\n                if ((nodeSelectedOutline && isSelected) ||\n                    (hoverOutline && isHovered)) {\n                    var style_1 = element.getOutlineStyle();\n                    var attributes_1 = {};\n                    Object.keys(style_1).forEach(function (key) {\n                        if (key !== 'hover') {\n                            attributes_1[key] = style_1[key];\n                        }\n                    });\n                    if (isHovered) {\n                        var hoverStyle = style_1.hover;\n                        attributes_1 = __assign(__assign({}, attributes_1), hoverStyle);\n                    }\n                    nodeOutline.push(_jsx(Rect, __assign({ transform: element.transform, className: \"lf-outline-node\", x: x, y: y, \n                        // width: width + 10,\n                        // height: height + 10,\n                        width: width + 10,\n                        height: height + 10 }, attributes_1)));\n                }\n            }\n        });\n        return nodeOutline;\n    };\n    // outline\n    OutlineOverlay.prototype.getEdgeOutline = function () {\n        var _a = this.props.graphModel, edgeList = _a.edges, _b = _a.editConfigModel, edgeSelectedOutline = _b.edgeSelectedOutline, hoverOutline = _b.hoverOutline;\n        var edgeOutline = [];\n        for (var i = 0; i < edgeList.length; i++) {\n            var edge = edgeList[i];\n            if ((edgeSelectedOutline && edge.isSelected) ||\n                (hoverOutline && edge.isHovered)) {\n                if (edge.modelType === ModelType.LINE_EDGE) {\n                    edgeOutline.push(this.getLineOutline(edge));\n                }\n                else if (edge.modelType === ModelType.POLYLINE_EDGE) {\n                    edgeOutline.push(this.getPolylineOutline(edge));\n                }\n                else if (edge.modelType === ModelType.BEZIER_EDGE) {\n                    edgeOutline.push(this.getBezierOutline(edge));\n                }\n            }\n        }\n        return edgeOutline;\n    };\n    // outline\n    OutlineOverlay.prototype.getLineOutline = function (line) {\n        var startPoint = line.startPoint, endPoint = line.endPoint;\n        var x = (startPoint.x + endPoint.x) / 2;\n        var y = (startPoint.y + endPoint.y) / 2;\n        var width = Math.abs(startPoint.x - endPoint.x) + 10;\n        var height = Math.abs(startPoint.y - endPoint.y) + 10;\n        var style = line.getOutlineStyle();\n        return (_jsx(Rect, __assign({ className: \"lf-outline-edge\", x: x, y: y, width: width, height: height }, style)));\n    };\n    // outline\n    OutlineOverlay.prototype.getPolylineOutline = function (polyline) {\n        var points = polyline.points;\n        var pointsList = points2PointsList(points);\n        var bbox = getBBoxOfPoints(pointsList, 8);\n        var x = bbox.x, y = bbox.y, width = bbox.width, height = bbox.height;\n        var style = polyline.getOutlineStyle();\n        return (_jsx(Rect, __assign({ className: \"lf-outline\", x: x, y: y, width: width, height: height }, style)));\n    };\n    // outline\n    OutlineOverlay.prototype.getBezierOutline = function (bezier) {\n        var path = bezier.path;\n        var pointsList = getBezierPoints(path);\n        var bbox = getBBoxOfPoints(pointsList, 8);\n        var x = bbox.x, y = bbox.y, width = bbox.width, height = bbox.height;\n        var style = bezier.getOutlineStyle();\n        return (_jsx(Rect, __assign({ className: \"lf-outline\", x: x, y: y, width: width, height: height }, style)));\n    };\n    OutlineOverlay.prototype.render = function () {\n        return (_jsxs(\"g\", { className: \"lf-outline\", children: [this.getNodesOutline(), this.getEdgeOutline()] }));\n    };\n    OutlineOverlay = __decorate([\n        observer\n    ], OutlineOverlay);\n    return OutlineOverlay;\n}(Component));\nexport { OutlineOverlay };\nexport default OutlineOverlay;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { Component } from 'preact/compat';\nimport Line from '../shape/Line';\nimport { observer } from '../..';\nimport OutlineOverlay from './OutlineOverlay';\nvar SnaplineOverlay = /** @class */ (function (_super) {\n    __extends(SnaplineOverlay, _super);\n    function SnaplineOverlay() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SnaplineOverlay.prototype.render = function () {\n        var snaplineModel = this.props.snaplineModel;\n        var _a = snaplineModel !== null && snaplineModel !== void 0 ? snaplineModel : {}, position = _a.position, isShowHorizontal = _a.isShowHorizontal, isShowVertical = _a.isShowVertical;\n        var style = snaplineModel === null || snaplineModel === void 0 ? void 0 : snaplineModel.getStyle();\n        var _b = position !== null && position !== void 0 ? position : {}, _c = _b.x, x = _c === void 0 ? 0 : _c, _d = _b.y, y = _d === void 0 ? 0 : _d;\n        // -100000,100000 \n        var horizontalLine = __assign(__assign({ x1: -100000, y1: y, x2: 100000, y2: y }, style), { stroke: isShowHorizontal ? style === null || style === void 0 ? void 0 : style.stroke : 'none' });\n        var verticalLine = __assign(__assign({ x1: x, y1: -100000, x2: x, y2: 100000 }, style), { stroke: isShowVertical ? style === null || style === void 0 ? void 0 : style.stroke : 'none' });\n        return (_jsxs(\"g\", { className: \"lf-snapline\", children: [_jsx(Line, __assign({}, horizontalLine)), _jsx(Line, __assign({}, verticalLine))] }));\n    };\n    SnaplineOverlay = __decorate([\n        observer\n    ], SnaplineOverlay);\n    return SnaplineOverlay;\n}(Component));\nexport { SnaplineOverlay };\nexport default OutlineOverlay;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { jsx as _jsx } from \"preact/jsx-runtime\";\nimport { createElement as h, Component } from 'preact/compat';\nimport { OutlineOverlay } from '.';\nimport { observer } from '../..';\nvar ToolOverlay = /** @class */ (function (_super) {\n    __extends(ToolOverlay, _super);\n    function ToolOverlay() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    // reactuseEffectLogicFlowcomponentDidMountcomponentDidUpdate\n    // componentDidMountgraphModelgraphModel, \n    // reactcomponentDidMountcomponentDidUpdate\n    // componentDidUpdatecomponentDidMountrender\n    ToolOverlay.prototype.componentDidMount = function () {\n        this.triggerToolRender();\n    };\n    ToolOverlay.prototype.componentDidUpdate = function () {\n        this.triggerToolRender();\n    };\n    /**\n     * HTMLElement\n     */\n    ToolOverlay.prototype.getTools = function () {\n        var _a = this.props, tool = _a.tool, graphModel = _a.graphModel;\n        var textEditElement = graphModel.textEditElement;\n        var tools = tool.getTools();\n        var components = tools.map(function (t) {\n            return h(t, {\n                textEditElement: textEditElement,\n                graphModel: graphModel,\n                lf: tool.instance,\n            });\n        });\n        tool.components = components;\n        return components;\n    };\n    ToolOverlay.prototype.triggerToolRender = function () {\n        var _a = this.props, tool = _a.tool, graphModel = _a.graphModel;\n        var ToolOverlayElement = document.querySelector(\"#ToolOverlay_\".concat(graphModel.flowId));\n        var lf = tool.getInstance();\n        lf.components.forEach(function (render) { return render(lf, ToolOverlayElement); });\n        lf.components = []; // extensionrender\n    };\n    ToolOverlay.prototype.render = function () {\n        var graphModel = this.props.graphModel;\n        return (_jsx(\"div\", { className: \"lf-tool-overlay\", id: \"ToolOverlay_\".concat(graphModel.flowId), children: this.getTools() }));\n    };\n    ToolOverlay = __decorate([\n        observer\n    ], ToolOverlay);\n    return ToolOverlay;\n}(Component));\nexport { ToolOverlay };\nexport default OutlineOverlay;\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { observable, action } from 'mobx';\nimport { EventType } from '../constant';\nvar translateLimitsMap = {\n    false: [-Infinity, -Infinity, Infinity, Infinity],\n    true: [-Infinity, -Infinity, Infinity, Infinity],\n    vertical: [-Infinity, 0, Infinity, 0],\n    horizontal: [0, -Infinity, 0, Infinity],\n};\nvar TransformModel = /** @class */ (function () {\n    function TransformModel(eventCenter, options) {\n        this.MINI_SCALE_SIZE = 0.2;\n        this.MAX_SCALE_SIZE = 16;\n        this.SCALE_X = 1;\n        this.SKEW_Y = 0;\n        this.SKEW_X = 0;\n        this.SCALE_Y = 1;\n        this.TRANSLATE_X = 0;\n        this.TRANSLATE_Y = 0;\n        this.ZOOM_SIZE = 0.04;\n        // \n        this.translateLimitMinX = -Infinity;\n        this.translateLimitMinY = -Infinity;\n        this.translateLimitMaxX = Infinity;\n        this.translateLimitMaxY = Infinity;\n        this.eventCenter = eventCenter;\n        var _a = options.stopMoveGraph, stopMoveGraph = _a === void 0 ? false : _a;\n        this.updateTranslateLimits(stopMoveGraph);\n    }\n    TransformModel.prototype.setZoomMiniSize = function (size) {\n        this.MINI_SCALE_SIZE = size;\n    };\n    TransformModel.prototype.setZoomMaxSize = function (size) {\n        this.MAX_SCALE_SIZE = size;\n    };\n    /**\n     * graphcanvasOverlay\n     * @param point HTML\n     */\n    TransformModel.prototype.HtmlPointToCanvasPoint = function (point) {\n        var _a = __read(point, 2), x = _a[0], y = _a[1];\n        return [\n            (x - this.TRANSLATE_X) / this.SCALE_X,\n            (y - this.TRANSLATE_Y) / this.SCALE_Y,\n        ];\n    };\n    /**\n     * canvasOverlaygraph\n     * @param point HTML\n     */\n    TransformModel.prototype.CanvasPointToHtmlPoint = function (point) {\n        var _a = __read(point, 2), x = _a[0], y = _a[1];\n        return [\n            x * this.SCALE_X + this.TRANSLATE_X,\n            y * this.SCALE_Y + this.TRANSLATE_Y,\n        ];\n    };\n    /**\n     * canvasxdirectionXydirectionY\n     * canvascanvas\n     * @param point \n     * @param directionX x\n     * @param directionY y\n     */\n    TransformModel.prototype.moveCanvasPointByHtml = function (point, directionX, directionY) {\n        var _a = __read(point, 2), x = _a[0], y = _a[1];\n        return [x + directionX / this.SCALE_X, y + directionY / this.SCALE_Y];\n    };\n    /**\n     * delta\n     * @param deltaX x\n     * @param deltaY y\n     */\n    TransformModel.prototype.fixDeltaXY = function (deltaX, deltaY) {\n        return [deltaX / this.SCALE_X, deltaY / this.SCALE_Y];\n    };\n    /**\n     * transform\n     */\n    TransformModel.prototype.getTransformStyle = function () {\n        var matrixString = [\n            this.SCALE_X,\n            this.SKEW_Y,\n            this.SKEW_X,\n            this.SCALE_Y,\n            this.TRANSLATE_X,\n            this.TRANSLATE_Y,\n        ].join(',');\n        return {\n            transform: \"matrix(\".concat(matrixString, \")\"),\n        };\n    };\n    /**\n     * \n     * @param zoomSize 0-n11truefalse\n     * @param point \n     * @returns {string} -\n     */\n    TransformModel.prototype.zoom = function (zoomSize, point) {\n        if (zoomSize === void 0) { zoomSize = false; }\n        var newScaleX = this.SCALE_X;\n        var newScaleY = this.SCALE_Y;\n        if (typeof zoomSize === 'number') {\n            newScaleX = zoomSize;\n            newScaleY = zoomSize;\n        }\n        else {\n            if (zoomSize) {\n                newScaleX += this.ZOOM_SIZE;\n                newScaleY += this.ZOOM_SIZE;\n            }\n            else {\n                newScaleX -= this.ZOOM_SIZE;\n                newScaleY -= this.ZOOM_SIZE;\n            }\n        }\n        if (newScaleX < this.MINI_SCALE_SIZE || newScaleX > this.MAX_SCALE_SIZE) {\n            return \"\".concat(this.SCALE_X * 100, \"%\");\n        }\n        if (point) {\n            this.TRANSLATE_X -= (newScaleX - this.SCALE_X) * point[0];\n            this.TRANSLATE_Y -= (newScaleY - this.SCALE_Y) * point[1];\n        }\n        this.SCALE_X = newScaleX;\n        this.SCALE_Y = newScaleY;\n        this.emitGraphTransform('zoom');\n        return \"\".concat(this.SCALE_X * 100, \"%\");\n    };\n    TransformModel.prototype.emitGraphTransform = function (type) {\n        this.eventCenter.emit(EventType.GRAPH_TRANSFORM, {\n            type: type,\n            transform: {\n                SCALE_X: this.SCALE_X,\n                SKEW_Y: this.SKEW_Y,\n                SKEW_X: this.SKEW_X,\n                SCALE_Y: this.SCALE_Y,\n                TRANSLATE_X: this.TRANSLATE_X,\n                TRANSLATE_Y: this.TRANSLATE_Y,\n            },\n        });\n    };\n    TransformModel.prototype.resetZoom = function () {\n        this.SCALE_X = 1;\n        this.SCALE_Y = 1;\n        this.emitGraphTransform('resetZoom');\n    };\n    TransformModel.prototype.translate = function (x, y) {\n        if (this.TRANSLATE_X + x <= this.translateLimitMaxX &&\n            this.TRANSLATE_X + x >= this.translateLimitMinX) {\n            this.TRANSLATE_X += x;\n        }\n        if (this.TRANSLATE_Y + y <= this.translateLimitMaxY &&\n            this.TRANSLATE_Y + y >= this.translateLimitMinY) {\n            this.TRANSLATE_Y += y;\n        }\n        this.emitGraphTransform('translate');\n    };\n    /**\n     * \n     * @param targetX x\n     * @param targetY y\n     * @param width \n     * @param height \n     */\n    TransformModel.prototype.focusOn = function (targetX, targetY, width, height) {\n        var _a = __read(this.CanvasPointToHtmlPoint([targetX, targetY]), 2), x = _a[0], y = _a[1];\n        var _b = __read([width / 2 - x, height / 2 - y], 2), deltaX = _b[0], deltaY = _b[1];\n        this.TRANSLATE_X += deltaX;\n        this.TRANSLATE_Y += deltaY;\n        this.emitGraphTransform('focusOn');\n    };\n    /**\n     * \n     */\n    TransformModel.prototype.updateTranslateLimits = function (limit) {\n        var _a;\n        ;\n        _a = __read(Array.isArray(limit) && limit.length === 4\n            ? limit\n            : translateLimitsMap[limit.toString()], 4), this.translateLimitMinX = _a[0], this.translateLimitMinY = _a[1], this.translateLimitMaxX = _a[2], this.translateLimitMaxY = _a[3];\n    };\n    __decorate([\n        observable\n    ], TransformModel.prototype, \"SCALE_X\", void 0);\n    __decorate([\n        observable\n    ], TransformModel.prototype, \"SKEW_Y\", void 0);\n    __decorate([\n        observable\n    ], TransformModel.prototype, \"SKEW_X\", void 0);\n    __decorate([\n        observable\n    ], TransformModel.prototype, \"SCALE_Y\", void 0);\n    __decorate([\n        observable\n    ], TransformModel.prototype, \"TRANSLATE_X\", void 0);\n    __decorate([\n        observable\n    ], TransformModel.prototype, \"TRANSLATE_Y\", void 0);\n    __decorate([\n        observable\n    ], TransformModel.prototype, \"ZOOM_SIZE\", void 0);\n    __decorate([\n        action\n    ], TransformModel.prototype, \"zoom\", null);\n    __decorate([\n        action\n    ], TransformModel.prototype, \"resetZoom\", null);\n    __decorate([\n        action\n    ], TransformModel.prototype, \"translate\", null);\n    __decorate([\n        action\n    ], TransformModel.prototype, \"focusOn\", null);\n    return TransformModel;\n}());\nexport { TransformModel };\nexport default TransformModel;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { TransformModel } from './TransformModel';\nvar NestedTransformModel = /** @class */ (function (_super) {\n    __extends(NestedTransformModel, _super);\n    function NestedTransformModel(eventCenter, options) {\n        var _this = _super.call(this, eventCenter, options) || this;\n        _this.parentTransform = options.parentTransform;\n        return _this;\n    }\n    /**\n     * \n     * @param parentTransform \n     */\n    NestedTransformModel.prototype.setParentTransform = function (parentTransform) {\n        this.parentTransform = parentTransform;\n    };\n    /**\n     * \n     * \n     */\n    NestedTransformModel.prototype.getCumulativeScale = function () {\n        var scaleX = this.SCALE_X;\n        var scaleY = this.SCALE_Y;\n        if (this.parentTransform) {\n            if (this.parentTransform instanceof NestedTransformModel) {\n                var parentScale = this.parentTransform.getCumulativeScale();\n                scaleX *= parentScale.scaleX;\n                scaleY *= parentScale.scaleY;\n            }\n            else {\n                scaleX *= this.parentTransform.SCALE_X;\n                scaleY *= this.parentTransform.SCALE_Y;\n            }\n        }\n        return { scaleX: scaleX, scaleY: scaleY };\n    };\n    /**\n     * \n     * \n     */\n    NestedTransformModel.prototype.getCumulativeTranslate = function () {\n        var translateX = this.TRANSLATE_X;\n        var translateY = this.TRANSLATE_Y;\n        if (this.parentTransform &&\n            this.parentTransform instanceof NestedTransformModel) {\n            var _a = this.parentTransform.getCumulativeScale(), scaleX = _a.scaleX, scaleY = _a.scaleY;\n            translateX = scaleX * translateX;\n            translateY = scaleY * translateY;\n        }\n        return { translateX: translateX, translateY: translateY };\n    };\n    /**\n     * graphcanvasOverlay\n     * \n     * @param point HTML\n     */\n    NestedTransformModel.prototype.HtmlPointToCanvasPoint = function (point) {\n        var _a = __read(point, 2), x = _a[0], y = _a[1];\n        var _b = this.getCumulativeScale(), scaleX = _b.scaleX, scaleY = _b.scaleY;\n        var _c = this.getCumulativeTranslate(), translateX = _c.translateX, translateY = _c.translateY;\n        return [(x - translateX) / scaleX, (y - translateY) / scaleY];\n    };\n    /**\n     * canvasOverlaygraph\n     * \n     * @param point Canvas\n     */\n    NestedTransformModel.prototype.CanvasPointToHtmlPoint = function (point) {\n        var _a = __read(point, 2), x = _a[0], y = _a[1];\n        var _b = this.getCumulativeScale(), scaleX = _b.scaleX, scaleY = _b.scaleY;\n        var _c = this.getCumulativeTranslate(), translateX = _c.translateX, translateY = _c.translateY;\n        return [x * scaleX + translateX, y * scaleY + translateY];\n    };\n    /**\n     * canvasxdirectionXydirectionY\n     * \n     * @param point \n     * @param directionX x\n     * @param directionY y\n     */\n    NestedTransformModel.prototype.moveCanvasPointByHtml = function (point, directionX, directionY) {\n        var _a = __read(point, 2), x = _a[0], y = _a[1];\n        var _b = this.getCumulativeScale(), scaleX = _b.scaleX, scaleY = _b.scaleY;\n        return [x + directionX / scaleX, y + directionY / scaleY];\n    };\n    /**\n     * delta\n     * \n     * @param deltaX x\n     * @param deltaY y\n     */\n    NestedTransformModel.prototype.fixDeltaXY = function (deltaX, deltaY) {\n        var _a = this.getCumulativeScale(), scaleX = _a.scaleX, scaleY = _a.scaleY;\n        return [deltaX / scaleX, deltaY / scaleY];\n    };\n    return NestedTransformModel;\n}(TransformModel));\nexport { NestedTransformModel };\nexport default NestedTransformModel;\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { find, forEach, map, merge, isBoolean, debounce, cloneDeep, isNil, } from 'lodash-es';\nimport { action, computed, observable } from 'mobx';\nimport { EditConfigModel, } from '.';\nimport { DEFAULT_VISIBLE_SPACE, ELEMENT_MAX_Z_INDEX, ElementState, ElementType, EventType, ModelType, OverlapMode, TextMode, } from '../constant';\nimport { createEdgeGenerator, createUuid, formatData, getClosestPointOfPolyline, getMinIndex, getNodeAnchorPosition, getNodeBBox, getZIndex, isPointInArea, setupAnimation, setupTheme, snapToGrid, updateTheme, backgroundModeMap, gridModeMap, } from '../util';\nimport EventEmitter from '../event/eventEmitter';\nimport { Grid } from '../view/overlay';\nimport NestedTransformModel from './NestedTransformModel';\nvar GraphModel = /** @class */ (function () {\n    function GraphModel(options) {\n        var _this = this;\n        var _a, _b;\n        //  model\n        this.modelMap = new Map();\n        // Remind model  Map\n        //  this.nodes.map  new Model  model\n        // eg: new DynamicGroupModel  children  model groupModel  isCollapsed  visible\n        this.nodeModelMap = new Map();\n        this.edgeModelMap = new Map();\n        this.elementsModelMap = new Map();\n        /**\n         * \n         * \n         */\n        this.nodeMoveRules = [];\n        /**\n         * resize\n         * resize\n         */\n        this.nodeResizeRules = [];\n        // model\n        this.nodes = [];\n        // model\n        this.edges = [];\n        /**\n         * \n         * - DEFAULT\n         * - INCREASE\n         */\n        this.overlapMode = OverlapMode.DEFAULT;\n        // \n        this.gridSize = 1;\n        // \n        this.partial = false;\n        this.waitCleanEffects = [];\n        var container = options.container, partial = options.partial, _c = options.background, background = _c === void 0 ? {} : _c, grid = options.grid, idGenerator = options.idGenerator, edgeGenerator = options.edgeGenerator, animation = options.animation, customTrajectory = options.customTrajectory;\n        this.rootEl = container;\n        this.partial = !!partial;\n        this.background = background;\n        if (typeof grid === 'object' && options.snapGrid) {\n            // \n            // TODO 0 \n            this.gridSize = grid.size || 1; //  gridSize  1\n        }\n        this.customStyles = options.style || {};\n        this.grid = Grid.getGridOptions(grid !== null && grid !== void 0 ? grid : false);\n        this.theme = setupTheme(options.style, options.themeMode);\n        this.theme.grid = cloneDeep(this.grid);\n        this.theme.background = cloneDeep(this.background);\n        this.edgeType = options.edgeType || 'polyline';\n        this.animation = setupAnimation(animation);\n        this.overlapMode = options.overlapMode || OverlapMode.DEFAULT;\n        this.isMiniMap = options.isMiniMap || false;\n        this.width = (_a = options.width) !== null && _a !== void 0 ? _a : this.rootEl.getBoundingClientRect().width;\n        this.isContainerWidth = isNil(options.width);\n        this.height = (_b = options.height) !== null && _b !== void 0 ? _b : this.rootEl.getBoundingClientRect().height;\n        this.isContainerHeight = isNil(options.height);\n        var resizeObserver = new ResizeObserver(debounce((function (entries) {\n            var e_1, _a;\n            try {\n                for (var entries_1 = __values(entries), entries_1_1 = entries_1.next(); !entries_1_1.done; entries_1_1 = entries_1.next()) {\n                    var entry = entries_1_1.value;\n                    if (entry.target === _this.rootEl) {\n                        _this.resize();\n                        _this.eventCenter.emit('graph:resize', {\n                            target: _this.rootEl,\n                            contentRect: entry.contentRect,\n                        });\n                    }\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (entries_1_1 && !entries_1_1.done && (_a = entries_1.return)) _a.call(entries_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        }), 16));\n        resizeObserver.observe(this.rootEl);\n        this.waitCleanEffects.push(function () {\n            resizeObserver.disconnect();\n        });\n        this.eventCenter = new EventEmitter();\n        this.editConfigModel = new EditConfigModel(options);\n        this.transformModel = new NestedTransformModel(this.eventCenter, options);\n        this.flowId = createUuid();\n        this.idGenerator = idGenerator;\n        this.edgeGenerator = createEdgeGenerator(this, edgeGenerator);\n        this.customTrajectory = customTrajectory;\n    }\n    Object.defineProperty(GraphModel.prototype, \"nodesMap\", {\n        get: function () {\n            return this.nodes.reduce(function (nMap, model, index) {\n                nMap[model.id] = {\n                    index: index,\n                    model: model,\n                };\n                return nMap;\n            }, {});\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(GraphModel.prototype, \"edgesMap\", {\n        get: function () {\n            return this.edges.reduce(function (eMap, model, index) {\n                eMap[model.id] = {\n                    index: index,\n                    model: model,\n                };\n                return eMap;\n            }, {});\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(GraphModel.prototype, \"modelsMap\", {\n        get: function () {\n            return __spreadArray(__spreadArray([], __read(this.nodes), false), __read(this.edges), false).reduce(function (eMap, model) {\n                eMap[model.id] = model;\n                return eMap;\n            }, {});\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(GraphModel.prototype, \"sortElements\", {\n        /**\n         * zIndex\n         * todo: \n         */\n        get: function () {\n            var sortElement = function (list) {\n                return __spreadArray([], __read(list), false).sort(function (a, b) { return a.zIndex - b.zIndex; });\n            };\n            //  zIndex \n            var elements = sortElement(__spreadArray(__spreadArray([], __read(this.nodes), false), __read(this.edges), false));\n            // \n            var visibleElements = [];\n            // TODO:  by xutao. So how?\n            var visibleLt = [\n                -DEFAULT_VISIBLE_SPACE,\n                -DEFAULT_VISIBLE_SPACE,\n            ];\n            var visibleRb = [\n                this.width + DEFAULT_VISIBLE_SPACE,\n                this.height + DEFAULT_VISIBLE_SPACE,\n            ];\n            for (var i = 0; i < elements.length; i++) {\n                var currentItem = elements[i];\n                // \n                if (currentItem.visible &&\n                    (!this.partial ||\n                        currentItem.isSelected ||\n                        this.isElementInArea(currentItem, visibleLt, visibleRb, false, false))) {\n                    visibleElements.push(currentItem);\n                }\n            }\n            return visibleElements;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(GraphModel.prototype, \"textEditElement\", {\n        /**\n         * \n         */\n        get: function () {\n            var textEditNode = this.nodes.find(function (node) { return node.state === ElementState.TEXT_EDIT; });\n            var textEditEdge = this.edges.find(function (edge) { return edge.state === ElementState.TEXT_EDIT; });\n            return textEditNode || textEditEdge;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(GraphModel.prototype, \"selectElements\", {\n        /**\n         * \n         */\n        get: function () {\n            var elements = new Map();\n            this.nodes.forEach(function (node) {\n                if (node.isSelected) {\n                    elements.set(node.id, node);\n                }\n            });\n            this.edges.forEach(function (edge) {\n                if (edge.isSelected) {\n                    elements.set(edge.id, edge);\n                }\n            });\n            return elements;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(GraphModel.prototype, \"selectNodes\", {\n        get: function () {\n            var nodes = [];\n            this.nodes.forEach(function (node) {\n                if (node.isSelected) {\n                    nodes.push(node);\n                }\n            });\n            return nodes;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * \n     * @param leftTopPoint \n     * @param rightBottomPoint \n     * @param wholeEdge \n     * @param wholeNode \n     * @param ignoreHideElement \n     */\n    // TODO: rename getAreaElement to getElementsInArea or getAreaElements\n    GraphModel.prototype.getAreaElement = function (leftTopPoint, rightBottomPoint, wholeEdge, wholeNode, ignoreHideElement) {\n        var _this = this;\n        if (wholeEdge === void 0) { wholeEdge = true; }\n        if (wholeNode === void 0) { wholeNode = true; }\n        if (ignoreHideElement === void 0) { ignoreHideElement = false; }\n        var areaElements = [];\n        forEach(__spreadArray(__spreadArray([], __read(this.nodes), false), __read(this.edges), false), function (element) {\n            var isElementInArea = _this.isElementInArea(element, leftTopPoint, rightBottomPoint, wholeEdge, wholeNode);\n            if ((!ignoreHideElement || element.visible) && isElementInArea) {\n                areaElements.push(element);\n            }\n        });\n        return areaElements;\n    };\n    /**\n     * Model\n     */\n    GraphModel.prototype.getModel = function (type) {\n        return this.modelMap.get(type);\n    };\n    /**\n     * Idmodel\n     */\n    GraphModel.prototype.getNodeModelById = function (nodeId) {\n        var _a;\n        if (this.fakeNode && nodeId === this.fakeNode.id) {\n            return this.fakeNode;\n        }\n        return (_a = this.nodesMap[nodeId]) === null || _a === void 0 ? void 0 : _a.model;\n    };\n    /**\n     * \n     * \n     * client\n     */\n    GraphModel.prototype.getPointByClient = function (_a) {\n        var x1 = _a.x, y1 = _a.y;\n        var bbox = this.rootEl.getBoundingClientRect();\n        var domOverlayPosition = {\n            x: x1 - bbox.left,\n            y: y1 - bbox.top,\n        };\n        var _b = __read(this.transformModel.HtmlPointToCanvasPoint([\n            domOverlayPosition.x,\n            domOverlayPosition.y,\n        ]), 2), x = _b[0], y = _b[1];\n        var canvasOverlayPosition = { x: x, y: y };\n        return {\n            domOverlayPosition: domOverlayPosition,\n            canvasOverlayPosition: canvasOverlayPosition,\n        };\n    };\n    /**\n     * \n     * @param element \n     * @param lt \n     * @param rb \n     * @param wholeEdge \n     * @param wholeNode box\n     */\n    GraphModel.prototype.isElementInArea = function (element, lt, rb, wholeEdge, wholeNode) {\n        var _a;\n        if (wholeEdge === void 0) { wholeEdge = true; }\n        if (wholeNode === void 0) { wholeNode = true; }\n        if (element.BaseType === ElementType.NODE) {\n            element = element;\n            // bbox\n            var _b = getNodeBBox(element), minX = _b.minX, minY = _b.minY, maxX = _b.maxX, maxY = _b.maxY;\n            var bboxPointsList = [\n                {\n                    x: minX,\n                    y: minY,\n                },\n                {\n                    x: maxX,\n                    y: minY,\n                },\n                {\n                    x: maxX,\n                    y: maxY,\n                },\n                {\n                    x: minX,\n                    y: maxY,\n                },\n            ];\n            var inArea = wholeNode;\n            for (var i = 0; i < bboxPointsList.length; i++) {\n                var _c = bboxPointsList[i], x = _c.x, y = _c.y;\n                _a = __read(this.transformModel.CanvasPointToHtmlPoint([x, y]), 2), x = _a[0], y = _a[1];\n                if (isPointInArea([x, y], lt, rb) !== wholeNode) {\n                    inArea = !wholeNode;\n                    break;\n                }\n            }\n            return inArea;\n        }\n        if (element.BaseType === ElementType.EDGE) {\n            element = element;\n            var startPoint = element.startPoint, endPoint = element.endPoint;\n            var startHtmlPoint = this.transformModel.CanvasPointToHtmlPoint([\n                startPoint.x,\n                startPoint.y,\n            ]);\n            var endHtmlPoint = this.transformModel.CanvasPointToHtmlPoint([\n                endPoint.x,\n                endPoint.y,\n            ]);\n            var isStartInArea = isPointInArea(startHtmlPoint, lt, rb);\n            var isEndInArea = isPointInArea(endHtmlPoint, lt, rb);\n            return wholeEdge\n                ? isStartInArea && isEndInArea\n                : isStartInArea || isEndInArea;\n        }\n        return false;\n    };\n    /**\n     * \n     * \n     * @param { object } graphData \n     */\n    GraphModel.prototype.graphDataToModel = function (graphData) {\n        var _this = this;\n        // \n        // if (!this.width || !this.height) {\n        //   this.resize()\n        // }\n        if (!graphData) {\n            this.clearData();\n            return;\n        }\n        this.elementsModelMap.clear();\n        this.nodeModelMap.clear();\n        this.edgeModelMap.clear();\n        if (graphData.nodes) {\n            this.nodes = map(graphData.nodes, function (node) {\n                var nodeModel = _this.getModelAfterSnapToGrid(node);\n                _this.elementsModelMap.set(nodeModel.id, nodeModel);\n                _this.nodeModelMap.set(nodeModel.id, nodeModel);\n                return nodeModel;\n            });\n        }\n        else {\n            this.nodes = [];\n        }\n        if (graphData.edges) {\n            var currEdgeType_1 = this.edgeType;\n            this.edges = map(graphData.edges, function (edge) {\n                var _a;\n                var Model = _this.getModel((_a = edge.type) !== null && _a !== void 0 ? _a : currEdgeType_1);\n                if (!Model) {\n                    throw new Error(\"\\u627E\\u4E0D\\u5230\".concat(edge.type, \"\\u5BF9\\u5E94\\u7684\\u8FB9\\u3002\"));\n                }\n                var edgeModel = new Model(edge, _this);\n                _this.edgeModelMap.set(edgeModel.id, edgeModel);\n                _this.elementsModelMap.set(edgeModel.id, edgeModel);\n                return edgeModel;\n            });\n        }\n        else {\n            this.edges = [];\n        }\n    };\n    /**\n     * \n     */\n    GraphModel.prototype.modelToGraphData = function () {\n        var edges = [];\n        this.edges.forEach(function (edge) {\n            var data = edge.getData();\n            if (data && !edge.virtual)\n                edges.push(data);\n        });\n        var nodes = [];\n        this.nodes.forEach(function (node) {\n            var data = node.getData();\n            if (data && !node.virtual)\n                nodes.push(data);\n        });\n        return {\n            nodes: nodes,\n            edges: edges,\n        };\n    };\n    // history\n    GraphModel.prototype.modelToHistoryData = function () {\n        var nodeDragging = false;\n        var nodes = [];\n        // history\n        for (var i = 0; i < this.nodes.length; i++) {\n            var nodeModel = this.nodes[i];\n            if (nodeModel.isDragging) {\n                nodeDragging = true;\n                break;\n            }\n            else {\n                nodes.push(nodeModel.getHistoryData());\n            }\n        }\n        if (nodeDragging) {\n            return false;\n        }\n        // history\n        var edgeDragging = false;\n        var edges = [];\n        for (var j = 0; j < this.edges.length; j++) {\n            var edgeMode = this.edges[j];\n            if (edgeMode.isDragging) {\n                edgeDragging = true;\n                break;\n            }\n            else {\n                edges.push(edgeMode.getHistoryData());\n            }\n        }\n        if (edgeDragging) {\n            return false;\n        }\n        return {\n            nodes: nodes,\n            edges: edges,\n        };\n    };\n    /**\n     * model\n     */\n    GraphModel.prototype.getEdgeModelById = function (edgeId) {\n        var _a;\n        return (_a = this.edgesMap[edgeId]) === null || _a === void 0 ? void 0 : _a.model;\n    };\n    /**\n     * model\n     */\n    GraphModel.prototype.getElement = function (id) {\n        return this.modelsMap[id];\n    };\n    /**\n     * model\n     */\n    GraphModel.prototype.getNodeEdges = function (nodeId) {\n        var edges = [];\n        for (var i = 0; i < this.edges.length; i++) {\n            var edgeModel = this.edges[i];\n            var nodeAsSource = edgeModel.sourceNodeId === nodeId;\n            var nodeAsTarget = edgeModel.targetNodeId === nodeId;\n            if (nodeAsSource || nodeAsTarget) {\n                edges.push(edgeModel);\n            }\n        }\n        return edges;\n    };\n    /**\n     * \n     * @param isIgnoreCheck sourceNodetargetNode,\n     * , \n     */\n    GraphModel.prototype.getSelectElements = function (isIgnoreCheck) {\n        if (isIgnoreCheck === void 0) { isIgnoreCheck = true; }\n        var elements = this.selectElements;\n        var graphData = {\n            nodes: [],\n            edges: [],\n        };\n        elements.forEach(function (element) {\n            if (element.BaseType === ElementType.NODE) {\n                graphData.nodes.push(element.getData());\n            }\n            if (element.BaseType === ElementType.EDGE) {\n                var edgeData = element.getData();\n                var isNodeSelected = elements.get(edgeData.sourceNodeId) &&\n                    elements.get(edgeData.targetNodeId);\n                if (isIgnoreCheck || isNodeSelected) {\n                    graphData.edges.push(edgeData);\n                }\n            }\n        });\n        return graphData;\n    };\n    /**\n     *  model \n     * logicflow\n     * setPropertiesupdateTextchangeNodeId\n     * id,sourceNodeId\n     * @param {string} id id\n     * @param {object} attributes \n     */\n    GraphModel.prototype.updateAttributes = function (id, attributes) {\n        var element = this.getElement(id);\n        element === null || element === void 0 ? void 0 : element.updateAttributes(attributes);\n    };\n    /**\n     * id id\n     * @param { string } nodeId id\n     * @param { string } newId id\n     * @returns id, oldId\n     */\n    GraphModel.prototype.changeNodeId = function (nodeId, newId) {\n        if (!newId) {\n            newId = createUuid();\n        }\n        if (this.nodesMap[newId]) {\n            console.warn(\"\\u5F53\\u524D\\u6D41\\u7A0B\\u56FE\\u5DF2\\u5B58\\u5728\\u8282\\u70B9\".concat(newId, \", \\u4FEE\\u6539\\u5931\\u8D25\"));\n            return '';\n        }\n        if (!this.nodesMap[nodeId]) {\n            console.warn(\"\\u5F53\\u524D\\u6D41\\u7A0B\\u56FE\\u627E\\u4E0D\\u5230\\u8282\\u70B9\".concat(nodeId, \", \\u4FEE\\u6539\\u5931\\u8D25\"));\n            return '';\n        }\n        this.edges.forEach(function (edge) {\n            if (edge.sourceNodeId === nodeId) {\n                edge.sourceNodeId = newId;\n            }\n            if (edge.targetNodeId === nodeId) {\n                edge.targetNodeId = newId;\n            }\n        });\n        this.nodesMap[nodeId].model.id = newId;\n        this.nodesMap[newId] = this.nodesMap[nodeId];\n        return newId;\n    };\n    /**\n     * id id\n     * @param { string } oldId id\n     * @param { string } newId id\n     * @returns id, oldId\n     */\n    GraphModel.prototype.changeEdgeId = function (oldId, newId) {\n        if (!newId) {\n            newId = createUuid();\n        }\n        if (this.edgesMap[newId]) {\n            console.warn(\"\\u5F53\\u524D\\u6D41\\u7A0B\\u56FE\\u5DF2\\u5B58\\u5728\\u8FB9: \".concat(newId, \", \\u4FEE\\u6539\\u5931\\u8D25\"));\n            return '';\n        }\n        if (!this.edgesMap[oldId]) {\n            console.warn(\"\\u5F53\\u524D\\u6D41\\u7A0B\\u56FE\\u627E\\u4E0D\\u5230\\u8FB9: \".concat(newId, \", \\u4FEE\\u6539\\u5931\\u8D25\"));\n            return '';\n        }\n        this.edges.forEach(function (edge) {\n            if (edge.id === oldId) {\n                // edge.id = newId\n                edge.changeEdgeId(newId);\n            }\n        });\n        return newId;\n    };\n    /**\n     * \n     * @param model\n     */\n    GraphModel.prototype.getTextModel = function (model) {\n        var _a = this.editConfigModel, textMode = _a.textMode, nodeTextMode = _a.nodeTextMode, edgeTextMode = _a.edgeTextMode;\n        // textMode \n        //  model.textMode > editConfigModel.node(edge)TextMode > editConfigModel.textMode\n        if (model.BaseType === ElementType.NODE) {\n            return model.textMode || nodeTextMode || textMode || TextMode.TEXT;\n        }\n        // \n        if (model.BaseType === ElementType.EDGE) {\n            return model.textMode || edgeTextMode || textMode || TextMode.TEXT;\n        }\n    };\n    /**\n     * \n     */\n    /**\n     * \n     * @param mode \n     */\n    GraphModel.prototype.setOverlapMode = function (mode) {\n        this.overlapMode = mode;\n        this.eventCenter.emit('overlap:change', {\n            overlapMode: mode,\n        });\n    };\n    /**\n     * \n     * @param mode\n     * @param model\n     */\n    GraphModel.prototype.setTextMode = function (mode, model) {\n        //  model model  textMode\n        if (model) {\n            // model.updateTextMode(mode)\n        }\n        //  editConfigModel  textMode\n        this.editConfigModel.updateEditConfig({ textMode: mode });\n    };\n    /**\n     * \n     */\n    GraphModel.prototype.setFakeNode = function (nodeModel) {\n        this.fakeNode = nodeModel;\n    };\n    /**\n     * \n     */\n    GraphModel.prototype.removeFakeNode = function () {\n        this.fakeNode = null;\n    };\n    /**\n     * Model,\n     */\n    GraphModel.prototype.setModel = function (type, ModelClass) {\n        return this.modelMap.set(type, ModelClass);\n    };\n    /**\n     * \n     * \n     * zIndexzIndex + 1\n     * @see todo link \n     * @param id Id\n     */\n    GraphModel.prototype.toFront = function (id) {\n        var _a, _b, _c;\n        var element = ((_a = this.nodesMap[id]) === null || _a === void 0 ? void 0 : _a.model) || ((_b = this.edgesMap[id]) === null || _b === void 0 ? void 0 : _b.model);\n        if (element) {\n            // toFront\n            if (this.overlapMode === OverlapMode.STATIC) {\n                return;\n            }\n            // zIndexzIndex + 1\n            if (this.overlapMode === OverlapMode.INCREASE) {\n                this.setElementZIndex(id, 'top');\n                return;\n            }\n            // zIndexzIndex\n            (_c = this.topElement) === null || _c === void 0 ? void 0 : _c.setZIndex();\n            element.setZIndex(ELEMENT_MAX_Z_INDEX);\n            this.topElement = element;\n        }\n    };\n    /**\n     * zIndex.\n     * \n     * @see todo link \n     * @param id id\n     * @param zIndex zIndex 'top'  'bottom'\n     */\n    GraphModel.prototype.setElementZIndex = function (id, zIndex) {\n        var _a, _b;\n        var element = ((_a = this.nodesMap[id]) === null || _a === void 0 ? void 0 : _a.model) || ((_b = this.edgesMap[id]) === null || _b === void 0 ? void 0 : _b.model);\n        if (element) {\n            var index = void 0;\n            if (typeof zIndex === 'number') {\n                index = zIndex;\n            }\n            else {\n                if (zIndex === 'top') {\n                    index = getZIndex();\n                }\n                if (zIndex === 'bottom') {\n                    index = getMinIndex();\n                }\n            }\n            element.setZIndex(index);\n        }\n    };\n    /**\n     * \n     * @param {string} nodeId Id\n     */\n    GraphModel.prototype.deleteNode = function (nodeId) {\n        var nodeModel = this.nodesMap[nodeId].model;\n        var nodeData = nodeModel.getData();\n        this.deleteEdgeBySource(nodeId);\n        this.deleteEdgeByTarget(nodeId);\n        this.nodes.splice(this.nodesMap[nodeId].index, 1);\n        this.eventCenter.emit(EventType.NODE_DELETE, {\n            data: nodeData,\n            model: nodeModel,\n        });\n    };\n    /**\n     * \n     * @param nodeConfig \n     * @param eventType EventType.NODE_ADD, DndEventType.NODE_DND_ADD\n     * @param event MouseEvent \n     */\n    GraphModel.prototype.addNode = function (nodeConfig, eventType, event) {\n        if (eventType === void 0) { eventType = EventType.NODE_ADD; }\n        var originNodeData = formatData(nodeConfig);\n        //  id  id\n        var id = originNodeData.id;\n        if (id && this.nodesMap[id]) {\n            delete originNodeData.id;\n        }\n        var nodeModel = this.getModelAfterSnapToGrid(originNodeData);\n        this.nodes.push(nodeModel);\n        var nodeData = nodeModel.getData();\n        var eventData = { data: nodeData };\n        if (event) {\n            eventData.e = event;\n        }\n        this.eventCenter.emit(eventType, eventData);\n        return nodeModel;\n    };\n    /**\n     * nodegrid\n     * node\n     * NodeModel\n     * @param node\n     */\n    GraphModel.prototype.getModelAfterSnapToGrid = function (node) {\n        var Model = this.getModel(node.type);\n        var snapGrid = this.editConfigModel.snapGrid;\n        if (!Model) {\n            throw new Error(\"\\u627E\\u4E0D\\u5230\".concat(node.type, \"\\u5BF9\\u5E94\\u7684\\u8282\\u70B9\\uFF0C\\u8BF7\\u786E\\u8BA4\\u662F\\u5426\\u5DF2\\u6CE8\\u518C\\u6B64\\u7C7B\\u578B\\u8282\\u70B9\\u3002\"));\n        }\n        var nodeX = node.x, nodeY = node.y;\n        //  grid  x, y\n        if (nodeX && nodeY) {\n            node.x = snapToGrid(nodeX, this.gridSize, snapGrid);\n            node.y = snapToGrid(nodeY, this.gridSize, snapGrid);\n            if (typeof node.text === 'object' && node.text !== null) {\n                // node.text.x -= getGridOffset(nodeX, this.gridSize)\n                // snapToGrid()Math.round()\n                // node.text.x = node.text.x + getGridOffset()\n                // \n                // node.text.x = node.text.x - getGridOffset()\n                // node.x - nodeX\n                node.text.x += node.x - nodeX;\n                node.text.y += node.y - nodeY;\n            }\n        }\n        var nodeModel = new Model(node, this);\n        this.nodeModelMap.set(nodeModel.id, nodeModel);\n        this.elementsModelMap.set(nodeModel.id, nodeModel);\n        return nodeModel;\n    };\n    /**\n     * \n     * @param nodeId Id\n     */\n    GraphModel.prototype.cloneNode = function (nodeId) {\n        var targetNode = this.getNodeModelById(nodeId);\n        var data = targetNode === null || targetNode === void 0 ? void 0 : targetNode.getData();\n        if (data) {\n            data.x += 30;\n            data.y += 30;\n            data.id = '';\n            if (typeof data.text === 'object' && data.text !== null) {\n                data.text.x += 30;\n                data.text.y += 30;\n            }\n            var nodeModel = this.addNode(data);\n            nodeModel.setSelected(true);\n            targetNode === null || targetNode === void 0 ? void 0 : targetNode.setSelected(false);\n            return nodeModel.getData();\n        }\n    };\n    /**\n     * -\n     * @param nodeId Id\n     * @param deltaX X\n     * @param deltaY Y\n     * @param isIgnoreRule \n     */\n    GraphModel.prototype.moveNode = function (nodeId, deltaX, deltaY, isIgnoreRule) {\n        var _a;\n        if (isIgnoreRule === void 0) { isIgnoreRule = false; }\n        // 1) \n        var node = this.nodesMap[nodeId];\n        if (!node) {\n            console.warn(\"\\u4E0D\\u5B58\\u5728id\\u4E3A\".concat(nodeId, \"\\u7684\\u8282\\u70B9\"));\n            return;\n        }\n        var nodeModel = node.model;\n        _a = __read(nodeModel.getMoveDistance(deltaX, deltaY, isIgnoreRule), 2), deltaX = _a[0], deltaY = _a[1];\n        // 2) \n        this.moveEdge(nodeId, deltaX, deltaY);\n    };\n    /**\n     * -\n     * @param nodeId Id\n     * @param x X\n     * @param y Y\n     * @param isIgnoreRule  false\n     */\n    GraphModel.prototype.moveNode2Coordinate = function (nodeId, x, y, isIgnoreRule) {\n        if (isIgnoreRule === void 0) { isIgnoreRule = false; }\n        // 1) \n        var node = this.nodesMap[nodeId];\n        if (!node) {\n            console.warn(\"\\u4E0D\\u5B58\\u5728id\\u4E3A\".concat(nodeId, \"\\u7684\\u8282\\u70B9\"));\n            return;\n        }\n        var nodeModel = node.model;\n        var originX = nodeModel.x, originY = nodeModel.y;\n        var deltaX = x - originX;\n        var deltaY = y - originY;\n        this.moveNode(nodeId, deltaX, deltaY, isIgnoreRule);\n    };\n    /**\n     * \n     * @param id  or  id\n     */\n    GraphModel.prototype.editText = function (id) {\n        this.setElementStateById(id, ElementState.TEXT_EDIT);\n    };\n    /**\n     * \n     * @param {object} edgeConfig\n     */\n    GraphModel.prototype.addEdge = function (edgeConfig) {\n        var edgeOriginData = formatData(edgeConfig);\n        // >>\n        var type = edgeOriginData.type;\n        if (!type) {\n            type = this.edgeType;\n        }\n        if (edgeOriginData.id && this.edgesMap[edgeOriginData.id]) {\n            delete edgeOriginData.id;\n            delete edgeOriginData.sourceAnchorId;\n            delete edgeOriginData.targetAnchorId;\n        }\n        var Model = this.getModel(type);\n        if (!Model) {\n            throw new Error(\"\\u627E\\u4E0D\\u5230\".concat(type, \"\\u5BF9\\u5E94\\u7684\\u8FB9\\uFF0C\\u8BF7\\u786E\\u8BA4\\u662F\\u5426\\u5DF2\\u6CE8\\u518C\\u6B64\\u7C7B\\u578B\\u8FB9\\u3002\"));\n        }\n        var edgeModel = new Model(__assign(__assign({}, edgeOriginData), { type: type }), this);\n        this.edgeModelMap.set(edgeModel.id, edgeModel);\n        this.elementsModelMap.set(edgeModel.id, edgeModel);\n        var edgeData = edgeModel.getData();\n        this.edges.push(edgeModel);\n        this.eventCenter.emit(EventType.EDGE_ADD, { data: edgeData });\n        return edgeModel;\n    };\n    /**\n     * \n     */\n    GraphModel.prototype.moveEdge = function (nodeId, deltaX, deltaY) {\n        /*  */\n        for (var i = 0; i < this.edges.length; i++) {\n            var edgeModel = this.edges[i];\n            var _a = edgeModel.textPosition, x = _a.x, y = _a.y;\n            var nodeAsSource = this.edges[i].sourceNodeId === nodeId;\n            var nodeAsTarget = this.edges[i].targetNodeId === nodeId;\n            if (nodeAsSource) {\n                edgeModel.moveStartPoint(deltaX, deltaY);\n            }\n            if (nodeAsTarget) {\n                edgeModel.moveEndPoint(deltaX, deltaY);\n            }\n            // \n            // \n            if (nodeAsSource || nodeAsTarget) {\n                this.handleEdgeTextMove(edgeModel, x, y);\n            }\n        }\n    };\n    /**\n     * \n     * \n     * @param edgeModel \n     * @param x X\n     * @param y Y\n     */\n    GraphModel.prototype.handleEdgeTextMove = function (edgeModel, x, y) {\n        var _a;\n        // todo: \n        // \n        if (edgeModel.customTextPosition) {\n            edgeModel.resetTextPosition();\n            return;\n        }\n        if (edgeModel.modelType === ModelType.POLYLINE_EDGE &&\n            ((_a = edgeModel.text) === null || _a === void 0 ? void 0 : _a.value)) {\n            var textPosition = edgeModel.text;\n            var newPoint = getClosestPointOfPolyline(textPosition, edgeModel.points);\n            edgeModel.moveText(newPoint.x - textPosition.x, newPoint.y - textPosition.y);\n        }\n        var _b = edgeModel.textPosition, x1 = _b.x, y1 = _b.y;\n        edgeModel.moveText(x1 - x, y1 - y);\n    };\n    /**\n     * \n     * @param sourceNodeId \n     * @param targetNodeId \n     */\n    GraphModel.prototype.deleteEdgeBySourceAndTarget = function (sourceNodeId, targetNodeId) {\n        for (var i = 0; i < this.edges.length; i++) {\n            if (this.edges[i].sourceNodeId === sourceNodeId &&\n                this.edges[i].targetNodeId === targetNodeId) {\n                var edgeData = this.edges[i].getData();\n                this.edges.splice(i, 1);\n                i--;\n                this.eventCenter.emit(EventType.EDGE_DELETE, { data: edgeData });\n            }\n        }\n    };\n    /**\n     * Id\n     */\n    GraphModel.prototype.deleteEdgeById = function (id) {\n        var edge = this.edgesMap[id];\n        if (!edge) {\n            return;\n        }\n        var idx = this.edgesMap[id].index;\n        var edgeData = this.edgesMap[id].model.getData();\n        this.edges.splice(idx, 1);\n        this.eventCenter.emit(EventType.EDGE_DELETE, { data: edgeData });\n    };\n    /**\n     * Id\n     */\n    GraphModel.prototype.deleteEdgeBySource = function (sourceNodeId) {\n        for (var i = 0; i < this.edges.length; i++) {\n            if (this.edges[i].sourceNodeId === sourceNodeId) {\n                var edgeData = this.edges[i].getData();\n                this.edges.splice(i, 1);\n                i--;\n                this.eventCenter.emit(EventType.EDGE_DELETE, { data: edgeData });\n            }\n        }\n    };\n    /**\n     * Id\n     */\n    GraphModel.prototype.deleteEdgeByTarget = function (targetNodeId) {\n        for (var i = 0; i < this.edges.length; i++) {\n            if (this.edges[i].targetNodeId === targetNodeId) {\n                var edgeData = this.edges[i].getData();\n                this.edges.splice(i, 1);\n                i--;\n                this.eventCenter.emit(EventType.EDGE_DELETE, { data: edgeData });\n            }\n        }\n    };\n    /**\n     * \n     * \n     * additionStateData: \n     */\n    GraphModel.prototype.setElementStateById = function (id, state, additionStateData) {\n        this.nodes.forEach(function (node) {\n            if (node.id === id) {\n                node.setElementState(state, additionStateData);\n            }\n            else {\n                node.setElementState(ElementState.DEFAULT);\n            }\n        });\n        this.edges.forEach(function (edge) {\n            if (edge.id === id) {\n                edge.setElementState(state, additionStateData);\n            }\n            else {\n                edge.setElementState(ElementState.DEFAULT);\n            }\n        });\n    };\n    /**\n     * \n     * @param id id\n     * @param value \n     */\n    GraphModel.prototype.updateText = function (id, value) {\n        var element = find(__spreadArray(__spreadArray([], __read(this.nodes), false), __read(this.edges), false), function (item) { return item.id === id; });\n        element === null || element === void 0 ? void 0 : element.updateText(value);\n    };\n    /**\n     * \n     * @param id Id\n     * @param multiple \n     */\n    GraphModel.prototype.selectNodeById = function (id, multiple) {\n        var _a;\n        if (multiple === void 0) { multiple = false; }\n        if (!multiple) {\n            this.clearSelectElements();\n        }\n        var selectElement = (_a = this.nodesMap[id]) === null || _a === void 0 ? void 0 : _a.model;\n        selectElement === null || selectElement === void 0 ? void 0 : selectElement.setSelected(true);\n    };\n    /**\n     * \n     * @param id Id\n     * @param multiple \n     */\n    GraphModel.prototype.selectEdgeById = function (id, multiple) {\n        var _a;\n        if (multiple === void 0) { multiple = false; }\n        if (!multiple) {\n            this.clearSelectElements();\n        }\n        var selectElement = (_a = this.edgesMap[id]) === null || _a === void 0 ? void 0 : _a.model;\n        selectElement === null || selectElement === void 0 ? void 0 : selectElement.setSelected(true);\n    };\n    /**\n     * \n     * @param id ID\n     * @param multiple true\n     */\n    GraphModel.prototype.selectElementById = function (id, multiple) {\n        if (multiple === void 0) { multiple = false; }\n        if (!multiple) {\n            this.clearSelectElements();\n        }\n        var selectElement = this.getElement(id);\n        selectElement === null || selectElement === void 0 ? void 0 : selectElement.setSelected(true);\n    };\n    GraphModel.prototype.deselectElementById = function (id) {\n        var element = this.getElement(id);\n        if (element) {\n            element.setSelected(false);\n        }\n    };\n    /**\n     * \n     */\n    GraphModel.prototype.clearSelectElements = function () {\n        var _a;\n        this.selectElements.forEach(function (element) {\n            element === null || element === void 0 ? void 0 : element.setSelected(false);\n            element === null || element === void 0 ? void 0 : element.setHovered(false);\n        });\n        this.selectElements.clear();\n        /**\n         * \n         */\n        if ([OverlapMode.DEFAULT, OverlapMode.EDGE_TOP].includes(this.overlapMode)) {\n            (_a = this.topElement) === null || _a === void 0 ? void 0 : _a.setZIndex();\n        }\n    };\n    /**\n     * \n     * \n     */\n    GraphModel.prototype.moveNodes = function (nodeIds, deltaX, deltaY, isIgnoreRule) {\n        var _a, _b, _c;\n        var _this = this;\n        if (isIgnoreRule === void 0) { isIgnoreRule = false; }\n        // FIX: https://github.com/didi/LogicFlow/issues/1015\n        // \n        var nodeIdMap = nodeIds.reduce(function (acc, cur) {\n            var _a;\n            var nodeModel = (_a = _this.nodesMap[cur]) === null || _a === void 0 ? void 0 : _a.model;\n            if (nodeModel) {\n                acc[cur] = nodeModel.getMoveDistance(deltaX, deltaY, isIgnoreRule);\n            }\n            return acc;\n        }, {});\n        for (var i = 0; i < this.edges.length; i++) {\n            var edgeModel = this.edges[i];\n            var _d = edgeModel.textPosition, x = _d.x, y = _d.y;\n            var sourceMoveDistance = nodeIdMap[edgeModel.sourceNodeId];\n            var targetMoveDistance = nodeIdMap[edgeModel.targetNodeId];\n            var textDistanceX = void 0;\n            var textDistanceY = void 0;\n            if (sourceMoveDistance &&\n                targetMoveDistance &&\n                edgeModel.modelType === ModelType.POLYLINE_EDGE) {\n                // polylinepointsList\n                ;\n                _a = __read(sourceMoveDistance, 2), textDistanceX = _a[0], textDistanceY = _a[1];\n                edgeModel.updatePointsList(textDistanceX, textDistanceY);\n            }\n            else {\n                if (sourceMoveDistance) {\n                    ;\n                    _b = __read(sourceMoveDistance, 2), textDistanceX = _b[0], textDistanceY = _b[1];\n                    edgeModel.moveStartPoint(textDistanceX, textDistanceY);\n                }\n                if (targetMoveDistance) {\n                    ;\n                    _c = __read(targetMoveDistance, 2), textDistanceX = _c[0], textDistanceY = _c[1];\n                    edgeModel.moveEndPoint(textDistanceX, textDistanceY);\n                }\n            }\n            if (sourceMoveDistance || targetMoveDistance) {\n                // https://github.com/didi/LogicFlow/issues/1191\n                // moveNode()moveNodes()moveNodes()\n                // moveNode()\n                // moveNode()moveNode()moveNodes()\n                this.handleEdgeTextMove(edgeModel, x, y);\n            }\n        }\n    };\n    /**\n     * \n     * false, \n     * @param fn function\n     * @example\n     *\n     * graphModel.addNodeMoveRules((nodeModel, x, y) => {\n     *   if (nodeModel.properties.disabled) {\n     *     return false\n     *   }\n     *   return true\n     * })\n     *\n     */\n    GraphModel.prototype.addNodeMoveRules = function (fn) {\n        if (!this.nodeMoveRules.includes(fn)) {\n            this.nodeMoveRules.push(fn);\n        }\n    };\n    GraphModel.prototype.addNodeResizeRules = function (fn) {\n        if (!this.nodeResizeRules.includes(fn)) {\n            this.nodeResizeRules.push(fn);\n        }\n    };\n    /**\n     * \n     * \n     * @param type LFOptions.EdgeType\n     */\n    GraphModel.prototype.setDefaultEdgeType = function (type) {\n        this.edgeType = type;\n    };\n    /**\n     * \n     * @param id id\n     * @param type \n     */\n    GraphModel.prototype.changeNodeType = function (id, type) {\n        var nodeModel = this.getNodeModelById(id);\n        if (!nodeModel) {\n            console.warn(\"\\u627E\\u4E0D\\u5230id\\u4E3A\".concat(id, \"\\u7684\\u8282\\u70B9\"));\n            return;\n        }\n        var data = nodeModel.getData();\n        data.type = type;\n        var Model = this.getModel(type);\n        if (!Model) {\n            throw new Error(\"\\u627E\\u4E0D\\u5230\".concat(type, \"\\u5BF9\\u5E94\\u7684\\u8282\\u70B9\\uFF0C\\u8BF7\\u786E\\u8BA4\\u662F\\u5426\\u5DF2\\u6CE8\\u518C\\u6B64\\u7C7B\\u578B\\u8282\\u70B9\\u3002\"));\n        }\n        var newNodeModel = new Model(data, this);\n        this.nodes.splice(this.nodesMap[id].index, 1, newNodeModel);\n        // \n        var edgeModels = this.getNodeEdges(id);\n        edgeModels.forEach(function (edge) {\n            if (edge.sourceNodeId === id) {\n                var point = getNodeAnchorPosition(newNodeModel, edge.startPoint, newNodeModel.width, newNodeModel.height);\n                edge.updateStartPoint(point);\n            }\n            if (edge.targetNodeId === id) {\n                var point = getNodeAnchorPosition(newNodeModel, edge.endPoint, newNodeModel.width, newNodeModel.height);\n                edge.updateEndPoint(point);\n            }\n        });\n    };\n    /**\n     * \n     * @param id Id\n     * @param type \n     */\n    GraphModel.prototype.changeEdgeType = function (id, type) {\n        var edgeModel = this.getEdgeModelById(id);\n        if (!edgeModel) {\n            console.warn(\"\\u627E\\u4E0D\\u5230id\\u4E3A\".concat(id, \"\\u7684\\u8FB9\"));\n            return;\n        }\n        if (edgeModel.type === type) {\n            return;\n        }\n        var data = edgeModel.getData();\n        data.type = type;\n        var Model = this.getModel(type);\n        if (!Model) {\n            throw new Error(\"\\u627E\\u4E0D\\u5230\".concat(type, \"\\u5BF9\\u5E94\\u7684\\u8282\\u70B9\\uFF0C\\u8BF7\\u786E\\u8BA4\\u662F\\u5426\\u5DF2\\u6CE8\\u518C\\u6B64\\u7C7B\\u578B\\u8282\\u70B9\\u3002\"));\n        }\n        // \n        delete data.pointsList;\n        var newEdgeModel = new Model(data, this);\n        this.edges.splice(this.edgesMap[id].index, 1, newEdgeModel);\n    };\n    /**\n     * \n     */\n    GraphModel.prototype.getNodeIncomingEdge = function (nodeId) {\n        var edges = [];\n        this.edges.forEach(function (edge) {\n            if (edge.targetNodeId === nodeId) {\n                edges.push(edge);\n            }\n        });\n        return edges;\n    };\n    /**\n     * \n     */\n    GraphModel.prototype.getNodeOutgoingEdge = function (nodeId) {\n        var edges = [];\n        this.edges.forEach(function (edge) {\n            if (edge.sourceNodeId === nodeId) {\n                edges.push(edge);\n            }\n        });\n        return edges;\n    };\n    /**\n     * \n     */\n    GraphModel.prototype.getAnchorIncomingEdge = function (anchorId) {\n        var edges = [];\n        this.edges.forEach(function (edge) {\n            if (edge.targetAnchorId === anchorId) {\n                edges.push(edge);\n            }\n        });\n        return edges;\n    };\n    /**\n     * \n     */\n    GraphModel.prototype.getAnchorOutgoingEdge = function (anchorId) {\n        var edges = [];\n        this.edges.forEach(function (edge) {\n            if (edge.sourceAnchorId === anchorId) {\n                edges.push(edge);\n            }\n        });\n        return edges;\n    };\n    /**\n     * \n     */\n    GraphModel.prototype.getNodeIncomingNode = function (nodeId) {\n        var _this = this;\n        var nodes = [];\n        this.edges.forEach(function (edge) {\n            var _a;\n            if (edge.targetNodeId === nodeId) {\n                nodes.push((_a = _this.nodesMap[edge.sourceNodeId]) === null || _a === void 0 ? void 0 : _a.model);\n            }\n        });\n        return nodes;\n    };\n    /**\n     * \n     */\n    GraphModel.prototype.getNodeOutgoingNode = function (nodeId) {\n        var _this = this;\n        var nodes = [];\n        this.edges.forEach(function (edge) {\n            if (edge.sourceNodeId === nodeId) {\n                nodes.push(_this.nodesMap[edge.targetNodeId].model);\n            }\n        });\n        return nodes;\n    };\n    /**\n     * \n     * todo docs link\n     */\n    GraphModel.prototype.setTheme = function (style, themeMode) {\n        var _a;\n        if (themeMode) {\n            // \n            backgroundModeMap[themeMode] &&\n                this.updateBackgroundOptions(__assign(__assign({}, (typeof this.background === 'object' ? this.background : {})), backgroundModeMap[themeMode]));\n            gridModeMap[themeMode] &&\n                this.updateGridOptions(Grid.getGridOptions(__assign(__assign({}, this.grid), gridModeMap[themeMode])));\n        }\n        if (style.background) {\n            this.updateBackgroundOptions(style.background);\n        }\n        if (style.grid) {\n            var formattedGrid = Grid.getGridOptions((_a = style.grid) !== null && _a !== void 0 ? _a : false);\n            this.updateGridOptions(formattedGrid);\n        }\n        this.theme = updateTheme(__assign(__assign({}, this.customStyles), style), themeMode);\n        this.customStyles = __assign(__assign({}, this.customStyles), style);\n    };\n    /**\n     * \n     * todo docs link\n     */\n    GraphModel.prototype.getTheme = function () {\n        var _a = this, background = _a.background, grid = _a.grid;\n        var theme = __assign(__assign({}, cloneDeep(this.theme)), { background: background, grid: grid });\n        return theme;\n    };\n    /**\n     * \n     */\n    GraphModel.prototype.updateGridOptions = function (options) {\n        merge(this.grid, options);\n    };\n    /**\n     * \n     */\n    GraphModel.prototype.updateGridSize = function (size) {\n        this.gridSize = size;\n    };\n    /**\n     * \n     */\n    GraphModel.prototype.updateBackgroundOptions = function (options) {\n        if (isBoolean(options) || isBoolean(this.background)) {\n            this.background = options;\n        }\n        else {\n            this.background = __assign(__assign({}, this.background), options);\n        }\n    };\n    /**\n     * \n     */\n    GraphModel.prototype.resize = function (width, height) {\n        this.width = width !== null && width !== void 0 ? width : this.rootEl.getBoundingClientRect().width;\n        this.isContainerWidth = isNil(width);\n        this.height = height !== null && height !== void 0 ? height : this.rootEl.getBoundingClientRect().height;\n        this.isContainerHeight = isNil(height);\n        if (!this.width || !this.height) {\n            console.warn('containerDOM@see https://github.com/didi/LogicFlow/issues/675');\n        }\n    };\n    /**\n     * \n     */\n    GraphModel.prototype.clearData = function () {\n        this.nodes = [];\n        this.edges = [];\n        // \n        this.edgeModelMap.clear();\n        this.nodeModelMap.clear();\n        this.elementsModelMap.clear();\n    };\n    /**\n     * \n     * @returns\n     */\n    GraphModel.prototype.getVirtualRectSize = function () {\n        var nodes = this.nodes;\n        var nodesX = [];\n        var nodesY = [];\n        // xy\n        nodes.forEach(function (node) {\n            var x = node.x, y = node.y, width = node.width, height = node.height;\n            var _a = node.getNodeStyle().strokeWidth, strokeWidth = _a === void 0 ? 0 : _a;\n            var maxX = x + width / 2 + strokeWidth;\n            var minX = x - width / 2 - strokeWidth;\n            var maxY = y + height / 2 + strokeWidth;\n            var minY = y - height / 2 - strokeWidth;\n            nodesX = nodesX.concat([maxX, minX].filter(function (num) { return !Number.isNaN(num); }));\n            nodesY = nodesY.concat([maxY, minY].filter(function (num) { return !Number.isNaN(num); }));\n        });\n        var minX = Math.min.apply(Math, __spreadArray([], __read(nodesX), false));\n        var maxX = Math.max.apply(Math, __spreadArray([], __read(nodesX), false));\n        var minY = Math.min.apply(Math, __spreadArray([], __read(nodesY), false));\n        var maxY = Math.max.apply(Math, __spreadArray([], __read(nodesY), false));\n        var virtualRectWidth = maxX - minX || 0;\n        var virtualRectHeight = maxY - minY || 0;\n        // \n        var virtualRectCenterPositionX = minX + virtualRectWidth / 2;\n        var virtualRectCenterPositionY = minY + virtualRectHeight / 2;\n        return {\n            width: virtualRectWidth,\n            height: virtualRectHeight,\n            x: virtualRectCenterPositionX,\n            y: virtualRectCenterPositionY,\n        };\n    };\n    /**\n     * \n     */\n    GraphModel.prototype.translateCenter = function () {\n        var _a = this, nodes = _a.nodes, width = _a.width, height = _a.height, rootEl = _a.rootEl, transformModel = _a.transformModel;\n        if (!nodes.length) {\n            return;\n        }\n        var containerWidth = width || rootEl.clientWidth;\n        var containerHeight = height || rootEl.clientHeight;\n        var _b = this.getVirtualRectSize(), virtualRectCenterPositionX = _b.x, virtualRectCenterPositionY = _b.y;\n        // \n        transformModel.focusOn(virtualRectCenterPositionX, virtualRectCenterPositionY, containerWidth, containerHeight);\n    };\n    /**\n     * \n     * @param verticalOffset number  20\n     * @param horizontalOffset number  20\n     */\n    GraphModel.prototype.fitView = function (verticalOffset, horizontalOffset) {\n        if (verticalOffset === void 0) { verticalOffset = 20; }\n        if (horizontalOffset === void 0) { horizontalOffset = 20; }\n        var _a = this, nodes = _a.nodes, width = _a.width, height = _a.height, rootEl = _a.rootEl, transformModel = _a.transformModel;\n        if (!nodes.length) {\n            return;\n        }\n        var containerWidth = width || rootEl.clientWidth;\n        var containerHeight = height || rootEl.clientHeight;\n        var _b = this.getVirtualRectSize(), virtualRectWidth = _b.width, virtualRectHeight = _b.height, virtualRectCenterPositionX = _b.x, virtualRectCenterPositionY = _b.y;\n        var zoomRatioX = (virtualRectWidth + horizontalOffset) / containerWidth;\n        var zoomRatioY = (virtualRectHeight + verticalOffset) / containerHeight;\n        var zoomRatio = 1 / Math.max(zoomRatioX, zoomRatioY);\n        var point = [containerWidth / 2, containerHeight / 2];\n        // \n        transformModel.zoom(zoomRatio, point);\n        // \n        transformModel.focusOn(virtualRectCenterPositionX, virtualRectCenterPositionY, containerWidth, containerHeight);\n    };\n    /**\n     * \n     * @param edgeId string\n     */\n    GraphModel.prototype.openEdgeAnimation = function (edgeId) {\n        var edgeModel = this.getEdgeModelById(edgeId);\n        edgeModel === null || edgeModel === void 0 ? void 0 : edgeModel.openEdgeAnimation();\n    };\n    /**\n     * \n     * @param edgeId string\n     */\n    GraphModel.prototype.closeEdgeAnimation = function (edgeId) {\n        var edgeModel = this.getEdgeModelById(edgeId);\n        edgeModel === null || edgeModel === void 0 ? void 0 : edgeModel.closeEdgeAnimation();\n    };\n    /**\n     * \n     * @returns boolean\n     */\n    GraphModel.prototype.getPartial = function () {\n        return this.partial;\n    };\n    /**\n     * \n     * @param partial boolean\n     * @returns\n     */\n    GraphModel.prototype.setPartial = function (partial) {\n        this.partial = partial;\n    };\n    /**  */\n    GraphModel.prototype.destroy = function () {\n        try {\n            this.waitCleanEffects.forEach(function (fn) {\n                fn();\n            });\n        }\n        catch (err) {\n            console.warn('error on destroy GraphModel', err);\n        }\n        this.waitCleanEffects.length = 0;\n        this.eventCenter.destroy();\n    };\n    __decorate([\n        observable\n    ], GraphModel.prototype, \"width\", void 0);\n    __decorate([\n        observable\n    ], GraphModel.prototype, \"height\", void 0);\n    __decorate([\n        observable\n    ], GraphModel.prototype, \"theme\", void 0);\n    __decorate([\n        observable\n    ], GraphModel.prototype, \"grid\", void 0);\n    __decorate([\n        observable\n    ], GraphModel.prototype, \"edgeType\", void 0);\n    __decorate([\n        observable\n    ], GraphModel.prototype, \"nodes\", void 0);\n    __decorate([\n        observable\n    ], GraphModel.prototype, \"edges\", void 0);\n    __decorate([\n        observable\n    ], GraphModel.prototype, \"fakeNode\", void 0);\n    __decorate([\n        observable\n    ], GraphModel.prototype, \"overlapMode\", void 0);\n    __decorate([\n        observable\n    ], GraphModel.prototype, \"background\", void 0);\n    __decorate([\n        observable\n    ], GraphModel.prototype, \"gridSize\", void 0);\n    __decorate([\n        observable\n    ], GraphModel.prototype, \"transformModel\", void 0);\n    __decorate([\n        observable\n    ], GraphModel.prototype, \"editConfigModel\", void 0);\n    __decorate([\n        observable\n    ], GraphModel.prototype, \"partial\", void 0);\n    __decorate([\n        computed\n    ], GraphModel.prototype, \"nodesMap\", null);\n    __decorate([\n        computed\n    ], GraphModel.prototype, \"edgesMap\", null);\n    __decorate([\n        computed\n    ], GraphModel.prototype, \"modelsMap\", null);\n    __decorate([\n        computed\n    ], GraphModel.prototype, \"sortElements\", null);\n    __decorate([\n        computed\n    ], GraphModel.prototype, \"textEditElement\", null);\n    __decorate([\n        computed\n    ], GraphModel.prototype, \"selectElements\", null);\n    __decorate([\n        computed\n    ], GraphModel.prototype, \"selectNodes\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"setOverlapMode\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"setTextMode\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"setFakeNode\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"removeFakeNode\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"setModel\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"toFront\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"setElementZIndex\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"deleteNode\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"addNode\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"cloneNode\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"moveNode\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"moveNode2Coordinate\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"editText\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"addEdge\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"moveEdge\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"deleteEdgeBySourceAndTarget\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"deleteEdgeById\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"deleteEdgeBySource\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"deleteEdgeByTarget\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"setElementStateById\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"updateText\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"selectNodeById\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"selectEdgeById\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"selectElementById\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"deselectElementById\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"clearSelectElements\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"moveNodes\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"setDefaultEdgeType\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"changeNodeType\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"changeEdgeType\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"getNodeIncomingEdge\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"getNodeOutgoingEdge\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"getAnchorIncomingEdge\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"getAnchorOutgoingEdge\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"getNodeIncomingNode\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"getNodeOutgoingNode\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"setTheme\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"getTheme\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"resize\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"clearData\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"translateCenter\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"fitView\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"openEdgeAnimation\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"closeEdgeAnimation\", null);\n    __decorate([\n        action\n    ], GraphModel.prototype, \"setPartial\", null);\n    return GraphModel;\n}());\nexport { GraphModel };\nexport default GraphModel;\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { action, observable } from 'mobx';\nimport { getNodeBBox } from '../util';\nvar SnaplineModel = /** @class */ (function () {\n    function SnaplineModel(graphModel, epsilon) {\n        if (epsilon === void 0) { epsilon = 1; }\n        this.isShowHorizontal = false;\n        this.isShowVertical = false;\n        this.position = {\n            x: 0,\n            y: 0,\n        };\n        this.graphModel = graphModel;\n        this.epsilon = epsilon;\n    }\n    SnaplineModel.prototype.getStyle = function () {\n        return __assign({}, this.graphModel.theme.snapline);\n    };\n    // \n    SnaplineModel.prototype.getCenterSnapLine = function (draggingNode, nodes) {\n        var x = draggingNode.x, y = draggingNode.y;\n        var isShowVertical = false;\n        var isShowHorizontal = false;\n        for (var i = 0; i < nodes.length; i++) {\n            var item = nodes[i];\n            // \n            if (item.id !== draggingNode.id) {\n                if (equal(x, item.x, this.epsilon)) {\n                    isShowVertical = true;\n                }\n                if (equal(y, item.y, this.epsilon)) {\n                    isShowHorizontal = true;\n                }\n                // \n                if (isShowVertical && isShowHorizontal) {\n                    break;\n                }\n            }\n        }\n        return {\n            isShowVertical: isShowVertical,\n            isShowHorizontal: isShowHorizontal,\n            position: {\n                x: x,\n                y: y,\n            },\n        };\n    };\n    // \n    SnaplineModel.prototype.getHorizontalSnapline = function (draggingNode, nodes) {\n        var isShowHorizontal = false;\n        var horizontalY = 0;\n        var id = draggingNode.id;\n        var draggingData;\n        if (id) {\n            var fakeNode = this.graphModel.fakeNode;\n            if (fakeNode && fakeNode.id === id) {\n                draggingData = getNodeBBox(fakeNode);\n            }\n            else {\n                var nodeModel = this.graphModel.getNodeModelById(id);\n                if (nodeModel) {\n                    draggingData = getNodeBBox(nodeModel);\n                }\n            }\n        }\n        for (var i = 0; i < nodes.length; i++) {\n            var item = nodes[i];\n            // \n            if (item.id !== draggingNode.id) {\n                var itemData = getNodeBBox(item);\n                // YY\n                if (equal(itemData.minY, draggingData === null || draggingData === void 0 ? void 0 : draggingData.minY, this.epsilon) ||\n                    equal(itemData.maxY, draggingData === null || draggingData === void 0 ? void 0 : draggingData.minY, this.epsilon)) {\n                    // \n                    isShowHorizontal = true;\n                    horizontalY = draggingData.minY;\n                    break;\n                }\n                if (equal(itemData.minY, draggingData === null || draggingData === void 0 ? void 0 : draggingData.maxY, this.epsilon) ||\n                    equal(itemData.maxY, draggingData === null || draggingData === void 0 ? void 0 : draggingData.maxY, this.epsilon)) {\n                    isShowHorizontal = true;\n                    horizontalY = draggingData.maxY;\n                    break;\n                }\n            }\n        }\n        return {\n            isShowHorizontal: isShowHorizontal,\n            isShowVertical: this.isShowVertical,\n            position: __assign(__assign({}, this.position), { y: horizontalY }),\n        };\n    };\n    // \n    SnaplineModel.prototype.getVerticalSnapline = function (draggingNode, nodes) {\n        var isShowVertical = false;\n        var verticalX = 0;\n        var id = draggingNode.id;\n        var draggingData;\n        if (id) {\n            var fakeNode = this.graphModel.fakeNode;\n            if (fakeNode && fakeNode.id === id) {\n                draggingData = getNodeBBox(fakeNode);\n            }\n            else {\n                var nodeModel = this.graphModel.getNodeModelById(id);\n                if (nodeModel) {\n                    draggingData = getNodeBBox(nodeModel);\n                }\n            }\n        }\n        for (var i = 0; i < nodes.length; i++) {\n            var item = nodes[i];\n            // \n            if (item.id !== draggingNode.id) {\n                var itemData = getNodeBBox(item);\n                // XX\n                if (equal(itemData.minX, draggingData === null || draggingData === void 0 ? void 0 : draggingData.minX, this.epsilon)) {\n                    isShowVertical = true;\n                    verticalX = draggingData.minX;\n                    break;\n                }\n                if (equal(itemData.minX, draggingData === null || draggingData === void 0 ? void 0 : draggingData.minX, this.epsilon) ||\n                    equal(itemData.maxX, draggingData === null || draggingData === void 0 ? void 0 : draggingData.minX, this.epsilon)) {\n                    // \n                    isShowVertical = true;\n                    verticalX = draggingData.minX;\n                    break;\n                }\n                if (equal(itemData.minX, draggingData === null || draggingData === void 0 ? void 0 : draggingData.maxX, this.epsilon) ||\n                    equal(itemData.maxX, draggingData === null || draggingData === void 0 ? void 0 : draggingData.maxX, this.epsilon)) {\n                    isShowVertical = true;\n                    verticalX = draggingData.maxX;\n                    break;\n                }\n            }\n        }\n        return {\n            isShowHorizontal: this.isShowHorizontal,\n            isShowVertical: isShowVertical,\n            position: __assign(__assign({}, this.position), { x: verticalX }),\n        };\n    };\n    // \n    SnaplineModel.prototype.getSnapLinePosition = function (draggingNode, nodes) {\n        var snaplineInfo = this.getCenterSnapLine(draggingNode, nodes);\n        var isShowHorizontal = snaplineInfo.isShowHorizontal, isShowVertical = snaplineInfo.isShowVertical;\n        // \n        // \n        if (!isShowHorizontal) {\n            var horizontalSnapline = this.getHorizontalSnapline(draggingNode, nodes);\n            if (horizontalSnapline.isShowHorizontal) {\n                snaplineInfo.isShowHorizontal = horizontalSnapline.isShowHorizontal;\n                snaplineInfo.position.y = horizontalSnapline.position.y;\n            }\n        }\n        // \n        if (!isShowVertical) {\n            var verticalSnapline = this.getVerticalSnapline(draggingNode, nodes);\n            if (verticalSnapline.isShowVertical) {\n                snaplineInfo.isShowVertical = verticalSnapline.isShowVertical;\n                snaplineInfo.position.x = verticalSnapline.position.x;\n            }\n        }\n        return snaplineInfo;\n    };\n    // \n    SnaplineModel.prototype.setSnaplineInfo = function (snaplineInfo) {\n        var isShowHorizontal = snaplineInfo.isShowHorizontal, isShowVertical = snaplineInfo.isShowVertical, position = snaplineInfo.position;\n        this.position = position;\n        this.isShowHorizontal = isShowHorizontal;\n        this.isShowVertical = isShowVertical;\n    };\n    // \n    SnaplineModel.prototype.clearSnapline = function () {\n        this.position = {\n            x: 0,\n            y: 0,\n        };\n        this.isShowHorizontal = false;\n        this.isShowVertical = false;\n    };\n    // \n    SnaplineModel.prototype.setNodeSnapLine = function (nodeData) {\n        var nodes = this.graphModel.nodes;\n        var info = this.getSnapLinePosition(nodeData, nodes);\n        this.setSnaplineInfo(info);\n    };\n    __decorate([\n        observable\n    ], SnaplineModel.prototype, \"isShowHorizontal\", void 0);\n    __decorate([\n        observable\n    ], SnaplineModel.prototype, \"isShowVertical\", void 0);\n    __decorate([\n        observable\n    ], SnaplineModel.prototype, \"position\", void 0);\n    __decorate([\n        action\n    ], SnaplineModel.prototype, \"clearSnapline\", null);\n    __decorate([\n        action\n    ], SnaplineModel.prototype, \"setNodeSnapLine\", null);\n    return SnaplineModel;\n}());\nexport { SnaplineModel };\nfunction equal(num1, num2, epsilon) {\n    if (Math.abs(num1 - num2) <= epsilon) {\n        return true;\n    }\n    else {\n        return false;\n    }\n}\nexport default SnaplineModel;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { Component } from 'preact/compat';\nimport { map, throttle } from 'lodash-es';\nimport { CanvasOverlay, ToolOverlay, BackgroundOverlay, Grid, SnaplineOverlay, OutlineOverlay, BezierAdjustOverlay, ModificationOverlay, } from './overlay';\nimport { observer } from '..';\nimport { EventType } from '../constant';\nvar Graph = /** @class */ (function (_super) {\n    __extends(Graph, _super);\n    function Graph() {\n        var _this = _super.apply(this, __spreadArray([], __read(arguments), false)) || this;\n        _this.handleResize = function () {\n            var _a = _this.props, graphModel = _a.graphModel, options = _a.options;\n            var width = graphModel.width, height = graphModel.height, isContainerWidth = graphModel.isContainerWidth, isContainerHeight = graphModel.isContainerHeight;\n            var resizeWidth = width;\n            var resizeHeight = height;\n            var needUpdate = false;\n            if (isContainerWidth) {\n                resizeWidth = undefined;\n                needUpdate = true;\n            }\n            if (isContainerHeight) {\n                resizeHeight = undefined;\n                needUpdate = true;\n            }\n            if (needUpdate) {\n                graphModel.resize(resizeWidth, resizeHeight);\n            }\n            options.width = width;\n            options.height = height;\n        };\n        _this.throttleResize = throttle(_this.handleResize, 200);\n        return _this;\n    }\n    Graph.prototype.componentDidMount = function () {\n        window.addEventListener('resize', this.throttleResize);\n    };\n    Graph.prototype.componentDidUpdate = function () {\n        var data = this.props.graphModel.modelToGraphData();\n        this.props.graphModel.eventCenter.emit(EventType.GRAPH_UPDATED, { data: data });\n    };\n    Graph.prototype.componentWillUnmount = function () {\n        window.removeEventListener('resize', this.throttleResize);\n    };\n    Graph.prototype.getComponent = function (model, graphModel, overlay) {\n        if (overlay === void 0) { overlay = 'canvas-overlay'; }\n        var getView = this.props.getView;\n        // https://juejin.cn/post/7046639346656493582 - React Component\n        var View = getView(model.type);\n        if (View) {\n            return (_jsx(View, { model: model, graphModel: graphModel, overlay: overlay }, model.id));\n        }\n        return null;\n    };\n    Graph.prototype.render = function () {\n        var _this = this;\n        var _a = this.props, graphModel = _a.graphModel, tool = _a.tool, options = _a.options, dnd = _a.dnd, snaplineModel = _a.snaplineModel;\n        var style = {};\n        // \n        if (options.width) {\n            style.width = \"\".concat(graphModel.width, \"px\");\n        }\n        if (options.height) {\n            style.height = \"\".concat(graphModel.height, \"px\");\n        }\n        var fakeNode = graphModel.fakeNode, editConfigModel = graphModel.editConfigModel, background = graphModel.background;\n        var adjustEdge = editConfigModel.adjustEdge;\n        return (_jsxs(\"div\", { className: \"lf-graph\", \"flow-id\": graphModel.flowId, style: style, children: [_jsxs(CanvasOverlay, { graphModel: graphModel, dnd: dnd, children: [_jsx(\"g\", { className: \"lf-base\", children: map(graphModel.sortElements, function (nodeModel) {\n                                return _this.getComponent(nodeModel, graphModel);\n                            }) }), fakeNode ? this.getComponent(fakeNode, graphModel) : ''] }), _jsxs(ModificationOverlay, { graphModel: graphModel, children: [_jsx(OutlineOverlay, { graphModel: graphModel }), adjustEdge ? _jsx(BezierAdjustOverlay, { graphModel: graphModel }) : '', options.snapline !== false ? (_jsx(SnaplineOverlay, { snaplineModel: snaplineModel })) : ('')] }), _jsx(ToolOverlay, { graphModel: graphModel, tool: tool }), background && _jsx(BackgroundOverlay, { background: background }), _jsx(Grid, { graphModel: graphModel })] }));\n    };\n    Graph = __decorate([\n        observer\n    ], Graph);\n    return Graph;\n}(Component));\nexport default Graph;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { Component } from 'preact/compat';\nimport { Circle, Line } from './shape';\nimport { ElementState, EventType } from '../constant';\nimport { StepDrag, formatAnchorConnectValidateData, targetNodeInfo, distance, cancelRaf, createRaf, } from '../util';\nvar Anchor = /** @class */ (function (_super) {\n    __extends(Anchor, _super);\n    function Anchor() {\n        var _this = _super.call(this) || this;\n        // TODO:  event  null  undefined \n        _this.onDragStart = function (_a) {\n            var event = _a.event;\n            var _b = _this.props, anchorData = _b.anchorData, nodeModel = _b.nodeModel, graphModel = _b.graphModel;\n            graphModel.selectNodeById(nodeModel.id);\n            if (nodeModel.autoToFront) {\n                graphModel.toFront(nodeModel.id);\n            }\n            graphModel.eventCenter.emit(EventType.ANCHOR_DRAGSTART, {\n                data: anchorData,\n                e: event,\n                nodeModel: nodeModel,\n            });\n            _this.setState({\n                startX: anchorData.x,\n                startY: anchorData.y,\n                endX: anchorData.x,\n                endY: anchorData.y,\n            });\n        };\n        _this.onDragging = function (_a) {\n            var event = _a.event;\n            var _b = _this.props, graphModel = _b.graphModel, nodeModel = _b.nodeModel, anchorData = _b.anchorData;\n            var transformModel = graphModel.transformModel, eventCenter = graphModel.eventCenter, width = graphModel.width, height = graphModel.height, _c = graphModel.editConfigModel, autoExpand = _c.autoExpand, stopMoveGraph = _c.stopMoveGraph;\n            // TODO onDragging  event \n            if (!event)\n                return;\n            var clientX = event.clientX, clientY = event.clientY;\n            var _d = graphModel.getPointByClient({\n                x: clientX,\n                y: clientY,\n            }), _e = _d.domOverlayPosition, x = _e.x, y = _e.y, _f = _d.canvasOverlayPosition, x1 = _f.x, y1 = _f.y;\n            if (_this.t) {\n                cancelRaf(_this.t);\n            }\n            var nearBoundary = []; // TODO:  Tuple\n            var size = 10;\n            if (x < 10) {\n                nearBoundary = [size, 0];\n            }\n            else if (x + 10 > width) {\n                nearBoundary = [-size, 0];\n            }\n            else if (y < 10) {\n                nearBoundary = [0, size];\n            }\n            else if (y + 10 > height) {\n                nearBoundary = [0, -size];\n            }\n            _this.setState({\n                endX: x1,\n                endY: y1,\n                dragging: true,\n            });\n            _this.moveAnchorEnd(x1, y1, event);\n            if (nearBoundary.length > 0 && !stopMoveGraph && autoExpand) {\n                _this.t = createRaf(function () {\n                    var _a = __read(nearBoundary, 2), translateX = _a[0], translateY = _a[1];\n                    transformModel.translate(translateX, translateY);\n                    var _b = _this.state, endX = _b.endX, endY = _b.endY;\n                    _this.setState({\n                        endX: endX - translateX,\n                        endY: endY - translateY,\n                    });\n                    _this.moveAnchorEnd(endX - translateX, endY - translateY, event);\n                });\n            }\n            eventCenter.emit(EventType.ANCHOR_DRAG, {\n                data: anchorData,\n                e: event,\n                nodeModel: nodeModel,\n            });\n        };\n        _this.onDragEnd = function (_a) {\n            var event = _a.event;\n            if (_this.t) {\n                cancelRaf(_this.t);\n            }\n            var edgeModel = _this.checkEnd(event);\n            _this.setState({\n                startX: 0,\n                startY: 0,\n                endX: 0,\n                endY: 0,\n                dragging: false,\n            });\n            //  fix:#320 \n            _this.sourceRuleResults.clear();\n            _this.targetRuleResults.clear();\n            var _b = _this.props, graphModel = _b.graphModel, nodeModel = _b.nodeModel, anchorData = _b.anchorData;\n            // \n            if (_this.preTargetNode) {\n                _this.preTargetNode.setHovered(false);\n                _this.preTargetNode = undefined;\n            }\n            graphModel.eventCenter.emit(EventType.ANCHOR_DRAGEND, {\n                data: anchorData,\n                e: event,\n                nodeModel: nodeModel,\n                edgeModel: edgeModel !== null && edgeModel !== void 0 ? edgeModel : undefined,\n            });\n        };\n        _this.checkEnd = function (event) {\n            var _a;\n            var _b = _this.props, graphModel = _b.graphModel, nodeModel = _b.nodeModel, _c = _b.anchorData, x = _c.x, y = _c.y, id = _c.id;\n            // nodeModel.setSelected(false);\n            /*  */\n            var _d = _this.state, endX = _d.endX, endY = _d.endY, dragging = _d.dragging;\n            var info = targetNodeInfo({\n                x: endX,\n                y: endY,\n            }, graphModel);\n            // \n            if (_this.preTargetNode &&\n                _this.preTargetNode.state !== ElementState.DEFAULT) {\n                _this.preTargetNode.setElementState(ElementState.DEFAULT);\n            }\n            // dragging\n            if (!dragging)\n                return;\n            if (info && info.node) {\n                var targetNode = info.node;\n                var anchorId = info.anchor.id;\n                var targetInfoId = \"\".concat(nodeModel.id, \"_\").concat(targetNode.id, \"_\").concat(anchorId, \"_\").concat(id);\n                var _e = _this.sourceRuleResults.get(targetInfoId) || {}, isSourcePass = _e.isAllPass, sourceMsg = _e.msg;\n                var _f = _this.targetRuleResults.get(targetInfoId) || {}, isTargetPass = _f.isAllPass, targetMsg = _f.msg;\n                if (isSourcePass && isTargetPass) {\n                    targetNode.setElementState(ElementState.DEFAULT);\n                    var targetNodeModel = graphModel.getNodeModelById(info.node.id);\n                    var edgeData = (_a = graphModel.edgeGenerator) === null || _a === void 0 ? void 0 : _a.call(graphModel, nodeModel.getData(), targetNodeModel === null || targetNodeModel === void 0 ? void 0 : targetNodeModel.getData());\n                    var edgeModel = graphModel.addEdge(__assign(__assign({}, edgeData), { sourceNodeId: nodeModel.id, sourceAnchorId: id, startPoint: {\n                            x: x,\n                            y: y,\n                        }, targetNodeId: info.node.id, targetAnchorId: info.anchor.id, endPoint: {\n                            x: info.anchor.x,\n                            y: info.anchor.y,\n                        } }));\n                    var anchorData = _this.props.anchorData;\n                    graphModel.eventCenter.emit(EventType.ANCHOR_DROP, {\n                        data: anchorData,\n                        e: event,\n                        nodeModel: nodeModel,\n                        edgeModel: edgeModel,\n                    });\n                    return edgeModel;\n                }\n                var nodeData = targetNode.getData();\n                graphModel.eventCenter.emit(EventType.CONNECTION_NOT_ALLOWED, {\n                    data: nodeData,\n                    msg: targetMsg || sourceMsg || '',\n                });\n                return null;\n            }\n        };\n        _this.sourceRuleResults = new Map();\n        _this.targetRuleResults = new Map();\n        _this.state = {\n            startX: 0,\n            startY: 0,\n            endX: 0,\n            endY: 0,\n            dragging: false,\n        };\n        _this.dragHandler = new StepDrag({\n            onDragStart: _this.onDragStart,\n            onDragging: _this.onDragging,\n            onDragEnd: _this.onDragEnd,\n        });\n        return _this;\n    }\n    Anchor.prototype.getAnchorShape = function () {\n        var _a = this.props, anchorData = _a.anchorData, style = _a.style, node = _a.node;\n        var anchorShape = node.getAnchorShape(anchorData);\n        if (anchorShape)\n            return anchorShape;\n        var x = anchorData.x, y = anchorData.y;\n        var hoverStyle = __assign(__assign({}, style), style === null || style === void 0 ? void 0 : style.hover);\n        return (_jsxs(\"g\", { children: [_jsx(Circle, __assign({ className: \"lf-node-anchor-hover\" }, hoverStyle, { x: x, y: y })), _jsx(Circle, __assign({ className: \"lf-node-anchor\" }, style, { x: x, y: y }))] }));\n    };\n    Object.defineProperty(Anchor.prototype, \"customTrajectory\", {\n        get: function () {\n            var customTrajectory = this.props.graphModel.customTrajectory;\n            return customTrajectory;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Anchor.prototype, \"relateEdges\", {\n        get: function () {\n            var _a = this.props, _b = _a.graphModel, getAnchorIncomingEdge = _b.getAnchorIncomingEdge, getAnchorOutgoingEdge = _b.getAnchorOutgoingEdge, id = _a.anchorData.id;\n            return {\n                incomingEdgeList: getAnchorIncomingEdge(id),\n                outgoingEdgeList: getAnchorOutgoingEdge(id),\n            };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Anchor.prototype.moveAnchorEnd = function (endX, endY, event) {\n        var _a, _b;\n        var _c = this.props, graphModel = _c.graphModel, nodeModel = _c.nodeModel, anchorData = _c.anchorData;\n        var info = targetNodeInfo({\n            x: endX,\n            y: endY,\n        }, graphModel);\n        if (info) {\n            var targetNode = info.node;\n            var anchorId = info.anchor.id;\n            if (this.preTargetNode && this.preTargetNode !== info.node) {\n                this.preTargetNode.setElementState(ElementState.DEFAULT);\n            }\n            // #500 , , \n            if (anchorData.id === anchorId) {\n                return;\n            }\n            this.preTargetNode = targetNode;\n            // keynodeId + anchorId\n            var targetInfoId = \"\".concat(nodeModel.id, \"_\").concat(targetNode.id, \"_\").concat(anchorId, \"_\").concat(anchorData.id);\n            // target, \n            if (!this.targetRuleResults.has(targetInfoId)) {\n                var targetAnchor = info.anchor;\n                var sourceRuleResult = nodeModel.isAllowConnectedAsSource(targetNode, anchorData, targetAnchor);\n                var targetRuleResult = targetNode.isAllowConnectedAsTarget(nodeModel, anchorData, targetAnchor);\n                this.sourceRuleResults.set(targetInfoId, formatAnchorConnectValidateData(sourceRuleResult));\n                this.targetRuleResults.set(targetInfoId, formatAnchorConnectValidateData(targetRuleResult));\n            }\n            var isSourcePass = ((_a = this.sourceRuleResults.get(targetInfoId)) !== null && _a !== void 0 ? _a : {}).isAllPass;\n            var isTargetPass = ((_b = this.targetRuleResults.get(targetInfoId)) !== null && _b !== void 0 ? _b : {}).isAllPass;\n            // \n            if (isSourcePass && isTargetPass) {\n                targetNode.setElementState(ElementState.ALLOW_CONNECT);\n            }\n            else {\n                targetNode.setElementState(ElementState.NOT_ALLOW_CONNECT);\n            }\n            //  hovered \n            if (!targetNode.isHovered) {\n                var nodeData = targetNode.getData();\n                if (event) {\n                    graphModel.eventCenter.emit(EventType.NODE_MOUSEENTER, {\n                        data: nodeData,\n                        e: event,\n                    });\n                }\n                targetNode.setHovered(true);\n            }\n        }\n        else if (this.preTargetNode &&\n            this.preTargetNode.state !== ElementState.DEFAULT) {\n            // \n            this.preTargetNode.setElementState(ElementState.DEFAULT);\n            // \n            var prevData = this.preTargetNode.getData();\n            if (event) {\n                graphModel.eventCenter.emit(EventType.NODE_MOUSELEAVE, {\n                    data: prevData,\n                    e: event,\n                });\n            }\n            this.preTargetNode.setHovered(false);\n            this.preTargetNode = undefined;\n        }\n    };\n    Anchor.prototype.isShowLine = function () {\n        var _a = this.state, startX = _a.startX, startY = _a.startY, endX = _a.endX, endY = _a.endY;\n        var v = distance(startX, startY, endX, endY);\n        return v > 10;\n    };\n    Anchor.prototype.render = function () {\n        var _this = this;\n        var _a = this.state, startX = _a.startX, startY = _a.startY, endX = _a.endX, endY = _a.endY;\n        var _b = this.props, anchorData = _b.anchorData, edgeStyle = _b.edgeStyle, nodeModel = _b.nodeModel, graphModel = _b.graphModel;\n        var edgeAddable = anchorData.edgeAddable;\n        return (\n        // className=\"lf-anchor\" \n        _jsxs(\"g\", { className: \"lf-anchor\", children: [_jsx(\"g\", { onClick: function (ev) {\n                        ev.stopPropagation();\n                        graphModel.eventCenter.emit(EventType.ANCHOR_CLICK, {\n                            data: anchorData,\n                            e: ev,\n                            nodeModel: nodeModel,\n                        });\n                    }, onPointerDown: function (ev) {\n                        graphModel.eventCenter.emit(EventType.ANCHOR_MOUSEDOWN, {\n                            data: anchorData,\n                            e: ev,\n                            nodeModel: nodeModel,\n                        });\n                        if (edgeAddable !== false) {\n                            _this.dragHandler.handleMouseDown(ev);\n                        }\n                    }, children: this.getAnchorShape() }), this.isShowLine() &&\n                    (this.customTrajectory ? (this.customTrajectory(__assign({ sourcePoint: {\n                            x: startX,\n                            y: startY,\n                        }, targetPoint: {\n                            x: endX,\n                            y: endY,\n                        } }, edgeStyle))) : (_jsx(Line, __assign({ x1: startX, y1: startY, x2: endX, y2: endY }, edgeStyle, { \"pointer-events\": \"none\" }))))] }));\n    };\n    return Anchor;\n}(Component));\nexport default Anchor;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { jsx as _jsx } from \"preact/jsx-runtime\";\nimport { Component } from 'preact/compat';\nimport { map, reduce } from 'lodash-es';\nimport Circle from './shape/Circle';\nimport { EventType } from '../constant';\nimport { StepDrag, TranslateMatrix, Vector } from '../util';\nvar RotateControlPoint = /** @class */ (function (_super) {\n    __extends(RotateControlPoint, _super);\n    function RotateControlPoint(props) {\n        var _this = _super.call(this, props) || this;\n        _this.style = {};\n        _this.onDragging = function (_a) {\n            var _b;\n            var event = _a.event;\n            var _c = _this.props, graphModel = _c.graphModel, nodeModel = _c.nodeModel, eventCenter = _c.eventCenter;\n            var selectNodes = graphModel.selectNodes;\n            var x = nodeModel.x, y = nodeModel.y;\n            var clientX = event.clientX, clientY = event.clientY;\n            var _d = graphModel.getPointByClient({\n                x: clientX,\n                y: clientY,\n            }).canvasOverlayPosition, cx = _d.x, cy = _d.y;\n            var v = new Vector(cx - x, cy - y);\n            var angle = ((_b = _this.normal) === null || _b === void 0 ? void 0 : _b.angle(v)) - _this.defaultAngle;\n            var matrix = new TranslateMatrix(-x, -y)\n                .rotate(angle)\n                .translate(x, y)\n                .toString();\n            nodeModel.transform = matrix;\n            nodeModel.rotate = angle;\n            var nodeIds = map(selectNodes, function (node) { return node.id; });\n            if (nodeIds.indexOf(nodeModel.id) === -1) {\n                nodeIds = [nodeModel.id];\n            }\n            var nodeIdMap = reduce(nodeIds, function (acc, nodeId) {\n                var node = graphModel.getNodeModelById(nodeId);\n                acc[nodeId] = node === null || node === void 0 ? void 0 : node.getMoveDistance(0, 0, false);\n                return acc;\n            }, {});\n            nodeIds.forEach(function (nodeId) {\n                var edges = graphModel.getNodeEdges(nodeId);\n                edges.forEach(function (edge) {\n                    if (nodeIdMap[edge.sourceNodeId]) {\n                        var model = graphModel.getNodeModelById(edge.sourceNodeId);\n                        var anchor = model.anchors.find(function (item) { return item.id === edge.sourceAnchorId; });\n                        edge.updateStartPoint(anchor);\n                    }\n                    if (nodeIdMap[edge.targetNodeId]) {\n                        var model = graphModel.getNodeModelById(edge.targetNodeId);\n                        var anchor = model.anchors.find(function (item) { return item.id === edge.targetAnchorId; });\n                        edge.updateEndPoint(anchor);\n                    }\n                });\n            });\n            eventCenter.emit(EventType.NODE_ROTATE, {\n                e: event,\n                model: nodeModel,\n                data: nodeModel.getData(),\n            });\n        };\n        _this.style = props.style;\n        _this.stepperDrag = new StepDrag({\n            onDragging: _this.onDragging,\n        });\n        return _this;\n    }\n    RotateControlPoint.prototype.render = function () {\n        var _this = this;\n        var nodeModel = this.props.nodeModel;\n        var x = nodeModel.x, y = nodeModel.y, width = nodeModel.width, height = nodeModel.height;\n        var cx = x + width / 2 + 20;\n        var cy = y - height / 2 - 20;\n        this.normal = new Vector(1, 0);\n        this.defaultAngle = this.normal.angle(new Vector(cx - x, cy - y));\n        nodeModel.defaultAngle = this.defaultAngle;\n        return (_jsx(\"g\", { className: \"lf-rotate-control\", children: _jsx(\"g\", { onPointerDown: function (ev) {\n                    _this.stepperDrag.handleMouseDown(ev);\n                }, children: _jsx(Circle, __assign({}, this.style, { cx: cx, cy: cy })) }) }));\n    };\n    return RotateControlPoint;\n}(Component));\nexport default RotateControlPoint;\n","/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = '';\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (arg) {\n\t\t\t\tclasses = appendClass(classes, parseValue(arg));\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction parseValue (arg) {\n\t\tif (typeof arg === 'string' || typeof arg === 'number') {\n\t\t\treturn arg;\n\t\t}\n\n\t\tif (typeof arg !== 'object') {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (Array.isArray(arg)) {\n\t\t\treturn classNames.apply(null, arg);\n\t\t}\n\n\t\tif (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {\n\t\t\treturn arg.toString();\n\t\t}\n\n\t\tvar classes = '';\n\n\t\tfor (var key in arg) {\n\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\tclasses = appendClass(classes, key);\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction appendClass (value, newClass) {\n\t\tif (!newClass) {\n\t\t\treturn value;\n\t\t}\n\t\n\t\tif (value) {\n\t\t\treturn value + ' ' + newClass;\n\t\t}\n\t\n\t\treturn value + newClass;\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { jsx as _jsx } from \"preact/jsx-runtime\";\nimport classNames from 'classnames';\nimport { Component } from 'preact/compat';\nimport { ElementState, EventType } from '../../constant';\nimport { Text } from '../shape';\nimport { StepDrag } from '../../util';\nvar BaseText = /** @class */ (function (_super) {\n    __extends(BaseText, _super);\n    function BaseText(props) {\n        var _this = _super.call(this) || this;\n        _this.mouseDownHandler = function (e) {\n            var _a = _this.props, draggable = _a.draggable, model = _a.model, graphModel = _a.graphModel;\n            var nodeTextDraggable = graphModel.editConfigModel.nodeTextDraggable;\n            if (draggable !== null && draggable !== void 0 ? draggable : nodeTextDraggable) {\n                e.stopPropagation();\n                _this.stepperDrag.model = model;\n                _this.stepperDrag.handleMouseDown(e);\n            }\n        };\n        _this.onDragging = function (_a) {\n            var deltaX = _a.deltaX, deltaY = _a.deltaY;\n            var _b = _this.props, model = _b.model, transformModel = _b.graphModel.transformModel;\n            if (deltaX || deltaY) {\n                var _c = __read(transformModel.fixDeltaXY(deltaX, deltaY), 2), curDeltaX = _c[0], curDeltaY = _c[1];\n                model.moveText(curDeltaX, curDeltaY);\n            }\n        };\n        _this.dbClickHandler = function () {\n            // \n            var _a = _this.props, editable = _a.editable, eventCenter = _a.graphModel.eventCenter, model = _a.model;\n            if (editable) {\n                model.setElementState(ElementState.TEXT_EDIT);\n            }\n            eventCenter.emit(EventType.TEXT_DBCLICK, {\n                data: model.text,\n                model: model,\n            });\n        };\n        var draggable = props.draggable;\n        // TODO:  new  model\n        _this.stepperDrag = new StepDrag({\n            onDragging: _this.onDragging,\n            step: 1,\n            // model,\n            eventType: 'TEXT',\n            isStopPropagation: draggable,\n        });\n        return _this;\n    }\n    BaseText.prototype.getShape = function () {\n        var _a = this.props, model = _a.model, graphModel = _a.graphModel;\n        var editConfigModel = graphModel.editConfigModel;\n        var _b = model.text, value = _b.value, x = _b.x, y = _b.y, editable = _b.editable, draggable = _b.draggable;\n        var attr = {\n            x: x,\n            y: y,\n            className: '',\n            value: value,\n        };\n        // DONE:  classnames\n        // TODO: \n        // if (editable) {\n        //   attr.className = 'lf-element-text';\n        // } else if (draggable || editConfigModel.nodeTextDraggable) {\n        //   attr.className = 'lf-text-draggable';\n        // } else {\n        //   attr.className = 'lf-text-disabled';\n        // }\n        var style = model.getTextStyle();\n        var isDraggable = editConfigModel.nodeTextDraggable || draggable;\n        return (_jsx(Text, __assign({}, attr, style, { className: classNames({\n                'lf-element-text': editable,\n                'lf-text-draggable': !editable && isDraggable,\n                'lf-text-disabled': !editable && !isDraggable,\n            }), model: model })));\n    };\n    BaseText.prototype.render = function () {\n        var text = this.props.model.text;\n        if (text) {\n            return (_jsx(\"g\", { onPointerDown: this.mouseDownHandler, onDblClick: this.dbClickHandler, children: this.getShape() }));\n        }\n    };\n    return BaseText;\n}(Component));\nexport { BaseText };\nexport default BaseText;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { Text, Rect } from '..';\nimport { BaseText } from '.';\nimport { getHtmlTextHeight, getSvgTextSize } from '../../util';\nvar LineText = /** @class */ (function (_super) {\n    __extends(LineText, _super);\n    function LineText(props) {\n        var _this = _super.call(this, props) || this;\n        // Hover \n        _this.setHoverOn = function () {\n            _this.setState({\n                isHovered: true,\n            });\n        };\n        _this.setHoverOff = function () {\n            _this.setState({\n                isHovered: false,\n            });\n        };\n        _this.state = {\n            isHovered: false,\n        };\n        return _this;\n    }\n    LineText.prototype.getBackground = function () {\n        var isHovered = this.state.isHovered;\n        var model = this.props.model;\n        var text = model.text;\n        var style = model.getTextStyle();\n        var backgroundStyle = style.background || {};\n        if (isHovered && style.hover && style.hover.background) {\n            backgroundStyle = __assign(__assign({}, backgroundStyle), style.hover.background);\n        }\n        // \n        if ((text === null || text === void 0 ? void 0 : text.value) && (backgroundStyle === null || backgroundStyle === void 0 ? void 0 : backgroundStyle.fill) !== 'transparent') {\n            var fontSize = style.fontSize, textWidth = style.textWidth, lineHeight = style.lineHeight, overflowMode = style.overflowMode;\n            var wrapPadding = backgroundStyle.wrapPadding;\n            var rows = text === null || text === void 0 ? void 0 : text.value.split(/[\\r\\n]/g);\n            var rowsLength = rows.length;\n            var x = text.x, y = text.y;\n            var rectAttr = {};\n            if (overflowMode === 'autoWrap' && textWidth) {\n                var textHeight = getHtmlTextHeight({\n                    rows: rows,\n                    style: {\n                        fontSize: \"\".concat(fontSize, \"px\"),\n                        width: \"\".concat(textWidth, \"px\"),\n                        lineHeight: lineHeight,\n                        padding: wrapPadding,\n                    },\n                    rowsLength: rowsLength,\n                    className: 'lf-get-text-height',\n                });\n                rectAttr = __assign(__assign({}, backgroundStyle), { x: x, y: y, width: textWidth, height: textHeight });\n            }\n            else {\n                //  / 2 * fontSize + 2\n                //  * fontSize + 2\n                var _a = getSvgTextSize({ rows: rows, rowsLength: rowsLength, fontSize: fontSize }), width = _a.width, height = _a.height;\n                if (overflowMode === 'ellipsis') {\n                    // https://github.com/didi/LogicFlow/issues/1151\n                    // \"ellipsis\"\n                    // Text.tsx(overflowMode === 'ellipsis')\n                    // Text.tsxtextRealWidth=textWidth || width\n                    // Text.tsxforeignObjectHeight = fontSize + 2;\n                    width = textWidth;\n                    height = fontSize + 2;\n                }\n                //  padding  width, height, x, y \n                // TODO: \n                if (typeof backgroundStyle.wrapPadding === 'string') {\n                    var padding = backgroundStyle.wrapPadding\n                        .split(',')\n                        .filter(function (padding) { return padding.trim(); })\n                        .map(function (padding) { return parseFloat(padding.trim()); });\n                    if (padding.length > 0 && padding.length <= 4) {\n                        if (padding.length === 1) {\n                            var _b = __read(padding, 1), allSides = _b[0];\n                            padding = [allSides, allSides, allSides, allSides];\n                        }\n                        else if (padding.length === 2) {\n                            var _c = __read(padding, 2), vertical = _c[0], horizontal = _c[1];\n                            padding = [vertical, horizontal, vertical, horizontal];\n                        }\n                        else if (padding.length === 3) {\n                            var _d = __read(padding, 3), top_1 = _d[0], horizontal = _d[1], bottom_1 = _d[2];\n                            padding = [top_1, horizontal, bottom_1, horizontal];\n                        }\n                        var _e = __read(padding, 4), top_2 = _e[0], right = _e[1], bottom = _e[2], left = _e[3];\n                        width += right + left;\n                        height += top_2 + bottom;\n                        x = x + (right - left) / 2;\n                        y = y + (bottom - top_2) / 2;\n                    }\n                }\n                rectAttr = __assign(__assign({}, backgroundStyle), { x: x - 1, y: y - 1, width: width, height: height });\n            }\n            return _jsx(Rect, __assign({}, rectAttr));\n        }\n        return null;\n    };\n    LineText.prototype.getShape = function () {\n        var model = this.props.model;\n        var _a = model.text, x = _a.x, y = _a.y, value = _a.value;\n        if (!value)\n            return null;\n        var style = model.getTextStyle();\n        var attrs = __assign({ x: x, y: y, value: value, model: model, className: 'lf-element-text' }, style);\n        return (_jsxs(\"g\", { className: \"lf-line-text\", onMouseEnter: this.setHoverOn, onMouseLeave: this.setHoverOff, children: [this.getBackground(), _jsx(Text, __assign({}, attrs))] }));\n    };\n    return LineText;\n}(BaseText));\nexport { LineText };\nexport default LineText;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { Component } from 'preact/compat';\nimport { reaction } from 'mobx';\nimport { map } from 'lodash-es';\nimport Anchor from '../Anchor';\nimport { BaseText } from '../text';\nimport { ElementState, EventType, TextMode } from '../../constant';\nimport { StepDrag, snapToGrid, isIe, isMultipleSelect, cancelRaf, createRaf,\n// RotateMatrix,\n } from '../../util';\nimport RotateControlPoint from '../Rotate';\nimport ResizeControlGroup from '../Control';\nvar BaseNode = /** @class */ (function (_super) {\n    __extends(BaseNode, _super);\n    function BaseNode(props) {\n        var _this = _super.call(this) || this;\n        _this.onDragStart = function (_a) {\n            var event = _a.event;\n            var _b = _this.props, model = _b.model, graphModel = _b.graphModel;\n            if (event) {\n                var _c = graphModel.getPointByClient({\n                    x: event.clientX,\n                    y: event.clientY,\n                }).canvasOverlayPosition, x = _c.x, y = _c.y;\n                _this.moveOffset = {\n                    dx: model.x - x,\n                    dy: model.y - y,\n                };\n            }\n        };\n        _this.onDragging = function (_a) {\n            var _b, _c, _d, _e;\n            var event = _a.event;\n            var _f = _this.props, model = _f.model, graphModel = _f.graphModel;\n            var _g = graphModel.editConfigModel, stopMoveGraph = _g.stopMoveGraph, autoExpand = _g.autoExpand, snapGrid = _g.snapGrid, transformModel = graphModel.transformModel, selectNodes = graphModel.selectNodes, width = graphModel.width, height = graphModel.height, gridSize = graphModel.gridSize;\n            model.isDragging = true;\n            var _h = event, clientX = _h.clientX, clientY = _h.clientY;\n            var _j = graphModel.getPointByClient({\n                x: clientX,\n                y: clientY,\n            }).canvasOverlayPosition, x = _j.x, y = _j.y;\n            var _k = __read(transformModel.CanvasPointToHtmlPoint([x, y]), 2), x1 = _k[0], y1 = _k[1];\n            // 1. \n            // 2. \n            x = x + ((_c = (_b = _this.moveOffset) === null || _b === void 0 ? void 0 : _b.dx) !== null && _c !== void 0 ? _c : 0);\n            y = y + ((_e = (_d = _this.moveOffset) === null || _d === void 0 ? void 0 : _d.dy) !== null && _e !== void 0 ? _e : 0);\n            // \n            x = snapToGrid(x, gridSize, snapGrid);\n            y = snapToGrid(y, gridSize, snapGrid);\n            if (!width || !height) {\n                graphModel.moveNode2Coordinate(model.id, x, y);\n                return;\n            }\n            var isOutCanvas = x1 < 0 || y1 < 0 || x1 > width || y1 > height;\n            if (autoExpand && !stopMoveGraph && isOutCanvas) {\n                // setInterval\n                return;\n            }\n            // \n            var _l = __read(transformModel.CanvasPointToHtmlPoint([\n                x - model.width / 2,\n                y - model.height / 2,\n            ]), 2), leftTopX = _l[0], leftTopY = _l[1];\n            var _m = __read(transformModel.CanvasPointToHtmlPoint([\n                x + model.width / 2,\n                y + model.height / 2,\n            ]), 2), rightBottomX = _m[0], rightBottomY = _m[1];\n            var size = Math.max(gridSize, 20);\n            var nearBoundary = [];\n            if (leftTopX < 0) {\n                nearBoundary = [size, 0];\n            }\n            else if (rightBottomX > graphModel.width) {\n                nearBoundary = [-size, 0];\n            }\n            else if (leftTopY < 0) {\n                nearBoundary = [0, size];\n            }\n            else if (rightBottomY > graphModel.height) {\n                nearBoundary = [0, -size];\n            }\n            if (_this.t) {\n                cancelRaf(_this.t);\n            }\n            var moveNodes = selectNodes.map(function (node) { return node.id; });\n            // \n            if (moveNodes.indexOf(model.id) === -1) {\n                moveNodes = [model.id];\n            }\n            if (nearBoundary.length > 0 && !stopMoveGraph && autoExpand) {\n                _this.t = createRaf(function () {\n                    var _a = __read(nearBoundary, 2), translateX = _a[0], translateY = _a[1];\n                    transformModel.translate(translateX !== null && translateX !== void 0 ? translateX : 0, translateY !== null && translateY !== void 0 ? translateY : 0);\n                    var deltaX = -(translateX !== null && translateX !== void 0 ? translateX : 0) / transformModel.SCALE_X;\n                    var deltaY = -(translateY !== null && translateY !== void 0 ? translateY : 0) / transformModel.SCALE_X;\n                    graphModel.moveNodes(moveNodes, deltaX, deltaY);\n                });\n            }\n            else {\n                graphModel.moveNodes(moveNodes, x - model.x, y - model.y);\n            }\n        };\n        _this.onDragEnd = function () {\n            if (_this.t) {\n                cancelRaf(_this.t);\n            }\n            var model = _this.props.model;\n            model.isDragging = false;\n        };\n        _this.onMouseOut = function (ev) {\n            if (isIe()) {\n                _this.setHoverOff(ev);\n            }\n        };\n        _this.handleMouseUp = function () {\n            var model = _this.props.model;\n            _this.mouseUpDrag = model.isDragging;\n            if (_this.longPressTimer) {\n                clearTimeout(_this.longPressTimer);\n                _this.longPressTimer = undefined;\n            }\n        };\n        _this.handleClick = function (e) {\n            // clickemit\n            // mousedownstartTime\n            var isDragging = _this.mouseUpDrag === false;\n            var curTime = new Date().getTime();\n            if (!_this.startTime)\n                return;\n            var timeInterval = curTime - _this.startTime;\n            var _a = _this.props, model = _a.model, graphModel = _a.graphModel;\n            // 1\n            // ,100ms\n            if (!isDragging && timeInterval > 100)\n                return;\n            if (!isDragging) {\n                _this.onDragEnd();\n                _this.handleMouseUp();\n            }\n            // \n            var nodeData = model.getData();\n            var position = graphModel.getPointByClient({\n                x: e.clientX,\n                y: e.clientY,\n            });\n            // TODO:  isSelected  isMultiple group \n            var eventOptions = {\n                data: nodeData,\n                e: e,\n                position: position,\n                isSelected: false,\n                isMultiple: false,\n            };\n            var isRightClick = e.button === 2;\n            //  IE 11\n            var isDoubleClick = e.detail === 2;\n            // \n            if (isRightClick)\n                return;\n            var editConfigModel = graphModel.editConfigModel;\n            // multipleSelect tool\n            var isMultiple = isMultipleSelect(e, editConfigModel);\n            eventOptions.isMultiple = isMultiple;\n            if (model.isSelected && !isDoubleClick && isMultiple) {\n                eventOptions.isSelected = false;\n                model.setSelected(false);\n            }\n            else {\n                graphModel.selectNodeById(model.id, isMultiple);\n                eventOptions.isSelected = true;\n                // \n                if (!editConfigModel.isSilentMode) {\n                    _this.toFront();\n                }\n            }\n            // \n            if (isDoubleClick) {\n                if (editConfigModel.nodeTextEdit) {\n                    if (model.text.editable && editConfigModel.textMode === TextMode.TEXT) {\n                        model.setSelected(false);\n                        graphModel.setElementStateById(model.id, ElementState.TEXT_EDIT);\n                    }\n                }\n                graphModel.eventCenter.emit(EventType.NODE_DBCLICK, eventOptions);\n            }\n            else {\n                graphModel.eventCenter.emit(EventType.ELEMENT_CLICK, eventOptions);\n                graphModel.eventCenter.emit(EventType.NODE_CLICK, eventOptions);\n            }\n        };\n        _this.handleContextMenu = function (ev) {\n            ev.preventDefault();\n            var _a = _this.props, model = _a.model, graphModel = _a.graphModel;\n            var editConfigModel = graphModel.editConfigModel;\n            // \n            var nodeData = model.getData();\n            var position = graphModel.getPointByClient({\n                x: ev.clientX,\n                y: ev.clientY,\n            });\n            graphModel.setElementStateById(model.id, ElementState.SHOW_MENU, position.domOverlayPosition);\n            if (!model.isSelected) {\n                graphModel.selectNodeById(model.id);\n            }\n            graphModel.eventCenter.emit(EventType.NODE_CONTEXTMENU, {\n                data: nodeData,\n                e: ev,\n                position: position,\n            });\n            // \n            if (!editConfigModel.isSilentMode) {\n                _this.toFront();\n            }\n        };\n        _this.handleMouseDown = function (ev) {\n            var _a = _this.props, model = _a.model, graphModel = _a.graphModel;\n            _this.startTime = new Date().getTime();\n            var editConfigModel = graphModel.editConfigModel;\n            if (editConfigModel.adjustNodePosition && model.draggable) {\n                _this.stepDrag && _this.stepDrag.handleMouseDown(ev);\n            }\n            if (_this.longPressTimer) {\n                clearTimeout(_this.longPressTimer);\n            }\n            if (ev.pointerType === 'touch') {\n                _this.longPressTimer = window.setTimeout(function () {\n                    if (!_this.props.model.isDragging) {\n                        _this.handleContextMenu(ev);\n                    }\n                }, 500);\n            }\n        };\n        _this.handleFocus = function () {\n            var _a = _this.props, model = _a.model, graphModel = _a.graphModel;\n            graphModel.eventCenter.emit(EventType.NODE_FOCUS, {\n                data: model.getData(),\n            });\n        };\n        _this.handleBlur = function () {\n            // propsundefined\n            if (!_this.props)\n                return;\n            var _a = _this.props, model = _a.model, graphModel = _a.graphModel;\n            graphModel.eventCenter.emit(EventType.NODE_BLUR, {\n                data: model.getData(),\n            });\n        };\n        // hover\n        _this.setHoverOn = function (ev) {\n            var _a = _this.props, model = _a.model, graphModel = _a.graphModel;\n            if (model.isHovered)\n                return;\n            var nodeData = model.getData();\n            model.setHovered(true);\n            graphModel.eventCenter.emit(EventType.NODE_MOUSEENTER, {\n                data: nodeData,\n                e: ev,\n            });\n        };\n        _this.setHoverOff = function (ev) {\n            var _a = _this.props, model = _a.model, graphModel = _a.graphModel;\n            var nodeData = model.getData();\n            // focusfocus\n            if (!model.isHovered)\n                return;\n            model.setHovered(false);\n            graphModel.eventCenter.emit(EventType.NODE_MOUSELEAVE, {\n                data: nodeData,\n                e: ev,\n            });\n        };\n        var _a = props.graphModel, gridSize = _a.gridSize, eventCenter = _a.eventCenter, model = props.model;\n        // editConfig\n        _this.stepDrag = new StepDrag({\n            onDragStart: _this.onDragStart,\n            onDragging: _this.onDragging,\n            onDragEnd: _this.onDragEnd,\n            step: gridSize,\n            eventType: 'NODE',\n            isStopPropagation: false,\n            eventCenter: eventCenter,\n            model: model,\n        });\n        // https://github.com/didi/LogicFlow/issues/1370\n        // LogicFlow.undo()modelLogicFlow.undo()model\n        // this.stepDrag\n        // this.stepDragmodelmodel\n        // mobxreactionthis.props.modelthis.stepDrag.setModel()\n        _this.modelDisposer = reaction(function () { return _this.props; }, function (newProps) {\n            if (newProps && newProps.model) {\n                _this.stepDrag.setModel(newProps.model);\n            }\n        });\n        return _this;\n    }\n    BaseNode.prototype.componentWillUnmount = function () {\n        if (this.modelDisposer) {\n            this.modelDisposer();\n        }\n        //  mobx-preact  componentWillUnmount mobx-preact \n        // @ts-ignore\n        if (this.render.$mobx) {\n            // @ts-ignore\n            this.render.$mobx.dispose();\n        }\n    };\n    BaseNode.prototype.componentDidMount = function () { };\n    BaseNode.prototype.componentDidUpdate = function () { };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    BaseNode.prototype.getAnchorShape = function (_anchorData) {\n        return null;\n    };\n    BaseNode.prototype.getAnchors = function () {\n        var _this = this;\n        var _a = this.props, model = _a.model, graphModel = _a.graphModel;\n        var isSelected = model.isSelected, isHitable = model.isHitable, isDragging = model.isDragging, isShowAnchor = model.isShowAnchor;\n        if (isHitable && (isSelected || isShowAnchor) && !isDragging) {\n            return map(model.anchors, function (anchor, index) {\n                var edgeStyle = model.getAnchorLineStyle(anchor);\n                var style = model.getAnchorStyle(anchor);\n                return (_jsx(Anchor, { anchorData: anchor, node: _this, style: style, edgeStyle: edgeStyle, anchorIndex: index, nodeModel: model, graphModel: graphModel, setHoverOff: _this.setHoverOff }));\n            });\n        }\n        return [];\n    };\n    BaseNode.prototype.getRotateControl = function () {\n        var _a = this.props, model = _a.model, graphModel = _a.graphModel;\n        var _b = graphModel.editConfigModel, isSilentMode = _b.isSilentMode, allowRotate = _b.allowRotate;\n        var isSelected = model.isSelected, isHitable = model.isHitable, rotatable = model.rotatable, isHovered = model.isHovered;\n        //  allResize  resizable \n        var canRotate = allowRotate && rotatable; //  > \n        var style = model.getRotateControlStyle();\n        if (!isSilentMode && isHitable && (isSelected || isHovered) && canRotate) {\n            return (_jsx(RotateControlPoint, { graphModel: graphModel, nodeModel: model, eventCenter: graphModel.eventCenter, style: style }));\n        }\n    };\n    BaseNode.prototype.getResizeControl = function () {\n        var _a = this.props, model = _a.model, graphModel = _a.graphModel;\n        var _b = graphModel.editConfigModel, isSilentMode = _b.isSilentMode, allowResize = _b.allowResize;\n        var isSelected = model.isSelected, isHitable = model.isHitable, resizable = model.resizable, isHovered = model.isHovered;\n        //  allResize  resizable \n        var canResize = allowResize && resizable; //  > \n        var style = model.getResizeControlStyle();\n        if (!isSilentMode && isHitable && (isSelected || isHovered) && canResize) {\n            return (_jsx(ResizeControlGroup, { style: style, model: model, graphModel: graphModel }));\n        }\n        return null;\n    };\n    BaseNode.prototype.getText = function () {\n        var _a;\n        var _b = this.props, model = _b.model, graphModel = _b.graphModel;\n        var editConfigModel = graphModel.editConfigModel;\n        //   TEXT \n        if (editConfigModel.nodeTextMode !== TextMode.TEXT)\n            return null;\n        // \n        if (model.state === ElementState.TEXT_EDIT)\n            return null;\n        if (model.text) {\n            var draggable = false;\n            if (editConfigModel.nodeTextDraggable && model.text.draggable) {\n                draggable = true;\n            }\n            return (_jsx(BaseText, { editable: editConfigModel.nodeTextEdit && ((_a = model.text.editable) !== null && _a !== void 0 ? _a : true), model: model, graphModel: graphModel, draggable: draggable }));\n        }\n        return null;\n    };\n    BaseNode.prototype.getStateClassName = function () {\n        var _a = this.props.model, state = _a.state, isDragging = _a.isDragging, isSelected = _a.isSelected;\n        var className = 'lf-node';\n        switch (state) {\n            case ElementState.ALLOW_CONNECT:\n                className += ' lf-node-allow';\n                break;\n            case ElementState.NOT_ALLOW_CONNECT:\n                className += ' lf-node-not-allow';\n                break;\n            default:\n                className += ' lf-node-default';\n                break;\n        }\n        if (isDragging) {\n            className += ' lf-dragging';\n        }\n        if (isSelected) {\n            className += ' lf-node-selected';\n        }\n        return className;\n    };\n    /**\n     *  @overridable , group\n     */\n    BaseNode.prototype.toFront = function () {\n        var _a = this.props, model = _a.model, graphModel = _a.graphModel;\n        if (model.autoToFront) {\n            graphModel.toFront(model.id);\n        }\n    };\n    BaseNode.prototype.render = function () {\n        var _a = this.props, model = _a.model, graphModel = _a.graphModel;\n        var _b = graphModel.editConfigModel, hideAnchors = _b.hideAnchors, adjustNodePosition = _b.adjustNodePosition, allowRotate = _b.allowRotate, allowResize = _b.allowResize, gridSize = graphModel.gridSize, SCALE_X = graphModel.transformModel.SCALE_X;\n        var isHitable = model.isHitable, draggable = model.draggable, transform = model.transform;\n        var _c = model.getOuterGAttributes(), _d = _c.className, className = _d === void 0 ? '' : _d, restAttributes = __rest(_c, [\"className\"]);\n        var nodeShapeInner = (_jsxs(\"g\", { className: \"lf-node-content\", children: [_jsxs(\"g\", { transform: transform, children: [this.getShape(), this.getText(), allowRotate && this.getRotateControl(), allowResize && this.getResizeControl()] }), !hideAnchors && this.getAnchors()] }));\n        var nodeShape;\n        if (!isHitable) {\n            nodeShape = (_jsx(\"g\", __assign({ className: \"\".concat(this.getStateClassName(), \" \").concat(className) }, restAttributes, { children: nodeShapeInner })));\n        }\n        else {\n            if (adjustNodePosition && draggable) {\n                this.stepDrag.setStep(gridSize * SCALE_X);\n            }\n            nodeShape = (_jsx(\"g\", __assign({ className: \"\".concat(this.getStateClassName(), \" \").concat(className), onPointerDown: this.handleMouseDown, onPointerUp: this.handleMouseUp, onClick: this.handleClick, \n                //enterleaveclickPointer\n                onMouseEnter: this.setHoverOn, onMouseOver: this.setHoverOn, onMouseLeave: this.setHoverOff, onMouseOut: this.onMouseOut, onContextMenu: this.handleContextMenu, onFocus: this.handleFocus, onBlur: this.handleBlur }, restAttributes, { children: nodeShapeInner })));\n        }\n        return nodeShape;\n    };\n    BaseNode.isObserved = false;\n    return BaseNode;\n}(Component));\nexport { BaseNode };\nexport default BaseNode;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { jsx as _jsx } from \"preact/jsx-runtime\";\nimport BaseNode from './BaseNode';\nimport { Rect } from '../shape';\nvar RectNode = /** @class */ (function (_super) {\n    __extends(RectNode, _super);\n    function RectNode() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    RectNode.prototype.getShape = function () {\n        var model = this.props.model;\n        var style = model.getNodeStyle();\n        return (_jsx(Rect, __assign({}, style, { x: model.x, y: model.y, width: model.width, height: model.height, radius: model.radius })));\n    };\n    return RectNode;\n}(BaseNode));\nexport { RectNode };\nexport default RectNode;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { jsx as _jsx } from \"preact/jsx-runtime\";\nimport Circle from '../shape/Circle';\nimport BaseNode from './BaseNode';\nvar CircleNode = /** @class */ (function (_super) {\n    __extends(CircleNode, _super);\n    function CircleNode() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CircleNode.prototype.getShape = function () {\n        var model = this.props.model;\n        var x = model.x, y = model.y, r = model.r;\n        var style = model.getNodeStyle();\n        return _jsx(Circle, __assign({}, style, { x: x, y: y, r: r }));\n    };\n    return CircleNode;\n}(BaseNode));\nexport { CircleNode };\nexport default CircleNode;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { jsx as _jsx } from \"preact/jsx-runtime\";\nimport BaseNode from './BaseNode';\nimport { Polygon } from '../shape';\nvar PolygonNode = /** @class */ (function (_super) {\n    __extends(PolygonNode, _super);\n    function PolygonNode() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PolygonNode.prototype.getShape = function () {\n        var model = this.props.model;\n        var _a = model, x = _a.x, y = _a.y, width = _a.width, height = _a.height, points = _a.points;\n        var style = model.getNodeStyle();\n        var attr = {\n            transform: \"matrix(1 0 0 1 \".concat(x - width / 2, \" \").concat(y - height / 2, \")\"),\n        };\n        return (_jsx(\"g\", __assign({}, attr, { children: _jsx(Polygon, __assign({}, style, { points: points, x: x, y: y })) })));\n    };\n    return PolygonNode;\n}(BaseNode));\nexport { PolygonNode };\nexport default PolygonNode;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { jsx as _jsx } from \"preact/jsx-runtime\";\nimport BaseNode from './BaseNode';\nimport Polygon from '../shape/Polygon';\nvar DiamondNode = /** @class */ (function (_super) {\n    __extends(DiamondNode, _super);\n    function DiamondNode() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    DiamondNode.prototype.getShape = function () {\n        var model = this.props.model;\n        var style = model.getNodeStyle();\n        return (_jsx(\"g\", { children: _jsx(Polygon, __assign({}, style, { points: model.points, x: model.x, y: model.y })) }));\n    };\n    return DiamondNode;\n}(BaseNode));\nexport { DiamondNode };\nexport default DiamondNode;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { jsx as _jsx } from \"preact/jsx-runtime\";\nimport BaseNode from './BaseNode';\nimport Ellipse from '../shape/Ellipse';\nvar EllipseNode = /** @class */ (function (_super) {\n    __extends(EllipseNode, _super);\n    function EllipseNode() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EllipseNode.prototype.getShape = function () {\n        var model = this.props.model;\n        var style = model.getNodeStyle();\n        return (_jsx(Ellipse, __assign({}, style, { x: model.x, y: model.y, rx: model.rx, ry: model.ry })));\n    };\n    return EllipseNode;\n}(BaseNode));\nexport { EllipseNode };\nexport default EllipseNode;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { jsx as _jsx } from \"preact/jsx-runtime\";\nimport Rect from '../shape/Rect';\nimport BaseNode from './BaseNode';\nvar TextNode = /** @class */ (function (_super) {\n    __extends(TextNode, _super);\n    function TextNode() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TextNode.prototype.getBackground = function () {\n        var model = this.props.model;\n        var style = model.getTextStyle();\n        // /2 * fontsize + 2\n        //   * fontsize + 2\n        // FIX: #1067\n        var width = model.width, height = model.height, x = model.x, y = model.y;\n        var rectAttr = __assign(__assign({}, style.background), { x: x, y: y, width: width, height: height });\n        return _jsx(Rect, __assign({}, rectAttr));\n    };\n    TextNode.prototype.getResizeControl = function () {\n        return null;\n    };\n    TextNode.prototype.getShape = function () {\n        return _jsx(\"g\", { children: this.getBackground() });\n    };\n    return TextNode;\n}(BaseNode));\nexport { TextNode };\nexport default TextNode;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { jsx as _jsx } from \"preact/jsx-runtime\";\nimport { createRef } from 'preact/compat';\nimport BaseNode from './BaseNode';\nvar HtmlNode = /** @class */ (function (_super) {\n    __extends(HtmlNode, _super);\n    function HtmlNode() {\n        var _this = _super.apply(this, __spreadArray([], __read(arguments), false)) || this;\n        _this.ref = createRef();\n        return _this;\n    }\n    Object.defineProperty(HtmlNode.prototype, \"rootEl\", {\n        get: function () {\n            return this.ref.current;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * @overridable \n     * HTML\n     * @param {HTMLElement} rootEl HTMLdom\n     * @example\n     * class CustomHtmlNode extends HtmlNode {\n     *   setHtml(rootEl) {\n     *     const input = document.createElement('input');\n     *     rootEl.appendChild(input)\n     *   }\n     * }\n     */\n    HtmlNode.prototype.setHtml = function (rootEl) {\n        rootEl.appendChild(document.createElement('div'));\n    };\n    // TODO: 1. 2. \n    HtmlNode.prototype.confirmUpdate = function (rootEl) {\n        this.setHtml(rootEl);\n    };\n    /**\n     * @overridable \n     * reactshouldComponentUpdaterender.\n     * setHtmlproperties\n     * x,ysetHtml.\n     */\n    HtmlNode.prototype.shouldUpdate = function () {\n        if (this.preProperties && this.preProperties === this.currentProperties) {\n            return false;\n        }\n        this.preProperties = this.currentProperties;\n        return true;\n    };\n    HtmlNode.prototype.componentDidMount = function () {\n        // console.log('HtmlNode --->>> componentDidMount - ')\n        if (this.shouldUpdate() && this.rootEl) {\n            this.setHtml(this.rootEl);\n        }\n    };\n    HtmlNode.prototype.componentDidUpdate = function () {\n        // console.log('HtmlNode --->>> componentDidUpdate - ')\n        // DONE:  componentDidMount  componentDidUpdate  React \n        //  HTML  setHtml  confirmUpdate \n        if (this.shouldUpdate() && this.rootEl) {\n            this.confirmUpdate(this.rootEl);\n        }\n    };\n    HtmlNode.prototype.componentWillUnmount = function () {\n        _super.prototype.componentWillUnmount.call(this);\n        this.rootEl.innerHTML = '';\n    };\n    HtmlNode.prototype.getShape = function () {\n        var model = this.props.model;\n        var x = model.x, y = model.y, height = model.height, width = model.width;\n        var style = model.getNodeStyle();\n        this.currentProperties = JSON.stringify(model.properties);\n        return (_jsx(\"foreignObject\", __assign({}, style, { x: x - width / 2, y: y - height / 2, width: width, height: height, ref: this.ref })));\n    };\n    return HtmlNode;\n}(BaseNode));\nexport { HtmlNode };\nexport default HtmlNode;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { jsx as _jsx } from \"preact/jsx-runtime\";\nimport { Component } from 'preact/compat';\nimport { StepDrag, formatAnchorConnectValidateData, targetNodeInfo, } from '../../util';\nimport { ElementState, EventType, ModelType } from '../../constant';\nexport var AdjustType;\n(function (AdjustType) {\n    AdjustType[\"SOURCE\"] = \"SOURCE\";\n    AdjustType[\"TARGET\"] = \"TARGET\";\n})(AdjustType || (AdjustType = {}));\nvar AdjustPoint = /** @class */ (function (_super) {\n    __extends(AdjustPoint, _super);\n    function AdjustPoint(props) {\n        var _this = _super.call(this) || this;\n        _this.handleMouseDown = function (ev) {\n            if (_this.stepDrag) {\n                _this.stepDrag.handleMouseDown(ev);\n            }\n        };\n        _this.onDragStart = function () {\n            var _a = _this.props, x = _a.x, y = _a.y, edgeModel = _a.edgeModel;\n            var startPoint = edgeModel.startPoint, endPoint = edgeModel.endPoint, pointsList = edgeModel.pointsList;\n            // \n            _this.oldEdge = {\n                startPoint: startPoint,\n                endPoint: endPoint,\n                pointsList: pointsList,\n            };\n            _this.setState({\n                endX: x,\n                endY: y,\n                dragging: true,\n            });\n            // AdjustPointedgeModel.isHitable(https://github.com/didi/LogicFlow/issues/974)\n            // edgeModel.isHitable = false;\n        };\n        _this.onDragging = function (_a) {\n            var deltaX = _a.deltaX, deltaY = _a.deltaY;\n            var _b = _this.state, endX = _b.endX, endY = _b.endY;\n            var _c = _this.props, graphModel = _c.graphModel, type = _c.type;\n            var transformModel = graphModel.transformModel, editConfigModel = graphModel.editConfigModel;\n            var _d = __read(transformModel.moveCanvasPointByHtml([endX, endY], deltaX, deltaY), 2), x = _d[0], y = _d[1];\n            _this.setState({\n                endX: x,\n                endY: y,\n                dragging: true,\n            });\n            // \n            var edgeModel = _this.props.edgeModel;\n            var info = targetNodeInfo({\n                x: endX,\n                y: endY,\n            }, graphModel);\n            // \n            if (info && info.node && _this.isAllowAdjust(info).pass) {\n                var startPoint = edgeModel.startPoint, endPoint = edgeModel.endPoint, sourceNode = edgeModel.sourceNode, targetNode = edgeModel.targetNode;\n                var params = type === AdjustType.SOURCE\n                    ? {\n                        startPoint: {\n                            x: info.anchor.x,\n                            y: info.anchor.y,\n                        },\n                        endPoint: {\n                            x: endPoint.x,\n                            y: endPoint.y,\n                        },\n                        sourceNode: info.node,\n                        targetNode: targetNode,\n                    }\n                    : {\n                        startPoint: {\n                            x: startPoint.x,\n                            y: startPoint.y,\n                        },\n                        endPoint: {\n                            x: info.anchor.x,\n                            y: info.anchor.y,\n                        },\n                        sourceNode: sourceNode,\n                        targetNode: info.node,\n                    };\n                edgeModel.updateAfterAdjustStartAndEnd(params);\n            }\n            else {\n                // \n                type === AdjustType.SOURCE\n                    ? edgeModel.updateStartPoint({ x: x, y: y })\n                    : edgeModel.updateEndPoint({ x: x, y: y });\n            }\n            if (edgeModel.text.value && editConfigModel.adjustEdge) {\n                edgeModel.setText(Object.assign({}, edgeModel.text, edgeModel.textPosition));\n            }\n        };\n        _this.onDragEnd = function (_a) {\n            var _b, _c, _d;\n            var event = _a.event;\n            try {\n                // \n                _this.setState({\n                    dragging: false,\n                });\n                var _e = _this.props, graphModel = _e.graphModel, edgeModel = _e.edgeModel, type = _e.type;\n                // AdjustPointedgeModel.isHitable(https://github.com/didi/LogicFlow/issues/974)\n                // edgeModel.isHitable = true;\n                var _f = _this.state, endX = _f.endX, endY = _f.endY, dragging = _f.dragging;\n                var info = targetNodeInfo({\n                    x: endX,\n                    y: endY,\n                }, graphModel);\n                // dragging\n                if (!dragging)\n                    return;\n                // \n                var needRecoveryEdge = false;\n                var createEdgeInfo = void 0;\n                if (info && info.node) {\n                    var _g = _this.isAllowAdjust(info), pass = _g.pass, msg = _g.msg, newTargetNode = _g.newTargetNode;\n                    if (pass) {\n                        var _h = edgeModel.getData(), text = _h.text, _j = _h.sourceAnchorId, sourceAnchorId = _j === void 0 ? '' : _j, _k = _h.targetAnchorId, targetAnchorId = _k === void 0 ? '' : _k, rest = __rest(_h, [\"text\", \"sourceAnchorId\", \"targetAnchorId\"]);\n                        createEdgeInfo = __assign(__assign({ sourceAnchorId: sourceAnchorId, targetAnchorId: targetAnchorId }, rest), { text: (text === null || text === void 0 ? void 0 : text.value) || '' });\n                        // \n                        if (type === AdjustType.SOURCE) {\n                            var sourceNode = graphModel.getNodeModelById(info.node.id);\n                            var targetNode = graphModel.getNodeModelById(edgeModel.targetNodeId);\n                            var edgeInfo = (_b = graphModel.edgeGenerator) === null || _b === void 0 ? void 0 : _b.call(graphModel, sourceNode === null || sourceNode === void 0 ? void 0 : sourceNode.getData(), targetNode === null || targetNode === void 0 ? void 0 : targetNode.getData(), createEdgeInfo);\n                            createEdgeInfo = __assign(__assign({}, edgeInfo), { sourceNodeId: info.node.id, sourceAnchorId: info.anchor.id, startPoint: {\n                                    x: info.anchor.x,\n                                    y: info.anchor.y,\n                                }, targetNodeId: edgeModel.targetNodeId, endPoint: __assign({}, edgeModel.endPoint) });\n                            // \n                            if (edgeModel.sourceNodeId === info.node.id &&\n                                edgeModel.sourceAnchorId === info.anchor.id) {\n                                needRecoveryEdge = true;\n                            }\n                        }\n                        else if (type === AdjustType.TARGET) {\n                            var sourceNode = graphModel.getNodeModelById(edgeModel.sourceNodeId);\n                            var targetNode = graphModel.getNodeModelById(info.node.id);\n                            var edgeInfo = (_c = graphModel.edgeGenerator) === null || _c === void 0 ? void 0 : _c.call(graphModel, sourceNode === null || sourceNode === void 0 ? void 0 : sourceNode.getData(), targetNode === null || targetNode === void 0 ? void 0 : targetNode.getData(), createEdgeInfo);\n                            createEdgeInfo = __assign(__assign({}, edgeInfo), { sourceNodeId: edgeModel.sourceNodeId, startPoint: __assign({}, edgeModel.startPoint), targetNodeId: info.node.id, targetAnchorId: info.anchor.id, endPoint: {\n                                    x: info.anchor.x,\n                                    y: info.anchor.y,\n                                } });\n                            // \n                            if (edgeModel.targetNodeId === info.node.id &&\n                                edgeModel.targetAnchorId === info.anchor.id) {\n                                needRecoveryEdge = true;\n                            }\n                        }\n                    }\n                    else {\n                        // CONNECTION_NOT_ALLOWED\n                        needRecoveryEdge = true;\n                        var nodeData = newTargetNode.getData();\n                        graphModel.eventCenter.emit(EventType.CONNECTION_NOT_ALLOWED, {\n                            data: nodeData,\n                            msg: msg,\n                        });\n                    }\n                }\n                else {\n                    // \n                    needRecoveryEdge = true;\n                }\n                if (!needRecoveryEdge) {\n                    // idid\n                    // \n                    var oldEdgeData = edgeModel.getData();\n                    graphModel.deleteEdgeById(edgeModel.id);\n                    // \n                    var edge = graphModel.addEdge(__assign({}, createEdgeInfo));\n                    // \n                    graphModel.eventCenter.emit(EventType.EDGE_EXCHANGE_NODE, {\n                        data: {\n                            newEdge: edge.getData(),\n                            oldEdge: oldEdgeData,\n                        },\n                    });\n                }\n                else {\n                    // \n                    _this.recoveryEdge();\n                }\n                (_d = _this.preTargetNode) === null || _d === void 0 ? void 0 : _d.setElementState(ElementState.DEFAULT);\n            }\n            finally {\n                var graphModel = _this.props.graphModel;\n                graphModel.eventCenter.emit(EventType.ADJUST_POINT_DRAGEND, {\n                    e: event,\n                    data: _this.stepDragData,\n                });\n            }\n        };\n        // \n        _this.recoveryEdge = function () {\n            var edgeModel = _this.props.edgeModel;\n            var _a = _this.oldEdge, startPoint = _a.startPoint, endPoint = _a.endPoint, pointsList = _a.pointsList;\n            edgeModel.updateStartPoint(startPoint);\n            edgeModel.updateEndPoint(endPoint);\n            // pointsList\n            if (edgeModel.modelType !== ModelType.LINE_EDGE) {\n                edgeModel.pointsList = pointsList !== null && pointsList !== void 0 ? pointsList : [];\n                edgeModel.initPoints();\n            }\n        };\n        //  \n        // r\n        _this.getAdjustPointStyle = function () {\n            var theme = _this.props.graphModel.theme;\n            var edgeAdjust = theme.edgeAdjust;\n            return edgeAdjust;\n        };\n        _this.state = {\n            dragging: false,\n            endX: 0,\n            endY: 0,\n        };\n        _this.targetRuleResults = new Map();\n        _this.sourceRuleResults = new Map();\n        var type = props.type, edgeModel = props.edgeModel, graphModel = props.graphModel;\n        var eventCenter = graphModel.eventCenter;\n        _this.stepDragData = {\n            type: type,\n            edgeData: edgeModel.getData(),\n        };\n        _this.stepDrag = new StepDrag({\n            onDragStart: _this.onDragStart,\n            onDragging: _this.onDragging,\n            onDragEnd: _this.onDragEnd,\n            eventType: 'ADJUST_POINT',\n            isStopPropagation: false,\n            eventCenter: eventCenter,\n            data: _this.stepDragData,\n        });\n        return _this;\n    }\n    AdjustPoint.prototype.isAllowAdjust = function (info) {\n        var _a = this.props, _b = _a.edgeModel, id = _b.id, sourceNode = _b.sourceNode, targetNode = _b.targetNode, sourceAnchorId = _b.sourceAnchorId, targetAnchorId = _b.targetAnchorId, type = _a.type;\n        // const newTargetNode = info.node;\n        var newSourceNode;\n        var newTargetNode;\n        var newSourceAnchor;\n        var newTargetAnchor;\n        // \n        if (type === AdjustType.SOURCE) {\n            newSourceNode = info.node;\n            newTargetNode = targetNode;\n            newSourceAnchor = info.anchor;\n            newTargetAnchor = targetNode.getAnchorInfo(targetAnchorId);\n        }\n        else {\n            newSourceNode = sourceNode;\n            newTargetNode = info.node;\n            newTargetAnchor = info.anchor;\n            newSourceAnchor = sourceNode.getAnchorInfo(sourceAnchorId);\n        }\n        // \n        if (this.preTargetNode && this.preTargetNode !== info.node) {\n            this.preTargetNode.setElementState(ElementState.DEFAULT);\n        }\n        this.preTargetNode = info.node;\n        // #500 , , \n        if (newTargetAnchor.id === newSourceAnchor.id) {\n            return {\n                pass: false,\n                msg: '',\n                newTargetNode: newTargetNode,\n            };\n        }\n        var targetInfoId = \"\".concat(newSourceNode.id, \"_\").concat(newTargetNode.id, \"_\").concat(newSourceAnchor.id, \"_\").concat(newTargetAnchor.id);\n        // target, \n        if (!this.targetRuleResults.has(targetInfoId)) {\n            var sourceRuleResult = newSourceNode.isAllowConnectedAsSource(newTargetNode, newSourceAnchor, newTargetAnchor, id);\n            var targetRuleResult = newTargetNode.isAllowConnectedAsTarget(newSourceNode, newSourceAnchor, newTargetAnchor, id);\n            this.sourceRuleResults.set(targetInfoId, formatAnchorConnectValidateData(sourceRuleResult));\n            this.targetRuleResults.set(targetInfoId, formatAnchorConnectValidateData(targetRuleResult));\n        }\n        var _c = this.sourceRuleResults.get(targetInfoId), isSourcePass = _c.isAllPass, sourceMsg = _c.msg;\n        var _d = this.targetRuleResults.get(targetInfoId), isTargetPass = _d.isAllPass, targetMsg = _d.msg;\n        // \n        var state = isSourcePass && isTargetPass\n            ? ElementState.ALLOW_CONNECT\n            : ElementState.NOT_ALLOW_CONNECT;\n        if (type === AdjustType.SOURCE) {\n            newSourceNode.setElementState(state);\n        }\n        else {\n            newTargetNode.setElementState(state);\n        }\n        return {\n            pass: isSourcePass && isTargetPass,\n            msg: targetMsg || sourceMsg,\n            newTargetNode: newTargetNode,\n        };\n    };\n    AdjustPoint.prototype.render = function () {\n        var _a = this.props, x = _a.x, y = _a.y, getAdjustPointShape = _a.getAdjustPointShape, edgeModel = _a.edgeModel;\n        var dragging = this.state.dragging;\n        return (_jsx(\"g\", { pointerEvents: dragging ? 'none' : '', onPointerDown: this.handleMouseDown, children: !dragging ? getAdjustPointShape(x, y, edgeModel) : '' }));\n    };\n    return AdjustPoint;\n}(Component));\nexport { AdjustPoint };\nexport default AdjustPoint;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { jsx as _jsx } from \"preact/jsx-runtime\";\nimport { Component } from 'preact/compat';\nimport { Path } from '../shape';\nimport { getVerticalPointOfLine } from '../../algorithm';\nvar Arrow = /** @class */ (function (_super) {\n    __extends(Arrow, _super);\n    function Arrow() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Arrow.prototype.getArrowAttributes = function () {\n        var _a = this.props, arrowInfo = _a.arrowInfo, style = _a.style;\n        var start = arrowInfo.start, end = arrowInfo.end;\n        var config = {\n            start: start,\n            end: end,\n            offset: style.offset,\n            verticalLength: style.verticalLength,\n            type: 'end',\n        };\n        var _b = getVerticalPointOfLine(config), leftX = _b.leftX, leftY = _b.leftY, rightX = _b.rightX, rightY = _b.rightY;\n        return __assign({ d: \"M\".concat(leftX, \" \").concat(leftY, \" L\").concat(end.x, \" \").concat(end.y, \" L\").concat(rightX, \" \").concat(rightY, \" z\") }, style);\n    };\n    Arrow.prototype.getShape = function () {\n        var _a = this.getArrowAttributes(), d = _a.d, strokeWidth = _a.strokeWidth, stroke = _a.stroke, fill = _a.fill;\n        return _jsx(Path, { d: d, fill: fill, strokeWidth: strokeWidth, stroke: stroke });\n    };\n    Arrow.prototype.render = function () {\n        return _jsx(\"g\", { className: \"lf-arrow\", children: this.getShape() });\n    };\n    return Arrow;\n}(Component));\nexport { Arrow };\nexport default Arrow;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { Component, createRef } from 'preact/compat';\nimport { Circle } from '../shape';\nimport { LineText } from '../text';\nimport { ElementState, EventType, ModelType, TextMode } from '../../constant';\nimport { isMultipleSelect, getClosestPointOfPolyline, degrees, getThetaOfVector, } from '../../util';\nimport AdjustPoint, { AdjustType } from './AdjustPoint';\nvar BaseEdge = /** @class */ (function (_super) {\n    __extends(BaseEdge, _super);\n    function BaseEdge() {\n        var _this = _super.call(this) || this;\n        _this.textRef = createRef();\n        /**\n         * hovermodelisHovered\n         */\n        _this.handleHover = function (hovered, ev) {\n            var _a = _this.props, model = _a.model, eventCenter = _a.graphModel.eventCenter;\n            model.setHovered(hovered);\n            var eventName = hovered\n                ? EventType.EDGE_MOUSEENTER\n                : EventType.EDGE_MOUSELEAVE;\n            var nodeData = model.getData();\n            eventCenter.emit(eventName, {\n                data: nodeData,\n                e: ev,\n            });\n        };\n        /**\n         * hovermodelisHovered\n         */\n        _this.setHoverOn = function (ev) {\n            // ! hover, onMouseOver + onMouseEnter\n            var isHovered = _this.props.model.isHovered;\n            if (isHovered)\n                return;\n            _this.textRef && _this.textRef.current && _this.textRef.current.setHoverOn();\n            _this.handleHover(true, ev);\n        };\n        /**\n         * hovermodelisHovered\n         */\n        _this.setHoverOff = function (ev) {\n            var isHovered = _this.props.model.isHovered;\n            if (!isHovered)\n                return;\n            _this.textRef && _this.textRef.current && _this.textRef.current.setHoverOff();\n            _this.handleHover(false, ev);\n        };\n        /**\n         * contextmenuedge:contextmenu\n         */\n        _this.handleContextMenu = function (ev) {\n            ev.preventDefault();\n            // (mouseup)\n            _this.contextMenuTime = new Date().getTime();\n            if (_this.clickTimer) {\n                clearTimeout(_this.clickTimer);\n            }\n            var _a = _this.props, model = _a.model, graphModel = _a.graphModel;\n            var editConfigModel = graphModel.editConfigModel;\n            var position = graphModel.getPointByClient({\n                x: ev.clientX,\n                y: ev.clientY,\n            });\n            graphModel.setElementStateById(model.id, ElementState.SHOW_MENU, position.domOverlayPosition);\n            // \n            if (!editConfigModel.isSilentMode) {\n                _this.toFront();\n            }\n            if (!model.isSelected) {\n                graphModel.selectEdgeById(model.id);\n            }\n            // \n            var edgeData = model === null || model === void 0 ? void 0 : model.getData();\n            graphModel.eventCenter.emit(EventType.EDGE_CONTEXTMENU, {\n                data: edgeData,\n                e: ev,\n                position: position,\n            });\n        };\n        /**\n         * \n         */\n        _this.handleMouseDown = function (e) {\n            e.stopPropagation();\n            _this.startTime = new Date().getTime();\n            if (_this.longPressTimer) {\n                clearTimeout(_this.longPressTimer);\n            }\n            if (e.pointerType === 'touch') {\n                _this.longPressTimer = window.setTimeout(function () {\n                    if (!_this.props.model.isDragging) {\n                        _this.handleContextMenu(e);\n                    }\n                }, 500);\n            }\n        };\n        _this.handleMouseUp = function () {\n            var model = _this.props.model;\n            _this.mouseUpDrag = model.isDragging;\n            if (_this.longPressTimer) {\n                clearTimeout(_this.longPressTimer);\n                _this.longPressTimer = undefined;\n            }\n        };\n        /**\n         * \n         */\n        _this.handleClick = function (e) {\n            if (!_this.startTime)\n                return;\n            if (_this.mouseUpDrag)\n                return; // click\n            var isRightClick = e.button === 2;\n            if (isRightClick)\n                return;\n            //  IE 11\n            var isDoubleClick = e.detail === 2;\n            var _a = _this.props, model = _a.model, graphModel = _a.graphModel;\n            var edgeData = model === null || model === void 0 ? void 0 : model.getData();\n            var position = graphModel.getPointByClient({\n                x: e.clientX,\n                y: e.clientY,\n            });\n            if (isDoubleClick) {\n                var editConfigModel_1 = graphModel.editConfigModel, textEditElement = graphModel.textEditElement;\n                var id = model.id, text = model.text, modelType = model.modelType;\n                // \n                if (textEditElement && textEditElement.id === id) {\n                    graphModel.setElementStateById(id, ElementState.DEFAULT);\n                }\n                // \n                if (editConfigModel_1.edgeTextEdit && text.editable) {\n                    model.setSelected(false);\n                    graphModel.setElementStateById(id, ElementState.TEXT_EDIT);\n                }\n                if (modelType === ModelType.POLYLINE_EDGE) {\n                    var polylineEdgeModel = model;\n                    var _b = graphModel.getPointByClient({\n                        x: e.x,\n                        y: e.y,\n                    }).canvasOverlayPosition, x = _b.x, y = _b.y;\n                    polylineEdgeModel.dbClickPosition = getClosestPointOfPolyline({\n                        x: x,\n                        y: y,\n                    }, polylineEdgeModel.points);\n                }\n                graphModel.eventCenter.emit(EventType.EDGE_DBCLICK, {\n                    data: edgeData,\n                    e: e,\n                    position: position,\n                });\n            }\n            else {\n                // \n                // mouseup\n                // \n                graphModel.eventCenter.emit(EventType.ELEMENT_CLICK, {\n                    data: edgeData,\n                    e: e,\n                    position: position,\n                });\n                graphModel.eventCenter.emit(EventType.EDGE_CLICK, {\n                    data: edgeData,\n                    e: e,\n                    position: position,\n                });\n            }\n            var editConfigModel = graphModel.editConfigModel;\n            graphModel.selectEdgeById(model.id, isMultipleSelect(e, editConfigModel));\n            // \n            if (!editConfigModel.isSilentMode) {\n                _this.toFront();\n            }\n        };\n        _this.handleFocus = function () {\n            var _a = _this.props, model = _a.model, graphModel = _a.graphModel;\n            graphModel.eventCenter.emit(EventType.EDGE_FOCUS, {\n                data: model.getData(),\n            });\n        };\n        _this.handleBlur = function () {\n            var _a = _this.props, model = _a.model, graphModel = _a.graphModel;\n            graphModel.eventCenter.emit(EventType.EDGE_BLUR, {\n                data: model.getData(),\n            });\n        };\n        return _this;\n    }\n    /**\n     * getEdge\n     */\n    BaseEdge.prototype.getShape = function () {\n        return _jsx(\"g\", { children: this.getEdge() });\n    };\n    /**\n     * @deprecated model.getTextStyle\n     */\n    BaseEdge.prototype.getTextStyle = function () { };\n    /**\n     * @overridable DOM\n     */\n    BaseEdge.prototype.getText = function () {\n        var _a;\n        var _b = this.props, model = _b.model, graphModel = _b.graphModel;\n        var editConfigModel = graphModel.editConfigModel;\n        //   TEXT \n        if (editConfigModel.edgeTextMode !== TextMode.TEXT)\n            return null;\n        // \n        if (model.state === ElementState.TEXT_EDIT)\n            return null;\n        if (model.text) {\n            var draggable = false;\n            if (editConfigModel.edgeTextDraggable && model.text.draggable) {\n                draggable = true;\n            }\n            return (_jsx(LineText, { ref: this.textRef, editable: editConfigModel.edgeTextEdit && ((_a = model.text.editable) !== null && _a !== void 0 ? _a : true), model: model, graphModel: graphModel, draggable: draggable }));\n        }\n        return null;\n    };\n    /**\n     * @deprecated\n     */\n    BaseEdge.prototype.getArrowInfo = function () {\n        var model = this.props.model;\n        var startPoint = model.startPoint, endPoint = model.endPoint, isSelected = model.isSelected;\n        var hover = this.state.hover;\n        return {\n            start: startPoint,\n            end: endPoint,\n            hover: hover,\n            isSelected: isSelected,\n        };\n    };\n    BaseEdge.prototype.getLastTwoPoints = function () {\n        var model = this.props.model;\n        var startPoint = model.startPoint, endPoint = model.endPoint;\n        return [startPoint, endPoint];\n    };\n    /**\n     * @deprecated model.getArrowStyle\n     */\n    BaseEdge.prototype.getArrowStyle = function () {\n        console.error('getArrowStyle is deprecated in 1.2.0, please use model.getArrowStyle');\n        return null;\n    };\n    /**\n     * getStartArrowgetEndArrow\n     */\n    BaseEdge.prototype.getArrow = function () {\n        var model = this.props.model;\n        var id = model.id;\n        var _a = model.getArrowStyle(), _b = _a.refY, refY = _b === void 0 ? 0 : _b, _c = _a.refX, refX = _c === void 0 ? 2 : _c;\n        var _d = __read(this.getLastTwoPoints(), 2), start = _d[0], end = _d[1];\n        var theta = 'auto';\n        //  NaN \n        if (start && end) {\n            var dx = end.x - start.x;\n            var dy = end.y - start.y;\n            // \n            if (dx !== 0 || dy !== 0) {\n                var computed = degrees(getThetaOfVector({\n                    x: dx,\n                    y: dy,\n                    z: 0,\n                }));\n                if (Number.isFinite(computed) && !Number.isNaN(computed)) {\n                    theta = computed;\n                }\n            }\n        }\n        return (_jsx(\"g\", { children: _jsxs(\"defs\", { children: [_jsx(\"marker\", { id: \"marker-start-\".concat(id), refX: -refX, refY: refY, overflow: \"visible\", orient: \"auto\", markerUnits: \"userSpaceOnUse\", children: this.getStartArrow() }), _jsx(\"marker\", { id: \"marker-end-\".concat(id), refX: refX, refY: refY, overflow: \"visible\", orient: theta, markerUnits: \"userSpaceOnUse\", children: this.getEndArrow() })] }) }));\n    };\n    /**\n     * Private helper method to generate arrow path based on type and parameters\n     */\n    BaseEdge.prototype.getArrowPath = function (arrowType, props) {\n        var stroke = props.stroke, _a = props.fill, fill = _a === void 0 ? stroke : _a, strokeWidth = props.strokeWidth, _b = props.offset, offset = _b === void 0 ? 10 : _b, verticalLength = props.verticalLength, strokeLinecap = props.strokeLinecap, strokeLinejoin = props.strokeLinejoin, transform = props.transform;\n        var arrowPath = '';\n        switch (arrowType) {\n            case 'solid':\n                arrowPath = \"M\".concat(-offset / 4, \",0 L\").concat((3 * offset) / 4, \",\").concat(verticalLength, \" L\").concat((3 * offset) / 4, \",-\").concat(verticalLength, \" Z\");\n                break;\n            case 'hollow':\n                arrowPath = \"M\".concat(-offset / 4, \",0 L\").concat((3 * offset) / 4, \",\").concat(verticalLength, \" L\").concat(-offset / 4, \",0 L\").concat((3 * offset) / 4, \",-\").concat(verticalLength, \" L\").concat(-offset / 4, \",0 Z\");\n                break;\n            case 'diamond':\n                arrowPath = \"M\".concat(-offset / 2, \",0 L0,\").concat(verticalLength, \" L\").concat(offset / 2, \",0 L0,-\").concat(verticalLength, \" L\").concat(-offset / 2, \",0 Z\");\n                break;\n            case 'circle':\n                arrowPath = \"M\".concat(-offset / 2, \",0 A\").concat(offset / 4, \",\").concat(offset / 4, \" 0 1,0 \").concat(offset / 2, \",0 A\").concat(offset / 4, \",\").concat(offset / 4, \" 0 1,0 \").concat(-offset / 2, \",0 Z\");\n                break;\n            default:\n                arrowPath = '';\n                break;\n        }\n        return (_jsx(\"path\", { d: arrowPath, stroke: stroke, fill: fill, strokeWidth: strokeWidth, strokeLinecap: strokeLinecap, strokeLinejoin: strokeLinejoin, transform: transform }));\n    };\n    /**\n     * @overridable \n     * @example\n     * getStartArrow() {\n     *  const { model } = this.props;\n     *  const { stroke, strokeWidth, offset, verticalLength } = model.getArrowStyle();\n     *  return (\n     *    h('path', {\n     *      d: ''\n     *    })\n     *  )\n     * }\n     */\n    BaseEdge.prototype.getStartArrow = function () {\n        var model = this.props.model;\n        var _a = model.getArrowStyle(), stroke = _a.stroke, strokeWidth = _a.strokeWidth, offset = _a.offset, verticalLength = _a.verticalLength, _b = _a.startArrowType, startArrowType = _b === void 0 ? 'none' : _b, strokeLinecap = _a.strokeLinecap, strokeLinejoin = _a.strokeLinejoin;\n        return this.getArrowPath(startArrowType, {\n            stroke: stroke,\n            strokeWidth: strokeWidth,\n            offset: offset,\n            verticalLength: verticalLength,\n            strokeLinecap: strokeLinecap,\n            strokeLinejoin: strokeLinejoin,\n        });\n    };\n    /**\n     * @overridable \n     * @example\n     * getEndArrow() {\n     *  const { model } = this.props;\n     *  const { stroke, strokeWidth, offset, verticalLength } = model.getArrowStyle();\n     *  return (\n     *    h('path', {\n     *      d: ''\n     *    })\n     *  )\n     * }\n     */\n    BaseEdge.prototype.getEndArrow = function () {\n        var model = this.props.model;\n        var _a = model.getArrowStyle(), stroke = _a.stroke, strokeWidth = _a.strokeWidth, offset = _a.offset, verticalLength = _a.verticalLength, _b = _a.endArrowType, endArrowType = _b === void 0 ? 'solid' : _b, strokeLinecap = _a.strokeLinecap, strokeLinejoin = _a.strokeLinejoin;\n        return this.getArrowPath(endArrowType, {\n            stroke: stroke,\n            strokeWidth: strokeWidth,\n            offset: offset,\n            verticalLength: verticalLength,\n            strokeLinecap: strokeLinecap,\n            strokeLinejoin: strokeLinejoin,\n            transform: 'rotate(180)',\n        });\n    };\n    /**\n     * @overridable adjustEdgeStartAndEnd\n     * @param x x\n     * @param y y\n     * @param model\n     * @example\n     * getAdjustPointShape(x, y) {\n     *  const { model } = this.props;\n     *  const style = model.getAdjustPointStyle();\n     *  return (\n     *    h('circle', {\n     *      ...style,\n     *     x,\n     *     y\n     *    })\n     *  )\n     * }\n     */\n    BaseEdge.prototype.getAdjustPointShape = function (x, y, model) {\n        var style = model.getAdjustPointStyle();\n        return (_jsx(Circle, __assign({ className: \"lf-edge-adjust-point\" }, style, { x: x, y: y })));\n    };\n    /**\n     * getAdjustPointShape\n     */\n    BaseEdge.prototype.getAdjustPoints = function () {\n        var _a = this.props, model = _a.model, graphModel = _a.graphModel;\n        var _b = graphModel.editConfigModel, adjustEdgeStartAndEnd = _b.adjustEdgeStartAndEnd, adjustEdgeStart = _b.adjustEdgeStart, adjustEdgeEnd = _b.adjustEdgeEnd;\n        var start = model.getAdjustStart();\n        var end = model.getAdjustEnd();\n        return (_jsxs(\"g\", { children: [adjustEdgeStartAndEnd && adjustEdgeStart && (_jsx(AdjustPoint, __assign({ type: AdjustType.SOURCE }, start, { getAdjustPointShape: this.getAdjustPointShape, edgeModel: model, graphModel: graphModel }))), adjustEdgeStartAndEnd && adjustEdgeEnd && (_jsx(AdjustPoint, __assign({ type: AdjustType.TARGET }, end, { getAdjustPointShape: this.getAdjustPointShape, edgeModel: model, graphModel: graphModel })))] }));\n    };\n    /**\n     * @deprecated\n     */\n    BaseEdge.prototype.getAnimation = function () {\n        console.error('getAnimation is deprecated in 1.2.0, please use model.getEdgeAnimationStyle');\n    };\n    /**\n     * @overridable \n     */\n    BaseEdge.prototype.getAppendWidth = function () {\n        return _jsx(\"g\", {});\n    };\n    /**\n     * \n     * getAppendWidth\n     */\n    BaseEdge.prototype.getAppend = function () {\n        return _jsx(\"g\", { className: \"lf-edge-append\", children: this.getAppendWidth() });\n    };\n    /**\n     * @overridable , \n     * @example https://docs.logic-flow.cn/docs/#/zh/guide/basic/edge?id=%e5%9f%ba%e4%ba%8e-react-%e7%bb%84%e4%bb%b6%e8%87%aa%e5%ae%9a%e4%b9%89%e8%be%b9\n     */\n    BaseEdge.prototype.getEdge = function () {\n        return null;\n    };\n    /**\n     * @overridable , \n     */\n    BaseEdge.prototype.toFront = function () {\n        var _a = this.props, graphModel = _a.graphModel, model = _a.model;\n        graphModel.toFront(model.id);\n    };\n    /**\n     * getEdge\n     */\n    BaseEdge.prototype.render = function () {\n        var _a = this.props.model, isSelected = _a.isSelected, isHitable = _a.isHitable, isShowAdjustPoint = _a.isShowAdjustPoint;\n        return (_jsxs(\"g\", { children: [_jsxs(\"g\", { className: [\n                        'lf-edge',\n                        !isHitable && 'pointer-none',\n                        isSelected && 'lf-edge-selected',\n                    ]\n                        .filter(Boolean)\n                        .join(' '), style: {\n                        touchAction: 'none',\n                        WebkitTouchCallout: 'none',\n                    }, onClick: this.handleClick, onContextMenu: this.handleContextMenu, onPointerDown: this.handleMouseDown, onPointerUp: this.handleMouseUp, onPointerCancel: this.handleMouseUp, onMouseOver: this.setHoverOn, onMouseEnter: this.setHoverOn, onMouseLeave: this.setHoverOff, onFocus: this.handleFocus, onBlur: this.handleBlur, children: [this.getShape(), this.getAppend(), this.getText(), this.getArrow()] }), isShowAdjustPoint && isSelected ? this.getAdjustPoints() : ''] }));\n    };\n    BaseEdge.isObserved = false;\n    return BaseEdge;\n}(Component));\nexport { BaseEdge };\nexport default BaseEdge;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { jsx as _jsx } from \"preact/jsx-runtime\";\nimport BaseEdge from './BaseEdge';\nimport { Path } from '../shape';\nimport { getEndTangent } from '../../util';\nvar BezierEdge = /** @class */ (function (_super) {\n    __extends(BezierEdge, _super);\n    function BezierEdge() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * @overridable , \n     * @example https://docs.logic-flow.cn/docs/#/zh/guide/basic/edge?id=%e5%9f%ba%e4%ba%8e-react-%e7%bb%84%e4%bb%b6%e8%87%aa%e5%ae%9a%e4%b9%89%e8%be%b9\n     */\n    BezierEdge.prototype.getEdge = function () {\n        var model = this.props.model;\n        var style = model.getEdgeStyle();\n        var _a = model, path = _a.path, isAnimation = _a.isAnimation, arrowConfig = _a.arrowConfig;\n        var animationStyle = model.getEdgeAnimationStyle();\n        var strokeDasharray = animationStyle.strokeDasharray, stroke = animationStyle.stroke, strokeDashoffset = animationStyle.strokeDashoffset, animationName = animationStyle.animationName, animationDuration = animationStyle.animationDuration, animationIterationCount = animationStyle.animationIterationCount, animationTimingFunction = animationStyle.animationTimingFunction, animationDirection = animationStyle.animationDirection;\n        return (_jsx(Path, __assign({ d: path }, style, arrowConfig, (isAnimation\n            ? {\n                strokeDasharray: strokeDasharray,\n                stroke: stroke,\n                style: {\n                    strokeDashoffset: strokeDashoffset,\n                    animationName: animationName,\n                    animationDuration: animationDuration,\n                    animationIterationCount: animationIterationCount,\n                    animationTimingFunction: animationTimingFunction,\n                    animationDirection: animationDirection,\n                },\n            }\n            : {}))));\n    };\n    /**\n     * @overridable \n     */\n    BezierEdge.prototype.getAppendWidth = function () {\n        var path = this.props.model.path;\n        return _jsx(Path, { d: path, strokeWidth: 10, stroke: \"transparent\", fill: \"none\" });\n    };\n    /**\n     * @deprecated\n     */\n    BezierEdge.prototype.getArrowInfo = function () {\n        var model = this.props.model;\n        var hover = this.state.hover;\n        var isSelected = model.isSelected;\n        var offset = model.getArrowStyle().offset;\n        var points = model.pointsList.map(function (point) { return ({\n            x: point.x,\n            y: point.y,\n        }); });\n        var _a = __read(getEndTangent(points, offset), 2), ePre = _a[0], end = _a[1];\n        var arrowInfo = {\n            start: ePre,\n            end: end,\n            hover: hover,\n            isSelected: isSelected,\n        };\n        return arrowInfo;\n    };\n    BezierEdge.prototype.getLastTwoPoints = function () {\n        var model = this.props.model;\n        var offset = model.getArrowStyle().offset;\n        var points = model.pointsList.map(function (point) { return ({\n            x: point.x,\n            y: point.y,\n        }); });\n        return getEndTangent(points, offset);\n    };\n    return BezierEdge;\n}(BaseEdge));\nexport { BezierEdge };\nexport default BezierEdge;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { jsx as _jsx } from \"preact/jsx-runtime\";\nimport BaseEdge from './BaseEdge';\nimport { Line, Path } from '../shape';\nimport { getAppendAttributes } from '../../util';\nvar LineEdge = /** @class */ (function (_super) {\n    __extends(LineEdge, _super);\n    function LineEdge() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * @overridable , \n     * @example https://docs.logic-flow.cn/docs/#/zh/guide/basic/edge?id=%e5%9f%ba%e4%ba%8e-react-%e7%bb%84%e4%bb%b6%e8%87%aa%e5%ae%9a%e4%b9%89%e8%be%b9\n     */\n    LineEdge.prototype.getEdge = function () {\n        var model = this.props.model;\n        var startPoint = model.startPoint, endPoint = model.endPoint, isAnimation = model.isAnimation, arrowConfig = model.arrowConfig;\n        var style = model.getEdgeStyle();\n        var animationStyle = model.getEdgeAnimationStyle();\n        var strokeDasharray = animationStyle.strokeDasharray, stroke = animationStyle.stroke, strokeDashoffset = animationStyle.strokeDashoffset, animationName = animationStyle.animationName, animationDuration = animationStyle.animationDuration, animationIterationCount = animationStyle.animationIterationCount, animationTimingFunction = animationStyle.animationTimingFunction, animationDirection = animationStyle.animationDirection;\n        return (_jsx(Line, __assign({}, style, { x1: startPoint.x, y1: startPoint.y, x2: endPoint.x, y2: endPoint.y }, arrowConfig, (isAnimation\n            ? {\n                strokeDasharray: strokeDasharray,\n                stroke: stroke,\n                style: {\n                    strokeDashoffset: strokeDashoffset,\n                    animationName: animationName,\n                    animationDuration: animationDuration,\n                    animationIterationCount: animationIterationCount,\n                    animationTimingFunction: animationTimingFunction,\n                    animationDirection: animationDirection,\n                },\n            }\n            : {}))));\n    };\n    /**\n     * @overridable \n     */\n    LineEdge.prototype.getAppendWidth = function () {\n        var model = this.props.model;\n        var startPoint = model.startPoint, endPoint = model.endPoint;\n        var appendInfo = {\n            start: startPoint,\n            end: endPoint,\n        };\n        var _a = getAppendAttributes(appendInfo), d = _a.d, strokeWidth = _a.strokeWidth, fill = _a.fill, strokeDasharray = _a.strokeDasharray, stroke = _a.stroke;\n        return (_jsx(Path, { d: d, fill: fill, strokeWidth: strokeWidth, stroke: stroke, strokeDasharray: strokeDasharray }));\n    };\n    return LineEdge;\n}(BaseEdge));\nexport { LineEdge };\nexport default LineEdge;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { jsx as _jsx } from \"preact/jsx-runtime\";\nimport BaseEdge from './BaseEdge';\nimport { Polyline, Path } from '../shape';\nimport { EventType, SegmentDirection } from '../../constant';\nimport { StepDrag, points2PointsList } from '../../util';\nimport { getVerticalPointOfLine } from '../../algorithm';\nvar PolylineEdge = /** @class */ (function (_super) {\n    __extends(PolylineEdge, _super);\n    function PolylineEdge() {\n        var _this = _super.call(this) || this;\n        /**\n         * \n         */\n        _this.onDragStart = function () {\n            var polylineModel = _this.props.model;\n            polylineModel.dragAppendStart();\n            _this.isShowAdjustPointTemp = polylineModel.isShowAdjustPoint;\n            polylineModel.isShowAdjustPoint = false;\n        };\n        /**\n         * \n         */\n        _this.onDragging = function (_a) {\n            var deltaX = _a.deltaX, deltaY = _a.deltaY;\n            var _b = _this.props, model = _b.model, graphModel = _b.graphModel;\n            _this.isDragging = true;\n            var transformModel = graphModel.transformModel, editConfigModel = graphModel.editConfigModel;\n            var _c = __read(transformModel.fixDeltaXY(deltaX, deltaY), 2), curDeltaX = _c[0], curDeltaY = _c[1];\n            var polylineModel = model;\n            // \n            // 1dragAppendSimple\n            // 2dragAppend\n            var adjustEdgeMiddle = editConfigModel.adjustEdgeMiddle;\n            if (adjustEdgeMiddle) {\n                _this.appendInfo = polylineModel.dragAppendSimple(_this.appendInfo, {\n                    x: curDeltaX,\n                    y: curDeltaY,\n                });\n            }\n            else {\n                _this.appendInfo = polylineModel.dragAppend(_this.appendInfo, {\n                    x: curDeltaX,\n                    y: curDeltaY,\n                });\n            }\n        };\n        /**\n         * \n         */\n        _this.onDragEnd = function () {\n            var _a;\n            var _b = _this.props, model = _b.model, eventCenter = _b.graphModel.eventCenter;\n            var polylineModel = model;\n            polylineModel.dragAppendEnd();\n            _this.isDragging = false;\n            polylineModel.isShowAdjustPoint = (_a = _this.isShowAdjustPointTemp) !== null && _a !== void 0 ? _a : false;\n            // \n            _this.appendInfo = undefined;\n            // \n            eventCenter.emit(EventType.EDGE_ADJUST, { data: polylineModel.getData() });\n        };\n        /**\n         * \n         */\n        _this.beforeDragStart = function (e, appendInfo) {\n            // \n            if (appendInfo.draggable) {\n                _this.drag.handleMouseDown(e);\n            }\n            // \n            _this.appendInfo = appendInfo;\n        };\n        _this.drag = new StepDrag({\n            onDragStart: _this.onDragStart,\n            onDragging: _this.onDragging,\n            onDragEnd: _this.onDragEnd,\n            isStopPropagation: false,\n        });\n        return _this;\n    }\n    /**\n     * @overridable , \n     * @example https://docs.logic-flow.cn/docs/#/zh/guide/basic/edge?id=%e5%9f%ba%e4%ba%8e-react-%e7%bb%84%e4%bb%b6%e8%87%aa%e5%ae%9a%e4%b9%89%e8%be%b9\n     */\n    PolylineEdge.prototype.getEdge = function () {\n        var model = this.props.model;\n        var points = model.points, isAnimation = model.isAnimation, arrowConfig = model.arrowConfig;\n        var style = model.getEdgeStyle();\n        var animationStyle = model.getEdgeAnimationStyle();\n        var strokeDasharray = animationStyle.strokeDasharray, stroke = animationStyle.stroke, strokeDashoffset = animationStyle.strokeDashoffset, animationName = animationStyle.animationName, animationDuration = animationStyle.animationDuration, animationIterationCount = animationStyle.animationIterationCount, animationTimingFunction = animationStyle.animationTimingFunction, animationDirection = animationStyle.animationDirection;\n        return (_jsx(Polyline, __assign({ points: points }, style, arrowConfig, (isAnimation\n            ? {\n                strokeDasharray: strokeDasharray,\n                stroke: stroke,\n                style: {\n                    strokeDashoffset: strokeDashoffset,\n                    animationName: animationName,\n                    animationDuration: animationDuration,\n                    animationIterationCount: animationIterationCount,\n                    animationTimingFunction: animationTimingFunction,\n                    animationDirection: animationDirection,\n                },\n            }\n            : {}))));\n    };\n    /**\n     * @deprecated\n     */\n    PolylineEdge.prototype.getArrowInfo = function () {\n        var model = this.props.model;\n        var points = model.points, isSelected = model.isSelected;\n        var hover = this.state.hover;\n        var currentPositionList = points2PointsList(points);\n        var startPoint = currentPositionList[0];\n        var endPoint = currentPositionList[0];\n        // \n        if (currentPositionList.length >= 2) {\n            startPoint = currentPositionList[currentPositionList.length - 2];\n            endPoint = currentPositionList[currentPositionList.length - 1];\n        }\n        return {\n            start: startPoint,\n            end: endPoint,\n            hover: hover,\n            isSelected: isSelected,\n        };\n    };\n    PolylineEdge.prototype.getLastTwoPoints = function () {\n        var model = this.props.model;\n        var points = model.points;\n        var currentPositionList = points2PointsList(points);\n        var startPoint = currentPositionList[0];\n        var endPoint = currentPositionList[0];\n        // \n        if (currentPositionList.length >= 2) {\n            startPoint = currentPositionList[currentPositionList.length - 2];\n            endPoint = currentPositionList[currentPositionList.length - 1];\n        }\n        return [startPoint, endPoint];\n    };\n    PolylineEdge.prototype.getAppendAttributes = function (appendInfo) {\n        var start = appendInfo.start, end = appendInfo.end;\n        var d;\n        if (start.x === end.x && start.y === end.y) {\n            // append\n            d = '';\n        }\n        else {\n            var config = {\n                start: start,\n                end: end,\n                offset: 10,\n                verticalLength: 5,\n            };\n            var startPosition = getVerticalPointOfLine(__assign(__assign({}, config), { type: 'start' }));\n            var endPosition = getVerticalPointOfLine(__assign(__assign({}, config), { type: 'end' }));\n            d = \"M\".concat(startPosition.leftX, \" \").concat(startPosition.leftY, \"\\n      L\").concat(startPosition.rightX, \" \").concat(startPosition.rightY, \"\\n      L\").concat(endPosition.rightX, \" \").concat(endPosition.rightY, \"\\n      L\").concat(endPosition.leftX, \" \").concat(endPosition.leftY, \" z\");\n        }\n        return {\n            d: d,\n            fill: 'transparent',\n            stroke: 'transparent',\n            strokeWidth: 1,\n            strokeDasharray: '4, 4',\n        };\n    };\n    PolylineEdge.prototype.getAppendShape = function (appendInfo) {\n        var _a = this.getAppendAttributes(appendInfo), d = _a.d, strokeWidth = _a.strokeWidth, fill = _a.fill, strokeDasharray = _a.strokeDasharray, stroke = _a.stroke;\n        return (_jsx(Path, { d: d, fill: fill, strokeWidth: strokeWidth, stroke: stroke, strokeDasharray: strokeDasharray }));\n    };\n    /**\n     * @overridable \n     */\n    PolylineEdge.prototype.getAppendWidth = function () {\n        var _this = this;\n        var _a = this.props, model = _a.model, graphModel = _a.graphModel;\n        var pointsList = model.pointsList, draggable = model.draggable;\n        var LineAppendList = [];\n        var pointsLen = pointsList.length;\n        var _loop_1 = function (i) {\n            var className = 'lf-polyline-append';\n            var appendInfo = {\n                start: {\n                    x: pointsList[i].x,\n                    y: pointsList[i].y,\n                },\n                end: {\n                    x: pointsList[i + 1].x,\n                    y: pointsList[i + 1].y,\n                },\n                startIndex: i,\n                endIndex: i + 1,\n                direction: SegmentDirection.HORIZONTAL,\n                draggable: true,\n            };\n            var append = (_jsx(\"g\", { className: className, children: this_1.getAppendShape(appendInfo) }));\n            var editConfigModel = graphModel.editConfigModel;\n            var adjustEdge = editConfigModel.adjustEdge, adjustEdgeMiddle = editConfigModel.adjustEdgeMiddle;\n            if (adjustEdge && draggable) {\n                var startIndex = appendInfo.startIndex, endIndex = appendInfo.endIndex;\n                // appendInfodragAblefalse\n                var dragDisable = adjustEdgeMiddle && (startIndex === 0 || endIndex === pointsLen - 1);\n                appendInfo.draggable = !dragDisable;\n                if (appendInfo.start.x === appendInfo.end.x) {\n                    // \n                    if (appendInfo.draggable) {\n                        className += '-ew-resize';\n                    }\n                    appendInfo.direction = SegmentDirection.VERTICAL;\n                }\n                else if (appendInfo.start.y === appendInfo.end.y) {\n                    // \n                    if (appendInfo.draggable) {\n                        className += '-ns-resize';\n                    }\n                    appendInfo.direction = SegmentDirection.HORIZONTAL;\n                }\n                append = (_jsx(\"g\", { className: this_1.isDragging ? 'lf-dragging' : 'lf-drag-able', onPointerDown: function (e) { return _this.beforeDragStart(e, appendInfo); }, children: _jsx(\"g\", { className: className, children: this_1.getAppendShape(appendInfo) }) }));\n            }\n            LineAppendList.push(append);\n        };\n        var this_1 = this;\n        for (var i = 0; i < pointsLen - 1; i++) {\n            _loop_1(i);\n        }\n        return _jsx(\"g\", { children: LineAppendList });\n    };\n    return PolylineEdge;\n}(BaseEdge));\nexport { PolylineEdge };\nexport default PolylineEdge;\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { get } from 'lodash-es';\nimport { snapToGrid } from '../../util';\nimport { EventType } from '../../constant';\nvar Dnd = /** @class */ (function () {\n    function Dnd(params) {\n        var _this = this;\n        this.nodeConfig = null;\n        this.fakeNode = null;\n        this.stopDrag = function () {\n            _this.nodeConfig = null;\n            if (_this.docPointerMove) {\n                window.document.removeEventListener('pointermove', _this.docPointerMove);\n            }\n            if (_this.docPointerUp) {\n                window.document.removeEventListener('pointerup', _this.docPointerUp);\n            }\n        };\n        this.dragEnter = function (e) {\n            if (!_this.nodeConfig || _this.fakeNode)\n                return;\n            _this.fakeNode = _this.lf.createFakeNode(__assign(__assign({}, _this.nodeConfig), _this.clientToLocalPoint({\n                x: e.clientX,\n                y: e.clientY,\n            })));\n        };\n        this.onDragOver = function (e) {\n            _this.lf.graphModel.eventCenter.emit(EventType.BLANK_CANVAS_MOUSEMOVE, {\n                e: e,\n            });\n            e.preventDefault();\n            if (_this.fakeNode) {\n                var _a = _this.clientToLocalPoint({\n                    x: e.clientX,\n                    y: e.clientY,\n                }), x = _a.x, y = _a.y;\n                _this.fakeNode.moveTo(x, y);\n                var nodeData = _this.fakeNode.getData();\n                _this.lf.setNodeSnapLine(nodeData);\n                _this.lf.graphModel.eventCenter.emit(EventType.NODE_DND_DRAG, {\n                    data: nodeData,\n                    e: e,\n                });\n            }\n            return false;\n        };\n        this.onDragLeave = function () {\n            if (_this.fakeNode) {\n                _this.lf.removeNodeSnapLine();\n                _this.lf.graphModel.removeFakeNode();\n                _this.fakeNode = null;\n            }\n        };\n        this.onDrop = function (e) {\n            if (!_this.lf.graphModel || !e || !_this.nodeConfig) {\n                return;\n            }\n            _this.lf.addNode(__assign(__assign({}, _this.nodeConfig), _this.clientToLocalPoint({\n                x: e.clientX,\n                y: e.clientY,\n            })), EventType.NODE_DND_ADD, e);\n            e.preventDefault();\n            e.stopPropagation();\n            _this.nodeConfig = null;\n            _this.lf.removeNodeSnapLine();\n            _this.lf.graphModel.removeFakeNode();\n            _this.fakeNode = null;\n        };\n        var lf = params.lf;\n        this.lf = lf;\n    }\n    Dnd.prototype.clientToLocalPoint = function (_a) {\n        var x = _a.x, y = _a.y;\n        var gridSize = get(this.lf.options, ['grid', 'size']);\n        //  container  offset \n        var position = this.lf.graphModel.getPointByClient({\n            x: x,\n            y: y,\n        });\n        // \n        var _b = position.canvasOverlayPosition, x1 = _b.x, y1 = _b.y;\n        var snapGrid = this.lf.graphModel.editConfigModel.snapGrid;\n        // x, y  size\n        return {\n            x: snapToGrid(x1, gridSize, snapGrid),\n            y: snapToGrid(y1, gridSize, snapGrid),\n        };\n    };\n    Dnd.prototype.isInsideCanvas = function (e) {\n        var overlay = this.lf.graphModel.rootEl.querySelector('[name=\"canvas-overlay\"]');\n        var topEl = window.document.elementFromPoint(e.clientX, e.clientY);\n        return (topEl === overlay ||\n            (topEl !== null && !!overlay && overlay.contains(topEl)));\n    };\n    Dnd.prototype.startDrag = function (nodeConfig) {\n        var _this = this;\n        var editConfigModel = this.lf.graphModel.editConfigModel;\n        if (editConfigModel === null || editConfigModel === void 0 ? void 0 : editConfigModel.isSilentMode)\n            return;\n        this.nodeConfig = nodeConfig;\n        // /\n        this.docPointerMove = function (e) {\n            if (!_this.nodeConfig)\n                return;\n            // \n            if (!_this.isInsideCanvas(e)) {\n                _this.onDragLeave();\n                return;\n            }\n            // \n            if (!_this.fakeNode) {\n                _this.dragEnter(e);\n                return;\n            }\n            // \n            _this.onDragOver(e);\n        };\n        // \n        this.docPointerUp = function (e) {\n            if (!_this.nodeConfig)\n                return;\n            if (_this.isInsideCanvas(e)) {\n                _this.onDrop(e);\n            }\n            else {\n                _this.onDragLeave();\n            }\n            // /\n            e.preventDefault();\n            e.stopPropagation();\n            // \n            _this.stopDrag();\n        };\n        window.document.addEventListener('pointermove', this.docPointerMove);\n        window.document.addEventListener('pointerup', this.docPointerUp);\n    };\n    return Dnd;\n}());\nexport { Dnd };\nexport default Dnd;\n","export function snapline(eventCenter, snaplineModel) {\n    // \n    eventCenter.on('node:mousemove', function (_a) {\n        var data = _a.data;\n        snaplineModel.setNodeSnapLine(data);\n    });\n    // \n    eventCenter.on('node:mouseup', function () {\n        snaplineModel.clearSnapline();\n    });\n}\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { jsx as _jsx } from \"preact/jsx-runtime\";\nimport { createRef, Component } from 'preact/compat';\nimport { ElementState, observer } from '..';\nimport { ElementType, EventType, ModelType } from '../constant';\nvar TextEditTool = /** @class */ (function (_super) {\n    __extends(TextEditTool, _super);\n    function TextEditTool(props) {\n        var _this = _super.call(this, props) || this;\n        _this.ref = createRef();\n        _this.__prevText = {\n            type: '',\n            text: '',\n            id: '',\n        };\n        _this.keyupHandler = function (ev) {\n            var textEditElement = _this.props.graphModel.textEditElement;\n            // alt+enter\n            if (ev.key === 'Enter' && ev.altKey) {\n                textEditElement === null || textEditElement === void 0 ? void 0 : textEditElement.setElementState(ElementState.DEFAULT);\n            }\n        };\n        _this.inputHandler = function (ev) {\n            var value = ev.target.innerText;\n            var textEditElement = _this.props.graphModel.textEditElement;\n            if (textEditElement) {\n                _this.__prevText = {\n                    type: textEditElement.type,\n                    text: value.replace(/(\\r\\n)+$|(\\n)+$/, ''), // fix #488: \n                    id: textEditElement.id,\n                };\n            }\n        };\n        // fix: #587 #760\n        _this.keydownHandler = function (ev) {\n            ev.stopPropagation();\n        };\n        _this.state = {\n            style: {\n                left: 0,\n                top: 0,\n            },\n        };\n        return _this;\n    }\n    TextEditTool.getDerivedStateFromProps = function (props) {\n        var _a;\n        var textEditElement = props.textEditElement, graphModel = props.graphModel;\n        var transformModel = graphModel.transformModel, theme = graphModel.theme;\n        var inputText = theme.inputText;\n        var autoStyle;\n        if (textEditElement) {\n            // \n            // \n            // \n            if (!((_a = textEditElement.text) === null || _a === void 0 ? void 0 : _a.value)) {\n                if (textEditElement.BaseType === ElementType.EDGE) {\n                    // textEditElement = textEditElement as BaseEdgeModel\n                    var textConfig = textEditElement.text;\n                    var _b = textEditElement.textPosition, x_1 = _b.x, y_1 = _b.y;\n                    textConfig.x = x_1;\n                    textConfig.y = y_1;\n                    textEditElement.setText(textConfig);\n                }\n            }\n            // \n            var commonAutoStyle = {\n                resize: 'auto',\n                whiteSpace: 'normal',\n                wordBreak: 'break-all',\n            };\n            if (textEditElement.BaseType === ElementType.EDGE) {\n                // , \n                var _c = theme.edgeText, overflowMode = _c.overflowMode, lineHeight = _c.lineHeight, wrapPadding = _c.wrapPadding, textWidth = _c.textWidth;\n                if (textWidth && overflowMode === 'autoWrap') {\n                    autoStyle = __assign(__assign({}, commonAutoStyle), { width: textWidth, minWidth: textWidth, lineHeight: lineHeight, padding: wrapPadding });\n                }\n            }\n            else if (textEditElement.BaseType === ElementType.NODE) {\n                // , \n                var _d = theme.nodeText, overflowMode = _d.overflowMode, lineHeight = _d.lineHeight, wrapPadding = _d.wrapPadding, textWidth = _d.textWidth;\n                var width = textEditElement.width, modelType = textEditElement.modelType, nodeTextWidth = textEditElement.textWidth;\n                var finalTextWidth = nodeTextWidth || textWidth || width;\n                // textWidth\n                if ((modelType !== ModelType.TEXT_NODE && overflowMode === 'autoWrap') ||\n                    (modelType === ModelType.TEXT_NODE && textWidth)) {\n                    autoStyle = __assign(__assign({}, commonAutoStyle), { width: finalTextWidth, minWidth: finalTextWidth, lineHeight: lineHeight, padding: wrapPadding });\n                }\n            }\n            var _e = textEditElement.text, x = _e.x, y = _e.y;\n            var _f = __read(transformModel.CanvasPointToHtmlPoint([x, y]), 2), left = _f[0], top_1 = _f[1];\n            return {\n                style: __assign(__assign({ left: left, top: top_1 }, autoStyle), inputText),\n            };\n        }\n        return null;\n    };\n    TextEditTool.prototype.componentDidUpdate = function () {\n        var graphModel = this.props.graphModel;\n        if (this.ref.current) {\n            this.ref.current.focus();\n            this.placeCaretAtEnd(this.ref.current);\n        }\n        if (this.__prevText.id !== '') {\n            var _a = this.__prevText, text = _a.text, id = _a.id;\n            graphModel.updateText(id, text);\n            graphModel.eventCenter.emit(EventType.TEXT_UPDATE, {\n                data: __assign({}, this.__prevText),\n            });\n            this.__prevText.id = '';\n            this.__prevText.text = '';\n            this.__prevText.type = '';\n        }\n    };\n    TextEditTool.prototype.placeCaretAtEnd = function (el) {\n        if (window.getSelection !== undefined &&\n            document.createRange !== undefined) {\n            var range = document.createRange();\n            range.selectNodeContents(el);\n            range.collapse(false);\n            var sel = window.getSelection();\n            sel === null || sel === void 0 ? void 0 : sel.removeAllRanges();\n            sel === null || sel === void 0 ? void 0 : sel.addRange(range);\n        }\n    };\n    TextEditTool.prototype.render = function () {\n        var _a;\n        var textEditElement = this.props.graphModel.textEditElement;\n        var style = this.state.style;\n        return textEditElement ? (_jsx(\"div\", { contentEditable: true, className: \"lf-text-input\", style: style, ref: this.ref, onKeyUp: this.keyupHandler, onKeyDown: this.keydownHandler, onKeyPress: this.keydownHandler, onInput: this.inputHandler, children: (_a = textEditElement.text) === null || _a === void 0 ? void 0 : _a.value }, textEditElement.id)) : null;\n    };\n    TextEditTool.toolName = 'text-edit-tool';\n    TextEditTool = __decorate([\n        observer\n    ], TextEditTool);\n    return TextEditTool;\n}(Component));\nexport { TextEditTool };\nexport default TextEditTool;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { jsx as _jsx } from \"preact/jsx-runtime\";\nimport { Component } from 'preact/compat';\nimport { observer } from '..';\nimport { StepDrag } from '../util';\nimport { ElementType, EventType } from '../constant';\nimport { getNodeOutline, getEdgeOutline } from '../algorithm/outline';\nvar MultipleSelect = /** @class */ (function (_super) {\n    __extends(MultipleSelect, _super);\n    function MultipleSelect(props) {\n        var _this = _super.call(this, props) || this;\n        _this.handleMouseDown = function (ev) {\n            _this.stepDrag.handleMouseDown(ev);\n        };\n        // \n        _this.handleWheelEvent = function (ev) {\n            var _a, _b;\n            ev.preventDefault();\n            var deltaX = ev.deltaX, deltaY = ev.deltaY, clientX = ev.clientX, clientY = ev.clientY, ctrlKey = ev.ctrlKey;\n            var newEvent = new WheelEvent('wheel', {\n                deltaX: deltaX,\n                deltaY: deltaY,\n                clientX: clientX,\n                clientY: clientY,\n                ctrlKey: ctrlKey,\n            });\n            (_b = (_a = _this.props.lf.container) === null || _a === void 0 ? void 0 : _a.querySelector('.lf-canvas-overlay[name=\"canvas-overlay\"]')) === null || _b === void 0 ? void 0 : _b.dispatchEvent(newEvent);\n        };\n        _this.onDragging = function (_a) {\n            var deltaX = _a.deltaX, deltaY = _a.deltaY;\n            var _b = _this.props, graphModel = _b.graphModel, lf = _b.lf;\n            var _c = lf.getTransform(), SCALE_X = _c.SCALE_X, SCALE_Y = _c.SCALE_Y;\n            var selectElements = graphModel.getSelectElements(true);\n            graphModel.moveNodes(selectElements.nodes.map(function (node) { return node.id; }), deltaX / SCALE_X, deltaY / SCALE_Y);\n        };\n        _this.handleContextMenu = function (ev) {\n            ev.preventDefault();\n            var _a = _this.props, graphModel = _a.graphModel, _b = _a.graphModel, eventCenter = _b.eventCenter, selectElements = _b.selectElements;\n            var position = graphModel.getPointByClient({\n                x: ev.clientX,\n                y: ev.clientY,\n            });\n            var selectGraphData = {\n                nodes: [],\n                edges: [],\n            };\n            var models = __spreadArray([], __read(selectElements.values()), false);\n            models.forEach(function (model) {\n                if (model.BaseType === ElementType.NODE) {\n                    selectGraphData.nodes.push(model.getData());\n                }\n                if (model.BaseType === ElementType.EDGE) {\n                    selectGraphData.edges.push(model.getData());\n                }\n            });\n            eventCenter.emit(EventType.SELECTION_CONTEXTMENU, {\n                data: selectGraphData,\n                e: ev,\n                position: position,\n            });\n        };\n        var _a = props.graphModel, gridSize = _a.gridSize, eventCenter = _a.eventCenter;\n        _this.stepDrag = new StepDrag({\n            onDragging: _this.onDragging,\n            step: gridSize,\n            eventType: 'SELECTION',\n            eventCenter: eventCenter,\n        });\n        return _this;\n    }\n    MultipleSelect.prototype.render = function () {\n        var _a, _b;\n        var _c = this.props.graphModel, selectElements = _c.selectElements, transformModel = _c.transformModel;\n        var _d = this.props.lf.getTransform(), SCALE_X = _d.SCALE_X, SCALE_Y = _d.SCALE_Y;\n        if (selectElements.size <= 1)\n            return;\n        var x = Number.MAX_SAFE_INTEGER;\n        var y = Number.MAX_SAFE_INTEGER;\n        var x1 = Number.MIN_SAFE_INTEGER;\n        var y1 = Number.MIN_SAFE_INTEGER;\n        selectElements.forEach(function (element) {\n            var outline;\n            if (element.BaseType === ElementType.NODE) {\n                outline = getNodeOutline(element);\n            }\n            if (element.BaseType === ElementType.EDGE) {\n                outline = getEdgeOutline(element);\n            }\n            if (outline !== undefined) {\n                x = Math.min(x, outline.x);\n                y = Math.min(y, outline.y);\n                x1 = Math.max(x1, outline.x1);\n                y1 = Math.max(y1, outline.y1);\n            }\n        });\n        _a = __read(transformModel.CanvasPointToHtmlPoint([x, y]), 2), x = _a[0], y = _a[1];\n        _b = __read(transformModel.CanvasPointToHtmlPoint([x1, y1]), 2), x1 = _b[0], y1 = _b[1];\n        var style = {\n            left: \"\".concat(x - (20 * SCALE_X) / 2, \"px\"),\n            top: \"\".concat(y - (20 * SCALE_Y) / 2, \"px\"),\n            width: \"\".concat(x1 - x + 20 * SCALE_X, \"px\"),\n            height: \"\".concat(y1 - y + 20 * SCALE_Y, \"px\"),\n            'border-width': \"\".concat(2 * SCALE_X, \"px\"),\n        };\n        return (_jsx(\"div\", { className: \"lf-multiple-select\", style: style, onPointerDown: this.handleMouseDown, onContextMenu: this.handleContextMenu, onWheel: this.handleWheelEvent }));\n    };\n    MultipleSelect.toolName = 'multiple-select-tool';\n    MultipleSelect = __decorate([\n        observer\n    ], MultipleSelect);\n    return MultipleSelect;\n}(Component));\nexport default MultipleSelect;\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { action, observable } from 'mobx';\nimport { forEach } from 'lodash-es';\nimport TextEdit from './TextEditTool';\nimport MultipleSelect from './MultipleSelectTool';\nimport { ElementState, EventType } from '../constant';\n// \nvar defaultTools = [TextEdit, MultipleSelect];\nvar Tool = /** @class */ (function () {\n    function Tool(instance) {\n        var _this = this;\n        this.toolMap = new Map();\n        this.disabledToolMap = new Map();\n        this.instance = instance;\n        forEach(defaultTools, function (tool) {\n            if (!_this.isDisabled(tool.toolName)) {\n                _this.registerTool(tool.toolName, tool);\n            }\n        });\n        // @see https://github.com/didi/LogicFlow/issues/152\n        var graphModel = instance.graphModel;\n        var eventCenter = graphModel.eventCenter;\n        eventCenter.on(\"\".concat(EventType.GRAPH_TRANSFORM, \",\").concat(EventType.NODE_CLICK, \",\").concat(EventType.BLANK_CLICK, \" \"), function () {\n            var _a;\n            var textEditElement = graphModel.textEditElement, _b = graphModel.editConfigModel, edgeTextEdit = _b.edgeTextEdit, nodeTextEdit = _b.nodeTextEdit;\n            // fix #826, \n            if ((edgeTextEdit || nodeTextEdit) && textEditElement) {\n                (_a = graphModel.textEditElement) === null || _a === void 0 ? void 0 : _a.setElementState(ElementState.DEFAULT);\n            }\n        });\n    }\n    Tool.prototype.isDisabled = function (toolName) {\n        var _a;\n        return ((_a = this.instance.options.disabledTools) === null || _a === void 0 ? void 0 : _a.indexOf(toolName)) !== -1;\n    };\n    // \n    Tool.prototype.registerTool = function (name, component) {\n        this.toolMap.set(name, component);\n    };\n    // \n    Tool.prototype.disableTool = function (name) {\n        var tool = this.toolMap.get(name);\n        if (tool) {\n            this.disabledToolMap.set(name, tool);\n            this.toolMap.delete(name);\n            return true;\n        }\n        throw new Error(\"\\u7981\\u7528\\u5931\\u8D25\\uFF0C\\u4E0D\\u5B58\\u5728\\u540D\\u4E3A \".concat(tool, \" \\u7684\\u5DE5\\u5177\"));\n    };\n    Tool.prototype.enableTool = function (name) {\n        var tool = this.disabledToolMap.get(name);\n        if (tool) {\n            this.toolMap.set(name, tool);\n            this.disabledToolMap.delete(name);\n            return true;\n        }\n        throw new Error(\"\\u4E0D\\u5B58\\u5728\\u540D\\u4E3A \".concat(tool, \" \\u7684\\u5DE5\\u5177\"));\n    };\n    Tool.prototype.getTools = function () {\n        return Array.from(this.toolMap.values());\n    };\n    Tool.prototype.getInstance = function () {\n        return this.instance;\n    };\n    Tool.prototype.destroy = function () {\n        this.toolMap.clear();\n        this.disabledToolMap.clear();\n    };\n    __decorate([\n        observable\n    ], Tool.prototype, \"toolMap\", void 0);\n    __decorate([\n        action\n    ], Tool.prototype, \"disableTool\", null);\n    __decorate([\n        action\n    ], Tool.prototype, \"enableTool\", null);\n    return Tool;\n}());\nexport { Tool };\nexport default Tool;\n","import { action, extendObservable, $mobx, observable, _allowStateChanges, createAtom, computed, runInAction, keys, isObservableArray, isObservableMap, isComputed, isObservableObject, isComputedProp, _getAdministration, when, getAtom, isAction, autorun, _isComputingDerivation, flow, onBecomeUnobserved, observe, entries, values, transaction, reaction, ObservableMap, _startAction, _endAction } from 'mobx';\n\nvar NOOP = function () { };\r\nvar IDENTITY = function (_) { return _; };\r\nfunction fail$1(message) {\r\n    throw new Error(\"[mobx-utils] \" + message);\r\n}\r\nfunction invariant(cond, message) {\r\n    if (message === void 0) { message = \"Illegal state\"; }\r\n    if (!cond)\r\n        fail$1(message);\r\n}\r\nvar deprecatedMessages = [];\r\nfunction deprecated(msg) {\r\n    if (deprecatedMessages.indexOf(msg) !== -1)\r\n        return;\r\n    deprecatedMessages.push(msg);\r\n    console.error(\"[mobx-utils] Deprecated: \" + msg);\r\n}\r\nfunction addHiddenProp(object, propName, value) {\r\n    Object.defineProperty(object, propName, {\r\n        enumerable: false,\r\n        writable: true,\r\n        configurable: true,\r\n        value: value,\r\n    });\r\n}\r\nvar deepFields = function (x) {\r\n    return (x &&\r\n        x !== Object.prototype &&\r\n        Object.getOwnPropertyNames(x).concat(deepFields(Object.getPrototypeOf(x)) || []));\r\n};\r\nvar distinctDeepFields = function (x) {\r\n    var deepFieldsIndistinct = deepFields(x);\r\n    var deepFieldsDistinct = deepFieldsIndistinct.filter(function (item, index) { return deepFieldsIndistinct.indexOf(item) === index; });\r\n    return deepFieldsDistinct;\r\n};\r\nvar getAllMethodsAndProperties = function (x) {\r\n    return distinctDeepFields(x).filter(function (name) { return name !== \"constructor\" && !~name.indexOf(\"__\"); });\r\n};\n\nvar PENDING = \"pending\";\r\nvar FULFILLED = \"fulfilled\";\r\nvar REJECTED = \"rejected\";\r\nfunction caseImpl(handlers) {\r\n    switch (this.state) {\r\n        case PENDING:\r\n            return handlers.pending && handlers.pending(this.value);\r\n        case REJECTED:\r\n            return handlers.rejected && handlers.rejected(this.value);\r\n        case FULFILLED:\r\n            return handlers.fulfilled ? handlers.fulfilled(this.value) : this.value;\r\n    }\r\n}\r\n/**\r\n * `fromPromise` takes a Promise, extends it with 2 observable properties that track\r\n * the status of the promise and returns it. The returned object has the following observable properties:\r\n *  - `value`: either the initial value, the value the Promise resolved to, or the value the Promise was rejected with. use `.state` if you need to be able to tell the difference.\r\n *  - `state`: one of `\"pending\"`, `\"fulfilled\"` or `\"rejected\"`\r\n *\r\n * And the following methods:\r\n * - `case({fulfilled, rejected, pending})`: maps over the result using the provided handlers, or returns `undefined` if a handler isn't available for the current promise state.\r\n * - `then((value: TValue) => TResult1 | PromiseLike<TResult1>, [(rejectReason: any) => any])`: chains additional handlers to the provided promise.\r\n *\r\n * The returned object implements `PromiseLike<TValue>`, so you can chain additional `Promise` handlers using `then`. You may also use it with `await` in `async` functions.\r\n *\r\n * Note that the status strings are available as constants:\r\n * `mobxUtils.PENDING`, `mobxUtils.REJECTED`, `mobxUtil.FULFILLED`\r\n *\r\n * fromPromise takes an optional second argument, a previously created `fromPromise` based observable.\r\n * This is useful to replace one promise based observable with another, without going back to an intermediate\r\n * \"pending\" promise state while fetching data. For example:\r\n *\r\n * @example\r\n * \\@observer\r\n * class SearchResults extends React.Component {\r\n *   \\@observable.ref searchResults\r\n *\r\n *   componentDidUpdate(nextProps) {\r\n *     if (nextProps.query !== this.props.query)\r\n *       this.searchResults = fromPromise(\r\n *         window.fetch(\"/search?q=\" + nextProps.query),\r\n *         // by passing, we won't render a pending state if we had a successful search query before\r\n *         // rather, we will keep showing the previous search results, until the new promise resolves (or rejects)\r\n *         this.searchResults\r\n *       )\r\n *   }\r\n *\r\n *   render() {\r\n *     return this.searchResults.case({\r\n *        pending: (staleValue) => {\r\n *          return staleValue || \"searching\" // <- value might set to previous results while the promise is still pending\r\n *        },\r\n *        fulfilled: (value) => {\r\n *          return value // the fresh results\r\n *        },\r\n *        rejected: (error) => {\r\n *          return \"Oops: \" + error\r\n *        }\r\n *     })\r\n *   }\r\n * }\r\n *\r\n * Observable promises can be created immediately in a certain state using\r\n * `fromPromise.reject(reason)` or `fromPromise.resolve(value?)`.\r\n * The main advantage of `fromPromise.resolve(value)` over `fromPromise(Promise.resolve(value))` is that the first _synchronously_ starts in the desired state.\r\n *\r\n * It is possible to directly create a promise using a resolve, reject function:\r\n * `fromPromise((resolve, reject) => setTimeout(() => resolve(true), 1000))`\r\n *\r\n * @example\r\n * const fetchResult = fromPromise(fetch(\"http://someurl\"))\r\n *\r\n * // combine with when..\r\n * when(\r\n *   () => fetchResult.state !== \"pending\",\r\n *   () => {\r\n *     console.log(\"Got \", fetchResult.value)\r\n *   }\r\n * )\r\n *\r\n * // or a mobx-react component..\r\n * const myComponent = observer(({ fetchResult }) => {\r\n *   switch(fetchResult.state) {\r\n *      case \"pending\": return <div>Loading...</div>\r\n *      case \"rejected\": return <div>Ooops... {fetchResult.value}</div>\r\n *      case \"fulfilled\": return <div>Gotcha: {fetchResult.value}</div>\r\n *   }\r\n * })\r\n *\r\n * // or using the case method instead of switch:\r\n *\r\n * const myComponent = observer(({ fetchResult }) =>\r\n *   fetchResult.case({\r\n *     pending:   () => <div>Loading...</div>,\r\n *     rejected:  error => <div>Ooops.. {error}</div>,\r\n *     fulfilled: value => <div>Gotcha: {value}</div>,\r\n *   }))\r\n *\r\n * // chain additional handler(s) to the resolve/reject:\r\n *\r\n * fetchResult.then(\r\n *   (result) =>  doSomeTransformation(result),\r\n *   (rejectReason) => console.error('fetchResult was rejected, reason: ' + rejectReason)\r\n * ).then(\r\n *   (transformedResult) => console.log('transformed fetchResult: ' + transformedResult)\r\n * )\r\n *\r\n * @param {IThenable<T>} promise The promise which will be observed\r\n * @param {IThenable<T>} oldPromise? The previously observed promise\r\n * @returns {IPromiseBasedObservable<T>}\r\n */\r\nfunction fromPromise(origPromise, oldPromise) {\r\n    invariant(arguments.length <= 2, \"fromPromise expects up to two arguments\");\r\n    invariant(typeof origPromise === \"function\" ||\r\n        (typeof origPromise === \"object\" &&\r\n            origPromise &&\r\n            typeof origPromise.then === \"function\"), \"Please pass a promise or function to fromPromise\");\r\n    if (origPromise.isPromiseBasedObservable === true)\r\n        return origPromise;\r\n    if (typeof origPromise === \"function\") {\r\n        // If it is a (reject, resolve function, wrap it)\r\n        origPromise = new Promise(origPromise);\r\n    }\r\n    var promise = origPromise;\r\n    origPromise.then(action(\"observableFromPromise-resolve\", function (value) {\r\n        promise.value = value;\r\n        promise.state = FULFILLED;\r\n    }), action(\"observableFromPromise-reject\", function (reason) {\r\n        promise.value = reason;\r\n        promise.state = REJECTED;\r\n    }));\r\n    promise.isPromiseBasedObservable = true;\r\n    promise.case = caseImpl;\r\n    var oldData = oldPromise && oldPromise.state === FULFILLED\r\n        ? oldPromise.value\r\n        : undefined;\r\n    extendObservable(promise, {\r\n        value: oldData,\r\n        state: PENDING,\r\n    }, {}, { deep: false });\r\n    return promise;\r\n}\r\n(function (fromPromise) {\r\n    fromPromise.reject = action(\"fromPromise.reject\", function (reason) {\r\n        var p = fromPromise(Promise.reject(reason));\r\n        p.state = REJECTED;\r\n        p.value = reason;\r\n        return p;\r\n    });\r\n    function resolveBase(value) {\r\n        if (value === void 0) { value = undefined; }\r\n        var p = fromPromise(Promise.resolve(value));\r\n        p.state = FULFILLED;\r\n        p.value = value;\r\n        return p;\r\n    }\r\n    fromPromise.resolve = action(\"fromPromise.resolve\", resolveBase);\r\n})(fromPromise || (fromPromise = {}));\r\n/**\r\n * Returns true if the provided value is a promise-based observable.\r\n * @param value any\r\n * @returns {boolean}\r\n */\r\nfunction isPromiseBasedObservable(value) {\r\n    return value && value.isPromiseBasedObservable === true;\r\n}\n\nvar __spreadArrays = (undefined && undefined.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n/**\r\n * Moves an item from one position to another, checking that the indexes given are within bounds.\r\n *\r\n * @example\r\n * const source = observable([1, 2, 3])\r\n * moveItem(source, 0, 1)\r\n * console.log(source.map(x => x)) // [2, 1, 3]\r\n *\r\n * @export\r\n * @param {ObservableArray<T>} target\r\n * @param {number} fromIndex\r\n * @param {number} toIndex\r\n * @returns {ObservableArray<T>}\r\n */\r\nfunction moveItem(target, fromIndex, toIndex) {\r\n    checkIndex(target, fromIndex);\r\n    checkIndex(target, toIndex);\r\n    if (fromIndex === toIndex) {\r\n        return;\r\n    }\r\n    var oldItems = target[$mobx].values;\r\n    var newItems;\r\n    if (fromIndex < toIndex) {\r\n        newItems = __spreadArrays(oldItems.slice(0, fromIndex), oldItems.slice(fromIndex + 1, toIndex + 1), [\r\n            oldItems[fromIndex]\r\n        ], oldItems.slice(toIndex + 1));\r\n    }\r\n    else {\r\n        // toIndex < fromIndex\r\n        newItems = __spreadArrays(oldItems.slice(0, toIndex), [\r\n            oldItems[fromIndex]\r\n        ], oldItems.slice(toIndex, fromIndex), oldItems.slice(fromIndex + 1));\r\n    }\r\n    target.replace(newItems);\r\n    return target;\r\n}\r\n/**\r\n * Checks whether the specified index is within bounds. Throws if not.\r\n *\r\n * @private\r\n * @param {ObservableArray<any>} target\r\n * @param {number }index\r\n */\r\nfunction checkIndex(target, index) {\r\n    if (index < 0) {\r\n        throw new Error(\"[mobx.array] Index out of bounds: \" + index + \" is negative\");\r\n    }\r\n    var length = target[$mobx].values.length;\r\n    if (index >= length) {\r\n        throw new Error(\"[mobx.array] Index out of bounds: \" + index + \" is not smaller than \" + length);\r\n    }\r\n}\n\n/**\r\n * `lazyObservable` creates an observable around a `fetch` method that will not be invoked\r\n * until the observable is needed the first time.\r\n * The fetch method receives a `sink` callback which can be used to replace the\r\n * current value of the lazyObservable. It is allowed to call `sink` multiple times\r\n * to keep the lazyObservable up to date with some external resource.\r\n *\r\n * Note that it is the `current()` call itself which is being tracked by MobX,\r\n * so make sure that you don't dereference to early.\r\n *\r\n * @example\r\n * const userProfile = lazyObservable(\r\n *   sink => fetch(\"/myprofile\").then(profile => sink(profile))\r\n * )\r\n *\r\n * // use the userProfile in a React component:\r\n * const Profile = observer(({ userProfile }) =>\r\n *   userProfile.current() === undefined\r\n *   ? <div>Loading user profile...</div>\r\n *   : <div>{userProfile.current().displayName}</div>\r\n * )\r\n *\r\n * // triggers refresh the userProfile\r\n * userProfile.refresh()\r\n *\r\n * @param {(sink: (newValue: T) => void) => void} fetch method that will be called the first time the value of this observable is accessed. The provided sink can be used to produce a new value, synchronously or asynchronously\r\n * @param {T} [initialValue=undefined] optional initialValue that will be returned from `current` as long as the `sink` has not been called at least once\r\n * @returns {{\r\n *     current(): T,\r\n *     refresh(): T,\r\n *     reset(): T\r\n *     pending: boolean\r\n * }}\r\n */\r\nfunction lazyObservable(fetch, initialValue) {\r\n    if (initialValue === void 0) { initialValue = undefined; }\r\n    var started = false;\r\n    var value = observable.box(initialValue, { deep: false });\r\n    var pending = observable.box(false);\r\n    var currentFnc = function () {\r\n        if (!started) {\r\n            started = true;\r\n            _allowStateChanges(true, function () {\r\n                pending.set(true);\r\n            });\r\n            fetch(function (newValue) {\r\n                _allowStateChanges(true, function () {\r\n                    value.set(newValue);\r\n                    pending.set(false);\r\n                });\r\n            });\r\n        }\r\n        return value.get();\r\n    };\r\n    var resetFnc = action(\"lazyObservable-reset\", function () {\r\n        started = false;\r\n        value.set(initialValue);\r\n        return value.get();\r\n    });\r\n    return {\r\n        current: currentFnc,\r\n        refresh: function () {\r\n            if (started) {\r\n                started = false;\r\n                return currentFnc();\r\n            }\r\n            else {\r\n                return value.get();\r\n            }\r\n        },\r\n        reset: function () {\r\n            return resetFnc();\r\n        },\r\n        get pending() {\r\n            return pending.get();\r\n        },\r\n    };\r\n}\n\n/**\r\n * `fromResource` creates an observable whose current state can be inspected using `.current()`,\r\n * and which can be kept in sync with some external datasource that can be subscribed to.\r\n *\r\n * The created observable will only subscribe to the datasource if it is in use somewhere,\r\n * (un)subscribing when needed. To enable `fromResource` to do that two callbacks need to be provided,\r\n * one to subscribe, and one to unsubscribe. The subscribe callback itself will receive a `sink` callback, which can be used\r\n * to update the current state of the observable, allowing observes to react.\r\n *\r\n * Whatever is passed to `sink` will be returned by `current()`. The values passed to the sink will not be converted to\r\n * observables automatically, but feel free to do so.\r\n * It is the `current()` call itself which is being tracked,\r\n * so make sure that you don't dereference to early.\r\n *\r\n * For inspiration, an example integration with the apollo-client on [github](https://github.com/apollostack/apollo-client/issues/503#issuecomment-241101379),\r\n * or the [implementation](https://github.com/mobxjs/mobx-utils/blob/1d17cf7f7f5200937f68cc0b5e7ec7f3f71dccba/src/now.ts#L43-L57) of `mobxUtils.now`\r\n *\r\n * The following example code creates an observable that connects to a `dbUserRecord`,\r\n * which comes from an imaginary database and notifies when it has changed.\r\n *\r\n * @example\r\n * function createObservableUser(dbUserRecord) {\r\n *   let currentSubscription;\r\n *   return fromResource(\r\n *     (sink) => {\r\n *       // sink the current state\r\n *       sink(dbUserRecord.fields)\r\n *       // subscribe to the record, invoke the sink callback whenever new data arrives\r\n *       currentSubscription = dbUserRecord.onUpdated(() => {\r\n *         sink(dbUserRecord.fields)\r\n *       })\r\n *     },\r\n *     () => {\r\n *       // the user observable is not in use at the moment, unsubscribe (for now)\r\n *       dbUserRecord.unsubscribe(currentSubscription)\r\n *     }\r\n *   )\r\n * }\r\n *\r\n * // usage:\r\n * const myUserObservable = createObservableUser(myDatabaseConnector.query(\"name = 'Michel'\"))\r\n *\r\n * // use the observable in autorun\r\n * autorun(() => {\r\n *   // printed everytime the database updates its records\r\n *   console.log(myUserObservable.current().displayName)\r\n * })\r\n *\r\n * // ... or a component\r\n * const userComponent = observer(({ user }) =>\r\n *   <div>{user.current().displayName}</div>\r\n * )\r\n *\r\n * @export\r\n * @template T\r\n * @param {(sink: (newValue: T) => void) => void} subscriber\r\n * @param {IDisposer} [unsubscriber=NOOP]\r\n * @param {T} [initialValue=undefined] the data that will be returned by `get()` until the `sink` has emitted its first data\r\n * @returns {{\r\n *     current(): T;\r\n *     dispose(): void;\r\n *     isAlive(): boolean;\r\n * }}\r\n */\r\nfunction fromResource(subscriber, unsubscriber, initialValue) {\r\n    if (unsubscriber === void 0) { unsubscriber = NOOP; }\r\n    if (initialValue === void 0) { initialValue = undefined; }\r\n    var isActive = false;\r\n    var isDisposed = false;\r\n    var value = initialValue;\r\n    var suspender = function () {\r\n        if (isActive) {\r\n            isActive = false;\r\n            unsubscriber();\r\n        }\r\n    };\r\n    var atom = createAtom(\"ResourceBasedObservable\", function () {\r\n        invariant(!isActive && !isDisposed);\r\n        isActive = true;\r\n        subscriber(function (newValue) {\r\n            _allowStateChanges(true, function () {\r\n                value = newValue;\r\n                atom.reportChanged();\r\n            });\r\n        });\r\n    }, suspender);\r\n    return {\r\n        current: function () {\r\n            invariant(!isDisposed, \"subscribingObservable has already been disposed\");\r\n            var isBeingTracked = atom.reportObserved();\r\n            if (!isBeingTracked && !isActive)\r\n                console.warn(\"Called `get` of a subscribingObservable outside a reaction. Current value will be returned but no new subscription has started\");\r\n            return value;\r\n        },\r\n        dispose: function () {\r\n            isDisposed = true;\r\n            suspender();\r\n        },\r\n        isAlive: function () { return isActive; },\r\n    };\r\n}\n\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nfunction observableSymbol() {\r\n    return (typeof Symbol === \"function\" && Symbol.observable) || \"@@observable\";\r\n}\r\n/**\r\n * Converts an expression to an observable stream (a.k.a. TC 39 Observable / RxJS observable).\r\n * The provided expression is tracked by mobx as long as there are subscribers, automatically\r\n * emitting when new values become available. The expressions respect (trans)actions.\r\n *\r\n * @example\r\n *\r\n * const user = observable({\r\n *   firstName: \"C.S\",\r\n *   lastName: \"Lewis\"\r\n * })\r\n *\r\n * Rx.Observable\r\n *   .from(mobxUtils.toStream(() => user.firstname + user.lastName))\r\n *   .scan(nameChanges => nameChanges + 1, 0)\r\n *   .subscribe(nameChanges => console.log(\"Changed name \", nameChanges, \"times\"))\r\n *\r\n * @export\r\n * @template T\r\n * @param {() => T} expression\r\n * @param {boolean} fireImmediately (by default false)\r\n * @returns {IObservableStream<T>}\r\n */\r\nfunction toStream(expression, fireImmediately) {\r\n    var _a;\r\n    if (fireImmediately === void 0) { fireImmediately = false; }\r\n    var computedValue = computed(expression);\r\n    return _a = {\r\n            subscribe: function (observer) {\r\n                if (\"function\" === typeof observer) {\r\n                    return {\r\n                        unsubscribe: computedValue.observe(function (_a) {\r\n                            var newValue = _a.newValue;\r\n                            return observer(newValue);\r\n                        }, fireImmediately),\r\n                    };\r\n                }\r\n                if (observer && \"object\" === typeof observer && observer.next) {\r\n                    return {\r\n                        unsubscribe: computedValue.observe(function (_a) {\r\n                            var newValue = _a.newValue;\r\n                            return observer.next(newValue);\r\n                        }, fireImmediately),\r\n                    };\r\n                }\r\n                return {\r\n                    unsubscribe: function () { },\r\n                };\r\n            }\r\n        },\r\n        _a[observableSymbol()] = function () {\r\n            return this;\r\n        },\r\n        _a;\r\n}\r\nvar StreamListener = /** @class */ (function () {\r\n    function StreamListener(observable, initialValue) {\r\n        var _this = this;\r\n        runInAction(function () {\r\n            _this.current = initialValue;\r\n            _this.subscription = observable.subscribe(_this);\r\n        });\r\n    }\r\n    StreamListener.prototype.dispose = function () {\r\n        if (this.subscription) {\r\n            this.subscription.unsubscribe();\r\n        }\r\n    };\r\n    StreamListener.prototype.next = function (value) {\r\n        this.current = value;\r\n    };\r\n    StreamListener.prototype.complete = function () {\r\n        this.dispose();\r\n    };\r\n    StreamListener.prototype.error = function (value) {\r\n        this.current = value;\r\n        this.dispose();\r\n    };\r\n    __decorate([\r\n        observable.ref\r\n    ], StreamListener.prototype, \"current\", void 0);\r\n    __decorate([\r\n        action.bound\r\n    ], StreamListener.prototype, \"next\", null);\r\n    __decorate([\r\n        action.bound\r\n    ], StreamListener.prototype, \"complete\", null);\r\n    __decorate([\r\n        action.bound\r\n    ], StreamListener.prototype, \"error\", null);\r\n    return StreamListener;\r\n}());\r\nfunction fromStream(observable, initialValue) {\r\n    if (initialValue === void 0) { initialValue = undefined; }\r\n    return new StreamListener(observable, initialValue);\r\n}\n\nvar __assign = (undefined && undefined.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __decorate$1 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar RESERVED_NAMES = [\"model\", \"reset\", \"submit\", \"isDirty\", \"isPropertyDirty\", \"resetProperty\"];\r\nvar ViewModel = /** @class */ (function () {\r\n    function ViewModel(model) {\r\n        var _this = this;\r\n        this.model = model;\r\n        this.localValues = observable.map({});\r\n        this.localComputedValues = observable.map({});\r\n        this.isPropertyDirty = function (key) {\r\n            return _this.localValues.has(key);\r\n        };\r\n        invariant(isObservableObject(model), \"createViewModel expects an observable object\");\r\n        // use this helper as Object.getOwnPropertyNames doesn't return getters\r\n        getAllMethodsAndProperties(model).forEach(function (key) {\r\n            if (key === $mobx || key === \"__mobxDidRunLazyInitializers\") {\r\n                return;\r\n            }\r\n            invariant(RESERVED_NAMES.indexOf(key) === -1, \"The propertyname \" + key + \" is reserved and cannot be used with viewModels\");\r\n            if (isComputedProp(model, key)) {\r\n                var derivation = _getAdministration(model, key).derivation; // Fixme: there is no clear api to get the derivation\r\n                _this.localComputedValues.set(key, computed(derivation.bind(_this)));\r\n            }\r\n            var descriptor = Object.getOwnPropertyDescriptor(model, key);\r\n            var additionalDescriptor = descriptor ? { enumerable: descriptor.enumerable } : {};\r\n            Object.defineProperty(_this, key, __assign(__assign({}, additionalDescriptor), { configurable: true, get: function () {\r\n                    if (isComputedProp(model, key))\r\n                        return _this.localComputedValues.get(key).get();\r\n                    if (_this.isPropertyDirty(key))\r\n                        return _this.localValues.get(key);\r\n                    else\r\n                        return _this.model[key];\r\n                }, set: action(function (value) {\r\n                    if (value !== _this.model[key]) {\r\n                        _this.localValues.set(key, value);\r\n                    }\r\n                    else {\r\n                        _this.localValues.delete(key);\r\n                    }\r\n                }) }));\r\n        });\r\n    }\r\n    Object.defineProperty(ViewModel.prototype, \"isDirty\", {\r\n        get: function () {\r\n            return this.localValues.size > 0;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ViewModel.prototype, \"changedValues\", {\r\n        get: function () {\r\n            return this.localValues.toJS();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    ViewModel.prototype.submit = function () {\r\n        var _this = this;\r\n        keys(this.localValues).forEach(function (key) {\r\n            var source = _this.localValues.get(key);\r\n            var destination = _this.model[key];\r\n            if (isObservableArray(destination)) {\r\n                destination.replace(source);\r\n            }\r\n            else if (isObservableMap(destination)) {\r\n                destination.clear();\r\n                destination.merge(source);\r\n            }\r\n            else if (!isComputed(source)) {\r\n                _this.model[key] = source;\r\n            }\r\n        });\r\n        this.localValues.clear();\r\n    };\r\n    ViewModel.prototype.reset = function () {\r\n        this.localValues.clear();\r\n    };\r\n    ViewModel.prototype.resetProperty = function (key) {\r\n        this.localValues.delete(key);\r\n    };\r\n    __decorate$1([\r\n        computed\r\n    ], ViewModel.prototype, \"isDirty\", null);\r\n    __decorate$1([\r\n        computed\r\n    ], ViewModel.prototype, \"changedValues\", null);\r\n    __decorate$1([\r\n        action.bound\r\n    ], ViewModel.prototype, \"submit\", null);\r\n    __decorate$1([\r\n        action.bound\r\n    ], ViewModel.prototype, \"reset\", null);\r\n    __decorate$1([\r\n        action.bound\r\n    ], ViewModel.prototype, \"resetProperty\", null);\r\n    return ViewModel;\r\n}());\r\n/**\r\n * `createViewModel` takes an object with observable properties (model)\r\n * and wraps a viewmodel around it. The viewmodel proxies all enumerable properties of the original model with the following behavior:\r\n *  - as long as no new value has been assigned to the viewmodel property, the original property will be returned.\r\n *  - any future change in the model will be visible in the viewmodel as well unless the viewmodel property was dirty at the time of the attempted change.\r\n *  - once a new value has been assigned to a property of the viewmodel, that value will be returned during a read of that property in the future. However, the original model remain untouched until `submit()` is called.\r\n *\r\n * The viewmodel exposes the following additional methods, besides all the enumerable properties of the model:\r\n * - `submit()`: copies all the values of the viewmodel to the model and resets the state\r\n * - `reset()`: resets the state of the viewmodel, abandoning all local modifications\r\n * - `resetProperty(propName)`: resets the specified property of the viewmodel\r\n * - `isDirty`: observable property indicating if the viewModel contains any modifications\r\n * - `isPropertyDirty(propName)`: returns true if the specified property is dirty\r\n * - `changedValues`: returns a key / value map with the properties that have been changed in the model so far\r\n * - `model`: The original model object for which this viewModel was created\r\n *\r\n * You may use observable arrays, maps and objects with `createViewModel` but keep in mind to assign fresh instances of those to the viewmodel's properties, otherwise you would end up modifying the properties of the original model.\r\n * Note that if you read a non-dirty property, viewmodel only proxies the read to the model. You therefore need to assign a fresh instance not only the first time you make the assignment but also after calling `reset()` or `submit()`.\r\n *\r\n * @example\r\n * class Todo {\r\n *   \\@observable title = \"Test\"\r\n * }\r\n *\r\n * const model = new Todo()\r\n * const viewModel = createViewModel(model);\r\n *\r\n * autorun(() => console.log(viewModel.model.title, \",\", viewModel.title))\r\n * // prints \"Test, Test\"\r\n * model.title = \"Get coffee\"\r\n * // prints \"Get coffee, Get coffee\", viewModel just proxies to model\r\n * viewModel.title = \"Get tea\"\r\n * // prints \"Get coffee, Get tea\", viewModel's title is now dirty, and the local value will be printed\r\n * viewModel.submit()\r\n * // prints \"Get tea, Get tea\", changes submitted from the viewModel to the model, viewModel is proxying again\r\n * viewModel.title = \"Get cookie\"\r\n * // prints \"Get tea, Get cookie\" // viewModel has diverged again\r\n * viewModel.reset()\r\n * // prints \"Get tea, Get tea\", changes of the viewModel have been abandoned\r\n *\r\n * @param {T} model\r\n * @returns {(T & IViewModel<T>)}\r\n * ```\r\n */\r\nfunction createViewModel(model) {\r\n    return new ViewModel(model);\r\n}\n\n/**\r\n * Like normal `when`, except that this `when` will automatically dispose if the condition isn't met within a certain amount of time.\r\n *\r\n * @example\r\n * test(\"expect store to load\", t => {\r\n *   const store = {\r\n *     items: [],\r\n *     loaded: false\r\n *   }\r\n *   fetchDataForStore((data) => {\r\n *     store.items = data;\r\n *     store.loaded = true;\r\n *   })\r\n *   whenWithTimeout(\r\n *     () => store.loaded\r\n *     () => t.end()\r\n *     2000,\r\n *     () => t.fail(\"store didn't load with 2 secs\")\r\n *   )\r\n * })\r\n *\r\n *\r\n * @export\r\n * @param {() => boolean} expr see when, the expression to await\r\n * @param {() => void} action see when, the action to execut when expr returns truthy\r\n * @param {number} [timeout=10000] maximum amount when spends waiting before giving up\r\n * @param {any} [onTimeout=() => {}] the ontimeout handler will be called if the condition wasn't met within the given time\r\n * @returns {IDisposer} disposer function that can be used to cancel the when prematurely. Neither action or onTimeout will be fired if disposed\r\n */\r\nfunction whenWithTimeout(expr, action, timeout, onTimeout) {\r\n    if (timeout === void 0) { timeout = 10000; }\r\n    if (onTimeout === void 0) { onTimeout = function () { }; }\r\n    deprecated(\"whenWithTimeout is deprecated, use mobx.when with timeout option instead\");\r\n    return when(expr, action, {\r\n        timeout: timeout,\r\n        onError: onTimeout,\r\n    });\r\n}\n\n/**\r\n * MobX normally suspends any computed value that is not in use by any reaction,\r\n * and lazily re-evaluates the expression if needed outside a reaction while not in use.\r\n * `keepAlive` marks a computed value as always in use, meaning that it will always fresh, but never disposed automatically.\r\n *\r\n * @example\r\n * const obj = observable({\r\n *   number: 3,\r\n *   doubler: function() { return this.number * 2 }\r\n * })\r\n * const stop = keepAlive(obj, \"doubler\")\r\n *\r\n * @param {Object} target an object that has a computed property, created by `@computed` or `extendObservable`\r\n * @param {string} property the name of the property to keep alive\r\n * @returns {IDisposer} stops this keep alive so that the computed value goes back to normal behavior\r\n */\r\n/**\r\n * @example\r\n * const number = observable(3)\r\n * const doubler = computed(() => number.get() * 2)\r\n * const stop = keepAlive(doubler)\r\n * // doubler will now stay in sync reactively even when there are no further observers\r\n * stop()\r\n * // normal behavior, doubler results will be recomputed if not observed but needed, but lazily\r\n *\r\n * @param {IComputedValue<any>} computedValue created using the `computed` function\r\n * @returns {IDisposer} stops this keep alive so that the computed value goes back to normal behavior\r\n */\r\nfunction keepAlive(_1, _2) {\r\n    var computed = getAtom(_1, _2);\r\n    if (!computed)\r\n        throw new Error(\"No computed provided, please provide an object created with `computed(() => expr)` or an object + property name\");\r\n    return computed.observe(function () { });\r\n}\n\n/**\r\n * `queueProcessor` takes an observable array, observes it and calls `processor`\r\n * once for each item added to the observable array, optionally debouncing the action\r\n *\r\n * @example\r\n * const pendingNotifications = observable([])\r\n * const stop = queueProcessor(pendingNotifications, msg => {\r\n *   // show Desktop notification\r\n *   new Notification(msg);\r\n * })\r\n *\r\n * // usage:\r\n * pendingNotifications.push(\"test!\")\r\n *\r\n * @param {T[]} observableArray observable array instance to track\r\n * @param {(item: T) => void} processor action to call per item\r\n * @param {number} [debounce=0] optional debounce time in ms. With debounce 0 the processor will run synchronously\r\n * @returns {IDisposer} stops the processor\r\n */\r\nfunction queueProcessor(observableArray, processor, debounce) {\r\n    if (debounce === void 0) { debounce = 0; }\r\n    if (!isObservableArray(observableArray))\r\n        throw new Error(\"Expected observable array as first argument\");\r\n    if (!isAction(processor))\r\n        processor = action(\"queueProcessor\", processor);\r\n    var runner = function () {\r\n        // construct a final set\r\n        var items = observableArray.slice(0);\r\n        // clear the queue for next iteration\r\n        runInAction(function () { return observableArray.splice(0); });\r\n        // fire processor\r\n        items.forEach(processor);\r\n    };\r\n    if (debounce > 0)\r\n        return autorun(runner, { delay: debounce });\r\n    else\r\n        return autorun(runner);\r\n}\n\n/**\r\n * `chunkProcessor` takes an observable array, observes it and calls `processor`\r\n * once for a chunk of items added to the observable array, optionally deboucing the action.\r\n * The maximum chunk size can be limited by number.\r\n * This allows both, splitting larger into smaller chunks or (when debounced) combining smaller\r\n * chunks and/or single items into reasonable chunks of work.\r\n *\r\n * @example\r\n * const trackedActions = observable([])\r\n * const stop = chunkProcessor(trackedActions, chunkOfMax10Items => {\r\n *   sendTrackedActionsToServer(chunkOfMax10Items);\r\n * }, 100, 10)\r\n *\r\n * // usage:\r\n * trackedActions.push(\"scrolled\")\r\n * trackedActions.push(\"hoveredButton\")\r\n * // when both pushes happen within 100ms, there will be only one call to server\r\n *\r\n * @param {T[]} observableArray observable array instance to track\r\n * @param {(item: T[]) => void} processor action to call per item\r\n * @param {number} [debounce=0] optional debounce time in ms. With debounce 0 the processor will run synchronously\r\n * @param {number} [maxChunkSize=0] optionally do not call on full array but smaller chunks. With 0 it will process the full array.\r\n * @returns {IDisposer} stops the processor\r\n */\r\nfunction chunkProcessor(observableArray, processor, debounce, maxChunkSize) {\r\n    if (debounce === void 0) { debounce = 0; }\r\n    if (maxChunkSize === void 0) { maxChunkSize = 0; }\r\n    if (!isObservableArray(observableArray))\r\n        throw new Error(\"Expected observable array as first argument\");\r\n    if (!isAction(processor))\r\n        processor = action(\"chunkProcessor\", processor);\r\n    var runner = function () {\r\n        var _loop_1 = function () {\r\n            var chunkSize = maxChunkSize === 0\r\n                ? observableArray.length\r\n                : Math.min(observableArray.length, maxChunkSize);\r\n            // construct a final set\r\n            var items = observableArray.slice(0, chunkSize);\r\n            // clear the slice for next iteration\r\n            runInAction(function () { return observableArray.splice(0, chunkSize); });\r\n            // fire processor\r\n            processor(items);\r\n        };\r\n        while (observableArray.length > 0) {\r\n            _loop_1();\r\n        }\r\n    };\r\n    if (debounce > 0)\r\n        return autorun(runner, { delay: debounce });\r\n    else\r\n        return autorun(runner);\r\n}\n\nvar tickers = {};\r\n/**\r\n * Returns the current date time as epoch number.\r\n * The date time is read from an observable which is updated automatically after the given interval.\r\n * So basically it treats time as an observable.\r\n *\r\n * The function takes an interval as parameter, which indicates how often `now()` will return a new value.\r\n * If no interval is given, it will update each second. If \"frame\" is specified, it will update each time a\r\n * `requestAnimationFrame` is available.\r\n *\r\n * Multiple clocks with the same interval will automatically be synchronized.\r\n *\r\n * Countdown example: https://jsfiddle.net/mweststrate/na0qdmkw/\r\n *\r\n * @example\r\n *\r\n * const start = Date.now()\r\n *\r\n * autorun(() => {\r\n *   console.log(\"Seconds elapsed: \", (mobxUtils.now() - start) / 1000)\r\n * })\r\n *\r\n *\r\n * @export\r\n * @param {(number | \"frame\")} [interval=1000] interval in milliseconds about how often the interval should update\r\n * @returns\r\n */\r\nfunction now(interval) {\r\n    if (interval === void 0) { interval = 1000; }\r\n    if (!_isComputingDerivation()) {\r\n        // See #40\r\n        return Date.now();\r\n    }\r\n    if (!tickers[interval]) {\r\n        if (typeof interval === \"number\")\r\n            tickers[interval] = createIntervalTicker(interval);\r\n        else\r\n            tickers[interval] = createAnimationFrameTicker();\r\n    }\r\n    return tickers[interval].current();\r\n}\r\nfunction createIntervalTicker(interval) {\r\n    var subscriptionHandle;\r\n    return fromResource(function (sink) {\r\n        sink(Date.now());\r\n        subscriptionHandle = setInterval(function () { return sink(Date.now()); }, interval);\r\n    }, function () {\r\n        clearInterval(subscriptionHandle);\r\n    }, Date.now());\r\n}\r\nfunction createAnimationFrameTicker() {\r\n    var frameBasedTicker = fromResource(function (sink) {\r\n        sink(Date.now());\r\n        function scheduleTick() {\r\n            window.requestAnimationFrame(function () {\r\n                sink(Date.now());\r\n                if (frameBasedTicker.isAlive())\r\n                    scheduleTick();\r\n            });\r\n        }\r\n        scheduleTick();\r\n    }, function () { }, Date.now());\r\n    return frameBasedTicker;\r\n}\n\nvar __assign$1 = (undefined && undefined.__assign) || function () {\r\n    __assign$1 = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign$1.apply(this, arguments);\r\n};\r\n/**\r\n * _deprecated_ this functionality can now be found as `flow` in the mobx package. However, `flow` is not applicable as decorator, where `asyncAction` still is.\r\n *\r\n *\r\n *\r\n * `asyncAction` takes a generator function and automatically wraps all parts of the process in actions. See the examples below.\r\n * `asyncAction` can be used both as decorator or to wrap functions.\r\n *\r\n * - It is important that `asyncAction should always be used with a generator function (recognizable as `function*` or `*name` syntax)\r\n * - Each yield statement should return a Promise. The generator function will continue as soon as the promise settles, with the settled value\r\n * - When the generator function finishes, you can return a normal value. The `asyncAction` wrapped function will always produce a promise delivering that value.\r\n *\r\n * When using the mobx devTools, an asyncAction will emit `action` events with names like:\r\n * * `\"fetchUsers - runid: 6 - init\"`\r\n * * `\"fetchUsers - runid: 6 - yield 0\"`\r\n * * `\"fetchUsers - runid: 6 - yield 1\"`\r\n *\r\n * The `runId` represents the generator instance. In other words, if `fetchUsers` is invoked multiple times concurrently, the events with the same `runid` belong together.\r\n * The `yield` number indicates the progress of the generator. `init` indicates spawning (it won't do anything, but you can find the original arguments of the `asyncAction` here).\r\n * `yield 0` ... `yield n` indicates the code block that is now being executed. `yield 0` is before the first `yield`, `yield 1` after the first one etc. Note that yield numbers are not determined lexically but by the runtime flow.\r\n *\r\n * `asyncActions` requires `Promise` and `generators` to be available on the target environment. Polyfill `Promise` if needed. Both TypeScript and Babel can compile generator functions down to ES5.\r\n *\r\n *  N.B. due to a [babel limitation](https://github.com/loganfsmyth/babel-plugin-transform-decorators-legacy/issues/26), in Babel generatos cannot be combined with decorators. See also [#70](https://github.com/mobxjs/mobx-utils/issues/70)\r\n *\r\n *\r\n * @example\r\n * import {asyncAction} from \"mobx-utils\"\r\n *\r\n * let users = []\r\n *\r\n * const fetchUsers = asyncAction(\"fetchUsers\", function* (url) {\r\n *   const start = Date.now()\r\n *   const data = yield window.fetch(url)\r\n *   users = yield data.json()\r\n *   return start - Date.now()\r\n * })\r\n *\r\n * fetchUsers(\"http://users.com\").then(time => {\r\n *   console.dir(\"Got users\", users, \"in \", time, \"ms\")\r\n * })\r\n *\r\n * @example\r\n * import {asyncAction} from \"mobx-utils\"\r\n *\r\n * mobx.configure({ enforceActions: \"observed\" }) // don't allow state modifications outside actions\r\n *\r\n * class Store {\r\n * \t\\@observable githubProjects = []\r\n * \t\\@observable = \"pending\" // \"pending\" / \"done\" / \"error\"\r\n *\r\n * \t\\@asyncAction\r\n * \t*fetchProjects() { // <- note the star, this a generator function!\r\n * \t\tthis.githubProjects = []\r\n * \t\tthis.state = \"pending\"\r\n * \t\ttry {\r\n * \t\t\tconst projects = yield fetchGithubProjectsSomehow() // yield instead of await\r\n * \t\t\tconst filteredProjects = somePreprocessing(projects)\r\n * \t\t\t// the asynchronous blocks will automatically be wrapped actions\r\n * \t\t\tthis.state = \"done\"\r\n * \t\t\tthis.githubProjects = filteredProjects\r\n * \t\t} catch (error) {\r\n * \t\t\tthis.state = \"error\"\r\n * \t\t}\r\n * \t}\r\n * }\r\n *\r\n * @export\r\n * @returns {Promise}\r\n */\r\nfunction asyncAction(arg1, arg2) {\r\n    // decorator\r\n    if (typeof arguments[1] === \"string\") {\r\n        var name_1 = arguments[1];\r\n        var descriptor_1 = arguments[2];\r\n        if (descriptor_1 && descriptor_1.value) {\r\n            return Object.assign({}, descriptor_1, {\r\n                value: flow(descriptor_1.value),\r\n            });\r\n        }\r\n        else {\r\n            return Object.assign({}, descriptor_1, {\r\n                set: function (v) {\r\n                    Object.defineProperty(this, name_1, __assign$1(__assign$1({}, descriptor_1), { value: flow(v) }));\r\n                },\r\n            });\r\n        }\r\n    }\r\n    // direct invocation\r\n    var generator = typeof arg1 === \"string\" ? arg2 : arg1;\r\n    var name = typeof arg1 === \"string\" ? arg1 : generator.name || \"<unnamed async action>\";\r\n    deprecated(\"asyncAction is deprecated. use mobx.flow instead\");\r\n    return flow(generator); // name get's dropped..\r\n}\n\n/**\r\n * _deprecated_ whenAsync is deprecated, use mobx.when without effect instead.\r\n *\r\n * Like normal `when`, except that this `when` will return a promise that resolves when the expression becomes truthy\r\n *\r\n * @example\r\n * await whenAsync(() => !state.someBoolean)\r\n *\r\n * @export\r\n * @param {() => boolean} fn see when, the expression to await\r\n * @param {number} timeout maximum amount of time to wait, before the promise rejects\r\n * @returns Promise for when an observable eventually matches some condition. Rejects if timeout is provided and has expired\r\n */\r\nfunction whenAsync(fn, timeout) {\r\n    if (timeout === void 0) { timeout = 0; }\r\n    deprecated(\"whenAsync is deprecated, use mobx.when without effect instead\");\r\n    return when(fn, {\r\n        timeout: timeout,\r\n    });\r\n}\n\n/**\r\n * expr can be used to create temporarily views inside views.\r\n * This can be improved to improve performance if a value changes often, but usually doesn't affect the outcome of an expression.\r\n *\r\n * In the following example the expression prevents that a component is rerender _each time_ the selection changes;\r\n * instead it will only rerenders when the current todo is (de)selected.\r\n *\r\n * @example\r\n * const Todo = observer((props) => {\r\n *     const todo = props.todo;\r\n *     const isSelected = mobxUtils.expr(() => props.viewState.selection === todo);\r\n *     return <div className={isSelected ? \"todo todo-selected\" : \"todo\"}>{todo.title}</div>\r\n * });\r\n *\r\n */\r\nfunction expr(expr) {\r\n    if (!_isComputingDerivation())\r\n        console.warn(\"'expr' should only be used inside other reactive functions.\");\r\n    // optimization: would be more efficient if the expr itself wouldn't be evaluated first on the next change, but just a 'changed' signal would be fired\r\n    return computed(expr).get();\r\n}\n\nvar __assign$2 = (undefined && undefined.__assign) || function () {\r\n    __assign$2 = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign$2.apply(this, arguments);\r\n};\r\nvar memoizationId = 0;\r\nfunction createTransformer(transformer, arg2) {\r\n    invariant(typeof transformer === \"function\" && transformer.length < 2, \"createTransformer expects a function that accepts one argument\");\r\n    // Memoizes: object id -> reactive view that applies transformer to the object\r\n    var views = {};\r\n    var onCleanup = undefined;\r\n    var keepAlive = false;\r\n    var debugNameGenerator = undefined;\r\n    if (typeof arg2 === \"object\") {\r\n        onCleanup = arg2.onCleanup;\r\n        keepAlive = arg2.keepAlive !== undefined ? arg2.keepAlive : false;\r\n        debugNameGenerator = arg2.debugNameGenerator;\r\n    }\r\n    else if (typeof arg2 === \"function\") {\r\n        onCleanup = arg2;\r\n    }\r\n    function createView(sourceIdentifier, sourceObject) {\r\n        var latestValue;\r\n        var computedValueOptions = {};\r\n        if (typeof arg2 === \"object\") {\r\n            onCleanup = arg2.onCleanup;\r\n            debugNameGenerator = arg2.debugNameGenerator;\r\n            computedValueOptions = arg2;\r\n        }\r\n        else if (typeof arg2 === \"function\") {\r\n            onCleanup = arg2;\r\n        }\r\n        else {\r\n            onCleanup = undefined;\r\n            debugNameGenerator = undefined;\r\n        }\r\n        var prettifiedName = debugNameGenerator\r\n            ? debugNameGenerator(sourceObject)\r\n            : \"Transformer-\" + transformer.name + \"-\" + sourceIdentifier;\r\n        var expr = computed(function () {\r\n            return (latestValue = transformer(sourceObject));\r\n        }, __assign$2(__assign$2({}, computedValueOptions), { name: prettifiedName }));\r\n        if (!keepAlive) {\r\n            var disposer_1 = onBecomeUnobserved(expr, function () {\r\n                delete views[sourceIdentifier];\r\n                disposer_1();\r\n                if (onCleanup)\r\n                    onCleanup(latestValue, sourceObject);\r\n            });\r\n        }\r\n        return expr;\r\n    }\r\n    var memoWarned = false;\r\n    return function (object) {\r\n        var identifier = getMemoizationId(object);\r\n        var reactiveView = views[identifier];\r\n        if (reactiveView)\r\n            return reactiveView.get();\r\n        if (!keepAlive && !_isComputingDerivation()) {\r\n            if (!memoWarned) {\r\n                console.warn(\"invoking a transformer from outside a reactive context won't memorized \" +\r\n                    \"and is cleaned up immediately, unless keepAlive is set\");\r\n                memoWarned = true;\r\n            }\r\n            var value = transformer(object);\r\n            if (onCleanup)\r\n                onCleanup(value, object);\r\n            return value;\r\n        }\r\n        // Not in cache; create a reactive view\r\n        reactiveView = views[identifier] = createView(identifier, object);\r\n        return reactiveView.get();\r\n    };\r\n}\r\nfunction getMemoizationId(object) {\r\n    var objectType = typeof object;\r\n    if (objectType === \"string\")\r\n        return \"string:\" + object;\r\n    if (objectType === \"number\")\r\n        return \"number:\" + object;\r\n    if (object === null || (objectType !== \"object\" && objectType !== \"function\"))\r\n        throw new Error(\"[mobx-utils] transform expected an object, function, string or number, got: \" + String(object));\r\n    var tid = object.$transformId;\r\n    if (tid === undefined) {\r\n        tid = \"memoizationId:\" + ++memoizationId;\r\n        addHiddenProp(object, \"$transformId\", tid);\r\n    }\r\n    return tid;\r\n}\n\nfunction buildPath(entry) {\r\n    if (!entry)\r\n        return \"ROOT\";\r\n    var res = [];\r\n    while (entry.parent) {\r\n        res.push(entry.path);\r\n        entry = entry.parent;\r\n    }\r\n    return res.reverse().join(\"/\");\r\n}\r\nfunction isRecursivelyObservable(thing) {\r\n    return isObservableObject(thing) || isObservableArray(thing) || isObservableMap(thing);\r\n}\r\n/**\r\n * Given an object, deeply observes the given object.\r\n * It is like `observe` from mobx, but applied recursively, including all future children.\r\n *\r\n * Note that the given object cannot ever contain cycles and should be a tree.\r\n *\r\n * As benefit: path and root will be provided in the callback, so the signature of the listener is\r\n * (change, path, root) => void\r\n *\r\n * The returned disposer can be invoked to clean up the listener\r\n *\r\n * deepObserve cannot be used on computed values.\r\n *\r\n * @example\r\n * const disposer = deepObserve(target, (change, path) => {\r\n *    console.dir(change)\r\n * })\r\n */\r\nfunction deepObserve(target, listener) {\r\n    var entrySet = new WeakMap();\r\n    function genericListener(change) {\r\n        var entry = entrySet.get(change.object);\r\n        processChange(change, entry);\r\n        listener(change, buildPath(entry), target);\r\n    }\r\n    function processChange(change, parent) {\r\n        switch (change.type) {\r\n            // Object changes\r\n            case \"add\": // also for map\r\n                observeRecursively(change.newValue, parent, change.name);\r\n                break;\r\n            case \"update\": // also for array and map\r\n                unobserveRecursively(change.oldValue);\r\n                observeRecursively(change.newValue, parent, change.name || \"\" + change.index);\r\n                break;\r\n            case \"remove\": // object\r\n            case \"delete\": // map\r\n                unobserveRecursively(change.oldValue);\r\n                break;\r\n            // Array changes\r\n            case \"splice\":\r\n                change.removed.map(unobserveRecursively);\r\n                change.added.forEach(function (value, idx) {\r\n                    return observeRecursively(value, parent, \"\" + (change.index + idx));\r\n                });\r\n                // update paths\r\n                for (var i = change.index + change.addedCount; i < change.object.length; i++) {\r\n                    if (isRecursivelyObservable(change.object[i])) {\r\n                        var entry = entrySet.get(change.object[i]);\r\n                        if (entry)\r\n                            entry.path = \"\" + i;\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n    }\r\n    function observeRecursively(thing, parent, path) {\r\n        if (isRecursivelyObservable(thing)) {\r\n            var entry = entrySet.get(thing);\r\n            if (entry) {\r\n                if (entry.parent !== parent || entry.path !== path)\r\n                    // MWE: this constraint is artificial, and this tool could be made to work with cycles,\r\n                    // but it increases administration complexity, has tricky edge cases and the meaning of 'path'\r\n                    // would become less clear. So doesn't seem to be needed for now\r\n                    throw new Error(\"The same observable object cannot appear twice in the same tree,\" +\r\n                        (\" trying to assign it to '\" + buildPath(parent) + \"/\" + path + \"',\") +\r\n                        (\" but it already exists at '\" + buildPath(entry.parent) + \"/\" + entry.path + \"'\"));\r\n            }\r\n            else {\r\n                var entry_1 = {\r\n                    parent: parent,\r\n                    path: path,\r\n                    dispose: observe(thing, genericListener),\r\n                };\r\n                entrySet.set(thing, entry_1);\r\n                entries(thing).forEach(function (_a) {\r\n                    var key = _a[0], value = _a[1];\r\n                    return observeRecursively(value, entry_1, key);\r\n                });\r\n            }\r\n        }\r\n    }\r\n    function unobserveRecursively(thing) {\r\n        if (isRecursivelyObservable(thing)) {\r\n            var entry = entrySet.get(thing);\r\n            if (!entry)\r\n                return;\r\n            entrySet.delete(thing);\r\n            entry.dispose();\r\n            values(thing).forEach(unobserveRecursively);\r\n        }\r\n    }\r\n    observeRecursively(target, undefined, \"\");\r\n    return function () {\r\n        unobserveRecursively(target);\r\n    };\r\n}\n\nvar __extends = (undefined && undefined.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n/**\r\n * Reactively sorts a base observable array into multiple observable arrays based on the value of a\r\n * `groupBy: (item: T) => G` function.\r\n *\r\n * This observes the individual computed groupBy values and only updates the source and dest arrays\r\n * when there is an actual change, so this is far more efficient than, for example\r\n * `base.filter(i => groupBy(i) === 'we')`. Call #dispose() to stop tracking.\r\n *\r\n * No guarantees are made about the order of items in the grouped arrays.\r\n *\r\n * The resulting map of arrays is read-only. clear(), set(), delete() are not supported and\r\n * modifying the group arrays will lead to undefined behavior.\r\n *\r\n * NB: ObservableGroupMap relies on `Symbol`s. If you are targeting a platform which doesn't\r\n * support these natively, you will need to provide a polyfill.\r\n *\r\n * @param {array} base The array to sort into groups.\r\n * @param {function} groupBy The function used for grouping.\r\n * @param options Object with properties:\r\n *  `name`: Debug name of this ObservableGroupMap.\r\n *  `keyToName`: Function to create the debug names of the observable group arrays.\r\n *\r\n * @example\r\n * const slices = observable([\r\n *     { day: \"mo\", hours: 12 },\r\n *     { day: \"tu\", hours: 2 },\r\n * ])\r\n * const slicesByDay = new ObservableGroupMap(slices, (slice) => slice.day)\r\n * autorun(() => console.log(\r\n *     slicesByDay.get(\"mo\")?.length ?? 0,\r\n *     slicesByDay.get(\"we\"))) // outputs 1, undefined\r\n * slices[0].day = \"we\" // outputs 0, [{ day: \"we\", hours: 12 }]\r\n */\r\nvar ObservableGroupMap = /** @class */ (function (_super) {\r\n    __extends(ObservableGroupMap, _super);\r\n    function ObservableGroupMap(base, groupBy, _a) {\r\n        var _b = _a === void 0 ? {} : _a, _c = _b.name, name = _c === void 0 ? \"ogm\" + ((Math.random() * 1000) | 0) : _c, _d = _b.keyToName, keyToName = _d === void 0 ? function (x) { return \"\" + x; } : _d;\r\n        var _this = _super.call(this) || this;\r\n        _this._keyToName = keyToName;\r\n        _this._groupBy = groupBy;\r\n        _this._ogmInfoKey = Symbol(\"ogmInfo\" + name);\r\n        _this._base = base;\r\n        for (var i = 0; i < base.length; i++) {\r\n            _this._addItem(base[i]);\r\n        }\r\n        _this._disposeBaseObserver = observe(_this._base, function (change) {\r\n            if (\"splice\" === change.type) {\r\n                transaction(function () {\r\n                    for (var _i = 0, _a = change.removed; _i < _a.length; _i++) {\r\n                        var removed = _a[_i];\r\n                        _this._removeItem(removed);\r\n                    }\r\n                    for (var _b = 0, _c = change.added; _b < _c.length; _b++) {\r\n                        var added = _c[_b];\r\n                        _this._addItem(added);\r\n                    }\r\n                });\r\n            }\r\n            else if (\"update\" === change.type) {\r\n                transaction(function () {\r\n                    _this._removeItem(change.oldValue);\r\n                    _this._addItem(change.newValue);\r\n                });\r\n            }\r\n            else {\r\n                throw new Error(\"illegal state\");\r\n            }\r\n        });\r\n        return _this;\r\n    }\r\n    ObservableGroupMap.prototype.clear = function () {\r\n        throw new Error(\"not supported\");\r\n    };\r\n    ObservableGroupMap.prototype.delete = function (_key) {\r\n        throw new Error(\"not supported\");\r\n    };\r\n    ObservableGroupMap.prototype.set = function (_key, _value) {\r\n        throw new Error(\"not supported\");\r\n    };\r\n    /**\r\n     * Disposes all observers created during construction and removes state added to base array\r\n     * items.\r\n     */\r\n    ObservableGroupMap.prototype.dispose = function () {\r\n        this._disposeBaseObserver();\r\n        for (var i = 0; i < this._base.length; i++) {\r\n            var item = this._base[i];\r\n            var grouperItemInfo = item[this._ogmInfoKey];\r\n            grouperItemInfo.reaction();\r\n            delete item[this._ogmInfoKey];\r\n        }\r\n    };\r\n    ObservableGroupMap.prototype._getGroupArr = function (key) {\r\n        var result = _super.prototype.get.call(this, key);\r\n        if (undefined === result) {\r\n            result = observable([], { name: \"GroupArray[\" + this._keyToName(key) + \"]\", deep: false });\r\n            _super.prototype.set.call(this, key, result);\r\n        }\r\n        return result;\r\n    };\r\n    ObservableGroupMap.prototype._removeFromGroupArr = function (key, itemIndex) {\r\n        var arr = _super.prototype.get.call(this, key);\r\n        if (1 === arr.length) {\r\n            _super.prototype.delete.call(this, key);\r\n        }\r\n        else if (itemIndex === arr.length - 1) {\r\n            // last position in array\r\n            arr.length--;\r\n        }\r\n        else {\r\n            arr[itemIndex] = arr[arr.length - 1];\r\n            arr[itemIndex][this._ogmInfoKey].groupArrIndex = itemIndex;\r\n            arr.length--;\r\n        }\r\n    };\r\n    ObservableGroupMap.prototype._addItem = function (item) {\r\n        var _this = this;\r\n        var groupByValue = this._groupBy(item);\r\n        var groupArr = this._getGroupArr(groupByValue);\r\n        var value = {\r\n            groupByValue: groupByValue,\r\n            groupArrIndex: groupArr.length,\r\n            reaction: reaction(function () { return _this._groupBy(item); }, function (newGroupByValue, _r) {\r\n                var grouperItemInfo = item[_this._ogmInfoKey];\r\n                _this._removeFromGroupArr(grouperItemInfo.groupByValue, grouperItemInfo.groupArrIndex);\r\n                var newGroupArr = _this._getGroupArr(newGroupByValue);\r\n                var newGroupArrIndex = newGroupArr.length;\r\n                newGroupArr.push(item);\r\n                grouperItemInfo.groupByValue = newGroupByValue;\r\n                grouperItemInfo.groupArrIndex = newGroupArrIndex;\r\n            }),\r\n        };\r\n        Object.defineProperty(item, this._ogmInfoKey, {\r\n            configurable: true,\r\n            enumerable: false,\r\n            value: value,\r\n        });\r\n        groupArr.push(item);\r\n    };\r\n    ObservableGroupMap.prototype._removeItem = function (item) {\r\n        var grouperItemInfo = item[this._ogmInfoKey];\r\n        this._removeFromGroupArr(grouperItemInfo.groupByValue, grouperItemInfo.groupArrIndex);\r\n        grouperItemInfo.reaction();\r\n        delete item[this._ogmInfoKey];\r\n    };\r\n    return ObservableGroupMap;\r\n}(ObservableMap));\n\n/**\r\n * @private\r\n */\r\nvar DeepMapEntry = /** @class */ (function () {\r\n    function DeepMapEntry(base, args) {\r\n        this.base = base;\r\n        this.args = args;\r\n        this.closestIdx = 0;\r\n        this.isDisposed = false;\r\n        var current = (this.closest = this.root = base);\r\n        var i = 0;\r\n        for (; i < this.args.length - 1; i++) {\r\n            current = current.get(args[i]);\r\n            if (current)\r\n                this.closest = current;\r\n            else\r\n                break;\r\n        }\r\n        this.closestIdx = i;\r\n    }\r\n    DeepMapEntry.prototype.exists = function () {\r\n        this.assertNotDisposed();\r\n        var l = this.args.length;\r\n        return this.closestIdx >= l - 1 && this.closest.has(this.args[l - 1]);\r\n    };\r\n    DeepMapEntry.prototype.get = function () {\r\n        this.assertNotDisposed();\r\n        if (!this.exists())\r\n            throw new Error(\"Entry doesn't exist\");\r\n        return this.closest.get(this.args[this.args.length - 1]);\r\n    };\r\n    DeepMapEntry.prototype.set = function (value) {\r\n        this.assertNotDisposed();\r\n        var l = this.args.length;\r\n        var current = this.closest;\r\n        // create remaining maps\r\n        for (var i = this.closestIdx; i < l - 1; i++) {\r\n            var m = new Map();\r\n            current.set(this.args[i], m);\r\n            current = m;\r\n        }\r\n        this.closestIdx = l - 1;\r\n        this.closest = current;\r\n        current.set(this.args[l - 1], value);\r\n    };\r\n    DeepMapEntry.prototype.delete = function () {\r\n        this.assertNotDisposed();\r\n        if (!this.exists())\r\n            throw new Error(\"Entry doesn't exist\");\r\n        var l = this.args.length;\r\n        this.closest.delete(this.args[l - 1]);\r\n        // clean up remaining maps if needed (reconstruct stack first)\r\n        var c = this.root;\r\n        var maps = [c];\r\n        for (var i = 0; i < l - 1; i++) {\r\n            c = c.get(this.args[i]);\r\n            maps.push(c);\r\n        }\r\n        for (var i = maps.length - 1; i > 0; i--) {\r\n            if (maps[i].size === 0)\r\n                maps[i - 1].delete(this.args[i - 1]);\r\n        }\r\n        this.isDisposed = true;\r\n    };\r\n    DeepMapEntry.prototype.assertNotDisposed = function () {\r\n        // TODO: once this becomes annoying, we should introduce a reset method to re-run the constructor logic\r\n        if (this.isDisposed)\r\n            throw new Error(\"Concurrent modification exception\");\r\n    };\r\n    return DeepMapEntry;\r\n}());\r\n/**\r\n * @private\r\n */\r\nvar DeepMap = /** @class */ (function () {\r\n    function DeepMap() {\r\n        this.store = new Map();\r\n        this.argsLength = -1;\r\n    }\r\n    DeepMap.prototype.entry = function (args) {\r\n        if (this.argsLength === -1)\r\n            this.argsLength = args.length;\r\n        else if (this.argsLength !== args.length)\r\n            throw new Error(\"DeepMap should be used with functions with a consistent length, expected: \" + this.argsLength + \", got: \" + args.length);\r\n        if (this.last)\r\n            this.last.isDisposed = true;\r\n        return (this.last = new DeepMapEntry(this.store, args));\r\n    };\r\n    return DeepMap;\r\n}());\n\nvar __assign$3 = (undefined && undefined.__assign) || function () {\r\n    __assign$3 = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign$3.apply(this, arguments);\r\n};\r\n/**\r\n * computedFn takes a function with an arbitrary amount of arguments,\r\n * and memoizes the output of the function based on the arguments passed in.\r\n *\r\n * computedFn(fn) returns a function with the very same signature. There is no limit on the amount of arguments\r\n * that is accepted. However, the amount of arguments must be constant and default arguments are not supported.\r\n *\r\n * By default the output of a function call will only be memoized as long as the\r\n * output is being observed.\r\n *\r\n * The function passes into `computedFn` should be pure, not be an action and only be relying on\r\n * observables.\r\n *\r\n * Setting `keepAlive` to `true` will cause the output to be forcefully cached forever.\r\n * Note that this might introduce memory leaks!\r\n *\r\n * @example\r\n * const store = observable({\r\n    a: 1,\r\n    b: 2,\r\n    c: 3,\r\n    m: computedFn(function(x) {\r\n      return this.a * this.b * x\r\n    })\r\n  })\r\n\r\n  const d = autorun(() => {\r\n    // store.m(3) will be cached as long as this autorun is running\r\n    console.log(store.m(3) * store.c)\r\n  })\r\n *\r\n * @param fn\r\n * @param keepAliveOrOptions\r\n */\r\nfunction computedFn(fn, keepAliveOrOptions) {\r\n    if (keepAliveOrOptions === void 0) { keepAliveOrOptions = false; }\r\n    if (isAction(fn))\r\n        throw new Error(\"computedFn shouldn't be used on actions\");\r\n    var memoWarned = false;\r\n    var i = 0;\r\n    var opts = typeof keepAliveOrOptions === \"boolean\"\r\n        ? { keepAlive: keepAliveOrOptions }\r\n        : keepAliveOrOptions;\r\n    var d = new DeepMap();\r\n    return function () {\r\n        var _this = this;\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        var entry = d.entry(args);\r\n        // cache hit, return\r\n        if (entry.exists())\r\n            return entry.get().get();\r\n        // if function is invoked, and its a cache miss without reactive, there is no point in caching...\r\n        if (!opts.keepAlive && !_isComputingDerivation()) {\r\n            if (!memoWarned) {\r\n                console.warn(\"invoking a computedFn from outside an reactive context won't be memoized, unless keepAlive is set\");\r\n                memoWarned = true;\r\n            }\r\n            return fn.apply(this, args);\r\n        }\r\n        // create new entry\r\n        var c = computed(function () {\r\n            return fn.apply(_this, args);\r\n        }, __assign$3(__assign$3({}, opts), { name: \"computedFn(\" + fn.name + \"#\" + ++i + \")\" }));\r\n        entry.set(c);\r\n        // clean up if no longer observed\r\n        if (!opts.keepAlive)\r\n            onBecomeUnobserved(c, function () {\r\n                d.entry(args).delete();\r\n            });\r\n        // return current val\r\n        return c.get();\r\n    };\r\n}\n\nfunction decorateMethodOrField(decoratorName, decorateFn, target, prop, descriptor) {\r\n    if (descriptor) {\r\n        return decorateMethod(decoratorName, decorateFn, prop, descriptor);\r\n    }\r\n    else {\r\n        decorateField(decorateFn, target, prop);\r\n    }\r\n}\r\nfunction decorateMethod(decoratorName, decorateFn, prop, descriptor) {\r\n    if (descriptor.get !== undefined) {\r\n        return fail(decoratorName + \" cannot be used with getters\");\r\n    }\r\n    // babel / typescript\r\n    // @action method() { }\r\n    if (descriptor.value) {\r\n        // typescript\r\n        return {\r\n            value: decorateFn(prop, descriptor.value),\r\n            enumerable: false,\r\n            configurable: true,\r\n            writable: true,\r\n        };\r\n    }\r\n    // babel only: @action method = () => {}\r\n    var initializer = descriptor.initializer;\r\n    return {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        initializer: function () {\r\n            // N.B: we can't immediately invoke initializer; this would be wrong\r\n            return decorateFn(prop, initializer.call(this));\r\n        },\r\n    };\r\n}\r\nfunction decorateField(decorateFn, target, prop) {\r\n    // Simple property that writes on first invocation to the current instance\r\n    Object.defineProperty(target, prop, {\r\n        configurable: true,\r\n        enumerable: false,\r\n        get: function () {\r\n            return undefined;\r\n        },\r\n        set: function (value) {\r\n            addHiddenProp(this, prop, decorateFn(prop, value));\r\n        },\r\n    });\r\n}\n\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar runId = 0;\r\nvar unfinishedIds = new Set();\r\nvar currentlyActiveIds = new Set();\r\nvar inOrderExecution;\r\n{\r\n    var taskOrderPromise_1 = Promise.resolve();\r\n    var queueMicrotaskPolyfill_1;\r\n    if (typeof queueMicrotask !== \"undefined\") {\r\n        // use real implementation if possible in modern browsers/node\r\n        queueMicrotaskPolyfill_1 = queueMicrotask;\r\n    }\r\n    else if (typeof process !== \"undefined\" && process.nextTick) {\r\n        // fallback to node's process.nextTick in node <= 10\r\n        queueMicrotaskPolyfill_1 = function (cb) {\r\n            process.nextTick(cb);\r\n        };\r\n    }\r\n    else {\r\n        // use setTimeout for old browsers\r\n        queueMicrotaskPolyfill_1 = function (cb) {\r\n            setTimeout(cb, 0);\r\n        };\r\n    }\r\n    var idle_1 = function () {\r\n        return new Promise(function (r) {\r\n            queueMicrotaskPolyfill_1(r);\r\n        });\r\n    };\r\n    // we use this trick to force a proper order of execution\r\n    // even for immediately resolved promises\r\n    inOrderExecution = function () {\r\n        taskOrderPromise_1 = taskOrderPromise_1.then(idle_1);\r\n        return taskOrderPromise_1;\r\n    };\r\n}\r\nvar actionAsyncContextStack = [];\r\nfunction task(value) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var ctx, runId, actionName, args, scope, actionRunInfo, step, nextStep, ret, err_1, actionRunInfo_1;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    ctx = actionAsyncContextStack[actionAsyncContextStack.length - 1];\r\n                    if (!ctx) {\r\n                        fail$1(\"'actionAsync' context not present when running 'task'. did you await inside an 'actionAsync' without using 'task(promise)'? did you forget to await the task?\");\r\n                    }\r\n                    runId = ctx.runId, actionName = ctx.actionName, args = ctx.args, scope = ctx.scope, actionRunInfo = ctx.actionRunInfo, step = ctx.step;\r\n                    nextStep = step + 1;\r\n                    actionAsyncContextStack.pop();\r\n                    _endAction(actionRunInfo);\r\n                    currentlyActiveIds.delete(runId);\r\n                    _a.label = 1;\r\n                case 1:\r\n                    _a.trys.push([1, 4, 6, 7]);\r\n                    return [4 /*yield*/, value];\r\n                case 2:\r\n                    ret = _a.sent();\r\n                    return [4 /*yield*/, inOrderExecution()];\r\n                case 3:\r\n                    _a.sent();\r\n                    return [2 /*return*/, ret];\r\n                case 4:\r\n                    err_1 = _a.sent();\r\n                    return [4 /*yield*/, inOrderExecution()];\r\n                case 5:\r\n                    _a.sent();\r\n                    throw err_1;\r\n                case 6:\r\n                    // only restart if it not a dangling promise (the action is not yet finished)\r\n                    if (unfinishedIds.has(runId)) {\r\n                        actionRunInfo_1 = _startAction(getActionAsyncName(actionName, runId, nextStep), this, args);\r\n                        actionAsyncContextStack.push({\r\n                            runId: runId,\r\n                            step: nextStep,\r\n                            actionRunInfo: actionRunInfo_1,\r\n                            actionName: actionName,\r\n                            args: args,\r\n                            scope: scope,\r\n                        });\r\n                        currentlyActiveIds.add(runId);\r\n                    }\r\n                    return [7 /*endfinally*/];\r\n                case 7: return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\r\n// base\r\n/**\r\n * Alternative syntax for async actions, similar to `flow` but more compatible with\r\n * Typescript typings. Not to be confused with `asyncAction`, which is deprecated.\r\n *\r\n * `actionAsync` can be used either as a decorator or as a function.\r\n * It takes an async function that internally must use `await task(promise)` rather than\r\n * the standard `await promise`.\r\n *\r\n * When using the mobx devTools, an asyncAction will emit `action` events with names like:\r\n * * `\"fetchUsers - runid 6 - step 0\"`\r\n * * `\"fetchUsers - runid 6 - step 1\"`\r\n * * `\"fetchUsers - runid 6 - step 2\"`\r\n *\r\n * The `runId` represents the action instance. In other words, if `fetchUsers` is invoked\r\n * multiple times concurrently, the events with the same `runid` belong together.\r\n * The `step` number indicates the code block that is now being executed.\r\n *\r\n * @example\r\n * import {actionAsync, task} from \"mobx-utils\"\r\n *\r\n * let users = []\r\n *\r\n * const fetchUsers = actionAsync(\"fetchUsers\", async (url) => {\r\n *   const start = Date.now()\r\n *   // note the use of task when awaiting!\r\n *   const data = await task(window.fetch(url))\r\n *   users = await task(data.json())\r\n *   return start - Date.now()\r\n * })\r\n *\r\n * const time = await fetchUsers(\"http://users.com\")\r\n * console.log(\"Got users\", users, \"in \", time, \"ms\")\r\n *\r\n * @example\r\n * import {actionAsync, task} from \"mobx-utils\"\r\n *\r\n * mobx.configure({ enforceActions: \"observed\" }) // don't allow state modifications outside actions\r\n *\r\n * class Store {\r\n *   \\@observable githubProjects = []\r\n *   \\@observable = \"pending\" // \"pending\" / \"done\" / \"error\"\r\n *\r\n *   \\@actionAsync\r\n *   async fetchProjects() {\r\n *     this.githubProjects = []\r\n *     this.state = \"pending\"\r\n *     try {\r\n *       // note the use of task when awaiting!\r\n *       const projects = await task(fetchGithubProjectsSomehow())\r\n *       const filteredProjects = somePreprocessing(projects)\r\n *       // the asynchronous blocks will automatically be wrapped actions\r\n *       this.state = \"done\"\r\n *       this.githubProjects = filteredProjects\r\n *     } catch (error) {\r\n *        this.state = \"error\"\r\n *     }\r\n *   }\r\n * }\r\n */\r\nfunction actionAsync(arg1, arg2, arg3) {\r\n    // decorator\r\n    if (typeof arguments[1] === \"string\") {\r\n        return decorateMethodOrField(\"@actionAsync\", function (prop, v) {\r\n            return actionAsyncFn(prop, v);\r\n        }, arg1, arg2, arg3);\r\n    }\r\n    // direct invocation\r\n    var actionName = typeof arg1 === \"string\" ? arg1 : arg1.name || \"<unnamed action>\";\r\n    var fn = typeof arg1 === \"function\" ? arg1 : arg2;\r\n    return actionAsyncFn(actionName, fn);\r\n}\r\nfunction actionAsyncFn(actionName, fn) {\r\n    if (!_startAction || !_endAction) {\r\n        fail$1(\"'actionAsync' requires mobx >=5.13.1 or >=4.13.1\");\r\n    }\r\n    invariant(typeof fn === \"function\", \"'asyncAction' expects a function\");\r\n    if (typeof actionName !== \"string\" || !actionName)\r\n        fail$1(\"actions should have valid names, got: '\" + actionName + \"'\");\r\n    return function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var nextRunId, actionRunInfo, finish, promise, ret, err_2;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        nextRunId = runId++;\r\n                        unfinishedIds.add(nextRunId);\r\n                        actionRunInfo = _startAction(getActionAsyncName(actionName, nextRunId, 0), this, args);\r\n                        actionAsyncContextStack.push({\r\n                            runId: nextRunId,\r\n                            step: 0,\r\n                            actionRunInfo: actionRunInfo,\r\n                            actionName: actionName,\r\n                            args: args,\r\n                            scope: this,\r\n                        });\r\n                        currentlyActiveIds.add(nextRunId);\r\n                        finish = function (err) {\r\n                            unfinishedIds.delete(nextRunId);\r\n                            var ctx = actionAsyncContextStack.pop();\r\n                            if (!ctx || ctx.runId !== nextRunId) {\r\n                                // push it back if invalid\r\n                                if (ctx) {\r\n                                    actionAsyncContextStack.push(ctx);\r\n                                }\r\n                                var msg = \"invalid 'actionAsync' context when finishing action '\" + actionName + \"'.\";\r\n                                if (!ctx) {\r\n                                    msg += \" no action context could be found instead.\";\r\n                                }\r\n                                else {\r\n                                    msg += \" an action context for '\" + ctx.actionName + \"' was found instead.\";\r\n                                }\r\n                                msg +=\r\n                                    \" did you await inside an 'actionAsync' without using 'task(promise)'? did you forget to await the task?\";\r\n                                fail$1(msg);\r\n                            }\r\n                            ctx.actionRunInfo.error = err;\r\n                            _endAction(ctx.actionRunInfo);\r\n                            currentlyActiveIds.delete(nextRunId);\r\n                            if (err) {\r\n                                throw err;\r\n                            }\r\n                        };\r\n                        try {\r\n                            promise = fn.apply(this, args);\r\n                        }\r\n                        catch (err) {\r\n                            finish(err);\r\n                        }\r\n                        // are we done sync? (no task run)\r\n                        if (currentlyActiveIds.has(nextRunId)) {\r\n                            finish(undefined);\r\n                            return [2 /*return*/, promise];\r\n                        }\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        _a.trys.push([1, 3, , 4]);\r\n                        return [4 /*yield*/, promise];\r\n                    case 2:\r\n                        ret = _a.sent();\r\n                        return [3 /*break*/, 4];\r\n                    case 3:\r\n                        err_2 = _a.sent();\r\n                        finish(err_2);\r\n                        return [3 /*break*/, 4];\r\n                    case 4:\r\n                        finish(undefined);\r\n                        return [2 /*return*/, ret];\r\n                }\r\n            });\r\n        });\r\n    };\r\n}\r\nfunction getActionAsyncName(actionName, runId, step) {\r\n    return actionName + \" - runid \" + runId + \" - step \" + step;\r\n}\n\nexport { FULFILLED, IDENTITY, NOOP, ObservableGroupMap, PENDING, REJECTED, ViewModel, actionAsync, addHiddenProp, asyncAction, chunkProcessor, computedFn, createTransformer, createViewModel, deepObserve, deprecated, expr, fail$1 as fail, fromPromise, fromResource, fromStream, getAllMethodsAndProperties, invariant, isPromiseBasedObservable, keepAlive, lazyObservable, moveItem, now, queueProcessor, task, toStream, whenAsync, whenWithTimeout };\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { debounce, isEqual, last, cloneDeep } from 'lodash-es';\nimport { deepObserve } from 'mobx-utils';\nimport { EventType } from '../constant';\nvar History = /** @class */ (function () {\n    function History(eventCenter) {\n        this.undos = [];\n        this.redos = [];\n        this.callbacks = [];\n        this.stopWatch = null;\n        this.curData = null;\n        this.maxSize = 50;\n        // 500ms\n        // waitTimeHistoryundos\n        this.waitTime = 100;\n        this.eventCenter = eventCenter;\n    }\n    History.prototype.add = function (data) {\n        if (isEqual(last(this.undos), data))\n            return;\n        this.undos.push(data);\n        // undoadd.\n        // addundo\n        // redos\n        if (!isEqual(this.curData, data)) {\n            this.redos = [];\n        }\n        this.eventCenter.emit(EventType.HISTORY_CHANGE, {\n            data: {\n                undos: this.undos,\n                redos: this.redos,\n                undoAble: this.undoAble(),\n                redoAble: this.redoAble(),\n            },\n        });\n        if (this.undos.length > this.maxSize) {\n            this.undos.shift();\n        }\n    };\n    History.prototype.undoAble = function () {\n        // undos\n        return this.undos.length > 1;\n    };\n    // 1) undo\n    // 2) graphModelnodesedges\n    // 3) graphModelwatch\n    // 4) watchadd\n    History.prototype.undo = function () {\n        if (!this.undoAble())\n            return;\n        var preData = this.undos.pop();\n        this.redos.push(preData);\n        var curData = this.undos.pop();\n        this.curData = cloneDeep(curData);\n        return curData;\n    };\n    History.prototype.redoAble = function () {\n        return this.redos.length > 0;\n    };\n    History.prototype.redo = function () {\n        if (!this.redoAble())\n            return;\n        var curData = this.redos.pop();\n        this.curData = cloneDeep(curData);\n        return curData;\n    };\n    History.prototype.watch = function (model) {\n        var _this = this;\n        this.stopWatch && this.stopWatch();\n        // watchmodelredos\n        this.undos.push(model.modelToGraphData());\n        this.stopWatch = deepObserve(\n        // TODOThe same observable object cannot appear twice in the same tree \n        //  setAttributes  nodeModel  observable \n        // eg:\n        // setAttributes() {\n        //   this.width = 120\n        //   this.height = 50\n        //\n        //   if (this.text) {\n        //     this.properties.text = this.text;\n        //     this.text.value = '';\n        //   }\n        // }\n        //  cloneDeep  observable \n        // https://stackoverflow.com/questions/55328504/a-node-cannot-exists-twice-in-the-state-tree-mobx-state-tree\n        // cloneDeep(model),\n        model, debounce(function () {\n            // model redos\n            //  redos\n            var data = model.modelToHistoryData();\n            if (data) {\n                _this.add(__assign({}, data));\n            }\n        }, this.waitTime));\n    };\n    History.prototype.destroy = function () {\n        this.undos = [];\n        this.redos = [];\n        this.curData = null;\n        this.stopWatch && this.stopWatch();\n    };\n    return History;\n}());\nexport { History };\nexport default History;\n","/*global define:false */\n/**\n * Copyright 2012-2017 Craig Campbell\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * Mousetrap is a simple keyboard shortcut library for Javascript with\n * no external dependencies\n *\n * @version 1.6.5\n * @url craig.is/killing/mice\n */\n(function(window, document, undefined) {\n\n    // Check if mousetrap is used inside browser, if not, return\n    if (!window) {\n        return;\n    }\n\n    /**\n     * mapping of special keycodes to their corresponding keys\n     *\n     * everything in this dictionary cannot use keypress events\n     * so it has to be here to map to the correct keycodes for\n     * keyup/keydown events\n     *\n     * @type {Object}\n     */\n    var _MAP = {\n        8: 'backspace',\n        9: 'tab',\n        13: 'enter',\n        16: 'shift',\n        17: 'ctrl',\n        18: 'alt',\n        20: 'capslock',\n        27: 'esc',\n        32: 'space',\n        33: 'pageup',\n        34: 'pagedown',\n        35: 'end',\n        36: 'home',\n        37: 'left',\n        38: 'up',\n        39: 'right',\n        40: 'down',\n        45: 'ins',\n        46: 'del',\n        91: 'meta',\n        93: 'meta',\n        224: 'meta'\n    };\n\n    /**\n     * mapping for special characters so they can support\n     *\n     * this dictionary is only used incase you want to bind a\n     * keyup or keydown event to one of these keys\n     *\n     * @type {Object}\n     */\n    var _KEYCODE_MAP = {\n        106: '*',\n        107: '+',\n        109: '-',\n        110: '.',\n        111 : '/',\n        186: ';',\n        187: '=',\n        188: ',',\n        189: '-',\n        190: '.',\n        191: '/',\n        192: '`',\n        219: '[',\n        220: '\\\\',\n        221: ']',\n        222: '\\''\n    };\n\n    /**\n     * this is a mapping of keys that require shift on a US keypad\n     * back to the non shift equivelents\n     *\n     * this is so you can use keyup events with these keys\n     *\n     * note that this will only work reliably on US keyboards\n     *\n     * @type {Object}\n     */\n    var _SHIFT_MAP = {\n        '~': '`',\n        '!': '1',\n        '@': '2',\n        '#': '3',\n        '$': '4',\n        '%': '5',\n        '^': '6',\n        '&': '7',\n        '*': '8',\n        '(': '9',\n        ')': '0',\n        '_': '-',\n        '+': '=',\n        ':': ';',\n        '\\\"': '\\'',\n        '<': ',',\n        '>': '.',\n        '?': '/',\n        '|': '\\\\'\n    };\n\n    /**\n     * this is a list of special strings you can use to map\n     * to modifier keys when you specify your keyboard shortcuts\n     *\n     * @type {Object}\n     */\n    var _SPECIAL_ALIASES = {\n        'option': 'alt',\n        'command': 'meta',\n        'return': 'enter',\n        'escape': 'esc',\n        'plus': '+',\n        'mod': /Mac|iPod|iPhone|iPad/.test(navigator.platform) ? 'meta' : 'ctrl'\n    };\n\n    /**\n     * variable to store the flipped version of _MAP from above\n     * needed to check if we should use keypress or not when no action\n     * is specified\n     *\n     * @type {Object|undefined}\n     */\n    var _REVERSE_MAP;\n\n    /**\n     * loop through the f keys, f1 to f19 and add them to the map\n     * programatically\n     */\n    for (var i = 1; i < 20; ++i) {\n        _MAP[111 + i] = 'f' + i;\n    }\n\n    /**\n     * loop through to map numbers on the numeric keypad\n     */\n    for (i = 0; i <= 9; ++i) {\n\n        // This needs to use a string cause otherwise since 0 is falsey\n        // mousetrap will never fire for numpad 0 pressed as part of a keydown\n        // event.\n        //\n        // @see https://github.com/ccampbell/mousetrap/pull/258\n        _MAP[i + 96] = i.toString();\n    }\n\n    /**\n     * cross browser add event method\n     *\n     * @param {Element|HTMLDocument} object\n     * @param {string} type\n     * @param {Function} callback\n     * @returns void\n     */\n    function _addEvent(object, type, callback) {\n        if (object.addEventListener) {\n            object.addEventListener(type, callback, false);\n            return;\n        }\n\n        object.attachEvent('on' + type, callback);\n    }\n\n    /**\n     * takes the event and returns the key character\n     *\n     * @param {Event} e\n     * @return {string}\n     */\n    function _characterFromEvent(e) {\n\n        // for keypress events we should return the character as is\n        if (e.type == 'keypress') {\n            var character = String.fromCharCode(e.which);\n\n            // if the shift key is not pressed then it is safe to assume\n            // that we want the character to be lowercase.  this means if\n            // you accidentally have caps lock on then your key bindings\n            // will continue to work\n            //\n            // the only side effect that might not be desired is if you\n            // bind something like 'A' cause you want to trigger an\n            // event when capital A is pressed caps lock will no longer\n            // trigger the event.  shift+a will though.\n            if (!e.shiftKey) {\n                character = character.toLowerCase();\n            }\n\n            return character;\n        }\n\n        // for non keypress events the special maps are needed\n        if (_MAP[e.which]) {\n            return _MAP[e.which];\n        }\n\n        if (_KEYCODE_MAP[e.which]) {\n            return _KEYCODE_MAP[e.which];\n        }\n\n        // if it is not in the special map\n\n        // with keydown and keyup events the character seems to always\n        // come in as an uppercase character whether you are pressing shift\n        // or not.  we should make sure it is always lowercase for comparisons\n        return String.fromCharCode(e.which).toLowerCase();\n    }\n\n    /**\n     * checks if two arrays are equal\n     *\n     * @param {Array} modifiers1\n     * @param {Array} modifiers2\n     * @returns {boolean}\n     */\n    function _modifiersMatch(modifiers1, modifiers2) {\n        return modifiers1.sort().join(',') === modifiers2.sort().join(',');\n    }\n\n    /**\n     * takes a key event and figures out what the modifiers are\n     *\n     * @param {Event} e\n     * @returns {Array}\n     */\n    function _eventModifiers(e) {\n        var modifiers = [];\n\n        if (e.shiftKey) {\n            modifiers.push('shift');\n        }\n\n        if (e.altKey) {\n            modifiers.push('alt');\n        }\n\n        if (e.ctrlKey) {\n            modifiers.push('ctrl');\n        }\n\n        if (e.metaKey) {\n            modifiers.push('meta');\n        }\n\n        return modifiers;\n    }\n\n    /**\n     * prevents default for this event\n     *\n     * @param {Event} e\n     * @returns void\n     */\n    function _preventDefault(e) {\n        if (e.preventDefault) {\n            e.preventDefault();\n            return;\n        }\n\n        e.returnValue = false;\n    }\n\n    /**\n     * stops propogation for this event\n     *\n     * @param {Event} e\n     * @returns void\n     */\n    function _stopPropagation(e) {\n        if (e.stopPropagation) {\n            e.stopPropagation();\n            return;\n        }\n\n        e.cancelBubble = true;\n    }\n\n    /**\n     * determines if the keycode specified is a modifier key or not\n     *\n     * @param {string} key\n     * @returns {boolean}\n     */\n    function _isModifier(key) {\n        return key == 'shift' || key == 'ctrl' || key == 'alt' || key == 'meta';\n    }\n\n    /**\n     * reverses the map lookup so that we can look for specific keys\n     * to see what can and can't use keypress\n     *\n     * @return {Object}\n     */\n    function _getReverseMap() {\n        if (!_REVERSE_MAP) {\n            _REVERSE_MAP = {};\n            for (var key in _MAP) {\n\n                // pull out the numeric keypad from here cause keypress should\n                // be able to detect the keys from the character\n                if (key > 95 && key < 112) {\n                    continue;\n                }\n\n                if (_MAP.hasOwnProperty(key)) {\n                    _REVERSE_MAP[_MAP[key]] = key;\n                }\n            }\n        }\n        return _REVERSE_MAP;\n    }\n\n    /**\n     * picks the best action based on the key combination\n     *\n     * @param {string} key - character for key\n     * @param {Array} modifiers\n     * @param {string=} action passed in\n     */\n    function _pickBestAction(key, modifiers, action) {\n\n        // if no action was picked in we should try to pick the one\n        // that we think would work best for this key\n        if (!action) {\n            action = _getReverseMap()[key] ? 'keydown' : 'keypress';\n        }\n\n        // modifier keys don't work as expected with keypress,\n        // switch to keydown\n        if (action == 'keypress' && modifiers.length) {\n            action = 'keydown';\n        }\n\n        return action;\n    }\n\n    /**\n     * Converts from a string key combination to an array\n     *\n     * @param  {string} combination like \"command+shift+l\"\n     * @return {Array}\n     */\n    function _keysFromString(combination) {\n        if (combination === '+') {\n            return ['+'];\n        }\n\n        combination = combination.replace(/\\+{2}/g, '+plus');\n        return combination.split('+');\n    }\n\n    /**\n     * Gets info for a specific key combination\n     *\n     * @param  {string} combination key combination (\"command+s\" or \"a\" or \"*\")\n     * @param  {string=} action\n     * @returns {Object}\n     */\n    function _getKeyInfo(combination, action) {\n        var keys;\n        var key;\n        var i;\n        var modifiers = [];\n\n        // take the keys from this pattern and figure out what the actual\n        // pattern is all about\n        keys = _keysFromString(combination);\n\n        for (i = 0; i < keys.length; ++i) {\n            key = keys[i];\n\n            // normalize key names\n            if (_SPECIAL_ALIASES[key]) {\n                key = _SPECIAL_ALIASES[key];\n            }\n\n            // if this is not a keypress event then we should\n            // be smart about using shift keys\n            // this will only work for US keyboards however\n            if (action && action != 'keypress' && _SHIFT_MAP[key]) {\n                key = _SHIFT_MAP[key];\n                modifiers.push('shift');\n            }\n\n            // if this key is a modifier then add it to the list of modifiers\n            if (_isModifier(key)) {\n                modifiers.push(key);\n            }\n        }\n\n        // depending on what the key combination is\n        // we will try to pick the best event for it\n        action = _pickBestAction(key, modifiers, action);\n\n        return {\n            key: key,\n            modifiers: modifiers,\n            action: action\n        };\n    }\n\n    function _belongsTo(element, ancestor) {\n        if (element === null || element === document) {\n            return false;\n        }\n\n        if (element === ancestor) {\n            return true;\n        }\n\n        return _belongsTo(element.parentNode, ancestor);\n    }\n\n    function Mousetrap(targetElement) {\n        var self = this;\n\n        targetElement = targetElement || document;\n\n        if (!(self instanceof Mousetrap)) {\n            return new Mousetrap(targetElement);\n        }\n\n        /**\n         * element to attach key events to\n         *\n         * @type {Element}\n         */\n        self.target = targetElement;\n\n        /**\n         * a list of all the callbacks setup via Mousetrap.bind()\n         *\n         * @type {Object}\n         */\n        self._callbacks = {};\n\n        /**\n         * direct map of string combinations to callbacks used for trigger()\n         *\n         * @type {Object}\n         */\n        self._directMap = {};\n\n        /**\n         * keeps track of what level each sequence is at since multiple\n         * sequences can start out with the same sequence\n         *\n         * @type {Object}\n         */\n        var _sequenceLevels = {};\n\n        /**\n         * variable to store the setTimeout call\n         *\n         * @type {null|number}\n         */\n        var _resetTimer;\n\n        /**\n         * temporary state where we will ignore the next keyup\n         *\n         * @type {boolean|string}\n         */\n        var _ignoreNextKeyup = false;\n\n        /**\n         * temporary state where we will ignore the next keypress\n         *\n         * @type {boolean}\n         */\n        var _ignoreNextKeypress = false;\n\n        /**\n         * are we currently inside of a sequence?\n         * type of action (\"keyup\" or \"keydown\" or \"keypress\") or false\n         *\n         * @type {boolean|string}\n         */\n        var _nextExpectedAction = false;\n\n        /**\n         * resets all sequence counters except for the ones passed in\n         *\n         * @param {Object} doNotReset\n         * @returns void\n         */\n        function _resetSequences(doNotReset) {\n            doNotReset = doNotReset || {};\n\n            var activeSequences = false,\n                key;\n\n            for (key in _sequenceLevels) {\n                if (doNotReset[key]) {\n                    activeSequences = true;\n                    continue;\n                }\n                _sequenceLevels[key] = 0;\n            }\n\n            if (!activeSequences) {\n                _nextExpectedAction = false;\n            }\n        }\n\n        /**\n         * finds all callbacks that match based on the keycode, modifiers,\n         * and action\n         *\n         * @param {string} character\n         * @param {Array} modifiers\n         * @param {Event|Object} e\n         * @param {string=} sequenceName - name of the sequence we are looking for\n         * @param {string=} combination\n         * @param {number=} level\n         * @returns {Array}\n         */\n        function _getMatches(character, modifiers, e, sequenceName, combination, level) {\n            var i;\n            var callback;\n            var matches = [];\n            var action = e.type;\n\n            // if there are no events related to this keycode\n            if (!self._callbacks[character]) {\n                return [];\n            }\n\n            // if a modifier key is coming up on its own we should allow it\n            if (action == 'keyup' && _isModifier(character)) {\n                modifiers = [character];\n            }\n\n            // loop through all callbacks for the key that was pressed\n            // and see if any of them match\n            for (i = 0; i < self._callbacks[character].length; ++i) {\n                callback = self._callbacks[character][i];\n\n                // if a sequence name is not specified, but this is a sequence at\n                // the wrong level then move onto the next match\n                if (!sequenceName && callback.seq && _sequenceLevels[callback.seq] != callback.level) {\n                    continue;\n                }\n\n                // if the action we are looking for doesn't match the action we got\n                // then we should keep going\n                if (action != callback.action) {\n                    continue;\n                }\n\n                // if this is a keypress event and the meta key and control key\n                // are not pressed that means that we need to only look at the\n                // character, otherwise check the modifiers as well\n                //\n                // chrome will not fire a keypress if meta or control is down\n                // safari will fire a keypress if meta or meta+shift is down\n                // firefox will fire a keypress if meta or control is down\n                if ((action == 'keypress' && !e.metaKey && !e.ctrlKey) || _modifiersMatch(modifiers, callback.modifiers)) {\n\n                    // when you bind a combination or sequence a second time it\n                    // should overwrite the first one.  if a sequenceName or\n                    // combination is specified in this call it does just that\n                    //\n                    // @todo make deleting its own method?\n                    var deleteCombo = !sequenceName && callback.combo == combination;\n                    var deleteSequence = sequenceName && callback.seq == sequenceName && callback.level == level;\n                    if (deleteCombo || deleteSequence) {\n                        self._callbacks[character].splice(i, 1);\n                    }\n\n                    matches.push(callback);\n                }\n            }\n\n            return matches;\n        }\n\n        /**\n         * actually calls the callback function\n         *\n         * if your callback function returns false this will use the jquery\n         * convention - prevent default and stop propogation on the event\n         *\n         * @param {Function} callback\n         * @param {Event} e\n         * @returns void\n         */\n        function _fireCallback(callback, e, combo, sequence) {\n\n            // if this event should not happen stop here\n            if (self.stopCallback(e, e.target || e.srcElement, combo, sequence)) {\n                return;\n            }\n\n            if (callback(e, combo) === false) {\n                _preventDefault(e);\n                _stopPropagation(e);\n            }\n        }\n\n        /**\n         * handles a character key event\n         *\n         * @param {string} character\n         * @param {Array} modifiers\n         * @param {Event} e\n         * @returns void\n         */\n        self._handleKey = function(character, modifiers, e) {\n            var callbacks = _getMatches(character, modifiers, e);\n            var i;\n            var doNotReset = {};\n            var maxLevel = 0;\n            var processedSequenceCallback = false;\n\n            // Calculate the maxLevel for sequences so we can only execute the longest callback sequence\n            for (i = 0; i < callbacks.length; ++i) {\n                if (callbacks[i].seq) {\n                    maxLevel = Math.max(maxLevel, callbacks[i].level);\n                }\n            }\n\n            // loop through matching callbacks for this key event\n            for (i = 0; i < callbacks.length; ++i) {\n\n                // fire for all sequence callbacks\n                // this is because if for example you have multiple sequences\n                // bound such as \"g i\" and \"g t\" they both need to fire the\n                // callback for matching g cause otherwise you can only ever\n                // match the first one\n                if (callbacks[i].seq) {\n\n                    // only fire callbacks for the maxLevel to prevent\n                    // subsequences from also firing\n                    //\n                    // for example 'a option b' should not cause 'option b' to fire\n                    // even though 'option b' is part of the other sequence\n                    //\n                    // any sequences that do not match here will be discarded\n                    // below by the _resetSequences call\n                    if (callbacks[i].level != maxLevel) {\n                        continue;\n                    }\n\n                    processedSequenceCallback = true;\n\n                    // keep a list of which sequences were matches for later\n                    doNotReset[callbacks[i].seq] = 1;\n                    _fireCallback(callbacks[i].callback, e, callbacks[i].combo, callbacks[i].seq);\n                    continue;\n                }\n\n                // if there were no sequence matches but we are still here\n                // that means this is a regular match so we should fire that\n                if (!processedSequenceCallback) {\n                    _fireCallback(callbacks[i].callback, e, callbacks[i].combo);\n                }\n            }\n\n            // if the key you pressed matches the type of sequence without\n            // being a modifier (ie \"keyup\" or \"keypress\") then we should\n            // reset all sequences that were not matched by this event\n            //\n            // this is so, for example, if you have the sequence \"h a t\" and you\n            // type \"h e a r t\" it does not match.  in this case the \"e\" will\n            // cause the sequence to reset\n            //\n            // modifier keys are ignored because you can have a sequence\n            // that contains modifiers such as \"enter ctrl+space\" and in most\n            // cases the modifier key will be pressed before the next key\n            //\n            // also if you have a sequence such as \"ctrl+b a\" then pressing the\n            // \"b\" key will trigger a \"keypress\" and a \"keydown\"\n            //\n            // the \"keydown\" is expected when there is a modifier, but the\n            // \"keypress\" ends up matching the _nextExpectedAction since it occurs\n            // after and that causes the sequence to reset\n            //\n            // we ignore keypresses in a sequence that directly follow a keydown\n            // for the same character\n            var ignoreThisKeypress = e.type == 'keypress' && _ignoreNextKeypress;\n            if (e.type == _nextExpectedAction && !_isModifier(character) && !ignoreThisKeypress) {\n                _resetSequences(doNotReset);\n            }\n\n            _ignoreNextKeypress = processedSequenceCallback && e.type == 'keydown';\n        };\n\n        /**\n         * handles a keydown event\n         *\n         * @param {Event} e\n         * @returns void\n         */\n        function _handleKeyEvent(e) {\n\n            // normalize e.which for key events\n            // @see http://stackoverflow.com/questions/4285627/javascript-keycode-vs-charcode-utter-confusion\n            if (typeof e.which !== 'number') {\n                e.which = e.keyCode;\n            }\n\n            var character = _characterFromEvent(e);\n\n            // no character found then stop\n            if (!character) {\n                return;\n            }\n\n            // need to use === for the character check because the character can be 0\n            if (e.type == 'keyup' && _ignoreNextKeyup === character) {\n                _ignoreNextKeyup = false;\n                return;\n            }\n\n            self.handleKey(character, _eventModifiers(e), e);\n        }\n\n        /**\n         * called to set a 1 second timeout on the specified sequence\n         *\n         * this is so after each key press in the sequence you have 1 second\n         * to press the next key before you have to start over\n         *\n         * @returns void\n         */\n        function _resetSequenceTimer() {\n            clearTimeout(_resetTimer);\n            _resetTimer = setTimeout(_resetSequences, 1000);\n        }\n\n        /**\n         * binds a key sequence to an event\n         *\n         * @param {string} combo - combo specified in bind call\n         * @param {Array} keys\n         * @param {Function} callback\n         * @param {string=} action\n         * @returns void\n         */\n        function _bindSequence(combo, keys, callback, action) {\n\n            // start off by adding a sequence level record for this combination\n            // and setting the level to 0\n            _sequenceLevels[combo] = 0;\n\n            /**\n             * callback to increase the sequence level for this sequence and reset\n             * all other sequences that were active\n             *\n             * @param {string} nextAction\n             * @returns {Function}\n             */\n            function _increaseSequence(nextAction) {\n                return function() {\n                    _nextExpectedAction = nextAction;\n                    ++_sequenceLevels[combo];\n                    _resetSequenceTimer();\n                };\n            }\n\n            /**\n             * wraps the specified callback inside of another function in order\n             * to reset all sequence counters as soon as this sequence is done\n             *\n             * @param {Event} e\n             * @returns void\n             */\n            function _callbackAndReset(e) {\n                _fireCallback(callback, e, combo);\n\n                // we should ignore the next key up if the action is key down\n                // or keypress.  this is so if you finish a sequence and\n                // release the key the final key will not trigger a keyup\n                if (action !== 'keyup') {\n                    _ignoreNextKeyup = _characterFromEvent(e);\n                }\n\n                // weird race condition if a sequence ends with the key\n                // another sequence begins with\n                setTimeout(_resetSequences, 10);\n            }\n\n            // loop through keys one at a time and bind the appropriate callback\n            // function.  for any key leading up to the final one it should\n            // increase the sequence. after the final, it should reset all sequences\n            //\n            // if an action is specified in the original bind call then that will\n            // be used throughout.  otherwise we will pass the action that the\n            // next key in the sequence should match.  this allows a sequence\n            // to mix and match keypress and keydown events depending on which\n            // ones are better suited to the key provided\n            for (var i = 0; i < keys.length; ++i) {\n                var isFinal = i + 1 === keys.length;\n                var wrappedCallback = isFinal ? _callbackAndReset : _increaseSequence(action || _getKeyInfo(keys[i + 1]).action);\n                _bindSingle(keys[i], wrappedCallback, action, combo, i);\n            }\n        }\n\n        /**\n         * binds a single keyboard combination\n         *\n         * @param {string} combination\n         * @param {Function} callback\n         * @param {string=} action\n         * @param {string=} sequenceName - name of sequence if part of sequence\n         * @param {number=} level - what part of the sequence the command is\n         * @returns void\n         */\n        function _bindSingle(combination, callback, action, sequenceName, level) {\n\n            // store a direct mapped reference for use with Mousetrap.trigger\n            self._directMap[combination + ':' + action] = callback;\n\n            // make sure multiple spaces in a row become a single space\n            combination = combination.replace(/\\s+/g, ' ');\n\n            var sequence = combination.split(' ');\n            var info;\n\n            // if this pattern is a sequence of keys then run through this method\n            // to reprocess each pattern one key at a time\n            if (sequence.length > 1) {\n                _bindSequence(combination, sequence, callback, action);\n                return;\n            }\n\n            info = _getKeyInfo(combination, action);\n\n            // make sure to initialize array if this is the first time\n            // a callback is added for this key\n            self._callbacks[info.key] = self._callbacks[info.key] || [];\n\n            // remove an existing match if there is one\n            _getMatches(info.key, info.modifiers, {type: info.action}, sequenceName, combination, level);\n\n            // add this call back to the array\n            // if it is a sequence put it at the beginning\n            // if not put it at the end\n            //\n            // this is important because the way these are processed expects\n            // the sequence ones to come first\n            self._callbacks[info.key][sequenceName ? 'unshift' : 'push']({\n                callback: callback,\n                modifiers: info.modifiers,\n                action: info.action,\n                seq: sequenceName,\n                level: level,\n                combo: combination\n            });\n        }\n\n        /**\n         * binds multiple combinations to the same callback\n         *\n         * @param {Array} combinations\n         * @param {Function} callback\n         * @param {string|undefined} action\n         * @returns void\n         */\n        self._bindMultiple = function(combinations, callback, action) {\n            for (var i = 0; i < combinations.length; ++i) {\n                _bindSingle(combinations[i], callback, action);\n            }\n        };\n\n        // start!\n        _addEvent(targetElement, 'keypress', _handleKeyEvent);\n        _addEvent(targetElement, 'keydown', _handleKeyEvent);\n        _addEvent(targetElement, 'keyup', _handleKeyEvent);\n    }\n\n    /**\n     * binds an event to mousetrap\n     *\n     * can be a single key, a combination of keys separated with +,\n     * an array of keys, or a sequence of keys separated by spaces\n     *\n     * be sure to list the modifier keys first to make sure that the\n     * correct key ends up getting bound (the last key in the pattern)\n     *\n     * @param {string|Array} keys\n     * @param {Function} callback\n     * @param {string=} action - 'keypress', 'keydown', or 'keyup'\n     * @returns void\n     */\n    Mousetrap.prototype.bind = function(keys, callback, action) {\n        var self = this;\n        keys = keys instanceof Array ? keys : [keys];\n        self._bindMultiple.call(self, keys, callback, action);\n        return self;\n    };\n\n    /**\n     * unbinds an event to mousetrap\n     *\n     * the unbinding sets the callback function of the specified key combo\n     * to an empty function and deletes the corresponding key in the\n     * _directMap dict.\n     *\n     * TODO: actually remove this from the _callbacks dictionary instead\n     * of binding an empty function\n     *\n     * the keycombo+action has to be exactly the same as\n     * it was defined in the bind method\n     *\n     * @param {string|Array} keys\n     * @param {string} action\n     * @returns void\n     */\n    Mousetrap.prototype.unbind = function(keys, action) {\n        var self = this;\n        return self.bind.call(self, keys, function() {}, action);\n    };\n\n    /**\n     * triggers an event that has already been bound\n     *\n     * @param {string} keys\n     * @param {string=} action\n     * @returns void\n     */\n    Mousetrap.prototype.trigger = function(keys, action) {\n        var self = this;\n        if (self._directMap[keys + ':' + action]) {\n            self._directMap[keys + ':' + action]({}, keys);\n        }\n        return self;\n    };\n\n    /**\n     * resets the library back to its initial state.  this is useful\n     * if you want to clear out the current keyboard shortcuts and bind\n     * new ones - for example if you switch to another page\n     *\n     * @returns void\n     */\n    Mousetrap.prototype.reset = function() {\n        var self = this;\n        self._callbacks = {};\n        self._directMap = {};\n        return self;\n    };\n\n    /**\n     * should we stop this event before firing off callbacks\n     *\n     * @param {Event} e\n     * @param {Element} element\n     * @return {boolean}\n     */\n    Mousetrap.prototype.stopCallback = function(e, element) {\n        var self = this;\n\n        // if the element has the class \"mousetrap\" then no need to stop\n        if ((' ' + element.className + ' ').indexOf(' mousetrap ') > -1) {\n            return false;\n        }\n\n        if (_belongsTo(element, self.target)) {\n            return false;\n        }\n\n        // Events originating from a shadow DOM are re-targetted and `e.target` is the shadow host,\n        // not the initial event target in the shadow tree. Note that not all events cross the\n        // shadow boundary.\n        // For shadow trees with `mode: 'open'`, the initial event target is the first element in\n        // the events composed path. For shadow trees with `mode: 'closed'`, the initial event\n        // target cannot be obtained.\n        if ('composedPath' in e && typeof e.composedPath === 'function') {\n            // For open shadow trees, update `element` so that the following check works.\n            var initialEventTarget = e.composedPath()[0];\n            if (initialEventTarget !== e.target) {\n                element = initialEventTarget;\n            }\n        }\n\n        // stop for input, select, and textarea\n        return element.tagName == 'INPUT' || element.tagName == 'SELECT' || element.tagName == 'TEXTAREA' || element.isContentEditable;\n    };\n\n    /**\n     * exposes _handleKey publicly so it can be overwritten by extensions\n     */\n    Mousetrap.prototype.handleKey = function() {\n        var self = this;\n        return self._handleKey.apply(self, arguments);\n    };\n\n    /**\n     * allow custom key mappings\n     */\n    Mousetrap.addKeycodes = function(object) {\n        for (var key in object) {\n            if (object.hasOwnProperty(key)) {\n                _MAP[key] = object[key];\n            }\n        }\n        _REVERSE_MAP = null;\n    };\n\n    /**\n     * Init the global mousetrap functions\n     *\n     * This method is needed to allow the global mousetrap functions to work\n     * now that mousetrap is a constructor function.\n     */\n    Mousetrap.init = function() {\n        var documentMousetrap = Mousetrap(document);\n        for (var method in documentMousetrap) {\n            if (method.charAt(0) !== '_') {\n                Mousetrap[method] = (function(method) {\n                    return function() {\n                        return documentMousetrap[method].apply(documentMousetrap, arguments);\n                    };\n                } (method));\n            }\n        }\n    };\n\n    Mousetrap.init();\n\n    // expose mousetrap to the global object\n    window.Mousetrap = Mousetrap;\n\n    // expose as a common js module\n    if (typeof module !== 'undefined' && module.exports) {\n        module.exports = Mousetrap;\n    }\n\n    // expose mousetrap as an AMD module\n    if (typeof define === 'function' && define.amd) {\n        define(function() {\n            return Mousetrap;\n        });\n    }\n}) (typeof window !== 'undefined' ? window : null, typeof  window !== 'undefined' ? document : null);\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { isEmpty } from 'lodash-es';\nimport { map } from 'lodash-es';\nvar selected = null;\nexport function translateNodeData(nodeData, distance) {\n    var _a, _b;\n    nodeData.x += distance;\n    nodeData.y += distance;\n    if (!isEmpty(nodeData.text)) {\n        nodeData.text.x += distance;\n        nodeData.text.y += distance;\n    }\n    if (!isEmpty((_a = nodeData.properties) === null || _a === void 0 ? void 0 : _a._label)) {\n        (_b = nodeData.properties) === null || _b === void 0 ? void 0 : _b._label.forEach(function (label) {\n            label.x += distance;\n            label.y += distance;\n        });\n    }\n    return nodeData;\n}\nexport function translateEdgeData(edgeData, distance) {\n    if (edgeData.startPoint) {\n        edgeData.startPoint.x += distance;\n        edgeData.startPoint.y += distance;\n    }\n    if (edgeData.endPoint) {\n        edgeData.endPoint.x += distance;\n        edgeData.endPoint.y += distance;\n    }\n    if (edgeData.pointsList && edgeData.pointsList.length > 0) {\n        edgeData.pointsList.forEach(function (point) {\n            point.x += distance;\n            point.y += distance;\n        });\n    }\n    if (!isEmpty(edgeData.text)) {\n        edgeData.text.x += distance;\n        edgeData.text.y += distance;\n    }\n    return edgeData;\n}\nexport function transformNodeData(nodeData, distance) {\n    var x = nodeData.x, y = nodeData.y, text = nodeData.text;\n    //  text  text \n    var nextText = text\n        ? {\n            x: text.x + distance,\n            y: text.y + distance,\n            value: text.value,\n        }\n        : undefined;\n    return __assign(__assign({}, nodeData), { id: '', x: x + distance, y: y + distance, text: nextText });\n}\nexport function transformEdgeData(edgeData, distance) {\n    var startPoint = edgeData.startPoint, endPoint = edgeData.endPoint, pointsList = edgeData.pointsList, text = edgeData.text, edgeConfig = __rest(edgeData\n    //  id\n    , [\"startPoint\", \"endPoint\", \"pointsList\", \"text\"]);\n    //  id\n    edgeConfig.id = '';\n    //  startPointendPointpointsList  text\n    // TODO: \n    var nextStartPoint = {\n        x: startPoint.x + distance,\n        y: startPoint.y + distance,\n    };\n    var nextEndPoint = {\n        x: endPoint.x + distance,\n        y: endPoint.y + distance,\n    };\n    var newPointsList = map(pointsList, function (point) {\n        return {\n            x: point.x + distance,\n            y: point.y + distance,\n        };\n    });\n    var nextText = text\n        ? __assign(__assign({}, text), { x: text.x + distance, y: text.y + distance }) : undefined;\n    return __assign(__assign({}, edgeConfig), { startPoint: nextStartPoint, endPoint: nextEndPoint, pointsList: newPointsList, text: nextText });\n}\nvar TRANSLATION_DISTANCE = 40;\nvar CHILDREN_TRANSLATION_DISTANCE = 40;\nexport function initDefaultShortcut(lf, graph) {\n    var keyboard = lf.keyboard;\n    var keyboardOptions = keyboard.options.keyboard;\n    // \n    keyboard.on(['cmd + c', 'ctrl + c'], function () {\n        CHILDREN_TRANSLATION_DISTANCE = TRANSLATION_DISTANCE;\n        if (!(keyboardOptions === null || keyboardOptions === void 0 ? void 0 : keyboardOptions.enabled))\n            return true;\n        if (graph.textEditElement)\n            return true;\n        var guards = lf.options.guards;\n        var elements = graph.getSelectElements(false);\n        var enabledClone = guards && guards.beforeClone ? guards.beforeClone(elements) : true;\n        if (!enabledClone ||\n            (elements.nodes.length === 0 && elements.edges.length === 0)) {\n            selected = null;\n            return true;\n        }\n        selected = elements;\n        selected.nodes.forEach(function (node) {\n            return translateNodeData(node, TRANSLATION_DISTANCE);\n        });\n        selected.edges.forEach(function (edge) {\n            return translateEdgeData(edge, TRANSLATION_DISTANCE);\n        });\n        return false;\n    });\n    // \n    keyboard.on(['cmd + v', 'ctrl + v'], function () {\n        if (!(keyboardOptions === null || keyboardOptions === void 0 ? void 0 : keyboardOptions.enabled))\n            return true;\n        if (graph.textEditElement)\n            return true;\n        if (selected && (selected.nodes || selected.edges)) {\n            lf.clearSelectElements();\n            var addElements = lf.addElements(selected, CHILDREN_TRANSLATION_DISTANCE);\n            if (!addElements)\n                return true;\n            addElements.nodes.forEach(function (node) { return lf.selectElementById(node.id, true); });\n            addElements.edges.forEach(function (edge) { return lf.selectElementById(edge.id, true); });\n            selected.nodes.forEach(function (node) {\n                return translateNodeData(node, TRANSLATION_DISTANCE);\n            });\n            selected.edges.forEach(function (edge) {\n                return translateEdgeData(edge, TRANSLATION_DISTANCE);\n            });\n            CHILDREN_TRANSLATION_DISTANCE =\n                CHILDREN_TRANSLATION_DISTANCE + TRANSLATION_DISTANCE;\n        }\n        return false;\n    });\n    // undo\n    keyboard.on(['cmd + z', 'ctrl + z'], function () {\n        if (!(keyboardOptions === null || keyboardOptions === void 0 ? void 0 : keyboardOptions.enabled))\n            return true;\n        if (graph.textEditElement)\n            return true;\n        lf.undo();\n        return false;\n    });\n    // redo\n    keyboard.on(['cmd + y', 'ctrl + y'], function () {\n        if (!(keyboardOptions === null || keyboardOptions === void 0 ? void 0 : keyboardOptions.enabled))\n            return true;\n        if (graph.textEditElement)\n            return true;\n        lf.redo();\n        return false;\n    });\n    // delete\n    keyboard.on(['backspace'], function () {\n        if (!(keyboardOptions === null || keyboardOptions === void 0 ? void 0 : keyboardOptions.enabled))\n            return true;\n        if (graph.textEditElement)\n            return true;\n        var elements = graph.getSelectElements(true);\n        lf.clearSelectElements();\n        elements.edges.forEach(function (edge) { return edge.id && lf.deleteEdge(edge.id); });\n        elements.nodes.forEach(function (node) { return node.id && lf.deleteNode(node.id); });\n        return false;\n    });\n}\n","import { isArray } from 'lodash-es';\nimport Mousetrap from 'mousetrap';\nexport * from './shortcut';\nvar Keyboard = /** @class */ (function () {\n    function Keyboard(options) {\n        if (!options.keyboard) {\n            options.keyboard = { enabled: false };\n        }\n        this.options = options;\n        var lf = options.lf;\n        this.target = lf.container;\n        this.mousetrap = new Mousetrap(this.target);\n        // enable\n        if (options.keyboard.enabled && !lf.options.isSilentMode) {\n            this.enable(true);\n        }\n    }\n    Keyboard.prototype.initShortcuts = function () {\n        var _this = this;\n        var _a;\n        var shortcuts = ((_a = this.options.keyboard) !== null && _a !== void 0 ? _a : {}).shortcuts;\n        if (shortcuts) {\n            if (isArray(shortcuts)) {\n                shortcuts.forEach(function (_a) {\n                    var keys = _a.keys, callback = _a.callback, action = _a.action;\n                    return _this.on(keys, callback, action);\n                });\n            }\n            else {\n                var keys = shortcuts.keys, callback = shortcuts.callback, action = shortcuts.action;\n                this.on(keys, callback, action);\n            }\n        }\n    };\n    Keyboard.prototype.on = function (keys, callback, action) {\n        this.mousetrap.bind(this.getKeys(keys), callback, action);\n    };\n    Object.defineProperty(Keyboard.prototype, \"disabled\", {\n        get: function () {\n            var _a, _b;\n            return ((_b = (_a = this.options) === null || _a === void 0 ? void 0 : _a.keyboard) === null || _b === void 0 ? void 0 : _b.enabled) !== true;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Keyboard.prototype.off = function (keys, action) {\n        this.mousetrap.unbind(this.getKeys(keys), action);\n    };\n    Keyboard.prototype.enable = function (force) {\n        if (this.disabled || force) {\n            if (this.options.keyboard) {\n                this.options.keyboard.enabled = true;\n            }\n            if (this.target instanceof HTMLElement) {\n                this.target.setAttribute('tabindex', '-1');\n                // container\n                this.target.style.outline = 'none';\n            }\n        }\n    };\n    Keyboard.prototype.disable = function () {\n        if (!this.disabled) {\n            if (this.options.keyboard) {\n                this.options.keyboard.enabled = false;\n            }\n            if (this.target instanceof HTMLElement) {\n                this.target.removeAttribute('tabindex');\n            }\n        }\n    };\n    Keyboard.prototype.destroy = function () {\n        this.mousetrap.reset();\n    };\n    Keyboard.prototype.getKeys = function (keys) {\n        var _this = this;\n        return (Array.isArray(keys) ? keys : [keys]).map(function (key) {\n            return _this.formatKey(key);\n        });\n    };\n    Keyboard.prototype.formatKey = function (key) {\n        return key\n            .toLowerCase()\n            .replace(/\\s/g, '')\n            .replace('delete', 'del')\n            .replace('cmd', 'command');\n    };\n    return Keyboard;\n}());\nexport { Keyboard };\nexport default Keyboard;\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { jsx as _jsx } from \"preact/jsx-runtime\";\nimport { createElement as h, render } from 'preact/compat';\nimport { cloneDeep, forEach, indexOf, isNil } from 'lodash-es';\nimport { observer } from '.';\nimport { Options as LFOptions } from './options';\nimport * as _Model from './model';\nimport { GraphModel, SnaplineModel, } from './model';\nimport Graph from './view/Graph';\nimport * as _View from './view';\nimport { formatData, addThemeMode, removeThemeMode, clearThemeMode, } from './util';\nimport { Dnd, snapline } from './view/behavior';\nimport Tool from './tool';\nimport History from './history';\nimport Keyboard, { initDefaultShortcut } from './keyboard';\nimport { ElementType, EventType, } from './constant';\nvar pluginFlag = Symbol('plugin registered by Logicflow.use');\nvar LogicFlow = /** @class */ (function () {\n    function LogicFlow(options) {\n        var _this = this;\n        var _a;\n        this.viewMap = new Map();\n        this.components = [];\n        // \n        this.extension = {};\n        /*********************************************************\n         * Register \n         ********************************************************/\n        this.setView = function (type, component) {\n            return _this.viewMap.set(type, component);\n        };\n        //  type  view\n        this.getView = function (type) {\n            return _this.viewMap.get(type);\n        };\n        var initOptions = LFOptions.get(options);\n        var container = initOptions.container, width = initOptions.width, height = initOptions.height;\n        this.options = initOptions;\n        this.container = this.initContainer(container, width, height);\n        this.graphModel = new GraphModel(__assign(__assign({}, initOptions), { container: this.container }));\n        this.plugins = (_a = initOptions.plugins) !== null && _a !== void 0 ? _a : [];\n        var eventCenter = this.graphModel.eventCenter;\n        this.tool = new Tool(this);\n        this.dnd = new Dnd({ lf: this });\n        this.history = new History(eventCenter);\n        this.keyboard = new Keyboard({\n            lf: this,\n            keyboard: initOptions.keyboard,\n        });\n        if (initOptions.snapline !== false) {\n            this.snaplineModel = new SnaplineModel(this.graphModel, initOptions.snaplineEpsilon);\n            snapline(eventCenter, this.snaplineModel);\n        }\n        if (!initOptions.isSilentMode) {\n            // \n            initDefaultShortcut(this, this.graphModel);\n            // .\n            // \n            this.keyboard.initShortcuts();\n        }\n        this.defaultRegister();\n        this.installPlugins(initOptions.disabledPlugins);\n    }\n    LogicFlow.prototype.initContainer = function (container, width, height) {\n        // TODO:  container \n        // fix: destroy keyboard events while destroy LogicFlow.(#1110)\n        var lfContainer = document.createElement('div');\n        lfContainer.style.position = 'relative';\n        lfContainer.style.width = width ? \"\".concat(width, \"px\") : '100%';\n        lfContainer.style.height = height ? \"\".concat(height, \"px\") : '100%';\n        container.innerHTML = '';\n        container.appendChild(lfContainer);\n        return lfContainer;\n    };\n    Object.defineProperty(LogicFlow.prototype, Symbol.toStringTag, {\n        get: function () {\n            return LogicFlow.toStringTag;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * \n     * \n     * \n     *  todo: docs link\n     * @example\n     * import { RectNode, RectModel } from '@logicflow/core'\n     * class CustomView extends RectNode {\n     * }\n     * class CustomModel extends RectModel {\n     * }\n     * lf.register({\n     *   type: 'custom',\n     *   view: CustomView,\n     *   model: CustomModel\n     * })\n     * \n     * lf\n     * viewthis.propsgraphModel\n     * modelthis.graphModelmodel\n     * @example\n     * lf.register('custom', ({ RectNode, RectModel }) => {\n     *    class CustomView extends RectNode {}\n     *    class CustomModel extends RectModel {}\n     *    return {\n     *      view: CustomView,\n     *      model: CustomModel\n     *    }\n     * })\n     */\n    LogicFlow.prototype.register = function (element, fn, isObserverView) {\n        if (isObserverView === void 0) { isObserverView = true; }\n        // 1\n        if (typeof element !== 'string') {\n            this.registerElement(element);\n            return;\n        }\n        // 2 TODO: \n        var registerParam = {\n            BaseEdge: _View.BaseEdge,\n            BaseEdgeModel: _Model.BaseEdgeModel,\n            BaseNode: _View.BaseNode,\n            BaseNodeModel: _Model.BaseNodeModel,\n            RectNode: _View.RectNode,\n            RectNodeModel: _Model.RectNodeModel,\n            CircleNode: _View.CircleNode,\n            CircleNodeModel: _Model.CircleNodeModel,\n            PolygonNode: _View.PolygonNode,\n            PolygonNodeModel: _Model.PolygonNodeModel,\n            TextNode: _View.TextNode,\n            TextNodeModel: _Model.TextNodeModel,\n            LineEdge: _View.LineEdge,\n            LineEdgeModel: _Model.LineEdgeModel,\n            DiamondNode: _View.DiamondNode,\n            DiamondNodeModel: _Model.DiamondNodeModel,\n            PolylineEdge: _View.PolylineEdge,\n            PolylineEdgeModel: _Model.PolylineEdgeModel,\n            BezierEdge: _View.BezierEdge,\n            BezierEdgeModel: _Model.BezierEdgeModel,\n            EllipseNode: _View.EllipseNode,\n            EllipseNodeModel: _Model.EllipseNodeModel,\n            HtmlNode: _View.HtmlNode,\n            HtmlNodeModel: _Model.HtmlNodeModel,\n            // mobx,\n            h: h,\n            type: element,\n        };\n        // \n        // \n        // \n        // \n        // TODO:  extendKey \n        this.viewMap.forEach(function (component) {\n            var key = component.extendKey;\n            if (key) {\n                registerParam[key] = component;\n            }\n        });\n        this.graphModel.modelMap.forEach(function (component) {\n            var key = component.extendKey;\n            if (key) {\n                registerParam[key] = component;\n            }\n        });\n        if (fn) {\n            var _a = fn(registerParam), ViewClass = _a.view, ModelClass = _a.model;\n            var vClass = ViewClass; // TODO:  ViewClass \n            if (isObserverView && !vClass.isObserved) {\n                vClass.isObserved = true;\n                vClass = observer(vClass);\n            }\n            this.setView(element, vClass);\n            this.graphModel.setModel(element, ModelClass);\n        }\n    };\n    /**\n     *  or \n     * @param config \n     * @private\n     */\n    LogicFlow.prototype.registerElement = function (config) {\n        var ViewComp = config.view;\n        if (config.isObserverView !== false && !ViewComp.isObserved) {\n            ViewComp.isObserved = true;\n            ViewComp = observer(ViewComp);\n        }\n        this.setView(config.type, ViewComp);\n        this.graphModel.setModel(config.type, config.model);\n    };\n    /**\n     * \n     * @param elements \n     */\n    LogicFlow.prototype.batchRegister = function (elements) {\n        var _this = this;\n        if (elements === void 0) { elements = []; }\n        forEach(elements, function (element) {\n            _this.registerElement(element);\n        });\n    };\n    LogicFlow.prototype.defaultRegister = function () {\n        // LogicFlow default Nodes and Edges\n        var defaultElements = [\n            // Node\n            {\n                type: 'rect',\n                view: _View.RectNode,\n                model: _Model.RectNodeModel,\n            },\n            {\n                type: 'circle',\n                view: _View.CircleNode,\n                model: _Model.CircleNodeModel,\n            },\n            {\n                type: 'polygon',\n                view: _View.PolygonNode,\n                model: _Model.PolygonNodeModel,\n            },\n            {\n                type: 'text',\n                view: _View.TextNode,\n                model: _Model.TextNodeModel,\n            },\n            {\n                type: 'ellipse',\n                view: _View.EllipseNode,\n                model: _Model.EllipseNodeModel,\n            },\n            {\n                type: 'diamond',\n                view: _View.DiamondNode,\n                model: _Model.DiamondNodeModel,\n            },\n            {\n                type: 'html',\n                view: _View.HtmlNode,\n                model: _Model.HtmlNodeModel,\n            },\n            // Edge\n            {\n                type: 'line',\n                view: _View.LineEdge,\n                model: _Model.LineEdgeModel,\n            },\n            {\n                type: 'polyline',\n                view: _View.PolylineEdge,\n                model: _Model.PolylineEdgeModel,\n            },\n            {\n                type: 'bezier',\n                view: _View.BezierEdge,\n                model: _Model.BezierEdgeModel,\n            },\n        ];\n        this.batchRegister(defaultElements);\n    };\n    /*********************************************************\n     * Node \n     ********************************************************/\n    /**\n     * \n     * @param nodeConfig \n     * @param eventType EventType.NODE_ADD\n     * @param e MouseEvent \n     */\n    LogicFlow.prototype.addNode = function (nodeConfig, eventType, e) {\n        if (eventType === void 0) { eventType = EventType.NODE_ADD; }\n        return this.graphModel.addNode(nodeConfig, eventType, e);\n    };\n    /**\n     * \n     * @param {string} nodeId Id\n     */\n    LogicFlow.prototype.deleteNode = function (nodeId) {\n        var nodeModel = this.graphModel.getNodeModelById(nodeId);\n        if (!nodeModel)\n            return false;\n        var nodeData = nodeModel.getData();\n        var guards = this.options.guards;\n        var isEnableDelete = (guards === null || guards === void 0 ? void 0 : guards.beforeDelete)\n            ? guards.beforeDelete(nodeData)\n            : true;\n        if (isEnableDelete) {\n            this.graphModel.deleteNode(nodeId);\n        }\n        return isEnableDelete;\n    };\n    /**\n     * \n     * @param nodeId Id\n     */\n    LogicFlow.prototype.cloneNode = function (nodeId) {\n        var nodeModel = this.graphModel.getNodeModelById(nodeId);\n        var nodeData = nodeModel === null || nodeModel === void 0 ? void 0 : nodeModel.getData();\n        if (nodeData) {\n            var guards = this.options.guards;\n            var isEnableClone = (guards === null || guards === void 0 ? void 0 : guards.beforeClone)\n                ? guards.beforeClone(nodeData)\n                : true;\n            if (isEnableClone) {\n                return this.graphModel.cloneNode(nodeId);\n            }\n        }\n    };\n    /**\n     * idid\n     * @param { string } nodeId id\n     * @param { string } newId id\n     * @returns id, oldId\n     */\n    LogicFlow.prototype.changeNodeId = function (nodeId, newId) {\n        return this.graphModel.changeNodeId(nodeId, newId);\n    };\n    /**\n     * \n     * @param nodeId id\n     * @param type \n     */\n    LogicFlow.prototype.changeNodeType = function (nodeId, type) {\n        this.graphModel.changeNodeType(nodeId, type);\n    };\n    /**\n     * \n     * @param nodeId Id\n     */\n    LogicFlow.prototype.getNodeModelById = function (nodeId) {\n        return this.graphModel.getNodeModelById(nodeId);\n    };\n    /**\n     * \n     * @param nodeId \n     */\n    LogicFlow.prototype.getNodeDataById = function (nodeId) {\n        var nodeModel = this.getNodeModelById(nodeId);\n        return nodeModel === null || nodeModel === void 0 ? void 0 : nodeModel.getData();\n    };\n    /**\n     * \n     * @param { string } nodeId\n     */\n    LogicFlow.prototype.getNodeIncomingEdge = function (nodeId) {\n        return this.graphModel.getNodeIncomingEdge(nodeId);\n    };\n    /**\n     * \n     * @param {string} nodeId\n     */\n    LogicFlow.prototype.getNodeOutgoingEdge = function (nodeId) {\n        return this.graphModel.getNodeOutgoingEdge(nodeId);\n    };\n    /**\n     * \n     * @param {string} nodeId\n     */\n    LogicFlow.prototype.getNodeIncomingNode = function (nodeId) {\n        return this.graphModel.getNodeIncomingNode(nodeId);\n    };\n    /**\n     * \n     * @param {string} nodeId\n     */\n    LogicFlow.prototype.getNodeOutgoingNode = function (nodeId) {\n        return this.graphModel.getNodeOutgoingNode(nodeId);\n    };\n    /**\n     * \n     * fakeNodednd\n     */\n    LogicFlow.prototype.createFakeNode = function (nodeConfig) {\n        var Model = this.graphModel.modelMap.get(nodeConfig.type);\n        if (!Model) {\n            console.warn(\"\\u4E0D\\u5B58\\u5728\\u4E3A\".concat(nodeConfig.type, \"\\u7C7B\\u578B\\u7684\\u8282\\u70B9\"));\n            return null;\n        }\n        // * initNodeData\n        var fakeNodeModel = new Model(__assign(__assign({}, nodeConfig), { virtual: true }), this.graphModel);\n        this.graphModel.setFakeNode(fakeNodeModel);\n        return fakeNodeModel;\n    };\n    /**\n     * \n     * fakeNode\n     */\n    LogicFlow.prototype.removeFakeNode = function () {\n        this.graphModel.removeFakeNode();\n    };\n    /**\n     * \n     * fakeNode\n     */\n    LogicFlow.prototype.setNodeSnapLine = function (data) {\n        var _a;\n        (_a = this.snaplineModel) === null || _a === void 0 ? void 0 : _a.setNodeSnapLine(data);\n    };\n    /**\n     * \n     * fakeNode\n     */\n    LogicFlow.prototype.removeNodeSnapLine = function () {\n        var _a;\n        (_a = this.snaplineModel) === null || _a === void 0 ? void 0 : _a.clearSnapline();\n    };\n    /*********************************************************\n     * Edge \n     ********************************************************/\n    /**\n     * \n     * \n     * @param type LFOptions.EdgeType\n     */\n    LogicFlow.prototype.setDefaultEdgeType = function (type) {\n        this.graphModel.setDefaultEdgeType(type);\n    };\n    /**\n     * \n     * @example\n     * lf.addEdge({\n     *   type: 'polygon'\n     *   sourceNodeId: 'node_id_1',\n     *   targetNodeId: 'node_id_2',\n     * })\n     * @param {EdgeConfig} edgeConfig\n     */\n    LogicFlow.prototype.addEdge = function (edgeConfig) {\n        return this.graphModel.addEdge(edgeConfig);\n    };\n    /**\n     * id\n     * @param edgeId Id\n     * @returns EdgeData\n     */\n    LogicFlow.prototype.getEdgeDataById = function (edgeId) {\n        var edgeModel = this.getEdgeModelById(edgeId);\n        return edgeModel === null || edgeModel === void 0 ? void 0 : edgeModel.getData();\n    };\n    /**\n     * Idmodel\n     * @param edgeId Id\n     * @return model\n     */\n    LogicFlow.prototype.getEdgeModelById = function (edgeId) {\n        return this.graphModel.getEdgeModelById(edgeId);\n    };\n    /**\n     * model\n     * @param edgeFilter \n     * @example\n     *  A  model\n     * lf.getEdgeModels({\n     *   sourceNodeId: 'nodeA_id'\n     * })\n     *  B  model\n     * lf.getEdgeModels({\n     *   targetNodeId: 'nodeB_id'\n     * })\n     *  A B \n     * lf.getEdgeModels({\n     *   sourceNodeId: 'nodeA_id',\n     *   targetNodeId: 'nodeB_id'\n     * })\n     * @return model\n     */\n    LogicFlow.prototype.getEdgeModels = function (_a) {\n        var sourceNodeId = _a.sourceNodeId, targetNodeId = _a.targetNodeId;\n        var results = [];\n        var edges = this.graphModel.edges;\n        if (sourceNodeId && targetNodeId) {\n            forEach(edges, function (edge) {\n                if (edge.sourceNodeId === sourceNodeId &&\n                    edge.targetNodeId === targetNodeId) {\n                    results.push(edge);\n                }\n            });\n        }\n        else if (sourceNodeId) {\n            forEach(edges, function (edge) {\n                if (edge.sourceNodeId === sourceNodeId) {\n                    results.push(edge);\n                }\n            });\n        }\n        else if (targetNodeId) {\n            forEach(edges, function (edge) {\n                if (edge.targetNodeId === targetNodeId) {\n                    results.push(edge);\n                }\n            });\n        }\n        return results;\n    };\n    /**\n     * id id\n     * @param { string } edgeId id\n     * @param { string } newId id\n     * @returns id, oldId\n     */\n    LogicFlow.prototype.changeEdgeId = function (edgeId, newId) {\n        return this.graphModel.changeEdgeId(edgeId, newId);\n    };\n    /**\n     * \n     * @param edgeId Id\n     * @param type \n     */\n    LogicFlow.prototype.changeEdgeType = function (edgeId, type) {\n        this.graphModel.changeEdgeType(edgeId, type);\n    };\n    /**\n     * \n     * @param {string} edgeId Id\n     */\n    LogicFlow.prototype.deleteEdge = function (edgeId) {\n        var edgeModel = this.graphModel.getEdgeModelById(edgeId);\n        if (!edgeModel)\n            return false;\n        var edgeData = edgeModel.getData();\n        var guards = this.options.guards;\n        var isEnableDelete = (guards === null || guards === void 0 ? void 0 : guards.beforeDelete)\n            ? guards.beforeDelete(edgeData)\n            : true;\n        if (isEnableDelete) {\n            this.graphModel.deleteEdgeById(edgeId);\n        }\n        return isEnableDelete;\n    };\n    /**\n     * \n     * @param sourceNodeId ID\n     * @param targetNodeId ID\n     */\n    LogicFlow.prototype.deleteEdgeByNodeId = function (_a) {\n        var sourceNodeId = _a.sourceNodeId, targetNodeId = _a.targetNodeId;\n        // TODO:  this.graphModel  this \n        if (sourceNodeId && targetNodeId) {\n            this.graphModel.deleteEdgeBySourceAndTarget(sourceNodeId, targetNodeId);\n        }\n        else if (sourceNodeId) {\n            this.graphModel.deleteEdgeBySource(sourceNodeId);\n        }\n        else if (targetNodeId) {\n            this.graphModel.deleteEdgeByTarget(targetNodeId);\n        }\n    };\n    /**\n     * model\n     * @param nodeId ID\n     * @returns model\n     */\n    LogicFlow.prototype.getNodeEdges = function (nodeId) {\n        return this.graphModel.getNodeEdges(nodeId);\n    };\n    /*********************************************************\n     * Element \n     ********************************************************/\n    /**\n     * , \n     * @param nodes\n     * @param edges\n     * @param distance\n     */\n    LogicFlow.prototype.addElements = function (_a, distance) {\n        var _this = this;\n        var nodes = _a.nodes, edges = _a.edges;\n        if (distance === void 0) { distance = 40; }\n        // TODO: 1.  distance \n        // TODO: 2. review  nodeIdMap \n        console.log('distance', distance);\n        var nodeIdMap = {};\n        var elements = {\n            nodes: [],\n            edges: [],\n        };\n        forEach(nodes, function (node) {\n            var nodeId = node.id;\n            var nodeModel = _this.addNode(node);\n            if (nodeId)\n                nodeIdMap[nodeId] = nodeModel.id;\n            elements.nodes.push(nodeModel);\n        });\n        forEach(edges, function (edge) {\n            var sourceNodeId = edge.sourceNodeId, targetNodeId = edge.targetNodeId;\n            if (nodeIdMap[sourceNodeId])\n                sourceNodeId = nodeIdMap[sourceNodeId];\n            if (nodeIdMap[targetNodeId])\n                targetNodeId = nodeIdMap[targetNodeId];\n            var edgeModel = _this.graphModel.addEdge(__assign(__assign({}, edge), { sourceNodeId: sourceNodeId, targetNodeId: targetNodeId }));\n            elements.edges.push(edgeModel);\n        });\n        return elements;\n    };\n    /**\n     * \n     * @param id ID\n     * @param multiple true\n     * @param toFront true\n     */\n    LogicFlow.prototype.selectElementById = function (id, multiple, toFront) {\n        if (multiple === void 0) { multiple = false; }\n        if (toFront === void 0) { toFront = true; }\n        this.graphModel.selectElementById(id, multiple);\n        if (!multiple && toFront) {\n            this.graphModel.toFront(id);\n        }\n    };\n    /**\n     * \n     * @param id ID\n     */\n    LogicFlow.prototype.deselectElementById = function (id) {\n        this.graphModel.deselectElementById(id);\n    };\n    /**\n     * \n     * @param isIgnoreCheck sourceNodetargetNode,\n     * , \n     */\n    LogicFlow.prototype.getSelectElements = function (isIgnoreCheck) {\n        if (isIgnoreCheck === void 0) { isIgnoreCheck = true; }\n        return this.graphModel.getSelectElements(isIgnoreCheck);\n    };\n    /**\n     * \n     */\n    LogicFlow.prototype.clearSelectElements = function () {\n        this.graphModel.clearSelectElements();\n    };\n    /**\n     * \n     * @param id id\n     */\n    LogicFlow.prototype.getModelById = function (id) {\n        return this.graphModel.getElement(id);\n    };\n    /**\n     * \n     * @param id id\n     */\n    LogicFlow.prototype.getDataById = function (id) {\n        var _a;\n        return (_a = this.graphModel.getElement(id)) === null || _a === void 0 ? void 0 : _a.getData();\n    };\n    /**\n     * id\n     * @param id id\n     */\n    LogicFlow.prototype.deleteElement = function (id) {\n        var _a;\n        var _b, _c;\n        var model = this.getModelById(id);\n        if (!model)\n            return false;\n        var callback = (_a = {},\n            _a[ElementType.NODE] = this.deleteNode,\n            _a[ElementType.EDGE] = this.deleteEdge,\n            _a);\n        return (_c = (_b = callback[model.BaseType]) === null || _b === void 0 ? void 0 : _b.call(this, id)) !== null && _c !== void 0 ? _c : false;\n    };\n    /**\n     * zIndex.\n     * \n     * @see todo link \n     * @param id id\n     * @param zIndex zIndex 'top'  'bottom'\n     */\n    LogicFlow.prototype.setElementZIndex = function (id, zIndex) {\n        return this.graphModel.setElementZIndex(id, zIndex);\n    };\n    /**\n     * DOM\n     * \n     * @see todo \n     * @param leftTopPoint , dom\n     * @param rightBottomPoint dom\n     * @param wholeEdge\n     * @param wholeNode\n     * @param ignoreHideElement\n     */\n    LogicFlow.prototype.getAreaElement = function (leftTopPoint, rightBottomPoint, wholeEdge, wholeNode, ignoreHideElement) {\n        if (wholeEdge === void 0) { wholeEdge = true; }\n        if (wholeNode === void 0) { wholeNode = true; }\n        if (ignoreHideElement === void 0) { ignoreHideElement = false; }\n        return this.graphModel\n            .getAreaElement(leftTopPoint, rightBottomPoint, wholeEdge, wholeNode, ignoreHideElement)\n            .map(function (element) { return element.getData(); });\n    };\n    /**\n     * \n     * @see http://logicflow.cn/api/detail#setproperties\n     * @param id id\n     * @param properties \n     */\n    LogicFlow.prototype.setProperties = function (id, properties) {\n        var _a;\n        (_a = this.graphModel.getElement(id)) === null || _a === void 0 ? void 0 : _a.setProperties(formatData(properties));\n    };\n    /**\n     * \n     * @param id id\n     * @returns \n     */\n    LogicFlow.prototype.getProperties = function (id) {\n        var _a;\n        return (_a = this.graphModel.getElement(id)) === null || _a === void 0 ? void 0 : _a.getProperties();\n    };\n    LogicFlow.prototype.deleteProperty = function (id, key) {\n        var _a;\n        (_a = this.graphModel.getElement(id)) === null || _a === void 0 ? void 0 : _a.deleteProperty(key);\n    };\n    /**\n     * FBI WARNING !!!  === \n     *  model \n     * logicflow\n     * setPropertiesupdateTextchangeNodeId\n     * id,sourceNodeId\n     * @param {string} id id\n     * @param {object} attributes \n     */\n    LogicFlow.prototype.updateAttributes = function (id, attributes) {\n        this.graphModel.updateAttributes(id, attributes);\n    };\n    /*********************************************************\n     * Text \n     ********************************************************/\n    /**\n     * \n     * @param id id\n     */\n    LogicFlow.prototype.editText = function (id) {\n        this.graphModel.editText(id);\n    };\n    /**\n     * \n     * @param id id\n     * @param value \n     */\n    LogicFlow.prototype.updateText = function (id, value) {\n        this.graphModel.updateText(id, value);\n    };\n    /*********************************************************\n     * EditConfig \n     ********************************************************/\n    /**\n     * \n     * @param {object} config \n     * @see http://logicflow.cn/api/detail#updateeditconfig\n     */\n    LogicFlow.prototype.updateEditConfig = function (config) {\n        var _a = this.graphModel, editConfigModel = _a.editConfigModel, transformModel = _a.transformModel;\n        var currentSnapGrid = editConfigModel.snapGrid;\n        editConfigModel.updateEditConfig(config);\n        if ((config === null || config === void 0 ? void 0 : config.stopMoveGraph) !== undefined) {\n            transformModel.updateTranslateLimits(config.stopMoveGraph);\n        }\n        // \n        (config === null || config === void 0 ? void 0 : config.isSilentMode) ? this.keyboard.disable() : this.keyboard.enable(true);\n        // \n        if (!isNil(config === null || config === void 0 ? void 0 : config.snapGrid) && config.snapGrid !== currentSnapGrid) {\n            var _b = this.graphModel.grid.size, size = _b === void 0 ? 1 : _b;\n            this.graphModel.updateGridSize(config.snapGrid ? size : 1);\n        }\n        this.emit(EventType.EDIT_CONFIG_CHANGED, {\n            data: editConfigModel.getConfig(),\n        });\n    };\n    /**\n     * \n     * @see http://logicflow.cn/api/detail#geteditconfig\n     */\n    LogicFlow.prototype.getEditConfig = function () {\n        return this.graphModel.editConfigModel.getConfig();\n    };\n    /*********************************************************\n     * Graph \n     ********************************************************/\n    /**\n     * \n     * @param { object } style \n     * todo docs link\n     */\n    LogicFlow.prototype.setTheme = function (style, themeMode) {\n        this.graphModel.setTheme(style, themeMode);\n    };\n    /**\n     * \n     * @see todo docs link\n     */\n    LogicFlow.prototype.getTheme = function () {\n        return this.graphModel.getTheme();\n    };\n    LogicFlow.prototype.focusByElement = function (id) {\n        var coordinate = undefined;\n        var nodeModel = this.getNodeModelById(id);\n        if (nodeModel) {\n            var _a = nodeModel.getData(), x = _a.x, y = _a.y;\n            coordinate = {\n                x: x,\n                y: y,\n            };\n        }\n        var edgeModel = this.getEdgeModelById(id);\n        if (edgeModel) {\n            var _b = edgeModel.textPosition, x = _b.x, y = _b.y;\n            coordinate = {\n                x: x,\n                y: y,\n            };\n        }\n        if (coordinate) {\n            this.focusByCoordinate(coordinate);\n        }\n    };\n    LogicFlow.prototype.focusByCoordinate = function (coordinate) {\n        var _a = this.graphModel, transformModel = _a.transformModel, width = _a.width, height = _a.height;\n        var x = coordinate.x, y = coordinate.y;\n        transformModel.focusOn(x, y, width, height);\n    };\n    LogicFlow.prototype.focusOn = function (focusOnArgs) {\n        if (typeof focusOnArgs === 'string') {\n            // string focusOnArgs -> id\n            this.focusByElement(focusOnArgs);\n        }\n        else if ('x' in focusOnArgs && 'y' in focusOnArgs) {\n            // Position focusOnArgs -> coordinate\n            this.focusByCoordinate(focusOnArgs);\n        }\n        else {\n            // FocusOnArgsType\n            var id = focusOnArgs.id, coordinate = focusOnArgs.coordinate;\n            if (id) {\n                this.focusByElement(id);\n            }\n            if (coordinate) {\n                this.focusByCoordinate(coordinate);\n            }\n        }\n    };\n    /**\n     * \n     * \n     */\n    LogicFlow.prototype.resize = function (width, height) {\n        this.graphModel.resize(width, height);\n        this.options.width = this.graphModel.width;\n        this.options.height = this.graphModel.height;\n    };\n    /**\n     * \n     * \n     * zIndexzIndex + 1\n     * @see todo link \n     * @param id Id\n     */\n    LogicFlow.prototype.toFront = function (id) {\n        this.graphModel.toFront(id);\n    };\n    LogicFlow.prototype.getPointByClient = function (x, y) {\n        if (typeof x === 'object') {\n            return this.graphModel.getPointByClient(x);\n        }\n        else if (typeof y === 'number') {\n            return this.graphModel.getPointByClient({\n                x: x,\n                y: y,\n            });\n        }\n    };\n    /**\n     * \n     * : getGraphDataadapterlogicflow\n     * getGraphRawData\n     */\n    LogicFlow.prototype.getGraphData = function () {\n        var params = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            params[_i] = arguments[_i];\n        }\n        var data = this.getGraphRawData();\n        if (this.adapterOut) {\n            return this.adapterOut.apply(this, __spreadArray([data], __read(params), false));\n        }\n        return data;\n    };\n    /**\n     * \n     * adaptergetGraphRawData\n     */\n    LogicFlow.prototype.getGraphRawData = function () {\n        return this.graphModel.modelToGraphData();\n    };\n    /**\n     * \n     */\n    LogicFlow.prototype.clearData = function () {\n        this.graphModel.clearData();\n        // ,  preact \n        this.render({});\n    };\n    LogicFlow.prototype.setOverlapMode = function (mode) {\n        this.graphModel.setOverlapMode(mode);\n    };\n    /*********************************************************\n     * LogicFlow Render\n     ********************************************************/\n    LogicFlow.prototype.renderRawData = function (graphRawData) {\n        this.graphModel.graphDataToModel(formatData(graphRawData));\n        if (this.options.history !== false) {\n            this.history.watch(this.graphModel);\n        }\n        render(_jsx(Graph, { getView: this.getView, tool: this.tool, options: this.options, dnd: this.dnd, snaplineModel: this.snaplineModel, graphModel: this.graphModel }), this.container);\n        this.emit(EventType.GRAPH_RENDERED, {\n            data: this.graphModel.modelToGraphData(),\n            graphModel: this.graphModel,\n        });\n    };\n    /**\n     * \n     * @example\n     * lf.render({\n     *   nodes: [\n     *     {\n     *       id: 'node_1',\n     *       type: 'rect',\n     *       x: 100,\n     *       y: 100\n     *     },\n     *     {\n     *       id: 'node_2',\n     *       type: 'circle',\n     *       x: 300,\n     *       y: 200\n     *     }\n     *   ],\n     *   edges: [\n     *     {\n     *       sourceNodeId: 'node_1',\n     *       targetNodeId: 'node_2',\n     *       type: 'polyline'\n     *     }\n     *   ]\n     * })\n     * @param graphData \n     */\n    LogicFlow.prototype.render = function (graphData) {\n        var graphRawData = cloneDeep(graphData);\n        if (this.adapterIn) {\n            graphRawData = this.adapterIn(graphRawData);\n        }\n        this.renderRawData(graphRawData);\n    };\n    /*********************************************************\n     * History/Resize \n     ********************************************************/\n    /**\n     * \n     * \n     */\n    LogicFlow.prototype.undo = function () {\n        if (!this.history.undoAble())\n            return;\n        // formatDatavue\n        var graphData = formatData(this.history.undo());\n        this.clearSelectElements();\n        this.graphModel.graphDataToModel(graphData);\n    };\n    /**\n     * \n     * \n     */\n    LogicFlow.prototype.redo = function () {\n        if (!this.history.redoAble())\n            return;\n        // formatDatavue\n        var graphData = formatData(this.history.redo());\n        this.clearSelectElements();\n        this.graphModel.graphDataToModel(graphData);\n    };\n    /**\n     * \n     * @param zoomSize 0-n11truefalse\n     * @param point \n     * @returns {string} -\n     */\n    LogicFlow.prototype.zoom = function (zoomSize, point) {\n        var transformModel = this.graphModel.transformModel;\n        return transformModel.zoom(zoomSize, point);\n    };\n    /**\n     * \n     */\n    LogicFlow.prototype.resetZoom = function () {\n        var transformModel = this.graphModel.transformModel;\n        transformModel.resetZoom();\n    };\n    /**\n     * 0-10.2\n     * @param size \n     */\n    LogicFlow.prototype.setZoomMiniSize = function (size) {\n        var transformModel = this.graphModel.transformModel;\n        transformModel.setZoomMiniSize(size);\n    };\n    /**\n     * 16\n     * @param size \n     */\n    LogicFlow.prototype.setZoomMaxSize = function (size) {\n        var transformModel = this.graphModel.transformModel;\n        transformModel.setZoomMaxSize(size);\n    };\n    /**\n     * \n     */\n    LogicFlow.prototype.getTransform = function () {\n        var _a = this.graphModel.transformModel, SCALE_X = _a.SCALE_X, SCALE_Y = _a.SCALE_Y, TRANSLATE_X = _a.TRANSLATE_X, TRANSLATE_Y = _a.TRANSLATE_Y;\n        return {\n            SCALE_X: SCALE_X,\n            SCALE_Y: SCALE_Y,\n            TRANSLATE_X: TRANSLATE_X,\n            TRANSLATE_Y: TRANSLATE_Y,\n        };\n    };\n    /**\n     * \n     * @param x x\n     * @param y y\n     */\n    LogicFlow.prototype.translate = function (x, y) {\n        var transformModel = this.graphModel.transformModel;\n        transformModel.translate(x, y);\n    };\n    /**\n     * \n     */\n    LogicFlow.prototype.resetTranslate = function () {\n        var transformModel = this.graphModel.transformModel;\n        var TRANSLATE_X = transformModel.TRANSLATE_X, TRANSLATE_Y = transformModel.TRANSLATE_Y;\n        this.translate(-TRANSLATE_X, -TRANSLATE_Y);\n    };\n    /**\n     * \n     */\n    LogicFlow.prototype.translateCenter = function () {\n        this.graphModel.translateCenter();\n    };\n    /**\n     * \n     * @param verticalOffset number  20\n     * @param horizontalOffset number  20\n     */\n    LogicFlow.prototype.fitView = function (verticalOffset, horizontalOffset) {\n        if (horizontalOffset === undefined) {\n            horizontalOffset = verticalOffset; // \n        }\n        this.graphModel.fitView(verticalOffset, horizontalOffset);\n    };\n    /**\n     * \n     * @param edgeId string\n     */\n    LogicFlow.prototype.openEdgeAnimation = function (edgeId) {\n        this.graphModel.openEdgeAnimation(edgeId);\n    };\n    /**\n     * \n     * @param edgeId string\n     */\n    LogicFlow.prototype.closeEdgeAnimation = function (edgeId) {\n        this.graphModel.closeEdgeAnimation(edgeId);\n    };\n    LogicFlow.prototype.on = function (evt, callback) {\n        this.graphModel.eventCenter.on(evt, callback);\n    };\n    LogicFlow.prototype.off = function (evt, callback) {\n        this.graphModel.eventCenter.off(evt, callback);\n    };\n    LogicFlow.prototype.once = function (evt, callback) {\n        this.graphModel.eventCenter.once(evt, callback);\n    };\n    LogicFlow.prototype.emit = function (evt, arg) {\n        this.graphModel.eventCenter.emit(evt, arg);\n    };\n    /*********************************************************\n     * \n     ********************************************************/\n    /**\n     * , \n     * \n     * @param extension\n     * @param props\n     */\n    LogicFlow.use = function (extension, props) {\n        var _a;\n        var pluginName = extension.pluginName;\n        if (!pluginName) {\n            throw new Error(\"\\u8BF7\\u7ED9\\u63D2\\u4EF6\\u6307\\u5B9A pluginName!\");\n        }\n        // TODO: \n        // const preExtension = this.extensions.get(pluginName)?.extension\n        // preExtension?.destroy?.() //  preExtension  Constructor destroy\n        this.extensions.set(pluginName, (_a = {},\n            _a[pluginFlag] = pluginFlag,\n            _a.extension = extension,\n            _a.props = props,\n            _a));\n    };\n    /**\n     * \n     * @param themeMode \n     * @param style \n     */\n    LogicFlow.addThemeMode = function (themeMode, style) {\n        addThemeMode(themeMode, style);\n    };\n    LogicFlow.removeThemeMode = function (themeMode) {\n        removeThemeMode(themeMode);\n    };\n    LogicFlow.clearThemeMode = function () {\n        clearThemeMode();\n    };\n    LogicFlow.prototype.installPlugins = function (disabledPlugins) {\n        var _this = this;\n        if (disabledPlugins === void 0) { disabledPlugins = []; }\n        var extensionsAddByUse = Array.from(LogicFlow.extensions, function (_a) {\n            var _b = __read(_a, 2), extension = _b[1];\n            return extension;\n        });\n        // \n        var extensions = __spreadArray(__spreadArray([], __read(this.plugins), false), __read(extensionsAddByUse), false);\n        forEach(extensions, function (ext) {\n            var extension;\n            var props;\n            if (pluginFlag in ext) {\n                extension = ext.extension;\n                props = ext.props;\n            }\n            else {\n                extension = ext;\n            }\n            var pluginName = extension === null || extension === void 0 ? void 0 : extension.pluginName;\n            if (indexOf(disabledPlugins, pluginName) === -1) {\n                _this.installPlugin(extension, props);\n            }\n        });\n    };\n    /**\n     * -\n     */\n    LogicFlow.prototype.installPlugin = function (extension, props) {\n        var _a, _b;\n        if ('pluginName' in extension && 'install' in extension) {\n            var pluginName_1 = extension.pluginName, install = extension.install, render_1 = extension.render;\n            if (pluginName_1) {\n                install && install.call(extension, this, LogicFlow);\n                render_1 && this.components.push(render_1.bind(extension));\n                this.extension[pluginName_1] = extension;\n            }\n            return;\n        }\n        var ExtensionCtor = extension;\n        var pluginName = ExtensionCtor.pluginName;\n        var extensionIns = new ExtensionCtor({\n            lf: this,\n            LogicFlow: LogicFlow,\n            props: props,\n            // TODO:  options  options options\n            //  this.options.pluginsOptions[ExtensionCtor.pluginName] ?? {}\n            options: (_b = (_a = this.options.pluginsOptions) === null || _a === void 0 ? void 0 : _a[pluginName]) !== null && _b !== void 0 ? _b : {},\n        });\n        extensionIns.render &&\n            this.components.push(extensionIns.render.bind(extensionIns));\n        this.extension[pluginName] = extensionIns;\n    };\n    /**  */\n    LogicFlow.prototype.destroy = function () {\n        var _a;\n        this.clearData();\n        render(null, this.container);\n        this.keyboard.destroy();\n        this.graphModel.destroy();\n        this.tool.destroy();\n        this.history.destroy();\n        clearThemeMode();\n        for (var extensionName in this.extension) {\n            var extensionInstance = this.extension[extensionName];\n            if ('destroy' in extensionInstance) {\n                (_a = extensionInstance.destroy) === null || _a === void 0 ? void 0 : _a.call(extensionInstance);\n            }\n        }\n    };\n    // LogicFlow\n    LogicFlow.extensions = new Map();\n    return LogicFlow;\n}());\nexport { LogicFlow };\n// toStringTag\n(function (LogicFlow) {\n    LogicFlow.toStringTag = \"LF.\".concat(LogicFlow.name);\n})(LogicFlow || (LogicFlow = {}));\nexport default LogicFlow;\n","import { observer as mobxObserver } from 'mobx-preact';\nimport { createElement as h, createRef, Component } from 'preact/compat';\nimport LogicFlow from './LogicFlow';\nimport * as LogicFlowUtil from './util';\nexport function observer(props) {\n    return mobxObserver(props);\n}\nexport { LogicFlow, h, createRef, Component, LogicFlowUtil };\nexport * from './util';\nexport * from './tool';\nexport * from './view';\nexport * from './model';\nexport * from './options';\nexport * from './keyboard';\nexport * from './constant';\nexport * from './algorithm';\nexport * from './event/eventEmitter';\nexport { ElementState, ModelType, ElementType, EventType } from './constant';\nexport { formatAnchorConnectValidateData } from './util/node';\nexport default LogicFlow;\n","export var StartEventConfig = {\n    width: 40,\n    height: 40,\n};\nexport var EndEventConfig = {\n    width: 40,\n    height: 40,\n};\nexport var ExclusiveGatewayConfig = {\n    width: 40,\n    height: 40,\n};\nexport var ServiceTaskConfig = {\n    width: 100,\n    height: 80,\n};\nexport var UserTaskConfig = {\n    width: 100,\n    height: 80,\n};\nexport var theme = {\n    rect: {\n        radius: 5,\n        stroke: 'rgb(24, 125, 255)',\n    },\n    circle: {\n        r: 18,\n        stroke: 'rgb(24, 125, 255)',\n    },\n    polygon: {\n        stroke: 'rgb(24, 125, 255)',\n    },\n    polyline: {\n        stroke: 'rgb(24, 125, 255)',\n        hoverStroke: 'rgb(24, 125, 255)',\n        selectedStroke: 'rgb(24, 125, 255)',\n    },\n    edgeText: {\n        textWidth: 100,\n        overflowMode: 'default',\n        fontSize: 12,\n        background: {\n            fill: 'white',\n            height: 14,\n            stroke: 'transparent',\n            radius: 3,\n        },\n    },\n};\n","var IDS = /** @class */ (function () {\n    function IDS() {\n        globalThis._ids = this;\n        this._ids = new Set();\n    }\n    IDS.prototype.generateId = function () {\n        return 'xxxxxxx'.replace(/[x]/g, function (c) {\n            var r = (Math.random() * 16) | 0;\n            var v = c === 'x' ? r : (r & 0x3) | 0x8;\n            return v.toString(16);\n        });\n    };\n    IDS.prototype.next = function () {\n        var id = this.generateId();\n        while (this._ids.has(id)) {\n            id = this.generateId();\n        }\n        this._ids.add(id);\n        return id;\n    };\n    return IDS;\n}());\nvar ids = (globalThis === null || globalThis === void 0 ? void 0 : globalThis._ids) || new IDS();\nexport function getBpmnId() {\n    return ids.next();\n}\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { CircleNode, CircleNodeModel } from '@logicflow/core';\nimport { getBpmnId } from '../getBpmnId';\nvar StartEventModel = /** @class */ (function (_super) {\n    __extends(StartEventModel, _super);\n    function StartEventModel(data, graphModel) {\n        if (!data.id) {\n            data.id = \"Event_\".concat(getBpmnId());\n        }\n        if (!data.text) {\n            data.text = '';\n        }\n        if (data.text && typeof data.text === 'string') {\n            data.text = {\n                value: data.text,\n                x: data.x,\n                y: data.y + 40,\n            };\n        }\n        // fix: \n        // data.text.y += 40;\n        return _super.call(this, data, graphModel) || this;\n    }\n    StartEventModel.prototype.setAttributes = function () {\n        this.r = 18;\n    };\n    StartEventModel.prototype.getConnectedTargetRules = function () {\n        var rules = _super.prototype.getConnectedTargetRules.call(this);\n        var notAsTarget = {\n            message: '',\n            validate: function () { return false; },\n        };\n        rules.push(notAsTarget);\n        return rules;\n    };\n    StartEventModel.extendKey = 'StartEventModel';\n    return StartEventModel;\n}(CircleNodeModel));\nvar StartEventView = /** @class */ (function (_super) {\n    __extends(StartEventView, _super);\n    function StartEventView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    StartEventView.extendKey = 'StartEventNode';\n    return StartEventView;\n}(CircleNode));\nexport var StartEvent = {\n    type: 'bpmn:startEvent',\n    view: StartEventView,\n    model: StartEventModel,\n};\nexport { StartEventModel, StartEventView };\nexport default StartEvent;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { CircleNode, CircleNodeModel, h } from '@logicflow/core';\nimport { getBpmnId } from '../getBpmnId';\nvar EndEventModel = /** @class */ (function (_super) {\n    __extends(EndEventModel, _super);\n    function EndEventModel(data, graphModel) {\n        if (!data.id) {\n            data.id = \"Event_\".concat(getBpmnId());\n        }\n        if (!data.text) {\n            data.text = '';\n        }\n        if (data.text && typeof data.text === 'string') {\n            data.text = {\n                value: data.text,\n                x: data.x,\n                y: data.y + 40,\n            };\n        }\n        return _super.call(this, data, graphModel) || this;\n    }\n    EndEventModel.prototype.setAttributes = function () {\n        this.r = 18;\n    };\n    EndEventModel.prototype.getConnectedSourceRules = function () {\n        var rules = _super.prototype.getConnectedSourceRules.call(this);\n        var notAsSource = {\n            message: '',\n            validate: function () { return false; },\n        };\n        rules.push(notAsSource);\n        return rules;\n    };\n    EndEventModel.extendKey = 'EndEventModel';\n    return EndEventModel;\n}(CircleNodeModel));\nexport { EndEventModel };\nvar EndEventView = /** @class */ (function (_super) {\n    __extends(EndEventView, _super);\n    function EndEventView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EndEventView.prototype.getAnchorStyle = function () {\n        return {\n            visibility: 'hidden',\n        };\n    };\n    EndEventView.prototype.getShape = function () {\n        var model = this.props.model;\n        var style = model.getNodeStyle();\n        var _a = model, x = _a.x, y = _a.y, r = _a.r;\n        var outCircle = _super.prototype.getShape.call(this);\n        return h('g', {}, outCircle, h('circle', __assign(__assign({}, style), { cx: x, cy: y, r: r - 5 })));\n    };\n    EndEventView.extendKey = 'EndEventView';\n    return EndEventView;\n}(CircleNode));\nexport { EndEventView };\nexport var EndEvent = {\n    type: 'bpmn:endEvent',\n    view: EndEventView,\n    model: EndEventModel,\n};\nexport default EndEvent;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { PolylineEdge, PolylineEdgeModel } from '@logicflow/core';\nimport { getBpmnId } from '../getBpmnId';\nvar SequenceFlowModel = /** @class */ (function (_super) {\n    __extends(SequenceFlowModel, _super);\n    function SequenceFlowModel(data, graphModel) {\n        if (!data.id) {\n            data.id = \"Flow_\".concat(getBpmnId());\n        }\n        return _super.call(this, data, graphModel) || this;\n    }\n    SequenceFlowModel.extendKey = 'SequenceFlowModel';\n    return SequenceFlowModel;\n}(PolylineEdgeModel));\nexport { SequenceFlowModel };\nvar SequenceFlowView = /** @class */ (function (_super) {\n    __extends(SequenceFlowView, _super);\n    function SequenceFlowView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SequenceFlowView.extendKey = 'SequenceFlowEdge';\n    return SequenceFlowView;\n}(PolylineEdge));\nexport { SequenceFlowView };\nexport var SequenceFlow = {\n    type: 'bpmn:sequenceFlow',\n    view: SequenceFlowView,\n    model: SequenceFlowModel,\n};\nexport default SequenceFlow;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { h, PolygonNode, PolygonNodeModel, } from '@logicflow/core';\nimport { getBpmnId } from '../getBpmnId';\nvar ExclusiveGatewayModel = /** @class */ (function (_super) {\n    __extends(ExclusiveGatewayModel, _super);\n    function ExclusiveGatewayModel(data, graphModel) {\n        var _this = this;\n        if (!data.id) {\n            data.id = \"Gateway_\".concat(getBpmnId());\n        }\n        if (!data.text) {\n            data.text = '';\n        }\n        if (data.text && typeof data.text === 'string') {\n            data.text = {\n                value: data.text,\n                x: data.x,\n                y: data.y + 40,\n            };\n        }\n        _this = _super.call(this, data, graphModel) || this;\n        _this.points = [\n            [25, 0],\n            [50, 25],\n            [25, 50],\n            [0, 25],\n        ];\n        return _this;\n    }\n    ExclusiveGatewayModel.extendKey = 'ExclusiveGatewayModel';\n    return ExclusiveGatewayModel;\n}(PolygonNodeModel));\nexport { ExclusiveGatewayModel };\nvar ExclusiveGatewayView = /** @class */ (function (_super) {\n    __extends(ExclusiveGatewayView, _super);\n    function ExclusiveGatewayView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ExclusiveGatewayView.prototype.getShape = function () {\n        var model = this.props.model;\n        var _a = model, x = _a.x, y = _a.y, width = _a.width, height = _a.height, points = _a.points;\n        var style = model.getNodeStyle();\n        return h('g', {\n            transform: \"matrix(1 0 0 1 \".concat(x - width / 2, \" \").concat(y - height / 2, \")\"),\n        }, \n        // @ts-ignore TODO:  h('polygon') \n        h('polygon', __assign(__assign({}, style), { x: x, y: y, points: points })), h('path', __assign({ d: 'm 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z' }, style)));\n    };\n    ExclusiveGatewayView.extendKey = 'ExclusiveGatewayNode';\n    return ExclusiveGatewayView;\n}(PolygonNode));\nexport { ExclusiveGatewayView };\nexport var ExclusiveGateway = {\n    type: 'bpmn:exclusiveGateway',\n    view: ExclusiveGatewayView,\n    model: ExclusiveGatewayModel,\n};\nexport default ExclusiveGateway;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { h, RectNodeModel, RectNode } from '@logicflow/core';\nimport { getBpmnId } from '../getBpmnId';\nvar ServiceTaskModel = /** @class */ (function (_super) {\n    __extends(ServiceTaskModel, _super);\n    function ServiceTaskModel(data, graphModel) {\n        if (!data.id) {\n            data.id = \"Activity_\".concat(getBpmnId());\n        }\n        return _super.call(this, data, graphModel) || this;\n    }\n    ServiceTaskModel.extendKey = 'ServiceTaskModel';\n    return ServiceTaskModel;\n}(RectNodeModel));\nexport { ServiceTaskModel };\nvar ServiceTaskView = /** @class */ (function (_super) {\n    __extends(ServiceTaskView, _super);\n    function ServiceTaskView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ServiceTaskView.prototype.getLabelShape = function () {\n        var model = this.props.model;\n        var x = model.x, y = model.y, width = model.width, height = model.height;\n        var style = model.getNodeStyle();\n        return h('svg', {\n            x: x - width / 2 + 5,\n            y: y - height / 2 + 5,\n            width: 30,\n            height: 30,\n            viewBox: '0 0 1274 1024',\n        }, h('path', {\n            fill: style.stroke,\n            d: 'M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z',\n        }));\n    };\n    ServiceTaskView.prototype.getShape = function () {\n        var model = this.props.model;\n        var x = model.x, y = model.y, width = model.width, height = model.height, radius = model.radius;\n        var style = model.getNodeStyle();\n        return h('g', {}, [\n            h('rect', __assign({ x: x - width / 2, y: y - height / 2, rx: radius, ry: radius, width: width, height: height }, style)),\n            this.getLabelShape(),\n        ]);\n    };\n    ServiceTaskView.extendKey = 'ServiceTaskNode';\n    return ServiceTaskView;\n}(RectNode));\nexport { ServiceTaskView };\nexport var ServiceTask = {\n    type: 'bpmn:serviceTask',\n    view: ServiceTaskView,\n    model: ServiceTaskModel,\n};\nexport default ServiceTask;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { h, RectNode, RectNodeModel } from '@logicflow/core';\nimport { getBpmnId } from '../getBpmnId';\nvar UserTaskModel = /** @class */ (function (_super) {\n    __extends(UserTaskModel, _super);\n    function UserTaskModel(data, graphModel) {\n        if (!data.id) {\n            data.id = \"Activity_\".concat(getBpmnId());\n        }\n        return _super.call(this, data, graphModel) || this;\n    }\n    UserTaskModel.extendKey = 'UserTaskModel';\n    return UserTaskModel;\n}(RectNodeModel));\nexport { UserTaskModel };\nvar UserTaskView = /** @class */ (function (_super) {\n    __extends(UserTaskView, _super);\n    function UserTaskView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    UserTaskView.prototype.getLabelShape = function () {\n        var model = this.props.model;\n        var x = model.x, y = model.y, width = model.width, height = model.height;\n        var style = model.getNodeStyle();\n        return h('svg', {\n            x: x - width / 2 + 5,\n            y: y - height / 2 + 5,\n            width: 25,\n            height: 25,\n            viewBox: '0 0 1274 1024',\n        }, h('path', {\n            fill: style.stroke,\n            d: 'M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z',\n        }));\n    };\n    UserTaskView.prototype.getShape = function () {\n        var model = this.props.model;\n        var x = model.x, y = model.y, width = model.width, height = model.height, radius = model.radius;\n        var style = model.getNodeStyle();\n        // todo: basic-shape\n        return h('g', {}, [\n            h('rect', __assign(__assign({}, style), { x: x - width / 2, y: y - height / 2, rx: radius, ry: radius, width: width, height: height })),\n            this.getLabelShape(),\n        ]);\n    };\n    UserTaskView.extendKey = 'UserTaskNode';\n    return UserTaskView;\n}(RectNode));\nexport { UserTaskView };\nexport var UserTask = {\n    type: 'bpmn:userTask',\n    view: UserTaskView,\n    model: UserTaskModel,\n};\nexport default UserTask;\n","var IDs = /** @class */ (function () {\n    function IDs() {\n        globalThis._ids = this;\n        this._ids = new Set();\n    }\n    IDs.prototype.generateId = function () {\n        return 'xxxxxxx'.replace(/[x]/g, function (c) {\n            var r = (Math.random() * 16) | 0;\n            var v = c === 'x' ? r : (r & 0x3) | 0x8;\n            return v.toString(16);\n        });\n    };\n    IDs.prototype.next = function () {\n        var id = this.generateId();\n        while (this._ids.has(id)) {\n            id = this.generateId();\n        }\n        this._ids.add(id);\n        return id;\n    };\n    return IDs;\n}());\nexport { IDs };\nvar ids = (globalThis === null || globalThis === void 0 ? void 0 : globalThis._ids) || new IDs();\nexport function getBpmnId() {\n    return ids.next();\n}\n","function type(obj) {\n    return Object.prototype.toString.call(obj);\n}\nfunction addSpace(depth) {\n    return '  '.repeat(depth);\n}\nfunction handleAttributes(o) {\n    var t = o;\n    if (type(o) === '[object Object]') {\n        t = {};\n        Object.keys(o).forEach(function (k) {\n            var tk = k;\n            if (k.charAt(0) === '-') {\n                tk = k.substring(1);\n            }\n            t[tk] = handleAttributes(o[k]);\n        });\n    }\n    else if (Array.isArray(o)) {\n        t = [];\n        o.forEach(function (item, index) {\n            t[index] = handleAttributes(item);\n        });\n    }\n    return t;\n}\n/**\n *  XML\n * - (`null/undefined`)\n * -  XML `&`, `<`, `>`, `\"`, `'`\n *    `&`\n * @param text \n * @returns  XML \n */\nfunction escapeXml(text) {\n    //  XML  \"null\"/\"undefined\"\n    if (text == null)\n        return '';\n    return (text\n        .toString()\n        // &  < > \" ' \n        .replace(/&/g, '&amp;')\n        // \n        .replace(/</g, '&lt;')\n        .replace(/>/g, '&gt;')\n        // \n        .replace(/\"/g, '&quot;')\n        .replace(/'/g, '&apos;'));\n}\nfunction getAttributes(obj) {\n    var tmp = obj;\n    try {\n        if (typeof tmp !== 'string') {\n            tmp = JSON.parse(obj);\n        }\n    }\n    catch (error) {\n        tmp = JSON.stringify(handleAttributes(obj)).replace(/\"/g, \"'\");\n    }\n    // \n    return escapeXml(String(tmp));\n}\nvar tn = '\\t\\n';\n// @see issue https://github.com/didi/LogicFlow/issues/718, refactoring of function toXml\nfunction toXml(obj, name, depth) {\n    var frontSpace = addSpace(depth);\n    //  0false  ->  <prop />\n    if (obj !== 0 && obj !== false && !obj) {\n        return tn + frontSpace + \"<\".concat(name, \" />\");\n    }\n    var str = '';\n    if (name === '#text') {\n        return tn + frontSpace + escapeXml(String(obj));\n    }\n    else if (name === '#cdata-section') {\n        return tn + frontSpace + '<![CDATA[' + obj + ']]>';\n    }\n    else if (name === '#comment') {\n        return tn + frontSpace + '<!--' + obj + '-->';\n    }\n    if (\"\".concat(name).charAt(0) === '-') {\n        return ' ' + name.substring(1) + '=\"' + getAttributes(obj) + '\"';\n    }\n    else {\n        if (Array.isArray(obj)) {\n            obj.forEach(function (item) {\n                str += toXml(item, name, depth + 1);\n            });\n        }\n        else if (type(obj) === '[object Object]') {\n            var keys = Object.keys(obj);\n            var attributes_1 = '';\n            var children_1 = '';\n            str += (depth === 0 ? '' : tn + frontSpace) + '<' + name;\n            keys.forEach(function (k) {\n                k.charAt(0) === '-'\n                    ? (attributes_1 += toXml(obj[k], k, depth + 1))\n                    : (children_1 += toXml(obj[k], k, depth + 1));\n            });\n            str +=\n                attributes_1 +\n                    (children_1 !== '' ? \">\".concat(children_1).concat(tn + frontSpace, \"</\").concat(name, \">\") : ' />');\n        }\n        else {\n            str += tn + frontSpace + \"<\".concat(name, \">\").concat(escapeXml(String(obj)), \"</\").concat(name, \">\");\n        }\n    }\n    return str;\n}\n/**\n * json  xml\n * @param o object\n * @returns\n */\nfunction lfJson2Xml(o) {\n    var xmlStr = '';\n    for (var m in o) {\n        xmlStr += toXml(o[m], m, 0);\n    }\n    return xmlStr;\n}\nexport { lfJson2Xml, handleAttributes, escapeXml };\n","// @ts-nocheck\n// ========================================================================\n//  XML.ObjTree -- XML source code from/to JavaScript object like E4X\n// ========================================================================\nimport { escapeXml } from './json2xml';\nvar XML = function () { };\n//  constructor\nXML.ObjTree = function () {\n    // @ts-ignore\n    return this;\n};\n//  class variables\nXML.ObjTree.VERSION = '0.23';\n//  object prototype\nXML.ObjTree.prototype.xmlDecl = '<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\\n';\nXML.ObjTree.prototype.attr_prefix = '-';\n//  method: parseXML( xmlsource )\nXML.ObjTree.prototype.parseXML = function (xml) {\n    var root;\n    if (window.DOMParser) {\n        var xmldom = new DOMParser();\n        //      xmldom.async = false;           // DOMParser is always sync-mode\n        var dom = xmldom.parseFromString(xml, 'application/xml');\n        if (!dom)\n            return;\n        root = dom.documentElement;\n    }\n    else if (window.ActiveXObject) {\n        xmldom = new ActiveXObject('Microsoft.XMLDOM');\n        xmldom.async = false;\n        xmldom.loadXML(xml);\n        root = xmldom.documentElement;\n    }\n    if (!root)\n        return;\n    return this.parseDOM(root);\n};\n//  method: parseHTTP( url, options, callback )\nXML.ObjTree.prototype.parseHTTP = function (url, options, callback) {\n    var myOpt = {};\n    for (var key in options) {\n        myOpt[key] = options[key]; // copy object\n    }\n    if (!myOpt.method) {\n        if (typeof myOpt.postBody == 'undefined' &&\n            typeof myOpt.postbody == 'undefined' &&\n            typeof myOpt.parameters == 'undefined') {\n            myOpt.method = 'get';\n        }\n        else {\n            myOpt.method = 'post';\n        }\n    }\n    if (callback) {\n        myOpt.asynchronous = true; // async-mode\n        var __this = this;\n        var __func = callback;\n        var __save = myOpt.onComplete;\n        myOpt.onComplete = function (trans) {\n            var tree;\n            if (trans && trans.responseXML && trans.responseXML.documentElement) {\n                tree = __this.parseDOM(trans.responseXML.documentElement);\n            }\n            __func(tree, trans);\n            if (__save)\n                __save(trans);\n        };\n    }\n    else {\n        myOpt.asynchronous = false; // sync-mode\n    }\n    var trans;\n    if (typeof HTTP != 'undefined' && HTTP.Request) {\n        myOpt.uri = url;\n        var req = new HTTP.Request(myOpt);\n        if (req)\n            trans = req.transport;\n    }\n    else if (typeof Ajax != 'undefined' && Ajax.Request) {\n        var req = new Ajax.Request(url, myOpt);\n        if (req)\n            trans = req.transport;\n    }\n    if (callback)\n        return trans;\n    if (trans && trans.responseXML && trans.responseXML.documentElement) {\n        return this.parseDOM(trans.responseXML.documentElement);\n    }\n};\nXML.ObjTree.prototype.parseDOM = function (root) {\n    if (!root)\n        return;\n    this.__force_array = {};\n    if (this.force_array) {\n        for (var i = 0; i < this.force_array.length; i++) {\n            this.__force_array[this.force_array[i]] = 1;\n        }\n    }\n    var json = this.parseElement(root); // parse root node\n    if (this.__force_array[root.nodeName]) {\n        json = [json];\n    }\n    if (root.nodeType != 11) {\n        // DOCUMENT_FRAGMENT_NODE\n        var tmp = {};\n        tmp[root.nodeName] = json; // root nodeName\n        json = tmp;\n    }\n    return json;\n};\n//  method: parseElement( element )\n/**\n * @reference node type reference https://www.w3schools.com/xml/dom_nodetype.asp\n */\nXML.ObjTree.prototype.parseElement = function (elem) {\n    //  PROCESSING_INSTRUCTION_NODE\n    if (elem.nodeType == 7) {\n        return;\n    }\n    //  TEXT_NODE CDATA_SECTION_NODE COMMENT_NODE\n    if (elem.nodeType == 3 || elem.nodeType == 4 || elem.nodeType == 8) {\n        var bool = elem.nodeValue.match(/[^\\x00-\\x20]/);\n        if (bool == null)\n            return; // ignore white spaces\n        return elem.nodeValue;\n    }\n    var retVal = null;\n    var cnt = {};\n    if (elem.attributes && elem.attributes.length) {\n        retVal = {};\n        for (var i = 0; i < elem.attributes.length; i++) {\n            var key = elem.attributes[i].nodeName;\n            if (typeof key != 'string')\n                continue;\n            var val = elem.attributes[i].nodeValue;\n            try {\n                val = JSON.parse(elem.attributes[i].nodeValue.replace(/'/g, '\"'));\n            }\n            catch (error) {\n                val = elem.attributes[i].nodeValue;\n            }\n            if (!val)\n                continue;\n            key = this.attr_prefix + key;\n            if (typeof cnt[key] == 'undefined')\n                cnt[key] = 0;\n            cnt[key]++;\n            this.addNode(retVal, key, cnt[key], val);\n        }\n    }\n    //  parse child nodes (recursive)\n    if (elem.childNodes && elem.childNodes.length) {\n        var textOnly = true;\n        if (retVal)\n            textOnly = false; // some attributes exists\n        for (var i = 0; i < elem.childNodes.length && textOnly; i++) {\n            var nType = elem.childNodes[i].nodeType;\n            if (nType == 3 || nType == 4 || nType == 8)\n                continue;\n            textOnly = false;\n        }\n        if (textOnly) {\n            if (!retVal)\n                retVal = '';\n            for (var i = 0; i < elem.childNodes.length; i++) {\n                retVal += elem.childNodes[i].nodeValue;\n            }\n        }\n        else {\n            if (!retVal)\n                retVal = {};\n            for (var i = 0; i < elem.childNodes.length; i++) {\n                var key = elem.childNodes[i].nodeName;\n                if (typeof key != 'string')\n                    continue;\n                var val = this.parseElement(elem.childNodes[i]);\n                if (!val)\n                    continue;\n                if (typeof cnt[key] == 'undefined')\n                    cnt[key] = 0;\n                cnt[key]++;\n                this.addNode(retVal, key, cnt[key], val);\n            }\n        }\n    }\n    else {\n        // @see issue https://github.com/didi/LogicFlow/issues/1068\n        // if retVal is null, that means the elem doesn't have any attributes and children,\n        // the elem would be like: <a /> or <a></a>, so set retVal to empty object {}\n        retVal === null && (retVal = {});\n    }\n    return retVal;\n};\n//  method: addNode( hash, key, count, value )\nXML.ObjTree.prototype.addNode = function (hash, key, counts, val) {\n    if (this.__force_array[key]) {\n        if (counts == 1)\n            hash[key] = [];\n        hash[key][hash[key].length] = val; // push\n    }\n    else if (counts == 1) {\n        // 1st sibling\n        hash[key] = val;\n    }\n    else if (counts == 2) {\n        // 2nd sibling\n        hash[key] = [hash[key], val];\n    }\n    else {\n        // 3rd sibling and more\n        hash[key][hash[key].length] = val;\n    }\n};\n//  method: writeXML( tree )\nXML.ObjTree.prototype.writeXML = function (tree) {\n    var xml = this.hash_to_xml(null, tree);\n    return this.xmlDecl + xml;\n};\n//  method: hash_to_xml( tagName, tree )\nXML.ObjTree.prototype.hash_to_xml = function (name, tree) {\n    var elem = [];\n    var attr = [];\n    for (var key in tree) {\n        if (!tree.hasOwnProperty(key))\n            continue;\n        var val = tree[key];\n        if (key.charAt(0) != this.attr_prefix) {\n            if (typeof val == 'undefined' || val == null) {\n                elem[elem.length] = '<' + key + ' />';\n            }\n            else if (typeof val == 'object' && val.constructor == Array) {\n                elem[elem.length] = this.array_to_xml(key, val);\n            }\n            else if (typeof val == 'object') {\n                elem[elem.length] = this.hash_to_xml(key, val);\n            }\n            else {\n                elem[elem.length] = this.scalar_to_xml(key, val);\n            }\n        }\n        else {\n            attr[attr.length] =\n                ' ' + key.substring(1) + '=\"' + this.xml_escape(val) + '\"';\n        }\n    }\n    var jattr = attr.join('');\n    var jelem = elem.join('');\n    if (typeof name == 'undefined' || name == null) {\n        // no tag\n    }\n    else if (elem.length > 0) {\n        if (jelem.match(/\\n/)) {\n            jelem = '<' + name + jattr + '>\\n' + jelem + '</' + name + '>\\n';\n        }\n        else {\n            jelem = '<' + name + jattr + '>' + jelem + '</' + name + '>\\n';\n        }\n    }\n    else {\n        jelem = '<' + name + jattr + ' />\\n';\n    }\n    return jelem;\n};\n//  method: array_to_xml( tagName, array )\nXML.ObjTree.prototype.array_to_xml = function (name, array) {\n    var out = [];\n    for (var i = 0; i < array.length; i++) {\n        var val = array[i];\n        if (typeof val == 'undefined' || val == null) {\n            out[out.length] = '<' + name + ' />';\n        }\n        else if (typeof val == 'object' && val.constructor == Array) {\n            out[out.length] = this.array_to_xml(name, val);\n        }\n        else if (typeof val == 'object') {\n            out[out.length] = this.hash_to_xml(name, val);\n        }\n        else {\n            out[out.length] = this.scalar_to_xml(name, val);\n        }\n    }\n    return out.join('');\n};\n//  method: scalar_to_xml( tagName, text )\nXML.ObjTree.prototype.scalar_to_xml = function (name, text) {\n    if (name == '#text') {\n        return this.xml_escape(text);\n    }\n    else {\n        return '<' + name + '>' + this.xml_escape(text) + '</' + name + '>\\n';\n    }\n};\n//  method: xml_escape( text )\nXML.ObjTree.prototype.xml_escape = escapeXml;\n/*\n// ========================================================================\n\n=head1 NAME\n\nXML.ObjTree -- XML source code from/to JavaScript object like E4X\n\n=head1 SYNOPSIS\n\nvar xotree = new XML.ObjTree();\nvar tree1 = {\nroot: {\nnode: \"Hello, World!\"\n}\n};\nvar xml1 = xotree.writeXML( tree1 );        // object tree to XML source\nalert( \"xml1: \"+xml1 );\n\nvar xml2 = '<?xml version=\"1.0\"?><response><error>0</error></response>';\nvar tree2 = xotree.parseXML( xml2 );        // XML source to object tree\nalert( \"error: \"+tree2.response.error );\n\n=head1 DESCRIPTION\n\nXML.ObjTree class is a parser/generator between XML source code\nand JavaScript object like E4X, ECMAScript for XML.\nThis is a JavaScript version of the XML::TreePP module for Perl.\nThis also works as a wrapper for XMLHTTPRequest and successor to JKL.ParseXML class\nwhen this is used with prototype.js or JSAN's HTTP.Request class.\n\n=head2 JavaScript object tree format\n\nA sample XML source:\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<family name=\"Kawasaki\">\n<father>Yasuhisa</father>\n<mother>Chizuko</mother>\n<children>\n<girl>Shiori</girl>\n<boy>Yusuke</boy>\n<boy>Kairi</boy>\n</children>\n</family>\n\nIts JavaScript object tree like JSON/E4X:\n\n{\n'family': {\n'-name':    'Kawasaki',\n'father':   'Yasuhisa',\n'mother':   'Chizuko',\n'children': {\n'girl': 'Shiori'\n'boy': [\n'Yusuke',\n'Kairi'\n]\n}\n}\n};\n\nEach elements are parsed into objects:\n\ntree.family.father;             # the father's given name.\n\nPrefix '-' is inserted before every attributes' name.\n\ntree.family[\"-name\"];           # this family's family name\n\nA array is used because this family has two boys.\n\ntree.family.children.boy[0];    # first boy's name\ntree.family.children.boy[1];    # second boy's name\ntree.family.children.girl;      # (girl has no other sisters)\n\n=head1 METHODS\n\n=head2 xotree = new XML.ObjTree()\n\nThis constructor method returns a new XML.ObjTree object.\n\n=head2 xotree.force_array = [ \"rdf:li\", \"item\", \"-xmlns\" ];\n\nThis property allows you to specify a list of element names\nwhich should always be forced into an array representation.\nThe default value is null, it means that context of the elements\nwill determine to make array or to keep it scalar.\n\n=head2 xotree.attr_prefix = '@';\n\nThis property allows you to specify a prefix character which is\ninserted before each attribute names.\nInstead of default prefix '-', E4X-style prefix '@' is also available.\nThe default character is '-'.\nOr set '@' to access attribute values like E4X, ECMAScript for XML.\nThe length of attr_prefix must be just one character and not be empty.\n\n=head2 tree = xotree.parseXML( xmlSrc );\n\nThis method loads an XML document using the supplied string\nand returns its JavaScript object converted.\n\n=head2 tree = xotree.parseDOM( domNode );\n\nThis method parses a DOM tree (ex. responseXML.documentElement)\nand returns its JavaScript object converted.\n\n=head2 tree = xotree.parseHTTP( url, options );\n\nThis method loads a XML file from remote web server\nand returns its JavaScript object converted.\nXMLHTTPRequest's synchronous mode is always used.\nThis mode blocks the process until the response is completed.\n\nFirst argument is a XML file's URL\nwhich must exist in the same domain as parent HTML file's.\nCross-domain loading is not available for security reasons.\n\nSecond argument is options' object which can contains some parameters:\nmethod, postBody, parameters, onLoading, etc.\n\nThis method requires JSAN's L<HTTP.Request> class or prototype.js's Ajax.Request class.\n\n=head2 xotree.parseHTTP( url, options, callback );\n\nIf a callback function is set as third argument,\nXMLHTTPRequest's asynchronous mode is used.\n\nThis mode calls a callback function with XML file's JavaScript object converted\nafter the response is completed.\n\n=head2 xmlSrc = xotree.writeXML( tree );\n\nThis method parses a JavaScript object tree\nand returns its XML source generated.\n\n=head1 EXAMPLES\n\n=head2 Text node and attributes\n\nIf a element has both of a text node and attributes\nor both of a text node and other child nodes,\ntext node's value is moved to a special node named \"#text\".\n\nvar xotree = new XML.ObjTree();\nvar xmlSrc = '<span class=\"author\">Kawasaki Yusuke</span>';\nvar tree = xotree.parseXML( xmlSrc );\nvar class = tree.span[\"-class\"];        # attribute\nvar name  = tree.span[\"#text\"];         # text node\n\n=head2 parseHTTP() method with HTTP-GET and sync-mode\n\nHTTP/Request.js or prototype.js must be loaded before calling this method.\n\nvar xotree = new XML.ObjTree();\nvar url = \"http://example.com/index.html\";\nvar tree = xotree.parseHTTP( url );\nxotree.attr_prefix = '@';                   // E4X-style\nalert( tree.html[\"@lang\"] );\n\nThis code shows C<lang=\"\"> attribute from a X-HTML source code.\n\n=head2 parseHTTP() method with HTTP-POST and async-mode\n\nThird argument is a callback function which is called on onComplete.\n\nvar xotree = new XML.ObjTree();\nvar url = \"http://example.com/mt-tb.cgi\";\nvar opts = {\npostBody:   \"title=...&excerpt=...&url=...&blog_name=...\"\n};\nvar func = function ( tree ) {\nalert( tree.response.error );\n};\nxotree.parseHTTP( url, opts, func );\n\nThis code send a track back ping and shows its response code.\n\n=head2 Simple RSS reader\n\nThis is a RSS reader which loads RDF file and displays all items.\n\nvar xotree = new XML.ObjTree();\nxotree.force_array = [ \"rdf:li\", \"item\" ];\nvar url = \"http://example.com/news-rdf.xml\";\nvar func = function( tree ) {\nvar elem = document.getElementById(\"rss_here\");\nfor( var i=0; i<tree[\"rdf:RDF\"].item.length; i++ ) {\nvar divTag = document.createElement( \"div\" );\nvar aTag = document.createElement( \"a\" );\naTag.href = tree[\"rdf:RDF\"].item[i].link;\nvar title = tree[\"rdf:RDF\"].item[i].title;\nvar tNode = document.createTextNode( title );\naTag.appendChild( tNode );\ndivTag.appendChild( aTag );\nelem.appendChild( divTag );\n}\n};\nxotree.parseHTTP( url, {}, func );\n\n=head2  XML-RPC using writeXML, prototype.js and parseDOM\n\nIf you wish to use prototype.js's Ajax.Request class by yourself:\n\nvar xotree = new XML.ObjTree();\nvar reqTree = {\nmethodCall: {\nmethodName: \"weblogUpdates.ping\",\nparams: {\nparam: [\n{ value: \"Kawa.net xp top page\" },  // 1st param\n{ value: \"http://www.kawa.net/\" }   // 2nd param\n]\n}\n}\n};\nvar reqxml = xotree.writeXML( reqTree );       // JS-Object to XML code\nvar url = \"http://example.com/xmlrpc\";\nvar func = function( req ) {\nvar resDom = req.responseXML.documentElement;\nxotree.force_array = [ \"member\" ];\nvar resTree = xotree.parseDOM( resDom );   // XML-DOM to JS-Object\nalert( resTree.methodResponse.params.param.value.struct.member[0].value.string );\n};\nvar opt = {\nmethod:         \"post\",\npostBody:       reqxml,\nasynchronous:   true,\nonComplete:     func\n};\nnew Ajax.Request( url, opt );\n\n=head1 AUTHOR\n\nYusuke Kawasaki http://www.kawa.net/\n=head1 COPYRIGHT AND LICENSE\n\nCopyright (c) 2005-2006 Yusuke Kawasaki. All rights reserved.\nThis program is free software; you can redistribute it and/or\nmodify it under the Artistic license. Or whatever license I choose,\nwhich I will do instead of keeping this documentation like it is.\n\n=cut\n// ========================================================================\n*/\n/**\n * xml  json\n * @param xmlData\n * @returns\n */\nvar lfXml2Json = function (xmlData) {\n    return new XML.ObjTree().parseXML(xmlData);\n};\nexport { lfXml2Json };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { getBpmnId } from './bpmnIds';\nimport { handleAttributes, lfJson2Xml } from './json2xml';\nimport { lfXml2Json } from './xml2json';\n/**\n * BPMN Adapter\n *\n *  LogicFlow GraphData BPMN XML/JSON \n * - adapterOut LogicFlow  BPMN JSON json2xml  XML\n * - adapterIn BPMN JSON  LogicFlow  XML xml2json  JSON\n *\n * \n * - BPMN XML  JSON  '-'  '-id''-name'\n * - XML xml2json \n * - BPMN  LogicFlow \n * -  XML  <, >, & \n */\nimport { ExclusiveGatewayConfig, StartEventConfig, EndEventConfig, ServiceTaskConfig, UserTaskConfig, } from '../bpmn/constant';\n/**\n * BPMN  JSON  BPMN \n */\nvar BpmnElements;\n(function (BpmnElements) {\n    BpmnElements[\"START\"] = \"bpmn:startEvent\";\n    BpmnElements[\"END\"] = \"bpmn:endEvent\";\n    BpmnElements[\"GATEWAY\"] = \"bpmn:exclusiveGateway\";\n    BpmnElements[\"USER\"] = \"bpmn:userTask\";\n    BpmnElements[\"SYSTEM\"] = \"bpmn:serviceTask\";\n    BpmnElements[\"FLOW\"] = \"bpmn:sequenceFlow\";\n})(BpmnElements || (BpmnElements = {}));\n/**\n * BPMN \n * -  `processValue` \n * -  LogicFlow  `properties` \n */\nvar defaultAttrs = [\n    '-name',\n    '-id',\n    'bpmn:incoming',\n    'bpmn:outgoing',\n    '-sourceRef',\n    '-targetRef',\n];\n/**\n * jsonxmlJson\n * xmlJsonproperty-\n * -\n * fix issue https://github.com/didi/LogicFlow/issues/718, contain the process of #text/#cdata and array\n * @param retainedFields retainedFielddefaultRetainedFields:\n * [\"properties\", \"startPoint\", \"endPoint\", \"pointsList\"]\n * \n * @reference node type reference https://www.w3schools.com/xml/dom_nodetype.asp\n */\n/**\n *  BPMN JSON \n * -  JSON  '-' \n */\nvar defaultRetainedFields = [\n    'properties',\n    'startPoint',\n    'endPoint',\n    'pointsList',\n];\n/**\n * XML \n * -  XML `&lt;``<``&gt;``>``&amp;``&``&quot;``\"``&apos;``'`\n * -  `String(text || '')`  `null/undefined` \n * - / `&amp;lt;` `&lt;`\n *   \n */\nvar unescapeXml = function (text) {\n    return String(text || '')\n        .replace(/&lt;/g, '<')\n        .replace(/&gt;/g, '>')\n        .replace(/&amp;/g, '&')\n        .replace(/&quot;/g, '\"')\n        .replace(/&apos;/g, \"'\");\n};\n/**\n *  JSON  XML  JSONxmlJson\n *  JSON  retainedFields\n *  XML  xmlJson '-' \n * \n * -  '-' \n * - fields '-'\n */\nfunction toXmlJson(retainedFields) {\n    var fields = retainedFields\n        ? defaultRetainedFields.concat(retainedFields)\n        : defaultRetainedFields;\n    return function (json) {\n        /**\n         * \n         * @param obj //\n         * @returns  xmlJson\n         */\n        function ToXmlJson(obj) {\n            var xmlJson = {};\n            if (typeof obj === 'string') {\n                return obj;\n            }\n            if (Array.isArray(obj)) {\n                return obj.map(function (j) { return ToXmlJson(j); });\n            }\n            Object.entries(obj).forEach(function (_a) {\n                var _b = __read(_a, 2), key = _b[0], value = _b[1];\n                if (typeof value !== 'object') {\n                    // node type reference https://www.w3schools.com/xml/dom_nodetype.asp\n                    if (key.indexOf('-') === 0 ||\n                        ['#text', '#cdata-section', '#comment'].includes(key)) {\n                        xmlJson[key] = value;\n                    }\n                    else {\n                        xmlJson[\"-\".concat(key)] = value;\n                    }\n                }\n                else if (fields.includes(key)) {\n                    xmlJson[\"-\".concat(key)] = ToXmlJson(value);\n                }\n                else {\n                    xmlJson[key] = ToXmlJson(value);\n                }\n            });\n            return xmlJson;\n        }\n        return ToXmlJson(json);\n    };\n}\n/**\n *  XML  JSONxmlJson JSON\n *  '-'  xmlJson\n *  JSON\n */\nfunction toNormalJson(xmlJson) {\n    var json = {};\n    Object.entries(xmlJson).forEach(function (_a) {\n        var _b = __read(_a, 2), key = _b[0], value = _b[1];\n        if (key.indexOf('-') === 0) {\n            json[key.substring(1)] = handleAttributes(value);\n        }\n        else if (typeof value === 'string') {\n            json[key] = value;\n        }\n        else if (Object.prototype.toString.call(value) === '[object Object]') {\n            json[key] = toNormalJson(value);\n        }\n        else if (Array.isArray(value)) {\n            // contain the process of array\n            json[key] = value.map(function (v) { return toNormalJson(v); });\n        }\n        else {\n            json[key] = value;\n        }\n    });\n    return json;\n}\n/**\n * bpmn process\n * examples/bpmn.json\n * bpmnxmljson\n * 1) xmljson'-'\n * 2json\n * 3json\n */\n/**\n *  LogicFlow  BPMN  process \n * \n * - bpmnProcessData '-id' bpmn:*  sequenceFlow\n * - dataLogicFlow nodes/edges\n * - retainedFields\n *  bpmnProcessData\n * \n * - node.text.value BPMN  '-name' \n * -  incoming/outgoing \n * - XML \n */\nfunction convertLf2ProcessData(bpmnProcessData, data, retainedFields) {\n    var nodeMap = new Map();\n    data.nodes.forEach(function (node) {\n        var _a;\n        var processNode = {\n            '-id': node.id, // xmljson'-'\n        };\n        if ((_a = node.text) === null || _a === void 0 ? void 0 : _a.value) {\n            processNode['-name'] = node.text.value;\n        }\n        if (node.properties) {\n            var properties = toXmlJson(retainedFields)(node.properties);\n            Object.assign(processNode, properties);\n        }\n        nodeMap.set(node.id, processNode);\n        if (!bpmnProcessData[node.type]) {\n            bpmnProcessData[node.type] = processNode; // json\n        }\n        else if (Array.isArray(bpmnProcessData[node.type])) {\n            // json\n            bpmnProcessData[node.type].push(processNode);\n        }\n        else {\n            // json\n            bpmnProcessData[node.type] = [bpmnProcessData[node.type], processNode];\n        }\n    });\n    var sequenceFlow = data.edges.map(function (edge) {\n        var _a, _b;\n        var targetNode = nodeMap.get(edge.targetNodeId);\n        if (!targetNode['bpmn:incoming']) {\n            targetNode['bpmn:incoming'] = edge.id;\n        }\n        else if (Array.isArray(targetNode['bpmn:incoming'])) {\n            targetNode['bpmn:incoming'].push(edge.id);\n        }\n        else {\n            targetNode['bpmn:incoming'] = [targetNode['bpmn:incoming'], edge.id];\n        }\n        var edgeConfig = {\n            '-id': edge.id,\n            '-sourceRef': edge.sourceNodeId,\n            '-targetRef': edge.targetNodeId,\n        };\n        if ((_a = edge.text) === null || _a === void 0 ? void 0 : _a.value) {\n            edgeConfig['-name'] = (_b = edge.text) === null || _b === void 0 ? void 0 : _b.value;\n        }\n        if (edge.properties) {\n            var properties = toXmlJson(retainedFields)(edge.properties);\n            Object.assign(edgeConfig, properties);\n        }\n        return edgeConfig;\n    });\n    // @see https://github.com/didi/LogicFlow/issues/325\n    // incomingoutgoing\n    data.edges.forEach(function (edge) {\n        var sourceNode = nodeMap.get(edge.sourceNodeId);\n        if (!sourceNode['bpmn:outgoing']) {\n            sourceNode['bpmn:outgoing'] = edge.id;\n        }\n        else if (Array.isArray(sourceNode['bpmn:outgoing'])) {\n            sourceNode['bpmn:outgoing'].push(edge.id);\n        }\n        else {\n            // \n            sourceNode['bpmn:outgoing'] = [sourceNode['bpmn:outgoing'], edge.id];\n        }\n    });\n    bpmnProcessData[BpmnElements.FLOW] = sequenceFlow;\n}\n/**\n * adapterOut bpmn diagram\n */\n/**\n *  LogicFlow  BPMN BPMNDiagram/BPMNPlane  Shape  Edge\n * \n * - bpmnDiagramData BPMNShape/BPMNEdge\n * - dataLogicFlow nodes/edges\n *  bpmnDiagramData\n * \n * - \n * - Bounds BPMN \n */\nfunction convertLf2DiagramData(bpmnDiagramData, data) {\n    bpmnDiagramData['bpmndi:BPMNEdge'] = data.edges.map(function (edge) {\n        var _a;\n        var edgeId = edge.id;\n        var pointsList = edge.pointsList.map(function (_a) {\n            var x = _a.x, y = _a.y;\n            return ({\n                '-x': x,\n                '-y': y,\n            });\n        });\n        var diagramData = {\n            '-id': \"\".concat(edgeId, \"_di\"),\n            '-bpmnElement': edgeId,\n            'di:waypoint': pointsList,\n        };\n        if ((_a = edge.text) === null || _a === void 0 ? void 0 : _a.value) {\n            diagramData['bpmndi:BPMNLabel'] = {\n                'dc:Bounds': {\n                    '-x': edge.text.x - (edge.text.value.length * 10) / 2,\n                    '-y': edge.text.y - 7,\n                    '-width': edge.text.value.length * 10,\n                    '-height': 14,\n                },\n            };\n        }\n        return diagramData;\n    });\n    bpmnDiagramData['bpmndi:BPMNShape'] = data.nodes.map(function (node) {\n        var _a;\n        var nodeId = node.id;\n        var width = 100;\n        var height = 80;\n        var x = node.x, y = node.y;\n        // bpmnLogicFlow\n        var shapeConfig = BpmnAdapter.shapeConfigMap.get(node.type);\n        if (shapeConfig) {\n            width = shapeConfig.width;\n            height = shapeConfig.height;\n        }\n        x -= width / 2;\n        y -= height / 2;\n        var diagramData = {\n            '-id': \"\".concat(nodeId, \"_di\"),\n            '-bpmnElement': nodeId,\n            'dc:Bounds': {\n                '-x': x,\n                '-y': y,\n                '-width': width,\n                '-height': height,\n            },\n        };\n        if ((_a = node.text) === null || _a === void 0 ? void 0 : _a.value) {\n            diagramData['bpmndi:BPMNLabel'] = {\n                'dc:Bounds': {\n                    '-x': node.text.x - (node.text.value.length * 10) / 2,\n                    '-y': node.text.y - 7,\n                    '-width': node.text.value.length * 10,\n                    '-height': 14,\n                },\n            };\n        }\n        return diagramData;\n    });\n}\n/**\n * bpmnLogicFlow\n */\n/**\n *  BPMN JSON  LogicFlow \n * \n * - bpmnData 'bpmn:definitions'  BPMN JSON\n * { nodes, edges }LogicFlow  GraphConfigData\n * \n * -  process  plane\n */\nfunction convertBpmn2LfData(bpmnData) {\n    var nodes = [];\n    var edges = [];\n    var definitions = bpmnData['bpmn:definitions'];\n    if (definitions) {\n        // /\n        var process_1 = definitions['bpmn:process'];\n        var diagram = definitions['bpmndi:BPMNDiagram'];\n        var plane_1 = diagram === null || diagram === void 0 ? void 0 : diagram['bpmndi:BPMNPlane'];\n        if (!process_1 || !plane_1) {\n            return { nodes: nodes, edges: edges };\n        }\n        Object.keys(process_1).forEach(function (key) {\n            if (key.indexOf('bpmn:') === 0) {\n                var value = process_1[key];\n                if (key === BpmnElements.FLOW) {\n                    var edgesRaw = plane_1['bpmndi:BPMNEdge'];\n                    var bpmnEdges = Array.isArray(edgesRaw) ? edgesRaw : edgesRaw;\n                    edges = getLfEdges(value, bpmnEdges);\n                }\n                else {\n                    var shapesRaw = plane_1['bpmndi:BPMNShape'];\n                    var shapes = Array.isArray(shapesRaw) ? shapesRaw : shapesRaw;\n                    nodes = nodes.concat(getLfNodes(value, shapes, key));\n                }\n            }\n        });\n    }\n    return {\n        nodes: nodes,\n        edges: edges,\n    };\n}\n/**\n *  BPMN  process  plane  BPMNShape  LogicFlow \n * \n * - value bpmn:userTask\n * - shapesplane['bpmndi:BPMNShape']\n * - key BPMN  'bpmn:userTask'\n * LogicFlow \n */\nfunction getLfNodes(value, shapes, key) {\n    var nodes = [];\n    if (Array.isArray(value)) {\n        // \n        value.forEach(function (val) {\n            var shapeValue;\n            if (Array.isArray(shapes)) {\n                shapeValue = shapes.find(function (shape) { return shape['-bpmnElement'] === val['-id']; });\n            }\n            else {\n                shapeValue = shapes;\n            }\n            var node = getNodeConfig(shapeValue, key, val);\n            nodes.push(node);\n        });\n    }\n    else {\n        var shapeValue = void 0;\n        if (Array.isArray(shapes)) {\n            shapeValue = shapes.find(function (shape) { return shape['-bpmnElement'] === value['-id']; });\n        }\n        else {\n            shapeValue = shapes;\n        }\n        var node = getNodeConfig(shapeValue, key, value);\n        nodes.push(node);\n    }\n    return nodes;\n}\n/**\n *  BPMNShape  process  LogicFlow \n * \n * - shapeValueplane  BPMNShape Bounds  BPMNLabel\n * - typeBPMN  'bpmn:userTask'\n * - processValueprocess  '-id''-name' \n * LogicFlow NodeConfig\n * \n * - \n * -  '-name'  XML \n * -  BPMNLabel  Bounds\n */\nfunction getNodeConfig(shapeValue, type, processValue) {\n    var x = Number(shapeValue['dc:Bounds']['-x']);\n    var y = Number(shapeValue['dc:Bounds']['-y']);\n    //  XML \n    var name = unescapeXml(processValue['-name']);\n    var shapeConfig = BpmnAdapter.shapeConfigMap.get(type);\n    if (shapeConfig) {\n        x += shapeConfig.width / 2;\n        y += shapeConfig.height / 2;\n    }\n    var properties;\n    // properties\n    Object.entries(processValue).forEach(function (_a) {\n        var _b = __read(_a, 2), key = _b[0], value = _b[1];\n        if (defaultAttrs.indexOf(key) === -1) {\n            if (!properties)\n                properties = {};\n            properties[key] = value;\n        }\n    });\n    if (properties) {\n        properties = toNormalJson(properties);\n    }\n    var text;\n    if (name) {\n        text = {\n            x: x,\n            y: y,\n            value: name,\n        };\n        // \n        if (shapeValue['bpmndi:BPMNLabel'] &&\n            shapeValue['bpmndi:BPMNLabel']['dc:Bounds']) {\n            var textBounds = shapeValue['bpmndi:BPMNLabel']['dc:Bounds'];\n            text.x = Number(textBounds['-x']) + Number(textBounds['-width']) / 2;\n            text.y = Number(textBounds['-y']) + Number(textBounds['-height']) / 2;\n        }\n    }\n    var nodeConfig = {\n        id: shapeValue['-bpmnElement'],\n        type: type,\n        x: x,\n        y: y,\n        properties: properties,\n    };\n    if (text) {\n        nodeConfig.text = text;\n    }\n    return nodeConfig;\n}\n/**\n *  BPMN  sequenceFlow  BPMNEdge  LogicFlow \n * \n * - valueprocess['bpmn:sequenceFlow']\n * - bpmnEdgesplane['bpmndi:BPMNEdge']\n * LogicFlow \n */\nfunction getLfEdges(value, bpmnEdges) {\n    var edges = [];\n    if (Array.isArray(value)) {\n        value.forEach(function (val) {\n            var edgeValue;\n            if (Array.isArray(bpmnEdges)) {\n                edgeValue = bpmnEdges.find(function (edge) { return edge['-bpmnElement'] === val['-id']; });\n            }\n            else {\n                edgeValue = bpmnEdges;\n            }\n            edges.push(getEdgeConfig(edgeValue, val));\n        });\n    }\n    else {\n        var edgeValue = void 0;\n        if (Array.isArray(bpmnEdges)) {\n            edgeValue = bpmnEdges.find(function (edge) { return edge['-bpmnElement'] === value['-id']; });\n        }\n        else {\n            edgeValue = bpmnEdges;\n        }\n        edges.push(getEdgeConfig(edgeValue, value));\n    }\n    return edges;\n}\n/**\n *  BPMNEdge  sequenceFlow  LogicFlow \n * \n * - edgeValueBPMNEdge di:waypoint  BPMNLabel/Bounds\n * - processValuesequenceFlow '-id''-sourceRef''-targetRef''-name' \n * LogicFlow EdgeConfig\n * \n * -  '-name'  XML \n * -  BPMNLabel\n * - pointsList  waypoints  Number\n */\nfunction getEdgeConfig(edgeValue, processValue) {\n    var text;\n    //  XML \n    var textVal = processValue['-name']\n        ? unescapeXml(\"\".concat(processValue['-name']))\n        : '';\n    if (textVal) {\n        var textBounds = void 0;\n        if (edgeValue['bpmndi:BPMNLabel'] &&\n            edgeValue['bpmndi:BPMNLabel']['dc:Bounds']) {\n            textBounds = edgeValue['bpmndi:BPMNLabel']['dc:Bounds'];\n        }\n        // \n        var textLength_1 = 0;\n        textVal.split('\\n').forEach(function (textSpan) {\n            if (textLength_1 < textSpan.length) {\n                textLength_1 = textSpan.length;\n            }\n        });\n        if (textBounds) {\n            text = {\n                value: textVal,\n                x: Number(textBounds['-x']) + (textLength_1 * 10) / 2,\n                y: Number(textBounds['-y']) + 7,\n            };\n        }\n        else {\n            //  BPMNLabel \n            var waypoints = edgeValue['di:waypoint'] || [];\n            var first = waypoints[0];\n            var last = waypoints[waypoints.length - 1] || first;\n            var centerX = (Number((first === null || first === void 0 ? void 0 : first['-x']) || 0) + Number((last === null || last === void 0 ? void 0 : last['-x']) || 0)) / 2;\n            var centerY = (Number((first === null || first === void 0 ? void 0 : first['-y']) || 0) + Number((last === null || last === void 0 ? void 0 : last['-y']) || 0)) / 2;\n            text = {\n                value: textVal,\n                x: centerX,\n                y: centerY,\n            };\n        }\n    }\n    var properties;\n    // properties\n    Object.entries(processValue).forEach(function (_a) {\n        var _b = __read(_a, 2), key = _b[0], value = _b[1];\n        if (defaultAttrs.indexOf(key) === -1) {\n            if (!properties)\n                properties = {};\n            properties[key] = value;\n        }\n    });\n    if (properties) {\n        properties = toNormalJson(properties);\n    }\n    var edge = {\n        id: processValue['-id'],\n        type: BpmnElements.FLOW,\n        pointsList: edgeValue['di:waypoint'].map(function (point) { return ({\n            x: Number(point['-x']),\n            y: Number(point['-y']),\n        }); }),\n        sourceNodeId: processValue['-sourceRef'],\n        targetNodeId: processValue['-targetRef'],\n        properties: properties,\n    };\n    if (text) {\n        edge.text = text;\n    }\n    return edge;\n}\n/**\n * BpmnAdapter\n *\n *  LogicFlow  BPMN JSON  adapterIn/adapterOut \n * - processAttributes BPMN process  isExecutableid \n * - definitionAttributes BPMN definitions \n * - shapeConfigMap BPMN /Bounds \n */\nvar BpmnAdapter = /** @class */ (function () {\n    /**\n     * \n     * -  LogicFlow  adapterIn/adapterOut JSON \n     * -  process  definitions \n     */\n    function BpmnAdapter(_a) {\n        var lf = _a.lf;\n        var _this = this;\n        /**\n         * @param retainedFields?: string[] ()retainedFielddefaultRetainedFields:\n         * [\"properties\", \"startPoint\", \"endPoint\", \"pointsList\"]\n         * \n         */\n        /**\n         * adapterOut LogicFlow  BPMN JSON\n         * \n         * - dataLogicFlow GraphData\n         * - retainedFields\n         * BPMN JSON definitions/process/diagram/plane\n         */\n        this.adapterOut = function (data, retainedFields) {\n            var bpmnProcessData = __assign({}, _this.processAttributes);\n            convertLf2ProcessData(bpmnProcessData, data, retainedFields);\n            var bpmnDiagramData = {\n                '-id': 'BPMNPlane_1',\n                '-bpmnElement': bpmnProcessData['-id'],\n            };\n            convertLf2DiagramData(bpmnDiagramData, data);\n            var definitions = _this.definitionAttributes;\n            definitions['bpmn:process'] = bpmnProcessData;\n            definitions['bpmndi:BPMNDiagram'] = {\n                '-id': 'BPMNDiagram_1',\n                'bpmndi:BPMNPlane': bpmnDiagramData,\n            };\n            var bpmnData = {\n                'bpmn:definitions': definitions,\n            };\n            return bpmnData;\n        };\n        /**\n         * adapterIn BPMN JSON  LogicFlow \n         * bpmnDataBPMN JSON\n         * GraphConfigDatanodes/edges\n         */\n        this.adapterIn = function (bpmnData) {\n            if (bpmnData) {\n                return convertBpmn2LfData(bpmnData);\n            }\n        };\n        lf.adapterIn = function (data) { return _this.adapterIn(data); };\n        lf.adapterOut = function (data, retainedFields) {\n            return _this.adapterOut(data, retainedFields);\n        };\n        this.processAttributes = {\n            '-isExecutable': 'true',\n            '-id': \"Process_\".concat(getBpmnId()),\n        };\n        this.definitionAttributes = {\n            '-id': \"Definitions_\".concat(getBpmnId()),\n            '-xmlns:xsi': 'http://www.w3.org/2001/XMLSchema-instance',\n            '-xmlns:bpmn': 'http://www.omg.org/spec/BPMN/20100524/MODEL',\n            '-xmlns:bpmndi': 'http://www.omg.org/spec/BPMN/20100524/DI',\n            '-xmlns:dc': 'http://www.omg.org/spec/DD/20100524/DC',\n            '-xmlns:di': 'http://www.omg.org/spec/DD/20100524/DI',\n            '-targetNamespace': 'http://logic-flow.org',\n            '-exporter': 'logicflow',\n            '-exporterVersion': '1.2.0',\n        };\n    }\n    BpmnAdapter.prototype.setCustomShape = function (key, val) {\n        BpmnAdapter.shapeConfigMap.set(key, val);\n    };\n    BpmnAdapter.pluginName = 'bpmn-adapter';\n    BpmnAdapter.shapeConfigMap = new Map();\n    return BpmnAdapter;\n}());\nBpmnAdapter.shapeConfigMap.set(BpmnElements.START, {\n    width: StartEventConfig.width,\n    height: StartEventConfig.height,\n});\nBpmnAdapter.shapeConfigMap.set(BpmnElements.END, {\n    width: EndEventConfig.width,\n    height: EndEventConfig.height,\n});\nBpmnAdapter.shapeConfigMap.set(BpmnElements.GATEWAY, {\n    width: ExclusiveGatewayConfig.width,\n    height: ExclusiveGatewayConfig.height,\n});\nBpmnAdapter.shapeConfigMap.set(BpmnElements.SYSTEM, {\n    width: ServiceTaskConfig.width,\n    height: ServiceTaskConfig.height,\n});\nBpmnAdapter.shapeConfigMap.set(BpmnElements.USER, {\n    width: UserTaskConfig.width,\n    height: UserTaskConfig.height,\n});\n/**\n * BpmnXmlAdapterXML  BpmnAdapter\n *\n *  XML / xml2json/json2xml \n *  XML  name \n */\nvar BpmnXmlAdapter = /** @class */ (function (_super) {\n    __extends(BpmnXmlAdapter, _super);\n    /**\n     * \n     * -  LogicFlow  adapterIn/adapterOut XML \n     */\n    function BpmnXmlAdapter(data) {\n        var _this = _super.call(this, data) || this;\n        /**\n         * adapterXmlIn BPMN XML  LogicFlow \n         * bpmnDataXML \n         * \n         * 1)  name \n         * 2)  lfXml2Json  BPMN JSON\n         * 3)  adapterIn  GraphData\n         */\n        _this.adapterXmlIn = function (bpmnData) {\n            var xmlStr = typeof bpmnData === 'string'\n                ? _this.sanitizeNameAttributes(bpmnData)\n                : bpmnData;\n            var json = lfXml2Json(xmlStr);\n            return _this.adapterIn(json);\n        };\n        /**\n         * adapterXmlOut LogicFlow  BPMN XML\n         * \n         * - dataGraphData\n         * - retainedFields\n         * \n         * 1)  adapterOut  BPMN JSON\n         * 2)  lfJson2Xml  XML \n         */\n        _this.adapterXmlOut = function (data, retainedFields) {\n            var outData = _this.adapterOut(data, retainedFields);\n            return lfJson2Xml(outData);\n        };\n        var lf = data.lf;\n        lf.adapterIn = _this.adapterXmlIn;\n        lf.adapterOut = _this.adapterXmlOut;\n        return _this;\n    }\n    // XML name \n    /**\n     *  XML name <, >, & DOM \n     *  &amp;\n     */\n    BpmnXmlAdapter.prototype.sanitizeNameAttributes = function (xml) {\n        return xml.replace(/name=\"([^\"]*)\"/g, function (_, val) {\n            var safe = val\n                .replace(/&(?!#?\\w+;)/g, '&amp;')\n                .replace(/</g, '&lt;')\n                .replace(/>/g, '&gt;');\n            return \"name=\\\"\".concat(safe, \"\\\"\");\n        });\n    };\n    BpmnXmlAdapter.pluginName = 'bpmnXmlAdapter';\n    return BpmnXmlAdapter;\n}(BpmnAdapter));\nexport { BpmnAdapter, BpmnXmlAdapter, toXmlJson, toNormalJson };\nexport default BpmnAdapter;\n","/* eslint-disable no-bitwise */\nexport function groupRule() {\n    var rule = {\n        message: '',\n        validate: function (_sourceNode, _targetNode) {\n            var isSourceNodeInsideTheGroup = !!_sourceNode.properties.parent;\n            var isTargetNodeInsideTheGroup = !!_targetNode.properties.parent;\n            return !(!isSourceNodeInsideTheGroup && isTargetNodeInsideTheGroup);\n        },\n    };\n    this.targetRules.push(rule);\n}\n/* eslint-disable no-bitwise */\nvar IDs = /** @class */ (function () {\n    function IDs() {\n        globalThis._ids = this;\n        this._ids = new Set();\n    }\n    IDs.prototype.generateId = function () {\n        var id = 'xxxxxxx'.replace(/[x]/g, function (c) {\n            var r = (Math.random() * 16) | 0;\n            var v = c === 'x' ? r : (r & 0x3) | 0x8;\n            return v.toString(16);\n        });\n        return id;\n    };\n    IDs.prototype.next = function () {\n        var id = this.generateId();\n        while (this._ids.has(id)) {\n            id = this.generateId();\n        }\n        this._ids.add(id);\n        return id;\n    };\n    return IDs;\n}());\nvar ids = (globalThis === null || globalThis === void 0 ? void 0 : globalThis._ids) || new IDs();\nexport function genBpmnId() {\n    return ids.next();\n}\n","import { h } from '@logicflow/core';\n// event\nexport var messageIcon = 'm 8.459999999999999,11.34 l 0,12.6 l 18.900000000000002,0 l 0,-12.6 z l 9.450000000000001,5.4 l 9.450000000000001,-5.4';\nexport var timerIcon = [\n    h('circle', {\n        cx: 18,\n        cy: 18,\n        r: 11,\n        style: 'stroke-linecap: round;stroke-linejoin: round;stroke: rgb(34, 36, 42);stroke-width: 2px;fill: white',\n    }),\n    h('path', {\n        d: 'M 18,18 l 2.25,-7.5 m -2.25,7.5 l 5.25,1.5',\n        style: 'fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2px;',\n    }),\n    h('path', {\n        d: 'M 18,18 m 0,7.5 l -0,2.25',\n        transform: 'rotate(0,18,18)',\n        style: 'fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;',\n    }),\n    h('path', {\n        d: 'M 18,18 m 0,7.5 l -0,2.25',\n        transform: 'rotate(30,18,18)',\n        style: 'fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;',\n    }),\n    h('path', {\n        d: 'M 18,18 m 0,7.5 l -0,2.25',\n        transform: 'rotate(60,18,18)',\n        style: 'fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;',\n    }),\n    h('path', {\n        d: 'M 18,18 m 0,7.5 l -0,2.25',\n        transform: 'rotate(90,18,18)',\n        style: 'fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;',\n    }),\n    h('path', {\n        d: 'M 18,18 m 0,7.5 l -0,2.25',\n        transform: 'rotate(120,18,18)',\n        style: 'fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;',\n    }),\n    h('path', {\n        d: 'M 18,18 m 0,7.5 l -0,2.25',\n        transform: 'rotate(150,18,18)',\n        style: 'fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;',\n    }),\n    h('path', {\n        d: 'M 18,18 m 0,7.5 l -0,2.25',\n        transform: 'rotate(180,18,18)',\n        style: 'fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;',\n    }),\n    h('path', {\n        d: 'M 18,18 m 0,7.5 l -0,2.25',\n        transform: 'rotate(210,18,18)',\n        style: 'fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;',\n    }),\n    h('path', {\n        d: 'M 18,18 m 0,7.5 l -0,2.25',\n        transform: 'rotate(240,18,18)',\n        style: 'fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;',\n    }),\n    h('path', {\n        d: 'M 18,18 m 0,7.5 l -0,2.25',\n        transform: 'rotate(270,18,18)',\n        style: 'fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;',\n    }),\n    h('path', {\n        d: 'M 18,18 m 0,7.5 l -0,2.25',\n        transform: 'rotate(300,18,18)',\n        style: 'fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;',\n    }),\n    h('path', {\n        d: 'M 18,18 m 0,7.5 l -0,2.25',\n        transform: 'rotate(330,18,18)',\n        style: 'fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;',\n    }),\n];\nexport var errorIcon = 'm 7.2,25.991999999999997 0.09350000000000001,-0.025300000000000003 7.3392,-9.610700000000001 7.667000000000001,8.9661 4.7003,-18.2204 -5.8707,11.6501 -7.299600000000001,-9.585400000000002 z';\nexport var escalationIcon = 'M 18,7.2 l 8,20 l -8,-7 l -8,7 Z';\nexport var compensationIcon = 'm 7.92,18 9,-6.5 0,13 z m 9.3,-0.4 8.7,-6.1 0,13 -8.7,-6.1 z';\nexport var conditionalIcon = 'M 10.5,8.5 l 14.5,0 l 0,18 l -14.5,0 Z M 12.5,11.5 l 10.5,0 M 12.5,14.5 l 10.5,0 M 12.5,17.5 l 10.5,0 M 12.5,20.5 l 10.5,0 M 12.5,23.5 l 10.5,0 M 12.5,26.5 l 10.5,0 ';\nexport var linkIcon = 'm 20.52,9.468 0,4.4375 -13.5,0 0,6.75 13.5,0 0,4.4375 9.84375,-7.8125 -9.84375,-7.8125 z';\nexport var signalIcon = 'M 18,7.2 l 9,16.2 l -18,0 Z';\nexport var terminateIcon = [\n    h('circle', {\n        cx: 18,\n        cy: 18,\n        r: 10,\n        style: 'stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 4px; fill: rgb(34, 36, 42);',\n    }),\n];\n// gateway\nexport var exclusiveIcon = 'm 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z';\nexport var parallelIcon = 'm 23,10 0,12.5 -12.5,0 0,5 12.5,0 0,12.5 5,0 0,-12.5 12.5,0 0,-5 -12.5,0 0,-12.5 -5,0 z';\nexport var inclusiveIcon = h('circle', {\n    cx: 25,\n    cy: 25,\n    r: 13,\n    style: 'stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2.5px; fill: white;',\n});\n// task\nexport var serviceTaskIcon = 'M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z';\nexport var userTaskIcon = 'M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z';\nexport var scriptTaskIcon = 'M6.402,0.5H20.902C20.902,0.5,15.069,3.333,15.069,6.083S19.486,12.083,19.486,15.25S15.319,20.333,15.319,20.333H0.235C0.235,20.333,5.235,17.665999999999997,5.235,15.332999999999998S0.6520000000000001,8.582999999999998,0.6520000000000001,6.082999999999998S6.402,0.5,6.402,0.5ZM3.5,4.5L13.5,4.5M3.8,8.5L13.8,8.5M6.3,12.5L16.3,12.5M6.5,16.5L16.5,16.5';\nexport var manualTaskIcon = 'M0.5,3.751L4.583,0.5009999999999999C4.583,0.5009999999999999,15.749,0.5839999999999999,16.666,0.5839999999999999S14.249,3.5009999999999994,15.166,3.5009999999999994S26.833,3.5009999999999994,27.75,3.5009999999999994C28.916,5.209,27.582,6.667999999999999,26.916,7.167999999999999S27.791,9.084999999999999,25.916,11.584999999999999C25.166,11.834999999999999,26.666,13.459999999999999,24.583000000000002,14.918C23.416,15.501,25.166,16.46,23.333000000000002,17.750999999999998C22.166,17.750999999999998,2.5000000000000036,17.833999999999996,2.5000000000000036,17.833999999999996L0.5000000000000036,16.500999999999998V3.751ZM13.5,7L27,7M13.5,11L26,11M14,14.5L25,14.5M8.2,3.1L15,3.1';\nexport var style = {\n    throw: 'fill: rgb(34, 36, 42); stroke-linecap: round; stroke-linejoin: round; stroke: white; stroke-width: 1px;',\n    catch: 'fill: white; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;',\n    nonIntermediate: 'stroke-width: 1.5; stroke-dash-array: 6',\n    intermediate: 'stroke-width: 1.5',\n};\n// marker\nexport var parallelMarker = 'm44,60 m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10';\nexport var sequentialMarker = 'm47,61 m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0';\nexport var loopMarker = 'm 50,73 c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902';\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { jsx as _jsx } from \"preact/jsx-runtime\";\nimport { Component, ModelType, Rect, LogicFlowUtil, } from '@logicflow/core';\nvar StepDrag = LogicFlowUtil.StepDrag;\nvar Control = /** @class */ (function (_super) {\n    __extends(Control, _super);\n    function Control(props) {\n        var _this = _super.call(this) || this;\n        // \n        _this.updatePosition = function (_a) {\n            var deltaX = _a.deltaX, deltaY = _a.deltaY;\n            var _b = _this.nodeModel, x = _b.x, y = _b.y;\n            _this.nodeModel.x = x + deltaX / 2;\n            _this.nodeModel.y = y + deltaY / 2;\n            _this.nodeModel.moveText(deltaX / 2, deltaY / 2);\n        };\n        // control\n        _this.getResize = function (_a) {\n            var index = _a.index, deltaX = _a.deltaX, deltaY = _a.deltaY, width = _a.width, height = _a.height, PCTResizeInfo = _a.PCTResizeInfo, _b = _a.pct, pct = _b === void 0 ? 1 : _b, _c = _a.freezeWidth, freezeWidth = _c === void 0 ? false : _c, _d = _a.freezeHeight, freezeHeight = _d === void 0 ? false : _d;\n            // TODO:  getResize \n            var resize = {\n                width: width,\n                height: height,\n                deltaX: deltaX,\n                deltaY: deltaY,\n            };\n            if (PCTResizeInfo) {\n                var sensitivity = 4; // \n                var deltaScale = 0;\n                var combineDelta = 0;\n                switch (index) {\n                    case 0:\n                        combineDelta = (deltaX * -1 - deltaY) / sensitivity;\n                        break;\n                    case 1:\n                        combineDelta = (deltaX - deltaY) / sensitivity;\n                        break;\n                    case 2:\n                        combineDelta = (deltaX + deltaY) / sensitivity;\n                        break;\n                    case 3:\n                        combineDelta = (deltaX * -1 + deltaY) / sensitivity;\n                        break;\n                    default:\n                        break;\n                }\n                if (combineDelta !== 0) {\n                    deltaScale =\n                        Math.round((combineDelta / PCTResizeInfo.ResizeBasis.basisHeight) * 100000) / 1000;\n                }\n                PCTResizeInfo.ResizePCT.widthPCT = Math.max(Math.min(PCTResizeInfo.ResizePCT.widthPCT + deltaScale, PCTResizeInfo.ScaleLimit.maxScaleLimit), PCTResizeInfo.ScaleLimit.minScaleLimit);\n                PCTResizeInfo.ResizePCT.heightPCT = Math.max(Math.min(PCTResizeInfo.ResizePCT.heightPCT + deltaScale, PCTResizeInfo.ScaleLimit.maxScaleLimit), PCTResizeInfo.ScaleLimit.minScaleLimit);\n                var spcWidth = Math.round((PCTResizeInfo.ResizePCT.widthPCT *\n                    PCTResizeInfo.ResizeBasis.basisWidth) /\n                    100);\n                var spcHeight = Math.round((PCTResizeInfo.ResizePCT.heightPCT *\n                    PCTResizeInfo.ResizeBasis.basisHeight) /\n                    100);\n                switch (index) {\n                    case 0:\n                        deltaX = width - spcWidth;\n                        deltaY = height - spcHeight;\n                        break;\n                    case 1:\n                        deltaX = spcWidth - width;\n                        deltaY = height - spcHeight;\n                        break;\n                    case 2:\n                        deltaX = spcWidth - width;\n                        deltaY = spcHeight - height;\n                        break;\n                    case 3:\n                        deltaX = width - spcWidth;\n                        deltaY = spcHeight - height;\n                        break;\n                    default:\n                        break;\n                }\n                resize.width = spcWidth;\n                resize.height = spcHeight;\n                resize.deltaX = deltaX / pct;\n                resize.deltaY = deltaY / pct;\n                return resize;\n            }\n            // /width/height\n            switch (index) {\n                case 0:\n                    resize.width = freezeWidth ? width : width - deltaX * pct;\n                    resize.height = freezeHeight ? height : height - deltaY * pct;\n                    break;\n                case 1:\n                    resize.width = freezeWidth ? width : width + deltaX * pct;\n                    resize.height = freezeHeight ? height : height - deltaY * pct;\n                    break;\n                case 2:\n                    resize.width = freezeWidth ? width : width + deltaX * pct;\n                    resize.height = freezeHeight ? height : height + deltaY * pct;\n                    break;\n                case 3:\n                    resize.width = freezeWidth ? width : width - deltaX * pct;\n                    resize.height = freezeHeight ? height : height + deltaY * pct;\n                    break;\n                default:\n                    break;\n            }\n            return resize;\n        };\n        _this.updateEdgePointByAnchors = function () {\n            // https://github.com/didi/LogicFlow/issues/807\n            // https://github.com/didi/LogicFlow/issues/875\n            // RectgetRectResizeEdgePoint()point\n            // getRectResizeEdgePoint()4\n            // \n            // const pct = (y - beforeNode.y) / (beforeNode.height / 2 - radius)\n            // afterPoint.y = afterNode.y + (afterNode.height / 2 - radius) * pct\n            // getDefaultAnchor()\n            //  x: x + 20x20\n            // \n            var _a = _this.nodeModel, id = _a.id, anchors = _a.anchors;\n            var edges = _this.getNodeEdges(id);\n            // \n            edges.sourceEdges.forEach(function (item) {\n                var anchorItem = anchors.find(function (anchor) { return anchor.id === item.sourceAnchorId; });\n                if (anchorItem) {\n                    item.updateStartPoint({\n                        x: anchorItem.x,\n                        y: anchorItem.y,\n                    });\n                }\n            });\n            edges.targetEdges.forEach(function (item) {\n                var anchorItem = anchors.find(function (anchor) { return anchor.id === item.targetAnchorId; });\n                if (anchorItem) {\n                    item.updateEndPoint({\n                        x: anchorItem.x,\n                        y: anchorItem.y,\n                    });\n                }\n            });\n        };\n        // \n        _this.updateRect = function (_a) {\n            var deltaX = _a.deltaX, deltaY = _a.deltaY;\n            var _b = _this\n                .nodeModel, x = _b.x, y = _b.y, width = _b.width, height = _b.height, radius = _b.radius, PCTResizeInfo = _b.PCTResizeInfo;\n            var _c = _this\n                .nodeModel, minWidth = _c.minWidth, minHeight = _c.minHeight, maxWidth = _c.maxWidth, maxHeight = _c.maxHeight;\n            // \n            var index = _this.index;\n            var freezeWidth = minWidth === maxWidth;\n            var freezeHeight = minHeight === maxHeight;\n            var size = _this.getResize({\n                index: index,\n                deltaX: deltaX,\n                deltaY: deltaY,\n                width: width,\n                height: height,\n                PCTResizeInfo: PCTResizeInfo,\n                pct: 1,\n                freezeWidth: freezeWidth,\n                freezeHeight: freezeHeight,\n            });\n            // \n            if (size.width < minWidth ||\n                size.width > maxWidth ||\n                size.height < minHeight ||\n                size.height > maxHeight) {\n                // \n                _this.dragHandler.cancelDrag();\n                return;\n            }\n            // /x/y\n            _this.updatePosition({\n                deltaX: freezeWidth ? 0 : size.deltaX,\n                deltaY: freezeHeight ? 0 : size.deltaY,\n            });\n            // \n            _this.nodeModel.width = size.width;\n            _this.nodeModel.height = size.height;\n            _this.nodeModel.setProperties({\n                nodeSize: {\n                    width: size.width,\n                    height: size.height,\n                },\n            });\n            // const edges = this.getNodeEdges(id)\n            var beforeNode = {\n                x: x,\n                y: y,\n                width: width,\n                height: height,\n                radius: radius,\n            };\n            var afterNode = {\n                x: _this.nodeModel.x,\n                y: _this.nodeModel.y,\n                width: _this.nodeModel.width,\n                height: _this.nodeModel.height,\n                radius: radius,\n            };\n            // \n            _this.updateEdgePointByAnchors();\n            _this.eventEmit({\n                deltaX: deltaX,\n                deltaY: deltaY,\n                beforeNode: beforeNode,\n                afterNode: afterNode,\n            });\n        };\n        // \n        _this.updateEllipse = function (_a) {\n            var deltaX = _a.deltaX, deltaY = _a.deltaY;\n            var _b = _this.nodeModel, rx = _b.rx, ry = _b.ry, x = _b.x, y = _b.y, PCTResizeInfo = _b.PCTResizeInfo;\n            var index = _this.index;\n            var _c = _this\n                .nodeModel, minWidth = _c.minWidth, minHeight = _c.minHeight, maxWidth = _c.maxWidth, maxHeight = _c.maxHeight;\n            var freezeWidth = minWidth === maxWidth;\n            var freezeHeight = minHeight === maxHeight;\n            var width = rx;\n            var height = ry;\n            var size = _this.getResize({\n                index: index,\n                deltaX: deltaX,\n                deltaY: deltaY,\n                width: width,\n                height: height,\n                PCTResizeInfo: PCTResizeInfo,\n                pct: 1 / 2,\n                freezeWidth: freezeWidth,\n                freezeHeight: freezeHeight,\n            });\n            // \n            if (size.width < minWidth / 2 ||\n                size.width > maxWidth / 2 ||\n                size.height < minHeight / 2 ||\n                size.height > maxHeight / 2) {\n                _this.dragHandler.cancelDrag();\n                return;\n            }\n            // \n            // /x/y\n            _this.updatePosition({\n                deltaX: freezeWidth ? 0 : size.deltaX,\n                deltaY: freezeHeight ? 0 : size.deltaY,\n            });\n            // rx ry,\n            // @ts-ignore\n            _this.nodeModel.rx = size.width;\n            // @ts-ignore\n            _this.nodeModel.ry = size.height;\n            _this.nodeModel.setProperties({\n                nodeSize: {\n                    rx: size.width,\n                    ry: size.height,\n                },\n            });\n            var beforeNode = {\n                x: x,\n                y: y,\n            };\n            var afterNode = {\n                rx: size.width,\n                ry: size.height,\n                x: _this.nodeModel.x,\n                y: _this.nodeModel.y,\n            };\n            // \n            _this.updateEdgePointByAnchors();\n            _this.eventEmit({\n                deltaX: deltaX,\n                deltaY: deltaY,\n                beforeNode: __assign(__assign({}, beforeNode), { rx: rx, ry: ry }),\n                afterNode: afterNode,\n            });\n        };\n        // \n        _this.updateDiamond = function (_a) {\n            var deltaX = _a.deltaX, deltaY = _a.deltaY;\n            var _b = _this.nodeModel, rx = _b.rx, ry = _b.ry, x = _b.x, y = _b.y, PCTResizeInfo = _b.PCTResizeInfo;\n            var index = _this.index;\n            var _c = _this\n                .nodeModel, minWidth = _c.minWidth, minHeight = _c.minHeight, maxWidth = _c.maxWidth, maxHeight = _c.maxHeight;\n            var freezeWidth = minWidth === maxWidth;\n            var freezeHeight = minHeight === maxHeight;\n            var width = rx;\n            var height = ry;\n            var size = _this.getResize({\n                index: index,\n                deltaX: deltaX,\n                deltaY: deltaY,\n                width: width,\n                height: height,\n                PCTResizeInfo: PCTResizeInfo,\n                pct: 1 / 2,\n                freezeWidth: freezeWidth,\n                freezeHeight: freezeHeight,\n            });\n            // \n            if (size.width < minWidth / 2 ||\n                size.width > maxWidth / 2 ||\n                size.height < minHeight / 2 ||\n                size.height > maxHeight / 2) {\n                _this.dragHandler.cancelDrag();\n                return;\n            }\n            // \n            // /x/y\n            _this.updatePosition({\n                deltaX: freezeWidth ? 0 : size.deltaX,\n                deltaY: freezeHeight ? 0 : size.deltaY,\n            });\n            // rx ry,\n            // @ts-ignore\n            _this.nodeModel.rx = size.width;\n            // @ts-ignore\n            _this.nodeModel.ry = size.height;\n            _this.nodeModel.setProperties({\n                nodeSize: {\n                    rx: size.width,\n                    ry: size.height,\n                },\n            });\n            var beforeNode = {\n                x: x,\n                y: y,\n                rx: rx,\n                ry: ry,\n            };\n            var afterNode = {\n                rx: size.width,\n                ry: size.height,\n                x: _this.nodeModel.x,\n                y: _this.nodeModel.y,\n            };\n            // \n            _this.updateEdgePointByAnchors();\n            _this.eventEmit({\n                deltaX: deltaX,\n                deltaY: deltaY,\n                beforeNode: beforeNode,\n                afterNode: afterNode,\n            });\n        };\n        _this.eventEmit = function (_a) {\n            var deltaX = _a.deltaX, deltaY = _a.deltaY, beforeNode = _a.beforeNode, afterNode = _a.afterNode;\n            var _b = _this.nodeModel, id = _b.id, modelType = _b.modelType, type = _b.type;\n            var oldNodeSize = __assign({ id: id, modelType: modelType, type: type }, beforeNode);\n            var newNodeSize = __assign({ id: id, modelType: modelType, type: type }, afterNode);\n            _this.graphModel.eventCenter.emit('node:resize', {\n                preData: oldNodeSize,\n                data: newNodeSize,\n                deltaX: deltaX,\n                deltaY: deltaY,\n                index: _this.index,\n                model: _this.nodeModel,\n            });\n        };\n        _this.onDragging = function (_a) {\n            var _b;\n            var deltaX = _a.deltaX, deltaY = _a.deltaY;\n            var transformModel = _this.graphModel.transformModel;\n            var modelType = _this.nodeModel.modelType;\n            _b = __read(transformModel.fixDeltaXY(deltaX, deltaY), 2), deltaX = _b[0], deltaY = _b[1];\n            // html\n            if (modelType === ModelType.RECT_NODE ||\n                modelType === ModelType.HTML_NODE) {\n                _this.updateRect({\n                    deltaX: deltaX,\n                    deltaY: deltaY,\n                });\n                // this.nodeModel.resize(deltaX, deltaY);\n            }\n            else if (modelType === ModelType.ELLIPSE_NODE) {\n                _this.updateEllipse({\n                    deltaX: deltaX,\n                    deltaY: deltaY,\n                });\n            }\n            else if (modelType === ModelType.DIAMOND_NODE) {\n                _this.updateDiamond({\n                    deltaX: deltaX,\n                    deltaY: deltaY,\n                });\n            }\n        };\n        /**\n         * grid.\n         */\n        _this.onDragEnd = function () {\n            var _a = _this.graphModel.gridSize, gridSize = _a === void 0 ? 1 : _a;\n            var x = gridSize * Math.round(_this.nodeModel.x / gridSize);\n            var y = gridSize * Math.round(_this.nodeModel.y / gridSize);\n            _this.nodeModel.moveTo(x, y);\n            // onDragging()->->getDefaultAnchor()onDragging()anchors\n            // Pointanchors\n            _this.updateEdgePointByAnchors();\n        };\n        _this.index = props.index;\n        _this.nodeModel = props.model;\n        _this.graphModel = props.graphModel;\n        // stepgrid\n        // 2\n        // let step = 2;\n        // if (gridSize > 1) {\n        //   step = 2 * gridSize;\n        // }\n        // if (this.nodeModel.gridSize) {\n        //   step = 2 * this.nodeModel.gridSize;\n        // }\n        _this.dragHandler = new StepDrag({\n            onDragging: _this.onDragging,\n            onDragEnd: _this.onDragEnd,\n            step: 1,\n        });\n        return _this;\n    }\n    Control.prototype.getNodeEdges = function (nodeId) {\n        var graphModel = this.graphModel;\n        var edges = graphModel.edges;\n        var sourceEdges = [];\n        var targetEdges = [];\n        for (var i = 0; i < edges.length; i++) {\n            var edgeModel = edges[i];\n            if (edgeModel.sourceNodeId === nodeId) {\n                sourceEdges.push(edgeModel);\n            }\n            else if (edges[i].targetNodeId === nodeId) {\n                targetEdges.push(edgeModel);\n            }\n        }\n        return {\n            sourceEdges: sourceEdges,\n            targetEdges: targetEdges,\n        };\n    };\n    Control.prototype.render = function () {\n        var _a = this.props, x = _a.x, y = _a.y, index = _a.index, model = _a.model;\n        var style = model.getControlPointStyle();\n        return (_jsx(\"g\", { className: \"lf-resize-control-\".concat(index), children: _jsx(Rect, __assign({ className: \"lf-node-control\", x: x, y: y }, style, { onMouseDown: this.dragHandler.handleMouseDown })) }));\n    };\n    return Control;\n}(Component));\nexport default Control;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { Component, Rect } from '@logicflow/core';\nimport Control from './Control';\nvar ControlGroup = /** @class */ (function (_super) {\n    __extends(ControlGroup, _super);\n    function ControlGroup() {\n        var _this = _super.call(this) || this;\n        _this.state = {};\n        return _this;\n    }\n    ControlGroup.prototype.getResizeControl = function () {\n        var _a = this.props, model = _a.model, graphModel = _a.graphModel;\n        var x = model.x, y = model.y, width = model.width, height = model.height;\n        var box = {\n            minX: x - width / 2,\n            minY: y - height / 2,\n            maxX: x + width / 2,\n            maxY: y + height / 2,\n        };\n        var minX = box.minX, minY = box.minY, maxX = box.maxX, maxY = box.maxY;\n        var controlList = [\n            // \n            {\n                x: minX,\n                y: minY,\n            },\n            // \n            {\n                x: maxX,\n                y: minY,\n            },\n            // \n            {\n                x: maxX,\n                y: maxY,\n            },\n            // \n            {\n                x: minX,\n                y: maxY,\n            },\n        ];\n        return controlList.map(function (control, index) { return (_jsx(Control, __assign({ index: index }, control, { model: model, graphModel: graphModel }))); });\n    };\n    // outline, \n    ControlGroup.prototype.getGroupSolid = function () {\n        var model = this.props.model;\n        var x = model.x, y = model.y, width = model.width, height = model.height;\n        var style = model.getResizeOutlineStyle();\n        return _jsx(Rect, __assign({}, style, { x: x, y: y, width: width, height: height }));\n    };\n    ControlGroup.prototype.render = function () {\n        return (_jsxs(\"g\", { className: \"lf-resize-control\", children: [this.getGroupSolid(), this.getResizeControl()] }));\n    };\n    return ControlGroup;\n}(Component));\nexport default ControlGroup;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { EllipseNode, EllipseNodeModel, } from '@logicflow/core';\nimport ControlGroup from '../control/ControlGroup';\nvar EllipseResizeModel = /** @class */ (function (_super) {\n    __extends(EllipseResizeModel, _super);\n    function EllipseResizeModel(data, graphModel) {\n        var _this = _super.call(this, data, graphModel) || this;\n        var nodeSize = data.properties.nodeSize;\n        if (nodeSize) {\n            _this.rx = nodeSize.rx;\n            _this.ry = nodeSize.ry;\n        }\n        return _this;\n    }\n    EllipseResizeModel.prototype.initNodeData = function (data) {\n        _super.prototype.initNodeData.call(this, data);\n        this.minWidth = 30;\n        this.minHeight = 30;\n        this.maxWidth = 2000;\n        this.maxHeight = 2000;\n    };\n    EllipseResizeModel.prototype.getOutlineStyle = function () {\n        var style = _super.prototype.getOutlineStyle.call(this);\n        var isSilentMode = this.graphModel.editConfigModel.isSilentMode;\n        if (isSilentMode)\n            return style;\n        style.stroke = 'none';\n        if (style.hover) {\n            style.hover.stroke = 'none';\n        }\n        return style;\n    };\n    EllipseResizeModel.prototype.getResizeOutlineStyle = function () {\n        return {\n            fill: 'none',\n            stroke: 'transparent',\n            strokeWidth: 1,\n            strokeDasharray: '3,3',\n        };\n    };\n    EllipseResizeModel.prototype.getControlPointStyle = function () {\n        return {\n            width: 7,\n            height: 7,\n            fill: '#FFFFFF',\n            stroke: '#000000',\n        };\n    };\n    //  initNodeData() \n    EllipseResizeModel.prototype.enableProportionResize = function (turnOn) {\n        if (turnOn === void 0) { turnOn = true; }\n        if (turnOn) {\n            var ResizePCT = {\n                widthPCT: 100,\n                heightPCT: 100,\n            };\n            var ResizeBasis = {\n                basisWidth: this.rx,\n                basisHeight: this.ry,\n            };\n            var ScaleLimit = {\n                maxScaleLimit: Math.min((this.maxWidth / (this.rx * 2)) * 100, (this.maxHeight / (this.ry * 2)) * 100),\n                minScaleLimit: Math.max((this.minWidth / (this.rx * 2)) * 100, (this.minHeight / (this.ry * 2)) * 100),\n            };\n            this.PCTResizeInfo = {\n                ResizePCT: ResizePCT,\n                ResizeBasis: ResizeBasis,\n                ScaleLimit: ScaleLimit,\n            };\n        }\n        else {\n            delete this.PCTResizeInfo;\n        }\n    };\n    return EllipseResizeModel;\n}(EllipseNodeModel));\nexport { EllipseResizeModel };\nvar EllipseResizeView = /** @class */ (function (_super) {\n    __extends(EllipseResizeView, _super);\n    function EllipseResizeView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EllipseResizeView.prototype.getControlGroup = function () {\n        var _a = this.props, model = _a.model, graphModel = _a.graphModel;\n        return _jsx(ControlGroup, { model: model, graphModel: graphModel });\n    };\n    // getResizeShapegetShape\n    EllipseResizeView.prototype.getResizeShape = function () {\n        return _super.prototype.getShape.call(this);\n    };\n    EllipseResizeView.prototype.getShape = function () {\n        var _a = this.props, model = _a.model, isSilentMode = _a.graphModel.editConfigModel.isSilentMode;\n        return (_jsxs(\"g\", { children: [this.getResizeShape(), model.isSelected && !isSilentMode ? this.getControlGroup() : ''] }));\n    };\n    return EllipseResizeView;\n}(EllipseNode));\nexport { EllipseResizeView };\nexport var EllipseResize = {\n    type: 'ellipse',\n    view: EllipseResizeView,\n    model: EllipseResizeModel,\n};\nexport default EllipseResize;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { Polygon, DiamondNode, DiamondNodeModel, } from '@logicflow/core';\nimport ControlGroup from '../control/ControlGroup';\nvar DiamondResizeModel = /** @class */ (function (_super) {\n    __extends(DiamondResizeModel, _super);\n    function DiamondResizeModel(data, graphModel) {\n        var _this = _super.call(this, data, graphModel) || this;\n        var nodeSize = data.properties.nodeSize;\n        if (nodeSize) {\n            _this.rx = nodeSize.rx;\n            _this.ry = nodeSize.ry;\n        }\n        return _this;\n    }\n    DiamondResizeModel.prototype.initNodeData = function (data) {\n        _super.prototype.initNodeData.call(this, data);\n        this.minWidth = 30;\n        this.minHeight = 30;\n        this.maxWidth = 2000;\n        this.maxHeight = 2000;\n        this.gridSize = 1;\n    };\n    DiamondResizeModel.prototype.getOutlineStyle = function () {\n        var style = _super.prototype.getOutlineStyle.call(this);\n        var isSilentMode = this.graphModel.editConfigModel.isSilentMode;\n        if (isSilentMode)\n            return style;\n        style.stroke = 'none';\n        if (style.hover) {\n            style.hover.stroke = 'none';\n        }\n        return style;\n    };\n    DiamondResizeModel.prototype.getResizeOutlineStyle = function () {\n        return {\n            fill: 'none',\n            stroke: 'transparent',\n            strokeWidth: 1,\n            strokeDasharray: '3,3',\n        };\n    };\n    DiamondResizeModel.prototype.getControlPointStyle = function () {\n        return {\n            width: 7,\n            height: 7,\n            fill: '#FFFFFF',\n            stroke: '#000000',\n        };\n    };\n    //  initNodeData() \n    DiamondResizeModel.prototype.enableProportionResize = function (turnOn) {\n        if (turnOn === void 0) { turnOn = true; }\n        if (turnOn) {\n            var ResizePCT = {\n                widthPCT: 100,\n                heightPCT: 100,\n            };\n            var ResizeBasis = {\n                basisWidth: this.rx,\n                basisHeight: this.ry,\n            };\n            var ScaleLimit = {\n                maxScaleLimit: Math.min((this.maxWidth / (this.rx * 2)) * 100, (this.maxHeight / (this.ry * 2)) * 100),\n                minScaleLimit: Math.max((this.minWidth / (this.rx * 2)) * 100, (this.minHeight / (this.ry * 2)) * 100),\n            };\n            this.PCTResizeInfo = {\n                ResizePCT: ResizePCT,\n                ResizeBasis: ResizeBasis,\n                ScaleLimit: ScaleLimit,\n            };\n        }\n        else {\n            delete this.PCTResizeInfo;\n        }\n    };\n    return DiamondResizeModel;\n}(DiamondNodeModel));\nexport { DiamondResizeModel };\nvar DiamondResizeView = /** @class */ (function (_super) {\n    __extends(DiamondResizeView, _super);\n    function DiamondResizeView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    DiamondResizeView.prototype.getControlGroup = function () {\n        var _a = this.props, model = _a.model, graphModel = _a.graphModel;\n        return _jsx(ControlGroup, { model: model, graphModel: graphModel });\n    };\n    // getResizeShapegetShape\n    DiamondResizeView.prototype.getResizeShape = function () {\n        var model = this.props.model;\n        var points = model.points;\n        var style = model.getNodeStyle();\n        return (_jsx(\"g\", { children: _jsx(Polygon, __assign({}, style, { points: points })) }));\n    };\n    DiamondResizeView.prototype.getShape = function () {\n        var _a = this.props, isSelected = _a.model.isSelected, isSilentMode = _a.graphModel.editConfigModel.isSilentMode;\n        return (_jsxs(\"g\", { children: [this.getResizeShape(), isSelected && !isSilentMode ? this.getControlGroup() : ''] }));\n    };\n    return DiamondResizeView;\n}(DiamondNode));\nexport { DiamondResizeView };\nexport var DiamondResize = {\n    type: 'diamond',\n    view: DiamondResizeView,\n    model: DiamondResizeModel,\n};\nexport default DiamondResize;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { HtmlNode, HtmlNodeModel } from '@logicflow/core';\nimport ControlGroup from '../control/ControlGroup';\nvar HtmlResizeModel = /** @class */ (function (_super) {\n    __extends(HtmlResizeModel, _super);\n    function HtmlResizeModel(data, graphModel) {\n        var _this = _super.call(this, data, graphModel) || this;\n        var nodeSize = data.properties.nodeSize;\n        if (nodeSize) {\n            _this.width = nodeSize.width;\n            _this.height = nodeSize.height;\n        }\n        return _this;\n    }\n    HtmlResizeModel.prototype.initNodeData = function (data) {\n        _super.prototype.initNodeData.call(this, data);\n        this.minWidth = 30;\n        this.minHeight = 30;\n        this.maxWidth = 2000;\n        this.maxHeight = 2000;\n    };\n    HtmlResizeModel.prototype.getOutlineStyle = function () {\n        var style = _super.prototype.getOutlineStyle.call(this);\n        var isSilentMode = this.graphModel.editConfigModel.isSilentMode;\n        if (isSilentMode)\n            return style;\n        style.stroke = 'none';\n        if (style.hover) {\n            style.hover.stroke = 'none';\n        }\n        return style;\n    };\n    HtmlResizeModel.prototype.getResizeOutlineStyle = function () {\n        return {\n            fill: 'none',\n            stroke: 'transparent',\n            strokeWidth: 1,\n            strokeDasharray: '3,3',\n        };\n    };\n    HtmlResizeModel.prototype.getControlPointStyle = function () {\n        return {\n            width: 7,\n            height: 7,\n            fill: '#FFFFFF',\n            stroke: '#000000',\n        };\n    };\n    //  initNodeData() \n    HtmlResizeModel.prototype.enableProportionResize = function (turnOn) {\n        if (turnOn === void 0) { turnOn = true; }\n        if (turnOn) {\n            var ResizePCT = {\n                widthPCT: 100,\n                heightPCT: 100,\n            };\n            var ResizeBasis = {\n                basisWidth: this.width,\n                basisHeight: this.height,\n            };\n            var ScaleLimit = {\n                maxScaleLimit: Math.min((this.maxWidth / this.width) * 100, (this.maxHeight / this.height) * 100),\n                minScaleLimit: Math.max((this.minWidth / this.width) * 100, (this.minHeight / this.height) * 100),\n            };\n            this.PCTResizeInfo = {\n                ResizePCT: ResizePCT,\n                ResizeBasis: ResizeBasis,\n                ScaleLimit: ScaleLimit,\n            };\n        }\n        else {\n            delete this.PCTResizeInfo;\n        }\n    };\n    return HtmlResizeModel;\n}(HtmlNodeModel));\nexport { HtmlResizeModel };\nvar HtmlResizeView = /** @class */ (function (_super) {\n    __extends(HtmlResizeView, _super);\n    function HtmlResizeView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    HtmlResizeView.prototype.getControlGroup = function () {\n        var _a = this.props, model = _a.model, graphModel = _a.graphModel;\n        return _jsx(ControlGroup, { model: model, graphModel: graphModel });\n    };\n    // getResizeShapegetShape\n    HtmlResizeView.prototype.getResizeShape = function () {\n        return _super.prototype.getShape.call(this);\n    };\n    HtmlResizeView.prototype.getShape = function () {\n        var _a = this.props, isSelected = _a.model.isSelected, isSilentMode = _a.graphModel.editConfigModel.isSilentMode;\n        return (_jsxs(\"g\", { children: [this.getResizeShape(), isSelected && !isSilentMode ? this.getControlGroup() : ''] }));\n    };\n    return HtmlResizeView;\n}(HtmlNode));\nexport { HtmlResizeView };\nexport var HtmlResize = {\n    type: 'html',\n    view: HtmlResizeView,\n    model: HtmlResizeModel,\n};\nexport default HtmlResize;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { RectNode, RectNodeModel, } from '@logicflow/core';\nimport ControlGroup from '../control/ControlGroup';\nvar RectResizeModel = /** @class */ (function (_super) {\n    __extends(RectResizeModel, _super);\n    function RectResizeModel(data, graphModel) {\n        var _this = _super.call(this, data, graphModel) || this;\n        var nodeSize = data.properties.nodeSize;\n        if (nodeSize) {\n            _this.width = nodeSize.width;\n            _this.height = nodeSize.height;\n        }\n        return _this;\n    }\n    RectResizeModel.prototype.initNodeData = function (data) {\n        _super.prototype.initNodeData.call(this, data);\n        this.minWidth = 30;\n        this.minHeight = 30;\n        this.maxWidth = 2000;\n        this.maxHeight = 2000;\n    };\n    RectResizeModel.prototype.getOutlineStyle = function () {\n        var style = _super.prototype.getOutlineStyle.call(this);\n        var isSilentMode = this.graphModel.editConfigModel.isSilentMode;\n        if (isSilentMode)\n            return style;\n        style.stroke = 'none';\n        if (style.hover) {\n            style.hover.stroke = 'none';\n        }\n        return style;\n    };\n    RectResizeModel.prototype.getResizeOutlineStyle = function () {\n        return {\n            fill: 'none',\n            stroke: 'transparent', // \n            strokeWidth: 1,\n            strokeDasharray: '3,3',\n        };\n    };\n    RectResizeModel.prototype.getControlPointStyle = function () {\n        return {\n            width: 7,\n            height: 7,\n            fill: '#FFFFFF',\n            stroke: '#000000',\n        };\n    };\n    //  initNodeData() \n    RectResizeModel.prototype.enableProportionResize = function (turnOn) {\n        if (turnOn === void 0) { turnOn = true; }\n        if (turnOn) {\n            var ResizePCT = {\n                widthPCT: 100,\n                heightPCT: 100,\n            };\n            var ResizeBasis = {\n                basisWidth: this.width,\n                basisHeight: this.height,\n            };\n            var ScaleLimit = {\n                maxScaleLimit: Math.min((this.maxWidth / this.width) * 100, (this.maxHeight / this.height) * 100),\n                minScaleLimit: Math.max((this.minWidth / this.width) * 100, (this.minHeight / this.height) * 100),\n            };\n            this.PCTResizeInfo = {\n                ResizePCT: ResizePCT,\n                ResizeBasis: ResizeBasis,\n                ScaleLimit: ScaleLimit,\n            };\n        }\n        else {\n            delete this.PCTResizeInfo;\n        }\n    };\n    return RectResizeModel;\n}(RectNodeModel));\nexport { RectResizeModel };\nvar RectResizeView = /** @class */ (function (_super) {\n    __extends(RectResizeView, _super);\n    function RectResizeView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    RectResizeView.prototype.getControlGroup = function () {\n        var _a = this.props, model = _a.model, graphModel = _a.graphModel;\n        return _jsx(ControlGroup, { model: model, graphModel: graphModel });\n    };\n    // getResizeShapegetShape\n    RectResizeView.prototype.getResizeShape = function () {\n        return _super.prototype.getShape.call(this);\n    };\n    RectResizeView.prototype.getShape = function () {\n        var _a = this.props, isSelected = _a.model.isSelected, isSilentMode = _a.graphModel.editConfigModel.isSilentMode;\n        return (_jsxs(\"g\", { children: [this.getResizeShape(), isSelected && !isSilentMode ? this.getControlGroup() : ''] }));\n    };\n    return RectResizeView;\n}(RectNode));\nexport { RectResizeView };\nexport var RectResize = {\n    type: 'rect',\n    view: RectResizeView,\n    model: RectResizeModel,\n};\nexport default RectResize;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { h } from '@logicflow/core';\nimport { isArray } from 'lodash-es';\nimport { RectResizeModel, RectResizeView } from '../../NodeResize';\nvar defaultWidth = 500;\nvar defaultHeight = 300;\nvar DEFAULT_BOTTOM_Z_INDEX = -10000;\nvar GroupNodeModel = /** @class */ (function (_super) {\n    __extends(GroupNodeModel, _super);\n    function GroupNodeModel() {\n        var _this = _super.apply(this, __spreadArray([], __read(arguments), false)) || this;\n        _this.isGroup = true;\n        /**\n         * \n         */\n        _this.isFolded = false;\n        _this.unfoldedWidth = defaultWidth;\n        _this.unfoldedHeight = defaultHeight;\n        /**\n         * children\n         */\n        _this.childrenLastFoldStatus = {};\n        return _this;\n    }\n    GroupNodeModel.prototype.initNodeData = function (data) {\n        var _this = this;\n        _super.prototype.initNodeData.call(this, data);\n        var children = [];\n        if (isArray(data.children)) {\n            children = data.children;\n        }\n        // \n        this.children = new Set(children);\n        this.width = defaultWidth;\n        this.height = defaultHeight;\n        this.foldedWidth = 80;\n        this.foldedHeight = 60;\n        this.zIndex = DEFAULT_BOTTOM_Z_INDEX;\n        this.radius = 0;\n        this.text.editable = false;\n        this.text.draggable = false;\n        this.isRestrict = false;\n        this.resizable = false;\n        this.autoToFront = false;\n        this.foldable = false;\n        if (this.properties.isFolded === undefined) {\n            this.properties.isFolded = false;\n        }\n        this.isFolded = !!this.properties.isFolded;\n        // fixme: \n        // history\n        setTimeout(function () {\n            _this.isFolded && _this.foldGroup(_this.isFolded);\n        });\n        // this.foldGroup(this.isFolded);\n    };\n    GroupNodeModel.prototype.getResizeOutlineStyle = function () {\n        var style = _super.prototype.getResizeOutlineStyle.call(this);\n        style.stroke = 'none';\n        return style;\n    };\n    /**\n     * \n     * 1. \n     * 2. \n     * 3. \n     */\n    GroupNodeModel.prototype.foldGroup = function (isFolded) {\n        var _this = this;\n        if (isFolded === this.isFolded) {\n            // \n            // this.isFolded=falsefoldGroup(false)childrenLastFoldStatus\n            return;\n        }\n        this.setProperty('isFolded', isFolded);\n        this.isFolded = isFolded;\n        // step 1\n        if (isFolded) {\n            this.x = this.x - this.width / 2 + this.foldedWidth / 2;\n            this.y = this.y - this.height / 2 + this.foldedHeight / 2;\n            this.unfoldedWidth = this.width;\n            this.unfoldedHeight = this.height;\n            this.width = this.foldedWidth;\n            this.height = this.foldedHeight;\n        }\n        else {\n            this.width = this.unfoldedWidth;\n            this.height = this.unfoldedHeight;\n            this.x = this.x + this.width / 2 - this.foldedWidth / 2;\n            this.y = this.y + this.height / 2 - this.foldedHeight / 2;\n        }\n        // step 2\n        var allEdges = __spreadArray(__spreadArray([], __read(this.incoming.edges), false), __read(this.outgoing.edges), false);\n        this.children.forEach(function (elementId) {\n            var nodeModel = _this.graphModel.getElement(elementId);\n            if (nodeModel) {\n                var foldStatus = nodeModel.isFolded;\n                // FIX: https://github.com/didi/LogicFlow/issues/1007\n                if (nodeModel.isGroup && !nodeModel.isFolded) {\n                    // parentchildren\n                    // parentchildrennodeModel.isFolded=true\n                    // parentchildren,\n                    // nodeModel.isFolded=falseisFolded=truechildren\n                    ;\n                    nodeModel.foldGroup(isFolded);\n                }\n                if (nodeModel.isGroup && !isFolded) {\n                    // parentchildren\n                    var lastFoldStatus = _this.childrenLastFoldStatus[elementId];\n                    if (lastFoldStatus !== undefined &&\n                        lastFoldStatus !== nodeModel.isFolded) {\n                        // https://github.com/didi/LogicFlow/issues/1145\n                        // parentchildrennodeModel.isFolded=true\n                        // parentchildren\n                        ;\n                        nodeModel.foldGroup(lastFoldStatus);\n                    }\n                }\n                // parentchildren\n                _this.childrenLastFoldStatus[elementId] = !!foldStatus;\n                nodeModel.visible = !isFolded;\n                var incomingEdges = nodeModel.incoming.edges;\n                var outgoingEdges = nodeModel.outgoing.edges;\n                allEdges = __spreadArray(__spreadArray(__spreadArray([], __read(allEdges), false), __read(incomingEdges), false), __read(outgoingEdges), false);\n            }\n        });\n        // step 3\n        this.foldEdge(isFolded, allEdges);\n    };\n    GroupNodeModel.prototype.getAnchorStyle = function (anchorInfo) {\n        var style = _super.prototype.getAnchorStyle.call(this, anchorInfo);\n        style.stroke = 'transparent';\n        style.fill = 'transparent';\n        style.hover.fill = 'transparent'; // TODO: style.hover  undefined \n        style.hover.stroke = 'transparent';\n        return style;\n    };\n    /**\n     * \n     * \n     *   - \n     *   - \n     * MNM+N\n     * \n     *   - \n     *   - \n     *   - \n     * \n     *   - \n     *   - \n     *   - \n     */\n    GroupNodeModel.prototype.foldEdge = function (isFolded, allEdges) {\n        var _this = this;\n        allEdges.forEach(function (edgeModel, index) {\n            var id = edgeModel.id, sourceNodeId = edgeModel.sourceNodeId, targetNodeId = edgeModel.targetNodeId, startPoint = edgeModel.startPoint, endPoint = edgeModel.endPoint, type = edgeModel.type, text = edgeModel.text;\n            var properties = edgeModel.getProperties();\n            var data = {\n                id: \"\".concat(id, \"__\").concat(index),\n                sourceNodeId: sourceNodeId,\n                targetNodeId: targetNodeId,\n                startPoint: startPoint,\n                endPoint: endPoint,\n                type: type,\n                properties: properties,\n                text: text === null || text === void 0 ? void 0 : text.value,\n            };\n            if (edgeModel.virtual) {\n                _this.graphModel.deleteEdgeById(edgeModel.id);\n            }\n            var targetNodeIdGroup = _this.graphModel.group.getNodeGroup(targetNodeId);\n            // \n            if (!targetNodeIdGroup) {\n                targetNodeIdGroup = _this.graphModel.getNodeModelById(targetNodeId);\n            }\n            var sourceNodeIdGroup = _this.graphModel.group.getNodeGroup(sourceNodeId);\n            if (!sourceNodeIdGroup) {\n                sourceNodeIdGroup = _this.graphModel.getNodeModelById(sourceNodeId);\n            }\n            // \n            if (isFolded && edgeModel.visible !== false) {\n                // \n                // \n                // \n                if (_this.children.has(sourceNodeId) || _this.id === sourceNodeId) {\n                    data.startPoint = undefined;\n                    data.sourceNodeId = _this.id;\n                }\n                else {\n                    data.endPoint = undefined;\n                    data.targetNodeId = _this.id;\n                }\n                // \n                if (targetNodeIdGroup.id !== _this.id ||\n                    sourceNodeIdGroup.id !== _this.id) {\n                    _this.createVirtualEdge(data);\n                }\n                edgeModel.visible = false;\n            }\n            // \n            if (!isFolded && edgeModel.visible === false) {\n                // id\n                if (targetNodeIdGroup &&\n                    targetNodeIdGroup.isGroup &&\n                    targetNodeIdGroup.isFolded) {\n                    data.targetNodeId = targetNodeIdGroup.id;\n                    data.endPoint = undefined;\n                    _this.createVirtualEdge(data);\n                }\n                else if (sourceNodeIdGroup &&\n                    sourceNodeIdGroup.isGroup &&\n                    sourceNodeIdGroup.isFolded) {\n                    data.sourceNodeId = sourceNodeIdGroup.id;\n                    data.startPoint = undefined;\n                    _this.createVirtualEdge(data);\n                }\n                else {\n                    edgeModel.visible = true;\n                }\n            }\n        });\n    };\n    GroupNodeModel.prototype.createVirtualEdge = function (edgeData) {\n        edgeData.pointsList = undefined;\n        var model = this.graphModel.addEdge(edgeData);\n        model.virtual = true;\n        // group\n        // model.getData = () => null;\n        model.text.editable = false;\n        model.isFoldedEdge = true;\n    };\n    GroupNodeModel.prototype.isInRange = function (_a) {\n        var minX = _a.minX, minY = _a.minY, maxX = _a.maxX, maxY = _a.maxY;\n        return (minX >= this.x - this.width / 2 &&\n            maxX <= this.x + this.width / 2 &&\n            minY >= this.y - this.height / 2 &&\n            maxY <= this.y + this.height / 2);\n    };\n    GroupNodeModel.prototype.isAllowMoveTo = function (_a) {\n        var minX = _a.minX, minY = _a.minY, maxX = _a.maxX, maxY = _a.maxY;\n        return {\n            x: minX >= this.x - this.width / 2 && maxX <= this.x + this.width / 2,\n            y: minY >= this.y - this.height / 2 && maxY <= this.y + this.height / 2,\n        };\n    };\n    GroupNodeModel.prototype.setAllowAppendChild = function (isAllow) {\n        this.setProperty('groupAddable', isAllow);\n    };\n    /**\n     * \n     * @param id id\n     */\n    GroupNodeModel.prototype.addChild = function (id) {\n        this.children.add(id);\n        this.graphModel.eventCenter.emit('group:add-node', { data: this.getData() });\n    };\n    /**\n     * \n     * @param id id\n     */\n    GroupNodeModel.prototype.removeChild = function (id) {\n        this.children.delete(id);\n        this.graphModel.eventCenter.emit('group:remove-node', {\n            data: this.getData(),\n        });\n    };\n    GroupNodeModel.prototype.getAddableOutlineStyle = function () {\n        return {\n            stroke: '#FEB663',\n            strokeWidth: 2,\n            strokeDasharray: '4 4',\n            fill: 'transparent',\n        };\n    };\n    GroupNodeModel.prototype.getData = function () {\n        var _this = this;\n        var data = _super.prototype.getData.call(this);\n        data.children = [];\n        this.children.forEach(function (childId) {\n            var model = _this.graphModel.getNodeModelById(childId);\n            if (model && !model.virtual) {\n                ;\n                data.children.push(childId);\n            }\n        });\n        var properties = data.properties;\n        properties === null || properties === void 0 ? true : delete properties.groupAddable;\n        properties === null || properties === void 0 ? true : delete properties.isFolded;\n        return data;\n    };\n    GroupNodeModel.prototype.getHistoryData = function () {\n        var data = _super.prototype.getData.call(this);\n        data.children = __spreadArray([], __read(this.children), false);\n        data.isGroup = true;\n        var properties = data.properties;\n        properties === null || properties === void 0 ? true : delete properties.groupAddable;\n        if (properties === null || properties === void 0 ? void 0 : properties.isFolded) {\n            // \n            data.x = data.x + this.unfoldedWidth / 2 - this.foldedWidth / 2;\n            data.y = data.y + this.unfoldedHeight / 2 - this.foldedHeight / 2;\n        }\n        return data;\n    };\n    /**\n     * \n     */\n    GroupNodeModel.prototype.isAllowAppendIn = function (_nodeData) {\n        console.info('_nodeData', _nodeData);\n        return true;\n    };\n    /**\n     * groupAgroupBgroupBgroupBgroupzIndex1\n     */\n    GroupNodeModel.prototype.toBack = function () {\n        this.zIndex--;\n    };\n    return GroupNodeModel;\n}(RectResizeModel));\nexport { GroupNodeModel };\nvar GroupNode = /** @class */ (function (_super) {\n    __extends(GroupNode, _super);\n    function GroupNode() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    GroupNode.prototype.getControlGroup = function () {\n        var _a = this.props.model, resizable = _a.resizable, properties = _a.properties;\n        return resizable && !properties.isFolded ? _super.prototype.getControlGroup.call(this) : null;\n    };\n    GroupNode.prototype.getAddableShape = function () {\n        var _a = this.props.model, width = _a.width, height = _a.height, x = _a.x, y = _a.y, radius = _a.radius, properties = _a.properties, getAddableOutlineStyle = _a.getAddableOutlineStyle;\n        if (!properties.groupAddable)\n            return null;\n        var _b = this.props.model.getNodeStyle().strokeWidth, strokeWidth = _b === void 0 ? 0 : _b;\n        var style = getAddableOutlineStyle();\n        var newWidth = width + strokeWidth + 8;\n        var newHeight = height + strokeWidth + 8;\n        return h('rect', __assign(__assign({}, style), { width: newWidth, height: newHeight, x: x - newWidth / 2, y: y - newHeight / 2, rx: radius, ry: radius }));\n    };\n    GroupNode.prototype.getFoldIcon = function () {\n        var model = this.props.model;\n        var foldX = model.x - model.width / 2 + 5;\n        var foldY = model.y - model.height / 2 + 5;\n        if (!model.foldable)\n            return null;\n        var iconIcon = h('path', {\n            fill: 'none',\n            stroke: '#818281',\n            strokeWidth: 2,\n            'pointer-events': 'none',\n            d: model.properties.isFolded\n                ? \"M \".concat(foldX + 3, \",\").concat(foldY + 6, \" \").concat(foldX + 11, \",\").concat(foldY + 6, \" M\").concat(foldX + 7, \",\").concat(foldY + 2, \" \").concat(foldX + 7, \",\").concat(foldY + 10)\n                : \"M \".concat(foldX + 3, \",\").concat(foldY + 6, \" \").concat(foldX + 11, \",\").concat(foldY + 6, \" \"),\n        });\n        return h('g', {}, [\n            h('rect', {\n                height: 12,\n                width: 14,\n                rx: 2,\n                ry: 2,\n                strokeWidth: 1,\n                fill: '#F4F5F6',\n                stroke: '#CECECE',\n                cursor: 'pointer',\n                x: model.x - model.width / 2 + 5,\n                y: model.y - model.height / 2 + 5,\n                onClick: function () {\n                    ;\n                    model.foldGroup(!model.properties.isFolded);\n                },\n            }),\n            iconIcon,\n        ]);\n    };\n    GroupNode.prototype.getResizeShape = function () {\n        return h('g', {}, [\n            this.getAddableShape(),\n            _super.prototype.getResizeShape.call(this),\n            this.getFoldIcon(),\n        ]);\n    };\n    return GroupNode;\n}(RectResizeView));\nexport { GroupNode };\nexport default {\n    type: 'group',\n    view: GroupNode,\n    model: GroupNodeModel,\n};\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { h, PolylineEdge, PolylineEdgeModel, } from '@logicflow/core';\nimport { genBpmnId } from '../../utils';\nexport function sequenceFlowFactory(props) {\n    var model = /** @class */ (function (_super) {\n        __extends(model, _super);\n        function model(data, graphModel) {\n            if (!data.id) {\n                data.id = \"Flow_\".concat(genBpmnId());\n            }\n            var properties = __assign(__assign(__assign({}, (props || {})), data.properties), { \n                // panels: ['condition'],\n                isDefaultFlow: false });\n            data.properties = properties;\n            return _super.call(this, data, graphModel) || this;\n        }\n        model.extendKey = 'SequenceFlowModel';\n        return model;\n    }(PolylineEdgeModel));\n    var view = /** @class */ (function (_super) {\n        __extends(view, _super);\n        function view() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        view.prototype.getStartArrow = function () {\n            // eslint-disable-next-line no-shadow\n            var model = this.props.model;\n            var isDefaultFlow = model.properties.isDefaultFlow;\n            return isDefaultFlow\n                ? h('path', {\n                    refX: 15,\n                    stroke: '#000000',\n                    strokeWidth: 2,\n                    d: 'M 20 5 10 -5 z',\n                })\n                : h('path', {\n                    d: '',\n                });\n        };\n        view.extendKey = 'SequenceFlowEdge';\n        return view;\n    }(PolylineEdge));\n    return {\n        type: 'bpmn:sequenceFlow',\n        view: view,\n        model: model,\n    };\n}\n","import { sequenceFlowFactory } from './sequenceFlow';\nexport var SequenceFlow = sequenceFlowFactory();\nexport function registerFlows(lf) {\n    lf.register(SequenceFlow);\n}\n","export var StartEventConfig = {\n    width: 40,\n    height: 40,\n};\nexport var EndEventConfig = {\n    width: 40,\n    height: 40,\n};\nexport var BoundaryEventConfig = {\n    width: 100,\n    height: 80,\n};\nexport var IntermediateEventConfig = {\n    width: 100,\n    height: 80,\n};\nexport var ParallelGatewayConfig = {\n    width: 100,\n    height: 80,\n};\nexport var InclusiveGatewayConfig = {\n    width: 100,\n    height: 80,\n};\nexport var ExclusiveGatewayConfig = {\n    width: 100,\n    height: 80,\n};\nexport var ServiceTaskConfig = {\n    width: 100,\n    height: 80,\n};\nexport var UserTaskConfig = {\n    width: 100,\n    height: 80,\n};\nexport var SubProcessConfig = {\n    width: 100,\n    height: 80,\n};\nexport var theme = {\n    rect: {\n        radius: 5,\n        stroke: 'rgb(24, 125, 255)',\n    },\n    circle: {\n        r: 18,\n        stroke: 'rgb(24, 125, 255)',\n    },\n    polygon: {\n        stroke: 'rgb(24, 125, 255)',\n    },\n    polyline: {\n        stroke: 'rgb(24, 125, 255)',\n        hoverStroke: 'rgb(24, 125, 255)',\n        selectedStroke: 'rgb(24, 125, 255)',\n    },\n    edgeText: {\n        background: {\n            fill: 'white',\n            height: 14,\n            stroke: 'transparent',\n            radius: 3,\n        },\n    },\n};\n","/* eslint-disable no-continue */\n/* eslint-disable @typescript-eslint/no-this-alias */\n/* eslint-disable @typescript-eslint/naming-convention */\n/* eslint-disable guard-for-in */\n/* eslint-disable func-names */\n// @ts-nocheck\nimport { has } from 'lodash-es';\n// ========================================================================\n//  XML.ObjTree -- XML source code from/to JavaScript object like E4X\n// ========================================================================\nvar XML = function () { };\n//  constructor\nXML.ObjTree = function () {\n    // @ts-ignore\n    return this;\n};\n//  class variables\nXML.ObjTree.VERSION = '0.23';\n//  object prototype\nXML.ObjTree.prototype.xmlDecl = '<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\\n';\nXML.ObjTree.prototype.attr_prefix = '-';\n//  method: parseXML( xmlsource )\nXML.ObjTree.prototype.parseXML = function (xml) {\n    var root;\n    if (window.DOMParser) {\n        var xmldom = new DOMParser();\n        //      xmldom.async = false;           // DOMParser is always sync-mode\n        var dom = xmldom.parseFromString(xml, 'application/xml');\n        if (!dom)\n            return;\n        root = dom.documentElement;\n    }\n    else if (window.ActiveXObject) {\n        xmldom = new ActiveXObject('Microsoft.XMLDOM');\n        xmldom.async = false;\n        xmldom.loadXML(xml);\n        root = xmldom.documentElement;\n    }\n    if (!root)\n        return;\n    var data = this.parseDOM(root);\n    return data;\n};\n//  method: parseHTTP( url, options, callback )\nXML.ObjTree.prototype.parseHTTP = function (url, options, callback) {\n    var myOpt = {};\n    for (var key in options) {\n        myOpt[key] = options[key]; // copy object\n    }\n    if (!myOpt.method) {\n        if (typeof myOpt.postBody === 'undefined' &&\n            typeof myOpt.postbody === 'undefined' &&\n            typeof myOpt.parameters === 'undefined') {\n            myOpt.method = 'get';\n        }\n        else {\n            myOpt.method = 'post';\n        }\n    }\n    if (callback) {\n        myOpt.asynchronous = true; // async-mode\n        var __this_1 = this;\n        var __func_1 = callback;\n        var __save_1 = myOpt.onComplete;\n        myOpt.onComplete = function (trans) {\n            var tree;\n            if (trans && trans.responseXML && trans.responseXML.documentElement) {\n                tree = __this_1.parseDOM(trans.responseXML.documentElement);\n            }\n            __func_1(tree, trans);\n            if (__save_1)\n                __save_1(trans);\n        };\n    }\n    else {\n        myOpt.asynchronous = false; // sync-mode\n    }\n    var trans;\n    if (typeof HTTP !== 'undefined' && HTTP.Request) {\n        myOpt.uri = url;\n        var req = new HTTP.Request(myOpt);\n        if (req)\n            trans = req.transport;\n    }\n    else if (typeof Ajax !== 'undefined' && Ajax.Request) {\n        var req = new Ajax.Request(url, myOpt);\n        if (req)\n            trans = req.transport;\n    }\n    if (callback)\n        return trans;\n    if (trans && trans.responseXML && trans.responseXML.documentElement) {\n        return this.parseDOM(trans.responseXML.documentElement);\n    }\n};\nXML.ObjTree.prototype.parseDOM = function (root) {\n    if (!root)\n        return;\n    this.__force_array = {};\n    if (this.force_array) {\n        for (var i = 0; i < this.force_array.length; i++) {\n            this.__force_array[this.force_array[i]] = 1;\n        }\n    }\n    var json = this.parseElement(root); // parse root node\n    if (this.__force_array[root.nodeName]) {\n        json = [json];\n    }\n    if (root.nodeType !== 11) {\n        // DOCUMENT_FRAGMENT_NODE\n        var tmp = {};\n        tmp[root.nodeName] = json; // root nodeName\n        json = tmp;\n    }\n    return json;\n};\n//  method: parseElement( element )\n/**\n * @reference node type reference https://www.w3schools.com/xml/dom_nodetype.asp\n */\nXML.ObjTree.prototype.parseElement = function (elem) {\n    //  PROCESSING_INSTRUCTION_NODE\n    if (elem.nodeType === 7) {\n        return;\n    }\n    //  TEXT_NODE CDATA_SECTION_NODE COMMENT_NODE\n    if (elem.nodeType === 3 || elem.nodeType === 4 || elem.nodeType === 8) {\n        // eslint-disable-next-line no-control-regex\n        var bool = elem.nodeValue.match(/[^\\x00-\\x20]/);\n        if (bool == null)\n            return; // ignore white spaces\n        return elem.nodeValue;\n    }\n    var retVal = null;\n    var cnt = {};\n    if (elem.attributes && elem.attributes.length) {\n        retVal = {};\n        for (var i = 0; i < elem.attributes.length; i++) {\n            var key = elem.attributes[i].nodeName;\n            if (typeof key !== 'string')\n                continue;\n            var val = elem.attributes[i].nodeValue;\n            try {\n                val = JSON.parse(elem.attributes[i].nodeValue.replace(/'/g, '\"'));\n            }\n            catch (error) {\n                val = elem.attributes[i].nodeValue;\n            }\n            if (val === null || val === undefined)\n                continue;\n            key = this.attr_prefix + key;\n            if (typeof cnt[key] === 'undefined')\n                cnt[key] = 0;\n            cnt[key]++;\n            this.addNode(retVal, key, cnt[key], val);\n        }\n    }\n    //  parse child nodes (recursive)\n    if (elem.childNodes && elem.childNodes.length) {\n        var textOnly = true;\n        if (retVal)\n            textOnly = false; // some attributes exists\n        for (var i = 0; i < elem.childNodes.length && textOnly; i++) {\n            var nType = elem.childNodes[i].nodeType;\n            if (nType === 3 || nType === 4 || nType === 8)\n                continue;\n            textOnly = false;\n        }\n        if (textOnly) {\n            if (!retVal)\n                retVal = '';\n            for (var i = 0; i < elem.childNodes.length; i++) {\n                retVal += elem.childNodes[i].nodeValue;\n            }\n        }\n        else {\n            if (!retVal)\n                retVal = {};\n            for (var i = 0; i < elem.childNodes.length; i++) {\n                var key = elem.childNodes[i].nodeName;\n                if (typeof key !== 'string')\n                    continue;\n                var val = this.parseElement(elem.childNodes[i]);\n                if (!val)\n                    continue;\n                if (typeof cnt[key] === 'undefined')\n                    cnt[key] = 0;\n                cnt[key]++;\n                this.addNode(retVal, key, cnt[key], val);\n            }\n        }\n    }\n    else {\n        // @see issue https://github.com/didi/LogicFlow/issues/1068\n        // if retVal is null, that means the elem doesn't have any attributes and children,\n        // the elem would be like: <a /> or <a></a>, so set retVal to empty object {}\n        retVal === null && (retVal = {});\n    }\n    return retVal;\n};\n//  method: addNode( hash, key, count, value )\nXML.ObjTree.prototype.addNode = function (hash, key, counts, val) {\n    if (this.__force_array[key]) {\n        if (counts === 1)\n            hash[key] = [];\n        hash[key][hash[key].length] = val; // push\n    }\n    else if (counts === 1) {\n        // 1st sibling\n        hash[key] = val;\n    }\n    else if (counts === 2) {\n        // 2nd sibling\n        hash[key] = [hash[key], val];\n    }\n    else {\n        // 3rd sibling and more\n        hash[key][hash[key].length] = val;\n    }\n};\n//  method: writeXML( tree )\nXML.ObjTree.prototype.writeXML = function (tree) {\n    var xml = this.hash_to_xml(null, tree);\n    return this.xmlDecl + xml;\n};\n//  method: hash_to_xml( tagName, tree )\nXML.ObjTree.prototype.hash_to_xml = function (name, tree) {\n    var elem = [];\n    var attr = [];\n    for (var key in tree) {\n        if (!has(tree, key))\n            continue;\n        var val = tree[key];\n        if (key.charAt(0) !== this.attr_prefix) {\n            if (typeof val === 'undefined' || val == null) {\n                elem[elem.length] = \"<\".concat(key, \" />\");\n            }\n            else if (typeof val === 'object' && val.constructor === Array) {\n                elem[elem.length] = this.array_to_xml(key, val);\n            }\n            else if (typeof val === 'object') {\n                elem[elem.length] = this.hash_to_xml(key, val);\n            }\n            else {\n                elem[elem.length] = this.scalar_to_xml(key, val);\n            }\n        }\n        else {\n            attr[attr.length] = \" \".concat(key.substring(1), \"=\\\"\").concat(this.xml_escape(val), \"\\\"\");\n        }\n    }\n    var jattr = attr.join('');\n    var jelem = elem.join('');\n    if (typeof name === 'undefined' || name == null) {\n        // no tag\n    }\n    else if (elem.length > 0) {\n        if (jelem.match(/\\n/)) {\n            jelem = \"<\".concat(name).concat(jattr, \">\\n\").concat(jelem, \"</\").concat(name, \">\\n\");\n        }\n        else {\n            jelem = \"<\".concat(name).concat(jattr, \">\").concat(jelem, \"</\").concat(name, \">\\n\");\n        }\n    }\n    else {\n        jelem = \"<\".concat(name).concat(jattr, \" />\\n\");\n    }\n    return jelem;\n};\n//  method: array_to_xml( tagName, array )\nXML.ObjTree.prototype.array_to_xml = function (name, array) {\n    var out = [];\n    for (var i = 0; i < array.length; i++) {\n        var val = array[i];\n        if (typeof val === 'undefined' || val == null) {\n            out[out.length] = \"<\".concat(name, \" />\");\n        }\n        else if (typeof val === 'object' && val.constructor === Array) {\n            out[out.length] = this.array_to_xml(name, val);\n        }\n        else if (typeof val === 'object') {\n            out[out.length] = this.hash_to_xml(name, val);\n        }\n        else {\n            out[out.length] = this.scalar_to_xml(name, val);\n        }\n    }\n    return out.join('');\n};\n//  method: scalar_to_xml( tagName, text )\nXML.ObjTree.prototype.scalar_to_xml = function (name, text) {\n    if (name === '#text') {\n        return this.xml_escape(text);\n    }\n    return \"<\".concat(name, \">\").concat(this.xml_escape(text), \"</\").concat(name, \">\\n\");\n};\n//  method: xml_escape( text )\nXML.ObjTree.prototype.xml_escape = function (text) {\n    return text\n        .replace(/&/g, '&')\n        .replace(/</g, '<')\n        .replace(/>/g, '>')\n        .replace(/\"/g, '\"');\n};\n/*\n// ========================================================================\n\n=head1 NAME\n\nXML.ObjTree -- XML source code from/to JavaScript object like E4X\n\n=head1 SYNOPSIS\n\nvar xotree = new XML.ObjTree();\nvar tree1 = {\nroot: {\nnode: \"Hello, World!\"\n}\n};\nvar xml1 = xotree.writeXML( tree1 );        // object tree to XML source\nalert( \"xml1: \"+xml1 );\n\nvar xml2 = '<?xml version=\"1.0\"?><response><error>0</error></response>';\nvar tree2 = xotree.parseXML( xml2 );        // XML source to object tree\nalert( \"error: \"+tree2.response.error );\n\n=head1 DESCRIPTION\n\nXML.ObjTree class is a parser/generator between XML source code\nand JavaScript object like E4X, ECMAScript for XML.\nThis is a JavaScript version of the XML::TreePP module for Perl.\nThis also works as a wrapper for XMLHTTPRequest and successor to JKL.ParseXML class\nwhen this is used with prototype.js or JSAN's HTTP.Request class.\n\n=head2 JavaScript object tree format\n\nA sample XML source:\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<family name=\"Kawasaki\">\n<father>Yasuhisa</father>\n<mother>Chizuko</mother>\n<children>\n<girl>Shiori</girl>\n<boy>Yusuke</boy>\n<boy>Kairi</boy>\n</children>\n</family>\n\nIts JavaScript object tree like JSON/E4X:\n\n{\n'family': {\n'-name':    'Kawasaki',\n'father':   'Yasuhisa',\n'mother':   'Chizuko',\n'children': {\n'girl': 'Shiori'\n'boy': [\n'Yusuke',\n'Kairi'\n]\n}\n}\n};\n\nEach elements are parsed into objects:\n\ntree.family.father;             # the father's given name.\n\nPrefix '-' is inserted before every attributes' name.\n\ntree.family[\"-name\"];           # this family's family name\n\nA array is used because this family has two boys.\n\ntree.family.children.boy[0];    # first boy's name\ntree.family.children.boy[1];    # second boy's name\ntree.family.children.girl;      # (girl has no other sisters)\n\n=head1 METHODS\n\n=head2 xotree = new XML.ObjTree()\n\nThis constructor method returns a new XML.ObjTree object.\n\n=head2 xotree.force_array = [ \"rdf:li\", \"item\", \"-xmlns\" ];\n\nThis property allows you to specify a list of element names\nwhich should always be forced into an array representation.\nThe default value is null, it means that context of the elements\nwill determine to make array or to keep it scalar.\n\n=head2 xotree.attr_prefix = '@';\n\nThis property allows you to specify a prefix character which is\ninserted before each attribute names.\nInstead of default prefix '-', E4X-style prefix '@' is also available.\nThe default character is '-'.\nOr set '@' to access attribute values like E4X, ECMAScript for XML.\nThe length of attr_prefix must be just one character and not be empty.\n\n=head2 tree = xotree.parseXML( xmlSrc );\n\nThis method loads an XML document using the supplied string\nand returns its JavaScript object converted.\n\n=head2 tree = xotree.parseDOM( domNode );\n\nThis method parses a DOM tree (ex. responseXML.documentElement)\nand returns its JavaScript object converted.\n\n=head2 tree = xotree.parseHTTP( url, options );\n\nThis method loads a XML file from remote web server\nand returns its JavaScript object converted.\nXMLHTTPRequest's synchronous mode is always used.\nThis mode blocks the process until the response is completed.\n\nFirst argument is a XML file's URL\nwhich must exist in the same domain as parent HTML file's.\nCross-domain loading is not available for security reasons.\n\nSecond argument is options' object which can contains some parameters:\nmethod, postBody, parameters, onLoading, etc.\n\nThis method requires JSAN's L<HTTP.Request> class or prototype.js's Ajax.Request class.\n\n=head2 xotree.parseHTTP( url, options, callback );\n\nIf a callback function is set as third argument,\nXMLHTTPRequest's asynchronous mode is used.\n\nThis mode calls a callback function with XML file's JavaScript object converted\nafter the response is completed.\n\n=head2 xmlSrc = xotree.writeXML( tree );\n\nThis method parses a JavaScript object tree\nand returns its XML source generated.\n\n=head1 EXAMPLES\n\n=head2 Text node and attributes\n\nIf a element has both of a text node and attributes\nor both of a text node and other child nodes,\ntext node's value is moved to a special node named \"#text\".\n\nvar xotree = new XML.ObjTree();\nvar xmlSrc = '<span class=\"author\">Kawasaki Yusuke</span>';\nvar tree = xotree.parseXML( xmlSrc );\nvar class = tree.span[\"-class\"];        # attribute\nvar name  = tree.span[\"#text\"];         # text node\n\n=head2 parseHTTP() method with HTTP-GET and sync-mode\n\nHTTP/Request.js or prototype.js must be loaded before calling this method.\n\nvar xotree = new XML.ObjTree();\nvar url = \"http://example.com/index.html\";\nvar tree = xotree.parseHTTP( url );\nxotree.attr_prefix = '@';                   // E4X-style\nalert( tree.html[\"@lang\"] );\n\nThis code shows C<lang=\"\"> attribute from a X-HTML source code.\n\n=head2 parseHTTP() method with HTTP-POST and async-mode\n\nThird argument is a callback function which is called on onComplete.\n\nvar xotree = new XML.ObjTree();\nvar url = \"http://example.com/mt-tb.cgi\";\nvar opts = {\npostBody:   \"title=...&excerpt=...&url=...&blog_name=...\"\n};\nvar func = function ( tree ) {\nalert( tree.response.error );\n};\nxotree.parseHTTP( url, opts, func );\n\nThis code send a track back ping and shows its response code.\n\n=head2 Simple RSS reader\n\nThis is a RSS reader which loads RDF file and displays all items.\n\nvar xotree = new XML.ObjTree();\nxotree.force_array = [ \"rdf:li\", \"item\" ];\nvar url = \"http://example.com/news-rdf.xml\";\nvar func = function( tree ) {\nvar elem = document.getElementById(\"rss_here\");\nfor( var i=0; i<tree[\"rdf:RDF\"].item.length; i++ ) {\nvar divTag = document.createElement( \"div\" );\nvar aTag = document.createElement( \"a\" );\naTag.href = tree[\"rdf:RDF\"].item[i].link;\nvar title = tree[\"rdf:RDF\"].item[i].title;\nvar tNode = document.createTextNode( title );\naTag.appendChild( tNode );\ndivTag.appendChild( aTag );\nelem.appendChild( divTag );\n}\n};\nxotree.parseHTTP( url, {}, func );\n\n=head2  XML-RPC using writeXML, prototype.js and parseDOM\n\nIf you wish to use prototype.js's Ajax.Request class by yourself:\n\nvar xotree = new XML.ObjTree();\nvar reqTree = {\nmethodCall: {\nmethodName: \"weblogUpdates.ping\",\nparams: {\nparam: [\n{ value: \"Kawa.net xp top page\" },  // 1st param\n{ value: \"http://www.kawa.net/\" }   // 2nd param\n]\n}\n}\n};\nvar reqxml = xotree.writeXML( reqTree );       // JS-Object to XML code\nvar url = \"http://example.com/xmlrpc\";\nvar func = function( req ) {\nvar resDom = req.responseXML.documentElement;\nxotree.force_array = [ \"member\" ];\nvar resTree = xotree.parseDOM( resDom );   // XML-DOM to JS-Object\nalert( resTree.methodResponse.params.param.value.struct.member[0].value.string );\n};\nvar opt = {\nmethod:         \"post\",\npostBody:       reqxml,\nasynchronous:   true,\nonComplete:     func\n};\nnew Ajax.Request( url, opt );\n\n=head1 AUTHOR\n\nYusuke Kawasaki http://www.kawa.net/\n=head1 COPYRIGHT AND LICENSE\n\nCopyright (c) 2005-2006 Yusuke Kawasaki. All rights reserved.\nThis program is free software; you can redistribute it and/or\nmodify it under the Artistic license. Or whatever license I choose,\nwhich I will do instead of keeping this documentation like it is.\n\n=cut\n// ========================================================================\n*/\nvar lfXml2Json = function (xmlData) { return new XML.ObjTree().parseXML(xmlData); };\nexport { lfXml2Json };\n","/* eslint-disable guard-for-in */\nfunction type(obj) {\n    return Object.prototype.toString.call(obj);\n}\nfunction addSpace(depth) {\n    return '  '.repeat(depth);\n}\nfunction handleAttributes(obj) {\n    if (type(obj) === '[object Object]') {\n        return Object.keys(obj).reduce(function (tmp, key) {\n            var tmpKey = key;\n            if (key.charAt(0) === '-') {\n                tmpKey = key.substring(1);\n            }\n            tmp[tmpKey] = handleAttributes(obj[key]);\n            return tmp;\n        }, {});\n    }\n    if (Array.isArray(obj)) {\n        return obj.map(function (item) { return handleAttributes(item); });\n    }\n    return obj;\n}\nfunction getAttributes(obj) {\n    var tmp = obj;\n    try {\n        if (typeof tmp !== 'string') {\n            tmp = JSON.parse(obj);\n        }\n    }\n    catch (error) {\n        tmp = JSON.stringify(handleAttributes(obj)).replace(/\"/g, \"'\");\n    }\n    return tmp;\n}\nvar tn = '\\t\\n';\n// @see issue https://github.com/didi/LogicFlow/issues/718, refactoring of function toXml\nfunction toXml(obj, name, depth) {\n    var frontSpace = addSpace(depth);\n    var str = '';\n    var prefix = tn + frontSpace;\n    if (name === '-json')\n        return '';\n    if (name === '#text') {\n        return prefix + obj;\n    }\n    if (name === '#cdata-section') {\n        return \"\".concat(prefix, \"<![CDATA[\").concat(obj, \"]]>\");\n    }\n    if (name === '#comment') {\n        return \"\".concat(prefix, \"<!--\").concat(obj, \"-->\");\n    }\n    if (\"\".concat(name).charAt(0) === '-') {\n        return \" \".concat(name.substring(1), \"=\\\"\").concat(getAttributes(obj), \"\\\"\");\n    }\n    if (Array.isArray(obj)) {\n        str += obj.map(function (item) { return toXml(item, name, depth + 1); }).join('');\n    }\n    else if (type(obj) === '[object Object]') {\n        var keys = Object.keys(obj);\n        var attributes_1 = '';\n        var children_1 = obj['-json'] ? tn + addSpace(depth + 1) + obj['-json'] : '';\n        str += \"\".concat(depth === 0 ? '' : prefix, \"<\").concat(name);\n        keys.forEach(function (k) {\n            k.charAt(0) === '-'\n                ? (attributes_1 += toXml(obj[k], k, depth + 1))\n                : (children_1 += toXml(obj[k], k, depth + 1));\n        });\n        str +=\n            attributes_1 + (children_1 !== '' ? \">\".concat(children_1).concat(prefix, \"</\").concat(name, \">\") : ' />');\n    }\n    else {\n        str += \"\".concat(prefix, \"<\").concat(name, \">\").concat(obj.toString(), \"</\").concat(name, \">\");\n    }\n    return str;\n}\nfunction lfJson2Xml(obj) {\n    var xmlStr = '';\n    for (var key in obj) {\n        xmlStr += toXml(obj[key], key, 0);\n    }\n    return xmlStr;\n}\nexport { lfJson2Xml, handleAttributes };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\n/* eslint-disable func-names */\n/* eslint-disable no-continue */\n/* eslint-disable @typescript-eslint/naming-convention */\n/* eslint-disable no-cond-assign */\n/* eslint-disable no-shadow */\nimport _ from 'lodash-es';\nimport { ExclusiveGatewayConfig, InclusiveGatewayConfig, ParallelGatewayConfig, StartEventConfig, EndEventConfig, BoundaryEventConfig, IntermediateEventConfig, ServiceTaskConfig, UserTaskConfig, SubProcessConfig, } from './constant';\nimport { lfXml2Json } from './xml2json';\nimport { lfJson2Xml, handleAttributes } from './json2xml';\nvar BpmnElements;\n(function (BpmnElements) {\n    BpmnElements[\"START\"] = \"bpmn:startEvent\";\n    BpmnElements[\"END\"] = \"bpmn:endEvent\";\n    BpmnElements[\"INTERMEDIATE_CATCH\"] = \"bpmn:intermediateCatchEvent\";\n    BpmnElements[\"INTERMEDIATE_THROW\"] = \"bpmn:intermediateThrowEvent\";\n    BpmnElements[\"BOUNDARY\"] = \"bpmn:boundaryEvent\";\n    BpmnElements[\"PARALLEL_GATEWAY\"] = \"bpmn:parallelGateway\";\n    BpmnElements[\"INCLUSIVE_GATEWAY\"] = \"bpmn:inclusiveGateway\";\n    BpmnElements[\"EXCLUSIVE_GATEWAY\"] = \"bpmn:exclusiveGateway\";\n    BpmnElements[\"USER\"] = \"bpmn:userTask\";\n    BpmnElements[\"SYSTEM\"] = \"bpmn:serviceTask\";\n    BpmnElements[\"FLOW\"] = \"bpmn:sequenceFlow\";\n    BpmnElements[\"SUBPROCESS\"] = \"bpmn:subProcess\";\n})(BpmnElements || (BpmnElements = {}));\nvar defaultAttrsForInput = [\n    '-name',\n    '-id',\n    'bpmn:incoming',\n    'bpmn:outgoing',\n    '-sourceRef',\n    '-targetRef',\n    '-children',\n];\nvar defaultRetainedProperties = [\n    'properties',\n    'startPoint',\n    'endPoint',\n    'pointsList',\n];\nvar defaultExcludeFields = {\n    in: [],\n    out: [\n        'properties.panels',\n        'properties.nodeSize',\n        'properties.definitionId',\n        'properties.timerValue',\n        'properties.timerType',\n        'properties.definitionType',\n        'properties.parent',\n        'properties.isBoundaryEventTouchingTask',\n    ],\n};\nvar mergeInNOutObject = function (target, source) {\n    var sourceKeys = Object.keys(source || {});\n    sourceKeys.forEach(function (key) {\n        if (target[key]) {\n            var _a = source[key], fnIn = _a.in, fnOut = _a.out;\n            if (fnIn) {\n                target[key].in = fnIn;\n            }\n            if (fnOut) {\n                target[key].out = fnOut;\n            }\n        }\n        else {\n            target[key] = source[key];\n        }\n    });\n    return target;\n};\n// @ts-ignore\nvar defaultTransformer = {\n    'bpmn:startEvent': {\n        out: function (data) {\n            var _a, _b;\n            var properties = data.properties;\n            return ((_b = (_a = defaultTransformer[properties.definitionType]) === null || _a === void 0 ? void 0 : _a.out) === null || _b === void 0 ? void 0 : _b.call(_a, data)) || {};\n        },\n    },\n    // 'bpmn:endEvent': undefined,\n    'bpmn:intermediateCatchEvent': {\n        out: function (data) {\n            var _a, _b;\n            var properties = data.properties;\n            return ((_b = (_a = defaultTransformer[properties.definitionType]) === null || _a === void 0 ? void 0 : _a.out) === null || _b === void 0 ? void 0 : _b.call(_a, data)) || {};\n        },\n    },\n    'bpmn:intermediateThrowEvent': {\n        out: function (data) {\n            var _a, _b;\n            var properties = data.properties;\n            return ((_b = (_a = defaultTransformer[properties.definitionType]) === null || _a === void 0 ? void 0 : _a.out) === null || _b === void 0 ? void 0 : _b.call(_a, data)) || {};\n        },\n    },\n    'bpmn:boundaryEvent': {\n        out: function (data) {\n            var _a, _b;\n            var properties = data.properties;\n            return ((_b = (_a = defaultTransformer[properties.definitionType]) === null || _a === void 0 ? void 0 : _a.out) === null || _b === void 0 ? void 0 : _b.call(_a, data)) || {};\n        },\n    },\n    // 'bpmn:userTask': undefined,\n    'bpmn:sequenceFlow': {\n        out: function (data) {\n            var _a = data.properties, expressionType = _a.expressionType, condition = _a.condition;\n            if (condition) {\n                if (expressionType === 'cdata') {\n                    return {\n                        json: \"<bpmn:conditionExpression xsi:type=\\\"bpmn2:tFormalExpression\\\"><![CDATA[${\".concat(condition, \"}]]></bpmn:conditionExpression>\"),\n                    };\n                }\n                return {\n                    json: \"<bpmn:conditionExpression xsi:type=\\\"bpmn2:tFormalExpression\\\">\".concat(condition, \"</bpmn:conditionExpression>\"),\n                };\n            }\n            return {\n                json: '',\n            };\n        },\n    },\n    // 'bpmn:subProcess': undefined,\n    // 'bpmn:participant': undefined,\n    'bpmn:timerEventDefinition': {\n        out: function (data) {\n            var _a = data.properties, timerType = _a.timerType, timerValue = _a.timerValue, definitionId = _a.definitionId;\n            var typeFunc = function () {\n                return \"<bpmn:\".concat(timerType, \" xsi:type=\\\"bpmn:tFormalExpression\\\">\").concat(timerValue, \"</bpmn:\").concat(timerType, \">\");\n            };\n            return {\n                json: \"<bpmn:timerEventDefinition id=\\\"\".concat(definitionId, \"\\\"\").concat(timerType && timerValue\n                    ? \">\".concat(typeFunc(), \"</bpmn:timerEventDefinition>\")\n                    : '/>'),\n            };\n        },\n        in: function (key, data) {\n            var e_1, _a, _b;\n            var _c;\n            var definitionType = key;\n            var definitionId = data['-id'];\n            var timerType = '';\n            var timerValue = '';\n            try {\n                for (var _d = __values(Object.keys(data)), _e = _d.next(); !_e.done; _e = _d.next()) {\n                    var key_1 = _e.value;\n                    if (key_1.includes('bpmn:')) {\n                        ;\n                        _b = __read(key_1.split(':'), 2), timerType = _b[1];\n                        timerValue = (_c = data[key_1]) === null || _c === void 0 ? void 0 : _c['#text'];\n                    }\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_e && !_e.done && (_a = _d.return)) _a.call(_d);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            return {\n                '-definitionId': definitionId,\n                '-definitionType': definitionType,\n                '-timerType': timerType,\n                '-timerValue': timerValue,\n            };\n        },\n    },\n    'bpmn:conditionExpression': {\n        in: function (_key, data) {\n            var _a;\n            var condition = '';\n            var expressionType = '';\n            if (data['#cdata-section']) {\n                expressionType = 'cdata';\n                condition = ((_a = /^\\$\\{(.*)\\}$/g.exec(data['#cdata-section'])) === null || _a === void 0 ? void 0 : _a[1]) || '';\n            }\n            else if (data['#text']) {\n                expressionType = 'normal';\n                condition = data['#text'];\n            }\n            return {\n                '-condition': condition,\n                '-expressionType': expressionType,\n            };\n        },\n    },\n};\n/**\n * jsonxmlJson\n * xmlJsonproperty-\n * -\n * fix issue https://github.com/didi/LogicFlow/issues/718, contain the process of #text/#cdata and array\n * @reference node type reference https://www.w3schools.com/xml/dom_nodetype.asp\n * @param retainedAttrsFields retainedAttrsFieldsdefaultRetainedProperties:\n * [\"properties\", \"startPoint\", \"endPoint\", \"pointsList\"]\n * \n * @param excludeFields excludeFieldsdefaultExcludeFields\n * @param transformer \n */\nfunction convertNormalToXml(other) {\n    var _a = other !== null && other !== void 0 ? other : {}, retainedAttrsFields = _a.retainedAttrsFields, excludeFields = _a.excludeFields, transformer = _a.transformer;\n    var retainedAttrsSet = new Set(__spreadArray(__spreadArray([], __read(defaultRetainedProperties), false), __read((retainedAttrsFields || [])), false));\n    var excludeFieldsSet = {\n        in: new Set(__spreadArray(__spreadArray([], __read(defaultExcludeFields.in), false), __read(((excludeFields === null || excludeFields === void 0 ? void 0 : excludeFields.in) || [])), false)),\n        out: new Set(__spreadArray(__spreadArray([], __read(defaultExcludeFields.out), false), __read(((excludeFields === null || excludeFields === void 0 ? void 0 : excludeFields.out) || [])), false)),\n    };\n    defaultTransformer = mergeInNOutObject(defaultTransformer, transformer);\n    return function (object) {\n        var nodes = object.nodes;\n        var edges = object.edges;\n        function ToXmlJson(obj, path) {\n            var e_2, _a;\n            if ((obj === null || obj === void 0 ? void 0 : obj.flag) === 1) {\n                return;\n            }\n            var fn;\n            // @ts-ignore\n            if ((fn = defaultTransformer[obj.type]) && fn.out) {\n                var output_1 = fn.out(obj);\n                var keys = Object.keys(output_1);\n                if (keys.length > 0) {\n                    keys.forEach(function (key) {\n                        obj[key] = output_1[key];\n                    });\n                }\n            }\n            if (obj === null || obj === void 0 ? void 0 : obj.children) {\n                obj.children = obj.children.map(function (key) {\n                    var target = nodes.find(function (item) { return item.id === key; }) ||\n                        edges.find(function (item) { return item.id === key; });\n                    return target || {};\n                });\n            }\n            var xmlJson = {};\n            if (typeof obj === 'string') {\n                return obj;\n            }\n            if (Array.isArray(obj)) {\n                return (obj\n                    .map(function (item) { return ToXmlJson(item, ''); })\n                    // eslint-disable-next-line eqeqeq\n                    .filter(function (item) { return item != undefined; }));\n            }\n            try {\n                for (var _b = __values(Object.entries(obj)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var _d = __read(_c.value, 2), key = _d[0], value = _d[1];\n                    if ((value === null || value === void 0 ? void 0 : value['flag']) === 1) {\n                        return;\n                    }\n                    var newPath = [path, key].filter(function (item) { return item; }).join('.');\n                    if (excludeFieldsSet.out.has(newPath)) {\n                        continue;\n                    }\n                    else if (typeof value !== 'object') {\n                        // node type reference https://www.w3schools.com/xml/dom_nodetype.asp\n                        if (key.indexOf('-') === 0 ||\n                            ['#text', '#cdata-section', '#comment'].includes(key)) {\n                            xmlJson[key] = value;\n                        }\n                        else {\n                            xmlJson[\"-\".concat(key)] = value;\n                        }\n                    }\n                    else if (retainedAttrsSet.has(newPath)) {\n                        xmlJson[\"-\".concat(key)] = ToXmlJson(value, newPath);\n                    }\n                    else {\n                        xmlJson[key] = ToXmlJson(value, newPath);\n                    }\n                }\n            }\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                }\n                finally { if (e_2) throw e_2.error; }\n            }\n            return xmlJson;\n        }\n        return ToXmlJson(object, '');\n    };\n}\n/**\n * xmlJsonjson\n */\nfunction convertXmlToNormal(xmlJson) {\n    var e_3, _a;\n    var json = {};\n    try {\n        for (var _b = __values(Object.entries(xmlJson)), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var _d = __read(_c.value, 2), key = _d[0], value = _d[1];\n            if (key.indexOf('-') === 0) {\n                json[key.substring(1)] = handleAttributes(value);\n            }\n            else if (typeof value === 'string') {\n                json[key] = value;\n            }\n            else if (Object.prototype.toString.call(value) === '[object Object]') {\n                json[key] = convertXmlToNormal(value);\n            }\n            else if (Array.isArray(value)) {\n                // contain the process of array\n                json[key] = value.map(function (v) { return convertXmlToNormal(v); });\n            }\n            else {\n                json[key] = value;\n            }\n        }\n    }\n    catch (e_3_1) { e_3 = { error: e_3_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_3) throw e_3.error; }\n    }\n    return json;\n}\n/**\n * bpmn process\n * examples/bpmn.json\n * bpmnxmljson\n * 1) xmljson'-'\n * 2json\n * 3json\n */\nfunction convertLf2ProcessData(bpmnData, data, other) {\n    var _a;\n    var nodeIdMap = new Map();\n    var xmlJsonData = convertNormalToXml(other)(data);\n    xmlJsonData.nodes.forEach(function (node) {\n        var nodeId = node[\"-id\"], nodeType = node[\"-type\"], text = node.text, children = node.children, otherProps = __rest(node, ['-id', '-type', \"text\", \"children\"]);\n        var processNode = { '-id': nodeId };\n        if (text === null || text === void 0 ? void 0 : text['-value']) {\n            processNode['-name'] = text['-value'];\n        }\n        if (otherProps['-json']) {\n            processNode['-json'] = otherProps['-json'];\n        }\n        if (otherProps['-properties']) {\n            Object.assign(processNode, otherProps['-properties']);\n        }\n        if (children) {\n            processNode.children = children;\n        }\n        // (bpmnData[nodeType] ??= []).push(processNode);\n        if (!bpmnData[nodeType]) {\n            bpmnData[nodeType] = [];\n        }\n        bpmnData[nodeType].push(processNode);\n        nodeIdMap.set(nodeId, processNode);\n    });\n    var sequenceFlow = xmlJsonData.edges.map(function (edge) {\n        var id = edge[\"-id\"], \n        // '-type': type,\n        sourceNodeId = edge[\"-sourceNodeId\"], targetNodeId = edge[\"-targetNodeId\"], text = edge.text, otherProps = __rest(edge, ['-id', '-sourceNodeId', '-targetNodeId', \"text\"]);\n        var targetNode = nodeIdMap.get(targetNodeId);\n        // (targetNode['bpmn:incoming'] ??= []).push(id);\n        if (!targetNode['bpmn:incoming']) {\n            targetNode['bpmn:incoming'] = [];\n        }\n        targetNode['bpmn:incoming'].push(id);\n        var edgeConfig = {\n            '-id': id,\n            '-sourceRef': sourceNodeId,\n            '-targetRef': targetNodeId,\n        };\n        if (text === null || text === void 0 ? void 0 : text['-value']) {\n            edgeConfig['-name'] = text['-value'];\n        }\n        if (otherProps['-json']) {\n            edgeConfig['-json'] = otherProps['-json'];\n        }\n        if (otherProps['-properties']) {\n            Object.assign(edgeConfig, otherProps['-properties']);\n        }\n        return edgeConfig;\n    });\n    // @see https://github.com/didi/LogicFlow/issues/325\n    // incomingoutgoing\n    data.edges.forEach(function (_a) {\n        var sourceNodeId = _a.sourceNodeId, id = _a.id;\n        var sourceNode = nodeIdMap.get(sourceNodeId);\n        // (sourceNode['bpmn:outgoing'] ??= []).push(id);\n        if (!sourceNode['bpmn:outgoing']) {\n            sourceNode['bpmn:outgoing'] = [];\n        }\n        sourceNode['bpmn:outgoing'].push(id);\n    });\n    (_a = bpmnData['bpmn:subProcess']) === null || _a === void 0 ? void 0 : _a.forEach(function (item) {\n        var setMap = {\n            'bpmn:incoming': new Set(),\n            'bpmn:outgoing': new Set(),\n        };\n        var edgesInSubProcess = [];\n        item.children.forEach(function (child) {\n            var _a;\n            var target = nodeIdMap.get(child['-id']);\n            ['bpmn:incoming', 'bpmn:outgoing'].forEach(function (key) {\n                target[key] &&\n                    target[key].forEach(function (value) {\n                        setMap[key].add(value);\n                    });\n            });\n            var index = (_a = bpmnData[child['-type']]) === null || _a === void 0 ? void 0 : _a.findIndex(function (_item) { return _item['-id'] === child['-id']; });\n            if (index >= 0) {\n                bpmnData[child['-type']].splice(index, 1);\n            }\n            nodeIdMap.delete(child['-id']);\n            // (item[child['-type']] ??= []).push(target);\n            if (!item[child['-type']]) {\n                item[child['-type']] = [];\n            }\n            item[child['-type']].push(target);\n        });\n        var incomingSet = setMap[\"bpmn:incoming\"], outgoingSet = setMap[\"bpmn:outgoing\"];\n        outgoingSet.forEach(function (value) {\n            incomingSet.has(value) && edgesInSubProcess.push(value);\n        });\n        var _loop_1 = function (i) {\n            var index = sequenceFlow.findIndex(function (item) { return item['-id'] === edgesInSubProcess[i]; });\n            if (index >= 0) {\n                // (item['bpmn:sequenceFlow'] ??= []).push(sequenceFlow[index]);\n                if (!item['bpmn:sequenceFlow']) {\n                    item['bpmn:sequenceFlow'] = [];\n                }\n                item['bpmn:sequenceFlow'].push(sequenceFlow[index]);\n                sequenceFlow.splice(index, 1);\n            }\n            else {\n                i++;\n            }\n            out_i_1 = i;\n        };\n        var out_i_1;\n        for (var i = 0; i < edgesInSubProcess.length;) {\n            _loop_1(i);\n            i = out_i_1;\n        }\n        delete item.children;\n    });\n    bpmnData[BpmnElements.FLOW] = sequenceFlow;\n    return bpmnData;\n}\n/**\n * adapterOut bpmn diagram\n */\nfunction convertLf2DiagramData(bpmnDiagramData, data) {\n    bpmnDiagramData['bpmndi:BPMNEdge'] = data.edges.map(function (edge) {\n        var _a;\n        var edgeId = edge.id;\n        var pointsList = edge.pointsList.map(function (_a) {\n            var x = _a.x, y = _a.y;\n            return ({\n                '-x': x,\n                '-y': y,\n            });\n        });\n        var diagramData = {\n            '-id': \"\".concat(edgeId, \"_di\"),\n            '-bpmnElement': edgeId,\n            'di:waypoint': pointsList,\n        };\n        if ((_a = edge.text) === null || _a === void 0 ? void 0 : _a.value) {\n            diagramData['bpmndi:BPMNLabel'] = {\n                'dc:Bounds': {\n                    '-x': edge.text.x - (edge.text.value.length * 10) / 2,\n                    '-y': edge.text.y - 7,\n                    '-width': edge.text.value.length * 10,\n                    '-height': 14,\n                },\n            };\n        }\n        return diagramData;\n    });\n    bpmnDiagramData['bpmndi:BPMNShape'] = data.nodes.map(function (node) {\n        var _a;\n        var nodeId = node.id;\n        var width = 100;\n        var height = 80;\n        var x = node.x, y = node.y;\n        // bpmnLogicFlow\n        var shapeConfig = BPMNBaseAdapter.shapeConfigMap.get(node.type);\n        if (shapeConfig) {\n            width = shapeConfig.width;\n            height = shapeConfig.height;\n        }\n        x -= width / 2;\n        y -= height / 2;\n        var diagramData = {\n            '-id': \"\".concat(nodeId, \"_di\"),\n            '-bpmnElement': nodeId,\n            'dc:Bounds': {\n                '-x': x,\n                '-y': y,\n                '-width': width,\n                '-height': height,\n            },\n        };\n        if ((_a = node.text) === null || _a === void 0 ? void 0 : _a.value) {\n            diagramData['bpmndi:BPMNLabel'] = {\n                'dc:Bounds': {\n                    '-x': node.text.x - (node.text.value.length * 10) / 2,\n                    '-y': node.text.y - 7,\n                    '-width': node.text.value.length * 10,\n                    '-height': 14,\n                },\n            };\n        }\n        return diagramData;\n    });\n}\nvar ignoreType = ['bpmn:incoming', 'bpmn:outgoing'];\n/**\n * bpmnLogicFlow\n */\nfunction convertBpmn2LfData(bpmnData, other) {\n    var nodes = [];\n    var edges = [];\n    var eleMap = new Map();\n    var _a = other !== null && other !== void 0 ? other : {}, transformer = _a.transformer, excludeFields = _a.excludeFields;\n    var excludeFieldsSet = {\n        in: new Set(__spreadArray(__spreadArray([], __read(defaultExcludeFields.in), false), __read(((excludeFields === null || excludeFields === void 0 ? void 0 : excludeFields.in) || [])), false)),\n        out: new Set(__spreadArray(__spreadArray([], __read(defaultExcludeFields.out), false), __read(((excludeFields === null || excludeFields === void 0 ? void 0 : excludeFields.out) || [])), false)),\n    };\n    defaultTransformer = mergeInNOutObject(defaultTransformer, transformer);\n    var definitions = bpmnData['bpmn:definitions'];\n    if (definitions) {\n        var process_1 = definitions['bpmn:process'];\n        (function (data, callbacks) {\n            callbacks.forEach(function (callback) {\n                try {\n                    Object.keys(data).forEach(function (key) {\n                        try {\n                            callback(key);\n                        }\n                        catch (error) {\n                            console.error(error);\n                        }\n                    });\n                }\n                catch (error) {\n                    console.error(error);\n                }\n            });\n        })(process_1, [\n            function (key) {\n                // bpmn:subProcessprocess\n                function subProcessProcessing(data) {\n                    // data['-children'] ??= [];\n                    if (!data['-children']) {\n                        data['-children'] = [];\n                    }\n                    Object.keys(data).forEach(function (key) {\n                        var _a;\n                        if (key.indexOf('bpmn:') === 0 && !ignoreType.includes(key)) {\n                            // process[key] ??= [];\n                            if (!process_1[key]) {\n                                process_1[key] = [];\n                            }\n                            !Array.isArray(process_1[key]) && (process_1[key] = [process_1[key]]);\n                            Array.isArray(data[key])\n                                ? (_a = process_1[key]).push.apply(_a, __spreadArray([], __read(data[key]), false)) : process_1[key].push(data[key]);\n                            if (Array.isArray(data[key])) {\n                                data[key].forEach(function (item) {\n                                    !key.includes('Flow') && data['-children'].push(item['-id']);\n                                });\n                            }\n                            else {\n                                !key.includes('Flow') &&\n                                    data['-children'].push(data[key]['-id']);\n                            }\n                            delete data[key];\n                        }\n                    });\n                }\n                if (key === 'bpmn:subProcess') {\n                    var data = process_1[key];\n                    if (Array.isArray(data)) {\n                        data.forEach(function (item) {\n                            key === 'bpmn:subProcess' && subProcessProcessing(item);\n                        });\n                    }\n                    else {\n                        subProcessProcessing(data);\n                    }\n                }\n            },\n            function (key) {\n                // , definitionTransformer\n                var fn = function (obj) {\n                    Object.keys(obj).forEach(function (key) {\n                        var _a, _b;\n                        if (key.includes('bpmn:')) {\n                            var props_1 = {};\n                            if (defaultTransformer[key] && defaultTransformer[key].in) {\n                                props_1 = (_b = (_a = defaultTransformer[key]).in) === null || _b === void 0 ? void 0 : _b.call(_a, key, _.cloneDeep(obj[key]));\n                                delete obj[key];\n                            }\n                            else {\n                                func(obj[key]);\n                            }\n                            var keys = void 0;\n                            if ((keys = Reflect.ownKeys(props_1)).length > 0) {\n                                keys.forEach(function (key) {\n                                    Reflect.set(obj, key, props_1[key]);\n                                });\n                            }\n                        }\n                    });\n                };\n                function func(data) {\n                    eleMap.set(data['-id'], data);\n                    if (Array.isArray(data)) {\n                        data.forEach(function (item) {\n                            func(item);\n                        });\n                    }\n                    else if (typeof data === 'object') {\n                        fn(data);\n                    }\n                }\n                func(process_1[key]);\n            },\n            function (key) {\n                if (key.indexOf('bpmn:') === 0) {\n                    var value = process_1[key];\n                    if (key === 'bpmn:sequenceFlow') {\n                        var bpmnEdges = definitions['bpmndi:BPMNDiagram']['bpmndi:BPMNPlane']['bpmndi:BPMNEdge'];\n                        edges = getLfEdges(value, bpmnEdges);\n                    }\n                    else {\n                        var shapes = definitions['bpmndi:BPMNDiagram']['bpmndi:BPMNPlane']['bpmndi:BPMNShape'];\n                        if (key === 'bpmn:boundaryEvent') {\n                            var data = process_1[key];\n                            var fn_1 = function (item) {\n                                var attachedToRef = item[\"-attachedToRef\"];\n                                var attachedToNode = eleMap.get(attachedToRef);\n                                // attachedToNode['-boundaryEvents'] ??= [];\n                                if (!attachedToNode['-boundaryEvents']) {\n                                    attachedToNode['-boundaryEvents'] = [];\n                                }\n                                attachedToNode['-boundaryEvents'].push(item['-id']);\n                            };\n                            if (Array.isArray(data)) {\n                                data.forEach(function (item) {\n                                    fn_1(item);\n                                });\n                            }\n                            else {\n                                fn_1(data);\n                            }\n                        }\n                        nodes = nodes.concat(getLfNodes(value, shapes, key));\n                    }\n                }\n            },\n        ]);\n    }\n    var ignoreFields = function (obj, filterSet, path) {\n        Object.keys(obj).forEach(function (key) {\n            var tmpPath = path ? \"\".concat(path, \".\").concat(key) : key;\n            if (filterSet.has(tmpPath)) {\n                delete obj[key];\n            }\n            else if (typeof obj[key] === 'object') {\n                ignoreFields(obj[key], filterSet, tmpPath);\n            }\n        });\n    };\n    nodes.forEach(function (node) {\n        var _a, _b;\n        if ((_a = other === null || other === void 0 ? void 0 : other.mapping) === null || _a === void 0 ? void 0 : _a.in) {\n            var mapping = (_b = other === null || other === void 0 ? void 0 : other.mapping) === null || _b === void 0 ? void 0 : _b.in;\n            var type = node.type;\n            if (mapping[type]) {\n                node.type = mapping[type];\n            }\n        }\n        ignoreFields(node, excludeFieldsSet.in, '');\n        // Object.keys(node.properties).forEach((key) => {\n        //   excludeFieldsSet.in.has(key) && delete node.properties[key];\n        // });\n    });\n    edges.forEach(function (edge) {\n        var _a, _b;\n        if ((_a = other === null || other === void 0 ? void 0 : other.mapping) === null || _a === void 0 ? void 0 : _a.in) {\n            var mapping = (_b = other === null || other === void 0 ? void 0 : other.mapping) === null || _b === void 0 ? void 0 : _b.in;\n            var type = edge.type;\n            if (mapping[type]) {\n                edge.type = mapping[type];\n            }\n        }\n        ignoreFields(edge, excludeFieldsSet.in, '');\n        // Object.keys(edge.properties).forEach((key) => {\n        //   excludeFieldsSet.in.has(key) && delete edge.properties[key];\n        // });\n    });\n    return {\n        nodes: nodes,\n        edges: edges,\n    };\n}\nfunction getLfNodes(value, shapes, key) {\n    var nodes = [];\n    if (Array.isArray(value)) {\n        // \n        value.forEach(function (val) {\n            var shapeValue;\n            if (Array.isArray(shapes)) {\n                shapeValue = shapes.find(function (shape) { return shape['-bpmnElement'] === val['-id']; });\n            }\n            else {\n                shapeValue = shapes;\n            }\n            var node = getNodeConfig(shapeValue, key, val);\n            nodes.push(node);\n        });\n    }\n    else {\n        var shapeValue = void 0;\n        if (Array.isArray(shapes)) {\n            shapeValue = shapes.find(function (shape) { return shape['-bpmnElement'] === value['-id']; });\n        }\n        else {\n            shapeValue = shapes;\n        }\n        var node = getNodeConfig(shapeValue, key, value);\n        nodes.push(node);\n    }\n    return nodes;\n}\nfunction getNodeConfig(shapeValue, type, processValue) {\n    var x = Number(shapeValue['dc:Bounds']['-x']);\n    var y = Number(shapeValue['dc:Bounds']['-y']);\n    var children = processValue[\"-children\"];\n    var name = processValue['-name'];\n    var shapeConfig = BPMNBaseAdapter.shapeConfigMap.get(type);\n    if (shapeConfig) {\n        x += shapeConfig.width / 2;\n        y += shapeConfig.height / 2;\n    }\n    var properties = {};\n    // properties\n    Object.entries(processValue).forEach(function (_a) {\n        var _b = __read(_a, 2), key = _b[0], value = _b[1];\n        if (!defaultAttrsForInput.includes(key)) {\n            properties[key] = value;\n        }\n    });\n    properties = convertXmlToNormal(properties);\n    var text;\n    if (name) {\n        text = {\n            x: x,\n            y: y,\n            value: name,\n        };\n        // \n        if (shapeValue['bpmndi:BPMNLabel'] &&\n            shapeValue['bpmndi:BPMNLabel']['dc:Bounds']) {\n            var textBounds = shapeValue['bpmndi:BPMNLabel']['dc:Bounds'];\n            text.x = Number(textBounds['-x']) + Number(textBounds['-width']) / 2;\n            text.y = Number(textBounds['-y']) + Number(textBounds['-height']) / 2;\n        }\n    }\n    var nodeConfig = {\n        id: shapeValue['-bpmnElement'],\n        type: type,\n        x: x,\n        y: y,\n        properties: properties,\n    };\n    children && (nodeConfig.children = children);\n    if (text) {\n        nodeConfig.text = text;\n    }\n    return nodeConfig;\n}\nfunction getLfEdges(value, bpmnEdges) {\n    var edges = [];\n    if (Array.isArray(value)) {\n        value.forEach(function (val) {\n            var edgeValue;\n            if (Array.isArray(bpmnEdges)) {\n                edgeValue = bpmnEdges.find(function (edge) { return edge['-bpmnElement'] === val['-id']; });\n            }\n            else {\n                edgeValue = bpmnEdges;\n            }\n            edges.push(getEdgeConfig(edgeValue, val));\n        });\n    }\n    else {\n        var edgeValue = void 0;\n        if (Array.isArray(bpmnEdges)) {\n            edgeValue = bpmnEdges.find(function (edge) { return edge['-bpmnElement'] === value['-id']; });\n        }\n        else {\n            edgeValue = bpmnEdges;\n        }\n        edges.push(getEdgeConfig(edgeValue, value));\n    }\n    return edges;\n}\nfunction getEdgeConfig(edgeValue, processValue) {\n    var text;\n    var textVal = processValue['-name'] ? \"\".concat(processValue['-name']) : '';\n    if (textVal) {\n        var textBounds = edgeValue['bpmndi:BPMNLabel']['dc:Bounds'];\n        // \n        var textLength_1 = 0;\n        textVal.split('\\n').forEach(function (textSpan) {\n            if (textLength_1 < textSpan.length) {\n                textLength_1 = textSpan.length;\n            }\n        });\n        text = {\n            value: textVal,\n            x: Number(textBounds['-x']) + (textLength_1 * 10) / 2,\n            y: Number(textBounds['-y']) + 7,\n        };\n    }\n    var properties = {};\n    // properties\n    Object.entries(processValue).forEach(function (_a) {\n        var _b = __read(_a, 2), key = _b[0], value = _b[1];\n        if (!defaultAttrsForInput.includes(key)) {\n            properties[key] = value;\n        }\n    });\n    properties = convertXmlToNormal(properties);\n    var pointsList = edgeValue['di:waypoint'].map(function (point) { return ({\n        x: Number(point['-x']),\n        y: Number(point['-y']),\n    }); });\n    var edge = {\n        id: processValue['-id'],\n        type: BpmnElements.FLOW,\n        pointsList: pointsList,\n        sourceNodeId: processValue['-sourceRef'],\n        targetNodeId: processValue['-targetRef'],\n        properties: properties,\n    };\n    if (text) {\n        edge.text = text;\n    }\n    return edge;\n}\nvar BPMNBaseAdapter = /** @class */ (function () {\n    function BPMNBaseAdapter(_a) {\n        var lf = _a.lf;\n        var _this = this;\n        /**\n         * @param retainedAttrsFields?: string[] ()retainedFielddefaultRetainedFields:\n         * [\"properties\", \"startPoint\", \"endPoint\", \"pointsList\"]\n         * \n         * @param excludeFields excludeFieldsdefaultExcludeFields\n         * @param transformer \n         */\n        this.adapterOut = function (data, other) {\n            var _a, _b;\n            var bpmnProcessData = __assign({}, _this.processAttributes);\n            convertLf2ProcessData(bpmnProcessData, data, other);\n            var bpmnDiagramData = {\n                '-id': 'BPMNPlane_1',\n                '-bpmnElement': bpmnProcessData['-id'],\n            };\n            convertLf2DiagramData(bpmnDiagramData, data);\n            var definitions = _this.definitionAttributes;\n            definitions['bpmn:process'] = bpmnProcessData;\n            definitions['bpmndi:BPMNDiagram'] = {\n                '-id': 'BPMNDiagram_1',\n                'bpmndi:BPMNPlane': bpmnDiagramData,\n            };\n            var bpmnData = {\n                'bpmn:definitions': definitions,\n            };\n            if ((_a = other === null || other === void 0 ? void 0 : other.mapping) === null || _a === void 0 ? void 0 : _a.out) {\n                var mapping_1 = (_b = other === null || other === void 0 ? void 0 : other.mapping) === null || _b === void 0 ? void 0 : _b.out;\n                var nameMapping_1 = function (obj) {\n                    if (Array.isArray(obj)) {\n                        obj.forEach(function (item) { return nameMapping_1(item); });\n                    }\n                    if (typeof obj === 'object') {\n                        Object.keys(obj).forEach(function (key) {\n                            var mappingName;\n                            if ((mappingName = mapping_1[key])) {\n                                obj[mappingName] = _.cloneDeep(obj[key]);\n                                delete obj[key];\n                                nameMapping_1(obj[mappingName]);\n                            }\n                            else {\n                                nameMapping_1(obj[key]);\n                            }\n                        });\n                    }\n                };\n                nameMapping_1(bpmnData);\n            }\n            return bpmnData;\n        };\n        this.adapterIn = function (bpmnData, other) {\n            if (bpmnData) {\n                return convertBpmn2LfData(bpmnData, other);\n            }\n        };\n        lf.adapterIn = this.adapterIn;\n        lf.adapterOut = this.adapterOut;\n        this.processAttributes = {\n            '-isExecutable': 'true',\n            '-id': 'Process',\n        };\n        this.definitionAttributes = {\n            '-id': 'Definitions',\n            '-xmlns:xsi': 'http://www.w3.org/2001/XMLSchema-instance',\n            '-xmlns:bpmn': 'http://www.omg.org/spec/BPMN/20100524/MODEL',\n            '-xmlns:bpmndi': 'http://www.omg.org/spec/BPMN/20100524/DI',\n            '-xmlns:dc': 'http://www.omg.org/spec/DD/20100524/DC',\n            '-xmlns:di': 'http://www.omg.org/spec/DD/20100524/DI',\n            '-targetNamespace': 'http://logic-flow.org',\n            '-exporter': 'logicflow',\n            '-exporterVersion': '1.2.10',\n        };\n    }\n    BPMNBaseAdapter.prototype.setCustomShape = function (key, val) {\n        BPMNBaseAdapter.shapeConfigMap.set(key, val);\n    };\n    BPMNBaseAdapter.pluginName = 'bpmn-adapter';\n    BPMNBaseAdapter.shapeConfigMap = new Map();\n    return BPMNBaseAdapter;\n}());\nBPMNBaseAdapter.shapeConfigMap.set(BpmnElements.START, {\n    width: StartEventConfig.width,\n    height: StartEventConfig.height,\n});\nBPMNBaseAdapter.shapeConfigMap.set(BpmnElements.END, {\n    width: EndEventConfig.width,\n    height: EndEventConfig.height,\n});\nBPMNBaseAdapter.shapeConfigMap.set(BpmnElements.INTERMEDIATE_CATCH, {\n    width: IntermediateEventConfig.width,\n    height: IntermediateEventConfig.height,\n});\nBPMNBaseAdapter.shapeConfigMap.set(BpmnElements.INTERMEDIATE_THROW, {\n    width: IntermediateEventConfig.width,\n    height: IntermediateEventConfig.height,\n});\nBPMNBaseAdapter.shapeConfigMap.set(BpmnElements.BOUNDARY, {\n    width: BoundaryEventConfig.width,\n    height: BoundaryEventConfig.height,\n});\nBPMNBaseAdapter.shapeConfigMap.set(BpmnElements.PARALLEL_GATEWAY, {\n    width: ParallelGatewayConfig.width,\n    height: ParallelGatewayConfig.height,\n});\nBPMNBaseAdapter.shapeConfigMap.set(BpmnElements.INCLUSIVE_GATEWAY, {\n    width: InclusiveGatewayConfig.width,\n    height: InclusiveGatewayConfig.height,\n});\nBPMNBaseAdapter.shapeConfigMap.set(BpmnElements.EXCLUSIVE_GATEWAY, {\n    width: ExclusiveGatewayConfig.width,\n    height: ExclusiveGatewayConfig.height,\n});\nBPMNBaseAdapter.shapeConfigMap.set(BpmnElements.SYSTEM, {\n    width: ServiceTaskConfig.width,\n    height: ServiceTaskConfig.height,\n});\nBPMNBaseAdapter.shapeConfigMap.set(BpmnElements.USER, {\n    width: UserTaskConfig.width,\n    height: UserTaskConfig.height,\n});\nBPMNBaseAdapter.shapeConfigMap.set(BpmnElements.SUBPROCESS, {\n    width: SubProcessConfig.width,\n    height: SubProcessConfig.height,\n});\nvar BPMNAdapter = /** @class */ (function (_super) {\n    __extends(BPMNAdapter, _super);\n    function BPMNAdapter(data) {\n        var _this = _super.call(this, data) || this;\n        _this.adapterXmlIn = function (bpmnData) {\n            var json = lfXml2Json(bpmnData);\n            return _this.adapterIn(json, _this.props);\n        };\n        _this.adapterXmlOut = function (data) {\n            var outData = _this.adapterOut(data, _this.props);\n            return lfJson2Xml(outData);\n        };\n        var lf = data.lf, props = data.props;\n        lf.adapterIn = _this.adapterXmlIn;\n        lf.adapterOut = _this.adapterXmlOut;\n        _this.props = props;\n        return _this;\n    }\n    BPMNAdapter.pluginName = 'BPMNAdapter';\n    return BPMNAdapter;\n}(BPMNBaseAdapter));\nexport { BPMNBaseAdapter, BPMNAdapter, convertNormalToXml, convertXmlToNormal };\nexport default BPMNAdapter;\n","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { getNodeOutline, getEdgeOutline, ModelType, isInSegment, getBezierPoints, points2PointsList, getBBoxOfPoints, } from '@logicflow/core';\nimport { head, isEmpty, last, min } from 'lodash-es';\nimport { calcTwoPointsDistance, getPointOnBezier } from './algorithm';\n//    \n// : \n//\n// 1.\t (x1, y1) w1 h1\n// 2.\t (x2, y2) w2 h2\n// 3.\t (px1, py1)\n//\n// \n//  (px2, py2)\n//\n// \n// 1.\t (px1, py1) \n// relativeX = (px1 - x1) / w1\n// relativeY = (py1 - y1) / h1\n//\n// 2.\t\n// px2 = x2 + relativeX * w2\n// py2 = y2 + relativeY * h2\nexport function calcPointAfterResize(origin, scaled, point) {\n    var x1 = origin.x, y1 = origin.y, w1 = origin.width, h1 = origin.height;\n    var x2 = scaled.x, y2 = scaled.y, w2 = scaled.width, h2 = scaled.height;\n    var px1 = point.x, py1 = point.y;\n    // \n    var relativeX = (px1 - x1) / w1;\n    var relativeY = (py1 - y1) / h1;\n    // \n    var px2 = x2 + relativeX * w2;\n    var py2 = y2 + relativeY * h2;\n    return { x: px2, y: py2 };\n}\n//    \n//  x1 = (x1, y1)  x2 = (x2, y2)   \n//\n// \n// \t1.   x2    x1  \n//  x' = x2 - x1\n//  y' = y2 - y1\n// 2.\t\n//  x'' = x' * cos() - y' * sin()\n//  y'' = x' * sin() + y' * cos()\n// 3.\t\n//  x_new = x'' + x1\n//  y_new = y'' + y1\n//\n//   (x_new, y_new)  \n//\n//  x_new = (x2 - x1) * cos() - (y2 - y1) * sin() + x1\n//  y_new = (x2 - x1) * sin() + (y2 - y1) * cos() + y1\n//\n//  \n//\n// rad = deg *  / 180\nexport function rotatePointAroundCenter(target, center, radian) {\n    // Rotate point (x2, y2) around point (x1, y1) by theta degrees.\n    //\n    // Parameters:\n    //   x1, y1: Coordinates of the center point.\n    //   x2, y2: Coordinates of the point to rotate.\n    //   theta_degrees: Angle in degrees to rotate the point.\n    //\n    // Returns:\n    //   Tuple of new coordinates (x_new, y_new) after rotation.\n    var x1 = center.x, y1 = center.y;\n    var x2 = target.x, y2 = target.y;\n    // Translate point to origin\n    var xPrime = x2 - x1;\n    var yPrime = y2 - y1;\n    // Rotate point\n    var xDoublePrime = xPrime * Math.cos(radian) - yPrime * Math.sin(radian);\n    var yDoublePrime = xPrime * Math.sin(radian) + yPrime * Math.cos(radian);\n    // Translate point back\n    var xNew = xDoublePrime + x1;\n    var yNew = yDoublePrime + y1;\n    return {\n        x: xNew,\n        y: yNew,\n    };\n}\n/** Edge  */\n/**\n *  or  outline\n * @param point  Label \n * @param element \n */\nexport var getPointOffsetOfElementOutline = function (point, element) {\n    var baseType = element.BaseType;\n    var bboxInfo = baseType === 'node' ? getNodeOutline(element) : getEdgeOutline(element);\n    if (bboxInfo) {\n        var x = point.x, y = point.y;\n        var minX = bboxInfo.x, minY = bboxInfo.y, maxX = bboxInfo.x1, maxY = bboxInfo.y1;\n        var xDeltaPercent = 0.5;\n        var yDeltaPercent = 0.5;\n        var xDeltaDistance = x - maxX;\n        var yDeltaDistance = y - maxY;\n        /**\n         * \n         * \n         * \n         */\n        if (minX && maxX && minX < x && x < maxX) {\n            xDeltaPercent = min([(x - minX) / (maxX - minX), 1]);\n        }\n        else if (x <= minX) {\n            xDeltaDistance = x - minX;\n        }\n        else {\n            xDeltaDistance = x - maxX;\n        }\n        if (minY && maxY && minY < y && y < maxY) {\n            yDeltaPercent = min([(y - minY) / (maxY - minY), 1]);\n        }\n        else if (y <= minY) {\n            yDeltaDistance = y - minY;\n        }\n        else {\n            yDeltaDistance = y - maxY;\n        }\n        return {\n            xDeltaPercent: xDeltaPercent,\n            yDeltaPercent: yDeltaPercent,\n            xDeltaDistance: xDeltaDistance,\n            yDeltaDistance: yDeltaDistance,\n        };\n    }\n};\n/**\n * \n * @param point \n * @param points \n */\nvar isPointOnPolyline = function (point, points) {\n    for (var i = 0; i < points.length - 1; i++) {\n        var start = points[i];\n        var end = points[i + 1];\n        if (isInSegment(point, start, end)) {\n            return true;\n        }\n    }\n    return false;\n};\n/**\n *   P = (x_0, y_0)    A = (x_1, y_1)    B = (x_2, y_2) \n * 1.\t  AB    AP \n * 2.\t  AB  \n * 3.\t  P    AB    Q \n * 4.\t  Q    AB  \n * 5.\t  Q  \n *\n * \n * @param point\n * @param start\n * @param end\n */\nexport var pointToSegmentDistance = function (point, start, end) {\n    var px = point.x, py = point.y;\n    var sx = start.x, sy = start.y;\n    var ex = end.x, ey = end.y;\n    var SEx = ex - sx;\n    var SEy = ey - sy;\n    var SPx = px - sx;\n    var SPy = py - sy;\n    var SE_SE = Math.pow(SEx, 2) + Math.pow(SEy, 2);\n    var SP_SE = SPx * SEx + SPy * SEy;\n    var t = SP_SE / SE_SE;\n    if (t < 0)\n        t = 0;\n    if (t > 1)\n        t = 1;\n    var qx = sx + t * SEx;\n    var qy = sy + t * SEy;\n    return Math.sqrt(Math.pow((px - qx), 2) + Math.pow((py - qy), 2));\n};\nexport var calcPolylineTotalLength = function (points) {\n    var length = 0;\n    for (var i = 0; i < points.length - 1; i++) {\n        var start = points[i];\n        var end = points[i + 1];\n        length += calcTwoPointsDistance(start, end);\n    }\n    return length;\n};\n/**\n * TODO: \n * @param point\n * @param points\n */\nexport var pointPositionRatio = function (point, points) {\n    var length = 0;\n    for (var i = 0; i < points.length - 1; i++) {\n        var start = points[i];\n        var end = points[i + 1];\n        var segmentLength = calcTwoPointsDistance(start, end);\n        if (pointToSegmentDistance(point, start, end) <= 20) {\n            var d1 = calcTwoPointsDistance(point, start);\n            length += d1;\n            var totalLength = calcPolylineTotalLength(points);\n            // \n            return Math.round((length / totalLength) * 10) / 10;\n        }\n        else {\n            length += segmentLength;\n        }\n    }\n    return 0;\n};\n/**\n * \n * @param point\n * @param edge\n * @param step\n */\nexport var calcClosestPointOnBezierEdge = function (point, edge, step) {\n    if (step === void 0) { step = 5; }\n    var minDistance = Infinity;\n    var closestPoint = point;\n    var pointsList = getBezierPoints(edge.path);\n    if (isEmpty(pointsList))\n        return closestPoint;\n    var _a = __read(pointsList, 4), start = _a[0], sNext = _a[1], ePre = _a[2], end = _a[3];\n    for (var i = 0; i <= step; i++) {\n        var t = i / step;\n        var bezierPoint = getPointOnBezier(t, start, sNext, ePre, end);\n        var distance = calcTwoPointsDistance(point, bezierPoint);\n        if (distance < minDistance) {\n            minDistance = distance;\n            closestPoint = bezierPoint;\n        }\n    }\n    return closestPoint;\n};\nexport var getNewPointAtDistance = function (points, ratio) {\n    var totalLength = calcPolylineTotalLength(points);\n    var targetLength = totalLength * ratio;\n    var length = 0;\n    for (var i = 0; i < points.length - 1; i++) {\n        var start = points[i];\n        var end = points[i + 1];\n        var segmentLength = calcTwoPointsDistance(start, end);\n        if (length + segmentLength >= targetLength) {\n            var ratio_1 = (targetLength - length) / segmentLength;\n            return {\n                x: start.x + (end.x - start.x) * ratio_1,\n                y: start.y + (end.y - start.y) * ratio_1,\n            };\n        }\n        else {\n            length += segmentLength;\n        }\n    }\n    return last(points);\n};\n/**\n *  PolylineEdge  LineEdge \n * @param point\n * @param edge\n */\nexport var calcLabelPositionOnPolyline = function (point, edge) {\n    var _a, _b;\n    var points = points2PointsList(edge.points);\n    if (points.length === 0) {\n        points = [edge.startPoint, edge.endPoint];\n    }\n    var _c = (_a = getPointOffsetOfElementOutline(point, edge)) !== null && _a !== void 0 ? _a : {}, xDeltaPercent = _c.xDeltaPercent, yDeltaPercent = _c.yDeltaPercent, yDeltaDistance = _c.yDeltaDistance, xDeltaDistance = _c.xDeltaDistance;\n    var isPointOnEdge = isPointOnPolyline(point, points);\n    var ratio = pointPositionRatio(point, points);\n    var start = head(points);\n    var end = last(points);\n    // x  y\n    var _d = getBBoxOfPoints(points, 10), minX = _d.minX, minY = _d.minY, maxX = _d.maxX, maxY = _d.maxY;\n    if (!start || !end)\n        return point;\n    if (xDeltaPercent && yDeltaPercent) {\n        var positByPercent = {\n            x: minX + (maxX - minX) * xDeltaPercent,\n            y: minY + (maxY - minY) * yDeltaPercent,\n        };\n        return isPointOnEdge\n            ? ((_b = getNewPointAtDistance(points, ratio)) !== null && _b !== void 0 ? _b : point) // \n            : positByPercent;\n    }\n    // \n    if (xDeltaPercent && yDeltaDistance) {\n        return {\n            x: minX + (maxX - minX) * xDeltaPercent,\n            y: yDeltaDistance < 0 ? minY + yDeltaDistance : maxY + yDeltaDistance,\n        };\n    }\n    // \n    if (yDeltaPercent && xDeltaDistance) {\n        return {\n            x: xDeltaDistance < 0 ? minX + xDeltaDistance : maxX + xDeltaDistance,\n            y: minY + (maxY - minY) * yDeltaPercent,\n        };\n    }\n    // ///\n    if (xDeltaDistance && yDeltaDistance) {\n        return {\n            x: xDeltaDistance < 0 ? minX + xDeltaDistance : maxX + xDeltaDistance,\n            y: yDeltaDistance < 0 ? minY + yDeltaDistance : maxY + yDeltaDistance,\n        };\n    }\n    // \n    return point;\n};\n/**\n *  Label  Label \n * @param label LabelConfig ->  Label \n * @param edge\n */\nexport var getLabelPositionOfLine = function (label, edge) {\n    var x = label.x, y = label.y;\n    if (edge.modelType === ModelType.BEZIER_EDGE) {\n        return calcClosestPointOnBezierEdge({ x: x, y: y }, edge);\n    }\n    return calcLabelPositionOnPolyline({ x: x, y: y }, edge);\n};\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { h, RectNode, handleResize, } from '@logicflow/core';\nimport { forEach } from 'lodash-es';\nimport { rotatePointAroundCenter } from '../tools/label/utils';\nvar DynamicGroupNode = /** @class */ (function (_super) {\n    __extends(DynamicGroupNode, _super);\n    function DynamicGroupNode() {\n        var _this = _super.apply(this, __spreadArray([], __read(arguments), false)) || this;\n        _this.childrenPositionMap = new Map();\n        _this.onNodeRotate = function (_a) {\n            var model = _a.model;\n            var _b = _this.props, curGroup = _b.model, graphModel = _b.graphModel;\n            var transformWithContainer = curGroup.transformWithContainer, isRestrict = curGroup.isRestrict;\n            var childrenPositionMap = _this.childrenPositionMap;\n            if (!transformWithContainer || isRestrict) {\n                // isRestrictmodel resize\n                // parent:resize=>child:resizechild:resizeparentresize\n                //  parent:resizeemit -> child:resize \n                // isRestrict(parent:resize=>child:resize)\n                // transformWidthContainerrotate+resizetransformWidthContainer\n                // parent:resize=>child:resizeparent:rotate=>child:rotate\n                return;\n            }\n            // DONE:  Label \n            if (model.id === curGroup.id) {\n                var center_1 = { x: curGroup.x, y: curGroup.y };\n                forEach(Array.from(curGroup.children), function (childId) {\n                    var child = graphModel.getNodeModelById(childId);\n                    if (child) {\n                        var point = { x: child.x, y: child.y };\n                        if (childrenPositionMap.has(child.id)) {\n                            point = childrenPositionMap.get(child.id);\n                        }\n                        else {\n                            childrenPositionMap.set(child.id, point);\n                        }\n                        // \n                        var theta = model.rotate * (180 / Math.PI);\n                        if (theta < 0)\n                            theta += 360;\n                        var radian = theta * (Math.PI / 180);\n                        var newPoint = rotatePointAroundCenter(point, center_1, radian);\n                        child.moveTo(newPoint.x, newPoint.y);\n                        child.rotate = model.rotate;\n                    }\n                });\n            }\n        };\n        _this.onNodeResize = function (_a) {\n            var deltaX = _a.deltaX, deltaY = _a.deltaY, index = _a.index, model = _a.model, preData = _a.preData;\n            var _b = _this.props, curGroup = _b.model, graphModel = _b.graphModel;\n            var transformWithContainer = curGroup.transformWithContainer, isRestrict = curGroup.isRestrict;\n            if (!transformWithContainer || isRestrict) {\n                // isRestrictmodel resize\n                // parent:resize=>child:resizechild:resizeparentresize\n                //  parent:resizeemit -> child:resize \n                // isRestrict(parent:resize=>child:resize)\n                return;\n            }\n            if (model.id === curGroup.id) {\n                // node:resizegroupwidthheight\n                // preDataresizewidthdata/model\n                var properties = preData.properties;\n                var _c = properties || {}, groupWidth_1 = _c.width, groupHeight_1 = _c.height;\n                forEach(Array.from(curGroup.children), function (childId) {\n                    var child = graphModel.getNodeModelById(childId);\n                    if (child) {\n                        // dxdy\n                        var childDx = (child.width / groupWidth_1) * deltaX;\n                        var childDy = (child.height / groupHeight_1) * deltaY;\n                        // child.rotate = model.rotate\n                        handleResize({\n                            deltaX: childDx,\n                            deltaY: childDy,\n                            index: index,\n                            nodeModel: child,\n                            graphModel: graphModel,\n                            cancelCallback: function () { },\n                        });\n                    }\n                });\n            }\n        };\n        _this.onNodeMouseMove = function () {\n            // console.log(data,deltaX,deltaY,'111')\n            // const { model: curGroup, graphModel } = this.props\n            // const { transformModel } = graphModel\n            // const { SCALE_X, SCALE_Y } = transformModel\n            // if (data.id === curGroup.id) {\n            //   const nodeIds = this.getNodesInGroup(curGroup, graphModel)\n            //   // https://github.com/didi/LogicFlow/issues/1914\n            //   // lf.fitView()SCALE_XSCALE_Y\n            //   // groupmousemovedrag.tsthis.onDragging()onDragging()SCALE\n            //   // \"node:mousemove\"emitonDragging()emitSCALE\n            //   // SCALE\n            //   graphModel.moveNodes(nodeIds, deltaX / SCALE_X, deltaY / SCALE_Y, true)\n            // }\n        };\n        _this.graphRendered = function () {\n            var model = _this.props.model;\n            //  this.isCollapsed  true\n            if (model.isCollapsed) {\n                // https://github.com/didi/LogicFlow/issues/1918\n                // lf.render({nodes:[{}, {}]})\n                // Groupnew Model => toggleCollapse()\n                // => graphModel.elementsModelMapchildren\n                // --------------------\n                // lf.render({nodes:[{}, {}]})\n                // new Model => graphModel.elementsModelMap.set(id, new Model())\n                // Groupnew Model => toggleCollapse() =>\n                // graphModel.elementsModelMapchildren\n                // --------------------\n                // \"graph:rendered\"\n                model.toggleCollapse(true);\n            }\n        };\n        return _this;\n    }\n    DynamicGroupNode.prototype.componentDidMount = function () {\n        _super.prototype.componentDidMount.call(this);\n        var eventCenter = this.props.graphModel.eventCenter;\n        //  group \n        eventCenter.on('node:rotate', this.onNodeRotate);\n        //  group \n        eventCenter.on('node:resize', this.onNodeResize);\n        //  group \n        eventCenter.on('node:mousemove', this.onNodeMouseMove);\n        // \n        eventCenter.on('graph:rendered', this.graphRendered);\n    };\n    DynamicGroupNode.prototype.componentWillUnmount = function () {\n        _super.prototype.componentWillUnmount.call(this);\n        var eventCenter = this.props.graphModel.eventCenter;\n        eventCenter.off('node:rotate', this.onNodeRotate);\n        eventCenter.off('node:resize', this.onNodeResize);\n        eventCenter.off('node:mousemove', this.onNodeMouseMove);\n        eventCenter.off('graph:rendered', this.graphRendered);\n    };\n    /**\n     * \n     * @param groupModel\n     * @param graphModel\n     */\n    DynamicGroupNode.prototype.getNodesInGroup = function (groupModel, graphModel) {\n        var _this = this;\n        var nodeIds = [];\n        if (groupModel.isGroup) {\n            forEach(Array.from(groupModel.children), function (nodeId) {\n                nodeIds.push(nodeId);\n                var nodeModel = graphModel.getNodeModelById(nodeId);\n                if (nodeModel === null || nodeModel === void 0 ? void 0 : nodeModel.isGroup) {\n                    nodeIds = nodeIds.concat(_this.getNodesInGroup(nodeModel, graphModel));\n                }\n            });\n        }\n        return nodeIds;\n    };\n    DynamicGroupNode.prototype.getResizeControl = function () {\n        var _a = this.props.model, resizable = _a.resizable, isCollapsed = _a.isCollapsed;\n        var showResizeControl = resizable && !isCollapsed;\n        return showResizeControl ? _super.prototype.getResizeControl.call(this) : null;\n    };\n    DynamicGroupNode.prototype.getAppendAreaShape = function () {\n        // DONE:  group container, \n        var model = this.props.model;\n        var width = model.width, height = model.height, x = model.x, y = model.y, radius = model.radius, groupAddable = model.groupAddable;\n        if (!groupAddable)\n            return null;\n        var _a = model.getNodeStyle().strokeWidth, strokeWidth = _a === void 0 ? 0 : _a;\n        var style = model.getAddableOutlineStyle();\n        var newWidth = width + strokeWidth + 8;\n        var newHeight = height + strokeWidth + 8;\n        return h('rect', __assign(__assign({}, style), { width: newWidth, height: newHeight, x: x - newWidth / 2, y: y - newHeight / 2, rx: radius, ry: radius }));\n    };\n    DynamicGroupNode.prototype.getCollapseIcon = function (sx, sy) {\n        return \"M \".concat(sx + 3, \",\").concat(sy + 6, \" \").concat(sx + 11, \",\").concat(sy + 6, \" M\").concat(sx + 7, \",\").concat(sy + 2, \" \").concat(sx + 7, \",\").concat(sy + 10);\n    };\n    DynamicGroupNode.prototype.getExpandIcon = function (sx, sy) {\n        return \"M \".concat(sx + 3, \",\").concat(sy + 6, \" \").concat(sx + 11, \",\").concat(sy + 6, \" \");\n    };\n    // \n    DynamicGroupNode.prototype.getOperateIcon = function () {\n        var model = this.props.model;\n        var x = model.x, y = model.y, width = model.width, height = model.height;\n        var sx = x - width / 2 + 10;\n        var sy = y - height / 2 + 10;\n        if (!model.collapsible)\n            return null;\n        var iconPath = (model === null || model === void 0 ? void 0 : model.isCollapsed)\n            ? this.getCollapseIcon(sx, sy)\n            : this.getExpandIcon(sx, sy);\n        var operateIcon = h('path', {\n            fill: 'none',\n            stroke: '#818281',\n            strokeWidth: 2,\n            'pointer-events': 'none',\n            d: iconPath,\n        });\n        return h('g', {}, [\n            h('rect', {\n                height: 12,\n                width: 14,\n                rx: 2,\n                ry: 2,\n                strokeWidth: 1,\n                fill: '#f4f5f6',\n                stroke: '#cecece',\n                cursor: 'pointer',\n                x: sx,\n                y: sy,\n                onClick: function () {\n                    // DONE:  ->  toggleCollapse \n                    model.toggleCollapse(!model.isCollapsed);\n                },\n            }),\n            operateIcon,\n        ]);\n    };\n    DynamicGroupNode.prototype.getShape = function () {\n        return h('g', {}, [\n            this.getAppendAreaShape(),\n            _super.prototype.getShape.call(this),\n            this.getOperateIcon(),\n        ]);\n    };\n    return DynamicGroupNode;\n}(RectNode));\nexport { DynamicGroupNode };\nexport default DynamicGroupNode;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { observable, ElementType, RectNodeModel, } from '@logicflow/core';\nimport { forEach } from 'lodash-es';\n// \nvar DEFAULT_GROUP_EXPAND_WIDTH = 400;\nvar DEFAULT_GROUP_EXPAND_HEIGHT = 230;\n// \nvar DEFAULT_GROUP_COLLAPSE_WIDTH = 80;\nvar DEFAULT_GROUP_COLLAPSE_HEIGHT = 60;\nvar DEFAULT_BOTTOM_Z_INDEX = -10000;\nvar DynamicGroupNodeModel = /** @class */ (function (_super) {\n    __extends(DynamicGroupNodeModel, _super);\n    function DynamicGroupNodeModel(data, graphModel) {\n        var _this = _super.call(this, data, graphModel) || this;\n        _this.isGroup = true;\n        //  TODO: \n        _this.isRestrict = false;\n        // isRestrict  autoResize  true\n        _this.autoResize = false;\n        // \n        _this.collapsible = true;\n        // \n        _this.isCollapsed = false;\n        //  - \n        _this.groupAddable = false;\n        // \n        _this.transformWithContainer = false;\n        _this.childrenLastCollapseStateDict = new Map();\n        _this.childrenLastCollapseStateDict = new Map();\n        _this.initNodeData(data);\n        _this.setAttributes();\n        return _this;\n    }\n    DynamicGroupNodeModel.prototype.initNodeData = function (data) {\n        var _a;\n        _super.prototype.initNodeData.call(this, data);\n        var _b = (_a = data.properties) !== null && _a !== void 0 ? _a : {}, children = _b.children, width = _b.width, height = _b.height, collapsedWidth = _b.collapsedWidth, collapsedHeight = _b.collapsedHeight, collapsible = _b.collapsible, isCollapsed = _b.isCollapsed, zIndex = _b.zIndex, isRestrict = _b.isRestrict, autoResize = _b.autoResize, autoToFront = _b.autoToFront, transformWithContainer = _b.transformWithContainer;\n        this.children = children ? new Set(children) : new Set();\n        this.zIndex = zIndex !== null && zIndex !== void 0 ? zIndex : DEFAULT_BOTTOM_Z_INDEX;\n        this.isCollapsed = isCollapsed !== null && isCollapsed !== void 0 ? isCollapsed : false;\n        this.setProperties({ isCollapsed: isCollapsed !== null && isCollapsed !== void 0 ? isCollapsed : false });\n        var expandWidth = width !== null && width !== void 0 ? width : DEFAULT_GROUP_EXPAND_WIDTH;\n        var expandHeight = height !== null && height !== void 0 ? height : DEFAULT_GROUP_EXPAND_HEIGHT;\n        // \n        this.width = expandWidth;\n        this.height = expandHeight;\n        this.expandWidth = expandWidth;\n        this.expandHeight = expandHeight;\n        this.collapsedWidth = collapsedWidth !== null && collapsedWidth !== void 0 ? collapsedWidth : DEFAULT_GROUP_COLLAPSE_WIDTH;\n        this.collapsedHeight = collapsedHeight !== null && collapsedHeight !== void 0 ? collapsedHeight : DEFAULT_GROUP_COLLAPSE_HEIGHT;\n        this.isRestrict = isRestrict !== null && isRestrict !== void 0 ? isRestrict : false;\n        this.transformWithContainer = transformWithContainer !== null && transformWithContainer !== void 0 ? transformWithContainer : false;\n        this.autoResize = autoResize !== null && autoResize !== void 0 ? autoResize : false;\n        this.collapsible = collapsible !== null && collapsible !== void 0 ? collapsible : true;\n        this.autoToFront = autoToFront !== null && autoToFront !== void 0 ? autoToFront : false;\n        //  Group \n        this.text.editable = false;\n        this.text.draggable = false;\n    };\n    DynamicGroupNodeModel.prototype.setAttributes = function () {\n        _super.prototype.setAttributes.call(this);\n    };\n    DynamicGroupNodeModel.prototype.getData = function () {\n        var _this = this;\n        var data = _super.prototype.getData.call(this);\n        var children = [];\n        forEach(Array.from(this.children), function (childId) {\n            var model = _this.graphModel.getNodeModelById(childId);\n            if (model && !model.virtual) {\n                children.push(childId);\n            }\n        });\n        data.children = children;\n        if (data.properties) {\n            data.properties.children = children;\n            data.properties.isCollapsed = this.isCollapsed;\n        }\n        return data;\n    };\n    /**\n     * \n     * @param groupModel\n     */\n    DynamicGroupNodeModel.prototype.getNodesInGroup = function (groupModel) {\n        var nodeIds = [];\n        if (groupModel.isGroup) {\n            forEach(Array.from(groupModel.children), function (nodeId) {\n                nodeIds.push(nodeId);\n            });\n        }\n        return nodeIds;\n    };\n    DynamicGroupNodeModel.prototype.getMoveDistance = function (deltaX, deltaY, isIgnoreRule) {\n        if (isIgnoreRule === void 0) { isIgnoreRule = false; }\n        var _a = __read(_super.prototype.getMoveDistance.call(this, deltaX, deltaY, isIgnoreRule), 2), moveDeltaX = _a[0], moveDeltaY = _a[1];\n        var nodeIds = this.getNodesInGroup(this);\n        this.graphModel.moveNodes(nodeIds, deltaX, deltaY, isIgnoreRule);\n        return [moveDeltaX, moveDeltaY];\n    };\n    /**\n     *  getHistoryData \n     */\n    DynamicGroupNodeModel.prototype.getHistoryData = function () {\n        var data = _super.prototype.getHistoryData.call(this);\n        data.children = Array.from(this.children);\n        data.isGroup = true;\n        var _a = this, x = _a.x, y = _a.y, collapsedWidth = _a.collapsedWidth, collapsedHeight = _a.collapsedHeight, expandWidth = _a.expandWidth, expandHeight = _a.expandHeight, isCollapsed = _a.isCollapsed;\n        if (isCollapsed) {\n            // \n            // history\n            // historycollapse()\n            data.x = x + expandWidth / 2 - collapsedWidth / 2;\n            data.y = y + expandHeight / 2 - collapsedHeight / 2;\n            if (data.text) {\n                data.text.x = data.text.x + expandWidth / 2 - collapsedWidth / 2;\n                data.text.y = data.text.y + expandHeight / 2 - collapsedHeight / 2;\n            }\n        }\n        return data;\n    };\n    /**\n     *  or \n     * 1. \n     * 2. \n     * 3. \n     * @param collapse {boolean} true -> false -> \n     */\n    DynamicGroupNodeModel.prototype.toggleCollapse = function (collapse) {\n        var _this = this;\n        var graphModel = this.graphModel;\n        var nextCollapseState = !!collapse;\n        // DONE:  setProperty  isCollapsed  ->  node:properties-changed \n        this.isCollapsed = nextCollapseState;\n        this.setProperties({ isCollapsed: nextCollapseState });\n        graphModel.eventCenter.emit('dynamicGroup:collapse', {\n            collapse: nextCollapseState,\n            nodeModel: this,\n        });\n        // step 1\n        if (nextCollapseState) {\n            this.collapse();\n        }\n        else {\n            this.expand();\n        }\n        // step 2\n        var allRelatedEdges = __spreadArray(__spreadArray([], __read(this.incoming.edges), false), __read(this.outgoing.edges), false);\n        var childrenArr = Array.from(this.children);\n        forEach(childrenArr, function (elementId) {\n            var _a, _b;\n            // FIX:  graphModel.getElement \n            // const model = this.graphModel.getElement(elementId)\n            var model = _this.graphModel.elementsModelMap.get(elementId);\n            if (model) {\n                // TODO: ??? \n                var collapseStatus = model.isCollapsed;\n                // FIX: https://github.com/didi/LogicFlow/issues/1007\n                //  Group \n                if (model.isGroup) {\n                    var groupModel = model;\n                    if (!groupModel.isCollapsed) {\n                        // parent children \n                        //  parent children  model.isCollapsed  true\n                        //  parent children \n                        //  model.isCollapsed  false,  isCollapse  true children \n                        groupModel.toggleCollapse(collapse);\n                    }\n                    if (!collapse) {\n                        //  parent children \n                        var lastCollapseStatus = (_a = _this.childrenLastCollapseStateDict) === null || _a === void 0 ? void 0 : _a.get(elementId);\n                        if (lastCollapseStatus !== undefined &&\n                            lastCollapseStatus !== model.isCollapsed) {\n                            // https://github.com/didi/LogicFlow/issues/1145\n                            // parentchildrennodeModel.isCollapsed=true\n                            // parentchildren\n                            groupModel.toggleCollapse(lastCollapseStatus);\n                        }\n                    }\n                }\n                (_b = _this.childrenLastCollapseStateDict) === null || _b === void 0 ? void 0 : _b.set(elementId, !!collapseStatus);\n                model.visible = !collapse;\n                //  incoming  outgoing\n                if (model.BaseType === ElementType.NODE) {\n                    var incomingEdges = model.incoming.edges;\n                    var outgoingEdges = model.outgoing.edges;\n                    allRelatedEdges = __spreadArray(__spreadArray(__spreadArray([], __read(allRelatedEdges), false), __read(incomingEdges), false), __read(outgoingEdges), false);\n                }\n            }\n        });\n        // step 3\n        this.collapseEdge(nextCollapseState, allRelatedEdges);\n    };\n    // \n    DynamicGroupNodeModel.prototype.collapse = function () {\n        var _a = this, x = _a.x, y = _a.y, text = _a.text, width = _a.width, height = _a.height, collapsedWidth = _a.collapsedWidth, collapsedHeight = _a.collapsedHeight;\n        this.x = x - width / 2 + collapsedWidth / 2;\n        this.y = y - height / 2 + collapsedHeight / 2;\n        this.text.x = text.x - width / 2 + collapsedWidth / 2;\n        this.text.y = text.y - height / 2 + collapsedHeight / 2;\n        //  expandWidth \n        this.expandWidth = width;\n        this.expandHeight = height;\n        this.width = collapsedWidth;\n        this.height = collapsedHeight;\n    };\n    // \n    DynamicGroupNodeModel.prototype.expand = function () {\n        var _a = this, x = _a.x, y = _a.y, text = _a.text, expandWidth = _a.expandWidth, expandHeight = _a.expandHeight, collapsedWidth = _a.collapsedWidth, collapsedHeight = _a.collapsedHeight;\n        this.width = expandWidth;\n        this.height = expandHeight;\n        // \n        this.x = x + this.width / 2 - collapsedWidth / 2;\n        this.y = y + this.height / 2 - collapsedHeight / 2;\n        this.text.x = text.x + this.width / 2 - collapsedWidth / 2;\n        this.text.y = text.y + this.height / 2 - collapsedHeight / 2;\n    };\n    DynamicGroupNodeModel.prototype.createVirtualEdge = function (edgeConfig) {\n        edgeConfig.pointsList = undefined;\n        var virtualEdge = this.graphModel.addEdge(edgeConfig);\n        virtualEdge.virtual = true;\n        // TODO:  group ->  null\n        // virtualEdge.getData = () => null\n        virtualEdge.text.editable = false;\n        virtualEdge.isCollapsedEdge = true; // ,TODO: \n    };\n    /**\n     * \n     * \n     *  - \n     *  - \n     *  M  N  M+N \n     * \n     *  - \n     *  - \n     *  - \n     * \n     *  - \n     *  - \n     *  - \n     *\n     * @param collapse\n     * @param edges\n     */\n    DynamicGroupNodeModel.prototype.collapseEdge = function (collapse, edges) {\n        var _this = this;\n        var graphModel = this.graphModel;\n        forEach(edges, function (edge, idx) {\n            var _a;\n            var edgeData = edge.getData();\n            var targetNodeId = edgeData.targetNodeId, sourceNodeId = edgeData.sourceNodeId;\n            var edgeConfig = __assign(__assign({}, edgeData), { id: \"\".concat(edgeData.id, \"__\").concat(idx), text: (_a = edgeData.text) === null || _a === void 0 ? void 0 : _a.value });\n            if (edge.virtual) {\n                graphModel.deleteEdgeById(edge.id);\n            }\n            // \n            var targetNodeGroup = graphModel.dynamicGroup.getGroupByNodeId(targetNodeId);\n            if (!targetNodeGroup) {\n                targetNodeGroup = graphModel.getNodeModelById(targetNodeId);\n            }\n            // \n            var sourceNodeGroup = graphModel.dynamicGroup.getGroupByNodeId(sourceNodeId);\n            if (!sourceNodeGroup) {\n                sourceNodeGroup = graphModel.getNodeModelById(sourceNodeId);\n            }\n            //  -> collapse\n            if (collapse && edge.visible) {\n                // \n                //  TODO??? \n                // \n                if (_this.children.has(sourceNodeId) || _this.id === sourceNodeId) {\n                    edgeConfig.startPoint = undefined;\n                    edgeConfig.sourceNodeId = _this.id;\n                }\n                else {\n                    edgeConfig.endPoint = undefined;\n                    edgeConfig.targetNodeId = _this.id;\n                }\n                // \n                if (targetNodeGroup.id !== _this.id || sourceNodeGroup.id !== _this.id) {\n                    _this.createVirtualEdge(edgeConfig);\n                }\n                edge.visible = false;\n            }\n            //  -> expand\n            if (!collapse && !edge.visible) {\n                // \n                //  id \n                if (targetNodeGroup &&\n                    targetNodeGroup.isGroup &&\n                    targetNodeGroup.isCollapsed) {\n                    edgeConfig.targetNodeId = targetNodeGroup.id;\n                    edgeConfig.endPoint = undefined;\n                    _this.createVirtualEdge(edgeConfig);\n                }\n                else if (sourceNodeGroup &&\n                    sourceNodeGroup.isGroup &&\n                    sourceNodeGroup.isCollapsed) {\n                    edgeConfig.sourceNodeId = sourceNodeGroup.id;\n                    edgeConfig.startPoint = undefined;\n                    _this.createVirtualEdge(edgeConfig);\n                }\n                else {\n                    edge.visible = true;\n                }\n            }\n        });\n    };\n    /**\n     * \n     * TODO: \n     * @param _nodeData\n     */\n    // eslint-disable-next-line\n    DynamicGroupNodeModel.prototype.isAllowAppendIn = function (_nodeData) {\n        // TODO:  this.properties.groupAddable  this.groupAddable\n        // this.groupAddable \n        return true;\n    };\n    /**\n     * \n     * @param isAllow\n     */\n    DynamicGroupNodeModel.prototype.setAllowAppendChild = function (isAllow) {\n        // this.setProperty('groupAddable', isAllow)\n        this.groupAddable = isAllow;\n    };\n    /**\n     * \n     * @param id\n     */\n    DynamicGroupNodeModel.prototype.addChild = function (id) {\n        this.children.add(id);\n        var groupData = this.getData();\n        this.graphModel.eventCenter.emit('group:add-node', {\n            data: groupData,\n            childId: id,\n        });\n    };\n    /**\n     * \n     * @param id\n     */\n    DynamicGroupNodeModel.prototype.removeChild = function (id) {\n        this.children.delete(id);\n        var groupData = this.getData();\n        this.graphModel.eventCenter.emit('group:remove-node', { data: groupData });\n    };\n    /**\n     *  groupA  groupB  groupB  groupB  group zIndex  1\n     */\n    DynamicGroupNodeModel.prototype.toBack = function () {\n        this.zIndex--;\n    };\n    /**\n     *  Group  Resize Outline\n     */\n    DynamicGroupNodeModel.prototype.getResizeOutlineStyle = function () {\n        var style = _super.prototype.getResizeOutlineStyle.call(this);\n        style.stroke = 'none';\n        return style;\n    };\n    // TODO:  group \n    DynamicGroupNodeModel.prototype.getAnchorStyle = function () {\n        var style = _super.prototype.getAnchorStyle.call(this);\n        style.stroke = 'transparent';\n        style.fill = 'transparent';\n        if (style.hover) {\n            style.hover.fill = 'transparent';\n            style.hover.stroke = 'transparent';\n        }\n        return style;\n    };\n    /**\n     *  drop \n     */\n    DynamicGroupNodeModel.prototype.getAddableOutlineStyle = function () {\n        return {\n            stroke: '#feb663',\n            strokeWidth: 2,\n            strokeDasharray: '4 4',\n            fill: 'transparent',\n        };\n    };\n    __decorate([\n        observable\n    ], DynamicGroupNodeModel.prototype, \"isCollapsed\", void 0);\n    __decorate([\n        observable\n    ], DynamicGroupNodeModel.prototype, \"groupAddable\", void 0);\n    __decorate([\n        observable\n    ], DynamicGroupNodeModel.prototype, \"transformWithContainer\", void 0);\n    return DynamicGroupNodeModel;\n}(RectNodeModel));\nexport { DynamicGroupNodeModel };\nexport default DynamicGroupNodeModel;\n","/**\n *\n * @param bounds\n * @param group\n */\nexport function isBoundsInGroup(bounds, group) {\n    var minX = bounds.minX, minY = bounds.minY, maxX = bounds.maxX, maxY = bounds.maxY;\n    var x = group.x, y = group.y, width = group.width, height = group.height;\n    return (minX >= x - width / 2 &&\n        maxX <= x + width / 2 &&\n        minY >= y - height / 2 &&\n        maxY <= y + height / 2);\n}\n/**\n *  bounds \n * @param groupBounds\n * @param node\n * @param deltaX\n * @param deltaY\n */\nexport function isAllowMoveTo(groupBounds, node, deltaX, deltaY) {\n    var minX = groupBounds.minX, minY = groupBounds.minY, maxX = groupBounds.maxX, maxY = groupBounds.maxY;\n    var x = node.x, y = node.y, width = node.width, height = node.height;\n    // DONE:  (x, y)  x + deltaX, y + deltaY \n    var allowMoveMinX = minX + width / 2;\n    var allowMoveMinY = minY + height / 2;\n    var allowMoveMaxX = maxX - width / 2;\n    var allowMoveMaxY = maxY - height / 2;\n    return {\n        x: x + deltaX >= allowMoveMinX && x + deltaX <= allowMoveMaxX,\n        y: y + deltaY >= allowMoveMinY && y + deltaY <= allowMoveMaxY,\n    };\n}\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { EventType, transformNodeData, transformEdgeData, } from '@logicflow/core';\nimport { assign, cloneDeep, filter, forEach, has, map, sortBy } from 'lodash-es';\nimport { DynamicGroupNode } from './node';\nimport { DynamicGroupNodeModel } from './model';\nimport { isAllowMoveTo, isBoundsInGroup } from './utils';\nexport * from './node';\nexport * from './model';\nexport var dynamicGroup = {\n    type: 'dynamic-group',\n    view: DynamicGroupNode,\n    model: DynamicGroupNodeModel,\n};\nvar DEFAULT_TOP_Z_INDEX = -1000;\nvar DEFAULT_BOTTOM_Z_INDEX = -10000;\nvar DynamicGroup = /** @class */ (function () {\n    function DynamicGroup(_a) {\n        var lf = _a.lf, options = _a.options;\n        var _this = this;\n        this.topGroupZIndex = DEFAULT_BOTTOM_Z_INDEX;\n        //  group \n        this.nodeGroupMap = new Map();\n        this.onSelectionDrop = function () {\n            var selectedNodes = _this.lf.graphModel.getSelectElements().nodes;\n            selectedNodes.forEach(function (node) {\n                _this.addNodeToGroup(node);\n            });\n        };\n        this.onNodeAddOrDrop = function (_a) {\n            var node = _a.data;\n            _this.addNodeToGroup(node);\n        };\n        this.addNodeToGroup = function (node) {\n            // 1.  group  group \n            var preGroupId = _this.nodeGroupMap.get(node.id);\n            if (preGroupId) {\n                var group = _this.lf.getNodeModelById(preGroupId);\n                group.removeChild(node.id);\n                _this.nodeGroupMap.delete(node.id);\n                group.setAllowAppendChild(false);\n            }\n            // 2.  group  group \n            var nodeModel = _this.lf.getNodeModelById(node.id);\n            var bounds = nodeModel === null || nodeModel === void 0 ? void 0 : nodeModel.getBounds();\n            if (nodeModel && bounds) {\n                // TODO: \n                // https://github.com/didi/LogicFlow/issues/1261\n                //  SelectionSelect  lf.addNode(Group)\n                //  appendNodeToGroup() \n                //  this.getGroup()  node.id !== nodeData.id\n                //  addNode  Group this.getGroup() \n                //  Group  this.nodeGroupMap \n                //  foldEdge()  getNodeGroup()  groupId\n                // \n                // nodeGroupMap\n                if (nodeModel.isGroup) {\n                    var group_1 = nodeModel;\n                    forEach(Array.from(group_1.children), function (childId) {\n                        _this.nodeGroupMap.set(childId, node.id);\n                    });\n                    //  node  this.topGroupZIndex \n                    _this.calibrateTopGroupZIndex([node]);\n                    _this.onNodeSelect({\n                        data: node,\n                        isSelected: false,\n                        isMultiple: false,\n                    });\n                }\n                // TODO:  groupModel,  node  group\n                var group = _this.getGroupByBounds(bounds, node);\n                if (group) {\n                    var isAllowAppendIn = group.isAllowAppendIn(node);\n                    if (isAllowAppendIn) {\n                        group.addChild(node.id);\n                        //  group  group.addChild  addChild \n                        group.setAllowAppendChild(false);\n                    }\n                    else {\n                        // \n                        _this.lf.emit('group:not-allowed', {\n                            group: group.getData(),\n                            node: node,\n                        });\n                    }\n                }\n            }\n        };\n        this.onGroupAddNode = function (_a) {\n            var groupData = _a.data, childId = _a.childId;\n            _this.nodeGroupMap.set(childId, groupData.id);\n        };\n        this.removeNodeFromGroup = function (_a) {\n            var node = _a.data, model = _a.model;\n            if (model.isGroup && node.children) {\n                forEach(Array.from(node.children), function (childId) {\n                    _this.nodeGroupMap.delete(childId);\n                    _this.lf.deleteNode(childId);\n                });\n            }\n            var groupId = _this.nodeGroupMap.get(node.id);\n            if (groupId) {\n                var group = _this.lf.getNodeModelById(groupId);\n                group && group.removeChild(node.id);\n                _this.nodeGroupMap.delete(node.id);\n            }\n        };\n        this.onSelectionDrag = function () {\n            var selectedNodes = _this.lf.graphModel.getSelectElements().nodes;\n            selectedNodes.forEach(function (node) {\n                _this.setActiveGroup(node);\n            });\n        };\n        this.onNodeDrag = function (_a) {\n            var node = _a.data;\n            _this.setActiveGroup(node);\n        };\n        this.setActiveGroup = function (node) {\n            var nodeModel = _this.lf.getNodeModelById(node.id);\n            var bounds = nodeModel === null || nodeModel === void 0 ? void 0 : nodeModel.getBounds();\n            if (nodeModel && bounds) {\n                var targetGroup = _this.getGroupByBounds(bounds, node);\n                if (_this.activeGroup) {\n                    _this.activeGroup.setAllowAppendChild(false);\n                }\n                if (!targetGroup || (nodeModel.isGroup && targetGroup.id === node.id)) {\n                    return;\n                }\n                var isAllowAppendIn = targetGroup.isAllowAppendIn(node);\n                if (!isAllowAppendIn)\n                    return;\n                _this.activeGroup = targetGroup;\n                _this.activeGroup.setAllowAppendChild(true);\n            }\n        };\n        /**\n         * 1. \n         * 2. \n         * 3. \n         * 4.  LogicFlow  1000 \n         * @param node\n         * @param isMultiple\n         * @param isSelected\n         */\n        this.onNodeSelect = function (_a) {\n            var node = _a.data, isMultiple = _a.isMultiple, isSelected = _a.isSelected;\n            var nodeModel = _this.lf.getNodeModelById(node.id);\n            _this.sendNodeToFront(nodeModel);\n            //  group  zIndex group  zIndex  group \n            if (_this.topGroupZIndex > DEFAULT_TOP_Z_INDEX) {\n                var nodes = _this.lf.graphModel.nodes;\n                _this.topGroupZIndex = DEFAULT_BOTTOM_Z_INDEX;\n                var groups = sortBy(filter(nodes, function (node) { return !!node.isGroup; }), 'zIndex');\n                var preZIndex_1 = 0;\n                forEach(groups, function (group) {\n                    if (group.zIndex !== preZIndex_1) {\n                        _this.topGroupZIndex++;\n                        preZIndex_1 = group.zIndex;\n                    }\n                    group.setZIndex(_this.topGroupZIndex);\n                });\n            }\n            // FIX #1004\n            // \n            // \n            // \n            if (isMultiple && isSelected) {\n                if (nodeModel === null || nodeModel === void 0 ? void 0 : nodeModel.isGroup) {\n                    var children = nodeModel.children;\n                    forEach(Array.from(children), function (childId) {\n                        var childModel = _this.lf.getNodeModelById(childId);\n                        childModel === null || childModel === void 0 ? void 0 : childModel.setSelected(false);\n                    });\n                }\n                else {\n                    var groupId = _this.nodeGroupMap.get(node.id);\n                    if (groupId) {\n                        var graphModel = _this.lf.getNodeModelById(groupId);\n                        (graphModel === null || graphModel === void 0 ? void 0 : graphModel.isSelected) && (nodeModel === null || nodeModel === void 0 ? void 0 : nodeModel.setSelected(false));\n                    }\n                }\n            }\n        };\n        this.onNodeMove = function (_a) {\n            var deltaX = _a.deltaX, deltaY = _a.deltaY, data = _a.data;\n            var id = data.id, x = data.x, y = data.y, properties = data.properties;\n            if (!properties) {\n                return;\n            }\n            var width = properties.width, height = properties.height;\n            var groupId = _this.nodeGroupMap.get(id);\n            if (!groupId) {\n                return;\n            }\n            var groupModel = _this.lf.getNodeModelById(groupId);\n            if (!groupModel || !groupModel.isRestrict || !groupModel.autoResize) {\n                return;\n            }\n            // isRestrict=true & autoResize=true\n            // \n            // step1: childbounds\n            var newX = x + deltaX / 2;\n            var newY = y + deltaY / 2;\n            var minX = newX - width / 2;\n            var minY = newY - height / 2;\n            var maxX = newX + width / 2;\n            var maxY = newY + height / 2;\n            // step2child.boundsparent.boundschild.minX<parent.minXparent.minX=child.minX\n            var hasChange = false;\n            var groupBounds = groupModel.getBounds();\n            var newGroupBounds = Object.assign({}, groupBounds);\n            if (minX < newGroupBounds.minX) {\n                newGroupBounds.minX = minX;\n                hasChange = true;\n            }\n            if (minY < newGroupBounds.minY) {\n                newGroupBounds.minY = minY;\n                hasChange = true;\n            }\n            if (maxX > newGroupBounds.maxX) {\n                newGroupBounds.maxX = maxX;\n                hasChange = true;\n            }\n            if (maxY > newGroupBounds.maxY) {\n                newGroupBounds.maxY = maxY;\n                hasChange = true;\n            }\n            if (!hasChange) {\n                return;\n            }\n            // step3: parent.boundsxywidthheight\n            var newGroupX = newGroupBounds.minX + (newGroupBounds.maxX - newGroupBounds.minX) / 2;\n            var newGroupY = newGroupBounds.minY + (newGroupBounds.maxY - newGroupBounds.minY) / 2;\n            var newGroupWidth = newGroupBounds.maxX - newGroupBounds.minX;\n            var newGroupHeight = newGroupBounds.maxY - newGroupBounds.minY;\n            groupModel.moveTo(newGroupX, newGroupY);\n            groupModel.width = newGroupWidth;\n            groupModel.height = newGroupHeight;\n        };\n        this.onGraphRendered = function (_a) {\n            var data = _a.data;\n            forEach(data.nodes, function (node) {\n                if (node.children) {\n                    forEach(node.children, function (childId) {\n                        _this.nodeGroupMap.set(childId, node.id);\n                    });\n                }\n            });\n            // TODO: \n            //  nodes  this.topGroupZIndex \n            _this.calibrateTopGroupZIndex(data.nodes);\n        };\n        lf.register(dynamicGroup);\n        this.lf = lf;\n        assign(this, options);\n        // \n        this.init();\n    }\n    /**\n     * \n     * @param nodeId\n     */\n    DynamicGroup.prototype.getGroupByNodeId = function (nodeId) {\n        var groupId = this.nodeGroupMap.get(nodeId);\n        if (groupId) {\n            return this.lf.getNodeModelById(groupId);\n        }\n    };\n    /**\n     * \n     * \n     * @param bounds\n     * @param nodeData\n     */\n    DynamicGroup.prototype.getGroupByBounds = function (bounds, nodeData) {\n        var nodes = this.lf.graphModel.nodes;\n        var groups = filter(nodes, function (node) {\n            return (!!node.isGroup &&\n                isBoundsInGroup(bounds, node) &&\n                node.id !== nodeData.id);\n        });\n        var count = groups.length;\n        if (count <= 1) {\n            return groups[0];\n        }\n        else {\n            var topZIndexGroup = groups[count - 1];\n            for (var i = count - 2; i >= 0; i--) {\n                if (groups[i].zIndex > topZIndexGroup.zIndex) {\n                    topZIndexGroup = groups[i];\n                }\n            }\n            return topZIndexGroup;\n        }\n    };\n    /**\n     *  group\n     * @param model\n     */\n    DynamicGroup.prototype.sendNodeToFront = function (model) {\n        var _this = this;\n        if (!model || !model.isGroup)\n            return;\n        this.topGroupZIndex++;\n        model.setZIndex(this.topGroupZIndex);\n        if (model.children) {\n            var children = model.children;\n            forEach(Array.from(children), function (nodeId) {\n                var node = _this.lf.getNodeModelById(nodeId);\n                _this.sendNodeToFront(node);\n            });\n        }\n    };\n    /**\n     *  zIndex \n     * TODO:  node  group maxZIndex  node  zIndex \n     * @param node\n     */\n    DynamicGroup.prototype.getMaxZIndex = function (node) {\n        var _this = this;\n        var maxZIndex = DEFAULT_BOTTOM_Z_INDEX;\n        if (node.isGroup) {\n            maxZIndex = Math.max(maxZIndex, node.zIndex);\n        }\n        if (node.children) {\n            var children = node.children;\n            forEach(Array.from(children), function (childId) {\n                var child = _this.lf.getNodeModelById(childId);\n                if (child === null || child === void 0 ? void 0 : child.isGroup) {\n                    var childMaxZIndex = _this.getMaxZIndex(child);\n                    maxZIndex = Math.max(maxZIndex, childMaxZIndex);\n                }\n            });\n        }\n        return maxZIndex;\n    };\n    /**\n     *  topGroupZIndex \n     * @param nodes\n     */\n    DynamicGroup.prototype.calibrateTopGroupZIndex = function (nodes) {\n        var _this = this;\n        //  or  nodes  zIndex\n        var maxZIndex = DEFAULT_BOTTOM_Z_INDEX;\n        forEach(nodes, function (node) {\n            var nodeModel = _this.lf.getNodeModelById(node.id);\n            if (nodeModel) {\n                var currNodeMaxZIndex = _this.getMaxZIndex(nodeModel);\n                if (currNodeMaxZIndex > maxZIndex) {\n                    maxZIndex = currNodeMaxZIndex;\n                }\n            }\n        });\n        // TODO: \n        if (this.topGroupZIndex >= maxZIndex) {\n            // / zIndex\n            //  zIndex \n            return;\n        }\n        //  nodes  zIndex  this.topGroupZIndex \n        //  this.topGroupZIndex  zIndex  group\n        // https://github.com/didi/LogicFlow/issues/1535\n        //  BaseNode.zIndex = 1 \n        //  node  this.topGroupZIndex  -10000 \n        // this.topGroupZIndex + 1 -9999 node  zIndex \n        //  node  zIndex  zIndex \n        // TODO:  nodes  nodes \n        var allNodes = this.lf.graphModel.nodes;\n        var allGroups = filter(allNodes, function (node) { return !!node.isGroup; });\n        var max = this.topGroupZIndex;\n        forEach(allGroups, function (group) {\n            if (group.zIndex > max)\n                max = group.zIndex;\n        });\n        this.topGroupZIndex = max;\n    };\n    DynamicGroup.prototype.removeChildrenInGroupNodeData = function (nodeData) {\n        var _a;\n        var newNodeData = cloneDeep(nodeData);\n        delete newNodeData.children;\n        if ((_a = newNodeData.properties) === null || _a === void 0 ? void 0 : _a.children) {\n            delete newNodeData.properties.children;\n        }\n        return newNodeData;\n    };\n    /**\n     *  Group \n     *  nodes  edges ( Group  edges)\n     */\n    DynamicGroup.prototype.initGroupChildNodes = function (nodeIdMap, children, curGroup, distance) {\n        var _this = this;\n        // Group \n        var allChildNodes = [];\n        //  Group  EdgeData\n        var edgesDataArr = [];\n        // \n        var allRelatedEdges = [];\n        forEach(Array.from(children), function (childId) {\n            var childNode = _this.lf.getNodeModelById(childId);\n            if (childNode) {\n                var childNodeChildren = childNode.children;\n                var childNodeData = childNode.getData();\n                var eventType = EventType.NODE_GROUP_COPY || 'node:group-copy-add';\n                var newNodeConfig = transformNodeData(_this.removeChildrenInGroupNodeData(childNodeData), distance);\n                var tempChildNode = _this.lf.addNode(newNodeConfig, eventType);\n                curGroup.addChild(tempChildNode.id);\n                nodeIdMap[childId] = tempChildNode.id; // id  childId\n                allChildNodes.push(tempChildNode);\n                // 1.  children incoming\n                allRelatedEdges.push.apply(allRelatedEdges, __spreadArray([], __read(__spreadArray(__spreadArray([], __read(tempChildNode.incoming.edges), false), __read(tempChildNode.outgoing.edges), false)), false));\n                if (childNodeChildren instanceof Set) {\n                    var _a = _this.initGroupChildNodes(nodeIdMap, childNodeChildren, tempChildNode, distance), childNodes = _a.childNodes, edgesData = _a.edgesData;\n                    allChildNodes.push.apply(allChildNodes, __spreadArray([], __read(childNodes), false));\n                    edgesDataArr.push.apply(edgesDataArr, __spreadArray([], __read(edgesData), false));\n                }\n            }\n        });\n        // 1.  Group \n        var edgesInnerGroup = filter(allRelatedEdges, function (edge) {\n            return (has(nodeIdMap, edge.sourceNodeId) && has(nodeIdMap, edge.targetNodeId));\n        });\n        // 2.  Group  EdgeData  EdgeConfig\n        var edgesDataInnerGroup = map(edgesInnerGroup, function (edge) {\n            return edge.getData();\n        });\n        return {\n            childNodes: allChildNodes,\n            edgesData: edgesDataArr.concat(edgesDataInnerGroup),\n        };\n    };\n    /**\n     *  edge \n     * @param edge\n     * @param nodeIdMap\n     * @param distance\n     */\n    DynamicGroup.prototype.createEdge = function (edge, nodeIdMap, distance) {\n        var _a, _b;\n        var sourceNodeId = edge.sourceNodeId, targetNodeId = edge.targetNodeId;\n        var sourceId = (_a = nodeIdMap[sourceNodeId]) !== null && _a !== void 0 ? _a : sourceNodeId;\n        var targetId = (_b = nodeIdMap[targetNodeId]) !== null && _b !== void 0 ? _b : targetNodeId;\n        //  id  text  edgeConfig \n        var newEdgeConfig = cloneDeep(edge);\n        if (edge.id && typeof edge.text === 'object' && edge.text !== null) {\n            newEdgeConfig = transformEdgeData(edge, distance);\n        }\n        return this.lf.graphModel.addEdge(__assign(__assign({}, newEdgeConfig), { sourceNodeId: sourceId, targetNodeId: targetId }));\n    };\n    /**\n     * group:resizeboundschildrenbounds\n     * groupresize\n     * @param groupModel\n     * @param deltaX\n     * @param deltaY\n     * @param newWidth\n     * @param newHeight\n     */\n    DynamicGroup.prototype.checkGroupBoundsWithChildren = function (groupModel, deltaX, deltaY, newWidth, newHeight) {\n        if (groupModel.children) {\n            var children = groupModel.children, x = groupModel.x, y = groupModel.y;\n            // deltaXdeltaYmodelbounds\n            var newX = x + deltaX / 2;\n            var newY = y + deltaY / 2;\n            var groupMinX = newX - newWidth / 2;\n            var groupMinY = newY - newHeight / 2;\n            var groupMaxX = newX + newWidth / 2;\n            var groupMaxY = newY + newHeight / 2;\n            var childrenArray = Array.from(children);\n            for (var i = 0; i < childrenArray.length; i++) {\n                var childId = childrenArray[i];\n                var child = this.lf.getNodeModelById(childId);\n                if (!child) {\n                    continue;\n                }\n                var childBounds = child.getBounds();\n                var minX = childBounds.minX, minY = childBounds.minY, maxX = childBounds.maxX, maxY = childBounds.maxY;\n                // parent:resizeboundschild:boundsresize\n                var canResize = groupMinX <= minX &&\n                    groupMinY <= minY &&\n                    groupMaxX >= maxX &&\n                    groupMaxY >= maxY;\n                if (!canResize) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    };\n    /**\n     * Group \n     * TODO1.  components, material, tools\n     * 1.  init render  Group\n     * 2.  MiniMapControlMenu  render\n     * 3. init  render\n     * \n     *\n     * TODO: 2.  destroy  destroy \n     * TODO: 3.  Extension \n     */\n    DynamicGroup.prototype.init = function () {\n        var _this = this;\n        var lf = this.lf;\n        var graphModel = lf.graphModel;\n        // \n        // 1. \n        // 2. isRestrict\n        graphModel.addNodeMoveRules(function (model, deltaX, deltaY) {\n            //  group\n            if (model.isGroup) {\n                // https://github.com/didi/LogicFlow/issues/1826\n                // \n                // resizethis.xitemthis.x\n                // resizedeltaXdeltaX\n                // const nodeIds = this.getNodesInGroup(model as DynamicGroupNodeModel)\n                // graphModel.moveNodes(nodeIds, deltaX, deltaY, true)\n                return true;\n            }\n            var groupId = _this.nodeGroupMap.get(model.id);\n            var groupModel = _this.lf.getNodeModelById(groupId);\n            if (groupModel && groupModel.isRestrict) {\n                if (groupModel.autoResize) {\n                    // \n                    // node:mousemove\n                    return true;\n                }\n                else {\n                    // \n                    var groupBounds = groupModel.getBounds();\n                    return isAllowMoveTo(groupBounds, model, deltaX, deltaY);\n                }\n            }\n            return true;\n        });\n        // https://github.com/didi/LogicFlow/issues/1442\n        // https://github.com/didi/LogicFlow/issues/937\n        // resize\n        // isRestrictmodel resizechildren\n        // isRestricttransformWidthContainertrue\n        graphModel.addNodeResizeRules(function (model, deltaX, deltaY, width, height) {\n            if (model.isGroup && model.isRestrict) {\n                return _this.checkGroupBoundsWithChildren(model, deltaX, deltaY, width, height);\n            }\n            return true;\n        });\n        graphModel.dynamicGroup = this;\n        lf.on('node:add,node:drop,node:dnd-add', this.onNodeAddOrDrop);\n        lf.on('selection:drop', this.onSelectionDrop);\n        lf.on('node:delete', this.removeNodeFromGroup);\n        lf.on('node:drag,node:dnd-drag', this.onNodeDrag);\n        lf.on('selection:drag', this.onSelectionDrag);\n        lf.on('node:click', this.onNodeSelect);\n        lf.on('node:mousemove', this.onNodeMove);\n        lf.on('graph:rendered', this.onGraphRendered);\n        lf.on('group:add-node', this.onGroupAddNode);\n        // https://github.com/didi/LogicFlow/issues/1346\n        //  addElements()  addElements()  group  nodes  edges \n        // addElements api \n        lf.addElements = function (_a, distance) {\n            var selectedNodes = _a.nodes, selectedEdges = _a.edges;\n            if (distance === void 0) { distance = 40; }\n            // oldNodeId -> newNodeId  Map\n            var nodeIdMap = {};\n            // \n            var elements = {\n                nodes: [],\n                edges: [],\n            };\n            //  -> sourceNodeId  targetNodeId  Group \n            var edgesInnerGroup = [];\n            forEach(selectedNodes, function (node) {\n                var _a, _b;\n                var originId = node.id;\n                var children = (_b = (_a = node.properties) === null || _a === void 0 ? void 0 : _a.children) !== null && _b !== void 0 ? _b : node.children;\n                var model = lf.addNode(_this.removeChildrenInGroupNodeData(node));\n                if (originId)\n                    nodeIdMap[originId] = model.id;\n                elements.nodes.push(model); //  group  nodeModel\n                // TODO:  group  nodeModel  children\n                if (model.isGroup) {\n                    var edgesData = _this.initGroupChildNodes(nodeIdMap, children, model, distance).edgesData;\n                    edgesInnerGroup.push.apply(edgesInnerGroup, __spreadArray([], __read(edgesData), false));\n                }\n            });\n            forEach(edgesInnerGroup, function (edge) {\n                _this.createEdge(edge, nodeIdMap, distance);\n            });\n            forEach(selectedEdges, function (edge) {\n                elements.edges.push(_this.createEdge(edge, nodeIdMap, distance));\n            });\n            //  elements  element.selectElementById()\n            // shortcut.ts  nodes  edges  translationNodeData()\n            return elements;\n        };\n        this.render();\n    };\n    DynamicGroup.prototype.render = function () { };\n    DynamicGroup.prototype.destroy = function () {\n        //  dom \n        this.lf.off('node:add,node:drop,node:dnd-add', this.onNodeAddOrDrop);\n        this.lf.off('selection:drop', this.onSelectionDrop);\n        this.lf.off('node:delete', this.removeNodeFromGroup);\n        this.lf.off('node:drag,node:dnd-drag', this.onNodeDrag);\n        this.lf.off('selection:drag', this.onSelectionDrag);\n        this.lf.off('node:click', this.onNodeSelect);\n        this.lf.off('node:mousemove', this.onNodeMove);\n        this.lf.off('graph:rendered', this.onGraphRendered);\n        this.lf.off('group:add-node', this.onGroupAddNode);\n        //  lf.addElements \n        //  graphModel  addNodeMoveRules \n        // TODO: \n    };\n    DynamicGroup.pluginName = 'dynamicGroup';\n    return DynamicGroup;\n}());\nexport { DynamicGroup };\nexport default DynamicGroup;\n","// core\nvar SegmentDirection;\n(function (SegmentDirection) {\n    SegmentDirection[\"HORIZONTAL\"] = \"horizontal\";\n    SegmentDirection[\"VERTICAL\"] = \"vertical\";\n})(SegmentDirection || (SegmentDirection = {}));\n/**\n * \n * @param point \n * @param start \n * @param end \n * @param deviation \n * @returns boolean\n */\nexport var isInSegment = function (point, start, end, deviation) {\n    if (deviation === void 0) { deviation = 0; }\n    var distance = distToSegment(point, start, end);\n    return distance <= deviation;\n};\nfunction sqr(x) {\n    return x * x;\n}\nfunction dist2(v, w) {\n    return sqr(v.x - w.x) + sqr(v.y - w.y);\n}\nexport var distToSegmentSquared = function (p, v, w) {\n    var l2 = dist2(v, w);\n    if (l2 === 0)\n        return dist2(p, v);\n    var t = ((p.x - v.x) * (w.x - v.x) + (p.y - v.y) * (w.y - v.y)) / l2;\n    t = Math.max(0, Math.min(1, t));\n    return dist2(p, {\n        x: v.x + t * (w.x - v.x),\n        y: v.y + t * (w.y - v.y),\n    });\n};\nexport var distToSegment = function (point, start, end) {\n    return Math.sqrt(distToSegmentSquared(point, start, end));\n};\n/* bbox */\nvar getNodeBBox = function (node) {\n    var x = node.x, y = node.y, width = node.width, height = node.height;\n    var bBox = {\n        minX: x - width / 2,\n        minY: y - height / 2,\n        maxX: x + width / 2,\n        maxY: y + height / 2,\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        centerX: x,\n        centerY: y,\n    };\n    return bBox;\n};\n/*  */\nvar segmentDirection = function (start, end) {\n    var direction;\n    if (start.x === end.x) {\n        direction = SegmentDirection.VERTICAL;\n    }\n    else if (start.y === end.y) {\n        direction = SegmentDirection.HORIZONTAL;\n    }\n    return direction;\n};\n// \nexport var crossPointInSegment = function (node, start, end) {\n    var bBox = getNodeBBox(node);\n    var direction = segmentDirection(start, end);\n    var maxX = Math.max(start.x, end.x);\n    var minX = Math.min(start.x, end.x);\n    var maxY = Math.max(start.y, end.y);\n    var minY = Math.min(start.y, end.y);\n    var x = node.x, y = node.y, width = node.width, height = node.height;\n    if (direction === SegmentDirection.HORIZONTAL) {\n        // \n        if (maxX >= bBox.maxX && minX <= bBox.minX) {\n            return {\n                startCrossPoint: {\n                    x: start.x > end.x ? x + width / 2 : x - width / 2,\n                    y: start.y,\n                },\n                endCrossPoint: {\n                    x: start.x > end.x ? x - width / 2 : x + width / 2,\n                    y: start.y,\n                },\n            };\n        }\n    }\n    else if (direction === SegmentDirection.VERTICAL) {\n        // \n        if (maxY >= bBox.maxY && minY <= bBox.minY) {\n            return {\n                startCrossPoint: {\n                    x: start.x,\n                    y: start.y > end.y ? y + height / 2 : y - height / 2,\n                },\n                endCrossPoint: {\n                    x: start.x,\n                    y: start.y > end.y ? y - height / 2 : y + height / 2,\n                },\n            };\n        }\n    }\n};\n// \n// eslint-disable-next-line max-len\nexport var isNodeInSegment = function (node, polyline, deviation) {\n    if (deviation === void 0) { deviation = 0; }\n    var x = node.x, y = node.y;\n    var pointsList = polyline.pointsList;\n    for (var i = 0; i < pointsList.length - 1; i++) {\n        if (isInSegment({\n            x: x,\n            y: y,\n        }, pointsList[i], pointsList[i + 1], deviation)) {\n            var bBoxCross = crossPointInSegment(node, pointsList[i], pointsList[i + 1]);\n            if (bBoxCross) {\n                return {\n                    crossIndex: i + 1,\n                    crossPoints: bBoxCross,\n                };\n            }\n        }\n    }\n    return {\n        crossIndex: -1,\n        crossPoints: {\n            startCrossPoint: {\n                x: 0,\n                y: 0,\n            },\n            endCrossPoint: {\n                x: 0,\n                y: 0,\n            },\n        },\n    };\n};\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { jsx as _jsx } from \"preact/jsx-runtime\";\nimport { Component, createRef, ElementState, observer, StepDrag, } from '@logicflow/core';\nimport classNames from 'classnames';\nimport { findIndex } from 'lodash-es';\nvar Label = /** @class */ (function (_super) {\n    __extends(Label, _super);\n    function Label(props) {\n        var _this = _super.call(this, props) || this;\n        _this.textRef = createRef();\n        _this.setHoverOn = function () {\n            var element = _this.props.element;\n            if (element.isDragging || _this.state.isHovered)\n                return; //  hover \n            _this.setState({ isHovered: true });\n            element.setHovered(true);\n        };\n        _this.setHoverOff = function () {\n            var element = _this.props.element;\n            if (!_this.state.isHovered)\n                return;\n            _this.setState({ isHovered: false });\n            element.setHovered(false);\n        };\n        _this.handleMouseDown = function (e) {\n            var _a;\n            var _b = _this.props, label = _b.label, graphModel = _b.graphModel;\n            var nodeTextDraggable = graphModel.editConfigModel.nodeTextDraggable;\n            //  label   StepDrag \n            if (((_a = label.draggable) !== null && _a !== void 0 ? _a : nodeTextDraggable) &&\n                !_this.state.isDragging &&\n                !_this.state.isEditing) {\n                _this.stepDrag.handleMouseDown(e);\n            }\n        };\n        _this.handleMouseUp = function (e) {\n            if (_this.state.isDragging) {\n                _this.stepDrag.handleMouseUp(e);\n            }\n        };\n        _this.handleDragging = function (_a) {\n            var deltaX = _a.deltaX, deltaY = _a.deltaY;\n            if (!_this.state.isDragging) {\n                _this.setState({ isDragging: true });\n            }\n            var _b = _this.props, label = _b.label, graphModel = _b.graphModel;\n            // DONE:  deltaX  deltaY \n            var transformModel = graphModel.transformModel;\n            var _c = __read(transformModel.fixDeltaXY(deltaX, deltaY), 2), curDeltaX = _c[0], curDeltaY = _c[1];\n            _this.setElementModelLabelInfo({\n                x: label.x + curDeltaX,\n                y: label.y + curDeltaY,\n            });\n            graphModel.eventCenter.emit('label:drag', {\n                data: label.getData(),\n                model: label,\n            });\n        };\n        _this.handleDragEnd = function () {\n            _this.setState({ isDragging: false });\n        };\n        _this.handleClick = function (e) {\n            var _a = _this.props, label = _a.label, element = _a.element, graphModel = _a.graphModel;\n            // Label\n            element.setSelected(!_this.state.isSelected);\n            _this.setState({ isSelected: !_this.state.isSelected });\n            _this.setElementModelLabelInfo({\n                isSelected: true,\n            });\n            graphModel.eventCenter.emit('label:click', {\n                data: label.getData(),\n                e: e,\n                model: element,\n            });\n        };\n        _this.handleDbClick = function (e) {\n            var _a = _this.props, label = _a.label, element = _a.element, graphModel = _a.graphModel;\n            graphModel.eventCenter.emit('label:dblclick', {\n                data: label.getData(),\n                e: e,\n                model: element,\n            });\n            if (!label.editable) {\n                element.setSelected(true);\n                return;\n            }\n            element.setSelected();\n            element.setElementState(ElementState.TEXT_EDIT);\n            _this.setState({ isEditing: true });\n            // DONE:  label  focus \n            if (_this.textRef.current) {\n                _this.textRef.current.contentEditable = 'true';\n                _this.textRef.current.focus();\n                var range = document.createRange();\n                var selection = window.getSelection();\n                range.selectNodeContents(_this.textRef.current);\n                range.collapse(false);\n                selection === null || selection === void 0 ? void 0 : selection.removeAllRanges();\n                selection === null || selection === void 0 ? void 0 : selection.addRange(range);\n            }\n        };\n        _this.handleBlur = function (e) {\n            var _a = _this.props, label = _a.label, element = _a.element, eventCenter = _a.graphModel.eventCenter;\n            // DONE:  LABEL:BLUR \n            eventCenter.emit('label:blur', {\n                e: e,\n                model: element,\n                data: label.getData(),\n                element: _this.textRef.current,\n            });\n            _this.setState({\n                isDragging: false,\n                isHovered: false,\n                isSelected: false,\n            });\n        };\n        _this.handleInput = function (e) {\n            var _a = _this.props, label = _a.label, graphModel = _a.graphModel;\n            graphModel.eventCenter.emit('label:input', {\n                e: e,\n                data: label.getData(),\n            });\n        };\n        //  Label \n        _this.reCalcLabelSize = function () { };\n        var label = props.label, _a = props.graphModel, gridSize = _a.gridSize, eventCenter = _a.eventCenter;\n        _this.stepDrag = new StepDrag({\n            onDragging: _this.handleDragging,\n            onDragEnd: _this.handleDragEnd,\n            step: gridSize,\n            eventType: 'LABEL',\n            model: label,\n            eventCenter: eventCenter,\n        });\n        _this.state = {\n            isEditing: false,\n            isHovered: false,\n            isDragging: false,\n            isSelected: false,\n        };\n        return _this;\n    }\n    Label.prototype.setElementModelLabelInfo = function (data) {\n        var _a = this.props, label = _a.label, element = _a.element, graphModel = _a.graphModel;\n        var _label = element.properties._label;\n        var elementLabel = _label;\n        var idx = findIndex(elementLabel, function (cur) { return cur.id === label.id; });\n        var target = elementLabel[idx];\n        elementLabel[idx] = __assign(__assign({}, target), data);\n        var targetElem = graphModel.getElement(element.id);\n        targetElem === null || targetElem === void 0 ? void 0 : targetElem.setProperty('_label', elementLabel);\n    };\n    // TODO Label zIndex , Label \n    //  Label \n    Label.prototype.componentDidMount = function () {\n        var _this = this;\n        var _a = this.props, label = _a.label, element = _a.element, graphModel = _a.graphModel;\n        //   Label \n        graphModel.eventCenter.on('blank:click,node:click,edge:click,label:click', function (_a) {\n            var _b, _c, _d, _e;\n            var data = _a.data;\n            // label labellabel label \n            // \n            if ((data === null || data === void 0 ? void 0 : data.type) !== 'label' ||\n                (data.type === 'label' && data.id !== label.id) ||\n                _this.state.isSelected) {\n                _this.setState({ isSelected: false });\n            }\n            // label labellabel label \n            // \n            if (((data === null || data === void 0 ? void 0 : data.type) !== 'label' ||\n                (data.type == 'label' && data.id !== label.id)) &&\n                _this.state.isEditing) {\n                _this.setState({ isEditing: false });\n                var value = (_c = (_b = _this.textRef.current) === null || _b === void 0 ? void 0 : _b.innerText) !== null && _c !== void 0 ? _c : '';\n                var content = (_e = (_d = _this.textRef.current) === null || _d === void 0 ? void 0 : _d.innerHTML) !== null && _e !== void 0 ? _e : '';\n                _this.setElementModelLabelInfo({\n                    value: value,\n                    content: content,\n                    isSelected: false,\n                });\n                element.setElementState(ElementState.DEFAULT);\n            }\n            // label labellabel label DOM\n            // DOM\n            if (((data === null || data === void 0 ? void 0 : data.type) !== 'label' ||\n                (data.type == 'label' && data.id !== label.id)) &&\n                _this.textRef.current) {\n                _this.textRef.current.contentEditable = 'false';\n            }\n        });\n        // TODO:  Label \n        // eventCenter.on('node:drag', () => {})\n        // eventCenter.on('node:drop', () => {})\n        // eventCenter.on('node:mousemove', () => {})\n        //\n        // eventCenter.on('node:properties-change,node:properties-delete', () => {})\n    };\n    Label.prototype.componentDidUpdate = function () {\n        // snapshot: any, // previousState: Readonly<ILabelState>, // previousProps: Readonly<ILabelProps>,\n        // console.log('Label componentDidUpdate')\n        // console.log('previousProps', previousProps)\n        // console.log('previousState', previousState)\n        // console.log('snapshot', snapshot)\n    };\n    Label.prototype.componentWillUnmount = function () {\n        var graphModel = this.props.graphModel;\n        graphModel.eventCenter.off('blank:click,node:click,edge:click');\n    };\n    // TODO: \n    // shouldComponentUpdate or memo\n    Label.prototype.render = function () {\n        var _a;\n        var _b = this.props, label = _b.label, element = _b.element, graphModel = _b.graphModel;\n        var _c = this.state, isDragging = _c.isDragging, isHovered = _c.isHovered, isSelected = _c.isSelected, isEditing = _c.isEditing;\n        var transformModel = graphModel.transformModel;\n        var transform = transformModel.getTransformStyle().transform;\n        var id = label.id, x = label.x, y = label.y, zIndex = label.zIndex, vertical = label.vertical, style = label.style, rotate = label.rotate, content = label.content, labelWidth = label.labelWidth, textOverflowMode = label.textOverflowMode;\n        var maxLabelWidth = labelWidth !== null && labelWidth !== void 0 ? labelWidth : (element.BaseType === 'node' ? element.width - 20 : 80);\n        var containerStyle = {\n            left: \"\".concat(x - maxLabelWidth / 2, \"px\"),\n            top: \"\".concat(y - 10, \"px\"),\n            width: \"\".concat(maxLabelWidth, \"px\"),\n            height: '20px',\n            zIndex: zIndex !== null && zIndex !== void 0 ? zIndex : 1,\n            transform: rotate\n                ? \"\".concat(transform, \" rotate(\").concat(rotate, \"deg)\")\n                : \"\".concat(transform, \" rotate(\").concat(vertical ? -0.25 : 0, \"turn)\"),\n        };\n        return (_jsx(\"div\", { id: \"element-container-\".concat(id), className: classNames('lf-label-editor-container'), style: containerStyle, onPointerDown: this.handleMouseDown, onPointerUp: this.handleMouseUp, onClick: this.handleClick, onDblClick: this.handleDbClick, onBlur: this.handleBlur, onMouseEnter: this.setHoverOn, onMouseOver: this.setHoverOn, onMouseLeave: this.setHoverOff, children: _jsx(\"div\", { ref: this.textRef, id: \"editor-container-\".concat(id), className: classNames('lf-label-editor', (_a = {\n                        'lf-label-editor-dragging': isDragging,\n                        'lf-label-editor-editing': isEditing,\n                        'lf-label-editor-hover': !isEditing && (isHovered || isSelected)\n                    },\n                    _a[\"lf-label-editor-\".concat(textOverflowMode)] = !isEditing,\n                    _a)), onInput: this.handleInput, style: __assign({ maxWidth: \"\".concat(maxLabelWidth, \"px\"), boxSizing: 'border-box', display: 'inline-block', background: isEditing || element.BaseType === 'edge' ? '#fff' : 'transparent' }, style), dangerouslySetInnerHTML: { __html: content } }) }));\n    };\n    Label = __decorate([\n        observer\n    ], Label);\n    return Label;\n}(Component));\nexport { Label };\nexport default Label;\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { LogicFlowUtil, observable, toJS, } from '@logicflow/core';\nimport { assign } from 'lodash-es';\n// export type ILabelConfig = {}\nvar createUuid = LogicFlowUtil.createUuid;\nvar LabelModel = /** @class */ (function () {\n    function LabelModel(config, element, graphModel) {\n        var _a;\n        this.type = 'label'; // \n        this.content = '';\n        this.value = '';\n        this.style = {};\n        this.vertical = false; // \n        this.editable = true; // label \n        this.draggable = true; // label \n        this.textOverflowMode = 'default'; // Label \n        this.element = element;\n        this.graphModel = graphModel;\n        this.id = (_a = config.id) !== null && _a !== void 0 ? _a : createUuid();\n        this.initLabelData(config);\n    }\n    LabelModel.prototype.initLabelData = function (config) {\n        assign(this, config);\n    };\n    LabelModel.prototype.getData = function () {\n        return {\n            id: this.id,\n            x: this.x,\n            y: this.y,\n            type: 'label',\n            content: this.content,\n            value: this.value,\n            rotate: this.rotate,\n            style: toJS(this.style),\n            draggable: this.draggable,\n            editable: this.editable,\n            labelWidth: this.labelWidth,\n            textOverflowMode: this.textOverflowMode,\n            vertical: this.vertical,\n        };\n    };\n    __decorate([\n        observable\n    ], LabelModel.prototype, \"x\", void 0);\n    __decorate([\n        observable\n    ], LabelModel.prototype, \"y\", void 0);\n    __decorate([\n        observable\n    ], LabelModel.prototype, \"content\", void 0);\n    __decorate([\n        observable\n    ], LabelModel.prototype, \"value\", void 0);\n    __decorate([\n        observable\n    ], LabelModel.prototype, \"rotate\", void 0);\n    __decorate([\n        observable\n    ], LabelModel.prototype, \"style\", void 0);\n    __decorate([\n        observable\n    ], LabelModel.prototype, \"zIndex\", void 0);\n    __decorate([\n        observable\n    ], LabelModel.prototype, \"vertical\", void 0);\n    __decorate([\n        observable\n    ], LabelModel.prototype, \"editable\", void 0);\n    __decorate([\n        observable\n    ], LabelModel.prototype, \"draggable\", void 0);\n    __decorate([\n        observable\n    ], LabelModel.prototype, \"labelWidth\", void 0);\n    __decorate([\n        observable\n    ], LabelModel.prototype, \"textOverflowMode\", void 0);\n    return LabelModel;\n}());\nexport { LabelModel };\nexport default LabelModel;\n","/*!\n * vanilla-picker v2.12.3\n * https://vanilla-picker.js.org\n *\n * Copyright 2017-2024 Andreas Borgen (https://github.com/Sphinxxxx), Adam Brooks (https://github.com/dissimulate)\n * Released under the ISC license.\n */\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nString.prototype.startsWith = String.prototype.startsWith || function (needle) {\n    return this.indexOf(needle) === 0;\n};\nString.prototype.padStart = String.prototype.padStart || function (len, pad) {\n    var str = this;while (str.length < len) {\n        str = pad + str;\n    }return str;\n};\n\nvar colorNames = { cb: '0f8ff', tqw: 'aebd7', q: '-ffff', qmrn: '7fffd4', zr: '0ffff', bg: '5f5dc', bsq: 'e4c4', bck: '---', nch: 'ebcd', b: '--ff', bvt: '8a2be2', brwn: 'a52a2a', brw: 'deb887', ctb: '5f9ea0', hrt: '7fff-', chcT: 'd2691e', cr: '7f50', rnw: '6495ed', crns: '8dc', crms: 'dc143c', cn: '-ffff', Db: '--8b', Dcn: '-8b8b', Dgnr: 'b8860b', Dgr: 'a9a9a9', Dgrn: '-64-', Dkhk: 'bdb76b', Dmgn: '8b-8b', Dvgr: '556b2f', Drng: '8c-', Drch: '9932cc', Dr: '8b--', Dsmn: 'e9967a', Dsgr: '8fbc8f', DsTb: '483d8b', DsTg: '2f4f4f', Dtrq: '-ced1', Dvt: '94-d3', ppnk: '1493', pskb: '-bfff', mgr: '696969', grb: '1e90ff', rbrc: 'b22222', rwht: 'af0', stg: '228b22', chs: '-ff', gnsb: 'dcdcdc', st: '8f8ff', g: 'd7-', gnr: 'daa520', gr: '808080', grn: '-8-0', grnw: 'adff2f', hnw: '0fff0', htpn: '69b4', nnr: 'cd5c5c', ng: '4b-82', vr: '0', khk: '0e68c', vnr: 'e6e6fa', nrb: '0f5', wngr: '7cfc-', mnch: 'acd', Lb: 'add8e6', Lcr: '08080', Lcn: 'e0ffff', Lgnr: 'afad2', Lgr: 'd3d3d3', Lgrn: '90ee90', Lpnk: 'b6c1', Lsmn: 'a07a', Lsgr: '20b2aa', Lskb: '87cefa', LsTg: '778899', Lstb: 'b0c4de', Lw: 'e0', m: '-ff-', mgrn: '32cd32', nn: 'af0e6', mgnt: '-ff', mrn: '8--0', mqm: '66cdaa', mmb: '--cd', mmrc: 'ba55d3', mmpr: '9370db', msg: '3cb371', mmsT: '7b68ee', '': '-fa9a', mtr: '48d1cc', mmvt: 'c71585', mnLb: '191970', ntc: '5fffa', mstr: 'e4e1', mccs: 'e4b5', vjw: 'dead', nv: '--80', c: 'df5e6', v: '808-0', vrb: '6b8e23', rng: 'a5-', rngr: '45-', rch: 'da70d6', pgnr: 'eee8aa', pgrn: '98fb98', ptrq: 'afeeee', pvtr: 'db7093', ppwh: 'efd5', pchp: 'dab9', pr: 'cd853f', pnk: 'c0cb', pm: 'dda0dd', pwrb: 'b0e0e6', prp: '8-080', cc: '663399', r: '--', sbr: 'bc8f8f', rb: '4169e1', sbrw: '8b4513', smn: 'a8072', nbr: '4a460', sgrn: '2e8b57', ssh: '5ee', snn: 'a0522d', svr: 'c0c0c0', skb: '87ceeb', sTb: '6a5acd', sTgr: '708090', snw: 'afa', n: '-ff7f', stb: '4682b4', tn: 'd2b48c', t: '-8080', thst: 'd8bfd8', tmT: '6347', trqs: '40e0d0', vt: 'ee82ee', whT: '5deb3', wht: '', hts: '5f5f5', w: '-', wgrn: '9acd32' };\n\nfunction printNum(num) {\n    var decs = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n    var str = decs > 0 ? num.toFixed(decs).replace(/0+$/, '').replace(/\\.$/, '') : num.toString();\n    return str || '0';\n}\n\nvar Color = function () {\n    function Color(r, g, b, a) {\n        classCallCheck(this, Color);\n\n\n        var that = this;\n        function parseString(input) {\n\n            if (input.startsWith('hsl')) {\n                var _input$match$map = input.match(/([\\-\\d\\.e]+)/g).map(Number),\n                    _input$match$map2 = slicedToArray(_input$match$map, 4),\n                    h = _input$match$map2[0],\n                    s = _input$match$map2[1],\n                    l = _input$match$map2[2],\n                    _a = _input$match$map2[3];\n\n                if (_a === undefined) {\n                    _a = 1;\n                }\n\n                h /= 360;\n                s /= 100;\n                l /= 100;\n                that.hsla = [h, s, l, _a];\n            } else if (input.startsWith('rgb')) {\n                var _input$match$map3 = input.match(/([\\-\\d\\.e]+)/g).map(Number),\n                    _input$match$map4 = slicedToArray(_input$match$map3, 4),\n                    _r = _input$match$map4[0],\n                    _g = _input$match$map4[1],\n                    _b = _input$match$map4[2],\n                    _a2 = _input$match$map4[3];\n\n                if (_a2 === undefined) {\n                    _a2 = 1;\n                }\n\n                that.rgba = [_r, _g, _b, _a2];\n            } else {\n                if (input.startsWith('#')) {\n                    that.rgba = Color.hexToRgb(input);\n                } else {\n                    that.rgba = Color.nameToRgb(input) || Color.hexToRgb(input);\n                }\n            }\n        }\n\n        if (r === undefined) ; else if (Array.isArray(r)) {\n            this.rgba = r;\n        } else if (b === undefined) {\n            var color = r && '' + r;\n            if (color) {\n                parseString(color.toLowerCase());\n            }\n        } else {\n            this.rgba = [r, g, b, a === undefined ? 1 : a];\n        }\n    }\n\n    createClass(Color, [{\n        key: 'printRGB',\n        value: function printRGB(alpha) {\n            var rgb = alpha ? this.rgba : this.rgba.slice(0, 3),\n                vals = rgb.map(function (x, i) {\n                return printNum(x, i === 3 ? 3 : 0);\n            });\n\n            return alpha ? 'rgba(' + vals + ')' : 'rgb(' + vals + ')';\n        }\n    }, {\n        key: 'printHSL',\n        value: function printHSL(alpha) {\n            var mults = [360, 100, 100, 1],\n                suff = ['', '%', '%', ''];\n\n            var hsl = alpha ? this.hsla : this.hsla.slice(0, 3),\n                vals = hsl.map(function (x, i) {\n                return printNum(x * mults[i], i === 3 ? 3 : 1) + suff[i];\n            });\n\n            return alpha ? 'hsla(' + vals + ')' : 'hsl(' + vals + ')';\n        }\n    }, {\n        key: 'printHex',\n        value: function printHex(alpha) {\n            var hex = this.hex;\n            return alpha ? hex : hex.substring(0, 7);\n        }\n    }, {\n        key: 'rgba',\n        get: function get() {\n            if (this._rgba) {\n                return this._rgba;\n            }\n            if (!this._hsla) {\n                throw new Error('No color is set');\n            }\n\n            return this._rgba = Color.hslToRgb(this._hsla);\n        },\n        set: function set(rgb) {\n            if (rgb.length === 3) {\n                rgb[3] = 1;\n            }\n\n            this._rgba = rgb;\n            this._hsla = null;\n        }\n    }, {\n        key: 'rgbString',\n        get: function get() {\n            return this.printRGB();\n        }\n    }, {\n        key: 'rgbaString',\n        get: function get() {\n            return this.printRGB(true);\n        }\n    }, {\n        key: 'hsla',\n        get: function get() {\n            if (this._hsla) {\n                return this._hsla;\n            }\n            if (!this._rgba) {\n                throw new Error('No color is set');\n            }\n\n            return this._hsla = Color.rgbToHsl(this._rgba);\n        },\n        set: function set(hsl) {\n            if (hsl.length === 3) {\n                hsl[3] = 1;\n            }\n\n            this._hsla = hsl;\n            this._rgba = null;\n        }\n    }, {\n        key: 'hslString',\n        get: function get() {\n            return this.printHSL();\n        }\n    }, {\n        key: 'hslaString',\n        get: function get() {\n            return this.printHSL(true);\n        }\n    }, {\n        key: 'hex',\n        get: function get() {\n            var rgb = this.rgba,\n                hex = rgb.map(function (x, i) {\n                return i < 3 ? x.toString(16) : Math.round(x * 255).toString(16);\n            });\n\n            return '#' + hex.map(function (x) {\n                return x.padStart(2, '0');\n            }).join('');\n        },\n        set: function set(hex) {\n            this.rgba = Color.hexToRgb(hex);\n        }\n    }], [{\n        key: 'hexToRgb',\n        value: function hexToRgb(input) {\n\n            var hex = (input.startsWith('#') ? input.slice(1) : input).replace(/^(\\w{3})$/, '$1F').replace(/^(\\w)(\\w)(\\w)(\\w)$/, '$1$1$2$2$3$3$4$4').replace(/^(\\w{6})$/, '$1FF');\n\n            if (!hex.match(/^([0-9a-fA-F]{8})$/)) {\n                throw new Error('Unknown hex color; ' + input);\n            }\n\n            var rgba = hex.match(/^(\\w\\w)(\\w\\w)(\\w\\w)(\\w\\w)$/).slice(1).map(function (x) {\n                return parseInt(x, 16);\n            });\n\n            rgba[3] = rgba[3] / 255;\n            return rgba;\n        }\n    }, {\n        key: 'nameToRgb',\n        value: function nameToRgb(input) {\n\n            var hash = input.toLowerCase().replace('at', 'T').replace(/[aeiouyldf]/g, '').replace('ght', 'L').replace('rk', 'D').slice(-5, 4),\n                hex = colorNames[hash];\n            return hex === undefined ? hex : Color.hexToRgb(hex.replace(/\\-/g, '00').padStart(6, 'f'));\n        }\n    }, {\n        key: 'rgbToHsl',\n        value: function rgbToHsl(_ref) {\n            var _ref2 = slicedToArray(_ref, 4),\n                r = _ref2[0],\n                g = _ref2[1],\n                b = _ref2[2],\n                a = _ref2[3];\n\n            r /= 255;\n            g /= 255;\n            b /= 255;\n\n            var max = Math.max(r, g, b),\n                min = Math.min(r, g, b);\n            var h = void 0,\n                s = void 0,\n                l = (max + min) / 2;\n\n            if (max === min) {\n                h = s = 0;\n            } else {\n                var d = max - min;\n                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n                switch (max) {\n                    case r:\n                        h = (g - b) / d + (g < b ? 6 : 0);break;\n                    case g:\n                        h = (b - r) / d + 2;break;\n                    case b:\n                        h = (r - g) / d + 4;break;\n                }\n\n                h /= 6;\n            }\n\n            return [h, s, l, a];\n        }\n    }, {\n        key: 'hslToRgb',\n        value: function hslToRgb(_ref3) {\n            var _ref4 = slicedToArray(_ref3, 4),\n                h = _ref4[0],\n                s = _ref4[1],\n                l = _ref4[2],\n                a = _ref4[3];\n\n            var r = void 0,\n                g = void 0,\n                b = void 0;\n\n            if (s === 0) {\n                r = g = b = l;\n            } else {\n                var hue2rgb = function hue2rgb(p, q, t) {\n                    if (t < 0) t += 1;\n                    if (t > 1) t -= 1;\n                    if (t < 1 / 6) return p + (q - p) * 6 * t;\n                    if (t < 1 / 2) return q;\n                    if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n                    return p;\n                };\n\n                var q = l < 0.5 ? l * (1 + s) : l + s - l * s,\n                    p = 2 * l - q;\n\n                r = hue2rgb(p, q, h + 1 / 3);\n                g = hue2rgb(p, q, h);\n                b = hue2rgb(p, q, h - 1 / 3);\n            }\n\n            var rgba = [r * 255, g * 255, b * 255].map(Math.round);\n            rgba[3] = a;\n\n            return rgba;\n        }\n    }]);\n    return Color;\n}();\n\nvar EventBucket = function () {\n    function EventBucket() {\n        classCallCheck(this, EventBucket);\n\n        this._events = [];\n    }\n\n    createClass(EventBucket, [{\n        key: 'add',\n        value: function add(target, type, handler) {\n            target.addEventListener(type, handler, false);\n            this._events.push({\n                target: target,\n                type: type,\n                handler: handler\n            });\n        }\n    }, {\n        key: 'remove',\n        value: function remove(target, type, handler) {\n            this._events = this._events.filter(function (e) {\n                var isMatch = true;\n                if (target && target !== e.target) {\n                    isMatch = false;\n                }\n                if (type && type !== e.type) {\n                    isMatch = false;\n                }\n                if (handler && handler !== e.handler) {\n                    isMatch = false;\n                }\n\n                if (isMatch) {\n                    EventBucket._doRemove(e.target, e.type, e.handler);\n                }\n                return !isMatch;\n            });\n        }\n    }, {\n        key: 'destroy',\n        value: function destroy() {\n            this._events.forEach(function (e) {\n                return EventBucket._doRemove(e.target, e.type, e.handler);\n            });\n            this._events = [];\n        }\n    }], [{\n        key: '_doRemove',\n        value: function _doRemove(target, type, handler) {\n            target.removeEventListener(type, handler, false);\n        }\n    }]);\n    return EventBucket;\n}();\n\nfunction parseHTML(htmlString) {\n\n    var div = document.createElement('div');\n    div.innerHTML = htmlString;\n    return div.firstElementChild;\n}\n\nfunction dragTrack(eventBucket, area, callback) {\n    var dragging = false;\n\n    function clamp(val, min, max) {\n        return Math.max(min, Math.min(val, max));\n    }\n\n    function onMove(e, info, starting) {\n        if (starting) {\n            dragging = true;\n        }\n        if (!dragging) {\n            return;\n        }\n\n        e.preventDefault();\n\n        var bounds = area.getBoundingClientRect(),\n            w = bounds.width,\n            h = bounds.height,\n            x = info.clientX,\n            y = info.clientY;\n\n        var relX = clamp(x - bounds.left, 0, w),\n            relY = clamp(y - bounds.top, 0, h);\n\n        callback(relX / w, relY / h);\n    }\n\n    function onMouse(e, starting) {\n        var button = e.buttons === undefined ? e.which : e.buttons;\n        if (button === 1) {\n            onMove(e, e, starting);\n        } else {\n            dragging = false;\n        }\n    }\n\n    function onTouch(e, starting) {\n        if (e.touches.length === 1) {\n            onMove(e, e.touches[0], starting);\n        } else {\n            dragging = false;\n        }\n    }\n\n    eventBucket.add(area, 'mousedown', function (e) {\n        onMouse(e, true);\n    });\n    eventBucket.add(area, 'touchstart', function (e) {\n        onTouch(e, true);\n    });\n    eventBucket.add(window, 'mousemove', onMouse);\n    eventBucket.add(area, 'touchmove', onTouch);\n    eventBucket.add(window, 'mouseup', function (e) {\n        dragging = false;\n    });\n    eventBucket.add(area, 'touchend', function (e) {\n        dragging = false;\n    });\n    eventBucket.add(area, 'touchcancel', function (e) {\n        dragging = false;\n    });\n}\n\nvar BG_TRANSP = 'linear-gradient(45deg, lightgrey 25%, transparent 25%, transparent 75%, lightgrey 75%) 0 0 / 2em 2em,\\n                   linear-gradient(45deg, lightgrey 25%,       white 25%,       white 75%, lightgrey 75%) 1em 1em / 2em 2em';\nvar HUES = 360;\n\nvar EVENT_KEY = 'keydown',\n    EVENT_CLICK_OUTSIDE = 'mousedown',\n    EVENT_TAB_MOVE = 'focusin';\n\nfunction $(selector, context) {\n    return (context || document).querySelector(selector);\n}\n\nfunction stopEvent(e) {\n\n    e.preventDefault();\n    e.stopPropagation();\n}\nfunction onKey(bucket, target, keys, handler, stop) {\n    bucket.add(target, EVENT_KEY, function (e) {\n        if (keys.indexOf(e.key) >= 0) {\n            if (stop) {\n                stopEvent(e);\n            }\n            handler(e);\n        }\n    });\n}\n\nvar Picker = function () {\n    function Picker(options) {\n        classCallCheck(this, Picker);\n\n\n        this.settings = {\n\n            popup: 'right',\n            layout: 'default',\n            alpha: true,\n            editor: true,\n            editorFormat: 'hex',\n            cancelButton: false,\n            defaultColor: '#0cf'\n        };\n\n        this._events = new EventBucket();\n\n        this.onChange = null;\n\n        this.onDone = null;\n\n        this.onOpen = null;\n\n        this.onClose = null;\n\n        this.setOptions(options);\n    }\n\n    createClass(Picker, [{\n        key: 'setOptions',\n        value: function setOptions(options) {\n            var _this = this;\n\n            if (!options) {\n                return;\n            }\n            var settings = this.settings;\n\n            function transfer(source, target, skipKeys) {\n                for (var key in source) {\n                    if (skipKeys && skipKeys.indexOf(key) >= 0) {\n                        continue;\n                    }\n\n                    target[key] = source[key];\n                }\n            }\n\n            if (options instanceof HTMLElement) {\n                settings.parent = options;\n            } else {\n\n                if (settings.parent && options.parent && settings.parent !== options.parent) {\n                    this._events.remove(settings.parent);\n                    this._popupInited = false;\n                }\n\n                transfer(options, settings);\n\n                if (options.onChange) {\n                    this.onChange = options.onChange;\n                }\n                if (options.onDone) {\n                    this.onDone = options.onDone;\n                }\n                if (options.onOpen) {\n                    this.onOpen = options.onOpen;\n                }\n                if (options.onClose) {\n                    this.onClose = options.onClose;\n                }\n\n                var col = options.color || options.colour;\n                if (col) {\n                    this._setColor(col);\n                }\n            }\n\n            var parent = settings.parent;\n            if (parent && settings.popup && !this._popupInited) {\n\n                var openProxy = function openProxy(e) {\n                    return _this.openHandler(e);\n                };\n\n                this._events.add(parent, 'click', openProxy);\n\n                onKey(this._events, parent, [' ', 'Spacebar', 'Enter'], openProxy);\n\n                this._popupInited = true;\n            } else if (options.parent && !settings.popup) {\n                this.show();\n            }\n        }\n    }, {\n        key: 'openHandler',\n        value: function openHandler(e) {\n            if (this.show()) {\n\n                e && e.preventDefault();\n\n                this.settings.parent.style.pointerEvents = 'none';\n\n                var toFocus = e && e.type === EVENT_KEY ? this._domEdit : this.domElement;\n                setTimeout(function () {\n                    return toFocus.focus();\n                }, 100);\n\n                if (this.onOpen) {\n                    this.onOpen(this.colour);\n                }\n            }\n        }\n    }, {\n        key: 'closeHandler',\n        value: function closeHandler(e) {\n            var event = e && e.type;\n            var doHide = false;\n\n            if (!e) {\n                doHide = true;\n            } else if (event === EVENT_CLICK_OUTSIDE || event === EVENT_TAB_MOVE) {\n\n                var knownTime = (this.__containedEvent || 0) + 100;\n                if (e.timeStamp > knownTime) {\n                    doHide = true;\n                }\n            } else {\n\n                stopEvent(e);\n\n                doHide = true;\n            }\n\n            if (doHide && this.hide()) {\n                this.settings.parent.style.pointerEvents = '';\n\n                if (event !== EVENT_CLICK_OUTSIDE) {\n                    this.settings.parent.focus();\n                }\n\n                if (this.onClose) {\n                    this.onClose(this.colour);\n                }\n            }\n        }\n    }, {\n        key: 'movePopup',\n        value: function movePopup(options, open) {\n\n            this.closeHandler();\n\n            this.setOptions(options);\n            if (open) {\n                this.openHandler();\n            }\n        }\n    }, {\n        key: 'setColor',\n        value: function setColor(color, silent) {\n            this._setColor(color, { silent: silent });\n        }\n    }, {\n        key: '_setColor',\n        value: function _setColor(color, flags) {\n            if (typeof color === 'string') {\n                color = color.trim();\n            }\n            if (!color) {\n                return;\n            }\n\n            flags = flags || {};\n            var c = void 0;\n            try {\n\n                c = new Color(color);\n            } catch (ex) {\n                if (flags.failSilently) {\n                    return;\n                }\n                throw ex;\n            }\n\n            if (!this.settings.alpha) {\n                var hsla = c.hsla;\n                hsla[3] = 1;\n                c.hsla = hsla;\n            }\n            this.colour = this.color = c;\n            this._setHSLA(null, null, null, null, flags);\n        }\n    }, {\n        key: 'setColour',\n        value: function setColour(colour, silent) {\n            this.setColor(colour, silent);\n        }\n    }, {\n        key: 'show',\n        value: function show() {\n            var parent = this.settings.parent;\n            if (!parent) {\n                return false;\n            }\n\n            if (this.domElement) {\n                var toggled = this._toggleDOM(true);\n\n                this._setPosition();\n\n                return toggled;\n            }\n\n            var html = this.settings.template || '<div class=\"picker_wrapper\" tabindex=\"-1\"><div class=\"picker_arrow\"></div><div class=\"picker_hue picker_slider\"><div class=\"picker_selector\"></div></div><div class=\"picker_sl\"><div class=\"picker_selector\"></div></div><div class=\"picker_alpha picker_slider\"><div class=\"picker_selector\"></div></div><div class=\"picker_editor\"><input aria-label=\"Type a color name or hex value\"/></div><div class=\"picker_sample\"></div><div class=\"picker_done\"><button>Ok</button></div><div class=\"picker_cancel\"><button>Cancel</button></div></div>';\n            var wrapper = parseHTML(html);\n\n            this.domElement = wrapper;\n            this._domH = $('.picker_hue', wrapper);\n            this._domSL = $('.picker_sl', wrapper);\n            this._domA = $('.picker_alpha', wrapper);\n            this._domEdit = $('.picker_editor input', wrapper);\n            this._domSample = $('.picker_sample', wrapper);\n            this._domOkay = $('.picker_done button', wrapper);\n            this._domCancel = $('.picker_cancel button', wrapper);\n\n            wrapper.classList.add('layout_' + this.settings.layout);\n            if (!this.settings.alpha) {\n                wrapper.classList.add('no_alpha');\n            }\n            if (!this.settings.editor) {\n                wrapper.classList.add('no_editor');\n            }\n            if (!this.settings.cancelButton) {\n                wrapper.classList.add('no_cancel');\n            }\n            this._ifPopup(function () {\n                return wrapper.classList.add('popup');\n            });\n\n            this._setPosition();\n\n            if (this.colour) {\n                this._updateUI();\n            } else {\n                this._setColor(this.settings.defaultColor);\n            }\n            this._bindEvents();\n\n            return true;\n        }\n    }, {\n        key: 'hide',\n        value: function hide() {\n            return this._toggleDOM(false);\n        }\n    }, {\n        key: 'destroy',\n        value: function destroy() {\n            this._events.destroy();\n            if (this.domElement) {\n                this.settings.parent.removeChild(this.domElement);\n            }\n        }\n    }, {\n        key: '_bindEvents',\n        value: function _bindEvents() {\n            var _this2 = this;\n\n            var that = this,\n                dom = this.domElement,\n                events = this._events;\n\n            function addEvent(target, type, handler) {\n                events.add(target, type, handler);\n            }\n\n            addEvent(dom, 'click', function (e) {\n                return e.preventDefault();\n            });\n\n            dragTrack(events, this._domH, function (x, y) {\n                return that._setHSLA(x);\n            });\n\n            dragTrack(events, this._domSL, function (x, y) {\n                return that._setHSLA(null, x, 1 - y);\n            });\n\n            if (this.settings.alpha) {\n                dragTrack(events, this._domA, function (x, y) {\n                    return that._setHSLA(null, null, null, 1 - y);\n                });\n            }\n\n            var editInput = this._domEdit;\n            {\n                addEvent(editInput, 'input', function (e) {\n                    that._setColor(this.value, { fromEditor: true, failSilently: true });\n                });\n\n                addEvent(editInput, 'focus', function (e) {\n                    var input = this;\n\n                    if (input.selectionStart === input.selectionEnd) {\n                        input.select();\n                    }\n                });\n            }\n\n            this._ifPopup(function () {\n\n                var popupCloseProxy = function popupCloseProxy(e) {\n                    return _this2.closeHandler(e);\n                };\n\n                addEvent(window, EVENT_CLICK_OUTSIDE, popupCloseProxy);\n                addEvent(window, EVENT_TAB_MOVE, popupCloseProxy);\n                onKey(events, dom, ['Esc', 'Escape'], popupCloseProxy);\n\n                var timeKeeper = function timeKeeper(e) {\n                    _this2.__containedEvent = e.timeStamp;\n                };\n                addEvent(dom, EVENT_CLICK_OUTSIDE, timeKeeper);\n\n                addEvent(dom, EVENT_TAB_MOVE, timeKeeper);\n\n                addEvent(_this2._domCancel, 'click', popupCloseProxy);\n            });\n\n            var onDoneProxy = function onDoneProxy(e) {\n                _this2._ifPopup(function () {\n                    return _this2.closeHandler(e);\n                });\n                if (_this2.onDone) {\n                    _this2.onDone(_this2.colour);\n                }\n            };\n            addEvent(this._domOkay, 'click', onDoneProxy);\n            onKey(events, dom, ['Enter'], onDoneProxy);\n        }\n    }, {\n        key: '_setPosition',\n        value: function _setPosition() {\n            var parent = this.settings.parent,\n                elm = this.domElement;\n\n            if (parent !== elm.parentNode) {\n                parent.appendChild(elm);\n            }\n\n            this._ifPopup(function (popup) {\n\n                if (getComputedStyle(parent).position === 'static') {\n                    parent.style.position = 'relative';\n                }\n\n                var cssClass = popup === true ? 'popup_right' : 'popup_' + popup;\n\n                ['popup_top', 'popup_bottom', 'popup_left', 'popup_right'].forEach(function (c) {\n\n                    if (c === cssClass) {\n                        elm.classList.add(c);\n                    } else {\n                        elm.classList.remove(c);\n                    }\n                });\n\n                elm.classList.add(cssClass);\n            });\n        }\n    }, {\n        key: '_setHSLA',\n        value: function _setHSLA(h, s, l, a, flags) {\n            flags = flags || {};\n\n            var col = this.colour,\n                hsla = col.hsla;\n\n            [h, s, l, a].forEach(function (x, i) {\n                if (x || x === 0) {\n                    hsla[i] = x;\n                }\n            });\n            col.hsla = hsla;\n\n            this._updateUI(flags);\n\n            if (this.onChange && !flags.silent) {\n                this.onChange(col);\n            }\n        }\n    }, {\n        key: '_updateUI',\n        value: function _updateUI(flags) {\n            if (!this.domElement) {\n                return;\n            }\n            flags = flags || {};\n\n            var col = this.colour,\n                hsl = col.hsla,\n                cssHue = 'hsl(' + hsl[0] * HUES + ', 100%, 50%)',\n                cssHSL = col.hslString,\n                cssHSLA = col.hslaString;\n\n            var uiH = this._domH,\n                uiSL = this._domSL,\n                uiA = this._domA,\n                thumbH = $('.picker_selector', uiH),\n                thumbSL = $('.picker_selector', uiSL),\n                thumbA = $('.picker_selector', uiA);\n\n            function posX(parent, child, relX) {\n                child.style.left = relX * 100 + '%';\n            }\n            function posY(parent, child, relY) {\n                child.style.top = relY * 100 + '%';\n            }\n\n            posX(uiH, thumbH, hsl[0]);\n\n            this._domSL.style.backgroundColor = this._domH.style.color = cssHue;\n\n            posX(uiSL, thumbSL, hsl[1]);\n            posY(uiSL, thumbSL, 1 - hsl[2]);\n\n            uiSL.style.color = cssHSL;\n\n            posY(uiA, thumbA, 1 - hsl[3]);\n\n            var opaque = cssHSL,\n                transp = opaque.replace('hsl', 'hsla').replace(')', ', 0)'),\n                bg = 'linear-gradient(' + [opaque, transp] + ')';\n\n            this._domA.style.background = bg + ', ' + BG_TRANSP;\n\n            if (!flags.fromEditor) {\n                var format = this.settings.editorFormat,\n                    alpha = this.settings.alpha;\n\n                var value = void 0;\n                switch (format) {\n                    case 'rgb':\n                        value = col.printRGB(alpha);break;\n                    case 'hsl':\n                        value = col.printHSL(alpha);break;\n                    default:\n                        value = col.printHex(alpha);\n                }\n                this._domEdit.value = value;\n            }\n\n            this._domSample.style.color = cssHSLA;\n        }\n    }, {\n        key: '_ifPopup',\n        value: function _ifPopup(actionIf, actionElse) {\n            if (this.settings.parent && this.settings.popup) {\n                actionIf && actionIf(this.settings.popup);\n            } else {\n                actionElse && actionElse();\n            }\n        }\n    }, {\n        key: '_toggleDOM',\n        value: function _toggleDOM(toVisible) {\n            var dom = this.domElement;\n            if (!dom) {\n                return false;\n            }\n\n            var displayStyle = toVisible ? '' : 'none',\n                toggle = dom.style.display !== displayStyle;\n\n            if (toggle) {\n                dom.style.display = displayStyle;\n            }\n            return toggle;\n        }\n    }]);\n    return Picker;\n}();\n\n{\n    var style = document.createElement('style');\n    style.textContent = '.picker_wrapper.no_alpha .picker_alpha{display:none}.picker_wrapper.no_editor .picker_editor{position:absolute;z-index:-1;opacity:0}.picker_wrapper.no_cancel .picker_cancel{display:none}.layout_default.picker_wrapper{display:flex;flex-flow:row wrap;justify-content:space-between;align-items:stretch;font-size:10px;width:25em;padding:.5em}.layout_default.picker_wrapper input,.layout_default.picker_wrapper button{font-size:1rem}.layout_default.picker_wrapper>*{margin:.5em}.layout_default.picker_wrapper::before{content:\"\";display:block;width:100%;height:0;order:1}.layout_default .picker_slider,.layout_default .picker_selector{padding:1em}.layout_default .picker_hue{width:100%}.layout_default .picker_sl{flex:1 1 auto}.layout_default .picker_sl::before{content:\"\";display:block;padding-bottom:100%}.layout_default .picker_editor{order:1;width:6.5rem}.layout_default .picker_editor input{width:100%;height:100%}.layout_default .picker_sample{order:1;flex:1 1 auto}.layout_default .picker_done,.layout_default .picker_cancel{order:1}.picker_wrapper{box-sizing:border-box;background:#f2f2f2;box-shadow:0 0 0 1px silver;cursor:default;font-family:sans-serif;color:#444;pointer-events:auto}.picker_wrapper:focus{outline:none}.picker_wrapper button,.picker_wrapper input{box-sizing:border-box;border:none;box-shadow:0 0 0 1px silver;outline:none}.picker_wrapper button:focus,.picker_wrapper button:active,.picker_wrapper input:focus,.picker_wrapper input:active{box-shadow:0 0 2px 1px #1e90ff}.picker_wrapper button{padding:.4em .6em;cursor:pointer;background-color:#f5f5f5;background-image:linear-gradient(0deg, gainsboro, transparent)}.picker_wrapper button:active{background-image:linear-gradient(0deg, transparent, gainsboro)}.picker_wrapper button:hover{background-color:#fff}.picker_selector{position:absolute;z-index:1;display:block;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);border:2px solid #fff;border-radius:100%;box-shadow:0 0 3px 1px #67b9ff;background:currentColor;cursor:pointer}.picker_slider .picker_selector{border-radius:2px}.picker_hue{position:relative;background-image:linear-gradient(90deg, red, yellow, lime, cyan, blue, magenta, red);box-shadow:0 0 0 1px silver}.picker_sl{position:relative;box-shadow:0 0 0 1px silver;background-image:linear-gradient(180deg, white, rgba(255, 255, 255, 0) 50%),linear-gradient(0deg, black, rgba(0, 0, 0, 0) 50%),linear-gradient(90deg, #808080, rgba(128, 128, 128, 0))}.picker_alpha,.picker_sample{position:relative;background:linear-gradient(45deg, lightgrey 25%, transparent 25%, transparent 75%, lightgrey 75%) 0 0/2em 2em,linear-gradient(45deg, lightgrey 25%, white 25%, white 75%, lightgrey 75%) 1em 1em/2em 2em;box-shadow:0 0 0 1px silver}.picker_alpha .picker_selector,.picker_sample .picker_selector{background:none}.picker_editor input{font-family:monospace;padding:.2em .4em}.picker_sample::before{content:\"\";position:absolute;display:block;width:100%;height:100%;background:currentColor}.picker_arrow{position:absolute;z-index:-1}.picker_wrapper.popup{position:absolute;z-index:2;margin:1.5em}.picker_wrapper.popup,.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{background:#f2f2f2;box-shadow:0 0 10px 1px rgba(0,0,0,.4)}.picker_wrapper.popup .picker_arrow{width:3em;height:3em;margin:0}.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{content:\"\";display:block;position:absolute;top:0;left:0;z-index:-99}.picker_wrapper.popup .picker_arrow::before{width:100%;height:100%;-webkit-transform:skew(45deg);transform:skew(45deg);-webkit-transform-origin:0 100%;transform-origin:0 100%}.picker_wrapper.popup .picker_arrow::after{width:150%;height:150%;box-shadow:none}.popup.popup_top{bottom:100%;left:0}.popup.popup_top .picker_arrow{bottom:0;left:0;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.popup.popup_bottom{top:100%;left:0}.popup.popup_bottom .picker_arrow{top:0;left:0;-webkit-transform:rotate(90deg) scale(1, -1);transform:rotate(90deg) scale(1, -1)}.popup.popup_left{top:0;right:100%}.popup.popup_left .picker_arrow{top:0;right:0;-webkit-transform:scale(-1, 1);transform:scale(-1, 1)}.popup.popup_right{top:0;left:100%}.popup.popup_right .picker_arrow{top:0;left:0}';\n    document.documentElement.firstElementChild.appendChild(style);\n\n    Picker.StyleElement = style;\n}\n\nexport { Picker as default };\n","/**\n * Rangy, a cross-browser JavaScript range and selection library\n * https://github.com/timdown/rangy\n *\n * Copyright 2024, Tim Down\n * Licensed under the MIT license.\n * Version: 1.3.2\n * Build date: 2 November 2024\n */\n\n(function(factory, root) {\n    if (typeof define == \"function\" && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(factory);\n    } else if (typeof module != \"undefined\" && typeof exports == \"object\") {\n        // Node/CommonJS style\n        module.exports = factory();\n    } else {\n        // No AMD or CommonJS support so we place Rangy in (probably) the global variable\n        root.rangy = factory();\n    }\n})(function() {\n\n    var OBJECT = \"object\", FUNCTION = \"function\", UNDEFINED = \"undefined\";\n\n    // Minimal set of properties required for DOM Level 2 Range compliance. Comparison constants such as START_TO_START\n    // are omitted because ranges in KHTML do not have them but otherwise work perfectly well. See issue 113.\n    var domRangeProperties = [\"startContainer\", \"startOffset\", \"endContainer\", \"endOffset\", \"collapsed\",\n        \"commonAncestorContainer\"];\n\n    // Minimal set of methods required for DOM Level 2 Range compliance\n    var domRangeMethods = [\"setStart\", \"setStartBefore\", \"setStartAfter\", \"setEnd\", \"setEndBefore\",\n        \"setEndAfter\", \"collapse\", \"selectNode\", \"selectNodeContents\", \"compareBoundaryPoints\", \"deleteContents\",\n        \"extractContents\", \"cloneContents\", \"insertNode\", \"surroundContents\", \"cloneRange\", \"toString\", \"detach\"];\n\n    var textRangeProperties = [\"boundingHeight\", \"boundingLeft\", \"boundingTop\", \"boundingWidth\", \"htmlText\", \"text\"];\n\n    // Subset of TextRange's full set of methods that we're interested in\n    var textRangeMethods = [\"collapse\", \"compareEndPoints\", \"duplicate\", \"moveToElementText\", \"parentElement\", \"select\",\n        \"setEndPoint\", \"getBoundingClientRect\"];\n\n    /*----------------------------------------------------------------------------------------------------------------*/\n\n    // Trio of functions taken from Peter Michaux's article:\n    // http://peter.michaux.ca/articles/feature-detection-state-of-the-art-browser-scripting\n    function isHostMethod(o, p) {\n        var t = typeof o[p];\n        return t == FUNCTION || (!!(t == OBJECT && o[p])) || t == \"unknown\";\n    }\n\n    function isHostObject(o, p) {\n        return !!(typeof o[p] == OBJECT && o[p]);\n    }\n\n    function isHostProperty(o, p) {\n        return typeof o[p] != UNDEFINED;\n    }\n\n    // Creates a convenience function to save verbose repeated calls to tests functions\n    function createMultiplePropertyTest(testFunc) {\n        return function(o, props) {\n            var i = props.length;\n            while (i--) {\n                if (!testFunc(o, props[i])) {\n                    return false;\n                }\n            }\n            return true;\n        };\n    }\n\n    // Next trio of functions are a convenience to save verbose repeated calls to previous two functions\n    var areHostMethods = createMultiplePropertyTest(isHostMethod);\n    var areHostObjects = createMultiplePropertyTest(isHostObject);\n    var areHostProperties = createMultiplePropertyTest(isHostProperty);\n\n    function isTextRange(range) {\n        return range && areHostMethods(range, textRangeMethods) && areHostProperties(range, textRangeProperties);\n    }\n\n    function getBody(doc) {\n        return isHostObject(doc, \"body\") ? doc.body : doc.getElementsByTagName(\"body\")[0];\n    }\n\n    var forEach = [].forEach ?\n        function(arr, func) {\n            arr.forEach(func);\n        } :\n        function(arr, func) {\n            for (var i = 0, len = arr.length; i < len; ++i) {\n                func(arr[i], i);\n            }\n        };\n\n    var modules = {};\n\n    var isBrowser = (typeof window != UNDEFINED && typeof document != UNDEFINED);\n\n    var util = {\n        isHostMethod: isHostMethod,\n        isHostObject: isHostObject,\n        isHostProperty: isHostProperty,\n        areHostMethods: areHostMethods,\n        areHostObjects: areHostObjects,\n        areHostProperties: areHostProperties,\n        isTextRange: isTextRange,\n        getBody: getBody,\n        forEach: forEach\n    };\n\n    var api = {\n        version: \"1.3.2\",\n        initialized: false,\n        isBrowser: isBrowser,\n        supported: true,\n        util: util,\n        features: {},\n        modules: modules,\n        config: {\n            alertOnFail: false,\n            alertOnWarn: false,\n            preferTextRange: false,\n            autoInitialize: (typeof rangyAutoInitialize == UNDEFINED) ? true : rangyAutoInitialize\n        }\n    };\n\n    function consoleLog(msg) {\n        if (typeof console != UNDEFINED && isHostMethod(console, \"log\")) {\n            console.log(msg);\n        }\n    }\n\n    function alertOrLog(msg, shouldAlert) {\n        if (isBrowser && shouldAlert) {\n            alert(msg);\n        } else  {\n            consoleLog(msg);\n        }\n    }\n\n    function fail(reason) {\n        api.initialized = true;\n        api.supported = false;\n        alertOrLog(\"Rangy is not supported in this environment. Reason: \" + reason, api.config.alertOnFail);\n    }\n\n    api.fail = fail;\n\n    function warn(msg) {\n        alertOrLog(\"Rangy warning: \" + msg, api.config.alertOnWarn);\n    }\n\n    api.warn = warn;\n\n    // Add utility extend() method\n    var extend;\n    if ({}.hasOwnProperty) {\n        util.extend = extend = function(obj, props, deep) {\n            var o, p;\n            for (var i in props) {\n                if (i === \"__proto__\" || i === \"constructor\" || i === \"prototype\") {\n                    continue;\n                }\n                if (props.hasOwnProperty(i)) {\n                    o = obj[i];\n                    p = props[i];\n                    if (deep && o !== null && typeof o == \"object\" && p !== null && typeof p == \"object\") {\n                        extend(o, p, true);\n                    }\n                    obj[i] = p;\n                }\n            }\n            // Special case for toString, which does not show up in for...in loops in IE <= 8\n            if (props.hasOwnProperty(\"toString\")) {\n                obj.toString = props.toString;\n            }\n            return obj;\n        };\n\n        util.createOptions = function(optionsParam, defaults) {\n            var options = {};\n            extend(options, defaults);\n            if (optionsParam) {\n                extend(options, optionsParam);\n            }\n            return options;\n        };\n    } else {\n        fail(\"hasOwnProperty not supported\");\n    }\n\n    // Test whether we're in a browser and bail out if not\n    if (!isBrowser) {\n        fail(\"Rangy can only run in a browser\");\n    }\n\n    // Test whether Array.prototype.slice can be relied on for NodeLists and use an alternative toArray() if not\n    (function() {\n        var toArray;\n\n        if (isBrowser) {\n            var el = document.createElement(\"div\");\n            el.appendChild(document.createElement(\"span\"));\n            var slice = [].slice;\n            try {\n                if (slice.call(el.childNodes, 0)[0].nodeType == 1) {\n                    toArray = function(arrayLike) {\n                        return slice.call(arrayLike, 0);\n                    };\n                }\n            } catch (e) {}\n        }\n\n        if (!toArray) {\n            toArray = function(arrayLike) {\n                var arr = [];\n                for (var i = 0, len = arrayLike.length; i < len; ++i) {\n                    arr[i] = arrayLike[i];\n                }\n                return arr;\n            };\n        }\n\n        util.toArray = toArray;\n    })();\n\n    // Very simple event handler wrapper function that doesn't attempt to solve issues such as \"this\" handling or\n    // normalization of event properties because we don't need this.\n    var addListener;\n    if (isBrowser) {\n        if (isHostMethod(document, \"addEventListener\")) {\n            addListener = function(obj, eventType, listener) {\n                obj.addEventListener(eventType, listener, false);\n            };\n        } else if (isHostMethod(document, \"attachEvent\")) {\n            addListener = function(obj, eventType, listener) {\n                obj.attachEvent(\"on\" + eventType, listener);\n            };\n        } else {\n            fail(\"Document does not have required addEventListener or attachEvent method\");\n        }\n\n        util.addListener = addListener;\n    }\n\n    var initListeners = [];\n\n    function getErrorDesc(ex) {\n        return ex.message || ex.description || String(ex);\n    }\n\n    // Initialization\n    function init() {\n        if (!isBrowser || api.initialized) {\n            return;\n        }\n        var testRange;\n        var implementsDomRange = false, implementsTextRange = false;\n\n        // First, perform basic feature tests\n\n        if (isHostMethod(document, \"createRange\")) {\n            testRange = document.createRange();\n            if (areHostMethods(testRange, domRangeMethods) && areHostProperties(testRange, domRangeProperties)) {\n                implementsDomRange = true;\n            }\n        }\n\n        var body = getBody(document);\n        if (!body || body.nodeName.toLowerCase() != \"body\") {\n            fail(\"No body element found\");\n            return;\n        }\n\n        if (body && isHostMethod(body, \"createTextRange\")) {\n            testRange = body.createTextRange();\n            if (isTextRange(testRange)) {\n                implementsTextRange = true;\n            }\n        }\n\n        if (!implementsDomRange && !implementsTextRange) {\n            fail(\"Neither Range nor TextRange are available\");\n            return;\n        }\n\n        api.initialized = true;\n        api.features = {\n            implementsDomRange: implementsDomRange,\n            implementsTextRange: implementsTextRange\n        };\n\n        // Initialize modules\n        var module, errorMessage;\n        for (var moduleName in modules) {\n            if ( (module = modules[moduleName]) instanceof Module ) {\n                module.init(module, api);\n            }\n        }\n\n        // Call init listeners\n        for (var i = 0, len = initListeners.length; i < len; ++i) {\n            try {\n                initListeners[i](api);\n            } catch (ex) {\n                errorMessage = \"Rangy init listener threw an exception. Continuing. Detail: \" + getErrorDesc(ex);\n                consoleLog(errorMessage);\n            }\n        }\n    }\n\n    function deprecationNotice(deprecated, replacement, module) {\n        if (module) {\n            deprecated += \" in module \" + module.name;\n        }\n        api.warn(\"DEPRECATED: \" + deprecated + \" is deprecated. Please use \" +\n        replacement + \" instead.\");\n    }\n\n    function createAliasForDeprecatedMethod(owner, deprecated, replacement, module) {\n        owner[deprecated] = function() {\n            deprecationNotice(deprecated, replacement, module);\n            return owner[replacement].apply(owner, util.toArray(arguments));\n        };\n    }\n\n    util.deprecationNotice = deprecationNotice;\n    util.createAliasForDeprecatedMethod = createAliasForDeprecatedMethod;\n\n    // Allow external scripts to initialize this library in case it's loaded after the document has loaded\n    api.init = init;\n\n    // Execute listener immediately if already initialized\n    api.addInitListener = function(listener) {\n        if (api.initialized) {\n            listener(api);\n        } else {\n            initListeners.push(listener);\n        }\n    };\n\n    var shimListeners = [];\n\n    api.addShimListener = function(listener) {\n        shimListeners.push(listener);\n    };\n\n    function shim(win) {\n        win = win || window;\n        init();\n\n        // Notify listeners\n        for (var i = 0, len = shimListeners.length; i < len; ++i) {\n            shimListeners[i](win);\n        }\n    }\n\n    if (isBrowser) {\n        api.shim = api.createMissingNativeApi = shim;\n        createAliasForDeprecatedMethod(api, \"createMissingNativeApi\", \"shim\");\n    }\n\n    function Module(name, dependencies, initializer) {\n        this.name = name;\n        this.dependencies = dependencies;\n        this.initialized = false;\n        this.supported = false;\n        this.initializer = initializer;\n    }\n\n    Module.prototype = {\n        init: function() {\n            var requiredModuleNames = this.dependencies || [];\n            for (var i = 0, len = requiredModuleNames.length, requiredModule, moduleName; i < len; ++i) {\n                moduleName = requiredModuleNames[i];\n\n                requiredModule = modules[moduleName];\n                if (!requiredModule || !(requiredModule instanceof Module)) {\n                    throw new Error(\"required module '\" + moduleName + \"' not found\");\n                }\n\n                requiredModule.init();\n\n                if (!requiredModule.supported) {\n                    throw new Error(\"required module '\" + moduleName + \"' not supported\");\n                }\n            }\n\n            // Now run initializer\n            this.initializer(this);\n        },\n\n        fail: function(reason) {\n            this.initialized = true;\n            this.supported = false;\n            throw new Error(reason);\n        },\n\n        warn: function(msg) {\n            api.warn(\"Module \" + this.name + \": \" + msg);\n        },\n\n        deprecationNotice: function(deprecated, replacement) {\n            api.warn(\"DEPRECATED: \" + deprecated + \" in module \" + this.name + \" is deprecated. Please use \" +\n                replacement + \" instead\");\n        },\n\n        createError: function(msg) {\n            return new Error(\"Error in Rangy \" + this.name + \" module: \" + msg);\n        }\n    };\n\n    function createModule(name, dependencies, initFunc) {\n        var newModule = new Module(name, dependencies, function(module) {\n            if (!module.initialized) {\n                module.initialized = true;\n                try {\n                    initFunc(api, module);\n                    module.supported = true;\n                } catch (ex) {\n                    var errorMessage = \"Module '\" + name + \"' failed to load: \" + getErrorDesc(ex);\n                    consoleLog(errorMessage);\n                    if (ex.stack) {\n                        consoleLog(ex.stack);\n                    }\n                }\n            }\n        });\n        modules[name] = newModule;\n        return newModule;\n    }\n\n    api.createModule = function(name) {\n        // Allow 2 or 3 arguments (second argument is an optional array of dependencies)\n        var initFunc, dependencies;\n        if (arguments.length == 2) {\n            initFunc = arguments[1];\n            dependencies = [];\n        } else {\n            initFunc = arguments[2];\n            dependencies = arguments[1];\n        }\n\n        var module = createModule(name, dependencies, initFunc);\n\n        // Initialize the module immediately if the core is already initialized\n        if (api.initialized && api.supported) {\n            module.init();\n        }\n    };\n\n    api.createCoreModule = function(name, dependencies, initFunc) {\n        createModule(name, dependencies, initFunc);\n    };\n\n    /*----------------------------------------------------------------------------------------------------------------*/\n\n    // Ensure rangy.rangePrototype and rangy.selectionPrototype are available immediately\n\n    function RangePrototype() {}\n    api.RangePrototype = RangePrototype;\n    api.rangePrototype = new RangePrototype();\n\n    function SelectionPrototype() {}\n    api.selectionPrototype = new SelectionPrototype();\n\n    /*----------------------------------------------------------------------------------------------------------------*/\n\n    // DOM utility methods used by Rangy\n    api.createCoreModule(\"DomUtil\", [], function(api, module) {\n        var UNDEF = \"undefined\";\n        var util = api.util;\n        var getBody = util.getBody;\n\n        // Perform feature tests\n        if (!util.areHostMethods(document, [\"createDocumentFragment\", \"createElement\", \"createTextNode\"])) {\n            module.fail(\"document missing a Node creation method\");\n        }\n\n        if (!util.isHostMethod(document, \"getElementsByTagName\")) {\n            module.fail(\"document missing getElementsByTagName method\");\n        }\n\n        var el = document.createElement(\"div\");\n        if (!util.areHostMethods(el, [\"insertBefore\", \"appendChild\", \"cloneNode\"] ||\n                !util.areHostObjects(el, [\"previousSibling\", \"nextSibling\", \"childNodes\", \"parentNode\"]))) {\n            module.fail(\"Incomplete Element implementation\");\n        }\n\n        // innerHTML is required for Range's createContextualFragment method\n        if (!util.isHostProperty(el, \"innerHTML\")) {\n            module.fail(\"Element is missing innerHTML property\");\n        }\n\n        var textNode = document.createTextNode(\"test\");\n        if (!util.areHostMethods(textNode, [\"splitText\", \"deleteData\", \"insertData\", \"appendData\", \"cloneNode\"] ||\n                !util.areHostObjects(el, [\"previousSibling\", \"nextSibling\", \"childNodes\", \"parentNode\"]) ||\n                !util.areHostProperties(textNode, [\"data\"]))) {\n            module.fail(\"Incomplete Text Node implementation\");\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Removed use of indexOf because of a bizarre bug in Opera that is thrown in one of the Acid3 tests. I haven't been\n        // able to replicate it outside of the test. The bug is that indexOf returns -1 when called on an Array that\n        // contains just the document as a single element and the value searched for is the document.\n        var arrayContains = /*Array.prototype.indexOf ?\n            function(arr, val) {\n                return arr.indexOf(val) > -1;\n            }:*/\n\n            function(arr, val) {\n                var i = arr.length;\n                while (i--) {\n                    if (arr[i] === val) {\n                        return true;\n                    }\n                }\n                return false;\n            };\n\n        // Opera 11 puts HTML elements in the null namespace, it seems, and IE 7 has undefined namespaceURI\n        function isHtmlNamespace(node) {\n            var ns;\n            return typeof node.namespaceURI == UNDEF || ((ns = node.namespaceURI) === null || ns == \"http://www.w3.org/1999/xhtml\");\n        }\n\n        function parentElement(node) {\n            var parent = node.parentNode;\n            return (parent.nodeType == 1) ? parent : null;\n        }\n\n        function getNodeIndex(node) {\n            var i = 0;\n            while( (node = node.previousSibling) ) {\n                ++i;\n            }\n            return i;\n        }\n\n        function getNodeLength(node) {\n            switch (node.nodeType) {\n                case 7:\n                case 10:\n                    return 0;\n                case 3:\n                case 8:\n                    return node.length;\n                default:\n                    return node.childNodes.length;\n            }\n        }\n\n        function getCommonAncestor(node1, node2) {\n            var ancestors = [], n;\n            for (n = node1; n; n = n.parentNode) {\n                ancestors.push(n);\n            }\n\n            for (n = node2; n; n = n.parentNode) {\n                if (arrayContains(ancestors, n)) {\n                    return n;\n                }\n            }\n\n            return null;\n        }\n\n        function isAncestorOf(ancestor, descendant, selfIsAncestor) {\n            var n = selfIsAncestor ? descendant : descendant.parentNode;\n            while (n) {\n                if (n === ancestor) {\n                    return true;\n                } else {\n                    n = n.parentNode;\n                }\n            }\n            return false;\n        }\n\n        function isOrIsAncestorOf(ancestor, descendant) {\n            return isAncestorOf(ancestor, descendant, true);\n        }\n\n        function getClosestAncestorIn(node, ancestor, selfIsAncestor) {\n            var p, n = selfIsAncestor ? node : node.parentNode;\n            while (n) {\n                p = n.parentNode;\n                if (p === ancestor) {\n                    return n;\n                }\n                n = p;\n            }\n            return null;\n        }\n\n        function isCharacterDataNode(node) {\n            var t = node.nodeType;\n            return t == 3 || t == 4 || t == 8 ; // Text, CDataSection or Comment\n        }\n\n        function isTextOrCommentNode(node) {\n            if (!node) {\n                return false;\n            }\n            var t = node.nodeType;\n            return t == 3 || t == 8 ; // Text or Comment\n        }\n\n        function insertAfter(node, precedingNode) {\n            var nextNode = precedingNode.nextSibling, parent = precedingNode.parentNode;\n            if (nextNode) {\n                parent.insertBefore(node, nextNode);\n            } else {\n                parent.appendChild(node);\n            }\n            return node;\n        }\n\n        // Note that we cannot use splitText() because it is bugridden in IE 9.\n        function splitDataNode(node, index, positionsToPreserve) {\n            var newNode = node.cloneNode(false);\n            newNode.deleteData(0, index);\n            node.deleteData(index, node.length - index);\n            insertAfter(newNode, node);\n\n            // Preserve positions\n            if (positionsToPreserve) {\n                for (var i = 0, position; position = positionsToPreserve[i++]; ) {\n                    // Handle case where position was inside the portion of node after the split point\n                    if (position.node == node && position.offset > index) {\n                        position.node = newNode;\n                        position.offset -= index;\n                    }\n                    // Handle the case where the position is a node offset within node's parent\n                    else if (position.node == node.parentNode && position.offset > getNodeIndex(node)) {\n                        ++position.offset;\n                    }\n                }\n            }\n            return newNode;\n        }\n\n        function getDocument(node) {\n            if (node.nodeType == 9) {\n                return node;\n            } else if (typeof node.ownerDocument != UNDEF) {\n                return node.ownerDocument;\n            } else if (typeof node.document != UNDEF) {\n                return node.document;\n            } else if (node.parentNode) {\n                return getDocument(node.parentNode);\n            } else {\n                throw module.createError(\"getDocument: no document found for node\");\n            }\n        }\n\n        function getWindow(node) {\n            var doc = getDocument(node);\n            if (typeof doc.defaultView != UNDEF) {\n                return doc.defaultView;\n            } else if (typeof doc.parentWindow != UNDEF) {\n                return doc.parentWindow;\n            } else {\n                throw module.createError(\"Cannot get a window object for node\");\n            }\n        }\n\n        function getIframeDocument(iframeEl) {\n            if (typeof iframeEl.contentDocument != UNDEF) {\n                return iframeEl.contentDocument;\n            } else if (typeof iframeEl.contentWindow != UNDEF) {\n                return iframeEl.contentWindow.document;\n            } else {\n                throw module.createError(\"getIframeDocument: No Document object found for iframe element\");\n            }\n        }\n\n        function getIframeWindow(iframeEl) {\n            if (typeof iframeEl.contentWindow != UNDEF) {\n                return iframeEl.contentWindow;\n            } else if (typeof iframeEl.contentDocument != UNDEF) {\n                return iframeEl.contentDocument.defaultView;\n            } else {\n                throw module.createError(\"getIframeWindow: No Window object found for iframe element\");\n            }\n        }\n\n        // This looks bad. Is it worth it?\n        function isWindow(obj) {\n            return obj && util.isHostMethod(obj, \"setTimeout\") && util.isHostObject(obj, \"document\");\n        }\n\n        function getContentDocument(obj, module, methodName) {\n            var doc;\n\n            if (!obj) {\n                doc = document;\n            }\n\n            // Test if a DOM node has been passed and obtain a document object for it if so\n            else if (util.isHostProperty(obj, \"nodeType\")) {\n                doc = (obj.nodeType == 1 && obj.tagName.toLowerCase() == \"iframe\") ?\n                    getIframeDocument(obj) : getDocument(obj);\n            }\n\n            // Test if the doc parameter appears to be a Window object\n            else if (isWindow(obj)) {\n                doc = obj.document;\n            }\n\n            if (!doc) {\n                throw module.createError(methodName + \"(): Parameter must be a Window object or DOM node\");\n            }\n\n            return doc;\n        }\n\n        function getRootContainer(node) {\n            var parent;\n            while ( (parent = node.parentNode) ) {\n                node = parent;\n            }\n            return node;\n        }\n\n        function comparePoints(nodeA, offsetA, nodeB, offsetB) {\n            // See http://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html#Level-2-Range-Comparing\n            var nodeC, root, childA, childB, n;\n            if (nodeA == nodeB) {\n                // Case 1: nodes are the same\n                return offsetA === offsetB ? 0 : (offsetA < offsetB) ? -1 : 1;\n            } else if ( (nodeC = getClosestAncestorIn(nodeB, nodeA, true)) ) {\n                // Case 2: node C (container B or an ancestor) is a child node of A\n                return offsetA <= getNodeIndex(nodeC) ? -1 : 1;\n            } else if ( (nodeC = getClosestAncestorIn(nodeA, nodeB, true)) ) {\n                // Case 3: node C (container A or an ancestor) is a child node of B\n                return getNodeIndex(nodeC) < offsetB  ? -1 : 1;\n            } else {\n                root = getCommonAncestor(nodeA, nodeB);\n                if (!root) {\n                    throw new Error(\"comparePoints error: nodes have no common ancestor\");\n                }\n\n                // Case 4: containers are siblings or descendants of siblings\n                childA = (nodeA === root) ? root : getClosestAncestorIn(nodeA, root, true);\n                childB = (nodeB === root) ? root : getClosestAncestorIn(nodeB, root, true);\n\n                if (childA === childB) {\n                    // This shouldn't be possible\n                    throw module.createError(\"comparePoints got to case 4 and childA and childB are the same!\");\n                } else {\n                    n = root.firstChild;\n                    while (n) {\n                        if (n === childA) {\n                            return -1;\n                        } else if (n === childB) {\n                            return 1;\n                        }\n                        n = n.nextSibling;\n                    }\n                }\n            }\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Test for IE's crash (IE 6/7) or exception (IE >= 8) when a reference to garbage-collected text node is queried\n        var crashyTextNodes = false;\n\n        function isBrokenNode(node) {\n            var n;\n            try {\n                n = node.parentNode;\n                return false;\n            } catch (e) {\n                return true;\n            }\n        }\n\n        (function() {\n            var el = document.createElement(\"b\");\n            el.innerHTML = \"1\";\n            var textNode = el.firstChild;\n            el.innerHTML = \"<br />\";\n            crashyTextNodes = isBrokenNode(textNode);\n\n            api.features.crashyTextNodes = crashyTextNodes;\n        })();\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        function inspectNode(node) {\n            if (!node) {\n                return \"[No node]\";\n            }\n            if (crashyTextNodes && isBrokenNode(node)) {\n                return \"[Broken node]\";\n            }\n            if (isCharacterDataNode(node)) {\n                return '\"' + node.data + '\"';\n            }\n            if (node.nodeType == 1) {\n                var idAttr = node.id ? ' id=\"' + node.id + '\"' : \"\";\n                return \"<\" + node.nodeName + idAttr + \">[index:\" + getNodeIndex(node) + \",length:\" + node.childNodes.length + \"][\" + (node.innerHTML || \"[innerHTML not supported]\").slice(0, 25) + \"]\";\n            }\n            return node.nodeName;\n        }\n\n        function fragmentFromNodeChildren(node) {\n            var fragment = getDocument(node).createDocumentFragment(), child;\n            while ( (child = node.firstChild) ) {\n                fragment.appendChild(child);\n            }\n            return fragment;\n        }\n\n        var getComputedStyleProperty;\n        if (typeof window.getComputedStyle != UNDEF) {\n            getComputedStyleProperty = function(el, propName) {\n                return getWindow(el).getComputedStyle(el, null)[propName];\n            };\n        } else if (typeof document.documentElement.currentStyle != UNDEF) {\n            getComputedStyleProperty = function(el, propName) {\n                return el.currentStyle ? el.currentStyle[propName] : \"\";\n            };\n        } else {\n            module.fail(\"No means of obtaining computed style properties found\");\n        }\n\n        function createTestElement(doc, html, contentEditable) {\n            var body = getBody(doc);\n            var el = doc.createElement(\"div\");\n            el.contentEditable = \"\" + !!contentEditable;\n            if (html) {\n                el.innerHTML = html;\n            }\n\n            // Insert the test element at the start of the body to prevent scrolling to the bottom in iOS (issue #292)\n            var bodyFirstChild = body.firstChild;\n            if (bodyFirstChild) {\n                body.insertBefore(el, bodyFirstChild);\n            } else {\n                body.appendChild(el);\n            }\n\n            return el;\n        }\n\n        function removeNode(node) {\n            return node.parentNode.removeChild(node);\n        }\n\n        function NodeIterator(root) {\n            this.root = root;\n            this._next = root;\n        }\n\n        NodeIterator.prototype = {\n            _current: null,\n\n            hasNext: function() {\n                return !!this._next;\n            },\n\n            next: function() {\n                var n = this._current = this._next;\n                var child, next;\n                if (this._current) {\n                    child = n.firstChild;\n                    if (child) {\n                        this._next = child;\n                    } else {\n                        next = null;\n                        while ((n !== this.root) && !(next = n.nextSibling)) {\n                            n = n.parentNode;\n                        }\n                        this._next = next;\n                    }\n                }\n                return this._current;\n            },\n\n            detach: function() {\n                this._current = this._next = this.root = null;\n            }\n        };\n\n        function createIterator(root) {\n            return new NodeIterator(root);\n        }\n\n        function DomPosition(node, offset) {\n            this.node = node;\n            this.offset = offset;\n        }\n\n        DomPosition.prototype = {\n            equals: function(pos) {\n                return !!pos && this.node === pos.node && this.offset == pos.offset;\n            },\n\n            inspect: function() {\n                return \"[DomPosition(\" + inspectNode(this.node) + \":\" + this.offset + \")]\";\n            },\n\n            toString: function() {\n                return this.inspect();\n            }\n        };\n\n        function DOMException(codeName) {\n            this.code = this[codeName];\n            this.codeName = codeName;\n            this.message = \"DOMException: \" + this.codeName;\n        }\n\n        DOMException.prototype = {\n            INDEX_SIZE_ERR: 1,\n            HIERARCHY_REQUEST_ERR: 3,\n            WRONG_DOCUMENT_ERR: 4,\n            NO_MODIFICATION_ALLOWED_ERR: 7,\n            NOT_FOUND_ERR: 8,\n            NOT_SUPPORTED_ERR: 9,\n            INVALID_STATE_ERR: 11,\n            INVALID_NODE_TYPE_ERR: 24\n        };\n\n        DOMException.prototype.toString = function() {\n            return this.message;\n        };\n\n        api.dom = {\n            arrayContains: arrayContains,\n            isHtmlNamespace: isHtmlNamespace,\n            parentElement: parentElement,\n            getNodeIndex: getNodeIndex,\n            getNodeLength: getNodeLength,\n            getCommonAncestor: getCommonAncestor,\n            isAncestorOf: isAncestorOf,\n            isOrIsAncestorOf: isOrIsAncestorOf,\n            getClosestAncestorIn: getClosestAncestorIn,\n            isCharacterDataNode: isCharacterDataNode,\n            isTextOrCommentNode: isTextOrCommentNode,\n            insertAfter: insertAfter,\n            splitDataNode: splitDataNode,\n            getDocument: getDocument,\n            getWindow: getWindow,\n            getIframeWindow: getIframeWindow,\n            getIframeDocument: getIframeDocument,\n            getBody: getBody,\n            isWindow: isWindow,\n            getContentDocument: getContentDocument,\n            getRootContainer: getRootContainer,\n            comparePoints: comparePoints,\n            isBrokenNode: isBrokenNode,\n            inspectNode: inspectNode,\n            getComputedStyleProperty: getComputedStyleProperty,\n            createTestElement: createTestElement,\n            removeNode: removeNode,\n            fragmentFromNodeChildren: fragmentFromNodeChildren,\n            createIterator: createIterator,\n            DomPosition: DomPosition\n        };\n\n        api.DOMException = DOMException;\n    });\n\n    /*----------------------------------------------------------------------------------------------------------------*/\n\n    // Pure JavaScript implementation of DOM Range\n    api.createCoreModule(\"DomRange\", [\"DomUtil\"], function(api, module) {\n        var dom = api.dom;\n        var util = api.util;\n        var DomPosition = dom.DomPosition;\n        var DOMException = api.DOMException;\n\n        var isCharacterDataNode = dom.isCharacterDataNode;\n        var getNodeIndex = dom.getNodeIndex;\n        var isOrIsAncestorOf = dom.isOrIsAncestorOf;\n        var getDocument = dom.getDocument;\n        var comparePoints = dom.comparePoints;\n        var splitDataNode = dom.splitDataNode;\n        var getClosestAncestorIn = dom.getClosestAncestorIn;\n        var getNodeLength = dom.getNodeLength;\n        var arrayContains = dom.arrayContains;\n        var getRootContainer = dom.getRootContainer;\n        var crashyTextNodes = api.features.crashyTextNodes;\n\n        var removeNode = dom.removeNode;\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Utility functions\n\n        function isNonTextPartiallySelected(node, range) {\n            return (node.nodeType != 3) &&\n                   (isOrIsAncestorOf(node, range.startContainer) || isOrIsAncestorOf(node, range.endContainer));\n        }\n\n        function getRangeDocument(range) {\n            return range.document || getDocument(range.startContainer);\n        }\n\n        function getRangeRoot(range) {\n            return getRootContainer(range.startContainer);\n        }\n\n        function getBoundaryBeforeNode(node) {\n            return new DomPosition(node.parentNode, getNodeIndex(node));\n        }\n\n        function getBoundaryAfterNode(node) {\n            return new DomPosition(node.parentNode, getNodeIndex(node) + 1);\n        }\n\n        function insertNodeAtPosition(node, n, o) {\n            var firstNodeInserted = node.nodeType == 11 ? node.firstChild : node;\n            if (isCharacterDataNode(n)) {\n                if (o == n.length) {\n                    dom.insertAfter(node, n);\n                } else {\n                    n.parentNode.insertBefore(node, o == 0 ? n : splitDataNode(n, o));\n                }\n            } else if (o >= n.childNodes.length) {\n                n.appendChild(node);\n            } else {\n                n.insertBefore(node, n.childNodes[o]);\n            }\n            return firstNodeInserted;\n        }\n\n        function rangesIntersect(rangeA, rangeB, touchingIsIntersecting) {\n            assertRangeValid(rangeA);\n            assertRangeValid(rangeB);\n\n            if (getRangeDocument(rangeB) != getRangeDocument(rangeA)) {\n                throw new DOMException(\"WRONG_DOCUMENT_ERR\");\n            }\n\n            var startComparison = comparePoints(rangeA.startContainer, rangeA.startOffset, rangeB.endContainer, rangeB.endOffset),\n                endComparison = comparePoints(rangeA.endContainer, rangeA.endOffset, rangeB.startContainer, rangeB.startOffset);\n\n            return touchingIsIntersecting ? startComparison <= 0 && endComparison >= 0 : startComparison < 0 && endComparison > 0;\n        }\n\n        function cloneSubtree(iterator) {\n            var partiallySelected;\n            for (var node, frag = getRangeDocument(iterator.range).createDocumentFragment(), subIterator; node = iterator.next(); ) {\n                partiallySelected = iterator.isPartiallySelectedSubtree();\n                node = node.cloneNode(!partiallySelected);\n                if (partiallySelected) {\n                    subIterator = iterator.getSubtreeIterator();\n                    node.appendChild(cloneSubtree(subIterator));\n                    subIterator.detach();\n                }\n\n                if (node.nodeType == 10) { // DocumentType\n                    throw new DOMException(\"HIERARCHY_REQUEST_ERR\");\n                }\n                frag.appendChild(node);\n            }\n            return frag;\n        }\n\n        function iterateSubtree(rangeIterator, func, iteratorState) {\n            var it, n;\n            iteratorState = iteratorState || { stop: false };\n            for (var node, subRangeIterator; node = rangeIterator.next(); ) {\n                if (rangeIterator.isPartiallySelectedSubtree()) {\n                    if (func(node) === false) {\n                        iteratorState.stop = true;\n                        return;\n                    } else {\n                        // The node is partially selected by the Range, so we can use a new RangeIterator on the portion of\n                        // the node selected by the Range.\n                        subRangeIterator = rangeIterator.getSubtreeIterator();\n                        iterateSubtree(subRangeIterator, func, iteratorState);\n                        subRangeIterator.detach();\n                        if (iteratorState.stop) {\n                            return;\n                        }\n                    }\n                } else {\n                    // The whole node is selected, so we can use efficient DOM iteration to iterate over the node and its\n                    // descendants\n                    it = dom.createIterator(node);\n                    while ( (n = it.next()) ) {\n                        if (func(n) === false) {\n                            iteratorState.stop = true;\n                            return;\n                        }\n                    }\n                }\n            }\n        }\n\n        function deleteSubtree(iterator) {\n            var subIterator;\n            while (iterator.next()) {\n                if (iterator.isPartiallySelectedSubtree()) {\n                    subIterator = iterator.getSubtreeIterator();\n                    deleteSubtree(subIterator);\n                    subIterator.detach();\n                } else {\n                    iterator.remove();\n                }\n            }\n        }\n\n        function extractSubtree(iterator) {\n            for (var node, frag = getRangeDocument(iterator.range).createDocumentFragment(), subIterator; node = iterator.next(); ) {\n\n                if (iterator.isPartiallySelectedSubtree()) {\n                    node = node.cloneNode(false);\n                    subIterator = iterator.getSubtreeIterator();\n                    node.appendChild(extractSubtree(subIterator));\n                    subIterator.detach();\n                } else {\n                    iterator.remove();\n                }\n                if (node.nodeType == 10) { // DocumentType\n                    throw new DOMException(\"HIERARCHY_REQUEST_ERR\");\n                }\n                frag.appendChild(node);\n            }\n            return frag;\n        }\n\n        function getNodesInRange(range, nodeTypes, filter) {\n            var filterNodeTypes = !!(nodeTypes && nodeTypes.length), regex;\n            var filterExists = !!filter;\n            if (filterNodeTypes) {\n                regex = new RegExp(\"^(\" + nodeTypes.join(\"|\") + \")$\");\n            }\n\n            var nodes = [];\n            iterateSubtree(new RangeIterator(range, false), function(node) {\n                if (filterNodeTypes && !regex.test(node.nodeType)) {\n                    return;\n                }\n                if (filterExists && !filter(node)) {\n                    return;\n                }\n                // Don't include a boundary container if it is a character data node and the range does not contain any\n                // of its character data. See issue 190.\n                var sc = range.startContainer;\n                if (node == sc && isCharacterDataNode(sc) && range.startOffset == sc.length) {\n                    return;\n                }\n\n                var ec = range.endContainer;\n                if (node == ec && isCharacterDataNode(ec) && range.endOffset == 0) {\n                    return;\n                }\n\n                nodes.push(node);\n            });\n            return nodes;\n        }\n\n        function inspect(range) {\n            var name = (typeof range.getName == \"undefined\") ? \"Range\" : range.getName();\n            return \"[\" + name + \"(\" + dom.inspectNode(range.startContainer) + \":\" + range.startOffset + \", \" +\n                    dom.inspectNode(range.endContainer) + \":\" + range.endOffset + \")]\";\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // RangeIterator code partially borrows from IERange by Tim Ryan (http://github.com/timcameronryan/IERange)\n\n        function RangeIterator(range, clonePartiallySelectedTextNodes) {\n            this.range = range;\n            this.clonePartiallySelectedTextNodes = clonePartiallySelectedTextNodes;\n\n\n            if (!range.collapsed) {\n                this.sc = range.startContainer;\n                this.so = range.startOffset;\n                this.ec = range.endContainer;\n                this.eo = range.endOffset;\n                var root = range.commonAncestorContainer;\n\n                if (this.sc === this.ec && isCharacterDataNode(this.sc)) {\n                    this.isSingleCharacterDataNode = true;\n                    this._first = this._last = this._next = this.sc;\n                } else {\n                    this._first = this._next = (this.sc === root && !isCharacterDataNode(this.sc)) ?\n                        this.sc.childNodes[this.so] : getClosestAncestorIn(this.sc, root, true);\n                    this._last = (this.ec === root && !isCharacterDataNode(this.ec)) ?\n                        this.ec.childNodes[this.eo - 1] : getClosestAncestorIn(this.ec, root, true);\n                }\n            }\n        }\n\n        RangeIterator.prototype = {\n            _current: null,\n            _next: null,\n            _first: null,\n            _last: null,\n            isSingleCharacterDataNode: false,\n\n            reset: function() {\n                this._current = null;\n                this._next = this._first;\n            },\n\n            hasNext: function() {\n                return !!this._next;\n            },\n\n            next: function() {\n                // Move to next node\n                var current = this._current = this._next;\n                if (current) {\n                    this._next = (current !== this._last) ? current.nextSibling : null;\n\n                    // Check for partially selected text nodes\n                    if (isCharacterDataNode(current) && this.clonePartiallySelectedTextNodes) {\n                        if (current === this.ec) {\n                            (current = current.cloneNode(true)).deleteData(this.eo, current.length - this.eo);\n                        }\n                        if (this._current === this.sc) {\n                            (current = current.cloneNode(true)).deleteData(0, this.so);\n                        }\n                    }\n                }\n\n                return current;\n            },\n\n            remove: function() {\n                var current = this._current, start, end;\n\n                if (isCharacterDataNode(current) && (current === this.sc || current === this.ec)) {\n                    start = (current === this.sc) ? this.so : 0;\n                    end = (current === this.ec) ? this.eo : current.length;\n                    if (start != end) {\n                        current.deleteData(start, end - start);\n                    }\n                } else {\n                    if (current.parentNode) {\n                        removeNode(current);\n                    } else {\n                    }\n                }\n            },\n\n            // Checks if the current node is partially selected\n            isPartiallySelectedSubtree: function() {\n                var current = this._current;\n                return isNonTextPartiallySelected(current, this.range);\n            },\n\n            getSubtreeIterator: function() {\n                var subRange;\n                if (this.isSingleCharacterDataNode) {\n                    subRange = this.range.cloneRange();\n                    subRange.collapse(false);\n                } else {\n                    subRange = new Range(getRangeDocument(this.range));\n                    var current = this._current;\n                    var startContainer = current, startOffset = 0, endContainer = current, endOffset = getNodeLength(current);\n\n                    if (isOrIsAncestorOf(current, this.sc)) {\n                        startContainer = this.sc;\n                        startOffset = this.so;\n                    }\n                    if (isOrIsAncestorOf(current, this.ec)) {\n                        endContainer = this.ec;\n                        endOffset = this.eo;\n                    }\n\n                    updateBoundaries(subRange, startContainer, startOffset, endContainer, endOffset);\n                }\n                return new RangeIterator(subRange, this.clonePartiallySelectedTextNodes);\n            },\n\n            detach: function() {\n                this.range = this._current = this._next = this._first = this._last = this.sc = this.so = this.ec = this.eo = null;\n            }\n        };\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        var beforeAfterNodeTypes = [1, 3, 4, 5, 7, 8, 10];\n        var rootContainerNodeTypes = [2, 9, 11];\n        var readonlyNodeTypes = [5, 6, 10, 12];\n        var insertableNodeTypes = [1, 3, 4, 5, 7, 8, 10, 11];\n        var surroundNodeTypes = [1, 3, 4, 5, 7, 8];\n\n        function createAncestorFinder(nodeTypes) {\n            return function(node, selfIsAncestor) {\n                var t, n = selfIsAncestor ? node : node.parentNode;\n                while (n) {\n                    t = n.nodeType;\n                    if (arrayContains(nodeTypes, t)) {\n                        return n;\n                    }\n                    n = n.parentNode;\n                }\n                return null;\n            };\n        }\n\n        var getDocumentOrFragmentContainer = createAncestorFinder( [9, 11] );\n        var getReadonlyAncestor = createAncestorFinder(readonlyNodeTypes);\n        var getDocTypeNotationEntityAncestor = createAncestorFinder( [6, 10, 12] );\n        var getElementAncestor = createAncestorFinder( [1] );\n\n        function assertNoDocTypeNotationEntityAncestor(node, allowSelf) {\n            if (getDocTypeNotationEntityAncestor(node, allowSelf)) {\n                throw new DOMException(\"INVALID_NODE_TYPE_ERR\");\n            }\n        }\n\n        function assertValidNodeType(node, invalidTypes) {\n            if (!arrayContains(invalidTypes, node.nodeType)) {\n                throw new DOMException(\"INVALID_NODE_TYPE_ERR\");\n            }\n        }\n\n        function assertValidOffset(node, offset) {\n            if (offset < 0 || offset > (isCharacterDataNode(node) ? node.length : node.childNodes.length)) {\n                throw new DOMException(\"INDEX_SIZE_ERR\");\n            }\n        }\n\n        function assertSameDocumentOrFragment(node1, node2) {\n            if (getDocumentOrFragmentContainer(node1, true) !== getDocumentOrFragmentContainer(node2, true)) {\n                throw new DOMException(\"WRONG_DOCUMENT_ERR\");\n            }\n        }\n\n        function assertNodeNotReadOnly(node) {\n            if (getReadonlyAncestor(node, true)) {\n                throw new DOMException(\"NO_MODIFICATION_ALLOWED_ERR\");\n            }\n        }\n\n        function assertNode(node, codeName) {\n            if (!node) {\n                throw new DOMException(codeName);\n            }\n        }\n\n        function isValidOffset(node, offset) {\n            return offset <= (isCharacterDataNode(node) ? node.length : node.childNodes.length);\n        }\n\n        function isRangeValid(range) {\n            return (!!range.startContainer && !!range.endContainer &&\n                    !(crashyTextNodes && (dom.isBrokenNode(range.startContainer) || dom.isBrokenNode(range.endContainer))) &&\n                    getRootContainer(range.startContainer) == getRootContainer(range.endContainer) &&\n                    isValidOffset(range.startContainer, range.startOffset) &&\n                    isValidOffset(range.endContainer, range.endOffset));\n        }\n\n        function assertRangeValid(range) {\n            if (!isRangeValid(range)) {\n                throw new Error(\"Range error: Range is not valid. This usually happens after DOM mutation. Range: (\" + range.inspect() + \")\");\n            }\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Test the browser's innerHTML support to decide how to implement createContextualFragment\n        var styleEl = document.createElement(\"style\");\n        var htmlParsingConforms = false;\n        try {\n            styleEl.innerHTML = \"<b>x</b>\";\n            htmlParsingConforms = (styleEl.firstChild.nodeType == 3); // Pre-Blink Opera incorrectly creates an element node\n        } catch (e) {\n            // IE 6 and 7 throw\n        }\n\n        api.features.htmlParsingConforms = htmlParsingConforms;\n\n        var createContextualFragment = htmlParsingConforms ?\n\n            // Implementation as per HTML parsing spec, trusting in the browser's implementation of innerHTML. See\n            // discussion and base code for this implementation at issue 67.\n            // Spec: http://html5.org/specs/dom-parsing.html#extensions-to-the-range-interface\n            // Thanks to Aleks Williams.\n            function(fragmentStr) {\n                // \"Let node the context object's start's node.\"\n                var node = this.startContainer;\n                var doc = getDocument(node);\n\n                // \"If the context object's start's node is null, raise an INVALID_STATE_ERR\n                // exception and abort these steps.\"\n                if (!node) {\n                    throw new DOMException(\"INVALID_STATE_ERR\");\n                }\n\n                // \"Let element be as follows, depending on node's interface:\"\n                // Document, Document Fragment: null\n                var el = null;\n\n                // \"Element: node\"\n                if (node.nodeType == 1) {\n                    el = node;\n\n                // \"Text, Comment: node's parentElement\"\n                } else if (isCharacterDataNode(node)) {\n                    el = dom.parentElement(node);\n                }\n\n                // \"If either element is null or element's ownerDocument is an HTML document\n                // and element's local name is \"html\" and element's namespace is the HTML\n                // namespace\"\n                if (el === null || (\n                    el.nodeName == \"HTML\" &&\n                    dom.isHtmlNamespace(getDocument(el).documentElement) &&\n                    dom.isHtmlNamespace(el)\n                )) {\n\n                // \"let element be a new Element with \"body\" as its local name and the HTML\n                // namespace as its namespace.\"\"\n                    el = doc.createElement(\"body\");\n                } else {\n                    el = el.cloneNode(false);\n                }\n\n                // \"If the node's document is an HTML document: Invoke the HTML fragment parsing algorithm.\"\n                // \"If the node's document is an XML document: Invoke the XML fragment parsing algorithm.\"\n                // \"In either case, the algorithm must be invoked with fragment as the input\n                // and element as the context element.\"\n                el.innerHTML = fragmentStr;\n\n                // \"If this raises an exception, then abort these steps. Otherwise, let new\n                // children be the nodes returned.\"\n\n                // \"Let fragment be a new DocumentFragment.\"\n                // \"Append all new children to fragment.\"\n                // \"Return fragment.\"\n                return dom.fragmentFromNodeChildren(el);\n            } :\n\n            // In this case, innerHTML cannot be trusted, so fall back to a simpler, non-conformant implementation that\n            // previous versions of Rangy used (with the exception of using a body element rather than a div)\n            function(fragmentStr) {\n                var doc = getRangeDocument(this);\n                var el = doc.createElement(\"body\");\n                el.innerHTML = fragmentStr;\n\n                return dom.fragmentFromNodeChildren(el);\n            };\n\n        function splitRangeBoundaries(range, positionsToPreserve) {\n            assertRangeValid(range);\n\n            var sc = range.startContainer, so = range.startOffset, ec = range.endContainer, eo = range.endOffset;\n            var startEndSame = (sc === ec);\n\n            if (isCharacterDataNode(ec) && eo > 0 && eo < ec.length) {\n                splitDataNode(ec, eo, positionsToPreserve);\n            }\n\n            if (isCharacterDataNode(sc) && so > 0 && so < sc.length) {\n                sc = splitDataNode(sc, so, positionsToPreserve);\n                if (startEndSame) {\n                    eo -= so;\n                    ec = sc;\n                } else if (ec == sc.parentNode && eo >= getNodeIndex(sc)) {\n                    eo++;\n                }\n                so = 0;\n            }\n            range.setStartAndEnd(sc, so, ec, eo);\n        }\n\n        function rangeToHtml(range) {\n            assertRangeValid(range);\n            var container = range.commonAncestorContainer.parentNode.cloneNode(false);\n            container.appendChild( range.cloneContents() );\n            return container.innerHTML;\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        var rangeProperties = [\"startContainer\", \"startOffset\", \"endContainer\", \"endOffset\", \"collapsed\",\n            \"commonAncestorContainer\"];\n\n        var s2s = 0, s2e = 1, e2e = 2, e2s = 3;\n        var n_b = 0, n_a = 1, n_b_a = 2, n_i = 3;\n\n        util.extend(api.rangePrototype, {\n            compareBoundaryPoints: function(how, range) {\n                assertRangeValid(this);\n                assertSameDocumentOrFragment(this.startContainer, range.startContainer);\n\n                var nodeA, offsetA, nodeB, offsetB;\n                var prefixA = (how == e2s || how == s2s) ? \"start\" : \"end\";\n                var prefixB = (how == s2e || how == s2s) ? \"start\" : \"end\";\n                nodeA = this[prefixA + \"Container\"];\n                offsetA = this[prefixA + \"Offset\"];\n                nodeB = range[prefixB + \"Container\"];\n                offsetB = range[prefixB + \"Offset\"];\n                return comparePoints(nodeA, offsetA, nodeB, offsetB);\n            },\n\n            insertNode: function(node) {\n                assertRangeValid(this);\n                assertValidNodeType(node, insertableNodeTypes);\n                assertNodeNotReadOnly(this.startContainer);\n\n                if (isOrIsAncestorOf(node, this.startContainer)) {\n                    throw new DOMException(\"HIERARCHY_REQUEST_ERR\");\n                }\n\n                // No check for whether the container of the start of the Range is of a type that does not allow\n                // children of the type of node: the browser's DOM implementation should do this for us when we attempt\n                // to add the node\n\n                var firstNodeInserted = insertNodeAtPosition(node, this.startContainer, this.startOffset);\n                this.setStartBefore(firstNodeInserted);\n            },\n\n            cloneContents: function() {\n                assertRangeValid(this);\n\n                var clone, frag;\n                if (this.collapsed) {\n                    return getRangeDocument(this).createDocumentFragment();\n                } else {\n                    if (this.startContainer === this.endContainer && isCharacterDataNode(this.startContainer)) {\n                        clone = this.startContainer.cloneNode(true);\n                        clone.data = clone.data.slice(this.startOffset, this.endOffset);\n                        frag = getRangeDocument(this).createDocumentFragment();\n                        frag.appendChild(clone);\n                        return frag;\n                    } else {\n                        var iterator = new RangeIterator(this, true);\n                        clone = cloneSubtree(iterator);\n                        iterator.detach();\n                    }\n                    return clone;\n                }\n            },\n\n            canSurroundContents: function() {\n                assertRangeValid(this);\n                assertNodeNotReadOnly(this.startContainer);\n                assertNodeNotReadOnly(this.endContainer);\n\n                // Check if the contents can be surrounded. Specifically, this means whether the range partially selects\n                // no non-text nodes.\n                var iterator = new RangeIterator(this, true);\n                var boundariesInvalid = (iterator._first && (isNonTextPartiallySelected(iterator._first, this)) ||\n                        (iterator._last && isNonTextPartiallySelected(iterator._last, this)));\n                iterator.detach();\n                return !boundariesInvalid;\n            },\n\n            surroundContents: function(node) {\n                assertValidNodeType(node, surroundNodeTypes);\n\n                if (!this.canSurroundContents()) {\n                    throw new DOMException(\"INVALID_STATE_ERR\");\n                }\n\n                // Extract the contents\n                var content = this.extractContents();\n\n                // Clear the children of the node\n                if (node.hasChildNodes()) {\n                    while (node.lastChild) {\n                        node.removeChild(node.lastChild);\n                    }\n                }\n\n                // Insert the new node and add the extracted contents\n                insertNodeAtPosition(node, this.startContainer, this.startOffset);\n                node.appendChild(content);\n\n                this.selectNode(node);\n            },\n\n            cloneRange: function() {\n                assertRangeValid(this);\n                var range = new Range(getRangeDocument(this));\n                var i = rangeProperties.length, prop;\n                while (i--) {\n                    prop = rangeProperties[i];\n                    range[prop] = this[prop];\n                }\n                return range;\n            },\n\n            toString: function() {\n                assertRangeValid(this);\n                var sc = this.startContainer;\n                if (sc === this.endContainer && isCharacterDataNode(sc)) {\n                    return (sc.nodeType == 3 || sc.nodeType == 4) ? sc.data.slice(this.startOffset, this.endOffset) : \"\";\n                } else {\n                    var textParts = [], iterator = new RangeIterator(this, true);\n                    iterateSubtree(iterator, function(node) {\n                        // Accept only text or CDATA nodes, not comments\n                        if (node.nodeType == 3 || node.nodeType == 4) {\n                            textParts.push(node.data);\n                        }\n                    });\n                    iterator.detach();\n                    return textParts.join(\"\");\n                }\n            },\n\n            // The methods below are all non-standard. The following batch were introduced by Mozilla but have since\n            // been removed from Mozilla.\n\n            compareNode: function(node) {\n                assertRangeValid(this);\n\n                var parent = node.parentNode;\n                var nodeIndex = getNodeIndex(node);\n\n                if (!parent) {\n                    throw new DOMException(\"NOT_FOUND_ERR\");\n                }\n\n                var startComparison = this.comparePoint(parent, nodeIndex),\n                    endComparison = this.comparePoint(parent, nodeIndex + 1);\n\n                if (startComparison < 0) { // Node starts before\n                    return (endComparison > 0) ? n_b_a : n_b;\n                } else {\n                    return (endComparison > 0) ? n_a : n_i;\n                }\n            },\n\n            comparePoint: function(node, offset) {\n                assertRangeValid(this);\n                assertNode(node, \"HIERARCHY_REQUEST_ERR\");\n                assertSameDocumentOrFragment(node, this.startContainer);\n\n                if (comparePoints(node, offset, this.startContainer, this.startOffset) < 0) {\n                    return -1;\n                } else if (comparePoints(node, offset, this.endContainer, this.endOffset) > 0) {\n                    return 1;\n                }\n                return 0;\n            },\n\n            createContextualFragment: createContextualFragment,\n\n            toHtml: function() {\n                return rangeToHtml(this);\n            },\n\n            // touchingIsIntersecting determines whether this method considers a node that borders a range intersects\n            // with it (as in WebKit) or not (as in Gecko pre-1.9, and the default)\n            intersectsNode: function(node, touchingIsIntersecting) {\n                assertRangeValid(this);\n                if (getRootContainer(node) != getRangeRoot(this)) {\n                    return false;\n                }\n\n                var parent = node.parentNode, offset = getNodeIndex(node);\n                if (!parent) {\n                    return true;\n                }\n\n                var startComparison = comparePoints(parent, offset, this.endContainer, this.endOffset),\n                    endComparison = comparePoints(parent, offset + 1, this.startContainer, this.startOffset);\n\n                return touchingIsIntersecting ? startComparison <= 0 && endComparison >= 0 : startComparison < 0 && endComparison > 0;\n            },\n\n            isPointInRange: function(node, offset) {\n                assertRangeValid(this);\n                assertNode(node, \"HIERARCHY_REQUEST_ERR\");\n                assertSameDocumentOrFragment(node, this.startContainer);\n\n                return (comparePoints(node, offset, this.startContainer, this.startOffset) >= 0) &&\n                       (comparePoints(node, offset, this.endContainer, this.endOffset) <= 0);\n            },\n\n            // The methods below are non-standard and invented by me.\n\n            // Sharing a boundary start-to-end or end-to-start does not count as intersection.\n            intersectsRange: function(range) {\n                return rangesIntersect(this, range, false);\n            },\n\n            // Sharing a boundary start-to-end or end-to-start does count as intersection.\n            intersectsOrTouchesRange: function(range) {\n                return rangesIntersect(this, range, true);\n            },\n\n            intersection: function(range) {\n                if (this.intersectsRange(range)) {\n                    var startComparison = comparePoints(this.startContainer, this.startOffset, range.startContainer, range.startOffset),\n                        endComparison = comparePoints(this.endContainer, this.endOffset, range.endContainer, range.endOffset);\n\n                    var intersectionRange = this.cloneRange();\n                    if (startComparison == -1) {\n                        intersectionRange.setStart(range.startContainer, range.startOffset);\n                    }\n                    if (endComparison == 1) {\n                        intersectionRange.setEnd(range.endContainer, range.endOffset);\n                    }\n                    return intersectionRange;\n                }\n                return null;\n            },\n\n            union: function(range) {\n                if (this.intersectsOrTouchesRange(range)) {\n                    var unionRange = this.cloneRange();\n                    if (comparePoints(range.startContainer, range.startOffset, this.startContainer, this.startOffset) == -1) {\n                        unionRange.setStart(range.startContainer, range.startOffset);\n                    }\n                    if (comparePoints(range.endContainer, range.endOffset, this.endContainer, this.endOffset) == 1) {\n                        unionRange.setEnd(range.endContainer, range.endOffset);\n                    }\n                    return unionRange;\n                } else {\n                    throw new DOMException(\"Ranges do not intersect\");\n                }\n            },\n\n            containsNode: function(node, allowPartial) {\n                if (allowPartial) {\n                    return this.intersectsNode(node, false);\n                } else {\n                    return this.compareNode(node) == n_i;\n                }\n            },\n\n            containsNodeContents: function(node) {\n                return this.comparePoint(node, 0) >= 0 && this.comparePoint(node, getNodeLength(node)) <= 0;\n            },\n\n            containsRange: function(range) {\n                var intersection = this.intersection(range);\n                return intersection !== null && range.equals(intersection);\n            },\n\n            containsNodeText: function(node) {\n                var nodeRange = this.cloneRange();\n                nodeRange.selectNode(node);\n                var textNodes = nodeRange.getNodes([3]);\n                if (textNodes.length > 0) {\n                    nodeRange.setStart(textNodes[0], 0);\n                    var lastTextNode = textNodes.pop();\n                    nodeRange.setEnd(lastTextNode, lastTextNode.length);\n                    return this.containsRange(nodeRange);\n                } else {\n                    return this.containsNodeContents(node);\n                }\n            },\n\n            getNodes: function(nodeTypes, filter) {\n                assertRangeValid(this);\n                return getNodesInRange(this, nodeTypes, filter);\n            },\n\n            getDocument: function() {\n                return getRangeDocument(this);\n            },\n\n            collapseBefore: function(node) {\n                this.setEndBefore(node);\n                this.collapse(false);\n            },\n\n            collapseAfter: function(node) {\n                this.setStartAfter(node);\n                this.collapse(true);\n            },\n\n            getBookmark: function(containerNode) {\n                var doc = getRangeDocument(this);\n                var preSelectionRange = api.createRange(doc);\n                containerNode = containerNode || dom.getBody(doc);\n                preSelectionRange.selectNodeContents(containerNode);\n                var range = this.intersection(preSelectionRange);\n                var start = 0, end = 0;\n                if (range) {\n                    preSelectionRange.setEnd(range.startContainer, range.startOffset);\n                    start = preSelectionRange.toString().length;\n                    end = start + range.toString().length;\n                }\n\n                return {\n                    start: start,\n                    end: end,\n                    containerNode: containerNode\n                };\n            },\n\n            moveToBookmark: function(bookmark) {\n                var containerNode = bookmark.containerNode;\n                var charIndex = 0;\n                this.setStart(containerNode, 0);\n                this.collapse(true);\n                var nodeStack = [containerNode], node, foundStart = false, stop = false;\n                var nextCharIndex, i, childNodes;\n\n                while (!stop && (node = nodeStack.pop())) {\n                    if (node.nodeType == 3) {\n                        nextCharIndex = charIndex + node.length;\n                        if (!foundStart && bookmark.start >= charIndex && bookmark.start <= nextCharIndex) {\n                            this.setStart(node, bookmark.start - charIndex);\n                            foundStart = true;\n                        }\n                        if (foundStart && bookmark.end >= charIndex && bookmark.end <= nextCharIndex) {\n                            this.setEnd(node, bookmark.end - charIndex);\n                            stop = true;\n                        }\n                        charIndex = nextCharIndex;\n                    } else {\n                        childNodes = node.childNodes;\n                        i = childNodes.length;\n                        while (i--) {\n                            nodeStack.push(childNodes[i]);\n                        }\n                    }\n                }\n            },\n\n            getName: function() {\n                return \"DomRange\";\n            },\n\n            equals: function(range) {\n                return Range.rangesEqual(this, range);\n            },\n\n            isValid: function() {\n                return isRangeValid(this);\n            },\n\n            inspect: function() {\n                return inspect(this);\n            },\n\n            detach: function() {\n                // In DOM4, detach() is now a no-op.\n            }\n        });\n\n        function copyComparisonConstantsToObject(obj) {\n            obj.START_TO_START = s2s;\n            obj.START_TO_END = s2e;\n            obj.END_TO_END = e2e;\n            obj.END_TO_START = e2s;\n\n            obj.NODE_BEFORE = n_b;\n            obj.NODE_AFTER = n_a;\n            obj.NODE_BEFORE_AND_AFTER = n_b_a;\n            obj.NODE_INSIDE = n_i;\n        }\n\n        function copyComparisonConstants(constructor) {\n            copyComparisonConstantsToObject(constructor);\n            copyComparisonConstantsToObject(constructor.prototype);\n        }\n\n        function createRangeContentRemover(remover, boundaryUpdater) {\n            return function() {\n                assertRangeValid(this);\n\n                var sc = this.startContainer, so = this.startOffset, root = this.commonAncestorContainer;\n\n                var iterator = new RangeIterator(this, true);\n\n                // Work out where to position the range after content removal\n                var node, boundary;\n                if (sc !== root) {\n                    node = getClosestAncestorIn(sc, root, true);\n                    boundary = getBoundaryAfterNode(node);\n                    sc = boundary.node;\n                    so = boundary.offset;\n                }\n\n                // Check none of the range is read-only\n                iterateSubtree(iterator, assertNodeNotReadOnly);\n\n                iterator.reset();\n\n                // Remove the content\n                var returnValue = remover(iterator);\n                iterator.detach();\n\n                // Move to the new position\n                boundaryUpdater(this, sc, so, sc, so);\n\n                return returnValue;\n            };\n        }\n\n        function createPrototypeRange(constructor, boundaryUpdater) {\n            function createBeforeAfterNodeSetter(isBefore, isStart) {\n                return function(node) {\n                    assertValidNodeType(node, beforeAfterNodeTypes);\n                    assertValidNodeType(getRootContainer(node), rootContainerNodeTypes);\n\n                    var boundary = (isBefore ? getBoundaryBeforeNode : getBoundaryAfterNode)(node);\n                    (isStart ? setRangeStart : setRangeEnd)(this, boundary.node, boundary.offset);\n                };\n            }\n\n            function setRangeStart(range, node, offset) {\n                var ec = range.endContainer, eo = range.endOffset;\n                if (node !== range.startContainer || offset !== range.startOffset) {\n                    // Check the root containers of the range and the new boundary, and also check whether the new boundary\n                    // is after the current end. In either case, collapse the range to the new position\n                    if (getRootContainer(node) != getRootContainer(ec) || comparePoints(node, offset, ec, eo) == 1) {\n                        ec = node;\n                        eo = offset;\n                    }\n                    boundaryUpdater(range, node, offset, ec, eo);\n                }\n            }\n\n            function setRangeEnd(range, node, offset) {\n                var sc = range.startContainer, so = range.startOffset;\n                if (node !== range.endContainer || offset !== range.endOffset) {\n                    // Check the root containers of the range and the new boundary, and also check whether the new boundary\n                    // is after the current end. In either case, collapse the range to the new position\n                    if (getRootContainer(node) != getRootContainer(sc) || comparePoints(node, offset, sc, so) == -1) {\n                        sc = node;\n                        so = offset;\n                    }\n                    boundaryUpdater(range, sc, so, node, offset);\n                }\n            }\n\n            // Set up inheritance\n            var F = function() {};\n            F.prototype = api.rangePrototype;\n            constructor.prototype = new F();\n\n            util.extend(constructor.prototype, {\n                setStart: function(node, offset) {\n                    assertNoDocTypeNotationEntityAncestor(node, true);\n                    assertValidOffset(node, offset);\n\n                    setRangeStart(this, node, offset);\n                },\n\n                setEnd: function(node, offset) {\n                    assertNoDocTypeNotationEntityAncestor(node, true);\n                    assertValidOffset(node, offset);\n\n                    setRangeEnd(this, node, offset);\n                },\n\n                /**\n                 * Convenience method to set a range's start and end boundaries. Overloaded as follows:\n                 * - Two parameters (node, offset) creates a collapsed range at that position\n                 * - Three parameters (node, startOffset, endOffset) creates a range contained with node starting at\n                 *   startOffset and ending at endOffset\n                 * - Four parameters (startNode, startOffset, endNode, endOffset) creates a range starting at startOffset in\n                 *   startNode and ending at endOffset in endNode\n                 */\n                setStartAndEnd: function() {\n                    var args = arguments;\n                    var sc = args[0], so = args[1], ec = sc, eo = so;\n\n                    switch (args.length) {\n                        case 3:\n                            eo = args[2];\n                            break;\n                        case 4:\n                            ec = args[2];\n                            eo = args[3];\n                            break;\n                    }\n\n                    assertNoDocTypeNotationEntityAncestor(sc, true);\n                    assertValidOffset(sc, so);\n\n                    assertNoDocTypeNotationEntityAncestor(ec, true);\n                    assertValidOffset(ec, eo);\n\n                    boundaryUpdater(this, sc, so, ec, eo);\n                },\n\n                setBoundary: function(node, offset, isStart) {\n                    this[\"set\" + (isStart ? \"Start\" : \"End\")](node, offset);\n                },\n\n                setStartBefore: createBeforeAfterNodeSetter(true, true),\n                setStartAfter: createBeforeAfterNodeSetter(false, true),\n                setEndBefore: createBeforeAfterNodeSetter(true, false),\n                setEndAfter: createBeforeAfterNodeSetter(false, false),\n\n                collapse: function(isStart) {\n                    assertRangeValid(this);\n                    if (isStart) {\n                        boundaryUpdater(this, this.startContainer, this.startOffset, this.startContainer, this.startOffset);\n                    } else {\n                        boundaryUpdater(this, this.endContainer, this.endOffset, this.endContainer, this.endOffset);\n                    }\n                },\n\n                selectNodeContents: function(node) {\n                    assertNoDocTypeNotationEntityAncestor(node, true);\n\n                    boundaryUpdater(this, node, 0, node, getNodeLength(node));\n                },\n\n                selectNode: function(node) {\n                    assertNoDocTypeNotationEntityAncestor(node, false);\n                    assertValidNodeType(node, beforeAfterNodeTypes);\n\n                    var start = getBoundaryBeforeNode(node), end = getBoundaryAfterNode(node);\n                    boundaryUpdater(this, start.node, start.offset, end.node, end.offset);\n                },\n\n                extractContents: createRangeContentRemover(extractSubtree, boundaryUpdater),\n\n                deleteContents: createRangeContentRemover(deleteSubtree, boundaryUpdater),\n\n                canSurroundContents: function() {\n                    assertRangeValid(this);\n                    assertNodeNotReadOnly(this.startContainer);\n                    assertNodeNotReadOnly(this.endContainer);\n\n                    // Check if the contents can be surrounded. Specifically, this means whether the range partially selects\n                    // no non-text nodes.\n                    var iterator = new RangeIterator(this, true);\n                    var boundariesInvalid = (iterator._first && isNonTextPartiallySelected(iterator._first, this) ||\n                            (iterator._last && isNonTextPartiallySelected(iterator._last, this)));\n                    iterator.detach();\n                    return !boundariesInvalid;\n                },\n\n                splitBoundaries: function() {\n                    splitRangeBoundaries(this);\n                },\n\n                splitBoundariesPreservingPositions: function(positionsToPreserve) {\n                    splitRangeBoundaries(this, positionsToPreserve);\n                },\n\n                normalizeBoundaries: function() {\n                    assertRangeValid(this);\n\n                    var sc = this.startContainer, so = this.startOffset, ec = this.endContainer, eo = this.endOffset;\n\n                    var mergeForward = function(node) {\n                        var sibling = node.nextSibling;\n                        if (sibling && sibling.nodeType == node.nodeType) {\n                            ec = node;\n                            eo = node.length;\n                            node.appendData(sibling.data);\n                            removeNode(sibling);\n                        }\n                    };\n\n                    var mergeBackward = function(node) {\n                        var sibling = node.previousSibling;\n                        if (sibling && sibling.nodeType == node.nodeType) {\n                            sc = node;\n                            var nodeLength = node.length;\n                            so = sibling.length;\n                            node.insertData(0, sibling.data);\n                            removeNode(sibling);\n                            if (sc == ec) {\n                                eo += so;\n                                ec = sc;\n                            } else if (ec == node.parentNode) {\n                                var nodeIndex = getNodeIndex(node);\n                                if (eo == nodeIndex) {\n                                    ec = node;\n                                    eo = nodeLength;\n                                } else if (eo > nodeIndex) {\n                                    eo--;\n                                }\n                            }\n                        }\n                    };\n\n                    var normalizeStart = true;\n                    var sibling;\n\n                    if (isCharacterDataNode(ec)) {\n                        if (eo == ec.length) {\n                            mergeForward(ec);\n                        } else if (eo == 0) {\n                            sibling = ec.previousSibling;\n                            if (sibling && sibling.nodeType == ec.nodeType) {\n                                eo = sibling.length;\n                                if (sc == ec) {\n                                    normalizeStart = false;\n                                }\n                                sibling.appendData(ec.data);\n                                removeNode(ec);\n                                ec = sibling;\n                            }\n                        }\n                    } else {\n                        if (eo > 0) {\n                            var endNode = ec.childNodes[eo - 1];\n                            if (endNode && isCharacterDataNode(endNode)) {\n                                mergeForward(endNode);\n                            }\n                        }\n                        normalizeStart = !this.collapsed;\n                    }\n\n                    if (normalizeStart) {\n                        if (isCharacterDataNode(sc)) {\n                            if (so == 0) {\n                                mergeBackward(sc);\n                            } else if (so == sc.length) {\n                                sibling = sc.nextSibling;\n                                if (sibling && sibling.nodeType == sc.nodeType) {\n                                    if (ec == sibling) {\n                                        ec = sc;\n                                        eo += sc.length;\n                                    }\n                                    sc.appendData(sibling.data);\n                                    removeNode(sibling);\n                                }\n                            }\n                        } else {\n                            if (so < sc.childNodes.length) {\n                                var startNode = sc.childNodes[so];\n                                if (startNode && isCharacterDataNode(startNode)) {\n                                    mergeBackward(startNode);\n                                }\n                            }\n                        }\n                    } else {\n                        sc = ec;\n                        so = eo;\n                    }\n\n                    boundaryUpdater(this, sc, so, ec, eo);\n                },\n\n                collapseToPoint: function(node, offset) {\n                    assertNoDocTypeNotationEntityAncestor(node, true);\n                    assertValidOffset(node, offset);\n                    this.setStartAndEnd(node, offset);\n                },\n\n                parentElement: function() {\n                    assertRangeValid(this);\n                    var parentNode = this.commonAncestorContainer;\n                    return parentNode ? getElementAncestor(this.commonAncestorContainer, true) : null;\n                }\n            });\n\n            copyComparisonConstants(constructor);\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Updates commonAncestorContainer and collapsed after boundary change\n        function updateCollapsedAndCommonAncestor(range) {\n            range.collapsed = (range.startContainer === range.endContainer && range.startOffset === range.endOffset);\n            range.commonAncestorContainer = range.collapsed ?\n                range.startContainer : dom.getCommonAncestor(range.startContainer, range.endContainer);\n        }\n\n        function updateBoundaries(range, startContainer, startOffset, endContainer, endOffset) {\n            range.startContainer = startContainer;\n            range.startOffset = startOffset;\n            range.endContainer = endContainer;\n            range.endOffset = endOffset;\n            range.document = dom.getDocument(startContainer);\n            updateCollapsedAndCommonAncestor(range);\n        }\n\n        function Range(doc) {\n            updateBoundaries(this, doc, 0, doc, 0);\n        }\n\n        createPrototypeRange(Range, updateBoundaries);\n\n        util.extend(Range, {\n            rangeProperties: rangeProperties,\n            RangeIterator: RangeIterator,\n            copyComparisonConstants: copyComparisonConstants,\n            createPrototypeRange: createPrototypeRange,\n            inspect: inspect,\n            toHtml: rangeToHtml,\n            getRangeDocument: getRangeDocument,\n            rangesEqual: function(r1, r2) {\n                return r1.startContainer === r2.startContainer &&\n                    r1.startOffset === r2.startOffset &&\n                    r1.endContainer === r2.endContainer &&\n                    r1.endOffset === r2.endOffset;\n            }\n        });\n\n        api.DomRange = Range;\n    });\n\n    /*----------------------------------------------------------------------------------------------------------------*/\n\n    // Wrappers for the browser's native DOM Range and/or TextRange implementation\n    api.createCoreModule(\"WrappedRange\", [\"DomRange\"], function(api, module) {\n        var WrappedRange, WrappedTextRange;\n        var dom = api.dom;\n        var util = api.util;\n        var DomPosition = dom.DomPosition;\n        var DomRange = api.DomRange;\n        var getBody = dom.getBody;\n        var getContentDocument = dom.getContentDocument;\n        var isCharacterDataNode = dom.isCharacterDataNode;\n\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        if (api.features.implementsDomRange) {\n            // This is a wrapper around the browser's native DOM Range. It has two aims:\n            // - Provide workarounds for specific browser bugs\n            // - provide convenient extensions, which are inherited from Rangy's DomRange\n\n            (function() {\n                var rangeProto;\n                var rangeProperties = DomRange.rangeProperties;\n\n                function updateRangeProperties(range) {\n                    var i = rangeProperties.length, prop;\n                    while (i--) {\n                        prop = rangeProperties[i];\n                        range[prop] = range.nativeRange[prop];\n                    }\n                    // Fix for broken collapsed property in IE 9.\n                    range.collapsed = (range.startContainer === range.endContainer && range.startOffset === range.endOffset);\n                }\n\n                function updateNativeRange(range, startContainer, startOffset, endContainer, endOffset) {\n                    var startMoved = (range.startContainer !== startContainer || range.startOffset != startOffset);\n                    var endMoved = (range.endContainer !== endContainer || range.endOffset != endOffset);\n                    var nativeRangeDifferent = !range.equals(range.nativeRange);\n\n                    // Always set both boundaries for the benefit of IE9 (see issue 35)\n                    if (startMoved || endMoved || nativeRangeDifferent) {\n                        range.setEnd(endContainer, endOffset);\n                        range.setStart(startContainer, startOffset);\n                    }\n                }\n\n                var createBeforeAfterNodeSetter;\n\n                WrappedRange = function(range) {\n                    if (!range) {\n                        throw module.createError(\"WrappedRange: Range must be specified\");\n                    }\n                    this.nativeRange = range;\n                    updateRangeProperties(this);\n                };\n\n                DomRange.createPrototypeRange(WrappedRange, updateNativeRange);\n\n                rangeProto = WrappedRange.prototype;\n\n                rangeProto.selectNode = function(node) {\n                    this.nativeRange.selectNode(node);\n                    updateRangeProperties(this);\n                };\n\n                rangeProto.cloneContents = function() {\n                    return this.nativeRange.cloneContents();\n                };\n\n                // Due to a long-standing Firefox bug that I have not been able to find a reliable way to detect,\n                // insertNode() is never delegated to the native range.\n\n                rangeProto.surroundContents = function(node) {\n                    this.nativeRange.surroundContents(node);\n                    updateRangeProperties(this);\n                };\n\n                rangeProto.collapse = function(isStart) {\n                    this.nativeRange.collapse(isStart);\n                    updateRangeProperties(this);\n                };\n\n                rangeProto.cloneRange = function() {\n                    return new WrappedRange(this.nativeRange.cloneRange());\n                };\n\n                rangeProto.refresh = function() {\n                    updateRangeProperties(this);\n                };\n\n                rangeProto.toString = function() {\n                    return this.nativeRange.toString();\n                };\n\n                // Create test range and node for feature detection\n\n                var testTextNode = document.createTextNode(\"test\");\n                getBody(document).appendChild(testTextNode);\n                var range = document.createRange();\n\n                /*--------------------------------------------------------------------------------------------------------*/\n\n                // Test for Firefox 2 bug that prevents moving the start of a Range to a point after its current end and\n                // correct for it\n\n                range.setStart(testTextNode, 0);\n                range.setEnd(testTextNode, 0);\n\n                try {\n                    range.setStart(testTextNode, 1);\n\n                    rangeProto.setStart = function(node, offset) {\n                        this.nativeRange.setStart(node, offset);\n                        updateRangeProperties(this);\n                    };\n\n                    rangeProto.setEnd = function(node, offset) {\n                        this.nativeRange.setEnd(node, offset);\n                        updateRangeProperties(this);\n                    };\n\n                    createBeforeAfterNodeSetter = function(name) {\n                        return function(node) {\n                            this.nativeRange[name](node);\n                            updateRangeProperties(this);\n                        };\n                    };\n\n                } catch(ex) {\n\n                    rangeProto.setStart = function(node, offset) {\n                        try {\n                            this.nativeRange.setStart(node, offset);\n                        } catch (ex) {\n                            this.nativeRange.setEnd(node, offset);\n                            this.nativeRange.setStart(node, offset);\n                        }\n                        updateRangeProperties(this);\n                    };\n\n                    rangeProto.setEnd = function(node, offset) {\n                        try {\n                            this.nativeRange.setEnd(node, offset);\n                        } catch (ex) {\n                            this.nativeRange.setStart(node, offset);\n                            this.nativeRange.setEnd(node, offset);\n                        }\n                        updateRangeProperties(this);\n                    };\n\n                    createBeforeAfterNodeSetter = function(name, oppositeName) {\n                        return function(node) {\n                            try {\n                                this.nativeRange[name](node);\n                            } catch (ex) {\n                                this.nativeRange[oppositeName](node);\n                                this.nativeRange[name](node);\n                            }\n                            updateRangeProperties(this);\n                        };\n                    };\n                }\n\n                rangeProto.setStartBefore = createBeforeAfterNodeSetter(\"setStartBefore\", \"setEndBefore\");\n                rangeProto.setStartAfter = createBeforeAfterNodeSetter(\"setStartAfter\", \"setEndAfter\");\n                rangeProto.setEndBefore = createBeforeAfterNodeSetter(\"setEndBefore\", \"setStartBefore\");\n                rangeProto.setEndAfter = createBeforeAfterNodeSetter(\"setEndAfter\", \"setStartAfter\");\n\n                /*--------------------------------------------------------------------------------------------------------*/\n\n                // Always use DOM4-compliant selectNodeContents implementation: it's simpler and less code than testing\n                // whether the native implementation can be trusted\n                rangeProto.selectNodeContents = function(node) {\n                    this.setStartAndEnd(node, 0, dom.getNodeLength(node));\n                };\n\n                /*--------------------------------------------------------------------------------------------------------*/\n\n                // Test for and correct WebKit bug that has the behaviour of compareBoundaryPoints round the wrong way for\n                // constants START_TO_END and END_TO_START: https://bugs.webkit.org/show_bug.cgi?id=20738\n\n                range.selectNodeContents(testTextNode);\n                range.setEnd(testTextNode, 3);\n\n                var range2 = document.createRange();\n                range2.selectNodeContents(testTextNode);\n                range2.setEnd(testTextNode, 4);\n                range2.setStart(testTextNode, 2);\n\n                if (range.compareBoundaryPoints(range.START_TO_END, range2) == -1 &&\n                        range.compareBoundaryPoints(range.END_TO_START, range2) == 1) {\n                    // This is the wrong way round, so correct for it\n\n                    rangeProto.compareBoundaryPoints = function(type, range) {\n                        range = range.nativeRange || range;\n                        if (type == range.START_TO_END) {\n                            type = range.END_TO_START;\n                        } else if (type == range.END_TO_START) {\n                            type = range.START_TO_END;\n                        }\n                        return this.nativeRange.compareBoundaryPoints(type, range);\n                    };\n                } else {\n                    rangeProto.compareBoundaryPoints = function(type, range) {\n                        return this.nativeRange.compareBoundaryPoints(type, range.nativeRange || range);\n                    };\n                }\n\n                /*--------------------------------------------------------------------------------------------------------*/\n\n                // Test for IE deleteContents() and extractContents() bug and correct it. See issue 107.\n\n                var el = document.createElement(\"div\");\n                el.innerHTML = \"123\";\n                var textNode = el.firstChild;\n                var body = getBody(document);\n                body.appendChild(el);\n\n                range.setStart(textNode, 1);\n                range.setEnd(textNode, 2);\n                range.deleteContents();\n\n                if (textNode.data == \"13\") {\n                    // Behaviour is correct per DOM4 Range so wrap the browser's implementation of deleteContents() and\n                    // extractContents()\n                    rangeProto.deleteContents = function() {\n                        this.nativeRange.deleteContents();\n                        updateRangeProperties(this);\n                    };\n\n                    rangeProto.extractContents = function() {\n                        var frag = this.nativeRange.extractContents();\n                        updateRangeProperties(this);\n                        return frag;\n                    };\n                } else {\n                }\n\n                body.removeChild(el);\n                body = null;\n\n                /*--------------------------------------------------------------------------------------------------------*/\n\n                // Test for existence of createContextualFragment and delegate to it if it exists\n                if (util.isHostMethod(range, \"createContextualFragment\")) {\n                    rangeProto.createContextualFragment = function(fragmentStr) {\n                        return this.nativeRange.createContextualFragment(fragmentStr);\n                    };\n                }\n\n                /*--------------------------------------------------------------------------------------------------------*/\n\n                // Clean up\n                getBody(document).removeChild(testTextNode);\n\n                rangeProto.getName = function() {\n                    return \"WrappedRange\";\n                };\n\n                api.WrappedRange = WrappedRange;\n\n                api.createNativeRange = function(doc) {\n                    doc = getContentDocument(doc, module, \"createNativeRange\");\n                    return doc.createRange();\n                };\n            })();\n        }\n\n        if (api.features.implementsTextRange) {\n            /*\n            This is a workaround for a bug where IE returns the wrong container element from the TextRange's parentElement()\n            method. For example, in the following (where pipes denote the selection boundaries):\n\n            <ul id=\"ul\"><li id=\"a\">| a </li><li id=\"b\"> b |</li></ul>\n\n            var range = document.selection.createRange();\n            alert(range.parentElement().id); // Should alert \"ul\" but alerts \"b\"\n\n            This method returns the common ancestor node of the following:\n            - the parentElement() of the textRange\n            - the parentElement() of the textRange after calling collapse(true)\n            - the parentElement() of the textRange after calling collapse(false)\n            */\n            var getTextRangeContainerElement = function(textRange) {\n                var parentEl = textRange.parentElement();\n                var range = textRange.duplicate();\n                range.collapse(true);\n                var startEl = range.parentElement();\n                range = textRange.duplicate();\n                range.collapse(false);\n                var endEl = range.parentElement();\n                var startEndContainer = (startEl == endEl) ? startEl : dom.getCommonAncestor(startEl, endEl);\n\n                return startEndContainer == parentEl ? startEndContainer : dom.getCommonAncestor(parentEl, startEndContainer);\n            };\n\n            var textRangeIsCollapsed = function(textRange) {\n                return textRange.compareEndPoints(\"StartToEnd\", textRange) == 0;\n            };\n\n            // Gets the boundary of a TextRange expressed as a node and an offset within that node. This function started\n            // out as an improved version of code found in Tim Cameron Ryan's IERange (http://code.google.com/p/ierange/)\n            // but has grown, fixing problems with line breaks in preformatted text, adding workaround for IE TextRange\n            // bugs, handling for inputs and images, plus optimizations.\n            var getTextRangeBoundaryPosition = function(textRange, wholeRangeContainerElement, isStart, isCollapsed, startInfo) {\n                var workingRange = textRange.duplicate();\n                workingRange.collapse(isStart);\n                var containerElement = workingRange.parentElement();\n\n                // Sometimes collapsing a TextRange that's at the start of a text node can move it into the previous node, so\n                // check for that\n                if (!dom.isOrIsAncestorOf(wholeRangeContainerElement, containerElement)) {\n                    containerElement = wholeRangeContainerElement;\n                }\n\n\n                // Deal with nodes that cannot \"contain rich HTML markup\". In practice, this means form inputs, images and\n                // similar. See http://msdn.microsoft.com/en-us/library/aa703950%28VS.85%29.aspx\n                if (!containerElement.canHaveHTML) {\n                    var pos = new DomPosition(containerElement.parentNode, dom.getNodeIndex(containerElement));\n                    return {\n                        boundaryPosition: pos,\n                        nodeInfo: {\n                            nodeIndex: pos.offset,\n                            containerElement: pos.node\n                        }\n                    };\n                }\n\n                var workingNode = dom.getDocument(containerElement).createElement(\"span\");\n\n                // Workaround for HTML5 Shiv's insane violation of document.createElement(). See Rangy issue 104 and HTML5\n                // Shiv issue 64: https://github.com/aFarkas/html5shiv/issues/64\n                if (workingNode.parentNode) {\n                    dom.removeNode(workingNode);\n                }\n\n                var comparison, workingComparisonType = isStart ? \"StartToStart\" : \"StartToEnd\";\n                var previousNode, nextNode, boundaryPosition, boundaryNode;\n                var start = (startInfo && startInfo.containerElement == containerElement) ? startInfo.nodeIndex : 0;\n                var childNodeCount = containerElement.childNodes.length;\n                var end = childNodeCount;\n\n                // Check end first. Code within the loop assumes that the endth child node of the container is definitely\n                // after the range boundary.\n                var nodeIndex = end;\n\n                while (true) {\n                    if (nodeIndex == childNodeCount) {\n                        containerElement.appendChild(workingNode);\n                    } else {\n                        containerElement.insertBefore(workingNode, containerElement.childNodes[nodeIndex]);\n                    }\n                    workingRange.moveToElementText(workingNode);\n                    comparison = workingRange.compareEndPoints(workingComparisonType, textRange);\n                    if (comparison == 0 || start == end) {\n                        break;\n                    } else if (comparison == -1) {\n                        if (end == start + 1) {\n                            // We know the endth child node is after the range boundary, so we must be done.\n                            break;\n                        } else {\n                            start = nodeIndex;\n                        }\n                    } else {\n                        end = (end == start + 1) ? start : nodeIndex;\n                    }\n                    nodeIndex = Math.floor((start + end) / 2);\n                    containerElement.removeChild(workingNode);\n                }\n\n\n                // We've now reached or gone past the boundary of the text range we're interested in\n                // so have identified the node we want\n                boundaryNode = workingNode.nextSibling;\n\n                if (comparison == -1 && boundaryNode && isCharacterDataNode(boundaryNode)) {\n                    // This is a character data node (text, comment, cdata). The working range is collapsed at the start of\n                    // the node containing the text range's boundary, so we move the end of the working range to the\n                    // boundary point and measure the length of its text to get the boundary's offset within the node.\n                    workingRange.setEndPoint(isStart ? \"EndToStart\" : \"EndToEnd\", textRange);\n\n                    var offset;\n\n                    if (/[\\r\\n]/.test(boundaryNode.data)) {\n                        /*\n                        For the particular case of a boundary within a text node containing rendered line breaks (within a\n                        <pre> element, for example), we need a slightly complicated approach to get the boundary's offset in\n                        IE. The facts:\n\n                        - Each line break is represented as \\r in the text node's data/nodeValue properties\n                        - Each line break is represented as \\r\\n in the TextRange's 'text' property\n                        - The 'text' property of the TextRange does not contain trailing line breaks\n\n                        To get round the problem presented by the final fact above, we can use the fact that TextRange's\n                        moveStart() and moveEnd() methods return the actual number of characters moved, which is not\n                        necessarily the same as the number of characters it was instructed to move. The simplest approach is\n                        to use this to store the characters moved when moving both the start and end of the range to the\n                        start of the document body and subtracting the start offset from the end offset (the\n                        \"move-negative-gazillion\" method). However, this is extremely slow when the document is large and\n                        the range is near the end of it. Clearly doing the mirror image (i.e. moving the range boundaries to\n                        the end of the document) has the same problem.\n\n                        Another approach that works is to use moveStart() to move the start boundary of the range up to the\n                        end boundary one character at a time and incrementing a counter with the value returned by the\n                        moveStart() call. However, the check for whether the start boundary has reached the end boundary is\n                        expensive, so this method is slow (although unlike \"move-negative-gazillion\" is largely unaffected\n                        by the location of the range within the document).\n\n                        The approach used below is a hybrid of the two methods above. It uses the fact that a string\n                        containing the TextRange's 'text' property with each \\r\\n converted to a single \\r character cannot\n                        be longer than the text of the TextRange, so the start of the range is moved that length initially\n                        and then a character at a time to make up for any trailing line breaks not contained in the 'text'\n                        property. This has good performance in most situations compared to the previous two methods.\n                        */\n                        var tempRange = workingRange.duplicate();\n                        var rangeLength = tempRange.text.replace(/\\r\\n/g, \"\\r\").length;\n\n                        offset = tempRange.moveStart(\"character\", rangeLength);\n                        while ( (comparison = tempRange.compareEndPoints(\"StartToEnd\", tempRange)) == -1) {\n                            offset++;\n                            tempRange.moveStart(\"character\", 1);\n                        }\n                    } else {\n                        offset = workingRange.text.length;\n                    }\n                    boundaryPosition = new DomPosition(boundaryNode, offset);\n                } else {\n\n                    // If the boundary immediately follows a character data node and this is the end boundary, we should favour\n                    // a position within that, and likewise for a start boundary preceding a character data node\n                    previousNode = (isCollapsed || !isStart) && workingNode.previousSibling;\n                    nextNode = (isCollapsed || isStart) && workingNode.nextSibling;\n                    if (nextNode && isCharacterDataNode(nextNode)) {\n                        boundaryPosition = new DomPosition(nextNode, 0);\n                    } else if (previousNode && isCharacterDataNode(previousNode)) {\n                        boundaryPosition = new DomPosition(previousNode, previousNode.data.length);\n                    } else {\n                        boundaryPosition = new DomPosition(containerElement, dom.getNodeIndex(workingNode));\n                    }\n                }\n\n                // Clean up\n                dom.removeNode(workingNode);\n\n                return {\n                    boundaryPosition: boundaryPosition,\n                    nodeInfo: {\n                        nodeIndex: nodeIndex,\n                        containerElement: containerElement\n                    }\n                };\n            };\n\n            // Returns a TextRange representing the boundary of a TextRange expressed as a node and an offset within that\n            // node. This function started out as an optimized version of code found in Tim Cameron Ryan's IERange\n            // (http://code.google.com/p/ierange/)\n            var createBoundaryTextRange = function(boundaryPosition, isStart) {\n                var boundaryNode, boundaryParent, boundaryOffset = boundaryPosition.offset;\n                var doc = dom.getDocument(boundaryPosition.node);\n                var workingNode, childNodes, workingRange = getBody(doc).createTextRange();\n                var nodeIsDataNode = isCharacterDataNode(boundaryPosition.node);\n\n                if (nodeIsDataNode) {\n                    boundaryNode = boundaryPosition.node;\n                    boundaryParent = boundaryNode.parentNode;\n                } else {\n                    childNodes = boundaryPosition.node.childNodes;\n                    boundaryNode = (boundaryOffset < childNodes.length) ? childNodes[boundaryOffset] : null;\n                    boundaryParent = boundaryPosition.node;\n                }\n\n                // Position the range immediately before the node containing the boundary\n                workingNode = doc.createElement(\"span\");\n\n                // Making the working element non-empty element persuades IE to consider the TextRange boundary to be within\n                // the element rather than immediately before or after it\n                workingNode.innerHTML = \"&#feff;\";\n\n                // insertBefore is supposed to work like appendChild if the second parameter is null. However, a bug report\n                // for IERange suggests that it can crash the browser: http://code.google.com/p/ierange/issues/detail?id=12\n                if (boundaryNode) {\n                    boundaryParent.insertBefore(workingNode, boundaryNode);\n                } else {\n                    boundaryParent.appendChild(workingNode);\n                }\n\n                workingRange.moveToElementText(workingNode);\n                workingRange.collapse(!isStart);\n\n                // Clean up\n                boundaryParent.removeChild(workingNode);\n\n                // Move the working range to the text offset, if required\n                if (nodeIsDataNode) {\n                    workingRange[isStart ? \"moveStart\" : \"moveEnd\"](\"character\", boundaryOffset);\n                }\n\n                return workingRange;\n            };\n\n            /*------------------------------------------------------------------------------------------------------------*/\n\n            // This is a wrapper around a TextRange, providing full DOM Range functionality using rangy's DomRange as a\n            // prototype\n\n            WrappedTextRange = function(textRange) {\n                this.textRange = textRange;\n                this.refresh();\n            };\n\n            WrappedTextRange.prototype = new DomRange(document);\n\n            WrappedTextRange.prototype.refresh = function() {\n                var start, end, startBoundary;\n\n                // TextRange's parentElement() method cannot be trusted. getTextRangeContainerElement() works around that.\n                var rangeContainerElement = getTextRangeContainerElement(this.textRange);\n\n                if (textRangeIsCollapsed(this.textRange)) {\n                    end = start = getTextRangeBoundaryPosition(this.textRange, rangeContainerElement, true,\n                        true).boundaryPosition;\n                } else {\n                    startBoundary = getTextRangeBoundaryPosition(this.textRange, rangeContainerElement, true, false);\n                    start = startBoundary.boundaryPosition;\n\n                    // An optimization used here is that if the start and end boundaries have the same parent element, the\n                    // search scope for the end boundary can be limited to exclude the portion of the element that precedes\n                    // the start boundary\n                    end = getTextRangeBoundaryPosition(this.textRange, rangeContainerElement, false, false,\n                        startBoundary.nodeInfo).boundaryPosition;\n                }\n\n                this.setStart(start.node, start.offset);\n                this.setEnd(end.node, end.offset);\n            };\n\n            WrappedTextRange.prototype.getName = function() {\n                return \"WrappedTextRange\";\n            };\n\n            DomRange.copyComparisonConstants(WrappedTextRange);\n\n            var rangeToTextRange = function(range) {\n                if (range.collapsed) {\n                    return createBoundaryTextRange(new DomPosition(range.startContainer, range.startOffset), true);\n                } else {\n                    var startRange = createBoundaryTextRange(new DomPosition(range.startContainer, range.startOffset), true);\n                    var endRange = createBoundaryTextRange(new DomPosition(range.endContainer, range.endOffset), false);\n                    var textRange = getBody( DomRange.getRangeDocument(range) ).createTextRange();\n                    textRange.setEndPoint(\"StartToStart\", startRange);\n                    textRange.setEndPoint(\"EndToEnd\", endRange);\n                    return textRange;\n                }\n            };\n\n            WrappedTextRange.rangeToTextRange = rangeToTextRange;\n\n            WrappedTextRange.prototype.toTextRange = function() {\n                return rangeToTextRange(this);\n            };\n\n            api.WrappedTextRange = WrappedTextRange;\n\n            // IE 9 and above have both implementations and Rangy makes both available. The next few lines sets which\n            // implementation to use by default.\n            if (!api.features.implementsDomRange || api.config.preferTextRange) {\n                // Add WrappedTextRange as the Range property of the global object to allow expression like Range.END_TO_END to work\n                var globalObj = (function(f) { return f(\"return this;\")(); })(Function);\n                if (typeof globalObj.Range == \"undefined\") {\n                    globalObj.Range = WrappedTextRange;\n                }\n\n                api.createNativeRange = function(doc) {\n                    doc = getContentDocument(doc, module, \"createNativeRange\");\n                    return getBody(doc).createTextRange();\n                };\n\n                api.WrappedRange = WrappedTextRange;\n            }\n        }\n\n        api.createRange = function(doc) {\n            doc = getContentDocument(doc, module, \"createRange\");\n            return new api.WrappedRange(api.createNativeRange(doc));\n        };\n\n        api.createRangyRange = function(doc) {\n            doc = getContentDocument(doc, module, \"createRangyRange\");\n            return new DomRange(doc);\n        };\n\n        util.createAliasForDeprecatedMethod(api, \"createIframeRange\", \"createRange\");\n        util.createAliasForDeprecatedMethod(api, \"createIframeRangyRange\", \"createRangyRange\");\n\n        api.addShimListener(function(win) {\n            var doc = win.document;\n            if (typeof doc.createRange == \"undefined\") {\n                doc.createRange = function() {\n                    return api.createRange(doc);\n                };\n            }\n            doc = win = null;\n        });\n    });\n\n    /*----------------------------------------------------------------------------------------------------------------*/\n\n    // This module creates a selection object wrapper that conforms as closely as possible to the Selection specification\n    // in the W3C Selection API spec (https://www.w3.org/TR/selection-api)\n    api.createCoreModule(\"WrappedSelection\", [\"DomRange\", \"WrappedRange\"], function(api, module) {\n        api.config.checkSelectionRanges = true;\n\n        var BOOLEAN = \"boolean\";\n        var NUMBER = \"number\";\n        var dom = api.dom;\n        var util = api.util;\n        var isHostMethod = util.isHostMethod;\n        var DomRange = api.DomRange;\n        var WrappedRange = api.WrappedRange;\n        var DOMException = api.DOMException;\n        var DomPosition = dom.DomPosition;\n        var getNativeSelection;\n        var selectionIsCollapsed;\n        var features = api.features;\n        var CONTROL = \"Control\";\n        var getDocument = dom.getDocument;\n        var getBody = dom.getBody;\n        var rangesEqual = DomRange.rangesEqual;\n\n\n        // Utility function to support direction parameters in the API that may be a string (\"backward\", \"backwards\",\n        // \"forward\" or \"forwards\") or a Boolean (true for backwards).\n        function isDirectionBackward(dir) {\n            return (typeof dir == \"string\") ? /^backward(s)?$/i.test(dir) : !!dir;\n        }\n\n        function getWindow(win, methodName) {\n            if (!win) {\n                return window;\n            } else if (dom.isWindow(win)) {\n                return win;\n            } else if (win instanceof WrappedSelection) {\n                return win.win;\n            } else {\n                var doc = dom.getContentDocument(win, module, methodName);\n                return dom.getWindow(doc);\n            }\n        }\n\n        function getWinSelection(winParam) {\n            return getWindow(winParam, \"getWinSelection\").getSelection();\n        }\n\n        function getDocSelection(winParam) {\n            return getWindow(winParam, \"getDocSelection\").document.selection;\n        }\n\n        function winSelectionIsBackward(sel) {\n            var backward = false;\n            if (sel.anchorNode) {\n                backward = (dom.comparePoints(sel.anchorNode, sel.anchorOffset, sel.focusNode, sel.focusOffset) == 1);\n            }\n            return backward;\n        }\n\n        // Test for the Range/TextRange and Selection features required\n        // Test for ability to retrieve selection\n        var implementsWinGetSelection = isHostMethod(window, \"getSelection\"),\n            implementsDocSelection = util.isHostObject(document, \"selection\");\n\n        features.implementsWinGetSelection = implementsWinGetSelection;\n        features.implementsDocSelection = implementsDocSelection;\n\n        var useDocumentSelection = implementsDocSelection && (!implementsWinGetSelection || api.config.preferTextRange);\n\n        if (useDocumentSelection) {\n            getNativeSelection = getDocSelection;\n            api.isSelectionValid = function(winParam) {\n                var doc = getWindow(winParam, \"isSelectionValid\").document, nativeSel = doc.selection;\n\n                // Check whether the selection TextRange is actually contained within the correct document\n                return (nativeSel.type != \"None\" || getDocument(nativeSel.createRange().parentElement()) == doc);\n            };\n        } else if (implementsWinGetSelection) {\n            getNativeSelection = getWinSelection;\n            api.isSelectionValid = function() {\n                return true;\n            };\n        } else {\n            module.fail(\"Neither document.selection or window.getSelection() detected.\");\n            return false;\n        }\n\n        api.getNativeSelection = getNativeSelection;\n\n        var testSelection = getNativeSelection();\n\n        // In Firefox, the selection is null in an iframe with display: none. See issue #138.\n        if (!testSelection) {\n            module.fail(\"Native selection was null (possibly issue 138?)\");\n            return false;\n        }\n\n        var testRange = api.createNativeRange(document);\n        var body = getBody(document);\n\n        // Obtaining a range from a selection\n        var selectionHasAnchorAndFocus = util.areHostProperties(testSelection,\n            [\"anchorNode\", \"focusNode\", \"anchorOffset\", \"focusOffset\"]);\n\n        features.selectionHasAnchorAndFocus = selectionHasAnchorAndFocus;\n\n        // Test for existence of native selection extend() method\n        var selectionHasExtend = isHostMethod(testSelection, \"extend\");\n        features.selectionHasExtend = selectionHasExtend;\n\n        // Test for existence of native selection setBaseAndExtent() method\n        var selectionHasSetBaseAndExtent = isHostMethod(testSelection, \"setBaseAndExtent\");\n        features.selectionHasSetBaseAndExtent = selectionHasSetBaseAndExtent;\n\n        // Test if rangeCount exists\n        var selectionHasRangeCount = (typeof testSelection.rangeCount == NUMBER);\n        features.selectionHasRangeCount = selectionHasRangeCount;\n\n        var selectionSupportsMultipleRanges = false;\n        var collapsedNonEditableSelectionsSupported = true;\n\n        var addRangeBackwardToNative = selectionHasExtend ?\n            function(nativeSelection, range) {\n                var doc = DomRange.getRangeDocument(range);\n                var endRange = api.createRange(doc);\n                endRange.collapseToPoint(range.endContainer, range.endOffset);\n                nativeSelection.addRange(getNativeRange(endRange));\n                nativeSelection.extend(range.startContainer, range.startOffset);\n            } : null;\n\n        if (util.areHostMethods(testSelection, [\"addRange\", \"getRangeAt\", \"removeAllRanges\"]) &&\n                typeof testSelection.rangeCount == NUMBER && features.implementsDomRange) {\n\n            (function() {\n                // Previously an iframe was used but this caused problems in some circumstances in IE, so tests are\n                // performed on the current document's selection. See issue 109.\n\n                // Note also that if a selection previously existed, it is wiped and later restored by these tests. This\n                // will result in the selection direction being reversed if the original selection was backwards and the\n                // browser does not support setting backwards selections (Internet Explorer, I'm looking at you).\n                var sel = window.getSelection();\n                if (sel) {\n                    // Store the current selection\n                    var originalSelectionRangeCount = sel.rangeCount;\n                    var selectionHasMultipleRanges = (originalSelectionRangeCount > 1);\n                    var originalSelectionRanges = [];\n                    var originalSelectionBackward = winSelectionIsBackward(sel);\n                    for (var i = 0; i < originalSelectionRangeCount; ++i) {\n                        originalSelectionRanges[i] = sel.getRangeAt(i);\n                    }\n\n                    // Create some test elements\n                    var testEl = dom.createTestElement(document, \"\", false);\n                    var textNode = testEl.appendChild( document.createTextNode(\"\\u00a0\\u00a0\\u00a0\") );\n\n                    // Test whether the native selection will allow a collapsed selection within a non-editable element\n                    var r1 = document.createRange();\n\n                    r1.setStart(textNode, 1);\n                    r1.collapse(true);\n                    sel.removeAllRanges();\n                    sel.addRange(r1);\n                    collapsedNonEditableSelectionsSupported = (sel.rangeCount == 1);\n                    sel.removeAllRanges();\n\n                    // Test whether the native selection is capable of supporting multiple ranges.\n                    if (!selectionHasMultipleRanges) {\n                        // Doing the original feature test here in Chrome 36 (and presumably later versions) prints a\n                        // console error of \"Discontiguous selection is not supported.\" that cannot be suppressed. There's\n                        // nothing we can do about this while retaining the feature test so we have to resort to a browser\n                        // sniff. I'm not happy about it. See\n                        // https://code.google.com/p/chromium/issues/detail?id=399791\n                        var chromeMatch = window.navigator.appVersion.match(/Chrome\\/(.*?) /);\n                        if (chromeMatch && parseInt(chromeMatch[1]) >= 36) {\n                            selectionSupportsMultipleRanges = false;\n                        } else {\n                            var r2 = r1.cloneRange();\n                            r1.setStart(textNode, 0);\n                            r2.setEnd(textNode, 3);\n                            r2.setStart(textNode, 2);\n                            sel.addRange(r1);\n                            sel.addRange(r2);\n                            selectionSupportsMultipleRanges = (sel.rangeCount == 2);\n                        }\n                    }\n\n                    // Clean up\n                    dom.removeNode(testEl);\n                    sel.removeAllRanges();\n\n                    for (i = 0; i < originalSelectionRangeCount; ++i) {\n                        if (i == 0 && originalSelectionBackward) {\n                            if (addRangeBackwardToNative) {\n                                addRangeBackwardToNative(sel, originalSelectionRanges[i]);\n                            } else {\n                                api.warn(\"Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend\");\n                                sel.addRange(originalSelectionRanges[i]);\n                            }\n                        } else {\n                            sel.addRange(originalSelectionRanges[i]);\n                        }\n                    }\n                }\n            })();\n        }\n\n        features.selectionSupportsMultipleRanges = selectionSupportsMultipleRanges;\n        features.collapsedNonEditableSelectionsSupported = collapsedNonEditableSelectionsSupported;\n\n        // ControlRanges\n        var implementsControlRange = false, testControlRange;\n\n        if (body && isHostMethod(body, \"createControlRange\")) {\n            testControlRange = body.createControlRange();\n            if (util.areHostProperties(testControlRange, [\"item\", \"add\"])) {\n                implementsControlRange = true;\n            }\n        }\n        features.implementsControlRange = implementsControlRange;\n\n        // Selection collapsedness\n        if (selectionHasAnchorAndFocus) {\n            selectionIsCollapsed = function(sel) {\n                return sel.anchorNode === sel.focusNode && sel.anchorOffset === sel.focusOffset;\n            };\n        } else {\n            selectionIsCollapsed = function(sel) {\n                return sel.rangeCount ? sel.getRangeAt(sel.rangeCount - 1).collapsed : false;\n            };\n        }\n\n        function updateAnchorAndFocusFromRange(sel, range, backward) {\n            var anchorPrefix = backward ? \"end\" : \"start\", focusPrefix = backward ? \"start\" : \"end\";\n            sel.anchorNode = range[anchorPrefix + \"Container\"];\n            sel.anchorOffset = range[anchorPrefix + \"Offset\"];\n            sel.focusNode = range[focusPrefix + \"Container\"];\n            sel.focusOffset = range[focusPrefix + \"Offset\"];\n        }\n\n        function updateAnchorAndFocusFromNativeSelection(sel) {\n            var nativeSel = sel.nativeSelection;\n            sel.anchorNode = nativeSel.anchorNode;\n            sel.anchorOffset = nativeSel.anchorOffset;\n            sel.focusNode = nativeSel.focusNode;\n            sel.focusOffset = nativeSel.focusOffset;\n        }\n\n        function updateEmptySelection(sel) {\n            sel.anchorNode = sel.focusNode = null;\n            sel.anchorOffset = sel.focusOffset = 0;\n            sel.rangeCount = 0;\n            sel.isCollapsed = true;\n            sel._ranges.length = 0;\n            updateType(sel);\n        }\n\n        function updateType(sel) {\n            sel.type = (sel.rangeCount == 0) ? \"None\" : (selectionIsCollapsed(sel) ? \"Caret\" : \"Range\");\n        }\n\n        function getNativeRange(range) {\n            var nativeRange;\n            if (range instanceof DomRange) {\n                nativeRange = api.createNativeRange(range.getDocument());\n                nativeRange.setEnd(range.endContainer, range.endOffset);\n                nativeRange.setStart(range.startContainer, range.startOffset);\n            } else if (range instanceof WrappedRange) {\n                nativeRange = range.nativeRange;\n            } else if (features.implementsDomRange && (range instanceof dom.getWindow(range.startContainer).Range)) {\n                nativeRange = range;\n            }\n            return nativeRange;\n        }\n\n        function rangeContainsSingleElement(rangeNodes) {\n            if (!rangeNodes.length || rangeNodes[0].nodeType != 1) {\n                return false;\n            }\n            for (var i = 1, len = rangeNodes.length; i < len; ++i) {\n                if (!dom.isAncestorOf(rangeNodes[0], rangeNodes[i])) {\n                    return false;\n                }\n            }\n            return true;\n        }\n\n        function getSingleElementFromRange(range) {\n            var nodes = range.getNodes();\n            if (!rangeContainsSingleElement(nodes)) {\n                throw module.createError(\"getSingleElementFromRange: range \" + range.inspect() + \" did not consist of a single element\");\n            }\n            return nodes[0];\n        }\n\n        // Simple, quick test which only needs to distinguish between a TextRange and a ControlRange\n        function isTextRange(range) {\n            return !!range && typeof range.text != \"undefined\";\n        }\n\n        function updateFromTextRange(sel, range) {\n            // Create a Range from the selected TextRange\n            var wrappedRange = new WrappedRange(range);\n            sel._ranges = [wrappedRange];\n\n            updateAnchorAndFocusFromRange(sel, wrappedRange, false);\n            sel.rangeCount = 1;\n            sel.isCollapsed = wrappedRange.collapsed;\n            updateType(sel);\n        }\n\n        function updateControlSelection(sel) {\n            // Update the wrapped selection based on what's now in the native selection\n            sel._ranges.length = 0;\n            if (sel.docSelection.type == \"None\") {\n                updateEmptySelection(sel);\n            } else {\n                var controlRange = sel.docSelection.createRange();\n                if (isTextRange(controlRange)) {\n                    // This case (where the selection type is \"Control\" and calling createRange() on the selection returns\n                    // a TextRange) can happen in IE 9. It happens, for example, when all elements in the selected\n                    // ControlRange have been removed from the ControlRange and removed from the document.\n                    updateFromTextRange(sel, controlRange);\n                } else {\n                    sel.rangeCount = controlRange.length;\n                    var range, doc = getDocument(controlRange.item(0));\n                    for (var i = 0; i < sel.rangeCount; ++i) {\n                        range = api.createRange(doc);\n                        range.selectNode(controlRange.item(i));\n                        sel._ranges.push(range);\n                    }\n                    sel.isCollapsed = sel.rangeCount == 1 && sel._ranges[0].collapsed;\n                    updateAnchorAndFocusFromRange(sel, sel._ranges[sel.rangeCount - 1], false);\n                    updateType(sel);\n                }\n            }\n        }\n\n        function addRangeToControlSelection(sel, range) {\n            var controlRange = sel.docSelection.createRange();\n            var rangeElement = getSingleElementFromRange(range);\n\n            // Create a new ControlRange containing all the elements in the selected ControlRange plus the element\n            // contained by the supplied range\n            var doc = getDocument(controlRange.item(0));\n            var newControlRange = getBody(doc).createControlRange();\n            for (var i = 0, len = controlRange.length; i < len; ++i) {\n                newControlRange.add(controlRange.item(i));\n            }\n            try {\n                newControlRange.add(rangeElement);\n            } catch (ex) {\n                throw module.createError(\"addRange(): Element within the specified Range could not be added to control selection (does it have layout?)\");\n            }\n            newControlRange.select();\n\n            // Update the wrapped selection based on what's now in the native selection\n            updateControlSelection(sel);\n        }\n\n        var getSelectionRangeAt;\n\n        if (isHostMethod(testSelection, \"getRangeAt\")) {\n            // try/catch is present because getRangeAt() must have thrown an error in some browser and some situation.\n            // Unfortunately, I didn't write a comment about the specifics and am now scared to take it out. Let that be a\n            // lesson to us all, especially me.\n            getSelectionRangeAt = function(sel, index) {\n                try {\n                    return sel.getRangeAt(index);\n                } catch (ex) {\n                    return null;\n                }\n            };\n        } else if (selectionHasAnchorAndFocus) {\n            getSelectionRangeAt = function(sel) {\n                var doc = getDocument(sel.anchorNode);\n                var range = api.createRange(doc);\n                range.setStartAndEnd(sel.anchorNode, sel.anchorOffset, sel.focusNode, sel.focusOffset);\n\n                // Handle the case when the selection was selected backwards (from the end to the start in the\n                // document)\n                if (range.collapsed !== this.isCollapsed) {\n                    range.setStartAndEnd(sel.focusNode, sel.focusOffset, sel.anchorNode, sel.anchorOffset);\n                }\n\n                return range;\n            };\n        }\n\n        function WrappedSelection(selection, docSelection, win) {\n            this.nativeSelection = selection;\n            this.docSelection = docSelection;\n            this._ranges = [];\n            this.win = win;\n            this.refresh();\n        }\n\n        WrappedSelection.prototype = api.selectionPrototype;\n\n        function deleteProperties(sel) {\n            sel.win = sel.anchorNode = sel.focusNode = sel._ranges = null;\n            sel.rangeCount = sel.anchorOffset = sel.focusOffset = 0;\n            sel.detached = true;\n            updateType(sel);\n        }\n\n        var cachedRangySelections = [];\n\n        function actOnCachedSelection(win, action) {\n            var i = cachedRangySelections.length, cached, sel;\n            while (i--) {\n                cached = cachedRangySelections[i];\n                sel = cached.selection;\n                if (action == \"deleteAll\") {\n                    deleteProperties(sel);\n                } else if (cached.win == win) {\n                    if (action == \"delete\") {\n                        cachedRangySelections.splice(i, 1);\n                        return true;\n                    } else {\n                        return sel;\n                    }\n                }\n            }\n            if (action == \"deleteAll\") {\n                cachedRangySelections.length = 0;\n            }\n            return null;\n        }\n\n        var getSelection = function(win) {\n            // Check if the parameter is a Rangy Selection object\n            if (win && win instanceof WrappedSelection) {\n                win.refresh();\n                return win;\n            }\n\n            win = getWindow(win, \"getNativeSelection\");\n\n            var sel = actOnCachedSelection(win);\n            var nativeSel = getNativeSelection(win), docSel = implementsDocSelection ? getDocSelection(win) : null;\n            if (sel) {\n                sel.nativeSelection = nativeSel;\n                sel.docSelection = docSel;\n                sel.refresh();\n            } else {\n                sel = new WrappedSelection(nativeSel, docSel, win);\n                cachedRangySelections.push( { win: win, selection: sel } );\n            }\n            return sel;\n        };\n\n        api.getSelection = getSelection;\n\n        util.createAliasForDeprecatedMethod(api, \"getIframeSelection\", \"getSelection\");\n\n        var selProto = WrappedSelection.prototype;\n\n        function createControlSelection(sel, ranges) {\n            // Ensure that the selection becomes of type \"Control\"\n            var doc = getDocument(ranges[0].startContainer);\n            var controlRange = getBody(doc).createControlRange();\n            for (var i = 0, el, len = ranges.length; i < len; ++i) {\n                el = getSingleElementFromRange(ranges[i]);\n                try {\n                    controlRange.add(el);\n                } catch (ex) {\n                    throw module.createError(\"setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)\");\n                }\n            }\n            controlRange.select();\n\n            // Update the wrapped selection based on what's now in the native selection\n            updateControlSelection(sel);\n        }\n\n        // Selecting a range\n        if (!useDocumentSelection && selectionHasAnchorAndFocus && util.areHostMethods(testSelection, [\"removeAllRanges\", \"addRange\"])) {\n            selProto.removeAllRanges = function() {\n                this.nativeSelection.removeAllRanges();\n                updateEmptySelection(this);\n            };\n\n            var addRangeBackward = function(sel, range) {\n                addRangeBackwardToNative(sel.nativeSelection, range);\n                sel.refresh();\n            };\n\n            if (selectionHasRangeCount) {\n                selProto.addRange = function(range, direction) {\n                    if (implementsControlRange && implementsDocSelection && this.docSelection.type == CONTROL) {\n                        addRangeToControlSelection(this, range);\n                    } else {\n                        if (isDirectionBackward(direction) && selectionHasExtend) {\n                            addRangeBackward(this, range);\n                        } else {\n                            var previousRangeCount;\n                            if (selectionSupportsMultipleRanges) {\n                                previousRangeCount = this.rangeCount;\n                            } else {\n                                this.removeAllRanges();\n                                previousRangeCount = 0;\n                            }\n                            // Clone the native range so that changing the selected range does not affect the selection.\n                            // This is contrary to the spec but is the only way to achieve consistency between browsers. See\n                            // issue 80.\n                            var clonedNativeRange = getNativeRange(range).cloneRange();\n                            try {\n                                this.nativeSelection.addRange(clonedNativeRange);\n                            } catch (ex) {\n                            }\n\n                            // Check whether adding the range was successful\n                            this.rangeCount = this.nativeSelection.rangeCount;\n\n                            if (this.rangeCount == previousRangeCount + 1) {\n                                // The range was added successfully\n\n                                // Check whether the range that we added to the selection is reflected in the last range extracted from\n                                // the selection\n                                if (api.config.checkSelectionRanges) {\n                                    var nativeRange = getSelectionRangeAt(this.nativeSelection, this.rangeCount - 1);\n                                    if (nativeRange && !rangesEqual(nativeRange, range)) {\n                                        // Happens in WebKit with, for example, a selection placed at the start of a text node\n                                        range = new WrappedRange(nativeRange);\n                                    }\n                                }\n                                this._ranges[this.rangeCount - 1] = range;\n                                updateAnchorAndFocusFromRange(this, range, selectionIsBackward(this.nativeSelection));\n                                this.isCollapsed = selectionIsCollapsed(this);\n                                updateType(this);\n                            } else {\n                                // The range was not added successfully. The simplest thing is to refresh\n                                this.refresh();\n                            }\n                        }\n                    }\n                };\n            } else {\n                selProto.addRange = function(range, direction) {\n                    if (isDirectionBackward(direction) && selectionHasExtend) {\n                        addRangeBackward(this, range);\n                    } else {\n                        this.nativeSelection.addRange(getNativeRange(range));\n                        this.refresh();\n                    }\n                };\n            }\n\n            selProto.setRanges = function(ranges) {\n                if (implementsControlRange && implementsDocSelection && ranges.length > 1) {\n                    createControlSelection(this, ranges);\n                } else {\n                    this.removeAllRanges();\n                    for (var i = 0, len = ranges.length; i < len; ++i) {\n                        this.addRange(ranges[i]);\n                    }\n                }\n            };\n        } else if (isHostMethod(testSelection, \"empty\") && isHostMethod(testRange, \"select\") &&\n                   implementsControlRange && useDocumentSelection) {\n\n            selProto.removeAllRanges = function() {\n                // Added try/catch as fix for issue #21\n                try {\n                    this.docSelection.empty();\n\n                    // Check for empty() not working (issue #24)\n                    if (this.docSelection.type != \"None\") {\n                        // Work around failure to empty a control selection by instead selecting a TextRange and then\n                        // calling empty()\n                        var doc;\n                        if (this.anchorNode) {\n                            doc = getDocument(this.anchorNode);\n                        } else if (this.docSelection.type == CONTROL) {\n                            var controlRange = this.docSelection.createRange();\n                            if (controlRange.length) {\n                                doc = getDocument( controlRange.item(0) );\n                            }\n                        }\n                        if (doc) {\n                            var textRange = getBody(doc).createTextRange();\n                            textRange.select();\n                            this.docSelection.empty();\n                        }\n                    }\n                } catch(ex) {}\n                updateEmptySelection(this);\n            };\n\n            selProto.addRange = function(range) {\n                if (this.docSelection.type == CONTROL) {\n                    addRangeToControlSelection(this, range);\n                } else {\n                    api.WrappedTextRange.rangeToTextRange(range).select();\n                    this._ranges[0] = range;\n                    this.rangeCount = 1;\n                    this.isCollapsed = this._ranges[0].collapsed;\n                    updateAnchorAndFocusFromRange(this, range, false);\n                    updateType(this);\n                }\n            };\n\n            selProto.setRanges = function(ranges) {\n                this.removeAllRanges();\n                var rangeCount = ranges.length;\n                if (rangeCount > 1) {\n                    createControlSelection(this, ranges);\n                } else if (rangeCount) {\n                    this.addRange(ranges[0]);\n                }\n            };\n        } else {\n            module.fail(\"No means of selecting a Range or TextRange was found\");\n            return false;\n        }\n\n        selProto.getRangeAt = function(index) {\n            if (index < 0 || index >= this.rangeCount) {\n                throw new DOMException(\"INDEX_SIZE_ERR\");\n            } else {\n                // Clone the range to preserve selection-range independence. See issue 80.\n                return this._ranges[index].cloneRange();\n            }\n        };\n\n        var refreshSelection;\n\n        if (useDocumentSelection) {\n            refreshSelection = function(sel) {\n                var range;\n                if (api.isSelectionValid(sel.win)) {\n                    range = sel.docSelection.createRange();\n                } else {\n                    range = getBody(sel.win.document).createTextRange();\n                    range.collapse(true);\n                }\n\n                if (sel.docSelection.type == CONTROL) {\n                    updateControlSelection(sel);\n                } else if (isTextRange(range)) {\n                    updateFromTextRange(sel, range);\n                } else {\n                    updateEmptySelection(sel);\n                }\n            };\n        } else if (isHostMethod(testSelection, \"getRangeAt\") && typeof testSelection.rangeCount == NUMBER) {\n            refreshSelection = function(sel) {\n                if (implementsControlRange && implementsDocSelection && sel.docSelection.type == CONTROL) {\n                    updateControlSelection(sel);\n                } else {\n                    sel._ranges.length = sel.rangeCount = sel.nativeSelection.rangeCount;\n                    if (sel.rangeCount) {\n                        for (var i = 0, len = sel.rangeCount; i < len; ++i) {\n                            sel._ranges[i] = new api.WrappedRange(sel.nativeSelection.getRangeAt(i));\n                        }\n                        updateAnchorAndFocusFromRange(sel, sel._ranges[sel.rangeCount - 1], selectionIsBackward(sel.nativeSelection));\n                        sel.isCollapsed = selectionIsCollapsed(sel);\n                        updateType(sel);\n                    } else {\n                        updateEmptySelection(sel);\n                    }\n                }\n            };\n        } else if (selectionHasAnchorAndFocus && typeof testSelection.isCollapsed == BOOLEAN && typeof testRange.collapsed == BOOLEAN && features.implementsDomRange) {\n            refreshSelection = function(sel) {\n                var range, nativeSel = sel.nativeSelection;\n                if (nativeSel.anchorNode) {\n                    range = getSelectionRangeAt(nativeSel, 0);\n                    sel._ranges = [range];\n                    sel.rangeCount = 1;\n                    updateAnchorAndFocusFromNativeSelection(sel);\n                    sel.isCollapsed = selectionIsCollapsed(sel);\n                    updateType(sel);\n                } else {\n                    updateEmptySelection(sel);\n                }\n            };\n        } else {\n            module.fail(\"No means of obtaining a Range or TextRange from the user's selection was found\");\n            return false;\n        }\n\n        selProto.refresh = function(checkForChanges) {\n            var oldRanges = checkForChanges ? this._ranges.slice(0) : null;\n            var oldAnchorNode = this.anchorNode, oldAnchorOffset = this.anchorOffset;\n\n            refreshSelection(this);\n            if (checkForChanges) {\n                // Check the range count first\n                var i = oldRanges.length;\n                if (i != this._ranges.length) {\n                    return true;\n                }\n\n                // Now check the direction. Checking the anchor position is the same is enough since we're checking all the\n                // ranges after this\n                if (this.anchorNode != oldAnchorNode || this.anchorOffset != oldAnchorOffset) {\n                    return true;\n                }\n\n                // Finally, compare each range in turn\n                while (i--) {\n                    if (!rangesEqual(oldRanges[i], this._ranges[i])) {\n                        return true;\n                    }\n                }\n                return false;\n            }\n        };\n\n        // Removal of a single range\n        var removeRangeManually = function(sel, range) {\n            var ranges = sel.getAllRanges();\n            sel.removeAllRanges();\n            for (var i = 0, len = ranges.length; i < len; ++i) {\n                if (!rangesEqual(range, ranges[i])) {\n                    sel.addRange(ranges[i]);\n                }\n            }\n            if (!sel.rangeCount) {\n                updateEmptySelection(sel);\n            }\n        };\n\n        if (implementsControlRange && implementsDocSelection) {\n            selProto.removeRange = function(range) {\n                if (this.docSelection.type == CONTROL) {\n                    var controlRange = this.docSelection.createRange();\n                    var rangeElement = getSingleElementFromRange(range);\n\n                    // Create a new ControlRange containing all the elements in the selected ControlRange minus the\n                    // element contained by the supplied range\n                    var doc = getDocument(controlRange.item(0));\n                    var newControlRange = getBody(doc).createControlRange();\n                    var el, removed = false;\n                    for (var i = 0, len = controlRange.length; i < len; ++i) {\n                        el = controlRange.item(i);\n                        if (el !== rangeElement || removed) {\n                            newControlRange.add(controlRange.item(i));\n                        } else {\n                            removed = true;\n                        }\n                    }\n                    newControlRange.select();\n\n                    // Update the wrapped selection based on what's now in the native selection\n                    updateControlSelection(this);\n                } else {\n                    removeRangeManually(this, range);\n                }\n            };\n        } else {\n            selProto.removeRange = function(range) {\n                removeRangeManually(this, range);\n            };\n        }\n\n        // Detecting if a selection is backward\n        var selectionIsBackward;\n        if (!useDocumentSelection && selectionHasAnchorAndFocus && features.implementsDomRange) {\n            selectionIsBackward = winSelectionIsBackward;\n\n            selProto.isBackward = function() {\n                return selectionIsBackward(this);\n            };\n        } else {\n            selectionIsBackward = selProto.isBackward = function() {\n                return false;\n            };\n        }\n\n        // Create an alias for backwards compatibility. From 1.3, everything is \"backward\" rather than \"backwards\"\n        selProto.isBackwards = selProto.isBackward;\n\n        // Selection stringifier\n        // This is conformant to the old HTML5 selections draft spec but differs from WebKit and Mozilla's implementation.\n        // The current spec does not yet define this method.\n        selProto.toString = function() {\n            var rangeTexts = [];\n            for (var i = 0, len = this.rangeCount; i < len; ++i) {\n                rangeTexts[i] = \"\" + this._ranges[i];\n            }\n            return rangeTexts.join(\"\");\n        };\n\n        function assertNodeInSameDocument(sel, node) {\n            if (sel.win.document != getDocument(node)) {\n                throw new DOMException(\"WRONG_DOCUMENT_ERR\");\n            }\n        }\n\n        function assertValidOffset(node, offset) {\n            if (offset < 0 || offset > (dom.isCharacterDataNode(node) ? node.length : node.childNodes.length)) {\n                throw new DOMException(\"INDEX_SIZE_ERR\");\n            }\n        }\n\n        // No current browser conforms fully to the spec for this method, so Rangy's own method is always used\n        selProto.collapse = function(node, offset) {\n            assertNodeInSameDocument(this, node);\n            var range = api.createRange(node);\n            range.collapseToPoint(node, offset);\n            this.setSingleRange(range);\n            this.isCollapsed = true;\n        };\n\n        selProto.collapseToStart = function() {\n            if (this.rangeCount) {\n                var range = this._ranges[0];\n                this.collapse(range.startContainer, range.startOffset);\n            } else {\n                throw new DOMException(\"INVALID_STATE_ERR\");\n            }\n        };\n\n        selProto.collapseToEnd = function() {\n            if (this.rangeCount) {\n                var range = this._ranges[this.rangeCount - 1];\n                this.collapse(range.endContainer, range.endOffset);\n            } else {\n                throw new DOMException(\"INVALID_STATE_ERR\");\n            }\n        };\n\n        // The spec is very specific on how selectAllChildren should be implemented and not all browsers implement it as\n        // specified so the native implementation is never used by Rangy.\n        selProto.selectAllChildren = function(node) {\n            assertNodeInSameDocument(this, node);\n            var range = api.createRange(node);\n            range.selectNodeContents(node);\n            this.setSingleRange(range);\n        };\n\n        if (selectionHasSetBaseAndExtent) {\n            selProto.setBaseAndExtent = function(anchorNode, anchorOffset, focusNode, focusOffset) {\n                this.nativeSelection.setBaseAndExtent(anchorNode, anchorOffset, focusNode, focusOffset);\n                this.refresh();\n            };\n        } else if (selectionHasExtend) {\n            selProto.setBaseAndExtent = function(anchorNode, anchorOffset, focusNode, focusOffset) {\n                assertValidOffset(anchorNode, anchorOffset);\n                assertValidOffset(focusNode, focusOffset);\n                assertNodeInSameDocument(this, anchorNode);\n                assertNodeInSameDocument(this, focusNode);\n                var range = api.createRange(node);\n                var isBackwards = (dom.comparePoints(anchorNode, anchorOffset, focusNode, focusOffset) == -1);\n                if (isBackwards) {\n                    range.setStartAndEnd(focusNode, focusOffset, anchorNode, anchorOffset);\n                } else {\n                    range.setStartAndEnd(anchorNode, anchorOffset, focusNode, focusOffset);\n                }\n                this.setSingleRange(range, isBackwards);\n            };\n        }\n\n        selProto.deleteFromDocument = function() {\n            // Sepcial behaviour required for IE's control selections\n            if (implementsControlRange && implementsDocSelection && this.docSelection.type == CONTROL) {\n                var controlRange = this.docSelection.createRange();\n                var element;\n                while (controlRange.length) {\n                    element = controlRange.item(0);\n                    controlRange.remove(element);\n                    dom.removeNode(element);\n                }\n                this.refresh();\n            } else if (this.rangeCount) {\n                var ranges = this.getAllRanges();\n                if (ranges.length) {\n                    this.removeAllRanges();\n                    for (var i = 0, len = ranges.length; i < len; ++i) {\n                        ranges[i].deleteContents();\n                    }\n                    // The spec says nothing about what the selection should contain after calling deleteContents on each\n                    // range. Firefox moves the selection to where the final selected range was, so we emulate that\n                    this.addRange(ranges[len - 1]);\n                }\n            }\n        };\n\n        // The following are non-standard extensions\n        selProto.eachRange = function(func, returnValue) {\n            for (var i = 0, len = this._ranges.length; i < len; ++i) {\n                if ( func( this.getRangeAt(i) ) ) {\n                    return returnValue;\n                }\n            }\n        };\n\n        selProto.getAllRanges = function() {\n            var ranges = [];\n            this.eachRange(function(range) {\n                ranges.push(range);\n            });\n            return ranges;\n        };\n\n        selProto.setSingleRange = function(range, direction) {\n            this.removeAllRanges();\n            this.addRange(range, direction);\n        };\n\n        selProto.callMethodOnEachRange = function(methodName, params) {\n            var results = [];\n            this.eachRange( function(range) {\n                results.push( range[methodName].apply(range, params || []) );\n            } );\n            return results;\n        };\n\n        function createStartOrEndSetter(isStart) {\n            return function(node, offset) {\n                var range;\n                if (this.rangeCount) {\n                    range = this.getRangeAt(0);\n                    range[\"set\" + (isStart ? \"Start\" : \"End\")](node, offset);\n                } else {\n                    range = api.createRange(this.win.document);\n                    range.setStartAndEnd(node, offset);\n                }\n                this.setSingleRange(range, this.isBackward());\n            };\n        }\n\n        selProto.setStart = createStartOrEndSetter(true);\n        selProto.setEnd = createStartOrEndSetter(false);\n\n        // Add select() method to Range prototype. Any existing selection will be removed.\n        api.rangePrototype.select = function(direction) {\n            getSelection( this.getDocument() ).setSingleRange(this, direction);\n        };\n\n        selProto.changeEachRange = function(func) {\n            var ranges = [];\n            var backward = this.isBackward();\n\n            this.eachRange(function(range) {\n                func(range);\n                ranges.push(range);\n            });\n\n            this.removeAllRanges();\n            if (backward && ranges.length == 1) {\n                this.addRange(ranges[0], \"backward\");\n            } else {\n                this.setRanges(ranges);\n            }\n        };\n\n        selProto.containsNode = function(node, allowPartial) {\n            return this.eachRange( function(range) {\n                return range.containsNode(node, allowPartial);\n            }, true ) || false;\n        };\n\n        selProto.getBookmark = function(containerNode) {\n            return {\n                backward: this.isBackward(),\n                rangeBookmarks: this.callMethodOnEachRange(\"getBookmark\", [containerNode])\n            };\n        };\n\n        selProto.moveToBookmark = function(bookmark) {\n            var selRanges = [];\n            for (var i = 0, rangeBookmark, range; rangeBookmark = bookmark.rangeBookmarks[i++]; ) {\n                range = api.createRange(this.win);\n                range.moveToBookmark(rangeBookmark);\n                selRanges.push(range);\n            }\n            if (bookmark.backward) {\n                this.setSingleRange(selRanges[0], \"backward\");\n            } else {\n                this.setRanges(selRanges);\n            }\n        };\n\n        selProto.saveRanges = function() {\n            return {\n                backward: this.isBackward(),\n                ranges: this.callMethodOnEachRange(\"cloneRange\")\n            };\n        };\n\n        selProto.restoreRanges = function(selRanges) {\n            this.removeAllRanges();\n            for (var i = 0, range; range = selRanges.ranges[i]; ++i) {\n                this.addRange(range, (selRanges.backward && i == 0));\n            }\n        };\n\n        selProto.toHtml = function() {\n            var rangeHtmls = [];\n            this.eachRange(function(range) {\n                rangeHtmls.push( DomRange.toHtml(range) );\n            });\n            return rangeHtmls.join(\"\");\n        };\n\n        if (features.implementsTextRange) {\n            selProto.getNativeTextRange = function() {\n                var sel, textRange;\n                if ( (sel = this.docSelection) ) {\n                    var range = sel.createRange();\n                    if (isTextRange(range)) {\n                        return range;\n                    } else {\n                        throw module.createError(\"getNativeTextRange: selection is a control selection\");\n                    }\n                } else if (this.rangeCount > 0) {\n                    return api.WrappedTextRange.rangeToTextRange( this.getRangeAt(0) );\n                } else {\n                    throw module.createError(\"getNativeTextRange: selection contains no range\");\n                }\n            };\n        }\n\n        function inspect(sel) {\n            var rangeInspects = [];\n            var anchor = new DomPosition(sel.anchorNode, sel.anchorOffset);\n            var focus = new DomPosition(sel.focusNode, sel.focusOffset);\n            var name = (typeof sel.getName == \"function\") ? sel.getName() : \"Selection\";\n\n            if (typeof sel.rangeCount != \"undefined\") {\n                for (var i = 0, len = sel.rangeCount; i < len; ++i) {\n                    rangeInspects[i] = DomRange.inspect(sel.getRangeAt(i));\n                }\n            }\n            return \"[\" + name + \"(Ranges: \" + rangeInspects.join(\", \") +\n                    \")(anchor: \" + anchor.inspect() + \", focus: \" + focus.inspect() + \"]\";\n        }\n\n        selProto.getName = function() {\n            return \"WrappedSelection\";\n        };\n\n        selProto.inspect = function() {\n            return inspect(this);\n        };\n\n        selProto.detach = function() {\n            actOnCachedSelection(this.win, \"delete\");\n            deleteProperties(this);\n        };\n\n        WrappedSelection.detachAll = function() {\n            actOnCachedSelection(null, \"deleteAll\");\n        };\n\n        WrappedSelection.inspect = inspect;\n        WrappedSelection.isDirectionBackward = isDirectionBackward;\n\n        api.Selection = WrappedSelection;\n\n        api.selectionPrototype = selProto;\n\n        api.addShimListener(function(win) {\n            if (typeof win.getSelection == \"undefined\") {\n                win.getSelection = function() {\n                    return getSelection(win);\n                };\n            }\n            win = null;\n        });\n    });\n    \n\n    /*----------------------------------------------------------------------------------------------------------------*/\n\n    // Wait for document to load before initializing\n    var docReady = false;\n\n    var loadHandler = function(e) {\n        if (!docReady) {\n            docReady = true;\n            if (!api.initialized && api.config.autoInitialize) {\n                init();\n            }\n        }\n    };\n\n    if (isBrowser) {\n        // Test whether the document has already been loaded and initialize immediately if so\n        if (document.readyState == \"complete\") {\n            loadHandler();\n        } else {\n            if (isHostMethod(document, \"addEventListener\")) {\n                document.addEventListener(\"DOMContentLoaded\", loadHandler, false);\n            }\n\n            // Add a fallback in case the DOMContentLoaded event isn't supported\n            addListener(window, \"load\", loadHandler);\n        }\n    }\n\n    return api;\n}, this);","/**\n * Class Applier module for Rangy.\n * Adds, removes and toggles classes on Ranges and Selections\n *\n * Part of Rangy, a cross-browser JavaScript range and selection library\n * https://github.com/timdown/rangy\n *\n * Depends on Rangy core.\n *\n * Copyright 2024, Tim Down\n * Licensed under the MIT license.\n * Version: 1.3.2\n * Build date: 2 November 2024\n */\n(function(factory, root) {\n    if (typeof define == \"function\" && define.amd) {\n        // AMD. Register as an anonymous module with a dependency on Rangy.\n        define([\"./rangy-core\"], factory);\n    } else if (typeof module != \"undefined\" && typeof exports == \"object\") {\n        // Node/CommonJS style\n        module.exports = factory( require(\"rangy\") );\n    } else {\n        // No AMD or CommonJS support so we use the rangy property of root (probably the global variable)\n        factory(root.rangy);\n    }\n})(function(rangy) {\n    rangy.createModule(\"ClassApplier\", [\"WrappedSelection\"], function(api, module) {\n        var dom = api.dom;\n        var DomPosition = dom.DomPosition;\n        var contains = dom.arrayContains;\n        var util = api.util;\n        var forEach = util.forEach;\n\n\n        var defaultTagName = \"span\";\n        var createElementNSSupported = util.isHostMethod(document, \"createElementNS\");\n\n        function each(obj, func) {\n            for (var i in obj) {\n                if (obj.hasOwnProperty(i)) {\n                    if (func(i, obj[i]) === false) {\n                        return false;\n                    }\n                }\n            }\n            return true;\n        }\n\n        function trim(str) {\n            return str.replace(/^\\s\\s*/, \"\").replace(/\\s\\s*$/, \"\");\n        }\n\n        function classNameContainsClass(fullClassName, className) {\n            return !!fullClassName && new RegExp(\"(?:^|\\\\s)\" + className + \"(?:\\\\s|$)\").test(fullClassName);\n        }\n\n        // Inefficient, inelegant nonsense for IE's svg element, which has no classList and non-HTML className implementation\n        function hasClass(el, className) {\n            if (typeof el.classList == \"object\") {\n                return el.classList.contains(className);\n            } else {\n                var classNameSupported = (typeof el.className == \"string\");\n                var elClass = classNameSupported ? el.className : el.getAttribute(\"class\");\n                return classNameContainsClass(elClass, className);\n            }\n        }\n\n        function addClass(el, className) {\n            if (typeof el.classList == \"object\") {\n                el.classList.add(className);\n            } else {\n                var classNameSupported = (typeof el.className == \"string\");\n                var elClass = classNameSupported ? el.className : el.getAttribute(\"class\");\n                if (elClass) {\n                    if (!classNameContainsClass(elClass, className)) {\n                        elClass += \" \" + className;\n                    }\n                } else {\n                    elClass = className;\n                }\n                if (classNameSupported) {\n                    el.className = elClass;\n                } else {\n                    el.setAttribute(\"class\", elClass);\n                }\n            }\n        }\n\n        var removeClass = (function() {\n            function replacer(matched, whiteSpaceBefore, whiteSpaceAfter) {\n                return (whiteSpaceBefore && whiteSpaceAfter) ? \" \" : \"\";\n            }\n\n            return function(el, className) {\n                if (typeof el.classList == \"object\") {\n                    el.classList.remove(className);\n                } else {\n                    var classNameSupported = (typeof el.className == \"string\");\n                    var elClass = classNameSupported ? el.className : el.getAttribute(\"class\");\n                    elClass = elClass.replace(new RegExp(\"(^|\\\\s)\" + className + \"(\\\\s|$)\"), replacer);\n                    if (classNameSupported) {\n                        el.className = elClass;\n                    } else {\n                        el.setAttribute(\"class\", elClass);\n                    }\n                }\n            };\n        })();\n\n        function getClass(el) {\n            var classNameSupported = (typeof el.className == \"string\");\n            return classNameSupported ? el.className : el.getAttribute(\"class\");\n        }\n\n        function sortClassName(className) {\n            return className && className.split(/\\s+/).sort().join(\" \");\n        }\n\n        function getSortedClassName(el) {\n            return sortClassName( getClass(el) );\n        }\n\n        function haveSameClasses(el1, el2) {\n            return getSortedClassName(el1) == getSortedClassName(el2);\n        }\n\n        function hasAllClasses(el, className) {\n            var classes = className.split(/\\s+/);\n            for (var i = 0, len = classes.length; i < len; ++i) {\n                if (!hasClass(el, trim(classes[i]))) {\n                    return false;\n                }\n            }\n            return true;\n        }\n\n        function canTextBeStyled(textNode) {\n            var parent = textNode.parentNode;\n            return (parent && parent.nodeType == 1 && !/^(textarea|style|script|select|iframe)$/i.test(parent.nodeName));\n        }\n\n        function movePosition(position, oldParent, oldIndex, newParent, newIndex) {\n            var posNode = position.node, posOffset = position.offset;\n            var newNode = posNode, newOffset = posOffset;\n\n            if (posNode == newParent && posOffset > newIndex) {\n                ++newOffset;\n            }\n\n            if (posNode == oldParent && (posOffset == oldIndex  || posOffset == oldIndex + 1)) {\n                newNode = newParent;\n                newOffset += newIndex - oldIndex;\n            }\n\n            if (posNode == oldParent && posOffset > oldIndex + 1) {\n                --newOffset;\n            }\n\n            position.node = newNode;\n            position.offset = newOffset;\n        }\n\n        function movePositionWhenRemovingNode(position, parentNode, index) {\n            if (position.node == parentNode && position.offset > index) {\n                --position.offset;\n            }\n        }\n\n        function movePreservingPositions(node, newParent, newIndex, positionsToPreserve) {\n            // For convenience, allow newIndex to be -1 to mean \"insert at the end\".\n            if (newIndex == -1) {\n                newIndex = newParent.childNodes.length;\n            }\n\n            var oldParent = node.parentNode;\n            var oldIndex = dom.getNodeIndex(node);\n\n            forEach(positionsToPreserve, function(position) {\n                movePosition(position, oldParent, oldIndex, newParent, newIndex);\n            });\n\n            // Now actually move the node.\n            if (newParent.childNodes.length == newIndex) {\n                newParent.appendChild(node);\n            } else {\n                newParent.insertBefore(node, newParent.childNodes[newIndex]);\n            }\n        }\n\n        function removePreservingPositions(node, positionsToPreserve) {\n\n            var oldParent = node.parentNode;\n            var oldIndex = dom.getNodeIndex(node);\n\n            forEach(positionsToPreserve, function(position) {\n                movePositionWhenRemovingNode(position, oldParent, oldIndex);\n            });\n\n            dom.removeNode(node);\n        }\n\n        function moveChildrenPreservingPositions(node, newParent, newIndex, removeNode, positionsToPreserve) {\n            var child, children = [];\n            while ( (child = node.firstChild) ) {\n                movePreservingPositions(child, newParent, newIndex++, positionsToPreserve);\n                children.push(child);\n            }\n            if (removeNode) {\n                removePreservingPositions(node, positionsToPreserve);\n            }\n            return children;\n        }\n\n        function replaceWithOwnChildrenPreservingPositions(element, positionsToPreserve) {\n            return moveChildrenPreservingPositions(element, element.parentNode, dom.getNodeIndex(element), true, positionsToPreserve);\n        }\n\n        function rangeSelectsAnyText(range, textNode) {\n            var textNodeRange = range.cloneRange();\n            textNodeRange.selectNodeContents(textNode);\n\n            var intersectionRange = textNodeRange.intersection(range);\n            var text = intersectionRange ? intersectionRange.toString() : \"\";\n\n            return text != \"\";\n        }\n\n        function getEffectiveTextNodes(range) {\n            var nodes = range.getNodes([3]);\n\n            // Optimization as per issue 145\n\n            // Remove non-intersecting text nodes from the start of the range\n            var start = 0, node;\n            while ( (node = nodes[start]) && !rangeSelectsAnyText(range, node) ) {\n                ++start;\n            }\n\n            // Remove non-intersecting text nodes from the start of the range\n            var end = nodes.length - 1;\n            while ( (node = nodes[end]) && !rangeSelectsAnyText(range, node) ) {\n                --end;\n            }\n\n            return nodes.slice(start, end + 1);\n        }\n\n        function elementsHaveSameNonClassAttributes(el1, el2) {\n            if (el1.attributes.length != el2.attributes.length) return false;\n            for (var i = 0, len = el1.attributes.length, attr1, attr2, name; i < len; ++i) {\n                attr1 = el1.attributes[i];\n                name = attr1.name;\n                if (name != \"class\") {\n                    attr2 = el2.attributes.getNamedItem(name);\n                    if ( (attr1 === null) != (attr2 === null) ) return false;\n                    if (attr1.specified != attr2.specified) return false;\n                    if (attr1.specified && attr1.nodeValue !== attr2.nodeValue) return false;\n                }\n            }\n            return true;\n        }\n\n        function elementHasNonClassAttributes(el, exceptions) {\n            for (var i = 0, len = el.attributes.length, attrName; i < len; ++i) {\n                attrName = el.attributes[i].name;\n                if ( !(exceptions && contains(exceptions, attrName)) && el.attributes[i].specified && attrName != \"class\") {\n                    return true;\n                }\n            }\n            return false;\n        }\n\n        var getComputedStyleProperty = dom.getComputedStyleProperty;\n        var isEditableElement = (function() {\n            var testEl = document.createElement(\"div\");\n            return typeof testEl.isContentEditable == \"boolean\" ?\n                function (node) {\n                    return node && node.nodeType == 1 && node.isContentEditable;\n                } :\n                function (node) {\n                    if (!node || node.nodeType != 1 || node.contentEditable == \"false\") {\n                        return false;\n                    }\n                    return node.contentEditable == \"true\" || isEditableElement(node.parentNode);\n                };\n        })();\n\n        function isEditingHost(node) {\n            var parent;\n            return node && node.nodeType == 1 &&\n                (( (parent = node.parentNode) && parent.nodeType == 9 && parent.designMode == \"on\") ||\n                (isEditableElement(node) && !isEditableElement(node.parentNode)));\n        }\n\n        function isEditable(node) {\n            return (isEditableElement(node) || (node.nodeType != 1 && isEditableElement(node.parentNode))) && !isEditingHost(node);\n        }\n\n        var inlineDisplayRegex = /^inline(-block|-table)?$/i;\n\n        function isNonInlineElement(node) {\n            return node && node.nodeType == 1 && !inlineDisplayRegex.test(getComputedStyleProperty(node, \"display\"));\n        }\n\n        // White space characters as defined by HTML 4 (http://www.w3.org/TR/html401/struct/text.html)\n        var htmlNonWhiteSpaceRegex = /[^\\r\\n\\t\\f \\u200B]/;\n\n        function isUnrenderedWhiteSpaceNode(node) {\n            if (node.data.length == 0) {\n                return true;\n            }\n            if (htmlNonWhiteSpaceRegex.test(node.data)) {\n                return false;\n            }\n            var cssWhiteSpace = getComputedStyleProperty(node.parentNode, \"whiteSpace\");\n            switch (cssWhiteSpace) {\n                case \"pre\":\n                case \"pre-wrap\":\n                case \"-moz-pre-wrap\":\n                    return false;\n                case \"pre-line\":\n                    if (/[\\r\\n]/.test(node.data)) {\n                        return false;\n                    }\n            }\n\n            // We now have a whitespace-only text node that may be rendered depending on its context. If it is adjacent to a\n            // non-inline element, it will not be rendered. This seems to be a good enough definition.\n            return isNonInlineElement(node.previousSibling) || isNonInlineElement(node.nextSibling);\n        }\n\n        function getRangeBoundaries(ranges) {\n            var positions = [], i, range;\n            for (i = 0; range = ranges[i++]; ) {\n                positions.push(\n                    new DomPosition(range.startContainer, range.startOffset),\n                    new DomPosition(range.endContainer, range.endOffset)\n                );\n            }\n            return positions;\n        }\n\n        function updateRangesFromBoundaries(ranges, positions) {\n            for (var i = 0, range, start, end, len = ranges.length; i < len; ++i) {\n                range = ranges[i];\n                start = positions[i * 2];\n                end = positions[i * 2 + 1];\n                range.setStartAndEnd(start.node, start.offset, end.node, end.offset);\n            }\n        }\n\n        function isSplitPoint(node, offset) {\n            if (dom.isCharacterDataNode(node)) {\n                if (offset == 0) {\n                    return !!node.previousSibling;\n                } else if (offset == node.length) {\n                    return !!node.nextSibling;\n                } else {\n                    return true;\n                }\n            }\n\n            return offset > 0 && offset < node.childNodes.length;\n        }\n\n        function splitNodeAt(node, descendantNode, descendantOffset, positionsToPreserve) {\n            var newNode, parentNode;\n            var splitAtStart = (descendantOffset == 0);\n\n            if (dom.isAncestorOf(descendantNode, node)) {\n                return node;\n            }\n\n            if (dom.isCharacterDataNode(descendantNode)) {\n                var descendantIndex = dom.getNodeIndex(descendantNode);\n                if (descendantOffset == 0) {\n                    descendantOffset = descendantIndex;\n                } else if (descendantOffset == descendantNode.length) {\n                    descendantOffset = descendantIndex + 1;\n                } else {\n                    throw module.createError(\"splitNodeAt() should not be called with offset in the middle of a data node (\" +\n                        descendantOffset + \" in \" + descendantNode.data);\n                }\n                descendantNode = descendantNode.parentNode;\n            }\n\n            if (isSplitPoint(descendantNode, descendantOffset)) {\n                // descendantNode is now guaranteed not to be a text or other character node\n                newNode = descendantNode.cloneNode(false);\n                parentNode = descendantNode.parentNode;\n                if (newNode.id) {\n                    newNode.removeAttribute(\"id\");\n                }\n                var child, newChildIndex = 0;\n\n                while ( (child = descendantNode.childNodes[descendantOffset]) ) {\n                    movePreservingPositions(child, newNode, newChildIndex++, positionsToPreserve);\n                }\n                movePreservingPositions(newNode, parentNode, dom.getNodeIndex(descendantNode) + 1, positionsToPreserve);\n                return (descendantNode == node) ? newNode : splitNodeAt(node, parentNode, dom.getNodeIndex(newNode), positionsToPreserve);\n            } else if (node != descendantNode) {\n                newNode = descendantNode.parentNode;\n\n                // Work out a new split point in the parent node\n                var newNodeIndex = dom.getNodeIndex(descendantNode);\n\n                if (!splitAtStart) {\n                    newNodeIndex++;\n                }\n                return splitNodeAt(node, newNode, newNodeIndex, positionsToPreserve);\n            }\n            return node;\n        }\n\n        function areElementsMergeable(el1, el2) {\n            return el1.namespaceURI == el2.namespaceURI &&\n                el1.tagName.toLowerCase() == el2.tagName.toLowerCase() &&\n                haveSameClasses(el1, el2) &&\n                elementsHaveSameNonClassAttributes(el1, el2) &&\n                getComputedStyleProperty(el1, \"display\") == \"inline\" &&\n                getComputedStyleProperty(el2, \"display\") == \"inline\";\n        }\n\n        function createAdjacentMergeableTextNodeGetter(forward) {\n            var siblingPropName = forward ? \"nextSibling\" : \"previousSibling\";\n\n            return function(textNode, checkParentElement) {\n                var el = textNode.parentNode;\n                var adjacentNode = textNode[siblingPropName];\n                if (adjacentNode) {\n                    // Can merge if the node's previous/next sibling is a text node\n                    if (adjacentNode && adjacentNode.nodeType == 3) {\n                        return adjacentNode;\n                    }\n                } else if (checkParentElement) {\n                    // Compare text node parent element with its sibling\n                    adjacentNode = el[siblingPropName];\n                    if (adjacentNode && adjacentNode.nodeType == 1 && areElementsMergeable(el, adjacentNode)) {\n                        var adjacentNodeChild = adjacentNode[forward ? \"firstChild\" : \"lastChild\"];\n                        if (adjacentNodeChild && adjacentNodeChild.nodeType == 3) {\n                            return adjacentNodeChild;\n                        }\n                    }\n                }\n                return null;\n            };\n        }\n\n        var getPreviousMergeableTextNode = createAdjacentMergeableTextNodeGetter(false),\n            getNextMergeableTextNode = createAdjacentMergeableTextNodeGetter(true);\n\n    \n        function Merge(firstNode) {\n            this.isElementMerge = (firstNode.nodeType == 1);\n            this.textNodes = [];\n            var firstTextNode = this.isElementMerge ? firstNode.lastChild : firstNode;\n            if (firstTextNode) {\n                this.textNodes[0] = firstTextNode;\n            }\n        }\n\n        Merge.prototype = {\n            doMerge: function(positionsToPreserve) {\n                var textNodes = this.textNodes;\n                var firstTextNode = textNodes[0];\n                if (textNodes.length > 1) {\n                    var firstTextNodeIndex = dom.getNodeIndex(firstTextNode);\n                    var textParts = [], combinedTextLength = 0, textNode, parent;\n                    forEach(textNodes, function(textNode, i) {\n                        parent = textNode.parentNode;\n                        if (i > 0) {\n                            parent.removeChild(textNode);\n                            if (!parent.hasChildNodes()) {\n                                dom.removeNode(parent);\n                            }\n                            if (positionsToPreserve) {\n                                forEach(positionsToPreserve, function(position) {\n                                    // Handle case where position is inside the text node being merged into a preceding node\n                                    if (position.node == textNode) {\n                                        position.node = firstTextNode;\n                                        position.offset += combinedTextLength;\n                                    }\n                                    // Handle case where both text nodes precede the position within the same parent node\n                                    if (position.node == parent && position.offset > firstTextNodeIndex) {\n                                        --position.offset;\n                                        if (position.offset == firstTextNodeIndex + 1 && i < textNodes.length - 1) {\n                                            position.node = firstTextNode;\n                                            position.offset = combinedTextLength;\n                                        }\n                                    }\n                                });\n                            }\n                        }\n                        textParts[i] = textNode.data;\n                        combinedTextLength += textNode.data.length;\n                    });\n                    firstTextNode.data = textParts.join(\"\");\n                }\n                return firstTextNode.data;\n            },\n\n            getLength: function() {\n                var i = this.textNodes.length, len = 0;\n                while (i--) {\n                    len += this.textNodes[i].length;\n                }\n                return len;\n            },\n\n            toString: function() {\n                var textParts = [];\n                forEach(this.textNodes, function(textNode, i) {\n                    textParts[i] = \"'\" + textNode.data + \"'\";\n                });\n                return \"[Merge(\" + textParts.join(\",\") + \")]\";\n            }\n        };\n\n        var optionProperties = [\"elementTagName\", \"ignoreWhiteSpace\", \"applyToEditableOnly\", \"useExistingElements\",\n            \"removeEmptyElements\", \"onElementCreate\"];\n\n        // TODO: Populate this with every attribute name that corresponds to a property with a different name. Really??\n        var attrNamesForProperties = {};\n\n        function ClassApplier(className, options, tagNames) {\n            var normalize, i, len, propName, applier = this;\n            applier.cssClass = applier.className = className; // cssClass property is for backward compatibility\n\n            var elementPropertiesFromOptions = null, elementAttributes = {};\n\n            // Initialize from options object\n            if (typeof options == \"object\" && options !== null) {\n                if (typeof options.elementTagName !== \"undefined\") {\n                    options.elementTagName = options.elementTagName.toLowerCase();\n                }\n                tagNames = options.tagNames;\n                elementPropertiesFromOptions = options.elementProperties;\n                elementAttributes = options.elementAttributes;\n\n                for (i = 0; propName = optionProperties[i++]; ) {\n                    if (options.hasOwnProperty(propName)) {\n                        applier[propName] = options[propName];\n                    }\n                }\n                normalize = options.normalize;\n            } else {\n                normalize = options;\n            }\n\n            // Backward compatibility: the second parameter can also be a Boolean indicating to normalize after unapplying\n            applier.normalize = (typeof normalize == \"undefined\") ? true : normalize;\n\n            // Initialize element properties and attribute exceptions\n            applier.attrExceptions = [];\n            var el = document.createElement(applier.elementTagName);\n            applier.elementProperties = applier.copyPropertiesToElement(elementPropertiesFromOptions, el, true);\n            each(elementAttributes, function(attrName, attrValue) {\n                applier.attrExceptions.push(attrName);\n                // Ensure each attribute value is a string\n                elementAttributes[attrName] = \"\" + attrValue;\n            });\n            applier.elementAttributes = elementAttributes;\n\n            applier.elementSortedClassName = applier.elementProperties.hasOwnProperty(\"className\") ?\n                sortClassName(applier.elementProperties.className + \" \" + className) : className;\n\n            // Initialize tag names\n            applier.applyToAnyTagName = false;\n            var type = typeof tagNames;\n            if (type == \"string\") {\n                if (tagNames == \"*\") {\n                    applier.applyToAnyTagName = true;\n                } else {\n                    applier.tagNames = trim(tagNames.toLowerCase()).split(/\\s*,\\s*/);\n                }\n            } else if (type == \"object\" && typeof tagNames.length == \"number\") {\n                applier.tagNames = [];\n                for (i = 0, len = tagNames.length; i < len; ++i) {\n                    if (tagNames[i] == \"*\") {\n                        applier.applyToAnyTagName = true;\n                    } else {\n                        applier.tagNames.push(tagNames[i].toLowerCase());\n                    }\n                }\n            } else {\n                applier.tagNames = [applier.elementTagName];\n            }\n        }\n\n        ClassApplier.prototype = {\n            elementTagName: defaultTagName,\n            elementProperties: {},\n            elementAttributes: {},\n            ignoreWhiteSpace: true,\n            applyToEditableOnly: false,\n            useExistingElements: true,\n            removeEmptyElements: true,\n            onElementCreate: null,\n\n            copyPropertiesToElement: function(props, el, createCopy) {\n                var s, elStyle, elProps = {}, elPropsStyle, propValue, elPropValue, attrName;\n\n                for (var p in props) {\n                    if (props.hasOwnProperty(p)) {\n                        propValue = props[p];\n                        elPropValue = el[p];\n\n                        // Special case for class. The copied properties object has the applier's class as well as its own\n                        // to simplify checks when removing styling elements\n                        if (p == \"className\") {\n                            addClass(el, propValue);\n                            addClass(el, this.className);\n                            el[p] = sortClassName(el[p]);\n                            if (createCopy) {\n                                elProps[p] = propValue;\n                            }\n                        }\n\n                        // Special case for style\n                        else if (p == \"style\") {\n                            elStyle = elPropValue;\n                            if (createCopy) {\n                                elProps[p] = elPropsStyle = {};\n                            }\n                            for (s in props[p]) {\n                                if (props[p].hasOwnProperty(s)) {\n                                    elStyle[s] = propValue[s];\n                                    if (createCopy) {\n                                        elPropsStyle[s] = elStyle[s];\n                                    }\n                                }\n                            }\n                            this.attrExceptions.push(p);\n                        } else {\n                            el[p] = propValue;\n                            // Copy the property back from the dummy element so that later comparisons to check whether\n                            // elements may be removed are checking against the right value. For example, the href property\n                            // of an element returns a fully qualified URL even if it was previously assigned a relative\n                            // URL.\n                            if (createCopy) {\n                                elProps[p] = el[p];\n\n                                // Not all properties map to identically-named attributes\n                                attrName = attrNamesForProperties.hasOwnProperty(p) ? attrNamesForProperties[p] : p;\n                                this.attrExceptions.push(attrName);\n                            }\n                        }\n                    }\n                }\n\n                return createCopy ? elProps : \"\";\n            },\n\n            copyAttributesToElement: function(attrs, el) {\n                for (var attrName in attrs) {\n                    if (attrs.hasOwnProperty(attrName) && !/^class(?:Name)?$/i.test(attrName)) {\n                        el.setAttribute(attrName, attrs[attrName]);\n                    }\n                }\n            },\n\n            appliesToElement: function(el) {\n                return contains(this.tagNames, el.tagName.toLowerCase());\n            },\n\n            getEmptyElements: function(range) {\n                var applier = this;\n                return range.getNodes([1], function(el) {\n                    return applier.appliesToElement(el) && !el.hasChildNodes();\n                });\n            },\n\n            hasClass: function(node) {\n                return node.nodeType == 1 &&\n                    (this.applyToAnyTagName || this.appliesToElement(node)) &&\n                    hasClass(node, this.className);\n            },\n\n            getSelfOrAncestorWithClass: function(node) {\n                while (node) {\n                    if (this.hasClass(node)) {\n                        return node;\n                    }\n                    node = node.parentNode;\n                }\n                return null;\n            },\n\n            isModifiable: function(node) {\n                return !this.applyToEditableOnly || isEditable(node);\n            },\n\n            // White space adjacent to an unwrappable node can be ignored for wrapping\n            isIgnorableWhiteSpaceNode: function(node) {\n                return this.ignoreWhiteSpace && node && node.nodeType == 3 && isUnrenderedWhiteSpaceNode(node);\n            },\n\n            // Normalizes nodes after applying a class to a Range.\n            postApply: function(textNodes, range, positionsToPreserve, isUndo) {\n                var firstNode = textNodes[0], lastNode = textNodes[textNodes.length - 1];\n                var merges = [], currentMerge;\n                var rangeStartNode = firstNode, rangeEndNode = lastNode;\n                var rangeStartOffset = 0, rangeEndOffset = lastNode.length;\n                var precedingTextNode;\n\n                // Check for every required merge and create a Merge object for each\n                forEach(textNodes, function(textNode) {\n                    precedingTextNode = getPreviousMergeableTextNode(textNode, !isUndo);\n                    if (precedingTextNode) {\n                        if (!currentMerge) {\n                            currentMerge = new Merge(precedingTextNode);\n                            merges.push(currentMerge);\n                        }\n                        currentMerge.textNodes.push(textNode);\n                        if (textNode === firstNode) {\n                            rangeStartNode = currentMerge.textNodes[0];\n                            rangeStartOffset = rangeStartNode.length;\n                        }\n                        if (textNode === lastNode) {\n                            rangeEndNode = currentMerge.textNodes[0];\n                            rangeEndOffset = currentMerge.getLength();\n                        }\n                    } else {\n                        currentMerge = null;\n                    }\n                });\n\n                // Test whether the first node after the range needs merging\n                var nextTextNode = getNextMergeableTextNode(lastNode, !isUndo);\n\n                if (nextTextNode) {\n                    if (!currentMerge) {\n                        currentMerge = new Merge(lastNode);\n                        merges.push(currentMerge);\n                    }\n                    currentMerge.textNodes.push(nextTextNode);\n                }\n\n                // Apply the merges\n                if (merges.length) {\n                    for (var i = 0, len = merges.length; i < len; ++i) {\n                        merges[i].doMerge(positionsToPreserve);\n                    }\n\n                    // Set the range boundaries\n                    range.setStartAndEnd(rangeStartNode, rangeStartOffset, rangeEndNode, rangeEndOffset);\n                }\n            },\n\n            createContainer: function(parentNode) {\n                var doc = dom.getDocument(parentNode);\n                var namespace;\n                var el = createElementNSSupported && !dom.isHtmlNamespace(parentNode) && (namespace = parentNode.namespaceURI) ?\n                    doc.createElementNS(parentNode.namespaceURI, this.elementTagName) :\n                    doc.createElement(this.elementTagName);\n\n                this.copyPropertiesToElement(this.elementProperties, el, false);\n                this.copyAttributesToElement(this.elementAttributes, el);\n                addClass(el, this.className);\n                if (this.onElementCreate) {\n                    this.onElementCreate(el, this);\n                }\n                return el;\n            },\n\n            elementHasProperties: function(el, props) {\n                var applier = this;\n                return each(props, function(p, propValue) {\n                    if (p == \"className\") {\n                        // For checking whether we should reuse an existing element, we just want to check that the element\n                        // has all the classes specified in the className property. When deciding whether the element is\n                        // removable when unapplying a class, there is separate special handling to check whether the\n                        // element has extra classes so the same simple check will do.\n                        return hasAllClasses(el, propValue);\n                    } else if (typeof propValue == \"object\") {\n                        if (!applier.elementHasProperties(el[p], propValue)) {\n                            return false;\n                        }\n                    } else if (el[p] !== propValue) {\n                        return false;\n                    }\n                });\n            },\n\n            elementHasAttributes: function(el, attrs) {\n                return each(attrs, function(name, value) {\n                    if (el.getAttribute(name) !== value) {\n                        return false;\n                    }\n                });\n            },\n\n            applyToTextNode: function(textNode, positionsToPreserve) {\n\n                // Check whether the text node can be styled. Text within a <style> or <script> element, for example,\n                // should not be styled. See issue 283.\n                if (canTextBeStyled(textNode)) {\n                    var parent = textNode.parentNode;\n                    if (parent.childNodes.length == 1 &&\n                        this.useExistingElements &&\n                        this.appliesToElement(parent) &&\n                        this.elementHasProperties(parent, this.elementProperties) &&\n                        this.elementHasAttributes(parent, this.elementAttributes)) {\n\n                        addClass(parent, this.className);\n                    } else {\n                        var textNodeParent = textNode.parentNode;\n                        var el = this.createContainer(textNodeParent);\n                        textNodeParent.insertBefore(el, textNode);\n                        el.appendChild(textNode);\n                    }\n                }\n\n            },\n\n            isRemovable: function(el) {\n                return el.tagName.toLowerCase() == this.elementTagName &&\n                    getSortedClassName(el) == this.elementSortedClassName &&\n                    this.elementHasProperties(el, this.elementProperties) &&\n                    !elementHasNonClassAttributes(el, this.attrExceptions) &&\n                    this.elementHasAttributes(el, this.elementAttributes) &&\n                    this.isModifiable(el);\n            },\n\n            isEmptyContainer: function(el) {\n                var childNodeCount = el.childNodes.length;\n                return el.nodeType == 1 &&\n                    this.isRemovable(el) &&\n                    (childNodeCount == 0 || (childNodeCount == 1 && this.isEmptyContainer(el.firstChild)));\n            },\n\n            removeEmptyContainers: function(range) {\n                var applier = this;\n                var nodesToRemove = range.getNodes([1], function(el) {\n                    return applier.isEmptyContainer(el);\n                });\n\n                var rangesToPreserve = [range];\n                var positionsToPreserve = getRangeBoundaries(rangesToPreserve);\n\n                forEach(nodesToRemove, function(node) {\n                    removePreservingPositions(node, positionsToPreserve);\n                });\n\n                // Update the range from the preserved boundary positions\n                updateRangesFromBoundaries(rangesToPreserve, positionsToPreserve);\n            },\n\n            undoToTextNode: function(textNode, range, ancestorWithClass, positionsToPreserve) {\n                if (!range.containsNode(ancestorWithClass)) {\n                    // Split out the portion of the ancestor from which we can remove the class\n                    //var parent = ancestorWithClass.parentNode, index = dom.getNodeIndex(ancestorWithClass);\n                    var ancestorRange = range.cloneRange();\n                    ancestorRange.selectNode(ancestorWithClass);\n                    if (ancestorRange.isPointInRange(range.endContainer, range.endOffset)) {\n                        splitNodeAt(ancestorWithClass, range.endContainer, range.endOffset, positionsToPreserve);\n                        range.setEndAfter(ancestorWithClass);\n                    }\n                    if (ancestorRange.isPointInRange(range.startContainer, range.startOffset)) {\n                        ancestorWithClass = splitNodeAt(ancestorWithClass, range.startContainer, range.startOffset, positionsToPreserve);\n                    }\n                }\n\n                if (this.isRemovable(ancestorWithClass)) {\n                    replaceWithOwnChildrenPreservingPositions(ancestorWithClass, positionsToPreserve);\n                } else {\n                    removeClass(ancestorWithClass, this.className);\n                }\n            },\n\n            splitAncestorWithClass: function(container, offset, positionsToPreserve) {\n                var ancestorWithClass = this.getSelfOrAncestorWithClass(container);\n                if (ancestorWithClass) {\n                    splitNodeAt(ancestorWithClass, container, offset, positionsToPreserve);\n                }\n            },\n\n            undoToAncestor: function(ancestorWithClass, positionsToPreserve) {\n                if (this.isRemovable(ancestorWithClass)) {\n                    replaceWithOwnChildrenPreservingPositions(ancestorWithClass, positionsToPreserve);\n                } else {\n                    removeClass(ancestorWithClass, this.className);\n                }\n            },\n\n            applyToRange: function(range, rangesToPreserve) {\n                var applier = this;\n                rangesToPreserve = rangesToPreserve || [];\n\n                // Create an array of range boundaries to preserve\n                var positionsToPreserve = getRangeBoundaries(rangesToPreserve || []);\n\n                range.splitBoundariesPreservingPositions(positionsToPreserve);\n\n                // Tidy up the DOM by removing empty containers\n                if (applier.removeEmptyElements) {\n                    applier.removeEmptyContainers(range);\n                }\n\n                var textNodes = getEffectiveTextNodes(range);\n\n                if (textNodes.length) {\n                    forEach(textNodes, function(textNode) {\n                        if (!applier.isIgnorableWhiteSpaceNode(textNode) && !applier.getSelfOrAncestorWithClass(textNode) &&\n                                applier.isModifiable(textNode)) {\n                            applier.applyToTextNode(textNode, positionsToPreserve);\n                        }\n                    });\n                    var lastTextNode = textNodes[textNodes.length - 1];\n                    range.setStartAndEnd(textNodes[0], 0, lastTextNode, lastTextNode.length);\n                    if (applier.normalize) {\n                        applier.postApply(textNodes, range, positionsToPreserve, false);\n                    }\n\n                    // Update the ranges from the preserved boundary positions\n                    updateRangesFromBoundaries(rangesToPreserve, positionsToPreserve);\n                }\n\n                // Apply classes to any appropriate empty elements\n                var emptyElements = applier.getEmptyElements(range);\n\n                forEach(emptyElements, function(el) {\n                    addClass(el, applier.className);\n                });\n            },\n\n            applyToRanges: function(ranges) {\n\n                var i = ranges.length;\n                while (i--) {\n                    this.applyToRange(ranges[i], ranges);\n                }\n\n\n                return ranges;\n            },\n\n            applyToSelection: function(win) {\n                var sel = api.getSelection(win);\n                sel.setRanges( this.applyToRanges(sel.getAllRanges()) );\n            },\n\n            undoToRange: function(range, rangesToPreserve) {\n                var applier = this;\n                // Create an array of range boundaries to preserve\n                rangesToPreserve = rangesToPreserve || [];\n                var positionsToPreserve = getRangeBoundaries(rangesToPreserve);\n\n\n                range.splitBoundariesPreservingPositions(positionsToPreserve);\n\n                // Tidy up the DOM by removing empty containers\n                if (applier.removeEmptyElements) {\n                    applier.removeEmptyContainers(range, positionsToPreserve);\n                }\n\n                var textNodes = getEffectiveTextNodes(range);\n                var textNode, ancestorWithClass;\n                var lastTextNode = textNodes[textNodes.length - 1];\n\n                if (textNodes.length) {\n                    applier.splitAncestorWithClass(range.endContainer, range.endOffset, positionsToPreserve);\n                    applier.splitAncestorWithClass(range.startContainer, range.startOffset, positionsToPreserve);\n                    for (var i = 0, len = textNodes.length; i < len; ++i) {\n                        textNode = textNodes[i];\n                        ancestorWithClass = applier.getSelfOrAncestorWithClass(textNode);\n                        if (ancestorWithClass && applier.isModifiable(textNode)) {\n                            applier.undoToAncestor(ancestorWithClass, positionsToPreserve);\n                        }\n                    }\n                    // Ensure the range is still valid\n                    range.setStartAndEnd(textNodes[0], 0, lastTextNode, lastTextNode.length);\n\n\n                    if (applier.normalize) {\n                        applier.postApply(textNodes, range, positionsToPreserve, true);\n                    }\n\n                    // Update the ranges from the preserved boundary positions\n                    updateRangesFromBoundaries(rangesToPreserve, positionsToPreserve);\n                }\n\n                // Remove class from any appropriate empty elements\n                var emptyElements = applier.getEmptyElements(range);\n\n                forEach(emptyElements, function(el) {\n                    removeClass(el, applier.className);\n                });\n            },\n\n            undoToRanges: function(ranges) {\n                // Get ranges returned in document order\n                var i = ranges.length;\n\n                while (i--) {\n                    this.undoToRange(ranges[i], ranges);\n                }\n\n                return ranges;\n            },\n\n            undoToSelection: function(win) {\n                var sel = api.getSelection(win);\n                var ranges = api.getSelection(win).getAllRanges();\n                this.undoToRanges(ranges);\n                sel.setRanges(ranges);\n            },\n\n            isAppliedToRange: function(range) {\n                if (range.collapsed || range.toString() == \"\") {\n                    return !!this.getSelfOrAncestorWithClass(range.commonAncestorContainer);\n                } else {\n                    var textNodes = range.getNodes( [3] );\n                    if (textNodes.length)\n                    for (var i = 0, textNode; textNode = textNodes[i++]; ) {\n                        if (!this.isIgnorableWhiteSpaceNode(textNode) && rangeSelectsAnyText(range, textNode) &&\n                                this.isModifiable(textNode) && !this.getSelfOrAncestorWithClass(textNode)) {\n                            return false;\n                        }\n                    }\n                    return true;\n                }\n            },\n\n            isAppliedToRanges: function(ranges) {\n                var i = ranges.length;\n                if (i == 0) {\n                    return false;\n                }\n                while (i--) {\n                    if (!this.isAppliedToRange(ranges[i])) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n\n            isAppliedToSelection: function(win) {\n                var sel = api.getSelection(win);\n                return this.isAppliedToRanges(sel.getAllRanges());\n            },\n\n            toggleRange: function(range) {\n                if (this.isAppliedToRange(range)) {\n                    this.undoToRange(range);\n                } else {\n                    this.applyToRange(range);\n                }\n            },\n\n            toggleSelection: function(win) {\n                if (this.isAppliedToSelection(win)) {\n                    this.undoToSelection(win);\n                } else {\n                    this.applyToSelection(win);\n                }\n            },\n\n            getElementsWithClassIntersectingRange: function(range) {\n                var elements = [];\n                var applier = this;\n                range.getNodes([3], function(textNode) {\n                    var el = applier.getSelfOrAncestorWithClass(textNode);\n                    if (el && !contains(elements, el)) {\n                        elements.push(el);\n                    }\n                });\n                return elements;\n            },\n\n            detach: function() {}\n        };\n\n        function createClassApplier(className, options, tagNames) {\n            return new ClassApplier(className, options, tagNames);\n        }\n\n        ClassApplier.util = {\n            hasClass: hasClass,\n            addClass: addClass,\n            removeClass: removeClass,\n            getClass: getClass,\n            hasSameClasses: haveSameClasses,\n            hasAllClasses: hasAllClasses,\n            replaceWithOwnChildren: replaceWithOwnChildrenPreservingPositions,\n            elementsHaveSameNonClassAttributes: elementsHaveSameNonClassAttributes,\n            elementHasNonClassAttributes: elementHasNonClassAttributes,\n            splitNodeAt: splitNodeAt,\n            isEditableElement: isEditableElement,\n            isEditingHost: isEditingHost,\n            isEditable: isEditable\n        };\n\n        api.CssClassApplier = api.ClassApplier = ClassApplier;\n        api.createClassApplier = createClassApplier;\n        util.createAliasForDeprecatedMethod(api, \"createCssClassApplier\", \"createClassApplier\", module);\n    });\n    \n    return rangy;\n}, this);\n","import MediumEditor from 'medium-editor';\nimport Picker from 'vanilla-picker';\nimport rangy from 'rangy';\nimport 'rangy/lib/rangy-classapplier';\nexport var defaultOptions = {\n    toolbar: {\n        allowMultiParagraphSelection: true,\n        buttons: [\n            'bold',\n            'colorpicker',\n            'italic',\n            'underline',\n            'strikethrough',\n            'quote',\n            'justifyLeft',\n            'justifyCenter',\n            'justifyRight',\n            'justifyFull',\n            'superscript',\n            'subscript',\n            'orderedlist',\n            'unorderedlist',\n            'pre',\n            'removeFormat',\n            'outdent',\n            'indent',\n            'h2',\n            'h3',\n        ],\n        standardizeSelectionStart: false,\n        updateOnEmptySelection: false,\n    },\n    placeholder: {\n        text: '',\n        hideOnClick: true,\n    },\n    disableEditing: true,\n};\nexport var ColorPickerButton = MediumEditor.extensions.button.extend({\n    name: 'colorpicker',\n    tagNames: ['mark'],\n    contentDefault: '<b>Color</b>',\n    aria: 'Color Picker',\n    action: 'colorPicker',\n    init: function () {\n        var _this = this;\n        rangy.init();\n        MediumEditor.extensions.button.prototype.init.call(this);\n        this.colorPicker = new Picker({\n            parent: this.button,\n            color: '#000',\n            onDone: function (res) {\n                if (_this.coloredText && _this.coloredText.isAppliedToSelection()) {\n                    _this.coloredText.undoToSelection();\n                }\n                _this.coloredText = rangy.createClassApplier('colored', {\n                    elementTagName: 'span',\n                    elementProperties: {\n                        style: {\n                            color: res.hex,\n                        },\n                    },\n                    normalize: true,\n                });\n                _this.coloredText.toggleSelection();\n                _this.base.checkContentChanged();\n                _this.setInactive();\n            },\n        });\n    },\n    getButton: function () {\n        return this.button;\n    },\n    handleClick: function () {\n        this.setActive();\n        this.colorPicker.show();\n    },\n    isAlreadyApplied: function (node) {\n        return node.nodeName.toLowerCase() === 'mark';\n    },\n    isActive: function () {\n        return this.button.classList.contains('medium-editor-button-active');\n    },\n    setInactive: function () {\n        this.button.classList.remove('medium-editor-button-active');\n    },\n    setActive: function () {\n        this.button.classList.add('medium-editor-button-active');\n    },\n});\nexport { MediumEditor };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { jsx as _jsx } from \"preact/jsx-runtime\";\nimport { Component, observer } from '@logicflow/core';\nimport { forEach, merge } from 'lodash-es';\nimport Label from './Label';\nimport LabelModel from './LabelModel';\nimport { MediumEditor, defaultOptions, ColorPickerButton } from './mediumEditor';\n// const { createUuid } = LogicFlowUtil\n// DONE:  LabelOverlay  Observer Label  LabelOverlay \n//   ->  label  element model ->  LabelOverlay\n//  \n//  LabelOverlay\n// \nvar LabelOverlay = /** @class */ (function (_super) {\n    __extends(LabelOverlay, _super);\n    function LabelOverlay(props) {\n        var _this = _super.call(this, props) || this;\n        _this.labelMap = new Map();\n        var lf = props.lf, graphModel = props.graphModel;\n        _this.lf = lf;\n        _this.graphModel = graphModel;\n        _this.state = { tick: 0 };\n        return _this;\n    }\n    LabelOverlay.prototype.componentDidMount = function () {\n        var _this = this;\n        var graphModel = this.props.graphModel;\n        // 1.  RichTextEdit \n        this.editor = new MediumEditor('.lf-label-editor', merge(defaultOptions, {\n            autoLink: true,\n            extensions: {\n                colorPicker: new ColorPickerButton(),\n            },\n        }));\n        // TODO: 2.  nodeedge \n        // TODO: 3.  Label \n        //  @observer graphModel \n        graphModel.eventCenter.on('text:update,node:mousemove,node:resize,node:rotate,node:drag,label:drop,node:drop', function () {\n            // this.setState({ tick: this.state.tick + 1 })\n        });\n        graphModel.eventCenter.on('node:properties-change,node:properties-delete', function () {\n            _this.setState({ tick: _this.state.tick + 1 });\n        });\n    };\n    LabelOverlay.prototype.componentDidUpdate = function () {\n        var _a;\n        //  label \n        if (this.editor && this.editor.elements.length > 0) {\n            this.editor.addElements('.lf-label-editor');\n        }\n        else {\n            // FIX:  properties._label\n            (_a = this.editor) === null || _a === void 0 ? void 0 : _a.destroy();\n            this.editor = new MediumEditor('.lf-label-editor', merge(defaultOptions, {\n                autoLink: true,\n                extensions: {\n                    colorPicker: new ColorPickerButton(),\n                },\n            }));\n        }\n    };\n    LabelOverlay.prototype.componentWillUnmount = function () {\n        var _a;\n        // \n        (_a = this.editor) === null || _a === void 0 ? void 0 : _a.destroy();\n    };\n    /**\n     *  label\n     * 1.  text  label \n     * 2. text  label\n     */\n    LabelOverlay.prototype.getLabels = function () {\n        var _this = this;\n        // 1.  graphModel  label \n        var _a = this.props, extension = _a.lf.extension, graphModel = _a.graphModel;\n        var elements = __spreadArray(__spreadArray([], __read(graphModel.nodes), false), __read(graphModel.edges), false);\n        var curExtension = extension['label'];\n        if (curExtension) {\n            var labels_1 = []; //  Label \n            // TODO: textMode  TextMode.LABEL ( textMode )\n            // REMIND:  textMode \n            forEach(elements, function (element) {\n                var _a, _b;\n                var elementData = element.getData();\n                var labelConfig = (_b = (_a = elementData.properties) === null || _a === void 0 ? void 0 : _a._label) !== null && _b !== void 0 ? _b : [];\n                forEach(labelConfig, function (config) {\n                    var labelMap = _this.labelMap;\n                    //  labelModel \n                    // let label: LabelModel\n                    // if (config.id && labelMap.has(config.id)) {\n                    //   label = labelMap.get(config.id)!\n                    // } else {\n                    //   label = new LabelModel(config, element, graphModel)\n                    //   labelMap.set(label.id, label)\n                    // }\n                    var label = new LabelModel(config, element, graphModel);\n                    labelMap.set(label.id, label);\n                    labels_1.push(_jsx(Label, { label: label, element: element, graphModel: graphModel }, label.id));\n                });\n            });\n            return labels_1;\n        }\n        return null;\n    };\n    LabelOverlay.prototype.render = function () {\n        return (_jsx(\"foreignObject\", { id: \"lf-label-overlay\", class: \"lf-label-overlay\", children: this.getLabels() }));\n    };\n    LabelOverlay.toolName = 'label-edit-tool';\n    LabelOverlay = __decorate([\n        observer\n    ], LabelOverlay);\n    return LabelOverlay;\n}(Component));\nexport { LabelOverlay };\nexport default LabelOverlay;\n","var DndPanel = /** @class */ (function () {\n    function DndPanel(_a) {\n        var lf = _a.lf;\n        var _this = this;\n        this.lf = lf;\n        this.lf.setPatternItems = function (shapeList) {\n            _this.setPatternItems(shapeList);\n        };\n    }\n    DndPanel.prototype.render = function (_lf, domContainer) {\n        var _this = this;\n        this.destroy();\n        if (!this.shapeList || this.shapeList.length === 0) {\n            // rendersetPatternItems\n            this.domContainer = domContainer;\n            return;\n        }\n        this.panelEl = document.createElement('div');\n        this.panelEl.className = 'lf-dndpanel';\n        this.panelEl.addEventListener('touchmove', function (e) {\n            e.preventDefault();\n        }, { passive: false });\n        this.shapeList.forEach(function (shapeItem) {\n            var _a;\n            (_a = _this.panelEl) === null || _a === void 0 ? void 0 : _a.appendChild(_this.createDndItem(shapeItem));\n        });\n        domContainer.appendChild(this.panelEl);\n        this.domContainer = domContainer;\n    };\n    DndPanel.prototype.destroy = function () {\n        if (this.domContainer &&\n            this.panelEl &&\n            this.domContainer.contains(this.panelEl)) {\n            this.domContainer.removeChild(this.panelEl);\n        }\n    };\n    DndPanel.prototype.setPatternItems = function (shapeList) {\n        this.shapeList = shapeList;\n        // \n        if (this.domContainer) {\n            this.render(this.lf, this.domContainer);\n        }\n    };\n    DndPanel.prototype.createDndItem = function (shapeItem) {\n        var _this = this;\n        var el = document.createElement('div');\n        el.className = shapeItem.className\n            ? \"lf-dnd-item \".concat(shapeItem.className)\n            : 'lf-dnd-item';\n        var shape = document.createElement('div');\n        shape.className = 'lf-dnd-shape';\n        // if (typeof shapeItem.icon === 'string') {\n        if (shapeItem.icon) {\n            shape.style.backgroundImage = \"url(\".concat(shapeItem.icon, \")\");\n            // shape.style.backgroundSize = 'contain'\n            // } else {\n            //   shape.appendChild(shapeItem.icon);\n        }\n        el.appendChild(shape);\n        if (shapeItem.label) {\n            var text = document.createElement('div');\n            text.innerText = shapeItem.label;\n            text.className = 'lf-dnd-text';\n            el.appendChild(text);\n        }\n        if (shapeItem.disabled) {\n            el.classList.add('disabled');\n            // callbackshapeItem\n            el.onpointerdown = function () {\n                if (shapeItem.callback) {\n                    shapeItem.callback(_this.lf, _this.domContainer);\n                }\n            };\n            return el;\n        }\n        el.onpointerdown = function (e) {\n            if (shapeItem.type) {\n                _this.lf.dnd.startDrag({\n                    type: shapeItem.type,\n                    properties: shapeItem.properties,\n                    text: shapeItem.text,\n                });\n            }\n            if (shapeItem.callback) {\n                shapeItem.callback(_this.lf, _this.domContainer);\n            }\n            e.preventDefault();\n        };\n        el.ondblclick = function (e) {\n            _this.lf.graphModel.eventCenter.emit('dnd:panel-dbclick', {\n                e: e,\n                data: shapeItem,\n            });\n        };\n        el.onclick = function (e) {\n            _this.lf.graphModel.eventCenter.emit('dnd:panel-click', {\n                e: e,\n                data: shapeItem,\n            });\n        };\n        el.oncontextmenu = function (e) {\n            _this.lf.graphModel.eventCenter.emit('dnd:panel-contextmenu', {\n                e: e,\n                data: shapeItem,\n            });\n        };\n        return el;\n    };\n    DndPanel.pluginName = 'dndPanel';\n    return DndPanel;\n}());\nexport { DndPanel };\nexport default DndPanel;\n","var __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar MiniMap = /** @class */ (function () {\n    function MiniMap(_a) {\n        var lf = _a.lf, LogicFlow = _a.LogicFlow, options = _a.options;\n        var _this = this;\n        /**\n         * \n         */\n        this.width = 200;\n        /**\n         * \n         */\n        this.height = 150;\n        /**\n         * \n         */\n        this.scale = 1;\n        /**\n         * \n         */\n        this.translateX = 0;\n        /**\n         * \n         */\n        this.translateY = 0;\n        /**\n         * \n         */\n        this.showEdge = false;\n        /**\n         * y\n         */\n        this.viewPortTop = 0;\n        /**\n         * x\n         */\n        this.viewPortLeft = 0;\n        // \n        this.viewPortWidth = 150;\n        this.viewPortHeight = 75;\n        /**\n         * \n         */\n        this.isShow = false;\n        /**\n         * \n         */\n        this.isShowHeader = false;\n        /**\n         * \n         */\n        this.isShowCloseIcon = false;\n        /**\n         * \n         */\n        this.headerTitle = '';\n        /**\n         * logicFlow\n         */\n        this.disabledPlugins = ['miniMap', 'control', 'selectionSelect'];\n        this.onGraphResize = function () {\n            _this.updateViewPortBounds();\n            if (_this.isShow) {\n                _this.updateViewPort();\n            }\n        };\n        this.render = function (_, container) {\n            _this.container = container;\n            _this.lf.on('history:change', function () {\n                if (_this.isShow) {\n                    _this.setView();\n                }\n            });\n            _this.lf.on('graph:transform', function () {\n                if (_this.isShow) {\n                    _this.setView(false);\n                }\n            });\n        };\n        /**\n         * \n         * @param left \n         * @param top \n         */\n        this.show = function (left, top) {\n            if (!_this.isShow) {\n                _this.initMiniMap();\n                _this.lf.on('graph:resize', _this.onGraphResize);\n                _this.createMiniMap(left, top);\n                _this.setView(true);\n            }\n            _this.isShow = true;\n        };\n        /**\n         * \n         */\n        this.hide = function () {\n            if (_this.isShow) {\n                _this.lf.off('graph:resize', _this.onGraphResize);\n                _this.lfMap.destroy();\n                // \n                _this.translateX = 0;\n                _this.translateY = 0;\n                _this.removeMiniMap();\n                _this.lf.emit('miniMap:close', {});\n            }\n            _this.isShow = false;\n        };\n        /**\n         * \n         * @param {MiniMapPosition} position\n         */\n        this.updatePosition = function (position) {\n            if (typeof position === 'object') {\n                if (position.left !== undefined || position.right !== undefined) {\n                    _this.leftPosition = position.left;\n                    _this.rightPosition = position.right;\n                }\n                if (position.top !== undefined || position.bottom !== undefined) {\n                    _this.topPosition = position.top;\n                    _this.bottomPosition = position.bottom;\n                }\n            }\n            else {\n                switch (position) {\n                    case 'left-top':\n                        _this.leftPosition = 0;\n                        _this.rightPosition = undefined;\n                        _this.topPosition = 0;\n                        _this.bottomPosition = undefined;\n                        break;\n                    case 'right-top':\n                        _this.leftPosition = undefined;\n                        _this.rightPosition = 0;\n                        _this.topPosition = 0;\n                        _this.bottomPosition = undefined;\n                        break;\n                    case 'left-bottom':\n                        _this.leftPosition = 0;\n                        _this.rightPosition = undefined;\n                        _this.topPosition = undefined;\n                        _this.bottomPosition = 0;\n                        break;\n                    case 'right-bottom':\n                        _this.leftPosition = undefined;\n                        _this.rightPosition = 0;\n                        _this.topPosition = undefined;\n                        _this.bottomPosition = 0;\n                        break;\n                }\n            }\n            _this.updateMiniMapPosition();\n        };\n        /**\n         * \n         */\n        this.reset = function () {\n            _this.lf.resetTranslate();\n            _this.lf.resetZoom();\n        };\n        /**\n         * \n         * @param {boolean} showEdge\n         */\n        this.setShowEdge = function (showEdge) {\n            if (_this.showEdge !== showEdge) {\n                _this.showEdge = showEdge;\n                _this.setView();\n            }\n        };\n        this.startDrag = function (e) {\n            document.addEventListener('pointermove', _this.drag);\n            document.addEventListener('pointerup', _this.drop);\n            var x = e.x, y = e.y;\n            _this.startPosition = { x: x, y: y };\n        };\n        /**\n         * \n         */\n        this.drag = function (e) {\n            var x = e.x, y = e.y;\n            var translateX = (x - _this.startPosition.x) / _this.scale;\n            var translateY = (y - _this.startPosition.y) / _this.scale;\n            var centerX = _this.viewPortLeft + translateX + _this.viewPortWidth / _this.scale / 2;\n            var centerY = _this.viewPortTop + translateY + _this.viewPortHeight / _this.scale / 2;\n            // \n            _this.startPosition = { x: x, y: y };\n            _this.lf.focusOn({\n                coordinate: {\n                    x: centerX,\n                    y: centerY,\n                },\n            });\n        };\n        /**\n         * \n         */\n        this.drop = function () {\n            document.removeEventListener('pointermove', _this.drag);\n            document.removeEventListener('pointerup', _this.drop);\n        };\n        /**\n         * \n         */\n        this.mapClick = function (e) {\n            var offsetX = e.offsetX, offsetY = e.offsetY;\n            var centerX = _this.translateX + offsetX / _this.scale;\n            var centerY = _this.translateY + offsetY / _this.scale;\n            _this.lf.focusOn({\n                coordinate: {\n                    x: centerX,\n                    y: centerY,\n                },\n            });\n        };\n        this.lf = lf;\n        this.LFCtor = LogicFlow;\n        if (options) {\n            this.setOption(options);\n        }\n        this.viewPortWidth = lf.graphModel.width;\n        this.viewPortHeight = lf.graphModel.height;\n        var boundsInit = {\n            left: 0,\n            right: this.viewPortWidth,\n            top: 0,\n            bottom: this.viewPortHeight,\n        };\n        this.bounds = boundsInit;\n        this.elementAreaBounds = boundsInit;\n        this.viewPortBounds = boundsInit;\n    }\n    /**\n     * \n     * @param options\n     */\n    MiniMap.prototype.setOption = function (options) {\n        var _a = options.width, width = _a === void 0 ? 150 : _a, _b = options.height, height = _b === void 0 ? 220 : _b, _c = options.showEdge, showEdge = _c === void 0 ? false : _c, _d = options.isShowHeader, isShowHeader = _d === void 0 ? false : _d, _e = options.isShowCloseIcon, isShowCloseIcon = _e === void 0 ? false : _e, leftPosition = options.leftPosition, topPosition = options.topPosition, _f = options.rightPosition, rightPosition = _f === void 0 ? 0 : _f, _g = options.bottomPosition, bottomPosition = _g === void 0 ? 0 : _g, _h = options.headerTitle, headerTitle = _h === void 0 ? '' : _h;\n        this.width = width;\n        this.height = height;\n        this.showEdge = showEdge;\n        this.isShowHeader = isShowHeader;\n        this.isShowCloseIcon = isShowCloseIcon;\n        this.leftPosition = leftPosition;\n        this.rightPosition = leftPosition !== undefined ? undefined : rightPosition;\n        this.topPosition = topPosition;\n        this.bottomPosition = topPosition !== undefined ? undefined : bottomPosition;\n        this.headerTitle = headerTitle;\n    };\n    /**\n     *  LogicFlow \n     */\n    MiniMap.prototype.initMiniMap = function () {\n        var miniMapWrap = document.createElement('div');\n        miniMapWrap.className = 'lf-mini-map-graph';\n        miniMapWrap.style.width = \"\".concat(this.width, \"px\");\n        miniMapWrap.style.height = \"\".concat(this.height, \"px\");\n        this.lfMap = new this.LFCtor({\n            container: miniMapWrap,\n            grid: false,\n            isSilentMode: true,\n            stopZoomGraph: true,\n            stopScrollGraph: true,\n            //  transformModel.translate \n            stopMoveGraph: false,\n            history: false,\n            snapline: false,\n            disabledPlugins: this.disabledPlugins,\n            isMiniMap: true,\n        });\n        // minimapadapter\n        // this.lfMap.adapterIn = (a) => a\n        // this.lfMap.adapterOut = (a) => a\n        this.miniMapWrap = miniMapWrap;\n        this.createViewPort();\n        miniMapWrap.addEventListener('click', this.mapClick);\n    };\n    MiniMap.prototype.createMiniMap = function (left, top) {\n        var _a;\n        var miniMapContainer = document.createElement('div');\n        this.miniMapContainer = miniMapContainer;\n        miniMapContainer.appendChild(this.miniMapWrap);\n        miniMapContainer.style.position = 'absolute';\n        if (left !== undefined || top !== undefined) {\n            this.leftPosition = left || 0;\n            this.topPosition = top || 0;\n            this.rightPosition = undefined;\n            this.bottomPosition = undefined;\n        }\n        this.updateMiniMapPosition();\n        miniMapContainer.className = 'lf-mini-map';\n        if (!this.isShowCloseIcon) {\n            miniMapContainer.classList.add('lf-mini-map-no-close-icon');\n        }\n        if (!this.isShowHeader) {\n            miniMapContainer.classList.add('lf-mini-map-no-header');\n        }\n        (_a = this.container) === null || _a === void 0 ? void 0 : _a.appendChild(miniMapContainer);\n        this.miniMapWrap.appendChild(this.viewport);\n        var header = document.createElement('div');\n        header.className = 'lf-mini-map-header';\n        header.innerText = this.headerTitle;\n        miniMapContainer.appendChild(header);\n        var close = document.createElement('span');\n        close.className = 'lf-mini-map-close';\n        close.addEventListener('click', this.hide);\n        miniMapContainer.appendChild(close);\n    };\n    MiniMap.prototype.updateMiniMapPosition = function () {\n        if (this.miniMapContainer) {\n            var style = this.miniMapContainer.style;\n            if (this.rightPosition !== undefined) {\n                style.right = \"\".concat(this.rightPosition, \"px\");\n                style.left = '';\n            }\n            else {\n                style.left = \"\".concat(this.leftPosition, \"px\");\n                style.right = '';\n            }\n            if (this.bottomPosition !== undefined) {\n                style.bottom = \"\".concat(this.bottomPosition, \"px\");\n                style.top = '';\n            }\n            else {\n                style.top = \"\".concat(this.topPosition, \"px\");\n                style.bottom = '';\n            }\n        }\n    };\n    MiniMap.prototype.removeMiniMap = function () {\n        var _a;\n        if (this.miniMapContainer) {\n            (_a = this.container) === null || _a === void 0 ? void 0 : _a.removeChild(this.miniMapContainer);\n        }\n    };\n    /**\n     * \n     * @param data\n     */\n    MiniMap.prototype.updateBounds = function (data) {\n        if (data) {\n            this.updateElementAreaBounds(data);\n        }\n        this.updateViewPortBounds();\n        this.bounds = {\n            left: Math.min(this.elementAreaBounds.left, this.viewPortBounds.left),\n            right: Math.max(this.elementAreaBounds.right, this.viewPortBounds.right),\n            top: Math.min(this.elementAreaBounds.top, this.viewPortBounds.top),\n            bottom: Math.max(this.elementAreaBounds.bottom, this.viewPortBounds.bottom),\n        };\n    };\n    /**\n     * \n     * @param data\n     */\n    MiniMap.prototype.updateElementAreaBounds = function (data) {\n        var elementAreaBounds = {\n            left: 0,\n            right: 0,\n            top: 0,\n            bottom: 0,\n        };\n        var nodes = data.nodes;\n        if (nodes && nodes.length > 0) {\n            // TODO: \n            nodes.forEach(function (node) {\n                var _a, _b;\n                var x = node.x, y = node.y;\n                var width = (_a = node.width) !== null && _a !== void 0 ? _a : 200;\n                var height = (_b = node.height) !== null && _b !== void 0 ? _b : 200;\n                var nodeLeft = x - width / 2;\n                var nodeRight = x + width / 2;\n                var nodeTop = y - height / 2;\n                var nodeBottom = y + height / 2;\n                elementAreaBounds.left = Math.min(nodeLeft, elementAreaBounds.left);\n                elementAreaBounds.right = Math.max(nodeRight, elementAreaBounds.right);\n                elementAreaBounds.top = Math.min(nodeTop, elementAreaBounds.top);\n                elementAreaBounds.bottom = Math.max(nodeBottom, elementAreaBounds.bottom);\n            });\n        }\n        this.elementAreaBounds = elementAreaBounds;\n    };\n    /**\n     * \n     */\n    MiniMap.prototype.updateViewPortBounds = function () {\n        var _a = this.lf.getTransform(), TRANSLATE_X = _a.TRANSLATE_X, TRANSLATE_Y = _a.TRANSLATE_Y, SCALE_X = _a.SCALE_X, SCALE_Y = _a.SCALE_Y;\n        var _b = this.lf.graphModel, width = _b.width, height = _b.height;\n        this.viewPortBounds = {\n            left: -TRANSLATE_X / SCALE_X,\n            right: (-TRANSLATE_X + width) / SCALE_X,\n            top: -TRANSLATE_Y / SCALE_Y,\n            bottom: (-TRANSLATE_Y + height) / SCALE_Y,\n        };\n    };\n    /**\n     * \n     */\n    MiniMap.prototype.resetData = function (data) {\n        var nodes = data.nodes, edges = data.edges;\n        nodes.forEach(function (node) {\n            // \n            node.text = undefined;\n        });\n        if (this.showEdge) {\n            edges.forEach(function (edge) {\n                // \n                edge.text = undefined;\n            });\n        }\n        return {\n            nodes: nodes,\n            // \n            edges: this.showEdge ? edges : [],\n        };\n    };\n    /**\n     * MiniMap\n     * @param reRender \n     */\n    // TODO:  render  reRender \n    MiniMap.prototype.setView = function (reRender) {\n        var e_1, _a;\n        if (reRender === void 0) { reRender = true; }\n        if (reRender) {\n            // 1. \n            var graphData = this.lf.getGraphRawData();\n            var data = this.resetData(graphData);\n            // \n            var viewMap = this.lf.viewMap;\n            var modelMap = this.lf.graphModel.modelMap;\n            var minimapViewMap = this.lfMap.viewMap;\n            try {\n                for (var _b = __values(viewMap.keys()), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var key = _c.value;\n                    if (!minimapViewMap.has(key)) {\n                        this.lfMap.register({\n                            type: key,\n                            view: viewMap.get(key),\n                            model: modelMap.get(key),\n                        });\n                    }\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            // 2. \n            this.lfMap.render(data);\n            // 3. \n            this.updateBounds(data);\n        }\n        else {\n            this.updateBounds();\n        }\n        // 4. \n        var _d = this.bounds, left = _d.left, top = _d.top, right = _d.right, bottom = _d.bottom;\n        var realWidth = right - left;\n        var realHeight = bottom - top;\n        var realWidthScale = this.width / realWidth;\n        var realHeightScale = this.height / realHeight;\n        var scale = Math.min(realWidthScale, realHeightScale);\n        this.scale = scale;\n        var translateX = left - (this.width / scale - realWidth) / 2;\n        var translateY = top - (this.height / scale - realHeight) / 2;\n        this.lfMap.graphModel.transformModel.translate(-translateX + this.translateX, -translateY + this.translateY);\n        this.translateX = translateX;\n        this.translateY = translateY;\n        // 5. \n        if (this.miniMapWrap.firstChild) {\n            var innerStyle = this.miniMapWrap.firstChild.style;\n            innerStyle.pointerEvents = 'none';\n            innerStyle.transform = \"matrix(\".concat(scale, \", 0, 0, \").concat(scale, \", 0, 0)\");\n            innerStyle.transformOrigin = 'left top';\n            innerStyle.height = \"\".concat(this.height / scale, \"px\");\n            innerStyle.width = \"\".concat(this.width / scale, \"px\");\n            this.updateViewPort();\n        }\n    };\n    /**\n     * \n     */\n    MiniMap.prototype.updateViewPort = function () {\n        var viewStyle = this.viewport.style;\n        var _a = this.lf.getTransform(), TRANSLATE_X = _a.TRANSLATE_X, TRANSLATE_Y = _a.TRANSLATE_Y, SCALE_X = _a.SCALE_X, SCALE_Y = _a.SCALE_Y;\n        var _b = this.lf.graphModel, width = _b.width, height = _b.height;\n        this.viewPortLeft = -TRANSLATE_X / SCALE_X;\n        this.viewPortTop = -TRANSLATE_Y / SCALE_Y;\n        this.viewPortWidth = (width / SCALE_X) * this.scale;\n        this.viewPortHeight = (height / SCALE_Y) * this.scale;\n        viewStyle.width = \"\".concat(this.viewPortWidth, \"px\");\n        viewStyle.height = \"\".concat(this.viewPortHeight, \"px\");\n        viewStyle.left = \"\".concat((this.viewPortLeft - this.translateX) * this.scale, \"px\");\n        viewStyle.top = \"\".concat((this.viewPortTop - this.translateY) * this.scale, \"px\");\n    };\n    /**\n     * \n     */\n    MiniMap.prototype.createViewPort = function () {\n        var div = document.createElement('div');\n        div.className = 'lf-minimap-viewport';\n        div.style.touchAction = 'none';\n        div.addEventListener('pointerdown', this.startDrag);\n        // \n        div.addEventListener('click', function (e) {\n            e.stopPropagation();\n        });\n        this.viewport = div;\n    };\n    MiniMap.prototype.destroy = function () {\n        this.lf.off('graph:resize', this.onGraphResize);\n    };\n    MiniMap.pluginName = 'miniMap';\n    return MiniMap;\n}());\nexport { MiniMap };\nexport default MiniMap;\n","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { cloneDeep } from 'lodash-es';\nvar SelectionSelect = /** @class */ (function () {\n    function SelectionSelect(_a) {\n        var lf = _a.lf, options = _a.options;\n        var _this = this;\n        var _b;\n        this.disabled = true;\n        this.isWholeNode = true;\n        this.isWholeEdge = true;\n        this.originStatusSaved = false;\n        this.exclusiveMode = false; // true false \n        // \n        this.mouseDownInfo = null;\n        //  stopMoveGraph \n        this.originalStopMoveGraph = false;\n        /**\n         * \n         */\n        this.handleBlankMouseDown = function (_a) {\n            var e = _a.e;\n            _this.handleMouseDown(e);\n        };\n        this.draw = function (ev) {\n            if (_this.lf.graphModel.editConfigModel.isPinching) {\n                _this.lf.updateEditConfig({ stopMoveGraph: _this.originalStopMoveGraph });\n                _this.originStatusSaved = false;\n                _this.cleanupSelectionState();\n                return;\n            }\n            var _a = _this.lf.getPointByClient(ev.clientX, ev.clientY).domOverlayPosition, x1 = _a.x, y1 = _a.y;\n            _this.endPoint = {\n                x: x1,\n                y: y1,\n            };\n            if (_this.startPoint) {\n                var _b = _this.startPoint, x = _b.x, y = _b.y;\n                var left = x;\n                var top_1 = y;\n                var width = x1 - x;\n                var height = y1 - y;\n                if (x1 < x) {\n                    left = x1;\n                    width = x - x1;\n                }\n                if (y1 < y) {\n                    top_1 = y1;\n                    height = y - y1;\n                }\n                if (_this.wrapper) {\n                    _this.wrapper.style.left = \"\".concat(left, \"px\");\n                    _this.wrapper.style.top = \"\".concat(top_1, \"px\");\n                    _this.wrapper.style.width = \"\".concat(width, \"px\");\n                    _this.wrapper.style.height = \"\".concat(height, \"px\");\n                }\n            }\n        };\n        this.drawOff = function (e) {\n            //  stopMoveGraph \n            _this.lf.updateEditConfig({\n                stopMoveGraph: _this.originalStopMoveGraph,\n            });\n            _this.originStatusSaved = false;\n            // \n            // \n            if (_this.mouseDownInfo) {\n                var _a = _this.mouseDownInfo, x = _a.x, y = _a.y, time = _a.time;\n                var isClick = Math.abs(e.clientX - x) < 5 &&\n                    Math.abs(e.clientY - y) < 5 &&\n                    Date.now() - time < 200;\n                if (isClick) {\n                    _this.lf.clearSelectElements();\n                    _this.cleanupSelectionState();\n                    return;\n                }\n            }\n            var curStartPoint = cloneDeep(_this.startPoint);\n            var curEndPoint = cloneDeep(_this.endPoint);\n            document.removeEventListener('pointermove', _this.draw);\n            if (!_this.exclusiveMode) {\n                document.removeEventListener('pointerup', _this.drawOff);\n            }\n            if (curStartPoint && curEndPoint) {\n                var x = curStartPoint.x, y = curStartPoint.y;\n                var x1 = curEndPoint.x, y1 = curEndPoint.y;\n                // \n                var lt = [Math.min(x, x1), Math.min(y, y1)];\n                var rb = [Math.max(x, x1), Math.max(y, y1)];\n                _this.lf.emit('selection:selected-area', {\n                    topLeft: lt,\n                    bottomRight: rb,\n                });\n                // \n                if (Math.abs(x1 - x) < 10 && Math.abs(y1 - y) < 10) {\n                    if (_this.wrapper) {\n                        _this.wrapper.oncontextmenu = null;\n                        if (_this.container && _this.wrapper.parentNode === _this.container) {\n                            _this.container.removeChild(_this.wrapper);\n                        }\n                        _this.wrapper = undefined;\n                    }\n                    return;\n                }\n                var elements_1 = _this.lf.graphModel.getAreaElement(lt, rb, _this.isWholeEdge, _this.isWholeNode, true);\n                var _b = _this.lf.graphModel, dynamicGroup_1 = _b.dynamicGroup, group_1 = _b.group;\n                var nonGroupedElements_1 = [];\n                var selectedElements = _this.lf.getSelectElements();\n                // ID\n                var selectedIds_1 = new Set(__spreadArray(__spreadArray([], __read(selectedElements.nodes.map(function (node) { return node.id; })), false), __read(selectedElements.edges.map(function (edge) { return edge.id; })), false));\n                elements_1.forEach(function (element) {\n                    //  Group \n                    if (group_1) {\n                        var elementGroup = group_1.getNodeGroup(element.id);\n                        if (elements_1.includes(elementGroup)) {\n                            // \n                            return;\n                        }\n                    }\n                    if (dynamicGroup_1) {\n                        var elementGroup = dynamicGroup_1.getGroupByNodeId(element.id);\n                        if (elements_1.includes(elementGroup)) {\n                            // \n                            return;\n                        }\n                    }\n                    // \n                    if (_this.exclusiveMode && selectedIds_1.has(element.id)) {\n                        _this.lf.deselectElementById(element.id);\n                        return;\n                    }\n                    // \n                    _this.lf.selectElementById(element.id, true);\n                    nonGroupedElements_1.push(element);\n                });\n                // \n                // closeSelectionSelect\n                _this.startPoint = undefined;\n                _this.endPoint = undefined;\n                //  selection:drop \n                if (nonGroupedElements_1.length > 0) {\n                    _this.lf.emit('selection:drop', { e: e });\n                }\n                //  selection:selected \n                _this.lf.emit('selection:selected', {\n                    elements: nonGroupedElements_1,\n                    leftTopPoint: lt,\n                    rightBottomPoint: rb,\n                });\n            }\n            if (_this.wrapper) {\n                _this.wrapper.oncontextmenu = null;\n                if (_this.container && _this.wrapper.parentNode === _this.container) {\n                    _this.container.removeChild(_this.wrapper);\n                }\n                _this.wrapper = undefined;\n            }\n        };\n        this.lf = lf;\n        this.exclusiveMode = (_b = options === null || options === void 0 ? void 0 : options.exclusiveMode) !== null && _b !== void 0 ? _b : false;\n        // TODO: lf\n        lf.openSelectionSelect = function () {\n            _this.openSelectionSelect();\n        };\n        lf.closeSelectionSelect = function () {\n            _this.closeSelectionSelect();\n        };\n        // \n        lf.setSelectionSelectMode = function (exclusive) {\n            _this.setExclusiveMode(exclusive);\n        };\n        //  this \n        this.handleMouseDown = this.handleMouseDown.bind(this);\n        this.draw = this.draw.bind(this);\n        this.drawOff = this.drawOff.bind(this);\n    }\n    SelectionSelect.prototype.render = function (_, domContainer) {\n        this.container = domContainer;\n    };\n    /**\n     * \n     */\n    SelectionSelect.prototype.cleanupSelectionState = function () {\n        // \n        if (this.wrapper) {\n            this.wrapper.oncontextmenu = null;\n            if (this.container && this.wrapper.parentNode === this.container) {\n                this.container.removeChild(this.wrapper);\n            }\n            this.wrapper = undefined;\n        }\n        this.startPoint = undefined;\n        this.endPoint = undefined;\n        this.mouseDownInfo = null;\n        // \n        document.removeEventListener('pointermove', this.draw);\n        document.removeEventListener('pointerup', this.drawOff);\n    };\n    /**\n     * \n     * @param exclusive true false \n     */\n    SelectionSelect.prototype.setExclusiveMode = function (exclusive) {\n        if (exclusive === void 0) { exclusive = false; }\n        if (this.exclusiveMode === exclusive)\n            return;\n        this.cleanupSelectionState();\n        this.exclusiveMode = exclusive;\n        if (this.container && !this.disabled) {\n            // \n            this.removeEventListeners();\n            this.addEventListeners();\n        }\n    };\n    SelectionSelect.prototype.addEventListeners = function () {\n        if (!this.container)\n            return;\n        if (this.exclusiveMode) {\n            //  container  mousedown \n            this.container.style.pointerEvents = 'auto';\n            this.container.style.touchAction = 'none';\n            this.container.addEventListener('pointerdown', this.handleMouseDown);\n        }\n        else {\n            //  blank:mousedown \n            this.container.style.pointerEvents = 'none';\n            // \n            this.lf.on('blank:mousedown', this.handleBlankMouseDown);\n        }\n    };\n    SelectionSelect.prototype.removeEventListeners = function () {\n        if (this.container) {\n            this.container.style.pointerEvents = 'none';\n            this.container.removeEventListener('pointerdown', this.handleMouseDown);\n        }\n        //  blank:mousedown \n        this.lf.off('blank:mousedown', this.handleBlankMouseDown);\n    };\n    /**\n     * \n     */\n    SelectionSelect.prototype.handleMouseDown = function (e) {\n        var _a;\n        if (!this.container || this.disabled)\n            return;\n        if (this.lf.graphModel.editConfigModel.isPinching)\n            return;\n        // \n        var isRightClick = e.button === 2;\n        if (isRightClick)\n            return;\n        // \n        this.cleanupSelectionState();\n        // \n        this.mouseDownInfo = {\n            x: e.clientX,\n            y: e.clientY,\n            time: Date.now(),\n        };\n        // \n        if (!this.originStatusSaved) {\n            // stopMoveGraphstopMoveGraph issue #2263\n            this.originalStopMoveGraph = this.lf.getEditConfig().stopMoveGraph;\n            this.originStatusSaved = true;\n        }\n        this.lf.updateEditConfig({\n            stopMoveGraph: true,\n        });\n        var _b = this.lf.getPointByClient(e.clientX, e.clientY).domOverlayPosition, x = _b.x, y = _b.y;\n        this.startPoint = { x: x, y: y };\n        this.endPoint = { x: x, y: y };\n        var wrapper = document.createElement('div');\n        wrapper.className = 'lf-selection-select';\n        wrapper.oncontextmenu = function prevent(ev) {\n            ev.preventDefault();\n        };\n        wrapper.style.top = \"\".concat(this.startPoint.y, \"px\");\n        wrapper.style.left = \"\".concat(this.startPoint.x, \"px\");\n        (_a = this.container) === null || _a === void 0 ? void 0 : _a.appendChild(wrapper);\n        this.wrapper = wrapper;\n        document.addEventListener('pointermove', this.draw);\n        document.addEventListener('pointerup', this.drawOff);\n    };\n    /**\n     * \n     * @param isWholeEdge true\n     * @param isWholeNode true\n     */\n    SelectionSelect.prototype.setSelectionSense = function (isWholeEdge, isWholeNode) {\n        if (isWholeEdge === void 0) { isWholeEdge = true; }\n        if (isWholeNode === void 0) { isWholeNode = true; }\n        this.isWholeEdge = isWholeEdge;\n        this.isWholeNode = isWholeNode;\n    };\n    /**\n     * \n     */\n    SelectionSelect.prototype.openSelectionSelect = function () {\n        if (!this.disabled) {\n            this.closeSelectionSelect();\n        }\n        if (!this.container) {\n            return;\n        }\n        this.cleanupSelectionState();\n        this.addEventListeners();\n        this.open();\n    };\n    /**\n     * \n     */\n    SelectionSelect.prototype.closeSelectionSelect = function () {\n        if (!this.container) {\n            return;\n        }\n        //  drawOff \n        if (this.wrapper && this.startPoint && this.endPoint) {\n            //  mouseup \n            var lastEndPoint = cloneDeep(this.endPoint);\n            var lastEvent = new PointerEvent('pointerup', {\n                clientX: lastEndPoint.x,\n                clientY: lastEndPoint.y,\n            });\n            this.drawOff(lastEvent);\n        }\n        this.cleanupSelectionState();\n        this.removeEventListeners();\n        this.close();\n    };\n    SelectionSelect.prototype.open = function () {\n        this.disabled = false;\n    };\n    SelectionSelect.prototype.close = function () {\n        this.disabled = true;\n    };\n    SelectionSelect.pluginName = 'selectionSelect';\n    return SelectionSelect;\n}());\nexport { SelectionSelect };\nexport default SelectionSelect;\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { PolylineEdge, PolylineEdgeModel, h } from '@logicflow/core';\nvar directionMap = {\n    tr: 'tl',\n    lb: 'tl',\n    tl: 'tr',\n    rb: 'tr',\n    br: 'bl',\n    lt: 'bl',\n    bl: 'br',\n    rt: 'br',\n};\nfunction pointFilter(points) {\n    var all = points;\n    var i = 1;\n    while (i < all.length - 1) {\n        var _a = __read(all[i - 1], 2), x = _a[0], y = _a[1];\n        var _b = __read(all[i], 2), x1 = _b[0], y1 = _b[1];\n        var _c = __read(all[i + 1], 2), x2 = _c[0], y2 = _c[1];\n        if ((x === x1 && x1 === x2) || (y === y1 && y1 === y2)) {\n            all.splice(i, 1);\n        }\n        else {\n            i++;\n        }\n    }\n    return all;\n}\nfunction getMidPoints(cur, key, orientation, radius) {\n    var mid1 = [cur[0], cur[1]];\n    var mid2 = [cur[0], cur[1]];\n    switch (orientation) {\n        case 'tl': {\n            if (key === 'tr') {\n                mid1[1] += radius;\n                mid2[0] += radius;\n            }\n            else if (key === 'lb') {\n                mid1[0] += radius;\n                mid2[1] += radius;\n            }\n            return [mid1, mid2];\n        }\n        case 'tr': {\n            if (key === 'tl') {\n                mid1[1] += radius;\n                mid2[0] -= radius;\n            }\n            else if (key === 'rb') {\n                mid1[0] -= radius;\n                mid2[1] += radius;\n            }\n            return [mid1, mid2];\n        }\n        case 'bl': {\n            if (key === 'br') {\n                mid1[1] -= radius;\n                mid2[0] += radius;\n            }\n            else if (key === 'lt') {\n                mid1[0] += radius;\n                mid2[1] -= radius;\n            }\n            return [mid1, mid2];\n        }\n        case 'br': {\n            if (key === 'bl') {\n                mid1[1] -= radius;\n                mid2[0] -= radius;\n            }\n            else if (key === 'rt') {\n                mid1[0] -= radius;\n                mid2[1] -= radius;\n            }\n            return [mid1, mid2];\n        }\n        default:\n            return [];\n    }\n}\nfunction getPartialPath(prev, cur, next, radius) {\n    var _a;\n    var dir1 = '';\n    var dir2 = '';\n    if (prev[0] === cur[0]) {\n        dir1 = prev[1] > cur[1] ? 't' : 'b';\n    }\n    else if (prev[1] === cur[1]) {\n        dir1 = prev[0] > cur[0] ? 'l' : 'r';\n    }\n    if (cur[0] === next[0]) {\n        dir2 = cur[1] > next[1] ? 't' : 'b';\n    }\n    else if (cur[1] === next[1]) {\n        dir2 = cur[0] > next[0] ? 'l' : 'r';\n    }\n    var r = Math.min(Math.hypot(cur[0] - prev[0], cur[1] - prev[1]) / 2, Math.hypot(next[0] - cur[0], next[1] - cur[1]) / 2, radius) || (1 / 5) * radius;\n    var key = \"\".concat(dir1).concat(dir2);\n    var orientation = directionMap[key] || '-';\n    var path = \"L \".concat(prev[0], \" \").concat(prev[1]);\n    if (orientation === '-') {\n        path += \"L \".concat(cur[0], \" \").concat(cur[1], \" L \").concat(next[0], \" \").concat(next[1]);\n    }\n    else {\n        var _b = __read(getMidPoints(cur, key, orientation, r), 2), mid1 = _b[0], mid2 = _b[1];\n        if (mid1 && mid2) {\n            path += \"L \".concat(mid1[0], \" \").concat(mid1[1], \" Q \").concat(cur[0], \" \").concat(cur[1], \" \").concat(mid2[0], \" \").concat(mid2[1]);\n            _a = __read(mid2, 2), cur[0] = _a[0], cur[1] = _a[1];\n        }\n    }\n    return path;\n}\nfunction getCurvedEdgePath(points, radius) {\n    var i = 0;\n    var d = '';\n    if (points.length === 2) {\n        d += \"M\".concat(points[i][0], \" \").concat(points[i++][1], \" L \").concat(points[i][0], \" \").concat(points[i][1]);\n    }\n    else {\n        d += \"M\".concat(points[i][0], \" \").concat(points[i++][1]);\n        for (; i + 1 < points.length;) {\n            var prev = points[i - 1];\n            var cur = points[i];\n            var next = points[i++ + 1];\n            d += getPartialPath(prev, cur, next, radius);\n        }\n        d += \"L \".concat(points[i][0], \" \").concat(points[i][1]);\n    }\n    return d;\n}\nvar CurvedEdge = /** @class */ (function (_super) {\n    __extends(CurvedEdge, _super);\n    function CurvedEdge() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CurvedEdge.prototype.getEdge = function () {\n        var model = this.props.model;\n        var pointsStr = model.points, isAnimation = model.isAnimation, arrowConfig = model.arrowConfig, _a = model.radius, radius = _a === void 0 ? 5 : _a;\n        var style = model.getEdgeStyle();\n        var animationStyle = model.getEdgeAnimationStyle();\n        var points = pointFilter(pointsStr.split(' ').map(function (p) { return p.split(',').map(function (a) { return +a; }); }));\n        var d = getCurvedEdgePath(points, radius);\n        var attrs = __assign(__assign(__assign({ style: isAnimation ? animationStyle : {} }, style), arrowConfig), { fill: 'none' });\n        return h('path', __assign({ d: d }, attrs));\n    };\n    return CurvedEdge;\n}(PolylineEdge));\nvar CurvedEdgeModel = /** @class */ (function (_super) {\n    __extends(CurvedEdgeModel, _super);\n    function CurvedEdgeModel() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return CurvedEdgeModel;\n}(PolylineEdgeModel));\nvar defaultCurvedEdge = {\n    type: 'curved-edge',\n    view: CurvedEdge,\n    model: CurvedEdgeModel,\n};\nexport default defaultCurvedEdge;\nexport { CurvedEdge, CurvedEdgeModel, getCurvedEdgePath };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { get } from 'lodash-es';\nimport { h, PolygonNode, PolygonNodeModel, } from '@logicflow/core';\nvar NodeSelectionView = /** @class */ (function (_super) {\n    __extends(NodeSelectionView, _super);\n    function NodeSelectionView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    NodeSelectionView.prototype.getLabelShape = function () {\n        var _a = this.props.model, id = _a.id, x = _a.x, y = _a.y, width = _a.width, height = _a.height, properties = _a.properties;\n        var style = this.props.model.getNodeStyle();\n        return h('svg', {\n            x: x - width / 2,\n            y: y - height / 2,\n            width: 50,\n            height: 24,\n            style: 'z-index: 0; background: none; overflow: auto;',\n        }, [\n            properties.labelText\n                ? h('text', {\n                    x: 0,\n                    y: -5,\n                    fontSize: '16px',\n                    fill: style.stroke,\n                }, properties.labelText)\n                : '',\n            properties.disabledDelete\n                ? ''\n                : h('text', {\n                    x: properties.labelText ? 50 : 0,\n                    y: -5,\n                    fontSize: '24px',\n                    cursor: 'pointer',\n                    fill: style.stroke,\n                    onclick: this.handleCustomDeleteIconClick.bind(this, id),\n                }, 'x'),\n        ]);\n    };\n    NodeSelectionView.prototype.getShape = function () {\n        var _a = this.props.model, x = _a.x, y = _a.y, width = _a.width, height = _a.height, id = _a.id;\n        var style = this.props.model.getNodeStyle();\n        return h('g', {}, [\n            h('rect', __assign(__assign({}, style), { x: x - width / 2, y: y - height / 2, width: width, height: height, id: id })),\n            this.getLabelShape(),\n        ]);\n    };\n    // \n    NodeSelectionView.prototype.toFront = function () { };\n    /**\n     * \n     * @param id\n     */\n    NodeSelectionView.prototype.handleCustomDeleteIconClick = function (id) {\n        var graphModel = this.props.graphModel;\n        graphModel.deleteNode(id);\n    };\n    return NodeSelectionView;\n}(PolygonNode));\nvar NodeSelectionModel = /** @class */ (function (_super) {\n    __extends(NodeSelectionModel, _super);\n    function NodeSelectionModel() {\n        var _this = _super.apply(this, __spreadArray([], __read(arguments), false)) || this;\n        _this.d = 10;\n        _this.isResize = false;\n        return _this;\n    }\n    NodeSelectionModel.prototype.initNodeData = function (data) {\n        data.text = {\n            value: '',\n            x: data.x,\n            y: data.y,\n            draggable: false,\n            editable: false,\n        };\n        _super.prototype.initNodeData.call(this, data);\n        this.zIndex = 0;\n        this.draggable = true;\n    };\n    NodeSelectionModel.prototype.setAttributes = function () {\n        var _this = this;\n        var _a;\n        // \n        this.points = [];\n        // rendernodesnodesMap\n        // setAttributes\n        // updatePointsByNodesgetNodeModelByIdnodesMapsetTimeout\n        if (((_a = this.properties) === null || _a === void 0 ? void 0 : _a.node_selection_ids).length > 1) {\n            setTimeout(function () {\n                var _a;\n                _this.updatePointsByNodes(((_a = _this.properties) === null || _a === void 0 ? void 0 : _a.node_selection_ids) || []);\n            });\n        }\n    };\n    NodeSelectionModel.prototype.getNodeStyle = function () {\n        var style = _super.prototype.getNodeStyle.call(this);\n        style.stroke = this.properties.strokeColor || '#008000';\n        style.strokeDasharray = '10 5';\n        return style;\n    };\n    NodeSelectionModel.prototype.getDefaultAnchor = function () {\n        return [];\n    };\n    /**\n     * points - \n     * @param points\n     */\n    NodeSelectionModel.prototype.updatePoints = function (points) {\n        this.points = points;\n    };\n    /**\n     * x y - \n     */\n    NodeSelectionModel.prototype.updateCoordinate = function (_a) {\n        var x = _a.x, y = _a.y;\n        this.x = x;\n        this.y = y;\n    };\n    /**\n     *  points  x y\n     */\n    NodeSelectionModel.prototype.updatePointsByNodes = function (nodesIds) {\n        var _this = this;\n        var points = [];\n        var minX = Infinity;\n        var minY = Infinity;\n        var maxX = -Infinity;\n        var maxY = -Infinity;\n        nodesIds.forEach(function (id) {\n            var model = _this.graphModel.getNodeModelById(id);\n            if (!model)\n                return;\n            var width = model.width, height = model.height, x = model.x, y = model.y;\n            minX = Math.min(minX, x - width / 2 - _this.d);\n            minY = Math.min(minY, y - height / 2 - _this.d);\n            maxX = Math.max(maxX, x + width / 2 + _this.d);\n            maxY = Math.max(maxY, y + height / 2 + _this.d);\n        });\n        points.push([minX, minY], [maxX, minY], [maxX, maxY], [minX, maxY]);\n        if ([minX, minY, maxX, maxY].some(function (n) { return Math.abs(n) === Infinity; }))\n            return;\n        this.updatePoints(points);\n        this.updateCoordinate({\n            x: (maxX + minX) / 2,\n            y: (maxY + minY) / 2,\n        });\n    };\n    NodeSelectionModel.prototype.resize = function (resizeInfo) {\n        var _a;\n        this.isResize = true;\n        var width = resizeInfo.width, height = resizeInfo.height;\n        var scale = {\n            x: width / this.width,\n            y: height / this.height,\n        };\n        var childIds = (this.properties.node_selection_ids || []).slice();\n        var childModels = [];\n        var usedGroupId = new Set();\n        while (childIds.length) {\n            var id = childIds.shift();\n            var node = (_a = this.graphModel.nodesMap[id]) === null || _a === void 0 ? void 0 : _a.model;\n            if (!node) {\n                continue;\n            }\n            if (!isNodeSelectionModel(node)) {\n                childModels.push(node);\n                continue;\n            }\n            // \n            if (usedGroupId.has(node.id)) {\n                continue;\n            }\n            usedGroupId.add(node.id);\n            childIds.push.apply(childIds, __spreadArray([], __read((node.properties.node_selection_ids || [])), false));\n        }\n        var begin = {\n            x: this.x - this.width / 2,\n            y: this.y - this.height / 2,\n        };\n        var res = _super.prototype.resize.call(this, resizeInfo);\n        var end = {\n            x: this.x - this.width / 2,\n            y: this.y - this.height / 2,\n        };\n        childModels.forEach(function (node) {\n            node.width = node.width * scale.x;\n            node.height = node.height * scale.y;\n            var deltaX = (node.x - begin.x) * scale.x + end.x - node.x;\n            var deltaY = (node.y - begin.y) * scale.y + end.y - node.y;\n            node.move(deltaX, deltaY, true);\n        });\n        this.isResize = false;\n        return res;\n    };\n    return NodeSelectionModel;\n}(PolygonNodeModel));\nvar NODE_SELECTION_TYPE = 'node-selection';\nvar NodeSelection = /** @class */ (function () {\n    function NodeSelection(_a) {\n        var lf = _a.lf;\n        this.selectNodes = []; // nodes\n        this.d = 10;\n        this.lf = lf;\n        lf.register({\n            type: NODE_SELECTION_TYPE,\n            view: NodeSelectionView,\n            model: NodeSelectionModel,\n        });\n    }\n    Object.defineProperty(NodeSelection.prototype, \"selectNodesIds\", {\n        /**\n         * nodeid\n         */\n        get: function () {\n            return this.selectNodes.map(function (node) { return node.id; });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * node-selection\n     */\n    NodeSelection.prototype.addNodeSelection = function () {\n        var node = this.lf.addNode({\n            type: 'node-selection',\n            text: '',\n            properties: {\n                node_selection_ids: this.selectNodesIds,\n            },\n            x: 0,\n            y: 0,\n        });\n        node.updatePointsByNodes(this.selectNodesIds);\n    };\n    /**\n     * node-selection\n     */\n    NodeSelection.prototype.updateNodeSelection = function () {\n        var _a;\n        var nodeSelection = this.getNodeSelection();\n        if (!nodeSelection)\n            return;\n        this.lf.setProperties(nodeSelection.id, {\n            node_selection_ids: this.selectNodesIds,\n        });\n        (_a = this.lf\n            .getNodeModelById(nodeSelection.id)) === null || _a === void 0 ? void 0 : _a.updatePointsByNodes(this.selectNodesIds);\n    };\n    /**\n     * node-selection\n     */\n    NodeSelection.prototype.getNodeSelection = function () {\n        var _this = this;\n        var ids = this.selectNodesIds;\n        var rawData = this.lf.getGraphRawData();\n        var oldIds = ids.filter(function (id) { return id !== _this.currentClickNode.id; });\n        return rawData.nodes.find(function (node) {\n            if (node.type === 'node-selection') {\n                var nodeSelectionIds_1 = get(node, 'properties.node_selection_ids', []);\n                return oldIds.every(function (id) { return nodeSelectionIds_1.includes(id); });\n            }\n            return false;\n        });\n    };\n    NodeSelection.prototype.onNodeChange = function (lf, model) {\n        var connectedSelections = lf.graphModel.nodes.filter(function (node) {\n            if (!isNodeSelectionModel(node)) {\n                return false;\n            }\n            var childIds = node.properties.node_selection_ids || [];\n            return childIds.includes(model.id);\n        });\n        Promise.resolve().then(function () {\n            connectedSelections.forEach(function (node) {\n                node.updatePointsByNodes(node.properties.node_selection_ids || []);\n            });\n        });\n    };\n    NodeSelection.prototype.render = function (lf) {\n        var _this = this;\n        this.lf = lf;\n        lf.on('node:click', function (val) {\n            var _a;\n            if (!val.e.shiftKey || val.data.type === NODE_SELECTION_TYPE)\n                return;\n            _this.currentClickNode = val.data;\n            // selectNodesIds\n            var hasExists = false;\n            if (_this.selectNodesIds.includes(val.data.id)) {\n                (_a = _this.lf.getNodeModelById(val.data.id)) === null || _a === void 0 ? void 0 : _a.setSelected(false);\n                hasExists = true;\n            }\n            // \n            var nodes = lf.getSelectElements(true).nodes;\n            _this.selectNodes = nodes;\n            if (_this.selectNodes.length === 1) {\n                if (!hasExists) {\n                    _this.addNodeSelection();\n                }\n                else {\n                    _this.updateNodeSelection();\n                }\n            }\n            else if (_this.selectNodes.length > 1) {\n                _this.updateNodeSelection();\n            }\n        });\n        lf.graphModel.addNodeMoveRules(function (model, deltaX, deltaY) {\n            _this.onNodeChange(lf, model);\n            /**\n             * \n             * resizemove\n             */\n            if (isNodeSelectionModel(model) && !model.isResize) {\n                var nodeIds = model.properties.node_selection_ids || [];\n                lf.graphModel.moveNodes(nodeIds, deltaX, deltaY, true);\n                return true;\n            }\n            return true;\n        });\n        lf.graphModel.addNodeResizeRules(function (model) {\n            if (!isNodeSelectionModel(model)) {\n                _this.onNodeChange(lf, model);\n            }\n            return true;\n        });\n    };\n    NodeSelection.pluginName = 'node-selection';\n    return NodeSelection;\n}());\nvar isNodeSelectionModel = function (node) {\n    return !!(node && node.type === NODE_SELECTION_TYPE);\n};\nexport default NodeSelection;\nexport { NodeSelection };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { RectNode, h } from '@logicflow/core';\nvar RectLabelNodeView = /** @class */ (function (_super) {\n    __extends(RectLabelNodeView, _super);\n    function RectLabelNodeView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    RectLabelNodeView.prototype.getLabelShape = function () {\n        var _a = this.props.model, x = _a.x, y = _a.y, width = _a.width, height = _a.height, properties = _a.properties;\n        return h('text', {\n            x: x - width / 2 + 5,\n            y: y - height / 2 + 16,\n            fontSize: 12,\n            fill: 'blue',\n        }, properties.moreText);\n    };\n    RectLabelNodeView.prototype.getShape = function () {\n        var _a = this.props.model, x = _a.x, y = _a.y, width = _a.width, height = _a.height;\n        var style = this.props.model.getNodeStyle();\n        // todo: basic-shape\n        return h('g', {}, [\n            h('rect', __assign(__assign({}, style), { fill: '#FFFFFF', x: x - width / 2, y: y - height / 2 })),\n            this.getLabelShape(),\n        ]);\n    };\n    return RectLabelNodeView;\n}(RectNode));\nexport { RectLabelNodeView };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { HtmlNodeModel } from '@logicflow/core';\nimport { cloneDeep, isNil } from 'lodash-es';\nvar VueNodeModel = /** @class */ (function (_super) {\n    __extends(VueNodeModel, _super);\n    function VueNodeModel() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    VueNodeModel.prototype.setAttributes = function () {\n        // DONE:  widthheightradius  0 \n        var _a = this.properties, width = _a.width, height = _a.height, radius = _a.radius;\n        if (!isNil(width)) {\n            this.width = width;\n        }\n        if (!isNil(height)) {\n            this.height = height;\n        }\n        if (!isNil(radius)) {\n            this.radius = radius;\n        }\n    };\n    VueNodeModel.prototype.getTextStyle = function () {\n        var _a = this.properties, _b = _a.refX, refX = _b === void 0 ? 0 : _b, _c = _a.refY, refY = _c === void 0 ? 0 : _c, textStyle = _a.textStyle;\n        var style = _super.prototype.getTextStyle.call(this);\n        //  transform  text \n        return __assign(__assign(__assign({}, style), (cloneDeep(textStyle) || {})), { transform: \"matrix(1 0 0 1 \".concat(refX, \" \").concat(refY, \")\") });\n    };\n    VueNodeModel.prototype.getNodeStyle = function () {\n        var style = _super.prototype.getNodeStyle.call(this);\n        var customNodeStyle = this.properties.style;\n        return __assign(__assign({}, style), (cloneDeep(customNodeStyle) || {}));\n    };\n    return VueNodeModel;\n}(HtmlNodeModel));\nexport { VueNodeModel };\nexport default VueNodeModel;\n//# sourceMappingURL=model.js.map","import { VueNodeView } from './view';\nimport { VueNodeModel } from './model';\nexport var vueNodesMap = {};\nexport function register(config, lf) {\n    var type = config.type, component = config.component, effect = config.effect, CustomNodeView = config.view, CustomNodeModel = config.model;\n    if (!type) {\n        throw new Error('You should specify type in config');\n    }\n    vueNodesMap[type] = {\n        component: component,\n        effect: effect,\n    };\n    lf.register({\n        type: type,\n        view: CustomNodeView || VueNodeView,\n        model: CustomNodeModel || VueNodeModel,\n    });\n}\n//# sourceMappingURL=registry.js.map","import { defineComponent, h, createApp, reactive, isVue3, Teleport, markRaw, Fragment, } from 'vue-demi';\nvar active = false;\nvar appInstances = new Map();\nvar appNodesMap = new Map(); // idvueApp\nvar items = reactive({});\nexport function connect(id, component, container, node, graph) {\n    if (active) {\n        if (graph.isMiniMap) {\n            createTeleportContainer(container, graph.flowId);\n        }\n        items[id] = markRaw(defineComponent({\n            render: function () {\n                return h(Teleport, { to: container }, [\n                    h(component, { node: node, graph: graph }),\n                ]);\n            },\n            provide: function () { return ({\n                getNode: function () { return node; },\n                getGraph: function () { return graph; },\n            }); },\n        }));\n    }\n}\nexport function disconnect(id, flowId) {\n    if (active) {\n        delete items[id];\n        if (appInstances.has(flowId)) {\n            var appNodeList = appNodesMap.get(flowId) || [];\n            var index = appNodeList.indexOf(id);\n            if (index > -1) {\n                appNodeList.splice(index, 1);\n                if (appNodeList.length === 0) {\n                    destroyTeleportContainer(flowId);\n                }\n                else {\n                    appNodesMap.set(flowId, appNodeList);\n                }\n            }\n        }\n    }\n}\nexport function isActive() {\n    return active;\n}\nexport function getTeleport() {\n    if (!isVue3) {\n        throw new Error('teleport is only available in Vue3');\n    }\n    active = true;\n    return defineComponent({\n        props: {\n            flowId: {\n                type: String,\n                required: true,\n            },\n        },\n        setup: function (props) {\n            return function () {\n                var children = [];\n                Object.keys(items).forEach(function (id) {\n                    // https://github.com/didi/LogicFlow/issues/1768\n                    // VueNodeViewconnectitemsitemsflowId\n                    // LogicFlowflowId + KeepAlive\n                    // itemsflowIdsetup()setup()items\n                    // items[0]Page1setup()items[0]Page2setup()items[0]\n                    // flowIditems[flowId:nodeId]\n                    // items[0]Page1Page2active=true/falseitems[0]\n                    if (id.startsWith(props.flowId)) {\n                        if (appInstances.has(props.flowId)) {\n                            var appNodeList = appNodesMap.get(props.flowId) || [];\n                            if (!appNodeList.includes(id)) {\n                                appNodeList.push(id);\n                                appNodesMap.set(props.flowId, appNodeList);\n                            }\n                        }\n                        children.push(items[id]);\n                    }\n                });\n                return h(Fragment, {}, children.map(function (item) { return h(item); }));\n            };\n        },\n    });\n}\n/**\n *  Teleport \n * @param container \n * @param flowId \n */\nexport function createTeleportContainer(container, flowId) {\n    if (!isVue3 || !flowId || !container || !active)\n        return;\n    //  Teleport \n    var TeleportContainer = getTeleport();\n    //  Teleport \n    if (appInstances.has(flowId)) {\n        return;\n    }\n    //  1. \n    var mountPoint = document.createElement('div');\n    container.appendChild(mountPoint);\n    //  2.  Vue \n    var app = createApp(TeleportContainer, { flowId: flowId });\n    app.mount(mountPoint);\n    appInstances.set(flowId, app);\n    appNodesMap.set(flowId, []);\n}\n/**\n *  Teleport \n * @param flowId \n */\nexport function destroyTeleportContainer(flowId) {\n    if (!isVue3 || !flowId || !active)\n        return;\n    var app = appInstances.get(flowId);\n    if (app) {\n        app.unmount();\n        appInstances.delete(flowId);\n        appNodesMap.delete(flowId);\n    }\n}\n//# sourceMappingURL=teleport.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isVue2, isVue3, createApp, h, Vue2 } from 'vue-demi';\nimport { HtmlNode } from '@logicflow/core';\nimport { vueNodesMap } from './registry';\nimport { isActive, connect, disconnect } from './teleport';\nvar VueNodeView = /** @class */ (function (_super) {\n    __extends(VueNodeView, _super);\n    function VueNodeView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    VueNodeView.prototype.getComponentContainer = function () {\n        return this.root;\n    };\n    VueNodeView.prototype.targetId = function () {\n        return \"\".concat(this.props.graphModel.flowId, \":\").concat(this.props.model.id);\n    };\n    VueNodeView.prototype.componentWillUnmount = function () {\n        _super.prototype.componentWillUnmount.call(this);\n        this.unmount();\n    };\n    VueNodeView.prototype.setHtml = function (rootEl) {\n        var el = document.createElement('div');\n        el.className = 'custom-vue-node-content';\n        this.root = el;\n        rootEl.appendChild(el);\n        this.renderVueComponent();\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    VueNodeView.prototype.confirmUpdate = function (_rootEl) {\n        // TODO: \n        // console.log('_rootEl', _rootEl)\n    };\n    VueNodeView.prototype.renderVueComponent = function () {\n        var _a;\n        this.unmountVueComponent();\n        var root = this.getComponentContainer();\n        var _b = this.props, model = _b.model, graphModel = _b.graphModel;\n        if (root) {\n            var component_1 = vueNodesMap[model.type].component;\n            if (component_1) {\n                if (isVue2) {\n                    var Vue = Vue2;\n                    this.vm = new Vue({\n                        el: root,\n                        render: function (h) {\n                            return h(component_1, {\n                                node: model,\n                                graph: graphModel,\n                            });\n                        },\n                        provide: function () {\n                            return {\n                                getNode: function () { return model; },\n                                getGraph: function () { return graphModel; },\n                            };\n                        },\n                    });\n                }\n                else if (isVue3) {\n                    if (isActive()) {\n                        connect(this.targetId(), component_1, root, model, graphModel);\n                    }\n                    else {\n                        this.vm = createApp({\n                            render: function () {\n                                return h(component_1, {\n                                    node: model,\n                                    graph: graphModel,\n                                });\n                            },\n                            provide: function () {\n                                return {\n                                    getNode: function () { return model; },\n                                    getGraph: function () { return graphModel; },\n                                };\n                            },\n                        });\n                        (_a = this.vm) === null || _a === void 0 ? void 0 : _a.mount(root);\n                    }\n                }\n            }\n        }\n    };\n    VueNodeView.prototype.unmountVueComponent = function () {\n        var root = this.getComponentContainer();\n        if (this.vm) {\n            isVue2 && this.vm.$destroy();\n            isVue3 && this.vm.unmount();\n            this.vm = null;\n        }\n        if (root) {\n            root.innerHTML = '';\n        }\n        return root;\n    };\n    VueNodeView.prototype.unmount = function () {\n        if (isActive()) {\n            disconnect(this.targetId(), this.props.graphModel.flowId);\n        }\n        this.unmountVueComponent();\n    };\n    return VueNodeView;\n}(HtmlNode));\nexport { VueNodeView };\nexport default VueNodeView;\n//# sourceMappingURL=view.js.map"],"names":["n","l","u","i","r","o","e","f","c","s","a","p","v","y","w","d","g","_","t","m","b","k","x","S","C","M","$","O","N","I","h","P","B","A","L","D","H","T","j","F","E","V","z","q","G","OBFUSCATED_ERROR","EMPTY_ARRAY","EMPTY_OBJECT","getNextId","globalState","fail","message","invariant","check","once","func","invoked","noop","unique","list","res","item","isObject","value","isPlainObject","proto","convertToMap","dataStructure","isES6Map","isObservableMap","map","key","addHiddenProp","object","propName","addHiddenFinalProp","isPropertyConfigurable","prop","descriptor","createInstanceofPredicate","name","clazz","thing","isES6Set","getPlainObjectKeys","enumerables","stringifyKey","toPrimitive","ownKeys","obj","$mobx","Atom","IDerivationState","listener","reportObserved","startBatch","propagateChanged","endBatch","isAtom","createAtom","onBecomeObservedHandler","onBecomeUnobservedHandler","atom","onBecomeObserved","onBecomeUnobserved","structuralComparer","deepEqual","defaultComparer","comparer","extendStatics","__extends","__","__assign","__values","__read","ar","error","__spread","mobxDidRunLazyInitializersSymbol","mobxPendingDecorators","enumerableDescriptorCache","nonEnumerableDescriptorCache","createPropertyInitializerDescriptor","enumerable","cache","initializeInstance","target","e_1","_a","decorators","keys","keys_1","keys_1_1","e_1_1","createPropDecorator","propertyInitiallyEnumerable","propertyCreator","decoratorArguments","decorator","applyImmediately","inheritedDecorators","quacksLikeADecorator","args","deepEnhancer","isObservable","observable","shallowEnhancer","isObservableObject","isObservableArray","isObservableSet","referenceEnhancer","newValue","refStructEnhancer","oldValue","createDecoratorForEnhancer","enhancer","propertyName","_decoratorTarget","decoratorArgs","initialValue","asObservableObject","defaultCreateObservableOptions","asCreateObservableOptions","deepDecorator","shallowDecorator","refDecorator","refStructDecorator","getEnhancerFromOptions","options","createObservable","arg2","arg3","observableFactories","incorrectlyUsedAsDecorator","ObservableValue","initialValues","createObservableArray","ObservableMap","ObservableSet","props","extendObservable","defaultDecorator","getDefaultDecoratorFromObjectOptions","base","proxy","createDynamicObservableObject","extendObservableObjectWithProperties","methodName","computedDecorator","instance","decoratorTarget","get","set","computedStructDecorator","computed","arg1","opts","ComputedValue","TraceMode","CaughtException","cause","isCaughtException","shouldCompute","derivation","prevAllowStateReads","allowStateReadsStart","prevUntracked","untrackedStart","obs","isComputedValue","untrackedEnd","allowStateReadsEnd","changeDependenciesStateTo0","checkIfStateModificationsAreAllowed","hasObservers","trackDerivedFunction","context","prevTracking","result","bindDependencies","prevObserving","observing","lowestNewObservingDerivationState","i0","dep","removeObserver","addObserver","clearObserving","untracked","action","prev","allowStateReads","currentActionId","nextActionId","functionNameDescriptor","createAction","actionName","fn","ref","executeAction","scope","runInfo","_startAction","err","_endAction","notifySpy","isSpyEnabled","startTime","prevDerivation","prevAllowStateChanges","allowStateChangesStart","allowStateChangesEnd","allowStateChanges","_super","equals","_this","hasInterceptors","change","interceptChange","hasListeners","notifyListeners","handler","registerInterceptor","fireImmediately","registerListener","isObservableValue","propagateMaybeChanged","propagateChangeConfirmed","wasSuspended","changed","track","firstTime","prevValue","autorun","prevU","MobXGlobals","mockGlobal","getGlobal","canMergeGlobalState","isolateCalled","global","isolateGlobalState","getGlobalState","node","queueForUnobservation","runReactions","logTraceInfo","lines","printDepTree","getDependencyTree","tree","depth","child","Reaction","onInvalidate","errorHandler","requiresObservable","enterBreakPoint","trace","MAX_REACTION_ITERATIONS","reactionScheduler","runReactionsHelper","allReactions","iterations","remainingReactions","isReaction","setReactionScheduler","baseScheduler","spy","dontReassignFields","namedActionDecorator","initializer_1","actionFieldDecorator","boundActionDecorator","applyToInstance","defineBoundAction","arg4","runInAction","view","runSync","reaction","reactionRunner","scheduler_1","createSchedulerFromOptions","isScheduled_1","run","expression","effect","effectAction","wrapErrorHandler","scheduler","isScheduled","nextValue","baseFn","interceptHook","hook","getAtom","cb","listenersKey","orig","hookListeners","configure","enforceActions","computedRequiresReaction","computedConfigurable","disableErrorBoundaries","reactionRequiresObservable","observableRequiresReaction","ea","properties","e_2","_b","keys2","keys_2","keys_2_1","resultDescriptor","e_2_1","property","nodeToDependencyTree","_isComputed","isComputed","isComputedProp","_isObservable","index","values","entries","values_1","key_1","adm","existingObservable","observe","propOrCb","cbOrFire","observeObservable","getAdministration","defaultOptions","toJSHelper","source","__alreadySeen","detectCycles","res_1","toAdd","res_2","res_3","res_4","res_5","toJS","_i","getAtomFromArgs","transaction","thisArg","getAdm","isPropertyKey","val","objectProxyTraps","interceptable","interceptors","idx","listenable","listeners","MAX_SPLICE_SIZE","arrayTraps","arrayExtensions","owned","ObservableArrayAdministration","newV","oldV","newLength","currentLength","newItems","oldLength","delta","deleteCount","length","notify","added","removed","items","clone","compareFn","funcName","dehancedValues","callback","element","accumulator","currentValue","isObservableArrayAdministration","ObservableMapMarker","initialData","entry","newEntry","hasKey","self","makeIterable","done","_c","_d","_e","other","e_3","e_4","replacementMap","orderedData","keysReportChangedCalled","deleted","e_3_1","_f","_g","_h","keyExisted","value_1","e_4_1","iter1","iter2","next1","next2","e_5","e_5_1","_a$1","ObservableSetMarker","callbackFn","nextIndex","observableValues","ObservableObjectAdministration","defaultEnhancer","exists","generateObservablePropConfig","propertyOwner","generateComputedPropConfig","oldObservable","owner","observablePropertyConfigs","computedPropertyConfigs","getAdministrationForComputedPropOwner","isObservableObjectAdministration","anyThing","getDebugName","named","toString","eq","aStack","bStack","type","className","unwrap","areArrays","aCtor","bCtor","has$1","iterator","getSelf","isStateless","component","Component","makeDisplayName","_ref","_ref$prefix","prefix","_ref$suffix","suffix","displayName","_typeof","classCallCheck","Constructor","createClass","defineProperties","protoProps","staticProps","inherits","subClass","superClass","possibleConstructorReturn","call","logger","_getGlobalState","state","patch","runMixinFirst","mixinFunc","reactiveMixin","isObjectShallowModified","next","initialName","skipRender","isForcingUpdate","makePropertyObservableReference","valueHolder","baseRender","isRenderingPending","initialRender","hasError","reactiveRender","exception","rendering","nextProps","nextState","observer","componentClass","_class","_temp","_Component","mixinLifecycleEvents","Observer","children","commonjsGlobal","createCommonjsModule","module","exports","factory","REACT_STATICS","KNOWN_STATICS","defineProperty","getOwnPropertyNames","getOwnPropertySymbols","getOwnPropertyDescriptor","getPrototypeOf","objectPrototype","hoistNonReactStatics","targetComponent","sourceComponent","blacklist","inheritedComponent","specialReactKeys","logger$1","Provider","stores","baseStores","_key","U","W","J","K","Q","X","nn","en","rn","un","on","cn","an","sn","__rest","Options","others","container","assign","defaultAnimationOffConfig","defaultAnimationOnConfig","setupAnimation","config","cloneDeep","merge","isIe","formatData","data","DEFAULT_VISIBLE_SPACE","ELEMENT_MAX_Z_INDEX","DEFAULT_GRID_SIZE","ElementState","ElementType","ModelType","EventType","OverlapMode","SegmentDirection","TextMode","LEFT_MOUSE_BUTTON_CODE","StepDrag","onDragStart","onDragging","onDragEnd","eventType","eventCenter","step","isStopPropagation","model","DOC","elementData","remainderX","remainderY","deltaX_1","deltaY_1","elementData_1","getNodeOutline","width","height","getLineOutline","edge","startPoint","endPoint","getPolylineOutline","points","pointsList","points2PointsList","bbox","getBBoxOfPoints","getBezierOutline","path","getBezierPoints","getEdgeOutline","getCrossPointOfLine","denominator","isInSegment","point","start","end","startX","startY","endX","endY","getVerticalPointOfLine","offset","verticalLength","pointPosition","angleOfHorizontal","angleOfPoints","len","__spreadArray","to","from","pack","isBboxOverLapping","b1","b2","filterRepeatPoints","pointsMap","id","getExpandedBBox","pointDirection","dx","dy","getExpandedBBoxPoint","expendBBox","direction","mergeBBox","minX","minY","maxX","maxY","xList","yList","getPointsFromBBox","isPointOutsideBBox","getBBoxXCrossPoints","getBBoxYCrossPoints","getBBoxCrossPointsByPoint","estimateDistance","p1","p2","costByPoints","heuristicCostEstimate","ps","pt","rebuildPath","pathPoints","pointById","cameFrom","currentId","removeClosePointFromOpenList","arr","isSegmentsIntersected","p0","p3","s1x","s1y","s2x","s2y","isSegmentCrossingBBox","pa","pb","pc","pd","getNextNeighborPoints","bbox1","bbox2","neighbors","pathFinder","goal","sBBox","tBBox","os","ot","closedSet","openSet","gScore","fScore","_loop_1","current","lowestFScore","neighbor","tentativeGScore","state_1","getBoxByOriginNode","getNodeBBox","pointFilter","pre","getPolylinePoints","sNode","tNode","sxBBox","txBBox","sPoint","tPoint","getSimplePoints","lineBBox","sMixBBox","tMixBBox","connectPoints","centerPoint","getLongestEdge","point1","point2","edgeLength","distance","newPoint1","newPoint2","newEdgeLength","isSegmentsInNode","startInNode","isInNode","endInNode","isSegmentsCrossNode","bothInNode","inNode","getCrossPointInRect","crossSegments","nodeBox","isCross","segmentDirection","currentPositionList","startDirection","endDirection","inStart","inEnd","onStart","isOnLine","onEnd","getBytesLength","word","totalLength","getAppendAttributes","appendInfo","startPosition","endPosition","getBezierControlPoints","sourceNode","targetNode","sExpendBBox","tExpendBBox","sNext","ePre","getBezierPoint","positionStr","getEndTangent","cp1","cp2","sampleCubic","getClosestPointOfPolyline","pointsPosition","minDistance","crossPoint","segments","pointXY","inSegment","currentDistance","pickEdgeConfig","pick","twoPointDistance","createEdgeGenerator","graphModel","generator","_sourceNode","_targetNode","currentEdge","getSvgTextSize","rows","rowsLength","fontSize","longestBytes","forEach","row","rowBytesLength","snapToGrid","gridSize","snapGrid","normalizePolygon","translatedPoints","bboxWidth","bboxHeight","scaleX","scaleY","scaleFactor","isPointInArea","leftTopX","leftTopY","rightBottomX","rightBottomY","isMultipleSelect","editConfigModel","multipleSelectKey","isMultiple","isVector","a1","a2","Vector","Base","v1","Point","cur","negative","Matrix","vectors","m1","column","tx","ty","TranslateMatrix","angle","RotateMatrix","sx","sy","ScaleMatrix","theta","getAnchors","anchors","targetNodeInfo","position","nodes","nodeInfo","isInNodeBbox","anchorInfo","currentNodeInfo","isNodeHigher","node1","node2","getClosestAnchor","closest","x1","y1","x2","y2","bBox","reverseRotatedPosition","getRectRadiusCircle","radius","getClosestRadiusCenter","radiusCenter","closestRadiusPoint","radiusDistance","getCrossPointWithCircle","crossLeft","crossRight","crossX","crossTop","crossBottom","crossY","inStraightLineOfRect","rect","isInStraight","rectBox","getCrossPointWithEllipse","rx","ry","getCrossPointWithPolygon","pickNodeConfig","nodeData","getNodeAnchorPosition","center","getHtmlTextHeight","style","dom","rowDom","getSvgTextWidthHeight","rowByteLength","formatAnchorConnectValidateData","getRandomValues","rnds8","rng","byteToHex","unsafeStringify","randomUUID","native","v4","buf","rnds","createUuid","uuidV4","rafIdMap","createRaf","rafId","eId","nId","cancelRaf","Text","fill","overflowMode","textWidth","attrs","toPairs","rowsLength_1","BaseType","modelType","renderHtmlText","tSpans","tSpanLineHeight","offsetY","_jsx","lineHeight","fontFamily","wrapPadding","textHeight","textRealWidth","textRealHeight","foreignObjectHeight","isEllipsis","Line","Rect","strokeWidth","Path","Circle","Ellipse","createRoundedPolygonPath","pointList","curr","v2","len1","len2","u1","u2","Polygon","Polyline","ResizeControlIndex","ResizeControl","event","edges","anchorItem","find","anchor","preNodeData","curNodeData","deltaX","deltaY","nodeModel","resizeInfo","pct","freezeWidth","freezeHeight","nextResizeInfo","PCTResizeInfo","sensitivity","deltaScale","combineDelta","spcWidth","spcHeight","handleResize","transformModel","restStyle","_jsxs","ResizeControlGroup","controlList","control","getNewCenter","newCenter","calculatePointAfterRotateAngle","radian","angleToRadian","radianToAngle","calculateWidthAndHeight","startRotatedTouchControlPoint","endRotatedTouchControlPoint","oldCenter","oldWidth","oldHeight","freezePoint","endZeroTouchControlPoint","zeroFreezePoint","newWidth","widthDx","newHeight","heightDy","nowFreezePoint","recalcRotatedResizeInfo","rotate","controlX","controlY","oldCenterX","oldCenterY","startZeroTouchControlPoint","recalcResizeInfo","forceProportional","aspectRatio","primaryDelta","updateEdgePointByAnchors","triggerResizeEvent","cancelCallback","minWidth","minHeight","maxWidth","maxHeight","isFreezeWidth","isFreezeHeight","nextSize","SAMPLING_FREQUENCY","normal","program","arrowDistance","crossByZ","dot","normalize","getThetaOfVector","degrees","radians","defaultTheme","radiusMode","darkMode","colorfulMode","themeModeMap","darkBackground","colorfulBackground","defaultBackground","backgroundModeMap","darkGrid","colorfulGrid","defaultGrid","gridModeMap","setupTheme","customTheme","themeMode","theme","addThemeMode","removeThemeMode","clearThemeMode","resetTheme","updateTheme","maxIndex","minIndex","getZIndex","getMinIndex","__decorate","desc","BaseEdgeModel","idGenerator","globalId","nodeId","adjustEdgeStartAndEnd","overlapMode","newMode","edgeText","edgeAnimation","edgeStyle","edgeAnimationStyle","arrow","stroke","outline","sourceAnchorId","sourceAnchors","targetAnchorId","targetAnchors","markerEnd","markerStart","styles","mode","edgeTextDraggable","edgeTextEdit","text","textConfig","isUndefined","draggable","editable","flag","additionStateData","zIndex","attributes","defaultZIndex","BezierEdgeModel","bezier","customStyle","pointsXSum_1","pointsYSum_1","LineEdgeModel","line","PolylineEdgeModel","polyline","textValue","anchorList","distanceX","startIndex","endIndex","start_1","pre_1","isInStartNode","isSegmentsCrossStartNode","distance1","distance2","end_1","next_1","isInEndNode","positionType","draggingPointList","sourceModelType","targetModelType","startPointDirection","startCrossPoint","inInnerNode","endPointDirection","endCrossPoint","dragInfo","BaseNodeModel","nodeTextDraggable","nodeTextEdit","isAllowResize","isNil","nodeText","textStyle","rotateControl","resizeControl","resizeOutline","_anchorInfo","anchorLine","sourceAnchor","targetAnchor","edgeId","rules","isAllPass","msg","rule","isAllowMoveX","isAllowMoveY","rules_1","rules_1_1","r1","anchorsOffset","el","anchorX","anchorY","anchorId","isIgnoreRule","moveX","moveY","rules_2","rules_2_1","nextProperties","updateKeys","preProperties","mapKeys","has","CircleNodeModel","circle","DiamondNodeModel","diamond","min","max","EllipseNodeModel","ellipse","PolygonNodeModel","nextPoints","polygon","RectNodeModel","styleRadius","TextNodeModel","HtmlNodeModel","silentModeConfig","allKeys","EditConfigModel","newConfig","isSilentMode","textDraggable","textMode","textEdit","conf","silentConfig","isBoolean","userConfig","WILDCARD","EventEmitter","evt","evKey","evts","eventArgs","events","wildcardEvents","doEmit","es","length_1","CanvasOverlay","ev","eX","eY","stopScrollGraph","stopZoomGraph","moveDistance","moveDistanceY","selectElements","SCALE_X","editConfigModel_1","pts","cx","cy","adjustEdge","adjustNodePosition","stopMoveGraph","isFrozenElement","dist","scale","pos","transform","isDragging","BezierAdjustAnchor","bezierModel","adjustAnchor","BezierAdjustOverlay","adjustLine","edgeList","edgeAdjust","BackgroundOverlay","background","Grid","size","visible","color","thickness","opacity","grid","SKEW_Y","SKEW_X","SCALE_Y","TRANSLATE_X","TRANSLATE_Y","matrixString","getGridOptions","ModificationOverlay","OutlineOverlay","hoverOutline","nodeSelectedOutline","nodeOutline","isHovered","isSelected","style_1","attributes_1","hoverStyle","edgeSelectedOutline","edgeOutline","SnaplineOverlay","snaplineModel","isShowHorizontal","isShowVertical","horizontalLine","verticalLine","ToolOverlay","tool","textEditElement","tools","components","ToolOverlayElement","lf","render","translateLimitsMap","TransformModel","directionX","directionY","zoomSize","newScaleX","newScaleY","targetX","targetY","limit","NestedTransformModel","parentTransform","parentScale","translateX","translateY","GraphModel","partial","edgeGenerator","animation","customTrajectory","resizeObserver","debounce","entries_1","entries_1_1","nMap","eMap","sortElement","elements","visibleElements","visibleLt","visibleRb","currentItem","textEditNode","textEditEdge","leftTopPoint","rightBottomPoint","wholeEdge","wholeNode","ignoreHideElement","areaElements","isElementInArea","domOverlayPosition","canvasOverlayPosition","lt","rb","bboxPointsList","inArea","startHtmlPoint","endHtmlPoint","isStartInArea","isEndInArea","graphData","currEdgeType_1","Model","edgeModel","nodeDragging","edgeDragging","edgeMode","nodeAsSource","nodeAsTarget","isIgnoreCheck","edgeData","isNodeSelected","newId","oldId","nodeTextMode","edgeTextMode","ModelClass","nodeConfig","originNodeData","eventData","nodeX","nodeY","originX","originY","edgeConfig","edgeOriginData","textPosition","newPoint","sourceNodeId","targetNodeId","multiple","selectElement","nodeIds","nodeIdMap","acc","sourceMoveDistance","targetMoveDistance","textDistanceX","textDistanceY","newNodeModel","edgeModels","newEdgeModel","formattedGrid","nodesX","nodesY","num","virtualRectWidth","virtualRectHeight","virtualRectCenterPositionX","virtualRectCenterPositionY","rootEl","containerWidth","containerHeight","verticalOffset","horizontalOffset","zoomRatioX","zoomRatioY","zoomRatio","SnaplineModel","epsilon","draggingNode","equal","horizontalY","draggingData","fakeNode","itemData","verticalX","snaplineInfo","horizontalSnapline","verticalSnapline","info","num1","num2","Graph","isContainerWidth","isContainerHeight","resizeWidth","resizeHeight","needUpdate","throttle","overlay","getView","View","dnd","Anchor","anchorData","autoExpand","clientX","clientY","nearBoundary","dragging","targetInfoId","isSourcePass","sourceMsg","isTargetPass","targetMsg","targetNodeModel","anchorShape","getAnchorIncomingEdge","getAnchorOutgoingEdge","sourceRuleResult","targetRuleResult","prevData","edgeAddable","RotateControlPoint","selectNodes","matrix","reduce","hasOwn","classNames","classes","arg","appendClass","parseValue","newClass","BaseText","curDeltaX","curDeltaY","attr","isDraggable","LineText","backgroundStyle","rectAttr","padding","allSides","vertical","horizontal","top_1","bottom_1","top_2","right","bottom","left","BaseNode","_j","_k","isOutCanvas","_l","_m","moveNodes","curTime","timeInterval","eventOptions","isRightClick","isDoubleClick","newProps","_anchorData","isHitable","isShowAnchor","allowRotate","rotatable","canRotate","allowResize","resizable","canResize","hideAnchors","restAttributes","nodeShapeInner","nodeShape","RectNode","CircleNode","PolygonNode","DiamondNode","EllipseNode","TextNode","HtmlNode","createRef","AdjustType","AdjustPoint","params","needRecoveryEdge","createEdgeInfo","pass","newTargetNode","rest","edgeInfo","oldEdgeData","newSourceNode","newSourceAnchor","newTargetAnchor","getAdjustPointShape","Arrow","arrowInfo","leftX","leftY","rightX","rightY","BaseEdge","hovered","eventName","polylineEdgeModel","hover","refY","refX","arrowType","strokeLinecap","strokeLinejoin","arrowPath","startArrowType","endArrowType","adjustEdgeStart","adjustEdgeEnd","isShowAdjustPoint","BezierEdge","isAnimation","arrowConfig","animationStyle","strokeDasharray","strokeDashoffset","animationName","animationDuration","animationIterationCount","animationTimingFunction","animationDirection","LineEdge","PolylineEdge","polylineModel","adjustEdgeMiddle","LineAppendList","pointsLen","append","this_1","dragDisable","Dnd","topEl","snapline","TextEditTool","inputText","autoStyle","x_1","y_1","commonAutoStyle","nodeTextWidth","finalTextWidth","range","sel","MultipleSelect","ctrlKey","newEvent","selectGraphData","models","defaultTools","TextEdit","Tool","toolName","fail$1","cond","deepFields","distinctDeepFields","deepFieldsIndistinct","deepFieldsDistinct","getAllMethodsAndProperties","PENDING","FULFILLED","REJECTED","caseImpl","handlers","fromPromise","origPromise","oldPromise","promise","reason","oldData","resolveBase","StreamListener","__decorate$1","RESERVED_NAMES","ViewModel","_getAdministration","additionalDescriptor","destination","buildPath","isRecursivelyObservable","deepObserve","entrySet","genericListener","processChange","parent","observeRecursively","unobserveRecursively","entry_1","ObservableGroupMap","groupBy","keyToName","_value","grouperItemInfo","itemIndex","groupByValue","groupArr","newGroupByValue","_r","newGroupArr","newGroupArrIndex","History","isEqual","last","preData","curData","window","document","undefined","_MAP","_KEYCODE_MAP","_SHIFT_MAP","_SPECIAL_ALIASES","_REVERSE_MAP","_addEvent","_characterFromEvent","character","_modifiersMatch","modifiers1","modifiers2","_eventModifiers","modifiers","_preventDefault","_stopPropagation","_isModifier","_getReverseMap","_pickBestAction","_keysFromString","combination","_getKeyInfo","_belongsTo","ancestor","Mousetrap","targetElement","_sequenceLevels","_resetTimer","_ignoreNextKeyup","_ignoreNextKeypress","_nextExpectedAction","_resetSequences","doNotReset","activeSequences","_getMatches","sequenceName","level","matches","deleteCombo","deleteSequence","_fireCallback","combo","sequence","callbacks","maxLevel","processedSequenceCallback","ignoreThisKeypress","_handleKeyEvent","_resetSequenceTimer","_bindSequence","_increaseSequence","nextAction","_callbackAndReset","isFinal","wrappedCallback","_bindSingle","combinations","initialEventTarget","documentMousetrap","method","selected","translateNodeData","isEmpty","label","translateEdgeData","transformNodeData","nextText","transformEdgeData","nextStartPoint","nextEndPoint","newPointsList","TRANSLATION_DISTANCE","CHILDREN_TRANSLATION_DISTANCE","initDefaultShortcut","graph","keyboard","keyboardOptions","guards","enabledClone","addElements","Keyboard","shortcuts","isArray","force","pluginFlag","LogicFlow","initOptions","LFOptions","lfContainer","isObserverView","registerParam","_View.BaseEdge","_Model.BaseEdgeModel","_View.BaseNode","_Model.BaseNodeModel","_View.RectNode","_Model.RectNodeModel","_View.CircleNode","_Model.CircleNodeModel","_View.PolygonNode","_Model.PolygonNodeModel","_View.TextNode","_Model.TextNodeModel","_View.LineEdge","_Model.LineEdgeModel","_View.DiamondNode","_Model.DiamondNodeModel","_View.PolylineEdge","_Model.PolylineEdgeModel","_View.BezierEdge","_Model.BezierEdgeModel","_View.EllipseNode","_Model.EllipseNodeModel","_View.HtmlNode","_Model.HtmlNodeModel","ViewClass","vClass","ViewComp","defaultElements","isEnableDelete","isEnableClone","fakeNodeModel","results","toFront","currentSnapGrid","coordinate","focusOnArgs","graphRawData","extension","pluginName","disabledPlugins","extensionsAddByUse","extensions","ext","indexOf","pluginName_1","install","render_1","ExtensionCtor","extensionIns","extensionName","extensionInstance","LogicFlow$1","mobxObserver","StartEventConfig","EndEventConfig","ExclusiveGatewayConfig","ServiceTaskConfig","UserTaskConfig","IDS","ids","getBpmnId","StartEventModel","notAsTarget","StartEventView","EndEventModel","notAsSource","EndEventView","outCircle","SequenceFlowModel","SequenceFlowView","ExclusiveGatewayModel","ExclusiveGatewayView","ServiceTaskModel","ServiceTaskView","UserTaskModel","UserTaskView","IDs","addSpace","handleAttributes","tk","escapeXml","getAttributes","tmp","tn","toXml","frontSpace","str","children_1","lfJson2Xml","xmlStr","XML","xml","root","xmldom","url","myOpt","__this","__func","__save","trans","req","json","elem","bool","retVal","cnt","textOnly","nType","hash","counts","jattr","jelem","array","out","lfXml2Json","xmlData","BpmnElements","defaultAttrs","defaultRetainedFields","unescapeXml","toXmlJson","retainedFields","fields","ToXmlJson","xmlJson","toNormalJson","convertLf2ProcessData","bpmnProcessData","nodeMap","processNode","sequenceFlow","convertLf2DiagramData","bpmnDiagramData","diagramData","shapeConfig","BpmnAdapter","convertBpmn2LfData","bpmnData","definitions","process_1","diagram","plane_1","edgesRaw","bpmnEdges","getLfEdges","shapesRaw","shapes","getLfNodes","shapeValue","shape","getNodeConfig","processValue","textBounds","edgeValue","getEdgeConfig","textVal","textLength_1","textSpan","waypoints","first","centerX","centerY","BpmnXmlAdapter","outData","safe","genBpmnId","LogicFlowUtil.StepDrag","Control","resize","beforeNode","afterNode","oldNodeSize","newNodeSize","sourceEdges","targetEdges","ControlGroup","box","EllipseResizeModel","nodeSize","turnOn","ResizePCT","ResizeBasis","ScaleLimit","EllipseResizeView","DiamondResizeModel","DiamondResizeView","HtmlResizeModel","HtmlResizeView","RectResizeModel","RectResizeView","defaultWidth","defaultHeight","DEFAULT_BOTTOM_Z_INDEX","GroupNodeModel","isFolded","allEdges","elementId","foldStatus","lastFoldStatus","incomingEdges","outgoingEdges","targetNodeIdGroup","sourceNodeIdGroup","isAllow","childId","_nodeData","GroupNode","getAddableOutlineStyle","foldX","foldY","iconIcon","sequenceFlowFactory","isDefaultFlow","BoundaryEventConfig","IntermediateEventConfig","ParallelGatewayConfig","InclusiveGatewayConfig","SubProcessConfig","__this_1","__func_1","__save_1","tmpKey","defaultAttrsForInput","defaultRetainedProperties","defaultExcludeFields","mergeInNOutObject","sourceKeys","fnIn","fnOut","defaultTransformer","expressionType","condition","timerType","timerValue","definitionId","typeFunc","definitionType","convertNormalToXml","retainedAttrsFields","excludeFields","transformer","retainedAttrsSet","excludeFieldsSet","output_1","newPath","convertXmlToNormal","xmlJsonData","nodeType","otherProps","setMap","edgesInSubProcess","_item","incomingSet","outgoingSet","out_i_1","BPMNBaseAdapter","ignoreType","eleMap","subProcessProcessing","props_1","fn_1","attachedToRef","attachedToNode","ignoreFields","filterSet","tmpPath","mapping","mapping_1","nameMapping_1","mappingName","BPMNAdapter","rotatePointAroundCenter","xPrime","yPrime","xDoublePrime","yDoublePrime","xNew","yNew","DynamicGroupNode","curGroup","transformWithContainer","isRestrict","childrenPositionMap","center_1","groupWidth_1","groupHeight_1","childDx","childDy","groupModel","isCollapsed","showResizeControl","groupAddable","iconPath","operateIcon","DEFAULT_GROUP_EXPAND_WIDTH","DEFAULT_GROUP_EXPAND_HEIGHT","DEFAULT_GROUP_COLLAPSE_WIDTH","DEFAULT_GROUP_COLLAPSE_HEIGHT","DynamicGroupNodeModel","collapsedWidth","collapsedHeight","collapsible","autoResize","autoToFront","expandWidth","expandHeight","moveDeltaX","moveDeltaY","collapse","nextCollapseState","allRelatedEdges","childrenArr","collapseStatus","lastCollapseStatus","virtualEdge","targetNodeGroup","sourceNodeGroup","groupData","isBoundsInGroup","bounds","group","isAllowMoveTo","groupBounds","allowMoveMinX","allowMoveMinY","allowMoveMaxX","allowMoveMaxY","dynamicGroup","DEFAULT_TOP_Z_INDEX","DynamicGroup","selectedNodes","preGroupId","group_1","isAllowAppendIn","groupId","targetGroup","groups","sortBy","filter","preZIndex_1","childModel","newX","newY","hasChange","newGroupBounds","newGroupX","newGroupY","newGroupWidth","newGroupHeight","count","topZIndexGroup","maxZIndex","childMaxZIndex","currNodeMaxZIndex","allNodes","allGroups","newNodeData","allChildNodes","edgesDataArr","childNode","childNodeChildren","childNodeData","newNodeConfig","tempChildNode","childNodes","edgesData","edgesInnerGroup","edgesDataInnerGroup","sourceId","targetId","newEdgeConfig","groupMinX","groupMinY","groupMaxX","groupMaxY","childrenArray","childBounds","selectedEdges","originId","Label","selection","_label","elementLabel","findIndex","targetElem","content","isEditing","labelWidth","textOverflowMode","maxLabelWidth","containerStyle","LogicFlowUtil.createUuid","LabelModel","slicedToArray","sliceIterator","_arr","_n","_s","needle","pad","colorNames","printNum","decs","Color","that","parseString","input","_input$match$map","_input$match$map2","_input$match$map3","_input$match$map4","_a2","alpha","rgb","vals","mults","suff","hsl","hex","rgba","_ref2","_ref3","_ref4","hue2rgb","EventBucket","isMatch","parseHTML","htmlString","div","dragTrack","eventBucket","area","clamp","onMove","starting","relX","relY","onMouse","button","onTouch","BG_TRANSP","HUES","EVENT_KEY","EVENT_CLICK_OUTSIDE","EVENT_TAB_MOVE","selector","stopEvent","onKey","bucket","stop","Picker","settings","transfer","skipKeys","col","openProxy","toFocus","doHide","knownTime","open","silent","flags","ex","hsla","colour","toggled","html","wrapper","_this2","addEvent","editInput","popupCloseProxy","timeKeeper","onDoneProxy","elm","popup","cssClass","cssHue","cssHSL","cssHSLA","uiH","uiSL","uiA","thumbH","thumbSL","thumbA","posX","posY","opaque","transp","bg","format","actionIf","actionElse","toVisible","displayStyle","toggle","OBJECT","FUNCTION","UNDEFINED","domRangeProperties","domRangeMethods","textRangeProperties","textRangeMethods","isHostMethod","isHostObject","isHostProperty","createMultiplePropertyTest","testFunc","areHostMethods","areHostObjects","areHostProperties","isTextRange","getBody","doc","modules","isBrowser","util","api","consoleLog","alertOrLog","shouldAlert","warn","extend","deep","optionsParam","defaults","toArray","slice","arrayLike","addListener","initListeners","getErrorDesc","init","testRange","implementsDomRange","implementsTextRange","body","errorMessage","moduleName","Module","deprecationNotice","deprecated","replacement","createAliasForDeprecatedMethod","shimListeners","shim","win","dependencies","initializer","requiredModuleNames","requiredModule","createModule","initFunc","newModule","RangePrototype","SelectionPrototype","UNDEF","textNode","arrayContains","isHtmlNamespace","ns","parentElement","getNodeIndex","getNodeLength","getCommonAncestor","ancestors","isAncestorOf","descendant","selfIsAncestor","isOrIsAncestorOf","getClosestAncestorIn","isCharacterDataNode","isTextOrCommentNode","insertAfter","precedingNode","nextNode","splitDataNode","positionsToPreserve","newNode","getDocument","getWindow","getIframeDocument","iframeEl","getIframeWindow","isWindow","getContentDocument","getRootContainer","comparePoints","nodeA","offsetA","nodeB","offsetB","nodeC","childA","childB","crashyTextNodes","isBrokenNode","inspectNode","idAttr","fragmentFromNodeChildren","fragment","getComputedStyleProperty","createTestElement","contentEditable","bodyFirstChild","removeNode","NodeIterator","createIterator","DomPosition","DOMException","codeName","isNonTextPartiallySelected","getRangeDocument","getRangeRoot","getBoundaryBeforeNode","getBoundaryAfterNode","insertNodeAtPosition","firstNodeInserted","rangesIntersect","rangeA","rangeB","touchingIsIntersecting","assertRangeValid","startComparison","endComparison","cloneSubtree","partiallySelected","frag","subIterator","iterateSubtree","rangeIterator","iteratorState","it","subRangeIterator","deleteSubtree","extractSubtree","getNodesInRange","nodeTypes","filterNodeTypes","regex","filterExists","RangeIterator","sc","ec","inspect","clonePartiallySelectedTextNodes","subRange","Range","startContainer","startOffset","endContainer","endOffset","updateBoundaries","beforeAfterNodeTypes","rootContainerNodeTypes","readonlyNodeTypes","insertableNodeTypes","surroundNodeTypes","createAncestorFinder","getDocumentOrFragmentContainer","getReadonlyAncestor","getDocTypeNotationEntityAncestor","getElementAncestor","assertNoDocTypeNotationEntityAncestor","allowSelf","assertValidNodeType","invalidTypes","assertValidOffset","assertSameDocumentOrFragment","assertNodeNotReadOnly","assertNode","isValidOffset","isRangeValid","styleEl","htmlParsingConforms","createContextualFragment","fragmentStr","splitRangeBoundaries","so","eo","startEndSame","rangeToHtml","rangeProperties","s2s","s2e","e2e","e2s","n_b","n_a","n_b_a","n_i","how","prefixA","prefixB","boundariesInvalid","textParts","nodeIndex","intersectionRange","unionRange","allowPartial","intersection","nodeRange","textNodes","lastTextNode","containerNode","preSelectionRange","bookmark","charIndex","nodeStack","foundStart","nextCharIndex","copyComparisonConstantsToObject","copyComparisonConstants","constructor","createRangeContentRemover","remover","boundaryUpdater","boundary","returnValue","createPrototypeRange","createBeforeAfterNodeSetter","isBefore","isStart","setRangeStart","setRangeEnd","mergeForward","sibling","mergeBackward","nodeLength","normalizeStart","endNode","startNode","parentNode","updateCollapsedAndCommonAncestor","r2","WrappedRange","WrappedTextRange","DomRange","rangeProto","updateRangeProperties","updateNativeRange","startMoved","endMoved","nativeRangeDifferent","testTextNode","oppositeName","range2","getTextRangeContainerElement","textRange","parentEl","startEl","endEl","startEndContainer","textRangeIsCollapsed","getTextRangeBoundaryPosition","wholeRangeContainerElement","startInfo","workingRange","containerElement","workingNode","comparison","workingComparisonType","previousNode","boundaryPosition","boundaryNode","childNodeCount","tempRange","rangeLength","createBoundaryTextRange","boundaryParent","boundaryOffset","nodeIsDataNode","startBoundary","rangeContainerElement","rangeToTextRange","startRange","endRange","globalObj","BOOLEAN","NUMBER","getNativeSelection","selectionIsCollapsed","features","CONTROL","rangesEqual","isDirectionBackward","dir","WrappedSelection","getWinSelection","winParam","getDocSelection","winSelectionIsBackward","backward","implementsWinGetSelection","implementsDocSelection","useDocumentSelection","nativeSel","testSelection","selectionHasAnchorAndFocus","selectionHasExtend","selectionHasSetBaseAndExtent","selectionHasRangeCount","selectionSupportsMultipleRanges","collapsedNonEditableSelectionsSupported","addRangeBackwardToNative","nativeSelection","getNativeRange","originalSelectionRangeCount","selectionHasMultipleRanges","originalSelectionRanges","originalSelectionBackward","testEl","chromeMatch","implementsControlRange","testControlRange","updateAnchorAndFocusFromRange","anchorPrefix","focusPrefix","updateAnchorAndFocusFromNativeSelection","updateEmptySelection","updateType","nativeRange","rangeContainsSingleElement","rangeNodes","getSingleElementFromRange","updateFromTextRange","wrappedRange","updateControlSelection","controlRange","addRangeToControlSelection","rangeElement","newControlRange","getSelectionRangeAt","docSelection","deleteProperties","cachedRangySelections","actOnCachedSelection","cached","getSelection","docSel","selProto","createControlSelection","ranges","addRangeBackward","previousRangeCount","clonedNativeRange","selectionIsBackward","rangeCount","refreshSelection","checkForChanges","oldRanges","oldAnchorNode","oldAnchorOffset","removeRangeManually","rangeTexts","assertNodeInSameDocument","anchorNode","anchorOffset","focusNode","focusOffset","isBackwards","createStartOrEndSetter","selRanges","rangeBookmark","rangeHtmls","rangeInspects","focus","docReady","loadHandler","require$$0","rangy","contains","defaultTagName","createElementNSSupported","each","trim","classNameContainsClass","fullClassName","hasClass","classNameSupported","elClass","addClass","removeClass","replacer","matched","whiteSpaceBefore","whiteSpaceAfter","getClass","sortClassName","getSortedClassName","haveSameClasses","el1","el2","hasAllClasses","canTextBeStyled","movePosition","oldParent","oldIndex","newParent","newIndex","posNode","posOffset","newOffset","movePositionWhenRemovingNode","movePreservingPositions","removePreservingPositions","moveChildrenPreservingPositions","replaceWithOwnChildrenPreservingPositions","rangeSelectsAnyText","textNodeRange","getEffectiveTextNodes","elementsHaveSameNonClassAttributes","attr1","attr2","elementHasNonClassAttributes","exceptions","attrName","isEditableElement","isEditingHost","isEditable","inlineDisplayRegex","isNonInlineElement","htmlNonWhiteSpaceRegex","isUnrenderedWhiteSpaceNode","cssWhiteSpace","getRangeBoundaries","positions","updateRangesFromBoundaries","isSplitPoint","splitNodeAt","descendantNode","descendantOffset","splitAtStart","descendantIndex","newChildIndex","newNodeIndex","areElementsMergeable","createAdjacentMergeableTextNodeGetter","forward","siblingPropName","checkParentElement","adjacentNode","adjacentNodeChild","getPreviousMergeableTextNode","getNextMergeableTextNode","Merge","firstNode","firstTextNode","firstTextNodeIndex","combinedTextLength","optionProperties","attrNamesForProperties","ClassApplier","tagNames","applier","elementPropertiesFromOptions","elementAttributes","attrValue","createCopy","elStyle","elProps","elPropsStyle","propValue","elPropValue","isUndo","lastNode","merges","currentMerge","rangeStartNode","rangeEndNode","rangeStartOffset","rangeEndOffset","precedingTextNode","nextTextNode","textNodeParent","nodesToRemove","rangesToPreserve","ancestorWithClass","ancestorRange","emptyElements","createClassApplier","ColorPickerButton","MediumEditor","LabelOverlay","curExtension","labels_1","labelConfig","labelMap","DndPanel","shapeList","_lf","domContainer","shapeItem","MiniMap","top","showEdge","offsetX","boundsInit","isShowHeader","isShowCloseIcon","leftPosition","topPosition","rightPosition","bottomPosition","headerTitle","miniMapWrap","miniMapContainer","header","close","elementAreaBounds","nodeLeft","nodeRight","nodeTop","nodeBottom","reRender","viewMap","modelMap","minimapViewMap","realWidth","realHeight","realWidthScale","realHeightScale","innerStyle","viewStyle","SelectionSelect","time","isClick","curStartPoint","curEndPoint","elements_1","dynamicGroup_1","nonGroupedElements_1","selectedElements","selectedIds_1","elementGroup","exclusive","isWholeEdge","isWholeNode","lastEndPoint","lastEvent","directionMap","all","getMidPoints","orientation","mid1","mid2","getPartialPath","dir1","dir2","getCurvedEdgePath","CurvedEdge","pointsStr","CurvedEdgeModel","NodeSelectionView","NodeSelectionModel","nodesIds","childIds","childModels","usedGroupId","isNodeSelectionModel","begin","NODE_SELECTION_TYPE","NodeSelection","nodeSelection","rawData","oldIds","nodeSelectionIds_1","connectedSelections","hasExists","RectLabelNodeView","VueNodeModel","customNodeStyle","vueNodesMap","register","CustomNodeView","CustomNodeModel","VueNodeView","active","appInstances","appNodesMap","reactive","connect","createTeleportContainer","markRaw","defineComponent","Teleport","disconnect","flowId","appNodeList","destroyTeleportContainer","isActive","getTeleport","Fragment","TeleportContainer","mountPoint","app","createApp","_rootEl","component_1"],"mappings":"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AI,QAAS,GAAI,QAAS,IAAK,OAAQ,IAAK,MAAO,IAAK,OAAQ,EAAG,OAAQ,IAAK,SAAU,KAAM,SAAU,IAAK,SAAU,IAAK,SAAU,IAAK,QAAS,KAAM,SAAU,GAAI,OAAQ,IAAK,SAAU,KAAM,MAAO,KAAM,SAAU,GAAI,QAAS,GAAI,OAAQ,IAAK,QAAS,KAAM,SAAU,IAAK,SAAU,KAAM,OAAQ,KAAM,SAAU,KAAM,QAAS,KAAM,SAAU,KAAM,MAAO,KAAM,SAAU,GAAI,OAAQ,KAAM,SAAU,KAAM,SAAU,KAAM,SAAU,KAAM,SAAU,KAAM,QAAS,IAAK,QAAS,KAAM,OAAQ,KAAM,QAAS,IAAK,SAAU,IAAK,SAAU,KAAM,SAAU,KAAM,MAAO,IAAK,SAAU,IAAK,MAAO,KAAM,SAAU,GAAI,QAAS,EAAG,MAAO,IAAK,SAAU,GAAI,SAAU,IAAK,OAAQ,KAAM,SAAU,IAAK,QAAS,KAAM,OAAQ,IAAK,SAAU,GAAI,QAAS,GAAI,IAAK,IAAK,QAAS,IAAK,SAAU,IAAK,MAAO,KAAM,QAAS,KAAM,MAAO,GAAI,SAAU,IAAK,QAAS,IAAK,SAAU,KAAM,QAAS,IAAK,SAAU,KAAM,SAAU,KAAM,OAAQ,KAAM,OAAQ,KAAM,SAAU,KAAM,SAAU,KAAM,SAAU,KAAM,SAAU,GAAI,KAAM,EAAG,OAAQ,KAAM,SAAU,GAAI,QAAS,KAAM,MAAO,IAAK,OAAQ,IAAK,SAAU,IAAK,OAAQ,KAAM,SAAU,KAAM,SAAU,IAAK,SAAU,KAAM,SAAU,GAAI,QAAS,IAAK,SAAU,KAAM,SAAU,KAAM,SAAU,IAAK,QAAS,KAAM,OAAQ,KAAM,OAAQ,IAAK,OAAQ,GAAI,OAAQ,EAAG,QAAS,EAAG,QAAS,IAAK,SAAU,IAAK,MAAO,KAAM,MAAO,IAAK,SAAU,KAAM,SAAU,KAAM,SAAU,KAAM,SAAU,KAAM,SAAU,KAAM,OAAQ,KAAM,OAAQ,GAAI,SAAU,IAAK,OAAQ,GAAI,SAAU,KAAM,SAAU,IAAK,QAAS,GAAI,SAAU,EAAG,KAAM,IAAK,SAAU,GAAI,SAAU,KAAM,SAAU,IAAK,QAAS,IAAK,QAAS,KAAM,SAAU,IAAK,MAAO,IAAK,SAAU,IAAK,SAAU,IA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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149]}