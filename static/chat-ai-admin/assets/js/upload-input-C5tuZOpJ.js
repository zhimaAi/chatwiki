import{_ as k,e as i}from"../../index-BokOG9ZU.js";import{I as w}from"./InboxOutlined-DVZs2m1b.js";import{U as y}from"./index-CAuXv0Mv.js";import{b as F,r as L,w as M,L as v,M as f,j as _,Q as U,V as s,u as T,F as S,a1 as B,Y as N,a2 as V,a3 as j,a4 as z}from"./vue-chunks-XoCroLmQ.js";const c=l=>(j("data-v-b4a65930"),l=l(),z(),l),A={class:"ant-upload-drag-icon"},D=c(()=>s("div",{class:"ant-upload-text"},"点击或将文件拖拽到这里上传",-1)),E={class:"ant-upload-hint"},R=c(()=>s("p",null,"一次只能上传一个文档，单个文件不超过100M",-1)),W=c(()=>s("span",null,"支持文件类型：",-1)),O={__name:"upload-input",props:{value:{type:Array,default:()=>[]},maxCount:{type:Number,default:1}},emits:["change","update:value"],setup(l,{emit:h}){const p=h,t=l,u=["pdf","docx","txt","md","xlsx","csv","html"],x=F(()=>u.map(e=>`.${e}`).join(",")),a=L([]);M(()=>t.value,e=>{a.value=e},{immediate:!0});let n=null;const g=()=>{if(a.value.length>=t.maxCount)return i.error("一次最多上传"+t.maxCount+"个文件")},d=()=>{a.value.length>t.maxCount&&i.error("一次最多上传"+t.maxCount+"个文件");let e=[...a.value];p("change",e),p("update:value",e)},C=e=>{b(e),d()},b=e=>{for(let o=0;o<a.value.length;o++)if(a.value[o].uid===e.uid){a.value.splice(o,1);break}},I=e=>{const o=e.name.split(".").pop();return u.includes(o.toLowerCase())?e.size/1024/1024<100?(a.value=[...a.value||[],e],a.value.length>t.maxCount&&(a.value=a.value.splice(0,t.maxCount)),n&&clearTimeout(n),n=setTimeout(()=>{d(),clearTimeout(n)},50),!1):(i.error("文件大小不能超过100M"),!1):(i.error("不支持的文件格式"),!1)};return(e,o)=>{const m=y;return v(),f("div",{class:V(["upload-input",{disabled:a.value.length>=t.maxCount}])},[_(m,{"file-list":a.value,name:"file",multiple:!0,"max-count":t.maxCount,accept:x.value,beforeUpload:I,onRemove:C,class:"ant-upload-drag"},{default:U(()=>[s("div",A,[_(T(w))]),D,s("div",E,[R,s("p",null,[W,(v(),f(S,null,B(u,r=>s("span",{class:"ant-upload-hint-ext",key:r},"."+N(r),1)),64))])])]),_:1},8,["file-list","max-count","accept"]),s("div",{class:"disabled-mask",onClick:g})],2)}}},G=k(O,[["__scopeId","data-v-b4a65930"]]);export{G as U};
