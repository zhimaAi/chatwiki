import{_ as O}from"./cu-scroll-RG6yxhtf.js";import{a3 as T,d as x,z as v,q as U,D as q,N as n,j as _,U as m,G as N,a2 as Y,O as i,X as l,u as E,a6 as d,S as H,_ as y,F as w}from"./vue-chunks-BRsu9_To.js";import{b as V,h as j,dG as G,bA as A,n as J,M as z,dH as K,k as b,dI as P}from"../../index-M_xDbIir.js";import"./index-UA7y0weg.js";import{I as Q}from"./Input-Bx6Hhp2b.js";import{S as X}from"./SearchOutlined-KUcJKUZw.js";import{_ as W}from"./index-BF4PinvW.js";import{a as Z}from"./index-Bg1_T7h9.js";import{_ as ee}from"./index-CSIZCO5e.js";import"./pull-up.esm-D94Swpvl.js";import"./observe-dom.esm-CyCedSm-.js";import"./axios-Dq7h7Pqt.js";import"./qs-BrxkIg-9.js";import"./crypto-js-ClNpte_9.js";import"./dayjs-B6IotFah.js";import"./FormItemContext-DRzYyKbC.js";import"./index-Btmz2D3B.js";import"./Search-w33R1D1l.js";import"./isPlainObject-A-SljaBF.js";import"./inputProps-DsSGhBt6.js";import"./TextArea-C57yjED6.js";import"./index-CMIXnI2Z.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./Password-5njtOUlo.js";import"./index-D8nD-csV.js";import"./List-DKTpjnke.js";import"./collapseMotion-Brd6xpAT.js";import"./CaretDownFilled-BzxZQg7Y.js";import"./index-SuSZ4kHz.js";import"./responsiveObserve-CRSSr9-w.js";import"./index-D_6sH2t0.js";import"./LeftOutlined-DbHJ8blF.js";import"./RightOutlined-og3IpneX.js";import"./index-khLftDou.js";import"./Trigger-CkoSoTBd.js";import"./slide-DzpBPoRp.js";import"./useMergedState-C0iIHNGF.js";import"./DownOutlined-CI2wWtcJ.js";import"./CheckOutlined-DVulUWsT.js";import"./move-DD64vPeJ.js";import"./index-B0RyY99D.js";import"./colors-C56HAaAp.js";import"./index-Bn-th77D.js";import"./Checkbox-pA5GUfu7.js";import"./index-D7wU2qJF.js";import"./dropdown-DCrM-GKY.js";import"./Dropdown-Dh4cjnmT.js";import"./index-B3CPYV6x.js";import"./shallowequal-C0xnIuy8.js";import"./index-Dob-Z8xa.js";import"./RadioButton-Bb2kU0Fd.js";import"./CaretDownOutlined-C4FFiOW0.js";const te={class:"details-library-page"},oe={class:"list-tools"},ae={class:"tools-items"},ie={class:"list-content"},se={key:0,class:"doc-name-td"},ne=["onClick"],re={key:0},le={key:1},pe={key:0},ce={key:1},_e=["onClick"],me=["onClick"],de={__name:"recycle-bin-record",setup(ue){const C=j(),S=T();Y();const u=S.query,f=x(!1);v({selectedRowKeys:[]});const h=x([]),t=v({library_id:u.id,file_name:void 0,page:1,size:10,total:0}),I=[{title:"文档名称",dataIndex:"file_name",key:"file_name",width:300},{title:"文档格式",dataIndex:"file_ext",key:"file_ext",width:100},{title:"文档大小",dataIndex:"file_size_str",key:"file_size",width:100},{title:"分段",dataIndex:"paragraph_count",key:"paragraph_count",width:120},{title:"删除时间",dataIndex:"delete_time",key:"delete_time",width:150},{title:"操作",dataIndex:"action",key:"action",fixed:"right",width:100}],R=e=>{t.page=e.current,t.size=e.pageSize,c()},g=()=>{t.page=1,c()},c=()=>{let e=N(t);f.value=!0,G(e).then(o=>{let s=o.data.list||[];s.forEach(r=>{r.file_size_str=A(r.file_size),r.delete_time=r.delete_time>0?J(r.delete_time*1e3).format("YYYY-MM-DD HH:mm"):"--"}),h.value=s,t.total=+o.data.total||0}).finally(()=>{f.value=!1})},D=e=>{let o=`/manage/downloadLibraryFile?id=${e.id}&token=${C.getToken}`;var s=document.createElement("a");s.href=o,s.style.display="none",s.click()},F=e=>{z.confirm({title:"恢复确认？",content:`确认恢复该文档【${e.file_name}】`,okText:"确定",onOk(){K({id:e.id}).then(o=>{b.success("恢复成功"),c()})}})},L=e=>{z.confirm({title:"彻底删除确认？",content:"文件删除后无法恢复，请确认是否删除?",okText:"确定",onOk(){P({id:e.id}).then(o=>{b.success("删除成功"),c()})}})};return U(()=>{u.page&&(t.page=+u.page),c()}),q(()=>{}),(e,o)=>{const s=W,r=Q,$=ee,B=Z,M=O;return i(),n("div",te,[_(M,{scrollbar:!1},{default:m(()=>[_(s,{"show-icon":"",message:"回收站内的文档依然占用账户资源，请及时清理无用数据"}),l("div",oe,[l("div",ae,[_(r,{style:{width:"282px"},value:t.file_name,"onUpdate:value":o[0]||(o[0]=p=>t.file_name=p),placeholder:"请输入文档名称搜索",onChange:g},{suffix:m(()=>[_(E(X),{onClick:g,style:{color:"rgba(0, 0, 0, 0.25)"}})]),_:1},8,["value"])])]),l("div",ie,[_(B,{columns:I,"data-source":h.value,scroll:{x:1e3},loading:f.value,"row-key":"id",pagination:{current:t.page,total:t.total,pageSize:t.size,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"]},onChange:R},{bodyCell:m(({column:p,record:a})=>[p.key==="file_name"?(i(),n("div",se,[l("span",null,y(a.file_name),1),l("a",{style:{"margin-left":"2px"},onClick:k=>D(a)},"下载",8,ne)])):d("",!0),p.key==="file_size"?(i(),n(w,{key:1},[a.doc_type==3?(i(),n("span",re,"-")):(i(),n("span",le,y(a.file_size_str),1))],64)):d("",!0),p.key==="paragraph_count"?(i(),n(w,{key:2},[a.status==0||a.status==1?(i(),n("span",pe,"-")):(i(),n("span",ce,y(a.paragraph_count),1))],64)):d("",!0),p.key==="action"?(i(),H($,{key:3,gap:12},{default:m(()=>[l("a",{onClick:k=>F(a)},"恢复",8,_e),l("a",{onClick:k=>L(a)},"删除",8,me)]),_:2},1024)):d("",!0)]),_:1},8,["data-source","loading","pagination"])])]),_:1})])}}},dt=V(de,[["__scopeId","data-v-fc98620f"]]);export{dt as default};
