import{_ as E,f as A,bL as y,d as L}from"../../index-C1Xsov4S.js";import{f as m,e as M,Y as f,a5 as t,k as o,a2 as n,a7 as r,a1 as N,ae as O,G as V,u as I,F as x,ab as R,a9 as j,_ as d,B as _}from"./vue-chunks-DCKTEHpB.js";import{A as G,_ as Q}from"./add-data-sheet-DiRKxtJs.js";import{g as q,d as z}from"./index-CEomrWgv.js";import{P as J}from"./page-tabs-KBDWT8vG.js";import{_ as Y}from"./page-alert-Bo_UnvJL.js";import{a3 as H,B as K,a as v,e as U,f as W,h as X,M as Z,Q as tt}from"./ui-antd-D64OvTpt.js";import"./utils-D9NMMoMR.js";const et={class:"library-page"},st={class:"library-page-body"},ot={class:"list-toolbar"},at={class:"toolbar-box"},nt={class:"list-total"},it={class:"toolbar-box"},lt={class:"list-box"},rt=["onClick"],ct={class:"library-info"},dt={class:"library-info-content"},_t={class:"library-title"},pt={class:"item-body"},ut={class:"library-desc"},mt={class:"item-footer"},ft={class:"library-size"},vt={class:"text-item"},bt={class:"text-item"},kt=["onClick"],ht=["onClick"],yt={__name:"index",setup(xt){j();const g=m([{title:"知识库",path:"/library/list"},{title:"数据库",path:"/database/list"},{title:"文档提取FAQ",path:"/ai-extract-faq/list"},{title:"触发次数统计",path:"/trigger-statics/list"}]),C=A();let{role_permission:B,role_type:T}=C;const w=M(()=>T==1||B.includes("FormCreate")),p=m([]),u=()=>{q({}).then(e=>{p.value=e.data||[]})};u();const b=m(null),k=(e={})=>{if(e.id){let s=y(e.id);if(!(s==4||s==2))return v.error("您没有编辑该数据库的权限")}b.value.show(e)},D=e=>{window.open(`/#/database/details?form_id=${e.id}&name=${e.name}`,"_blank","noopener")},P=e=>{if(y(e.id)!=4)return v.error("您没有删除该数据库的权限");let i=3,c=Z.confirm({title:"删除确认",icon:o(tt),content:`删除数据表后，表中所有数据将一并被删除，不可恢复。确认删除数据表${e.name}吗?`,okText:i+" 确 定",okType:"danger",okButtonProps:{disabled:!0},cancelText:"取 消",onOk(){$(e)},onCancel(){}}),l=setInterval(()=>{i==1?(c.update({okText:"确 定",okButtonProps:{disabled:!1}}),clearInterval(l),l=void 0):(i-=1,c.update({okText:i+" 确 定",okButtonProps:{disabled:!0}}))},1e3)},$=({id:e})=>{z({id:e}).then(()=>{v.success("删除成功"),u()})};return(e,s)=>{const i=K,c=L,l=W,F=U,S=X;return d(),f(x,null,[t("div",et,[o(J,{class:"mb-16",tabs:g.value,active:"/database/list"},null,8,["tabs"]),o(Y,{style:{"margin-bottom":"16px"},title:"使用说明"},{default:n(()=>[...s[3]||(s[3]=[t("div",null,[t("p",null," 1、数据库可以关联到问答机器人，从对话中提取信息存储到指定数据表中，也可以利用数据表中已有数据回复用户咨询。创建机器人之前请先创建知识库，然后去机器人设置中关联。 "),t("p",null,"2、支持Excel模版和Json模版导入已有数据，也支持将存储的数据导出Excel表。")],-1)])]),_:1}),t("div",st,[t("div",ot,[t("div",at,[t("h3",nt,"全部 ("+r(p.value.length)+")",1)]),t("div",it,[w.value?(d(),N(i,{key:0,type:"primary",onClick:s[0]||(s[0]=a=>k())},{icon:n(()=>[o(I(H))]),default:n(()=>[s[4]||(s[4]=V(" 新建数据库 ",-1))]),_:1})):O("",!0)])]),t("div",lt,[(d(!0),f(x,null,R(p.value,a=>(d(),f("div",{class:"list-item-wrapper",key:a.id},[t("div",{class:"list-item",onClick:_(h=>D(a),["stop"])},[t("div",ct,[s[5]||(s[5]=t("img",{class:"library-icon",src:Q,alt:""},null,-1)),t("div",dt,[t("div",_t,r(a.name),1)])]),t("div",pt,[t("div",ut,r(a.description),1)]),t("div",mt,[t("div",ft,[t("span",vt,"数据数："+r(a.entry_count)+"条",1),t("span",bt,"关联应用："+r(a.robot_nums||0),1)]),t("div",{class:"action-box",onClick:s[2]||(s[2]=_(()=>{},["stop"]))},[o(S,null,{overlay:n(()=>[o(F,null,{default:n(()=>[o(l,null,{default:n(()=>[t("a",{href:"javascript:;",onClick:_(h=>k(a),["stop"])},"编 辑",8,kt)]),_:2},1024),o(l,null,{default:n(()=>[t("a",{class:"delete-text-color",href:"javascript:;",onClick:h=>P(a)},"删 除",8,ht)]),_:2},1024)]),_:2},1024)]),default:n(()=>[t("div",{class:"action-item",onClick:s[1]||(s[1]=_(()=>{},["stop"]))},[o(c,{class:"action-icon",name:"point-h"})])]),_:2},1024)])])],8,rt)]))),128))])])]),o(G,{onOk:u,ref_key:"addDataSheetRef",ref:b},null,512)],64)}}},Ft=E(yt,[["__scopeId","data-v-c676325e"]]);export{Ft as default};
