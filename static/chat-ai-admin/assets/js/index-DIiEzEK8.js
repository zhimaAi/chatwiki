import{u as E}from"../../index-DSFcP5NQ.js";import{aj as M,r as C,a as m,p as n,y as s,v as i,u as a,t as c,F as N,l as P,b as f,_ as h,aq as V,G as b}from"./vue-chunks-BdaA73Wf.js";import{u as j}from"./robot-CIzNpArp.js";import{a3 as q,a4 as D,a5 as G,a6 as K}from"./index-Cg7-0swo.js";import{_ as L}from"./emoji-mart-BBMRoEa3.js";import{m as z,B as H,I as J,a4 as U,H as Q,J as W,b as _,M as B,O as X}from"./ui-antd-Dl1wwwCD.js";import"./neo4j-MWxXN7EM.js";import"./editor-cherry-CFIsbKoN.js";import"./lodash-Bm5sK6rN.js";import"./elkjs-BN8GIjVH.js";import"./utils-CvB22N-W.js";import"./other-LrIFyvU9.js";const Y={class:"page-container"},Z={class:"page-title"},ee={class:"alert-content"},te={class:"opration-box"},oe={style:{"margin-left":"auto"},href:"https://www.yuque.com/zhimaxiaoshiwangluo/pggco1/bg1ol40fo68pgdae",target:"_blank"},ne={class:"list-box"},ae={class:"key-content"},se={class:"right-box"},le={__name:"index",setup(ie){const{t:e}=E("views.robot.api-key-manage.index"),{toClipboard:T}=V(),A=j(),{robotInfo:p}=M(A),u=C(""),v=C([]),y=()=>{q({robot_key:p.value.robot_key}).then(t=>{u.value=t.data.end_point,v.value=t.data.list})};y();const I=t=>{D({robot_key:p.value.robot_key,id:t.id}).then(o=>{_.success(e("update_success")),y()})},R=()=>{B.confirm({title:b("div",{style:"color:#262626; font-weight: 600;"},e("add_api_key_title")),icon:null,content:b("div",{style:" color: #f10; line-height: 22px;"},e("add_api_key_warning")),bodyStyle:{padding:"12px 8px 4px 12px"},okText:e("create_btn"),width:480,onOk:()=>{S()},onCancel:()=>{}})},S=()=>{K({robot_key:p.value.robot_key}).then(t=>{_.success(e("create_success")),y()})},F=t=>{let o=5,d=O(t.key),r=B.confirm({title:e("confirm_delete_title",{key:d}),icon:s(X),content:b("div",{style:{color:"#FB363F"}},e("delete_warning")),okText:o+" "+e("confirm_btn"),okType:"danger",cancelText:e("cancel_btn"),okButtonProps:{disabled:!0},onOk(){G({robot_key:p.value.robot_key,id:t.id}).then(x=>{_.success(e("delete_success")),y()})},onCancel(){}}),k=setInterval(()=>{o==1?(r.update({okText:e("confirm_btn"),okButtonProps:{disabled:!1}}),clearInterval(k),k=void 0):(o-=1,r.update({okText:o+" "+e("confirm_btn"),okButtonProps:{disabled:!0}}))},1e3)};function O(t){let o=t.slice(0,4),d=t.slice(-4);return t.length<=4?t:t.length<=8?o+"...":o+"..."+d}const g=async t=>{try{await T(t),_.success(e("copy_success"))}catch{_.error(e("copy_fail"))}};return(t,o)=>{const d=z,r=H,k=J,x=Q,$=W;return f(),m("div",Y,[n("div",Z,i(a(e)("page_title")),1),s(d,{class:"mt8",type:"info","show-icon":""},{icon:c(()=>[n("div",null,[s(a(U))])]),message:c(()=>[n("div",ee,[n("div",null,i(a(e)("alert_message")),1)])]),_:1}),n("div",te,[s(r,{type:"primary",onClick:R},{default:c(()=>[h(i(a(e)("add_api_key_btn")),1)]),_:1}),s(k,{value:u.value,"onUpdate:value":o[1]||(o[1]=l=>u.value=l),style:{width:"500px"},readonly:""},{addonBefore:c(()=>[n("span",{onClick:o[0]||(o[0]=l=>g(u.value)),style:{cursor:"pointer"}},i(a(e)("copy_api_endpoint")),1)]),_:1},8,["value"]),n("a",oe,[s(r,null,{default:c(()=>[h(i(a(e)("api_documentation")),1)]),_:1})])]),n("div",ne,[(f(!0),m(N,null,P(v.value,l=>(f(),m("div",{class:"list-item",key:l.id},[s($,{justify:"space-between",align:"center"},{default:c(()=>[n("div",ae,[n("span",null,i(a(e)("api_key_label")),1),n("span",null,i(l.key),1)]),n("div",se,[s(x,{onChange:w=>I(l),checked:l.status==1,"checked-children":a(e)("switch_on"),"un-checked-children":a(e)("switch_off")},null,8,["onChange","checked","checked-children","un-checked-children"]),s(r,{onClick:w=>g(l.key)},{default:c(()=>[h(i(a(e)("copy_btn")),1)]),_:1},8,["onClick"]),s(r,{danger:"",onClick:w=>F(l)},{default:c(()=>[h(i(a(e)("delete_btn")),1)]),_:1},8,["onClick"])])]),_:2},1024)]))),128))])])}}},ve=L(le,[["__scopeId","data-v-c64cab89"]]);export{ve as default};
//# sourceMappingURL=index-DIiEzEK8.js.map
