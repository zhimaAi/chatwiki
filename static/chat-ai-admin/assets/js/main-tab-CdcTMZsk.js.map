{"version":3,"file":"main-tab-CdcTMZsk.js","sources":["../../../../front-end/chat-ai-admin-vue/src/views/explore/components/main-tab.vue"],"sourcesContent":["<template>\r\n  <ListTabs :tabs=\"tabs\" v-model:value=\"active\" @change=\"change\">\r\n    <template #extra=\"{key}\">\r\n      <ExclamationCircleFilled v-if=\"!isPublicNetwork && key != 1\" style=\"color: #FB363F;\"/>\r\n    </template>\r\n  </ListTabs>\r\n</template>\r\n\r\n<script setup>\r\nimport {ref, onMounted, computed} from 'vue';\r\nimport {useRouter} from 'vue-router'\r\nimport {ExclamationCircleFilled} from '@ant-design/icons-vue'\r\nimport ListTabs from \"@/components/cu-tabs/list-tabs.vue\";\r\nimport {getInstallPlugins, triggerConfigList} from \"@/api/plugins/index.js\";\r\nimport {usePublicNetworkCheck} from \"@/composables/usePublicNetworkCheck.js\";\r\nimport { useI18n } from '@/hooks/web/useI18n';\r\n\r\nconst { t } = useI18n('views.explore.components.main-tab')\r\nconst emit = defineEmits(['change'])\r\nconst router = useRouter()\r\nconst active = ref(localStorage.getItem('zm:explore:active') || '1')\r\nconst pluginCount = ref(localStorage.getItem('zm:explore:plugins:count') || '0')\r\nconst tabs = computed(() => [\r\n  {\r\n    title: t('title_template_marketplace'),\r\n    value: '4'\r\n  },\r\n  {\r\n    title: t('title_features'),\r\n    value: '1'\r\n  },\r\n  {\r\n    title: `${t('title_plugins')}(${pluginCount.value})`,\r\n    value: '2'\r\n  },\r\n  {\r\n    title: t('title_plugin_marketplace'),\r\n    value: '3'\r\n  },\r\n  {\r\n    title: t('title_mcp_marketplace'),\r\n    value: '5'\r\n  }\r\n])\r\nconst {isPublicNetwork} = usePublicNetworkCheck()\r\n\r\nonMounted(() => {\r\n  loadInstallPlugins()\r\n})\r\n\r\nfunction change(val){\r\n  active.value = val.toString()\r\n  localStorage.setItem('zm:explore:active', val)\r\n  emit('change', val)\r\n  switch (Number(val)) {\r\n    case 1:\r\n      router.push({path: '/explore/index'})\r\n      break\r\n    case 2:\r\n    case 3:\r\n      router.push({path: '/plugins/index', query: {active: val}})\r\n      break\r\n    case 4:\r\n      router.push({path: '/templates/index'})\r\n      break\r\n    case 5:\r\n      router.push({path: '/mcp/index'})\r\n      break\r\n\r\n  }\r\n}\r\n\r\nasync function loadInstallPlugins() {\r\n  let res = await triggerConfigList()\r\n  let triggerLength = res.data.length\r\n  getInstallPlugins().then(res => {\r\n    let _list = res?.data || []\r\n    pluginCount.value = _list.length + triggerLength\r\n    localStorage.setItem('zm:explore:plugins:count', _list.length + triggerLength)\r\n  })\r\n}\r\n\r\nfunction update() {\r\n  loadInstallPlugins()\r\n}\r\n\r\ndefineExpose({\r\n  change,\r\n  update,\r\n})\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"],"names":["t","useI18n","emit","__emit","router","useRouter","active","ref","pluginCount","tabs","computed","isPublicNetwork","usePublicNetworkCheck","onMounted","loadInstallPlugins","change","val","triggerLength","triggerConfigList","getInstallPlugins","res","_list","update","__expose","_createBlock","ListTabs","$event","_withCtx","key","_unref","ExclamationCircleFilled"],"mappings":"uZAiBA,KAAM,CAAE,EAAAA,CAAC,EAAKC,EAAQ,mCAAmC,EACnDC,EAAOC,EACPC,EAASC,EAAS,EAClBC,EAASC,EAAI,aAAa,QAAQ,mBAAmB,GAAK,GAAG,EAC7DC,EAAcD,EAAI,aAAa,QAAQ,0BAA0B,GAAK,GAAG,EACzEE,EAAOC,EAAS,IAAM,CAC1B,CACE,MAAOV,EAAE,4BAA4B,EACrC,MAAO,GACX,EACE,CACE,MAAOA,EAAE,gBAAgB,EACzB,MAAO,GACX,EACE,CACE,MAAO,GAAGA,EAAE,eAAe,CAAC,IAAIQ,EAAY,KAAK,IACjD,MAAO,GACX,EACE,CACE,MAAOR,EAAE,0BAA0B,EACnC,MAAO,GACX,EACE,CACE,MAAOA,EAAE,uBAAuB,EAChC,MAAO,GACX,CACA,CAAC,EACK,CAAC,gBAAAW,CAAe,EAAIC,EAAqB,EAE/CC,EAAU,IAAM,CACdC,EAAkB,CACpB,CAAC,EAED,SAASC,EAAOC,EAAI,CAIlB,OAHAV,EAAO,MAAQU,EAAI,SAAQ,EAC3B,aAAa,QAAQ,oBAAqBA,CAAG,EAC7Cd,EAAK,SAAUc,CAAG,EACV,OAAOA,CAAG,EAAC,CACjB,IAAK,GACHZ,EAAO,KAAK,CAAC,KAAM,gBAAgB,CAAC,EACpC,MACF,IAAK,GACL,IAAK,GACHA,EAAO,KAAK,CAAC,KAAM,iBAAkB,MAAO,CAAC,OAAQY,CAAG,CAAC,CAAC,EAC1D,MACF,IAAK,GACHZ,EAAO,KAAK,CAAC,KAAM,kBAAkB,CAAC,EACtC,MACF,IAAK,GACHA,EAAO,KAAK,CAAC,KAAM,YAAY,CAAC,EAChC,KAEN,CACA,CAEA,eAAeU,GAAqB,CAElC,IAAIG,GADM,MAAMC,EAAiB,GACT,KAAK,OAC7BC,EAAiB,EAAG,KAAKC,GAAO,CAC9B,IAAIC,GAAQD,GAAA,YAAAA,EAAK,OAAQ,CAAA,EACzBZ,EAAY,MAAQa,EAAM,OAASJ,EACnC,aAAa,QAAQ,2BAA4BI,EAAM,OAASJ,CAAa,CAC/E,CAAC,CACH,CAEA,SAASK,GAAS,CAChBR,EAAkB,CACpB,CAEA,OAAAS,EAAa,CACX,OAAAR,EACA,OAAAO,CACF,CAAC,cAxFCE,EAIWC,EAAA,CAJA,KAAMhB,EAAA,MAAc,MAAOH,EAAA,sCAAAA,EAAM,MAAAoB,GAAG,SAAQX,IAC1C,MAAKY,EACd,CAAsF,CADrE,IAAAC,CAAG,IAAA,CACY,CAAAC,EAAAlB,CAAA,GAAmBiB,GAAG,OAAtDJ,EAAsFK,EAAAC,CAAA,EAAA,OAAzB,MAAA,CAAA,MAAA,SAAA"}