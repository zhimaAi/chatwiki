import{u as N,c as O,_ as C}from"../../index-DSFcP5NQ.js";import{c as L,r as u,j as I,ah as R,a as f,p as t,e as S,v as a,u as c,_ as m,y as v,t as q,z,ag as E,V as H,b as p,G as g}from"./vue-chunks-BdaA73Wf.js";import"./utils-CvB22N-W.js";import{L as j}from"./loading-box-CQ9Pukre.js";import{g as G,u as K}from"./template-pJlgY6bX.js";import{_ as A}from"./emoji-mart-BBMRoEa3.js";import{B as F,bd as J,M as b,O as k,b as P}from"./ui-antd-Dl1wwwCD.js";import"./neo4j-MWxXN7EM.js";import"./editor-cherry-CFIsbKoN.js";import"./lodash-Bm5sK6rN.js";import"./elkjs-BN8GIjVH.js";import"./other-LrIFyvU9.js";const Q={class:"_container _plugin-detail-cont"},U={class:"header"},W={class:"title"},X={key:1,class:"content"},Y={class:"base-info"},Z={class:"top"},$=["src"],tt={class:"info"},et={class:"left"},st={class:"name zm-line1"},ot={class:"source"},at=["src"],nt={class:"right"},it={class:"desc"},ct={class:"action-box"},lt={class:"left"},_t={class:"detail-info"},rt={class:"left"},dt={class:"main-block"},ut={class:"main-tit"},mt=["innerHTML"],vt={class:"right"},pt={class:"main-block"},ht={class:"main-tit"},ft={class:"text-cont flex-center"},gt={__name:"detail",setup(bt){const{t:e}=N("views.explore.templates.detail"),x=E(),y=R(),T=O(),{companyInfo:r}=T,w=L(()=>r==null?void 0:r.version),d=u(!0),h=u(null),o=u({});I(()=>{var s;h.value=(s=y.query)==null?void 0:s.key,B()});function B(){d.value=!0,G({robot_id:h.value}).then(s=>{o.value=(s==null?void 0:s.data)||{}}).finally(()=>{d.value=!1})}function D(){const s=o.value;function l(n,i){return n=Number(n.replace(/\D/g,"")),i=Number(i.replace(/\D/g,"")),n>=i}const _=()=>{K({template_id:s.id,csl_url:s.csl_url}).then(n=>{P.success(e("msg_use_success"));const{id:i,robot_key:M}=n.data,V=x.resolve({path:"/robot/config/workflow",query:{id:i,robot_key:M}});window.open(V.href,"_blank")})};l(w.value,s.version)?b.confirm({title:e("title_tip"),content:e("msg_confirm_use_template",{name:s.name}),icon:g(k),okText:e("btn_confirm"),cancelText:e("btn_cancel"),onOk:_}):b.confirm({title:e("title_tip"),content:e("msg_version_too_low"),icon:g(k),okText:e("btn_continue_use"),cancelText:e("btn_cancel"),onOk:_})}return(s,l)=>{const _=C,n=F,i=H("viewer");return p(),f("div",Q,[t("div",U,[t("span",W,a(c(e)("title_template_detail")),1)]),d.value?(p(),S(j,{key:0})):(p(),f("div",X,[t("div",Y,[t("div",Z,[t("img",{class:"avatar",src:o.value.avatar},null,8,$),t("div",tt,[t("div",et,[t("div",st,a(o.value.name),1),t("div",ot,[t("img",{class:"avatar",src:o.value.account_avatar},null,8,at),m(" "+a(o.value.author),1)])]),t("div",nt,[v(n,{class:"use-btn",type:"primary",ghost:"",onClick:D},{default:q(()=>[v(_,{name:"icon-rocket"}),m(" "+a(c(e)("btn_use_template")),1)]),_:1})])])]),t("div",it,a(o.value.description),1),t("div",ct,[t("div",lt,[v(c(J)),m(" "+a(o.value.use_count||0),1)]),l[0]||(l[0]=t("div",{class:"right"},null,-1))])]),t("div",_t,[t("div",rt,[t("div",dt,[t("div",ut,a(c(e)("title_usage_instructions")),1),z(t("pre",{class:"text-cont",innerHTML:o.value.instructions},null,8,mt),[[i]])])]),t("div",vt,[t("div",pt,[t("div",ht,a(c(e)("title_template_category")),1),t("div",ft,a(o.value.category_name),1)])])])]))])}}},Lt=A(gt,[["__scopeId","data-v-08c0d276"]]);export{Lt as default};
//# sourceMappingURL=detail-Cfe318al.js.map
