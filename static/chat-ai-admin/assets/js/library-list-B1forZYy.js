import{b as w,$ as S,r as B,L as c,M as d,V as t,j as a,u as m,a8 as D,F as I,a1 as P,a7 as p,Y as _,Q as r,a3 as T,a4 as $}from"./vue-chunks-DrvJJrR0.js";import{g as z,d as E}from"./index-BRU6kXcy.js";import{_ as O,d as V,ax as j,M as F,E as N,e as q}from"../../index-BINWO267.js";import{_ as A,M as G}from"./index-CXnkjJr5.js";import"./index-DOp9C4hb.js";import{D as Q}from"./dropdown-DuQkgh_3.js";import{P as R}from"./PlusCircleOutlined-GlPctcP-.js";import{M as Y}from"./MoreOutlined-DF08UPNB.js";import"./dayjs-Bv4VEw_C.js";import"./axios-Cm0UX6qg.js";import"./qs-QntUJHOZ.js";import"./crypto-js-BpV8n4kc.js";import"./shallowequal-CfnxU2uU.js";import"./colors-CyWHJ-EZ.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./collapseMotion-DfZt1qrJ.js";import"./slide-D2L77aHc.js";import"./index-BLqqhZtH.js";import"./index-C_RsEIkW.js";import"./Dropdown-DofCOG9v.js";import"./RightOutlined-BiDlhszv.js";import"./move--x7cRhrx.js";const H=n=>(T("data-v-50f6b096"),n=n(),$(),n),J={"bg-color":"#f5f9ff",class:"library-page"},K={class:"library-page-body"},U={class:"list-box"},W={key:0,class:"list-item-wrapper"},X=H(()=>t("span",{class:"add-library-text"},"新增知识库",-1)),Z=["onClick"],tt={class:"item-header"},et={class:"library-title"},st=["onClick"],ot=["onClick"],at={class:"library-desc"},it={class:"library-size"},rt={class:"file-size"},nt={__name:"library-list",setup(n){const h=V();let{role_permission:k}=h;const C=w(()=>k.includes("LibraryCreate")),u=S(),f=B([]),b=()=>{z({}).then(e=>{f.value=e.data||[]})};b();const x=()=>{u.push({name:"addLibrary"})},v=e=>{u.push({name:"libraryDetails",query:{id:e.id}})},g=e=>{let s=3,i=F.confirm({title:`删除${e.library_name}`,icon:a(N),content:"您确定要删除此知识库吗？",okText:s+" 确 定",okType:"danger",okButtonProps:{disabled:!0},cancelText:"取 消",onOk(){L(e)},onCancel(){}}),l=setInterval(()=>{s==1?(i.update({okText:"确 定",okButtonProps:{disabled:!1}}),clearInterval(l),l=void 0):(s-=1,i.update({okText:s+" 确 定",okButtonProps:{disabled:!0}}))},1e3)},L=({id:e})=>{E({id:e}).then(()=>{q.success("删除成功"),b()})};return(e,s)=>{const i=A,l=G,M=Q;return c(),d("div",J,[t("div",K,[t("div",U,[C.value?(c(),d("div",W,[t("div",{class:"list-item add-library",onClick:x},[a(m(R),{class:"add-library-icon"}),X])])):D("",!0),(c(!0),d(I,null,P(f.value,o=>(c(),d("div",{class:"list-item-wrapper",key:o.id},[t("div",{class:"list-item",onClick:p(y=>v(o),["stop"])},[t("div",tt,[t("div",et,_(o.library_name),1),t("span",{class:"item-action",onClick:s[1]||(s[1]=p(()=>{},["stop"]))},[a(M,null,{overlay:r(()=>[a(l,null,{default:r(()=>[a(i,null,{default:r(()=>[t("a",{href:"javascript:;",onClick:p(y=>v(o),["stop"])},"管 理",8,st)]),_:2},1024),a(i,null,{default:r(()=>[t("a",{class:"delete-text-color",href:"javascript:;",onClick:y=>g(o)},"删 除",8,ot)]),_:2},1024)]),_:2},1024)]),default:r(()=>[t("span",{class:"menu-btn",onClick:s[0]||(s[0]=p(()=>{},["prevent"]))},[a(m(Y))])]),_:2},1024)])]),t("div",at,_(o.library_intro),1),t("div",it,[t("span",null,"文档数："+_(o.file_total),1),t("span",rt,"文档大小："+_(m(j)(o.file_size)),1)])],8,Z)]))),128))])])])}}},It=O(nt,[["__scopeId","data-v-50f6b096"]]);export{It as default};
