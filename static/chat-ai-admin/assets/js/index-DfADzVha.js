import{b as C,j as b,f as x,X as D,Y as L,Z as y,$ as B}from"../../index-ZzVqUZIR.js";import{H as W,al as q,a as c}from"./ui-antd-BJtyvQX6.js";import{f as o,Y as r,ae as N,a5 as n,u,k as _,ad as T,a7 as V,_ as p}from"./vue-chunks-yZ4gwLzA.js";import"./utils-smNh_pj2.js";const z="/assets/img/client-download-pic-D_c9zEa_.png",E={class:"client-download-page"},F={key:0,class:"login-required-switch"},I={class:"page-body"},R={class:"app-info"},Y={class:"banner"},j={__name:"index",setup(A){const m=b();let{role_type:f}=m;const{t:v}=x(),t=o(!1),w=()=>{B({client_side_login_switch:t.value?1:0}).then(()=>{c.success(v("common.saveSuccess"))})},g=o(""),i=o("Windows下载"),a=o(!1);let l=null;const d=()=>y({domain:""}).then(s=>(s.data.file_url?(a.value=!1,i.value="Windows下载",g.value=s.data.file_url,clearTimeout(l),l=null):(i.value="打包中...",a.value=!0,l=setTimeout(()=>{d()},5e3)),s)),h=()=>{a.value||d().then(s=>{s.data.file_url?L("",s.data.file_url):c.error("下载文件还没有准备好")})};return(()=>{D().then(s=>{t.value=s.data.client_side_login_switch==1})})(),(s,e)=>{const k=W;return p(),r("div",E,[u(f)!="3"?(p(),r("div",F,[e[1]||(e[1]=n("span",null,"需要登录：",-1)),_(k,{checked:t.value,"onUpdate:checked":e[0]||(e[0]=S=>t.value=S),onChange:w},null,8,["checked"])])):N("",!0),e[4]||(e[4]=n("h3",{class:"page-title"},"客户端下载",-1)),n("div",I,[n("div",R,[e[3]||(e[3]=n("div",{class:"app-name"},"ChatWiki电脑客户端",-1)),n("div",Y,[e[2]||(e[2]=n("img",{src:z,alt:""},null,-1)),n("div",{class:T(["download-btn",{disabled:a.value}]),onClick:h},[_(u(q),{class:"windows-icon"}),n("span",null,V(i.value),1)],2)])])])])}}},$=C(j,[["__scopeId","data-v-79e137f6"]]);export{$ as default};
