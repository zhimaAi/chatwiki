import{n as m,b as $,B as j,p as A}from"../../index-Bo1NSLpy.js";import{f as E}from"./index-BPmrcBow.js";import{a as O,_ as P}from"./RadioButton-CWIeNl_M.js";import"./index-Bb6fuwF7.js";import{R}from"./dayjs-CU3n21qy.js";import{d as g,z as B,q as L,N as k,O as v,X as o,j as r,U as d,F as N,a1 as U,u as V,S as T,Z as y,_ as c}from"./vue-chunks-BRsu9_To.js";import{S as q,a as F}from"./index-Bs02Ec-o.js";import{_ as H}from"./index-Bbrx8UDU.js";import{_ as J,a as Q}from"./index-Ct9MFKxB.js";import"./axios-Dq7h7Pqt.js";import"./qs-BrxkIg-9.js";import"./crypto-js-ClNpte_9.js";import"./dayjs-B6IotFah.js";import"./FormItemContext-Cv3f2sEj.js";import"./Checkbox-B_uQPvVs.js";import"./index-6kOkS7uh.js";import"./index-D-M8_C_F.js";import"./colors-4myZb9T8.js";import"./ClockCircleOutlined-mLHYPvMf.js";import"./useMergedState-C0iIHNGF.js";import"./Trigger-DtRTHvld.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./shallowequal-C0xnIuy8.js";import"./index-CuPJUS8f.js";import"./move-DztQgbGg.js";import"./slide-CVAZ5BEM.js";import"./index-BwedndIp.js";import"./List-qVz67bUg.js";import"./DownOutlined-CrhRpWT5.js";import"./CheckOutlined-C6m5maw6.js";import"./SearchOutlined-CFTHZIcT.js";import"./index-C_M0mW4F.js";import"./collapseMotion-Brd6xpAT.js";import"./CaretDownFilled-DQ5FyPd3.js";import"./index-BeCYXilq.js";import"./responsiveObserve-D3ho5cFZ.js";import"./index-eahgXICC.js";import"./LeftOutlined-6ERu0fUO.js";import"./RightOutlined-zEOifMPB.js";import"./index-B4MPC5xv.js";import"./index-kP7DVVOS.js";import"./index-BZOjzqJ2.js";import"./dropdown-DAy60lp8.js";import"./Dropdown-hEIgqeS3.js";import"./index-Dxy-C30T.js";import"./CaretDownOutlined-C8EH_hS-.js";import"./index-Caod9rOO.js";import"./Input-CCKFAS4o.js";import"./inputProps--_pnbyjO.js";import"./Search-BF8URtRh.js";import"./isPlainObject-CHj0iPA3.js";import"./TextArea--DLJ7VtX.js";import"./Password-CJww1n-s.js";const X={class:"zm-date"},Z={class:"date-btn"},G={class:"date-content"},K={__name:"date",props:{dateType:{type:Number,default:1},rangeData:{type:Array,default:null}},emits:["dateChange"],setup(M,{emit:h}){const _=M,e=g(1),w=h;let x=B([{label:"今日",value:!1,key:2,start_date:m(),end_date:m()},{label:"昨日",value:!1,key:3,start_date:m().subtract(1,"day"),end_date:m().subtract(1,"day")},{label:"近七日",value:!0,key:4,start_date:m().subtract(6,"day"),end_date:m().subtract(0,"day")}]);const b=g(null),p=g(null),u=g([]),z=a=>a>=m().subtract(0,"day"),D=()=>{let a=e.value,t=null;x.forEach(l=>{l.key==a&&(t=l)}),u.value=[t.start_date,t.end_date],b.value=t.start_date.format("YYYY-MM-DD"),p.value=t.end_date.format("YYYY-MM-DD"),Y()},S=(a,t)=>{e.value=1,u.value=a,b.value=t[0],p.value=t[1],Y()},Y=()=>{w("dateChange",{start_date:b.value,end_date:p.value})};return L(()=>{e.value=_.dateType,u.value=_.rangeData}),(a,t)=>{const l=O,n=P,f=R;return v(),k("div",X,[o("div",Z,[r(n,{value:e.value,"onUpdate:value":t[0]||(t[0]=i=>e.value=i),onChange:D},{default:d(()=>[(v(!0),k(N,null,U(V(x),i=>(v(),T(l,{class:"date-btn-button",value:i.key,key:i.key},{default:d(()=>[y(c(i.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),o("div",G,[r(f,{value:u.value,"onUpdate:value":t[1]||(t[1]=i=>u.value=i),onChange:S,format:"YYYY-MM-DD",disabledDate:z},null,8,["value"])])])}}},W={class:"team-members-pages"},tt={class:"total"},et={class:"total-num"},at={class:"set-model"},ot={class:"set-model-body"},st={class:"set-date"},nt={class:"set-date-body"},lt={class:"set-reset"},dt={class:"list-box"},rt={class:"user-box"},it={class:"name-info"},_t={class:"user-name"},pt={__name:"use-token",setup(M){const h=g(Date.now()),_=g(["全部模型"]),e=B({page:1,size:10,total:0,use_model:"全部模型",start_date:"",end_date:""}),w=a=>{e.start_date=a.start_date,e.end_date=a.end_date,p()},x=()=>{e.use_model="全部模型",e.start_date="",e.end_date="",h.value=Date.now(),p()},b=a=>{e.page=a.current,e.size=a.pageSize,D()},p=()=>{e.page=1,D()},u=g([]),z=(a,t)=>{const l=(a.split(".")[1]?a.split(".")[1]:a.split(".")[0]).length,n=(t.split(".")[1]?t.split(".")[1]:t.split(".")[0]).length,f=Math.pow(10,Math.max(l,n));return(a*f+t*f)/f/1e3},D=()=>{let a={page:e.page,size:e.size,start_date:e.start_date,end_date:e.end_date};e.use_model!="全部模型"&&(a.model=e.use_model),A(a).then(t=>{let l=t.data.list;l.forEach(n=>{n.create_time=n.create_time>0?m(n.create_time*1e3).format("YYYY-MM-DD HH:mm"):"--",n.amount=z(n.prompt_token,n.completion_token)}),u.value=l,e.total=+t.data.total})},S=a=>{e.use_model=a,p()},Y=()=>{E({}).then(a=>{_.value=["全部模型",...a.data]})};return L(()=>{Y(),p()}),(a,t)=>{const l=F,n=q,f=j,i=H,C=J,I=Q;return v(),k("div",W,[r(i,{justify:"flex-end"},{default:d(()=>[o("div",tt,[t[1]||(t[1]=o("div",{class:"label total-label"},"共计：",-1)),o("div",et,c(e.total)+"条",1)]),o("div",at,[t[2]||(t[2]=o("div",{class:"label set-model-label"},"选择模型：",-1)),o("div",ot,[r(n,{value:e.use_model,"onUpdate:value":t[0]||(t[0]=s=>e.use_model=s),placeholder:"全部模型",onChange:S,style:{width:"200px"}},{default:d(()=>[(v(!0),k(N,null,U(_.value,s=>(v(),T(l,{key:s,value:s},{default:d(()=>[o("span",null,c(s),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])])]),o("div",st,[t[3]||(t[3]=o("div",{class:"label set-date-label"},[o("span",null,"统计日期：")],-1)),o("div",nt,[(v(),T(K,{onDateChange:w,key:h.value}))])]),o("div",lt,[r(f,{onClick:x},{default:d(()=>t[4]||(t[4]=[y("重置")])),_:1,__:[4]})])]),_:1}),o("div",dt,[r(I,{"data-source":u.value,pagination:e.total>e.size?{current:e.page,total:e.total,pageSize:e.size,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"]}:!1,onChange:b},{default:d(()=>[r(C,{title:"模型名称","data-index":"model",width:"300px"},{default:d(({record:s})=>[o("div",rt,[o("div",it,[o("div",_t,c(s.corp)+"（"+c(s.model)+"）",1)])])]),_:1}),r(C,{title:"类型","data-index":"IP",width:"190px"},{default:d(({record:s})=>[y(c(s.type),1)]),_:1}),r(C,{title:"Token消耗(k)","data-index":"amount",width:"190px"},{default:d(({record:s})=>[y(c(s.amount),1)]),_:1}),r(C,{title:"日期","data-index":"date",width:"190px"},{default:d(({record:s})=>[y(c(s.date),1)]),_:1})]),_:1},8,["data-source","pagination"])])])}}},ut=$(pt,[["__scopeId","data-v-be2fc97c"]]),mt={class:"user-model-page"},ct={class:"list-wrapper"},vt={__name:"index",setup(M){return(h,_)=>(v(),k("div",mt,[_[0]||(_[0]=o("div",{class:"page-title"},"Token使用",-1)),o("div",ct,[r(ut)])]))}},ve=$(vt,[["__scopeId","data-v-0449483b"]]);export{ve as default};
