{"version":3,"file":"index-Bm4uv5SC.js","sources":["../../../../front-end/chat-ai-admin-vue/src/components/weight-select/index.vue"],"sourcesContent":["<template>\r\n  <div class=\"slider-box\" :class=\"{ 'neo4j-status-close-slider': !neo4j_status }\" :style=\"cssVars\">\r\n    <div class=\"form-label-block\">\r\n      <div class=\"label-title\">\r\n        {{ t('label_weight') }}\r\n        <a-tooltip>\r\n          <template #title>\r\n            {{ t('tooltip_weight') }}\r\n          </template>\r\n          <QuestionCircleOutlined />\r\n        </a-tooltip>\r\n      </div>\r\n      <div class=\"item-list-box\">\r\n        <div\r\n          class=\"list-item\"\r\n          v-for=\"item in listItems\"\r\n          :key=\"item.label\"\r\n          :style=\"{ color: item.color }\"\r\n        >\r\n          <span class=\"dot\" :style=\"{ background: item.color }\"></span>\r\n          <span class=\"text\">{{ item.label }}：{{ item.value }}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <a-slider\r\n      @change=\"handleChange\"\r\n      v-model:value=\"rrf_value\"\r\n      :tip-formatter=\"formatter\"\r\n      :range=\"neo4j_status\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, watch, computed } from 'vue'\r\nimport { QuestionCircleOutlined } from '@ant-design/icons-vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\nimport { useCompanyStore } from '@/stores/modules/company'\r\n\r\nconst { t } = useI18n('components.weight-select.index')\r\n\r\nconst companyStore = useCompanyStore()\r\nconst neo4j_status = computed(() => {\r\n  return companyStore.companyInfo?.neo4j_status == 'true'\r\n})\r\nconst props = defineProps({\r\n  rrf_weight: {\r\n    type: Object\r\n  }\r\n})\r\nconst emit = defineEmits(['update:rrf_weight', 'save'])\r\nconst rrf_value = ref(null)\r\n\r\nconst listItems = computed(() => {\r\n  let { vector, search, graph } = props.rrf_weight\r\n  let list = [\r\n    {\r\n      label: t('label_vector'),\r\n      value: formatter(vector),\r\n      color: '#2475fc'\r\n    },\r\n    {\r\n      label: t('label_fulltext'),\r\n      value: formatter(search),\r\n      color: '#03b615'\r\n    }\r\n  ]\r\n  if (neo4j_status.value) {\r\n    list.push({\r\n      label: t('label_graph'),\r\n      value: formatter(graph),\r\n      color: '#F59A23'\r\n    })\r\n  }\r\n  return list\r\n})\r\n\r\nconst handleChange = () => {\r\n  let vector = 0\r\n  let search = 0\r\n  let graph = 0\r\n  if (neo4j_status.value) {\r\n    vector = rrf_value.value[0]\r\n    search = rrf_value.value[1] - rrf_value.value[0]\r\n    graph = 100 - rrf_value.value[1]\r\n  } else {\r\n    vector = rrf_value.value\r\n    search = 100 - rrf_value.value\r\n  }\r\n  emit('update:rrf_weight', { vector, search, graph })\r\n  emit('save', { vector, search, graph })\r\n}\r\n\r\nwatch(\r\n  () => props.rrf_weight,\r\n  (val) => {\r\n    let { vector, search, graph } = val\r\n    if (neo4j_status.value) {\r\n      rrf_value.value = [vector, Math.min(vector + search, 100)]\r\n    } else {\r\n      rrf_value.value = vector\r\n    }\r\n  },\r\n  { immediate: true, deep: true }\r\n)\r\n\r\nconst backgroundLiner = computed(() => {\r\n  if (!neo4j_status.value) {\r\n    return `linear-gradient(to right, #2475fc ${rrf_value.value}%, #03B615 ${100 - rrf_value.value}%)`\r\n  }\r\n  let value1 = rrf_value.value[0]\r\n  let value2 = 100 - value1\r\n  return `linear-gradient(to right, #2475fc ${value1}%, #F59A23 ${value2}%)`\r\n})\r\n\r\n// 计算属性返回 CSS 变量对象\r\nconst cssVars = computed(() => ({\r\n  '--background-liner': backgroundLiner.value\r\n}))\r\n\r\nfunction formatter(value) {\r\n  if (value <= 0) {\r\n    return 0\r\n  }\r\n  if (value >= 100) {\r\n    return 1\r\n  }\r\n  return (value / 100).toFixed(2)\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.neo4j-status-close-slider {\r\n  &::v-deep(.ant-slider) {\r\n    .ant-slider-track {\r\n      background: #2475fc;\r\n    }\r\n  }\r\n}\r\n.slider-box {\r\n  &::v-deep(.ant-slider) {\r\n    .ant-slider-rail {\r\n      background: var(--background-liner);\r\n    }\r\n    .ant-slider-track-1 {\r\n      background: #03b615;\r\n    }\r\n  }\r\n}\r\n.form-label-block {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  .label-title {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 2px;\r\n    margin-right: 8px;\r\n  }\r\n  .item-list-box {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 12px;\r\n    font-size: 13px;\r\n    .list-item {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 4px;\r\n      .dot {\r\n        width: 8px;\r\n        height: 8px;\r\n        border-radius: 50%;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"],"names":["t","useI18n","companyStore","useCompanyStore","neo4j_status","computed","_a","props","__props","emit","__emit","rrf_value","ref","listItems","vector","search","graph","list","formatter","handleChange","watch","val","backgroundLiner","value1","value2","cssVars","value","_createElementBlock","_normalizeClass","_createElementVNode","_hoisted_1","_hoisted_2","_createTextVNode","_toDisplayString","_unref","_createVNode","_component_a_tooltip","QuestionCircleOutlined","_hoisted_3","_Fragment","_renderList","item","_normalizeStyle","_hoisted_4","_component_a_slider","$event"],"mappings":"ufAuCA,KAAM,CAAE,EAAAA,CAAC,EAAKC,EAAQ,gCAAgC,EAEhDC,EAAeC,EAAe,EAC9BC,EAAeC,EAAS,IAAM,OAClC,QAAOC,EAAAJ,EAAa,cAAb,YAAAI,EAA0B,eAAgB,MACnD,CAAC,EACKC,EAAQC,EAKRC,EAAOC,EACPC,EAAYC,EAAI,IAAI,EAEpBC,EAAYR,EAAS,IAAM,CAC/B,GAAI,CAAE,OAAAS,EAAQ,OAAAC,EAAQ,MAAAC,CAAK,EAAKT,EAAM,WAClCU,EAAO,CACT,CACE,MAAOjB,EAAE,cAAc,EACvB,MAAOkB,EAAUJ,CAAM,EACvB,MAAO,SACb,EACI,CACE,MAAOd,EAAE,gBAAgB,EACzB,MAAOkB,EAAUH,CAAM,EACvB,MAAO,SACb,CACA,EACE,OAAIX,EAAa,OACfa,EAAK,KAAK,CACR,MAAOjB,EAAE,aAAa,EACtB,MAAOkB,EAAUF,CAAK,EACtB,MAAO,SACb,CAAK,EAEIC,CACT,CAAC,EAEKE,EAAe,IAAM,CACzB,IAAIL,EAAS,EACTC,EAAS,EACTC,EAAQ,EACRZ,EAAa,OACfU,EAASH,EAAU,MAAM,CAAC,EAC1BI,EAASJ,EAAU,MAAM,CAAC,EAAIA,EAAU,MAAM,CAAC,EAC/CK,EAAQ,IAAML,EAAU,MAAM,CAAC,IAE/BG,EAASH,EAAU,MACnBI,EAAS,IAAMJ,EAAU,OAE3BF,EAAK,oBAAqB,CAAE,OAAAK,EAAQ,OAAAC,EAAQ,MAAAC,CAAK,CAAE,EACnDP,EAAK,OAAQ,CAAE,OAAAK,EAAQ,OAAAC,EAAQ,MAAAC,CAAK,CAAE,CACxC,EAEAI,EACE,IAAMb,EAAM,WACXc,GAAQ,CACP,GAAI,CAAE,OAAAP,EAAQ,OAAAC,EAAQ,MAAAC,CAAK,EAAKK,EAC5BjB,EAAa,MACfO,EAAU,MAAQ,CAACG,EAAQ,KAAK,IAAIA,EAASC,EAAQ,GAAG,CAAC,EAEzDJ,EAAU,MAAQG,CAEtB,EACA,CAAE,UAAW,GAAM,KAAM,EAAI,CAC/B,EAEA,MAAMQ,EAAkBjB,EAAS,IAAM,CACrC,GAAI,CAACD,EAAa,MAChB,MAAO,qCAAqCO,EAAU,KAAK,cAAc,IAAMA,EAAU,KAAK,KAEhG,IAAIY,EAASZ,EAAU,MAAM,CAAC,EAC1Ba,EAAS,IAAMD,EACnB,MAAO,qCAAqCA,CAAM,cAAcC,CAAM,IACxE,CAAC,EAGKC,EAAUpB,EAAS,KAAO,CAC9B,qBAAsBiB,EAAgB,KACxC,EAAE,EAEF,SAASJ,EAAUQ,EAAO,CACxB,OAAIA,GAAS,EACJ,EAELA,GAAS,IACJ,GAEDA,EAAQ,KAAK,QAAQ,CAAC,CAChC,wCA/HEC,EA6BM,MAAA,CA7BD,MAAKC,EAAA,CAAC,aAAY,CAAA,4BAAA,CAAyCxB,EAAA,KAAY,CAAA,CAAA,EAAK,QAAOqB,EAAA,KAAO,IAC7FI,EAqBM,MArBNC,EAqBM,CApBJD,EAQM,MARNE,EAQM,CAPDC,EAAAC,EAAAC,EAAAlC,CAAA,mBAAoB,IACvB,CAAA,EAAAmC,EAKYC,EAAA,KAAA,CAJC,QACT,IAAyB,KAAtBF,EAAAlC,CAAA,EAAC,gBAAA,CAAA,EAAA,CAAA,cAEN,IAA0B,CAA1BmC,EAA0BD,EAAAG,CAAA,CAAA,YAG9BR,EAUM,MAVNS,EAUM,QATJX,EAQMY,EAAA,KAAAC,EANW3B,EAAA,MAAR4B,QAFTd,EAQM,MAAA,CAPJ,MAAM,YAEL,IAAKc,EAAK,MACV,MAAKC,EAAA,CAAA,MAAWD,EAAK,KAAK,CAAA,IAE3BZ,EAA6D,OAAA,CAAvD,MAAM,MAAO,MAAKa,EAAA,CAAA,WAAgBD,EAAK,KAAK,CAAA,WAClDZ,EAA2D,OAA3Dc,EAA2DV,EAArCQ,EAAK,KAAK,EAAG,IAACR,EAAGQ,EAAK,KAAK,EAAA,CAAA,kBAIvDN,EAKES,EAAA,CAJC,SAAQzB,EACD,MAAOR,EAAA,sCAAAA,EAAS,MAAAkC,GACvB,gBAAe3B,EACf,MAAOd,EAAA"}