import{u as A,bW as W,bt as G,_ as H,bY as J}from"../../index-DSFcP5NQ.js";import{C as K}from"./config-page-menu-BJkqU_Ap.js";import{c as C,r as w,E as x,w as Q,j as B,a as F,p as i,y as r,v as h,u as l,t as c,m as S,Y as X,_ as Z,b as N,a1 as O}from"./vue-chunks-BdaA73Wf.js";import{A as ee}from"./avatar-input-BcFDFUIh.js";import{_ as U}from"./emoji-mart-BBMRoEa3.js";import{b as V,F as I,c as ae,I as te,V as oe,B as re}from"./ui-antd-Dl1wwwCD.js";import"./neo4j-MWxXN7EM.js";import"./editor-cherry-CFIsbKoN.js";import"./lodash-Bm5sK6rN.js";import"./elkjs-BN8GIjVH.js";import"./utils-CvB22N-W.js";import"./other-LrIFyvU9.js";const le={class:"form-box"},ne={class:"form-box-header"},se={class:"form-box-label"},ie={class:"form-box-label-text"},_e={class:"form-item-tip"},ce={__name:"library-form",props:{value:{type:Object,default:()=>({})},saveLoading:{type:Boolean,default:!1}},emits:["submit","update:value"],setup(p,{emit:f}){const{t}=A("views.public-library.config.components.library-form"),n=W(),_=C(()=>n.getCurrentLocale.lang==="zh-CN"?6:24),b=C(()=>n.getCurrentLocale.lang==="zh-CN"?6:0);V.config({duration:2});const v=f,g=p,o=w(1),u=I.useForm,y=w(!1),k=G,a=x({type:o.value,library_name:"",library_intro:"",use_model:"",avatar:k,avatar_file:"",is_offline:!1,model_config_id:""}),j=x({library_name:[{required:!0,message:t("library_name_required"),trigger:"change"}],library_intro:[{required:!0,message:t("library_intro_required"),trigger:"change"}]}),q=e=>{a.avatar=e.imageUrl,a.avatar_file=e.file},{validate:E,validateInfos:L}=u(a,j),P=()=>{E().then(()=>{R()}).catch(e=>{})},R=()=>{let e=O(a);v("submit",e)},$=e=>{y.value=+e.type,a.library_name=e.library_name,a.library_intro=e.library_intro,a.use_model=e.use_model,a.model_config_id=e.model_config_id,a.avatar=e.avatar?e.avatar:k,a.avatar_file=e.avatar_file?e.avatar_file:"",a.is_offline=e.is_offline};return Q(g.value,e=>{$({...e})}),B(()=>{}),(e,s)=>{const z=H,M=te,m=ae,Y=oe,D=re,T=I;return N(),F("div",le,[i("div",ne,[i("div",se,[r(z,{class:"form-box-label-icon",name:"book",style:{"font-size":"16px",color:"#333"}}),i("span",ie,h(l(t)("knowledge_base_info")),1)]),s[3]||(s[3]=i("div",null,null,-1))]),r(T,{"label-col":{span:_.value},style:{width:"600px"}},{default:c(()=>[r(m,S({ref:"name",label:l(t)("knowledge_base_name_label")},l(L).library_name),{default:c(()=>[r(M,{value:a.library_name,"onUpdate:value":s[0]||(s[0]=d=>a.library_name=d),placeholder:l(t)("knowledge_base_name_placeholder"),"show-count":"",maxlength:20},null,8,["value","placeholder"])]),_:1},16,["label"]),r(m,{label:l(t)("knowledge_base_intro_label")},{default:c(()=>[r(Y,{value:a.library_intro,"onUpdate:value":s[1]||(s[1]=d=>a.library_intro=d),placeholder:l(t)("knowledge_base_intro_placeholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),r(m,S({ref:"name",label:l(t)("knowledge_base_cover_label")},l(L).avatar),{default:c(()=>[r(ee,{value:a.avatar,"onUpdate:value":s[2]||(s[2]=d=>a.avatar=d),onChange:q},null,8,["value"]),i("div",_e,h(l(t)("knowledge_base_cover_tip")),1)]),_:1},16,["label"]),r(m,{"wrapper-col":{offset:b.value,span:8}},{default:c(()=>[r(D,{type:"primary",style:{"margin-left":"8px"},loading:p.saveLoading,onClick:X(P,["prevent"])},{default:c(()=>[Z(h(l(t)("save_btn")),1)]),_:1},8,["loading"])]),_:1},8,["wrapper-col"])]),_:1},8,["label-col"])])}}},de=U(ce,[["__scopeId","data-v-c9c8d86c"]]),ue={class:"add-library-page"},me={class:"page-container"},pe={class:"form-box-wrapper"},fe={__name:"index",setup(p){const{t:f}=A("views.public-library.config.index"),t=J(),n=x({type:1,library_intro:"",library_name:"",model_config_id:"",model_define:"",use_model:"",is_offline:!1,access_rights:"0",share_url:"",library_key:"",avatar:"",avatar_file:""}),_=w(!1),b=o=>{Object.assign(n,o),_.value=!0,v().then(()=>{_.value=!1}).catch(()=>{_.value=!1})},v=async()=>{let o={...O(n)};delete o.library_key,o.avatar_file?(o.avatar=o.avatar_file,delete o.avatar_file):(delete o.avatar,delete o.avatar_file),await t.saveEditLibrary(o),V.success(f("modify_success"))},g=()=>{Object.assign(n,{...t.libraryInfo})};return B(()=>{g()}),(o,u)=>(N(),F("div",ue,[r(K),i("div",me,[i("div",pe,[r(de,{value:n,"onUpdate:value":u[0]||(u[0]=y=>n=y),saveLoading:_.value,onSubmit:b},null,8,["value","saveLoading"])])])]))}},Ae=U(fe,[["__scopeId","data-v-c1ced818"]]);export{Ae as default};
//# sourceMappingURL=index-ksI4dyNL.js.map
