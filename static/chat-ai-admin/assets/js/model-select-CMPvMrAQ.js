import{g as E,j as B}from"./index-MT9fcN3v.js";import{ab as b,r as M,w as A,c as L,j as O,e as y,b as m,t as _,a as I,l as N,F as C,_ as V,v as g,y as D,p,q as G,u as j}from"./vue-chunks-BdaA73Wf.js";import{u as q}from"../../index-DSFcP5NQ.js";import{_ as F}from"./emoji-mart-BBMRoEa3.js";import{aZ as R,v as $,J,u as K}from"./ui-antd-Dl1wwwCD.js";const k=b("model",()=>{const n=M([]);return{allModelList:n,getAllmodelList:async()=>{try{if(n.value.length==0){const d=await E();n.value=d.data}return n.value}catch(d){}}}});function X(n){let s=n||[],d={};return s.forEach(o=>{o.key=o.config_info.id,o.id=o.config_info.id,o.config_name=o.config_info.config_name,o.model_config_id=o.config_info.id,o.children=o.use_model_configs.map(e=>(e.thinking_type==2&&(d[o.config_info.id+"#"+e.use_model_name]=!0),{...e,key:o.config_info.id+"_"+e.use_model_name,value:o.config_info.id+"_"+e.use_model_name,model_config_id:o.config_info.id,name:e.use_model_name,label:e.show_model_name}))}),{newList:s,choosableThinking:d}}function le(n,s,d="LLM"){if(!n||!s)return"";let o=k();if(o.allModelList.length==0)return"";let e=o.allModelList;e=e.map(l=>({...l,use_model_configs:l.use_model_configs.filter(u=>u.model_type==d)}));let t=e.find(l=>l.config_info.id==n),a=null;return t&&(a=t.use_model_configs.find(l=>l.use_model_name==s)),a?`${t.config_info.config_name||t.config_info.show_model_name||t.model_name}  ${a.show_model_name||a.use_model_name}`:""}function ne(n,s,d="LLM"){if(!n||!s)return null;let o=k();if(o.allModelList.length==0)return null;let e=o.allModelList;e=e.map(l=>({...l,use_model_configs:l.use_model_configs.filter(u=>u.model_type==d)}));let t=e.find(l=>l.config_info.id==n),a=null;return t&&(a=t.use_model_configs.find(l=>l.use_model_name==s)),a||null}const Z={key:0,class:"model-show-block"},z=["src"],H={class:"name-text"},P=["src"],Q={__name:"model-select",props:{modelType:{type:String,validator:n=>["TEXT EMBEDDING","RERANK","LLM","IMAGE","TTS"].includes(n),required:!0},modeName:{type:[String,Number],default:""},modeId:{type:[String,Number],default:""},useConfigId:{type:[String,Number],default:""},placeholder:{type:String,default:""}},emits:["change","update:modeName","update:modeId","update:useConfigId","loaded"],setup(n,{emit:s}){const{t:d}=q("components.model-select.model-select"),o=s,e=n,t=M();A([()=>e.modeId,()=>e.modeName],([i,r])=>{!i||!r?t.value=void 0:t.value=i+"-"+r},{immediate:!0});const a=M([]),l=L(()=>e.modeId?a.value.find(i=>i.key==e.modeId):{}),u=L(()=>l.value.children&&l.value.children.length?l.value.children.find(i=>i.use_model_name==e.modeName):{}),S=(i,r)=>{r&&(o("update:modeName",r.modelName),o("update:modeId",r.modelId),o("update:useConfigId",r.useConfigId),o("change",i,r))},w=()=>{B({model_type:e.modelType}).then(i=>{let r=i.data||[],{newList:h,choosableThinking:v}=X(r,e.modeIdType);a.value=h,o("loaded",a.value,v)})};return O(()=>{w(),e.modeId&&e.modeName&&(t.value=e.modeId+"-"+e.modeName)}),(i,r)=>{const h=J,v=$,T=R,x=K;return m(),y(x,{value:t.value,placeholder:n.placeholder||j(d)("ph_select_model"),onChange:S,style:{width:"100%"},allowClear:!0,class:"modal-seclet-new"},{clearIcon:_(()=>[l.value&&u.value?(m(),I("div",Z,[p("img",{class:"icon",src:l.value.model_icon_url,alt:""},null,8,z),p("div",H,g(l.value.config_name||l.value.model_name)+" "+g(u.value.show_model_name||u.value.use_model_name),1)])):G("",!0)]),default:_(()=>[(m(!0),I(C,null,N(a.value,f=>(m(),y(T,{key:f.key},{label:_(()=>[D(h,{align:"center",gap:6},{default:_(()=>[p("img",{class:"model-icon",src:f.model_icon_url,alt:""},null,8,P),p("span",null,g(f.config_name||f.model_name),1)]),_:2},1024)]),default:_(()=>[(m(!0),I(C,null,N(f.children,c=>(m(),y(v,{value:c.value,modelId:c.model_config_id,modelName:c.name,useConfigId:c.id,key:c.key,attrs:c},{default:_(()=>[V(g(c.show_model_name||c.name),1)]),_:2},1032,["value","modelId","modelName","useConfigId","attrs"]))),128))]),_:2},1024))),128))]),_:1},8,["value","placeholder"])}}},te=F(Q,[["__scopeId","data-v-ed88ae41"]]);export{te as M,ne as a,X as b,le as g,k as u};
//# sourceMappingURL=model-select-CMPvMrAQ.js.map
