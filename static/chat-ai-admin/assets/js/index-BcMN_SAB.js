import{b as v,d as h,by as q}from"../../index-0SFcfYGN.js";import{ab as k,e as D,f as I,af as m,Y as b,_ as d,k as l,a2 as f,F as B,a9 as E,a1 as g,u as $,G as w,a7 as x,l as _,d as A,a5 as n}from"./vue-chunks-BSjLwu6d.js";import{c as L,b as R,a9 as K}from"./ui-antd-BIopZvX3.js";import{u as N}from"./database-DbWXIIXi.js";import{_ as O,A as V}from"./add-data-sheet-B8PmBdOm.js";import"./utils-BMKRjDTh.js";import"./index-O362J1Hf.js";const F={class:"left-menu-box"},G={__name:"left-menus",emits:["changeMenu"],setup(e,{emit:s}){const a=s,t=k(),r=t.query,o=D(()=>[t.path.split("/")[3]]),u=I([{key:"field-manage",id:"field-manage",icon:()=>_("span",{},[_(h,{name:"field-menu-icon",class:"menu-icon"})]),label:"字段管理",title:"字段管理",path:"/database/details/field-manage"},{key:"database-manage",id:"database-manage",icon:()=>_("span",{},[_(h,{name:"database-menu-icon",class:"menu-icon"})]),label:"数据管理",title:"数据管理",path:"/database/details/database-manage"}]),p=({item:i})=>{o.value.includes(i.id)||a("changeMenu",i)};return(i,y)=>{const S=L,C=m("router-link"),M=R;return d(),b("div",F,[l(M,{class:"left-menu",selectedKeys:o.value,onClick:p},{default:f(()=>[(d(!0),b(B,null,E(u.value,c=>(d(),g(C,{class:"default-color",to:{path:c.path,query:$(r)},key:c.key},{default:f(()=>[(d(),g(S,{icon:c.icon,path:c.path,key:c.key},{default:f(()=>[w(x(c.label),1)]),_:2},1032,["icon","path"]))]),_:2},1032,["to"]))),128))]),_:1},8,["selectedKeys"])])}}},P=v(G,[["__scopeId","data-v-e3489ea4"]]),T=A({components:{LeftMenus:P,AddDataSheet:V,EditOutlined:K},async beforeRouteEnter(e,s,a){let t=q(e.query.form_id);if(t==0||t==1){a("/no-permission");return}a()},setup(){const e=N(),a=k().query,t=D(()=>e.databaseInfo),r=()=>{e.getDatabaseInfo({id:a.form_id})};r();const o=I(null);return{dataBaseInfo:t,getInfo:r,toEdit:()=>{o.value.show({...e.databaseInfo})},addDataSheetRef:o}}}),Y={class:"details-library-page"},j={class:"between-content-box"},z={class:"layout-left"},H={class:"library-name-box"},J={class:"name"},Q={class:"left-menu-box"},U={class:"right-content-box"};function W(e,s,a,t,r,o){const u=h,p=m("LeftMenus"),i=m("router-view"),y=m("AddDataSheet");return d(),b("div",Y,[n("div",j,[n("div",z,[n("div",H,[s[0]||(s[0]=n("img",{class:"avatar",src:O,alt:""},null,-1)),n("div",J,x(e.dataBaseInfo.name),1),l(u,{onClick:e.toEdit,name:"edit"},null,8,["onClick"])]),n("div",Q,[l(p)])]),n("div",U,[l(i)])]),l(y,{onOk:e.getInfo,ref:"addDataSheetRef"},null,8,["onOk"])])}const oe=v(T,[["render",W],["__scopeId","data-v-5c3af201"]]);export{oe as default};
