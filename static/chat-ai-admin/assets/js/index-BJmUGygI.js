import{b as F,l as M,B as N,dX as y,k as u,d as O,M as A,E as V}from"../../index-M_xDbIir.js";import{d as f,b as j,N as v,X as t,j as e,U as a,_ as l,S as I,a6 as L,Z as R,u as X,F as x,a1 as q,a2 as z,O as d,a0 as p}from"./vue-chunks-BRsu9_To.js";import{A as G,_ as J}from"./add-data-sheet-Cf-RRsMZ.js";import{g as Q,d as U}from"./index-B8KmO6dn.js";import{P as Z}from"./page-tabs-j9EvZYFL.js";import{_ as H}from"./page-alert-CXP-BgUu.js";import{P as K}from"./PlusOutlined-DQ91YM1E.js";import{M as W,_ as Y}from"./index-B3CPYV6x.js";import"./index-D7wU2qJF.js";import{D as tt}from"./dropdown-DCrM-GKY.js";import"./axios-Dq7h7Pqt.js";import"./qs-BrxkIg-9.js";import"./crypto-js-ClNpte_9.js";import"./dayjs-B6IotFah.js";import"./index-V0sRhm34.js";import"./Trigger-CkoSoTBd.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./isPlainObject-A-SljaBF.js";import"./Col-CFWsj1wI.js";import"./responsiveObserve-CRSSr9-w.js";import"./hasIn-DEwqUvIo.js";import"./collapseMotion-Brd6xpAT.js";import"./index-B0RyY99D.js";import"./colors-C56HAaAp.js";import"./QuestionCircleOutlined-B5SgdGK5.js";import"./FormItemContext-DRzYyKbC.js";import"./index-UA7y0weg.js";import"./Input-Bx6Hhp2b.js";import"./index-Btmz2D3B.js";import"./inputProps-DsSGhBt6.js";import"./Search-w33R1D1l.js";import"./SearchOutlined-KUcJKUZw.js";import"./TextArea-C57yjED6.js";import"./index-CMIXnI2Z.js";import"./Password-5njtOUlo.js";import"./shallowequal-C0xnIuy8.js";import"./slide-DzpBPoRp.js";import"./Dropdown-Dh4cjnmT.js";import"./RightOutlined-og3IpneX.js";import"./move-DD64vPeJ.js";const ot={class:"library-page"},st={class:"library-page-body"},et={class:"list-toolbar"},it={class:"toolbar-box"},at={class:"list-total"},nt={class:"toolbar-box"},rt={class:"list-box"},lt=["onClick"],ct={class:"library-info"},dt={class:"library-info-content"},pt={class:"library-title"},mt={class:"item-body"},_t={class:"library-desc"},ut={class:"item-footer"},ft={class:"library-size"},vt={class:"text-item"},bt={class:"text-item"},kt=["onClick"],ht=["onClick"],yt={__name:"index",setup(xt){z();const g=f([{title:"知识库",path:"/library/list"},{title:"数据库",path:"/database/list"},{title:"文档提取FAQ",path:"/ai-extract-faq/list"},{title:"触发次数统计",path:"/trigger-statics/list"}]),C=M();let{role_permission:B,role_type:D}=C;const P=j(()=>D==1||B.includes("FormCreate")),m=f([]),_=()=>{Q({}).then(o=>{m.value=o.data||[]})};_();const b=f(null),k=(o={})=>{if(o.id){let s=y(o.id);if(!(s==4||s==2))return u.error("您没有编辑该数据库的权限")}b.value.show(o)},T=o=>{window.open(`/#/database/details?form_id=${o.id}&name=${o.name}`,"_blank","noopener")},w=o=>{if(y(o.id)!=4)return u.error("您没有删除该数据库的权限");let n=3,c=A.confirm({title:"删除确认",icon:e(V),content:`删除数据表后，表中所有数据将一并被删除，不可恢复。确认删除数据表${o.name}吗?`,okText:n+" 确 定",okType:"danger",okButtonProps:{disabled:!0},cancelText:"取 消",onOk(){$(o)},onCancel(){}}),r=setInterval(()=>{n==1?(c.update({okText:"确 定",okButtonProps:{disabled:!1}}),clearInterval(r),r=void 0):(n-=1,c.update({okText:n+" 确 定",okButtonProps:{disabled:!0}}))},1e3)},$=({id:o})=>{U({id:o}).then(()=>{u.success("删除成功"),_()})};return(o,s)=>{const n=N,c=O,r=Y,S=W,E=tt;return d(),v(x,null,[t("div",ot,[e(Z,{class:"mb-16",tabs:g.value,active:"/database/list"},null,8,["tabs"]),e(H,{style:{"margin-bottom":"16px"},title:"使用说明"},{default:a(()=>s[3]||(s[3]=[t("div",null,[t("p",null," 1、数据库可以关联到问答机器人，从对话中提取信息存储到指定数据表中，也可以利用数据表中已有数据回复用户咨询。创建机器人之前请先创建知识库，然后去机器人设置中关联。 "),t("p",null,"2、支持Excel模版和Json模版导入已有数据，也支持将存储的数据导出Excel表。")],-1)])),_:1,__:[3]}),t("div",st,[t("div",et,[t("div",it,[t("h3",at,"全部 ("+l(m.value.length)+")",1)]),t("div",nt,[P.value?(d(),I(n,{key:0,type:"primary",onClick:s[0]||(s[0]=i=>k())},{icon:a(()=>[e(X(K))]),default:a(()=>[s[4]||(s[4]=R(" 新建数据库 "))]),_:1,__:[4]})):L("",!0)])]),t("div",rt,[(d(!0),v(x,null,q(m.value,i=>(d(),v("div",{class:"list-item-wrapper",key:i.id},[t("div",{class:"list-item",onClick:p(h=>T(i),["stop"])},[t("div",ct,[s[5]||(s[5]=t("img",{class:"library-icon",src:J,alt:""},null,-1)),t("div",dt,[t("div",pt,l(i.name),1)])]),t("div",mt,[t("div",_t,l(i.description),1)]),t("div",ut,[t("div",ft,[t("span",vt,"数据数："+l(i.entry_count)+"条",1),t("span",bt,"关联应用："+l(i.robot_nums||0),1)]),t("div",{class:"action-box",onClick:s[2]||(s[2]=p(()=>{},["stop"]))},[e(E,null,{overlay:a(()=>[e(S,null,{default:a(()=>[e(r,null,{default:a(()=>[t("a",{href:"javascript:;",onClick:p(h=>k(i),["stop"])},"编 辑",8,kt)]),_:2},1024),e(r,null,{default:a(()=>[t("a",{class:"delete-text-color",href:"javascript:;",onClick:h=>w(i)},"删 除",8,ht)]),_:2},1024)]),_:2},1024)]),default:a(()=>[t("div",{class:"action-item",onClick:s[1]||(s[1]=p(()=>{},["stop"]))},[e(c,{class:"action-icon",name:"point-h"})])]),_:2},1024)])])],8,lt)]))),128))])])]),e(G,{onOk:_,ref_key:"addDataSheetRef",ref:b},null,512)],64)}}},lo=F(yt,[["__scopeId","data-v-c676325e"]]);export{lo as default};
