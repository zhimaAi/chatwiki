import{e as l,aw as W,f as G,w as te,ac as i,as as o,F as P,ax as U,av as j,ad as a,az as R,u as k,ai as D,k as e,at as w,ar as r,G as N,ae as T,aA as H,aB as oe,B as ae,r as V,af as q,J as se,o as ne,ak as re,ah as z}from"./vue-chunks-CGLjTDrY.js";import{u as le}from"./global-CNyN0DwS.js";import{_ as B,b as K,a as Q,e as X,d as O,c as A,r as ie,f as ce}from"../../index-C5-B0r5-.js";import{a as ue,L as _e}from"./locale-dropdown-XBIIjCru.js";import{g as de}from"./index-AgSL8KLK.js";import{D as pe,h as Y,i as Z,j as E,k as ee,m as me,n as ve,F as J,o as be,e as ye,f as he,M as fe,b as ke}from"./ui-antd-B11sc9DP.js";import{v as ge}from"./validate-8MtiUsxW.js";import{u as we}from"./guide-JRB57zT0.js";import"./neo4j-Bk0ySkcX.js";import"./utils-BH-4gQMj.js";import"./other-BrZCAsTs.js";const Ce={class:"navbar-wrapper"},Se={class:"navbar"},$e=["onClick"],xe={class:"nav-name"},Le={class:"down-icon"},Me=["onClick"],Pe={class:"nav-name"},Re={__name:"layout-navbar",setup(I){const{t}=K("layout.navbar"),c=Q(),y=j(),v=W(),h=l(()=>v.meta.activeMenu||""),u=l(()=>v.path.split("/")[1]),_=G(localStorage.getItem("local__robot_menu_key")||"robot_detail"),f=l(()=>[{id:0,key:"explore",label:"explore",title:t("explore"),icon:"nav-explore",path:"/explore/index",permission:["AbilityCenter"]},{id:1,key:"robot",label:"robot",title:t("robot"),icon:"nav-robot",path:"/robot/list",permission:["RobotManage"]},{id:2,key:"library",label:"library",title:t("knowledge_base"),icon:"nav-library",path:"/library/list",permission:["LibraryManage"]},{id:3,key:"PublicLibrary",label:"PublicLibrary",title:t("document"),icon:"nav-doc",path:"/public-library/list",permission:["OpenLibDocManage"]},{id:4,key:"library-search",label:"library-search",title:t("search"),icon:"search",path:"/library-search/index",permission:["SearchManage"]},{id:5,key:"chat-monitor",label:"chat-monitor",title:t("session"),icon:"nav-chat",path:"/chat-monitor/index",permission:["ChatSessionManage"]}]),C=l(()=>c.top_navigate),$=l(()=>C.value.filter(d=>d.open).map(d=>f.value.find(m=>m.key===d.id)).filter(Boolean)),x=s=>{y.push(s.path)},g=(s,d)=>{localStorage.setItem("local__robot_menu_key",s),_.value=s,S(d)},S=s=>{_.value=="robot_detail"?n():x(s)},n=async()=>{try{const{data:s=[]}=await de();if(s.length===0){y.push("/robot/list");return}const d=localStorage.getItem("last_local_robot_id");let m;d&&(m=s.find(p=>p.id==d)),m=m||s[0];const{id:L,robot_key:M,application_type:b}=m;y.push({path:`/robot/config/${b==1?"workflow":"basic-config"}`,query:{id:L,robot_key:M}})}catch{y.push("/robot/list")}};return te(()=>v.path,()=>{},{immediate:!0}),(s,d)=>{const m=O,L=Z,M=Y,b=ee;return a(),i("div",Ce,[o("div",Se,[(a(!0),i(P,null,U($.value,p=>(a(),i(P,{key:p.key},[k(X)(p.permission)?(a(),i(P,{key:0},[p.key==="robot"?(a(),i("div",{key:0,class:D(["nav-menu",{active:p.key===u.value||p.key===h.value}]),onClick:F=>S(p)},[e(m,{class:"nav-icon",name:p.icon},null,8,["name"]),o("span",xe,w(p.title),1),e(b,null,{overlay:r(()=>[e(M,null,{default:r(()=>[e(L,{key:"1",onClick:F=>g("robot_detail",p)},{default:r(()=>[o("div",{class:D(["robot-ment-item",{"robot-active-item":_.value=="robot_detail"}])},[e(k(E),{class:"anticon-check"}),N(" "+w(k(t)("enter_robot_detail")),1)],2)]),_:1},8,["onClick"]),e(L,{key:"2",onClick:F=>g("robot_list",p)},{default:r(()=>[o("div",{class:D(["robot-ment-item",{"robot-active-item":_.value=="robot_list"}])},[e(k(E)),N(" "+w(k(t)("enter_robot_manage")),1)],2)]),_:1},8,["onClick"])]),_:2},1024)]),default:r(()=>[o("div",Le,[e(k(pe))])]),_:2},1024)],10,$e)):(a(),i("div",{key:1,class:D(["nav-menu",{active:p.key===u.value||p.key===h.value}]),onClick:F=>x(p)},[e(m,{class:"nav-icon",name:p.icon},null,8,["name"]),o("span",Pe,w(p.title),1)],10,Me))],64)):R("",!0)],64))),128))])])}}},Ie=B(Re,[["__scopeId","data-v-bb5eb647"]]),Be={class:"layout-breadcrumb"},Te={key:1,class:"page-title"},De={__name:"layout-breadcrumb",props:{title:{type:[String,Boolean],default:""},items:{type:[Array,Boolean],default:()=>[]}},setup(I){const t=I;return(c,y)=>{const v=H("router-link"),h=ve,u=me;return a(),i("div",Be,[t.items.length>0?(a(),T(u,{key:0},{default:r(()=>[(a(!0),i(P,null,U(t.items,(_,f)=>(a(),i(P,{key:_.title},[f!==t.items.length-1?(a(),T(h,{key:0},{default:r(()=>[e(v,{to:_.path},{default:r(()=>[N(w(_.title),1)]),_:2},1032,["to"])]),_:2},1024)):(a(),T(h,{key:1},{default:r(()=>[N(w(_.title),1)]),_:2},1024))],64))),128))]),_:1})):(a(),i("div",Te,w(t.title),1))])}}},Ne=B(De,[["__scopeId","data-v-3def9f41"]]),Fe={key:0,class:"user-dropdown"},Ge=["src"],Ue={class:"menu-name"},je=["onClick"],Oe={class:"menu-name"},Ae={class:"menu-name"},Ve={__name:"user-dropdown",setup(I){const{t}=K(),c=Q(),y=j(),v=A(),{userInfo:h,avatar:u,user_name:_}=oe(v);l(()=>_.value.length>11?_.value.substring(0,11)+"...":_.value);const f=()=>{v.logoutConfirm(!0)},C=()=>{window.open("/#/user/model","_blank","noopener")},$=l(()=>[{id:1,key:"robot",label:"robot",title:t("layout.navbar.application"),icon:"nav-robot",path:"/robot/list",permission:["RobotManage"]},{id:2,key:"library",label:"library",title:t("layout.navbar.knowledge_base"),icon:"nav-library",path:"/library/list",permission:["LibraryManage"]},{id:3,key:"PublicLibrary",label:"PublicLibrary",title:t("layout.navbar.document"),icon:"nav-doc",path:"/public-library/list",permission:["OpenLibDocManage"]},{id:4,key:"library-search",label:"library-search",title:t("layout.navbar.search"),icon:"search",path:"/library-search/index",permission:["SearchManage"]},{id:5,key:"chat-monitor",label:"chat-monitor",title:t("layout.navbar.session"),icon:"nav-chat",path:"/chat-monitor/index",permission:["ChatSessionManage"]}]),x=l(()=>c.top_navigate),g=l(()=>x.value.filter(s=>!s.open).map(s=>$.value.find(d=>d.key===s.id)).filter(Boolean)),S=n=>{y.push(n.path)};return(n,s)=>{const d=O,m=Z,L=Y,M=ee;return k(h)?(a(),i("div",Fe,[e(M,null,{overlay:r(()=>[e(L,null,{default:r(()=>[e(m,null,{default:r(()=>[o("a",{class:"menu-item",href:"javascript:;",onClick:C},[e(d,{class:"menu-icon",name:"system-setting"}),o("span",Ue,w(k(t)("layout.navbar.system_manage")),1)])]),_:1}),(a(!0),i(P,null,U(g.value,b=>(a(),i(P,{key:b.id},[k(X)(b.permission)?(a(),T(m,{key:0},{default:r(()=>[o("a",{class:"menu-item",href:"javascript:;",onClick:p=>S(b)},[e(d,{class:"menu-icon",name:b.icon},null,8,["name"]),o("span",Oe,w(b.title),1)],8,je)]),_:2},1024)):R("",!0)],64))),128)),e(m,null,{default:r(()=>[e(ue)]),_:1}),e(m,null,{default:r(()=>[o("a",{class:"menu-item",href:"javascript:;",onClick:f},[e(d,{class:"menu-icon",name:"logout"}),o("span",Ae,w(k(t)("layout.navbar.logout")),1)])]),_:1})]),_:1})]),default:r(()=>[o("div",{class:"user-dropdown-link",onClick:s[0]||(s[0]=ae(()=>{},["prevent"]))},[o("img",{class:"user-avatar",src:k(u),alt:""},null,8,Ge)])]),_:1})])):R("",!0)}}},qe=B(Ve,[["__scopeId","data-v-59a6b240"]]),ze={class:"form-box"},Ee={__name:"reset-password",setup(I,{expose:t}){const c=A(),y=J.useForm,v=G(!0),h=G("重置登录密码"),u=V({password:"",check_password:"",id:c.userInfo.user_id}),_=V({password:[{message:"请输入登录密码",required:!0},{validator:async(S,n)=>!ge(n)&&n?Promise.reject("密码必须包含字母、数字或者字符中的两种，6-32位"):Promise.resolve()}],check_password:[{message:"请输入确认密码",required:!0},{validator:async(S,n)=>n!=u.password&&n?Promise.reject("两次输入的密码不一致"):Promise.resolve()}]}),{resetFields:f,validate:C,validateInfos:$}=y(u,_),x=()=>{C().then(()=>{ie({...se(u)}).then(S=>{ke.success("修改成功"),v.value=!1,c.reset(!0)})})},g=()=>{c.setResetPassModal()};return t({open}),(S,n)=>{const s=be,d=he,m=ye,L=J,M=fe;return a(),i("div",null,[e(M,{open:v.value,"onUpdate:open":n[2]||(n[2]=b=>v.value=b),title:h.value,onOk:x,width:"520px",onCancel:g},{default:r(()=>[e(s,{class:"alert-box",message:"您还未修改初始密码，为了保障您的数据安全，请您尽快重置密码。",type:"info","show-icon":""}),o("div",ze,[e(L,{layout:"vertical"},{default:r(()=>[e(m,q({label:"登录密码"},k($).password),{default:r(()=>[e(d,{value:u.password,"onUpdate:value":n[0]||(n[0]=b=>u.password=b),placeholder:"密码必须包含字母、数字或者字符中的两种，6-32位"},null,8,["value"])]),_:1},16),e(m,q({label:"确认密码"},k($).check_password),{default:r(()=>[e(d,{value:u.check_password,"onUpdate:value":n[1]||(n[1]=b=>u.check_password=b),placeholder:"请重新输入密码"},null,8,["value"])]),_:1},16)]),_:1})])]),_:1},8,["open","title"])])}}},Je=B(Ee,[["__scopeId","data-v-40aed5c2"]]),We={__name:"beginner-guide-tag",setup(I){const t=we(),c=ce(),y=l(()=>c.role_type),v=l(()=>+t.total_process),h=j(),u=()=>{t.getUseGuideProcess(),h.push("/guide")};return ne(()=>{t.getUseGuideProcess()}),(_,f)=>{const C=O;return y.value==1&&v.value!=100?(a(),i("div",{key:0,class:"beginner-guide-tag",onClick:u},[f[0]||(f[0]=o("span",{class:"red-dot"},null,-1)),e(C,{class:"nav-icon",name:"guide"}),f[1]||(f[1]=o("span",{class:"nav-name"},"新手指引",-1))])):R("",!0)}}},He=B(We,[["__scopeId","data-v-9daee4d8"]]),Ke={class:"admin-layout"},Qe={key:0,class:"layout-header-wrapper"},Xe={class:"layout-header"},Ye={class:"header-left"},Ze={class:"header-body"},et={class:"header-right"},tt={class:"item-box"},ot={class:"layout-body"},at={key:0,class:"layout-breadcrumb-wrapper"},st={__name:"index",setup(I){const t=le(),c=W(),y=A(),v=l(()=>c.name!="robotWorkflow"?!1:t.hideLayoutTopAndBottom||!1),h=l(()=>c.meta.isCustomPage||!1),u=l(()=>c.meta.pageStyle||{}),_=l(()=>c.meta.bgColor||"#ffffff"),f=l(()=>c.meta.breadcrumb||[]),C=l(()=>c.meta.hideTitle||!1),$=l(()=>c.meta.title||!1),x=l(()=>{var g;return((g=y.userInfo)==null?void 0:g.d_pass)==1&&y.isShowResetPassModal});return(g,S)=>{const n=H("router-view");return a(),i("div",Ke,[v.value?R("",!0):(a(),i("div",Qe,[o("div",Xe,[o("div",Ye,[e(_e),e(He)]),o("div",Ze,[e(Ie)]),o("div",et,[o("div",tt,[e(qe)])])])])),o("div",ot,[h.value?re(g.$slots,"default",{key:0},()=>[e(n)],!0):(a(),i("div",{key:1,class:"page-wrapper",style:z({"background-color":_.value})},[C.value?R("",!0):(a(),i("div",at,[e(Ne,{items:f.value,title:$.value},null,8,["items","title"])])),o("div",{class:"page-container",style:z({...u.value})},[e(n)],4)],4))]),x.value?(a(),T(Je,{key:1})):R("",!0)])}}},bt=B(st,[["__scopeId","data-v-ff62b8d1"]]);export{bt as default};
