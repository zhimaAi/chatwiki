import{_ as W,ac as kt,ab as $t,d as ct,a7 as X}from"../../index-C5-B0r5-.js";import{av as dt,f as v,o as Y,ac as a,ad as s,ae as B,k as r,F as R,ax as z,as as t,at as l,ar as g,u as E,G as j,az as A,B as F,e as Z,l as tt,ai as K,r as bt,aw as Ct}from"./vue-chunks-CGLjTDrY.js";import{E as ut}from"./empty-box-C5iAwHZS.js";import{c as xt,b as _t,s as H,a as et,r as rt,t as wt,u as Rt,e as it,f as Dt,o as Ot,h as Pt}from"./index-y6Ut8zwU.js";import{L as ft}from"./loading-box-CAF9T3Ud.js";import{U as pt}from"./update-modal-B90duPH9.js";import{v as vt,J as ht,ay as st,ae as nt,B as ot,a6 as gt,as as at,aA as lt,M as G,b as V,Q as Tt,a0 as St,I as Mt}from"./ui-antd-B11sc9DP.js";import{_ as mt}from"./tool-icon-IWVrYlVb.js";import{_ as yt}from"./no-permission-DtJ3NYHG.js";import{F as It,P as Bt}from"./plugin-config-modal-Cf1BePkr.js";import{_ as zt}from"./main-tab-l3aTCLmE.js";import"./neo4j-Bk0ySkcX.js";import"./utils-BH-4gQMj.js";import"./other-BrZCAsTs.js";import"./empty-BFmzY9bl.js";/* empty css                                                                     */import"./list-tabs-QMUGd4nq.js";const jt={class:"_plugin-box"},qt={key:1,class:"plugin-list"},Nt=["onClick"],Ut={class:"type-tag"},At={class:"base-info"},Lt=["src"],Ft={class:"info"},Et={class:"head"},Jt={class:"name zm-line1"},Vt={class:"source"},Wt={class:"version"},Gt={class:"action-box"},Ht={class:"left"},Qt={class:"right"},Kt=["href"],Xt=["onClick"],Yt={key:1},Zt=["onClick"],te={__name:"remotePlugins",props:{filterData:{type:Object,default:null}},emits:["installReport"],setup(J,{expose:q,emit:O}){const y=O,d=J,f=dt(),_=v(null),w=v(!0),D=v([]),M=v({});Y(()=>{k()});function P(){D.value=[],k()}async function k(){w.value=!0,await m(),xt(d.filterData).then(c=>{let e=(c==null?void 0:c.data)||[];e.forEach(n=>{var p;let{local:u,has_update:T}=((p=M.value)==null?void 0:p[n.name])||{};n.local=u,n.has_update=T}),D.value=e}).finally(()=>{w.value=!1})}async function m(){await _t().then(c=>{let e=(c==null?void 0:c.data)||[];y("installReport",e.length);let n={};e.forEach(u=>{n[u.local.name]={local:u.local,has_update:u.remote.latest_version!=u.local.version}}),M.value=n})}function $(c){f.push({path:"/plugins/detail",query:{name:c.name}})}function b(c){_.value.show(c,c.latest_version_detail,c.local||null)}return q({search:P}),(c,e)=>{const n=vt,u=ct,T=ht;return s(),a("div",jt,[w.value?(s(),B(ft,{key:0})):D.value.length?(s(),a("div",qt,[(s(!0),a(R,null,z(D.value,p=>(s(),a("div",{onClick:C=>$(p),key:p.name,class:"plugin-item"},[t("div",Ut,l(p.filter_type_title),1),t("div",At,[t("img",{class:"avatar",src:p.icon},null,8,Lt),t("div",Ft,[t("div",Et,[t("span",Jt,l(p.title),1)]),t("div",Vt,l(p.author),1)])]),r(n,{title:E($t)(p.description,p,14,1,0),placement:"top"},{default:g(()=>[t("div",{class:"desc zm-line1",ref_for:!0,ref:C=>E(kt)(C,p)},l(p.description),513)]),_:2},1032,["title"]),t("div",Wt,"版本：v"+l(p.latest_version),1),t("div",Gt,[t("div",Ht,[r(u,{name:"download"}),j(" "+l(p.installed_count||0),1)]),t("div",Qt,[p.help_url?(s(),a(R,{key:0},[t("a",{onClick:e[0]||(e[0]=F(()=>{},["stop"])),class:"c595959",href:p.help_url,target:"_blank"},"使用说明",8,Kt),r(T,{type:"vertical"})],64)):A("",!0),p.local?(s(),a(R,{key:1},[p.has_update?(s(),a("a",{key:0,onClick:F(C=>b(p),["stop"])},"更新",8,Xt)):(s(),a("span",Yt,"已安装"))],64)):(s(),a("a",{key:2,onClick:F(C=>b(p),["stop"])},"安装",8,Zt))])])],8,Nt))),128))])):(s(),B(ut,{key:2,title:"暂无可用插件"})),r(pt,{ref_key:"updateRef",ref:_,onOk:k},null,512)])}}},ee=W(te,[["__scopeId","data-v-204abeeb"]]),se={class:"head-box"},ne={class:"base-info-box"},oe=["src"],ae={class:"info-box"},le={class:"left"},ie={class:"name zm-line1"},ce={class:"right"},de={class:"link"},ue={class:"tools-box"},_e={class:"info"},re={class:"tit zm-line1"},fe={class:"btns"},pe=["onClick"],ve=["onClick"],he={class:"body-box"},ge={key:0,class:"no-auth-box"},me={key:1,class:"action-box"},ye={class:"tit"},ke={class:"desc"},$e={class:"params"},be={class:"params-box"},Ce={class:"field"},xe={class:"name"},we={class:"type"},Re={key:0,class:"required"},De={class:"desc"},Oe={__name:"feishu-config-box",emits:["del","edit","auth"],setup(J,{expose:q,emit:O}){const y=v(null),d=v(!1),f=v({}),_=v({}),w=v({}),D=Z(()=>Object.keys(_.value).length);function M(e){f.value=e,k(),m(),d.value=!0}function P(){d.value=!1}function k(){et({name:f.value.name}).then(e=>{_.value=X(e==null?void 0:e.data,{})})}function m(){rt({name:f.value.name,action:"default/get-schema",params:{}}).then(e=>{let n=(e==null?void 0:e.data)||{};for(let u in n)n[u].type!="node"&&delete n[u];w.value=n})}function $(){y.value.show(_.value)}function b(e,n){for(let u in _.value)_.value[u].is_default=u==n;H({name:f.value.name,data:JSON.stringify(_.value)}).then(u=>{k()})}function c(e,n){G.confirm({title:"提示",content:"确认删除该配置？",onOk:()=>{delete _.value[n],H({name:f.value.name,data:JSON.stringify(_.value)}).then(u=>{k(),V.success("已删除")})}})}return q({show:M,hide:P}),(e,n)=>{const u=at,T=ot,p=nt,C=lt;return s(),a("div",null,[r(C,{open:d.value,"onUpdate:open":n[1]||(n[1]=x=>d.value=x),placement:"right",width:"400px",headerStyle:{display:"none"},bodyStyle:{padding:0}},{default:g(()=>[t("div",se,[t("div",ne,[t("img",{class:"avatar",src:f.value.icon},null,8,oe),t("div",ae,[t("div",le,[t("div",ie,l(f.value.title),1),t("div",null,l(f.value.author),1)]),t("div",ce,[r(E(st),{onClick:n[0]||(n[0]=x=>d.value=!1),class:"icon"})])])]),t("div",de,l(f.value.description),1),D.value>0?(s(),B(p,{key:0,placement:"bottom"},{content:g(()=>[t("div",ue,[(s(!0),a(R,null,z(_.value,(x,I)=>(s(),a("div",{key:I,class:"tool-item"},[n[3]||(n[3]=t("img",{class:"cover",src:mt},null,-1)),t("div",_e,[t("div",re,l(x.name),1),t("div",fe,[x.is_default?(s(),B(u,{key:0,color:"#f50"},{default:g(()=>[...n[2]||(n[2]=[j("默认",-1)])]),_:1})):(s(),a("a",{key:1,onClick:o=>b(x,I)},"设为默认",8,pe)),t("a",{onClick:o=>c(x,I)},"删除",8,ve)])])]))),128))])]),default:g(()=>[r(T,{type:"primary",icon:tt(E(gt)),class:"auth-btn",onClick:$},{default:g(()=>[j(" 已授权"+l(D.value)+"个凭证 ",1)]),_:1},8,["icon"])]),_:1})):(s(),B(T,{key:1,type:"primary",class:"auth-btn",onClick:$},{default:g(()=>[...n[4]||(n[4]=[j("立即授权",-1)])]),_:1}))]),t("div",he,[D.value?(s(),a("div",me,[(s(!0),a(R,null,z(w.value,(x,I)=>(s(),a("div",{key:I,class:"action-item"},[t("div",ye,l(x.title),1),t("div",ke,l(x.desc),1),t("div",$e,[(s(!0),a(R,null,z(Object.keys(x.params).slice(0,3),(o,i)=>(s(),B(u,{key:i,bordered:!1},{default:g(()=>[j(l(o),1)]),_:2},1024))),128)),r(p,{placement:"right"},{content:g(()=>[t("div",be,[(s(!0),a(R,null,z(x.params,(o,i)=>(s(),a("div",{key:i,class:"param-item"},[t("div",Ce,[t("span",xe,l(i),1),t("span",we,l(o.type),1),o.required?(s(),a("span",Re,"必填")):A("",!0)]),t("div",De,l(o.desc),1)]))),128))])]),default:g(()=>[n[8]||(n[8]=t("a",null,"参数",-1))]),_:2},1024)])]))),128))])):(s(),a("div",ge,[n[5]||(n[5]=t("img",{src:yt},null,-1)),n[6]||(n[6]=t("div",{class:"tit"},"需要授权",-1)),n[7]||(n[7]=t("div",{class:"desc"},"授权后，配置将显示在这里",-1)),t("a",{class:"link",onClick:$},"立即授权")]))])]),_:1},8,["open"]),r(It,{ref_key:"configModalRef",ref:y,onChange:k},null,512)])}}},Pe=W(Oe,[["__scopeId","data-v-0cc05fed"]]),Te={class:"head-box"},Se={class:"base-info-box"},Me=["src"],Ie={class:"info-box"},Be={class:"left"},ze={class:"name zm-line1"},je={class:"right"},qe={class:"link"},Ne={class:"tools-box"},Ue={class:"info"},Ae={class:"tit zm-line1"},Le={class:"btns"},Fe=["onClick"],Ee=["onClick"],Je={class:"body-box"},Ve={key:0,class:"no-auth-box"},We={key:1,class:"action-box"},Ge={class:"tit"},He={class:"desc"},Qe={class:"params"},Ke={class:"params-box"},Xe={class:"field"},Ye={class:"name"},Ze={class:"type"},ts={key:0,class:"required"},es={class:"desc"},ss={__name:"plugin-config-box",setup(J,{expose:q}){const O=v(!1),y=v({}),d=v({}),f=v({}),_=v(null),w=Z(()=>Object.keys(d.value).length);function D(c,e){y.value=c,k(),m(e),O.value=!0}function M(){O.value=!1}function P(){_.value&&_.value.show(d.value,y.value.name,f.value)}function k(){et({name:y.value.name}).then(c=>{d.value=X(c==null?void 0:c.data,{})})}function m(c){let e=c||{};for(let n in e)e[n].type!="node"&&delete e[n];f.value=e}function $(c,e){for(let n in d.value)d.value[n].is_default=n==e;H({name:y.value.name,data:JSON.stringify(d.value)}).then(()=>{k()})}function b(c,e){G.confirm({title:"提示",content:"确认删除该配置？",onOk:()=>{delete d.value[e],H({name:y.value.name,data:JSON.stringify(d.value)}).then(()=>{k(),V.success("已删除")})}})}return q({show:D,hide:M}),(c,e)=>{const n=at,u=ot,T=nt,p=lt;return s(),a("div",null,[r(p,{open:O.value,"onUpdate:open":e[1]||(e[1]=C=>O.value=C),placement:"right",width:"400px",headerStyle:{display:"none"},bodyStyle:{padding:0}},{default:g(()=>[t("div",Te,[t("div",Se,[t("img",{class:"avatar",src:y.value.icon},null,8,Me),t("div",Ie,[t("div",Be,[t("div",ze,l(y.value.title),1),t("div",null,l(y.value.author),1)]),t("div",je,[r(E(st),{onClick:e[0]||(e[0]=C=>O.value=!1),class:"icon"})])])]),t("div",qe,l(y.value.description),1),w.value>0?(s(),B(T,{key:0,placement:"bottom"},{content:g(()=>[t("div",Ne,[(s(!0),a(R,null,z(d.value,(C,x)=>(s(),a("div",{key:x,class:"tool-item"},[e[3]||(e[3]=t("img",{class:"cover",src:mt},null,-1)),t("div",Ue,[t("div",Ae,l(C.name),1),t("div",Le,[C.is_default?(s(),B(n,{key:0,color:"#f50"},{default:g(()=>[...e[2]||(e[2]=[j("默认",-1)])]),_:1})):(s(),a("a",{key:1,onClick:I=>$(C,x)},"设为默认",8,Fe)),t("a",{onClick:I=>b(C,x)},"删除",8,Ee)])])]))),128))])]),default:g(()=>[r(u,{type:"primary",icon:tt(E(gt)),class:"auth-btn",onClick:P},{default:g(()=>[j("已授权"+l(w.value)+"个凭证",1)]),_:1},8,["icon"])]),_:1})):(s(),B(u,{key:1,type:"primary",class:"auth-btn",onClick:P},{default:g(()=>[...e[4]||(e[4]=[j("立即授权",-1)])]),_:1}))]),t("div",Je,[w.value?(s(),a("div",We,[(s(!0),a(R,null,z(f.value,(C,x)=>(s(),a("div",{key:x,class:"action-item"},[t("div",Ge,l(C.title),1),t("div",He,l(C.desc),1),t("div",Qe,[(s(!0),a(R,null,z(Object.keys(C.params).slice(0,3),(I,o)=>(s(),B(n,{key:o,bordered:!1},{default:g(()=>[j(l(I),1)]),_:2},1024))),128)),r(T,{placement:"right"},{content:g(()=>[t("div",Ke,[(s(!0),a(R,null,z(C.params,(I,o)=>(s(),a("div",{key:o,class:"param-item"},[t("div",Xe,[t("span",Ye,l(o),1),t("span",Ze,l(I.type),1),I.required?(s(),a("span",ts,"必填")):A("",!0)]),t("div",es,l(I.desc),1)]))),128))])]),default:g(()=>[e[8]||(e[8]=t("a",null,"参数",-1))]),_:2},1024)])]))),128))])):(s(),a("div",Ve,[e[5]||(e[5]=t("img",{src:yt},null,-1)),e[6]||(e[6]=t("div",{class:"tit"},"需要授权",-1)),e[7]||(e[7]=t("div",{class:"desc"},"授权后，配置将显示在这里",-1)),t("a",{class:"link",onClick:P},"立即授权")]))])]),_:1},8,["open"]),r(Bt,{ref_key:"configModalRef",ref:_,onChange:k},null,512)])}}},ns=W(ss,[["__scopeId","data-v-ac059a5d"]]),os={class:"head-box"},as={class:"base-info-box"},ls=["src"],is={class:"info-box"},cs={class:"left"},ds={class:"name zm-line1"},us={class:"right"},_s={class:"link"},rs={class:"body-box"},fs={class:"action-box"},ps={class:"tit"},vs={class:"desc"},hs={class:"params"},gs={class:"params-box"},ms={class:"field"},ys={class:"name"},ks={class:"type"},$s={key:0,class:"required"},bs={class:"desc"},Cs={__name:"config-box",emits:["del","edit","auth"],setup(J,{expose:q,emit:O}){const y=O,d=v(!1),f=v({}),_=v({}),w=v(null);function D(k){f.value=k,P()}function M(){d.value=!1}function P(){rt({name:f.value.name,action:"default/get-schema",params:{}}).then(k=>{let m=(k==null?void 0:k.data)||{};if(Object.values(m||{}).some(b=>b&&b.use_plugin_config===!0)){w.value&&w.value.show(f.value,m),d.value=!1;return}for(let b in m)m[b].type!="node"&&delete m[b];_.value=m,d.value=!0})}return q({show:D,hide:M}),(k,m)=>{const $=at,b=nt,c=lt;return s(),a("div",null,[r(c,{open:d.value,"onUpdate:open":m[1]||(m[1]=e=>d.value=e),placement:"right",width:"400px",headerStyle:{display:"none"},bodyStyle:{padding:0}},{default:g(()=>[t("div",os,[t("div",as,[t("img",{class:"avatar",src:f.value.icon},null,8,ls),t("div",is,[t("div",cs,[t("div",ds,l(f.value.title),1),t("div",null,l(f.value.author),1)]),t("div",us,[r(E(st),{onClick:m[0]||(m[0]=e=>d.value=!1),class:"icon"})])])]),t("div",_s,l(f.value.description),1)]),t("div",rs,[t("div",fs,[(s(!0),a(R,null,z(_.value,(e,n)=>(s(),a("div",{key:n,class:"action-item"},[t("div",ps,l(e.title),1),t("div",vs,l(e.desc),1),t("div",hs,[(s(!0),a(R,null,z(Object.keys(e.params).slice(0,3),(u,T)=>(s(),B($,{key:T,bordered:!1},{default:g(()=>[j(l(u),1)]),_:2},1024))),128)),r(b,{placement:"right"},{content:g(()=>[t("div",gs,[(s(!0),a(R,null,z(e.params,(u,T)=>(s(),a("div",{key:T,class:"param-item"},[t("div",ms,[t("span",ys,l(T),1),t("span",ks,l(u.type),1),u.required?(s(),a("span",$s,"必填")):A("",!0)]),t("div",bs,l(u.desc),1)]))),128))])]),default:g(()=>[m[3]||(m[3]=t("a",null,"参数",-1))]),_:2},1024)])]))),128))])])]),_:1},8,["open"]),r(ns,{ref_key:"pluginConfigRef",ref:w,onAuth:m[2]||(m[2]=e=>y("auth"))},null,512)])}}},xs=W(Cs,[["__scopeId","data-v-93844460"]]),ws={class:"_plugin-box"},Rs={key:1,class:"plugin-list"},Ds=["onClick"],Os={class:"type-tag"},Ps={class:"base-info"},Ts=["src"],Ss={class:"info"},Ms={class:"head"},Is={class:"name zm-line1"},Bs={class:"source"},zs={class:"version"},js={key:0,class:"tag"},qs={class:"action-box"},Ns={class:"right"},Us=["onClick"],As=["href"],Ls=["onClick"],Fs=["onClick"],Es={class:"text-center mt24"},Js={__name:"installPlugins",props:{filterData:{type:Object,default:null}},emits:["installReport","tabChange"],setup(J,{expose:q,emit:O}){const y=O,d=J,f=dt(),_=v(null),w=v(null),D=v(null),M=v(!0),P=v([]),k=["feishu_bitable","official_account_profile","official_batch_tag","official_send_template_message","official_send_message","official_intelligent_api","official_account_batch_send","official_account_comment"];Y(()=>{e()});function m(o,i){if(!o)return null;const U=document.createElement("canvas").getContext("2d");U.font='14px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif';const N=U.measureText(o).width,Q=(i==null?void 0:i.title_width)||120;return N>Q?o:null}function $(){P.value=[],e()}const b=v([]),c=Z(()=>d.filterData.filter_type==0||d.filterData.filter_type==5?[...b.value,...P.value]:P.value);function e(){wt(d.filterData).then(o=>{let i=(o==null?void 0:o.data)||[];i=i.map(S=>{var U,N;return{...S.remote,local:S.local,has_update:((U=S.remote)==null?void 0:U.latest_version)!=((N=S.local)==null?void 0:N.version),installing:!1}}),b.value=i}),M.value=!0,_t(d.filterData).then(o=>{let i=(o==null?void 0:o.data)||[];y("installReport",i.length),i=i.map(S=>{var U,N;return{...S.remote,local:S.local,has_update:((U=S.remote)==null?void 0:U.latest_version)!=((N=S.local)==null?void 0:N.version),installing:!1}}),P.value=i}).finally(()=>{M.value=!1})}async function n(o){const i=()=>o.local.has_loaded=!o.local.has_loaded;if(!o.local.has_loaded)G.confirm({title:"确认关闭该插件？",content:"关闭后，其他应用的位置都不可使用！确认关闭？",okText:"确定",cancelText:"取消",onOk:()=>{o.local.type=="trigger"?it({id:o.trigger_config_id,switch_status:0}).then(()=>{V.success("已关闭")}).catch(i):Dt({name:o.name}).then(()=>{V.success("已关闭")}).catch(i)},onCancel(){i()}});else{if(o.local.type=="trigger"){it({id:o.trigger_config_id,switch_status:1}).then(()=>{V.success("已开启")});return}if(o.name=="feishu_bitable"){let{data:S}=await et({name:o.name});if(S=X(S,{}),!Object.keys(S).length)return i(),G.confirm({title:"授权飞书应用接口权限",content:tt("div",{style:{color:" red"}},"请先完成信息配置，获取接口权限"),okText:"确定",cancelText:"取消",onOk:()=>{u(o)}})}Ot({name:o.name}).then(()=>{V.success("已开启")}).catch(i)}}function u(o){w.value.show(o)}function T(o){G.confirm({title:"确认删除该插件？",content:"删除后，其他应用的位置都不可使用！确认删除？",okText:"确定",cancelText:"取消",onOk:()=>{Rt({name:o.name}).then(()=>{V.success("已删除"),e()})}})}function p(o){o.local.type!="trigger"&&f.push({path:"/plugins/detail",query:{name:o.name}})}function C(o){o.name==="feishu_bitable"?u(o):D.value.show(o)}function x(o){_.value.show(o,o.latest_version_detail,o.local)}function I(o,i){o&&i&&(i.title_width=o.offsetWidth)}return q({search:$}),(o,i)=>{const S=vt,U=Tt,N=ht,Q=ot;return s(),a("div",ws,[M.value?(s(),B(ft,{key:0})):c.value.length?(s(),a("div",Rs,[(s(!0),a(R,null,z(c.value,h=>(s(),a("div",{onClick:L=>p(h),key:h.name,class:K(["plugin-item",{"trigger-plugin-item":h.local.type=="trigger"}])},[t("div",Os,l(h.filter_type_title),1),t("div",Ps,[t("img",{class:"avatar",src:h.icon},null,8,Ts),t("div",Ss,[t("div",Ms,[t("span",Is,l(h.title),1)]),t("div",Bs,l(h.author),1)])]),r(S,{title:m(h.description,h),placement:"top"},{default:g(()=>[t("div",{class:"desc zm-line1",ref_for:!0,ref:L=>I(L,h)},l(h.description),513)]),_:2},1032,["title"]),t("div",zs,[j("版本：v"+l(h.local.version)+" ",1),h.has_update?(s(),a("span",js,"有更新")):A("",!0)]),t("div",qs,[t("div",{class:"left",onClick:i[0]||(i[0]=F(()=>{},["stop"]))},[r(U,{checked:h.local.has_loaded,"onUpdate:checked":L=>h.local.has_loaded=L,onChange:L=>n(h)},null,8,["checked","onUpdate:checked","onChange"])]),t("div",Ns,[h.local.type!="trigger"?(s(),a("span",{key:0,class:"zm-link-pointer",onClick:F(L=>T(h),["stop"])},"删除",8,Us)):A("",!0),h.help_url?(s(),a(R,{key:1},[r(N,{type:"vertical"}),t("a",{onClick:i[1]||(i[1]=F(()=>{},["stop"])),class:"c595959",href:h.help_url,target:"_blank"},"使用说明",8,As)],64)):A("",!0),k.includes(h.name)||h.local.multiNode?(s(),a(R,{key:2},[r(N,{type:"vertical"}),t("a",{onClick:F(L=>C(h),["stop"])},"配置",8,Ls)],64)):A("",!0),h.has_update?(s(),a(R,{key:3},[r(N,{type:"vertical"}),t("a",{onClick:F(L=>x(h),["stop"])},"更新",8,Fs)],64)):A("",!0)])])],10,Ds))),128))])):(s(),B(ut,{key:2,title:"暂未安装插件"},{desc:g(()=>[t("div",null,[i[4]||(i[4]=j("更多功能可到 ",-1)),t("a",{onClick:i[2]||(i[2]=h=>y("tabChange",3))},"探索>插件广场"),i[5]||(i[5]=j(" 中去添加",-1))]),t("div",Es,[r(Q,{class:"btn",type:"primary",onClick:i[3]||(i[3]=h=>y("tabChange",3))},{default:g(()=>[...i[6]||(i[6]=[j("去添加",-1)])]),_:1})])]),_:1})),r(pt,{ref_key:"updateRef",ref:_,onOk:e},null,512),r(Pe,{ref_key:"feishuRef",ref:w},null,512),r(xs,{ref_key:"configRef",ref:D},null,512)])}}},Vs=W(Js,[["__scopeId","data-v-4750132e"]]),Ws={class:"_container"},Gs={class:"header"},Hs={class:"main-tab-box"},Qs={class:"content"},Ks={class:"filter-box"},Xs={class:"radio-tabs"},Ys=["onClick"],Zs=["src"],tn={__name:"index",setup(J){const q=Ct(),O=v(null),y=v(null),d=v(localStorage.getItem("zm:explore:active")||"2"),f=v([]),_=bt({title:"",filter_type:0});Y(()=>{q.query.active>1&&O.value.change(q.query.active),w()});function w(){Pt().then($=>{f.value=($==null?void 0:$.data)||[]})}function D(){y.value.search()}function M($){_.filter_type=$,D()}function P($){$>1&&(d.value=$)}function k($){O.value.change($)}function m(){O.value.update()}return($,b)=>{const c=ct,e=Mt;return s(),a("div",Ws,[t("div",Gs,[t("div",Hs,[r(zt,{ref_key:"tabRef",ref:O,onChange:P},null,512)])]),t("div",Qs,[t("div",Ks,[t("div",Xs,[t("div",{onClick:b[0]||(b[0]=n=>M(0)),class:K(["radio-tab",{active:_.filter_type==0}])},[r(c,{name:"icon-all"}),b[2]||(b[2]=t("span",null,"全部",-1))],2),(s(!0),a(R,null,z(f.value,n=>(s(),a("div",{onClick:u=>M(n.id),key:n.id,class:K(["radio-tab",{active:n.id==_.filter_type}])},[t("img",{class:"icon",src:n.id==_.filter_type?n.icon_active_path:n.icon_path},null,8,Zs),t("span",null,l(n.type_title),1)],10,Ys))),128))]),r(e,{value:_.title,"onUpdate:value":b[1]||(b[1]=n=>_.title=n),valueModifiers:{trim:!0},onChange:D,style:{width:"360px"},allowClear:"",placeholder:"搜索插件"},{suffix:g(()=>[r(E(St))]),_:1},8,["value"])]),d.value==3?(s(),B(ee,{key:0,onInstallReport:m,filterData:_,ref_key:"pluginRef",ref:y},null,8,["filterData"])):(s(),B(Vs,{key:1,onTabChange:k,onInstallReport:m,filterData:_,ref_key:"pluginRef",ref:y},null,8,["filterData"]))])])}}},yn=W(tn,[["__scopeId","data-v-b0f3d353"]]);export{yn as default};
