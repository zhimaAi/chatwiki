{"version":3,"file":"index-QrZFVgIq.js","sources":["../../../../front-end/chat-ai-admin-vue/src/views/public-library/editor/components/base-config.js","../../../../front-end/chat-ai-admin-vue/src/views/public-library/editor/components/md-editor.vue","../../../../front-end/chat-ai-admin-vue/src/views/public-library/editor/components/doc-title-input.vue","../../../../front-end/chat-ai-admin-vue/src/config/open-doc/doc-icons.js","../../../../front-end/chat-ai-admin-vue/src/views/public-library/editor/components/icon-selector.vue","../../../../front-end/chat-ai-admin-vue/src/views/public-library/editor/index.vue"],"sourcesContent":["import { uploadFile } from '@/api/app'\r\nimport { message } from 'ant-design-vue'\r\n\r\n// å…è®¸ä¸Šä¼ çš„å›¾ç‰‡ç±»å‹\r\n// const allowUploadImageType = ['image/png', 'image/jpeg', 'image/jpg', 'image/gif']\r\n\r\n/**\r\n * ä¸Šä¼ æ–‡ä»¶å‡½æ•°\r\n * @param file ä¸Šä¼ æ–‡ä»¶çš„æ–‡ä»¶å¯¹è±¡\r\n * @param callback å›è°ƒå‡½æ•°ï¼Œå›è°ƒå‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ–‡ä»¶ä¸Šä¼ åçš„urlï¼Œç¬¬äºŒä¸ªå‚æ•°å¯é€‰ï¼Œä¸ºé¢å¤–é…ç½®ä¿¡æ¯\r\n */\r\nfunction myFileUpload(file, callback) {\r\n  uploadFile({\r\n    file: file,\r\n    category: 'library_doc_image'\r\n  })\r\n    .then((res) => {\r\n      if (res.res != 0) {\r\n        return message.error(res.msg)\r\n      }\r\n\r\n      let url = res.data.link\r\n\r\n      // å¦‚æœä¸Šä¼ çš„æ˜¯è§†é¢‘\r\n      if (/video/i.test(file.type)) {\r\n        callback(url, {\r\n          name: `${file.name.replace(/\\.[^.]+$/, '')}`,\r\n          isBorder: false, // æ˜¯å¦æ˜¾ç¤ºè¾¹æ¡†ï¼Œé»˜è®¤false\r\n          isShadow: false, // æ˜¯å¦æ˜¾ç¤ºé˜´å½±ï¼Œé»˜è®¤false\r\n          isRadius: false // æ˜¯å¦æ˜¾ç¤ºåœ†è§’ï¼Œé»˜è®¤false\r\n        })\r\n      } else if (/image/i.test(file.type)) {\r\n        // å¦‚æœä¸Šä¼ çš„æ˜¯å›¾ç‰‡\r\n        callback(url, {\r\n          name: `${file.name.replace(/\\.[^.]+$/, '')}`,\r\n          isBorder: false, // æ˜¯å¦æ˜¾ç¤ºè¾¹æ¡†ï¼Œé»˜è®¤false\r\n          isShadow: false, // æ˜¯å¦æ˜¾ç¤ºé˜´å½±ï¼Œé»˜è®¤false\r\n          isRadius: false // æ˜¯å¦æ˜¾ç¤ºåœ†è§’ï¼Œé»˜è®¤false\r\n          // width: 'auto', // å›¾ç‰‡çš„å®½åº¦ï¼Œé»˜è®¤100%ï¼Œå¯é…ç½®ç™¾åˆ†æ¯”ï¼Œä¹Ÿå¯é…ç½®åƒç´ å€¼\r\n          // height: 'auto' // å›¾ç‰‡çš„é«˜åº¦ï¼Œé»˜è®¤auto\r\n        })\r\n      } else {\r\n        // å¦‚æœä¸Šä¼ çš„æ˜¯æ–‡ä»¶\r\n        callback(url)\r\n      }\r\n    })\r\n    .catch((err) => {\r\n      message.error('å›¾ç‰‡ä¸Šä¼ å¤±è´¥')\r\n      console.log(err)\r\n    })\r\n}\r\n\r\nconst basicConfig = {\r\n  fileUpload: myFileUpload,\r\n  externals: {\r\n    echarts: false,\r\n    katex: false,\r\n    MathJax: false\r\n  },\r\n  isPreviewOnly: false,\r\n  engine: {\r\n    global: {\r\n      // urlProcessor(url, srcType) {\r\n      //   console.log(`url-processor`, url, srcType)\r\n      //   return url\r\n      // }\r\n    },\r\n    syntax: {\r\n      image: {\r\n        videoWrapper: (link, type, defaultWrapper) => {\r\n          return defaultWrapper\r\n        }\r\n      },\r\n      link: {\r\n        /** ç”Ÿæˆçš„<a>æ ‡ç­¾è¿½åŠ targetå±æ€§çš„é»˜è®¤å€¼ ç©ºï¼šåœ¨<a>æ ‡ç­¾é‡Œä¸ä¼šè¿½åŠ targetå±æ€§ï¼Œ _blankï¼šåœ¨<a>æ ‡ç­¾é‡Œè¿½åŠ target=\"_blank\"å±æ€§ */\r\n        target: '_blank',\r\n        /** ç”Ÿæˆçš„<a>æ ‡ç­¾è¿½åŠ relå±æ€§çš„é»˜è®¤å€¼ ç©ºï¼šåœ¨<a>æ ‡ç­¾é‡Œä¸ä¼šè¿½åŠ relå±æ€§ï¼Œ nofollowï¼šåœ¨<a>æ ‡ç­¾é‡Œè¿½åŠ rel=\"nofollowï¼šåœ¨\"å±æ€§*/\r\n        rel: ''\r\n      },\r\n      autoLink: {\r\n        /** ç”Ÿæˆçš„<a>æ ‡ç­¾è¿½åŠ targetå±æ€§çš„é»˜è®¤å€¼ ç©ºï¼šåœ¨<a>æ ‡ç­¾é‡Œä¸ä¼šè¿½åŠ targetå±æ€§ï¼Œ _blankï¼šåœ¨<a>æ ‡ç­¾é‡Œè¿½åŠ target=\"_blank\"å±æ€§ */\r\n        target: '_blank',\r\n        /** ç”Ÿæˆçš„<a>æ ‡ç­¾è¿½åŠ relå±æ€§çš„é»˜è®¤å€¼ ç©ºï¼šåœ¨<a>æ ‡ç­¾é‡Œä¸ä¼šè¿½åŠ relå±æ€§ï¼Œ nofollowï¼šåœ¨<a>æ ‡ç­¾é‡Œè¿½åŠ rel=\"nofollowï¼šåœ¨\"å±æ€§*/\r\n        rel: '',\r\n        /** æ˜¯å¦å¼€å¯çŸ­é“¾æ¥ */\r\n        enableShortLink: false,\r\n        /** çŸ­é“¾æ¥é•¿åº¦ */\r\n        shortLinkLength: 20\r\n      },\r\n      header: {\r\n        anchorStyle: 'none'\r\n      },\r\n      codeBlock: {\r\n        theme: 'twilight',\r\n        lineNumber: true, // é»˜è®¤æ˜¾ç¤ºè¡Œå·\r\n        expandCode: true,\r\n        copyCode: true,\r\n        editCode: true,\r\n        changeLang: true,\r\n        customBtns: []\r\n      },\r\n      table: {\r\n        enableChart: false\r\n      },\r\n      fontEmphasis: {\r\n        allowWhitespace: false // æ˜¯å¦å…è®¸é¦–å°¾ç©ºæ ¼\r\n      },\r\n      strikethrough: {\r\n        needWhitespace: false // æ˜¯å¦å¿…é¡»æœ‰å‰åç©ºæ ¼\r\n      }\r\n    }\r\n  },\r\n  multipleFileSelection: {\r\n    video: false,\r\n    audio: false,\r\n    image: false,\r\n    word: false,\r\n    pdf: false,\r\n    file: false\r\n  },\r\n  toolbars: {\r\n    toolbar: [\r\n      'bold',\r\n      'italic',\r\n      {\r\n        strikethrough: ['strikethrough', 'underline', 'sub', 'sup', 'ruby', 'customMenuAName']\r\n      },\r\n      'size',\r\n      '|',\r\n      'color',\r\n      'header',\r\n      '|',\r\n      'ol',\r\n      'ul',\r\n      'checklist',\r\n      'panel',\r\n      'justify',\r\n      'detail',\r\n      '|',\r\n      'formula',\r\n      {\r\n        insert: [\r\n          'image',\r\n          'audio',\r\n          'video',\r\n          'link',\r\n          'hr',\r\n          'br',\r\n          'code',\r\n          'inlineCode',\r\n          'formula',\r\n          'toc',\r\n          'table',\r\n          'pdf',\r\n          'word',\r\n          'file'\r\n        ]\r\n      },\r\n      'graph',\r\n      'togglePreview',\r\n      'shortcutKey'\r\n    ],\r\n    toolbarRight: ['fullScreen', '|', 'export', 'changeLocale', 'wordCount'],\r\n    bubble: [\r\n      'bold',\r\n      'italic',\r\n      'underline',\r\n      'strikethrough',\r\n      'sub',\r\n      'sup',\r\n      'quote',\r\n      'ruby',\r\n      '|',\r\n      'size',\r\n      'color',\r\n      'theme'\r\n    ], // array or false\r\n    sidebar: ['mobilePreview', 'copy'], // 'theme'\r\n    toc: {\r\n      updateLocationHash: false, // è¦ä¸è¦æ›´æ–°URLçš„hash\r\n      defaultModel: 'full' // pure: ç²¾ç®€æ¨¡å¼/ç¼©ç•¥æ¨¡å¼ï¼Œåªæœ‰ä¸€æ’å°ç‚¹ï¼› full: å®Œæ•´æ¨¡å¼ï¼Œä¼šå±•ç¤ºæ‰€æœ‰æ ‡é¢˜\r\n    }\r\n    // config: {\r\n    //   publish: [\r\n    //     {\r\n    //       name: 'å¾®ä¿¡å…¬ä¼—å·',\r\n    //       key: 'wechat',\r\n    //       icon: `data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='80' height='80' viewBox='0 0 80 80'%3E  %3Cg fill='none'%3E    %3Cpath fill='%23FFF' d='M0 0h80v80H0z' opacity='0'/%3E    %3Cpath fill='%2307C160' d='M60.962 22.753c-7.601-2.567-18.054-2.99-27.845 4.49-5.423 4.539-9.56 10.715-10.675 18.567-2.958-3.098-5.025-7.995-5.58-11.706-.806-5.403.483-10.82 4.311-15.45C26.906 11.724 34.577 10 39.6 10c9.57.001 18.022 5.882 21.363 12.753zm7.64 11.78c7.516 9.754 5.441 24.73-5.1 32.852-2.618 2.018-5.67 3.198-8.651 4.024a26.067 26.067 0 0 0 5.668-9.54c4.613-13.806-2.868-28.821-16.708-33.536-.3-.102-.601-.191-.903-.282 9.348-3.467 19.704-1.292 25.694 6.482zM39.572 59.37c6.403 0 11.474-1.49 16.264-5.013-.124 1.993-.723 4.392-1.271 5.805-4.509 11.633-17.56 16.676-31.238 12.183C11.433 68.438 4.145 54.492 7.475 42.851c.893-3.12 1.805-5.26 3.518-7.953 1.028 7.504 5.7 14.803 12.511 19.448.518.35.872.932.901 1.605a2.4 2.4 0 0 1-.08.653l-1.143 5.19c-.052.243-.142.499-.13.752.023.56.495.997 1.053.973.22-.01.395-.1.576-.215l6.463-4.143c.486-.312 1.007-.513 1.587-.538a3.03 3.03 0 0 1 .742.067c1.96.438 3.996.68 6.1.68z'/%3E  %3C/g%3E%3C/svg%3E`,\r\n    //       serviceUrl: 'http://localhost:3001',\r\n    //       injectPayload: {\r\n    //         thumb_media_id: 'ft7IwCi1eukC6lRHzmkYuzeMmVXWbU3JoipysW2EZamblyucA67wdgbYTix4X377',\r\n    //         author: 'Cherry Markdown',\r\n    //       },\r\n    //     }\r\n    //   ],\r\n    // },\r\n  },\r\n\r\n  editor: {\r\n    autoSave2Textarea: true,\r\n    defaultModel: 'edit&preview',\r\n    showFullWidthMark: true, // æ˜¯å¦é«˜äº®å…¨è§’ç¬¦å· Â·|ï¿¥|ã€|ï¼š|â€œ|â€|ã€|ã€‘|ï¼ˆ|ï¼‰|ã€Š|ã€‹\r\n    showSuggestList: true // æ˜¯å¦æ˜¾ç¤ºè”æƒ³æ¡†\r\n  },\r\n  themeSettings: {\r\n    mainTheme: 'ant-design',\r\n    themeList: [{ className: 'ant-design', label: 'ant-design' }],\r\n    codeBlockTheme: 'one-light'\r\n  }\r\n}\r\n\r\nexport default basicConfig\r\n","<template>\r\n  <div class=\"md-editor-wrapper\" :class=\"['is-' + state.type]\">\r\n    <div class=\"md-editor-body\">\r\n      <div :class=\"[state.type + '-box']\" id=\"md-editor\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport 'cherry-markdown/dist/cherry-markdown.css'\r\nimport '@/assets/md-editor/theme/ant-design.less'\r\nimport Cherry from 'cherry-markdown'\r\nimport { useLocaleStore } from '@/stores/modules/locale'\r\nimport basicConfig from './base-config'\r\nimport { reactive, computed, onMounted, onBeforeUnmount } from 'vue'\r\n\r\nconst emit = defineEmits(['inited', 'input', 'blur'])\r\n\r\nconst localeKeysMap = {\r\n  'en-US': 'en_US',\r\n  'zh-CN': 'zh_cn'\r\n}\r\n\r\nconst localeStore = useLocaleStore()\r\nconst lang = computed(() => localeKeysMap[localeStore.getCurrentLocale.lang])\r\n\r\n\r\nlet MDEditor = null\r\nconsole.log('lang', lang.value)\r\nconst state = reactive({\r\n  type: 'editor',\r\n  content: ''\r\n})\r\n\r\nconst initPreview = () => {\r\n  MDEditor = new Cherry({\r\n    ...basicConfig,\r\n    id: 'md-editor',\r\n    locale: lang.value,\r\n    value: state.content,\r\n    editor: {\r\n      defaultModel: 'previewOnly',\r\n      keepDocumentScrollAfterInit: true\r\n    },\r\n    previewer: {\r\n      enablePreviewerBubble: false,\r\n      floatWhenClosePreviewer: false\r\n    },\r\n    toolbars: {\r\n      toolbar: false,\r\n      // é…ç½®ç›®å½•\r\n      toc: {\r\n        updateLocationHash: true, // è¦ä¸è¦æ›´æ–°URLçš„hash\r\n        defaultModel: 'full', // pure: ç²¾ç®€æ¨¡å¼/ç¼©ç•¥æ¨¡å¼ï¼Œåªæœ‰ä¸€æ’å°ç‚¹ï¼› full: å®Œæ•´æ¨¡å¼ï¼Œä¼šå±•ç¤ºæ‰€æœ‰æ ‡é¢˜\r\n        position: 'fixed', // æ‚¬æµ®ç›®å½•çš„æ‚¬æµ®æ–¹å¼ã€‚å½“æ»šåŠ¨æ¡åœ¨cherryå†…éƒ¨æ—¶ï¼Œç”¨absoluteï¼›å½“æ»šåŠ¨æ¡åœ¨cherryå¤–éƒ¨æ—¶ï¼Œç”¨fixed\r\n        cssText: 'right: 20px;'\r\n      }\r\n    }\r\n  })\r\n\r\n  MDEditor.setTheme('ant-design')\r\n  MDEditor.setLocale(lang.value);\r\n}\r\n\r\nconst initEditor = () => {\r\n  let config = {\r\n    ...basicConfig,\r\n    id: 'md-editor',\r\n    locale: lang.value,\r\n    value: state.content,\r\n    event: {\r\n      afterInit() {\r\n        emit('inited')\r\n      },\r\n      afterChange(text) {\r\n        onContentInput(text)\r\n      },\r\n      blur: () => {\r\n        onContentBlur()\r\n      }\r\n    }\r\n  }\r\n\r\n  MDEditor = new Cherry(config)\r\n\r\n  MDEditor.setTheme('ant-design')\r\n  MDEditor.setLocale(lang.value);\r\n}\r\n\r\nconst setContent = (content, clearStack = false) => {\r\n  MDEditor.setValue(content, clearStack)\r\n}\r\n\r\nconst getContent = () => {\r\n  return MDEditor.getMarkdown()\r\n}\r\n\r\nconst setDoc = (doc) => {\r\n  setContent(doc.content)\r\n}\r\n\r\nconst getDoc = () => {\r\n  return {\r\n    content: getContent()\r\n  }\r\n}\r\n\r\nconst clearDoc = () => {\r\n  setContent('', true)\r\n}\r\n\r\nconst onContentInput = (val) => {\r\n  emit('input', val)\r\n}\r\n\r\nconst onContentBlur = (val) => {\r\n  emit('blur', val)\r\n}\r\n\r\nconst init = (type, content) => {\r\n  state.type = type\r\n  state.content = content\r\n\r\n  if (MDEditor) {\r\n    MDEditor.destroy()\r\n  }\r\n\r\n  if (type === 'editor') {\r\n    initEditor()\r\n  } else if (type === 'preview') {\r\n    initPreview()\r\n  }\r\n}\r\n\r\nonMounted(() => {})\r\n\r\nonBeforeUnmount(() => {\r\n  if (MDEditor) {\r\n    MDEditor.destroy()\r\n  }\r\n})\r\n\r\ndefineExpose({\r\n  init,\r\n  setContent,\r\n  getContent,\r\n  setDoc,\r\n  getDoc,\r\n  clearDoc\r\n})\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.md-editor-wrapper {\r\n  position: relative;\r\n  height: 100%;\r\n  overflow: hidden;\r\n\r\n  .md-editor-body {\r\n    height: 100%;\r\n  }\r\n  .preview-box {\r\n    max-width: 100%;\r\n    margin: 0 auto;\r\n  }\r\n\r\n  &.is-editor {\r\n    .md-editor-body {\r\n      width: 100%;\r\n      ::v-deep(.cherry-previewer) {\r\n        border-left: 1px solid #f0f0f0 !important;\r\n      }\r\n    }\r\n  }\r\n  ::v-deep(.cherry) {\r\n    box-shadow: none !important;\r\n  }\r\n  &.is-preview {\r\n    .md-editor-body {\r\n      overflow: hidden;\r\n      overflow-y: auto;\r\n\r\n      ::v-deep(.cherry-previewer) {\r\n        padding: 0 !important;\r\n        border-left: none !important;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<style lang=\"less\" scoped>\r\n.doc-title-input-wrapper {\r\n  width: 100%;\r\n  .doc-title-input {\r\n    display: block;\r\n    width: 100%;\r\n    height: 32px;\r\n    line-height: 32px;\r\n    padding: 0;\r\n    font-size: 24px;\r\n    font-weight: 600;\r\n    outline: none;\r\n    resize: none;\r\n    box-shadow: none;\r\n    border: 0;\r\n    background: none;\r\n    overflow-y: hidden;\r\n    color: #262626;\r\n\r\n    &::placeholder {\r\n      color: #b0b1b8;\r\n    }\r\n    &:focus {\r\n      border: none;\r\n      outline: none;\r\n      box-shadow: none;\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n<template>\r\n  <div class=\"doc-title-input-wrapper\">\r\n    <a-input class=\"doc-title-input\" v-model:value.trim=\"text\" type=\"text\" placeholder=\"\" :maxlength=\"100\" @input=\"onInput\"\r\n      @blur=\"endEdit\" ref=\"inputRef\" />\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, watch } from 'vue'\r\n\r\nconst emit = defineEmits(['update:title', 'input', 'blur', 'titleClick'])\r\n\r\nconst inputRef = ref(null)\r\n\r\nconst props = defineProps({\r\n  title: {\r\n    type: String,\r\n    default: ''\r\n  },\r\n  isHighlight: {\r\n    type: Boolean,\r\n    default: false\r\n  }\r\n})\r\n\r\nconst text = ref(props.title)\r\n\r\nconst endEdit = () => {\r\n  emit('blur', text.value)\r\n}\r\n\r\nconst onInput = () => {\r\n  emit('input', text.value)\r\n  emit('update:title', text.value)\r\n}\r\n\r\nwatch(\r\n  () => props.title,\r\n  () => {\r\n    text.value = props.title\r\n  }\r\n)\r\n\r\nonMounted(() => {\r\n\r\n})\r\n</script>\r\n","const docIcons = [\r\n  // æ ‡é¢˜/ç»“æ„ç±»\r\n  {\r\n    content: 'ğŸ¥‡',\r\n    keywords: ['ç¬¬ä¸€æ­¥', 'ç¬¬ä¸€å', 'ä¼˜å…ˆ', 'é¦–é€‰'],\r\n  },\r\n  {\r\n    content: 'ğŸ¥ˆ',\r\n    keywords: ['ç¬¬äºŒæ­¥', 'ç¬¬äºŒå', 'æ¬¡é€‰'],\r\n  },\r\n  {\r\n    content: 'ğŸ¥‰',\r\n    keywords: ['ç¬¬ä¸‰æ­¥', 'ç¬¬ä¸‰å'],\r\n  },\r\n  {\r\n    content: 'ğŸ”¹',\r\n    keywords: ['å°èŠ‚æ ‡é¢˜', 'åˆ—è¡¨å‰ç¼€'],\r\n  },\r\n  {\r\n    content: 'ğŸ”¸',\r\n    keywords: ['å°èŠ‚æ ‡é¢˜', 'é‡ç‚¹æç¤º'],\r\n  },\r\n  {\r\n    content: 'ğŸ“Œ',\r\n    keywords: ['å›ºå®š', 'å…³é”®ç‚¹', 'é‡è¦'],\r\n  },\r\n  {\r\n    content: 'ğŸ“',\r\n    keywords: ['å†™ä½œ', 'ç¬”è®°', 'è®°å½•'],\r\n  },\r\n\r\n  // çŠ¶æ€ç±»\r\n  {\r\n    content: 'âœ…',\r\n    keywords: ['æˆåŠŸ', 'å®Œæˆ', 'æ¨è', 'æ­£ç¡®'],\r\n  },\r\n  {\r\n    content: 'âŒ',\r\n    keywords: ['å¤±è´¥', 'ç¦æ­¢', 'ä¸è¦åš', 'é”™è¯¯'],\r\n  },\r\n  {\r\n    content: 'âš ï¸',\r\n    keywords: ['è­¦å‘Š', 'æ³¨æ„äº‹é¡¹'],\r\n  },\r\n  {\r\n    content: 'â›”',\r\n    keywords: ['ä¸¥é‡è­¦å‘Š', 'ç¦ç”¨'],\r\n  },\r\n  {\r\n    content: 'â—',\r\n    keywords: ['å¼ºæé†’', 'é«˜äº®æç¤º', 'é‡è¦'],\r\n  },\r\n  {\r\n    content: 'ğŸ””',\r\n    keywords: ['é€šçŸ¥', 'æé†’æ“ä½œ'],\r\n  },\r\n  {\r\n    content: 'ğŸ”•',\r\n    keywords: ['å…³é—­æé†’', 'é™éŸ³çŠ¶æ€'],\r\n  },\r\n  {\r\n    content: 'ğŸ’¡',\r\n    keywords: ['å»ºè®®', 'çµæ„Ÿ', 'ç»éªŒåˆ†äº«', 'æƒ³æ³•'],\r\n  },\r\n  {\r\n    content: 'ğŸ”„',\r\n    keywords: ['æ›´æ–°', 'åˆ·æ–°', 'ä¿®æ”¹'],\r\n  },\r\n  {\r\n    content: 'ğŸ”§',\r\n    keywords: ['é…ç½®', 'è°ƒè¯•', 'è®¾ç½®'],\r\n  },\r\n  {\r\n    content: 'ğŸ› ï¸',\r\n    keywords: ['å·¥å…·', 'ç»´æŠ¤', 'æ‰‹åŠ¨æ“ä½œ'],\r\n  },\r\n\r\n  // æ–‡ä»¶/æ“ä½œç±»\r\n  {\r\n    content: 'ğŸ“',\r\n    keywords: ['æ–‡ä»¶å¤¹', 'è·¯å¾„', 'ç›®å½•'],\r\n  },\r\n  {\r\n    content: 'ğŸ“„',\r\n    keywords: ['æ–‡ä»¶', 'æ–‡æ¡£', 'å†…å®¹'],\r\n  },\r\n  {\r\n    content: 'ğŸ“‚',\r\n    keywords: ['å±•å¼€æ–‡ä»¶å¤¹', 'æ‰“å¼€'],\r\n  },\r\n  {\r\n    content: 'ğŸ“‹',\r\n    keywords: ['å¤åˆ¶å†…å®¹', 'å‰ªè´´æ¿'],\r\n  },\r\n  {\r\n    content: 'ğŸ—‘ï¸',\r\n    keywords: ['åˆ é™¤æ“ä½œ', 'æ¸…ç†'],\r\n  },\r\n  {\r\n    content: 'ğŸ’¾',\r\n    keywords: ['ä¿å­˜', 'å­˜å‚¨'],\r\n  },\r\n  {\r\n    content: 'ğŸ—‚ï¸',\r\n    keywords: ['åˆ†ç±»', 'å½’æ¡£', 'æ•´ç†'],\r\n  },\r\n\r\n  // ç³»ç»Ÿ/ä»£ç ç±»\r\n  {\r\n    content: 'ğŸ’»',\r\n    keywords: ['ç¼–ç¨‹', 'å¼€å‘', 'ä»£ç '],\r\n  },\r\n  {\r\n    content: 'ğŸ–¥ï¸',\r\n    keywords: ['æ¡Œé¢', 'ç³»ç»Ÿæ“ä½œ'],\r\n  },\r\n  {\r\n    content: 'ğŸ“Ÿ',\r\n    keywords: ['å‘½ä»¤è¡Œ', 'ç»ˆç«¯'],\r\n  },\r\n  {\r\n    content: 'ğŸ“¦',\r\n    keywords: ['å®‰è£…åŒ…', 'ä¾èµ–', 'ç»„ä»¶'],\r\n  },\r\n  {\r\n    content: 'ğŸ§°',\r\n    keywords: ['å·¥å…·é›†', 'å¼€å‘è€…å·¥å…·ç®±'],\r\n  },\r\n  {\r\n    content: 'ğŸ§ª',\r\n    keywords: ['æµ‹è¯•', 'å®éªŒ'],\r\n  },\r\n  {\r\n    content: 'ğŸš€',\r\n    keywords: ['å‘å¸ƒ', 'å¯åŠ¨', 'ä¸Šçº¿'],\r\n  },\r\n  {\r\n    content: 'ğŸ§±',\r\n    keywords: ['æ„å»º', 'æ¨¡å—', 'ç»„ä»¶'],\r\n  },\r\n\r\n  // å¼ºè°ƒ/æç¤ºç±»\r\n  {\r\n    content: 'ğŸš¨',\r\n    keywords: ['ç´§æ€¥æç¤º', 'è­¦æŠ¥'],\r\n  },\r\n  {\r\n    content: 'ğŸ”¥',\r\n    keywords: ['é«˜äº®', 'çƒ­åº¦é«˜', 'é‡ç‚¹', 'çƒ­é—¨'],\r\n  },\r\n  {\r\n    content: 'ğŸ“£',\r\n    keywords: ['å…¬å‘Š', 'æé†’', 'é€šçŸ¥'],\r\n  },\r\n  {\r\n    content: 'ğŸ“¢',\r\n    keywords: ['å¼ºè°ƒ', 'æç¤º', 'å®£å‘Š'],\r\n  },\r\n  {\r\n    content: 'ğŸ‘€',\r\n    keywords: ['æ³¨æ„', 'æŸ¥çœ‹', 'æ˜“é”™ç‚¹'],\r\n  },\r\n\r\n  // å¯¼å‘/æµç¨‹ç±»\r\n  {\r\n    content: 'ğŸ”œ',\r\n    keywords: ['æ¥ä¸‹æ¥', 'ä¸‹ä¸€æ­¥'],\r\n  },\r\n  {\r\n    content: 'ğŸ”™',\r\n    keywords: ['è¿”å›', 'æ’¤é”€'],\r\n  },\r\n  {\r\n    content: 'ğŸ”›',\r\n    keywords: ['æ¿€æ´»ä¸­', 'å½“å‰'],\r\n  },\r\n  {\r\n    content: 'â©',\r\n    keywords: ['å¿«è¿›', 'ä¸‹ä¸€æ­¥'],\r\n  },\r\n  {\r\n    content: 'âª',\r\n    keywords: ['ä¸Šä¸€æ­¥', 'å›é€€'],\r\n  },\r\n  {\r\n    content: 'ğŸ”',\r\n    keywords: ['å¾ªç¯', 'é‡å¤'],\r\n  },\r\n  {\r\n    content: 'ğŸ§­',\r\n    keywords: ['æŒ‡å¼•', 'å¯¼èˆª', 'å¼•å¯¼æ–‡æ¡£'],\r\n  },\r\n\r\n  // è®¾ç½®/é…ç½®ç±»\r\n  {\r\n    content: 'âš™ï¸',\r\n    keywords: ['é«˜çº§è®¾ç½®', 'å‚æ•°è°ƒæ•´'],\r\n  },\r\n  {\r\n    content: 'ğŸ›ï¸',\r\n    keywords: ['é¢æ¿è®¾ç½®', 'å¯è§†åŒ–é…ç½®'],\r\n  },\r\n\r\n  // å…³é—­/ç¦ç”¨ç±»\r\n  {\r\n    content: 'ğŸ›‘',\r\n    keywords: ['å¼ºåˆ¶åœæ­¢', 'ç«‹å³ç»ˆæ­¢'],\r\n  },\r\n  {\r\n    content: 'ğŸš«',\r\n    keywords: ['æ‹’ç»', 'é˜»æ­¢æ“ä½œ'],\r\n  },\r\n  {\r\n    content: 'ğŸ§¯',\r\n    keywords: ['ç†„ç«', 'å†·å¤„ç†', 'å–æ¶ˆè®¡åˆ’'],\r\n  },\r\n\r\n  // æ–‡æ¡£/å†™ä½œç±»\r\n  {\r\n    content: 'ğŸ“š',\r\n    keywords: ['æ–‡æ¡£é›†åˆ', 'æ•™ç¨‹'],\r\n  },\r\n  {\r\n    content: 'ğŸ“°',\r\n    keywords: ['å…¬å‘Š', 'èµ„è®¯', 'æ›´æ–°è¯´æ˜'],\r\n  },\r\n  {\r\n    content: 'âœï¸',\r\n    keywords: ['ç¼–è¾‘', 'ä¿®æ”¹', 'è‰ç¨¿'],\r\n  },\r\n\r\n  // åˆ†ç±»/æ ‡ç­¾ç±»\r\n  {\r\n    content: 'ğŸ·ï¸',\r\n    keywords: ['æ ‡ç­¾åˆ†ç±»'],\r\n  },\r\n  {\r\n    content: 'ğŸ§¾',\r\n    keywords: ['åˆ—è¡¨', 'æ•°æ®æ˜ç»†'],\r\n  },\r\n  {\r\n    content: 'ğŸ—ƒï¸',\r\n    keywords: ['å½’æ¡£å†…å®¹'],\r\n  },\r\n\r\n  // æ—¶é—´/è®¡åˆ’ç±»\r\n  {\r\n    content: 'â±ï¸',\r\n    keywords: ['è®¡æ—¶', 'æ•ˆç‡å·¥å…·'],\r\n  },\r\n  {\r\n    content: 'â³',\r\n    keywords: ['ç­‰å¾…ä¸­', 'å»¶è¿Ÿ'],\r\n  },\r\n  {\r\n    content: 'ğŸ“…',\r\n    keywords: ['æ—¥æœŸ', 'è®¡åˆ’å®‰æ’'],\r\n  },\r\n  {\r\n    content: 'ğŸ•’',\r\n    keywords: ['æ—¶é—´è¯´æ˜'],\r\n  },\r\n  {\r\n    content: 'ğŸ“†',\r\n    keywords: ['æ—¥å†è§†å›¾', 'æŒ‰æ—¥åˆ†ç±»'],\r\n  },\r\n\r\n  // æˆå°±/è¿›åº¦ç±»\r\n  {\r\n    content: 'ğŸ¯',\r\n    keywords: ['ç›®æ ‡', 'ä»»åŠ¡å®Œæˆ'],\r\n  },\r\n  {\r\n    content: 'ğŸ–ï¸',\r\n    keywords: ['å¥–åŠ±', 'æˆå°±'],\r\n  },\r\n  {\r\n    content: 'ğŸ“ˆ',\r\n    keywords: ['è¿›åº¦ä¸Šå‡', 'ä¼˜åŒ–æ•ˆæœ'],\r\n  },\r\n  {\r\n    content: 'ğŸ“‰',\r\n    keywords: ['é—®é¢˜å›é€€', 'å¼‚å¸¸æ³¢åŠ¨'],\r\n  },\r\n\r\n  // æ•°å­—ç±»\r\n  {\r\n    content: '1ï¸âƒ£',\r\n    keywords: ['æ•°å­—ä¸€', 'ç¬¬ä¸€æ­¥'],\r\n  },\r\n  {\r\n    content: '2ï¸âƒ£',\r\n    keywords: ['æ•°å­—äºŒ', 'ç¬¬äºŒæ­¥'],\r\n  },\r\n  {\r\n    content: '3ï¸âƒ£',\r\n    keywords: ['æ•°å­—ä¸‰', 'ç¬¬ä¸‰æ­¥'],\r\n  },\r\n  {\r\n    content: '4ï¸âƒ£',\r\n    keywords: ['æ•°å­—å››'],\r\n  },\r\n  {\r\n    content: '5ï¸âƒ£',\r\n    keywords: ['æ•°å­—äº”'],\r\n  },\r\n  {\r\n    content: '6ï¸âƒ£',\r\n    keywords: ['æ•°å­—å…­'],\r\n  },\r\n  {\r\n    content: '7ï¸âƒ£',\r\n    keywords: ['æ•°å­—ä¸ƒ'],\r\n  },\r\n  {\r\n    content: '8ï¸âƒ£',\r\n    keywords: ['æ•°å­—å…«'],\r\n  },\r\n  {\r\n    content: '9ï¸âƒ£',\r\n    keywords: ['æ•°å­—ä¹'],\r\n  },\r\n  {\r\n    content: 'ğŸ”Ÿ',\r\n    keywords: ['æ•°å­—å'],\r\n  },\r\n];\r\n\r\nexport default docIcons;","<template>\r\n  <a-popover class=\"icon-selector\" placement=\"bottomLeft\" :arrow=\"false\" @openChange=\"openChange\">\r\n    <template #content>\r\n      <div class=\"icon-selector-container\">\r\n        <div class=\"search-box\">\r\n          <a-input\r\n            :placeholder=\"t('search_placeholder')\"\r\n            v-model:value=\"searchValue\"\r\n            @pressEnter=\"search\"\r\n            allowClear\r\n          >\r\n            <template #suffix>\r\n              <SearchOutlined style=\"color: rgba(0, 0, 0, 0.45)\" />\r\n            </template>\r\n          </a-input>\r\n        </div>\r\n        <!-- æœ€è¿‘ä½¿ç”¨ -->\r\n        <div v-if=\"recentIcons.length > 0 && !searchValue\" class=\"recent-section\">\r\n          <div class=\"icon-list-label\">{{ t('recent_used') }}</div>\r\n          <div class=\"icon-list\">\r\n            <div\r\n              class=\"icon-item\"\r\n              v-for=\"(item, index) in recentIcons\"\r\n              :key=\"`recent-${index}`\"\r\n              :title=\"item.keywords.join(', ')\"\r\n              @click=\"selectIcon(item)\"\r\n            >\r\n              {{ item.content }}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <!-- åˆ—è¡¨ -->\r\n        <div class=\"icon-list-label\">{{ searchValue ? t('search_result') : t('emoji_and_character') }}</div>\r\n        <div class=\"icon-list\">\r\n          <div\r\n            class=\"icon-item\"\r\n            v-for=\"(item, index) in filteredIcons\"\r\n            :key=\"index\"\r\n            :title=\"item.keywords.join(', ')\"\r\n            @click=\"selectIcon(item)\"\r\n          >\r\n            {{ item.content }}\r\n          </div>\r\n          <div v-if=\"filteredIcons.length === 0\" class=\"no-result\">\r\n            {{ t('no_matching_icon') }}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </template>\r\n\r\n    <span class=\"icon-selector-handler\" @click.prevent><slot></slot></span>\r\n  </a-popover>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted, nextTick } from 'vue'\r\nimport { SearchOutlined } from '@ant-design/icons-vue'\r\nimport docIcons from '@/config/open-doc/doc-icons'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.public-library.editor.components.icon-selector')\r\n\r\nconst searchValue = ref('')\r\nconst recentIcons = ref([])\r\n\r\nconst openChange = (visible) => {\r\n  if(visible){\r\n    nextTick(() => {\r\n      searchValue.value = '';\r\n    })\r\n  }\r\n}\r\n\r\n// ä»æœ¬åœ°å­˜å‚¨åŠ è½½æœ€è¿‘ä½¿ç”¨çš„å›¾æ ‡\r\nconst loadRecentIcons = () => {\r\n  try {\r\n    const stored = localStorage.getItem('recent-icons')\r\n    if (stored) {\r\n      recentIcons.value = JSON.parse(stored)\r\n    }\r\n  } catch (error) {\r\n    console.warn(t('load_recent_failed'), error)\r\n    recentIcons.value = []\r\n  }\r\n}\r\n\r\n// ä¿å­˜æœ€è¿‘ä½¿ç”¨çš„å›¾æ ‡åˆ°æœ¬åœ°å­˜å‚¨\r\nconst saveRecentIcons = () => {\r\n  try {\r\n    localStorage.setItem('recent-icons', JSON.stringify(recentIcons.value))\r\n  } catch (error) {\r\n    console.warn(t('save_recent_failed'), error)\r\n  }\r\n}\r\n\r\n// æ·»åŠ å›¾æ ‡åˆ°æœ€è¿‘ä½¿ç”¨åˆ—è¡¨\r\nconst addToRecentIcons = (icon) => {\r\n  // ç§»é™¤å·²å­˜åœ¨çš„ç›¸åŒå›¾æ ‡\r\n  const existingIndex = recentIcons.value.findIndex(item => item.content === icon.content)\r\n  if (existingIndex > -1) {\r\n    recentIcons.value.splice(existingIndex, 1)\r\n  }\r\n  \r\n  // æ·»åŠ åˆ°åˆ—è¡¨å¼€å¤´\r\n  recentIcons.value.unshift({\r\n    ...icon,\r\n    lastUsed: Date.now()\r\n  })\r\n  \r\n  // åªä¿ç•™æœ€è¿‘10ä¸ª\r\n  if (recentIcons.value.length > 10) {\r\n    recentIcons.value = recentIcons.value.slice(0, 10)\r\n  }\r\n  \r\n  saveRecentIcons()\r\n}\r\n\r\n// è®¡ç®—è¿‡æ»¤åçš„å›¾æ ‡åˆ—è¡¨\r\nconst filteredIcons = computed(() => {\r\n  if (!searchValue.value.trim()) {\r\n    return docIcons\r\n  }\r\n  \r\n  const searchTerm = searchValue.value.toLowerCase().trim()\r\n  return docIcons.filter(icon => {\r\n    // åœ¨å…³é”®è¯ä¸­è¿›è¡ŒåŠåŒ¹é…æœç´¢\r\n    return icon.keywords.some(keyword => \r\n      keyword.toLowerCase().includes(searchTerm)\r\n    )\r\n  })\r\n})\r\n\r\nconst search = () => {\r\n  // æœç´¢åŠŸèƒ½é€šè¿‡è®¡ç®—å±æ€§å®æ—¶å“åº”ï¼Œè¿™é‡Œå¯ä»¥é¢„ç•™å…¶ä»–é€»è¾‘\r\n}\r\n\r\n// å®šä¹‰äº‹ä»¶\r\nconst emit = defineEmits(['select'])\r\n\r\n// é€‰æ‹©å›¾æ ‡\r\nconst selectIcon = (icon) => {\r\n  addToRecentIcons(icon)\r\n  emit('select', icon)\r\n\r\n  // open.value = false;\r\n}\r\n\r\n// ç»„ä»¶æŒ‚è½½æ—¶åŠ è½½æœ€è¿‘ä½¿ç”¨çš„å›¾æ ‡\r\nonMounted(() => {\r\n  loadRecentIcons()\r\n})\r\n\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.icon-selector-handler{\r\n  display: inline-flex;\r\n  cursor: pointer;\r\n}\r\n\r\n.icon-selector-container {\r\n  width: 350px;\r\n\r\n  .search-box {\r\n    margin-bottom: 8px;\r\n  }\r\n\r\n  .recent-section {\r\n    margin-bottom: 12px;\r\n  }\r\n\r\n  .icon-list-label {\r\n    line-height: 20px;\r\n    font-size: 12px;\r\n    color: #8c8c8c;\r\n  }\r\n\r\n  .icon-list {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    gap: 4px;\r\n    margin-bottom: 8px;\r\n\r\n    .icon-item {\r\n      width: 28px;\r\n      height: 28px;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      cursor: pointer;\r\n      border-radius: 4px;\r\n      font-size: 20px;\r\n      transition: background-color 0.2s;\r\n      \r\n      &:hover {\r\n        background-color: #f5f5f5;\r\n      }\r\n      \r\n      &:active {\r\n        background-color: #e6f7ff;\r\n      }\r\n    }\r\n    \r\n    .no-result {\r\n      width: 100%;\r\n      text-align: center;\r\n      color: #999;\r\n      font-size: 12px;\r\n      padding: 20px 0;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<style lang=\"less\" scoped>\r\n.editor-page {\r\n  position: relative;\r\n  display: flex;\r\n  flex-flow: column nowrap;\r\n  height: 100%;\r\n  overflow: hidden;\r\n\r\n  .toolbar-wrapper {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    height: 64px;\r\n    padding: 0 16px 0 32px;\r\n    background-color: #fff;\r\n    border-bottom: 1px solid #D9D9D9;\r\n\r\n    .toolbar-right {\r\n      display: flex;\r\n      align-items: center;\r\n    }\r\n\r\n    .action-item {\r\n      margin-right: 8px;\r\n\r\n      &:last-child {\r\n        margin-right: 0;\r\n      }\r\n\r\n      .action-name{\r\n        margin-left: 8px;\r\n      }\r\n    }\r\n\r\n    .change-home-preview-style-btn {\r\n      margin-left: 8px;\r\n      cursor: pointer;\r\n    }\r\n\r\n    .edit-user {\r\n      display: flex;\r\n      align-items: center;\r\n      margin-right: 16px;\r\n\r\n      .line {\r\n        width: 1px;\r\n        height: 16px;\r\n        margin-right: 16px;\r\n        border-radius: 1px;\r\n        background: #d9d9d9;\r\n      }\r\n\r\n      .user-avatar {\r\n        width: 24px;\r\n        height: 24px;\r\n        border-radius: 6px;\r\n      }\r\n\r\n      .user-name {\r\n        margin-left: 8px;\r\n        font-size: 14px;\r\n        color: #595959;\r\n      }\r\n\r\n      .edit-status-text {\r\n        margin-left: 8px;\r\n        font-size: 14px;\r\n        color: #8c8c8c;\r\n      }\r\n    }\r\n  }\r\n\r\n  .library-info {\r\n    display: flex;\r\n    flex-direction: row;\r\n    line-height: 22px;\r\n    padding: 24px 24px 24px 0;\r\n\r\n    .library-logo {\r\n      width: 32px;\r\n      height: 32px;\r\n      margin-right: 8px;\r\n      border-radius: 12px;\r\n    }\r\n\r\n    .library-info-content {\r\n      flex: 1;\r\n      display: flex;\r\n      align-items: center;\r\n      flex-direction: row;\r\n    }\r\n\r\n    .library-name {\r\n      flex: 1;\r\n      line-height: 24px;\r\n      height: 24px;\r\n      font-size: 16px;\r\n      font-weight: 600;\r\n      color: #000000;\r\n      overflow: hidden;\r\n      white-space: nowrap;\r\n      text-overflow: ellipsis;\r\n    }\r\n\r\n    .libray-arrow-down {\r\n      margin-left: 12px;\r\n      font-size: 16px;\r\n      cursor: pointer;\r\n    }\r\n\r\n    .publish-status {\r\n      display: flex;\r\n      align-items: center;\r\n      height: 22px;\r\n      line-height: 22px;\r\n      padding: 0 6px;\r\n      border-radius: 6px;\r\n      margin-left: 12px;\r\n      color: #3a4559;\r\n\r\n      &.is-publish {\r\n        color: #21a665;\r\n        background-color: #cafce4;\r\n      }\r\n\r\n      .status-icon {\r\n        margin-right: 2px;\r\n        font-size: 14px;\r\n      }\r\n\r\n      .status-name {\r\n        font-size: 14px;\r\n        font-weight: 500;\r\n      }\r\n    }\r\n  }\r\n\r\n  .loading-wrapper {\r\n    position: absolute;\r\n    left: 0;\r\n    top: 64px;\r\n    right: 0;\r\n    bottom: 0;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    z-index: 999;\r\n    background-color: rgba(255, 255, 255, 1);\r\n  }\r\n\r\n  &.is-loading {\r\n    .editor-page-body {\r\n      opacity: 0;\r\n    }\r\n  }\r\n\r\n  .editor-page-header {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    padding: 16px 60px;\r\n    background: #F2F4F7;\r\n  }\r\n\r\n  .editor-page-body {\r\n    flex: 1;\r\n    overflow: hidden;\r\n    overflow-y: auto;\r\n    padding: 0 60px;\r\n  }\r\n\r\n  .header-left {\r\n    flex: 1;\r\n    overflow: hidden;\r\n\r\n    .title-wrapper {\r\n      display: flex;\r\n      flex: 1;\r\n      align-items: center;\r\n      padding-right: 24px;\r\n\r\n      .doc-icon {\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        width: 24px;\r\n        height: 24px;\r\n        margin-right: 8px;\r\n        font-size: 20px;\r\n      }\r\n\r\n      .doc-title {\r\n        flex: 1;\r\n        line-height: 32px;\r\n        min-height: 32px;\r\n        display: flex;\r\n        align-items: center;\r\n\r\n        .doc-title-text {\r\n          line-height: 24px;\r\n          font-size: 24px;\r\n          font-weight: 600;\r\n          color: #262626;\r\n          &.title-highlight{\r\n            color: #2475fc;\r\n            cursor: pointer;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    .doc-last-update {\r\n      line-height: 22px;\r\n      padding-left: 32px;\r\n      margin-top: 8px;\r\n      font-size: 14px;\r\n      font-weight: 400;\r\n      color: #8c8c8c;\r\n    }\r\n  }\r\n\r\n  .header-right {\r\n    display: flex;\r\n    align-items: center;\r\n\r\n    .action-box {\r\n      margin-right: 8px;\r\n\r\n      &:last-child {\r\n        margin-right: 0;\r\n      }\r\n\r\n      .action-btn {\r\n        display: flex;\r\n        align-items: center;\r\n      }\r\n\r\n      .action-icon {\r\n        margin-right: 4px;\r\n      }\r\n    }\r\n\r\n    .last-save-time {\r\n      margin-right: 16px;\r\n      font-size: 14px;\r\n      color: #595959;\r\n    }\r\n  }\r\n\r\n  .edit-user {\r\n    display: flex;\r\n    align-items: center;\r\n    margin-right: 16px;\r\n\r\n    .line {\r\n      width: 1px;\r\n      height: 16px;\r\n      margin-right: 16px;\r\n      border-radius: 1px;\r\n      background: #d9d9d9;\r\n    }\r\n\r\n    .user-avatar {\r\n      width: 24px;\r\n      height: 24px;\r\n      border-radius: 6px;\r\n    }\r\n\r\n    .user-name {\r\n      margin-left: 8px;\r\n      font-size: 14px;\r\n      color: #595959;\r\n    }\r\n\r\n    .edit-status-text {\r\n      margin-left: 8px;\r\n      font-size: 14px;\r\n      color: #8c8c8c;\r\n    }\r\n  }\r\n\r\n  .seo-setting-box {\r\n    padding: 0 24px 24px 24px;\r\n  }\r\n}\r\n</style>\r\n\r\n<template>\r\n  <div class=\"editor-page\" :class=\"{ 'is-loading': loading }\">\r\n    <div class=\"toolbar-wrapper\">\r\n      <div class=\"toolbar-left\">\r\n        <div class=\"library-info\">\r\n          <div class=\"library-info-content\">\r\n            <wiki-dropdown :libraryInfo=\"libraryInfo\" :libraryList=\"libraryList\"\r\n              @change=\"handleChangeLibrary\"></wiki-dropdown>\r\n\r\n            <div class=\"publish-status\" v-if=\"libraryInfo.access_rights == 0\">\r\n              <ExclamationCircleFilled class=\"status-icon\" />\r\n              <span class=\"status-name\">{{ t('not_public') }}</span>\r\n            </div>\r\n            <div class=\"publish-status is-publish\" v-if=\"libraryInfo.access_rights == 1\">\r\n              <CheckCircleFilled class=\"status-icon\" />\r\n              <span class=\"status-name\">{{ t('published') }}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"toolbar-right\">\r\n        <div class=\"action-item\">\r\n          <a-input :placeholder=\"t('knowledge_search')\" v-model:value=\"searchValue\" @pressEnter=\"handleSearch\" allowClear>\r\n            <template #suffix>\r\n              <SearchOutlined style=\"color: rgba(0, 0, 0, 0.45)\" @click=\"handleSearch\" />\r\n            </template>\r\n          </a-input>\r\n        </div>\r\n\r\n        <div class=\"action-item\">\r\n          <a-button type=\"primary\" :loading=\"publishLoading\" @click=\"handlePublish\" v-if=\"isEdit\">\r\n            <CheckOutlined /><span class=\"action-name\">{{ t('publish') }}</span>\r\n          </a-button>\r\n          <a-button type=\"primary\" @click=\"handleEdit\" v-else>\r\n            <svg-icon class=\"action-icon\" name=\"edit\" style=\"font-size: 16px; color: #fff\"></svg-icon>\r\n            <span class=\"action-name\">{{ t('edit') }}</span>\r\n          </a-button>\r\n        </div>\r\n\r\n        <div class=\"action-item\">\r\n          <a-button @click=\"handleCopyShareUrl\">\r\n            <svg-icon class=\"action-icon\" name=\"link-left\" style=\"font-size: 16px\"></svg-icon>\r\n            <span class=\"action-name\">{{ t('copy_link') }}</span>\r\n          </a-button>\r\n        </div>\r\n\r\n        <div class=\"action-item\">\r\n          <a-button @click=\"handleOpenSeoSetting\">\r\n            <CheckCircleFilled style=\"color: #21a665; font-size: 14px\" class=\"status-icon actin-icon\" v-if=\"isSetSeo\" />\r\n            <ExclamationCircleFilled  style=\"color: #ccc; font-size: 14px\" class=\"status-icon actin-icon\" v-else />\r\n            <span class=\"action-name\">{{ t('seo') }}</span>\r\n          </a-button>\r\n        </div>\r\n\r\n        <div class=\"action-item\">\r\n          <a-button @click=\"toSettingPage\">\r\n            <svg-icon class=\"actin-icon\" name=\"jibenpeizhi\" style=\"font-size: 14px; color: #595959\"></svg-icon>\r\n            <span class=\"action-name\">{{ t('settings') }}</span>\r\n          </a-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"loading-wrapper\" v-if=\"loading\"><a-spin tip=\"Loading...\"></a-spin></div>\r\n    <div class=\"editor-page-header\">\r\n      <div class=\"header-left\">\r\n        <div class=\"title-wrapper\" v-if=\"isEdit\">\r\n          <icon-selector @select=\"handleSelectDocIcon\">\r\n            <span class=\"doc-icon\">{{ state.doc_icon || levelDocIcon }}</span>\r\n          </icon-selector>\r\n          <div class=\"doc-title\">\r\n            <DocTitleInput v-model:title=\"state.title\"  @blur=\"onTitleBlur\" @input=\"onTitleInput\"  />\r\n          </div>\r\n        </div>\r\n        <div class=\"title-wrapper\" v-else>\r\n          <span class=\"doc-icon\">{{ state.doc_icon || levelDocIcon }}</span>\r\n          <div class=\"doc-title\">\r\n            <div class=\"doc-title-text\" @click=\"handleTitleClick\" :class=\"{ 'title-highlight': titleHighlight }\" >{{ state.title }}</div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"doc-last-update\">{{ t('last_update_time') }}{{ state.update_time_str }}</div>\r\n      </div>\r\n      <div class=\"header-right\">\r\n        <span class=\"last-save-time\">{{ lastSaveTiemDate }} {{ t('auto_save_draft') }}</span>\r\n        <div class=\"edit-user\" v-if=\"editUser.show && editUser.user_name\">\r\n          <i class=\"line\"></i>\r\n          <img class=\"user-avatar\" :src=\"editUser.avatar\" alt=\"\" />\r\n          <span class=\"user-name\">{{ editUser.nick_name || editUser.user_name }}</span>\r\n          <span class=\"edit-status-text\">{{ t('editing') }}</span>\r\n        </div>\r\n        <div class=\"action-box\" v-if=\"isEdit\">\r\n          <a-button class=\"action-btn\" @click=\"handleSaveDraft(true)\">\r\n            <svg-icon class=\"action-icon\" name=\"save-draft\" style=\"font-size: 16px\"></svg-icon>\r\n            <span>{{ t('save_draft') }}</span>\r\n          </a-button>\r\n        </div>\r\n\r\n        <div class=\"action-box\" v-if=\"isEdit\">\r\n          <a-button class=\"action-btn\" @click=\"handlePreview()\">\r\n            <svg-icon class=\"action-icon\" name=\"eye-open\" style=\"font-size: 16px\"></svg-icon>\r\n            <span>{{ t('preview') }}</span>\r\n          </a-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"editor-page-body\">\r\n      <MdDitor ref=\"MdDitorRef\" @input=\"onContentInput\" @blur=\"onContentBlur\" />\r\n    </div>\r\n    <SeoSetting ref=\"seoSettingRef\" @ok=\"saveSeoSuccess\" />\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { OPEN_BOC_BASE_URL } from '@/constants/index'\r\nimport { getUser } from '@/api/manage'\r\nimport dayjs from 'dayjs'\r\nimport { saveLibDoc, saveDraftLibDoc, getLibDocInfo, getPreviewUrl } from '@/api/public-library'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport { useUserStore } from '@/stores/modules/user'\r\nimport { usePublicLibraryStore } from '@/stores/modules/public-library'\r\nimport { ref, reactive, watch, computed, nextTick, onBeforeUnmount, onMounted } from 'vue'\r\nimport { CheckOutlined, ExclamationCircleFilled, CheckCircleFilled, SearchOutlined } from '@ant-design/icons-vue'\r\nimport { useCopyShareUrl } from '@/hooks/web/useCopyShareUrl'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\nimport { message, Modal } from 'ant-design-vue'\r\nimport MdDitor from './components/md-editor.vue'\r\nimport DocTitleInput from './components/doc-title-input.vue'\r\nimport SeoSetting from '../components/seo-setting.vue'\r\nimport WikiDropdown from '../components/wiki-dropdown.vue'\r\nimport IconSelector from './components/icon-selector.vue'\r\n\r\nconst { t } = useI18n('views.public-library.editor.index')\r\n\r\nconst autoSaveTime = 1000 * 15\r\nconst emit = defineEmits(['changeDoc'])\r\n\r\nconst route = useRoute()\r\nconst router = useRouter()\r\n\r\nconst libraryStore = usePublicLibraryStore()\r\n\r\nconst { user_id } = useUserStore()\r\n\r\nconst libraryInfo = computed(() => libraryStore.libraryInfo)\r\nconst docTreeStateMap = computed(() => libraryStore.docTreeStateMap)\r\nconst docId = computed(() => route.query.doc_id);\r\n\r\nconst levelDocIcon = computed(() => {\r\n  if(!docTreeStateMap.value[docId.value]){\r\n    return '';\r\n  }\r\n\r\n  return docTreeStateMap.value[docId.value].doc_icon || '';   \r\n});\r\nconst isEdit = ref(false)\r\nconst searchValue = ref('')\r\nconst state = reactive({\r\n  library_key: '',\r\n  doc_id: docId.value,\r\n  doc_key: '',\r\n  doc_icon: '',\r\n  title: '',\r\n  content: '',\r\n  update_time_str: '',\r\n  is_draft: '',\r\n  pid: '',\r\n  seo_title: '',\r\n  seo_desc: '',\r\n  seo_keywords: ''\r\n})\r\n\r\nconst isSetSeo = computed(() => { \r\n  return state.seo_title || state.seo_desc || state.seo_keywords\r\n})\r\n\r\nconst editUser = reactive({\r\n  show: false,\r\n  user_name: '',\r\n  avatar: '',\r\n  nick_name: ''\r\n})\r\n\r\n\r\nconst handleSelectDocIcon = (icon) => {\r\n  state.doc_icon = icon.content;\r\n\r\n  onSaveDoc()\r\n}\r\n\r\n// æ ‡é¢˜é«˜äº®çŠ¶æ€è®¡ç®—å±æ€§\r\nconst titleHighlight = computed(() => {\r\n  return libraryInfo.value.share_url != '' && libraryInfo.value.access_rights == 1\r\n})\r\n\r\nconst handleTitleClick = () => {\r\n  if (!titleHighlight.value) {\r\n    return\r\n  }\r\n\r\n  const docUrl = libraryInfo.value.share_url + OPEN_BOC_BASE_URL + '/doc/' + state.doc_key\r\n\r\n  window.open(docUrl)\r\n}\r\n\r\nconst { copyShareUrl } = useCopyShareUrl()\r\n\r\nconst handleCopyShareUrl = async () => {\r\n  const docUrl = OPEN_BOC_BASE_URL + '/doc/' + state.doc_key\r\n  await copyShareUrl(docUrl)\r\n}\r\n\r\nconst seoSettingRef = ref(null)\r\nconst handleOpenSeoSetting = () => {\r\n  seoSettingRef.value.open({ ...state })\r\n}\r\n\r\nconst saveSeoSuccess = (data) => {\r\n  state.seo_title = data.seo_title\r\n  state.seo_desc = data.seo_desc\r\n  state.seo_keywords = data.seo_keywords\r\n\r\n  getDoc()\r\n}\r\n\r\nlet autoSaveTimer = null\r\n// æ“ä½œåè‡ªåŠ¨ä¿å­˜è‰ç¨¿\r\nconst autoSaveDraft = () => {\r\n  if (autoSaveTimer) {\r\n    clearTimeout(autoSaveTimer)\r\n    autoSaveTimer = null\r\n  }\r\n\r\n  autoSaveTimer = setTimeout(() => {\r\n    if (isDocChange.value) {\r\n      onSaveDoc()\r\n    }\r\n  }, autoSaveTime)\r\n}\r\n\r\nconst clearAutoSaveTimer = () => {\r\n  if (autoSaveTimer) {\r\n    clearTimeout(autoSaveTimer)\r\n    autoSaveTimer = null\r\n  }\r\n}\r\n\r\nconst loading = ref(true)\r\n\r\nconst isDocChange = ref(false)\r\n\r\nconst onTitleInput = (val) => {\r\n  state.title = val\r\n  isDocChange.value = true\r\n\r\n  autoSaveDraft()\r\n}\r\n\r\nconst onTitleBlur = () => {\r\n  if (isDocChange.value) {\r\n    onSaveDoc()\r\n  }\r\n}\r\n\r\nconst onContentInput = () => {\r\n  isDocChange.value = true\r\n\r\n  autoSaveDraft()\r\n}\r\n\r\nconst onContentBlur = () => {\r\n  if (isDocChange.value) {\r\n    onSaveDoc()\r\n  }\r\n}\r\n\r\nconst MdDitorRef = ref(null)\r\nconst lastSaveTiemDate = ref('')\r\n\r\nconst setLastSaveTimeDate = () => {\r\n  lastSaveTiemDate.value = dayjs().format('HH:mm')\r\n}\r\nconst getDoc = () => {\r\n  getLibDocInfo({\r\n    library_key: libraryInfo.value.library_key,\r\n    doc_id: docId.value\r\n  }).then((res) => {\r\n    res.data.library_key = libraryInfo.value.library_key\r\n    res.data.doc_id = docId.value\r\n    res.data.update_time_str = dayjs(res.data.update_time * 1000).format('YYYY-MM-DD HH:mm:ss')\r\n\r\n    Object.assign(state, res.data)\r\n  })\r\n}\r\n\r\nconst setMDEditor = (type) => {\r\n  isEdit.value = type\r\n\r\n  MdDitorRef.value.init(type ? 'editor' : 'preview', state.content)\r\n}\r\nconst initDoc = () => {\r\n  loading.value = true\r\n  editUser.show = false\r\n\r\n  getLibDocInfo({\r\n    library_key: libraryInfo.value.library_key,\r\n    doc_id: docId.value\r\n  })\r\n    .then((res) => {\r\n      res.data.library_key = libraryInfo.value.library_key\r\n      res.data.doc_id = docId.value\r\n      res.data.update_time_str = dayjs(res.data.update_time * 1000).format('YYYY-MM-DD HH:mm:ss')\r\n\r\n      Object.assign(state, res.data)\r\n\r\n      let editStatus = res.data.edit_user && res.data.edit_user != 0\r\n\r\n      if (editStatus && res.data.edit_user != user_id) {\r\n        editUser.show = true\r\n        getEditUser(res.data.edit_user)\r\n      }\r\n\r\n      if (editStatus && res.data.edit_user == user_id) {\r\n        setMDEditor(true)\r\n      } else {\r\n        setMDEditor(false)\r\n      }\r\n\r\n      setLastSaveTimeDate(res.data.update_time * 1000)\r\n\r\n      loading.value = false\r\n    })\r\n    .catch(() => {\r\n      loading.value = false\r\n    })\r\n}\r\n\r\nconst saveDraftLoading = ref(false)\r\n\r\nconst handleSaveDraft = (showTips) => {\r\n  clearAutoSaveTimer()\r\n\r\n  let doc = MdDitorRef.value.getDoc()\r\n\r\n  state.content = doc.content\r\n\r\n  doc.title = state.title\r\n\r\n  let data = {\r\n    library_key: libraryInfo.value.library_key,\r\n    pid: state.pid,\r\n    doc_id: docId.value,\r\n    title: doc.title,\r\n    content: doc.content,\r\n    doc_icon: state.doc_icon,\r\n    doc_type: 4,\r\n  }\r\n  if (showTips) {\r\n    saveDraftLoading.value = true\r\n  }\r\n\r\n  saveDraftLibDoc(data)\r\n    .then(() => {\r\n      if (showTips) {\r\n        saveDraftLoading.value = false\r\n        message.success(t('save_success'))\r\n      }\r\n\r\n      setLastSaveTimeDate()\r\n\r\n      state.is_draft = 1\r\n\r\n      isDocChange.value = false\r\n\r\n      emit('changeDoc', { ...data, id: data.doc_id, is_draft: 1 })\r\n    })\r\n    .catch(() => {\r\n      saveDraftLoading.value = false\r\n      autoSaveDraft()\r\n    })\r\n}\r\n\r\nconst getEditUser = async (userId) => {\r\n  let res = await getUser({ id: userId })\r\n  editUser.avatar = res.data.avatar\r\n  editUser.user_name = res.data.user_name\r\n  editUser.nick_name = res.data.nick_name\r\n  return res\r\n}\r\n\r\nconst handleEdit = async () => {\r\n  try {\r\n    let doc = await getLibDocInfo({\r\n      doc_id: docId.value,\r\n      library_key: libraryInfo.value.library_key\r\n    })\r\n\r\n    let editStatus = doc.data.edit_user && doc.data.edit_user != 0\r\n\r\n    if (editStatus && doc.data.edit_user != user_id) {\r\n            let user = await getEditUser(doc.data.edit_user)\r\n            let name = user.data.nick_name || user.data.user_name\r\n            editUser.show = true\r\n            Modal.warning({\r\n              title: t('editing_document', { name }),\r\n              content: t('need_collaborator_finish'),\r\n              okText: t('got_it')\r\n            })\r\n    \r\n            return\r\n          }\r\n    editUser.show = false\r\n\r\n    let data = {\r\n      library_key: libraryInfo.value.library_key,\r\n      pid: state.pid,\r\n      doc_id: docId.value,\r\n      title: state.title,\r\n      content: state.content,\r\n      doc_type: 4,\r\n      doc_icon: state.doc_icon,\r\n    }\r\n\r\n    saveDraftLibDoc(data)\r\n\r\n    setMDEditor(true)\r\n  } catch (error) {\r\n    console.log(error)\r\n    return\r\n  }\r\n}\r\n\r\nconst publishLoading = ref(false)\r\nconst handlePublish = () => {\r\n  let doc = MdDitorRef.value.getDoc()\r\n\r\n  state.content = doc.content\r\n\r\n  doc.title = state.title\r\n\r\n  let data = {\r\n    library_key: libraryInfo.value.library_key,\r\n    pid: state.pid,\r\n    doc_id: docId.value,\r\n    title: doc.title,\r\n    doc_type: 4,\r\n    content: doc.content,\r\n    doc_icon: state.doc_icon,\r\n  }\r\n  publishLoading.value = true\r\n  saveLibDoc(data)\r\n    .then(() => {\r\n      publishLoading.value = false\r\n      message.success(t('publish_success'))\r\n\r\n      setLastSaveTimeDate()\r\n\r\n      state.is_draft = 0\r\n      setMDEditor(false)\r\n      emit('changeDoc', { ...data, id: data.doc_id, is_draft: 0 })\r\n    })\r\n    .catch(() => {\r\n      publishLoading.value = false\r\n    })\r\n}\r\n\r\nconst onSaveDoc = (data, status) => {\r\n  handleSaveDraft(status === 'manuallySave')\r\n}\r\n\r\nconst onKeydown = (event) => {\r\n  if (event.ctrlKey && event.key === 's') {\r\n    event.preventDefault()\r\n\r\n    onSaveDoc('manuallySave')\r\n  }\r\n}\r\n\r\nconst handlePreview = () => {\r\n  getPreviewUrl({\r\n    library_key: libraryInfo.value.library_key,\r\n    doc_id: docId.value\r\n  }).then((res) => {\r\n    window.open(\r\n      `${libraryInfo.value.share_url}${OPEN_BOC_BASE_URL}/doc/${state.doc_key}?preview=${res.data.preview_key}`,\r\n      '_blank'\r\n    )\r\n  })\r\n}\r\n\r\nconst toSettingPage = () => {\r\n  console.log(libraryInfo.value)\r\n  router.push({\r\n    path: '/public-library/config',\r\n    query: {\r\n      library_id: libraryInfo.value.id,\r\n      library_key: libraryInfo.value.library_key\r\n    }\r\n  })\r\n}\r\n\r\n// çŸ¥è¯†åº“åˆ—è¡¨\r\nconst libraryList = computed(() => libraryStore.libraryList)\r\n\r\nconst fetchLibraryList = () => {\r\n  libraryStore.getLibraryList()\r\n}\r\n\r\nconst handleChangeLibrary = async (data) => {\r\n  await router.replace({\r\n    path: '/public-library/home',\r\n    query: {\r\n      library_id: data.id,\r\n      library_key: data.library_key\r\n    }\r\n  })\r\n\r\n  window.location.reload();\r\n}\r\n\r\nconst handleSearch = () => {\r\n  message.warn(t('edit_mode_no_search'))\r\n}\r\n\r\nwatch(docId, () => {\r\n  nextTick(() => {\r\n    initDoc()\r\n  })\r\n})\r\n\r\nonMounted(() => {\r\n  document.addEventListener('keydown', onKeydown)\r\n  fetchLibraryList()\r\n  initDoc()\r\n})\r\n\r\nonBeforeUnmount(() => {\r\n  clearAutoSaveTimer()\r\n\r\n  document.removeEventListener('keydown', onKeydown)\r\n})\r\n</script>\r\n"],"names":["myFileUpload","file","callback","uploadFile","res","message","url","err","basicConfig","link","type","defaultWrapper","emit","__emit","localeKeysMap","localeStore","useLocaleStore","lang","computed","MDEditor","state","reactive","initPreview","Cherry","initEditor","config","text","onContentInput","onContentBlur","setContent","content","clearStack","getContent","setDoc","doc","getDoc","clearDoc","val","init","onMounted","onBeforeUnmount","__expose","_createElementBlock","_normalizeClass","_createElementVNode","_hoisted_1","inputRef","ref","props","__props","endEdit","onInput","watch","_openBlock","_createVNode","_component_a_input","$event","docIcons","t","useI18n","searchValue","recentIcons","openChange","visible","nextTick","loadRecentIcons","stored","error","saveRecentIcons","addToRecentIcons","icon","existingIndex","item","filteredIcons","searchTerm","keyword","search","selectIcon","_createBlock","_component_a_popover","_hoisted_2","_unref","SearchOutlined","_hoisted_3","_hoisted_4","_toDisplayString","_hoisted_5","_Fragment","_renderList","index","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_renderSlot","_ctx","autoSaveTime","route","useRoute","router","useRouter","libraryStore","usePublicLibraryStore","user_id","useUserStore","libraryInfo","docTreeStateMap","docId","levelDocIcon","isEdit","isSetSeo","editUser","handleSelectDocIcon","onSaveDoc","titleHighlight","handleTitleClick","docUrl","OPEN_BOC_BASE_URL","copyShareUrl","useCopyShareUrl","handleCopyShareUrl","seoSettingRef","handleOpenSeoSetting","saveSeoSuccess","data","autoSaveTimer","autoSaveDraft","isDocChange","clearAutoSaveTimer","loading","onTitleInput","onTitleBlur","MdDitorRef","lastSaveTiemDate","setLastSaveTimeDate","dayjs","getLibDocInfo","setMDEditor","initDoc","editStatus","getEditUser","saveDraftLoading","handleSaveDraft","showTips","saveDraftLibDoc","userId","getUser","handleEdit","user","name","Modal","publishLoading","handlePublish","saveLibDoc","status","onKeydown","event","handlePreview","getPreviewUrl","toSettingPage","libraryList","fetchLibraryList","handleChangeLibrary","handleSearch","WikiDropdown","ExclamationCircleFilled","CheckCircleFilled","_hoisted_11","_component_a_button","CheckOutlined","_hoisted_12","_component_svg_icon","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_component_a_spin","_hoisted_21","_hoisted_22","_hoisted_23","IconSelector","_hoisted_24","_hoisted_25","DocTitleInput","_cache","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","MdDitor","SeoSetting"],"mappings":"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"}