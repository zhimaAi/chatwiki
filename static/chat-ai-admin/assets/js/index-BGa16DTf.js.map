{"version":3,"file":"index-BGa16DTf.js","sources":["../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-config/smart-menu/smart-menu.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-config/smart-menu/index.vue"],"sourcesContent":["<template>\r\n  <div class=\"user-model-page\">\r\n    <!-- <div class=\"page-title\">智能菜单</div> -->\r\n    <div class=\"switch-block\">\r\n      <span class=\"switch-title\">{{ t('title_smart_menu') }}</span>\r\n      <a-switch @change=\"smartMenuSwitchChange\" :checked=\"smartMenuStatus\" :checked-children=\"t('switch_on')\"\r\n        :un-checked-children=\"t('switch_off')\" />\r\n      <span class=\"switch-desc\">\r\n        {{ t('switch_desc') }}\r\n      </span>\r\n    </div>\r\n    <a-alert>\r\n      <template #message>\r\n        <p>{{ t('alert_description') }}</p>\r\n        <p>{{ t('alert_usage') }}</p>\r\n      </template>\r\n    </a-alert>\r\n    <div class=\"search-block\">\r\n      <div class=\"left-block\">\r\n        <a-button type=\"primary\" @click=\"handleAddReply\">\r\n          <template #icon>\r\n            <PlusOutlined />\r\n          </template>\r\n          {{ t('btn_add_smart_menu') }}\r\n        </a-button>\r\n      </div>\r\n    </div>\r\n    <div class=\"list-box\">\r\n      <!-- 空状态 -->\r\n      <div v-if=\"smartList.length === 0\" class=\"list-empty\">\r\n        <ListEmpty size=\"200\" :text=\"t('text_no_data')\" />\r\n      </div>\r\n      <div v-else class=\"list-grid\">\r\n        <div class=\"list-card\" v-for=\"it in smartList\" :key=\"it.id\">\r\n          <div class=\"card-header\">\r\n            <a-avatar :src=\"it.avatar_url || defaultAvatar\" :size=\"40\" shape=\"square\" class=\"sm-avatar\" />\r\n            <div class=\"card-content\">\r\n              <div class=\"card-title\">{{ it.menu_description }}</div>\r\n              <div class=\"card-text\">\r\n                <template v-for=\"(line, li) in getDisplayLines(it)\" :key=\"li\">\r\n                  <div class=\"reply-line\" @click=\"onReplyLineClick($event)\">\r\n                    <span class=\"line-text\" v-if=\"line.kind === 'text'\">{{ line.text }}</span>\r\n                    <div v-else-if=\"line.kind === 'newline'\" class=\"empty-line\"></div>\r\n                    <span v-else-if=\"line.kind === 'html'\" v-html=\"line.html\"></span>\r\n                    <a v-else-if=\"line.kind === 'keyword'\" href=\"javascript:;\" class=\"link\">\r\n                      <div v-if=\"line.serial_no\">{{ line.serial_no }}</div>\r\n                      {{ line.text }}\r\n                    </a>\r\n                  </div>\r\n                </template>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"card-footer\">\r\n            <div class=\"footer-left\">\r\n              <div class=\"menu-name\">{{ it.menu_title }}</div>\r\n              <div class=\"update-time\">{{ t('text_updated_on') }}{{ formatDateFn(it.update_time, 'YYYY-MM-DD') }}</div>\r\n            </div>\r\n            <a-dropdown placement=\"bottomRight\">\r\n              <a class=\"more-btn\" @click.prevent>\r\n                <EllipsisOutlined />\r\n              </a>\r\n              <template #overlay>\r\n                <a-menu>\r\n                  <a-menu-item key=\"edit\" @click=\"handleEdit(it)\">{{ t('btn_edit') }}</a-menu-item>\r\n                  <a-menu-item key=\"del\" @click=\"handleDelete(it)\" style=\"color: #FF4D4F;\">{{ t('btn_delete') }}</a-menu-item>\r\n                </a-menu>\r\n              </template>\r\n            </a-dropdown>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted } from 'vue'\r\nimport { PlusOutlined, EllipsisOutlined } from '@ant-design/icons-vue'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport { saveRobotAbilitySwitchStatus, getSmartMenuList, deleteSmartMenu } from '@/api/explore/index.js'\r\nimport { useRobotStore } from '@/stores/modules/robot'\r\nimport { message, Modal } from 'ant-design-vue'\r\nimport dayjs from 'dayjs'\r\nimport { DEFAULT_ROBOT_AVATAR } from '@/constants/index'\r\nimport ListEmpty from '@/views/robot/robot-config/function-center/components/list-empty.vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.robot.robot-config.smart-menu.smart-menu')\r\n\r\nconst robotStore = useRobotStore()\r\n// 来自左侧菜单的能力开关（关键词回复）\r\nconst smartMenuStatus = computed(() => robotStore.smartMenuSwitchStatus === '1')\r\nconst query = useRoute().query\r\nconst router = useRouter()\r\nconst loading = ref(false)\r\nconst smartList = ref([])\r\nconst defaultAvatar = DEFAULT_ROBOT_AVATAR\r\nconst getTableData = () => {\r\n  const parmas = { robot_id: query.id }\r\n  loading.value = true\r\n  getSmartMenuList({ ...parmas })\r\n    .then((res) => {\r\n      const data = res?.data || { list: [] }\r\n      smartList.value = (data.list || []).map((item) => ({\r\n        id: Number(item.id || 0),\r\n        menu_title: item.menu_title || '',\r\n        update_time: Number(item.update_time || item.create_time || 0),\r\n        avatar_url: item.avatar_url || '',\r\n        switch_status: String(item.switch_status ?? '0'),\r\n        priority_num: Number(item.priority_num || 0),\r\n        reply_num: Number(item.reply_num || 0),\r\n        reply_content: Array.isArray(item.reply_content) ? item.reply_content : [],\r\n        menu_content: Array.isArray(item.menu_content) ? item.menu_content : [],\r\n        menu_description: item.menu_description || ''\r\n      }))\r\n    })\r\n    .catch(() => {\r\n    })\r\n    .finally(() => { loading.value = false })\r\n}\r\n\r\nfunction buildPreviewLines (list) {\r\n  const lines = []\r\n    ; (Array.isArray(list) ? list : []).forEach((rc) => {\r\n      const t = rc?.type || rc?.reply_type\r\n      if (t === 'text') {\r\n        if (rc?.description) lines.push({ text: rc.description })\r\n      } else if (t === 'imageText') {\r\n        const txt = rc?.title || rc?.description || t('text_image_text_link')\r\n        lines.push({ text: txt, url: rc?.url })\r\n      } else if (t === 'url') {\r\n        const txt = rc?.title || t('text_link')\r\n        lines.push({ text: txt, url: rc?.url })\r\n      } else if (t === 'image') {\r\n        lines.push({ text: t('text_image') })\r\n      } else if (t === 'card') {\r\n        const txt = rc?.title || t('text_mini_program_card')\r\n        lines.push({ text: txt })\r\n      }\r\n    })\r\n  return lines.slice(0, 8)\r\n}\r\n\r\nfunction buildMenuLines (menu_content) {\r\n  const out = []\r\n    ; (Array.isArray(menu_content) ? menu_content : []).forEach((mc) => {\r\n      const t = String(mc?.menu_type || '')\r\n      const txt = String(mc?.content || '')\r\n      if (t === '0') {\r\n        if (txt === '') { out.push({ kind: 'newline' }) }\r\n        else if (/<a[\\s\\S]*?<\\/a>/.test(txt)) {\r\n          const sanitized = /href\\s*=\\s*['\"]\\s*#\\s*['\"]/i.test(txt) ? txt.replace(/href\\s*=\\s*['\"]\\s*#\\s*['\"]/ig, 'href=\"javascript:;\"') : txt.replace(/href=/ig, 'target=\"_blank\" href=');\r\n          out.push({\r\n            kind: 'html',\r\n            html: sanitized\r\n          })\r\n        }\r\n        else {\r\n          out.push({\r\n            kind: 'text',\r\n            text: txt\r\n          })\r\n        }\r\n      } else if (t === '1') {\r\n        out.push({\r\n          kind: 'keyword',\r\n          text: txt,\r\n          serial_no: mc?.serial_no || ''\r\n        })\r\n      }\r\n    })\r\n  return out.slice(0, 20)\r\n}\r\n\r\nfunction getDisplayLines (item) {\r\n  if (Array.isArray(item?.menu_content) && item.menu_content.length) return buildMenuLines(item.menu_content)\r\n  return buildPreviewLines(item?.reply_content || [])\r\n}\r\n\r\nfunction onReplyLineClick (e) {\r\n  const a = e.target?.closest?.('a')\r\n  if (!a) return\r\n  const href = String(a.getAttribute('href') || '')\r\n  if (href === '#' || href === 'javascript:;') { e.preventDefault(); e.stopPropagation() }\r\n}\r\n\r\nconst handleAddReply = () => {\r\n  router.push({\r\n    path: '/robot/ability/smart-menu/add-rule',\r\n    query: {\r\n      id: query.id,\r\n      robot_key: query.robot_key\r\n    }\r\n  })\r\n}\r\n\r\nconst handleEdit = (record) => {\r\n  router.push({\r\n    path: '/robot/ability/smart-menu/add-rule',\r\n    query: {\r\n      id: query.id,\r\n      robot_key: query.robot_key,\r\n      rule_id: record.id\r\n    }\r\n  })\r\n}\r\n\r\nconst handleCopy = (record) => {\r\n  router.push({\r\n    path: '/robot/ability/smart-menu/add-rule',\r\n    query: {\r\n      id: query.id,\r\n      robot_key: query.robot_key,\r\n      copy_id: record.id\r\n    }\r\n  })\r\n}\r\n\r\nconst handleDelete = (record) => {\r\n  Modal.confirm({\r\n    title: t('msg_confirm_delete'),\r\n    okText: t('btn_confirm'),\r\n    onOk: () => {\r\n      deleteSmartMenu({ id: record.id, robot_id: query.id }).then((res) => {\r\n        if (res && res.res == 0) {\r\n          message.success(t('msg_delete_success'))\r\n          getTableData()\r\n        }\r\n      })\r\n    }\r\n  })\r\n}\r\n\r\nconst smartMenuSwitchChange = (checked) => {\r\n  const switch_status = checked ? '1' : '0'\r\n  if (!checked) {\r\n    Modal.confirm({\r\n      title: t('msg_confirm_close'),\r\n      okText: t('btn_confirm'),\r\n      cancelText: t('btn_cancel'),\r\n      onOk() {\r\n        saveRobotAbilitySwitchStatus({ robot_id: query.id, ability_type: 'robot_smart_menu', switch_status }).then((res) => {\r\n          if (res && res.res == 0) {\r\n            robotStore.setSmartMenuSwitchStatus(switch_status)\r\n            message.success(t('msg_operation_success'))\r\n            window.dispatchEvent(new CustomEvent('robotAbilityUpdated', { detail: { robotId: query.id } }))\r\n          }\r\n        })\r\n      }\r\n    })\r\n    return\r\n  }\r\n  saveRobotAbilitySwitchStatus({ robot_id: query.id, ability_type: 'robot_smart_menu', switch_status }).then((res) => {\r\n    if (res && res.res == 0) {\r\n      robotStore.setSmartMenuSwitchStatus(switch_status)\r\n      message.success(t('msg_operation_success'))\r\n      window.dispatchEvent(new CustomEvent('robotAbilityUpdated', { detail: { robotId: query.id } }))\r\n    }\r\n  })\r\n}\r\n\r\nfunction formatDateFn (date, format = 'YYYY-MM-DD') {\r\n  if (!date) return ''\r\n  return dayjs(date * 1000).format(format)\r\n}\r\n\r\nonMounted(async () => {\r\n  getTableData()\r\n})\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.user-model-page {\r\n  width: 100%;\r\n\r\n  .page-title {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 24px;\r\n    padding-bottom: 16px;\r\n    background-color: #fff;\r\n    color: #000000;\r\n    font-size: 16px;\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    line-height: 24px;\r\n  }\r\n\r\n  .search-block {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    margin-top: 16px;\r\n\r\n    .left-block {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 16px;\r\n    }\r\n  }\r\n\r\n  .list-box {\r\n    margin-top: 8px;\r\n  }\r\n\r\n  ::v-deep(.ant-alert) {\r\n    align-items: baseline;\r\n  }\r\n}\r\n\r\n.switch-block {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 16px;\r\n\r\n  .switch-title {\r\n    margin-right: 12px;\r\n    color: #262626;\r\n    font-size: 16px;\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    line-height: 24px;\r\n  }\r\n}\r\n\r\n.switch-desc {\r\n  margin-left: 4px;\r\n  color: #8c8c8c;\r\n  font-size: 14px;\r\n  font-style: normal;\r\n  font-weight: 400;\r\n  line-height: 22px;\r\n}\r\n\r\n.flex {\r\n  display: flex;\r\n  align-items: center;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.more-btn {\r\n  flex: 0 0 auto;\r\n}\r\n\r\n.list-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(3, minmax(300px, 1fr));\r\n  gap: 16px;\r\n  padding: 8px 4px;\r\n}\r\n\r\n.list-card {\r\n  border: 1px solid #e6e8ec;\r\n  border-radius: 12px;\r\n  background: #fff;\r\n  padding: 0;\r\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.04);\r\n  transition: box-shadow .2s ease, transform .2s ease;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  align-items: flex-start;\r\n  gap: 8px;\r\n  padding: 12px 60px 12px 12px;\r\n  background: #F2F4F7;\r\n  border-radius: 12px 12px 0 0;\r\n  height: 180px;\r\n  box-shadow: 0 -4px 8px 0 #00000014 inset;\r\n  overflow-y: auto;\r\n  scrollbar-width: thin;\r\n  scrollbar-color: #d9d9d9 transparent;\r\n}\r\n\r\n.card-header::-webkit-scrollbar {\r\n  width: 6px;\r\n  height: 6px;\r\n}\r\n\r\n.card-header::-webkit-scrollbar-track {\r\n  background: transparent;\r\n  border-radius: 8px;\r\n}\r\n\r\n.card-header::-webkit-scrollbar-thumb {\r\n  background: #d9d9d9;\r\n  border-radius: 8px;\r\n}\r\n\r\n.card-header::-webkit-scrollbar-thumb:hover {\r\n  background: #A1A7B3;\r\n}\r\n\r\n.card-content {\r\n  width: 100%;\r\n  flex: 1;\r\n  padding: 12px;\r\n  background: #fff;\r\n  border-radius: 2px 12px 12px 12px;\r\n}\r\n\r\n.card-title {\r\n  white-space: pre-wrap;\r\n  align-self: stretch;\r\n  color: #1a1a1a;\r\n  font-size: 14px;\r\n  font-style: normal;\r\n  font-weight: 400;\r\n  line-height: 20px;\r\n  margin-bottom: 14px;\r\n}\r\n\r\n.card-text {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 10px;\r\n  color: #3a4559;\r\n  font-size: 14px;\r\n  line-height: 22px;\r\n  overflow: visible;\r\n  .reply-line {\r\n    line-height: 22px;\r\n    .line-text {\r\n      color: #3a4559;\r\n    }\r\n    .empty-line {\r\n      height: 22px;\r\n    }\r\n    .link {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 4px;\r\n    }\r\n  }\r\n}\r\n\r\n.empty-line {\r\n  height: 22px;\r\n}\r\n\r\n.card-footer {\r\n  box-sizing: border-box;\r\n  margin-top: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 12px 16px;\r\n  border-top: 1px solid #edeff2;\r\n}\r\n\r\n.footer-left {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: self-start;\r\n}\r\n\r\n.menu-name {\r\n  align-self: stretch;\r\n  color: #262626;\r\n  font-size: 14px;\r\n  font-style: normal;\r\n  font-weight: 600;\r\n  line-height: 22px;\r\n}\r\n\r\n.update-time {\r\n  align-self: stretch;\r\n  color: #8c8c8c;\r\n  font-size: 12px;\r\n  font-style: normal;\r\n  font-weight: 400;\r\n  line-height: 16px;\r\n}\r\n\r\n.more-btn {\r\n  color: #595959;\r\n  width: 24px;\r\n  height: 24px;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 6px;\r\n}\r\n\r\n.more-btn:hover {\r\n  color: #595959;\r\n  background: #E4E6EB;\r\n}\r\n\r\n@media (min-width: 1920px) {\r\n  .list-grid {\r\n    grid-template-columns: repeat(4, minmax(300px, 1fr));\r\n  }\r\n}\r\n\r\n.sm-avatar {\r\n  border-radius: 4px !important;\r\n}\r\n\r\n.list-empty {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 40px 0;\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"auto-reply-home\">\r\n    <!-- <template v-if=\"hasApps\"> -->\r\n      <SmartMenu />\r\n    <!-- </template> -->\r\n    <!-- <template v-else>\r\n      <div class=\"user-model-page\">\r\n        <div class=\"page-title\">智能菜单</div>\r\n        <a-alert show-icon>\r\n          <template #message>\r\n            开启后，该智能菜单可以被关键词回复等功能调用\r\n          </template>\r\n        </a-alert>\r\n        <div class=\"empty-wrap\">\r\n          <ListEmpty size=\"180\">\r\n            <div class=\"empty-default\">暂未绑定公众号</div>\r\n            <div class=\"empty-sub\">请先到对外服务中 机器人>对外服务>微信公众号去绑定公众号</div>\r\n          </ListEmpty>\r\n          <div class=\"empty-actions\">\r\n            <a-button type=\"primary\" @click=\"goBind\">绑定</a-button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </template> -->\r\n  </div>\r\n  \r\n</template>\r\n\r\n<script setup>\r\n// import { ref, onMounted } from 'vue'\r\n// import { useRoute, useRouter } from 'vue-router'\r\n// import { getWechatAppList } from '@/api/robot'\r\nimport SmartMenu from './smart-menu.vue'\r\n// import ListEmpty from '@/views/robot/robot-config/function-center/components/list-empty.vue'\r\n\r\n// const route = useRoute()\r\n// const router = useRouter()\r\n// const hasApps = ref(true)\r\n\r\n// const fetchApps = async () => {\r\n//   try {\r\n//     const { id } = route.query\r\n//     const res = await getWechatAppList({ robot_id: id, app_type: 'official_account', app_name: '' })\r\n//     const list = Array.isArray(res?.data) ? res.data : []\r\n//     hasApps.value = list.length > 0\r\n//   } catch (_e) {\r\n//     hasApps.value = false\r\n//   }\r\n// }\r\n\r\n// const goBind = () => {\r\n//   localStorage.setItem('/robot/config/external-services/activeKey', 'WeChatOfficialAccount')\r\n//   const url = router.resolve({ path: '/robot/config/external-services', query: { id: route.query.id, robot_key: route.query.robot_key } })\r\n//   window.open(url.href, '_blank')\r\n// }\r\n\r\n// onMounted(fetchApps)\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.auto-reply-home {\r\n  height: 100%;\r\n  width: 100%;\r\n  padding: 16px;\r\n  overflow-y: auto;\r\n}\r\n.empty-wrap {\r\n  margin-top: 100px;\r\n  height: calc(100% - 32px);\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 12px;\r\n  .empty-default {\r\n    font-size: 16px;\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    line-height: 24px;\r\n  }\r\n  .empty-sub {\r\n    font-size: 14px;\r\n    font-style: normal;\r\n    font-weight: 400;\r\n    line-height: 22px;\r\n  }\r\n}\r\n.empty-actions {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n.page-title {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 24px;\r\n  padding-bottom: 16px;\r\n  background-color: #fff;\r\n  color: #000000;\r\n  font-size: 16px;\r\n  font-style: normal;\r\n  font-weight: 600;\r\n  line-height: 24px;\r\n}\r\n</style>"],"names":["t","useI18n","robotStore","useRobotStore","smartMenuStatus","computed","query","useRoute","router","useRouter","loading","ref","smartList","defaultAvatar","DEFAULT_ROBOT_AVATAR","getTableData","parmas","getSmartMenuList","res","data","item","buildPreviewLines","list","lines","rc","txt","buildMenuLines","menu_content","out","mc","sanitized","getDisplayLines","onReplyLineClick","e","a","_b","_a","href","handleAddReply","handleEdit","record","handleDelete","Modal","deleteSmartMenu","message","smartMenuSwitchChange","checked","switch_status","saveRobotAbilitySwitchStatus","formatDateFn","date","format","dayjs","onMounted","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_toDisplayString","_unref","_createVNode","_component_a_switch","_hoisted_4","_component_a_alert","_hoisted_5","_hoisted_6","_component_a_button","PlusOutlined","_createTextVNode","_hoisted_7","_hoisted_8","ListEmpty","_hoisted_9","_Fragment","_renderList","it","_hoisted_10","_component_a_avatar","_hoisted_11","_hoisted_12","_hoisted_13","line","li","_cache","$event","_hoisted_14","_hoisted_15","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_component_a_dropdown","_component_a_menu","_component_a_menu_item","EllipsisOutlined","SmartMenu"],"mappings":"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"}