import{_ as S}from"./date-B2LoZmjI.js";import{g as z}from"./index-z8pRRkmq.js";import{a3 as F,d as $,z as E,N as a,X as u,j as n,U as g,O as s,a6 as p,F as h,Z as _,u as l,S as I,_ as N}from"./vue-chunks-BRsu9_To.js";import{b as T,h as B,W as O,a2 as V,bs as Y,n as q}from"../../index-Bo1NSLpy.js";import{C as Q}from"./ClockCircleFilled-CqIMCeuB.js";import{Q as U}from"./QuestionCircleOutlined-VG1FNUnl.js";import{_ as j}from"./index-Dc6vrBX7.js";import{a as H}from"./index-Ct9MFKxB.js";import{_ as L}from"./index-B4MPC5xv.js";import"./RadioButton-CWIeNl_M.js";import"./FormItemContext-Cv3f2sEj.js";import"./Checkbox-B_uQPvVs.js";import"./dayjs-CU3n21qy.js";import"./index-6kOkS7uh.js";import"./index-D-M8_C_F.js";import"./colors-4myZb9T8.js";import"./ClockCircleOutlined-mLHYPvMf.js";import"./useMergedState-C0iIHNGF.js";import"./Trigger-DtRTHvld.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./index-Bs02Ec-o.js";import"./index-CuPJUS8f.js";import"./slide-CVAZ5BEM.js";import"./index-BwedndIp.js";import"./List-qVz67bUg.js";import"./DownOutlined-CrhRpWT5.js";import"./CheckOutlined-C6m5maw6.js";import"./SearchOutlined-CFTHZIcT.js";import"./move-DztQgbGg.js";import"./shallowequal-C0xnIuy8.js";import"./axios-Dq7h7Pqt.js";import"./qs-BrxkIg-9.js";import"./crypto-js-ClNpte_9.js";import"./dayjs-B6IotFah.js";import"./index-C_M0mW4F.js";import"./collapseMotion-Brd6xpAT.js";import"./CaretDownFilled-DQ5FyPd3.js";import"./index-BeCYXilq.js";import"./responsiveObserve-D3ho5cFZ.js";import"./index-eahgXICC.js";import"./LeftOutlined-6ERu0fUO.js";import"./RightOutlined-zEOifMPB.js";import"./index-kP7DVVOS.js";import"./index-BZOjzqJ2.js";import"./dropdown-DAy60lp8.js";import"./Dropdown-hEIgqeS3.js";import"./index-Dxy-C30T.js";import"./index-Bb6fuwF7.js";import"./CaretDownOutlined-C8EH_hS-.js";import"./index-Caod9rOO.js";import"./Input-CCKFAS4o.js";import"./inputProps--_pnbyjO.js";import"./Search-BF8URtRh.js";import"./isPlainObject-CHj0iPA3.js";import"./TextArea--DLJ7VtX.js";import"./Password-CJww1n-s.js";const M={class:"user-model-page"},J={class:"list-wrapper"},P={class:"content-wrapper"},R={class:"search-block"},W={key:0,class:"status-item status-0"},X={key:1,class:"status-item status-1"},Z={key:2,class:"status-item status-2"},A={key:3,class:"status-item status-3"},G=["onClick"],K={key:1},tt={__name:"index",setup(et){const C=B(),k=F().query,y=$([]),o=E({robot_id:k.id,page:1,size:10,total:0,start_time:"",end_time:""}),v=e=>{o.page=e.current,o.size=e.pageSize,f()},b=()=>{o.page=1,f()},x=e=>{o.start_time=e.start_time,o.end_time=e.end_time,b()},f=()=>{z({...o}).then(e=>{let t=e.data.list,m=e.data.map;t.forEach(i=>{var c;i.create_time_desc=q(i.create_time*1e3).format("YYYY/MM/DD HH:mm"),i.source_desc=(c=m.filter(d=>d.source==i.source)[0])==null?void 0:c.source_name,i.is_over_7_days=i.create_time<Date.now()/1e3-7*24*60*60}),y.value=t,o.total=+e.data.total})},w=e=>{let t=`/manage/downloadExportFile?id=${e.id}&robot_id=${k.id}&token=${C.getToken}`;var m=document.createElement("a");m.href=t,m.style.display="none",m.click()},D=[{title:"导出时间",dataIndex:"create_time_desc",key:"create_time_desc"},{title:"导出文件名称",dataIndex:"file_name",key:"file_name"},{title:"来源",key:"source_desc",dataIndex:"source_desc"},{title:"状态",key:"status",dataIndex:"status"},{title:"操作",key:"action"}];return(e,t)=>{const m=j,i=L,c=H;return s(),a("div",M,[t[4]||(t[4]=u("div",{class:"page-title"},"导出记录",-1)),u("div",J,[u("div",P,[n(m,{"show-icon":"",message:"导出文件仅保留7天，7天后自动删除，请及时下载到本地"}),u("div",R,[n(S,{datekey:"2",onDateChange:x})]),n(c,{class:"table-list",columns:D,"data-source":y.value,pagination:{current:o.page,total:o.total,pageSize:o.size,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"]},onChange:v},{bodyCell:g(({column:d,record:r})=>[d.key==="status"?(s(),a(h,{key:0},[r.status==0?(s(),a("div",W,[n(l(Q)),t[0]||(t[0]=_("等待导出 "))])):p("",!0),r.status==1?(s(),a("div",X,[n(l(O)),t[1]||(t[1]=_("导出中 "))])):p("",!0),r.status==2?(s(),a("div",Z,[n(l(V)),t[2]||(t[2]=_("导出成功 "))])):p("",!0),r.status==3?(s(),a("div",A,[n(l(Y)),t[3]||(t[3]=_("导出失败 ")),r.err_msg?(s(),I(i,{key:0},{title:g(()=>[_(N(r.err_msg),1)]),default:g(()=>[n(l(U))]),_:2},1024)):p("",!0)])):p("",!0)],64)):p("",!0),d.key==="action"?(s(),a(h,{key:1},[r.is_over_7_days?(s(),a("span",K,"--")):(s(),a("a",{key:0,onClick:ot=>w(r)},"下载",8,G))],64)):p("",!0)]),_:1},8,["data-source","pagination"])])])])}}},ie=T(tt,[["__scopeId","data-v-bb16126b"]]);export{ie as default};
