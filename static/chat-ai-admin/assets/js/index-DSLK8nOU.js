import{a8 as R,d as x,N as m,X as o,j as n,U as a,F as S,a1 as $,O as y,u as E,Z as _,_ as F,k}from"./vue-chunks-BRsu9_To.js";import{u as O}from"./robot-ppsw7ttj.js";import{H as N,I as M,J as V,K as j}from"./index-L62dqcZj.js";import{u as D}from"./index-C0kilmAu.js";import{b as L,B as U,$ as q,k as r,M as h,E as z}from"../../index-Bo1NSLpy.js";import"./index-Caod9rOO.js";import{I as G}from"./Input-CCKFAS4o.js";import{_ as H}from"./index-Dc6vrBX7.js";import{_ as J}from"./index-Dlji98bI.js";import{_ as X}from"./index-Bbrx8UDU.js";import"./axios-Dq7h7Pqt.js";import"./qs-BrxkIg-9.js";import"./crypto-js-ClNpte_9.js";import"./dayjs-B6IotFah.js";import"./FormItemContext-Cv3f2sEj.js";import"./index-CuPJUS8f.js";import"./Search-BF8URtRh.js";import"./SearchOutlined-CFTHZIcT.js";import"./isPlainObject-CHj0iPA3.js";import"./inputProps--_pnbyjO.js";import"./TextArea--DLJ7VtX.js";import"./index-BwedndIp.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./Password-CJww1n-s.js";const Z={class:"page-container"},Q={class:"opration-box"},W={style:{"margin-left":"auto"},href:"https://www.yuque.com/zhimaxiaoshiwangluo/pggco1/bg1ol40fo68pgdae",target:"_blank"},Y={class:"list-box"},ee={class:"key-content"},te={class:"right-box"},oe={__name:"index",setup(ne){const{toClipboard:A}=D(),I=O(),{robotInfo:d}=R(I),p=x(""),f=x([]),c=()=>{N({robot_key:d.value.robot_key}).then(t=>{p.value=t.data.end_point,f.value=t.data.list})};c();const C=t=>{M({robot_key:d.value.robot_key,id:t.id}).then(e=>{r.success("更新成功"),c()})},K=()=>{h.confirm({title:k("div",{style:"color:#262626; font-weight: 600;"},"新增API Key"),icon:null,content:k("div",{style:" color: #f10; line-height: 22px;"},"请妥善保管您的API Key,注意不要外泄。API Key外泄可能导致其他人使用此Key访问您的机器人，消耗您模型资源。"),bodyStyle:{padding:"12px 8px 4px 12px"},okText:"创建",width:480,onOk:()=>{P()},onCancel:()=>{}})},P=()=>{j({robot_key:d.value.robot_key}).then(t=>{r.success("创建成功"),c()})},w=t=>{let e=5,i=B(t.key),l=h.confirm({title:`确定删除API Key：${i}`,icon:n(z),content:k("div",{style:{color:"#FB363F"}},"删除后，将无法使用该Key调用接口"),okText:e+" 确 定",okType:"danger",cancelText:"取 消",okButtonProps:{disabled:!0},onOk(){V({robot_key:d.value.robot_key,id:t.id}).then(b=>{r.success("删除成功"),c()})},onCancel(){}}),u=setInterval(()=>{e==1?(l.update({okText:"确 定",okButtonProps:{disabled:!1}}),clearInterval(u),u=void 0):(e-=1,l.update({okText:e+" 确 定",okButtonProps:{disabled:!0}}))},1e3)};function B(t){let e=t.slice(0,4),i=t.slice(-4);return t.length<=4?t:t.length<=8?e+"...":e+"..."+i}const v=async t=>{try{await A(t),r.success("复制成功")}catch{r.error("复制失败")}};return(t,e)=>{const i=H,l=U,u=G,b=J,T=X;return y(),m("div",Z,[e[8]||(e[8]=o("div",{class:"page-title"},"API Key管理",-1)),n(i,{class:"mt8",type:"info","show-icon":""},{icon:a(()=>[o("div",null,[n(E(q))])]),message:a(()=>e[2]||(e[2]=[o("div",{class:"alert-content"},[o("div",null," 请妥善保管您的API Key,注意不要外泄。API Key外泄可能导致其他人使用此Key访问您的机器人，消耗您模型资源。 ")],-1)])),_:1}),o("div",Q,[n(l,{type:"primary",onClick:K},{default:a(()=>e[3]||(e[3]=[_("新增API Key")])),_:1,__:[3]}),n(u,{value:p.value,"onUpdate:value":e[1]||(e[1]=s=>p.value=s),style:{width:"500px"},readonly:""},{addonBefore:a(()=>[o("span",{onClick:e[0]||(e[0]=s=>v(p.value)),style:{cursor:"pointer"}},"复制API Endpoint")]),_:1},8,["value"]),o("a",W,[n(l,null,{default:a(()=>e[4]||(e[4]=[_("API 文档")])),_:1,__:[4]})])]),o("div",Y,[(y(!0),m(S,null,$(f.value,s=>(y(),m("div",{class:"list-item",key:s.id},[n(T,{justify:"space-between",align:"center"},{default:a(()=>[o("div",ee,[e[5]||(e[5]=o("span",null,"API Key：",-1)),o("span",null,F(s.key),1)]),o("div",te,[n(b,{onChange:g=>C(s),checked:s.status==1,"checked-children":"开","un-checked-children":"关"},null,8,["onChange","checked"]),n(l,{onClick:g=>v(s.key)},{default:a(()=>e[6]||(e[6]=[_("复制")])),_:2,__:[6]},1032,["onClick"]),n(l,{danger:"",onClick:g=>w(s)},{default:a(()=>e[7]||(e[7]=[_("删除")])),_:2,__:[7]},1032,["onClick"])])]),_:2},1024)]))),128))])])}}},we=L(oe,[["__scopeId","data-v-30f1efb6"]]);export{we as default};
