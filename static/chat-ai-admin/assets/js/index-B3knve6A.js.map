{"version":3,"file":"index-B3knve6A.js","sources":["../../../../front-end/chat-ai-admin-vue/src/views/public-library/web-statistics/index.vue"],"sourcesContent":["<template>\r\n  <div class=\"ai-config-page\">\r\n    <ConfigPageMenu />\r\n    <div class=\"page-container\">\r\n      <a-alert\r\n        class=\"statistics-alert\"\r\n        :message=\"t('statistics_alert_message')\"\r\n        type=\"info\"\r\n        show-icon\r\n      />\r\n      <div class=\"code-form-box\">\r\n        <a-textarea v-model:value=\"formState.statistics_set\" :rows=\"16\" />\r\n        <div class=\"btn-box\">\r\n          <a-button type=\"primary\" @click=\"handleSubmit\">{{ t('save_btn') }}</a-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { getLibraryInfo, editLibrary } from '@/api/library/index'\r\nimport { useRoute } from 'vue-router'\r\nimport { reactive, computed, onMounted, toRaw } from 'vue'\r\nimport { message } from 'ant-design-vue'\r\nimport ConfigPageMenu from '../components/config-page-menu.vue'\r\nimport { usePublicLibraryStore } from '@/stores/modules/public-library'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.public-library.web-statistics.index')\r\n\r\nconst libraryStore = usePublicLibraryStore()\r\n\r\nconst route = useRoute()\r\nconst library_id = computed(() => route.query.library_id)\r\nconst formState = reactive({\r\n  statistics_set: ''\r\n})\r\n\r\nconst handleSubmit = async () => {\r\n  try {\r\n    const res = await editLibrary({\r\n      ...toRaw(formState)\r\n    })\r\n\r\n    if (res.code === 0) {\r\n      libraryStore.getLibraryInfo()\r\n      message.success(t('save_success'))\r\n    }\r\n  } catch (error) {\r\n    console.error(t('save_failed'), error)\r\n  }\r\n}\r\n\r\nconst getData = () => {\r\n  getLibraryInfo({ id: library_id.value }).then((res) => {\r\n    let data = res.data || {}\r\n\r\n    Object.assign(formState, data)\r\n  })\r\n}\r\n\r\nonMounted(() => {\r\n  getData()\r\n})\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.page-container {\r\n  padding: 8px 24px 24px;\r\n  .code-form-box {\r\n    margin-top: 8px;\r\n  }\r\n  .btn-box {\r\n    margin-top: 8px;\r\n  }\r\n}\r\n</style>\r\n"],"names":["t","useI18n","libraryStore","usePublicLibraryStore","route","useRoute","library_id","computed","formState","reactive","handleSubmit","editLibrary","toRaw","message","error","getData","getLibraryInfo","res","data","onMounted","_openBlock","_createElementBlock","_hoisted_1","_createVNode","ConfigPageMenu","_createElementVNode","_hoisted_2","_component_a_alert","_unref","_hoisted_3","_component_a_textarea","_cache","$event","_hoisted_4","_component_a_button"],"mappings":"4pBA6BA,KAAM,CAAE,EAAAA,CAAC,EAAKC,EAAQ,2CAA2C,EAE3DC,EAAeC,EAAqB,EAEpCC,EAAQC,EAAQ,EAChBC,EAAaC,EAAS,IAAMH,EAAM,MAAM,UAAU,EAClDI,EAAYC,EAAS,CACzB,eAAgB,EAClB,CAAC,EAEKC,EAAe,SAAY,CAC/B,GAAI,EACU,MAAMC,EAAY,CAC5B,GAAGC,EAAMJ,CAAS,CACxB,CAAK,GAEO,OAAS,IACfN,EAAa,eAAc,EAC3BW,EAAQ,QAAQb,EAAE,cAAc,CAAC,EAErC,OAASc,EAAO,CACd,QAAQ,MAAMd,EAAE,aAAa,EAAGc,CAAK,CACvC,CACF,EAEMC,EAAU,IAAM,CACpBC,EAAe,CAAE,GAAIV,EAAW,KAAK,CAAE,EAAE,KAAMW,GAAQ,CACrD,IAAIC,EAAOD,EAAI,MAAQ,CAAA,EAEvB,OAAO,OAAOT,EAAWU,CAAI,CAC/B,CAAC,CACH,EAEA,OAAAC,EAAU,IAAM,CACdJ,EAAO,CACT,CAAC,4BA/DC,OAAAK,EAAA,EAAAC,EAgBM,MAhBNC,EAgBM,CAfJC,EAAkBC,CAAA,EAClBC,EAaM,MAbNC,EAaM,CAZJH,EAKEI,EAAA,CAJA,MAAM,mBACL,QAASC,EAAA5B,CAAA,EAAC,0BAAA,EACX,KAAK,OACL,YAAA,wBAEFyB,EAKM,MALNI,EAKM,CAJJN,EAAkEO,EAAA,CAA9C,MAAOtB,EAAU,eAAV,iBAAAuB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAxB,EAAU,eAAcwB,GAAG,KAAM,sBAC5DP,EAEM,MAFNQ,EAEM,CADJV,EAA6EW,EAAA,CAAnE,KAAK,UAAW,QAAOxB,cAAc,IAAmB,KAAhBkB,EAAA5B,CAAA,EAAC,UAAA,CAAA,EAAA,CAAA"}