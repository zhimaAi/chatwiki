import{u as le,_ as _e}from"../../index-DSFcP5NQ.js";import{r as _,w as re,j as de,ah as pe,ag as ue,J as me,i as ve,a as u,q as U,p as o,y as r,v as c,u as s,F as x,t as d,h as V,e as W,l as fe,x as he,b as p,_ as v,f as be}from"./vue-chunks-BdaA73Wf.js";import{a as F,x as G}from"./index-C67uUbSa.js";import{e as ge}from"./index-Cg7-0swo.js";import{L as ye}from"./list-empty-BC6w9WU7.js";import{_ as ke}from"./emoji-mart-BBMRoEa3.js";import{H as xe,ag as we,B as Ce,y as Ae,m as Se,M as H,N as Be,a4 as De,b as K}from"./ui-antd-Dl1wwwCD.js";import"./neo4j-MWxXN7EM.js";import"./editor-cherry-CFIsbKoN.js";import"./lodash-Bm5sK6rN.js";import"./elkjs-BN8GIjVH.js";import"./utils-CvB22N-W.js";import"./other-LrIFyvU9.js";const Te={key:0,class:"ability-banner"},Ee={class:"user-model-page"},Me={class:"breadcrumb-wrap"},Re={class:"switch-tip"},Ie={key:0,class:"loading-box"},Le={key:0,class:"empty-wrap"},Ne={class:"empty-default"},ze={class:"empty-sub"},Oe={class:"empty-actions"},Ue={class:"mp-list-block"},Ve=["onClick"],We=["src"],Fe={class:"mp-name"},Ge={class:"tabs-box"},He={class:"list-wrapper"},Ke={class:"content-wrapper"},$e={style:{color:"red"}},je={class:"enable-tip-footer"},qe={class:"footer-actions"},Je=160,Pe=8,Ye=96,$="article_group_send_ai_comment_tip_until",Qe={__name:"index",setup(Xe){const w=pe(),m=ue(),{t:n}=le("views.explore.article-group-send.index"),j=[{label:n("segmented_group_send"),value:"group-send"},{label:n("segmented_draft_box"),value:"draft-box"}],R=()=>w.name==="exploreArticleGroupSendDraftBox"?"draft-box":"group-send",I=()=>{m.options.history.state.back?m.back():m.push({path:"/explore/index"})},C=_(R()),g=_(!1),q=()=>{F({ability_type:"official_account_batch_send"}).then(e=>{var i;const t=e.data,a=(i=t==null?void 0:t.user_config)==null?void 0:i.switch_status;g.value=String(a||"0")==="1"})},A=_(!0),J=()=>{F({ability_type:"official_account_ai_comment"}).then(e=>{var a,i;const t=(i=(a=e==null?void 0:e.data)==null?void 0:a.user_config)==null?void 0:i.switch_status;A.value=String(t||"0")==="1",ee()})},L=()=>{O();const e=m.resolve({path:"/explore/index"});window.open(e.href,"_blank")},P=e=>{const t=e?"1":"0";if(t==="0"){H.confirm({title:n("modal_confirm_title"),content:n("modal_confirm_disable_content"),onOk:()=>{G({ability_type:"official_account_batch_send",switch_status:t}).then(a=>{a&&a.res==0&&(g.value=!1,K.success(n("message_operation_success")))})}});return}G({ability_type:"official_account_batch_send",switch_status:t}).then(a=>{a&&a.res==0&&(g.value=!0,K.success(n("message_operation_success")))})};re(()=>w.name,()=>{C.value=R()});const Y=e=>{const t={"group-send":"/explore/index/article-group-send/group-send","draft-box":"/explore/index/article-group-send/draft-box"};m.replace(t[e])};de(()=>{w.name==="exploreArticleGroupSend"&&m.replace("/explore/index/article-group-send/group-send"),Q(),q(),J()}),me(()=>{window.removeEventListener("resize",E)});const S=_(!0),N=_([]),B=_(""),D=_(""),f=_([]),T=_(""),h=_(!1),z=_(null),b=_(0);function E(){const e=z.value;if(!e){b.value=0;return}const t=e.clientWidth||0,a=Je+Pe,i=Math.floor((t-Ye)/a);b.value=Math.max(i,0)}const Q=()=>{S.value=!0,ge({app_type:"official_account"}).then(e=>{const t=e.data||[];N.value=t,f.value=t.map(i=>({id:i.id,appid:i.app_id,name:i.app_name,logo:i.app_avatar,access_key:i.access_key}));const a=f.value[0];a&&(T.value=a.appid,B.value=a.appid,D.value=a.access_key)}).finally(()=>{S.value=!1,ve(E),window.addEventListener("resize",E)})};function X(e){T.value=e.appid,h.value=!0,B.value=e.appid,D.value=e.access_key}const Z=()=>{const e=m.resolve({path:"/user/official-account"});window.open(e.href,"_blank")},y=_(!1),M=_(!1),ee=()=>{const e=Number(localStorage.getItem($)||0),t=Date.now();!A.value&&e<=t&&(y.value=!0)},O=()=>{if(M.value){const e=Date.now()+2592e5;localStorage.setItem($,String(e))}},te=()=>{O(),y.value=!1};return(e,t)=>{const a=_e,i=xe,ne=we,k=Ce,oe=Ae,ae=Se,se=he("router-view"),ce=Be,ie=H;return p(),u(x,null,[A.value?U("",!0):(p(),u("div",Te,[r(a,{name:"tip-icon",style:{"font-size":"16px",color:"white"}}),o("span",null,c(s(n)("banner_ai_comment_not_enabled")),1),o("a",{class:"go-enable",href:"javascript:void(0);",onClick:L},c(s(n)("common_go_enable")),1)])),o("div",Ee,[o("div",Me,[r(a,{onClick:I,name:"back",style:{"font-size":"20px"}}),o("span",{onClick:I,class:"breadcrumb-title"},c(s(n)("breadcrumb_article_group_send")),1),r(i,{checked:g.value,"checked-children":s(n)("switch_on"),"un-checked-children":s(n)("switch_off"),onChange:P},null,8,["checked","checked-children","un-checked-children"]),o("span",Re,c(s(n)("switch_tip")),1)]),S.value?(p(),u("div",Ie,[r(ne)])):(p(),u(x,{key:1},[N.value.length===0?(p(),u("div",Le,[r(ye,{size:"180"},{default:d(()=>[o("div",Ne,c(s(n)("empty_no_mp_bound")),1),o("div",ze,c(s(n)("empty_bind_mp_tip")),1)]),_:1}),o("div",Oe,[r(k,{type:"primary",onClick:Z},{default:d(()=>[v(c(s(n)("btn_bind_mp")),1)]),_:1})])])):(p(),u(x,{key:1},[o("div",Ue,[o("div",{class:V(["mp-list",{expanded:h.value}]),ref_key:"mpListRef",ref:z},[(p(!0),u(x,null,fe(h.value?f.value:f.value.slice(0,b.value),l=>(p(),u("div",{class:V(["mp-card",{selected:l.appid===T.value}]),key:l.id,onClick:Ze=>X(l)},[o("img",{src:l.logo,class:"mp-logo"},null,8,We),o("span",Fe,c(l.name),1)],10,Ve))),128)),!h.value&&f.value.length>b.value?(p(),W(k,{key:0,type:"dashed",class:"more-btn",onClick:t[0]||(t[0]=l=>h.value=!0)},{default:d(()=>[v(c(s(n)("more_show"))+" +"+c(f.value.length-b.value),1)]),_:1})):U("",!0)],2)]),o("div",Ge,[r(oe,{value:C.value,"onUpdate:value":t[1]||(t[1]=l=>C.value=l),options:j,onChange:Y},null,8,["value"])]),r(ae,{class:"alert-box",style:{margin:"16px 48px 0"}},{message:d(()=>[o("div",null,c(s(n)("alert_line_1")),1),o("div",null,c(s(n)("alert_line_2")),1)]),_:1}),o("div",He,[o("div",Ke,[r(se,null,{default:d(({Component:l})=>[(p(),W(be(l),{"app-id":B.value,"access-key":D.value},null,8,["app-id","access-key"]))]),_:1})])])],64))],64))]),r(ie,{open:y.value,"onUpdate:open":t[3]||(t[3]=l=>y.value=l),footer:null},{title:d(()=>[o("span",null,[r(s(De),{style:{color:"#faad14","margin-right":"8px"}}),v(c(s(n)("modal_ai_comment_not_enabled_title")),1)])]),default:d(()=>[o("div",null,[o("span",$e,c(s(n)("modal_ai_comment_not_enabled")),1),v(c(s(n)("modal_ai_comment_not_enabled_tip")),1)]),o("div",je,[r(ce,{checked:M.value,"onUpdate:checked":t[2]||(t[2]=l=>M.value=l)},{default:d(()=>[v(c(s(n)("checkbox_dont_remind_three_days")),1)]),_:1},8,["checked"]),o("div",qe,[r(k,{onClick:te},{default:d(()=>[v(c(s(n)("btn_cancel")),1)]),_:1}),r(k,{type:"primary",onClick:L},{default:d(()=>[v(c(s(n)("common_go_enable")),1)]),_:1})])])]),_:1},8,["open"])],64)}}},ut=ke(Qe,[["__scopeId","data-v-7fa7d2c1"]]);export{ut as default};
//# sourceMappingURL=index-B8grpBEd.js.map
