import{_ as Q,d as W}from"../../index-C5-B0r5-.js";import{g as Z}from"./index-AgSL8KLK.js";import{u as H,r as X}from"./guide-JRB57zT0.js";import{bu as Y,ai as M,R as O,B as ee,bv as te,bn as se,e as oe,y as ae,z as ne,I as le,F as ie,aR as re}from"./ui-antd-B11sc9DP.js";import{f as y,e as P,r as _e,o as ce,b as ue,ac as a,ad as t,as as n,k as i,F as C,ax as B,ai as de,ae as f,u as k,G as _,at as p,az as c,ar as u}from"./vue-chunks-CGLjTDrY.js";const pe="/assets/img/create_library_1-D9MfBy0x.png",ge="/assets/img/create_library_2-BZmWeNcM.png",ve="/assets/img/create_robot_1-BO43gRxb.png",me="/assets/img/create_robot_2-CpxcNmB7.png",be="/assets/img/create_robot_3-D2a2ho90.png",ye="/assets/img/header-D6KiFFRP.png",fe="/assets/img/set_model_1-BUKcrQt5.png",ke="/assets/img/header-D6KiFFRP.png",he={class:"guide-wrapper"},xe={class:"guide-content"},we={class:"guide-body"},Ce={class:"guide-left"},Be={class:"process-box"},Re={class:"menu-list-box"},Fe=["onClick"],Ne={class:"icon-box"},Ie={class:"desc-box"},Se={class:"title-text"},Ue={class:"desc-text"},Te={class:"guide-right"},qe={key:0,class:"step-list"},Pe={class:"step-icon"},ze={key:1,class:"num-text"},De={class:"step-text"},Ge={key:0,class:"right-icon"},Me={key:1,class:"to-config-btn"},Oe={key:2,class:"tag-list"},Le={class:"tag-text-box"},Ve={key:0,class:"right-icon"},Ke={key:3,class:"tag-desc-box"},$e={key:4,class:"btn-block-wrapper",style:{"margin-top":"32px"}},Ae={key:5,class:"btn-block-wrapper"},Ee={key:6,class:"guide-preview-box"},je={key:7,class:"chat-test-box"},Je={key:0,class:"test-result"},Qe={class:"test-result-title"},We={key:0,class:"result-tag success"},Ze={key:1,class:"result-tag error"},He={class:"result-content"},Xe={__name:"index",setup(Ye){const R=H(),h=y([]),L=P(()=>+R.total_process),v=y("set_model"),b={set_model:{desc:"配置基础大模型",tags:["设置","模型管理","可添加模型","添加指定类型模型","完成设置"],step_desc:"配置好的大模型可在机器人/知识库中引用",show_config_btn:!0,preview_imgs:["set_model_1"].map(s=>q(s)),config_url:"/#/user/model?activeTab=0"},create_library:{desc:"创建知识库并导入知识",tags:["知识库模块","新增知识库","上传指定类型文档","完成设置"],step_desc:"配置好的知识库可在机器人中引用",show_config_btn:!0,preview_imgs:["create_library_1","create_library_2"].map(s=>q(s)),config_url:"/#/library/list"},create_robot:{desc:"创建AI机器人并关联知识库",tags:["机器人模块","新增机器人","关联知识库文档","根据业务编辑关键词","完成设置"],step_desc:"设置好的机器人即可测试发布",show_config_btn:!0,preview_imgs:["create_robot_1","create_robot_2","create_robot_3"].map(s=>q(s)),config_url:"/#/robot/list"},test_robot:{desc:"测试机器人并分享给用户使用"}},F=P(()=>{let s=R.process_list||[];return s.forEach((e,m)=>{var x,g,S,U,T,w;e.desc=(x=b[e.type])==null?void 0:x.desc,e.tags=(g=b[e.type])==null?void 0:g.tags,e.step_desc=(S=b[e.type])==null?void 0:S.step_desc,e.show_config_btn=(U=b[e.type])==null?void 0:U.show_config_btn,e.preview_imgs=(T=b[e.type])==null?void 0:T.preview_imgs,e.config_url=(w=b[e.type])==null?void 0:w.config_url,e.index=m}),s}),l=P(()=>F.value.find(s=>s.type==v.value)||{}),V=s=>{v.value=s.type},K=()=>{window.open(l.value.config_url)},z=()=>{let s=l.value.index;v.value=F.value[s-1].type},$=()=>{let s=l.value.index;v.value=F.value[s+1].type},r=_e({robot_key:void 0,openid:"1",question:"你好",form_ids:"",dialogue_id:0,global:""}),N=y(""),D=y(!1),G=y(),A=()=>{G.value.validate().then(()=>{let s={...r},e=h.value.find(m=>m.robot_key==r.robot_key).id;s.global=JSON.stringify({robot_key:r.robot_key,id:e}),X(s).then(m=>{N.value=m.data.content}).catch(()=>{N.value=""}).finally(()=>{D.value=!0,R.getUseGuideProcess()})})},E=()=>{Z().then(s=>{h.value=(s.data||[]).filter(e=>e.application_type==0),!r.robot_key&&h.value.length&&(r.robot_key=h.value[0].robot_key)})};function q(s){return new URL(Object.assign({"../../assets/img/guide/create_library_1.png":pe,"../../assets/img/guide/create_library_2.png":ge,"../../assets/img/guide/create_robot_1.png":ve,"../../assets/img/guide/create_robot_2.png":me,"../../assets/img/guide/create_robot_3.png":be,"../../assets/img/guide/header.png":ye,"../../assets/img/guide/set_model_1.png":fe})[`../../assets/img/guide/${s}.png`],import.meta.url).href}const I=y(null);return ce(()=>{E(),I.value=setInterval(()=>{R.getUseGuideProcess()},5e3)}),ue(()=>{I.value&&(clearInterval(I.value),I.value=null)}),(s,e)=>{const m=Y,x=W,g=ee,S=se,U=ne,T=ae,w=oe,j=le,J=ie;return t(),a("div",he,[n("div",xe,[e[12]||(e[12]=n("div",{class:"guide-header"},[n("img",{src:ke,alt:""})],-1)),n("div",we,[n("div",Ce,[n("div",Be,[i(m,{percent:L.value},null,8,["percent"])]),n("div",Re,[(t(!0),a(C,null,B(F.value,(o,d)=>(t(),a("div",{class:de(["menu-item",{active:o.type==v.value}]),onClick:et=>V(o),key:o.type},[n("div",Ne,[o.is_finish==1?(t(),f(k(M),{key:0,style:{color:"#21a665","font-size":"26px"}})):(t(),f(x,{key:1,name:o.type,style:{"font-size":"40px"}},null,8,["name"]))]),n("div",Ie,[n("div",Se,[n("span",null,"0"+p(d+1),1),_(p(o.name),1)]),n("div",Ue,p(o.desc),1)])],10,Fe))),128))])]),n("div",Te,[l.value.steps?(t(),a("div",qe,[(t(!0),a(C,null,B(l.value.steps,(o,d)=>(t(),a("div",{class:"step-item",key:o.type},[n("div",Pe,[o.is_finish==1?(t(),f(x,{key:0,style:{color:"#2475fc"},name:"steps-success-icon"})):(t(),a("span",ze,p(d+1),1))]),n("div",De,p(o.name),1),d!=l.value.steps.length-1?(t(),a("div",Ge,[i(k(O))])):c("",!0)]))),128))])):c("",!0),l.value.show_config_btn?(t(),a("div",Me,[i(g,{onClick:e[0]||(e[0]=o=>K()),type:"primary",ghost:""},{default:u(()=>[...e[3]||(e[3]=[_("立即前往配置",-1)])]),_:1})])):c("",!0),l.value.tags?(t(),a("div",Oe,[(t(!0),a(C,null,B(l.value.tags,(o,d)=>(t(),a("div",{class:"tag-item",key:d},[n("div",Le,p(o),1),d!=l.value.tags.length-1?(t(),a("div",Ve,[i(k(O))])):c("",!0)]))),128))])):c("",!0),l.value.step_desc?(t(),a("div",Ke,p(l.value.step_desc),1)):c("",!0),v.value=="test_robot"?(t(),a("div",$e,[i(g,{onClick:A,type:"primary",style:{"background-color":"#21a665"}},{default:u(()=>[i(k(te)),e[4]||(e[4]=_("开始测试 ",-1))]),_:1}),i(g,{onClick:z},{default:u(()=>[...e[5]||(e[5]=[_("上一步",-1)])]),_:1})])):(t(),a("div",Ae,[l.value.index>0?(t(),f(g,{key:0,onClick:z},{default:u(()=>[...e[6]||(e[6]=[_("上一步",-1)])]),_:1})):c("",!0),i(g,{onClick:$,type:"primary"},{default:u(()=>[...e[7]||(e[7]=[_("下一步",-1)])]),_:1})])),l.value.preview_imgs?(t(),a("div",Ee,[(t(!0),a(C,null,B(l.value.preview_imgs,(o,d)=>(t(),f(S,{width:"100%",index:d,src:o},null,8,["index","src"]))),256)),e[8]||(e[8]=n("div",{class:"img-item"},null,-1))])):c("",!0),v.value=="test_robot"?(t(),a("div",je,[i(J,{model:r,ref_key:"formRef",ref:G,autocomplete:"off",layout:"vertical"},{default:u(()=>[i(w,{label:"机器人",name:"robot_key",rules:[{required:!0,message:"请选择机器人"}]},{default:u(()=>[i(T,{value:r.robot_key,"onUpdate:value":e[1]||(e[1]=o=>r.robot_key=o),placeholder:"请选择机器人",style:{width:"364px"}},{default:u(()=>[(t(!0),a(C,null,B(h.value,o=>(t(),f(U,{value:o.robot_key},{default:u(()=>[_(p(o.robot_name),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"])]),_:1}),i(w,{label:"测试问题",name:"robot_key",rules:[{required:!0,message:"请输入问题"}]},{default:u(()=>[i(j,{style:{width:"364px"},value:r.question,"onUpdate:value":e[2]||(e[2]=o=>r.question=o),placeholder:"请输入问题"},null,8,["value"])]),_:1})]),_:1},8,["model"]),D.value?(t(),a("div",Je,[n("div",Qe,[e[11]||(e[11]=_(" 测试结果 ",-1)),N.value?(t(),a("div",We,[i(k(M)),e[9]||(e[9]=_("通过",-1))])):(t(),a("div",Ze,[i(k(re)),e[10]||(e[10]=_("错误",-1))]))]),n("div",He,p(N.value),1)])):c("",!0)])):c("",!0)])])])])}}},lt=Q(Xe,[["__scopeId","data-v-41a9931e"]]);export{lt as B};
