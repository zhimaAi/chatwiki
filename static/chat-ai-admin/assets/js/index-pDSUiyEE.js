import{_ as F}from"./cu-scroll-BxmqGNDQ.js";import{Y as u,_ as c,F as $,a9 as S,a5 as s,k as h,a7 as M,G as p,ad as N,a1 as g,ae as A,a2 as b,B,f as v,o as R,ab as V,aa as z,l as O}from"./vue-chunks-yZ4gwLzA.js";import{g as U,j as T,s as L}from"./index-DQDi1d6e.js";import{b as q,d as j}from"../../index-CuFGOJXl.js";import{H as D,p as G,N as H,k as W,B as Y,a as E,M as J,O as K}from"./ui-antd-BKjlZQNA.js";import{L as P}from"./list-empty-D8GVZJL4.js";import"./pull-up.esm-DIiTC7VE.js";import"./observe-dom.esm-B25JyVKH.js";import"./utils-smNh_pj2.js";const Q={class:"list-box"},X=["onClick"],Z={class:"explore-info"},tt={class:"explore-info-content"},ot={class:"explore-title"},et={class:"item-body"},st={class:"explore-desc"},nt={class:"support-box"},at={__name:"index",props:{list:{type:Array,default:()=>[]}},emits:["switchChange","fixedMenuChange","clickItem"],setup(I,{emit:x}){const _=x,y=I,f=(l,a)=>_("switchChange",l,a),k=(l,a)=>_("fixedMenuChange",l,a),i=(l,a)=>{try{const r=l==null?void 0:l.target;if(r&&typeof r.closest=="function"&&r.closest(".no-bubble"))return}catch{}_("clickItem",a)};return(l,a)=>{const r=j,m=D,w=G,C=H;return c(),u("div",Q,[(c(!0),u($,null,S(y.list,t=>{var o,n;return c(),u("div",{class:"list-item-wrapper",key:t.id},[s("div",{class:"list-item",onClick:e=>i(e,t)},[s("div",Z,[h(r,{class:"explore-icon",name:t.ability_type,style:{"font-size":"62px",color:"white"}},null,8,["name"]),s("div",tt,[s("div",ot,M(t.explore_name||t.name),1),a[2]||(a[2]=s("div",{class:"explore-type"},"ChatWiki",-1))])]),s("div",et,[s("div",st,M(t.explore_intro||t.introduction),1),s("span",nt,[(c(!0),u($,null,S(t.support_channels_list,e=>(c(),u("span",{key:e,class:"support-item"},[h(r,{name:"support",class:"icon"}),p(" "+M(e),1)]))),128))])]),s("div",{class:N(["item-footer",{"no-footer":t.robot_only_show==1}])},[t.robot_only_show!=1?(c(),g(m,{key:0,checked:((o=t.robot_config)==null?void 0:o.switch_status)=="1","checked-children":"开","un-checked-children":"关",class:"no-bubble",onChange:e=>f(t,e)},null,8,["checked","onChange"])):A("",!0),t.robot_only_show!=1?(c(),g(C,{key:1,class:"fixed-menu-box no-bubble",checked:((n=t.robot_config)==null?void 0:n.fixed_menu)=="1",onClick:a[0]||(a[0]=B(()=>{},["stop"])),onMousedown:a[1]||(a[1]=B(()=>{},["stop"])),onChange:e=>{var d;return k(t,((d=e==null?void 0:e.target)==null?void 0:d.checked)===!0)}},{default:b(()=>[h(w,{title:"勾选后增加机器人—级菜单固定显示"},{default:b(()=>[...a[3]||(a[3]=[p(" 固定菜单 ",-1)])]),_:1})]),_:1},8,["checked","onChange"])):A("",!0)],2)],8,X)])}),128))])}}},it=q(at,[["__scopeId","data-v-0a7586a7"]]),lt={class:"user-model-page"},ct={class:"list-wrapper"},rt={class:"content-wrapper"},_t={"bg-color":"#f5f9ff",class:"explore-page"},dt={class:"explore-page-body"},pt={class:"list-group-box"},ut={class:"empty-content"},bt={__name:"index",setup(I){const x=v([{title:"功能",value:"1"},{title:"插件",value:"2"}]),_=V(),y=z(),f=v([]),k=()=>{x.value=[{title:"功能",value:"1"},{title:"插件",value:"2"}]},i=v("");let l=v([]);const a=()=>{U({robot_id:i.value}).then(t=>{const o=((t==null?void 0:t.data)||[]).map(n=>({...n,explore_name:n.name,explore_intro:n.introduction}));f.value=o,l.value=(t==null?void 0:t.data)||[],k()})},r=(t,o)=>{const n=o?"1":"0";if(n=="0"){let e="关闭后，触发了关键词不会再回复指定内容";t.ability_type=="robot_smart_menu"&&(e="关闭后，其他回复智能菜单的规则触发后都不再回复"),t.ability_type=="robot_auto_reply"&&(e="关闭后，触发了关键词以及收到消息回复都不会再回复指定的内容"),J.confirm({title:"确认关闭吗？",icon:O(K),content:e,onOk:()=>{L({robot_id:i.value,ability_type:t.ability_type,switch_status:n}).then(d=>{d&&d.res==0&&(E.success("操作成功"),t.robot_config&&(t.robot_config.switch_status=n),t.robot_only_show!=1&&window.dispatchEvent(new CustomEvent("robotAbilityUpdated",{detail:{robotId:i.value}})))})}});return}L({robot_id:i.value,ability_type:t.ability_type,switch_status:n}).then(e=>{e&&e.res==0&&(E.success("操作成功"),t.robot_config&&(t.robot_config.switch_status=n),window.dispatchEvent(new CustomEvent("robotAbilityUpdated",{detail:{robotId:i.value}})))})},m=(t,o)=>{const n=o?"1":"0";T({robot_id:i.value,ability_type:t.ability_type,fixed_menu:n}).then(e=>{e&&e.res==0&&(E.success("操作成功"),t.robot_config&&(t.robot_config.fixed_menu=n),window.dispatchEvent(new CustomEvent("robotAbilityUpdated",{detail:{robotId:i.value}})))})},w=t=>{let o;if(t.robot_only_show!=1)o=y.resolve({path:t.menu.path,query:{id:i.value,robot_key:_.query.robot_key}});else{y.push({path:t.menu.path,query:{id:i.value,robot_key:_.query.robot_key}});return}window.open(o.href,"_blank")},C=()=>{const t=y.resolve({path:"/explore/index",query:{tab:"1"}});window.open(t.href,"_blank")};return R(()=>{i.value=_.query.id,a()}),(t,o)=>{const n=W,e=Y,d=F;return c(),u("div",lt,[o[4]||(o[4]=s("div",{class:"page-title"},"功能中心",-1)),s("div",ct,[s("div",rt,[h(n,{"show-icon":"",style:{"align-items":"baseline"}},{message:b(()=>[...o[0]||(o[0]=[s("div",null,[p(" 查询已经启用的功能，可选择在一级菜单中固定，快捷开启和关闭功能 更多功能可到 "),s("a",{href:"#/explore/index",target:"_blank"},"探索>功能中心"),p(" 中添加 ")],-1)])]),_:1}),s("div",_t,[s("div",dt,[s("div",pt,[h(d,{style:{"padding-right":"16px",flex:"1"}},{default:b(()=>[f.value.length==0?(c(),g(P,{key:0,size:"250",class:"empty-box"},{default:b(()=>[s("div",ut,[o[2]||(o[2]=s("p",{class:"empty-title"},"暂未添加功能",-1)),o[3]||(o[3]=s("p",{class:"empty-desc"},[p("更多功能可到 "),s("a",{href:"#/explore/index",target:"_blank"},"探索>功能中心"),p(" 去添加")],-1)),h(e,{type:"primary",onClick:C},{default:b(()=>[...o[1]||(o[1]=[p("去添加",-1)])]),_:1})])]),_:1})):(c(),g(it,{key:1,list:f.value,onSwitchChange:r,onFixedMenuChange:m,onClickItem:w},null,8,["list"]))]),_:1})])])])])])])}}},Ct=q(bt,[["__scopeId","data-v-aabcd00b"]]);export{Ct as default};
