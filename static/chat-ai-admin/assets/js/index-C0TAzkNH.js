import{_ as V}from"./cu-scroll-CpIj948h.js";import{a as m,b as d,F as S,l as A,p as n,y as g,v as a,_ as h,h as z,e as C,q as L,u as c,t as y,Y as B,r as w,j as O,ah as U,ag as j,G as T}from"./vue-chunks-BdaA73Wf.js";import{u as N,_ as D}from"../../index-DSFcP5NQ.js";import{g as G,j as H,s as F}from"./index-C67uUbSa.js";import{_ as R}from"./emoji-mart-BBMRoEa3.js";import{H as W,q as Y,N as J,m as K,B as P,b as $,M as Q,O as X}from"./ui-antd-Dl1wwwCD.js";import{L as Z}from"./list-empty-BC6w9WU7.js";import"./pull-up.esm-DIiTC7VE.js";import"./observe-dom.esm-B25JyVKH.js";import"./editor-cherry-CFIsbKoN.js";import"./neo4j-MWxXN7EM.js";import"./lodash-Bm5sK6rN.js";import"./elkjs-BN8GIjVH.js";import"./utils-CvB22N-W.js";import"./other-LrIFyvU9.js";const tt={class:"list-box"},et=["onClick"],ot={class:"explore-info"},nt={class:"explore-info-content"},st={class:"explore-title"},it={class:"item-body"},at={class:"explore-desc"},ct={class:"support-box"},lt={__name:"index",props:{list:{type:Array,default:()=>[]}},emits:["switchChange","fixedMenuChange","clickItem"],setup(q,{emit:o}){const{t:f}=N("views.robot.robot-config.function-center.components.explore-list.index"),u=o,x=q,v=(r,i)=>u("switchChange",r,i),I=(r,i)=>u("fixedMenuChange",r,i),l=(r,i)=>{try{const p=r==null?void 0:r.target;if(p&&typeof p.closest=="function"&&p.closest(".no-bubble"))return}catch{}u("clickItem",i)};return(r,i)=>{const p=D,k=W,M=Y,E=J;return d(),m("div",tt,[(d(!0),m(S,null,A(x.list,t=>{var _,s;return d(),m("div",{class:"list-item-wrapper",key:t.id},[n("div",{class:"list-item",onClick:e=>l(e,t)},[n("div",ot,[g(p,{class:"explore-icon",name:t.ability_type,style:{"font-size":"62px",color:"white"}},null,8,["name"]),n("div",nt,[n("div",st,a(t.explore_name||t.name),1),i[2]||(i[2]=n("div",{class:"explore-type"},"ChatWiki",-1))])]),n("div",it,[n("div",at,a(t.explore_intro||t.introduction),1),n("span",ct,[(d(!0),m(S,null,A(t.support_channels_list,e=>(d(),m("span",{key:e,class:"support-item"},[g(p,{name:"support",class:"icon"}),h(" "+a(e),1)]))),128))])]),n("div",{class:z(["item-footer",{"no-footer":t.robot_only_show==1}])},[t.robot_only_show!=1?(d(),C(k,{key:0,checked:((_=t.robot_config)==null?void 0:_.switch_status)=="1","checked-children":c(f)("btn_on"),"un-checked-children":c(f)("btn_off"),class:"no-bubble",onChange:e=>v(t,e)},null,8,["checked","checked-children","un-checked-children","onChange"])):L("",!0),t.robot_only_show!=1?(d(),C(E,{key:1,class:"fixed-menu-box no-bubble",checked:((s=t.robot_config)==null?void 0:s.fixed_menu)=="1",onClick:i[0]||(i[0]=B(()=>{},["stop"])),onMousedown:i[1]||(i[1]=B(()=>{},["stop"])),onChange:e=>{var b;return I(t,((b=e==null?void 0:e.target)==null?void 0:b.checked)===!0)}},{default:y(()=>[g(M,{title:c(f)("msg_fixed_menu_tooltip")},{default:y(()=>[h(a(c(f)("label_fixed_menu")),1)]),_:1},8,["title"])]),_:1},8,["checked","onChange"])):L("",!0)],2)],8,et)])}),128))])}}},_t=R(lt,[["__scopeId","data-v-4b3c2dd8"]]),rt={class:"user-model-page"},dt={class:"page-title"},pt={class:"list-wrapper"},ut={class:"content-wrapper"},bt={href:"#/explore/index",target:"_blank"},ht={"bg-color":"#f5f9ff",class:"explore-page"},ft={class:"explore-page-body"},mt={class:"list-group-box"},yt={class:"empty-content"},gt={class:"empty-title"},xt={class:"empty-desc"},vt={href:"#/explore/index",target:"_blank"},kt={__name:"index",setup(q){const{t:o}=N("views.robot.robot-config.function-center.index"),f=w([{title:"tab_function",value:"1"},{title:"tab_plugin",value:"2"}]),u=U(),x=j(),v=w([]),I=()=>{f.value=[{title:o("tab_function"),value:"1"},{title:o("tab_plugin"),value:"2"}]},l=w("");let r=w([]);const i=()=>{G({robot_id:l.value}).then(t=>{const _=((t==null?void 0:t.data)||[]).map(s=>({...s,explore_name:s.name,explore_intro:s.introduction}));v.value=_,r.value=(t==null?void 0:t.data)||[],I()})},p=(t,_)=>{const s=_?"1":"0";if(s=="0"){let e=o("msg_close_keyword_no_reply");t.ability_type=="robot_smart_menu"&&(e=o("msg_close_smart_menu_no_reply")),t.ability_type=="robot_auto_reply"&&(e=o("msg_close_auto_reply_no_content")),t.ability_type=="robot_payment"&&(e=o("msg_close_confirm_payment")),Q.confirm({title:o("title_confirm_close"),icon:T(X),content:e,onOk:()=>{F({robot_id:l.value,ability_type:t.ability_type,switch_status:s}).then(b=>{b&&b.res==0&&($.success(o("msg_operation_success")),t.robot_config&&(t.robot_config.switch_status=s),t.robot_only_show!=1&&window.dispatchEvent(new CustomEvent("robotAbilityUpdated",{detail:{robotId:l.value}})))})}});return}F({robot_id:l.value,ability_type:t.ability_type,switch_status:s}).then(e=>{e&&e.res==0&&($.success(o("msg_operation_success")),t.robot_config&&(t.robot_config.switch_status=s),window.dispatchEvent(new CustomEvent("robotAbilityUpdated",{detail:{robotId:l.value}})))})},k=(t,_)=>{const s=_?"1":"0";H({robot_id:l.value,ability_type:t.ability_type,fixed_menu:s}).then(e=>{e&&e.res==0&&($.success(o("msg_operation_success")),t.robot_config&&(t.robot_config.fixed_menu=s),window.dispatchEvent(new CustomEvent("robotAbilityUpdated",{detail:{robotId:l.value}})))})},M=t=>{let _;if(t.robot_only_show!=1)_=x.resolve({path:t.menu.path,query:{id:l.value,robot_key:u.query.robot_key}});else{x.push({path:t.menu.path,query:{id:l.value,robot_key:u.query.robot_key}});return}window.open(_.href,"_blank")},E=()=>{const t=x.resolve({path:"/explore/index",query:{tab:"1"}});window.open(t.href,"_blank")};return O(()=>{l.value=u.query.id,i()}),(t,_)=>{const s=K,e=P,b=V;return d(),m("div",rt,[n("div",dt,a(c(o)("title_function_center")),1),n("div",pt,[n("div",ut,[g(s,{"show-icon":"",style:{"align-items":"baseline"}},{message:y(()=>[n("div",null,[h(a(c(o)("msg_function_center_desc"))+" ",1),n("a",bt,a(c(o)("link_explore_function_center")),1),h(a(c(o)("msg_function_center_desc_suffix")),1)])]),_:1}),n("div",ht,[n("div",ft,[n("div",mt,[g(b,{style:{"padding-right":"16px",flex:"1"}},{default:y(()=>[v.value.length==0?(d(),C(Z,{key:0,size:"250",class:"empty-box"},{default:y(()=>[n("div",yt,[n("p",gt,a(c(o)("empty_title")),1),n("p",xt,[h(a(c(o)("empty_desc_prefix"))+" ",1),n("a",vt,a(c(o)("link_explore_function_center")),1),h(" "+a(c(o)("empty_desc_suffix")),1)]),g(e,{type:"primary",onClick:E},{default:y(()=>[h(a(c(o)("btn_add")),1)]),_:1})])]),_:1})):(d(),C(_t,{key:1,list:v.value,onSwitchChange:p,onFixedMenuChange:k,onClickItem:M},null,8,["list"]))]),_:1})])])])])])])}}},zt=R(kt,[["__scopeId","data-v-289bc00d"]]);export{zt as default};
//# sourceMappingURL=index-C0TAzkNH.js.map
