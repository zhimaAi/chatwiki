{"version":3,"file":"index-CFwdofGw.js","sources":["../../../../front-end/chat-ai-admin-vue/src/views/database/database-detail/database-manage/components/add-data-modal.vue","../../../../front-end/chat-ai-admin-vue/src/views/database/database-detail/database-manage/components/export-modal.vue","../../../../front-end/chat-ai-admin-vue/src/views/database/database-detail/database-manage/components/add-filter-modal.vue","../../../../front-end/chat-ai-admin-vue/src/views/database/database-detail/database-manage/components/filter-manage-modal.vue","../../../../front-end/chat-ai-admin-vue/src/views/database/database-detail/database-manage/components/import-data-modal.vue","../../../../front-end/chat-ai-admin-vue/src/views/database/database-detail/database-manage/index.vue"],"sourcesContent":["<template>\r\n  <div class=\"add-data-sheet\">\r\n    <a-modal\r\n      v-model:open=\"open\"\r\n      :title=\"modalTitle\"\r\n      @ok=\"handleOk\"\r\n      :width=\"580\"\r\n      :bodyStyle=\"{\r\n        'max-height': '590px',\r\n        'overflow-y': 'auto',\r\n        width: 'calc(100% + 24px)',\r\n        'padding-right': '32px'\r\n      }\"\r\n      class=\"add-data-sheet-modal\"\r\n    >\r\n      <a-form style=\"margin-top: 16px\" :model=\"formState\" ref=\"formRef\" layout=\"vertical\">\r\n        <a-form-item\r\n          v-for=\"item in fieldLists\"\r\n          :name=\"item.name\"\r\n          :key=\"item.id\"\r\n          :rules=\"item.rules\"\r\n        >\r\n          <template #label>\r\n            <a-flex :gap=\"4\" style=\"width: 100%\">\r\n              <div class=\"field-name\">{{ item.name }}</div>\r\n              <a-tooltip>\r\n                <template #title>{{ item.description }}</template>\r\n                <QuestionCircleOutlined />\r\n              </a-tooltip>\r\n            </a-flex>\r\n          </template>\r\n          <template v-if=\"item.type == 'boolean'\">\r\n            <a-switch\r\n              v-model:checked=\"formState[item.name]\"\r\n              :checked-children=\"t('switch_on')\"\r\n              :un-checked-children=\"t('switch_off')\"\r\n              checkedValue=\"true\"\r\n              unCheckedValue=\"false\"\r\n            />\r\n          </template>\r\n          <template v-else-if=\"item.type == 'number' || item.type == 'integer'\">\r\n            <a-input-number\r\n              style=\"width: 100%\"\r\n              v-model:value.number=\"formState[item.name]\"\r\n              :placeholder=\"t('ph_input_content')\"\r\n            />\r\n          </template>\r\n          <template v-else>\r\n            <a-input v-model:value=\"formState[item.name]\" :placeholder=\"t('ph_input_content')\" />\r\n          </template>\r\n        </a-form-item>\r\n      </a-form>\r\n    </a-modal>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { PlusOutlined, QuestionCircleOutlined } from '@ant-design/icons-vue'\r\nimport { reactive, ref, watch } from 'vue'\r\nimport { useRoute } from 'vue-router'\r\nimport { message } from 'ant-design-vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\nimport { addFormEntry } from '@/api/database'\r\n\r\nconst { t } = useI18n('views.database.database-detail.database-manage.components.add-data-modal')\r\n\r\nconst modalTitle = ref(t('modal_title_add'))\r\nconst rotue = useRoute()\r\nconst query = rotue.query\r\nconst emit = defineEmits('ok')\r\nconst props = defineProps({\r\n  column: {\r\n    type: Array,\r\n    default: () => []\r\n  }\r\n})\r\nwatch(\r\n  () => props.column,\r\n  (val) => {\r\n    formatField()\r\n  }\r\n)\r\n\r\nconst fieldLists = ref([])\r\nconst formatField = () => {\r\n  let lists = []\r\n  props.column.forEach((item) => {\r\n    formState[item.name] = ''\r\n    item.rules = []\r\n    if (item.required == 'true') {\r\n      item.rules.push({ required: true, message: t('validator_required', { name: item.name }) })\r\n    }\r\n    if (item.type == 'number') {\r\n      item.rules.push({ type: 'number', message: t('validator_number', { name: item.name }) })\r\n    }\r\n    if (item.type == 'integer') {\r\n      // item.rules.push({ type: 'integer', message: `${item.name}必须为整数` })\r\n      item.rules.push({ asyncValidator: isValidatorInteger })\r\n    }\r\n    if (item.type == 'boolean') {\r\n      formState[item.name] = 'false'\r\n    }\r\n    lists.push({\r\n      ...item\r\n    })\r\n    fieldLists.value = lists\r\n  })\r\n}\r\nconst isValidatorInteger = (rule, value) => {\r\n  return new Promise((resolve, reject) => {\r\n    if(value == '' || Number.isInteger(+value)){\r\n      return resolve()\r\n    }\r\n    return reject(t('validator_integer'))\r\n  })\r\n}\r\nconst open = ref(false)\r\nconst formState = reactive({\r\n  form_id: query.form_id\r\n})\r\nconst show = (data) => {\r\n  open.value = true\r\n  formRef.value && formRef.value.resetFields()\r\n  formatField()\r\n  formState.id = ''\r\n  Object.assign(formState, convertNumberStringsToObjectNumbers(data))\r\n  if (formState.id) {\r\n    modalTitle.value = t('modal_title_edit')\r\n  } else {\r\n    modalTitle.value = t('modal_title_add')\r\n  }\r\n}\r\n\r\nconst formRef = ref(null)\r\nconst handleOk = () => {\r\n  formRef.value.validate().then((res) => {\r\n    addFormEntry({ ...formState }).then((res) => {\r\n      let tip = formState.id ? t('msg_edit_success') : t('msg_add_success')\r\n      message.success(tip)\r\n      open.value = false\r\n      emit('ok')\r\n    })\r\n  })\r\n}\r\nfunction convertNumberStringsToObjectNumbers(obj) {\r\n  // 创建一个新对象来存放转换后的属性\r\n  const newObj = {}\r\n\r\n  // 遍历传入对象的所有可枚举属性\r\n  for (let key in obj) {\r\n    if (obj.hasOwnProperty(key)) {\r\n      // 确保属性是对象自身的属性，而不是继承来的\r\n      const value = obj[key]\r\n\r\n      // 使用Number()函数尝试将属性值转换为数字\r\n      // 如果转换成功（即不是NaN），并且原始值是字符串类型\r\n      // 则将转换后的数字赋值给新对象的同名属性\r\n      if (!isNaN(Number(value)) && typeof value === 'string' && value != '') {\r\n        newObj[key] = Number(value)\r\n      } else {\r\n        // 如果转换失败或者原始值不是字符串，则直接复制原始值到新对象\r\n        newObj[key] = value\r\n      }\r\n    }\r\n  }\r\n\r\n  // 返回新对象\r\n  return newObj\r\n}\r\n\r\ndefineExpose({\r\n  show\r\n})\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.form-tip {\r\n  color: #8c8c8c;\r\n  margin-top: 8px;\r\n}\r\n::v-deep(.ant-form-item) {\r\n  margin-bottom: 16px;\r\n}\r\n.field-name {\r\n  width: calc(100%);\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n</style>\r\n","<template>\r\n  <div>\r\n    <a-modal v-model:open=\"open\" :title=\"modalTitle\" @ok=\"handleOk\" :width=\"450\">\r\n      <a-form class=\"mt16\" layout=\"vertical\">\r\n        <a-form-item label=\"\">\r\n          <a-radio-group v-model:value=\"formState.type\" name=\"radioGroup\">\r\n            <a-radio :value=\"1\">{{ t('radio_all_data') }}</a-radio>\r\n            <a-radio :value=\"2\">{{ t('radio_custom_date') }}</a-radio>\r\n          </a-radio-group>\r\n        </a-form-item>\r\n        <a-form-item\r\n          required\r\n          :label=\"t('label_select_date')\"\r\n          v-show=\"formState.type == 2\"\r\n          v-bind=\"validateInfos.dates\"\r\n        >\r\n          <a-range-picker\r\n            style=\"width: 100%\"\r\n            v-model:value=\"formState.dates\"\r\n            valueFormat=\"YYYY-MM-DD\"\r\n            format=\"YYYY-MM-DD\"\r\n          />\r\n        </a-form-item>\r\n      </a-form>\r\n    </a-modal>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { PlusOutlined, QuestionCircleOutlined } from '@ant-design/icons-vue'\r\nimport { reactive, ref } from 'vue'\r\nimport { Form, message } from 'ant-design-vue'\r\nimport { useRoute } from 'vue-router'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\nimport { exportFormEntry } from '@/api/database'\r\n\r\nconst { t } = useI18n('views.database.database-detail.database-manage.components.export-modal')\r\n\r\nconst rotue = useRoute()\r\nconst query = rotue.query\r\nconst modalTitle = ref(t('modal_title'))\r\nconst open = ref(false)\r\nconst formState = reactive({\r\n  dates: [],\r\n  type: 1\r\n})\r\nconst show = () => {\r\n  open.value = true\r\n  formState.type = 1\r\n  formState.dates = []\r\n}\r\nconst formRules = reactive({\r\n  dates: [\r\n    {\r\n      validator: async (rule, value) => {\r\n        if (formState.type == 2 && !value.length) {\r\n          return Promise.reject(t('validator_date_required'))\r\n        }\r\n        return Promise.resolve()\r\n      }\r\n    }\r\n  ]\r\n})\r\nconst useForm = Form.useForm\r\nconst { resetFields, validate, validateInfos } = useForm(formState, formRules)\r\nconst handleOk = () => {\r\n  validate().then(() => {\r\n    let parmas = {\r\n      form_id: query.form_id\r\n    }\r\n    if (formState.type == 2) {\r\n      parmas.start_date = formState.dates[0]\r\n      parmas.end_date = formState.dates[1]\r\n    }\r\n    exportFormEntry(parmas)\r\n    open.value = false\r\n  })\r\n}\r\ndefineExpose({\r\n  show\r\n})\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.mt16 {\r\n  margin-top: 16px;\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"add-data-sheet\">\r\n    <a-modal v-model:open=\"open\" :title=\"modalTitle\" @ok=\"handleOk\" :width=\"790\">\r\n      <a-form\r\n        class=\"form-box\"\r\n        style=\"margin-top: 16px\"\r\n        :model=\"formState\"\r\n        ref=\"filterFormRef\"\r\n        layout=\"vertical\"\r\n      >\r\n        <a-form-item\r\n          :label=\"t('label_category_name')\"\r\n          name=\"name\"\r\n          :rules=\"[{ required: true, message: t('validator_category_name_required') }]\"\r\n        >\r\n          <a-input :maxLength=\"64\" v-model:value=\"formState.name\" :placeholder=\"t('ph_category_name')\" />\r\n        </a-form-item>\r\n        <div class=\"form-required-item\">{{ t('label_filter_condition') }}</div>\r\n        <div class=\"filter-list-box\">\r\n          <a-space\r\n            v-for=\"(item, index) in formState.condition\"\r\n            :key=\"index\"\r\n            style=\"display: flex; margin-bottom: 8px\"\r\n            align=\"baseline\"\r\n          >\r\n            <div>{{ t('condition_label', { index: index + 1 }) }}</div>\r\n            <a-form-item>\r\n              <a-select\r\n                v-model:value=\"item.form_field_id\"\r\n                style=\"width: 150px\"\r\n                :placeholder=\"t('ph_select')\"\r\n                @change=\"handleChangeFiled(item, index)\"\r\n              >\r\n                <a-select-option\r\n                  :disabled=\"isDisabled(filed, item)\"\r\n                  v-for=\"filed in props.column\"\r\n                  :key=\"filed.id\"\r\n                  :value=\"filed.id\"\r\n                  >{{ filed.name }}</a-select-option\r\n                >\r\n              </a-select>\r\n            </a-form-item>\r\n            <a-form-item\r\n              :name=\"['condition', index, 'rule']\"\r\n              :rules=\"{\r\n                required: true,\r\n                message: t('validator_rule_required')\r\n              }\"\r\n            >\r\n              <a-select v-model:value=\"item.rule\" style=\"width: 120px\" :placeholder=\"t('validator_rule_required')\">\r\n                <a-select-option\r\n                  v-for=\"filed in ruleOptions[item.form_filed_type]\"\r\n                  :key=\"filed.value\"\r\n                  :value=\"filed.value\"\r\n                  >{{ filed.label }}</a-select-option\r\n                >\r\n              </a-select>\r\n            </a-form-item>\r\n            <a-form-item\r\n              v-show=\"is_show_rule_value1(item)\"\r\n              :name=\"['condition', index, 'rule_value1']\"\r\n              :rules=\"{\r\n                asyncValidator: (rule, value) => validatorItem1(rule, value, item),\r\n              }\"\r\n            >\r\n              <a-input v-model:value=\"item.rule_value1\" :placeholder=\"t('ph_input')\"></a-input>\r\n            </a-form-item>\r\n            <a-form-item\r\n              v-show=\"is_show_rule_value2(item)\"\r\n              :name=\"['condition', index, 'rule_value2']\"\r\n              :rules=\"{\r\n                asyncValidator: (rule, value) => validatorItem2(rule, value, item),\r\n                trigger: 'blur'\r\n              }\"\r\n            >\r\n              <a-input v-model:value=\"item.rule_value2\" :placeholder=\"t('ph_input')\"></a-input>\r\n            </a-form-item>\r\n            <MinusCircleOutlined v-if=\"formState.condition.length > 1\" @click=\"removeItem(index)\" />\r\n          </a-space>\r\n          <div style=\"margin-left: 48px\">\r\n            <a-button @click=\"handleAddItem\">{{ t('btn_add_condition') }}</a-button>\r\n          </div>\r\n        </div>\r\n        <a-form-item :label=\"t('label_condition_relation')\" required>\r\n          <a-radio-group v-model:value=\"formState.type\">\r\n            <a-radio value=\"1\">{{ t('radio_and') }}</a-radio>\r\n            <a-radio value=\"2\">{{ t('radio_or') }}</a-radio>\r\n          </a-radio-group>\r\n        </a-form-item>\r\n      </a-form>\r\n    </a-modal>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { PlusOutlined, QuestionCircleOutlined, MinusCircleOutlined } from '@ant-design/icons-vue'\r\nimport { reactive, ref, watch } from 'vue'\r\nimport { useRoute } from 'vue-router'\r\nimport { message } from 'ant-design-vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\nimport { addFormFilter, editFormFilter, getFormFilterInfo } from '@/api/database'\r\nimport { isNumberOrNumberString } from '@/utils/validate'\r\n\r\nconst { t } = useI18n('views.database.database-detail.database-manage.components.add-filter-modal')\r\n\r\nconst modalTitle = ref(t('modal_title_add'))\r\nconst rotue = useRoute()\r\nconst query = rotue.query\r\nconst emit = defineEmits(['ok'])\r\nconst props = defineProps({\r\n  column: {\r\n    type: Array,\r\n    default: () => []\r\n  }\r\n})\r\n\r\nconst fieldLists = ref([])\r\n\r\nconst open = ref(false)\r\nconst formState = reactive({\r\n  form_id: query.form_id,\r\n  name: '',\r\n  condition: [],\r\n  type: '1',\r\n  id: ''\r\n})\r\n\r\nconst formatConditions = () => {\r\n  let condition = [\r\n    {\r\n      form_field_id: props.column[0].id,\r\n      form_filed_type: props.column[0].type,\r\n      rule: void 0,\r\n      rule_value1: '',\r\n      rule_value2: ''\r\n    }\r\n  ]\r\n  formState.condition = condition\r\n}\r\nconst removeItem = (index) => {\r\n  formState.condition.splice(index, 1)\r\n}\r\nconst handleChangeFiled = (item, index) => {\r\n  // 改变字段类型\r\n  item.rule = void 0\r\n  item.rule_value1 = ''\r\n  item.rule_value2 = ''\r\n  item.form_filed_type = props.column.filter((i) => i.id == item.form_field_id)[0].type\r\n}\r\nconst isDisabled = (filed, item) => {\r\n  if (item.form_field_id == filed.id) {\r\n    return false\r\n  }\r\n  let hasAddId = formState.condition.map((i) => i.form_field_id)\r\n  return hasAddId.includes(filed.id)\r\n}\r\n\r\nconst handleAddItem = () => {\r\n  let hasAddId = formState.condition.map((i) => i.form_field_id)\r\n  let canAddItem = props.column.filter((i) => !hasAddId.includes(i.id))\r\n  if (!canAddItem.length) {\r\n    message.error(t('msg_field_all_added'))\r\n    return\r\n  }\r\n  formState.condition.push({\r\n    form_field_id: canAddItem[0].id,\r\n    form_filed_type: canAddItem[0].type,\r\n    rule: void 0,\r\n    rule_value1: '',\r\n    rule_value2: ''\r\n  })\r\n}\r\n\r\nconst is_show_rule_value1 = (item) => {\r\n  // 第一个输入框是否显示出来\r\n  if (!item.rule || item.form_filed_type == 'boolean') {\r\n    return false\r\n  }\r\n  let showMap = ['eq', 'neq', 'contain', 'not_contain', 'gt', 'lt', 'gte', 'lte', 'eq', 'between']\r\n  return showMap.includes(item.rule)\r\n}\r\nconst is_show_rule_value2 = (item) => {\r\n  // 第二个输入框是否显示出来\r\n  if (!item.rule || item.form_filed_type == 'boolean') {\r\n    return false\r\n  }\r\n  let showMap = ['between']\r\n  return showMap.includes(item.rule)\r\n}\r\nconst validatorItem1 = (rule, value, item) => {\r\n  return new Promise((resolve, reject) => {\r\n    if (is_show_rule_value1(item)) {\r\n      if (!value) {\r\n        return reject(t('validator_input_required'))\r\n      }\r\n      if (item.form_filed_type == 'integer') {\r\n        if (!Number.isInteger(+value)) {\r\n          return reject(t('validator_integer'))\r\n        }\r\n        return resolve()\r\n      }\r\n      if (item.form_filed_type == 'number') {\r\n        if (!isNumberOrNumberString(value)) {\r\n          return reject(t('validator_number'))\r\n        }\r\n        return resolve()\r\n      }\r\n      return resolve()\r\n    } else {\r\n      return resolve()\r\n    }\r\n  })\r\n}\r\n\r\nconst validatorItem2 = (rule, value, item) => {\r\n  return new Promise((resolve, reject) => {\r\n    if (is_show_rule_value2(item)) {\r\n      if (!value) {\r\n        return reject(t('validator_input_required'))\r\n      }\r\n      if (item.form_filed_type == 'integer') {\r\n        if (!Number.isInteger(+value)) {\r\n          return reject(t('validator_integer'))\r\n        }\r\n        if (+value < +item.rule_value1) {\r\n          return reject(t('validator_value2_greater'))\r\n        }\r\n        return resolve()\r\n      }\r\n      if (item.form_filed_type == 'number') {\r\n        if (!isNumberOrNumberString(value)) {\r\n          return reject(t('validator_number'))\r\n        }\r\n        if (+value < +item.rule_value1) {\r\n          return reject(t('validator_value2_greater'))\r\n        }\r\n        return resolve()\r\n      }\r\n      return resolve()\r\n    } else {\r\n      return resolve()\r\n    }\r\n  })\r\n}\r\n\r\nconst show = () => {\r\n  open.value = true\r\n  modalTitle.value = t('modal_title_add')\r\n  formatConditions()\r\n  formState.name = ''\r\n  formState.type = '1'\r\n  formState.id = ''\r\n}\r\nconst edit = (data) => {\r\n  open.value = true\r\n  modalTitle.value = t('modal_title_edit')\r\n  getFormFilterInfo({\r\n    form_id: query.form_id,\r\n    id: data.id\r\n  }).then((res) => {\r\n    let conditions = res.data.conditions || '[]'\r\n    conditions = JSON.parse(conditions)\r\n    conditions = conditions.map((item) => {\r\n      return {\r\n        form_field_id: item.form_field_id + '',\r\n        form_filed_type: props.column.filter((i) => i.id == item.form_field_id)[0].type,\r\n        rule: removePrefix(item.rule),\r\n        rule_value1: item.rule_value1,\r\n        rule_value2: item.rule_value2\r\n      }\r\n    })\r\n    formState.condition = conditions\r\n    formState.name = res.data.name\r\n    formState.type = res.data.type\r\n    formState.id = res.data.id\r\n  })\r\n}\r\nfunction removePrefix(inputString) {\r\n  // 定义要移除的前缀列表\r\n  const prefixes = ['string_', 'integer_', 'number_', 'boolean_']\r\n\r\n  // 循环检查每个前缀\r\n  for (const prefix of prefixes) {\r\n    if (inputString.startsWith(prefix)) {\r\n      // 如果找到匹配的前缀，返回移除前缀后的字符串\r\n      return inputString.slice(prefix.length)\r\n    }\r\n  }\r\n\r\n  // 如果没有匹配的前缀，则返回原始字符串\r\n  return inputString\r\n}\r\nconst filterFormRef = ref(null)\r\nconst handleOk = () => {\r\n  filterFormRef.value.validate().then((res) => {\r\n    let condition = formState.condition.map((item) => {\r\n      return {\r\n        form_field_id: +item.form_field_id,\r\n        rule: item.form_filed_type + '_' + item.rule,\r\n        rule_value1: item.rule_value1,\r\n        rule_value2: item.rule_value2\r\n      }\r\n    })\r\n    let parmas = {\r\n      ...formState,\r\n      condition: JSON.stringify(condition)\r\n    }\r\n    let methodUrl = addFormFilter\r\n    let tip = t('msg_add_success')\r\n    if (formState.id) {\r\n      methodUrl = editFormFilter\r\n      tip = t('msg_edit_success')\r\n    }\r\n    methodUrl(parmas).then((res) => {\r\n      message.success(tip)\r\n      open.value = false\r\n      emit('ok')\r\n    })\r\n  }).catch((err)=>{\r\n  })\r\n}\r\n\r\nconst ruleOptions = ref({\r\n  string: [\r\n    {\r\n      label: t('rule_eq'),\r\n      value: 'eq'\r\n    },\r\n    {\r\n      label: t('rule_neq'),\r\n      value: 'neq'\r\n    },\r\n    {\r\n      label: t('rule_contain'),\r\n      value: 'contain'\r\n    },\r\n    {\r\n      label: t('rule_not_contain'),\r\n      value: 'not_contain'\r\n    },\r\n    {\r\n      label: t('rule_empty'),\r\n      value: 'empty'\r\n    },\r\n    {\r\n      label: t('rule_not_empty'),\r\n      value: 'not_empty'\r\n    }\r\n  ],\r\n  integer: [\r\n    {\r\n      label: t('rule_gt'),\r\n      value: 'gt'\r\n    },\r\n    {\r\n      label: t('rule_lt'),\r\n      value: 'lt'\r\n    },\r\n    {\r\n      label: t('rule_gte'),\r\n      value: 'gte'\r\n    },\r\n    {\r\n      label: t('rule_lte'),\r\n      value: 'lte'\r\n    },\r\n    {\r\n      label: t('rule_eq'),\r\n      value: 'eq'\r\n    },\r\n    {\r\n      label: t('rule_between'),\r\n      value: 'between'\r\n    }\r\n  ],\r\n  number: [\r\n    {\r\n      label: t('rule_gt'),\r\n      value: 'gt'\r\n    },\r\n    {\r\n      label: t('rule_lt'),\r\n      value: 'lt'\r\n    },\r\n    {\r\n      label: t('rule_gte'),\r\n      value: 'gte'\r\n    },\r\n    {\r\n      label: t('rule_lte'),\r\n      value: 'lte'\r\n    },\r\n    {\r\n      label: t('rule_eq'),\r\n      value: 'eq'\r\n    },\r\n    {\r\n      label: t('rule_between'),\r\n      value: 'between'\r\n    }\r\n  ],\r\n  boolean: [\r\n    {\r\n      label: t('rule_true'),\r\n      value: 'true'\r\n    },\r\n    {\r\n      label: t('rule_false'),\r\n      value: 'false'\r\n    }\r\n  ]\r\n})\r\ndefineExpose({\r\n  show,\r\n  edit\r\n})\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.form-box {\r\n  margin-top: 24px;\r\n  .form-required-item {\r\n    margin: 16px 0 8px 0;\r\n    &::before {\r\n      display: inline-block;\r\n      margin-right: 4px;\r\n      color: #ff4d4f;\r\n      font-size: 14px;\r\n      font-family: SimSun, sans-serif;\r\n      line-height: 1;\r\n      content: '*';\r\n    }\r\n  }\r\n  .ant-form-item {\r\n    margin-bottom: 8px;\r\n  }\r\n  .filter-list-box {\r\n    margin-bottom: 16px;\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div>\r\n    <a-modal\r\n      v-model:open=\"open\"\r\n      :title=\"modalTitle\"\r\n      @cancel=\"handleClose\"\r\n      :footer=\"null\"\r\n      :width=\"760\"\r\n    >\r\n      <div class=\"custom-table\">\r\n        <div class=\"t-head\">\r\n          <div class=\"td\">\r\n            <div style=\"width: 24px\"></div>\r\n            {{ t('column_category_name') }}\r\n          </div>\r\n          <div class=\"td\">{{ t('column_type') }}</div>\r\n          <div class=\"td\">{{ t('column_enabled') }}</div>\r\n          <div class=\"td flex-none\" style=\"width: 120px\">{{ t('column_action') }}</div>\r\n        </div>\r\n        <div class=\"t-body\">\r\n          <div class=\"t-row\">\r\n            <div class=\"t-item\">\r\n              <div style=\"width: 24px\"></div>\r\n              {{ t('text_all') }}\r\n            </div>\r\n            <div class=\"t-item\">{{ t('type_system') }}</div>\r\n            <div class=\"t-item\">\r\n              <a-switch :checked=\"true\" disabled :checked-children=\"t('switch_on')\" :un-checked-children=\"t('switch_off')\" />\r\n            </div>\r\n            <div class=\"t-item flex-none\" style=\"width: 120px\"></div>\r\n          </div>\r\n          <draggable\r\n            v-model=\"data\"\r\n            item-key=\"id\"\r\n            @end=\"onDragEnd\"\r\n            group=\"table-rows\"\r\n            handle=\".drag-btn\"\r\n          >\r\n            <template #item=\"{ element, index }\">\r\n              <div :key=\"element.id\" class=\"t-row\">\r\n                <div class=\"t-item\">\r\n                  <span class=\"drag-btn\"><svg-icon name=\"drag\" /></span>\r\n                  <span v-if=\"element.name.length > 10\">\r\n                    <a-tooltip>\r\n                      <template #title>{{ element.name }}</template>\r\n                      {{ element.name.slice(0, 10) + '...' }}\r\n                    </a-tooltip>\r\n                  </span>\r\n                  <span v-else>{{ element.name }} </span>\r\n                </div>\r\n                <div class=\"t-item\">{{ t('type_custom') }}</div>\r\n                <div class=\"t-item\">\r\n                  <a-switch\r\n                    @change=\"handleChangeEnabled(element)\"\r\n                    :checked=\"element.enabled\"\r\n                    :checked-children=\"t('switch_on')\"\r\n                    :un-checked-children=\"t('switch_off')\"\r\n                    checkedValue=\"true\"\r\n                    unCheckedValue=\"false\"\r\n                  />\r\n                </div>\r\n                <div class=\"t-item flex-none\" style=\"width: 120px\">\r\n                  <a @click=\"handleOpenAddModal(element)\">{{ t('action_edit') }}</a>\r\n                  <a-divider type=\"vertical\" />\r\n                  <a @click=\"onDelete(element, index)\">{{ t('action_delete') }}</a>\r\n                </div>\r\n              </div>\r\n            </template>\r\n          </draggable>\r\n        </div>\r\n      </div>\r\n    </a-modal>\r\n    <AddFilrerModal\r\n      @ok=\"handleEditBack\"\r\n      :column=\"props.column\"\r\n      ref=\"addFilrerModalRef\"\r\n    ></AddFilrerModal>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, createVNode } from 'vue'\r\nimport draggable from 'vuedraggable'\r\nimport { ExclamationCircleOutlined } from '@ant-design/icons-vue'\r\nimport { message, Modal } from 'ant-design-vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\nimport {\r\n  getFormFilterList,\r\n  delFormFilter,\r\n  updateFormFilterEnabled,\r\n  updateFormFilterSort\r\n} from '@/api/database'\r\nimport AddFilrerModal from './add-filter-modal.vue'\r\nimport { useRoute } from 'vue-router'\r\n\r\nconst { t } = useI18n('views.database.database-detail.database-manage.components.filter-manage-modal')\r\n\r\nconst rotue = useRoute()\r\nconst query = rotue.query\r\nconst emit = defineEmits(['ok', 'change'])\r\nconst modalTitle = ref(t('modal_title'))\r\nconst open = ref(false)\r\n\r\nconst props = defineProps({\r\n  column: {\r\n    type: Array,\r\n    default: () => []\r\n  }\r\n})\r\nconst getSortLists = () => {\r\n  getFormFilterList({ form_id: query.form_id }).then((res) => {\r\n    data.value = res.data.map((item) => {\r\n      return {\r\n        ...item\r\n      }\r\n    })\r\n  })\r\n}\r\nconst handleEditBack = () => {\r\n  getSortLists()\r\n  emit('ok')\r\n  emit('change')\r\n}\r\nconst show = () => {\r\n  getSortLists()\r\n  open.value = true\r\n}\r\n\r\nconst handleClose = () => {\r\n  open.value = false\r\n}\r\nconst data = ref()\r\nconst onDragEnd = () => {\r\n  let filter_sort = []\r\n  data.value.reverse().forEach((item, index) => {\r\n    filter_sort.push({\r\n      id: +item.id,\r\n      sort: +index + 1\r\n    })\r\n  })\r\n  updateFormFilterSort({\r\n    form_id: query.form_id,\r\n    filter_sort: JSON.stringify(filter_sort)\r\n  }).then((res) => {\r\n    message.success(t('msg_sort_success'))\r\n    getSortLists()\r\n    emit('change')\r\n  })\r\n}\r\n\r\nconst handleChangeEnabled = (record) => {\r\n  updateFormFilterEnabled({\r\n    form_id: query.form_id,\r\n    id: record.id,\r\n    enabled: record.enabled == 'true' ? 'false' : 'true'\r\n  }).then((res) => {\r\n    message.success(t('msg_set_success'))\r\n    getSortLists()\r\n    emit('change')\r\n  })\r\n}\r\nconst onDelete = (record, index) => {\r\n  Modal.confirm({\r\n    title: t('modal_delete_title'),\r\n    icon: createVNode(ExclamationCircleOutlined),\r\n    content: t('modal_delete_content'),\r\n    okText: t('modal_delete_ok'),\r\n    okType: 'danger',\r\n    cancelText: t('modal_delete_cancel'),\r\n    onOk() {\r\n      delFormFilter({ id: record.id, form_id: query.form_id }).then((res) => {\r\n        message.success(t('msg_delete_success'))\r\n        data.value.splice(index, 1)\r\n        emit('change')\r\n      })\r\n    },\r\n    onCancel() {}\r\n  })\r\n}\r\n\r\nconst addFilrerModalRef = ref(null)\r\nconst handleOpenAddModal = (data) => {\r\n  addFilrerModalRef.value.edit(data)\r\n}\r\nconst handleOk = () => {}\r\ndefineExpose({\r\n  show\r\n})\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.custom-table {\r\n  .drag-btn {\r\n    margin-right: 8px;\r\n    cursor: grab;\r\n    opacity: 0;\r\n    transition: opacity 0.2s;\r\n  }\r\n  margin-bottom: 24px;\r\n  margin-top: 24px;\r\n  .t-head {\r\n    border-radius: 8px 8px 0 0;\r\n    background: #f5f5f5;\r\n    border-bottom: 1px solid #f0f0f0;\r\n    font-weight: 600;\r\n    text-align: left;\r\n    display: flex;\r\n    align-items: center;\r\n    .td {\r\n      display: flex;\r\n      flex: 1;\r\n      font-weight: 600;\r\n      padding: 12px 16px;\r\n    }\r\n    .td:first-of-type {\r\n      flex: 1.3;\r\n    }\r\n    .flex-none {\r\n      flex: none;\r\n    }\r\n  }\r\n  .t-body {\r\n    .t-row {\r\n      display: flex;\r\n      align-items: center;\r\n      border-bottom: 1px solid #f0f0f0;\r\n      &:hover {\r\n        background: #fafafa;\r\n        .drag-btn {\r\n          opacity: 1;\r\n        }\r\n      }\r\n      .t-item {\r\n        display: flex;\r\n        flex: 1;\r\n        padding: 12px 16px;\r\n      }\r\n      .t-item:first-of-type {\r\n        flex: 1.3;\r\n      }\r\n      .flex-none {\r\n        flex: none;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div>\r\n    <a-modal\r\n      v-model:open=\"open\"\r\n      :title=\"t('modal_title')\"\r\n      :confirm-loading=\"confirmLoading\"\r\n      @ok=\"handleOk\"\r\n      :footer=\"null\"\r\n      :width=\"746\"\r\n    >\r\n      <a-alert show-icon class=\"alert-box\">\r\n        <template #message>\r\n          <div>\r\n            {{ t('alert_support') }}\r\n            <a @click=\"exportExcelTemplate\" class=\"mr8\">{{ t('link_excel_template') }}</a>\r\n            <a @click=\"exportJsonTemplate\">{{ t('link_json_template') }}</a>\r\n          </div>\r\n          <div>\r\n            {{ t('alert_instruction') }}\r\n          </div>\r\n        </template>\r\n      </a-alert>\r\n      <div class=\"upload-box\">\r\n        <a-upload-dragger\r\n          v-model:fileList=\"fileList\"\r\n          name=\"form_files\"\r\n          :multiple=\"false\"\r\n          accept=\".json,.xlsx,.csv\"\r\n          :headers=\"{ token: userStore.getToken }\"\r\n          :data=\"{ form_id: query.form_id }\"\r\n          action=\"/manage/uploadFormFile\"\r\n          @change=\"handleChange\"\r\n          @drop=\"handleDrop\"\r\n        >\r\n          <p class=\"ant-upload-drag-icon\">\r\n            <inbox-outlined></inbox-outlined>\r\n          </p>\r\n          <p class=\"ant-upload-text\">{{ t('upload_text') }}</p>\r\n          <p class=\"ant-upload-hint\">{{ t('upload_hint') }}</p>\r\n        </a-upload-dragger>\r\n      </div>\r\n    </a-modal>\r\n    <a-modal v-model:open=\"resultOpen\" :title=\"t('modal_title')\" :footer=\"null\" :width=\"746\">\r\n      <div class=\"progress-box\" v-if=\"percent < 100\">\r\n        <a-progress type=\"circle\" :percent=\"percent\" />\r\n        <div class=\"tip\">{{ t('progress_tip') }}</div>\r\n      </div>\r\n      <a-result v-else status=\"success\" :title=\"t('result_title')\">\r\n        <template #subTitle\r\n          >{{ t('result_subtitle', { success: resultInfo.success, fail: resultInfo.total - resultInfo.success }) }}\r\n          <span v-if=\"resultInfo.total - resultInfo.success > 0\">\r\n            {{ t('result_subtitle_tip') }}\r\n          </span>\r\n        </template>\r\n        <template #extra>\r\n          <a-button\r\n            v-if=\"resultInfo.total - resultInfo.success > 0\"\r\n            @click=\"downFailData\"\r\n            type=\"primary\"\r\n            >{{ t('btn_download_fail') }}</a-button\r\n          >\r\n        </template>\r\n      </a-result>\r\n    </a-modal>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue'\r\nimport { InboxOutlined, EyeOutlined, DeleteOutlined } from '@ant-design/icons-vue'\r\nimport { useUserStore } from '@/stores/modules/user'\r\nimport { tableToExcel, exportToJsonWithSaver } from '@/utils/index'\r\nimport { useRoute } from 'vue-router'\r\nimport dayjs from 'dayjs'\r\nimport { uploadFormFile, getUploadFormFileProc } from '@/api/database'\r\nimport { message } from 'ant-design-vue'\r\nimport { reactive } from 'vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.database.database-detail.database-manage.components.import-data-modal')\r\n\r\nconst userStore = useUserStore()\r\nconst emit = defineEmits(['ok'])\r\n\r\nconst query = useRoute().query\r\n\r\nconst props = defineProps({\r\n  column: {\r\n    type: Array,\r\n    default: () => []\r\n  }\r\n})\r\n\r\nconst open = ref(false)\r\nconst confirmLoading = ref(false)\r\n\r\nconst resultInfo = reactive({\r\n  total: 0,\r\n  success: 0,\r\n  err_data: []\r\n})\r\n\r\nconst fileList = ref([])\r\nconst handleChange = (info) => {\r\n  const status = info.file.status\r\n  if (status !== 'uploading') {\r\n  }\r\n  if (status === 'done') {\r\n    if (info.file.response.res == 0) {\r\n      let task_id = info.file.response.data.task_id\r\n      getProgressInfo(task_id)\r\n    } else {\r\n      fileList.value = []\r\n      return message.error(info.file.response.msg)\r\n    }\r\n  } else if (status === 'error') {\r\n    fileList.value = []\r\n    message.error(t('msg_upload_failed', { name: info.file.name }))\r\n  }\r\n}\r\nfunction handleDrop(e) {\r\n  console.log(e)\r\n}\r\nlet timer = null\r\nconst getProgressInfo = (task_id) => {\r\n  timer && clearInterval(timer)\r\n  open.value = false\r\n  resultOpen.value = true\r\n  percent.value = 10\r\n  resultInfo.total = 0\r\n  resultInfo.success = 0\r\n  resultInfo.err_data = []\r\n  timer = setInterval(() => {\r\n    getUploadFormFileProc({ task_id })\r\n      .then((res) => {\r\n        let data = res.data\r\n        percent.value = (data.processed / data.total).toFixed()\r\n        if (data.finish) {\r\n          emit('ok')\r\n          clearInterval(timer)\r\n          percent.value = 100\r\n        }\r\n        if (data.total > 0) {\r\n          resultInfo.total = data.total\r\n          resultInfo.success = data.success\r\n          resultInfo.err_data = data.err_data\r\n        }\r\n      })\r\n\r\n      .catch(() => {\r\n        clearInterval(timer)\r\n      })\r\n  }, 2000)\r\n}\r\n\r\nconst exportExcelTemplate = () => {\r\n  let str\r\n  str = props.column.map((item) => item.name)\r\n  str = 'id,' + str.join(',') + '\\n'\r\n  tableToExcel(str, [], [], t('template_name_excel'))\r\n}\r\n\r\nconst exportJsonTemplate = () => {\r\n  let datas = {\r\n    id: ''\r\n  }\r\n  props.column.forEach((item) => {\r\n    datas[item.name] = ''\r\n  })\r\n  exportToJsonWithSaver([datas], t('template_name_json'))\r\n}\r\n\r\nconst show = () => {\r\n  fileList.value = []\r\n  open.value = true\r\n}\r\nconst handleOk = () => {}\r\n\r\nconst resultOpen = ref(false)\r\n\r\nconst percent = ref(10)\r\n\r\nconst downFailData = () => {\r\n  let str = 'id,'\r\n  let fieds = ['id']\r\n  for (let key in resultInfo.err_data[0]) {\r\n    if (key != 'id' && key != 'err_msg') {\r\n      str += key + ','\r\n      fieds.push(key)\r\n    }\r\n  }\r\n  str = str + 'err_msg\\n'\r\n  fieds.push('err_msg')\r\n  let jsonData = resultInfo.err_data\r\n  let name = t('fail_data_name') + dayjs().format('YYYY/MM/DD HH:mm') + '.xlsx'\r\n  tableToExcel(str, jsonData, fieds, name)\r\n}\r\n\r\ndefineExpose({\r\n  show\r\n})\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.alert-box {\r\n  align-items: baseline;\r\n}\r\n.mr8 {\r\n  margin-right: 8px;\r\n}\r\n\r\n.upload-box {\r\n  padding: 24px;\r\n}\r\n\r\n.progress-box {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 16px;\r\n  margin: 100px 0;\r\n  color: #8c8c8c;\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"loading-box\" v-if=\"pageLoading\">\r\n    <a-spin></a-spin>\r\n  </div>\r\n  <div class=\"empty-box\" v-if=\"!pageLoading && !column.length\">\r\n    <img src=\"@/assets/img/library/preview/empty.png\" alt=\"\" />\r\n    <div>{{ t('empty_no_fields') }}</div>\r\n  </div>\r\n  <div class=\"field-manage-page\" v-if=\"!pageLoading && column.length\">\r\n    <div class=\"page-title\">\r\n      {{ t('title') }}\r\n      <a-flex :gap=\"16\">\r\n        <a-button type=\"primary\" @click=\"handleAddData()\">\r\n          <template #icon>\r\n            <PlusOutlined />\r\n          </template>\r\n          {{ t('btn_add_data') }}\r\n        </a-button>\r\n        <a-button @click=\"handleImportData()\">\r\n          <template #icon>\r\n            <DownloadOutlined />\r\n          </template>\r\n          {{ t('btn_import_data') }}\r\n        </a-button>\r\n        <a-dropdown>\r\n          <template #overlay>\r\n            <a-menu>\r\n              <a-menu-item key=\"1\"><div @click=\"handleOpenExportModal\">{{ t('menu_export_data') }}</div></a-menu-item>\r\n              <a-menu-item key=\"2\"><div @click=\"handleClearData\">{{ t('menu_clear_data') }}</div></a-menu-item>\r\n            </a-menu>\r\n          </template>\r\n          <a-button>\r\n            {{ t('btn_more_actions') }}\r\n            <DownOutlined />\r\n          </a-button>\r\n        </a-dropdown>\r\n      </a-flex>\r\n    </div>\r\n    <a-tabs\r\n      class=\"tabs-wrapper\"\r\n      v-model:activeKey=\"activeKey\"\r\n      type=\"editable-card\"\r\n      @edit=\"onEditTabs\"\r\n      @change=\"handleChangeTab\"\r\n    >\r\n      <a-tab-pane key=\"\" :closable=\"false\">\r\n        <template #tab>{{ t('tab_all', { count: allCount }) }}</template>\r\n      </a-tab-pane>\r\n      <a-tab-pane v-for=\"pane in panes\" :key=\"pane.id\" :closable=\"false\">\r\n        <template #tab>\r\n          <span v-if=\"pane.name.length > 8\">\r\n            <a-tooltip>\r\n              <template #title>{{ pane.name }}</template>\r\n              {{ pane.name.slice(0, 8) + '...' }}\r\n            </a-tooltip>\r\n          </span>\r\n          <span v-else>{{ pane.name }} </span>\r\n          ({{ pane.entry_count }})</template\r\n        >\r\n      </a-tab-pane>\r\n      <template #addIcon> <PlusOutlined /> {{ t('tab_add_category') }} </template>\r\n      <template #rightExtra>\r\n        <span class=\"setting-btn\" @click=\"handleOpenManageModal\">\r\n          <SettingOutlined />\r\n          {{ t('btn_manage_category') }}\r\n        </span>\r\n      </template>\r\n    </a-tabs>\r\n    <div class=\"table-wrapper customize-scroll-style\">\r\n      <a-table\r\n        sticky\r\n        :data-source=\"data\"\r\n        :loading=\"loading\"\r\n        :scroll=\"{ x: 1000 }\"\r\n        :pagination=\"{\r\n          current: queryParams.page,\r\n          total: queryParams.total,\r\n          pageSize: queryParams.size,\r\n          showQuickJumper: true,\r\n          showSizeChanger: true,\r\n          pageSizeOptions: ['10', '20', '50', '100']\r\n        }\"\r\n        @change=\"onTableChange\"\r\n      >\r\n        <a-table-column key=\"id\" data-index=\"id\" :title=\"t('column_id_title')\" :width=\"60\">\r\n        </a-table-column>\r\n        <a-table-column\r\n          v-for=\"item in column\"\r\n          :key=\"item.name\"\r\n          :data-index=\"item.name\"\r\n          :width=\"165\"\r\n        >\r\n          <template #title>\r\n            <span v-if=\"item.name.length > 12\">\r\n              <a-tooltip>\r\n                <template #title>{{ item.name }}</template>\r\n                {{ item.name.slice(0, 12) + '...' }}\r\n              </a-tooltip>\r\n            </span>\r\n            <span v-else>{{ item.name }} </span>\r\n            <a-tooltip>\r\n              <template #title>{{ item.description }}</template>\r\n              <QuestionCircleOutlined style=\"margin-left: 2px\" />\r\n            </a-tooltip>\r\n          </template>\r\n          <template #default=\"{ record }\">\r\n            <span v-if=\"record[item.name].length > 10\">\r\n              <a-tooltip>\r\n                <template #title>{{ record[item.name] }}</template>\r\n                {{ record[item.name].slice(0, 9) + '...' }}\r\n              </a-tooltip>\r\n            </span>\r\n            <span v-else>{{ record[item.name] || '-' }} </span>\r\n          </template>\r\n        </a-table-column>\r\n        <a-table-column key=\"action\" :title=\"t('column_action_title')\" :width=\"120\" fixed=\"right\">\r\n          <template #default=\"{ record }\">\r\n            <span>\r\n              <a @click=\"handleAddData(record)\">{{ t('action_edit') }}</a>\r\n              <a-divider type=\"vertical\" />\r\n              <a @click=\"onDelete(record)\">{{ t('action_delete') }}</a>\r\n            </span>\r\n          </template>\r\n        </a-table-column>\r\n      </a-table>\r\n    </div>\r\n\r\n    <AddDataModal @ok=\"handleManageOkBack\" :column=\"column\" ref=\"addDataModalRef\"></AddDataModal>\r\n    <AddFilrerModal\r\n      @ok=\"handleManageOkBack\"\r\n      :column=\"column\"\r\n      ref=\"addFilrerModalRef\"\r\n    ></AddFilrerModal>\r\n    <ExportModal ref=\"exportModalRef\"></ExportModal>\r\n    <FilterManageModal\r\n      @ok=\"getData\"\r\n      @change=\"getSortLists\"\r\n      :column=\"column\"\r\n      ref=\"filterManageModalRef\"\r\n    ></FilterManageModal>\r\n    <ImportDataModal @ok=\"onSearch\" :column=\"column\" ref=\"importDataModalRef\" />\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport {\r\n  PlusOutlined,\r\n  QuestionCircleOutlined,\r\n  DownOutlined,\r\n  SettingOutlined,\r\n  ExclamationCircleOutlined,\r\n  DownloadOutlined\r\n} from '@ant-design/icons-vue'\r\nimport { ref, reactive, createVNode, computed } from 'vue'\r\nimport { message, Modal } from 'ant-design-vue'\r\nimport { useRoute } from 'vue-router'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\nimport AddDataModal from './components/add-data-modal.vue'\r\nimport ExportModal from './components/export-modal.vue'\r\nimport AddFilrerModal from './components/add-filter-modal.vue'\r\nimport FilterManageModal from './components/filter-manage-modal.vue'\r\nimport { useDatabaseStore } from '@/stores/modules/database'\r\nimport ImportDataModal from './components/import-data-modal.vue'\r\nimport {\r\n  getFormFieldList,\r\n  getFormEntryList,\r\n  delFormEntry,\r\n  emptyFormEntry,\r\n  getFormFilterList\r\n} from '@/api/database'\r\n\r\nconst { t } = useI18n('views.database.database-detail.database-manage.index')\r\n\r\nconst databaseStore = useDatabaseStore()\r\nconst allCount = computed(() => {\r\n  return databaseStore.databaseInfo.entry_count\r\n})\r\nconst rotue = useRoute()\r\nconst query = rotue.query\r\n\r\nconst data = ref([])\r\nconst column = ref([])\r\nconst pageLoading = ref(true)\r\n\r\nconst queryParams = reactive({\r\n  form_id: query.form_id,\r\n  page: 1,\r\n  size: 10,\r\n  total: 0\r\n})\r\n\r\nconst loading = ref(false)\r\nconst onTableChange = (pagination) => {\r\n  queryParams.page = pagination.current\r\n  queryParams.size = pagination.pageSize\r\n  getData()\r\n}\r\nconst onSearch = () => {\r\n  queryParams.page = 1\r\n  getData()\r\n}\r\nconst getData = () => {\r\n  loading.value = true\r\n  getFormEntryList({ ...queryParams, filter_id: activeKey.value })\r\n    .then((res) => {\r\n      data.value = res.data.list || []\r\n      queryParams.total = +res.data.total || 0\r\n      databaseStore.getDatabaseInfo({ id: query.form_id })\r\n    })\r\n    .finally(() => {\r\n      loading.value = false\r\n    })\r\n}\r\n\r\ngetFormFieldList({ form_id: query.form_id }).then((res) => {\r\n  column.value = res.data\r\n  pageLoading.value = false\r\n  getData()\r\n})\r\n\r\nconst panes = ref([])\r\n\r\nconst activeKey = ref('')\r\nconst getSortLists = () => {\r\n  getFormFilterList({ form_id: query.form_id }).then((res) => {\r\n    let lists = res.data || []\r\n    panes.value = lists.filter((item) => item.enabled == 'true')\r\n    if (activeKey.value) {\r\n      // 判断选中的该分类是否被禁用 被禁用的话更换选中分类\r\n      let activeItem = lists.filter((item) => item.id == activeKey.value)\r\n      if ((activeItem.length && activeItem[0].enabled == 'false') || !activeItem.length) {\r\n        activeKey.value = ''\r\n        getData()\r\n      }\r\n    }\r\n  })\r\n}\r\ngetSortLists()\r\n\r\nconst handleManageOkBack = () => {\r\n  getSortLists()\r\n  getData()\r\n}\r\n\r\nconst handleChangeTab = () => {\r\n  queryParams.page = 1\r\n  getData()\r\n}\r\n\r\nconst addFilrerModalRef = ref(null)\r\nconst onEditTabs = (targetKey, action) => {\r\n  if (action === 'add') {\r\n    // add()\r\n    addFilrerModalRef.value.show()\r\n  }\r\n}\r\n\r\nconst onDelete = (record) => {\r\n  Modal.confirm({\r\n    title: t('modal_delete_title'),\r\n    icon: createVNode(ExclamationCircleOutlined),\r\n    content: t('modal_delete_content'),\r\n    okText: t('modal_delete_ok'),\r\n    okType: 'danger',\r\n    cancelText: t('modal_delete_cancel'),\r\n    onOk() {\r\n      delFormEntry({ id: record.id }).then((res) => {\r\n        message.success(t('msg_delete_success'))\r\n        handleManageOkBack()\r\n      })\r\n    },\r\n    onCancel() {}\r\n  })\r\n}\r\nconst handleClearData = () => {\r\n  Modal.confirm({\r\n    title: t('modal_clear_title'),\r\n    icon: createVNode(ExclamationCircleOutlined),\r\n    content: t('modal_clear_content'),\r\n    okText: t('modal_clear_ok'),\r\n    okType: 'danger',\r\n    cancelText: t('modal_clear_cancel'),\r\n    onOk() {\r\n      emptyFormEntry({ form_id: query.form_id }).then((res) => {\r\n        message.success(t('msg_clear_success'))\r\n        handleManageOkBack()\r\n      })\r\n    },\r\n    onCancel() {}\r\n  })\r\n}\r\nconst addDataModalRef = ref(null)\r\nconst handleAddData = (data = {}) => {\r\n  addDataModalRef.value.show(JSON.parse(JSON.stringify(data)))\r\n}\r\n\r\nconst importDataModalRef = ref(null)\r\nconst handleImportData = (data = {}) => {\r\n  importDataModalRef.value.show()\r\n}\r\n\r\nconst exportModalRef = ref(null)\r\nconst handleOpenExportModal = () => {\r\n  exportModalRef.value.show()\r\n}\r\n\r\nconst filterManageModalRef = ref(null)\r\nconst handleOpenManageModal = () => {\r\n  filterManageModalRef.value.show()\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.loading-box {\r\n  padding-top: 300px;\r\n  text-align: center;\r\n}\r\n.empty-box {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  flex-direction: column;\r\n  padding-top: 100px;\r\n  color: #8c8c8c;\r\n  img {\r\n    width: 300px;\r\n  }\r\n}\r\n.field-manage-page {\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  .page-title {\r\n    display: flex;\r\n    align-items: center;\r\n    background-color: #fff;\r\n    color: #000000;\r\n    font-size: 16px;\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    line-height: 24px;\r\n    justify-content: space-between;\r\n    padding-right: 24px;\r\n  }\r\n  .table-wrapper {\r\n    margin-top: 10px;\r\n    padding-right: 24px;\r\n    flex: 1;\r\n    overflow: auto;\r\n  }\r\n  .tabs-wrapper {\r\n    margin-top: 24px;\r\n    padding-right: 24px;\r\n  }\r\n  .setting-btn {\r\n    color: #333;\r\n    cursor: pointer;\r\n  }\r\n  ::v-deep(.ant-tabs-nav-add) {\r\n    min-width: 100px !important;\r\n  }\r\n  ::v-deep(.ant-tabs-extra-content) {\r\n    margin-left: 8px;\r\n  }\r\n  ::v-deep(.ant-table-sticky-scroll) {\r\n    opacity: 0;\r\n  }\r\n}\r\n</style>\r\n"],"names":["t","useI18n","modalTitle","ref","query","useRoute","emit","__emit","props","__props","watch","val","formatField","fieldLists","lists","item","formState","isValidatorInteger","rule","value","resolve","reject","open","reactive","show","data","formRef","convertNumberStringsToObjectNumbers","handleOk","res","addFormEntry","tip","message","obj","newObj","key","__expose","_openBlock","_createElementBlock","_hoisted_1","_createVNode","_component_a_modal","$event","_component_a_form","_Fragment","_renderList","_createBlock","_component_a_form_item","_component_a_flex","_createElementVNode","_hoisted_2","_toDisplayString","_component_a_tooltip","_createTextVNode","_unref","QuestionCircleOutlined","_component_a_switch","_component_a_input_number","_component_a_input","formRules","useForm","Form","resetFields","validate","validateInfos","parmas","exportFormEntry","_component_a_radio_group","_cache","_component_a_radio","_withDirectives","_mergeProps","_component_a_range_picker","_vShow","formatConditions","condition","removeItem","index","handleChangeFiled","i","isDisabled","filed","handleAddItem","hasAddId","canAddItem","is_show_rule_value1","is_show_rule_value2","validatorItem1","isNumberOrNumberString","validatorItem2","edit","getFormFilterInfo","conditions","removePrefix","inputString","prefixes","prefix","filterFormRef","methodUrl","addFormFilter","editFormFilter","err","ruleOptions","_hoisted_3","_component_a_space","_component_a_select","_component_a_select_option","MinusCircleOutlined","_hoisted_4","_component_a_button","getSortLists","getFormFilterList","handleEditBack","handleClose","onDragEnd","filter_sort","updateFormFilterSort","handleChangeEnabled","record","updateFormFilterEnabled","onDelete","Modal","createVNode","ExclamationCircleOutlined","delFormFilter","addFilrerModalRef","handleOpenAddModal","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","draggable","_withCtx","element","_hoisted_12","_hoisted_13","_component_svg_icon","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_component_a_divider","_hoisted_20","AddFilrerModal","userStore","useUserStore","confirmLoading","resultInfo","fileList","handleChange","info","status","task_id","getProgressInfo","handleDrop","e","timer","resultOpen","percent","getUploadFormFileProc","exportExcelTemplate","str","tableToExcel","exportJsonTemplate","datas","exportToJsonWithSaver","downFailData","fieds","jsonData","name","dayjs","_component_a_alert","_component_a_upload_dragger","InboxOutlined","_component_a_progress","_component_a_result","databaseStore","useDatabaseStore","allCount","computed","column","pageLoading","queryParams","loading","onTableChange","pagination","getData","onSearch","getFormEntryList","activeKey","getFormFieldList","panes","activeItem","handleManageOkBack","handleChangeTab","onEditTabs","targetKey","action","delFormEntry","handleClearData","emptyFormEntry","addDataModalRef","handleAddData","importDataModalRef","handleImportData","exportModalRef","handleOpenExportModal","filterManageModalRef","handleOpenManageModal","_component_a_spin","_imports_0","PlusOutlined","DownloadOutlined","_component_a_dropdown","_component_a_menu","_component_a_menu_item","DownOutlined","_component_a_tabs","SettingOutlined","_component_a_tab_pane","pane","_component_a_table","_component_a_table_column","AddDataModal","ExportModal","FilterManageModal","ImportDataModal"],"mappings":"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"}