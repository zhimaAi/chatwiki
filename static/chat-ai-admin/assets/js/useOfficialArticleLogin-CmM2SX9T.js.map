{"version":3,"file":"useOfficialArticleLogin-CmM2SX9T.js","sources":["../../../../front-end/chat-ai-admin-vue/src/views/explore/plugins/components/feishu-config-modal.vue","../../../../front-end/chat-ai-admin-vue/src/views/explore/plugins/components/plugin-config-modal.vue","../../../../front-end/chat-ai-admin-vue/src/composables/useOfficialArticleLogin.js"],"sourcesContent":["<template>\r\n  <a-modal\r\n    v-model:open=\"configOpen\"\r\n    :confirm-loading=\"configSaving\"\r\n    :title=\"t('title_api_key_auth_config')\"\r\n    width=\"620px\"\r\n    @ok=\"saveConfig\"\r\n  >\r\n    <a-alert type=\"info\" show-icon :message=\"t('msg_config_workflow_call')\"/>\r\n    <a-form\r\n      class=\"mt16\"\r\n      :model=\"config\"\r\n      :label-col=\"{ span: 4 }\"\r\n      :wrapper-col=\"{ span: 20 }\"\r\n    >\r\n      <a-form-item\r\n        :label=\"t('label_credential_name')\"\r\n        name=\"name\"\r\n        :rules=\"[{ required: true, message: t('msg_input_credential_name') }]\"\r\n      >\r\n        <a-input v-model:value.trim=\"config.name\" :maxlength=\"16\" :placeholder=\"t('ph_input_credential_name')\"/>\r\n        <div class=\"tip-desc\">{{ t('msg_credential_name_desc') }}</div>\r\n      </a-form-item>\r\n      <a-form-item\r\n        :label=\"t('label_app_id')\"\r\n        name=\"appid\"\r\n        :rules=\"[{ required: true, message: t('msg_input_app_id') }]\"\r\n      >\r\n        <a-input v-model:value.trim=\"config.appid\" :placeholder=\"t('ph_input_app_id')\"/>\r\n      </a-form-item>\r\n      <a-form-item\r\n        :label=\"t('label_app_secret')\"\r\n        name=\"app_secret\"\r\n        :rules=\"[{ required: true, message: t('msg_input_app_secret') }]\"\r\n      >\r\n        <a-input v-model:value.trim=\"config.app_secret\" :placeholder=\"t('ph_input_app_secret')\"/>\r\n        <div class=\"tip-desc\">{{ t('msg_how_to_get_app_id_secret') }}</div>\r\n      </a-form-item>\r\n    </a-form>\r\n  </a-modal>\r\n</template>\r\n\r\n<script setup>\r\nimport {ref, reactive} from 'vue';\r\nimport {setPluginConfig} from \"@/api/plugins/index.js\";\r\nimport {message} from 'ant-design-vue';\r\nimport { useI18n } from '@/hooks/web/useI18n';\r\n\r\nconst { t } = useI18n('views.explore.plugins.components.feishu-config-modal')\r\nconst emit = defineEmits(['change'])\r\nconst configData = ref({})\r\nconst configOpen = ref(false)\r\nconst configSaving = ref(false)\r\nconst config = reactive({})\r\n\r\nfunction show(cData = {}) {\r\n  configData.value = cData\r\n  Object.assign(config, {\r\n    name: '',\r\n    appid: '',\r\n    app_secret: '',\r\n    is_default: false\r\n  })\r\n  // 首次添加设置默认\r\n  if (!configData.value || !Object.keys(configData.value).length) config.is_default = true\r\n  configOpen.value = true\r\n}\r\n\r\nfunction saveConfig() {\r\n  try {\r\n    configSaving.value = true\r\n    if (!config.name) throw t('msg_input_credential_name')\r\n    if (configData.value[config.name]) throw t('msg_credential_name_exists')\r\n    if (!config.appid) throw t('msg_input_app_id')\r\n    if (!config.app_secret) throw t('msg_input_app_secret')\r\n    setPluginConfig({\r\n      name: 'feishu_bitable',\r\n      data: JSON.stringify({\r\n        ...configData.value,\r\n        [config.name]: config\r\n      })\r\n    }).then(res => {\r\n      emit('change')\r\n      configOpen.value = false\r\n      message.success(t('msg_saved'))\r\n    }).finally(() => {\r\n      configSaving.value = false\r\n    })\r\n  } catch (e) {\r\n    console.log('Err:', e)\r\n    configSaving.value = false\r\n    message.error(e)\r\n  }\r\n}\r\n\r\ndefineExpose({\r\n  show\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.tip-desc {\r\n  color: #8C8C8C;\r\n  margin-top: 4px;\r\n}\r\n\r\n.mt16 {\r\n  margin-top: 16px;\r\n}\r\n</style>\r\n","<template>\r\n  <a-modal\r\n    v-model:open=\"configOpen\"\r\n    :confirm-loading=\"configSaving\"\r\n    :title=\"t('title_api_key_auth_config')\"\r\n    width=\"620px\"\r\n    @ok=\"saveConfig\"\r\n  >\r\n    <a-alert type=\"info\" show-icon :message=\"t('msg_config_workflow_tip')\"/>\r\n    <a-form\r\n      class=\"mt16\"\r\n      :model=\"config\"\r\n      :label-col=\"{ span: 4 }\"\r\n      :wrapper-col=\"{ span: 20 }\"\r\n    >\r\n      <a-form-item\r\n        :label=\"t('label_credential_name')\"\r\n        name=\"name\"\r\n        :rules=\"[{ required: true, message: t('msg_please_input_credential_name') }]\"\r\n      >\r\n        <a-input v-model:value.trim=\"config.name\" :maxlength=\"16\" :placeholder=\"t('ph_input_credential_name')\"/>\r\n        <div class=\"tip-desc\">{{ t('msg_credential_name_desc') }}</div>\r\n      </a-form-item>\r\n      <template v-for=\"field in fields\" :key=\"field.key\">\r\n        <a-form-item\r\n          :label=\"field.name || field.key\"\r\n          :name=\"field.key\"\r\n          :rules=\"field.required ? [{ required: true, message: t('msg_please_input_field', { field: field.name || field.key }) }] : []\"\r\n        >\r\n          <div style=\"display:flex; align-items:center; gap:8px;\">\r\n            <a-input v-model:value.trim=\"config[field.key]\" :placeholder=\"field.placeholder || ''\"/>\r\n            <a style=\"flex-shrink:0;\" v-if=\"field.click_url\" :href=\"field.click_url\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n              {{ field.click_title || t('btn_get') }}\r\n            </a>\r\n          </div>\r\n          <div class=\"tip-desc\" v-if=\"field.tip\">{{ field.tip }}</div>\r\n          <div class=\"tip-desc\" v-else-if=\"field.desc\">{{ field.desc }}</div>\r\n        </a-form-item>\r\n      </template>\r\n    </a-form>\r\n  </a-modal>\r\n</template>\r\n\r\n<script setup>\r\nimport {ref, reactive} from 'vue';\r\nimport {setPluginConfig} from \"@/api/plugins/index.js\";\r\nimport {message} from 'ant-design-vue';\r\nimport { useI18n } from '@/hooks/web/useI18n';\r\n\r\nconst { t } = useI18n('views.explore.plugins.components.plugin-config-modal');\r\n\r\nconst emit = defineEmits(['change'])\r\nconst configData = ref({})\r\nconst pluginName = ref('')\r\nconst schemaData = ref({})\r\nconst configOpen = ref(false)\r\nconst configSaving = ref(false)\r\nconst config = reactive({})\r\nconst fields = ref([])\r\n\r\nfunction sanitize(s) {\r\n  return String(s || '').replace(/`/g, '').trim()\r\n}\r\nfunction buildFields(schema) {\r\n  const list = []\r\n  Object.keys(schema || {}).forEach((act) => {\r\n    const meta = schema[act] || {}\r\n    if (meta && meta.use_plugin_config === true) {\r\n      const params = meta.params || {}\r\n      Object.keys(params).forEach((k) => {\r\n        const p = params[k] || {}\r\n        if (p.plugin_config_component === true) {\r\n          list.push({\r\n            key: k,\r\n            name: p.name,\r\n            desc: p.desc,\r\n            tip: p.tip,\r\n            required: !!p.required,\r\n            placeholder: p.placeholder,\r\n            click_title: sanitize(p.click_title),\r\n            click_url: sanitize(p.click_url)\r\n          })\r\n        }\r\n      })\r\n    }\r\n  })\r\n  // 去重\r\n  const seen = new Set()\r\n  fields.value = list.filter((f) => {\r\n    if (seen.has(f.key)) return false\r\n    seen.add(f.key)\r\n    return true\r\n  }).sort((a, b) => (+(schema?.[a.key]?.sort_num || 0)) - (+(schema?.[b.key]?.sort_num || 0)))\r\n}\r\n\r\nfunction show(cData = {}, name = '', schema = {}) {\r\n  configData.value = cData\r\n  pluginName.value = name\r\n  schemaData.value = schema\r\n  Object.keys(config).forEach((k) => delete config[k])\r\n  Object.assign(config, {\r\n    name: '',\r\n    is_default: false\r\n  })\r\n  if (!configData.value || !Object.keys(configData.value).length) config.is_default = true\r\n  buildFields(schemaData.value)\r\n  fields.value.forEach((f) => {\r\n    config[f.key] = ''\r\n  })\r\n  configOpen.value = true\r\n}\r\n\r\nfunction saveConfig() {\r\n  try {\r\n    configSaving.value = true\r\n    if (!config.name) throw t('msg_please_input_credential_name')\r\n    if (configData.value[config.name]) throw t('msg_credential_name_exists')\r\n    // 校验必填字段\r\n    fields.value.forEach((f) => {\r\n      const v = String(config[f.key] || '').trim()\r\n      if (f.required && !v) {\r\n        throw t('msg_please_input_field', { field: f.name || f.key })\r\n      }\r\n    })\r\n    setPluginConfig({\r\n      name: pluginName.value,\r\n      data: JSON.stringify({\r\n        ...configData.value,\r\n        [config.name]: config\r\n      })\r\n    }).then(() => {\r\n      emit('change')\r\n      configOpen.value = false\r\n      message.success(t('msg_saved'))\r\n    }).finally(() => {\r\n      configSaving.value = false\r\n    })\r\n  } catch (e) {\r\n    configSaving.value = false\r\n    message.error(String(e || t('msg_config_save_failed')))\r\n  }\r\n}\r\n\r\ndefineExpose({\r\n  show\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.tip-desc {\r\n  color: #8C8C8C;\r\n  margin-top: 4px;\r\n}\r\n\r\n.mt16 {\r\n  margin-top: 16px;\r\n}\r\n</style>\r\n","import { ref, onMounted } from 'vue'\r\nimport {runPlugin} from \"@/api/plugins/index.js\";\r\nimport {useUserStore} from \"@/stores/modules/user.js\";\r\n\r\nexport function useOfficialArticleLogin(autoInit = true) {\r\n  const userStore = useUserStore()\r\n\r\n  const loginInfo = ref({})\r\n  const loginStatus = ref(false)\r\n  const loading = ref(false)\r\n  const qrcodeUrl = ref('')\r\n  const loginUrl = ref('')\r\n\r\n  // 开源版本仅支持admin\r\n  //const getUsername = () => userStore?.userInfo?.user_id\r\n  const getUsername = () => 'admin'\r\n\r\n  async function init() {\r\n    await register()\r\n    await getLoginStatus()\r\n    getLoginUrl()\r\n  }\r\n\r\n  async function register() {\r\n    const username = getUsername()\r\n    return runPlugin({\r\n      name: 'official_article',\r\n      action: 'default/exec',\r\n      params: JSON.stringify({\r\n        business: 'register',\r\n        arguments: { username }\r\n      })\r\n    })\r\n  }\r\n\r\n  async function getLoginStatus() {\r\n    const username = getUsername()\r\n    try {\r\n      const res = await runPlugin({\r\n        name: 'official_article',\r\n        action: 'default/exec',\r\n        params: JSON.stringify({\r\n          business: 'get_login_status',\r\n          arguments: { username }\r\n        })\r\n      })\r\n\r\n      loginStatus.value = !!res?.data?.online\r\n      loginInfo.value = res?.data || {}\r\n    } finally {\r\n      setTimeout(() => {\r\n        loading.value = false\r\n      }, 1200)\r\n    }\r\n  }\r\n\r\n  function refresh() {\r\n    if (loading.value) return\r\n    loading.value = true\r\n    getLoginStatus()\r\n  }\r\n\r\n  // 云版\r\n  async function getLoginQrcode() {\r\n    const username = getUsername()\r\n    const {data} = await runPlugin({\r\n      name: 'official_article',\r\n      action: 'default/exec',\r\n      params: JSON.stringify({\r\n        business: 'wechat_qrcode_login',\r\n        arguments: { username }\r\n      })\r\n    })\r\n    qrcodeUrl.value = data?.qrcode_base64 || ''\r\n  }\r\n\r\n  // 开源版\r\n  async function getLoginUrl() {\r\n    const username = getUsername()\r\n    const {data} = await runPlugin({\r\n      name: 'official_article',\r\n      action: 'default/exec',\r\n      params: JSON.stringify({\r\n        business: 'get_login_url',\r\n        arguments: { username }\r\n      })\r\n    })\r\n    loginUrl.value = data?.url\r\n  }\r\n\r\n  if (autoInit) {\r\n    onMounted(init)\r\n  }\r\n\r\n  async function goLogin() {\r\n    if (!loginUrl.value) await getLoginUrl()\r\n    window.open(loginUrl.value)\r\n  }\r\n\r\n  return {\r\n    loginInfo,\r\n    loginStatus,\r\n    loginUrl,\r\n    qrcodeUrl,\r\n    loading,\r\n    init,\r\n    refresh,\r\n    goLogin,\r\n    getLoginUrl,\r\n    getLoginQrcode\r\n  }\r\n}\r\n"],"names":["t","useI18n","emit","__emit","configData","ref","configOpen","configSaving","config","reactive","show","cData","saveConfig","setPluginConfig","res","message","e","__expose","_createBlock","_component_a_modal","$event","_unref","_createVNode","_component_a_alert","_component_a_form","_component_a_form_item","_component_a_input","_cache","_createElementVNode","_hoisted_1","_toDisplayString","_hoisted_2","pluginName","schemaData","fields","sanitize","s","buildFields","schema","list","act","meta","params","k","p","seen","f","a","b","_a","_b","name","v","_createElementBlock","_Fragment","_renderList","field","_hoisted_3","_openBlock","_hoisted_4","_hoisted_5","useOfficialArticleLogin","autoInit","useUserStore","loginInfo","loginStatus","loading","qrcodeUrl","loginUrl","getUsername","init","register","getLoginStatus","getLoginUrl","username","runPlugin","refresh","getLoginQrcode","data","onMounted","goLogin"],"mappings":"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"}