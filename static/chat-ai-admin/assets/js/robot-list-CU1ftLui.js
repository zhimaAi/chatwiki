import{_ as Z,c as nt,a5 as le,a6 as Oe,a7 as Ie,a8 as ue,a9 as Be,f as lt,o as at,p as it,aa as ut,ab as dt,ac as ct,d as rt,ad as _t}from"../../index-C5-B0r5-.js";import{_ as pt}from"./cu-scroll-C_QJcxx1.js";import{f as r,ae as N,ad as a,ar as o,as as e,k as t,G as A,u as O,r as Le,ac as v,F as j,ax as Y,at as M,az as Q,ai as de,o as fe,l as re,B as q,av as Fe,aw as qe,e as Ge}from"./vue-chunks-CGLjTDrY.js";import{d as vt}from"./vuedraggable.umd-u2TvJqwU.js";import{i as ft,j as ze,k as mt,g as Ne,l as kt,m as ht,n as bt,o as gt}from"./index-AgSL8KLK.js";import{A as Ve,a as yt,b as $t}from"./add-group-CjnR-f-1.js";import{o as We,aw as xt,ax as Ct,M as V,b as S,u as wt,y as Mt,z as Tt,F as je,e as He,I as me,$ as Je,V as Rt,a9 as Ke,al as ke,ai as Pt,Q as St,a6 as ve,B as pe,ar as _e,h as he,i as be,k as ge,J as Ot,a2 as It,as as Lt,ae as Ut,ay as At,az as Dt,aA as Et,O as Gt,at as Bt,v as Ft,an as qt,a0 as zt,aB as Nt,R as Vt,W as Re}from"./ui-antd-B11sc9DP.js";import{_ as Wt}from"./page-alert-NlbsKG4S.js";import{L as jt}from"./list-tabs-QMUGd4nq.js";import{_ as Pe}from"./empty-BFmzY9bl.js";import{_ as Ht}from"./no-permission-DtJ3NYHG.js";import{_ as Jt}from"./tool-icon-IWVrYlVb.js";import{a as Se,g as Kt,s as Qt,b as Yt,d as Zt}from"./thirdMcp-DUEdPcdt.js";import"./neo4j-Bk0ySkcX.js";import"./utils-BH-4gQMj.js";import"./other-BrZCAsTs.js";import"./pull-up.esm-DIiTC7VE.js";import"./observe-dom.esm-B25JyVKH.js";import"./vue-pdf-embed-DYPuxmVf.js";import"./index-Btdd0zUd.js";import"./robot-jPE-s270.js";const Xt={class:"form-box"},eo={class:"tip-box"},to={class:"ant-upload-drag-icon"},oo={__name:"import-csl-alert",emits:["ok"],setup(L,{expose:G,emit:U}){const w=U,f=r(!1),l=r(!1),b=r([]),d=()=>{f.value=!0},h=()=>{f.value=!1,b.value=[]},T=()=>{if(b.value.length===0){S.error("请上传csl文件");return}l.value=!0,ft({file:b.value[0].originFileObj}).then(g=>{l.value=!1,f.value=!1,S.success("导入成功"),b.value=[],w("ok",g.data)}).catch(()=>{l.value=!1})},m=g=>g.name.endsWith(".csl")?!1:(S.error("只能上传csl格式的文件"),wt.LIST_IGNORE),n=g=>{const{status:_}=g.file;_!=="uploading"&&(g.file,g.fileList)};return G({open:d}),(g,_)=>{const R=We,s=Ct,C=V;return a(),N(C,{width:"600px",open:f.value,"onUpdate:open":_[1]||(_[1]=y=>f.value=y),confirmLoading:l.value,title:"导入csl文件创建机器人",onOk:T,onCancel:h},{default:o(()=>[e("div",Xt,[e("div",eo,[t(R,{type:"info"},{description:o(()=>[..._[2]||(_[2]=[A(" 您可以将您编排好的机器人导出为csl文件,共享给他人使用。也可以从他人处获取导出的csl文件,通过导入形式创建机器人。 ",-1)])]),_:1})]),t(s,{fileList:b.value,"onUpdate:fileList":_[0]||(_[0]=y=>b.value=y),name:"file",multiple:!1,maxCount:1,accept:".csl","before-upload":m,onChange:n},{default:o(()=>[e("p",to,[t(O(xt),{class:"upload-icon"})]),_[3]||(_[3]=e("p",{class:"upload-text"},"点击或将文件拖拽到这里上传",-1)),_[4]||(_[4]=e("p",{class:"upload-hint"},"仅支持从chatwiki导出生成的csl文件",-1))]),_:1},8,["fileList"])])]),_:1},8,["open","confirmLoading"])}}},so=Z(oo,[["__scopeId","data-v-5b3f5182"]]),no={class:"form-item"},lo={class:"form-content"},ao={__name:"edit-group",emits:["ok"],setup(L,{expose:G,emit:U}){const w=r(!1),f=U,l=r("修改分组"),b=Le({group_id:"",robot_id:""}),d=r([]),h=n=>{b.group_id=n.group_id||"0",b.robot_id=n.id||"",m(),w.value=!0},T=()=>{if(!b.group_id)return S.error("请选择分组");mt({...b}).then(n=>{S.success(`${l.value}成功`),w.value=!1,f("ok")})},m=()=>{ze().then(n=>{d.value=n.data||[]})};return G({show:h}),(n,g)=>{const _=Tt,R=Mt,s=V;return a(),v("div",null,[t(s,{open:w.value,"onUpdate:open":g[1]||(g[1]=C=>w.value=C),title:l.value,onOk:T},{default:o(()=>[e("div",no,[g[2]||(g[2]=e("div",{class:"form-label"},"分组名称：",-1)),e("div",lo,[t(R,{value:b.group_id,"onUpdate:value":g[0]||(g[0]=C=>b.group_id=C),style:{width:"100%"},placeholder:"请选择分组"},{default:o(()=>[(a(!0),v(j,null,Y(d.value,C=>(a(),N(_,{value:C.id},{default:o(()=>[A(M(C.group_name),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"])])])]),_:1},8,["open","title"])])}}},io=Z(ao,[["__scopeId","data-v-5ebd311c"]]),uo=()=>{const L=nt();return{openUrlWithToken:U=>{const w=L.getToken;if(!w){console.warn("Token is missing");return}if(!U){console.warn("URL is missing");return}const f=U.includes("?")?"&":"?",l=`${U}${f}token=${w}`;window.open(l,"_blank")}}};function co(L={}){return le.get({url:"/manage/getMcpServerList",params:L})}function ro(L={}){return le.post({headers:{"Content-Type":"multipart/form-data"},url:"/manage/saveMcpServer",data:L})}function _o(L={}){return le.post({url:"/manage/deleteMcpServer",data:L})}function po(L={}){return le.post({url:"/manage/updateMcpServerPublishStatus",data:L})}function vo(L={}){return le.post({url:"/manage/saveMcpTool",data:L})}function fo(L={}){return le.post({url:"/manage/editMcpTool",data:L})}function mo(L={}){return le.post({url:"/manage/deleteMcpTool",data:L})}const ko={class:"avatar-box"},ho={__name:"mcp-store",emits:["ok"],setup(L,{expose:G,emit:U}){const w=U,f=r(!1),l=r(!1),b=r(null),d={avatar:Oe,name:"",description:"",server_id:""},h=Le({});function T(g=null){Object.assign(h,g||d),b.value=null,f.value=!0}function m(g){b.value=g}function n(){var g;try{if(l.value=!0,h.name=h.name.trim(),h.description=h.description.trim(),!h.name)throw"请输入MCP插件名称";if(!h.description)throw"请输入MCP插件描述";let _={...h};b.value&&(_.avatar=(g=b.value)==null?void 0:g.file),ro(_).then(R=>{w("ok",h),S.success("已保存"),f.value=!1}).finally(()=>{l.value=!1})}catch(_){l.value=!1,S.error(_)}}return G({show:T}),(g,_)=>{const R=me,s=He,C=Je,y=je,I=V;return a(),N(I,{open:f.value,"onUpdate:open":_[3]||(_[3]=$=>f.value=$),title:h.server_id?"编辑MCP":"添加MCP",width:"472px","confirm-loading":l.value,onOk:n},{default:o(()=>[e("div",ko,[t(Ve,{value:h.avatar,"onUpdate:value":_[0]||(_[0]=$=>h.avatar=$),onChange:m},null,8,["value"]),_[4]||(_[4]=e("div",{class:"tip-info"},"点击替换，建议尺寸为100*100px，大小不超过100kb",-1))]),t(y,{class:"form-box",labelAlign:"left"},{default:o(()=>[t(s,{label:"MCP插件名称",required:"",colon:!1},{default:o(()=>[t(R,{value:h.name,"onUpdate:value":_[1]||(_[1]=$=>h.name=$),placeholder:"请输入MCP插件名称，最多20个字",maxlength:20},null,8,["value"])]),_:1}),t(s,{label:"描述",colon:!1},{default:o(()=>[t(C,{value:h.description,"onUpdate:value":_[2]||(_[2]=$=>h.description=$),"auto-size":{minRows:2,maxRows:5},placeholder:"请输入描述",maxlength:20},null,8,["value"])]),_:1}),h.server_id?Q("",!0):(a(),v(j,{key:0},[_[5]||(_[5]=e("div",{class:"tit-box"},[A("配置信息 "),e("span",{class:"desc"},"以下配置创建完成后自动生成")],-1)),t(s,{label:"插件URL",colon:!1},{default:o(()=>[t(R,{disabled:"",placeholder:"创建完成后默认生成"})]),_:1}),t(s,{label:"授权方式",colon:!1},{default:o(()=>[t(R,{disabled:"",placeholder:"Service token / API key"})]),_:1}),t(s,{label:"请求头",colon:!1},{default:o(()=>[t(R,{disabled:"",placeholder:"Authorization"})]),_:1}),t(s,{label:"API KEY",colon:!1},{default:o(()=>[t(R,{disabled:"",placeholder:"创建完成后默认生成"})]),_:1})],64))]),_:1})]),_:1},8,["open","title","confirm-loading"])}}},bo=Z(ho,[["__scopeId","data-v-6f6a3691"]]),go={class:"data-list"},yo=["onClick"],$o=["src"],xo={class:"info"},Co={class:"tit"},wo={class:"desc"},Mo={key:1,class:"status-tag waiting"},To={__name:"select-workflow-modal",emits:["ok"],setup(L,{expose:G,emit:U}){const w=U,f=r(!1),l=r([]),b=r([]);function d(m=[]){b.value=m,f.value=!0,h()}function h(){Ne({application_type:1}).then(m=>{l.value=m.data||[],l.value.forEach(n=>{n.checked=b.value.includes(n.id)})})}function T(){f.value=!1,w("ok",l.value.filter(m=>m.checked).map(m=>m.id),l)}return G({show:d}),(m,n)=>{const g=We,_=Rt,R=V;return a(),N(R,{open:f.value,"onUpdate:open":n[0]||(n[0]=s=>f.value=s),title:"关联工作流",width:"669px",onOk:T},{default:o(()=>[t(g,{class:"zm-alert-info mt24",type:"info",message:"选择工作流后，会自动生成唯一标识符，可修改","show-icon":""}),e("div",go,[(a(!0),v(j,null,Y(l.value,(s,C)=>(a(),v("div",{key:C,class:de(["data-item",{disabled:s.has_published!=1}]),onClick:y=>s.checked=!s.checked},[e("img",{class:"avatar",src:s.robot_avatar},null,8,$o),e("div",xo,[e("div",null,[e("div",Co,M(s.robot_name),1),e("div",wo,M(s.robot_intro),1)]),s.has_published==1?(a(),N(_,{key:0,checked:s.checked,"onUpdate:checked":y=>s.checked=y},null,8,["checked","onUpdate:checked"])):(a(),v("span",Mo,[t(O(Ke)),n[1]||(n[1]=A(" 未发布",-1))]))])],10,yo))),128))])]),_:1},8,["open"])}}},Ro=Z(To,[["__scopeId","data-v-2ea00b78"]]),Po={class:"_mcp-box"},So={key:0,class:"loading-box"},Oo={class:"base-info-box"},Io={class:"app-info"},Lo=["src"],Uo={class:"info-box"},Ao={class:"left-box"},Do={class:"name"},Eo={key:0,class:"status-tag finished"},Go={key:1,class:"status-tag waiting"},Bo={class:"desc"},Fo={class:"right-box"},qo={class:"app-data"},zo={class:"data-item"},No={class:"title"},Vo={class:"value"},Wo={class:"tools-box"},jo={class:"head-box"},Ho={key:0,class:"tools-list"},Jo={class:"left"},Ko={class:"tit"},Qo={class:"key"},Yo={class:"desc"},Zo={class:"params"},Xo={class:"params-box"},es={class:"field"},ts={class:"name"},os={class:"type"},ss={key:0,class:"required"},ns={class:"desc"},ls={key:1,class:"empty-box"},as={key:2,class:"empty-box"},is={class:"mt4"},us={__name:"mcp-box",setup(L){const G=r(null),U=r(null),w=r(!0),f=r(!1),l=r(null),b=r([]),d=r([]),h=r(!1),T=r(!1),m=r(""),n=r(null);fe(()=>{g()});function g(){w.value=!0,_()}function _(){co().then(k=>{var p,J,te;l.value=((p=k==null?void 0:k.data)==null?void 0:p.info)||{},d.value=((J=k==null?void 0:k.data)==null?void 0:J.tool_list)||{},l.value.status_bool=((te=l.value)==null?void 0:te.publish_status)==1,d.value.forEach(H=>{H.params=Ie(H.params,[])}),s()}).finally(()=>{w.value=!1})}function R(){const k=()=>{l.value.status_bool=!l.value.status_bool},p=()=>{f.value=!0,po({server_id:l.value.id,publish_status:Number(l.value.status_bool)}).then(J=>{S.success("操作完成")}).finally(()=>{f.value=!1}).catch(()=>{k()})};l.value.status_bool?p():V.confirm({title:"确认关闭MCP服务？",content:"关闭后，其他应用的位置都不可使用！确认关闭？",okText:"确定",cancelText:"取消",onOk:()=>p(),onCancel:()=>k()})}function s(){var k;b.value=[{title:"URL",value:`${window.location.origin}/mcp`},{title:"请求方式",value:"POST"},{title:"授权方式",value:"Service token / API key"},{title:"请求参数名",value:"Authorization"},{title:"API key",value:`Bearer ${(k=l.value)==null?void 0:k.api_key}`}]}function C(){var p;let k=null;((p=l.value)==null?void 0:p.id)>0&&(k={avatar:l.value.avatar,name:l.value.name,description:l.value.description,server_id:l.value.id}),G.value.show(k)}function y(){V.confirm({title:"确认删除MCP服务？",content:"删除后，其他应用的位置都不可使用！确认删除？",okText:"确定",cancelText:"取消",onOk:()=>{_o({server_id:l.value.id}).then(()=>{S.success("已删除"),_()})}})}function I(){U.value.show(d.value.map(k=>k.robot_id))}function $(k){n.value=k,m.value=k.name,h.value=!0}const c=k=>{k.target.value=k.target.value.replace(/[^a-zA-Z0-9_]/g,""),m.value=k.target.value};function P(){if(!m.value)return S.warning("请输入标识符");T.value=!0,fo({tool_id:n.value.id,name:m.value}).then(k=>{n.value.name=m.value,h.value=!1,S.success("已保存")}).finally(()=>{T.value=!1})}function D(k){V.confirm({title:"确认删除该工具？",okText:"确定",cancelText:"取消",onOk:()=>{mo({tool_id:k.id}).then(()=>{S.success("已删除"),_()})}})}function W(k){vo({server_id:l.value.id,robot_id:k.toString()}).then(p=>{_(),S.success("已保存")})}return(k,p)=>{const J=ke,te=St,H=pe,E=be,se=he,X=ge,ye=Ot,$e=Lt,xe=Ut,Ce=me,we=V;return a(),v("div",Po,[w.value?(a(),v("div",So,[t(J)])):l.value.id>0?(a(),v(j,{key:1},[e("div",Oo,[e("div",Io,[e("img",{class:"avatar",src:l.value.avatar},null,8,Lo),e("div",Uo,[e("div",Ao,[e("div",Do,[A(M(l.value.name)+" ",1),l.value.status_bool?(a(),v("span",Eo,[t(O(Pt)),p[3]||(p[3]=A(" 已发布",-1))])):(a(),v("span",Go,[t(O(Ke)),p[4]||(p[4]=A(" 未发布",-1))]))]),e("div",Bo,M(l.value.description),1)]),e("div",Fo,[t(te,{checked:l.value.status_bool,"onUpdate:checked":p[0]||(p[0]=F=>l.value.status_bool=F),onChange:R,loading:f.value,"checked-children":"开","un-checked-children":"关"},null,8,["checked","loading"]),t(H,{onClick:I,type:"primary",ghost:"",icon:re(O(ve))},{default:o(()=>[...p[5]||(p[5]=[A("添加工作流",-1)])]),_:1},8,["icon"]),t(X,null,{overlay:o(()=>[t(se,null,{default:o(()=>[t(E,{onClick:C},{default:o(()=>[...p[6]||(p[6]=[A("编辑",-1)])]),_:1}),t(E,{onClick:y},{default:o(()=>[...p[7]||(p[7]=[e("span",{class:"cFB363F"},"删除",-1)])]),_:1})]),_:1})]),default:o(()=>[t(H,{icon:re(O(_e))},null,8,["icon"])]),_:1})])])]),e("div",qo,[(a(!0),v(j,null,Y(b.value,(F,ae)=>(a(),v(j,{key:ae},[e("div",zo,[e("div",No,M(F.title),1),e("div",Vo,M(F.value),1)]),t(ye,{type:"vertical",style:{height:"24px"}})],64))),128))])]),e("div",Wo,[e("div",jo,[t(O(It),{class:"icon"}),A(" 工具列表（"+M(d.value.length||0)+"） ",1)]),d.value.length?(a(),v("div",Ho,[(a(!0),v(j,null,Y(d.value,(F,ae)=>(a(),v("div",{key:ae,class:"tools-item"},[e("div",Jo,[e("div",Ko,M(F.robot_name),1),e("div",Qo,"唯一标识符号："+M(F.name),1),e("div",Yo,M(F.robot_intro),1),e("div",Zo,[(a(!0),v(j,null,Y(F.params.slice(0,5),(K,ie)=>(a(),N($e,{key:ie,bordered:!1},{default:o(()=>[A(M(K.key),1)]),_:2},1024))),128)),t(xe,{placement:"right"},{content:o(()=>[e("div",Xo,[(a(!0),v(j,null,Y(F.params,(K,ie)=>(a(),v("div",{key:ie,class:"param-item"},[e("div",es,[e("span",ts,M(K.key),1),e("span",os,M(K.typ),1),K.required?(a(),v("span",ss,"必填")):Q("",!0)]),e("div",ns,M(K.desc),1)]))),128))])]),default:o(()=>[p[8]||(p[8]=e("a",null,"参数",-1))]),_:2},1024)])]),t(X,null,{overlay:o(()=>[t(se,null,{default:o(()=>[t(E,{onClick:K=>$(F)},{default:o(()=>[...p[9]||(p[9]=[A("编辑标识符",-1)])]),_:1},8,["onClick"]),t(E,{onClick:K=>D(F)},{default:o(()=>[...p[10]||(p[10]=[e("span",{class:"cFB363F"},"删除",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),default:o(()=>[t(H,{size:"small",icon:re(O(_e))},null,8,["icon"])]),_:2},1024)]))),128))])):(a(),v("div",ls,[p[12]||(p[12]=e("img",{src:Pe},null,-1)),p[13]||(p[13]=e("div",{class:"title"},"暂未绑定工作流",-1)),t(H,{onClick:I,class:"btn",type:"primary"},{default:o(()=>[...p[11]||(p[11]=[A("立即绑定",-1)])]),_:1})]))])],64)):(a(),v("div",as,[p[15]||(p[15]=e("img",{src:Pe},null,-1)),p[16]||(p[16]=e("div",{class:"title"},"暂未添加工作流MCP插件",-1)),t(H,{onClick:C,class:"btn",type:"primary"},{default:o(()=>[...p[14]||(p[14]=[A("立即添加",-1)])]),_:1})])),t(bo,{ref_key:"mcpRef",ref:G,onOk:_},null,512),t(Ro,{ref_key:"workflowRef",ref:U,onOk:W},null,512),t(we,{open:h.value,"onUpdate:open":p[2]||(p[2]=F=>h.value=F),"confirm-loading":T.value,title:"编辑标识符",onOk:P},{default:o(()=>[p[17]||(p[17]=e("div",null,"标识符",-1)),e("div",is,[t(Ce,{value:m.value,"onUpdate:value":p[1]||(p[1]=F=>m.value=F),onInput:c,placeholder:"请输入标识符",maxlength:32},null,8,["value"])])]),_:1},8,["open","confirm-loading"])])}}},ds=Z(us,[["__scopeId","data-v-7299b4db"]]),cs={key:0,class:"checking-box"},rs={class:"cont"},_s={class:"head-box"},ps={class:"base-info-box"},vs=["src"],fs={class:"info-box"},ms={class:"left"},ks={class:"name zm-line1"},hs={key:0,class:"auth-tag"},bs={key:1,class:"auth-tag fail"},gs={class:"right"},ys={class:"link"},$s={class:"link"},xs={class:"body-box"},Cs={key:0,class:"no-auth-box"},ws={class:"main-tit"},Ms={class:"extra-box"},Ts={class:"update-time"},Rs={class:"tools-box"},Ps={class:"info"},Ss={class:"tit"},Os={class:"desc"},Is={__name:"third-mcp-detail",emits:["del","edit","auth"],setup(L,{expose:G,emit:U}){const w=U,f=r(!1),l=r(!1),b=r(!1),d=r({});function h(R){d.value=R,f.value=!0}function T(){f.value=!1}function m(R){const s=()=>{l.value=!0,ue(!1),Se({provider_id:d.value.id}).then(C=>{setTimeout(()=>{l.value=!1,d.value.has_auth=1,_(),S.success("已验证，授权完成")},2e3)}).catch(C=>{d.value.has_auth=0,S.warning("授权失败："+C.message),l.value=!1}).finally(()=>{w("auth",d.value.has_auth),setTimeout(()=>{ue(!0)},500)})};R==2?V.confirm({title:"提示",content:"授权或者刷新应用列表都可能会影响已有工具的调用，确认继续操作吗？",onOk:()=>{s()}}):s()}function n(){w("edit",d.value)}function g(){w("del",d.value)}function _(R=!1){const s=()=>{Kt({provider_id:d.value.id}).then(C=>{let y=(C==null?void 0:C.data)||{};y.tools=Ie(y.tools,[]),y.up_time_text=Be(y.update_time),d.value=y,R&&S.success("刷新完成")}).finally(()=>{b.value=!1})};if(R){if(b.value)return;V.confirm({title:"提示",content:"刷新应用列表或者授权都可能会影响已有工具的调用，确认继续操作吗？",onOk:()=>{b.value=!0,ue(!1),Se({provider_id:d.value.id}).then(C=>{d.value.has_auth=1,s()}).catch(C=>{d.value.has_auth=0,S.warning("验证授权失败："+C.message),b.value=!1}).finally(()=>{w("auth",d.value.has_auth),ue(!0)})}})}else s()}return G({show:h,hide:T,refresh:_}),(R,s)=>{const C=ke,y=be,I=he,$=ge,c=pe,P=Et;return a(),N(P,{open:f.value,"onUpdate:open":s[5]||(s[5]=D=>f.value=D),placement:"right",width:"400px",headerStyle:{display:"none"},bodyStyle:{padding:0}},{default:o(()=>[l.value?(a(),v("div",cs,[e("div",rs,[t(C),s[6]||(s[6]=A(" 正在验证... ",-1))])])):Q("",!0),e("div",_s,[e("div",ps,[e("img",{class:"avatar",src:d.value.avatar},null,8,vs),e("div",fs,[e("div",ms,[e("div",ks,M(d.value.name),1),e("div",null,[d.value.has_auth==1?(a(),v("div",hs,"已授权")):(a(),v("div",bs,"未授权"))])]),e("div",gs,[t($,null,{overlay:o(()=>[t(I,null,{default:o(()=>[t(y,{onClick:q(n,["stop"])},{default:o(()=>[...s[7]||(s[7]=[A("编辑",-1)])]),_:1}),t(y,{onClick:q(g,["stop"])},{default:o(()=>[...s[8]||(s[8]=[e("span",{class:"cFB363F"},"删除",-1)])]),_:1})]),_:1})]),default:o(()=>[t(O(_e),{class:"icon"})]),_:1}),t(O(At),{onClick:s[0]||(s[0]=D=>f.value=!1),class:"icon"})])])]),e("div",ys,M(d.value.description),1),e("div",$s,M(d.value.url),1),d.value.has_auth==1?(a(),N(c,{key:0,class:"auth-btn",onClick:s[1]||(s[1]=D=>m(2))},{default:o(()=>[...s[9]||(s[9]=[A("重新授权",-1)])]),_:1})):(a(),N(c,{key:1,type:"primary",class:"auth-btn",onClick:s[2]||(s[2]=D=>m(1))},{default:o(()=>[...s[10]||(s[10]=[A("授 权",-1)])]),_:1}))]),e("div",xs,[d.value.has_auth!=1?(a(),v("div",Cs,[s[11]||(s[11]=e("img",{src:Ht},null,-1)),s[12]||(s[12]=e("div",{class:"tit"},"需要授权",-1)),s[13]||(s[13]=e("div",{class:"desc"},"授权后，MCP工具将显示在这里",-1)),e("a",{class:"link",onClick:s[3]||(s[3]=D=>m(1))},"立即授权")])):(a(),v(j,{key:1},[e("div",ws,[e("span",null,M(d.value.tools.length)+"个可用工具",1),e("div",Ms,[e("div",Ts,M(d.value.up_time_text)+"更新",1),e("a",{class:"refresh-btn",onClick:s[4]||(s[4]=D=>_(!0))},[t(O(Dt),{spin:b.value},null,8,["spin"]),s[14]||(s[14]=A(" 刷新 ",-1))])])]),e("div",Rs,[(a(!0),v(j,null,Y(d.value.tools,(D,W)=>(a(),v("div",{key:W,class:"tool-item"},[s[15]||(s[15]=e("img",{class:"cover",src:Jt},null,-1)),e("div",Ps,[e("div",Ss,M(D.name),1),e("div",Os,M(D.description),1)])]))),128))])],64))])]),_:1},8,["open"])}}},Ls=Z(Is,[["__scopeId","data-v-bcef20f5"]]),Us={key:0,class:"checking-box"},As={class:"cont"},Ds={class:"avatar-box"},Es={key:0,class:"cFB363F"},Gs={class:"req-head-box"},Bs={__name:"third-mcp-store",emits:["ok"],setup(L,{expose:G,emit:U}){const w=U,f=r(0),l=r(!1),b=r(!1),d=r(!1),h=r(null),T=r(""),m={avatar:Oe,name:"",description:"",provider_id:"",url:"",request_timeout:"30",headers:[]},n=Le({});function g($=null){if(Object.assign(n,$||m),h.value=null,n.headers=[],$){f.value=$.id,n.provider_id=$.id;let c=JSON.parse($.headers);for(let P in c)n.headers.push({key:P,value:c[P]})}T.value=JSON.stringify({headers:n.headers,url:n.url}),l.value=!0}function _($){h.value=$}function R(){n.headers.push({key:"",value:""})}function s($){n.headers.splice($,1)}function C(){return T.value!=JSON.stringify({headers:n.headers,url:n.url})}function y(){const $=S.loading("保存完成，正在进行授权验证...",0);b.value=!0,setTimeout(()=>{ue(!1),Se({provider_id:f.value}).then(c=>{S.success("授权完成！")}).catch(c=>{S.warning("授权失败："+c.message)}).finally(()=>{$(),b.value=!1,l.value=!1,w("ok",n),setTimeout(()=>{ue(!0)},500)})},1800)}function I(){var $;try{if(d.value=!0,n.name=n.name.trim(),n.description=n.description.trim(),!n.name)throw"请输入MCP插件名称";if(!n.description)throw"请输入MCP插件描述";if(!n.url)throw"请输入服务端点的URL";if(!n.request_timeout)throw"请输入超时时间";let c={...n};h.value&&(c.avatar=($=h.value)==null?void 0:$.file),c.headers={};for(let P of n.headers)P.key=P.key.trim(),P.value=P.value.trim(),P.key&&P.value&&(c.headers[P.key]=P.value);c.headers=JSON.stringify(c.headers),delete c.toools,Qt(c).then(P=>{let{provider_id:D}=(P==null?void 0:P.data)||{};f.value=D,C()?y():(w("ok",n),S.success("已保存"),l.value=!1)}).finally(()=>{d.value=!1})}catch(c){d.value=!1,S.error(c)}}return G({show:g}),($,c)=>{const P=ke,D=me,W=He,k=Je,p=Gt,J=pe,te=je,H=V;return a(),N(H,{open:l.value,"onUpdate:open":c[5]||(c[5]=E=>l.value=E),zIndex:1002,title:n.provider_id?"编辑MCP":"添加MCP",width:"472px","confirm-loading":d.value,onOk:I},{default:o(()=>[b.value?(a(),v("div",Us,[e("div",As,[t(P),c[6]||(c[6]=A(" 正在验证... ",-1))])])):Q("",!0),e("div",Ds,[t(Ve,{value:n.avatar,"onUpdate:value":c[0]||(c[0]=E=>n.avatar=E),onChange:_},null,8,["value"]),c[7]||(c[7]=e("div",{class:"tip-info"},"点击替换，建议尺寸为100*100px，大小不超过100kb",-1))]),t(te,{class:"form-box",labelAlign:"left"},{default:o(()=>[t(W,{label:"MCP插件名称",required:"",colon:!1},{default:o(()=>[t(D,{value:n.name,"onUpdate:value":c[1]||(c[1]=E=>n.name=E),placeholder:"请输入MCP插件名称，最多20个字",maxlength:20},null,8,["value"])]),_:1}),t(W,{label:"描述",colon:!1},{default:o(()=>[t(k,{value:n.description,"onUpdate:value":c[2]||(c[2]=E=>n.description=E),"auto-size":{minRows:2,maxRows:5},placeholder:"请输入描述",maxlength:120},null,8,["value"])]),_:1}),c[11]||(c[11]=e("div",{class:"tit-box"},"配置信息",-1)),t(W,{label:"插件URL",colon:!1},{default:o(()=>[t(D,{value:n.url,"onUpdate:value":c[3]||(c[3]=E=>n.url=E),placeholder:"服务端点的URL"},null,8,["value"]),n.provider_id?(a(),v("div",Es,"修改服务端点 URL 可能会影响使用当前 MCP的应用")):Q("",!0)]),_:1}),t(W,{label:"超时时间",colon:!1},{default:o(()=>[t(p,{value:n.request_timeout,"onUpdate:value":c[4]||(c[4]=E=>n.request_timeout=E),precision:0,style:{width:"100%"},placeholder:"请输入超时时间"},null,8,["value"])]),_:1}),t(W,{label:"请求头",colon:!1},{default:o(()=>[c[10]||(c[10]=e("div",{class:"tip-info"},"发送到 MCP 服务器的额外 HTTP 请求头",-1)),e("div",Gs,[c[9]||(c[9]=e("div",{class:"req-head-item"},[e("div",{class:"tit"},"请求头名称"),e("div",{class:"tit"},"请求头值")],-1)),(a(!0),v(j,null,Y(n.headers,(E,se)=>(a(),v("div",{key:se,class:"req-head-item"},[t(D,{value:E.key,"onUpdate:value":X=>E.key=X,placeholder:"请输入"},null,8,["value","onUpdate:value"]),t(D,{value:E.value,"onUpdate:value":X=>E.value=X,placeholder:"请输入"},null,8,["value","onUpdate:value"]),t(O(Bt),{onClick:X=>s(se)},null,8,["onClick"])]))),128)),t(J,{class:"add-btn",type:"dashed",icon:re(O(ve)),onClick:R},{default:o(()=>[...c[8]||(c[8]=[A("添加请求头",-1)])]),_:1},8,["icon"])])]),_:1})]),_:1})]),_:1},8,["open","title","confirm-loading"])}}},Qe=Z(Bs,[["__scopeId","data-v-cdb4e5ed"]]),Fs={class:"_mcp-box"},qs={key:0,class:"loading-box"},zs={key:1,class:"list-box"},Ns=["onClick"],Vs={class:"base-info-box"},Ws=["src"],js={class:"info-box"},Hs={class:"name zm-line1"},Js={key:0,class:"auth-tag"},Ks={key:1,class:"auth-tag fail"},Qs={class:"zm-line1"},Ys={class:"bottom"},Zs={class:"extra-box"},Xs={class:"extra-item"},en={class:"extra-item"},tn={key:2,class:"empty-box"},on={__name:"third-mcp-box",emits:["listLoaded"],setup(L,{expose:G,emit:U}){const w=Fe(),f=r(null),l=r(null),b=r(!0),d=r([]),h=U;fe(()=>{T()});function T(){b.value=!0,n()}function m(){n(),f.value&&f.value.refresh()}function n(){Yt().then(y=>{let I=(y==null?void 0:y.data)||[];I.forEach($=>{$.tools=Ie($.tools,[]),$.up_time_text=Be($.update_time)}),d.value=I,h("listLoaded",d.value.length)}).finally(()=>{b.value=!1})}function g(y){f.value.show(y)}function _(){l.value.show()}function R(y){l.value.show(y)}function s(){const y=w.resolve({path:"/mcp/index"}).href;window.open(y,"_blank")}function C(y){V.confirm({title:"确认删除该MCP插件？",content:"删除后，其他应用的位置都不可使用！确认删除？",okText:"确定",cancelText:"取消",onOk:()=>{Zt({provider_id:y.id}).then(()=>{S.success("已删除"),n(),f.value&&f.value.hide()})}})}return G({update:m}),(y,I)=>{const $=ke,c=pe,P=be,D=he,W=ge;return a(),v("div",Fs,[b.value?(a(),v("div",qs,[t($)])):d.value.length?(a(),v("div",zs,[(a(!0),v(j,null,Y(d.value,(k,p)=>(a(),v("div",{onClick:J=>g(k),key:p,class:"app-item"},[e("div",Vs,[e("img",{class:"avatar",src:k.avatar},null,8,Ws),e("div",js,[e("div",Hs,M(k.name),1),e("div",null,[k.has_auth==1?(a(),v("div",Js,"已授权")):(a(),v("div",Ks,"未授权"))])])]),e("div",Qs,M(k.url),1),e("div",Ys,[e("div",Zs,[e("div",Xs,"可用工具："+M(k.tools.length),1),e("div",en,M(k.up_time_text)+"更新",1)]),t(W,null,{overlay:o(()=>[t(D,null,{default:o(()=>[t(P,{onClick:q(J=>R(k),["stop"])},{default:o(()=>[...I[1]||(I[1]=[A("编辑",-1)])]),_:1},8,["onClick"]),t(P,{onClick:q(J=>C(k),["stop"])},{default:o(()=>[...I[2]||(I[2]=[e("span",{class:"cFB363F"},"删除",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),default:o(()=>[t(c,{onClick:I[0]||(I[0]=q(()=>{},["stop"])),size:"small",icon:re(O(_e))},null,8,["icon"])]),_:2},1024)])],8,Ns))),128))])):(a(),v("div",tn,[I[4]||(I[4]=e("img",{src:Pe},null,-1)),I[5]||(I[5]=e("div",{class:"title"},"暂未添加外部MCP插件",-1)),e("div",{class:"desc-box"},[e("div",{class:"link",onClick:s},"更多MCP？去MCP广场")]),t(c,{onClick:_,class:"btn",type:"primary"},{default:o(()=>[...I[3]||(I[3]=[A("立即添加",-1)])]),_:1})])),t(Ls,{ref_key:"mcpDetailRef",ref:f,onDel:C,onEdit:R,onAuth:n},null,512),t(Qe,{ref_key:"mcpStoreRef",ref:l,onOk:m},null,512)])}}},sn=Z(on,[["__scopeId","data-v-2ebafa27"]]),nn={class:"_mcp_container"},ln={class:"tabs-box"},an={__name:"mcp-panel",emits:["thirdMcpListEmpty"],setup(L,{expose:G,emit:U}){const w=qe(),f=r(null),l=r(Number(localStorage.getItem("zm:chatwiki:mcp:active")||1)),b=U;fe(()=>{w.query.mcp>0&&d(Number(w.query.mcp))});function d(m){l.value=m,localStorage.setItem("zm:chatwiki:mcp:active",m)}function h(){l.value==2&&f.value.update()}function T(m){b("thirdMcpListEmpty",m===0)}return G({update:h}),(m,n)=>(a(),v("div",nn,[e("div",ln,[e("div",{class:de(["tab-item",{active:l.value==1}]),onClick:n[0]||(n[0]=g=>d(1))},"工作流MCP",2),e("div",{class:de(["tab-item",{active:l.value==2}]),onClick:n[1]||(n[1]=g=>d(2))},"外部MCP",2)]),l.value==1?(a(),N(ds,{key:0,ref_key:"mcpRef",ref:f},null,512)):(a(),N(sn,{key:1,ref_key:"mcpRef",ref:f,onListLoaded:T},null,512))]))}},un=Z(an,[["__scopeId","data-v-18fcd171"]]),dn={class:"robot-page"},cn={class:"list-toolbar mt16"},rn={class:"toolbar-box"},_n={class:"toolbar-box",style:{"text-align":"right"}},pn={class:"create-action"},vn=["src"],fn={class:"create-action"},mn=["src"],kn={class:"create-action"},hn=["src"],bn={class:"create-action"},gn=["src"],yn={key:1,class:"desc-box"},$n={key:1,class:"list-group-box"},xn={key:0,class:"group-head-box"},Cn={class:"head-title"},wn={class:"search-box"},Mn={class:"classify-box"},Tn=["onClick"],Rn={class:"classify-title"},Pn={class:"right-content"},Sn={key:0,class:"btn-box"},On={class:"hover-btn-wrap"},In=["onClick"],Ln=["onClick"],Un={class:"robot-scroll-box"},An={key:0,class:"empty-box"},Dn=["onClick"],En={class:"list-item"},Gn={class:"robot-info"},Bn=["src"],Fn={class:"robot-info-content"},qn={class:"robot-name"},zn={class:"robot-type-tag"},Nn=["onClick"],Vn=["onClick"],Wn=["onClick"],jn=["onClick"],Hn=["onClick"],Jn=["onClick"],Kn={__name:"robot-list",setup(L){const G=Fe(),U=qe(),w=r([{title:"全部 (0)",value:"2"},{title:"聊天机器人 (0)",value:"0"},{title:"工作流 (0)",value:"1"},{title:"MCP插件",value:"3"}]),f=lt();let{role_permission:l,role_type:b}=f;const d=Ge(()=>b==1||l.includes("RobotCreate")),h=r(null),T=r("2"),m=r(""),n=r([]),g=r([]),_=r(!1);let R="robot-list-hide-group-key";const s=r(localStorage.getItem(R)==1),C=()=>{s.value=!s.value,localStorage.setItem(R,s.value?1:0)},y=()=>{c(),ie()},I=()=>{let u=n.value;m.value!=""&&(u=u.filter(i=>i.group_id==m.value)),T.value!=2&&(u=u.filter(i=>i.application_type==T.value)),g.value=u};function $(){const u=G.resolve({path:"/mcp/index"}).href;window.open(u,"_blank")}const c=()=>{Ne().then(u=>{let i=0,z=0,B=0;u.data.forEach(oe=>{oe.application_type==0?z++:B++,i++}),w.value=[{title:"全部 ("+i+")",value:"2"},{title:"聊天机器人 ("+z+")",value:"0"},{title:"工作流 ("+B+")",value:"1"},{title:"MCP插件",value:"3"}],n.value=u.data,I()}).catch(()=>{})},P=r(null),D=r(null),W=r(null),k=u=>{P.value.open(u),P.value.setGroupId(m.value)},p=()=>{W.value.show()},J=()=>{D.value.open()},te=u=>{c(),H(u)},H=({id:u,robot_key:i,application_type:z})=>{localStorage.setItem("last_local_robot_id",u),z==0?window.open(`/#/robot/config/basic-config?id=${u}&robot_key=${i}`,"_blank","noopener"):window.open(`/#/robot/config/workflow?id=${u}&robot_key=${i}`,"_blank","noopener")},E=u=>{if(_t(u.id)!=4)return S.error("您没有删除机器人的权限");let z=3,B=V.confirm({title:`删除机器人${u.robot_name}`,icon:t(Re),content:"您确定要删除此机器人吗？",okText:z+" 确 定",okType:"danger",cancelText:"取 消",okButtonProps:{disabled:!0},onOk(){se(u)},onCancel(){}}),oe=setInterval(()=>{z==1?(B.update({okText:"确 定",okButtonProps:{disabled:!1}}),clearInterval(oe),oe=void 0):(z-=1,B.update({okText:z+" 确 定",okButtonProps:{disabled:!0}}))},1e3)},se=({id:u})=>{bt({id:u}).then(()=>{S.success("删除成功"),c()})},X=u=>{let i=3,z=V.confirm({title:`复制机器人${u.robot_name}`,icon:t(Re),content:"您确定要复制此机器人吗？",okText:i+" 确 定",okType:"danger",cancelText:"取 消",okButtonProps:{disabled:!0},onOk(){ye(u)},onCancel(){}}),B=setInterval(()=>{i==1?(z.update({okText:"确 定",okButtonProps:{disabled:!1}}),clearInterval(B),B=void 0):(i-=1,z.update({okText:i+" 确 定",okButtonProps:{disabled:!0}}))},1e3)},ye=({id:u})=>{gt({id:u}).then(()=>{S.success("复制成功"),c()})},$e=u=>{const{openUrlWithToken:i}=uo();i(`/manage/robotExport?id=${u.id}`)},xe=u=>{window.open(`#/robot/test?robot_key=${u.robot_key}&id=${u.id}`)},Ce=u=>{window.open(`#/robot/config/session-record?robot_key=${u.robot_key}&id=${u.id}`)},we=u=>{window.open(`#/robot/config/statistical_analysis?robot_key=${u.robot_key}&id=${u.id}`)},F=r(""),ae=r([]),K=Ge(()=>ae.value.filter(u=>u.group_name.includes(F.value))),ie=()=>{ze({application_type:T.value==2?null:T.value}).then(u=>{let i=u.data||[],z=0;i.forEach(B=>{z+=+B.total}),ae.value=[{group_name:"全部",total:z,id:""},...i]})},Ye=u=>{m.value=u.id,c()},Ue=r(null),Ae=u=>{Ue.value.show({...u})},De=r(null),Ze=u=>{De.value.show({...u})},Xe=u=>{V.confirm({title:`确认删除分组${u.group_name}`,icon:t(Re),content:"",okText:"确认",okType:"danger",cancelText:"取消",onOk(){kt({id:u.id}).then(()=>{S.success("删除成功"),ie(),m.value==u.id&&(m.value="",c())})}})},et=()=>{h.value&&h.value.update()},tt=u=>{if(u.newIndex===u.oldIndex)return;_.value=!0;let i={move_robot_id:g.value[u.newIndex].id,to_robot_id:0};u.newIndex>0&&(i.to_robot_id=g.value[u.newIndex-1].id),ht(i).then(z=>{S.success("操作完成")}).finally(()=>{_.value=!1})};return fe(()=>{T.value=U.query.active||"2",y()}),(u,i)=>{const z=pe,B=be,oe=he,Me=ge,ne=Ft,ot=me,Ee=pt,st=qt,ce=rt;return a(),v("div",dn,[t(Wt,{class:"mt16",title:"使用说明"},{default:o(()=>[...i[11]||(i[11]=[e("div",null,[e("p",null," 1、应用包括两种类型：聊天机器人、工作流。聊天机器人适合新手用户，关联知识库后只需简单配置，即可创建一个基于私有知识库的问答机器人。工作流适合高级用户，利用系统预制节点自定义任务流程，适合解决复杂任务。 "),e("p",null,"2、发现模块也提供了丰富模版，可以根据需要选择适合模版快速创建应用。")],-1)])]),_:1}),e("div",cn,[e("div",rn,[t(jt,{tabs:w.value,onChange:y,value:T.value,"onUpdate:value":i[0]||(i[0]=x=>T.value=x)},null,8,["tabs","value"])]),e("div",_n,[d.value?(a(),N(Me,{key:0},{overlay:o(()=>[t(oe,null,{default:o(()=>[t(B,{onClick:i[2]||(i[2]=q(x=>k(0),["prevent"]))},{default:o(()=>[e("span",pn,[e("img",{class:"icon",src:O(at),alt:""},null,8,vn),i[13]||(i[13]=e("span",null,"聊天机器人",-1))])]),_:1}),t(B,{onClick:i[3]||(i[3]=q(x=>k(1),["prevent"]))},{default:o(()=>[e("span",fn,[e("img",{class:"icon",src:O(it),alt:""},null,8,mn),i[14]||(i[14]=e("span",null,"工作流",-1))])]),_:1}),t(B,{onClick:q(p,["prevent"])},{default:o(()=>[e("span",kn,[e("img",{class:"icon",src:O(Oe),alt:""},null,8,hn),i[15]||(i[15]=e("span",null,"外部MCP",-1))])]),_:1}),t(B,{onClick:J},{default:o(()=>[e("span",bn,[e("img",{class:"icon",src:O(ut),alt:""},null,8,gn),i[16]||(i[16]=e("span",null,"导入csl创建",-1))])]),_:1})]),_:1})]),default:o(()=>[t(z,{type:"primary",onClick:i[1]||(i[1]=q(()=>{},["prevent"]))},{icon:o(()=>[t(O(ve))]),default:o(()=>[i[12]||(i[12]=A(" 创建应用 ",-1))]),_:1})]),_:1})):Q("",!0),d.value&&T.value=="3"?(a(),v("div",yn,[e("div",{class:"link",onClick:$},"更多MCP？去MCP广场")])):Q("",!0)])]),T.value==3?(a(),N(un,{key:0,ref_key:"mcpPanelRef",ref:h},null,512)):(a(),v("div",$n,[e("div",{class:de(["group-list-box",{"hide-group":s.value}])},[t(Ee,{style:{"padding-right":"16px"}},{default:o(()=>[s.value?Q("",!0):(a(),v("div",xn,[e("div",Cn,[i[17]||(i[17]=e("div",null,"机器人分组",-1)),t(ne,{title:"新建分组"},{default:o(()=>[e("div",{class:"hover-btn-wrap",onClick:i[4]||(i[4]=x=>Ae({}))},[t(O(ve))])]),_:1})]),e("div",wn,[t(ot,{value:F.value,"onUpdate:value":i[6]||(i[6]=x=>F.value=x),allowClear:"",placeholder:"搜索分组",style:{width:"100%"}},{suffix:o(()=>[t(O(zt),{onClick:i[5]||(i[5]=q(()=>{},["stop"]))})]),_:1},8,["value"])])])),e("div",Mn,[(a(!0),v(j,null,Y(K.value,x=>(a(),v("div",{class:de(["classify-item",{active:x.id==m.value}]),onClick:Te=>Ye(x),key:x.id},[e("div",Rn,M(x.group_name),1),e("div",Pn,[e("div",{class:de(["num",{"num-block":x.id<=0}])},M(x.total),3),x.id>0?(a(),v("div",Sn,[t(Me,{placement:"bottomRight"},{overlay:o(()=>[t(oe,null,{default:o(()=>[t(B,null,{default:o(()=>[e("div",{onClick:q(Te=>Ae(x),["stop"])},"重命名",8,In)]),_:2},1024),t(B,null,{default:o(()=>[e("div",{onClick:q(Te=>Xe(x),["stop"])},"删 除",8,Ln)]),_:2},1024)]),_:2},1024)]),default:o(()=>[e("div",On,[t(O(_e))])]),_:2},1024)])):Q("",!0)])],10,Tn))),128))])]),_:1}),t(ne,{placement:"right",title:s.value?"展开分组":"收起分组"},{default:o(()=>[e("div",{class:"hide-group-box",onClick:C},[s.value?(a(),N(O(Vt),{key:1})):(a(),N(O(Nt),{key:0}))])]),_:1},8,["title"])],2),e("div",Un,[g.value.length==0?(a(),v("div",An,[t(st)])):Q("",!0),t(Ee,{style:{"padding-right":"16px"}},{default:o(()=>[t(O(vt),{modelValue:g.value,"onUpdate:modelValue":i[10]||(i[10]=x=>g.value=x),handle:".drag-btn","item-key":"id",disabled:_.value,class:"list-box",onEnd:tt},{item:o(({element:x,index:Te})=>[(a(),v("div",{class:"list-item-wrapper",key:x.id,onClick:ee=>H(x)},[e("div",En,[e("div",Gn,[e("img",{class:"robot-avatar",src:x.robot_avatar,alt:""},null,8,Bn),e("div",Fn,[e("div",qn,M(x.robot_name),1),e("div",zn,M(x.application_type==0?"聊天机器人":"工作流"),1)])]),t(ne,{title:O(dt)(x.robot_intro,x,14,2,10),placement:"top"},{default:o(()=>[e("div",{class:"robot-desc",ref:ee=>O(ct)(ee,x)},M(x.robot_intro),513)]),_:2},1032,["title"]),e("div",{class:"robot-action",onClick:i[9]||(i[9]=q(()=>{},["stop"]))},[t(ne,{title:"长按拖动排序"},{default:o(()=>[e("div",{class:"robot-action-item drag-btn",onClick:i[7]||(i[7]=q(()=>{},["stop"]))},[t(ce,{class:"action-icon",name:"dragv2"})])]),_:1}),t(ne,{title:"聊天测试"},{default:o(()=>[e("div",{class:"robot-action-item",onClick:q(ee=>xe(x),["stop"])},[t(ce,{class:"action-icon",name:"chat"})],8,Nn)]),_:2},1024),t(ne,{title:"会话记录"},{default:o(()=>[e("div",{class:"robot-action-item",onClick:q(ee=>Ce(x),["stop"])},[t(ce,{class:"action-icon",name:"session"})],8,Vn)]),_:2},1024),t(ne,{title:"统计分析"},{default:o(()=>[e("div",{class:"robot-action-item",onClick:q(ee=>we(x),["stop"])},[t(ce,{class:"action-icon",name:"analysis"})],8,Wn)]),_:2},1024),t(Me,null,{overlay:o(()=>[t(oe,null,{default:o(()=>[t(B,null,{default:o(()=>[e("a",{class:"delete-text-color",href:"javascript:;",onClick:ee=>E(x)},"删 除",8,jn)]),_:2},1024),t(B,null,{default:o(()=>[e("div",{onClick:q(ee=>Ze(x),["stop"])},"修改分组",8,Hn)]),_:2},1024),t(B,null,{default:o(()=>[e("a",{class:"copy-text-color",href:"javascript:;",onClick:ee=>X(x)},"复 制",8,Jn)]),_:2},1024),t(B,{onClick:ee=>$e(x)},{default:o(()=>[...i[18]||(i[18]=[e("span",null,"导出为csl",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),default:o(()=>[e("div",{class:"robot-action-item",onClick:i[8]||(i[8]=q(()=>{},["stop"]))},[t(ce,{class:"action-icon",name:"point-h"})])]),_:2},1024)])])],8,Dn))]),_:1},8,["modelValue","disabled"])]),_:1})])])),t(yt,{ref_key:"addRobotAlertRef",ref:P,onOk:y},null,512),t($t,{ref_key:"addGroupRef",ref:Ue,onOk:y},null,512),t(io,{ref_key:"editGroupRef",ref:De,onOk:y},null,512),t(so,{ref_key:"importCslAlertRef",ref:D,onOk:te},null,512),t(Qe,{ref_key:"thirdMcpRef",ref:W,onOk:et},null,512)])}}},kl=Z(Kn,[["__scopeId","data-v-04347f87"]]);export{kl as default};
