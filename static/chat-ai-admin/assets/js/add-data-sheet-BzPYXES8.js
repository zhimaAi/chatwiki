import{e as I,b as U}from"./index-BZQFjdo3.js";import{a2 as O,d as p,z as _,N as P,O as V,j as o,U as r,W as u,u as f,X as z}from"./vue-chunks-BRsu9_To.js";import{b as A,M as D,k as H}from"../../index-Bo1NSLpy.js";import{F as m,_ as Z}from"./index-COWZrpvC.js";import"./index-Caod9rOO.js";import{I as q}from"./Input-CCKFAS4o.js";import{_ as E}from"./TextArea--DLJ7VtX.js";const Q="data:image/svg+xml,%3csvg%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2062%2062'%20class='design-iconfont'%3e%3cpath%20d='M0%2014.5882C0%206.53137%206.53137%200%2014.5882%200H47.4118C55.4686%200%2062%206.53137%2062%2014.5882V47.4118C62%2055.4686%2055.4686%2062%2047.4118%2062H14.5882C6.53137%2062%200%2055.4686%200%2047.4118V14.5882Z'%20fill='%234876FF'/%3e%3cg%20clip-path='url(%23yi8ty4pxs__clip0_7802_38770)'%20filter='url(%23yi8ty4pxs__filter0_d_7802_38770)'%3e%3cpath%20d='M30.4027%2033.1084C30.7927%2032.9941%2031.2073%2032.9941%2031.5973%2033.1084L46.079%2037.35C48.1159%2037.9466%2048.1159%2040.832%2046.079%2041.4286L31.5973%2045.6702C31.2073%2045.7844%2030.7927%2045.7844%2030.4027%2045.6702L15.921%2041.4286C13.8841%2040.832%2013.8841%2037.9466%2015.921%2037.35L30.4027%2033.1084Z'%20fill='%23C2D1FF'/%3e%3cpath%20d='M30.4027%2024.4677C30.7927%2024.3535%2031.2073%2024.3535%2031.5973%2024.4677L46.079%2028.7093C48.1159%2029.3059%2048.1159%2032.1914%2046.079%2032.788L31.5973%2037.0296C31.2073%2037.1438%2030.7927%2037.1438%2030.4027%2037.0296L15.921%2032.788C13.8841%2032.1914%2013.8841%2029.3059%2015.921%2028.7093L30.4027%2024.4677Z'%20fill='%23D6E0FF'/%3e%3cpath%20d='M30.4027%2016.3271C30.7927%2016.2129%2031.2073%2016.2129%2031.5973%2016.3271L46.079%2020.5687C48.1159%2021.1653%2048.1159%2024.0508%2046.079%2024.6474L31.5973%2028.889C31.2073%2029.0032%2030.7927%2029.0032%2030.4027%2028.889L15.921%2024.6474C13.8841%2024.0508%2013.8841%2021.1653%2015.921%2020.5687L30.4027%2016.3271Z'%20fill='%23EBF0FF'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='yi8ty4pxs__clip0_7802_38770'%3e%3cpath%20fill='%23fff'%20transform='translate(14%2014)'%20d='M0%200H34V34H0z'/%3e%3c/clipPath%3e%3cfilter%20id='yi8ty4pxs__filter0_d_7802_38770'%20x='9.75'%20y='14'%20width='42.5'%20height='42.5'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeColorMatrix%20in='SourceAlpha'%20values='0%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%20127%200'%20result='hardAlpha'/%3e%3cfeOffset%20dy='4.25'/%3e%3cfeGaussianBlur%20stdDeviation='2.125'/%3e%3cfeColorMatrix%20values='0%200%200%200%200.0886636%200%200%200%200%200.388241%200%200%200%200%200.413084%200%200%200%200.14%200'/%3e%3cfeBlend%20in2='BackgroundImageFix'%20result='effect1_dropShadow_7802_38770'/%3e%3cfeBlend%20in='SourceGraphic'%20in2='effect1_dropShadow_7802_38770'%20result='shape'/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e",G={class:"add-data-sheet"},N={__name:"add-data-sheet",emits:["ok"],setup(R,{expose:h,emit:v}){const g=O(),x=v,i=p(!1),l=p("新建数据表"),t=_({name:"",description:"",id:""}),C=(a={})=>{i.value=!0,L(),t.name=a.name||"",t.description=a.description||"",t.id=a.id||"",l.value=a.id?"编辑数据表":"新建数据表"},F=_({name:[{required:!0,validator:async(a,e)=>/^[a-z][a-z0-9_]*$/.test(e)?Promise.resolve():Promise.reject("必须以英文字母开头，只能包含小写字母、数字、下划线")}],description:[{required:!0,message:"请输入数据表描述"}]}),y=m.useForm,{resetFields:L,validate:w,validateInfos:n}=y(t,F),B=()=>{w().then(a=>{t.id?I(t).then(()=>{d("编辑成功")}):U(t).then(e=>{d("创建成功"),g.push({path:"/database/details/field-manage",query:{form_id:e.data.id}})})})};function d(a){H.success(a),i.value=!1,x("ok")}return h({show:C}),(a,e)=>{const k=q,c=Z,M=E,S=m,b=D;return V(),P("div",G,[o(b,{open:i.value,"onUpdate:open":e[2]||(e[2]=s=>i.value=s),title:l.value,onOk:B,width:540},{default:r(()=>[o(S,{layout:"vertical"},{default:r(()=>[o(c,u({label:"数据表名称"},f(n).name),{default:r(()=>[o(k,{maxLength:64,value:t.name,"onUpdate:value":e[0]||(e[0]=s=>t.name=s),placeholder:"请输入数据表名称"},null,8,["value"]),e[3]||(e[3]=z("div",{class:"form-tip"},"必须以英文字母开头，只能包含小写字母、数字、下划线",-1))]),_:1,__:[3]},16),o(c,u({label:"数据表描述"},f(n).description),{default:r(()=>[o(M,{maxLength:500,style:{height:"80px"},value:t.description,"onUpdate:value":e[1]||(e[1]=s=>t.description=s),placeholder:"请输入数据表主要用途，让大模型更加深入理解此表功能"},null,8,["value"])]),_:1},16)]),_:1})]),_:1},8,["open","title"])])}}},Y=A(N,[["__scopeId","data-v-01d3ec5e"]]);export{Y as A,Q as _};
