{"version":3,"file":"multi-reply-Ck3cS9Gg.js","sources":["../../../../front-end/chat-ai-admin-vue/src/components/replay-card/multi-reply.vue"],"sourcesContent":["<template>\r\n  <div class=\"multi-reply-card\">\r\n    <a-tabs v-model:activeKey=\"activeTab\" @change=\"onTabChange\">\r\n      <a-tab-pane key=\"imageText\">\r\n        <template #tab>\r\n          <span class=\"tab-with-icon\"><svg-icon name=\"reply-content-image-text\" size=\"14\" /> {{ t('tab_image_text') }}</span>\r\n        </template>\r\n        <div class=\"form-grid\">\r\n          <a-form :model=\"imageText\" :rules=\"rules.imageText\" ref=\"imageTextForm\" layout=\"vertical\"\r\n            :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\">\r\n            <a-form-item :label=\"t('label_link_url')\" name=\"url\">\r\n              <a-input v-model:value=\"imageText.url\" :placeholder=\"t('ph_link_url')\" />\r\n            </a-form-item>\r\n            <a-form-item :label=\"t('label_link_title')\" name=\"title\">\r\n              <a-input v-model:value=\"imageText.title\" :placeholder=\"t('ph_link_title')\" />\r\n            </a-form-item>\r\n            <a-form-item :label=\"t('label_link_desc')\" name=\"description\">\r\n              <a-textarea v-model:value=\"imageText.description\" auto-size :placeholder=\"t('ph_link_desc')\" :maxlength=\"300\"\r\n                :showCount=\"true\" />\r\n            </a-form-item>\r\n            <a-form-item :label=\"t('label_link_image')\" name=\"thumb_url\">\r\n              <a-input v-model:value=\"imageText.thumb_url\" style=\"display:none\" />\r\n              <a-form-item-rest>\r\n                <div class=\"upload-row\">\r\n                  <a-upload :show-upload-list=\"false\" :before-upload=\"handleBeforeUpload\"\r\n                    :custom-request=\"(options) => handleUpload(options, 'received_message_images')\"\r\n                    accept=\".png,.jpg,.jpeg\">\r\n                    <a-button type=\"default\">\r\n                      <UploadOutlined />{{ t('btn_upload_image') }}\r\n                    </a-button>\r\n                  </a-upload>\r\n                  <a-input @paste=\"onPaste\" @click=\"pasteImage\" :placeholder=\"t('ph_paste_upload')\"></a-input>\r\n                </div>\r\n                <div v-if=\"imageText.thumb_url\" class=\"preview-wrap\">\r\n                  <img v-viewer :src=\"imageText.thumb_url\" class=\"preview\" />\r\n                  <span class=\"del-icon\" @click=\"removeImage\">\r\n                    <CloseOutlined />\r\n                  </span>\r\n                </div>\r\n              </a-form-item-rest>\r\n            </a-form-item>\r\n          </a-form>\r\n        </div>\r\n      </a-tab-pane>\r\n\r\n      <a-tab-pane key=\"text\">\r\n        <template #tab>\r\n          <span class=\"tab-with-icon\"><svg-icon name=\"reply-content-text\" size=\"14\" /> {{ t('tab_text') }}</span>\r\n        </template>\r\n        <div class=\"text-area\">\r\n          <a-textarea ref=\"textAreaRef\" v-model:value=\"text.description\" :rows=\"6\" :placeholder=\"t('ph_input')\" :maxlength=\"300\"\r\n            :showCount=\"true\" />\r\n          <div class=\"emoji-row\">\r\n            <a-popover v-model:open=\"showEmoji\" placement=\"bottomLeft\" trigger=\"click\" :getPopupContainer=\"getPopup\">\r\n              <template #content>\r\n                <Picker :data=\"emojiIndex\" :emojiSize=\"18\" :showPreview=\"false\" set=\"apple\" @select=\"onEmojiSelect\" />\r\n              </template>\r\n              <a-tooltip :title=\"t('tip_insert_emoji')\">üòä</a-tooltip>\r\n            </a-popover>\r\n          </div>\r\n        </div>\r\n      </a-tab-pane>\r\n\r\n      <a-tab-pane key=\"image\">\r\n        <template #tab>\r\n          <span class=\"tab-with-icon\"><svg-icon name=\"reply-content-image\" size=\"14\" /> {{ t('tab_image') }}</span>\r\n        </template>\r\n        <div class=\"form-grid\">\r\n          <div class=\"upload-drop\" @paste=\"onPaste\" @drop.prevent=\"onDrop\" @dragover.prevent>\r\n            <div class=\"upload-actions\">\r\n              <div v-if=\"image.thumb_url\" class=\"preview-wrap\">\r\n                <img v-viewer :src=\"image.thumb_url\" class=\"preview\" />\r\n                <span class=\"del-icon\" @click=\"removeImage\">\r\n                  <CloseOutlined />\r\n                </span>\r\n              </div>\r\n              <a-upload :show-upload-list=\"false\" :before-upload=\"handleBeforeUpload\"\r\n                :custom-request=\"(options) => handleUpload(options, 'received_message_images')\"\r\n                accept=\".png,.jpg,.jpeg\">\r\n                <div class=\"hint\">{{ t('tip_image_upload') }}</div>\r\n              </a-upload>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </a-tab-pane>\r\n\r\n      <a-tab-pane key=\"url\">\r\n        <template #tab>\r\n          <span class=\"tab-with-icon\"><svg-icon name=\"reply-content-link\" size=\"14\" /> {{ t('tab_url') }}</span>\r\n        </template>\r\n        <div class=\"form-grid\">\r\n          <a-form :model=\"urlCard\" :rules=\"rules.url\" ref=\"urlForm\" layout=\"vertical\" :labelCol=\"labelCol\"\r\n            :wrapperCol=\"wrapperCol\">\r\n            <a-form-item :label=\"t('label_link_title')\" name=\"title\">\r\n              <a-input v-model:value=\"urlCard.title\" :placeholder=\"t('ph_input')\" />\r\n            </a-form-item>\r\n            <a-form-item :label=\"t('label_link_url')\" name=\"url\">\r\n              <a-input v-model:value=\"urlCard.url\" :placeholder=\"t('ph_link_url_2')\" />\r\n            </a-form-item>\r\n          </a-form>\r\n        </div>\r\n      </a-tab-pane>\r\n\r\n      <a-tab-pane key=\"card\">\r\n        <template #tab>\r\n          <span class=\"tab-with-icon\"><svg-icon name=\"applet\" size=\"14\" /> {{ t('tab_mini_card') }}</span>\r\n        </template>\r\n        <div class=\"form-grid\">\r\n          <a-form :model=\"miniCard\" :rules=\"rules.card\" ref=\"cardForm\" layout=\"vertical\" :labelCol=\"cardLabelCol\"\r\n            :wrapperCol=\"cardWrapperCol\">\r\n            <a-alert type=\"info\" style=\"margin-bottom: 16px;\"\r\n              :message=\"t('tip_mini_card')\" />\r\n            <a-form-item :label=\"t('label_mini_title')\" name=\"title\">\r\n              <a-input v-model:value=\"miniCard.title\" :placeholder=\"t('ph_mini_title')\" />\r\n            </a-form-item>\r\n            <a-form-item :label=\"t('label_mini_appid')\" name=\"appid\">\r\n              <a-input v-model:value=\"miniCard.appid\" :placeholder=\"t('ph_mini_appid')\" />\r\n              <div style=\"margin-top: 2px; color: #FB363F;\">{{ t('tip_mini_appid') }}</div>\r\n            </a-form-item>\r\n            <a-form-item :label=\"t('label_mini_path')\" name=\"page_path\">\r\n              <a-input v-model:value=\"miniCard.page_path\" :placeholder=\"t('ph_mini_path')\" />\r\n              <div style=\"margin-top: 2px; color: #8C8C8C;\">{{ t('tip_mini_path') }}</div>\r\n            </a-form-item>\r\n            <a-form-item :label=\"t('label_mini_cover')\" name=\"thumb_url\">\r\n              <a-input v-model:value=\"miniCard.thumb_url\" style=\"display:none\" />\r\n              <a-form-item-rest>\r\n                <div class=\"upload-row\">\r\n                  <a-upload :show-upload-list=\"false\" :before-upload=\"handleBeforeUpload\"\r\n                    :custom-request=\"(options) => handleUpload(options, 'received_message_images')\"\r\n                    accept=\".png,.jpg,.jpeg\">\r\n                    <a-button type=\"default\">{{ t('btn_upload_image_2') }}</a-button>\r\n                  </a-upload>\r\n                  <a-input @paste=\"onPaste\" @click=\"pasteImage\" :placeholder=\"t('ph_paste_upload_2')\"></a-input>\r\n                </div>\r\n                <div v-if=\"miniCard.thumb_url\" class=\"preview-wrap\">\r\n                  <img v-viewer :src=\"miniCard.thumb_url\" class=\"preview\" />\r\n                  <span class=\"del-icon\" @click=\"removeImage\">\r\n                    <CloseOutlined />\r\n                  </span>\r\n                </div>\r\n              </a-form-item-rest>\r\n            </a-form-item>\r\n          </a-form>\r\n        </div>\r\n      </a-tab-pane>\r\n\r\n      <a-tab-pane key=\"smartMenu\" v-if=\"show_smart\">\r\n        <template #tab>\r\n          <span class=\"tab-with-icon\"><svg-icon name=\"reply-content-smart\" size=\"14\" /> {{ t('tab_smart_menu') }}</span>\r\n        </template>\r\n        <div class=\"smart-tab-box\">\r\n          <a-button type=\"dashed\" class=\"choose-smart-btn\" @click=\"openSmartChoose\">\r\n            <template #icon>\r\n              <PlusOutlined />\r\n            </template>\r\n            {{ t('btn_choose_smart') }}\r\n          </a-button>\r\n          <div v-if=\"smartPreview.id\" class=\"smart-preview\">\r\n            <div class=\"smart-list-card\">\r\n              <div class=\"smart-card-header\">\r\n                <a-avatar :src=\"smartPreview.avatar_url || defaultAvatar\" :size=\"40\" shape=\"square\"\r\n                  class=\"smart-avatar\" />\r\n                <div class=\"smart-card-content\">\r\n                  <div class=\"smart-card-title\">{{ smartPreview.menu_description }}</div>\r\n                  <div class=\"smart-card-text\">\r\n                    <template v-for=\"(line, li) in smartPreview.lines\" :key=\"li\">\r\n                      <div class=\"smart-reply-line\" @click=\"onSmartReplyLineClick($event)\">\r\n                        <span class=\"smart-line-text\" v-if=\"line.kind === 'text'\">{{ line.text }}</span>\r\n                        <div v-else-if=\"line.kind === 'newline'\" class=\"empty-line\"></div>\r\n                        <span v-else-if=\"line.kind === 'html'\" v-html=\"line.html\"></span>\r\n                        <a v-else-if=\"line.kind === 'keyword'\" href=\"javascript:;\" class=\"link\">\r\n                          <div v-if=\"line.serial_no\">{{ line.serial_no }}</div>\r\n                          {{ line.text }}\r\n                        </a>\r\n                      </div>\r\n                    </template>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"smart-card-footer\">\r\n                <div class=\"smart-footer-left\">\r\n                  <div class=\"smart-menu-name\">{{ smartPreview.title || t('smart_menu') }}</div>\r\n                  <div class=\"smart-update-time\">{{ t('updated_at') }}{{ formatDateFn(smartPreview.update_time, 'YYYY-MM-DD') }}</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </a-tab-pane>\r\n\r\n      <template #rightExtra>\r\n        <a-button type=\"text\" @click=\"emitDel\">\r\n          <CloseCircleOutlined style=\"font-size: 16px;\" />\r\n        </a-button>\r\n      </template>\r\n    </a-tabs>\r\n\r\n    <a-modal v-if=\"show_smart\" v-model:open=\"smartChooseOpen\" :title=\"t('btn_choose_smart')\" :width=\"860\" @ok=\"onSmartChooseOk\"\r\n      @cancel=\"onSmartChooseCancel\">\r\n      <div class=\"smart-modal\">\r\n        <div class=\"smart-modal-header\">\r\n          <a-button type=\"dashed\" @click=\"openAddSmartMenu\">\r\n            <template #icon>\r\n              <PlusOutlined />\r\n            </template>\r\n            {{ t('btn_add_smart') }}\r\n          </a-button>\r\n          <template v-if=\"isSubscribeMode\">\r\n            <span class=\"ml8\">{{ t('label_select_robot') }}</span>\r\n            <a-select v-model:value=\"selectedRobotId\" style=\"width: 220px\" @change=\"(val) => loadSmartList(val)\">\r\n              <a-select-option v-for=\"rb in robotOptions\" :value=\"rb.id\" :key=\"rb.id\">{{ rb.name }}</a-select-option>\r\n            </a-select>\r\n          </template>\r\n        </div>\r\n        <div v-if=\"smartList.length === 0\" class=\"smart-empty\">\r\n          <a-empty :description=\"t('empty_smart_menu')\" />\r\n        </div>\r\n        <div class=\"smart-grid\" v-else>\r\n          <div class=\"smart-card\" v-for=\"it in smartList\" :key=\"it.id\" :class=\"{ selected: selectedSmartId === it.id }\"\r\n            @click=\"onTogglePick(it.id)\">\r\n            <div class=\"smart-list-card\">\r\n              <div class=\"smart-card-header\">\r\n                <a-avatar :src=\"it.avatar_url || defaultAvatar\" :size=\"40\" shape=\"square\" class=\"smart-avatar\" />\r\n                <div class=\"smart-card-content\">\r\n                  <div class=\"smart-card-title\">{{ it.menu_description }}</div>\r\n                  <div class=\"smart-card-text\">\r\n                    <template v-for=\"(line, li) in getDisplayLines(it)\" :key=\"li\">\r\n                      <div class=\"smart-reply-line\" @click=\"onSmartReplyLineClick($event)\">\r\n                        <span class=\"smart-line-text\" v-if=\"line.kind === 'text'\">{{ line.text }}</span>\r\n                        <div v-else-if=\"line.kind === 'newline'\" class=\"empty-line\"></div>\r\n                        <span v-else-if=\"line.kind === 'html'\" v-html=\"line.html\"></span>\r\n                        <a v-else-if=\"line.kind === 'keyword'\" href=\"javascript:;\" class=\"link\">\r\n                          <div v-if=\"line.serial_no\">{{ line.serial_no }}</div>\r\n                          {{ line.text }}\r\n                        </a>\r\n                      </div>\r\n                    </template>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"smart-card-footer\">\r\n                <div class=\"smart-footer-left\">\r\n                  <div class=\"smart-menu-name\">{{ it.menu_title || it.menu_name || t('smart_menu_2') }}</div>\r\n                  <div class=\"smart-update-time\">{{ t('updated_at_2') }}{{ formatDateFn(it.update_time, 'YYYY-MM-DD') }}</div>\r\n                </div>\r\n                <div class=\"smart-footer-right\" @click.stop>\r\n                  <template v-if=\"selectedSmartId === it.id\">\r\n                    <span class=\"smart-radio-inline\">\r\n                      <div class=\"picked\" @click=\"onTogglePick(it.id)\"></div>\r\n                    </span>\r\n                  </template>\r\n                  <template v-else>\r\n                    <a-dropdown placement=\"bottomRight\">\r\n                      <a class=\"more-btn\" @click.prevent>\r\n                        <EllipsisOutlined />\r\n                      </a>\r\n                      <template #overlay>\r\n                        <a-menu>\r\n                          <a-menu-item key=\"edit\" @click=\"editSmart(it)\">{{ t('btn_edit') }}</a-menu-item>\r\n                          <a-menu-item key=\"del\" class=\"del\" @click=\"delSmart(it)\"\r\n                            style=\"color: #FF4D4F;\">{{ t('btn_delete') }}</a-menu-item>\r\n                        </a-menu>\r\n                      </template>\r\n                    </a-dropdown>\r\n                  </template>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </a-modal>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { PlusOutlined, CloseCircleOutlined, UploadOutlined, CloseOutlined, EllipsisOutlined } from '@ant-design/icons-vue'\r\nimport emojiDataJson from 'emoji-mart-vue-fast/data/all.json'\r\nimport \"emoji-mart-vue-fast/css/emoji-mart.css\"\r\nimport { ref, reactive, watch, nextTick, onMounted, computed } from 'vue'\r\nimport { message } from 'ant-design-vue'\r\nimport { uploadFile } from '@/api/app'\r\nimport { Picker, EmojiIndex } from 'emoji-mart-vue-fast/src'\r\nimport { useRoute } from 'vue-router'\r\nimport { getSmartMenuList, deleteSmartMenu, getSpecifyAbilityConfig, getRobotSpecifyAbilityConfig } from '@/api/explore/index.js'\r\nimport { getRobotList } from '@/api/robot/index.js'\r\nimport dayjs from 'dayjs'\r\nimport { DEFAULT_ROBOT_AVATAR } from '@/constants/index'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('components.replay-card.multi-reply')\r\nconst route = useRoute()\r\n\r\nconst user_smart_configs = ref(['exploreSubscribeReply', 'exploreCustomMenu'])\r\n// Êô∫ËÉΩËèúÂçïÂõûÂ§çÊòØÂê¶ÂºÄÂêØ\r\nconst user_show_smart = ref(false)\r\nconst robot_show_smart = ref(false)\r\n\r\nconst show_smart = computed(() => {\r\n  if (user_smart_configs.value.includes(route.name)) {\r\n    return user_show_smart.value\r\n  } else {\r\n    return robot_show_smart.value\r\n  }\r\n})\r\n\r\nconst props = defineProps({\r\n  value: { type: Object, default: () => ({ type: 'text', description: '' }) },\r\n  reply_index: { type: Number, default: 0 }\r\n})\r\nconst emit = defineEmits(['update:value', 'change', 'del'])\r\n\r\nconst activeTab = ref(props.value.type || 'text')\r\n\r\n// states per tab\r\nconst imageText = reactive({ url: '', title: '', description: '', thumb_url: '' })\r\nconst text = reactive({ description: '' })\r\nconst image = reactive({ thumb_url: '' })\r\nconst urlCard = reactive({ title: '', url: '' })\r\nconst miniCard = reactive({ title: '', appid: '', page_path: '', thumb_url: '' })\r\nconst smartPreview = reactive({ id: '', title: '', update_time: 0, avatar_url: '', lines: [] })\r\nconst smartChooseOpen = ref(false)\r\nconst smartList = ref([])\r\nconst selectedSmartId = ref('')\r\nconst robotOptions = ref([])\r\nconst selectedRobotId = ref('')\r\nconst defaultAvatar = DEFAULT_ROBOT_AVATAR\r\nconst query = useRoute().query\r\nconst isSubscribeMode = computed(() => !robot_show_smart.value && user_smart_configs.value.includes(route.name))\r\nconst pendingSmartValue = ref(null)\r\nconst smartInitLoading = ref(true)\r\n\r\nfunction initRobotShowSmart (robot_id) {\r\n  const rid = String(robot_id || '')\r\n  if (!rid) { robot_show_smart.value = false; return Promise.resolve() }\r\n  return getRobotSpecifyAbilityConfig({ ability_type: 'robot_smart_menu', robot_id: rid }).then((res) => {\r\n    const st = res?.data?.robot_config?.switch_status\r\n    robot_show_smart.value = String(st || '0') == '1'\r\n  })\r\n}\r\n\r\nfunction initUserShowSmart () {\r\n  getSpecifyAbilityConfig({ ability_type: 'robot_smart_menu' }).then((res) => {\r\n    const st = res?.data?.user_config?.switch_status\r\n    user_show_smart.value = String(st || '0') == '1'\r\n  })\r\n}\r\n\r\nlet isUploading = false\r\nconst emojiIndex = new EmojiIndex(emojiDataJson)\r\nconst labelCol = { span: 5 }\r\nconst wrapperCol = { span: 19 }\r\nconst cardLabelCol = { span: 4 }\r\nconst cardWrapperCol = { span: 20 }\r\nconst imageTextForm = ref(null)\r\nconst urlForm = ref(null)\r\nconst cardForm = ref(null)\r\n\r\nwatch(() => text.description, (v) => {\r\n  const s = String(v || '')\r\n  if (s.length > 300) {\r\n    message.warning(t('msg_max_chars'))\r\n    text.description = s.slice(0, 300)\r\n  }\r\n})\r\nwatch(() => imageText.description, (v) => {\r\n  const s = String(v || '')\r\n  if (s.length > 300) {\r\n    message.warning(t('msg_max_chars'))\r\n    imageText.description = s.slice(0, 300)\r\n  }\r\n})\r\n\r\nconst rules = {\r\n  imageText: {\r\n    url: [{ required: true, message: t('msg_input_http_https') }, { validator: httpValidator }],\r\n    title: [{ required: true, message: t('msg_input_title') }],\r\n    description: [{ required: true, message: t('msg_input_desc') }],\r\n    thumb_url: [{ required: true, message: t('msg_upload_link_image') }]\r\n  },\r\n  url: {\r\n    title: [{ required: true, message: t('msg_input_title_2') }],\r\n    url: [{ required: true, message: t('msg_input_http_https_2') }, { validator: httpValidator }]\r\n  },\r\n  card: {\r\n    title: [{ required: true, message: t('msg_input_mini_title') }],\r\n    appid: [{ required: true, message: t('msg_input_mini_appid') }],\r\n    page_path: [{ required: true, message: t('msg_input_mini_path') }],\r\n    thumb_url: [{ required: true, message: t('msg_upload_mini_cover') }]\r\n  },\r\n  smartMenu: {\r\n    id: [{ required: true, message: t('msg_select_smart') }]\r\n  }\r\n}\r\n\r\nfunction httpValidator (_rule, value) {\r\n  if (!value) return Promise.resolve()\r\n  const ok = /^https?:\\/\\//.test(value)\r\n  return ok ? Promise.resolve() : Promise.reject(t('msg_link_protocol'))\r\n}\r\n\r\nconst showEmoji = ref(false)\r\nconst textAreaRef = ref(null)\r\nfunction onEmojiSelect (emoji) {\r\n  const char = emoji?.native || ''\r\n  if (!char) return\r\n  // Â∞ùËØïÂú®ÂÖâÊ†áÂ§ÑÊèíÂÖ•Ë°®ÊÉÖÔºåËã•‰∏çÂèØÁî®ÂàôËøΩÂä†Âà∞Êú´Â∞æ\r\n  let el = textAreaRef.value?.$el?.querySelector('textarea')\r\n  if (el && typeof el.selectionStart === 'number') {\r\n    const start = el.selectionStart\r\n    const end = el.selectionEnd\r\n    const val = text.description || ''\r\n    let nextVal = val.slice(0, start) + char + val.slice(end)\r\n    if ((nextVal || '').length > 300) {\r\n      message.warning(t('msg_max_chars_2'))\r\n      nextVal = (nextVal || '').slice(0, 300)\r\n    }\r\n    text.description = nextVal\r\n    // Êõ¥Êñ∞ÂÖâÊ†á‰ΩçÁΩÆ\r\n    nextTick(() => {\r\n      el.focus()\r\n      const pos = Math.min(start + char.length, (text.description || '').length)\r\n      el.setSelectionRange(pos, pos)\r\n    })\r\n  } else {\r\n    let nextVal = (text.description || '') + char\r\n    if ((nextVal || '').length > 300) {\r\n      message.warning(t('msg_max_chars_2'))\r\n      nextVal = (nextVal || '').slice(0, 300)\r\n    }\r\n    text.description = nextVal\r\n  }\r\n  showEmoji.value = false\r\n  onChange()\r\n}\r\n\r\nfunction onTabChange () { onChange() }\r\n\r\nfunction emitDel () { emit('del', props.reply_index) }\r\n\r\nfunction handleBeforeUpload (file) {\r\n  const isValidType = file.type === 'image/jpeg' || file.type === 'image/png'\r\n  if (!isValidType) {\r\n    message.error(t('msg_image_format'))\r\n    return false\r\n  }\r\n  const isLt2M = file.size / 1024 < 1024 * 2\r\n  if (!isLt2M) {\r\n    message.error(t('msg_image_size'))\r\n    return false\r\n  }\r\n  return true\r\n}\r\n\r\nasync function handleUpload ({ file, onError, onSuccess }, category) {\r\n  try {\r\n    const res = await uploadFile({\r\n      category,\r\n      file\r\n    })\r\n    const url = res?.data?.link || res?.data?.url || ''\r\n    if (activeTab.value === 'imageText') {\r\n      imageText.thumb_url = url\r\n      nextTick(() => { imageTextForm.value?.validateFields?.(['thumb_url']) })\r\n    } else if (activeTab.value === 'image') {\r\n      image.thumb_url = url\r\n    } else if (activeTab.value === 'card') {\r\n      miniCard.thumb_url = url\r\n      nextTick(() => { cardForm.value?.validateFields?.(['thumb_url']) })\r\n    }\r\n    onSuccess && onSuccess(res)\r\n    onChange()\r\n  } catch (e) {\r\n    message.error(t('msg_upload_failed'))\r\n    onError && onError(e)\r\n  }\r\n}\r\n\r\nfunction onChange () {\r\n  const payload = getPayload()\r\n  emit('update:value', payload)\r\n  emit('change', { ...payload, reply_index: props.reply_index })\r\n}\r\n\r\nfunction removeImage () {\r\n  if (activeTab.value === 'imageText') {\r\n    imageText.thumb_url = ''\r\n    nextTick(() => { imageTextForm.value?.validateFields?.(['thumb_url']) })\r\n  }\r\n  else if (activeTab.value === 'image') {\r\n    image.thumb_url = ''\r\n  }\r\n  else if (activeTab.value === 'card') {\r\n    miniCard.thumb_url = ''\r\n    nextTick(() => { cardForm.value?.validateFields?.(['thumb_url']) })\r\n  }\r\n  onChange()\r\n}\r\n\r\nfunction getPayload () {\r\n  const t = activeTab.value\r\n  if (t === 'imageText') {\r\n    return {\r\n      reply_type: t,\r\n      thumb_url: imageText.thumb_url || '',\r\n      title: imageText.title || '',\r\n      description: imageText.description || '',\r\n      url: imageText.url || '',\r\n      page_path: '',\r\n      appid: '',\r\n      status: '1',\r\n      smart_menu_id: '',\r\n      more_img_text_json: '',\r\n      media_id: '',\r\n      pic: imageText.thumb_url || '',\r\n      type: t\r\n    }\r\n  }\r\n  if (t === 'text') {\r\n    return {\r\n      reply_type: t,\r\n      thumb_url: '',\r\n      title: '',\r\n      description: text.description || '',\r\n      url: '',\r\n      page_path: '',\r\n      appid: '',\r\n      status: '1',\r\n      smart_menu_id: '',\r\n      more_img_text_json: '',\r\n      media_id: '',\r\n      pic: '',\r\n      type: t\r\n    }\r\n  }\r\n  if (t === 'image') {\r\n    return {\r\n      reply_type: t,\r\n      thumb_url: image.thumb_url || '',\r\n      title: '',\r\n      description: '',\r\n      url: '',\r\n      page_path: '',\r\n      appid: '',\r\n      status: '1',\r\n      smart_menu_id: '',\r\n      more_img_text_json: '',\r\n      media_id: '',\r\n      pic: image.thumb_url || '',\r\n      type: t\r\n    }\r\n  }\r\n  if (t === 'url') {\r\n    return {\r\n      reply_type: t,\r\n      thumb_url: '',\r\n      title: urlCard.title || '',\r\n      description: '',\r\n      url: urlCard.url || '',\r\n      page_path: '',\r\n      appid: '',\r\n      status: '1',\r\n      smart_menu_id: '',\r\n      more_img_text_json: '',\r\n      media_id: '',\r\n      pic: '',\r\n      type: t\r\n    }\r\n  }\r\n  if (t === 'card') {\r\n    return {\r\n      reply_type: t,\r\n      thumb_url: miniCard.thumb_url || '',\r\n      title: miniCard.title || '',\r\n      description: '',\r\n      url: '',\r\n      page_path: miniCard.page_path || '',\r\n      appid: miniCard.appid || '',\r\n      status: '1',\r\n      smart_menu_id: '',\r\n      more_img_text_json: '',\r\n      media_id: '',\r\n      pic: miniCard.thumb_url || '',\r\n      type: t\r\n    }\r\n  }\r\n  if (t === 'smartMenu') {\r\n    return {\r\n      reply_type: t,\r\n      thumb_url: '',\r\n      title: smartPreview.title || '',\r\n      description: '',\r\n      url: '',\r\n      page_path: '',\r\n      appid: '',\r\n      status: '1',\r\n      smart_menu_id: smartPreview.id || '',\r\n      more_img_text_json: '',\r\n      media_id: '',\r\n      pic: '',\r\n      type: t\r\n    }\r\n  }\r\n  return {\r\n    reply_type: 'text',\r\n    thumb_url: '',\r\n    title: '',\r\n    description: '',\r\n    url: '',\r\n    page_path: '',\r\n    appid: '',\r\n    status: '1',\r\n    smart_menu_id: '',\r\n    more_img_text_json: '',\r\n    media_id: '',\r\n    pic: '',\r\n    type: 'text'\r\n  }\r\n}\r\n\r\n// ËßÑÈÅøÊüê‰∫õÁéØÂ¢É‰∏ã ant popover ÁöÑ getPopupContainer ‰ΩøÁî® triggerNode.parentNode ÂØºËá¥ÁöÑÁ©∫ÂºïÁî®\r\nfunction getPopup () { return document.body }\r\n\r\nfunction pasteImage () { message.info(t('msg_paste_image')); }\r\nfunction onPaste (e) {\r\n  if (isUploading) return\r\n  const items = e.clipboardData?.items || []\r\n  for (const it of items) {\r\n    if (it.type.indexOf('image') !== -1) {\r\n      const file = it.getAsFile()\r\n      if (!file) continue\r\n      if (!handleBeforeUpload(file)) return\r\n      isUploading = true\r\n      handleUpload({ file, onError: () => { isUploading = false }, onSuccess: () => { isUploading = false } }, 'received_message_images')\r\n      break\r\n    }\r\n  }\r\n}\r\nfunction onDrop (e) {\r\n  const file = e.dataTransfer?.files?.[0]\r\n  if (file && handleBeforeUpload(file)) {\r\n    handleUpload({ file, onError: () => { }, onSuccess: () => { } }, 'received_message_images')\r\n  }\r\n}\r\n\r\n// initialize from value\r\nwatch(() => props.value, (val) => {\r\n  const t = val?.type || 'text'\r\n  if (t === 'smartMenu') {\r\n    if (show_smart.value && !smartInitLoading.value) {\r\n      activeTab.value = 'smartMenu'\r\n    } else {\r\n      activeTab.value = 'text'\r\n    }\r\n  } else {\r\n    activeTab.value = t\r\n  }\r\n  if (t === 'imageText') Object.assign(imageText, val)\r\n  else if (t === 'text') Object.assign(text, { description: val?.description || '' })\r\n  else if (t === 'image') Object.assign(image, { thumb_url: val?.thumb_url || '' })\r\n  else if (t === 'url') Object.assign(urlCard, { title: val?.title || '', url: val?.url || '' })\r\n  else if (t === 'card') Object.assign(miniCard, val)\r\n  else if (t === 'smartMenu') {\r\n    if (show_smart.value) {\r\n      smartPreview.id = String(val?.smart_menu_id || '')\r\n      if (smartPreview.id && val?.smart_menu?.id) {\r\n        const data = val.smart_menu || {}\r\n        smartPreview.title = data.menu_title || data.menu_name || ''\r\n        smartPreview.update_time = Number(data.update_time || data.create_time || 0)\r\n        smartPreview.avatar_url = data.avatar_url || ''\r\n        smartPreview.menu_description = data.menu_description || ''\r\n        smartPreview.lines = buildMenuLines(Array.isArray(data.menu_content) ? data.menu_content : [])\r\n      }\r\n      selectedSmartId.value = String(smartPreview.id || '')\r\n    } else {\r\n      pendingSmartValue.value = val\r\n    }\r\n  }\r\n}, { immediate: true })\r\n\r\n// emit changes on input editing\r\nwatch(imageText, () => { onChange() }, { deep: true })\r\nwatch(text, () => { onChange() }, { deep: true })\r\nwatch(image, () => { onChange() }, { deep: true })\r\nwatch(urlCard, () => { onChange() }, { deep: true })\r\nwatch(miniCard, () => { onChange() }, { deep: true })\r\n\r\nfunction formatDateFn (date, format = 'YYYY-MM-DD') {\r\n  if (!date) return '';\r\n  return dayjs(Number(date) * 1000).format(format)\r\n}\r\n\r\nfunction buildMenuLines (menu_content) {\r\n  const out = [];\r\n  (Array.isArray(menu_content) ? menu_content : []).forEach((mc) => {\r\n    const t = String(mc?.menu_type || '')\r\n    const txt = String(mc?.content || '')\r\n    if (t === '0') {\r\n      if (txt === '') {\r\n        out.push({ kind: 'newline' })\r\n      } else if (/<a[\\s\\S]*?<\\/a>/.test(txt)) {\r\n        const sanitized = /href\\s*=\\s*['\"]\\s*#\\s*['\"]/i.test(txt) ? txt.replace(/href\\s*=\\s*['\"]\\s*#\\s*['\"]/ig, 'href=\"javascript:;\"') : txt.replace(/href=/ig, 'target=\"_blank\" href=');\r\n        out.push({\r\n          kind: 'html',\r\n          html: sanitized\r\n        })\r\n      } else {\r\n        out.push({\r\n          kind: 'text',\r\n          text: txt\r\n        })\r\n      }\r\n    } else if (t === '1') {\r\n      out.push({\r\n        kind: 'keyword',\r\n        text: txt,\r\n        serial_no: mc?.serial_no || ''\r\n      })\r\n    }\r\n  })\r\n  return out.slice(0, 8)\r\n}\r\n\r\nfunction buildPreviewLinesFromReplyContent (list) {\r\n  const lines = [];\r\n  (Array.isArray(list) ? list : []).forEach((rc) => {\r\n    const t = rc?.type || rc?.reply_type\r\n    if (t === 'text') {\r\n      if (rc?.description) {\r\n        lines.push({\r\n          kind: 'text',\r\n          text: rc.description\r\n        })\r\n      }\r\n    } else if (t === 'imageText') {\r\n      const txt = rc?.title || rc?.description || t('label_image_text');\r\n      lines.push({ kind: 'keyword', text: txt })\r\n    } else if (t === 'url') {\r\n      const txt = rc?.title || t('label_link');\r\n      lines.push({ kind: 'keyword', text: txt })\r\n    } else if (t === 'image') {\r\n      lines.push({ kind: 'text', text: t('label_image') })\r\n    } else if (t === 'card') {\r\n      const txt = rc?.title || t('label_mini_card');\r\n      lines.push({ kind: 'text', text: txt })\r\n    } else if (t === 'smartMenu') {\r\n      const txt = rc?.title || t('label_smart_menu');\r\n      lines.push({ kind: 'text', text: txt })\r\n    }\r\n  })\r\n  return lines.slice(0, 8)\r\n}\r\n\r\nfunction getDisplayLines (item) {\r\n  if (Array.isArray(item?.menu_content) && item.menu_content.length) return buildMenuLines(item.menu_content)\r\n  return buildPreviewLinesFromReplyContent(item?.reply_content || [])\r\n}\r\n\r\nfunction openSmartChoose () {\r\n  smartChooseOpen.value = true\r\n  selectedSmartId.value = String(smartPreview.id || '')\r\n  if (isSubscribeMode.value) {\r\n    // ÂÖ≥Ê≥®ÂêéÂõûÂ§çÔºöÂÖàÈÄâÊã©Êú∫Âô®‰∫∫ÔºåÂÜçÊãâÂèñÂÖ∂Êô∫ËÉΩËèúÂçï\r\n    loadRobotOptions().then(() => {\r\n      const def = selectedRobotId.value || robotOptions.value[0]?.id || ''\r\n      selectedRobotId.value = String(def)\r\n      if (def) loadSmartList(def)\r\n    })\r\n  } else {\r\n    loadSmartList()\r\n  }\r\n}\r\nfunction openAddSmartMenu () { const url = `/#/robot/ability/smart-menu?id=${query.id}&robot_key=${query.robot_key}`; window.open(url, '_blank') }\r\nfunction loadSmartList (robot_id) {\r\n  const rid = String(robot_id || query.id || '')\r\n  getSmartMenuList({ robot_id: rid }).then((res) => {\r\n    const list = Array.isArray(res?.data?.list) ? res.data.list : []\r\n  smartList.value = list.map((it) => ({\r\n    id: String(it.id || ''),\r\n    menu_title: it.menu_title || it.menu_name || t('smart_menu_3'),\r\n    update_time: Number(it.update_time || it.create_time || 0),\r\n    avatar_url: it.avatar_url || '',\r\n    menu_description: it.menu_description || '',\r\n    menu_content: Array.isArray(it.menu_content) ? it.menu_content : [],\r\n    reply_content: Array.isArray(it.reply_content) ? it.reply_content : []\r\n  }))\r\n  // ÈªòËÆ§‰∏çÈÄâ‰∏≠‰ªª‰ΩïÊô∫ËÉΩËèúÂçï\r\n}).catch(() => { smartList.value = [] })\r\n}\r\n\r\nasync function loadRobotOptions () {\r\n  try {\r\n    const res = await getRobotList()\r\n    const lists = Array.isArray(res?.data) ? res.data : []\r\n    robotOptions.value = lists.map((r) => ({ id: String(r.id || ''), name: r.robot_name || r.name || r.app_name || r.id }))\r\n  } catch (_) {\r\n    robotOptions.value = []\r\n  }\r\n}\r\n\r\nfunction onSmartChooseOk () {\r\n  if (!selectedSmartId.value) { message.warning(t('msg_select_one_smart')); return }\r\n  const picked = smartList.value.find((it) => String(it.id) === String(selectedSmartId.value))\r\n  if (!picked) { message.error(t('msg_smart_not_found')); return }\r\n  smartPreview.id = String(picked.id || selectedSmartId.value)\r\n  smartPreview.title = picked.menu_title || picked.menu_name || ''\r\n  smartPreview.update_time = Number(picked.update_time || picked.create_time || 0)\r\n  smartPreview.avatar_url = picked.avatar_url || ''\r\n  smartPreview.menu_description = picked.menu_description || ''\r\n  smartPreview.lines = getDisplayLines(picked)\r\n  activeTab.value = 'smartMenu'\r\n  onChange()\r\n  smartChooseOpen.value = false\r\n}\r\nfunction onSmartChooseCancel () { smartChooseOpen.value = false }\r\n\r\nfunction onTogglePick (id) {\r\n  const sid = String(id || '')\r\n  selectedSmartId.value = (String(selectedSmartId.value || '') === sid) ? '' : sid\r\n}\r\n\r\nfunction editSmart (it) {\r\n  const url = `/#/robot/ability/smart-menu/add-rule?id=${query.id}&robot_key=${query.robot_key}&rule_id=${it.id}`\r\n  window.open(url, '_blank')\r\n}\r\nfunction delSmart (it) {\r\n  deleteSmartMenu({ id: it.id, robot_id: query.id }).then((res) => {\r\n    if (res && res.res == 0) {\r\n      message.success(t('msg_delete_success'))\r\n      loadSmartList()\r\n    }\r\n  })\r\n}\r\n\r\nfunction onSmartReplyLineClick (e) {\r\n  const a = e.target?.closest?.('a')\r\n  if (!a) return\r\n  const href = String(a.getAttribute('href') || '')\r\n  if (href === '#' || href === 'javascript:;') {\r\n    e.preventDefault();\r\n    e.stopPropagation()\r\n  }\r\n}\r\n\r\nasync function validate () {\r\n  const t = activeTab.value\r\n  try {\r\n    if (t === 'imageText') {\r\n      try { await imageTextForm.value?.validate(); return true } catch (_e) { message.warning(t('msg_complete_image_text')); return false }\r\n    }\r\n    if (t === 'text') {\r\n      const s = String(text.description || '').trim()\r\n      if (!s) { message.warning(t('msg_input_text')); return false }\r\n      return true\r\n    }\r\n    if (t === 'image') {\r\n      const url = String(image.thumb_url || '').trim()\r\n      if (!url) { message.warning(t('msg_upload_image_2')); return false }\r\n      return true\r\n    }\r\n    if (t === 'url') {\r\n      try { await urlForm.value?.validate(); return true } catch (_e) { message.warning(t('msg_complete_url')); return false }\r\n    }\r\n    if (t === 'card') {\r\n      try { await cardForm.value?.validate(); return true } catch (_e) { message.warning(t('msg_complete_mini_card')); return false }\r\n    }\r\n    if (t === 'smartMenu') {\r\n      const sid = String(selectedSmartId.value || smartPreview.id || '')\r\n      if (!sid) { message.warning(t('msg_select_smart_2')); return false }\r\n      return true\r\n    }\r\n  } catch (_e) {\r\n    return false\r\n  }\r\n  return true\r\n}\r\n\r\nonMounted(async () => {\r\n  try {\r\n    if (user_smart_configs.value.includes(route.name)) {\r\n      await initUserShowSmart()\r\n    } else {\r\n      await initRobotShowSmart(route.query.id)\r\n    }\r\n  } finally {\r\n    smartInitLoading.value = false\r\n  }\r\n})\r\n\r\nwatch(() => show_smart.value, (v) => {\r\n  if (v && pendingSmartValue.value) {\r\n    const val = pendingSmartValue.value\r\n    activeTab.value = 'smartMenu'\r\n    smartPreview.id = String(val?.smart_menu_id || '')\r\n    if (smartPreview.id && val?.smart_menu?.id) {\r\n      const data = val.smart_menu || {}\r\n      smartPreview.title = data.menu_title || data.menu_name || ''\r\n      smartPreview.update_time = Number(data.update_time || data.create_time || 0)\r\n      smartPreview.avatar_url = data.avatar_url || ''\r\n      smartPreview.menu_description = data.menu_description || ''\r\n      smartPreview.lines = buildMenuLines(Array.isArray(data.menu_content) ? data.menu_content : [])\r\n    }\r\n    selectedSmartId.value = String(smartPreview.id || '')\r\n    pendingSmartValue.value = null\r\n  }\r\n})\r\n\r\ndefineExpose({ validate })\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.multi-reply-card {\r\n  width: 694px;\r\n  background: #F2F4F7;\r\n  border-radius: 6px;\r\n  padding: 0px 16px 16px;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.tab-with-icon {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n}\r\n\r\n.smart-tab-box {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n}\r\n\r\n.choose-smart-btn {\r\n  align-self: flex-start;\r\n}\r\n\r\n.smart-preview {\r\n  margin-top: 4px;\r\n  width: 355px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.smart-modal-header {\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.smart-empty {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 24px 0;\r\n}\r\n\r\n.smart-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(2, minmax(300px, 1fr));\r\n  gap: 16px;\r\n}\r\n\r\n.smart-card {\r\n  position: relative;\r\n  cursor: pointer;\r\n}\r\n\r\n.smart-card.selected .smart-list-card {\r\n  border-color: #2475FC;\r\n  box-shadow: 0 0 0 2px rgba(36, 117, 252, 0.2);\r\n}\r\n\r\n.smart-footer-right {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n}\r\n\r\n.smart-action {\r\n  color: #595959;\r\n  cursor: pointer;\r\n}\r\n\r\n.smart-action.del {\r\n  color: #FF4D4F;\r\n}\r\n\r\n.smart-radio-inline {\r\n  width: 18px;\r\n  height: 18px;\r\n  border-radius: 50%;\r\n  border: 1px solid #2475FC;\r\n  background: #fff;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n}\r\n\r\n.smart-radio-inline .picked {\r\n  width: 10px;\r\n  height: 10px;\r\n  border-radius: 50%;\r\n  background: #2475FC;\r\n}\r\n\r\n.form-grid {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12px;\r\n}\r\n\r\n.upload-row {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.progress-row {\r\n  margin-top: 8px;\r\n}\r\n\r\n.preview {\r\n  cursor: pointer;\r\n  margin-top: 8px;\r\n  width: 120px;\r\n  height: 120px;\r\n  object-fit: contain;\r\n  border-radius: 6px;\r\n  border: 1px solid #d9d9d9;\r\n}\r\n\r\n.preview-box {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.preview-wrap {\r\n  width: 120px;\r\n  position: relative;\r\n  display: inline-block;\r\n}\r\n\r\n.del-icon {\r\n  position: absolute;\r\n  top: 4px;\r\n  right: -10px;\r\n  width: 22px;\r\n  height: 22px;\r\n  border-radius: 50%;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  color: #fff;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n  opacity: 0;\r\n  transition: opacity .2s ease;\r\n}\r\n\r\n.preview-wrap:hover .del-icon {\r\n  opacity: 1;\r\n}\r\n\r\n.text-area {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n}\r\n\r\n.emoji-row {\r\n  display: flex;\r\n  align-items: center;\r\n  cursor: pointer;\r\n  gap: 8px;\r\n}\r\n\r\n.emoji-grid {\r\n  display: flex;\r\n  gap: 6px;\r\n  flex-wrap: wrap;\r\n  padding: 6px;\r\n  background: #fff;\r\n  border: 1px solid #eee;\r\n  border-radius: 6px;\r\n}\r\n\r\n.emoji-item {\r\n  cursor: pointer;\r\n}\r\n\r\n.upload-drop {\r\n  border-radius: 6px;\r\n\r\n  .upload-actions {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 8px;\r\n\r\n    .hint {\r\n      cursor: pointer;\r\n      display: flex;\r\n      padding: 12px 0;\r\n      justify-content: center;\r\n      align-items: center;\r\n      gap: 10px;\r\n      background: #F2F4F7;\r\n      color: #3a4559;\r\n      text-align: center;\r\n      font-size: 14px;\r\n      font-style: normal;\r\n      font-weight: 400;\r\n      line-height: 22px;\r\n    }\r\n  }\r\n}\r\n\r\n.ml8 {\r\n  margin-left: 8px;\r\n}\r\n\r\n@media (max-width:768px) {\r\n  .preview {\r\n    width: 96px;\r\n    height: 96px;\r\n  }\r\n}\r\n\r\n.smart-list-card {\r\n  border: 1px solid #e6e8ec;\r\n  border-radius: 12px;\r\n  background: #fff;\r\n  padding: 0;\r\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.04);\r\n  transition: box-shadow .2s ease, transform .2s ease;\r\n}\r\n\r\n.smart-list-card:hover {\r\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);\r\n  transform: translateY(-2px);\r\n}\r\n\r\n.smart-card-header {\r\n  display: flex;\r\n  align-items: flex-start;\r\n  gap: 8px;\r\n  padding: 12px 60px 12px 12px;\r\n  background: #F2F4F7;\r\n  border-radius: 12px 12px 0 0;\r\n  height: 200px;\r\n  box-shadow: 0 -4px 8px 0 #00000014 inset;\r\n  overflow-y: auto;\r\n  scrollbar-width: thin;\r\n  scrollbar-color: #d9d9d9 transparent;\r\n}\r\n\r\n.smart-card-header::-webkit-scrollbar {\r\n  width: 6px;\r\n  height: 6px;\r\n}\r\n\r\n.smart-card-header::-webkit-scrollbar-track {\r\n  background: transparent;\r\n  border-radius: 8px;\r\n}\r\n\r\n.smart-card-header::-webkit-scrollbar-thumb {\r\n  background: #d9d9d9;\r\n  border-radius: 8px;\r\n}\r\n\r\n.smart-card-header::-webkit-scrollbar-thumb:hover {\r\n  background: #A1A7B3;\r\n}\r\n\r\n.smart-card-content {\r\n  width: 100%;\r\n  flex: 1;\r\n  padding: 12px;\r\n  background: #fff;\r\n  border-radius: 2px 12px 12px 12px;\r\n}\r\n\r\n.smart-card-title {\r\n  white-space: wrap;\r\n  align-self: stretch;\r\n  color: #1a1a1a;\r\n  font-size: 14px;\r\n  font-style: normal;\r\n  font-weight: 400;\r\n  line-height: 20px;\r\n  margin-bottom: 14px;\r\n}\r\n\r\n.smart-card-text {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 10px;\r\n  color: #3a4559;\r\n  font-size: 14px;\r\n  line-height: 22px;\r\n  overflow: visible;\r\n\r\n  .smart-reply-line {\r\n    line-height: 22px;\r\n\r\n    .smart-line-text {\r\n      color: #3a4559;\r\n    }\r\n\r\n    .empty-line {\r\n      height: 22px;\r\n    }\r\n\r\n    .link {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 4px;\r\n    }\r\n  }\r\n}\r\n\r\n.smart-reply-line .link:hover {\r\n  opacity: 0.7;\r\n}\r\n\r\n.smart-card-footer {\r\n  box-sizing: border-box;\r\n  margin-top: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 12px 16px;\r\n  border-top: 1px solid #edeff2;\r\n}\r\n\r\n.smart-footer-left {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: self-start;\r\n}\r\n\r\n.smart-menu-name {\r\n  align-self: stretch;\r\n  color: #262626;\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  line-height: 22px;\r\n}\r\n\r\n.smart-update-time {\r\n  align-self: stretch;\r\n  color: #8c8c8c;\r\n  font-size: 12px;\r\n  font-weight: 400;\r\n  line-height: 16px;\r\n}\r\n\r\n.smart-avatar {\r\n  border-radius: 4px !important;\r\n}\r\n\r\n/* Èò≤Ê≠¢Áà∂Á∫ß vertical Ë°®ÂçïÂΩ±ÂìçÂÜÖÈÉ®Ê®™ÂêëË°®ÂçïÂ∏ÉÂ±Ä */\r\n.multi-reply-card ::v-deep(.ant-form-item-row) {\r\n  flex-direction: row;\r\n}\r\n\r\n.multi-reply-card ::v-deep(.ant-form-item) {\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.more-btn {\r\n  color: #595959;\r\n  width: 24px;\r\n  height: 24px;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 6px;\r\n}\r\n\r\n.more-btn:hover {\r\n  color: #595959;\r\n  background: #E4E6EB;\r\n}\r\n</style>\r\n"],"names":["t","useI18n","route","useRoute","user_smart_configs","ref","user_show_smart","robot_show_smart","show_smart","computed","props","__props","emit","__emit","activeTab","imageText","reactive","text","image","urlCard","miniCard","smartPreview","smartChooseOpen","smartList","selectedSmartId","robotOptions","selectedRobotId","defaultAvatar","DEFAULT_ROBOT_AVATAR","query","isSubscribeMode","pendingSmartValue","smartInitLoading","initRobotShowSmart","robot_id","rid","getRobotSpecifyAbilityConfig","res","st","_b","_a","initUserShowSmart","getSpecifyAbilityConfig","isUploading","emojiIndex","EmojiIndex","emojiDataJson","labelCol","wrapperCol","cardLabelCol","cardWrapperCol","imageTextForm","urlForm","cardForm","watch","v","s","message","rules","httpValidator","_rule","value","showEmoji","textAreaRef","onEmojiSelect","emoji","char","el","start","end","val","nextVal","nextTick","pos","onChange","onTabChange","emitDel","handleBeforeUpload","file","handleUpload","onError","onSuccess","category","uploadFile","url","e","payload","getPayload","removeImage","getPopup","pasteImage","onPaste","items","it","onDrop","data","buildMenuLines","formatDateFn","date","format","dayjs","menu_content","out","mc","txt","sanitized","buildPreviewLinesFromReplyContent","list","lines","rc","getDisplayLines","item","openSmartChoose","loadRobotOptions","def","loadSmartList","openAddSmartMenu","getSmartMenuList","getRobotList","lists","r","onSmartChooseOk","picked","onSmartChooseCancel","onTogglePick","id","sid","editSmart","delSmart","deleteSmartMenu","onSmartReplyLineClick","a","href","validate","_c","onMounted","__expose","_openBlock","_createElementBlock","_hoisted_1","_createVNode","_component_a_tabs","$event","_component_a_button","_unref","CloseCircleOutlined","_component_a_tab_pane","_createElementVNode","_hoisted_2","_component_svg_icon","_createTextVNode","_hoisted_3","_component_a_form","_component_a_form_item","_component_a_input","_cache","_component_a_textarea","_component_a_form_item_rest","_hoisted_4","_component_a_upload","options","UploadOutlined","_hoisted_5","CloseOutlined","_hoisted_7","_hoisted_8","_hoisted_9","_component_a_popover","Picker","_component_a_tooltip","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_15","_toDisplayString","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_component_a_alert","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_createBlock","_hoisted_25","_hoisted_26","PlusOutlined","_hoisted_27","_hoisted_28","_hoisted_29","_component_a_avatar","_hoisted_30","_hoisted_31","_hoisted_32","_Fragment","line","li","_hoisted_33","_hoisted_34","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_component_a_modal","_hoisted_42","_hoisted_43","_hoisted_44","_component_a_select","_renderList","rb","_component_a_select_option","_hoisted_45","_component_a_empty","_hoisted_46","_hoisted_48","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","_hoisted_54","_hoisted_56","_hoisted_57","_hoisted_58","_hoisted_59","_hoisted_60","_hoisted_61","_hoisted_62","_component_a_dropdown","_component_a_menu","_component_a_menu_item","EllipsisOutlined"],"mappings":"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"}