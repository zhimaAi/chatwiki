import{_ as M,a as N,d as V}from"../../index-C1Xsov4S.js";import{e as C,f as d,o as L,aa as O,Y as p,a5 as t,a1 as q,a7 as i,G as u,k as _,a2 as R,u as S,n as E,a9 as G,q as H,_ as v,l as f}from"./vue-chunks-DCKTEHpB.js";import{B as I,bG as z,M as h,Q as k,a as K}from"./ui-antd-D64OvTpt.js";import{L as Q}from"./loading-box-CyUSXD2F.js";import{b as Y,u as $}from"./template-Dj_TLj8R.js";import"./utils-D9NMMoMR.js";const j={class:"_container _plugin-detail-cont"},A={key:1,class:"content"},F={class:"base-info"},J={class:"top"},P=["src"],U={class:"info"},W={class:"left"},X={class:"name zm-line1"},Z={class:"source"},tt=["src"],st={class:"right"},et={class:"desc"},ot={class:"action-box"},at={class:"left"},nt={class:"detail-info"},it={class:"left"},ct={class:"main-block"},lt=["innerHTML"],rt={class:"right"},dt={class:"main-block"},ut={class:"text-cont flex-center"},_t={__name:"detail",setup(vt){const g=G(),b=O(),x=N(),{companyInfo:l}=x,y=C(()=>l==null?void 0:l.version),r=d(!0),m=d(null),o=d({});L(()=>{var s;m.value=(s=b.query)==null?void 0:s.key,T()});function T(){r.value=!0,Y({robot_id:m.value}).then(s=>{o.value=(s==null?void 0:s.data)||{}}).finally(()=>{r.value=!1})}function w(){const s=o.value;function e(a,n){return a=Number(a.replace(/\D/g,"")),n=Number(n.replace(/\D/g,"")),a>=n}const c=()=>{$({template_id:s.id,csl_url:s.csl_url}).then(a=>{K.success("使用成功");const{id:n,robot_key:B}=a.data,D=g.resolve({path:"/robot/config/workflow",query:{id:n,robot_key:B}});window.open(D.href,"_blank")})};e(y.value,s.version)?h.confirm({title:"提示",content:`确定使用模板【${s.name}】创建应用吗?`,icon:f(k),okText:"确 认",cancelText:"取 消",onOk:c}):h.confirm({title:"提示",content:"当前系统版本过低，可能无法使用此模板；请您升级到最新版本后使用！",icon:f(k),okText:"继续使用",cancelText:"取 消",onOk:c})}return(s,e)=>{const c=V,a=I,n=H("viewer");return v(),p("div",j,[e[4]||(e[4]=t("div",{class:"header"},[t("span",{class:"title"},"模板详情")],-1)),r.value?(v(),q(Q,{key:0})):(v(),p("div",A,[t("div",F,[t("div",J,[t("img",{class:"avatar",src:o.value.avatar},null,8,P),t("div",U,[t("div",W,[t("div",X,i(o.value.name),1),t("div",Z,[t("img",{class:"avatar",src:o.value.account_avatar},null,8,tt),u(" "+i(o.value.author),1)])]),t("div",st,[_(a,{class:"use-btn",type:"primary",ghost:"",onClick:w},{default:R(()=>[_(c,{name:"icon-rocket"}),e[0]||(e[0]=u(" 使用模板 ",-1))]),_:1})])])]),t("div",et,i(o.value.description),1),t("div",ot,[t("div",at,[_(S(z)),u(" "+i(o.value.use_count||0),1)]),e[1]||(e[1]=t("div",{class:"right"},null,-1))])]),t("div",nt,[t("div",it,[t("div",ct,[e[2]||(e[2]=t("div",{class:"main-tit"},"使用说明",-1)),E(t("pre",{class:"text-cont",innerHTML:o.value.instructions},null,8,lt),[[n]])])]),t("div",rt,[t("div",dt,[e[3]||(e[3]=t("div",{class:"main-tit"},"模板分类",-1)),t("div",ut,i(o.value.category_name),1)])])])]))])}}},bt=M(_t,[["__scopeId","data-v-90e99fff"]]);export{bt as default};
