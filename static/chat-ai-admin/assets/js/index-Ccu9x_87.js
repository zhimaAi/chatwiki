import{_ as H,ad as Ct,ac as xt,d as ut,a7 as Z}from"../../index-WMhSApoa.js";import{av as _t,f as h,o as tt,ac as o,ad as e,ae as T,k as r,F as O,ax as j,as as t,at as l,ar as v,u as P,G as I,az as F,B as V,e as et,l as st,ak as ct,aC as wt,ai as X,r as Rt,aw as Dt}from"./vue-chunks-CGLjTDrY.js";import{E as rt}from"./empty-box-D_CoSHrC.js";import{c as Pt,b as ft,s as G,a as nt,r as vt,t as Ot,u as St,e as dt,f as Mt,o as Tt,h as It}from"./index-BMl5QCxm.js";import{L as pt}from"./loading-box-Cv0UwFHD.js";import{U as ht}from"./update-modal-B50rIb6s.js";import{v as gt,J as mt,ay as ot,ae as at,B as Q,a6 as kt,as as lt,aA as it,M as W,b as Y,d as Bt,Q as zt,a0 as Nt,I as At}from"./ui-antd-BDReVt-O.js";import{_ as yt}from"./tool-icon-IWVrYlVb.js";import{_ as $t}from"./no-permission-DtJ3NYHG.js";import{F as jt,P as qt,u as Lt}from"./useOfficialArticleLogin-ZjAYs06-.js";import{_ as Ut}from"./main-tab-Dj8mxI1n.js";import{u as Ft}from"./usePublicNetworkCheck-BkBxEFXe.js";import{P as Et}from"./public-network-check-y9oFwSGO.js";import"./neo4j-CK9lNpyi.js";import"./utils-DXEytJvC.js";import"./other-BrZCAsTs.js";import"./empty-BFmzY9bl.js";/* empty css                                                                     */import"./list-tabs-CdNhBT49.js";const Jt={class:"_plugin-box"},Vt={key:1,class:"plugin-list"},Yt=["onClick"],Ht={class:"type-tag"},Wt={class:"base-info"},Gt=["src"],Qt={class:"info"},Kt={class:"head"},Xt={class:"name zm-line1"},Zt={class:"source"},te={class:"version"},ee={class:"action-box"},se={class:"left"},ne={class:"right"},oe=["href"],ae=["onClick"],le={key:1},ie=["onClick"],ce={__name:"remotePlugins",props:{filterData:{type:Object,default:null}},emits:["installReport"],setup(E,{expose:q,emit:x}){const y=x,_=E,p=_t(),$=h(null),g=h(!0),w=h([]),B=h({});tt(()=>{c()});function D(){w.value=[],c()}async function c(){g.value=!0,await m(),Pt(_.filterData).then(d=>{let s=(d==null?void 0:d.data)||[];s.forEach(n=>{var k;let{local:i,has_update:M}=((k=B.value)==null?void 0:k[n.name])||{};n.local=i,n.has_update=M}),w.value=s}).finally(()=>{g.value=!1})}async function m(){await ft().then(d=>{let s=(d==null?void 0:d.data)||[];y("installReport",s.length);let n={};s.forEach(i=>{n[i.local.name]={local:i.local,has_update:i.remote.latest_version!=i.local.version}}),B.value=n})}function S(d){p.push({path:"/plugins/detail",query:{name:d.name}})}function f(d){$.value.show(d,d.latest_version_detail,d.local||null)}return q({search:D}),(d,s)=>{const n=gt,i=ut,M=mt;return e(),o("div",Jt,[g.value?(e(),T(pt,{key:0})):w.value.length?(e(),o("div",Vt,[(e(!0),o(O,null,j(w.value,k=>(e(),o("div",{onClick:C=>S(k),key:k.name,class:"plugin-item"},[t("div",Ht,l(k.filter_type_title),1),t("div",Wt,[t("img",{class:"avatar",src:k.icon},null,8,Gt),t("div",Qt,[t("div",Kt,[t("span",Xt,l(k.title),1)]),t("div",Zt,l(k.author),1)])]),r(n,{title:P(xt)(k.description,k,14,1,0),placement:"top"},{default:v(()=>[t("div",{class:"desc zm-line1",ref_for:!0,ref:C=>P(Ct)(C,k)},l(k.description),513)]),_:2},1032,["title"]),t("div",te,"版本：v"+l(k.latest_version),1),t("div",ee,[t("div",se,[r(i,{name:"download"}),I(" "+l(k.installed_count||0),1)]),t("div",ne,[k.help_url?(e(),o(O,{key:0},[t("a",{onClick:s[0]||(s[0]=V(()=>{},["stop"])),class:"c595959",href:k.help_url,target:"_blank"},"使用说明",8,oe),r(M,{type:"vertical"})],64)):F("",!0),k.local?(e(),o(O,{key:1},[k.has_update?(e(),o("a",{key:0,onClick:V(C=>f(k),["stop"])},"更新",8,ae)):(e(),o("span",le,"已安装"))],64)):(e(),o("a",{key:2,onClick:V(C=>f(k),["stop"])},"安装",8,ie))])])],8,Yt))),128))])):(e(),T(rt,{key:2,title:"暂无可用插件"})),r(ht,{ref_key:"updateRef",ref:$,onOk:c},null,512)])}}},de=H(ce,[["__scopeId","data-v-d44ea48a"]]),ue={class:"head-box"},_e={class:"base-info-box"},re=["src"],fe={class:"info-box"},ve={class:"left"},pe={class:"name zm-line1"},he={class:"right"},ge={class:"link"},me={class:"tools-box"},ke={class:"info"},ye={class:"tit zm-line1"},$e={class:"btns"},be=["onClick"],Ce=["onClick"],xe={class:"body-box"},we={key:0,class:"no-auth-box"},Re={key:1,class:"action-box"},De={class:"tit"},Pe={class:"desc"},Oe={class:"params"},Se={class:"params-box"},Me={class:"field"},Te={class:"name"},Ie={class:"type"},Be={key:0,class:"required"},ze={class:"desc"},Ne={__name:"feishu-config-box",emits:["del","edit","auth"],setup(E,{expose:q,emit:x}){const y=h(null),_=h(!1),p=h({}),$=h({}),g=h({}),w=et(()=>Object.keys($.value).length);function B(s){p.value=s,c(),m(),_.value=!0}function D(){_.value=!1}function c(){nt({name:p.value.name}).then(s=>{$.value=Z(s==null?void 0:s.data,{})})}function m(){vt({name:p.value.name,action:"default/get-schema",params:{}}).then(s=>{let n=(s==null?void 0:s.data)||{};for(let i in n)n[i].type!="node"&&delete n[i];g.value=n})}function S(){y.value.show($.value)}function f(s,n){for(let i in $.value)$.value[i].is_default=i==n;G({name:p.value.name,data:JSON.stringify($.value)}).then(i=>{c()})}function d(s,n){W.confirm({title:"提示",content:"确认删除该配置？",onOk:()=>{delete $.value[n],G({name:p.value.name,data:JSON.stringify($.value)}).then(i=>{c(),Y.success("已删除")})}})}return q({show:B,hide:D}),(s,n)=>{const i=lt,M=Q,k=at,C=it;return e(),o("div",null,[r(C,{open:_.value,"onUpdate:open":n[1]||(n[1]=R=>_.value=R),placement:"right",width:"400px",headerStyle:{display:"none"},bodyStyle:{padding:0}},{default:v(()=>[t("div",ue,[t("div",_e,[t("img",{class:"avatar",src:p.value.icon},null,8,re),t("div",fe,[t("div",ve,[t("div",pe,l(p.value.title),1),t("div",null,l(p.value.author),1)]),t("div",he,[r(P(ot),{onClick:n[0]||(n[0]=R=>_.value=!1),class:"icon"})])])]),t("div",ge,l(p.value.description),1),w.value>0?(e(),T(k,{key:0,placement:"bottom"},{content:v(()=>[t("div",me,[(e(!0),o(O,null,j($.value,(R,N)=>(e(),o("div",{key:N,class:"tool-item"},[n[3]||(n[3]=t("img",{class:"cover",src:yt},null,-1)),t("div",ke,[t("div",ye,l(R.name),1),t("div",$e,[R.is_default?(e(),T(i,{key:0,color:"#f50"},{default:v(()=>[...n[2]||(n[2]=[I("默认",-1)])]),_:1})):(e(),o("a",{key:1,onClick:A=>f(R,N)},"设为默认",8,be)),t("a",{onClick:A=>d(R,N)},"删除",8,Ce)])])]))),128))])]),default:v(()=>[r(M,{type:"primary",icon:st(P(kt)),class:"auth-btn",onClick:S},{default:v(()=>[I(" 已授权"+l(w.value)+"个凭证 ",1)]),_:1},8,["icon"])]),_:1})):(e(),T(M,{key:1,type:"primary",class:"auth-btn",onClick:S},{default:v(()=>[...n[4]||(n[4]=[I("立即授权",-1)])]),_:1}))]),t("div",xe,[w.value?(e(),o("div",Re,[(e(!0),o(O,null,j(g.value,(R,N)=>(e(),o("div",{key:N,class:"action-item"},[t("div",De,l(R.title),1),t("div",Pe,l(R.desc),1),t("div",Oe,[(e(!0),o(O,null,j(Object.keys(R.params).slice(0,3),(A,a)=>(e(),T(i,{key:a,bordered:!1},{default:v(()=>[I(l(A),1)]),_:2},1024))),128)),r(k,{placement:"right"},{content:v(()=>[t("div",Se,[(e(!0),o(O,null,j(R.params,(A,a)=>(e(),o("div",{key:a,class:"param-item"},[t("div",Me,[t("span",Te,l(a),1),t("span",Ie,l(A.type),1),A.required?(e(),o("span",Be,"必填")):F("",!0)]),t("div",ze,l(A.desc),1)]))),128))])]),default:v(()=>[n[8]||(n[8]=t("a",null,"参数",-1))]),_:2},1024)])]))),128))])):(e(),o("div",we,[n[5]||(n[5]=t("img",{src:$t},null,-1)),n[6]||(n[6]=t("div",{class:"tit"},"需要授权",-1)),n[7]||(n[7]=t("div",{class:"desc"},"授权后，配置将显示在这里",-1)),t("a",{class:"link",onClick:S},"立即授权")]))])]),_:1},8,["open"]),r(jt,{ref_key:"configModalRef",ref:y,onChange:c},null,512)])}}},Ae=H(Ne,[["__scopeId","data-v-22974c28"]]),je={class:"head-box"},qe={class:"base-info-box"},Le=["src"],Ue={class:"info-box"},Fe={class:"left"},Ee={class:"name zm-line1"},Je={class:"right"},Ve={class:"link"},Ye={class:"tools-box"},He={class:"info"},We={class:"tit zm-line1"},Ge={class:"btns"},Qe=["onClick"],Ke=["onClick"],Xe={class:"body-box"},Ze={key:0,class:"no-auth-box"},ts={key:1,class:"action-box"},es={class:"tit"},ss={class:"desc"},ns={class:"params"},os={class:"params-box"},as={class:"field"},ls={class:"name"},is={class:"type"},cs={key:0,class:"required"},ds={class:"desc"},us={__name:"plugin-config-box",setup(E,{expose:q}){const x=h(!1),y=h({}),_=h({}),p=h({}),$=h(null),g=et(()=>Object.keys(_.value).length);function w(d,s){y.value=d,c(),m(s),x.value=!0}function B(){x.value=!1}function D(){$.value&&$.value.show(_.value,y.value.name,p.value)}function c(){nt({name:y.value.name}).then(d=>{_.value=Z(d==null?void 0:d.data,{})})}function m(d){let s=d||{};for(let n in s)s[n].type!="node"&&delete s[n];p.value=s}function S(d,s){for(let n in _.value)_.value[n].is_default=n==s;G({name:y.value.name,data:JSON.stringify(_.value)}).then(()=>{c()})}function f(d,s){W.confirm({title:"提示",content:"确认删除该配置？",onOk:()=>{delete _.value[s],G({name:y.value.name,data:JSON.stringify(_.value)}).then(()=>{c(),Y.success("已删除")})}})}return q({show:w,hide:B}),(d,s)=>{const n=lt,i=Q,M=at,k=it;return e(),o("div",null,[r(k,{open:x.value,"onUpdate:open":s[1]||(s[1]=C=>x.value=C),placement:"right",width:"400px",headerStyle:{display:"none"},bodyStyle:{padding:0}},{default:v(()=>[t("div",je,[t("div",qe,[t("img",{class:"avatar",src:y.value.icon},null,8,Le),t("div",Ue,[t("div",Fe,[t("div",Ee,l(y.value.title),1),t("div",null,l(y.value.author),1)]),t("div",Je,[r(P(ot),{onClick:s[0]||(s[0]=C=>x.value=!1),class:"icon"})])])]),t("div",Ve,l(y.value.description),1),g.value>0?(e(),T(M,{key:0,placement:"bottom"},{content:v(()=>[t("div",Ye,[(e(!0),o(O,null,j(_.value,(C,R)=>(e(),o("div",{key:R,class:"tool-item"},[s[3]||(s[3]=t("img",{class:"cover",src:yt},null,-1)),t("div",He,[t("div",We,l(C.name),1),t("div",Ge,[C.is_default?(e(),T(n,{key:0,color:"#f50"},{default:v(()=>[...s[2]||(s[2]=[I("默认",-1)])]),_:1})):(e(),o("a",{key:1,onClick:N=>S(C,R)},"设为默认",8,Qe)),t("a",{onClick:N=>f(C,R)},"删除",8,Ke)])])]))),128))])]),default:v(()=>[r(i,{type:"primary",icon:st(P(kt)),class:"auth-btn",onClick:D},{default:v(()=>[I("已授权"+l(g.value)+"个凭证",1)]),_:1},8,["icon"])]),_:1})):(e(),T(i,{key:1,type:"primary",class:"auth-btn",onClick:D},{default:v(()=>[...s[4]||(s[4]=[I("立即授权",-1)])]),_:1}))]),t("div",Xe,[g.value?(e(),o("div",ts,[(e(!0),o(O,null,j(p.value,(C,R)=>(e(),o("div",{key:R,class:"action-item"},[t("div",es,l(C.title),1),t("div",ss,l(C.desc),1),t("div",ns,[(e(!0),o(O,null,j(Object.keys(C.params).slice(0,3),(N,A)=>(e(),T(n,{key:A,bordered:!1},{default:v(()=>[I(l(N),1)]),_:2},1024))),128)),r(M,{placement:"right"},{content:v(()=>[t("div",os,[(e(!0),o(O,null,j(C.params,(N,A)=>(e(),o("div",{key:A,class:"param-item"},[t("div",as,[t("span",ls,l(A),1),t("span",is,l(N.type),1),N.required?(e(),o("span",cs,"必填")):F("",!0)]),t("div",ds,l(N.desc),1)]))),128))])]),default:v(()=>[s[8]||(s[8]=t("a",null,"参数",-1))]),_:2},1024)])]))),128))])):(e(),o("div",Ze,[s[5]||(s[5]=t("img",{src:$t},null,-1)),s[6]||(s[6]=t("div",{class:"tit"},"需要授权",-1)),s[7]||(s[7]=t("div",{class:"desc"},"授权后，配置将显示在这里",-1)),t("a",{class:"link",onClick:D},"立即授权")]))])]),_:1},8,["open"]),r(qt,{ref_key:"configModalRef",ref:$,onChange:c},null,512)])}}},_s=H(us,[["__scopeId","data-v-7dd7886f"]]),rs={class:"head-box"},fs={class:"base-info-box"},vs=["src"],ps={class:"info-box"},hs={class:"left"},gs={class:"name zm-line1"},ms={class:"right"},ks={class:"link"},ys={class:"body-box"},$s={class:"action-box"},bs={class:"tit"},Cs={class:"desc"},xs={class:"params"},ws={class:"params-box"},Rs={class:"field"},Ds={class:"name"},Ps={class:"type"},Os={key:0,class:"required"},Ss={class:"desc"},Ms={__name:"config-box",emits:["del","edit","auth"],setup(E,{expose:q,emit:x}){const y=x,_=h(!1),p=h({}),$=h({}),g=h(null);function w(c){p.value=c,D()}function B(){_.value=!1}function D(){vt({name:p.value.name,action:"default/get-schema",params:{}}).then(c=>{let m=(c==null?void 0:c.data)||{};if(Object.values(m||{}).some(f=>f&&f.use_plugin_config===!0)){g.value&&g.value.show(p.value,m),_.value=!1;return}for(let f in m)m[f].type!="node"&&delete m[f];$.value=m,_.value=!0})}return q({show:w,hide:B}),(c,m)=>{const S=lt,f=at,d=it;return e(),o("div",null,[r(d,{open:_.value,"onUpdate:open":m[1]||(m[1]=s=>_.value=s),placement:"right",width:"400px",headerStyle:{display:"none"},bodyStyle:{padding:0}},{default:v(()=>[t("div",rs,[t("div",fs,[t("img",{class:"avatar",src:p.value.icon},null,8,vs),t("div",ps,[t("div",hs,[t("div",gs,l(p.value.title),1),t("div",null,l(p.value.author),1)]),t("div",ms,[r(P(ot),{onClick:m[0]||(m[0]=s=>_.value=!1),class:"icon"})])])]),t("div",ks,l(p.value.description),1),ct(c.$slots,"head-extra",{},void 0,!0)]),t("div",ys,[ct(c.$slots,"body",{},()=>[t("div",$s,[(e(!0),o(O,null,j($.value,(s,n)=>(e(),o("div",{key:n,class:"action-item"},[t("div",bs,l(s.title),1),t("div",Cs,l(s.desc),1),t("div",xs,[(e(!0),o(O,null,j(Object.keys(s.params).slice(0,3),(i,M)=>(e(),T(S,{key:M,bordered:!1},{default:v(()=>[I(l(i),1)]),_:2},1024))),128)),r(f,{placement:"right"},{content:v(()=>[t("div",ws,[(e(!0),o(O,null,j(s.params,(i,M)=>(e(),o("div",{key:M,class:"param-item"},[t("div",Rs,[t("span",Ds,l(M),1),t("span",Ps,l(i.type),1),i.required?(e(),o("span",Os,"必填")):F("",!0)]),t("div",Ss,l(i.desc),1)]))),128))])]),default:v(()=>[m[3]||(m[3]=t("a",null,"参数",-1))]),_:2},1024)])]))),128))])],!0)])]),_:3},8,["open"]),r(_s,{ref_key:"pluginConfigRef",ref:g,onAuth:m[2]||(m[2]=s=>y("auth"))},null,512)])}}},bt=H(Ms,[["__scopeId","data-v-9b040dcb"]]),Ts="/assets/img/official-unlogin-DhPFhfcv.png",Is={class:"main-box"},Bs={class:"login-info-box"},zs=["src"],Ns={class:"info"},As={class:"name"},js=["href"],qs={class:"no-auth-box"},Ls={class:"desc"},Us={__name:"official-article-config",setup(E,{expose:q}){const{loginInfo:x,loginStatus:y,loginUrl:_,loading:p,refresh:$,goLogin:g}=Lt(),w=h(null);function B(D){w.value.show(D)}return q({show:B}),(D,c)=>{const m=Q;return e(),T(bt,{ref_key:"configRef",ref:w},wt({_:2},[P(y)?{name:"head-extra",fn:v(()=>{var S,f;return[t("div",Is,[t("div",Bs,[t("img",{class:"avatar",src:(S=P(x))==null?void 0:S.headimgurl},null,8,zs),t("div",Ns,[t("div",As,l((f=P(x))==null?void 0:f.nickname),1),t("div",null,"最近登录时间："+l(P(Bt)(P(x).login_time*1e3).format("YYYY-MM-DD HH:mm")),1),t("div",null,"已登录时长："+l(P(x).login_duration_text),1)])]),t("a",{class:"main-btn",href:P(_),target:"_blank"},"修改密码/设置离线通知",8,js)])]}),key:"0"}:{name:"body",fn:v(()=>[t("div",qs,[c[3]||(c[3]=t("img",{src:Ts},null,-1)),c[4]||(c[4]=t("div",{class:"tit"},"请先完成登录",-1)),r(m,{type:"primary",class:"link",onClick:P(g)},{default:v(()=>[...c[0]||(c[0]=[I("去登录",-1)])]),_:1},8,["onClick"]),t("div",Ls,[c[2]||(c[2]=I("已登录？",-1)),r(m,{type:"link",onClick:P($),loading:P(p)},{default:v(()=>[...c[1]||(c[1]=[I("点击刷新",-1)])]),_:1},8,["onClick","loading"])])])]),key:"1"}]),1536)}}},Fs=H(Us,[["__scopeId","data-v-abf73e86"]]),Es={class:"_plugin-box"},Js={key:1,class:"plugin-list"},Vs=["onClick"],Ys={class:"type-tag"},Hs={class:"base-info"},Ws=["src"],Gs={class:"info"},Qs={class:"head"},Ks={class:"name zm-line1"},Xs={class:"source"},Zs={class:"version"},tn={key:0,class:"tag"},en={class:"action-box"},sn={class:"right"},nn=["onClick"],on=["href"],an=["onClick"],ln=["onClick"],cn={class:"text-center mt24"},dn={__name:"installPlugins",props:{filterData:{type:Object,default:null}},emits:["installReport","tabChange"],setup(E,{expose:q,emit:x}){const y=x,_=E,p=_t(),$=h(null),g=h(null),w=h(null),B=h(null),D=h(!0),c=h([]),m=["feishu_bitable","official_account_profile","official_batch_tag","official_send_template_message","official_send_message","official_intelligent_api","official_account_batch_send","official_account_comment","official_article"];tt(()=>{n()});function S(a,u){if(!a)return null;const U=document.createElement("canvas").getContext("2d");U.font='14px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif';const L=U.measureText(a).width,K=(u==null?void 0:u.title_width)||120;return L>K?a:null}function f(){c.value=[],n()}const d=h([]),s=et(()=>_.filterData.filter_type==0||_.filterData.filter_type==5?[...d.value,...c.value]:c.value);function n(){Ot(_.filterData).then(a=>{let u=(a==null?void 0:a.data)||[];u=u.map(z=>{var U,L;return{...z.remote,local:z.local,has_update:((U=z.remote)==null?void 0:U.latest_version)!=((L=z.local)==null?void 0:L.version),installing:!1}}),d.value=u}),D.value=!0,ft(_.filterData).then(a=>{let u=(a==null?void 0:a.data)||[];y("installReport",u.length),u=u.map(z=>{var U,L;return{...z.remote,local:z.local,has_update:((U=z.remote)==null?void 0:U.latest_version)!=((L=z.local)==null?void 0:L.version),installing:!1}}),c.value=u}).finally(()=>{D.value=!1})}async function i(a){const u=()=>a.local.has_loaded=!a.local.has_loaded;if(!a.local.has_loaded)W.confirm({title:"确认关闭该插件？",content:"关闭后，其他应用的位置都不可使用！确认关闭？",okText:"确定",cancelText:"取消",onOk:()=>{a.local.type=="trigger"?dt({id:a.trigger_config_id,switch_status:0}).then(()=>{Y.success("已关闭")}).catch(u):Mt({name:a.name}).then(()=>{Y.success("已关闭")}).catch(u)},onCancel(){u()}});else{if(a.local.type=="trigger"){dt({id:a.trigger_config_id,switch_status:1}).then(()=>{Y.success("已开启")});return}if(a.name=="feishu_bitable"){let{data:z}=await nt({name:a.name});if(z=Z(z,{}),!Object.keys(z).length)return u(),W.confirm({title:"授权飞书应用接口权限",content:st("div",{style:{color:" red"}},"请先完成信息配置，获取接口权限"),okText:"确定",cancelText:"取消",onOk:()=>{M(a)}})}Tt({name:a.name}).then(()=>{Y.success("已开启")}).catch(u)}}function M(a){g.value.show(a)}function k(a){W.confirm({title:"确认删除该插件？",content:"删除后，其他应用的位置都不可使用！确认删除？",okText:"确定",cancelText:"取消",onOk:()=>{St({name:a.name}).then(()=>{Y.success("已删除"),n()})}})}function C(a){a.local.type!="trigger"&&p.push({path:"/plugins/detail",query:{name:a.name}})}function R(a){a.name==="feishu_bitable"?M(a):a.name==="official_article"?w.value.show(a):B.value.show(a)}function N(a){$.value.show(a,a.latest_version_detail,a.local)}function A(a,u){a&&u&&(u.title_width=a.offsetWidth)}return q({search:f}),(a,u)=>{const z=gt,U=zt,L=mt,K=Q;return e(),o("div",Es,[D.value?(e(),T(pt,{key:0})):s.value.length?(e(),o("div",Js,[(e(!0),o(O,null,j(s.value,b=>(e(),o("div",{onClick:J=>C(b),key:b.name,class:X(["plugin-item",{"trigger-plugin-item":b.local.type=="trigger"}])},[t("div",Ys,l(b.filter_type_title),1),t("div",Hs,[t("img",{class:"avatar",src:b.icon},null,8,Ws),t("div",Gs,[t("div",Qs,[t("span",Ks,l(b.title),1)]),t("div",Xs,l(b.author),1)])]),r(z,{title:S(b.description,b),placement:"top"},{default:v(()=>[t("div",{class:"desc zm-line1",ref_for:!0,ref:J=>A(J,b)},l(b.description),513)]),_:2},1032,["title"]),t("div",Zs,[I("版本：v"+l(b.local.version)+" ",1),b.has_update?(e(),o("span",tn,"有更新")):F("",!0)]),t("div",en,[t("div",{class:"left",onClick:u[0]||(u[0]=V(()=>{},["stop"]))},[r(U,{checked:b.local.has_loaded,"onUpdate:checked":J=>b.local.has_loaded=J,onChange:J=>i(b)},null,8,["checked","onUpdate:checked","onChange"])]),t("div",sn,[b.local.type!="trigger"?(e(),o("span",{key:0,class:"zm-link-pointer",onClick:V(J=>k(b),["stop"])},"删除",8,nn)):F("",!0),b.help_url?(e(),o(O,{key:1},[r(L,{type:"vertical"}),t("a",{onClick:u[1]||(u[1]=V(()=>{},["stop"])),class:"c595959",href:b.help_url,target:"_blank"},"使用说明",8,on)],64)):F("",!0),m.includes(b.name)||b.local.multiNode?(e(),o(O,{key:2},[r(L,{type:"vertical"}),t("a",{onClick:V(J=>R(b),["stop"])},"配置",8,an)],64)):F("",!0),b.has_update?(e(),o(O,{key:3},[r(L,{type:"vertical"}),t("a",{onClick:V(J=>N(b),["stop"])},"更新",8,ln)],64)):F("",!0)])])],10,Vs))),128))])):(e(),T(rt,{key:2,title:"暂未安装插件"},{desc:v(()=>[t("div",null,[u[4]||(u[4]=I("更多功能可到 ",-1)),t("a",{onClick:u[2]||(u[2]=b=>y("tabChange",3))},"探索>插件广场"),u[5]||(u[5]=I(" 中去添加",-1))]),t("div",cn,[r(K,{class:"btn",type:"primary",onClick:u[3]||(u[3]=b=>y("tabChange",3))},{default:v(()=>[...u[6]||(u[6]=[I("去添加",-1)])]),_:1})])]),_:1})),r(ht,{ref_key:"updateRef",ref:$,onOk:n},null,512),r(Ae,{ref_key:"feishuRef",ref:g},null,512),r(Fs,{ref_key:"officialArtRef",ref:w},null,512),r(bt,{ref_key:"configRef",ref:B},null,512)])}}},un=H(dn,[["__scopeId","data-v-1feecb83"]]),_n={class:"_container"},rn={class:"header"},fn={class:"main-tab-box"},vn={class:"content"},pn={class:"filter-box"},hn={class:"radio-tabs"},gn=["onClick"],mn=["src"],kn={__name:"index",setup(E){const{isPublicNetwork:q}=Ft(),x=Dt(),y=h(null),_=h(null),p=h(localStorage.getItem("zm:explore:active")||"2"),$=h([]),g=Rt({title:"",filter_type:0});tt(()=>{x.query.active>1&&y.value.change(x.query.active),w()});function w(){It().then(f=>{$.value=(f==null?void 0:f.data)||[]})}function B(){_.value.search()}function D(f){g.filter_type=f,B()}function c(f){f>1&&(p.value=f)}function m(f){y.value.change(f)}function S(){y.value.update()}return(f,d)=>{const s=ut,n=At;return e(),o("div",_n,[t("div",rn,[t("div",fn,[r(Ut,{ref_key:"tabRef",ref:y,onChange:c},null,512)])]),t("div",vn,[t("div",pn,[t("div",hn,[t("div",{onClick:d[0]||(d[0]=i=>D(0)),class:X(["radio-tab",{active:g.filter_type==0}])},[r(s,{name:"icon-all"}),d[2]||(d[2]=t("span",null,"全部",-1))],2),(e(!0),o(O,null,j($.value,i=>(e(),o("div",{onClick:M=>D(i.id),key:i.id,class:X(["radio-tab",{active:i.id==g.filter_type}])},[t("img",{class:"icon",src:i.id==g.filter_type?i.icon_active_path:i.icon_path},null,8,mn),t("span",null,l(i.type_title),1)],10,gn))),128))]),r(n,{value:g.title,"onUpdate:value":d[1]||(d[1]=i=>g.title=i),valueModifiers:{trim:!0},onChange:B,style:{width:"360px"},allowClear:"",placeholder:"搜索插件"},{suffix:v(()=>[r(P(Nt))]),_:1},8,["value"])]),P(q)?p.value==3?(e(),T(de,{key:1,onInstallReport:S,filterData:g,ref_key:"pluginRef",ref:_},null,8,["filterData"])):(e(),T(un,{key:2,onTabChange:m,onInstallReport:S,filterData:g,ref_key:"pluginRef",ref:_},null,8,["filterData"])):(e(),T(Et,{key:0}))])])}}},qn=H(kn,[["__scopeId","data-v-78568dfa"]]);export{qn as default};
