{"version":3,"file":"add-group-BYEOdPBe.js","sources":["../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-list/components/avatar-input.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-list/components/add-robot-alert.vue","../../../../front-end/chat-ai-admin-vue/src/views/robot/robot-list/components/add-group.vue"],"sourcesContent":["<template>\r\n  <div class=\"avatar-uploader\">\r\n    <a-upload\r\n      v-model:file-list=\"fileList\"\r\n      :list-type=\"props.listType\"\r\n      :show-upload-list=\"false\"\r\n      :before-upload=\"beforeUpload\"\r\n      accept=\".jpg,.png,.jpeg\"\r\n      @preview=\"handlePreview\"\r\n      :style=\"props.style\" \r\n    >\r\n      <img class=\"avatar\" :style=\"props.style\" v-if=\"value\" :src=\"value\" alt=\"avatar\" />\r\n      <div v-else>\r\n        <loading-outlined v-if=\"loading\"></loading-outlined>\r\n        <plus-outlined v-else></plus-outlined>\r\n        <div class=\"ant-upload-text\">上传照片</div>\r\n      </div>\r\n    </a-upload>\r\n\r\n    <a-modal :open=\"previewVisible\" :title=\"previewTitle\" :footer=\"null\" @cancel=\"handleCancel\">\r\n      <img alt=\"example\" style=\"width: 100%\" :src=\"previewImage\" />\r\n    </a-modal>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, watch } from 'vue'\r\nimport { message, Form } from 'ant-design-vue'\r\nimport { LoadingOutlined, PlusOutlined } from '@ant-design/icons-vue'\r\n\r\nfunction getBase64(file) {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader()\r\n    reader.readAsDataURL(file)\r\n    reader.onload = () => resolve(reader.result)\r\n    reader.onerror = (error) => reject(error)\r\n  })\r\n}\r\n\r\nconst emit = defineEmits(['update:value', 'change'])\r\nconst props = defineProps({\r\n  value: {\r\n    type: String,\r\n    default: ''\r\n  },\r\n  listType: {\r\n    type: String,\r\n    default: 'picture-card'\r\n  },\r\n  style: {\r\n    type: Object,\r\n    default: () => {}\r\n  }\r\n})\r\n\r\nconst fileList = ref([])\r\nconst loading = ref(false)\r\nconst imageUrl = ref('')\r\n\r\nwatch(\r\n  () => props.value,\r\n  (val) => {\r\n    imageUrl.value = val\r\n  },\r\n  {\r\n    immediate: true\r\n  }\r\n)\r\n\r\nconst formItemContext = Form.useInjectFormItemContext()\r\n\r\nconst triggerChange = () => {\r\n  let data = {\r\n    imageUrl: imageUrl.value,\r\n    file: fileList.value[0].originFileObj\r\n  }\r\n\r\n  emit('change', data)\r\n  emit('update:value', data.imageUrl)\r\n\r\n  formItemContext.onFieldChange()\r\n}\r\n\r\nconst beforeUpload = (file) => {\r\n  const isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png'\r\n\r\n  if (!isJpgOrPng) {\r\n    message.error('机器人头像只支持JPG、PNG格式的图片')\r\n    return false\r\n  }\r\n\r\n  const isLt2M = file.size / 1024 < 100\r\n\r\n  if (!isLt2M) {\r\n    message.error('机器人头像图片大小不能超过100kb')\r\n    return false\r\n  }\r\n\r\n  fileList.value = [file]\r\n\r\n  getBase64(file).then((base64Url) => {\r\n    imageUrl.value = base64Url\r\n    loading.value = false\r\n\r\n    triggerChange()\r\n  })\r\n\r\n  return false\r\n}\r\n\r\nconst previewVisible = ref(false)\r\nconst previewImage = ref('')\r\nconst previewTitle = ref('')\r\n\r\nconst handleCancel = () => {\r\n  previewVisible.value = false\r\n  previewTitle.value = ''\r\n}\r\nconst handlePreview = async (file) => {\r\n  if (!file.url && !file.preview) {\r\n    file.preview = await getBase64(file.originFileObj)\r\n  }\r\n  previewImage.value = file.url || file.preview\r\n  previewVisible.value = true\r\n  previewTitle.value = file.name || file.url.substring(file.url.lastIndexOf('/') + 1)\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.avatar-uploader::v-deep(.ant-upload) {\r\n  margin: 0 !important;\r\n}\r\n\r\n.ant-upload-select-picture-card i {\r\n  font-size: 32px;\r\n  color: #999;\r\n}\r\n\r\n.ant-upload-select-picture-card .ant-upload-text {\r\n  margin-top: 8px;\r\n  color: #666;\r\n}\r\n\r\n.avatar-uploader .avatar {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n</style>\r\n","<style lang=\"less\" scoped>\r\n.form-box {\r\n  margin-top: 24px;\r\n}\r\n.form-item-tip {\r\n  color: #8c8c8c;\r\n}\r\n.robot-type-box {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 18px;\r\n  .robot-item {\r\n    padding: 16px;\r\n    flex: 1;\r\n    height: 128px;\r\n    border: 1px solid #d9d9d9;\r\n    border-radius: 6px;\r\n    cursor: pointer;\r\n    position: relative;\r\n    transition: all 0.2s cubic-bezier(0.645, 0.045, 0.355, 1);\r\n    .desc {\r\n      margin-top: 12px;\r\n      color: #595959;\r\n      font-size: 14px;\r\n      line-height: 22px;\r\n    }\r\n    .avatar-box {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 16px;\r\n\r\n      img {\r\n        width: 40px;\r\n        height: 40px;\r\n      }\r\n    }\r\n    .robot-item-title {\r\n      font-size: 16px;\r\n      color: #262626;\r\n      font-weight: 600;\r\n    }\r\n\r\n    &.active {\r\n      border: 1px solid #2475fc;\r\n      .robot-item-title {\r\n        color: #2475fc;\r\n      }\r\n    }\r\n\r\n    .check-arrow {\r\n      position: absolute;\r\n      display: block;\r\n      right: -1px;\r\n      bottom: -1px;\r\n      width: 24px;\r\n      height: 24px;\r\n      font-size: 24px;\r\n      color: #fff;\r\n    }\r\n  }\r\n}\r\n\r\n.robot-avatar-box {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n\r\n  .form-item-tip {\r\n    color: #8c8c8c;\r\n    font-size: 14px;\r\n    font-style: normal;\r\n    font-weight: 400;\r\n    line-height: 22px;\r\n  }\r\n}\r\n</style>\r\n\r\n<template>\r\n  <a-modal\r\n    :width=\"isEdit ? '472px' : '746px'\"\r\n    v-model:open=\"show\"\r\n    :confirmLoading=\"saveLoading\"\r\n    :title=\"title\"\r\n    @ok=\"handleSave\"\r\n    @cancel=\"onCancel\"\r\n  >\r\n    <div class=\"form-box\">\r\n      <a-form layout=\"vertical\">\r\n        <!-- <a-form-item label=\"应用类型\" required>\r\n          <div class=\"robot-type-box\">\r\n            <div\r\n              class=\"robot-item\"\r\n              :class=\"{ active: formState.application_type == 0 }\"\r\n              @click=\"formState.application_type = 0\"\r\n            >\r\n              <svg-icon\r\n                v-if=\"formState.application_type == 0\"\r\n                class=\"check-arrow\"\r\n                name=\"check-arrow-filled\"\r\n              ></svg-icon>\r\n              <div class=\"avatar-box\">\r\n                <img src=\"@/assets/svg/chat-robot-icon.svg\" alt=\"\" />\r\n                <div class=\"robot-item-title\">聊天机器人</div>\r\n              </div>\r\n              <div class=\"desc\">简易的基于LLM和知识库的聊天应用，配置简单，适合新人上手</div>\r\n            </div>\r\n            <div\r\n              class=\"robot-item\"\r\n              :class=\"{ active: formState.application_type == 1 }\"\r\n              @click=\"formState.application_type = 1\"\r\n            >\r\n              <svg-icon\r\n                v-if=\"formState.application_type == 1\"\r\n                class=\"check-arrow\"\r\n                name=\"check-arrow-filled\"\r\n              ></svg-icon>\r\n              <div class=\"avatar-box\">\r\n                <img src=\"@/assets/svg/workflow-robot-icon.svg\" alt=\"\" />\r\n                <div class=\"robot-item-title\">工作流</div>\r\n              </div>\r\n              <div class=\"desc\">可编排的任务工作流，将任务拆解成多个步骤逐步执行</div>\r\n            </div>\r\n          </div>\r\n        </a-form-item> -->\r\n        <a-form-item ref=\"name\" label=\"\" v-bind=\"validateInfos.robot_avatar_url\" v-if=\"isEdit\">\r\n          <div class=\"robot-avatar-box\">\r\n            <AvatarInput :listType=\"'picture'\" :style=\"{ width: '62px', height: '62px', borderRadius: '16px' }\" v-model:value=\"formState.robot_avatar_url\" @change=\"onAvatarChange\" />\r\n            <div class=\"form-item-tip\">{{ t('ph_upload_avatar') }}</div>\r\n          </div>\r\n        </a-form-item>\r\n\r\n        <a-form-item required v-if=\"formState.application_type != 0\" ref=\"en_name\" :label=\"t('label_workflow_name')\" v-bind=\"validateInfos.en_name\">\r\n          <a-input v-model:value=\"formState.en_name\" :maxLength=\"50\" :placeholder=\"t('ph_input')\" />\r\n          <div class=\"form-item-tip\">{{ t('msg_workflow_name_format') }}</div>\r\n        </a-form-item>\r\n\r\n        <a-form-item  ref=\"name\" :label=\"formState.application_type == 0 ? t('label_app_name') : t('label_remark_name')\" v-bind=\"validateInfos.robot_name\">\r\n          <a-input v-model:value=\"formState.robot_name\" :maxLength=\"20\" :placeholder=\"t('ph_input')\" />\r\n          <div  v-if=\"formState.application_type != 0\"  class=\"form-item-tip\">{{ t('msg_remark_name_tip') }}</div>\r\n        </a-form-item>\r\n\r\n        <a-form-item  ref=\"group_id\" :label=\"t('label_group')\" v-bind=\"validateInfos.group_id\">\r\n          <a-select v-model:value=\"formState.group_id\" style=\"width: 100%\" :placeholder=\"t('ph_select_group')\">\r\n            <a-select-option v-for=\"item in groupLists\" :value=\"item.id\">{{ item.group_name }}</a-select-option>\r\n          </a-select>\r\n        </a-form-item>\r\n\r\n        <a-form-item :label=\"t('label_intro')\" v-bind=\"validateInfos.robot_intro\">\r\n          <a-textarea\r\n            v-if=\"!isEdit\"\r\n            :rows=\"3\"\r\n            v-model:value=\"formState.robot_intro\"\r\n            :placeholder=\"t('ph_intro_chat')\"\r\n          />\r\n          <a-textarea\r\n            v-else\r\n            :rows=\"3\"\r\n            v-model:value=\"formState.robot_intro\"\r\n            :placeholder=\"t('ph_intro_workflow')\"\r\n          />\r\n        </a-form-item>\r\n\r\n        <a-form-item ref=\"name\" :label=\"t('label_robot_avatar')\" v-bind=\"validateInfos.robot_avatar_url\" v-if=\"!isEdit\">\r\n          <AvatarInput v-model:value=\"formState.robot_avatar_url\" @change=\"onAvatarChange\" />\r\n          <div class=\"form-item-tip\">{{ t('ph_upload_avatar') }}</div>\r\n        </a-form-item>\r\n      </a-form>\r\n    </div>\r\n  </a-modal>\r\n</template>\r\n\r\n<script setup>\r\nimport { useStorage } from '@/hooks/web/useStorage'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\nimport { ref, reactive, h, onMounted, computed } from 'vue'\r\nimport { Form, message, Modal } from 'ant-design-vue'\r\nimport { CloseCircleFilled } from '@ant-design/icons-vue'\r\nimport { getModelConfigOption } from '@/api/model/index'\r\nimport { saveRobot, editBaseInfo, getRobotGroupList } from '@/api/robot/index'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport AvatarInput from './avatar-input.vue'\r\nimport { DEFAULT_ROBOT_AVATAR, DEFAULT_WORKFLOW_AVATAR } from '@/constants/index'\r\nimport { useRobotStore } from '@/stores/modules/robot'\r\n\r\nconst { t } = useI18n('views.robot.robot-list.components.add-robot-alert')\r\nconst robotStore = useRobotStore()\r\n\r\nconst { setStorage } = useStorage('localStorage')\r\n\r\nconst emit = defineEmits(['addRobot', 'editRobot', 'ok'])\r\nlet default_avatar = ''\r\n\r\nconst route = useRoute()\r\nconst router = useRouter()\r\nconst useForm = Form.useForm\r\n\r\nconst isEdit = ref(false)\r\nconst show = ref(false)\r\n\r\nconst saveLoading = ref(false)\r\nconst groupLists = ref([])\r\n\r\nconst formState = reactive({\r\n  robot_name: '',\r\n  en_name: '',\r\n  robot_intro: '',\r\n  robot_avatar: undefined,\r\n  robot_avatar_url: '',\r\n  application_type: 0,\r\n  group_id: '0'\r\n})\r\n\r\nconst title = computed(() => {\r\n  if(formState.application_type == 0){\r\n    if(isEdit.value){\r\n      return t('title_edit_robot_info')\r\n    }else{\r\n      return t('title_create_chat_robot')\r\n    }\r\n\r\n  }else{\r\n    if(isEdit.value){\r\n      return t('title_edit_workflow_info')\r\n    }else{\r\n      return t('title_create_workflow')\r\n    }\r\n  }\r\n})\r\n\r\nconst robotInfo = computed(() => {\r\n  return robotStore.robotInfo\r\n})\r\n\r\nconst { getRobot } = robotStore\r\n\r\nconst rules = computed(() => ({\r\n  robot_name: [\r\n    {\r\n      required: true,\r\n      message: t('msg_robot_name_required'),\r\n      trigger: 'change'\r\n    },\r\n    {\r\n      min: 1,\r\n      max: 20,\r\n      message: t('msg_max_20_chars'),\r\n      trigger: 'change'\r\n    }\r\n  ],\r\n  en_name:[\r\n  ]\r\n}))\r\n\r\nconst { validate, validateInfos, clearValidate } = useForm(formState, rules)\r\n\r\nconst onAvatarChange = (data) => {\r\n  formState.robot_avatar = data.file\r\n}\r\n\r\nconst saveForm = () => {\r\n  let formData = {\r\n    robot_name: formState.robot_name,\r\n    en_name: formState.en_name,\r\n    robot_intro: formState.robot_intro,\r\n    robot_avatar: formState.robot_avatar || default_avatar,\r\n    group_id: formState.group_id || '0'\r\n  }\r\n\r\n  saveLoading.value = true\r\n\r\n  let requertUrl = saveRobot\r\n  let tipVal = 'msg_robot_created'\r\n  if (isEdit.value) {\r\n    requertUrl = editBaseInfo\r\n    formData.id = route.query.id\r\n    tipVal = 'msg_robot_edited'\r\n    if (formData.robot_avatar == default_avatar) {\r\n      delete formData.robot_avatar\r\n    }\r\n  }\r\n\r\n  requertUrl(formData, formState.application_type)\r\n    .then((res) => {\r\n      saveLoading.value = false\r\n\r\n      if (res.res != 0) {\r\n        return message.error(res.msg)\r\n      }\r\n\r\n      message.success(t(tipVal))\r\n      if(!isEdit.value && route.query.robot_key){\r\n        emit('addRobot')\r\n        show.value = false\r\n        return\r\n      }\r\n      if (!isEdit.value) {\r\n        if (formState.application_type == 0) {\r\n          router.push(\r\n            '/robot/config/basic-config?id=' + res.data.id + '&robot_key=' + res.data.robot_key\r\n          )\r\n        } else {\r\n          // message.info('按住Shift 滚动鼠标可左右移动画布，按住Ctrl 滚动鼠标可放大缩小画布', 6)\r\n          window.open('/#/robot/config/workflow?id=' + res.data.id + '&robot_key=' + res.data.robot_key + '&show_tips=1')\r\n          show.value = false\r\n           emit('ok')\r\n          // router.push('/robot/config/workflow?id=' + res.data.id + '&robot_key=' + res.data.robot_key)\r\n        }\r\n      } else {\r\n        // 弹窗关闭 刷新数据\r\n        getRobot(route.query.id)\r\n        emit('editRobot')\r\n        show.value = false\r\n      }\r\n    })\r\n    .catch(() => {\r\n      saveLoading.value = false\r\n    })\r\n}\r\n\r\n// 验证是否有LLM\r\nconst checkLLM = async () => {\r\n  let res = await getModelConfigOption({\r\n    model_type: 'LLM'\r\n  })\r\n\r\n  if (!res || res.data.length == 0) {\r\n    Modal.confirm({\r\n      title: t('msg_add_llm_provider_title'),\r\n      icon: h(CloseCircleFilled, {\r\n        style: {\r\n          color: 'red'\r\n        }\r\n      }),\r\n      content: t('msg_add_llm_provider_content'),\r\n      onOk() {\r\n        router.push('/user/model')\r\n      },\r\n      onCancel() {}\r\n    })\r\n\r\n    return false\r\n  }\r\n\r\n  return true\r\n}\r\n\r\nconst open = async (type, is_edit) => {\r\n  if(type == 0){\r\n    default_avatar = DEFAULT_ROBOT_AVATAR\r\n  } else {\r\n    default_avatar = DEFAULT_WORKFLOW_AVATAR\r\n  }\r\n  isEdit.value = is_edit\r\n  // 验证是否有LLM\r\n  let state = await checkLLM()\r\n  getGroupList()\r\n  if (state) {\r\n    formState.robot_avatar = ''\r\n    formState.robot_avatar_url = default_avatar\r\n    formState.robot_name = ''\r\n    formState.en_name = ''\r\n    formState.robot_intro = ''\r\n    formState.application_type = type\r\n    show.value = true\r\n\r\n    if (isEdit.value && robotInfo.value) {\r\n      formState.robot_name = robotInfo.value.robot_name\r\n      formState.en_name = robotInfo.value.en_name\r\n      formState.robot_intro = robotInfo.value.robot_intro\r\n      formState.robot_avatar_url = robotInfo.value.robot_avatar_url\r\n    }\r\n  }\r\n  if(type == 0) {\r\n    rules.value.en_name = []\r\n  }else{\r\n  rules.value.en_name = [\r\n    {\r\n      required: true,\r\n      message: t('msg_workflow_name_required'),\r\n      trigger: 'change'\r\n    },\r\n    {\r\n      validator: async (rule, value, callback) => { \r\n        if(!value){\r\n          return Promise.resolve()\r\n        }\r\n        //只能输入英文数字和字符“_”、“”、“_”\r\n        if (!/^[a-zA-Z0-9_\\.\\-]+$/.test(value)) {\r\n           return Promise.reject(t('msg_workflow_name_format_error'))\r\n        }else{\r\n          return Promise.resolve()\r\n        }\r\n      },\r\n    }\r\n  ]\r\n  }\r\n\r\n}\r\n\r\nconst setGroupId = (id) => {\r\n  formState.group_id = id || '0'\r\n}\r\n\r\nconst getGroupList = () => {\r\n  getRobotGroupList().then((res) => {\r\n    groupLists.value  = res.data || []\r\n  })\r\n}\r\n\r\nconst onCancel = () => {\r\n  clearValidate()\r\n}\r\n\r\nconst handleSave = () => {\r\n  if(!isEdit.value && formState.application_type != 0){\r\n    if(!formState.robot_name){\r\n      formState.robot_name = formState.en_name\r\n    }\r\n  }\r\n  validate()\r\n    .then(() => {\r\n      saveForm()\r\n    })\r\n    .catch((err) => {\r\n      console.log('error', err)\r\n    })\r\n}\r\n\r\nonMounted(() => {\r\n\r\n})\r\n\r\ndefineExpose({\r\n  open,\r\n  setGroupId,\r\n})\r\n</script>\r\n","<template>\r\n  <div>\r\n    <a-modal v-model:open=\"open\" :title=\"t(modalTitle)\" @ok=\"handleOk\" :zIndex=\"2000\">\r\n      <div class=\"form-item\">\r\n        <div class=\"form-label\">{{ t('label_group_name') }}：</div>\r\n        <div class=\"form-content\">\r\n          <a-input\r\n            :maxLength=\"15\"\r\n            v-model:value=\"formState.group_name\"\r\n            :placeholder=\"t('ph_input_group_name')\"\r\n          ></a-input>\r\n        </div>\r\n      </div>\r\n    </a-modal>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive } from 'vue'\r\nimport { saveRobotGroup } from '@/api/robot'\r\nimport { message } from 'ant-design-vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\n\r\nconst { t } = useI18n('views.robot.robot-list.components.add-group')\r\n\r\nconst open = ref(false)\r\nconst emit = defineEmits(['ok'])\r\nconst modalTitle = ref('title_create_group')\r\nconst formState = reactive({\r\n  group_name: '',\r\n  id: ''\r\n})\r\nconst show = (data) => {\r\n  formState.group_name = data.group_name || ''\r\n  formState.id = data.id || ''\r\n  modalTitle.value = data.id ? 'title_edit_group' : 'title_create_group'\r\n  open.value = true\r\n}\r\nconst handleOk = () => {\r\n  if (!formState.group_name) {\r\n    return message.error(t('msg_group_name_required'))\r\n  }\r\n  saveRobotGroup({\r\n    ...formState\r\n  }).then((res) => {\r\n    message.success(t('msg_operation_success', { operation: t(modalTitle.value) }))\r\n    open.value = false\r\n    emit('ok')\r\n  })\r\n}\r\n\r\ndefineExpose({\r\n  show\r\n})\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.form-item {\r\n  display: flex;\r\n  align-items: center;\r\n  margin: 24px 0;\r\n  .form-content {\r\n    flex: 1;\r\n  }\r\n}\r\n</style>\r\n"],"names":["getBase64","file","resolve","reject","reader","error","emit","__emit","props","__props","fileList","ref","loading","imageUrl","watch","val","formItemContext","Form","triggerChange","data","beforeUpload","base64Url","message","previewVisible","previewImage","previewTitle","handleCancel","handlePreview","_openBlock","_createElementBlock","_hoisted_1","_createVNode","_component_a_upload","$event","_normalizeStyle","_hoisted_3","_createBlock","_unref","LoadingOutlined","PlusOutlined","_cache","_createElementVNode","_component_a_modal","useI18n","robotStore","useRobotStore","default_avatar","route","useRoute","router","useRouter","useForm","isEdit","show","saveLoading","groupLists","formState","reactive","title","computed","robotInfo","getRobot","rules","validate","validateInfos","clearValidate","onAvatarChange","saveForm","formData","requertUrl","saveRobot","tipVal","editBaseInfo","res","checkLLM","getModelConfigOption","Modal","h","CloseCircleFilled","open","type","is_edit","DEFAULT_ROBOT_AVATAR","DEFAULT_WORKFLOW_AVATAR","state","getGroupList","rule","value","callback","setGroupId","id","getRobotGroupList","onCancel","handleSave","err","onMounted","__expose","_component_a_form","_component_a_form_item","_mergeProps","_hoisted_2","AvatarInput","_toDisplayString","_component_a_input","_hoisted_4","_hoisted_5","_component_a_select","_Fragment","_renderList","item","_component_a_select_option","_createTextVNode","_component_a_textarea","_hoisted_6","modalTitle","handleOk","saveRobotGroup"],"mappings":"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"}