var Jn=Object.defineProperty;var Gn=(i,r,s)=>r in i?Jn(i,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[r]=s;var le=(i,r,s)=>Gn(i,typeof r!="symbol"?r+"":r,s);import{j as g,d as G,N as X,O as K,B as Cn,X as u,a6 as ne,V as Le,_ as ee,U as E,q as qe,a3 as Qn,a8 as De,w as $e,z as ue,u as te,Z as Y,W as Dt,S as oe,G as he,b as pe,a2 as Yn,F as Te,a1 as Oe,a5 as Ze,a as Se,p as Xn,a9 as Zn}from"./vue-chunks-BRsu9_To.js";import{u as Fe}from"./robot-ppsw7ttj.js";import{I as eo,b as ae,aC as to,d as Ve,at as no,B as ge,M as me,k as se,E as je,bu as xe}from"../../index-Bo1NSLpy.js";import{M as oo}from"./index-Dxy-C30T.js";import{x as ao,y as so,z as ro,A as io,B as lo,C as kn,D as At,E as St,F as Et}from"./index-L62dqcZj.js";import{u as $n}from"./index-BjF4Ni-g.js";import{C as An}from"./cu-upload-BS1QwpOs.js";import"./index-Caod9rOO.js";import{I as ve}from"./Input-CCKFAS4o.js";import{i as co}from"./validate-8MtiUsxW.js";import{d as uo}from"./vuedraggable.umd-CIIT_a56.js";import{F as _e,_ as Ee}from"./index-COWZrpvC.js";import{E as po}from"./EditOutlined-fieznxtM.js";import{Q as fo}from"./QuestionCircleOutlined-VG1FNUnl.js";import"./index-Bb6fuwF7.js";import{_ as Sn,R as En}from"./RadioButton-CWIeNl_M.js";import{_ as Bn}from"./index-Dlji98bI.js";import{_ as ho}from"./index-pj8Mdu_P.js";import{_ as In}from"./TextArea--DLJ7VtX.js";import{S as Bt,a as It}from"./index-Bs02Ec-o.js";import{_ as mo}from"./index-B4MPC5xv.js";import{R as _o}from"./RightOutlined-zEOifMPB.js";import{P as Pn}from"./PlusOutlined-vSxn8uyP.js";import{_ as go}from"./index-DrD42LNC.js";import{_ as He}from"./index-Dc6vrBX7.js";import"./axios-Dq7h7Pqt.js";import"./qs-BrxkIg-9.js";import"./crypto-js-ClNpte_9.js";import"./dayjs-B6IotFah.js";import"./shallowequal-C0xnIuy8.js";import"./Trigger-DtRTHvld.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./collapseMotion-Brd6xpAT.js";import"./slide-CVAZ5BEM.js";import"./index-BwedndIp.js";import"./FormItemContext-Cv3f2sEj.js";import"./index-CuPJUS8f.js";import"./Search-BF8URtRh.js";import"./SearchOutlined-CFTHZIcT.js";import"./isPlainObject-CHj0iPA3.js";import"./inputProps--_pnbyjO.js";import"./Password-CJww1n-s.js";import"./Col-QoogualX.js";import"./responsiveObserve-D3ho5cFZ.js";import"./hasIn-BtXuxCTT.js";import"./Checkbox-B_uQPvVs.js";import"./colors-4myZb9T8.js";import"./List-qVz67bUg.js";import"./useMergedState-C0iIHNGF.js";import"./DownOutlined-CrhRpWT5.js";import"./CheckOutlined-C6m5maw6.js";import"./move-DztQgbGg.js";import"./UpOutlined-DWTDMQqv.js";var vo={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 512a48 48 0 1096 0 48 48 0 10-96 0zm200 0a48 48 0 1096 0 48 48 0 10-96 0zm-400 0a48 48 0 1096 0 48 48 0 10-96 0zm661.2-173.6c-22.6-53.7-55-101.9-96.3-143.3a444.35 444.35 0 00-143.3-96.3C630.6 75.7 572.2 64 512 64h-2c-60.6.3-119.3 12.3-174.5 35.9a445.35 445.35 0 00-142 96.5c-40.9 41.3-73 89.3-95.2 142.8-23 55.4-34.6 114.3-34.3 174.9A449.4 449.4 0 00112 714v152a46 46 0 0046 46h152.1A449.4 449.4 0 00510 960h2.1c59.9 0 118-11.6 172.7-34.3a444.48 444.48 0 00142.8-95.2c41.3-40.9 73.8-88.7 96.5-142 23.6-55.2 35.6-113.9 35.9-174.5.3-60.9-11.5-120-34.8-175.6zm-151.1 438C704 845.8 611 884 512 884h-1.7c-60.3-.3-120.2-15.3-173.1-43.5l-8.4-4.5H188V695.2l-4.5-8.4C155.3 633.9 140.3 574 140 513.7c-.4-99.7 37.7-193.3 107.6-263.8 69.8-70.5 163.1-109.5 262.8-109.9h1.7c50 0 98.5 9.7 144.2 28.9 44.6 18.7 84.6 45.6 119 80 34.3 34.3 61.3 74.4 80 119 19.4 46.2 29.1 95.2 28.9 145.8-.6 99.6-39.7 192.9-110.1 262.7z"}}]},name:"message",theme:"outlined"};function Ot(i){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?Object(arguments[r]):{},n=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(s).filter(function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable}))),n.forEach(function(e){yo(i,e,s[e])})}return i}function yo(i,r,s){return r in i?Object.defineProperty(i,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[r]=s,i}var Pt=function(r,s){var n=Ot({},r,s.attrs);return g(eo,Ot({},n,{icon:vo}),null)};Pt.displayName="MessageOutlined";Pt.inheritAttrs=!1;const bo={class:"top-menu-box"},wo={__name:"top-meun",props:{value:{type:String,default:""}},emits:["change","update:value"],setup(i,{emit:r}){const s=r,e=G([i.value]),t=G([{key:"WebAPP",id:"WebAPP",label:"WebAPP",title:"WebAPP"},{key:"EmbedWebsite",id:"EmbedWebsite",label:"嵌入网站",title:"嵌入网站"},{key:"WeChatOfficialAccount",id:"WeChatOfficialAccount",label:"微信公众号",title:"微信公众号"},{key:"WeChatMiniProgram",id:"WeChatMiniProgram",label:"微信小程序",title:"微信小程序"},{key:"WeChatCustomerService",id:"WeChatCustomerService",label:"微信客服",title:"微信客服"}]),o=({item:c})=>{e.value.includes(c.id)||(s("update:value",c.id),s("change",c))};return(c,l)=>{const p=oo;return K(),X("div",bo,[g(p,{class:"top-menu",items:t.value,selectedKeys:e.value,"onUpdate:selectedKeys":l[0]||(l[0]=k=>e.value=k),mode:"horizontal",onClick:o},null,8,["items","selectedKeys"])])}}},Co=ae(wo,[["__scopeId","data-v-040b790f"]]);var ke={},et,Ft;function ko(){return Ft||(Ft=1,et=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),et}var tt={},fe={},Vt;function ye(){if(Vt)return fe;Vt=1;let i;const r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return fe.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17},fe.getSymbolTotalCodewords=function(n){return r[n]},fe.getBCHDigit=function(s){let n=0;for(;s!==0;)n++,s>>>=1;return n},fe.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');i=n},fe.isKanjiModeEnabled=function(){return typeof i<"u"},fe.toSJIS=function(n){return i(n)},fe}var nt={},jt;function Rt(){return jt||(jt=1,function(i){i.L={bit:1},i.M={bit:0},i.Q={bit:3},i.H={bit:2};function r(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"l":case"low":return i.L;case"m":case"medium":return i.M;case"q":case"quartile":return i.Q;case"h":case"high":return i.H;default:throw new Error("Unknown EC Level: "+s)}}i.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},i.from=function(n,e){if(i.isValid(n))return n;try{return r(n)}catch{return e}}}(nt)),nt}var ot,Ht;function $o(){if(Ht)return ot;Ht=1;function i(){this.buffer=[],this.length=0}return i.prototype={get:function(r){const s=Math.floor(r/8);return(this.buffer[s]>>>7-r%8&1)===1},put:function(r,s){for(let n=0;n<s;n++)this.putBit((r>>>s-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(r){const s=Math.floor(this.length/8);this.buffer.length<=s&&this.buffer.push(0),r&&(this.buffer[s]|=128>>>this.length%8),this.length++}},ot=i,ot}var at,zt;function Ao(){if(zt)return at;zt=1;function i(r){if(!r||r<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=r,this.data=new Uint8Array(r*r),this.reservedBit=new Uint8Array(r*r)}return i.prototype.set=function(r,s,n,e){const t=r*this.size+s;this.data[t]=n,e&&(this.reservedBit[t]=!0)},i.prototype.get=function(r,s){return this.data[r*this.size+s]},i.prototype.xor=function(r,s,n){this.data[r*this.size+s]^=n},i.prototype.isReserved=function(r,s){return this.reservedBit[r*this.size+s]},at=i,at}var st={},Kt;function So(){return Kt||(Kt=1,function(i){const r=ye().getSymbolSize;i.getRowColCoords=function(n){if(n===1)return[];const e=Math.floor(n/7)+2,t=r(n),o=t===145?26:Math.ceil((t-13)/(2*e-2))*2,c=[t-7];for(let l=1;l<e-1;l++)c[l]=c[l-1]-o;return c.push(6),c.reverse()},i.getPositions=function(n){const e=[],t=i.getRowColCoords(n),o=t.length;for(let c=0;c<o;c++)for(let l=0;l<o;l++)c===0&&l===0||c===0&&l===o-1||c===o-1&&l===0||e.push([t[c],t[l]]);return e}}(st)),st}var rt={},Wt;function Eo(){if(Wt)return rt;Wt=1;const i=ye().getSymbolSize,r=7;return rt.getPositions=function(n){const e=i(n);return[[0,0],[e-r,0],[0,e-r]]},rt}var it={},Jt;function Bo(){return Jt||(Jt=1,function(i){i.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const r={N1:3,N2:3,N3:40,N4:10};i.isValid=function(e){return e!=null&&e!==""&&!isNaN(e)&&e>=0&&e<=7},i.from=function(e){return i.isValid(e)?parseInt(e,10):void 0},i.getPenaltyN1=function(e){const t=e.size;let o=0,c=0,l=0,p=null,k=null;for(let v=0;v<t;v++){c=l=0,p=k=null;for(let C=0;C<t;C++){let w=e.get(v,C);w===p?c++:(c>=5&&(o+=r.N1+(c-5)),p=w,c=1),w=e.get(C,v),w===k?l++:(l>=5&&(o+=r.N1+(l-5)),k=w,l=1)}c>=5&&(o+=r.N1+(c-5)),l>=5&&(o+=r.N1+(l-5))}return o},i.getPenaltyN2=function(e){const t=e.size;let o=0;for(let c=0;c<t-1;c++)for(let l=0;l<t-1;l++){const p=e.get(c,l)+e.get(c,l+1)+e.get(c+1,l)+e.get(c+1,l+1);(p===4||p===0)&&o++}return o*r.N2},i.getPenaltyN3=function(e){const t=e.size;let o=0,c=0,l=0;for(let p=0;p<t;p++){c=l=0;for(let k=0;k<t;k++)c=c<<1&2047|e.get(p,k),k>=10&&(c===1488||c===93)&&o++,l=l<<1&2047|e.get(k,p),k>=10&&(l===1488||l===93)&&o++}return o*r.N3},i.getPenaltyN4=function(e){let t=0;const o=e.data.length;for(let l=0;l<o;l++)t+=e.data[l];return Math.abs(Math.ceil(t*100/o/5)-10)*r.N4};function s(n,e,t){switch(n){case i.Patterns.PATTERN000:return(e+t)%2===0;case i.Patterns.PATTERN001:return e%2===0;case i.Patterns.PATTERN010:return t%3===0;case i.Patterns.PATTERN011:return(e+t)%3===0;case i.Patterns.PATTERN100:return(Math.floor(e/2)+Math.floor(t/3))%2===0;case i.Patterns.PATTERN101:return e*t%2+e*t%3===0;case i.Patterns.PATTERN110:return(e*t%2+e*t%3)%2===0;case i.Patterns.PATTERN111:return(e*t%3+(e+t)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}i.applyMask=function(e,t){const o=t.size;for(let c=0;c<o;c++)for(let l=0;l<o;l++)t.isReserved(l,c)||t.xor(l,c,s(e,l,c))},i.getBestMask=function(e,t){const o=Object.keys(i.Patterns).length;let c=0,l=1/0;for(let p=0;p<o;p++){t(p),i.applyMask(p,e);const k=i.getPenaltyN1(e)+i.getPenaltyN2(e)+i.getPenaltyN3(e)+i.getPenaltyN4(e);i.applyMask(p,e),k<l&&(l=k,c=p)}return c}}(it)),it}var Ue={},Gt;function Rn(){if(Gt)return Ue;Gt=1;const i=Rt(),r=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],s=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Ue.getBlocksCount=function(e,t){switch(t){case i.L:return r[(e-1)*4+0];case i.M:return r[(e-1)*4+1];case i.Q:return r[(e-1)*4+2];case i.H:return r[(e-1)*4+3];default:return}},Ue.getTotalCodewordsCount=function(e,t){switch(t){case i.L:return s[(e-1)*4+0];case i.M:return s[(e-1)*4+1];case i.Q:return s[(e-1)*4+2];case i.H:return s[(e-1)*4+3];default:return}},Ue}var lt={},Re={},Qt;function Io(){if(Qt)return Re;Qt=1;const i=new Uint8Array(512),r=new Uint8Array(256);return function(){let n=1;for(let e=0;e<255;e++)i[e]=n,r[n]=e,n<<=1,n&256&&(n^=285);for(let e=255;e<512;e++)i[e]=i[e-255]}(),Re.log=function(n){if(n<1)throw new Error("log("+n+")");return r[n]},Re.exp=function(n){return i[n]},Re.mul=function(n,e){return n===0||e===0?0:i[r[n]+r[e]]},Re}var Yt;function Po(){return Yt||(Yt=1,function(i){const r=Io();i.mul=function(n,e){const t=new Uint8Array(n.length+e.length-1);for(let o=0;o<n.length;o++)for(let c=0;c<e.length;c++)t[o+c]^=r.mul(n[o],e[c]);return t},i.mod=function(n,e){let t=new Uint8Array(n);for(;t.length-e.length>=0;){const o=t[0];for(let l=0;l<e.length;l++)t[l]^=r.mul(e[l],o);let c=0;for(;c<t.length&&t[c]===0;)c++;t=t.slice(c)}return t},i.generateECPolynomial=function(n){let e=new Uint8Array([1]);for(let t=0;t<n;t++)e=i.mul(e,new Uint8Array([1,r.exp(t)]));return e}}(lt)),lt}var ct,Xt;function Ro(){if(Xt)return ct;Xt=1;const i=Po();function r(s){this.genPoly=void 0,this.degree=s,this.degree&&this.initialize(this.degree)}return r.prototype.initialize=function(n){this.degree=n,this.genPoly=i.generateECPolynomial(this.degree)},r.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");const e=new Uint8Array(n.length+this.degree);e.set(n);const t=i.mod(e,this.genPoly),o=this.degree-t.length;if(o>0){const c=new Uint8Array(this.degree);return c.set(t,o),c}return t},ct=r,ct}var ut={},dt={},pt={},Zt;function Tn(){return Zt||(Zt=1,pt.isValid=function(r){return!isNaN(r)&&r>=1&&r<=40}),pt}var de={},en;function xn(){if(en)return de;en=1;const i="[0-9]+",r="[A-Z $%*+\\-./:]+";let s="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";s=s.replace(/u/g,"\\u");const n="(?:(?![A-Z0-9 $%*+\\-./:]|"+s+`)(?:.|[\r
]))+`;de.KANJI=new RegExp(s,"g"),de.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),de.BYTE=new RegExp(n,"g"),de.NUMERIC=new RegExp(i,"g"),de.ALPHANUMERIC=new RegExp(r,"g");const e=new RegExp("^"+s+"$"),t=new RegExp("^"+i+"$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return de.testKanji=function(l){return e.test(l)},de.testNumeric=function(l){return t.test(l)},de.testAlphanumeric=function(l){return o.test(l)},de}var tn;function be(){return tn||(tn=1,function(i){const r=Tn(),s=xn();i.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},i.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},i.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},i.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},i.MIXED={bit:-1},i.getCharCountIndicator=function(t,o){if(!t.ccBits)throw new Error("Invalid mode: "+t);if(!r.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?t.ccBits[0]:o<27?t.ccBits[1]:t.ccBits[2]},i.getBestModeForData=function(t){return s.testNumeric(t)?i.NUMERIC:s.testAlphanumeric(t)?i.ALPHANUMERIC:s.testKanji(t)?i.KANJI:i.BYTE},i.toString=function(t){if(t&&t.id)return t.id;throw new Error("Invalid mode")},i.isValid=function(t){return t&&t.bit&&t.ccBits};function n(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return i.NUMERIC;case"alphanumeric":return i.ALPHANUMERIC;case"kanji":return i.KANJI;case"byte":return i.BYTE;default:throw new Error("Unknown mode: "+e)}}i.from=function(t,o){if(i.isValid(t))return t;try{return n(t)}catch{return o}}}(dt)),dt}var nn;function To(){return nn||(nn=1,function(i){const r=ye(),s=Rn(),n=Rt(),e=be(),t=Tn(),o=7973,c=r.getBCHDigit(o);function l(C,w,x){for(let F=1;F<=40;F++)if(w<=i.getCapacity(F,x,C))return F}function p(C,w){return e.getCharCountIndicator(C,w)+4}function k(C,w){let x=0;return C.forEach(function(F){const N=p(F.mode,w);x+=N+F.getBitsLength()}),x}function v(C,w){for(let x=1;x<=40;x++)if(k(C,x)<=i.getCapacity(x,w,e.MIXED))return x}i.from=function(w,x){return t.isValid(w)?parseInt(w,10):x},i.getCapacity=function(w,x,F){if(!t.isValid(w))throw new Error("Invalid QR Code version");typeof F>"u"&&(F=e.BYTE);const N=r.getSymbolTotalCodewords(w),P=s.getTotalCodewordsCount(w,x),V=(N-P)*8;if(F===e.MIXED)return V;const M=V-p(F,w);switch(F){case e.NUMERIC:return Math.floor(M/10*3);case e.ALPHANUMERIC:return Math.floor(M/11*2);case e.KANJI:return Math.floor(M/13);case e.BYTE:default:return Math.floor(M/8)}},i.getBestVersionForData=function(w,x){let F;const N=n.from(x,n.M);if(Array.isArray(w)){if(w.length>1)return v(w,N);if(w.length===0)return 1;F=w[0]}else F=w;return l(F.mode,F.getLength(),N)},i.getEncodedBits=function(w){if(!t.isValid(w)||w<7)throw new Error("Invalid QR Code version");let x=w<<12;for(;r.getBCHDigit(x)-c>=0;)x^=o<<r.getBCHDigit(x)-c;return w<<12|x}}(ut)),ut}var ft={},on;function xo(){if(on)return ft;on=1;const i=ye(),r=1335,s=21522,n=i.getBCHDigit(r);return ft.getEncodedBits=function(t,o){const c=t.bit<<3|o;let l=c<<10;for(;i.getBCHDigit(l)-n>=0;)l^=r<<i.getBCHDigit(l)-n;return(c<<10|l)^s},ft}var ht={},mt,an;function Mo(){if(an)return mt;an=1;const i=be();function r(s){this.mode=i.NUMERIC,this.data=s.toString()}return r.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(n){let e,t,o;for(e=0;e+3<=this.data.length;e+=3)t=this.data.substr(e,3),o=parseInt(t,10),n.put(o,10);const c=this.data.length-e;c>0&&(t=this.data.substr(e),o=parseInt(t,10),n.put(o,c*3+1))},mt=r,mt}var _t,sn;function No(){if(sn)return _t;sn=1;const i=be(),r=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function s(n){this.mode=i.ALPHANUMERIC,this.data=n}return s.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let o=r.indexOf(this.data[t])*45;o+=r.indexOf(this.data[t+1]),e.put(o,11)}this.data.length%2&&e.put(r.indexOf(this.data[t]),6)},_t=s,_t}var gt,rn;function Lo(){if(rn)return gt;rn=1;const i=be();function r(s){this.mode=i.BYTE,typeof s=="string"?this.data=new TextEncoder().encode(s):this.data=new Uint8Array(s)}return r.getBitsLength=function(n){return n*8},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(s){for(let n=0,e=this.data.length;n<e;n++)s.put(this.data[n],8)},gt=r,gt}var vt,ln;function Uo(){if(ln)return vt;ln=1;const i=be(),r=ye();function s(n){this.mode=i.KANJI,this.data=n}return s.getBitsLength=function(e){return e*13},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(n){let e;for(e=0;e<this.data.length;e++){let t=r.toSJIS(this.data[e]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),n.put(t,13)}},vt=s,vt}var yt={exports:{}},cn;function qo(){return cn||(cn=1,function(i){var r={single_source_shortest_paths:function(s,n,e){var t={},o={};o[n]=0;var c=r.PriorityQueue.make();c.push(n,0);for(var l,p,k,v,C,w,x,F,N;!c.empty();){l=c.pop(),p=l.value,v=l.cost,C=s[p]||{};for(k in C)C.hasOwnProperty(k)&&(w=C[k],x=v+w,F=o[k],N=typeof o[k]>"u",(N||F>x)&&(o[k]=x,c.push(k,x),t[k]=p))}if(typeof e<"u"&&typeof o[e]>"u"){var P=["Could not find a path from ",n," to ",e,"."].join("");throw new Error(P)}return t},extract_shortest_path_from_predecessor_list:function(s,n){for(var e=[],t=n;t;)e.push(t),s[t],t=s[t];return e.reverse(),e},find_path:function(s,n,e){var t=r.single_source_shortest_paths(s,n,e);return r.extract_shortest_path_from_predecessor_list(t,e)},PriorityQueue:{make:function(s){var n=r.PriorityQueue,e={},t;s=s||{};for(t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.queue=[],e.sorter=s.sorter||n.default_sorter,e},default_sorter:function(s,n){return s.cost-n.cost},push:function(s,n){var e={value:s,cost:n};this.queue.push(e),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};i.exports=r}(yt)),yt.exports}var un;function Do(){return un||(un=1,function(i){const r=be(),s=Mo(),n=No(),e=Lo(),t=Uo(),o=xn(),c=ye(),l=qo();function p(P){return unescape(encodeURIComponent(P)).length}function k(P,V,M){const B=[];let U;for(;(U=P.exec(M))!==null;)B.push({data:U[0],index:U.index,mode:V,length:U[0].length});return B}function v(P){const V=k(o.NUMERIC,r.NUMERIC,P),M=k(o.ALPHANUMERIC,r.ALPHANUMERIC,P);let B,U;return c.isKanjiModeEnabled()?(B=k(o.BYTE,r.BYTE,P),U=k(o.KANJI,r.KANJI,P)):(B=k(o.BYTE_KANJI,r.BYTE,P),U=[]),V.concat(M,B,U).sort(function(q,L){return q.index-L.index}).map(function(q){return{data:q.data,mode:q.mode,length:q.length}})}function C(P,V){switch(V){case r.NUMERIC:return s.getBitsLength(P);case r.ALPHANUMERIC:return n.getBitsLength(P);case r.KANJI:return t.getBitsLength(P);case r.BYTE:return e.getBitsLength(P)}}function w(P){return P.reduce(function(V,M){const B=V.length-1>=0?V[V.length-1]:null;return B&&B.mode===M.mode?(V[V.length-1].data+=M.data,V):(V.push(M),V)},[])}function x(P){const V=[];for(let M=0;M<P.length;M++){const B=P[M];switch(B.mode){case r.NUMERIC:V.push([B,{data:B.data,mode:r.ALPHANUMERIC,length:B.length},{data:B.data,mode:r.BYTE,length:B.length}]);break;case r.ALPHANUMERIC:V.push([B,{data:B.data,mode:r.BYTE,length:B.length}]);break;case r.KANJI:V.push([B,{data:B.data,mode:r.BYTE,length:p(B.data)}]);break;case r.BYTE:V.push([{data:B.data,mode:r.BYTE,length:p(B.data)}])}}return V}function F(P,V){const M={},B={start:{}};let U=["start"];for(let _=0;_<P.length;_++){const q=P[_],L=[];for(let R=0;R<q.length;R++){const S=q[R],f=""+_+R;L.push(f),M[f]={node:S,lastCount:0},B[f]={};for(let D=0;D<U.length;D++){const I=U[D];M[I]&&M[I].node.mode===S.mode?(B[I][f]=C(M[I].lastCount+S.length,S.mode)-C(M[I].lastCount,S.mode),M[I].lastCount+=S.length):(M[I]&&(M[I].lastCount=S.length),B[I][f]=C(S.length,S.mode)+4+r.getCharCountIndicator(S.mode,V))}}U=L}for(let _=0;_<U.length;_++)B[U[_]].end=0;return{map:B,table:M}}function N(P,V){let M;const B=r.getBestModeForData(P);if(M=r.from(V,B),M!==r.BYTE&&M.bit<B.bit)throw new Error('"'+P+'" cannot be encoded with mode '+r.toString(M)+`.
 Suggested mode is: `+r.toString(B));switch(M===r.KANJI&&!c.isKanjiModeEnabled()&&(M=r.BYTE),M){case r.NUMERIC:return new s(P);case r.ALPHANUMERIC:return new n(P);case r.KANJI:return new t(P);case r.BYTE:return new e(P)}}i.fromArray=function(V){return V.reduce(function(M,B){return typeof B=="string"?M.push(N(B,null)):B.data&&M.push(N(B.data,B.mode)),M},[])},i.fromString=function(V,M){const B=v(V,c.isKanjiModeEnabled()),U=x(B),_=F(U,M),q=l.find_path(_.map,"start","end"),L=[];for(let R=1;R<q.length-1;R++)L.push(_.table[q[R]].node);return i.fromArray(w(L))},i.rawSplit=function(V){return i.fromArray(v(V,c.isKanjiModeEnabled()))}}(ht)),ht}var dn;function Oo(){if(dn)return tt;dn=1;const i=ye(),r=Rt(),s=$o(),n=Ao(),e=So(),t=Eo(),o=Bo(),c=Rn(),l=Ro(),p=To(),k=xo(),v=be(),C=Do();function w(_,q){const L=_.size,R=t.getPositions(q);for(let S=0;S<R.length;S++){const f=R[S][0],D=R[S][1];for(let I=-1;I<=7;I++)if(!(f+I<=-1||L<=f+I))for(let z=-1;z<=7;z++)D+z<=-1||L<=D+z||(I>=0&&I<=6&&(z===0||z===6)||z>=0&&z<=6&&(I===0||I===6)||I>=2&&I<=4&&z>=2&&z<=4?_.set(f+I,D+z,!0,!0):_.set(f+I,D+z,!1,!0))}}function x(_){const q=_.size;for(let L=8;L<q-8;L++){const R=L%2===0;_.set(L,6,R,!0),_.set(6,L,R,!0)}}function F(_,q){const L=e.getPositions(q);for(let R=0;R<L.length;R++){const S=L[R][0],f=L[R][1];for(let D=-2;D<=2;D++)for(let I=-2;I<=2;I++)D===-2||D===2||I===-2||I===2||D===0&&I===0?_.set(S+D,f+I,!0,!0):_.set(S+D,f+I,!1,!0)}}function N(_,q){const L=_.size,R=p.getEncodedBits(q);let S,f,D;for(let I=0;I<18;I++)S=Math.floor(I/3),f=I%3+L-8-3,D=(R>>I&1)===1,_.set(S,f,D,!0),_.set(f,S,D,!0)}function P(_,q,L){const R=_.size,S=k.getEncodedBits(q,L);let f,D;for(f=0;f<15;f++)D=(S>>f&1)===1,f<6?_.set(f,8,D,!0):f<8?_.set(f+1,8,D,!0):_.set(R-15+f,8,D,!0),f<8?_.set(8,R-f-1,D,!0):f<9?_.set(8,15-f-1+1,D,!0):_.set(8,15-f-1,D,!0);_.set(R-8,8,1,!0)}function V(_,q){const L=_.size;let R=-1,S=L-1,f=7,D=0;for(let I=L-1;I>0;I-=2)for(I===6&&I--;;){for(let z=0;z<2;z++)if(!_.isReserved(S,I-z)){let Z=!1;D<q.length&&(Z=(q[D]>>>f&1)===1),_.set(S,I-z,Z),f--,f===-1&&(D++,f=7)}if(S+=R,S<0||L<=S){S-=R,R=-R;break}}}function M(_,q,L){const R=new s;L.forEach(function(z){R.put(z.mode.bit,4),R.put(z.getLength(),v.getCharCountIndicator(z.mode,_)),z.write(R)});const S=i.getSymbolTotalCodewords(_),f=c.getTotalCodewordsCount(_,q),D=(S-f)*8;for(R.getLengthInBits()+4<=D&&R.put(0,4);R.getLengthInBits()%8!==0;)R.putBit(0);const I=(D-R.getLengthInBits())/8;for(let z=0;z<I;z++)R.put(z%2?17:236,8);return B(R,_,q)}function B(_,q,L){const R=i.getSymbolTotalCodewords(q),S=c.getTotalCodewordsCount(q,L),f=R-S,D=c.getBlocksCount(q,L),I=R%D,z=D-I,Z=Math.floor(R/D),T=Math.floor(f/D),a=T+1,h=Z-T,m=new l(h);let $=0;const d=new Array(D),y=new Array(D);let b=0;const A=new Uint8Array(_.buffer);for(let J=0;J<D;J++){const Q=J<z?T:a;d[J]=A.slice($,$+Q),y[J]=m.encode(d[J]),$+=Q,b=Math.max(b,Q)}const O=new Uint8Array(R);let j=0,H,W;for(H=0;H<b;H++)for(W=0;W<D;W++)H<d[W].length&&(O[j++]=d[W][H]);for(H=0;H<h;H++)for(W=0;W<D;W++)O[j++]=y[W][H];return O}function U(_,q,L,R){let S;if(Array.isArray(_))S=C.fromArray(_);else if(typeof _=="string"){let Z=q;if(!Z){const T=C.rawSplit(_);Z=p.getBestVersionForData(T,L)}S=C.fromString(_,Z||40)}else throw new Error("Invalid data");const f=p.getBestVersionForData(S,L);if(!f)throw new Error("The amount of data is too big to be stored in a QR Code");if(!q)q=f;else if(q<f)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+f+`.
`);const D=M(q,L,S),I=i.getSymbolSize(q),z=new n(I);return w(z,q),x(z),F(z,q),P(z,L,0),q>=7&&N(z,q),V(z,D),isNaN(R)&&(R=o.getBestMask(z,P.bind(null,z,L))),o.applyMask(R,z),P(z,L,R),{modules:z,version:q,errorCorrectionLevel:L,maskPattern:R,segments:S}}return tt.create=function(q,L){if(typeof q>"u"||q==="")throw new Error("No input text");let R=r.M,S,f;return typeof L<"u"&&(R=r.from(L.errorCorrectionLevel,r.M),S=p.from(L.version),f=o.from(L.maskPattern),L.toSJISFunc&&i.setToSJISFunction(L.toSJISFunc)),U(q,S,R,f)},tt}var bt={},wt={},pn;function Mn(){return pn||(pn=1,function(i){function r(s){if(typeof s=="number"&&(s=s.toString()),typeof s!="string")throw new Error("Color should be defined as hex string");let n=s.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+s);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(t){return[t,t]}))),n.length===6&&n.push("F","F");const e=parseInt(n.join(""),16);return{r:e>>24&255,g:e>>16&255,b:e>>8&255,a:e&255,hex:"#"+n.slice(0,6).join("")}}i.getOptions=function(n){n||(n={}),n.color||(n.color={});const e=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,t=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:t,scale:t?4:o,margin:e,color:{dark:r(n.color.dark||"#000000ff"),light:r(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},i.getScale=function(n,e){return e.width&&e.width>=n+e.margin*2?e.width/(n+e.margin*2):e.scale},i.getImageWidth=function(n,e){const t=i.getScale(n,e);return Math.floor((n+e.margin*2)*t)},i.qrToImageData=function(n,e,t){const o=e.modules.size,c=e.modules.data,l=i.getScale(o,t),p=Math.floor((o+t.margin*2)*l),k=t.margin*l,v=[t.color.light,t.color.dark];for(let C=0;C<p;C++)for(let w=0;w<p;w++){let x=(C*p+w)*4,F=t.color.light;if(C>=k&&w>=k&&C<p-k&&w<p-k){const N=Math.floor((C-k)/l),P=Math.floor((w-k)/l);F=v[c[N*o+P]?1:0]}n[x++]=F.r,n[x++]=F.g,n[x++]=F.b,n[x]=F.a}}}(wt)),wt}var fn;function Fo(){return fn||(fn=1,function(i){const r=Mn();function s(e,t,o){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=o,t.width=o,t.style.height=o+"px",t.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}i.render=function(t,o,c){let l=c,p=o;typeof l>"u"&&(!o||!o.getContext)&&(l=o,o=void 0),o||(p=n()),l=r.getOptions(l);const k=r.getImageWidth(t.modules.size,l),v=p.getContext("2d"),C=v.createImageData(k,k);return r.qrToImageData(C.data,t,l),s(v,p,k),v.putImageData(C,0,0),p},i.renderToDataURL=function(t,o,c){let l=c;typeof l>"u"&&(!o||!o.getContext)&&(l=o,o=void 0),l||(l={});const p=i.render(t,o,l),k=l.type||"image/png",v=l.rendererOpts||{};return p.toDataURL(k,v.quality)}}(bt)),bt}var Ct={},hn;function Vo(){if(hn)return Ct;hn=1;const i=Mn();function r(e,t){const o=e.a/255,c=t+'="'+e.hex+'"';return o<1?c+" "+t+'-opacity="'+o.toFixed(2).slice(1)+'"':c}function s(e,t,o){let c=e+t;return typeof o<"u"&&(c+=" "+o),c}function n(e,t,o){let c="",l=0,p=!1,k=0;for(let v=0;v<e.length;v++){const C=Math.floor(v%t),w=Math.floor(v/t);!C&&!p&&(p=!0),e[v]?(k++,v>0&&C>0&&e[v-1]||(c+=p?s("M",C+o,.5+w+o):s("m",l,0),l=0,p=!1),C+1<t&&e[v+1]||(c+=s("h",k),k=0)):l++}return c}return Ct.render=function(t,o,c){const l=i.getOptions(o),p=t.modules.size,k=t.modules.data,v=p+l.margin*2,C=l.color.light.a?"<path "+r(l.color.light,"fill")+' d="M0 0h'+v+"v"+v+'H0z"/>':"",w="<path "+r(l.color.dark,"stroke")+' d="'+n(k,p,l.margin)+'"/>',x='viewBox="0 0 '+v+" "+v+'"',N='<svg xmlns="http://www.w3.org/2000/svg" '+(l.width?'width="'+l.width+'" height="'+l.width+'" ':"")+x+' shape-rendering="crispEdges">'+C+w+`</svg>
`;return typeof c=="function"&&c(null,N),N},Ct}var mn;function jo(){if(mn)return ke;mn=1;const i=ko(),r=Oo(),s=Fo(),n=Vo();function e(t,o,c,l,p){const k=[].slice.call(arguments,1),v=k.length,C=typeof k[v-1]=="function";if(!C&&!i())throw new Error("Callback required as last argument");if(C){if(v<2)throw new Error("Too few arguments provided");v===2?(p=c,c=o,o=l=void 0):v===3&&(o.getContext&&typeof p>"u"?(p=l,l=void 0):(p=l,l=c,c=o,o=void 0))}else{if(v<1)throw new Error("Too few arguments provided");return v===1?(c=o,o=l=void 0):v===2&&!o.getContext&&(l=c,c=o,o=void 0),new Promise(function(w,x){try{const F=r.create(c,l);w(t(F,o,l))}catch(F){x(F)}})}try{const w=r.create(c,l);p(null,t(w,o,l))}catch(w){p(w)}}return ke.create=r.create,ke.toCanvas=e.bind(null,s.render),ke.toDataURL=e.bind(null,s.renderToDataURL),ke.toString=e.bind(null,function(t,o,c){return n.render(t,c)}),ke}var Ho=jo();const _n=Cn(Ho),zo={class:"card-box"},Ko={class:"card-box-header"},Wo={class:"card-title"},Jo={key:0,class:"card-icon"},Go={class:"title-text"},Qo={class:"title-text"},Yo={class:"action"},Xo={class:"card-box-body"},Zo={__name:"card-box",props:{title:{type:String,default:""}},setup(i){const r=i;return(s,n)=>(K(),X("div",zo,[u("div",Ko,[u("div",Wo,[s.$slots.icon?(K(),X("span",Jo,[Le(s.$slots,"icon",{},void 0,!0)])):ne("",!0),u("span",Go,ee(r.title),1),u("span",Qo,[Le(s.$slots,"title",{},void 0,!0)])]),u("div",Yo,[Le(s.$slots,"action",{},void 0,!0)])]),u("div",Xo,[Le(s.$slots,"default",{},void 0,!0)])]))}},Ae=ae(Zo,[["__scopeId","data-v-13417dcd"]]),ea={class:"page-title-input"},ta={class:"upload-logo"},na=["src"],oa={__name:"page-title-input",props:{avatar:{type:String,default:""},value:{type:String,default:""},placeholder:{type:String,default:"请输入标题"},autoUpload:{type:Boolean,default:!0}},emits:["update:value","update:avatar","changeAvatar"],setup(i,{emit:r}){const s=r,n=i,e=o=>{s("update:value",o.srcElement.value)},t=o=>{let c={file:o[0],category:"icon"};n.autoUpload&&$n(c).then(l=>{s("update:avatar",l.data.link)}),to(o[0]).then(l=>{s("changeAvatar",{file:o[0],url:l})})};return(o,c)=>{const l=ve;return K(),X("div",ea,[u("div",ta,[g(An,{onChange:t},{default:E(()=>[u("img",{class:"avatar",src:n.avatar},null,8,na)]),_:1})]),g(l,{size:"large",value:n.value,placeholder:i.placeholder,onInput:e},null,8,["value","placeholder"])])}}},Me=ae(oa,[["__scopeId","data-v-1a1bdb06"]]);var kt={exports:{}};/*! Pickr 1.9.1 MIT | https://github.com/Simonwep/pickr */var gn;function aa(){return gn||(gn=1,function(i,r){(function(s,n){i.exports=n()})(self,()=>(()=>{var s={d:(T,a)=>{for(var h in a)s.o(a,h)&&!s.o(T,h)&&Object.defineProperty(T,h,{enumerable:!0,get:a[h]})},o:(T,a)=>Object.prototype.hasOwnProperty.call(T,a),r:T=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(T,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(T,"__esModule",{value:!0})}},n={};s.d(n,{default:()=>z});var e={};function t(T,a,h,m,$={}){a instanceof HTMLCollection||a instanceof NodeList?a=Array.from(a):Array.isArray(a)||(a=[a]),Array.isArray(h)||(h=[h]);for(const d of a)for(const y of h)d[T](y,m,{capture:!1,...$});return Array.prototype.slice.call(arguments,1)}s.r(e),s.d(e,{adjustableInputNumbers:()=>C,createElementFromString:()=>l,createFromTemplate:()=>p,eventPath:()=>k,off:()=>c,on:()=>o,resolveElement:()=>v});const o=t.bind(null,"addEventListener"),c=t.bind(null,"removeEventListener");function l(T){const a=document.createElement("div");return a.innerHTML=T.trim(),a.firstElementChild}function p(T){const a=(m,$)=>{const d=m.getAttribute($);return m.removeAttribute($),d},h=(m,$={})=>{const d=a(m,":obj"),y=a(m,":ref"),b=d?$[d]={}:$;y&&($[y]=m);for(const A of Array.from(m.children)){const O=a(A,":arr"),j=h(A,O?{}:b);O&&(b[O]||(b[O]=[])).push(Object.keys(j).length?j:A)}return $};return h(l(T))}function k(T){let a=T.path||T.composedPath&&T.composedPath();if(a)return a;let h=T.target.parentElement;for(a=[T.target,h];h=h.parentElement;)a.push(h);return a.push(document,window),a}function v(T){return T instanceof Element?T:typeof T=="string"?T.split(/>>/g).reduce((a,h,m,$)=>(a=a.querySelector(h),m<$.length-1?a.shadowRoot:a),document):null}function C(T,a=h=>h){function h(m){const $=[.001,.01,.1][Number(m.shiftKey||2*m.ctrlKey)]*(m.deltaY<0?1:-1);let d=0,y=T.selectionStart;T.value=T.value.replace(/[\d.]+/g,(b,A)=>A<=y&&A+b.length>=y?(y=A,a(Number(b),$,d)):(d++,b)),T.focus(),T.setSelectionRange(y,y),m.preventDefault(),T.dispatchEvent(new Event("input"))}o(T,"focus",()=>o(window,"wheel",h,{passive:!1})),o(T,"blur",()=>c(window,"wheel",h))}const{min:w,max:x,floor:F,round:N}=Math;function P(T,a,h){a/=100,h/=100;const m=F(T=T/360*6),$=T-m,d=h*(1-a),y=h*(1-$*a),b=h*(1-(1-$)*a),A=m%6;return[255*[h,y,d,d,b,h][A],255*[b,h,h,y,d,d][A],255*[d,d,b,h,h,y][A]]}function V(T,a,h){const m=(2-(a/=100))*(h/=100)/2;return m!==0&&(a=m===1?0:m<.5?a*h/(2*m):a*h/(2-2*m)),[T,100*a,100*m]}function M(T,a,h){const m=w(T/=255,a/=255,h/=255),$=x(T,a,h),d=$-m;let y,b;if(d===0)y=b=0;else{b=d/$;const A=(($-T)/6+d/2)/d,O=(($-a)/6+d/2)/d,j=(($-h)/6+d/2)/d;T===$?y=j-O:a===$?y=1/3+A-j:h===$&&(y=2/3+O-A),y<0?y+=1:y>1&&(y-=1)}return[360*y,100*b,100*$]}function B(T,a,h,m){return a/=100,h/=100,[...M(255*(1-w(1,(T/=100)*(1-(m/=100))+m)),255*(1-w(1,a*(1-m)+m)),255*(1-w(1,h*(1-m)+m)))]}function U(T,a,h){a/=100;const m=2*(a*=(h/=100)<.5?h:1-h)/(h+a)*100,$=100*(h+a);return[T,isNaN(m)?0:m,$]}function _(T){return M(...T.match(/.{2}/g).map(a=>parseInt(a,16)))}function q(T){T=T.match(/^[a-zA-Z]+$/)?function($){if($.toLowerCase()==="black")return"#000";const d=document.createElement("canvas").getContext("2d");return d.fillStyle=$,d.fillStyle==="#000"?null:d.fillStyle}(T):T;const a={cmyk:/^cmyk\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)/i,rgba:/^rgba?\D+([\d.]+)(%?)\D+([\d.]+)(%?)\D+([\d.]+)(%?)\D*?(([\d.]+)(%?)|$)/i,hsla:/^hsla?\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D*?(([\d.]+)(%?)|$)/i,hsva:/^hsva?\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D*?(([\d.]+)(%?)|$)/i,hexa:/^#?(([\dA-Fa-f]{3,4})|([\dA-Fa-f]{6})|([\dA-Fa-f]{8}))$/i},h=$=>$.map(d=>/^(|\d+)\.\d+|\d+$/.test(d)?Number(d):void 0);let m;e:for(const $ in a)if(m=a[$].exec(T))switch($){case"cmyk":{const[,d,y,b,A]=h(m);if(d>100||y>100||b>100||A>100)break e;return{values:B(d,y,b,A),type:$}}case"rgba":{let[,d,,y,,b,,,A]=h(m);if(d=m[2]==="%"?d/100*255:d,y=m[4]==="%"?y/100*255:y,b=m[6]==="%"?b/100*255:b,A=m[9]==="%"?A/100:A,d>255||y>255||b>255||A<0||A>1)break e;return{values:[...M(d,y,b),A],a:A,type:$}}case"hexa":{let[,d]=m;d.length!==4&&d.length!==3||(d=d.split("").map(A=>A+A).join(""));const y=d.substring(0,6);let b=d.substring(6);return b=b?parseInt(b,16)/255:void 0,{values:[..._(y),b],a:b,type:$}}case"hsla":{let[,d,y,b,,A]=h(m);if(A=m[6]==="%"?A/100:A,d>360||y>100||b>100||A<0||A>1)break e;return{values:[...U(d,y,b),A],a:A,type:$}}case"hsva":{let[,d,y,b,,A]=h(m);if(A=m[6]==="%"?A/100:A,d>360||y>100||b>100||A<0||A>1)break e;return{values:[d,y,b,A],a:A,type:$}}}return{values:null,type:null}}function L(T=0,a=0,h=0,m=1){const $=(y,b)=>(A=-1)=>b(~A?y.map(O=>Number(O.toFixed(A))):y),d={h:T,s:a,v:h,a:m,toHSVA(){const y=[d.h,d.s,d.v,d.a];return y.toString=$(y,b=>`hsva(${b[0]}, ${b[1]}%, ${b[2]}%, ${d.a})`),y},toHSLA(){const y=[...V(d.h,d.s,d.v),d.a];return y.toString=$(y,b=>`hsla(${b[0]}, ${b[1]}%, ${b[2]}%, ${d.a})`),y},toRGBA(){const y=[...P(d.h,d.s,d.v),d.a];return y.toString=$(y,b=>`rgba(${b[0]}, ${b[1]}, ${b[2]}, ${d.a})`),y},toCMYK(){const y=function(b,A,O){const j=P(b,A,O),H=j[0]/255,W=j[1]/255,J=j[2]/255,Q=w(1-H,1-W,1-J);return[100*(Q===1?0:(1-H-Q)/(1-Q)),100*(Q===1?0:(1-W-Q)/(1-Q)),100*(Q===1?0:(1-J-Q)/(1-Q)),100*Q]}(d.h,d.s,d.v);return y.toString=$(y,b=>`cmyk(${b[0]}%, ${b[1]}%, ${b[2]}%, ${b[3]}%)`),y},toHEXA(){const y=function(A,O,j){return P(A,O,j).map(H=>N(H).toString(16).padStart(2,"0"))}(d.h,d.s,d.v),b=d.a>=1?"":Number((255*d.a).toFixed(0)).toString(16).toUpperCase().padStart(2,"0");return b&&y.push(b),y.toString=()=>`#${y.join("").toUpperCase()}`,y},clone:()=>L(d.h,d.s,d.v,d.a)};return d}const R=T=>Math.max(Math.min(T,1),0);function S(T){const a={options:Object.assign({lock:null,onchange:()=>0,onstop:()=>0},T),_keyboard(d){const{options:y}=a,{type:b,key:A}=d;if(document.activeElement===y.wrapper){const{lock:O}=a.options,j=A==="ArrowUp",H=A==="ArrowRight",W=A==="ArrowDown",J=A==="ArrowLeft";if(b==="keydown"&&(j||H||W||J)){let Q=0,re=0;O==="v"?Q=j||H?1:-1:O==="h"?Q=j||H?-1:1:(re=j?-1:W?1:0,Q=J?-1:H?1:0),a.update(R(a.cache.x+.01*Q),R(a.cache.y+.01*re)),d.preventDefault()}else A.startsWith("Arrow")&&(a.options.onstop(),d.preventDefault())}},_tapstart(d){o(document,["mouseup","touchend","touchcancel"],a._tapstop),o(document,["mousemove","touchmove"],a._tapmove),d.cancelable&&d.preventDefault(),a._tapmove(d)},_tapmove(d){const{options:y,cache:b}=a,{lock:A,element:O,wrapper:j}=y,H=j.getBoundingClientRect();let W=0,J=0;if(d){const we=d&&d.touches&&d.touches[0];W=d?(we||d).clientX:0,J=d?(we||d).clientY:0,W<H.left?W=H.left:W>H.left+H.width&&(W=H.left+H.width),J<H.top?J=H.top:J>H.top+H.height&&(J=H.top+H.height),W-=H.left,J-=H.top}else b&&(W=b.x*H.width,J=b.y*H.height);A!=="h"&&(O.style.left=`calc(${W/H.width*100}% - ${O.offsetWidth/2}px)`),A!=="v"&&(O.style.top=`calc(${J/H.height*100}% - ${O.offsetHeight/2}px)`),a.cache={x:W/H.width,y:J/H.height};const Q=R(W/H.width),re=R(J/H.height);switch(A){case"v":return y.onchange(Q);case"h":return y.onchange(re);default:return y.onchange(Q,re)}},_tapstop(){a.options.onstop(),c(document,["mouseup","touchend","touchcancel"],a._tapstop),c(document,["mousemove","touchmove"],a._tapmove)},trigger(){a._tapmove()},update(d=0,y=0){const{left:b,top:A,width:O,height:j}=a.options.wrapper.getBoundingClientRect();a.options.lock==="h"&&(y=d),a._tapmove({clientX:b+O*d,clientY:A+j*y})},destroy(){const{options:d,_tapstart:y,_keyboard:b}=a;c(document,["keydown","keyup"],b),c([d.wrapper,d.element],"mousedown",y),c([d.wrapper,d.element],"touchstart",y,{passive:!1})}},{options:h,_tapstart:m,_keyboard:$}=a;return o([h.wrapper,h.element],"mousedown",m),o([h.wrapper,h.element],"touchstart",m,{passive:!1}),o(document,["keydown","keyup"],$),a}function f(T={}){T=Object.assign({onchange:()=>0,className:"",elements:[]},T);const a=o(T.elements,"click",h=>{T.elements.forEach(m=>m.classList[h.target===m?"add":"remove"](T.className)),T.onchange(h),h.stopPropagation()});return{destroy:()=>c(...a)}}const D={variantFlipOrder:{start:"sme",middle:"mse",end:"ems"},positionFlipOrder:{top:"tbrl",right:"rltb",bottom:"btrl",left:"lrbt"},position:"bottom",margin:8,padding:0},I=(T,a,h)=>{const m=typeof T!="object"||T instanceof HTMLElement?{reference:T,popper:a,...h}:T;return{update($=m){const{reference:d,popper:y}=Object.assign(m,$);if(!y||!d)throw new Error("Popper- or reference-element missing.");return((b,A,O)=>{const{container:j,arrow:H,margin:W,padding:J,position:Q,variantFlipOrder:re,positionFlipOrder:we}={container:document.documentElement.getBoundingClientRect(),...D,...O},{left:ze,top:Ke}=A.style;A.style.left="0",A.style.top="0";const ie=b.getBoundingClientRect(),ce=A.getBoundingClientRect(),Ln={t:ie.top-ce.height-W,b:ie.bottom+W,r:ie.right+W,l:ie.left-ce.width-W},Un={vs:ie.left,vm:ie.left+ie.width/2-ce.width/2,ve:ie.left+ie.width-ce.width,hs:ie.top,hm:ie.bottom-ie.height/2-ce.height/2,he:ie.bottom-ce.height},[qn,Dn="middle"]=Q.split("-"),On=we[qn],Fn=re[Dn],{top:Mt,left:Nt,bottom:Lt,right:Ut}=j;for(const Be of On){const Ce=Be==="t"||Be==="b";let Ie=Ln[Be];const[We,Je]=Ce?["top","left"]:["left","top"],[Ge,Qe]=Ce?[ce.height,ce.width]:[ce.width,ce.height],[Vn,jn]=Ce?[Lt,Ut]:[Ut,Lt],[Hn,zn]=Ce?[Mt,Nt]:[Nt,Mt];if(!(Ie<Hn||Ie+Ge+J>Vn))for(const Ye of Fn){let Pe=Un[(Ce?"v":"h")+Ye];if(!(Pe<zn||Pe+Qe+J>jn)){if(Pe-=ce[Je],Ie-=ce[We],A.style[Je]=`${Pe}px`,A.style[We]=`${Ie}px`,H){const Xe=Ce?ie.width/2:ie.height/2,Ne=Qe/2,qt=Xe>Ne,Kn=Pe+{s:qt?Ne:Xe,m:Ne,e:qt?Ne:Qe-Xe}[Ye],Wn=Ie+{t:Ge,b:0,r:0,l:Ge}[Be];H.style[Je]=`${Kn}px`,H.style[We]=`${Wn}px`}return Be+Ye}}}return A.style.left=ze,A.style.top=Ke,null})(d,y,m)}}},Z=class Z{constructor(a){le(this,"_initializingActive",!0);le(this,"_recalc",!0);le(this,"_nanopop",null);le(this,"_root",null);le(this,"_color",L());le(this,"_lastColor",L());le(this,"_swatchColors",[]);le(this,"_setupAnimationFrame",null);le(this,"_eventListener",{init:[],save:[],hide:[],show:[],clear:[],change:[],changestop:[],cancel:[],swatchselect:[]});this.options=a=Object.assign({...Z.DEFAULT_OPTIONS},a);const{swatches:h,components:m,theme:$,sliders:d,lockOpacity:y,padding:b}=a;["nano","monolith"].includes($)&&!d&&(a.sliders="h"),m.interaction||(m.interaction={});const{preview:A,opacity:O,hue:j,palette:H}=m;m.opacity=!y&&O,m.palette=H||A||O||j,this._preBuild(),this._buildComponents(),this._bindEvents(),this._finalBuild(),h&&h.length&&h.forEach(re=>this.addSwatch(re));const{button:W,app:J}=this._root;this._nanopop=I(W,J,{margin:b}),W.setAttribute("role","button"),W.setAttribute("aria-label",this._t("btn:toggle"));const Q=this;this._setupAnimationFrame=requestAnimationFrame(function re(){if(!J.offsetWidth)return requestAnimationFrame(re);Q.setColor(a.default),Q._rePositioningPicker(),a.defaultRepresentation&&(Q._representation=a.defaultRepresentation,Q.setColorRepresentation(Q._representation)),a.showAlways&&Q.show(),Q._initializingActive=!1,Q._emit("init")})}_preBuild(){const{options:a}=this;for(const h of["el","container"])a[h]=v(a[h]);this._root=(h=>{const{components:m,useAsButton:$,inline:d,appClass:y,theme:b,lockOpacity:A}=h.options,O=J=>J?"":'style="display:none" hidden',j=J=>h._t(J),H=p(`
      <div :ref="root" class="pickr">

        ${$?"":'<button type="button" :ref="button" class="pcr-button"></button>'}

        <div :ref="app" class="pcr-app ${y||""}" data-theme="${b}" ${d?'style="position: unset"':""} aria-label="${j("ui:dialog")}" role="window">
          <div class="pcr-selection" ${O(m.palette)}>
            <div :obj="preview" class="pcr-color-preview" ${O(m.preview)}>
              <button type="button" :ref="lastColor" class="pcr-last-color" aria-label="${j("btn:last-color")}"></button>
              <div :ref="currentColor" class="pcr-current-color"></div>
            </div>

            <div :obj="palette" class="pcr-color-palette">
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="palette" class="pcr-palette" tabindex="0" aria-label="${j("aria:palette")}" role="listbox"></div>
            </div>

            <div :obj="hue" class="pcr-color-chooser" ${O(m.hue)}>
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="slider" class="pcr-hue pcr-slider" tabindex="0" aria-label="${j("aria:hue")}" role="slider"></div>
            </div>

            <div :obj="opacity" class="pcr-color-opacity" ${O(m.opacity)}>
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="slider" class="pcr-opacity pcr-slider" tabindex="0" aria-label="${j("aria:opacity")}" role="slider"></div>
            </div>
          </div>

          <div class="pcr-swatches ${m.palette?"":"pcr-last"}" :ref="swatches"></div>

          <div :obj="interaction" class="pcr-interaction" ${O(Object.keys(m.interaction).length)}>
            <input :ref="result" class="pcr-result" type="text" spellcheck="false" ${O(m.interaction.input)} aria-label="${j("aria:input")}">

            <input :arr="options" class="pcr-type" data-type="HEXA" value="${A?"HEX":"HEXA"}" type="button" ${O(m.interaction.hex)}>
            <input :arr="options" class="pcr-type" data-type="RGBA" value="${A?"RGB":"RGBA"}" type="button" ${O(m.interaction.rgba)}>
            <input :arr="options" class="pcr-type" data-type="HSLA" value="${A?"HSL":"HSLA"}" type="button" ${O(m.interaction.hsla)}>
            <input :arr="options" class="pcr-type" data-type="HSVA" value="${A?"HSV":"HSVA"}" type="button" ${O(m.interaction.hsva)}>
            <input :arr="options" class="pcr-type" data-type="CMYK" value="CMYK" type="button" ${O(m.interaction.cmyk)}>

            <input :ref="save" class="pcr-save" value="${j("btn:save")}" type="button" ${O(m.interaction.save)} aria-label="${j("aria:btn:save")}">
            <input :ref="cancel" class="pcr-cancel" value="${j("btn:cancel")}" type="button" ${O(m.interaction.cancel)} aria-label="${j("aria:btn:cancel")}">
            <input :ref="clear" class="pcr-clear" value="${j("btn:clear")}" type="button" ${O(m.interaction.clear)} aria-label="${j("aria:btn:clear")}">
          </div>
        </div>
      </div>
    `),W=H.interaction;return W.options.find(J=>!J.hidden&&!J.classList.add("active")),W.type=()=>W.options.find(J=>J.classList.contains("active")),H})(this),a.useAsButton&&(this._root.button=a.el),a.container.appendChild(this._root.root)}_finalBuild(){const a=this.options,h=this._root;if(a.container.removeChild(h.root),a.inline){const m=a.el.parentElement;a.el.nextSibling?m.insertBefore(h.app,a.el.nextSibling):m.appendChild(h.app)}else a.container.appendChild(h.app);a.useAsButton?a.inline&&a.el.remove():a.el.parentNode.replaceChild(h.root,a.el),a.disabled&&this.disable(),a.comparison||(h.button.style.transition="none",a.useAsButton||(h.preview.lastColor.style.transition="none")),this.hide()}_buildComponents(){const a=this,h=this.options.components,m=(a.options.sliders||"v").repeat(2),[$,d]=m.match(/^[vh]+$/g)?m:[],y=()=>this._color||(this._color=this._lastColor.clone()),b={palette:S({element:a._root.palette.picker,wrapper:a._root.palette.palette,onstop:()=>a._emit("changestop","slider",a),onchange(A,O){if(!h.palette)return;const j=y(),{_root:H,options:W}=a,{lastColor:J,currentColor:Q}=H.preview;a._recalc&&(j.s=100*A,j.v=100-100*O,j.v<0&&(j.v=0),a._updateOutput("slider"));const re=j.toRGBA().toString(0);this.element.style.background=re,this.wrapper.style.background=`
                        linear-gradient(to top, rgba(0, 0, 0, ${j.a}), transparent),
                        linear-gradient(to left, hsla(${j.h}, 100%, 50%, ${j.a}), rgba(255, 255, 255, ${j.a}))
                    `,W.comparison?W.useAsButton||a._lastColor||J.style.setProperty("--pcr-color",re):(H.button.style.setProperty("--pcr-color",re),H.button.classList.remove("clear"));const we=j.toHEXA().toString();for(const{el:ze,color:Ke}of a._swatchColors)ze.classList[we===Ke.toHEXA().toString()?"add":"remove"]("pcr-active");Q.style.setProperty("--pcr-color",re)}}),hue:S({lock:d==="v"?"h":"v",element:a._root.hue.picker,wrapper:a._root.hue.slider,onstop:()=>a._emit("changestop","slider",a),onchange(A){if(!h.hue||!h.palette)return;const O=y();a._recalc&&(O.h=360*A),this.element.style.backgroundColor=`hsl(${O.h}, 100%, 50%)`,b.palette.trigger()}}),opacity:S({lock:$==="v"?"h":"v",element:a._root.opacity.picker,wrapper:a._root.opacity.slider,onstop:()=>a._emit("changestop","slider",a),onchange(A){if(!h.opacity||!h.palette)return;const O=y();a._recalc&&(O.a=Math.round(100*A)/100),this.element.style.background=`rgba(0, 0, 0, ${O.a})`,b.palette.trigger()}}),selectable:f({elements:a._root.interaction.options,className:"active",onchange(A){a._representation=A.target.getAttribute("data-type").toUpperCase(),a._recalc&&a._updateOutput("swatch")}})};this._components=b}_bindEvents(){const{_root:a,options:h}=this,m=[o(a.interaction.clear,"click",()=>this._clearColor()),o([a.interaction.cancel,a.preview.lastColor],"click",()=>{this.setHSVA(...(this._lastColor||this._color).toHSVA(),!0),this._emit("cancel")}),o(a.interaction.save,"click",()=>{!this.applyColor()&&!h.showAlways&&this.hide()}),o(a.interaction.result,["keyup","input"],$=>{this.setColor($.target.value,!0)&&!this._initializingActive&&(this._emit("change",this._color,"input",this),this._emit("changestop","input",this)),$.stopImmediatePropagation()}),o(a.interaction.result,["focus","blur"],$=>{this._recalc=$.type==="blur",this._recalc&&this._updateOutput(null)}),o([a.palette.palette,a.palette.picker,a.hue.slider,a.hue.picker,a.opacity.slider,a.opacity.picker],["mousedown","touchstart"],()=>this._recalc=!0,{passive:!0})];if(!h.showAlways){const $=h.closeWithKey;m.push(o(a.button,"click",()=>this.isOpen()?this.hide():this.show()),o(document,"keyup",d=>this.isOpen()&&(d.key===$||d.code===$)&&this.hide()),o(document,["touchstart","mousedown"],d=>{this.isOpen()&&!k(d).some(y=>y===a.app||y===a.button)&&this.hide()},{capture:!0}))}if(h.adjustableNumbers){const $={rgba:[255,255,255,1],hsva:[360,100,100,1],hsla:[360,100,100,1],cmyk:[100,100,100,100]};C(a.interaction.result,(d,y,b)=>{const A=$[this.getColorRepresentation().toLowerCase()];if(A){const O=A[b],j=d+(O>=100?1e3*y:y);return j<=0?0:Number((j<O?j:O).toPrecision(3))}return d})}if(h.autoReposition&&!h.inline){let $=null;const d=this;m.push(o(window,["scroll","resize"],()=>{d.isOpen()&&(h.closeOnScroll&&d.hide(),$===null?($=setTimeout(()=>$=null,100),requestAnimationFrame(function y(){d._rePositioningPicker(),$!==null&&requestAnimationFrame(y)})):(clearTimeout($),$=setTimeout(()=>$=null,100)))},{capture:!0}))}this._eventBindings=m}_rePositioningPicker(){const{options:a}=this;if(!a.inline&&!this._nanopop.update({container:document.body.getBoundingClientRect(),position:a.position})){const h=this._root.app,m=h.getBoundingClientRect();h.style.top=(window.innerHeight-m.height)/2+"px",h.style.left=(window.innerWidth-m.width)/2+"px"}}_updateOutput(a){const{_root:h,_color:m,options:$}=this;if(h.interaction.type()){const d=`to${h.interaction.type().getAttribute("data-type")}`;h.interaction.result.value=typeof m[d]=="function"?m[d]().toString($.outputPrecision):""}!this._initializingActive&&this._recalc&&this._emit("change",m,a,this)}_clearColor(a=!1){const{_root:h,options:m}=this;m.useAsButton||h.button.style.setProperty("--pcr-color","rgba(0, 0, 0, 0.15)"),h.button.classList.add("clear"),m.showAlways||this.hide(),this._lastColor=null,this._initializingActive||a||(this._emit("save",null),this._emit("clear"))}_parseLocalColor(a){const{values:h,type:m,a:$}=q(a),{lockOpacity:d}=this.options,y=$!==void 0&&$!==1;return h&&h.length===3&&(h[3]=void 0),{values:!h||d&&y?null:h,type:m}}_t(a){return this.options.i18n[a]||Z.I18N_DEFAULTS[a]}_emit(a,...h){this._eventListener[a].forEach(m=>m(...h,this))}on(a,h){return this._eventListener[a].push(h),this}off(a,h){const m=this._eventListener[a]||[],$=m.indexOf(h);return~$&&m.splice($,1),this}addSwatch(a){const{values:h}=this._parseLocalColor(a);if(h){const{_swatchColors:m,_root:$}=this,d=L(...h),y=l(`<button type="button" style="--pcr-color: ${d.toRGBA().toString(0)}" aria-label="${this._t("btn:swatch")}"/>`);return $.swatches.appendChild(y),m.push({el:y,color:d}),this._eventBindings.push(o(y,"click",()=>{this.setHSVA(...d.toHSVA(),!0),this._emit("swatchselect",d),this._emit("change",d,"swatch",this)})),!0}return!1}removeSwatch(a){const h=this._swatchColors[a];if(h){const{el:m}=h;return this._root.swatches.removeChild(m),this._swatchColors.splice(a,1),!0}return!1}applyColor(a=!1){const{preview:h,button:m}=this._root,$=this._color.toRGBA().toString(0);return h.lastColor.style.setProperty("--pcr-color",$),this.options.useAsButton||m.style.setProperty("--pcr-color",$),m.classList.remove("clear"),this._lastColor=this._color.clone(),this._initializingActive||a||this._emit("save",this._color),this}destroy(){cancelAnimationFrame(this._setupAnimationFrame),this._eventBindings.forEach(a=>c(...a)),Object.keys(this._components).forEach(a=>this._components[a].destroy())}destroyAndRemove(){this.destroy();const{root:a,app:h}=this._root;a.parentElement&&a.parentElement.removeChild(a),h.parentElement.removeChild(h),Object.keys(this).forEach(m=>this[m]=null)}hide(){return!!this.isOpen()&&(this._root.app.classList.remove("visible"),this._emit("hide"),!0)}show(){return!this.options.disabled&&!this.isOpen()&&(this._root.app.classList.add("visible"),this._rePositioningPicker(),this._emit("show",this._color),this)}isOpen(){return this._root.app.classList.contains("visible")}setHSVA(a=360,h=0,m=0,$=1,d=!1){const y=this._recalc;if(this._recalc=!1,a<0||a>360||h<0||h>100||m<0||m>100||$<0||$>1)return!1;this._color=L(a,h,m,$);const{hue:b,opacity:A,palette:O}=this._components;return b.update(a/360),A.update($),O.update(h/100,1-m/100),d||this.applyColor(),y&&this._updateOutput(),this._recalc=y,!0}setColor(a,h=!1){if(a===null)return this._clearColor(h),!0;const{values:m,type:$}=this._parseLocalColor(a);if(m){const d=$.toUpperCase(),{options:y}=this._root.interaction,b=y.find(A=>A.getAttribute("data-type")===d);if(b&&!b.hidden)for(const A of y)A.classList[A===b?"add":"remove"]("active");return!!this.setHSVA(...m,h)&&this.setColorRepresentation(d)}return!1}setColorRepresentation(a){return a=a.toUpperCase(),!!this._root.interaction.options.find(h=>h.getAttribute("data-type").startsWith(a)&&!h.click())}getColorRepresentation(){return this._representation}getColor(){return this._color}getSelectedColor(){return this._lastColor}getRoot(){return this._root}disable(){return this.hide(),this.options.disabled=!0,this._root.button.classList.add("disabled"),this}enable(){return this.options.disabled=!1,this._root.button.classList.remove("disabled"),this}};le(Z,"utils",e),le(Z,"version","1.9.1"),le(Z,"I18N_DEFAULTS",{"ui:dialog":"color picker dialog","btn:toggle":"toggle color picker dialog","btn:swatch":"color swatch","btn:last-color":"use previous color","btn:save":"Save","btn:cancel":"Cancel","btn:clear":"Clear","aria:btn:save":"save and close","aria:btn:cancel":"cancel and close","aria:btn:clear":"clear and close","aria:input":"color input field","aria:palette":"color selection area","aria:hue":"hue selection slider","aria:opacity":"selection slider"}),le(Z,"DEFAULT_OPTIONS",{appClass:null,theme:"classic",useAsButton:!1,padding:8,disabled:!1,comparison:!0,closeOnScroll:!1,outputPrecision:0,lockOpacity:!1,autoReposition:!0,container:"body",components:{interaction:{}},i18n:{},swatches:null,inline:!1,sliders:null,default:"#42445a",defaultRepresentation:null,position:"bottom-middle",adjustableNumbers:!0,showAlways:!1,closeWithKey:"Escape"}),le(Z,"create",a=>new Z(a));let z=Z;return n=n.default})())}(kt)),kt.exports}var sa=aa();const ra=Cn(sa),ia={class:"color-picker-wrapper"},la={class:"color-picker-action"},ca={__name:"index",props:{value:{type:String,default:"#000000"}},emits:["update:value","change"],setup(i,{emit:r}){const s=r,n=i,e=G(null);return qe(()=>{const t=ra.create({el:e.value,container:"body",theme:"nano",default:n.value,defaultRepresentation:"HEX",swatches:["rgba(244, 67, 54, 1)","rgba(233, 30, 99, 0.95)","rgba(156, 39, 176, 0.9)","rgba(103, 58, 183, 0.85)","rgba(63, 81, 181, 0.8)","rgba(33, 150, 243, 0.75)","rgba(3, 169, 244, 0.7)","rgba(0, 188, 212, 0.7)","rgba(0, 150, 136, 0.75)","rgba(76, 175, 80, 0.8)","rgba(139, 195, 74, 0.85)","rgba(205, 220, 57, 0.9)","rgba(255, 235, 59, 0.95)","rgba(255, 193, 7, 1)"],components:{preview:!0,opacity:!0,hue:!0,interaction:{hex:!1,rgba:!1,hsla:!1,hsva:!1,cmyk:!1,input:!0,clear:!1,save:!0}}});t.on("save",(o,c)=>{let l=o.toHEXA().toString();s("update:value",l),s("change",l),c.hide()}),t.on("show",()=>{const o=document.querySelectorAll(".pcr-save");o&&o.length&&o.forEach(function(c){c.tagName.toLowerCase()==="input"&&(c.value="保存")})})}),(t,o)=>{const c=ve;return K(),X("div",ia,[g(c,{value:n.value,readonly:!0,placeholder:"Basic usage"},null,8,["value"]),u("span",la,[u("span",{ref_key:"colorPicker",ref:e},null,512)])])}}},$t=ae(ca,[["__scopeId","data-v-f2a9e7d0"]]),ua="/assets/img/quick-help-BZ3Cu-IE.png",da={class:"quick-instructions-box"},pa={class:"quick-action-right"},fa={class:"quick-list-box"},ha={class:"list-box-wrap"},ma={class:"drag-btn"},_a={class:"left-box"},ga={class:"title"},va={class:"content"},ya={class:"opration-box"},ba={class:"form-box"},wa={__name:"quick-instruction",props:{type:{type:Number,default:void 0}},emits:["updata"],setup(i,{emit:r}){const s=i,n=r,e=Qn(),t=Fe(),{robotInfo:o}=De(t),{getRobot:c}=t,l=G([]),p=G(parseInt(s.type==-1?o.value.fast_command_switch:o.value.yunpc_fast_command_switch)||0);$e(l,S=>{n("updata",{comand_list:S,fast_command_switch:p.value})});const k=()=>{ao({robot_key:o.value.robot_key,app_id:s.type}).then(S=>{l.value=S.data||[],t.setQuickCommand(S.data)})};k();const v=_e.useForm,C=G(!1),w=G("添加快捷指令"),x=ue({robot_id:e.query.id,app_id:s.type,title:"",typ:1,content:"",id:""}),F=S=>{const{id:f}=o.value;io({robot_key:o.value.robot_key,app_id:s.type}).then(D=>{p.value=S,n("updata",{comand_list:l.value,fast_command_switch:p.value}),c(f),se.success("修改成功")}).catch(D=>{p.value=!p.value})},N=()=>{x.content="",U(["content"])},P=S=>{C.value=!0,M(),w.value=S.id?"编辑快捷指令":"添加快捷指令",x.title=S.title||"",x.content=S.content||"",x.id=S.id||"",x.typ=+S.typ||1},V=ue({title:[{message:"请输入指令标题",required:!0}],content:[{message:"",required:!0},{validator:async(S,f)=>f==""?Promise.reject(new Error(`请输入${x.typ==1?"内容":"网址"}`)):x.typ==1||co(f)?Promise.resolve():Promise.reject(new Error("请输入合法网页链接"))}]}),{resetFields:M,validate:B,clearValidate:U,validateInfos:_}=v(x,V),q=()=>{B().then(()=>{lo({...he(x)}).then(S=>{se.success("修改成功"),C.value=!1,k()})})},L=S=>{me.confirm({title:"提醒",icon:g(je),content:"确定要删除该快捷指令吗?",okText:"确定",okType:"danger",cancelText:"取消",onOk(){ro({id:S}).then(f=>{se.success("删除成功"),k()})},onCancel(){}})},R=S=>{let f=l.value.map((D,I)=>({id:+D.id,sort:I+1}));so({data:f}).then(D=>{se.success("保存成功"),k()})};return(S,f)=>{const D=ho,I=Ve,z=Bn,Z=ge,T=ve,a=Ee,h=En,m=Sn,$=In,d=_e,y=me;return K(),X("div",da,[g(Ae,null,{title:E(()=>[f[9]||(f[9]=Y(" 快捷指令设置 ")),g(D,{placement:"top"},{content:E(()=>f[8]||(f[8]=[u("div",{class:"help-box"},[u("div",null,"快捷指令是对话输入框上方的按钮,配置完成后,用户可以快速发起预设对话"),u("img",{src:ua,alt:""})],-1)])),default:E(()=>[g(te(fo),{class:"help-icon"})]),_:1})]),icon:E(()=>[g(I,{name:"quick-Instruction",style:{"font-size":"16px",color:"#262626"}})]),action:E(()=>[u("div",pa,[g(z,{onChange:F,class:"switch-item",checkedValue:1,unCheckedValue:0,checked:p.value,"onUpdate:checked":f[0]||(f[0]=b=>p.value=b),"checked-children":"开","un-checked-children":"关"},null,8,["checked"]),g(Z,{onClick:P,size:"small",type:"primary"},{default:E(()=>f[10]||(f[10]=[Y("添加")])),_:1,__:[10]})])]),default:E(()=>[u("div",fa,[g(te(uo),{modelValue:l.value,"onUpdate:modelValue":f[1]||(f[1]=b=>l.value=b),"item-key":"id",onEnd:f[2]||(f[2]=b=>R(b)),handle:".drag-btn"},{item:E(({element:b,index:A})=>[u("div",ha,[(K(),X("div",{class:"list-item",key:b.id},[u("div",ma,[g(I,{name:"drag"})]),u("div",_a,[u("div",ga,ee(b.title),1),u("div",va,ee(b.content),1)]),u("div",ya,[g(te(po),{onClick:O=>P(b)},null,8,["onClick"]),g(te(no),{onClick:O=>L(b.id)},null,8,["onClick"])])]))])]),_:1},8,["modelValue"])])]),_:1}),g(y,{open:C.value,"onUpdate:open":f[7]||(f[7]=b=>C.value=b),title:w.value,onOk:q,width:"576px"},{default:E(()=>[u("div",ba,[g(d,{layout:"vertical"},{default:E(()=>[g(a,Dt({label:"指令标题"},te(_).title),{default:E(()=>[g(T,{placeholder:"请输入指令标题",maxLength:20,value:x.title,"onUpdate:value":f[3]||(f[3]=b=>x.title=b)},null,8,["value"])]),_:1},16),g(a,{label:"指令类型",required:""},{default:E(()=>[g(m,{value:x.typ,"onUpdate:value":f[4]||(f[4]=b=>x.typ=b),onChange:N},{default:E(()=>[g(h,{value:1},{default:E(()=>f[11]||(f[11]=[Y("输入内容")])),_:1,__:[11]}),g(h,{value:2},{default:E(()=>f[12]||(f[12]=[Y("跳转网页")])),_:1,__:[12]})]),_:1},8,["value"])]),_:1}),g(a,Dt({label:x.typ==1?"指令内容":"网页链接",required:""},te(_).content),{default:E(()=>[x.typ==1?(K(),oe($,{key:0,style:{height:"100px"},value:x.content,"onUpdate:value":f[5]||(f[5]=b=>x.content=b),placeholder:"请输入指令内容"},null,8,["value"])):(K(),oe(T,{key:1,placeholder:"请输入网页链接",value:x.content,"onUpdate:value":f[6]||(f[6]=b=>x.content=b)},null,8,["value"]))]),_:1},16,["label"])]),_:1})])]),_:1},8,["open","title"])])}}},Nn=ae(wa,[["__scopeId","data-v-9444f65b"]]),Ca={class:"web-app-box"},ka={class:"box-left"},$a={class:"box-wrapper"},Aa={class:"web-app-info"},Sa={class:"web-app-link"},Ea=["href"],Ba={class:"link-action"},Ia=["src"],Pa={class:"card-title"},Ra={class:"web-app-link"},Ta=["href"],xa={class:"link-action"},Ma=["src"],Na={class:"access-restrictions form-box"},La={class:"form-item"},Ua={class:"form-item-body"},qa={class:"box-wrapper"},Da={class:"web-app-style form-box"},Oa={class:"box-wrapper"},Fa={class:"box-right"},Va={class:"demo-box"},ja=["src"],Ha={__name:"web-app",setup(i){const r=Yn(),s=Fe(),{robotInfo:n,external_config_h5:e}=De(s),{h5_website:t,h5_domain:o,robot_key:c}=n.value,{getRobot:l}=s,p=G(""),k=G(""),v=G(),C=ue({logo:e.value.logo,pageTitle:e.value.pageTitle,navbarShow:e.value.navbarShow,lang:e.value.lang,pageStyle:e.value.pageStyle}),w=pe(()=>`${o}/#/chat/pc?robot_key=${c}`),x=pe(()=>`${o}/#/chat/h5?robot_key=${c}`),F=pe(()=>t);$e(C,S=>{P(S)});const N=S=>{P(S,"updataQuickComand")},P=(S,f)=>{document.getElementById("mobile-preview").contentWindow.postMessage({type:f||"onPreview",data:JSON.parse(JSON.stringify(S))},"*")},V={lang:[{required:!0,message:"请选择语言",trigger:"change"}],pageTitle:[{required:!0,message:"请输入标题",trigger:"input"},{trigger:"input",validator:()=>C.logo?Promise.resolve():Promise.reject("请上传logo")}],navbarShow:[{required:!0,message:"请选择是否显示标题栏",trigger:"change"}],pageStyle:{navbarBackgroundColor:[{required:!0,message:"请选择标题栏颜色",trigger:"change"}]}},M=G(e.value.accessRestrictionsType||1),B=()=>{let S={...he(e.value)};S.accessRestrictionsType=M.value,U(S)},U=S=>{const{id:f}=n.value;kn({id:f,external_config_h5:JSON.stringify(S)}).then(()=>{l(f),se.success("保存成功"),r.go(0)})},_=()=>{v.value.validate().then(()=>{let S={...he(C)};S.accessRestrictionsType=M.value,U(S)}).catch(S=>{})},q=S=>{window.open(S)},L=S=>{xe(S),se.success("复制成功")},R=async()=>{try{p.value=await _n.toDataURL(w.value),k.value=await _n.toDataURL(x.value)}catch(S){console.error(S)}};return setTimeout(()=>{R()},300),(S,f)=>{const D=Ve,I=ge,z=mo,Z=En,T=Sn,a=Ee,h=It,m=Bt,$=_e;return K(),X("div",Ca,[u("div",ka,[u("div",$a,[g(Ae,{title:"H5链接"},{icon:E(()=>[g(D,{name:"phone",style:{"font-size":"16px",color:"#262626"}})]),default:E(()=>[u("div",Aa,[u("div",Sa,[u("a",{href:x.value,target:"_blank"},ee(x.value),9,Ea)]),u("div",Ba,[g(I,{class:"action-btn",type:"primary",ghost:"",onClick:f[0]||(f[0]=d=>L(x.value))},{default:E(()=>f[10]||(f[10]=[Y("复 制")])),_:1,__:[10]}),g(I,{class:"action-btn",onClick:f[1]||(f[1]=d=>q(x.value))},{default:E(()=>f[11]||(f[11]=[Y("预 览")])),_:1,__:[11]}),g(z,{color:"#fff",placement:"top"},{title:E(()=>[u("img",{style:{width:"180px"},src:k.value,alt:""},null,8,Ia)]),default:E(()=>[g(I,{class:"action-btn"},{default:E(()=>f[12]||(f[12]=[Y("二维码")])),_:1,__:[12]})]),_:1})]),u("div",Pa,[g(D,{name:"circularNeedle",style:{"font-size":"16px",color:"#262626"}}),f[13]||(f[13]=u("div",{class:"title-text"},"pc网页链接",-1))]),u("div",Ra,[u("a",{href:w.value,target:"_blank"},ee(w.value),9,Ta)]),u("div",xa,[g(I,{class:"action-btn",type:"primary",ghost:"",onClick:f[2]||(f[2]=d=>L(w.value))},{default:E(()=>f[14]||(f[14]=[Y("复 制")])),_:1,__:[14]}),g(I,{class:"action-btn",onClick:f[3]||(f[3]=d=>q(w.value))},{default:E(()=>f[15]||(f[15]=[Y("预 览")])),_:1,__:[15]}),g(z,{color:"#fff",placement:"top"},{title:E(()=>[u("img",{style:{width:"180px"},src:p.value,alt:""},null,8,Ma)]),default:E(()=>[g(I,{class:"action-btn"},{default:E(()=>f[16]||(f[16]=[Y("二维码")])),_:1,__:[16]})]),_:1})]),u("div",Na,[u("div",La,[f[20]||(f[20]=u("div",{class:"form-item-label"},"访问限制",-1)),u("div",Ua,[g(T,{value:M.value,"onUpdate:value":f[4]||(f[4]=d=>M.value=d),onChange:B},{default:E(()=>[g(Z,{value:1},{default:E(()=>f[17]||(f[17]=[u("span",{class:"default-text-color"},"无限制",-1)])),_:1,__:[17]}),g(Z,{value:2},{default:E(()=>f[18]||(f[18]=[u("span",{class:"default-text-color"},"登录后才可访问",-1)])),_:1,__:[18]}),ne("",!0)]),_:1},8,["value"])])])])])]),_:1})]),u("div",qa,[g(Ae,{title:"样式设置"},{icon:E(()=>[g(D,{name:"phone",style:{"font-size":"16px",color:"#262626"}})]),action:E(()=>[g(I,{onClick:_,size:"small",type:"primary"},{default:E(()=>f[21]||(f[21]=[Y("保存")])),_:1,__:[21]})]),default:E(()=>[u("div",Da,[g($,{ref_key:"formRef",ref:v,layout:"vertical",model:C,rules:V},{default:E(()=>[g(a,{class:"form-item",label:"是否显示标题栏",name:"navbarShow"},{default:E(()=>[g(T,{value:C.navbarShow,"onUpdate:value":f[5]||(f[5]=d=>C.navbarShow=d),name:"navbarShow"},{default:E(()=>[g(Z,{value:1},{default:E(()=>f[22]||(f[22]=[Y("显示")])),_:1,__:[22]}),g(Z,{value:2},{default:E(()=>f[23]||(f[23]=[Y("不显示")])),_:1,__:[23]})]),_:1},8,["value"])]),_:1}),g(a,{class:"form-item",label:"页面标题",name:"pageTitle"},{default:E(()=>[g(Me,{avatar:C.logo,"onUpdate:avatar":f[6]||(f[6]=d=>C.logo=d),value:C.pageTitle,"onUpdate:value":f[7]||(f[7]=d=>C.pageTitle=d)},null,8,["avatar","value"])]),_:1}),g(a,{class:"form-item",label:"标题栏颜色",name:["pageStyle","navbarBackgroundColor"]},{default:E(()=>[g($t,{value:C.pageStyle.navbarBackgroundColor,"onUpdate:value":f[8]||(f[8]=d=>C.pageStyle.navbarBackgroundColor=d)},null,8,["value"])]),_:1}),g(a,{class:"form-item",label:"语言",name:"lang"},{default:E(()=>[g(m,{style:{width:"180px"},value:C.lang,"onUpdate:value":f[9]||(f[9]=d=>C.lang=d),placeholder:"请选择语言"},{default:E(()=>[g(h,{value:"zh-CN"},{default:E(()=>f[24]||(f[24]=[Y("简体中文")])),_:1,__:[24]}),g(h,{value:"en-US"},{default:E(()=>f[25]||(f[25]=[Y("English")])),_:1,__:[25]})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])])]),_:1})]),u("div",Oa,[g(Nn,{type:te(n).app_id,onUpdata:N},null,8,["type"])])]),u("div",Fa,[u("div",Va,[u("iframe",{id:"mobile-preview",src:F.value,frameborder:"0"},null,8,ja)])])])}}},za=ae(Ha,[["__scopeId","data-v-2faed53d"]]);function Ka({pc_domain:i,robot_key:r}){var s=`<script>
  (function (z, h, i, m, a, j, s) {
    z[m] = z[m] || function () {
      (z[m].a = z[m].a || []).push(arguments);
    };
    (j = h.createElement(i)), (s = h.getElementsByTagName(i)[0]);
    j.async = true;
    j.charset = "UTF-8";
    j.setAttribute(
      "data-json",
      JSON.stringify({
        robot_key: "${r}",
        language: "zh-CN",
      })
    );
    j.id = "ai_chat_js";
    j.src = '${i}/sdk/ai-chat-sdk.umd.cjs';
    s.parentNode.insertBefore(j, s);
  })(window, document, "script", "_ai_chat");
<\/script>`;return s}const Wa={class:"gradient-color-picker"},Ja={class:"color-picker-box"},Ga={class:"gradient-type-select"},Qa={class:"color-item"},Ya={class:"right-arrow"},Xa={class:"color-item"},Za={__name:"gradient-color-picker",props:{value:{type:String,default:""}},emits:["update:value"],setup(i,{emit:r}){const s=r,n=i,e=_e.useInjectFormItemContext(),t=G([{key:1,label:"单色",value:"color",type:"color"},{key:2,label:"线性渐变（横向）",value:"to right",type:"linear-gradient"},{key:3,label:"线性渐变（竖向）",value:"to bottom",type:"linear-gradient"},{key:4,label:"径向渐变",value:"circle",type:"radial-gradient"}]),o=G("linear-gradient"),c=G("to right"),l=G("#2435E7"),p=G("#01A0FB"),k=pe(()=>o.value=="color"?l.value:`${o.value}(${c.value}, ${l.value}, ${p.value})`);$e(()=>k.value,()=>{let C=[o.value,c.value,l.value,p.value].join(",");s("update:value",C),e.onFieldChange()}),$e(()=>n.value,()=>{const C=n.value.split(","),[w,x,F,N]=C;o.value=w,c.value=x,l.value=F,p.value=N},{immediate:!0});const v=(C,w)=>{o.value=w.type,c.value=C,e.onFieldChange()};return(C,w)=>{const x=It,F=Bt;return K(),X("div",Wa,[u("div",Ja,[u("div",Ga,[g(F,{value:c.value,style:{width:"180px"},onChange:v},{default:E(()=>[(K(!0),X(Te,null,Oe(t.value,N=>(K(),oe(x,{value:N.value,type:N.type,key:N.key},{default:E(()=>[Y(ee(N.label),1)]),_:2},1032,["value","type"]))),128))]),_:1},8,["value"])]),u("div",Qa,[g($t,{value:l.value,"onUpdate:value":w[0]||(w[0]=N=>l.value=N)},null,8,["value"])]),o.value!="color"?(K(),X(Te,{key:0},[u("div",Ya,[g(te(_o))]),u("div",Xa,[g($t,{value:p.value,"onUpdate:value":w[1]||(w[1]=N=>p.value=N)},null,8,["value"])])],64)):ne("",!0)])])}}},es=ae(Za,[["__scopeId","data-v-dfea777d"]]),ts="data:image/svg+xml,%3csvg%20width='56'%20height='56'%20viewBox='0%200%2056%2056'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='56'%20height='56'%20fill='white'/%3e%3crect%20x='14'%20y='14'%20width='28'%20height='28'%20rx='14'%20fill='%232475FC'/%3e%3crect%20x='14.5'%20y='14.5'%20width='27'%20height='27'%20rx='13.5'%20stroke='black'%20stroke-opacity='0.04'/%3e%3cg%20clip-path='url(%23clip0_2269_42995)'%3e%3cpath%20d='M31.5%2030.3385C32.7887%2030.3385%2033.8333%2029.2939%2033.8333%2028.0052C33.8333%2026.7165%2032.7887%2025.6719%2031.5%2025.6719'%20stroke='white'%20stroke-width='1.16667'%20stroke-linejoin='round'/%3e%3cpath%20d='M24.5013%2025.6719C23.2126%2025.6719%2022.168%2026.7165%2022.168%2028.0052C22.168%2029.2939%2023.2126%2030.3385%2024.5013%2030.3385'%20stroke='white'%20stroke-width='1.16667'%20stroke-linejoin='round'/%3e%3cpath%20d='M24.5%2030.3385V30.1927V29.4635V28.0052V25.6719C24.5%2023.7389%2026.067%2022.1719%2028%2022.1719C29.933%2022.1719%2031.5%2023.7389%2031.5%2025.6719V30.3385C31.5%2032.2715%2029.933%2033.8385%2028%2033.8385'%20stroke='white'%20stroke-width='1.16667'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_2269_42995'%3e%3crect%20width='14'%20height='14'%20fill='white'%20transform='translate(21%2021)'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",ns="data:image/svg+xml,%3csvg%20width='56'%20height='56'%20viewBox='0%200%2056%2056'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='56'%20height='56'%20fill='white'/%3e%3crect%20y='14'%20width='56'%20height='28'%20rx='14'%20fill='%232475FC'/%3e%3cg%20clip-path='url(%23clip0_2269_42985)'%3e%3cpath%20d='M19.5%2030.3385C20.7887%2030.3385%2021.8333%2029.2939%2021.8333%2028.0052C21.8333%2026.7165%2020.7887%2025.6719%2019.5%2025.6719'%20stroke='white'%20stroke-width='1.16667'%20stroke-linejoin='round'/%3e%3cpath%20d='M12.5013%2025.6719C11.2126%2025.6719%2010.168%2026.7165%2010.168%2028.0052C10.168%2029.2939%2011.2126%2030.3385%2012.5013%2030.3385'%20stroke='white'%20stroke-width='1.16667'%20stroke-linejoin='round'/%3e%3cpath%20d='M12.5%2030.3385V30.1927V29.4635V28.0052V25.6719C12.5%2023.7389%2014.067%2022.1719%2016%2022.1719C17.933%2022.1719%2019.5%2023.7389%2019.5%2025.6719V30.3385C19.5%2032.2715%2017.933%2033.8385%2016%2033.8385'%20stroke='white'%20stroke-width='1.16667'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3cpath%20d='M24.5414%2024.224V25.088H26.3894C26.9294%2026.936%2027.8894%2028.544%2029.2814%2029.912C27.9854%2031.088%2026.3294%2031.94%2024.3134%2032.48L24.7694%2033.236C26.8094%2032.648%2028.5134%2031.724%2029.8814%2030.464C31.1774%2031.58%2032.8094%2032.504%2034.8014%2033.248L35.2694%2032.528C33.3494%2031.82%2031.7534%2030.932%2030.4814%2029.852C31.6574%2028.58%2032.5454%2026.984%2033.1334%2025.088H35.0054V24.224H30.4214C30.0374%2023.396%2029.6294%2022.688%2029.1734%2022.112L28.3094%2022.424C28.7894%2022.988%2029.1854%2023.588%2029.5094%2024.224H24.5414ZM27.2414%2025.088H32.2334C31.7294%2026.744%2030.9494%2028.148%2029.8814%2029.312C28.6334%2028.112%2027.7574%2026.708%2027.2414%2025.088ZM40.9574%2024.116C40.7174%2024.452%2040.4534%2024.8%2040.1774%2025.148H37.0094V25.844H39.6134C39.3254%2026.18%2039.0254%2026.516%2038.7134%2026.876C39.5414%2027.032%2040.3694%2027.212%2041.2094%2027.428C40.1534%2027.764%2038.7134%2027.932%2036.8894%2027.932L37.3574%2028.64C39.3974%2028.616%2041.0414%2028.304%2042.3014%2027.716C43.5134%2028.04%2044.7254%2028.412%2045.9254%2028.844L46.4294%2028.184C45.3134%2027.812%2044.2214%2027.488%2043.1654%2027.224C43.6574%2026.864%2044.1134%2026.408%2044.5454%2025.844H46.5614V25.148H41.1254C41.3174%2024.896%2041.5214%2024.632%2041.7374%2024.344L40.9574%2024.116ZM42.2054%2026.984C41.4494%2026.792%2040.7054%2026.636%2039.9734%2026.516C40.1534%2026.324%2040.3574%2026.096%2040.5734%2025.844H43.6214C43.2614%2026.276%2042.7814%2026.648%2042.2054%2026.984ZM46.5974%2023.144H42.2414C42.0974%2022.784%2041.9534%2022.448%2041.7854%2022.148L40.8854%2022.292C41.0654%2022.556%2041.2334%2022.832%2041.3894%2023.144H36.9494V24.836H37.7654V23.876H45.7814V24.836H46.5974V23.144ZM36.6374%2029.336V30.104H40.5854C39.8414%2030.872%2038.4734%2031.556%2036.4814%2032.156L36.9614%2032.924C39.1214%2032.132%2040.5854%2031.196%2041.3534%2030.116V33.176H42.2414V30.152C43.1294%2031.256%2044.6174%2032.156%2046.7054%2032.84L47.0774%2032.084C45.2414%2031.592%2043.8854%2030.932%2043.0214%2030.104H46.9214V29.336H42.2414V28.4H41.3534V29.336H36.6374Z'%20fill='white'/%3e%3cdefs%3e%3cclipPath%20id='clip0_2269_42985'%3e%3crect%20width='14'%20height='14'%20fill='white'%20transform='translate(9%2021)'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",os={class:"float-icon-setting"},as={class:"form-box"},ss={class:"form-item"},rs={class:"form-content"},is={class:"display-types"},ls={class:"type-icon"},cs=["src"],us={key:1,class:"display-type"},ds={class:"type-icon"},ps={class:"type-name"},fs={key:0,class:"form-item"},hs={class:"form-content"},ms={class:"form-item"},_s={class:"form-content"},gs={class:"number-input"},vs={class:"form-item"},ys={class:"form-content"},bs={class:"number-input"},ws={class:"form-item"},Cs={class:"form-content"},ks={class:"form-item"},$s={class:"form-content"},As={class:"form-item"},Ss={class:"form-content"},Es={__name:"float-icon-setting",props:{saveLoading:{type:Boolean,default:!1},form:{type:Object,default:()=>{}}},emits:["save"],setup(i,{expose:r,emit:s}){const n=i,e=s,t=ue({displayType:1,buttonText:"快来聊聊吧~",buttonIcon:"",bottomMargin:32,rightMargin:32,showUnreadCount:1,showNewMessageTip:1}),o=k=>{t.displayType=k},c=pe(()=>t.buttonIcon?t.displayType==3:!0),l=k=>{let v=k[0];o(3),$n({file:v,category:"icon"}).then(C=>{t.buttonIcon=C.data.link})},p=()=>{t.rightMargin,(t.rightMargin==""||t.rightMargin==null)&&(t.rightMargin=0),(t.bottomMargin==""||t.rightMargin==null)&&(t.bottomMargin=0),e("save",he(t))};return $e(()=>n.form,k=>{Object.assign(t,k.floatBtn)},{immediate:!0}),r({handleSubmit:p}),(k,v)=>{const C=ve,w=go,x=Bn,F=ge;return K(),oe(Ae,{title:"悬浮图标设置"},{icon:E(()=>[g(te(Pt),{name:"quick-Instruction",style:{"font-size":"16px",color:"#262626"}})]),default:E(()=>[u("div",os,[Y(ee(n.title)+" ",1),u("div",as,[u("div",ss,[v[11]||(v[11]=u("div",{class:"form-item-label"},"展示形式：",-1)),u("div",rs,[u("div",is,[u("div",{class:Ze(["display-type",{"is-checked":t.displayType==1}]),onClick:v[0]||(v[0]=N=>o(1))},v[8]||(v[8]=[u("div",{class:"type-icon"},[u("img",{src:ts,alt:""})],-1),u("div",{class:"type-name"},"简洁",-1)]),2),u("div",{class:Ze(["display-type",{"is-checked":t.displayType==2}]),onClick:v[1]||(v[1]=N=>o(2))},v[9]||(v[9]=[u("div",{class:"type-icon"},[u("img",{src:ns,alt:""})],-1),u("div",{class:"type-name"},"加文案",-1)]),2),t.buttonIcon?(K(),X("div",{key:0,class:Ze(["display-type",{"is-checked":t.displayType==3}]),onClick:v[2]||(v[2]=N=>o(3))},[u("div",ls,[u("img",{src:t.buttonIcon,alt:"",title:""},null,8,cs)]),v[10]||(v[10]=u("div",{class:"type-name"},"自定义",-1))],2)):ne("",!0),c.value?(K(),X("div",us,[g(An,{onChange:l},{default:E(()=>[u("div",ds,[g(te(Pn),{style:{"font-size":"20px"}})])]),_:1}),u("div",ps,ee(t.buttonIcon?"上传图片":"自定义"),1)])):ne("",!0)])])]),t.displayType==2?(K(),X("div",fs,[v[12]||(v[12]=u("div",{class:"form-item-label"},"按钮文案：",-1)),u("div",hs,[g(C,{placeholder:"请输入按钮文案",maxlength:15,style:{width:"315px"},value:t.buttonText,"onUpdate:value":v[3]||(v[3]=N=>t.buttonText=N)},null,8,["value"])])])):ne("",!0),u("div",ms,[v[14]||(v[14]=u("div",{class:"form-item-label"},"底边距：",-1)),u("div",_s,[u("div",gs,[g(w,{class:"input",value:t.bottomMargin,"onUpdate:value":v[4]||(v[4]=N=>t.bottomMargin=N)},null,8,["value"]),v[13]||(v[13]=u("span",{class:"unit"},"PX",-1))])])]),u("div",vs,[v[16]||(v[16]=u("div",{class:"form-item-label"},"右边距：",-1)),u("div",ys,[u("div",bs,[g(w,{class:"input",value:t.rightMargin,"onUpdate:value":v[5]||(v[5]=N=>t.rightMargin=N)},null,8,["value"]),v[15]||(v[15]=u("span",{class:"unit"},"PX",-1))])])]),u("div",ws,[v[17]||(v[17]=u("div",{class:"form-item-label"},"显示未读消息数：",-1)),u("div",Cs,[g(x,{checked:t.showUnreadCount,"onUpdate:checked":v[6]||(v[6]=N=>t.showUnreadCount=N),unCheckedValue:0,checkedValue:1},null,8,["checked"])])]),u("div",ks,[v[18]||(v[18]=u("div",{class:"form-item-label"},"显示新消息提示：",-1)),u("div",$s,[g(x,{checked:t.showNewMessageTip,"onUpdate:checked":v[7]||(v[7]=N=>t.showNewMessageTip=N),unCheckedValue:0,checkedValue:1},null,8,["checked"])])]),u("div",As,[v[20]||(v[20]=u("div",{class:"form-item-label"},null,-1)),u("div",Ss,[g(F,{type:"primary",loading:n.saveLoading,onClick:p},{default:E(()=>v[19]||(v[19]=[Y("保存")])),_:1,__:[19]},8,["loading"])])])])])]),_:1})}}},Bs=ae(Es,[["__scopeId","data-v-a4615484"]]),Is={class:"web-app-box"},Ps={class:"box-left"},Rs={class:"box-wrapper"},Ts={class:"web-app-style form-box"},xs={class:"box-wrapper"},Ms={class:"sdk-code"},Ns={class:"box-wrapper"},Ls={class:"box-wrapper"},Us={class:"box-right"},qs={class:"demo-box"},Ds=["src"],Os={__name:"embed-website",setup(i){const r=Fe(),{robotInfo:s,external_config_pc:n}=De(r),{getRobot:e}=r,t=Ka(s.value),o=()=>{xe(t),se.success("复制成功")},c=G(),l=ue({headTitle:n.value.headTitle,headSubTitle:n.value.headSubTitle,headImage:n.value.headImage,lang:n.value.lang,pageStyle:n.value.pageStyle,floatBtn:n.value.floatBtn}),p=pe(()=>{let{pc_domain:N,robot_key:P}=s.value;return`${N}/web/#/chat?robot_key=${P}&language=zh-CN`});$e(l,N=>{v(N)});const k=N=>{v(N,"updataQuickComand")},v=(N,P)=>{document.getElementById("web-preview").contentWindow.postMessage({type:P||"onPreview",data:JSON.parse(JSON.stringify(N))},"*")},C={lang:[{required:!0,message:"请选择语言",trigger:"change"}],headTitle:[{required:!0,message:"请输入标题",trigger:"input"},{trigger:"input",validator:()=>l.headImage?Promise.resolve():Promise.reject("请上传logo")}],pageStyle:{headBackgroundColor:[{required:!0,message:"请选择颜色",trigger:"change"}]}},w=()=>{const{id:N}=s.value;let P={...he(l)};kn({id:N,external_config_pc:JSON.stringify(P)}).then(()=>{e(N),se.success("保存成功")})},x=()=>{c.value.validate().then(()=>{w()}).catch(N=>{})},F=N=>{l.floatBtn={...N},x()};return(N,P)=>{const V=Ve,M=ge,B=Ee,U=In,_=It,q=Bt,L=_e;return K(),X("div",Is,[u("div",Ps,[u("div",Rs,[g(Ae,{title:"样式设置"},{icon:E(()=>[g(V,{name:"pc",style:{"font-size":"16px",color:"#262626"}})]),action:E(()=>[g(M,{onClick:x,size:"small",type:"primary"},{default:E(()=>P[5]||(P[5]=[Y("保存")])),_:1,__:[5]})]),default:E(()=>[u("div",Ts,[g(L,{ref_key:"formRef",ref:c,layout:"vertical",model:l,rules:C},{default:E(()=>[g(B,{class:"form-item",label:"页面标题",name:"headTitle"},{default:E(()=>[g(Me,{avatar:l.headImage,"onUpdate:avatar":P[0]||(P[0]=R=>l.headImage=R),value:l.headTitle,"onUpdate:value":P[1]||(P[1]=R=>l.headTitle=R)},null,8,["avatar","value"])]),_:1}),g(B,{class:"form-item",label:"简介",name:"headSubTitle"},{default:E(()=>[g(U,{value:l.headSubTitle,"onUpdate:value":P[2]||(P[2]=R=>l.headSubTitle=R),placeholder:"简介将展示在客户端，不超过100个字符"},null,8,["value"])]),_:1}),g(B,{class:"form-item",label:"颜色",name:["pageStyle","headBackgroundColor"]},{default:E(()=>[g(es,{value:l.pageStyle.headBackgroundColor,"onUpdate:value":P[3]||(P[3]=R=>l.pageStyle.headBackgroundColor=R)},null,8,["value"])]),_:1}),g(B,{class:"form-item",label:"语言",name:"lang"},{default:E(()=>[g(q,{style:{width:"180px"},value:l.lang,"onUpdate:value":P[4]||(P[4]=R=>l.lang=R),placeholder:"请选择语言"},{default:E(()=>[g(_,{value:"zh-CN"},{default:E(()=>P[6]||(P[6]=[Y("简体中文")])),_:1,__:[6]}),g(_,{value:"en-US"},{default:E(()=>P[7]||(P[7]=[Y("English")])),_:1,__:[7]})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])])]),_:1})]),u("div",xs,[g(Ae,{title:"将以下代码复制到网站代码的< /body>标签之前"},{icon:E(()=>[g(V,{name:"sdk",style:{"font-size":"16px",color:"#262626"}})]),action:E(()=>[g(M,{onClick:o,size:"small"},{default:E(()=>P[8]||(P[8]=[Y("复制")])),_:1,__:[8]})]),default:E(()=>[u("div",Ms,[u("pre",null,[u("code",null,ee(te(t)),1)])])]),_:1})]),u("div",Ns,[g(Nn,{type:te(s).app_id_embed,onUpdata:k},null,8,["type"])]),u("div",Ls,[g(Bs,{form:l,onSave:F},null,8,["form"])])]),u("div",Us,[u("div",qs,[u("iframe",{id:"web-preview",src:p.value,frameborder:"0"},null,8,Ds)])])])}}},Fs=ae(Os,[["__scopeId","data-v-7e0969d7"]]),Vs={class:"wechat-app-item"},js={class:"item-body"},Hs=["src"],zs={class:"app-info"},Ks={class:"app-name"},Ws={class:"app-desc"},Js={class:"item-right"},Gs={__name:"wechat-app-item",props:{item:{type:Object,default:()=>({})}},emits:["edit","delete"],setup(i,{emit:r}){const s=r,n=i;function e(){s("edit",{...n.item})}function t(){s("delete",{...n.item})}return(o,c)=>{const l=Ve;return K(),X("div",Vs,[u("div",js,[u("img",{class:"app-avatar",src:i.item.app_avatar,alt:""},null,8,Hs),u("div",zs,[u("div",Ks,ee(i.item.app_name),1),u("div",Ws,"Appid："+ee(i.item.app_id),1)])]),u("div",Js,[u("span",{class:"action-btn edit-btn",onClick:e},[g(l,{name:"edit"})]),u("span",{class:"action-btn delete-btn",onClick:t},[g(l,{name:"delete"})])])])}}},Tt=ae(Gs,[["__scopeId","data-v-5bc839ae"]]),Qs={class:"add-label"},Ys={__name:"add-wechat-app",props:{label:{type:String,default:""}},emits:["click"],setup(i,{emit:r}){const s=r,n=i,e=()=>{s("click")};return(t,o)=>(K(),X("div",{class:"add-wechat-app",onClick:e},[g(te(Pn),{class:"add-icon"}),u("span",Qs,ee(n.label),1)]))}},xt=ae(Ys,[["__scopeId","data-v-9ff0b6b4"]]),Xs="/assets/img/preview_01-MRp2-MBv.png",Zs="/assets/img/config_preview_01-BKZKQ3Os.png",er={key:0,class:"add-wechat-app-alert"},tr={class:"alert-body"},nr={class:"form-box"},or={class:"my-ip"},ar={class:"ip-text"},sr={key:1,class:"add-wechat-app-alert"},rr={class:"config-preview-box"},ir={class:"config-items"},lr={class:"config-item"},cr={class:"config-value"},ur={class:"config-item"},dr={class:"config-value"},pr={class:"config-item"},fr={class:"config-value"},vn="/upload/default/official_account_avatar.png",hr={__name:"add-wechat-official-account-alert",emits:["ok"],setup(i,{expose:r,emit:s}){const n=s,{robotInfo:e}=Se("robotInfo"),t=G(!1),o=G(1),c=G(!1),l=G(),p=ue({id:void 0,robot_id:e.id,app_name:"",app_id:"",app_secret:"",app_avatar:"",app_avatar_url:vn,app_type:"official_account"}),k={app_name:[{required:!0,message:"请输入您的公众号名称",trigger:"change"},{trigger:"change",validator:()=>p.app_avatar_url?Promise.resolve():Promise.reject("请上传公众号头像")}],app_id:[{required:!0,message:"请输入您的AppId",trigger:"change"}],app_secret:[{required:!0,message:"请输入您的AppSecret",trigger:"change"}]},v=pe(()=>{let U=p.id?"编辑微信公众号":"添加微信公众号",_=o.value==1?"-填写公众号开发信息":"-服务器配置";return U+_}),C=({file:U,url:_})=>{p.app_avatar=U,p.app_avatar_url=_},w=ue({push_aeskey:"",push_token:"",push_url:""}),x=()=>{let U={...he(p)};delete U.app_avatar_url,At(U).then(_=>{Object.assign(w,_.data),o.value=2,se.success("保存成功"),n("ok")})},F=()=>{l.value.validate().then(()=>{x()}).catch(U=>{})},N=()=>{t.value=!1},P=()=>{l.value.clearValidate(),l.value.resetFields(),t.value=!1},V=U=>{xe(U),se.success("复制成功")},M=()=>{V(e.wechat_ip)};return r({open:U=>{U?(U.app_avatar_url=U.app_avatar,U.app_avatar=""):U={id:void 0,robot_id:e.id,app_name:"",app_id:"",app_secret:"",app_avatar:"",app_avatar_url:vn,app_type:"official_account",wechat_ip:e.wechat_ip},o.value=1,Object.assign(p,U),t.value=!0}}),(U,_)=>{const q=ge,L=He,R=Ee,S=ve,f=_e,D=me;return K(),oe(D,{width:"1168px",open:t.value,"onUpdate:open":_[7]||(_[7]=I=>t.value=I),title:v.value,onCancel:P},{footer:E(()=>[o.value===1?(K(),oe(q,{key:"back",onClick:P},{default:E(()=>_[8]||(_[8]=[Y("取 消")])),_:1,__:[8]})):ne("",!0),o.value===1?(K(),oe(q,{key:"submit",type:"primary",loading:c.value,onClick:F},{default:E(()=>_[9]||(_[9]=[Y("保存并进入下一步")])),_:1,__:[9]},8,["loading"])):ne("",!0),o.value===2?(K(),oe(q,{key:"submit",type:"primary",loading:c.value,onClick:N},{default:E(()=>_[10]||(_[10]=[Y("已完成配置")])),_:1,__:[10]},8,["loading"])):ne("",!0)]),default:E(()=>[o.value===1?(K(),X("div",er,[g(L,{class:"tip-alert",message:"进入微信公众号后台（mp.weixin.qq.com），在【设置与开发-基本配置】获取开发者信息。",type:"info","show-icon":""}),u("div",tr,[u("div",nr,[g(f,{ref_key:"formRef",ref:l,layout:"vertical",model:p,rules:k},{default:E(()=>[g(R,{label:"公众号头像/名称",name:"app_name"},{default:E(()=>[g(Me,{autoUpload:!1,avatar:p.app_avatar_url,"onUpdate:avatar":_[0]||(_[0]=I=>p.app_avatar_url=I),value:p.app_name,"onUpdate:value":_[1]||(_[1]=I=>p.app_name=I),valueModifiers:{trim:!0},placeholder:"请输入您的公众号名称",onChangeAvatar:C},null,8,["avatar","value"])]),_:1}),g(R,{label:"AppId",name:"app_id"},{default:E(()=>[g(S,{value:p.app_id,"onUpdate:value":_[2]||(_[2]=I=>p.app_id=I),valueModifiers:{trim:!0},placeholder:"请输入您的AppId"},null,8,["value"])]),_:1}),g(R,{label:"AppSecret",name:"app_secret"},{default:E(()=>[g(S,{value:p.app_secret,"onUpdate:value":_[3]||(_[3]=I=>p.app_secret=I),valueModifiers:{trim:!0},placeholder:"请输入您的AppSecret"},null,8,["value"])]),_:1}),g(R,{label:"将以下IP添加到公众号IP白名单中",name:"wechat_ip",required:""},{default:E(()=>[u("div",or,[u("span",ar,ee(te(e).wechat_ip),1),u("a",{class:"copy-btn",onClick:M},"复 制")])]),_:1})]),_:1},8,["model"])]),_[11]||(_[11]=u("div",{class:"preview-box"},[u("img",{class:"preview-img",src:Xs})],-1))])])):ne("",!0),o.value===2?(K(),X("div",sr,[g(L,{class:"tip-alert",message:"进入微信公众号后台（mp.weixin.qq.com），在【设置与开发-基本配置】中配置并启用服务器配置。请按照下图配置",type:"info","show-icon":""}),u("div",rr,[u("div",ir,[u("div",lr,[u("span",cr,ee(w.push_url),1),u("span",{class:"copy-btn",onClick:_[4]||(_[4]=I=>V(w.push_url))},"复制")]),u("div",ur,[u("span",dr,ee(w.push_token),1),u("span",{class:"copy-btn",onClick:_[5]||(_[5]=I=>V(w.push_token))},"复制")]),u("div",pr,[u("span",fr,ee(w.push_aeskey),1),u("span",{class:"copy-btn",onClick:_[6]||(_[6]=I=>V(w.push_aeskey))},"复制")])]),_[12]||(_[12]=u("img",{class:"config-preview-img",src:Zs},null,-1))])])):ne("",!0)]),_:1},8,["open","title"])}}},mr=ae(hr,[["__scopeId","data-v-dcc62296"]]),_r={class:""},gr={class:"wechat-app-list"},vr={__name:"wechat-official-account",setup(i){const{robotInfo:r}=Se("robotInfo"),s=G(),n=G([]),e=()=>{St({robot_id:r.id,app_type:"official_account",app_name:""}).then(p=>{n.value=p.data})},t=()=>{s.value.open()},o=p=>{let k=3;const v=me.confirm({title:`确定移除${p.app_name}吗?`,icon:g(je),content:"移除后，机器人无法继续回复用户消息。",okText:k+" 确 定",okType:"danger",cancelText:"取消",okButtonProps:{disabled:!0},onOk(){Et({id:p.id}).then(()=>{e(),se.success("删除成功")})},onCancel(){}});let C=setInterval(()=>{k==1?(v.update({okText:"确定",okButtonProps:{disabled:!1}}),clearInterval(C),C=void 0):(k-=1,v.update({okText:k+" 确 定",okButtonProps:{disabled:!0}}))},1e3)},c=p=>{p.wechat_ip=r.wechat_ip,s.value.open({...p})},l=()=>{e()};return qe(()=>{e()}),(p,k)=>(K(),X("div",_r,[u("div",gr,[g(xt,{label:"绑定公众号",onClick:t}),(K(!0),X(Te,null,Oe(n.value,v=>(K(),oe(Tt,{key:v.id,item:v,onEdit:c,onDelete:o},null,8,["item"]))),128))]),g(mr,{ref_key:"addAppAlertRef",ref:s,onOk:l},null,512)]))}},yr=ae(vr,[["__scopeId","data-v-d9539ad9"]]),br="/assets/img/preview_02-B1rWR-NK.png",wr="/assets/img/config_preview_02-BdpKevei.png",Cr={key:0,class:"add-wechat-app-alert"},kr={class:"alert-body"},$r={class:"form-box"},Ar={class:"my-ip"},Sr={class:"ip-text"},Er={key:1,class:"add-wechat-app-alert"},Br={class:"config-preview-box"},Ir={class:"config-items"},Pr={class:"config-item"},Rr={class:"config-value"},Tr={class:"config-item"},xr={class:"config-value"},Mr={class:"config-item"},Nr={class:"config-value"},yn="/upload/default/mini_program_avatar.png",Lr={__name:"add-wechat-mini-program-alert",emits:["ok"],setup(i,{expose:r,emit:s}){const n=s,{robotInfo:e}=Se("robotInfo"),t=G(!1),o=G(1),c=G(!1),l=G(),p=ue({id:void 0,robot_id:e.id,app_name:"",app_id:"",app_secret:"",app_avatar:"",app_avatar_url:yn,app_type:"mini_program"}),k={app_name:[{required:!0,message:"请输入您的公众号名称",trigger:"change"},{trigger:"change",validator:()=>p.app_avatar_url?Promise.resolve():Promise.reject("请上传公众号头像")}],app_id:[{required:!0,message:"请输入您的AppId",trigger:"change"}],app_secret:[{required:!0,message:"请输入您的AppSecret",trigger:"change"}]},v=pe(()=>{let U=p.id?"编辑微信小程序":"添加微信小程序",_=o.value==1?"-填写小程序开发信息":"-服务器配置";return U+_}),C=({file:U,url:_})=>{p.app_avatar=U,p.app_avatar_url=_},w=ue({push_aeskey:"",push_token:"",push_url:""}),x=()=>{let U={...he(p)};delete U.app_avatar_url,At(U).then(_=>{Object.assign(w,_.data),o.value=2,se.success("保存成功"),n("ok")})},F=()=>{l.value.validate().then(()=>{x()}).catch(U=>{})},N=()=>{t.value=!1},P=()=>{l.value.clearValidate(),l.value.resetFields(),t.value=!1},V=U=>{xe(U),se.success("复制成功")},M=()=>{V(e.wechat_ip)};return r({open:U=>{U?(U.app_avatar_url=U.app_avatar,U.app_avatar=""):U={id:void 0,robot_id:e.id,app_name:"",app_id:"",app_secret:"",app_avatar:"",app_avatar_url:yn,app_type:"mini_program",wechat_ip:e.wechat_ip},o.value=1,Object.assign(p,U),t.value=!0}}),(U,_)=>{const q=ge,L=He,R=Ee,S=ve,f=_e,D=me;return K(),oe(D,{width:"1168px",open:t.value,"onUpdate:open":_[7]||(_[7]=I=>t.value=I),title:v.value,onCancel:P},{footer:E(()=>[o.value===1?(K(),oe(q,{key:"back",onClick:P},{default:E(()=>_[8]||(_[8]=[Y("取 消")])),_:1,__:[8]})):ne("",!0),o.value===1?(K(),oe(q,{key:"submit",type:"primary",loading:c.value,onClick:F},{default:E(()=>_[9]||(_[9]=[Y("保存并进入下一步")])),_:1,__:[9]},8,["loading"])):ne("",!0),o.value===2?(K(),oe(q,{key:"submit",type:"primary",loading:c.value,onClick:N},{default:E(()=>_[10]||(_[10]=[Y("已完成配置")])),_:1,__:[10]},8,["loading"])):ne("",!0)]),default:E(()=>[o.value===1?(K(),X("div",Cr,[g(L,{class:"tip-alert",message:"进入微信小程序后台（mp.weixin.qq.com），在【开发-开发管理-开发设置】中获取开发者信息",type:"info","show-icon":""}),u("div",kr,[u("div",$r,[g(f,{ref_key:"formRef",ref:l,layout:"vertical",model:p,rules:k},{default:E(()=>[g(R,{label:"小程序头像/名称",name:"app_name"},{default:E(()=>[g(Me,{autoUpload:!1,avatar:p.app_avatar_url,"onUpdate:avatar":_[0]||(_[0]=I=>p.app_avatar_url=I),value:p.app_name,"onUpdate:value":_[1]||(_[1]=I=>p.app_name=I),valueModifiers:{trim:!0},placeholder:"请输入您的小程序名称",onChangeAvatar:C},null,8,["avatar","value"])]),_:1}),g(R,{label:"AppId",name:"app_id"},{default:E(()=>[g(S,{value:p.app_id,"onUpdate:value":_[2]||(_[2]=I=>p.app_id=I),valueModifiers:{trim:!0},placeholder:"请输入您的AppId"},null,8,["value"])]),_:1}),g(R,{label:"AppSecret",name:"app_secret"},{default:E(()=>[g(S,{value:p.app_secret,"onUpdate:value":_[3]||(_[3]=I=>p.app_secret=I),valueModifiers:{trim:!0},placeholder:"请输入您的AppSecret"},null,8,["value"])]),_:1}),g(R,{label:"将以下IP添加到小程序IP白名单中，如未开启ip白名单保护可不添加",name:"wechat_ip",required:""},{default:E(()=>[u("div",Ar,[u("span",Sr,ee(te(e).wechat_ip),1),u("a",{class:"copy-btn",onClick:M},"复 制")])]),_:1})]),_:1},8,["model"])]),_[11]||(_[11]=u("div",{class:"preview-box"},[u("img",{class:"preview-img",src:br})],-1))])])):ne("",!0),o.value===2?(K(),X("div",Er,[g(L,{class:"tip-alert",message:"进入微信小程序后台（mp.weixin.qq.com），在【开发-开发管理-开发设置】中配置并启用消息推送。请按照下图配置。",type:"info","show-icon":""}),u("div",Br,[u("div",Ir,[u("div",Pr,[u("span",Rr,ee(w.push_url),1),u("span",{class:"copy-btn",onClick:_[4]||(_[4]=I=>V(w.push_url))},"复制")]),u("div",Tr,[u("span",xr,ee(w.push_token),1),u("span",{class:"copy-btn",onClick:_[5]||(_[5]=I=>V(w.push_token))},"复制")]),u("div",Mr,[u("span",Nr,ee(w.push_aeskey),1),u("span",{class:"copy-btn",onClick:_[6]||(_[6]=I=>V(w.push_aeskey))},"复制")])]),_[12]||(_[12]=u("img",{class:"config-preview-img",src:wr},null,-1))])])):ne("",!0)]),_:1},8,["open","title"])}}},Ur=ae(Lr,[["__scopeId","data-v-7bbe77a3"]]),qr={class:""},Dr={class:"wechat-app-list"},Or={__name:"wechat-mini-program",setup(i){const{robotInfo:r}=Se("robotInfo"),s=G(),n=G([]),e=()=>{St({robot_id:r.id,app_type:"mini_program",app_name:""}).then(p=>{n.value=p.data})},t=()=>{s.value.open()},o=p=>{let k=3;const v=me.confirm({title:`确定移除${p.app_name}吗?`,icon:g(je),content:"移除后，机器人无法继续回复用户消息。",okText:k+" 确 定",okType:"danger",cancelText:"取消",okButtonProps:{disabled:!0},onOk(){Et({id:p.id}).then(()=>{e(),se.success("删除成功")})},onCancel(){}});let C=setInterval(()=>{k==1?(v.update({okText:"确 定",okButtonProps:{disabled:!1}}),clearInterval(C),C=void 0):(k-=1,v.update({okText:k+" 确 定",okButtonProps:{disabled:!0}}))},1e3)},c=p=>{p.wechat_ip=r.wechat_ip,s.value.open({...p})},l=()=>{e()};return qe(()=>{e()}),(p,k)=>(K(),X("div",qr,[u("div",Dr,[g(xt,{label:"绑定微信小程序",onClick:t}),(K(!0),X(Te,null,Oe(n.value,v=>(K(),oe(Tt,{key:v.id,item:v,onEdit:c,onDelete:o},null,8,["item"]))),128))]),g(Ur,{ref_key:"addAppAlertRef",ref:s,onOk:l},null,512)]))}},Fr=ae(Or,[["__scopeId","data-v-ae8d32c8"]]),Vr="/assets/img/preview_03-DXz9-3qW.png",jr="/assets/img/config_preview_03-DN1fPWUm.png",Hr={key:0,class:"add-wechat-app-alert"},zr={class:"alert-body"},Kr={class:"form-box"},Wr={key:1,class:"add-wechat-app-alert"},Jr={class:"config-preview-box"},Gr={class:"config-items"},Qr={class:"config-item"},Yr={class:"config-value"},Xr={class:"config-item"},Zr={class:"config-value"},ei={class:"config-item"},ti={class:"config-value"},bn="/upload/default/wechat_kefu_avatar.png",ni={__name:"add-wechat-customer-service-alert",emits:["ok"],setup(i,{expose:r,emit:s}){const n=s,{robotInfo:e}=Se("robotInfo"),t=G(!1),o=G(1),c=G(!1),l=G(),p=ue({id:void 0,robot_id:e.id,app_name:"",app_id:"",app_secret:"",app_avatar:"",app_avatar_url:bn,app_type:"wechat_kefu"}),k={app_name:[{required:!0,message:"请输入您的公众号名称",trigger:"change"},{trigger:"change",validator:()=>p.app_avatar_url?Promise.resolve():Promise.reject("请上传公众号头像")}],app_id:[{required:!0,message:"请输入您的AppId",trigger:"change"}],app_secret:[{required:!0,message:"请输入您的AppSecret",trigger:"change"}]},v=pe(()=>{let M=p.id?"编辑微信客服":"添加微信客服",B=o.value==1?"-服务器配置":"-填写微信客服开发信息";return M+B}),C=({file:M,url:B})=>{p.app_avatar=M,p.app_avatar_url=B},w=ue({push_aeskey:"",push_token:"",push_url:""}),x=()=>{let M={...he(p)};delete M.app_avatar_url,At(M).then(B=>{Object.assign(w,B.data),o.value=2,se.success("保存成功"),n("ok"),t.value=!1})},F=()=>{l.value.validate().then(()=>{x()}).catch(M=>{})},N=()=>{l.value&&(l.value.clearValidate(),l.value.resetFields()),t.value=!1},P=M=>{xe(M),se.success("复制成功")};return r({open:M=>{M?(M.app_avatar_url=M.app_avatar,M.app_avatar=""):M={id:void 0,robot_id:e.id,app_name:"",app_id:"",app_secret:"",app_avatar:"",app_avatar_url:bn,app_type:"wechat_kefu",wechat_ip:e.wechat_ip},o.value=1,Object.assign(p,M),t.value=!0}}),(M,B)=>{const U=ge,_=He,q=Ee,L=ve,R=_e,S=me;return K(),oe(S,{width:"1168px",open:t.value,"onUpdate:open":B[8]||(B[8]=f=>t.value=f),title:v.value,onCancel:N},{footer:E(()=>[g(U,{key:"back",onClick:N},{default:E(()=>B[9]||(B[9]=[Y("取 消")])),_:1,__:[9]}),o.value===1?(K(),oe(U,{key:"submit",type:"primary",loading:c.value,onClick:B[0]||(B[0]=f=>o.value=2)},{default:E(()=>B[10]||(B[10]=[Y("保存并进入下一步")])),_:1,__:[10]},8,["loading"])):ne("",!0),o.value===2?(K(),oe(U,{key:"submit",type:"primary",loading:c.value,onClick:F},{default:E(()=>B[11]||(B[11]=[Y("已完成配置")])),_:1,__:[11]},8,["loading"])):ne("",!0)]),default:E(()=>[o.value===2?(K(),X("div",Hr,[g(_,{class:"tip-alert",message:"进入微信客服后台（kf.weixin.qq.com），在【开发配置】中启用企业内部接入后获取开发者信息",type:"info","show-icon":""}),u("div",zr,[u("div",Kr,[g(R,{ref_key:"formRef",ref:l,layout:"vertical",model:p,rules:k},{default:E(()=>[g(q,{label:"企业头像/名称",name:"app_name"},{default:E(()=>[g(Me,{autoUpload:!1,avatar:p.app_avatar_url,"onUpdate:avatar":B[1]||(B[1]=f=>p.app_avatar_url=f),value:p.app_name,"onUpdate:value":B[2]||(B[2]=f=>p.app_name=f),valueModifiers:{trim:!0},placeholder:"请输入您的企业名称",onChangeAvatar:C},null,8,["avatar","value"])]),_:1}),g(q,{label:"企业id",name:"app_id"},{default:E(()=>[g(L,{value:p.app_id,"onUpdate:value":B[3]||(B[3]=f=>p.app_id=f),valueModifiers:{trim:!0},placeholder:"请输入您的AppId"},null,8,["value"])]),_:1}),g(q,{label:"企业Secret",name:"app_secret"},{default:E(()=>[g(L,{value:p.app_secret,"onUpdate:value":B[4]||(B[4]=f=>p.app_secret=f),valueModifiers:{trim:!0},placeholder:"请输入您的AppSecret"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),B[12]||(B[12]=u("div",{class:"preview-box"},[u("img",{class:"preview-img",src:Vr})],-1))])])):ne("",!0),o.value===1?(K(),X("div",Wr,[g(_,{class:"tip-alert",message:"进入微信客服后台（kf.weixin.qq.com），在【开发配置】中启用企业内部接入。请按照下图配置",type:"info","show-icon":""}),u("div",Jr,[u("div",Gr,[u("div",Qr,[u("span",Yr,ee(te(e).push_wechat_kefu),1),u("span",{class:"copy-btn",onClick:B[5]||(B[5]=f=>P(te(e).push_wechat_kefu))},"复制")]),u("div",Xr,[u("span",Zr,ee(te(e).push_token),1),u("span",{class:"copy-btn",onClick:B[6]||(B[6]=f=>P(te(e).push_token))},"复制")]),u("div",ei,[u("span",ti,ee(te(e).push_aeskey),1),u("span",{class:"copy-btn",onClick:B[7]||(B[7]=f=>P(te(e).push_aeskey))},"复制")])]),B[13]||(B[13]=u("img",{class:"config-preview-img",src:jr},null,-1))])])):ne("",!0)]),_:1},8,["open","title"])}}},oi=ae(ni,[["__scopeId","data-v-732d0ea4"]]),ai={class:""},si={class:"wechat-app-list"},ri={__name:"wechat-customer-service",setup(i){const{robotInfo:r}=Se("robotInfo"),s=G(),n=G([]),e=()=>{St({robot_id:r.id,app_type:"wechat_kefu",app_name:""}).then(p=>{n.value=p.data})},t=()=>{s.value.open()},o=p=>{let k=3;const v=me.confirm({title:`确定移除${p.app_name}吗?`,icon:g(je),content:"移除后，机器人无法继续回复用户消息。",okText:k+" 确 定",okType:"danger",cancelText:"取消",okButtonProps:{disabled:!0},onOk(){Et({id:p.id}).then(()=>{e(),se.success("删除成功")})},onCancel(){}});let C=setInterval(()=>{k==1?(v.update({okText:"确 定",okButtonProps:{disabled:!1}}),clearInterval(C),C=void 0):(k-=1,v.update({okText:k+" 确 定",okButtonProps:{disabled:!0}}))},1e3)},c=p=>{p.wechat_ip=r.wechat_ip,s.value.open({...p})},l=()=>{e()};return qe(()=>{e()}),(p,k)=>{const v=He;return K(),X("div",ai,[g(v,{class:"tip-alert",message:"绑定微信客服，用户通过微信客服咨询时由机器人自动回复",type:"info","show-icon":""}),u("div",si,[g(xt,{label:"绑定微信客服",onClick:t}),(K(!0),X(Te,null,Oe(n.value,C=>(K(),oe(Tt,{key:C.id,item:C,onEdit:c,onDelete:o},null,8,["item"]))),128))]),g(oi,{ref_key:"addAppAlertRef",ref:s,onOk:l},null,512)])}}},ii=ae(ri,[["__scopeId","data-v-826ac730"]]),li={class:"external-services-page"},ci={class:"page-header"},ui={class:"page-body"},di={class:"scroll-box"},wn="/robot/config/external-services/activeKey",pi={__name:"index",setup(i){const r=Fe(),{robotInfo:s}=De(r),{getRobot:n}=r,e={WebAPP:za,EmbedWebsite:Fs,WeChatOfficialAccount:yr,WeChatMiniProgram:Fr,WeChatCustomerService:ii},t=G(localStorage.getItem(wn)||"WebAPP"),o=c=>{t.value=c.id,localStorage.setItem(wn,t.value)};return Xn("robotInfo",{robotInfo:s.value,getRobot:n}),(c,l)=>(K(),X("div",li,[u("div",ci,[g(Co,{onChange:o,value:t.value,"onUpdate:value":l[0]||(l[0]=p=>t.value=p)},null,8,["value"])]),u("div",ui,[u("div",di,[(K(),oe(Zn(e[t.value])))])])]))}},fl=ae(pi,[["__scopeId","data-v-b2af2b70"]]);export{fl as default};
