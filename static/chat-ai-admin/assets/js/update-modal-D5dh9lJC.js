import{f as k}from"./index-Dmsgh_44.js";import{b as w}from"../../index-CuuB1UbP.js";import{M as y,a as B}from"./ui-antd-DhoCz7ZP.js";import{f as a,e as b,a1 as M,_ as d,a2 as U,a5 as e,G as z,Y as _,a7 as s}from"./vue-chunks-Ci-XTWEs.js";const I={class:"plugin-box"},N={class:"base-info"},V=["src"],C={class:"info"},D={class:"head"},E={class:"name zm-line1"},G={key:0,class:"version-tag"},O={key:1,class:"version-tag"},P={class:"source"},S={class:"desc zm-line2"},T={__name:"update-modal",emits:["ok"],setup(Y,{expose:p,emit:m}){const f=m,o=a(!1),i=a(!1),t=a({}),c=a({}),l=a(null),u=b(()=>l.value?{title:"更新插件",text:"更新"}:{title:"安装插件",text:"安装"});function h(v,n,r=null){t.value=v,c.value=n,l.value=r,o.value=!0}function x(){i.value=!0,k({url:c.value.download_url,version_id:c.value.id}).then(()=>{f("ok"),o.value=!1,B.success(u.value.text+"完成")}).finally(()=>{i.value=!1})}return p({show:h}),(v,n)=>{const r=y;return d(),M(r,{open:o.value,"onUpdate:open":n[0]||(n[0]=g=>o.value=g),title:u.value.title,"ok-text":u.value.text,"confirm-loading":i.value,onOk:x},{default:U(()=>[e("div",I,[e("div",N,[e("img",{class:"avatar",src:t.value.icon},null,8,V),e("div",C,[e("div",D,[e("span",E,[z(s(t.value.title)+" ",1),l.value?(d(),_("span",G,"v"+s(l.value.version)+" → v"+s(t.value.latest_version),1)):(d(),_("span",O,"v"+s(t.value.latest_version),1))])]),e("div",P,s(t.value.author),1)])]),e("div",S,s(t.value.description),1)])]),_:1},8,["open","title","ok-text","confirm-loading"])}}},H=w(T,[["__scopeId","data-v-3d6084ad"]]);export{H as U};
