import{_ as O}from"./cu-scroll-bISEQWPA.js";import{a3 as T,d as x,z as v,q as U,D as q,N as n,j as _,U as m,G as N,a2 as Y,O as i,X as l,u as E,a6 as d,S as V,_ as y,F as w}from"./vue-chunks-BRsu9_To.js";import{b as j,h as H,dB as G,bw as J,n as K,M as z,dC as P,k as C,dD as Q}from"../../index-Bo1NSLpy.js";import"./index-Caod9rOO.js";import{I as X}from"./Input-CCKFAS4o.js";import{S as A}from"./SearchOutlined-CFTHZIcT.js";import{_ as W}from"./index-Dc6vrBX7.js";import{a as Z}from"./index-Ct9MFKxB.js";import{_ as ee}from"./index-Bbrx8UDU.js";import"./pull-up.esm-D94Swpvl.js";import"./observe-dom.esm-CyCedSm-.js";import"./axios-Dq7h7Pqt.js";import"./qs-BrxkIg-9.js";import"./crypto-js-ClNpte_9.js";import"./dayjs-B6IotFah.js";import"./FormItemContext-Cv3f2sEj.js";import"./index-CuPJUS8f.js";import"./Search-BF8URtRh.js";import"./isPlainObject-CHj0iPA3.js";import"./inputProps--_pnbyjO.js";import"./TextArea--DLJ7VtX.js";import"./index-BwedndIp.js";import"./ResizeObserver.es-B1PUzC5B.js";import"./Password-CJww1n-s.js";import"./index-C_M0mW4F.js";import"./List-qVz67bUg.js";import"./collapseMotion-Brd6xpAT.js";import"./CaretDownFilled-DQ5FyPd3.js";import"./index-BeCYXilq.js";import"./responsiveObserve-D3ho5cFZ.js";import"./index-eahgXICC.js";import"./LeftOutlined-6ERu0fUO.js";import"./RightOutlined-zEOifMPB.js";import"./index-Bs02Ec-o.js";import"./Trigger-DtRTHvld.js";import"./slide-CVAZ5BEM.js";import"./useMergedState-C0iIHNGF.js";import"./DownOutlined-CrhRpWT5.js";import"./CheckOutlined-C6m5maw6.js";import"./move-DztQgbGg.js";import"./index-B4MPC5xv.js";import"./colors-4myZb9T8.js";import"./index-kP7DVVOS.js";import"./Checkbox-B_uQPvVs.js";import"./index-BZOjzqJ2.js";import"./dropdown-DAy60lp8.js";import"./Dropdown-hEIgqeS3.js";import"./index-Dxy-C30T.js";import"./shallowequal-C0xnIuy8.js";import"./index-Bb6fuwF7.js";import"./RadioButton-CWIeNl_M.js";import"./CaretDownOutlined-C8EH_hS-.js";const te={class:"details-library-page"},oe={class:"list-tools"},ae={class:"tools-items"},ie={class:"list-content"},se={key:0,class:"doc-name-td"},ne=["onClick"],re={key:0},le={key:1},pe={key:0},ce={key:1},_e=["onClick"],me=["onClick"],de={__name:"recycle-bin-record",setup(ue){const b=H(),S=T();Y();const u=S.query,f=x(!1);v({selectedRowKeys:[]});const h=x([]),t=v({library_id:u.id,file_name:void 0,page:1,size:10,total:0}),I=[{title:"文档名称",dataIndex:"file_name",key:"file_name",width:300},{title:"文档格式",dataIndex:"file_ext",key:"file_ext",width:100},{title:"文档大小",dataIndex:"file_size_str",key:"file_size",width:100},{title:"分段",dataIndex:"paragraph_count",key:"paragraph_count",width:120},{title:"删除时间",dataIndex:"delete_time",key:"delete_time",width:150},{title:"操作",dataIndex:"action",key:"action",fixed:"right",width:100}],R=e=>{t.page=e.current,t.size=e.pageSize,c()},g=()=>{t.page=1,c()},c=()=>{let e=N(t);f.value=!0,G(e).then(o=>{let s=o.data.list||[];s.forEach(r=>{r.file_size_str=J(r.file_size),r.delete_time=r.delete_time>0?K(r.delete_time*1e3).format("YYYY-MM-DD HH:mm"):"--"}),h.value=s,t.total=+o.data.total||0}).finally(()=>{f.value=!1})},D=e=>{let o=`/manage/downloadLibraryFile?id=${e.id}&token=${b.getToken}`;var s=document.createElement("a");s.href=o,s.style.display="none",s.click()},F=e=>{z.confirm({title:"恢复确认？",content:`确认恢复该文档【${e.file_name}】`,okText:"确定",onOk(){P({id:e.id}).then(o=>{C.success("恢复成功"),c()})}})},L=e=>{z.confirm({title:"彻底删除确认？",content:"文件删除后无法恢复，请确认是否删除?",okText:"确定",onOk(){Q({id:e.id}).then(o=>{C.success("删除成功"),c()})}})};return U(()=>{u.page&&(t.page=+u.page),c()}),q(()=>{}),(e,o)=>{const s=W,r=X,B=ee,$=Z,M=O;return i(),n("div",te,[_(M,{scrollbar:!1},{default:m(()=>[_(s,{"show-icon":"",message:"回收站内的文档依然占用账户资源，请及时清理无用数据"}),l("div",oe,[l("div",ae,[_(r,{style:{width:"282px"},value:t.file_name,"onUpdate:value":o[0]||(o[0]=p=>t.file_name=p),placeholder:"请输入文档名称搜索",onChange:g},{suffix:m(()=>[_(E(A),{onClick:g,style:{color:"rgba(0, 0, 0, 0.25)"}})]),_:1},8,["value"])])]),l("div",ie,[_($,{columns:I,"data-source":h.value,scroll:{x:1e3},loading:f.value,"row-key":"id",pagination:{current:t.page,total:t.total,pageSize:t.size,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"]},onChange:R},{bodyCell:m(({column:p,record:a})=>[p.key==="file_name"?(i(),n("div",se,[l("span",null,y(a.file_name),1),l("a",{style:{"margin-left":"2px"},onClick:k=>D(a)},"下载",8,ne)])):d("",!0),p.key==="file_size"?(i(),n(w,{key:1},[a.doc_type==3?(i(),n("span",re,"-")):(i(),n("span",le,y(a.file_size_str),1))],64)):d("",!0),p.key==="paragraph_count"?(i(),n(w,{key:2},[a.status==0||a.status==1?(i(),n("span",pe,"-")):(i(),n("span",ce,y(a.paragraph_count),1))],64)):d("",!0),p.key==="action"?(i(),V(B,{key:3,gap:12},{default:m(()=>[l("a",{onClick:k=>F(a)},"恢复",8,_e),l("a",{onClick:k=>L(a)},"删除",8,me)]),_:2},1024)):d("",!0)]),_:1},8,["data-source","loading","pagination"])])]),_:1})])}}},dt=j(de,[["__scopeId","data-v-fc98620f"]]);export{dt as default};
